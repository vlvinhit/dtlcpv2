// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ./componentsUtils ./color-picker-swatch ./dom ./interactive ./key ./loadable ./locale ./math ./t9n ./icon ./input-message ./input-number ./input-text ./progress ./button ./loader ./tab ./tab-nav ./tab-title ./tabs ./throttle".split(" "),function(B,h,f,u,y,W,v,D,z,A,E,F,G,H,I,X,Y,Z,aa,ba,ca,da){function J(){"undefined"!==typeof customElements&&"calcite-color-picker-hex-input calcite-icon calcite-input-message calcite-input-number calcite-input-text calcite-progress".split(" ").forEach(a=>
{switch(a){case "calcite-color-picker-hex-input":customElements.get(a)||customElements.define(a,ea);break;case "calcite-icon":customElements.get(a)||E.defineCustomElement();break;case "calcite-input-message":customElements.get(a)||F.defineCustomElement();break;case "calcite-input-number":customElements.get(a)||G.defineCustomElement();break;case "calcite-input-text":customElements.get(a)||H.defineCustomElement();break;case "calcite-progress":customElements.get(a)||I.defineCustomElement()}})}function K(){"undefined"!==
typeof customElements&&"calcite-color-picker calcite-button calcite-color-picker-hex-input calcite-color-picker-swatch calcite-icon calcite-input-message calcite-input-number calcite-input-text calcite-loader calcite-progress calcite-tab calcite-tab-nav calcite-tab-title calcite-tabs".split(" ").forEach(a=>{switch(a){case "calcite-color-picker":customElements.get(a)||customElements.define(a,L);break;case "calcite-button":customElements.get(a)||X.defineCustomElement();break;case "calcite-color-picker-hex-input":customElements.get(a)||
J();break;case "calcite-color-picker-swatch":customElements.get(a)||f.defineCustomElement();break;case "calcite-icon":customElements.get(a)||E.defineCustomElement();break;case "calcite-input-message":customElements.get(a)||F.defineCustomElement();break;case "calcite-input-number":customElements.get(a)||G.defineCustomElement();break;case "calcite-input-text":customElements.get(a)||H.defineCustomElement();break;case "calcite-loader":customElements.get(a)||Y.defineCustomElement();break;case "calcite-progress":customElements.get(a)||
I.defineCustomElement();break;case "calcite-tab":customElements.get(a)||Z.defineCustomElement();break;case "calcite-tab-nav":customElements.get(a)||aa.defineCustomElement();break;case "calcite-tab-title":customElements.get(a)||ba.defineCustomElement();break;case "calcite-tabs":customElements.get(a)||ca.defineCustomElement()}})}const t=f.Color$1("#007AC2"),M={r:255,g:255,b:255},r={h:360,s:100,v:100},N=r.h-1,O={s:{slider:{height:12,width:104},colorField:{height:80,width:160},thumb:{radius:10}},m:{slider:{height:12,
width:204},colorField:{height:150,width:272},thumb:{radius:10}},l:{slider:{height:12,width:384},colorField:{height:200,width:464},thumb:{radius:10}}},P=f.Color$1(),ea=h.proxyCustomElement(class extends h.H{constructor(){super();this.__registerHost();this.__attachShadow();this.calciteColorPickerHexInputChange=h.createEvent(this,"calciteColorPickerHexInputChange",6);this.onHexInputBlur=()=>{const a=this.hexInputNode;var b=a.value;const c=`#${b}`,{allowEmpty:d,internalColor:e}=this;b=d&&!b;const g=f.isLonghandHex(c);
this.onHexInputChange();b||f.isValidHex(c)&&g||(a.value=d&&!e?"":this.formatHexForInternalInput(f.rgbToHex(e.object())))};this.onOpacityInputBlur=()=>{const a=this.opacityInputNode,b=a.value,{allowEmpty:c,internalColor:d}=this;if(!c||b)a.value=c&&!d?"":this.formatOpacityForInternalInput(d)};this.onHexInputChange=()=>{var a=this.hexInputNode.value;if(a){const b=f.normalizeHex(a,!1);f.isValidHex(b)&&this.alphaChannel&&this.internalColor&&(a=f.normalizeHex(this.internalColor.hexa(),!0).slice(-2),a=`${b+
a}`)}this.internalSetValue(a,this.value)};this.onOpacityInputChange=()=>{var a=this.opacityInputNode;a.value?(a=f.opacityToAlpha(Number(a.value)),a=this.internalColor?.alpha(a).hexa()):a=a.value;this.internalSetValue(a,this.value)};this.onInputKeyDown=a=>{const {altKey:b,ctrlKey:c,metaKey:d,shiftKey:e}=a,{alphaChannel:g,hexInputNode:k,internalColor:n,value:p}=this;var {key:l}=a,q=a.composedPath();if("Tab"===l||"Enter"===l){if(q.includes(k))this.onHexInputChange();else this.onOpacityInputChange();
"Enter"===l&&a.preventDefault()}else{var m=this.value;"ArrowDown"===l||"ArrowUp"===l?(p?this.internalSetValue(f.hexify(this.nudgeRGBChannels(n,(e?10:1)*("ArrowUp"===l?1:-1),q.includes(k)?"rgb":"a"),g),m):this.internalSetValue(this.previousNonNullValue,m),a.preventDefault()):(q=b||c||d,m=1===l.length,l=f.hexChar.test(l),!m||q||l||a.preventDefault())}};this.onHexInputPaste=a=>{const b=a.clipboardData.getData("text");f.isValidHex(b)&&(a.preventDefault(),this.hexInputNode.value=b.slice(1))};this.previousNonNullValue=
this.value;this.storeHexInputRef=a=>{this.hexInputNode=a};this.storeOpacityInputRef=a=>{this.opacityInputNode=a};this.alphaChannel=this.allowEmpty=!1;this.hexLabel="Hex";this.numberingSystem=this.messages=void 0;this.scale="m";this.value=f.normalizeHex(f.hexify(P,this.alphaChannel),this.alphaChannel,!0);this.internalColor=P}connectedCallback(){const {allowEmpty:a,alphaChannel:b,value:c}=this;if(c){const d=f.normalizeHex(c,b);f.isValidHex(d,b)&&this.internalSetValue(d,d,!1)}else a&&this.internalSetValue(null,
null,!1)}componentWillLoad(){v.setUpLoadableComponent(this)}componentDidLoad(){v.setComponentLoaded(this)}handleValueChange(a,b){this.internalSetValue(a,b,!1)}render(){const {alphaChannel:a,hexLabel:b,internalColor:c,messages:d,scale:e,value:g}=this,k=this.formatHexForInternalInput(g),n=this.formatOpacityForInternalInput(c),p="l"===e?"m":"s";return h.h("div",{key:"ce81e626a720cd37d45facd4ca1f9dd748df094c",class:"container"},h.h("calcite-input-text",{key:"a26b153eb8f2e9943106c515de68a5adeec24e2b",
class:"hex-input",label:d?.hex||b,maxLength:6,onCalciteInputTextChange:this.onHexInputChange,onCalciteInternalInputTextBlur:this.onHexInputBlur,onKeyDown:this.onInputKeyDown,onPaste:this.onHexInputPaste,prefixText:"#",scale:p,value:k,ref:this.storeHexInputRef}),a?h.h("calcite-input-number",{class:"opacity-input",key:"opacity-input",label:d?.opacity,max:100,maxLength:3,min:0,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputNumberChange:this.onOpacityInputChange,onCalciteInternalInputNumberBlur:this.onOpacityInputBlur,
onKeyDown:this.onInputKeyDown,scale:p,suffixText:"%",value:n,ref:this.storeOpacityInputRef}):null)}async setFocus(){await v.componentFocusable(this);return u.focusElement(this.hexInputNode)}internalSetValue(a,b,c=!0){if(a){var {alphaChannel:d}=this;a=f.normalizeHex(a,d,d);if(f.isValidHex(a,d)){({internalColor:b}=this);a=f.Color$1(a);const e=f.normalizeHex(f.hexify(a,d),d);d=!b||e!==f.normalizeHex(f.hexify(b,d),d);this.internalColor=a;this.value=this.previousNonNullValue=e;d&&c&&this.calciteColorPickerHexInputChange.emit();
return}}else if(this.allowEmpty){this.value=this.internalColor=null;c&&this.calciteColorPickerHexInputChange.emit();return}this.value=b}formatHexForInternalInput(a){return a?a.replace("#","").slice(0,6):""}formatOpacityForInternalInput(a){return a?`${f.alphaToOpacity(a.alpha())}`:""}nudgeRGBChannels(a,b,c){const d=a.array();var e=d.slice(0,3);"rgb"===c?e=[...e.map(g=>g+b),this.alphaChannel?d[3]:void 0]:(a=f.opacityToAlpha(f.alphaToOpacity(a.alpha())+b),e=[...e,a]);return f.Color$1(e)}get el(){return this}static get watchers(){return{value:["handleValueChange"]}}static get style(){return":host{display:block}.container{display:flex;inline-size:100%;flex-wrap:nowrap;align-items:center}.hex-input{flex-grow:1;text-transform:uppercase}.opacity-input{inline-size:68px;margin-inline-start:-1px}:host([scale\x3ds]) .container{flex-wrap:wrap;row-gap:0.125rem}:host([scale\x3ds]) .opacity-input{inline-size:unset;margin-inline-start:unset}:host([scale\x3dl]) .opacity-input{inline-size:88px}:host([hidden]){display:none}[hidden]{display:none}"}},
[1,"calcite-color-picker-hex-input",{allowEmpty:[4,"allow-empty"],alphaChannel:[4,"alpha-channel"],hexLabel:[1,"hex-label"],messages:[16],numberingSystem:[1,"numbering-system"],scale:[513],value:[1537],internalColor:[32],setFocus:[64]},void 0,{value:["handleValueChange"]}]);J();const L=h.proxyCustomElement(class extends h.H{constructor(){super();this.__registerHost();this.__attachShadow();this.calciteColorPickerChange=h.createEvent(this,"calciteColorPickerChange",6);this.calciteColorPickerInput=h.createEvent(this,
"calciteColorPickerInput",6);this.internalColorUpdateContext=null;this.mode=f.CSSColorMode.HEX;this.shiftKeyChannelAdjustment=0;this.handleTabActivate=a=>{this.channelMode=a.currentTarget.getAttribute("data-color-mode");this.updateChannelsFromColor(this.color)};this.handleColorFieldScopeKeyDown=a=>{const {key:b}=a,c={ArrowUp:{x:0,y:-10},ArrowRight:{x:10,y:0},ArrowDown:{x:0,y:10},ArrowLeft:{x:-10,y:0}};c[b]&&(a.preventDefault(),this.scopeOrientation="ArrowDown"===b||"ArrowUp"===b?"vertical":"horizontal",
this.captureColorFieldColor(this.colorFieldScopeLeft+c[b].x||0,this.colorFieldScopeTop+c[b].y||0,!1))};this.handleHueScopeKeyDown=a=>{var b=a.shiftKey?10:1;const {key:c}=a,d={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};d[c]&&(a.preventDefault(),a=d[c]*b,b=this.baseColorFieldColor.hue(),a=this.baseColorFieldColor.hue(b+a),this.internalColorSet(a,!1))};this.handleHexInputChange=a=>{a.stopPropagation();const {isClearable:b,color:c}=this;a=a.target.value;if(b&&!a)this.internalColorSet(null);else{var d=
c&&f.normalizeHex(f.hexify(c,f.alphaCompatible(this.mode)));a!==d&&this.internalColorSet(f.Color$1(a))}};this.handleSavedColorSelect=a=>{this.internalColorSet(f.Color$1(a.currentTarget.color))};this.handleChannelInput=a=>{const b=a.currentTarget;var c=Number(b.getAttribute("data-channel-index"));c=3===c?100:"rgb"===this.channelMode?M[Object.keys(M)[c]]:r[Object.keys(r)[c]];c=this.isClearable&&!b.value?"":z.clamp(Number(b.value)+this.shiftKeyChannelAdjustment,0,c).toString();b.value=c;""!==c&&0!==
this.shiftKeyChannelAdjustment&&this.handleChannelChange(a)};this.handleChannelChange=a=>{var b=a.currentTarget;a=Number(b.getAttribute("data-channel-index"));const c=[...this.channels];this.isClearable&&!b.value?(this.channels=[null,null,null,null],this.internalColorSet(null)):(b=Number(b.value),c[a]=3===a?f.opacityToAlpha(b):b,this.updateColorFromChannels(c))};this.handleSavedColorKeyDown=a=>{W.isActivationKey(a.key)&&(a.preventDefault(),this.handleSavedColorSelect(a))};this.handleColorFieldPointerDown=
a=>{if(u.isPrimaryPointerButton(a)){var {offsetX:b,offsetY:c}=a;window.addEventListener("pointermove",this.globalPointerMoveHandler);window.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0});this.activeCanvasInfo={context:this.colorFieldRenderingContext,bounds:this.colorFieldRenderingContext.canvas.getBoundingClientRect()};this.captureColorFieldColor(b,c);this.colorFieldScopeNode.focus()}};this.handleHueSliderPointerDown=a=>{u.isPrimaryPointerButton(a)&&({offsetX:a}=a,window.addEventListener("pointermove",
this.globalPointerMoveHandler),window.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeCanvasInfo={context:this.hueSliderRenderingContext,bounds:this.hueSliderRenderingContext.canvas.getBoundingClientRect()},this.captureHueSliderColor(a),this.hueScopeNode.focus())};this.handleOpacitySliderPointerDown=a=>{u.isPrimaryPointerButton(a)&&({offsetX:a}=a,window.addEventListener("pointermove",this.globalPointerMoveHandler),window.addEventListener("pointerup",this.globalPointerUpHandler,
{once:!0}),this.activeCanvasInfo={context:this.opacitySliderRenderingContext,bounds:this.opacitySliderRenderingContext.canvas.getBoundingClientRect()},this.captureOpacitySliderValue(a),this.opacityScopeNode.focus())};this.globalPointerUpHandler=a=>{u.isPrimaryPointerButton(a)&&(a=this.activeCanvasInfo,this.activeCanvasInfo=null,this.drawColorControls(),a&&this.calciteColorPickerChange.emit())};this.globalPointerMoveHandler=a=>{const {activeCanvasInfo:b,el:c}=this;if(c.isConnected&&b){var {context:d,
bounds:e}=b,{clientX:g,clientY:k}=a;if(d.canvas.matches(":hover")){a=g-e.x;var n=k-e.y}else a=g<e.x+e.width&&g>e.x?g-e.x:g<e.x?0:e.width,n=k<e.y+e.height&&k>e.y?k-e.y:k<e.y?0:e.height;d===this.colorFieldRenderingContext?this.captureColorFieldColor(a,n,!1):d===this.hueSliderRenderingContext?this.captureHueSliderColor(a):d===this.opacitySliderRenderingContext&&this.captureOpacitySliderValue(a)}};this.storeColorFieldScope=a=>{this.colorFieldScopeNode=a};this.storeHueScope=a=>{this.hueScopeNode=a};this.renderChannelsTabTitle=
a=>{const {channelMode:b,messages:c}=this;return h.h("calcite-tab-title",{class:"color-mode","data-color-mode":a,key:a,onCalciteTabsActivate:this.handleTabActivate,selected:a===b},"rgb"===a?c.rgb:c.hsv)};this.renderChannelsTab=a=>{const {isClearable:b,channelMode:c,channels:d,messages:e,alphaChannel:g}=this,k=a===c,n="rgb"===a?[e.red,e.green,e.blue]:[e.hue,e.saturation,e.value],p=u.getElementDir(this.el),l=g?d:d.slice(0,3);return h.h("calcite-tab",{class:"control",key:a,selected:k},h.h("div",{class:"channels",
dir:"ltr"},l.map((q,m)=>{const w=3===m;w&&(q=b&&!q?q:f.alphaToOpacity(q));return this.renderChannel(q,m,n[m],p,w?"%":"")})))};this.renderChannel=(a,b,c,d,e)=>h.h("calcite-input-number",{class:"channel","data-channel-index":b,dir:d,key:b,label:c,lang:this.effectiveLocale,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputNumberChange:this.handleChannelChange,onCalciteInputNumberInput:this.handleChannelInput,onKeyDown:this.handleKeyDown,scale:"l"===this.scale?"m":"s",style:{marginLeft:0<
b&&("s"!==this.scale||!this.alphaChannel||3!==b)?"-1px":""},suffixText:e,value:a?.toString()});this.deleteColor=()=>{const a=f.hexify(this.color,this.alphaChannel);if(-1<this.savedColors.indexOf(a)){var b=this.savedColors.filter(d=>d!==a);this.savedColors=b;var c=`${"calcite-color-"}${this.storageId}`;this.storageId&&localStorage.setItem(c,JSON.stringify(b))}};this.saveColor=()=>{var a=f.hexify(this.color,this.alphaChannel);if(!(-1<this.savedColors.indexOf(a))){this.savedColors=a=[...this.savedColors,
a];var b=`${"calcite-color-"}${this.storageId}`;this.storageId&&localStorage.setItem(b,JSON.stringify(a))}};this.drawColorControls=da.throttle((a="all")=>{"all"!==a&&"color-field"!==a||!this.colorFieldRenderingContext||this.drawColorField();"all"!==a&&"hue-slider"!==a||!this.hueSliderRenderingContext||this.drawHueSlider();this.alphaChannel&&("all"===a||"opacity-slider"===a)&&this.opacitySliderRenderingContext&&this.drawOpacitySlider()},16);this.captureColorFieldColor=(a,b,c=!0)=>{const {dimensions:{colorField:{height:d,
width:e}}}=this;a=Math.round(r.s/e*a);b=Math.round(r.v/d*(d-b));this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(a).value(b),c)};this.initColorField=a=>{this.colorFieldRenderingContext=a.getContext("2d");this.updateCanvasSize("color-field");this.drawColorControls()};this.initHueSlider=a=>{this.hueSliderRenderingContext=a.getContext("2d");this.updateCanvasSize("hue-slider");this.drawHueSlider()};this.initOpacitySlider=a=>{a&&(this.opacitySliderRenderingContext=a.getContext("2d"),this.updateCanvasSize("opacity-slider"),
this.drawOpacitySlider())};this.storeOpacityScope=a=>{this.opacityScopeNode=a};this.handleOpacityScopeKeyDown=a=>{var b=a.shiftKey?10:1;const {key:c}=a,d={ArrowUp:.01,ArrowRight:.01,ArrowDown:-.01,ArrowLeft:-.01};d[c]&&(a.preventDefault(),a=d[c]*b,b=this.baseColorFieldColor.alpha(),a=this.baseColorFieldColor.alpha(b+a),this.internalColorSet(a,!1))};this.clearable=this.channelsDisabled=this.alphaChannel=this.allowEmpty=!1;this.color=t;this.disabled=!1;this.format="auto";this.savedDisabled=this.hideSaved=
this.hideHex=this.hexDisabled=this.hideChannels=!1;this.scale="m";this.numberingSystem=this.messageOverrides=this.storageId=void 0;this.value=f.normalizeHex(f.hexify(t,this.alphaChannel));this.defaultMessages=void 0;this.channelMode="rgb";this.channels=this.toChannels(t);this.dimensions=O.m;this.effectiveLocale="";this.messages=void 0;this.savedColors=[];this.scopeOrientation=this.opacityScopeLeft=this.hueScopeLeft=this.colorFieldScopeLeft=this.colorFieldScopeTop=void 0}handleAllowEmptyOrClearableChange(){this.isClearable=
this.clearable||this.allowEmpty}handleAlphaChannelChange(a){const {format:b}=this;a&&"auto"!==b&&!f.alphaCompatible(b)&&(console.warn(`ignoring alphaChannel as the current format (${b}) does not support alpha`),this.alphaChannel=!1)}handleColorChange(a,b){this.drawColorControls();this.updateChannelsFromColor(a);this.previousColor=b}handleFormatOrAlphaChannelChange(){this.setMode(this.format);this.internalColorSet(this.color,!1,"internal")}handleScaleChange(a="m"){this.updateDimensions(a);this.updateCanvasSize("all");
this.drawColorControls()}onMessagesChange(){}handleValueChange(a,b){const {isClearable:c,format:d}=this;let e=!1;if(!c||a){const g=f.parseMode(a);if(!g||"auto"!==d&&g!==d){this.showIncompatibleColorWarning(a,d);this.value=b;return}e=this.mode!==g;this.setMode(g,null===this.internalColorUpdateContext)}b=this.activeCanvasInfo;"initial"!==this.internalColorUpdateContext&&("user-interaction"===this.internalColorUpdateContext?(this.calciteColorPickerInput.emit(),b||this.calciteColorPickerChange.emit()):
(a=c&&!a?null:f.Color$1(null!=a&&"object"===typeof a&&f.alphaCompatible(this.mode)?f.normalizeColor(a):a),b=!f.colorEqual(a,this.color),(e||b)&&this.internalColorSet(a,this.alphaChannel&&!(this.mode.endsWith("a")||this.mode.endsWith("a-css")),"internal")))}get baseColorFieldColor(){return this.color||this.previousColor||t}effectiveLocaleChange(){A.updateMessages(this,this.effectiveLocale)}handleChannelKeyUpOrDown(a){this.shiftKeyChannelAdjustment=0;const {key:b}=a;if(("ArrowUp"===b||"ArrowDown"===
b)&&a.composedPath().some(d=>d.classList?.contains("channel"))){var {shiftKey:c}=a;a.preventDefault();this.color?this.shiftKeyChannelAdjustment="ArrowUp"===b&&c?9:"ArrowDown"===b&&c?-9:0:(this.internalColorSet(this.previousColor),a.stopPropagation())}}async setFocus(){await v.componentFocusable(this);this.el.focus()}async componentWillLoad(){v.setUpLoadableComponent(this);this.handleAllowEmptyOrClearableChange();const {isClearable:a,color:b,format:c,value:d}=this;var e=a&&!d,g=f.parseMode(d);g=e||
"auto"===c&&g||c===g;e=e?null:g?f.Color$1(d):b;g||this.showIncompatibleColorWarning(d,c);this.setMode(c,!1);this.internalColorSet(e,!1,"initial");this.updateDimensions(this.scale);e=`${"calcite-color-"}${this.storageId}`;this.storageId&&localStorage.getItem(e)&&(this.savedColors=JSON.parse(localStorage.getItem(e)));await A.setUpMessages(this)}connectedCallback(){y.connectInteractive(this);D.connectLocalized(this);A.connectMessages(this)}componentDidLoad(){v.setComponentLoaded(this)}disconnectedCallback(){window.removeEventListener("pointermove",
this.globalPointerMoveHandler);window.removeEventListener("pointerup",this.globalPointerUpHandler);y.disconnectInteractive(this);D.disconnectLocalized(this);A.disconnectMessages(this)}componentDidRender(){y.updateHostInteraction(this)}render(){const {channelsDisabled:a,color:b,colorFieldScopeLeft:c,colorFieldScopeTop:d,dimensions:{slider:{width:e},thumb:{radius:g}},hexDisabled:k,hideChannels:n,hideHex:p,hideSaved:l,hueScopeLeft:q,messages:m,alphaChannel:w,opacityScopeLeft:fa,savedColors:Q,savedDisabled:ha,
scale:x,scopeOrientation:ia}=this,R=b?f.hexify(b,w):null,ja=q??e*t.hue()/r.h,ka=fa??e*f.alphaToOpacity(t.alpha())/100,S=null===b,C="vertical"===ia,T=k||p,U=a||n,la=ha||l,[ma,na]=this.getAdjustedScopePosition(c,d),[oa,pa]=this.getAdjustedScopePosition(ja,g),[qa,ra]=this.getAdjustedScopePosition(ka,g);return h.h(y.InteractiveContainer,{key:"5f347cb136350e7661b7b479ee86a16bb85414c3",disabled:this.disabled},h.h("div",{key:"0294cbc1d16db228c22a2ae1bd061d9a683c1378",class:"container"},h.h("div",{key:"f7531da7e77293d52f5f8220443258e40f07f2d3",
class:"control-and-scope"},h.h("canvas",{key:"6738d5bc8ec0f77c01eaac72b6b89edeea39abd3",class:"color-field",onPointerDown:this.handleColorFieldPointerDown,ref:this.initColorField}),h.h("div",{key:"932e10e761c6e8732e3412b049c895df18c4358f","aria-label":C?m.value:m.saturation,"aria-valuemax":C?r.v:r.s,"aria-valuemin":"0","aria-valuenow":(C?b?.saturationv():b?.value())||"0",class:{scope:!0,["scope--color-field"]:!0},onKeyDown:this.handleColorFieldScopeKeyDown,role:"slider",style:{top:`${na||0}px`,left:`${ma||
0}px`},tabindex:"0",ref:this.storeColorFieldScope})),h.h("div",{key:"1d1e670478df18f1a8ad35d9ca217b378e103468",class:"preview-and-sliders"},h.h("calcite-color-picker-swatch",{key:"e65dd58f2aebb184db914c3a2c4e9782eb4b1e7c",class:"preview",color:R,scale:"l"}),h.h("div",{key:"98fb46881b6c40899b8fdfa4afeb521356d1e250",class:"sliders"},h.h("div",{key:"7367b44dcc87a8cfbd5cd913ebee690eeabfcb92",class:"control-and-scope"},h.h("canvas",{key:"4fe31f39350ac02fe527452da248b07b573dadac",class:{slider:!0,["hue-slider"]:!0},
onPointerDown:this.handleHueSliderPointerDown,ref:this.initHueSlider}),h.h("div",{key:"47048d9a779471169b1c4ec14d70a1a258914b1a","aria-label":m.hue,"aria-valuemax":r.h,"aria-valuemin":"0","aria-valuenow":b?.round().hue()||t.round().hue(),class:{scope:!0,["scope--hue"]:!0},onKeyDown:this.handleHueScopeKeyDown,role:"slider",style:{top:`${pa}px`,left:`${oa}px`},tabindex:"0",ref:this.storeHueScope})),w?h.h("div",{class:"control-and-scope"},h.h("canvas",{class:{slider:!0,["opacity-slider"]:!0},onPointerDown:this.handleOpacitySliderPointerDown,
ref:this.initOpacitySlider}),h.h("div",{"aria-label":m.opacity,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":(b||t).round().alpha(),class:{scope:!0,["scope--opacity"]:!0},onKeyDown:this.handleOpacityScopeKeyDown,role:"slider",style:{top:`${ra}px`,left:`${qa}px`},tabindex:"0",ref:this.storeOpacityScope})):null)),T&&U?null:h.h("div",{class:{["control-section"]:!0,section:!0}},h.h("div",{class:"hex-and-channels-group"},T?null:h.h("div",{class:"color-hex-options"},h.h("calcite-color-picker-hex-input",
{allowEmpty:this.isClearable,alphaChannel:w,class:"control",messages:m,numberingSystem:this.numberingSystem,onCalciteColorPickerHexInputChange:this.handleHexInputChange,scale:x,value:R})),U?null:h.h("calcite-tabs",{class:{["color-mode-container"]:!0,["section--split"]:!0},scale:"l"===x?"m":"s"},h.h("calcite-tab-nav",{slot:"title-group"},this.renderChannelsTabTitle("rgb"),this.renderChannelsTabTitle("hsv")),this.renderChannelsTab("rgb"),this.renderChannelsTab("hsv")))),la?null:h.h("div",{class:{["saved-colors-section"]:!0,
section:!0}},h.h("div",{class:"header"},h.h("label",null,m.saved),h.h("div",{class:"saved-colors-buttons"},h.h("calcite-button",{appearance:"transparent",class:"delete-color",disabled:S,iconStart:"minus",kind:"neutral",label:m.deleteColor,onClick:this.deleteColor,scale:x,type:"button"}),h.h("calcite-button",{appearance:"transparent",class:"save-color",disabled:S,iconStart:"plus",kind:"neutral",label:m.saveColor,onClick:this.saveColor,scale:x,type:"button"}))),0<Q.length?h.h("div",{class:"saved-colors"},
[...Q.map(V=>h.h("calcite-color-picker-swatch",{class:"saved-color",color:V,key:V,onClick:this.handleSavedColorSelect,onKeyDown:this.handleSavedColorKeyDown,scale:x,tabIndex:0}))]):null)))}handleKeyDown(a){"Enter"===a.key&&a.preventDefault()}showIncompatibleColorWarning(a,b){console.warn(`ignoring color value (${a}) as it is not compatible with the current format (${b})`)}setMode(a,b=!0){this.mode=this.ensureCompatibleMode("auto"===a?this.mode:a,b)}ensureCompatibleMode(a,b){var {alphaChannel:c}=this;
const d=f.alphaCompatible(a);return c&&!d?(c=f.toAlphaMode(a),b&&console.warn(`setting format to (${c}) as the provided one (${a}) does not support alpha`),c):!c&&d?(c=f.toNonAlphaMode(a),b&&console.warn(`setting format to (${c}) as the provided one (${a}) does not support alpha`),c):a}captureHueSliderColor(a){const {dimensions:{slider:{width:b}}}=this;this.internalColorSet(this.baseColorFieldColor.hue(N/b*a),!1)}captureOpacitySliderValue(a){const {dimensions:{slider:{width:b}}}=this;a=f.opacityToAlpha(100/
b*a);this.internalColorSet(this.baseColorFieldColor.alpha(a),!1)}internalColorSet(a,b=!0,c="user-interaction"){b&&f.colorEqual(a,this.color)||(this.internalColorUpdateContext=c,this.color=a,this.value=this.toValue(a),this.internalColorUpdateContext=null)}toValue(a,b=this.mode){if(!a)return null;if(b.includes("hex"))return b=b===f.CSSColorMode.HEXA,f.normalizeHex(f.hexify(a.round(),b),b);if(b.includes("-css")){var c=a[b.replace("-css","").replace("a","")]().round().string();return(b.endsWith("a")||
b.endsWith("a-css"))&&1===a.alpha()?(b=c.slice(0,3),c=c.slice(4,-1),`${b}a(${c}, ${a.alpha()})`):c}a=a[f.toNonAlphaMode(b)]().round().object();return b.endsWith("a")?f.normalizeAlpha(a):a}getSliderCapSpacing(){const {dimensions:{slider:{height:a},thumb:{radius:b}}}=this;return 2*b-a}updateDimensions(a="m"){this.dimensions=O[a]}drawColorField(){const a=this.colorFieldRenderingContext,{dimensions:{colorField:{height:b,width:c}}}=this;a.fillStyle=this.baseColorFieldColor.hsv().saturationv(100).value(100).alpha(1).string();
a.fillRect(0,0,c,b);var d=a.createLinearGradient(0,0,c,0);d.addColorStop(0,"rgba(255,255,255,1)");d.addColorStop(1,"rgba(255,255,255,0)");a.fillStyle=d;a.fillRect(0,0,c,b);d=a.createLinearGradient(0,0,0,b);d.addColorStop(0,"rgba(0,0,0,0)");d.addColorStop(1,"rgba(0,0,0,1)");a.fillStyle=d;a.fillRect(0,0,c,b);this.drawActiveColorFieldColor()}setCanvasContextSize(a,{height:b,width:c}){if(a){var d=window.devicePixelRatio||1;a.width=c*d;a.height=b*d;a.style.height=`${b}px`;a.style.width=`${c}px`;a.getContext("2d").scale(d,
d)}}updateCanvasSize(a="all"){var {dimensions:b}=this;"all"!==a&&"color-field"!==a||this.setCanvasContextSize(this.colorFieldRenderingContext?.canvas,b.colorField);b={width:b.slider.width,height:b.slider.height+2*(b.thumb.radius-b.slider.height/2)};"all"!==a&&"hue-slider"!==a||this.setCanvasContextSize(this.hueSliderRenderingContext?.canvas,b);"all"!==a&&"opacity-slider"!==a||this.setCanvasContextSize(this.opacitySliderRenderingContext?.canvas,b)}drawActiveColorFieldColor(){var {color:a}=this;if(a){a=
a.hsv();var {dimensions:{colorField:{height:b,width:c},thumb:{radius:d}}}=this,e=a.saturationv()/(r.s/c),g=b-a.value()/(r.v/b);requestAnimationFrame(()=>{this.colorFieldScopeLeft=e;this.colorFieldScopeTop=g});this.drawThumb(this.colorFieldRenderingContext,d,e,g,a,!1)}}drawThumb(a,b,c,d,e,g){const k=2*Math.PI;a.beginPath();a.arc(c,d,b,0,k);a.fillStyle="#fff";a.fill();a.strokeStyle="rgba(0,0,0,0.3)";a.lineWidth=1;a.stroke();if(g&&1>e.alpha()){const n=a.createPattern(this.getCheckeredBackgroundPattern(),
"repeat");a.beginPath();a.arc(c,d,b-3,0,k);a.fillStyle=n;a.fill()}a.globalCompositeOperation="source-atop";a.beginPath();a.arc(c,d,b-3,0,k);b=g?e.alpha():1;a.fillStyle=e.rgb().alpha(b).string();a.fill();a.globalCompositeOperation="source-over"}drawActiveHueSliderColor(){var {color:a}=this;if(a){a=a.hsv().saturationv(100).value(100);var {dimensions:{slider:{width:b},thumb:{radius:c}}}=this,d=a.hue()/(N/b),e=this.getSliderBoundX(d,b,c);requestAnimationFrame(()=>{this.hueScopeLeft=e});this.drawThumb(this.hueSliderRenderingContext,
c,e,c,a,!1)}}drawHueSlider(){const a=this.hueSliderRenderingContext,{dimensions:{slider:{height:b,width:c},thumb:{radius:d}}}=this,e=d-b/2,g=a.createLinearGradient(0,0,c,0),k="red yellow lime cyan blue magenta #ff0004".split(" "),n=1/(k.length-1);let p=0;k.forEach(l=>{g.addColorStop(p,f.Color$1(l).string());p+=n});a.clearRect(0,0,c,b+2*this.getSliderCapSpacing());this.drawSliderPath(a,b,c,0,e);a.fillStyle=g;a.fill();a.strokeStyle="rgba(0,0,0,0.3)";a.lineWidth=1;a.stroke();this.drawActiveHueSliderColor()}drawOpacitySlider(){const a=
this.opacitySliderRenderingContext,{baseColorFieldColor:b,dimensions:{slider:{height:c,width:d},thumb:{radius:e}}}=this;var g=e-c/2;a.clearRect(0,0,d,c+2*this.getSliderCapSpacing());const k=a.createLinearGradient(0,g,d,0),n=b.rgb().alpha(0),p=b.rgb().alpha(.5),l=b.rgb().alpha(1);k.addColorStop(0,n.string());k.addColorStop(.5,p.string());k.addColorStop(1,l.string());this.drawSliderPath(a,c,d,0,g);g=a.createPattern(this.getCheckeredBackgroundPattern(),"repeat");a.fillStyle=g;a.fill();a.fillStyle=k;
a.fill();a.strokeStyle="rgba(0,0,0,0.3)";a.lineWidth=1;a.stroke();this.drawActiveOpacitySliderColor()}drawSliderPath(a,b,c,d,e){const g=b/2+1;a.beginPath();a.moveTo(d+g,e);a.lineTo(d+c-g,e);a.quadraticCurveTo(d+c,e,d+c,e+g);a.lineTo(d+c,e+b-g);a.quadraticCurveTo(d+c,e+b,d+c-g,e+b);a.lineTo(d+g,e+b);a.quadraticCurveTo(d,e+b,d,e+b-g);a.lineTo(d,e+g);a.quadraticCurveTo(d,e,d+g,e);a.closePath()}getCheckeredBackgroundPattern(){if(this.checkerPattern)return this.checkerPattern;const a=document.createElement("canvas");
a.width=10;a.height=10;const b=a.getContext("2d");b.fillStyle="#ccc";b.fillRect(0,0,10,10);b.fillStyle="#fff";b.fillRect(0,0,5,5);b.fillRect(5,5,5,5);return this.checkerPattern=a}drawActiveOpacitySliderColor(){const {color:a}=this;if(a){var {dimensions:{slider:{width:b},thumb:{radius:c}}}=this,d=f.alphaToOpacity(a.alpha())/(100/b),e=this.getSliderBoundX(d,b,c);requestAnimationFrame(()=>{this.opacityScopeLeft=e});this.drawThumb(this.opacitySliderRenderingContext,c,e,c,a,!0)}}getSliderBoundX(a,b,c){const d=
z.closeToRangeEdge(a,b,c);return 0===d?a:-1===d?z.remap(a,0,b,c,2*c):z.remap(a,0,b,b-2*c,b-c)}updateColorFromChannels(a){this.internalColorSet(f.Color$1(a,this.channelMode))}updateChannelsFromColor(a){this.channels=a?this.toChannels(a):[null,null,null,null]}toChannels(a){const {channelMode:b}=this;a=a[b]().array().map((c,d)=>3===d?c:Math.floor(c));3===a.length&&a.push(1);return a}getAdjustedScopePosition(a,b){return[a-.5,b-.5]}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{allowEmpty:["handleAllowEmptyOrClearableChange"],
clearable:["handleAllowEmptyOrClearableChange"],alphaChannel:["handleAlphaChannelChange","handleFormatOrAlphaChannelChange"],color:["handleColorChange"],format:["handleFormatOrAlphaChannelChange"],scale:["handleScaleChange"],messageOverrides:["onMessagesChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return':host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale\x3ds]){--calcite-color-picker-spacing:8px}:host([scale\x3ds]) .container{inline-size:160px}:host([scale\x3ds]) .saved-colors{gap:0.25rem;grid-template-columns:repeat(auto-fill, 20px)}:host([scale\x3dm]){--calcite-color-picker-spacing:12px}:host([scale\x3dm]) .container{inline-size:272px}:host([scale\x3dl]){--calcite-color-picker-spacing:16px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale\x3dl]) .container{inline-size:464px}:host([scale\x3dl]) .section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}:host([scale\x3dl]) .saved-colors{grid-template-columns:repeat(auto-fill, 32px)}:host([scale\x3dl]) .control-section{flex-wrap:nowrap;align-items:baseline;flex-wrap:wrap}:host([scale\x3dl]) .color-hex-options{display:flex;flex-shrink:1;flex-direction:column;justify-content:space-around}:host([scale\x3dl]) .color-mode-container{flex-shrink:3}.container{background-color:var(--calcite-color-foreground-1);display:inline-block;border:1px solid var(--calcite-color-border-1)}.control-and-scope{position:relative;display:flex;cursor:pointer;touch-action:none}.scope{pointer-events:none;position:absolute;z-index:var(--calcite-z-index);block-size:1px;inline-size:1px;border-radius:9999px;background-color:transparent;font-size:var(--calcite-font-size--1);outline-color:transparent}.scope:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(\n            2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          );outline-offset:11px}.hex-and-channels-group{inline-size:100%}.hex-and-channels-group,.control-section{display:flex;flex-direction:row;flex-wrap:wrap}.section{padding-block:0 var(--calcite-color-picker-spacing);padding-inline:var(--calcite-color-picker-spacing)}.section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}.sliders{display:flex;flex-direction:column;justify-content:space-between;margin-inline-start:var(--calcite-color-picker-spacing)}.preview-and-sliders{display:flex;align-items:center;padding:var(--calcite-color-picker-spacing)}.color-hex-options,.section--split{flex-grow:1}.header{display:flex;align-items:center;justify-content:space-between;color:var(--calcite-color-text-1)}.color-mode-container{padding-block-start:var(--calcite-color-picker-spacing)}.channels{display:flex;row-gap:0.125rem}.channel[data-channel-index\x3d"3"]{inline-size:159px}:host([scale\x3ds]) .channels{flex-wrap:wrap}:host([scale\x3ds]) .channel{flex-basis:30%;flex-grow:1}:host([scale\x3ds]) .channel[data-channel-index\x3d"3"]{inline-size:unset;margin-inline-start:unset}:host([scale\x3dl]) .channel[data-channel-index\x3d"3"]{inline-size:131px}.saved-colors{display:grid;gap:0.5rem;padding-block-start:var(--calcite-color-picker-spacing);grid-template-columns:repeat(auto-fill, 24px)}.saved-colors-buttons{display:flex}.saved-color{outline-offset:0;outline-color:transparent;cursor:pointer}.saved-color:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.saved-color:hover{transition:outline-color var(--calcite-internal-animation-timing-fast) ease-in-out;outline:2px solid var(--calcite-color-border-2);outline-offset:2px}:host([hidden]){display:none}[hidden]{display:none}'}},
[17,"calcite-color-picker",{allowEmpty:[516,"allow-empty"],alphaChannel:[4,"alpha-channel"],channelsDisabled:[4,"channels-disabled"],clearable:[516],color:[1040],disabled:[516],format:[513],hideChannels:[516,"hide-channels"],hexDisabled:[4,"hex-disabled"],hideHex:[516,"hide-hex"],hideSaved:[516,"hide-saved"],savedDisabled:[516,"saved-disabled"],scale:[513],storageId:[513,"storage-id"],messageOverrides:[1040],numberingSystem:[513,"numbering-system"],value:[1025],messages:[1040],defaultMessages:[32],
channelMode:[32],channels:[32],dimensions:[32],effectiveLocale:[32],savedColors:[32],colorFieldScopeTop:[32],colorFieldScopeLeft:[32],hueScopeLeft:[32],opacityScopeLeft:[32],scopeOrientation:[32],setFocus:[64]},[[2,"keydown","handleChannelKeyUpOrDown"],[2,"keyup","handleChannelKeyUpOrDown"]],{allowEmpty:["handleAllowEmptyOrClearableChange"],clearable:["handleAllowEmptyOrClearableChange"],alphaChannel:["handleAlphaChannelChange","handleFormatOrAlphaChannelChange"],color:["handleColorChange"],format:["handleFormatOrAlphaChannelChange"],
scale:["handleScaleChange"],messageOverrides:["onMessagesChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleChange"]}]);K();B.CalciteColorPicker=L;B.defineCustomElement=K;Object.defineProperty(B,Symbol.toStringTag,{value:"Module"})});