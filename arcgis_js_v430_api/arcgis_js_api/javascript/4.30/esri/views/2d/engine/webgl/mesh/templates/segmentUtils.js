// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../symbols/cim/constants"],function(w,E){function K(a,c,b){a[0]=c[0]-b[0];a[1]=c[1]-b[1];return a}function L(a){var c=a[0],b=a[1];c=Math.sqrt(c*c+b*b);a[0]/=c;a[1]/=c}function H(a){return a.length-1}function I(a){let c=0;for(let b=0;b<H(a);b++)c+=M(a,b);return c}function M(a,c,b=1){let [d,g]=a[c+1];[d,g]=[Math.round(d),Math.round(g)];return Math.sqrt(d*d+g*g)*b}function J(a,c,b,d,g){if(!(b<c)){var m=d.clone().seek(b/2);null!=m&&(a(m.clone(),b,g),b=(b-c)/2,m=m.seek(c/
2),J(a,c,b,d,g+1),J(a,c,b,m,g+1))}}class A{constructor(a,c,b,d,g){this._segments=a;this._index=c;this._distance=b;this._xStart=d;this._yStart=g;this._done=!1}static create(a){return new A(a,0,0,a[0][0],a[0][1])}clone(){return new A(this._segments,this._index,this._distance,this.xStart,this.yStart)}equals(a){return this._index===a._index||a._index===this._index-1&&(0===this._distance||1===a._distance)||a._index===this._index+1&&(1===this._distance||0===a._distance)}leq(a){return this._index<a._index||
this._index===a._index&&this._distance<=a._distance}geq(a){return this._index>a._index||this._index===a._index&&this._distance>=a._distance}get _segment(){return this._segments[this._index+1]}get angle(){const a=this.dy;let c=Math.acos((0*a+-1*-this.dx)/(1*this.length));0<a&&(c=2*Math.PI-c);return c}get xStart(){return this._xStart}get yStart(){return this._yStart}get x(){return this.xStart+this.distance*this.dx}get y(){return this.yStart+this.distance*this.dy}get dx(){return this._segment[0]}get dy(){return this._segment[1]}get xMidpoint(){return this.xStart+
.5*this.dx}get yMidpoint(){return this.yStart+.5*this.dy}get xEnd(){return this.xStart+this.dx}get yEnd(){return this.yStart+this.dy}get length(){const {dx:a,dy:c}=this;return Math.sqrt(a*a+c*c)}get remainingLength(){return this.length*(1-this._distance)}get backwardLength(){return this.length*this._distance}get distance(){return this._distance}get done(){return this._done}hasPrev(){return 0<=this._index-1}hasNext(){return this._index+1<H(this._segments)}next(){if(!this.hasNext())return null;this._xStart+=
this.dx;this._yStart+=this.dy;this._distance=0;this._index+=1;return this}prev(){if(!this.hasPrev())return this._done=!0,null;--this._index;this._xStart-=this.dx;this._yStart-=this.dy;this._distance=1;return this}_seekBackwards(a,c){var b=this.backwardLength;if(a<=b)return this._distance=(b-a)/this.length,this;for(b=this.backwardLength;this.prev();){if(b+this.length>a)return this._seekBackwards(a-b);b+=this.length}this._distance=0;return c?this:null}seek(a,c=!1){if(0>a)return this._seekBackwards(Math.abs(a),
c);if(a<=this.remainingLength)return this._distance=(this.backwardLength+a)/this.length,this;let b=this.remainingLength;for(;this.next();){if(b+this.length>a)return this.seek(a-b,c);b+=this.length}this._distance=1;return c?this:null}}w.SegmentCursor=A;w.pathDivide=function(a,c,b,d=!0){const g=I(a);a=A.create(a);const m=g/2;if(d){d=Math.floor(Math.max((g-c)/2,0)/c);a.seek(m-d*c);for(let e=-d;e<=d;e++)Math.abs(a.x)<E.maxTileCoordValue&&Math.abs(a.y)<E.maxTileCoordValue&&b(a.clone(),e,m+e*c,g),a.seek(c)}else a.seek(m),
Math.abs(a.x)<E.maxTileCoordValue&&Math.abs(a.y)<E.maxTileCoordValue&&b(a.clone(),0,m+0*c,g)};w.pathLength=I;w.pathSubdivide=function(a,c,b){J(b,c,I(a),A.create(a),0)};w.segmentAt=function(a,c){return a[c+1]};w.segmentCount=H;w.segmentLength=M;w.smoothPaths=function(a,c){for(let F=0;F<a.length;F++){let z=a[F];a:{var b=z,d=c;if(0>=d)break a;const l=b.length;if(3>l)break a;const f=[];var g=0;f.push(0);for(var m=1;m<l;m++){var e=b[m],p=b[m-1],t=e[0]-p[0];e=e[1]-p[1];g+=Math.sqrt(t*t+e*e);f.push(g)}d=
Math.min(d,.2*g);t=[];t.push(b[0][0]);t.push(b[0][1]);g=b[l-1][0];m=b[l-1][1];e=K([0,0],b[0],b[1]);L(e);b[0][0]+=d*e[0];b[0][1]+=d*e[1];K(e,b[l-1],b[l-2]);L(e);b[l-1][0]+=d*e[0];b[l-1][1]+=d*e[1];for(e=1;e<l;e++)f[e]+=d;f[l-1]+=d;e=.5*d;for(p=1;p<l-1;p++){let v=0,x=0,G=0;for(var h=p-1;0<=h&&!(f[h+1]<f[p]-e);h--){var q=e+f[h+1]-f[p],n=f[h+1]-f[h],k=f[p]-f[h]<e?1:q/n;if(1E-6>Math.abs(k))break;var u=k*k,B=k*q-.5*u*n,y=k*n/d,r=b[h+1],C=b[h][0]-r[0],D=b[h][1]-r[1];v+=y/B*(r[0]*k*q+.5*u*(q*C-n*r[0])-u*
k*n*C/3);x+=y/B*(r[1]*k*q+.5*u*(q*D-n*r[1])-u*k*n*D/3);G+=y}for(h=p+1;h<l&&!(f[h-1]>f[p]+e);h++){q=e-f[h-1]+f[p];n=f[h]-f[h-1];k=f[h]-f[p]<e?1:q/n;if(1E-6>Math.abs(k))break;u=k*k;B=k*q-.5*u*n;y=k*n/d;r=b[h-1];C=b[h][0]-r[0];D=b[h][1]-r[1];v+=y/B*(r[0]*k*q+.5*u*(q*C-n*r[0])-u*k*n*C/3);x+=y/B*(r[1]*k*q+.5*u*(q*D-n*r[1])-u*k*n*D/3);G+=y}t.push(v/G);t.push(x/G)}t.push(g);t.push(m);for(let v=0,x=0;v<l;v++)b[v][0]=t[x++],b[v][1]=t[x++]}b=[];b.push(z[0]);for(d=1;d<z.length;d++){const [l,f]=z[d-1],[v,x]=
z[d];b.push([v-l,x-f])}z=a[F]=b}return a};Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})});