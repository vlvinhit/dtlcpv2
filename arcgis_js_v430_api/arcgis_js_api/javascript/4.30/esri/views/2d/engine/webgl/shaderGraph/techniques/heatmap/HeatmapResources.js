// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../../core/Logger ../../../../../../../core/maybe ../../../../../../webgl/enums ../../../../../../webgl/FramebufferObject ../../../../../../webgl/heatmapTextureUtils ../../../../../../webgl/RenderbufferDescriptor ../../../../../../webgl/Texture ../../../../../../webgl/TextureDescriptor".split(" "),function(h,m,k,e,n,p,q,r,l){class t{destroy(){this._accumulateFramebuffer=k.disposeMaybe(this._accumulateFramebuffer);this._resolveGradientTexture=k.disposeMaybe(this._resolveGradientTexture);
this._qualityProfile=this._prevGradientHash=null}get initialized(){return null!=this._accumulateFramebuffer&&null!=this._resolveGradientTexture}get accumulateFramebuffer(){return this._accumulateFramebuffer}get resolveGradientTexture(){return this._resolveGradientTexture}loadQualityProfile(b){null==this._qualityProfile&&(b=p.loadHeatmapTextureConfiguration(b,m.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.heatmap.HeatmapResources")),this._qualityProfile={...b,defines:{usesHalfFloatPrecision:b.dataType!==
e.PixelType.FLOAT}});return this._qualityProfile}ensureAccumulateFBO(b,a,c){if(null==this._accumulateFramebuffer){const {dataType:f,samplingMode:g,pixelFormat:u,internalFormat:v}=this.loadQualityProfile(b),d=new l.TextureDescriptor(a,c);d.pixelFormat=u;d.internalFormat=v;d.dataType=f;d.samplingMode=g;d.wrapMode=e.TextureWrapMode.CLAMP_TO_EDGE;a=new q.RenderbufferDescriptor(e.RenderbufferFormat.DEPTH_STENCIL,a,c);this._accumulateFramebuffer=new n.FramebufferObject(b,d,a)}else{const {width:f,height:g}=
this._accumulateFramebuffer;f===a&&g===c||this._accumulateFramebuffer.resize(a,c)}return this._accumulateFramebuffer}ensureResolveGradientTexture(b,a,c){null==this._resolveGradientTexture?(a=new l.TextureDescriptor,a.wrapMode=e.TextureWrapMode.CLAMP_TO_EDGE,this._resolveGradientTexture=new r.Texture(b,a)):this._prevGradientHash!==a&&(this._resolveGradientTexture.resize(c.length/4,1),this._resolveGradientTexture.setData(c),this._prevGradientHash=a);return this._resolveGradientTexture}}h.HeatmapResources=
t;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});