// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../../geometry/GeometryCursor ../../../mesh/templates/templateUtils ./FillMeshWriter ./meshWriterUtils ../line/LineMeshWriter ../mesh/utils ../shaders/constants ../../../../../../webgl/enums".split(" "),function(d,n,p,q,h,e,r,t,f){const k={createComputedParams:a=>a,optionalAttributes:e.LineVertexSpec.optionalAttributes,attributes:{...e.LineVertexSpec.attributes,bitset:{type:f.DataType.UNSIGNED_BYTE,count:1,pack:a=>0},color:{type:f.DataType.UNSIGNED_BYTE,count:4,normalized:!0,
pack:({color:a})=>h.processColorInput(a)}}},l={createComputedParams:a=>a,optionalAttributes:e.LineVertexSpec.optionalAttributes,attributes:{...e.LineVertexSpec.attributes,bitset:{type:f.DataType.UNSIGNED_BYTE,count:1,pack:a=>h.packBitset([[t.bitsetTypeFillOutline,!0]])},color:{type:f.DataType.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:a})=>h.processColorInput(a)}}};class m extends e.LineMeshWriter{constructor(){super(...arguments);this.vertexSpec=l}}class u extends q.FillMeshWriter{constructor(a,
c,b,g){super(a,c,b,g);this.vertexSpec=k;this._lineMeshWriter=this._createOutlineWriter(a,c,b,g)}_createOutlineWriter(a,c,b,g){return new m(a,c,b,g)}_write(a,c,b){b=b?.asOptimized()??c.readGeometryForDisplay();if(b=this._clip(b))a.recordStart(this.instanceId,this.attributeLayout),this._writeGeometry(a,c,b),this._lineMeshWriter.writeLineVertices(a,n.GeometryCursor.fromOptimizedCIM(b,"esriGeometryPolyline"),c),a.recordEnd()}_clip(a){return a?p.clipMarshall(a,r.getLineClippingMargin(this.evaluatedMeshParams)):
null}ensurePacked(a,c,b){super.ensurePacked(a,c,b);this._lineMeshWriter.ensurePacked(a,c,b)}enqueueRequest(a,c,b){super.enqueueRequest(a,c,b);this._lineMeshWriter.enqueueRequest(a,c,b)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}d.OutlineFillMeshWriter=u;d.OutlineFillOutlineMeshWriter=m;d.outlineFillVertexSpec_Fill=k;d.outlineFillVertexSpec_Outline=l;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});