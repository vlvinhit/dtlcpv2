// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define(["exports","../util/Writer"],function(f,d){class k{constructor(a,b,c=0){const e=6*c*Uint32Array.BYTES_PER_ELEMENT;c=4*c*b.stride;const l=b.stride/4,h=b.attributes.find(g=>"pos"===g.name||"position"===g.name);if(!h)throw Error("InternalError: Unable to find position attribute");this.layout={...b,position:h};this._indices=new d(Uint32Array,e);this._vertices=new d(Uint32Array,c);this._metrics=new d(Uint32Array,0);this._metricCountOffset=this._metrics.push(0);this._strideInt=l;this._instanceId=
a}serialize(a){const b=this._indices.buffer(),c=this._vertices.buffer(),e=this._metrics.length?this._metrics.buffer():null;a.push(b,c);return{instanceId:this._instanceId,layout:this.layout,indices:b,vertices:c,metrics:e}}get strideInt(){return this._strideInt}get vertexCount(){return this._vertices.length/this._strideInt}get indexCount(){return this._indices.length}get indexWriter(){return this._indices}get vertexWriter(){return this._vertices}get metricWriter(){return this._metrics}vertexEnsureSize(a){this._vertices.ensureSize(a)}indexEnsureSize(a){this._indices.ensureSize(a)}writeIndex(a){this._indices.push(a)}writeVertex(a){this._vertices.push(a)}writeVertexRegion(a){this._vertices.writeRegion(a)}writeVertexF32(a){this._vertices.writeF32(a)}writeMetric(a){this._metrics.incr(this._metricCountOffset);
a.serialize(this._metrics)}}f.VertexDataWriter=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});