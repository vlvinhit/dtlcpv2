// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/string","./typed/TypedShaderProgram"],function(g,h,k){class l{constructor(){this.computeAttributes={}}get locationsMap(){const b=new Map;for(const d in this.locations)b.set(d,this.locations[d].index);return b}get optionPropertyKeys(){this._optionPropertyKeys||(this._optionPropertyKeys=new Set(Object.keys(this.options)));return this._optionPropertyKeys}get _transformFeedbackBindings(){return[]}get locationInfo(){if(!this._locationInfo){const b=this.locationsMap,
d=Array.from(b.entries()).map(([c,a])=>`${c}.${a}`).join(".");this._locationInfo={hash:h.numericHash(d),locations:b,computeAttributeMap:this.computeAttributes}}return this._locationInfo}get renamedLocationsMap(){const b=new Map;for(const [d,c]of this.locationsMap.entries())b.set("a_"+d,c);return b}getShaderKey(b,d,c){const a=Object.keys(b).map(e=>`${e}.${b[e]}`).join("."),f=Object.keys(c).filter(e=>c[e]).map(e=>`${e}_${c[e].toString()}`).join(".");d=Object.keys(d).filter(e=>this.optionPropertyKeys.has(e)).join(".");
return`${a}.${f}.${d}`}getProgram(b,d,c,a){a=b="";for(const f in c)if(c[f]){const e="boolean"===typeof c[f]?`#define ${f}\n`:`#define ${f} ${c[f]}\n`;b+=e;a+=e}b+=this.vertexShader;a+=this.fragmentShader;return new k.TypedShaderProgram(b,a,this.renamedLocationsMap,this.locationInfo,this._getUniformBindings(d),this._transformFeedbackBindings)}_getUniformBindings(b){const d=[];for(var c in this.required){var a=this.required[c];d.push({uniformHydrated:null,shaderModulePath:c,uniformName:c,uniformType:a.type,
uniformArrayElementType:"array"===a.type?a.elementType?.type:void 0,uniformArrayLength:"array"===a.type?a.size:void 0})}for(const f in b)if(c=this.options[f],b[f])for(const e in c)a=c[e],d.push({uniformHydrated:null,shaderModulePath:`${f}.${e}`,uniformName:e,uniformType:a.type,uniformArrayElementType:"array"===a.type?a.elementType?.type:void 0,uniformArrayLength:"array"===a.type?a.size:void 0});return d}}g.GLSLShaderModule=l;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});