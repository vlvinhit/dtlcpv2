// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define(["exports","../../../FeatureSpatialIndex","../../../aggregation/GeohashSpatialIndex","../../../aggregation/GridSpatialIndex","../../../support/FeatureSetReaderIndirect"],function(b,d,e,f,g){class h{size(){return this.reader.getSize()}get fields(){return this.reader.fields}invalidate(){this._spatialIndex=this._aggregateIndexHash=this._aggregateIndex=null}queryFeaturesInBounds(a){a=this._getSpatialIndex().search(a);return g.FeatureSetReaderIndirect.from(this.reader,a)}getAggregateIndex(a){const c=
JSON.stringify(a);if(c!==this._aggregateIndexHash){this._aggregateIndexHash=c;switch(a.type){case "grid":this._aggregateIndex=new f.GridSpatialIndex(a);break;case "geohash":this._aggregateIndex=new e.GeohashSpatialIndex(a)}this._aggregateIndex.insert(this.reader,this.isTiled)}return this._aggregateIndex}_getSpatialIndex(){this._spatialIndex||(this._spatialIndex=d.FeatureSpatialIndex.fromReader(this.reader));return this._spatialIndex}}b.ASourceChunk=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});