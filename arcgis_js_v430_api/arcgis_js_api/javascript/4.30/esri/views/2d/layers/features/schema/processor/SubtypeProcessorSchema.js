// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ./LabelMatcherSchema ./MatcherSchema ./StorageSchema ./VisualVariablesSchema ../../../../../webgl/capabilities".split(" "),function(h,k,l,m,n,p){async function q(d,{subtypeField:c,sublayers:b}){const e=await Promise.all(b.map(({renderer:a})=>l.createMatcherSchema(d,a)));return{type:"subtype",subtypeField:c,renderers:b.reduce((a,{subtypeCode:f},g)=>({...a,[f]:e[g]}),{})}}function r(d,c){const b=p.getWebGLCapabilities();return{type:"subtype",filters:d.filters,capabilities:{maxTextureSize:b.maxTextureSize},
subtypeField:c.subtypeField,target:"feature",bindings:c.sublayers.reduce((e,{renderer:a,subtypeCode:f})=>{a=m.createVVBindings(a);return{...e,[f]:a}},{})}}async function t(d,{subtypeField:c,sublayers:b}){const e=await Promise.all(b.map(a=>{const f=n.createVisualVariableUniforms(a.renderer);return k.createLabelMatcherSchema(d,{...a,geometryType:a.geometryType??null},f)}));return{type:"subtype",subtypeField:c,renderers:b.reduce((a,{subtypeCode:f},g)=>({...a,[f]:e[g]}),{})}}h.createSubtypeProcessorSchema=
async function(d,c,b,e){return{storage:r(c,b),mesh:{properties:{timeZone:c.timeZone,displayRefreshVersion:e,returnMeshObjectId:!1,sortKey:null},strategy:{type:"feature"},factory:{symbology:await q(d,b),labels:await t(d,b)}}}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});