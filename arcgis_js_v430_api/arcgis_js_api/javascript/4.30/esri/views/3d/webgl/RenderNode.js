// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Error ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ../webgl-engine/lib/basicInterfaces".split(" "),function(c,b,f,e,d,g,h){b=class extends b{constructor(a){super(a);this.view=null;this.consumes={required:[]};this.produces="composite-color";this._context=null;this._dirty=!0}initialize(){this.addHandles([e.watch(()=>this.view.ready,a=>{a&&this.view._stage?.renderer.addRenderNode(this)},
e.initial)])}destroy(){this.view._stage?.renderer?.removeRenderNode(this)}render(){throw new f("RenderNode:render-function-not-implemented","render() is not implemented.");}get camera(){return this.view.state.camera.clone()}get sunLight(){return this.bindParameters.lighting.legacy}get gl(){return this.view._stage.renderView.renderingContext.gl}acquireOutputFramebuffer(){var a=this._frameBuffer?.getTexture()?.descriptor;a=this.view._stage.renderer.fboCache.acquire(a?.width??640,a?.height??480,this.produces);
a.fbo?.initializeAndBind();return a}bindRenderTarget(){this._frameBuffer?.fbo?.initializeAndBind();return this._frameBuffer}requestRender(a){a===h.RenderRequestType.UPDATE&&this.view._stage?.renderView.requestRender(a);this._dirty=!0}resetWebGLState(){this.renderingContext.resetState();this.renderingContext.bindFramebuffer(this._frameBuffer?.fbo)}get fboCache(){return this.view._stage.renderer.fboCache}get bindParameters(){return this._context.bindParameters}get renderingContext(){return this.view._stage.renderView.renderingContext}updateAnimation(){return this._dirty?
(this._dirty=!1,!0):!1}doRender(a,k){this._context=k;this._frameBuffer=a.find(({name:l})=>l===this.produces);try{return this.render(a)}finally{this._frameBuffer=null}}};c.__decorate([d.property({constructOnly:!0})],b.prototype,"view",void 0);c.__decorate([d.property({constructOnly:!0})],b.prototype,"consumes",void 0);c.__decorate([d.property()],b.prototype,"produces",void 0);return b=c.__decorate([g.subclass("esri.views.3d.webgl.RenderNode")],b)});