// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/mathUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/Logger ../../../../../core/RandomLCG ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/axisAngleDegrees".split(" "),function(d,b,k,l,g,c,p,q,r,m,n){d.ScaleRotateMeshAdapter=class extends k{constructor(a){super(a);this._interactionState=
null}initialize(){this.addHandles([g.when(()=>{const a=this._interactionState;return a&&a.angle!==a.previousAngle?{interactionState:a,angle:a.state.angle}:null},({interactionState:a})=>{this._updateMeshRotation(a)},g.sync),g.when(()=>{const a=this._interactionState;return a&&a.scale!==a.previousScale?{interactionState:a,scale:a.state.scale}:null},({interactionState:a})=>{this._updateMeshSize(a)},g.sync)])}get initialAngle(){return this._interactionState?.initialAngle??0}get angle(){const a=this.geometry.transform;
if(null==a)return this._interactionState?.angle??0;const e=n.axis(a.rotation)[2];return.999999<Math.abs(e)?l.deg2rad(n.angle(a.rotation))*Math.sign(e):0}get angleClockwise(){return-this.angle}get relativeAngle(){return this.angle-this.initialAngle}get relativeAngleClockwise(){return-this.relativeAngle}get scale(){return this._interactionState?.scale??1}startInteraction(){const a=new f({angle:this.angle});this._interactionState=a;const e=()=>{this._interactionState=null};return{state:a,done:e,cancel:()=>
{a.cancel();e()}}}createUndoRecord(){return this.object.createUndoRecord()}_updateMeshRotation(a){const {angle:e,previousAngle:h}=a;a.previousAngle=e;a=l.rad2deg(e-h);this.geometry.rotate(0,0,a,{origin:this.geometry.anchor})}_updateMeshSize(a){const {scale:e,previousScale:h}=a;a.previousScale=e;this.geometry.scale(e/h,{origin:this.geometry.anchor})}};b.__decorate([c.property({constructOnly:!0})],d.ScaleRotateMeshAdapter.prototype,"object",void 0);b.__decorate([c.property({constructOnly:!0})],d.ScaleRotateMeshAdapter.prototype,
"geometry",void 0);b.__decorate([c.property({constructOnly:!0})],d.ScaleRotateMeshAdapter.prototype,"viewingMode",void 0);b.__decorate([c.property()],d.ScaleRotateMeshAdapter.prototype,"initialAngle",null);b.__decorate([c.property()],d.ScaleRotateMeshAdapter.prototype,"angle",null);b.__decorate([c.property()],d.ScaleRotateMeshAdapter.prototype,"angleClockwise",null);b.__decorate([c.property()],d.ScaleRotateMeshAdapter.prototype,"relativeAngle",null);b.__decorate([c.property()],d.ScaleRotateMeshAdapter.prototype,
"relativeAngleClockwise",null);b.__decorate([c.property()],d.ScaleRotateMeshAdapter.prototype,"scale",null);b.__decorate([c.property()],d.ScaleRotateMeshAdapter.prototype,"_interactionState",void 0);d.ScaleRotateMeshAdapter=b.__decorate([m.subclass("esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter")],d.ScaleRotateMeshAdapter);let f=class extends k{get state(){const {angle:a,scale:e}=this;return{angle:a,scale:e}}constructor(a){super(a);this.previousAngle=this.initialAngle=this.angle=
0;this.scale=this.previousScale=1;this.previousAngle=this.initialAngle=a.angle}cancel(){this.angle=this.initialAngle;this.scale=1}};b.__decorate([c.property()],f.prototype,"angle",void 0);b.__decorate([c.property()],f.prototype,"initialAngle",void 0);b.__decorate([c.property()],f.prototype,"previousAngle",void 0);b.__decorate([c.property()],f.prototype,"previousScale",void 0);b.__decorate([c.property()],f.prototype,"scale",void 0);b.__decorate([c.property()],f.prototype,"state",null);f=b.__decorate([m.subclass("esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter.InteractionState")],
f);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});