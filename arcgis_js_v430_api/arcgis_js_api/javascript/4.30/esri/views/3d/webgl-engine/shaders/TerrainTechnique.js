// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("require exports ../../../ViewingMode ../core/shaderLibrary/ShaderOutput ../../../../chunks/Terrain.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/basicInterfaces ../lib/Program ../lib/StencilUtils ../lib/VertexAttribute ../../../webgl/enums ../../../webgl/renderState".split(" "),function(k,e,l,m,n,p,q,r,t,u,f,d,c){class g extends q.ShaderTechnique{constructor(){super(...arguments);this.useStencil=!1}initializeConfiguration(b,a){a.spherical=
b.viewingMode===l.ViewingMode.Global}initializeProgram(b){return new t.Program(b.rctx,g.shader.get().build(this.configuration),h)}initializePipeline(){this._stencilPipelineState=this._createPipeline(!0);return this._createPipeline(!1)}_createPipeline(b){const a=this.configuration,v=a.backfaceCullingEnabled&&!a.renderOccluded;return c.makePipelineState({blending:a.renderOccluded?c.simpleBlendingParams(d.BlendFactor.ONE,d.BlendFactor.ONE_MINUS_SRC_ALPHA):null,culling:v?c.backFaceCullingParams:null,
depthTest:a.renderOccluded?null:{func:d.CompareFunction.LESS},depthWrite:a.renderOccluded?null:c.defaultDepthWriteParams,colorWrite:c.defaultColorWriteParams,stencilTest:b?u.renderWhenBitIsNotSet(r.StencilBits.IntegratedMeshMaskExcluded):null,drawBuffers:a.output===m.ShaderOutput.Depth?{buffers:[d.SpecialDrawBuffers.NONE]}:null})}getPipeline(){return this.useStencil?this._stencilPipelineState:super.getPipeline()}}g.shader=new p.ReloadableShaderModule(n.Terrain,()=>new Promise((b,a)=>k(["../core/shaderLibrary/terrain/Terrain.glsl"],
b,a)));const h=new Map([[f.VertexAttribute.POSITION,0],[f.VertexAttribute.UV0,1],[f.VertexAttribute.NORMALCOMPRESSED,2]]);e.TerrainTechnique=g;e.terrainVertexAttributeLocations=h;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});