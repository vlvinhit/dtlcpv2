// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/tslib.es6 ../../../../core/mathUtils ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/Logger ../../../../core/RandomLCG ../../../../core/accessorSupport/decorators/subclass ../../../../core/libs/gl-matrix-2/math/mat4 ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../core/libs/gl-matrix-2/factories/vec4f64 ../../webgl/RenderCamera ./Util".split(" "),function(b,f,p,h,w,x,y,u,l,m,n,v,q){b.ViewshedFaceCamera=class extends v{constructor(){super(...arguments);
this.sectionAngles=n.create()}get sectionAnglesDeg(){return n.fromArray(this.sectionAngles.map(a=>p.rad2deg(a)))}set sectionAnglesDeg(a){this.sectionAngles=n.fromArray(a.map(c=>p.deg2rad(c)))}get projectionMatrix(){const a=m.create();return l.mul(a,this.sectionMatrix,this._projectionMatrixInternal)}get sectionMatrix(){var a=this.sectionAngles[0],c=this.sectionAngles[1],d=this.sectionAngles[2],g=this.sectionAngles[3];q.assert(a<=c);q.assert(d<=g);var e=2*Math.tan(this.fovX/2),k=2*Math.tan(this.fovY/
2);a=Math.tan(a);d=Math.tan(d);const r=Math.tan(c)-a,t=Math.tan(g)-d;g=e/r;c=k/t;e=-(a+r/2)/e*2;a=-(d+t/2)/k*2;k=m.create();l.fromTranslation(k,[e,a,0]);e=m.create();l.fromScaling(e,[g,c,1]);g=m.create();return l.mul(g,e,k)}get _sectionRatioX(){return Math.min(1,(Math.tan(this.sectionAngles[1])-Math.tan(this.sectionAngles[0]))/(2*Math.tan(this.fovX/2)))}setViewport(a,c){const d=c*this._sectionRatioX;this.viewport=[a[0],a[1],d,c];return d}};f.__decorate([h.property()],b.ViewshedFaceCamera.prototype,
"sectionAngles",void 0);f.__decorate([h.property()],b.ViewshedFaceCamera.prototype,"sectionAnglesDeg",null);f.__decorate([h.property()],b.ViewshedFaceCamera.prototype,"projectionMatrix",null);f.__decorate([h.property()],b.ViewshedFaceCamera.prototype,"sectionMatrix",null);f.__decorate([h.property()],b.ViewshedFaceCamera.prototype,"_sectionRatioX",null);b.ViewshedFaceCamera=f.__decorate([u.subclass("esri.views.3d.webgl-engine.lib.ViewshedFaceCamera")],b.ViewshedFaceCamera);Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})});