// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/tslib.es6 ../../../../core/has ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../lib/TransparencyPassType ../lib/VertexAttribute ../materials/DefaultTechniqueConfiguration ../materials/PatternStyle ../../../../chunks/Pattern.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(w,h,b,x,k,y,z,c,t,g,A,n,l,e,B,C,D,E,m){class p extends z.ShaderTechnique{initializeProgram(d){return new A.Program(d.rctx,p.shader.get().build(this.configuration),x("enable-feature:objectAndLayerId-rendering")?u:v)}_setPipelineState(d,q){const f=this.configuration,r=d===l.TransparencyPassType.NONE,F=d===l.TransparencyPassType.FrontFace;return m.makePipelineState({blending:f.output===k.ShaderOutput.Color?r?g.blendingDefault:g.oitBlending(d):null,culling:m.cullingParams(f.cullFace),depthTest:f.draped?
null:{func:g.oitDepthTest(d)},depthWrite:f.draped?null:r?m.defaultDepthWriteParams:g.oitDepthWrite(d),drawBuffers:f.output===k.ShaderOutput.Depth?{buffers:[E.SpecialDrawBuffers.NONE]}:g.oitDrawBuffers(d),colorWrite:m.defaultColorWriteParams,stencilWrite:f.hasOccludees?n.stencilWriteMaskOn:null,stencilTest:f.hasOccludees?q?n.stencilToolMaskBaseParams:n.stencilBaseAllZerosParams:null,polygonOffset:r||F?f.polygonOffset?G:null:g.getOITPolygonOffset(f.enableOffset)})}initializePipeline(){this._occludeePipelineState=
this._setPipelineState(this.configuration.transparencyPassType,!0);return this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipeline(d){return d?this._occludeePipelineState:super.getPipeline()}}p.shader=new y.ReloadableShaderModule(D.Pattern,()=>new Promise((d,q)=>w(["./Pattern.glsl"],d,q)));const G={factor:1,units:1};class a extends B.DefaultTechniqueConfiguration{constructor(){super(...arguments);this.output=k.ShaderOutput.Color;this.cullFace=t.CullFaceOptions.None;this.transparencyPassType=
l.TransparencyPassType.NONE;this.hasOccludees=this.polygonOffset=this.hasVertexColors=this.hasSlicePlane=!1;this.enableOffset=!0;this.objectAndLayerIdColorInstanced=this.vvColor=this.cullAboveGround=this.multipassEnabled=!1}}b.__decorate([c.parameter({count:k.ShaderOutput.COUNT})],a.prototype,"output",void 0);b.__decorate([c.parameter({count:t.CullFaceOptions.COUNT})],a.prototype,"cullFace",void 0);b.__decorate([c.parameter({count:C.Style.COUNT})],a.prototype,"style",void 0);b.__decorate([c.parameter({count:l.TransparencyPassType.COUNT})],
a.prototype,"transparencyPassType",void 0);b.__decorate([c.parameter()],a.prototype,"hasSlicePlane",void 0);b.__decorate([c.parameter()],a.prototype,"hasVertexColors",void 0);b.__decorate([c.parameter()],a.prototype,"polygonOffset",void 0);b.__decorate([c.parameter()],a.prototype,"hasOccludees",void 0);b.__decorate([c.parameter()],a.prototype,"patternSpacing",void 0);b.__decorate([c.parameter()],a.prototype,"lineWidth",void 0);b.__decorate([c.parameter()],a.prototype,"enableOffset",void 0);b.__decorate([c.parameter()],
a.prototype,"draped",void 0);b.__decorate([c.parameter()],a.prototype,"multipassEnabled",void 0);b.__decorate([c.parameter()],a.prototype,"cullAboveGround",void 0);b.__decorate([c.parameter()],a.prototype,"vvColor",void 0);b.__decorate([c.parameter({constValue:!0})],a.prototype,"writeDepth",void 0);b.__decorate([c.parameter({constValue:!1})],a.prototype,"occlusionPass",void 0);b.__decorate([c.parameter({constValue:!1})],a.prototype,"hasVvInstancing",void 0);b.__decorate([c.parameter({constValue:!1})],
a.prototype,"vvSize",void 0);b.__decorate([c.parameter({constValue:!1})],a.prototype,"vvOpacity",void 0);const v=new Map([[e.VertexAttribute.POSITION,0],[e.VertexAttribute.COLOR,3],[e.VertexAttribute.UVMAPSPACE,4],[e.VertexAttribute.COLORFEATUREATTRIBUTE,5],[e.VertexAttribute.BOUNDINGRECT,6]]),u=new Map([[e.VertexAttribute.POSITION,0],[e.VertexAttribute.COLOR,3],[e.VertexAttribute.UVMAPSPACE,4],[e.VertexAttribute.COLORFEATUREATTRIBUTE,5],[e.VertexAttribute.BOUNDINGRECT,6],[e.VertexAttribute.OBJECTANDLAYERIDCOLOR,
9]]);h.PatternTechnique=p;h.PatternTechniqueConfiguration=a;h.vertexAttributeLocations=v;h.vertexAttributeLocationsOID=u;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});