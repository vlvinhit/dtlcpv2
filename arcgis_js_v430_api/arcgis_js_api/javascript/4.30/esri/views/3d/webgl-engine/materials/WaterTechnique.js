// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/tslib.es6 ../../../ViewingMode ../core/shaderLibrary/ShaderOutput ../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl ../core/shaderLibrary/shading/WaterDistortion.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../lib/OrderIndependentTransparency ../lib/Program ../lib/TransparencyPassType ./DefaultTechniqueConfiguration ../../../../chunks/WaterSurface.glsl ../../../webgl/renderState".split(" "),
function(p,h,b,q,g,r,t,u,v,c,w,f,x,k,y,z,l){class A extends t.WaterDistortionPassParameters{}class m extends v.ShaderTechnique{initializeConfiguration(d,e){e.spherical=d.viewingMode===q.ViewingMode.Global;e.doublePrecisionRequiresObfuscation=d.rctx.driverTest.doublePrecisionRequiresObfuscation.result}initializeProgram(d){return new x.Program(d.rctx,m.shader.get().build(this.configuration),w.Default3D)}_setPipelineState(d){const e=this.configuration,n=d===k.TransparencyPassType.NONE,B=d===k.TransparencyPassType.FrontFace;
return l.makePipelineState({blending:e.output!==g.ShaderOutput.Normal&&e.output!==g.ShaderOutput.Highlight&&e.output!==g.ShaderOutput.ObjectAndLayerIdColor&&e.transparent?n?f.blendingDefault:f.oitBlending(d):null,depthTest:e.draped?null:{func:f.oitDepthTest(d)},depthWrite:e.draped?null:n?e.writeDepth?l.defaultDepthWriteParams:null:f.oitDepthWrite(d),drawBuffers:f.oitDrawBuffers(d),colorWrite:l.defaultColorWriteParams,polygonOffset:n||B?null:f.getOITPolygonOffset(e.enableOffset)})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}
m.shader=new u.ReloadableShaderModule(z.WaterSurface,()=>new Promise((d,e)=>p(["../shaders/WaterSurface.glsl"],d,e)));class a extends y.DefaultTechniqueConfiguration{constructor(){super(...arguments);this.output=g.ShaderOutput.Color;this.transparencyPassType=k.TransparencyPassType.NONE;this.transparent=this.hasSlicePlane=this.receiveShadows=this.spherical=!1;this.enableOffset=!0;this.cullAboveGround=this.multipassEnabled=this.draped=this.objectAndLayerIdColorInstanced=this.hasCloudsReflections=this.doublePrecisionRequiresObfuscation=
this.hasScreenSpaceReflections=this.writeDepth=!1}}b.__decorate([c.parameter({count:g.ShaderOutput.COUNT})],a.prototype,"output",void 0);b.__decorate([c.parameter({count:k.TransparencyPassType.COUNT})],a.prototype,"transparencyPassType",void 0);b.__decorate([c.parameter()],a.prototype,"spherical",void 0);b.__decorate([c.parameter()],a.prototype,"receiveShadows",void 0);b.__decorate([c.parameter()],a.prototype,"hasSlicePlane",void 0);b.__decorate([c.parameter()],a.prototype,"transparent",void 0);b.__decorate([c.parameter()],
a.prototype,"enableOffset",void 0);b.__decorate([c.parameter()],a.prototype,"writeDepth",void 0);b.__decorate([c.parameter()],a.prototype,"hasScreenSpaceReflections",void 0);b.__decorate([c.parameter()],a.prototype,"doublePrecisionRequiresObfuscation",void 0);b.__decorate([c.parameter()],a.prototype,"hasCloudsReflections",void 0);b.__decorate([c.parameter()],a.prototype,"objectAndLayerIdColorInstanced",void 0);b.__decorate([c.parameter()],a.prototype,"draped",void 0);b.__decorate([c.parameter()],
a.prototype,"multipassEnabled",void 0);b.__decorate([c.parameter()],a.prototype,"cullAboveGround",void 0);b.__decorate([c.parameter({constValue:!1})],a.prototype,"occlusionPass",void 0);b.__decorate([c.parameter({constValue:r.PBRMode.Water})],a.prototype,"pbrMode",void 0);b.__decorate([c.parameter({constValue:!0})],a.prototype,"useCustomDTRExponentForWater",void 0);b.__decorate([c.parameter({constValue:!0})],a.prototype,"highStepCount",void 0);b.__decorate([c.parameter({constValue:!1})],a.prototype,
"useFillLights",void 0);h.WaterMaterialPassParameters=A;h.WaterTechnique=m;h.WaterTechniqueConfiguration=a;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});