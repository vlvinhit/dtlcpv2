// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../core/maybe ../../../core/libs/gl-matrix-2/math/mat4 ../../../core/libs/gl-matrix-2/factories/mat4f64 ./AtmosphereType ../../../chunks/SimpleAtmosphere.glsl ./SimpleAtmosphereTechnique ./SimpleAtmosphereTechniqueConfiguration ./resources/SimpleAtmosphereTexture ../support/buffer/glUtil ../support/buffer/InterleavedLayout ../webgl-engine/lib/DefaultVertexAttributeLocations ../webgl-engine/lib/GeometryUtil ../webgl-engine/lib/VertexArrayObject ../webgl-engine/lib/VertexAttribute ../../webgl/BufferObject ../../webgl/enums ../../webgl/Texture ../../webgl/TextureDescriptor ../../webgl/Util".split(" "),
function(k,p,q,r,t,u,v,l,w,x,y,z,A,B,C,D,f,E,F,G){class H{constructor(d,a){this.type=t.AtmosphereType.Local;this._configuration=new l.SimpleAtmosphereTechniqueConfiguration;this._passParameters=new u.SimpleAtmospherePassParameters;this._configuration.geometry=l.SimpleAtmosphereGeometry.Cylinder;this._technique=a.techniques.acquire(v.SimpleAtmosphereTechnique,this._configuration);d=a.renderContext.rctx;a=A.createPolySphereData(1,2,!1);const {data:e,indices:c}=a[0][1];a=m.createBuffer(c.length);const g=
a.position;for(let b=0;b<c.length;++b){const h=3*c[0===b%3?b+2:2===b%3?b-2:b];g.set(b,0,e[h]);g.set(b,1,e[h+1]);g.set(b,2,e[h+2])}this._vao=new B.VertexArrayObject(d,z.Default3D,{geometry:x.glLayout(m)},{geometry:D.BufferObject.createVertex(d,f.Usage.STATIC_DRAW,a.buffer)});this._vaoCount=G.vertexCount(this._vao,"geometry");a=new F.TextureDescriptor;a.wrapMode=f.TextureWrapMode.CLAMP_TO_EDGE;a.flipped=!0;a.width=1;a.height=512;this._passParameters.texture=new E.Texture(d,a,w.earthAtmosphereTextureSimple)}destroy(){this._passParameters.texture=
p.disposeMaybe(this._passParameters.texture);this._vao.dispose();this._technique.release()}render(d){const a=d.rctx,e=a.bindTechnique(this._technique,d.bindParameters,this._passParameters);var c=n;q.copy(c,d.bindParameters.camera.viewMatrix);c[12]=0;c[13]=0;c[14]=0;c[15]=1;e.setUniformMatrix4fv("view",n);a.bindVAO(this._vao);e.assertCompatibleVertexAttributeLocations(this._vao);a.drawArrays(f.PrimitiveType.TRIANGLES,0,this._vaoCount)}renderHaze(){return!1}}const n=r.create(),m=y.newLayout().vec3f(C.VertexAttribute.POSITION);
k.LocalAtmosphere=H;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});