// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/DoubleArray":function(){define(["exports","../../core/typedArrayUtil"],function(b,f){b.copyInto=function(p,q){for(let u=0;u<q.length;++u)p[u]=q[u];return p};b.doubleArrayFrom=function(p){return(f.isArray(p)?p.length:p.byteLength/8)<=f.nativeArrayMaxSize?Array.from(p):new Float64Array(p)};b.doubleSubArray=function(p,q,u){return Array.isArray(p)?p.slice(q,q+u):p.subarray(q,q+u)};b.newDoubleArray=function(p,q=!1){return p<=f.nativeArrayMaxSize?q?Array(p).fill(0):
Array(p):new Float64Array(p)};b.toFloat64Array=function(p){return Array.isArray(p)?new Float64Array(p):p};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/MeshGeoreferencedVertexSpace":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,p,q,u,t,l,n,h){f=class extends f.ClonableMixin(p.JSONSupport){constructor(v){super(v);this.type="georeferenced";this.origin=null}};b.__decorate([n.enumeration({georeferenced:"georeferenced"},{readOnly:!0})],f.prototype,"type",void 0);b.__decorate([q.property({type:[Number],nonNullable:!1,json:{write:!0}})],f.prototype,"origin",void 0);return f=b.__decorate([h.subclass("esri.geometry.support.MeshGeoreferencedVertexSpace")],f)})},"esri/core/Clonable":function(){define("exports ../chunks/tslib.es6 ./Accessor ./has ./lang ./Logger ./maybe ./accessorSupport/PropertyOrigin ./accessorSupport/utils ./accessorSupport/decorators/subclass".split(" "),
function(b,f,p,q,u,t,l,n,h,v){q=y=>{y=class extends y{clone(){var x=h.getProperties(this);l.assertIsSome(x,"unable to clone instance of non-accessor class");var M=x.metadata;const G=x.store,B={};x=new Map;for(var A in M){var H=M[A];const W=G?.originOf(A),Z=H.clonable;if(H.readOnly||!1===Z||W!==n.OriginId.USER&&W!==n.OriginId.DEFAULTS&&W!==n.OriginId.WEB_MAP&&W!==n.OriginId.WEB_SCENE)continue;H=this[A];let fa=null;fa="function"===typeof Z?Z(H):"reference"===Z?H:u.tryClone(H);if(null==H||null!=fa)W===
n.OriginId.DEFAULTS?x.set(A,fa):B[A]=fa}M=new (Object.getPrototypeOf(this).constructor)(B);if(x.size&&(A=h.getProperties(M)?.store))for(const [W,Z]of x)A.set(W,Z,n.OriginId.DEFAULTS);return M}};return y=f.__decorate([v.subclass("esri.core.Clonable")],y)};b.Clonable=class extends q(p){};b.Clonable=f.__decorate([v.subclass("esri.core.Clonable")],b.Clonable);b.ClonableMixin=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports",
"../../jsonMap","./property"],function(b,f,p){b.enumeration=function(q,u={}){q=q instanceof f.JSONMap?q:new f.JSONMap(q,u);q={type:u?.ignoreUnknown??!0?q.apiValues:String,json:{type:q.jsonValues,read:u?.readOnly?!1:{reader:q.read},write:{writer:q.write}}};void 0!==u?.readOnly&&(q.readOnly=!!u.readOnly);void 0!==u?.default&&(q.json.default=u.default);void 0!==u?.name&&(q.json.name=u.name);void 0!==u?.nonNullable&&(q.nonNullable=u.nonNullable);return p.property(q)};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/geometry/support/MeshLocalVertexSpace":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/factories/vec3f64".split(" "),function(b,f,p,q,u,t,l,n,h,v){f=class extends f.ClonableMixin(p.JSONSupport){constructor(y){super(y);
this.type="local";this.origin=v.create()}};b.__decorate([n.enumeration({local:"local"},{readOnly:!0})],f.prototype,"type",void 0);b.__decorate([q.property({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"origin",void 0);return f=b.__decorate([h.subclass("esri.geometry.support.MeshLocalVertexSpace")],f)})},"esri/chunks/vec3":function(){define(["exports","../core/has","../core/Logger"],function(b,f,p){function q(G,B,A){u(G.typedBuffer,B.typedBuffer,A,G.typedBufferStride,B.typedBufferStride)}
function u(G,B,A,H=3,W=H){if(G.length/H!==Math.ceil(B.length/W))return G;const Z=G.length/H,fa=A[0],V=A[1],U=A[2],F=A[4],S=A[5],aa=A[6],ia=A[8],da=A[9],J=A[10],N=A[12],R=A[13];A=A[14];let ca=0,oa=0;for(let la=0;la<Z;la++){const k=B[ca],m=B[ca+1],L=B[ca+2];G[oa]=fa*k+F*m+ia*L+N;G[oa+1]=V*k+S*m+da*L+R;G[oa+2]=U*k+aa*m+J*L+A;ca+=W;oa+=H}return G}function t(G,B,A){l(G.typedBuffer,B.typedBuffer,A,G.typedBufferStride,B.typedBufferStride)}function l(G,B,A,H=3,W=H){if(G.length/H===Math.ceil(B.length/W)){var Z=
G.length/H,fa=A[0],V=A[1],U=A[2],F=A[3],S=A[4],aa=A[5],ia=A[6],da=A[7];A=A[8];var J=0,N=0;for(let R=0;R<Z;R++){const ca=B[J],oa=B[J+1],la=B[J+2];G[N]=fa*ca+F*oa+ia*la;G[N+1]=V*ca+S*oa+da*la;G[N+2]=U*ca+aa*oa+A*la;J+=W;N+=H}}}function n(G,B,A){h(G.typedBuffer,B.typedBuffer,A,G.typedBufferStride,B.typedBufferStride)}function h(G,B,A,H=3,W=H){const Z=Math.min(G.length/H,B.length/W);let fa=0,V=0;for(let U=0;U<Z;U++)G[V]=A*B[fa],G[V+1]=A*B[fa+1],G[V+2]=A*B[fa+2],fa+=W,V+=H;return G}function v(G,B,A,H=
3,W=H){const Z=G.length/H;if(Z!==Math.ceil(B.length/W))return G;let fa=0,V=0;for(let U=0;U<Z;U++)G[V]=B[fa]+A[0],G[V+1]=B[fa+1]+A[1],G[V+2]=B[fa+2]+A[2],fa+=W,V+=H;return G}function y(G,B){x(G.typedBuffer,B.typedBuffer,G.typedBufferStride,B.typedBufferStride)}function x(G,B,A=3,H=A){const W=Math.min(G.length/A,B.length/H);let Z=0,fa=0;for(let U=0;U<W;U++){const F=B[Z],S=B[Z+1],aa=B[Z+2];var V=F*F+S*S+aa*aa;0<V&&(V=1/Math.sqrt(V),G[fa]=V*F,G[fa+1]=V*S,G[fa+2]=V*aa);Z+=H;fa+=A}}function M(G,B,A){const H=
Math.min(G.count,B.count),W=G.typedBuffer;G=G.typedBufferStride;const Z=B.typedBuffer;B=B.typedBufferStride;let fa=0,V=0;for(let U=0;U<H;U++)W[V]=Z[fa]>>A,W[V+1]=Z[fa+1]>>A,W[V+2]=Z[fa+2]>>A,fa+=B,V+=G}f=Object.freeze(Object.defineProperty({__proto__:null,normalize:x,normalizeView:y,scale:h,scaleView:n,shiftRight:M,transformMat3:l,transformMat3View:t,transformMat4:u,transformMat4View:q,translate:v},Symbol.toStringTag,{value:"Module"}));b.normalize=x;b.normalizeView=y;b.scale=h;b.scaleView=n;b.shiftRight=
M;b.transformMat3=l;b.transformMat3View=t;b.transformMat4=u;b.transformMat4View=q;b.translate=v;b.vec3=f})},"esri/libs/i3s/enums":function(){define(["exports"],function(b){b.IndexType=void 0;(function(f){f[f.None=0]="None";f[f.Int16=1]="Int16";f[f.Int32=2]="Int32"})(b.IndexType||(b.IndexType={}));b.ModificationType=void 0;(function(f){f[f.Replace=0]="Replace";f[f.Outside=1]="Outside";f[f.Inside=2]="Inside";f[f.Finished=3]="Finished"})(b.ModificationType||(b.ModificationType={}));Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/libs/i3s/I3SModule":function(){define(["require","exports","../../assets"],function(b,f,p){function q(t){return p.getAssetUrl(`esri/libs/i3s/${t}`)}let u;f.get=function(){u||=(new Promise(t=>(new Promise((l,n)=>b(["../../chunks/i3s"],l,n))).then(l=>l.i3s).then(({default:l})=>{const n=l({locateFile:q,onRuntimeInitialized:()=>t(n)});delete n.then}))).catch(t=>{throw t;});return u};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/i3s/I3SNode":function(){define(["exports",
"../../../../core/libs/gl-matrix-2/factories/vec4f64","../../../../chunks/sphere","./I3SUtil","../../support/ElevationRange"],function(b,f,p,q,u){class t extends u.ElevationRange{constructor(h,v){super(NaN,NaN);this.id=h;this.serviceMbsInIndexSR=v;this.serviceMbsInRenderSR=p.fromValues(0,0,0,-1)}invalidateServiceBVsInRenderSR(){q.invalidateMbs(this.serviceMbsInRenderSR);this.serviceObbInRenderSR?.invalidate()}shareServiceBVsInRenderSRWith(h){this.serviceObbInRenderSR=h.serviceObbInRenderSR;this.serviceMbsInRenderSR=
h.serviceMbsInRenderSR}}b.NodeFilterImpact=void 0;(function(h){h[h.Unmodified=0]="Unmodified";h[h.Culled=1]="Culled";h[h.NotChecked=2]="NotChecked"})(b.NodeFilterImpact||(b.NodeFilterImpact={}));b.NodeIMModificationImpact=void 0;(function(h){h[h.Unmodified=0]="Unmodified";h[h.PotentiallyModified=1]="PotentiallyModified";h[h.Culled=2]="Culled";h[h.Unknown=3]="Unknown";h[h.NotChecked=4]="NotChecked"})(b.NodeIMModificationImpact||(b.NodeIMModificationImpact={}));class l extends t{constructor(h,v,y,x,
M,G,B,A,H,W){super(h,y);this.index=v;this.childCount=x;this.level=M;this.resources=G;this.version=B;this.lodMetric=A;this.maxError=H;this.numFeatures=W;this.failed=!1;this.cacheState=b.CacheState.Unknown;this.childrenLoaded=this.memory=this.vertexCount=0;this.hasModifications=!1;this.imModificationImpact=b.NodeIMModificationImpact.NotChecked;this.elevationAgnosticBoundingVolume=f.fromValues(0,0,0,-1)}invalidateServiceBVsInRenderSR(){super.invalidateServiceBVsInRenderSR();this.elevationAgnosticBoundingVolume[3]=
-1}}b.CacheState=void 0;(function(h){h[h.Unknown=0]="Unknown";h[h.Uncached=1]="Uncached";h[h.Cached=2]="Cached"})(b.CacheState||(b.CacheState={}));b.LodMetric=void 0;(function(h){h[h.None=0]="None";h[h.MaxScreenThreshold=1]="MaxScreenThreshold";h[h.ScreenSpaceRelative=2]="ScreenSpaceRelative";h[h.RemovedFeatureDiameter=3]="RemovedFeatureDiameter";h[h.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"})(b.LodMetric||(b.LodMetric={}));b.NodeState=void 0;(function(h){h[h.Hole=0]="Hole";
h[h.Leaf=1]="Leaf"})(b.NodeState||(b.NodeState={}));class n{constructor(h,v,y,x){this.nodeHasLOD=h;this.isChosen=v;this.lodLevel=y;this.version=x}}b.Node=l;b.NodeBase=t;b.NodeTraversalState=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/libs/gl-matrix-2/math/mat4 ./vec32 ../core/libs/gl-matrix-2/factories/vec3f64 ./vec42 ../core/libs/gl-matrix-2/factories/vec4f64 ../core/libs/gl-matrix-2/math/common ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(b,f,p,q,u,t,l,n,h,v,y,x,M,G){function B(){return h.create()}function A(e,w){return n.copy(w,e)}function H(e,w){return h.fromValues(e[0],e[1],e[2],w)}function W(e){return e}function Z(e){e[0]=e[1]=e[2]=e[3]=0}function fa(e,w){e[0]=e[1]=e[2]=0;e[3]=w;return e}function V(e){return e[3]}function U(e){return e}function F(e,w,a,c){return h.fromValues(e,w,a,c)}function S(e,w,a){e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2]);a[3]=e[3]+w;return a}function aa(e,w,a){e!==a&&A(e,a);return a}function ia(e,w,
a){if(null==w||!J(e,w,K))return!1;let {t0:c,t1:d}=K;if(0>c||d<c&&0<d)c=d;if(0>c)return!1;if(a){const {origin:g,direction:r}=w;a[0]=g[0]+r[0]*c;a[1]=g[1]+r[1]*c;a[2]=g[2]+r[2]*c}return!0}function da(e,w,a){w=x.fromPoints(w,a);if(!J(e,w,K))return[];const {origin:c,direction:d}=w,{t0:g,t1:r}=K;w=C=>{const E=l.create();t.scaleAndAdd(E,c,d,C);return la(e,E,E)};return Math.abs(g-r)<v.getEpsilon()?[w(g)]:[w(g),w(r)]}function J(e,w,a){const {origin:c,direction:d}=w,g=O;g[0]=c[0]-e[0];g[1]=c[1]-e[1];g[2]=
c[2]-e[2];w=d[0]*d[0]+d[1]*d[1]+d[2]*d[2];if(0===w)return!1;const r=2*(d[0]*g[0]+d[1]*g[1]+d[2]*g[2]);e=r*r-4*w*(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]-e[3]*e[3]);if(0>e)return!1;e=Math.sqrt(e);a.t0=(-r-e)/(2*w);a.t1=(-r+e)/(2*w);return!0}function N(e,w){return ia(e,w,null)}function R(e,w,a){if(ia(e,w,a))return a;e=ca(e,w,G.sv3d.get());t.add(a,w.origin,t.scale(G.sv3d.get(),w.direction,t.distance(w.origin,e)/t.length(w.direction)));return a}function ca(e,w,a){const c=G.sv3d.get(),d=G.sm4d.get();t.cross(c,w.origin,
w.direction);const g=e[3];t.cross(a,c,w.origin);t.scale(a,a,1/t.length(a)*g);e=m(e,w.origin);w=M.angle(w.origin,a);u.fromRotation(d,w+e,c);t.transformMat4(a,a,d);return a}function oa(e,w,a){if(ia(e,w,a))return a;x.closestPoint(w,e,a);return la(e,a,a)}function la(e,w,a){w=t.subtract(G.sv3d.get(),w,e);w=t.scale(G.sv3d.get(),w,e[3]/t.length(w));return t.add(a,w,e)}function k(e,w){w=t.subtract(G.sv3d.get(),w,e);w=t.squaredLength(w);return Math.sqrt(Math.abs(w-e[3]*e[3]))}function m(e,w){w=t.subtract(G.sv3d.get(),
w,e);w=t.length(w);e=e[3];return q.acosClamped(e/(e+Math.abs(e-w)))}function L(e,w,a,c){e=t.subtract(I,w,e);switch(a){case y.Axis.X:return a=q.cartesianToSpherical(e,I)[2],t.set(c,-Math.sin(a),Math.cos(a),0);case y.Axis.Y:return e=q.cartesianToSpherical(e,I),a=e[1],e=e[2],w=Math.sin(a),t.set(c,-w*Math.cos(e),-w*Math.sin(e),Math.cos(a));case y.Axis.Z:return t.normalize(c,e)}}function ba(e,w){w=t.subtract(Y,w,e);return t.length(w)-e[3]}function ha(e,w,a,c){const d=ba(e,w);e=L(e,w,y.Axis.Z,Y);a=t.scale(Y,
e,a-d);return t.add(c,w,a)}function ma(e,w){w=t.squaredDistance(e,w);e=e[3];return w<=e*e}function na(e,w,a=h.create()){const c=t.distance(e,w),d=e[3],g=w[3];if(c+g<d)return n.copy(a,e),a;if(c+d<g)return n.copy(a,w),a;t.lerp(a,e,w,(c+g-d)/(2*c));a[3]=(c+d+g)/2;return a}f=B();const pa=p=n.equals,K={t0:0,t1:0},O=l.create(),I=l.create(),Y=l.create(),ea=B(),z=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:f,altitudeAt:ba,angleToSilhouette:m,axisAt:L,clear:Z,closestPoint:oa,closestPointOnSilhouette:ca,
containsPoint:ma,copy:A,create:B,distanceToSilhouette:k,elevate:S,equals:pa,exactEquals:p,fromCenterAndRadius:H,fromRadius:fa,fromValues:F,getCenter:U,getRadius:V,intersectLine:da,intersectRay:ia,intersectRayClosestSilhouette:R,intersectsRay:N,projectPoint:la,setAltitudeAt:ha,setExtent:aa,tmpSphere:ea,union:na,wrap:W},Symbol.toStringTag,{value:"Module"}));b.NullSphere=f;b.altitudeAt=ba;b.angleToSilhouette=m;b.axisAt=L;b.clear=Z;b.closestPoint=oa;b.closestPointOnSilhouette=ca;b.containsPoint=ma;b.copy=
A;b.create=B;b.distanceToSilhouette=k;b.elevate=S;b.equals=pa;b.exactEquals=p;b.fromCenterAndRadius=H;b.fromRadius=fa;b.fromValues=F;b.getCenter=U;b.getRadius=V;b.intersectLine=da;b.intersectRay=ia;b.intersectRayClosestSilhouette=R;b.intersectsRay=N;b.projectPoint=la;b.setAltitudeAt=ha;b.setExtent=aa;b.sphere=z;b.tmpSphere=ea;b.union=na;b.wrap=W})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(b,f,p){function q(a,c){a[0]=c[0];a[1]=
c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}function u(a,c,d,g,r,C,E,D,Q,T,P,X,ja,ka,sa,qa,ra){a[0]=c;a[1]=d;a[2]=g;a[3]=r;a[4]=C;a[5]=E;a[6]=D;a[7]=Q;a[8]=T;a[9]=P;a[10]=X;a[11]=ja;a[12]=ka;a[13]=sa;a[14]=qa;a[15]=ra;return a}function t(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function l(a,
c){if(a===c){const d=c[1],g=c[2],r=c[3],C=c[6],E=c[7],D=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=d;a[6]=c[9];a[7]=c[13];a[8]=g;a[9]=C;a[11]=c[14];a[12]=r;a[13]=E;a[14]=D}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a}function n(a,c){h(a,c)||t(a);return a}function h(a,c){const d=c[0],g=c[1],r=c[2],C=c[3],E=c[4],D=c[5],Q=c[6],T=c[7],P=c[8],X=c[9],ja=c[10],ka=c[11],
sa=c[12],qa=c[13],ra=c[14];c=c[15];const wa=d*D-g*E,ta=d*Q-r*E,ua=d*T-C*E,va=g*Q-r*D,xa=g*T-C*D,ya=r*T-C*Q,Aa=P*qa-X*sa,Ca=P*ra-ja*sa,Da=P*c-ka*sa,Ea=X*ra-ja*qa,Fa=X*c-ka*qa,Ga=ja*c-ka*ra;let za=wa*Ga-ta*Fa+ua*Ea+va*Da-xa*Ca+ya*Aa;if(!za)return null;za=1/za;a[0]=(D*Ga-Q*Fa+T*Ea)*za;a[1]=(r*Fa-g*Ga-C*Ea)*za;a[2]=(qa*ya-ra*xa+c*va)*za;a[3]=(ja*xa-X*ya-ka*va)*za;a[4]=(Q*Da-E*Ga-T*Ca)*za;a[5]=(d*Ga-r*Da+C*Ca)*za;a[6]=(ra*ua-sa*ya-c*ta)*za;a[7]=(P*ya-ja*ua+ka*ta)*za;a[8]=(E*Fa-D*Da+T*Aa)*za;a[9]=(g*Da-
d*Fa-C*Aa)*za;a[10]=(sa*xa-qa*ua+c*wa)*za;a[11]=(X*ua-P*xa-ka*wa)*za;a[12]=(D*Ca-E*Ea-Q*Aa)*za;a[13]=(d*Ea-g*Ca+r*Aa)*za;a[14]=(qa*ta-sa*va-ra*wa)*za;a[15]=(P*va-X*ta+ja*wa)*za;return a}function v(a,c){const d=c[0],g=c[1],r=c[2],C=c[3],E=c[4],D=c[5],Q=c[6],T=c[7],P=c[8],X=c[9],ja=c[10],ka=c[11],sa=c[12],qa=c[13],ra=c[14];c=c[15];a[0]=D*(ja*c-ka*ra)-X*(Q*c-T*ra)+qa*(Q*ka-T*ja);a[1]=-(g*(ja*c-ka*ra)-X*(r*c-C*ra)+qa*(r*ka-C*ja));a[2]=g*(Q*c-T*ra)-D*(r*c-C*ra)+qa*(r*T-C*Q);a[3]=-(g*(Q*ka-T*ja)-D*(r*ka-
C*ja)+X*(r*T-C*Q));a[4]=-(E*(ja*c-ka*ra)-P*(Q*c-T*ra)+sa*(Q*ka-T*ja));a[5]=d*(ja*c-ka*ra)-P*(r*c-C*ra)+sa*(r*ka-C*ja);a[6]=-(d*(Q*c-T*ra)-E*(r*c-C*ra)+sa*(r*T-C*Q));a[7]=d*(Q*ka-T*ja)-E*(r*ka-C*ja)+P*(r*T-C*Q);a[8]=E*(X*c-ka*qa)-P*(D*c-T*qa)+sa*(D*ka-T*X);a[9]=-(d*(X*c-ka*qa)-P*(g*c-C*qa)+sa*(g*ka-C*X));a[10]=d*(D*c-T*qa)-E*(g*c-C*qa)+sa*(g*T-C*D);a[11]=-(d*(D*ka-T*X)-E*(g*ka-C*X)+P*(g*T-C*D));a[12]=-(E*(X*ra-ja*qa)-P*(D*ra-Q*qa)+sa*(D*ja-Q*X));a[13]=d*(X*ra-ja*qa)-P*(g*ra-r*qa)+sa*(g*ja-r*X);a[14]=
-(d*(D*ra-Q*qa)-E*(g*ra-r*qa)+sa*(g*Q-r*D));a[15]=d*(D*ja-Q*X)-E*(g*ja-r*X)+P*(g*Q-r*D);return a}function y(a){const c=a[0],d=a[1],g=a[2],r=a[3],C=a[4],E=a[5],D=a[6],Q=a[7],T=a[8],P=a[9],X=a[10],ja=a[11],ka=a[12],sa=a[13],qa=a[14];a=a[15];return(c*E-d*C)*(X*a-ja*qa)-(c*D-g*C)*(P*a-ja*sa)+(c*Q-r*C)*(P*qa-X*sa)+(d*D-g*E)*(T*a-ja*ka)-(d*Q-r*E)*(T*qa-X*ka)+(g*Q-r*D)*(T*sa-P*ka)}function x(a,c,d){const g=c[0],r=c[1],C=c[2],E=c[3],D=c[4],Q=c[5],T=c[6],P=c[7],X=c[8],ja=c[9],ka=c[10],sa=c[11],qa=c[12],ra=
c[13],wa=c[14];c=c[15];let ta=d[0],ua=d[1],va=d[2],xa=d[3];a[0]=ta*g+ua*D+va*X+xa*qa;a[1]=ta*r+ua*Q+va*ja+xa*ra;a[2]=ta*C+ua*T+va*ka+xa*wa;a[3]=ta*E+ua*P+va*sa+xa*c;ta=d[4];ua=d[5];va=d[6];xa=d[7];a[4]=ta*g+ua*D+va*X+xa*qa;a[5]=ta*r+ua*Q+va*ja+xa*ra;a[6]=ta*C+ua*T+va*ka+xa*wa;a[7]=ta*E+ua*P+va*sa+xa*c;ta=d[8];ua=d[9];va=d[10];xa=d[11];a[8]=ta*g+ua*D+va*X+xa*qa;a[9]=ta*r+ua*Q+va*ja+xa*ra;a[10]=ta*C+ua*T+va*ka+xa*wa;a[11]=ta*E+ua*P+va*sa+xa*c;ta=d[12];ua=d[13];va=d[14];xa=d[15];a[12]=ta*g+ua*D+va*X+
xa*qa;a[13]=ta*r+ua*Q+va*ja+xa*ra;a[14]=ta*C+ua*T+va*ka+xa*wa;a[15]=ta*E+ua*P+va*sa+xa*c;return a}function M(a,c,d){const g=d[0],r=d[1];d=d[2];if(c===a)a[12]=c[0]*g+c[4]*r+c[8]*d+c[12],a[13]=c[1]*g+c[5]*r+c[9]*d+c[13],a[14]=c[2]*g+c[6]*r+c[10]*d+c[14],a[15]=c[3]*g+c[7]*r+c[11]*d+c[15];else{const C=c[0],E=c[1],D=c[2],Q=c[3],T=c[4],P=c[5],X=c[6],ja=c[7],ka=c[8],sa=c[9],qa=c[10],ra=c[11];a[0]=C;a[1]=E;a[2]=D;a[3]=Q;a[4]=T;a[5]=P;a[6]=X;a[7]=ja;a[8]=ka;a[9]=sa;a[10]=qa;a[11]=ra;a[12]=C*g+T*r+ka*d+c[12];
a[13]=E*g+P*r+sa*d+c[13];a[14]=D*g+X*r+qa*d+c[14];a[15]=Q*g+ja*r+ra*d+c[15]}return a}function G(a,c,d){const g=d[0],r=d[1];d=d[2];a[0]=c[0]*g;a[1]=c[1]*g;a[2]=c[2]*g;a[3]=c[3]*g;a[4]=c[4]*r;a[5]=c[5]*r;a[6]=c[6]*r;a[7]=c[7]*r;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}function B(a,c,d,g){let r=g[0],C=g[1];g=g[2];let E=Math.sqrt(r*r+C*C+g*g);var D=void 0,Q=void 0;let T=void 0,P=void 0,X=void 0,ja=void 0,ka=void 0,sa=void 0,qa=void 0,
ra=void 0,wa=void 0,ta=void 0,ua=void 0,va=void 0,xa=void 0,ya=void 0,Aa=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0;Q=D=void 0;if(E<p.getEpsilon())return null;E=1/E;r*=E;C*=E;g*=E;D=Math.sin(d);Q=Math.cos(d);T=1-Q;P=c[0];X=c[1];ja=c[2];ka=c[3];sa=c[4];qa=c[5];ra=c[6];wa=c[7];ta=c[8];ua=c[9];va=c[10];xa=c[11];ya=r*r*T+Q;Aa=C*r*T+g*D;Ca=g*r*T-C*D;Da=r*C*T-g*D;Ea=C*C*T+Q;Fa=g*C*T+r*D;Ga=r*g*T+C*D;D=C*g*T-r*D;Q=g*g*T+Q;a[0]=P*ya+sa*Aa+ta*Ca;a[1]=X*ya+qa*Aa+ua*Ca;a[2]=ja*ya+ra*Aa+va*Ca;a[3]=
ka*ya+wa*Aa+xa*Ca;a[4]=P*Da+sa*Ea+ta*Fa;a[5]=X*Da+qa*Ea+ua*Fa;a[6]=ja*Da+ra*Ea+va*Fa;a[7]=ka*Da+wa*Ea+xa*Fa;a[8]=P*Ga+sa*D+ta*Q;a[9]=X*Ga+qa*D+ua*Q;a[10]=ja*Ga+ra*D+va*Q;a[11]=ka*Ga+wa*D+xa*Q;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a}function A(a,c,d){const g=Math.sin(d);d=Math.cos(d);const r=c[4],C=c[5],E=c[6],D=c[7],Q=c[8],T=c[9],P=c[10],X=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=r*d+Q*g;a[5]=C*d+T*g;a[6]=
E*d+P*g;a[7]=D*d+X*g;a[8]=Q*d-r*g;a[9]=T*d-C*g;a[10]=P*d-E*g;a[11]=X*d-D*g;return a}function H(a,c,d){const g=Math.sin(d);d=Math.cos(d);const r=c[0],C=c[1],E=c[2],D=c[3],Q=c[8],T=c[9],P=c[10],X=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=r*d-Q*g;a[1]=C*d-T*g;a[2]=E*d-P*g;a[3]=D*d-X*g;a[8]=r*g+Q*d;a[9]=C*g+T*d;a[10]=E*g+P*d;a[11]=D*g+X*d;return a}function W(a,c,d){const g=Math.sin(d);d=Math.cos(d);const r=c[0],C=c[1],E=c[2],D=c[3],Q=c[4],
T=c[5],P=c[6],X=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=r*d+Q*g;a[1]=C*d+T*g;a[2]=E*d+P*g;a[3]=D*d+X*g;a[4]=Q*d-r*g;a[5]=T*d-C*g;a[6]=P*d-E*g;a[7]=X*d-D*g;return a}function Z(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function fa(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=
0;a[13]=0;a[14]=0;a[15]=1;return a}function V(a,c,d){if(0===c)return t(a);let g=d[0],r=d[1];d=d[2];let C=Math.sqrt(g*g+r*r+d*d),E=void 0,D=void 0,Q=void 0;if(C<p.getEpsilon())return null;C=1/C;g*=C;r*=C;d*=C;E=Math.sin(c);D=Math.cos(c);Q=1-D;a[0]=g*g*Q+D;a[1]=r*g*Q+d*E;a[2]=d*g*Q-r*E;a[3]=0;a[4]=g*r*Q-d*E;a[5]=r*r*Q+D;a[6]=d*r*Q+g*E;a[7]=0;a[8]=g*d*Q+r*E;a[9]=r*d*Q-g*E;a[10]=d*d*Q+D;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function U(a,c){const d=Math.sin(c);c=Math.cos(c);a[0]=1;a[1]=0;a[2]=
0;a[3]=0;a[4]=0;a[5]=c;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function F(a,c){const d=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function S(a,c){const d=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function aa(a,c,d){var g=c[0],r=c[1],
C=c[2],E=c[3],D=g+g,Q=r+r;const T=C+C;c=g*D;const P=g*Q;g*=T;const X=r*Q;r*=T;C*=T;D*=E;Q*=E;E*=T;a[0]=1-(X+C);a[1]=P+E;a[2]=g-Q;a[3]=0;a[4]=P-E;a[5]=1-(c+C);a[6]=r+D;a[7]=0;a[8]=g+Q;a[9]=r-D;a[10]=1-(c+X);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}function ia(a,c){const d=w,g=-c[0],r=-c[1],C=-c[2],E=c[3],D=c[4],Q=c[5],T=c[6],P=c[7],X=g*g+r*r+C*C+E*E;0<X?(d[0]=2*(D*E+P*g+Q*C-T*r)/X,d[1]=2*(Q*E+P*r+T*g-D*C)/X,d[2]=2*(T*E+P*C+D*r-Q*g)/X):(d[0]=2*(D*E+P*g+Q*C-T*r),d[1]=2*(Q*E+P*r+T*g-
D*C),d[2]=2*(T*E+P*C+D*r-Q*g));aa(a,c,d);return a}function da(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a}function J(a,c){const d=c[0],g=c[1],r=c[2],C=c[4],E=c[5],D=c[6],Q=c[8],T=c[9];c=c[10];a[0]=Math.sqrt(d*d+g*g+r*r);a[1]=Math.sqrt(C*C+E*E+D*D);a[2]=Math.sqrt(Q*Q+T*T+c*c);return a}function N(a,c){const d=c[0]+c[5]+c[10];let g=0;0<d?(g=2*Math.sqrt(d+1),a[3]=.25*g,a[0]=(c[6]-c[9])/g,a[1]=(c[8]-c[2])/g,a[2]=(c[1]-c[4])/g):c[0]>c[5]&&c[0]>c[10]?(g=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/
g,a[0]=.25*g,a[1]=(c[1]+c[4])/g,a[2]=(c[8]+c[2])/g):c[5]>c[10]?(g=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=(c[8]-c[2])/g,a[0]=(c[1]+c[4])/g,a[1]=.25*g,a[2]=(c[6]+c[9])/g):(g=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/g,a[0]=(c[8]+c[2])/g,a[1]=(c[6]+c[9])/g,a[2]=.25*g);return a}function R(a,c,d,g){var r=c[0],C=c[1],E=c[2],D=c[3],Q=r+r,T=C+C,P=E+E;c=r*Q;const X=r*T;r*=P;const ja=C*T;C*=P;E*=P;Q*=D;T*=D;D*=P;P=g[0];const ka=g[1];g=g[2];a[0]=(1-(ja+E))*P;a[1]=(X+D)*P;a[2]=(r-T)*P;a[3]=0;a[4]=(X-D)*ka;
a[5]=(1-(c+E))*ka;a[6]=(C+Q)*ka;a[7]=0;a[8]=(r+T)*g;a[9]=(C-Q)*g;a[10]=(1-(c+ja))*g;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}function ca(a,c,d,g,r){var C=c[0],E=c[1],D=c[2],Q=c[3],T=C+C,P=E+E,X=D+D;c=C*T;var ja=C*P,ka=C*X;C=E*P;E*=X;var sa=D*X;D=Q*T;P*=Q;const qa=Q*X;var ra=g[0],wa=g[1];X=g[2];g=r[0];Q=r[1];r=r[2];T=(1-(C+sa))*ra;const ta=(ja+qa)*ra;ra*=ka-P;ja=(ja-qa)*wa;sa=(1-(c+sa))*wa;wa*=E+D;ka=(ka+P)*X;E=(E-D)*X;c=(1-(c+C))*X;a[0]=T;a[1]=ta;a[2]=ra;a[3]=0;a[4]=ja;a[5]=sa;a[6]=
wa;a[7]=0;a[8]=ka;a[9]=E;a[10]=c;a[11]=0;a[12]=d[0]+g-(T*g+ja*Q+ka*r);a[13]=d[1]+Q-(ta*g+sa*Q+E*r);a[14]=d[2]+r-(ra*g+wa*Q+c*r);a[15]=1;return a}function oa(a,c){var d=c[0],g=c[1],r=c[2];c=c[3];var C=d+d,E=g+g;const D=r+r;d*=C;const Q=g*C;g*=E;const T=r*C,P=r*E;r*=D;C*=c;E*=c;c*=D;a[0]=1-g-r;a[1]=Q+c;a[2]=T-E;a[3]=0;a[4]=Q-c;a[5]=1-d-r;a[6]=P+C;a[7]=0;a[8]=T+E;a[9]=P-C;a[10]=1-d-g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function la(a,c,d,g,r,C,E){const D=1/(d-c),Q=1/(r-g),T=1/(C-E);a[0]=
2*C*D;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*C*Q;a[6]=0;a[7]=0;a[8]=(d+c)*D;a[9]=(r+g)*Q;a[10]=(E+C)*T;a[11]=-1;a[12]=0;a[13]=0;a[14]=E*C*2*T;a[15]=0;return a}function k(a,c,d,g,r){c=1/Math.tan(c/2);let C=void 0;a[0]=c/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=r&&Infinity!==r?(C=1/(g-r),a[10]=(r+g)*C,a[14]=2*r*g*C):(a[10]=-1,a[14]=-2*g);return a}function m(a,c,d,g){const r=Math.tan(c.upDegrees*Math.PI/180),C=Math.tan(c.downDegrees*Math.PI/
180),E=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);const D=2/(E+c),Q=2/(r+C);a[0]=D;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=Q;a[6]=0;a[7]=0;a[8]=-((E-c)*D*.5);a[9]=(r-C)*Q*.5;a[10]=g/(d-g);a[11]=-1;a[12]=0;a[13]=0;a[14]=g*d/(d-g);a[15]=0;return a}function L(a,c,d,g,r,C,E){const D=1/(c-d),Q=1/(g-r),T=1/(C-E);a[0]=-2*D;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*Q;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*T;a[11]=0;a[12]=(c+d)*D;a[13]=(r+g)*Q;a[14]=(E+C)*T;a[15]=1;return a}function ba(a,c,
d,g){const r=c[0],C=c[1];c=c[2];let E=r-d[0],D=C-d[1];d=c-d[2];var Q=p.getEpsilon();if(Math.abs(E)<Q&&Math.abs(D)<Q&&Math.abs(d)<Q)t(a);else{var T=1/Math.sqrt(E*E+D*D+d*d);E*=T;D*=T;d*=T;T=g[0];var P=g[1];Q=g[2];g=P*d-Q*D;Q=Q*E-T*d;P=T*D-P*E;(T=Math.sqrt(g*g+Q*Q+P*P))?(T=1/T,g*=T,Q*=T,P*=T):P=Q=g=0;var X=D*P-d*Q,ja=d*g-E*P,ka=E*Q-D*g;(T=Math.sqrt(X*X+ja*ja+ka*ka))?(T=1/T,X*=T,ja*=T,ka*=T):ka=ja=X=0;a[0]=g;a[1]=X;a[2]=E;a[3]=0;a[4]=Q;a[5]=ja;a[6]=D;a[7]=0;a[8]=P;a[9]=ka;a[10]=d;a[11]=0;a[12]=-(g*r+
Q*C+P*c);a[13]=-(X*r+ja*C+ka*c);a[14]=-(E*r+D*C+d*c);a[15]=1}}function ha(a,c,d,g){const r=c[0],C=c[1];c=c[2];var E=g[0];const D=g[1];var Q=g[2];g=r-d[0];let T=C-d[1];d=c-d[2];let P=g*g+T*T+d*d;0<P&&(P=1/Math.sqrt(P),g*=P,T*=P,d*=P);let X=D*d-Q*T;Q=Q*g-E*d;E=E*T-D*g;P=X*X+Q*Q+E*E;0<P&&(P=1/Math.sqrt(P),X*=P,Q*=P,E*=P);a[0]=X;a[1]=Q;a[2]=E;a[3]=0;a[4]=T*E-d*Q;a[5]=d*X-g*E;a[6]=g*Q-T*X;a[7]=0;a[8]=g;a[9]=T;a[10]=d;a[11]=0;a[12]=r;a[13]=C;a[14]=c;a[15]=1;return a}function ma(a){return"mat4("+a[0]+", "+
a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function na(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function pa(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];a[3]=c[3]+d[3];a[4]=c[4]+d[4];a[5]=c[5]+d[5];a[6]=c[6]+d[6];a[7]=c[7]+d[7];a[8]=c[8]+d[8];a[9]=c[9]+d[9];a[10]=c[10]+
d[10];a[11]=c[11]+d[11];a[12]=c[12]+d[12];a[13]=c[13]+d[13];a[14]=c[14]+d[14];a[15]=c[15]+d[15];return a}function K(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];a[3]=c[3]-d[3];a[4]=c[4]-d[4];a[5]=c[5]-d[5];a[6]=c[6]-d[6];a[7]=c[7]-d[7];a[8]=c[8]-d[8];a[9]=c[9]-d[9];a[10]=c[10]-d[10];a[11]=c[11]-d[11];a[12]=c[12]-d[12];a[13]=c[13]-d[13];a[14]=c[14]-d[14];a[15]=c[15]-d[15];return a}function O(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*d;a[4]=c[4]*d;a[5]=c[5]*d;a[6]=c[6]*d;a[7]=c[7]*
d;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12]*d;a[13]=c[13]*d;a[14]=c[14]*d;a[15]=c[15]*d;return a}function I(a,c,d,g){a[0]=c[0]+d[0]*g;a[1]=c[1]+d[1]*g;a[2]=c[2]+d[2]*g;a[3]=c[3]+d[3]*g;a[4]=c[4]+d[4]*g;a[5]=c[5]+d[5]*g;a[6]=c[6]+d[6]*g;a[7]=c[7]+d[7]*g;a[8]=c[8]+d[8]*g;a[9]=c[9]+d[9]*g;a[10]=c[10]+d[10]*g;a[11]=c[11]+d[11]*g;a[12]=c[12]+d[12]*g;a[13]=c[13]+d[13]*g;a[14]=c[14]+d[14]*g;a[15]=c[15]+d[15]*g;return a}function Y(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===
c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]}function ea(a,c){if(a===c)return!0;const d=a[0],g=a[1],r=a[2],C=a[3],E=a[4],D=a[5],Q=a[6],T=a[7],P=a[8],X=a[9],ja=a[10],ka=a[11],sa=a[12],qa=a[13],ra=a[14];a=a[15];const wa=c[0],ta=c[1],ua=c[2],va=c[3],xa=c[4],ya=c[5],Aa=c[6],Ca=c[7],Da=c[8],Ea=c[9],Fa=c[10],Ga=c[11],za=c[12],Ha=c[13],Ia=c[14];c=c[15];const Ba=p.getEpsilon();return Math.abs(d-
wa)<=Ba*Math.max(1,Math.abs(d),Math.abs(wa))&&Math.abs(g-ta)<=Ba*Math.max(1,Math.abs(g),Math.abs(ta))&&Math.abs(r-ua)<=Ba*Math.max(1,Math.abs(r),Math.abs(ua))&&Math.abs(C-va)<=Ba*Math.max(1,Math.abs(C),Math.abs(va))&&Math.abs(E-xa)<=Ba*Math.max(1,Math.abs(E),Math.abs(xa))&&Math.abs(D-ya)<=Ba*Math.max(1,Math.abs(D),Math.abs(ya))&&Math.abs(Q-Aa)<=Ba*Math.max(1,Math.abs(Q),Math.abs(Aa))&&Math.abs(T-Ca)<=Ba*Math.max(1,Math.abs(T),Math.abs(Ca))&&Math.abs(P-Da)<=Ba*Math.max(1,Math.abs(P),Math.abs(Da))&&
Math.abs(X-Ea)<=Ba*Math.max(1,Math.abs(X),Math.abs(Ea))&&Math.abs(ja-Fa)<=Ba*Math.max(1,Math.abs(ja),Math.abs(Fa))&&Math.abs(ka-Ga)<=Ba*Math.max(1,Math.abs(ka),Math.abs(Ga))&&Math.abs(sa-za)<=Ba*Math.max(1,Math.abs(sa),Math.abs(za))&&Math.abs(qa-Ha)<=Ba*Math.max(1,Math.abs(qa),Math.abs(Ha))&&Math.abs(ra-Ia)<=Ba*Math.max(1,Math.abs(ra),Math.abs(Ia))&&Math.abs(a-c)<=Ba*Math.max(1,Math.abs(a),Math.abs(c))}function z(a){const c=p.getEpsilon(),d=a[0],g=a[1],r=a[2],C=a[4],E=a[5],D=a[6],Q=a[8],T=a[9];a=
a[10];return Math.abs(1-(d*d+C*C+Q*Q))<=c&&Math.abs(1-(g*g+E*E+T*T))<=c&&Math.abs(1-(r*r+D*D+a*a))<=c}function e(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[8]&&0===a[9]&&1===a[10]}const w=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:pa,adjoint:v,copy:q,determinant:y,equals:ea,exactEquals:Y,frob:na,fromQuat:oa,fromQuat2:ia,fromRotation:V,fromRotationTranslation:aa,fromRotationTranslationScale:R,fromRotationTranslationScaleOrigin:ca,fromScaling:fa,
fromTranslation:Z,fromXRotation:U,fromYRotation:F,fromZRotation:S,frustum:la,getRotation:N,getScaling:J,getTranslation:da,hasIdentityRotation:e,identity:t,invert:h,invertOrIdentity:n,isOrthoNormal:z,lookAt:ba,mul:x,multiply:x,multiplyScalar:O,multiplyScalarAndAdd:I,ortho:L,perspective:k,perspectiveFromFieldOfView:m,rotate:B,rotateX:A,rotateY:H,rotateZ:W,scale:G,set:u,str:ma,sub:K,subtract:K,targetTo:ha,translate:M,transpose:l},Symbol.toStringTag,{value:"Module"}));b.add=pa;b.adjoint=v;b.copy=q;b.determinant=
y;b.equals=ea;b.exactEquals=Y;b.frob=na;b.fromQuat=oa;b.fromQuat2=ia;b.fromRotation=V;b.fromRotationTranslation=aa;b.fromRotationTranslationScale=R;b.fromRotationTranslationScaleOrigin=ca;b.fromScaling=fa;b.fromTranslation=Z;b.fromXRotation=U;b.fromYRotation=F;b.fromZRotation=S;b.frustum=la;b.getRotation=N;b.getScaling=J;b.getTranslation=da;b.hasIdentityRotation=e;b.identity=t;b.invert=h;b.invertOrIdentity=n;b.isOrthoNormal=z;b.lookAt=ba;b.mat4=f;b.mul=x;b.multiply=x;b.multiplyScalar=O;b.multiplyScalarAndAdd=
I;b.ortho=L;b.perspective=k;b.perspectiveFromFieldOfView=m;b.rotate=B;b.rotateX=A;b.rotateY=H;b.rotateZ=W;b.scale=G;b.set=u;b.str=ma;b.sub=K;b.subtract=K;b.targetTo=ha;b.translate=M;b.transpose=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ./vectorStacks".split(" "),function(b,f,p,q,u,t){function l(x){return x?n(u.clone(x.origin),
u.clone(x.direction)):n(u.create(),u.create())}function n(x,M){return{origin:x,direction:M}}function h(x,M,G=l()){q.copy(G.origin,x);q.copy(G.direction,M);return G}const v=new p.ObjectStack(()=>l()),y=u.create();b.closestPoint=function(x,M,G){M=q.dot(x.direction,q.subtract(G,M,x.origin));q.add(G,x.origin,q.scale(G,x.direction,M));return G};b.closestPoints=function(x,M,G,B){const A=x.direction,H=M.direction;var W=q.sub(y,M.origin,x.origin);const Z=q.dot(A,H),fa=q.dot(H,W);W=q.dot(A,W);const V=q.dot(A,
A),U=q.dot(H,H),F=(Z*W-fa*V)/(V*U-Z*Z);q.add(G,x.origin,q.scale(y,A,(Z*fa+W*U)/(V*U-Z*Z)));q.add(B,M.origin,q.scale(y,H,F));return[G,B]};b.copy=function(x,M=l()){return h(x.origin,x.direction,M)};b.create=l;b.distance2=function(x,M){x=q.cross(t.sv3d.get(),q.normalize(t.sv3d.get(),x.direction),q.subtract(t.sv3d.get(),M,x.origin));return q.dot(x,x)};b.equals=function(x,M){return f.equals(x.origin,M.origin)&&f.equals(x.direction,M.direction)};b.fromPoints=function(x,M,G=l()){q.copy(G.origin,x);q.subtract(G.direction,
M,x);return G};b.fromValues=h;b.wrap=function(x,M){const G=v.get();G.origin=x;G.direction=M;return G};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(b,f){class p{constructor(q){this._allocator=q;this._items=[];this._itemsPtr=0;this._grow()}get(){0===this._itemsPtr&&f.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]}_reset(){this._items.length=
Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0}_grow(){for(let q=0;q<Math.max(8,Math.min(this._items.length,1024));q++)this._items.push(this._allocator())}}b.ObjectStack=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(b,f){const p=f.VectorStack.createVec2f64(),q=f.VectorStack.createVec3f64(),u=f.VectorStack.createVec4f64(),
t=f.VectorStack.createMat3f64(),l=f.VectorStack.createMat4f64();f=f.VectorStack.createQuatf64();b.sm3d=t;b.sm4d=l;b.sq4d=f;b.sv2d=p;b.sv3d=q;b.sv4d=u;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/VectorStack":function(){define("exports ./has ./nextTick ./libs/gl-matrix-2/factories/mat3f64 ./libs/gl-matrix-2/factories/mat4f64 ./libs/gl-matrix-2/factories/quatf64 ./libs/gl-matrix-2/factories/vec2f64 ./libs/gl-matrix-2/factories/vec3f64 ./libs/gl-matrix-2/factories/vec4f64".split(" "),
function(b,f,p,q,u,t,l,n,h){class v{constructor(y){this._create=y;this._items=[];this._itemsPtr=0}get(){0===this._itemsPtr&&p.nextTick(()=>this._reset());this._itemsPtr>=this._items.length&&this._items.push(this._create());return this._items[this._itemsPtr++]}_reset(){const y=2*this._itemsPtr;this._items.length>y&&(this._items.length=y);this._itemsPtr=0}static createVec2f64(){return new v(l.create)}static createVec3f64(){return new v(n.create)}static createVec4f64(){return new v(h.create)}static createMat3f64(){return new v(q.create)}static createMat4f64(){return new v(u.create)}static createQuatf64(){return new v(t.create)}get test(){}}
b.VectorStack=v;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["exports"],function(b){function f(){return[1,0,0,0,1,0,0,0,1]}function p(n){return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]]}function q(n,h,v,y,x,M,G,B,A){return[n,h,v,y,x,M,G,B,A]}function u(n,h){return new Float64Array(n,h,9)}const t=f(),l=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:t,clone:p,create:f,createView:u,fromValues:q},Symbol.toStringTag,
{value:"Module"}));b.IDENTITY=t;b.clone=p;b.create=f;b.createView=u;b.fromValues=q;b.mat3f64=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["exports"],function(b){function f(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function p(n){return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]]}function q(n,h,v,y,x,M,G,B,A,H,W,Z,fa,V,U,F){return[n,h,v,y,x,M,G,B,A,H,W,Z,fa,V,U,F]}function u(n,
h){return new Float64Array(n,h,16)}const t=f(),l=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:t,clone:p,create:f,createView:u,fromValues:q},Symbol.toStringTag,{value:"Module"}));b.IDENTITY=t;b.clone=p;b.create=f;b.createView=u;b.fromValues=q;b.mat4f64=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/quatf64":function(){define(["exports"],function(b){function f(){return[0,0,0,1]}function p(n){return[n[0],n[1],n[2],n[3]]}function q(n,
h,v,y){return[n,h,v,y]}function u(n,h){return new Float64Array(n,h,4)}const t=f(),l=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:t,clone:p,create:f,createView:u,fromValues:q},Symbol.toStringTag,{value:"Module"}));b.IDENTITY=t;b.clone=p;b.create=f;b.createView=u;b.fromValues=q;b.quatf64=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["exports"],function(b){function f(){return[0,0]}function p(A){return[A[0],
A[1]]}function q(A,H){return[A,H]}function u(A,H=[0,0]){const W=Math.min(2,A.length);for(let Z=0;Z<W;++Z)H[Z]=A[Z];return H}function t(A,H){return new Float64Array(A,H,2)}function l(){return[0,0]}function n(){return[1,1]}function h(){return[1,0]}function v(){return[0,1]}const y=[0,0],x=[1,1],M=[1,0],G=[0,1],B=Object.freeze(Object.defineProperty({__proto__:null,ONES:x,UNIT_X:M,UNIT_Y:G,ZEROS:y,clone:p,create:f,createView:t,fromArray:u,fromValues:q,ones:n,unitX:h,unitY:v,zeros:l},Symbol.toStringTag,
{value:"Module"}));b.ONES=x;b.UNIT_X=M;b.UNIT_Y=G;b.ZEROS=y;b.clone=p;b.create=f;b.createView=t;b.fromArray=u;b.fromValues=q;b.ones=n;b.unitX=h;b.unitY=v;b.vec2f64=B;b.zeros=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64"],function(b,f,p,q){const u=q.create(),t=q.create();b.angle=function(l,n){l=p.dot(l,n)/(p.length(l)*p.length(n));
return-f.acosClamped(l)};b.angleAroundAxis=function(l,n,h){p.normalize(u,l);p.normalize(t,n);l=p.dot(u,t);l=f.acosClamped(l);n=p.cross(u,u,t);return 0>p.dot(n,h)?2*Math.PI-l:l};b.projectPoint=function(l,n,h){n=p.dot(l,n)/p.dot(l,l);return p.scale(h,l,n)};b.projectPointSignedLength=function(l,n){return p.dot(l,n)/p.length(l)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/i3s/I3SUtil":function(){define("exports ../../../../geometry ../../../../request ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/typedArrayUtil ../../../../core/libs/gl-matrix-2/math/mat4 ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../geometry/projection ../../../../geometry/spatialReferenceEllipsoidUtils ../../../../geometry/projection/projectVectorToVector ../../../../geometry/support/aaBoundingRect ../../../../chunks/sphere ../../../../rest/support/Query ./I3SBinaryReader ./I3SProjectionUtil ../support/edgeUtils ../support/symbolColorUtils ../../support/orientedBoundingBox ../../../../geometry/SpatialReference".split(" "),
function(b,f,p,q,u,t,l,n,h,v,y,x,M,G,B,A,H,W,Z,fa,V,U,F){function S(z){return z?parseInt(z.substring(z.lastIndexOf("/")+1,z.length),10):void 0}function aa(z,e){var w=e[0],a=e[1];e=e[3];const c=z[0]-w;w-=z[2];const d=z[1]-a;z=a-z[3];a=Math.max(c,w,0);const g=Math.max(d,z,0);a=a*a+g*g;return a>e*e?b.MbsIntersectResult.OUTSIDE:0<a?b.MbsIntersectResult.INTERSECTS_CENTER_OUTSIDE:-Math.max(c,w,d,z)>e?b.MbsIntersectResult.INSIDE:b.MbsIntersectResult.INTERSECTS_CENTER_INSIDE}function ia(z,e,w){const a=[],
c=w?.missingFields;w=w?.originalFields;for(const d of z){z=d.toLowerCase();let g=!1;for(const r of e)if(z===r.name.toLowerCase()){a.push(r.name);g=!0;w&&w.push(d);break}!g&&c&&c.push(d)}return a}function da(z,e,w){const a=new Map,c=[];w=w();for(const r of z){var d=r.attributes[e];for(var g=0;g<w.length;g++){z=w[g];const C=z.featureIds.indexOf(d);if(0<=C){d=a.get(z.node);d||(d={node:z.node,indices:[],graphics:[]},c.push(d),a.set(z.node,d));d.indices.push(C);for(d.graphics.push(r);0<g;g--)w[g]=w[g-
1];w[0]=z;break}}}return c}async function J(z,e,w,a,c){e.sort((r,C)=>r.attributes[w]-C.attributes[w]);var d=e.map(r=>r.attributes[w]);const g=[];a=ia(a,z.fields,{originalFields:g});z=await N(z,d,a,c);for(c=0;c<e.length;c++){d=e[c];const r=z[c],C={};if(d.attributes)for(const E in d.attributes)C[E]=d.attributes[E];for(let E=0;E<g.length;E++)C[g[E]]=r[a[E]];d.attributes=C}return e}function N(z,e,w,a){var c=z.capabilities.query.maxRecordCount;if(null!=c&&e.length>c)return c=q.splitIntoChunks(e,c),Promise.all(c.map(d=>
N(z,d,w,a))).then(d=>d.flat());c=new H({objectIds:e,outFields:w,orderByFields:[z.objectIdField]});return z.queryFeatures(c,a).then(d=>{if(d&&d.features&&d.features.length===e.length)return d.features.map(g=>g.attributes);throw new u("scenelayer:feature-not-in-associated-layer","Feature not found in associated feature layer");})}async function R(z,e,w,a,c,d,g,r){const C=[];for(const E of e)E&&c.includes(E.name)&&C.push({url:`${z}/nodes/${w}/attributes/${E.key}/0`,storageInfo:E});z=await Promise.allSettled(C.map(E=>
p(E.url,{responseType:"array-buffer",query:{...g,token:d},signal:r?.signal}).then(D=>W.readBinaryAttribute(E.storageInfo,D.data))));e=[];for(const E of a){a={};for(w=0;w<z.length;w++)c=z[w],"fulfilled"===c.status&&(a[C[w].storageInfo.name]=ca(c.value,E));e.push(a)}return e}function ca(z,e){if(!z)return null;e=z[e];return l.isInt16Array(z)?-32768===e?null:e:l.isInt32Array(z)?e===ha?null:e:e!==e?null:e}function oa(z){var e=z.store,w=e.indexCRS||e.geographicCRS;if(e=void 0===w?e.indexWKT:void 0)if(z.spatialReference){if(e!==
z.spatialReference.wkt)throw new u("layerview:store-spatial-reference-wkt-index-incompatible","The indexWKT of the scene layer store does not match the WKT of the layer spatial reference",{});}else throw new u("layerview:no-store-spatial-reference-wkt-index-and-no-layer-spatial-reference","Found indexWKT in the scene layer store but no layer spatial reference",{});w=w?new F(S(w)):z.spatialReference;return w.equals(z.spatialReference)?z.spatialReference:w}function la(z){var e=z.store,w=e.vertexCRS||
e.projectedCRS;if(e=void 0===w?e.vertexWKT:void 0)if(z.spatialReference){if(e!==z.spatialReference.wkt)throw new u("layerview:store-spatial-reference-wkt-vertex-incompatible","The vertexWKT of the scene layer store does not match the WKT of the layer spatial reference",{});}else throw new u("layerview:no-store-spatial-reference-wkt-vertex-and-no-layer-spatial-reference","Found vertexWKT in the scene layer store but no layer spatial reference",{});w=w?new F(S(w)):z.spatialReference;return w.equals(z.spatialReference)?
z.spatialReference:w}function k(z,e,w){if(!x.canProjectWithoutEngine(z,e))throw new u("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{});if("local"===w&&!m(z,e))throw new u("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{});}function m(z,e){return z.equals(e)||z.isWGS84&&e.isWebMercator||z.isWebMercator&&e.isWGS84}
function L(z,e,w){const a=oa(z);z=la(z);k(a,e,w);k(z,e,w)}const ba=B.create();b.MbsIntersectResult=void 0;(function(z){z[z.OUTSIDE=0]="OUTSIDE";z[z.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE";z[z.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE";z[z.INSIDE=3]="INSIDE"})(b.MbsIntersectResult||(b.MbsIntersectResult={}));const ha=-(2**31);f=fa.createSolidEdgeMaterial({color:[0,0,0,0],opacity:0});class ma{constructor(){this.material=this.edgeMaterial=null;this.castShadows=!0}}const na=
[y.create(),y.create(),y.create(),y.create(),y.create(),y.create(),y.create(),y.create()],pa=B.create(),K=B.create(),O=new U.Obb,I=y.create(),Y={data:Array(72),size:3,exclusive:!0,stride:3},ea=h.create();b.SymbolInfo=ma;b.addWraparound=function(z,e){return(z|0)+(e|0)|0};b.checkPointCloudLayerCompatibleWithView=function(z,e){k(z.spatialReference,e.spatialReference,e.viewingMode)};b.checkPointCloudLayerValid=function(z){var e;(e=null==z.store?.defaultGeometrySchema)||(z=z.store.defaultGeometrySchema,
e=!!(null==z.geometryType||"points"!==z.geometryType||null!=z.topology&&"PerAttributeArray"!==z.topology||null!=z.encoding&&""!==z.encoding&&"lepcc-xyz"!==z.encoding||null==z.vertexAttributes?.position));if(e)throw new u("pointcloud:unsupported-geometry-schema","The geometry schema of this point cloud scene layer is not supported.",{});};b.checkRecyclable=function(z,e,w){if(z.serviceUpdateTimeStamp?.lastUpdate!==e.serviceUpdateTimeStamp?.lastUpdate||!w.isEmpty||z.associatedLayer?.url!==e.associatedLayer?.url)throw new u("layerview:recycle-failed");
};b.checkSceneLayerCompatibleWithView=function(z,e){L(z,e.spatialReference,e.viewingMode)};b.checkSceneLayerValid=function(z){var e;(e=null==z.store?.defaultGeometrySchema)||(e=z.store.defaultGeometrySchema,e=!!(null!=e.geometryType&&"triangles"!==e.geometryType||null!=e.topology&&"PerAttributeArray"!==e.topology||null==e.vertexAttributes?.position));if(e)throw new u("scenelayer:unsupported-geometry-schema","The geometry schema of this scene layer is not supported.",{url:z.parsedUrl.path});};b.checkSpatialReference=
k;b.checkSpatialReferences=L;b.computeVisibilityObb=function(z,e,w,a,c,d,g){if(!d||0===d.length||null==e||!z.serviceMbsInIndexSR)return null;const r=Z.computeGlobalTransformation(z.serviceMbsInIndexSR,c,"none",w,e);n.invert(ea,r);let C=null;const E=()=>{if(!C)if(C=na,B.empty(K),null!=z.serviceObbInIndexSR){z.serviceObbInIndexSR.transform(O,w,e,c,g);O.getCorners(C);for(var P of C)v.transformMat4(P,P,ea),B.expandPointInPlace(K,P)}else{var X=z.serviceMbsInIndexSR;if(X)for(P=X[3],G.projectVectorToVector(A.getCenter(X),
w,I,e),v.transformMat4(I,I,ea),I[2]+=c,X=0;8>X;++X){const ja=C[X];v.copy(ja,[I[0]+(X&1?P:-P),I[1]+(X&2?P:-P),I[2]+(X&4?P:-P)]);B.expandPointInPlace(K,ja)}}};let D=Infinity,Q=-Infinity;const T=P=>{if("replace"===P.type&&(P=P.geometry,P?.hasZ)){B.empty(pa);var X=P.spatialReference||a;P=P.rings.reduce((ja,ka)=>ka.reduce((sa,qa)=>{v.set(I,qa[0],qa[1],qa[2]);G.projectVectorToVector(I,X,I,e);v.transformMat4(I,I,ea);B.expandPointInPlace(pa,I);return Math.min(I[2],sa)},ja),Infinity);E();B.intersects(K,pa)&&
(D=Math.min(D,P),Q=Math.max(Q,P))}};d.forEach(P=>T(P));if(Infinity===D)return null;d=(P,X,ja)=>{v.transformMat4(I,ja,r);P[X]=I[0];P[X+1]=I[1];P[X+2]=I[2];X+=24;ja[2]=D;v.transformMat4(I,ja,r);P[X]=I[0];P[X+1]=I[1];P[X+2]=I[2];X+=24;ja[2]=Q;v.transformMat4(I,ja,r);P[X]=I[0];P[X+1]=I[1];P[X+2]=I[2]};for(let P=0;8>P;++P)d(Y.data,3*P,C[P]);return U.compute(Y)};b.containsDraco=function(z){if(t("disable-feature:i3s-draco")||!z)return!1;for(const e of z)for(const w of e.geometryBuffers)if("draco"===w.compressedAttributes?.encoding)return!0;
return!1};b.extractWkid=S;b.filterInPlace=function(z,e,w){let a=0,c=0;for(let d=0;d<e.length&&a<z.length;d++)z[a]===e[d]&&(w(d)&&(z[c]=z[a],c++),a++);z.length=c};b.findFieldsCaseInsensitive=ia;b.findIntersectingNodes=function(z,e,w,a){w.traverse(e,c=>{const d=c.serviceMbsInIndexSR;if((null!=d&&aa(z,d))===b.MbsIntersectResult.OUTSIDE)return!1;a(c);return!0})};b.getCacheKeySuffix=function(z,e){return null==e?"@null":e===M.getSphericalPCPF(e)?"@ECEF":z.equals(e)?"":null!=e.wkid?"@"+e.wkid:null};b.getCachedAttributeValue=
ca;b.getClipRect=function(z,e){if(0===e.rotationScale[1]&&0===e.rotationScale[2]&&0===e.rotationScale[3]&&0===e.rotationScale[5]&&0===e.rotationScale[6]&&0===e.rotationScale[7])return ba[0]=(z[0]-e.position[0])/e.rotationScale[0],ba[1]=(z[1]-e.position[1])/e.rotationScale[4],ba[2]=(z[2]-e.position[0])/e.rotationScale[0],ba[3]=(z[3]-e.position[1])/e.rotationScale[4],ba};b.getIndexCrs=oa;b.getSymbolInfo=function(z){const e=new ma;var w=!1;let a=!1;for(const d of z.symbolLayers.items)if("fill"===d.type&&
d.enabled){var c=d.material;z=d.edges;null==c||w||(w=c.color,c=V.parseColorMixMode(c.colorMixMode),e.material=null!=w?{color:[w.r/255,w.g/255,w.b/255],alpha:w.a,colorMixMode:c}:{color:[1,1,1],alpha:1,colorMixMode:V.ColorMixModeEnum.Multiply},e.castShadows=d.castShadows,w=!0);null==z||a||(e.edgeMaterial=fa.createMaterialFromEdges(z,{}),a=!0)}e.material||(e.material={color:[1,1,1],alpha:1,colorMixMode:V.ColorMixModeEnum.Multiply});return e};b.getVertexCrs=la;b.intersectBoundingRectWithMbs=aa;b.invalidateMbs=
function(z){null!=z&&(z[3]=-1)};b.isSupportedLocalModeProjection=m;b.isValidMbs=function(z){return 0<=z[3]};b.objectIdFilter=function(z,e,w){let a=0,c=0;for(;a<w.length;)0<=q.binaryIndexOf(z,w[a])===e&&(w[c]=w[a],c++),a++;w.length=c};b.queryAttributesFromCachedAttributesId=R;b.rendererNeedsTextures=function(z){if(null==z||"simple"!==z.type&&"class-breaks"!==z.type&&"unique-value"!==z.type||("unique-value"===z.type||"class-breaks"===z.type)&&null==z.defaultSymbol)return!0;z=z.getSymbols();if(0===z.length)return!0;
for(const e of z){if("mesh-3d"!==e.type||0===e.symbolLayers.length)return!0;for(const w of e.symbolLayers.items)if("fill"!==w.type||null==w.material?.color||"replace"!==w.material.colorMixMode)return!0}return!1};b.transparentEdgeMaterial=f;b.whenGraphicAttributes=async function(z,e,w,a,c,d){if(0===e.length)return[];const g=z.attributeStorageInfo;if(null!=z.associatedLayer)try{return await J(z.associatedLayer,e,w,a,d)}catch(r){if(z.associatedLayer.loaded)throw r;}if(g){e=da(e,w,c);if(null==e)throw new u("scenelayer:features-not-loaded",
"Tried to query attributes for unloaded features");const r=z.parsedUrl.path;return(await Promise.all(e.map(C=>R(r,g,C.node.resources.attributes,C.indices,a,z.apiKey,z.customParameters,d).then(E=>{for(let D=0;D<C.graphics.length;D++){const Q=C.graphics[D],T=E[D];if(Q.attributes)for(const P in Q.attributes)P in T||(T[P]=Q.attributes[P]);Q.attributes=T}return C.graphics})))).flat()}throw new u("scenelayer:no-attribute-source","This scene layer does not have a source for attributes available");};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/spatialReferenceEllipsoidUtils":function(){define(["exports","./ellipsoidUtils","./SpatialReference","./support/spatialReferenceUtils"],function(b,f,p,q){const u=new p(f.SphericalECEFSpatialReferenceLike),t=new p(f.SphericalPCPFMarsLike),l=new p(f.SphericalPCPFMoonLike);f=new p(f.WGS84ECEFSpatialReferenceLike);const n=new Map,h=t.wkt.toUpperCase(),v=l.wkt.toUpperCase();b.SphericalECEFSpatialReference=u;b.SphericalPCPFMars=t;b.SphericalPCPFMoon=
l;b.WGS84ECEFSpatialReference=f;b.getSphericalPCPF=function(y){var x=n.get(y);if(x)return x;x=u;if(y)if(y===t)x=t;else if(y===l)x=l;else{var M=y.wkid;const G=y.latestWkid;if(null!=M||null!=G)if(q.isWKIDFromMars(M)||q.isWKIDFromMars(G))x=t;else{if(q.isWKIDFromMoon(M)||q.isWKIDFromMoon(G))x=l}else if(M=y.wkt2??y.wkt)M=M.toUpperCase(),M===h?x=t:M===v&&(x=l)}n.set(y,x);return x};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/projectVectorToVector":function(){define(["exports",
"../projection","../SpatialReference","./projectPointToVector","../../layers/graphics/dehydratedPoint"],function(b,f,p,q,u){function t(n,h,v,y,x){if(null==h||null==y||2>n.length)return!1;l.x=n[0];l.y=n[1];l.z=n[2];l.spatialReference=h;return q.projectPointToVector(l,v,y,x)}const l=u.makeDehydratedPoint(0,0,0,p.WGS84);b.projectVectorToVector=t;b.projectVectorToVectorAsync=async function(n,h,v,y,x,M){await f.initializeProjection(h,y,null,M);return t(n,h,v,y,x)};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/geometry/projection/projectPointToVector":function(){define(["exports","../../core/libs/gl-matrix-2/factories/vec3f64","../projection","./projectBuffer"],function(b,f,p,q){function u(l,n,h,v){if(p.canProjectWithoutEngine(l.spatialReference,h))return t[0]=l.x,t[1]=l.y,t[2]=l.z??v??0,q.projectBuffer(t,l.spatialReference,0,n,h,0,1);l=p.tryProjectWithZConversion(l,h);if(!l)return!1;n[0]=l?.x;n[1]=l?.y;n[2]=l?.z??v??0;return!0}const t=f.create();b.projectPointToVector=u;b.projectPointToVectorAsync=
async function(l,n,h,v,y){await p.initializeProjection(l.spatialReference,h,null,y);return u(l,n,h,v)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedPoint":function(){define(["exports"],function(b){b.makeDehydratedPoint=function(f,p,q,u){return{x:f,y:p,z:q,hasZ:null!=q,hasM:!1,spatialReference:u,type:"point"}};b.setDehydratedPoint=function(f,p,q,u,t){f.x=p;f.y=q;f.z=u;f.hasZ=null!=u;f.spatialReference=t};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/rest/support/Query":function(){define("../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./FullTextSearch ./QuantizationParameters ./spatialRelationships ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(b,f,p,q,u,t,l,n,h,v,y,x,M,G,B,A,H,W,Z,fa){var V;q=new q.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let U=V=class extends u.JSONSupport{static from(F){return x.ensureClass(V,F)}constructor(F){super(F);this.aggregateIds=null;this.cacheHint=void 0;this.compactGeometryEnabled=!1;this.datumTransformation=null;this.defaultSpatialReferenceEnabled=
!1;this.dynamicDataSource=this.distance=void 0;this.geometry=this.gdbVersion=this.fullText=this.formatOf3DObjects=null;this.geometryPrecision=void 0;this.historicMoment=this.having=this.groupByFieldsForStatistics=null;this.maxAllowableOffset=void 0;this.maxRecordCountFactor=1;this.multipatchOption=null;this.num=void 0;this.resultType=this.relationParameter=this.rangeValues=this.quantizationParameters=this.pixelSize=this.parameterValues=this.outStatistics=this.outSpatialReference=this.outFields=this.orderByFields=
this.objectIds=null;this.returnDistinctValues=this.returnCentroid=!1;this.returnExceededLimitFeatures=!0;this.returnQueryGeometry=this.returnGeometry=!1;this.returnZ=this.returnM=void 0;this.sourceSpatialReference=null;this.spatialRelationship="intersects";this.start=void 0;this.timeExtent=this.text=this.sqlFormat=null;this.timeReferenceUnknownClient=!1;this.where=this.units=null}castDatumTransformation(F){return"number"===typeof F||"object"===typeof F?F:null}writeHistoricMoment(F,S){S.historicMoment=
F&&F.getTime()}writeParameterValues(F,S){if(F){const aa={};for(const ia in F){const da=F[ia];Array.isArray(da)?aa[ia]=da.map(J=>J instanceof Date?J.getTime():J):aa[ia]=da instanceof Date?da.getTime():da}S.parameterValues=aa}}writeStart(F,S){S.resultOffset=this.start;S.resultRecordCount=this.num||10;S.where="1\x3d1"}writeWhere(F,S){S.where=F||"1\x3d1"}clone(){return new V(t.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,
defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:null!=this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};U.MAX_MAX_RECORD_COUNT_FACTOR=5;b.__decorate([l.property({json:{write:!0}})],
U.prototype,"aggregateIds",void 0);b.__decorate([l.property({type:Boolean,json:{write:!0}})],U.prototype,"cacheHint",void 0);b.__decorate([l.property({type:Boolean,json:{default:!1,write:!0}})],U.prototype,"compactGeometryEnabled",void 0);b.__decorate([l.property({json:{write:!0}})],U.prototype,"datumTransformation",void 0);b.__decorate([n.cast("datumTransformation")],U.prototype,"castDatumTransformation",null);b.__decorate([l.property({type:Boolean,json:{default:!1,write:!0}})],U.prototype,"defaultSpatialReferenceEnabled",
void 0);b.__decorate([l.property({type:Number,json:{write:{overridePolicy(F){return{enabled:0<F}}}}})],U.prototype,"distance",void 0);b.__decorate([l.property({type:G.DataLayerSource,json:{write:!0}})],U.prototype,"dynamicDataSource",void 0);b.__decorate([l.property({type:String,json:{write:!0}})],U.prototype,"formatOf3DObjects",void 0);b.__decorate([l.property({type:[B],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.fullText&&0<this.fullText.length}}}}})],U.prototype,"fullText",
void 0);b.__decorate([l.property({type:String,json:{write:!0}})],U.prototype,"gdbVersion",void 0);b.__decorate([l.property({types:f.geometryTypes,json:{read:M.fromJSON,write:!0}})],U.prototype,"geometry",void 0);b.__decorate([l.property({type:Number,json:{write:!0}})],U.prototype,"geometryPrecision",void 0);b.__decorate([l.property({type:[String],json:{write:!0}})],U.prototype,"groupByFieldsForStatistics",void 0);b.__decorate([l.property({type:String,json:{write:!0}})],U.prototype,"having",void 0);
b.__decorate([l.property({type:Date})],U.prototype,"historicMoment",void 0);b.__decorate([y.writer("historicMoment")],U.prototype,"writeHistoricMoment",null);b.__decorate([l.property({type:Number,json:{write:!0}})],U.prototype,"maxAllowableOffset",void 0);b.__decorate([l.property({type:Number,cast(F){return 1>F?1:F>U.MAX_MAX_RECORD_COUNT_FACTOR?U.MAX_MAX_RECORD_COUNT_FACTOR:F},json:{write:{overridePolicy(F){return{enabled:1<F}}}}})],U.prototype,"maxRecordCountFactor",void 0);b.__decorate([l.property({type:["xyFootprint"],
json:{write:!0}})],U.prototype,"multipatchOption",void 0);b.__decorate([l.property({type:Number,json:{read:{source:"resultRecordCount"}}})],U.prototype,"num",void 0);b.__decorate([l.property({json:{write:!0}})],U.prototype,"objectIds",void 0);b.__decorate([l.property({type:[String],json:{write:!0}})],U.prototype,"orderByFields",void 0);b.__decorate([l.property({type:[String],json:{write:!0}})],U.prototype,"outFields",void 0);b.__decorate([l.property({type:Z,json:{name:"outSR",write:!0}})],U.prototype,
"outSpatialReference",void 0);b.__decorate([l.property({type:[W],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.outStatistics&&0<this.outStatistics.length}}}}})],U.prototype,"outStatistics",void 0);b.__decorate([l.property({json:{write:!0}})],U.prototype,"parameterValues",void 0);b.__decorate([y.writer("parameterValues")],U.prototype,"writeParameterValues",null);b.__decorate([l.property({type:fa,json:{write:!0}})],U.prototype,"pixelSize",void 0);b.__decorate([l.property({type:A,
json:{write:!0}})],U.prototype,"quantizationParameters",void 0);b.__decorate([l.property({type:[Object],json:{write:!0}})],U.prototype,"rangeValues",void 0);b.__decorate([l.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],U.prototype,"relationParameter",void 0);b.__decorate([l.property({type:String,json:{write:!0}})],U.prototype,"resultType",void 0);b.__decorate([l.property({type:Boolean,
json:{default:!1,write:!0}})],U.prototype,"returnCentroid",void 0);b.__decorate([l.property({type:Boolean,json:{default:!1,write:!0}})],U.prototype,"returnDistinctValues",void 0);b.__decorate([l.property({type:Boolean,json:{default:!0,write:!0}})],U.prototype,"returnExceededLimitFeatures",void 0);b.__decorate([l.property({type:Boolean,json:{write:!0}})],U.prototype,"returnGeometry",void 0);b.__decorate([l.property({type:Boolean,json:{default:!1,write:!0}})],U.prototype,"returnQueryGeometry",void 0);
b.__decorate([l.property({type:Boolean,json:{default:!1,write:!0}})],U.prototype,"returnM",void 0);b.__decorate([l.property({type:Boolean,json:{write:{overridePolicy(F){return{enabled:F}}}}})],U.prototype,"returnZ",void 0);b.__decorate([l.property({type:Z,json:{write:!0}})],U.prototype,"sourceSpatialReference",void 0);b.__decorate([h.enumeration(H.spatialRelKebabDict,{ignoreUnknown:!1,name:"spatialRel"})],U.prototype,"spatialRelationship",void 0);b.__decorate([l.property({type:Number,json:{read:{source:"resultOffset"}}})],
U.prototype,"start",void 0);b.__decorate([y.writer("start"),y.writer("num")],U.prototype,"writeStart",null);b.__decorate([l.property({type:String,json:{write:!0}})],U.prototype,"sqlFormat",void 0);b.__decorate([l.property({type:String,json:{write:!0}})],U.prototype,"text",void 0);b.__decorate([l.property({type:p,json:{write:!0}})],U.prototype,"timeExtent",void 0);b.__decorate([l.property({type:Boolean,json:{default:!1,write:!0}})],U.prototype,"timeReferenceUnknownClient",void 0);b.__decorate([h.enumeration(q,
{ignoreUnknown:!1}),l.property({json:{write:{overridePolicy(F){return{enabled:!!F&&null!=this.distance&&0<this.distance}}}}})],U.prototype,"units",void 0);b.__decorate([l.property({type:String,json:{write:{overridePolicy(F){return{enabled:null!=F||null!=this.start&&0<this.start}}}}})],U.prototype,"where",void 0);b.__decorate([y.writer("where")],U.prototype,"writeWhere",null);return U=V=b.__decorate([v.subclass("esri.rest.support.Query")],U)})},"esri/TimeExtent":function(){define("./chunks/tslib.es6 ./core/JSONSupport ./core/timeUtils ./core/accessorSupport/decorators/property ./core/has ./core/Logger ./core/RandomLCG ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./time/timeZoneUtils".split(" "),
function(b,f,p,q,u,t,l,n,h,v,y){var x;f=x=class extends f.JSONSupport{static get allTime(){return M}static get empty(){return G}static fromArray(B){return new x({start:null!=B[0]?new Date(B[0]):B[0],end:null!=B[1]?new Date(B[1]):B[1]})}constructor(B){super(B);this.start=this.end=null}readEnd(B,A){return null!=A.end?new Date(A.end):null}writeEnd(B,A){A.end=B?.getTime()??null}get isAllTime(){return this.equals(x.allTime)}get isEmpty(){return this.equals(x.empty)}readStart(B,A){return null!=A.start?
new Date(A.start):null}writeStart(B,A){A.start=B?.getTime()??null}clone(){return new x({end:this.end,start:this.start})}equals(B){if(!B)return!1;const A=this.start?.getTime()??this.start,H=this.end?.getTime()??this.end,W=B.start?.getTime()??B.start;B=B.end?.getTime()??B.end;return A===W&&H===B}expandTo(B,A=y.system){if(this.isEmpty||this.isAllTime)return this.clone();let H=this.start;H&&=p.truncateDate(H,B,A);let W=this.end;if(W){const Z=p.truncateDate(W,B,A);W=W.getTime()===Z.getTime()?Z:p.offsetDate(Z,
1,B,A)}return new x({start:H,end:W})}intersection(B){if(!B)return this.clone();if(this.isEmpty||B.isEmpty)return x.empty;if(this.isAllTime)return B.clone();if(B.isAllTime)return this.clone();const A=this.start?.getTime()??-Infinity,H=this.end?.getTime()??Infinity,W=B.start?.getTime()??-Infinity;B=B.end?.getTime()??Infinity;let Z,fa;W>=A&&W<=H?Z=W:A>=W&&A<=B&&(Z=A);H>=W&&H<=B?fa=H:B>=A&&B<=H&&(fa=B);return null==Z||null==fa||isNaN(Z)||isNaN(fa)?x.empty:new x({start:-Infinity===Z?null:new Date(Z),end:Infinity===
fa?null:new Date(fa)})}offset(B,A,H=y.system){if(this.isEmpty||this.isAllTime)return this.clone();const W=new x,{start:Z,end:fa}=this;null!=Z&&(W.start=p.offsetDate(Z,B,A,H));null!=fa&&(W.end=p.offsetDate(fa,B,A,H));return W}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(B){if(!B||B.isEmpty)return this.clone();if(this.isEmpty)return B.clone();if(this.isAllTime||B.isAllTime)return M.clone();const A=null!=this.start&&null!=B.start?new Date(Math.min(this.start.getTime(),
B.start.getTime())):null;B=null!=this.end&&null!=B.end?new Date(Math.max(this.end.getTime(),B.end.getTime())):null;return new x({start:A,end:B})}};b.__decorate([q.property({type:Date,json:{write:{allowNull:!0}}})],f.prototype,"end",void 0);b.__decorate([n.reader("end")],f.prototype,"readEnd",null);b.__decorate([v.writer("end")],f.prototype,"writeEnd",null);b.__decorate([q.property({readOnly:!0,json:{read:!1}})],f.prototype,"isAllTime",null);b.__decorate([q.property({readOnly:!0,json:{read:!1}})],
f.prototype,"isEmpty",null);b.__decorate([q.property({type:Date,json:{write:{allowNull:!0}}})],f.prototype,"start",void 0);b.__decorate([n.reader("start")],f.prototype,"readStart",null);b.__decorate([v.writer("start")],f.prototype,"writeStart",null);f=x=b.__decorate([h.subclass("esri.TimeExtent")],f);const M=new f,G=new f({start:void 0,end:void 0});return f})},"esri/core/timeUtils":function(){define(["exports","../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(b,f,p,q){function u(n,
h,v){return 0===n?0:n*l[h]/l[v]}function t(n){switch(n){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const l={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};b.convertTime=u;b.isValidDate=function(n){return n instanceof Date&&
!isNaN(n.getTime())};b.makeUTCTime=function(n,h,v="milliseconds"){h=new Date(u(h,v,"milliseconds"));h.setUTCFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return h};b.mergeTimeExtents=function(n,h){return n&&h?n.intersection(h):n||h};b.millisecondsPerTimeUnit=l;b.offsetDate=function(n,h,v,y=p.system){y=new q.IANAZone(f.resolveTimeZone(y));n=q.DateTime.fromJSDate(n,{zone:y});y="decades"===v||"centuries"===v?"year":t(v);"decades"===v&&(h*=10);"centuries"===v&&(h*=100);return n.plus({[y]:h}).toJSDate()};
b.offsetDateUTC=function(n,h,v="milliseconds"){n=n.getTime();h=u(h,v,"milliseconds");return new Date(n+h)};b.resetUTCDate=function(n,h){n=new Date(n.getTime());n.setUTCFullYear(h.getFullYear(),h.getMonth(),h.getDate());return n};b.timeSinceUTCMidnight=function(n,h="milliseconds"){const v=u(n.getUTCHours(),"hours","milliseconds"),y=u(n.getUTCMinutes(),"minutes","milliseconds"),x=u(n.getUTCSeconds(),"seconds","milliseconds");n=n.getUTCMilliseconds();return u(v+y+x+n,"milliseconds",h)};b.truncateDate=
function(n,h,v=p.system){v=new q.IANAZone(f.resolveTimeZone(v));n=q.DateTime.fromJSDate(n,{zone:v});if("decades"===h||"centuries"===h)return n=n.startOf("year"),{year:v}=n,n.set({year:v-v%("decades"===h?10:100)}).toJSDate();h=t(h);return n.startOf(h).toJSDate()};b.truncateLocalTime=function(n){const h=new Date(0);h.setHours(0);h.setMinutes(0);h.setSeconds(0);h.setMilliseconds(0);h.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return h};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(b,f,p,q,u,t,l,n,h,v,y,x,M,G,B,A){function H(){V||=y.createTypeReader({types:W()});return V}function W(){U||={key:"type",base:null,typeMap:{"data-layer":b.DataLayerSource,"map-layer":M.MapLayerSource}};return U}var Z,fa;p=p.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});b.JoinTableDataSource=Z=class extends q.JSONSupport{constructor(F){super(F);this.type="join-table"}readLeftTableSource(F,S,aa){return H()(F,S,aa)}castLeftTableSource(F){return v.ensureOneOfType(W(),
F)}readRightTableSource(F,S,aa){return H()(F,S,aa)}castRightTableSource(F){return v.ensureOneOfType(W(),F)}clone(){const {leftTableKey:F,rightTableKey:S,leftTableSource:aa,rightTableSource:ia,joinType:da}=this,J={leftTableKey:F,rightTableKey:S,leftTableSource:aa?.clone()??void 0,rightTableSource:ia?.clone()??void 0,joinType:da};return new Z(J)}};f.__decorate([l.enumeration({joinTable:"join-table"})],b.JoinTableDataSource.prototype,"type",void 0);f.__decorate([u.property({type:String,json:{write:!0}})],
b.JoinTableDataSource.prototype,"leftTableKey",void 0);f.__decorate([u.property({type:String,json:{write:!0}})],b.JoinTableDataSource.prototype,"rightTableKey",void 0);f.__decorate([u.property({json:{write:!0}})],b.JoinTableDataSource.prototype,"leftTableSource",void 0);f.__decorate([n.reader("leftTableSource")],b.JoinTableDataSource.prototype,"readLeftTableSource",null);f.__decorate([t.cast("leftTableSource")],b.JoinTableDataSource.prototype,"castLeftTableSource",null);f.__decorate([u.property({json:{write:!0}})],
b.JoinTableDataSource.prototype,"rightTableSource",void 0);f.__decorate([n.reader("rightTableSource")],b.JoinTableDataSource.prototype,"readRightTableSource",null);f.__decorate([t.cast("rightTableSource")],b.JoinTableDataSource.prototype,"castRightTableSource",null);f.__decorate([l.enumeration(p)],b.JoinTableDataSource.prototype,"joinType",void 0);b.JoinTableDataSource=Z=f.__decorate([h.subclass("esri.layers.support.source.JoinTableDataSource")],b.JoinTableDataSource);let V=null,U=null;t={key:"type",
base:null,typeMap:{"join-table":b.JoinTableDataSource,"query-table":G.QueryTableDataSource,raster:B.RasterDataSource,table:A.TableDataSource}};b.DataLayerSource=fa=class extends q.JSONSupport{constructor(F){super(F);this.type="data-layer"}clone(){const {fields:F,dataSource:S}=this;return new fa({fields:F,dataSource:S})}};f.__decorate([l.enumeration({dataLayer:"data-layer"})],b.DataLayerSource.prototype,"type",void 0);f.__decorate([u.property({type:[x],json:{write:!0}})],b.DataLayerSource.prototype,
"fields",void 0);f.__decorate([u.property({types:t,json:{write:!0}})],b.DataLayerSource.prototype,"dataSource",void 0);b.DataLayerSource=fa=f.__decorate([h.subclass("esri.layers.support.source.DataLayerSource")],b.DataLayerSource);b.DataLayerSource.from=v.ensureType(b.DataLayerSource);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(b,f,p,q,u,t,l,n,h,v,y,x){var M;const G=new f.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});f=M=class extends p.JSONSupport{constructor(B){super(B);
this.alias=null;this.defaultValue=void 0;this.domain=this.description=null;this.editable=!0;this.length=void 0;this.name=null;this.nullable=!0;this.valueType=this.type=null;this.visible=!0}readDescription(B,{description:A}){B=null;try{B=A?JSON.parse(A):null}catch(H){}return B?.value??null}readValueType(B,{description:A}){B=null;try{B=A?JSON.parse(A):null}catch(H){}return B?G.fromJSON(B.fieldValueType):null}clone(){return new M({alias:this.alias,defaultValue:this.defaultValue,description:this.description,
domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};b.__decorate([q.property({type:String,json:{write:!0}})],f.prototype,"alias",void 0);b.__decorate([q.property({type:[String,Number],json:{write:{allowNull:!0}}})],f.prototype,"defaultValue",void 0);b.__decorate([q.property()],f.prototype,"description",void 0);b.__decorate([h.reader("description")],f.prototype,"readDescription",
null);b.__decorate([q.property({types:y.types,json:{read:{reader:y.fromJSON},write:!0}})],f.prototype,"domain",void 0);b.__decorate([q.property({type:Boolean,json:{write:!0}})],f.prototype,"editable",void 0);b.__decorate([q.property({type:u.Integer,json:{write:{overridePolicy(B){return{enabled:Number.isFinite(B)}}}}})],f.prototype,"length",void 0);b.__decorate([q.property({type:String,json:{write:!0}})],f.prototype,"name",void 0);b.__decorate([q.property({type:Boolean,json:{write:!0}})],f.prototype,
"nullable",void 0);b.__decorate([n.enumeration(x.kebabDict)],f.prototype,"type",void 0);b.__decorate([q.property()],f.prototype,"valueType",void 0);b.__decorate([h.reader("valueType",["description"])],f.prototype,"readValueType",null);b.__decorate([q.property({type:Boolean,json:{read:!1}})],f.prototype,"visible",void 0);return f=M=b.__decorate([v.subclass("esri.layers.support.Field")],f)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(b,f,p,q,u,t){f={key:"type",base:q,typeMap:{range:t,"coded-value":p,inherited:u}};b.CodedValueDomain=p;b.DomainBase=q;b.InheritedDomain=u;b.RangeDomain=t;b.fromJSON=function(l){if(!l?.type)return null;switch(l.type){case "range":return t.fromJSON(l);case "codedValue":return p.fromJSON(l);case "inherited":return u.fromJSON(l)}return null};b.types=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(b,f,p,q,u,t,l,n,h){var v;q=v=class extends h{constructor(y){super(y);this.codedValues=null;this.type="coded-value"}getName(y){let x=null;if(this.codedValues){const M=String(y);this.codedValues.some(G=>{String(G.code)===M&&(x=G.name);return!!x})}return x}clone(){return new v({codedValues:f.clone(this.codedValues),name:this.name})}};b.__decorate([p.property({type:[n.CodedValue],json:{write:!0}})],q.prototype,"codedValues",void 0);b.__decorate([t.enumeration({codedValue:"coded-value"})],q.prototype,
"type",void 0);return q=v=b.__decorate([l.subclass("esri.layers.support.CodedValueDomain")],q)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,p,q,u,t,l,n){var h;b.CodedValue=h=class extends p.JSONSupport{constructor(v){super(v);this.code=this.name=null}clone(){return new h({name:this.name,
code:this.code})}};f.__decorate([q.property({type:String,json:{write:!0}})],b.CodedValue.prototype,"name",void 0);f.__decorate([q.property({type:[String,Number],json:{write:!0}})],b.CodedValue.prototype,"code",void 0);b.CodedValue=h=f.__decorate([n.subclass("esri.layers.support.CodedValue")],b.CodedValue);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,p,q,u,t,l,n,h){f=new f.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});p=class extends p.JSONSupport{constructor(v){super(v);this.type=this.name=null}};b.__decorate([q.property({type:String,json:{write:!0}})],p.prototype,"name",void 0);b.__decorate([n.enumeration(f)],p.prototype,"type",void 0);return p=b.__decorate([h.subclass("esri.layers.support.Domain")],p)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/tslib.es6 ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(b,f,p,q,u,t,l,n){var h;f=h=class extends n{constructor(v){super(v);this.type="inherited"}clone(){return new h}};b.__decorate([t.enumeration({inherited:"inherited"})],f.prototype,"type",void 0);return f=h=b.__decorate([l.subclass("esri.layers.support.InheritedDomain")],f)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(b,f,p,q,u,t,l,n){var h;p=h=class extends n{constructor(v){super(v);this.minValue=this.maxValue=null;this.type="range"}clone(){return new h({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};b.__decorate([f.property({json:{type:[Number],read:{source:"range",reader(v,y){return y.range?.[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(v,y,x){y[x]=[this.minValue||0,v]}}}})],p.prototype,"maxValue",void 0);b.__decorate([f.property({json:{type:[Number],
read:{source:"range",reader(v,y){return y.range?.[0]}},write:{target:"range",writer(v,y,x){y[x]=[v,this.maxValue||0]}}}})],p.prototype,"minValue",void 0);b.__decorate([t.enumeration({range:"range"})],p.prototype,"type",void 0);return p=h=b.__decorate([l.subclass("esri.layers.support.RangeDomain")],p)})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(b,f){f=new f.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",
esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});b.kebabDict=f;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/RandomLCG ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,p,q,u,t,l,n,h){var v;b.MapLayerSource=v=class extends p.JSONSupport{constructor(y){super(y);this.type=
"map-layer"}clone(){const {mapLayerId:y,gdbVersion:x}=this;return new v({mapLayerId:y,gdbVersion:x})}};f.__decorate([n.enumeration({mapLayer:"map-layer"})],b.MapLayerSource.prototype,"type",void 0);f.__decorate([q.property({type:u.Integer,json:{write:!0}})],b.MapLayerSource.prototype,"mapLayerId",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],b.MapLayerSource.prototype,"gdbVersion",void 0);b.MapLayerSource=v=f.__decorate([h.subclass("esri.layers.support.source.MapLayerSource")],
b.MapLayerSource);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(b,f,p,q,u,t,l,n,h,v,y,x){var M;b.QueryTableDataSource=M=class extends q.JSONSupport{constructor(G){super(G);this.type="query-table"}clone(){const {workspaceId:G,query:B,oidFields:A,spatialReference:H,geometryType:W}=this,Z={workspaceId:G,query:B,oidFields:A,spatialReference:H?.clone()??void 0,geometryType:W};return new M(Z)}};f.__decorate([h.enumeration({queryTable:"query-table"})],b.QueryTableDataSource.prototype,"type",void 0);f.__decorate([u.property({type:String,json:{write:!0}})],b.QueryTableDataSource.prototype,
"workspaceId",void 0);f.__decorate([u.property({type:String,json:{write:!0}})],b.QueryTableDataSource.prototype,"query",void 0);f.__decorate([u.property({type:String,json:{write:!0}})],b.QueryTableDataSource.prototype,"oidFields",void 0);f.__decorate([u.property({type:y,json:{write:!0}})],b.QueryTableDataSource.prototype,"spatialReference",void 0);f.__decorate([h.enumeration(x.featureGeometryTypeKebabDictionary)],b.QueryTableDataSource.prototype,"geometryType",void 0);b.QueryTableDataSource=M=f.__decorate([v.subclass("esri.layers.support.source.QueryTableDataSource")],
b.QueryTableDataSource);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,p,q,u,t,l,n,h){var v;b.RasterDataSource=v=class extends p.JSONSupport{constructor(y){super(y);
this.type="raster"}clone(){const {workspaceId:y,dataSourceName:x}=this;return new v({workspaceId:y,dataSourceName:x})}};f.__decorate([n.enumeration({raster:"raster"})],b.RasterDataSource.prototype,"type",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],b.RasterDataSource.prototype,"dataSourceName",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],b.RasterDataSource.prototype,"workspaceId",void 0);b.RasterDataSource=v=f.__decorate([h.subclass("esri.layers.support.source.RasterDataSource")],
b.RasterDataSource);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,p,q,u,t,l,n,h){var v;b.TableDataSource=v=class extends p.JSONSupport{constructor(y){super(y);
this.type="table"}clone(){const {workspaceId:y,gdbVersion:x,dataSourceName:M}=this;return new v({workspaceId:y,gdbVersion:x,dataSourceName:M})}};f.__decorate([n.enumeration({table:"table"})],b.TableDataSource.prototype,"type",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],b.TableDataSource.prototype,"workspaceId",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],b.TableDataSource.prototype,"gdbVersion",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],
b.TableDataSource.prototype,"dataSourceName",void 0);b.TableDataSource=v=f.__decorate([h.subclass("esri.layers.support.source.TableDataSource")],b.TableDataSource);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FullTextSearch":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,p,q,u,t,l,n){f=class extends f.ClonableMixin(p.JSONSupport){constructor(h){super(h);this.searchType=this.searchTerm=this.operator=this.onFields=null}};b.__decorate([q.property({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.onFields&&0<this.onFields.length}}}}})],f.prototype,"onFields",void 0);b.__decorate([q.property({type:String,json:{write:!0}})],f.prototype,"operator",void 0);b.__decorate([q.property({type:String,json:{write:!0}})],f.prototype,"searchTerm",
void 0);b.__decorate([q.property({type:String,json:{write:!0}})],f.prototype,"searchType",void 0);return f=b.__decorate([n.subclass("esri.rest.support.FullTextSearch")],f)})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),function(b,
f,p,q,u,t,l,n,h,v){var y;f=new p.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});q=y=class extends q.JSONSupport{constructor(x){super(x);this.extent=null;this.mode="view";this.originPosition="upper-left";this.tolerance=1}clone(){return new y(u.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};b.__decorate([t.property({type:v,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],q.prototype,"extent",void 0);b.__decorate([t.property({type:["view",
"edit"],json:{write:!0}})],q.prototype,"mode",void 0);b.__decorate([t.property({type:String,json:{read:f.read,write:f.write}})],q.prototype,"originPosition",void 0);b.__decorate([t.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],q.prototype,"tolerance",void 0);return q=y=b.__decorate([h.subclass("esri.rest.support.QuantizationParameters")],q)})},"esri/rest/support/spatialRelationships":function(){define(["exports","../../core/jsonMap"],function(b,f){f=
new f.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});b.spatialRelKebabDict=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(b,f,p,q,u,t,l,n,h){var v;f=new f.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});p=v=class extends p.JSONSupport{constructor(y){super(y);this.maxVertexCount=this.maxRecordCount=this.maxPointCount=void 0;this.statisticParameters=
this.statisticType=this.outStatisticFieldName=this.onStatisticField=null}writeStatisticParameters(y,x){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)x.statisticParameters=q.clone(y)}clone(){return new v({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:q.clone(this.statisticParameters)})}};
b.__decorate([u.property({type:Number,json:{write:!0}})],p.prototype,"maxPointCount",void 0);b.__decorate([u.property({type:Number,json:{write:!0}})],p.prototype,"maxRecordCount",void 0);b.__decorate([u.property({type:Number,json:{write:!0}})],p.prototype,"maxVertexCount",void 0);b.__decorate([u.property({type:String,json:{write:!0}})],p.prototype,"onStatisticField",void 0);b.__decorate([u.property({type:String,json:{write:!0}})],p.prototype,"outStatisticFieldName",void 0);b.__decorate([u.property({type:String,
json:{read:{source:"statisticType",reader:f.read},write:{target:"statisticType",writer:f.write}}})],p.prototype,"statisticType",void 0);b.__decorate([u.property({type:Object})],p.prototype,"statisticParameters",void 0);b.__decorate([h.writer("statisticParameters")],p.prototype,"writeStatisticParameters",null);return p=v=b.__decorate([n.subclass("esri.rest.support.StatisticDefinition")],p)})},"esri/views/3d/layers/i3s/I3SBinaryReader":function(){define("exports ../../../../core/Error ../../../../core/lang ../../../../core/Logger ./LEPCC ../../webgl-engine/lib/VertexAttribute".split(" "),
function(b,f,p,q,u,t){function l(F,S){const aa={byteOffset:0,byteCount:0,fields:Object.create(null)};let ia=0;for(let da=0;da<S.length;da++){const J=S[da],N=J.valueType||J.type;aa.fields[J.property]=(0,U[N])(F,ia);ia+=V[N].BYTES_PER_ELEMENT}aa.byteCount=ia;return aa}function n(F,S,aa){return h(F,S,aa).map(ia=>{ia=ia?Date.parse(ia):null;return null==ia||Number.isNaN(ia)?null:ia})}function h(F,S,aa){const ia=[];let da,J=0,N;for(N=0;N<F;N+=1){da=S[N];if(0<da){var R=ia,ca=R.push,oa=aa,la=J,k=da-1;let L=
"",ba=0;for(;ba<k;){var m=oa[la+ba];if(128>m)L+=String.fromCharCode(m),ba++;else if(192<=m&&224>m){if(ba+1>=k)throw new f("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");L+=String.fromCharCode((m&31)<<6|oa[la+ba+1]&63);ba+=2}else if(224<=m&&240>m){if(ba+2>=k)throw new f("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");L+=String.fromCharCode((m&15)<<12|(oa[la+ba+1]&63)<<6|oa[la+ba+2]&63);ba+=3}else if(240<=m&&248>m){if(ba+3>=k)throw new f("utf8-decode-error",
"UTF-8 Decode failed. Multi byte character was truncated.");m=(m&7)<<18|(oa[la+ba+1]&63)<<12|(oa[la+ba+2]&63)<<6|oa[la+ba+3]&63;L=65536<=m?L+String.fromCharCode((m-65536>>10)+55296,(m&1023)+56320):L+String.fromCharCode(m);ba+=4}else throw new f("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");}ca.call(R,L);if(0!==aa[J+da-1])throw new f("string-array-error","Invalid string array: missing null termination.");}else ia.push(null);J+=da}return ia}function v(F,S){return new V[S.valueType](F,
S.byteOffset,S.count*S.valuesPerElement)}function y(F,S){return new Uint8Array(F,S.byteOffset,S.byteCount)}function x(F,S,aa){F=null!=S.header?l(F,S.header):{byteOffset:0,byteCount:0,fields:{count:aa}};aa={header:F,byteOffset:F.byteCount,byteCount:0,entries:Object.create(null)};let ia=F.byteCount;for(let da=0;da<S.ordering.length;da++){const J=S.ordering[da],N=p.clone(S[J]);N.count=F.fields.count??0;if("String"===N.valueType){N.byteOffset=ia;N.byteCount=F.fields[J+"ByteCount"];if("UTF-8"!==N.encoding)throw new f("unsupported-encoding",
"Unsupported String encoding.",{encoding:N.encoding});if(N.timeEncoding&&"ECMA_ISO8601"!==N.timeEncoding)throw new f("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:N.timeEncoding});}else if(H(N.valueType)){const R=W(N.valueType);ia+=0!==ia%R?R-ia%R:0;N.byteOffset=ia;N.byteCount=R*N.valuesPerElement*N.count}else throw new f("unsupported-value-type","Unsupported binary valueType",{valueType:N.valueType});ia+=N.byteCount??0;aa.entries[J]=N}aa.byteCount=ia-aa.byteOffset;return aa}
function M(F,S,aa){S!==F&&Z().error(`Invalid ${aa} buffer size\n expected: ${F}, actual: ${S})`);if(S<F)throw new f("buffer-too-small","Binary buffer is too small",{expectedSize:F,actualSize:S});}function G(F){return{isDraco:!1,isLegacy:!1,color:null!=F.color,normal:null!=F.normal,uv0:null!=F.uv0,uvRegion:null!=F.uvRegion,featureIndex:null!=F.faceRange&&null!=F.featureId}}function B(F){const S={isDraco:!1,isLegacy:!0,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const aa of F.ordering)if(F.vertexAttributes[aa])switch(aa){case "normal":S.normal=
!0;break;case "color":S.color=!0;break;case "uv0":S.uv0=!0;break;case "region":S.uvRegion=!0}F.featureAttributes&&F.featureAttributeOrder&&(S.featureIndex=!0);return S}function A(F){const S={isDraco:!0,isLegacy:!1,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const aa of F)switch(aa){case "normal":S.normal=!0;break;case "uv0":S.uv0=!0;break;case "color":S.color=!0;break;case "uv-region":S.uvRegion=!0;break;case "feature-index":S.featureIndex=!0}return S}function H(F){return V.hasOwnProperty(F)}
function W(F){return H(F)?V[F].BYTES_PER_ELEMENT:0}const Z=()=>q.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader"),fa={position:t.VertexAttribute.POSITION,normal:t.VertexAttribute.NORMAL,color:t.VertexAttribute.COLOR,uv0:t.VertexAttribute.UV0,region:t.VertexAttribute.UVREGION},V={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},U={Float32:(F,S)=>(new DataView(F,0)).getFloat32(S,!0),Float64:(F,S)=>
(new DataView(F,0)).getFloat64(S,!0),UInt8:(F,S)=>(new DataView(F,0)).getUint8(S),Int8:(F,S)=>(new DataView(F,0)).getInt8(S),UInt16:(F,S)=>(new DataView(F,0)).getUint16(S,!0),Int16:(F,S)=>(new DataView(F,0)).getInt16(S,!0),UInt32:(F,S)=>(new DataView(F,0)).getUint32(S,!0),Int32:(F,S)=>(new DataView(F,0)).getInt32(S,!0)};b.createAttributeDataIndex=x;b.createGeometryDescriptor=function(F,S){return F&&F.compressedAttributes&&"draco"===F.compressedAttributes.encoding?A(F.compressedAttributes.attributes):
F?G(F):B(S)};b.createGeometryDescriptorForDraco=A;b.createGeometryDescriptorFromDefinition=G;b.createGeometryDescriptorFromSchema=B;b.createGeometryIndexFromSchema=function(F,S){var aa=l(F,S&&S.header);let ia=aa.byteCount;const da={isDraco:!1,header:aa,byteOffset:aa.byteCount,byteCount:0,vertexAttributes:{}};aa=aa.fields;var J=null!=aa.vertexCount?aa.vertexCount:aa.count;for(var N of S.ordering){if(!S.vertexAttributes[N])continue;const ca={...S.vertexAttributes[N],byteOffset:ia,count:J};da.vertexAttributes[fa[N]||
"_"+N]=ca;ia+=W(ca.valueType)*ca.valuesPerElement*J}N=aa.faceCount;if(S.faces&&N){da.faces={};for(var R of S.ordering)S.faces[R]&&(J={...S.faces[R],byteOffset:ia,count:N},da.faces[R]=J,ia+=W(J.valueType)*J.valuesPerElement*N)}R=aa.featureCount;if(S.featureAttributes&&S.featureAttributeOrder&&R){da.featureAttributes={};for(const ca of S.featureAttributeOrder)S.featureAttributes[ca]&&(aa={...S.featureAttributes[ca],byteOffset:ia,count:R},da.featureAttributes[ca]=aa,N="UInt64"===aa.valueType?8:W(aa.valueType),
ia+=N*aa.valuesPerElement*R)}M(ia,F.byteLength,"geometry");da.byteCount=ia-da.byteOffset;return da};b.createRawView=y;b.createTypedView=v;b.getBytesPerValue=W;b.isValueType=H;b.readBinaryAttribute=function(F,S,aa){if("lepcc-rgb"===F.encoding)return u.decodeRGB(S);if("lepcc-intensity"===F.encoding)return u.decodeIntensity(S);if(null!=F.encoding&&""!==F.encoding)throw new f("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");F["attributeByteCounts "]&&!F.attributeByteCounts&&
(Z().warn("Warning: Trailing space in 'attributeByteCounts '."),F.attributeByteCounts=F["attributeByteCounts "]);"ObjectIds"===F.ordering[0]&&F.hasOwnProperty("objectIds")&&(Z().warn("Warning: Case error in objectIds"),F.ordering[0]="objectIds");aa=x(S,F,aa);M(aa.byteOffset+aa.byteCount,S.byteLength,"attribute");if(F=aa.entries.attributeValues||aa.entries.objectIds){if("String"===F.valueType){aa=aa.entries.attributeByteCounts;const ia=v(S,aa);S=y(S,F);return F.timeEncoding?n(aa.count,ia,S):h(aa.count,
ia,S)}return v(S,F)}throw new f("bad-attribute-storage-info","Bad attributeStorageInfo specification.");};b.readDateStringArray=n;b.readHeader=l;b.readStringArray=h;b.valueType2ArrayBufferReader=U;b.valueType2TypedArrayClassMap=V;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/i3s/LEPCC":function(){define(["exports","../../../../core/Error"],function(b,f){function p(l,n,h){return{identifier:String.fromCharCode.apply(null,new Uint8Array(l,h+t.identifierOffset,
t.identifierLength)),version:n.getUint16(h+t.versionOffset,!0),checksum:n.getUint32(h+t.checksumOffset,!0)}}function q(l,n,h){const v=[];n=u(l,n,v);const y=[];for(let x=0;x<v.length;x++){y.length=0;n=u(l,n,y);for(let M=0;M<y.length;M++)h.push(y[M]+v[x])}return n}function u(l,n,h){var v=new DataView(l,n),y=v.getUint8(0);const x=y&31;var M=!!(y&32),G=(y&192)>>6;y=0;if(0===G)y=v.getUint32(1,!0),n+=5;else if(1===G)y=v.getUint16(1,!0),n+=3;else if(2===G)y=v.getUint8(1),n+=2;else throw new f("lepcc-decode-error",
"Bad count type");if(M)throw new f("lepcc-decode-error","LUT not implemented");l=new Uint8Array(l,n,Math.ceil(y*x/8));G=M=v=0;const B=-1>>>32-x;for(let A=0;A<y;A++){for(;M<x;)v|=l[G]<<M,M+=8,G+=1;h[A]=v&B;v>>>=x;M-=x;32<M+x&&(v|=l[G-1]>>8-M)}return n+G}const t={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};b.decodeIntensity=function(l){const n=new DataView(l,0);var h=0;const {identifier:v,version:y}=p(l,n,h);h+=t.byteCount;if("Intensity "!==v)throw new f("lepcc-decode-error",
"Bad identifier");if(1<y)throw new f("lepcc-decode-error","Unknown version");var x=h;var M=n.getUint32(x+0,!0);var G=n.getUint32(x+4,!0);var B=n.getUint32(x+8,!0);var A=n.getUint16(x+12,!0);var H=n.getUint8(x+14);n.getUint8(x+15);h+=16;if(G*2**32+M!==l.byteLength)throw new f("lepcc-decode-error","Bad size");M=new Uint16Array(B);if(8===H){if(B+h!==l.byteLength)throw new f("lepcc-decode-error","Bad size");l=new Uint8Array(l,h,B);for(h=0;h<B;h++)M[h]=l[h]*A}else if(16===H){if(2*B+h!==l.byteLength)throw new f("lepcc-decode-error",
"Bad size");l=new Uint16Array(l,h,B);for(h=0;h<B;h++)M[h]=l[h]*A}else{H=[];if(u(l,h,H)!==l.byteLength)throw new f("lepcc-decode-error","Bad size");for(l=0;l<B;l++)M[l]=H[l]*A}return M};b.decodeRGB=function(l){var n=new DataView(l,0),h=0;const {identifier:v,version:y}=p(l,n,h);h+=t.byteCount;if("ClusterRGB"!==v)throw new f("lepcc-decode-error","Bad identifier");if(1<y)throw new f("lepcc-decode-error","Unknown version");var x=h;var M=n.getUint32(x+0,!0);var G=n.getUint32(x+4,!0);var B=n.getUint32(x+
8,!0);var A=n.getUint16(x+12,!0);var H=n.getUint8(x+14);x=n.getUint8(x+15);h+=16;if(G*2**32+M!==l.byteLength)throw new f("lepcc-decode-error","Bad size");if((2===H||1===H)&&0===x){if(3*A+B+h!==l.byteLength||256<A)throw new f("lepcc-decode-error","Bad count");n=new Uint8Array(l,h,3*A);h=new Uint8Array(l,h+3*A,B);l=new Uint8Array(3*B);for(A=0;A<B;A++)M=h[A],l[3*A]=n[3*M],l[3*A+1]=n[3*M+1],l[3*A+2]=n[3*M+2];return l}if(0===H&&0===x){if(3*B+h!==l.byteLength||0!==A)throw new f("lepcc-decode-error","Bad count");
return(new Uint8Array(l,h)).slice()}if(2>=H&&1===x){if(h+3!==l.byteLength||1!==A)throw new f("lepcc-decode-error","Bad count");l=n.getUint8(h);A=n.getUint8(h+1);h=n.getUint8(h+2);n=new Uint8Array(3*B);for(M=0;M<B;M++)n[3*M]=l,n[3*M+1]=A,n[3*M+2]=h;return n}throw new f("lepcc-decode-error","Bad method "+H+","+x);};b.decodeXYZ=function(l){var n=new DataView(l,0),h=0;const {identifier:v,version:y}=p(l,n,h);h+=t.byteCount;if("LEPCC     "!==v)throw new f("lepcc-decode-error","Bad identifier");if(1<y)throw new f("lepcc-decode-error",
"Unknown version");var x=h;var M=n.getUint32(x+0,!0);var G=n.getUint32(x+4,!0);var B=n.getFloat64(x+8,!0);var A=n.getFloat64(x+16,!0);var H=n.getFloat64(x+24,!0);var W=n.getFloat64(x+32,!0);var Z=n.getFloat64(x+40,!0);var fa=n.getFloat64(x+48,!0);var V=n.getFloat64(x+56,!0);var U=n.getFloat64(x+64,!0);var F=n.getFloat64(x+72,!0);var S=n.getUint32(x+80,!0);n.getUint32(x+84,!0);h+=88;if(G*2**32+M!==l.byteLength)throw new f("lepcc-decode-error","Bad size");M=new Float64Array(3*S);G=[];S=[];n=[];x=[];
h=q(l,h,G);h=q(l,h,S);h=q(l,h,n);h=q(l,h,x);if(h!==l.byteLength)throw new f("lepcc-decode-error","Bad length");h=l=0;for(let aa=0;aa<G.length;aa++){h+=G[aa];let ia=0;for(let da=0;da<S[aa];da++){ia+=n[l];const J=x[l];M[3*l]=Math.min(W,B+2*V*ia);M[3*l+1]=Math.min(Z,A+2*U*h);M[3*l+2]=Math.min(fa,H+2*F*J);l++}}return{errorX:V,errorY:U,errorZ:F,result:M}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],function(b){b.VertexAttribute=
void 0;(function(f){f.POSITION="position";f.NORMAL="normal";f.NORMALCOMPRESSED="normalCompressed";f.UV0="uv0";f.COLOR="color";f.SYMBOLCOLOR="symbolColor";f.SIZE="size";f.TANGENT="tangent";f.OFFSET="offset";f.PERSPECTIVEDIVIDE="perspectiveDivide";f.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance";f.LENGTH="length";f.PREVPOSITION="prevPosition";f.NEXTPOSITION="nextPosition";f.SUBDIVISIONFACTOR="subdivisionFactor";f.COLORFEATUREATTRIBUTE="colorFeatureAttribute";f.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute";
f.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute";f.DISTANCETOSTART="distanceToStart";f.UVMAPSPACE="uvMapSpace";f.BOUNDINGRECT="boundingRect";f.UVREGION="uvRegion";f.PROFILERIGHT="profileRight";f.PROFILEUP="profileUp";f.PROFILEVERTEXANDNORMAL="profileVertexAndNormal";f.FEATUREVALUE="featureValue";f.INSTANCEMODELORIGINHI="instanceModelOriginHi";f.INSTANCEMODELORIGINLO="instanceModelOriginLo";f.INSTANCEMODEL="instanceModel";f.INSTANCEMODELNORMAL="instanceModelNormal";f.INSTANCECOLOR="instanceColor";
f.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute";f.LOCALTRANSFORM="localTransform";f.GLOBALTRANSFORM="globalTransform";f.BOUNDINGSPHERE="boundingSphere";f.MODELORIGIN="modelOrigin";f.MODELSCALEFACTORS="modelScaleFactors";f.FEATUREATTRIBUTE="featureAttribute";f.STATE="state";f.LODLEVEL="lodLevel";f.POSITION0="position0";f.POSITION1="position1";f.NORMAL2COMPRESSED="normal2Compressed";f.COMPONENTINDEX="componentIndex";f.VARIANTOFFSET="variantOffset";f.VARIANTSTROKE="variantStroke";f.VARIANTEXTENSION=
"variantExtension";f.SIDENESS="sideness";f.START="start";f.END="end";f.UP="up";f.EXTRUDE="extrude";f.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor";f.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})(b.VertexAttribute||(b.VertexAttribute={}));b.affectsGeometry=function(f){return f===b.VertexAttribute.POSITION};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/i3s/I3SProjectionUtil":function(){define(["exports","../../../../core/libs/gl-matrix-2/factories/mat4f64",
"../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../geometry/ellipsoidUtils","../../../../geometry/projection/computeTranslationToOriginAndRotation"],function(b,f,p,q,u){function t(l,n,h){const v=p.create(),y=2**(4*Math.ceil(Math.log(l[3])*Math.LOG2E/4)+1);if(h.isGeographic){var x=y/q.getReferenceEllipsoid(h).radius*180/Math.PI;h=Math.max(-90,Math.min(90,Math.round(l[1]/x)*x));x/=Math.cos((Math.abs(h)-x/2)/180*Math.PI);v[0]=Math.round(l[0]/x)*x;v[1]=h}else h=Math.round(l[1]/y),v[0]=
Math.round(l[0]/y)*y,v[1]=h*y;v[2]=Math.round((l[2]+n)/y)*y;return v}b.computeGlobalTransformation=function(l,n,h,v,y){l="east-north-up"===h?p.clone(l):t(l,n,v);n=f.create();u.computeTranslationToOriginAndRotation(v,l,n,y);return n};b.getLocalOrigin=t;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/computeTranslationToOriginAndRotation":function(){define("exports ../../core/mathUtils ../../core/libs/gl-matrix-2/math/mat4 ../../core/libs/gl-matrix-2/factories/vec3f64 ./localRotationUtils ./projectors ../support/spatialReferenceUtils".split(" "),
function(b,f,p,q,u,t,l){function n(x){return x===t.ProjectionID.SPHERICAL_ECEF||x===t.ProjectionID.SPHERICAL_MARS_PCPF||x===t.ProjectionID.SPHERICAL_MOON_PCPF}const h=f.deg2rad(1),v=q.create(),y=q.create();b.computeTranslationToOriginAndRotation=function(x,M,G,B){if(null==x||null==B)return!1;var A=t.classifySpatialReference(x,t.sourceClassificationCache),H=t.classifySpatialReference(B,t.destClassificationCache);if(A===H&&!n(H)&&(A!==t.ProjectionID.UNKNOWN||l.equals(x,B)))return p.fromTranslation(G,
M),!0;if(n(H)){A=t.projectionTable[A][t.ProjectionID.LON_LAT];H=t.projectionTable[t.ProjectionID.LON_LAT][H];if(null==A||null==H)return!1;A(M,0,v,0);H(v,0,y,0);u.computeENUToSphericalPCPFLocalRotation(h*v[0],h*v[1],G);G[12]=y[0];G[13]=y[1];G[14]=y[2];return!0}if(!(H!==t.ProjectionID.WEB_MERCATOR&&H!==t.ProjectionID.PLATE_CARREE&&H!==t.ProjectionID.WGS84&&H!==t.ProjectionID.CGCS2000||A!==t.ProjectionID.WGS84&&A!==t.ProjectionID.SPHERICAL_ECEF&&A!==t.ProjectionID.WEB_MERCATOR&&A!==t.ProjectionID.CGCS2000)){x=
t.projectionTable[A][t.ProjectionID.LON_LAT];H=t.projectionTable[t.ProjectionID.LON_LAT][H];if(null==x||null==H)return!1;x(M,0,v,0);H(v,0,y,0);A===t.ProjectionID.SPHERICAL_ECEF?u.computeSphericalPCPFToENULocalRotation(h*v[0],h*v[1],G):p.identity(G);G[12]=y[0];G[13]=y[1];G[14]=y[2];return!0}return!1};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/localRotationUtils":function(){define(["exports","../../core/libs/gl-matrix-2/math/mat4"],function(b,f){function p(q,
u,t){const l=Math.sin(q);q=Math.cos(q);const n=Math.sin(u);u=Math.cos(u);t[0]=-l;t[4]=-n*q;t[8]=u*q;t[12]=0;t[1]=q;t[5]=-n*l;t[9]=u*l;t[13]=0;t[2]=0;t[6]=u;t[10]=n;t[14]=0;t[3]=0;t[7]=0;t[11]=0;t[15]=1;return t}b.computeENUToSphericalPCPFLocalRotation=p;b.computeSphericalPCPFToENULocalRotation=function(q,u,t){p(q,u,t);f.transpose(t,t);return t};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/support/edgeUtils":function(){define("exports ../../../../Color ../../../../core/has ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/factories/vec4f64 ./layerUtils ../../webgl-engine/lib/edgeRendering/interfaces ../../webgl-engine/shaders/sources/edgeRenderer/EdgeUtil.glsl".split(" "),
function(b,f,p,q,u,t,l,n){function h(M,G){if(null==M)return null;const B=null!=M.color?u.fromArray(f.toUnitRGBA(M.color)):u.fromValues(0,0,0,0),A=q.pt2px(M.size),H=q.pt2px(M.extensionLength);switch(M.type){case "solid":return v({color:B,size:A,extensionLength:H,...G});case "sketch":return{...x,color:B,size:A,extensionLength:H,...G,type:n.EdgeType.Sketch}}}function v(M){return{...y,...M,type:n.EdgeType.Solid}}const y={color:u.fromValues(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:l.Transparency.OPAQUE,
hasSlicePlane:!1},x={color:u.fromValues(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:l.Transparency.OPAQUE,hasSlicePlane:!1};b.createMaterial=function(M,G){return h(M&&M.enabled&&M.edges||null,G)};b.createMaterialFromEdges=h;b.createSolidEdgeMaterial=v;b.hasEdges=function(M){return M&&M.enabled&&(t.isExtrudeSymbol3DLayer(M)||t.isFillSymbol3DLayer(M))&&null!=M.edges};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],
function(b){function f(q){return q?72*q/96:0}const p=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;b.castRenderScreenPointArray=function(q){return q};b.castRenderScreenPointArray3=function(q){return q};b.castScreenPointArray=function(q){return q};b.createRenderScreenPoint=function(q=0,u=0){return{x:q,y:u}};b.createRenderScreenPointArray=function(q=0,u=0){return[q,u]};b.createRenderScreenPointArray3=function(q=0,u=0,t=0){return[q,u,t]};b.createScreenPoint=function(q=0,u=0){return{x:q,y:u}};b.createScreenPointArray=
function(q=0,u=0){return[q,u]};b.pt2px=function(q){return q?q/72*96:0};b.px2pt=f;b.screenPointArrayToObject=function(q,u){return u?(u.x=q[0],u.y=q[1],u):{x:q[0],y:q[1]}};b.screenPointObjectToArray=function(q,u){return u?(u[0]=q.x,u[1]=q.y,2<u.length&&(u[2]=0),u):[q.x,q.y]};b.toPt=function(q){if("string"===typeof q){var u=q.match(p);if(u){var t=Number(u[1]);u=u[3]&&u[3].toLowerCase();q="-"===q.charAt(0);t="px"===u?f(t):t;return q?-t:t}console.warn("screenUtils.toPt: input not recognized!");return null}return q};
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/support/layerUtils":function(){define(["exports"],function(b){b.isExtrudeSymbol3DLayer=function(f){return"extrude"===f.type};b.isFillSymbol3DLayer=function(f){return"fill"===f.type};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/interfaces":function(){define(["exports"],function(b){b.Transparency=void 0;var f=b.Transparency||(b.Transparency={});f[f.INVISIBLE=
0]="INVISIBLE";f[f.TRANSPARENT=1]="TRANSPARENT";f[f.OPAQUE=2]="OPAQUE";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/sources/edgeRenderer/EdgeUtil.glsl":function(){define("exports ../../../collections/Component/Material/shader/ComponentData.glsl ../../../core/shaderLibrary/attributes/NormalAttribute.glsl ../../../core/shaderLibrary/util/DoublePrecision.glsl ../../../core/shaderLibrary/util/RgbaFloatEncoding.glsl ../../../core/shaderModules/Float3DrawUniform ../../../core/shaderModules/Float3PassUniform ../../../core/shaderModules/FloatPassUniform ../../../core/shaderModules/interfaces ../../../core/shaderModules/Matrix3DrawUniform ../../../core/shaderModules/Matrix3PassUniform ../../../core/shaderModules/Matrix4PassUniform ../../../core/shaderModules/Texture2DDrawUniform ../../../lib/VertexAttribute".split(" "),
function(b,f,p,q,u,t,l,n,h,v,y,x,M,G){b.EdgeType=void 0;(function(B){B[B.Solid=0]="Solid";B[B.Sketch=1]="Sketch";B[B.Mixed=2]="Mixed";B[B.COUNT=3]="COUNT"})(b.EdgeType||(b.EdgeType={}));b.EdgeSilhouette=void 0;(function(B){B[B.REGULAR=0]="REGULAR";B[B.SILHOUETTE=1]="SILHOUETTE"})(b.EdgeSilhouette||(b.EdgeSilhouette={}));b.EdgeUtil=function(B,A){const H=B.vertex;H.include(u.RgbaFloatEncoding);B.include(p.NormalAttribute,A);H.uniforms.add(new n.FloatPassUniform("distanceFalloffFactor",W=>W.distanceFalloffFactor));
H.code.add(h.glsl`float distanceBasedPerspectiveFactor(float distance) {
return clamp(sqrt(distanceFalloffFactor / distance), 0.0, 1.0);
}`);H.uniforms.add(new M.Texture2DDrawUniform("componentDataTex",W=>W.componentDataTexture));B.attributes.add(G.VertexAttribute.COMPONENTINDEX,"float");H.constants.add("componentColorFieldOffset","float",0);H.constants.add("componentOtherFieldOffset","float",1);H.constants.add("componentVerticalOffsetFieldOffset","float",2);H.constants.add("componentFieldCount","float",3);H.constants.add("lineWidthFractionFactor","float",8);H.constants.add("extensionLengthOffset","float",128);H.constants.add("verticalOffsetScale",
"float",2*f.maxElevationOffset);H.code.add(h.glsl`
    vec2 _componentTextureCoords(float componentIndex, float fieldOffset) {
      float fieldIndex = componentFieldCount * componentIndex + fieldOffset;
      float texSize = float(textureSize(componentDataTex, 0).x);
      float colIndex = mod(fieldIndex, texSize);
      float rowIndex = floor(fieldIndex / texSize);

      return vec2(colIndex, rowIndex) + 0.5;
    }

    struct ComponentData {
      vec4 color;
      vec3 normal;
      vec3 normal2;
      float lineWidth;
      float extensionLength;
      float type;
      float verticalOffset;
    };

    ComponentData readComponentData() {
      vec2 colorIndex = _componentTextureCoords(componentIndex, componentColorFieldOffset);
      vec2 otherIndex = _componentTextureCoords(componentIndex, componentOtherFieldOffset);
      vec2 verticalOffsetIndex = _componentTextureCoords(componentIndex, componentVerticalOffsetFieldOffset);
      vec3 normal = normalModel();
      vec3 normal2 = ${A.silhouette?h.glsl`decompressNormal(normal2Compressed)`:h.glsl`normal`};

      vec4 colorValue = texelFetch(componentDataTex, ivec2(colorIndex), 0);
      vec4 otherValue = texelFetch(componentDataTex, ivec2(otherIndex), 0);
      float verticalOffset = (rgba2float(texelFetch(componentDataTex, ivec2(verticalOffsetIndex), 0)) - 0.5) * verticalOffsetScale;

      return ComponentData(
        vec4(colorValue.rgb, colorValue.a * otherValue.w), // otherValue.w stores separate opacity
        normal, normal2,
        otherValue.x * (255.0 / lineWidthFractionFactor),
        otherValue.y * 255.0 - extensionLengthOffset,
        -(otherValue.z * 255.0) + 0.5, // SOLID (=0/255) needs to be > 0.0, SKETCHY (=1/255) needs to be <= 0;
        verticalOffset
      );
    }
  `);A.legacy?H.code.add(h.glsl`vec3 _modelToWorldNormal(vec3 normal) {
return (model * vec4(normal, 0.0)).xyz;
}
vec3 _modelToViewNormal(vec3 normal) {
return (localView * model * vec4(normal, 0.0)).xyz;
}`):(H.uniforms.add(new v.Matrix3DrawUniform("transformNormalGlobalFromModel",W=>W.transformNormalGlobalFromModel)),H.code.add(h.glsl`vec3 _modelToWorldNormal(vec3 normal) {
return transformNormalGlobalFromModel * normal;
}`));A.silhouette?(B.attributes.add(G.VertexAttribute.NORMAL2COMPRESSED,"vec2"),H.code.add(h.glsl`vec3 worldNormal(ComponentData data) {
return _modelToWorldNormal(normalize(data.normal + data.normal2));
}`)):H.code.add(h.glsl`vec3 worldNormal(ComponentData data) {
return _modelToWorldNormal(data.normal);
}`);A.legacy?H.code.add(h.glsl`void worldAndViewFromModelPosition(vec3 modelPos, float verticalOffset, out vec3 worldPos, out vec3 viewPos) {
worldPos = (model * vec4(modelPos, 1.0)).xyz;
viewPos = (localView * vec4(worldPos, 1.0)).xyz;
}`):(H.include(q.DoublePrecision,A),H.uniforms.add(new y.Matrix3PassUniform("transformViewFromCameraRelativeRS",W=>W.transformViewFromCameraRelativeRS),new v.Matrix3DrawUniform("transformWorldFromModelRS",W=>W.transformWorldFromModelRS),new t.Float3DrawUniform("transformWorldFromModelTL",W=>W.transformWorldFromModelTL),new t.Float3DrawUniform("transformWorldFromModelTH",W=>W.transformWorldFromModelTH),new l.Float3PassUniform("transformWorldFromViewTL",W=>W.transformWorldFromViewTL),new l.Float3PassUniform("transformWorldFromViewTH",
W=>W.transformWorldFromViewTH)),H.code.add(h.glsl`
      void worldAndViewFromModelPosition(vec3 modelPos, float verticalOffset, out vec3 worldPos, out vec3 viewPos) {
        vec3 rotatedModelPosition = transformWorldFromModelRS * modelPos;

        vec3 transformCameraRelativeFromModel = dpAdd(
          transformWorldFromModelTL,
          transformWorldFromModelTH,
          -transformWorldFromViewTL,
          -transformWorldFromViewTH
        );

        worldPos = transformCameraRelativeFromModel + rotatedModelPosition;

        if (verticalOffset != 0.0) {
          vec3 vUp = ${A.spherical?h.glsl`normalize(transformWorldFromModelTL + rotatedModelPosition);`:h.glsl`vec3(0.0, 0.0, 1.0);`}
          worldPos += verticalOffset * vUp;
        }

        viewPos = transformViewFromCameraRelativeRS * worldPos;
      }
    `));H.uniforms.add(new x.Matrix4PassUniform("transformProjFromView",(W,Z)=>Z.camera.projectionMatrix));H.code.add(h.glsl`vec4 projFromViewPosition(vec3 position) {
return transformProjFromView * vec4(position, 1.0);
}`);H.code.add(h.glsl`float calculateExtensionLength(float extensionLength, float lineLength) {
return extensionLength / (log2(max(1.0, 256.0 / lineLength)) * 0.2 + 1.0);
}`)};b.usesSketchLogic=function(B){return B===b.EdgeType.Sketch||B===b.EdgeType.Mixed};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/collections/Component/Material/shader/ComponentData.glsl":function(){define("exports ../../../../../../../core/compilerUtils ../../../../../../../core/floatRGBA ../../../../../../../core/has ./DecodeSymbolColor.glsl ../../../../core/shaderLibrary/ShaderOutput ../../../../core/shaderLibrary/util/RgbaFloatEncoding.glsl ../../../../core/shaderModules/Float4DrawUniform ../../../../core/shaderModules/IntegerDrawUniform ../../../../core/shaderModules/interfaces ../../../../core/shaderModules/Texture2DDrawUniform ../../../../lib/VertexAttribute".split(" "),
function(b,f,p,q,u,t,l,n,h,v,y,x){function M(A,H){const {vertex:W,fragment:Z}=A;W.include(l.RgbaFloatEncoding);W.uniforms.add(new y.Texture2DDrawUniform("componentColorTex",fa=>fa.componentParameters.texture.texture));A.attributes.add(x.VertexAttribute.COMPONENTINDEX,"float");A.varyings.add("vExternalColorMixMode","mediump float");A.varyings.add("vExternalColor","vec4");(H=H.output===t.ShaderOutput.ObjectAndLayerIdColor)&&A.varyings.add("vObjectAndLayerIdColor","vec4");A.include(u.DecodeSymbolColor);
W.constants.add("elevationScale","float",2*B);W.constants.add("stride","float",q("enable-feature:objectAndLayerId-rendering")?3:2);W.code.add(v.glsl`vec2 getComponentTextureCoordinates(float componentIndex, float typeOffset) {
float index = componentIndex * stride + typeOffset;
float texSize = float(textureSize(componentColorTex, 0).x);
float coordX = mod(index, texSize);
float coordY = floor(index / texSize);
return vec2(coordX, coordY) + 0.5;
}`);W.code.add(v.glsl`
  vec4 _readComponentColor() {
    vec2 textureCoordinates = getComponentTextureCoordinates(componentIndex, 0.0);

    return texelFetch(componentColorTex, ivec2(textureCoordinates), 0);
   }

   float readElevationOffset() {
    vec2 textureCoordinates = getComponentTextureCoordinates(componentIndex, 1.0);

    vec4 encodedElevation = texelFetch(componentColorTex, ivec2(textureCoordinates), 0);
    return (rgba2float(encodedElevation) - 0.5) * elevationScale;
  }

  ${H?v.glsl`
          void forwardObjectAndLayerIdColor() {
            vec2 textureCoordinates = getComponentTextureCoordinates(componentIndex, 2.0);

            vObjectAndLayerIdColor = texelFetch(componentColorTex, ivec2(textureCoordinates), 0);
          }`:v.glsl`void forwardObjectAndLayerIdColor() {}`}

  vec4 forwardExternalColor(out bool castShadows) {
    vec4 componentColor = _readComponentColor() * 255.0;

    float shadowFlag = mod(componentColor.b * 255.0, 2.0);
    componentColor.b -= shadowFlag;
    castShadows = shadowFlag >= 1.0;

    int decodedColorMixMode;
    vExternalColor = decodeSymbolColor(componentColor, decodedColorMixMode) * 0.003921568627451; // = 1/255;
    vExternalColorMixMode = float(decodedColorMixMode) + 0.5; // add 0.5 to avoid interpolation artifacts

    return vExternalColor;
  }
`);Z.code.add(v.glsl`
  void readExternalColor(out vec4 externalColor, out int externalColorMixMode) {
    externalColor = vExternalColor;
    externalColorMixMode = int(vExternalColorMixMode);
  }

  void outputObjectAndLayerIdColor() {
     ${H?v.glsl`fragColor = vObjectAndLayerIdColor;`:""}
  }
`)}function G(A,H){const {vertex:W,fragment:Z}=A;W.uniforms.add(new n.Float4DrawUniform("externalColor",fa=>fa.componentParameters.externalColor));Z.uniforms.add(new h.IntegerDrawUniform("externalColorMixMode",fa=>fa.componentParameters.externalColorMixMode));A.varyings.add("vExternalColor","vec4");W.code.add(v.glsl`float readElevationOffset() {
return 0.0;
}
void forwardObjectAndLayerIdColor() {}
vec4 forwardExternalColor(out bool castShadows) {
vExternalColor = externalColor;
castShadows = true;
return externalColor;
}`);Z.code.add(v.glsl`
  void readExternalColor(out vec4 color, out int colorMixMode) {
    color = vExternalColor;
    colorMixMode = externalColorMixMode;
  }

  void outputObjectAndLayerIdColor() {
    ${H.output===t.ShaderOutput.ObjectAndLayerIdColor?v.glsl`fragColor = vec4(0,0,0,0);`:""}
 }
`)}b.ComponentDataType=void 0;(function(A){A[A.Uniform=0]="Uniform";A[A.Varying=1]="Varying";A[A.COUNT=2]="COUNT"})(b.ComponentDataType||(b.ComponentDataType={}));const B=2**32/1E4;b.ComponentData=function(A,H){switch(H.componentData){case b.ComponentDataType.Varying:return M(A,H);case b.ComponentDataType.Uniform:return G(A,H);case b.ComponentDataType.COUNT:break;default:f.neverReached(H.componentData)}};b.encodeElevationOffset=function(A,H){p.packFloatRGBA(A/B*.5+.5,H)};b.maxElevationOffset=B;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/core/compilerUtils":function(){define(["exports","./has"],function(b,f){b.neverReached=function(p){};b.neverReachedSilent=function(p){};b.typeCast=function(p){return()=>p};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/floatRGBA":function(){define(["exports","./mathUtils"],function(b,f){function p(l,n=0){let h=0;for(let v=0;4>v;v++)h+=l[n+v]*u[v];return h}const q=[1,256,65536,16777216],u=[1/256,1/65536,1/16777216,1/4294967296],
t=p(new Uint8ClampedArray([255,255,255,255]));b.packFloatRGBA=function(l,n,h=0){l=f.clamp(l,0,t);for(let x=0;4>x;x++){var v=Math,y=l*q[x];n[h+x]=v.floor.call(v,256*(y-Math.floor(y)))}};b.unpackFloatRGBA=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/collections/Component/Material/shader/DecodeSymbolColor.glsl":function(){define(["exports","../../../../../layers/support/symbolColorUtils","../../../../core/shaderModules/interfaces"],function(b,f,p){b.DecodeSymbolColor=
function(q){q.vertex.code.add(p.glsl`
    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {
      float symbolAlpha = 0.0;

      const float maxTint = 85.0;
      const float maxReplace = 170.0;
      const float scaleAlpha = 3.0;

      if (symbolColor.a > maxReplace) {
        colorMixMode = ${p.glsl.int(f.ColorMixModeEnum.Multiply)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);
      } else if (symbolColor.a > maxTint) {
        colorMixMode = ${p.glsl.int(f.ColorMixModeEnum.Replace)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);
      } else if (symbolColor.a > 0.0) {
        colorMixMode = ${p.glsl.int(f.ColorMixModeEnum.Tint)};
        symbolAlpha = scaleAlpha * symbolColor.a;
      } else {
        colorMixMode = ${p.glsl.int(f.ColorMixModeEnum.Multiply)};
        symbolAlpha = 0.0;
      }

      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);
    }
  `)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/support/symbolColorUtils":function(){define(["exports","../../../../core/mathUtils"],function(b,f){b.ColorMixModeEnum=void 0;(function(p){p[p.Multiply=1]="Multiply";p[p.Ignore=2]="Ignore";p[p.Replace=3]="Replace";p[p.Tint=4]="Tint"})(b.ColorMixModeEnum||(b.ColorMixModeEnum={}));b.encodeSymbolColor=function(p,q,u){if(null==p||q===b.ColorMixModeEnum.Ignore)u[0]=255,u[1]=255,u[2]=255,u[3]=255;else{var t=f.clamp(Math.round(85*
p[3]),0,85);q=0===t||q===b.ColorMixModeEnum.Tint?0:q===b.ColorMixModeEnum.Replace?85:170;u[0]=f.clamp(Math.round(255*p[0]),0,255);u[1]=f.clamp(Math.round(255*p[1]),0,255);u[2]=f.clamp(Math.round(255*p[2]),0,255);u[3]=t+q}};b.parseColorMixMode=function(p){switch(p){case "multiply":return b.ColorMixModeEnum.Multiply;case "ignore":return b.ColorMixModeEnum.Ignore;case "replace":return b.ColorMixModeEnum.Replace;case "tint":return b.ColorMixModeEnum.Tint;default:return b.ColorMixModeEnum.Multiply}};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/interfaces":function(){define(["exports"],function(b){function f(u,...t){let l="";for(let n=0;n<t.length;n++)l+=u[n]+t[n];return l+=u[u.length-1]}class p{}const q=p;(function(u){u.int=function(t){return Math.round(t).toString()};u.float=function(t){return t.toPrecision(8)}})(f||={});b.NoParameters=q;b.glsl=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput":function(){define(["exports"],
function(b){function f(h){return h===b.ShaderOutput.Shadow||h===b.ShaderOutput.ShadowHighlight||h===b.ShaderOutput.ShadowExcludeHighlight||h===b.ShaderOutput.ViewshedShadow}function p(h){return h===b.ShaderOutput.Highlight||h===b.ShaderOutput.ObjectAndLayerIdColor}function q(h){return h===b.ShaderOutput.Color}function u(h){return q(h)||h===b.ShaderOutput.Highlight}function t(h){return q(h)||p(h)}function l(h){return t(h)||n(h)}function n(h){return h===b.ShaderOutput.Depth}b.ShaderOutput=void 0;(function(h){h[h.Color=
0]="Color";h[h.Depth=1]="Depth";h[h.Normal=2]="Normal";h[h.Shadow=3]="Shadow";h[h.ShadowHighlight=4]="ShadowHighlight";h[h.ShadowExcludeHighlight=5]="ShadowExcludeHighlight";h[h.ViewshedShadow=6]="ViewshedShadow";h[h.Highlight=7]="Highlight";h[h.ObjectAndLayerIdColor=8]="ObjectAndLayerIdColor";h[h.COUNT=9]="COUNT"})(b.ShaderOutput||(b.ShaderOutput={}));b.is2DGeometryOutput=function(h){return h===b.ShaderOutput.Color||p(h)};b.is3DGeometryOutput=function(h){return l(h)||h===b.ShaderOutput.Normal};b.isColor=
q;b.isColorHighlightOIDOrDepth=l;b.isColorHighlightOrDepth=function(h){return u(h)||n(h)};b.isColorHighlightOrOID=t;b.isColorOrHighlight=u;b.isColorOrOID=function(h){return q(h)||h===b.ShaderOutput.ObjectAndLayerIdColor};b.isDepth=n;b.isDepthLikeOutput=function(h){return f(h)||h===b.ShaderOutput.Depth||h===b.ShaderOutput.Normal||h===b.ShaderOutput.ObjectAndLayerIdColor};b.isOIDorHighlight=p;b.isShadowRelatedOutput=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl":function(){define(["exports",
"../../shaderModules/interfaces"],function(b,f){b.RgbaFloatEncoding=function(p){p.code.add(f.glsl`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float4DrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,f,p){class q extends f.Uniform{constructor(u,t){super(u,"vec4",p.BindType.Draw,(l,n,h)=>l.setUniform4fv(u,t(n,h)))}}b.Float4DrawUniform=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Uniform":function(){define(["exports",
"../shaderTechnique/BindType"],function(b,f){class p{constructor(q,u,t,l,n=null){this.name=q;this.type=u;this.arraySize=n;this.bind={[f.BindType.Pass]:null,[f.BindType.Draw]:null};if(l)switch(t){case f.BindType.Pass:this.bind[f.BindType.Pass]=l;break;case f.BindType.Draw:this.bind[f.BindType.Draw]=l}}equals(q){return this.type===q.type&&this.name===q.name&&this.arraySize===q.arraySize}}b.Uniform=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderTechnique/BindType":function(){define(["exports"],
function(b){b.BindType=void 0;var f=b.BindType||(b.BindType={});f[f.Pass=0]="Pass";f[f.Draw=1]="Draw";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/IntegerDrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,f,p){class q extends f.Uniform{constructor(u,t){super(u,"int",p.BindType.Draw,(l,n,h)=>l.setUniform1i(u,t(n,h)))}}b.IntegerDrawUniform=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,f,p){class q extends f.Uniform{constructor(u,t){super(u,"sampler2D",p.BindType.Draw,(l,n,h)=>l.bindTexture(u,t(n,h)))}}b.Texture2DDrawUniform=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl":function(){define(["exports","../../../../../../core/compilerUtils",
"../../shaderModules/interfaces","../../../lib/VertexAttribute"],function(b,f,p,q){b.NormalType=void 0;(function(u){u[u.Attribute=0]="Attribute";u[u.Compressed=1]="Compressed";u[u.Ground=2]="Ground";u[u.ScreenDerivative=3]="ScreenDerivative";u[u.COUNT=4]="COUNT"})(b.NormalType||(b.NormalType={}));b.NormalAttribute=function(u,t){switch(t.normalType){case b.NormalType.Compressed:u.attributes.add(q.VertexAttribute.NORMALCOMPRESSED,"vec2");u.vertex.code.add(p.glsl`vec3 decompressNormal(vec2 normal) {
float z = 1.0 - abs(normal.x) - abs(normal.y);
return vec3(normal + sign(normal) * min(z, 0.0), z);
}
vec3 normalModel() {
return decompressNormal(normalCompressed);
}`);break;case b.NormalType.Attribute:u.attributes.add(q.VertexAttribute.NORMAL,"vec3");u.vertex.code.add(p.glsl`vec3 normalModel() {
return normal;
}`);break;case b.NormalType.ScreenDerivative:u.fragment.code.add(p.glsl`vec3 screenDerivativeNormal(vec3 positionView) {
return normalize(cross(dFdx(positionView), dFdy(positionView)));
}`);break;default:f.neverReached(t.normalType);case b.NormalType.COUNT:case b.NormalType.Ground:}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/DoublePrecision.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,f){b.DoublePrecision=function({code:p},q){q.doublePrecisionRequiresObfuscation?p.add(f.glsl`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`):p.add(f.glsl`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float3DrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,f,p){class q extends f.Uniform{constructor(u,t){super(u,"vec3",p.BindType.Draw,(l,n,h,v)=>l.setUniform3fv(u,t(n,h,v)))}}b.Float3DrawUniform=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float3PassUniform":function(){define(["exports",
"./Uniform","../shaderTechnique/BindType"],function(b,f,p){class q extends f.Uniform{constructor(u,t){super(u,"vec3",p.BindType.Pass,(l,n,h)=>l.setUniform3fv(u,t(n,h)))}}b.Float3PassUniform=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/FloatPassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,f,p){class q extends f.Uniform{constructor(u,t){super(u,"float",p.BindType.Pass,(l,n,h)=>l.setUniform1f(u,
t(n,h)))}}b.FloatPassUniform=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix3DrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,f,p){class q extends f.Uniform{constructor(u,t){super(u,"mat3",p.BindType.Draw,(l,n,h)=>l.setUniformMatrix3fv(u,t(n,h)))}}b.Matrix3DrawUniform=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix3PassUniform":function(){define(["exports",
"./Uniform","../shaderTechnique/BindType"],function(b,f,p){class q extends f.Uniform{constructor(u,t){super(u,"mat3",p.BindType.Pass,(l,n,h)=>l.setUniformMatrix3fv(u,t(n,h)))}}b.Matrix3PassUniform=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,f,p){class q extends f.Uniform{constructor(u,t){super(u,"mat4",p.BindType.Pass,(l,n,h)=>
l.setUniformMatrix4fv(u,t(n,h)))}}b.Matrix4PassUniform=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/orientedBoundingBox":function(){define("exports ../../../core/libs/gl-matrix-2/math/mat3 ../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../core/libs/gl-matrix-2/math/quat ../../../core/libs/gl-matrix-2/factories/quatf64 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../chunks/vec42 ../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../geometry/ellipsoidUtils ../../../geometry/spatialReferenceEllipsoidUtils ../../../geometry/projection/computeTranslationToOriginAndRotation ../../../geometry/projection/projectBuffer ../../../geometry/projection/projectors ../../../geometry/support/plane ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/vectorStacks ../../ViewingMode ./dito ../webgl-engine/lib/Attribute".split(" "),
function(b,f,p,q,u,t,l,n,h,v,y,x,M,G,B,A,H,W,Z,fa,V){function U(e,w=new ia){fa.computeOBB(e,w);return w}function F(e,w,a,c,d){var g=w.getQuaternion(J);g=f.fromQuat(pa,g);w=w.getHalfSize(na);for(let C=0;8>C;++C){for(var r=0;3>r;++r)ba[r]=w[r]*(0!==(C&1<<r)?-1:1);for(r=0;3>r;++r){let E=a[r];for(let D=0;3>D;++D)E+=ba[D]*g[3*D+r];m[3*C+r]=E}}G.projectBuffer(m,e,0,m,c,0,8);U(L,d)}function S(e,w,a,c,d=x.getSphericalPCPF(a),g=B.getProjector(a,d)){e.getCorners(O);e.getCenter(ba);ba[2]+=c;M.computeTranslationToOriginAndRotation(a,
ba,K,d);w.setCenter(K[12],K[13],K[14]);a=2*Math.sqrt(1+K[0]+K[5]+K[10]);da[0]=(K[6]-K[9])/a;da[1]=(K[8]-K[2])/a;da[2]=(K[1]-K[4])/a;da[3]=.25*a;e=e.getQuaternion(J);w.quaternion=u.multiply(da,da,e);u.conjugate(da,da);l.set(Y,0,0,0);e=w.getCenter(ma);for(const r of O)r[2]+=c,g(r,0,r,0),l.sub(I,r,e),l.transformQuat(I,I,da),l.abs(I,I),l.max(Y,Y,I);w.halfSize=Y}function aa(e,w,a,c,d=x.getSphericalPCPF(a)){const g=y.getReferenceEllipsoid(a),r=1+Math.max(0,c)/(g.radius+e.centerZ);e.getCenter(ba);ba[2]+=
c;G.projectBuffer(ba,a,0,ba,d,0,1);w.center=ba;a=e.getQuaternion(J);w.quaternion=a;u.conjugate(da,a);l.set(I,0,0,1);l.transformQuat(I,I,da);e=e.getHalfSize(na);l.set(I,e[0]*Math.abs(I[0]),e[1]*Math.abs(I[1]),e[2]*Math.abs(I[2]));l.scale(I,I,g.inverseFlattening);l.add(I,e,I);w.halfSize=l.scale(I,I,r)}class ia{constructor(e=n.ZEROS,w=z,a=t.IDENTITY){this._data=[e[0],e[1],e[2],w[0],w[1],w[2],a[0],a[1],a[2],a[3]]}clone(){const e=new ia;e._data=this._data.slice();return e}invalidate(){this._data[3]=-1}get isValid(){return 0<=
this._data[3]}static fromData(e){const w=new ia;w._data=e.slice();return w}static fromJSON(e){return new ia(e.center,e.halfSize,e.quaternion)}copy(e){this._data=e.data.slice()}get center(){return l.set(W.sv3d.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(e){e[0]=this._data[0];e[1]=this._data[1];e[2]=this._data[2];return e}set center(e){this._data[0]=e[0];this._data[1]=e[1];this._data[2]=
e[2]}setCenter(e,w,a){this._data[0]=e;this._data[1]=w;this._data[2]=a}get halfSize(){return l.set(W.sv3d.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(e){e[0]=this._data[3];e[1]=this._data[4];e[2]=this._data[5];return e}set halfSize(e){this._data[3]=e[0];this._data[4]=e[1];this._data[5]=e[2]}get quaternion(){return u.set(W.sq4d.get(),this._data[6],this._data[7],this._data[8],
this._data[9])}getQuaternion(e){e[0]=this._data[6];e[1]=this._data[7];e[2]=this._data[8];e[3]=this._data[9];return e}set quaternion(e){this._data[6]=e[0];this._data[7]=e[1];this._data[8]=e[2];this._data[9]=e[3]}get data(){return this._data}getCorners(e){const w=da,a=this._data;w[0]=a[6];w[1]=a[7];w[2]=a[8];w[3]=a[9];for(let c=0;8>c;++c){const d=e[c];d[0]=(c&1?-1:1)*a[3];d[1]=(c&2?-1:1)*a[4];d[2]=(c&4?-1:1)*a[5];l.transformQuat(d,d,w);d[0]+=a[0];d[1]+=a[1];d[2]+=a[2]}}doesIntersectFrustumConservativeApproximation(e){return 0>=
this.intersectPlane(e[0])&&0>=this.intersectPlane(e[1])&&0>=this.intersectPlane(e[2])&&0>=this.intersectPlane(e[3])&&0>=this.intersectPlane(e[4])&&0>=this.intersectPlane(e[5])}get radius(){const e=this._data[3],w=this._data[4],a=this._data[5];return Math.sqrt(e*e+w*w+a*a)}intersectSphere(e){R[0]=this._data[0]-e[0];R[1]=this._data[1]-e[1];R[2]=this._data[2]-e[2];const w=this.getQuaternion(J);u.conjugate(da,w);l.transformQuat(R,R,da);l.abs(R,R);ca[0]=Math.min(R[0],this._data[3]);ca[1]=Math.min(R[1],
this._data[4]);ca[2]=Math.min(R[2],this._data[5]);return l.sqrDist(ca,R)<e[3]*e[3]}intersectSphereWithMBS(e,w=this.radius){const a=this._data;R[0]=a[0]-e[0];R[1]=a[1]-e[1];R[2]=a[2]-e[2];e=e[3];const c=l.sqrLen(R);w=e+w;if(c>w*w)return!1;da[0]=-a[6];da[1]=-a[7];da[2]=-a[8];da[3]=a[9];l.transformQuat(R,R,da);l.abs(R,R);ca[0]=Math.min(R[0],a[3]);ca[1]=Math.min(R[1],a[4]);ca[2]=Math.min(R[2],a[5]);return l.sqrDist(ca,R)<e*e}intersectPlane(e){const w=e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+
e[3];e=this.projectedRadius(A.getNormal(e));return w>e?1:w<-e?-1:0}intersectRay(e,w,a=0){var c=this._data,d=da;d[0]=-c[6];d[1]=-c[7];d[2]=-c[8];d[3]=c[9];R[0]=e[0]-c[0];R[1]=e[1]-c[1];R[2]=e[2]-c[2];e=l.transformQuat(R,R,da);w=l.transformQuat(ca,w,da);c=-Infinity;d=Infinity;const g=this.getHalfSize(na);for(let C=0;3>C;C++){var r=e[C];const E=w[C],D=g[C]+a;if(1E-6<Math.abs(E)){const Q=(D-r)/E;r=(-D-r)/E;c=Math.max(c,Math.min(Q,r));d=Math.min(d,Math.max(Q,r))}else if(r>D||r<-D)return!1}return c<=d}projectedArea(e,
w,a,c){var d=this.getQuaternion(J);u.conjugate(da,d);R[0]=e[0]-this._data[0];R[1]=e[1]-this._data[1];R[2]=e[2]-this._data[2];l.transformQuat(R,R,da);var g=this.getHalfSize(na),r=R[0]<-g[0]?-1:R[0]>g[0]?1:0,C=R[1]<-g[1]?-1:R[1]>g[1]?1:0;const E=R[2]<-g[2]?-1:R[2]>g[2]?1:0;e=Math.abs(r)+Math.abs(C)+Math.abs(E);if(0===e)return Infinity;e=1===e?4:6;r=6*(r+3*C+9*E+13);f.fromQuat(pa,d);f.scale(pa,pa,g);d=this.getCenter(ha);for(g=0;g<e;g++)C=k[r+g],l.set(R,((C&1)<<1)-1,(C&2)-1,((C&4)>>1)-1),l.transformMat3(R,
R,pa),l.add(oa,d,R),oa[3]=1,h.transformMat4(oa,oa,w),C=1/Math.max(1E-6,oa[3]),la[2*g]=oa[0]*C,la[2*g+1]=oa[1]*C;w=2*e-2;e=la[0]*(la[3]-la[w+1])+la[w]*(la[1]-la[w-1]);for(d=2;d<w;d+=2)e+=la[d]*(la[d+3]-la[d-1]);return Math.abs(e)*a*c*.125}projectedRadius(e){const w=this.getQuaternion(J);u.conjugate(da,w);l.transformQuat(R,e,da);return Math.abs(R[0]*this._data[3])+Math.abs(R[1]*this._data[4])+Math.abs(R[2]*this._data[5])}minimumDistancePlane(e){const w=e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+
e[3];e=this.projectedRadius(A.getNormal(e));return w-e}maximumDistancePlane(e){const w=e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3];e=this.projectedRadius(A.getNormal(e));return w+e}toAaBoundingBox(e){var w=this.getQuaternion(J),a=f.fromQuat(pa,w);w=this._data[3]*Math.abs(a[0])+this._data[4]*Math.abs(a[3])+this._data[5]*Math.abs(a[6]);const c=this._data[3]*Math.abs(a[1])+this._data[4]*Math.abs(a[4])+this._data[5]*Math.abs(a[7]);a=this._data[3]*Math.abs(a[2])+this._data[4]*Math.abs(a[5])+
this._data[5]*Math.abs(a[8]);e[0]=this._data[0]-w;e[1]=this._data[1]-c;e[2]=this._data[2]-a;e[3]=this._data[0]+w;e[4]=this._data[1]+c;e[5]=this._data[2]+a}transform(e,w,a,c=0,d=x.getSphericalPCPF(a),g=x.getSphericalPCPF(w),r=B.getProjector(w,g)){a===d?w.isGeographic?aa(this,e,w,c,g):S(this,e,w,c,g,r):w.isWGS84&&(a.isWebMercator||H.isPlateCarree(a))?(this.getCenter(ha),ha[2]+=c,c=x.getSphericalPCPF(a),G.projectBuffer(ha,w,0,ha,c,0,1),F(c,this,ha,a,e)):w.isWebMercator&&H.isPlateCarree(a)?(this.getCenter(ha),
ha[2]+=c,F(w,this,ha,a,e)):(d=this.getCenter(ha),d[2]+=c,G.projectBuffer(d,w,0,d,a,0,1),e.center=d,this!==e&&(e.quaternion=this.getQuaternion(J),e.halfSize=this.getHalfSize(na)))}}const da=t.create(),J=t.create(),N=t.create(),R=n.create(),ca=n.create(),oa=v.create(),la=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],k=(()=>{const e=new Int8Array(162);let w=0;const a=c=>{for(let d=0;d<c.length;d++)e[w+d]=c[d];w+=6};a([6,2,3,1,5,4]);a([0,2,3,1,5,4]);a([0,2,3,7,5,4]);a([0,1,3,2,6,4]);a([0,1,3,2,0,0]);a([0,1,
5,7,3,2]);a([0,1,3,7,6,4]);a([0,1,3,7,6,2]);a([0,1,5,7,6,2]);a([0,1,5,4,6,2]);a([0,1,5,4,0,0]);a([0,1,3,7,5,4]);a([0,2,6,4,0,0]);a([0,0,0,0,0,0]);a([1,3,7,5,0,0]);a([2,3,7,6,4,0]);a([2,3,7,6,0,0]);a([2,3,1,5,7,6]);a([0,1,5,7,6,2]);a([0,1,5,7,6,4]);a([0,1,3,7,6,4]);a([4,5,7,6,2,0]);a([4,5,7,6,0,0]);a([4,5,1,3,7,6]);a([0,2,3,7,5,4]);a([6,2,3,7,5,4]);a([6,2,3,1,5,4]);return e})(),m=Array(24),L=new V.Vertices(m,3),ba=n.create(),ha=n.create(),ma=n.create(),na=n.create(),pa=p.create(),K=q.create(),O=[[0,
0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],I=n.create(),Y=n.create(),ea=n.create(),z=n.fromValues(-1,-1,-1);b.Obb=ia;b.compute=U;b.computeOffsetObb=function(e,w,a,c,d){var g=e.getQuaternion(J);d.quaternion=g;u.conjugate(da,g);var r=e.getCenter(ha);g=e.getHalfSize(na);if(c===Z.ViewingMode.Global){l.transformQuat(I,r,da);l.abs(Y,I);l.min(ea,Y,g);l.sub(ea,Y,ea);c=l.length(ea);l.add(ea,Y,g);const C=l.length(ea);c<a?(d.center=r,l.set(I,a,a,a),d.halfSize=l.add(I,g,I)):(w=0<C?1+w/C:1,
r=0<c?1+a/c:1,a=(r+w)/2,w=(r-w)/2,l.scale(ea,Y,w),d.halfSize=l.scaleAndAdd(ea,ea,g,a),l.scale(ea,Y,a),l.scaleAndAdd(ea,ea,g,w),l.sign(I,I),l.multiply(I,ea,I),e=e.getQuaternion(N),d.center=l.transformQuat(I,I,e))}else d.center=l.scaleAndAdd(I,r,n.UNIT_Z,(a+w)/2),e=l.transformQuat(I,n.UNIT_Z,da),l.abs(e,e),d.halfSize=l.scaleAndAdd(Y,g,e,(a-w)/2);return d};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["exports","./common"],function(b,
f){function p(k,m){k[0]=m[0];k[1]=m[1];k[2]=m[2];k[3]=m[4];k[4]=m[5];k[5]=m[6];k[6]=m[8];k[7]=m[9];k[8]=m[10];return k}function q(k,m){k[0]=m[0];k[1]=m[1];k[2]=m[2];k[3]=m[3];k[4]=m[4];k[5]=m[5];k[6]=m[6];k[7]=m[7];k[8]=m[8];return k}function u(k,m,L,ba,ha,ma,na,pa,K,O){k[0]=m;k[1]=L;k[2]=ba;k[3]=ha;k[4]=ma;k[5]=na;k[6]=pa;k[7]=K;k[8]=O;return k}function t(k){k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=1;k[5]=0;k[6]=0;k[7]=0;k[8]=1;return k}function l(k,m){if(k===m){const L=m[1],ba=m[2],ha=m[5];k[1]=m[3];k[2]=
m[6];k[3]=L;k[5]=m[7];k[6]=ba;k[7]=ha}else k[0]=m[0],k[1]=m[3],k[2]=m[6],k[3]=m[1],k[4]=m[4],k[5]=m[7],k[6]=m[2],k[7]=m[5],k[8]=m[8];return k}function n(k,m){const L=m[0],ba=m[1],ha=m[2],ma=m[3],na=m[4],pa=m[5],K=m[6],O=m[7];m=m[8];const I=m*na-pa*O,Y=-m*ma+pa*K,ea=O*ma-na*K;let z=L*I+ba*Y+ha*ea;if(!z)return null;z=1/z;k[0]=I*z;k[1]=(-m*ba+ha*O)*z;k[2]=(pa*ba-ha*na)*z;k[3]=Y*z;k[4]=(m*L-ha*K)*z;k[5]=(-pa*L+ha*ma)*z;k[6]=ea*z;k[7]=(-O*L+ba*K)*z;k[8]=(na*L-ba*ma)*z;return k}function h(k,m){const L=
m[0],ba=m[1],ha=m[2],ma=m[3],na=m[4],pa=m[5],K=m[6],O=m[7];m=m[8];k[0]=na*m-pa*O;k[1]=ha*O-ba*m;k[2]=ba*pa-ha*na;k[3]=pa*K-ma*m;k[4]=L*m-ha*K;k[5]=ha*ma-L*pa;k[6]=ma*O-na*K;k[7]=ba*K-L*O;k[8]=L*na-ba*ma;return k}function v(k){const m=k[3],L=k[4],ba=k[5],ha=k[6],ma=k[7],na=k[8];return k[0]*(na*L-ba*ma)+k[1]*(-na*m+ba*ha)+k[2]*(ma*m-L*ha)}function y(k,m,L){const ba=m[0],ha=m[1],ma=m[2],na=m[3],pa=m[4],K=m[5],O=m[6],I=m[7];m=m[8];const Y=L[0],ea=L[1],z=L[2],e=L[3],w=L[4],a=L[5],c=L[6],d=L[7];L=L[8];
k[0]=Y*ba+ea*na+z*O;k[1]=Y*ha+ea*pa+z*I;k[2]=Y*ma+ea*K+z*m;k[3]=e*ba+w*na+a*O;k[4]=e*ha+w*pa+a*I;k[5]=e*ma+w*K+a*m;k[6]=c*ba+d*na+L*O;k[7]=c*ha+d*pa+L*I;k[8]=c*ma+d*K+L*m;return k}function x(k,m,L){const ba=m[0],ha=m[1],ma=m[2],na=m[3],pa=m[4],K=m[5],O=m[6],I=m[7];m=m[8];const Y=L[0];L=L[1];k[0]=ba;k[1]=ha;k[2]=ma;k[3]=na;k[4]=pa;k[5]=K;k[6]=Y*ba+L*na+O;k[7]=Y*ha+L*pa+I;k[8]=Y*ma+L*K+m;return k}function M(k,m,L){const ba=m[0],ha=m[1],ma=m[2],na=m[3],pa=m[4],K=m[5],O=m[6],I=m[7];m=m[8];const Y=Math.sin(L);
L=Math.cos(L);k[0]=L*ba+Y*na;k[1]=L*ha+Y*pa;k[2]=L*ma+Y*K;k[3]=L*na-Y*ba;k[4]=L*pa-Y*ha;k[5]=L*K-Y*ma;k[6]=O;k[7]=I;k[8]=m;return k}function G(k,m,L){const ba=L[0],ha=L[1];L=L[2];k[0]=ba*m[0];k[1]=ba*m[1];k[2]=ba*m[2];k[3]=ha*m[3];k[4]=ha*m[4];k[5]=ha*m[5];k[6]=L*m[6];k[7]=L*m[7];k[8]=L*m[8];return k}function B(k,m,L){const ba=L[0];L=L[1];k[0]=ba*m[0];k[1]=ba*m[1];k[2]=ba*m[2];k[3]=L*m[3];k[4]=L*m[4];k[5]=L*m[5];return k}function A(k,m){k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=1;k[5]=0;k[6]=m[0];k[7]=m[1];
k[8]=1;return k}function H(k,m){const L=Math.sin(m);m=Math.cos(m);k[0]=m;k[1]=L;k[2]=0;k[3]=-L;k[4]=m;k[5]=0;k[6]=0;k[7]=0;k[8]=1;return k}function W(k,m){k[0]=m[0];k[1]=0;k[2]=0;k[3]=0;k[4]=m[1];k[5]=0;k[6]=0;k[7]=0;k[8]=1;return k}function Z(k,m){k[0]=m[0];k[1]=m[1];k[2]=0;k[3]=m[2];k[4]=m[3];k[5]=0;k[6]=m[4];k[7]=m[5];k[8]=1;return k}function fa(k,m){var L=m[0],ba=m[1],ha=m[2];m=m[3];var ma=L+L,na=ba+ba;const pa=ha+ha;L*=ma;const K=ba*ma;ba*=na;const O=ha*ma,I=ha*na;ha*=pa;ma*=m;na*=m;m*=pa;k[0]=
1-ba-ha;k[3]=K-m;k[6]=O+na;k[1]=K+m;k[4]=1-L-ha;k[7]=I-ma;k[2]=O-na;k[5]=I+ma;k[8]=1-L-ba;return k}function V(k,m){const L=m[0],ba=m[1],ha=m[2],ma=m[4],na=m[5],pa=m[6],K=m[8],O=m[9];m=m[10];const I=m*na-pa*O,Y=-m*ma+pa*K,ea=O*ma-na*K;var z=L*I+ba*Y+ha*ea;if(!z)return null;z=1/z;k[0]=I*z;k[1]=(-m*ba+ha*O)*z;k[2]=(pa*ba-ha*na)*z;k[3]=Y*z;k[4]=(m*L-ha*K)*z;k[5]=(-pa*L+ha*ma)*z;k[6]=ea*z;k[7]=(-O*L+ba*K)*z;k[8]=(na*L-ba*ma)*z;return k}function U(k,m){const L=m[0],ba=m[1],ha=m[2],ma=m[3],na=m[4],pa=m[5],
K=m[6],O=m[7];var I=m[8],Y=m[9],ea=m[10],z=m[11];const e=m[12],w=m[13],a=m[14];m=m[15];const c=L*pa-ba*na,d=L*K-ha*na,g=L*O-ma*na,r=ba*K-ha*pa,C=ba*O-ma*pa,E=ha*O-ma*K,D=I*w-Y*e,Q=I*a-ea*e;I=I*m-z*e;const T=Y*a-ea*w;Y=Y*m-z*w;ea=ea*m-z*a;z=c*ea-d*Y+g*T+r*I-C*Q+E*D;if(!z)return null;z=1/z;k[0]=(pa*ea-K*Y+O*T)*z;k[1]=(K*I-na*ea-O*Q)*z;k[2]=(na*Y-pa*I+O*D)*z;k[3]=(ha*Y-ba*ea-ma*T)*z;k[4]=(L*ea-ha*I+ma*Q)*z;k[5]=(ba*I-L*Y-ma*D)*z;k[6]=(w*E-a*C+m*r)*z;k[7]=(a*g-e*E-m*d)*z;k[8]=(e*C-w*g+m*c)*z;return k}
function F(k,m,L){k[0]=2/m;k[1]=0;k[2]=0;k[3]=0;k[4]=-2/L;k[5]=0;k[6]=-1;k[7]=1;k[8]=1;return k}function S(k){return"mat3("+k[0]+", "+k[1]+", "+k[2]+", "+k[3]+", "+k[4]+", "+k[5]+", "+k[6]+", "+k[7]+", "+k[8]+")"}function aa(k){return Math.sqrt(k[0]**2+k[1]**2+k[2]**2+k[3]**2+k[4]**2+k[5]**2+k[6]**2+k[7]**2+k[8]**2)}function ia(k,m,L){k[0]=m[0]+L[0];k[1]=m[1]+L[1];k[2]=m[2]+L[2];k[3]=m[3]+L[3];k[4]=m[4]+L[4];k[5]=m[5]+L[5];k[6]=m[6]+L[6];k[7]=m[7]+L[7];k[8]=m[8]+L[8];return k}function da(k,m,L){k[0]=
m[0]-L[0];k[1]=m[1]-L[1];k[2]=m[2]-L[2];k[3]=m[3]-L[3];k[4]=m[4]-L[4];k[5]=m[5]-L[5];k[6]=m[6]-L[6];k[7]=m[7]-L[7];k[8]=m[8]-L[8];return k}function J(k,m,L){k[0]=m[0]*L;k[1]=m[1]*L;k[2]=m[2]*L;k[3]=m[3]*L;k[4]=m[4]*L;k[5]=m[5]*L;k[6]=m[6]*L;k[7]=m[7]*L;k[8]=m[8]*L;return k}function N(k,m,L,ba){k[0]=m[0]+L[0]*ba;k[1]=m[1]+L[1]*ba;k[2]=m[2]+L[2]*ba;k[3]=m[3]+L[3]*ba;k[4]=m[4]+L[4]*ba;k[5]=m[5]+L[5]*ba;k[6]=m[6]+L[6]*ba;k[7]=m[7]+L[7]*ba;k[8]=m[8]+L[8]*ba;return k}function R(k,m){return k[0]===m[0]&&
k[1]===m[1]&&k[2]===m[2]&&k[3]===m[3]&&k[4]===m[4]&&k[5]===m[5]&&k[6]===m[6]&&k[7]===m[7]&&k[8]===m[8]}function ca(k,m){const L=k[0],ba=k[1],ha=k[2],ma=k[3],na=k[4],pa=k[5],K=k[6],O=k[7];k=k[8];const I=m[0],Y=m[1],ea=m[2],z=m[3],e=m[4],w=m[5],a=m[6],c=m[7];m=m[8];const d=f.getEpsilon();return Math.abs(L-I)<=d*Math.max(1,Math.abs(L),Math.abs(I))&&Math.abs(ba-Y)<=d*Math.max(1,Math.abs(ba),Math.abs(Y))&&Math.abs(ha-ea)<=d*Math.max(1,Math.abs(ha),Math.abs(ea))&&Math.abs(ma-z)<=d*Math.max(1,Math.abs(ma),
Math.abs(z))&&Math.abs(na-e)<=d*Math.max(1,Math.abs(na),Math.abs(e))&&Math.abs(pa-w)<=d*Math.max(1,Math.abs(pa),Math.abs(w))&&Math.abs(K-a)<=d*Math.max(1,Math.abs(K),Math.abs(a))&&Math.abs(O-c)<=d*Math.max(1,Math.abs(O),Math.abs(c))&&Math.abs(k-m)<=d*Math.max(1,Math.abs(k),Math.abs(m))}function oa(k){const m=f.getEpsilon(),L=k[0],ba=k[1],ha=k[2],ma=k[3],na=k[4],pa=k[5],K=k[6],O=k[7];k=k[8];return Math.abs(1-(L*L+ma*ma+K*K))<=m&&Math.abs(1-(ba*ba+na*na+O*O))<=m&&Math.abs(1-(ha*ha+pa*pa+k*k))<=m}const la=
Object.freeze(Object.defineProperty({__proto__:null,add:ia,adjoint:h,copy:q,determinant:v,equals:ca,exactEquals:R,frob:aa,fromMat2d:Z,fromMat4:p,fromQuat:fa,fromRotation:H,fromScaling:W,fromTranslation:A,identity:t,invert:n,isOrthoNormal:oa,mul:y,multiply:y,multiplyScalar:J,multiplyScalarAndAdd:N,normalFromMat4:U,normalFromMat4Legacy:V,projection:F,rotate:M,scale:G,scaleByVec2:B,set:u,str:S,sub:da,subtract:da,translate:x,transpose:l},Symbol.toStringTag,{value:"Module"}));b.add=ia;b.adjoint=h;b.copy=
q;b.determinant=v;b.equals=ca;b.exactEquals=R;b.frob=aa;b.fromMat2d=Z;b.fromMat4=p;b.fromQuat=fa;b.fromRotation=H;b.fromScaling=W;b.fromTranslation=A;b.identity=t;b.invert=n;b.isOrthoNormal=oa;b.mat3=la;b.mul=y;b.multiply=y;b.multiplyScalar=J;b.multiplyScalarAndAdd=N;b.normalFromMat4=U;b.normalFromMat4Legacy=V;b.projection=F;b.rotate=M;b.scale=G;b.scaleByVec2=B;b.set=u;b.str=S;b.sub=da;b.subtract=da;b.translate=x;b.transpose=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/quat":function(){define("exports ../factories/mat3f64 ../factories/quatf64 ../factories/vec3f64 ./common ../../../../chunks/vec32 ../../../../chunks/vec42".split(" "),
function(b,f,p,q,u,t,l){function n(K){K[0]=0;K[1]=0;K[2]=0;K[3]=1;return K}function h(K,O,I){I*=.5;const Y=Math.sin(I);K[0]=Y*O[0];K[1]=Y*O[1];K[2]=Y*O[2];K[3]=Math.cos(I);return K}function v(K,O){const I=2*Math.acos(O[3]),Y=Math.sin(I/2);Y>u.getEpsilon()?(K[0]=O[0]/Y,K[1]=O[1]/Y,K[2]=O[2]/Y):(K[0]=1,K[1]=0,K[2]=0);return I}function y(K,O,I){const Y=O[0],ea=O[1],z=O[2];O=O[3];const e=I[0],w=I[1],a=I[2];I=I[3];K[0]=Y*I+O*e+ea*a-z*w;K[1]=ea*I+O*w+z*e-Y*a;K[2]=z*I+O*a+Y*w-ea*e;K[3]=O*I-Y*e-ea*w-z*a;
return K}function x(K,O,I){I*=.5;const Y=O[0],ea=O[1],z=O[2];O=O[3];const e=Math.sin(I);I=Math.cos(I);K[0]=Y*I+O*e;K[1]=ea*I+z*e;K[2]=z*I-ea*e;K[3]=O*I-Y*e;return K}function M(K,O,I){I*=.5;const Y=O[0],ea=O[1],z=O[2];O=O[3];const e=Math.sin(I);I=Math.cos(I);K[0]=Y*I-z*e;K[1]=ea*I+O*e;K[2]=z*I+Y*e;K[3]=O*I-ea*e;return K}function G(K,O,I){I*=.5;const Y=O[0],ea=O[1],z=O[2];O=O[3];const e=Math.sin(I);I=Math.cos(I);K[0]=Y*I+ea*e;K[1]=ea*I-Y*e;K[2]=z*I+O*e;K[3]=O*I-z*e;return K}function B(K,O){const I=
O[0],Y=O[1];O=O[2];K[0]=I;K[1]=Y;K[2]=O;K[3]=Math.sqrt(Math.abs(1-I*I-Y*Y-O*O));return K}function A(K,O,I,Y){const ea=O[0],z=O[1],e=O[2];O=O[3];let w=I[0],a=I[1],c=I[2];I=I[3];let d;let g;var r=ea*w+z*a+e*c+O*I;0>r&&(r=-r,w=-w,a=-a,c=-c,I=-I);1-r>u.getEpsilon()?(d=Math.acos(r),g=Math.sin(d),r=Math.sin((1-Y)*d)/g,Y=Math.sin(Y*d)/g):r=1-Y;K[0]=r*ea+Y*w;K[1]=r*z+Y*a;K[2]=r*e+Y*c;K[3]=r*O+Y*I;return K}function H(K){var O=u.RANDOM,I=O();const Y=O();O=O();const ea=Math.sqrt(1-I);I=Math.sqrt(I);K[0]=ea*
Math.sin(2*Math.PI*Y);K[1]=ea*Math.cos(2*Math.PI*Y);K[2]=I*Math.sin(2*Math.PI*O);K[3]=I*Math.cos(2*Math.PI*O);return K}function W(K,O){const I=O[0],Y=O[1],ea=O[2];O=O[3];var z=I*I+Y*Y+ea*ea+O*O;z=z?1/z:0;K[0]=-I*z;K[1]=-Y*z;K[2]=-ea*z;K[3]=O*z;return K}function Z(K,O){K[0]=-O[0];K[1]=-O[1];K[2]=-O[2];K[3]=O[3];return K}function fa(K,O){var I=O[0]+O[4]+O[8];if(0<I)I=Math.sqrt(I+1),K[3]=.5*I,I=.5/I,K[0]=(O[5]-O[7])*I,K[1]=(O[6]-O[2])*I,K[2]=(O[1]-O[3])*I;else{let Y=0;O[4]>O[0]&&(Y=1);O[8]>O[3*Y+Y]&&
(Y=2);const ea=(Y+1)%3,z=(Y+2)%3;I=Math.sqrt(O[3*Y+Y]-O[3*ea+ea]-O[3*z+z]+1);K[Y]=.5*I;I=.5/I;K[3]=(O[3*ea+z]-O[3*z+ea])*I;K[ea]=(O[3*ea+Y]+O[3*Y+ea])*I;K[z]=(O[3*z+Y]+O[3*Y+z])*I}return K}function V(K,O,I,Y){var ea=.5*Math.PI/180;O*=ea;I*=ea;Y*=ea;ea=Math.sin(O);O=Math.cos(O);const z=Math.sin(I);I=Math.cos(I);const e=Math.sin(Y);Y=Math.cos(Y);K[0]=ea*I*Y-O*z*e;K[1]=O*z*Y+ea*I*e;K[2]=O*I*e-ea*z*Y;K[3]=O*I*Y+ea*z*e;return K}function U(K){return"quat("+K[0]+", "+K[1]+", "+K[2]+", "+K[3]+")"}function F(K,
O,I){const Y=t.dot(O,I);if(-.999999>Y)return t.cross(L,ba,O),1E-6>t.len(L)&&t.cross(L,ha,O),t.normalize(L,L),h(K,L,Math.PI),K;if(.999999<Y)return K[0]=0,K[1]=0,K[2]=0,K[3]=1,K;t.cross(L,O,I);K[0]=L[0];K[1]=L[1];K[2]=L[2];K[3]=1+Y;return k(K,K)}function S(K,O,I,Y,ea,z){A(ma,O,ea,z);A(na,I,Y,z);A(K,ma,na,2*z*(1-z));return K}function aa(K,O,I,Y){const ea=pa;ea[0]=I[0];ea[3]=I[1];ea[6]=I[2];ea[1]=Y[0];ea[4]=Y[1];ea[7]=Y[2];ea[2]=-O[0];ea[5]=-O[1];ea[8]=-O[2];return k(K,fa(K,ea))}const ia=l.copy,da=l.set,
J=l.add,N=l.scale,R=l.dot,ca=l.lerp,oa=l.length,la=l.squaredLength,k=l.normalize,m=l.exactEquals;l=l.equals;const L=q.create(),ba=q.fromValues(1,0,0),ha=q.fromValues(0,1,0),ma=p.create(),na=p.create(),pa=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:J,calculateW:B,conjugate:Z,copy:ia,dot:R,equals:l,exactEquals:m,fromEuler:V,fromMat3:fa,getAxisAngle:v,identity:n,invert:W,len:oa,length:oa,lerp:ca,mul:y,multiply:y,normalize:k,random:H,rotateX:x,rotateY:M,rotateZ:G,rotationTo:F,
scale:N,set:da,setAxes:aa,setAxisAngle:h,slerp:A,sqlerp:S,sqrLen:la,squaredLength:la,str:U},Symbol.toStringTag,{value:"Module"}));b.add=J;b.calculateW=B;b.conjugate=Z;b.copy=ia;b.dot=R;b.equals=l;b.exactEquals=m;b.fromEuler=V;b.fromMat3=fa;b.getAxisAngle=v;b.identity=n;b.invert=W;b.len=oa;b.length=oa;b.lerp=ca;b.mul=y;b.multiply=y;b.normalize=k;b.quat=f;b.random=H;b.rotateX=x;b.rotateY=M;b.rotateZ=G;b.rotationTo=F;b.scale=N;b.set=da;b.setAxes=aa;b.setAxisAngle=h;b.slerp=A;b.sqlerp=S;b.sqrLen=la;b.squaredLength=
la;b.str=U;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ../../chunks/vec42 ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),function(b,f,p,q,u,t,l,n){function h(J=S){return[J[0],J[1],J[2],J[3]]}function v(J,N){return y(N[0],N[1],N[2],N[3],J)}function y(J,N,R,ca,oa=h()){oa[0]=J;oa[1]=N;oa[2]=R;oa[3]=ca;return oa}function x(J,
N,R){var ca=N[0]*N[0]+N[1]*N[1]+N[2]*N[2];ca=1E-5<Math.abs(ca-1)&&1E-12<ca?1/Math.sqrt(ca):1;R[0]=N[0]*ca;R[1]=N[1]*ca;R[2]=N[2]*ca;R[3]=-(R[0]*J[0]+R[1]*J[1]+R[2]*J[2]);return R}function M(J,N,R,ca=h()){var oa=R[0]-N[0],la=R[1]-N[1],k=R[2]-N[2];R=J[0]-N[0];const m=J[1]-N[1],L=J[2]-N[2];N=la*L-k*m;k=k*R-oa*L;oa=oa*m-la*R;la=N*N+k*k+oa*oa;la=1E-5<Math.abs(la-1)&&1E-12<la?1/Math.sqrt(la):1;ca[0]=N*la;ca[1]=k*la;ca[2]=oa*la;ca[3]=-(ca[0]*J[0]+ca[1]*J[1]+ca[2]*J[2]);return ca}function G(J,N,R,ca=0,oa=
Math.floor(1/3*R),la=Math.floor(2/3*R)){if(3>R)return!1;N(Z,ca);let k=oa,m=!1;for(;k<R-1&&!m;)N(fa,k),k++,m=!p.exactEquals(Z,fa);if(!m)return!1;k=Math.max(k,la);for(m=!1;k<R&&!m;)N(V,k),k++,p.subtract(U,Z,fa),p.normalize(U,U),p.subtract(F,fa,V),p.normalize(F,F),m=!p.exactEquals(Z,V)&&!p.exactEquals(fa,V)&&.99619469809>Math.abs(p.dot(U,F));if(!m)return 0===ca&&1===oa&&2===la?!1:G(J,N,R,0,1,2);M(Z,fa,V,J);return!0}function B(J,N,R){J=p.scale(l.sv3d.get(),J,p.dot(J,N));p.subtract(R,N,J);return R}function A(J,
N){return p.dot(J,N)+J[3]}function H(J,N,R,ca,oa){const la=p.dot(J,R);if(0===la)return!1;J=-(p.dot(J,N)+J[3])/la;ca&aa.CLAMP&&(J=f.clamp(J,0,1));if(!(ca&aa.INFINITE_MIN)&&0>J||!(ca&aa.INFINITE_MAX)&&1<J)return!1;p.add(oa,N,p.scale(oa,R,J));return!0}const W=u.exactEquals;u=u.equals;const Z=q.create(),fa=q.create(),V=q.create(),U=q.create(),F=q.create(),S=[0,0,1,0];var aa;(function(J){J[J.NONE=0]="NONE";J[J.CLAMP=1]="CLAMP";J[J.INFINITE_MIN=4]="INFINITE_MIN";J[J.INFINITE_MAX=8]="INFINITE_MAX"})(aa||=
{});const ia=aa.INFINITE_MIN|aa.INFINITE_MAX,da=aa.INFINITE_MAX;b.clip=function(J,N){const R=p.dot(J,N.ray.direction);J=-A(J,N.ray.origin);if(0>J&&0<=R)return!1;if(-1E-6<R&&1E-6>R)return 0<J;if((0>J||0>R)&&!(0>J&&0>R))return!0;J/=R;0<R?J<N.c1&&(N.c1=J):J>N.c0&&(N.c0=J);return N.c0<=N.c1};b.clipInfinite=function(J,N){const R=p.dot(J,N.ray.direction);J=-A(J,N.ray.origin);if(-1E-6<R&&1E-6>R)return 0<J;J/=R;0<R?J<N.c1&&(N.c1=J):J>N.c0&&(N.c0=J);return N.c0<=N.c1};b.copy=v;b.create=h;b.distance=function(J,
N){return Math.abs(A(J,N))};b.equals=u;b.exactEquals=W;b.fromArray=function(J,N,R=!0){const ca=N.length/3;return G(J,(oa,la)=>p.set(oa,N[3*la],N[3*la+1],N[3*la+2]),R?ca-1:ca)};b.fromManyPoints=G;b.fromNormalAndOffset=function(J,N,R){p.copy(R,J);R[3]=N;return R};b.fromPoints=M;b.fromPositionAndNormal=x;b.fromValues=y;b.fromVectorsAndPoint=function(J,N,R,ca){p.cross(V,N,J);return x(R,V,ca)};b.getNormal=function(J){return J};b.intersectLine=function(J,N,R,ca){R=p.subtract(l.sv3d.get(),R,N);return H(J,
N,R,ia,ca)};b.intersectLineSegment=function(J,N,R){return H(J,N.origin,N.vector,aa.NONE,R)};b.intersectLineSegmentClamp=function(J,N,R){return H(J,N.origin,N.vector,aa.CLAMP,R)};b.intersectRay=function(J,N,R){return null!=N?H(J,N.origin,N.direction,da,R):!1};b.isPointInside=function(J,N){return 0<=A(J,N)};b.negate=function(J,N){N[0]=-J[0];N[1]=-J[1];N[2]=-J[2];N[3]=-J[3];return N};b.projectPoint=function(J,N,R){const ca=p.scale(l.sv3d.get(),J,-J[3]);N=p.subtract(l.sv3d.get(),N,ca);J=B(J,N,l.sv3d.get());
p.add(R,J,ca);return R};b.projectPointLocal=function(J,N,R,ca){var oa=l.sv3d.get(),la=l.sv3d.get();n.tangentFrame(J,oa,la);N=p.subtract(l.sv3d.get(),R,N);oa=t.projectPointSignedLength(oa,N);la=t.projectPointSignedLength(la,N);J=t.projectPointSignedLength(J,N);return p.set(ca,oa,la,J)};b.projectVector=B;b.setOffsetFromPoint=function(J,N,R){N!==J&&v(J,N);J[3]=-p.dot(J,R);return J};b.signedDistance=A;b.up=S;b.wrap=function(J=S[0],N=S[1],R=S[2],ca=S[3]){return y(J,N,R,ca,l.sv4d.get())};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec32","../../../core/libs/gl-matrix-2/factories/vec3f64"],function(b,f,p,q){const u=q.create(),t=q.create(),l=q.create(),n=q.create(),h=q.create();b.angle=function(v,y,x){v=p.normalize(n,v);y=p.normalize(h,y);const M=f.acosClamped(p.dot(v,y));return x&&(v=p.cross(l,v,y),0>p.dot(v,x))?-M:M};b.bilerp=function(v,y,x,M,G,B){v+=(y-v)*G;return v+(x+(M-x)*G-v)*
B};b.cosCapped=function(v,y){return v>y?Math.cos(y):Math.cos(v)};b.fovx2fovy=function(v,y,x){return 2*Math.atan(x*Math.tan(.5*v)/y)};b.fovy2fovx=function(v,y,x){return 2*Math.atan(y*Math.tan(.5*v)/x)};b.makeOrthonormal=function(v,y,x){x=x||v;const M=p.dot(v,y);p.set(x,v[0]-M*y[0],v[1]-M*y[1],v[2]-M*y[2]);p.normalize(x,x)};b.makePiecewiseLinearFunction=function(v){const y=v.length;return x=>{if(x<=v[0][0])return v[0][1];if(x>=v[y-1][0])return v[y-1][1];let M=1;for(;x>v[M][0];)M++;const G=v[M][0];x=
(G-x)/(G-v[M-1][0]);return x*v[M-1][1]+(1-x)*v[M][1]}};b.maxScale=function(v){return Math.sqrt(Math.max(v[0]*v[0]+v[4]*v[4]+v[8]*v[8],v[1]*v[1]+v[5]*v[5]+v[9]*v[9],v[2]*v[2]+v[6]*v[6]+v[10]*v[10]))};b.midpoint3d=function(v,y){p.set(y,0,0,0);if(0<v.length){for(let x=0;x<v.length;++x)p.add(y,y,v[x]);p.scale(y,y,1/v.length)}};b.planeFromPoints=function(v,y,x,M){p.subtract(u,y,v);p.subtract(t,x,v);p.cross(M,u,t);p.normalize(M,M);M[3]=-p.dot(v,M)};b.scaleFromMatrix=function(v,y){p.set(v,Math.sqrt(y[0]*
y[0]+y[4]*y[4]+y[8]*y[8]),Math.sqrt(y[1]*y[1]+y[5]*y[5]+y[9]*y[9]),Math.sqrt(y[2]*y[2]+y[6]*y[6]+y[10]*y[10]));return v};b.slerp=function(v,y,x,M=q.create()){const G=p.length(v);var B=p.length(y),A=p.dot(v,y)/(G*B);if(.9999999999999999>A){A=Math.acos(A);const H=((1-x)*G+x*B)/Math.sin(A);B=H/B*Math.sin(x*A);p.scale(n,v,H/G*Math.sin((1-x)*A));p.scale(h,y,B);return p.add(M,n,h)}return p.lerp(M,v,y,x)};b.slerpTangent=function(v,y,x,M=q.create(),G=q.create()){const B=p.length(v),A=p.length(y);var H=p.dot(v,
y)/(B*A);if(.9999999999999999>H){H=Math.acos(H);const W=Math.sin(H),Z=Math.sin(x*H),fa=Math.sin((1-x)*H),V=(1-x)*B+x*A,U=V/W,F=U/A*Z;p.scale(n,v,U/B*fa);p.scale(h,y,F);p.add(M,n,h);p.scale(n,v,1/B*(-Math.cos((1-x)*H)*H*V+fa*(-B+A)));p.scale(h,y,1/A*(Math.cos(x*H)*H*V+Z*(-B+A)));p.add(G,n,h);p.scale(G,G,1/W);return G}p.lerp(M,v,y,x);p.subtract(G,y,v);p.normalize(G,G);return G};b.tangentFrame=function(v,y,x){Math.abs(v[0])>Math.abs(v[1])?p.set(y,0,1,0):p.set(y,1,0,0);p.cross(x,v,y);p.cross(y,x,v);p.normalize(x,
x);p.normalize(y,y)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/ViewingMode":function(){define(["exports"],function(b){b.ViewingMode=void 0;(function(f){f[f.Global=1]="Global";f[f.Local=2]="Local"})(b.ViewingMode||(b.ViewingMode={}));b.stringFromViewingMode=function(f){return f===b.ViewingMode.Global?"global":"local"};b.viewingModeFromString=function(f){return"global"===f?b.ViewingMode.Global:b.ViewingMode.Local};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/support/dito":function(){define("exports ../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../core/libs/gl-matrix-2/factories/quatf64 ../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../webgl-engine/lib/Attribute".split(" "),function(b,f,p,q,u,t,l){function n(d,g,r,C,E,D){if(!(1E-6>g[0]*g[0]+g[1]*g[1]+g[2]*g[2]))for(H(oa,r,g),H(la,C,g),H(k,E,g),h(d,g,ca),L[1]=ca[0],m[1]=ca[1],ba[1]=m[1]-L[1],r=[r,C,E],C=[oa,
la,k],E=0;3>E;++E){h(d,r[E],ca);L[0]=ca[0];m[0]=ca[1];h(d,C[E],ca);L[2]=ca[0];m[2]=ca[1];ba[0]=m[0]-L[0];ba[2]=m[2]-L[2];const Q=x(ba);Q<D.quality&&(A(D.b0,r[E]),A(D.b1,g),A(D.b2,C[E]),D.quality=Q)}}function h(d,g,r){const {data:C,size:E}=d;r[0]=Number.POSITIVE_INFINITY;r[1]=Number.NEGATIVE_INFINITY;for(d=0;d<C.length;d+=E){const D=C[d]*g[0]+C[d+1]*g[1]+C[d+2]*g[2];r[0]=Math.min(r[0],D);r[1]=Math.max(r[1],D)}}function v(d,g,r,C,E,D){h(d,g,ca);E[0]=ca[0];D[0]=ca[1];h(d,r,ca);E[1]=ca[0];D[1]=ca[1];
h(d,C,ca);E[2]=ca[0];D[2]=ca[1]}function y(d,g,r,C,E,D,Q){e[0]=d[0];e[1]=d[1];e[2]=d[2];e[3]=g[0];e[4]=g[1];e[5]=g[2];e[6]=r[0];e[7]=r[1];e[8]=r[2];var T=w,P=e,X=P[0]+P[4]+P[8];if(0<X)X=Math.sqrt(X+1),T[3]=.5*X,X=.5/X,T[0]=(P[5]-P[7])*X,T[1]=(P[6]-P[2])*X,T[2]=(P[1]-P[3])*X;else{X=0;P[4]>P[0]&&(X=1);P[8]>P[3*X+X]&&(X=2);const ja=(X+1)%3,ka=(X+2)%3;let sa=Math.sqrt(P[3*X+X]-P[3*ja+ja]-P[3*ka+ka]+1);T[X]=.5*sa;sa=.5/sa;T[3]=(P[3*ja+ka]-P[3*ka+ja])*sa;T[ja]=(P[3*ja+X]+P[3*X+ja])*sa;T[ka]=(P[3*ka+X]+
P[3*X+ka])*sa}Q.quaternion=T;M(Y,C,E);B(Y,Y,.5);B(ea,d,Y[0]);B(z,g,Y[1]);M(ea,ea,z);B(z,r,Y[2]);Q.center=u.add(ea,ea,z);Q.halfSize=u.scale(Y,D,.5)}function x(d){return d[0]*d[1]+d[0]*d[2]+d[1]*d[2]}function M(d,g,r){d[0]=g[0]+r[0];d[1]=g[1]+r[1];d[2]=g[2]+r[2]}function G(d,g,r){d[0]=g[0]-r[0];d[1]=g[1]-r[1];d[2]=g[2]-r[2]}function B(d,g,r){d[0]=g[0]*r;d[1]=g[1]*r;d[2]=g[2]*r}function A(d,g,r=0){d[0]=g[r];d[1]=g[r+1];d[2]=g[r+2]}function H(d,g,r){const C=g[0],E=g[1];g=g[2];const D=r[0],Q=r[1];r=r[2];
d[0]=E*r-g*Q;d[1]=g*D-C*r;d[2]=C*Q-E*D}function W(d,g){var r=g[0]*g[0]+g[1]*g[1]+g[2]*g[2];0<r&&(r=1/Math.sqrt(r),d[0]=g[0]*r,d[1]=g[1]*r,d[2]=g[2]*r)}function Z(d,g){const r=g[0]-d[0],C=g[1]-d[1];d=g[2]-d[2];return r*r+C*C+d*d}const fa=t.create(),V=t.create(),U=t.create(),F=t.create(),S=t.create(),aa=t.create(),ia=t.create(),da=t.create(),J=t.create(),N=t.create(),R=[0,0,0],ca=q.create(),oa=t.create(),la=t.create(),k=t.create(),m=t.create(),L=t.create(),ba=t.create(),ha=t.create(),ma=t.create(),
na=t.create(),pa=t.create(),K=t.create(),O=t.create(),I=t.create(),Y=t.create(),ea=t.create(),z=t.create(),e=f.fromValues(1,0,0,0,1,0,0,0,1),w=p.create();class a{constructor(d){this.minVert=Array(7);this.maxVert=Array(7);this.buffer=new ArrayBuffer(448);var g=0;this.minProj=new Float64Array(this.buffer,g,7);g+=56;this.maxProj=new Float64Array(this.buffer,g,7);g+=56;for(var r=0;7>r;++r)this.minVert[r]=new Float64Array(this.buffer,g,3),g+=24;for(r=0;7>r;++r)this.maxVert[r]=new Float64Array(this.buffer,
g,3),g+=24;for(g=0;7>g;++g)this.minProj[g]=Number.POSITIVE_INFINITY,this.maxProj[g]=Number.NEGATIVE_INFINITY;g=Array(7);r=Array(7);const {data:C,size:E}=d;for(d=0;d<C.length;d+=E){var D=C[d];D<this.minProj[0]&&(this.minProj[0]=D,g[0]=d);D>this.maxProj[0]&&(this.maxProj[0]=D,r[0]=d);D=C[d+1];D<this.minProj[1]&&(this.minProj[1]=D,g[1]=d);D>this.maxProj[1]&&(this.maxProj[1]=D,r[1]=d);D=C[d+2];D<this.minProj[2]&&(this.minProj[2]=D,g[2]=d);D>this.maxProj[2]&&(this.maxProj[2]=D,r[2]=d);D=C[d]+C[d+1]+C[d+
2];D<this.minProj[3]&&(this.minProj[3]=D,g[3]=d);D>this.maxProj[3]&&(this.maxProj[3]=D,r[3]=d);D=C[d]+C[d+1]-C[d+2];D<this.minProj[4]&&(this.minProj[4]=D,g[4]=d);D>this.maxProj[4]&&(this.maxProj[4]=D,r[4]=d);D=C[d]-C[d+1]+C[d+2];D<this.minProj[5]&&(this.minProj[5]=D,g[5]=d);D>this.maxProj[5]&&(this.maxProj[5]=D,r[5]=d);D=C[d]-C[d+1]-C[d+2];D<this.minProj[6]&&(this.minProj[6]=D,g[6]=d);D>this.maxProj[6]&&(this.maxProj[6]=D,r[6]=d)}for(d=0;7>d;++d)D=g[d],A(this.minVert[d],C,D),D=r[d],A(this.maxVert[d],
C,D)}}class c{constructor(){this.b0=t.fromValues(1,0,0);this.b1=t.fromValues(0,1,0);this.b2=t.fromValues(0,0,1);this.quality=0}}b.computeOBB=function(d,g){const {data:r,size:C}=d;var E=r.length/C;if(!(0>=E)){var D=new a(d);M(fa,D.minProj,D.maxProj);B(fa,fa,.5);G(V,D.maxProj,D.minProj);var Q=x(V),T=new c;T.quality=Q;14>E&&(d=new l.Vertices(new Float64Array(D.buffer,112,42),3));var P=t.create(),X=t.create(),ja=t.create();E=t.create();var ka=t.create(),sa=t.create(),qa=t.create();var ra=d;var wa=Z(D.maxVert[0],
D.minVert[0]),ta=0;for(var ua=1;7>ua;++ua){const ya=Z(D.maxVert[ua],D.minVert[ua]);ya>wa&&(wa=ya,ta=ua)}A(P,D.minVert[ta]);A(X,D.maxVert[ta]);if(1E-6>Z(P,X))ra=1;else{G(E,P,X);W(E,E);const {data:ya,size:Aa}=ra;D=Number.NEGATIVE_INFINITY;wa=0;for(ta=0;ta<ya.length;ta+=Aa)R[0]=ya[ta]-P[0],R[1]=ya[ta+1]-P[1],R[2]=ya[ta+2]-P[2],ua=E[0]*R[0]+E[1]*R[1]+E[2]*R[2],ua=R[0]*R[0]+R[1]*R[1]+R[2]*R[2]-ua*ua/(E[0]*E[0]+E[1]*E[1]+E[2]*E[2]),ua>D&&(D=ua,wa=ta);A(ja,ya,wa);1E-6>D?ra=2:(G(ka,X,ja),W(ka,ka),G(sa,ja,
P),W(sa,sa),H(qa,ka,E),W(qa,qa),n(ra,qa,E,ka,sa,T),ra=0)}switch(ra){case 1:g.center=fa;g.halfSize=u.scale(V,V,.5);g.quaternion=p.IDENTITY;return;case 2:Q=d;A(ma,E);Math.abs(E[0])>Math.abs(E[1])&&Math.abs(E[0])>Math.abs(E[2])?ma[0]=0:Math.abs(E[1])>Math.abs(E[2])?ma[1]=0:ma[2]=0;1E-6>ma[0]*ma[0]+ma[1]*ma[1]+ma[2]*ma[2]&&(ma[0]=ma[1]=ma[2]=1);H(na,E,ma);W(na,na);H(pa,E,na);W(pa,pa);v(Q,E,na,pa,K,O);G(I,O,K);y(E,na,pa,K,O,I,g);return}ra=d;D=ca;const {data:va,size:xa}=ra;A(F,va);A(U,F);D[0]=ha[0]*qa[0]+
ha[1]*qa[1]+ha[2]*qa[2];D[1]=D[0];for(wa=xa;wa<va.length;wa+=xa)ta=va[wa]*qa[0]+va[wa+1]*qa[1]+va[wa+2]*qa[2],ta<D[0]&&(D[0]=ta,A(F,va,wa)),ta>D[1]&&(D[1]=ta,A(U,va,wa));qa=P[0]*qa[0]+P[1]*qa[1]+P[2]*qa[2];ca[1]-1E-6<=qa&&(U[0]=void 0);ca[0]+1E-6>=qa&&(F[0]=void 0);void 0!==U[0]&&(G(S,U,P),W(S,S),G(aa,U,X),W(aa,aa),G(ia,U,ja),W(ia,ia),H(da,aa,E),W(da,da),H(J,ia,ka),W(J,J),H(N,S,sa),W(N,N),n(ra,da,E,aa,S,T),n(ra,J,ka,ia,aa,T),n(ra,N,sa,S,ia,T));void 0!==F[0]&&(G(S,F,P),W(S,S),G(aa,F,X),W(aa,aa),G(ia,
F,ja),W(ia,ia),H(da,aa,E),W(da,da),H(J,ia,ka),W(J,J),H(N,S,sa),W(N,N),n(ra,da,E,aa,S,T),n(ra,J,ka,ia,aa,T),n(ra,N,sa,S,ia,T));v(d,T.b0,T.b1,T.b2,K,O);d=t.create();G(d,O,K);T.quality=x(d);T.quality<Q?y(T.b0,T.b1,T.b2,K,O,d,g):(g.center=fa,g.halfSize=u.scale(V,V,.5),g.quaternion=p.IDENTITY)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Attribute":function(){define(["exports"],function(b){class f{constructor(q,u,t=u){this.data=q;this.size=u;this.stride=
t}}class p extends f{constructor(q,u,t,l=!1,n=t){super(q,t,n);this.indices=u;this.exclusive=l}}b.Attribute=p;b.Vertices=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/ElevationRange":function(){define(["exports"],function(b){class f{constructor(p=Infinity,q=-Infinity){this.elevationRangeMin=p;this.elevationRangeMax=q}get elevationRangeValid(){return!Number.isNaN(this.elevationRangeMin)}invalidateElevationRange(){this.elevationRangeMin=NaN}expandElevationRangeValues(p,
q){this.elevationRangeMin=Math.min(this.elevationRangeMin,p);this.elevationRangeMax=Math.max(this.elevationRangeMax,q)}expandElevationRange(p){this.elevationRangeMin=Math.min(this.elevationRangeMin,p.elevationRangeMin);this.elevationRangeMax=Math.max(this.elevationRangeMax,p.elevationRangeMax)}setElevationRange(p){this.elevationRangeMin=p.elevationRangeMin;this.elevationRangeMax=p.elevationRangeMax}}b.ElevationRange=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require exports ../../../core/mathUtils ../../../geometry/SpatialReference ../../../geometry/support/DoubleArray ../../../geometry/support/MeshGeoreferencedVertexSpace ../../../geometry/support/MeshLocalVertexSpace ../../../chunks/vec3 ../../../libs/i3s/enums ../../../libs/i3s/I3SModule ./i3s/I3SNode".split(" "),function(b,f,p,q,u,t,l,n,h,v,y){function x(V){if(Z){var U=V.modifications,F=Z._malloc(8*U.length),S=new Float64Array(Z.HEAPU8.buffer,F,U.length);for(let aa=0;aa<U.length;++aa)S[aa]=
U[aa];Z.setModifications(V.context,F,U.length,V.isGeodetic);Z._free(F)}}function M(V,U,F){const {context:S,globalTrafo:aa,mbs:ia,obbData:da,elevationOffset:J,geometryBuffer:N,geometryDescriptor:R,indexToVertexProjector:ca,vertexToRenderProjector:oa}=U;var la=V._malloc(N.byteLength),k=V._malloc(33*Float64Array.BYTES_PER_ELEMENT),m=new Uint8Array(V.HEAPU8.buffer,la,N.byteLength);m.set(new Uint8Array(N));var L=new Float64Array(V.HEAPU8.buffer,k,33);A(L,[NaN,NaN,NaN]);var ba=L.byteOffset+3*L.BYTES_PER_ELEMENT,
ha=new Float64Array(L.buffer,ba);A(ha,aa);ba+=16*L.BYTES_PER_ELEMENT;ha=new Float64Array(L.buffer,ba);A(ha,ia);ba+=4*L.BYTES_PER_ELEMENT;da&&(ha=new Float64Array(L.buffer,ba),A(ha,da));L={isDraco:!1,isLegacy:!1,color:U.layouts.some(pa=>pa.some(K=>"color"===K.name)),normal:U.needNormals&&U.layouts.some(pa=>pa.some(K=>"normalCompressed"===K.name)),uv0:U.layouts.some(pa=>pa.some(K=>"uv0"===K.name)),uvRegion:U.layouts.some(pa=>pa.some(K=>"uvRegion"===K.name)),featureIndex:R.featureIndex};m=V.process(S,
!!U.obbData,la,m.byteLength,R,L,k,J,ca,oa,U.normalReferenceFrame);V._free(k);V._free(la);if(0<m.error.length)throw Error(`i3s.wasm: ${m.error}`);if(m.discarded)return null;V=0<m.componentOffsets.length?m.componentOffsets.slice():null;la=0<m.featureIds.length?m.featureIds.slice():null;k=0<m.anchorIds.length?Array.from(m.anchorIds):null;L=0<m.anchors.length?Array.from(m.anchors):null;ba=m.interleavedVertedData.slice().buffer;ha=m.indicesType===h.IndexType.Int16?(new Uint16Array(m.indices.buffer,m.indices.byteOffset,
m.indices.byteLength/2)).slice():(new Uint32Array(m.indices.buffer,m.indices.byteOffset,m.indices.byteLength/4)).slice();const ma=m.positions.slice(),na=m.positionIndicesType===h.IndexType.Int16?(new Uint16Array(m.positionIndices.buffer,m.positionIndices.byteOffset,m.positionIndices.byteLength/2)).slice():(new Uint32Array(m.positionIndices.buffer,m.positionIndices.byteOffset,m.positionIndices.byteLength/4)).slice();U={layout:U.layouts[0],interleavedVertexData:ba,indices:ha,hasColors:m.hasColors,hasModifications:m.hasModifications,
positionData:{data:ma,indices:na}};la&&F.push(la.buffer);V&&F.push(V.buffer);F.push(ba);F.push(ha.buffer);F.push(ma.buffer);F.push(na.buffer);return{componentOffsets:V,featureIds:la,anchorIds:k,anchors:L,transformedGeometry:U,obb:m.obb,globalTrafo:aa}}function G(V){if(Z){var {context:U,buffer:F}=V;V=Z._malloc(F.byteLength);var S=F.byteLength/Float64Array.BYTES_PER_ELEMENT,aa=new Float64Array(Z.HEAPU8.buffer,V,S),ia=new Float64Array(F);aa.set(ia);Z.filterOBBs(U,V,S);ia.set(aa);Z._free(V)}}function B(V){Z&&
0===Z.destroy(V)&&(Z=null)}function A(V,U){for(let F=0;F<U.length;++F)V[F]=U[F]}function H(){if(Z)return Promise.resolve(Z);W||=v.get().then(V=>{Z=V;W=null;return Z});return W}let W,Z;const fa={transform:(V,U)=>Z&&M(Z,V,U),destroy:B};f.destroyContext=function(V){B(V)};f.dracoDecompressPointCloudData=async function(V){Z=await H();const U=[V.geometryBuffer];var {geometryBuffer:F}=V,S=F.byteLength;V=Z._malloc(S);S=new Uint8Array(Z.HEAPU8.buffer,V,S);S.set(new Uint8Array(F));F=Z.dracoDecompressPointCloudData(V,
S.byteLength);Z._free(V);if(0<F.error.length)throw Error(`i3s.wasm: ${F.error}`);V=0<F.featureIds?.length?F.featureIds.slice():null;F=F.positions.slice();V&&U.push(V.buffer);U.push(F.buffer);return{result:{positions:F,featureIds:V},transferList:U}};f.filterObbsForModifications=async function(V){await H();G(V);V={buffer:V.buffer};return{result:V,transferList:[V.buffer]}};f.filterObbsForModificationsSync=G;f.initialize=async function(){Z||await H()};f.interpretObbModificationResults=function(V){return 0===
V?y.NodeIMModificationImpact.Unmodified:1===V?y.NodeIMModificationImpact.PotentiallyModified:2===V?y.NodeIMModificationImpact.Culled:y.NodeIMModificationImpact.Unknown};f.process=async function(V){Z=await H();const U=[V.geometryBuffer];return{result:M(Z,V,U),transferList:U}};f.project=async function(V){const {localMatrix:U,origin:F,positions:S,vertexSpace:aa,localMode:ia}=V;var da=q.fromJSON(V.inSpatialReference),J=q.fromJSON(V.outSpatialReference);const [{projectBuffer:N},{initializeProjection:R}]=
await Promise.all([new Promise((m,L)=>b(["../../../geometry/projection/projectBuffer"],m,L)),new Promise((m,L)=>b(["../../../geometry/projection"],m,L))]);await R(da,J);V=[0,0,0];if(!N(F,da,0,V,J,0,1))throw Error("Failed to project");if("georeferenced"===aa.type&&null==aa.origin){var ca=new Float64Array(S.length);if(!N(S,da,0,ca,J,0,ca.length/3))throw Error("Failed to project");}else{ca="georeferenced"===aa.type?t.fromJSON(aa):l.fromJSON(aa);const {project:m}=await new Promise((L,ba)=>b(["../../../geometry/support/meshUtils/projection"],
L,ba));da=m({positions:S,transform:U?{localMatrix:U}:void 0,vertexSpace:ca,inSpatialReference:da,outSpatialReference:J,localMode:ia});if(!da)throw Error("Failed to project");ca=u.toFloat64Array(da)}da=ca.length;const [oa,la,k]=V;for(J=0;J<da;J+=3)ca[J]-=oa,ca[J+1]-=la,ca[J+2]-=k;return{result:{projected:ca,original:S,projectedOrigin:V},transferList:[ca.buffer,S.buffer]}};f.setLegacySchema=async function(V){Z=await H();Z.setLegacySchema(V.context,V.jsonSchema)};f.setModifications=async function(V){await H();
x(V)};f.setModificationsSync=x;f.test=fa;f.transformNormals=async function({normalMatrix:V,normals:U}){const F=new Float32Array(U.length);n.transformMat3(F,U,V);p.hasScaling(V)&&n.normalize(F,F);return{result:{transformed:F,original:U},transferList:[F.buffer,U.buffer]}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});