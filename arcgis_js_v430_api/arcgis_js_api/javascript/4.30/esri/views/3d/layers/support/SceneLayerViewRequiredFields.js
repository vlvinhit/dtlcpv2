// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/AsyncUpdate ../../../../core/Logger ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/RandomLCG ../../../../core/accessorSupport/decorators/subclass ../../../../layers/support/fieldUtils".split(" "),function(c,d,h,k,l,f,q,r,m,g){c.SceneLayerViewRequiredFields=class extends k.AsyncUpdateMixin(h){get layer(){return this.layerView.layer}get requiredFields(){const {layerView:{layer:{fieldsIndex:a},
definitionExpressionFields:b},rendererFields:e,labelingFields:n,viewFilterFields:p}=this;return g.fixFields(a,[...(b??[]),...(e??[]),...(n??[]),...(p??[])])}constructor(a){super(a)}initialize(){this.addHandles([this.autoUpdateAsync("rendererFields",async()=>{const {fieldsIndex:a,renderer:b}=this.layer;return b?this._getFieldsAsync(e=>b.collectRequiredFields(e,a)):null}),this.autoUpdateAsync("labelingFields",async()=>{const {layer:a}=this;return a.labelsVisible?this._getFieldsAsync(b=>g.collectLabelingFields(b,
a)):null}),this.autoUpdateAsync("viewFilterFields",()=>{const {layer:a,mergedFilter:b}=this.layerView;return this._getFieldsAsync(e=>g.collectFilterFields(e,a,b))})])}async _getFieldsAsync(a){const b=new Set;try{return await a(b),Array.from(b).sort()}catch(e){return l.getLogger(this).error(e),null}}};d.__decorate([f.property()],c.SceneLayerViewRequiredFields.prototype,"layerView",void 0);d.__decorate([f.property()],c.SceneLayerViewRequiredFields.prototype,"layer",null);d.__decorate([f.property()],
c.SceneLayerViewRequiredFields.prototype,"requiredFields",null);d.__decorate([f.property()],c.SceneLayerViewRequiredFields.prototype,"rendererFields",void 0);d.__decorate([f.property()],c.SceneLayerViewRequiredFields.prototype,"labelingFields",void 0);d.__decorate([f.property()],c.SceneLayerViewRequiredFields.prototype,"viewFilterFields",void 0);c.SceneLayerViewRequiredFields=d.__decorate([m.subclass("esri.views.3d.layers.support.SceneLayerViewRequiredFields")],c.SceneLayerViewRequiredFields);Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})});