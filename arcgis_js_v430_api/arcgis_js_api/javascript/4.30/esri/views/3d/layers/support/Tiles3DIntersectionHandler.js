// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../../Graphic ../i3s/Intersector ../../webgl-engine/lib/Intersector ../../webgl-engine/lib/IntersectorInterfaces ../../webgl-engine/lib/RayIntersections".split(" "),function(h,n,p,q,k,r){class t{constructor(a){this.layerUid=[];this.type=k.IntersectorType.TILES3D;this.slicePlaneEnabled=!1;this.isGround=!0;this.layerView=a;this.layerUid.push(a.layer.uid)}intersect(a,e,l,m,B,u){const b=a.results,v=a.options.store===k.StoreResults.ALL;if(!a.options.filteredLayerUids.includes(this.layerView.layer.uid)){var w=
this.layerView.view._stage.renderView.componentObjectCollection,x=new r.MeshIntersectionOptions(u??!1,a.options.normalRequired);this.layerView.objects.forEach(f=>{f.visible&&f.intersectionGeometry&&w.intersect(f,l,m,a.tolerance,null,x,(d,c,y,g)=>{0<=c&&(null==e||e(l,m,c))&&(d=z=>{const A=new p.Tiles3DTarget(this.layerView.layer.uid,()=>this._createTiles3DGraphic(this.layerView.layer,{}));z.set(this.type,A,c,y)},this.isGround&&(null==b.ground.dist||c<b.ground.dist)&&d(b.ground),a.options.isFiltered||
((null==b.min.dist||c<b.min.dist)&&d(b.min),(null==b.max.dist||c>b.max.dist)&&d(b.max),v&&(g=q.newIntersectorResult(a.ray),d(g),a.results.all.push(g))))})})}}_createTiles3DGraphic(a,e){return new n({layer:a,sourceLayer:a,attributes:e})}}h.Tiles3DIntersectionHandler=t;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});