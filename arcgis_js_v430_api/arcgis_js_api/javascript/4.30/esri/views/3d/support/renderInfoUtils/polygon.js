// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../../geometry/projection/projectBuffer ../../../../geometry/support/DoubleArray ../../../../geometry/support/triangulationUtils ../../layers/graphics/elevationAlignmentUtils ../../terrain/OverlayRenderer".split(" "),function(h,x,g,l,y,z){function n(a,d,b=null){return a.filter(({count:e})=>1<e).map(({index:e,count:c})=>{const f=3*e,k=3*c;return null!=b?new p(e,c,g.doubleSubArray(d,f,k),g.doubleSubArray(b,f,k)):new m(e,c,g.doubleSubArray(d,f,k))})}function q(a,d,b=null){const e=
[];for(const {index:c,count:f,holeIndices:k,pathLengths:r}of a){if(1>=f)continue;a=3*c;const A=3*f,t=k.map(B=>B-c);a=null!=b?new u(c,f,g.doubleSubArray(d,3*c,3*f),g.doubleSubArray(b,a,A),t,r):new v(c,f,g.doubleSubArray(d,3*c,3*f),t,r);e.push(a)}return e}class m{constructor(a,d,b){this.index=a;this.count=d;this.position=b}}class p extends m{constructor(a,d,b,e){super(a,d,b);this.mapPositions=e}}class u extends p{constructor(a,d,b,e,c,f){super(a,d,b,e);this.holeIndices=c;this.pathLengths=f}}class v extends m{constructor(a,
d,b,e,c){super(a,d,b);this.holeIndices=e;this.pathLengths=c}}class w{constructor(a,d,b,e,c,f){this.position=a;this.mapPositions=d;this.polygons=b;this.outlines=e;this.projectionSuccess=c;this.sampledElevation=f}}h.PolygonRenderInfo=w;h.PolygonVertexData=u;h.PolygonVertexDataDraped=v;h.geometryToRenderInfo=function(a,d,b,e){const c=l.ringsToTriangulationInfo(a.rings,!!a.hasZ&&"on-the-ground"!==e.mode,l.CounterClockwiseMode.CCW_IS_HOLE,a.spatialReference),f=g.newDoubleArray(c.position.length);a=y.applyPerVertexElevationAlignment(c.position,
a.spatialReference,0,f,0,c.position,0,c.position.length/3,d,b,e);d=null!=a;return new w(c.position,f,q(c.polygons,c.position,f),n(c.outlines,c.position,f),d,a)};h.geometryToRenderInfoDraped=function(a,d){const b=l.ringsToTriangulationInfo(a.rings,!1,l.CounterClockwiseMode.CCW_IS_HOLE);a=x.projectBuffer(b.position,a.spatialReference,0,b.position,d,0,b.position.length/3);for(d=2;d<b.position.length;d+=3)b.position[d]=z.drapedZ;return{position:b.position,polygons:q(b.polygons,b.position),outlines:n(b.outlines,
b.position),projectionSuccess:a}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});