// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/has ../../../../core/Error ../../../../core/Logger ../../../../core/reactiveUtils ../../../../core/accessorSupport/decorators/property ../../../../core/RandomLCG ../../../../core/accessorSupport/decorators/subclass ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../geometry/Point ../../../../geometry/support/aaBoundingRect".split(" "),function(a,c,g,n,p,q,e,d,r,h,k,l,m){a.StableSurfaceCenter=class extends g{get surface(){return this.view.map?.ground}get surfaceView(){return this.view.basemapTerrain}get renderLocation(){if(!this.location)return null;
const b=k.create();this.view.renderCoordsHelper.toRenderCoords(this.location,b);return b}constructor(b){super(b);this._updateController=this.location=null}initialize(){this.view.state.isLocal&&(this.addHandles([e.watch(()=>[this.surfaceView?.spatialReference,this.surfaceView?.extent],()=>this._update()),e.on(()=>this.surface?.layers,"change",()=>this._update())]),this._update())}_update(){this._updateController&&(this._updateController.abort(),this._updateController=null);if(null==this.surfaceView?.extent||
null==this.surfaceView.spatialReference)this._set("location",null);else{var b=m.center(this.surfaceView.extent);b=new l({x:b[0],y:b[1],z:0,spatialReference:this.surfaceView.spatialReference});this.surface&&0<this.surface.layers.length?(this._set("location",null),this._updateController=new AbortController,this.surface.queryElevation(b,{noDataValue:0,signal:this._updateController.signal,cache:this.cache}).then(f=>{this._updateController=null;this._set("location",f.geometry)}).catch(f=>{})):this._set("location",
b)}}};c.__decorate([d.property({constructOnly:!0})],a.StableSurfaceCenter.prototype,"view",void 0);c.__decorate([d.property({constructOnly:!0})],a.StableSurfaceCenter.prototype,"cache",void 0);c.__decorate([d.property()],a.StableSurfaceCenter.prototype,"surface",null);c.__decorate([d.property()],a.StableSurfaceCenter.prototype,"surfaceView",null);c.__decorate([d.property({readOnly:!0})],a.StableSurfaceCenter.prototype,"location",void 0);c.__decorate([d.property({readOnly:!0})],a.StableSurfaceCenter.prototype,
"renderLocation",null);a.StableSurfaceCenter=c.__decorate([h.subclass("esri.views.3d.support.pointsOfInterest.StableSurfaceCenter")],a.StableSurfaceCenter);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});