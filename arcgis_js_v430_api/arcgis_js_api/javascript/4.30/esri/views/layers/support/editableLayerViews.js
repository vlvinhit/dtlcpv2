// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Logger","../../../geometry/support/spatialReferenceUtils","../../../layers/support/infoFor3D","../../ViewingMode"],function(h,e,f,k,m){h.isGeometryEditableSceneLayer=function(a,g){var {associatedLayer:b}=a,c=b?.infoFor3D;if(!c)return!1;const {supportedFormats:l,queryFormats:n}=c;c=k.getMimeTypeFormatId("model/gltf-binary",l)??k.getFilenameFormatId("glb",l);if(null==c||!n.includes(c))return e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??
"Untitled layer"}, ${a.id}) does not support geometry edits because it does not support GLB queries.`),!1;c=a.spatialReference;var d=b.spatialReference;if(!f.equals(c,d))return e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) does not support geometry edits because its spatial reference (wkid:${c.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${d.wkid}).`),!1;b=b.sourceJSON.sourceSpatialReference;
if(null!=b&&!f.equals(b,d))return e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) does not support geometry edits because the spatial reference of its associated FeatureLayer's service (wkid:${d.wkid}) is different from its source spatial reference (wkid:${b.wkid}).`),!1;({view:b}=g);if(g.destroyed||null==b)return!1;g=b.spatialReference;({viewingMode:d}=b.state);b=f.isGeographic(c);d=d===m.ViewingMode.Global;return b&&!d?(e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??
"Untitled layer"}, ${a.id}) does not support geometry edits in local viewing mode because its spatial reference (wkid:${c.wkid}) is geographic. Please consider changing the viewing mode to global.`),!1):!b&&d?(e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) does not support geometry edits in global viewing mode because its spatial reference (wkid:${c.wkid}) is projected. Please consider changing the viewing mode to local.`),
!1):f.equals(c,g)||d&&f.isWebMercator(g)&&f.isWGS84(c)?!0:(e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) does not support geometry edits because its spatial reference (wkid:${c.wkid}) does not match the view spatial reference (wkid:${g.wkid}).`),!1)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});