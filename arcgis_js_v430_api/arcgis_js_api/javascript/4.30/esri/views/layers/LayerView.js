// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Evented ../../core/Identifiable ../../core/Logger ../../core/maybe ../../core/Promise ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/support/UpdatingHandles ../support/layerViewUtils".split(" "),function(c,b,g,h,k,l,m,d,r,t,n,p,f){b=class extends h.IdentifiableMixin(m.EsriPromiseMixin(g.EventedMixin(b))){constructor(a){super(a);this._updatingHandles=
new p.UpdatingHandles;this.parent=this.layer=null}initialize(){this.when().catch(a=>{if("layerview:create-error"!==a.name){const e=this.layer&&this.layer.id||"no id",q=this.layer?.title||"no title";k.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${q}', id: '${e}')`,a)}})}destroy(){this._updatingHandles=l.destroyMaybe(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&
!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(a){this._overrideIfSome("visible",a)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const a=this.view.timeExtent,e=this.layer?.visibilityTimeExtent;return!a||!e||!a.intersection(e).isEmpty}canResume(){const a=this.layer&&
"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&f.validateScaleRange(a)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const a=this.parent?.suspended?this.parent.suspendInfo:{};this.view?.ready||(a.viewNotReady=!0);this.layer&&this.layer.loaded||(a.layerNotLoaded=!0);f.validateScaleRange(this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:
null)&&this.visibleAtCurrentScale||(a.outsideScaleRange=!0);this.visibleAtCurrentTimeExtent||(a.outsideVisibilityTimeExtent=!0);this.visible||(a.layerInvisible=!0);return a}isUpdating(){return!1}};c.__decorate([d.property()],b.prototype,"view",void 0);c.__decorate([d.property()],b.prototype,"fullOpacity",null);c.__decorate([d.property()],b.prototype,"layer",void 0);c.__decorate([d.property()],b.prototype,"parent",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"suspended",null);c.__decorate([d.property({readOnly:!0})],
b.prototype,"suspendInfo",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"legendEnabled",null);c.__decorate([d.property({type:Boolean,readOnly:!0})],b.prototype,"updating",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"updatingProgress",null);c.__decorate([d.property()],b.prototype,"updateSuspended",null);c.__decorate([d.property()],b.prototype,"visible",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"visibleAtCurrentScale",null);c.__decorate([d.property({readOnly:!0})],
b.prototype,"visibleAtCurrentTimeExtent",null);return b=c.__decorate([n.subclass("esri.views.layers.LayerView")],b)});