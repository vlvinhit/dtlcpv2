// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/libs/gl-matrix-2/factories/vec3f64","../../../layers/graphics/dehydratedPoint","../../../support/elevationInfoUtils"],function(e,p,m,h){function n(a=0,b=0,c=0){return p.fromValues(a,b,c)}function q(a,b,c,d=n()){d[0]=a.x;d[1]=a.y;d[2]=a.z??0;if(null==b)return d;d[2]="2d"===b.type?0:h.getConvertedElevation(b,a,c,h.absoluteHeightElevationInfo)??0;return d}var k;(function(a){a[a.NONE=0]="NONE";a[a.TARGET=1]="TARGET"})(k||={});const u=m.makeDehydratedPoint(0,0,0,null);
e.asVec2=function(a){return a};e.clone=function(a){const [b,c,d]=a;return 3<a.length?[b,c,d,a[3]]:[b,c,d]};e.create=function(a,b,c){return n(a,b,c)};e.createWritable=n;e.fromAnyMapPoint=function(a,b,{coordinateHelper:c,elevationInfo:d},f){return a?q(c.vectorToDehydratedPoint(a,u),b,d,f):null};e.fromPoint=q;e.fromValues=function(a,b,c){return p.fromValues(a,b,c)};e.fromVec3=function(a){return a};e.isTarget=function(a){return!!(((3<a.length?a[3]:void 0)??k.NONE)&k.TARGET)};e.markAsTarget=function(a){a[3]=
((3<a.length?a[3]:void 0)??k.NONE)|k.TARGET;return a};e.toDehydratedPoint=function(a,b,c){return c?(m.setDehydratedPoint(c,a[0],a[1],a[2],b),c):m.makeDehydratedPoint(a[0],a[1],a[2],b)};e.toElevationAlignedDehydratedPoint=function(a,b,{z:c,m:d},f,g){const {spatialReference:l,elevationInfo:v}=f;b=null==c&&null==d?void 0:null==b||"2d"===b.type?c??void 0:h.getConvertedElevationFromVector(b,a,l,h.absoluteHeightElevationInfo,v)??0;const [r,t]=a;g?m.setDehydratedPoint(g,r,t,b,l):g=m.makeDehydratedPoint(r,
t,b,l);null!=d&&(g.m=d,g.hasM=!0);return g};e.withSelfSnappingZ=function(a,b,c,d,f=n()){const [g,l]=a;f[0]=g;f[1]=l;3<a.length&&(f[3]=a[3]??k.NONE);if("3d"!==c?.type)return f[2]=b.value,f;f[2]=h.getConvertedElevationFromXYZ(c,g,l,b.value,d,b.elevationInfo,h.absoluteHeightElevationInfo)??0;return f};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});