// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/arrayUtils ../../../core/Collection ../../../core/Logger ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),function(b,a,q,k,r,c,z,t,l,m){function n(d){return"subtype-group"===d.layer.type}function u(d){return"subtype-group"!==d.layer.type}function v(d){return"subtype-sublayer"===d.layer.type}a=class extends a{constructor(d){super(d);
this.forceDisabled=this.enabledToggled=this.enabled=!1;this.featureEnabled=this.selfEnabled=!0;this.attributeRulesEnabled=!1;this.featureSources=new k;this.distance=m.defaults.distance;this.touchSensitivityMultiplier=m.defaults.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){var d=
this.featureSources;d.some(n)&&r.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const p=d.filter(v),h=this._get("_effectiveFeatureSources")?.filter(n)??new k;for(const e of p){var f=h.find(w=>w.layer===e.layer.parent);f?f.sublayerSources.includes(e)||f.sublayerSources.add(e):e.layer.parent&&(f=new l({layer:e.layer.parent}),f.sublayerSources.add(e),h.add(f))}for(var g of h)f=
g.sublayerSources.filter(e=>!p.includes(e)),g.sublayerSources.removeMany(f);h.removeMany(h.filter(e=>0===e.sublayerSources.length));d=d.filter(u);g=this._get("_effectiveFeatureSources")??new k;const {added:x,removed:y}=q.difference(g.toArray(),[...d,...h]);g.removeMany(y);g.addMany(x);return g}};b.__decorate([c.property()],a.prototype,"enabled",void 0);b.__decorate([c.property()],a.prototype,"enabledToggled",void 0);b.__decorate([c.property()],a.prototype,"forceDisabled",void 0);b.__decorate([c.property()],
a.prototype,"selfEnabled",void 0);b.__decorate([c.property()],a.prototype,"featureEnabled",void 0);b.__decorate([c.property()],a.prototype,"attributeRulesEnabled",void 0);b.__decorate([c.property({type:k.ofType(l)})],a.prototype,"featureSources",void 0);b.__decorate([c.property()],a.prototype,"distance",void 0);b.__decorate([c.property()],a.prototype,"touchSensitivityMultiplier",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveEnabled",null);b.__decorate([c.property({readOnly:!0})],
a.prototype,"effectiveSelfEnabled",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveFeatureEnabled",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"_effectiveFeatureSources",null);return a=b.__decorate([t.subclass("esri.views.interactive.snapping.SnappingOptions")],a)});