// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../Color ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../views/support/layerViewUtils".split(" "),function(f,p,q,m,r,t){function n(b){return b&&"blendMode"in b&&"effect"in b}f.createMultipointLayer=function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}};f.createPointLayer=function(){return{layerDefinition:{name:"pointLayer",
geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}};f.createPolygonLayer=function(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}};f.createPolylineLayer=function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",
features:[]}}};f.getContextBoundingBox=function(b,d=15){const c=b.canvas.width;var a=b.canvas.height;b=b.getImageData(0,0,c,a).data;let e,h,l,k,g;e=a;a:for(;e--;)for(a=c;a--;)if(b[4*(c*e+a)+3]>d){g=e;break a}if(!g)return null;a=c;a:for(;a--;)for(e=g+1;e--;)if(b[4*(c*e+a)+3]>d){k=a;break a}a=0;a:for(;a<=k;++a)for(e=g+1;e--;)if(b[4*(c*e+a)+3]>d){h=a;break a}e=0;a:for(;e<=g;++e)for(a=h;a<=k;++a)if(b[4*(c*e+a)+3]>d){l=e;break a}return{x:h,y:l,width:k-h,height:g-l}};f.getSelectionSymbol=function(b,d){const c=
d.color?.clone()??new p([0,255,255]),a=d.haloColor?.clone()??c.clone();switch(b){case "envelope":case "polygon":return c.a*=d.fillOpacity??.25,new q({color:c,outline:new m({color:a}),style:"solid"});case "polyline":return new m({color:a});default:return a.a=1,new r({color:a,outline:null})}};f.getVisibleLayerViews=function(b,d){var c=b.allLayerViews.items;if(d===b.scale)return c.filter(a=>!a.suspended);b=[];for(const a of c)c=a.parent,(!c||c===a.view||"catalog"!==c.layer.type&&"group"!==c.layer.type||
b.includes(c))&&a.visible&&a.visibleAtCurrentTimeExtent&&t.isInEffectiveScaleRange(a.layer.effectiveScaleRange,d)&&b.push(a);return b};f.isBingMapsLayer=function(b){return"bing-maps"===b?.type};f.isBlendLayer=n;f.isCSVLayer=function(b){return"csv"===b?.type};f.isScreenshotRequired=function(b){const d=b.layer;if(n(d)){const c=d.blendMode;if((!c||"normal"===c)&&(d.effect||"featureEffect"in b&&b.featureEffect))return!0}return!1};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});