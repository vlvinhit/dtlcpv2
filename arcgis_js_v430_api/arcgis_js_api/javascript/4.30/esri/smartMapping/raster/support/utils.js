// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Error","../../../renderers/support/rasterRendererHelper","./adapters/ImageryLayerAdapter","./adapters/ImageryTileLayerAdapter"],function(d,l,e,n,m){function f(a){if("raster-layer-adapter"===a.type)return a;const b=g[a.type]?.adapter;return null==b?null:new b({layer:a})}async function h(a){var {layer:b}=a;if(!b)throw new l("raster-renderer-creator:missing-parameters","'layer' parameter is required");const c=f(b);if(null==c)throw new l("raster-renderer-creator:invalid-parameters",
"'layer' must be one of these types: "+p.join(", "));await c.load();b=a.rasterFunction??a.renderingRule??b.rasterFunction;await c.updateRasterInfo({rasterFunction:b,signal:a.signal});return{...a,layer:c,rasterFunction:b}}const g={imagery:{adapter:n,label:"ImageryLayer"},"imagery-tile":{adapter:m,label:"ImageryTileLayer"},wcs:{adapter:m,label:"WCSLayer"}},q={"raster-stretch":"raster-stretch","unique-value":"raster-unique-value","raster-rgb":"raster-rgb","class-breaks":"raster-class-breaks","raster-colormap":"raster-colormap",
"raster-shaded-relief":"raster-shaded-relief","vector-field":"raster-vector-field",flow:"raster-flow"},p=Object.keys(g).map(a=>g[a].label);d.createRasterLayerAdapter=f;d.getDefaultBandCombination=async function(a){a=await h(a);a=await f(a.layer).generateRasterInfo(a);return e.getDefaultBandCombination(a)};d.getSupportedRendererInfo=async function(a){a=await h(a);const b=f(a.layer);var c=await b.generateRasterInfo(a);a=e.getSupportedRendererTypes(c,!0).map(r=>q[r]);var k="imagery-tile"===b.layer.type?
e.getFunctionColorramp(b.layer.raster):void 0;k=e.createDefaultRenderer(c,{rasterFunctionColorRamp:k});({bandCount:c}=c);1<c&&a.push("raster-rgb");!a.includes("raster-class-breaks")&&1===c&&10.3<=+b.layer?.version&&a.push("raster-class-breaks");return{supportedTypes:a,defaultRenderer:k}};d.processRasterRendererParameters=h;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});