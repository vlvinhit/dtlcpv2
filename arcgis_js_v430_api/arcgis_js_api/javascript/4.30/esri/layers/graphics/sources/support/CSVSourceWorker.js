// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/date":function(){define(["exports"],function(c){function g(e){const q=new Date(e);if(Number.isNaN(q.getTime()))e=!1;else{var d=!0;if(C&&/\d+\W*$/.test(e)&&(e=e.match(/[a-zA-Z]{2,}/))){d=!1;let v=0;for(;!d&&v<=e.length;)d=!F.test(e[v]),v++;d=!d}e=d}return e?Number.isNaN(q.getTime())?null:q.getTime()-6E4*q.getTimezoneOffset():null}function A(e){e=x.exec(e);if(!e?.groups)return null;e=e.groups;const q=+e.year,d=+e.month-1,v=+e.day,t=+(e.hours??0),z=+(e.minutes??0),H=+(e.seconds??
0);if(23<t||59<z||59<H)return null;var r=e.ms??"0";r=r?+r.padEnd(3,"0").substring(0,3):0;e=e.isUTC||!e.offsetSign?Date.UTC(q,d,v,t,z,H,r):6E4*("+"===e.offsetSign?-1:1)*(60*+e.offsetHours+ +e.offsetMinutes)+Date.UTC(q,d,v,t,z,H,r);return Number.isNaN(e)?null:e}const x=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,F=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
C=!Number.isNaN((new Date("technology 10")).getTime());c.isDateString=function(e){return null!=A(e)||null!=g(e)};c.isISO8601Date=function(e){return x.test(e)};c.parseDate=function(e){return A(e)??g(e)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(c){class g{constructor(e,q,d){this.x=e;this.y=q;this.spatialReference=d;this.m=this.z=void 0}}class A{constructor(e,q,d,v){this.rings=e;this.spatialReference=
q;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);v&&(this.hasM=v)}}class x{constructor(e,q,d,v){this.paths=e;this.spatialReference=q;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);v&&(this.hasM=v)}}class F{constructor(e,q,d,v){this.points=e;this.spatialReference=q;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);v&&(this.hasM=v)}}class C{constructor(e,q,d,v,t){this.xmin=e;this.ymin=q;this.xmax=d;this.ymax=v;this.spatialReference=t;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}c.jsonAdapter={convertToGEGeometry:function(e,
q){return null==q?null:e.convertJSONToGeometry(q)},exportPoint:function(e,q,d){d=new g(e.getPointX(q),e.getPointY(q),d);const v=e.hasZ(q),t=e.hasM(q);v&&(d.z=e.getPointZ(q));t&&(d.m=e.getPointM(q));return d},exportPolygon:function(e,q,d){return new A(e.exportPaths(q),d,e.hasZ(q),e.hasM(q))},exportPolyline:function(e,q,d){return new x(e.exportPaths(q),d,e.hasZ(q),e.hasM(q))},exportMultipoint:function(e,q,d){return new F(e.exportPoints(q),d,e.hasZ(q),e.hasM(q))},exportExtent:function(e,q,d){var v=e.hasZ(q);
const t=e.hasM(q);d=new C(e.getXMin(q),e.getYMin(q),e.getXMax(q),e.getYMax(q),d);v&&(v=e.getZExtent(q),d.zmin=v.vmin,d.zmax=v.vmax);t&&(e=e.getMExtent(q),d.mmin=e.vmin,d.mmax=e.vmax);return d}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","./OptimizedGeometry"],function(c,g){class A{constructor(F=null,C={},e,q){this.geometry=F;this.attributes=C;this.centroid=e;this.objectId=q;this.geohashY=this.geohashX=this.displayId=
0}static fromJSON(F,C){const e=F.geometry?g.fromJSON(F.geometry):null,q=F.centroid?g.fromJSON(F.centroid):null;return new A(e,F.attributes,q,F.attributes[C])}weakClone(){const F=new A(this.geometry,this.attributes,this.centroid,this.objectId);F.displayId=this.displayId;F.geohashX=this.geohashX;F.geohashY=this.geohashY;return F}clone(){var F=this.geometry?.clone();F=new A(F,{...this.attributes},this.centroid?.clone(),this.objectId);F.displayId=this.displayId;F.geohashX=this.geohashX;F.geohashY=this.geohashY;
return F}}class x extends A{}c.OptimizedFeature=A;c.OptimizedFeatureWithGeometry=x;c.hasGeometry=function(F){return!!F.geometry?.coords?.length};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class c{constructor(g=[],A=[],x=!1){this.lengths=g??[];this.coords=A??[];this.hasIndeterminateRingOrder=x}static fromJSON(g){return new c(g.lengths,g.coords,g.hasIndeterminateRingOrder)}static fromRect(g){const [A,x,F,C]=g;
g=F-A;const e=C-x;return new c([5],[A,x,g,0,0,e,-g,0,0,-e])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((g,A)=>g+A)}forEachVertex(g){let A=0;this.lengths.length||g(this.coords[0],this.coords[1]);for(let x=0;x<this.lengths.length;x++){const F=this.lengths[x];for(let C=0;C<F;C++)g(this.coords[2*(C+A)],this.coords[2*(C+A)+1]);A+=F}}deltaDecode(){const g=this.clone(),{coords:A,lengths:x}=g;let F=0;for(const C of x){for(let e=
1;e<C;e++)A[2*(F+e)]+=A[2*(F+e)-2],A[2*(F+e)+1]+=A[2*(F+e)-1];F+=C}return g}clone(g){if(0===this.lengths.length)return new c([],[this.coords[0],this.coords[1]]);var A=2*(0===this.lengths.length?1:this.lengths.reduce((x,F)=>x+F));A=this.coords.slice(0,A);return g?(g.set(A),new c(this.lengths,g,this.hasIndeterminateRingOrder)):new c(Array.from(this.lengths),Array.from(A),this.hasIndeterminateRingOrder)}}return c})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../core/arrayUtils ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./geometryUtils ./optimizedFeatureQueryEngineAdapter".split(" "),
function(c,g,A,x,F,C,e,q,d,v){const t=F.create();class z{constructor(H){this.geometryInfo=H;this._boundsStore=new q.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new A;this.featureAdapter=v.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let H=
0;this._featuresById.forEach(r=>{null!=r.geometry&&r.geometry.coords&&(H+=r.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:H/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(H){if(null==this.fullBounds)return null;const [r,p,a,u]=this.fullBounds;return{xmin:r,ymin:p,xmax:a,ymax:u,spatialReference:d.cleanFromGeometryEngine(H)}}add(H){this._add(H);this._emitChanged()}addMany(H){for(const r of H)this._add(r);this._emitChanged()}upsertMany(H){H=H.map(r=>this._upsert(r));
this._emitChanged();return H.filter(c.isSome)}clear(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()}removeById(H){H=this._featuresById.get(H);if(!H)return null;this._remove(H);this._emitChanged();return H}removeManyById(H){this._boundsStore.invalidateIndex();for(const r of H)(H=this._featuresById.get(r))&&this._remove(H);this._emitChanged()}forEachBounds(H,r){for(const p of H)(H=this._boundsStore.get(p.objectId))&&r(F.fromRect(t,H))}getFeature(H){return this._featuresById.get(H)}has(H){return this._featuresById.has(H)}forEach(H){this._featuresById.forEach(r=>
H(r))}forEachInBounds(H,r){this._boundsStore.forEachInBounds(H,p=>{r(this._featuresById.get(p))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex();this._markedIds.clear()}sweep(){let H=!1;this._featuresById.forEach((r,p)=>{this._markedIds.has(p)||(H=!0,this._remove(r))});this._markedIds.clear();H&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(H){if(H){var r=H.objectId;if(null==r)x.getLogger("esri.layers.graphics.data.FeatureStore").error(new g("featurestore:invalid-feature",
"feature id is missing",{feature:H}));else{var p=this._featuresById.get(r);this._markedIds.add(r);if(p){H.displayId=p.displayId;var a=this._boundsStore.get(r);this._boundsStore.delete(r)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(H);H.geometry?.coords?.length?(a=e.getBoundsOptimizedGeometry(null!=a?a:C.create(),H.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=a&&this._boundsStore.set(r,a)):this._boundsStore.set(r,null);this._featuresById.set(r,H)}}}_upsert(H){const r=H?.objectId;
if(null==r)return x.getLogger("esri.layers.graphics.data.FeatureStore").error(new g("featurestore:invalid-feature","feature id is missing",{feature:H})),null;const p=this._featuresById.get(r);if(!p)return this._add(H),H;this._markedIds.add(r);const {geometry:a,attributes:u}=H;for(const n in u)p.attributes[n]=u[n];a&&(p.geometry=a,this._boundsStore.set(r,e.getBoundsOptimizedGeometry(C.create(),a,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null));return p}_remove(H){if(null!=this.onFeatureRemove)this.onFeatureRemove(H);
const r=H.objectId;this._markedIds.delete(r);this._boundsStore.delete(r);this._featuresById.delete(r);return H}}return z})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],function(c,g,A){function x(p=H){return[p[0],p[1],p[2],p[3],p[4],p[5]]}function F(p,a,u,n,D,L,f=x()){f[0]=p;f[1]=a;f[2]=u;f[3]=n;f[4]=D;f[5]=L;return f}function C(p){return p[0]>=p[3]?0:p[3]-p[0]}function e(p){return p[1]>=p[4]?0:p[4]-p[1]}function q(p){return p[2]>=p[5]?0:p[5]-
p[2]}function d(p,a){return Math.max(a[0],p[0])<=Math.min(a[3],p[3])&&Math.max(a[1],p[1])<=Math.min(a[4],p[4])&&Math.max(a[2],p[2])<=Math.min(a[5],p[5])}function v(p,a){p[0]=a[0];p[1]=a[1];p[2]=a[2];p[3]=a[3];p[4]=a[4];p[5]=a[5];return p}function t(p){return 6===p.length}const z=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],H=[0,0,0,0,0,0],r=x();c.allFinite=function(p){for(let a=0;6>a;a++)if(!isFinite(p[a]))return!1;return!0};c.center=function(p,a=[0,0,0]){a[0]=p[0]+C(p)/2;a[1]=p[1]+
e(p)/2;a[2]=p[2]+q(p)/2;return a};c.contains=function(p,a){return a[0]>=p[0]&&a[1]>=p[1]&&a[2]>=p[2]&&a[3]<=p[3]&&a[4]<=p[4]&&a[5]<=p[5]};c.containsPoint=function(p,a){return a[0]>=p[0]&&a[1]>=p[1]&&a[2]>=p[2]&&a[0]<=p[3]&&a[1]<=p[4]&&a[2]<=p[5]};c.containsPointWithMargin=function(p,a,u){return a[0]>=p[0]-u&&a[1]>=p[1]-u&&a[2]>=p[2]-u&&a[0]<=p[3]+u&&a[1]<=p[4]+u&&a[2]<=p[5]+u};c.create=x;c.depth=e;c.diameter=function(p){const a=C(p),u=q(p);p=e(p);return Math.sqrt(a*a+u*u+p*p)};c.empty=function(p){return p?
v(p,z):x(z)};c.equals=function(p,a,u){if(null==p||null==a)return p===a;if(!t(p)||!t(a))return!1;if(u)for(let n=0;n<p.length;n++){if(!u(p[n],a[n]))return!1}else for(u=0;u<p.length;u++)if(p[u]!==a[u])return!1;return!0};c.expandWithAABB=function(p,a){p[0]=Math.min(p[0],a[0]);p[1]=Math.min(p[1],a[1]);p[2]=Math.min(p[2],a[2]);p[3]=Math.max(p[3],a[3]);p[4]=Math.max(p[4],a[4]);p[5]=Math.max(p[5],a[5])};c.expandWithBuffer=function(p,a,u=0,n=a.length/3){let D=p[0],L=p[1],f=p[2],K=p[3],Q=p[4],T=p[5];for(let Z=
0;Z<n;Z++)D=Math.min(D,a[u+3*Z]),L=Math.min(L,a[u+3*Z+1]),f=Math.min(f,a[u+3*Z+2]),K=Math.max(K,a[u+3*Z]),Q=Math.max(Q,a[u+3*Z+1]),T=Math.max(T,a[u+3*Z+2]);p[0]=D;p[1]=L;p[2]=f;p[3]=K;p[4]=Q;p[5]=T};c.expandWithNestedArray=function(p,a,u){const n=a.length;let D=p[0],L=p[1],f=p[2],K=p[3],Q=p[4],T=p[5];if(u)for(u=0;u<n;u++){var Z=a[u];D=Math.min(D,Z[0]);L=Math.min(L,Z[1]);f=Math.min(f,Z[2]);K=Math.max(K,Z[0]);Q=Math.max(Q,Z[1]);T=Math.max(T,Z[2])}else for(u=0;u<n;u++)Z=a[u],D=Math.min(D,Z[0]),L=Math.min(L,
Z[1]),K=Math.max(K,Z[0]),Q=Math.max(Q,Z[1]);p[0]=D;p[1]=L;p[2]=f;p[3]=K;p[4]=Q;p[5]=T};c.expandWithOffset=function(p,a,u,n){p[0]=Math.min(p[0],p[0]+a);p[3]=Math.max(p[3],p[3]+a);p[1]=Math.min(p[1],p[1]+u);p[4]=Math.max(p[4],p[4]+u);p[2]=Math.min(p[2],p[2]+n);p[5]=Math.max(p[5],p[5]+n)};c.expandWithRect=function(p,a){p[0]=Math.min(p[0],a[0]);p[1]=Math.min(p[1],a[1]);p[3]=Math.max(p[3],a[2]);p[4]=Math.max(p[4],a[3])};c.expandWithVec3=function(p,a){p[0]=Math.min(p[0],a[0]);p[1]=Math.min(p[1],a[1]);p[2]=
Math.min(p[2],a[2]);p[3]=Math.max(p[3],a[0]);p[4]=Math.max(p[4],a[1]);p[5]=Math.max(p[5],a[2])};c.fromExtent=function(p,a=x()){a[0]=p.xmin;a[1]=p.ymin;a[2]=p.hasZ?p.zmin:-Infinity;a[3]=p.xmax;a[4]=p.ymax;a[5]=p.hasZ?p.zmax:Infinity;return a};c.fromMinMax=function(p,a,u=x()){u[0]=p[0];u[1]=p[1];u[2]=p[2];u[3]=a[0];u[4]=a[1];u[5]=a[2];return u};c.fromRect=function(p,a){p[0]=a[0];p[1]=a[1];p[2]=Number.NEGATIVE_INFINITY;p[3]=a[2];p[4]=a[3];p[5]=Number.POSITIVE_INFINITY;return p};c.fromRectValues=function(p,
a,u,n,D){p[0]=a;p[1]=u;p[2]=Number.NEGATIVE_INFINITY;p[3]=n;p[4]=D;p[5]=Number.POSITIVE_INFINITY;return p};c.fromValues=F;c.getMax=function(p,a){a[0]=p[3];a[1]=p[4];a[2]=p[5];return a};c.getMin=function(p,a){a[0]=p[0];a[1]=p[1];a[2]=p[2];return a};c.height=q;c.intersects=d;c.intersectsClippingArea=function(p,a){return null==a?!0:d(p,a)};c.is=t;c.isPoint=function(p){return 0===C(p)&&0===e(p)&&0===q(p)};c.maximumDimension=function(p){return Math.max(C(p),q(p),e(p))};c.negativeInfinity=z;c.offset=function(p,
a,u,n,D=p){D[0]=p[0]+a;D[1]=p[1]+u;D[2]=p[2]+n;D[3]=p[3]+a;D[4]=p[4]+u;D[5]=p[5]+n;return D};c.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];c.scale=function(p,a,u=p){const n=p[0]+C(p)/2,D=p[1]+e(p)/2,L=p[2]+q(p)/2;u[0]=n+(p[0]-n)*a;u[1]=D+(p[1]-D)*a;u[2]=L+(p[2]-L)*a;u[3]=n+(p[3]-n)*a;u[4]=D+(p[4]-D)*a;u[5]=L+(p[5]-L)*a;return u};c.set=v;c.setMax=function(p,a,u=p){u[3]=a[0];u[4]=a[1];u[5]=a[2];u!==p&&(u[0]=p[0],u[1]=p[1],u[2]=p[2]);return p};c.setMin=function(p,a,u=
p){u[0]=a[0];u[1]=a[1];u[2]=a[2];u!==p&&(u[3]=p[3],u[4]=p[4],u[5]=p[5]);return u};c.size=function(p,a=[0,0,0]){a[0]=C(p);a[1]=e(p);a[2]=q(p);return a};c.toExtent=function(p,a){return isFinite(p[2])||isFinite(p[5])?new g({xmin:p[0],xmax:p[3],ymin:p[1],ymax:p[4],zmin:p[2],zmax:p[5],spatialReference:a}):new g({xmin:p[0],xmax:p[3],ymin:p[1],ymax:p[4],spatialReference:a})};c.toRect=function(p,a){a||=A.create();a[0]=p[0];a[1]=p[1];a[2]=p[3];a[3]=p[4];return a};c.width=C;c.wrap=function(p,a,u,n,D,L){return F(p,
a,u,n,D,L,r)};c.zero=H;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(c,g,A,x,F,C,e,q,d,v){function t(B,J){return B?J?4:3:J?3:2}function z(B,J,N,V){if(B){if(N)return J&&
V?E:Oa;if(J&&V)return l}else if(J&&V)return Oa;return Ta}function H({scale:B,translate:J},N){return Math.round((N-J[0])/B[0])}function r({scale:B,translate:J},N){return Math.round((J[1]-N)/B[1])}function p({scale:B,translate:J},N,V){return N*B[V]+J[V]}function a(B){B=B.coords;return{x:B[0],y:B[1]}}function u(B,J){B.coords[0]=J.x;B.coords[1]=J.y;return B}function n(B){B=B.coords;return{x:B[0],y:B[1],z:B[2]}}function D(B,J){B.coords[0]=J.x;B.coords[1]=J.y;B.coords[2]=J.z;return B}function L(B){B=B.coords;
return{x:B[0],y:B[1],m:B[2]}}function f(B,J){B.coords[0]=J.x;B.coords[1]=J.y;B.coords[2]=J.m;return B}function K(B){B=B.coords;return{x:B[0],y:B[1],z:B[2],m:B[3]}}function Q(B,J){B.coords[0]=J.x;B.coords[1]=J.y;B.coords[2]=J.z;B.coords[3]=J.m;return B}function T(B,J){return B&&J?Q:B?D:J?f:u}function Z(B,J,N,V,aa){N=T(N,V);for(const {geometry:ca,attributes:fa}of J)J=null!=ca?N(new v,ca):null,B.push(new q.OptimizedFeature(J,fa,null,aa?fa[aa]:void 0));return B}function W(B,J,N=T(null!=J.z,null!=J.m)){return N(B,
J)}function U(B,J,N,V){for(const {geometry:aa,attributes:ca}of J)B.push({attributes:ca,geometry:null!=aa?w(aa,N,V):null});return B}function w(B,J,N){if(null==B)return null;const V=t(J,N),aa=[];for(let ca=0;ca<B.coords.length;ca+=V){const fa=[];for(let la=0;la<V;la++)fa.push(B.coords[ca+la]);aa.push(fa)}return J?N?{points:aa,hasZ:J,hasM:N}:{points:aa,hasZ:J}:N?{points:aa,hasM:N}:{points:aa}}function I(B,J,N,V,aa){N=t(N,V);for(const {geometry:ca,attributes:fa}of J)J=null!=ca?h(new v,ca,N):null,B.push(new q.OptimizedFeature(J,
fa,null,aa?fa[aa]:void 0));return B}function h(B,J,N=t(J.hasZ,J.hasM)){B.lengths[0]=J.points.length;const V=B.coords;let aa=0;for(const ca of J.points)for(J=0;J<N;J++)V[aa++]=ca[J];return B}function k(B,J,N){if(!B)return null;const V=t(J,N),{coords:aa,lengths:ca}=B;B=[];let fa=0;for(const la of ca){const na=[];for(let wa=0;wa<la;wa++){const ra=[];for(let ua=0;ua<V;ua++)ra.push(aa[fa++]);na.push(ra)}B.push(na)}return J?N?{paths:B,hasZ:J,hasM:N}:{paths:B,hasZ:J}:N?{paths:B,hasM:N}:{paths:B}}function y(B,
J,N,V,aa){N=t(N,V);for(const {geometry:ca,attributes:fa,centroid:la}of J)J=null!=ca?P(new v,ca,N):null,V=null!=la?W(new v,la):null,B.push(new q.OptimizedFeature(J,fa,V,aa?fa[aa]:void 0));return B}function P(B,J,N=t(J.hasZ,J.hasM)){const {lengths:V,coords:aa}=B;let ca=0;for(const fa of J.paths){for(const la of fa)for(J=0;J<N;J++)aa[ca++]=la[J];V.push(fa.length)}return B}function M(B,J,N){if(!B)return null;const V=t(J,N),{coords:aa,lengths:ca}=B;B=[];let fa=0;for(const la of ca){const na=[];for(let wa=
0;wa<la;wa++){const ra=[];for(let ua=0;ua<V;ua++)ra.push(aa[fa++]);na.push(ra)}B.push(na)}return J?N?{rings:B,hasZ:J,hasM:N}:{rings:B,hasZ:J}:N?{rings:B,hasM:N}:{rings:B}}function S(B,J,N=J.hasZ,V=J.hasM){return Y(B,J.rings,N,V)}function Y(B,J,N,V){N=t(N,V);const {lengths:aa,coords:ca}=B;V=0;Ea(B);for(const fa of J){for(const la of fa)for(J=0;J<N;J++)ca[V++]=la[J];aa.push(fa.length)}return B}function da(B,J,N,V,aa,ca){Da(B);if(!N){for(const fa of J)B.push(new q.OptimizedFeature(null,fa.attributes,
null,ca?fa.attributes[ca]:void 0));return B}switch(N){case "esriGeometryPoint":return Z(B,J,V,aa,ca);case "esriGeometryMultipoint":return I(B,J,V,aa,ca);case "esriGeometryPolyline":return y(B,J,V,aa,ca);case "esriGeometryPolygon":for(const {geometry:fa,centroid:la,attributes:na}of J)J=null!=fa?S(new v,fa,V,aa):null,N=ca?na[ca]:void 0,null!=la?B.push(new q.OptimizedFeature(J,na,u(new v,la),N)):B.push(new q.OptimizedFeature(J,na,null,N));break;default:Pa().error("convertToFeatureSet:unknown-geometry",
new g(`Unable to parse unknown geometry type '${N}'`)),Da(B)}return B}function ha(B,J,N,V){B=B&&("coords"in B?B:B.geometry);if(null==B)return null;switch(J){case "esriGeometryPoint":return J=a,N&&V?J=K:N?J=n:V&&(J=L),J(B);case "esriGeometryMultipoint":return w(B,N,V);case "esriGeometryPolyline":return k(B,N,V);case "esriGeometryPolygon":return M(B,N,V);default:return Pa().error("convertToGeometry:unknown-geometry",new g(`Unable to parse unknown geometry type '${J}'`)),null}}function ma(B,J,N,V,aa){Da(B);
if(null==N){for(const fa of J)B.push({attributes:fa.attributes});return B}switch(N){case "esriGeometryPoint":N=a;V&&aa?N=K:V?N=n:aa&&(N=L);for(var ca of J){const {geometry:fa,attributes:la}=ca;V=null!=fa?N(fa):null;B.push({attributes:la,geometry:V})}break;case "esriGeometryMultipoint":return U(B,J,V,aa);case "esriGeometryPolyline":for(const {geometry:fa,attributes:la}of J)B.push({attributes:la,geometry:null!=fa?k(fa,V,aa):null});break;case "esriGeometryPolygon":for(const {geometry:fa,attributes:la,
centroid:na}of J)ca=null!=fa?M(fa,V,aa):null,null!=na?(J=a(na),B.push({attributes:la,centroid:J,geometry:ca})):B.push({attributes:la,geometry:ca});break;default:Pa().error("convertToFeatureSet:unknown-geometry",new g(`Unable to parse unknown geometry type '${N}'`))}return B}function pa(B,J,N,V,aa,ca,fa=N,la=V){Ea(B);if(!J?.coords.length)return null;aa=Sa[aa];const {coords:na,lengths:wa}=J;J=t(N,V);const ra=t(N&&fa,V&&la);N=z(N,V,fa,la);if(!wa.length)return N(B.coords,na,0,0,H(ca,na[0]),r(ca,na[1])),
Ea(B,J,0),B;let ua,Ca=0,xa,Ba=0;for(const Aa of wa){if(Aa<aa)continue;let ya=0;xa=Ba;la=V=H(ca,na[Ca]);ua=fa=r(ca,na[Ca+1]);N(B.coords,na,xa,Ca,la,ua);ya++;Ca+=J;xa+=ra;for(let Ia=1;Ia<Aa;Ia++,Ca+=J)if(la=H(ca,na[Ca]),ua=r(ca,na[Ca+1]),la!==V||ua!==fa)N(B.coords,na,xa,Ca,la-V,ua-fa),xa+=ra,ya++,V=la,fa=ua;ya>=aa&&(B.lengths.push(ya),Ba=xa)}Da(B.coords,Ba);return B.coords.length?B:null}function sa(B,J,N,V,aa,ca,fa){let la=V,na=0;for(let ra=ca+N;ra<fa;ra+=N){var wa=J[ra];const ua=J[ra+1],Ca=J[fa],xa=
J[fa+1];let Ba=J[ca],Aa=J[ca+1],ya=Ca-Ba,Ia=xa-Aa;if(0!==ya||0!==Ia){const Qa=((wa-Ba)*ya+(ua-Aa)*Ia)/(ya*ya+Ia*Ia);1<Qa?(Ba=Ca,Aa=xa):0<Qa&&(Ba+=ya*Qa,Aa+=Ia*Qa)}ya=wa-Ba;Ia=ua-Aa;wa=ya*ya+Ia*Ia;wa>la&&(na=ra,la=wa)}la>V&&(na-ca>N&&sa(B,J,N,V,aa,ca,na),aa(B,J,B.length,na,J[na],J[na+1]),fa-na>N&&sa(B,J,N,V,aa,na,fa))}function qa(B,J,N,V,aa){const {coords:ca,lengths:fa}=J;N=t(N,V);if(!ca.length)return B!==J&&Ea(B),B;x.assertIsSome(aa);const {originPosition:la,scale:na,translate:wa}=aa;aa=ja;aa.originPosition=
la;V=aa.scale;V[0]=na[0]??1;V[1]=-(na[1]??1);V[2]=na[2]??1;V[3]=na[3]??1;var ra=aa.translate;ra[0]=wa[0]??0;ra[1]=wa[1]??0;ra[2]=wa[2]??0;ra[3]=wa[3]??0;if(!fa.length){for(V=0;V<N;++V)B.coords[V]=p(aa,ca[V],V);B!==J&&Ea(B,N,0);return B}ra=0;for(let Ca=0;Ca<fa.length;Ca++){const xa=fa[Ca];B.lengths[Ca]=xa;for(var ua=0;ua<N;++ua)B.coords[ra+ua]=p(aa,ca[ra+ua],ua);ua=B.coords[ra];let Ba=B.coords[ra+1];ra+=N;for(let Aa=1;Aa<xa;Aa++,ra+=N){ua+=ca[ra]*V[0];Ba+=ca[ra+1]*V[1];B.coords[ra]=ua;B.coords[ra+
1]=Ba;for(let ya=2;ya<N;++ya)B.coords[ra+ya]=p(aa,ca[ra+ya],ya)}}B!==J&&Ea(B,ca.length,fa.length);return B}function va(B,J,N,V){let aa=0,ca=B[V*J],fa=B[V*(J+1)];for(let la=1;la<N;la++){const na=ca+B[V*(J+la)],wa=fa+B[V*(J+la)+1],ra=(na-ca)*(wa+fa);ca=na;fa=wa;aa+=ra}return.5*aa}function Ea(B,J=0,N=0){Da(B.lengths,N);Da(B.coords,J)}function Da(B,J=0){B.length!==J&&(B.length=J)}const Pa=()=>A.getLogger("esri.layers.graphics.featureConversionUtils"),Sa={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,
esriGeometryMultipoint:0,esriGeometryEnvelope:0},Ta=(B,J,N,V,aa,ca)=>{B[N]=aa;B[N+1]=ca},Oa=(B,J,N,V,aa,ca)=>{B[N]=aa;B[N+1]=ca;B[N+2]=J[V+2]},l=(B,J,N,V,aa,ca)=>{B[N]=aa;B[N+1]=ca;B[N+2]=J[V+3]},E=(B,J,N,V,aa,ca)=>{B[N]=aa;B[N+1]=ca;B[N+2]=J[V+2];B[N+3]=J[V+3]},X=[],ba=[],ja={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};c.convertFromFeature=function(B,J,N,V,aa){X[0]=B;[B]=da(ba,X,J,N,V,aa);Da(X);Da(ba);return B};c.convertFromFeatureSet=function(B,J){const N=new d,{hasM:V,hasZ:aa,
features:ca,objectIdFieldName:fa,spatialReference:la,geometryType:na,exceededTransferLimit:wa,transform:ra,fields:ua}=B;ua&&(N.fields=ua);N.geometryType=na??null;N.objectIdFieldName=fa??J??null;N.spatialReference=la??null;if(!N.objectIdFieldName)return Pa().error(new g("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),N;ca&&da(N.features,ca,na,aa,V,N.objectIdFieldName);wa&&(N.exceededTransferLimit=wa);V&&(N.hasM=V);aa&&(N.hasZ=aa);ra&&(N.transform=ra);return N};c.convertFromFeatures=
da;c.convertFromGeometry=function(B,J,N){if(null==B)return null;const V=new v;"hasZ"in B&&null==J&&(J=B.hasZ);"hasM"in B&&null==N&&(N=B.hasM);if(e.isPoint(B))return T(null!=J?J:null!=B.z,null!=N?N:null!=B.m)(V,B);if(e.isPolygon(B))return S(V,B,J,N);if(e.isPolyline(B))return P(V,B,t(J,N));if(e.isMultipoint(B))return h(V,B,t(J,N));Pa().error("convertFromGeometry:unknown-geometry",new g(`Unable to parse unknown geometry type '${B}'`))};c.convertFromMultipoint=h;c.convertFromMultipointFeatures=I;c.convertFromNestedArray=
Y;c.convertFromPoint=W;c.convertFromPointFeatures=Z;c.convertFromPolygon=S;c.convertFromPolyline=P;c.convertFromPolylineFeatures=y;c.convertToFeature=function(B,J,N,V){ba[0]=B;ma(X,ba,J,N,V);B=X[0];Da(X);Da(ba);return B};c.convertToFeatureSet=function(B){const {objectIdFieldName:J,spatialReference:N,transform:V,fields:aa,hasM:ca,hasZ:fa,features:la,geometryType:na,exceededTransferLimit:wa,uniqueIdField:ra,queryGeometry:ua,queryGeometryType:Ca}=B;B=ma([],la,na,fa,ca);const xa=ha(ua,Ca,!1,!1);B={features:B,
fields:aa,geometryType:na,objectIdFieldName:J,spatialReference:N,uniqueIdField:ra,queryGeometry:xa};V&&(B.transform=V);wa&&(B.exceededTransferLimit=wa);ca&&(B.hasM=ca);fa&&(B.hasZ=fa);return B};c.convertToFeatures=ma;c.convertToGeometry=ha;c.convertToMultipoint=w;c.convertToMultipointFeatures=U;c.convertToPoint=function(B,J,N){return B?J?N?K(B):n(B):N?L(B):a(B):null};c.convertToPolygon=M;c.convertToPolyline=k;c.generalizeOptimizedGeometry=function(B,J,N,V,aa,ca,fa=N,la=V){Ea(B);if(!J?.coords.length)return null;
aa=Sa[aa];const {coords:na,lengths:wa}=J;J=t(N,V);const ra=t(N&&fa,V&&la);N=z(N,V,fa,la);if(!wa.length)return N(B.coords,na,0,0,na[0],na[1]),Ea(B,J,0),B;V=0;ca*=ca;for(const ua of wa){if(ua<aa){V+=ua*J;continue}fa=B.coords.length/ra;la=V;const Ca=V+(ua-1)*J;N(B.coords,na,B.coords.length,la,na[la],na[la+1]);sa(B.coords,na,J,ca,N,la,Ca);N(B.coords,na,B.coords.length,Ca,na[Ca],na[Ca+1]);la=B.coords.length/ra-fa;la>=aa?B.lengths.push(la):Da(B.coords,fa*ra);V+=ua*J}return B.coords.length?B:null};c.getBoundsOptimizedGeometry=
function(B,J,N,V){if(!J?.coords?.length)return null;N=t(N,V);let aa=V=Number.POSITIVE_INFINITY,ca=Number.NEGATIVE_INFINITY,fa=Number.NEGATIVE_INFINITY;if(J&&J.coords){J=J.coords;for(let la=0;la<J.length;la+=N){const na=J[la],wa=J[la+1];V=Math.min(V,na);ca=Math.max(ca,na);aa=Math.min(aa,wa);fa=Math.max(fa,wa)}}F.is(B)?F.fromRectValues(B,V,aa,ca,fa):C.fromValues(V,aa,ca,fa,B);return B};c.getQuantizedArea=function(B,J){const {coords:N,lengths:V}=B;let aa=B=0;for(let ca=0;ca<V.length;ca++){const fa=V[ca];
aa+=va(N,B,fa,J);B+=fa}return Math.abs(aa)};c.getQuantizedBoundsOptimizedGeometry=function(B,J,N,V){N=t(N,V);const {lengths:aa,coords:ca}=J;V=J=Number.POSITIVE_INFINITY;let fa=Number.NEGATIVE_INFINITY,la=Number.NEGATIVE_INFINITY,na=0;for(const wa of aa){let ra=ca[na],ua=ca[na+1];J=Math.min(ra,J);V=Math.min(ua,V);fa=Math.max(ra,fa);la=Math.max(ua,la);na+=N;for(let Ca=1;Ca<wa;Ca++,na+=N){const xa=ca[na],Ba=ca[na+1];ra+=xa;ua+=Ba;0>xa&&(J=Math.min(J,ra));0<xa&&(fa=Math.max(fa,ra));0>Ba?V=Math.min(V,
ua):0<Ba&&(la=Math.max(la,ua))}}B[0]=J;B[1]=V;B[2]=fa;B[3]=la;return B};c.getSignedQuantizedRingArea=va;c.quantizeOptimizedFeatureSet=function(B,J){const {geometryType:N,features:V,hasM:aa,hasZ:ca}=J;if(!B)return J;for(let fa=0;fa<V.length;fa++){const la=V[fa],na=la.weakClone();na.geometry=new v;pa(na.geometry,la.geometry,aa,ca,N,B);la.centroid&&(na.centroid=new v,pa(na.centroid,la.centroid,aa,ca,"esriGeometryPoint",B));V[fa]=na}J.transform=B;return J};c.quantizeOptimizedGeometry=pa;c.quantizeX=H;
c.quantizeY=r;c.removeCollinearVertices=function(B,J,N,V,aa){if(!J?.coords?.length)return null;N=Sa[N];const {coords:ca,lengths:fa}=J;J=z(V,aa,V,aa);V=t(V,aa);let la=aa=0,na=0,wa=0;for(const Ca of fa){la=wa;J(B.coords,ca,la,aa,ca[aa],ca[aa+1]);aa+=V;var ra=ca[aa];let xa=ca[aa+1],Ba=ra,Aa=xa;var ua=xa/ra;la+=V;J(B.coords,ca,la,aa,Ba,Aa);aa+=V;for(let ya=2;ya<Ca;ya++){ra=ca[aa];xa=ca[aa+1];const Ia=xa/ra,Qa=ua===Ia||!isFinite(ua)&&!isFinite(Ia);ua=Qa&&isFinite(Ia)?0<=ua&&0<=Ia||0>=ua&&0>=Ia:0<=Aa&&
0<=xa||0>=Aa&&0>=xa;Qa&&ua?(Ba+=ra,Aa+=xa):(Ba=ra,Aa=xa,la+=V);J(B.coords,ca,la,aa,Ba,Aa);aa+=V;ua=Ia}la+=V;ra=(la-wa)/V;ra>=N&&(B.lengths[na]=ra,wa=la,na++)}B.coords.length>wa&&(B.coords.length=wa);B.lengths.length>na&&(B.lengths.length=na);return B.coords.length&&B.lengths.length?B:null};c.removeZMValues=function(B,J,N,V,aa,ca){Ea(B);B.lengths.push(...J.lengths);if(N===aa&&V===ca)for(var fa=0;fa<J.coords.length;fa++)B.coords.push(J.coords[fa]);else for(fa=t(N,V),N=z(N,V,aa,ca),J=J.coords,V=0;V<
J.length;V+=fa)N(B.coords,J,B.coords.length,V,J[V],J[V+1]);return B};c.unquantizeOptimizedFeatureSet=function(B){const {transform:J,features:N,hasM:V,hasZ:aa}=B;if(!J)return B;for(const ca of N)null!=ca.geometry&&qa(ca.geometry,ca.geometry,V,aa,J),null!=ca.centroid&&qa(ca.centroid,ca.centroid,V,aa,J);B.transform=null;return B};c.unquantizeOptimizedGeometry=qa;c.unquantizeValue=p;c.unquantizeX=function(B,J){return p(B,J,0)};c.unquantizeY=function(B,J){return p(B,-J,1)};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class c{constructor(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const g=new c;g.objectIdFieldName=this.objectIdFieldName;g.globalIdFieldName=
this.globalIdFieldName;g.geohashFieldName=this.geohashFieldName;g.geometryProperties=this.geometryProperties;g.geometryType=this.geometryType;g.spatialReference=this.spatialReference;g.hasZ=this.hasZ;g.hasM=this.hasM;g.features=this.features;g.fields=this.fields;g.transform=this.transform;g.exceededTransferLimit=this.exceededTransferLimit;g.uniqueIdField=this.uniqueIdField;g.queryGeometry=this.queryGeometry;g.queryGeometryType=this.queryGeometryType;return g}}return c})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(c,g,A,x){function F(q,d,v){C.minX=d[0];C.minY=d[1];C.maxX=d[2];C.maxY=d[3];q.search(C,v)}const C={minX:0,minY:0,maxX:0,maxY:0};class e{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new A.PooledRBush(9,g("esri-csp-restrictions")?q=>({minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=
()=>{if(this._indexInvalid){const q=Array(this._idByBounds.size);let d=0;this._idByBounds.forEach((v,t)=>{q[d++]=t});this._indexInvalid=!1;this._index.clear();this._index.load(q)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(q=>this._idByBounds.has(q))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const q=x.empty();for(const d of this._boundsById.values())d&&(q[0]=Math.min(d[0],q[0]),q[1]=Math.min(d[1],q[1]),
q[2]=Math.max(d[2],q[2]),q[3]=Math.max(d[3],q[3]));return q}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(q){const d=this._boundsById.get(q);this._boundsById.delete(q);d&&(this._idByBounds.delete(d),this._indexInvalid||this._index.remove(d))}forEachInBounds(q,d){this._loadIndex();F(this._index,q,v=>d(this._idByBounds.get(v)))}get(q){return this._boundsById.get(q)}has(q){return this._boundsById.has(q)}invalidateIndex(){this._indexInvalid||
(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(q,d){if(!this._indexInvalid){const v=this._boundsById.get(q);v&&(this._index.remove(v),this._idByBounds.delete(v))}this._boundsById.set(q,d);d&&(this._idByBounds.set(d,q),this._indexInvalid||(this._boundsToLoad.push(d),5E4<this._boundsToLoad.length&&this._loadIndex()))}}c.BoundsStore=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../has",
"../../PooledArray","../../../chunks/quickselect"],function(c,g,A,x,F){function C(W,U){for(D.clear();W;){if(!0===W.leaf)for(const w of W.children)U(w);else D.pushArray(W.children);W=D.pop()??null}}function e(W,U){q(W,0,W.children.length,U,W)}function q(W,U,w,I,h){h||=new T([]);h.minX=Infinity;h.minY=Infinity;h.maxX=-Infinity;h.maxY=-Infinity;for(let k=U,y;k<w;k++)y=W.children[k],d(h,W.leaf?I(y):y);return h}function d(W,U){W.minX=Math.min(W.minX,U.minX);W.minY=Math.min(W.minY,U.minY);W.maxX=Math.max(W.maxX,
U.maxX);W.maxY=Math.max(W.maxY,U.maxY)}function v(W,U){return W.minX-U.minX}function t(W,U){return W.minY-U.minY}function z(W){return(W.maxX-W.minX)*(W.maxY-W.minY)}function H(W){return W.maxX-W.minX+(W.maxY-W.minY)}function r(W,U){return W.minX<=U.minX&&W.minY<=U.minY&&U.maxX<=W.maxX&&U.maxY<=W.maxY}function p(W,U){return U.minX<=W.maxX&&U.minY<=W.maxY&&U.maxX>=W.minX&&U.maxY>=W.minY}function a(W,U,w,I,h){for(U=[U,w];U.length;){w=U.pop();const k=U.pop();if(w-k<=I)continue;const y=k+Math.ceil((w-
k)/I/2)*I;F.quickselect(W,y,k,w,h);U.push(k,y,y,w)}}class u{constructor(W=9,U){this._compareMinX=v;this._compareMinY=t;this._toBBox=w=>w;this._maxEntries=Math.max(4,W||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));U&&("function"===typeof U?this._toBBox=U:this._initFormat(U));this.clear()}destroy(){this.clear();n.prune();D.prune();L.prune();f.prune()}all(W){C(this._data,W)}search(W,U){let w=this._data;const I=this._toBBox;if(p(W,w))for(n.clear();w;){for(let h=0,k=w.children.length;h<
k;h++){const y=w.children[h],P=w.leaf?I(y):y;p(W,P)&&(w.leaf?U(y):r(W,P)?C(y,U):n.push(y))}w=n.pop()}}collides(W){let U=this._data;const w=this._toBBox;if(!p(W,U))return!1;for(n.clear();U;){for(let I=0,h=U.children.length;I<h;I++){const k=U.children[I],y=U.leaf?w(k):k;if(p(W,y)){if(U.leaf||r(W,y))return!0;n.push(k)}}U=n.pop()}return!1}load(W){if(!W.length)return this;if(W.length<this._minEntries){for(let U=0,w=W.length;U<w;U++)this.insert(W[U]);return this}W=this._build(W.slice(0,W.length),0,W.length-
1,0);if(this._data.children.length)if(this._data.height===W.height)this._splitRoot(this._data,W);else{if(this._data.height<W.height){const U=this._data;this._data=W;W=U}this._insert(W,this._data.height-W.height-1,!0)}else this._data=W;return this}insert(W){W&&this._insert(W,this._data.height-1);return this}clear(){this._data=new T([]);return this}remove(W){if(!W)return this;let U=this._data,w=null,I=0,h=!1,k;const y=this._toBBox(W);L.clear();for(f.clear();U||0<L.length;){U||(U=L.pop(),w=L.data[L.length-
1],I=f.pop()??0,h=!0);if(U.leaf&&(k=g.indexOf(U.children,W,U.children.length,U.indexHint),-1!==k)){U.children.splice(k,1);L.push(U);this._condense(L);break}h||U.leaf||!r(U,y)?w?(I++,U=w.children[I],h=!1):U=null:(L.push(U),f.push(I),I=0,w=U,U=U.children[0])}return this}toJSON(){return this._data}fromJSON(W){this._data=W;return this}_build(W,U,w,I){var h=w-U+1,k=this._maxEntries;if(h<=k)return W=new T(W.slice(U,w+1)),e(W,this._toBBox),W;I||(I=Math.ceil(Math.log(h)/Math.log(k)),k=Math.ceil(h/k**(I-1)));
const y=new Z([]);y.height=I;h=Math.ceil(h/k);k=h*Math.ceil(Math.sqrt(k));for(a(W,U,w,k,this._compareMinX);U<=w;U+=k){const P=Math.min(U+k-1,w);a(W,U,P,h,this._compareMinY);for(let M=U;M<=P;M+=h)y.children.push(this._build(W,M,Math.min(M+h-1,P),I-1))}e(y,this._toBBox);return y}_insert(W,U,w){var I=this._toBBox;w=w?W:I(W);L.clear();I=this._data;for(var h=U,k=L;;){k.push(I);if(!0===I.leaf||k.length-1===h)break;let y=Infinity,P=Infinity,M=void 0;for(let S=0,Y=I.children.length;S<Y;S++){const da=I.children[S],
ha=z(da),ma=(Math.max(da.maxX,w.maxX)-Math.min(da.minX,w.minX))*(Math.max(da.maxY,w.maxY)-Math.min(da.minY,w.minY))-ha;ma<P?(P=ma,y=ha<y?ha:y,M=da):ma===P&&ha<y&&(y=ha,M=da)}I=M||I.children[0]}I.children.push(W);for(d(I,w);0<=U;)if(L.data[U].children.length>this._maxEntries)this._split(L,U),U--;else break;for(W=L;0<=U;U--)d(W.data[U],w)}_split(W,U){const w=W.data[U];var I=w.children.length;const h=this._minEntries;this._chooseSplitAxis(w,h,I);if(I=this._chooseSplitIndex(w,h,I))I=w.children.splice(I,
w.children.length-I),I=w.leaf?new T(I):new Z(I),I.height=w.height,e(w,this._toBBox),e(I,this._toBBox),U?W.data[U-1].children.push(I):this._splitRoot(w,I)}_splitRoot(W,U){this._data=new Z([W,U]);this._data.height=W.height+1;e(this._data,this._toBBox)}_chooseSplitIndex(W,U,w){let I,h,k=void 0;I=h=Infinity;for(let P=U;P<=w-U;P++){var y=q(W,0,P,this._toBBox);const M=q(W,P,w,this._toBBox),S=Math.max(0,Math.min(y.maxX,M.maxX)-Math.max(y.minX,M.minX))*Math.max(0,Math.min(y.maxY,M.maxY)-Math.max(y.minY,M.minY));
y=z(y)+z(M);S<I?(I=S,k=P,h=y<h?y:h):S===I&&y<h&&(h=y,k=P)}return k}_chooseSplitAxis(W,U,w){const I=W.leaf?this._compareMinX:v,h=W.leaf?this._compareMinY:t,k=this._allDistMargin(W,U,w,I);U=this._allDistMargin(W,U,w,h);k<U&&W.children.sort(I)}_allDistMargin(W,U,w,I){W.children.sort(I);I=this._toBBox;var h=q(W,0,U,I);const k=q(W,w-U,w,I);let y=H(h)+H(k);for(let P=U;P<w-U;P++){const M=W.children[P];d(h,W.leaf?I(M):M);y+=H(h)}for(w=w-U-1;w>=U;w--)h=W.children[w],d(k,W.leaf?I(h):h),y+=H(k);return y}_condense(W){for(let U=
W.length-1;0<=U;U--){const w=W.data[U];if(0===w.children.length)if(0<U){const I=W.data[U-1],h=I.children;h.splice(g.indexOf(h,w,h.length,I.indexHint),1)}else this.clear();else e(w,this._toBBox)}}_initFormat(W){const U=["return a"," - b",";"];this._compareMinX=new Function("a","b",U.join(W[0]));this._compareMinY=new Function("a","b",U.join(W[1]));this._toBBox=new Function("a","return {minX: a"+W[0]+", minY: a"+W[1]+", maxX: a"+W[2]+", maxY: a"+W[3]+"};")}}const n=new x,D=new x,L=new x,f=new x({deallocator:void 0});
class K{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class Q extends K{constructor(){super(...arguments);this.height=1;this.indexHint=new g.PositionHint}}class T extends Q{constructor(W){super();this.children=W;this.leaf=!0}}class Z extends Q{constructor(W){super();this.children=W;this.leaf=!1}}c.BBox=K;c.PooledRBush=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(c,
g){var A={exports:{}};(function(x){(function(F){F=F();void 0!==F&&(x.exports=F)})(function(){function F(q,d,v,t,z){for(;t>v;){if(600<t-v){var H=t-v+1,r=d-v+1,p=Math.log(H),a=.5*Math.exp(2*p/3);p=.5*Math.sqrt(p*a*(H-a)/H)*(0>r-H/2?-1:1);F(q,d,Math.max(v,Math.floor(d-r*a/H+p)),Math.min(t,Math.floor(d+(H-r)*a/H+p)),z)}H=q[d];r=v;a=t;C(q,v,d);for(0<z(q[t],H)&&C(q,v,t);r<a;){C(q,r,a);r++;for(a--;0>z(q[r],H);)r++;for(;0<z(q[a],H);)a--}0===z(q[v],H)?C(q,v,a):(a++,C(q,a,t));a<=d&&(v=a+1);d<=a&&(t=a-1)}}function C(q,
d,v){var t=q[d];q[d]=q[v];q[v]=t}function e(q,d){return q<d?-1:q>d?1:0}return function(q,d,v,t,z){F(q,d,v||0,t||q.length-1,z||e)}})})(A);g=g.getDefaultExportFromCjs(A.exports);c.quickselect=g})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils","../OptimizedGeometry"],function(c,g,A){const x=new A,F=new A,C=new A,e={esriGeometryPoint:g.convertToPoint,esriGeometryPolyline:g.convertToPolyline,esriGeometryPolygon:g.convertToPolygon,esriGeometryMultipoint:g.convertToMultipoint},
q=(d,v)=>"_geVersion"!==d?v:void 0;c.cleanFromGeometryEngine=function(d){return d&&"_geVersion"in d?JSON.parse(JSON.stringify(d,q)):d};c.getGeometry=function(d,v,t,z,H,r,p=v,a=t){const u=v&&p,n=t&&a;z=null!=z?"coords"in z?z:z.geometry:null;if(null==z)return null;if(H)return v=g.generalizeOptimizedGeometry(F,z,v,t,d,H,p,a),r&&(v=g.quantizeOptimizedGeometry(C,v,u,n,d,r)),e[d]?.(v,u,n)??null;if(r)return r=g.quantizeOptimizedGeometry(C,z,v,t,d,r,p,a),e[d]?.(r,u,n)??null;g.removeZMValues(x,z,v,t,p,a);
return e[d]?.(x,u,n)??null};c.transformCentroid=function(d,v,t,z=d.hasZ,H=d.hasM){if(null==v)return null;const r=d.hasZ&&z,p=d.hasM&&H;return t?(d=g.quantizeOptimizedGeometry(C,v,d.hasZ,d.hasM,"esriGeometryPoint",t,z,H),g.convertToPoint(d,r,p)):g.convertToPoint(v,r,p)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(c,g,A,
x){c.optimizedFeatureQueryEngineAdapter={getObjectId(F){return F.objectId},getAttributes(F){return F.attributes},getAttribute(F,C){return F.attributes[C]},cloneWithGeometry(F,C){return new A.OptimizedFeature(C,F.attributes,null,F.objectId)},getGeometry(F){return F.geometry},getCentroid(F,C){null==F.centroid&&(F.centroid=g.getCentroidOptimizedGeometry(new x,F.geometry,C.hasZ,C.hasM));return F.centroid}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],
function(c){function g(x,F,C,e,q,d){d=q?d?4:3:d?3:2;let v=C,t=C+d,z=0,H=0,r=C=0,p=0;for(let a=0,u=e-1;a<u;a++,v+=d,t+=d){e=F[v];const n=F[v+1],D=F[v+2],L=F[t],f=F[t+1],K=F[t+2];let Q=e*f-L*n;r+=Q;z+=(e+L)*Q;H+=(n+f)*Q;q&&(Q=e*K-L*D,C+=(D+K)*Q,p+=Q);e<x[0]&&(x[0]=e);e>x[1]&&(x[1]=e);n<x[2]&&(x[2]=n);n>x[3]&&(x[3]=n);q&&(D<x[4]&&(x[4]=D),D>x[5]&&(x[5]=D))}0<r&&(r*=-1);0<p&&(p*=-1);if(!r)return null;x=[z,H,.5*r];q&&(x[3]=C,x[4]=.5*p);return x}function A(x,F,C,e,q){q=e?q?4:3:q?3:2;let d=F,v=F+q,t=0,z=
0,H=0,r=0;for(let n=0,D=C-1;n<D;n++,d+=q,v+=q){var p=x[d];const L=x[d+1],f=x[d+2],K=x[v],Q=x[v+1],T=x[v+2];if(e){var a=K-p;var u=Q-L;const Z=T-f;a=Math.sqrt(a*a+u*u+Z*Z)}else a=K-p,u=Q-L,a=Math.sqrt(a*a+u*u);a&&(t+=a,e?(p=[p+.5*(K-p),L+.5*(Q-L),f+.5*(T-f)],z+=a*p[0],H+=a*p[1],r+=a*p[2]):(p=[p+.5*(K-p),L+.5*(Q-L)],z+=a*p[0],H+=a*p[1]))}return 0<t?e?[z/t,H/t,r/t]:[z/t,H/t]:0<C?e?[x[F],x[F+1],x[F+2]]:[x[F],x[F+1]]:null}c.getCentroidOptimizedGeometry=function(x,F,C,e){if(!F?.lengths.length)return null;
x.lengths.length&&(x.lengths.length=0);x.coords.length&&(x.coords.length=0);const q=x.coords,d=[],v=C?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:t,coords:z}=F;var H=C?e?4:3:e?3:2;let r=0;for(const p of t){const a=g(v,z,r,p,C,e);a&&d.push(a);r+=p*H}d.sort((p,a)=>{let u=p[2]-a[2];0===
u&&C&&(u=p[4]-a[4]);return u});d.length&&(H=6*d[0][2],q[0]=d[0][0]/H,q[1]=d[0][1]/H,C&&(H=6*d[0][4],q[2]=0!==H?d[0][3]/H:0),q[0]<v[0]||q[0]>v[1]||q[1]<v[2]||q[1]>v[3]||C&&(q[2]<v[4]||q[2]>v[5]))&&(q.length=0);if(!q.length)if(F=F.lengths[0]?A(z,0,t[0],C,e):null)q[0]=F[0],q[1]=F[1],C&&2<F.length&&(q[2]=F[2]);else return null;return x};c.lineCentroid=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(c,g,A,x,F,C,e){function q(a,u){if(!u)return null;if("x"in u){var n={x:0,y:0};[n.x,n.y]=a(u.x,u.y,t);null!=u.z&&(n.z=u.z);null!=u.m&&(n.m=u.m);return n}return"xmin"in u?(n={xmin:0,ymin:0,xmax:0,ymax:0},[n.xmin,n.ymin]=a(u.xmin,u.ymin,t),[n.xmax,n.ymax]=a(u.xmax,u.ymax,t),u.hasZ&&(n.zmin=u.zmin,n.zmax=u.zmax,n.hasZ=!0),u.hasM&&(n.mmin=u.mmin,n.mmax=u.mmax,n.hasM=!0),n):"rings"in u?{rings:d(u.rings,a),hasM:u.hasM,hasZ:u.hasZ}:"paths"in u?{paths:d(u.paths,a),hasM:u.hasM,hasZ:u.hasZ}:"points"in
u?{points:v(u.points,a),hasM:u.hasM,hasZ:u.hasZ}:null}function d(a,u){const n=[];for(const D of a)n.push(v(D,u));return n}function v(a,u){const n=[];for(const D of a)a=u(D[0],D[1],[0,0]),n.push(a),2<D.length&&a.push(D[2]),3<D.length&&a.push(D[3]);return n}const t=[0,0],z=q.bind(null,e.lngLatToXY),H=q.bind(null,e.xyToLngLat);class r{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(a,u,n,D){if(!a?.length||!u||!n||C.equals(u,n))return a;a={geometries:a,inSpatialReference:u,
outSpatialReference:n,geographicTransformation:D,resolve:A.createResolver()};this._jobs.push(a);this._timer??(this._timer=setTimeout(this._process,10));return a.resolve.promise}_process(){this._timer=null;const a=this._jobs.shift();if(a){var {geometries:u,inSpatialReference:n,outSpatialReference:D,resolve:L,geographicTransformation:f}=a;e.canProject(n,D)?C.isWebMercator(D)?L(u.map(z)):L(u.map(H)):L(x.projectMany(F.jsonAdapter,u,n,D,f,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}}}const p=new r;c.checkProjectionSupport=async function(a,u){a&&u&&(a=Array.isArray(a)?a.map(n=>null!=n.geometry?n.geometry.spatialReference:null).filter(g.isSome):[a],await x.initializeProjection(a.map(n=>({source:n,dest:u}))))};c.project=function(a,u,n,D){if(!a)return a;n||(n=u,u=a.spatialReference);return C.isValid(u)&&C.isValid(n)&&!C.equals(u,n)?e.canProject(u,n)?(a=C.isWebMercator(n)?z(a):H(a),a.spatialReference=n,a):x.projectMany(F.jsonAdapter,[a],u,n,null,D)[0]:a};c.projectMany=function(a,
u,n,D){return p.push(a,u,n,D)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(c,g,A,x,F,C,e,q,d,v,t,z,H,r,p,a,u,n,D,L,f,K,Q,T,Z,W,U,w){function I(M){if(Z.canQueryWithRBush(M)){if(r.isExtent(M))return[z.fromValues(Math.min(M.xmin,M.xmax),Math.min(M.ymin,M.ymax),Math.max(M.xmin,M.xmax),Math.max(M.ymin,M.ymax))];if(r.isPolygon(M))return M.rings.map(S=>z.fromValues(Math.min(S[0][0],S[2][0]),Math.min(S[0][1],S[2][1]),Math.max(S[0][0],S[2][0]),Math.max(S[0][1],S[2][1])))}return[H.getBoundsXY(z.create(),M)]}class h{constructor(M,S=null,Y,da,ha){this.attributes=M;this.geometry=
Y;this.centroid=da;this.filterFlags=ha;this.groupId=-1;this.displayId=S}}const k=new e.MemCacheStorage(2E6);let y=0;class P{constructor(M){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:f.queryCapabilities};this.geometryType=M.geometryType;this.hasM=!!M.hasM;this.hasZ=!!M.hasZ;this.objectIdField=M.objectIdField;this.spatialReference=M.spatialReference;this.definitionExpression=M.definitionExpression;this.featureStore=M.featureStore;this.aggregateAdapter=M.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=M.timeInfo;M.cacheSpatialQueries&&(this._geometryQueryCache=new e.MemCache(y++ +"$$",k));this.fieldsIndex=x.isSerializable(M.fieldsIndex)?M.fieldsIndex:U.fromJSON(M.fieldsIndex);this.availableFields=!M.availableFields||1===M.availableFields.length&&"*"===M.availableFields[0]?new Set(this.fieldsIndex.fields.map(S=>S.name)):new Set(M.availableFields.map(S=>this.fieldsIndex.get(S)?.name).filter(S=>null!=S));
M.scheduler&&M.priority&&(this._frameTask=M.scheduler.registerTask(M.priority))}destroy(){this._frameTask=C.removeMaybe(this._frameTask);this.clearCache();C.destroyMaybe(this._geometryQueryCache);this._changeHandle=C.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(M,S){S=q.signalFromSignalOrOptions(S);try{return(await this._executeQuery(M,
{},S)).createQueryResponse()}catch(Y){if(Y!==Q.queryEngineEmptyResult)throw Y;return(new K.QueryEngineResult([],M,this)).createQueryResponse()}}async executeQueryForCount(M={},S){S=q.signalFromSignalOrOptions(S);try{return(await this._executeQuery(M,{returnGeometry:!1,returnCentroid:!1,outSR:null},S)).createQueryResponseForCount()}catch(Y){if(Y!==Q.queryEngineEmptyResult)throw Y;return 0}}async executeQueryForExtent(M,S){S=q.signalFromSignalOrOptions(S);const Y=M.outSR;try{const da=await this._executeQuery(M,
{returnGeometry:!0,returnCentroid:!1,outSR:null},S),ha=da.size;if(!ha)return{count:0,extent:null};const ma=await this._getBounds(da.items,da.spatialReference,Y||this.spatialReference);return{count:ha,extent:ma}}catch(da){if(da===Q.queryEngineEmptyResult)return{count:0,extent:null};throw da;}}async executeQueryForIds(M,S){return this.executeQueryForIdSet(M,S).then(Y=>Array.from(Y))}async executeQueryForIdSet(M,S){S=q.signalFromSignalOrOptions(S);try{const Y=await this._executeQuery(M,{returnGeometry:!0,
returnCentroid:!1,outSR:null},S),da=Y.items,ha=new Set;await this._reschedule(()=>{for(const ma of da)ha.add(Y.featureAdapter.getObjectId(ma))},S);return ha}catch(Y){if(Y===Q.queryEngineEmptyResult)return new Set;throw Y;}}async executeQueryForSnapping(M,S){const Y=q.signalFromSignalOrOptions(S),{point:da,distance:ha,returnEdge:ma,vertexMode:pa}=M;if(!ma&&"none"===pa)return{candidates:[]};let sa=F.clone(M.query);sa=await this._schedule(()=>Q.normalizeQueryLike(sa,this.definitionExpression,this.spatialReference),
Y);sa=await this._reschedule(()=>T.validateQuery(sa,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);(S=!a.equals(da.spatialReference,this.spatialReference))&&await L.checkProjectionSupport(da.spatialReference,this.spatialReference);var qa="number"===typeof ha?ha:ha.x,va="number"===typeof ha?ha:ha.y;qa={xmin:da.x-qa,xmax:da.x+qa,ymin:da.y-va,ymax:da.y+va,spatialReference:da.spatialReference};qa=S?L.project(qa,
this.spatialReference):qa;if(!qa)return{candidates:[]};va=(await p.normalizeCentralMeridian(r.fromJSON(da),null,{signal:Y}))[0];const Ea=(await p.normalizeCentralMeridian(r.fromJSON(qa),null,{signal:Y}))[0];if(null==va||null==Ea)return{candidates:[]};const Da=new K.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(I(Ea.toJSON())),Y),sa,this);await this._reschedule(()=>this._executeObjectIdsQuery(Da),Y);await this._reschedule(()=>this._executeTimeQuery(Da),Y);await this._reschedule(()=>
this._executeAttributesQuery(Da),Y);await this._reschedule(()=>this._executeGeometryQueryForSnapping(Da,Y),Y);va=va.toJSON();va=S?L.project(va,this.spatialReference):va;return Da.createSnappingResponse({...M,point:va,distance:S?Math.max(qa.xmax-qa.xmin,qa.ymax-qa.ymin)/2:ha},da.spatialReference)}async executeQueryForLatestObservations(M,S){S=q.signalFromSignalOrOptions(S);if(!this.timeInfo?.trackIdField)throw new A("unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:M,timeInfo:this.timeInfo});
try{const Y=await this._executeQuery(M,{},S);await this._reschedule(()=>this._filterLatest(Y),S);return Y.createQueryResponse()}catch(Y){if(Y!==Q.queryEngineEmptyResult)throw Y;return(new K.QueryEngineResult([],M,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(M={},S,Y){Y=q.signalFromSignalOrOptions(Y);const {field:da,normalizationField:ha,valueExpression:ma}=S;return(await this._executeQueryForStatistics(M,{field:da,normalizationField:ha,valueExpression:ma},Y)).createSummaryStatisticsResponse(S)}async executeQueryForUniqueValues(M=
{},S,Y){Y=q.signalFromSignalOrOptions(Y);const {field:da,field2:ha,field3:ma,valueExpression:pa}=S;return(await this._executeQueryForStatistics(M,{field:da,field2:ha,field3:ma,valueExpression:pa},Y)).createUniqueValuesResponse(S)}async executeQueryForClassBreaks(M={},S,Y){Y=q.signalFromSignalOrOptions(Y);const {field:da,normalizationField:ha,valueExpression:ma}=S;return(await this._executeQueryForStatistics(M,{field:da,normalizationField:ha,valueExpression:ma},Y)).createClassBreaksResponse(S)}async executeQueryForHistogram(M=
{},S,Y){Y=q.signalFromSignalOrOptions(Y);const {field:da,normalizationField:ha,valueExpression:ma}=S;return(await this._executeQueryForStatistics(M,{field:da,normalizationField:ha,valueExpression:ma},Y)).createHistogramResponse(S)}async fetchRecomputedExtents(M){M=q.signalFromSignalOrOptions(M);this._timeExtentPromise||(this._timeExtentPromise=W.getTimeExtent(this.timeInfo,this.featureStore));const [S,Y]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);q.throwIfAborted(M);return{fullExtent:S,
timeExtent:Y}}async _getBounds(M,S,Y){const da=t.set(t.create(),t.negativeInfinity);await this.featureStore.forEachBounds(M,ha=>t.expandWithAABB(da,ha));M={xmin:da[0],ymin:da[1],xmax:da[3],ymax:da[4],spatialReference:D.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(da[2])&&isFinite(da[5])&&(M.zmin=da[2],M.zmax=da[5],M.hasZ=!0);S=L.project(M,S,Y);S.spatialReference=D.cleanFromGeometryEngine(Y);0===S.xmax-S.xmin&&(Y=d.getMetersPerUnitForSR(S.spatialReference),S.xmin-=Y,S.xmax+=
Y);0===S.ymax-S.ymin&&(Y=d.getMetersPerUnitForSR(S.spatialReference),S.ymin-=Y,S.ymax+=Y);this.hasZ&&null!=S.zmin&&null!=S.zmax&&0===S.zmax-S.zmin&&(Y=d.getMetersPerUnitForSR(S.spatialReference),S.zmin-=Y,S.zmax+=Y);return S}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise="getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getAllFeatures().then(M=>this._getBounds(M,this.spatialReference,
this.spatialReference)));return this._fullExtentPromise}async _schedule(M,S){return null!=this._frameTask?this._frameTask.schedule(M,S):M(w.noBudget)}async _reschedule(M,S){return null!=this._frameTask?this._frameTask.reschedule(M,S):M(w.noBudget)}async _getAllFeaturesQueryEngineResult(M){return new K.QueryEngineResult(await this._getAllFeatures(),M,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const Y=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(da=>Y.push(da))})().then(()=>
Y)}const M=this._allFeaturesPromise,S=await M;return M===this._allFeaturesPromise?S.slice():this._getAllFeatures()}async _executeQuery(M,S,Y){M=F.clone(M);M=await this._schedule(()=>Q.normalizeQuery(M,this.definitionExpression,this.spatialReference),Y);M=await this._reschedule(()=>T.validateQuery(M,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);M={...M,...S};const da=await this._reschedule(()=>this._executeSceneFilterQuery(M,
Y),Y),ha=await this._reschedule(()=>this._executeGeometryQuery(M,da,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(ha),Y);await this._reschedule(()=>this._executeObjectIdsQuery(ha),Y);await this._reschedule(()=>this._executeTimeQuery(ha),Y);await this._reschedule(()=>this._executeAttributesQuery(ha),Y);return ha}async _executeSceneFilterQuery(M,S){if(null==M.sceneFilter)return null;const {outSR:Y,returnGeometry:da,returnCentroid:ha}=M;var ma=this.featureStore.featureSpatialReference,
pa=M.sceneFilter.geometry;const sa=null==ma||a.equals(ma,pa.spatialReference)?pa:L.project(pa,ma);if(!sa)return null;ma=da||ha;ma=a.isValid(Y)&&!a.equals(this.spatialReference,Y)&&ma?async Da=>this._project(Da,Y):Da=>Da;const qa=this.featureAdapter;pa=await this._reschedule(()=>this._searchFeatures(I(sa)),S);if("disjoint"===M.sceneFilter.spatialRelationship){if(!pa.length)return null;const Da=new Set;for(var va of pa)Da.add(qa.getObjectId(va));const Pa=await this._reschedule(()=>this._getAllFeatures(),
S);va=await this._reschedule(async()=>{const Sa=await Z.getSpatialQueryOperator("esriSpatialRelDisjoint",sa,this.geometryType,this.hasZ,this.hasM),Ta=await this._runSpatialFilter(Pa,Oa=>!Da.has(qa.getObjectId(Oa))||Sa(qa.getGeometry(Oa)),S);return new K.QueryEngineResult(Ta,M,this)},S);return ma(va)}if(!pa.length)return new K.QueryEngineResult([],M,this);if(this._canExecuteSinglePass(sa,M))return ma(new K.QueryEngineResult(pa,M,this));const Ea=await Z.getSpatialQueryOperator("esriSpatialRelContains",
sa,this.geometryType,this.hasZ,this.hasM);va=await this._runSpatialFilter(pa,Da=>Ea(qa.getGeometry(Da)),S);return ma(new K.QueryEngineResult(va,M,this))}async _executeGeometryQuery(M,S,Y){if(null!=S&&0===S.items.length)return S;M=null!=S?S.query:M;const {geometry:da,outSR:ha,spatialRel:ma,returnGeometry:pa,returnCentroid:sa}=M;var qa=this.featureStore.featureSpatialReference;const va=!da||null==qa||a.equals(qa,da.spatialReference)?da:L.project(da,qa),Ea=pa||sa,Da=a.isValid(ha)&&!a.equals(this.spatialReference,
ha),Pa=this._geometryQueryCache&&null==S?Da&&Ea?JSON.stringify({originalFilterGeometry:da,spatialRelationship:ma,outSpatialReference:ha}):JSON.stringify({originalFilterGeometry:da,spatialRelationship:ma}):null;qa=Pa?this._geometryQueryCache.get(Pa):null;if(null!=qa)return new K.QueryEngineResult(qa,M,this);qa=async E=>{Da&&Ea&&await this._project(E,ha);Pa&&this._geometryQueryCache.put(Pa,E.items,E.items.length+1);return E};if(!va)return qa(null!=S?S:await this._getAllFeaturesQueryEngineResult(M));
const Sa=this.featureAdapter;let Ta=await this._reschedule(()=>this._searchFeatures(I(da)),Y);if("esriSpatialRelDisjoint"===ma){if(!Ta.length)return qa(null!=S?S:await this._getAllFeaturesQueryEngineResult(M));const E=new Set;for(var Oa of Ta)E.add(Sa.getObjectId(Oa));const X=null!=S?S.items:await this._reschedule(()=>this._getAllFeatures(),Y);Oa=await this._reschedule(async()=>{const ba=await Z.getSpatialQueryOperator(ma,va,this.geometryType,this.hasZ,this.hasM),ja=await this._runSpatialFilter(X,
B=>!E.has(Sa.getObjectId(B))||ba(Sa.getGeometry(B)),Y);return new K.QueryEngineResult(ja,M,this)},Y);return qa(Oa)}if(null!=S){const E=new g.PositionHint;Ta=Ta.filter(X=>0<=g.indexOf(S.items,X,S.items.length,E))}if(!Ta.length)return qa=new K.QueryEngineResult([],M,this),Pa&&this._geometryQueryCache.put(Pa,qa.items,1),qa;if(this._canExecuteSinglePass(va,M))return qa(new K.QueryEngineResult(Ta,M,this));const l=await Z.getSpatialQueryOperator(ma,va,this.geometryType,this.hasZ,this.hasM);Oa=await this._runSpatialFilter(Ta,
E=>l(Sa.getGeometry(E)),Y);return qa(new K.QueryEngineResult(Oa,M,this))}async _executeGeometryQueryForSnapping(M,S){const {query:Y}=M,{spatialRel:da}=Y;if(M?.items?.length&&Y.geometry&&da){var ha=await Z.getSpatialQueryOperator(da,Y.geometry,this.geometryType,this.hasZ,this.hasM);S=await this._runSpatialFilter(M.items,ma=>ha(ma.geometry),S);M.items=S}}_executeAggregateIdsQuery(M){if(0!==M.items.length&&M.query.aggregateIds?.length&&null!=this.aggregateAdapter){var S=new Set;for(const da of M.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(da).forEach(ha=>
S.add(ha));var Y=this.featureAdapter.getObjectId;M.items=M.items.filter(da=>S.has(Y(da)))}}_executeObjectIdsQuery(M){if(0!==M.items.length&&M.query.objectIds?.length){var S=new Set(M.query.objectIds),Y=this.featureAdapter.getObjectId;M.items=M.items.filter(da=>S.has(Y(da)))}}_executeTimeQuery(M){if(0!==M.items.length){var S=W.getTimeOperator(this.timeInfo,M.query.timeExtent,this.featureAdapter);null!=S&&(M.items=M.items.filter(S))}}_executeAttributesQuery(M){if(0!==M.items.length){var S=n.getWhereClause(M.query.where,
this.fieldsIndex);if(S){if(!S.isStandardized)throw new TypeError("Where clause is not standardized");M.items=M.items.filter(Y=>S.testFeature(Y,this.featureAdapter))}}}async _runSpatialFilter(M,S,Y){if(!S)return M;if(null==this._frameTask)return M.filter(pa=>S(pa));let da=0;const ha=[],ma=async pa=>{for(;da<M.length;){const sa=M[da++];S(sa)&&(ha.push(sa),pa.madeProgress());pa.done&&await this._reschedule(qa=>ma(qa),Y)}};return this._reschedule(pa=>ma(pa),Y).then(()=>ha)}_filterLatest(M){const {trackIdField:S,
startTimeField:Y,endTimeField:da}=this.timeInfo,ha=da||Y,ma=new Map,pa=this.featureAdapter.getAttribute;for(const sa of M.items){const qa=pa(sa,S),va=pa(sa,ha),Ea=ma.get(qa);(!Ea||va>pa(Ea,ha))&&ma.set(qa,sa)}M.items=Array.from(ma.values())}_canExecuteSinglePass(M,S){({spatialRel:S}=S);return Z.canQueryWithRBush(M)&&("esriSpatialRelEnvelopeIntersects"===S||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===S||"esriSpatialRelContains"===S))}async _project(M,S){if(!S||a.equals(this.spatialReference,
S))return M;const Y=this.featureAdapter;let da=void 0;try{const ha=await this._getFullExtent();da=v.getTransformation(this.spatialReference,S,ha)}catch{}S=await L.projectMany(M.items.map(ha=>D.getGeometry(this.geometryType,this.hasZ,this.hasM,Y.getGeometry(ha))),this.spatialReference,S,da);M.items=S.map((ha,ma)=>Y.cloneWithGeometry(M.items[ma],u.convertFromGeometry(ha,this.hasZ,this.hasM)));return M}async _searchFeatures(M){const S=new Set;await Promise.all(M.map(Y=>this.featureStore.forEachInBounds(Y,
da=>S.add(da))));M=Array.from(S.values());S.clear();return M}async _executeQueryForStatistics(M,S,Y){M=F.clone(M);try{M=await this._schedule(()=>Q.normalizeQuery(M,this.definitionExpression,this.spatialReference),Y);M=await this._reschedule(()=>T.validateStatisticsQuery(M,S,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);const da=await this._reschedule(()=>this._executeSceneFilterQuery(M,Y),Y),ha=await this._reschedule(()=>
this._executeGeometryQuery(M,da,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(ha),Y);await this._reschedule(()=>this._executeObjectIdsQuery(ha),Y);await this._reschedule(()=>this._executeTimeQuery(ha),Y);await this._reschedule(()=>this._executeAttributesQuery(ha),Y);return ha}catch(da){if(da!==Q.queryEngineEmptyResult)throw da;return new K.QueryEngineResult([],M,this)}}}c.Feature=h;c.QueryEngine=P;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports",
"./PooledArray"],function(c,g){c.RemoveMode=void 0;(function(e){e[e.ALL=0]="ALL";e[e.SOME=1]="SOME"})(c.RemoveMode||(c.RemoveMode={}));class A{constructor(e,q,d){this.name=e;this._storage=q;this.id=`${F++}:`;this.size=0;this.maxSize=-1;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);d&&(this._storage.registerRemoveFunc(this.id,d),this._removeFunc=!0)}destroy(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);
this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,q,d,v=0){this._storage.put(this,e,q,d,v)}pop(e){e=this._storage.pop(this,e);void 0===e?++this._miss:++this._hit;return e}get(e){e=this._storage.get(this,e);void 0===e?++this._miss:++this._hit;return e}peek(e){return this._storage.peek(this,e)}updateSize(e,q,d){this._storage.updateSize(this,e,
q,d)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class x{get size(){return this._size}constructor(e=10485760){this._maxSize=e;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new g;this._users=new g}destroy(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,
q){this._removeFuncs.push([e,q])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(q=>q[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1);this._checkSize()}getSize(e,q){return this._db.get(e.id+q)?.size??0}put(e,q,d,v,t){q=e.id+q;const z=this._db.get(q);z&&(this._size-=z.size,e.size-=z.size,this._db.delete(q),z.entry!==d&&this._notifyRemove(q,z.entry,z.size,c.RemoveMode.ALL));v>this._maxSize?this._notifyRemove(q,d,v,c.RemoveMode.ALL):void 0===d?console.warn("Refusing to cache undefined entry "):
!v||0>v?(console.warn(`Refusing to cache entry with size ${v} for key ${q}`),this._notifyRemove(q,d,0,c.RemoveMode.ALL)):(this._db.set(q,new C(d,v,1+Math.max(t,-4)- -3)),this._size+=v,e.size+=v,this._checkSize())}updateSize(e,q,d,v){q=e.id+q;const t=this._db.get(q);if(t&&t.entry===d){this._size-=t.size;for(e.size-=t.size;v>this._maxSize;)if(v=this._notifyRemove(q,d,v,c.RemoveMode.SOME),!(null!=v&&0<v)){this._db.delete(q);return}t.size=v;this._size+=v;e.size+=v;this._checkSize()}}pop(e,q){q=e.id+q;
const d=this._db.get(q);if(d)return this._size-=d.size,e.size-=d.size,this._db.delete(q),++this._hit,d.entry;++this._miss}get(e,q){q=e.id+q;e=this._db.get(q);if(void 0===e)++this._miss;else return this._db.delete(q),e.lives=e.lifetime,this._db.set(q,e),++this._hit,e.entry}peek(e,q){(e=this._db.get(e.id+q))?++this._hit:++this._miss;return e?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+
"%",Entries:this._db.size.toString()},q={},d=[];this._db.forEach((z,H)=>{const r=z.lifetime;d[r]=(d[r]||0)+z.size;this._users.forAll(p=>{const {id:a,name:u}=p;H.startsWith(a)&&(q[u]=(q[u]||0)+z.size)})});const v={};this._users.forAll(z=>{const H=z.name;"hitRate"in z&&"number"===typeof z.hitRate&&!isNaN(z.hitRate)&&0<z.hitRate?(q[H]=q[H]||0,v[H]=Math.round(100*z.hitRate)+"%"):v[H]="0%"});var t=Object.keys(q);t.sort((z,H)=>q[H]-q[z]);t.forEach(z=>e[z]=Math.round(q[z]/2**20)+"MB / "+v[z]);for(t=d.length-
1;0<=t;--t){const z=d[t];z&&(e["Priority "+(t+-3-1)]=Math.round(z/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0;this._users.forAll(e=>e.resetHitRate())}clear(e){const q=e.id;this._db.forEach((d,v)=>{v.startsWith(q)&&(this._size-=d.size,this._db.delete(v),this._notifyRemove(v,d.entry,d.size,c.RemoveMode.ALL))});e.size=0}clearAll(){this._db.forEach((e,q)=>this._notifyRemove(q,e.entry,e.size,c.RemoveMode.ALL));this._users.forAll(e=>e.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/
(this._hit+this._miss)}_notifyRemove(e,q,d,v){let t;this._removeFuncs.some(z=>e.startsWith(z[0])?(z=z[1](q,v,d),"number"===typeof z&&(t=z),!0):!1);return t}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e));this._checkSizeLimits()}_checkSizeLimits(e){const q=e??this;if(!(0>q.maxSize||q.size<=q.maxSize)){for(var d=e?.id,v=!0;v;){v=!1;for(const [t,z]of this._db)if(0===z.lifetime&&(!d||t.startsWith(d))){this._purgeItem(t,z,e);if(q.size<=.9*q.maxSize)return;v||=this._db.has(t)}}for(const [t,
z]of this._db)if(!d||t.startsWith(d))if(this._purgeItem(t,z,e),q.size<=.9*q.maxSize)break}}_purgeItem(e,q,d=this._users.find(v=>e.startsWith(v.id))){this._db.delete(e);if(1>=q.lives){this._size-=q.size;d&&(d.size-=q.size);const v=this._notifyRemove(e,q.entry,q.size,c.RemoveMode.SOME);null!=v&&0<v&&(this._size+=v,d&&(d.size+=v),q.lives=q.lifetime,q.size=v,this._db.set(e,q))}else--q.lives,this._db.set(e,q)}}let F=0;class C{constructor(e,q,d){this.entry=e;this.size=q;this.lives=this.lifetime=d}}c.MemCache=
A;c.MemCacheStorage=x;c.MinPriority=-3;c.NoPriority=-4;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(c,g,A,x,F,C,e,q,d,v,t){function z(D){const L=[];let f=0,K=0;for(let Q=0;Q<D.length;Q++){const T=
D[Q];let Z=null;for(let W=0;W<T.length;W++)Z=T[W],L.push(Z),0===W?K=f=Z[0]:(f=Math.min(f,Z[0]),K=Math.max(K,Z[0]));Z&&L.push([(f+K)/2,0])}return L}function H(D,L){if(!(D instanceof C||D instanceof F))throw n().error("straightLineDensify: the input geometry is neither polyline nor polygon"),new A("straightLineDensify: the input geometry is neither polyline nor polygon");var f=e.getGeometryParts(D);const K=[];for(const T of f){f=[];K.push(f);f.push([T[0][0],T[0][1]]);for(let Z=0;Z<T.length-1;Z++){const W=
T[Z][0],U=T[Z][1],w=T[Z+1][0],I=T[Z+1][1];var Q=Math.sqrt((w-W)*(w-W)+(I-U)*(I-U));const h=(I-U)/Q,k=(w-W)/Q,y=Q/L;if(1<y){for(let P=1;P<=y-1;P++){const M=P*L;f.push([k*M+W,h*M+U])}Q=(Q+Math.floor(y-1)*L)/2;f.push([k*Q+W,h*Q+U])}f.push([w,I])}}return"polygon"===D.type?new F({rings:K,spatialReference:D.spatialReference}):new C({paths:K,spatialReference:D.spatialReference})}function r(D,L,f){L&&(D=H(D,1E6),D=d.webMercatorToGeographic(D,!0));f&&(D=e.updatePolyGeometry(D,f));return D}function p(D,L,f){if(Array.isArray(D)){var K=
D[0];K>L?(f=e.offsetMagnitude(K,L),D[0]=K+-2*f*L):K<f&&(L=e.offsetMagnitude(K,f),D[0]=K+-2*L*f)}else K=D.x,K>L?(f=e.offsetMagnitude(K,L),D=D.clone().offset(-2*f*L,0)):K<f&&(L=e.offsetMagnitude(K,f),D=D.clone().offset(-2*L*f,0));return D}function a(D,L){let f=-1;for(let K=0;K<L.cutIndexes.length;K++){const Q=L.cutIndexes[K],T=L.geometries[K],Z=e.getGeometryParts(T);for(let W=0;W<Z.length;W++){const U=Z[W];U.some(w=>{if(180>w[0])return!0;w=0;for(var I=0;I<U.length;I++){var h=U[I][0];w=h>w?h:w}w=Number(w.toFixed(9));
w=-360*e.offsetMagnitude(w,180);for(I=0;I<U.length;I++)h=T.getPoint(W,I),T.setPoint(W,I,h.clone().offset(w,0));return!0})}if(Q===f)if("polygon"===D[0].type)for(const W of e.getGeometryParts(T))D[Q]=D[Q].addRing(W);else{if("polyline"===D[0].type)for(const W of e.getGeometryParts(T))D[Q]=D[Q].addPath(W)}else f=Q,D[Q]=T}return D}async function u(D,L,f){if(!Array.isArray(D))return u([D],L);L&&"string"!==typeof L&&n().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");
var K="string"===typeof L?L:L?.url??g.geometryServiceUrl;let Q,T,Z;let W=0;var U=[];L=[];for(var w of D)if(null==w)L.push(w);else{if(!I){var I=w.spatialReference;var h=q.getInfo(I);var k=(Q=I.isWebMercator)?102100:4326;T=e.cutParams[k].maxX;Z=e.cutParams[k].minX;var y=e.cutParams[k].plus180Line;k=e.cutParams[k].minus180Line}if(h)if("mesh"===w.type)L.push(w);else if("point"===w.type)L.push(p(w.clone(),T,Z));else if("multipoint"===w.type){var P=w.clone();P.points=P.points.map(M=>p(M,T,Z));L.push(P)}else if("extent"===
w.type)P=w.clone()._normalize(!1,!1,h),L.push(P.rings?new F(P):P);else if(w.extent){P=w.extent;const M=2*e.offsetMagnitude(P.xmin,Z)*T;let S=0===M?w.clone():e.updatePolyGeometry(w.clone(),M);P.offset(M,0);let {xmin:Y,xmax:da}=P;Y=Number(Y.toFixed(9));da=Number(da.toFixed(9));P.intersects(y)&&da!==T?(W=da>W?da:W,S=r(S,Q),U.push(S),L.push("cut")):P.intersects(k)&&Y!==Z?(W=2*da*T>W?2*da*T:W,S=r(S,Q,360),U.push(S),L.push("cut")):L.push(S)}else L.push(w.clone());else L.push(w)}I=e.offsetMagnitude(W,T);
h=-90;y=I;for(w=new C;0<I;)k=-180+360*I,w.addPath([[k,h],[k,-1*h]]),h*=-1,I--;if(0<U.length&&0<y){I=await v.cut(K,U,w,f);I=a(U,I);h=[];U=[];for(y=0;y<L.length;y++)w=L[y],"cut"!==w?U.push(w):(w=I.shift(),k=D[y],null!=k&&"polygon"===k.type&&k.rings&&1<k.rings.length&&w.rings.length>=k.rings.length?(h.push(w),U.push("simplify")):U.push(Q?d.geographicToWebMercator(w):w));if(!h.length)return U;L=await t.simplify(K,h,f);D=[];for(f=0;f<U.length;f++)K=U[f],"simplify"!==K?D.push(K):D.push(Q?d.geographicToWebMercator(L.shift()):
L.shift());return D}D=[];for(f=0;f<L.length;f++)K=L[f],"cut"!==K?D.push(K):(K=U.shift(),D.push(!0===Q?d.geographicToWebMercator(K):K));return D}const n=()=>x.getLogger("esri.geometry.support.normalizeUtils");c.getClosestDenormalizedXToReference=function(D,L,f){f=q.getInfo(f);if(null==f)return D;const [K,Q]=f.valid;f=2*Q;let T=0,Z=0;L>Q?T=Math.ceil(Math.abs(L-Q)/f):L<K&&(T=-Math.ceil(Math.abs(L-K)/f));D>Q?Z=Math.ceil(Math.abs(D-Q)/f):D<K&&(Z=-Math.ceil(Math.abs(D-K)/f));D+=(T-Z)*f;L=D-L;L>Q?D-=f:L<
K&&(D+=f);return D};c.getDenormalizedExtent=function(D){if(!D)return null;const L=D.extent;if(!L)return null;var f=D.spatialReference&&q.getInfo(D.spatialReference);if(!f)return L;const [K,Q]=f.valid;({width:f}=L);let {xmin:T,xmax:Z}=L;[T,Z]=[Z,T];if("extent"===D.type||0===f||f<=Q||f>2*Q||T<K||Z>Q)return L;let W;switch(D.type){case "polygon":if(1<D.rings.length)W=z(D.rings);else return L;break;case "polyline":if(1<D.paths.length)W=z(D.paths);else return L;break;case "multipoint":W=D.points}D=L.clone();
for(let U=0;U<W.length;U++){let w=W[U][0];0>w?(w+=Q,Z=Math.max(w,Z)):(w-=Q,T=Math.min(w,T))}D.xmin=T;D.xmax=Z;return D.width<f?(D.xmin-=Q,D.xmax-=Q,D):L};c.normalizeCentralMeridian=u;c.normalizeMapX=function(D,L){if(L=q.getInfo(L)){const [f,K]=L.valid;L=K-f;if(D<f)for(;D<f;)D+=L;if(D>K)for(;D>K;)D-=L}return D};c.straightLineDensify=H;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference",
"./jsonUtils"],function(c,g,A,x){function F(C){return x.isPolygon(C)?C.rings:C.paths}g={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new g({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:A.WebMercator}),minus180Line:new g({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new g({paths:[[[180,
-180],[180,180]]],spatialReference:A.WGS84}),minus180Line:new g({paths:[[[-180,-180],[-180,180]]],spatialReference:A.WGS84})}};c.cutParams=g;c.getGeometryParts=F;c.offsetMagnitude=function(C,e){return Math.ceil((C-e)/(2*e))};c.updatePolyGeometry=function(C,e){const q=F(C);for(const d of q)for(const v of d)v[0]+=e;return C};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),
function(c,g,A,x,F,C){c.cut=async function(e,q,d,v){e=C.parseUrl(e);const t=q[0].spatialReference;q={...v,responseType:"json",query:{...e.query,f:"json",sr:F.srToRESTValue(t),target:JSON.stringify({geometryType:x.getJsonType(q[0]),geometries:q}),cutter:JSON.stringify(d)}};q=await A(e.path+"/cut",q);const {cutIndexes:z,geometries:H=[]}=q.data;return{cutIndexes:z,geometries:H.map(r=>{r=x.fromJSON(r);r.spatialReference=t;return r})}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),
function(c,g,A,x,F,C){function e(q,d,v){const t={};for(const H in q)if("declaredClass"!==H){var z=q[H];null!=z&&"function"!==typeof z&&(Array.isArray(z)?t[H]=z.map(r=>e(r)):"object"===typeof z?z.toJSON?(z=z.toJSON(v?.[H]),t[H]=d?z:JSON.stringify(z)):t[H]=d?z:JSON.stringify(z):t[H]=z)}return t}c.asValidOptions=function(q,d){return d?{...d,query:{...(q??{}),...d.query}}:{query:q}};c.encode=e;c.getToken=function(q,d){return q?C.supportsApiKey(q)&&(d||g.apiKey)?d||g.apiKey:A.id?.findCredential(q)?.token:
null};c.parseUrl=function(q){return"string"===typeof q?F.urlToObject(q):x.clone(q)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(c,g,A,x,F,C){c.simplify=async function(e,q,d){const v="string"===typeof e?A.urlToObject(e):e;e=q[0].spatialReference;const t=x.getJsonType(q[0]);q={...d,
query:{...v.query,f:"json",sr:F.srToRESTValue(e),geometries:JSON.stringify(C.encodeGeometries(q))}};({data:q}=await g(v.path+"/simplify",q));return C.decodeGeometries(q.geometries,t,e)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(c,g){c.decodeGeometries=function(A,x,F){const C=g.getGeometryType(x);return A.map(e=>{e=C.fromJSON(e);e.spatialReference=F;return e})};c.encodeGeometries=
function(A){return{geometryType:g.getJsonType(A[0]),geometries:A.map(x=>x.toJSON())}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(c,g,A,x){function F(r,p,a={}){const u=C(p,r);if(!u)throw a=t.getError(p,r),new g("unsupported-query","invalid SQL expression",{expression:p,error:a});r=a.expressionName||"expression";
if(a.validateStandardized&&!u.isStandardized)throw new g("unsupported-query",`${r} is not standard`,{expression:p});if(a.validateAggregate&&!u.isAggregate)throw new g("unsupported-query",`${r} does not contain a valid aggregate function`,{expression:p});return u.fieldNames}function C(r,p){return r?t.get(r,p):null}function e(r){return/\((.*?)\)/.test(r)?r:r.split(" as ")[0]}function q(r,p,a,u={}){const n=new Map;d(n,r,p,u.allowedFieldTypes??H,a);if(n.size)throw new g("unsupported-query",`${u.expressionName??
"expression"} contains invalid or missing fields`,{errors:Array.from(n.values()),query:u.query});}function d(r,p,a,u,n){n=n.includes("*")?[...a,...n.filter(D=>"*"!==D)]:n;for(const D of n)if(p.get(D))v(r,p,a,u,D);else try{const L=e(D),f=F(p,L,{validateStandardized:!0});for(const K of f)v(r,p,a,u,K)}catch(L){r.set(D,{type:"expression-error",expression:D,error:L})}}function v(r,p,a,u,n){(p=p.get(n))?a.has(p.name)?"all"!==u&&!1===u?.has(p.type)&&r.set(n,{type:"invalid-type",fieldName:p.name,fieldType:x.kebabDict.fromJSON(p.type),
allowedFieldTypes:Array.from(u,D=>x.kebabDict.fromJSON(D))}):r.set(n,{type:"missing-field",fieldName:p.name}):r.set(n,{type:"invalid-field",fieldName:n})}const t=new A.WhereClauseCache(50,500);A=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));const z=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),H=new Set(["esriFieldTypeString",
"esriFieldTypeGUID","esriFieldTypeGlobalID",...A,...z]);c.allDateAndTimeFieldTypes=z;c.getAliasFromFieldName=function(r){return r.split(" as ")[1]};c.getExpressionFromFieldName=e;c.getWhereClause=C;c.numericFieldTypes=A;c.validateFields=q;c.validateHaving=function(r,p,a,u,n){if(!a)return!0;const D=F(r,a,{validateAggregate:!0,expressionName:"having clause"});q(r,p,D,{expressionName:"having clause",query:n});if(!C(a,r)?.getExpressions().every(L=>{const {aggregateType:f,field:K}=L,Q=r.get(K)?.name;return u.some(T=>
{const {onStatisticField:Z,statisticType:W}=T;return r.get(Z)?.name===Q&&W.toLowerCase().trim()===f})}))throw new g("unsupported-query","expressions in having clause should also exist in outStatistics",{having:a});return!0};c.validateWhere=function(r,p,a,u){if(!a)return!0;a=F(r,a,{validateStandardized:!0,expressionName:"where clause"});q(r,p,a,{expressionName:"where clause",query:u});return!0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../LRUCache","./WhereClause"],function(c,g,A){class x{constructor(F,C){this._cache=new g.LRUCache(F);this._invalidCache=new g.LRUCache(C)}get(F,C){const e=`${C.uid}:${F}`,q=this._cache.get(e);if(q)return q;if(null!=this._invalidCache.get(e))return null;try{const d=A.WhereClause.create(F,C);this._cache.put(e,d);return d}catch(d){return this._invalidCache.put(e,d),null}}getError(F,C){return this._invalidCache.get(`${C.uid}:${F}`)??null}}c.WhereClauseCache=x;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(c,g){class A{constructor(x,F){this._storage=new g.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=x;this._storage.register(this);F&&this._storage.registerRemoveFunc("",F)}destroy(){this._storage.deregister(this);this._storage.destroy()}put(x,F,C=1){this._storage.put(this,x,F,C,1)}pop(x){return this._storage.pop(this,x)}get(x){return this._storage.get(this,x)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(x){this._storage.maxSize=
x}resetHitRate(){}}c.LRUCache=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../../arcade/featureset/support/errorsupport ../has ./AggregateFunctions ./DateOnly ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),function(c,g,A,x,F,C,e,q,d,v,t,z,H,r,p){function a(w){return Array.isArray(w)?
w:[w]}function u(w){return null!==w?!0!==w:null}function n(w,I){return null!=w&&null!=I?!0===w&&!0===I:!1===w||!1===I?!1:null}function D(w,I){return null!=w&&null!=I?!0===w||!0===I:!0===w||!0===I?!0:null}function L(w,I,h){if(null==w)return null;h=!1;for(const k of I)if(null==k)h=null;else if(w===k){h=!0;break}else if(q.isDateOrTimeValue(w)&&q.isDateOrTimeValue(k)&&(h=q.sqlCompare(w,k,"\x3d")))break;return h}function f(w,I,h){if(null==w)return null;let k="",y=W.Normal;for(let P=0;P<I.length;P++){const M=
I.charAt(P);switch(y){case W.Normal:M===h?y=W.Escaped:k="-[]/{}()*+?.\\^$|".includes(M)?k+("\\"+M):"%"===M?k+".*":"_"===M?k+".":k+M;break;case W.Escaped:k="-[]/{}()*+?.\\^$|".includes(M)?k+("\\"+M):k+M,y=W.Normal}}return(new RegExp("^"+k+"$","m")).test(w)}function K(w,I,h,k){w=k.getAttribute(w,I);I=h?.get(I);return null==w||"esriFieldTypeDate"!==I?.type&&"date"!==I?.type?null==w||"esriFieldTypeDateOnly"!==I?.type&&"date-only"!==I?.type?null==w||"esriFieldTypeTimeOnly"!==I?.type&&"time-only"!==I?.type?
null==w||"esriFieldTypeTimestampOffset"!==I?.type&&"timestamp-offset"!==I?.type?w:new t.SqlTimeStampOffset(w):H.TimeOnly.fromReader(w):C.DateOnly.fromReader(w):d.convertToExecutingTimeZone(new Date(w),h?.getLuxonTimeZone(I.name)??p.FixedOffsetZone.utcInstance)}const Q=new Set(["current_timestamp","current_date","current_time"]);class T{static makeBool(w){return!0===w}static featureValue(w,I,h,k){return K(w,I,h,k)}static equalsNull(w){return null===w}static applyLike(w,I,h){return f(w,I,h)}static ensureArray(w){return a(w)}static applyIn(w,
I,h){return L(w,I)}static currentDate(w){return C.DateOnly.fromNow(w)}static makeSqlInterval(w,I,h){return v.SqlInterval.createFromValueAndQualifier(w,I,h)}static convertInterval(w){return w instanceof v.SqlInterval?w.valueInMilliseconds():w}static currentTimestamp(w){return d.convertToExecutingTimeZone(new Date,w)}static compare(w,I,h,k){return q.sqlCompare(I,h,w)}static calculate(w,I,h,k){return e.sqlCalculateFunction(w,I,h,k)}static evaluateTime(w){return d.parseTime(w)}static evaluateTimestamp(w,
I,h){return d.parseTimestamp(w,I,h)}static evaluateDate(w,I){return d.parseDate(w,I)}static evaluateFunction(w,I,h){return z.evaluateFunction(w,I,h)}static lookup(w,I){w=I[w];return void 0===w?null:w}static between(w,I,h){return null==w||null==I[0]||null==I[1]?null:q.sqlCompare(w,I[0],"\x3e\x3d")&&q.sqlCompare(w,I[1],"\x3c\x3d")}static notbetween(w,I,h){return null==w||null==I[0]||null==I[1]?null:q.sqlCompare(w,I[0],"\x3c")||q.sqlCompare(w,I[1],"\x3e")}static ternaryNot(w){return u(w)}static ternaryAnd(w,
I){return n(w,I)}static ternaryOr(w,I){return D(w,I)}}class Z{constructor(w,I,h="UTC"){this.fieldsIndex=I;this.timeZone=h;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=r.WhereGrammar.parse(w);const {isStandardized:k,isAggregate:y,referencedFieldNames:P}=this._extractExpressionInfo(I);this._referencedFieldNames=P;this.isStandardized=k;this.isAggregate=y}static convertValueToStorageFormat(w,I=null){if(null===I)return d.isDate(w)?w.getTime():d.isDateTime(w)?w.toMillis():d.isTimestampOffset(w)?
w.toStorageFormat():d.isTimeOnly(w)?w.toStorageString():d.isDateOnly(w)?w.toStorageFormat():w;switch(I){case "date":if(d.isDate(w))return w.getTime();if(d.isDateTime(w))return w.toMillis();if(d.isTimestampOffset(w))return w.toMilliseconds();if(d.isDateOnly(w))return w.toNumber();break;case "date-only":if(d.isDate(w))return C.DateOnly.fromDateJS(w).toString();if(d.isTimestampOffset(w))return C.DateOnly.fromSqlTimeStampOffset(w).toString();if(d.isDateTime(w))return C.DateOnly.fromDateTime(w).toString();
break;case "time-only":if(d.isDate(w))return H.TimeOnly.fromDateJS(w).toStorageString();if(d.isDateTime(w))return H.TimeOnly.fromDateTime(w).toStorageString();if(d.isTimestampOffset(w))return H.TimeOnly.fromSqlTimeStampOffset(w).toStorageString();if(d.isTimeOnly(w))return w.toStorageString();break;case "timestamp-offset":if(d.isDate(w))return t.SqlTimeStampOffset.fromJSDate(w).toStorageFormat();if(d.isDateTime(w))return t.SqlTimeStampOffset.fromDateTime(w).toStorageFormat();if(d.isTimestampOffset(w))return w.toStorageFormat()}return w}static create(w,
I,h="UTC"){return new Z(w,I,h)}get fieldNames(){return this._referencedFieldNames}testSet(w,I=U){return!!this._evaluateNode(this.parseTree,null,I,w)}calculateValue(w,I=U){w=this._evaluateNode(this.parseTree,w,I,null);return w instanceof v.SqlInterval?w.valueInMilliseconds()/864E5:w}calculateValueCompiled(w,I=U){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(w,this.parameters,I,this.fieldsIndex,this.timeZone);if(x("esri-csp-restrictions"))return this.calculateValue(w,
I);this._compileMe();return this.parseTree._compiledVersion(w,this.parameters,I,this.fieldsIndex,this.timeZone)}testFeature(w,I=U){return!!this._evaluateNode(this.parseTree,w,I,null)}testFeatureCompiled(w,I=U){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(w,this.parameters,I,this.fieldsIndex,this.timeZone);if(x("esri-csp-restrictions"))return this.testFeature(w,I);this._compileMe();return!!this.parseTree._compiledVersion(w,this.parameters,I,this.fieldsIndex,this.timeZone)}get hasDateFunctions(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,w=>{"current-time"===w.type?this._hasDateFunctions=!0:"function"===w.type&&(this._hasDateFunctions=this._hasDateFunctions||Q.has(w.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const w=new Set;this._visitAll(this.parseTree,I=>{"function"===I.type&&w.add(I.name.toLowerCase())});return Array.from(w)}getExpressions(){const w=new Map;this._visitAll(this.parseTree,I=>{if("function"===
I.type){const h=I.name.toLowerCase();I=I.args.value[0];if("column-reference"===I.type){I=I.column;const k=`${h}-${I}`;w.has(k)||w.set(k,{aggregateType:h,field:I})}}});return[...w.values()]}getVariables(){const w=new Set;this._visitAll(this.parseTree,I=>{"parameter"===I.type&&w.add(I.value.toLowerCase())});return Array.from(w)}_compileMe(){const w="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter",
"fieldsIndex","timeZone",w)).bind(T)}_extractExpressionInfo(w){const I=[],h=new Set;let k=!0,y=!1;this._visitAll(this.parseTree,P=>{switch(P.type){case "column-reference":var M=w?.get(P.column);let S;M?M=S=M.name??"":(S=P.column,M=S.toLowerCase());h.has(M)||(h.add(M),I.push(S));P.column=S;break;case "function":const {name:Y,args:da}=P;P=da.value.length;k&&=z.isStandardized(Y,P);!1===y&&(y=F.isAggregate(Y,P))}});return{referencedFieldNames:Array.from(I),isStandardized:k,isAggregate:y}}_visitAll(w,
I){if(null!=w)switch(I(w),w.type){case "when-clause":this._visitAll(w.operand,I);this._visitAll(w.value,I);break;case "case-expression":for(const h of w.clauses)this._visitAll(h,I);"simple"===w.format&&this._visitAll(w.operand,I);null!==w.else&&this._visitAll(w.else,I);break;case "expression-list":for(const h of w.value)this._visitAll(h,I);break;case "unary-expression":this._visitAll(w.expr,I);break;case "binary-expression":this._visitAll(w.left,I);this._visitAll(w.right,I);break;case "function":this._visitAll(w.args,
I)}}evaluateNodeToJavaScript(w){switch(w.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(w.value)+", "+JSON.stringify(w.qualifier)+","+JSON.stringify(w.op)+")";case "case-expression":var I="";if("simple"===w.format){var h=this.evaluateNodeToJavaScript(w.operand);I="( ";for(let k=0;k<w.clauses.length;k++)I+=" (this.compare('\x3d',"+h+","+this.evaluateNodeToJavaScript(w.clauses[k].operand)+") ? ("+this.evaluateNodeToJavaScript(w.clauses[k].value)+") : "}else for(I=
"( ",h=0;h<w.clauses.length;h++)I+=" this.makeBool("+this.evaluateNodeToJavaScript(w.clauses[h].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(w.clauses[h].value)+") : ";I=null!==w.else?I+this.evaluateNodeToJavaScript(w.else):I+"null";return I+" )";case "parameter":return"this.lookup("+JSON.stringify(w.value.toLowerCase())+",lookups)";case "expression-list":I="[";for(h of w.value)"["!==I&&(I+=","),I+=this.evaluateNodeToJavaScript(h);return I+"]";case "unary-expression":return"this.ternaryNot("+
this.evaluateNodeToJavaScript(w.expr)+")";case "binary-expression":switch(w.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+" )";case "IS":if("null"!==w.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(w.left)+")";case "ISNOT":if("null"!==
w.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(w.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(w.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(w.right)+"), timeZone)";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(w.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(w.right)+"), timeZone))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(w.left)+
","+this.evaluateNodeToJavaScript(w.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+","+JSON.stringify(w.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+","+JSON.stringify(w.escape)+
"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(w.operator)+","+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(w.operator)+","+this.evaluateNodeToJavaScript(w.left)+","+this.evaluateNodeToJavaScript(w.right)+", timeZone)"}throw new A.SqlError(A.SqlErrorCodes.UnsupportedOperator,{operator:w.operator});
case "null":case "boolean":case "string":case "number":return JSON.stringify(w.value);case "time":return"this.evaluateTime("+JSON.stringify(w.value)+")";case "date":return"this.evaluateDate("+JSON.stringify(w.value)+", 'unknown')";case "timestamp":return"this.evaluateTimestamp("+JSON.stringify(w.value)+", 'unknown')";case "current-time":return"date"===w.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(w.column)+
",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(w.name)+","+this.evaluateNodeToJavaScript(w.args)+", timeZone)"}throw new A.SqlError(A.SqlErrorCodes.UnsupportedSyntax,{node:w.type});}_evaluateNode(w,I,h,k){switch(w.type){case "interval":return h=this._evaluateNode(w.value,I,h,k),v.SqlInterval.createFromValueAndQualifier(h,w.qualifier,w.op);case "case-expression":if("simple"===w.format){var y=this._evaluateNode(w.operand,I,h,k);for(var P=0;P<w.clauses.length;P++)if(q.sqlCompare(y,
this._evaluateNode(w.clauses[P].operand,I,h,k),"\x3d",this.timeZone))return this._evaluateNode(w.clauses[P].value,I,h,k)}else for(y=0;y<w.clauses.length;y++)if(!0===this._evaluateNode(w.clauses[y].operand,I,h,k))return this._evaluateNode(w.clauses[y].value,I,h,k);return null!==w.else?this._evaluateNode(w.else,I,h,k):null;case "parameter":return w=this.parameters[w.value.toLowerCase()],d.isDate(w)?p.DateTime.fromJSDate(w):w instanceof g.ArcadeDate?w.toDateTime():w;case "expression-list":y=[];for(var M of w.value)y.push(this._evaluateNode(M,
I,h,k));return y;case "unary-expression":return u(this._evaluateNode(w.expr,I,h,k));case "binary-expression":switch(w.operator){case "AND":return n(this._evaluateNode(w.left,I,h,k),this._evaluateNode(w.right,I,h,k));case "OR":return D(this._evaluateNode(w.left,I,h,k),this._evaluateNode(w.right,I,h,k));case "IS":if("null"!==w.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);return null===this._evaluateNode(w.left,I,h,k);case "ISNOT":if("null"!==w.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);
return null!==this._evaluateNode(w.left,I,h,k);case "IN":return y=a(this._evaluateNode(w.right,I,h,k)),L(this._evaluateNode(w.left,I,h,k),y,this.timeZone);case "NOT IN":return y=a(this._evaluateNode(w.right,I,h,k)),u(L(this._evaluateNode(w.left,I,h,k),y,this.timeZone));case "BETWEEN":return y=this._evaluateNode(w.left,I,h,k),w=this._evaluateNode(w.right,I,h,k),null==y||null==w[0]||null==w[1]?null:q.sqlCompare(y,w[0],"\x3e\x3d",this.timeZone)&&q.sqlCompare(y,w[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return y=
this._evaluateNode(w.left,I,h,k),w=this._evaluateNode(w.right,I,h,k),null==y||null==w[0]||null==w[1]?null:q.sqlCompare(y,w[0],"\x3c",this.timeZone)||q.sqlCompare(y,w[1],"\x3e",this.timeZone);case "LIKE":return f(this._evaluateNode(w.left,I,h,k),this._evaluateNode(w.right,I,h,k),w.escape);case "NOT LIKE":return u(f(this._evaluateNode(w.left,I,h,k),this._evaluateNode(w.right,I,h,k),w.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return q.sqlCompare(this._evaluateNode(w.left,
I,h,k),this._evaluateNode(w.right,I,h,k),w.operator,this.timeZone);case "-":case "+":case "*":case "/":case "||":return e.sqlCalculateFunction(w.operator,this._evaluateNode(w.left,I,h,k),this._evaluateNode(w.right,I,h,k),this.timeZone)}case "null":case "boolean":case "string":case "number":return w.value;case "date":return w.parsedValue??(w.parsedValue=d.parseDate(w.value,"unknown")),w.parsedValue;case "timestamp":return w.parsedValue??(w.parsedValue=d.parseTimestamp(w.value,"unknown")),w.parsedValue;
case "time":return d.parseTime(w.value);case "current-time":return"date"===w.mode?C.DateOnly.fromNow(this.timeZone):d.convertToExecutingTimeZone(new Date,this.timeZone);case "column-reference":return K(I,w.column,this.fieldsIndex,h);case "data-type":return w.value;case "function":if(this.isAggregate&&F.isAggregate(w.name,w.args.value.length)){I=[];for(y of w.args?.value||[]){M=[];for(P of k||[])M.push(this._evaluateNode(y,P,h,null));I.push(M)}return F.aggregateFunction(w.name,I)}h=this._evaluateNode(w.args,
I,h,k);return z.evaluateFunction(w.name,h,this.timeZone)}throw new A.SqlError(A.SqlErrorCodes.UnsupportedSyntax,{node:w.type});}}var W;(function(w){w[w.Normal=0]="Normal";w[w.Escaped=1]="Escaped"})(W||={});const U={getAttribute(w,I){return(w&&"object"===typeof w.attributes?w.attributes:w)[I]}};c.WhereClause=Z;c.defaultAttributeAdapter=U;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone",
"../chunks/datetime"],function(c,g,A,x){function F(v,t,z){return v<t?v-t:v>z?v-z:0}function C(v,t=!0){if(v instanceof x.Zone)return v;if("system"===v.toLowerCase())return"system";if("utc"===v.toLowerCase())return"UTC";if("unknown"===v.toLowerCase())return A.UnknownTimeZone.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(v)){const z=x.FixedOffsetZone.parseSpecifier("UTC"+(v.startsWith("+")||v.startsWith("-")?"":"+")+v);if(z)return z}v=x.IANAZone.create(v);if(!v.isValid){if(t)throw new q(c.ArcadeDateErrorCodes.TimeZoneNotRecognized);
return null}return v}c.ArcadeDateErrorCodes=void 0;(c.ArcadeDateErrorCodes||(c.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const e={[c.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class q extends Error{constructor(v,t){super(g.replace(e[v],t));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,q)}}class d{constructor(v){this._date=v;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(v=
0,t=1,z=1,H=0,r=0,p=0,a=0,u){if(isNaN(v)||isNaN(t)||isNaN(z)||isNaN(H)||isNaN(r)||isNaN(p)||isNaN(a))return null;const n=x.DateTime.local(v,t).daysInMonth;v=x.DateTime.fromObject({day:1>z?1:z>n?n:z,year:v,month:1>t?1:12<t?12:t,hour:0>H?0:23<H?23:H,minute:0>r?0:59<r?59:r,second:0>p?0:59<p?59:p,millisecond:0>a?0:999<a?999:a},{zone:C(u)});v=v.plus({months:F(t,1,12),days:F(z,1,n),hours:F(H,0,23),minutes:F(r,0,59),seconds:F(p,0,59),milliseconds:F(a,0,999)});return new d(v)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??
"system"}static arcadeDateAndZoneToArcadeDate(v,t){t=C(t);return v.isUnknownTimeZone||t===A.UnknownTimeZone.instance?d.fromParts(v.year,v.monthJS+1,v.day,v.hour,v.minute,v.second,v.millisecond,t):new d(v._date.setZone(t))}static dateJSToArcadeDate(v){return new d(x.DateTime.fromJSDate(v,{zone:"system"}))}static dateJSAndZoneToArcadeDate(v,t="system"){t=C(t);return new d(x.DateTime.fromJSDate(v,{zone:t}))}static unknownEpochToArcadeDate(v){return new d(x.DateTime.fromMillis(v,{zone:A.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(v){return new d(x.DateTime.fromMillis(v.getTime(),
{zone:A.UnknownTimeZone.instance}))}static epochToArcadeDate(v,t="system"){t=C(t);return new d(x.DateTime.fromMillis(v,{zone:t}))}static dateTimeToArcadeDate(v){return new d(v)}clone(){return new d(this._date)}changeTimeZone(v){v=C(v);return d.dateTimeToArcadeDate(this._date.setZone(v))}static dateTimeAndZoneToArcadeDate(v,t){t=C(t);return v.zone===A.UnknownTimeZone.instance||t===A.UnknownTimeZone.instance?d.fromParts(v.year,v.month,v.day,v.hour,v.minute,v.second,v.millisecond,t):new d(v.setZone(t))}static nowToArcadeDate(v){v=
C(v);return new d(x.DateTime.fromJSDate(new Date,{zone:v}))}static nowUTCToArcadeDate(){return new d(x.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===d.systemTimeZoneCanonicalName}equals(v){return this.isSystem&&v.isSystem?this.toNumber()===v.toNumber():this.isUnknownTimeZone!==v.isUnknownTimeZone?!1:this._date.equals(v._date)}get isUnknownTimeZone(){return this._date.zone===A.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let v=
this._date.weekday;6<v&&(v=0);return v}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const v=this.zone;return"fixed"===v.type?0===v.fixed?"UTC":v.formatOffset(0,"short"):v.name}stringify(){return JSON.stringify(this.toJSDate())}plus(v){return new d(this._date.plus(v))}diff(v,t="milliseconds"){return this._date.diff(v._date,t)[t]}toISODate(){return this._date.toISODate()}toISOString(v){return v?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(v,t){return this._date.toISOTime({suppressMilliseconds:v,
includeOffset:t&&!this.isUnknownTimeZone})}toFormat(v,t){this.isUnknownTimeZone&&(v=v.replaceAll("Z",""));return this._date.toFormat(v,t)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new d(this._date.toUTC())}toLocal(){return new d(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(v){if(!v)return null;
v=x.DateTime.fromISO(v,{setZone:!0});return new d(v)}}c.ArcadeDate=d;c.ArcadeDateError=q;c.arcadeDateErrorMessages=e;c.createDateTimeZone=C;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(c,g){function A(F){return F instanceof g.Zone?F===x.instance?!0:!1:"unknown"===F?.toString().toLowerCase()?!0:!1}class x{}x.instance=new g.IANAZone("Etc/UTC");c.UnknownTimeZone=x;c.adoptTimeZone=function(F,
C){return g.DateTime.fromObject({day:F.day,year:F.year,month:F.month,hour:F.hour,minute:F.minute,second:F.second,millisecond:F.millisecond},{zone:C})};c.isUnknownTimeZone=A;c.substituteUnknownTimezone=function(F){return A(F)?x.instance:F};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../core/string"],function(c,g){c.SqlErrorCodes=void 0;(function(e){e.InvalidFunctionParameters="InvalidFunctionParameters";
e.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";e.UnsupportedSqlFunction="UnsupportedSqlFunction";e.UnsupportedOperator="UnsupportedOperator";e.UnsupportedSyntax="UnsupportedSyntax";e.UnsupportedIsRhs="UnsupportedIsRhs";e.UnsupportedIsLhs="UnsupportedIsLhs";e.InvalidDataType="InvalidDataType";e.CannotCastValue="CannotCastValue";e.FunctionNotRecognized="FunctionNotRecognized";e.InvalidTime="InvalidTime";e.InvalidParameterCount="InvalidParameterCount";e.InvalidTimeStamp="InvalidTimeStamp";
e.InvalidDate="InvalidDate";e.InvalidOperator="InvalidOperator";e.IllegalInterval="IllegalInterval";e.YearMonthIntervals="YearMonthIntervals";e.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";e.MissingStatisticParameters="MissingStatisticParameters"})(c.SqlErrorCodes||(c.SqlErrorCodes={}));const A={[c.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[c.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[c.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",
[c.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[c.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[c.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[c.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[c.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[c.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[c.SqlErrorCodes.InvalidDate]:"Invalid date encountered",
[c.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[c.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[c.SqlErrorCodes.IllegalInterval]:"Illegal interval",[c.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[c.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[c.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[c.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[c.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",
[c.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class x extends Error{constructor(e,q){super(g.replace(A[e],q));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,x)}}c.FeatureSetErrorCodes=void 0;(function(e){e.NeverReach="NeverReach";e.NotImplemented="NotImplemented";e.Cancelled="Cancelled";e.InvalidStatResponse="InvalidStatResponse";e.InvalidRequest="InvalidRequest";e.RequestFailed="RequestFailed";
e.MissingFeatures="MissingFeatures";e.AggregationFieldNotFound="AggregationFieldNotFound";e.DataElementsNotFound="DataElementsNotFound"})(c.FeatureSetErrorCodes||(c.FeatureSetErrorCodes={}));const F={[c.FeatureSetErrorCodes.Cancelled]:"Cancelled",[c.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[c.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[c.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[c.FeatureSetErrorCodes.MissingFeatures]:"Missing features",
[c.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[c.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[c.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[c.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};class C extends Error{constructor(e,q){super(g.replace(F[e],q));this.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(this,C)}}c.FeatureSetError=
C;c.SqlError=x;c.featureSetErrorMessages=F;c.sqlErrorMessages=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(c,g,A,x,F,C){function e(t){if(null===t)return null;let z=0,H=0;for(let r=0;r<t.length;r++){const p=t[r];if(null!==p){if("number"!==typeof p)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);
H++;z+=p}}return 0===H?null:z/t.length}function q(t,z){if(null===t)return null;let H=null,r=null;for(const p of t)t=p,t=p instanceof A.DateOnly?p.toNumber():p instanceof F.TimeOnly?p.toNumber():p instanceof C.DateTime?p.toMillis():p instanceof x.SqlTimeStampOffset?p.toMilliseconds():p,null===H?(H=p,r=t):"max"===z&&null!==r&&null!==t&&r<=t?(H=p,r=t):"min"===z&&null!==r&&null!==t&&r>=t&&(H=p,r=t);return H}function d(t){if(null===t)return null;t=t.filter(r=>null!==r);if(0===t.length)return null;const z=
e(t);if(null===z)return null;let H=0;for(const r of t){if("number"!==typeof r)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);H+=(z-r)**2}return H/(t.length-1)}const v={min:{minParams:1,maxParams:1,evaluate:t=>q(t[0],"min")},max:{minParams:1,maxParams:1,evaluate:t=>q(t[0],"max")},avg:{minParams:1,maxParams:1,evaluate:t=>e(t[0])},sum:{minParams:1,maxParams:1,evaluate:t=>{t=t[0];if(null===t)t=null;else{var z=0;for(let H=0;H<t.length;H++){const r=t[H];if(null!==r){if("number"!==
typeof r)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);z+=r}}t=z}return t}},stddev:{minParams:1,maxParams:1,evaluate:t=>{t=t[0];null===t?t=null:(t=d(t),t=null===t?null:Math.sqrt(t));return t}},count:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].length},var:{minParams:1,maxParams:1,evaluate:t=>d(t[0])}};c.aggregateFunction=function(t,z){const H=v[t.toLowerCase()];if(null==H)throw new g.SqlError(g.SqlErrorCodes.FunctionNotRecognized);if(z.length<H.minParams||z.length>
H.maxParams)throw new g.SqlError(g.SqlErrorCodes.InvalidParameterCount,{name:t.toUpperCase()});return H.evaluate(z)};c.isAggregate=function(t,z){t=v[t.toLowerCase()];return null!=t&&z>=t.minParams&&z<=t.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(c,g,A,x){function F(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$\x26]");let q="";const d=
/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const v of e.match(d)||[])switch(v){case "D":q+="d";break;case "DD":q+="dd";break;case "DDD":q+="o";break;case "d":q+="c";break;case "ddd":q+="ccc";break;case "dddd":q+="cccc";break;case "M":q+="L";break;case "MM":q+="LL";break;case "MMM":q+="LLL";break;case "MMMM":q+="LLLL";break;case "YY":q+="yy";
break;case "Y":case "YYYY":q+="yyyy";break;case "Q":q+="q";break;case "X":case "x":q+=v;break;default:q=2<=v.length&&"["===v.slice(0,1)&&"]"===v.slice(-1)?q+`'${v.slice(1,-1)}'`:q+`'${v}'`}return q}class C{constructor(e,q,d){this._year=e;this._month=q;this._day=d;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return e instanceof
C&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new C(this._year,this._month,this._day)}toDateTime(e){return x.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:g.createDateTimeZone(e)})}toDateTimeLuxon(e){return x.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:g.createDateTimeZone(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=
null,q=!0){if(null===e||""===e)return this.toString();q&&(e=F(e));if(!e)return"";q=this.toDateTime("unknown");return g.ArcadeDate.dateTimeToArcadeDate(q).toFormat(e,{locale:A.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return g.ArcadeDate.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",
!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,q){return C.fromDateTime(this.toUTCDateTime().plus({[e]:q}))}toUTCDateTime(){return x.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,q){switch(q.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===q?
this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(e.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(e){e=x.DateTime.fromMillis(e,{zone:x.FixedOffsetZone.utcInstance});return e.isValid?C.fromParts(e.year,e.month,e.day):null}static fromSeconds(e){e=x.DateTime.fromSeconds(e,{zone:x.FixedOffsetZone.utcInstance});return e.isValid?C.fromParts(e.year,e.month,e.day):null}static fromReader(e){if(!e)return null;e=e.split("-");return 3!==e.length?null:new C(parseInt(e[0],10),parseInt(e[1],
10),parseInt(e[2],10))}static fromParts(e,q,d){e=new C(e,q,d);return!1===e.isValid?null:e}static fromDateJS(e){return C.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return C.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,q=null){if(""===e||null===e)return null;var d=[];if(q)(q=F(q))&&d.push(q);else if(null===q||""===q)return e=x.DateTime.fromISO(e,{setZone:!0}),e.isValid?C.fromParts(e.year,
e.month,e.day):null;for(const v of d)if(d=x.DateTime.fromFormat(e,q??v),d.isValid)return new C(d.year,d.month,d.day);return null}static fromNow(e="system"){e=x.DateTime.fromJSDate(new Date).setZone(g.createDateTimeZone(e));return new C(e.year,e.month,e.day)}}c.DateOnly=C;c.standardizeDateOnlyFormat=F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports","../../chunks/datetime"],function(c,g){function A(F){return Number.isNaN(F)||
0===F?F:Math.trunc(F)}class x{constructor(F){this._timeStampOffset=F;this._date=null}toDateTime(){this._date??(this._date=g.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return A(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return A(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return x.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(F){return new x(g.DateTime.fromJSDate(F).toISO({includeOffset:!0}))}static fromDateTime(F){return new x(F.toISO({includeOffset:!0}))}static fromParts(F,
C,e=0,q=0,d=0,v=0,t=0,z=!1,H=0,r=0){F=`${F.toString().padStart(4,"0")}-${C.toString().padStart(2,"0")}-${e.toString().padStart(2,"0")}`;C="";10>v&&(C="0");q=`${q.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${C+v.toString()}`;0!==t&&(q+="."+t.toString().padStart(3,"0"));t=`${z?"-":"+"}${H.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;return new x(F+"T"+q+t)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let F=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});F&&=F.replace(".000","");return F}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(F){F=this.toDateTime().plus(F);return x.fromDateTime(F)}}c.SqlTimeStampOffset=x;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(c,g,A,x){function F(e){if(!e)return"";const q=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let d="";for(const v of e.match(q)||
[])switch(v){case "SSS":d+=v;break;case "A":case "a":d+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":d+=v;break;default:d+=`'${v}'`}return d}class C{constructor(e,q,d,v){this._hour=e;this._minute=q;this._second=d;this._millisecond=v;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return e instanceof C&&e.hour===
this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new C(this.hour,this.minute,this.second,this.millisecond)}isValid(){return g.isInteger(this.hour)&&g.isInteger(this.minute)&&g.isInteger(this.second)&&g.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(e=null){return null===e||""===e?this.toString():(e=F(e))?x.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:A.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(e,q,d,v){e=new C(e,q,d,v);return e.isValid()?e:null}static fromReader(e){if(!e)return null;e=e.split(":");return 3!==e.length?null:new C(parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],
10),0)}static fromMilliseconds(e){return 864E5<e||0>e?null:new C(Math.floor(e/36E5%24),Math.floor(e/6E4%60),Math.floor(e/1E3%60),Math.floor(e%1E3))}static fromDateJS(e){return new C(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new C(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,q=null){if(""===e||null===e)return null;const d=[];if(q)(q=F(q))&&d.push(q);else if(null===
q||""===q)d.push("HH:mm:ss"),d.push("HH:mm:ss.SSS"),d.push("hh:mm:ss a"),d.push("hh:mm:ss.SSS a"),d.push("HH:mm"),d.push("hh:mm a"),d.push("H:mm"),d.push("h:mm a"),d.push("H:mm:ss"),d.push("h:mm:ss a"),d.push("H:mm:ss.SSS"),d.push("h:mm:ss.SSS a");for(const v of d)if(q=x.DateTime.fromFormat(e,v),q.isValid)return new C(q.hour,q.minute,q.second,q.millisecond);return null}plus(e,q){switch(e){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return C.fromDateTime(this.toUTCDateTime().plus({[e]:q}))}return null}toUTCDateTime(){return x.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,q){switch(q.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===q?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(e.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds}}}c.TimeOnly=C;c.standardizeTimeFormat=F;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(c,g){c.cloneGeometry=function(A){if(null==A)return null;const x=A.clone();void 0!==A.cache._geVersion&&(x.cache._geVersion=A.cache._geVersion);return x};c.convertLinearUnitsToCode=function(A){if(null==A)return null;if("number"===typeof A)return A;A=A.toLowerCase();A=A.replaceAll(/\s/g,"");A=A.replaceAll("-","");switch(A){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};c.convertSquareUnitsToCode=
function(A){if(null==A)return null;if("number"===typeof A)return A;A=A.toLowerCase();A=A.replaceAll(/\s/g,"");A=A.replaceAll("-","");switch(A){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};c.isInteger=function(A){return"number"===typeof A&&isFinite(A)&&Math.floor(A)===A};c.sameGeomType=function(A,x){return A===x||"point"===A&&"esriGeometryPoint"===x||"polyline"===A&&"esriGeometryPolyline"===
x||"polygon"===A&&"esriGeometryPolygon"===x||"extent"===A&&"esriGeometryEnvelope"===x||"multipoint"===A&&"esriGeometryMultipoint"===x||"point"===x&&"esriGeometryPoint"===A||"polyline"===x&&"esriGeometryPolyline"===A||"polygon"===x&&"esriGeometryPolygon"===A||"extent"===x&&"esriGeometryEnvelope"===A||"multipoint"===x&&"esriGeometryMultipoint"===A?!0:!1};c.shapeExtent=function(A){if(null==A)return null;switch(A.type){case "polygon":case "multipoint":case "polyline":return A.extent;case "point":return new g({xmin:A.x,
ymin:A.y,xmax:A.x,ymax:A.y,spatialReference:A.spatialReference});case "extent":return A}return null};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","../../arcade/featureset/support/errorsupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(c,g,A,x,F){function C(B,J,N){switch(N){case "+":return B+J;case "-":return B-J;case "*":return B*J;case "/":return B/J}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function e(B,J,N){switch(N){case "+":return J.plus({milliseconds:B.valueInMilliseconds()});case "-":return B.valueInMilliseconds()-J.toMillis()}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function q(B,J,N){switch(N){case "+":return J.plus("milliseconds",B.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function d(B,J,N){switch(N){case "+":return J.plus("milliseconds",B.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function v(B,
J,N){switch(N){case "+":return B.plus("milliseconds",J.valueInMilliseconds());case "-":return B.plus("milliseconds",-1*J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function t(B,J,N){switch(N){case "+":return J.addMilliseconds(B.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function z(B,J,N){switch(N){case "+":return x.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()+J.valueInMilliseconds());case "-":return x.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()-
J.valueInMilliseconds());case "*":return x.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()*J.valueInMilliseconds());case "/":return x.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()/J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function H(B,J,N){switch(N){case "+":return x.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()+J);case "-":return x.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()-J);case "*":return x.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()*
J);case "/":return x.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()/J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function r(B,J,N){switch(N){case "+":return x.SqlInterval.createFromMilliseconds(B+J.valueInMilliseconds());case "-":return x.SqlInterval.createFromMilliseconds(B-J.valueInMilliseconds());case "*":return x.SqlInterval.createFromMilliseconds(B*J.valueInMilliseconds());case "/":return x.SqlInterval.createFromMilliseconds(B/J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function p(B,J,N){switch(N){case "+":return B.plus("milliseconds",J.valueInMilliseconds());case "-":return B.plus("milliseconds",-1*J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function a(B,J,N){switch(N){case "+":return B.plus({milliseconds:J.valueInMilliseconds()});case "-":return B.minus({milliseconds:J.valueInMilliseconds()})}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function u(B,J,N){switch(N){case "+":return B.addMilliseconds(J.valueInMilliseconds());
case "-":return B.addMilliseconds(-1*J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function n(B,J,N){J*=864E5;switch(N){case "+":return B.plus({milliseconds:J});case "-":return B.minus({milliseconds:J})}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function D(B,J,N){J*=864E5;switch(N){case "+":return B.plus("milliseconds",J);case "-":return B.plus("milliseconds",-1*J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function L(B,J,N){J*=864E5;switch(N){case "+":return B.plus("milliseconds",
J);case "-":return B.plus("milliseconds",-1*J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function f(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function K(B,J,N){J*=864E5;switch(N){case "+":return B.addMilliseconds(J);case "-":return B.addMilliseconds(-1*J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Q(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function T(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Z(B,
J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function W(B,J,N){J=parseFloat(J);if(isNaN(J))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);return C(B,J,N)}function U(B,J,N){B=parseFloat(B);if(isNaN(B))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);return C(B,J,N)}function w(B,J,N){switch(N){case "+":return B+J}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function I(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function h(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function k(B,J,N){switch(N){case "-":return B.toDateTimeLuxon(J.zone).diff(J).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function y(B,J,N){switch(N){case "-":return B.toDateTimeLuxon(J.toDateTime().zone).diff(J.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function P(B,J,N){switch(N){case "-":return B.toDateTimeLuxon("UTC").diff(J.toDateTimeLuxon("UTC")).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function M(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function S(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Y(B,J,N){switch(N){case "-":return B.toDateTime().diff(J.toDateTimeLuxon(B.toDateTime().zone)).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function da(B,J,N){switch(N){case "-":return B.toDateTime().diff(J).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ha(B,J,N){switch(N){case "-":return B.toDateTime().diff(J.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function ma(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function pa(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function sa(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function qa(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function va(B,J,N){switch(N){case "-":return B.diff(J).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Ea(B,J,N){switch(N){case "-":return B.diff(J.toDateTimeLuxon(B.zone)).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function Da(B,J,N){switch(N){case "-":return B.diff(J.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Pa(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Sa(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Ta(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Oa(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function l(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function E(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function X(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ba(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ja(B,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}c.calculateDateOnlyAndDateOnly=P;c.calculateDateOnlyAndDateTime=k;c.calculateDateOnlyAndNumber=D;c.calculateDateOnlyAndSqlInterval=p;c.calculateDateOnlyAndString=Sa;c.calculateDateOnlyAndTimeOnly=M;c.calculateDateOnlyAndTimestamp=
y;c.calculateDateTimeAndDateOnly=Ea;c.calculateDateTimeAndDateTime=va;c.calculateDateTimeAndNumber=n;c.calculateDateTimeAndSqlInterval=a;c.calculateDateTimeAndString=Oa;c.calculateDateTimeAndTimeOnly=Pa;c.calculateDateTimeAndTimestamp=Da;c.calculateNumberAndDateOnly=Z;c.calculateNumberAndDateTime=f;c.calculateNumberAndNumber=C;c.calculateNumberAndSqlInterval=r;c.calculateNumberAndString=W;c.calculateNumberAndTimeOnly=T;c.calculateNumberAndTimestamp=Q;c.calculateSqlIntervalAndDateOnly=d;c.calculateSqlIntervalAndDateTime=
e;c.calculateSqlIntervalAndNumber=H;c.calculateSqlIntervalAndSqlInterval=z;c.calculateSqlIntervalAndString=I;c.calculateSqlIntervalAndTimeOnly=q;c.calculateSqlIntervalAndTimestamp=t;c.calculateStringAndDateOnly=X;c.calculateStringAndDateTime=ba;c.calculateStringAndNumber=U;c.calculateStringAndSqlInterval=h;c.calculateStringAndString=w;c.calculateStringAndTimeOnly=E;c.calculateStringAndTimestamp=ja;c.calculateTimeOnlyAndDateOnly=pa;c.calculateTimeOnlyAndDateTime=ma;c.calculateTimeOnlyAndNumber=L;c.calculateTimeOnlyAndSqlInterval=
v;c.calculateTimeOnlyAndString=Ta;c.calculateTimeOnlyAndTimeOnly=qa;c.calculateTimeOnlyAndTimestamp=sa;c.calculateTimestampAndDateOnly=Y;c.calculateTimestampAndDateTime=da;c.calculateTimestampAndNumber=K;c.calculateTimestampAndSqlInterval=u;c.calculateTimestampAndString=l;c.calculateTimestampAndTimeOnly=S;c.calculateTimestampAndTimestamp=ha;c.sqlCalculateFunction=function(B,J,N,V){if("||"===B)return F.evaluateFunction("concat",[J,N],V);if(null===J||null===N)return null;if(A.isNumber(J)){if(A.isNumber(N))return C(J,
N,B);if(A.isSqlInterval(N))return r(J,N,B);if(A.isTimeOnly(N))return T();if(A.isDateOnly(N))return Z();if(A.isTimestampOffset(N))return Q();if(A.isDateTime(N))return f();if(A.isString(N))return W(J,N,B)}else if(A.isDateOnly(J)){if(A.isNumber(N))return D(J,N,B);if(A.isSqlInterval(N))return p(J,N,B);if(A.isTimeOnly(N))return M();if(A.isDateOnly(N))return P(J,N,B);if(A.isTimestampOffset(N))return y(J,N,B);if(A.isDateTime(N))return k(J,N,B);if(A.isString(N))return Sa()}else if(A.isTimeOnly(J)){if(A.isNumber(N))return L(J,
N,B);if(A.isSqlInterval(N))return v(J,N,B);if(A.isTimeOnly(N))return qa();if(A.isDateOnly(N))return pa();if(A.isTimestampOffset(N))return sa();if(A.isDateTime(N))return ma();if(A.isString(N))return Ta()}else if(A.isSqlInterval(J)){if(A.isNumber(N))return H(J,N,B);if(A.isSqlInterval(N))return z(J,N,B);if(A.isTimeOnly(N))return q(J,N,B);if(A.isDateOnly(N))return d(J,N,B);if(A.isTimestampOffset(N))return t(J,N,B);if(A.isDateTime(N))return e(J,N,B);if(A.isString(N))return I()}else if(A.isDateTime(J)){if(A.isNumber(N))return n(J,
N,B);if(A.isSqlInterval(N))return a(J,N,B);if(A.isTimeOnly(N))return Pa();if(A.isDateOnly(N))return Ea(J,N,B);if(A.isTimestampOffset(N))return Da(J,N,B);if(A.isDateTime(N))return va(J,N,B);if(A.isString(N))return Oa()}else if(A.isTimestampOffset(J)){if(A.isNumber(N))return K(J,N,B);if(A.isSqlInterval(N))return u(J,N,B);if(A.isTimeOnly(N))return S();if(A.isDateOnly(N))return Y(J,N,B);if(A.isTimestampOffset(N))return ha(J,N,B);if(A.isDateTime(N))return da(J,N,B);if(A.isString(N))return l()}else if(A.isString(J)){if(A.isNumber(N))return U(J,
N,B);if(A.isSqlInterval(N))return h();if(A.isTimeOnly(N))return E();if(A.isDateOnly(N))return X();if(A.isTimestampOffset(N))return ja();if(A.isDateTime(N))return ba();if(A.isString(N))return w(J,N,B)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(c,g,A,x,F,C,e,q){function d(n,D,L){L=r.exec(n);if(null!==L){const [,f,K,Q,T,Z,W,U]=L;n=q.DateTime.fromObject({year:parseInt(f,10),month:parseInt(K,10),day:parseInt(Q,10),hour:parseInt(T,10),minute:parseInt(Z,10),second:parseInt(W,10),millisecond:U?parseInt(U.replace(".",""),10):0},{zone:e.substituteUnknownTimezone(D)});if(!1===n.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return n}L=p.exec(n);if(null!==L){const [,f,K,Q,T,Z,W,U,w,I,h]=L;n=F.SqlTimeStampOffset.fromParts(parseInt(f,
10),parseInt(K,10),parseInt(Q,10),parseInt(T,10),parseInt(Z,10),parseInt(W,10),U?parseInt(U.replace(".",""),10):0,"-"===w,parseInt(I,10),parseInt(h,10));if(!1===n.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return n}L=a.exec(n);if(null!==L){const [,f,K,Q,T,Z,W,U,w]=L;n=F.SqlTimeStampOffset.fromParts(parseInt(f,10),parseInt(K,10),parseInt(Q,10),parseInt(T,10),parseInt(Z,10),0,0,"-"===W,parseInt(U,10),parseInt(w,10));if(!1===n.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);
return n}L=u.exec(n);if(null!==L){const [,f,K,Q,T,Z]=L;n=q.DateTime.fromObject({year:parseInt(f,10),month:parseInt(K,10),day:parseInt(Q,10),hour:parseInt(T,10),minute:parseInt(Z,10),second:0},{zone:e.substituteUnknownTimezone(D)});if(!1===n.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return n}L=H.exec(n);if(null!==L){const [,f,K,Q]=L;n=q.DateTime.fromObject({year:parseInt(f,10),month:parseInt(K,10),day:parseInt(Q,10),hour:0,minute:0,second:0},{zone:e.substituteUnknownTimezone(D)});
if(!1===n.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return n}throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);}const v=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,t=/^(\d{1,2}):(\d{1,2})$/,z=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,H=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,r=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,p=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,a=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,
u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;c.convertToExecutingTimeZone=function(n,D){if(D instanceof q.Zone)return D===e.UnknownTimeZone.instance?q.DateTime.fromMillis(n.getTime(),{zone:e.UnknownTimeZone.instance}):q.DateTime.fromJSDate(n,{zone:D});switch(D){case "system":case "local":case null:return q.DateTime.fromJSDate(n);default:return"unknown"===D?.toLowerCase()?q.DateTime.fromMillis(n.getTime(),{zone:e.UnknownTimeZone.instance}):q.DateTime.fromJSDate(n,{zone:D})}};c.isDate=function(n){return n instanceof
Date};c.isDateOnly=function(n){return n instanceof A.DateOnly};c.isDateTime=function(n){return n instanceof q.DateTime};c.isNumber=function(n){return"number"===typeof n};c.isSqlInterval=function(n){return n instanceof x.SqlInterval};c.isString=function(n){return"string"===typeof n||n instanceof String};c.isTimeOnly=function(n){return n instanceof C.TimeOnly};c.isTimestampOffset=function(n){return n instanceof F.SqlTimeStampOffset};c.parseDate=function(n,D){const L=H.exec(n);if(null===L)try{return d(n,
D)}catch{throw new g.SqlError(g.SqlErrorCodes.InvalidDate);}const [,f,K,Q]=L;n=A.DateOnly.fromParts(parseInt(f,10),parseInt(K,10),parseInt(Q,10));if(null===n)throw new g.SqlError(g.SqlErrorCodes.InvalidDate);return n};c.parseTime=function(n){let D=v.exec(n);if(null!==D){const [,L,f,K]=D;n=C.TimeOnly.fromParts(parseInt(L,10),parseInt(f,10),parseInt(K,10),0);if(null!==n)return n;throw new g.SqlError(g.SqlErrorCodes.InvalidTime);}D=t.exec(n);if(null!==D){const [,L,f]=D;n=C.TimeOnly.fromParts(parseInt(L,
10),parseInt(f,10),0,0);if(null!==n)return n;throw new g.SqlError(g.SqlErrorCodes.InvalidTime);}D=z.exec(n);if(null!==D){const [,L,f,K,Q]=D;n=C.TimeOnly.fromParts(parseInt(L,10),parseInt(f,10),parseInt(K,10),parseInt(Q,10));if(null!==n)return n}throw new g.SqlError(g.SqlErrorCodes.InvalidTime);};c.parseTimestamp=d;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","../../arcade/featureset/support/errorsupport"],function(c,g){class A{constructor(){this.op=
"+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(x){if(null!==x.precision||null!==x.secondary)throw new g.SqlError(g.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(x,F){F.includes(".")?(F=F.split("."),x.second=parseFloat(F[0]),x.millis=parseInt(F[1],10)):x.second=parseFloat(F)}static createFromMilliseconds(x){const F=new A;F.second=x/1E3;return F}static createFromValueAndQualifier(x,F,C){let e=null;const q=new A;q.op="-"===
C?"-":"+";if("interval-period"===F.type){A._fixDefaults(F);C=RegExp("^[0-9]{1,}$");if("year"===F.period||"month"===F.period)throw new g.SqlError(g.SqlErrorCodes.YearMonthIntervals);if("second"===F.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(x))A._parseSecondsComponent(q,x);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);else if(C.test(x))q[F.period]=parseFloat(x);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}else{A._fixDefaults(F.start);A._fixDefaults(F.end);if("year"===
F.start.period||"month"===F.start.period||"year"===F.end.period||"month"===F.end.period)throw new g.SqlError(g.SqlErrorCodes.YearMonthIntervals);switch(F.start.period){case "day":switch(F.end.period){case "hour":e=RegExp("^[0-9]{1,} [0-9]{1,}$");if(e.test(x))q[F.start.period]=parseFloat(x.split(" ")[0]),q[F.end.period]=parseFloat(x.split(" ")[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "minute":e=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(e.test(x))q[F.start.period]=
parseFloat(x.split(" ")[0]),x=x.split(" ")[1].split(":"),q.hour=parseFloat(x[0]),q.minute=parseFloat(x[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "second":e=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(e.test(x))q[F.start.period]=parseFloat(x.split(" ")[0]),x=x.split(" ")[1].split(":"),q.hour=parseFloat(x[0]),q.minute=parseFloat(x[1]),A._parseSecondsComponent(q,x[2]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(F.end.period){case "minute":e=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(e.test(x))q.hour=parseFloat(x.split(":")[0]),q.minute=parseFloat(x.split(":")[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "second":e=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(e.test(x))x=x.split(":"),q.hour=parseFloat(x[0]),q.minute=parseFloat(x[1]),A._parseSecondsComponent(q,x[2]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(F.end.period){case "second":e=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(e.test(x))x=x.split(":"),q.minute=parseFloat(x[0]),A._parseSecondsComponent(q,x[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}}return q}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}c.SqlInterval=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ../string ./DateOnly ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(c,g,A,x,F,C,e,q){function d(a){return"string"===typeof a||a instanceof String}function v(a){return C.isDate(a)||C.isDateOnly(a)||
C.isDateTime(a)||C.isTimeOnly(a)||C.isTimestampOffset(a)?!1:!0}function t(a){return C.isDateOnly(a)||C.isTimeOnly(a)?a.toString():C.isTimestampOffset(a)?a.toSQLValue():C.isDateTime(a)?0===a.millisecond?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):C.isDate(a)?t(q.DateTime.fromJSDate(a)):a.toString()}function z(a){if(C.isDate(a))return x.DateOnly.fromDateJS(a);if(C.isDateTime(a))return x.DateOnly.fromParts(a.year,a.month,a.day);if(C.isDateOnly(a))return a;if(C.isTimeOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);
if(C.isTimestampOffset(a)&&null===x.DateOnly.fromParts(a.year,a.month,a.day))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(d(a)&&(a=x.DateOnly.fromReader(a),null!==a&&a.isValid))return a;throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}function H(a,u,n){if(C.isDate(a))return C.convertToExecutingTimeZone(a,u);if(C.isDateTime(a))return a;if(C.isDateOnly(a))return a.toDateTimeLuxon("unknown");if(C.isTimeOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(C.isTimestampOffset(a))return a;
if(d(a))return C.parseTimestamp(a,"unknown",n);throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}function r(a){if(C.isDate(a))return e.TimeOnly.fromDateJS(a);if(C.isDateTime(a))return e.TimeOnly.fromDateTime(a);if(C.isDateOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(C.isTimeOnly(a))return a;if(C.isTimestampOffset(a))return e.TimeOnly.fromSqlTimeStampOffset(a);if(d(a))return C.parseTime(a);throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}const p={extract:{minParams:2,
maxParams:2,evaluate:([a,u])=>{if(null==u)return null;if(C.isDate(u))switch(a.toUpperCase()){case "SECOND":return u.getSeconds();case "MINUTE":return u.getMinutes();case "HOUR":return u.getHours();case "DAY":return u.getDate();case "MONTH":return u.getMonth()+1;case "YEAR":return u.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(C.isDateTime(u))switch(a.toUpperCase()){case "SECOND":return u.second;case "MINUTE":return u.minute;case "HOUR":return u.hour;case "DAY":return u.day;
case "MONTH":return u.month;case "YEAR":return u.year}else if(C.isDateOnly(u))switch(a.toUpperCase()){case "DAY":return u.day;case "MONTH":return u.month;case "YEAR":return u.year}else if(C.isTimeOnly(u))switch(a.toUpperCase()){case "SECOND":return u.second;case "MINUTE":return u.minute;case "HOUR":return u.hour}else if(C.isTimestampOffset(u))switch(a.toUpperCase()){case "SECOND":return u.second;case "MINUTE":return u.minute;case "HOUR":return u.hour;case "DAY":return u.day;case "MONTH":return u.month;
case "YEAR":return u.year;case "TIMEZONE_HOUR":return u.timezoneOffsetHour;case "TIMEZONE_MINUTE":return u.timezoneOffsetMinutes}throw new g.SqlError(g.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(2===a.length){const [u,n]=a;return null==u||null==n?null:u.toString().substring(n-1)}if(3===a.length){const [u,n,D]=a;return null==u||null==n||null==D?null:0>=D?"":u.toString().substring(n-1,n+D-1)}}},position:{minParams:2,maxParams:2,
evaluate:([a,u])=>null==a||null==u?null:u.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{var u=3===a.length,n=u?a[1]:" ";u=u?a[2]:a[1];if(null==n||null==u)return null;n=`(${A.escapeRegExpString(n)})`;switch(a[0]){case "BOTH":return u.replaceAll(new RegExp(`^${n}*|${n}*$`,"g"),"");case "LEADING":return u.replaceAll(new RegExp(`^${n}*`,"g"),"");case "TRAILING":return u.replaceAll(new RegExp(`${n}*$`,"g"),"")}throw new g.SqlError(g.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:0<a[0]?1:0>a[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]**a[1]},mod:{minParams:2,
maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const u=a[0];a=2===a.length?10**a[1]:1;return null==u?null:Math.round(u*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:a=>null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>d(a[0])?a[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:a=>{let u="";for(let n=0;n<a.length;n++){if(null==a[n])return null;
u+=a[n].toString()}return u}},lower:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:a=>{for(const u of a)if(null!==u)return u;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:(a,u)=>F.sqlCompare(a[0],a[1],"\x3d")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,u)=>{const n=a[0];a=a[1];if(null===n)return null;switch(a.type){case "integer":if(!v(n))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);u=parseInt(n,10);if(isNaN(u))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return u;case "smallint":if(!v(n))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);u=parseInt(n,10);if(isNaN(u))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);
if(32767<u||-32767>u)throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return u;case "float":case "real":if(!v(n))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);u=parseFloat(n);if(isNaN(u))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return u;case "time":return r(n);case "date":return z(n);case "timestamp":return H(n,u,!0===a.withtimezone);case "varchar":u=t(n);if(u.length>a.size)throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return u;default:throw new g.SqlError(g.SqlErrorCodes.InvalidDataType);
}}}};c.evaluateFunction=function(a,u,n){const D=p[a.toLowerCase()];if(null==D)throw new g.SqlError(g.SqlErrorCodes.FunctionNotRecognized);if(u.length<D.minParams||u.length>D.maxParams)throw new g.SqlError(g.SqlErrorCodes.InvalidParameterCount,{name:a.toUpperCase()});return D.evaluate(u,n)};c.isStandardized=function(a,u){a=p[a.toLowerCase()];return null!=a&&u>=a.minParams&&u<=a.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(c,g,A,x,F,C){function e(a){return A.isDateTime(a)||A.isTimestampOffset(a)?!0:!1}function q(a){return A.isDateTime(a)||A.isDateOnly(a)||A.isTimestampOffset(a)||A.isTimeOnly(a)?!0:!1}function d(a){if(A.isDateTime(a))return a.toMillis();if(A.isDateOnly(a))return a.toNumber();if(A.isTimestampOffset(a))return a.toMilliseconds();throw new g.SqlError(g.SqlErrorCodes.InvalidDataType);}function v(a,u,n){switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<
u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function t(a,u,n){const D=parseFloat(u);if(!isNaN(D))return v(a,D,n);a=a.toString();switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function z(a,u,n){const D=parseFloat(a);if(!isNaN(D))return v(D,u,n);u=u.toString();switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<
u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function H(a,u,n){switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function r(a,u,n){a instanceof x.SqlTimeStampOffset&&(a=a.toDateTime());u instanceof x.SqlTimeStampOffset&&(u=u.toDateTime());a=p(a);u=p(u);switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=
u;case "\x3c\x3d":return a<=u}}function p(a){return 321408E5*a.year+26784E5*a.month+864E5*a.day+36E5*a.hour+6E4*a.minute+1E3*a.second+a.millisecond}c.dateValueInMilliseconds=d;c.isDateOrTimeValue=q;c.isDateTimeComparableValue=e;c.sqlCompare=function(a,u,n,D){if(null==a||null==u)return null;if(A.isNumber(a)){if(A.isNumber(u))return v(a,u,n);if(A.isString(u))return t(a,u,n);if(q(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}else if(A.isString(a)){if(A.isNumber(u))return z(a,u,n);if(A.isString(u))return H(a,u,n);if(A.isDateTime(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(A.isTimeOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(A.isTimestampOffset(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(A.isDateTime(a)){if(e(u)){if(a instanceof C.DateTime&&F.isUnknownTimeZone(a.zone)){if(u instanceof C.DateTime&&
!1===F.isUnknownTimeZone(u.zone)||u instanceof x.SqlTimeStampOffset)return r(a,u,n)}else if(u instanceof C.DateTime&&F.isUnknownTimeZone(u.zone)&&(a instanceof C.DateTime&&!1===F.isUnknownTimeZone(a.zone)||a instanceof x.SqlTimeStampOffset))return r(a,u,n);return v(d(a),d(u),n)}if(A.isString(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(u))return u=u.toDateTimeLuxon(a.zone),a=a.startOf("day"),v(a.toMillis(),u.toMillis(),n);if(A.isTimeOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
if(A.isNumber(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(A.isDateOnly(a)){if(A.isTimestampOffset(u))return a=a.toDateTimeLuxon(u.toDateTime().zone),u=u.startOfDay(),v(a.toMillis(),u.toMilliseconds(),n);if(A.isDateTime(u))return a=a.toDateTimeLuxon(u.zone),u=u.startOf("day"),v(a.toMillis(),u.toMillis(),n);if(A.isString(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(u))return v(a.toNumber(),u.toNumber(),n);if(A.isTimeOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
if(A.isNumber(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(A.isTimeOnly(a)){if(A.isTimeOnly(u))return v(a.toNumber(),u.toNumber(),n);if(A.isString(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(A.isNumber(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(e(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(A.isTimestampOffset(a)){if(e(u))return u instanceof C.DateTime&&
F.isUnknownTimeZone(u.zone)?r(a,u,n):v(d(a),d(u),n);if(A.isString(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(u))return u=u.toDateTimeLuxon(a.toDateTime().zone),a=a.startOfDay(),v(a.toMilliseconds(),u.toMillis(),n);if(A.isTimeOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(A.isNumber(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=
u;case "\x3c\x3d":return a<=u}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(c,g){var A={exports:{}};(function(C){(function(e,q){C.exports&&(C.exports=q())})(g.commonjsGlobal,function(){function e(d,v,t,z){d=Error.call(this,d);Object.setPrototypeOf&&Object.setPrototypeOf(d,e.prototype);d.expected=v;d.found=t;d.location=z;d.name="SyntaxError";return d}function q(d,v,t){t=t||" ";if(d.length>
v)return d;v-=d.length;t+=t.repeat(v);return d+t.slice(0,v)}(function(d,v){function t(){this.constructor=d}t.prototype=v.prototype;d.prototype=new t})(e,Error);e.prototype.format=function(d){var v="Error: "+this.message;if(this.location){var t=null,z;for(z=0;z<d.length;z++)if(d[z].source===this.location.source){t=d[z].text.split(/\r\n|\n|\r/g);break}d=this.location.start;z=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(d):d;var H=this.location.source+
":"+z.line+":"+z.column;if(t){var r=this.location.end,p=q("",z.line.toString().length," ");t=t[d.line-1];r=(d.line===r.line?r.column:t.length+1)-d.column||1;v+="\n --\x3e "+H+"\n"+p+" |\n"+z.line+" | "+t+"\n"+p+" | "+q("",d.column-1," ")+q("",r,"^")}else v+="\n at "+H}return v};e.buildMessage=function(d,v){function t(a){return a.charCodeAt(0).toString(16).toUpperCase()}function z(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+t(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+t(u)})}function H(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+t(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+t(u)})}function r(a){return p[a.type](a)}var p={literal:function(a){return'"'+
z(a.text)+'"'},class:function(a){var u=a.parts.map(function(n){return Array.isArray(n)?H(n[0])+"-"+H(n[1]):H(n)});return"["+(a.inverted?"^":"")+u.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){a=a.map(r);var u,n;a.sort();if(0<a.length){for(n=u=1;u<a.length;u++)a[u-1]!==a[u]&&(a[n]=a[u],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,
-1).join(", ")+", or "+a[a.length-1]}}(d)+" but "+(v?'"'+z(v)+'"':"end of input")+" found."};return{SyntaxError:e,parse:function(d,v){function t(G,O){O=void 0!==O?O:p(oa,m);throw new e(G,null,null,O);}function z(G,O){return{type:"literal",text:G,ignoreCase:O}}function H(G,O,R){return{type:"class",parts:G,inverted:O,ignoreCase:R}}function r(G){var O=Yb[G],R;if(!O){for(R=G-1;!Yb[R];)R--;O=Yb[R];for(O={line:O.line,column:O.column};R<G;)10===d.charCodeAt(R)?(O.line++,O.column=1):O.column++,R++;Yb[G]=
O}return O}function p(G,O,R){R=r(G);var ea=r(O);return{source:Md,start:{offset:G,line:R.line,column:R.column},end:{offset:O,line:ea.line,column:ea.column}}}function a(G){m<eb||(m>eb&&(eb=m,yc=[]),yc.push(G))}function u(){var G=m;ka();var O=D();O!==b?(ka(),oa=G,G=O):(m=G,G=b);return G}function n(){var G=m;var O=D();if(O!==b){var R=[];var ea=m;var ta=ka();var za=Wa();if(za!==b){var Fa=ka();var Ga=D();Ga!==b?ea=ta=[ta,za,Fa,Ga]:(m=ea,ea=b)}else m=ea,ea=b;for(;ea!==b;)R.push(ea),ea=m,ta=ka(),za=Wa(),
za!==b?(Fa=ka(),Ga=D(),Ga!==b?ea=ta=[ta,za,Fa,Ga]:(m=ea,ea=b)):(m=ea,ea=b);oa=G;G={type:"expression-list"};O=[O];for(ea=0;ea<R.length;ea++)O.push(R[ea][3]);G.value=O}else m=G,G=b;return G}function D(){var G=m;var O=L();if(O!==b){var R=[];var ea=m;var ta=ka();var za=N();if(za!==b){var Fa=ka();var Ga=L();Ga!==b?ea=ta=[ta,za,Fa,Ga]:(m=ea,ea=b)}else m=ea,ea=b;for(;ea!==b;)R.push(ea),ea=m,ta=ka(),za=N(),za!==b?(Fa=ka(),Ga=L(),Ga!==b?ea=ta=[ta,za,Fa,Ga]:(m=ea,ea=b)):(m=ea,ea=b);oa=G;G=nb(O,R)}else m=G,
G=b;return G}function L(){var G=m;var O=f();if(O!==b){var R=[];var ea=m;var ta=ka();var za=J();if(za!==b){var Fa=ka();var Ga=f();Ga!==b?ea=ta=[ta,za,Fa,Ga]:(m=ea,ea=b)}else m=ea,ea=b;for(;ea!==b;)R.push(ea),ea=m,ta=ka(),za=J(),za!==b?(Fa=ka(),Ga=f(),Ga!==b?ea=ta=[ta,za,Fa,Ga]:(m=ea,ea=b)):(m=ea,ea=b);oa=G;G=nb(O,R)}else m=G,G=b;return G}function f(){var G=m;var O=B();if(O===b){O=m;if(33===d.charCodeAt(m)){var R=Nd;m++}else R=b,0===ia&&a(Od);if(R!==b){var ea=m;ia++;if(61===d.charCodeAt(m)){var ta=
Rc;m++}else ta=b,0===ia&&a(Sc);ia--;ta===b?ea=void 0:(m=ea,ea=b);ea!==b?O=R=[R,ea]:(m=O,O=b)}else m=O,O=b}O!==b?(R=ka(),ea=f(),ea!==b?(oa=G,G={type:"unary-expression",operator:"NOT",expr:ea}):(m=G,G=b)):(m=G,G=b);if(G===b){O=m;G=Z();if(G!==b){ka();R=m;ea=[];ta=m;var za=ka();var Fa=K();if(Fa!==b){var Ga=ka();var ob=Z();ob!==b?ta=za=[za,Fa,Ga,ob]:(m=ta,ta=b)}else m=ta,ta=b;if(ta!==b)for(;ta!==b;)ea.push(ta),ta=m,za=ka(),Fa=K(),Fa!==b?(Ga=ka(),ob=Z(),ob!==b?ta=za=[za,Fa,Ga,ob]:(m=ta,ta=b)):(m=ta,ta=
b);else ea=b;ea!==b&&(oa=R,ea={type:"arithmetic",tail:ea});R=ea;R===b&&(R=m,ea=T(),ea!==b?(ka(),ta=Ja(),ta!==b?(ka(),ta=n(),ta!==b?(ka(),za=Ka(),za!==b?(oa=R,R={op:ea,right:ta}):(m=R,R=b)):(m=R,R=b)):(m=R,R=b)):(m=R,R=b),R===b&&(R=m,ea=T(),ea!==b?(ka(),ta=Ja(),ta!==b?(ka(),ta=Ka(),ta!==b?(oa=R,R={op:ea,right:{type:"expression-list",value:[]}}):(m=R,R=b)):(m=R,R=b)):(m=R,R=b),R===b&&(R=m,ea=T(),ea!==b?(ka(),ta=Y(),ta!==b?(oa=R,R={op:ea,right:ta}):(m=R,R=b)):(m=R,R=b))),R===b&&(R=m,za=B(),za!==b?(ka(),
ea=V(),ea!==b?(ka(),ta=Z(),ta!==b?(ka(),Fa=J(),Fa!==b?(ka(),za=Z(),za!==b?(oa=R,R={op:"NOT"+ea,right:{type:"expression-list",value:[ta,za]}}):(m=R,R=b)):(m=R,R=b)):(m=R,R=b)):(m=R,R=b)):(m=R,R=b),R===b&&(R=m,za=V(),za!==b?(ka(),ea=Z(),ea!==b?(ka(),ta=J(),ta!==b?(ka(),Fa=Z(),Fa!==b?(oa=R,R={op:za,right:{type:"expression-list",value:[ea,Fa]}}):(m=R,R=b)):(m=R,R=b)):(m=R,R=b)):(m=R,R=b)),R===b&&(R=m,ea=ba(),ea!==b?(ka(),ta=B(),ta!==b?(ka(),ta=Z(),ta!==b?(oa=R,R={op:ea+"NOT",right:ta}):(m=R,R=b)):(m=
R,R=b)):(m=R,R=b),R===b&&(R=m,ea=ba(),ea!==b?(ka(),ta=Z(),ta!==b?(oa=R,R={op:ea,right:ta}):(m=R,R=b)):(m=R,R=b)),R===b&&(R=m,ea=Q(),ea!==b?(ka(),ta=qa(),ta!==b?(ka(),za=m,d.substr(m,6).toLowerCase()===Pd?(Fa=d.substr(m,6),m+=6):(Fa=b,0===ia&&a(Qd)),Fa!==b?(Fa=m,ia++,Ga=y(),ia--,Ga===b?Fa=void 0:(m=Fa,Fa=b),Fa!==b?(oa=za,za="ESCAPE"):(m=za,za=b)):(m=za,za=b),za!==b?(ka(),za=va(),za!==b?(oa=R,R={op:ea,right:ta,escape:za.value}):(m=R,R=b)):(m=R,R=b)):(m=R,R=b)):(m=R,R=b),R===b&&(R=m,ea=Q(),ea!==b?(ka(),
ta=qa(),ta!==b?(oa=R,R={op:ea,right:ta,escape:""}):(m=R,R=b)):(m=R,R=b))))));R===b&&(R=null);oa=O;O=R;""==O||void 0==O||null==O?O=G:(R=null,O=R="arithmetic"==O.type?nb(G,O.tail):Mb(O.op,G,O.right,O.escape))}else m=O,O=b;G=O}return G}function K(){if(d.substr(m,2)===Tc){var G=Tc;m+=2}else G=b,0===ia&&a(Rd);G===b&&(62===d.charCodeAt(m)?(G=Sd,m++):(G=b,0===ia&&a(Td)),G===b&&(d.substr(m,2)===Uc?(G=Uc,m+=2):(G=b,0===ia&&a(Ud)),G===b&&(d.substr(m,2)===Vc?(G=Vc,m+=2):(G=b,0===ia&&a(Vd)),G===b&&(60===d.charCodeAt(m)?
(G=Wd,m++):(G=b,0===ia&&a(Xd)),G===b&&(61===d.charCodeAt(m)?(G=Rc,m++):(G=b,0===ia&&a(Sc)),G===b&&(d.substr(m,2)===Wc?(G=Wc,m+=2):(G=b,0===ia&&a(Yd))))))));return G}function Q(){var G;var O=G=m;var R=B();if(R!==b){var ea=ka();var ta=ja();ta!==b?O=R=[R,ea,ta]:(m=O,O=b)}else m=O,O=b;O!==b&&(oa=G,O=O[0]+" "+O[2]);G=O;G===b&&(G=ja());return G}function T(){var G;var O=G=m;var R=B();if(R!==b){var ea=ka();var ta=X();ta!==b?O=R=[R,ea,ta]:(m=O,O=b)}else m=O,O=b;O!==b&&(oa=G,O=O[0]+" "+O[2]);G=O;G===b&&(G=
X());return G}function Z(){var G=m;var O=U();if(O!==b){var R=[];var ea=m;var ta=ka();var za=W();if(za!==b){var Fa=ka();var Ga=U();Ga!==b?ea=ta=[ta,za,Fa,Ga]:(m=ea,ea=b)}else m=ea,ea=b;for(;ea!==b;)R.push(ea),ea=m,ta=ka(),za=W(),za!==b?(Fa=ka(),Ga=U(),Ga!==b?ea=ta=[ta,za,Fa,Ga]:(m=ea,ea=b)):(m=ea,ea=b);oa=G;G=nb(O,R)}else m=G,G=b;return G}function W(){if(43===d.charCodeAt(m)){var G=zc;m++}else G=b,0===ia&&a(Ac);G===b&&(45===d.charCodeAt(m)?(G=Bc,m++):(G=b,0===ia&&a(Cc)),G===b&&(d.substr(m,2)===Xc?
(G=Xc,m+=2):(G=b,0===ia&&a(Zd))));return G}function U(){var G=m;var O=I();if(O!==b){var R=[];var ea=m;var ta=ka();var za=w();if(za!==b){var Fa=ka();var Ga=I();Ga!==b?ea=ta=[ta,za,Fa,Ga]:(m=ea,ea=b)}else m=ea,ea=b;for(;ea!==b;)R.push(ea),ea=m,ta=ka(),za=w(),za!==b?(Fa=ka(),Ga=I(),Ga!==b?ea=ta=[ta,za,Fa,Ga]:(m=ea,ea=b)):(m=ea,ea=b);oa=G;G=nb(O,R)}else m=G,G=b;return G}function w(){if(42===d.charCodeAt(m)){var G=$d;m++}else G=b,0===ia&&a(ae);G===b&&(47===d.charCodeAt(m)?(G=be,m++):(G=b,0===ia&&a(ce)));
return G}function I(){var G=va();if(G===b){var O=m;var R=m;var ea=Sa();if(ea!==b){var ta=Ta();if(ta!==b){var za=Oa();za!==b?(oa=R,R=parseFloat(ea+ta+za)):(m=R,R=b)}else m=R,R=b}else m=R,R=b;R===b&&(R=m,ea=Sa(),ea!==b?(ta=Ta(),ta!==b?(oa=R,R=parseFloat(ea+ta)):(m=R,R=b)):(m=R,R=b),R===b&&(R=m,ea=Sa(),ea!==b?(ta=Oa(),ta!==b?(oa=R,R=parseFloat(ea+ta)):(m=R,R=b)):(m=R,R=b),R===b&&(R=m,ea=Sa(),ea!==b&&(oa=R,ea=parseFloat(ea)),R=ea)));var Fa=R;if(Fa!==b){var Ga=m;ia++;var ob=k();ia--;ob===b?Ga=void 0:(m=
Ga,Ga=b);Ga!==b?(oa=O,O={type:"number",value:Fa}):(m=O,O=b)}else m=O,O=b;G=O;if(G===b){var pb=m;var Jb=m;if(d.substr(m,4).toLowerCase()===de){var Zb=d.substr(m,4);m+=4}else Zb=b,0===ia&&a(ee);if(Zb!==b){var Nb=m;ia++;var fe=y();ia--;fe===b?Nb=void 0:(m=Nb,Nb=b);Nb!==b?Jb=Zb=[Zb,Nb]:(m=Jb,Jb=b)}else m=Jb,Jb=b;var qb=Jb;qb!==b&&(oa=pb,qb={type:"boolean",value:!0});pb=qb;if(pb===b){pb=m;var Kb=m;if(d.substr(m,5).toLowerCase()===ge){var $b=d.substr(m,5);m+=5}else $b=b,0===ia&&a(he);if($b!==b){var Ob=
m;ia++;var ie=y();ia--;ie===b?Ob=void 0:(m=Ob,Ob=b);Ob!==b?Kb=$b=[$b,Ob]:(m=Kb,Kb=b)}else m=Kb,Kb=b;qb=Kb;qb!==b&&(oa=pb,qb={type:"boolean",value:!1});pb=qb}G=pb;if(G===b){var je=m;var Lb=m;if(d.substr(m,4).toLowerCase()===ke){var ac=d.substr(m,4);m+=4}else ac=b,0===ia&&a(le);if(ac!==b){var Pb=m;ia++;var me=y();ia--;me===b?Pb=void 0:(m=Pb,Pb=b);Pb!==b?Lb=ac=[ac,Pb]:(m=Lb,Lb=b)}else m=Lb,Lb=b;var Dc=Lb;Dc!==b&&(oa=je,Dc={type:"null",value:null});G=Dc;if(G===b){var rb=m;if(la()!==b){ka();var bc=qa();
bc!==b?(oa=rb,"string"===bc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(bc.value)&&t("Date literal is invalid"),rb={type:"date",value:bc.value}):(m=rb,rb=b)}else m=rb,rb=b;G=rb;if(G===b){var sb=
m;if(fa()!==b){ka();var cc=qa();cc!==b?(oa=sb,"string"===cc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(cc.value)&&t("Timestamp literal is invalid"),sb={type:"timestamp",value:cc.value}):
(m=sb,sb=b)}else m=sb,sb=b;G=sb;if(G===b){var Ua=m;var Ec=wa();if(Ec!==b){ka();if(45===d.charCodeAt(m)){var hb=Bc;m++}else hb=b,0===ia&&a(Cc);hb===b&&(43===d.charCodeAt(m)?(hb=zc,m++):(hb=b,0===ia&&a(Ac)));if(hb!==b){ka();var Qb=qa();if(Qb!==b){ka();var Yc=ha();Yc!==b?(oa=Ua,Ua={type:"interval",value:Qb,qualifier:Yc,op:hb}):(m=Ua,Ua=b)}else m=Ua,Ua=b}else m=Ua,Ua=b}else m=Ua,Ua=b;Ua===b&&(Ua=m,Ec=wa(),Ec!==b?(ka(),hb=qa(),hb!==b?(ka(),Qb=ha(),Qb!==b?(oa=Ua,Ua={type:"interval",value:hb,qualifier:Qb,
op:""}):(m=Ua,Ua=b)):(m=Ua,Ua=b)):(m=Ua,Ua=b));G=Ua;if(G===b){var tb=m;if(na()!==b){ka();var dc=qa();dc!==b?(oa=tb,"string"===dc.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(dc.value)&&t("Time literal is invalid"),tb={type:"time",value:dc.value}):(m=tb,tb=b)}else m=tb,tb=b;G=tb}}}}}}}var La=G;if(La===b){var Za=m;var ub=m;if(d.substr(m,7).toLowerCase()===ne){var Zc=d.substr(m,7);m+=7}else Zc=b,0===ia&&a(oe);if(Zc!==b){var ec=m;ia++;
var pe=y();ia--;pe===b?ec=void 0:(m=ec,ec=b);ec!==b?(oa=ub,ub="EXTRACT"):(m=ub,ub=b)}else m=ub,ub=b;if(ub!==b){ka();var qe=Ja();if(qe!==b){ka();var $a=ra();if($a===b&&($a=ua(),$a===b&&($a=Ca(),$a===b&&($a=xa(),$a===b&&($a=Ba(),$a===b&&($a=Aa(),$a===b)))))){var vb=m;if(d.substr(m,13).toLowerCase()===re){var $c=d.substr(m,13);m+=13}else $c=b,0===ia&&a(se);if($c!==b){var fc=m;ia++;var te=y();ia--;te===b?fc=void 0:(m=fc,fc=b);fc!==b?(oa=vb,vb="TIMEZONE_HOUR"):(m=vb,vb=b)}else m=vb,vb=b;$a=vb;if($a===
b){var wb=m;if(d.substr(m,15).toLowerCase()===ue){var ad=d.substr(m,15);m+=15}else ad=b,0===ia&&a(ve);if(ad!==b){var gc=m;ia++;var we=y();ia--;we===b?gc=void 0:(m=gc,gc=b);gc!==b?(oa=wb,wb="TIMEZONE_MINUTE"):(m=wb,wb=b)}else m=wb,wb=b;$a=wb}}var bd=$a;if(bd!==b){ka();var xe=aa();if(xe!==b){ka();var cd=D();if(cd!==b){ka();var ye=Ka();ye!==b?(oa=Za,Za={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:bd},cd]}}):(m=Za,Za=b)}else m=Za,Za=b}else m=Za,Za=b}else m=
Za,Za=b}else m=Za,Za=b}else m=Za,Za=b;La=Za;if(La===b){var ab=m;var xb=m;if(d.substr(m,9).toLowerCase()===ze){var dd=d.substr(m,9);m+=9}else dd=b,0===ia&&a(Ae);if(dd!==b){var hc=m;ia++;var Be=y();ia--;Be===b?hc=void 0:(m=hc,hc=b);hc!==b?(oa=xb,xb="SUBSTRING"):(m=xb,xb=b)}else m=xb,xb=b;if(xb!==b){ka();var Ce=Ja();if(Ce!==b){ka();var Fc=D();if(Fc!==b){ka();var De=aa();if(De!==b){ka();var Gc=D();if(Gc!==b){ka();var ib=m;var yb=m;if(d.substr(m,3).toLowerCase()===Ee){var ed=d.substr(m,3);m+=3}else ed=
b,0===ia&&a(Fe);if(ed!==b){var ic=m;ia++;var Ge=y();ia--;Ge===b?ic=void 0:(m=ic,ic=b);ic!==b?(oa=yb,yb="FOR"):(m=yb,yb=b)}else m=yb,yb=b;var Rb=yb;if(Rb!==b){var He=ka();var fd=D();if(fd!==b){var Ie=ka();ib=Rb=[Rb,He,fd,Ie]}else m=ib,ib=b}else m=ib,ib=b;ib===b&&(ib=null);Rb=Ka();Rb!==b?(oa=ab,ab={type:"function",name:"substring",args:{type:"expression-list",value:ib?[Fc,Gc,ib[2]]:[Fc,Gc]}}):(m=ab,ab=b)}else m=ab,ab=b}else m=ab,ab=b}else m=ab,ab=b}else m=ab,ab=b}else m=ab,ab=b;La=ab;if(La===b){var Na=
m;var Hc=ca();if(Hc!==b){ka();var Ic=Ja();if(Ic!==b){ka();var jb=da();jb===b&&(jb=null);ka();var Sb=D();if(Sb!==b){ka();var Jc=aa();if(Jc!==b){ka();var gd=D();if(gd!==b){ka();var Je=Ka();Je!==b?(oa=Na,Na={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Sb,gd]}}):(m=Na,Na=b)}else m=Na,Na=b}else m=Na,Na=b}else m=Na,Na=b}else m=Na,Na=b}else m=Na,Na=b;Na===b&&(Na=m,Hc=ca(),Hc!==b?(ka(),Ic=Ja(),Ic!==b?(ka(),jb=da(),jb===b&&(jb=null),ka(),Sb=D(),
Sb!==b?(ka(),Jc=Ka(),Jc!==b?(oa=Na,Na={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Sb]}}):(m=Na,Na=b)):(m=Na,Na=b)):(m=Na,Na=b)):(m=Na,Na=b));La=Na;if(La===b){var bb=m;var zb=m;if(d.substr(m,8).toLowerCase()===Ke){var hd=d.substr(m,8);m+=8}else hd=b,0===ia&&a(Le);if(hd!==b){var jc=m;ia++;var Me=y();ia--;Me===b?jc=void 0:(m=jc,jc=b);jc!==b?(oa=zb,zb="POSITION"):(m=zb,zb=b)}else m=zb,zb=b;if(zb!==b){ka();var Ne=Ja();if(Ne!==b){ka();var id=
D();if(id!==b){ka();var Oe=X();if(Oe!==b){ka();var jd=D();if(jd!==b){ka();var Pe=Ka();Pe!==b?(oa=bb,bb={type:"function",name:"position",args:{type:"expression-list",value:[id,jd]}}):(m=bb,bb=b)}else m=bb,bb=b}else m=bb,bb=b}else m=bb,bb=b}else m=bb,bb=b}else m=bb,bb=b;La=bb;if(La===b){var cb=m;var Ab=m;if(d.substr(m,4).toLowerCase()===Qe){var kd=d.substr(m,4);m+=4}else kd=b,0===ia&&a(Re);if(kd!==b){var kc=m;ia++;var Se=y();ia--;Se===b?kc=void 0:(m=kc,kc=b);kc!==b?(oa=Ab,Ab="CAST"):(m=Ab,Ab=b)}else m=
Ab,Ab=b;if(Ab!==b){ka();var Te=Ja();if(Te!==b){ka();var ld=D();if(ld!==b){ka();var Bb=m;if(d.substr(m,2).toLowerCase()===Ue){var md=d.substr(m,2);m+=2}else md=b,0===ia&&a(Ve);if(md!==b){var lc=m;ia++;var We=y();ia--;We===b?lc=void 0:(m=lc,lc=b);lc!==b?(oa=Bb,Bb="AS"):(m=Bb,Bb=b)}else m=Bb,Bb=b;var Xe=Bb;if(Xe!==b){ka();var Ha=m;var Cb=m;if(d.substr(m,7).toLowerCase()===Ye){var nd=d.substr(m,7);m+=7}else nd=b,0===ia&&a(Ze);if(nd!==b){var mc=m;ia++;var $e=y();ia--;$e===b?mc=void 0:(m=mc,mc=b);mc!==
b?(oa=Cb,Cb="INTEGER"):(m=Cb,Cb=b)}else m=Cb,Cb=b;var Ma=Cb;Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"integer"}});Ha=Ma;if(Ha===b){Ha=m;var Db=m;if(d.substr(m,8).toLowerCase()===af){var od=d.substr(m,8);m+=8}else od=b,0===ia&&a(bf);if(od!==b){var nc=m;ia++;var cf=y();ia--;cf===b?nc=void 0:(m=nc,nc=b);nc!==b?(oa=Db,Db="SMALLINT"):(m=Db,Db=b)}else m=Db,Db=b;Ma=Db;Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"smallint"}});Ha=Ma;if(Ha===b){Ha=m;var Eb=m;if(d.substr(m,5).toLowerCase()===df){var pd=
d.substr(m,5);m+=5}else pd=b,0===ia&&a(ef);if(pd!==b){var oc=m;ia++;var ff=y();ia--;ff===b?oc=void 0:(m=oc,oc=b);oc!==b?(oa=Eb,Eb="FLOAT"):(m=Eb,Eb=b)}else m=Eb,Eb=b;Ma=Eb;Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"float"}});Ha=Ma;if(Ha===b){Ha=m;var Fb=m;if(d.substr(m,4).toLowerCase()===gf){var qd=d.substr(m,4);m+=4}else qd=b,0===ia&&a(hf);if(qd!==b){var pc=m;ia++;var jf=y();ia--;jf===b?pc=void 0:(m=pc,pc=b);pc!==b?(oa=Fb,Fb="REAL"):(m=Fb,Fb=b)}else m=Fb,Fb=b;Ma=Fb;Ma!==b&&(oa=Ha,Ma={type:"data-type",
value:{type:"real"}});Ha=Ma;if(Ha===b&&(Ha=m,Ma=la(),Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"date"}}),Ha=Ma,Ha===b&&(Ha=m,Ma=fa(),Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"timestamp"}}),Ha=Ma,Ha===b&&(Ha=m,Ma=na(),Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"time"}}),Ha=Ma,Ha===b)))){Ha=m;var Gb=m;if(d.substr(m,7).toLowerCase()===kf){var rd=d.substr(m,7);m+=7}else rd=b,0===ia&&a(lf);if(rd!==b){var qc=m;ia++;var mf=y();ia--;mf===b?qc=void 0:(m=qc,qc=b);qc!==b?(oa=Gb,Gb="VARCHAR"):
(m=Gb,Gb=b)}else m=Gb,Gb=b;Ma=Gb;if(Ma!==b){ka();var nf=Ja();if(nf!==b){ka();var sd=l();if(sd!==b){ka();var of=Ka();of!==b?(oa=Ha,Ha={type:"data-type",value:{type:"varchar",size:parseInt(sd)}}):(m=Ha,Ha=b)}else m=Ha,Ha=b}else m=Ha,Ha=b}else m=Ha,Ha=b}}}}var td=Ha;if(td!==b){ka();var pf=Ka();pf!==b?(oa=cb,cb={type:"function",name:"cast",args:{type:"expression-list",value:[ld,td]}}):(m=cb,cb=b)}else m=cb,cb=b}else m=cb,cb=b}else m=cb,cb=b}else m=cb,cb=b}else m=cb,cb=b;La=cb;if(La===b){var kb=m;var db=
m;var Tb=h();Tb!==b&&(oa=db);db=Tb;if(db===b)if(db=m,96===d.charCodeAt(m)?(Tb=ud,m++):(Tb=b,0===ia&&a(vd)),Tb!==b){var rc=[];if(wd.test(d.charAt(m))){var lb=d.charAt(m);m++}else lb=b,0===ia&&a(xd);if(lb!==b)for(;lb!==b;)rc.push(lb),wd.test(d.charAt(m))?(lb=d.charAt(m),m++):(lb=b,0===ia&&a(xd));else rc=b;rc!==b?(96===d.charCodeAt(m)?(lb=ud,m++):(lb=b,0===ia&&a(vd)),lb!==b?(oa=db,db=rc.join("")):(m=db,db=b)):(m=db,db=b)}else m=db,db=b;var yd=db;if(yd!==b){ka();var qf=Ja();if(qf!==b){ka();var sc=n();
sc===b&&(sc=null);ka();var rf=Ka();rf!==b?(oa=kb,kb={type:"function",name:yd,args:sc?sc:{type:"expression-list",value:[]}}):(m=kb,kb=b)}else m=kb,kb=b}else m=kb,kb=b;La=kb;if(La===b){var fb;var Va=m;var Kc=ya();if(Kc!==b){ka();var Ub=D();if(Ub!==b){ka();var Vb=[];for(fb=Da();fb!==b;)Vb.push(fb),fb=Da();fb=ka();var tc=Ia();tc!==b?(oa=Va,Va={type:"case-expression",format:"simple",operand:Ub,clauses:Vb,else:null}):(m=Va,Va=b)}else m=Va,Va=b}else m=Va,Va=b;if(Va===b)if(Va=m,Kc=ya(),Kc!==b)if(ka(),Ub=
D(),Ub!==b){ka();Vb=[];for(fb=Da();fb!==b;)Vb.push(fb),fb=Da();fb=ka();tc=Pa();if(tc!==b){ka();var sf=Ia();sf!==b?(oa=Va,Va={type:"case-expression",format:"simple",operand:Ub,clauses:Vb,else:tc.value}):(m=Va,Va=b)}else m=Va,Va=b}else m=Va,Va=b;else m=Va,Va=b;var Lc=Va;if(Lc===b){var gb;var Xa=m;var Mc=ya();if(Mc!==b){ka();var Wb=[];for(gb=Ea();gb!==b;)Wb.push(gb),gb=Ea();gb=ka();var uc=Ia();uc!==b?(oa=Xa,Xa={type:"case-expression",format:"searched",clauses:Wb,else:null}):(m=Xa,Xa=b)}else m=Xa,Xa=
b;if(Xa===b)if(Xa=m,Mc=ya(),Mc!==b){ka();Wb=[];for(gb=Ea();gb!==b;)Wb.push(gb),gb=Ea();gb=ka();uc=Pa();if(uc!==b){ka();var tf=Ia();tf!==b?(oa=Xa,Xa={type:"case-expression",format:"searched",clauses:Wb,else:uc.value}):(m=Xa,Xa=b)}else m=Xa,Xa=b}else m=Xa,Xa=b;Lc=Xa}La=Lc;if(La===b){var Hb=m;var uf=m;var vc;var Xb=m;var zd=k();if(zd!==b){var Ad=[];for(vc=P();vc!==b;)Ad.push(vc),vc=P();oa=Xb;Xb=zd+Ad.join("")}else m=Xb,Xb=b;var Bd=Xb;Bd!==b&&(oa=uf);var mb=Bd;if(mb!==b){oa=Hb;var Nc=mb;mb=/^CURRENT_DATE$/i.test(Nc)?
{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Nc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Nc}}Hb=mb;if(Hb===b){Hb=m;var Ib=m;if(S()!==b){var wc;var vf=m;var Oc=[];for(wc=M();wc!==b;)Oc.push(wc),wc=M();oa=vf;var wf=Oc=Oc.join("");var xf=S();xf!==b?(oa=Ib,Ib=wf):(m=Ib,Ib=b)}else m=Ib,Ib=b;mb=Ib;mb!==b&&(oa=Hb,mb={type:"column-reference",table:"",column:mb,delimited:!0});Hb=mb}La=Hb;if(La===b&&(La=Y(),La===b)){La=m;var yf=Ja();if(yf!==b){ka();var Pc=
D();if(Pc!==b){ka();var zf=Ka();zf!==b?(oa=La,Pc.paren=!0,La=Pc):(m=La,La=b)}else m=La,La=b}else m=La,La=b}}}}}}}}}return La}function h(){var G;var O=m;var R=k();if(R!==b){var ea=[];for(G=y();G!==b;)ea.push(G),G=y();oa=O;O=R+ea.join("")}else m=O,O=b;return O}function k(){if(Af.test(d.charAt(m))){var G=d.charAt(m);m++}else G=b,0===ia&&a(Bf);return G}function y(){if(Cf.test(d.charAt(m))){var G=d.charAt(m);m++}else G=b,0===ia&&a(Df);return G}function P(){if(Cd.test(d.charAt(m))){var G=d.charAt(m);m++}else G=
b,0===ia&&a(Dd);return G}function M(){if(Cd.test(d.charAt(m))){var G=d.charAt(m);m++}else G=b,0===ia&&a(Dd);if(G===b)if(G=m,S()!==b){var O=S();O!==b?(oa=G,G='"'):(m=G,G=b)}else m=G,G=b;return G}function S(){if(Ef.test(d.charAt(m))){var G=d.charAt(m);m++}else G=b,0===ia&&a(Ff);return G}function Y(){var G;var O=G=m;if(64===d.charCodeAt(m)){var R=Gf;m++}else R=b,0===ia&&a(Hf);if(R!==b){var ea=h();ea!==b?O=R=[R,ea]:(m=O,O=b)}else m=O,O=b;O!==b&&(oa=G,O={type:"parameter",value:O[1]});return O}function da(){var G=
m;if(d.substr(m,7).toLowerCase()===If){var O=d.substr(m,7);m+=7}else O=b,0===ia&&a(Jf);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="LEADING"):(m=G,G=b)}else m=G,G=b;G===b&&(G=m,d.substr(m,8).toLowerCase()===Kf?(O=d.substr(m,8),m+=8):(O=b,0===ia&&a(Lf)),O!==b?(O=m,ia++,R=y(),ia--,R===b?O=void 0:(m=O,O=b),O!==b?(oa=G,G="TRAILING"):(m=G,G=b)):(m=G,G=b),G===b&&(G=m,d.substr(m,4).toLowerCase()===Mf?(O=d.substr(m,4),m+=4):(O=b,0===ia&&a(Nf)),O!==b?(O=m,ia++,R=y(),ia--,R===b?
O=void 0:(m=O,O=b),O!==b?(oa=G,G="BOTH"):(m=G,G=b)):(m=G,G=b)));return G}function ha(){var G=m;var O=m;var R=ma();if(R!==b){ka();var ea=Ja();if(ea!==b)if(ka(),ea=sa(),ea!==b){ka();var ta=Ka();ta!==b?(oa=O,O={type:"interval-period",period:R.value,precision:ea,secondary:null}):(m=O,O=b)}else m=O,O=b;else m=O,O=b}else m=O,O=b;O===b&&(O=m,R=ma(),R!==b&&(oa=O,R={type:"interval-period",period:R.value,precision:null,secondary:null}),O=R);if(O!==b)if(ka(),R=m,d.substr(m,2).toLowerCase()===Of?(ea=d.substr(m,
2),m+=2):(ea=b,0===ia&&a(Pf)),ea!==b?(ea=m,ia++,ta=y(),ia--,ta===b?ea=void 0:(m=ea,ea=b),ea!==b?(oa=R,R="TO"):(m=R,R=b)):(m=R,R=b),R!==b){ka();R=m;ea=ma();ea!==b&&(oa=R,ea={type:"interval-period",period:ea.value,precision:null,secondary:null});R=ea;if(R===b){R=m;ea=Aa();if(ea!==b)if(ka(),ea=Ja(),ea!==b)if(ka(),ea=sa(),ea!==b)if(ka(),ta=Wa(),ta!==b)if(ka(),ta=pa(),ta!==b){ka();var za=Ka();za!==b?(oa=R,R={type:"interval-period",period:"second",precision:ea,secondary:ta}):(m=R,R=b)}else m=R,R=b;else m=
R,R=b;else m=R,R=b;else m=R,R=b;else m=R,R=b;R===b&&(R=m,ea=Aa(),ea!==b?(ka(),ea=Ja(),ea!==b?(ka(),ea=sa(),ea!==b?(ka(),ta=Ka(),ta!==b?(oa=R,R={type:"interval-period",period:"second",precision:ea,secondary:null}):(m=R,R=b)):(m=R,R=b)):(m=R,R=b)):(m=R,R=b),R===b&&(R=m,ea=Aa(),ea!==b&&(oa=R,ea={type:"interval-period",period:"second",precision:null,secondary:null}),R=ea))}R!==b?(oa=G,G={type:"interval-qualifier",start:O,end:R}):(m=G,G=b)}else m=G,G=b;else m=G,G=b;G===b&&(G=m,R=ma(),R!==b?(ka(),O=Ja(),
O!==b?(ka(),O=pa(),O!==b?(ka(),ea=Ka(),ea!==b?(oa=G,G={type:"interval-period",period:R.value,precision:O,secondary:null}):(m=G,G=b)):(m=G,G=b)):(m=G,G=b)):(m=G,G=b),G===b&&(G=m,R=ma(),R!==b&&(oa=G,R={type:"interval-period",period:R.value,precision:null,secondary:null}),G=R,G===b&&(G=m,R=Aa(),R!==b?(ka(),O=Ja(),O!==b?(ka(),O=sa(),O!==b?(ka(),ea=Wa(),ea!==b?(ka(),R=pa(),R!==b?(ka(),ea=Ka(),ea!==b?(oa=G,G={type:"interval-period",period:"second",precision:O,secondary:R}):(m=G,G=b)):(m=G,G=b)):(m=G,G=
b)):(m=G,G=b)):(m=G,G=b)):(m=G,G=b),G===b&&(G=m,R=Aa(),R!==b?(ka(),O=Ja(),O!==b?(ka(),O=pa(),O!==b?(ka(),ea=Ka(),ea!==b?(oa=G,G={type:"interval-period",period:"second",precision:O,secondary:null}):(m=G,G=b)):(m=G,G=b)):(m=G,G=b)):(m=G,G=b),G===b&&(G=m,R=Aa(),R!==b&&(oa=G,R={type:"interval-period",period:"second",precision:null,secondary:null}),G=R)))));return G}function ma(){var G=m;var O=Ca();O!==b&&(oa=G,O={type:"string",value:"day"});G=O;G===b&&(G=m,O=xa(),O!==b&&(oa=G,O={type:"string",value:"hour"}),
G=O,G===b&&(G=m,O=Ba(),O!==b&&(oa=G,O={type:"string",value:"minute"}),G=O,G===b&&(G=m,O=ua(),O!==b&&(oa=G,O={type:"string",value:"month"}),G=O,G===b&&(G=m,O=ra(),O!==b&&(oa=G,O={type:"string",value:"year"}),G=O))));return G}function pa(){var G=m;var O=l();O!==b&&(oa=G,O=parseFloat(O));return O}function sa(){var G=m;var O=l();O!==b&&(oa=G,O=parseFloat(O));return O}function qa(){var G=va();G===b&&(G=Y());return G}function va(){var G=m;if(39===d.charCodeAt(m)){var O=Ed;m++}else O=b,0===ia&&a(Fd);O===
b&&(d.substr(m,2)===Gd?(O=Gd,m+=2):(O=b,0===ia&&a(Qf)));if(O!==b){O=[];var R=m;if(d.substr(m,2)===xc){var ea=xc;m+=2}else ea=b,0===ia&&a(Hd);ea!==b&&(oa=R,ea="'");R=ea;R===b&&(Id.test(d.charAt(m))?(R=d.charAt(m),m++):(R=b,0===ia&&a(Jd)));for(;R!==b;)O.push(R),R=m,d.substr(m,2)===xc?(ea=xc,m+=2):(ea=b,0===ia&&a(Hd)),ea!==b&&(oa=R,ea="'"),R=ea,R===b&&(Id.test(d.charAt(m))?(R=d.charAt(m),m++):(R=b,0===ia&&a(Jd)));39===d.charCodeAt(m)?(R=Ed,m++):(R=b,0===ia&&a(Fd));R!==b?(oa=G,G={type:"string",value:O.join("")}):
(m=G,G=b)}else m=G,G=b;return G}function Ea(){var G=m;if(Qa()!==b){ka();var O=D();if(O!==b){ka();var R=Ya();R!==b?(ka(),R=D(),R!==b?(oa=G,G={type:"when-clause",operand:O,value:R}):(m=G,G=b)):(m=G,G=b)}else m=G,G=b}else m=G,G=b;return G}function Da(){var G=m;if(Qa()!==b){ka();var O=D();if(O!==b){ka();var R=Ya();R!==b?(ka(),R=D(),R!==b?(oa=G,G={type:"when-clause",operand:O,value:R}):(m=G,G=b)):(m=G,G=b)}else m=G,G=b}else m=G,G=b;return G}function Pa(){var G=m;var O=m;if(d.substr(m,4).toLowerCase()===
Rf){var R=d.substr(m,4);m+=4}else R=b,0===ia&&a(Sf);if(R!==b){R=m;ia++;var ea=y();ia--;ea===b?R=void 0:(m=R,R=b);R!==b?(oa=O,O="ELSE"):(m=O,O=b)}else m=O,O=b;O!==b?(ka(),O=D(),O!==b?(oa=G,G={type:"else-clause",value:O}):(m=G,G=b)):(m=G,G=b);return G}function Sa(){var G=l();if(G===b){G=m;if(45===d.charCodeAt(m)){var O=Bc;m++}else O=b,0===ia&&a(Cc);O===b&&(43===d.charCodeAt(m)?(O=zc,m++):(O=b,0===ia&&a(Ac)));if(O!==b){var R=l();R!==b?(oa=G,G=O[0]+R):(m=G,G=b)}else m=G,G=b}return G}function Ta(){var G=
m;if(46===d.charCodeAt(m)){var O=Tf;m++}else O=b,0===ia&&a(Uf);O!==b?(O=l(),O===b&&(O=null),oa=G,G="."+(null!=O?O:"")):(m=G,G=b);return G}function Oa(){var G;var O=G=m;if(Vf.test(d.charAt(m))){var R=d.charAt(m);m++}else R=b,0===ia&&a(Wf);R!==b?(Xf.test(d.charAt(m))?(R=d.charAt(m),m++):(R=b,0===ia&&a(Yf)),R===b&&(R=null),oa=O,O="e"+(null===R?"":R)):(m=O,O=b);O!==b?(R=l(),R!==b?(oa=G,G=O+R):(m=G,G=b)):(m=G,G=b);return G}function l(){var G=m;var O=[];var R=E();if(R!==b)for(;R!==b;)O.push(R),R=E();else O=
b;O!==b&&(oa=G,O=O.join(""));return O}function E(){if(Zf.test(d.charAt(m))){var G=d.charAt(m);m++}else G=b,0===ia&&a($f);return G}function X(){var G=m;if(d.substr(m,2).toLowerCase()===ag){var O=d.substr(m,2);m+=2}else O=b,0===ia&&a(bg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="IN"):(m=G,G=b)}else m=G,G=b;return G}function ba(){var G=m;if(d.substr(m,2).toLowerCase()===cg){var O=d.substr(m,2);m+=2}else O=b,0===ia&&a(dg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:
(m=O,O=b);O!==b?(oa=G,G="IS"):(m=G,G=b)}else m=G,G=b;return G}function ja(){var G=m;if(d.substr(m,4).toLowerCase()===eg){var O=d.substr(m,4);m+=4}else O=b,0===ia&&a(fg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="LIKE"):(m=G,G=b)}else m=G,G=b;return G}function B(){var G=m;if(d.substr(m,3).toLowerCase()===gg){var O=d.substr(m,3);m+=3}else O=b,0===ia&&a(hg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="NOT"):(m=G,G=b)}else m=G,G=b;return G}function J(){var G=
m;if(d.substr(m,3).toLowerCase()===ig){var O=d.substr(m,3);m+=3}else O=b,0===ia&&a(jg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="AND"):(m=G,G=b)}else m=G,G=b;return G}function N(){var G=m;if(d.substr(m,2).toLowerCase()===kg){var O=d.substr(m,2);m+=2}else O=b,0===ia&&a(lg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="OR"):(m=G,G=b)}else m=G,G=b;return G}function V(){var G=m;if(d.substr(m,7).toLowerCase()===mg){var O=d.substr(m,7);m+=7}else O=
b,0===ia&&a(ng);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="BETWEEN"):(m=G,G=b)}else m=G,G=b;return G}function aa(){var G=m;if(d.substr(m,4).toLowerCase()===og){var O=d.substr(m,4);m+=4}else O=b,0===ia&&a(pg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="FROM"):(m=G,G=b)}else m=G,G=b;return G}function ca(){var G=m;if(d.substr(m,4).toLowerCase()===qg){var O=d.substr(m,4);m+=4}else O=b,0===ia&&a(rg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=
void 0:(m=O,O=b);O!==b?(oa=G,G="TRIM"):(m=G,G=b)}else m=G,G=b;return G}function fa(){var G=m;if(d.substr(m,9).toLowerCase()===sg){var O=d.substr(m,9);m+=9}else O=b,0===ia&&a(tg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="TIMESTAMP"):(m=G,G=b)}else m=G,G=b;return G}function la(){var G=m;if(d.substr(m,4).toLowerCase()===ug){var O=d.substr(m,4);m+=4}else O=b,0===ia&&a(vg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="DATE"):(m=G,G=b)}else m=
G,G=b;return G}function na(){var G=m;if(d.substr(m,4).toLowerCase()===wg){var O=d.substr(m,4);m+=4}else O=b,0===ia&&a(xg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="TIME"):(m=G,G=b)}else m=G,G=b;return G}function wa(){var G=m;if(d.substr(m,8).toLowerCase()===yg){var O=d.substr(m,8);m+=8}else O=b,0===ia&&a(zg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="INTERVAL"):(m=G,G=b)}else m=G,G=b;return G}function ra(){var G=m;if(d.substr(m,4).toLowerCase()===
Ag){var O=d.substr(m,4);m+=4}else O=b,0===ia&&a(Bg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="YEAR"):(m=G,G=b)}else m=G,G=b;return G}function ua(){var G=m;if(d.substr(m,5).toLowerCase()===Cg){var O=d.substr(m,5);m+=5}else O=b,0===ia&&a(Dg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="MONTH"):(m=G,G=b)}else m=G,G=b;return G}function Ca(){var G=m;if(d.substr(m,3).toLowerCase()===Eg){var O=d.substr(m,3);m+=3}else O=b,0===ia&&a(Fg);if(O!==b){O=
m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="DAY"):(m=G,G=b)}else m=G,G=b;return G}function xa(){var G=m;if(d.substr(m,4).toLowerCase()===Gg){var O=d.substr(m,4);m+=4}else O=b,0===ia&&a(Hg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="HOUR"):(m=G,G=b)}else m=G,G=b;return G}function Ba(){var G=m;if(d.substr(m,6).toLowerCase()===Ig){var O=d.substr(m,6);m+=6}else O=b,0===ia&&a(Jg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="MINUTE"):
(m=G,G=b)}else m=G,G=b;return G}function Aa(){var G=m;if(d.substr(m,6).toLowerCase()===Kg){var O=d.substr(m,6);m+=6}else O=b,0===ia&&a(Lg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="SECOND"):(m=G,G=b)}else m=G,G=b;return G}function ya(){var G=m;if(d.substr(m,4).toLowerCase()===Mg){var O=d.substr(m,4);m+=4}else O=b,0===ia&&a(Ng);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="CASE"):(m=G,G=b)}else m=G,G=b;return G}function Ia(){var G=m;if(d.substr(m,
3).toLowerCase()===Og){var O=d.substr(m,3);m+=3}else O=b,0===ia&&a(Pg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="END"):(m=G,G=b)}else m=G,G=b;return G}function Qa(){var G=m;if(d.substr(m,4).toLowerCase()===Qg){var O=d.substr(m,4);m+=4}else O=b,0===ia&&a(Rg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="WHEN"):(m=G,G=b)}else m=G,G=b;return G}function Ya(){var G=m;if(d.substr(m,4).toLowerCase()===Sg){var O=d.substr(m,4);m+=4}else O=b,0===ia&&
a(Tg);if(O!==b){O=m;ia++;var R=y();ia--;R===b?O=void 0:(m=O,O=b);O!==b?(oa=G,G="THEN"):(m=G,G=b)}else m=G,G=b;return G}function Wa(){if(44===d.charCodeAt(m)){var G=Ug;m++}else G=b,0===ia&&a(Vg);return G}function Ja(){if(40===d.charCodeAt(m)){var G=Wg;m++}else G=b,0===ia&&a(Xg);return G}function Ka(){if(41===d.charCodeAt(m)){var G=Yg;m++}else G=b,0===ia&&a(Zg);return G}function ka(){var G;var O=[];for(G=Ra();G!==b;)O.push(G),G=Ra();return O}function Ra(){if($g.test(d.charAt(m))){var G=d.charAt(m);
m++}else G=b,0===ia&&a(ah);return G}function Mb(G,O,R,ea){G={type:"binary-expression",operator:G,left:O,right:R};void 0!==ea&&(G.escape=ea);return G}function nb(G,O){for(var R=0;R<O.length;R++)G=Mb(O[R][1],G,O[R][3]);return G}v=void 0!==v?v:{};var b={},Md=v.grammarSource,Kd={start:u},Ld=u,Nd="!",Rc="\x3d",Tc="\x3e\x3d",Sd="\x3e",Uc="\x3c\x3d",Vc="\x3c\x3e",Wd="\x3c",Wc="!\x3d",zc="+",Bc="-",Xc="||",$d="*",be="/",Gf="@",Ed="'",Gd="N'",xc="''",Tf=".",ke="null",de="true",ge="false",ag="in",cg="is",eg=
"like",Pd="escape",gg="not",ig="and",kg="or",mg="between",og="from",Ee="for",ze="substring",ne="extract",qg="trim",Ke="position",sg="timestamp",ug="date",wg="time",If="leading",Kf="trailing",Mf="both",Qe="cast",Ue="as",Ye="integer",af="smallint",df="float",gf="real",kf="varchar",Of="to",yg="interval",Ag="year",re="timezone_hour",ue="timezone_minute",Cg="month",Eg="day",Gg="hour",Ig="minute",Kg="second",Mg="case",Og="end",Qg="when",Sg="then",Rf="else",Ug=",",Wg="(",Yg=")",ud="`",Af=/^[A-Za-z_\x80-\uFFFF]/,
Cf=/^[A-Za-z0-9_]/,Cd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ef=/^["]/,Id=/^[^']/,Zf=/^[0-9]/,Vf=/^[eE]/,Xf=/^[+\-]/,$g=/^[ \t\n\r]/,wd=/^[^`]/,Od=z("!",!1),Sc=z("\x3d",!1),Rd=z("\x3e\x3d",!1),Td=z("\x3e",!1),Ud=z("\x3c\x3d",!1),Vd=z("\x3c\x3e",!1),Xd=z("\x3c",!1),Yd=z("!\x3d",!1),Ac=z("+",!1),Cc=z("-",!1),Zd=z("||",!1),ae=z("*",!1),ce=z("/",!1),Bf=H([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Df=H([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Dd=H([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],
!1,!1),Ff=H(['"'],!1,!1),Hf=z("@",!1),Fd=z("'",!1),Qf=z("N'",!1),Hd=z("''",!1),Jd=H(["'"],!0,!1),Uf=z(".",!1),$f=H([["0","9"]],!1,!1),Wf=H(["e","E"],!1,!1),Yf=H(["+","-"],!1,!1),le=z("NULL",!0),ee=z("TRUE",!0),he=z("FALSE",!0),bg=z("IN",!0),dg=z("IS",!0),fg=z("LIKE",!0),Qd=z("ESCAPE",!0),hg=z("NOT",!0),jg=z("AND",!0),lg=z("OR",!0),ng=z("BETWEEN",!0),pg=z("FROM",!0),Fe=z("FOR",!0),Ae=z("SUBSTRING",!0),oe=z("EXTRACT",!0),rg=z("TRIM",!0),Le=z("POSITION",!0),tg=z("TIMESTAMP",!0),vg=z("DATE",!0),xg=z("TIME",
!0),Jf=z("LEADING",!0),Lf=z("TRAILING",!0),Nf=z("BOTH",!0),Re=z("CAST",!0),Ve=z("AS",!0),Ze=z("INTEGER",!0),bf=z("SMALLINT",!0),ef=z("FLOAT",!0),hf=z("REAL",!0),lf=z("VARCHAR",!0),Pf=z("TO",!0),zg=z("INTERVAL",!0),Bg=z("YEAR",!0),se=z("TIMEZONE_HOUR",!0),ve=z("TIMEZONE_MINUTE",!0),Dg=z("MONTH",!0),Fg=z("DAY",!0),Hg=z("HOUR",!0),Jg=z("MINUTE",!0),Lg=z("SECOND",!0),Ng=z("CASE",!0),Pg=z("END",!0),Rg=z("WHEN",!0),Tg=z("THEN",!0),Sf=z("ELSE",!0),Vg=z(",",!1),Xg=z("(",!1),Zg=z(")",!1),ah=H([" ","\t","\n",
"\r"],!1,!1),vd=z("`",!1),xd=H(["`"],!0,!1),m=0,oa=0,Yb=[{line:1,column:1}],eb=0,yc=[],ia=0;if("startRule"in v){if(!(v.startRule in Kd))throw Error("Can't start parsing from rule \""+v.startRule+'".');Ld=Kd[v.startRule]}var Qc=Ld();if(Qc!==b&&m===d.length)return Qc;Qc!==b&&m<d.length&&a({type:"end"});throw function(G,O,R){return new e(e.buildMessage(G,O),G,O,R)}(yc,eb<d.length?d.charAt(eb):null,eb<d.length?p(eb,eb+1):p(eb,eb));}}})})(A);var x=A.exports;class F{static parse(C){return x.parse(C)}}c.WhereGrammar=
F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(c,g){g=new g.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});c.kebabDict=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(c){c.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,
centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,
supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(c,g,A,x,F,C,e,q,d,v,t,z,H){function r(n,D,L,f){const K=f.x-L.x;f=f.y-L.y;D=Math.min(1,Math.max(0,((D.x-L.x)*K+(D.y-L.y)*f)/(K*K+f*f)));n.x=L.x+K*D;n.y=L.y+f*D}function p(n,D){return n?D?4:3:D?3:2}class a{constructor(n,D,L){this.items=n;this.query=D;this.geometryType=L.geometryType;this.hasM=L.hasM;this.hasZ=L.hasZ;this.fieldsIndex=L.fieldsIndex;this.objectIdField=L.objectIdField;this.spatialReference=L.spatialReference;this.featureAdapter=L.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const n=
new q(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return n.countDistinctValues(this.items);const {groupByFieldsForStatistics:D,having:L,outStatistics:f}=this.query;if(!D?.length)return 1;const K=new Map,Q=new Map,T=new Set;for(const U of f){var {statisticType:Z}=U;Z="exceedslimit"!==Z?U.onStatisticField:void 0;if(!Q.has(Z)){var W=[];for(const w of D){const I=this._getAttributeValues(n,w,K);W.push(I)}Q.set(Z,this._calculateUniqueValues(W,n.returnDistinctValues))}Z=
Q.get(Z);for(const w in Z){const {data:I,items:h}=Z[w];W=I.join(",");L&&!n.validateItems(h,L)||T.add(W)}}return T.size}async createQueryResponse(){let n;n=this.query.outStatistics?this.query.outStatistics.some(D=>"exceedslimit"===D.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const D=this.query.geometry;e.isValid(this.query.outSR)&&!e.equals(D.spatialReference,
this.query.outSR)?n.queryGeometry=d.cleanFromGeometryEngine({spatialReference:this.query.outSR,...v.project(D,D.spatialReference,this.query.outSR)}):n.queryGeometry=d.cleanFromGeometryEngine({spatialReference:this.query.outSR,...D})}return n}createSnappingResponse(n,D){const L=this.featureAdapter,f=p(this.hasZ,this.hasM),{point:K,mode:Q}=n,T="number"===typeof n.distance?n.distance:n.distance.x,Z="number"===typeof n.distance?n.distance:n.distance.y,W={candidates:[]},U="esriGeometryPolygon"===this.geometryType;
D=this._getPointCreator(Q,this.spatialReference,D);const w=new u(null,0),I=new u(null,0),h={x:0,y:0,z:0};for(const da of this.items){var k=L.getGeometry(da);if(null==k)continue;const {coords:ha,lengths:ma}=k;w.coords=ha;I.coords=ha;if(n.returnEdge){k=0;for(var y=0;y<ma.length;y++){var P=ma[y];for(var M=0;M<P;M++,k+=f){var S=w;S.coordsIndex=k;if(M!==P-1){const pa=I;pa.coordsIndex=k+f;const sa=h;r(h,K,S,pa);var Y=(K.x-sa.x)/T;const qa=(K.y-sa.y)/Z;Y=Y*Y+qa*qa;1>=Y&&W.candidates.push(t.makeEdgeCandidate(L.getObjectId(da),
D(sa),Math.sqrt(Y),D(S),D(pa)))}}}}if("none"!==n.vertexMode)if(k=U?ha.length-f:ha.length,"all"===n.vertexMode)for(y=0;y<k;y+=f)P=w,P.coordsIndex=y,M=(K.x-P.x)/T,S=(K.y-P.y)/Z,M=M*M+S*S,1>=M&&W.candidates.push(t.makeVertexCandidate(L.getObjectId(da),D(P),Math.sqrt(M)));else if("ends"===n.vertexMode){k=[0];U||k.push(ha.length-f);for(const pa of k)k=w,k.coordsIndex=pa,y=(K.x-k.x)/T,P=(K.y-k.y)/Z,y=y*y+P*P,1>=y&&W.candidates.push(t.makeVertexCandidate(L.getObjectId(da),D(k),Math.sqrt(y)))}}W.candidates.sort((da,
ha)=>da.distance-ha.distance);return W}_getPointCreator(n,D,L){const f=null==L||e.equals(D,L)?Q=>Q:Q=>v.project(Q,D,L),{hasZ:K}=this;return"3d"===n?K?({x:Q,y:T,z:Z})=>f({x:Q,y:T,z:Z}):({x:Q,y:T})=>f({x:Q,y:T,z:0}):({x:Q,y:T})=>f({x:Q,y:T})}async createSummaryStatisticsResponse(n){const {field:D,valueExpression:L,normalizationField:f,normalizationType:K,normalizationTotal:Q,minValue:T,maxValue:Z,scale:W,timeZone:U}=n;var w=this.fieldsIndex.get(D);n=z.isDateField(w)||z.isDateOnlyField(w)||z.isTimestampOffsetField(w);
const I=await this._getDataValues({field:D,valueExpression:L,normalizationField:f,normalizationType:K,normalizationTotal:Q,scale:W,timeZone:U}),h=H.isNullCountSupported({normalizationType:K,normalizationField:f,minValue:T,maxValue:Z}),k={value:.5,fieldType:w?.type};w=z.isStringField(w)?H.calculateStringStatistics({values:I,supportsNullCount:h,percentileParams:k}):H.calculateStatistics({values:I,minValue:T,maxValue:Z,useSampleStdDev:!K,supportsNullCount:h,percentileParams:k});return H.processSummaryStatisticsResult(w,
n)}async createUniqueValuesResponse(n){const {field:D,valueExpression:L,domains:f,returnAllCodedValues:K,scale:Q,timeZone:T}=n;var Z=await this._getDataValues({field:D,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,valueExpression:L,scale:Q,timeZone:T},!1);Z=H.calculateUniqueValuesCount(Z);return H.createUVResult(Z,f,K,n.fieldDelimiter)}async createClassBreaksResponse(n){const {field:D,valueExpression:L,normalizationField:f,normalizationType:K,normalizationTotal:Q,classificationMethod:T,
standardDeviationInterval:Z,minValue:W,maxValue:U,numClasses:w,scale:I,timeZone:h}=n;n=await this._getDataValues({field:D,valueExpression:L,normalizationField:f,normalizationType:K,normalizationTotal:Q,scale:I,timeZone:h});n=H.calculateClassBreaks(n,{field:D,normalizationField:f,normalizationType:K,normalizationTotal:Q,classificationMethod:T,standardDeviationInterval:Z,minValue:W,maxValue:U,numClasses:w});return H.resolveCBResult(n,T)}async createHistogramResponse(n){const {field:D,valueExpression:L,
normalizationField:f,normalizationType:K,normalizationTotal:Q,classificationMethod:T,standardDeviationInterval:Z,minValue:W,maxValue:U,numBins:w,scale:I,timeZone:h}=n;n=await this._getDataValues({field:D,valueExpression:L,normalizationField:f,normalizationType:K,normalizationTotal:Q,scale:I,timeZone:h});return H.calculateHistogram(n,{field:D,normalizationField:f,normalizationType:K,normalizationTotal:Q,classificationMethod:T,standardDeviationInterval:Z,minValue:W,maxValue:U,numBins:w})}_sortFeatures(n,
D,L){if(1<n.length&&D?.length)for(const f of D.reverse()){D=f.split(" ");const K=D[0],Q=this.fieldsIndex.get(K);D=D[1]?"desc"===D[1].toLowerCase():!1;const T=H.getAttributeComparator(Q?.type,D);n.sort((Z,W)=>{Z=L(Z,K,Q);W=L(W,K,Q);return T(Z,W)})}}_createFeatureQueryResponse(n){const D=this.items,{geometryType:L,hasM:f,hasZ:K,objectIdField:Q,spatialReference:T}=this,{outFields:Z,outSR:W,quantizationParameters:U,resultRecordCount:w,resultOffset:I,returnZ:h,returnM:k}=n,y=null!=w?D.length>(I||0)+w:
!1,P=Z&&(Z.includes("*")?[...this.fieldsIndex.fields]:Z.map(M=>this.fieldsIndex.get(M)));return{exceededTransferLimit:y,features:this._createFeatures(n,D),fields:P,geometryType:L,hasM:f&&k,hasZ:K&&h,objectIdFieldName:Q,spatialReference:d.cleanFromGeometryEngine(W||T),transform:U&&C.toQuantizationTransform(U)||null}}_createFeatures(n,D){const L=new q(n,this.featureAdapter,this.fieldsIndex),{hasM:f,hasZ:K}=this,{orderByFields:Q,quantizationParameters:T,returnGeometry:Z,returnCentroid:W,maxAllowableOffset:U,
resultOffset:w,resultRecordCount:I,returnZ:h=!1,returnM:k=!1}=n,y=K&&h,P=f&&k;n=[];var M=0;const S=[...D];this._sortFeatures(S,Q,(pa,sa,qa)=>L.getFieldValue(pa,sa,qa));if(this.geometryType&&(Z||W)){var Y=C.toQuantizationTransform(T)??void 0;D="esriGeometryPolygon"===this.geometryType||"esriGeometryPolyline"===this.geometryType;if(Z&&!W)for(var da of S){var ha=this.featureAdapter.getGeometry(da),ma={attributes:L.getAttributes(da),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,ha,U,Y,
y,P)};D&&ha&&!ma.geometry&&(ma.centroid=d.transformCentroid(this,this.featureAdapter.getCentroid(da,this),Y));n[M++]=ma}else if(!Z&&W)for(ha of S)n[M++]={attributes:L.getAttributes(ha),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(ha,this),Y)};else for(ma of S)n[M++]={attributes:L.getAttributes(ma),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(ma,this),Y),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ma),U,Y,y,
P)}}else for(Y of S)(da=L.getAttributes(Y))&&(n[M++]={attributes:da});M=w||0;null!=I&&(n=n.slice(M,Math.min(n.length,M+I)));return n}_createExceedsLimitQueryResponse(n){var D=!1;let L=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY;D=Number.POSITIVE_INFINITY;for(const K of n.outStatistics??[])if("exceedslimit"===K.statisticType){L=null!=K.maxPointCount?K.maxPointCount:Number.POSITIVE_INFINITY;f=null!=K.maxRecordCount?K.maxRecordCount:Number.POSITIVE_INFINITY;D=null!=K.maxVertexCount?K.maxVertexCount:
Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)D=this.items.length>L;else if(this.items.length>f)D=!0;else{n=p(this.hasZ,this.hasM);const K=this.featureAdapter;D=this.items.reduce((Q,T)=>{T=K.getGeometry(T);return Q+(null!=T&&T.coords.length||0)},0)/n>D}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(D)}}]}}async _createStatisticsQueryResponse(n){var D=
{attributes:{}};const L=[],f=new Map,K=new Map,Q=new Map,T=new Map,Z=new q(n,this.featureAdapter,this.fieldsIndex);var W=n.outStatistics;const {groupByFieldsForStatistics:U,having:w,orderByFields:I,resultRecordCount:h}=n;n=U?.length;const k=!!n,y=k?U[0]:null,P=k&&!this.fieldsIndex.get(y);for(const ha of W??[]){const {outStatisticFieldName:ma,statisticType:pa}=ha;W=ha;const sa="exceedslimit"!==pa?ha.onStatisticField:void 0,qa="percentile_disc"===pa||"percentile_cont"===pa;var M="EnvelopeAggregate"===
pa||"CentroidAggregate"===pa||"ConvexHullAggregate"===pa;const va=k&&1===n&&(sa===y||P)&&"count"===pa;if(k){if(!Q.has(sa)){var S=[];for(const Ea of U){var Y=this._getAttributeValues(Z,Ea,f);S.push(Y)}Q.set(sa,this._calculateUniqueValues(S,M?!1:Z.returnDistinctValues))}S=Q.get(sa);if(!S)continue;Y=Object.keys(S);for(const Ea of Y){const {count:Da,data:Pa,items:Sa,itemPositions:Ta}=S[Ea];Y=Pa.join(",");if(!w||Z.validateItems(Sa,w)){const Oa=T.get(Y)||{attributes:{}};if(M){Oa.aggregateGeometries||(Oa.aggregateGeometries=
{});const {aggregateGeometries:E,outStatisticFieldName:X}=await this._getAggregateGeometry(W,Sa);Oa.aggregateGeometries[X]=E}else{var da=null;if(va)da=Da;else{const E=this._getAttributeValues(Z,sa,f);da=Ta.map(X=>E[X]);da=qa&&"statisticParameters"in W?this._getPercentileValue(W,da):this._getStatisticValue(W,da,null,Z.returnDistinctValues)}Oa.attributes[ma]=da}let l=0;U.forEach((E,X)=>Oa.attributes[this.fieldsIndex.get(E)?E:`EXPR_${++l}`]=Pa[X]);T.set(Y,Oa)}}}else if(M){D.aggregateGeometries||(D.aggregateGeometries=
{});const {aggregateGeometries:Ea,outStatisticFieldName:Da}=await this._getAggregateGeometry(W,this.items);D.aggregateGeometries[Da]=Ea}else M=this._getAttributeValues(Z,sa,f),D.attributes[ma]=qa&&"statisticParameters"in W?this._getPercentileValue(W,M):this._getStatisticValue(W,M,K,Z.returnDistinctValues);W="min"!==pa&&"max"!==pa||!z.isStringField(this.fieldsIndex.get(sa))&&!this._isAnyDateField(sa)?null:this.fieldsIndex.get(sa)?.type;L.push({name:ma,alias:ma,type:W||"esriFieldTypeDouble"})}D=k?Array.from(T.values()):
[D];this._sortFeatures(D,I,(ha,ma)=>ha.attributes[ma]);h&&(D.length=Math.min(h,D.length));return{fields:L,features:D}}_isAnyDateField(n){n=this.fieldsIndex.get(n);return z.isDateField(n)||z.isDateOnlyField(n)||z.isTimestampOffsetField(n)||z.isTimeOnlyField(n)}async _getAggregateGeometry(n,D){const {convexHull:L,union:f}=await new Promise((h,k)=>c(["../../../geometry/geometryEngineJSON"],h,k)),{statisticType:K,outStatisticFieldName:Q}=n,{featureAdapter:T,spatialReference:Z,geometryType:W,hasZ:U,hasM:w}=
this;D=D.map(h=>d.getGeometry(W,U,w,T.getGeometry(h)));const I=L(Z,D,!0)[0];n={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===K?(D=I?F.getPolygonExtent(I):F.getGeometryExtent(f(Z,D)),n.aggregateGeometries={...D,spatialReference:Z},n.outStatisticFieldName=Q||"extent"):"CentroidAggregate"===K?(D=I?x.polygonCentroid(I):x.extentCentroid(F.getGeometryExtent(f(Z,D))),n.aggregateGeometries={x:D[0],y:D[1],spatialReference:Z},n.outStatisticFieldName=Q||"centroid"):"ConvexHullAggregate"===
K&&(n.aggregateGeometries=I,n.outStatisticFieldName=Q||"convexHull");return n}_getStatisticValue(n,D,L,f){const {onStatisticField:K,statisticType:Q}=n;n=null;n=L?.has(K)?L.get(K):z.isStringField(this.fieldsIndex.get(K))||this._isAnyDateField(K)?H.calculateStringStatistics({values:D,returnDistinct:f}):H.calculateStatistics({values:f?[...(new Set(D))]:D,minValue:null,maxValue:null,useSampleStdDev:!0});L&&L.set(K,n);return n["var"===Q?"variance":Q]}_getPercentileValue(n,D){const {onStatisticField:L,
statisticParameters:f,statisticType:K}=n,{value:Q,orderBy:T}=f;n=this.fieldsIndex.get(L);return H.calculatePercentile(D,{value:Q,orderBy:T,fieldType:n?.type,isDiscrete:"percentile_disc"===K})}_getAttributeValues(n,D,L){if(L.has(D))return L.get(D);const f=this.fieldsIndex.get(D),K=this.items.map(Q=>n.getFieldValue(Q,D,f));L.set(D,K);return K}_calculateUniqueValues(n,D){const L={},f=this.items,K=f.length;for(let Q=0;Q<K;Q++){const T=f[Q],Z=[];for(const U of n)Z.push(U[Q]);const W=Z.join(",");null==
L[W]?L[W]={count:1,data:Z,items:[T],itemPositions:[Q]}:(D||L[W].count++,L[W].items.push(T),L[W].itemPositions.push(Q))}return L}async _getDataValues(n,D=!0){const L=new q(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:f,scale:K,timeZone:Q}=n;return f?L.getExpressionValues(this.items,f,{viewingMode:"map",scale:K,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},Q):L.getDataValues(this.items,A.clone(n),D)}}class u{constructor(n,
D){this.coords=n;this.coordsIndex=D}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}g.QueryEngineResult=a;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(c,g){function A(h){if("lowerLeft"===h.originPosition&&4===h.scale.length&&4===h.translate.length)return h;const {originPosition:k,scale:y,translate:P}=
h;h=y[1]??1;return{originPosition:"lowerLeft",scale:[y[0]??1,"lowerLeft"===k?h:-h,y[2]??1,y[3]??1],translate:[P[0]??0,P[1]??0,P[2]??0,P[3]??0]}}function x({scale:h,translate:k},y){return Math.round((y-k[0])/h[0])}function F({scale:h,translate:k},y){return Math.round((y-k[1])/h[1])}function C({scale:h,translate:k},y){return Math.round(((y??0)-k[2])/h[2])}function e({scale:h,translate:k},y){return y?Math.round((y-k[3])/h[3]):0}function q(h,k){return h&&k?Z:h&&!k?Q:!h&&k?T:K}function d({scale:h,translate:k},
y){return y*h[0]+k[0]}function v({scale:h,translate:k},y){return y*h[1]+k[1]}function t({scale:h,translate:k},y){return(y??0)*h[2]+k[2]}function z({scale:h,translate:k},y){return y?y*h[3]+k[3]:0}function H(h,k){return h&&k?I:h&&!k?U:!h&&k?w:W}function r(h,k,y){const P=Array(y.length);for(let M=0;M<y.length;M++)P[M]=k(h,y[M]);return P}function p(h,k,y){let [P,M]=y[0],S=Math.min(P,k[0]),Y=Math.min(M,k[1]),da=Math.max(P,k[2]);k=Math.max(M,k[3]);for(let ha=1;ha<y.length;ha++){const [ma,pa]=y[ha];P+=ma;
M+=pa;0>ma&&(S=Math.min(S,P));0<ma&&(da=Math.max(da,P));0>pa?Y=Math.min(Y,M):0<pa&&(k=Math.max(k,M))}h[0]=S;h[1]=Y;h[2]=da;h[3]=k;return h}function a(h,k){if(!k.length)return null;h[0]=h[1]=Number.POSITIVE_INFINITY;h[2]=h[3]=Number.NEGATIVE_INFINITY;for(let y=0;y<k.length;y++)p(h,h,k[y]);return h}function u(h,k,y){h=A(h);k.xmin=x(h,y.xmin);k.ymin=F(h,y.ymin);k.xmax=x(h,y.xmax);k.ymax=F(h,y.ymax);y.hasZ&&(k.zmin=C(h,y.zmin),k.zmax=C(h,y.zmax));y.hasM&&(k.mmin=e(h,y.mmin),k.mmax=e(h,y.mmax));k.hasZ=
y.hasZ??!1;k.hasM=y.hasM??!1;return k}function n(h,k,y){h=A(h);k.points=q(y.hasZ,y.hasM)(h,y.points)??[];k.hasZ=y.hasZ??!1;k.hasM=y.hasM??!1;return k}function D(h,k,y){h=A(h);k.x=x(h,y.x);k.y=F(h,y.y);null!=y.z&&(k.z=C(h,y.z));null!=y.m&&(k.m=e(h,y.m));return k}function L(h,k,y){{h=A(h);var P=y.rings;const M=[],S=q(y.hasZ,y.hasM);for(let Y=0;Y<P.length;Y++){const da=S(h,P[Y]);da&&3<=da.length&&M.push(da)}h=M.length?M:null}if(!h)return null;k.rings=h;k.hasZ=y.hasZ??!1;k.hasM=y.hasM??!1;return k}function f(h,
k,y){{h=A(h);var P=y.paths;const M=[],S=q(y.hasZ,y.hasM);for(let Y=0;Y<P.length;Y++){const da=S(h,P[Y]);da&&2<=da.length&&M.push(da)}h=M.length?M:null}if(!h)return null;k.paths=h;k.hasZ=y.hasZ??!1;k.hasM=y.hasM??!1;return k}const K=(h,k)=>{const y=[];if(!k.length)return null;var P=k[0];let M=x(h,P[0]);P=F(h,P[1]);y.push([M,P]);for(let S=1;S<k.length;S++){const [Y,da]=k[S],ha=x(h,Y),ma=F(h,da);ha===M&&ma===P||y.push([ha-M,ma-P]);M=ha;P=ma}return y},Q=(h,k)=>{const y=[];if(!k.length)return null;var P=
k[0];let M=x(h,P[0]),S=F(h,P[1]);P=C(h,P[2]);y.push([M,S,P]);for(let Y=1;Y<k.length;Y++){const [da,ha,ma]=k[Y],pa=x(h,da),sa=F(h,ha),qa=C(h,ma);pa===M&&sa===S&&qa===P||y.push([pa-M,sa-S,qa]);M=pa;S=sa;P=qa}return y},T=(h,k)=>{const y=[];if(!k.length)return null;var P=k[0];let M=x(h,P[0]),S=F(h,P[1]);P=e(h,P[2]);y.push([M,S,P]);for(let Y=1;Y<k.length;Y++){const [da,ha,ma]=k[Y],pa=x(h,da),sa=F(h,ha),qa=e(h,ma);pa===M&&sa===S&&qa===P||y.push([pa-M,sa-S,qa]);M=pa;S=sa;P=qa}return y},Z=(h,k)=>{const y=
[];if(!k.length)return null;var P=k[0];let M=x(h,P[0]),S=F(h,P[1]),Y=C(h,P[2]);P=e(h,P[3]);y.push([M,S,Y,P]);for(let da=1;da<k.length;da++){const [ha,ma,pa,sa]=k[da],qa=x(h,ha),va=F(h,ma),Ea=C(h,pa),Da=e(h,sa);qa===M&&va===S&&Ea===Y&&Da===P||y.push([qa-M,va-S,Ea,Da]);M=qa;S=va;Y=Ea;P=Da}return y},W=(h,k)=>{const y=Array(k.length);if(!k.length)return y;var P=k[0];let M=d(h,P[0]);P=v(h,P[1]);y[0]=[M,P];const {scale:S,originPosition:Y}=h;h=S[0];const da="lowerLeft"===Y?S[1]:-S[1];for(let ha=1;ha<k.length;ha++){const [ma,
pa]=k[ha];M+=h*ma;P+=da*pa;y[ha]=[M,P]}return y},U=(h,k)=>{const y=Array(k.length);if(!k.length)return y;var P=k[0];let M=d(h,P[0]),S=v(h,P[1]);y[0]=[M,S,t(h,P[2])];const {scale:Y,originPosition:da}=h;P=Y[0];const ha="lowerLeft"===da?Y[1]:-Y[1];for(let ma=1;ma<k.length;ma++){const [pa,sa,qa]=k[ma];M+=P*pa;S+=ha*sa;y[ma]=[M,S,t(h,qa)]}return y},w=(h,k)=>{const y=Array(k.length);if(!k.length)return y;var P=k[0];let M=d(h,P[0]),S=v(h,P[1]);y[0]=[M,S,z(h,P[2])];const {scale:Y,originPosition:da}=h;P=Y[0];
const ha="lowerLeft"===da?Y[1]:-Y[1];for(let ma=1;ma<k.length;ma++){const [pa,sa,qa]=k[ma];M+=P*pa;S+=ha*sa;y[ma]=[M,S,z(h,qa)]}return y},I=(h,k)=>{const y=Array(k.length);if(!k.length)return y;var P=k[0];let M=d(h,P[0]),S=v(h,P[1]);y[0]=[M,S,t(h,P[2]),z(h,P[3])];const {scale:Y,originPosition:da}=h;P=Y[0];const ha="lowerLeft"===da?Y[1]:-Y[1];for(let ma=1;ma<k.length;ma++){const [pa,sa,qa,va]=k[ma];M+=P*pa;S+=ha*sa;y[ma]=[M,S,t(h,qa),z(h,va)]}return y};c.getQuantizedBoundsCoordsArray=p;c.getQuantizedBoundsCoordsArrayArray=
a;c.getQuantizedBoundsPaths=function(h){return a([0,0,0,0],h)};c.getQuantizedBoundsPoints=function(h){const k=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return p(k,k,h)};c.getQuantizedBoundsRings=function(h){return a([0,0,0,0],h)};c.normalizeTransform=A;c.quantizeBounds=function(h,k,y){h=A(h);k[0]=x(h,y[0]);k[3]=F(h,y[1]);k[2]=x(h,y[2]);k[1]=F(h,y[3]);return k};c.quantizeCoordsArrayXY=K;c.quantizeCoordsArrayXYM=T;c.quantizeCoordsArrayXYZ=
Q;c.quantizeCoordsArrayXYZM=Z;c.quantizeExtent=u;c.quantizeGeometry=function(h,k){return h&&k?g.isPoint(k)?D(h,{},k):g.isPolyline(k)?f(h,{},k):g.isPolygon(k)?L(h,{},k):g.isMultipoint(k)?n(h,{},k):g.isExtent(k)?u(h,{},k):null:null};c.quantizeM=e;c.quantizeMultipoint=n;c.quantizePoint=D;c.quantizePolygon=L;c.quantizePolyline=f;c.quantizeX=x;c.quantizeY=F;c.quantizeZ=C;c.toQuantizationTransform=function(h){return h?{originPosition:"upper-left"===h.originPosition?"upperLeft":"lower-left"===h.originPosition?
"lowerLeft":h.originPosition,scale:h.tolerance?[h.tolerance,h.tolerance,1,1]:[1,1,1,1],translate:null!=h.extent?[h.extent.xmin,h.extent.ymax,h.extent.zmin??0,h.extent.mmin??0]:[0,0,0,0]}:null};c.unquantizeBounds=function(h,k,y){h=A(h);return y?(k[0]=d(h,y[0]),k[1]=v(h,y[3]),k[2]=d(h,y[2]),k[3]=v(h,y[1]),k):[d(h,k[0]),v(h,k[3]),d(h,k[2]),v(h,k[1])]};c.unquantizeCoordsArrayArray=r;c.unquantizeCoordsArrayXY=W;c.unquantizeCoordsArrayXYM=w;c.unquantizeCoordsArrayXYZ=U;c.unquantizeCoordsArrayXYZM=I;c.unquantizeExtent=
function(h,k,y,P=y.hasZ??!1,M=y.hasM??!1){h=A(h);k.xmin=d(h,y.xmin);k.xmax=d(h,y.xmax);k.ymin=v(h,y.ymin);k.ymax=v(h,y.ymax);P&&(k.zmin=t(h,y.zmin),k.zmax=t(h,y.zmax));M&&(k.mmin=z(h,y.mmin),k.mmax=z(h,y.mmax));k.hasZ=P;k.hasM=M;return k};c.unquantizeM=z;c.unquantizeMultipoint=function(h,k,y,P=y?.hasZ??!1,M=y?.hasM??!1){null!=y&&(h=A(h),k.points=H(P,M)(h,y.points),k.hasZ=P,k.hasM=M);return k};c.unquantizePoint=function(h,k,y,P=null!=y?.z,M=null!=y?.m){if(null==y)return k;h=A(h);k.x=d(h,y.x);k.y=v(h,
y.y);P&&(k.z=t(h,y.z));M&&(k.m=z(h,y.m));return k};c.unquantizePolygon=function(h,k,y,P=y?.hasZ??!1,M=y?.hasM??!1){null!=y&&(h=A(h),k.rings=r(h,H(P,M),y.rings),k.hasZ=P,k.hasM=M);return k};c.unquantizePolyline=function(h,k,y,P=y?.hasZ??!1,M=y?.hasM??!1){null!=y&&(h=A(h),k.paths=r(h,H(P,M),y.paths),k.hasZ=P,k.hasM=M);return k};c.unquantizeX=d;c.unquantizeY=v;c.unquantizeZ=t;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(c,g,A,x,F,C){class e{constructor(q,d,v){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=q.returnDistinctValues??!1;this.fieldsIndex=v;this.featureAdapter=d;if((d=q.outFields)&&!d.includes("*")){this.outFields=d;q=0;for(const z of d){var t=c.getExpressionFromFieldName(z);t=(d=this.fieldsIndex.get(t))?null:c.getWhereClause(t,v);d=d?d.name:c.getAliasFromFieldName(z)||`FIELD_EXP_${q++}`;this._fieldDataCache.set(z,{alias:d,clause:t})}}}countDistinctValues(q){if(!this.returnDistinctValues)return q.length;
q.forEach(d=>this.getAttributes(d));return this._returnDistinctMap.size}getAttributes(q){q=this._processAttributesForOutFields(q);return this._processAttributesForDistinctValues(q)}getFieldValue(q,d,v){const t=v?v.name:d;let z=null;this._fieldDataCache.has(t)?z=this._fieldDataCache.get(t)?.clause:v||(z=c.getWhereClause(d,this.fieldsIndex),this._fieldDataCache.set(t,{alias:t,clause:z}));return v?this.featureAdapter.getAttribute(q,t):z?.calculateValue(q,this.featureAdapter)}getDataValues(q,d,v=!0){const t=
d.normalizationType,z=d.normalizationTotal,H=this.fieldsIndex.get(d.field),r=A.isDateOnlyField(H)||A.isTimestampOffsetField(H),p=A.isTimeOnlyField(H);return q.map(a=>{let u=d.field&&this.getFieldValue(a,d.field,this.fieldsIndex.get(d.field));d.field2?(u=`${F.processNullValue(u)}${d.fieldDelimiter}${F.processNullValue(this.getFieldValue(a,d.field2,this.fieldsIndex.get(d.field2)))}`,d.field3&&(u=`${u}${d.fieldDelimiter}${F.processNullValue(this.getFieldValue(a,d.field3,this.fieldsIndex.get(d.field3)))}`)):
"string"===typeof u&&v&&(r?u=u?(new Date(u)).getTime():null:p&&(u=u?x.timeOnlyToMilliseconds(u):null));t&&Number.isFinite(u)&&(a="field"===t&&d.normalizationField?this.getFieldValue(a,d.normalizationField,this.fieldsIndex.get(d.normalizationField)):null,u=F.getNormalizedValue(u,t,a,z));return u})}async getExpressionValues(q,d,v,t,z){const {arcadeUtils:H}=await C.loadArcade(),r=H.hasGeometryOperations(d);r&&await H.enableGeometryOperations();const p=H.createFunction(d),a=H.getViewInfo(v),u={fields:this.fieldsIndex.fields};
return q.map(n=>{n={attributes:this.featureAdapter.getAttributes(n),layer:u,geometry:r?{...g.getGeometry(t.geometryType,t.hasZ,t.hasM,this.featureAdapter.getGeometry(n)),spatialReference:v?.spatialReference}:null};n=H.createExecContext(n,a,z);return H.executeFunction(p,n)})}validateItem(q,d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:c.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d)?.clause?.testFeature(q,this.featureAdapter)??!1}validateItems(q,
d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:c.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d)?.clause?.testSet(q,this.featureAdapter)??!1}_processAttributesForOutFields(q){const d=this.outFields;if(!d?.length)return this.featureAdapter.getAttributes(q);const v={};for(const t of d){const {alias:z,clause:H}=this._fieldDataCache.get(t);v[z]=H?H.calculateValue(q,this.featureAdapter):this.featureAdapter.getAttribute(q,z)}return v}_processAttributesForDistinctValues(q){if(null==
q||!this.returnDistinctValues)return q;var d=this.outFields,v=[];if(d)for(const z of d){var {alias:t}=this._fieldDataCache.get(z);v.push(q[t])}else for(t in q)v.push(q[t]);d=`${(d||["*"]).join(",")}=${v.join(",")}`;v=this._returnDistinctMap.get(d)||0;this._returnDistinctMap.set(d,++v);return 1<v?null:q}}return e})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(c,g,A,x,F,C,e,q,d,v,t,z,H,r){function p(f){f=L.exec(f);if(!f)return null;const {hh:K,mm:Q,ss:T,ms:Z}=f.groups;return Number(K)*F.millisecondsPerTimeUnit.hours+Number(Q)*F.millisecondsPerTimeUnit.minutes+Number(T)*F.millisecondsPerTimeUnit.seconds+Number(Z||0)}function a(f,K){f=null!=f?f:"";null!=K&&K&&(f=f?"("+f+") AND ("+K+")":K);return f}function u(f){const K=f.layer;return f.fields.filter(Q=>!K.getField(Q))}function n(f){const K=f.layer;return f.fields.filter(Q=>{Q=K.getFieldUsageInfo(Q);
return!Q||!Q.supportsStatistics})}let D=null;const L=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;c.calculateHeatmapStats=function(f,K=18,Q,T,Z){const W=new Float64Array(T*Z);K=Math.round(x.pt2px(K));let U=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY;Q=v.createValueFunction(Q);for(const {geometry:k,attributes:y}of f){const {x:P,y:M}=k;f=Math.max(0,P-K);var I=Math.max(0,M-K);const S=Math.min(Z,M+K),Y=Math.min(T,P+K),da=+Q(y);for(;I<S;I++)for(let ha=
f;ha<Y;ha++){var h=I*T+ha;const ma=v.evaluateDensityKernel(ha-P,I-M,K)*da;h=W[h]+=ma;U=Math.min(U,h);w=Math.max(w,h)}}return{min:U,max:w}};c.getDataValues=async function(f,K,Q=!0){if(!K)return[];const {field:T,field2:Z,field3:W,fieldDelimiter:U,fieldInfos:w,timeZone:I}=f;var h=T&&w?.find(sa=>sa.name.toLowerCase()===T.toLowerCase());const k=h?d.isTimeOnlyField(h):!1,y=h?t.isAnyDateField(h):!1,P=f.valueExpression,M=f.normalizationType,S=f.normalizationField,Y=f.normalizationTotal,da=[];h=f.viewInfoParams;
let ha=null,ma=null;if(P){if(!D){const {arcadeUtils:sa}=await H.loadArcade();D=sa}D.hasGeometryOperations(P)&&await D.enableGeometryOperations();ha=D.createFunction(P);ma=h?D.getViewInfo({viewingMode:h.viewingMode,scale:h.scale,spatialReference:new C(h.spatialReference)}):null}f=f.fieldInfos;const pa=K[0]&&"declaredClass"in K[0]&&"esri.Graphic"===K[0].declaredClass||!f?null:{fields:f};K.forEach(sa=>{var qa=sa.attributes;if(P){var va=D.createExecContext(pa?{...sa,layer:pa}:sa,ma,I);va=D.executeFunction(ha,
va)}else qa&&(va=qa[T],Z?(va=`${z.processNullValue(va)}${U}${z.processNullValue(qa[Z])}`,W&&(va=`${va}${U}${z.processNullValue(qa[W])}`)):"string"===typeof va&&Q&&(y?va=va?(new Date(va)).getTime():null:k&&(va=va?p(va):null)));M&&"number"===typeof va&&isFinite(va)&&(qa=qa&&parseFloat(qa[S]),va=z.getNormalizedValue(va,M,qa,Y));da.push(va)});return da};c.getRangeExpr=function(f,K,Q){K=null!=K?f+" \x3e\x3d "+K:"";f=null!=Q?f+" \x3c\x3d "+Q:"";Q="";return(Q=K&&f?a(K,f):K||f)?"("+Q+")":""};c.getSQLFilterForNormalization=
function(f){const K=f.field,Q=f.normalizationType;f=f.normalizationField;let T;if("field"===Q)T="(NOT "+f+" \x3d 0)";else if("log"===Q||"natural-log"===Q||"square-root"===Q)T=`(${K} > 0)`;return T};c.getSumOfAttributesExpr=function(f,K,Q){const T=[],Z=[],W=[],U=[],w=[];f.forEach((k,y)=>{const P=k.field?"field":"expression",M=k.field||k.valueExpression;k.field?(w.push(M),Z.push(`var ${P}${y} = Number($feature["${M}"]);`)):(T.push(`function getValueForExpr${y}() {\n  ${M} \n}`),Z.push(`var ${P}${y} = Number(getValueForExpr${y}());`));
Q||W.push(`${P}${y} = IIf(${P}${y} < 0, 0, ${P}${y});`);U.push(`${P}${y}`)});f="return sum;";const I=T.length?null:w.reduce((k,y)=>`${k} + ${y}`);let h=null;K||Q?K?Q||(f="return IIf(sum \x3e\x3d 0, sum, null);",I&&(h=`(( ${I} ) >= 0)`)):(f="return IIf(sum !\x3d 0, sum, null);",I&&(h=`(( ${I} ) <> 0)`)):(f="return IIf(sum \x3e 0, sum, null);",I&&(h=`(( ${I} ) > 0)`));return{valueExpression:[T.length?T.join("\n"):"",Z.join("\n"),W.join("\n"),`var sum = ${U.join(" + ")};`,f].filter(Boolean).join("\n\n"),
sqlExpression:I,sqlWhere:h}};c.mergeWhereClauses=a;c.quantizeFeatures=function(f,K,Q,T){const Z=q.isWrappable(Q)?q.getInfo(Q):null,W=Z?Math.round((Z.valid[1]-Z.valid[0])/K.scale[0]):null;return f.map(U=>{const w=new r(U.geometry);e.quantizePoint(K,w,w);if(Z){var I=W??0,h=T[0];0>w.x?w.x+=I:w.x>h&&(w.x-=I)}U.geometry=w;return U})};c.timeOnlyToMilliseconds=p;c.verifyBasicFieldValidity=function(f,K,Q){const T=u({layer:f,fields:K});if(T.length)return new A(Q,"Unknown fields: "+T.join(", ")+". You can only use fields defined in the layer schema");
f=n({layer:f,fields:K});if(f.length)return new A(Q,"Unsupported fields: "+f.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};c.verifyFieldType=function(f,K,Q,T){let Z;K?K.name!==f.objectIdField&&T.includes(K.type)||(Z=new A(Q,"'field' should be one of these types: "+T.join(","))):Z=new A(Q,"'field' is not defined in the layer schema");return Z};c.verifyFilterValidty=function(f,K){if(f&&"intersects"!==f.spatialRelationship)return new A(K,
"Only 'intersects' spatialRelationship is supported for featureFilter")};c.verifyNumericField=function(f,K,Q){let T;K?K.name!==f.objectIdField&&d.isNumericField(K)||(T=new A(Q,"'field' should be one of these numeric types: "+d.numericTypes.join(","))):T=new A(Q,"'field' is not defined in the layer schema");return T};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(c){function g(x){return x?72*x/96:0}const A=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;
c.castRenderScreenPointArray=function(x){return x};c.castRenderScreenPointArray3=function(x){return x};c.castScreenPointArray=function(x){return x};c.createRenderScreenPoint=function(x=0,F=0){return{x,y:F}};c.createRenderScreenPointArray=function(x=0,F=0){return[x,F]};c.createRenderScreenPointArray3=function(x=0,F=0,C=0){return[x,F,C]};c.createScreenPoint=function(x=0,F=0){return{x,y:F}};c.createScreenPointArray=function(x=0,F=0){return[x,F]};c.pt2px=function(x){return x?x/72*96:0};c.px2pt=g;c.screenPointArrayToObject=
function(x,F){return F?(F.x=x[0],F.y=x[1],F):{x:x[0],y:x[1]}};c.screenPointObjectToArray=function(x,F){return F?(F[0]=x.x,F[1]=x.y,2<F.length&&(F[2]=0),F):[x.x,x.y]};c.toPt=function(x){if("string"===typeof x){var F=x.match(A);if(F){var C=Number(F[1]);F=F[3]&&F[3].toLowerCase();x="-"===x.charAt(0);C="px"===F?g(C):C;return x?-C:C}console.warn("screenUtils.toPt: input not recognized!");return null}return x};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports",
"../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(c,g,A,x){function F(q,d,v){return 0===q?0:q*e[d]/e[v]}function C(q){switch(q){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const e={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,
centuries:31536E8};c.convertTime=F;c.isValidDate=function(q){return q instanceof Date&&!isNaN(q.getTime())};c.makeUTCTime=function(q,d,v="milliseconds"){d=new Date(F(d,v,"milliseconds"));d.setUTCFullYear(q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate());return d};c.mergeTimeExtents=function(q,d){return q&&d?q.intersection(d):q||d};c.millisecondsPerTimeUnit=e;c.offsetDate=function(q,d,v,t=A.system){t=new x.IANAZone(g.resolveTimeZone(t));q=x.DateTime.fromJSDate(q,{zone:t});t="decades"===v||"centuries"===
v?"year":C(v);"decades"===v&&(d*=10);"centuries"===v&&(d*=100);return q.plus({[t]:d}).toJSDate()};c.offsetDateUTC=function(q,d,v="milliseconds"){q=q.getTime();d=F(d,v,"milliseconds");return new Date(q+d)};c.resetUTCDate=function(q,d){q=new Date(q.getTime());q.setUTCFullYear(d.getFullYear(),d.getMonth(),d.getDate());return q};c.timeSinceUTCMidnight=function(q,d="milliseconds"){const v=F(q.getUTCHours(),"hours","milliseconds"),t=F(q.getUTCMinutes(),"minutes","milliseconds"),z=F(q.getUTCSeconds(),"seconds",
"milliseconds");q=q.getUTCMilliseconds();return F(v+t+z+q,"milliseconds",d)};c.truncateDate=function(q,d,v=A.system){v=new x.IANAZone(g.resolveTimeZone(v));q=x.DateTime.fromJSDate(q,{zone:v});if("decades"===d||"centuries"===d)return q=q.startOf("year"),{year:v}=q,q.set({year:v-v%("decades"===d?10:100)}).toJSDate();d=C(d);return q.startOf(d).toJSDate()};c.truncateLocalTime=function(q){const d=new Date(0);d.setHours(0);d.setMinutes(0);d.setSeconds(0);d.setMilliseconds(0);d.setFullYear(q.getUTCFullYear(),
q.getUTCMonth(),q.getUTCDate());return d};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(c,g,A,x,F){function C(e,q,d,v){let {color:t,ratio:z}=q,{color:H,ratio:r}=d;r===z&&(1===r?z-=1E-6:r+=1E-6);q=g.clamp((v-z)/(r-z),0,1);x.lerp(e,t.toArray(),H.toArray(),q)}c.createValueFunction=function(e){return"function"===
typeof e?e:e?q=>+q[e]:()=>1};c.evaluateDensityKernel=function(e,q,d){e=Math.sqrt(e**2+q**2)/d;return 1<e?0:3/(Math.PI*d**2)*(1-e**2)**2};c.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(e){return A.px2pt(2.4*e)};c.generateGradient=function(e){const q=new Uint8ClampedArray(2048);e=e.filter(({ratio:H})=>0<=H&&1>=H).sort((H,r)=>H.ratio-r.ratio).map(({color:H,ratio:r})=>({color:H,ratio:Math.max(r,.001)}));if(1>e.length)return q;let d=e[0],v=e[0],t=1;const z=F.create();for(let H=0;512>H;H++){const r=
(H+.5)/512;for(;r>v.ratio&&t<e.length;)d=v,v=e[t++];C(z,d,v,r);q.set(z,4*H)}return q};c.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(e){return A.pt2px(e)/2.4};c.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),function(c,g,A,x,F,C){function e(r){return String(r).padStart(2,
"0")}function q(r,p,a){if("date"===p||"number"===p){"number"===p&&(r=new Date(r));p=a?r.getFullYear():r.getUTCFullYear();const u=e((a?r.getMonth():r.getUTCMonth())+1),n=e(a?r.getDate():r.getUTCDate()),D=e(a?r.getHours():r.getUTCHours()),L=e(a?r.getMinutes():r.getUTCMinutes());r=e(a?r.getSeconds():r.getUTCSeconds());r=`TIMESTAMP'${p}-${u}-${n} ${D}:${L}:${r}'`}return r}function d(r,p){if(p instanceof Date)return"date";if("number"===typeof p)return"number";if("string"===typeof p&&(r=r.getField(p),"\x3cnow\x3e"!==
p.toLowerCase()&&A.isDateField(r)))return"field"}const v={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},t={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},z=new Set(["integer","small-integer"]);let H=null;c.castIntegerFieldToFloat=function(r){return`cast(${r} as float)`};c.dateTypes=
["date","date-only","timestamp-offset"];c.defaultBasemapGroups=v;c.fieldDelimiter=",";c.formatAnyDate=function(r,p){const {format:a,timeZoneOptions:u,fieldType:n}=p??{};let D;u&&({timeZone:L,timeZoneName:D}=C.getTimeZoneFormattingOptions(u.layerTimeZone,u.datesInUnknownTimezone,u.viewTimeZone,g.convertDateFormatToIntlOptions(a||"short-date-short-time"),n));if("string"===typeof r&&isNaN(Date.parse("time-only"===n?`1970-01-01T${r}Z`:r)))return r;switch(n){case "date-only":var L=g.convertDateFormatToIntlOptions(a||
"short-date");return"string"===typeof r?g.formatDateOnly(r,{...L}):g.formatDate(r,{...L,timeZone:C.utc});case "time-only":return L=g.convertDateFormatToIntlOptions(a||"short-time"),"string"===typeof r?g.formatTimeOnly(r,L):g.formatDate(r,{...L,timeZone:C.utc});case "timestamp-offset":if(!L&&"string"===typeof r&&(new Date(r)).toISOString()!==r)return r;L=(p=a||u?g.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0)?{...p,timeZone:L,timeZoneName:D}:void 0;return"string"===typeof r?g.formatTimestamp(r,
L):g.formatDate(r,L);default:return p=a||u?g.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0,g.formatDate("string"===typeof r?new Date(r):r,p?{...p,timeZone:L,timeZoneName:D}:void 0)}};c.getBasemapGroup=function(r,p=v){for(const a in p)if(p[a].includes(r))return a};c.getBasemapId=function(r,p,a=!0){let u=null;r&&("string"===typeof r?p.includes(r)&&(u=r):u=F.getWellKnownBasemapId(r));return a?u||"gray":u};c.getDateDiffSQL=function(r,p,a,u){const {hasQueryEngine:n}=r;a=q(a,d(r,a),
n);r=q(p,d(r,p),n);r=`(${a} - ${r})`;u=t[u];p="/";1>u&&(u=1/u,p="*");return{sqlExpression:1===u?r:`(${r} ${p} ${u})`,sqlWhere:null}};c.getDateType=d;c.getFieldsList=async function(r){const {field:p,field2:a,field3:u,normalizationField:n,valueExpression:D}=r;r=[];D&&(H||({arcadeUtils:r}=await x.loadArcade(),H=r),r=H.extractFieldNames(D));p&&r.push(p);a&&r.push(a);u&&r.push(u);n&&r.push(n);return r};c.getNormalizationType=function(r){let p=r.normalizationType;p||(r.normalizationField?p="field":null!=
r.normalizationTotal&&(p="percent-of-total"));return p??void 0};c.isAnyDateField=function(r){return A.isDateField(r)||A.isDateOnlyField(r)||A.isTimestampOffsetField(r)};c.isIntegerField=function(r,p){r=p&&r.getField(p);return!!r&&z.has(r.type)};c.unitValueInDays=t;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(c,g,A,x,F,C,e,q,d,v){function t(I,h){let k;if("string"===typeof I){const y=I in v.esriBasemapDefinitions,P=!y&&I.includes("/");if(!y&&!P)return h=Object.entries(v.esriBasemapDefinitions).filter(([,M])=>A.apiKey&&!M.classic||!A.apiKey&&(M.classic||M.is3d)).map(([M])=>`"${M}"`).sort().join(", "),F.getLogger("esri.support.basemapUtils").warn(`Unable to find basemap definition for: ${I}. Try one of these: ${h}`),null;h&&(k=h[I]);k||(k=y?g.fromId(I):new g({style:{id:I}}),h&&(h[I]=k))}else k=q.ensureType(g,
I);k?.destroyed&&(F.getLogger("esri.support.basemapUtils").warn("The provided basemap is already destroyed",{basemap:k}),k=null);return k}function z(I){if(U)return U(I);let h=null;I=a(I);const k=!I?.baseLayers.length;for(const P in v.esriBasemapDefinitions){var y=L(v.esriBasemapDefinitions[P]);y=K(I,y,{mustMatchReferences:k});if("equal"===y){h=P;break}"base-layers-equal"===y&&(h=P)}return h}function H(I,h){const k=new x;I.forEach(y=>{const P=h.find(M=>"scene"!==M.type&&T(n(y),n(M)))||y;k.includes(P)?
k.push(y):k.push(P)});return k}function r(I){if(p(I.url))return!0;if("vector-tile"===I.type)for(const h in I.sourceNameToSource)if(p(I.sourceNameToSource[h]?.sourceUrl))return!0;return!1}function p(I){if(!I)return!1;I=new e.Url(e.makeAbsolute(I));return!!I.authority&&w.test(I.authority)}function a(I){return I?!I.loaded&&I.resourceInfo?L(I.resourceInfo.data):{baseLayers:u(I.baseLayers),referenceLayers:u(I.referenceLayers)}:null}function u(I){return(x.isCollection(I)?I.toArray():I).map(n)}function n(I){return{type:I.type,
effect:"effect"in I?I.effect:void 0,url:Z("urlTemplate"in I&&I.urlTemplate||I.url||"styleUrl"in I&&I.styleUrl||""),minScale:"minScale"in I&&null!=I.minScale?I.minScale:0,maxScale:"maxScale"in I&&null!=I.maxScale?I.maxScale:0,opacity:null!=I.opacity?I.opacity:1,visible:null!=I.visible?!!I.visible:!0,sublayers:"map-image"!==I.type&&"wms"!==I.type||null==I.sublayers?void 0:I.sublayers?.map(h=>({id:h.id,visible:h.visible})),activeLayerId:"wmts"===I.type?I.activeLayer?.id:void 0}}function D(I){return I.isReference||
"ArcGISSceneServiceLayer"===I.layerType}function L(I){return I?{baseLayers:f((I.baseMapLayers??[]).filter(h=>!D(h))),referenceLayers:f((I.baseMapLayers??[]).filter(h=>D(h)))}:null}function f(I){return I.map(h=>{let k;switch(h.layerType){case "VectorTileLayer":k="vector-tile";break;case "ArcGISTiledMapServiceLayer":k="tile";break;case "ArcGISSceneServiceLayer":k="scene";break;default:k="unknown"}return{type:k,effect:h.effect,url:Z(h.templateUrl||h.urlTemplate||h.styleUrl||h.url),minScale:h.minScale??
0,maxScale:h.maxScale??0,opacity:h.opacity??1,visible:null!=h.visibility?!!h.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function K(I,h,k){return null!=I!==(null!=h)?"not-equal":I&&h?Q(I.baseLayers,h.baseLayers)?Q(I.referenceLayers,h.referenceLayers)?"equal":k.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function Q(I,h){if(I.length!==h.length)return!1;for(let k=0;k<I.length;k++)if(!T(I[k],h[k]))return!1;return!0}function T(I,h){if(I.type!==h.type||I.url!==h.url||
I.minScale!==h.minScale||I.maxScale!==h.maxScale||I.visible!==h.visible||I.opacity!==h.opacity||!d.effectEquals(I.effect,h.effect))return!1;if(null!=I.activeLayerId||null!=h.activeLayerId)return I.activeLayerId===h.activeLayerId;if(null!=I.sublayers||null!=h.sublayers){if(null==I.sublayers||null==h.sublayers||I.sublayers.length!==h.sublayers.length)return!1;for(let k=0;k<I.sublayers.length;k++){const y=I.sublayers.at(k),P=h.sublayers.at(k);if(y?.id!==P?.id||y?.visible!==P?.visible)return!1}}return!0}
function Z(I){return I?e.normalize(I).replace(/^\s*https?:/i,"").toLowerCase():""}function W(I){return"portalItem"in I?I.portalItem?.thumbnailUrl:void 0}let U;const w=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;c.clonePreservingTiledLayers=function(I,h=null){I=t(I);if(!I)return null;I=I.clone();h&&(I.baseLayers=H(I.baseLayers,h.baseLayers),I.referenceLayers=H(I.referenceLayers,h.referenceLayers));return I};c.contentEquals=function(I,h){if(I===h||null!=I?.portalItem?.id&&I.portalItem.id===h?.portalItem?.id)return!0;
I=a(I);h=a(h);return"equal"===K(I,h,{mustMatchReferences:!0})};c.createCache=function(){return{}};c.destroyCache=function(I){for(const h in I)C.destroyMaybe(I[h]),delete I[h]};c.ensureType=t;c.findSpatialReference=function(I,h){if(null==h||null==I)return{spatialReference:null,updating:!1};if("not-loaded"===h.loadStatus)return h.load(),{spatialReference:null,updating:!0};if(h.spatialReference)return{spatialReference:h.spatialReference,updating:!1};if(0===h.baseLayers.length)return{spatialReference:null,
updating:!1};h=h.baseLayers.at(0);switch(h.loadStatus){case "not-loaded":h.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}h=(("supportedSpatialReferences"in h?h.supportedSpatialReferences:null)||["tileInfo"in h?h.tileInfo?.spatialReference:h.spatialReference]).filter(Boolean);const k=I.spatialReference;return k?{spatialReference:h.find(y=>k.equals(y))??h[0]??null,updating:!1}:{spatialReference:h[0],updating:!1}};c.getBasemapThumbnailUrl=
function(I){if(!I)return null;var {thumbnailUrl:h}=I;return h?h:(h=z(I))?v.esriBasemapDefinitions[h].thumbnailUrl:C.mappedFind(I.baseLayers,W)};c.getWellKnownBasemapId=z;c.hasDeveloperBasemapLayer=function(I){return!!I?.baseLayers.concat(I.referenceLayers).some(r)};c.isBasemap3D=function(I){return"Web Scene"===I.portalItem?.type||I.referenceLayers.some(h=>"scene"===h.type)};c.isBasemapInBeta=function(I){return!!I?.portalItem?.tags?.some(h=>"beta"===h.toLowerCase())};c.isBasemapLayer=function(I,h){return I.basemap?.referenceLayers?.some(k=>
k.uid===h)||I.basemap?.baseLayers?.some(k=>k.uid===h)};c.isDeveloperBasemapLayer=r;c.overrideGetWellKnownBasemapId=function(I){U=I};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(c,g,A,x,F,C,e,q,d,v,t,z,H,r,p,a,u,n,D,L,f,K,Q){var T;let Z=0;C=T=class extends C.JSONSupportMixin(q){constructor(w){super(w);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+Z++;this.baseLayers=new x;this.referenceLayers=new x;const I=h=>{h.parent&&h.parent!==this&&"remove"in h.parent&&h.parent.remove(h);h.parent=this;"elevation"===h.type&&v.getLogger(this).error(`Layer '${h.title}, id:${h.id}' of type '${h.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",h=>I(h.item)),this.referenceLayers.on("after-add",h=>I(h.item)),this.baseLayers.on("after-remove",h=>{h.item.parent=null}),this.referenceLayers.on("after-remove",h=>{h.item.parent=null})])}initialize(){this.when().catch(w=>{v.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,w)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var w=this.baseLayers.toArray();for(const I of w)I.destroy();
w=this.referenceLayers.toArray();for(const I of w)I.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=t.destroyMaybe(this.portalItem)}normalizeCtorArgs(w){w&&"resourceInfo"in w&&(this._set("resourceInfo",w.resourceInfo),w={...w},delete w.resourceInfo);return w}set baseLayers(w){this._set("baseLayers",F.referenceSetter(w,this._get("baseLayers")))}_writeBaseLayers(w,I,h){const k=[];w&&(h={...h,layerContainerType:"basemap"},this.baseLayers.forEach(y=>{y=Q.getLayerJSON(y,
h.webmap?h.webmap.getLayerJSONFromResourceInfo(y):null,h);null!=y&&k.push(y)}),this.referenceLayers.forEach(y=>{const P=Q.getLayerJSON(y,h.webmap?h.webmap.getLayerJSONFromResourceInfo(y):null,h);null!=P&&("scene"!==y.type&&(P.isReference=!0),k.push(P))}));I.baseMapLayers=k}set referenceLayers(w){this._set("referenceLayers",F.referenceSetter(w,this._get("referenceLayers")))}writeTitle(w,I){I.title=w||"Basemap"}load(w){this.addResolvingPromise(this._loadFromSource(w));return Promise.resolve(this)}loadAll(){return d.loadAll(this,
w=>{w(this.baseLayers,this.referenceLayers)})}clone(){const w={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(I=>e.isClonable(I)?I.clone():I),referenceLayers:this.referenceLayers.map(I=>e.isClonable(I)?I.clone():I)};this.loaded&&(w.loadStatus="loaded");return(new T({resourceInfo:this.resourceInfo})).set(w)}read(w,I){this.resourceInfo||this._set("resourceInfo",{data:w,context:I});super.read(w,I)}write(w,I){w=w||{};I?.origin||(I={origin:"web-map",...I});super.write(w,
I);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(w.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(h=>{h=e.clone(h);h.url&&H.isProtocolRelative(h.url)&&(h.url=`https:${h.url}`);h.templateUrl&&H.isProtocolRelative(h.templateUrl)&&(h.templateUrl=`https:${h.templateUrl}`);return h}));return w}async _loadFromSource(w){const {resourceInfo:I,portalItem:h,style:k}=this;z.throwIfAborted(w);const y=[];I?(y.push(this._loadLayersFromJSON(I.data,I.context?I.context.url:null,w)),I.data.id&&!I.data.title&&
y.push(f.getBasemapTitle(I.data.id).then(P=>{P&&this.read({title:P},I.context)}))):h?y.push(this._loadFromItem(h,w)):k&&y.push(this._loadFromStylesService(k,w));await Promise.all(y)}async _loadLayersFromJSON(w,I,h){const k=this.resourceInfo?.context,y=this.portalItem?.portal||k?.portal||null,P=U[k?.origin||""]??"web-map",{populateOperationalLayers:M}=await new Promise((Y,da)=>c(["./layers/support/layersCreator"],Y,da)),S=[];z.throwIfAborted(h);if(w.baseMapLayers&&Array.isArray(w.baseMapLayers)){I=
{context:{...k,origin:P,url:I,portal:y,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const Y=da=>"web-scene"===P&&"ArcGISSceneServiceLayer"===da.layerType||da.isReference;h=M(this.baseLayers,w.baseMapLayers.filter(da=>!Y(da)),I);S.push(h);w=M(this.referenceLayers,w.baseMapLayers.filter(Y),I);S.push(w)}await Promise.allSettled(S)}async _loadFromItem(w,I){const h=await (await w.load(I)).fetchData("json",I),k=H.urlToObject(w.itemUrl??"");this._set("resourceInfo",{data:h.baseMap??
{},context:{origin:W[w.type||""]??"web-map",portal:w.portal||D.getDefault(),url:k}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:h.spatialReference},this.resourceInfo.context);this.read({title:w.title,thumbnailUrl:w.thumbnailUrl},{origin:"portal-item",portal:w.portal||D.getDefault(),url:k});return this._loadLayersFromJSON(this.resourceInfo.data,k,I)}async _loadFromStylesService(w,I){var h=`${w.serviceUrl}/${w.id}`;w=(await A(h,{query:{language:w.getLanguageParamValue(),
places:w.places,worldview:w.worldview},signal:I?.signal})).data;h=H.urlToObject(h);this._set("resourceInfo",{data:w.baseMap??{},context:{origin:"web-map",url:h}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:w.spatialReference},this.resourceInfo.context);return this._loadLayersFromJSON(this.resourceInfo.data,h,I)}static fromId(w){return(w=f.esriBasemapDefinitions[w])?w.itemId?new T({portalItem:{id:w.itemId,portal:{url:"https://www.arcgis.com"}}}):T.fromJSON(w,
{origin:w.is3d?"web-scene":"web-map"}):null}};g.__decorate([r.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(w,I,h,k){this._writeBaseLayers(w,I,k)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:x}},writer(w,I,h,k){this._writeBaseLayers(w,I,k)}}}}}})],C.prototype,"baseLayers",null);g.__decorate([r.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],C.prototype,"id",void 0);g.__decorate([r.property({type:L})],C.prototype,"portalItem",void 0);
g.__decorate([r.property()],C.prototype,"referenceLayers",null);g.__decorate([r.property({readOnly:!0})],C.prototype,"resourceInfo",void 0);g.__decorate([r.property({type:n})],C.prototype,"spatialReference",void 0);g.__decorate([r.property({type:K})],C.prototype,"style",void 0);g.__decorate([r.property()],C.prototype,"thumbnailUrl",void 0);g.__decorate([r.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],C.prototype,"title",void 0);g.__decorate([u.writer("title")],C.prototype,
"writeTitle",null);C=T=g.__decorate([a.subclass("esri.Basemap")],C);const W={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},U={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return C})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(c,g){c.castForReferenceSetter=function(A){return A};c.referenceSetter=function(A,x,F=g){x||=new F;if(x===A)return x;x.removeAll();A&&(Array.isArray(A)||"items"in A&&Array.isArray(A.items))?
x.addMany(A):A&&x.add(A);return x};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(c,g,A,x,F,C,e,q){const d=v=>{v=class extends v{constructor(...t){super(...t);this.loadError=this._loadController=null;this.loadStatus="not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(z=>
{const H=this.load.bind(this);this.load=r=>{const p=new Promise((a,u)=>{const n=F.onAbortOrThrow(r,u);this.destroyed&&u(new g("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(a,u).finally(()=>{n&&n.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const a=this._loadController=new AbortController;H({signal:a.signal})}z();return p}}));this.when(()=>{this._set("loadStatus","loaded");
this._loadController=null},z=>{this._set("loadStatus","failed");this._set("loadError",z);this._loadController=null})}destroy(){this._loadController&&(this._loadController=A.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;this._set("loadError",new g("load:cancelled","Cancelled"));
this._loadController?.abort();this._promiseProps.abort();return this}};c.__decorate([e.property({readOnly:!0})],v.prototype,"loaded",null);c.__decorate([e.property({readOnly:!0})],v.prototype,"loadError",void 0);c.__decorate([e.property({clonable:!1})],v.prototype,"loadStatus",void 0);c.__decorate([e.property({type:[C],readOnly:!0})],v.prototype,"loadWarnings",null);return v=c.__decorate([q.subclass("esri.core.Loadable")],v)};x=class extends d(x.EsriPromise){};x=c.__decorate([q.subclass("esri.core.Loadable")],
x);(function(v){v.LoadableMixin=d;v.isLoadable=function(t){return!(!t||!t.load)}})(x||={});return x})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(c,g,A,x,F){var C;(function(d){d[d.PENDING=0]="PENDING";d[d.RESOLVED=1]="RESOLVED";d[d.REJECTED=2]="REJECTED"})(C||={});class e{constructor(){this._resolver=x.createResolver();this._status=C.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>
{this._status=C.RESOLVED;this._cleanUp()},()=>{this._status=C.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(d){this._resolvingPromises.push(d);this._tryResolve()}isResolved(){return this._status===C.RESOLVED}isRejected(){return this._status===C.REJECTED}isFulfilled(){return this._status!==C.PENDING}abort(){this._resolver.reject(x.createAbortError())}_cleanUp(){this._resolvingPromises=this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var d=
x.createResolver(),v=[...this._resolvingPromises,d.promise],t=this._allPromise=Promise.all(v);t.then(()=>{this.isFulfilled()||this._allPromise!==t||this._resolver.resolve()},z=>{this.isFulfilled()||this._allPromise!==t||x.isAbortError(z)||this._resolver.reject(z)});d.resolve()}}}const q=d=>{d=class extends d{constructor(...v){super(...v);this._promiseProps=new e;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(v,
t){return this._promiseProps.promise.then(()=>this).then(v,t)}catch(v){return this.when(null,v)}addResolvingPromise(v){v&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in v?v.when():v)}};return d=g.__decorate([F.subclass("esri.core.Promise")],d)};c.EsriPromise=class extends q(A){};c.EsriPromise=g.__decorate([F.subclass("esri.core.Promise")],c.EsriPromise);c.EsriPromiseMixin=q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(c,g,A,x){async function F(C,e){const q=[],d=(...t)=>{for(const z of t)null!=z&&(Array.isArray(z)?d(...z):A.isCollection(z)?z.forEach(H=>d(H)):x.isLoadable(z)&&q.push(z))};e(d);let v=null;await g.map(q,async t=>{t=await g.result("loadAll"in t&&"function"===typeof t.loadAll?t.loadAll():t.load());!1!==t.ok||v||(v=t)});if(v)throw v.error;return C}c.loadAll=async function(C,e){await C.load();return F(C,e)};c.loadAllChildren=F;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(c,g,A,x,F,C,e,q,d,v,t,z,H,r,p,a,u,n,D,L,f,K,Q,T){function Z(k){const y=x.id;return()=>{const P=k.deref();P&&y.findCredential(P.restUrl)&&P.signIn().catch(()=>{})}}const W=k=>Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));var U;let w;const I={PortalGroup:()=>Promise.resolve({default:L}),PortalItem:()=>new Promise((k,y)=>c(["./PortalItem"],P=>k(W(P)),y)),PortalUser:()=>Promise.resolve({default:Q})};e=U=class extends e.JSONSupportMixin(q){constructor(k){super(k);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.layoutGroupQuery=
this.galleryTemplatesGroupQuery=this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=null;this.isReadOnly=this.isPortal=!1;this.region=this.portalProperties=
this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.recycleBinEnabled=!1;this.rotatorPanels=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=A.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(k){return"string"===
typeof k?{url:k}:k}destroy(){h.unregister(this);this.defaultBasemap=d.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=d.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=d.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=d.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(k){if(k)for(const y of k)A.request.trustedServers.includes(y)||A.request.trustedServers.push(y);return k}readDefaultBasemap(k){return this._readBasemap(k)}readDefaultDevBasemap(k){return this._readBasemap(k)}readDefaultVectorBasemap(k){return this._readBasemap(k)}get extraQuery(){const k=
!this.user?.orgId||this.canSearchPublic;return this.id&&!k?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let k=this.url;if(k){const y=k.indexOf("/sharing");k=0<y?k.substring(0,y):this.url.replace(/\/+$/,"");k+="/sharing/rest"}return k}get thumbnailUrl(){const k=this.restUrl,y=this.thumbnail;return k&&y?this._normalizeSSL(k+"/portals/self/resources/"+y):null}readUrlKey(k){return k?k.toLowerCase():
k}readUser(k){let y=null;k&&(y=Q.fromJSON(k),y.portal=this);return y}load(k){const y=(new Promise((P,M)=>c(["../Basemap"],S=>P(W(S)),M))).then(({default:P})=>{v.throwIfAborted(k);w=P}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,k)).then(P=>{if(x.id){const M=x.id;this.credential=M.findCredential(this.restUrl);this.credential||this.authMode!==U.AUTH_MODE_AUTO&&this.authMode!==U.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=
M.on("credential-create",Z(new WeakRef(this))),h.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=P;this.read(P)});this.addResolvingPromise(y);return Promise.resolve(this)}async createElevationLayers(){await this.load();const k=this._getHelperService("defaultElevationLayers"),y=(await new Promise((P,M)=>c(["../layers/ElevationLayer"],S=>P(W(S)),M))).default;return k?k.map(P=>new y({id:P.id,url:P.url})):[]}async fetchBasemaps(k,y){const P=await this._fetchBasemaps(k,y);!0===
y?.include3d&&!1!==this.use3dBasemaps&&(k=await this._fetchBasemaps3D(k,y),P.unshift(...k));return P}fetchCategorySchema(k){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",k).then(y=>y.categorySchema):v.isAborted(k)?Promise.reject(v.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(k){const y=this.featuredGroups,P=new f({num:100,sortField:"title"});if(y?.length){const M=[];for(const S of y)M.push(`(title:"${S.title}" AND owner:${S.owner})`);P.query=
M.join(" OR ");return this.queryGroups(P,k).then(S=>S.results)}return v.isAborted(k)?Promise.reject(v.createAbortError()):Promise.resolve([])}fetchRegions(k){const y=this.user?.culture||this.culture||n.getLocale();return this.request(this.restUrl+"/portals/regions",{...k,query:{culture:y}})}fetchSettings(k){const y=this.user?.culture||this.culture||n.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...k,query:{culture:y}})}static getDefault(){return D.ensureDefaultPortalInstance(()=>
new U)}queryGroups(k,y){return this.queryPortal("/community/groups",k,"PortalGroup",y)}queryItems(k,y){return this.queryPortal("/search",k,"PortalItem",y)}queryUsers(k,y){k.sortField||(k.sortField="username");return this.queryPortal("/community/users",k,"PortalUser",y)}fetchSelf(k=this.authMode,y=!1,P){const M=this.restUrl+"/portals/self";k={authMode:k,query:{culture:n.getLocale().toLowerCase()},withCredentials:!0,...P};"auto"===k.authMode&&(k.authMode="no-prompt");y&&(k.query.default=!0);return this.request(M,
k)}queryPortal(k,y,P,M){const S=z.ensureType(f,y),Y=da=>this.request(this.restUrl+k,{...S.toRequestOptions(this),...M}).then(ha=>{const ma=S.clone();ma.start=ha.nextStart;return new K({nextQueryParams:ma,queryParams:S,total:ha.total,results:U._resultsToTypedArray(da,{portal:this},ha,M)})}).then(ha=>Promise.all(ha.results.map(ma=>"function"===typeof ma.when?ma.when():ha)).then(()=>ha,ma=>{v.throwIfAbortError(ma);return ha}));return P&&I[P]?I[P]().then(({default:da})=>{v.throwIfAborted(M);return Y(da)}):
Y()}signIn(){if(this.authMode===U.AUTH_MODE_ANONYMOUS||this.authMode===U.AUTH_MODE_NO_PROMPT&&!x.id)return Promise.reject(new C("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const k=y=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return y||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=
y;return this.fetchSelf("immediate")});if(this.user&&this.credential===y)return null;this.credential=y;return this.fetchSelf("immediate")}).then(P=>{P&&(this.sourceJSON=P,this.read(P))});return x.id?x.id.getCredential(this.restUrl,{prompt:this.authMode!==U.AUTH_MODE_NO_PROMPT}).then(y=>k(y)):k(this.credential)}normalizeUrl(k){const y=this.credential?.token;return this._normalizeSSL(y?k+(k.includes("?")?"\x26":"?")+"token\x3d"+y:k)}requestToTypedArray(k,y,P){return this.request(k,y).then(M=>{const S=
U._resultsToTypedArray(P,{portal:this},M);return Promise.all(S.map(Y=>"function"===typeof Y.when?Y.when():M)).then(()=>S,()=>S)})}request(k,y={}){var P={f:"json",...y.query};const {authMode:M=this.authMode===U.AUTH_MODE_ANONYMOUS||this.authMode===U.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:S=null,cacheBust:Y=!1,method:da="auto",responseType:ha="json",signal:ma}=y;P={authMode:M,body:S,cacheBust:Y,method:da,query:P,responseType:ha,timeout:0,signal:ma};y.withCredentials&&(P.withCredentials=!0);return F(this._normalizeSSL(k),
P).then(pa=>pa.data)}toJSON(){throw new C("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(k){if(!k)return null;if(k.declaredClass)throw Error("JSON object is already hydrated");return new U({sourceJSON:k})}_getHelperService(k){const y=this.helperServices&&this.helperServices[k];if(!y)throw new C("portal:service-not-found",`The \`helperServices\` do not include an entry named "${k}"`);return y}async _fetchBasemaps(k,y){const P=new f;P.query=k||(A.apiKey&&T.supportsApiKey(this.url)?
this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);P.disableExtraQuery=!0;k=await this.queryGroups(P,y);if(!k.total)return[];k=k.results[0];P.num=100;P.query='type:"Web Map" -type:"Web Application"';P.sortField=k.sortField||"name";P.sortOrder=k.sortOrder||"desc";y=await k.queryItems(P,y);return y.total?y.results.filter(M=>"Web Map"===M.type).map(M=>new w({portalItem:M})):[]}async _fetchBasemaps3D(k,y){k=k||this.basemapGalleryGroupQuery3D;
if(!k)return[];k=new f({query:k,disableExtraQuery:!0});var P=await this.queryGroups(k,y);if(!P.total)return[];P=P.results[0];k.num=100;k.query='type:"Web Scene"';k.sortField=P.sortField||"name";k.sortOrder=P.sortOrder||"desc";y=await P.queryItems(k,y);return y.total?y.results.filter(M=>"Web Scene"===M.type).map(M=>new w({portalItem:M})):[]}_normalizeSSL(k){return k.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(k){return k?(k=w.fromJSON(k),k.portalItem={portal:this},k):null}static _resultsToTypedArray(k,
y,P,M){if(P){const S=null!=M?M.signal:null;P=P.listings||P.notifications||P.userInvitations||P.tags||P.items||P.groups||P.comments||P.provisions||P.results||P.relatedItems||P;if(k||y)P=P.map(Y=>{Y=Object.assign(k?k.fromJSON(Y):Y,y);"function"===typeof Y.load&&Y.load(S);return Y})}else P=[];return P}};e.AUTH_MODE_ANONYMOUS="anonymous";e.AUTH_MODE_AUTO="auto";e.AUTH_MODE_IMMEDIATE="immediate";e.AUTH_MODE_NO_PROMPT="no-prompt";g.__decorate([t.property()],e.prototype,"access",void 0);g.__decorate([t.property()],
e.prototype,"allSSL",void 0);g.__decorate([t.property()],e.prototype,"authMode",void 0);g.__decorate([t.property()],e.prototype,"authorizedCrossOriginDomains",void 0);g.__decorate([p.reader("authorizedCrossOriginDomains")],e.prototype,"readAuthorizedCrossOriginDomains",null);g.__decorate([t.property()],e.prototype,"basemapGalleryGroupQuery",void 0);g.__decorate([t.property({json:{name:"3DBasemapGalleryGroupQuery"}})],e.prototype,"basemapGalleryGroupQuery3D",void 0);g.__decorate([t.property()],e.prototype,
"bingKey",void 0);g.__decorate([t.property()],e.prototype,"canListApps",void 0);g.__decorate([t.property()],e.prototype,"canListData",void 0);g.__decorate([t.property()],e.prototype,"canListPreProvisionedItems",void 0);g.__decorate([t.property()],e.prototype,"canProvisionDirectPurchase",void 0);g.__decorate([t.property()],e.prototype,"canSearchPublic",void 0);g.__decorate([t.property()],e.prototype,"canShareBingPublic",void 0);g.__decorate([t.property()],e.prototype,"canSharePublic",void 0);g.__decorate([t.property()],
e.prototype,"canSignInArcGIS",void 0);g.__decorate([t.property()],e.prototype,"canSignInIDP",void 0);g.__decorate([t.property()],e.prototype,"colorSetsGroupQuery",void 0);g.__decorate([t.property()],e.prototype,"commentsEnabled",void 0);g.__decorate([t.property({type:Date})],e.prototype,"created",void 0);g.__decorate([t.property()],e.prototype,"credential",void 0);g.__decorate([t.property()],e.prototype,"culture",void 0);g.__decorate([t.property()],e.prototype,"currentVersion",void 0);g.__decorate([t.property()],
e.prototype,"customBaseUrl",void 0);g.__decorate([t.property()],e.prototype,"defaultBasemap",void 0);g.__decorate([p.reader("defaultBasemap")],e.prototype,"readDefaultBasemap",null);g.__decorate([t.property()],e.prototype,"defaultDevBasemap",void 0);g.__decorate([p.reader("defaultDevBasemap")],e.prototype,"readDefaultDevBasemap",null);g.__decorate([t.property({type:u})],e.prototype,"defaultExtent",void 0);g.__decorate([t.property()],e.prototype,"defaultVectorBasemap",void 0);g.__decorate([p.reader("defaultVectorBasemap")],
e.prototype,"readDefaultVectorBasemap",null);g.__decorate([t.property()],e.prototype,"description",void 0);g.__decorate([t.property()],e.prototype,"devBasemapGalleryGroupQuery",void 0);g.__decorate([t.property()],e.prototype,"eueiEnabled",void 0);g.__decorate([t.property({readOnly:!0})],e.prototype,"extraQuery",null);g.__decorate([t.property()],e.prototype,"featuredGroups",void 0);g.__decorate([t.property()],e.prototype,"featuredItemsGroupQuery",void 0);g.__decorate([t.property()],e.prototype,"galleryTemplatesGroupQuery",
void 0);g.__decorate([t.property()],e.prototype,"layoutGroupQuery",void 0);g.__decorate([t.property()],e.prototype,"livingAtlasGroupQuery",void 0);g.__decorate([t.property()],e.prototype,"hasCategorySchema",void 0);g.__decorate([t.property()],e.prototype,"helpBase",void 0);g.__decorate([t.property()],e.prototype,"helperServices",void 0);g.__decorate([t.property()],e.prototype,"helpMap",void 0);g.__decorate([t.property()],e.prototype,"homePageFeaturedContent",void 0);g.__decorate([t.property()],e.prototype,
"homePageFeaturedContentCount",void 0);g.__decorate([t.property()],e.prototype,"httpPort",void 0);g.__decorate([t.property()],e.prototype,"httpsPort",void 0);g.__decorate([t.property()],e.prototype,"id",void 0);g.__decorate([t.property()],e.prototype,"ipCntryCode",void 0);g.__decorate([t.property({readOnly:!0})],e.prototype,"isOrganization",null);g.__decorate([t.property()],e.prototype,"isPortal",void 0);g.__decorate([t.property()],e.prototype,"isReadOnly",void 0);g.__decorate([t.property({readOnly:!0})],
e.prototype,"itemPageUrl",null);g.__decorate([t.property()],e.prototype,"layerTemplatesGroupQuery",void 0);g.__decorate([t.property()],e.prototype,"maxTokenExpirationMinutes",void 0);g.__decorate([t.property({type:Date})],e.prototype,"modified",void 0);g.__decorate([t.property()],e.prototype,"name",void 0);g.__decorate([t.property()],e.prototype,"portalHostname",void 0);g.__decorate([t.property()],e.prototype,"portalMode",void 0);g.__decorate([t.property()],e.prototype,"portalProperties",void 0);
g.__decorate([t.property()],e.prototype,"region",void 0);g.__decorate([t.property()],e.prototype,"recycleBinEnabled",void 0);g.__decorate([t.property({readOnly:!0})],e.prototype,"restUrl",null);g.__decorate([t.property()],e.prototype,"rotatorPanels",void 0);g.__decorate([t.property()],e.prototype,"showHomePageDescription",void 0);g.__decorate([t.property()],e.prototype,"sourceJSON",void 0);g.__decorate([t.property()],e.prototype,"staticImagesUrl",void 0);g.__decorate([t.property({json:{name:"2DStylesGroupQuery"}})],
e.prototype,"stylesGroupQuery2d",void 0);g.__decorate([t.property({json:{name:"stylesGroupQuery"}})],e.prototype,"stylesGroupQuery3d",void 0);g.__decorate([t.property()],e.prototype,"supportsHostedServices",void 0);g.__decorate([t.property()],e.prototype,"symbolSetsGroupQuery",void 0);g.__decorate([t.property()],e.prototype,"templatesGroupQuery",void 0);g.__decorate([t.property()],e.prototype,"thumbnail",void 0);g.__decorate([t.property({readOnly:!0})],e.prototype,"thumbnailUrl",null);g.__decorate([t.property()],
e.prototype,"units",void 0);g.__decorate([t.property()],e.prototype,"url",void 0);g.__decorate([t.property()],e.prototype,"urlKey",void 0);g.__decorate([p.reader("urlKey")],e.prototype,"readUrlKey",null);g.__decorate([t.property()],e.prototype,"user",void 0);g.__decorate([p.reader("user")],e.prototype,"readUser",null);g.__decorate([t.property()],e.prototype,"use3dBasemaps",void 0);g.__decorate([t.property()],e.prototype,"useStandardizedQuery",void 0);g.__decorate([t.property()],e.prototype,"useVectorBasemaps",
void 0);g.__decorate([t.property()],e.prototype,"vectorBasemapGalleryGroupQuery",void 0);g=e=U=g.__decorate([a.subclass("esri.portal.Portal")],e);const h=new FinalizationRegistry(k=>{k.remove()});return g})},"esri/portal/portalDefault":function(){define(["exports"],function(c){let g;c.clearDefaultPortalInstance=function(){g=void 0};c.ensureDefaultPortalInstance=function(A){if(!g||g.destroyed)g=A();return g};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(c,g,A,x,F,C,e,q,d){var v;A=v=class extends A.JSONSupport{constructor(t){super(t);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const t=this.url,z=this.thumbnail;return t&&z&&this.portal?this.portal?.normalizeUrl(`${t}/info/${z}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:
null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(z=>{z=z.categorySchema||[];return z.some(H=>"contentCategorySetsGroupQuery.LivingAtlas"===H.source)?this._fetchCategorySchemaSet("LivingAtlas",t):z})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let z=this.thumbnailUrl;z&&t&&(z+=`&w=${t}`);return z}toJSON(){throw new g("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(t){if(!t)return null;
if(t.declaredClass)throw Error("JSON object is already hydrated");const z=new v({sourceJSON:t});z.read(t);return z}queryItems(t,z){t=F.ensureType(d,t);const H=this.portal;if(5<parseFloat(H.currentVersion))return t=t||new d,H.queryPortal(`/content/groups/${this.id}/search`,t,"PortalItem",z);t=t?t.clone():new d;t.query="group:"+this.id+(t.query?" "+t.query:"");return H.queryItems(t,z)}_fetchCategorySchemaSet(t,z){const H=this.portal;return H.fetchSelf(H.authMode,!0,z).then(r=>{if(r=r.contentCategorySetsGroupQuery)return r=
new d({disableExtraQuery:!0,num:1,query:r}),H.queryGroups(r,z);throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(r=>{if(r.total){r=r.results[0];const p=new d({num:1,query:`typekeywords:"${t}"`});return r.queryItems(p,z)}throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(r=>r.total?r.results[0].fetchData("json",z).then(p=>{p=p?.categorySchema;return p?.length?p:[]}):[])}};c.__decorate([x.property()],
A.prototype,"access",void 0);c.__decorate([x.property({type:Date})],A.prototype,"created",void 0);c.__decorate([x.property()],A.prototype,"description",void 0);c.__decorate([x.property()],A.prototype,"id",void 0);c.__decorate([x.property()],A.prototype,"isInvitationOnly",void 0);c.__decorate([x.property({type:Date})],A.prototype,"modified",void 0);c.__decorate([x.property()],A.prototype,"owner",void 0);c.__decorate([x.property()],A.prototype,"portal",void 0);c.__decorate([x.property()],A.prototype,
"snippet",void 0);c.__decorate([x.property()],A.prototype,"sortField",void 0);c.__decorate([x.property()],A.prototype,"sortOrder",void 0);c.__decorate([x.property()],A.prototype,"sourceJSON",void 0);c.__decorate([x.property()],A.prototype,"tags",void 0);c.__decorate([x.property()],A.prototype,"thumbnail",void 0);c.__decorate([x.property({readOnly:!0})],A.prototype,"thumbnailUrl",null);c.__decorate([x.property()],A.prototype,"title",void 0);c.__decorate([x.property({readOnly:!0})],A.prototype,"url",
null);return A=v=c.__decorate([q.subclass("esri.portal.PortalGroup")],A)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(c,g,A,x,F,C,e,q,d,v,t){var z;const H=new A.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});g=z=class extends g{constructor(r){super(r);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(r){"asc"!==r&&"desc"!==r||this._set("sortOrder",r)}clone(){return new z({categories:this.categories?x.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(r,p){let a=[];this.categories&&(a=this.categories.map(D=>Array.isArray(D)?JSON.stringify(D):D));let u="";if(this.extent){var n=t.project(this.extent,v.WGS84);null!=n&&(u=`${n.xmin},${n.ymin},${n.xmax},${n.ymax}`)}n=this.query;!this.disableExtraQuery&&r.extraQuery&&(n="("+n+")"+r.extraQuery);r={categories:a,bbox:u,q:n,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(r.sortField=this.sortField.split(",").map(D=>H.toJSON(D.trim())).join(","),r.sortOrder=this.sortOrder);return{query:{...p,...r}}}};c.__decorate([F.property()],g.prototype,"categories",void 0);c.__decorate([F.property()],g.prototype,"disableExtraQuery",void 0);c.__decorate([F.property({type:d})],g.prototype,"extent",void 0);c.__decorate([F.property()],g.prototype,"filter",void 0);c.__decorate([F.property()],g.prototype,"num",void 0);c.__decorate([F.property()],
g.prototype,"query",void 0);c.__decorate([F.property()],g.prototype,"sortField",void 0);c.__decorate([F.property()],g.prototype,"sortOrder",null);c.__decorate([F.property()],g.prototype,"start",void 0);return g=z=c.__decorate([q.subclass("esri.portal.PortalQueryParams")],g)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,A,x,F,C,e){g=class extends g{constructor(q){super(q);this.total=this.results=this.queryParams=this.nextQueryParams=null}};c.__decorate([A.property()],g.prototype,"nextQueryParams",void 0);c.__decorate([A.property()],g.prototype,"queryParams",void 0);c.__decorate([A.property()],g.prototype,"results",void 0);c.__decorate([A.property()],g.prototype,"total",void 0);return g=c.__decorate([e.subclass("esri.portal.PortalQueryResult")],g)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(c,g,A,x,F,C,e,q,d,v,t){var z;x=z=class extends x.JSONSupport{constructor(H){super(H);this.userType=this.userLicenseTypeId=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const H=this.url,r=this.thumbnail;return H&&r?this.portal.normalizeUrl(`${H}/info/${r}?f=json`):null}get userContentUrl(){const H=
this.portal?.restUrl;return H?`${H}/content/users/${this.username}`:null}get url(){const H=this.portal?.restUrl;return H?`${H}/community/users/${this.username}`:null}addItem(H){const r=H&&H.item;var p=H?.data;H=H?.folder;const a={method:"post"};r&&(a.query=r.createPostQuery(),null!=p&&("string"===typeof p?a.query.text=p:"object"===typeof p&&(a.query.text=JSON.stringify(p))));p=this.userContentUrl;H&&(p+="/"+("string"===typeof H?H:H.id));return this.portal.request(p+"/addItem",a).then(u=>{r.id=u.id;
r.portal=this.portal;return r.loaded?r.reload():r.load()})}async deleteItem(H,r=!1){let p=this.userContentUrl;H.ownerFolder&&(p+="/"+H.ownerFolder);await this.portal.request(p+`/items/${H.id}/delete`,{method:"post",query:r?{permanentDelete:!0}:{}});H.id=null;H.portal=null}async deleteItems(H,r=!1){H=H.concat();var p=this.userContentUrl+"/deleteItems";const a=[];var u=H.map(n=>n.id);if(u.length){r={method:"post",query:{items:u.join(","),permanentDelete:r}};p=await this.portal.request(p,r);for(const n of p.results)p=
H.find(D=>n.itemId===D.id),r=n.success,u=null,r?(p.id=null,p.portal=null):n.error&&(u=new A("portal:delete-item-failed",n.error.message,n.error)),a.push({item:p,success:r,error:u})}return a}fetchFolders(){return this.portal.request(this.userContentUrl??"",{query:{num:1}}).then(H=>H&&H.folders?H.folders.map(r=>{r=v.fromJSON(r);r.portal=this.portal;return r}):[])}fetchGroups(){return this.portal.request(this.url??"").then(H=>H&&H.groups?H.groups.map(r=>{r=t.fromJSON(r);r.portal=this.portal;return r}):
[])}async fetchItems(H){H??={};var r=this.userContentUrl??"";H.folder&&(r+="/"+H.folder.id);const {default:p}=await new Promise((a,u)=>c(["./PortalItem"],n=>a(Object.freeze(Object.defineProperty({__proto__:null,default:n},Symbol.toStringTag,{value:"Module"}))),u));H=await this.portal.request(r,{query:{folders:!1,inRecycleBin:H.inRecycleBin?!0:null,foldersContent:!H.folder&&H.includeSubfolderItems?!0:null,num:H.num||10,start:H.start||1,sortField:H.sortField||"created",sortOrder:H.sortOrder||"asc"}});
return H?.items?(r=H.items.map(a=>{a=p.fromJSON(a);a.portal=this.portal;return a}),await Promise.all(r.map(a=>a.load())),{items:r,nextStart:H.nextStart,total:H.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(H=>H.tags)}getThumbnailUrl(H){let r=this.thumbnailUrl;r&&H&&(r+=`&w=${H}`);return r}queryFavorites(H){return this.favGroupId?(this._favGroup||(this._favGroup=new t({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(H)):Promise.reject(new A("internal:unknown",
"Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(H,r){await this.portal.request(this.userContentUrl+`/items/${H.id}/restore`,{method:"post",query:r?{folderID:"string"===typeof r?r:r.id}:null})}toJSON(){throw new A("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(H){if(!H)return null;if(H.declaredClass)throw Error("JSON object is already hydrated");const r=new z({sourceJSON:H});r.read(H);return r}};g.__decorate([F.property()],
x.prototype,"access",void 0);g.__decorate([F.property({type:Date})],x.prototype,"created",void 0);g.__decorate([F.property()],x.prototype,"culture",void 0);g.__decorate([F.property()],x.prototype,"description",void 0);g.__decorate([F.property()],x.prototype,"email",void 0);g.__decorate([F.property()],x.prototype,"favGroupId",void 0);g.__decorate([F.property()],x.prototype,"fullName",void 0);g.__decorate([F.property({type:Date})],x.prototype,"modified",void 0);g.__decorate([F.property()],x.prototype,
"orgId",void 0);g.__decorate([F.property()],x.prototype,"portal",void 0);g.__decorate([F.property()],x.prototype,"preferredView",void 0);g.__decorate([F.property()],x.prototype,"privileges",void 0);g.__decorate([F.property()],x.prototype,"region",void 0);g.__decorate([F.property()],x.prototype,"role",void 0);g.__decorate([F.property()],x.prototype,"roleId",void 0);g.__decorate([F.property()],x.prototype,"sourceJSON",void 0);g.__decorate([F.property()],x.prototype,"thumbnail",void 0);g.__decorate([F.property({readOnly:!0})],
x.prototype,"thumbnailUrl",null);g.__decorate([F.property()],x.prototype,"units",void 0);g.__decorate([F.property({readOnly:!0})],x.prototype,"userContentUrl",null);g.__decorate([F.property({readOnly:!0})],x.prototype,"url",null);g.__decorate([F.property()],x.prototype,"username",void 0);g.__decorate([F.property()],x.prototype,"userLicenseTypeId",void 0);g.__decorate([F.property()],x.prototype,"userType",void 0);return x=z=g.__decorate([d.subclass("esri.portal.PortalUser")],x)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,A,x,F,C,e,q){A=class extends A.JSONSupport{constructor(d){super(d);this.username=this.title=this.portal=this.id=this.created=null}get url(){const d=this.portal?.restUrl;return d?`${d}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new g("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};c.__decorate([x.property({type:Date})],A.prototype,"created",void 0);c.__decorate([x.property()],A.prototype,"id",void 0);c.__decorate([x.property()],A.prototype,
"portal",void 0);c.__decorate([x.property()],A.prototype,"title",void 0);c.__decorate([x.property({readOnly:!0})],A.prototype,"url",null);c.__decorate([x.property()],A.prototype,"username",void 0);return A=c.__decorate([q.subclass("esri.portal.PortalFolder")],A)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(c,g,A,x,F,C,e,q,d,v,t,z,H,r,p,a,u){var n;const D=new Set("3DTiles Service;CSV;Feature Collection;Feature Service;Feed;GeoJson;Group Layer;Image Service;KML;Map Service;Media Layer;Scene Service;Stream Service;Vector Tile Service;WFS;WMS;WMTS".split(";")),L=new Set(["KML","GeoJson","CSV"]);F=n=class extends F.JSONSupportMixin(e){static from(f){return v.ensureClass(n,f)}constructor(f){super(f);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.categories=
this.avgRating=this.applicationProxies=this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const f=this.type,K=this.typeKeywords||[];let Q=
f;"Feature Service"===f||"Feature Collection"===f?Q=K.includes("Table")?"Table":K.includes("Route Layer")?"Route Layer":K.includes("Markup")?"Markup":"Feature Layer":"Image Service"===f?Q=K.includes("Elevation 3D Layer")?"Elevation Layer":K.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===f?Q="Scene Layer":"Video Service"===f?Q="Video Layer":"Scene Package"===f?Q="Scene Layer Package":"Stream Service"===f?Q="Feature Layer":"Geoprocessing Service"===f?Q=K.includes("Web Tool")?
"Tool":"Geoprocessing Service":"Geoenrichment Service"===f?Q="GeoEnrichment Service":"Geocoding Service"===f?Q="Locator":"Microsoft Powerpoint"===f?Q="Microsoft PowerPoint":"GeoJson"===f?Q="GeoJSON":"Globe Service"===f?Q="Globe Layer":"Vector Tile Service"===f?Q="Tile Layer":"netCDF"===f?Q="NetCDF":"Map Service"===f?Q=K.includes("Spatiotemporal")||!K.includes("Hosted Service")&&!K.includes("Tiled")||K.includes("Relational")?"Map Image Layer":"Tile Layer":f?.toLowerCase().includes("add in")?Q=f.replaceAll(/(add in)/gi,
"Add-In"):"datastore catalog service"===f?Q="Big Data File Share":"Compact Tile Package"===f?Q="Tile Package (tpkx)":"Raster function template"===f?Q="Raster Function Template":"OGCFeatureServer"===f?Q="OGC Feature Layer":"web mapping application"===f&&K.includes("configurableApp")?Q="Instant App":"Insights Page"===f?Q="Insights Report":"Excalibur Imagery Project"===f?Q="Excalibur Project":"3DTiles Service"===f?Q="3D tiles layer":"3DTiles Package"===f&&(Q="3D tiles package");return Q}readExtent(f){return f&&
f.length?new H(f[0][0],f[0][1],f[1][0],f[1][1]):null}get iconUrl(){var f=this.type?.toLowerCase()||"";const K=this.typeKeywords||[];var Q=!1,T=!1;let Z=!1,W=!1,U=!1,w=!1;Q=T=!1;0<f.indexOf("service")||"feature collection"===f||"kml"===f||"wms"===f||"wmts"===f||"wfs"===f?(Q=K.includes("Hosted Service"),"feature service"===f||"feature collection"===f||"kml"===f||"wfs"===f?(T=K.includes("Table"),Z=K.includes("Route Layer"),W=K.includes("Markup"),U=K.includes("Spatiotemporal"),w=K.includes("UtilityNetwork"),
f=U&&T?"spatiotemporaltable":T?"table":Z?"routelayer":W?"markup":U?"spatiotemporal":w?"utilitynetwork":Q?"featureshosted":"features"):"map service"===f||"wms"===f||"wmts"===f?(U=K.includes("Spatiotemporal"),T=K.includes("Relational"),f=U||T?"mapimages":Q||K.includes("Tiled")||"wmts"===f?"maptiles":"mapimages"):f="scene service"===f?K.includes("Line")?"sceneweblayerline":K.includes("3DObject")?"sceneweblayermultipatch":K.includes("Point")?"sceneweblayerpoint":K.includes("IntegratedMesh")?"sceneweblayermesh":
K.includes("PointCloud")?"sceneweblayerpointcloud":K.includes("Polygon")?"sceneweblayerpolygon":K.includes("Building")?"sceneweblayerbuilding":K.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===f?K.includes("Elevation 3D Layer")?"elevationlayer":K.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===f?"streamlayer":"vector tile service"===f?"vectortile":"datastore catalog service"===f?"datastorecollection":"geocoding service"===f?"geocodeservice":"video service"===
f?K.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===f?K.includes("Web Tool")?"tool":"layers":"geodata service"===f?"geodataservice":"3dtiles service"===f?K.includes("3DObject")?"3dobjecttileslayer":K.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):f="web map"===f||"cityengine web scene"===f?"maps":"web scene"===f?K.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===f&&K.includes("configurableApp")?
"instantapps":"web mapping application"===f||"mobile application"===f||"application"===f||"operation view"===f||"desktop application"===f?"apps":"map document"===f||"map package"===f||"published map"===f||"scene document"===f||"globe document"===f||"basemap package"===f||"mobile basemap package"===f||"mobile map package"===f||"project package"===f||"project template"===f||"pro map"===f||"layout"===f||"layer"===f&&K.includes("ArcGIS Pro")||"explorer map"===f&&K.indexOf("Explorer Document")?"mapsgray":
"service definition"===f||"shapefile"===f||"cad drawing"===f||"geojson"===f||"netcdf"===f||"administrative report"===f?"datafiles":"360 vr experience"===f?"360vr":"explorer add in"===f||"desktop add in"===f||"windows viewer add in"===f||"windows viewer configuration"===f?"appsgray":"arcgis pro add in"===f||"arcgis pro configuration"===f?"addindesktop":"pdf"===f?"pdf":"microsoft word"===f?"word":"microsoft excel"===f?"excel":"microsoft powerpoint"===f?"ppt":"rule package"===f||"file geodatabase"===
f||"sqlite geodatabase"===f||"csv collection"===f||"kml collection"===f||"windows mobile package"===f||"map template"===f||"desktop application template"===f||"gml"===f||"arcpad package"===f||"code sample"===f||"document link"===f||"earth configuration"===f||"operations dashboard add in"===f||"rules package"===f||"workflow manager package"===f||"explorer map"===f&&K.includes("Explorer Mapping Application")||K.includes("Document")?"datafilesgray":"network analysis service"===f||"geoprocessing service"===
f||"geodata service"===f||"geometry service"===f||"geoprocessing package"===f||"locator package"===f||"geoprocessing sample"===f||"workflow manager service"===f?"toolsgray":"layer"===f||"layer package"===f||"explorer layer"===f?"layersgray":"analysis model"===f?"analysismodel":"scene package"===f?"scenepackage":"3dtiles package"===f?"3dtileslayerpackage":"3dtiles service"===f?"3dtileslayer":"mobile scene package"===f?"mobilescenepackage":"tile package"===f||"compact tile package"===f?"tilepackage":
"task file"===f?"taskfile":"report template"===f?"report-template":"statistical data collection"===f?"statisticaldatacollection":"insights workbook"===f?"workbook":"insights model"===f?"insightsmodel":"insights page"===f?"insightspage":"insights theme"===f?"insightstheme":"hub initiative"===f?"hubinitiative":"hub page"===f?"hubpage":"hub site application"===f?"hubsite":"hub event"===f?"hubevent":"hub project"===f?"hubproject":"relational database connection"===f?"relationaldatabaseconnection":"big data file share"===
f?"datastorecollection":"image collection"===f?"imagecollection":"desktop style"===f?"desktopstyle":"style"===f?K.includes("Dictionary")?"dictionarystyle":"style":"dashboard"===f?"dashboard":"raster function template"===f?"rasterprocessingtemplate":"vector tile package"===f?"vectortilepackage":"ortho mapping project"===f?"orthomappingproject":"ortho mapping template"===f?"orthomappingtemplate":"solution"===f?"solutions":"geopackage"===f?"geopackage":"deep learning package"===f?"deeplearningpackage":
"real time analytic"===f?"realtimeanalytics":"big data analytic"===f?"bigdataanalytics":"feed"===f?"feed":"excalibur imagery project"===f?"excaliburimageryproject":"notebook"===f?"notebook":"storymap"===f?"storymap":"survey123 add in"===f?"survey123addin":"mission"===f?"mission":"mission report"===f?"missionreport":"mission template"===f?"missiontemplate":"quickcapture project"===f?"quickcaptureproject":"pro report"===f?"proreport":"pro report template"===f?"proreporttemplate":"urban model"===f?"urbanmodel":
"web experience"===f?"experiencebuilder":"web experience template"===f?"webexperiencetemplate":"experience builder widget"===f?"experiencebuilderwidget":"experience builder widget package"===f?"experiencebuilderwidgetpackage":"workflow"===f?"workflow":"kernel gateway connection"===f?"kernelgatewayconnection":"insights script"===f?"insightsscript":"hub initiative template"===f?"hubinitiativetemplate":"storymap theme"===f?"storymaptheme":"knowledge graph"===f?"knowledgegraph":"knowledge graph layer"===
f?"knowledgegraphlayer":"knowledge studio project"===f?"knowledgestudio":"native application"===f?"nativeapp":"native application installer"===f?"nativeappinstaller":"web link chart"===f?"linkchart":"knowledge graph web investigation"===f?"investigation":"ogcfeatureserver"===f?"features":"pro project"===f?"proproject":"insights workbook package"===f?"insightsworkbookpackage":"apache parquet"===f?"apacheparquet":"notebook code snippet library"===f?"notebookcodesnippets":"suitability model"===f?"suitabilitymodel":
"esri classifier definition"===f?"classifierdefinition":"esri classification schema"===f?"classificationschema":"insights data engineering workbook"===f?"dataengineeringworkbook":"insights data engineering model"===f?"dataengineeringmodel":"deep learning studio project"===f?"deeplearningproject":"discussion"===f?"discussion":"allsource project"===f?"allsourceproject":"api key"===f?"apikey":"data pipeline"===f?"datapipelines":"group layer"===f?(Q=K.includes("Map"))?"layergroup2d":"layergroup":"media layer"===
f?"onlinemedialayer":"form"===f?K.includes("Survey123")?"survey":"datafilesgray":"csv"===f?"csv":"image"===f?"image":"maps";return f?A.getAssetUrl("esri/images/portal/"+f+"16.png"):null}get isLayer(){return null!=this.type&&D.has(this.type)}get itemCdnUrl(){return u.toCDNUrl(this.itemUrl)}get itemPageUrl(){const f=this.portal?.itemPageUrl;return f&&this.id?`${f}?id=${this.id}`:null}get itemUrl(){const f=this.portal?.restUrl;return f&&this.id?`${f}/content/items/${this.id}`:null}get thumbnailUrl(){const f=
this.itemUrl,K=this.thumbnail;return f&&K?this.portal?.normalizeUrl(`${f}/info/${K}?f=json`)??null:null}get userItemUrl(){const f=this.portal?.restUrl;if(!f)return null;const K=this.owner||this.portal?.user?.username;return K?`${f}/content/users/${this.ownerFolder?`${K}/${this.ownerFolder}`:K}/items/${this.id}`:null}load(f){const K=this.portal??(this.portal=r.getDefault()),Q=K.load(f).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?K.request(this.itemUrl,{signal:null!=f?f.signal:null,
query:{token:this.apiKey}}):{}).then(T=>{this.sourceJSON=T;this.read(T)});this.addResolvingPromise(Q);return Promise.resolve(this)}async addRating(f){const K={method:"post",query:{}};f instanceof a&&(f=f.rating);null==f||isNaN(f)||"number"!==typeof f||(K.query.rating=f);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",K);return new a({rating:f,created:new Date})}clone(){var f={access:this.access,accessInformation:this.accessInformation,applicationProxies:C.clone(this.applicationProxies),
avgRating:this.avgRating,categories:C.clone(this.categories),created:C.clone(this.created),culture:this.culture,description:this.description,extent:C.clone(this.extent),groupCategories:C.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:C.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:C.clone(this.screenshots),
size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C.clone(this.typeKeywords),url:this.url};this.loaded&&(f.loadStatus="loaded");f=(new n({sourceJSON:this.sourceJSON})).set(f);f._set("isOrgItem",this.isOrgItem);return f}createPostQuery(){const f=this.toJSON();for(var K of["tags","typeKeywords","categories"])f[K]=f[K]?.join(", ");({extent:K}=f);K&&(f.extent=
JSON.stringify(K));return f}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(f="json",K){return this.portal.request(this.itemUrl+"/data",{responseType:f,...K,query:{token:this.apiKey}})}async fetchRating(f){f=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...f});return null!=f.rating?(f.created=new Date(f.created),new a(f)):null}fetchRelatedItems(f,K){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",
{query:{...f,token:this.apiKey},...K},n)}getThumbnailUrl(f){let K=this.thumbnailUrl;K&&f&&(K+=`&w=${f}`);return K}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(f=>{this.sourceJSON=f;this.read(f);return this})}update(f){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const K=f?.data,Q={method:"post"};Q.query=this.createPostQuery();for(const T in Q.query)null===Q.query[T]&&(Q.query[T]="");Q.query.clearEmptyFields=!0;null!=K&&
("string"===typeof K?Q.query.text=K:"object"===typeof K&&(Q.query.text=JSON.stringify(K)));return this.portal.request(`${this.userItemUrl}/update`,Q).then(()=>this.reload())}):Promise.reject(new x("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(f){if(!this.id)throw new x("portal:item-does-not-exist","The item does not exist yet");await this.load();const {portal:K,itemUrl:Q}=this;await K.signIn();const {copyResources:T,folder:Z,tags:W,title:U}=f||{};f=
{method:"post",query:{copyPrivateResources:"all"===T,folder:"string"===typeof Z?Z:Z?.id,includeResources:!!T,tags:W?.join(","),title:U}};({itemId:f}=await K.request(`${Q}/copy`,f));return new n({id:f,portal:K})}updateThumbnail(f){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const K=f.thumbnail,Q=f.filename,T={method:"post"};if("string"===typeof K)q.isDataProtocol(K)?T.query={data:K}:T.query={url:q.makeAbsolute(K)},null!=Q&&(T.query.filename=Q);else{const Z=new FormData;null!=
Q?Z.append("file",K,Q):Z.append("file",K);T.body=Z}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,T).then(()=>this.reload())}):Promise.reject(new x("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(f={},K){const {fetchResources:Q}=await new Promise((T,Z)=>c(["./support/resourceUtils"],T,Z));return Q(this,f,K)}async addResource(f,K,Q){const {addOrUpdateResources:T}=await new Promise((Z,W)=>c(["./support/resourceUtils"],Z,W));f.portalItem=
this;await T(this,[{resource:f,content:K,compress:Q?.compress,access:Q?.access}],"add",Q);return f}async removeResource(f,K){const {removeResource:Q}=await new Promise((T,Z)=>c(["./support/resourceUtils"],T,Z));if(f.portalItem&&f.portalItem.itemUrl!==this.itemUrl)throw new x("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return Q(this,f,K)}async removeAllResources(f){const {removeAllResources:K}=await new Promise((Q,T)=>c(["./support/resourceUtils"],
Q,T));return K(this,f)}resourceFromPath(f){return new p({portalItem:this,path:f})}toJSON(){var f=this.extent;f={accessInformation:this.accessInformation,categories:C.clone(this.categories),created:this.created?.getTime(),description:this.description,extent:f&&[[f.xmin,f.ymin],[f.xmax,f.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,
tags:C.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C.clone(this.typeKeywords),url:this.url};return C.fixJson(f)}static fromJSON(f){if(!f)return null;if(f.declaredClass)throw Error("JSON object is already hydrated");return new n({sourceJSON:f})}_getPostQuery(){const f=this.toJSON();for(const K in f)"tags"===K&&null!==f[K]&&(f[K]=f[K].join(", ")),"typeKeywords"===K&&null!==f[K]&&(f[K]=f[K].join(", ")),"extent"===K&&f[K]&&(f[K]=JSON.stringify(f[K]));return f}};
g.__decorate([d.property({type:["private","shared","org","public"]})],F.prototype,"access",void 0);g.__decorate([d.property()],F.prototype,"accessInformation",void 0);g.__decorate([d.property({type:String})],F.prototype,"apiKey",void 0);g.__decorate([d.property({json:{read:{source:"appProxies"}}})],F.prototype,"applicationProxies",void 0);g.__decorate([d.property()],F.prototype,"avgRating",void 0);g.__decorate([d.property()],F.prototype,"categories",void 0);g.__decorate([d.property({type:Date})],
F.prototype,"created",void 0);g.__decorate([d.property()],F.prototype,"culture",void 0);g.__decorate([d.property()],F.prototype,"description",void 0);g.__decorate([d.property({readOnly:!0})],F.prototype,"displayName",null);g.__decorate([d.property({type:H})],F.prototype,"extent",void 0);g.__decorate([t.reader("extent")],F.prototype,"readExtent",null);g.__decorate([d.property()],F.prototype,"groupCategories",void 0);g.__decorate([d.property({readOnly:!0})],F.prototype,"iconUrl",null);g.__decorate([d.property()],
F.prototype,"id",void 0);g.__decorate([d.property({readOnly:!0})],F.prototype,"isLayer",null);g.__decorate([d.property({type:Boolean,readOnly:!0})],F.prototype,"isOrgItem",void 0);g.__decorate([d.property()],F.prototype,"itemControl",void 0);g.__decorate([d.property({readOnly:!0})],F.prototype,"itemPageUrl",null);g.__decorate([d.property({readOnly:!0})],F.prototype,"itemUrl",null);g.__decorate([d.property()],F.prototype,"licenseInfo",void 0);g.__decorate([d.property({type:Date})],F.prototype,"modified",
void 0);g.__decorate([d.property()],F.prototype,"name",void 0);g.__decorate([d.property()],F.prototype,"numComments",void 0);g.__decorate([d.property()],F.prototype,"numRatings",void 0);g.__decorate([d.property()],F.prototype,"numViews",void 0);g.__decorate([d.property()],F.prototype,"owner",void 0);g.__decorate([d.property()],F.prototype,"ownerFolder",void 0);g.__decorate([d.property({type:r})],F.prototype,"portal",void 0);g.__decorate([d.property()],F.prototype,"screenshots",void 0);g.__decorate([d.property()],
F.prototype,"size",void 0);g.__decorate([d.property()],F.prototype,"snippet",void 0);g.__decorate([d.property()],F.prototype,"sourceJSON",void 0);g.__decorate([d.property({type:String})],F.prototype,"sourceUrl",void 0);g.__decorate([d.property({type:String})],F.prototype,"spatialReference",void 0);g.__decorate([d.property()],F.prototype,"tags",void 0);g.__decorate([d.property()],F.prototype,"thumbnail",void 0);g.__decorate([d.property({readOnly:!0})],F.prototype,"thumbnailUrl",null);g.__decorate([d.property()],
F.prototype,"title",void 0);g.__decorate([d.property()],F.prototype,"type",void 0);g.__decorate([d.property()],F.prototype,"typeKeywords",void 0);g.__decorate([d.property({type:String,json:{read(f,K){L.has(K.type)&&(K=this.portal?.restUrl,f||=K&&this.id?`${K}/content/items/${this.id}/data`:null);return f}}})],F.prototype,"url",void 0);g.__decorate([d.property({readOnly:!0})],F.prototype,"userItemUrl",null);return F=n=g.__decorate([z.subclass("esri.portal.PortalItem")],F)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,A,x,F,C,e,q,d,v,t){function z(H,r){if(null==H)return H;H=H.replace(/^\/+/,"");null!=r&&C.isAbsolute(H)&&(H=C.makeRelative(H,r.itemUrl));return H?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}A=class extends A{constructor(H){super(H);this.portalItem=null}normalizeCtorArgs(H){return H?.portalItem&&H.path?{...H,path:z(H.path,H.portalItem)}:H}set path(H){null!=H&&C.isAbsolute(H)?F.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):
this._set("path",H)}_castPath(H){return z(H,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(H="json",r){const p=this.cdnUrl;if(null==p)throw new x("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");
return this.portalItem.portal.request(p,{responseType:H,query:{token:this.portalItem.apiKey},signal:r?.signal})}async update(H,r){const {addOrUpdateResources:p}=await new Promise((a,u)=>c(["./support/resourceUtils"],a,u));await p(this.portalItem,[{resource:this,content:H,compress:r?.compress,access:r?.access}],"update",r);return this}hasPath(){return null!=this.path}};g.__decorate([e.property()],A.prototype,"portalItem",void 0);g.__decorate([e.property({type:String,value:null})],A.prototype,"path",
null);g.__decorate([q.cast("path")],A.prototype,"_castPath",null);g.__decorate([e.property({type:String,readOnly:!0})],A.prototype,"url",null);g.__decorate([e.property({type:String,readOnly:!0})],A.prototype,"cdnUrl",null);g.__decorate([e.property({type:String,readOnly:!0})],A.prototype,"itemRelativeUrl",null);return A=g.__decorate([t.subclass("esri.portal.PortalItemResource")],A)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,A,x,F,C,e){g=class extends g{constructor(q){super(q);this.rating=this.created=null}};c.__decorate([A.property()],g.prototype,"created",void 0);c.__decorate([A.property()],g.prototype,"rating",void 0);return g=c.__decorate([e.subclass("esri.portal.PortalRating")],g)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils","../portal/support/urlUtils"],function(c,g,A,x){function F(n,D){var L=D?.url?.path;n&&L&&(n=A.makeAbsolute(n,L,{preserveProtocolRelative:!0}),
D.portalItem&&D.readResourcePaths&&(L=A.makeRelative(n,D.portalItem.itemUrl),null!=L&&a.test(L)&&D.readResourcePaths.push(D.portalItem.resourceFromPath(L).path)));return(n=z(n,D?.portal))&&p.test(n)?H(n):n}function C(n,D,L=c.MarkKeep.YES){n=n&&p.test(n)?r(n):n;if(null==n)return n;!A.isAbsolute(n)&&D?.blockedRelativeUrls&&D.blockedRelativeUrls.push(n);let f=A.makeAbsolute(n);if(D){var K=D.verifyItemRelativeUrls?.rootPath||D.url?.path;if(K){K=z(K,D.portal);const Q=z(f,D.portal);f=A.makeRelative(Q,K,
K);null!=f&&f!==Q&&f!==n&&D.verifyItemRelativeUrls&&D.verifyItemRelativeUrls.writtenUrls.push(f)}}f=t(f,D?.portal);A.isAbsolute(f)&&(f=A.normalize(f));D?.resources&&D?.portalItem&&!A.isAbsolute(f)&&!A.isDataProtocol(f)&&L===c.MarkKeep.YES&&D.resources.toKeep.push({resource:D.portalItem.resourceFromPath(f),compress:!1});return f}function e(n,D,L){return F(n,L)}function q(n,D,L,f){n=C(n,f);void 0!==n&&(D[L]=n)}function d(n){return(n?.match(p)??null)?.[1]??null}function v(n){n=n?.match(p)??null;if(null==
n)return null;n=n[2];const D=n.lastIndexOf("/");if(-1===D){const {path:K,extension:Q}=A.splitPathExtension(n);return{prefix:null,filename:K,extension:Q}}const {path:L,extension:f}=A.splitPathExtension(n.slice(D+1));return{prefix:n.slice(0,D),filename:L,extension:f}}function t(n,D){return D&&!D.isPortal&&D.urlKey&&D.customBaseUrl?A.changeDomain(n,`${D.urlKey}.${D.customBaseUrl}`,D.portalHostname):n}function z(n,D){if(!D||D.isPortal||!D.urlKey||!D.customBaseUrl)return n;const L=`${D.urlKey}.${D.customBaseUrl}`,
f=A.getAppUrl();return A.hasSameOrigin(f,`${f.scheme}://${L}`)?A.changeDomain(n,D.portalHostname,L):A.changeDomain(n,L,D.portalHostname)}function H(n){if(!n)return n||null;n&&g.id&&!g.id.findCredential(n)&&(n=x.normalizeArcGISOnlineOrgDomain(n),n=n.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),n=n.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),n=n.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return n}function r(n){if(!n)return n||
null;n=n.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");n=n.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(n=n.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"))&&g.id&&!g.id.findCredential(n)&&(n=x.normalizeArcGISOnlineOrgDomain(n));return n}const p=/\/items\/([^/]+)\/resources\/(.*)/,a=/^\.\/resources\//;c.MarkKeep=void 0;(function(n){n[n.YES=0]="YES";n[n.NO=1]="NO"})(c.MarkKeep||(c.MarkKeep={}));const u=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return c.MarkKeep},ensureMainOnlineDomain:t,fromCDNUrl:r,fromJSON:F,itemIdFromResourceUrl:d,prefixAndFilenameFromResourceUrl:v,read:e,toCDNUrl:H,toJSON:C,write:q},Symbol.toStringTag,{value:"Module"}));c.ensureMainOnlineDomain=t;c.fromCDNUrl=r;c.fromJSON=F;c.itemIdFromResourceUrl=d;c.persistableUrlUtils=u;c.prefixAndFilenameFromResourceUrl=v;c.read=e;c.toCDNUrl=H;c.toJSON=C;c.write=q})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(c,
g,A){c.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",
classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",
isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-vector.jpg")},
baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],
id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},
"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",
styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",
layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},
{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",
title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};c.getBasemapTitle=async function(x){if(x){var F=x.includes("-vector")?x.slice(0,x.indexOf("-vector")):
x.includes("-3d")?x.slice(0,x.indexOf("-3d")):x,C=await A.fetchMessageBundle("esri/t9n/basemaps");return C[x]||C[F]}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(c,g,A,x,F,C,e,q){const d=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
g=class extends g{constructor(v){super(v);this.places=this.language=this.id=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var v=q.getLocale().toLowerCase();switch(v){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}v=q.getLanguage(v);return"pt"===v?"pt-BR":v&&d.has(v)?v:"global"}};
c.__decorate([A.property()],g.prototype,"id",void 0);c.__decorate([A.property()],g.prototype,"language",void 0);c.__decorate([A.property()],g.prototype,"places",void 0);c.__decorate([A.property()],g.prototype,"serviceUrl",void 0);c.__decorate([A.property()],g.prototype,"worldview",void 0);return g=c.__decorate([e.subclass("esri.support.BasemapStyle")],g)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(c,g,A,x,F,C){function e(v,t){"maxScale"in v&&(t.maxScale=F.numberToJSON(v.maxScale)??void 0);"minScale"in v&&(t.minScale=F.numberToJSON(v.minScale)??void 0)}const q=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),d=new Set("catalog csv feature geo-rss geojson group imagery imagery-tile kml knowledge-graph map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
c.disableRestrictedWriting=function(v){q.add(v);d.add(v)};c.enableRestrictedWriting=function(v){q.delete(v);d.delete(v)};c.getLayerJSON=function(v,t,z){if(!v.persistenceEnabled)return null;if(!("write"in v&&v.write))return z?.messages&&z.messages.push(new g("layer:unsupported",`Layers (${v.title}, ${v.id}) of type '${v.declaredClass}' cannot be persisted`,{layer:v})),null;if(C.isFeatureCollectionLayer(v)&&!v.isTable)t=v.resourceInfo;else{if(z.restrictedWebMapWriting){var H="basemap"===z.layerContainerType?
q:"operational-layers"===z.layerContainerType?d:null;H=null!=H?H.has(v.type)&&!C.isFeatureCollectionLayer(v):!0}else H=!0;if(H)return t={},v.write(t,z)?t:null}if(null!=t){t=A.clone(t);if(z=t)C.isFeatureCollectionLayer(v)?(H=x.getDeepValue("featureCollection.layers",z)?.[0]?.layerDefinition)&&e(v,H):"group"!==v.type&&e(v,z);if(z&&(z.id=v.id,"blendMode"in v&&(z.blendMode=v.blendMode,"normal"===z.blendMode&&delete z.blendMode),z.opacity=F.numberToJSON(v.opacity)??void 0,z.title=v.title||"Layer",z.visibility=
v.visible,"legendEnabled"in v&&"wmts"!==v.type))if(C.isFeatureCollectionLayer(v)){if(z=z.featureCollection)z.showLegend=v.legendEnabled}else z.showLegend=v.legendEnabled}return t};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(c,g,A){function x(C){return"scene"===C?.type}function F(C){C=C?.type;return"imagery-tile"===C||"tile"===C||"open-street-map"===C||"vector-tile"===C||"web-tile"===
C||"wmts"===C}c.getEffectiveEditingEnabled=function(C){a:if("editingEnabled"in C)switch(C.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var e=!0;break a;default:e=!1}else e=!1;return e?"effectiveEditingEnabled"in C?C.effectiveEditingEnabled:C.editingEnabled:!1};c.getEffectiveLayerCapabilities=function(C){a:if("capabilities"in C)switch(C.type){case "catalog":case "catalog-footprint":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "sublayer":case "subtype-group":case "subtype-sublayer":case "wfs":var e=
!0;break a;default:e=!1}else e=!1;return e?"effectiveCapabilities"in C?C.effectiveCapabilities:C.capabilities:null};c.getOwningPortalUrl=async function(C,e){var q=g.id?.findServerInfo(C);if(null!=q?.currentVersion)return q.owningSystemUrl||null;q=C.toLowerCase().indexOf("/rest/services");if(-1===q)return null;C=`${C.substring(0,q)}/rest/info`;({data:e}=await A(C,{query:{f:"json"},responseType:"json",signal:null!=e?e.signal:null}));return e?.owningSystemUrl||null};c.getTileMaxtrixSetFromActiveLayer=
function(C){if(C.activeLayer){const e=C.activeLayer.tileMatrixSet;if(e)return e;if(C=C.activeLayer.tileMatrixSets)return C}return null};c.isBaseLayer=function(C){return null!=C?.parent&&"declaredClass"in C.parent&&"esri.Basemap"===C.parent.declaredClass&&C.parent.baseLayers.includes(C)};c.isBasemap3DSupportedLayer=function(C){return F(C)||x(C)};c.isBasemapSupportedTiledLayer=F;c.isFeatureCollectionLayer=function(C){return"feature"===C?.type&&!C.url&&"memory"===C.source?.type};c.isFeatureLayer=function(C){return null!=
C&&"object"===typeof C&&"type"in C&&"feature"===C.type};c.isFeatureServiceLayer=function(C){return"feature"===C?.type&&"feature-layer"===C.source?.type};c.isGraphicsLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"graphics"===C.type};c.isGroupLayer=function(C){return null!=C&&"type"in C&&"group"===C.type};c.isImageryTileLayer=function(C){return"imagery-tile"===C?.type};c.isIntegratedMeshLayer=function(C){return"integrated-mesh"===C||"integrated-mesh-3dtiles"===C};c.isIntegratedMeshOperationalLayer=
function(C){return"IntegratedMeshLayer"===C||"IntegratedMesh3DTilesLayer"===C};c.isKnowledgeGraphLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"knowledge-graph"===C.type&&"layers"in C};c.isLayerWithFeatureLayerSource=function(C){return("feature"===C?.type||"subtype-group"===C?.type)&&"feature-layer"===C.source?.type};c.isLinkChartLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"link-chart"===C.type&&"layers"in C};c.isMapNotesLayer=function(C){return null!=C&&
"object"===typeof C&&"type"in C&&"map-notes"===C.type&&"sublayers"in C};c.isSceneLayer=x;c.isSceneServiceLayer=function(C){C=C?.type;return"building-scene"===C||"integrated-mesh"===C||"point-cloud"===C||"scene"===C};c.isSubtypeGroupLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"subtype-group"===C.type&&"sublayers"in C};c.isSubtypeSublayer=function(C){return"subtype-sublayer"===C?.type};c.isTable=function(C){return null!=C&&"object"===typeof C&&"isTable"in C&&!!C.isTable};c.isTiledLayer=
function(C){C=C?.type;return"base-tile"===C||"tile"===C||"elevation"===C||"imagery-tile"===C||"base-elevation"===C||"open-street-map"===C||"wcs"===C||"web-tile"===C||"wmts"===C||"vector-tile"===C};c.isVoxelLayer=function(C){return"voxel"===C?.type};c.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};c.serializeLayerDefinitions=function(C){const e=/[:;]/,q=[];let d=!1;if(C&&(C.forEach((v,
t)=>{q.push([t,v]);!d&&e.test(v)&&(d=!0)}),0<q.length)){if(d){const v={};q.forEach(t=>{v[t[0]]=t[1]});C=JSON.stringify(v)}else{const v=[];q.forEach(t=>{v.push(t[0]+":"+t[1])});C=v.join(";")}return C}return null};c.serializeTimeOptions=function(C){if(C){var e=[];C.forEach((q,d)=>{e.push('"'+d+'":'+JSON.stringify(q))});if(e.length)return"{"+e.join(",")+"}"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(c,
g){c.canInterpolateEffects=function(A,x){const F=A.length>x.length?A:x;return(A.length>x.length?x:A).every((C,e)=>C.type===F[e].type)};c.effectEquals=function(A,x){A=JSON.stringify(A??null);x=JSON.stringify(x??null);return A===x};c.isEffectFunctions=function(A){return(A=A[0])?"type"in A:!1};c.normalizeEffects=function(A,x){const F=A.length>x.length?A:x;A=A.length>x.length?x:A;for(x=A.length;x<F.length;x++)A.push(g.createEffectWithInitialValues(F[x]))};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/effects/effects":function(){define(["exports","../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(c,g,A,x,F){function C(r,p,a){return r+(p-r)*a}function e(r){return Math.round(1E3*A.px2pt(r))/1E3}class q{constructor(r,p,a){this.strength=r;this.radius=p;this.threshold=a;this.type="bloom"}interpolate(r,p,a){this.strength=C(r.strength,p.strength,a);this.radius=C(r.radius,p.radius,a);this.threshold=C(r.threshold,p.threshold,
a)}clone(){return new q(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:e(this.radius),strength:this.strength,threshold:this.threshold}}}class d{constructor(r){this.radius=r;this.type="blur"}interpolate(r,p,a){this.radius=Math.round(C(r.radius,p.radius,a))}clone(){return new d(this.radius)}toJSON(){return{type:"blur",radius:e(this.radius)}}}class v{constructor(r,p){this.type=r;this.amount=p;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=
Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(r,p,a){this.amount=C(r.amount,p.amount,a);this._updateMatrix()}clone(){return new v(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const r=this._colorMatrix||x.create();switch(this.type){case "brightness":this._colorMatrix=F.brightness(r,this.amount);break;case "contrast":this._colorMatrix=F.contrast(r,this.amount);break;case "grayscale":this._colorMatrix=
F.grayscale(r,this.amount);break;case "invert":this._colorMatrix=F.invert(r,this.amount);break;case "saturate":this._colorMatrix=F.saturate(r,this.amount);break;case "sepia":this._colorMatrix=F.sepia(r,this.amount)}}}class t{constructor(r,p,a,u){this.offsetX=r;this.offsetY=p;this.blurRadius=a;this.color=u;this.type="drop-shadow"}interpolate(r,p,a){this.offsetX=C(r.offsetX,p.offsetX,a);this.offsetY=C(r.offsetY,p.offsetY,a);this.blurRadius=C(r.blurRadius,p.blurRadius,a);this.color[0]=Math.round(C(r.color[0],
p.color[0],a));this.color[1]=Math.round(C(r.color[1],p.color[1],a));this.color[2]=Math.round(C(r.color[2],p.color[2],a));this.color[3]=C(r.color[3],p.color[3],a)}clone(){return new t(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const r=[...this.color];r[3]*=255;return{type:"drop-shadow",xoffset:e(this.offsetX),yoffset:e(this.offsetY),blurRadius:e(this.blurRadius),color:r}}}class z{constructor(r){this.angle=r;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();
return this._colorMatrix}interpolate(r,p,a){this.angle=C(r.angle,p.angle,a);this._updateMatrix()}clone(){return new z(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const r=this._colorMatrix||x.create();this._colorMatrix=F.rotateHue(r,this.angle)}}class H{constructor(r){this.amount=r;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(r,p,a){this.amount=C(r.amount,p.amount,a)}clone(){return new H(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}
c.BloomEffect=q;c.BlurEffect=d;c.ColorMatrixEffect=v;c.DropShadowEffect=t;c.HueRotateEffect=z;c.OpacityEffect=H;c.createEffectWithInitialValues=function(r){switch(r.type){case "grayscale":case "sepia":case "invert":return new v(r.type,0);case "saturate":case "brightness":case "contrast":return new v(r.type,1);case "opacity":return new H(1);case "hue-rotate":return new z(0);case "blur":return new d(0);case "drop-shadow":return new t(0,0,0,[...g.getNamedColor("transparent")]);case "bloom":return new q(0,
0,1)}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(c){function g(){const q=new Float32Array(16);q[0]=1;q[5]=1;q[10]=1;q[15]=1;return q}function A(q){const d=new Float32Array(16);d[0]=q[0];d[1]=q[1];d[2]=q[2];d[3]=q[3];d[4]=q[4];d[5]=q[5];d[6]=q[6];d[7]=q[7];d[8]=q[8];d[9]=q[9];d[10]=q[10];d[11]=q[11];d[12]=q[12];d[13]=q[13];d[14]=q[14];d[15]=q[15];return d}function x(q,d,v,t,z,H,r,p,a,u,n,D,L,
f,K,Q){const T=new Float32Array(16);T[0]=q;T[1]=d;T[2]=v;T[3]=t;T[4]=z;T[5]=H;T[6]=r;T[7]=p;T[8]=a;T[9]=u;T[10]=n;T[11]=D;T[12]=L;T[13]=f;T[14]=K;T[15]=Q;return T}function F(q,d){return new Float32Array(q,d,16)}const C=g(),e=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:C,clone:A,create:g,createView:F,fromValues:x},Symbol.toStringTag,{value:"Module"}));c.IDENTITY=C;c.clone=A;c.create=g;c.createView=F;c.fromValues=x;c.mat4f32=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/effects/colorMatrixFunctions":function(){define(["exports","../../core/libs/gl-matrix-2/math/mat4"],function(c,g){c.brightness=(A,x)=>{A=g.set(A,x,0,0,0,0,x,0,0,0,0,x,0,0,0,0,1);return g.transpose(A,A)};c.contrast=(A,x)=>{A=g.set(A,x,0,0,.5-.5*x,0,x,0,.5-.5*x,0,0,x,.5-.5*x,0,0,0,1);return g.transpose(A,A)};c.grayscale=(A,x)=>{x=1-x;A=g.set(A,.2126+.7874*x,.7152-.7152*x,.0722-.0722*x,0,.2126-.2126*x,.7152+.2848*x,.0722-.0722*x,0,.2126-.2126*x,.7152-.7152*x,.0722+.9278*x,0,0,0,0,1);return g.transpose(A,
A)};c.invert=(A,x)=>{const F=1-2*x;A=g.set(A,F,0,0,x,0,F,0,x,0,0,F,x,0,0,0,1);return g.transpose(A,A)};c.rotateHue=(A,x)=>{const F=Math.sin(x*Math.PI/180);x=Math.cos(x*Math.PI/180);A=g.set(A,.213+.787*x-.213*F,.715-.715*x-.715*F,.072-.072*x+.928*F,0,.213-.213*x+.143*F,.715+.285*x+.14*F,.072-.072*x-.283*F,0,.213-.213*x-.787*F,.715-.715*x+.715*F,.072+.928*x+.072*F,0,0,0,0,1);return g.transpose(A,A)};c.saturate=(A,x)=>{A=g.set(A,.213+.787*x,.715-.715*x,.072-.072*x,0,.213-.213*x,.715+.285*x,.072-.072*
x,0,.213-.213*x,.715-.715*x,.072+.928*x,0,0,0,0,1);return g.transpose(A,A)};c.sepia=(A,x)=>{x=1-x;A=g.set(A,.393+.607*x,.769-.769*x,.189-.189*x,0,.349-.349*x,.686+.314*x,.168-.168*x,0,.272-.272*x,.534-.534*x,.131+.869*x,0,0,0,0,1);return g.transpose(A,A)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(c,g,A){function x(l,E){l[0]=E[0];l[1]=E[1];l[2]=E[2];l[3]=E[3];l[4]=E[4];
l[5]=E[5];l[6]=E[6];l[7]=E[7];l[8]=E[8];l[9]=E[9];l[10]=E[10];l[11]=E[11];l[12]=E[12];l[13]=E[13];l[14]=E[14];l[15]=E[15];return l}function F(l,E,X,ba,ja,B,J,N,V,aa,ca,fa,la,na,wa,ra,ua){l[0]=E;l[1]=X;l[2]=ba;l[3]=ja;l[4]=B;l[5]=J;l[6]=N;l[7]=V;l[8]=aa;l[9]=ca;l[10]=fa;l[11]=la;l[12]=na;l[13]=wa;l[14]=ra;l[15]=ua;return l}function C(l){l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=1;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=1;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function e(l,E){if(l===E){const X=E[1],
ba=E[2],ja=E[3],B=E[6],J=E[7],N=E[11];l[1]=E[4];l[2]=E[8];l[3]=E[12];l[4]=X;l[6]=E[9];l[7]=E[13];l[8]=ba;l[9]=B;l[11]=E[14];l[12]=ja;l[13]=J;l[14]=N}else l[0]=E[0],l[1]=E[4],l[2]=E[8],l[3]=E[12],l[4]=E[1],l[5]=E[5],l[6]=E[9],l[7]=E[13],l[8]=E[2],l[9]=E[6],l[10]=E[10],l[11]=E[14],l[12]=E[3],l[13]=E[7],l[14]=E[11],l[15]=E[15];return l}function q(l,E){d(l,E)||C(l);return l}function d(l,E){const X=E[0],ba=E[1],ja=E[2],B=E[3],J=E[4],N=E[5],V=E[6],aa=E[7],ca=E[8],fa=E[9],la=E[10],na=E[11],wa=E[12],ra=E[13],
ua=E[14];E=E[15];const Ca=X*N-ba*J,xa=X*V-ja*J,Ba=X*aa-B*J,Aa=ba*V-ja*N,ya=ba*aa-B*N,Ia=ja*aa-B*V,Qa=ca*ra-fa*wa,Ya=ca*ua-la*wa,Wa=ca*E-na*wa,Ja=fa*ua-la*ra,Ka=fa*E-na*ra,ka=la*E-na*ua;let Ra=Ca*ka-xa*Ka+Ba*Ja+Aa*Wa-ya*Ya+Ia*Qa;if(!Ra)return null;Ra=1/Ra;l[0]=(N*ka-V*Ka+aa*Ja)*Ra;l[1]=(ja*Ka-ba*ka-B*Ja)*Ra;l[2]=(ra*Ia-ua*ya+E*Aa)*Ra;l[3]=(la*ya-fa*Ia-na*Aa)*Ra;l[4]=(V*Wa-J*ka-aa*Ya)*Ra;l[5]=(X*ka-ja*Wa+B*Ya)*Ra;l[6]=(ua*Ba-wa*Ia-E*xa)*Ra;l[7]=(ca*Ia-la*Ba+na*xa)*Ra;l[8]=(J*Ka-N*Wa+aa*Qa)*Ra;l[9]=
(ba*Wa-X*Ka-B*Qa)*Ra;l[10]=(wa*ya-ra*Ba+E*Ca)*Ra;l[11]=(fa*Ba-ca*ya-na*Ca)*Ra;l[12]=(N*Ya-J*Ja-V*Qa)*Ra;l[13]=(X*Ja-ba*Ya+ja*Qa)*Ra;l[14]=(ra*xa-wa*Aa-ua*Ca)*Ra;l[15]=(ca*Aa-fa*xa+la*Ca)*Ra;return l}function v(l,E){const X=E[0],ba=E[1],ja=E[2],B=E[3],J=E[4],N=E[5],V=E[6],aa=E[7],ca=E[8],fa=E[9],la=E[10],na=E[11],wa=E[12],ra=E[13],ua=E[14];E=E[15];l[0]=N*(la*E-na*ua)-fa*(V*E-aa*ua)+ra*(V*na-aa*la);l[1]=-(ba*(la*E-na*ua)-fa*(ja*E-B*ua)+ra*(ja*na-B*la));l[2]=ba*(V*E-aa*ua)-N*(ja*E-B*ua)+ra*(ja*aa-B*
V);l[3]=-(ba*(V*na-aa*la)-N*(ja*na-B*la)+fa*(ja*aa-B*V));l[4]=-(J*(la*E-na*ua)-ca*(V*E-aa*ua)+wa*(V*na-aa*la));l[5]=X*(la*E-na*ua)-ca*(ja*E-B*ua)+wa*(ja*na-B*la);l[6]=-(X*(V*E-aa*ua)-J*(ja*E-B*ua)+wa*(ja*aa-B*V));l[7]=X*(V*na-aa*la)-J*(ja*na-B*la)+ca*(ja*aa-B*V);l[8]=J*(fa*E-na*ra)-ca*(N*E-aa*ra)+wa*(N*na-aa*fa);l[9]=-(X*(fa*E-na*ra)-ca*(ba*E-B*ra)+wa*(ba*na-B*fa));l[10]=X*(N*E-aa*ra)-J*(ba*E-B*ra)+wa*(ba*aa-B*N);l[11]=-(X*(N*na-aa*fa)-J*(ba*na-B*fa)+ca*(ba*aa-B*N));l[12]=-(J*(fa*ua-la*ra)-ca*(N*
ua-V*ra)+wa*(N*la-V*fa));l[13]=X*(fa*ua-la*ra)-ca*(ba*ua-ja*ra)+wa*(ba*la-ja*fa);l[14]=-(X*(N*ua-V*ra)-J*(ba*ua-ja*ra)+wa*(ba*V-ja*N));l[15]=X*(N*la-V*fa)-J*(ba*la-ja*fa)+ca*(ba*V-ja*N);return l}function t(l){const E=l[0],X=l[1],ba=l[2],ja=l[3],B=l[4],J=l[5],N=l[6],V=l[7],aa=l[8],ca=l[9],fa=l[10],la=l[11],na=l[12],wa=l[13],ra=l[14];l=l[15];return(E*J-X*B)*(fa*l-la*ra)-(E*N-ba*B)*(ca*l-la*wa)+(E*V-ja*B)*(ca*ra-fa*wa)+(X*N-ba*J)*(aa*l-la*na)-(X*V-ja*J)*(aa*ra-fa*na)+(ba*V-ja*N)*(aa*wa-ca*na)}function z(l,
E,X){const ba=E[0],ja=E[1],B=E[2],J=E[3],N=E[4],V=E[5],aa=E[6],ca=E[7],fa=E[8],la=E[9],na=E[10],wa=E[11],ra=E[12],ua=E[13],Ca=E[14];E=E[15];let xa=X[0],Ba=X[1],Aa=X[2],ya=X[3];l[0]=xa*ba+Ba*N+Aa*fa+ya*ra;l[1]=xa*ja+Ba*V+Aa*la+ya*ua;l[2]=xa*B+Ba*aa+Aa*na+ya*Ca;l[3]=xa*J+Ba*ca+Aa*wa+ya*E;xa=X[4];Ba=X[5];Aa=X[6];ya=X[7];l[4]=xa*ba+Ba*N+Aa*fa+ya*ra;l[5]=xa*ja+Ba*V+Aa*la+ya*ua;l[6]=xa*B+Ba*aa+Aa*na+ya*Ca;l[7]=xa*J+Ba*ca+Aa*wa+ya*E;xa=X[8];Ba=X[9];Aa=X[10];ya=X[11];l[8]=xa*ba+Ba*N+Aa*fa+ya*ra;l[9]=xa*ja+
Ba*V+Aa*la+ya*ua;l[10]=xa*B+Ba*aa+Aa*na+ya*Ca;l[11]=xa*J+Ba*ca+Aa*wa+ya*E;xa=X[12];Ba=X[13];Aa=X[14];ya=X[15];l[12]=xa*ba+Ba*N+Aa*fa+ya*ra;l[13]=xa*ja+Ba*V+Aa*la+ya*ua;l[14]=xa*B+Ba*aa+Aa*na+ya*Ca;l[15]=xa*J+Ba*ca+Aa*wa+ya*E;return l}function H(l,E,X){const ba=X[0],ja=X[1];X=X[2];if(E===l)l[12]=E[0]*ba+E[4]*ja+E[8]*X+E[12],l[13]=E[1]*ba+E[5]*ja+E[9]*X+E[13],l[14]=E[2]*ba+E[6]*ja+E[10]*X+E[14],l[15]=E[3]*ba+E[7]*ja+E[11]*X+E[15];else{const B=E[0],J=E[1],N=E[2],V=E[3],aa=E[4],ca=E[5],fa=E[6],la=E[7],
na=E[8],wa=E[9],ra=E[10],ua=E[11];l[0]=B;l[1]=J;l[2]=N;l[3]=V;l[4]=aa;l[5]=ca;l[6]=fa;l[7]=la;l[8]=na;l[9]=wa;l[10]=ra;l[11]=ua;l[12]=B*ba+aa*ja+na*X+E[12];l[13]=J*ba+ca*ja+wa*X+E[13];l[14]=N*ba+fa*ja+ra*X+E[14];l[15]=V*ba+la*ja+ua*X+E[15]}return l}function r(l,E,X){const ba=X[0],ja=X[1];X=X[2];l[0]=E[0]*ba;l[1]=E[1]*ba;l[2]=E[2]*ba;l[3]=E[3]*ba;l[4]=E[4]*ja;l[5]=E[5]*ja;l[6]=E[6]*ja;l[7]=E[7]*ja;l[8]=E[8]*X;l[9]=E[9]*X;l[10]=E[10]*X;l[11]=E[11]*X;l[12]=E[12];l[13]=E[13];l[14]=E[14];l[15]=E[15];return l}
function p(l,E,X,ba){let ja=ba[0],B=ba[1];ba=ba[2];let J=Math.sqrt(ja*ja+B*B+ba*ba);var N=void 0,V=void 0;let aa=void 0,ca=void 0,fa=void 0,la=void 0,na=void 0,wa=void 0,ra=void 0,ua=void 0,Ca=void 0,xa=void 0,Ba=void 0,Aa=void 0,ya=void 0,Ia=void 0,Qa=void 0,Ya=void 0,Wa=void 0,Ja=void 0,Ka=void 0,ka=void 0;V=N=void 0;if(J<A.getEpsilon())return null;J=1/J;ja*=J;B*=J;ba*=J;N=Math.sin(X);V=Math.cos(X);aa=1-V;ca=E[0];fa=E[1];la=E[2];na=E[3];wa=E[4];ra=E[5];ua=E[6];Ca=E[7];xa=E[8];Ba=E[9];Aa=E[10];ya=
E[11];Ia=ja*ja*aa+V;Qa=B*ja*aa+ba*N;Ya=ba*ja*aa-B*N;Wa=ja*B*aa-ba*N;Ja=B*B*aa+V;Ka=ba*B*aa+ja*N;ka=ja*ba*aa+B*N;N=B*ba*aa-ja*N;V=ba*ba*aa+V;l[0]=ca*Ia+wa*Qa+xa*Ya;l[1]=fa*Ia+ra*Qa+Ba*Ya;l[2]=la*Ia+ua*Qa+Aa*Ya;l[3]=na*Ia+Ca*Qa+ya*Ya;l[4]=ca*Wa+wa*Ja+xa*Ka;l[5]=fa*Wa+ra*Ja+Ba*Ka;l[6]=la*Wa+ua*Ja+Aa*Ka;l[7]=na*Wa+Ca*Ja+ya*Ka;l[8]=ca*ka+wa*N+xa*V;l[9]=fa*ka+ra*N+Ba*V;l[10]=la*ka+ua*N+Aa*V;l[11]=na*ka+Ca*N+ya*V;E!==l&&(l[12]=E[12],l[13]=E[13],l[14]=E[14],l[15]=E[15]);return l}function a(l,E,X){const ba=
Math.sin(X);X=Math.cos(X);const ja=E[4],B=E[5],J=E[6],N=E[7],V=E[8],aa=E[9],ca=E[10],fa=E[11];E!==l&&(l[0]=E[0],l[1]=E[1],l[2]=E[2],l[3]=E[3],l[12]=E[12],l[13]=E[13],l[14]=E[14],l[15]=E[15]);l[4]=ja*X+V*ba;l[5]=B*X+aa*ba;l[6]=J*X+ca*ba;l[7]=N*X+fa*ba;l[8]=V*X-ja*ba;l[9]=aa*X-B*ba;l[10]=ca*X-J*ba;l[11]=fa*X-N*ba;return l}function u(l,E,X){const ba=Math.sin(X);X=Math.cos(X);const ja=E[0],B=E[1],J=E[2],N=E[3],V=E[8],aa=E[9],ca=E[10],fa=E[11];E!==l&&(l[4]=E[4],l[5]=E[5],l[6]=E[6],l[7]=E[7],l[12]=E[12],
l[13]=E[13],l[14]=E[14],l[15]=E[15]);l[0]=ja*X-V*ba;l[1]=B*X-aa*ba;l[2]=J*X-ca*ba;l[3]=N*X-fa*ba;l[8]=ja*ba+V*X;l[9]=B*ba+aa*X;l[10]=J*ba+ca*X;l[11]=N*ba+fa*X;return l}function n(l,E,X){const ba=Math.sin(X);X=Math.cos(X);const ja=E[0],B=E[1],J=E[2],N=E[3],V=E[4],aa=E[5],ca=E[6],fa=E[7];E!==l&&(l[8]=E[8],l[9]=E[9],l[10]=E[10],l[11]=E[11],l[12]=E[12],l[13]=E[13],l[14]=E[14],l[15]=E[15]);l[0]=ja*X+V*ba;l[1]=B*X+aa*ba;l[2]=J*X+ca*ba;l[3]=N*X+fa*ba;l[4]=V*X-ja*ba;l[5]=aa*X-B*ba;l[6]=ca*X-J*ba;l[7]=fa*
X-N*ba;return l}function D(l,E){l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=1;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=1;l[11]=0;l[12]=E[0];l[13]=E[1];l[14]=E[2];l[15]=1;return l}function L(l,E){l[0]=E[0];l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=E[1];l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=E[2];l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function f(l,E,X){if(0===E)return C(l);let ba=X[0],ja=X[1];X=X[2];let B=Math.sqrt(ba*ba+ja*ja+X*X),J=void 0,N=void 0,V=void 0;if(B<A.getEpsilon())return null;B=1/B;ba*=B;ja*=B;X*=B;
J=Math.sin(E);N=Math.cos(E);V=1-N;l[0]=ba*ba*V+N;l[1]=ja*ba*V+X*J;l[2]=X*ba*V-ja*J;l[3]=0;l[4]=ba*ja*V-X*J;l[5]=ja*ja*V+N;l[6]=X*ja*V+ba*J;l[7]=0;l[8]=ba*X*V+ja*J;l[9]=ja*X*V-ba*J;l[10]=X*X*V+N;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function K(l,E){const X=Math.sin(E);E=Math.cos(E);l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=E;l[6]=X;l[7]=0;l[8]=0;l[9]=-X;l[10]=E;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function Q(l,E){const X=Math.sin(E);E=Math.cos(E);l[0]=E;l[1]=0;l[2]=-X;l[3]=0;l[4]=
0;l[5]=1;l[6]=0;l[7]=0;l[8]=X;l[9]=0;l[10]=E;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function T(l,E){const X=Math.sin(E);E=Math.cos(E);l[0]=E;l[1]=X;l[2]=0;l[3]=0;l[4]=-X;l[5]=E;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=1;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function Z(l,E,X){var ba=E[0],ja=E[1],B=E[2],J=E[3],N=ba+ba,V=ja+ja;const aa=B+B;E=ba*N;const ca=ba*V;ba*=aa;const fa=ja*V;ja*=aa;B*=aa;N*=J;V*=J;J*=aa;l[0]=1-(fa+B);l[1]=ca+J;l[2]=ba-V;l[3]=0;l[4]=ca-J;l[5]=1-(E+B);l[6]=ja+N;l[7]=
0;l[8]=ba+V;l[9]=ja-N;l[10]=1-(E+fa);l[11]=0;l[12]=X[0];l[13]=X[1];l[14]=X[2];l[15]=1;return l}function W(l,E){const X=Oa,ba=-E[0],ja=-E[1],B=-E[2],J=E[3],N=E[4],V=E[5],aa=E[6],ca=E[7],fa=ba*ba+ja*ja+B*B+J*J;0<fa?(X[0]=2*(N*J+ca*ba+V*B-aa*ja)/fa,X[1]=2*(V*J+ca*ja+aa*ba-N*B)/fa,X[2]=2*(aa*J+ca*B+N*ja-V*ba)/fa):(X[0]=2*(N*J+ca*ba+V*B-aa*ja),X[1]=2*(V*J+ca*ja+aa*ba-N*B),X[2]=2*(aa*J+ca*B+N*ja-V*ba));Z(l,E,X);return l}function U(l,E){l[0]=E[12];l[1]=E[13];l[2]=E[14];return l}function w(l,E){const X=E[0],
ba=E[1],ja=E[2],B=E[4],J=E[5],N=E[6],V=E[8],aa=E[9];E=E[10];l[0]=Math.sqrt(X*X+ba*ba+ja*ja);l[1]=Math.sqrt(B*B+J*J+N*N);l[2]=Math.sqrt(V*V+aa*aa+E*E);return l}function I(l,E){const X=E[0]+E[5]+E[10];let ba=0;0<X?(ba=2*Math.sqrt(X+1),l[3]=.25*ba,l[0]=(E[6]-E[9])/ba,l[1]=(E[8]-E[2])/ba,l[2]=(E[1]-E[4])/ba):E[0]>E[5]&&E[0]>E[10]?(ba=2*Math.sqrt(1+E[0]-E[5]-E[10]),l[3]=(E[6]-E[9])/ba,l[0]=.25*ba,l[1]=(E[1]+E[4])/ba,l[2]=(E[8]+E[2])/ba):E[5]>E[10]?(ba=2*Math.sqrt(1+E[5]-E[0]-E[10]),l[3]=(E[8]-E[2])/ba,
l[0]=(E[1]+E[4])/ba,l[1]=.25*ba,l[2]=(E[6]+E[9])/ba):(ba=2*Math.sqrt(1+E[10]-E[0]-E[5]),l[3]=(E[1]-E[4])/ba,l[0]=(E[8]+E[2])/ba,l[1]=(E[6]+E[9])/ba,l[2]=.25*ba);return l}function h(l,E,X,ba){var ja=E[0],B=E[1],J=E[2],N=E[3],V=ja+ja,aa=B+B,ca=J+J;E=ja*V;const fa=ja*aa;ja*=ca;const la=B*aa;B*=ca;J*=ca;V*=N;aa*=N;N*=ca;ca=ba[0];const na=ba[1];ba=ba[2];l[0]=(1-(la+J))*ca;l[1]=(fa+N)*ca;l[2]=(ja-aa)*ca;l[3]=0;l[4]=(fa-N)*na;l[5]=(1-(E+J))*na;l[6]=(B+V)*na;l[7]=0;l[8]=(ja+aa)*ba;l[9]=(B-V)*ba;l[10]=(1-
(E+la))*ba;l[11]=0;l[12]=X[0];l[13]=X[1];l[14]=X[2];l[15]=1;return l}function k(l,E,X,ba,ja){var B=E[0],J=E[1],N=E[2],V=E[3],aa=B+B,ca=J+J,fa=N+N;E=B*aa;var la=B*ca,na=B*fa;B=J*ca;J*=fa;var wa=N*fa;N=V*aa;ca*=V;const ra=V*fa;var ua=ba[0],Ca=ba[1];fa=ba[2];ba=ja[0];V=ja[1];ja=ja[2];aa=(1-(B+wa))*ua;const xa=(la+ra)*ua;ua*=na-ca;la=(la-ra)*Ca;wa=(1-(E+wa))*Ca;Ca*=J+N;na=(na+ca)*fa;J=(J-N)*fa;E=(1-(E+B))*fa;l[0]=aa;l[1]=xa;l[2]=ua;l[3]=0;l[4]=la;l[5]=wa;l[6]=Ca;l[7]=0;l[8]=na;l[9]=J;l[10]=E;l[11]=0;
l[12]=X[0]+ba-(aa*ba+la*V+na*ja);l[13]=X[1]+V-(xa*ba+wa*V+J*ja);l[14]=X[2]+ja-(ua*ba+Ca*V+E*ja);l[15]=1;return l}function y(l,E){var X=E[0],ba=E[1],ja=E[2];E=E[3];var B=X+X,J=ba+ba;const N=ja+ja;X*=B;const V=ba*B;ba*=J;const aa=ja*B,ca=ja*J;ja*=N;B*=E;J*=E;E*=N;l[0]=1-ba-ja;l[1]=V+E;l[2]=aa-J;l[3]=0;l[4]=V-E;l[5]=1-X-ja;l[6]=ca+B;l[7]=0;l[8]=aa+J;l[9]=ca-B;l[10]=1-X-ba;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function P(l,E,X,ba,ja,B,J){const N=1/(X-E),V=1/(ja-ba),aa=1/(B-J);l[0]=2*B*N;l[1]=
0;l[2]=0;l[3]=0;l[4]=0;l[5]=2*B*V;l[6]=0;l[7]=0;l[8]=(X+E)*N;l[9]=(ja+ba)*V;l[10]=(J+B)*aa;l[11]=-1;l[12]=0;l[13]=0;l[14]=J*B*2*aa;l[15]=0;return l}function M(l,E,X,ba,ja){E=1/Math.tan(E/2);let B=void 0;l[0]=E/X;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=E;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[11]=-1;l[12]=0;l[13]=0;l[15]=0;null!=ja&&Infinity!==ja?(B=1/(ba-ja),l[10]=(ja+ba)*B,l[14]=2*ja*ba*B):(l[10]=-1,l[14]=-2*ba);return l}function S(l,E,X,ba){const ja=Math.tan(E.upDegrees*Math.PI/180),B=Math.tan(E.downDegrees*Math.PI/
180),J=Math.tan(E.leftDegrees*Math.PI/180);E=Math.tan(E.rightDegrees*Math.PI/180);const N=2/(J+E),V=2/(ja+B);l[0]=N;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=V;l[6]=0;l[7]=0;l[8]=-((J-E)*N*.5);l[9]=(ja-B)*V*.5;l[10]=ba/(X-ba);l[11]=-1;l[12]=0;l[13]=0;l[14]=ba*X/(X-ba);l[15]=0;return l}function Y(l,E,X,ba,ja,B,J){const N=1/(E-X),V=1/(ba-ja),aa=1/(B-J);l[0]=-2*N;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=-2*V;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=2*aa;l[11]=0;l[12]=(E+X)*N;l[13]=(ja+ba)*V;l[14]=(J+B)*aa;l[15]=1;return l}
function da(l,E,X,ba){const ja=E[0],B=E[1];E=E[2];let J=ja-X[0],N=B-X[1];X=E-X[2];var V=A.getEpsilon();if(Math.abs(J)<V&&Math.abs(N)<V&&Math.abs(X)<V)C(l);else{var aa=1/Math.sqrt(J*J+N*N+X*X);J*=aa;N*=aa;X*=aa;aa=ba[0];var ca=ba[1];V=ba[2];ba=ca*X-V*N;V=V*J-aa*X;ca=aa*N-ca*J;(aa=Math.sqrt(ba*ba+V*V+ca*ca))?(aa=1/aa,ba*=aa,V*=aa,ca*=aa):ca=V=ba=0;var fa=N*ca-X*V,la=X*ba-J*ca,na=J*V-N*ba;(aa=Math.sqrt(fa*fa+la*la+na*na))?(aa=1/aa,fa*=aa,la*=aa,na*=aa):na=la=fa=0;l[0]=ba;l[1]=fa;l[2]=J;l[3]=0;l[4]=V;
l[5]=la;l[6]=N;l[7]=0;l[8]=ca;l[9]=na;l[10]=X;l[11]=0;l[12]=-(ba*ja+V*B+ca*E);l[13]=-(fa*ja+la*B+na*E);l[14]=-(J*ja+N*B+X*E);l[15]=1}}function ha(l,E,X,ba){const ja=E[0],B=E[1];E=E[2];var J=ba[0];const N=ba[1];var V=ba[2];ba=ja-X[0];let aa=B-X[1];X=E-X[2];let ca=ba*ba+aa*aa+X*X;0<ca&&(ca=1/Math.sqrt(ca),ba*=ca,aa*=ca,X*=ca);let fa=N*X-V*aa;V=V*ba-J*X;J=J*aa-N*ba;ca=fa*fa+V*V+J*J;0<ca&&(ca=1/Math.sqrt(ca),fa*=ca,V*=ca,J*=ca);l[0]=fa;l[1]=V;l[2]=J;l[3]=0;l[4]=aa*J-X*V;l[5]=X*fa-ba*J;l[6]=ba*V-aa*fa;
l[7]=0;l[8]=ba;l[9]=aa;l[10]=X;l[11]=0;l[12]=ja;l[13]=B;l[14]=E;l[15]=1;return l}function ma(l){return"mat4("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+", "+l[9]+", "+l[10]+", "+l[11]+", "+l[12]+", "+l[13]+", "+l[14]+", "+l[15]+")"}function pa(l){return Math.sqrt(l[0]**2+l[1]**2+l[2]**2+l[3]**2+l[4]**2+l[5]**2+l[6]**2+l[7]**2+l[8]**2+l[9]**2+l[10]**2+l[11]**2+l[12]**2+l[13]**2+l[14]**2+l[15]**2)}function sa(l,E,X){l[0]=E[0]+X[0];l[1]=E[1]+X[1];l[2]=E[2]+
X[2];l[3]=E[3]+X[3];l[4]=E[4]+X[4];l[5]=E[5]+X[5];l[6]=E[6]+X[6];l[7]=E[7]+X[7];l[8]=E[8]+X[8];l[9]=E[9]+X[9];l[10]=E[10]+X[10];l[11]=E[11]+X[11];l[12]=E[12]+X[12];l[13]=E[13]+X[13];l[14]=E[14]+X[14];l[15]=E[15]+X[15];return l}function qa(l,E,X){l[0]=E[0]-X[0];l[1]=E[1]-X[1];l[2]=E[2]-X[2];l[3]=E[3]-X[3];l[4]=E[4]-X[4];l[5]=E[5]-X[5];l[6]=E[6]-X[6];l[7]=E[7]-X[7];l[8]=E[8]-X[8];l[9]=E[9]-X[9];l[10]=E[10]-X[10];l[11]=E[11]-X[11];l[12]=E[12]-X[12];l[13]=E[13]-X[13];l[14]=E[14]-X[14];l[15]=E[15]-X[15];
return l}function va(l,E,X){l[0]=E[0]*X;l[1]=E[1]*X;l[2]=E[2]*X;l[3]=E[3]*X;l[4]=E[4]*X;l[5]=E[5]*X;l[6]=E[6]*X;l[7]=E[7]*X;l[8]=E[8]*X;l[9]=E[9]*X;l[10]=E[10]*X;l[11]=E[11]*X;l[12]=E[12]*X;l[13]=E[13]*X;l[14]=E[14]*X;l[15]=E[15]*X;return l}function Ea(l,E,X,ba){l[0]=E[0]+X[0]*ba;l[1]=E[1]+X[1]*ba;l[2]=E[2]+X[2]*ba;l[3]=E[3]+X[3]*ba;l[4]=E[4]+X[4]*ba;l[5]=E[5]+X[5]*ba;l[6]=E[6]+X[6]*ba;l[7]=E[7]+X[7]*ba;l[8]=E[8]+X[8]*ba;l[9]=E[9]+X[9]*ba;l[10]=E[10]+X[10]*ba;l[11]=E[11]+X[11]*ba;l[12]=E[12]+X[12]*
ba;l[13]=E[13]+X[13]*ba;l[14]=E[14]+X[14]*ba;l[15]=E[15]+X[15]*ba;return l}function Da(l,E){return l[0]===E[0]&&l[1]===E[1]&&l[2]===E[2]&&l[3]===E[3]&&l[4]===E[4]&&l[5]===E[5]&&l[6]===E[6]&&l[7]===E[7]&&l[8]===E[8]&&l[9]===E[9]&&l[10]===E[10]&&l[11]===E[11]&&l[12]===E[12]&&l[13]===E[13]&&l[14]===E[14]&&l[15]===E[15]}function Pa(l,E){if(l===E)return!0;const X=l[0],ba=l[1],ja=l[2],B=l[3],J=l[4],N=l[5],V=l[6],aa=l[7],ca=l[8],fa=l[9],la=l[10],na=l[11],wa=l[12],ra=l[13],ua=l[14];l=l[15];const Ca=E[0],
xa=E[1],Ba=E[2],Aa=E[3],ya=E[4],Ia=E[5],Qa=E[6],Ya=E[7],Wa=E[8],Ja=E[9],Ka=E[10],ka=E[11],Ra=E[12],Mb=E[13],nb=E[14];E=E[15];const b=A.getEpsilon();return Math.abs(X-Ca)<=b*Math.max(1,Math.abs(X),Math.abs(Ca))&&Math.abs(ba-xa)<=b*Math.max(1,Math.abs(ba),Math.abs(xa))&&Math.abs(ja-Ba)<=b*Math.max(1,Math.abs(ja),Math.abs(Ba))&&Math.abs(B-Aa)<=b*Math.max(1,Math.abs(B),Math.abs(Aa))&&Math.abs(J-ya)<=b*Math.max(1,Math.abs(J),Math.abs(ya))&&Math.abs(N-Ia)<=b*Math.max(1,Math.abs(N),Math.abs(Ia))&&Math.abs(V-
Qa)<=b*Math.max(1,Math.abs(V),Math.abs(Qa))&&Math.abs(aa-Ya)<=b*Math.max(1,Math.abs(aa),Math.abs(Ya))&&Math.abs(ca-Wa)<=b*Math.max(1,Math.abs(ca),Math.abs(Wa))&&Math.abs(fa-Ja)<=b*Math.max(1,Math.abs(fa),Math.abs(Ja))&&Math.abs(la-Ka)<=b*Math.max(1,Math.abs(la),Math.abs(Ka))&&Math.abs(na-ka)<=b*Math.max(1,Math.abs(na),Math.abs(ka))&&Math.abs(wa-Ra)<=b*Math.max(1,Math.abs(wa),Math.abs(Ra))&&Math.abs(ra-Mb)<=b*Math.max(1,Math.abs(ra),Math.abs(Mb))&&Math.abs(ua-nb)<=b*Math.max(1,Math.abs(ua),Math.abs(nb))&&
Math.abs(l-E)<=b*Math.max(1,Math.abs(l),Math.abs(E))}function Sa(l){const E=A.getEpsilon(),X=l[0],ba=l[1],ja=l[2],B=l[4],J=l[5],N=l[6],V=l[8],aa=l[9];l=l[10];return Math.abs(1-(X*X+B*B+V*V))<=E&&Math.abs(1-(ba*ba+J*J+aa*aa))<=E&&Math.abs(1-(ja*ja+N*N+l*l))<=E}function Ta(l){return 1===l[0]&&0===l[1]&&0===l[2]&&0===l[4]&&1===l[5]&&0===l[6]&&0===l[8]&&0===l[9]&&1===l[10]}const Oa=g.create();g=Object.freeze(Object.defineProperty({__proto__:null,add:sa,adjoint:v,copy:x,determinant:t,equals:Pa,exactEquals:Da,
frob:pa,fromQuat:y,fromQuat2:W,fromRotation:f,fromRotationTranslation:Z,fromRotationTranslationScale:h,fromRotationTranslationScaleOrigin:k,fromScaling:L,fromTranslation:D,fromXRotation:K,fromYRotation:Q,fromZRotation:T,frustum:P,getRotation:I,getScaling:w,getTranslation:U,hasIdentityRotation:Ta,identity:C,invert:d,invertOrIdentity:q,isOrthoNormal:Sa,lookAt:da,mul:z,multiply:z,multiplyScalar:va,multiplyScalarAndAdd:Ea,ortho:Y,perspective:M,perspectiveFromFieldOfView:S,rotate:p,rotateX:a,rotateY:u,
rotateZ:n,scale:r,set:F,str:ma,sub:qa,subtract:qa,targetTo:ha,translate:H,transpose:e},Symbol.toStringTag,{value:"Module"}));c.add=sa;c.adjoint=v;c.copy=x;c.determinant=t;c.equals=Pa;c.exactEquals=Da;c.frob=pa;c.fromQuat=y;c.fromQuat2=W;c.fromRotation=f;c.fromRotationTranslation=Z;c.fromRotationTranslationScale=h;c.fromRotationTranslationScaleOrigin=k;c.fromScaling=L;c.fromTranslation=D;c.fromXRotation=K;c.fromYRotation=Q;c.fromZRotation=T;c.frustum=P;c.getRotation=I;c.getScaling=w;c.getTranslation=
U;c.hasIdentityRotation=Ta;c.identity=C;c.invert=d;c.invertOrIdentity=q;c.isOrthoNormal=Sa;c.lookAt=da;c.mat4=g;c.mul=z;c.multiply=z;c.multiplyScalar=va;c.multiplyScalarAndAdd=Ea;c.ortho=Y;c.perspective=M;c.perspectiveFromFieldOfView=S;c.rotate=p;c.rotateX=a;c.rotateY=u;c.rotateZ=n;c.scale=r;c.set=F;c.str=ma;c.sub=qa;c.subtract=qa;c.targetTo=ha;c.translate=H;c.transpose=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition",
"../rest/support/generateRendererUtils"],function(c,g,A){function x(h){return null==h||"string"===typeof h&&!h?"\x3cNull\x3e":h}function F(h){const k=null!=h.minValue||null!=h.maxValue,y=!!h.sqlExpression&&h.supportsSQLExpression;return!(null!=h.normalizationField||null!=h.normalizationType)&&!k&&!y}function C(h){const {values:k,useSampleStdDev:y,supportsNullCount:P}=h;var M=Number.POSITIVE_INFINITY;let S=Number.NEGATIVE_INFINITY,Y=null,da=null;var ha=null;let ma=null,pa=0;const sa=null==h.minValue?
-Infinity:h.minValue,qa=null==h.maxValue?Infinity:h.maxValue;for(const va of k)Number.isFinite(va)?va>=sa&&va<=qa&&(Y=null===Y?va:Y+va,M=Math.min(M,va),S=Math.max(S,va),pa++):"string"===typeof va&&pa++;if(pa&&null!=Y){da=Y/pa;ha=0;for(const va of k)Number.isFinite(va)&&va>=sa&&va<=qa&&(ha+=(va-da)**2);ma=y?1<pa?ha/(pa-1):0:0<pa?ha/pa:0;ha=Math.sqrt(ma)}else S=M=null;M={avg:da,count:pa,max:S,min:M,stddev:ha,sum:Y,variance:ma};P&&(M.nullcount=k.length-pa);h.percentileParams&&(M.median=e(k,h.percentileParams));
return M}function e(h,k){const {fieldType:y,value:P,orderBy:M,isDiscrete:S}=k,Y=q(y,"desc"===M);h=[...h].filter(pa=>null!=pa).sort((pa,sa)=>Y(pa,sa));if(0===h.length)return null;if(0>=P)return h[0];if(1<=P)return h[h.length-1];var da=(h.length-1)*P,ha=Math.floor(da);k=ha+1;da%=1;ha=h[ha];const ma=h[k];return k>=h.length||S||"string"===typeof ha||"string"===typeof ma?ha:ha*(1-da)+ma*da}function q(h,k){if(h){if(D.has(h))return k?w:I;if(L.has(h))return d(k,!1);if("esriFieldTypeTimestampOffset"===h)return k?
Z:T;const S=d(k,!0);if("esriFieldTypeString"===h)return S;if("esriFieldTypeGUID"===h||"esriFieldTypeGlobalID"===h)return(Y,da)=>S(v(Y),v(da))}const y=k?1:-1,P=k?w:I,M=d(k,!0);return(S,Y)=>"number"===typeof S&&"number"===typeof Y?P(S,Y):"string"===typeof S&&"string"===typeof Y?M(S,Y):y}function d(h,k){if(!k)return h?U:W;const y=h?K:Q;return h?(P,M)=>{const S=y(P,M);if(null!=S)return S;P=P.toUpperCase();M=M.toUpperCase();return P>M?-1:P<M?1:0}:(P,M)=>{const S=y(P,M);if(null!=S)return S;P=P.toUpperCase();
M=M.toUpperCase();return P<M?-1:P>M?1:0}}function v(h){return h.substr(24,12)+h.substr(19,4)+h.substr(16,2)+h.substr(14,2)+h.substr(11,2)+h.substr(9,2)+h.substr(6,2)+h.substr(4,2)+h.substr(2,2)+h.substr(0,2)}function t(h){return"coded-value"!==h?.type?[]:h.codedValues.map(k=>k.code)}function z(h,k){const y=r({field:k.field,normalizationType:k.normalizationType,normalizationField:k.normalizationField,classificationMethod:k.classificationMethod,standardDeviationInterval:k.standardDeviationInterval,
breakCount:k.numClasses||5});h=H(h,k.minValue,k.maxValue);return A.createGenerateRendererClassBreaks({definition:y,values:h,normalizationTotal:k.normalizationTotal})}function H(h,k,y){const P=null==k?-Infinity:k,M=null==y?Infinity:y;return h.filter(S=>Number.isFinite(S)&&S>=P&&S<=M)}function r(h){const {breakCount:k,field:y,normalizationField:P,normalizationType:M}=h,S=h.classificationMethod||"equal-interval";return new g({breakCount:k,classificationField:y,classificationMethod:S,normalizationField:"field"===
M?P:void 0,normalizationType:M,standardDeviationInterval:"standard-deviation"===S?h.standardDeviationInterval||1:void 0})}function p(h,k){const {field:y,classificationMethod:P,standardDeviationInterval:M,normalizationType:S,normalizationField:Y,normalizationTotal:da,minValue:ha,maxValue:ma}=k,pa=k.numBins||10;let sa=k=null,qa=null;P&&"equal-interval"!==P||S?({classBreaks:h}=z(h,{field:y,normalizationType:S,normalizationField:Y,normalizationTotal:da,classificationMethod:P,standardDeviationInterval:M,
minValue:ha,maxValue:ma,numClasses:pa}),k=h[0].minValue,sa=h[h.length-1].maxValue,qa=h.map(va=>[va.minValue,va.maxValue])):(null!=ha&&null!=ma?(k=ha,sa=ma):(h=C({values:h,minValue:ha,maxValue:ma,useSampleStdDev:!S,supportsNullCount:F({normalizationType:S,normalizationField:Y,minValue:ha,maxValue:ma})}),k=h.min??null,sa=h.max??null),qa=u(k??0,sa??0,pa));return{min:k,max:sa,intervals:qa}}function a(h,k){let y=-1;for(let P=h.length-1;0<=P;P--)if(k>=h[P][0]){y=P;break}return y}function u(h,k,y){const P=
(k-h)/y,M=[];let S;for(let Y=1;Y<=y;Y++)S=h+P,S=Number(S.toFixed(16)),M.push([h,Y===y?k:S]),h=S;return M}const n=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,D=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),L=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),f="min max avg stddev count sum variance nullcount median".split(" "),K=(h,k)=>null==h?null==k?0:1:
null==k?-1:null,Q=(h,k)=>null==h?null==k?0:-1:null==k?1:null,T=(h,k)=>Q(h,k)??(h===k?0:(new Date(h)).getTime()-(new Date(k)).getTime()),Z=(h,k)=>K(h,k)??(h===k?0:(new Date(k)).getTime()-(new Date(h)).getTime()),W=(h,k)=>Q(h,k)??(h===k?0:h<k?-1:1),U=(h,k)=>K(h,k)??(h===k?0:h<k?1:-1),w=(h,k)=>K(h,k)??k-h,I=(h,k)=>Q(h,k)??h-k;c.calculateClassBreaks=z;c.calculateHistogram=function(h,k){var y=p(h,k);if(null==y.min&&null==y.max)return{bins:[],minValue:y.min,maxValue:y.max,normalizationTotal:k.normalizationTotal};
const P=y.intervals,M=y.min??0;y=y.max??0;const S=P.map((Y,da)=>({minValue:P[da][0],maxValue:P[da][1],count:0}));for(const Y of h)null!=Y&&Y>=M&&Y<=y&&(h=a(P,Y),-1<h&&S[h].count++);return{bins:S,minValue:M,maxValue:y,normalizationTotal:k.normalizationTotal}};c.calculatePercentile=e;c.calculateStatistics=C;c.calculateStringStatistics=function(h){const k=h.returnDistinct?[...(new Set(h.values))]:h.values;var y=k.filter(M=>null!=M).sort();const P=y.length;y={count:P,min:y[0],max:y[P-1]};h.supportsNullCount&&
(y.nullcount=k.length-P);h.percentileParams&&(y.median=e(k,h.percentileParams));return y};c.calculateUniqueValuesCount=function(h){const k={};for(let y of h){if(null==y||"string"===typeof y&&""===y.trim())y=null;null==k[y]?k[y]={count:1,data:y}:k[y].count++}return{count:k}};c.createClassBreaksDefinition=r;c.createUVResult=function(h,k,y,P){h=h.count;const M=[];if(y&&k){y=[];var S=t(k[0]);for(const Y of S)if(k[1]){S=t(k[1]);for(const da of S)if(k[2]){S=t(k[2]);for(const ha of S)y.push(`${x(Y)}${P}${x(da)}${P}${x(ha)}`)}else y.push(`${x(Y)}${P}${x(da)}`)}else y.push(Y);
for(const Y of y)h.hasOwnProperty(Y)||(h[Y]={data:Y,count:0})}for(const Y in h)k=h[Y],M.push({value:k.data,count:k.count,label:k.label});return{uniqueValueInfos:M}};c.getAttributeComparator=q;c.getEqualIntervalBins=u;c.getNormalizedValue=function(h,k,y,P){let M=null;switch(k){case "log":0!==h&&(M=Math.log(h)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(P)&&0!==P&&(M=h/P*100);break;case "field":Number.isFinite(y)&&0!==y&&(M=h/y);break;case "natural-log":0<h&&(M=Math.log(h));break;case "square-root":0<
h&&(M=h**.5)}return M};c.isNullCountSupported=F;c.processNullValue=x;c.processSummaryStatisticsResult=function(h,k){let y;for(y in h)f.includes(y)&&(Number.isFinite(h[y])||(h[y]=null));if(!k)return h;["avg","stddev","variance"].forEach(P=>{null!=h[P]&&(h[P]=Math.ceil(h[P]??0))});return h};c.resolveCBResult=function(h,k){let y=h.classBreaks;const P=y[0]?.minValue,M=y[y.length-1]?.maxValue,S="standard-deviation"===k;y=y.map(Y=>{const da=Y.label;Y={minValue:Y.minValue,maxValue:Y.maxValue,label:da};if(S&&
da){const ha=da.match(n)?.map(ma=>+ma.trim())??[];2===ha.length?(Y.minStdDev=ha[0],Y.maxStdDev=ha[1],0>ha[0]&&0<ha[1]&&(Y.hasAvg=!0)):1===ha.length&&(da.includes("\x3c")?(Y.minStdDev=null,Y.maxStdDev=ha[0]):da.includes("\x3e")&&(Y.minStdDev=ha[0],Y.maxStdDev=null))}return Y});return{minValue:P,maxValue:M,classBreakInfos:y,normalizationTotal:h.normalizationTotal}};c.statisticTypes=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,A,x,F,C,e,q,d){F=new g.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});g=new g.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});A=class extends A.JSONSupport{constructor(v){super(v);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(v){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",v)}set definedInterval(v){"defined-interval"===this.classificationMethod&&this._set("definedInterval",v)}};c.__decorate([q.enumeration({classBreaksDef:"class-breaks-definition"})],A.prototype,"type",void 0);c.__decorate([x.property({json:{write:!0}})],A.prototype,
"breakCount",void 0);c.__decorate([x.property({json:{write:!0}})],A.prototype,"classificationField",void 0);c.__decorate([x.property({type:String,json:{read:F.read,write:F.write}})],A.prototype,"classificationMethod",void 0);c.__decorate([x.property({json:{write:!0}})],A.prototype,"normalizationField",void 0);c.__decorate([x.property({json:{read:g.read,write:g.write}})],A.prototype,"normalizationType",void 0);c.__decorate([x.property({value:null,json:{write:!0}})],A.prototype,"standardDeviationInterval",
null);c.__decorate([x.property({value:null,json:{write:!0}})],A.prototype,"definedInterval",null);return A=c.__decorate([d.subclass("esri.rest.support.ClassBreaksDefinition")],A)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(c,g,A){c.enumeration=function(x,F={}){x=x instanceof g.JSONMap?x:new g.JSONMap(x,F);x={type:F?.ignoreUnknown??!0?x.apiValues:String,json:{type:x.jsonValues,read:F?.readOnly?!1:{reader:x.read},write:{writer:x.write}}};
void 0!==F?.readOnly&&(x.readOnly=!!F.readOnly);void 0!==F?.default&&(x.json.default=F.default);void 0!==F?.name&&(x.json.name=F.name);void 0!==F?.nonNullable&&(x.nonNullable=F.nonNullable);return A.property(x)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(c,g){function A(z){var H=z.definition;const {classificationMethod:r,normalizationType:p,definedInterval:a}=H;H=H.breakCount??
1;const u=[];var n=z.values;if(0===n.length)return[];n=n.sort((T,Z)=>T-Z);var D=n[0],L=n[n.length-1];if("equal-interval"===r)if(n.length>=H){n=(L-D)/H;z=D;for(var f=1;f<H;f++){var K=Number((D+f*n).toFixed(6));u.push({minValue:z,maxValue:K,label:x(z,K,p)});z=K}u.push({minValue:z,maxValue:L,label:x(z,L,p)})}else n.forEach(T=>{u.push({minValue:T,maxValue:T,label:x(T,T,p)})});else if("natural-breaks"===r){n=F(n);z=C(n.uniqueValues,z.valueFrequency||n.valueFrequency,H);for(f=1;f<H;f++)n.uniqueValues.length>
f&&(K=Number(n.uniqueValues[z[f]].toFixed(6)),u.push({minValue:D,maxValue:K,label:x(D,K,p)}),D=K);u.push({minValue:D,maxValue:L,label:x(D,L,p)})}else if("quantile"===r)if(n.length>=H&&D!==L){z=Math.ceil(n.length/H);f=0;for(K=1;K<H;K++){var Q=z+f-1;Q>n.length&&(Q=n.length-1);0>Q&&(Q=0);u.push({minValue:D,maxValue:n[Q],label:x(D,n[Q],p)});D=n[Q];f+=z;z=Math.ceil((n.length-f)/(H-K))}u.push({minValue:D,maxValue:L,label:x(D,L,p)})}else for(H=-1,L=0;L<n.length;L++)D=n[L],D!==H&&(H=D,u.push({minValue:H,
maxValue:D,label:x(H,D,p)}),H=D);else if("standard-deviation"===r)if(z=d(n),f=v(n,z),0===f)u.push({minValue:n[0],maxValue:n[0],label:x(n[0],n[0],p)});else{n=q(D,L,H,z,f)*f;f=0;for(K=H;1<=K;K--)Q=Number((z-(K-.5)*n).toFixed(6)),u.push({minValue:D,maxValue:Q,label:x(D,Q,p)}),D=Q,f++;K=Number((z+.5*n).toFixed(6));u.push({minValue:D,maxValue:K,label:x(D,K,p)});D=K;f++;for(Q=1;Q<=H;Q++)K=f===2*H?L:Number((z+(Q+.5)*n).toFixed(6)),u.push({minValue:D,maxValue:K,label:x(D,K,p)}),D=K,f++}else if("defined-interval"===
r){if(!a)return u;H=n[0];L=n[n.length-1];n=Math.ceil((L-H)/a);D=H;for(z=1;z<n;z++)f=Number((H+z*a).toFixed(6)),u.push({minValue:D,maxValue:f,label:x(D,f,p)}),D=f;u.push({minValue:D,maxValue:L,label:x(D,L,p)})}return u}function x(z,H,r){let p=null;return p=z===H?r&&"percent-of-total"===r?z+"%":z.toString():r&&"percent-of-total"===r?z+"% - "+H+"%":z+" - "+H}function F(z){const H=[],r=[];let p=Number.MIN_VALUE,a=1,u=-1;for(let n=0;n<z.length;n++){const D=z[n];D===p?(a++,r[u]=a):null!==D&&(H.push(D),
p=D,a=1,r.push(a),u++)}return{uniqueValues:H,valueFrequency:r}}function C(z,H,r){var p=z.length;const a=[];r>p&&(r=p);for(var u=0;u<r;u++)a.push(Math.round(u*p/r-1));a.push(p-1);u=e(a,z,H,r);p=u.mean;u=u.sdcm;var n=r,D=0,L=0;let f=0,K=0,Q=!0;for(let Z=0;2>Z&&Q;Z++){0===Z&&(Q=!1);for(var T=0;T<n-1;T++)for(;a[T+1]+1!==a[T+2];)if(a[T+1]+=1,D=t(T,a,z,H),f=D.sbMean,D=D.sbSdcm,L=t(T+1,a,z,H),K=L.sbMean,L=L.sbSdcm,D+L<u[T]+u[T+1])u[T]=D,u[T+1]=L,p[T]=f,p[T+1]=K,Q=!0;else{--a[T+1];break}for(T=n-1;0<T;T--)for(;a[T]!==
a[T-1]+1;)if(--a[T],D=t(T-1,a,z,H),f=D.sbMean,D=D.sbSdcm,L=t(T,a,z,H),K=L.sbMean,L=L.sbSdcm,D+L<u[T-1]+u[T])u[T-1]=D,u[T]=L,p[T-1]=f,p[T]=K,Q=!0;else{a[T]+=1;break}}Q&&(u=e(a,z,H,r));return a}function e(z,H,r,p){let a=[];var u=[],n=[];let D=0;const L=[],f=[];for(var K=0;K<p;K++){var Q=t(K,z,H,r);L.push(Q.sbMean);f.push(Q.sbSdcm);D+=f[K]}Q=D;for(K=!0;K||D<Q;){K=!1;a=[];for(u=0;u<p;u++)a.push(z[u]);for(n=0;n<p;n++)for(Q=z[n]+1;Q<=z[n+1];Q++)if(u=H[Q],0<n&&Q!==z[n+1]&&Math.abs(u-L[n])>Math.abs(u-L[n-
1]))z[n]=Q;else if(n<p-1&&z[n]!==Q-1&&Math.abs(u-L[n])>Math.abs(u-L[n+1])){z[n+1]=Q-1;break}Q=D;D=0;u=[];n=[];for(let T=0;T<p;T++){u.push(L[T]);n.push(f[T]);const Z=t(T,z,H,r);L[T]=Z.sbMean;f[T]=Z.sbSdcm;D+=f[T]}}if(D>Q){for(H=0;H<p;H++)z[H]=a[H],L[H]=u[H],f[H]=n[H];D=Q}return{mean:L,sdcm:f}}function q(z,H,r,p,a){z=Math.max(p-z,H-p)/a/r;return 1<=z?1:.5<=z?.5:.25}function d(z){let H=0;for(let r=0;r<z.length;r++)H+=z[r];return H/=z.length}function v(z,H){let r=0;for(let p=0;p<z.length;p++){const a=
z[p];r+=(a-H)*(a-H)}r/=z.length;return Math.sqrt(r)}function t(z,H,r,p){var a=0,u=0;for(var n=H[z]+1;n<=H[z+1];n++){const D=p[n];a+=r[n]*D;u+=D}0>=u&&g.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");a/=u;u=0;for(n=H[z]+1;n<=H[z+1];n++)u+=p[n]*(r[n]-a)**2;return{sbMean:a,sbSdcm:u}}c.createGenerateRendererClassBreaks=function(z){const {normalizationTotal:H}=z;return{classBreaks:A(z),normalizationTotal:H}};c.createGenerateRendererUniqueValues=function(z){z=
F(z);const H=[],r=z.uniqueValues.length;for(let p=0;p<r;p++){const a=z.uniqueValues[p];H.push({value:a,count:z.valueFrequency[p],label:a.toString()})}return{uniqueValues:H}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(c){c.makeEdgeCandidate=function(g,A,x,F,C,e=!1){return{objectId:g,target:A,distance:x,type:"edge",start:F,end:C,draped:e}};c.makeVertexCandidate=function(g,A,x){return{objectId:g,
target:A,distance:x,type:"vertex"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),function(c,g,A,x,F,C,e,q,d,v){async function t(u,n,D){if(!u)return null;
var {where:L}=u;u.where=L=L?.trim();if(!L||/^1 *= *1$/.test(L)||n&&n===L)u.where=null;if(!u.geometry)return u;n=await H(u);u.distance=0;u.units=null;"esriSpatialRelEnvelopeIntersects"===u.spatialRel&&({spatialReference:L}=u.geometry,n=C.getGeometryExtent(n),n.spatialReference=L);if(n){await v.checkProjectionSupport(n.spatialReference,D);L=n.spatialReference;n=z(n,D)&&e.isExtent(n)?{spatialReference:L,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}:n;L=(await q.normalizeCentralMeridian(e.fromJSON(n)))[0];
if(null==L)throw a;const f="quantizationParameters"in u&&u.quantizationParameters?.tolerance||"maxAllowableOffset"in u&&u.maxAllowableOffset||0;n=f&&z(n,D)?{densificationStep:8*f}:void 0;L=L.toJSON();n=v.project(L,L.spatialReference,D,n);if(!n)throw a;n.spatialReference=D;u.geometry=n}return u}function z(u,n){if(!u)return!1;const D=u.spatialReference;return(e.isExtent(u)||e.isPolygon(u)||e.isPolyline(u))&&!d.equals(D,n)&&!F.canProjectWithoutEngine(D,n)}async function H(u){const {distance:n,units:D}=
u,L=u.geometry;if(null==n||"vertexAttributes"in L)return L;var f=L.spatialReference;u=D?p.fromJSON(D):x.getUnitString(f);f=f&&(d.isGeographic(f)||d.isWebMercator(f))?L:await v.checkProjectionSupport(f,d.wgs84).then(()=>v.project(L,d.wgs84));return(await r())(f.spatialReference,f,n,u)}async function r(){return(await new Promise((u,n)=>c(["../../../geometry/geometryEngineJSON"],u,n))).geodesicBuffer}const p=new A.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),a=Object.freeze({});g.normalizeQuery=async function(u,n,D){const {outFields:L,orderByFields:f,groupByFieldsForStatistics:K,outStatistics:Q}=u;if(L)for(var T=0;T<L.length;T++)L[T]=L[T].trim();if(f)for(T=0;T<f.length;T++)f[T]=f[T].trim();if(K)for(T=0;T<K.length;T++)K[T]=K[T].trim();if(Q)for(T=0;T<Q.length;T++)Q[T].onStatisticField&&(Q[T].onStatisticField=Q[T].onStatisticField.trim());
u.geometry&&!u.outSR&&(u.outSR=u.geometry.spatialReference);return t(u,n,D)};g.normalizeQueryLike=t;g.queryEngineEmptyResult=a;g.unitsKebabDict=p;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),function(c,g,A,x,F,C){function e(z,H,r){const {outFields:p,orderByFields:a,returnDistinctValues:u,
outStatistics:n}=r,D=n?n.map(L=>L.outStatisticFieldName&&L.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(a&&0<a.length){const L=a.map(f=>{const K=f.toLowerCase();return K.includes(" asc")?K.split(" asc")[0]:K.includes(" desc")?K.split(" desc")[0]:f}).filter(f=>!D.includes(f));A.validateFields(z,H,L,{expressionName:"orderByFields",query:r})}if(p&&0<p.length)A.validateFields(z,H,p,{expressionName:"outFields",query:r,allowedFieldTypes:"all"});else if(u)throw new g("unsupported-query","outFields should be specified for returnDistinctValues",
{query:r});A.validateWhere(z,H,r.where,r)}function q(z,H,r){const {outStatistics:p,groupByFieldsForStatistics:a,having:u}=r;var n=a?.length,D=p?.length;if(u){if(!n||!D)throw new g("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:r});A.validateHaving(z,H,u,p,r)}if(D&&v(p)){D=p.map(L=>L.onStatisticField).filter(Boolean);A.validateFields(z,H,D,{expressionName:"onStatisticFields",query:r});n&&A.validateFields(z,H,a,{expressionName:"groupByFieldsForStatistics",
query:r});for(const L of p){const {onStatisticField:f,statisticType:K}=L;if(("percentile_disc"===K||"percentile_cont"===K)&&"statisticParameters"in L){if({statisticParameters:n}=L,!n)throw new g("unsupported-query","statisticParameters should be set for percentile type",{definition:L,query:r});}else z.get(f)&&"count"!==K&&"min"!==K&&"max"!==K&&A.validateFields(z,H,[f],{expressionName:`outStatistics with '${K}' statistic type`,allowedFieldTypes:t,query:r})}}}async function d(z,H,r,p){var a=[];r.valueExpression&&
({arcadeUtils:a}=await C.loadArcade(),a=a.extractFieldNames(r.valueExpression));r.field&&a.push(r.field);r.field2&&a.push(r.field2);r.field3&&a.push(r.field3);r.normalizationField&&a.push(r.normalizationField);if(!a.length&&!r.valueExpression)throw new g("unsupported-query","field or valueExpression is required",{params:r});A.validateFields(z,H,a,{expressionName:"statistics",query:p})}function v(z){return null!=z&&z.every(H=>"exceedslimit"!==H.statisticType)}const t=new Set([...A.numericFieldTypes,
...A.allDateAndTimeFieldTypes]);c.validateQuery=async function(z,{fieldsIndex:H,geometryType:r,spatialReference:p,availableFields:a}){if(0>(z.distance??0)||null!=z.geometryPrecision||z.multipatchOption&&"xyFootprint"!==z.multipatchOption||z.pixelSize||z.relationParam||z.text)throw new g("unsupported-query","Unsupported query options",{query:z});e(H,a,z);q(H,a,z);return Promise.all([F.checkSpatialQuerySupport(z,r,p),x.checkProjectionSupport(p,z.outSR)]).then(()=>z)};c.validateStatisticsQuery=async function(z,
H,{fieldsIndex:r,geometryType:p,spatialReference:a,availableFields:u}){if(0>(z.distance??0)||null!=z.geometryPrecision||z.multipatchOption||z.pixelSize||z.relationParam||z.text||z.outStatistics||z.groupByFieldsForStatistics||z.having||z.orderByFields)throw new g("unsupported-query","Unsupported query options",{query:z});e(r,u,z);return Promise.all([d(r,u,H,z),F.checkSpatialQuerySupport(z,p,a),x.checkProjectionSupport(a,z.outSR)]).then(()=>z)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(c,g,A,x,F,C,e,q,d,v,t,z){function H(){return new Promise((n,D)=>c(["../../../geometry/geometryEngineJSON"],n,D))}const r={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var p={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},a={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},u={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};g.canQueryWithRBush=function(n){if(C.isExtent(n))return!0;if(C.isPolygon(n)){for(const D of n.rings)if(5!==D.length||D[0][0]!==D[1][0]||D[0][0]!==D[4][0]||D[2][0]!==D[3][0]||D[0][1]!==D[3][1]||D[0][1]!==
D[4][1]||D[1][1]!==D[2][1])return!1;return!0}return!1};g.checkSpatialQuerySupport=async function(n,D,L){const {spatialRel:f,geometry:K}=n;if(K){if(null==f||!0!==p[f])throw new A("unsupported-query","Unsupported query spatial relationship",{query:n});if(e.isValid(K.spatialReference)&&e.isValid(L)){if(null==K||!0!==a[C.getJsonType(K)])throw new A("unsupported-query","Unsupported query geometry type",{query:n});if(null==D||!0!==u[D])throw new A("unsupported-query","Unsupported layer geometry type",{query:n});
if(n.outSR)return z.checkProjectionSupport(n.geometry?.spatialReference,n.outSR)}}};g.getSpatialQueryOperator=function(n,D,L,f,K){if(C.isPolygon(D)&&"esriGeometryPoint"===L&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n)){const Q=d.convertFromPolygon(new v,D,!1,!1);return Promise.resolve(T=>q.polygonContainsPoint(Q,!1,!1,T))}if(C.isPolygon(D)&&"esriGeometryMultipoint"===L){const Q=d.convertFromPolygon(new v,D,!1,!1);if("esriSpatialRelContains"===n)return Promise.resolve(T=>q.polygonContainsMultipoint(Q,
!1,!1,T,f,K))}if(C.isExtent(D)&&"esriGeometryPoint"===L&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n))return Promise.resolve(Q=>x.extentContainsPoint(D,t.getGeometry(L,f,K,Q)));if(C.isExtent(D)&&"esriGeometryMultipoint"===L&&"esriSpatialRelContains"===n)return Promise.resolve(Q=>x.extentContainsMultipoint(D,t.getGeometry(L,f,K,Q)));if(C.isExtent(D)&&"esriSpatialRelIntersects"===n){const Q=F.getExtentIntersector(L);return Promise.resolve(T=>Q(D,t.getGeometry(L,f,K,T)))}return H().then(Q=>
{const T=Q[r[n]].bind(null,D.spatialReference,D);return Z=>T(t.getGeometry(L,f,K,Z))})};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(c,g){c.extentIntersectsExtent=g.extentIntersectsExtent;c.extentIntersectsMultipoint=g.extentIntersectsMultipoint;c.extentIntersectsPoint=g.extentIntersectsPoint;c.extentIntersectsPolygon=g.extentIntersectsPolygon;c.extentIntersectsPolyline=g.extentIntersectsPolyline;
c.getFeatureExtentIntersector=g.getFeatureExtentIntersector;c.isSelfIntersecting=g.isSelfIntersecting;c.segmentIntersects=g.segmentIntersects;c.getExtentIntersector=function(A){return"mesh"===A?g.extentIntersectsExtent:g.getFeatureExtentIntersector(A)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(c){function g(A,x,F,C,e){if(!A)return!1;x=x?F?4:3:F?3:2;const {coords:q,lengths:d}=A;F=!1;A=0;for(const t of d){var v=
A;for(let z=A,H=A+t*x;z<H;z+=x){v=z+x;v===H&&(v=A);const r=q[z],p=q[z+1],a=q[v];v=q[v+1];(p<e&&v>=e||v<e&&p>=e)&&r+(e-p)/(v-p)*(a-r)<C&&(F=!F)}A+=t*x}return F}c.polygonContainsCoords=g;c.polygonContainsMultipoint=function(A,x,F,C,e,q){e=e?q?4:3:q?3:2;const {coords:d,lengths:v}=C;if(!v)return!1;for(let t=0,z=0;t<v.length;t++,z+=e)if(!g(A,x,F,d[z],d[z+1]))return!1;return!0};c.polygonContainsPoint=function(A,x,F,C){return g(A,x,F,C.coords[0],C.coords[1])};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(c){function g(F,C,e,q,d){if(null!=q&&null!=d)return v=>{const t=F(v,C);v=F(v,e);return(null==t||t<=d)&&(null==v||v>=q)};if(null!=q)return v=>{v=F(v,e);return null==v||v>=q};if(null!=d)return v=>{v=F(v,C);return null==v||v<=d}}function A(F,C,e,q){if(null!=e&&null!=q&&e===q)return d=>F(d,C)===e;if(null!=e&&null!=q)return d=>{d=F(d,C);return null!=d&&d>=e&&d<=q};if(null!=e)return d=>{d=F(d,C);return null!=d&&d>=e};if(null!=
q)return d=>{d=F(d,C);return null!=d&&d<=q}}function x(){return()=>!1}c.getTimeExtent=async function(F,C){if(!F)return null;const e=C.featureAdapter,{startTimeField:q,endTimeField:d}=F;let v=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;if(q&&d)await C.forEach(z=>{const H=e.getAttribute(z,q);z=e.getAttribute(z,d);null==H||isNaN(H)||(v=Math.min(v,H));null==z||isNaN(z)||(t=Math.max(t,z))});else{const z=q||d;await C.forEach(H=>{H=e.getAttribute(H,z);null==H||isNaN(H)||(v=Math.min(v,H),t=Math.max(t,
H))})}return{start:v,end:t}};c.getTimeOperator=function(F,C,e){if(!C||!F)return null;const {startTimeField:q,endTimeField:d}=F;if(!q&&!d)return null;const {start:v,end:t}=C;if(null===v&&null===t)return null;if(void 0===v&&void 0===t)return x();F=e.getAttributeAsTimestamp?.bind(e)??e.getAttribute.bind(e);return q&&d?g(F,q,d,v,t):A(F,q||d,v,t)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),
function(c,g,A,x,F,C,e,q){function d(r){return r.trim().toLowerCase()}function v(r){const p=new Map;if(!r.fields)return p;const a=!0===r.datesInUnknownTimezone,{timeInfo:u,editFieldsInfo:n}=r;var D=(u?"startField"in u?u.startField:u.startTimeField:"")??"";const L=(u?"endField"in u?u.endField:u.endTimeField:"")??"",f="dateFieldsTimeZone"in r?r.dateFieldsTimeZone??null:r.dateFieldsTimeReference?e.fromTimeReference(r.dateFieldsTimeReference):null,K=n?"timeZone"in n?n.timeZone??f:n.dateFieldsTimeReference?
e.fromTimeReference(n.dateFieldsTimeReference):f??e.utc:null,Q=u?"timeZone"in u?u.timeZone??f:u.timeReference?e.fromTimeReference(u.timeReference):f:null;D=new Map([[d(n?.creationDateField??""),K],[d(n?.editDateField??""),K],[d(D),Q],[d(L),Q]]);for(const {name:T,type:Z}of r.fields)H.has(Z)?p.set(T,e.unknown):"date"!==Z&&"esriFieldTypeDate"!==Z?p.set(T,null):a?p.set(T,e.unknown):(r=D.get(d(T??""))??f,p.set(T,r));return p}const t=new Map;class z{static fromJSON(r){return new z(r.fields,r.timeZoneByFieldName)}static fromLayer(r){return new z(r.fields??
[],v(r))}static fromLayerJSON(r){return new z(r.fields??[],v(r))}constructor(r=[],p){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=r||[];this._timeZoneByFieldName=p?new Map(p):null;r=[];for(const a of this.fields){p=a?.name;const u=C.normalizeFieldName(p)?.toLowerCase()??"";if(p&&u){const n=d(p);this._fieldsMap.set(p,a);this._fieldsMap.set(n,a);this._normalizedFieldsMap.set(u,
a);r.push(`${n}:${a.type}:${this._timeZoneByFieldName?.get(p)}`);C.isDateField(a)?(this.dateFields.push(a),this._dateFieldsSet.add(a)):C.isNumericField(a)&&(this._numericFieldsSet.add(a),this.numericFields.push(a));C.isObjectIDField(a)||C.isGlobalIDField(a)||(a.editable=null==a.editable||!!a.editable,a.nullable=null==a.nullable||!!a.nullable)}}r.sort();this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const r of this.fields)C.isObjectIDField(r)||C.isGlobalIDField(r)||
r.nullable||void 0!==C.getFieldDefaultValue(r)||this._requiredFields.push(r)}return this._requiredFields}equals(r){return this.uid===r?.uid}has(r){return null!=this.get(r)}get(r){if(r){var p=this._fieldsMap.get(r);if(p)return p;(p=this._fieldsMap.get(d(r))??this._normalizedFieldsMap.get(C.normalizeFieldName(r)?.toLowerCase()??""))&&this._fieldsMap.set(r,p);return p}}getTimeZone(r){r=this.get(r&&"string"!==typeof r?r.name:r);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):
"date"===r.type||"esriFieldTypeDate"===r.type?(A.getLogger("esri.layers.support.FieldsIndex").error(new c("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),e.utc):H.has(r.type)?e.unknown:null:null}getLuxonTimeZone(r){const p=this.getTimeZone(r);return p?p===e.unknown?F.UnknownTimeZone.instance:p===e.utc?q.FixedOffsetZone.utcInstance:x.getOrCreateMapValue(t,p,()=>q.IANAZone.create(p)):null}isDateField(r){return this._dateFieldsSet.has(this.get(r))}isTimeOnlyField(r){return C.isTimeOnlyField(this.get(r))}isNumericField(r){return this._numericFieldsSet.has(this.get(r))}normalizeFieldName(r){return this.get(r)?.name??
void 0}toJSON(){return{fields:this.fields.map(r=>g.isSerializable(r)?r.toJSON():r),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const H=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return z})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(c,g,A,x,F,C,e,q,d,v,t,z,H,r,p){function a(U){return u.has(U)?u.get(U):"number"===typeof U?U:1}c.TaskPriority=void 0;(function(U){U.RESOURCE_CONTROLLER_IMMEDIATE="immediate";U.RESOURCE_CONTROLLER="schedule";U.SLIDE="slide";U.STREAM_DATA_LOADER="stream loader";U.ELEVATION_QUERY="elevation query";U.TERRAIN_SURFACE="terrain";U.SURFACE_GEOMETRY_UPDATES="surface geometry updates";U.LOD_RENDERER="LoD renderer";U.GRAPHICS_CORE="Graphics3D";U.I3S_CONTROLLER="I3S";U.POINT_CLOUD_LAYER="point cloud";
U.FEATURE_TILE_FETCHER="feature fetcher";U.OVERLAY="overlay";U.STAGE="stage";U.GRAPHICS_DECONFLICTOR="graphics deconflictor";U.FILTER_VISIBILITY="Graphics3D filter visibility";U.SCALE_VISIBILITY="Graphics3D scale visibility";U.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";U.POINT_OF_INTEREST_FREQUENT="POI frequent";U.POINT_OF_INTEREST_INFREQUENT="POI infrequent";U.LABELER="labeler";U.FEATURE_QUERY_ENGINE="feature query";U.FEATURE_TILE_TREE="feature tile tree";U.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
U.ELEVATION_ALIGNMENT="elevation alignment";U.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";U.TEXT_TEXTURE_ATLAS="text texture atlas";U.TEXTURE_UNLOAD="texture unload";U.LINE_OF_SIGHT_TOOL="line of sight tool";U.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";U.ELEVATION_PROFILE="elevation profile";U.SNAPPING="snapping";U.SHADOW_ACCUMULATOR="shadow accumulator";U.CLOUDS_GENERATOR="clouds generator";U[U.NONE=0]="NONE";U[U.TEST_PRIO=1]="TEST_PRIO"})(c.TaskPriority||(c.TaskPriority=
{}));const u=new Map([[c.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[c.TaskPriority.RESOURCE_CONTROLLER,4],[c.TaskPriority.SLIDE,0],[c.TaskPriority.STREAM_DATA_LOADER,0],[c.TaskPriority.ELEVATION_QUERY,0],[c.TaskPriority.TERRAIN_SURFACE,1],[c.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[c.TaskPriority.LOD_RENDERER,2],[c.TaskPriority.GRAPHICS_CORE,2],[c.TaskPriority.I3S_CONTROLLER,2],[c.TaskPriority.POINT_CLOUD_LAYER,2],[c.TaskPriority.FEATURE_TILE_FETCHER,2],[c.TaskPriority.OVERLAY,4],[c.TaskPriority.STAGE,
4],[c.TaskPriority.GRAPHICS_DECONFLICTOR,4],[c.TaskPriority.FILTER_VISIBILITY,4],[c.TaskPriority.SCALE_VISIBILITY,4],[c.TaskPriority.FRUSTUM_VISIBILITY,4],[c.TaskPriority.CLOUDS_GENERATOR,4],[c.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[c.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[c.TaskPriority.LABELER,8],[c.TaskPriority.FEATURE_QUERY_ENGINE,8],[c.TaskPriority.FEATURE_TILE_TREE,16],[c.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[c.TaskPriority.ELEVATION_ALIGNMENT,12],[c.TaskPriority.ELEVATION_ALIGNMENT_SCENE,
14],[c.TaskPriority.TEXT_TEXTURE_ATLAS,12],[c.TaskPriority.TEXTURE_UNLOAD,12],[c.TaskPriority.LINE_OF_SIGHT_TOOL,16],[c.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[c.TaskPriority.SNAPPING,0],[c.TaskPriority.SHADOW_ACCUMULATOR,30]]),n=t.Milliseconds(6.5),D=t.Milliseconds(1),L=t.Milliseconds(30),f=t.Milliseconds(1E3/30),K=t.Milliseconds(100);var Q;(function(U){class w{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(k=>k.needsUpdate)}constructor(){this._updating=
v.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new C("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new h;this._state=r.RenderState.INTERACTING;this._tasks=new e;this._runQueue=new e;this._load=0;this._idleStateCallbacks=new e;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=d.watch(()=>H.SCHEDULER_LOG_SLOW_TASKS,k=>this._debug=k,d.initial);for(const k of Object.keys(c.TaskPriority))this.performanceInfo.tasks.set(c.TaskPriority[k],
new C(c.TaskPriority[k]))}destroy(){this._tasks.toArray().forEach(k=>k.remove());this._tasks.clear();F.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(k){this._updatingChanged();k&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(k,y){y=new I(this,k,y);this._tasks.push(y);this._updatingChanged();
this.performanceInfo.tasks.has(k)||this.performanceInfo.tasks.set(k,new C(k));return y}registerIdleStateCallbacks(k,y){const P={idleBegin:k,idleEnd:y};this._idleStateCallbacks.push(P);this.state===r.RenderState.IDLE&&this._idleUpdatesStartFired&&P.idleBegin();const M=this;return{remove:()=>this._removeIdleStateCallbacks(P),set idleBegin(S){M._idleUpdatesStartFired&&(P.idleEnd(),M._state===r.RenderState.IDLE&&S());P.idleBegin=S},set idleEnd(S){P.idleEnd=S}}}get load(){return this._load}set state(k){this._state!==
k&&(this._state=k,this.state!==r.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(y=>y.idleEnd())))}get state(){return this._state}updateBudget(k){++this._frameNumber;let y=n,P=k.frameDuration,M=D;switch(this.state){case r.RenderState.IDLE:y=t.Milliseconds(0);P=t.Milliseconds(Math.max(K,k.frameDuration));M=L;break;case r.RenderState.INTERACTING:P=t.Milliseconds(Math.max(f,k.frameDuration))}P=t.Milliseconds(P-k.elapsedFrameTime-y);if(this.state!==
r.RenderState.IDLE&&P<D&&!this._forceTask)return this._forceTask=!0,!1;P=t.Milliseconds(Math.max(P,M));this._budget.reset(P,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case r.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(k=>k.idleBegin()));this._runIdle();break;case r.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}}stopFrame(){this._budget.reset(t.Milliseconds(0),
this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(k){this._idleUpdatesStartFired&&k.idleEnd();this._idleStateCallbacks.removeUnordered(k)}removeTask(k){this._tasks.removeUnordered(k);this._runQueue.removeUnordered(k);this._updatingChanged()}_updateTask(k){this._tasks.forAll(y=>{y.name===k&&y.setPriority(k)})}_getState(k){if(this._runQueue.some(P=>P.name===k))return c.TaskState.SCHEDULED;let y=c.TaskState.IDLE;this._tasks.forAll(P=>{P.name===k&&P.needsUpdate&&(1>=P.schedulePriority?
y=c.TaskState.READY:y!==c.TaskState.READY&&(y=c.TaskState.WAITING))});return y}_getRuntime(k){let y=0;this._tasks.forAll(P=>{P.name===k&&(y+=P.runtime)});return y}_resetRuntimes(){this._tasks.forAll(k=>k.runtime=0)}_getRunning(){const k=new Map;this._tasks.forAll(P=>{P.needsUpdate&&k.set(P.name,(k.get(P.name)||0)+1)});if(0===k.size)return null;let y="";k.forEach((P,M)=>{y=1<P?y+` ${P}x ${M}`:y+` ${M}`});return y}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const k=
this._tasks.reduce((y,P)=>P.needsUpdate?++y:y,0);this._load=.9*this._load+k*(1-.9)}_schedule(){this._runQueue.filterInPlace(k=>{if(k.needsUpdate)return!0;k.schedulePriority=k.basePriority;return!1});for(this._tasks.forAll(k=>{0===k.basePriority&&k.needsUpdate&&!this._runQueue.includes(k)&&k.blockFrame!==this._frameNumber&&this._runQueue.unshift(k)});0===this._runQueue.length;){let k=!1;this._tasks.forAll(y=>{if(y.needsUpdate&&0!==y.schedulePriority&&0!==y.basePriority&&y.blockFrame!==this._frameNumber)switch(k=
!0,y.schedulePriority){case 1:y.schedulePriority=0;this._runQueue.push(y);break;default:--y.schedulePriority}});if(!k)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const k=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var y=this._budget.now();const P=this._runQueue.pop();this._budget.resetProgress();try{P.task.runTask(this._budget)===p.Yield&&(P.blockFrame=this._frameNumber)}catch(M){x.getLogger("esri.views.support.Scheduler").error(`Exception in task "${P.name}"`,
M),P.blockFrame=this._frameNumber}!this._budget.hasProgressed&&P.blockFrame!==this._frameNumber&&P.needsUpdate&&(P.blockFrame=this._frameNumber);P.schedulePriority=P.basePriority;y=this._budget.now()-y;P.runtime+=y;this._frameTaskTimes.set(P.priority,this._frameTaskTimes.get(P.priority)+y);if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-k);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-k)}_startFrameTaskTimes(){for(const k of Object.keys(c.TaskPriority))this._frameTaskTimes.set(c.TaskPriority[k],
0)}_recordFrameTaskTimes(k){this._frameTaskTimes.forEach((y,P)=>this.performanceInfo.tasks.get(P).record(y));this.performanceInfo.total.record(k)}get test(){}}U.Scheduler=w;class I{get task(){return this._task.value}get updating(){return this._queue.running}constructor(k,y,P){this._scheduler=k;this.name=y;this.runtime=this.blockFrame=0;this._queue=new z.PromiseQueue;this._handles=new g;this.schedulePriority=this._basePriority=a(y);this._task=v.signal(null!=P?P:this._queue);this._handles.add(d.when(()=>
this.task.running,M=>k.taskRunningChanged(M)))}remove(){this.processQueue(T);this._scheduler.removeTask(this);this.schedule=W.schedule;this.reschedule=W.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(k){if(this.name!==k){this.name=k;k=a(k);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=k;this._basePriority=k}}get priority(){return this.name}set priority(k){this.setPriority(k)}get needsUpdate(){return this.updating||this.task.running}schedule(k,
y,P){return this._queue.push(k,y,P)}reschedule(k,y,P){return this._queue.unshift(k,y,P)}processQueue(k){return this._queue.runTask(k)}}class h{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=r.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(k){if(this.done)return!1;!0===k()&&this.madeProgress();return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=
this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(k){this._enabled=k}reset(k,y){this._begin=this.now();this._budget=k;this._state=y;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._done=this._progressed=!1}get hasProgressed(){return this._progressed}}U.Budget=h})(Q||={});c.TaskState=void 0;(function(U){U.SCHEDULED=
"s";U.READY="r";U.WAITING="w";U.IDLE="i"})(c.TaskState||(c.TaskState={}));const T=(()=>{const U=new Q.Budget;U.enabled=!1;return U})();class Z{remove(){}processQueue(){}schedule(U,w,I){try{if(q.isAborted(w)){const h=q.createAbortError();return I?Promise.resolve(I(h)):Promise.reject(h)}return q.when(U(T))}catch(h){return Promise.reject(h)}}reschedule(U,w,I){return this.schedule(U,w,I)}}const W=new Z;c.ImmediateTask=W;c.getTaskPriority=a;c.newScheduler=function(){return new Q.Scheduler};c.noBudget=
T;c.taskPriorities=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(c,g,A,x){class F{constructor(C,e){this._observable=new x.SimpleObservable;this._value=C;this._equalityFunction=e}get value(){A.trackAccess(this._observable);return this._value}set value(C){this._equalityFunction(C,this._value)||(this._value=C,this._observable.notify())}mutate(C){C(this._value);
this._observable.notify()}}c.signal=function(C,e=g.equalsShallow){return new F(C,e)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(c,g,A,x){class F{constructor(){this._tasks=[];this._runningTasks=A.signal(0)}get length(){return this._tasks.length}get running(){return 0<this._runningTasks.value}destroy(){this.cancelAll()}runTask(e){if(0===
this.length)return x.Yield;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,q,d){++this._runningTasks.value;return(new Promise((v,t)=>this._tasks.push(new C(v,t,e,q,d)))).finally(()=>--this._runningTasks.value)}unshift(e,q,d){++this._runningTasks.value;return(new Promise((v,t)=>this._tasks.unshift(new C(v,t,e,q,d)))).finally(()=>--this._runningTasks.value)}_process(e){if(0===this._tasks.length)return!1;const q=this._tasks.shift();try{const d=g.isAborted(q.signal);if(d&&!q.abortCallback)q.reject(g.createAbortError());
else{const v=d?q.abortCallback?.(g.createAbortError()):q.callback(e);g.isPromiseLike(v)?v.then(q.resolve,q.reject):q.resolve(v)}}catch(d){q.reject(d)}return!0}cancelAll(){const e=g.createAbortError();for(const q of this._tasks)if(q.abortCallback){const d=q.abortCallback(e);q.resolve(d)}else q.reject(e);this._tasks.length=0}}class C{constructor(e,q,d,v,t){this.resolve=e;this.reject=q;this.callback=d;this.signal=v;this.abortCallback=t}}c.PromiseQueue=F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/views/support/Yield":function(){define(["exports"],function(c){const g=Symbol("Yield");c.Yield=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(c,g,A,x,F,C,e){g=class extends g{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=
this.SCHEDULER_LOG_SLOW_TASKS=!1}};c.__decorate([A.property()],g.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);c.__decorate([A.property()],g.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);g=c.__decorate([e.subclass("esri.views.support.debugFlags")],g);return new g})},"esri/views/support/RenderState":function(){define(["exports"],function(c){c.RenderState=void 0;var g=c.RenderState||(c.RenderState={});g[g.ANIMATING=0]="ANIMATING";g[g.INTERACTING=1]="INTERACTING";g[g.IDLE=2]=
"IDLE";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports","../../../../core/date","../../../../core/number","../../../support/fieldUtils"],function(c,g,A,x){function*F(L,f,K){let Q=0;for(;Q<=L.length;){var T=L.indexOf(f,Q);T=L.substring(Q,-1<T?T:void 0);Q+=T.length+f.length;if(!K||T.trim())yield T}}function C(L){const f=L.includes("\r\n")?"\r\n":"\n";return F(L,f,!0)}function e(L,f){return F(L,f,!1)}function*q(L,f,K,
Q=()=>Object.create(null)){var T=C(L);T.next();var Z="";L="";let W=0,U=Q(),w=0;a:for(const I of T){T=e(I,K);for(const h of T)if(Z+=L+h,L="",W+=t(h),0===W%2){if(0<W)if(Z=r.exec(Z))U[f[w]]=Z[1].replaceAll(p,'"'),w++;else{U=Q();w=0;Z="";W=0;continue a}else U[f[w]]=Z,w++;Z="";W=0}else L=K;0===W?(yield U,U=Q(),w=0):L="\n"}}function d(L,f){L=v(L,f).filter(K=>null!=K);f=L.map(K=>x.normalizeFieldName(K));for(let K=f.length-1;0<=K;K--)f[K]||(f.splice(K,1),L.splice(K,1));return{names:f,aliases:L}}function v(L,
f){if(!L?.length)return[];const K=[];var Q="";let T="",Z=0;L=e(L,f);for(const W of L)Q+=T+W,T="",Z+=t(W),0===Z%2?(0<Z?(Q=r.exec(Q))&&K.push(Q[1].replaceAll(p,'"')):K.push(Q),Q="",Z=0):T=f;return K}function t(L){let f=0,K;for(K=L.indexOf('"',0);0<=K;)f++,K=L.indexOf('"',K+1);return f}function z(L,f,K){f=x.normalizeFieldName(f)?.toLowerCase();K=x.normalizeFieldName(K)?.toLowerCase();const Q=L.map(T=>T.toLowerCase());f=f?L[Q.indexOf(f)]:null;K=K?L[Q.indexOf(K)]:null;return{longitudeFieldName:f||L[Q.indexOf(D.find(T=>
Q.includes(T)))],latitudeFieldName:K||L[Q.indexOf(n.find(T=>Q.includes(T)))]}}function H(L){if(!L.length)return"string";const f=/[^+\-.,0-9]/;return L.map(K=>{if(""!==K){if(!f.test(K)){let Q=u(K);if(!isNaN(Q))return/[.,]/.test(K)||!Number.isInteger(Q)||214783647<Q||-214783648>Q?"double":"integer";if(K.includes("E"))if(Q=Number(K),Number.isNaN(Q)){if(K.includes(",")&&(K=K.replace(",","."),Q=Number(K),!Number.isNaN(Q)))return"double"}else return"double"}return g.isDateString(K)?"date":"string"}}).reduce((K,
Q)=>{if(void 0===K)return Q;if(void 0===Q)return K;if(K===Q)return Q;if("string"===K||"string"===Q)return"string";if("double"===K||"double"===Q)return"double"})}const r=/^\s*"([\S\s]*)"\s*$/,p=/""/g,a=[","," ",";","|","\t"],u=function(){const L=A._parseInfo(),f=new RegExp("^"+L.regexp+"$"),K=new RegExp("["+L.group+"\\s\\xa0]","g"),Q=L.factor;return T=>{T=f.exec(T);L.factor=Q;if(!T)return NaN;let Z=T[1];if(!T[1]){if(!T[2])return NaN;Z=T[2];L.factor*=-1}Z=Z.replace(K,"").replace(L.decimal,".");return+Z*
L.factor}}(),n="lat latitude latitude83 latdecdeg lat_dd y ycenter point_y".split(" "),D="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point_x".split(" ");c.extractFieldNamesAndAliasesFromRow=d;c.inferDelimiterAndLocationInfo=function(L,f,K){L=L.trim();f=f?.trim();var Q=[],T=Array.from(new Set([K?.delimiter,...a])).filter(Z=>null!=Z);for(const Z of T){T=v(L,Z).length;const W=v(f,Z).length??T;1<T&&Q.push({weight:Math.min(T,W),delimiter:Z})}f=Q.sort(({weight:Z},{weight:W})=>W-Z).map(({delimiter:Z})=>
Z);for(const Z of f)if(Q=d(L,Z).names,Q=z(Q,K?.longitudeField,K?.latitudeField),Q.longitudeFieldName&&Q.latitudeFieldName)return{delimiter:Z,locationInfo:Q};return{delimiter:f[0],locationInfo:null}};c.inferFieldType=H;c.inferFields=function(L,f,K,Q,T){const Z=[];f=q(L,K,f);L=[];for(var W of f){if(10===L.length)break;L.push(W)}for(W=0;W<K.length;W++){const w=K[W];f=Q[W];if(w===T.longitudeFieldName||w===T.latitudeFieldName)Z.push({name:w,type:"esriFieldTypeDouble",alias:f});else{var U=L.map(I=>I[w]);
switch(H(U)){case "integer":U="esriFieldTypeInteger";break;case "double":U="esriFieldTypeDouble";break;case "date":U="esriFieldTypeDate";break;default:U="esriFieldTypeString"}Z.push({name:w,type:U,alias:f,length:x.getFieldDefaultLength(U)})}}return Z};c.parseNumber=u;c.parseRows=q;c.readRowParts=e;c.readRows=C;c.splitSingleRow=v;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(c,g,A){function x(t=
A.getLocale()){t=t.toLowerCase();let z=t in q;if(!z){const a=t.split("-");1<a.length&&a[0]in q&&(t=a[0],z=!0);z||(t="en")}const [H,r,p="#,##0.###"]=q[t];return{decimal:H,group:r,pattern:p}}function F(t){t=t||{};var z=x(t.locale);const H=t.pattern||z.pattern,r=z.group,p=z.decimal;let a=1;if(H.includes("%"))a/=100;else if(H.includes("\u2030"))a/=1E3;else if(H.includes("\u00a4"))throw Error("currency notation not supported");z=H.split(";");1===z.length&&z.push("-"+z[0]);return{regexp:v(z,u=>{u="(?:"+
g.escapeRegExpString(u,".")+")";return u.replace(d,n=>{const D={signed:!1,separator:t.strict?r:[r,""],fractional:t.fractional,decimal:p,exponent:!1};n=n.split(".");let L=t.places;1===n.length&&1!==a&&(n[1]="###");1===n.length||0===L?D.fractional=!1:(void 0===L&&(L=t.pattern?n[1].lastIndexOf("0")+1:Infinity),L&&null==t.fractional&&(D.fractional=!0),!t.places&&+L<n[1].length&&(L+=","+n[1].length),D.places=L);n=n[0].split(",");1<n.length&&(D.groupSize=n.pop().length,1<n.length&&(D.groupSize2=n.pop().length));
return"("+C(D)+")"})},!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:p,factor:a}}function C(t){t=t||{};"places"in t||(t.places=Infinity);"string"!==typeof t.decimal&&(t.decimal=".");"fractional"in t&&!String(t.places).startsWith("0")||(t.fractional=[!0,!1]);"exponent"in t||(t.exponent=[!0,!1]);"eSigned"in t||(t.eSigned=[!0,!1]);var z=e(t);const H=v(t.fractional,p=>{let a="";p&&0!==t.places&&(a="\\"+t.decimal,a=Infinity===t.places?"(?:"+a+"\\d+)?":a+("\\d{"+t.places+"}"));return a},!0),r=
v(t.exponent,p=>p?"([eE]"+e({signed:t.eSigned})+")":"");z+=H;H&&(z="(?:(?:"+z+")|(?:"+H+"))");return z+r}function e(t){t=t||{};"signed"in t||(t.signed=[!0,!1]);"separator"in t?"groupSize"in t||(t.groupSize=3):t.separator="";const z=v(t.signed,r=>r?"[-+]":"",!0),H=v(t.separator,r=>{if(!r)return"(?:\\d+)";r=g.escapeRegExpString(r);" "===r?r="\\s":"\u00a0"===r&&(r="\\s\\xa0");const p=t.groupSize,a=t.groupSize2;return a?(r="(?:0|[1-9]\\d{0,"+(a-1)+"}(?:["+r+"]\\d{"+a+"})*["+r+"]\\d{"+p+"})",0<p-a?"(?:"+
r+"|(?:0|[1-9]\\d{0,"+(p-1)+"}))":r):"(?:0|[1-9]\\d{0,"+(p-1)+"}(?:["+r+"]\\d{"+p+"})*)"},!0);return z+H}const q={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".",
"\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},d=/[#0,]*[#0](?:\.0*#*)?/,v=(t,z,H)=>{if(!Array.isArray(t))return z(t);const r=[];for(let p=0;p<t.length;p++)r.push(z(t[p]));t=r.join("|");return"("+(H?"?:":"")+t+")"};
c._parseInfo=F;c.format=function(t,z){z={...z};var H=x(z.locale);z.customs=H;H=z.pattern||H.pattern;if(isNaN(t)||Infinity===Math.abs(t))return null;var r=t;var p=z||{};var a=p.customs.group,u=p.customs.decimal;H=H.split(";");t=H[0];z=H[0>r?1:0]||"-"+t;if(z.includes("%"))r*=100;else if(z.includes("\u2030"))r*=1E3;else{if(z.includes("\u00a4"))throw Error("currency notation not supported");if(z.includes("E"))throw Error("exponential notation not supported");}H=d;var n=t.match(H);if(!n)throw Error("unable to find a number expression in pattern: "+
z);!1===p.fractional&&(p.places=0);t=z.replace;n=n[0];p=p={decimal:u,group:a,places:p.places,round:p.round};!0===p.places&&(p.places=0);Infinity===p.places&&(p.places=6);u=n.split(".");var D="string"===typeof p.places&&p.places.indexOf(",");n=p.places;D?n=p.places.substring(D+1):0<=+n||(n=(u[1]||[]).length);0>p.round||(r=Number(r.toFixed(Number(n))));a=String(Math.abs(r)).split(".");r=a[1]||"";u[1]||p.places?(D&&(p.places=p.places.substring(0,D)),D=void 0!==p.places?p.places:u[1]&&u[1].lastIndexOf("0")+
1,+D>r.length&&(a[1]=r.padEnd(Number(D),"0")),+n<r.length&&(a[1]=r.substr(0,Number(n)))):a[1]&&a.pop();r=u[0].replace(",","");n=r.indexOf("0");-1!==n&&(n=r.length-n,n>a[0].length&&(a[0]=a[0].padStart(n,"0")),r.includes("#")||(a[0]=a[0].substr(a[0].length-n)));r=u[0].lastIndexOf(",");let L;if(-1!==r){var f=u[0].length-r-1;u=u[0].substr(0,r);r=u.lastIndexOf(",");-1!==r&&(L=u.length-r-1)}u=[];for(r=a[0];r;)n=r.length-f,u.push(0<n?r.substr(n):r),r=0<n?r.slice(0,n):"",L&&(f=L,L=void 0);a[0]=u.reverse().join(p.group||
",");f=a.join(p.decimal||".");return t.call(z,H,f)};c.getCustoms=x;c.parse=function(t,z){z=F(z);t=(new RegExp("^"+z.regexp+"$")).exec(t);if(!t)return NaN;let H=t[1];if(!t[1]){if(!t[2])return NaN;H=t[2];z.factor*=-1}H=H.replaceAll(new RegExp("["+z.group+"\\s\\xa0]","g"),"").replace(z.decimal,".");return Number(H)*z.factor};c.regexp=function(t){return F(t).regexp};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(c,g,A,x,F){function C(d){return e.test(d)?`.${d}`:`["${d}"]`}const e=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let q=1;c.createCapabilities=function(d,v){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:d},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,
supportsValidateSql:!1,supportsAdd:v,supportsDelete:v,supportsEditing:v,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:v,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:x.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:v,
supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}};c.createDefaultAttributesFunction=function(d,v){if(g("esri-csp-restrictions"))return()=>({[v]:null,...d});try{let t=`this${C(v)} = null;`;for(const H in d){const r=C(H);t+=`this${r} = ${JSON.stringify(d[H])};`}const z=
(new Function(`\n      return class AttributesClass$${q++} {\n        constructor() {\n          ${t};\n        }\n      }\n    `))();return()=>new z}catch(t){return()=>({[v]:null,...d})}};c.createDefaultTemplate=function(d={}){return[{name:"New Feature",description:"",prototype:{attributes:A.clone(d)}}]};c.createDrawingInfo=function(d){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===d||"esriGeometryMultipoint"===d?F.defaultPointSymbolJSON:"esriGeometryPolyline"===d?F.defaultPolylineSymbolJSON:
F.defaultPolygonSymbolJSON}}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(c){const g=[252,146,31,255],A={type:"esriSMS",style:"esriSMSCircle",size:6,color:g,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},x={type:"esriSLS",style:"esriSLSSolid",width:.75,color:g};c.defaultColor=g;c.defaultOutlineColor=[153,153,153,255];c.defaultPointSymbolJSON=A;c.defaultPolygonSymbolJSON=
{type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};c.defaultPolylineSymbolJSON=x;c.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};c.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,
size:10.5};c.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};c.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../geometry ../../../../request ../../../../core/asyncUtils ../../../../core/date ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../time/timeZoneUtils ../../../../geometry/SpatialReference".split(" "),function(c,
g,A,x,F,C,e,q,d,v,t,z,H,r,p,a,u,n,D,L,f,K,Q){function T(h,k){var y=k.parsingOptions||{};const P={delimiter:y.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:y.latitudeField,longitudeFieldName:y.longitudeField}},M=P.layerDefinition={name:q.getFilename(k.url,W)||"csv",dateFieldsTimeReference:{timeZoneIANA:K.utc},drawingInfo:Z,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:y.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,
ymax:Number.NEGATIVE_INFINITY,spatialReference:y.spatialReference||{wkid:4326}}};var S=n.readRows(h);k=S.next().value?.trim();S=S.next().value?.trim();if(!k)throw new F("csv-layer:empty-csv","CSV is empty",{csv:h});const {delimiter:Y,locationInfo:da}=n.inferDelimiterAndLocationInfo(k,S,y);if(!Y)throw new F("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:k,secondLine:S,parsingOptions:y});if(!da)throw new F("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",
{firstLine:k,secondLine:S,parsingOptions:y});P.locationInfo=da;P.delimiter=Y;const {names:ha,aliases:ma}=n.extractFieldNamesAndAliasesFromRow(k,Y);h=n.inferFields(h,P.delimiter,ha,ma,P.locationInfo);if(y.fields?.length){y=new L(y.fields);for(var pa of h)(k=y.get(pa.name))&&Object.assign(pa,k)}h.some(sa=>"esriFieldTypeOID"===sa.type?(M.objectIdField=sa.name,!0):!1)||(pa={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},M.objectIdField=pa.name,h.unshift(pa));M.fields=
h;y=new L(M.fields);P.locationInfo&&(P.locationInfo.latitudeFieldName=y.get(P.locationInfo.latitudeFieldName).name,P.locationInfo.longitudeFieldName=y.get(P.locationInfo.longitudeFieldName).name);M.timeInfo&&(pa=M.timeInfo,pa.startTimeField&&((h=y.get(pa.startTimeField))?(pa.startTimeField=h.name,h.type="esriFieldTypeDate"):pa.startTimeField=null),pa.endTimeField&&((h=y.get(pa.endTimeField))?(pa.endTimeField=h.name,h.type="esriFieldTypeDate"):pa.endTimeField=null),pa.trackIdField&&(y=y.get(pa.trackIdField),
pa.trackIdField=y?y.name:null),pa.startTimeField||pa.endTimeField||(M.timeInfo=null));return P}const Z=D.createDrawingInfo("esriGeometryPoint"),W=["csv"],U=[0,0];class w{constructor(h,k){this.x=h;this.y=k}}class I{constructor(){this._queryEngine=null;this._snapshotFeatures=async h=>{h=await this._fetch(h);return this._createFeatures(h)}}destroy(){this._queryEngine?.destroy();this._queryEngine=null}async load(h,k={}){this._loadOptions=h;[k]=await Promise.all([this._fetch(k.signal),this._checkProjection(h?.parsingOptions?.spatialReference)]);
h=T(k,h);this._locationInfo=h.locationInfo;this._delimiter=h.delimiter;this._queryEngine=this._createQueryEngine(h);k=await this._createFeatures(k);this._queryEngine.featureStore.addMany(k);const {fullExtent:y,timeExtent:P}=await this._queryEngine.fetchRecomputedExtents();h.layerDefinition.extent=y;if(P){const {start:M,end:S}=P;h.layerDefinition.timeInfo.timeExtent=[M,S]}return h}async applyEdits(){throw new F("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");}async queryFeatures(h=
{},k={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(h,k.signal)}async queryFeatureCount(h={},k={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(h,k.signal)}async queryObjectIds(h={},k={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(h,k.signal)}async queryExtent(h={},k={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(h,k.signal)}async querySnapping(h,k={}){await this._waitSnapshotComplete();
return this._queryEngine.executeQueryForSnapping(h,k.signal)}async refresh(h){this._loadOptions.customParameters=h;this._snapshotTask?.abort();this._snapshotTask=A.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(P=>{this._queryEngine.featureStore.clear();P&&this._queryEngine.featureStore.addMany(P)},P=>{this._queryEngine.featureStore.clear();e.isAbortError(P)||C.getLogger("esri.layers.CSVLayer").error(new F("csv-layer:refresh","An error occurred during refresh",{error:P}))});await this._waitSnapshotComplete();
const {fullExtent:k,timeExtent:y}=await this._queryEngine.fetchRecomputedExtents();return{extent:k,timeExtent:y}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(h){const {url:k,customParameters:y}=this._loadOptions;if(!k)throw new F("csv-layer:invalid-source","url not defined");const P=q.urlToObject(k);return(await g(P.path,{query:{...P.query,...y},responseType:"text",signal:h})).data}_createQueryEngine(h){const {objectIdField:k,
fields:y,extent:P,timeInfo:M}=h.layerDefinition;h=new p({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new u.QueryEngine({fieldsIndex:L.fromLayerJSON({fields:y,dateFieldsTimeReference:{timeZoneIANA:K.utc}}),geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:M,objectIdField:k,spatialReference:P.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:h})}async _createFeatures(h){const {latitudeFieldName:k,longitudeFieldName:y}=this._locationInfo,{objectIdField:P,fieldsIndex:M,
spatialReference:S}=this._queryEngine;let Y=[];const da=[];var ha=M.fields.filter(va=>va.name!==P).map(va=>va.name),ma=0,pa={};for(const va of M.fields)if("esriFieldTypeOID"!==va.type&&"esriFieldTypeGlobalID"!==va.type){const Ea=f.getFieldDefaultValue(va);void 0!==Ea&&(pa[va.name]=Ea)}h=n.parseRows(h,ha,this._delimiter,D.createDefaultAttributesFunction(pa,P));for(var sa of h)if(h=this._parseCoordinateValue(sa[k]),ha=this._parseCoordinateValue(sa[y]),null!=ha&&null!=h&&!isNaN(h)&&!isNaN(ha)){sa[k]=
h;sa[y]=ha;for(var qa in sa)qa!==k&&qa!==y&&(M.isDateField(qa)?sa[qa]=x.parseDate(sa[qa]):M.isNumericField(qa)&&(pa=n.parseNumber(sa[qa]),isNaN(pa)?sa[qa]=null:sa[qa]=pa));sa[P]=ma;ma++;Y.push(new w(ha,h));da.push(sa)}if(!t.equals({wkid:4326},S))if(t.isWebMercator(S))for(const va of Y)[va.x,va.y]=z.lngLatToXY(va.x,va.y,U);else Y=d.projectMany(v.jsonAdapter,Y,Q.WGS84,S,null,null);ma=[];for(sa=0;sa<Y.length;sa++){const {x:va,y:Ea}=Y[sa];qa=da[sa];qa[P]=sa+1;ma.push(new H.OptimizedFeature(new r([],[va,
Ea]),qa,null,qa[P]))}return ma}_parseCoordinateValue(h){if(null==h||""===h)return null;let k=n.parseNumber(h);if(isNaN(k)||181<Math.abs(k))k=parseFloat(h);return k}async _checkProjection(h){try{await a.checkProjectionSupport(t.wgs84,h)}catch{throw new F("csv-layer:projection-not-supported","Projection not supported");}}}return I});