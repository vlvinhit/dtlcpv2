// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/date","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(r,f,t,p,g){function m(a){return new u(a)}async function v(){null==h&&(h=await new Promise((a,c)=>r(["../../../../geometry/geometryEngineJSON"],a,c)));return h}class w{constructor(){this.description=this.code=null}}class u{constructor(a){this.error=new w;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=a}}class x{constructor(a){this.globalId=
null;this.success=!0;this.objectId=this.uniqueId=a}}const n=new Set;let h;f.createFeatureEditErrorResult=m;f.createFeatureEditSuccessResult=function(a){return new x(a)};f.loadGeometryEngineForSimplify=async function(a,c){!p.isValid(a)||"esriGeometryPolygon"!==c&&"esriGeometryPolyline"!==c||await v()};f.mixAttributes=function(a,c,q,y=!1){n.clear();for(const k in q){const d=a.get(k);if(!d)continue;var e=d,b=q[k];let l=b;g.isNumericField(e)&&"string"===typeof b?l=parseFloat(b):g.isStringField(e)&&null!=
b&&"string"!==typeof b?l=String(b):g.isDateField(e)&&"string"===typeof b&&(l=t.parseDate(b));e=g.sanitizeNullFieldValue(l);n.add(d.name);if(d&&(y||d.editable)){if(b=g.validateFieldValue(d,e))return m(g.validationErrorToString(b,d,e));c[d.name]=e}}for(const k of a?.requiredFields??[])if(!n.has(k.name))return m(`missing required field "${k.name}"`);return null};f.simplify=function(a,c){if(!a||!p.isValid(c))return a;if("rings"in a||"paths"in a){if(null==h)throw new TypeError("geometry engine not loaded");
return h.simplify(c,a)}return a};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});