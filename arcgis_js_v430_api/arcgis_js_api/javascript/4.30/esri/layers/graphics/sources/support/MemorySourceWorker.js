// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(c,g,y,w,F,B,f,p,d,r){function z(A,J){return A?J?4:3:J?3:2}function D(A,J,M,V){if(A){if(M)return J&&V?E:Oa;if(J&&V)return k}else if(J&&V)return Oa;return Ta}function I({scale:A,
translate:J},M){return Math.round((M-J[0])/A[0])}function t({scale:A,translate:J},M){return Math.round((J[1]-M)/A[1])}function q({scale:A,translate:J},M,V){return M*A[V]+J[V]}function a(A){A=A.coords;return{x:A[0],y:A[1]}}function u(A,J){A.coords[0]=J.x;A.coords[1]=J.y;return A}function n(A){A=A.coords;return{x:A[0],y:A[1],z:A[2]}}function C(A,J){A.coords[0]=J.x;A.coords[1]=J.y;A.coords[2]=J.z;return A}function P(A){A=A.coords;return{x:A[0],y:A[1],m:A[2]}}function e(A,J){A.coords[0]=J.x;A.coords[1]=
J.y;A.coords[2]=J.m;return A}function K(A){A=A.coords;return{x:A[0],y:A[1],z:A[2],m:A[3]}}function Q(A,J){A.coords[0]=J.x;A.coords[1]=J.y;A.coords[2]=J.z;A.coords[3]=J.m;return A}function S(A,J){return A&&J?Q:A?C:J?e:u}function ba(A,J,M,V,Z){M=S(M,V);for(const {geometry:ca,attributes:fa}of J)J=null!=ca?M(new r,ca):null,A.push(new p.OptimizedFeature(J,fa,null,Z?fa[Z]:void 0));return A}function W(A,J,M=S(null!=J.z,null!=J.m)){return M(A,J)}function U(A,J,M,V){for(const {geometry:Z,attributes:ca}of J)A.push({attributes:ca,
geometry:null!=Z?v(Z,M,V):null});return A}function v(A,J,M){if(null==A)return null;const V=z(J,M),Z=[];for(let ca=0;ca<A.coords.length;ca+=V){const fa=[];for(let la=0;la<V;la++)fa.push(A.coords[ca+la]);Z.push(fa)}return J?M?{points:Z,hasZ:J,hasM:M}:{points:Z,hasZ:J}:M?{points:Z,hasM:M}:{points:Z}}function H(A,J,M,V,Z){M=z(M,V);for(const {geometry:ca,attributes:fa}of J)J=null!=ca?m(new r,ca,M):null,A.push(new p.OptimizedFeature(J,fa,null,Z?fa[Z]:void 0));return A}function m(A,J,M=z(J.hasZ,J.hasM)){A.lengths[0]=
J.points.length;const V=A.coords;let Z=0;for(const ca of J.points)for(J=0;J<M;J++)V[Z++]=ca[J];return A}function h(A,J,M){if(!A)return null;const V=z(J,M),{coords:Z,lengths:ca}=A;A=[];let fa=0;for(const la of ca){const ma=[];for(let ua=0;ua<la;ua++){const pa=[];for(let sa=0;sa<V;sa++)pa.push(Z[fa++]);ma.push(pa)}A.push(ma)}return J?M?{paths:A,hasZ:J,hasM:M}:{paths:A,hasZ:J}:M?{paths:A,hasM:M}:{paths:A}}function x(A,J,M,V,Z){M=z(M,V);for(const {geometry:ca,attributes:fa,centroid:la}of J)J=null!=ca?
N(new r,ca,M):null,V=null!=la?W(new r,la):null,A.push(new p.OptimizedFeature(J,fa,V,Z?fa[Z]:void 0));return A}function N(A,J,M=z(J.hasZ,J.hasM)){const {lengths:V,coords:Z}=A;let ca=0;for(const fa of J.paths){for(const la of fa)for(J=0;J<M;J++)Z[ca++]=la[J];V.push(fa.length)}return A}function L(A,J,M){if(!A)return null;const V=z(J,M),{coords:Z,lengths:ca}=A;A=[];let fa=0;for(const la of ca){const ma=[];for(let ua=0;ua<la;ua++){const pa=[];for(let sa=0;sa<V;sa++)pa.push(Z[fa++]);ma.push(pa)}A.push(ma)}return J?
M?{rings:A,hasZ:J,hasM:M}:{rings:A,hasZ:J}:M?{rings:A,hasM:M}:{rings:A}}function T(A,J,M=J.hasZ,V=J.hasM){return X(A,J.rings,M,V)}function X(A,J,M,V){M=z(M,V);const {lengths:Z,coords:ca}=A;V=0;Ea(A);for(const fa of J){for(const la of fa)for(J=0;J<M;J++)ca[V++]=la[J];Z.push(fa.length)}return A}function da(A,J,M,V,Z,ca){Da(A);if(!M){for(const fa of J)A.push(new p.OptimizedFeature(null,fa.attributes,null,ca?fa.attributes[ca]:void 0));return A}switch(M){case "esriGeometryPoint":return ba(A,J,V,Z,ca);
case "esriGeometryMultipoint":return H(A,J,V,Z,ca);case "esriGeometryPolyline":return x(A,J,V,Z,ca);case "esriGeometryPolygon":for(const {geometry:fa,centroid:la,attributes:ma}of J)J=null!=fa?T(new r,fa,V,Z):null,M=ca?ma[ca]:void 0,null!=la?A.push(new p.OptimizedFeature(J,ma,u(new r,la),M)):A.push(new p.OptimizedFeature(J,ma,null,M));break;default:Pa().error("convertToFeatureSet:unknown-geometry",new g(`Unable to parse unknown geometry type '${M}'`)),Da(A)}return A}function ia(A,J,M,V){A=A&&("coords"in
A?A:A.geometry);if(null==A)return null;switch(J){case "esriGeometryPoint":return J=a,M&&V?J=K:M?J=n:V&&(J=P),J(A);case "esriGeometryMultipoint":return v(A,M,V);case "esriGeometryPolyline":return h(A,M,V);case "esriGeometryPolygon":return L(A,M,V);default:return Pa().error("convertToGeometry:unknown-geometry",new g(`Unable to parse unknown geometry type '${J}'`)),null}}function na(A,J,M,V,Z){Da(A);if(null==M){for(const fa of J)A.push({attributes:fa.attributes});return A}switch(M){case "esriGeometryPoint":M=
a;V&&Z?M=K:V?M=n:Z&&(M=P);for(var ca of J){const {geometry:fa,attributes:la}=ca;V=null!=fa?M(fa):null;A.push({attributes:la,geometry:V})}break;case "esriGeometryMultipoint":return U(A,J,V,Z);case "esriGeometryPolyline":for(const {geometry:fa,attributes:la}of J)A.push({attributes:la,geometry:null!=fa?h(fa,V,Z):null});break;case "esriGeometryPolygon":for(const {geometry:fa,attributes:la,centroid:ma}of J)ca=null!=fa?L(fa,V,Z):null,null!=ma?(J=a(ma),A.push({attributes:la,centroid:J,geometry:ca})):A.push({attributes:la,
geometry:ca});break;default:Pa().error("convertToFeatureSet:unknown-geometry",new g(`Unable to parse unknown geometry type '${M}'`))}return A}function qa(A,J,M,V,Z,ca,fa=M,la=V){Ea(A);if(!J?.coords.length)return null;Z=Sa[Z];const {coords:ma,lengths:ua}=J;J=z(M,V);const pa=z(M&&fa,V&&la);M=D(M,V,fa,la);if(!ua.length)return M(A.coords,ma,0,0,I(ca,ma[0]),t(ca,ma[1])),Ea(A,J,0),A;let sa,Ca=0,xa,Ba=0;for(const Aa of ua){if(Aa<Z)continue;let ya=0;xa=Ba;la=V=I(ca,ma[Ca]);sa=fa=t(ca,ma[Ca+1]);M(A.coords,
ma,xa,Ca,la,sa);ya++;Ca+=J;xa+=pa;for(let Ia=1;Ia<Aa;Ia++,Ca+=J)if(la=I(ca,ma[Ca]),sa=t(ca,ma[Ca+1]),la!==V||sa!==fa)M(A.coords,ma,xa,Ca,la-V,sa-fa),xa+=pa,ya++,V=la,fa=sa;ya>=Z&&(A.lengths.push(ya),Ba=xa)}Da(A.coords,Ba);return A.coords.length?A:null}function va(A,J,M,V,Z,ca,fa){let la=V,ma=0;for(let pa=ca+M;pa<fa;pa+=M){var ua=J[pa];const sa=J[pa+1],Ca=J[fa],xa=J[fa+1];let Ba=J[ca],Aa=J[ca+1],ya=Ca-Ba,Ia=xa-Aa;if(0!==ya||0!==Ia){const Qa=((ua-Ba)*ya+(sa-Aa)*Ia)/(ya*ya+Ia*Ia);1<Qa?(Ba=Ca,Aa=xa):
0<Qa&&(Ba+=ya*Qa,Aa+=Ia*Qa)}ya=ua-Ba;Ia=sa-Aa;ua=ya*ya+Ia*Ia;ua>la&&(ma=pa,la=ua)}la>V&&(ma-ca>M&&va(A,J,M,V,Z,ca,ma),Z(A,J,A.length,ma,J[ma],J[ma+1]),fa-ma>M&&va(A,J,M,V,Z,ma,fa))}function ta(A,J,M,V,Z){const {coords:ca,lengths:fa}=J;M=z(M,V);if(!ca.length)return A!==J&&Ea(A),A;w.assertIsSome(Z);const {originPosition:la,scale:ma,translate:ua}=Z;Z=ja;Z.originPosition=la;V=Z.scale;V[0]=ma[0]??1;V[1]=-(ma[1]??1);V[2]=ma[2]??1;V[3]=ma[3]??1;var pa=Z.translate;pa[0]=ua[0]??0;pa[1]=ua[1]??0;pa[2]=ua[2]??
0;pa[3]=ua[3]??0;if(!fa.length){for(V=0;V<M;++V)A.coords[V]=q(Z,ca[V],V);A!==J&&Ea(A,M,0);return A}pa=0;for(let Ca=0;Ca<fa.length;Ca++){const xa=fa[Ca];A.lengths[Ca]=xa;for(var sa=0;sa<M;++sa)A.coords[pa+sa]=q(Z,ca[pa+sa],sa);sa=A.coords[pa];let Ba=A.coords[pa+1];pa+=M;for(let Aa=1;Aa<xa;Aa++,pa+=M){sa+=ca[pa]*V[0];Ba+=ca[pa+1]*V[1];A.coords[pa]=sa;A.coords[pa+1]=Ba;for(let ya=2;ya<M;++ya)A.coords[pa+ya]=q(Z,ca[pa+ya],ya)}}A!==J&&Ea(A,ca.length,fa.length);return A}function wa(A,J,M,V){let Z=0,ca=
A[V*J],fa=A[V*(J+1)];for(let la=1;la<M;la++){const ma=ca+A[V*(J+la)],ua=fa+A[V*(J+la)+1],pa=(ma-ca)*(ua+fa);ca=ma;fa=ua;Z+=pa}return.5*Z}function Ea(A,J=0,M=0){Da(A.lengths,M);Da(A.coords,J)}function Da(A,J=0){A.length!==J&&(A.length=J)}const Pa=()=>y.getLogger("esri.layers.graphics.featureConversionUtils"),Sa={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},Ta=(A,J,M,V,Z,ca)=>{A[M]=Z;A[M+1]=ca},Oa=(A,J,M,V,Z,ca)=>{A[M]=Z;A[M+1]=ca;
A[M+2]=J[V+2]},k=(A,J,M,V,Z,ca)=>{A[M]=Z;A[M+1]=ca;A[M+2]=J[V+3]},E=(A,J,M,V,Z,ca)=>{A[M]=Z;A[M+1]=ca;A[M+2]=J[V+2];A[M+3]=J[V+3]},Y=[],aa=[],ja={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};c.convertFromFeature=function(A,J,M,V,Z){Y[0]=A;[A]=da(aa,Y,J,M,V,Z);Da(Y);Da(aa);return A};c.convertFromFeatureSet=function(A,J){const M=new d,{hasM:V,hasZ:Z,features:ca,objectIdFieldName:fa,spatialReference:la,geometryType:ma,exceededTransferLimit:ua,transform:pa,fields:sa}=A;sa&&(M.fields=
sa);M.geometryType=ma??null;M.objectIdFieldName=fa??J??null;M.spatialReference=la??null;if(!M.objectIdFieldName)return Pa().error(new g("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),M;ca&&da(M.features,ca,ma,Z,V,M.objectIdFieldName);ua&&(M.exceededTransferLimit=ua);V&&(M.hasM=V);Z&&(M.hasZ=Z);pa&&(M.transform=pa);return M};c.convertFromFeatures=da;c.convertFromGeometry=function(A,J,M){if(null==A)return null;const V=new r;"hasZ"in A&&null==J&&(J=A.hasZ);"hasM"in A&&
null==M&&(M=A.hasM);if(f.isPoint(A))return S(null!=J?J:null!=A.z,null!=M?M:null!=A.m)(V,A);if(f.isPolygon(A))return T(V,A,J,M);if(f.isPolyline(A))return N(V,A,z(J,M));if(f.isMultipoint(A))return m(V,A,z(J,M));Pa().error("convertFromGeometry:unknown-geometry",new g(`Unable to parse unknown geometry type '${A}'`))};c.convertFromMultipoint=m;c.convertFromMultipointFeatures=H;c.convertFromNestedArray=X;c.convertFromPoint=W;c.convertFromPointFeatures=ba;c.convertFromPolygon=T;c.convertFromPolyline=N;c.convertFromPolylineFeatures=
x;c.convertToFeature=function(A,J,M,V){aa[0]=A;na(Y,aa,J,M,V);A=Y[0];Da(Y);Da(aa);return A};c.convertToFeatureSet=function(A){const {objectIdFieldName:J,spatialReference:M,transform:V,fields:Z,hasM:ca,hasZ:fa,features:la,geometryType:ma,exceededTransferLimit:ua,uniqueIdField:pa,queryGeometry:sa,queryGeometryType:Ca}=A;A=na([],la,ma,fa,ca);const xa=ia(sa,Ca,!1,!1);A={features:A,fields:Z,geometryType:ma,objectIdFieldName:J,spatialReference:M,uniqueIdField:pa,queryGeometry:xa};V&&(A.transform=V);ua&&
(A.exceededTransferLimit=ua);ca&&(A.hasM=ca);fa&&(A.hasZ=fa);return A};c.convertToFeatures=na;c.convertToGeometry=ia;c.convertToMultipoint=v;c.convertToMultipointFeatures=U;c.convertToPoint=function(A,J,M){return A?J?M?K(A):n(A):M?P(A):a(A):null};c.convertToPolygon=L;c.convertToPolyline=h;c.generalizeOptimizedGeometry=function(A,J,M,V,Z,ca,fa=M,la=V){Ea(A);if(!J?.coords.length)return null;Z=Sa[Z];const {coords:ma,lengths:ua}=J;J=z(M,V);const pa=z(M&&fa,V&&la);M=D(M,V,fa,la);if(!ua.length)return M(A.coords,
ma,0,0,ma[0],ma[1]),Ea(A,J,0),A;V=0;ca*=ca;for(const sa of ua){if(sa<Z){V+=sa*J;continue}fa=A.coords.length/pa;la=V;const Ca=V+(sa-1)*J;M(A.coords,ma,A.coords.length,la,ma[la],ma[la+1]);va(A.coords,ma,J,ca,M,la,Ca);M(A.coords,ma,A.coords.length,Ca,ma[Ca],ma[Ca+1]);la=A.coords.length/pa-fa;la>=Z?A.lengths.push(la):Da(A.coords,fa*pa);V+=sa*J}return A.coords.length?A:null};c.getBoundsOptimizedGeometry=function(A,J,M,V){if(!J?.coords?.length)return null;M=z(M,V);let Z=V=Number.POSITIVE_INFINITY,ca=Number.NEGATIVE_INFINITY,
fa=Number.NEGATIVE_INFINITY;if(J&&J.coords){J=J.coords;for(let la=0;la<J.length;la+=M){const ma=J[la],ua=J[la+1];V=Math.min(V,ma);ca=Math.max(ca,ma);Z=Math.min(Z,ua);fa=Math.max(fa,ua)}}F.is(A)?F.fromRectValues(A,V,Z,ca,fa):B.fromValues(V,Z,ca,fa,A);return A};c.getQuantizedArea=function(A,J){const {coords:M,lengths:V}=A;let Z=A=0;for(let ca=0;ca<V.length;ca++){const fa=V[ca];Z+=wa(M,A,fa,J);A+=fa}return Math.abs(Z)};c.getQuantizedBoundsOptimizedGeometry=function(A,J,M,V){M=z(M,V);const {lengths:Z,
coords:ca}=J;V=J=Number.POSITIVE_INFINITY;let fa=Number.NEGATIVE_INFINITY,la=Number.NEGATIVE_INFINITY,ma=0;for(const ua of Z){let pa=ca[ma],sa=ca[ma+1];J=Math.min(pa,J);V=Math.min(sa,V);fa=Math.max(pa,fa);la=Math.max(sa,la);ma+=M;for(let Ca=1;Ca<ua;Ca++,ma+=M){const xa=ca[ma],Ba=ca[ma+1];pa+=xa;sa+=Ba;0>xa&&(J=Math.min(J,pa));0<xa&&(fa=Math.max(fa,pa));0>Ba?V=Math.min(V,sa):0<Ba&&(la=Math.max(la,sa))}}A[0]=J;A[1]=V;A[2]=fa;A[3]=la;return A};c.getSignedQuantizedRingArea=wa;c.quantizeOptimizedFeatureSet=
function(A,J){const {geometryType:M,features:V,hasM:Z,hasZ:ca}=J;if(!A)return J;for(let fa=0;fa<V.length;fa++){const la=V[fa],ma=la.weakClone();ma.geometry=new r;qa(ma.geometry,la.geometry,Z,ca,M,A);la.centroid&&(ma.centroid=new r,qa(ma.centroid,la.centroid,Z,ca,"esriGeometryPoint",A));V[fa]=ma}J.transform=A;return J};c.quantizeOptimizedGeometry=qa;c.quantizeX=I;c.quantizeY=t;c.removeCollinearVertices=function(A,J,M,V,Z){if(!J?.coords?.length)return null;M=Sa[M];const {coords:ca,lengths:fa}=J;J=D(V,
Z,V,Z);V=z(V,Z);let la=Z=0,ma=0,ua=0;for(const Ca of fa){la=ua;J(A.coords,ca,la,Z,ca[Z],ca[Z+1]);Z+=V;var pa=ca[Z];let xa=ca[Z+1],Ba=pa,Aa=xa;var sa=xa/pa;la+=V;J(A.coords,ca,la,Z,Ba,Aa);Z+=V;for(let ya=2;ya<Ca;ya++){pa=ca[Z];xa=ca[Z+1];const Ia=xa/pa,Qa=sa===Ia||!isFinite(sa)&&!isFinite(Ia);sa=Qa&&isFinite(Ia)?0<=sa&&0<=Ia||0>=sa&&0>=Ia:0<=Aa&&0<=xa||0>=Aa&&0>=xa;Qa&&sa?(Ba+=pa,Aa+=xa):(Ba=pa,Aa=xa,la+=V);J(A.coords,ca,la,Z,Ba,Aa);Z+=V;sa=Ia}la+=V;pa=(la-ua)/V;pa>=M&&(A.lengths[ma]=pa,ua=la,ma++)}A.coords.length>
ua&&(A.coords.length=ua);A.lengths.length>ma&&(A.lengths.length=ma);return A.coords.length&&A.lengths.length?A:null};c.removeZMValues=function(A,J,M,V,Z,ca){Ea(A);A.lengths.push(...J.lengths);if(M===Z&&V===ca)for(var fa=0;fa<J.coords.length;fa++)A.coords.push(J.coords[fa]);else for(fa=z(M,V),M=D(M,V,Z,ca),J=J.coords,V=0;V<J.length;V+=fa)M(A.coords,J,A.coords.length,V,J[V],J[V+1]);return A};c.unquantizeOptimizedFeatureSet=function(A){const {transform:J,features:M,hasM:V,hasZ:Z}=A;if(!J)return A;for(const ca of M)null!=
ca.geometry&&ta(ca.geometry,ca.geometry,V,Z,J),null!=ca.centroid&&ta(ca.centroid,ca.centroid,V,Z,J);A.transform=null;return A};c.unquantizeOptimizedGeometry=ta;c.unquantizeValue=q;c.unquantizeX=function(A,J){return q(A,J,0)};c.unquantizeY=function(A,J){return q(A,-J,1)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],function(c,g,y){function w(q=I){return[q[0],q[1],q[2],q[3],q[4],q[5]]}
function F(q,a,u,n,C,P,e=w()){e[0]=q;e[1]=a;e[2]=u;e[3]=n;e[4]=C;e[5]=P;return e}function B(q){return q[0]>=q[3]?0:q[3]-q[0]}function f(q){return q[1]>=q[4]?0:q[4]-q[1]}function p(q){return q[2]>=q[5]?0:q[5]-q[2]}function d(q,a){return Math.max(a[0],q[0])<=Math.min(a[3],q[3])&&Math.max(a[1],q[1])<=Math.min(a[4],q[4])&&Math.max(a[2],q[2])<=Math.min(a[5],q[5])}function r(q,a){q[0]=a[0];q[1]=a[1];q[2]=a[2];q[3]=a[3];q[4]=a[4];q[5]=a[5];return q}function z(q){return 6===q.length}const D=[Infinity,Infinity,
Infinity,-Infinity,-Infinity,-Infinity],I=[0,0,0,0,0,0],t=w();c.allFinite=function(q){for(let a=0;6>a;a++)if(!isFinite(q[a]))return!1;return!0};c.center=function(q,a=[0,0,0]){a[0]=q[0]+B(q)/2;a[1]=q[1]+f(q)/2;a[2]=q[2]+p(q)/2;return a};c.contains=function(q,a){return a[0]>=q[0]&&a[1]>=q[1]&&a[2]>=q[2]&&a[3]<=q[3]&&a[4]<=q[4]&&a[5]<=q[5]};c.containsPoint=function(q,a){return a[0]>=q[0]&&a[1]>=q[1]&&a[2]>=q[2]&&a[0]<=q[3]&&a[1]<=q[4]&&a[2]<=q[5]};c.containsPointWithMargin=function(q,a,u){return a[0]>=
q[0]-u&&a[1]>=q[1]-u&&a[2]>=q[2]-u&&a[0]<=q[3]+u&&a[1]<=q[4]+u&&a[2]<=q[5]+u};c.create=w;c.depth=f;c.diameter=function(q){const a=B(q),u=p(q);q=f(q);return Math.sqrt(a*a+u*u+q*q)};c.empty=function(q){return q?r(q,D):w(D)};c.equals=function(q,a,u){if(null==q||null==a)return q===a;if(!z(q)||!z(a))return!1;if(u)for(let n=0;n<q.length;n++){if(!u(q[n],a[n]))return!1}else for(u=0;u<q.length;u++)if(q[u]!==a[u])return!1;return!0};c.expandWithAABB=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],
a[1]);q[2]=Math.min(q[2],a[2]);q[3]=Math.max(q[3],a[3]);q[4]=Math.max(q[4],a[4]);q[5]=Math.max(q[5],a[5])};c.expandWithBuffer=function(q,a,u=0,n=a.length/3){let C=q[0],P=q[1],e=q[2],K=q[3],Q=q[4],S=q[5];for(let ba=0;ba<n;ba++)C=Math.min(C,a[u+3*ba]),P=Math.min(P,a[u+3*ba+1]),e=Math.min(e,a[u+3*ba+2]),K=Math.max(K,a[u+3*ba]),Q=Math.max(Q,a[u+3*ba+1]),S=Math.max(S,a[u+3*ba+2]);q[0]=C;q[1]=P;q[2]=e;q[3]=K;q[4]=Q;q[5]=S};c.expandWithNestedArray=function(q,a,u){const n=a.length;let C=q[0],P=q[1],e=q[2],
K=q[3],Q=q[4],S=q[5];if(u)for(u=0;u<n;u++){var ba=a[u];C=Math.min(C,ba[0]);P=Math.min(P,ba[1]);e=Math.min(e,ba[2]);K=Math.max(K,ba[0]);Q=Math.max(Q,ba[1]);S=Math.max(S,ba[2])}else for(u=0;u<n;u++)ba=a[u],C=Math.min(C,ba[0]),P=Math.min(P,ba[1]),K=Math.max(K,ba[0]),Q=Math.max(Q,ba[1]);q[0]=C;q[1]=P;q[2]=e;q[3]=K;q[4]=Q;q[5]=S};c.expandWithOffset=function(q,a,u,n){q[0]=Math.min(q[0],q[0]+a);q[3]=Math.max(q[3],q[3]+a);q[1]=Math.min(q[1],q[1]+u);q[4]=Math.max(q[4],q[4]+u);q[2]=Math.min(q[2],q[2]+n);q[5]=
Math.max(q[5],q[5]+n)};c.expandWithRect=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[3]=Math.max(q[3],a[2]);q[4]=Math.max(q[4],a[3])};c.expandWithVec3=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[2]=Math.min(q[2],a[2]);q[3]=Math.max(q[3],a[0]);q[4]=Math.max(q[4],a[1]);q[5]=Math.max(q[5],a[2])};c.fromExtent=function(q,a=w()){a[0]=q.xmin;a[1]=q.ymin;a[2]=q.hasZ?q.zmin:-Infinity;a[3]=q.xmax;a[4]=q.ymax;a[5]=q.hasZ?q.zmax:Infinity;return a};c.fromMinMax=function(q,
a,u=w()){u[0]=q[0];u[1]=q[1];u[2]=q[2];u[3]=a[0];u[4]=a[1];u[5]=a[2];return u};c.fromRect=function(q,a){q[0]=a[0];q[1]=a[1];q[2]=Number.NEGATIVE_INFINITY;q[3]=a[2];q[4]=a[3];q[5]=Number.POSITIVE_INFINITY;return q};c.fromRectValues=function(q,a,u,n,C){q[0]=a;q[1]=u;q[2]=Number.NEGATIVE_INFINITY;q[3]=n;q[4]=C;q[5]=Number.POSITIVE_INFINITY;return q};c.fromValues=F;c.getMax=function(q,a){a[0]=q[3];a[1]=q[4];a[2]=q[5];return a};c.getMin=function(q,a){a[0]=q[0];a[1]=q[1];a[2]=q[2];return a};c.height=p;
c.intersects=d;c.intersectsClippingArea=function(q,a){return null==a?!0:d(q,a)};c.is=z;c.isPoint=function(q){return 0===B(q)&&0===f(q)&&0===p(q)};c.maximumDimension=function(q){return Math.max(B(q),p(q),f(q))};c.negativeInfinity=D;c.offset=function(q,a,u,n,C=q){C[0]=q[0]+a;C[1]=q[1]+u;C[2]=q[2]+n;C[3]=q[3]+a;C[4]=q[4]+u;C[5]=q[5]+n;return C};c.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];c.scale=function(q,a,u=q){const n=q[0]+B(q)/2,C=q[1]+f(q)/2,P=q[2]+p(q)/2;u[0]=
n+(q[0]-n)*a;u[1]=C+(q[1]-C)*a;u[2]=P+(q[2]-P)*a;u[3]=n+(q[3]-n)*a;u[4]=C+(q[4]-C)*a;u[5]=P+(q[5]-P)*a;return u};c.set=r;c.setMax=function(q,a,u=q){u[3]=a[0];u[4]=a[1];u[5]=a[2];u!==q&&(u[0]=q[0],u[1]=q[1],u[2]=q[2]);return q};c.setMin=function(q,a,u=q){u[0]=a[0];u[1]=a[1];u[2]=a[2];u!==q&&(u[3]=q[3],u[4]=q[4],u[5]=q[5]);return u};c.size=function(q,a=[0,0,0]){a[0]=B(q);a[1]=f(q);a[2]=p(q);return a};c.toExtent=function(q,a){return isFinite(q[2])||isFinite(q[5])?new g({xmin:q[0],xmax:q[3],ymin:q[1],
ymax:q[4],zmin:q[2],zmax:q[5],spatialReference:a}):new g({xmin:q[0],xmax:q[3],ymin:q[1],ymax:q[4],spatialReference:a})};c.toRect=function(q,a){a||=y.create();a[0]=q[0];a[1]=q[1];a[2]=q[3];a[3]=q[4];return a};c.width=B;c.wrap=function(q,a,u,n,C,P){return F(q,a,u,n,C,P,t)};c.zero=I;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","./OptimizedGeometry"],function(c,g){class y{constructor(F=null,B={},f,p){this.geometry=
F;this.attributes=B;this.centroid=f;this.objectId=p;this.geohashY=this.geohashX=this.displayId=0}static fromJSON(F,B){const f=F.geometry?g.fromJSON(F.geometry):null,p=F.centroid?g.fromJSON(F.centroid):null;return new y(f,F.attributes,p,F.attributes[B])}weakClone(){const F=new y(this.geometry,this.attributes,this.centroid,this.objectId);F.displayId=this.displayId;F.geohashX=this.geohashX;F.geohashY=this.geohashY;return F}clone(){var F=this.geometry?.clone();F=new y(F,{...this.attributes},this.centroid?.clone(),
this.objectId);F.displayId=this.displayId;F.geohashX=this.geohashX;F.geohashY=this.geohashY;return F}}class w extends y{}c.OptimizedFeature=y;c.OptimizedFeatureWithGeometry=w;c.hasGeometry=function(F){return!!F.geometry?.coords?.length};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class c{constructor(g=[],y=[],w=!1){this.lengths=g??[];this.coords=y??[];this.hasIndeterminateRingOrder=w}static fromJSON(g){return new c(g.lengths,
g.coords,g.hasIndeterminateRingOrder)}static fromRect(g){const [y,w,F,B]=g;g=F-y;const f=B-w;return new c([5],[y,w,g,0,0,f,-g,0,0,-f])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((g,y)=>g+y)}forEachVertex(g){let y=0;this.lengths.length||g(this.coords[0],this.coords[1]);for(let w=0;w<this.lengths.length;w++){const F=this.lengths[w];for(let B=0;B<F;B++)g(this.coords[2*(B+y)],this.coords[2*(B+y)+1]);y+=F}}deltaDecode(){const g=
this.clone(),{coords:y,lengths:w}=g;let F=0;for(const B of w){for(let f=1;f<B;f++)y[2*(F+f)]+=y[2*(F+f)-2],y[2*(F+f)+1]+=y[2*(F+f)-1];F+=B}return g}clone(g){if(0===this.lengths.length)return new c([],[this.coords[0],this.coords[1]]);var y=2*(0===this.lengths.length?1:this.lengths.reduce((w,F)=>w+F));y=this.coords.slice(0,y);return g?(g.set(y),new c(this.lengths,g,this.hasIndeterminateRingOrder)):new c(Array.from(this.lengths),Array.from(y),this.hasIndeterminateRingOrder)}}return c})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class c{constructor(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const g=new c;g.objectIdFieldName=this.objectIdFieldName;g.globalIdFieldName=this.globalIdFieldName;g.geohashFieldName=this.geohashFieldName;g.geometryProperties=this.geometryProperties;g.geometryType=this.geometryType;
g.spatialReference=this.spatialReference;g.hasZ=this.hasZ;g.hasM=this.hasM;g.features=this.features;g.fields=this.fields;g.transform=this.transform;g.exceededTransferLimit=this.exceededTransferLimit;g.uniqueIdField=this.uniqueIdField;g.queryGeometry=this.queryGeometry;g.queryGeometryType=this.queryGeometryType;return g}}return c})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(c){c.findLastObjectIdFromFeatures=function(g,y){let w=0;for(const F of y)y=F.attributes?.[g],
"number"===typeof y&&isFinite(y)&&(w=Math.max(w,y));return w};c.initialObjectId=1;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../core/arrayUtils ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./geometryUtils ./optimizedFeatureQueryEngineAdapter".split(" "),function(c,g,y,w,F,B,
f,p,d,r){const z=F.create();class D{constructor(I){this.geometryInfo=I;this._boundsStore=new p.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new y;this.featureAdapter=r.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let I=
0;this._featuresById.forEach(t=>{null!=t.geometry&&t.geometry.coords&&(I+=t.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:I/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(I){if(null==this.fullBounds)return null;const [t,q,a,u]=this.fullBounds;return{xmin:t,ymin:q,xmax:a,ymax:u,spatialReference:d.cleanFromGeometryEngine(I)}}add(I){this._add(I);this._emitChanged()}addMany(I){for(const t of I)this._add(t);this._emitChanged()}upsertMany(I){I=I.map(t=>this._upsert(t));
this._emitChanged();return I.filter(c.isSome)}clear(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()}removeById(I){I=this._featuresById.get(I);if(!I)return null;this._remove(I);this._emitChanged();return I}removeManyById(I){this._boundsStore.invalidateIndex();for(const t of I)(I=this._featuresById.get(t))&&this._remove(I);this._emitChanged()}forEachBounds(I,t){for(const q of I)(I=this._boundsStore.get(q.objectId))&&t(F.fromRect(z,I))}getFeature(I){return this._featuresById.get(I)}has(I){return this._featuresById.has(I)}forEach(I){this._featuresById.forEach(t=>
I(t))}forEachInBounds(I,t){this._boundsStore.forEachInBounds(I,q=>{t(this._featuresById.get(q))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex();this._markedIds.clear()}sweep(){let I=!1;this._featuresById.forEach((t,q)=>{this._markedIds.has(q)||(I=!0,this._remove(t))});this._markedIds.clear();I&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(I){if(I){var t=I.objectId;if(null==t)w.getLogger("esri.layers.graphics.data.FeatureStore").error(new g("featurestore:invalid-feature",
"feature id is missing",{feature:I}));else{var q=this._featuresById.get(t);this._markedIds.add(t);if(q){I.displayId=q.displayId;var a=this._boundsStore.get(t);this._boundsStore.delete(t)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(I);I.geometry?.coords?.length?(a=f.getBoundsOptimizedGeometry(null!=a?a:B.create(),I.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=a&&this._boundsStore.set(t,a)):this._boundsStore.set(t,null);this._featuresById.set(t,I)}}}_upsert(I){const t=I?.objectId;
if(null==t)return w.getLogger("esri.layers.graphics.data.FeatureStore").error(new g("featurestore:invalid-feature","feature id is missing",{feature:I})),null;const q=this._featuresById.get(t);if(!q)return this._add(I),I;this._markedIds.add(t);const {geometry:a,attributes:u}=I;for(const n in u)q.attributes[n]=u[n];a&&(q.geometry=a,this._boundsStore.set(t,f.getBoundsOptimizedGeometry(B.create(),a,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null));return q}_remove(I){if(null!=this.onFeatureRemove)this.onFeatureRemove(I);
const t=I.objectId;this._markedIds.delete(t);this._boundsStore.delete(t);this._featuresById.delete(t);return I}}return D})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(c,g,y,w){function F(p,d,r){B.minX=d[0];B.minY=d[1];B.maxX=d[2];B.maxY=d[3];p.search(B,r)}const B={minX:0,minY:0,maxX:0,maxY:0};class f{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=
new Map;this._idByBounds=new Map;this._index=new y.PooledRBush(9,g("esri-csp-restrictions")?p=>({minX:p[0],minY:p[1],maxX:p[2],maxY:p[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const p=Array(this._idByBounds.size);let d=0;this._idByBounds.forEach((r,z)=>{p[d++]=z});this._indexInvalid=!1;this._index.clear();this._index.load(p)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(p=>this._idByBounds.has(p))))),this._boundsToLoad.length=
0)}}get fullBounds(){if(!this._boundsById.size)return null;const p=w.empty();for(const d of this._boundsById.values())d&&(p[0]=Math.min(d[0],p[0]),p[1]=Math.min(d[1],p[1]),p[2]=Math.max(d[2],p[2]),p[3]=Math.max(d[3],p[3]));return p}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(p){const d=this._boundsById.get(p);this._boundsById.delete(p);d&&(this._idByBounds.delete(d),this._indexInvalid||
this._index.remove(d))}forEachInBounds(p,d){this._loadIndex();F(this._index,p,r=>d(this._idByBounds.get(r)))}get(p){return this._boundsById.get(p)}has(p){return this._boundsById.has(p)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(p,d){if(!this._indexInvalid){const r=this._boundsById.get(p);r&&(this._index.remove(r),this._idByBounds.delete(r))}this._boundsById.set(p,d);d&&(this._idByBounds.set(d,p),this._indexInvalid||(this._boundsToLoad.push(d),5E4<
this._boundsToLoad.length&&this._loadIndex()))}}c.BoundsStore=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../has","../../PooledArray","../../../chunks/quickselect"],function(c,g,y,w,F){function B(W,U){for(C.clear();W;){if(!0===W.leaf)for(const v of W.children)U(v);else C.pushArray(W.children);W=C.pop()??null}}function f(W,U){p(W,0,W.children.length,U,W)}function p(W,U,v,H,m){m||=new S([]);
m.minX=Infinity;m.minY=Infinity;m.maxX=-Infinity;m.maxY=-Infinity;for(let h=U,x;h<v;h++)x=W.children[h],d(m,W.leaf?H(x):x);return m}function d(W,U){W.minX=Math.min(W.minX,U.minX);W.minY=Math.min(W.minY,U.minY);W.maxX=Math.max(W.maxX,U.maxX);W.maxY=Math.max(W.maxY,U.maxY)}function r(W,U){return W.minX-U.minX}function z(W,U){return W.minY-U.minY}function D(W){return(W.maxX-W.minX)*(W.maxY-W.minY)}function I(W){return W.maxX-W.minX+(W.maxY-W.minY)}function t(W,U){return W.minX<=U.minX&&W.minY<=U.minY&&
U.maxX<=W.maxX&&U.maxY<=W.maxY}function q(W,U){return U.minX<=W.maxX&&U.minY<=W.maxY&&U.maxX>=W.minX&&U.maxY>=W.minY}function a(W,U,v,H,m){for(U=[U,v];U.length;){v=U.pop();const h=U.pop();if(v-h<=H)continue;const x=h+Math.ceil((v-h)/H/2)*H;F.quickselect(W,x,h,v,m);U.push(h,x,x,v)}}class u{constructor(W=9,U){this._compareMinX=r;this._compareMinY=z;this._toBBox=v=>v;this._maxEntries=Math.max(4,W||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));U&&("function"===typeof U?this._toBBox=U:
this._initFormat(U));this.clear()}destroy(){this.clear();n.prune();C.prune();P.prune();e.prune()}all(W){B(this._data,W)}search(W,U){let v=this._data;const H=this._toBBox;if(q(W,v))for(n.clear();v;){for(let m=0,h=v.children.length;m<h;m++){const x=v.children[m],N=v.leaf?H(x):x;q(W,N)&&(v.leaf?U(x):t(W,N)?B(x,U):n.push(x))}v=n.pop()}}collides(W){let U=this._data;const v=this._toBBox;if(!q(W,U))return!1;for(n.clear();U;){for(let H=0,m=U.children.length;H<m;H++){const h=U.children[H],x=U.leaf?v(h):h;
if(q(W,x)){if(U.leaf||t(W,x))return!0;n.push(h)}}U=n.pop()}return!1}load(W){if(!W.length)return this;if(W.length<this._minEntries){for(let U=0,v=W.length;U<v;U++)this.insert(W[U]);return this}W=this._build(W.slice(0,W.length),0,W.length-1,0);if(this._data.children.length)if(this._data.height===W.height)this._splitRoot(this._data,W);else{if(this._data.height<W.height){const U=this._data;this._data=W;W=U}this._insert(W,this._data.height-W.height-1,!0)}else this._data=W;return this}insert(W){W&&this._insert(W,
this._data.height-1);return this}clear(){this._data=new S([]);return this}remove(W){if(!W)return this;let U=this._data,v=null,H=0,m=!1,h;const x=this._toBBox(W);P.clear();for(e.clear();U||0<P.length;){U||(U=P.pop(),v=P.data[P.length-1],H=e.pop()??0,m=!0);if(U.leaf&&(h=g.indexOf(U.children,W,U.children.length,U.indexHint),-1!==h)){U.children.splice(h,1);P.push(U);this._condense(P);break}m||U.leaf||!t(U,x)?v?(H++,U=v.children[H],m=!1):U=null:(P.push(U),e.push(H),H=0,v=U,U=U.children[0])}return this}toJSON(){return this._data}fromJSON(W){this._data=
W;return this}_build(W,U,v,H){var m=v-U+1,h=this._maxEntries;if(m<=h)return W=new S(W.slice(U,v+1)),f(W,this._toBBox),W;H||(H=Math.ceil(Math.log(m)/Math.log(h)),h=Math.ceil(m/h**(H-1)));const x=new ba([]);x.height=H;m=Math.ceil(m/h);h=m*Math.ceil(Math.sqrt(h));for(a(W,U,v,h,this._compareMinX);U<=v;U+=h){const N=Math.min(U+h-1,v);a(W,U,N,m,this._compareMinY);for(let L=U;L<=N;L+=m)x.children.push(this._build(W,L,Math.min(L+m-1,N),H-1))}f(x,this._toBBox);return x}_insert(W,U,v){var H=this._toBBox;v=
v?W:H(W);P.clear();H=this._data;for(var m=U,h=P;;){h.push(H);if(!0===H.leaf||h.length-1===m)break;let x=Infinity,N=Infinity,L=void 0;for(let T=0,X=H.children.length;T<X;T++){const da=H.children[T],ia=D(da),na=(Math.max(da.maxX,v.maxX)-Math.min(da.minX,v.minX))*(Math.max(da.maxY,v.maxY)-Math.min(da.minY,v.minY))-ia;na<N?(N=na,x=ia<x?ia:x,L=da):na===N&&ia<x&&(x=ia,L=da)}H=L||H.children[0]}H.children.push(W);for(d(H,v);0<=U;)if(P.data[U].children.length>this._maxEntries)this._split(P,U),U--;else break;
for(W=P;0<=U;U--)d(W.data[U],v)}_split(W,U){const v=W.data[U];var H=v.children.length;const m=this._minEntries;this._chooseSplitAxis(v,m,H);if(H=this._chooseSplitIndex(v,m,H))H=v.children.splice(H,v.children.length-H),H=v.leaf?new S(H):new ba(H),H.height=v.height,f(v,this._toBBox),f(H,this._toBBox),U?W.data[U-1].children.push(H):this._splitRoot(v,H)}_splitRoot(W,U){this._data=new ba([W,U]);this._data.height=W.height+1;f(this._data,this._toBBox)}_chooseSplitIndex(W,U,v){let H,m,h=void 0;H=m=Infinity;
for(let N=U;N<=v-U;N++){var x=p(W,0,N,this._toBBox);const L=p(W,N,v,this._toBBox),T=Math.max(0,Math.min(x.maxX,L.maxX)-Math.max(x.minX,L.minX))*Math.max(0,Math.min(x.maxY,L.maxY)-Math.max(x.minY,L.minY));x=D(x)+D(L);T<H?(H=T,h=N,m=x<m?x:m):T===H&&x<m&&(m=x,h=N)}return h}_chooseSplitAxis(W,U,v){const H=W.leaf?this._compareMinX:r,m=W.leaf?this._compareMinY:z,h=this._allDistMargin(W,U,v,H);U=this._allDistMargin(W,U,v,m);h<U&&W.children.sort(H)}_allDistMargin(W,U,v,H){W.children.sort(H);H=this._toBBox;
var m=p(W,0,U,H);const h=p(W,v-U,v,H);let x=I(m)+I(h);for(let N=U;N<v-U;N++){const L=W.children[N];d(m,W.leaf?H(L):L);x+=I(m)}for(v=v-U-1;v>=U;v--)m=W.children[v],d(h,W.leaf?H(m):m),x+=I(h);return x}_condense(W){for(let U=W.length-1;0<=U;U--){const v=W.data[U];if(0===v.children.length)if(0<U){const H=W.data[U-1],m=H.children;m.splice(g.indexOf(m,v,m.length,H.indexHint),1)}else this.clear();else f(v,this._toBBox)}}_initFormat(W){const U=["return a"," - b",";"];this._compareMinX=new Function("a","b",
U.join(W[0]));this._compareMinY=new Function("a","b",U.join(W[1]));this._toBBox=new Function("a","return {minX: a"+W[0]+", minY: a"+W[1]+", maxX: a"+W[2]+", maxY: a"+W[3]+"};")}}const n=new w,C=new w,P=new w,e=new w({deallocator:void 0});class K{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class Q extends K{constructor(){super(...arguments);this.height=1;this.indexHint=new g.PositionHint}}class S extends Q{constructor(W){super();this.children=W;this.leaf=!0}}class ba extends Q{constructor(W){super();
this.children=W;this.leaf=!1}}c.BBox=K;c.PooledRBush=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(c,g){var y={exports:{}};(function(w){(function(F){F=F();void 0!==F&&(w.exports=F)})(function(){function F(p,d,r,z,D){for(;z>r;){if(600<z-r){var I=z-r+1,t=d-r+1,q=Math.log(I),a=.5*Math.exp(2*q/3);q=.5*Math.sqrt(q*a*(I-a)/I)*(0>t-I/2?-1:1);F(p,d,Math.max(r,Math.floor(d-t*a/I+q)),Math.min(z,Math.floor(d+
(I-t)*a/I+q)),D)}I=p[d];t=r;a=z;B(p,r,d);for(0<D(p[z],I)&&B(p,r,z);t<a;){B(p,t,a);t++;for(a--;0>D(p[t],I);)t++;for(;0<D(p[a],I);)a--}0===D(p[r],I)?B(p,r,a):(a++,B(p,a,z));a<=d&&(r=a+1);d<=a&&(z=a-1)}}function B(p,d,r){var z=p[d];p[d]=p[r];p[r]=z}function f(p,d){return p<d?-1:p>d?1:0}return function(p,d,r,z,D){F(p,d,r||0,z||p.length-1,D||f)}})})(y);g=g.getDefaultExportFromCjs(y.exports);c.quickselect=g})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils",
"../OptimizedGeometry"],function(c,g,y){const w=new y,F=new y,B=new y,f={esriGeometryPoint:g.convertToPoint,esriGeometryPolyline:g.convertToPolyline,esriGeometryPolygon:g.convertToPolygon,esriGeometryMultipoint:g.convertToMultipoint},p=(d,r)=>"_geVersion"!==d?r:void 0;c.cleanFromGeometryEngine=function(d){return d&&"_geVersion"in d?JSON.parse(JSON.stringify(d,p)):d};c.getGeometry=function(d,r,z,D,I,t,q=r,a=z){const u=r&&q,n=z&&a;D=null!=D?"coords"in D?D:D.geometry:null;if(null==D)return null;if(I)return r=
g.generalizeOptimizedGeometry(F,D,r,z,d,I,q,a),t&&(r=g.quantizeOptimizedGeometry(B,r,u,n,d,t)),f[d]?.(r,u,n)??null;if(t)return t=g.quantizeOptimizedGeometry(B,D,r,z,d,t,q,a),f[d]?.(t,u,n)??null;g.removeZMValues(w,D,r,z,q,a);return f[d]?.(w,u,n)??null};c.transformCentroid=function(d,r,z,D=d.hasZ,I=d.hasM){if(null==r)return null;const t=d.hasZ&&D,q=d.hasM&&I;return z?(d=g.quantizeOptimizedGeometry(B,r,d.hasZ,d.hasM,"esriGeometryPoint",z,D,I),g.convertToPoint(d,t,q)):g.convertToPoint(r,t,q)};Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(c,g,y,w){c.optimizedFeatureQueryEngineAdapter={getObjectId(F){return F.objectId},getAttributes(F){return F.attributes},getAttribute(F,B){return F.attributes[B]},cloneWithGeometry(F,B){return new y.OptimizedFeature(B,F.attributes,null,F.objectId)},getGeometry(F){return F.geometry},getCentroid(F,B){null==
F.centroid&&(F.centroid=g.getCentroidOptimizedGeometry(new w,F.geometry,B.hasZ,B.hasM));return F.centroid}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(c){function g(w,F,B,f,p,d){d=p?d?4:3:d?3:2;let r=B,z=B+d,D=0,I=0,t=B=0,q=0;for(let a=0,u=f-1;a<u;a++,r+=d,z+=d){f=F[r];const n=F[r+1],C=F[r+2],P=F[z],e=F[z+1],K=F[z+2];let Q=f*e-P*n;t+=Q;D+=(f+P)*Q;I+=(n+e)*Q;p&&(Q=f*K-P*C,B+=(C+K)*Q,q+=Q);f<w[0]&&(w[0]=f);f>
w[1]&&(w[1]=f);n<w[2]&&(w[2]=n);n>w[3]&&(w[3]=n);p&&(C<w[4]&&(w[4]=C),C>w[5]&&(w[5]=C))}0<t&&(t*=-1);0<q&&(q*=-1);if(!t)return null;w=[D,I,.5*t];p&&(w[3]=B,w[4]=.5*q);return w}function y(w,F,B,f,p){p=f?p?4:3:p?3:2;let d=F,r=F+p,z=0,D=0,I=0,t=0;for(let n=0,C=B-1;n<C;n++,d+=p,r+=p){var q=w[d];const P=w[d+1],e=w[d+2],K=w[r],Q=w[r+1],S=w[r+2];if(f){var a=K-q;var u=Q-P;const ba=S-e;a=Math.sqrt(a*a+u*u+ba*ba)}else a=K-q,u=Q-P,a=Math.sqrt(a*a+u*u);a&&(z+=a,f?(q=[q+.5*(K-q),P+.5*(Q-P),e+.5*(S-e)],D+=a*q[0],
I+=a*q[1],t+=a*q[2]):(q=[q+.5*(K-q),P+.5*(Q-P)],D+=a*q[0],I+=a*q[1]))}return 0<z?f?[D/z,I/z,t/z]:[D/z,I/z]:0<B?f?[w[F],w[F+1],w[F+2]]:[w[F],w[F+1]]:null}c.getCentroidOptimizedGeometry=function(w,F,B,f){if(!F?.lengths.length)return null;w.lengths.length&&(w.lengths.length=0);w.coords.length&&(w.coords.length=0);const p=w.coords,d=[],r=B?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:z,coords:D}=F;var I=B?f?4:3:f?3:2;let t=0;for(const q of z){const a=g(r,D,t,q,B,f);a&&d.push(a);t+=q*I}d.sort((q,a)=>{let u=q[2]-a[2];0===u&&B&&(u=q[4]-a[4]);return u});d.length&&(I=6*d[0][2],p[0]=d[0][0]/I,p[1]=d[0][1]/I,B&&(I=6*d[0][4],p[2]=0!==I?d[0][3]/I:0),p[0]<r[0]||p[0]>r[1]||p[1]<r[2]||p[1]>r[3]||B&&(p[2]<r[4]||p[2]>r[5]))&&(p.length=0);if(!p.length)if(F=F.lengths[0]?y(D,0,z[0],B,f):null)p[0]=F[0],p[1]=F[1],
B&&2<F.length&&(p[2]=F[2]);else return null;return w};c.lineCentroid=y;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(c,g,y,w,F,B,f){function p(a,u){if(!u)return null;if("x"in u){var n=
{x:0,y:0};[n.x,n.y]=a(u.x,u.y,z);null!=u.z&&(n.z=u.z);null!=u.m&&(n.m=u.m);return n}return"xmin"in u?(n={xmin:0,ymin:0,xmax:0,ymax:0},[n.xmin,n.ymin]=a(u.xmin,u.ymin,z),[n.xmax,n.ymax]=a(u.xmax,u.ymax,z),u.hasZ&&(n.zmin=u.zmin,n.zmax=u.zmax,n.hasZ=!0),u.hasM&&(n.mmin=u.mmin,n.mmax=u.mmax,n.hasM=!0),n):"rings"in u?{rings:d(u.rings,a),hasM:u.hasM,hasZ:u.hasZ}:"paths"in u?{paths:d(u.paths,a),hasM:u.hasM,hasZ:u.hasZ}:"points"in u?{points:r(u.points,a),hasM:u.hasM,hasZ:u.hasZ}:null}function d(a,u){const n=
[];for(const C of a)n.push(r(C,u));return n}function r(a,u){const n=[];for(const C of a)a=u(C[0],C[1],[0,0]),n.push(a),2<C.length&&a.push(C[2]),3<C.length&&a.push(C[3]);return n}const z=[0,0],D=p.bind(null,f.lngLatToXY),I=p.bind(null,f.xyToLngLat);class t{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(a,u,n,C){if(!a?.length||!u||!n||B.equals(u,n))return a;a={geometries:a,inSpatialReference:u,outSpatialReference:n,geographicTransformation:C,resolve:y.createResolver()};
this._jobs.push(a);this._timer??(this._timer=setTimeout(this._process,10));return a.resolve.promise}_process(){this._timer=null;const a=this._jobs.shift();if(a){var {geometries:u,inSpatialReference:n,outSpatialReference:C,resolve:P,geographicTransformation:e}=a;f.canProject(n,C)?B.isWebMercator(C)?P(u.map(D)):P(u.map(I)):P(w.projectMany(F.jsonAdapter,u,n,C,e,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}}}const q=new t;c.checkProjectionSupport=async function(a,u){a&&u&&(a=
Array.isArray(a)?a.map(n=>null!=n.geometry?n.geometry.spatialReference:null).filter(g.isSome):[a],await w.initializeProjection(a.map(n=>({source:n,dest:u}))))};c.project=function(a,u,n,C){if(!a)return a;n||(n=u,u=a.spatialReference);return B.isValid(u)&&B.isValid(n)&&!B.equals(u,n)?f.canProject(u,n)?(a=B.isWebMercator(n)?D(a):I(a),a.spatialReference=n,a):w.projectMany(F.jsonAdapter,[a],u,n,null,C)[0]:a};c.projectMany=function(a,u,n,C){return q.push(a,u,n,C)};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(c){class g{constructor(f,p,d){this.x=f;this.y=p;this.spatialReference=d;this.m=this.z=void 0}}class y{constructor(f,p,d,r){this.rings=f;this.spatialReference=p;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);r&&(this.hasM=r)}}class w{constructor(f,p,d,r){this.paths=f;this.spatialReference=p;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);r&&(this.hasM=r)}}class F{constructor(f,p,d,r){this.points=f;this.spatialReference=
p;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);r&&(this.hasM=r)}}class B{constructor(f,p,d,r,z){this.xmin=f;this.ymin=p;this.xmax=d;this.ymax=r;this.spatialReference=z;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}c.jsonAdapter={convertToGEGeometry:function(f,p){return null==p?null:f.convertJSONToGeometry(p)},exportPoint:function(f,p,d){d=new g(f.getPointX(p),f.getPointY(p),d);const r=f.hasZ(p),z=f.hasM(p);r&&(d.z=f.getPointZ(p));z&&(d.m=f.getPointM(p));return d},exportPolygon:function(f,p,d){return new y(f.exportPaths(p),
d,f.hasZ(p),f.hasM(p))},exportPolyline:function(f,p,d){return new w(f.exportPaths(p),d,f.hasZ(p),f.hasM(p))},exportMultipoint:function(f,p,d){return new F(f.exportPoints(p),d,f.hasZ(p),f.hasM(p))},exportExtent:function(f,p,d){var r=f.hasZ(p);const z=f.hasM(p);d=new B(f.getXMin(p),f.getYMin(p),f.getXMax(p),f.getYMax(p),d);r&&(r=f.getZExtent(p),d.zmin=r.vmin,d.zmax=r.vmax);z&&(f=f.getMExtent(p),d.mmin=f.vmin,d.mmax=f.vmax);return d}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(c,g,y,w,F,B,f,p,d,r,z,D,I,t,q,a,u,n,C,P,e,K,Q,S,ba,W,U,v){function H(L){if(ba.canQueryWithRBush(L)){if(t.isExtent(L))return[D.fromValues(Math.min(L.xmin,L.xmax),Math.min(L.ymin,L.ymax),Math.max(L.xmin,L.xmax),Math.max(L.ymin,L.ymax))];if(t.isPolygon(L))return L.rings.map(T=>D.fromValues(Math.min(T[0][0],T[2][0]),Math.min(T[0][1],T[2][1]),Math.max(T[0][0],T[2][0]),Math.max(T[0][1],T[2][1])))}return[I.getBoundsXY(D.create(),L)]}class m{constructor(L,T=null,X,da,ia){this.attributes=L;this.geometry=
X;this.centroid=da;this.filterFlags=ia;this.groupId=-1;this.displayId=T}}const h=new f.MemCacheStorage(2E6);let x=0;class N{constructor(L){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:e.queryCapabilities};this.geometryType=L.geometryType;this.hasM=!!L.hasM;this.hasZ=!!L.hasZ;this.objectIdField=L.objectIdField;this.spatialReference=L.spatialReference;this.definitionExpression=L.definitionExpression;this.featureStore=L.featureStore;this.aggregateAdapter=L.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=L.timeInfo;L.cacheSpatialQueries&&(this._geometryQueryCache=new f.MemCache(x++ +"$$",h));this.fieldsIndex=w.isSerializable(L.fieldsIndex)?L.fieldsIndex:U.fromJSON(L.fieldsIndex);this.availableFields=!L.availableFields||1===L.availableFields.length&&"*"===L.availableFields[0]?new Set(this.fieldsIndex.fields.map(T=>T.name)):new Set(L.availableFields.map(T=>this.fieldsIndex.get(T)?.name).filter(T=>null!=T));
L.scheduler&&L.priority&&(this._frameTask=L.scheduler.registerTask(L.priority))}destroy(){this._frameTask=B.removeMaybe(this._frameTask);this.clearCache();B.destroyMaybe(this._geometryQueryCache);this._changeHandle=B.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(L,T){T=p.signalFromSignalOrOptions(T);try{return(await this._executeQuery(L,
{},T)).createQueryResponse()}catch(X){if(X!==Q.queryEngineEmptyResult)throw X;return(new K.QueryEngineResult([],L,this)).createQueryResponse()}}async executeQueryForCount(L={},T){T=p.signalFromSignalOrOptions(T);try{return(await this._executeQuery(L,{returnGeometry:!1,returnCentroid:!1,outSR:null},T)).createQueryResponseForCount()}catch(X){if(X!==Q.queryEngineEmptyResult)throw X;return 0}}async executeQueryForExtent(L,T){T=p.signalFromSignalOrOptions(T);const X=L.outSR;try{const da=await this._executeQuery(L,
{returnGeometry:!0,returnCentroid:!1,outSR:null},T),ia=da.size;if(!ia)return{count:0,extent:null};const na=await this._getBounds(da.items,da.spatialReference,X||this.spatialReference);return{count:ia,extent:na}}catch(da){if(da===Q.queryEngineEmptyResult)return{count:0,extent:null};throw da;}}async executeQueryForIds(L,T){return this.executeQueryForIdSet(L,T).then(X=>Array.from(X))}async executeQueryForIdSet(L,T){T=p.signalFromSignalOrOptions(T);try{const X=await this._executeQuery(L,{returnGeometry:!0,
returnCentroid:!1,outSR:null},T),da=X.items,ia=new Set;await this._reschedule(()=>{for(const na of da)ia.add(X.featureAdapter.getObjectId(na))},T);return ia}catch(X){if(X===Q.queryEngineEmptyResult)return new Set;throw X;}}async executeQueryForSnapping(L,T){const X=p.signalFromSignalOrOptions(T),{point:da,distance:ia,returnEdge:na,vertexMode:qa}=L;if(!na&&"none"===qa)return{candidates:[]};let va=F.clone(L.query);va=await this._schedule(()=>Q.normalizeQueryLike(va,this.definitionExpression,this.spatialReference),
X);va=await this._reschedule(()=>S.validateQuery(va,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),X);(T=!a.equals(da.spatialReference,this.spatialReference))&&await P.checkProjectionSupport(da.spatialReference,this.spatialReference);var ta="number"===typeof ia?ia:ia.x,wa="number"===typeof ia?ia:ia.y;ta={xmin:da.x-ta,xmax:da.x+ta,ymin:da.y-wa,ymax:da.y+wa,spatialReference:da.spatialReference};ta=T?P.project(ta,
this.spatialReference):ta;if(!ta)return{candidates:[]};wa=(await q.normalizeCentralMeridian(t.fromJSON(da),null,{signal:X}))[0];const Ea=(await q.normalizeCentralMeridian(t.fromJSON(ta),null,{signal:X}))[0];if(null==wa||null==Ea)return{candidates:[]};const Da=new K.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(H(Ea.toJSON())),X),va,this);await this._reschedule(()=>this._executeObjectIdsQuery(Da),X);await this._reschedule(()=>this._executeTimeQuery(Da),X);await this._reschedule(()=>
this._executeAttributesQuery(Da),X);await this._reschedule(()=>this._executeGeometryQueryForSnapping(Da,X),X);wa=wa.toJSON();wa=T?P.project(wa,this.spatialReference):wa;return Da.createSnappingResponse({...L,point:wa,distance:T?Math.max(ta.xmax-ta.xmin,ta.ymax-ta.ymin)/2:ia},da.spatialReference)}async executeQueryForLatestObservations(L,T){T=p.signalFromSignalOrOptions(T);if(!this.timeInfo?.trackIdField)throw new y("unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:L,timeInfo:this.timeInfo});
try{const X=await this._executeQuery(L,{},T);await this._reschedule(()=>this._filterLatest(X),T);return X.createQueryResponse()}catch(X){if(X!==Q.queryEngineEmptyResult)throw X;return(new K.QueryEngineResult([],L,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(L={},T,X){X=p.signalFromSignalOrOptions(X);const {field:da,normalizationField:ia,valueExpression:na}=T;return(await this._executeQueryForStatistics(L,{field:da,normalizationField:ia,valueExpression:na},X)).createSummaryStatisticsResponse(T)}async executeQueryForUniqueValues(L=
{},T,X){X=p.signalFromSignalOrOptions(X);const {field:da,field2:ia,field3:na,valueExpression:qa}=T;return(await this._executeQueryForStatistics(L,{field:da,field2:ia,field3:na,valueExpression:qa},X)).createUniqueValuesResponse(T)}async executeQueryForClassBreaks(L={},T,X){X=p.signalFromSignalOrOptions(X);const {field:da,normalizationField:ia,valueExpression:na}=T;return(await this._executeQueryForStatistics(L,{field:da,normalizationField:ia,valueExpression:na},X)).createClassBreaksResponse(T)}async executeQueryForHistogram(L=
{},T,X){X=p.signalFromSignalOrOptions(X);const {field:da,normalizationField:ia,valueExpression:na}=T;return(await this._executeQueryForStatistics(L,{field:da,normalizationField:ia,valueExpression:na},X)).createHistogramResponse(T)}async fetchRecomputedExtents(L){L=p.signalFromSignalOrOptions(L);this._timeExtentPromise||(this._timeExtentPromise=W.getTimeExtent(this.timeInfo,this.featureStore));const [T,X]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);p.throwIfAborted(L);return{fullExtent:T,
timeExtent:X}}async _getBounds(L,T,X){const da=z.set(z.create(),z.negativeInfinity);await this.featureStore.forEachBounds(L,ia=>z.expandWithAABB(da,ia));L={xmin:da[0],ymin:da[1],xmax:da[3],ymax:da[4],spatialReference:C.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(da[2])&&isFinite(da[5])&&(L.zmin=da[2],L.zmax=da[5],L.hasZ=!0);T=P.project(L,T,X);T.spatialReference=C.cleanFromGeometryEngine(X);0===T.xmax-T.xmin&&(X=d.getMetersPerUnitForSR(T.spatialReference),T.xmin-=X,T.xmax+=
X);0===T.ymax-T.ymin&&(X=d.getMetersPerUnitForSR(T.spatialReference),T.ymin-=X,T.ymax+=X);this.hasZ&&null!=T.zmin&&null!=T.zmax&&0===T.zmax-T.zmin&&(X=d.getMetersPerUnitForSR(T.spatialReference),T.zmin-=X,T.zmax+=X);return T}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise="getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getAllFeatures().then(L=>this._getBounds(L,this.spatialReference,
this.spatialReference)));return this._fullExtentPromise}async _schedule(L,T){return null!=this._frameTask?this._frameTask.schedule(L,T):L(v.noBudget)}async _reschedule(L,T){return null!=this._frameTask?this._frameTask.reschedule(L,T):L(v.noBudget)}async _getAllFeaturesQueryEngineResult(L){return new K.QueryEngineResult(await this._getAllFeatures(),L,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const X=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(da=>X.push(da))})().then(()=>
X)}const L=this._allFeaturesPromise,T=await L;return L===this._allFeaturesPromise?T.slice():this._getAllFeatures()}async _executeQuery(L,T,X){L=F.clone(L);L=await this._schedule(()=>Q.normalizeQuery(L,this.definitionExpression,this.spatialReference),X);L=await this._reschedule(()=>S.validateQuery(L,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),X);L={...L,...T};const da=await this._reschedule(()=>this._executeSceneFilterQuery(L,
X),X),ia=await this._reschedule(()=>this._executeGeometryQuery(L,da,X),X);await this._reschedule(()=>this._executeAggregateIdsQuery(ia),X);await this._reschedule(()=>this._executeObjectIdsQuery(ia),X);await this._reschedule(()=>this._executeTimeQuery(ia),X);await this._reschedule(()=>this._executeAttributesQuery(ia),X);return ia}async _executeSceneFilterQuery(L,T){if(null==L.sceneFilter)return null;const {outSR:X,returnGeometry:da,returnCentroid:ia}=L;var na=this.featureStore.featureSpatialReference,
qa=L.sceneFilter.geometry;const va=null==na||a.equals(na,qa.spatialReference)?qa:P.project(qa,na);if(!va)return null;na=da||ia;na=a.isValid(X)&&!a.equals(this.spatialReference,X)&&na?async Da=>this._project(Da,X):Da=>Da;const ta=this.featureAdapter;qa=await this._reschedule(()=>this._searchFeatures(H(va)),T);if("disjoint"===L.sceneFilter.spatialRelationship){if(!qa.length)return null;const Da=new Set;for(var wa of qa)Da.add(ta.getObjectId(wa));const Pa=await this._reschedule(()=>this._getAllFeatures(),
T);wa=await this._reschedule(async()=>{const Sa=await ba.getSpatialQueryOperator("esriSpatialRelDisjoint",va,this.geometryType,this.hasZ,this.hasM),Ta=await this._runSpatialFilter(Pa,Oa=>!Da.has(ta.getObjectId(Oa))||Sa(ta.getGeometry(Oa)),T);return new K.QueryEngineResult(Ta,L,this)},T);return na(wa)}if(!qa.length)return new K.QueryEngineResult([],L,this);if(this._canExecuteSinglePass(va,L))return na(new K.QueryEngineResult(qa,L,this));const Ea=await ba.getSpatialQueryOperator("esriSpatialRelContains",
va,this.geometryType,this.hasZ,this.hasM);wa=await this._runSpatialFilter(qa,Da=>Ea(ta.getGeometry(Da)),T);return na(new K.QueryEngineResult(wa,L,this))}async _executeGeometryQuery(L,T,X){if(null!=T&&0===T.items.length)return T;L=null!=T?T.query:L;const {geometry:da,outSR:ia,spatialRel:na,returnGeometry:qa,returnCentroid:va}=L;var ta=this.featureStore.featureSpatialReference;const wa=!da||null==ta||a.equals(ta,da.spatialReference)?da:P.project(da,ta),Ea=qa||va,Da=a.isValid(ia)&&!a.equals(this.spatialReference,
ia),Pa=this._geometryQueryCache&&null==T?Da&&Ea?JSON.stringify({originalFilterGeometry:da,spatialRelationship:na,outSpatialReference:ia}):JSON.stringify({originalFilterGeometry:da,spatialRelationship:na}):null;ta=Pa?this._geometryQueryCache.get(Pa):null;if(null!=ta)return new K.QueryEngineResult(ta,L,this);ta=async E=>{Da&&Ea&&await this._project(E,ia);Pa&&this._geometryQueryCache.put(Pa,E.items,E.items.length+1);return E};if(!wa)return ta(null!=T?T:await this._getAllFeaturesQueryEngineResult(L));
const Sa=this.featureAdapter;let Ta=await this._reschedule(()=>this._searchFeatures(H(da)),X);if("esriSpatialRelDisjoint"===na){if(!Ta.length)return ta(null!=T?T:await this._getAllFeaturesQueryEngineResult(L));const E=new Set;for(var Oa of Ta)E.add(Sa.getObjectId(Oa));const Y=null!=T?T.items:await this._reschedule(()=>this._getAllFeatures(),X);Oa=await this._reschedule(async()=>{const aa=await ba.getSpatialQueryOperator(na,wa,this.geometryType,this.hasZ,this.hasM),ja=await this._runSpatialFilter(Y,
A=>!E.has(Sa.getObjectId(A))||aa(Sa.getGeometry(A)),X);return new K.QueryEngineResult(ja,L,this)},X);return ta(Oa)}if(null!=T){const E=new g.PositionHint;Ta=Ta.filter(Y=>0<=g.indexOf(T.items,Y,T.items.length,E))}if(!Ta.length)return ta=new K.QueryEngineResult([],L,this),Pa&&this._geometryQueryCache.put(Pa,ta.items,1),ta;if(this._canExecuteSinglePass(wa,L))return ta(new K.QueryEngineResult(Ta,L,this));const k=await ba.getSpatialQueryOperator(na,wa,this.geometryType,this.hasZ,this.hasM);Oa=await this._runSpatialFilter(Ta,
E=>k(Sa.getGeometry(E)),X);return ta(new K.QueryEngineResult(Oa,L,this))}async _executeGeometryQueryForSnapping(L,T){const {query:X}=L,{spatialRel:da}=X;if(L?.items?.length&&X.geometry&&da){var ia=await ba.getSpatialQueryOperator(da,X.geometry,this.geometryType,this.hasZ,this.hasM);T=await this._runSpatialFilter(L.items,na=>ia(na.geometry),T);L.items=T}}_executeAggregateIdsQuery(L){if(0!==L.items.length&&L.query.aggregateIds?.length&&null!=this.aggregateAdapter){var T=new Set;for(const da of L.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(da).forEach(ia=>
T.add(ia));var X=this.featureAdapter.getObjectId;L.items=L.items.filter(da=>T.has(X(da)))}}_executeObjectIdsQuery(L){if(0!==L.items.length&&L.query.objectIds?.length){var T=new Set(L.query.objectIds),X=this.featureAdapter.getObjectId;L.items=L.items.filter(da=>T.has(X(da)))}}_executeTimeQuery(L){if(0!==L.items.length){var T=W.getTimeOperator(this.timeInfo,L.query.timeExtent,this.featureAdapter);null!=T&&(L.items=L.items.filter(T))}}_executeAttributesQuery(L){if(0!==L.items.length){var T=n.getWhereClause(L.query.where,
this.fieldsIndex);if(T){if(!T.isStandardized)throw new TypeError("Where clause is not standardized");L.items=L.items.filter(X=>T.testFeature(X,this.featureAdapter))}}}async _runSpatialFilter(L,T,X){if(!T)return L;if(null==this._frameTask)return L.filter(qa=>T(qa));let da=0;const ia=[],na=async qa=>{for(;da<L.length;){const va=L[da++];T(va)&&(ia.push(va),qa.madeProgress());qa.done&&await this._reschedule(ta=>na(ta),X)}};return this._reschedule(qa=>na(qa),X).then(()=>ia)}_filterLatest(L){const {trackIdField:T,
startTimeField:X,endTimeField:da}=this.timeInfo,ia=da||X,na=new Map,qa=this.featureAdapter.getAttribute;for(const va of L.items){const ta=qa(va,T),wa=qa(va,ia),Ea=na.get(ta);(!Ea||wa>qa(Ea,ia))&&na.set(ta,va)}L.items=Array.from(na.values())}_canExecuteSinglePass(L,T){({spatialRel:T}=T);return ba.canQueryWithRBush(L)&&("esriSpatialRelEnvelopeIntersects"===T||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===T||"esriSpatialRelContains"===T))}async _project(L,T){if(!T||a.equals(this.spatialReference,
T))return L;const X=this.featureAdapter;let da=void 0;try{const ia=await this._getFullExtent();da=r.getTransformation(this.spatialReference,T,ia)}catch{}T=await P.projectMany(L.items.map(ia=>C.getGeometry(this.geometryType,this.hasZ,this.hasM,X.getGeometry(ia))),this.spatialReference,T,da);L.items=T.map((ia,na)=>X.cloneWithGeometry(L.items[na],u.convertFromGeometry(ia,this.hasZ,this.hasM)));return L}async _searchFeatures(L){const T=new Set;await Promise.all(L.map(X=>this.featureStore.forEachInBounds(X,
da=>T.add(da))));L=Array.from(T.values());T.clear();return L}async _executeQueryForStatistics(L,T,X){L=F.clone(L);try{L=await this._schedule(()=>Q.normalizeQuery(L,this.definitionExpression,this.spatialReference),X);L=await this._reschedule(()=>S.validateStatisticsQuery(L,T,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),X);const da=await this._reschedule(()=>this._executeSceneFilterQuery(L,X),X),ia=await this._reschedule(()=>
this._executeGeometryQuery(L,da,X),X);await this._reschedule(()=>this._executeAggregateIdsQuery(ia),X);await this._reschedule(()=>this._executeObjectIdsQuery(ia),X);await this._reschedule(()=>this._executeTimeQuery(ia),X);await this._reschedule(()=>this._executeAttributesQuery(ia),X);return ia}catch(da){if(da!==Q.queryEngineEmptyResult)throw da;return new K.QueryEngineResult([],L,this)}}}c.Feature=m;c.QueryEngine=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports",
"./PooledArray"],function(c,g){c.RemoveMode=void 0;(function(f){f[f.ALL=0]="ALL";f[f.SOME=1]="SOME"})(c.RemoveMode||(c.RemoveMode={}));class y{constructor(f,p,d){this.name=f;this._storage=p;this.id=`${F++}:`;this.size=0;this.maxSize=-1;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);d&&(this._storage.registerRemoveFunc(this.id,d),this._removeFunc=!0)}destroy(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);
this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(f){return this._storage.getSize(this,f)}resetHitRate(){this._hit=this._miss=0}put(f,p,d,r=0){this._storage.put(this,f,p,d,r)}pop(f){f=this._storage.pop(this,f);void 0===f?++this._miss:++this._hit;return f}get(f){f=this._storage.get(this,f);void 0===f?++this._miss:++this._hit;return f}peek(f){return this._storage.peek(this,f)}updateSize(f,p,d){this._storage.updateSize(this,f,
p,d)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class w{get size(){return this._size}constructor(f=10485760){this._maxSize=f;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new g;this._users=new g}destroy(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null}register(f){this._users.push(f)}deregister(f){this._users.removeUnordered(f)}registerRemoveFunc(f,
p){this._removeFuncs.push([f,p])}deregisterRemoveFunc(f){this._removeFuncs.filterInPlace(p=>p[0]!==f)}get maxSize(){return this._maxSize}set maxSize(f){this._maxSize=Math.max(f,-1);this._checkSize()}getSize(f,p){return this._db.get(f.id+p)?.size??0}put(f,p,d,r,z){p=f.id+p;const D=this._db.get(p);D&&(this._size-=D.size,f.size-=D.size,this._db.delete(p),D.entry!==d&&this._notifyRemove(p,D.entry,D.size,c.RemoveMode.ALL));r>this._maxSize?this._notifyRemove(p,d,r,c.RemoveMode.ALL):void 0===d?console.warn("Refusing to cache undefined entry "):
!r||0>r?(console.warn(`Refusing to cache entry with size ${r} for key ${p}`),this._notifyRemove(p,d,0,c.RemoveMode.ALL)):(this._db.set(p,new B(d,r,1+Math.max(z,-4)- -3)),this._size+=r,f.size+=r,this._checkSize())}updateSize(f,p,d,r){p=f.id+p;const z=this._db.get(p);if(z&&z.entry===d){this._size-=z.size;for(f.size-=z.size;r>this._maxSize;)if(r=this._notifyRemove(p,d,r,c.RemoveMode.SOME),!(null!=r&&0<r)){this._db.delete(p);return}z.size=r;this._size+=r;f.size+=r;this._checkSize()}}pop(f,p){p=f.id+p;
const d=this._db.get(p);if(d)return this._size-=d.size,f.size-=d.size,this._db.delete(p),++this._hit,d.entry;++this._miss}get(f,p){p=f.id+p;f=this._db.get(p);if(void 0===f)++this._miss;else return this._db.delete(p),f.lives=f.lifetime,this._db.set(p,f),++this._hit,f.entry}peek(f,p){(f=this._db.get(f.id+p))?++this._hit:++this._miss;return f?.entry}get performanceInfo(){const f={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+
"%",Entries:this._db.size.toString()},p={},d=[];this._db.forEach((D,I)=>{const t=D.lifetime;d[t]=(d[t]||0)+D.size;this._users.forAll(q=>{const {id:a,name:u}=q;I.startsWith(a)&&(p[u]=(p[u]||0)+D.size)})});const r={};this._users.forAll(D=>{const I=D.name;"hitRate"in D&&"number"===typeof D.hitRate&&!isNaN(D.hitRate)&&0<D.hitRate?(p[I]=p[I]||0,r[I]=Math.round(100*D.hitRate)+"%"):r[I]="0%"});var z=Object.keys(p);z.sort((D,I)=>p[I]-p[D]);z.forEach(D=>f[D]=Math.round(p[D]/2**20)+"MB / "+r[D]);for(z=d.length-
1;0<=z;--z){const D=d[z];D&&(f["Priority "+(z+-3-1)]=Math.round(D/this._size*100)+"%")}return f}resetStats(){this._hit=this._miss=0;this._users.forAll(f=>f.resetHitRate())}clear(f){const p=f.id;this._db.forEach((d,r)=>{r.startsWith(p)&&(this._size-=d.size,this._db.delete(r),this._notifyRemove(r,d.entry,d.size,c.RemoveMode.ALL))});f.size=0}clearAll(){this._db.forEach((f,p)=>this._notifyRemove(p,f.entry,f.size,c.RemoveMode.ALL));this._users.forAll(f=>f.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/
(this._hit+this._miss)}_notifyRemove(f,p,d,r){let z;this._removeFuncs.some(D=>f.startsWith(D[0])?(D=D[1](p,r,d),"number"===typeof D&&(z=D),!0):!1);return z}_checkSize(){this._users.forAll(f=>this._checkSizeLimits(f));this._checkSizeLimits()}_checkSizeLimits(f){const p=f??this;if(!(0>p.maxSize||p.size<=p.maxSize)){for(var d=f?.id,r=!0;r;){r=!1;for(const [z,D]of this._db)if(0===D.lifetime&&(!d||z.startsWith(d))){this._purgeItem(z,D,f);if(p.size<=.9*p.maxSize)return;r||=this._db.has(z)}}for(const [z,
D]of this._db)if(!d||z.startsWith(d))if(this._purgeItem(z,D,f),p.size<=.9*p.maxSize)break}}_purgeItem(f,p,d=this._users.find(r=>f.startsWith(r.id))){this._db.delete(f);if(1>=p.lives){this._size-=p.size;d&&(d.size-=p.size);const r=this._notifyRemove(f,p.entry,p.size,c.RemoveMode.SOME);null!=r&&0<r&&(this._size+=r,d&&(d.size+=r),p.lives=p.lifetime,p.size=r,this._db.set(f,p))}else--p.lives,this._db.set(f,p)}}let F=0;class B{constructor(f,p,d){this.entry=f;this.size=p;this.lives=this.lifetime=d}}c.MemCache=
y;c.MemCacheStorage=w;c.MinPriority=-3;c.NoPriority=-4;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(c,g,y,w,F,B,f,p,d,r,z){function D(C){const P=[];let e=0,K=0;for(let Q=0;Q<C.length;Q++){const S=
C[Q];let ba=null;for(let W=0;W<S.length;W++)ba=S[W],P.push(ba),0===W?K=e=ba[0]:(e=Math.min(e,ba[0]),K=Math.max(K,ba[0]));ba&&P.push([(e+K)/2,0])}return P}function I(C,P){if(!(C instanceof B||C instanceof F))throw n().error("straightLineDensify: the input geometry is neither polyline nor polygon"),new y("straightLineDensify: the input geometry is neither polyline nor polygon");var e=f.getGeometryParts(C);const K=[];for(const S of e){e=[];K.push(e);e.push([S[0][0],S[0][1]]);for(let ba=0;ba<S.length-
1;ba++){const W=S[ba][0],U=S[ba][1],v=S[ba+1][0],H=S[ba+1][1];var Q=Math.sqrt((v-W)*(v-W)+(H-U)*(H-U));const m=(H-U)/Q,h=(v-W)/Q,x=Q/P;if(1<x){for(let N=1;N<=x-1;N++){const L=N*P;e.push([h*L+W,m*L+U])}Q=(Q+Math.floor(x-1)*P)/2;e.push([h*Q+W,m*Q+U])}e.push([v,H])}}return"polygon"===C.type?new F({rings:K,spatialReference:C.spatialReference}):new B({paths:K,spatialReference:C.spatialReference})}function t(C,P,e){P&&(C=I(C,1E6),C=d.webMercatorToGeographic(C,!0));e&&(C=f.updatePolyGeometry(C,e));return C}
function q(C,P,e){if(Array.isArray(C)){var K=C[0];K>P?(e=f.offsetMagnitude(K,P),C[0]=K+-2*e*P):K<e&&(P=f.offsetMagnitude(K,e),C[0]=K+-2*P*e)}else K=C.x,K>P?(e=f.offsetMagnitude(K,P),C=C.clone().offset(-2*e*P,0)):K<e&&(P=f.offsetMagnitude(K,e),C=C.clone().offset(-2*P*e,0));return C}function a(C,P){let e=-1;for(let K=0;K<P.cutIndexes.length;K++){const Q=P.cutIndexes[K],S=P.geometries[K],ba=f.getGeometryParts(S);for(let W=0;W<ba.length;W++){const U=ba[W];U.some(v=>{if(180>v[0])return!0;v=0;for(var H=
0;H<U.length;H++){var m=U[H][0];v=m>v?m:v}v=Number(v.toFixed(9));v=-360*f.offsetMagnitude(v,180);for(H=0;H<U.length;H++)m=S.getPoint(W,H),S.setPoint(W,H,m.clone().offset(v,0));return!0})}if(Q===e)if("polygon"===C[0].type)for(const W of f.getGeometryParts(S))C[Q]=C[Q].addRing(W);else{if("polyline"===C[0].type)for(const W of f.getGeometryParts(S))C[Q]=C[Q].addPath(W)}else e=Q,C[Q]=S}return C}async function u(C,P,e){if(!Array.isArray(C))return u([C],P);P&&"string"!==typeof P&&n().warn("normalizeCentralMeridian()",
"The url object is deprecated, use the url string instead");var K="string"===typeof P?P:P?.url??g.geometryServiceUrl;let Q,S,ba;let W=0;var U=[];P=[];for(var v of C)if(null==v)P.push(v);else{if(!H){var H=v.spatialReference;var m=p.getInfo(H);var h=(Q=H.isWebMercator)?102100:4326;S=f.cutParams[h].maxX;ba=f.cutParams[h].minX;var x=f.cutParams[h].plus180Line;h=f.cutParams[h].minus180Line}if(m)if("mesh"===v.type)P.push(v);else if("point"===v.type)P.push(q(v.clone(),S,ba));else if("multipoint"===v.type){var N=
v.clone();N.points=N.points.map(L=>q(L,S,ba));P.push(N)}else if("extent"===v.type)N=v.clone()._normalize(!1,!1,m),P.push(N.rings?new F(N):N);else if(v.extent){N=v.extent;const L=2*f.offsetMagnitude(N.xmin,ba)*S;let T=0===L?v.clone():f.updatePolyGeometry(v.clone(),L);N.offset(L,0);let {xmin:X,xmax:da}=N;X=Number(X.toFixed(9));da=Number(da.toFixed(9));N.intersects(x)&&da!==S?(W=da>W?da:W,T=t(T,Q),U.push(T),P.push("cut")):N.intersects(h)&&X!==ba?(W=2*da*S>W?2*da*S:W,T=t(T,Q,360),U.push(T),P.push("cut")):
P.push(T)}else P.push(v.clone());else P.push(v)}H=f.offsetMagnitude(W,S);m=-90;x=H;for(v=new B;0<H;)h=-180+360*H,v.addPath([[h,m],[h,-1*m]]),m*=-1,H--;if(0<U.length&&0<x){H=await r.cut(K,U,v,e);H=a(U,H);m=[];U=[];for(x=0;x<P.length;x++)v=P[x],"cut"!==v?U.push(v):(v=H.shift(),h=C[x],null!=h&&"polygon"===h.type&&h.rings&&1<h.rings.length&&v.rings.length>=h.rings.length?(m.push(v),U.push("simplify")):U.push(Q?d.geographicToWebMercator(v):v));if(!m.length)return U;P=await z.simplify(K,m,e);C=[];for(e=
0;e<U.length;e++)K=U[e],"simplify"!==K?C.push(K):C.push(Q?d.geographicToWebMercator(P.shift()):P.shift());return C}C=[];for(e=0;e<P.length;e++)K=P[e],"cut"!==K?C.push(K):(K=U.shift(),C.push(!0===Q?d.geographicToWebMercator(K):K));return C}const n=()=>w.getLogger("esri.geometry.support.normalizeUtils");c.getClosestDenormalizedXToReference=function(C,P,e){e=p.getInfo(e);if(null==e)return C;const [K,Q]=e.valid;e=2*Q;let S=0,ba=0;P>Q?S=Math.ceil(Math.abs(P-Q)/e):P<K&&(S=-Math.ceil(Math.abs(P-K)/e));C>
Q?ba=Math.ceil(Math.abs(C-Q)/e):C<K&&(ba=-Math.ceil(Math.abs(C-K)/e));C+=(S-ba)*e;P=C-P;P>Q?C-=e:P<K&&(C+=e);return C};c.getDenormalizedExtent=function(C){if(!C)return null;const P=C.extent;if(!P)return null;var e=C.spatialReference&&p.getInfo(C.spatialReference);if(!e)return P;const [K,Q]=e.valid;({width:e}=P);let {xmin:S,xmax:ba}=P;[S,ba]=[ba,S];if("extent"===C.type||0===e||e<=Q||e>2*Q||S<K||ba>Q)return P;let W;switch(C.type){case "polygon":if(1<C.rings.length)W=D(C.rings);else return P;break;case "polyline":if(1<
C.paths.length)W=D(C.paths);else return P;break;case "multipoint":W=C.points}C=P.clone();for(let U=0;U<W.length;U++){let v=W[U][0];0>v?(v+=Q,ba=Math.max(v,ba)):(v-=Q,S=Math.min(v,S))}C.xmin=S;C.xmax=ba;return C.width<e?(C.xmin-=Q,C.xmax-=Q,C):P};c.normalizeCentralMeridian=u;c.normalizeMapX=function(C,P){if(P=p.getInfo(P)){const [e,K]=P.valid;P=K-e;if(C<e)for(;C<e;)C+=P;if(C>K)for(;C>K;)C-=P}return C};c.straightLineDensify=I;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports",
"../Polyline","../SpatialReference","./jsonUtils"],function(c,g,y,w){function F(B){return w.isPolygon(B)?B.rings:B.paths}g={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new g({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:y.WebMercator}),minus180Line:new g({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:y.WebMercator})},4326:{maxX:180,
minX:-180,plus180Line:new g({paths:[[[180,-180],[180,180]]],spatialReference:y.WGS84}),minus180Line:new g({paths:[[[-180,-180],[-180,180]]],spatialReference:y.WGS84})}};c.cutParams=g;c.getGeometryParts=F;c.offsetMagnitude=function(B,f){return Math.ceil((B-f)/(2*f))};c.updatePolyGeometry=function(B,f){const p=F(B);for(const d of p)for(const r of d)r[0]+=f;return B};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),
function(c,g,y,w,F,B){c.cut=async function(f,p,d,r){f=B.parseUrl(f);const z=p[0].spatialReference;p={...r,responseType:"json",query:{...f.query,f:"json",sr:F.srToRESTValue(z),target:JSON.stringify({geometryType:w.getJsonType(p[0]),geometries:p}),cutter:JSON.stringify(d)}};p=await y(f.path+"/cut",p);const {cutIndexes:D,geometries:I=[]}=p.data;return{cutIndexes:D,geometries:I.map(t=>{t=w.fromJSON(t);t.spatialReference=z;return t})}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),
function(c,g,y,w,F,B){function f(p,d,r){const z={};for(const I in p)if("declaredClass"!==I){var D=p[I];null!=D&&"function"!==typeof D&&(Array.isArray(D)?z[I]=D.map(t=>f(t)):"object"===typeof D?D.toJSON?(D=D.toJSON(r?.[I]),z[I]=d?D:JSON.stringify(D)):z[I]=d?D:JSON.stringify(D):z[I]=D)}return z}c.asValidOptions=function(p,d){return d?{...d,query:{...(p??{}),...d.query}}:{query:p}};c.encode=f;c.getToken=function(p,d){return p?B.supportsApiKey(p)&&(d||g.apiKey)?d||g.apiKey:y.id?.findCredential(p)?.token:
null};c.parseUrl=function(p){return"string"===typeof p?F.urlToObject(p):w.clone(p)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(c,g,y,w,F,B){c.simplify=async function(f,p,d){const r="string"===typeof f?y.urlToObject(f):f;f=p[0].spatialReference;const z=w.getJsonType(p[0]);p={...d,
query:{...r.query,f:"json",sr:F.srToRESTValue(f),geometries:JSON.stringify(B.encodeGeometries(p))}};({data:p}=await g(r.path+"/simplify",p));return B.decodeGeometries(p.geometries,z,f)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(c,g){c.decodeGeometries=function(y,w,F){const B=g.getGeometryType(w);return y.map(f=>{f=B.fromJSON(f);f.spatialReference=F;return f})};c.encodeGeometries=
function(y){return{geometryType:g.getJsonType(y[0]),geometries:y.map(w=>w.toJSON())}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(c,g,y,w){function F(t,q,a={}){const u=B(q,t);if(!u)throw a=z.getError(q,t),new g("unsupported-query","invalid SQL expression",{expression:q,error:a});t=a.expressionName||"expression";
if(a.validateStandardized&&!u.isStandardized)throw new g("unsupported-query",`${t} is not standard`,{expression:q});if(a.validateAggregate&&!u.isAggregate)throw new g("unsupported-query",`${t} does not contain a valid aggregate function`,{expression:q});return u.fieldNames}function B(t,q){return t?z.get(t,q):null}function f(t){return/\((.*?)\)/.test(t)?t:t.split(" as ")[0]}function p(t,q,a,u={}){const n=new Map;d(n,t,q,u.allowedFieldTypes??I,a);if(n.size)throw new g("unsupported-query",`${u.expressionName??
"expression"} contains invalid or missing fields`,{errors:Array.from(n.values()),query:u.query});}function d(t,q,a,u,n){n=n.includes("*")?[...a,...n.filter(C=>"*"!==C)]:n;for(const C of n)if(q.get(C))r(t,q,a,u,C);else try{const P=f(C),e=F(q,P,{validateStandardized:!0});for(const K of e)r(t,q,a,u,K)}catch(P){t.set(C,{type:"expression-error",expression:C,error:P})}}function r(t,q,a,u,n){(q=q.get(n))?a.has(q.name)?"all"!==u&&!1===u?.has(q.type)&&t.set(n,{type:"invalid-type",fieldName:q.name,fieldType:w.kebabDict.fromJSON(q.type),
allowedFieldTypes:Array.from(u,C=>w.kebabDict.fromJSON(C))}):t.set(n,{type:"missing-field",fieldName:q.name}):t.set(n,{type:"invalid-field",fieldName:n})}const z=new y.WhereClauseCache(50,500);y=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));const D=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),I=new Set(["esriFieldTypeString",
"esriFieldTypeGUID","esriFieldTypeGlobalID",...y,...D]);c.allDateAndTimeFieldTypes=D;c.getAliasFromFieldName=function(t){return t.split(" as ")[1]};c.getExpressionFromFieldName=f;c.getWhereClause=B;c.numericFieldTypes=y;c.validateFields=p;c.validateHaving=function(t,q,a,u,n){if(!a)return!0;const C=F(t,a,{validateAggregate:!0,expressionName:"having clause"});p(t,q,C,{expressionName:"having clause",query:n});if(!B(a,t)?.getExpressions().every(P=>{const {aggregateType:e,field:K}=P,Q=t.get(K)?.name;return u.some(S=>
{const {onStatisticField:ba,statisticType:W}=S;return t.get(ba)?.name===Q&&W.toLowerCase().trim()===e})}))throw new g("unsupported-query","expressions in having clause should also exist in outStatistics",{having:a});return!0};c.validateWhere=function(t,q,a,u){if(!a)return!0;a=F(t,a,{validateStandardized:!0,expressionName:"where clause"});p(t,q,a,{expressionName:"where clause",query:u});return!0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../LRUCache","./WhereClause"],function(c,g,y){class w{constructor(F,B){this._cache=new g.LRUCache(F);this._invalidCache=new g.LRUCache(B)}get(F,B){const f=`${B.uid}:${F}`,p=this._cache.get(f);if(p)return p;if(null!=this._invalidCache.get(f))return null;try{const d=y.WhereClause.create(F,B);this._cache.put(f,d);return d}catch(d){return this._invalidCache.put(f,d),null}}getError(F,B){return this._invalidCache.get(`${B.uid}:${F}`)??null}}c.WhereClauseCache=w;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(c,g){class y{constructor(w,F){this._storage=new g.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=w;this._storage.register(this);F&&this._storage.registerRemoveFunc("",F)}destroy(){this._storage.deregister(this);this._storage.destroy()}put(w,F,B=1){this._storage.put(this,w,F,B,1)}pop(w){return this._storage.pop(this,w)}get(w){return this._storage.get(this,w)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(w){this._storage.maxSize=
w}resetHitRate(){}}c.LRUCache=y;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../../arcade/featureset/support/errorsupport ../has ./AggregateFunctions ./DateOnly ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),function(c,g,y,w,F,B,f,p,d,r,z,D,I,t,q){function a(v){return Array.isArray(v)?
v:[v]}function u(v){return null!==v?!0!==v:null}function n(v,H){return null!=v&&null!=H?!0===v&&!0===H:!1===v||!1===H?!1:null}function C(v,H){return null!=v&&null!=H?!0===v||!0===H:!0===v||!0===H?!0:null}function P(v,H,m){if(null==v)return null;m=!1;for(const h of H)if(null==h)m=null;else if(v===h){m=!0;break}else if(p.isDateOrTimeValue(v)&&p.isDateOrTimeValue(h)&&(m=p.sqlCompare(v,h,"\x3d")))break;return m}function e(v,H,m){if(null==v)return null;let h="",x=W.Normal;for(let N=0;N<H.length;N++){const L=
H.charAt(N);switch(x){case W.Normal:L===m?x=W.Escaped:h="-[]/{}()*+?.\\^$|".includes(L)?h+("\\"+L):"%"===L?h+".*":"_"===L?h+".":h+L;break;case W.Escaped:h="-[]/{}()*+?.\\^$|".includes(L)?h+("\\"+L):h+L,x=W.Normal}}return(new RegExp("^"+h+"$","m")).test(v)}function K(v,H,m,h){v=h.getAttribute(v,H);H=m?.get(H);return null==v||"esriFieldTypeDate"!==H?.type&&"date"!==H?.type?null==v||"esriFieldTypeDateOnly"!==H?.type&&"date-only"!==H?.type?null==v||"esriFieldTypeTimeOnly"!==H?.type&&"time-only"!==H?.type?
null==v||"esriFieldTypeTimestampOffset"!==H?.type&&"timestamp-offset"!==H?.type?v:new z.SqlTimeStampOffset(v):I.TimeOnly.fromReader(v):B.DateOnly.fromReader(v):d.convertToExecutingTimeZone(new Date(v),m?.getLuxonTimeZone(H.name)??q.FixedOffsetZone.utcInstance)}const Q=new Set(["current_timestamp","current_date","current_time"]);class S{static makeBool(v){return!0===v}static featureValue(v,H,m,h){return K(v,H,m,h)}static equalsNull(v){return null===v}static applyLike(v,H,m){return e(v,H,m)}static ensureArray(v){return a(v)}static applyIn(v,
H,m){return P(v,H)}static currentDate(v){return B.DateOnly.fromNow(v)}static makeSqlInterval(v,H,m){return r.SqlInterval.createFromValueAndQualifier(v,H,m)}static convertInterval(v){return v instanceof r.SqlInterval?v.valueInMilliseconds():v}static currentTimestamp(v){return d.convertToExecutingTimeZone(new Date,v)}static compare(v,H,m,h){return p.sqlCompare(H,m,v)}static calculate(v,H,m,h){return f.sqlCalculateFunction(v,H,m,h)}static evaluateTime(v){return d.parseTime(v)}static evaluateTimestamp(v,
H,m){return d.parseTimestamp(v,H,m)}static evaluateDate(v,H){return d.parseDate(v,H)}static evaluateFunction(v,H,m){return D.evaluateFunction(v,H,m)}static lookup(v,H){v=H[v];return void 0===v?null:v}static between(v,H,m){return null==v||null==H[0]||null==H[1]?null:p.sqlCompare(v,H[0],"\x3e\x3d")&&p.sqlCompare(v,H[1],"\x3c\x3d")}static notbetween(v,H,m){return null==v||null==H[0]||null==H[1]?null:p.sqlCompare(v,H[0],"\x3c")||p.sqlCompare(v,H[1],"\x3e")}static ternaryNot(v){return u(v)}static ternaryAnd(v,
H){return n(v,H)}static ternaryOr(v,H){return C(v,H)}}class ba{constructor(v,H,m="UTC"){this.fieldsIndex=H;this.timeZone=m;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=t.WhereGrammar.parse(v);const {isStandardized:h,isAggregate:x,referencedFieldNames:N}=this._extractExpressionInfo(H);this._referencedFieldNames=N;this.isStandardized=h;this.isAggregate=x}static convertValueToStorageFormat(v,H=null){if(null===H)return d.isDate(v)?v.getTime():d.isDateTime(v)?v.toMillis():d.isTimestampOffset(v)?
v.toStorageFormat():d.isTimeOnly(v)?v.toStorageString():d.isDateOnly(v)?v.toStorageFormat():v;switch(H){case "date":if(d.isDate(v))return v.getTime();if(d.isDateTime(v))return v.toMillis();if(d.isTimestampOffset(v))return v.toMilliseconds();if(d.isDateOnly(v))return v.toNumber();break;case "date-only":if(d.isDate(v))return B.DateOnly.fromDateJS(v).toString();if(d.isTimestampOffset(v))return B.DateOnly.fromSqlTimeStampOffset(v).toString();if(d.isDateTime(v))return B.DateOnly.fromDateTime(v).toString();
break;case "time-only":if(d.isDate(v))return I.TimeOnly.fromDateJS(v).toStorageString();if(d.isDateTime(v))return I.TimeOnly.fromDateTime(v).toStorageString();if(d.isTimestampOffset(v))return I.TimeOnly.fromSqlTimeStampOffset(v).toStorageString();if(d.isTimeOnly(v))return v.toStorageString();break;case "timestamp-offset":if(d.isDate(v))return z.SqlTimeStampOffset.fromJSDate(v).toStorageFormat();if(d.isDateTime(v))return z.SqlTimeStampOffset.fromDateTime(v).toStorageFormat();if(d.isTimestampOffset(v))return v.toStorageFormat()}return v}static create(v,
H,m="UTC"){return new ba(v,H,m)}get fieldNames(){return this._referencedFieldNames}testSet(v,H=U){return!!this._evaluateNode(this.parseTree,null,H,v)}calculateValue(v,H=U){v=this._evaluateNode(this.parseTree,v,H,null);return v instanceof r.SqlInterval?v.valueInMilliseconds()/864E5:v}calculateValueCompiled(v,H=U){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(v,this.parameters,H,this.fieldsIndex,this.timeZone);if(w("esri-csp-restrictions"))return this.calculateValue(v,
H);this._compileMe();return this.parseTree._compiledVersion(v,this.parameters,H,this.fieldsIndex,this.timeZone)}testFeature(v,H=U){return!!this._evaluateNode(this.parseTree,v,H,null)}testFeatureCompiled(v,H=U){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(v,this.parameters,H,this.fieldsIndex,this.timeZone);if(w("esri-csp-restrictions"))return this.testFeature(v,H);this._compileMe();return!!this.parseTree._compiledVersion(v,this.parameters,H,this.fieldsIndex,this.timeZone)}get hasDateFunctions(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,v=>{"current-time"===v.type?this._hasDateFunctions=!0:"function"===v.type&&(this._hasDateFunctions=this._hasDateFunctions||Q.has(v.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const v=new Set;this._visitAll(this.parseTree,H=>{"function"===H.type&&v.add(H.name.toLowerCase())});return Array.from(v)}getExpressions(){const v=new Map;this._visitAll(this.parseTree,H=>{if("function"===
H.type){const m=H.name.toLowerCase();H=H.args.value[0];if("column-reference"===H.type){H=H.column;const h=`${m}-${H}`;v.has(h)||v.set(h,{aggregateType:m,field:H})}}});return[...v.values()]}getVariables(){const v=new Set;this._visitAll(this.parseTree,H=>{"parameter"===H.type&&v.add(H.value.toLowerCase())});return Array.from(v)}_compileMe(){const v="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter",
"fieldsIndex","timeZone",v)).bind(S)}_extractExpressionInfo(v){const H=[],m=new Set;let h=!0,x=!1;this._visitAll(this.parseTree,N=>{switch(N.type){case "column-reference":var L=v?.get(N.column);let T;L?L=T=L.name??"":(T=N.column,L=T.toLowerCase());m.has(L)||(m.add(L),H.push(T));N.column=T;break;case "function":const {name:X,args:da}=N;N=da.value.length;h&&=D.isStandardized(X,N);!1===x&&(x=F.isAggregate(X,N))}});return{referencedFieldNames:Array.from(H),isStandardized:h,isAggregate:x}}_visitAll(v,
H){if(null!=v)switch(H(v),v.type){case "when-clause":this._visitAll(v.operand,H);this._visitAll(v.value,H);break;case "case-expression":for(const m of v.clauses)this._visitAll(m,H);"simple"===v.format&&this._visitAll(v.operand,H);null!==v.else&&this._visitAll(v.else,H);break;case "expression-list":for(const m of v.value)this._visitAll(m,H);break;case "unary-expression":this._visitAll(v.expr,H);break;case "binary-expression":this._visitAll(v.left,H);this._visitAll(v.right,H);break;case "function":this._visitAll(v.args,
H)}}evaluateNodeToJavaScript(v){switch(v.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(v.value)+", "+JSON.stringify(v.qualifier)+","+JSON.stringify(v.op)+")";case "case-expression":var H="";if("simple"===v.format){var m=this.evaluateNodeToJavaScript(v.operand);H="( ";for(let h=0;h<v.clauses.length;h++)H+=" (this.compare('\x3d',"+m+","+this.evaluateNodeToJavaScript(v.clauses[h].operand)+") ? ("+this.evaluateNodeToJavaScript(v.clauses[h].value)+") : "}else for(H=
"( ",m=0;m<v.clauses.length;m++)H+=" this.makeBool("+this.evaluateNodeToJavaScript(v.clauses[m].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(v.clauses[m].value)+") : ";H=null!==v.else?H+this.evaluateNodeToJavaScript(v.else):H+"null";return H+" )";case "parameter":return"this.lookup("+JSON.stringify(v.value.toLowerCase())+",lookups)";case "expression-list":H="[";for(m of v.value)"["!==H&&(H+=","),H+=this.evaluateNodeToJavaScript(m);return H+"]";case "unary-expression":return"this.ternaryNot("+
this.evaluateNodeToJavaScript(v.expr)+")";case "binary-expression":switch(v.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+" )";case "IS":if("null"!==v.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(v.left)+")";case "ISNOT":if("null"!==
v.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(v.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(v.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(v.right)+"), timeZone)";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(v.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(v.right)+"), timeZone))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(v.left)+
","+this.evaluateNodeToJavaScript(v.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+","+JSON.stringify(v.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+","+JSON.stringify(v.escape)+
"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(v.operator)+","+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(v.operator)+","+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+", timeZone)"}throw new y.SqlError(y.SqlErrorCodes.UnsupportedOperator,{operator:v.operator});
case "null":case "boolean":case "string":case "number":return JSON.stringify(v.value);case "time":return"this.evaluateTime("+JSON.stringify(v.value)+")";case "date":return"this.evaluateDate("+JSON.stringify(v.value)+", 'unknown')";case "timestamp":return"this.evaluateTimestamp("+JSON.stringify(v.value)+", 'unknown')";case "current-time":return"date"===v.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(v.column)+
",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(v.name)+","+this.evaluateNodeToJavaScript(v.args)+", timeZone)"}throw new y.SqlError(y.SqlErrorCodes.UnsupportedSyntax,{node:v.type});}_evaluateNode(v,H,m,h){switch(v.type){case "interval":return m=this._evaluateNode(v.value,H,m,h),r.SqlInterval.createFromValueAndQualifier(m,v.qualifier,v.op);case "case-expression":if("simple"===v.format){var x=this._evaluateNode(v.operand,H,m,h);for(var N=0;N<v.clauses.length;N++)if(p.sqlCompare(x,
this._evaluateNode(v.clauses[N].operand,H,m,h),"\x3d",this.timeZone))return this._evaluateNode(v.clauses[N].value,H,m,h)}else for(x=0;x<v.clauses.length;x++)if(!0===this._evaluateNode(v.clauses[x].operand,H,m,h))return this._evaluateNode(v.clauses[x].value,H,m,h);return null!==v.else?this._evaluateNode(v.else,H,m,h):null;case "parameter":return v=this.parameters[v.value.toLowerCase()],d.isDate(v)?q.DateTime.fromJSDate(v):v instanceof g.ArcadeDate?v.toDateTime():v;case "expression-list":x=[];for(var L of v.value)x.push(this._evaluateNode(L,
H,m,h));return x;case "unary-expression":return u(this._evaluateNode(v.expr,H,m,h));case "binary-expression":switch(v.operator){case "AND":return n(this._evaluateNode(v.left,H,m,h),this._evaluateNode(v.right,H,m,h));case "OR":return C(this._evaluateNode(v.left,H,m,h),this._evaluateNode(v.right,H,m,h));case "IS":if("null"!==v.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);return null===this._evaluateNode(v.left,H,m,h);case "ISNOT":if("null"!==v.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);
return null!==this._evaluateNode(v.left,H,m,h);case "IN":return x=a(this._evaluateNode(v.right,H,m,h)),P(this._evaluateNode(v.left,H,m,h),x,this.timeZone);case "NOT IN":return x=a(this._evaluateNode(v.right,H,m,h)),u(P(this._evaluateNode(v.left,H,m,h),x,this.timeZone));case "BETWEEN":return x=this._evaluateNode(v.left,H,m,h),v=this._evaluateNode(v.right,H,m,h),null==x||null==v[0]||null==v[1]?null:p.sqlCompare(x,v[0],"\x3e\x3d",this.timeZone)&&p.sqlCompare(x,v[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return x=
this._evaluateNode(v.left,H,m,h),v=this._evaluateNode(v.right,H,m,h),null==x||null==v[0]||null==v[1]?null:p.sqlCompare(x,v[0],"\x3c",this.timeZone)||p.sqlCompare(x,v[1],"\x3e",this.timeZone);case "LIKE":return e(this._evaluateNode(v.left,H,m,h),this._evaluateNode(v.right,H,m,h),v.escape);case "NOT LIKE":return u(e(this._evaluateNode(v.left,H,m,h),this._evaluateNode(v.right,H,m,h),v.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return p.sqlCompare(this._evaluateNode(v.left,
H,m,h),this._evaluateNode(v.right,H,m,h),v.operator,this.timeZone);case "-":case "+":case "*":case "/":case "||":return f.sqlCalculateFunction(v.operator,this._evaluateNode(v.left,H,m,h),this._evaluateNode(v.right,H,m,h),this.timeZone)}case "null":case "boolean":case "string":case "number":return v.value;case "date":return v.parsedValue??(v.parsedValue=d.parseDate(v.value,"unknown")),v.parsedValue;case "timestamp":return v.parsedValue??(v.parsedValue=d.parseTimestamp(v.value,"unknown")),v.parsedValue;
case "time":return d.parseTime(v.value);case "current-time":return"date"===v.mode?B.DateOnly.fromNow(this.timeZone):d.convertToExecutingTimeZone(new Date,this.timeZone);case "column-reference":return K(H,v.column,this.fieldsIndex,m);case "data-type":return v.value;case "function":if(this.isAggregate&&F.isAggregate(v.name,v.args.value.length)){H=[];for(x of v.args?.value||[]){L=[];for(N of h||[])L.push(this._evaluateNode(x,N,m,null));H.push(L)}return F.aggregateFunction(v.name,H)}m=this._evaluateNode(v.args,
H,m,h);return D.evaluateFunction(v.name,m,this.timeZone)}throw new y.SqlError(y.SqlErrorCodes.UnsupportedSyntax,{node:v.type});}}var W;(function(v){v[v.Normal=0]="Normal";v[v.Escaped=1]="Escaped"})(W||={});const U={getAttribute(v,H){return(v&&"object"===typeof v.attributes?v.attributes:v)[H]}};c.WhereClause=ba;c.defaultAttributeAdapter=U;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone",
"../chunks/datetime"],function(c,g,y,w){function F(r,z,D){return r<z?r-z:r>D?r-D:0}function B(r,z=!0){if(r instanceof w.Zone)return r;if("system"===r.toLowerCase())return"system";if("utc"===r.toLowerCase())return"UTC";if("unknown"===r.toLowerCase())return y.UnknownTimeZone.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(r)){const D=w.FixedOffsetZone.parseSpecifier("UTC"+(r.startsWith("+")||r.startsWith("-")?"":"+")+r);if(D)return D}r=w.IANAZone.create(r);if(!r.isValid){if(z)throw new p(c.ArcadeDateErrorCodes.TimeZoneNotRecognized);
return null}return r}c.ArcadeDateErrorCodes=void 0;(c.ArcadeDateErrorCodes||(c.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const f={[c.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class p extends Error{constructor(r,z){super(g.replace(f[r],z));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,p)}}class d{constructor(r){this._date=r;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(r=
0,z=1,D=1,I=0,t=0,q=0,a=0,u){if(isNaN(r)||isNaN(z)||isNaN(D)||isNaN(I)||isNaN(t)||isNaN(q)||isNaN(a))return null;const n=w.DateTime.local(r,z).daysInMonth;r=w.DateTime.fromObject({day:1>D?1:D>n?n:D,year:r,month:1>z?1:12<z?12:z,hour:0>I?0:23<I?23:I,minute:0>t?0:59<t?59:t,second:0>q?0:59<q?59:q,millisecond:0>a?0:999<a?999:a},{zone:B(u)});r=r.plus({months:F(z,1,12),days:F(D,1,n),hours:F(I,0,23),minutes:F(t,0,59),seconds:F(q,0,59),milliseconds:F(a,0,999)});return new d(r)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??
"system"}static arcadeDateAndZoneToArcadeDate(r,z){z=B(z);return r.isUnknownTimeZone||z===y.UnknownTimeZone.instance?d.fromParts(r.year,r.monthJS+1,r.day,r.hour,r.minute,r.second,r.millisecond,z):new d(r._date.setZone(z))}static dateJSToArcadeDate(r){return new d(w.DateTime.fromJSDate(r,{zone:"system"}))}static dateJSAndZoneToArcadeDate(r,z="system"){z=B(z);return new d(w.DateTime.fromJSDate(r,{zone:z}))}static unknownEpochToArcadeDate(r){return new d(w.DateTime.fromMillis(r,{zone:y.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(r){return new d(w.DateTime.fromMillis(r.getTime(),
{zone:y.UnknownTimeZone.instance}))}static epochToArcadeDate(r,z="system"){z=B(z);return new d(w.DateTime.fromMillis(r,{zone:z}))}static dateTimeToArcadeDate(r){return new d(r)}clone(){return new d(this._date)}changeTimeZone(r){r=B(r);return d.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(r,z){z=B(z);return r.zone===y.UnknownTimeZone.instance||z===y.UnknownTimeZone.instance?d.fromParts(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond,z):new d(r.setZone(z))}static nowToArcadeDate(r){r=
B(r);return new d(w.DateTime.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new d(w.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===d.systemTimeZoneCanonicalName}equals(r){return this.isSystem&&r.isSystem?this.toNumber()===r.toNumber():this.isUnknownTimeZone!==r.isUnknownTimeZone?!1:this._date.equals(r._date)}get isUnknownTimeZone(){return this._date.zone===y.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let r=
this._date.weekday;6<r&&(r=0);return r}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const r=this.zone;return"fixed"===r.type?0===r.fixed?"UTC":r.formatOffset(0,"short"):r.name}stringify(){return JSON.stringify(this.toJSDate())}plus(r){return new d(this._date.plus(r))}diff(r,z="milliseconds"){return this._date.diff(r._date,z)[z]}toISODate(){return this._date.toISODate()}toISOString(r){return r?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(r,z){return this._date.toISOTime({suppressMilliseconds:r,
includeOffset:z&&!this.isUnknownTimeZone})}toFormat(r,z){this.isUnknownTimeZone&&(r=r.replaceAll("Z",""));return this._date.toFormat(r,z)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new d(this._date.toUTC())}toLocal(){return new d(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(r){if(!r)return null;
r=w.DateTime.fromISO(r,{setZone:!0});return new d(r)}}c.ArcadeDate=d;c.ArcadeDateError=p;c.arcadeDateErrorMessages=f;c.createDateTimeZone=B;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(c,g){function y(F){return F instanceof g.Zone?F===w.instance?!0:!1:"unknown"===F?.toString().toLowerCase()?!0:!1}class w{}w.instance=new g.IANAZone("Etc/UTC");c.UnknownTimeZone=w;c.adoptTimeZone=function(F,
B){return g.DateTime.fromObject({day:F.day,year:F.year,month:F.month,hour:F.hour,minute:F.minute,second:F.second,millisecond:F.millisecond},{zone:B})};c.isUnknownTimeZone=y;c.substituteUnknownTimezone=function(F){return y(F)?w.instance:F};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../core/string"],function(c,g){c.SqlErrorCodes=void 0;(function(f){f.InvalidFunctionParameters="InvalidFunctionParameters";
f.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";f.UnsupportedSqlFunction="UnsupportedSqlFunction";f.UnsupportedOperator="UnsupportedOperator";f.UnsupportedSyntax="UnsupportedSyntax";f.UnsupportedIsRhs="UnsupportedIsRhs";f.UnsupportedIsLhs="UnsupportedIsLhs";f.InvalidDataType="InvalidDataType";f.CannotCastValue="CannotCastValue";f.FunctionNotRecognized="FunctionNotRecognized";f.InvalidTime="InvalidTime";f.InvalidParameterCount="InvalidParameterCount";f.InvalidTimeStamp="InvalidTimeStamp";
f.InvalidDate="InvalidDate";f.InvalidOperator="InvalidOperator";f.IllegalInterval="IllegalInterval";f.YearMonthIntervals="YearMonthIntervals";f.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";f.MissingStatisticParameters="MissingStatisticParameters"})(c.SqlErrorCodes||(c.SqlErrorCodes={}));const y={[c.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[c.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[c.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",
[c.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[c.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[c.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[c.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[c.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[c.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[c.SqlErrorCodes.InvalidDate]:"Invalid date encountered",
[c.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[c.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[c.SqlErrorCodes.IllegalInterval]:"Illegal interval",[c.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[c.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[c.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[c.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[c.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",
[c.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class w extends Error{constructor(f,p){super(g.replace(y[f],p));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,w)}}c.FeatureSetErrorCodes=void 0;(function(f){f.NeverReach="NeverReach";f.NotImplemented="NotImplemented";f.Cancelled="Cancelled";f.InvalidStatResponse="InvalidStatResponse";f.InvalidRequest="InvalidRequest";f.RequestFailed="RequestFailed";
f.MissingFeatures="MissingFeatures";f.AggregationFieldNotFound="AggregationFieldNotFound";f.DataElementsNotFound="DataElementsNotFound"})(c.FeatureSetErrorCodes||(c.FeatureSetErrorCodes={}));const F={[c.FeatureSetErrorCodes.Cancelled]:"Cancelled",[c.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[c.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[c.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[c.FeatureSetErrorCodes.MissingFeatures]:"Missing features",
[c.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[c.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[c.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[c.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};class B extends Error{constructor(f,p){super(g.replace(F[f],p));this.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(this,B)}}c.FeatureSetError=
B;c.SqlError=w;c.featureSetErrorMessages=F;c.sqlErrorMessages=y;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(c,g,y,w,F,B){function f(z){if(null===z)return null;let D=0,I=0;for(let t=0;t<z.length;t++){const q=z[t];if(null!==q){if("number"!==typeof q)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);
I++;D+=q}}return 0===I?null:D/z.length}function p(z,D){if(null===z)return null;let I=null,t=null;for(const q of z)z=q,z=q instanceof y.DateOnly?q.toNumber():q instanceof F.TimeOnly?q.toNumber():q instanceof B.DateTime?q.toMillis():q instanceof w.SqlTimeStampOffset?q.toMilliseconds():q,null===I?(I=q,t=z):"max"===D&&null!==t&&null!==z&&t<=z?(I=q,t=z):"min"===D&&null!==t&&null!==z&&t>=z&&(I=q,t=z);return I}function d(z){if(null===z)return null;z=z.filter(t=>null!==t);if(0===z.length)return null;const D=
f(z);if(null===D)return null;let I=0;for(const t of z){if("number"!==typeof t)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);I+=(D-t)**2}return I/(z.length-1)}const r={min:{minParams:1,maxParams:1,evaluate:z=>p(z[0],"min")},max:{minParams:1,maxParams:1,evaluate:z=>p(z[0],"max")},avg:{minParams:1,maxParams:1,evaluate:z=>f(z[0])},sum:{minParams:1,maxParams:1,evaluate:z=>{z=z[0];if(null===z)z=null;else{var D=0;for(let I=0;I<z.length;I++){const t=z[I];if(null!==t){if("number"!==
typeof t)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);D+=t}}z=D}return z}},stddev:{minParams:1,maxParams:1,evaluate:z=>{z=z[0];null===z?z=null:(z=d(z),z=null===z?null:Math.sqrt(z));return z}},count:{minParams:1,maxParams:1,evaluate:z=>null==z[0]?null:z[0].length},var:{minParams:1,maxParams:1,evaluate:z=>d(z[0])}};c.aggregateFunction=function(z,D){const I=r[z.toLowerCase()];if(null==I)throw new g.SqlError(g.SqlErrorCodes.FunctionNotRecognized);if(D.length<I.minParams||D.length>
I.maxParams)throw new g.SqlError(g.SqlErrorCodes.InvalidParameterCount,{name:z.toUpperCase()});return I.evaluate(D)};c.isAggregate=function(z,D){z=r[z.toLowerCase()];return null!=z&&D>=z.minParams&&D<=z.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(c,g,y,w){function F(f){f=f.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$\x26]");let p="";const d=
/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of f.match(d)||[])switch(r){case "D":p+="d";break;case "DD":p+="dd";break;case "DDD":p+="o";break;case "d":p+="c";break;case "ddd":p+="ccc";break;case "dddd":p+="cccc";break;case "M":p+="L";break;case "MM":p+="LL";break;case "MMM":p+="LLL";break;case "MMMM":p+="LLLL";break;case "YY":p+="yy";
break;case "Y":case "YYYY":p+="yyyy";break;case "Q":p+="q";break;case "X":case "x":p+=r;break;default:p=2<=r.length&&"["===r.slice(0,1)&&"]"===r.slice(-1)?p+`'${r.slice(1,-1)}'`:p+`'${r}'`}return p}class B{constructor(f,p,d){this._year=f;this._month=p;this._day=d;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(f){return f instanceof
B&&f.day===this.day&&f.month===this.month&&f.year===this.year}clone(){return new B(this._year,this._month,this._day)}toDateTime(f){return w.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:g.createDateTimeZone(f)})}toDateTimeLuxon(f){return w.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:g.createDateTimeZone(f)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(f=
null,p=!0){if(null===f||""===f)return this.toString();p&&(f=F(f));if(!f)return"";p=this.toDateTime("unknown");return g.ArcadeDate.dateTimeToArcadeDate(p).toFormat(f,{locale:y.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const f=this.toDateTime("unknown");return g.ArcadeDate.dateTimeToArcadeDate(f)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",
!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(f,p){return B.fromDateTime(this.toUTCDateTime().plus({[f]:p}))}toUTCDateTime(){return w.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(f,p){switch(p.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(f.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===p?
this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(f.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(f.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(f.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(f.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(f){f=w.DateTime.fromMillis(f,{zone:w.FixedOffsetZone.utcInstance});return f.isValid?B.fromParts(f.year,f.month,f.day):null}static fromSeconds(f){f=w.DateTime.fromSeconds(f,{zone:w.FixedOffsetZone.utcInstance});return f.isValid?B.fromParts(f.year,f.month,f.day):null}static fromReader(f){if(!f)return null;f=f.split("-");return 3!==f.length?null:new B(parseInt(f[0],10),parseInt(f[1],
10),parseInt(f[2],10))}static fromParts(f,p,d){f=new B(f,p,d);return!1===f.isValid?null:f}static fromDateJS(f){return B.fromParts(f.getFullYear(),f.getMonth()+1,f.getDay())}static fromDateTime(f){return B.fromParts(f.year,f.month,f.day)}static fromSqlTimeStampOffset(f){return this.fromDateTime(f.toDateTime())}static fromString(f,p=null){if(""===f||null===f)return null;var d=[];if(p)(p=F(p))&&d.push(p);else if(null===p||""===p)return f=w.DateTime.fromISO(f,{setZone:!0}),f.isValid?B.fromParts(f.year,
f.month,f.day):null;for(const r of d)if(d=w.DateTime.fromFormat(f,p??r),d.isValid)return new B(d.year,d.month,d.day);return null}static fromNow(f="system"){f=w.DateTime.fromJSDate(new Date).setZone(g.createDateTimeZone(f));return new B(f.year,f.month,f.day)}}c.DateOnly=B;c.standardizeDateOnlyFormat=F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports","../../chunks/datetime"],function(c,g){function y(F){return Number.isNaN(F)||
0===F?F:Math.trunc(F)}class w{constructor(F){this._timeStampOffset=F;this._date=null}toDateTime(){this._date??(this._date=g.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return y(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return y(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return w.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(F){return new w(g.DateTime.fromJSDate(F).toISO({includeOffset:!0}))}static fromDateTime(F){return new w(F.toISO({includeOffset:!0}))}static fromParts(F,
B,f=0,p=0,d=0,r=0,z=0,D=!1,I=0,t=0){F=`${F.toString().padStart(4,"0")}-${B.toString().padStart(2,"0")}-${f.toString().padStart(2,"0")}`;B="";10>r&&(B="0");p=`${p.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${B+r.toString()}`;0!==z&&(p+="."+z.toString().padStart(3,"0"));z=`${D?"-":"+"}${I.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;return new w(F+"T"+p+z)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let F=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});F&&=F.replace(".000","");return F}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(F){F=this.toDateTime().plus(F);return w.fromDateTime(F)}}c.SqlTimeStampOffset=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(c,g,y,w){function F(f){if(!f)return"";const p=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let d="";for(const r of f.match(p)||
[])switch(r){case "SSS":d+=r;break;case "A":case "a":d+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":d+=r;break;default:d+=`'${r}'`}return d}class B{constructor(f,p,d,r){this._hour=f;this._minute=p;this._second=d;this._millisecond=r;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(f){return f instanceof B&&f.hour===
this.hour&&f.minute===this.minute&&f.second===this.second&&f.millisecond===this.millisecond}clone(){return new B(this.hour,this.minute,this.second,this.millisecond)}isValid(){return g.isInteger(this.hour)&&g.isInteger(this.minute)&&g.isInteger(this.second)&&g.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(f=null){return null===f||""===f?this.toString():(f=F(f))?w.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(f,{locale:y.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(f,p,d,r){f=new B(f,p,d,r);return f.isValid()?f:null}static fromReader(f){if(!f)return null;f=f.split(":");return 3!==f.length?null:new B(parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],
10),0)}static fromMilliseconds(f){return 864E5<f||0>f?null:new B(Math.floor(f/36E5%24),Math.floor(f/6E4%60),Math.floor(f/1E3%60),Math.floor(f%1E3))}static fromDateJS(f){return new B(f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds())}static fromDateTime(f){return new B(f.hour,f.minute,f.second,f.millisecond)}static fromSqlTimeStampOffset(f){return this.fromDateTime(f.toDateTime())}static fromString(f,p=null){if(""===f||null===f)return null;const d=[];if(p)(p=F(p))&&d.push(p);else if(null===
p||""===p)d.push("HH:mm:ss"),d.push("HH:mm:ss.SSS"),d.push("hh:mm:ss a"),d.push("hh:mm:ss.SSS a"),d.push("HH:mm"),d.push("hh:mm a"),d.push("H:mm"),d.push("h:mm a"),d.push("H:mm:ss"),d.push("h:mm:ss a"),d.push("H:mm:ss.SSS"),d.push("h:mm:ss.SSS a");for(const r of d)if(p=w.DateTime.fromFormat(f,r),p.isValid)return new B(p.hour,p.minute,p.second,p.millisecond);return null}plus(f,p){switch(f){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return B.fromDateTime(this.toUTCDateTime().plus({[f]:p}))}return null}toUTCDateTime(){return w.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(f,p){switch(p.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(f.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===p?this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(f.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(f.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(f.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(f.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds}}}c.TimeOnly=B;c.standardizeTimeFormat=F;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(c,g){c.cloneGeometry=function(y){if(null==y)return null;const w=y.clone();void 0!==y.cache._geVersion&&(w.cache._geVersion=y.cache._geVersion);return w};c.convertLinearUnitsToCode=function(y){if(null==y)return null;if("number"===typeof y)return y;y=y.toLowerCase();y=y.replaceAll(/\s/g,"");y=y.replaceAll("-","");switch(y){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};c.convertSquareUnitsToCode=
function(y){if(null==y)return null;if("number"===typeof y)return y;y=y.toLowerCase();y=y.replaceAll(/\s/g,"");y=y.replaceAll("-","");switch(y){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};c.isInteger=function(y){return"number"===typeof y&&isFinite(y)&&Math.floor(y)===y};c.sameGeomType=function(y,w){return y===w||"point"===y&&"esriGeometryPoint"===w||"polyline"===y&&"esriGeometryPolyline"===
w||"polygon"===y&&"esriGeometryPolygon"===w||"extent"===y&&"esriGeometryEnvelope"===w||"multipoint"===y&&"esriGeometryMultipoint"===w||"point"===w&&"esriGeometryPoint"===y||"polyline"===w&&"esriGeometryPolyline"===y||"polygon"===w&&"esriGeometryPolygon"===y||"extent"===w&&"esriGeometryEnvelope"===y||"multipoint"===w&&"esriGeometryMultipoint"===y?!0:!1};c.shapeExtent=function(y){if(null==y)return null;switch(y.type){case "polygon":case "multipoint":case "polyline":return y.extent;case "point":return new g({xmin:y.x,
ymin:y.y,xmax:y.x,ymax:y.y,spatialReference:y.spatialReference});case "extent":return y}return null};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","../../arcade/featureset/support/errorsupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(c,g,y,w,F){function B(A,J,M){switch(M){case "+":return A+J;case "-":return A-J;case "*":return A*J;case "/":return A/J}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function f(A,J,M){switch(M){case "+":return J.plus({milliseconds:A.valueInMilliseconds()});case "-":return A.valueInMilliseconds()-J.toMillis()}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function p(A,J,M){switch(M){case "+":return J.plus("milliseconds",A.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function d(A,J,M){switch(M){case "+":return J.plus("milliseconds",A.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function r(A,
J,M){switch(M){case "+":return A.plus("milliseconds",J.valueInMilliseconds());case "-":return A.plus("milliseconds",-1*J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function z(A,J,M){switch(M){case "+":return J.addMilliseconds(A.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function D(A,J,M){switch(M){case "+":return w.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()+J.valueInMilliseconds());case "-":return w.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()-
J.valueInMilliseconds());case "*":return w.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()*J.valueInMilliseconds());case "/":return w.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()/J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function I(A,J,M){switch(M){case "+":return w.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()+J);case "-":return w.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()-J);case "*":return w.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()*
J);case "/":return w.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()/J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function t(A,J,M){switch(M){case "+":return w.SqlInterval.createFromMilliseconds(A+J.valueInMilliseconds());case "-":return w.SqlInterval.createFromMilliseconds(A-J.valueInMilliseconds());case "*":return w.SqlInterval.createFromMilliseconds(A*J.valueInMilliseconds());case "/":return w.SqlInterval.createFromMilliseconds(A/J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function q(A,J,M){switch(M){case "+":return A.plus("milliseconds",J.valueInMilliseconds());case "-":return A.plus("milliseconds",-1*J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function a(A,J,M){switch(M){case "+":return A.plus({milliseconds:J.valueInMilliseconds()});case "-":return A.minus({milliseconds:J.valueInMilliseconds()})}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function u(A,J,M){switch(M){case "+":return A.addMilliseconds(J.valueInMilliseconds());
case "-":return A.addMilliseconds(-1*J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function n(A,J,M){J*=864E5;switch(M){case "+":return A.plus({milliseconds:J});case "-":return A.minus({milliseconds:J})}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function C(A,J,M){J*=864E5;switch(M){case "+":return A.plus("milliseconds",J);case "-":return A.plus("milliseconds",-1*J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function P(A,J,M){J*=864E5;switch(M){case "+":return A.plus("milliseconds",
J);case "-":return A.plus("milliseconds",-1*J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function e(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function K(A,J,M){J*=864E5;switch(M){case "+":return A.addMilliseconds(J);case "-":return A.addMilliseconds(-1*J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Q(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function S(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ba(A,
J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function W(A,J,M){J=parseFloat(J);if(isNaN(J))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);return B(A,J,M)}function U(A,J,M){A=parseFloat(A);if(isNaN(A))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);return B(A,J,M)}function v(A,J,M){switch(M){case "+":return A+J}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function H(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function m(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function h(A,J,M){switch(M){case "-":return A.toDateTimeLuxon(J.zone).diff(J).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function x(A,J,M){switch(M){case "-":return A.toDateTimeLuxon(J.toDateTime().zone).diff(J.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function N(A,J,M){switch(M){case "-":return A.toDateTimeLuxon("UTC").diff(J.toDateTimeLuxon("UTC")).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function L(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function T(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function X(A,J,M){switch(M){case "-":return A.toDateTime().diff(J.toDateTimeLuxon(A.toDateTime().zone)).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function da(A,J,M){switch(M){case "-":return A.toDateTime().diff(J).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ia(A,J,M){switch(M){case "-":return A.toDateTime().diff(J.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function na(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function qa(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function va(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ta(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function wa(A,J,M){switch(M){case "-":return A.diff(J).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Ea(A,J,M){switch(M){case "-":return A.diff(J.toDateTimeLuxon(A.zone)).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function Da(A,J,M){switch(M){case "-":return A.diff(J.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Pa(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Sa(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Ta(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Oa(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function k(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function E(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Y(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function aa(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ja(A,J,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}c.calculateDateOnlyAndDateOnly=N;c.calculateDateOnlyAndDateTime=h;c.calculateDateOnlyAndNumber=C;c.calculateDateOnlyAndSqlInterval=q;c.calculateDateOnlyAndString=Sa;c.calculateDateOnlyAndTimeOnly=L;c.calculateDateOnlyAndTimestamp=
x;c.calculateDateTimeAndDateOnly=Ea;c.calculateDateTimeAndDateTime=wa;c.calculateDateTimeAndNumber=n;c.calculateDateTimeAndSqlInterval=a;c.calculateDateTimeAndString=Oa;c.calculateDateTimeAndTimeOnly=Pa;c.calculateDateTimeAndTimestamp=Da;c.calculateNumberAndDateOnly=ba;c.calculateNumberAndDateTime=e;c.calculateNumberAndNumber=B;c.calculateNumberAndSqlInterval=t;c.calculateNumberAndString=W;c.calculateNumberAndTimeOnly=S;c.calculateNumberAndTimestamp=Q;c.calculateSqlIntervalAndDateOnly=d;c.calculateSqlIntervalAndDateTime=
f;c.calculateSqlIntervalAndNumber=I;c.calculateSqlIntervalAndSqlInterval=D;c.calculateSqlIntervalAndString=H;c.calculateSqlIntervalAndTimeOnly=p;c.calculateSqlIntervalAndTimestamp=z;c.calculateStringAndDateOnly=Y;c.calculateStringAndDateTime=aa;c.calculateStringAndNumber=U;c.calculateStringAndSqlInterval=m;c.calculateStringAndString=v;c.calculateStringAndTimeOnly=E;c.calculateStringAndTimestamp=ja;c.calculateTimeOnlyAndDateOnly=qa;c.calculateTimeOnlyAndDateTime=na;c.calculateTimeOnlyAndNumber=P;c.calculateTimeOnlyAndSqlInterval=
r;c.calculateTimeOnlyAndString=Ta;c.calculateTimeOnlyAndTimeOnly=ta;c.calculateTimeOnlyAndTimestamp=va;c.calculateTimestampAndDateOnly=X;c.calculateTimestampAndDateTime=da;c.calculateTimestampAndNumber=K;c.calculateTimestampAndSqlInterval=u;c.calculateTimestampAndString=k;c.calculateTimestampAndTimeOnly=T;c.calculateTimestampAndTimestamp=ia;c.sqlCalculateFunction=function(A,J,M,V){if("||"===A)return F.evaluateFunction("concat",[J,M],V);if(null===J||null===M)return null;if(y.isNumber(J)){if(y.isNumber(M))return B(J,
M,A);if(y.isSqlInterval(M))return t(J,M,A);if(y.isTimeOnly(M))return S();if(y.isDateOnly(M))return ba();if(y.isTimestampOffset(M))return Q();if(y.isDateTime(M))return e();if(y.isString(M))return W(J,M,A)}else if(y.isDateOnly(J)){if(y.isNumber(M))return C(J,M,A);if(y.isSqlInterval(M))return q(J,M,A);if(y.isTimeOnly(M))return L();if(y.isDateOnly(M))return N(J,M,A);if(y.isTimestampOffset(M))return x(J,M,A);if(y.isDateTime(M))return h(J,M,A);if(y.isString(M))return Sa()}else if(y.isTimeOnly(J)){if(y.isNumber(M))return P(J,
M,A);if(y.isSqlInterval(M))return r(J,M,A);if(y.isTimeOnly(M))return ta();if(y.isDateOnly(M))return qa();if(y.isTimestampOffset(M))return va();if(y.isDateTime(M))return na();if(y.isString(M))return Ta()}else if(y.isSqlInterval(J)){if(y.isNumber(M))return I(J,M,A);if(y.isSqlInterval(M))return D(J,M,A);if(y.isTimeOnly(M))return p(J,M,A);if(y.isDateOnly(M))return d(J,M,A);if(y.isTimestampOffset(M))return z(J,M,A);if(y.isDateTime(M))return f(J,M,A);if(y.isString(M))return H()}else if(y.isDateTime(J)){if(y.isNumber(M))return n(J,
M,A);if(y.isSqlInterval(M))return a(J,M,A);if(y.isTimeOnly(M))return Pa();if(y.isDateOnly(M))return Ea(J,M,A);if(y.isTimestampOffset(M))return Da(J,M,A);if(y.isDateTime(M))return wa(J,M,A);if(y.isString(M))return Oa()}else if(y.isTimestampOffset(J)){if(y.isNumber(M))return K(J,M,A);if(y.isSqlInterval(M))return u(J,M,A);if(y.isTimeOnly(M))return T();if(y.isDateOnly(M))return X(J,M,A);if(y.isTimestampOffset(M))return ia(J,M,A);if(y.isDateTime(M))return da(J,M,A);if(y.isString(M))return k()}else if(y.isString(J)){if(y.isNumber(M))return U(J,
M,A);if(y.isSqlInterval(M))return m();if(y.isTimeOnly(M))return E();if(y.isDateOnly(M))return Y();if(y.isTimestampOffset(M))return ja();if(y.isDateTime(M))return aa();if(y.isString(M))return v(J,M,A)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(c,g,y,w,F,B,f,p){function d(n,C,P){P=t.exec(n);if(null!==P){const [,e,K,Q,S,ba,W,U]=P;n=p.DateTime.fromObject({year:parseInt(e,10),month:parseInt(K,10),day:parseInt(Q,10),hour:parseInt(S,10),minute:parseInt(ba,10),second:parseInt(W,10),millisecond:U?parseInt(U.replace(".",""),10):0},{zone:f.substituteUnknownTimezone(C)});if(!1===n.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return n}P=q.exec(n);if(null!==P){const [,e,K,Q,S,ba,W,U,v,H,m]=P;n=F.SqlTimeStampOffset.fromParts(parseInt(e,
10),parseInt(K,10),parseInt(Q,10),parseInt(S,10),parseInt(ba,10),parseInt(W,10),U?parseInt(U.replace(".",""),10):0,"-"===v,parseInt(H,10),parseInt(m,10));if(!1===n.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return n}P=a.exec(n);if(null!==P){const [,e,K,Q,S,ba,W,U,v]=P;n=F.SqlTimeStampOffset.fromParts(parseInt(e,10),parseInt(K,10),parseInt(Q,10),parseInt(S,10),parseInt(ba,10),0,0,"-"===W,parseInt(U,10),parseInt(v,10));if(!1===n.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);
return n}P=u.exec(n);if(null!==P){const [,e,K,Q,S,ba]=P;n=p.DateTime.fromObject({year:parseInt(e,10),month:parseInt(K,10),day:parseInt(Q,10),hour:parseInt(S,10),minute:parseInt(ba,10),second:0},{zone:f.substituteUnknownTimezone(C)});if(!1===n.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return n}P=I.exec(n);if(null!==P){const [,e,K,Q]=P;n=p.DateTime.fromObject({year:parseInt(e,10),month:parseInt(K,10),day:parseInt(Q,10),hour:0,minute:0,second:0},{zone:f.substituteUnknownTimezone(C)});
if(!1===n.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return n}throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);}const r=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,z=/^(\d{1,2}):(\d{1,2})$/,D=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,I=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,t=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,a=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,
u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;c.convertToExecutingTimeZone=function(n,C){if(C instanceof p.Zone)return C===f.UnknownTimeZone.instance?p.DateTime.fromMillis(n.getTime(),{zone:f.UnknownTimeZone.instance}):p.DateTime.fromJSDate(n,{zone:C});switch(C){case "system":case "local":case null:return p.DateTime.fromJSDate(n);default:return"unknown"===C?.toLowerCase()?p.DateTime.fromMillis(n.getTime(),{zone:f.UnknownTimeZone.instance}):p.DateTime.fromJSDate(n,{zone:C})}};c.isDate=function(n){return n instanceof
Date};c.isDateOnly=function(n){return n instanceof y.DateOnly};c.isDateTime=function(n){return n instanceof p.DateTime};c.isNumber=function(n){return"number"===typeof n};c.isSqlInterval=function(n){return n instanceof w.SqlInterval};c.isString=function(n){return"string"===typeof n||n instanceof String};c.isTimeOnly=function(n){return n instanceof B.TimeOnly};c.isTimestampOffset=function(n){return n instanceof F.SqlTimeStampOffset};c.parseDate=function(n,C){const P=I.exec(n);if(null===P)try{return d(n,
C)}catch{throw new g.SqlError(g.SqlErrorCodes.InvalidDate);}const [,e,K,Q]=P;n=y.DateOnly.fromParts(parseInt(e,10),parseInt(K,10),parseInt(Q,10));if(null===n)throw new g.SqlError(g.SqlErrorCodes.InvalidDate);return n};c.parseTime=function(n){let C=r.exec(n);if(null!==C){const [,P,e,K]=C;n=B.TimeOnly.fromParts(parseInt(P,10),parseInt(e,10),parseInt(K,10),0);if(null!==n)return n;throw new g.SqlError(g.SqlErrorCodes.InvalidTime);}C=z.exec(n);if(null!==C){const [,P,e]=C;n=B.TimeOnly.fromParts(parseInt(P,
10),parseInt(e,10),0,0);if(null!==n)return n;throw new g.SqlError(g.SqlErrorCodes.InvalidTime);}C=D.exec(n);if(null!==C){const [,P,e,K,Q]=C;n=B.TimeOnly.fromParts(parseInt(P,10),parseInt(e,10),parseInt(K,10),parseInt(Q,10));if(null!==n)return n}throw new g.SqlError(g.SqlErrorCodes.InvalidTime);};c.parseTimestamp=d;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","../../arcade/featureset/support/errorsupport"],function(c,g){class y{constructor(){this.op=
"+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(w){if(null!==w.precision||null!==w.secondary)throw new g.SqlError(g.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(w,F){F.includes(".")?(F=F.split("."),w.second=parseFloat(F[0]),w.millis=parseInt(F[1],10)):w.second=parseFloat(F)}static createFromMilliseconds(w){const F=new y;F.second=w/1E3;return F}static createFromValueAndQualifier(w,F,B){let f=null;const p=new y;p.op="-"===
B?"-":"+";if("interval-period"===F.type){y._fixDefaults(F);B=RegExp("^[0-9]{1,}$");if("year"===F.period||"month"===F.period)throw new g.SqlError(g.SqlErrorCodes.YearMonthIntervals);if("second"===F.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(w))y._parseSecondsComponent(p,w);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);else if(B.test(w))p[F.period]=parseFloat(w);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}else{y._fixDefaults(F.start);y._fixDefaults(F.end);if("year"===
F.start.period||"month"===F.start.period||"year"===F.end.period||"month"===F.end.period)throw new g.SqlError(g.SqlErrorCodes.YearMonthIntervals);switch(F.start.period){case "day":switch(F.end.period){case "hour":f=RegExp("^[0-9]{1,} [0-9]{1,}$");if(f.test(w))p[F.start.period]=parseFloat(w.split(" ")[0]),p[F.end.period]=parseFloat(w.split(" ")[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "minute":f=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(f.test(w))p[F.start.period]=
parseFloat(w.split(" ")[0]),w=w.split(" ")[1].split(":"),p.hour=parseFloat(w[0]),p.minute=parseFloat(w[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "second":f=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(w))p[F.start.period]=parseFloat(w.split(" ")[0]),w=w.split(" ")[1].split(":"),p.hour=parseFloat(w[0]),p.minute=parseFloat(w[1]),y._parseSecondsComponent(p,w[2]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(F.end.period){case "minute":f=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(f.test(w))p.hour=parseFloat(w.split(":")[0]),p.minute=parseFloat(w.split(":")[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "second":f=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(w))w=w.split(":"),p.hour=parseFloat(w[0]),p.minute=parseFloat(w[1]),y._parseSecondsComponent(p,w[2]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(F.end.period){case "second":f=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(w))w=w.split(":"),p.minute=parseFloat(w[0]),y._parseSecondsComponent(p,w[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}}return p}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}c.SqlInterval=y;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ../string ./DateOnly ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(c,g,y,w,F,B,f,p){function d(a){return"string"===typeof a||a instanceof String}function r(a){return B.isDate(a)||B.isDateOnly(a)||
B.isDateTime(a)||B.isTimeOnly(a)||B.isTimestampOffset(a)?!1:!0}function z(a){return B.isDateOnly(a)||B.isTimeOnly(a)?a.toString():B.isTimestampOffset(a)?a.toSQLValue():B.isDateTime(a)?0===a.millisecond?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):B.isDate(a)?z(p.DateTime.fromJSDate(a)):a.toString()}function D(a){if(B.isDate(a))return w.DateOnly.fromDateJS(a);if(B.isDateTime(a))return w.DateOnly.fromParts(a.year,a.month,a.day);if(B.isDateOnly(a))return a;if(B.isTimeOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);
if(B.isTimestampOffset(a)&&null===w.DateOnly.fromParts(a.year,a.month,a.day))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(d(a)&&(a=w.DateOnly.fromReader(a),null!==a&&a.isValid))return a;throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}function I(a,u,n){if(B.isDate(a))return B.convertToExecutingTimeZone(a,u);if(B.isDateTime(a))return a;if(B.isDateOnly(a))return a.toDateTimeLuxon("unknown");if(B.isTimeOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(B.isTimestampOffset(a))return a;
if(d(a))return B.parseTimestamp(a,"unknown",n);throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}function t(a){if(B.isDate(a))return f.TimeOnly.fromDateJS(a);if(B.isDateTime(a))return f.TimeOnly.fromDateTime(a);if(B.isDateOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(B.isTimeOnly(a))return a;if(B.isTimestampOffset(a))return f.TimeOnly.fromSqlTimeStampOffset(a);if(d(a))return B.parseTime(a);throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}const q={extract:{minParams:2,
maxParams:2,evaluate:([a,u])=>{if(null==u)return null;if(B.isDate(u))switch(a.toUpperCase()){case "SECOND":return u.getSeconds();case "MINUTE":return u.getMinutes();case "HOUR":return u.getHours();case "DAY":return u.getDate();case "MONTH":return u.getMonth()+1;case "YEAR":return u.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(B.isDateTime(u))switch(a.toUpperCase()){case "SECOND":return u.second;case "MINUTE":return u.minute;case "HOUR":return u.hour;case "DAY":return u.day;
case "MONTH":return u.month;case "YEAR":return u.year}else if(B.isDateOnly(u))switch(a.toUpperCase()){case "DAY":return u.day;case "MONTH":return u.month;case "YEAR":return u.year}else if(B.isTimeOnly(u))switch(a.toUpperCase()){case "SECOND":return u.second;case "MINUTE":return u.minute;case "HOUR":return u.hour}else if(B.isTimestampOffset(u))switch(a.toUpperCase()){case "SECOND":return u.second;case "MINUTE":return u.minute;case "HOUR":return u.hour;case "DAY":return u.day;case "MONTH":return u.month;
case "YEAR":return u.year;case "TIMEZONE_HOUR":return u.timezoneOffsetHour;case "TIMEZONE_MINUTE":return u.timezoneOffsetMinutes}throw new g.SqlError(g.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(2===a.length){const [u,n]=a;return null==u||null==n?null:u.toString().substring(n-1)}if(3===a.length){const [u,n,C]=a;return null==u||null==n||null==C?null:0>=C?"":u.toString().substring(n-1,n+C-1)}}},position:{minParams:2,maxParams:2,
evaluate:([a,u])=>null==a||null==u?null:u.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{var u=3===a.length,n=u?a[1]:" ";u=u?a[2]:a[1];if(null==n||null==u)return null;n=`(${y.escapeRegExpString(n)})`;switch(a[0]){case "BOTH":return u.replaceAll(new RegExp(`^${n}*|${n}*$`,"g"),"");case "LEADING":return u.replaceAll(new RegExp(`^${n}*`,"g"),"");case "TRAILING":return u.replaceAll(new RegExp(`${n}*$`,"g"),"")}throw new g.SqlError(g.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:0<a[0]?1:0>a[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]**a[1]},mod:{minParams:2,
maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const u=a[0];a=2===a.length?10**a[1]:1;return null==u?null:Math.round(u*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:a=>null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>d(a[0])?a[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:a=>{let u="";for(let n=0;n<a.length;n++){if(null==a[n])return null;
u+=a[n].toString()}return u}},lower:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:a=>{for(const u of a)if(null!==u)return u;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:(a,u)=>F.sqlCompare(a[0],a[1],"\x3d")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,u)=>{const n=a[0];a=a[1];if(null===n)return null;switch(a.type){case "integer":if(!r(n))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);u=parseInt(n,10);if(isNaN(u))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return u;case "smallint":if(!r(n))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);u=parseInt(n,10);if(isNaN(u))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);
if(32767<u||-32767>u)throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return u;case "float":case "real":if(!r(n))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);u=parseFloat(n);if(isNaN(u))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return u;case "time":return t(n);case "date":return D(n);case "timestamp":return I(n,u,!0===a.withtimezone);case "varchar":u=z(n);if(u.length>a.size)throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return u;default:throw new g.SqlError(g.SqlErrorCodes.InvalidDataType);
}}}};c.evaluateFunction=function(a,u,n){const C=q[a.toLowerCase()];if(null==C)throw new g.SqlError(g.SqlErrorCodes.FunctionNotRecognized);if(u.length<C.minParams||u.length>C.maxParams)throw new g.SqlError(g.SqlErrorCodes.InvalidParameterCount,{name:a.toUpperCase()});return C.evaluate(u,n)};c.isStandardized=function(a,u){a=q[a.toLowerCase()];return null!=a&&u>=a.minParams&&u<=a.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(c,g,y,w,F,B){function f(a){return y.isDateTime(a)||y.isTimestampOffset(a)?!0:!1}function p(a){return y.isDateTime(a)||y.isDateOnly(a)||y.isTimestampOffset(a)||y.isTimeOnly(a)?!0:!1}function d(a){if(y.isDateTime(a))return a.toMillis();if(y.isDateOnly(a))return a.toNumber();if(y.isTimestampOffset(a))return a.toMilliseconds();throw new g.SqlError(g.SqlErrorCodes.InvalidDataType);}function r(a,u,n){switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<
u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function z(a,u,n){const C=parseFloat(u);if(!isNaN(C))return r(a,C,n);a=a.toString();switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function D(a,u,n){const C=parseFloat(a);if(!isNaN(C))return r(C,u,n);u=u.toString();switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<
u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function I(a,u,n){switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function t(a,u,n){a instanceof w.SqlTimeStampOffset&&(a=a.toDateTime());u instanceof w.SqlTimeStampOffset&&(u=u.toDateTime());a=q(a);u=q(u);switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=
u;case "\x3c\x3d":return a<=u}}function q(a){return 321408E5*a.year+26784E5*a.month+864E5*a.day+36E5*a.hour+6E4*a.minute+1E3*a.second+a.millisecond}c.dateValueInMilliseconds=d;c.isDateOrTimeValue=p;c.isDateTimeComparableValue=f;c.sqlCompare=function(a,u,n,C){if(null==a||null==u)return null;if(y.isNumber(a)){if(y.isNumber(u))return r(a,u,n);if(y.isString(u))return z(a,u,n);if(p(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}else if(y.isString(a)){if(y.isNumber(u))return D(a,u,n);if(y.isString(u))return I(a,u,n);if(y.isDateTime(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(y.isTimeOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(y.isTimestampOffset(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(y.isDateTime(a)){if(f(u)){if(a instanceof B.DateTime&&F.isUnknownTimeZone(a.zone)){if(u instanceof B.DateTime&&
!1===F.isUnknownTimeZone(u.zone)||u instanceof w.SqlTimeStampOffset)return t(a,u,n)}else if(u instanceof B.DateTime&&F.isUnknownTimeZone(u.zone)&&(a instanceof B.DateTime&&!1===F.isUnknownTimeZone(a.zone)||a instanceof w.SqlTimeStampOffset))return t(a,u,n);return r(d(a),d(u),n)}if(y.isString(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))return u=u.toDateTimeLuxon(a.zone),a=a.startOf("day"),r(a.toMillis(),u.toMillis(),n);if(y.isTimeOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
if(y.isNumber(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(y.isDateOnly(a)){if(y.isTimestampOffset(u))return a=a.toDateTimeLuxon(u.toDateTime().zone),u=u.startOfDay(),r(a.toMillis(),u.toMilliseconds(),n);if(y.isDateTime(u))return a=a.toDateTimeLuxon(u.zone),u=u.startOf("day"),r(a.toMillis(),u.toMillis(),n);if(y.isString(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))return r(a.toNumber(),u.toNumber(),n);if(y.isTimeOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
if(y.isNumber(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(y.isTimeOnly(a)){if(y.isTimeOnly(u))return r(a.toNumber(),u.toNumber(),n);if(y.isString(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(y.isNumber(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(f(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(y.isTimestampOffset(a)){if(f(u))return u instanceof B.DateTime&&
F.isUnknownTimeZone(u.zone)?t(a,u,n):r(d(a),d(u),n);if(y.isString(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))return u=u.toDateTimeLuxon(a.toDateTime().zone),a=a.startOfDay(),r(a.toMilliseconds(),u.toMillis(),n);if(y.isTimeOnly(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(y.isNumber(u))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}switch(n){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=
u;case "\x3c\x3d":return a<=u}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(c,g){var y={exports:{}};(function(B){(function(f,p){B.exports&&(B.exports=p())})(g.commonjsGlobal,function(){function f(d,r,z,D){d=Error.call(this,d);Object.setPrototypeOf&&Object.setPrototypeOf(d,f.prototype);d.expected=r;d.found=z;d.location=D;d.name="SyntaxError";return d}function p(d,r,z){z=z||" ";if(d.length>
r)return d;r-=d.length;z+=z.repeat(r);return d+z.slice(0,r)}(function(d,r){function z(){this.constructor=d}z.prototype=r.prototype;d.prototype=new z})(f,Error);f.prototype.format=function(d){var r="Error: "+this.message;if(this.location){var z=null,D;for(D=0;D<d.length;D++)if(d[D].source===this.location.source){z=d[D].text.split(/\r\n|\n|\r/g);break}d=this.location.start;D=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(d):d;var I=this.location.source+
":"+D.line+":"+D.column;if(z){var t=this.location.end,q=p("",D.line.toString().length," ");z=z[d.line-1];t=(d.line===t.line?t.column:z.length+1)-d.column||1;r+="\n --\x3e "+I+"\n"+q+" |\n"+D.line+" | "+z+"\n"+q+" | "+p("",d.column-1," ")+p("",t,"^")}else r+="\n at "+I}return r};f.buildMessage=function(d,r){function z(a){return a.charCodeAt(0).toString(16).toUpperCase()}function D(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+z(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+z(u)})}function I(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+z(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+z(u)})}function t(a){return q[a.type](a)}var q={literal:function(a){return'"'+
D(a.text)+'"'},class:function(a){var u=a.parts.map(function(n){return Array.isArray(n)?I(n[0])+"-"+I(n[1]):I(n)});return"["+(a.inverted?"^":"")+u.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){a=a.map(t);var u,n;a.sort();if(0<a.length){for(n=u=1;u<a.length;u++)a[u-1]!==a[u]&&(a[n]=a[u],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,
-1).join(", ")+", or "+a[a.length-1]}}(d)+" but "+(r?'"'+D(r)+'"':"end of input")+" found."};return{SyntaxError:f,parse:function(d,r){function z(G,O){O=void 0!==O?O:q(oa,l);throw new f(G,null,null,O);}function D(G,O){return{type:"literal",text:G,ignoreCase:O}}function I(G,O,R){return{type:"class",parts:G,inverted:O,ignoreCase:R}}function t(G){var O=Yb[G],R;if(!O){for(R=G-1;!Yb[R];)R--;O=Yb[R];for(O={line:O.line,column:O.column};R<G;)10===d.charCodeAt(R)?(O.line++,O.column=1):O.column++,R++;Yb[G]=
O}return O}function q(G,O,R){R=t(G);var ea=t(O);return{source:Md,start:{offset:G,line:R.line,column:R.column},end:{offset:O,line:ea.line,column:ea.column}}}function a(G){l<eb||(l>eb&&(eb=l,yc=[]),yc.push(G))}function u(){var G=l;ka();var O=C();O!==b?(ka(),oa=G,G=O):(l=G,G=b);return G}function n(){var G=l;var O=C();if(O!==b){var R=[];var ea=l;var ra=ka();var za=Wa();if(za!==b){var Fa=ka();var Ga=C();Ga!==b?ea=ra=[ra,za,Fa,Ga]:(l=ea,ea=b)}else l=ea,ea=b;for(;ea!==b;)R.push(ea),ea=l,ra=ka(),za=Wa(),
za!==b?(Fa=ka(),Ga=C(),Ga!==b?ea=ra=[ra,za,Fa,Ga]:(l=ea,ea=b)):(l=ea,ea=b);oa=G;G={type:"expression-list"};O=[O];for(ea=0;ea<R.length;ea++)O.push(R[ea][3]);G.value=O}else l=G,G=b;return G}function C(){var G=l;var O=P();if(O!==b){var R=[];var ea=l;var ra=ka();var za=M();if(za!==b){var Fa=ka();var Ga=P();Ga!==b?ea=ra=[ra,za,Fa,Ga]:(l=ea,ea=b)}else l=ea,ea=b;for(;ea!==b;)R.push(ea),ea=l,ra=ka(),za=M(),za!==b?(Fa=ka(),Ga=P(),Ga!==b?ea=ra=[ra,za,Fa,Ga]:(l=ea,ea=b)):(l=ea,ea=b);oa=G;G=nb(O,R)}else l=G,
G=b;return G}function P(){var G=l;var O=e();if(O!==b){var R=[];var ea=l;var ra=ka();var za=J();if(za!==b){var Fa=ka();var Ga=e();Ga!==b?ea=ra=[ra,za,Fa,Ga]:(l=ea,ea=b)}else l=ea,ea=b;for(;ea!==b;)R.push(ea),ea=l,ra=ka(),za=J(),za!==b?(Fa=ka(),Ga=e(),Ga!==b?ea=ra=[ra,za,Fa,Ga]:(l=ea,ea=b)):(l=ea,ea=b);oa=G;G=nb(O,R)}else l=G,G=b;return G}function e(){var G=l;var O=A();if(O===b){O=l;if(33===d.charCodeAt(l)){var R=Nd;l++}else R=b,0===ha&&a(Od);if(R!==b){var ea=l;ha++;if(61===d.charCodeAt(l)){var ra=
Rc;l++}else ra=b,0===ha&&a(Sc);ha--;ra===b?ea=void 0:(l=ea,ea=b);ea!==b?O=R=[R,ea]:(l=O,O=b)}else l=O,O=b}O!==b?(R=ka(),ea=e(),ea!==b?(oa=G,G={type:"unary-expression",operator:"NOT",expr:ea}):(l=G,G=b)):(l=G,G=b);if(G===b){O=l;G=ba();if(G!==b){ka();R=l;ea=[];ra=l;var za=ka();var Fa=K();if(Fa!==b){var Ga=ka();var ob=ba();ob!==b?ra=za=[za,Fa,Ga,ob]:(l=ra,ra=b)}else l=ra,ra=b;if(ra!==b)for(;ra!==b;)ea.push(ra),ra=l,za=ka(),Fa=K(),Fa!==b?(Ga=ka(),ob=ba(),ob!==b?ra=za=[za,Fa,Ga,ob]:(l=ra,ra=b)):(l=ra,
ra=b);else ea=b;ea!==b&&(oa=R,ea={type:"arithmetic",tail:ea});R=ea;R===b&&(R=l,ea=S(),ea!==b?(ka(),ra=Ja(),ra!==b?(ka(),ra=n(),ra!==b?(ka(),za=Ka(),za!==b?(oa=R,R={op:ea,right:ra}):(l=R,R=b)):(l=R,R=b)):(l=R,R=b)):(l=R,R=b),R===b&&(R=l,ea=S(),ea!==b?(ka(),ra=Ja(),ra!==b?(ka(),ra=Ka(),ra!==b?(oa=R,R={op:ea,right:{type:"expression-list",value:[]}}):(l=R,R=b)):(l=R,R=b)):(l=R,R=b),R===b&&(R=l,ea=S(),ea!==b?(ka(),ra=X(),ra!==b?(oa=R,R={op:ea,right:ra}):(l=R,R=b)):(l=R,R=b))),R===b&&(R=l,za=A(),za!==b?
(ka(),ea=V(),ea!==b?(ka(),ra=ba(),ra!==b?(ka(),Fa=J(),Fa!==b?(ka(),za=ba(),za!==b?(oa=R,R={op:"NOT"+ea,right:{type:"expression-list",value:[ra,za]}}):(l=R,R=b)):(l=R,R=b)):(l=R,R=b)):(l=R,R=b)):(l=R,R=b),R===b&&(R=l,za=V(),za!==b?(ka(),ea=ba(),ea!==b?(ka(),ra=J(),ra!==b?(ka(),Fa=ba(),Fa!==b?(oa=R,R={op:za,right:{type:"expression-list",value:[ea,Fa]}}):(l=R,R=b)):(l=R,R=b)):(l=R,R=b)):(l=R,R=b)),R===b&&(R=l,ea=aa(),ea!==b?(ka(),ra=A(),ra!==b?(ka(),ra=ba(),ra!==b?(oa=R,R={op:ea+"NOT",right:ra}):(l=
R,R=b)):(l=R,R=b)):(l=R,R=b),R===b&&(R=l,ea=aa(),ea!==b?(ka(),ra=ba(),ra!==b?(oa=R,R={op:ea,right:ra}):(l=R,R=b)):(l=R,R=b)),R===b&&(R=l,ea=Q(),ea!==b?(ka(),ra=ta(),ra!==b?(ka(),za=l,d.substr(l,6).toLowerCase()===Pd?(Fa=d.substr(l,6),l+=6):(Fa=b,0===ha&&a(Qd)),Fa!==b?(Fa=l,ha++,Ga=x(),ha--,Ga===b?Fa=void 0:(l=Fa,Fa=b),Fa!==b?(oa=za,za="ESCAPE"):(l=za,za=b)):(l=za,za=b),za!==b?(ka(),za=wa(),za!==b?(oa=R,R={op:ea,right:ra,escape:za.value}):(l=R,R=b)):(l=R,R=b)):(l=R,R=b)):(l=R,R=b),R===b&&(R=l,ea=Q(),
ea!==b?(ka(),ra=ta(),ra!==b?(oa=R,R={op:ea,right:ra,escape:""}):(l=R,R=b)):(l=R,R=b))))));R===b&&(R=null);oa=O;O=R;""==O||void 0==O||null==O?O=G:(R=null,O=R="arithmetic"==O.type?nb(G,O.tail):Mb(O.op,G,O.right,O.escape))}else l=O,O=b;G=O}return G}function K(){if(d.substr(l,2)===Tc){var G=Tc;l+=2}else G=b,0===ha&&a(Rd);G===b&&(62===d.charCodeAt(l)?(G=Sd,l++):(G=b,0===ha&&a(Td)),G===b&&(d.substr(l,2)===Uc?(G=Uc,l+=2):(G=b,0===ha&&a(Ud)),G===b&&(d.substr(l,2)===Vc?(G=Vc,l+=2):(G=b,0===ha&&a(Vd)),G===
b&&(60===d.charCodeAt(l)?(G=Wd,l++):(G=b,0===ha&&a(Xd)),G===b&&(61===d.charCodeAt(l)?(G=Rc,l++):(G=b,0===ha&&a(Sc)),G===b&&(d.substr(l,2)===Wc?(G=Wc,l+=2):(G=b,0===ha&&a(Yd))))))));return G}function Q(){var G;var O=G=l;var R=A();if(R!==b){var ea=ka();var ra=ja();ra!==b?O=R=[R,ea,ra]:(l=O,O=b)}else l=O,O=b;O!==b&&(oa=G,O=O[0]+" "+O[2]);G=O;G===b&&(G=ja());return G}function S(){var G;var O=G=l;var R=A();if(R!==b){var ea=ka();var ra=Y();ra!==b?O=R=[R,ea,ra]:(l=O,O=b)}else l=O,O=b;O!==b&&(oa=G,O=O[0]+
" "+O[2]);G=O;G===b&&(G=Y());return G}function ba(){var G=l;var O=U();if(O!==b){var R=[];var ea=l;var ra=ka();var za=W();if(za!==b){var Fa=ka();var Ga=U();Ga!==b?ea=ra=[ra,za,Fa,Ga]:(l=ea,ea=b)}else l=ea,ea=b;for(;ea!==b;)R.push(ea),ea=l,ra=ka(),za=W(),za!==b?(Fa=ka(),Ga=U(),Ga!==b?ea=ra=[ra,za,Fa,Ga]:(l=ea,ea=b)):(l=ea,ea=b);oa=G;G=nb(O,R)}else l=G,G=b;return G}function W(){if(43===d.charCodeAt(l)){var G=zc;l++}else G=b,0===ha&&a(Ac);G===b&&(45===d.charCodeAt(l)?(G=Bc,l++):(G=b,0===ha&&a(Cc)),G===
b&&(d.substr(l,2)===Xc?(G=Xc,l+=2):(G=b,0===ha&&a(Zd))));return G}function U(){var G=l;var O=H();if(O!==b){var R=[];var ea=l;var ra=ka();var za=v();if(za!==b){var Fa=ka();var Ga=H();Ga!==b?ea=ra=[ra,za,Fa,Ga]:(l=ea,ea=b)}else l=ea,ea=b;for(;ea!==b;)R.push(ea),ea=l,ra=ka(),za=v(),za!==b?(Fa=ka(),Ga=H(),Ga!==b?ea=ra=[ra,za,Fa,Ga]:(l=ea,ea=b)):(l=ea,ea=b);oa=G;G=nb(O,R)}else l=G,G=b;return G}function v(){if(42===d.charCodeAt(l)){var G=$d;l++}else G=b,0===ha&&a(ae);G===b&&(47===d.charCodeAt(l)?(G=be,
l++):(G=b,0===ha&&a(ce)));return G}function H(){var G=wa();if(G===b){var O=l;var R=l;var ea=Sa();if(ea!==b){var ra=Ta();if(ra!==b){var za=Oa();za!==b?(oa=R,R=parseFloat(ea+ra+za)):(l=R,R=b)}else l=R,R=b}else l=R,R=b;R===b&&(R=l,ea=Sa(),ea!==b?(ra=Ta(),ra!==b?(oa=R,R=parseFloat(ea+ra)):(l=R,R=b)):(l=R,R=b),R===b&&(R=l,ea=Sa(),ea!==b?(ra=Oa(),ra!==b?(oa=R,R=parseFloat(ea+ra)):(l=R,R=b)):(l=R,R=b),R===b&&(R=l,ea=Sa(),ea!==b&&(oa=R,ea=parseFloat(ea)),R=ea)));var Fa=R;if(Fa!==b){var Ga=l;ha++;var ob=h();
ha--;ob===b?Ga=void 0:(l=Ga,Ga=b);Ga!==b?(oa=O,O={type:"number",value:Fa}):(l=O,O=b)}else l=O,O=b;G=O;if(G===b){var pb=l;var Jb=l;if(d.substr(l,4).toLowerCase()===de){var Zb=d.substr(l,4);l+=4}else Zb=b,0===ha&&a(ee);if(Zb!==b){var Nb=l;ha++;var fe=x();ha--;fe===b?Nb=void 0:(l=Nb,Nb=b);Nb!==b?Jb=Zb=[Zb,Nb]:(l=Jb,Jb=b)}else l=Jb,Jb=b;var qb=Jb;qb!==b&&(oa=pb,qb={type:"boolean",value:!0});pb=qb;if(pb===b){pb=l;var Kb=l;if(d.substr(l,5).toLowerCase()===ge){var $b=d.substr(l,5);l+=5}else $b=b,0===ha&&
a(he);if($b!==b){var Ob=l;ha++;var ie=x();ha--;ie===b?Ob=void 0:(l=Ob,Ob=b);Ob!==b?Kb=$b=[$b,Ob]:(l=Kb,Kb=b)}else l=Kb,Kb=b;qb=Kb;qb!==b&&(oa=pb,qb={type:"boolean",value:!1});pb=qb}G=pb;if(G===b){var je=l;var Lb=l;if(d.substr(l,4).toLowerCase()===ke){var ac=d.substr(l,4);l+=4}else ac=b,0===ha&&a(le);if(ac!==b){var Pb=l;ha++;var me=x();ha--;me===b?Pb=void 0:(l=Pb,Pb=b);Pb!==b?Lb=ac=[ac,Pb]:(l=Lb,Lb=b)}else l=Lb,Lb=b;var Dc=Lb;Dc!==b&&(oa=je,Dc={type:"null",value:null});G=Dc;if(G===b){var rb=l;if(la()!==
b){ka();var bc=ta();bc!==b?(oa=rb,"string"===bc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(bc.value)&&z("Date literal is invalid"),rb={type:"date",value:bc.value}):(l=rb,rb=b)}else l=rb,
rb=b;G=rb;if(G===b){var sb=l;if(fa()!==b){ka();var cc=ta();cc!==b?(oa=sb,"string"===cc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(cc.value)&&z("Timestamp literal is invalid"),sb={type:"timestamp",
value:cc.value}):(l=sb,sb=b)}else l=sb,sb=b;G=sb;if(G===b){var Ua=l;var Ec=ua();if(Ec!==b){ka();if(45===d.charCodeAt(l)){var hb=Bc;l++}else hb=b,0===ha&&a(Cc);hb===b&&(43===d.charCodeAt(l)?(hb=zc,l++):(hb=b,0===ha&&a(Ac)));if(hb!==b){ka();var Qb=ta();if(Qb!==b){ka();var Yc=ia();Yc!==b?(oa=Ua,Ua={type:"interval",value:Qb,qualifier:Yc,op:hb}):(l=Ua,Ua=b)}else l=Ua,Ua=b}else l=Ua,Ua=b}else l=Ua,Ua=b;Ua===b&&(Ua=l,Ec=ua(),Ec!==b?(ka(),hb=ta(),hb!==b?(ka(),Qb=ia(),Qb!==b?(oa=Ua,Ua={type:"interval",value:hb,
qualifier:Qb,op:""}):(l=Ua,Ua=b)):(l=Ua,Ua=b)):(l=Ua,Ua=b));G=Ua;if(G===b){var tb=l;if(ma()!==b){ka();var dc=ta();dc!==b?(oa=tb,"string"===dc.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(dc.value)&&z("Time literal is invalid"),tb={type:"time",value:dc.value}):(l=tb,tb=b)}else l=tb,tb=b;G=tb}}}}}}}var La=G;if(La===b){var Za=l;var ub=l;if(d.substr(l,7).toLowerCase()===ne){var Zc=d.substr(l,7);l+=7}else Zc=b,0===ha&&a(oe);if(Zc!==b){var ec=
l;ha++;var pe=x();ha--;pe===b?ec=void 0:(l=ec,ec=b);ec!==b?(oa=ub,ub="EXTRACT"):(l=ub,ub=b)}else l=ub,ub=b;if(ub!==b){ka();var qe=Ja();if(qe!==b){ka();var $a=pa();if($a===b&&($a=sa(),$a===b&&($a=Ca(),$a===b&&($a=xa(),$a===b&&($a=Ba(),$a===b&&($a=Aa(),$a===b)))))){var vb=l;if(d.substr(l,13).toLowerCase()===re){var $c=d.substr(l,13);l+=13}else $c=b,0===ha&&a(se);if($c!==b){var fc=l;ha++;var te=x();ha--;te===b?fc=void 0:(l=fc,fc=b);fc!==b?(oa=vb,vb="TIMEZONE_HOUR"):(l=vb,vb=b)}else l=vb,vb=b;$a=vb;if($a===
b){var wb=l;if(d.substr(l,15).toLowerCase()===ue){var ad=d.substr(l,15);l+=15}else ad=b,0===ha&&a(ve);if(ad!==b){var gc=l;ha++;var we=x();ha--;we===b?gc=void 0:(l=gc,gc=b);gc!==b?(oa=wb,wb="TIMEZONE_MINUTE"):(l=wb,wb=b)}else l=wb,wb=b;$a=wb}}var bd=$a;if(bd!==b){ka();var xe=Z();if(xe!==b){ka();var cd=C();if(cd!==b){ka();var ye=Ka();ye!==b?(oa=Za,Za={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:bd},cd]}}):(l=Za,Za=b)}else l=Za,Za=b}else l=Za,Za=b}else l=Za,
Za=b}else l=Za,Za=b}else l=Za,Za=b;La=Za;if(La===b){var ab=l;var xb=l;if(d.substr(l,9).toLowerCase()===ze){var dd=d.substr(l,9);l+=9}else dd=b,0===ha&&a(Ae);if(dd!==b){var hc=l;ha++;var Be=x();ha--;Be===b?hc=void 0:(l=hc,hc=b);hc!==b?(oa=xb,xb="SUBSTRING"):(l=xb,xb=b)}else l=xb,xb=b;if(xb!==b){ka();var Ce=Ja();if(Ce!==b){ka();var Fc=C();if(Fc!==b){ka();var De=Z();if(De!==b){ka();var Gc=C();if(Gc!==b){ka();var ib=l;var yb=l;if(d.substr(l,3).toLowerCase()===Ee){var ed=d.substr(l,3);l+=3}else ed=b,0===
ha&&a(Fe);if(ed!==b){var ic=l;ha++;var Ge=x();ha--;Ge===b?ic=void 0:(l=ic,ic=b);ic!==b?(oa=yb,yb="FOR"):(l=yb,yb=b)}else l=yb,yb=b;var Rb=yb;if(Rb!==b){var He=ka();var fd=C();if(fd!==b){var Ie=ka();ib=Rb=[Rb,He,fd,Ie]}else l=ib,ib=b}else l=ib,ib=b;ib===b&&(ib=null);Rb=Ka();Rb!==b?(oa=ab,ab={type:"function",name:"substring",args:{type:"expression-list",value:ib?[Fc,Gc,ib[2]]:[Fc,Gc]}}):(l=ab,ab=b)}else l=ab,ab=b}else l=ab,ab=b}else l=ab,ab=b}else l=ab,ab=b}else l=ab,ab=b;La=ab;if(La===b){var Na=l;
var Hc=ca();if(Hc!==b){ka();var Ic=Ja();if(Ic!==b){ka();var jb=da();jb===b&&(jb=null);ka();var Sb=C();if(Sb!==b){ka();var Jc=Z();if(Jc!==b){ka();var gd=C();if(gd!==b){ka();var Je=Ka();Je!==b?(oa=Na,Na={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Sb,gd]}}):(l=Na,Na=b)}else l=Na,Na=b}else l=Na,Na=b}else l=Na,Na=b}else l=Na,Na=b}else l=Na,Na=b;Na===b&&(Na=l,Hc=ca(),Hc!==b?(ka(),Ic=Ja(),Ic!==b?(ka(),jb=da(),jb===b&&(jb=null),ka(),Sb=C(),Sb!==
b?(ka(),Jc=Ka(),Jc!==b?(oa=Na,Na={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Sb]}}):(l=Na,Na=b)):(l=Na,Na=b)):(l=Na,Na=b)):(l=Na,Na=b));La=Na;if(La===b){var bb=l;var zb=l;if(d.substr(l,8).toLowerCase()===Ke){var hd=d.substr(l,8);l+=8}else hd=b,0===ha&&a(Le);if(hd!==b){var jc=l;ha++;var Me=x();ha--;Me===b?jc=void 0:(l=jc,jc=b);jc!==b?(oa=zb,zb="POSITION"):(l=zb,zb=b)}else l=zb,zb=b;if(zb!==b){ka();var Ne=Ja();if(Ne!==b){ka();var id=C();
if(id!==b){ka();var Oe=Y();if(Oe!==b){ka();var jd=C();if(jd!==b){ka();var Pe=Ka();Pe!==b?(oa=bb,bb={type:"function",name:"position",args:{type:"expression-list",value:[id,jd]}}):(l=bb,bb=b)}else l=bb,bb=b}else l=bb,bb=b}else l=bb,bb=b}else l=bb,bb=b}else l=bb,bb=b;La=bb;if(La===b){var cb=l;var Ab=l;if(d.substr(l,4).toLowerCase()===Qe){var kd=d.substr(l,4);l+=4}else kd=b,0===ha&&a(Re);if(kd!==b){var kc=l;ha++;var Se=x();ha--;Se===b?kc=void 0:(l=kc,kc=b);kc!==b?(oa=Ab,Ab="CAST"):(l=Ab,Ab=b)}else l=
Ab,Ab=b;if(Ab!==b){ka();var Te=Ja();if(Te!==b){ka();var ld=C();if(ld!==b){ka();var Bb=l;if(d.substr(l,2).toLowerCase()===Ue){var md=d.substr(l,2);l+=2}else md=b,0===ha&&a(Ve);if(md!==b){var lc=l;ha++;var We=x();ha--;We===b?lc=void 0:(l=lc,lc=b);lc!==b?(oa=Bb,Bb="AS"):(l=Bb,Bb=b)}else l=Bb,Bb=b;var Xe=Bb;if(Xe!==b){ka();var Ha=l;var Cb=l;if(d.substr(l,7).toLowerCase()===Ye){var nd=d.substr(l,7);l+=7}else nd=b,0===ha&&a(Ze);if(nd!==b){var mc=l;ha++;var $e=x();ha--;$e===b?mc=void 0:(l=mc,mc=b);mc!==
b?(oa=Cb,Cb="INTEGER"):(l=Cb,Cb=b)}else l=Cb,Cb=b;var Ma=Cb;Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"integer"}});Ha=Ma;if(Ha===b){Ha=l;var Db=l;if(d.substr(l,8).toLowerCase()===af){var od=d.substr(l,8);l+=8}else od=b,0===ha&&a(bf);if(od!==b){var nc=l;ha++;var cf=x();ha--;cf===b?nc=void 0:(l=nc,nc=b);nc!==b?(oa=Db,Db="SMALLINT"):(l=Db,Db=b)}else l=Db,Db=b;Ma=Db;Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"smallint"}});Ha=Ma;if(Ha===b){Ha=l;var Eb=l;if(d.substr(l,5).toLowerCase()===df){var pd=
d.substr(l,5);l+=5}else pd=b,0===ha&&a(ef);if(pd!==b){var oc=l;ha++;var ff=x();ha--;ff===b?oc=void 0:(l=oc,oc=b);oc!==b?(oa=Eb,Eb="FLOAT"):(l=Eb,Eb=b)}else l=Eb,Eb=b;Ma=Eb;Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"float"}});Ha=Ma;if(Ha===b){Ha=l;var Fb=l;if(d.substr(l,4).toLowerCase()===gf){var qd=d.substr(l,4);l+=4}else qd=b,0===ha&&a(hf);if(qd!==b){var pc=l;ha++;var jf=x();ha--;jf===b?pc=void 0:(l=pc,pc=b);pc!==b?(oa=Fb,Fb="REAL"):(l=Fb,Fb=b)}else l=Fb,Fb=b;Ma=Fb;Ma!==b&&(oa=Ha,Ma={type:"data-type",
value:{type:"real"}});Ha=Ma;if(Ha===b&&(Ha=l,Ma=la(),Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"date"}}),Ha=Ma,Ha===b&&(Ha=l,Ma=fa(),Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"timestamp"}}),Ha=Ma,Ha===b&&(Ha=l,Ma=ma(),Ma!==b&&(oa=Ha,Ma={type:"data-type",value:{type:"time"}}),Ha=Ma,Ha===b)))){Ha=l;var Gb=l;if(d.substr(l,7).toLowerCase()===kf){var rd=d.substr(l,7);l+=7}else rd=b,0===ha&&a(lf);if(rd!==b){var qc=l;ha++;var mf=x();ha--;mf===b?qc=void 0:(l=qc,qc=b);qc!==b?(oa=Gb,Gb="VARCHAR"):
(l=Gb,Gb=b)}else l=Gb,Gb=b;Ma=Gb;if(Ma!==b){ka();var nf=Ja();if(nf!==b){ka();var sd=k();if(sd!==b){ka();var of=Ka();of!==b?(oa=Ha,Ha={type:"data-type",value:{type:"varchar",size:parseInt(sd)}}):(l=Ha,Ha=b)}else l=Ha,Ha=b}else l=Ha,Ha=b}else l=Ha,Ha=b}}}}var td=Ha;if(td!==b){ka();var pf=Ka();pf!==b?(oa=cb,cb={type:"function",name:"cast",args:{type:"expression-list",value:[ld,td]}}):(l=cb,cb=b)}else l=cb,cb=b}else l=cb,cb=b}else l=cb,cb=b}else l=cb,cb=b}else l=cb,cb=b;La=cb;if(La===b){var kb=l;var db=
l;var Tb=m();Tb!==b&&(oa=db);db=Tb;if(db===b)if(db=l,96===d.charCodeAt(l)?(Tb=ud,l++):(Tb=b,0===ha&&a(vd)),Tb!==b){var rc=[];if(wd.test(d.charAt(l))){var lb=d.charAt(l);l++}else lb=b,0===ha&&a(xd);if(lb!==b)for(;lb!==b;)rc.push(lb),wd.test(d.charAt(l))?(lb=d.charAt(l),l++):(lb=b,0===ha&&a(xd));else rc=b;rc!==b?(96===d.charCodeAt(l)?(lb=ud,l++):(lb=b,0===ha&&a(vd)),lb!==b?(oa=db,db=rc.join("")):(l=db,db=b)):(l=db,db=b)}else l=db,db=b;var yd=db;if(yd!==b){ka();var qf=Ja();if(qf!==b){ka();var sc=n();
sc===b&&(sc=null);ka();var rf=Ka();rf!==b?(oa=kb,kb={type:"function",name:yd,args:sc?sc:{type:"expression-list",value:[]}}):(l=kb,kb=b)}else l=kb,kb=b}else l=kb,kb=b;La=kb;if(La===b){var fb;var Va=l;var Kc=ya();if(Kc!==b){ka();var Ub=C();if(Ub!==b){ka();var Vb=[];for(fb=Da();fb!==b;)Vb.push(fb),fb=Da();fb=ka();var tc=Ia();tc!==b?(oa=Va,Va={type:"case-expression",format:"simple",operand:Ub,clauses:Vb,else:null}):(l=Va,Va=b)}else l=Va,Va=b}else l=Va,Va=b;if(Va===b)if(Va=l,Kc=ya(),Kc!==b)if(ka(),Ub=
C(),Ub!==b){ka();Vb=[];for(fb=Da();fb!==b;)Vb.push(fb),fb=Da();fb=ka();tc=Pa();if(tc!==b){ka();var sf=Ia();sf!==b?(oa=Va,Va={type:"case-expression",format:"simple",operand:Ub,clauses:Vb,else:tc.value}):(l=Va,Va=b)}else l=Va,Va=b}else l=Va,Va=b;else l=Va,Va=b;var Lc=Va;if(Lc===b){var gb;var Xa=l;var Mc=ya();if(Mc!==b){ka();var Wb=[];for(gb=Ea();gb!==b;)Wb.push(gb),gb=Ea();gb=ka();var uc=Ia();uc!==b?(oa=Xa,Xa={type:"case-expression",format:"searched",clauses:Wb,else:null}):(l=Xa,Xa=b)}else l=Xa,Xa=
b;if(Xa===b)if(Xa=l,Mc=ya(),Mc!==b){ka();Wb=[];for(gb=Ea();gb!==b;)Wb.push(gb),gb=Ea();gb=ka();uc=Pa();if(uc!==b){ka();var tf=Ia();tf!==b?(oa=Xa,Xa={type:"case-expression",format:"searched",clauses:Wb,else:uc.value}):(l=Xa,Xa=b)}else l=Xa,Xa=b}else l=Xa,Xa=b;Lc=Xa}La=Lc;if(La===b){var Hb=l;var uf=l;var vc;var Xb=l;var zd=h();if(zd!==b){var Ad=[];for(vc=N();vc!==b;)Ad.push(vc),vc=N();oa=Xb;Xb=zd+Ad.join("")}else l=Xb,Xb=b;var Bd=Xb;Bd!==b&&(oa=uf);var mb=Bd;if(mb!==b){oa=Hb;var Nc=mb;mb=/^CURRENT_DATE$/i.test(Nc)?
{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Nc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Nc}}Hb=mb;if(Hb===b){Hb=l;var Ib=l;if(T()!==b){var wc;var vf=l;var Oc=[];for(wc=L();wc!==b;)Oc.push(wc),wc=L();oa=vf;var wf=Oc=Oc.join("");var xf=T();xf!==b?(oa=Ib,Ib=wf):(l=Ib,Ib=b)}else l=Ib,Ib=b;mb=Ib;mb!==b&&(oa=Hb,mb={type:"column-reference",table:"",column:mb,delimited:!0});Hb=mb}La=Hb;if(La===b&&(La=X(),La===b)){La=l;var yf=Ja();if(yf!==b){ka();var Pc=
C();if(Pc!==b){ka();var zf=Ka();zf!==b?(oa=La,Pc.paren=!0,La=Pc):(l=La,La=b)}else l=La,La=b}else l=La,La=b}}}}}}}}}return La}function m(){var G;var O=l;var R=h();if(R!==b){var ea=[];for(G=x();G!==b;)ea.push(G),G=x();oa=O;O=R+ea.join("")}else l=O,O=b;return O}function h(){if(Af.test(d.charAt(l))){var G=d.charAt(l);l++}else G=b,0===ha&&a(Bf);return G}function x(){if(Cf.test(d.charAt(l))){var G=d.charAt(l);l++}else G=b,0===ha&&a(Df);return G}function N(){if(Cd.test(d.charAt(l))){var G=d.charAt(l);l++}else G=
b,0===ha&&a(Dd);return G}function L(){if(Cd.test(d.charAt(l))){var G=d.charAt(l);l++}else G=b,0===ha&&a(Dd);if(G===b)if(G=l,T()!==b){var O=T();O!==b?(oa=G,G='"'):(l=G,G=b)}else l=G,G=b;return G}function T(){if(Ef.test(d.charAt(l))){var G=d.charAt(l);l++}else G=b,0===ha&&a(Ff);return G}function X(){var G;var O=G=l;if(64===d.charCodeAt(l)){var R=Gf;l++}else R=b,0===ha&&a(Hf);if(R!==b){var ea=m();ea!==b?O=R=[R,ea]:(l=O,O=b)}else l=O,O=b;O!==b&&(oa=G,O={type:"parameter",value:O[1]});return O}function da(){var G=
l;if(d.substr(l,7).toLowerCase()===If){var O=d.substr(l,7);l+=7}else O=b,0===ha&&a(Jf);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="LEADING"):(l=G,G=b)}else l=G,G=b;G===b&&(G=l,d.substr(l,8).toLowerCase()===Kf?(O=d.substr(l,8),l+=8):(O=b,0===ha&&a(Lf)),O!==b?(O=l,ha++,R=x(),ha--,R===b?O=void 0:(l=O,O=b),O!==b?(oa=G,G="TRAILING"):(l=G,G=b)):(l=G,G=b),G===b&&(G=l,d.substr(l,4).toLowerCase()===Mf?(O=d.substr(l,4),l+=4):(O=b,0===ha&&a(Nf)),O!==b?(O=l,ha++,R=x(),ha--,R===b?
O=void 0:(l=O,O=b),O!==b?(oa=G,G="BOTH"):(l=G,G=b)):(l=G,G=b)));return G}function ia(){var G=l;var O=l;var R=na();if(R!==b){ka();var ea=Ja();if(ea!==b)if(ka(),ea=va(),ea!==b){ka();var ra=Ka();ra!==b?(oa=O,O={type:"interval-period",period:R.value,precision:ea,secondary:null}):(l=O,O=b)}else l=O,O=b;else l=O,O=b}else l=O,O=b;O===b&&(O=l,R=na(),R!==b&&(oa=O,R={type:"interval-period",period:R.value,precision:null,secondary:null}),O=R);if(O!==b)if(ka(),R=l,d.substr(l,2).toLowerCase()===Of?(ea=d.substr(l,
2),l+=2):(ea=b,0===ha&&a(Pf)),ea!==b?(ea=l,ha++,ra=x(),ha--,ra===b?ea=void 0:(l=ea,ea=b),ea!==b?(oa=R,R="TO"):(l=R,R=b)):(l=R,R=b),R!==b){ka();R=l;ea=na();ea!==b&&(oa=R,ea={type:"interval-period",period:ea.value,precision:null,secondary:null});R=ea;if(R===b){R=l;ea=Aa();if(ea!==b)if(ka(),ea=Ja(),ea!==b)if(ka(),ea=va(),ea!==b)if(ka(),ra=Wa(),ra!==b)if(ka(),ra=qa(),ra!==b){ka();var za=Ka();za!==b?(oa=R,R={type:"interval-period",period:"second",precision:ea,secondary:ra}):(l=R,R=b)}else l=R,R=b;else l=
R,R=b;else l=R,R=b;else l=R,R=b;else l=R,R=b;R===b&&(R=l,ea=Aa(),ea!==b?(ka(),ea=Ja(),ea!==b?(ka(),ea=va(),ea!==b?(ka(),ra=Ka(),ra!==b?(oa=R,R={type:"interval-period",period:"second",precision:ea,secondary:null}):(l=R,R=b)):(l=R,R=b)):(l=R,R=b)):(l=R,R=b),R===b&&(R=l,ea=Aa(),ea!==b&&(oa=R,ea={type:"interval-period",period:"second",precision:null,secondary:null}),R=ea))}R!==b?(oa=G,G={type:"interval-qualifier",start:O,end:R}):(l=G,G=b)}else l=G,G=b;else l=G,G=b;G===b&&(G=l,R=na(),R!==b?(ka(),O=Ja(),
O!==b?(ka(),O=qa(),O!==b?(ka(),ea=Ka(),ea!==b?(oa=G,G={type:"interval-period",period:R.value,precision:O,secondary:null}):(l=G,G=b)):(l=G,G=b)):(l=G,G=b)):(l=G,G=b),G===b&&(G=l,R=na(),R!==b&&(oa=G,R={type:"interval-period",period:R.value,precision:null,secondary:null}),G=R,G===b&&(G=l,R=Aa(),R!==b?(ka(),O=Ja(),O!==b?(ka(),O=va(),O!==b?(ka(),ea=Wa(),ea!==b?(ka(),R=qa(),R!==b?(ka(),ea=Ka(),ea!==b?(oa=G,G={type:"interval-period",period:"second",precision:O,secondary:R}):(l=G,G=b)):(l=G,G=b)):(l=G,G=
b)):(l=G,G=b)):(l=G,G=b)):(l=G,G=b),G===b&&(G=l,R=Aa(),R!==b?(ka(),O=Ja(),O!==b?(ka(),O=qa(),O!==b?(ka(),ea=Ka(),ea!==b?(oa=G,G={type:"interval-period",period:"second",precision:O,secondary:null}):(l=G,G=b)):(l=G,G=b)):(l=G,G=b)):(l=G,G=b),G===b&&(G=l,R=Aa(),R!==b&&(oa=G,R={type:"interval-period",period:"second",precision:null,secondary:null}),G=R)))));return G}function na(){var G=l;var O=Ca();O!==b&&(oa=G,O={type:"string",value:"day"});G=O;G===b&&(G=l,O=xa(),O!==b&&(oa=G,O={type:"string",value:"hour"}),
G=O,G===b&&(G=l,O=Ba(),O!==b&&(oa=G,O={type:"string",value:"minute"}),G=O,G===b&&(G=l,O=sa(),O!==b&&(oa=G,O={type:"string",value:"month"}),G=O,G===b&&(G=l,O=pa(),O!==b&&(oa=G,O={type:"string",value:"year"}),G=O))));return G}function qa(){var G=l;var O=k();O!==b&&(oa=G,O=parseFloat(O));return O}function va(){var G=l;var O=k();O!==b&&(oa=G,O=parseFloat(O));return O}function ta(){var G=wa();G===b&&(G=X());return G}function wa(){var G=l;if(39===d.charCodeAt(l)){var O=Ed;l++}else O=b,0===ha&&a(Fd);O===
b&&(d.substr(l,2)===Gd?(O=Gd,l+=2):(O=b,0===ha&&a(Qf)));if(O!==b){O=[];var R=l;if(d.substr(l,2)===xc){var ea=xc;l+=2}else ea=b,0===ha&&a(Hd);ea!==b&&(oa=R,ea="'");R=ea;R===b&&(Id.test(d.charAt(l))?(R=d.charAt(l),l++):(R=b,0===ha&&a(Jd)));for(;R!==b;)O.push(R),R=l,d.substr(l,2)===xc?(ea=xc,l+=2):(ea=b,0===ha&&a(Hd)),ea!==b&&(oa=R,ea="'"),R=ea,R===b&&(Id.test(d.charAt(l))?(R=d.charAt(l),l++):(R=b,0===ha&&a(Jd)));39===d.charCodeAt(l)?(R=Ed,l++):(R=b,0===ha&&a(Fd));R!==b?(oa=G,G={type:"string",value:O.join("")}):
(l=G,G=b)}else l=G,G=b;return G}function Ea(){var G=l;if(Qa()!==b){ka();var O=C();if(O!==b){ka();var R=Ya();R!==b?(ka(),R=C(),R!==b?(oa=G,G={type:"when-clause",operand:O,value:R}):(l=G,G=b)):(l=G,G=b)}else l=G,G=b}else l=G,G=b;return G}function Da(){var G=l;if(Qa()!==b){ka();var O=C();if(O!==b){ka();var R=Ya();R!==b?(ka(),R=C(),R!==b?(oa=G,G={type:"when-clause",operand:O,value:R}):(l=G,G=b)):(l=G,G=b)}else l=G,G=b}else l=G,G=b;return G}function Pa(){var G=l;var O=l;if(d.substr(l,4).toLowerCase()===
Rf){var R=d.substr(l,4);l+=4}else R=b,0===ha&&a(Sf);if(R!==b){R=l;ha++;var ea=x();ha--;ea===b?R=void 0:(l=R,R=b);R!==b?(oa=O,O="ELSE"):(l=O,O=b)}else l=O,O=b;O!==b?(ka(),O=C(),O!==b?(oa=G,G={type:"else-clause",value:O}):(l=G,G=b)):(l=G,G=b);return G}function Sa(){var G=k();if(G===b){G=l;if(45===d.charCodeAt(l)){var O=Bc;l++}else O=b,0===ha&&a(Cc);O===b&&(43===d.charCodeAt(l)?(O=zc,l++):(O=b,0===ha&&a(Ac)));if(O!==b){var R=k();R!==b?(oa=G,G=O[0]+R):(l=G,G=b)}else l=G,G=b}return G}function Ta(){var G=
l;if(46===d.charCodeAt(l)){var O=Tf;l++}else O=b,0===ha&&a(Uf);O!==b?(O=k(),O===b&&(O=null),oa=G,G="."+(null!=O?O:"")):(l=G,G=b);return G}function Oa(){var G;var O=G=l;if(Vf.test(d.charAt(l))){var R=d.charAt(l);l++}else R=b,0===ha&&a(Wf);R!==b?(Xf.test(d.charAt(l))?(R=d.charAt(l),l++):(R=b,0===ha&&a(Yf)),R===b&&(R=null),oa=O,O="e"+(null===R?"":R)):(l=O,O=b);O!==b?(R=k(),R!==b?(oa=G,G=O+R):(l=G,G=b)):(l=G,G=b);return G}function k(){var G=l;var O=[];var R=E();if(R!==b)for(;R!==b;)O.push(R),R=E();else O=
b;O!==b&&(oa=G,O=O.join(""));return O}function E(){if(Zf.test(d.charAt(l))){var G=d.charAt(l);l++}else G=b,0===ha&&a($f);return G}function Y(){var G=l;if(d.substr(l,2).toLowerCase()===ag){var O=d.substr(l,2);l+=2}else O=b,0===ha&&a(bg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="IN"):(l=G,G=b)}else l=G,G=b;return G}function aa(){var G=l;if(d.substr(l,2).toLowerCase()===cg){var O=d.substr(l,2);l+=2}else O=b,0===ha&&a(dg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:
(l=O,O=b);O!==b?(oa=G,G="IS"):(l=G,G=b)}else l=G,G=b;return G}function ja(){var G=l;if(d.substr(l,4).toLowerCase()===eg){var O=d.substr(l,4);l+=4}else O=b,0===ha&&a(fg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="LIKE"):(l=G,G=b)}else l=G,G=b;return G}function A(){var G=l;if(d.substr(l,3).toLowerCase()===gg){var O=d.substr(l,3);l+=3}else O=b,0===ha&&a(hg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="NOT"):(l=G,G=b)}else l=G,G=b;return G}function J(){var G=
l;if(d.substr(l,3).toLowerCase()===ig){var O=d.substr(l,3);l+=3}else O=b,0===ha&&a(jg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="AND"):(l=G,G=b)}else l=G,G=b;return G}function M(){var G=l;if(d.substr(l,2).toLowerCase()===kg){var O=d.substr(l,2);l+=2}else O=b,0===ha&&a(lg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="OR"):(l=G,G=b)}else l=G,G=b;return G}function V(){var G=l;if(d.substr(l,7).toLowerCase()===mg){var O=d.substr(l,7);l+=7}else O=
b,0===ha&&a(ng);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="BETWEEN"):(l=G,G=b)}else l=G,G=b;return G}function Z(){var G=l;if(d.substr(l,4).toLowerCase()===og){var O=d.substr(l,4);l+=4}else O=b,0===ha&&a(pg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="FROM"):(l=G,G=b)}else l=G,G=b;return G}function ca(){var G=l;if(d.substr(l,4).toLowerCase()===qg){var O=d.substr(l,4);l+=4}else O=b,0===ha&&a(rg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:
(l=O,O=b);O!==b?(oa=G,G="TRIM"):(l=G,G=b)}else l=G,G=b;return G}function fa(){var G=l;if(d.substr(l,9).toLowerCase()===sg){var O=d.substr(l,9);l+=9}else O=b,0===ha&&a(tg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="TIMESTAMP"):(l=G,G=b)}else l=G,G=b;return G}function la(){var G=l;if(d.substr(l,4).toLowerCase()===ug){var O=d.substr(l,4);l+=4}else O=b,0===ha&&a(vg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="DATE"):(l=G,G=b)}else l=G,G=b;return G}
function ma(){var G=l;if(d.substr(l,4).toLowerCase()===wg){var O=d.substr(l,4);l+=4}else O=b,0===ha&&a(xg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="TIME"):(l=G,G=b)}else l=G,G=b;return G}function ua(){var G=l;if(d.substr(l,8).toLowerCase()===yg){var O=d.substr(l,8);l+=8}else O=b,0===ha&&a(zg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="INTERVAL"):(l=G,G=b)}else l=G,G=b;return G}function pa(){var G=l;if(d.substr(l,4).toLowerCase()===Ag){var O=
d.substr(l,4);l+=4}else O=b,0===ha&&a(Bg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="YEAR"):(l=G,G=b)}else l=G,G=b;return G}function sa(){var G=l;if(d.substr(l,5).toLowerCase()===Cg){var O=d.substr(l,5);l+=5}else O=b,0===ha&&a(Dg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="MONTH"):(l=G,G=b)}else l=G,G=b;return G}function Ca(){var G=l;if(d.substr(l,3).toLowerCase()===Eg){var O=d.substr(l,3);l+=3}else O=b,0===ha&&a(Fg);if(O!==b){O=l;ha++;
var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="DAY"):(l=G,G=b)}else l=G,G=b;return G}function xa(){var G=l;if(d.substr(l,4).toLowerCase()===Gg){var O=d.substr(l,4);l+=4}else O=b,0===ha&&a(Hg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="HOUR"):(l=G,G=b)}else l=G,G=b;return G}function Ba(){var G=l;if(d.substr(l,6).toLowerCase()===Ig){var O=d.substr(l,6);l+=6}else O=b,0===ha&&a(Jg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="MINUTE"):
(l=G,G=b)}else l=G,G=b;return G}function Aa(){var G=l;if(d.substr(l,6).toLowerCase()===Kg){var O=d.substr(l,6);l+=6}else O=b,0===ha&&a(Lg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="SECOND"):(l=G,G=b)}else l=G,G=b;return G}function ya(){var G=l;if(d.substr(l,4).toLowerCase()===Mg){var O=d.substr(l,4);l+=4}else O=b,0===ha&&a(Ng);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="CASE"):(l=G,G=b)}else l=G,G=b;return G}function Ia(){var G=l;if(d.substr(l,
3).toLowerCase()===Og){var O=d.substr(l,3);l+=3}else O=b,0===ha&&a(Pg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="END"):(l=G,G=b)}else l=G,G=b;return G}function Qa(){var G=l;if(d.substr(l,4).toLowerCase()===Qg){var O=d.substr(l,4);l+=4}else O=b,0===ha&&a(Rg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="WHEN"):(l=G,G=b)}else l=G,G=b;return G}function Ya(){var G=l;if(d.substr(l,4).toLowerCase()===Sg){var O=d.substr(l,4);l+=4}else O=b,0===ha&&
a(Tg);if(O!==b){O=l;ha++;var R=x();ha--;R===b?O=void 0:(l=O,O=b);O!==b?(oa=G,G="THEN"):(l=G,G=b)}else l=G,G=b;return G}function Wa(){if(44===d.charCodeAt(l)){var G=Ug;l++}else G=b,0===ha&&a(Vg);return G}function Ja(){if(40===d.charCodeAt(l)){var G=Wg;l++}else G=b,0===ha&&a(Xg);return G}function Ka(){if(41===d.charCodeAt(l)){var G=Yg;l++}else G=b,0===ha&&a(Zg);return G}function ka(){var G;var O=[];for(G=Ra();G!==b;)O.push(G),G=Ra();return O}function Ra(){if($g.test(d.charAt(l))){var G=d.charAt(l);
l++}else G=b,0===ha&&a(ah);return G}function Mb(G,O,R,ea){G={type:"binary-expression",operator:G,left:O,right:R};void 0!==ea&&(G.escape=ea);return G}function nb(G,O){for(var R=0;R<O.length;R++)G=Mb(O[R][1],G,O[R][3]);return G}r=void 0!==r?r:{};var b={},Md=r.grammarSource,Kd={start:u},Ld=u,Nd="!",Rc="\x3d",Tc="\x3e\x3d",Sd="\x3e",Uc="\x3c\x3d",Vc="\x3c\x3e",Wd="\x3c",Wc="!\x3d",zc="+",Bc="-",Xc="||",$d="*",be="/",Gf="@",Ed="'",Gd="N'",xc="''",Tf=".",ke="null",de="true",ge="false",ag="in",cg="is",eg=
"like",Pd="escape",gg="not",ig="and",kg="or",mg="between",og="from",Ee="for",ze="substring",ne="extract",qg="trim",Ke="position",sg="timestamp",ug="date",wg="time",If="leading",Kf="trailing",Mf="both",Qe="cast",Ue="as",Ye="integer",af="smallint",df="float",gf="real",kf="varchar",Of="to",yg="interval",Ag="year",re="timezone_hour",ue="timezone_minute",Cg="month",Eg="day",Gg="hour",Ig="minute",Kg="second",Mg="case",Og="end",Qg="when",Sg="then",Rf="else",Ug=",",Wg="(",Yg=")",ud="`",Af=/^[A-Za-z_\x80-\uFFFF]/,
Cf=/^[A-Za-z0-9_]/,Cd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ef=/^["]/,Id=/^[^']/,Zf=/^[0-9]/,Vf=/^[eE]/,Xf=/^[+\-]/,$g=/^[ \t\n\r]/,wd=/^[^`]/,Od=D("!",!1),Sc=D("\x3d",!1),Rd=D("\x3e\x3d",!1),Td=D("\x3e",!1),Ud=D("\x3c\x3d",!1),Vd=D("\x3c\x3e",!1),Xd=D("\x3c",!1),Yd=D("!\x3d",!1),Ac=D("+",!1),Cc=D("-",!1),Zd=D("||",!1),ae=D("*",!1),ce=D("/",!1),Bf=I([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Df=I([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Dd=I([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],
!1,!1),Ff=I(['"'],!1,!1),Hf=D("@",!1),Fd=D("'",!1),Qf=D("N'",!1),Hd=D("''",!1),Jd=I(["'"],!0,!1),Uf=D(".",!1),$f=I([["0","9"]],!1,!1),Wf=I(["e","E"],!1,!1),Yf=I(["+","-"],!1,!1),le=D("NULL",!0),ee=D("TRUE",!0),he=D("FALSE",!0),bg=D("IN",!0),dg=D("IS",!0),fg=D("LIKE",!0),Qd=D("ESCAPE",!0),hg=D("NOT",!0),jg=D("AND",!0),lg=D("OR",!0),ng=D("BETWEEN",!0),pg=D("FROM",!0),Fe=D("FOR",!0),Ae=D("SUBSTRING",!0),oe=D("EXTRACT",!0),rg=D("TRIM",!0),Le=D("POSITION",!0),tg=D("TIMESTAMP",!0),vg=D("DATE",!0),xg=D("TIME",
!0),Jf=D("LEADING",!0),Lf=D("TRAILING",!0),Nf=D("BOTH",!0),Re=D("CAST",!0),Ve=D("AS",!0),Ze=D("INTEGER",!0),bf=D("SMALLINT",!0),ef=D("FLOAT",!0),hf=D("REAL",!0),lf=D("VARCHAR",!0),Pf=D("TO",!0),zg=D("INTERVAL",!0),Bg=D("YEAR",!0),se=D("TIMEZONE_HOUR",!0),ve=D("TIMEZONE_MINUTE",!0),Dg=D("MONTH",!0),Fg=D("DAY",!0),Hg=D("HOUR",!0),Jg=D("MINUTE",!0),Lg=D("SECOND",!0),Ng=D("CASE",!0),Pg=D("END",!0),Rg=D("WHEN",!0),Tg=D("THEN",!0),Sf=D("ELSE",!0),Vg=D(",",!1),Xg=D("(",!1),Zg=D(")",!1),ah=I([" ","\t","\n",
"\r"],!1,!1),vd=D("`",!1),xd=I(["`"],!0,!1),l=0,oa=0,Yb=[{line:1,column:1}],eb=0,yc=[],ha=0;if("startRule"in r){if(!(r.startRule in Kd))throw Error("Can't start parsing from rule \""+r.startRule+'".');Ld=Kd[r.startRule]}var Qc=Ld();if(Qc!==b&&l===d.length)return Qc;Qc!==b&&l<d.length&&a({type:"end"});throw function(G,O,R){return new f(f.buildMessage(G,O),G,O,R)}(yc,eb<d.length?d.charAt(eb):null,eb<d.length?q(eb,eb+1):q(eb,eb));}}})})(y);var w=y.exports;class F{static parse(B){return w.parse(B)}}c.WhereGrammar=
F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(c,g){g=new g.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});c.kebabDict=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(c){c.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,
centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,
supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(c,g,y,w,F,B,f,p,d,r,z,D,I){function t(n,C,P,e){const K=e.x-P.x;e=e.y-P.y;C=Math.min(1,Math.max(0,((C.x-P.x)*K+(C.y-P.y)*e)/(K*K+e*e)));n.x=P.x+K*C;n.y=P.y+e*C}function q(n,C){return n?C?4:3:C?3:2}class a{constructor(n,C,P){this.items=n;this.query=C;this.geometryType=P.geometryType;this.hasM=P.hasM;this.hasZ=P.hasZ;this.fieldsIndex=P.fieldsIndex;this.objectIdField=P.objectIdField;this.spatialReference=P.spatialReference;this.featureAdapter=P.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const n=
new p(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return n.countDistinctValues(this.items);const {groupByFieldsForStatistics:C,having:P,outStatistics:e}=this.query;if(!C?.length)return 1;const K=new Map,Q=new Map,S=new Set;for(const U of e){var {statisticType:ba}=U;ba="exceedslimit"!==ba?U.onStatisticField:void 0;if(!Q.has(ba)){var W=[];for(const v of C){const H=this._getAttributeValues(n,v,K);W.push(H)}Q.set(ba,this._calculateUniqueValues(W,n.returnDistinctValues))}ba=
Q.get(ba);for(const v in ba){const {data:H,items:m}=ba[v];W=H.join(",");P&&!n.validateItems(m,P)||S.add(W)}}return S.size}async createQueryResponse(){let n;n=this.query.outStatistics?this.query.outStatistics.some(C=>"exceedslimit"===C.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const C=this.query.geometry;f.isValid(this.query.outSR)&&!f.equals(C.spatialReference,
this.query.outSR)?n.queryGeometry=d.cleanFromGeometryEngine({spatialReference:this.query.outSR,...r.project(C,C.spatialReference,this.query.outSR)}):n.queryGeometry=d.cleanFromGeometryEngine({spatialReference:this.query.outSR,...C})}return n}createSnappingResponse(n,C){const P=this.featureAdapter,e=q(this.hasZ,this.hasM),{point:K,mode:Q}=n,S="number"===typeof n.distance?n.distance:n.distance.x,ba="number"===typeof n.distance?n.distance:n.distance.y,W={candidates:[]},U="esriGeometryPolygon"===this.geometryType;
C=this._getPointCreator(Q,this.spatialReference,C);const v=new u(null,0),H=new u(null,0),m={x:0,y:0,z:0};for(const da of this.items){var h=P.getGeometry(da);if(null==h)continue;const {coords:ia,lengths:na}=h;v.coords=ia;H.coords=ia;if(n.returnEdge){h=0;for(var x=0;x<na.length;x++){var N=na[x];for(var L=0;L<N;L++,h+=e){var T=v;T.coordsIndex=h;if(L!==N-1){const qa=H;qa.coordsIndex=h+e;const va=m;t(m,K,T,qa);var X=(K.x-va.x)/S;const ta=(K.y-va.y)/ba;X=X*X+ta*ta;1>=X&&W.candidates.push(z.makeEdgeCandidate(P.getObjectId(da),
C(va),Math.sqrt(X),C(T),C(qa)))}}}}if("none"!==n.vertexMode)if(h=U?ia.length-e:ia.length,"all"===n.vertexMode)for(x=0;x<h;x+=e)N=v,N.coordsIndex=x,L=(K.x-N.x)/S,T=(K.y-N.y)/ba,L=L*L+T*T,1>=L&&W.candidates.push(z.makeVertexCandidate(P.getObjectId(da),C(N),Math.sqrt(L)));else if("ends"===n.vertexMode){h=[0];U||h.push(ia.length-e);for(const qa of h)h=v,h.coordsIndex=qa,x=(K.x-h.x)/S,N=(K.y-h.y)/ba,x=x*x+N*N,1>=x&&W.candidates.push(z.makeVertexCandidate(P.getObjectId(da),C(h),Math.sqrt(x)))}}W.candidates.sort((da,
ia)=>da.distance-ia.distance);return W}_getPointCreator(n,C,P){const e=null==P||f.equals(C,P)?Q=>Q:Q=>r.project(Q,C,P),{hasZ:K}=this;return"3d"===n?K?({x:Q,y:S,z:ba})=>e({x:Q,y:S,z:ba}):({x:Q,y:S})=>e({x:Q,y:S,z:0}):({x:Q,y:S})=>e({x:Q,y:S})}async createSummaryStatisticsResponse(n){const {field:C,valueExpression:P,normalizationField:e,normalizationType:K,normalizationTotal:Q,minValue:S,maxValue:ba,scale:W,timeZone:U}=n;var v=this.fieldsIndex.get(C);n=D.isDateField(v)||D.isDateOnlyField(v)||D.isTimestampOffsetField(v);
const H=await this._getDataValues({field:C,valueExpression:P,normalizationField:e,normalizationType:K,normalizationTotal:Q,scale:W,timeZone:U}),m=I.isNullCountSupported({normalizationType:K,normalizationField:e,minValue:S,maxValue:ba}),h={value:.5,fieldType:v?.type};v=D.isStringField(v)?I.calculateStringStatistics({values:H,supportsNullCount:m,percentileParams:h}):I.calculateStatistics({values:H,minValue:S,maxValue:ba,useSampleStdDev:!K,supportsNullCount:m,percentileParams:h});return I.processSummaryStatisticsResult(v,
n)}async createUniqueValuesResponse(n){const {field:C,valueExpression:P,domains:e,returnAllCodedValues:K,scale:Q,timeZone:S}=n;var ba=await this._getDataValues({field:C,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,valueExpression:P,scale:Q,timeZone:S},!1);ba=I.calculateUniqueValuesCount(ba);return I.createUVResult(ba,e,K,n.fieldDelimiter)}async createClassBreaksResponse(n){const {field:C,valueExpression:P,normalizationField:e,normalizationType:K,normalizationTotal:Q,classificationMethod:S,
standardDeviationInterval:ba,minValue:W,maxValue:U,numClasses:v,scale:H,timeZone:m}=n;n=await this._getDataValues({field:C,valueExpression:P,normalizationField:e,normalizationType:K,normalizationTotal:Q,scale:H,timeZone:m});n=I.calculateClassBreaks(n,{field:C,normalizationField:e,normalizationType:K,normalizationTotal:Q,classificationMethod:S,standardDeviationInterval:ba,minValue:W,maxValue:U,numClasses:v});return I.resolveCBResult(n,S)}async createHistogramResponse(n){const {field:C,valueExpression:P,
normalizationField:e,normalizationType:K,normalizationTotal:Q,classificationMethod:S,standardDeviationInterval:ba,minValue:W,maxValue:U,numBins:v,scale:H,timeZone:m}=n;n=await this._getDataValues({field:C,valueExpression:P,normalizationField:e,normalizationType:K,normalizationTotal:Q,scale:H,timeZone:m});return I.calculateHistogram(n,{field:C,normalizationField:e,normalizationType:K,normalizationTotal:Q,classificationMethod:S,standardDeviationInterval:ba,minValue:W,maxValue:U,numBins:v})}_sortFeatures(n,
C,P){if(1<n.length&&C?.length)for(const e of C.reverse()){C=e.split(" ");const K=C[0],Q=this.fieldsIndex.get(K);C=C[1]?"desc"===C[1].toLowerCase():!1;const S=I.getAttributeComparator(Q?.type,C);n.sort((ba,W)=>{ba=P(ba,K,Q);W=P(W,K,Q);return S(ba,W)})}}_createFeatureQueryResponse(n){const C=this.items,{geometryType:P,hasM:e,hasZ:K,objectIdField:Q,spatialReference:S}=this,{outFields:ba,outSR:W,quantizationParameters:U,resultRecordCount:v,resultOffset:H,returnZ:m,returnM:h}=n,x=null!=v?C.length>(H||
0)+v:!1,N=ba&&(ba.includes("*")?[...this.fieldsIndex.fields]:ba.map(L=>this.fieldsIndex.get(L)));return{exceededTransferLimit:x,features:this._createFeatures(n,C),fields:N,geometryType:P,hasM:e&&h,hasZ:K&&m,objectIdFieldName:Q,spatialReference:d.cleanFromGeometryEngine(W||S),transform:U&&B.toQuantizationTransform(U)||null}}_createFeatures(n,C){const P=new p(n,this.featureAdapter,this.fieldsIndex),{hasM:e,hasZ:K}=this,{orderByFields:Q,quantizationParameters:S,returnGeometry:ba,returnCentroid:W,maxAllowableOffset:U,
resultOffset:v,resultRecordCount:H,returnZ:m=!1,returnM:h=!1}=n,x=K&&m,N=e&&h;n=[];var L=0;const T=[...C];this._sortFeatures(T,Q,(qa,va,ta)=>P.getFieldValue(qa,va,ta));if(this.geometryType&&(ba||W)){var X=B.toQuantizationTransform(S)??void 0;C="esriGeometryPolygon"===this.geometryType||"esriGeometryPolyline"===this.geometryType;if(ba&&!W)for(var da of T){var ia=this.featureAdapter.getGeometry(da),na={attributes:P.getAttributes(da),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,ia,U,
X,x,N)};C&&ia&&!na.geometry&&(na.centroid=d.transformCentroid(this,this.featureAdapter.getCentroid(da,this),X));n[L++]=na}else if(!ba&&W)for(ia of T)n[L++]={attributes:P.getAttributes(ia),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(ia,this),X)};else for(na of T)n[L++]={attributes:P.getAttributes(na),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(na,this),X),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(na),U,X,
x,N)}}else for(X of T)(da=P.getAttributes(X))&&(n[L++]={attributes:da});L=v||0;null!=H&&(n=n.slice(L,Math.min(n.length,L+H)));return n}_createExceedsLimitQueryResponse(n){var C=!1;let P=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;C=Number.POSITIVE_INFINITY;for(const K of n.outStatistics??[])if("exceedslimit"===K.statisticType){P=null!=K.maxPointCount?K.maxPointCount:Number.POSITIVE_INFINITY;e=null!=K.maxRecordCount?K.maxRecordCount:Number.POSITIVE_INFINITY;C=null!=K.maxVertexCount?K.maxVertexCount:
Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)C=this.items.length>P;else if(this.items.length>e)C=!0;else{n=q(this.hasZ,this.hasM);const K=this.featureAdapter;C=this.items.reduce((Q,S)=>{S=K.getGeometry(S);return Q+(null!=S&&S.coords.length||0)},0)/n>C}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(C)}}]}}async _createStatisticsQueryResponse(n){var C=
{attributes:{}};const P=[],e=new Map,K=new Map,Q=new Map,S=new Map,ba=new p(n,this.featureAdapter,this.fieldsIndex);var W=n.outStatistics;const {groupByFieldsForStatistics:U,having:v,orderByFields:H,resultRecordCount:m}=n;n=U?.length;const h=!!n,x=h?U[0]:null,N=h&&!this.fieldsIndex.get(x);for(const ia of W??[]){const {outStatisticFieldName:na,statisticType:qa}=ia;W=ia;const va="exceedslimit"!==qa?ia.onStatisticField:void 0,ta="percentile_disc"===qa||"percentile_cont"===qa;var L="EnvelopeAggregate"===
qa||"CentroidAggregate"===qa||"ConvexHullAggregate"===qa;const wa=h&&1===n&&(va===x||N)&&"count"===qa;if(h){if(!Q.has(va)){var T=[];for(const Ea of U){var X=this._getAttributeValues(ba,Ea,e);T.push(X)}Q.set(va,this._calculateUniqueValues(T,L?!1:ba.returnDistinctValues))}T=Q.get(va);if(!T)continue;X=Object.keys(T);for(const Ea of X){const {count:Da,data:Pa,items:Sa,itemPositions:Ta}=T[Ea];X=Pa.join(",");if(!v||ba.validateItems(Sa,v)){const Oa=S.get(X)||{attributes:{}};if(L){Oa.aggregateGeometries||
(Oa.aggregateGeometries={});const {aggregateGeometries:E,outStatisticFieldName:Y}=await this._getAggregateGeometry(W,Sa);Oa.aggregateGeometries[Y]=E}else{var da=null;if(wa)da=Da;else{const E=this._getAttributeValues(ba,va,e);da=Ta.map(Y=>E[Y]);da=ta&&"statisticParameters"in W?this._getPercentileValue(W,da):this._getStatisticValue(W,da,null,ba.returnDistinctValues)}Oa.attributes[na]=da}let k=0;U.forEach((E,Y)=>Oa.attributes[this.fieldsIndex.get(E)?E:`EXPR_${++k}`]=Pa[Y]);S.set(X,Oa)}}}else if(L){C.aggregateGeometries||
(C.aggregateGeometries={});const {aggregateGeometries:Ea,outStatisticFieldName:Da}=await this._getAggregateGeometry(W,this.items);C.aggregateGeometries[Da]=Ea}else L=this._getAttributeValues(ba,va,e),C.attributes[na]=ta&&"statisticParameters"in W?this._getPercentileValue(W,L):this._getStatisticValue(W,L,K,ba.returnDistinctValues);W="min"!==qa&&"max"!==qa||!D.isStringField(this.fieldsIndex.get(va))&&!this._isAnyDateField(va)?null:this.fieldsIndex.get(va)?.type;P.push({name:na,alias:na,type:W||"esriFieldTypeDouble"})}C=
h?Array.from(S.values()):[C];this._sortFeatures(C,H,(ia,na)=>ia.attributes[na]);m&&(C.length=Math.min(m,C.length));return{fields:P,features:C}}_isAnyDateField(n){n=this.fieldsIndex.get(n);return D.isDateField(n)||D.isDateOnlyField(n)||D.isTimestampOffsetField(n)||D.isTimeOnlyField(n)}async _getAggregateGeometry(n,C){const {convexHull:P,union:e}=await new Promise((m,h)=>c(["../../../geometry/geometryEngineJSON"],m,h)),{statisticType:K,outStatisticFieldName:Q}=n,{featureAdapter:S,spatialReference:ba,
geometryType:W,hasZ:U,hasM:v}=this;C=C.map(m=>d.getGeometry(W,U,v,S.getGeometry(m)));const H=P(ba,C,!0)[0];n={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===K?(C=H?F.getPolygonExtent(H):F.getGeometryExtent(e(ba,C)),n.aggregateGeometries={...C,spatialReference:ba},n.outStatisticFieldName=Q||"extent"):"CentroidAggregate"===K?(C=H?w.polygonCentroid(H):w.extentCentroid(F.getGeometryExtent(e(ba,C))),n.aggregateGeometries={x:C[0],y:C[1],spatialReference:ba},n.outStatisticFieldName=
Q||"centroid"):"ConvexHullAggregate"===K&&(n.aggregateGeometries=H,n.outStatisticFieldName=Q||"convexHull");return n}_getStatisticValue(n,C,P,e){const {onStatisticField:K,statisticType:Q}=n;n=null;n=P?.has(K)?P.get(K):D.isStringField(this.fieldsIndex.get(K))||this._isAnyDateField(K)?I.calculateStringStatistics({values:C,returnDistinct:e}):I.calculateStatistics({values:e?[...(new Set(C))]:C,minValue:null,maxValue:null,useSampleStdDev:!0});P&&P.set(K,n);return n["var"===Q?"variance":Q]}_getPercentileValue(n,
C){const {onStatisticField:P,statisticParameters:e,statisticType:K}=n,{value:Q,orderBy:S}=e;n=this.fieldsIndex.get(P);return I.calculatePercentile(C,{value:Q,orderBy:S,fieldType:n?.type,isDiscrete:"percentile_disc"===K})}_getAttributeValues(n,C,P){if(P.has(C))return P.get(C);const e=this.fieldsIndex.get(C),K=this.items.map(Q=>n.getFieldValue(Q,C,e));P.set(C,K);return K}_calculateUniqueValues(n,C){const P={},e=this.items,K=e.length;for(let Q=0;Q<K;Q++){const S=e[Q],ba=[];for(const U of n)ba.push(U[Q]);
const W=ba.join(",");null==P[W]?P[W]={count:1,data:ba,items:[S],itemPositions:[Q]}:(C||P[W].count++,P[W].items.push(S),P[W].itemPositions.push(Q))}return P}async _getDataValues(n,C=!0){const P=new p(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:e,scale:K,timeZone:Q}=n;return e?P.getExpressionValues(this.items,e,{viewingMode:"map",scale:K,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},Q):P.getDataValues(this.items,
y.clone(n),C)}}class u{constructor(n,C){this.coords=n;this.coordsIndex=C}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}g.QueryEngineResult=a;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(c,g){function y(m){if("lowerLeft"===m.originPosition&&4===m.scale.length&&4===m.translate.length)return m;const {originPosition:h,
scale:x,translate:N}=m;m=x[1]??1;return{originPosition:"lowerLeft",scale:[x[0]??1,"lowerLeft"===h?m:-m,x[2]??1,x[3]??1],translate:[N[0]??0,N[1]??0,N[2]??0,N[3]??0]}}function w({scale:m,translate:h},x){return Math.round((x-h[0])/m[0])}function F({scale:m,translate:h},x){return Math.round((x-h[1])/m[1])}function B({scale:m,translate:h},x){return Math.round(((x??0)-h[2])/m[2])}function f({scale:m,translate:h},x){return x?Math.round((x-h[3])/m[3]):0}function p(m,h){return m&&h?ba:m&&!h?Q:!m&&h?S:K}function d({scale:m,
translate:h},x){return x*m[0]+h[0]}function r({scale:m,translate:h},x){return x*m[1]+h[1]}function z({scale:m,translate:h},x){return(x??0)*m[2]+h[2]}function D({scale:m,translate:h},x){return x?x*m[3]+h[3]:0}function I(m,h){return m&&h?H:m&&!h?U:!m&&h?v:W}function t(m,h,x){const N=Array(x.length);for(let L=0;L<x.length;L++)N[L]=h(m,x[L]);return N}function q(m,h,x){let [N,L]=x[0],T=Math.min(N,h[0]),X=Math.min(L,h[1]),da=Math.max(N,h[2]);h=Math.max(L,h[3]);for(let ia=1;ia<x.length;ia++){const [na,qa]=
x[ia];N+=na;L+=qa;0>na&&(T=Math.min(T,N));0<na&&(da=Math.max(da,N));0>qa?X=Math.min(X,L):0<qa&&(h=Math.max(h,L))}m[0]=T;m[1]=X;m[2]=da;m[3]=h;return m}function a(m,h){if(!h.length)return null;m[0]=m[1]=Number.POSITIVE_INFINITY;m[2]=m[3]=Number.NEGATIVE_INFINITY;for(let x=0;x<h.length;x++)q(m,m,h[x]);return m}function u(m,h,x){m=y(m);h.xmin=w(m,x.xmin);h.ymin=F(m,x.ymin);h.xmax=w(m,x.xmax);h.ymax=F(m,x.ymax);x.hasZ&&(h.zmin=B(m,x.zmin),h.zmax=B(m,x.zmax));x.hasM&&(h.mmin=f(m,x.mmin),h.mmax=f(m,x.mmax));
h.hasZ=x.hasZ??!1;h.hasM=x.hasM??!1;return h}function n(m,h,x){m=y(m);h.points=p(x.hasZ,x.hasM)(m,x.points)??[];h.hasZ=x.hasZ??!1;h.hasM=x.hasM??!1;return h}function C(m,h,x){m=y(m);h.x=w(m,x.x);h.y=F(m,x.y);null!=x.z&&(h.z=B(m,x.z));null!=x.m&&(h.m=f(m,x.m));return h}function P(m,h,x){{m=y(m);var N=x.rings;const L=[],T=p(x.hasZ,x.hasM);for(let X=0;X<N.length;X++){const da=T(m,N[X]);da&&3<=da.length&&L.push(da)}m=L.length?L:null}if(!m)return null;h.rings=m;h.hasZ=x.hasZ??!1;h.hasM=x.hasM??!1;return h}
function e(m,h,x){{m=y(m);var N=x.paths;const L=[],T=p(x.hasZ,x.hasM);for(let X=0;X<N.length;X++){const da=T(m,N[X]);da&&2<=da.length&&L.push(da)}m=L.length?L:null}if(!m)return null;h.paths=m;h.hasZ=x.hasZ??!1;h.hasM=x.hasM??!1;return h}const K=(m,h)=>{const x=[];if(!h.length)return null;var N=h[0];let L=w(m,N[0]);N=F(m,N[1]);x.push([L,N]);for(let T=1;T<h.length;T++){const [X,da]=h[T],ia=w(m,X),na=F(m,da);ia===L&&na===N||x.push([ia-L,na-N]);L=ia;N=na}return x},Q=(m,h)=>{const x=[];if(!h.length)return null;
var N=h[0];let L=w(m,N[0]),T=F(m,N[1]);N=B(m,N[2]);x.push([L,T,N]);for(let X=1;X<h.length;X++){const [da,ia,na]=h[X],qa=w(m,da),va=F(m,ia),ta=B(m,na);qa===L&&va===T&&ta===N||x.push([qa-L,va-T,ta]);L=qa;T=va;N=ta}return x},S=(m,h)=>{const x=[];if(!h.length)return null;var N=h[0];let L=w(m,N[0]),T=F(m,N[1]);N=f(m,N[2]);x.push([L,T,N]);for(let X=1;X<h.length;X++){const [da,ia,na]=h[X],qa=w(m,da),va=F(m,ia),ta=f(m,na);qa===L&&va===T&&ta===N||x.push([qa-L,va-T,ta]);L=qa;T=va;N=ta}return x},ba=(m,h)=>{const x=
[];if(!h.length)return null;var N=h[0];let L=w(m,N[0]),T=F(m,N[1]),X=B(m,N[2]);N=f(m,N[3]);x.push([L,T,X,N]);for(let da=1;da<h.length;da++){const [ia,na,qa,va]=h[da],ta=w(m,ia),wa=F(m,na),Ea=B(m,qa),Da=f(m,va);ta===L&&wa===T&&Ea===X&&Da===N||x.push([ta-L,wa-T,Ea,Da]);L=ta;T=wa;X=Ea;N=Da}return x},W=(m,h)=>{const x=Array(h.length);if(!h.length)return x;var N=h[0];let L=d(m,N[0]);N=r(m,N[1]);x[0]=[L,N];const {scale:T,originPosition:X}=m;m=T[0];const da="lowerLeft"===X?T[1]:-T[1];for(let ia=1;ia<h.length;ia++){const [na,
qa]=h[ia];L+=m*na;N+=da*qa;x[ia]=[L,N]}return x},U=(m,h)=>{const x=Array(h.length);if(!h.length)return x;var N=h[0];let L=d(m,N[0]),T=r(m,N[1]);x[0]=[L,T,z(m,N[2])];const {scale:X,originPosition:da}=m;N=X[0];const ia="lowerLeft"===da?X[1]:-X[1];for(let na=1;na<h.length;na++){const [qa,va,ta]=h[na];L+=N*qa;T+=ia*va;x[na]=[L,T,z(m,ta)]}return x},v=(m,h)=>{const x=Array(h.length);if(!h.length)return x;var N=h[0];let L=d(m,N[0]),T=r(m,N[1]);x[0]=[L,T,D(m,N[2])];const {scale:X,originPosition:da}=m;N=X[0];
const ia="lowerLeft"===da?X[1]:-X[1];for(let na=1;na<h.length;na++){const [qa,va,ta]=h[na];L+=N*qa;T+=ia*va;x[na]=[L,T,D(m,ta)]}return x},H=(m,h)=>{const x=Array(h.length);if(!h.length)return x;var N=h[0];let L=d(m,N[0]),T=r(m,N[1]);x[0]=[L,T,z(m,N[2]),D(m,N[3])];const {scale:X,originPosition:da}=m;N=X[0];const ia="lowerLeft"===da?X[1]:-X[1];for(let na=1;na<h.length;na++){const [qa,va,ta,wa]=h[na];L+=N*qa;T+=ia*va;x[na]=[L,T,z(m,ta),D(m,wa)]}return x};c.getQuantizedBoundsCoordsArray=q;c.getQuantizedBoundsCoordsArrayArray=
a;c.getQuantizedBoundsPaths=function(m){return a([0,0,0,0],m)};c.getQuantizedBoundsPoints=function(m){const h=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return q(h,h,m)};c.getQuantizedBoundsRings=function(m){return a([0,0,0,0],m)};c.normalizeTransform=y;c.quantizeBounds=function(m,h,x){m=y(m);h[0]=w(m,x[0]);h[3]=F(m,x[1]);h[2]=w(m,x[2]);h[1]=F(m,x[3]);return h};c.quantizeCoordsArrayXY=K;c.quantizeCoordsArrayXYM=S;c.quantizeCoordsArrayXYZ=
Q;c.quantizeCoordsArrayXYZM=ba;c.quantizeExtent=u;c.quantizeGeometry=function(m,h){return m&&h?g.isPoint(h)?C(m,{},h):g.isPolyline(h)?e(m,{},h):g.isPolygon(h)?P(m,{},h):g.isMultipoint(h)?n(m,{},h):g.isExtent(h)?u(m,{},h):null:null};c.quantizeM=f;c.quantizeMultipoint=n;c.quantizePoint=C;c.quantizePolygon=P;c.quantizePolyline=e;c.quantizeX=w;c.quantizeY=F;c.quantizeZ=B;c.toQuantizationTransform=function(m){return m?{originPosition:"upper-left"===m.originPosition?"upperLeft":"lower-left"===m.originPosition?
"lowerLeft":m.originPosition,scale:m.tolerance?[m.tolerance,m.tolerance,1,1]:[1,1,1,1],translate:null!=m.extent?[m.extent.xmin,m.extent.ymax,m.extent.zmin??0,m.extent.mmin??0]:[0,0,0,0]}:null};c.unquantizeBounds=function(m,h,x){m=y(m);return x?(h[0]=d(m,x[0]),h[1]=r(m,x[3]),h[2]=d(m,x[2]),h[3]=r(m,x[1]),h):[d(m,h[0]),r(m,h[3]),d(m,h[2]),r(m,h[1])]};c.unquantizeCoordsArrayArray=t;c.unquantizeCoordsArrayXY=W;c.unquantizeCoordsArrayXYM=v;c.unquantizeCoordsArrayXYZ=U;c.unquantizeCoordsArrayXYZM=H;c.unquantizeExtent=
function(m,h,x,N=x.hasZ??!1,L=x.hasM??!1){m=y(m);h.xmin=d(m,x.xmin);h.xmax=d(m,x.xmax);h.ymin=r(m,x.ymin);h.ymax=r(m,x.ymax);N&&(h.zmin=z(m,x.zmin),h.zmax=z(m,x.zmax));L&&(h.mmin=D(m,x.mmin),h.mmax=D(m,x.mmax));h.hasZ=N;h.hasM=L;return h};c.unquantizeM=D;c.unquantizeMultipoint=function(m,h,x,N=x?.hasZ??!1,L=x?.hasM??!1){null!=x&&(m=y(m),h.points=I(N,L)(m,x.points),h.hasZ=N,h.hasM=L);return h};c.unquantizePoint=function(m,h,x,N=null!=x?.z,L=null!=x?.m){if(null==x)return h;m=y(m);h.x=d(m,x.x);h.y=r(m,
x.y);N&&(h.z=z(m,x.z));L&&(h.m=D(m,x.m));return h};c.unquantizePolygon=function(m,h,x,N=x?.hasZ??!1,L=x?.hasM??!1){null!=x&&(m=y(m),h.rings=t(m,I(N,L),x.rings),h.hasZ=N,h.hasM=L);return h};c.unquantizePolyline=function(m,h,x,N=x?.hasZ??!1,L=x?.hasM??!1){null!=x&&(m=y(m),h.paths=t(m,I(N,L),x.paths),h.hasZ=N,h.hasM=L);return h};c.unquantizeX=d;c.unquantizeY=r;c.unquantizeZ=z;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(c,g,y,w,F,B){class f{constructor(p,d,r){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=p.returnDistinctValues??!1;this.fieldsIndex=r;this.featureAdapter=d;if((d=p.outFields)&&!d.includes("*")){this.outFields=d;p=0;for(const D of d){var z=c.getExpressionFromFieldName(D);z=(d=this.fieldsIndex.get(z))?null:c.getWhereClause(z,r);d=d?d.name:c.getAliasFromFieldName(D)||`FIELD_EXP_${p++}`;this._fieldDataCache.set(D,{alias:d,clause:z})}}}countDistinctValues(p){if(!this.returnDistinctValues)return p.length;
p.forEach(d=>this.getAttributes(d));return this._returnDistinctMap.size}getAttributes(p){p=this._processAttributesForOutFields(p);return this._processAttributesForDistinctValues(p)}getFieldValue(p,d,r){const z=r?r.name:d;let D=null;this._fieldDataCache.has(z)?D=this._fieldDataCache.get(z)?.clause:r||(D=c.getWhereClause(d,this.fieldsIndex),this._fieldDataCache.set(z,{alias:z,clause:D}));return r?this.featureAdapter.getAttribute(p,z):D?.calculateValue(p,this.featureAdapter)}getDataValues(p,d,r=!0){const z=
d.normalizationType,D=d.normalizationTotal,I=this.fieldsIndex.get(d.field),t=y.isDateOnlyField(I)||y.isTimestampOffsetField(I),q=y.isTimeOnlyField(I);return p.map(a=>{let u=d.field&&this.getFieldValue(a,d.field,this.fieldsIndex.get(d.field));d.field2?(u=`${F.processNullValue(u)}${d.fieldDelimiter}${F.processNullValue(this.getFieldValue(a,d.field2,this.fieldsIndex.get(d.field2)))}`,d.field3&&(u=`${u}${d.fieldDelimiter}${F.processNullValue(this.getFieldValue(a,d.field3,this.fieldsIndex.get(d.field3)))}`)):
"string"===typeof u&&r&&(t?u=u?(new Date(u)).getTime():null:q&&(u=u?w.timeOnlyToMilliseconds(u):null));z&&Number.isFinite(u)&&(a="field"===z&&d.normalizationField?this.getFieldValue(a,d.normalizationField,this.fieldsIndex.get(d.normalizationField)):null,u=F.getNormalizedValue(u,z,a,D));return u})}async getExpressionValues(p,d,r,z,D){const {arcadeUtils:I}=await B.loadArcade(),t=I.hasGeometryOperations(d);t&&await I.enableGeometryOperations();const q=I.createFunction(d),a=I.getViewInfo(r),u={fields:this.fieldsIndex.fields};
return p.map(n=>{n={attributes:this.featureAdapter.getAttributes(n),layer:u,geometry:t?{...g.getGeometry(z.geometryType,z.hasZ,z.hasM,this.featureAdapter.getGeometry(n)),spatialReference:r?.spatialReference}:null};n=I.createExecContext(n,a,D);return I.executeFunction(q,n)})}validateItem(p,d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:c.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d)?.clause?.testFeature(p,this.featureAdapter)??!1}validateItems(p,
d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:c.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d)?.clause?.testSet(p,this.featureAdapter)??!1}_processAttributesForOutFields(p){const d=this.outFields;if(!d?.length)return this.featureAdapter.getAttributes(p);const r={};for(const z of d){const {alias:D,clause:I}=this._fieldDataCache.get(z);r[D]=I?I.calculateValue(p,this.featureAdapter):this.featureAdapter.getAttribute(p,D)}return r}_processAttributesForDistinctValues(p){if(null==
p||!this.returnDistinctValues)return p;var d=this.outFields,r=[];if(d)for(const D of d){var {alias:z}=this._fieldDataCache.get(D);r.push(p[z])}else for(z in p)r.push(p[z]);d=`${(d||["*"]).join(",")}=${r.join(",")}`;r=this._returnDistinctMap.get(d)||0;this._returnDistinctMap.set(d,++r);return 1<r?null:p}}return f})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(c,g,y,w,F,B,f,p,d,r,z,D,I,t){function q(e){e=P.exec(e);if(!e)return null;const {hh:K,mm:Q,ss:S,ms:ba}=e.groups;return Number(K)*F.millisecondsPerTimeUnit.hours+Number(Q)*F.millisecondsPerTimeUnit.minutes+Number(S)*F.millisecondsPerTimeUnit.seconds+Number(ba||0)}function a(e,K){e=null!=e?e:"";null!=K&&K&&(e=e?"("+e+") AND ("+K+")":K);return e}function u(e){const K=e.layer;return e.fields.filter(Q=>!K.getField(Q))}function n(e){const K=e.layer;return e.fields.filter(Q=>{Q=K.getFieldUsageInfo(Q);
return!Q||!Q.supportsStatistics})}let C=null;const P=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;c.calculateHeatmapStats=function(e,K=18,Q,S,ba){const W=new Float64Array(S*ba);K=Math.round(w.pt2px(K));let U=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY;Q=r.createValueFunction(Q);for(const {geometry:h,attributes:x}of e){const {x:N,y:L}=h;e=Math.max(0,N-K);var H=Math.max(0,L-K);const T=Math.min(ba,L+K),X=Math.min(S,N+K),da=+Q(x);for(;H<T;H++)for(let ia=
e;ia<X;ia++){var m=H*S+ia;const na=r.evaluateDensityKernel(ia-N,H-L,K)*da;m=W[m]+=na;U=Math.min(U,m);v=Math.max(v,m)}}return{min:U,max:v}};c.getDataValues=async function(e,K,Q=!0){if(!K)return[];const {field:S,field2:ba,field3:W,fieldDelimiter:U,fieldInfos:v,timeZone:H}=e;var m=S&&v?.find(va=>va.name.toLowerCase()===S.toLowerCase());const h=m?d.isTimeOnlyField(m):!1,x=m?z.isAnyDateField(m):!1,N=e.valueExpression,L=e.normalizationType,T=e.normalizationField,X=e.normalizationTotal,da=[];m=e.viewInfoParams;
let ia=null,na=null;if(N){if(!C){const {arcadeUtils:va}=await I.loadArcade();C=va}C.hasGeometryOperations(N)&&await C.enableGeometryOperations();ia=C.createFunction(N);na=m?C.getViewInfo({viewingMode:m.viewingMode,scale:m.scale,spatialReference:new B(m.spatialReference)}):null}e=e.fieldInfos;const qa=K[0]&&"declaredClass"in K[0]&&"esri.Graphic"===K[0].declaredClass||!e?null:{fields:e};K.forEach(va=>{var ta=va.attributes;if(N){var wa=C.createExecContext(qa?{...va,layer:qa}:va,na,H);wa=C.executeFunction(ia,
wa)}else ta&&(wa=ta[S],ba?(wa=`${D.processNullValue(wa)}${U}${D.processNullValue(ta[ba])}`,W&&(wa=`${wa}${U}${D.processNullValue(ta[W])}`)):"string"===typeof wa&&Q&&(x?wa=wa?(new Date(wa)).getTime():null:h&&(wa=wa?q(wa):null)));L&&"number"===typeof wa&&isFinite(wa)&&(ta=ta&&parseFloat(ta[T]),wa=D.getNormalizedValue(wa,L,ta,X));da.push(wa)});return da};c.getRangeExpr=function(e,K,Q){K=null!=K?e+" \x3e\x3d "+K:"";e=null!=Q?e+" \x3c\x3d "+Q:"";Q="";return(Q=K&&e?a(K,e):K||e)?"("+Q+")":""};c.getSQLFilterForNormalization=
function(e){const K=e.field,Q=e.normalizationType;e=e.normalizationField;let S;if("field"===Q)S="(NOT "+e+" \x3d 0)";else if("log"===Q||"natural-log"===Q||"square-root"===Q)S=`(${K} > 0)`;return S};c.getSumOfAttributesExpr=function(e,K,Q){const S=[],ba=[],W=[],U=[],v=[];e.forEach((h,x)=>{const N=h.field?"field":"expression",L=h.field||h.valueExpression;h.field?(v.push(L),ba.push(`var ${N}${x} = Number($feature["${L}"]);`)):(S.push(`function getValueForExpr${x}() {\n  ${L} \n}`),ba.push(`var ${N}${x} = Number(getValueForExpr${x}());`));
Q||W.push(`${N}${x} = IIf(${N}${x} < 0, 0, ${N}${x});`);U.push(`${N}${x}`)});e="return sum;";const H=S.length?null:v.reduce((h,x)=>`${h} + ${x}`);let m=null;K||Q?K?Q||(e="return IIf(sum \x3e\x3d 0, sum, null);",H&&(m=`(( ${H} ) >= 0)`)):(e="return IIf(sum !\x3d 0, sum, null);",H&&(m=`(( ${H} ) <> 0)`)):(e="return IIf(sum \x3e 0, sum, null);",H&&(m=`(( ${H} ) > 0)`));return{valueExpression:[S.length?S.join("\n"):"",ba.join("\n"),W.join("\n"),`var sum = ${U.join(" + ")};`,e].filter(Boolean).join("\n\n"),
sqlExpression:H,sqlWhere:m}};c.mergeWhereClauses=a;c.quantizeFeatures=function(e,K,Q,S){const ba=p.isWrappable(Q)?p.getInfo(Q):null,W=ba?Math.round((ba.valid[1]-ba.valid[0])/K.scale[0]):null;return e.map(U=>{const v=new t(U.geometry);f.quantizePoint(K,v,v);if(ba){var H=W??0,m=S[0];0>v.x?v.x+=H:v.x>m&&(v.x-=H)}U.geometry=v;return U})};c.timeOnlyToMilliseconds=q;c.verifyBasicFieldValidity=function(e,K,Q){const S=u({layer:e,fields:K});if(S.length)return new y(Q,"Unknown fields: "+S.join(", ")+". You can only use fields defined in the layer schema");
e=n({layer:e,fields:K});if(e.length)return new y(Q,"Unsupported fields: "+e.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};c.verifyFieldType=function(e,K,Q,S){let ba;K?K.name!==e.objectIdField&&S.includes(K.type)||(ba=new y(Q,"'field' should be one of these types: "+S.join(","))):ba=new y(Q,"'field' is not defined in the layer schema");return ba};c.verifyFilterValidty=function(e,K){if(e&&"intersects"!==e.spatialRelationship)return new y(K,
"Only 'intersects' spatialRelationship is supported for featureFilter")};c.verifyNumericField=function(e,K,Q){let S;K?K.name!==e.objectIdField&&d.isNumericField(K)||(S=new y(Q,"'field' should be one of these numeric types: "+d.numericTypes.join(","))):S=new y(Q,"'field' is not defined in the layer schema");return S};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(c){function g(w){return w?72*w/96:0}const y=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;
c.castRenderScreenPointArray=function(w){return w};c.castRenderScreenPointArray3=function(w){return w};c.castScreenPointArray=function(w){return w};c.createRenderScreenPoint=function(w=0,F=0){return{x:w,y:F}};c.createRenderScreenPointArray=function(w=0,F=0){return[w,F]};c.createRenderScreenPointArray3=function(w=0,F=0,B=0){return[w,F,B]};c.createScreenPoint=function(w=0,F=0){return{x:w,y:F}};c.createScreenPointArray=function(w=0,F=0){return[w,F]};c.pt2px=function(w){return w?w/72*96:0};c.px2pt=g;
c.screenPointArrayToObject=function(w,F){return F?(F.x=w[0],F.y=w[1],F):{x:w[0],y:w[1]}};c.screenPointObjectToArray=function(w,F){return F?(F[0]=w.x,F[1]=w.y,2<F.length&&(F[2]=0),F):[w.x,w.y]};c.toPt=function(w){if("string"===typeof w){var F=w.match(y);if(F){var B=Number(F[1]);F=F[3]&&F[3].toLowerCase();w="-"===w.charAt(0);B="px"===F?g(B):B;return w?-B:B}console.warn("screenUtils.toPt: input not recognized!");return null}return w};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports",
"../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(c,g,y,w){function F(p,d,r){return 0===p?0:p*f[d]/f[r]}function B(p){switch(p){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const f={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,
centuries:31536E8};c.convertTime=F;c.isValidDate=function(p){return p instanceof Date&&!isNaN(p.getTime())};c.makeUTCTime=function(p,d,r="milliseconds"){d=new Date(F(d,r,"milliseconds"));d.setUTCFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate());return d};c.mergeTimeExtents=function(p,d){return p&&d?p.intersection(d):p||d};c.millisecondsPerTimeUnit=f;c.offsetDate=function(p,d,r,z=y.system){z=new w.IANAZone(g.resolveTimeZone(z));p=w.DateTime.fromJSDate(p,{zone:z});z="decades"===r||"centuries"===
r?"year":B(r);"decades"===r&&(d*=10);"centuries"===r&&(d*=100);return p.plus({[z]:d}).toJSDate()};c.offsetDateUTC=function(p,d,r="milliseconds"){p=p.getTime();d=F(d,r,"milliseconds");return new Date(p+d)};c.resetUTCDate=function(p,d){p=new Date(p.getTime());p.setUTCFullYear(d.getFullYear(),d.getMonth(),d.getDate());return p};c.timeSinceUTCMidnight=function(p,d="milliseconds"){const r=F(p.getUTCHours(),"hours","milliseconds"),z=F(p.getUTCMinutes(),"minutes","milliseconds"),D=F(p.getUTCSeconds(),"seconds",
"milliseconds");p=p.getUTCMilliseconds();return F(r+z+D+p,"milliseconds",d)};c.truncateDate=function(p,d,r=y.system){r=new w.IANAZone(g.resolveTimeZone(r));p=w.DateTime.fromJSDate(p,{zone:r});if("decades"===d||"centuries"===d)return p=p.startOf("year"),{year:r}=p,p.set({year:r-r%("decades"===d?10:100)}).toJSDate();d=B(d);return p.startOf(d).toJSDate()};c.truncateLocalTime=function(p){const d=new Date(0);d.setHours(0);d.setMinutes(0);d.setSeconds(0);d.setMilliseconds(0);d.setFullYear(p.getUTCFullYear(),
p.getUTCMonth(),p.getUTCDate());return d};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(c,g,y,w,F){function B(f,p,d,r){let {color:z,ratio:D}=p,{color:I,ratio:t}=d;t===D&&(1===t?D-=1E-6:t+=1E-6);p=g.clamp((r-D)/(t-D),0,1);w.lerp(f,z.toArray(),I.toArray(),p)}c.createValueFunction=function(f){return"function"===
typeof f?f:f?p=>+p[f]:()=>1};c.evaluateDensityKernel=function(f,p,d){f=Math.sqrt(f**2+p**2)/d;return 1<f?0:3/(Math.PI*d**2)*(1-f**2)**2};c.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(f){return y.px2pt(2.4*f)};c.generateGradient=function(f){const p=new Uint8ClampedArray(2048);f=f.filter(({ratio:I})=>0<=I&&1>=I).sort((I,t)=>I.ratio-t.ratio).map(({color:I,ratio:t})=>({color:I,ratio:Math.max(t,.001)}));if(1>f.length)return p;let d=f[0],r=f[0],z=1;const D=F.create();for(let I=0;512>I;I++){const t=
(I+.5)/512;for(;t>r.ratio&&z<f.length;)d=r,r=f[z++];B(D,d,r,t);p.set(D,4*I)}return p};c.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(f){return y.pt2px(f)/2.4};c.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),function(c,g,y,w,F,B){function f(t){return String(t).padStart(2,
"0")}function p(t,q,a){if("date"===q||"number"===q){"number"===q&&(t=new Date(t));q=a?t.getFullYear():t.getUTCFullYear();const u=f((a?t.getMonth():t.getUTCMonth())+1),n=f(a?t.getDate():t.getUTCDate()),C=f(a?t.getHours():t.getUTCHours()),P=f(a?t.getMinutes():t.getUTCMinutes());t=f(a?t.getSeconds():t.getUTCSeconds());t=`TIMESTAMP'${q}-${u}-${n} ${C}:${P}:${t}'`}return t}function d(t,q){if(q instanceof Date)return"date";if("number"===typeof q)return"number";if("string"===typeof q&&(t=t.getField(q),"\x3cnow\x3e"!==
q.toLowerCase()&&y.isDateField(t)))return"field"}const r={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},z={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},D=new Set(["integer","small-integer"]);let I=null;c.castIntegerFieldToFloat=function(t){return`cast(${t} as float)`};c.dateTypes=
["date","date-only","timestamp-offset"];c.defaultBasemapGroups=r;c.fieldDelimiter=",";c.formatAnyDate=function(t,q){const {format:a,timeZoneOptions:u,fieldType:n}=q??{};let C;u&&({timeZone:P,timeZoneName:C}=B.getTimeZoneFormattingOptions(u.layerTimeZone,u.datesInUnknownTimezone,u.viewTimeZone,g.convertDateFormatToIntlOptions(a||"short-date-short-time"),n));if("string"===typeof t&&isNaN(Date.parse("time-only"===n?`1970-01-01T${t}Z`:t)))return t;switch(n){case "date-only":var P=g.convertDateFormatToIntlOptions(a||
"short-date");return"string"===typeof t?g.formatDateOnly(t,{...P}):g.formatDate(t,{...P,timeZone:B.utc});case "time-only":return P=g.convertDateFormatToIntlOptions(a||"short-time"),"string"===typeof t?g.formatTimeOnly(t,P):g.formatDate(t,{...P,timeZone:B.utc});case "timestamp-offset":if(!P&&"string"===typeof t&&(new Date(t)).toISOString()!==t)return t;P=(q=a||u?g.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0)?{...q,timeZone:P,timeZoneName:C}:void 0;return"string"===typeof t?g.formatTimestamp(t,
P):g.formatDate(t,P);default:return q=a||u?g.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0,g.formatDate("string"===typeof t?new Date(t):t,q?{...q,timeZone:P,timeZoneName:C}:void 0)}};c.getBasemapGroup=function(t,q=r){for(const a in q)if(q[a].includes(t))return a};c.getBasemapId=function(t,q,a=!0){let u=null;t&&("string"===typeof t?q.includes(t)&&(u=t):u=F.getWellKnownBasemapId(t));return a?u||"gray":u};c.getDateDiffSQL=function(t,q,a,u){const {hasQueryEngine:n}=t;a=p(a,d(t,a),
n);t=p(q,d(t,q),n);t=`(${a} - ${t})`;u=z[u];q="/";1>u&&(u=1/u,q="*");return{sqlExpression:1===u?t:`(${t} ${q} ${u})`,sqlWhere:null}};c.getDateType=d;c.getFieldsList=async function(t){const {field:q,field2:a,field3:u,normalizationField:n,valueExpression:C}=t;t=[];C&&(I||({arcadeUtils:t}=await w.loadArcade(),I=t),t=I.extractFieldNames(C));q&&t.push(q);a&&t.push(a);u&&t.push(u);n&&t.push(n);return t};c.getNormalizationType=function(t){let q=t.normalizationType;q||(t.normalizationField?q="field":null!=
t.normalizationTotal&&(q="percent-of-total"));return q??void 0};c.isAnyDateField=function(t){return y.isDateField(t)||y.isDateOnlyField(t)||y.isTimestampOffsetField(t)};c.isIntegerField=function(t,q){t=q&&t.getField(q);return!!t&&D.has(t.type)};c.unitValueInDays=z;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(c,g,y,w,F,B,f,p,d,r){function z(H,m){let h;if("string"===typeof H){const x=H in r.esriBasemapDefinitions,N=!x&&H.includes("/");if(!x&&!N)return m=Object.entries(r.esriBasemapDefinitions).filter(([,L])=>y.apiKey&&!L.classic||!y.apiKey&&(L.classic||L.is3d)).map(([L])=>`"${L}"`).sort().join(", "),F.getLogger("esri.support.basemapUtils").warn(`Unable to find basemap definition for: ${H}. Try one of these: ${m}`),null;m&&(h=m[H]);h||(h=x?g.fromId(H):new g({style:{id:H}}),m&&(m[H]=h))}else h=p.ensureType(g,
H);h?.destroyed&&(F.getLogger("esri.support.basemapUtils").warn("The provided basemap is already destroyed",{basemap:h}),h=null);return h}function D(H){if(U)return U(H);let m=null;H=a(H);const h=!H?.baseLayers.length;for(const N in r.esriBasemapDefinitions){var x=P(r.esriBasemapDefinitions[N]);x=K(H,x,{mustMatchReferences:h});if("equal"===x){m=N;break}"base-layers-equal"===x&&(m=N)}return m}function I(H,m){const h=new w;H.forEach(x=>{const N=m.find(L=>"scene"!==L.type&&S(n(x),n(L)))||x;h.includes(N)?
h.push(x):h.push(N)});return h}function t(H){if(q(H.url))return!0;if("vector-tile"===H.type)for(const m in H.sourceNameToSource)if(q(H.sourceNameToSource[m]?.sourceUrl))return!0;return!1}function q(H){if(!H)return!1;H=new f.Url(f.makeAbsolute(H));return!!H.authority&&v.test(H.authority)}function a(H){return H?!H.loaded&&H.resourceInfo?P(H.resourceInfo.data):{baseLayers:u(H.baseLayers),referenceLayers:u(H.referenceLayers)}:null}function u(H){return(w.isCollection(H)?H.toArray():H).map(n)}function n(H){return{type:H.type,
effect:"effect"in H?H.effect:void 0,url:ba("urlTemplate"in H&&H.urlTemplate||H.url||"styleUrl"in H&&H.styleUrl||""),minScale:"minScale"in H&&null!=H.minScale?H.minScale:0,maxScale:"maxScale"in H&&null!=H.maxScale?H.maxScale:0,opacity:null!=H.opacity?H.opacity:1,visible:null!=H.visible?!!H.visible:!0,sublayers:"map-image"!==H.type&&"wms"!==H.type||null==H.sublayers?void 0:H.sublayers?.map(m=>({id:m.id,visible:m.visible})),activeLayerId:"wmts"===H.type?H.activeLayer?.id:void 0}}function C(H){return H.isReference||
"ArcGISSceneServiceLayer"===H.layerType}function P(H){return H?{baseLayers:e((H.baseMapLayers??[]).filter(m=>!C(m))),referenceLayers:e((H.baseMapLayers??[]).filter(m=>C(m)))}:null}function e(H){return H.map(m=>{let h;switch(m.layerType){case "VectorTileLayer":h="vector-tile";break;case "ArcGISTiledMapServiceLayer":h="tile";break;case "ArcGISSceneServiceLayer":h="scene";break;default:h="unknown"}return{type:h,effect:m.effect,url:ba(m.templateUrl||m.urlTemplate||m.styleUrl||m.url),minScale:m.minScale??
0,maxScale:m.maxScale??0,opacity:m.opacity??1,visible:null!=m.visibility?!!m.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function K(H,m,h){return null!=H!==(null!=m)?"not-equal":H&&m?Q(H.baseLayers,m.baseLayers)?Q(H.referenceLayers,m.referenceLayers)?"equal":h.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function Q(H,m){if(H.length!==m.length)return!1;for(let h=0;h<H.length;h++)if(!S(H[h],m[h]))return!1;return!0}function S(H,m){if(H.type!==m.type||H.url!==m.url||
H.minScale!==m.minScale||H.maxScale!==m.maxScale||H.visible!==m.visible||H.opacity!==m.opacity||!d.effectEquals(H.effect,m.effect))return!1;if(null!=H.activeLayerId||null!=m.activeLayerId)return H.activeLayerId===m.activeLayerId;if(null!=H.sublayers||null!=m.sublayers){if(null==H.sublayers||null==m.sublayers||H.sublayers.length!==m.sublayers.length)return!1;for(let h=0;h<H.sublayers.length;h++){const x=H.sublayers.at(h),N=m.sublayers.at(h);if(x?.id!==N?.id||x?.visible!==N?.visible)return!1}}return!0}
function ba(H){return H?f.normalize(H).replace(/^\s*https?:/i,"").toLowerCase():""}function W(H){return"portalItem"in H?H.portalItem?.thumbnailUrl:void 0}let U;const v=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;c.clonePreservingTiledLayers=function(H,m=null){H=z(H);if(!H)return null;H=H.clone();m&&(H.baseLayers=I(H.baseLayers,m.baseLayers),H.referenceLayers=I(H.referenceLayers,m.referenceLayers));return H};c.contentEquals=function(H,m){if(H===m||null!=H?.portalItem?.id&&H.portalItem.id===m?.portalItem?.id)return!0;
H=a(H);m=a(m);return"equal"===K(H,m,{mustMatchReferences:!0})};c.createCache=function(){return{}};c.destroyCache=function(H){for(const m in H)B.destroyMaybe(H[m]),delete H[m]};c.ensureType=z;c.findSpatialReference=function(H,m){if(null==m||null==H)return{spatialReference:null,updating:!1};if("not-loaded"===m.loadStatus)return m.load(),{spatialReference:null,updating:!0};if(m.spatialReference)return{spatialReference:m.spatialReference,updating:!1};if(0===m.baseLayers.length)return{spatialReference:null,
updating:!1};m=m.baseLayers.at(0);switch(m.loadStatus){case "not-loaded":m.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}m=(("supportedSpatialReferences"in m?m.supportedSpatialReferences:null)||["tileInfo"in m?m.tileInfo?.spatialReference:m.spatialReference]).filter(Boolean);const h=H.spatialReference;return h?{spatialReference:m.find(x=>h.equals(x))??m[0]??null,updating:!1}:{spatialReference:m[0],updating:!1}};c.getBasemapThumbnailUrl=
function(H){if(!H)return null;var {thumbnailUrl:m}=H;return m?m:(m=D(H))?r.esriBasemapDefinitions[m].thumbnailUrl:B.mappedFind(H.baseLayers,W)};c.getWellKnownBasemapId=D;c.hasDeveloperBasemapLayer=function(H){return!!H?.baseLayers.concat(H.referenceLayers).some(t)};c.isBasemap3D=function(H){return"Web Scene"===H.portalItem?.type||H.referenceLayers.some(m=>"scene"===m.type)};c.isBasemapInBeta=function(H){return!!H?.portalItem?.tags?.some(m=>"beta"===m.toLowerCase())};c.isBasemapLayer=function(H,m){return H.basemap?.referenceLayers?.some(h=>
h.uid===m)||H.basemap?.baseLayers?.some(h=>h.uid===m)};c.isDeveloperBasemapLayer=t;c.overrideGetWellKnownBasemapId=function(H){U=H};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(c,g,y,w,F,B,f,p,d,r,z,D,I,t,q,a,u,n,C,P,e,K,Q){var S;let ba=0;B=S=class extends B.JSONSupportMixin(p){constructor(v){super(v);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+ba++;this.baseLayers=new w;this.referenceLayers=new w;const H=m=>{m.parent&&m.parent!==this&&"remove"in m.parent&&m.parent.remove(m);m.parent=this;"elevation"===m.type&&r.getLogger(this).error(`Layer '${m.title}, id:${m.id}' of type '${m.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",m=>H(m.item)),this.referenceLayers.on("after-add",m=>H(m.item)),this.baseLayers.on("after-remove",m=>{m.item.parent=null}),this.referenceLayers.on("after-remove",m=>{m.item.parent=null})])}initialize(){this.when().catch(v=>{r.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,v)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var v=this.baseLayers.toArray();for(const H of v)H.destroy();
v=this.referenceLayers.toArray();for(const H of v)H.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=z.destroyMaybe(this.portalItem)}normalizeCtorArgs(v){v&&"resourceInfo"in v&&(this._set("resourceInfo",v.resourceInfo),v={...v},delete v.resourceInfo);return v}set baseLayers(v){this._set("baseLayers",F.referenceSetter(v,this._get("baseLayers")))}_writeBaseLayers(v,H,m){const h=[];v&&(m={...m,layerContainerType:"basemap"},this.baseLayers.forEach(x=>{x=Q.getLayerJSON(x,
m.webmap?m.webmap.getLayerJSONFromResourceInfo(x):null,m);null!=x&&h.push(x)}),this.referenceLayers.forEach(x=>{const N=Q.getLayerJSON(x,m.webmap?m.webmap.getLayerJSONFromResourceInfo(x):null,m);null!=N&&("scene"!==x.type&&(N.isReference=!0),h.push(N))}));H.baseMapLayers=h}set referenceLayers(v){this._set("referenceLayers",F.referenceSetter(v,this._get("referenceLayers")))}writeTitle(v,H){H.title=v||"Basemap"}load(v){this.addResolvingPromise(this._loadFromSource(v));return Promise.resolve(this)}loadAll(){return d.loadAll(this,
v=>{v(this.baseLayers,this.referenceLayers)})}clone(){const v={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(H=>f.isClonable(H)?H.clone():H),referenceLayers:this.referenceLayers.map(H=>f.isClonable(H)?H.clone():H)};this.loaded&&(v.loadStatus="loaded");return(new S({resourceInfo:this.resourceInfo})).set(v)}read(v,H){this.resourceInfo||this._set("resourceInfo",{data:v,context:H});super.read(v,H)}write(v,H){v=v||{};H?.origin||(H={origin:"web-map",...H});super.write(v,
H);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(v.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(m=>{m=f.clone(m);m.url&&I.isProtocolRelative(m.url)&&(m.url=`https:${m.url}`);m.templateUrl&&I.isProtocolRelative(m.templateUrl)&&(m.templateUrl=`https:${m.templateUrl}`);return m}));return v}async _loadFromSource(v){const {resourceInfo:H,portalItem:m,style:h}=this;D.throwIfAborted(v);const x=[];H?(x.push(this._loadLayersFromJSON(H.data,H.context?H.context.url:null,v)),H.data.id&&!H.data.title&&
x.push(e.getBasemapTitle(H.data.id).then(N=>{N&&this.read({title:N},H.context)}))):m?x.push(this._loadFromItem(m,v)):h&&x.push(this._loadFromStylesService(h,v));await Promise.all(x)}async _loadLayersFromJSON(v,H,m){const h=this.resourceInfo?.context,x=this.portalItem?.portal||h?.portal||null,N=U[h?.origin||""]??"web-map",{populateOperationalLayers:L}=await new Promise((X,da)=>c(["./layers/support/layersCreator"],X,da)),T=[];D.throwIfAborted(m);if(v.baseMapLayers&&Array.isArray(v.baseMapLayers)){H=
{context:{...h,origin:N,url:H,portal:x,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const X=da=>"web-scene"===N&&"ArcGISSceneServiceLayer"===da.layerType||da.isReference;m=L(this.baseLayers,v.baseMapLayers.filter(da=>!X(da)),H);T.push(m);v=L(this.referenceLayers,v.baseMapLayers.filter(X),H);T.push(v)}await Promise.allSettled(T)}async _loadFromItem(v,H){const m=await (await v.load(H)).fetchData("json",H),h=I.urlToObject(v.itemUrl??"");this._set("resourceInfo",{data:m.baseMap??
{},context:{origin:W[v.type||""]??"web-map",portal:v.portal||C.getDefault(),url:h}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:m.spatialReference},this.resourceInfo.context);this.read({title:v.title,thumbnailUrl:v.thumbnailUrl},{origin:"portal-item",portal:v.portal||C.getDefault(),url:h});return this._loadLayersFromJSON(this.resourceInfo.data,h,H)}async _loadFromStylesService(v,H){var m=`${v.serviceUrl}/${v.id}`;v=(await y(m,{query:{language:v.getLanguageParamValue(),
places:v.places,worldview:v.worldview},signal:H?.signal})).data;m=I.urlToObject(m);this._set("resourceInfo",{data:v.baseMap??{},context:{origin:"web-map",url:m}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:v.spatialReference},this.resourceInfo.context);return this._loadLayersFromJSON(this.resourceInfo.data,m,H)}static fromId(v){return(v=e.esriBasemapDefinitions[v])?v.itemId?new S({portalItem:{id:v.itemId,portal:{url:"https://www.arcgis.com"}}}):S.fromJSON(v,
{origin:v.is3d?"web-scene":"web-map"}):null}};g.__decorate([t.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(v,H,m,h){this._writeBaseLayers(v,H,h)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:w}},writer(v,H,m,h){this._writeBaseLayers(v,H,h)}}}}}})],B.prototype,"baseLayers",null);g.__decorate([t.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],B.prototype,"id",void 0);g.__decorate([t.property({type:P})],B.prototype,"portalItem",void 0);
g.__decorate([t.property()],B.prototype,"referenceLayers",null);g.__decorate([t.property({readOnly:!0})],B.prototype,"resourceInfo",void 0);g.__decorate([t.property({type:n})],B.prototype,"spatialReference",void 0);g.__decorate([t.property({type:K})],B.prototype,"style",void 0);g.__decorate([t.property()],B.prototype,"thumbnailUrl",void 0);g.__decorate([t.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],B.prototype,"title",void 0);g.__decorate([u.writer("title")],B.prototype,
"writeTitle",null);B=S=g.__decorate([a.subclass("esri.Basemap")],B);const W={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},U={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return B})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(c,g){c.castForReferenceSetter=function(y){return y};c.referenceSetter=function(y,w,F=g){w||=new F;if(w===y)return w;w.removeAll();y&&(Array.isArray(y)||"items"in y&&Array.isArray(y.items))?
w.addMany(y):y&&w.add(y);return w};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(c,g,y,w,F,B,f,p){const d=r=>{r=class extends r{constructor(...z){super(...z);this.loadError=this._loadController=null;this.loadStatus="not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(D=>
{const I=this.load.bind(this);this.load=t=>{const q=new Promise((a,u)=>{const n=F.onAbortOrThrow(t,u);this.destroyed&&u(new g("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(a,u).finally(()=>{n&&n.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const a=this._loadController=new AbortController;I({signal:a.signal})}D();return q}}));this.when(()=>{this._set("loadStatus","loaded");
this._loadController=null},D=>{this._set("loadStatus","failed");this._set("loadError",D);this._loadController=null})}destroy(){this._loadController&&(this._loadController=y.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;this._set("loadError",new g("load:cancelled","Cancelled"));
this._loadController?.abort();this._promiseProps.abort();return this}};c.__decorate([f.property({readOnly:!0})],r.prototype,"loaded",null);c.__decorate([f.property({readOnly:!0})],r.prototype,"loadError",void 0);c.__decorate([f.property({clonable:!1})],r.prototype,"loadStatus",void 0);c.__decorate([f.property({type:[B],readOnly:!0})],r.prototype,"loadWarnings",null);return r=c.__decorate([p.subclass("esri.core.Loadable")],r)};w=class extends d(w.EsriPromise){};w=c.__decorate([p.subclass("esri.core.Loadable")],
w);(function(r){r.LoadableMixin=d;r.isLoadable=function(z){return!(!z||!z.load)}})(w||={});return w})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(c,g,y,w,F){var B;(function(d){d[d.PENDING=0]="PENDING";d[d.RESOLVED=1]="RESOLVED";d[d.REJECTED=2]="REJECTED"})(B||={});class f{constructor(){this._resolver=w.createResolver();this._status=B.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>
{this._status=B.RESOLVED;this._cleanUp()},()=>{this._status=B.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(d){this._resolvingPromises.push(d);this._tryResolve()}isResolved(){return this._status===B.RESOLVED}isRejected(){return this._status===B.REJECTED}isFulfilled(){return this._status!==B.PENDING}abort(){this._resolver.reject(w.createAbortError())}_cleanUp(){this._resolvingPromises=this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var d=
w.createResolver(),r=[...this._resolvingPromises,d.promise],z=this._allPromise=Promise.all(r);z.then(()=>{this.isFulfilled()||this._allPromise!==z||this._resolver.resolve()},D=>{this.isFulfilled()||this._allPromise!==z||w.isAbortError(D)||this._resolver.reject(D)});d.resolve()}}}const p=d=>{d=class extends d{constructor(...r){super(...r);this._promiseProps=new f;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,
z){return this._promiseProps.promise.then(()=>this).then(r,z)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return d=g.__decorate([F.subclass("esri.core.Promise")],d)};c.EsriPromise=class extends p(y){};c.EsriPromise=g.__decorate([F.subclass("esri.core.Promise")],c.EsriPromise);c.EsriPromiseMixin=p;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(c,g,y,w){async function F(B,f){const p=[],d=(...z)=>{for(const D of z)null!=D&&(Array.isArray(D)?d(...D):y.isCollection(D)?D.forEach(I=>d(I)):w.isLoadable(D)&&p.push(D))};f(d);let r=null;await g.map(p,async z=>{z=await g.result("loadAll"in z&&"function"===typeof z.loadAll?z.loadAll():z.load());!1!==z.ok||r||(r=z)});if(r)throw r.error;return B}c.loadAll=async function(B,f){await B.load();return F(B,f)};c.loadAllChildren=F;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(c,g,y,w,F,B,f,p,d,r,z,D,I,t,q,a,u,n,C,P,e,K,Q,S){function ba(h){const x=w.id;return()=>{const N=h.deref();N&&x.findCredential(N.restUrl)&&N.signIn().catch(()=>{})}}const W=h=>Object.freeze(Object.defineProperty({__proto__:null,default:h},Symbol.toStringTag,{value:"Module"}));var U;let v;const H={PortalGroup:()=>Promise.resolve({default:P}),PortalItem:()=>new Promise((h,x)=>c(["./PortalItem"],N=>h(W(N)),x)),PortalUser:()=>Promise.resolve({default:Q})};f=U=class extends f.JSONSupportMixin(p){constructor(h){super(h);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.layoutGroupQuery=
this.galleryTemplatesGroupQuery=this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=null;this.isReadOnly=this.isPortal=!1;this.region=this.portalProperties=
this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.recycleBinEnabled=!1;this.rotatorPanels=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=y.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(h){return"string"===
typeof h?{url:h}:h}destroy(){m.unregister(this);this.defaultBasemap=d.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=d.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=d.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=d.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(h){if(h)for(const x of h)y.request.trustedServers.includes(x)||y.request.trustedServers.push(x);return h}readDefaultBasemap(h){return this._readBasemap(h)}readDefaultDevBasemap(h){return this._readBasemap(h)}readDefaultVectorBasemap(h){return this._readBasemap(h)}get extraQuery(){const h=
!this.user?.orgId||this.canSearchPublic;return this.id&&!h?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let h=this.url;if(h){const x=h.indexOf("/sharing");h=0<x?h.substring(0,x):this.url.replace(/\/+$/,"");h+="/sharing/rest"}return h}get thumbnailUrl(){const h=this.restUrl,x=this.thumbnail;return h&&x?this._normalizeSSL(h+"/portals/self/resources/"+x):null}readUrlKey(h){return h?h.toLowerCase():
h}readUser(h){let x=null;h&&(x=Q.fromJSON(h),x.portal=this);return x}load(h){const x=(new Promise((N,L)=>c(["../Basemap"],T=>N(W(T)),L))).then(({default:N})=>{r.throwIfAborted(h);v=N}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,h)).then(N=>{if(w.id){const L=w.id;this.credential=L.findCredential(this.restUrl);this.credential||this.authMode!==U.AUTH_MODE_AUTO&&this.authMode!==U.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=
L.on("credential-create",ba(new WeakRef(this))),m.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=N;this.read(N)});this.addResolvingPromise(x);return Promise.resolve(this)}async createElevationLayers(){await this.load();const h=this._getHelperService("defaultElevationLayers"),x=(await new Promise((N,L)=>c(["../layers/ElevationLayer"],T=>N(W(T)),L))).default;return h?h.map(N=>new x({id:N.id,url:N.url})):[]}async fetchBasemaps(h,x){const N=await this._fetchBasemaps(h,x);!0===
x?.include3d&&!1!==this.use3dBasemaps&&(h=await this._fetchBasemaps3D(h,x),N.unshift(...h));return N}fetchCategorySchema(h){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",h).then(x=>x.categorySchema):r.isAborted(h)?Promise.reject(r.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(h){const x=this.featuredGroups,N=new e({num:100,sortField:"title"});if(x?.length){const L=[];for(const T of x)L.push(`(title:"${T.title}" AND owner:${T.owner})`);N.query=
L.join(" OR ");return this.queryGroups(N,h).then(T=>T.results)}return r.isAborted(h)?Promise.reject(r.createAbortError()):Promise.resolve([])}fetchRegions(h){const x=this.user?.culture||this.culture||n.getLocale();return this.request(this.restUrl+"/portals/regions",{...h,query:{culture:x}})}fetchSettings(h){const x=this.user?.culture||this.culture||n.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...h,query:{culture:x}})}static getDefault(){return C.ensureDefaultPortalInstance(()=>
new U)}queryGroups(h,x){return this.queryPortal("/community/groups",h,"PortalGroup",x)}queryItems(h,x){return this.queryPortal("/search",h,"PortalItem",x)}queryUsers(h,x){h.sortField||(h.sortField="username");return this.queryPortal("/community/users",h,"PortalUser",x)}fetchSelf(h=this.authMode,x=!1,N){const L=this.restUrl+"/portals/self";h={authMode:h,query:{culture:n.getLocale().toLowerCase()},withCredentials:!0,...N};"auto"===h.authMode&&(h.authMode="no-prompt");x&&(h.query.default=!0);return this.request(L,
h)}queryPortal(h,x,N,L){const T=D.ensureType(e,x),X=da=>this.request(this.restUrl+h,{...T.toRequestOptions(this),...L}).then(ia=>{const na=T.clone();na.start=ia.nextStart;return new K({nextQueryParams:na,queryParams:T,total:ia.total,results:U._resultsToTypedArray(da,{portal:this},ia,L)})}).then(ia=>Promise.all(ia.results.map(na=>"function"===typeof na.when?na.when():ia)).then(()=>ia,na=>{r.throwIfAbortError(na);return ia}));return N&&H[N]?H[N]().then(({default:da})=>{r.throwIfAborted(L);return X(da)}):
X()}signIn(){if(this.authMode===U.AUTH_MODE_ANONYMOUS||this.authMode===U.AUTH_MODE_NO_PROMPT&&!w.id)return Promise.reject(new B("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const h=x=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return x||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=
x;return this.fetchSelf("immediate")});if(this.user&&this.credential===x)return null;this.credential=x;return this.fetchSelf("immediate")}).then(N=>{N&&(this.sourceJSON=N,this.read(N))});return w.id?w.id.getCredential(this.restUrl,{prompt:this.authMode!==U.AUTH_MODE_NO_PROMPT}).then(x=>h(x)):h(this.credential)}normalizeUrl(h){const x=this.credential?.token;return this._normalizeSSL(x?h+(h.includes("?")?"\x26":"?")+"token\x3d"+x:h)}requestToTypedArray(h,x,N){return this.request(h,x).then(L=>{const T=
U._resultsToTypedArray(N,{portal:this},L);return Promise.all(T.map(X=>"function"===typeof X.when?X.when():L)).then(()=>T,()=>T)})}request(h,x={}){var N={f:"json",...x.query};const {authMode:L=this.authMode===U.AUTH_MODE_ANONYMOUS||this.authMode===U.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:T=null,cacheBust:X=!1,method:da="auto",responseType:ia="json",signal:na}=x;N={authMode:L,body:T,cacheBust:X,method:da,query:N,responseType:ia,timeout:0,signal:na};x.withCredentials&&(N.withCredentials=!0);return F(this._normalizeSSL(h),
N).then(qa=>qa.data)}toJSON(){throw new B("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(h){if(!h)return null;if(h.declaredClass)throw Error("JSON object is already hydrated");return new U({sourceJSON:h})}_getHelperService(h){const x=this.helperServices&&this.helperServices[h];if(!x)throw new B("portal:service-not-found",`The \`helperServices\` do not include an entry named "${h}"`);return x}async _fetchBasemaps(h,x){const N=new e;N.query=h||(y.apiKey&&S.supportsApiKey(this.url)?
this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);N.disableExtraQuery=!0;h=await this.queryGroups(N,x);if(!h.total)return[];h=h.results[0];N.num=100;N.query='type:"Web Map" -type:"Web Application"';N.sortField=h.sortField||"name";N.sortOrder=h.sortOrder||"desc";x=await h.queryItems(N,x);return x.total?x.results.filter(L=>"Web Map"===L.type).map(L=>new v({portalItem:L})):[]}async _fetchBasemaps3D(h,x){h=h||this.basemapGalleryGroupQuery3D;
if(!h)return[];h=new e({query:h,disableExtraQuery:!0});var N=await this.queryGroups(h,x);if(!N.total)return[];N=N.results[0];h.num=100;h.query='type:"Web Scene"';h.sortField=N.sortField||"name";h.sortOrder=N.sortOrder||"desc";x=await N.queryItems(h,x);return x.total?x.results.filter(L=>"Web Scene"===L.type).map(L=>new v({portalItem:L})):[]}_normalizeSSL(h){return h.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(h){return h?(h=v.fromJSON(h),h.portalItem={portal:this},h):null}static _resultsToTypedArray(h,
x,N,L){if(N){const T=null!=L?L.signal:null;N=N.listings||N.notifications||N.userInvitations||N.tags||N.items||N.groups||N.comments||N.provisions||N.results||N.relatedItems||N;if(h||x)N=N.map(X=>{X=Object.assign(h?h.fromJSON(X):X,x);"function"===typeof X.load&&X.load(T);return X})}else N=[];return N}};f.AUTH_MODE_ANONYMOUS="anonymous";f.AUTH_MODE_AUTO="auto";f.AUTH_MODE_IMMEDIATE="immediate";f.AUTH_MODE_NO_PROMPT="no-prompt";g.__decorate([z.property()],f.prototype,"access",void 0);g.__decorate([z.property()],
f.prototype,"allSSL",void 0);g.__decorate([z.property()],f.prototype,"authMode",void 0);g.__decorate([z.property()],f.prototype,"authorizedCrossOriginDomains",void 0);g.__decorate([q.reader("authorizedCrossOriginDomains")],f.prototype,"readAuthorizedCrossOriginDomains",null);g.__decorate([z.property()],f.prototype,"basemapGalleryGroupQuery",void 0);g.__decorate([z.property({json:{name:"3DBasemapGalleryGroupQuery"}})],f.prototype,"basemapGalleryGroupQuery3D",void 0);g.__decorate([z.property()],f.prototype,
"bingKey",void 0);g.__decorate([z.property()],f.prototype,"canListApps",void 0);g.__decorate([z.property()],f.prototype,"canListData",void 0);g.__decorate([z.property()],f.prototype,"canListPreProvisionedItems",void 0);g.__decorate([z.property()],f.prototype,"canProvisionDirectPurchase",void 0);g.__decorate([z.property()],f.prototype,"canSearchPublic",void 0);g.__decorate([z.property()],f.prototype,"canShareBingPublic",void 0);g.__decorate([z.property()],f.prototype,"canSharePublic",void 0);g.__decorate([z.property()],
f.prototype,"canSignInArcGIS",void 0);g.__decorate([z.property()],f.prototype,"canSignInIDP",void 0);g.__decorate([z.property()],f.prototype,"colorSetsGroupQuery",void 0);g.__decorate([z.property()],f.prototype,"commentsEnabled",void 0);g.__decorate([z.property({type:Date})],f.prototype,"created",void 0);g.__decorate([z.property()],f.prototype,"credential",void 0);g.__decorate([z.property()],f.prototype,"culture",void 0);g.__decorate([z.property()],f.prototype,"currentVersion",void 0);g.__decorate([z.property()],
f.prototype,"customBaseUrl",void 0);g.__decorate([z.property()],f.prototype,"defaultBasemap",void 0);g.__decorate([q.reader("defaultBasemap")],f.prototype,"readDefaultBasemap",null);g.__decorate([z.property()],f.prototype,"defaultDevBasemap",void 0);g.__decorate([q.reader("defaultDevBasemap")],f.prototype,"readDefaultDevBasemap",null);g.__decorate([z.property({type:u})],f.prototype,"defaultExtent",void 0);g.__decorate([z.property()],f.prototype,"defaultVectorBasemap",void 0);g.__decorate([q.reader("defaultVectorBasemap")],
f.prototype,"readDefaultVectorBasemap",null);g.__decorate([z.property()],f.prototype,"description",void 0);g.__decorate([z.property()],f.prototype,"devBasemapGalleryGroupQuery",void 0);g.__decorate([z.property()],f.prototype,"eueiEnabled",void 0);g.__decorate([z.property({readOnly:!0})],f.prototype,"extraQuery",null);g.__decorate([z.property()],f.prototype,"featuredGroups",void 0);g.__decorate([z.property()],f.prototype,"featuredItemsGroupQuery",void 0);g.__decorate([z.property()],f.prototype,"galleryTemplatesGroupQuery",
void 0);g.__decorate([z.property()],f.prototype,"layoutGroupQuery",void 0);g.__decorate([z.property()],f.prototype,"livingAtlasGroupQuery",void 0);g.__decorate([z.property()],f.prototype,"hasCategorySchema",void 0);g.__decorate([z.property()],f.prototype,"helpBase",void 0);g.__decorate([z.property()],f.prototype,"helperServices",void 0);g.__decorate([z.property()],f.prototype,"helpMap",void 0);g.__decorate([z.property()],f.prototype,"homePageFeaturedContent",void 0);g.__decorate([z.property()],f.prototype,
"homePageFeaturedContentCount",void 0);g.__decorate([z.property()],f.prototype,"httpPort",void 0);g.__decorate([z.property()],f.prototype,"httpsPort",void 0);g.__decorate([z.property()],f.prototype,"id",void 0);g.__decorate([z.property()],f.prototype,"ipCntryCode",void 0);g.__decorate([z.property({readOnly:!0})],f.prototype,"isOrganization",null);g.__decorate([z.property()],f.prototype,"isPortal",void 0);g.__decorate([z.property()],f.prototype,"isReadOnly",void 0);g.__decorate([z.property({readOnly:!0})],
f.prototype,"itemPageUrl",null);g.__decorate([z.property()],f.prototype,"layerTemplatesGroupQuery",void 0);g.__decorate([z.property()],f.prototype,"maxTokenExpirationMinutes",void 0);g.__decorate([z.property({type:Date})],f.prototype,"modified",void 0);g.__decorate([z.property()],f.prototype,"name",void 0);g.__decorate([z.property()],f.prototype,"portalHostname",void 0);g.__decorate([z.property()],f.prototype,"portalMode",void 0);g.__decorate([z.property()],f.prototype,"portalProperties",void 0);
g.__decorate([z.property()],f.prototype,"region",void 0);g.__decorate([z.property()],f.prototype,"recycleBinEnabled",void 0);g.__decorate([z.property({readOnly:!0})],f.prototype,"restUrl",null);g.__decorate([z.property()],f.prototype,"rotatorPanels",void 0);g.__decorate([z.property()],f.prototype,"showHomePageDescription",void 0);g.__decorate([z.property()],f.prototype,"sourceJSON",void 0);g.__decorate([z.property()],f.prototype,"staticImagesUrl",void 0);g.__decorate([z.property({json:{name:"2DStylesGroupQuery"}})],
f.prototype,"stylesGroupQuery2d",void 0);g.__decorate([z.property({json:{name:"stylesGroupQuery"}})],f.prototype,"stylesGroupQuery3d",void 0);g.__decorate([z.property()],f.prototype,"supportsHostedServices",void 0);g.__decorate([z.property()],f.prototype,"symbolSetsGroupQuery",void 0);g.__decorate([z.property()],f.prototype,"templatesGroupQuery",void 0);g.__decorate([z.property()],f.prototype,"thumbnail",void 0);g.__decorate([z.property({readOnly:!0})],f.prototype,"thumbnailUrl",null);g.__decorate([z.property()],
f.prototype,"units",void 0);g.__decorate([z.property()],f.prototype,"url",void 0);g.__decorate([z.property()],f.prototype,"urlKey",void 0);g.__decorate([q.reader("urlKey")],f.prototype,"readUrlKey",null);g.__decorate([z.property()],f.prototype,"user",void 0);g.__decorate([q.reader("user")],f.prototype,"readUser",null);g.__decorate([z.property()],f.prototype,"use3dBasemaps",void 0);g.__decorate([z.property()],f.prototype,"useStandardizedQuery",void 0);g.__decorate([z.property()],f.prototype,"useVectorBasemaps",
void 0);g.__decorate([z.property()],f.prototype,"vectorBasemapGalleryGroupQuery",void 0);g=f=U=g.__decorate([a.subclass("esri.portal.Portal")],f);const m=new FinalizationRegistry(h=>{h.remove()});return g})},"esri/portal/portalDefault":function(){define(["exports"],function(c){let g;c.clearDefaultPortalInstance=function(){g=void 0};c.ensureDefaultPortalInstance=function(y){if(!g||g.destroyed)g=y();return g};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(c,g,y,w,F,B,f,p,d){var r;y=r=class extends y.JSONSupport{constructor(z){super(z);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const z=this.url,D=this.thumbnail;return z&&D&&this.portal?this.portal?.normalizeUrl(`${z}/info/${D}?f=json`):null}get url(){const z=this.portal?.restUrl;return z?z+"/community/groups/"+this.id:
null}fetchCategorySchema(z){return this.portal.request(this.url+"/categorySchema",z).then(D=>{D=D.categorySchema||[];return D.some(I=>"contentCategorySetsGroupQuery.LivingAtlas"===I.source)?this._fetchCategorySchemaSet("LivingAtlas",z):D})}fetchMembers(z){return this.portal.request(this.url+"/users",z)}getThumbnailUrl(z){let D=this.thumbnailUrl;D&&z&&(D+=`&w=${z}`);return D}toJSON(){throw new g("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(z){if(!z)return null;
if(z.declaredClass)throw Error("JSON object is already hydrated");const D=new r({sourceJSON:z});D.read(z);return D}queryItems(z,D){z=F.ensureType(d,z);const I=this.portal;if(5<parseFloat(I.currentVersion))return z=z||new d,I.queryPortal(`/content/groups/${this.id}/search`,z,"PortalItem",D);z=z?z.clone():new d;z.query="group:"+this.id+(z.query?" "+z.query:"");return I.queryItems(z,D)}_fetchCategorySchemaSet(z,D){const I=this.portal;return I.fetchSelf(I.authMode,!0,D).then(t=>{if(t=t.contentCategorySetsGroupQuery)return t=
new d({disableExtraQuery:!0,num:1,query:t}),I.queryGroups(t,D);throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(t=>{if(t.total){t=t.results[0];const q=new d({num:1,query:`typekeywords:"${z}"`});return t.queryItems(q,D)}throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(t=>t.total?t.results[0].fetchData("json",D).then(q=>{q=q?.categorySchema;return q?.length?q:[]}):[])}};c.__decorate([w.property()],
y.prototype,"access",void 0);c.__decorate([w.property({type:Date})],y.prototype,"created",void 0);c.__decorate([w.property()],y.prototype,"description",void 0);c.__decorate([w.property()],y.prototype,"id",void 0);c.__decorate([w.property()],y.prototype,"isInvitationOnly",void 0);c.__decorate([w.property({type:Date})],y.prototype,"modified",void 0);c.__decorate([w.property()],y.prototype,"owner",void 0);c.__decorate([w.property()],y.prototype,"portal",void 0);c.__decorate([w.property()],y.prototype,
"snippet",void 0);c.__decorate([w.property()],y.prototype,"sortField",void 0);c.__decorate([w.property()],y.prototype,"sortOrder",void 0);c.__decorate([w.property()],y.prototype,"sourceJSON",void 0);c.__decorate([w.property()],y.prototype,"tags",void 0);c.__decorate([w.property()],y.prototype,"thumbnail",void 0);c.__decorate([w.property({readOnly:!0})],y.prototype,"thumbnailUrl",null);c.__decorate([w.property()],y.prototype,"title",void 0);c.__decorate([w.property({readOnly:!0})],y.prototype,"url",
null);return y=r=c.__decorate([p.subclass("esri.portal.PortalGroup")],y)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(c,g,y,w,F,B,f,p,d,r,z){var D;const I=new y.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});g=D=class extends g{constructor(t){super(t);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t)}clone(){return new D({categories:this.categories?w.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,q){let a=[];this.categories&&(a=this.categories.map(C=>Array.isArray(C)?JSON.stringify(C):C));let u="";if(this.extent){var n=z.project(this.extent,r.WGS84);null!=n&&(u=`${n.xmin},${n.ymin},${n.xmax},${n.ymax}`)}n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);t={categories:a,bbox:u,q:n,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(t.sortField=this.sortField.split(",").map(C=>I.toJSON(C.trim())).join(","),t.sortOrder=this.sortOrder);return{query:{...q,...t}}}};c.__decorate([F.property()],g.prototype,"categories",void 0);c.__decorate([F.property()],g.prototype,"disableExtraQuery",void 0);c.__decorate([F.property({type:d})],g.prototype,"extent",void 0);c.__decorate([F.property()],g.prototype,"filter",void 0);c.__decorate([F.property()],g.prototype,"num",void 0);c.__decorate([F.property()],
g.prototype,"query",void 0);c.__decorate([F.property()],g.prototype,"sortField",void 0);c.__decorate([F.property()],g.prototype,"sortOrder",null);c.__decorate([F.property()],g.prototype,"start",void 0);return g=D=c.__decorate([p.subclass("esri.portal.PortalQueryParams")],g)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,y,w,F,B,f){g=class extends g{constructor(p){super(p);this.total=this.results=this.queryParams=this.nextQueryParams=null}};c.__decorate([y.property()],g.prototype,"nextQueryParams",void 0);c.__decorate([y.property()],g.prototype,"queryParams",void 0);c.__decorate([y.property()],g.prototype,"results",void 0);c.__decorate([y.property()],g.prototype,"total",void 0);return g=c.__decorate([f.subclass("esri.portal.PortalQueryResult")],g)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(c,g,y,w,F,B,f,p,d,r,z){var D;w=D=class extends w.JSONSupport{constructor(I){super(I);this.userType=this.userLicenseTypeId=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const I=this.url,t=this.thumbnail;return I&&t?this.portal.normalizeUrl(`${I}/info/${t}?f=json`):null}get userContentUrl(){const I=
this.portal?.restUrl;return I?`${I}/content/users/${this.username}`:null}get url(){const I=this.portal?.restUrl;return I?`${I}/community/users/${this.username}`:null}addItem(I){const t=I&&I.item;var q=I?.data;I=I?.folder;const a={method:"post"};t&&(a.query=t.createPostQuery(),null!=q&&("string"===typeof q?a.query.text=q:"object"===typeof q&&(a.query.text=JSON.stringify(q))));q=this.userContentUrl;I&&(q+="/"+("string"===typeof I?I:I.id));return this.portal.request(q+"/addItem",a).then(u=>{t.id=u.id;
t.portal=this.portal;return t.loaded?t.reload():t.load()})}async deleteItem(I,t=!1){let q=this.userContentUrl;I.ownerFolder&&(q+="/"+I.ownerFolder);await this.portal.request(q+`/items/${I.id}/delete`,{method:"post",query:t?{permanentDelete:!0}:{}});I.id=null;I.portal=null}async deleteItems(I,t=!1){I=I.concat();var q=this.userContentUrl+"/deleteItems";const a=[];var u=I.map(n=>n.id);if(u.length){t={method:"post",query:{items:u.join(","),permanentDelete:t}};q=await this.portal.request(q,t);for(const n of q.results)q=
I.find(C=>n.itemId===C.id),t=n.success,u=null,t?(q.id=null,q.portal=null):n.error&&(u=new y("portal:delete-item-failed",n.error.message,n.error)),a.push({item:q,success:t,error:u})}return a}fetchFolders(){return this.portal.request(this.userContentUrl??"",{query:{num:1}}).then(I=>I&&I.folders?I.folders.map(t=>{t=r.fromJSON(t);t.portal=this.portal;return t}):[])}fetchGroups(){return this.portal.request(this.url??"").then(I=>I&&I.groups?I.groups.map(t=>{t=z.fromJSON(t);t.portal=this.portal;return t}):
[])}async fetchItems(I){I??={};var t=this.userContentUrl??"";I.folder&&(t+="/"+I.folder.id);const {default:q}=await new Promise((a,u)=>c(["./PortalItem"],n=>a(Object.freeze(Object.defineProperty({__proto__:null,default:n},Symbol.toStringTag,{value:"Module"}))),u));I=await this.portal.request(t,{query:{folders:!1,inRecycleBin:I.inRecycleBin?!0:null,foldersContent:!I.folder&&I.includeSubfolderItems?!0:null,num:I.num||10,start:I.start||1,sortField:I.sortField||"created",sortOrder:I.sortOrder||"asc"}});
return I?.items?(t=I.items.map(a=>{a=q.fromJSON(a);a.portal=this.portal;return a}),await Promise.all(t.map(a=>a.load())),{items:t,nextStart:I.nextStart,total:I.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(I=>I.tags)}getThumbnailUrl(I){let t=this.thumbnailUrl;t&&I&&(t+=`&w=${I}`);return t}queryFavorites(I){return this.favGroupId?(this._favGroup||(this._favGroup=new z({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(I)):Promise.reject(new y("internal:unknown",
"Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(I,t){await this.portal.request(this.userContentUrl+`/items/${I.id}/restore`,{method:"post",query:t?{folderID:"string"===typeof t?t:t.id}:null})}toJSON(){throw new y("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(I){if(!I)return null;if(I.declaredClass)throw Error("JSON object is already hydrated");const t=new D({sourceJSON:I});t.read(I);return t}};g.__decorate([F.property()],
w.prototype,"access",void 0);g.__decorate([F.property({type:Date})],w.prototype,"created",void 0);g.__decorate([F.property()],w.prototype,"culture",void 0);g.__decorate([F.property()],w.prototype,"description",void 0);g.__decorate([F.property()],w.prototype,"email",void 0);g.__decorate([F.property()],w.prototype,"favGroupId",void 0);g.__decorate([F.property()],w.prototype,"fullName",void 0);g.__decorate([F.property({type:Date})],w.prototype,"modified",void 0);g.__decorate([F.property()],w.prototype,
"orgId",void 0);g.__decorate([F.property()],w.prototype,"portal",void 0);g.__decorate([F.property()],w.prototype,"preferredView",void 0);g.__decorate([F.property()],w.prototype,"privileges",void 0);g.__decorate([F.property()],w.prototype,"region",void 0);g.__decorate([F.property()],w.prototype,"role",void 0);g.__decorate([F.property()],w.prototype,"roleId",void 0);g.__decorate([F.property()],w.prototype,"sourceJSON",void 0);g.__decorate([F.property()],w.prototype,"thumbnail",void 0);g.__decorate([F.property({readOnly:!0})],
w.prototype,"thumbnailUrl",null);g.__decorate([F.property()],w.prototype,"units",void 0);g.__decorate([F.property({readOnly:!0})],w.prototype,"userContentUrl",null);g.__decorate([F.property({readOnly:!0})],w.prototype,"url",null);g.__decorate([F.property()],w.prototype,"username",void 0);g.__decorate([F.property()],w.prototype,"userLicenseTypeId",void 0);g.__decorate([F.property()],w.prototype,"userType",void 0);return w=D=g.__decorate([d.subclass("esri.portal.PortalUser")],w)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,y,w,F,B,f,p){y=class extends y.JSONSupport{constructor(d){super(d);this.username=this.title=this.portal=this.id=this.created=null}get url(){const d=this.portal?.restUrl;return d?`${d}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new g("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};c.__decorate([w.property({type:Date})],y.prototype,"created",void 0);c.__decorate([w.property()],y.prototype,"id",void 0);c.__decorate([w.property()],y.prototype,
"portal",void 0);c.__decorate([w.property()],y.prototype,"title",void 0);c.__decorate([w.property({readOnly:!0})],y.prototype,"url",null);c.__decorate([w.property()],y.prototype,"username",void 0);return y=c.__decorate([p.subclass("esri.portal.PortalFolder")],y)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(c,g,y,w,F,B,f,p,d,r,z,D,I,t,q,a,u){var n;const C=new Set("3DTiles Service;CSV;Feature Collection;Feature Service;Feed;GeoJson;Group Layer;Image Service;KML;Map Service;Media Layer;Scene Service;Stream Service;Vector Tile Service;WFS;WMS;WMTS".split(";")),P=new Set(["KML","GeoJson","CSV"]);F=n=class extends F.JSONSupportMixin(f){static from(e){return r.ensureClass(n,e)}constructor(e){super(e);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.categories=
this.avgRating=this.applicationProxies=this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const e=this.type,K=this.typeKeywords||[];let Q=
e;"Feature Service"===e||"Feature Collection"===e?Q=K.includes("Table")?"Table":K.includes("Route Layer")?"Route Layer":K.includes("Markup")?"Markup":"Feature Layer":"Image Service"===e?Q=K.includes("Elevation 3D Layer")?"Elevation Layer":K.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?Q="Scene Layer":"Video Service"===e?Q="Video Layer":"Scene Package"===e?Q="Scene Layer Package":"Stream Service"===e?Q="Feature Layer":"Geoprocessing Service"===e?Q=K.includes("Web Tool")?
"Tool":"Geoprocessing Service":"Geoenrichment Service"===e?Q="GeoEnrichment Service":"Geocoding Service"===e?Q="Locator":"Microsoft Powerpoint"===e?Q="Microsoft PowerPoint":"GeoJson"===e?Q="GeoJSON":"Globe Service"===e?Q="Globe Layer":"Vector Tile Service"===e?Q="Tile Layer":"netCDF"===e?Q="NetCDF":"Map Service"===e?Q=K.includes("Spatiotemporal")||!K.includes("Hosted Service")&&!K.includes("Tiled")||K.includes("Relational")?"Map Image Layer":"Tile Layer":e?.toLowerCase().includes("add in")?Q=e.replaceAll(/(add in)/gi,
"Add-In"):"datastore catalog service"===e?Q="Big Data File Share":"Compact Tile Package"===e?Q="Tile Package (tpkx)":"Raster function template"===e?Q="Raster Function Template":"OGCFeatureServer"===e?Q="OGC Feature Layer":"web mapping application"===e&&K.includes("configurableApp")?Q="Instant App":"Insights Page"===e?Q="Insights Report":"Excalibur Imagery Project"===e?Q="Excalibur Project":"3DTiles Service"===e?Q="3D tiles layer":"3DTiles Package"===e&&(Q="3D tiles package");return Q}readExtent(e){return e&&
e.length?new I(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var e=this.type?.toLowerCase()||"";const K=this.typeKeywords||[];var Q=!1,S=!1;let ba=!1,W=!1,U=!1,v=!1;Q=S=!1;0<e.indexOf("service")||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(Q=K.includes("Hosted Service"),"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(S=K.includes("Table"),ba=K.includes("Route Layer"),W=K.includes("Markup"),U=K.includes("Spatiotemporal"),v=K.includes("UtilityNetwork"),
e=U&&S?"spatiotemporaltable":S?"table":ba?"routelayer":W?"markup":U?"spatiotemporal":v?"utilitynetwork":Q?"featureshosted":"features"):"map service"===e||"wms"===e||"wmts"===e?(U=K.includes("Spatiotemporal"),S=K.includes("Relational"),e=U||S?"mapimages":Q||K.includes("Tiled")||"wmts"===e?"maptiles":"mapimages"):e="scene service"===e?K.includes("Line")?"sceneweblayerline":K.includes("3DObject")?"sceneweblayermultipatch":K.includes("Point")?"sceneweblayerpoint":K.includes("IntegratedMesh")?"sceneweblayermesh":
K.includes("PointCloud")?"sceneweblayerpointcloud":K.includes("Polygon")?"sceneweblayerpolygon":K.includes("Building")?"sceneweblayerbuilding":K.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===e?K.includes("Elevation 3D Layer")?"elevationlayer":K.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"video service"===
e?K.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===e?K.includes("Web Tool")?"tool":"layers":"geodata service"===e?"geodataservice":"3dtiles service"===e?K.includes("3DObject")?"3dobjecttileslayer":K.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?K.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===e&&K.includes("configurableApp")?
"instantapps":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&K.includes("ArcGIS Pro")||"explorer map"===e&&K.indexOf("Explorer Document")?"mapsgray":
"service definition"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"netcdf"===e||"administrative report"===e?"datafiles":"360 vr experience"===e?"360vr":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"pdf"===e?"pdf":"microsoft word"===e?"word":"microsoft excel"===e?"excel":"microsoft powerpoint"===e?"ppt":"rule package"===e||"file geodatabase"===
e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"workflow manager package"===e||"explorer map"===e&&K.includes("Explorer Mapping Application")||K.includes("Document")?"datafilesgray":"network analysis service"===e||"geoprocessing service"===
e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"analysis model"===e?"analysismodel":"scene package"===e?"scenepackage":"3dtiles package"===e?"3dtileslayerpackage":"3dtiles service"===e?"3dtileslayer":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":
"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hub page"===e?"hubpage":"hub site application"===e?"hubsite":"hub event"===e?"hubevent":"hub project"===e?"hubproject":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===
e?"datastorecollection":"image collection"===e?"imagecollection":"desktop style"===e?"desktopstyle":"style"===e?K.includes("Dictionary")?"dictionarystyle":"style":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":
"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"mission template"===e?"missiontemplate":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"pro report template"===e?"proreporttemplate":"urban model"===e?"urbanmodel":
"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"experience builder widget"===e?"experiencebuilderwidget":"experience builder widget package"===e?"experiencebuilderwidgetpackage":"workflow"===e?"workflow":"kernel gateway connection"===e?"kernelgatewayconnection":"insights script"===e?"insightsscript":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"knowledge graph layer"===
e?"knowledgegraphlayer":"knowledge studio project"===e?"knowledgestudio":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"web link chart"===e?"linkchart":"knowledge graph web investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"apache parquet"===e?"apacheparquet":"notebook code snippet library"===e?"notebookcodesnippets":"suitability model"===e?"suitabilitymodel":
"esri classifier definition"===e?"classifierdefinition":"esri classification schema"===e?"classificationschema":"insights data engineering workbook"===e?"dataengineeringworkbook":"insights data engineering model"===e?"dataengineeringmodel":"deep learning studio project"===e?"deeplearningproject":"discussion"===e?"discussion":"allsource project"===e?"allsourceproject":"api key"===e?"apikey":"data pipeline"===e?"datapipelines":"group layer"===e?(Q=K.includes("Map"))?"layergroup2d":"layergroup":"media layer"===
e?"onlinemedialayer":"form"===e?K.includes("Survey123")?"survey":"datafilesgray":"csv"===e?"csv":"image"===e?"image":"maps";return e?y.getAssetUrl("esri/images/portal/"+e+"16.png"):null}get isLayer(){return null!=this.type&&C.has(this.type)}get itemCdnUrl(){return u.toCDNUrl(this.itemUrl)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=
this.itemUrl,K=this.thumbnail;return e&&K?this.portal?.normalizeUrl(`${e}/info/${K}?f=json`)??null:null}get userItemUrl(){const e=this.portal?.restUrl;if(!e)return null;const K=this.owner||this.portal?.user?.username;return K?`${e}/content/users/${this.ownerFolder?`${K}/${this.ownerFolder}`:K}/items/${this.id}`:null}load(e){const K=this.portal??(this.portal=t.getDefault()),Q=K.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?K.request(this.itemUrl,{signal:null!=e?e.signal:null,
query:{token:this.apiKey}}):{}).then(S=>{this.sourceJSON=S;this.read(S)});this.addResolvingPromise(Q);return Promise.resolve(this)}async addRating(e){const K={method:"post",query:{}};e instanceof a&&(e=e.rating);null==e||isNaN(e)||"number"!==typeof e||(K.query.rating=e);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",K);return new a({rating:e,created:new Date})}clone(){var e={access:this.access,accessInformation:this.accessInformation,applicationProxies:B.clone(this.applicationProxies),
avgRating:this.avgRating,categories:B.clone(this.categories),created:B.clone(this.created),culture:this.culture,description:this.description,extent:B.clone(this.extent),groupCategories:B.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:B.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:B.clone(this.screenshots),
size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:B.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:B.clone(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");e=(new n({sourceJSON:this.sourceJSON})).set(e);e._set("isOrgItem",this.isOrgItem);return e}createPostQuery(){const e=this.toJSON();for(var K of["tags","typeKeywords","categories"])e[K]=e[K]?.join(", ");({extent:K}=e);K&&(e.extent=
JSON.stringify(K));return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",K){return this.portal.request(this.itemUrl+"/data",{responseType:e,...K,query:{token:this.apiKey}})}async fetchRating(e){e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return null!=e.rating?(e.created=new Date(e.created),new a(e)):null}fetchRelatedItems(e,K){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",
{query:{...e,token:this.apiKey},...K},n)}getThumbnailUrl(e){let K=this.thumbnailUrl;K&&e&&(K+=`&w=${e}`);return K}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>{this.sourceJSON=e;this.read(e);return this})}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const K=e?.data,Q={method:"post"};Q.query=this.createPostQuery();for(const S in Q.query)null===Q.query[S]&&(Q.query[S]="");Q.query.clearEmptyFields=!0;null!=K&&
("string"===typeof K?Q.query.text=K:"object"===typeof K&&(Q.query.text=JSON.stringify(K)));return this.portal.request(`${this.userItemUrl}/update`,Q).then(()=>this.reload())}):Promise.reject(new w("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new w("portal:item-does-not-exist","The item does not exist yet");await this.load();const {portal:K,itemUrl:Q}=this;await K.signIn();const {copyResources:S,folder:ba,tags:W,title:U}=e||{};e=
{method:"post",query:{copyPrivateResources:"all"===S,folder:"string"===typeof ba?ba:ba?.id,includeResources:!!S,tags:W?.join(","),title:U}};({itemId:e}=await K.request(`${Q}/copy`,e));return new n({id:e,portal:K})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const K=e.thumbnail,Q=e.filename,S={method:"post"};if("string"===typeof K)p.isDataProtocol(K)?S.query={data:K}:S.query={url:p.makeAbsolute(K)},null!=Q&&(S.query.filename=Q);else{const ba=new FormData;
null!=Q?ba.append("file",K,Q):ba.append("file",K);S.body=ba}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,S).then(()=>this.reload())}):Promise.reject(new w("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},K){const {fetchResources:Q}=await new Promise((S,ba)=>c(["./support/resourceUtils"],S,ba));return Q(this,e,K)}async addResource(e,K,Q){const {addOrUpdateResources:S}=await new Promise((ba,W)=>c(["./support/resourceUtils"],
ba,W));e.portalItem=this;await S(this,[{resource:e,content:K,compress:Q?.compress,access:Q?.access}],"add",Q);return e}async removeResource(e,K){const {removeResource:Q}=await new Promise((S,ba)=>c(["./support/resourceUtils"],S,ba));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new w("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return Q(this,e,K)}async removeAllResources(e){const {removeAllResources:K}=await new Promise((Q,
S)=>c(["./support/resourceUtils"],Q,S));return K(this,e)}resourceFromPath(e){return new q({portalItem:this,path:e})}toJSON(){var e=this.extent;e={accessInformation:this.accessInformation,categories:B.clone(this.categories),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,
sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:B.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:B.clone(this.typeKeywords),url:this.url};return B.fixJson(e)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw Error("JSON object is already hydrated");return new n({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const K in e)"tags"===K&&null!==e[K]&&(e[K]=e[K].join(", ")),"typeKeywords"===K&&null!==e[K]&&(e[K]=e[K].join(", ")),
"extent"===K&&e[K]&&(e[K]=JSON.stringify(e[K]));return e}};g.__decorate([d.property({type:["private","shared","org","public"]})],F.prototype,"access",void 0);g.__decorate([d.property()],F.prototype,"accessInformation",void 0);g.__decorate([d.property({type:String})],F.prototype,"apiKey",void 0);g.__decorate([d.property({json:{read:{source:"appProxies"}}})],F.prototype,"applicationProxies",void 0);g.__decorate([d.property()],F.prototype,"avgRating",void 0);g.__decorate([d.property()],F.prototype,"categories",
void 0);g.__decorate([d.property({type:Date})],F.prototype,"created",void 0);g.__decorate([d.property()],F.prototype,"culture",void 0);g.__decorate([d.property()],F.prototype,"description",void 0);g.__decorate([d.property({readOnly:!0})],F.prototype,"displayName",null);g.__decorate([d.property({type:I})],F.prototype,"extent",void 0);g.__decorate([z.reader("extent")],F.prototype,"readExtent",null);g.__decorate([d.property()],F.prototype,"groupCategories",void 0);g.__decorate([d.property({readOnly:!0})],
F.prototype,"iconUrl",null);g.__decorate([d.property()],F.prototype,"id",void 0);g.__decorate([d.property({readOnly:!0})],F.prototype,"isLayer",null);g.__decorate([d.property({type:Boolean,readOnly:!0})],F.prototype,"isOrgItem",void 0);g.__decorate([d.property()],F.prototype,"itemControl",void 0);g.__decorate([d.property({readOnly:!0})],F.prototype,"itemPageUrl",null);g.__decorate([d.property({readOnly:!0})],F.prototype,"itemUrl",null);g.__decorate([d.property()],F.prototype,"licenseInfo",void 0);
g.__decorate([d.property({type:Date})],F.prototype,"modified",void 0);g.__decorate([d.property()],F.prototype,"name",void 0);g.__decorate([d.property()],F.prototype,"numComments",void 0);g.__decorate([d.property()],F.prototype,"numRatings",void 0);g.__decorate([d.property()],F.prototype,"numViews",void 0);g.__decorate([d.property()],F.prototype,"owner",void 0);g.__decorate([d.property()],F.prototype,"ownerFolder",void 0);g.__decorate([d.property({type:t})],F.prototype,"portal",void 0);g.__decorate([d.property()],
F.prototype,"screenshots",void 0);g.__decorate([d.property()],F.prototype,"size",void 0);g.__decorate([d.property()],F.prototype,"snippet",void 0);g.__decorate([d.property()],F.prototype,"sourceJSON",void 0);g.__decorate([d.property({type:String})],F.prototype,"sourceUrl",void 0);g.__decorate([d.property({type:String})],F.prototype,"spatialReference",void 0);g.__decorate([d.property()],F.prototype,"tags",void 0);g.__decorate([d.property()],F.prototype,"thumbnail",void 0);g.__decorate([d.property({readOnly:!0})],
F.prototype,"thumbnailUrl",null);g.__decorate([d.property()],F.prototype,"title",void 0);g.__decorate([d.property()],F.prototype,"type",void 0);g.__decorate([d.property()],F.prototype,"typeKeywords",void 0);g.__decorate([d.property({type:String,json:{read(e,K){P.has(K.type)&&(K=this.portal?.restUrl,e||=K&&this.id?`${K}/content/items/${this.id}/data`:null);return e}}})],F.prototype,"url",void 0);g.__decorate([d.property({readOnly:!0})],F.prototype,"userItemUrl",null);return F=n=g.__decorate([D.subclass("esri.portal.PortalItem")],
F)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(c,g,y,w,F,B,f,p,d,r,z){function D(I,t){if(null==I)return I;I=I.replace(/^\/+/,"");null!=t&&B.isAbsolute(I)&&(I=B.makeRelative(I,t.itemUrl));return I?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,
"")}y=class extends y{constructor(I){super(I);this.portalItem=null}normalizeCtorArgs(I){return I?.portalItem&&I.path?{...I,path:D(I.path,I.portalItem)}:I}set path(I){null!=I&&B.isAbsolute(I)?F.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",I)}_castPath(I){return D(I,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?
`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(I="json",t){const q=this.cdnUrl;if(null==q)throw new w("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(q,{responseType:I,query:{token:this.portalItem.apiKey},signal:t?.signal})}async update(I,t){const {addOrUpdateResources:q}=await new Promise((a,u)=>c(["./support/resourceUtils"],
a,u));await q(this.portalItem,[{resource:this,content:I,compress:t?.compress,access:t?.access}],"update",t);return this}hasPath(){return null!=this.path}};g.__decorate([f.property()],y.prototype,"portalItem",void 0);g.__decorate([f.property({type:String,value:null})],y.prototype,"path",null);g.__decorate([p.cast("path")],y.prototype,"_castPath",null);g.__decorate([f.property({type:String,readOnly:!0})],y.prototype,"url",null);g.__decorate([f.property({type:String,readOnly:!0})],y.prototype,"cdnUrl",
null);g.__decorate([f.property({type:String,readOnly:!0})],y.prototype,"itemRelativeUrl",null);return y=g.__decorate([z.subclass("esri.portal.PortalItemResource")],y)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),function(c,g,y,w,F,B,f){g=class extends g{constructor(p){super(p);this.rating=this.created=null}};c.__decorate([y.property()],
g.prototype,"created",void 0);c.__decorate([y.property()],g.prototype,"rating",void 0);return g=c.__decorate([f.subclass("esri.portal.PortalRating")],g)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils","../portal/support/urlUtils"],function(c,g,y,w){function F(n,C){var P=C?.url?.path;n&&P&&(n=y.makeAbsolute(n,P,{preserveProtocolRelative:!0}),C.portalItem&&C.readResourcePaths&&(P=y.makeRelative(n,C.portalItem.itemUrl),null!=P&&a.test(P)&&C.readResourcePaths.push(C.portalItem.resourceFromPath(P).path)));
return(n=D(n,C?.portal))&&q.test(n)?I(n):n}function B(n,C,P=c.MarkKeep.YES){n=n&&q.test(n)?t(n):n;if(null==n)return n;!y.isAbsolute(n)&&C?.blockedRelativeUrls&&C.blockedRelativeUrls.push(n);let e=y.makeAbsolute(n);if(C){var K=C.verifyItemRelativeUrls?.rootPath||C.url?.path;if(K){K=D(K,C.portal);const Q=D(e,C.portal);e=y.makeRelative(Q,K,K);null!=e&&e!==Q&&e!==n&&C.verifyItemRelativeUrls&&C.verifyItemRelativeUrls.writtenUrls.push(e)}}e=z(e,C?.portal);y.isAbsolute(e)&&(e=y.normalize(e));C?.resources&&
C?.portalItem&&!y.isAbsolute(e)&&!y.isDataProtocol(e)&&P===c.MarkKeep.YES&&C.resources.toKeep.push({resource:C.portalItem.resourceFromPath(e),compress:!1});return e}function f(n,C,P){return F(n,P)}function p(n,C,P,e){n=B(n,e);void 0!==n&&(C[P]=n)}function d(n){return(n?.match(q)??null)?.[1]??null}function r(n){n=n?.match(q)??null;if(null==n)return null;n=n[2];const C=n.lastIndexOf("/");if(-1===C){const {path:K,extension:Q}=y.splitPathExtension(n);return{prefix:null,filename:K,extension:Q}}const {path:P,
extension:e}=y.splitPathExtension(n.slice(C+1));return{prefix:n.slice(0,C),filename:P,extension:e}}function z(n,C){return C&&!C.isPortal&&C.urlKey&&C.customBaseUrl?y.changeDomain(n,`${C.urlKey}.${C.customBaseUrl}`,C.portalHostname):n}function D(n,C){if(!C||C.isPortal||!C.urlKey||!C.customBaseUrl)return n;const P=`${C.urlKey}.${C.customBaseUrl}`,e=y.getAppUrl();return y.hasSameOrigin(e,`${e.scheme}://${P}`)?y.changeDomain(n,C.portalHostname,P):y.changeDomain(n,P,C.portalHostname)}function I(n){if(!n)return n||
null;n&&g.id&&!g.id.findCredential(n)&&(n=w.normalizeArcGISOnlineOrgDomain(n),n=n.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),n=n.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),n=n.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return n}function t(n){if(!n)return n||null;n=n.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");n=n.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(n=n.replace(/^https?:\/\/cdnqa\.arcgis\.com/,
"https://qaext.arcgis.com"))&&g.id&&!g.id.findCredential(n)&&(n=w.normalizeArcGISOnlineOrgDomain(n));return n}const q=/\/items\/([^/]+)\/resources\/(.*)/,a=/^\.\/resources\//;c.MarkKeep=void 0;(function(n){n[n.YES=0]="YES";n[n.NO=1]="NO"})(c.MarkKeep||(c.MarkKeep={}));const u=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return c.MarkKeep},ensureMainOnlineDomain:z,fromCDNUrl:t,fromJSON:F,itemIdFromResourceUrl:d,prefixAndFilenameFromResourceUrl:r,read:f,toCDNUrl:I,toJSON:B,write:p},
Symbol.toStringTag,{value:"Module"}));c.ensureMainOnlineDomain=z;c.fromCDNUrl=t;c.fromJSON=F;c.itemIdFromResourceUrl=d;c.persistableUrlUtils=u;c.prefixAndFilenameFromResourceUrl=r;c.read=f;c.toCDNUrl=I;c.toJSON=B;c.write=p})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(c,g,y){c.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},
{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",
title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",
title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",
visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",
styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-night.jpg")},
baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",
styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",
visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",
title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",
title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",
layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},
{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",
title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};c.getBasemapTitle=async function(w){if(w){var F=w.includes("-vector")?w.slice(0,w.indexOf("-vector")):
w.includes("-3d")?w.slice(0,w.indexOf("-3d")):w,B=await y.fetchMessageBundle("esri/t9n/basemaps");return B[w]||B[F]}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(c,g,y,w,F,B,f,p){const d=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
g=class extends g{constructor(r){super(r);this.places=this.language=this.id=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var r=p.getLocale().toLowerCase();switch(r){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}r=p.getLanguage(r);return"pt"===r?"pt-BR":r&&d.has(r)?r:"global"}};
c.__decorate([y.property()],g.prototype,"id",void 0);c.__decorate([y.property()],g.prototype,"language",void 0);c.__decorate([y.property()],g.prototype,"places",void 0);c.__decorate([y.property()],g.prototype,"serviceUrl",void 0);c.__decorate([y.property()],g.prototype,"worldview",void 0);return g=c.__decorate([f.subclass("esri.support.BasemapStyle")],g)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(c,g,y,w,F,B){function f(r,z){"maxScale"in r&&(z.maxScale=F.numberToJSON(r.maxScale)??void 0);"minScale"in r&&(z.minScale=F.numberToJSON(r.minScale)??void 0)}const p=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),d=new Set("catalog csv feature geo-rss geojson group imagery imagery-tile kml knowledge-graph map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
c.disableRestrictedWriting=function(r){p.add(r);d.add(r)};c.enableRestrictedWriting=function(r){p.delete(r);d.delete(r)};c.getLayerJSON=function(r,z,D){if(!r.persistenceEnabled)return null;if(!("write"in r&&r.write))return D?.messages&&D.messages.push(new g("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted`,{layer:r})),null;if(B.isFeatureCollectionLayer(r)&&!r.isTable)z=r.resourceInfo;else{if(D.restrictedWebMapWriting){var I="basemap"===D.layerContainerType?
p:"operational-layers"===D.layerContainerType?d:null;I=null!=I?I.has(r.type)&&!B.isFeatureCollectionLayer(r):!0}else I=!0;if(I)return z={},r.write(z,D)?z:null}if(null!=z){z=y.clone(z);if(D=z)B.isFeatureCollectionLayer(r)?(I=w.getDeepValue("featureCollection.layers",D)?.[0]?.layerDefinition)&&f(r,I):"group"!==r.type&&f(r,D);if(D&&(D.id=r.id,"blendMode"in r&&(D.blendMode=r.blendMode,"normal"===D.blendMode&&delete D.blendMode),D.opacity=F.numberToJSON(r.opacity)??void 0,D.title=r.title||"Layer",D.visibility=
r.visible,"legendEnabled"in r&&"wmts"!==r.type))if(B.isFeatureCollectionLayer(r)){if(D=D.featureCollection)D.showLegend=r.legendEnabled}else D.showLegend=r.legendEnabled}return z};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(c,g,y){function w(B){return"scene"===B?.type}function F(B){B=B?.type;return"imagery-tile"===B||"tile"===B||"open-street-map"===B||"vector-tile"===B||"web-tile"===
B||"wmts"===B}c.getEffectiveEditingEnabled=function(B){a:if("editingEnabled"in B)switch(B.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var f=!0;break a;default:f=!1}else f=!1;return f?"effectiveEditingEnabled"in B?B.effectiveEditingEnabled:B.editingEnabled:!1};c.getEffectiveLayerCapabilities=function(B){a:if("capabilities"in B)switch(B.type){case "catalog":case "catalog-footprint":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "sublayer":case "subtype-group":case "subtype-sublayer":case "wfs":var f=
!0;break a;default:f=!1}else f=!1;return f?"effectiveCapabilities"in B?B.effectiveCapabilities:B.capabilities:null};c.getOwningPortalUrl=async function(B,f){var p=g.id?.findServerInfo(B);if(null!=p?.currentVersion)return p.owningSystemUrl||null;p=B.toLowerCase().indexOf("/rest/services");if(-1===p)return null;B=`${B.substring(0,p)}/rest/info`;({data:f}=await y(B,{query:{f:"json"},responseType:"json",signal:null!=f?f.signal:null}));return f?.owningSystemUrl||null};c.getTileMaxtrixSetFromActiveLayer=
function(B){if(B.activeLayer){const f=B.activeLayer.tileMatrixSet;if(f)return f;if(B=B.activeLayer.tileMatrixSets)return B}return null};c.isBaseLayer=function(B){return null!=B?.parent&&"declaredClass"in B.parent&&"esri.Basemap"===B.parent.declaredClass&&B.parent.baseLayers.includes(B)};c.isBasemap3DSupportedLayer=function(B){return F(B)||w(B)};c.isBasemapSupportedTiledLayer=F;c.isFeatureCollectionLayer=function(B){return"feature"===B?.type&&!B.url&&"memory"===B.source?.type};c.isFeatureLayer=function(B){return null!=
B&&"object"===typeof B&&"type"in B&&"feature"===B.type};c.isFeatureServiceLayer=function(B){return"feature"===B?.type&&"feature-layer"===B.source?.type};c.isGraphicsLayer=function(B){return null!=B&&"object"===typeof B&&"type"in B&&"graphics"===B.type};c.isGroupLayer=function(B){return null!=B&&"type"in B&&"group"===B.type};c.isImageryTileLayer=function(B){return"imagery-tile"===B?.type};c.isIntegratedMeshLayer=function(B){return"integrated-mesh"===B||"integrated-mesh-3dtiles"===B};c.isIntegratedMeshOperationalLayer=
function(B){return"IntegratedMeshLayer"===B||"IntegratedMesh3DTilesLayer"===B};c.isKnowledgeGraphLayer=function(B){return null!=B&&"object"===typeof B&&"type"in B&&"knowledge-graph"===B.type&&"layers"in B};c.isLayerWithFeatureLayerSource=function(B){return("feature"===B?.type||"subtype-group"===B?.type)&&"feature-layer"===B.source?.type};c.isLinkChartLayer=function(B){return null!=B&&"object"===typeof B&&"type"in B&&"link-chart"===B.type&&"layers"in B};c.isMapNotesLayer=function(B){return null!=B&&
"object"===typeof B&&"type"in B&&"map-notes"===B.type&&"sublayers"in B};c.isSceneLayer=w;c.isSceneServiceLayer=function(B){B=B?.type;return"building-scene"===B||"integrated-mesh"===B||"point-cloud"===B||"scene"===B};c.isSubtypeGroupLayer=function(B){return null!=B&&"object"===typeof B&&"type"in B&&"subtype-group"===B.type&&"sublayers"in B};c.isSubtypeSublayer=function(B){return"subtype-sublayer"===B?.type};c.isTable=function(B){return null!=B&&"object"===typeof B&&"isTable"in B&&!!B.isTable};c.isTiledLayer=
function(B){B=B?.type;return"base-tile"===B||"tile"===B||"elevation"===B||"imagery-tile"===B||"base-elevation"===B||"open-street-map"===B||"wcs"===B||"web-tile"===B||"wmts"===B||"vector-tile"===B};c.isVoxelLayer=function(B){return"voxel"===B?.type};c.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};c.serializeLayerDefinitions=function(B){const f=/[:;]/,p=[];let d=!1;if(B&&(B.forEach((r,
z)=>{p.push([z,r]);!d&&f.test(r)&&(d=!0)}),0<p.length)){if(d){const r={};p.forEach(z=>{r[z[0]]=z[1]});B=JSON.stringify(r)}else{const r=[];p.forEach(z=>{r.push(z[0]+":"+z[1])});B=r.join(";")}return B}return null};c.serializeTimeOptions=function(B){if(B){var f=[];B.forEach((p,d)=>{f.push('"'+d+'":'+JSON.stringify(p))});if(f.length)return"{"+f.join(",")+"}"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(c,
g){c.canInterpolateEffects=function(y,w){const F=y.length>w.length?y:w;return(y.length>w.length?w:y).every((B,f)=>B.type===F[f].type)};c.effectEquals=function(y,w){y=JSON.stringify(y??null);w=JSON.stringify(w??null);return y===w};c.isEffectFunctions=function(y){return(y=y[0])?"type"in y:!1};c.normalizeEffects=function(y,w){const F=y.length>w.length?y:w;y=y.length>w.length?w:y;for(w=y.length;w<F.length;w++)y.push(g.createEffectWithInitialValues(F[w]))};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/effects/effects":function(){define(["exports","../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(c,g,y,w,F){function B(t,q,a){return t+(q-t)*a}function f(t){return Math.round(1E3*y.px2pt(t))/1E3}class p{constructor(t,q,a){this.strength=t;this.radius=q;this.threshold=a;this.type="bloom"}interpolate(t,q,a){this.strength=B(t.strength,q.strength,a);this.radius=B(t.radius,q.radius,a);this.threshold=B(t.threshold,q.threshold,
a)}clone(){return new p(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:f(this.radius),strength:this.strength,threshold:this.threshold}}}class d{constructor(t){this.radius=t;this.type="blur"}interpolate(t,q,a){this.radius=Math.round(B(t.radius,q.radius,a))}clone(){return new d(this.radius)}toJSON(){return{type:"blur",radius:f(this.radius)}}}class r{constructor(t,q){this.type=t;this.amount=q;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=
Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(t,q,a){this.amount=B(t.amount,q.amount,a);this._updateMatrix()}clone(){return new r(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||w.create();switch(this.type){case "brightness":this._colorMatrix=F.brightness(t,this.amount);break;case "contrast":this._colorMatrix=F.contrast(t,this.amount);break;case "grayscale":this._colorMatrix=
F.grayscale(t,this.amount);break;case "invert":this._colorMatrix=F.invert(t,this.amount);break;case "saturate":this._colorMatrix=F.saturate(t,this.amount);break;case "sepia":this._colorMatrix=F.sepia(t,this.amount)}}}class z{constructor(t,q,a,u){this.offsetX=t;this.offsetY=q;this.blurRadius=a;this.color=u;this.type="drop-shadow"}interpolate(t,q,a){this.offsetX=B(t.offsetX,q.offsetX,a);this.offsetY=B(t.offsetY,q.offsetY,a);this.blurRadius=B(t.blurRadius,q.blurRadius,a);this.color[0]=Math.round(B(t.color[0],
q.color[0],a));this.color[1]=Math.round(B(t.color[1],q.color[1],a));this.color[2]=Math.round(B(t.color[2],q.color[2],a));this.color[3]=B(t.color[3],q.color[3],a)}clone(){return new z(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];t[3]*=255;return{type:"drop-shadow",xoffset:f(this.offsetX),yoffset:f(this.offsetY),blurRadius:f(this.blurRadius),color:t}}}class D{constructor(t){this.angle=t;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();
return this._colorMatrix}interpolate(t,q,a){this.angle=B(t.angle,q.angle,a);this._updateMatrix()}clone(){return new D(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||w.create();this._colorMatrix=F.rotateHue(t,this.angle)}}class I{constructor(t){this.amount=t;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(t,q,a){this.amount=B(t.amount,q.amount,a)}clone(){return new I(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}
c.BloomEffect=p;c.BlurEffect=d;c.ColorMatrixEffect=r;c.DropShadowEffect=z;c.HueRotateEffect=D;c.OpacityEffect=I;c.createEffectWithInitialValues=function(t){switch(t.type){case "grayscale":case "sepia":case "invert":return new r(t.type,0);case "saturate":case "brightness":case "contrast":return new r(t.type,1);case "opacity":return new I(1);case "hue-rotate":return new D(0);case "blur":return new d(0);case "drop-shadow":return new z(0,0,0,[...g.getNamedColor("transparent")]);case "bloom":return new p(0,
0,1)}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(c){function g(){const p=new Float32Array(16);p[0]=1;p[5]=1;p[10]=1;p[15]=1;return p}function y(p){const d=new Float32Array(16);d[0]=p[0];d[1]=p[1];d[2]=p[2];d[3]=p[3];d[4]=p[4];d[5]=p[5];d[6]=p[6];d[7]=p[7];d[8]=p[8];d[9]=p[9];d[10]=p[10];d[11]=p[11];d[12]=p[12];d[13]=p[13];d[14]=p[14];d[15]=p[15];return d}function w(p,d,r,z,D,I,t,q,a,u,n,C,P,
e,K,Q){const S=new Float32Array(16);S[0]=p;S[1]=d;S[2]=r;S[3]=z;S[4]=D;S[5]=I;S[6]=t;S[7]=q;S[8]=a;S[9]=u;S[10]=n;S[11]=C;S[12]=P;S[13]=e;S[14]=K;S[15]=Q;return S}function F(p,d){return new Float32Array(p,d,16)}const B=g(),f=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:B,clone:y,create:g,createView:F,fromValues:w},Symbol.toStringTag,{value:"Module"}));c.IDENTITY=B;c.clone=y;c.create=g;c.createView=F;c.fromValues=w;c.mat4f32=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/effects/colorMatrixFunctions":function(){define(["exports","../../core/libs/gl-matrix-2/math/mat4"],function(c,g){c.brightness=(y,w)=>{y=g.set(y,w,0,0,0,0,w,0,0,0,0,w,0,0,0,0,1);return g.transpose(y,y)};c.contrast=(y,w)=>{y=g.set(y,w,0,0,.5-.5*w,0,w,0,.5-.5*w,0,0,w,.5-.5*w,0,0,0,1);return g.transpose(y,y)};c.grayscale=(y,w)=>{w=1-w;y=g.set(y,.2126+.7874*w,.7152-.7152*w,.0722-.0722*w,0,.2126-.2126*w,.7152+.2848*w,.0722-.0722*w,0,.2126-.2126*w,.7152-.7152*w,.0722+.9278*w,0,0,0,0,1);return g.transpose(y,
y)};c.invert=(y,w)=>{const F=1-2*w;y=g.set(y,F,0,0,w,0,F,0,w,0,0,F,w,0,0,0,1);return g.transpose(y,y)};c.rotateHue=(y,w)=>{const F=Math.sin(w*Math.PI/180);w=Math.cos(w*Math.PI/180);y=g.set(y,.213+.787*w-.213*F,.715-.715*w-.715*F,.072-.072*w+.928*F,0,.213-.213*w+.143*F,.715+.285*w+.14*F,.072-.072*w-.283*F,0,.213-.213*w-.787*F,.715-.715*w+.715*F,.072+.928*w+.072*F,0,0,0,0,1);return g.transpose(y,y)};c.saturate=(y,w)=>{y=g.set(y,.213+.787*w,.715-.715*w,.072-.072*w,0,.213-.213*w,.715+.285*w,.072-.072*
w,0,.213-.213*w,.715-.715*w,.072+.928*w,0,0,0,0,1);return g.transpose(y,y)};c.sepia=(y,w)=>{w=1-w;y=g.set(y,.393+.607*w,.769-.769*w,.189-.189*w,0,.349-.349*w,.686+.314*w,.168-.168*w,0,.272-.272*w,.534-.534*w,.131+.869*w,0,0,0,0,1);return g.transpose(y,y)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(c,g,y){function w(k,E){k[0]=E[0];k[1]=E[1];k[2]=E[2];k[3]=E[3];k[4]=E[4];
k[5]=E[5];k[6]=E[6];k[7]=E[7];k[8]=E[8];k[9]=E[9];k[10]=E[10];k[11]=E[11];k[12]=E[12];k[13]=E[13];k[14]=E[14];k[15]=E[15];return k}function F(k,E,Y,aa,ja,A,J,M,V,Z,ca,fa,la,ma,ua,pa,sa){k[0]=E;k[1]=Y;k[2]=aa;k[3]=ja;k[4]=A;k[5]=J;k[6]=M;k[7]=V;k[8]=Z;k[9]=ca;k[10]=fa;k[11]=la;k[12]=ma;k[13]=ua;k[14]=pa;k[15]=sa;return k}function B(k){k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=1;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=1;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k}function f(k,E){if(k===E){const Y=E[1],
aa=E[2],ja=E[3],A=E[6],J=E[7],M=E[11];k[1]=E[4];k[2]=E[8];k[3]=E[12];k[4]=Y;k[6]=E[9];k[7]=E[13];k[8]=aa;k[9]=A;k[11]=E[14];k[12]=ja;k[13]=J;k[14]=M}else k[0]=E[0],k[1]=E[4],k[2]=E[8],k[3]=E[12],k[4]=E[1],k[5]=E[5],k[6]=E[9],k[7]=E[13],k[8]=E[2],k[9]=E[6],k[10]=E[10],k[11]=E[14],k[12]=E[3],k[13]=E[7],k[14]=E[11],k[15]=E[15];return k}function p(k,E){d(k,E)||B(k);return k}function d(k,E){const Y=E[0],aa=E[1],ja=E[2],A=E[3],J=E[4],M=E[5],V=E[6],Z=E[7],ca=E[8],fa=E[9],la=E[10],ma=E[11],ua=E[12],pa=E[13],
sa=E[14];E=E[15];const Ca=Y*M-aa*J,xa=Y*V-ja*J,Ba=Y*Z-A*J,Aa=aa*V-ja*M,ya=aa*Z-A*M,Ia=ja*Z-A*V,Qa=ca*pa-fa*ua,Ya=ca*sa-la*ua,Wa=ca*E-ma*ua,Ja=fa*sa-la*pa,Ka=fa*E-ma*pa,ka=la*E-ma*sa;let Ra=Ca*ka-xa*Ka+Ba*Ja+Aa*Wa-ya*Ya+Ia*Qa;if(!Ra)return null;Ra=1/Ra;k[0]=(M*ka-V*Ka+Z*Ja)*Ra;k[1]=(ja*Ka-aa*ka-A*Ja)*Ra;k[2]=(pa*Ia-sa*ya+E*Aa)*Ra;k[3]=(la*ya-fa*Ia-ma*Aa)*Ra;k[4]=(V*Wa-J*ka-Z*Ya)*Ra;k[5]=(Y*ka-ja*Wa+A*Ya)*Ra;k[6]=(sa*Ba-ua*Ia-E*xa)*Ra;k[7]=(ca*Ia-la*Ba+ma*xa)*Ra;k[8]=(J*Ka-M*Wa+Z*Qa)*Ra;k[9]=(aa*Wa-
Y*Ka-A*Qa)*Ra;k[10]=(ua*ya-pa*Ba+E*Ca)*Ra;k[11]=(fa*Ba-ca*ya-ma*Ca)*Ra;k[12]=(M*Ya-J*Ja-V*Qa)*Ra;k[13]=(Y*Ja-aa*Ya+ja*Qa)*Ra;k[14]=(pa*xa-ua*Aa-sa*Ca)*Ra;k[15]=(ca*Aa-fa*xa+la*Ca)*Ra;return k}function r(k,E){const Y=E[0],aa=E[1],ja=E[2],A=E[3],J=E[4],M=E[5],V=E[6],Z=E[7],ca=E[8],fa=E[9],la=E[10],ma=E[11],ua=E[12],pa=E[13],sa=E[14];E=E[15];k[0]=M*(la*E-ma*sa)-fa*(V*E-Z*sa)+pa*(V*ma-Z*la);k[1]=-(aa*(la*E-ma*sa)-fa*(ja*E-A*sa)+pa*(ja*ma-A*la));k[2]=aa*(V*E-Z*sa)-M*(ja*E-A*sa)+pa*(ja*Z-A*V);k[3]=-(aa*
(V*ma-Z*la)-M*(ja*ma-A*la)+fa*(ja*Z-A*V));k[4]=-(J*(la*E-ma*sa)-ca*(V*E-Z*sa)+ua*(V*ma-Z*la));k[5]=Y*(la*E-ma*sa)-ca*(ja*E-A*sa)+ua*(ja*ma-A*la);k[6]=-(Y*(V*E-Z*sa)-J*(ja*E-A*sa)+ua*(ja*Z-A*V));k[7]=Y*(V*ma-Z*la)-J*(ja*ma-A*la)+ca*(ja*Z-A*V);k[8]=J*(fa*E-ma*pa)-ca*(M*E-Z*pa)+ua*(M*ma-Z*fa);k[9]=-(Y*(fa*E-ma*pa)-ca*(aa*E-A*pa)+ua*(aa*ma-A*fa));k[10]=Y*(M*E-Z*pa)-J*(aa*E-A*pa)+ua*(aa*Z-A*M);k[11]=-(Y*(M*ma-Z*fa)-J*(aa*ma-A*fa)+ca*(aa*Z-A*M));k[12]=-(J*(fa*sa-la*pa)-ca*(M*sa-V*pa)+ua*(M*la-V*fa));k[13]=
Y*(fa*sa-la*pa)-ca*(aa*sa-ja*pa)+ua*(aa*la-ja*fa);k[14]=-(Y*(M*sa-V*pa)-J*(aa*sa-ja*pa)+ua*(aa*V-ja*M));k[15]=Y*(M*la-V*fa)-J*(aa*la-ja*fa)+ca*(aa*V-ja*M);return k}function z(k){const E=k[0],Y=k[1],aa=k[2],ja=k[3],A=k[4],J=k[5],M=k[6],V=k[7],Z=k[8],ca=k[9],fa=k[10],la=k[11],ma=k[12],ua=k[13],pa=k[14];k=k[15];return(E*J-Y*A)*(fa*k-la*pa)-(E*M-aa*A)*(ca*k-la*ua)+(E*V-ja*A)*(ca*pa-fa*ua)+(Y*M-aa*J)*(Z*k-la*ma)-(Y*V-ja*J)*(Z*pa-fa*ma)+(aa*V-ja*M)*(Z*ua-ca*ma)}function D(k,E,Y){const aa=E[0],ja=E[1],A=
E[2],J=E[3],M=E[4],V=E[5],Z=E[6],ca=E[7],fa=E[8],la=E[9],ma=E[10],ua=E[11],pa=E[12],sa=E[13],Ca=E[14];E=E[15];let xa=Y[0],Ba=Y[1],Aa=Y[2],ya=Y[3];k[0]=xa*aa+Ba*M+Aa*fa+ya*pa;k[1]=xa*ja+Ba*V+Aa*la+ya*sa;k[2]=xa*A+Ba*Z+Aa*ma+ya*Ca;k[3]=xa*J+Ba*ca+Aa*ua+ya*E;xa=Y[4];Ba=Y[5];Aa=Y[6];ya=Y[7];k[4]=xa*aa+Ba*M+Aa*fa+ya*pa;k[5]=xa*ja+Ba*V+Aa*la+ya*sa;k[6]=xa*A+Ba*Z+Aa*ma+ya*Ca;k[7]=xa*J+Ba*ca+Aa*ua+ya*E;xa=Y[8];Ba=Y[9];Aa=Y[10];ya=Y[11];k[8]=xa*aa+Ba*M+Aa*fa+ya*pa;k[9]=xa*ja+Ba*V+Aa*la+ya*sa;k[10]=xa*A+Ba*
Z+Aa*ma+ya*Ca;k[11]=xa*J+Ba*ca+Aa*ua+ya*E;xa=Y[12];Ba=Y[13];Aa=Y[14];ya=Y[15];k[12]=xa*aa+Ba*M+Aa*fa+ya*pa;k[13]=xa*ja+Ba*V+Aa*la+ya*sa;k[14]=xa*A+Ba*Z+Aa*ma+ya*Ca;k[15]=xa*J+Ba*ca+Aa*ua+ya*E;return k}function I(k,E,Y){const aa=Y[0],ja=Y[1];Y=Y[2];if(E===k)k[12]=E[0]*aa+E[4]*ja+E[8]*Y+E[12],k[13]=E[1]*aa+E[5]*ja+E[9]*Y+E[13],k[14]=E[2]*aa+E[6]*ja+E[10]*Y+E[14],k[15]=E[3]*aa+E[7]*ja+E[11]*Y+E[15];else{const A=E[0],J=E[1],M=E[2],V=E[3],Z=E[4],ca=E[5],fa=E[6],la=E[7],ma=E[8],ua=E[9],pa=E[10],sa=E[11];
k[0]=A;k[1]=J;k[2]=M;k[3]=V;k[4]=Z;k[5]=ca;k[6]=fa;k[7]=la;k[8]=ma;k[9]=ua;k[10]=pa;k[11]=sa;k[12]=A*aa+Z*ja+ma*Y+E[12];k[13]=J*aa+ca*ja+ua*Y+E[13];k[14]=M*aa+fa*ja+pa*Y+E[14];k[15]=V*aa+la*ja+sa*Y+E[15]}return k}function t(k,E,Y){const aa=Y[0],ja=Y[1];Y=Y[2];k[0]=E[0]*aa;k[1]=E[1]*aa;k[2]=E[2]*aa;k[3]=E[3]*aa;k[4]=E[4]*ja;k[5]=E[5]*ja;k[6]=E[6]*ja;k[7]=E[7]*ja;k[8]=E[8]*Y;k[9]=E[9]*Y;k[10]=E[10]*Y;k[11]=E[11]*Y;k[12]=E[12];k[13]=E[13];k[14]=E[14];k[15]=E[15];return k}function q(k,E,Y,aa){let ja=
aa[0],A=aa[1];aa=aa[2];let J=Math.sqrt(ja*ja+A*A+aa*aa);var M=void 0,V=void 0;let Z=void 0,ca=void 0,fa=void 0,la=void 0,ma=void 0,ua=void 0,pa=void 0,sa=void 0,Ca=void 0,xa=void 0,Ba=void 0,Aa=void 0,ya=void 0,Ia=void 0,Qa=void 0,Ya=void 0,Wa=void 0,Ja=void 0,Ka=void 0,ka=void 0;V=M=void 0;if(J<y.getEpsilon())return null;J=1/J;ja*=J;A*=J;aa*=J;M=Math.sin(Y);V=Math.cos(Y);Z=1-V;ca=E[0];fa=E[1];la=E[2];ma=E[3];ua=E[4];pa=E[5];sa=E[6];Ca=E[7];xa=E[8];Ba=E[9];Aa=E[10];ya=E[11];Ia=ja*ja*Z+V;Qa=A*ja*Z+
aa*M;Ya=aa*ja*Z-A*M;Wa=ja*A*Z-aa*M;Ja=A*A*Z+V;Ka=aa*A*Z+ja*M;ka=ja*aa*Z+A*M;M=A*aa*Z-ja*M;V=aa*aa*Z+V;k[0]=ca*Ia+ua*Qa+xa*Ya;k[1]=fa*Ia+pa*Qa+Ba*Ya;k[2]=la*Ia+sa*Qa+Aa*Ya;k[3]=ma*Ia+Ca*Qa+ya*Ya;k[4]=ca*Wa+ua*Ja+xa*Ka;k[5]=fa*Wa+pa*Ja+Ba*Ka;k[6]=la*Wa+sa*Ja+Aa*Ka;k[7]=ma*Wa+Ca*Ja+ya*Ka;k[8]=ca*ka+ua*M+xa*V;k[9]=fa*ka+pa*M+Ba*V;k[10]=la*ka+sa*M+Aa*V;k[11]=ma*ka+Ca*M+ya*V;E!==k&&(k[12]=E[12],k[13]=E[13],k[14]=E[14],k[15]=E[15]);return k}function a(k,E,Y){const aa=Math.sin(Y);Y=Math.cos(Y);const ja=E[4],
A=E[5],J=E[6],M=E[7],V=E[8],Z=E[9],ca=E[10],fa=E[11];E!==k&&(k[0]=E[0],k[1]=E[1],k[2]=E[2],k[3]=E[3],k[12]=E[12],k[13]=E[13],k[14]=E[14],k[15]=E[15]);k[4]=ja*Y+V*aa;k[5]=A*Y+Z*aa;k[6]=J*Y+ca*aa;k[7]=M*Y+fa*aa;k[8]=V*Y-ja*aa;k[9]=Z*Y-A*aa;k[10]=ca*Y-J*aa;k[11]=fa*Y-M*aa;return k}function u(k,E,Y){const aa=Math.sin(Y);Y=Math.cos(Y);const ja=E[0],A=E[1],J=E[2],M=E[3],V=E[8],Z=E[9],ca=E[10],fa=E[11];E!==k&&(k[4]=E[4],k[5]=E[5],k[6]=E[6],k[7]=E[7],k[12]=E[12],k[13]=E[13],k[14]=E[14],k[15]=E[15]);k[0]=
ja*Y-V*aa;k[1]=A*Y-Z*aa;k[2]=J*Y-ca*aa;k[3]=M*Y-fa*aa;k[8]=ja*aa+V*Y;k[9]=A*aa+Z*Y;k[10]=J*aa+ca*Y;k[11]=M*aa+fa*Y;return k}function n(k,E,Y){const aa=Math.sin(Y);Y=Math.cos(Y);const ja=E[0],A=E[1],J=E[2],M=E[3],V=E[4],Z=E[5],ca=E[6],fa=E[7];E!==k&&(k[8]=E[8],k[9]=E[9],k[10]=E[10],k[11]=E[11],k[12]=E[12],k[13]=E[13],k[14]=E[14],k[15]=E[15]);k[0]=ja*Y+V*aa;k[1]=A*Y+Z*aa;k[2]=J*Y+ca*aa;k[3]=M*Y+fa*aa;k[4]=V*Y-ja*aa;k[5]=Z*Y-A*aa;k[6]=ca*Y-J*aa;k[7]=fa*Y-M*aa;return k}function C(k,E){k[0]=1;k[1]=0;k[2]=
0;k[3]=0;k[4]=0;k[5]=1;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=1;k[11]=0;k[12]=E[0];k[13]=E[1];k[14]=E[2];k[15]=1;return k}function P(k,E){k[0]=E[0];k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=E[1];k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=E[2];k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k}function e(k,E,Y){if(0===E)return B(k);let aa=Y[0],ja=Y[1];Y=Y[2];let A=Math.sqrt(aa*aa+ja*ja+Y*Y),J=void 0,M=void 0,V=void 0;if(A<y.getEpsilon())return null;A=1/A;aa*=A;ja*=A;Y*=A;J=Math.sin(E);M=Math.cos(E);V=1-M;k[0]=aa*aa*V+M;k[1]=
ja*aa*V+Y*J;k[2]=Y*aa*V-ja*J;k[3]=0;k[4]=aa*ja*V-Y*J;k[5]=ja*ja*V+M;k[6]=Y*ja*V+aa*J;k[7]=0;k[8]=aa*Y*V+ja*J;k[9]=ja*Y*V-aa*J;k[10]=Y*Y*V+M;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k}function K(k,E){const Y=Math.sin(E);E=Math.cos(E);k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=E;k[6]=Y;k[7]=0;k[8]=0;k[9]=-Y;k[10]=E;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k}function Q(k,E){const Y=Math.sin(E);E=Math.cos(E);k[0]=E;k[1]=0;k[2]=-Y;k[3]=0;k[4]=0;k[5]=1;k[6]=0;k[7]=0;k[8]=Y;k[9]=0;k[10]=E;k[11]=
0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k}function S(k,E){const Y=Math.sin(E);E=Math.cos(E);k[0]=E;k[1]=Y;k[2]=0;k[3]=0;k[4]=-Y;k[5]=E;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=1;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k}function ba(k,E,Y){var aa=E[0],ja=E[1],A=E[2],J=E[3],M=aa+aa,V=ja+ja;const Z=A+A;E=aa*M;const ca=aa*V;aa*=Z;const fa=ja*V;ja*=Z;A*=Z;M*=J;V*=J;J*=Z;k[0]=1-(fa+A);k[1]=ca+J;k[2]=aa-V;k[3]=0;k[4]=ca-J;k[5]=1-(E+A);k[6]=ja+M;k[7]=0;k[8]=aa+V;k[9]=ja-M;k[10]=1-(E+fa);k[11]=0;k[12]=Y[0];
k[13]=Y[1];k[14]=Y[2];k[15]=1;return k}function W(k,E){const Y=Oa,aa=-E[0],ja=-E[1],A=-E[2],J=E[3],M=E[4],V=E[5],Z=E[6],ca=E[7],fa=aa*aa+ja*ja+A*A+J*J;0<fa?(Y[0]=2*(M*J+ca*aa+V*A-Z*ja)/fa,Y[1]=2*(V*J+ca*ja+Z*aa-M*A)/fa,Y[2]=2*(Z*J+ca*A+M*ja-V*aa)/fa):(Y[0]=2*(M*J+ca*aa+V*A-Z*ja),Y[1]=2*(V*J+ca*ja+Z*aa-M*A),Y[2]=2*(Z*J+ca*A+M*ja-V*aa));ba(k,E,Y);return k}function U(k,E){k[0]=E[12];k[1]=E[13];k[2]=E[14];return k}function v(k,E){const Y=E[0],aa=E[1],ja=E[2],A=E[4],J=E[5],M=E[6],V=E[8],Z=E[9];E=E[10];
k[0]=Math.sqrt(Y*Y+aa*aa+ja*ja);k[1]=Math.sqrt(A*A+J*J+M*M);k[2]=Math.sqrt(V*V+Z*Z+E*E);return k}function H(k,E){const Y=E[0]+E[5]+E[10];let aa=0;0<Y?(aa=2*Math.sqrt(Y+1),k[3]=.25*aa,k[0]=(E[6]-E[9])/aa,k[1]=(E[8]-E[2])/aa,k[2]=(E[1]-E[4])/aa):E[0]>E[5]&&E[0]>E[10]?(aa=2*Math.sqrt(1+E[0]-E[5]-E[10]),k[3]=(E[6]-E[9])/aa,k[0]=.25*aa,k[1]=(E[1]+E[4])/aa,k[2]=(E[8]+E[2])/aa):E[5]>E[10]?(aa=2*Math.sqrt(1+E[5]-E[0]-E[10]),k[3]=(E[8]-E[2])/aa,k[0]=(E[1]+E[4])/aa,k[1]=.25*aa,k[2]=(E[6]+E[9])/aa):(aa=2*Math.sqrt(1+
E[10]-E[0]-E[5]),k[3]=(E[1]-E[4])/aa,k[0]=(E[8]+E[2])/aa,k[1]=(E[6]+E[9])/aa,k[2]=.25*aa);return k}function m(k,E,Y,aa){var ja=E[0],A=E[1],J=E[2],M=E[3],V=ja+ja,Z=A+A,ca=J+J;E=ja*V;const fa=ja*Z;ja*=ca;const la=A*Z;A*=ca;J*=ca;V*=M;Z*=M;M*=ca;ca=aa[0];const ma=aa[1];aa=aa[2];k[0]=(1-(la+J))*ca;k[1]=(fa+M)*ca;k[2]=(ja-Z)*ca;k[3]=0;k[4]=(fa-M)*ma;k[5]=(1-(E+J))*ma;k[6]=(A+V)*ma;k[7]=0;k[8]=(ja+Z)*aa;k[9]=(A-V)*aa;k[10]=(1-(E+la))*aa;k[11]=0;k[12]=Y[0];k[13]=Y[1];k[14]=Y[2];k[15]=1;return k}function h(k,
E,Y,aa,ja){var A=E[0],J=E[1],M=E[2],V=E[3],Z=A+A,ca=J+J,fa=M+M;E=A*Z;var la=A*ca,ma=A*fa;A=J*ca;J*=fa;var ua=M*fa;M=V*Z;ca*=V;const pa=V*fa;var sa=aa[0],Ca=aa[1];fa=aa[2];aa=ja[0];V=ja[1];ja=ja[2];Z=(1-(A+ua))*sa;const xa=(la+pa)*sa;sa*=ma-ca;la=(la-pa)*Ca;ua=(1-(E+ua))*Ca;Ca*=J+M;ma=(ma+ca)*fa;J=(J-M)*fa;E=(1-(E+A))*fa;k[0]=Z;k[1]=xa;k[2]=sa;k[3]=0;k[4]=la;k[5]=ua;k[6]=Ca;k[7]=0;k[8]=ma;k[9]=J;k[10]=E;k[11]=0;k[12]=Y[0]+aa-(Z*aa+la*V+ma*ja);k[13]=Y[1]+V-(xa*aa+ua*V+J*ja);k[14]=Y[2]+ja-(sa*aa+Ca*
V+E*ja);k[15]=1;return k}function x(k,E){var Y=E[0],aa=E[1],ja=E[2];E=E[3];var A=Y+Y,J=aa+aa;const M=ja+ja;Y*=A;const V=aa*A;aa*=J;const Z=ja*A,ca=ja*J;ja*=M;A*=E;J*=E;E*=M;k[0]=1-aa-ja;k[1]=V+E;k[2]=Z-J;k[3]=0;k[4]=V-E;k[5]=1-Y-ja;k[6]=ca+A;k[7]=0;k[8]=Z+J;k[9]=ca-A;k[10]=1-Y-aa;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k}function N(k,E,Y,aa,ja,A,J){const M=1/(Y-E),V=1/(ja-aa),Z=1/(A-J);k[0]=2*A*M;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2*A*V;k[6]=0;k[7]=0;k[8]=(Y+E)*M;k[9]=(ja+aa)*V;k[10]=(J+A)*Z;
k[11]=-1;k[12]=0;k[13]=0;k[14]=J*A*2*Z;k[15]=0;return k}function L(k,E,Y,aa,ja){E=1/Math.tan(E/2);let A=void 0;k[0]=E/Y;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=E;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[11]=-1;k[12]=0;k[13]=0;k[15]=0;null!=ja&&Infinity!==ja?(A=1/(aa-ja),k[10]=(ja+aa)*A,k[14]=2*ja*aa*A):(k[10]=-1,k[14]=-2*aa);return k}function T(k,E,Y,aa){const ja=Math.tan(E.upDegrees*Math.PI/180),A=Math.tan(E.downDegrees*Math.PI/180),J=Math.tan(E.leftDegrees*Math.PI/180);E=Math.tan(E.rightDegrees*Math.PI/180);const M=
2/(J+E),V=2/(ja+A);k[0]=M;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=V;k[6]=0;k[7]=0;k[8]=-((J-E)*M*.5);k[9]=(ja-A)*V*.5;k[10]=aa/(Y-aa);k[11]=-1;k[12]=0;k[13]=0;k[14]=aa*Y/(Y-aa);k[15]=0;return k}function X(k,E,Y,aa,ja,A,J){const M=1/(E-Y),V=1/(aa-ja),Z=1/(A-J);k[0]=-2*M;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=-2*V;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=2*Z;k[11]=0;k[12]=(E+Y)*M;k[13]=(ja+aa)*V;k[14]=(J+A)*Z;k[15]=1;return k}function da(k,E,Y,aa){const ja=E[0],A=E[1];E=E[2];let J=ja-Y[0],M=A-Y[1];Y=E-Y[2];var V=y.getEpsilon();
if(Math.abs(J)<V&&Math.abs(M)<V&&Math.abs(Y)<V)B(k);else{var Z=1/Math.sqrt(J*J+M*M+Y*Y);J*=Z;M*=Z;Y*=Z;Z=aa[0];var ca=aa[1];V=aa[2];aa=ca*Y-V*M;V=V*J-Z*Y;ca=Z*M-ca*J;(Z=Math.sqrt(aa*aa+V*V+ca*ca))?(Z=1/Z,aa*=Z,V*=Z,ca*=Z):ca=V=aa=0;var fa=M*ca-Y*V,la=Y*aa-J*ca,ma=J*V-M*aa;(Z=Math.sqrt(fa*fa+la*la+ma*ma))?(Z=1/Z,fa*=Z,la*=Z,ma*=Z):ma=la=fa=0;k[0]=aa;k[1]=fa;k[2]=J;k[3]=0;k[4]=V;k[5]=la;k[6]=M;k[7]=0;k[8]=ca;k[9]=ma;k[10]=Y;k[11]=0;k[12]=-(aa*ja+V*A+ca*E);k[13]=-(fa*ja+la*A+ma*E);k[14]=-(J*ja+M*A+Y*
E);k[15]=1}}function ia(k,E,Y,aa){const ja=E[0],A=E[1];E=E[2];var J=aa[0];const M=aa[1];var V=aa[2];aa=ja-Y[0];let Z=A-Y[1];Y=E-Y[2];let ca=aa*aa+Z*Z+Y*Y;0<ca&&(ca=1/Math.sqrt(ca),aa*=ca,Z*=ca,Y*=ca);let fa=M*Y-V*Z;V=V*aa-J*Y;J=J*Z-M*aa;ca=fa*fa+V*V+J*J;0<ca&&(ca=1/Math.sqrt(ca),fa*=ca,V*=ca,J*=ca);k[0]=fa;k[1]=V;k[2]=J;k[3]=0;k[4]=Z*J-Y*V;k[5]=Y*fa-aa*J;k[6]=aa*V-Z*fa;k[7]=0;k[8]=aa;k[9]=Z;k[10]=Y;k[11]=0;k[12]=ja;k[13]=A;k[14]=E;k[15]=1;return k}function na(k){return"mat4("+k[0]+", "+k[1]+", "+
k[2]+", "+k[3]+", "+k[4]+", "+k[5]+", "+k[6]+", "+k[7]+", "+k[8]+", "+k[9]+", "+k[10]+", "+k[11]+", "+k[12]+", "+k[13]+", "+k[14]+", "+k[15]+")"}function qa(k){return Math.sqrt(k[0]**2+k[1]**2+k[2]**2+k[3]**2+k[4]**2+k[5]**2+k[6]**2+k[7]**2+k[8]**2+k[9]**2+k[10]**2+k[11]**2+k[12]**2+k[13]**2+k[14]**2+k[15]**2)}function va(k,E,Y){k[0]=E[0]+Y[0];k[1]=E[1]+Y[1];k[2]=E[2]+Y[2];k[3]=E[3]+Y[3];k[4]=E[4]+Y[4];k[5]=E[5]+Y[5];k[6]=E[6]+Y[6];k[7]=E[7]+Y[7];k[8]=E[8]+Y[8];k[9]=E[9]+Y[9];k[10]=E[10]+Y[10];k[11]=
E[11]+Y[11];k[12]=E[12]+Y[12];k[13]=E[13]+Y[13];k[14]=E[14]+Y[14];k[15]=E[15]+Y[15];return k}function ta(k,E,Y){k[0]=E[0]-Y[0];k[1]=E[1]-Y[1];k[2]=E[2]-Y[2];k[3]=E[3]-Y[3];k[4]=E[4]-Y[4];k[5]=E[5]-Y[5];k[6]=E[6]-Y[6];k[7]=E[7]-Y[7];k[8]=E[8]-Y[8];k[9]=E[9]-Y[9];k[10]=E[10]-Y[10];k[11]=E[11]-Y[11];k[12]=E[12]-Y[12];k[13]=E[13]-Y[13];k[14]=E[14]-Y[14];k[15]=E[15]-Y[15];return k}function wa(k,E,Y){k[0]=E[0]*Y;k[1]=E[1]*Y;k[2]=E[2]*Y;k[3]=E[3]*Y;k[4]=E[4]*Y;k[5]=E[5]*Y;k[6]=E[6]*Y;k[7]=E[7]*Y;k[8]=E[8]*
Y;k[9]=E[9]*Y;k[10]=E[10]*Y;k[11]=E[11]*Y;k[12]=E[12]*Y;k[13]=E[13]*Y;k[14]=E[14]*Y;k[15]=E[15]*Y;return k}function Ea(k,E,Y,aa){k[0]=E[0]+Y[0]*aa;k[1]=E[1]+Y[1]*aa;k[2]=E[2]+Y[2]*aa;k[3]=E[3]+Y[3]*aa;k[4]=E[4]+Y[4]*aa;k[5]=E[5]+Y[5]*aa;k[6]=E[6]+Y[6]*aa;k[7]=E[7]+Y[7]*aa;k[8]=E[8]+Y[8]*aa;k[9]=E[9]+Y[9]*aa;k[10]=E[10]+Y[10]*aa;k[11]=E[11]+Y[11]*aa;k[12]=E[12]+Y[12]*aa;k[13]=E[13]+Y[13]*aa;k[14]=E[14]+Y[14]*aa;k[15]=E[15]+Y[15]*aa;return k}function Da(k,E){return k[0]===E[0]&&k[1]===E[1]&&k[2]===
E[2]&&k[3]===E[3]&&k[4]===E[4]&&k[5]===E[5]&&k[6]===E[6]&&k[7]===E[7]&&k[8]===E[8]&&k[9]===E[9]&&k[10]===E[10]&&k[11]===E[11]&&k[12]===E[12]&&k[13]===E[13]&&k[14]===E[14]&&k[15]===E[15]}function Pa(k,E){if(k===E)return!0;const Y=k[0],aa=k[1],ja=k[2],A=k[3],J=k[4],M=k[5],V=k[6],Z=k[7],ca=k[8],fa=k[9],la=k[10],ma=k[11],ua=k[12],pa=k[13],sa=k[14];k=k[15];const Ca=E[0],xa=E[1],Ba=E[2],Aa=E[3],ya=E[4],Ia=E[5],Qa=E[6],Ya=E[7],Wa=E[8],Ja=E[9],Ka=E[10],ka=E[11],Ra=E[12],Mb=E[13],nb=E[14];E=E[15];const b=
y.getEpsilon();return Math.abs(Y-Ca)<=b*Math.max(1,Math.abs(Y),Math.abs(Ca))&&Math.abs(aa-xa)<=b*Math.max(1,Math.abs(aa),Math.abs(xa))&&Math.abs(ja-Ba)<=b*Math.max(1,Math.abs(ja),Math.abs(Ba))&&Math.abs(A-Aa)<=b*Math.max(1,Math.abs(A),Math.abs(Aa))&&Math.abs(J-ya)<=b*Math.max(1,Math.abs(J),Math.abs(ya))&&Math.abs(M-Ia)<=b*Math.max(1,Math.abs(M),Math.abs(Ia))&&Math.abs(V-Qa)<=b*Math.max(1,Math.abs(V),Math.abs(Qa))&&Math.abs(Z-Ya)<=b*Math.max(1,Math.abs(Z),Math.abs(Ya))&&Math.abs(ca-Wa)<=b*Math.max(1,
Math.abs(ca),Math.abs(Wa))&&Math.abs(fa-Ja)<=b*Math.max(1,Math.abs(fa),Math.abs(Ja))&&Math.abs(la-Ka)<=b*Math.max(1,Math.abs(la),Math.abs(Ka))&&Math.abs(ma-ka)<=b*Math.max(1,Math.abs(ma),Math.abs(ka))&&Math.abs(ua-Ra)<=b*Math.max(1,Math.abs(ua),Math.abs(Ra))&&Math.abs(pa-Mb)<=b*Math.max(1,Math.abs(pa),Math.abs(Mb))&&Math.abs(sa-nb)<=b*Math.max(1,Math.abs(sa),Math.abs(nb))&&Math.abs(k-E)<=b*Math.max(1,Math.abs(k),Math.abs(E))}function Sa(k){const E=y.getEpsilon(),Y=k[0],aa=k[1],ja=k[2],A=k[4],J=k[5],
M=k[6],V=k[8],Z=k[9];k=k[10];return Math.abs(1-(Y*Y+A*A+V*V))<=E&&Math.abs(1-(aa*aa+J*J+Z*Z))<=E&&Math.abs(1-(ja*ja+M*M+k*k))<=E}function Ta(k){return 1===k[0]&&0===k[1]&&0===k[2]&&0===k[4]&&1===k[5]&&0===k[6]&&0===k[8]&&0===k[9]&&1===k[10]}const Oa=g.create();g=Object.freeze(Object.defineProperty({__proto__:null,add:va,adjoint:r,copy:w,determinant:z,equals:Pa,exactEquals:Da,frob:qa,fromQuat:x,fromQuat2:W,fromRotation:e,fromRotationTranslation:ba,fromRotationTranslationScale:m,fromRotationTranslationScaleOrigin:h,
fromScaling:P,fromTranslation:C,fromXRotation:K,fromYRotation:Q,fromZRotation:S,frustum:N,getRotation:H,getScaling:v,getTranslation:U,hasIdentityRotation:Ta,identity:B,invert:d,invertOrIdentity:p,isOrthoNormal:Sa,lookAt:da,mul:D,multiply:D,multiplyScalar:wa,multiplyScalarAndAdd:Ea,ortho:X,perspective:L,perspectiveFromFieldOfView:T,rotate:q,rotateX:a,rotateY:u,rotateZ:n,scale:t,set:F,str:na,sub:ta,subtract:ta,targetTo:ia,translate:I,transpose:f},Symbol.toStringTag,{value:"Module"}));c.add=va;c.adjoint=
r;c.copy=w;c.determinant=z;c.equals=Pa;c.exactEquals=Da;c.frob=qa;c.fromQuat=x;c.fromQuat2=W;c.fromRotation=e;c.fromRotationTranslation=ba;c.fromRotationTranslationScale=m;c.fromRotationTranslationScaleOrigin=h;c.fromScaling=P;c.fromTranslation=C;c.fromXRotation=K;c.fromYRotation=Q;c.fromZRotation=S;c.frustum=N;c.getRotation=H;c.getScaling=v;c.getTranslation=U;c.hasIdentityRotation=Ta;c.identity=B;c.invert=d;c.invertOrIdentity=p;c.isOrthoNormal=Sa;c.lookAt=da;c.mat4=g;c.mul=D;c.multiply=D;c.multiplyScalar=
wa;c.multiplyScalarAndAdd=Ea;c.ortho=X;c.perspective=L;c.perspectiveFromFieldOfView=T;c.rotate=q;c.rotateX=a;c.rotateY=u;c.rotateZ=n;c.scale=t;c.set=F;c.str=na;c.sub=ta;c.subtract=ta;c.targetTo=ia;c.translate=I;c.transpose=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(c,g,y){function w(m){return null==m||"string"===typeof m&&!m?"\x3cNull\x3e":
m}function F(m){const h=null!=m.minValue||null!=m.maxValue,x=!!m.sqlExpression&&m.supportsSQLExpression;return!(null!=m.normalizationField||null!=m.normalizationType)&&!h&&!x}function B(m){const {values:h,useSampleStdDev:x,supportsNullCount:N}=m;var L=Number.POSITIVE_INFINITY;let T=Number.NEGATIVE_INFINITY,X=null,da=null;var ia=null;let na=null,qa=0;const va=null==m.minValue?-Infinity:m.minValue,ta=null==m.maxValue?Infinity:m.maxValue;for(const wa of h)Number.isFinite(wa)?wa>=va&&wa<=ta&&(X=null===
X?wa:X+wa,L=Math.min(L,wa),T=Math.max(T,wa),qa++):"string"===typeof wa&&qa++;if(qa&&null!=X){da=X/qa;ia=0;for(const wa of h)Number.isFinite(wa)&&wa>=va&&wa<=ta&&(ia+=(wa-da)**2);na=x?1<qa?ia/(qa-1):0:0<qa?ia/qa:0;ia=Math.sqrt(na)}else T=L=null;L={avg:da,count:qa,max:T,min:L,stddev:ia,sum:X,variance:na};N&&(L.nullcount=h.length-qa);m.percentileParams&&(L.median=f(h,m.percentileParams));return L}function f(m,h){const {fieldType:x,value:N,orderBy:L,isDiscrete:T}=h,X=p(x,"desc"===L);m=[...m].filter(qa=>
null!=qa).sort((qa,va)=>X(qa,va));if(0===m.length)return null;if(0>=N)return m[0];if(1<=N)return m[m.length-1];var da=(m.length-1)*N,ia=Math.floor(da);h=ia+1;da%=1;ia=m[ia];const na=m[h];return h>=m.length||T||"string"===typeof ia||"string"===typeof na?ia:ia*(1-da)+na*da}function p(m,h){if(m){if(C.has(m))return h?v:H;if(P.has(m))return d(h,!1);if("esriFieldTypeTimestampOffset"===m)return h?ba:S;const T=d(h,!0);if("esriFieldTypeString"===m)return T;if("esriFieldTypeGUID"===m||"esriFieldTypeGlobalID"===
m)return(X,da)=>T(r(X),r(da))}const x=h?1:-1,N=h?v:H,L=d(h,!0);return(T,X)=>"number"===typeof T&&"number"===typeof X?N(T,X):"string"===typeof T&&"string"===typeof X?L(T,X):x}function d(m,h){if(!h)return m?U:W;const x=m?K:Q;return m?(N,L)=>{const T=x(N,L);if(null!=T)return T;N=N.toUpperCase();L=L.toUpperCase();return N>L?-1:N<L?1:0}:(N,L)=>{const T=x(N,L);if(null!=T)return T;N=N.toUpperCase();L=L.toUpperCase();return N<L?-1:N>L?1:0}}function r(m){return m.substr(24,12)+m.substr(19,4)+m.substr(16,2)+
m.substr(14,2)+m.substr(11,2)+m.substr(9,2)+m.substr(6,2)+m.substr(4,2)+m.substr(2,2)+m.substr(0,2)}function z(m){return"coded-value"!==m?.type?[]:m.codedValues.map(h=>h.code)}function D(m,h){const x=t({field:h.field,normalizationType:h.normalizationType,normalizationField:h.normalizationField,classificationMethod:h.classificationMethod,standardDeviationInterval:h.standardDeviationInterval,breakCount:h.numClasses||5});m=I(m,h.minValue,h.maxValue);return y.createGenerateRendererClassBreaks({definition:x,
values:m,normalizationTotal:h.normalizationTotal})}function I(m,h,x){const N=null==h?-Infinity:h,L=null==x?Infinity:x;return m.filter(T=>Number.isFinite(T)&&T>=N&&T<=L)}function t(m){const {breakCount:h,field:x,normalizationField:N,normalizationType:L}=m,T=m.classificationMethod||"equal-interval";return new g({breakCount:h,classificationField:x,classificationMethod:T,normalizationField:"field"===L?N:void 0,normalizationType:L,standardDeviationInterval:"standard-deviation"===T?m.standardDeviationInterval||
1:void 0})}function q(m,h){const {field:x,classificationMethod:N,standardDeviationInterval:L,normalizationType:T,normalizationField:X,normalizationTotal:da,minValue:ia,maxValue:na}=h,qa=h.numBins||10;let va=h=null,ta=null;N&&"equal-interval"!==N||T?({classBreaks:m}=D(m,{field:x,normalizationType:T,normalizationField:X,normalizationTotal:da,classificationMethod:N,standardDeviationInterval:L,minValue:ia,maxValue:na,numClasses:qa}),h=m[0].minValue,va=m[m.length-1].maxValue,ta=m.map(wa=>[wa.minValue,
wa.maxValue])):(null!=ia&&null!=na?(h=ia,va=na):(m=B({values:m,minValue:ia,maxValue:na,useSampleStdDev:!T,supportsNullCount:F({normalizationType:T,normalizationField:X,minValue:ia,maxValue:na})}),h=m.min??null,va=m.max??null),ta=u(h??0,va??0,qa));return{min:h,max:va,intervals:ta}}function a(m,h){let x=-1;for(let N=m.length-1;0<=N;N--)if(h>=m[N][0]){x=N;break}return x}function u(m,h,x){const N=(h-m)/x,L=[];let T;for(let X=1;X<=x;X++)T=m+N,T=Number(T.toFixed(16)),L.push([m,X===x?h:T]),m=T;return L}
const n=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,C=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),P=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),e="min max avg stddev count sum variance nullcount median".split(" "),K=(m,h)=>null==m?null==h?0:1:null==h?-1:null,Q=(m,h)=>null==m?null==h?0:-1:null==h?1:null,S=(m,h)=>Q(m,h)??(m===h?0:(new Date(m)).getTime()-
(new Date(h)).getTime()),ba=(m,h)=>K(m,h)??(m===h?0:(new Date(h)).getTime()-(new Date(m)).getTime()),W=(m,h)=>Q(m,h)??(m===h?0:m<h?-1:1),U=(m,h)=>K(m,h)??(m===h?0:m<h?1:-1),v=(m,h)=>K(m,h)??h-m,H=(m,h)=>Q(m,h)??m-h;c.calculateClassBreaks=D;c.calculateHistogram=function(m,h){var x=q(m,h);if(null==x.min&&null==x.max)return{bins:[],minValue:x.min,maxValue:x.max,normalizationTotal:h.normalizationTotal};const N=x.intervals,L=x.min??0;x=x.max??0;const T=N.map((X,da)=>({minValue:N[da][0],maxValue:N[da][1],
count:0}));for(const X of m)null!=X&&X>=L&&X<=x&&(m=a(N,X),-1<m&&T[m].count++);return{bins:T,minValue:L,maxValue:x,normalizationTotal:h.normalizationTotal}};c.calculatePercentile=f;c.calculateStatistics=B;c.calculateStringStatistics=function(m){const h=m.returnDistinct?[...(new Set(m.values))]:m.values;var x=h.filter(L=>null!=L).sort();const N=x.length;x={count:N,min:x[0],max:x[N-1]};m.supportsNullCount&&(x.nullcount=h.length-N);m.percentileParams&&(x.median=f(h,m.percentileParams));return x};c.calculateUniqueValuesCount=
function(m){const h={};for(let x of m){if(null==x||"string"===typeof x&&""===x.trim())x=null;null==h[x]?h[x]={count:1,data:x}:h[x].count++}return{count:h}};c.createClassBreaksDefinition=t;c.createUVResult=function(m,h,x,N){m=m.count;const L=[];if(x&&h){x=[];var T=z(h[0]);for(const X of T)if(h[1]){T=z(h[1]);for(const da of T)if(h[2]){T=z(h[2]);for(const ia of T)x.push(`${w(X)}${N}${w(da)}${N}${w(ia)}`)}else x.push(`${w(X)}${N}${w(da)}`)}else x.push(X);for(const X of x)m.hasOwnProperty(X)||(m[X]={data:X,
count:0})}for(const X in m)h=m[X],L.push({value:h.data,count:h.count,label:h.label});return{uniqueValueInfos:L}};c.getAttributeComparator=p;c.getEqualIntervalBins=u;c.getNormalizedValue=function(m,h,x,N){let L=null;switch(h){case "log":0!==m&&(L=Math.log(m)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(N)&&0!==N&&(L=m/N*100);break;case "field":Number.isFinite(x)&&0!==x&&(L=m/x);break;case "natural-log":0<m&&(L=Math.log(m));break;case "square-root":0<m&&(L=m**.5)}return L};c.isNullCountSupported=
F;c.processNullValue=w;c.processSummaryStatisticsResult=function(m,h){let x;for(x in m)e.includes(x)&&(Number.isFinite(m[x])||(m[x]=null));if(!h)return m;["avg","stddev","variance"].forEach(N=>{null!=m[N]&&(m[N]=Math.ceil(m[N]??0))});return m};c.resolveCBResult=function(m,h){let x=m.classBreaks;const N=x[0]?.minValue,L=x[x.length-1]?.maxValue,T="standard-deviation"===h;x=x.map(X=>{const da=X.label;X={minValue:X.minValue,maxValue:X.maxValue,label:da};if(T&&da){const ia=da.match(n)?.map(na=>+na.trim())??
[];2===ia.length?(X.minStdDev=ia[0],X.maxStdDev=ia[1],0>ia[0]&&0<ia[1]&&(X.hasAvg=!0)):1===ia.length&&(da.includes("\x3c")?(X.minStdDev=null,X.maxStdDev=ia[0]):da.includes("\x3e")&&(X.minStdDev=ia[0],X.maxStdDev=null))}return X});return{minValue:N,maxValue:L,classBreakInfos:x,normalizationTotal:m.normalizationTotal}};c.statisticTypes=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,y,w,F,B,f,p,d){F=new g.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});g=new g.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});y=class extends y.JSONSupport{constructor(r){super(r);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(r){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",r)}set definedInterval(r){"defined-interval"===this.classificationMethod&&this._set("definedInterval",r)}};c.__decorate([p.enumeration({classBreaksDef:"class-breaks-definition"})],y.prototype,"type",void 0);c.__decorate([w.property({json:{write:!0}})],y.prototype,
"breakCount",void 0);c.__decorate([w.property({json:{write:!0}})],y.prototype,"classificationField",void 0);c.__decorate([w.property({type:String,json:{read:F.read,write:F.write}})],y.prototype,"classificationMethod",void 0);c.__decorate([w.property({json:{write:!0}})],y.prototype,"normalizationField",void 0);c.__decorate([w.property({json:{read:g.read,write:g.write}})],y.prototype,"normalizationType",void 0);c.__decorate([w.property({value:null,json:{write:!0}})],y.prototype,"standardDeviationInterval",
null);c.__decorate([w.property({value:null,json:{write:!0}})],y.prototype,"definedInterval",null);return y=c.__decorate([d.subclass("esri.rest.support.ClassBreaksDefinition")],y)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(c,g,y){c.enumeration=function(w,F={}){w=w instanceof g.JSONMap?w:new g.JSONMap(w,F);w={type:F?.ignoreUnknown??!0?w.apiValues:String,json:{type:w.jsonValues,read:F?.readOnly?!1:{reader:w.read},write:{writer:w.write}}};
void 0!==F?.readOnly&&(w.readOnly=!!F.readOnly);void 0!==F?.default&&(w.json.default=F.default);void 0!==F?.name&&(w.json.name=F.name);void 0!==F?.nonNullable&&(w.nonNullable=F.nonNullable);return y.property(w)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(c,g){function y(D){var I=D.definition;const {classificationMethod:t,normalizationType:q,definedInterval:a}=I;I=I.breakCount??
1;const u=[];var n=D.values;if(0===n.length)return[];n=n.sort((S,ba)=>S-ba);var C=n[0],P=n[n.length-1];if("equal-interval"===t)if(n.length>=I){n=(P-C)/I;D=C;for(var e=1;e<I;e++){var K=Number((C+e*n).toFixed(6));u.push({minValue:D,maxValue:K,label:w(D,K,q)});D=K}u.push({minValue:D,maxValue:P,label:w(D,P,q)})}else n.forEach(S=>{u.push({minValue:S,maxValue:S,label:w(S,S,q)})});else if("natural-breaks"===t){n=F(n);D=B(n.uniqueValues,D.valueFrequency||n.valueFrequency,I);for(e=1;e<I;e++)n.uniqueValues.length>
e&&(K=Number(n.uniqueValues[D[e]].toFixed(6)),u.push({minValue:C,maxValue:K,label:w(C,K,q)}),C=K);u.push({minValue:C,maxValue:P,label:w(C,P,q)})}else if("quantile"===t)if(n.length>=I&&C!==P){D=Math.ceil(n.length/I);e=0;for(K=1;K<I;K++){var Q=D+e-1;Q>n.length&&(Q=n.length-1);0>Q&&(Q=0);u.push({minValue:C,maxValue:n[Q],label:w(C,n[Q],q)});C=n[Q];e+=D;D=Math.ceil((n.length-e)/(I-K))}u.push({minValue:C,maxValue:P,label:w(C,P,q)})}else for(I=-1,P=0;P<n.length;P++)C=n[P],C!==I&&(I=C,u.push({minValue:I,
maxValue:C,label:w(I,C,q)}),I=C);else if("standard-deviation"===t)if(D=d(n),e=r(n,D),0===e)u.push({minValue:n[0],maxValue:n[0],label:w(n[0],n[0],q)});else{n=p(C,P,I,D,e)*e;e=0;for(K=I;1<=K;K--)Q=Number((D-(K-.5)*n).toFixed(6)),u.push({minValue:C,maxValue:Q,label:w(C,Q,q)}),C=Q,e++;K=Number((D+.5*n).toFixed(6));u.push({minValue:C,maxValue:K,label:w(C,K,q)});C=K;e++;for(Q=1;Q<=I;Q++)K=e===2*I?P:Number((D+(Q+.5)*n).toFixed(6)),u.push({minValue:C,maxValue:K,label:w(C,K,q)}),C=K,e++}else if("defined-interval"===
t){if(!a)return u;I=n[0];P=n[n.length-1];n=Math.ceil((P-I)/a);C=I;for(D=1;D<n;D++)e=Number((I+D*a).toFixed(6)),u.push({minValue:C,maxValue:e,label:w(C,e,q)}),C=e;u.push({minValue:C,maxValue:P,label:w(C,P,q)})}return u}function w(D,I,t){let q=null;return q=D===I?t&&"percent-of-total"===t?D+"%":D.toString():t&&"percent-of-total"===t?D+"% - "+I+"%":D+" - "+I}function F(D){const I=[],t=[];let q=Number.MIN_VALUE,a=1,u=-1;for(let n=0;n<D.length;n++){const C=D[n];C===q?(a++,t[u]=a):null!==C&&(I.push(C),
q=C,a=1,t.push(a),u++)}return{uniqueValues:I,valueFrequency:t}}function B(D,I,t){var q=D.length;const a=[];t>q&&(t=q);for(var u=0;u<t;u++)a.push(Math.round(u*q/t-1));a.push(q-1);u=f(a,D,I,t);q=u.mean;u=u.sdcm;var n=t,C=0,P=0;let e=0,K=0,Q=!0;for(let ba=0;2>ba&&Q;ba++){0===ba&&(Q=!1);for(var S=0;S<n-1;S++)for(;a[S+1]+1!==a[S+2];)if(a[S+1]+=1,C=z(S,a,D,I),e=C.sbMean,C=C.sbSdcm,P=z(S+1,a,D,I),K=P.sbMean,P=P.sbSdcm,C+P<u[S]+u[S+1])u[S]=C,u[S+1]=P,q[S]=e,q[S+1]=K,Q=!0;else{--a[S+1];break}for(S=n-1;0<S;S--)for(;a[S]!==
a[S-1]+1;)if(--a[S],C=z(S-1,a,D,I),e=C.sbMean,C=C.sbSdcm,P=z(S,a,D,I),K=P.sbMean,P=P.sbSdcm,C+P<u[S-1]+u[S])u[S-1]=C,u[S]=P,q[S-1]=e,q[S]=K,Q=!0;else{a[S]+=1;break}}Q&&(u=f(a,D,I,t));return a}function f(D,I,t,q){let a=[];var u=[],n=[];let C=0;const P=[],e=[];for(var K=0;K<q;K++){var Q=z(K,D,I,t);P.push(Q.sbMean);e.push(Q.sbSdcm);C+=e[K]}Q=C;for(K=!0;K||C<Q;){K=!1;a=[];for(u=0;u<q;u++)a.push(D[u]);for(n=0;n<q;n++)for(Q=D[n]+1;Q<=D[n+1];Q++)if(u=I[Q],0<n&&Q!==D[n+1]&&Math.abs(u-P[n])>Math.abs(u-P[n-
1]))D[n]=Q;else if(n<q-1&&D[n]!==Q-1&&Math.abs(u-P[n])>Math.abs(u-P[n+1])){D[n+1]=Q-1;break}Q=C;C=0;u=[];n=[];for(let S=0;S<q;S++){u.push(P[S]);n.push(e[S]);const ba=z(S,D,I,t);P[S]=ba.sbMean;e[S]=ba.sbSdcm;C+=e[S]}}if(C>Q){for(I=0;I<q;I++)D[I]=a[I],P[I]=u[I],e[I]=n[I];C=Q}return{mean:P,sdcm:e}}function p(D,I,t,q,a){D=Math.max(q-D,I-q)/a/t;return 1<=D?1:.5<=D?.5:.25}function d(D){let I=0;for(let t=0;t<D.length;t++)I+=D[t];return I/=D.length}function r(D,I){let t=0;for(let q=0;q<D.length;q++){const a=
D[q];t+=(a-I)*(a-I)}t/=D.length;return Math.sqrt(t)}function z(D,I,t,q){var a=0,u=0;for(var n=I[D]+1;n<=I[D+1];n++){const C=q[n];a+=t[n]*C;u+=C}0>=u&&g.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");a/=u;u=0;for(n=I[D]+1;n<=I[D+1];n++)u+=q[n]*(t[n]-a)**2;return{sbMean:a,sbSdcm:u}}c.createGenerateRendererClassBreaks=function(D){const {normalizationTotal:I}=D;return{classBreaks:y(D),normalizationTotal:I}};c.createGenerateRendererUniqueValues=function(D){D=
F(D);const I=[],t=D.uniqueValues.length;for(let q=0;q<t;q++){const a=D.uniqueValues[q];I.push({value:a,count:D.valueFrequency[q],label:a.toString()})}return{uniqueValues:I}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(c){c.makeEdgeCandidate=function(g,y,w,F,B,f=!1){return{objectId:g,target:y,distance:w,type:"edge",start:F,end:B,draped:f}};c.makeVertexCandidate=function(g,y,w){return{objectId:g,
target:y,distance:w,type:"vertex"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),function(c,g,y,w,F,B,f,p,d,r){async function z(u,n,C){if(!u)return null;
var {where:P}=u;u.where=P=P?.trim();if(!P||/^1 *= *1$/.test(P)||n&&n===P)u.where=null;if(!u.geometry)return u;n=await I(u);u.distance=0;u.units=null;"esriSpatialRelEnvelopeIntersects"===u.spatialRel&&({spatialReference:P}=u.geometry,n=B.getGeometryExtent(n),n.spatialReference=P);if(n){await r.checkProjectionSupport(n.spatialReference,C);P=n.spatialReference;n=D(n,C)&&f.isExtent(n)?{spatialReference:P,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}:n;P=(await p.normalizeCentralMeridian(f.fromJSON(n)))[0];
if(null==P)throw a;const e="quantizationParameters"in u&&u.quantizationParameters?.tolerance||"maxAllowableOffset"in u&&u.maxAllowableOffset||0;n=e&&D(n,C)?{densificationStep:8*e}:void 0;P=P.toJSON();n=r.project(P,P.spatialReference,C,n);if(!n)throw a;n.spatialReference=C;u.geometry=n}return u}function D(u,n){if(!u)return!1;const C=u.spatialReference;return(f.isExtent(u)||f.isPolygon(u)||f.isPolyline(u))&&!d.equals(C,n)&&!F.canProjectWithoutEngine(C,n)}async function I(u){const {distance:n,units:C}=
u,P=u.geometry;if(null==n||"vertexAttributes"in P)return P;var e=P.spatialReference;u=C?q.fromJSON(C):w.getUnitString(e);e=e&&(d.isGeographic(e)||d.isWebMercator(e))?P:await r.checkProjectionSupport(e,d.wgs84).then(()=>r.project(P,d.wgs84));return(await t())(e.spatialReference,e,n,u)}async function t(){return(await new Promise((u,n)=>c(["../../../geometry/geometryEngineJSON"],u,n))).geodesicBuffer}const q=new y.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),a=Object.freeze({});g.normalizeQuery=async function(u,n,C){const {outFields:P,orderByFields:e,groupByFieldsForStatistics:K,outStatistics:Q}=u;if(P)for(var S=0;S<P.length;S++)P[S]=P[S].trim();if(e)for(S=0;S<e.length;S++)e[S]=e[S].trim();if(K)for(S=0;S<K.length;S++)K[S]=K[S].trim();if(Q)for(S=0;S<Q.length;S++)Q[S].onStatisticField&&(Q[S].onStatisticField=Q[S].onStatisticField.trim());
u.geometry&&!u.outSR&&(u.outSR=u.geometry.spatialReference);return z(u,n,C)};g.normalizeQueryLike=z;g.queryEngineEmptyResult=a;g.unitsKebabDict=q;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),function(c,g,y,w,F,B){function f(D,I,t){const {outFields:q,orderByFields:a,returnDistinctValues:u,
outStatistics:n}=t,C=n?n.map(P=>P.outStatisticFieldName&&P.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(a&&0<a.length){const P=a.map(e=>{const K=e.toLowerCase();return K.includes(" asc")?K.split(" asc")[0]:K.includes(" desc")?K.split(" desc")[0]:e}).filter(e=>!C.includes(e));y.validateFields(D,I,P,{expressionName:"orderByFields",query:t})}if(q&&0<q.length)y.validateFields(D,I,q,{expressionName:"outFields",query:t,allowedFieldTypes:"all"});else if(u)throw new g("unsupported-query","outFields should be specified for returnDistinctValues",
{query:t});y.validateWhere(D,I,t.where,t)}function p(D,I,t){const {outStatistics:q,groupByFieldsForStatistics:a,having:u}=t;var n=a?.length,C=q?.length;if(u){if(!n||!C)throw new g("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});y.validateHaving(D,I,u,q,t)}if(C&&r(q)){C=q.map(P=>P.onStatisticField).filter(Boolean);y.validateFields(D,I,C,{expressionName:"onStatisticFields",query:t});n&&y.validateFields(D,I,a,{expressionName:"groupByFieldsForStatistics",
query:t});for(const P of q){const {onStatisticField:e,statisticType:K}=P;if(("percentile_disc"===K||"percentile_cont"===K)&&"statisticParameters"in P){if({statisticParameters:n}=P,!n)throw new g("unsupported-query","statisticParameters should be set for percentile type",{definition:P,query:t});}else D.get(e)&&"count"!==K&&"min"!==K&&"max"!==K&&y.validateFields(D,I,[e],{expressionName:`outStatistics with '${K}' statistic type`,allowedFieldTypes:z,query:t})}}}async function d(D,I,t,q){var a=[];t.valueExpression&&
({arcadeUtils:a}=await B.loadArcade(),a=a.extractFieldNames(t.valueExpression));t.field&&a.push(t.field);t.field2&&a.push(t.field2);t.field3&&a.push(t.field3);t.normalizationField&&a.push(t.normalizationField);if(!a.length&&!t.valueExpression)throw new g("unsupported-query","field or valueExpression is required",{params:t});y.validateFields(D,I,a,{expressionName:"statistics",query:q})}function r(D){return null!=D&&D.every(I=>"exceedslimit"!==I.statisticType)}const z=new Set([...y.numericFieldTypes,
...y.allDateAndTimeFieldTypes]);c.validateQuery=async function(D,{fieldsIndex:I,geometryType:t,spatialReference:q,availableFields:a}){if(0>(D.distance??0)||null!=D.geometryPrecision||D.multipatchOption&&"xyFootprint"!==D.multipatchOption||D.pixelSize||D.relationParam||D.text)throw new g("unsupported-query","Unsupported query options",{query:D});f(I,a,D);p(I,a,D);return Promise.all([F.checkSpatialQuerySupport(D,t,q),w.checkProjectionSupport(q,D.outSR)]).then(()=>D)};c.validateStatisticsQuery=async function(D,
I,{fieldsIndex:t,geometryType:q,spatialReference:a,availableFields:u}){if(0>(D.distance??0)||null!=D.geometryPrecision||D.multipatchOption||D.pixelSize||D.relationParam||D.text||D.outStatistics||D.groupByFieldsForStatistics||D.having||D.orderByFields)throw new g("unsupported-query","Unsupported query options",{query:D});f(t,u,D);return Promise.all([d(t,u,I,D),F.checkSpatialQuerySupport(D,q,a),w.checkProjectionSupport(a,D.outSR)]).then(()=>D)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(c,g,y,w,F,B,f,p,d,r,z,D){function I(){return new Promise((n,C)=>c(["../../../geometry/geometryEngineJSON"],n,C))}const t={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var q={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},a={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},u={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};g.canQueryWithRBush=function(n){if(B.isExtent(n))return!0;if(B.isPolygon(n)){for(const C of n.rings)if(5!==C.length||C[0][0]!==C[1][0]||C[0][0]!==C[4][0]||C[2][0]!==C[3][0]||C[0][1]!==C[3][1]||C[0][1]!==
C[4][1]||C[1][1]!==C[2][1])return!1;return!0}return!1};g.checkSpatialQuerySupport=async function(n,C,P){const {spatialRel:e,geometry:K}=n;if(K){if(null==e||!0!==q[e])throw new y("unsupported-query","Unsupported query spatial relationship",{query:n});if(f.isValid(K.spatialReference)&&f.isValid(P)){if(null==K||!0!==a[B.getJsonType(K)])throw new y("unsupported-query","Unsupported query geometry type",{query:n});if(null==C||!0!==u[C])throw new y("unsupported-query","Unsupported layer geometry type",{query:n});
if(n.outSR)return D.checkProjectionSupport(n.geometry?.spatialReference,n.outSR)}}};g.getSpatialQueryOperator=function(n,C,P,e,K){if(B.isPolygon(C)&&"esriGeometryPoint"===P&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n)){const Q=d.convertFromPolygon(new r,C,!1,!1);return Promise.resolve(S=>p.polygonContainsPoint(Q,!1,!1,S))}if(B.isPolygon(C)&&"esriGeometryMultipoint"===P){const Q=d.convertFromPolygon(new r,C,!1,!1);if("esriSpatialRelContains"===n)return Promise.resolve(S=>p.polygonContainsMultipoint(Q,
!1,!1,S,e,K))}if(B.isExtent(C)&&"esriGeometryPoint"===P&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n))return Promise.resolve(Q=>w.extentContainsPoint(C,z.getGeometry(P,e,K,Q)));if(B.isExtent(C)&&"esriGeometryMultipoint"===P&&"esriSpatialRelContains"===n)return Promise.resolve(Q=>w.extentContainsMultipoint(C,z.getGeometry(P,e,K,Q)));if(B.isExtent(C)&&"esriSpatialRelIntersects"===n){const Q=F.getExtentIntersector(P);return Promise.resolve(S=>Q(C,z.getGeometry(P,e,K,S)))}return I().then(Q=>
{const S=Q[t[n]].bind(null,C.spatialReference,C);return ba=>S(z.getGeometry(P,e,K,ba))})};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(c,g){c.extentIntersectsExtent=g.extentIntersectsExtent;c.extentIntersectsMultipoint=g.extentIntersectsMultipoint;c.extentIntersectsPoint=g.extentIntersectsPoint;c.extentIntersectsPolygon=g.extentIntersectsPolygon;c.extentIntersectsPolyline=g.extentIntersectsPolyline;
c.getFeatureExtentIntersector=g.getFeatureExtentIntersector;c.isSelfIntersecting=g.isSelfIntersecting;c.segmentIntersects=g.segmentIntersects;c.getExtentIntersector=function(y){return"mesh"===y?g.extentIntersectsExtent:g.getFeatureExtentIntersector(y)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(c){function g(y,w,F,B,f){if(!y)return!1;w=w?F?4:3:F?3:2;const {coords:p,lengths:d}=y;F=!1;y=0;for(const z of d){var r=
y;for(let D=y,I=y+z*w;D<I;D+=w){r=D+w;r===I&&(r=y);const t=p[D],q=p[D+1],a=p[r];r=p[r+1];(q<f&&r>=f||r<f&&q>=f)&&t+(f-q)/(r-q)*(a-t)<B&&(F=!F)}y+=z*w}return F}c.polygonContainsCoords=g;c.polygonContainsMultipoint=function(y,w,F,B,f,p){f=f?p?4:3:p?3:2;const {coords:d,lengths:r}=B;if(!r)return!1;for(let z=0,D=0;z<r.length;z++,D+=f)if(!g(y,w,F,d[D],d[D+1]))return!1;return!0};c.polygonContainsPoint=function(y,w,F,B){return g(y,w,F,B.coords[0],B.coords[1])};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(c){function g(F,B,f,p,d){if(null!=p&&null!=d)return r=>{const z=F(r,B);r=F(r,f);return(null==z||z<=d)&&(null==r||r>=p)};if(null!=p)return r=>{r=F(r,f);return null==r||r>=p};if(null!=d)return r=>{r=F(r,B);return null==r||r<=d}}function y(F,B,f,p){if(null!=f&&null!=p&&f===p)return d=>F(d,B)===f;if(null!=f&&null!=p)return d=>{d=F(d,B);return null!=d&&d>=f&&d<=p};if(null!=f)return d=>{d=F(d,B);return null!=d&&d>=f};if(null!=
p)return d=>{d=F(d,B);return null!=d&&d<=p}}function w(){return()=>!1}c.getTimeExtent=async function(F,B){if(!F)return null;const f=B.featureAdapter,{startTimeField:p,endTimeField:d}=F;let r=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY;if(p&&d)await B.forEach(D=>{const I=f.getAttribute(D,p);D=f.getAttribute(D,d);null==I||isNaN(I)||(r=Math.min(r,I));null==D||isNaN(D)||(z=Math.max(z,D))});else{const D=p||d;await B.forEach(I=>{I=f.getAttribute(I,D);null==I||isNaN(I)||(r=Math.min(r,I),z=Math.max(z,
I))})}return{start:r,end:z}};c.getTimeOperator=function(F,B,f){if(!B||!F)return null;const {startTimeField:p,endTimeField:d}=F;if(!p&&!d)return null;const {start:r,end:z}=B;if(null===r&&null===z)return null;if(void 0===r&&void 0===z)return w();F=f.getAttributeAsTimestamp?.bind(f)??f.getAttribute.bind(f);return p&&d?g(F,p,d,r,z):y(F,p||d,r,z)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),
function(c,g,y,w,F,B,f,p){function d(t){return t.trim().toLowerCase()}function r(t){const q=new Map;if(!t.fields)return q;const a=!0===t.datesInUnknownTimezone,{timeInfo:u,editFieldsInfo:n}=t;var C=(u?"startField"in u?u.startField:u.startTimeField:"")??"";const P=(u?"endField"in u?u.endField:u.endTimeField:"")??"",e="dateFieldsTimeZone"in t?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?f.fromTimeReference(t.dateFieldsTimeReference):null,K=n?"timeZone"in n?n.timeZone??e:n.dateFieldsTimeReference?
f.fromTimeReference(n.dateFieldsTimeReference):e??f.utc:null,Q=u?"timeZone"in u?u.timeZone??e:u.timeReference?f.fromTimeReference(u.timeReference):e:null;C=new Map([[d(n?.creationDateField??""),K],[d(n?.editDateField??""),K],[d(C),Q],[d(P),Q]]);for(const {name:S,type:ba}of t.fields)I.has(ba)?q.set(S,f.unknown):"date"!==ba&&"esriFieldTypeDate"!==ba?q.set(S,null):a?q.set(S,f.unknown):(t=C.get(d(S??""))??e,q.set(S,t));return q}const z=new Map;class D{static fromJSON(t){return new D(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new D(t.fields??
[],r(t))}static fromLayerJSON(t){return new D(t.fields??[],r(t))}constructor(t=[],q){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=t||[];this._timeZoneByFieldName=q?new Map(q):null;t=[];for(const a of this.fields){q=a?.name;const u=B.normalizeFieldName(q)?.toLowerCase()??"";if(q&&u){const n=d(q);this._fieldsMap.set(q,a);this._fieldsMap.set(n,a);this._normalizedFieldsMap.set(u,
a);t.push(`${n}:${a.type}:${this._timeZoneByFieldName?.get(q)}`);B.isDateField(a)?(this.dateFields.push(a),this._dateFieldsSet.add(a)):B.isNumericField(a)&&(this._numericFieldsSet.add(a),this.numericFields.push(a));B.isObjectIDField(a)||B.isGlobalIDField(a)||(a.editable=null==a.editable||!!a.editable,a.nullable=null==a.nullable||!!a.nullable)}}t.sort();this.uid=t.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)B.isObjectIDField(t)||B.isGlobalIDField(t)||
t.nullable||void 0!==B.getFieldDefaultValue(t)||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===t?.uid}has(t){return null!=this.get(t)}get(t){if(t){var q=this._fieldsMap.get(t);if(q)return q;(q=this._fieldsMap.get(d(t))??this._normalizedFieldsMap.get(B.normalizeFieldName(t)?.toLowerCase()??""))&&this._fieldsMap.set(t,q);return q}}getTimeZone(t){t=this.get(t&&"string"!==typeof t?t.name:t);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):
"date"===t.type||"esriFieldTypeDate"===t.type?(y.getLogger("esri.layers.support.FieldsIndex").error(new c("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),f.utc):I.has(t.type)?f.unknown:null:null}getLuxonTimeZone(t){const q=this.getTimeZone(t);return q?q===f.unknown?F.UnknownTimeZone.instance:q===f.utc?p.FixedOffsetZone.utcInstance:w.getOrCreateMapValue(z,q,()=>p.IANAZone.create(q)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return B.isTimeOnlyField(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){return this.get(t)?.name??
void 0}toJSON(){return{fields:this.fields.map(t=>g.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const I=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return D})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(c,g,y,w,F,B,f,p,d,r,z,D,I,t,q){function a(U){return u.has(U)?u.get(U):"number"===typeof U?U:1}c.TaskPriority=void 0;(function(U){U.RESOURCE_CONTROLLER_IMMEDIATE="immediate";U.RESOURCE_CONTROLLER="schedule";U.SLIDE="slide";U.STREAM_DATA_LOADER="stream loader";U.ELEVATION_QUERY="elevation query";U.TERRAIN_SURFACE="terrain";U.SURFACE_GEOMETRY_UPDATES="surface geometry updates";U.LOD_RENDERER="LoD renderer";U.GRAPHICS_CORE="Graphics3D";U.I3S_CONTROLLER="I3S";U.POINT_CLOUD_LAYER="point cloud";
U.FEATURE_TILE_FETCHER="feature fetcher";U.OVERLAY="overlay";U.STAGE="stage";U.GRAPHICS_DECONFLICTOR="graphics deconflictor";U.FILTER_VISIBILITY="Graphics3D filter visibility";U.SCALE_VISIBILITY="Graphics3D scale visibility";U.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";U.POINT_OF_INTEREST_FREQUENT="POI frequent";U.POINT_OF_INTEREST_INFREQUENT="POI infrequent";U.LABELER="labeler";U.FEATURE_QUERY_ENGINE="feature query";U.FEATURE_TILE_TREE="feature tile tree";U.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
U.ELEVATION_ALIGNMENT="elevation alignment";U.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";U.TEXT_TEXTURE_ATLAS="text texture atlas";U.TEXTURE_UNLOAD="texture unload";U.LINE_OF_SIGHT_TOOL="line of sight tool";U.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";U.ELEVATION_PROFILE="elevation profile";U.SNAPPING="snapping";U.SHADOW_ACCUMULATOR="shadow accumulator";U.CLOUDS_GENERATOR="clouds generator";U[U.NONE=0]="NONE";U[U.TEST_PRIO=1]="TEST_PRIO"})(c.TaskPriority||(c.TaskPriority=
{}));const u=new Map([[c.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[c.TaskPriority.RESOURCE_CONTROLLER,4],[c.TaskPriority.SLIDE,0],[c.TaskPriority.STREAM_DATA_LOADER,0],[c.TaskPriority.ELEVATION_QUERY,0],[c.TaskPriority.TERRAIN_SURFACE,1],[c.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[c.TaskPriority.LOD_RENDERER,2],[c.TaskPriority.GRAPHICS_CORE,2],[c.TaskPriority.I3S_CONTROLLER,2],[c.TaskPriority.POINT_CLOUD_LAYER,2],[c.TaskPriority.FEATURE_TILE_FETCHER,2],[c.TaskPriority.OVERLAY,4],[c.TaskPriority.STAGE,
4],[c.TaskPriority.GRAPHICS_DECONFLICTOR,4],[c.TaskPriority.FILTER_VISIBILITY,4],[c.TaskPriority.SCALE_VISIBILITY,4],[c.TaskPriority.FRUSTUM_VISIBILITY,4],[c.TaskPriority.CLOUDS_GENERATOR,4],[c.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[c.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[c.TaskPriority.LABELER,8],[c.TaskPriority.FEATURE_QUERY_ENGINE,8],[c.TaskPriority.FEATURE_TILE_TREE,16],[c.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[c.TaskPriority.ELEVATION_ALIGNMENT,12],[c.TaskPriority.ELEVATION_ALIGNMENT_SCENE,
14],[c.TaskPriority.TEXT_TEXTURE_ATLAS,12],[c.TaskPriority.TEXTURE_UNLOAD,12],[c.TaskPriority.LINE_OF_SIGHT_TOOL,16],[c.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[c.TaskPriority.SNAPPING,0],[c.TaskPriority.SHADOW_ACCUMULATOR,30]]),n=z.Milliseconds(6.5),C=z.Milliseconds(1),P=z.Milliseconds(30),e=z.Milliseconds(1E3/30),K=z.Milliseconds(100);var Q;(function(U){class v{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(h=>h.needsUpdate)}constructor(){this._updating=
r.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new B("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new m;this._state=t.RenderState.INTERACTING;this._tasks=new f;this._runQueue=new f;this._load=0;this._idleStateCallbacks=new f;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=d.watch(()=>I.SCHEDULER_LOG_SLOW_TASKS,h=>this._debug=h,d.initial);for(const h of Object.keys(c.TaskPriority))this.performanceInfo.tasks.set(c.TaskPriority[h],
new B(c.TaskPriority[h]))}destroy(){this._tasks.toArray().forEach(h=>h.remove());this._tasks.clear();F.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(h){this._updatingChanged();h&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(h,x){x=new H(this,h,x);this._tasks.push(x);this._updatingChanged();
this.performanceInfo.tasks.has(h)||this.performanceInfo.tasks.set(h,new B(h));return x}registerIdleStateCallbacks(h,x){const N={idleBegin:h,idleEnd:x};this._idleStateCallbacks.push(N);this.state===t.RenderState.IDLE&&this._idleUpdatesStartFired&&N.idleBegin();const L=this;return{remove:()=>this._removeIdleStateCallbacks(N),set idleBegin(T){L._idleUpdatesStartFired&&(N.idleEnd(),L._state===t.RenderState.IDLE&&T());N.idleBegin=T},set idleEnd(T){N.idleEnd=T}}}get load(){return this._load}set state(h){this._state!==
h&&(this._state=h,this.state!==t.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(x=>x.idleEnd())))}get state(){return this._state}updateBudget(h){++this._frameNumber;let x=n,N=h.frameDuration,L=C;switch(this.state){case t.RenderState.IDLE:x=z.Milliseconds(0);N=z.Milliseconds(Math.max(K,h.frameDuration));L=P;break;case t.RenderState.INTERACTING:N=z.Milliseconds(Math.max(e,h.frameDuration))}N=z.Milliseconds(N-h.elapsedFrameTime-x);if(this.state!==
t.RenderState.IDLE&&N<C&&!this._forceTask)return this._forceTask=!0,!1;N=z.Milliseconds(Math.max(N,L));this._budget.reset(N,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case t.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(h=>h.idleBegin()));this._runIdle();break;case t.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}}stopFrame(){this._budget.reset(z.Milliseconds(0),
this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(h){this._idleUpdatesStartFired&&h.idleEnd();this._idleStateCallbacks.removeUnordered(h)}removeTask(h){this._tasks.removeUnordered(h);this._runQueue.removeUnordered(h);this._updatingChanged()}_updateTask(h){this._tasks.forAll(x=>{x.name===h&&x.setPriority(h)})}_getState(h){if(this._runQueue.some(N=>N.name===h))return c.TaskState.SCHEDULED;let x=c.TaskState.IDLE;this._tasks.forAll(N=>{N.name===h&&N.needsUpdate&&(1>=N.schedulePriority?
x=c.TaskState.READY:x!==c.TaskState.READY&&(x=c.TaskState.WAITING))});return x}_getRuntime(h){let x=0;this._tasks.forAll(N=>{N.name===h&&(x+=N.runtime)});return x}_resetRuntimes(){this._tasks.forAll(h=>h.runtime=0)}_getRunning(){const h=new Map;this._tasks.forAll(N=>{N.needsUpdate&&h.set(N.name,(h.get(N.name)||0)+1)});if(0===h.size)return null;let x="";h.forEach((N,L)=>{x=1<N?x+` ${N}x ${L}`:x+` ${L}`});return x}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const h=
this._tasks.reduce((x,N)=>N.needsUpdate?++x:x,0);this._load=.9*this._load+h*(1-.9)}_schedule(){this._runQueue.filterInPlace(h=>{if(h.needsUpdate)return!0;h.schedulePriority=h.basePriority;return!1});for(this._tasks.forAll(h=>{0===h.basePriority&&h.needsUpdate&&!this._runQueue.includes(h)&&h.blockFrame!==this._frameNumber&&this._runQueue.unshift(h)});0===this._runQueue.length;){let h=!1;this._tasks.forAll(x=>{if(x.needsUpdate&&0!==x.schedulePriority&&0!==x.basePriority&&x.blockFrame!==this._frameNumber)switch(h=
!0,x.schedulePriority){case 1:x.schedulePriority=0;this._runQueue.push(x);break;default:--x.schedulePriority}});if(!h)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const h=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var x=this._budget.now();const N=this._runQueue.pop();this._budget.resetProgress();try{N.task.runTask(this._budget)===q.Yield&&(N.blockFrame=this._frameNumber)}catch(L){w.getLogger("esri.views.support.Scheduler").error(`Exception in task "${N.name}"`,
L),N.blockFrame=this._frameNumber}!this._budget.hasProgressed&&N.blockFrame!==this._frameNumber&&N.needsUpdate&&(N.blockFrame=this._frameNumber);N.schedulePriority=N.basePriority;x=this._budget.now()-x;N.runtime+=x;this._frameTaskTimes.set(N.priority,this._frameTaskTimes.get(N.priority)+x);if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-h);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-h)}_startFrameTaskTimes(){for(const h of Object.keys(c.TaskPriority))this._frameTaskTimes.set(c.TaskPriority[h],
0)}_recordFrameTaskTimes(h){this._frameTaskTimes.forEach((x,N)=>this.performanceInfo.tasks.get(N).record(x));this.performanceInfo.total.record(h)}get test(){}}U.Scheduler=v;class H{get task(){return this._task.value}get updating(){return this._queue.running}constructor(h,x,N){this._scheduler=h;this.name=x;this.runtime=this.blockFrame=0;this._queue=new D.PromiseQueue;this._handles=new g;this.schedulePriority=this._basePriority=a(x);this._task=r.signal(null!=N?N:this._queue);this._handles.add(d.when(()=>
this.task.running,L=>h.taskRunningChanged(L)))}remove(){this.processQueue(S);this._scheduler.removeTask(this);this.schedule=W.schedule;this.reschedule=W.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(h){if(this.name!==h){this.name=h;h=a(h);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=h;this._basePriority=h}}get priority(){return this.name}set priority(h){this.setPriority(h)}get needsUpdate(){return this.updating||this.task.running}schedule(h,
x,N){return this._queue.push(h,x,N)}reschedule(h,x,N){return this._queue.unshift(h,x,N)}processQueue(h){return this._queue.runTask(h)}}class m{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=t.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(h){if(this.done)return!1;!0===h()&&this.madeProgress();return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=
this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(h){this._enabled=h}reset(h,x){this._begin=this.now();this._budget=h;this._state=x;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._done=this._progressed=!1}get hasProgressed(){return this._progressed}}U.Budget=m})(Q||={});c.TaskState=void 0;(function(U){U.SCHEDULED=
"s";U.READY="r";U.WAITING="w";U.IDLE="i"})(c.TaskState||(c.TaskState={}));const S=(()=>{const U=new Q.Budget;U.enabled=!1;return U})();class ba{remove(){}processQueue(){}schedule(U,v,H){try{if(p.isAborted(v)){const m=p.createAbortError();return H?Promise.resolve(H(m)):Promise.reject(m)}return p.when(U(S))}catch(m){return Promise.reject(m)}}reschedule(U,v,H){return this.schedule(U,v,H)}}const W=new ba;c.ImmediateTask=W;c.getTaskPriority=a;c.newScheduler=function(){return new Q.Scheduler};c.noBudget=
S;c.taskPriorities=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(c,g,y,w){class F{constructor(B,f){this._observable=new w.SimpleObservable;this._value=B;this._equalityFunction=f}get value(){y.trackAccess(this._observable);return this._value}set value(B){this._equalityFunction(B,this._value)||(this._value=B,this._observable.notify())}mutate(B){B(this._value);
this._observable.notify()}}c.signal=function(B,f=g.equalsShallow){return new F(B,f)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(c,g,y,w){class F{constructor(){this._tasks=[];this._runningTasks=y.signal(0)}get length(){return this._tasks.length}get running(){return 0<this._runningTasks.value}destroy(){this.cancelAll()}runTask(f){if(0===
this.length)return w.Yield;for(;!f.done&&this._process(f);)f.madeProgress()}push(f,p,d){++this._runningTasks.value;return(new Promise((r,z)=>this._tasks.push(new B(r,z,f,p,d)))).finally(()=>--this._runningTasks.value)}unshift(f,p,d){++this._runningTasks.value;return(new Promise((r,z)=>this._tasks.unshift(new B(r,z,f,p,d)))).finally(()=>--this._runningTasks.value)}_process(f){if(0===this._tasks.length)return!1;const p=this._tasks.shift();try{const d=g.isAborted(p.signal);if(d&&!p.abortCallback)p.reject(g.createAbortError());
else{const r=d?p.abortCallback?.(g.createAbortError()):p.callback(f);g.isPromiseLike(r)?r.then(p.resolve,p.reject):p.resolve(r)}}catch(d){p.reject(d)}return!0}cancelAll(){const f=g.createAbortError();for(const p of this._tasks)if(p.abortCallback){const d=p.abortCallback(f);p.resolve(d)}else p.reject(f);this._tasks.length=0}}class B{constructor(f,p,d,r,z){this.resolve=f;this.reject=p;this.callback=d;this.signal=r;this.abortCallback=z}}c.PromiseQueue=F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/views/support/Yield":function(){define(["exports"],function(c){const g=Symbol("Yield");c.Yield=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(c,g,y,w,F,B,f){g=class extends g{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=
this.SCHEDULER_LOG_SLOW_TASKS=!1}};c.__decorate([y.property()],g.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);c.__decorate([y.property()],g.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);g=c.__decorate([f.subclass("esri.views.support.debugFlags")],g);return new g})},"esri/views/support/RenderState":function(){define(["exports"],function(c){c.RenderState=void 0;var g=c.RenderState||(c.RenderState={});g[g.ANIMATING=0]="ANIMATING";g[g.INTERACTING=1]="INTERACTING";g[g.IDLE=2]=
"IDLE";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(c,g,y,w,F){function B(d){return f.test(d)?`.${d}`:`["${d}"]`}const f=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let p=1;c.createCapabilities=function(d,r){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,
supportsAttachment:!1,supportsM:!1,supportsZ:d},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:r,supportsDelete:r,supportsEditing:r,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:r,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:w.queryCapabilities,queryRelated:{supportsCount:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:r,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}};c.createDefaultAttributesFunction=function(d,r){if(g("esri-csp-restrictions"))return()=>
({[r]:null,...d});try{let z=`this${B(r)} = null;`;for(const I in d){const t=B(I);z+=`this${t} = ${JSON.stringify(d[I])};`}const D=(new Function(`\n      return class AttributesClass$${p++} {\n        constructor() {\n          ${z};\n        }\n      }\n    `))();return()=>new D}catch(z){return()=>({[r]:null,...d})}};c.createDefaultTemplate=function(d={}){return[{name:"New Feature",description:"",prototype:{attributes:y.clone(d)}}]};c.createDrawingInfo=function(d){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===
d||"esriGeometryMultipoint"===d?F.defaultPointSymbolJSON:"esriGeometryPolyline"===d?F.defaultPolylineSymbolJSON:F.defaultPolygonSymbolJSON}}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(c){const g=[252,146,31,255],y={type:"esriSMS",style:"esriSMSCircle",size:6,color:g,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},w={type:"esriSLS",style:"esriSLSSolid",width:.75,color:g};
c.defaultColor=g;c.defaultOutlineColor=[153,153,153,255];c.defaultPointSymbolJSON=y;c.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};c.defaultPolylineSymbolJSON=w;c.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,
yoffset:0,angle:0};c.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};c.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};c.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../core/date","../../../../geometry/support/spatialReferenceUtils",
"../../../support/fieldUtils"],function(c,g,y,w,F){function B(I){return new d(I)}async function f(){null==D&&(D=await new Promise((I,t)=>c(["../../../../geometry/geometryEngineJSON"],I,t)));return D}class p{constructor(){this.description=this.code=null}}class d{constructor(I){this.error=new p;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=I}}class r{constructor(I){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=I}}const z=new Set;let D;g.createFeatureEditErrorResult=
B;g.createFeatureEditSuccessResult=function(I){return new r(I)};g.loadGeometryEngineForSimplify=async function(I,t){!w.isValid(I)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await f()};g.mixAttributes=function(I,t,q,a=!1){z.clear();for(const C in q){const P=I.get(C);if(!P)continue;var u=P,n=q[C];let e=n;F.isNumericField(u)&&"string"===typeof n?e=parseFloat(n):F.isStringField(u)&&null!=n&&"string"!==typeof n?e=String(n):F.isDateField(u)&&"string"===typeof n&&(e=y.parseDate(n));u=F.sanitizeNullFieldValue(e);
z.add(P.name);if(P&&(a||P.editable)){if(n=F.validateFieldValue(P,u))return B(F.validationErrorToString(n,P,u));t[P.name]=u}}for(const C of I?.requiredFields??[])if(!z.has(C.name))return B(`missing required field "${C.name}"`);return null};g.simplify=function(I,t){if(!I||!w.isValid(t))return I;if("rings"in I||"paths"in I){if(null==D)throw new TypeError("geometry engine not loaded");return D.simplify(t,I)}return I};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/date":function(){define(["exports"],
function(c){function g(f){const p=new Date(f);if(Number.isNaN(p.getTime()))f=!1;else{var d=!0;if(B&&/\d+\W*$/.test(f)&&(f=f.match(/[a-zA-Z]{2,}/))){d=!1;let r=0;for(;!d&&r<=f.length;)d=!F.test(f[r]),r++;d=!d}f=d}return f?Number.isNaN(p.getTime())?null:p.getTime()-6E4*p.getTimezoneOffset():null}function y(f){f=w.exec(f);if(!f?.groups)return null;f=f.groups;const p=+f.year,d=+f.month-1,r=+f.day,z=+(f.hours??0),D=+(f.minutes??0),I=+(f.seconds??0);if(23<z||59<D||59<I)return null;var t=f.ms??"0";t=t?+t.padEnd(3,
"0").substring(0,3):0;f=f.isUTC||!f.offsetSign?Date.UTC(p,d,r,z,D,I,t):6E4*("+"===f.offsetSign?-1:1)*(60*+f.offsetHours+ +f.offsetMinutes)+Date.UTC(p,d,r,z,D,I,t);return Number.isNaN(f)?null:f}const w=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,F=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
B=!Number.isNaN((new Date("technology 10")).getTime());c.isDateString=function(f){return null!=y(f)||null!=g(f)};c.isISO8601Date=function(f){return w.test(f)};c.parseDate=function(f){return y(f)??g(f)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../core/Error ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils ../../../../time/timeZoneUtils".split(" "),function(c,g,y,w,F,B,f,p,d,r,z,D,I,t){function q(e){return g.isPoint(e)?null!=e.z:!!e.hasZ}function a(e){return g.isPoint(e)?
null!=e.m:!!e.hasM}const u=y.wgs84,n={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:y.wgs84},C={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,
supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class P{constructor(){this._nextObjectId=this._queryEngine=null}destroy(){this._queryEngine?.destroy();this._queryEngine=this._createDefaultAttributes=null}async load(e){var K=[];const {features:Q}=e;var S=this._inferLayerProperties(Q,e.fields);const ba=e.fields||[],W=null!=e.hasM?e.hasM:!!S.hasM,U=null!=e.hasZ?e.hasZ:!!S.hasZ,v=!e.spatialReference&&
!S.spatialReference,H=v?u:e.spatialReference||S.spatialReference,m=v?n:null,h=e.geometryType||S.geometryType,x=!h;let N=e.objectIdField||S.objectIdField,L=e.timeInfo;const T=new z(ba);if(!x&&(v&&K.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!h))throw new c("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!N)throw new c("feature-layer:missing-property",
"objectIdField not set and couldn't be found in the provided fields");S.objectIdField&&N!==S.objectIdField&&(K.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${N}" doesn't match the field name "${S.objectIdField}", found in the provided fields`}),N=S.objectIdField);N&&!S.objectIdField&&((S=T.get(N))?(N=S.name,S.type="esriFieldTypeOID",S.editable=!1,S.nullable=!1):ba.unshift({alias:N,name:N,type:"esriFieldTypeOID",editable:!1,nullable:!1}));for(var X of ba){null==
X.name&&(X.name=X.alias);null==X.alias&&(X.alias=X.name);if(!X.name)throw new c("feature-layer:invalid-field-name","field name is missing",{field:X});X.name===N&&(X.type="esriFieldTypeOID");if(!D.kebabDict.jsonValues.includes(X.type))throw new c("feature-layer:invalid-field-type",`invalid type for field "${X.name}"`,{field:X});null==X.length&&(X.length=I.getFieldDefaultLength(X))}X={};for(var da of ba)"esriFieldTypeOID"!==da.type&&"esriFieldTypeGlobalID"!==da.type&&(S=I.getFieldDefaultValue(da),void 0!==
S&&(X[da.name]=S));L&&(L.startTimeField&&((da=T.get(L.startTimeField))?(L.startTimeField=da.name,da.type="esriFieldTypeDate"):L.startTimeField=null),L.endTimeField&&((da=T.get(L.endTimeField))?(L.endTimeField=da.name,da.type="esriFieldTypeDate"):L.endTimeField=null),L.trackIdField&&((da=T.get(L.trackIdField))?L.trackIdField=da.name:(L.trackIdField=null,K.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:L}}))),L.startTimeField||L.endTimeField||
(K.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:L}}),L=null));e=T.dateFields.length?{timeZoneIANA:e.dateFieldsTimeZone??t.utc}:null;this._createDefaultAttributes=d.createDefaultAttributesFunction(X,N);K={warnings:K,featureErrors:[],layerDefinition:{...C,drawingInfo:d.createDrawingInfo(h),templates:d.createDefaultTemplate(X),extent:m,geometryType:h,objectIdField:N,fields:ba,hasZ:U,hasM:W,timeInfo:L,dateFieldsTimeReference:e},
assignedObjectIds:{}};this._queryEngine=new p.QueryEngine({fieldsIndex:z.fromLayerJSON({fields:ba,timeInfo:L,dateFieldsTimeReference:e}),geometryType:h,hasM:W,hasZ:U,objectIdField:N,spatialReference:H,featureStore:new B({geometryType:h,hasM:W,hasZ:U}),timeInfo:L,cacheSpatialQueries:!0});if(!Q?.length)return this._nextObjectId=F.initialObjectId,K;this._nextObjectId=F.findLastObjectIdFromFeatures(N,Q)+1;await f.checkProjectionSupport(Q,H);return this._loadInitialFeatures(K,Q)}async applyEdits(e){const {spatialReference:K,
geometryType:Q}=this._queryEngine;await Promise.all([r.loadGeometryEngineForSimplify(K,Q),f.checkProjectionSupport(e.adds,K),f.checkProjectionSupport(e.updates,K)]);return this._applyEdits(e)}queryFeatures(e,K={}){return this._queryEngine.executeQuery(e,K.signal)}queryFeatureCount(e,K={}){return this._queryEngine.executeQueryForCount(e,K.signal)}queryObjectIds(e,K={}){return this._queryEngine.executeQueryForIds(e,K.signal)}queryExtent(e,K={}){return this._queryEngine.executeQueryForExtent(e,K.signal)}querySnapping(e,
K={}){return this._queryEngine.executeQueryForSnapping(e,K.signal)}_inferLayerProperties(e,K){let Q=void 0,S=void 0,ba=null,W=null,U=null;for(const v of e)if(e=v.geometry,null!=e&&(ba||=g.getJsonType(e),W||(W=e.spatialReference),null==Q&&(Q=q(e)),null==S&&(S=a(e)),ba&&W&&null!=Q&&null!=S))break;if(K&&K.length){let v=null;K.some(H=>{const m="esriFieldTypeOID"===H.type,h=!H.type&&H.name&&"objectid"===H.name.toLowerCase();v=H;return m||h})&&(U=v.name)}return{geometryType:ba,spatialReference:W,objectIdField:U,
hasM:S,hasZ:Q}}async _loadInitialFeatures(e,K){const {geometryType:Q,hasM:S,hasZ:ba,objectIdField:W,spatialReference:U,featureStore:v,fieldsIndex:H}=this._queryEngine,m=[];for(const N of K){null!=N.uid&&(e.assignedObjectIds[N.uid]=-1);if(N.geometry&&Q!==g.getJsonType(N.geometry)){e.featureErrors.push(r.createFeatureEditErrorResult("Incorrect geometry type."));continue}K=this._createDefaultAttributes();const L=r.mixAttributes(H,K,N.attributes,!0);L?e.featureErrors.push(L):(this._assignObjectId(K,N.attributes,
!0),N.attributes=K,null!=N.uid&&(e.assignedObjectIds[N.uid]=N.attributes[W]),null!=N.geometry&&(N.geometry=f.project(N.geometry,N.geometry.spatialReference,U)),m.push(N))}v.addMany(w.convertFromFeatures([],m,Q,ba,S,W));const {fullExtent:h,timeExtent:x}=await this._queryEngine.fetchRecomputedExtents();e.layerDefinition.extent=h;if(x){const {start:N,end:L}=x;e.layerDefinition.timeInfo.timeExtent=[N,L]}return e}async _applyEdits(e){const {adds:K,updates:Q,deletes:S}=e;e={addResults:[],deleteResults:[],
updateResults:[],uidToObjectId:{}};K?.length&&this._applyAddEdits(e,K);Q?.length&&this._applyUpdateEdits(e,Q);if(S?.length){for(const U of S)e.deleteResults.push(r.createFeatureEditSuccessResult(U));this._queryEngine.featureStore.removeManyById(S)}const {fullExtent:ba,timeExtent:W}=await this._queryEngine.fetchRecomputedExtents();return{extent:ba,timeExtent:W,featureEditResults:e}}_applyAddEdits(e,K){const {addResults:Q}=e,{geometryType:S,hasM:ba,hasZ:W,objectIdField:U,spatialReference:v,featureStore:H,
fieldsIndex:m}=this._queryEngine,h=[];for(const x of K){if(x.geometry&&S!==g.getJsonType(x.geometry)){Q.push(r.createFeatureEditErrorResult("Incorrect geometry type."));continue}K=this._createDefaultAttributes();const N=r.mixAttributes(m,K,x.attributes);N?Q.push(N):(this._assignObjectId(K,x.attributes),x.attributes=K,null!=x.uid&&(e.uidToObjectId[x.uid]=x.attributes[U]),null!=x.geometry&&(K=x.geometry.spatialReference??v,x.geometry=f.project(r.simplify(x.geometry,K),K,v)),h.push(x),Q.push(r.createFeatureEditSuccessResult(x.attributes[U])))}H.addMany(w.convertFromFeatures([],
h,S,W,ba,U))}_applyUpdateEdits({updateResults:e},K){const {geometryType:Q,hasM:S,hasZ:ba,objectIdField:W,spatialReference:U,featureStore:v,fieldsIndex:H}=this._queryEngine;for(const h of K){const {attributes:x,geometry:N}=h;K=x?.[W];if(null==K){e.push(r.createFeatureEditErrorResult(`Identifier field ${W} missing`));continue}if(!v.has(K)){e.push(r.createFeatureEditErrorResult(`Feature with object id ${K} missing`));continue}const L=w.convertToFeature(v.getFeature(K),Q,ba,S);if(null!=N){if(Q!==g.getJsonType(N)){e.push(r.createFeatureEditErrorResult("Incorrect geometry type."));
continue}var m=N.spatialReference??U;L.geometry=f.project(r.simplify(N,m),m,U)}if(x&&(m=r.mixAttributes(H,L.attributes,x))){e.push(m);continue}v.add(w.convertFromFeature(L,Q,ba,S,W));e.push(r.createFeatureEditSuccessResult(K))}}_assignObjectId(e,K,Q=!1){const S=this._queryEngine.objectIdField;Q?K&&isFinite(K[S])?e[S]=K[S]:e[S]=this._nextObjectId++:e[S]=this._nextObjectId++}}return P});