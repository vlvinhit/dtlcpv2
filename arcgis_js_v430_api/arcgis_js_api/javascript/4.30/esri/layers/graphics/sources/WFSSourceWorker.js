// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(b,f,y,r,D,z,g,n,e,v){function A(C,K){return C?K?4:3:K?3:2}function w(C,K,M,V){if(C){if(M)return K&&V?G:Ma;if(K&&V)return h}else if(K&&V)return Ma;return Ha}function E({scale:C,
translate:K},M){return Math.round((M-K[0])/C[0])}function t({scale:C,translate:K},M){return Math.round((K[1]-M)/C[1])}function q({scale:C,translate:K},M,V){return M*C[V]+K[V]}function a(C){C=C.coords;return{x:C[0],y:C[1]}}function u(C,K){C.coords[0]=K.x;C.coords[1]=K.y;return C}function p(C){C=C.coords;return{x:C[0],y:C[1],z:C[2]}}function F(C,K){C.coords[0]=K.x;C.coords[1]=K.y;C.coords[2]=K.z;return C}function L(C){C=C.coords;return{x:C[0],y:C[1],m:C[2]}}function d(C,K){C.coords[0]=K.x;C.coords[1]=
K.y;C.coords[2]=K.m;return C}function J(C){C=C.coords;return{x:C[0],y:C[1],z:C[2],m:C[3]}}function Q(C,K){C.coords[0]=K.x;C.coords[1]=K.y;C.coords[2]=K.z;C.coords[3]=K.m;return C}function S(C,K){return C&&K?Q:C?F:K?d:u}function Z(C,K,M,V,aa){M=S(M,V);for(const {geometry:ca,attributes:ha}of K)K=null!=ca?M(new v,ca):null,C.push(new n.OptimizedFeature(K,ha,null,aa?ha[aa]:void 0));return C}function W(C,K,M=S(null!=K.z,null!=K.m)){return M(C,K)}function U(C,K,M,V){for(const {geometry:aa,attributes:ca}of K)C.push({attributes:ca,
geometry:null!=aa?x(aa,M,V):null});return C}function x(C,K,M){if(null==C)return null;const V=A(K,M),aa=[];for(let ca=0;ca<C.coords.length;ca+=V){const ha=[];for(let oa=0;oa<V;oa++)ha.push(C.coords[ca+oa]);aa.push(ha)}return K?M?{points:aa,hasZ:K,hasM:M}:{points:aa,hasZ:K}:M?{points:aa,hasM:M}:{points:aa}}function I(C,K,M,V,aa){M=A(M,V);for(const {geometry:ca,attributes:ha}of K)K=null!=ca?m(new v,ca,M):null,C.push(new n.OptimizedFeature(K,ha,null,aa?ha[aa]:void 0));return C}function m(C,K,M=A(K.hasZ,
K.hasM)){C.lengths[0]=K.points.length;const V=C.coords;let aa=0;for(const ca of K.points)for(K=0;K<M;K++)V[aa++]=ca[K];return C}function l(C,K,M){if(!C)return null;const V=A(K,M),{coords:aa,lengths:ca}=C;C=[];let ha=0;for(const oa of ca){const pa=[];for(let ya=0;ya<oa;ya++){const ta=[];for(let wa=0;wa<V;wa++)ta.push(aa[ha++]);pa.push(ta)}C.push(pa)}return K?M?{paths:C,hasZ:K,hasM:M}:{paths:C,hasZ:K}:M?{paths:C,hasM:M}:{paths:C}}function B(C,K,M,V,aa){M=A(M,V);for(const {geometry:ca,attributes:ha,
centroid:oa}of K)K=null!=ca?P(new v,ca,M):null,V=null!=oa?W(new v,oa):null,C.push(new n.OptimizedFeature(K,ha,V,aa?ha[aa]:void 0));return C}function P(C,K,M=A(K.hasZ,K.hasM)){const {lengths:V,coords:aa}=C;let ca=0;for(const ha of K.paths){for(const oa of ha)for(K=0;K<M;K++)aa[ca++]=oa[K];V.push(ha.length)}return C}function N(C,K,M){if(!C)return null;const V=A(K,M),{coords:aa,lengths:ca}=C;C=[];let ha=0;for(const oa of ca){const pa=[];for(let ya=0;ya<oa;ya++){const ta=[];for(let wa=0;wa<V;wa++)ta.push(aa[ha++]);
pa.push(ta)}C.push(pa)}return K?M?{rings:C,hasZ:K,hasM:M}:{rings:C,hasZ:K}:M?{rings:C,hasM:M}:{rings:C}}function T(C,K,M=K.hasZ,V=K.hasM){return Y(C,K.rings,M,V)}function Y(C,K,M,V){M=A(M,V);const {lengths:aa,coords:ca}=C;V=0;ua(C);for(const ha of K){for(const oa of ha)for(K=0;K<M;K++)ca[V++]=oa[K];aa.push(ha.length)}return C}function ea(C,K,M,V,aa,ca){xa(C);if(!M){for(const ha of K)C.push(new n.OptimizedFeature(null,ha.attributes,null,ca?ha.attributes[ca]:void 0));return C}switch(M){case "esriGeometryPoint":return Z(C,
K,V,aa,ca);case "esriGeometryMultipoint":return I(C,K,V,aa,ca);case "esriGeometryPolyline":return B(C,K,V,aa,ca);case "esriGeometryPolygon":for(const {geometry:ha,centroid:oa,attributes:pa}of K)K=null!=ha?T(new v,ha,V,aa):null,M=ca?pa[ca]:void 0,null!=oa?C.push(new n.OptimizedFeature(K,pa,u(new v,oa),M)):C.push(new n.OptimizedFeature(K,pa,null,M));break;default:Aa().error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${M}'`)),xa(C)}return C}function la(C,K,M,
V){C=C&&("coords"in C?C:C.geometry);if(null==C)return null;switch(K){case "esriGeometryPoint":return K=a,M&&V?K=J:M?K=p:V&&(K=L),K(C);case "esriGeometryMultipoint":return x(C,M,V);case "esriGeometryPolyline":return l(C,M,V);case "esriGeometryPolygon":return N(C,M,V);default:return Aa().error("convertToGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${K}'`)),null}}function ra(C,K,M,V,aa){xa(C);if(null==M){for(const ha of K)C.push({attributes:ha.attributes});return C}switch(M){case "esriGeometryPoint":M=
a;V&&aa?M=J:V?M=p:aa&&(M=L);for(var ca of K){const {geometry:ha,attributes:oa}=ca;V=null!=ha?M(ha):null;C.push({attributes:oa,geometry:V})}break;case "esriGeometryMultipoint":return U(C,K,V,aa);case "esriGeometryPolyline":for(const {geometry:ha,attributes:oa}of K)C.push({attributes:oa,geometry:null!=ha?l(ha,V,aa):null});break;case "esriGeometryPolygon":for(const {geometry:ha,attributes:oa,centroid:pa}of K)ca=null!=ha?N(ha,V,aa):null,null!=pa?(K=a(pa),C.push({attributes:oa,centroid:K,geometry:ca})):
C.push({attributes:oa,geometry:ca});break;default:Aa().error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${M}'`))}return C}function da(C,K,M,V,aa,ca,ha=M,oa=V){ua(C);if(!K?.coords.length)return null;aa=Ka[aa];const {coords:pa,lengths:ya}=K;K=A(M,V);const ta=A(M&&ha,V&&oa);M=w(M,V,ha,oa);if(!ya.length)return M(C.coords,pa,0,0,E(ca,pa[0]),t(ca,pa[1])),ua(C,K,0),C;let wa,Fa=0,za,Ea=0;for(const Da of ya){if(Da<aa)continue;let Ba=0;za=Ea;oa=V=E(ca,pa[Fa]);wa=ha=
t(ca,pa[Fa+1]);M(C.coords,pa,za,Fa,oa,wa);Ba++;Fa+=K;za+=ta;for(let La=1;La<Da;La++,Fa+=K)if(oa=E(ca,pa[Fa]),wa=t(ca,pa[Fa+1]),oa!==V||wa!==ha)M(C.coords,pa,za,Fa,oa-V,wa-ha),za+=ta,Ba++,V=oa,ha=wa;Ba>=aa&&(C.lengths.push(Ba),Ea=za)}xa(C.coords,Ea);return C.coords.length?C:null}function ka(C,K,M,V,aa,ca,ha){let oa=V,pa=0;for(let ta=ca+M;ta<ha;ta+=M){var ya=K[ta];const wa=K[ta+1],Fa=K[ha],za=K[ha+1];let Ea=K[ca],Da=K[ca+1],Ba=Fa-Ea,La=za-Da;if(0!==Ba||0!==La){const Sa=((ya-Ea)*Ba+(wa-Da)*La)/(Ba*Ba+
La*La);1<Sa?(Ea=Fa,Da=za):0<Sa&&(Ea+=Ba*Sa,Da+=La*Sa)}Ba=ya-Ea;La=wa-Da;ya=Ba*Ba+La*La;ya>oa&&(pa=ta,oa=ya)}oa>V&&(pa-ca>M&&ka(C,K,M,V,aa,ca,pa),aa(C,K,C.length,pa,K[pa],K[pa+1]),ha-pa>M&&ka(C,K,M,V,aa,pa,ha))}function ia(C,K,M,V,aa){const {coords:ca,lengths:ha}=K;M=A(M,V);if(!ca.length)return C!==K&&ua(C),C;r.assertIsSome(aa);const {originPosition:oa,scale:pa,translate:ya}=aa;aa=ma;aa.originPosition=oa;V=aa.scale;V[0]=pa[0]??1;V[1]=-(pa[1]??1);V[2]=pa[2]??1;V[3]=pa[3]??1;var ta=aa.translate;ta[0]=
ya[0]??0;ta[1]=ya[1]??0;ta[2]=ya[2]??0;ta[3]=ya[3]??0;if(!ha.length){for(V=0;V<M;++V)C.coords[V]=q(aa,ca[V],V);C!==K&&ua(C,M,0);return C}ta=0;for(let Fa=0;Fa<ha.length;Fa++){const za=ha[Fa];C.lengths[Fa]=za;for(var wa=0;wa<M;++wa)C.coords[ta+wa]=q(aa,ca[ta+wa],wa);wa=C.coords[ta];let Ea=C.coords[ta+1];ta+=M;for(let Da=1;Da<za;Da++,ta+=M){wa+=ca[ta]*V[0];Ea+=ca[ta+1]*V[1];C.coords[ta]=wa;C.coords[ta+1]=Ea;for(let Ba=2;Ba<M;++Ba)C.coords[ta+Ba]=q(aa,ca[ta+Ba],Ba)}}C!==K&&ua(C,ca.length,ha.length);return C}
function qa(C,K,M,V){let aa=0,ca=C[V*K],ha=C[V*(K+1)];for(let oa=1;oa<M;oa++){const pa=ca+C[V*(K+oa)],ya=ha+C[V*(K+oa)+1],ta=(pa-ca)*(ya+ha);ca=pa;ha=ya;aa+=ta}return.5*aa}function ua(C,K=0,M=0){xa(C.lengths,M);xa(C.coords,K)}function xa(C,K=0){C.length!==K&&(C.length=K)}const Aa=()=>y.getLogger("esri.layers.graphics.featureConversionUtils"),Ka={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},Ha=(C,K,M,V,aa,ca)=>{C[M]=aa;C[M+1]=ca},
Ma=(C,K,M,V,aa,ca)=>{C[M]=aa;C[M+1]=ca;C[M+2]=K[V+2]},h=(C,K,M,V,aa,ca)=>{C[M]=aa;C[M+1]=ca;C[M+2]=K[V+3]},G=(C,K,M,V,aa,ca)=>{C[M]=aa;C[M+1]=ca;C[M+2]=K[V+2];C[M+3]=K[V+3]},X=[],ba=[],ma={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};b.convertFromFeature=function(C,K,M,V,aa){X[0]=C;[C]=ea(ba,X,K,M,V,aa);xa(X);xa(ba);return C};b.convertFromFeatureSet=function(C,K){const M=new e,{hasM:V,hasZ:aa,features:ca,objectIdFieldName:ha,spatialReference:oa,geometryType:pa,exceededTransferLimit:ya,
transform:ta,fields:wa}=C;wa&&(M.fields=wa);M.geometryType=pa??null;M.objectIdFieldName=ha??K??null;M.spatialReference=oa??null;if(!M.objectIdFieldName)return Aa().error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),M;ca&&ea(M.features,ca,pa,aa,V,M.objectIdFieldName);ya&&(M.exceededTransferLimit=ya);V&&(M.hasM=V);aa&&(M.hasZ=aa);ta&&(M.transform=ta);return M};b.convertFromFeatures=ea;b.convertFromGeometry=function(C,K,M){if(null==C)return null;const V=new v;
"hasZ"in C&&null==K&&(K=C.hasZ);"hasM"in C&&null==M&&(M=C.hasM);if(g.isPoint(C))return S(null!=K?K:null!=C.z,null!=M?M:null!=C.m)(V,C);if(g.isPolygon(C))return T(V,C,K,M);if(g.isPolyline(C))return P(V,C,A(K,M));if(g.isMultipoint(C))return m(V,C,A(K,M));Aa().error("convertFromGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${C}'`))};b.convertFromMultipoint=m;b.convertFromMultipointFeatures=I;b.convertFromNestedArray=Y;b.convertFromPoint=W;b.convertFromPointFeatures=Z;b.convertFromPolygon=
T;b.convertFromPolyline=P;b.convertFromPolylineFeatures=B;b.convertToFeature=function(C,K,M,V){ba[0]=C;ra(X,ba,K,M,V);C=X[0];xa(X);xa(ba);return C};b.convertToFeatureSet=function(C){const {objectIdFieldName:K,spatialReference:M,transform:V,fields:aa,hasM:ca,hasZ:ha,features:oa,geometryType:pa,exceededTransferLimit:ya,uniqueIdField:ta,queryGeometry:wa,queryGeometryType:Fa}=C;C=ra([],oa,pa,ha,ca);const za=la(wa,Fa,!1,!1);C={features:C,fields:aa,geometryType:pa,objectIdFieldName:K,spatialReference:M,
uniqueIdField:ta,queryGeometry:za};V&&(C.transform=V);ya&&(C.exceededTransferLimit=ya);ca&&(C.hasM=ca);ha&&(C.hasZ=ha);return C};b.convertToFeatures=ra;b.convertToGeometry=la;b.convertToMultipoint=x;b.convertToMultipointFeatures=U;b.convertToPoint=function(C,K,M){return C?K?M?J(C):p(C):M?L(C):a(C):null};b.convertToPolygon=N;b.convertToPolyline=l;b.generalizeOptimizedGeometry=function(C,K,M,V,aa,ca,ha=M,oa=V){ua(C);if(!K?.coords.length)return null;aa=Ka[aa];const {coords:pa,lengths:ya}=K;K=A(M,V);
const ta=A(M&&ha,V&&oa);M=w(M,V,ha,oa);if(!ya.length)return M(C.coords,pa,0,0,pa[0],pa[1]),ua(C,K,0),C;V=0;ca*=ca;for(const wa of ya){if(wa<aa){V+=wa*K;continue}ha=C.coords.length/ta;oa=V;const Fa=V+(wa-1)*K;M(C.coords,pa,C.coords.length,oa,pa[oa],pa[oa+1]);ka(C.coords,pa,K,ca,M,oa,Fa);M(C.coords,pa,C.coords.length,Fa,pa[Fa],pa[Fa+1]);oa=C.coords.length/ta-ha;oa>=aa?C.lengths.push(oa):xa(C.coords,ha*ta);V+=wa*K}return C.coords.length?C:null};b.getBoundsOptimizedGeometry=function(C,K,M,V){if(!K?.coords?.length)return null;
M=A(M,V);let aa=V=Number.POSITIVE_INFINITY,ca=Number.NEGATIVE_INFINITY,ha=Number.NEGATIVE_INFINITY;if(K&&K.coords){K=K.coords;for(let oa=0;oa<K.length;oa+=M){const pa=K[oa],ya=K[oa+1];V=Math.min(V,pa);ca=Math.max(ca,pa);aa=Math.min(aa,ya);ha=Math.max(ha,ya)}}D.is(C)?D.fromRectValues(C,V,aa,ca,ha):z.fromValues(V,aa,ca,ha,C);return C};b.getQuantizedArea=function(C,K){const {coords:M,lengths:V}=C;let aa=C=0;for(let ca=0;ca<V.length;ca++){const ha=V[ca];aa+=qa(M,C,ha,K);C+=ha}return Math.abs(aa)};b.getQuantizedBoundsOptimizedGeometry=
function(C,K,M,V){M=A(M,V);const {lengths:aa,coords:ca}=K;V=K=Number.POSITIVE_INFINITY;let ha=Number.NEGATIVE_INFINITY,oa=Number.NEGATIVE_INFINITY,pa=0;for(const ya of aa){let ta=ca[pa],wa=ca[pa+1];K=Math.min(ta,K);V=Math.min(wa,V);ha=Math.max(ta,ha);oa=Math.max(wa,oa);pa+=M;for(let Fa=1;Fa<ya;Fa++,pa+=M){const za=ca[pa],Ea=ca[pa+1];ta+=za;wa+=Ea;0>za&&(K=Math.min(K,ta));0<za&&(ha=Math.max(ha,ta));0>Ea?V=Math.min(V,wa):0<Ea&&(oa=Math.max(oa,wa))}}C[0]=K;C[1]=V;C[2]=ha;C[3]=oa;return C};b.getSignedQuantizedRingArea=
qa;b.quantizeOptimizedFeatureSet=function(C,K){const {geometryType:M,features:V,hasM:aa,hasZ:ca}=K;if(!C)return K;for(let ha=0;ha<V.length;ha++){const oa=V[ha],pa=oa.weakClone();pa.geometry=new v;da(pa.geometry,oa.geometry,aa,ca,M,C);oa.centroid&&(pa.centroid=new v,da(pa.centroid,oa.centroid,aa,ca,"esriGeometryPoint",C));V[ha]=pa}K.transform=C;return K};b.quantizeOptimizedGeometry=da;b.quantizeX=E;b.quantizeY=t;b.removeCollinearVertices=function(C,K,M,V,aa){if(!K?.coords?.length)return null;M=Ka[M];
const {coords:ca,lengths:ha}=K;K=w(V,aa,V,aa);V=A(V,aa);let oa=aa=0,pa=0,ya=0;for(const Fa of ha){oa=ya;K(C.coords,ca,oa,aa,ca[aa],ca[aa+1]);aa+=V;var ta=ca[aa];let za=ca[aa+1],Ea=ta,Da=za;var wa=za/ta;oa+=V;K(C.coords,ca,oa,aa,Ea,Da);aa+=V;for(let Ba=2;Ba<Fa;Ba++){ta=ca[aa];za=ca[aa+1];const La=za/ta,Sa=wa===La||!isFinite(wa)&&!isFinite(La);wa=Sa&&isFinite(La)?0<=wa&&0<=La||0>=wa&&0>=La:0<=Da&&0<=za||0>=Da&&0>=za;Sa&&wa?(Ea+=ta,Da+=za):(Ea=ta,Da=za,oa+=V);K(C.coords,ca,oa,aa,Ea,Da);aa+=V;wa=La}oa+=
V;ta=(oa-ya)/V;ta>=M&&(C.lengths[pa]=ta,ya=oa,pa++)}C.coords.length>ya&&(C.coords.length=ya);C.lengths.length>pa&&(C.lengths.length=pa);return C.coords.length&&C.lengths.length?C:null};b.removeZMValues=function(C,K,M,V,aa,ca){ua(C);C.lengths.push(...K.lengths);if(M===aa&&V===ca)for(var ha=0;ha<K.coords.length;ha++)C.coords.push(K.coords[ha]);else for(ha=A(M,V),M=w(M,V,aa,ca),K=K.coords,V=0;V<K.length;V+=ha)M(C.coords,K,C.coords.length,V,K[V],K[V+1]);return C};b.unquantizeOptimizedFeatureSet=function(C){const {transform:K,
features:M,hasM:V,hasZ:aa}=C;if(!K)return C;for(const ca of M)null!=ca.geometry&&ia(ca.geometry,ca.geometry,V,aa,K),null!=ca.centroid&&ia(ca.centroid,ca.centroid,V,aa,K);C.transform=null;return C};b.unquantizeOptimizedGeometry=ia;b.unquantizeValue=q;b.unquantizeX=function(C,K){return q(C,K,0)};b.unquantizeY=function(C,K){return q(C,-K,1)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],
function(b,f,y){function r(q=E){return[q[0],q[1],q[2],q[3],q[4],q[5]]}function D(q,a,u,p,F,L,d=r()){d[0]=q;d[1]=a;d[2]=u;d[3]=p;d[4]=F;d[5]=L;return d}function z(q){return q[0]>=q[3]?0:q[3]-q[0]}function g(q){return q[1]>=q[4]?0:q[4]-q[1]}function n(q){return q[2]>=q[5]?0:q[5]-q[2]}function e(q,a){return Math.max(a[0],q[0])<=Math.min(a[3],q[3])&&Math.max(a[1],q[1])<=Math.min(a[4],q[4])&&Math.max(a[2],q[2])<=Math.min(a[5],q[5])}function v(q,a){q[0]=a[0];q[1]=a[1];q[2]=a[2];q[3]=a[3];q[4]=a[4];q[5]=
a[5];return q}function A(q){return 6===q.length}const w=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],E=[0,0,0,0,0,0],t=r();b.allFinite=function(q){for(let a=0;6>a;a++)if(!isFinite(q[a]))return!1;return!0};b.center=function(q,a=[0,0,0]){a[0]=q[0]+z(q)/2;a[1]=q[1]+g(q)/2;a[2]=q[2]+n(q)/2;return a};b.contains=function(q,a){return a[0]>=q[0]&&a[1]>=q[1]&&a[2]>=q[2]&&a[3]<=q[3]&&a[4]<=q[4]&&a[5]<=q[5]};b.containsPoint=function(q,a){return a[0]>=q[0]&&a[1]>=q[1]&&a[2]>=q[2]&&a[0]<=q[3]&&a[1]<=
q[4]&&a[2]<=q[5]};b.containsPointWithMargin=function(q,a,u){return a[0]>=q[0]-u&&a[1]>=q[1]-u&&a[2]>=q[2]-u&&a[0]<=q[3]+u&&a[1]<=q[4]+u&&a[2]<=q[5]+u};b.create=r;b.depth=g;b.diameter=function(q){const a=z(q),u=n(q);q=g(q);return Math.sqrt(a*a+u*u+q*q)};b.empty=function(q){return q?v(q,w):r(w)};b.equals=function(q,a,u){if(null==q||null==a)return q===a;if(!A(q)||!A(a))return!1;if(u)for(let p=0;p<q.length;p++){if(!u(q[p],a[p]))return!1}else for(u=0;u<q.length;u++)if(q[u]!==a[u])return!1;return!0};b.expandWithAABB=
function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[2]=Math.min(q[2],a[2]);q[3]=Math.max(q[3],a[3]);q[4]=Math.max(q[4],a[4]);q[5]=Math.max(q[5],a[5])};b.expandWithBuffer=function(q,a,u=0,p=a.length/3){let F=q[0],L=q[1],d=q[2],J=q[3],Q=q[4],S=q[5];for(let Z=0;Z<p;Z++)F=Math.min(F,a[u+3*Z]),L=Math.min(L,a[u+3*Z+1]),d=Math.min(d,a[u+3*Z+2]),J=Math.max(J,a[u+3*Z]),Q=Math.max(Q,a[u+3*Z+1]),S=Math.max(S,a[u+3*Z+2]);q[0]=F;q[1]=L;q[2]=d;q[3]=J;q[4]=Q;q[5]=S};b.expandWithNestedArray=function(q,
a,u){const p=a.length;let F=q[0],L=q[1],d=q[2],J=q[3],Q=q[4],S=q[5];if(u)for(u=0;u<p;u++){var Z=a[u];F=Math.min(F,Z[0]);L=Math.min(L,Z[1]);d=Math.min(d,Z[2]);J=Math.max(J,Z[0]);Q=Math.max(Q,Z[1]);S=Math.max(S,Z[2])}else for(u=0;u<p;u++)Z=a[u],F=Math.min(F,Z[0]),L=Math.min(L,Z[1]),J=Math.max(J,Z[0]),Q=Math.max(Q,Z[1]);q[0]=F;q[1]=L;q[2]=d;q[3]=J;q[4]=Q;q[5]=S};b.expandWithOffset=function(q,a,u,p){q[0]=Math.min(q[0],q[0]+a);q[3]=Math.max(q[3],q[3]+a);q[1]=Math.min(q[1],q[1]+u);q[4]=Math.max(q[4],q[4]+
u);q[2]=Math.min(q[2],q[2]+p);q[5]=Math.max(q[5],q[5]+p)};b.expandWithRect=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[3]=Math.max(q[3],a[2]);q[4]=Math.max(q[4],a[3])};b.expandWithVec3=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[2]=Math.min(q[2],a[2]);q[3]=Math.max(q[3],a[0]);q[4]=Math.max(q[4],a[1]);q[5]=Math.max(q[5],a[2])};b.fromExtent=function(q,a=r()){a[0]=q.xmin;a[1]=q.ymin;a[2]=q.hasZ?q.zmin:-Infinity;a[3]=q.xmax;a[4]=q.ymax;a[5]=q.hasZ?q.zmax:Infinity;
return a};b.fromMinMax=function(q,a,u=r()){u[0]=q[0];u[1]=q[1];u[2]=q[2];u[3]=a[0];u[4]=a[1];u[5]=a[2];return u};b.fromRect=function(q,a){q[0]=a[0];q[1]=a[1];q[2]=Number.NEGATIVE_INFINITY;q[3]=a[2];q[4]=a[3];q[5]=Number.POSITIVE_INFINITY;return q};b.fromRectValues=function(q,a,u,p,F){q[0]=a;q[1]=u;q[2]=Number.NEGATIVE_INFINITY;q[3]=p;q[4]=F;q[5]=Number.POSITIVE_INFINITY;return q};b.fromValues=D;b.getMax=function(q,a){a[0]=q[3];a[1]=q[4];a[2]=q[5];return a};b.getMin=function(q,a){a[0]=q[0];a[1]=q[1];
a[2]=q[2];return a};b.height=n;b.intersects=e;b.intersectsClippingArea=function(q,a){return null==a?!0:e(q,a)};b.is=A;b.isPoint=function(q){return 0===z(q)&&0===g(q)&&0===n(q)};b.maximumDimension=function(q){return Math.max(z(q),n(q),g(q))};b.negativeInfinity=w;b.offset=function(q,a,u,p,F=q){F[0]=q[0]+a;F[1]=q[1]+u;F[2]=q[2]+p;F[3]=q[3]+a;F[4]=q[4]+u;F[5]=q[5]+p;return F};b.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];b.scale=function(q,a,u=q){const p=q[0]+z(q)/2,F=
q[1]+g(q)/2,L=q[2]+n(q)/2;u[0]=p+(q[0]-p)*a;u[1]=F+(q[1]-F)*a;u[2]=L+(q[2]-L)*a;u[3]=p+(q[3]-p)*a;u[4]=F+(q[4]-F)*a;u[5]=L+(q[5]-L)*a;return u};b.set=v;b.setMax=function(q,a,u=q){u[3]=a[0];u[4]=a[1];u[5]=a[2];u!==q&&(u[0]=q[0],u[1]=q[1],u[2]=q[2]);return q};b.setMin=function(q,a,u=q){u[0]=a[0];u[1]=a[1];u[2]=a[2];u!==q&&(u[3]=q[3],u[4]=q[4],u[5]=q[5]);return u};b.size=function(q,a=[0,0,0]){a[0]=z(q);a[1]=g(q);a[2]=n(q);return a};b.toExtent=function(q,a){return isFinite(q[2])||isFinite(q[5])?new f({xmin:q[0],
xmax:q[3],ymin:q[1],ymax:q[4],zmin:q[2],zmax:q[5],spatialReference:a}):new f({xmin:q[0],xmax:q[3],ymin:q[1],ymax:q[4],spatialReference:a})};b.toRect=function(q,a){a||=y.create();a[0]=q[0];a[1]=q[1];a[2]=q[3];a[3]=q[4];return a};b.width=z;b.wrap=function(q,a,u,p,F,L){return D(q,a,u,p,F,L,t)};b.zero=E;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","./OptimizedGeometry"],function(b,f){class y{constructor(D=null,z={},
g,n){this.geometry=D;this.attributes=z;this.centroid=g;this.objectId=n;this.geohashY=this.geohashX=this.displayId=0}static fromJSON(D,z){const g=D.geometry?f.fromJSON(D.geometry):null,n=D.centroid?f.fromJSON(D.centroid):null;return new y(g,D.attributes,n,D.attributes[z])}weakClone(){const D=new y(this.geometry,this.attributes,this.centroid,this.objectId);D.displayId=this.displayId;D.geohashX=this.geohashX;D.geohashY=this.geohashY;return D}clone(){var D=this.geometry?.clone();D=new y(D,{...this.attributes},
this.centroid?.clone(),this.objectId);D.displayId=this.displayId;D.geohashX=this.geohashX;D.geohashY=this.geohashY;return D}}class r extends y{}b.OptimizedFeature=y;b.OptimizedFeatureWithGeometry=r;b.hasGeometry=function(D){return!!D.geometry?.coords?.length};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class b{constructor(f=[],y=[],r=!1){this.lengths=f??[];this.coords=y??[];this.hasIndeterminateRingOrder=r}static fromJSON(f){return new b(f.lengths,
f.coords,f.hasIndeterminateRingOrder)}static fromRect(f){const [y,r,D,z]=f;f=D-y;const g=z-r;return new b([5],[y,r,f,0,0,g,-f,0,0,-g])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((f,y)=>f+y)}forEachVertex(f){let y=0;this.lengths.length||f(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const D=this.lengths[r];for(let z=0;z<D;z++)f(this.coords[2*(z+y)],this.coords[2*(z+y)+1]);y+=D}}deltaDecode(){const f=
this.clone(),{coords:y,lengths:r}=f;let D=0;for(const z of r){for(let g=1;g<z;g++)y[2*(D+g)]+=y[2*(D+g)-2],y[2*(D+g)+1]+=y[2*(D+g)-1];D+=z}return f}clone(f){if(0===this.lengths.length)return new b([],[this.coords[0],this.coords[1]]);var y=2*(0===this.lengths.length?1:this.lengths.reduce((r,D)=>r+D));y=this.coords.slice(0,y);return f?(f.set(y),new b(this.lengths,f,this.hasIndeterminateRingOrder)):new b(Array.from(this.lengths),Array.from(y),this.hasIndeterminateRingOrder)}}return b})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class b{constructor(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const f=new b;f.objectIdFieldName=this.objectIdFieldName;f.globalIdFieldName=this.globalIdFieldName;f.geohashFieldName=this.geohashFieldName;f.geometryProperties=this.geometryProperties;f.geometryType=this.geometryType;
f.spatialReference=this.spatialReference;f.hasZ=this.hasZ;f.hasM=this.hasM;f.features=this.features;f.fields=this.fields;f.transform=this.transform;f.exceededTransferLimit=this.exceededTransferLimit;f.uniqueIdField=this.uniqueIdField;f.queryGeometry=this.queryGeometry;f.queryGeometryType=this.queryGeometryType;return f}}return b})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../core/arrayUtils ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./geometryUtils ./optimizedFeatureQueryEngineAdapter".split(" "),
function(b,f,y,r,D,z,g,n,e,v){const A=D.create();class w{constructor(E){this.geometryInfo=E;this._boundsStore=new n.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new y;this.featureAdapter=v.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let E=
0;this._featuresById.forEach(t=>{null!=t.geometry&&t.geometry.coords&&(E+=t.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:E/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(E){if(null==this.fullBounds)return null;const [t,q,a,u]=this.fullBounds;return{xmin:t,ymin:q,xmax:a,ymax:u,spatialReference:e.cleanFromGeometryEngine(E)}}add(E){this._add(E);this._emitChanged()}addMany(E){for(const t of E)this._add(t);this._emitChanged()}upsertMany(E){E=E.map(t=>this._upsert(t));
this._emitChanged();return E.filter(b.isSome)}clear(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()}removeById(E){E=this._featuresById.get(E);if(!E)return null;this._remove(E);this._emitChanged();return E}removeManyById(E){this._boundsStore.invalidateIndex();for(const t of E)(E=this._featuresById.get(t))&&this._remove(E);this._emitChanged()}forEachBounds(E,t){for(const q of E)(E=this._boundsStore.get(q.objectId))&&t(D.fromRect(A,E))}getFeature(E){return this._featuresById.get(E)}has(E){return this._featuresById.has(E)}forEach(E){this._featuresById.forEach(t=>
E(t))}forEachInBounds(E,t){this._boundsStore.forEachInBounds(E,q=>{t(this._featuresById.get(q))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex();this._markedIds.clear()}sweep(){let E=!1;this._featuresById.forEach((t,q)=>{this._markedIds.has(q)||(E=!0,this._remove(t))});this._markedIds.clear();E&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(E){if(E){var t=E.objectId;if(null==t)r.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature",
"feature id is missing",{feature:E}));else{var q=this._featuresById.get(t);this._markedIds.add(t);if(q){E.displayId=q.displayId;var a=this._boundsStore.get(t);this._boundsStore.delete(t)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(E);E.geometry?.coords?.length?(a=g.getBoundsOptimizedGeometry(null!=a?a:z.create(),E.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=a&&this._boundsStore.set(t,a)):this._boundsStore.set(t,null);this._featuresById.set(t,E)}}}_upsert(E){const t=E?.objectId;
if(null==t)return r.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:E})),null;const q=this._featuresById.get(t);if(!q)return this._add(E),E;this._markedIds.add(t);const {geometry:a,attributes:u}=E;for(const p in u)q.attributes[p]=u[p];a&&(q.geometry=a,this._boundsStore.set(t,g.getBoundsOptimizedGeometry(z.create(),a,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null));return q}_remove(E){if(null!=this.onFeatureRemove)this.onFeatureRemove(E);
const t=E.objectId;this._markedIds.delete(t);this._boundsStore.delete(t);this._featuresById.delete(t);return E}}return w})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(b,f,y,r){function D(n,e,v){z.minX=e[0];z.minY=e[1];z.maxX=e[2];z.maxY=e[3];n.search(z,v)}const z={minX:0,minY:0,maxX:0,maxY:0};class g{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=
new Map;this._idByBounds=new Map;this._index=new y.PooledRBush(9,f("esri-csp-restrictions")?n=>({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const n=Array(this._idByBounds.size);let e=0;this._idByBounds.forEach((v,A)=>{n[e++]=A});this._indexInvalid=!1;this._index.clear();this._index.load(n)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(n=>this._idByBounds.has(n))))),this._boundsToLoad.length=
0)}}get fullBounds(){if(!this._boundsById.size)return null;const n=r.empty();for(const e of this._boundsById.values())e&&(n[0]=Math.min(e[0],n[0]),n[1]=Math.min(e[1],n[1]),n[2]=Math.max(e[2],n[2]),n[3]=Math.max(e[3],n[3]));return n}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(n){const e=this._boundsById.get(n);this._boundsById.delete(n);e&&(this._idByBounds.delete(e),this._indexInvalid||
this._index.remove(e))}forEachInBounds(n,e){this._loadIndex();D(this._index,n,v=>e(this._idByBounds.get(v)))}get(n){return this._boundsById.get(n)}has(n){return this._boundsById.has(n)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(n,e){if(!this._indexInvalid){const v=this._boundsById.get(n);v&&(this._index.remove(v),this._idByBounds.delete(v))}this._boundsById.set(n,e);e&&(this._idByBounds.set(e,n),this._indexInvalid||(this._boundsToLoad.push(e),5E4<
this._boundsToLoad.length&&this._loadIndex()))}}b.BoundsStore=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../has","../../PooledArray","../../../chunks/quickselect"],function(b,f,y,r,D){function z(W,U){for(F.clear();W;){if(!0===W.leaf)for(const x of W.children)U(x);else F.pushArray(W.children);W=F.pop()??null}}function g(W,U){n(W,0,W.children.length,U,W)}function n(W,U,x,I,m){m||=new S([]);
m.minX=Infinity;m.minY=Infinity;m.maxX=-Infinity;m.maxY=-Infinity;for(let l=U,B;l<x;l++)B=W.children[l],e(m,W.leaf?I(B):B);return m}function e(W,U){W.minX=Math.min(W.minX,U.minX);W.minY=Math.min(W.minY,U.minY);W.maxX=Math.max(W.maxX,U.maxX);W.maxY=Math.max(W.maxY,U.maxY)}function v(W,U){return W.minX-U.minX}function A(W,U){return W.minY-U.minY}function w(W){return(W.maxX-W.minX)*(W.maxY-W.minY)}function E(W){return W.maxX-W.minX+(W.maxY-W.minY)}function t(W,U){return W.minX<=U.minX&&W.minY<=U.minY&&
U.maxX<=W.maxX&&U.maxY<=W.maxY}function q(W,U){return U.minX<=W.maxX&&U.minY<=W.maxY&&U.maxX>=W.minX&&U.maxY>=W.minY}function a(W,U,x,I,m){for(U=[U,x];U.length;){x=U.pop();const l=U.pop();if(x-l<=I)continue;const B=l+Math.ceil((x-l)/I/2)*I;D.quickselect(W,B,l,x,m);U.push(l,B,B,x)}}class u{constructor(W=9,U){this._compareMinX=v;this._compareMinY=A;this._toBBox=x=>x;this._maxEntries=Math.max(4,W||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));U&&("function"===typeof U?this._toBBox=U:
this._initFormat(U));this.clear()}destroy(){this.clear();p.prune();F.prune();L.prune();d.prune()}all(W){z(this._data,W)}search(W,U){let x=this._data;const I=this._toBBox;if(q(W,x))for(p.clear();x;){for(let m=0,l=x.children.length;m<l;m++){const B=x.children[m],P=x.leaf?I(B):B;q(W,P)&&(x.leaf?U(B):t(W,P)?z(B,U):p.push(B))}x=p.pop()}}collides(W){let U=this._data;const x=this._toBBox;if(!q(W,U))return!1;for(p.clear();U;){for(let I=0,m=U.children.length;I<m;I++){const l=U.children[I],B=U.leaf?x(l):l;
if(q(W,B)){if(U.leaf||t(W,B))return!0;p.push(l)}}U=p.pop()}return!1}load(W){if(!W.length)return this;if(W.length<this._minEntries){for(let U=0,x=W.length;U<x;U++)this.insert(W[U]);return this}W=this._build(W.slice(0,W.length),0,W.length-1,0);if(this._data.children.length)if(this._data.height===W.height)this._splitRoot(this._data,W);else{if(this._data.height<W.height){const U=this._data;this._data=W;W=U}this._insert(W,this._data.height-W.height-1,!0)}else this._data=W;return this}insert(W){W&&this._insert(W,
this._data.height-1);return this}clear(){this._data=new S([]);return this}remove(W){if(!W)return this;let U=this._data,x=null,I=0,m=!1,l;const B=this._toBBox(W);L.clear();for(d.clear();U||0<L.length;){U||(U=L.pop(),x=L.data[L.length-1],I=d.pop()??0,m=!0);if(U.leaf&&(l=f.indexOf(U.children,W,U.children.length,U.indexHint),-1!==l)){U.children.splice(l,1);L.push(U);this._condense(L);break}m||U.leaf||!t(U,B)?x?(I++,U=x.children[I],m=!1):U=null:(L.push(U),d.push(I),I=0,x=U,U=U.children[0])}return this}toJSON(){return this._data}fromJSON(W){this._data=
W;return this}_build(W,U,x,I){var m=x-U+1,l=this._maxEntries;if(m<=l)return W=new S(W.slice(U,x+1)),g(W,this._toBBox),W;I||(I=Math.ceil(Math.log(m)/Math.log(l)),l=Math.ceil(m/l**(I-1)));const B=new Z([]);B.height=I;m=Math.ceil(m/l);l=m*Math.ceil(Math.sqrt(l));for(a(W,U,x,l,this._compareMinX);U<=x;U+=l){const P=Math.min(U+l-1,x);a(W,U,P,m,this._compareMinY);for(let N=U;N<=P;N+=m)B.children.push(this._build(W,N,Math.min(N+m-1,P),I-1))}g(B,this._toBBox);return B}_insert(W,U,x){var I=this._toBBox;x=x?
W:I(W);L.clear();I=this._data;for(var m=U,l=L;;){l.push(I);if(!0===I.leaf||l.length-1===m)break;let B=Infinity,P=Infinity,N=void 0;for(let T=0,Y=I.children.length;T<Y;T++){const ea=I.children[T],la=w(ea),ra=(Math.max(ea.maxX,x.maxX)-Math.min(ea.minX,x.minX))*(Math.max(ea.maxY,x.maxY)-Math.min(ea.minY,x.minY))-la;ra<P?(P=ra,B=la<B?la:B,N=ea):ra===P&&la<B&&(B=la,N=ea)}I=N||I.children[0]}I.children.push(W);for(e(I,x);0<=U;)if(L.data[U].children.length>this._maxEntries)this._split(L,U),U--;else break;
for(W=L;0<=U;U--)e(W.data[U],x)}_split(W,U){const x=W.data[U];var I=x.children.length;const m=this._minEntries;this._chooseSplitAxis(x,m,I);if(I=this._chooseSplitIndex(x,m,I))I=x.children.splice(I,x.children.length-I),I=x.leaf?new S(I):new Z(I),I.height=x.height,g(x,this._toBBox),g(I,this._toBBox),U?W.data[U-1].children.push(I):this._splitRoot(x,I)}_splitRoot(W,U){this._data=new Z([W,U]);this._data.height=W.height+1;g(this._data,this._toBBox)}_chooseSplitIndex(W,U,x){let I,m,l=void 0;I=m=Infinity;
for(let P=U;P<=x-U;P++){var B=n(W,0,P,this._toBBox);const N=n(W,P,x,this._toBBox),T=Math.max(0,Math.min(B.maxX,N.maxX)-Math.max(B.minX,N.minX))*Math.max(0,Math.min(B.maxY,N.maxY)-Math.max(B.minY,N.minY));B=w(B)+w(N);T<I?(I=T,l=P,m=B<m?B:m):T===I&&B<m&&(m=B,l=P)}return l}_chooseSplitAxis(W,U,x){const I=W.leaf?this._compareMinX:v,m=W.leaf?this._compareMinY:A,l=this._allDistMargin(W,U,x,I);U=this._allDistMargin(W,U,x,m);l<U&&W.children.sort(I)}_allDistMargin(W,U,x,I){W.children.sort(I);I=this._toBBox;
var m=n(W,0,U,I);const l=n(W,x-U,x,I);let B=E(m)+E(l);for(let P=U;P<x-U;P++){const N=W.children[P];e(m,W.leaf?I(N):N);B+=E(m)}for(x=x-U-1;x>=U;x--)m=W.children[x],e(l,W.leaf?I(m):m),B+=E(l);return B}_condense(W){for(let U=W.length-1;0<=U;U--){const x=W.data[U];if(0===x.children.length)if(0<U){const I=W.data[U-1],m=I.children;m.splice(f.indexOf(m,x,m.length,I.indexHint),1)}else this.clear();else g(x,this._toBBox)}}_initFormat(W){const U=["return a"," - b",";"];this._compareMinX=new Function("a","b",
U.join(W[0]));this._compareMinY=new Function("a","b",U.join(W[1]));this._toBBox=new Function("a","return {minX: a"+W[0]+", minY: a"+W[1]+", maxX: a"+W[2]+", maxY: a"+W[3]+"};")}}const p=new r,F=new r,L=new r,d=new r({deallocator:void 0});class J{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class Q extends J{constructor(){super(...arguments);this.height=1;this.indexHint=new f.PositionHint}}class S extends Q{constructor(W){super();this.children=W;this.leaf=!0}}class Z extends Q{constructor(W){super();
this.children=W;this.leaf=!1}}b.BBox=J;b.PooledRBush=u;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(b,f){var y={exports:{}};(function(r){(function(D){D=D();void 0!==D&&(r.exports=D)})(function(){function D(n,e,v,A,w){for(;A>v;){if(600<A-v){var E=A-v+1,t=e-v+1,q=Math.log(E),a=.5*Math.exp(2*q/3);q=.5*Math.sqrt(q*a*(E-a)/E)*(0>t-E/2?-1:1);D(n,e,Math.max(v,Math.floor(e-t*a/E+q)),Math.min(A,Math.floor(e+
(E-t)*a/E+q)),w)}E=n[e];t=v;a=A;z(n,v,e);for(0<w(n[A],E)&&z(n,v,A);t<a;){z(n,t,a);t++;for(a--;0>w(n[t],E);)t++;for(;0<w(n[a],E);)a--}0===w(n[v],E)?z(n,v,a):(a++,z(n,a,A));a<=e&&(v=a+1);e<=a&&(A=a-1)}}function z(n,e,v){var A=n[e];n[e]=n[v];n[v]=A}function g(n,e){return n<e?-1:n>e?1:0}return function(n,e,v,A,w){D(n,e,v||0,A||n.length-1,w||g)}})})(y);f=f.getDefaultExportFromCjs(y.exports);b.quickselect=f})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils",
"../OptimizedGeometry"],function(b,f,y){const r=new y,D=new y,z=new y,g={esriGeometryPoint:f.convertToPoint,esriGeometryPolyline:f.convertToPolyline,esriGeometryPolygon:f.convertToPolygon,esriGeometryMultipoint:f.convertToMultipoint},n=(e,v)=>"_geVersion"!==e?v:void 0;b.cleanFromGeometryEngine=function(e){return e&&"_geVersion"in e?JSON.parse(JSON.stringify(e,n)):e};b.getGeometry=function(e,v,A,w,E,t,q=v,a=A){const u=v&&q,p=A&&a;w=null!=w?"coords"in w?w:w.geometry:null;if(null==w)return null;if(E)return v=
f.generalizeOptimizedGeometry(D,w,v,A,e,E,q,a),t&&(v=f.quantizeOptimizedGeometry(z,v,u,p,e,t)),g[e]?.(v,u,p)??null;if(t)return t=f.quantizeOptimizedGeometry(z,w,v,A,e,t,q,a),g[e]?.(t,u,p)??null;f.removeZMValues(r,w,v,A,q,a);return g[e]?.(r,u,p)??null};b.transformCentroid=function(e,v,A,w=e.hasZ,E=e.hasM){if(null==v)return null;const t=e.hasZ&&w,q=e.hasM&&E;return A?(e=f.quantizeOptimizedGeometry(z,v,e.hasZ,e.hasM,"esriGeometryPoint",A,w,E),f.convertToPoint(e,t,q)):f.convertToPoint(v,t,q)};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(b,f,y,r){b.optimizedFeatureQueryEngineAdapter={getObjectId(D){return D.objectId},getAttributes(D){return D.attributes},getAttribute(D,z){return D.attributes[z]},cloneWithGeometry(D,z){return new y.OptimizedFeature(z,D.attributes,null,D.objectId)},getGeometry(D){return D.geometry},getCentroid(D,z){null==
D.centroid&&(D.centroid=f.getCentroidOptimizedGeometry(new r,D.geometry,z.hasZ,z.hasM));return D.centroid}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(b){function f(r,D,z,g,n,e){e=n?e?4:3:e?3:2;let v=z,A=z+e,w=0,E=0,t=z=0,q=0;for(let a=0,u=g-1;a<u;a++,v+=e,A+=e){g=D[v];const p=D[v+1],F=D[v+2],L=D[A],d=D[A+1],J=D[A+2];let Q=g*d-L*p;t+=Q;w+=(g+L)*Q;E+=(p+d)*Q;n&&(Q=g*J-L*F,z+=(F+J)*Q,q+=Q);g<r[0]&&(r[0]=g);g>
r[1]&&(r[1]=g);p<r[2]&&(r[2]=p);p>r[3]&&(r[3]=p);n&&(F<r[4]&&(r[4]=F),F>r[5]&&(r[5]=F))}0<t&&(t*=-1);0<q&&(q*=-1);if(!t)return null;r=[w,E,.5*t];n&&(r[3]=z,r[4]=.5*q);return r}function y(r,D,z,g,n){n=g?n?4:3:n?3:2;let e=D,v=D+n,A=0,w=0,E=0,t=0;for(let p=0,F=z-1;p<F;p++,e+=n,v+=n){var q=r[e];const L=r[e+1],d=r[e+2],J=r[v],Q=r[v+1],S=r[v+2];if(g){var a=J-q;var u=Q-L;const Z=S-d;a=Math.sqrt(a*a+u*u+Z*Z)}else a=J-q,u=Q-L,a=Math.sqrt(a*a+u*u);a&&(A+=a,g?(q=[q+.5*(J-q),L+.5*(Q-L),d+.5*(S-d)],w+=a*q[0],
E+=a*q[1],t+=a*q[2]):(q=[q+.5*(J-q),L+.5*(Q-L)],w+=a*q[0],E+=a*q[1]))}return 0<A?g?[w/A,E/A,t/A]:[w/A,E/A]:0<z?g?[r[D],r[D+1],r[D+2]]:[r[D],r[D+1]]:null}b.getCentroidOptimizedGeometry=function(r,D,z,g){if(!D?.lengths.length)return null;r.lengths.length&&(r.lengths.length=0);r.coords.length&&(r.coords.length=0);const n=r.coords,e=[],v=z?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:A,coords:w}=D;var E=z?g?4:3:g?3:2;let t=0;for(const q of A){const a=f(v,w,t,q,z,g);a&&e.push(a);t+=q*E}e.sort((q,a)=>{let u=q[2]-a[2];0===u&&z&&(u=q[4]-a[4]);return u});e.length&&(E=6*e[0][2],n[0]=e[0][0]/E,n[1]=e[0][1]/E,z&&(E=6*e[0][4],n[2]=0!==E?e[0][3]/E:0),n[0]<v[0]||n[0]>v[1]||n[1]<v[2]||n[1]>v[3]||z&&(n[2]<v[4]||n[2]>v[5]))&&(n.length=0);if(!n.length)if(D=D.lengths[0]?y(w,0,A[0],z,g):null)n[0]=D[0],n[1]=D[1],
z&&2<D.length&&(n[2]=D[2]);else return null;return r};b.lineCentroid=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(b,f,y,r,D,z,g){function n(a,u){if(!u)return null;if("x"in u){var p=
{x:0,y:0};[p.x,p.y]=a(u.x,u.y,A);null!=u.z&&(p.z=u.z);null!=u.m&&(p.m=u.m);return p}return"xmin"in u?(p={xmin:0,ymin:0,xmax:0,ymax:0},[p.xmin,p.ymin]=a(u.xmin,u.ymin,A),[p.xmax,p.ymax]=a(u.xmax,u.ymax,A),u.hasZ&&(p.zmin=u.zmin,p.zmax=u.zmax,p.hasZ=!0),u.hasM&&(p.mmin=u.mmin,p.mmax=u.mmax,p.hasM=!0),p):"rings"in u?{rings:e(u.rings,a),hasM:u.hasM,hasZ:u.hasZ}:"paths"in u?{paths:e(u.paths,a),hasM:u.hasM,hasZ:u.hasZ}:"points"in u?{points:v(u.points,a),hasM:u.hasM,hasZ:u.hasZ}:null}function e(a,u){const p=
[];for(const F of a)p.push(v(F,u));return p}function v(a,u){const p=[];for(const F of a)a=u(F[0],F[1],[0,0]),p.push(a),2<F.length&&a.push(F[2]),3<F.length&&a.push(F[3]);return p}const A=[0,0],w=n.bind(null,g.lngLatToXY),E=n.bind(null,g.xyToLngLat);class t{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(a,u,p,F){if(!a?.length||!u||!p||z.equals(u,p))return a;a={geometries:a,inSpatialReference:u,outSpatialReference:p,geographicTransformation:F,resolve:y.createResolver()};
this._jobs.push(a);this._timer??(this._timer=setTimeout(this._process,10));return a.resolve.promise}_process(){this._timer=null;const a=this._jobs.shift();if(a){var {geometries:u,inSpatialReference:p,outSpatialReference:F,resolve:L,geographicTransformation:d}=a;g.canProject(p,F)?z.isWebMercator(F)?L(u.map(w)):L(u.map(E)):L(r.projectMany(D.jsonAdapter,u,p,F,d,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}}}const q=new t;b.checkProjectionSupport=async function(a,u){a&&u&&(a=
Array.isArray(a)?a.map(p=>null!=p.geometry?p.geometry.spatialReference:null).filter(f.isSome):[a],await r.initializeProjection(a.map(p=>({source:p,dest:u}))))};b.project=function(a,u,p,F){if(!a)return a;p||(p=u,u=a.spatialReference);return z.isValid(u)&&z.isValid(p)&&!z.equals(u,p)?g.canProject(u,p)?(a=z.isWebMercator(p)?w(a):E(a),a.spatialReference=p,a):r.projectMany(D.jsonAdapter,[a],u,p,null,F)[0]:a};b.projectMany=function(a,u,p,F){return q.push(a,u,p,F)};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(b){class f{constructor(g,n,e){this.x=g;this.y=n;this.spatialReference=e;this.m=this.z=void 0}}class y{constructor(g,n,e,v){this.rings=g;this.spatialReference=n;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);v&&(this.hasM=v)}}class r{constructor(g,n,e,v){this.paths=g;this.spatialReference=n;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);v&&(this.hasM=v)}}class D{constructor(g,n,e,v){this.points=g;this.spatialReference=
n;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);v&&(this.hasM=v)}}class z{constructor(g,n,e,v,A){this.xmin=g;this.ymin=n;this.xmax=e;this.ymax=v;this.spatialReference=A;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}b.jsonAdapter={convertToGEGeometry:function(g,n){return null==n?null:g.convertJSONToGeometry(n)},exportPoint:function(g,n,e){e=new f(g.getPointX(n),g.getPointY(n),e);const v=g.hasZ(n),A=g.hasM(n);v&&(e.z=g.getPointZ(n));A&&(e.m=g.getPointM(n));return e},exportPolygon:function(g,n,e){return new y(g.exportPaths(n),
e,g.hasZ(n),g.hasM(n))},exportPolyline:function(g,n,e){return new r(g.exportPaths(n),e,g.hasZ(n),g.hasM(n))},exportMultipoint:function(g,n,e){return new D(g.exportPoints(n),e,g.hasZ(n),g.hasM(n))},exportExtent:function(g,n,e){var v=g.hasZ(n);const A=g.hasM(n);e=new z(g.getXMin(n),g.getYMin(n),g.getXMax(n),g.getYMax(n),e);v&&(v=g.getZExtent(n),e.zmin=v.vmin,e.zmax=v.vmax);A&&(g=g.getMExtent(n),e.mmin=g.vmin,e.mmax=g.vmax);return e}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A,w,E,t,q,a,u,p,F,L,d,J,Q,S,Z,W,U,x){function I(N){if(Z.canQueryWithRBush(N)){if(t.isExtent(N))return[w.fromValues(Math.min(N.xmin,N.xmax),Math.min(N.ymin,N.ymax),Math.max(N.xmin,N.xmax),Math.max(N.ymin,N.ymax))];if(t.isPolygon(N))return N.rings.map(T=>w.fromValues(Math.min(T[0][0],T[2][0]),Math.min(T[0][1],T[2][1]),Math.max(T[0][0],T[2][0]),Math.max(T[0][1],T[2][1])))}return[E.getBoundsXY(w.create(),N)]}class m{constructor(N,T=null,Y,ea,la){this.attributes=N;this.geometry=
Y;this.centroid=ea;this.filterFlags=la;this.groupId=-1;this.displayId=T}}const l=new g.MemCacheStorage(2E6);let B=0;class P{constructor(N){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:d.queryCapabilities};this.geometryType=N.geometryType;this.hasM=!!N.hasM;this.hasZ=!!N.hasZ;this.objectIdField=N.objectIdField;this.spatialReference=N.spatialReference;this.definitionExpression=N.definitionExpression;this.featureStore=N.featureStore;this.aggregateAdapter=N.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=N.timeInfo;N.cacheSpatialQueries&&(this._geometryQueryCache=new g.MemCache(B++ +"$$",l));this.fieldsIndex=r.isSerializable(N.fieldsIndex)?N.fieldsIndex:U.fromJSON(N.fieldsIndex);this.availableFields=!N.availableFields||1===N.availableFields.length&&"*"===N.availableFields[0]?new Set(this.fieldsIndex.fields.map(T=>T.name)):new Set(N.availableFields.map(T=>this.fieldsIndex.get(T)?.name).filter(T=>null!=T));
N.scheduler&&N.priority&&(this._frameTask=N.scheduler.registerTask(N.priority))}destroy(){this._frameTask=z.removeMaybe(this._frameTask);this.clearCache();z.destroyMaybe(this._geometryQueryCache);this._changeHandle=z.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(N,T){T=n.signalFromSignalOrOptions(T);try{return(await this._executeQuery(N,
{},T)).createQueryResponse()}catch(Y){if(Y!==Q.queryEngineEmptyResult)throw Y;return(new J.QueryEngineResult([],N,this)).createQueryResponse()}}async executeQueryForCount(N={},T){T=n.signalFromSignalOrOptions(T);try{return(await this._executeQuery(N,{returnGeometry:!1,returnCentroid:!1,outSR:null},T)).createQueryResponseForCount()}catch(Y){if(Y!==Q.queryEngineEmptyResult)throw Y;return 0}}async executeQueryForExtent(N,T){T=n.signalFromSignalOrOptions(T);const Y=N.outSR;try{const ea=await this._executeQuery(N,
{returnGeometry:!0,returnCentroid:!1,outSR:null},T),la=ea.size;if(!la)return{count:0,extent:null};const ra=await this._getBounds(ea.items,ea.spatialReference,Y||this.spatialReference);return{count:la,extent:ra}}catch(ea){if(ea===Q.queryEngineEmptyResult)return{count:0,extent:null};throw ea;}}async executeQueryForIds(N,T){return this.executeQueryForIdSet(N,T).then(Y=>Array.from(Y))}async executeQueryForIdSet(N,T){T=n.signalFromSignalOrOptions(T);try{const Y=await this._executeQuery(N,{returnGeometry:!0,
returnCentroid:!1,outSR:null},T),ea=Y.items,la=new Set;await this._reschedule(()=>{for(const ra of ea)la.add(Y.featureAdapter.getObjectId(ra))},T);return la}catch(Y){if(Y===Q.queryEngineEmptyResult)return new Set;throw Y;}}async executeQueryForSnapping(N,T){const Y=n.signalFromSignalOrOptions(T),{point:ea,distance:la,returnEdge:ra,vertexMode:da}=N;if(!ra&&"none"===da)return{candidates:[]};let ka=D.clone(N.query);ka=await this._schedule(()=>Q.normalizeQueryLike(ka,this.definitionExpression,this.spatialReference),
Y);ka=await this._reschedule(()=>S.validateQuery(ka,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);(T=!a.equals(ea.spatialReference,this.spatialReference))&&await L.checkProjectionSupport(ea.spatialReference,this.spatialReference);var ia="number"===typeof la?la:la.x,qa="number"===typeof la?la:la.y;ia={xmin:ea.x-ia,xmax:ea.x+ia,ymin:ea.y-qa,ymax:ea.y+qa,spatialReference:ea.spatialReference};ia=T?L.project(ia,
this.spatialReference):ia;if(!ia)return{candidates:[]};qa=(await q.normalizeCentralMeridian(t.fromJSON(ea),null,{signal:Y}))[0];const ua=(await q.normalizeCentralMeridian(t.fromJSON(ia),null,{signal:Y}))[0];if(null==qa||null==ua)return{candidates:[]};const xa=new J.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(I(ua.toJSON())),Y),ka,this);await this._reschedule(()=>this._executeObjectIdsQuery(xa),Y);await this._reschedule(()=>this._executeTimeQuery(xa),Y);await this._reschedule(()=>
this._executeAttributesQuery(xa),Y);await this._reschedule(()=>this._executeGeometryQueryForSnapping(xa,Y),Y);qa=qa.toJSON();qa=T?L.project(qa,this.spatialReference):qa;return xa.createSnappingResponse({...N,point:qa,distance:T?Math.max(ia.xmax-ia.xmin,ia.ymax-ia.ymin)/2:la},ea.spatialReference)}async executeQueryForLatestObservations(N,T){T=n.signalFromSignalOrOptions(T);if(!this.timeInfo?.trackIdField)throw new y("unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:N,timeInfo:this.timeInfo});
try{const Y=await this._executeQuery(N,{},T);await this._reschedule(()=>this._filterLatest(Y),T);return Y.createQueryResponse()}catch(Y){if(Y!==Q.queryEngineEmptyResult)throw Y;return(new J.QueryEngineResult([],N,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(N={},T,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ea,normalizationField:la,valueExpression:ra}=T;return(await this._executeQueryForStatistics(N,{field:ea,normalizationField:la,valueExpression:ra},Y)).createSummaryStatisticsResponse(T)}async executeQueryForUniqueValues(N=
{},T,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ea,field2:la,field3:ra,valueExpression:da}=T;return(await this._executeQueryForStatistics(N,{field:ea,field2:la,field3:ra,valueExpression:da},Y)).createUniqueValuesResponse(T)}async executeQueryForClassBreaks(N={},T,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ea,normalizationField:la,valueExpression:ra}=T;return(await this._executeQueryForStatistics(N,{field:ea,normalizationField:la,valueExpression:ra},Y)).createClassBreaksResponse(T)}async executeQueryForHistogram(N=
{},T,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ea,normalizationField:la,valueExpression:ra}=T;return(await this._executeQueryForStatistics(N,{field:ea,normalizationField:la,valueExpression:ra},Y)).createHistogramResponse(T)}async fetchRecomputedExtents(N){N=n.signalFromSignalOrOptions(N);this._timeExtentPromise||(this._timeExtentPromise=W.getTimeExtent(this.timeInfo,this.featureStore));const [T,Y]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);n.throwIfAborted(N);return{fullExtent:T,
timeExtent:Y}}async _getBounds(N,T,Y){const ea=A.set(A.create(),A.negativeInfinity);await this.featureStore.forEachBounds(N,la=>A.expandWithAABB(ea,la));N={xmin:ea[0],ymin:ea[1],xmax:ea[3],ymax:ea[4],spatialReference:F.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(ea[2])&&isFinite(ea[5])&&(N.zmin=ea[2],N.zmax=ea[5],N.hasZ=!0);T=L.project(N,T,Y);T.spatialReference=F.cleanFromGeometryEngine(Y);0===T.xmax-T.xmin&&(Y=e.getMetersPerUnitForSR(T.spatialReference),T.xmin-=Y,T.xmax+=
Y);0===T.ymax-T.ymin&&(Y=e.getMetersPerUnitForSR(T.spatialReference),T.ymin-=Y,T.ymax+=Y);this.hasZ&&null!=T.zmin&&null!=T.zmax&&0===T.zmax-T.zmin&&(Y=e.getMetersPerUnitForSR(T.spatialReference),T.zmin-=Y,T.zmax+=Y);return T}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise="getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getAllFeatures().then(N=>this._getBounds(N,this.spatialReference,
this.spatialReference)));return this._fullExtentPromise}async _schedule(N,T){return null!=this._frameTask?this._frameTask.schedule(N,T):N(x.noBudget)}async _reschedule(N,T){return null!=this._frameTask?this._frameTask.reschedule(N,T):N(x.noBudget)}async _getAllFeaturesQueryEngineResult(N){return new J.QueryEngineResult(await this._getAllFeatures(),N,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const Y=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(ea=>Y.push(ea))})().then(()=>
Y)}const N=this._allFeaturesPromise,T=await N;return N===this._allFeaturesPromise?T.slice():this._getAllFeatures()}async _executeQuery(N,T,Y){N=D.clone(N);N=await this._schedule(()=>Q.normalizeQuery(N,this.definitionExpression,this.spatialReference),Y);N=await this._reschedule(()=>S.validateQuery(N,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);N={...N,...T};const ea=await this._reschedule(()=>this._executeSceneFilterQuery(N,
Y),Y),la=await this._reschedule(()=>this._executeGeometryQuery(N,ea,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(la),Y);await this._reschedule(()=>this._executeObjectIdsQuery(la),Y);await this._reschedule(()=>this._executeTimeQuery(la),Y);await this._reschedule(()=>this._executeAttributesQuery(la),Y);return la}async _executeSceneFilterQuery(N,T){if(null==N.sceneFilter)return null;const {outSR:Y,returnGeometry:ea,returnCentroid:la}=N;var ra=this.featureStore.featureSpatialReference,
da=N.sceneFilter.geometry;const ka=null==ra||a.equals(ra,da.spatialReference)?da:L.project(da,ra);if(!ka)return null;ra=ea||la;ra=a.isValid(Y)&&!a.equals(this.spatialReference,Y)&&ra?async xa=>this._project(xa,Y):xa=>xa;const ia=this.featureAdapter;da=await this._reschedule(()=>this._searchFeatures(I(ka)),T);if("disjoint"===N.sceneFilter.spatialRelationship){if(!da.length)return null;const xa=new Set;for(var qa of da)xa.add(ia.getObjectId(qa));const Aa=await this._reschedule(()=>this._getAllFeatures(),
T);qa=await this._reschedule(async()=>{const Ka=await Z.getSpatialQueryOperator("esriSpatialRelDisjoint",ka,this.geometryType,this.hasZ,this.hasM),Ha=await this._runSpatialFilter(Aa,Ma=>!xa.has(ia.getObjectId(Ma))||Ka(ia.getGeometry(Ma)),T);return new J.QueryEngineResult(Ha,N,this)},T);return ra(qa)}if(!da.length)return new J.QueryEngineResult([],N,this);if(this._canExecuteSinglePass(ka,N))return ra(new J.QueryEngineResult(da,N,this));const ua=await Z.getSpatialQueryOperator("esriSpatialRelContains",
ka,this.geometryType,this.hasZ,this.hasM);qa=await this._runSpatialFilter(da,xa=>ua(ia.getGeometry(xa)),T);return ra(new J.QueryEngineResult(qa,N,this))}async _executeGeometryQuery(N,T,Y){if(null!=T&&0===T.items.length)return T;N=null!=T?T.query:N;const {geometry:ea,outSR:la,spatialRel:ra,returnGeometry:da,returnCentroid:ka}=N;var ia=this.featureStore.featureSpatialReference;const qa=!ea||null==ia||a.equals(ia,ea.spatialReference)?ea:L.project(ea,ia),ua=da||ka,xa=a.isValid(la)&&!a.equals(this.spatialReference,
la),Aa=this._geometryQueryCache&&null==T?xa&&ua?JSON.stringify({originalFilterGeometry:ea,spatialRelationship:ra,outSpatialReference:la}):JSON.stringify({originalFilterGeometry:ea,spatialRelationship:ra}):null;ia=Aa?this._geometryQueryCache.get(Aa):null;if(null!=ia)return new J.QueryEngineResult(ia,N,this);ia=async G=>{xa&&ua&&await this._project(G,la);Aa&&this._geometryQueryCache.put(Aa,G.items,G.items.length+1);return G};if(!qa)return ia(null!=T?T:await this._getAllFeaturesQueryEngineResult(N));
const Ka=this.featureAdapter;let Ha=await this._reschedule(()=>this._searchFeatures(I(ea)),Y);if("esriSpatialRelDisjoint"===ra){if(!Ha.length)return ia(null!=T?T:await this._getAllFeaturesQueryEngineResult(N));const G=new Set;for(var Ma of Ha)G.add(Ka.getObjectId(Ma));const X=null!=T?T.items:await this._reschedule(()=>this._getAllFeatures(),Y);Ma=await this._reschedule(async()=>{const ba=await Z.getSpatialQueryOperator(ra,qa,this.geometryType,this.hasZ,this.hasM),ma=await this._runSpatialFilter(X,
C=>!G.has(Ka.getObjectId(C))||ba(Ka.getGeometry(C)),Y);return new J.QueryEngineResult(ma,N,this)},Y);return ia(Ma)}if(null!=T){const G=new f.PositionHint;Ha=Ha.filter(X=>0<=f.indexOf(T.items,X,T.items.length,G))}if(!Ha.length)return ia=new J.QueryEngineResult([],N,this),Aa&&this._geometryQueryCache.put(Aa,ia.items,1),ia;if(this._canExecuteSinglePass(qa,N))return ia(new J.QueryEngineResult(Ha,N,this));const h=await Z.getSpatialQueryOperator(ra,qa,this.geometryType,this.hasZ,this.hasM);Ma=await this._runSpatialFilter(Ha,
G=>h(Ka.getGeometry(G)),Y);return ia(new J.QueryEngineResult(Ma,N,this))}async _executeGeometryQueryForSnapping(N,T){const {query:Y}=N,{spatialRel:ea}=Y;if(N?.items?.length&&Y.geometry&&ea){var la=await Z.getSpatialQueryOperator(ea,Y.geometry,this.geometryType,this.hasZ,this.hasM);T=await this._runSpatialFilter(N.items,ra=>la(ra.geometry),T);N.items=T}}_executeAggregateIdsQuery(N){if(0!==N.items.length&&N.query.aggregateIds?.length&&null!=this.aggregateAdapter){var T=new Set;for(const ea of N.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ea).forEach(la=>
T.add(la));var Y=this.featureAdapter.getObjectId;N.items=N.items.filter(ea=>T.has(Y(ea)))}}_executeObjectIdsQuery(N){if(0!==N.items.length&&N.query.objectIds?.length){var T=new Set(N.query.objectIds),Y=this.featureAdapter.getObjectId;N.items=N.items.filter(ea=>T.has(Y(ea)))}}_executeTimeQuery(N){if(0!==N.items.length){var T=W.getTimeOperator(this.timeInfo,N.query.timeExtent,this.featureAdapter);null!=T&&(N.items=N.items.filter(T))}}_executeAttributesQuery(N){if(0!==N.items.length){var T=p.getWhereClause(N.query.where,
this.fieldsIndex);if(T){if(!T.isStandardized)throw new TypeError("Where clause is not standardized");N.items=N.items.filter(Y=>T.testFeature(Y,this.featureAdapter))}}}async _runSpatialFilter(N,T,Y){if(!T)return N;if(null==this._frameTask)return N.filter(da=>T(da));let ea=0;const la=[],ra=async da=>{for(;ea<N.length;){const ka=N[ea++];T(ka)&&(la.push(ka),da.madeProgress());da.done&&await this._reschedule(ia=>ra(ia),Y)}};return this._reschedule(da=>ra(da),Y).then(()=>la)}_filterLatest(N){const {trackIdField:T,
startTimeField:Y,endTimeField:ea}=this.timeInfo,la=ea||Y,ra=new Map,da=this.featureAdapter.getAttribute;for(const ka of N.items){const ia=da(ka,T),qa=da(ka,la),ua=ra.get(ia);(!ua||qa>da(ua,la))&&ra.set(ia,ka)}N.items=Array.from(ra.values())}_canExecuteSinglePass(N,T){({spatialRel:T}=T);return Z.canQueryWithRBush(N)&&("esriSpatialRelEnvelopeIntersects"===T||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===T||"esriSpatialRelContains"===T))}async _project(N,T){if(!T||a.equals(this.spatialReference,
T))return N;const Y=this.featureAdapter;let ea=void 0;try{const la=await this._getFullExtent();ea=v.getTransformation(this.spatialReference,T,la)}catch{}T=await L.projectMany(N.items.map(la=>F.getGeometry(this.geometryType,this.hasZ,this.hasM,Y.getGeometry(la))),this.spatialReference,T,ea);N.items=T.map((la,ra)=>Y.cloneWithGeometry(N.items[ra],u.convertFromGeometry(la,this.hasZ,this.hasM)));return N}async _searchFeatures(N){const T=new Set;await Promise.all(N.map(Y=>this.featureStore.forEachInBounds(Y,
ea=>T.add(ea))));N=Array.from(T.values());T.clear();return N}async _executeQueryForStatistics(N,T,Y){N=D.clone(N);try{N=await this._schedule(()=>Q.normalizeQuery(N,this.definitionExpression,this.spatialReference),Y);N=await this._reschedule(()=>S.validateStatisticsQuery(N,T,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);const ea=await this._reschedule(()=>this._executeSceneFilterQuery(N,Y),Y),la=await this._reschedule(()=>
this._executeGeometryQuery(N,ea,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(la),Y);await this._reschedule(()=>this._executeObjectIdsQuery(la),Y);await this._reschedule(()=>this._executeTimeQuery(la),Y);await this._reschedule(()=>this._executeAttributesQuery(la),Y);return la}catch(ea){if(ea!==Q.queryEngineEmptyResult)throw ea;return new J.QueryEngineResult([],N,this)}}}b.Feature=m;b.QueryEngine=P;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports",
"./PooledArray"],function(b,f){b.RemoveMode=void 0;(function(g){g[g.ALL=0]="ALL";g[g.SOME=1]="SOME"})(b.RemoveMode||(b.RemoveMode={}));class y{constructor(g,n,e){this.name=g;this._storage=n;this.id=`${D++}:`;this.size=0;this.maxSize=-1;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);e&&(this._storage.registerRemoveFunc(this.id,e),this._removeFunc=!0)}destroy(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);
this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(g){return this._storage.getSize(this,g)}resetHitRate(){this._hit=this._miss=0}put(g,n,e,v=0){this._storage.put(this,g,n,e,v)}pop(g){g=this._storage.pop(this,g);void 0===g?++this._miss:++this._hit;return g}get(g){g=this._storage.get(this,g);void 0===g?++this._miss:++this._hit;return g}peek(g){return this._storage.peek(this,g)}updateSize(g,n,e){this._storage.updateSize(this,g,
n,e)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class r{get size(){return this._size}constructor(g=10485760){this._maxSize=g;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new f;this._users=new f}destroy(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null}register(g){this._users.push(g)}deregister(g){this._users.removeUnordered(g)}registerRemoveFunc(g,
n){this._removeFuncs.push([g,n])}deregisterRemoveFunc(g){this._removeFuncs.filterInPlace(n=>n[0]!==g)}get maxSize(){return this._maxSize}set maxSize(g){this._maxSize=Math.max(g,-1);this._checkSize()}getSize(g,n){return this._db.get(g.id+n)?.size??0}put(g,n,e,v,A){n=g.id+n;const w=this._db.get(n);w&&(this._size-=w.size,g.size-=w.size,this._db.delete(n),w.entry!==e&&this._notifyRemove(n,w.entry,w.size,b.RemoveMode.ALL));v>this._maxSize?this._notifyRemove(n,e,v,b.RemoveMode.ALL):void 0===e?console.warn("Refusing to cache undefined entry "):
!v||0>v?(console.warn(`Refusing to cache entry with size ${v} for key ${n}`),this._notifyRemove(n,e,0,b.RemoveMode.ALL)):(this._db.set(n,new z(e,v,1+Math.max(A,-4)- -3)),this._size+=v,g.size+=v,this._checkSize())}updateSize(g,n,e,v){n=g.id+n;const A=this._db.get(n);if(A&&A.entry===e){this._size-=A.size;for(g.size-=A.size;v>this._maxSize;)if(v=this._notifyRemove(n,e,v,b.RemoveMode.SOME),!(null!=v&&0<v)){this._db.delete(n);return}A.size=v;this._size+=v;g.size+=v;this._checkSize()}}pop(g,n){n=g.id+n;
const e=this._db.get(n);if(e)return this._size-=e.size,g.size-=e.size,this._db.delete(n),++this._hit,e.entry;++this._miss}get(g,n){n=g.id+n;g=this._db.get(n);if(void 0===g)++this._miss;else return this._db.delete(n),g.lives=g.lifetime,this._db.set(n,g),++this._hit,g.entry}peek(g,n){(g=this._db.get(g.id+n))?++this._hit:++this._miss;return g?.entry}get performanceInfo(){const g={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+
"%",Entries:this._db.size.toString()},n={},e=[];this._db.forEach((w,E)=>{const t=w.lifetime;e[t]=(e[t]||0)+w.size;this._users.forAll(q=>{const {id:a,name:u}=q;E.startsWith(a)&&(n[u]=(n[u]||0)+w.size)})});const v={};this._users.forAll(w=>{const E=w.name;"hitRate"in w&&"number"===typeof w.hitRate&&!isNaN(w.hitRate)&&0<w.hitRate?(n[E]=n[E]||0,v[E]=Math.round(100*w.hitRate)+"%"):v[E]="0%"});var A=Object.keys(n);A.sort((w,E)=>n[E]-n[w]);A.forEach(w=>g[w]=Math.round(n[w]/2**20)+"MB / "+v[w]);for(A=e.length-
1;0<=A;--A){const w=e[A];w&&(g["Priority "+(A+-3-1)]=Math.round(w/this._size*100)+"%")}return g}resetStats(){this._hit=this._miss=0;this._users.forAll(g=>g.resetHitRate())}clear(g){const n=g.id;this._db.forEach((e,v)=>{v.startsWith(n)&&(this._size-=e.size,this._db.delete(v),this._notifyRemove(v,e.entry,e.size,b.RemoveMode.ALL))});g.size=0}clearAll(){this._db.forEach((g,n)=>this._notifyRemove(n,g.entry,g.size,b.RemoveMode.ALL));this._users.forAll(g=>g.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/
(this._hit+this._miss)}_notifyRemove(g,n,e,v){let A;this._removeFuncs.some(w=>g.startsWith(w[0])?(w=w[1](n,v,e),"number"===typeof w&&(A=w),!0):!1);return A}_checkSize(){this._users.forAll(g=>this._checkSizeLimits(g));this._checkSizeLimits()}_checkSizeLimits(g){const n=g??this;if(!(0>n.maxSize||n.size<=n.maxSize)){for(var e=g?.id,v=!0;v;){v=!1;for(const [A,w]of this._db)if(0===w.lifetime&&(!e||A.startsWith(e))){this._purgeItem(A,w,g);if(n.size<=.9*n.maxSize)return;v||=this._db.has(A)}}for(const [A,
w]of this._db)if(!e||A.startsWith(e))if(this._purgeItem(A,w,g),n.size<=.9*n.maxSize)break}}_purgeItem(g,n,e=this._users.find(v=>g.startsWith(v.id))){this._db.delete(g);if(1>=n.lives){this._size-=n.size;e&&(e.size-=n.size);const v=this._notifyRemove(g,n.entry,n.size,b.RemoveMode.SOME);null!=v&&0<v&&(this._size+=v,e&&(e.size+=v),n.lives=n.lifetime,n.size=v,this._db.set(g,n))}else--n.lives,this._db.set(g,n)}}let D=0;class z{constructor(g,n,e){this.entry=g;this.size=n;this.lives=this.lifetime=e}}b.MemCache=
y;b.MemCacheStorage=r;b.MinPriority=-3;b.NoPriority=-4;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(b,f,y,r,D,z,g,n,e,v,A){function w(F){const L=[];let d=0,J=0;for(let Q=0;Q<F.length;Q++){const S=
F[Q];let Z=null;for(let W=0;W<S.length;W++)Z=S[W],L.push(Z),0===W?J=d=Z[0]:(d=Math.min(d,Z[0]),J=Math.max(J,Z[0]));Z&&L.push([(d+J)/2,0])}return L}function E(F,L){if(!(F instanceof z||F instanceof D))throw p().error("straightLineDensify: the input geometry is neither polyline nor polygon"),new y("straightLineDensify: the input geometry is neither polyline nor polygon");var d=g.getGeometryParts(F);const J=[];for(const S of d){d=[];J.push(d);d.push([S[0][0],S[0][1]]);for(let Z=0;Z<S.length-1;Z++){const W=
S[Z][0],U=S[Z][1],x=S[Z+1][0],I=S[Z+1][1];var Q=Math.sqrt((x-W)*(x-W)+(I-U)*(I-U));const m=(I-U)/Q,l=(x-W)/Q,B=Q/L;if(1<B){for(let P=1;P<=B-1;P++){const N=P*L;d.push([l*N+W,m*N+U])}Q=(Q+Math.floor(B-1)*L)/2;d.push([l*Q+W,m*Q+U])}d.push([x,I])}}return"polygon"===F.type?new D({rings:J,spatialReference:F.spatialReference}):new z({paths:J,spatialReference:F.spatialReference})}function t(F,L,d){L&&(F=E(F,1E6),F=e.webMercatorToGeographic(F,!0));d&&(F=g.updatePolyGeometry(F,d));return F}function q(F,L,d){if(Array.isArray(F)){var J=
F[0];J>L?(d=g.offsetMagnitude(J,L),F[0]=J+-2*d*L):J<d&&(L=g.offsetMagnitude(J,d),F[0]=J+-2*L*d)}else J=F.x,J>L?(d=g.offsetMagnitude(J,L),F=F.clone().offset(-2*d*L,0)):J<d&&(L=g.offsetMagnitude(J,d),F=F.clone().offset(-2*L*d,0));return F}function a(F,L){let d=-1;for(let J=0;J<L.cutIndexes.length;J++){const Q=L.cutIndexes[J],S=L.geometries[J],Z=g.getGeometryParts(S);for(let W=0;W<Z.length;W++){const U=Z[W];U.some(x=>{if(180>x[0])return!0;x=0;for(var I=0;I<U.length;I++){var m=U[I][0];x=m>x?m:x}x=Number(x.toFixed(9));
x=-360*g.offsetMagnitude(x,180);for(I=0;I<U.length;I++)m=S.getPoint(W,I),S.setPoint(W,I,m.clone().offset(x,0));return!0})}if(Q===d)if("polygon"===F[0].type)for(const W of g.getGeometryParts(S))F[Q]=F[Q].addRing(W);else{if("polyline"===F[0].type)for(const W of g.getGeometryParts(S))F[Q]=F[Q].addPath(W)}else d=Q,F[Q]=S}return F}async function u(F,L,d){if(!Array.isArray(F))return u([F],L);L&&"string"!==typeof L&&p().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");
var J="string"===typeof L?L:L?.url??f.geometryServiceUrl;let Q,S,Z;let W=0;var U=[];L=[];for(var x of F)if(null==x)L.push(x);else{if(!I){var I=x.spatialReference;var m=n.getInfo(I);var l=(Q=I.isWebMercator)?102100:4326;S=g.cutParams[l].maxX;Z=g.cutParams[l].minX;var B=g.cutParams[l].plus180Line;l=g.cutParams[l].minus180Line}if(m)if("mesh"===x.type)L.push(x);else if("point"===x.type)L.push(q(x.clone(),S,Z));else if("multipoint"===x.type){var P=x.clone();P.points=P.points.map(N=>q(N,S,Z));L.push(P)}else if("extent"===
x.type)P=x.clone()._normalize(!1,!1,m),L.push(P.rings?new D(P):P);else if(x.extent){P=x.extent;const N=2*g.offsetMagnitude(P.xmin,Z)*S;let T=0===N?x.clone():g.updatePolyGeometry(x.clone(),N);P.offset(N,0);let {xmin:Y,xmax:ea}=P;Y=Number(Y.toFixed(9));ea=Number(ea.toFixed(9));P.intersects(B)&&ea!==S?(W=ea>W?ea:W,T=t(T,Q),U.push(T),L.push("cut")):P.intersects(l)&&Y!==Z?(W=2*ea*S>W?2*ea*S:W,T=t(T,Q,360),U.push(T),L.push("cut")):L.push(T)}else L.push(x.clone());else L.push(x)}I=g.offsetMagnitude(W,S);
m=-90;B=I;for(x=new z;0<I;)l=-180+360*I,x.addPath([[l,m],[l,-1*m]]),m*=-1,I--;if(0<U.length&&0<B){I=await v.cut(J,U,x,d);I=a(U,I);m=[];U=[];for(B=0;B<L.length;B++)x=L[B],"cut"!==x?U.push(x):(x=I.shift(),l=F[B],null!=l&&"polygon"===l.type&&l.rings&&1<l.rings.length&&x.rings.length>=l.rings.length?(m.push(x),U.push("simplify")):U.push(Q?e.geographicToWebMercator(x):x));if(!m.length)return U;L=await A.simplify(J,m,d);F=[];for(d=0;d<U.length;d++)J=U[d],"simplify"!==J?F.push(J):F.push(Q?e.geographicToWebMercator(L.shift()):
L.shift());return F}F=[];for(d=0;d<L.length;d++)J=L[d],"cut"!==J?F.push(J):(J=U.shift(),F.push(!0===Q?e.geographicToWebMercator(J):J));return F}const p=()=>r.getLogger("esri.geometry.support.normalizeUtils");b.getClosestDenormalizedXToReference=function(F,L,d){d=n.getInfo(d);if(null==d)return F;const [J,Q]=d.valid;d=2*Q;let S=0,Z=0;L>Q?S=Math.ceil(Math.abs(L-Q)/d):L<J&&(S=-Math.ceil(Math.abs(L-J)/d));F>Q?Z=Math.ceil(Math.abs(F-Q)/d):F<J&&(Z=-Math.ceil(Math.abs(F-J)/d));F+=(S-Z)*d;L=F-L;L>Q?F-=d:L<
J&&(F+=d);return F};b.getDenormalizedExtent=function(F){if(!F)return null;const L=F.extent;if(!L)return null;var d=F.spatialReference&&n.getInfo(F.spatialReference);if(!d)return L;const [J,Q]=d.valid;({width:d}=L);let {xmin:S,xmax:Z}=L;[S,Z]=[Z,S];if("extent"===F.type||0===d||d<=Q||d>2*Q||S<J||Z>Q)return L;let W;switch(F.type){case "polygon":if(1<F.rings.length)W=w(F.rings);else return L;break;case "polyline":if(1<F.paths.length)W=w(F.paths);else return L;break;case "multipoint":W=F.points}F=L.clone();
for(let U=0;U<W.length;U++){let x=W[U][0];0>x?(x+=Q,Z=Math.max(x,Z)):(x-=Q,S=Math.min(x,S))}F.xmin=S;F.xmax=Z;return F.width<d?(F.xmin-=Q,F.xmax-=Q,F):L};b.normalizeCentralMeridian=u;b.normalizeMapX=function(F,L){if(L=n.getInfo(L)){const [d,J]=L.valid;L=J-d;if(F<d)for(;F<d;)F+=L;if(F>J)for(;F>J;)F-=L}return F};b.straightLineDensify=E;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference",
"./jsonUtils"],function(b,f,y,r){function D(z){return r.isPolygon(z)?z.rings:z.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new f({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:y.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:y.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,
-180],[180,180]]],spatialReference:y.WGS84}),minus180Line:new f({paths:[[[-180,-180],[-180,180]]],spatialReference:y.WGS84})}};b.cutParams=f;b.getGeometryParts=D;b.offsetMagnitude=function(z,g){return Math.ceil((z-g)/(2*g))};b.updatePolyGeometry=function(z,g){const n=D(z);for(const e of n)for(const v of e)v[0]+=g;return z};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),
function(b,f,y,r,D,z){b.cut=async function(g,n,e,v){g=z.parseUrl(g);const A=n[0].spatialReference;n={...v,responseType:"json",query:{...g.query,f:"json",sr:D.srToRESTValue(A),target:JSON.stringify({geometryType:r.getJsonType(n[0]),geometries:n}),cutter:JSON.stringify(e)}};n=await y(g.path+"/cut",n);const {cutIndexes:w,geometries:E=[]}=n.data;return{cutIndexes:w,geometries:E.map(t=>{t=r.fromJSON(t);t.spatialReference=A;return t})}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),
function(b,f,y,r,D,z){function g(n,e,v){const A={};for(const E in n)if("declaredClass"!==E){var w=n[E];null!=w&&"function"!==typeof w&&(Array.isArray(w)?A[E]=w.map(t=>g(t)):"object"===typeof w?w.toJSON?(w=w.toJSON(v?.[E]),A[E]=e?w:JSON.stringify(w)):A[E]=e?w:JSON.stringify(w):A[E]=w)}return A}b.asValidOptions=function(n,e){return e?{...e,query:{...(n??{}),...e.query}}:{query:n}};b.encode=g;b.getToken=function(n,e){return n?z.supportsApiKey(n)&&(e||f.apiKey)?e||f.apiKey:y.id?.findCredential(n)?.token:
null};b.parseUrl=function(n){return"string"===typeof n?D.urlToObject(n):r.clone(n)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(b,f,y,r,D,z){b.simplify=async function(g,n,e){const v="string"===typeof g?y.urlToObject(g):g;g=n[0].spatialReference;const A=r.getJsonType(n[0]);n={...e,
query:{...v.query,f:"json",sr:D.srToRESTValue(g),geometries:JSON.stringify(z.encodeGeometries(n))}};({data:n}=await f(v.path+"/simplify",n));return z.decodeGeometries(n.geometries,A,g)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(b,f){b.decodeGeometries=function(y,r,D){const z=f.getGeometryType(r);return y.map(g=>{g=z.fromJSON(g);g.spatialReference=D;return g})};b.encodeGeometries=
function(y){return{geometryType:f.getJsonType(y[0]),geometries:y.map(r=>r.toJSON())}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(b,f,y,r){function D(t,q,a={}){const u=z(q,t);if(!u)throw a=A.getError(q,t),new f("unsupported-query","invalid SQL expression",{expression:q,error:a});t=a.expressionName||"expression";
if(a.validateStandardized&&!u.isStandardized)throw new f("unsupported-query",`${t} is not standard`,{expression:q});if(a.validateAggregate&&!u.isAggregate)throw new f("unsupported-query",`${t} does not contain a valid aggregate function`,{expression:q});return u.fieldNames}function z(t,q){return t?A.get(t,q):null}function g(t){return/\((.*?)\)/.test(t)?t:t.split(" as ")[0]}function n(t,q,a,u={}){const p=new Map;e(p,t,q,u.allowedFieldTypes??E,a);if(p.size)throw new f("unsupported-query",`${u.expressionName??
"expression"} contains invalid or missing fields`,{errors:Array.from(p.values()),query:u.query});}function e(t,q,a,u,p){p=p.includes("*")?[...a,...p.filter(F=>"*"!==F)]:p;for(const F of p)if(q.get(F))v(t,q,a,u,F);else try{const L=g(F),d=D(q,L,{validateStandardized:!0});for(const J of d)v(t,q,a,u,J)}catch(L){t.set(F,{type:"expression-error",expression:F,error:L})}}function v(t,q,a,u,p){(q=q.get(p))?a.has(q.name)?"all"!==u&&!1===u?.has(q.type)&&t.set(p,{type:"invalid-type",fieldName:q.name,fieldType:r.kebabDict.fromJSON(q.type),
allowedFieldTypes:Array.from(u,F=>r.kebabDict.fromJSON(F))}):t.set(p,{type:"missing-field",fieldName:q.name}):t.set(p,{type:"invalid-field",fieldName:p})}const A=new y.WhereClauseCache(50,500);y=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));const w=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),E=new Set(["esriFieldTypeString",
"esriFieldTypeGUID","esriFieldTypeGlobalID",...y,...w]);b.allDateAndTimeFieldTypes=w;b.getAliasFromFieldName=function(t){return t.split(" as ")[1]};b.getExpressionFromFieldName=g;b.getWhereClause=z;b.numericFieldTypes=y;b.validateFields=n;b.validateHaving=function(t,q,a,u,p){if(!a)return!0;const F=D(t,a,{validateAggregate:!0,expressionName:"having clause"});n(t,q,F,{expressionName:"having clause",query:p});if(!z(a,t)?.getExpressions().every(L=>{const {aggregateType:d,field:J}=L,Q=t.get(J)?.name;return u.some(S=>
{const {onStatisticField:Z,statisticType:W}=S;return t.get(Z)?.name===Q&&W.toLowerCase().trim()===d})}))throw new f("unsupported-query","expressions in having clause should also exist in outStatistics",{having:a});return!0};b.validateWhere=function(t,q,a,u){if(!a)return!0;a=D(t,a,{validateStandardized:!0,expressionName:"where clause"});n(t,q,a,{expressionName:"where clause",query:u});return!0};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../LRUCache","./WhereClause"],function(b,f,y){class r{constructor(D,z){this._cache=new f.LRUCache(D);this._invalidCache=new f.LRUCache(z)}get(D,z){const g=`${z.uid}:${D}`,n=this._cache.get(g);if(n)return n;if(null!=this._invalidCache.get(g))return null;try{const e=y.WhereClause.create(D,z);this._cache.put(g,e);return e}catch(e){return this._invalidCache.put(g,e),null}}getError(D,z){return this._invalidCache.get(`${z.uid}:${D}`)??null}}b.WhereClauseCache=r;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(b,f){class y{constructor(r,D){this._storage=new f.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=r;this._storage.register(this);D&&this._storage.registerRemoveFunc("",D)}destroy(){this._storage.deregister(this);this._storage.destroy()}put(r,D,z=1){this._storage.put(this,r,D,z,1)}pop(r){return this._storage.pop(this,r)}get(r){return this._storage.get(this,r)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(r){this._storage.maxSize=
r}resetHitRate(){}}b.LRUCache=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../../arcade/featureset/support/errorsupport ../has ./AggregateFunctions ./DateOnly ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),function(b,f,y,r,D,z,g,n,e,v,A,w,E,t,q){function a(x){return Array.isArray(x)?
x:[x]}function u(x){return null!==x?!0!==x:null}function p(x,I){return null!=x&&null!=I?!0===x&&!0===I:!1===x||!1===I?!1:null}function F(x,I){return null!=x&&null!=I?!0===x||!0===I:!0===x||!0===I?!0:null}function L(x,I,m){if(null==x)return null;m=!1;for(const l of I)if(null==l)m=null;else if(x===l){m=!0;break}else if(n.isDateOrTimeValue(x)&&n.isDateOrTimeValue(l)&&(m=n.sqlCompare(x,l,"\x3d")))break;return m}function d(x,I,m){if(null==x)return null;let l="",B=W.Normal;for(let P=0;P<I.length;P++){const N=
I.charAt(P);switch(B){case W.Normal:N===m?B=W.Escaped:l="-[]/{}()*+?.\\^$|".includes(N)?l+("\\"+N):"%"===N?l+".*":"_"===N?l+".":l+N;break;case W.Escaped:l="-[]/{}()*+?.\\^$|".includes(N)?l+("\\"+N):l+N,B=W.Normal}}return(new RegExp("^"+l+"$","m")).test(x)}function J(x,I,m,l){x=l.getAttribute(x,I);I=m?.get(I);return null==x||"esriFieldTypeDate"!==I?.type&&"date"!==I?.type?null==x||"esriFieldTypeDateOnly"!==I?.type&&"date-only"!==I?.type?null==x||"esriFieldTypeTimeOnly"!==I?.type&&"time-only"!==I?.type?
null==x||"esriFieldTypeTimestampOffset"!==I?.type&&"timestamp-offset"!==I?.type?x:new A.SqlTimeStampOffset(x):E.TimeOnly.fromReader(x):z.DateOnly.fromReader(x):e.convertToExecutingTimeZone(new Date(x),m?.getLuxonTimeZone(I.name)??q.FixedOffsetZone.utcInstance)}const Q=new Set(["current_timestamp","current_date","current_time"]);class S{static makeBool(x){return!0===x}static featureValue(x,I,m,l){return J(x,I,m,l)}static equalsNull(x){return null===x}static applyLike(x,I,m){return d(x,I,m)}static ensureArray(x){return a(x)}static applyIn(x,
I,m){return L(x,I)}static currentDate(x){return z.DateOnly.fromNow(x)}static makeSqlInterval(x,I,m){return v.SqlInterval.createFromValueAndQualifier(x,I,m)}static convertInterval(x){return x instanceof v.SqlInterval?x.valueInMilliseconds():x}static currentTimestamp(x){return e.convertToExecutingTimeZone(new Date,x)}static compare(x,I,m,l){return n.sqlCompare(I,m,x)}static calculate(x,I,m,l){return g.sqlCalculateFunction(x,I,m,l)}static evaluateTime(x){return e.parseTime(x)}static evaluateTimestamp(x,
I,m){return e.parseTimestamp(x,I,m)}static evaluateDate(x,I){return e.parseDate(x,I)}static evaluateFunction(x,I,m){return w.evaluateFunction(x,I,m)}static lookup(x,I){x=I[x];return void 0===x?null:x}static between(x,I,m){return null==x||null==I[0]||null==I[1]?null:n.sqlCompare(x,I[0],"\x3e\x3d")&&n.sqlCompare(x,I[1],"\x3c\x3d")}static notbetween(x,I,m){return null==x||null==I[0]||null==I[1]?null:n.sqlCompare(x,I[0],"\x3c")||n.sqlCompare(x,I[1],"\x3e")}static ternaryNot(x){return u(x)}static ternaryAnd(x,
I){return p(x,I)}static ternaryOr(x,I){return F(x,I)}}class Z{constructor(x,I,m="UTC"){this.fieldsIndex=I;this.timeZone=m;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=t.WhereGrammar.parse(x);const {isStandardized:l,isAggregate:B,referencedFieldNames:P}=this._extractExpressionInfo(I);this._referencedFieldNames=P;this.isStandardized=l;this.isAggregate=B}static convertValueToStorageFormat(x,I=null){if(null===I)return e.isDate(x)?x.getTime():e.isDateTime(x)?x.toMillis():e.isTimestampOffset(x)?
x.toStorageFormat():e.isTimeOnly(x)?x.toStorageString():e.isDateOnly(x)?x.toStorageFormat():x;switch(I){case "date":if(e.isDate(x))return x.getTime();if(e.isDateTime(x))return x.toMillis();if(e.isTimestampOffset(x))return x.toMilliseconds();if(e.isDateOnly(x))return x.toNumber();break;case "date-only":if(e.isDate(x))return z.DateOnly.fromDateJS(x).toString();if(e.isTimestampOffset(x))return z.DateOnly.fromSqlTimeStampOffset(x).toString();if(e.isDateTime(x))return z.DateOnly.fromDateTime(x).toString();
break;case "time-only":if(e.isDate(x))return E.TimeOnly.fromDateJS(x).toStorageString();if(e.isDateTime(x))return E.TimeOnly.fromDateTime(x).toStorageString();if(e.isTimestampOffset(x))return E.TimeOnly.fromSqlTimeStampOffset(x).toStorageString();if(e.isTimeOnly(x))return x.toStorageString();break;case "timestamp-offset":if(e.isDate(x))return A.SqlTimeStampOffset.fromJSDate(x).toStorageFormat();if(e.isDateTime(x))return A.SqlTimeStampOffset.fromDateTime(x).toStorageFormat();if(e.isTimestampOffset(x))return x.toStorageFormat()}return x}static create(x,
I,m="UTC"){return new Z(x,I,m)}get fieldNames(){return this._referencedFieldNames}testSet(x,I=U){return!!this._evaluateNode(this.parseTree,null,I,x)}calculateValue(x,I=U){x=this._evaluateNode(this.parseTree,x,I,null);return x instanceof v.SqlInterval?x.valueInMilliseconds()/864E5:x}calculateValueCompiled(x,I=U){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(x,this.parameters,I,this.fieldsIndex,this.timeZone);if(r("esri-csp-restrictions"))return this.calculateValue(x,
I);this._compileMe();return this.parseTree._compiledVersion(x,this.parameters,I,this.fieldsIndex,this.timeZone)}testFeature(x,I=U){return!!this._evaluateNode(this.parseTree,x,I,null)}testFeatureCompiled(x,I=U){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(x,this.parameters,I,this.fieldsIndex,this.timeZone);if(r("esri-csp-restrictions"))return this.testFeature(x,I);this._compileMe();return!!this.parseTree._compiledVersion(x,this.parameters,I,this.fieldsIndex,this.timeZone)}get hasDateFunctions(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,x=>{"current-time"===x.type?this._hasDateFunctions=!0:"function"===x.type&&(this._hasDateFunctions=this._hasDateFunctions||Q.has(x.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const x=new Set;this._visitAll(this.parseTree,I=>{"function"===I.type&&x.add(I.name.toLowerCase())});return Array.from(x)}getExpressions(){const x=new Map;this._visitAll(this.parseTree,I=>{if("function"===
I.type){const m=I.name.toLowerCase();I=I.args.value[0];if("column-reference"===I.type){I=I.column;const l=`${m}-${I}`;x.has(l)||x.set(l,{aggregateType:m,field:I})}}});return[...x.values()]}getVariables(){const x=new Set;this._visitAll(this.parseTree,I=>{"parameter"===I.type&&x.add(I.value.toLowerCase())});return Array.from(x)}_compileMe(){const x="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter",
"fieldsIndex","timeZone",x)).bind(S)}_extractExpressionInfo(x){const I=[],m=new Set;let l=!0,B=!1;this._visitAll(this.parseTree,P=>{switch(P.type){case "column-reference":var N=x?.get(P.column);let T;N?N=T=N.name??"":(T=P.column,N=T.toLowerCase());m.has(N)||(m.add(N),I.push(T));P.column=T;break;case "function":const {name:Y,args:ea}=P;P=ea.value.length;l&&=w.isStandardized(Y,P);!1===B&&(B=D.isAggregate(Y,P))}});return{referencedFieldNames:Array.from(I),isStandardized:l,isAggregate:B}}_visitAll(x,
I){if(null!=x)switch(I(x),x.type){case "when-clause":this._visitAll(x.operand,I);this._visitAll(x.value,I);break;case "case-expression":for(const m of x.clauses)this._visitAll(m,I);"simple"===x.format&&this._visitAll(x.operand,I);null!==x.else&&this._visitAll(x.else,I);break;case "expression-list":for(const m of x.value)this._visitAll(m,I);break;case "unary-expression":this._visitAll(x.expr,I);break;case "binary-expression":this._visitAll(x.left,I);this._visitAll(x.right,I);break;case "function":this._visitAll(x.args,
I)}}evaluateNodeToJavaScript(x){switch(x.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(x.value)+", "+JSON.stringify(x.qualifier)+","+JSON.stringify(x.op)+")";case "case-expression":var I="";if("simple"===x.format){var m=this.evaluateNodeToJavaScript(x.operand);I="( ";for(let l=0;l<x.clauses.length;l++)I+=" (this.compare('\x3d',"+m+","+this.evaluateNodeToJavaScript(x.clauses[l].operand)+") ? ("+this.evaluateNodeToJavaScript(x.clauses[l].value)+") : "}else for(I=
"( ",m=0;m<x.clauses.length;m++)I+=" this.makeBool("+this.evaluateNodeToJavaScript(x.clauses[m].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(x.clauses[m].value)+") : ";I=null!==x.else?I+this.evaluateNodeToJavaScript(x.else):I+"null";return I+" )";case "parameter":return"this.lookup("+JSON.stringify(x.value.toLowerCase())+",lookups)";case "expression-list":I="[";for(m of x.value)"["!==I&&(I+=","),I+=this.evaluateNodeToJavaScript(m);return I+"]";case "unary-expression":return"this.ternaryNot("+
this.evaluateNodeToJavaScript(x.expr)+")";case "binary-expression":switch(x.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+" )";case "IS":if("null"!==x.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(x.left)+")";case "ISNOT":if("null"!==
x.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(x.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(x.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(x.right)+"), timeZone)";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(x.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(x.right)+"), timeZone))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(x.left)+
","+this.evaluateNodeToJavaScript(x.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+","+JSON.stringify(x.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+","+JSON.stringify(x.escape)+
"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(x.operator)+","+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(x.operator)+","+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+", timeZone)"}throw new y.SqlError(y.SqlErrorCodes.UnsupportedOperator,{operator:x.operator});
case "null":case "boolean":case "string":case "number":return JSON.stringify(x.value);case "time":return"this.evaluateTime("+JSON.stringify(x.value)+")";case "date":return"this.evaluateDate("+JSON.stringify(x.value)+", 'unknown')";case "timestamp":return"this.evaluateTimestamp("+JSON.stringify(x.value)+", 'unknown')";case "current-time":return"date"===x.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(x.column)+
",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(x.name)+","+this.evaluateNodeToJavaScript(x.args)+", timeZone)"}throw new y.SqlError(y.SqlErrorCodes.UnsupportedSyntax,{node:x.type});}_evaluateNode(x,I,m,l){switch(x.type){case "interval":return m=this._evaluateNode(x.value,I,m,l),v.SqlInterval.createFromValueAndQualifier(m,x.qualifier,x.op);case "case-expression":if("simple"===x.format){var B=this._evaluateNode(x.operand,I,m,l);for(var P=0;P<x.clauses.length;P++)if(n.sqlCompare(B,
this._evaluateNode(x.clauses[P].operand,I,m,l),"\x3d",this.timeZone))return this._evaluateNode(x.clauses[P].value,I,m,l)}else for(B=0;B<x.clauses.length;B++)if(!0===this._evaluateNode(x.clauses[B].operand,I,m,l))return this._evaluateNode(x.clauses[B].value,I,m,l);return null!==x.else?this._evaluateNode(x.else,I,m,l):null;case "parameter":return x=this.parameters[x.value.toLowerCase()],e.isDate(x)?q.DateTime.fromJSDate(x):x instanceof f.ArcadeDate?x.toDateTime():x;case "expression-list":B=[];for(var N of x.value)B.push(this._evaluateNode(N,
I,m,l));return B;case "unary-expression":return u(this._evaluateNode(x.expr,I,m,l));case "binary-expression":switch(x.operator){case "AND":return p(this._evaluateNode(x.left,I,m,l),this._evaluateNode(x.right,I,m,l));case "OR":return F(this._evaluateNode(x.left,I,m,l),this._evaluateNode(x.right,I,m,l));case "IS":if("null"!==x.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);return null===this._evaluateNode(x.left,I,m,l);case "ISNOT":if("null"!==x.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);
return null!==this._evaluateNode(x.left,I,m,l);case "IN":return B=a(this._evaluateNode(x.right,I,m,l)),L(this._evaluateNode(x.left,I,m,l),B,this.timeZone);case "NOT IN":return B=a(this._evaluateNode(x.right,I,m,l)),u(L(this._evaluateNode(x.left,I,m,l),B,this.timeZone));case "BETWEEN":return B=this._evaluateNode(x.left,I,m,l),x=this._evaluateNode(x.right,I,m,l),null==B||null==x[0]||null==x[1]?null:n.sqlCompare(B,x[0],"\x3e\x3d",this.timeZone)&&n.sqlCompare(B,x[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return B=
this._evaluateNode(x.left,I,m,l),x=this._evaluateNode(x.right,I,m,l),null==B||null==x[0]||null==x[1]?null:n.sqlCompare(B,x[0],"\x3c",this.timeZone)||n.sqlCompare(B,x[1],"\x3e",this.timeZone);case "LIKE":return d(this._evaluateNode(x.left,I,m,l),this._evaluateNode(x.right,I,m,l),x.escape);case "NOT LIKE":return u(d(this._evaluateNode(x.left,I,m,l),this._evaluateNode(x.right,I,m,l),x.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return n.sqlCompare(this._evaluateNode(x.left,
I,m,l),this._evaluateNode(x.right,I,m,l),x.operator,this.timeZone);case "-":case "+":case "*":case "/":case "||":return g.sqlCalculateFunction(x.operator,this._evaluateNode(x.left,I,m,l),this._evaluateNode(x.right,I,m,l),this.timeZone)}case "null":case "boolean":case "string":case "number":return x.value;case "date":return x.parsedValue??(x.parsedValue=e.parseDate(x.value,"unknown")),x.parsedValue;case "timestamp":return x.parsedValue??(x.parsedValue=e.parseTimestamp(x.value,"unknown")),x.parsedValue;
case "time":return e.parseTime(x.value);case "current-time":return"date"===x.mode?z.DateOnly.fromNow(this.timeZone):e.convertToExecutingTimeZone(new Date,this.timeZone);case "column-reference":return J(I,x.column,this.fieldsIndex,m);case "data-type":return x.value;case "function":if(this.isAggregate&&D.isAggregate(x.name,x.args.value.length)){I=[];for(B of x.args?.value||[]){N=[];for(P of l||[])N.push(this._evaluateNode(B,P,m,null));I.push(N)}return D.aggregateFunction(x.name,I)}m=this._evaluateNode(x.args,
I,m,l);return w.evaluateFunction(x.name,m,this.timeZone)}throw new y.SqlError(y.SqlErrorCodes.UnsupportedSyntax,{node:x.type});}}var W;(function(x){x[x.Normal=0]="Normal";x[x.Escaped=1]="Escaped"})(W||={});const U={getAttribute(x,I){return(x&&"object"===typeof x.attributes?x.attributes:x)[I]}};b.WhereClause=Z;b.defaultAttributeAdapter=U;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone",
"../chunks/datetime"],function(b,f,y,r){function D(v,A,w){return v<A?v-A:v>w?v-w:0}function z(v,A=!0){if(v instanceof r.Zone)return v;if("system"===v.toLowerCase())return"system";if("utc"===v.toLowerCase())return"UTC";if("unknown"===v.toLowerCase())return y.UnknownTimeZone.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(v)){const w=r.FixedOffsetZone.parseSpecifier("UTC"+(v.startsWith("+")||v.startsWith("-")?"":"+")+v);if(w)return w}v=r.IANAZone.create(v);if(!v.isValid){if(A)throw new n(b.ArcadeDateErrorCodes.TimeZoneNotRecognized);
return null}return v}b.ArcadeDateErrorCodes=void 0;(b.ArcadeDateErrorCodes||(b.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const g={[b.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class n extends Error{constructor(v,A){super(f.replace(g[v],A));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,n)}}class e{constructor(v){this._date=v;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(v=
0,A=1,w=1,E=0,t=0,q=0,a=0,u){if(isNaN(v)||isNaN(A)||isNaN(w)||isNaN(E)||isNaN(t)||isNaN(q)||isNaN(a))return null;const p=r.DateTime.local(v,A).daysInMonth;v=r.DateTime.fromObject({day:1>w?1:w>p?p:w,year:v,month:1>A?1:12<A?12:A,hour:0>E?0:23<E?23:E,minute:0>t?0:59<t?59:t,second:0>q?0:59<q?59:q,millisecond:0>a?0:999<a?999:a},{zone:z(u)});v=v.plus({months:D(A,1,12),days:D(w,1,p),hours:D(E,0,23),minutes:D(t,0,59),seconds:D(q,0,59),milliseconds:D(a,0,999)});return new e(v)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??
"system"}static arcadeDateAndZoneToArcadeDate(v,A){A=z(A);return v.isUnknownTimeZone||A===y.UnknownTimeZone.instance?e.fromParts(v.year,v.monthJS+1,v.day,v.hour,v.minute,v.second,v.millisecond,A):new e(v._date.setZone(A))}static dateJSToArcadeDate(v){return new e(r.DateTime.fromJSDate(v,{zone:"system"}))}static dateJSAndZoneToArcadeDate(v,A="system"){A=z(A);return new e(r.DateTime.fromJSDate(v,{zone:A}))}static unknownEpochToArcadeDate(v){return new e(r.DateTime.fromMillis(v,{zone:y.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(v){return new e(r.DateTime.fromMillis(v.getTime(),
{zone:y.UnknownTimeZone.instance}))}static epochToArcadeDate(v,A="system"){A=z(A);return new e(r.DateTime.fromMillis(v,{zone:A}))}static dateTimeToArcadeDate(v){return new e(v)}clone(){return new e(this._date)}changeTimeZone(v){v=z(v);return e.dateTimeToArcadeDate(this._date.setZone(v))}static dateTimeAndZoneToArcadeDate(v,A){A=z(A);return v.zone===y.UnknownTimeZone.instance||A===y.UnknownTimeZone.instance?e.fromParts(v.year,v.month,v.day,v.hour,v.minute,v.second,v.millisecond,A):new e(v.setZone(A))}static nowToArcadeDate(v){v=
z(v);return new e(r.DateTime.fromJSDate(new Date,{zone:v}))}static nowUTCToArcadeDate(){return new e(r.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===e.systemTimeZoneCanonicalName}equals(v){return this.isSystem&&v.isSystem?this.toNumber()===v.toNumber():this.isUnknownTimeZone!==v.isUnknownTimeZone?!1:this._date.equals(v._date)}get isUnknownTimeZone(){return this._date.zone===y.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let v=
this._date.weekday;6<v&&(v=0);return v}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const v=this.zone;return"fixed"===v.type?0===v.fixed?"UTC":v.formatOffset(0,"short"):v.name}stringify(){return JSON.stringify(this.toJSDate())}plus(v){return new e(this._date.plus(v))}diff(v,A="milliseconds"){return this._date.diff(v._date,A)[A]}toISODate(){return this._date.toISODate()}toISOString(v){return v?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(v,A){return this._date.toISOTime({suppressMilliseconds:v,
includeOffset:A&&!this.isUnknownTimeZone})}toFormat(v,A){this.isUnknownTimeZone&&(v=v.replaceAll("Z",""));return this._date.toFormat(v,A)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new e(this._date.toUTC())}toLocal(){return new e(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(v){if(!v)return null;
v=r.DateTime.fromISO(v,{setZone:!0});return new e(v)}}b.ArcadeDate=e;b.ArcadeDateError=n;b.arcadeDateErrorMessages=g;b.createDateTimeZone=z;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(b,f){function y(D){return D instanceof f.Zone?D===r.instance?!0:!1:"unknown"===D?.toString().toLowerCase()?!0:!1}class r{}r.instance=new f.IANAZone("Etc/UTC");b.UnknownTimeZone=r;b.adoptTimeZone=function(D,
z){return f.DateTime.fromObject({day:D.day,year:D.year,month:D.month,hour:D.hour,minute:D.minute,second:D.second,millisecond:D.millisecond},{zone:z})};b.isUnknownTimeZone=y;b.substituteUnknownTimezone=function(D){return y(D)?r.instance:D};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../core/string"],function(b,f){b.SqlErrorCodes=void 0;(function(g){g.InvalidFunctionParameters="InvalidFunctionParameters";
g.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";g.UnsupportedSqlFunction="UnsupportedSqlFunction";g.UnsupportedOperator="UnsupportedOperator";g.UnsupportedSyntax="UnsupportedSyntax";g.UnsupportedIsRhs="UnsupportedIsRhs";g.UnsupportedIsLhs="UnsupportedIsLhs";g.InvalidDataType="InvalidDataType";g.CannotCastValue="CannotCastValue";g.FunctionNotRecognized="FunctionNotRecognized";g.InvalidTime="InvalidTime";g.InvalidParameterCount="InvalidParameterCount";g.InvalidTimeStamp="InvalidTimeStamp";
g.InvalidDate="InvalidDate";g.InvalidOperator="InvalidOperator";g.IllegalInterval="IllegalInterval";g.YearMonthIntervals="YearMonthIntervals";g.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";g.MissingStatisticParameters="MissingStatisticParameters"})(b.SqlErrorCodes||(b.SqlErrorCodes={}));const y={[b.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[b.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[b.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",
[b.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[b.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[b.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[b.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[b.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[b.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[b.SqlErrorCodes.InvalidDate]:"Invalid date encountered",
[b.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[b.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[b.SqlErrorCodes.IllegalInterval]:"Illegal interval",[b.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[b.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[b.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[b.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[b.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",
[b.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class r extends Error{constructor(g,n){super(f.replace(y[g],n));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,r)}}b.FeatureSetErrorCodes=void 0;(function(g){g.NeverReach="NeverReach";g.NotImplemented="NotImplemented";g.Cancelled="Cancelled";g.InvalidStatResponse="InvalidStatResponse";g.InvalidRequest="InvalidRequest";g.RequestFailed="RequestFailed";
g.MissingFeatures="MissingFeatures";g.AggregationFieldNotFound="AggregationFieldNotFound";g.DataElementsNotFound="DataElementsNotFound"})(b.FeatureSetErrorCodes||(b.FeatureSetErrorCodes={}));const D={[b.FeatureSetErrorCodes.Cancelled]:"Cancelled",[b.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[b.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[b.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[b.FeatureSetErrorCodes.MissingFeatures]:"Missing features",
[b.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[b.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[b.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[b.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};class z extends Error{constructor(g,n){super(f.replace(D[g],n));this.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(this,z)}}b.FeatureSetError=
z;b.SqlError=r;b.featureSetErrorMessages=D;b.sqlErrorMessages=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(b,f,y,r,D,z){function g(A){if(null===A)return null;let w=0,E=0;for(let t=0;t<A.length;t++){const q=A[t];if(null!==q){if("number"!==typeof q)throw new f.SqlError(f.SqlErrorCodes.InvalidValueForAggregateFunction);
E++;w+=q}}return 0===E?null:w/A.length}function n(A,w){if(null===A)return null;let E=null,t=null;for(const q of A)A=q,A=q instanceof y.DateOnly?q.toNumber():q instanceof D.TimeOnly?q.toNumber():q instanceof z.DateTime?q.toMillis():q instanceof r.SqlTimeStampOffset?q.toMilliseconds():q,null===E?(E=q,t=A):"max"===w&&null!==t&&null!==A&&t<=A?(E=q,t=A):"min"===w&&null!==t&&null!==A&&t>=A&&(E=q,t=A);return E}function e(A){if(null===A)return null;A=A.filter(t=>null!==t);if(0===A.length)return null;const w=
g(A);if(null===w)return null;let E=0;for(const t of A){if("number"!==typeof t)throw new f.SqlError(f.SqlErrorCodes.InvalidValueForAggregateFunction);E+=(w-t)**2}return E/(A.length-1)}const v={min:{minParams:1,maxParams:1,evaluate:A=>n(A[0],"min")},max:{minParams:1,maxParams:1,evaluate:A=>n(A[0],"max")},avg:{minParams:1,maxParams:1,evaluate:A=>g(A[0])},sum:{minParams:1,maxParams:1,evaluate:A=>{A=A[0];if(null===A)A=null;else{var w=0;for(let E=0;E<A.length;E++){const t=A[E];if(null!==t){if("number"!==
typeof t)throw new f.SqlError(f.SqlErrorCodes.InvalidValueForAggregateFunction);w+=t}}A=w}return A}},stddev:{minParams:1,maxParams:1,evaluate:A=>{A=A[0];null===A?A=null:(A=e(A),A=null===A?null:Math.sqrt(A));return A}},count:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:A[0].length},var:{minParams:1,maxParams:1,evaluate:A=>e(A[0])}};b.aggregateFunction=function(A,w){const E=v[A.toLowerCase()];if(null==E)throw new f.SqlError(f.SqlErrorCodes.FunctionNotRecognized);if(w.length<E.minParams||w.length>
E.maxParams)throw new f.SqlError(f.SqlErrorCodes.InvalidParameterCount,{name:A.toUpperCase()});return E.evaluate(w)};b.isAggregate=function(A,w){A=v[A.toLowerCase()];return null!=A&&w>=A.minParams&&w<=A.maxParams};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(b,f,y,r){function D(g){g=g.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$\x26]");let n="";const e=
/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const v of g.match(e)||[])switch(v){case "D":n+="d";break;case "DD":n+="dd";break;case "DDD":n+="o";break;case "d":n+="c";break;case "ddd":n+="ccc";break;case "dddd":n+="cccc";break;case "M":n+="L";break;case "MM":n+="LL";break;case "MMM":n+="LLL";break;case "MMMM":n+="LLLL";break;case "YY":n+="yy";
break;case "Y":case "YYYY":n+="yyyy";break;case "Q":n+="q";break;case "X":case "x":n+=v;break;default:n=2<=v.length&&"["===v.slice(0,1)&&"]"===v.slice(-1)?n+`'${v.slice(1,-1)}'`:n+`'${v}'`}return n}class z{constructor(g,n,e){this._year=g;this._month=n;this._day=e;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(g){return g instanceof
z&&g.day===this.day&&g.month===this.month&&g.year===this.year}clone(){return new z(this._year,this._month,this._day)}toDateTime(g){return r.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:f.createDateTimeZone(g)})}toDateTimeLuxon(g){return r.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:f.createDateTimeZone(g)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(g=
null,n=!0){if(null===g||""===g)return this.toString();n&&(g=D(g));if(!g)return"";n=this.toDateTime("unknown");return f.ArcadeDate.dateTimeToArcadeDate(n).toFormat(g,{locale:y.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const g=this.toDateTime("unknown");return f.ArcadeDate.dateTimeToArcadeDate(g)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",
!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(g,n){return z.fromDateTime(this.toUTCDateTime().plus({[g]:n}))}toUTCDateTime(){return r.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(g,n){switch(n.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(g.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(g.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===n?
this.toUTCDateTime().diff(g.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(g.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(g.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(g.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(g.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(g){g=r.DateTime.fromMillis(g,{zone:r.FixedOffsetZone.utcInstance});return g.isValid?z.fromParts(g.year,g.month,g.day):null}static fromSeconds(g){g=r.DateTime.fromSeconds(g,{zone:r.FixedOffsetZone.utcInstance});return g.isValid?z.fromParts(g.year,g.month,g.day):null}static fromReader(g){if(!g)return null;g=g.split("-");return 3!==g.length?null:new z(parseInt(g[0],10),parseInt(g[1],
10),parseInt(g[2],10))}static fromParts(g,n,e){g=new z(g,n,e);return!1===g.isValid?null:g}static fromDateJS(g){return z.fromParts(g.getFullYear(),g.getMonth()+1,g.getDay())}static fromDateTime(g){return z.fromParts(g.year,g.month,g.day)}static fromSqlTimeStampOffset(g){return this.fromDateTime(g.toDateTime())}static fromString(g,n=null){if(""===g||null===g)return null;var e=[];if(n)(n=D(n))&&e.push(n);else if(null===n||""===n)return g=r.DateTime.fromISO(g,{setZone:!0}),g.isValid?z.fromParts(g.year,
g.month,g.day):null;for(const v of e)if(e=r.DateTime.fromFormat(g,n??v),e.isValid)return new z(e.year,e.month,e.day);return null}static fromNow(g="system"){g=r.DateTime.fromJSDate(new Date).setZone(f.createDateTimeZone(g));return new z(g.year,g.month,g.day)}}b.DateOnly=z;b.standardizeDateOnlyFormat=D;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports","../../chunks/datetime"],function(b,f){function y(D){return Number.isNaN(D)||
0===D?D:Math.trunc(D)}class r{constructor(D){this._timeStampOffset=D;this._date=null}toDateTime(){this._date??(this._date=f.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return y(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return y(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return r.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(D){return new r(f.DateTime.fromJSDate(D).toISO({includeOffset:!0}))}static fromDateTime(D){return new r(D.toISO({includeOffset:!0}))}static fromParts(D,
z,g=0,n=0,e=0,v=0,A=0,w=!1,E=0,t=0){D=`${D.toString().padStart(4,"0")}-${z.toString().padStart(2,"0")}-${g.toString().padStart(2,"0")}`;z="";10>v&&(z="0");n=`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}:${z+v.toString()}`;0!==A&&(n+="."+A.toString().padStart(3,"0"));A=`${w?"-":"+"}${E.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;return new r(D+"T"+n+A)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let D=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});D&&=D.replace(".000","");return D}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(D){D=this.toDateTime().plus(D);return r.fromDateTime(D)}}b.SqlTimeStampOffset=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(b,f,y,r){function D(g){if(!g)return"";const n=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let e="";for(const v of g.match(n)||
[])switch(v){case "SSS":e+=v;break;case "A":case "a":e+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":e+=v;break;default:e+=`'${v}'`}return e}class z{constructor(g,n,e,v){this._hour=g;this._minute=n;this._second=e;this._millisecond=v;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(g){return g instanceof z&&g.hour===
this.hour&&g.minute===this.minute&&g.second===this.second&&g.millisecond===this.millisecond}clone(){return new z(this.hour,this.minute,this.second,this.millisecond)}isValid(){return f.isInteger(this.hour)&&f.isInteger(this.minute)&&f.isInteger(this.second)&&f.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(g=null){return null===g||""===g?this.toString():(g=D(g))?r.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(g,{locale:y.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(g,n,e,v){g=new z(g,n,e,v);return g.isValid()?g:null}static fromReader(g){if(!g)return null;g=g.split(":");return 3!==g.length?null:new z(parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],
10),0)}static fromMilliseconds(g){return 864E5<g||0>g?null:new z(Math.floor(g/36E5%24),Math.floor(g/6E4%60),Math.floor(g/1E3%60),Math.floor(g%1E3))}static fromDateJS(g){return new z(g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds())}static fromDateTime(g){return new z(g.hour,g.minute,g.second,g.millisecond)}static fromSqlTimeStampOffset(g){return this.fromDateTime(g.toDateTime())}static fromString(g,n=null){if(""===g||null===g)return null;const e=[];if(n)(n=D(n))&&e.push(n);else if(null===
n||""===n)e.push("HH:mm:ss"),e.push("HH:mm:ss.SSS"),e.push("hh:mm:ss a"),e.push("hh:mm:ss.SSS a"),e.push("HH:mm"),e.push("hh:mm a"),e.push("H:mm"),e.push("h:mm a"),e.push("H:mm:ss"),e.push("h:mm:ss a"),e.push("H:mm:ss.SSS"),e.push("h:mm:ss.SSS a");for(const v of e)if(n=r.DateTime.fromFormat(g,v),n.isValid)return new z(n.hour,n.minute,n.second,n.millisecond);return null}plus(g,n){switch(g){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return z.fromDateTime(this.toUTCDateTime().plus({[g]:n}))}return null}toUTCDateTime(){return r.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(g,n){switch(n.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(g.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(g.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===n?this.toUTCDateTime().diff(g.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(g.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(g.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(g.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(g.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds}}}b.TimeOnly=z;b.standardizeTimeFormat=D;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(b,f){b.cloneGeometry=function(y){if(null==y)return null;const r=y.clone();void 0!==y.cache._geVersion&&(r.cache._geVersion=y.cache._geVersion);return r};b.convertLinearUnitsToCode=function(y){if(null==y)return null;if("number"===typeof y)return y;y=y.toLowerCase();y=y.replaceAll(/\s/g,"");y=y.replaceAll("-","");switch(y){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};b.convertSquareUnitsToCode=
function(y){if(null==y)return null;if("number"===typeof y)return y;y=y.toLowerCase();y=y.replaceAll(/\s/g,"");y=y.replaceAll("-","");switch(y){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};b.isInteger=function(y){return"number"===typeof y&&isFinite(y)&&Math.floor(y)===y};b.sameGeomType=function(y,r){return y===r||"point"===y&&"esriGeometryPoint"===r||"polyline"===y&&"esriGeometryPolyline"===
r||"polygon"===y&&"esriGeometryPolygon"===r||"extent"===y&&"esriGeometryEnvelope"===r||"multipoint"===y&&"esriGeometryMultipoint"===r||"point"===r&&"esriGeometryPoint"===y||"polyline"===r&&"esriGeometryPolyline"===y||"polygon"===r&&"esriGeometryPolygon"===y||"extent"===r&&"esriGeometryEnvelope"===y||"multipoint"===r&&"esriGeometryMultipoint"===y?!0:!1};b.shapeExtent=function(y){if(null==y)return null;switch(y.type){case "polygon":case "multipoint":case "polyline":return y.extent;case "point":return new f({xmin:y.x,
ymin:y.y,xmax:y.x,ymax:y.y,spatialReference:y.spatialReference});case "extent":return y}return null};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","../../arcade/featureset/support/errorsupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(b,f,y,r,D){function z(C,K,M){switch(M){case "+":return C+K;case "-":return C-K;case "*":return C*K;case "/":return C/K}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function g(C,K,M){switch(M){case "+":return K.plus({milliseconds:C.valueInMilliseconds()});case "-":return C.valueInMilliseconds()-K.toMillis()}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function n(C,K,M){switch(M){case "+":return K.plus("milliseconds",C.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function e(C,K,M){switch(M){case "+":return K.plus("milliseconds",C.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function v(C,
K,M){switch(M){case "+":return C.plus("milliseconds",K.valueInMilliseconds());case "-":return C.plus("milliseconds",-1*K.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function A(C,K,M){switch(M){case "+":return K.addMilliseconds(C.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function w(C,K,M){switch(M){case "+":return r.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()+K.valueInMilliseconds());case "-":return r.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()-
K.valueInMilliseconds());case "*":return r.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()*K.valueInMilliseconds());case "/":return r.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()/K.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function E(C,K,M){switch(M){case "+":return r.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()+K);case "-":return r.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()-K);case "*":return r.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()*
K);case "/":return r.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()/K)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function t(C,K,M){switch(M){case "+":return r.SqlInterval.createFromMilliseconds(C+K.valueInMilliseconds());case "-":return r.SqlInterval.createFromMilliseconds(C-K.valueInMilliseconds());case "*":return r.SqlInterval.createFromMilliseconds(C*K.valueInMilliseconds());case "/":return r.SqlInterval.createFromMilliseconds(C/K.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function q(C,K,M){switch(M){case "+":return C.plus("milliseconds",K.valueInMilliseconds());case "-":return C.plus("milliseconds",-1*K.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function a(C,K,M){switch(M){case "+":return C.plus({milliseconds:K.valueInMilliseconds()});case "-":return C.minus({milliseconds:K.valueInMilliseconds()})}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function u(C,K,M){switch(M){case "+":return C.addMilliseconds(K.valueInMilliseconds());
case "-":return C.addMilliseconds(-1*K.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function p(C,K,M){K*=864E5;switch(M){case "+":return C.plus({milliseconds:K});case "-":return C.minus({milliseconds:K})}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function F(C,K,M){K*=864E5;switch(M){case "+":return C.plus("milliseconds",K);case "-":return C.plus("milliseconds",-1*K)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function L(C,K,M){K*=864E5;switch(M){case "+":return C.plus("milliseconds",
K);case "-":return C.plus("milliseconds",-1*K)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function d(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function J(C,K,M){K*=864E5;switch(M){case "+":return C.addMilliseconds(K);case "-":return C.addMilliseconds(-1*K)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Q(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function S(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Z(C,
K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function W(C,K,M){K=parseFloat(K);if(isNaN(K))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);return z(C,K,M)}function U(C,K,M){C=parseFloat(C);if(isNaN(C))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);return z(C,K,M)}function x(C,K,M){switch(M){case "+":return C+K}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function I(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function m(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function l(C,K,M){switch(M){case "-":return C.toDateTimeLuxon(K.zone).diff(K).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function B(C,K,M){switch(M){case "-":return C.toDateTimeLuxon(K.toDateTime().zone).diff(K.toDateTime()).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function P(C,K,M){switch(M){case "-":return C.toDateTimeLuxon("UTC").diff(K.toDateTimeLuxon("UTC")).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function N(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function T(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Y(C,K,M){switch(M){case "-":return C.toDateTime().diff(K.toDateTimeLuxon(C.toDateTime().zone)).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ea(C,K,M){switch(M){case "-":return C.toDateTime().diff(K).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function la(C,K,M){switch(M){case "-":return C.toDateTime().diff(K.toDateTime()).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function ra(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function da(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ka(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ia(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function qa(C,K,M){switch(M){case "-":return C.diff(K).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ua(C,K,M){switch(M){case "-":return C.diff(K.toDateTimeLuxon(C.zone)).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function xa(C,K,M){switch(M){case "-":return C.diff(K.toDateTime()).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Aa(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Ka(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Ha(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Ma(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function h(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function G(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function X(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ba(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ma(C,K,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}b.calculateDateOnlyAndDateOnly=P;b.calculateDateOnlyAndDateTime=l;b.calculateDateOnlyAndNumber=F;b.calculateDateOnlyAndSqlInterval=q;b.calculateDateOnlyAndString=Ka;b.calculateDateOnlyAndTimeOnly=N;b.calculateDateOnlyAndTimestamp=
B;b.calculateDateTimeAndDateOnly=ua;b.calculateDateTimeAndDateTime=qa;b.calculateDateTimeAndNumber=p;b.calculateDateTimeAndSqlInterval=a;b.calculateDateTimeAndString=Ma;b.calculateDateTimeAndTimeOnly=Aa;b.calculateDateTimeAndTimestamp=xa;b.calculateNumberAndDateOnly=Z;b.calculateNumberAndDateTime=d;b.calculateNumberAndNumber=z;b.calculateNumberAndSqlInterval=t;b.calculateNumberAndString=W;b.calculateNumberAndTimeOnly=S;b.calculateNumberAndTimestamp=Q;b.calculateSqlIntervalAndDateOnly=e;b.calculateSqlIntervalAndDateTime=
g;b.calculateSqlIntervalAndNumber=E;b.calculateSqlIntervalAndSqlInterval=w;b.calculateSqlIntervalAndString=I;b.calculateSqlIntervalAndTimeOnly=n;b.calculateSqlIntervalAndTimestamp=A;b.calculateStringAndDateOnly=X;b.calculateStringAndDateTime=ba;b.calculateStringAndNumber=U;b.calculateStringAndSqlInterval=m;b.calculateStringAndString=x;b.calculateStringAndTimeOnly=G;b.calculateStringAndTimestamp=ma;b.calculateTimeOnlyAndDateOnly=da;b.calculateTimeOnlyAndDateTime=ra;b.calculateTimeOnlyAndNumber=L;b.calculateTimeOnlyAndSqlInterval=
v;b.calculateTimeOnlyAndString=Ha;b.calculateTimeOnlyAndTimeOnly=ia;b.calculateTimeOnlyAndTimestamp=ka;b.calculateTimestampAndDateOnly=Y;b.calculateTimestampAndDateTime=ea;b.calculateTimestampAndNumber=J;b.calculateTimestampAndSqlInterval=u;b.calculateTimestampAndString=h;b.calculateTimestampAndTimeOnly=T;b.calculateTimestampAndTimestamp=la;b.sqlCalculateFunction=function(C,K,M,V){if("||"===C)return D.evaluateFunction("concat",[K,M],V);if(null===K||null===M)return null;if(y.isNumber(K)){if(y.isNumber(M))return z(K,
M,C);if(y.isSqlInterval(M))return t(K,M,C);if(y.isTimeOnly(M))return S();if(y.isDateOnly(M))return Z();if(y.isTimestampOffset(M))return Q();if(y.isDateTime(M))return d();if(y.isString(M))return W(K,M,C)}else if(y.isDateOnly(K)){if(y.isNumber(M))return F(K,M,C);if(y.isSqlInterval(M))return q(K,M,C);if(y.isTimeOnly(M))return N();if(y.isDateOnly(M))return P(K,M,C);if(y.isTimestampOffset(M))return B(K,M,C);if(y.isDateTime(M))return l(K,M,C);if(y.isString(M))return Ka()}else if(y.isTimeOnly(K)){if(y.isNumber(M))return L(K,
M,C);if(y.isSqlInterval(M))return v(K,M,C);if(y.isTimeOnly(M))return ia();if(y.isDateOnly(M))return da();if(y.isTimestampOffset(M))return ka();if(y.isDateTime(M))return ra();if(y.isString(M))return Ha()}else if(y.isSqlInterval(K)){if(y.isNumber(M))return E(K,M,C);if(y.isSqlInterval(M))return w(K,M,C);if(y.isTimeOnly(M))return n(K,M,C);if(y.isDateOnly(M))return e(K,M,C);if(y.isTimestampOffset(M))return A(K,M,C);if(y.isDateTime(M))return g(K,M,C);if(y.isString(M))return I()}else if(y.isDateTime(K)){if(y.isNumber(M))return p(K,
M,C);if(y.isSqlInterval(M))return a(K,M,C);if(y.isTimeOnly(M))return Aa();if(y.isDateOnly(M))return ua(K,M,C);if(y.isTimestampOffset(M))return xa(K,M,C);if(y.isDateTime(M))return qa(K,M,C);if(y.isString(M))return Ma()}else if(y.isTimestampOffset(K)){if(y.isNumber(M))return J(K,M,C);if(y.isSqlInterval(M))return u(K,M,C);if(y.isTimeOnly(M))return T();if(y.isDateOnly(M))return Y(K,M,C);if(y.isTimestampOffset(M))return la(K,M,C);if(y.isDateTime(M))return ea(K,M,C);if(y.isString(M))return h()}else if(y.isString(K)){if(y.isNumber(M))return U(K,
M,C);if(y.isSqlInterval(M))return m();if(y.isTimeOnly(M))return G();if(y.isDateOnly(M))return X();if(y.isTimestampOffset(M))return ma();if(y.isDateTime(M))return ba();if(y.isString(M))return x(K,M,C)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(b,f,y,r,D,z,g,n){function e(p,F,L){L=t.exec(p);if(null!==L){const [,d,J,Q,S,Z,W,U]=L;p=n.DateTime.fromObject({year:parseInt(d,10),month:parseInt(J,10),day:parseInt(Q,10),hour:parseInt(S,10),minute:parseInt(Z,10),second:parseInt(W,10),millisecond:U?parseInt(U.replace(".",""),10):0},{zone:g.substituteUnknownTimezone(F)});if(!1===p.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return p}L=q.exec(p);if(null!==L){const [,d,J,Q,S,Z,W,U,x,I,m]=L;p=D.SqlTimeStampOffset.fromParts(parseInt(d,
10),parseInt(J,10),parseInt(Q,10),parseInt(S,10),parseInt(Z,10),parseInt(W,10),U?parseInt(U.replace(".",""),10):0,"-"===x,parseInt(I,10),parseInt(m,10));if(!1===p.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return p}L=a.exec(p);if(null!==L){const [,d,J,Q,S,Z,W,U,x]=L;p=D.SqlTimeStampOffset.fromParts(parseInt(d,10),parseInt(J,10),parseInt(Q,10),parseInt(S,10),parseInt(Z,10),0,0,"-"===W,parseInt(U,10),parseInt(x,10));if(!1===p.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);
return p}L=u.exec(p);if(null!==L){const [,d,J,Q,S,Z]=L;p=n.DateTime.fromObject({year:parseInt(d,10),month:parseInt(J,10),day:parseInt(Q,10),hour:parseInt(S,10),minute:parseInt(Z,10),second:0},{zone:g.substituteUnknownTimezone(F)});if(!1===p.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return p}L=E.exec(p);if(null!==L){const [,d,J,Q]=L;p=n.DateTime.fromObject({year:parseInt(d,10),month:parseInt(J,10),day:parseInt(Q,10),hour:0,minute:0,second:0},{zone:g.substituteUnknownTimezone(F)});
if(!1===p.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return p}throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);}const v=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,A=/^(\d{1,2}):(\d{1,2})$/,w=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,E=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,t=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,a=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,
u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;b.convertToExecutingTimeZone=function(p,F){if(F instanceof n.Zone)return F===g.UnknownTimeZone.instance?n.DateTime.fromMillis(p.getTime(),{zone:g.UnknownTimeZone.instance}):n.DateTime.fromJSDate(p,{zone:F});switch(F){case "system":case "local":case null:return n.DateTime.fromJSDate(p);default:return"unknown"===F?.toLowerCase()?n.DateTime.fromMillis(p.getTime(),{zone:g.UnknownTimeZone.instance}):n.DateTime.fromJSDate(p,{zone:F})}};b.isDate=function(p){return p instanceof
Date};b.isDateOnly=function(p){return p instanceof y.DateOnly};b.isDateTime=function(p){return p instanceof n.DateTime};b.isNumber=function(p){return"number"===typeof p};b.isSqlInterval=function(p){return p instanceof r.SqlInterval};b.isString=function(p){return"string"===typeof p||p instanceof String};b.isTimeOnly=function(p){return p instanceof z.TimeOnly};b.isTimestampOffset=function(p){return p instanceof D.SqlTimeStampOffset};b.parseDate=function(p,F){const L=E.exec(p);if(null===L)try{return e(p,
F)}catch{throw new f.SqlError(f.SqlErrorCodes.InvalidDate);}const [,d,J,Q]=L;p=y.DateOnly.fromParts(parseInt(d,10),parseInt(J,10),parseInt(Q,10));if(null===p)throw new f.SqlError(f.SqlErrorCodes.InvalidDate);return p};b.parseTime=function(p){let F=v.exec(p);if(null!==F){const [,L,d,J]=F;p=z.TimeOnly.fromParts(parseInt(L,10),parseInt(d,10),parseInt(J,10),0);if(null!==p)return p;throw new f.SqlError(f.SqlErrorCodes.InvalidTime);}F=A.exec(p);if(null!==F){const [,L,d]=F;p=z.TimeOnly.fromParts(parseInt(L,
10),parseInt(d,10),0,0);if(null!==p)return p;throw new f.SqlError(f.SqlErrorCodes.InvalidTime);}F=w.exec(p);if(null!==F){const [,L,d,J,Q]=F;p=z.TimeOnly.fromParts(parseInt(L,10),parseInt(d,10),parseInt(J,10),parseInt(Q,10));if(null!==p)return p}throw new f.SqlError(f.SqlErrorCodes.InvalidTime);};b.parseTimestamp=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","../../arcade/featureset/support/errorsupport"],function(b,f){class y{constructor(){this.op=
"+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(r){if(null!==r.precision||null!==r.secondary)throw new f.SqlError(f.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(r,D){D.includes(".")?(D=D.split("."),r.second=parseFloat(D[0]),r.millis=parseInt(D[1],10)):r.second=parseFloat(D)}static createFromMilliseconds(r){const D=new y;D.second=r/1E3;return D}static createFromValueAndQualifier(r,D,z){let g=null;const n=new y;n.op="-"===
z?"-":"+";if("interval-period"===D.type){y._fixDefaults(D);z=RegExp("^[0-9]{1,}$");if("year"===D.period||"month"===D.period)throw new f.SqlError(f.SqlErrorCodes.YearMonthIntervals);if("second"===D.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(r))y._parseSecondsComponent(n,r);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);else if(z.test(r))n[D.period]=parseFloat(r);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);}else{y._fixDefaults(D.start);y._fixDefaults(D.end);if("year"===
D.start.period||"month"===D.start.period||"year"===D.end.period||"month"===D.end.period)throw new f.SqlError(f.SqlErrorCodes.YearMonthIntervals);switch(D.start.period){case "day":switch(D.end.period){case "hour":g=RegExp("^[0-9]{1,} [0-9]{1,}$");if(g.test(r))n[D.start.period]=parseFloat(r.split(" ")[0]),n[D.end.period]=parseFloat(r.split(" ")[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;case "minute":g=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(g.test(r))n[D.start.period]=
parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),n.hour=parseFloat(r[0]),n.minute=parseFloat(r[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;case "second":g=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(r))n[D.start.period]=parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),n.hour=parseFloat(r[0]),n.minute=parseFloat(r[1]),y._parseSecondsComponent(n,r[2]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(D.end.period){case "minute":g=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(g.test(r))n.hour=parseFloat(r.split(":")[0]),n.minute=parseFloat(r.split(":")[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;case "second":g=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(r))r=r.split(":"),n.hour=parseFloat(r[0]),n.minute=parseFloat(r[1]),y._parseSecondsComponent(n,r[2]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(D.end.period){case "second":g=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(r))r=r.split(":"),n.minute=parseFloat(r[0]),y._parseSecondsComponent(n,r[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);}break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);}}return n}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}b.SqlInterval=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ../string ./DateOnly ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(b,f,y,r,D,z,g,n){function e(a){return"string"===typeof a||a instanceof String}function v(a){return z.isDate(a)||z.isDateOnly(a)||
z.isDateTime(a)||z.isTimeOnly(a)||z.isTimestampOffset(a)?!1:!0}function A(a){return z.isDateOnly(a)||z.isTimeOnly(a)?a.toString():z.isTimestampOffset(a)?a.toSQLValue():z.isDateTime(a)?0===a.millisecond?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):z.isDate(a)?A(n.DateTime.fromJSDate(a)):a.toString()}function w(a){if(z.isDate(a))return r.DateOnly.fromDateJS(a);if(z.isDateTime(a))return r.DateOnly.fromParts(a.year,a.month,a.day);if(z.isDateOnly(a))return a;if(z.isTimeOnly(a))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);
if(z.isTimestampOffset(a)&&null===r.DateOnly.fromParts(a.year,a.month,a.day))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(e(a)&&(a=r.DateOnly.fromReader(a),null!==a&&a.isValid))return a;throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);}function E(a,u,p){if(z.isDate(a))return z.convertToExecutingTimeZone(a,u);if(z.isDateTime(a))return a;if(z.isDateOnly(a))return a.toDateTimeLuxon("unknown");if(z.isTimeOnly(a))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(z.isTimestampOffset(a))return a;
if(e(a))return z.parseTimestamp(a,"unknown",p);throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);}function t(a){if(z.isDate(a))return g.TimeOnly.fromDateJS(a);if(z.isDateTime(a))return g.TimeOnly.fromDateTime(a);if(z.isDateOnly(a))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(z.isTimeOnly(a))return a;if(z.isTimestampOffset(a))return g.TimeOnly.fromSqlTimeStampOffset(a);if(e(a))return z.parseTime(a);throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);}const q={extract:{minParams:2,
maxParams:2,evaluate:([a,u])=>{if(null==u)return null;if(z.isDate(u))switch(a.toUpperCase()){case "SECOND":return u.getSeconds();case "MINUTE":return u.getMinutes();case "HOUR":return u.getHours();case "DAY":return u.getDate();case "MONTH":return u.getMonth()+1;case "YEAR":return u.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(z.isDateTime(u))switch(a.toUpperCase()){case "SECOND":return u.second;case "MINUTE":return u.minute;case "HOUR":return u.hour;case "DAY":return u.day;
case "MONTH":return u.month;case "YEAR":return u.year}else if(z.isDateOnly(u))switch(a.toUpperCase()){case "DAY":return u.day;case "MONTH":return u.month;case "YEAR":return u.year}else if(z.isTimeOnly(u))switch(a.toUpperCase()){case "SECOND":return u.second;case "MINUTE":return u.minute;case "HOUR":return u.hour}else if(z.isTimestampOffset(u))switch(a.toUpperCase()){case "SECOND":return u.second;case "MINUTE":return u.minute;case "HOUR":return u.hour;case "DAY":return u.day;case "MONTH":return u.month;
case "YEAR":return u.year;case "TIMEZONE_HOUR":return u.timezoneOffsetHour;case "TIMEZONE_MINUTE":return u.timezoneOffsetMinutes}throw new f.SqlError(f.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(2===a.length){const [u,p]=a;return null==u||null==p?null:u.toString().substring(p-1)}if(3===a.length){const [u,p,F]=a;return null==u||null==p||null==F?null:0>=F?"":u.toString().substring(p-1,p+F-1)}}},position:{minParams:2,maxParams:2,
evaluate:([a,u])=>null==a||null==u?null:u.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{var u=3===a.length,p=u?a[1]:" ";u=u?a[2]:a[1];if(null==p||null==u)return null;p=`(${y.escapeRegExpString(p)})`;switch(a[0]){case "BOTH":return u.replaceAll(new RegExp(`^${p}*|${p}*$`,"g"),"");case "LEADING":return u.replaceAll(new RegExp(`^${p}*`,"g"),"");case "TRAILING":return u.replaceAll(new RegExp(`${p}*$`,"g"),"")}throw new f.SqlError(f.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:0<a[0]?1:0>a[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]**a[1]},mod:{minParams:2,
maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const u=a[0];a=2===a.length?10**a[1]:1;return null==u?null:Math.round(u*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:a=>null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>e(a[0])?a[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:a=>{let u="";for(let p=0;p<a.length;p++){if(null==a[p])return null;
u+=a[p].toString()}return u}},lower:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:a=>{for(const u of a)if(null!==u)return u;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:(a,u)=>D.sqlCompare(a[0],a[1],"\x3d")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,u)=>{const p=a[0];a=a[1];if(null===p)return null;switch(a.type){case "integer":if(!v(p))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);u=parseInt(p,10);if(isNaN(u))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return u;case "smallint":if(!v(p))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);u=parseInt(p,10);if(isNaN(u))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);
if(32767<u||-32767>u)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return u;case "float":case "real":if(!v(p))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);u=parseFloat(p);if(isNaN(u))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return u;case "time":return t(p);case "date":return w(p);case "timestamp":return E(p,u,!0===a.withtimezone);case "varchar":u=A(p);if(u.length>a.size)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return u;default:throw new f.SqlError(f.SqlErrorCodes.InvalidDataType);
}}}};b.evaluateFunction=function(a,u,p){const F=q[a.toLowerCase()];if(null==F)throw new f.SqlError(f.SqlErrorCodes.FunctionNotRecognized);if(u.length<F.minParams||u.length>F.maxParams)throw new f.SqlError(f.SqlErrorCodes.InvalidParameterCount,{name:a.toUpperCase()});return F.evaluate(u,p)};b.isStandardized=function(a,u){a=q[a.toLowerCase()];return null!=a&&u>=a.minParams&&u<=a.maxParams};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(b,f,y,r,D,z){function g(a){return y.isDateTime(a)||y.isTimestampOffset(a)?!0:!1}function n(a){return y.isDateTime(a)||y.isDateOnly(a)||y.isTimestampOffset(a)||y.isTimeOnly(a)?!0:!1}function e(a){if(y.isDateTime(a))return a.toMillis();if(y.isDateOnly(a))return a.toNumber();if(y.isTimestampOffset(a))return a.toMilliseconds();throw new f.SqlError(f.SqlErrorCodes.InvalidDataType);}function v(a,u,p){switch(p){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<
u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function A(a,u,p){const F=parseFloat(u);if(!isNaN(F))return v(a,F,p);a=a.toString();switch(p){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function w(a,u,p){const F=parseFloat(a);if(!isNaN(F))return v(F,u,p);u=u.toString();switch(p){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<
u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function E(a,u,p){switch(p){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=u;case "\x3c\x3d":return a<=u}}function t(a,u,p){a instanceof r.SqlTimeStampOffset&&(a=a.toDateTime());u instanceof r.SqlTimeStampOffset&&(u=u.toDateTime());a=q(a);u=q(u);switch(p){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=
u;case "\x3c\x3d":return a<=u}}function q(a){return 321408E5*a.year+26784E5*a.month+864E5*a.day+36E5*a.hour+6E4*a.minute+1E3*a.second+a.millisecond}b.dateValueInMilliseconds=e;b.isDateOrTimeValue=n;b.isDateTimeComparableValue=g;b.sqlCompare=function(a,u,p,F){if(null==a||null==u)return null;if(y.isNumber(a)){if(y.isNumber(u))return v(a,u,p);if(y.isString(u))return A(a,u,p);if(n(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}else if(y.isString(a)){if(y.isNumber(u))return w(a,u,p);if(y.isString(u))return E(a,u,p);if(y.isDateTime(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(y.isTimeOnly(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(y.isTimestampOffset(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(y.isDateTime(a)){if(g(u)){if(a instanceof z.DateTime&&D.isUnknownTimeZone(a.zone)){if(u instanceof z.DateTime&&
!1===D.isUnknownTimeZone(u.zone)||u instanceof r.SqlTimeStampOffset)return t(a,u,p)}else if(u instanceof z.DateTime&&D.isUnknownTimeZone(u.zone)&&(a instanceof z.DateTime&&!1===D.isUnknownTimeZone(a.zone)||a instanceof r.SqlTimeStampOffset))return t(a,u,p);return v(e(a),e(u),p)}if(y.isString(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))return u=u.toDateTimeLuxon(a.zone),a=a.startOf("day"),v(a.toMillis(),u.toMillis(),p);if(y.isTimeOnly(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
if(y.isNumber(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(y.isDateOnly(a)){if(y.isTimestampOffset(u))return a=a.toDateTimeLuxon(u.toDateTime().zone),u=u.startOfDay(),v(a.toMillis(),u.toMilliseconds(),p);if(y.isDateTime(u))return a=a.toDateTimeLuxon(u.zone),u=u.startOf("day"),v(a.toMillis(),u.toMillis(),p);if(y.isString(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))return v(a.toNumber(),u.toNumber(),p);if(y.isTimeOnly(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
if(y.isNumber(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(y.isTimeOnly(a)){if(y.isTimeOnly(u))return v(a.toNumber(),u.toNumber(),p);if(y.isString(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(y.isNumber(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(g(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(y.isTimestampOffset(a)){if(g(u))return u instanceof z.DateTime&&
D.isUnknownTimeZone(u.zone)?t(a,u,p):v(e(a),e(u),p);if(y.isString(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(u))return u=u.toDateTimeLuxon(a.toDateTime().zone),a=a.startOfDay(),v(a.toMilliseconds(),u.toMillis(),p);if(y.isTimeOnly(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(y.isNumber(u))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}switch(p){case "\x3c\x3e":return a!==u;case "\x3d":return a===u;case "\x3e":return a>u;case "\x3c":return a<u;case "\x3e\x3d":return a>=
u;case "\x3c\x3d":return a<=u}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(b,f){var y={exports:{}};(function(z){(function(g,n){z.exports&&(z.exports=n())})(f.commonjsGlobal,function(){function g(e,v,A,w){e=Error.call(this,e);Object.setPrototypeOf&&Object.setPrototypeOf(e,g.prototype);e.expected=v;e.found=A;e.location=w;e.name="SyntaxError";return e}function n(e,v,A){A=A||" ";if(e.length>
v)return e;v-=e.length;A+=A.repeat(v);return e+A.slice(0,v)}(function(e,v){function A(){this.constructor=e}A.prototype=v.prototype;e.prototype=new A})(g,Error);g.prototype.format=function(e){var v="Error: "+this.message;if(this.location){var A=null,w;for(w=0;w<e.length;w++)if(e[w].source===this.location.source){A=e[w].text.split(/\r\n|\n|\r/g);break}e=this.location.start;w=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(e):e;var E=this.location.source+
":"+w.line+":"+w.column;if(A){var t=this.location.end,q=n("",w.line.toString().length," ");A=A[e.line-1];t=(e.line===t.line?t.column:A.length+1)-e.column||1;v+="\n --\x3e "+E+"\n"+q+" |\n"+w.line+" | "+A+"\n"+q+" | "+n("",e.column-1," ")+n("",t,"^")}else v+="\n at "+E}return v};g.buildMessage=function(e,v){function A(a){return a.charCodeAt(0).toString(16).toUpperCase()}function w(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+A(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+A(u)})}function E(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+A(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+A(u)})}function t(a){return q[a.type](a)}var q={literal:function(a){return'"'+
w(a.text)+'"'},class:function(a){var u=a.parts.map(function(p){return Array.isArray(p)?E(p[0])+"-"+E(p[1]):E(p)});return"["+(a.inverted?"^":"")+u.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){a=a.map(t);var u,p;a.sort();if(0<a.length){for(p=u=1;u<a.length;u++)a[u-1]!==a[u]&&(a[p]=a[u],p++);a.length=p}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,
-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+(v?'"'+w(v)+'"':"end of input")+" found."};return{SyntaxError:g,parse:function(e,v){function A(H,O){O=void 0!==O?O:q(sa,k);throw new g(H,null,null,O);}function w(H,O){return{type:"literal",text:H,ignoreCase:O}}function E(H,O,R){return{type:"class",parts:H,inverted:O,ignoreCase:R}}function t(H){var O=Yb[H],R;if(!O){for(R=H-1;!Yb[R];)R--;O=Yb[R];for(O={line:O.line,column:O.column};R<H;)10===e.charCodeAt(R)?(O.line++,O.column=1):O.column++,R++;Yb[H]=
O}return O}function q(H,O,R){R=t(H);var fa=t(O);return{source:Md,start:{offset:H,line:R.line,column:R.column},end:{offset:O,line:fa.line,column:fa.column}}}function a(H){k<eb||(k>eb&&(eb=k,yc=[]),yc.push(H))}function u(){var H=k;na();var O=F();O!==c?(na(),sa=H,H=O):(k=H,H=c);return H}function p(){var H=k;var O=F();if(O!==c){var R=[];var fa=k;var va=na();var Ca=Wa();if(Ca!==c){var Ga=na();var Ia=F();Ia!==c?fa=va=[va,Ca,Ga,Ia]:(k=fa,fa=c)}else k=fa,fa=c;for(;fa!==c;)R.push(fa),fa=k,va=na(),Ca=Wa(),
Ca!==c?(Ga=na(),Ia=F(),Ia!==c?fa=va=[va,Ca,Ga,Ia]:(k=fa,fa=c)):(k=fa,fa=c);sa=H;H={type:"expression-list"};O=[O];for(fa=0;fa<R.length;fa++)O.push(R[fa][3]);H.value=O}else k=H,H=c;return H}function F(){var H=k;var O=L();if(O!==c){var R=[];var fa=k;var va=na();var Ca=M();if(Ca!==c){var Ga=na();var Ia=L();Ia!==c?fa=va=[va,Ca,Ga,Ia]:(k=fa,fa=c)}else k=fa,fa=c;for(;fa!==c;)R.push(fa),fa=k,va=na(),Ca=M(),Ca!==c?(Ga=na(),Ia=L(),Ia!==c?fa=va=[va,Ca,Ga,Ia]:(k=fa,fa=c)):(k=fa,fa=c);sa=H;H=nb(O,R)}else k=H,
H=c;return H}function L(){var H=k;var O=d();if(O!==c){var R=[];var fa=k;var va=na();var Ca=K();if(Ca!==c){var Ga=na();var Ia=d();Ia!==c?fa=va=[va,Ca,Ga,Ia]:(k=fa,fa=c)}else k=fa,fa=c;for(;fa!==c;)R.push(fa),fa=k,va=na(),Ca=K(),Ca!==c?(Ga=na(),Ia=d(),Ia!==c?fa=va=[va,Ca,Ga,Ia]:(k=fa,fa=c)):(k=fa,fa=c);sa=H;H=nb(O,R)}else k=H,H=c;return H}function d(){var H=k;var O=C();if(O===c){O=k;if(33===e.charCodeAt(k)){var R=Nd;k++}else R=c,0===ja&&a(Od);if(R!==c){var fa=k;ja++;if(61===e.charCodeAt(k)){var va=
Rc;k++}else va=c,0===ja&&a(Sc);ja--;va===c?fa=void 0:(k=fa,fa=c);fa!==c?O=R=[R,fa]:(k=O,O=c)}else k=O,O=c}O!==c?(R=na(),fa=d(),fa!==c?(sa=H,H={type:"unary-expression",operator:"NOT",expr:fa}):(k=H,H=c)):(k=H,H=c);if(H===c){O=k;H=Z();if(H!==c){na();R=k;fa=[];va=k;var Ca=na();var Ga=J();if(Ga!==c){var Ia=na();var ob=Z();ob!==c?va=Ca=[Ca,Ga,Ia,ob]:(k=va,va=c)}else k=va,va=c;if(va!==c)for(;va!==c;)fa.push(va),va=k,Ca=na(),Ga=J(),Ga!==c?(Ia=na(),ob=Z(),ob!==c?va=Ca=[Ca,Ga,Ia,ob]:(k=va,va=c)):(k=va,va=
c);else fa=c;fa!==c&&(sa=R,fa={type:"arithmetic",tail:fa});R=fa;R===c&&(R=k,fa=S(),fa!==c?(na(),va=Na(),va!==c?(na(),va=p(),va!==c?(na(),Ca=Oa(),Ca!==c?(sa=R,R={op:fa,right:va}):(k=R,R=c)):(k=R,R=c)):(k=R,R=c)):(k=R,R=c),R===c&&(R=k,fa=S(),fa!==c?(na(),va=Na(),va!==c?(na(),va=Oa(),va!==c?(sa=R,R={op:fa,right:{type:"expression-list",value:[]}}):(k=R,R=c)):(k=R,R=c)):(k=R,R=c),R===c&&(R=k,fa=S(),fa!==c?(na(),va=Y(),va!==c?(sa=R,R={op:fa,right:va}):(k=R,R=c)):(k=R,R=c))),R===c&&(R=k,Ca=C(),Ca!==c?(na(),
fa=V(),fa!==c?(na(),va=Z(),va!==c?(na(),Ga=K(),Ga!==c?(na(),Ca=Z(),Ca!==c?(sa=R,R={op:"NOT"+fa,right:{type:"expression-list",value:[va,Ca]}}):(k=R,R=c)):(k=R,R=c)):(k=R,R=c)):(k=R,R=c)):(k=R,R=c),R===c&&(R=k,Ca=V(),Ca!==c?(na(),fa=Z(),fa!==c?(na(),va=K(),va!==c?(na(),Ga=Z(),Ga!==c?(sa=R,R={op:Ca,right:{type:"expression-list",value:[fa,Ga]}}):(k=R,R=c)):(k=R,R=c)):(k=R,R=c)):(k=R,R=c)),R===c&&(R=k,fa=ba(),fa!==c?(na(),va=C(),va!==c?(na(),va=Z(),va!==c?(sa=R,R={op:fa+"NOT",right:va}):(k=R,R=c)):(k=
R,R=c)):(k=R,R=c),R===c&&(R=k,fa=ba(),fa!==c?(na(),va=Z(),va!==c?(sa=R,R={op:fa,right:va}):(k=R,R=c)):(k=R,R=c)),R===c&&(R=k,fa=Q(),fa!==c?(na(),va=ia(),va!==c?(na(),Ca=k,e.substr(k,6).toLowerCase()===Pd?(Ga=e.substr(k,6),k+=6):(Ga=c,0===ja&&a(Qd)),Ga!==c?(Ga=k,ja++,Ia=B(),ja--,Ia===c?Ga=void 0:(k=Ga,Ga=c),Ga!==c?(sa=Ca,Ca="ESCAPE"):(k=Ca,Ca=c)):(k=Ca,Ca=c),Ca!==c?(na(),Ca=qa(),Ca!==c?(sa=R,R={op:fa,right:va,escape:Ca.value}):(k=R,R=c)):(k=R,R=c)):(k=R,R=c)):(k=R,R=c),R===c&&(R=k,fa=Q(),fa!==c?(na(),
va=ia(),va!==c?(sa=R,R={op:fa,right:va,escape:""}):(k=R,R=c)):(k=R,R=c))))));R===c&&(R=null);sa=O;O=R;""==O||void 0==O||null==O?O=H:(R=null,O=R="arithmetic"==O.type?nb(H,O.tail):Mb(O.op,H,O.right,O.escape))}else k=O,O=c;H=O}return H}function J(){if(e.substr(k,2)===Tc){var H=Tc;k+=2}else H=c,0===ja&&a(Rd);H===c&&(62===e.charCodeAt(k)?(H=Sd,k++):(H=c,0===ja&&a(Td)),H===c&&(e.substr(k,2)===Uc?(H=Uc,k+=2):(H=c,0===ja&&a(Ud)),H===c&&(e.substr(k,2)===Vc?(H=Vc,k+=2):(H=c,0===ja&&a(Vd)),H===c&&(60===e.charCodeAt(k)?
(H=Wd,k++):(H=c,0===ja&&a(Xd)),H===c&&(61===e.charCodeAt(k)?(H=Rc,k++):(H=c,0===ja&&a(Sc)),H===c&&(e.substr(k,2)===Wc?(H=Wc,k+=2):(H=c,0===ja&&a(Yd))))))));return H}function Q(){var H;var O=H=k;var R=C();if(R!==c){var fa=na();var va=ma();va!==c?O=R=[R,fa,va]:(k=O,O=c)}else k=O,O=c;O!==c&&(sa=H,O=O[0]+" "+O[2]);H=O;H===c&&(H=ma());return H}function S(){var H;var O=H=k;var R=C();if(R!==c){var fa=na();var va=X();va!==c?O=R=[R,fa,va]:(k=O,O=c)}else k=O,O=c;O!==c&&(sa=H,O=O[0]+" "+O[2]);H=O;H===c&&(H=
X());return H}function Z(){var H=k;var O=U();if(O!==c){var R=[];var fa=k;var va=na();var Ca=W();if(Ca!==c){var Ga=na();var Ia=U();Ia!==c?fa=va=[va,Ca,Ga,Ia]:(k=fa,fa=c)}else k=fa,fa=c;for(;fa!==c;)R.push(fa),fa=k,va=na(),Ca=W(),Ca!==c?(Ga=na(),Ia=U(),Ia!==c?fa=va=[va,Ca,Ga,Ia]:(k=fa,fa=c)):(k=fa,fa=c);sa=H;H=nb(O,R)}else k=H,H=c;return H}function W(){if(43===e.charCodeAt(k)){var H=zc;k++}else H=c,0===ja&&a(Ac);H===c&&(45===e.charCodeAt(k)?(H=Bc,k++):(H=c,0===ja&&a(Cc)),H===c&&(e.substr(k,2)===Xc?
(H=Xc,k+=2):(H=c,0===ja&&a(Zd))));return H}function U(){var H=k;var O=I();if(O!==c){var R=[];var fa=k;var va=na();var Ca=x();if(Ca!==c){var Ga=na();var Ia=I();Ia!==c?fa=va=[va,Ca,Ga,Ia]:(k=fa,fa=c)}else k=fa,fa=c;for(;fa!==c;)R.push(fa),fa=k,va=na(),Ca=x(),Ca!==c?(Ga=na(),Ia=I(),Ia!==c?fa=va=[va,Ca,Ga,Ia]:(k=fa,fa=c)):(k=fa,fa=c);sa=H;H=nb(O,R)}else k=H,H=c;return H}function x(){if(42===e.charCodeAt(k)){var H=$d;k++}else H=c,0===ja&&a(ae);H===c&&(47===e.charCodeAt(k)?(H=be,k++):(H=c,0===ja&&a(ce)));
return H}function I(){var H=qa();if(H===c){var O=k;var R=k;var fa=Ka();if(fa!==c){var va=Ha();if(va!==c){var Ca=Ma();Ca!==c?(sa=R,R=parseFloat(fa+va+Ca)):(k=R,R=c)}else k=R,R=c}else k=R,R=c;R===c&&(R=k,fa=Ka(),fa!==c?(va=Ha(),va!==c?(sa=R,R=parseFloat(fa+va)):(k=R,R=c)):(k=R,R=c),R===c&&(R=k,fa=Ka(),fa!==c?(va=Ma(),va!==c?(sa=R,R=parseFloat(fa+va)):(k=R,R=c)):(k=R,R=c),R===c&&(R=k,fa=Ka(),fa!==c&&(sa=R,fa=parseFloat(fa)),R=fa)));var Ga=R;if(Ga!==c){var Ia=k;ja++;var ob=l();ja--;ob===c?Ia=void 0:(k=
Ia,Ia=c);Ia!==c?(sa=O,O={type:"number",value:Ga}):(k=O,O=c)}else k=O,O=c;H=O;if(H===c){var pb=k;var Jb=k;if(e.substr(k,4).toLowerCase()===de){var Zb=e.substr(k,4);k+=4}else Zb=c,0===ja&&a(ee);if(Zb!==c){var Nb=k;ja++;var fe=B();ja--;fe===c?Nb=void 0:(k=Nb,Nb=c);Nb!==c?Jb=Zb=[Zb,Nb]:(k=Jb,Jb=c)}else k=Jb,Jb=c;var qb=Jb;qb!==c&&(sa=pb,qb={type:"boolean",value:!0});pb=qb;if(pb===c){pb=k;var Kb=k;if(e.substr(k,5).toLowerCase()===ge){var $b=e.substr(k,5);k+=5}else $b=c,0===ja&&a(he);if($b!==c){var Ob=
k;ja++;var ie=B();ja--;ie===c?Ob=void 0:(k=Ob,Ob=c);Ob!==c?Kb=$b=[$b,Ob]:(k=Kb,Kb=c)}else k=Kb,Kb=c;qb=Kb;qb!==c&&(sa=pb,qb={type:"boolean",value:!1});pb=qb}H=pb;if(H===c){var je=k;var Lb=k;if(e.substr(k,4).toLowerCase()===ke){var ac=e.substr(k,4);k+=4}else ac=c,0===ja&&a(le);if(ac!==c){var Pb=k;ja++;var me=B();ja--;me===c?Pb=void 0:(k=Pb,Pb=c);Pb!==c?Lb=ac=[ac,Pb]:(k=Lb,Lb=c)}else k=Lb,Lb=c;var Dc=Lb;Dc!==c&&(sa=je,Dc={type:"null",value:null});H=Dc;if(H===c){var rb=k;if(oa()!==c){na();var bc=ia();
bc!==c?(sa=rb,"string"===bc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(bc.value)&&A("Date literal is invalid"),rb={type:"date",value:bc.value}):(k=rb,rb=c)}else k=rb,rb=c;H=rb;if(H===c){var sb=
k;if(ha()!==c){na();var cc=ia();cc!==c?(sa=sb,"string"===cc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(cc.value)&&A("Timestamp literal is invalid"),sb={type:"timestamp",value:cc.value}):
(k=sb,sb=c)}else k=sb,sb=c;H=sb;if(H===c){var Ua=k;var Ec=ya();if(Ec!==c){na();if(45===e.charCodeAt(k)){var hb=Bc;k++}else hb=c,0===ja&&a(Cc);hb===c&&(43===e.charCodeAt(k)?(hb=zc,k++):(hb=c,0===ja&&a(Ac)));if(hb!==c){na();var Qb=ia();if(Qb!==c){na();var Yc=la();Yc!==c?(sa=Ua,Ua={type:"interval",value:Qb,qualifier:Yc,op:hb}):(k=Ua,Ua=c)}else k=Ua,Ua=c}else k=Ua,Ua=c}else k=Ua,Ua=c;Ua===c&&(Ua=k,Ec=ya(),Ec!==c?(na(),hb=ia(),hb!==c?(na(),Qb=la(),Qb!==c?(sa=Ua,Ua={type:"interval",value:hb,qualifier:Qb,
op:""}):(k=Ua,Ua=c)):(k=Ua,Ua=c)):(k=Ua,Ua=c));H=Ua;if(H===c){var tb=k;if(pa()!==c){na();var dc=ia();dc!==c?(sa=tb,"string"===dc.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(dc.value)&&A("Time literal is invalid"),tb={type:"time",value:dc.value}):(k=tb,tb=c)}else k=tb,tb=c;H=tb}}}}}}}var Pa=H;if(Pa===c){var Za=k;var ub=k;if(e.substr(k,7).toLowerCase()===ne){var Zc=e.substr(k,7);k+=7}else Zc=c,0===ja&&a(oe);if(Zc!==c){var ec=k;ja++;
var pe=B();ja--;pe===c?ec=void 0:(k=ec,ec=c);ec!==c?(sa=ub,ub="EXTRACT"):(k=ub,ub=c)}else k=ub,ub=c;if(ub!==c){na();var qe=Na();if(qe!==c){na();var $a=ta();if($a===c&&($a=wa(),$a===c&&($a=Fa(),$a===c&&($a=za(),$a===c&&($a=Ea(),$a===c&&($a=Da(),$a===c)))))){var vb=k;if(e.substr(k,13).toLowerCase()===re){var $c=e.substr(k,13);k+=13}else $c=c,0===ja&&a(se);if($c!==c){var fc=k;ja++;var te=B();ja--;te===c?fc=void 0:(k=fc,fc=c);fc!==c?(sa=vb,vb="TIMEZONE_HOUR"):(k=vb,vb=c)}else k=vb,vb=c;$a=vb;if($a===
c){var wb=k;if(e.substr(k,15).toLowerCase()===ue){var ad=e.substr(k,15);k+=15}else ad=c,0===ja&&a(ve);if(ad!==c){var gc=k;ja++;var we=B();ja--;we===c?gc=void 0:(k=gc,gc=c);gc!==c?(sa=wb,wb="TIMEZONE_MINUTE"):(k=wb,wb=c)}else k=wb,wb=c;$a=wb}}var bd=$a;if(bd!==c){na();var xe=aa();if(xe!==c){na();var cd=F();if(cd!==c){na();var ye=Oa();ye!==c?(sa=Za,Za={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:bd},cd]}}):(k=Za,Za=c)}else k=Za,Za=c}else k=Za,Za=c}else k=
Za,Za=c}else k=Za,Za=c}else k=Za,Za=c;Pa=Za;if(Pa===c){var ab=k;var xb=k;if(e.substr(k,9).toLowerCase()===ze){var dd=e.substr(k,9);k+=9}else dd=c,0===ja&&a(Ae);if(dd!==c){var hc=k;ja++;var Be=B();ja--;Be===c?hc=void 0:(k=hc,hc=c);hc!==c?(sa=xb,xb="SUBSTRING"):(k=xb,xb=c)}else k=xb,xb=c;if(xb!==c){na();var Ce=Na();if(Ce!==c){na();var Fc=F();if(Fc!==c){na();var De=aa();if(De!==c){na();var Gc=F();if(Gc!==c){na();var ib=k;var yb=k;if(e.substr(k,3).toLowerCase()===Ee){var ed=e.substr(k,3);k+=3}else ed=
c,0===ja&&a(Fe);if(ed!==c){var ic=k;ja++;var Ge=B();ja--;Ge===c?ic=void 0:(k=ic,ic=c);ic!==c?(sa=yb,yb="FOR"):(k=yb,yb=c)}else k=yb,yb=c;var Rb=yb;if(Rb!==c){var He=na();var fd=F();if(fd!==c){var Ie=na();ib=Rb=[Rb,He,fd,Ie]}else k=ib,ib=c}else k=ib,ib=c;ib===c&&(ib=null);Rb=Oa();Rb!==c?(sa=ab,ab={type:"function",name:"substring",args:{type:"expression-list",value:ib?[Fc,Gc,ib[2]]:[Fc,Gc]}}):(k=ab,ab=c)}else k=ab,ab=c}else k=ab,ab=c}else k=ab,ab=c}else k=ab,ab=c}else k=ab,ab=c;Pa=ab;if(Pa===c){var Ra=
k;var Hc=ca();if(Hc!==c){na();var Ic=Na();if(Ic!==c){na();var jb=ea();jb===c&&(jb=null);na();var Sb=F();if(Sb!==c){na();var Jc=aa();if(Jc!==c){na();var gd=F();if(gd!==c){na();var Je=Oa();Je!==c?(sa=Ra,Ra={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Sb,gd]}}):(k=Ra,Ra=c)}else k=Ra,Ra=c}else k=Ra,Ra=c}else k=Ra,Ra=c}else k=Ra,Ra=c}else k=Ra,Ra=c;Ra===c&&(Ra=k,Hc=ca(),Hc!==c?(na(),Ic=Na(),Ic!==c?(na(),jb=ea(),jb===c&&(jb=null),na(),Sb=F(),
Sb!==c?(na(),Jc=Oa(),Jc!==c?(sa=Ra,Ra={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Sb]}}):(k=Ra,Ra=c)):(k=Ra,Ra=c)):(k=Ra,Ra=c)):(k=Ra,Ra=c));Pa=Ra;if(Pa===c){var bb=k;var zb=k;if(e.substr(k,8).toLowerCase()===Ke){var hd=e.substr(k,8);k+=8}else hd=c,0===ja&&a(Le);if(hd!==c){var jc=k;ja++;var Me=B();ja--;Me===c?jc=void 0:(k=jc,jc=c);jc!==c?(sa=zb,zb="POSITION"):(k=zb,zb=c)}else k=zb,zb=c;if(zb!==c){na();var Ne=Na();if(Ne!==c){na();var id=
F();if(id!==c){na();var Oe=X();if(Oe!==c){na();var jd=F();if(jd!==c){na();var Pe=Oa();Pe!==c?(sa=bb,bb={type:"function",name:"position",args:{type:"expression-list",value:[id,jd]}}):(k=bb,bb=c)}else k=bb,bb=c}else k=bb,bb=c}else k=bb,bb=c}else k=bb,bb=c}else k=bb,bb=c;Pa=bb;if(Pa===c){var cb=k;var Ab=k;if(e.substr(k,4).toLowerCase()===Qe){var kd=e.substr(k,4);k+=4}else kd=c,0===ja&&a(Re);if(kd!==c){var kc=k;ja++;var Se=B();ja--;Se===c?kc=void 0:(k=kc,kc=c);kc!==c?(sa=Ab,Ab="CAST"):(k=Ab,Ab=c)}else k=
Ab,Ab=c;if(Ab!==c){na();var Te=Na();if(Te!==c){na();var ld=F();if(ld!==c){na();var Bb=k;if(e.substr(k,2).toLowerCase()===Ue){var md=e.substr(k,2);k+=2}else md=c,0===ja&&a(Ve);if(md!==c){var lc=k;ja++;var We=B();ja--;We===c?lc=void 0:(k=lc,lc=c);lc!==c?(sa=Bb,Bb="AS"):(k=Bb,Bb=c)}else k=Bb,Bb=c;var Xe=Bb;if(Xe!==c){na();var Ja=k;var Cb=k;if(e.substr(k,7).toLowerCase()===Ye){var nd=e.substr(k,7);k+=7}else nd=c,0===ja&&a(Ze);if(nd!==c){var mc=k;ja++;var $e=B();ja--;$e===c?mc=void 0:(k=mc,mc=c);mc!==
c?(sa=Cb,Cb="INTEGER"):(k=Cb,Cb=c)}else k=Cb,Cb=c;var Qa=Cb;Qa!==c&&(sa=Ja,Qa={type:"data-type",value:{type:"integer"}});Ja=Qa;if(Ja===c){Ja=k;var Db=k;if(e.substr(k,8).toLowerCase()===af){var od=e.substr(k,8);k+=8}else od=c,0===ja&&a(bf);if(od!==c){var nc=k;ja++;var cf=B();ja--;cf===c?nc=void 0:(k=nc,nc=c);nc!==c?(sa=Db,Db="SMALLINT"):(k=Db,Db=c)}else k=Db,Db=c;Qa=Db;Qa!==c&&(sa=Ja,Qa={type:"data-type",value:{type:"smallint"}});Ja=Qa;if(Ja===c){Ja=k;var Eb=k;if(e.substr(k,5).toLowerCase()===df){var pd=
e.substr(k,5);k+=5}else pd=c,0===ja&&a(ef);if(pd!==c){var oc=k;ja++;var ff=B();ja--;ff===c?oc=void 0:(k=oc,oc=c);oc!==c?(sa=Eb,Eb="FLOAT"):(k=Eb,Eb=c)}else k=Eb,Eb=c;Qa=Eb;Qa!==c&&(sa=Ja,Qa={type:"data-type",value:{type:"float"}});Ja=Qa;if(Ja===c){Ja=k;var Fb=k;if(e.substr(k,4).toLowerCase()===gf){var qd=e.substr(k,4);k+=4}else qd=c,0===ja&&a(hf);if(qd!==c){var pc=k;ja++;var jf=B();ja--;jf===c?pc=void 0:(k=pc,pc=c);pc!==c?(sa=Fb,Fb="REAL"):(k=Fb,Fb=c)}else k=Fb,Fb=c;Qa=Fb;Qa!==c&&(sa=Ja,Qa={type:"data-type",
value:{type:"real"}});Ja=Qa;if(Ja===c&&(Ja=k,Qa=oa(),Qa!==c&&(sa=Ja,Qa={type:"data-type",value:{type:"date"}}),Ja=Qa,Ja===c&&(Ja=k,Qa=ha(),Qa!==c&&(sa=Ja,Qa={type:"data-type",value:{type:"timestamp"}}),Ja=Qa,Ja===c&&(Ja=k,Qa=pa(),Qa!==c&&(sa=Ja,Qa={type:"data-type",value:{type:"time"}}),Ja=Qa,Ja===c)))){Ja=k;var Gb=k;if(e.substr(k,7).toLowerCase()===kf){var rd=e.substr(k,7);k+=7}else rd=c,0===ja&&a(lf);if(rd!==c){var qc=k;ja++;var mf=B();ja--;mf===c?qc=void 0:(k=qc,qc=c);qc!==c?(sa=Gb,Gb="VARCHAR"):
(k=Gb,Gb=c)}else k=Gb,Gb=c;Qa=Gb;if(Qa!==c){na();var nf=Na();if(nf!==c){na();var sd=h();if(sd!==c){na();var of=Oa();of!==c?(sa=Ja,Ja={type:"data-type",value:{type:"varchar",size:parseInt(sd)}}):(k=Ja,Ja=c)}else k=Ja,Ja=c}else k=Ja,Ja=c}else k=Ja,Ja=c}}}}var td=Ja;if(td!==c){na();var pf=Oa();pf!==c?(sa=cb,cb={type:"function",name:"cast",args:{type:"expression-list",value:[ld,td]}}):(k=cb,cb=c)}else k=cb,cb=c}else k=cb,cb=c}else k=cb,cb=c}else k=cb,cb=c}else k=cb,cb=c;Pa=cb;if(Pa===c){var kb=k;var db=
k;var Tb=m();Tb!==c&&(sa=db);db=Tb;if(db===c)if(db=k,96===e.charCodeAt(k)?(Tb=ud,k++):(Tb=c,0===ja&&a(vd)),Tb!==c){var rc=[];if(wd.test(e.charAt(k))){var lb=e.charAt(k);k++}else lb=c,0===ja&&a(xd);if(lb!==c)for(;lb!==c;)rc.push(lb),wd.test(e.charAt(k))?(lb=e.charAt(k),k++):(lb=c,0===ja&&a(xd));else rc=c;rc!==c?(96===e.charCodeAt(k)?(lb=ud,k++):(lb=c,0===ja&&a(vd)),lb!==c?(sa=db,db=rc.join("")):(k=db,db=c)):(k=db,db=c)}else k=db,db=c;var yd=db;if(yd!==c){na();var qf=Na();if(qf!==c){na();var sc=p();
sc===c&&(sc=null);na();var rf=Oa();rf!==c?(sa=kb,kb={type:"function",name:yd,args:sc?sc:{type:"expression-list",value:[]}}):(k=kb,kb=c)}else k=kb,kb=c}else k=kb,kb=c;Pa=kb;if(Pa===c){var fb;var Va=k;var Kc=Ba();if(Kc!==c){na();var Ub=F();if(Ub!==c){na();var Vb=[];for(fb=xa();fb!==c;)Vb.push(fb),fb=xa();fb=na();var tc=La();tc!==c?(sa=Va,Va={type:"case-expression",format:"simple",operand:Ub,clauses:Vb,else:null}):(k=Va,Va=c)}else k=Va,Va=c}else k=Va,Va=c;if(Va===c)if(Va=k,Kc=Ba(),Kc!==c)if(na(),Ub=
F(),Ub!==c){na();Vb=[];for(fb=xa();fb!==c;)Vb.push(fb),fb=xa();fb=na();tc=Aa();if(tc!==c){na();var sf=La();sf!==c?(sa=Va,Va={type:"case-expression",format:"simple",operand:Ub,clauses:Vb,else:tc.value}):(k=Va,Va=c)}else k=Va,Va=c}else k=Va,Va=c;else k=Va,Va=c;var Lc=Va;if(Lc===c){var gb;var Xa=k;var Mc=Ba();if(Mc!==c){na();var Wb=[];for(gb=ua();gb!==c;)Wb.push(gb),gb=ua();gb=na();var uc=La();uc!==c?(sa=Xa,Xa={type:"case-expression",format:"searched",clauses:Wb,else:null}):(k=Xa,Xa=c)}else k=Xa,Xa=
c;if(Xa===c)if(Xa=k,Mc=Ba(),Mc!==c){na();Wb=[];for(gb=ua();gb!==c;)Wb.push(gb),gb=ua();gb=na();uc=Aa();if(uc!==c){na();var tf=La();tf!==c?(sa=Xa,Xa={type:"case-expression",format:"searched",clauses:Wb,else:uc.value}):(k=Xa,Xa=c)}else k=Xa,Xa=c}else k=Xa,Xa=c;Lc=Xa}Pa=Lc;if(Pa===c){var Hb=k;var uf=k;var vc;var Xb=k;var zd=l();if(zd!==c){var Ad=[];for(vc=P();vc!==c;)Ad.push(vc),vc=P();sa=Xb;Xb=zd+Ad.join("")}else k=Xb,Xb=c;var Bd=Xb;Bd!==c&&(sa=uf);var mb=Bd;if(mb!==c){sa=Hb;var Nc=mb;mb=/^CURRENT_DATE$/i.test(Nc)?
{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Nc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Nc}}Hb=mb;if(Hb===c){Hb=k;var Ib=k;if(T()!==c){var wc;var vf=k;var Oc=[];for(wc=N();wc!==c;)Oc.push(wc),wc=N();sa=vf;var wf=Oc=Oc.join("");var xf=T();xf!==c?(sa=Ib,Ib=wf):(k=Ib,Ib=c)}else k=Ib,Ib=c;mb=Ib;mb!==c&&(sa=Hb,mb={type:"column-reference",table:"",column:mb,delimited:!0});Hb=mb}Pa=Hb;if(Pa===c&&(Pa=Y(),Pa===c)){Pa=k;var yf=Na();if(yf!==c){na();var Pc=
F();if(Pc!==c){na();var zf=Oa();zf!==c?(sa=Pa,Pc.paren=!0,Pa=Pc):(k=Pa,Pa=c)}else k=Pa,Pa=c}else k=Pa,Pa=c}}}}}}}}}return Pa}function m(){var H;var O=k;var R=l();if(R!==c){var fa=[];for(H=B();H!==c;)fa.push(H),H=B();sa=O;O=R+fa.join("")}else k=O,O=c;return O}function l(){if(Af.test(e.charAt(k))){var H=e.charAt(k);k++}else H=c,0===ja&&a(Bf);return H}function B(){if(Cf.test(e.charAt(k))){var H=e.charAt(k);k++}else H=c,0===ja&&a(Df);return H}function P(){if(Cd.test(e.charAt(k))){var H=e.charAt(k);k++}else H=
c,0===ja&&a(Dd);return H}function N(){if(Cd.test(e.charAt(k))){var H=e.charAt(k);k++}else H=c,0===ja&&a(Dd);if(H===c)if(H=k,T()!==c){var O=T();O!==c?(sa=H,H='"'):(k=H,H=c)}else k=H,H=c;return H}function T(){if(Ef.test(e.charAt(k))){var H=e.charAt(k);k++}else H=c,0===ja&&a(Ff);return H}function Y(){var H;var O=H=k;if(64===e.charCodeAt(k)){var R=Gf;k++}else R=c,0===ja&&a(Hf);if(R!==c){var fa=m();fa!==c?O=R=[R,fa]:(k=O,O=c)}else k=O,O=c;O!==c&&(sa=H,O={type:"parameter",value:O[1]});return O}function ea(){var H=
k;if(e.substr(k,7).toLowerCase()===If){var O=e.substr(k,7);k+=7}else O=c,0===ja&&a(Jf);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="LEADING"):(k=H,H=c)}else k=H,H=c;H===c&&(H=k,e.substr(k,8).toLowerCase()===Kf?(O=e.substr(k,8),k+=8):(O=c,0===ja&&a(Lf)),O!==c?(O=k,ja++,R=B(),ja--,R===c?O=void 0:(k=O,O=c),O!==c?(sa=H,H="TRAILING"):(k=H,H=c)):(k=H,H=c),H===c&&(H=k,e.substr(k,4).toLowerCase()===Mf?(O=e.substr(k,4),k+=4):(O=c,0===ja&&a(Nf)),O!==c?(O=k,ja++,R=B(),ja--,R===c?
O=void 0:(k=O,O=c),O!==c?(sa=H,H="BOTH"):(k=H,H=c)):(k=H,H=c)));return H}function la(){var H=k;var O=k;var R=ra();if(R!==c){na();var fa=Na();if(fa!==c)if(na(),fa=ka(),fa!==c){na();var va=Oa();va!==c?(sa=O,O={type:"interval-period",period:R.value,precision:fa,secondary:null}):(k=O,O=c)}else k=O,O=c;else k=O,O=c}else k=O,O=c;O===c&&(O=k,R=ra(),R!==c&&(sa=O,R={type:"interval-period",period:R.value,precision:null,secondary:null}),O=R);if(O!==c)if(na(),R=k,e.substr(k,2).toLowerCase()===Of?(fa=e.substr(k,
2),k+=2):(fa=c,0===ja&&a(Pf)),fa!==c?(fa=k,ja++,va=B(),ja--,va===c?fa=void 0:(k=fa,fa=c),fa!==c?(sa=R,R="TO"):(k=R,R=c)):(k=R,R=c),R!==c){na();R=k;fa=ra();fa!==c&&(sa=R,fa={type:"interval-period",period:fa.value,precision:null,secondary:null});R=fa;if(R===c){R=k;fa=Da();if(fa!==c)if(na(),fa=Na(),fa!==c)if(na(),fa=ka(),fa!==c)if(na(),va=Wa(),va!==c)if(na(),va=da(),va!==c){na();var Ca=Oa();Ca!==c?(sa=R,R={type:"interval-period",period:"second",precision:fa,secondary:va}):(k=R,R=c)}else k=R,R=c;else k=
R,R=c;else k=R,R=c;else k=R,R=c;else k=R,R=c;R===c&&(R=k,fa=Da(),fa!==c?(na(),fa=Na(),fa!==c?(na(),fa=ka(),fa!==c?(na(),va=Oa(),va!==c?(sa=R,R={type:"interval-period",period:"second",precision:fa,secondary:null}):(k=R,R=c)):(k=R,R=c)):(k=R,R=c)):(k=R,R=c),R===c&&(R=k,fa=Da(),fa!==c&&(sa=R,fa={type:"interval-period",period:"second",precision:null,secondary:null}),R=fa))}R!==c?(sa=H,H={type:"interval-qualifier",start:O,end:R}):(k=H,H=c)}else k=H,H=c;else k=H,H=c;H===c&&(H=k,R=ra(),R!==c?(na(),O=Na(),
O!==c?(na(),O=da(),O!==c?(na(),fa=Oa(),fa!==c?(sa=H,H={type:"interval-period",period:R.value,precision:O,secondary:null}):(k=H,H=c)):(k=H,H=c)):(k=H,H=c)):(k=H,H=c),H===c&&(H=k,R=ra(),R!==c&&(sa=H,R={type:"interval-period",period:R.value,precision:null,secondary:null}),H=R,H===c&&(H=k,R=Da(),R!==c?(na(),O=Na(),O!==c?(na(),O=ka(),O!==c?(na(),fa=Wa(),fa!==c?(na(),R=da(),R!==c?(na(),fa=Oa(),fa!==c?(sa=H,H={type:"interval-period",period:"second",precision:O,secondary:R}):(k=H,H=c)):(k=H,H=c)):(k=H,H=
c)):(k=H,H=c)):(k=H,H=c)):(k=H,H=c),H===c&&(H=k,R=Da(),R!==c?(na(),O=Na(),O!==c?(na(),O=da(),O!==c?(na(),fa=Oa(),fa!==c?(sa=H,H={type:"interval-period",period:"second",precision:O,secondary:null}):(k=H,H=c)):(k=H,H=c)):(k=H,H=c)):(k=H,H=c),H===c&&(H=k,R=Da(),R!==c&&(sa=H,R={type:"interval-period",period:"second",precision:null,secondary:null}),H=R)))));return H}function ra(){var H=k;var O=Fa();O!==c&&(sa=H,O={type:"string",value:"day"});H=O;H===c&&(H=k,O=za(),O!==c&&(sa=H,O={type:"string",value:"hour"}),
H=O,H===c&&(H=k,O=Ea(),O!==c&&(sa=H,O={type:"string",value:"minute"}),H=O,H===c&&(H=k,O=wa(),O!==c&&(sa=H,O={type:"string",value:"month"}),H=O,H===c&&(H=k,O=ta(),O!==c&&(sa=H,O={type:"string",value:"year"}),H=O))));return H}function da(){var H=k;var O=h();O!==c&&(sa=H,O=parseFloat(O));return O}function ka(){var H=k;var O=h();O!==c&&(sa=H,O=parseFloat(O));return O}function ia(){var H=qa();H===c&&(H=Y());return H}function qa(){var H=k;if(39===e.charCodeAt(k)){var O=Ed;k++}else O=c,0===ja&&a(Fd);O===
c&&(e.substr(k,2)===Gd?(O=Gd,k+=2):(O=c,0===ja&&a(Qf)));if(O!==c){O=[];var R=k;if(e.substr(k,2)===xc){var fa=xc;k+=2}else fa=c,0===ja&&a(Hd);fa!==c&&(sa=R,fa="'");R=fa;R===c&&(Id.test(e.charAt(k))?(R=e.charAt(k),k++):(R=c,0===ja&&a(Jd)));for(;R!==c;)O.push(R),R=k,e.substr(k,2)===xc?(fa=xc,k+=2):(fa=c,0===ja&&a(Hd)),fa!==c&&(sa=R,fa="'"),R=fa,R===c&&(Id.test(e.charAt(k))?(R=e.charAt(k),k++):(R=c,0===ja&&a(Jd)));39===e.charCodeAt(k)?(R=Ed,k++):(R=c,0===ja&&a(Fd));R!==c?(sa=H,H={type:"string",value:O.join("")}):
(k=H,H=c)}else k=H,H=c;return H}function ua(){var H=k;if(Sa()!==c){na();var O=F();if(O!==c){na();var R=Ya();R!==c?(na(),R=F(),R!==c?(sa=H,H={type:"when-clause",operand:O,value:R}):(k=H,H=c)):(k=H,H=c)}else k=H,H=c}else k=H,H=c;return H}function xa(){var H=k;if(Sa()!==c){na();var O=F();if(O!==c){na();var R=Ya();R!==c?(na(),R=F(),R!==c?(sa=H,H={type:"when-clause",operand:O,value:R}):(k=H,H=c)):(k=H,H=c)}else k=H,H=c}else k=H,H=c;return H}function Aa(){var H=k;var O=k;if(e.substr(k,4).toLowerCase()===
Rf){var R=e.substr(k,4);k+=4}else R=c,0===ja&&a(Sf);if(R!==c){R=k;ja++;var fa=B();ja--;fa===c?R=void 0:(k=R,R=c);R!==c?(sa=O,O="ELSE"):(k=O,O=c)}else k=O,O=c;O!==c?(na(),O=F(),O!==c?(sa=H,H={type:"else-clause",value:O}):(k=H,H=c)):(k=H,H=c);return H}function Ka(){var H=h();if(H===c){H=k;if(45===e.charCodeAt(k)){var O=Bc;k++}else O=c,0===ja&&a(Cc);O===c&&(43===e.charCodeAt(k)?(O=zc,k++):(O=c,0===ja&&a(Ac)));if(O!==c){var R=h();R!==c?(sa=H,H=O[0]+R):(k=H,H=c)}else k=H,H=c}return H}function Ha(){var H=
k;if(46===e.charCodeAt(k)){var O=Tf;k++}else O=c,0===ja&&a(Uf);O!==c?(O=h(),O===c&&(O=null),sa=H,H="."+(null!=O?O:"")):(k=H,H=c);return H}function Ma(){var H;var O=H=k;if(Vf.test(e.charAt(k))){var R=e.charAt(k);k++}else R=c,0===ja&&a(Wf);R!==c?(Xf.test(e.charAt(k))?(R=e.charAt(k),k++):(R=c,0===ja&&a(Yf)),R===c&&(R=null),sa=O,O="e"+(null===R?"":R)):(k=O,O=c);O!==c?(R=h(),R!==c?(sa=H,H=O+R):(k=H,H=c)):(k=H,H=c);return H}function h(){var H=k;var O=[];var R=G();if(R!==c)for(;R!==c;)O.push(R),R=G();else O=
c;O!==c&&(sa=H,O=O.join(""));return O}function G(){if(Zf.test(e.charAt(k))){var H=e.charAt(k);k++}else H=c,0===ja&&a($f);return H}function X(){var H=k;if(e.substr(k,2).toLowerCase()===ag){var O=e.substr(k,2);k+=2}else O=c,0===ja&&a(bg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="IN"):(k=H,H=c)}else k=H,H=c;return H}function ba(){var H=k;if(e.substr(k,2).toLowerCase()===cg){var O=e.substr(k,2);k+=2}else O=c,0===ja&&a(dg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:
(k=O,O=c);O!==c?(sa=H,H="IS"):(k=H,H=c)}else k=H,H=c;return H}function ma(){var H=k;if(e.substr(k,4).toLowerCase()===eg){var O=e.substr(k,4);k+=4}else O=c,0===ja&&a(fg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="LIKE"):(k=H,H=c)}else k=H,H=c;return H}function C(){var H=k;if(e.substr(k,3).toLowerCase()===gg){var O=e.substr(k,3);k+=3}else O=c,0===ja&&a(hg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="NOT"):(k=H,H=c)}else k=H,H=c;return H}function K(){var H=
k;if(e.substr(k,3).toLowerCase()===ig){var O=e.substr(k,3);k+=3}else O=c,0===ja&&a(jg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="AND"):(k=H,H=c)}else k=H,H=c;return H}function M(){var H=k;if(e.substr(k,2).toLowerCase()===kg){var O=e.substr(k,2);k+=2}else O=c,0===ja&&a(lg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="OR"):(k=H,H=c)}else k=H,H=c;return H}function V(){var H=k;if(e.substr(k,7).toLowerCase()===mg){var O=e.substr(k,7);k+=7}else O=
c,0===ja&&a(ng);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="BETWEEN"):(k=H,H=c)}else k=H,H=c;return H}function aa(){var H=k;if(e.substr(k,4).toLowerCase()===og){var O=e.substr(k,4);k+=4}else O=c,0===ja&&a(pg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="FROM"):(k=H,H=c)}else k=H,H=c;return H}function ca(){var H=k;if(e.substr(k,4).toLowerCase()===qg){var O=e.substr(k,4);k+=4}else O=c,0===ja&&a(rg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=
void 0:(k=O,O=c);O!==c?(sa=H,H="TRIM"):(k=H,H=c)}else k=H,H=c;return H}function ha(){var H=k;if(e.substr(k,9).toLowerCase()===sg){var O=e.substr(k,9);k+=9}else O=c,0===ja&&a(tg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="TIMESTAMP"):(k=H,H=c)}else k=H,H=c;return H}function oa(){var H=k;if(e.substr(k,4).toLowerCase()===ug){var O=e.substr(k,4);k+=4}else O=c,0===ja&&a(vg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="DATE"):(k=H,H=c)}else k=
H,H=c;return H}function pa(){var H=k;if(e.substr(k,4).toLowerCase()===wg){var O=e.substr(k,4);k+=4}else O=c,0===ja&&a(xg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="TIME"):(k=H,H=c)}else k=H,H=c;return H}function ya(){var H=k;if(e.substr(k,8).toLowerCase()===yg){var O=e.substr(k,8);k+=8}else O=c,0===ja&&a(zg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="INTERVAL"):(k=H,H=c)}else k=H,H=c;return H}function ta(){var H=k;if(e.substr(k,4).toLowerCase()===
Ag){var O=e.substr(k,4);k+=4}else O=c,0===ja&&a(Bg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="YEAR"):(k=H,H=c)}else k=H,H=c;return H}function wa(){var H=k;if(e.substr(k,5).toLowerCase()===Cg){var O=e.substr(k,5);k+=5}else O=c,0===ja&&a(Dg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="MONTH"):(k=H,H=c)}else k=H,H=c;return H}function Fa(){var H=k;if(e.substr(k,3).toLowerCase()===Eg){var O=e.substr(k,3);k+=3}else O=c,0===ja&&a(Fg);if(O!==c){O=
k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="DAY"):(k=H,H=c)}else k=H,H=c;return H}function za(){var H=k;if(e.substr(k,4).toLowerCase()===Gg){var O=e.substr(k,4);k+=4}else O=c,0===ja&&a(Hg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="HOUR"):(k=H,H=c)}else k=H,H=c;return H}function Ea(){var H=k;if(e.substr(k,6).toLowerCase()===Ig){var O=e.substr(k,6);k+=6}else O=c,0===ja&&a(Jg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="MINUTE"):
(k=H,H=c)}else k=H,H=c;return H}function Da(){var H=k;if(e.substr(k,6).toLowerCase()===Kg){var O=e.substr(k,6);k+=6}else O=c,0===ja&&a(Lg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="SECOND"):(k=H,H=c)}else k=H,H=c;return H}function Ba(){var H=k;if(e.substr(k,4).toLowerCase()===Mg){var O=e.substr(k,4);k+=4}else O=c,0===ja&&a(Ng);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="CASE"):(k=H,H=c)}else k=H,H=c;return H}function La(){var H=k;if(e.substr(k,
3).toLowerCase()===Og){var O=e.substr(k,3);k+=3}else O=c,0===ja&&a(Pg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="END"):(k=H,H=c)}else k=H,H=c;return H}function Sa(){var H=k;if(e.substr(k,4).toLowerCase()===Qg){var O=e.substr(k,4);k+=4}else O=c,0===ja&&a(Rg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="WHEN"):(k=H,H=c)}else k=H,H=c;return H}function Ya(){var H=k;if(e.substr(k,4).toLowerCase()===Sg){var O=e.substr(k,4);k+=4}else O=c,0===ja&&
a(Tg);if(O!==c){O=k;ja++;var R=B();ja--;R===c?O=void 0:(k=O,O=c);O!==c?(sa=H,H="THEN"):(k=H,H=c)}else k=H,H=c;return H}function Wa(){if(44===e.charCodeAt(k)){var H=Ug;k++}else H=c,0===ja&&a(Vg);return H}function Na(){if(40===e.charCodeAt(k)){var H=Wg;k++}else H=c,0===ja&&a(Xg);return H}function Oa(){if(41===e.charCodeAt(k)){var H=Yg;k++}else H=c,0===ja&&a(Zg);return H}function na(){var H;var O=[];for(H=Ta();H!==c;)O.push(H),H=Ta();return O}function Ta(){if($g.test(e.charAt(k))){var H=e.charAt(k);
k++}else H=c,0===ja&&a(ah);return H}function Mb(H,O,R,fa){H={type:"binary-expression",operator:H,left:O,right:R};void 0!==fa&&(H.escape=fa);return H}function nb(H,O){for(var R=0;R<O.length;R++)H=Mb(O[R][1],H,O[R][3]);return H}v=void 0!==v?v:{};var c={},Md=v.grammarSource,Kd={start:u},Ld=u,Nd="!",Rc="\x3d",Tc="\x3e\x3d",Sd="\x3e",Uc="\x3c\x3d",Vc="\x3c\x3e",Wd="\x3c",Wc="!\x3d",zc="+",Bc="-",Xc="||",$d="*",be="/",Gf="@",Ed="'",Gd="N'",xc="''",Tf=".",ke="null",de="true",ge="false",ag="in",cg="is",eg=
"like",Pd="escape",gg="not",ig="and",kg="or",mg="between",og="from",Ee="for",ze="substring",ne="extract",qg="trim",Ke="position",sg="timestamp",ug="date",wg="time",If="leading",Kf="trailing",Mf="both",Qe="cast",Ue="as",Ye="integer",af="smallint",df="float",gf="real",kf="varchar",Of="to",yg="interval",Ag="year",re="timezone_hour",ue="timezone_minute",Cg="month",Eg="day",Gg="hour",Ig="minute",Kg="second",Mg="case",Og="end",Qg="when",Sg="then",Rf="else",Ug=",",Wg="(",Yg=")",ud="`",Af=/^[A-Za-z_\x80-\uFFFF]/,
Cf=/^[A-Za-z0-9_]/,Cd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ef=/^["]/,Id=/^[^']/,Zf=/^[0-9]/,Vf=/^[eE]/,Xf=/^[+\-]/,$g=/^[ \t\n\r]/,wd=/^[^`]/,Od=w("!",!1),Sc=w("\x3d",!1),Rd=w("\x3e\x3d",!1),Td=w("\x3e",!1),Ud=w("\x3c\x3d",!1),Vd=w("\x3c\x3e",!1),Xd=w("\x3c",!1),Yd=w("!\x3d",!1),Ac=w("+",!1),Cc=w("-",!1),Zd=w("||",!1),ae=w("*",!1),ce=w("/",!1),Bf=E([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Df=E([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Dd=E([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],
!1,!1),Ff=E(['"'],!1,!1),Hf=w("@",!1),Fd=w("'",!1),Qf=w("N'",!1),Hd=w("''",!1),Jd=E(["'"],!0,!1),Uf=w(".",!1),$f=E([["0","9"]],!1,!1),Wf=E(["e","E"],!1,!1),Yf=E(["+","-"],!1,!1),le=w("NULL",!0),ee=w("TRUE",!0),he=w("FALSE",!0),bg=w("IN",!0),dg=w("IS",!0),fg=w("LIKE",!0),Qd=w("ESCAPE",!0),hg=w("NOT",!0),jg=w("AND",!0),lg=w("OR",!0),ng=w("BETWEEN",!0),pg=w("FROM",!0),Fe=w("FOR",!0),Ae=w("SUBSTRING",!0),oe=w("EXTRACT",!0),rg=w("TRIM",!0),Le=w("POSITION",!0),tg=w("TIMESTAMP",!0),vg=w("DATE",!0),xg=w("TIME",
!0),Jf=w("LEADING",!0),Lf=w("TRAILING",!0),Nf=w("BOTH",!0),Re=w("CAST",!0),Ve=w("AS",!0),Ze=w("INTEGER",!0),bf=w("SMALLINT",!0),ef=w("FLOAT",!0),hf=w("REAL",!0),lf=w("VARCHAR",!0),Pf=w("TO",!0),zg=w("INTERVAL",!0),Bg=w("YEAR",!0),se=w("TIMEZONE_HOUR",!0),ve=w("TIMEZONE_MINUTE",!0),Dg=w("MONTH",!0),Fg=w("DAY",!0),Hg=w("HOUR",!0),Jg=w("MINUTE",!0),Lg=w("SECOND",!0),Ng=w("CASE",!0),Pg=w("END",!0),Rg=w("WHEN",!0),Tg=w("THEN",!0),Sf=w("ELSE",!0),Vg=w(",",!1),Xg=w("(",!1),Zg=w(")",!1),ah=E([" ","\t","\n",
"\r"],!1,!1),vd=w("`",!1),xd=E(["`"],!0,!1),k=0,sa=0,Yb=[{line:1,column:1}],eb=0,yc=[],ja=0;if("startRule"in v){if(!(v.startRule in Kd))throw Error("Can't start parsing from rule \""+v.startRule+'".');Ld=Kd[v.startRule]}var Qc=Ld();if(Qc!==c&&k===e.length)return Qc;Qc!==c&&k<e.length&&a({type:"end"});throw function(H,O,R){return new g(g.buildMessage(H,O),H,O,R)}(yc,eb<e.length?e.charAt(eb):null,eb<e.length?q(eb,eb+1):q(eb,eb));}}})})(y);var r=y.exports;class D{static parse(z){return r.parse(z)}}b.WhereGrammar=
D;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(b,f){f=new f.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});b.kebabDict=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(b){b.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,
centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,
supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A,w,E){function t(p,F,L,d){const J=d.x-L.x;d=d.y-L.y;F=Math.min(1,Math.max(0,((F.x-L.x)*J+(F.y-L.y)*d)/(J*J+d*d)));p.x=L.x+J*F;p.y=L.y+d*F}function q(p,F){return p?F?4:3:F?3:2}class a{constructor(p,F,L){this.items=p;this.query=F;this.geometryType=L.geometryType;this.hasM=L.hasM;this.hasZ=L.hasZ;this.fieldsIndex=L.fieldsIndex;this.objectIdField=L.objectIdField;this.spatialReference=L.spatialReference;this.featureAdapter=L.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const p=
new n(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return p.countDistinctValues(this.items);const {groupByFieldsForStatistics:F,having:L,outStatistics:d}=this.query;if(!F?.length)return 1;const J=new Map,Q=new Map,S=new Set;for(const U of d){var {statisticType:Z}=U;Z="exceedslimit"!==Z?U.onStatisticField:void 0;if(!Q.has(Z)){var W=[];for(const x of F){const I=this._getAttributeValues(p,x,J);W.push(I)}Q.set(Z,this._calculateUniqueValues(W,p.returnDistinctValues))}Z=
Q.get(Z);for(const x in Z){const {data:I,items:m}=Z[x];W=I.join(",");L&&!p.validateItems(m,L)||S.add(W)}}return S.size}async createQueryResponse(){let p;p=this.query.outStatistics?this.query.outStatistics.some(F=>"exceedslimit"===F.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const F=this.query.geometry;g.isValid(this.query.outSR)&&!g.equals(F.spatialReference,
this.query.outSR)?p.queryGeometry=e.cleanFromGeometryEngine({spatialReference:this.query.outSR,...v.project(F,F.spatialReference,this.query.outSR)}):p.queryGeometry=e.cleanFromGeometryEngine({spatialReference:this.query.outSR,...F})}return p}createSnappingResponse(p,F){const L=this.featureAdapter,d=q(this.hasZ,this.hasM),{point:J,mode:Q}=p,S="number"===typeof p.distance?p.distance:p.distance.x,Z="number"===typeof p.distance?p.distance:p.distance.y,W={candidates:[]},U="esriGeometryPolygon"===this.geometryType;
F=this._getPointCreator(Q,this.spatialReference,F);const x=new u(null,0),I=new u(null,0),m={x:0,y:0,z:0};for(const ea of this.items){var l=L.getGeometry(ea);if(null==l)continue;const {coords:la,lengths:ra}=l;x.coords=la;I.coords=la;if(p.returnEdge){l=0;for(var B=0;B<ra.length;B++){var P=ra[B];for(var N=0;N<P;N++,l+=d){var T=x;T.coordsIndex=l;if(N!==P-1){const da=I;da.coordsIndex=l+d;const ka=m;t(m,J,T,da);var Y=(J.x-ka.x)/S;const ia=(J.y-ka.y)/Z;Y=Y*Y+ia*ia;1>=Y&&W.candidates.push(A.makeEdgeCandidate(L.getObjectId(ea),
F(ka),Math.sqrt(Y),F(T),F(da)))}}}}if("none"!==p.vertexMode)if(l=U?la.length-d:la.length,"all"===p.vertexMode)for(B=0;B<l;B+=d)P=x,P.coordsIndex=B,N=(J.x-P.x)/S,T=(J.y-P.y)/Z,N=N*N+T*T,1>=N&&W.candidates.push(A.makeVertexCandidate(L.getObjectId(ea),F(P),Math.sqrt(N)));else if("ends"===p.vertexMode){l=[0];U||l.push(la.length-d);for(const da of l)l=x,l.coordsIndex=da,B=(J.x-l.x)/S,P=(J.y-l.y)/Z,B=B*B+P*P,1>=B&&W.candidates.push(A.makeVertexCandidate(L.getObjectId(ea),F(l),Math.sqrt(B)))}}W.candidates.sort((ea,
la)=>ea.distance-la.distance);return W}_getPointCreator(p,F,L){const d=null==L||g.equals(F,L)?Q=>Q:Q=>v.project(Q,F,L),{hasZ:J}=this;return"3d"===p?J?({x:Q,y:S,z:Z})=>d({x:Q,y:S,z:Z}):({x:Q,y:S})=>d({x:Q,y:S,z:0}):({x:Q,y:S})=>d({x:Q,y:S})}async createSummaryStatisticsResponse(p){const {field:F,valueExpression:L,normalizationField:d,normalizationType:J,normalizationTotal:Q,minValue:S,maxValue:Z,scale:W,timeZone:U}=p;var x=this.fieldsIndex.get(F);p=w.isDateField(x)||w.isDateOnlyField(x)||w.isTimestampOffsetField(x);
const I=await this._getDataValues({field:F,valueExpression:L,normalizationField:d,normalizationType:J,normalizationTotal:Q,scale:W,timeZone:U}),m=E.isNullCountSupported({normalizationType:J,normalizationField:d,minValue:S,maxValue:Z}),l={value:.5,fieldType:x?.type};x=w.isStringField(x)?E.calculateStringStatistics({values:I,supportsNullCount:m,percentileParams:l}):E.calculateStatistics({values:I,minValue:S,maxValue:Z,useSampleStdDev:!J,supportsNullCount:m,percentileParams:l});return E.processSummaryStatisticsResult(x,
p)}async createUniqueValuesResponse(p){const {field:F,valueExpression:L,domains:d,returnAllCodedValues:J,scale:Q,timeZone:S}=p;var Z=await this._getDataValues({field:F,field2:p.field2,field3:p.field3,fieldDelimiter:p.fieldDelimiter,valueExpression:L,scale:Q,timeZone:S},!1);Z=E.calculateUniqueValuesCount(Z);return E.createUVResult(Z,d,J,p.fieldDelimiter)}async createClassBreaksResponse(p){const {field:F,valueExpression:L,normalizationField:d,normalizationType:J,normalizationTotal:Q,classificationMethod:S,
standardDeviationInterval:Z,minValue:W,maxValue:U,numClasses:x,scale:I,timeZone:m}=p;p=await this._getDataValues({field:F,valueExpression:L,normalizationField:d,normalizationType:J,normalizationTotal:Q,scale:I,timeZone:m});p=E.calculateClassBreaks(p,{field:F,normalizationField:d,normalizationType:J,normalizationTotal:Q,classificationMethod:S,standardDeviationInterval:Z,minValue:W,maxValue:U,numClasses:x});return E.resolveCBResult(p,S)}async createHistogramResponse(p){const {field:F,valueExpression:L,
normalizationField:d,normalizationType:J,normalizationTotal:Q,classificationMethod:S,standardDeviationInterval:Z,minValue:W,maxValue:U,numBins:x,scale:I,timeZone:m}=p;p=await this._getDataValues({field:F,valueExpression:L,normalizationField:d,normalizationType:J,normalizationTotal:Q,scale:I,timeZone:m});return E.calculateHistogram(p,{field:F,normalizationField:d,normalizationType:J,normalizationTotal:Q,classificationMethod:S,standardDeviationInterval:Z,minValue:W,maxValue:U,numBins:x})}_sortFeatures(p,
F,L){if(1<p.length&&F?.length)for(const d of F.reverse()){F=d.split(" ");const J=F[0],Q=this.fieldsIndex.get(J);F=F[1]?"desc"===F[1].toLowerCase():!1;const S=E.getAttributeComparator(Q?.type,F);p.sort((Z,W)=>{Z=L(Z,J,Q);W=L(W,J,Q);return S(Z,W)})}}_createFeatureQueryResponse(p){const F=this.items,{geometryType:L,hasM:d,hasZ:J,objectIdField:Q,spatialReference:S}=this,{outFields:Z,outSR:W,quantizationParameters:U,resultRecordCount:x,resultOffset:I,returnZ:m,returnM:l}=p,B=null!=x?F.length>(I||0)+x:
!1,P=Z&&(Z.includes("*")?[...this.fieldsIndex.fields]:Z.map(N=>this.fieldsIndex.get(N)));return{exceededTransferLimit:B,features:this._createFeatures(p,F),fields:P,geometryType:L,hasM:d&&l,hasZ:J&&m,objectIdFieldName:Q,spatialReference:e.cleanFromGeometryEngine(W||S),transform:U&&z.toQuantizationTransform(U)||null}}_createFeatures(p,F){const L=new n(p,this.featureAdapter,this.fieldsIndex),{hasM:d,hasZ:J}=this,{orderByFields:Q,quantizationParameters:S,returnGeometry:Z,returnCentroid:W,maxAllowableOffset:U,
resultOffset:x,resultRecordCount:I,returnZ:m=!1,returnM:l=!1}=p,B=J&&m,P=d&&l;p=[];var N=0;const T=[...F];this._sortFeatures(T,Q,(da,ka,ia)=>L.getFieldValue(da,ka,ia));if(this.geometryType&&(Z||W)){var Y=z.toQuantizationTransform(S)??void 0;F="esriGeometryPolygon"===this.geometryType||"esriGeometryPolyline"===this.geometryType;if(Z&&!W)for(var ea of T){var la=this.featureAdapter.getGeometry(ea),ra={attributes:L.getAttributes(ea),geometry:e.getGeometry(this.geometryType,this.hasZ,this.hasM,la,U,Y,
B,P)};F&&la&&!ra.geometry&&(ra.centroid=e.transformCentroid(this,this.featureAdapter.getCentroid(ea,this),Y));p[N++]=ra}else if(!Z&&W)for(la of T)p[N++]={attributes:L.getAttributes(la),centroid:e.transformCentroid(this,this.featureAdapter.getCentroid(la,this),Y)};else for(ra of T)p[N++]={attributes:L.getAttributes(ra),centroid:e.transformCentroid(this,this.featureAdapter.getCentroid(ra,this),Y),geometry:e.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ra),U,Y,B,
P)}}else for(Y of T)(ea=L.getAttributes(Y))&&(p[N++]={attributes:ea});N=x||0;null!=I&&(p=p.slice(N,Math.min(p.length,N+I)));return p}_createExceedsLimitQueryResponse(p){var F=!1;let L=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY;F=Number.POSITIVE_INFINITY;for(const J of p.outStatistics??[])if("exceedslimit"===J.statisticType){L=null!=J.maxPointCount?J.maxPointCount:Number.POSITIVE_INFINITY;d=null!=J.maxRecordCount?J.maxRecordCount:Number.POSITIVE_INFINITY;F=null!=J.maxVertexCount?J.maxVertexCount:
Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)F=this.items.length>L;else if(this.items.length>d)F=!0;else{p=q(this.hasZ,this.hasM);const J=this.featureAdapter;F=this.items.reduce((Q,S)=>{S=J.getGeometry(S);return Q+(null!=S&&S.coords.length||0)},0)/p>F}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(F)}}]}}async _createStatisticsQueryResponse(p){var F=
{attributes:{}};const L=[],d=new Map,J=new Map,Q=new Map,S=new Map,Z=new n(p,this.featureAdapter,this.fieldsIndex);var W=p.outStatistics;const {groupByFieldsForStatistics:U,having:x,orderByFields:I,resultRecordCount:m}=p;p=U?.length;const l=!!p,B=l?U[0]:null,P=l&&!this.fieldsIndex.get(B);for(const la of W??[]){const {outStatisticFieldName:ra,statisticType:da}=la;W=la;const ka="exceedslimit"!==da?la.onStatisticField:void 0,ia="percentile_disc"===da||"percentile_cont"===da;var N="EnvelopeAggregate"===
da||"CentroidAggregate"===da||"ConvexHullAggregate"===da;const qa=l&&1===p&&(ka===B||P)&&"count"===da;if(l){if(!Q.has(ka)){var T=[];for(const ua of U){var Y=this._getAttributeValues(Z,ua,d);T.push(Y)}Q.set(ka,this._calculateUniqueValues(T,N?!1:Z.returnDistinctValues))}T=Q.get(ka);if(!T)continue;Y=Object.keys(T);for(const ua of Y){const {count:xa,data:Aa,items:Ka,itemPositions:Ha}=T[ua];Y=Aa.join(",");if(!x||Z.validateItems(Ka,x)){const Ma=S.get(Y)||{attributes:{}};if(N){Ma.aggregateGeometries||(Ma.aggregateGeometries=
{});const {aggregateGeometries:G,outStatisticFieldName:X}=await this._getAggregateGeometry(W,Ka);Ma.aggregateGeometries[X]=G}else{var ea=null;if(qa)ea=xa;else{const G=this._getAttributeValues(Z,ka,d);ea=Ha.map(X=>G[X]);ea=ia&&"statisticParameters"in W?this._getPercentileValue(W,ea):this._getStatisticValue(W,ea,null,Z.returnDistinctValues)}Ma.attributes[ra]=ea}let h=0;U.forEach((G,X)=>Ma.attributes[this.fieldsIndex.get(G)?G:`EXPR_${++h}`]=Aa[X]);S.set(Y,Ma)}}}else if(N){F.aggregateGeometries||(F.aggregateGeometries=
{});const {aggregateGeometries:ua,outStatisticFieldName:xa}=await this._getAggregateGeometry(W,this.items);F.aggregateGeometries[xa]=ua}else N=this._getAttributeValues(Z,ka,d),F.attributes[ra]=ia&&"statisticParameters"in W?this._getPercentileValue(W,N):this._getStatisticValue(W,N,J,Z.returnDistinctValues);W="min"!==da&&"max"!==da||!w.isStringField(this.fieldsIndex.get(ka))&&!this._isAnyDateField(ka)?null:this.fieldsIndex.get(ka)?.type;L.push({name:ra,alias:ra,type:W||"esriFieldTypeDouble"})}F=l?Array.from(S.values()):
[F];this._sortFeatures(F,I,(la,ra)=>la.attributes[ra]);m&&(F.length=Math.min(m,F.length));return{fields:L,features:F}}_isAnyDateField(p){p=this.fieldsIndex.get(p);return w.isDateField(p)||w.isDateOnlyField(p)||w.isTimestampOffsetField(p)||w.isTimeOnlyField(p)}async _getAggregateGeometry(p,F){const {convexHull:L,union:d}=await new Promise((m,l)=>b(["../../../geometry/geometryEngineJSON"],m,l)),{statisticType:J,outStatisticFieldName:Q}=p,{featureAdapter:S,spatialReference:Z,geometryType:W,hasZ:U,hasM:x}=
this;F=F.map(m=>e.getGeometry(W,U,x,S.getGeometry(m)));const I=L(Z,F,!0)[0];p={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===J?(F=I?D.getPolygonExtent(I):D.getGeometryExtent(d(Z,F)),p.aggregateGeometries={...F,spatialReference:Z},p.outStatisticFieldName=Q||"extent"):"CentroidAggregate"===J?(F=I?r.polygonCentroid(I):r.extentCentroid(D.getGeometryExtent(d(Z,F))),p.aggregateGeometries={x:F[0],y:F[1],spatialReference:Z},p.outStatisticFieldName=Q||"centroid"):"ConvexHullAggregate"===
J&&(p.aggregateGeometries=I,p.outStatisticFieldName=Q||"convexHull");return p}_getStatisticValue(p,F,L,d){const {onStatisticField:J,statisticType:Q}=p;p=null;p=L?.has(J)?L.get(J):w.isStringField(this.fieldsIndex.get(J))||this._isAnyDateField(J)?E.calculateStringStatistics({values:F,returnDistinct:d}):E.calculateStatistics({values:d?[...(new Set(F))]:F,minValue:null,maxValue:null,useSampleStdDev:!0});L&&L.set(J,p);return p["var"===Q?"variance":Q]}_getPercentileValue(p,F){const {onStatisticField:L,
statisticParameters:d,statisticType:J}=p,{value:Q,orderBy:S}=d;p=this.fieldsIndex.get(L);return E.calculatePercentile(F,{value:Q,orderBy:S,fieldType:p?.type,isDiscrete:"percentile_disc"===J})}_getAttributeValues(p,F,L){if(L.has(F))return L.get(F);const d=this.fieldsIndex.get(F),J=this.items.map(Q=>p.getFieldValue(Q,F,d));L.set(F,J);return J}_calculateUniqueValues(p,F){const L={},d=this.items,J=d.length;for(let Q=0;Q<J;Q++){const S=d[Q],Z=[];for(const U of p)Z.push(U[Q]);const W=Z.join(",");null==
L[W]?L[W]={count:1,data:Z,items:[S],itemPositions:[Q]}:(F||L[W].count++,L[W].items.push(S),L[W].itemPositions.push(Q))}return L}async _getDataValues(p,F=!0){const L=new n(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:d,scale:J,timeZone:Q}=p;return d?L.getExpressionValues(this.items,d,{viewingMode:"map",scale:J,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},Q):L.getDataValues(this.items,y.clone(p),F)}}class u{constructor(p,
F){this.coords=p;this.coordsIndex=F}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}f.QueryEngineResult=a;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(b,f){function y(m){if("lowerLeft"===m.originPosition&&4===m.scale.length&&4===m.translate.length)return m;const {originPosition:l,scale:B,translate:P}=
m;m=B[1]??1;return{originPosition:"lowerLeft",scale:[B[0]??1,"lowerLeft"===l?m:-m,B[2]??1,B[3]??1],translate:[P[0]??0,P[1]??0,P[2]??0,P[3]??0]}}function r({scale:m,translate:l},B){return Math.round((B-l[0])/m[0])}function D({scale:m,translate:l},B){return Math.round((B-l[1])/m[1])}function z({scale:m,translate:l},B){return Math.round(((B??0)-l[2])/m[2])}function g({scale:m,translate:l},B){return B?Math.round((B-l[3])/m[3]):0}function n(m,l){return m&&l?Z:m&&!l?Q:!m&&l?S:J}function e({scale:m,translate:l},
B){return B*m[0]+l[0]}function v({scale:m,translate:l},B){return B*m[1]+l[1]}function A({scale:m,translate:l},B){return(B??0)*m[2]+l[2]}function w({scale:m,translate:l},B){return B?B*m[3]+l[3]:0}function E(m,l){return m&&l?I:m&&!l?U:!m&&l?x:W}function t(m,l,B){const P=Array(B.length);for(let N=0;N<B.length;N++)P[N]=l(m,B[N]);return P}function q(m,l,B){let [P,N]=B[0],T=Math.min(P,l[0]),Y=Math.min(N,l[1]),ea=Math.max(P,l[2]);l=Math.max(N,l[3]);for(let la=1;la<B.length;la++){const [ra,da]=B[la];P+=ra;
N+=da;0>ra&&(T=Math.min(T,P));0<ra&&(ea=Math.max(ea,P));0>da?Y=Math.min(Y,N):0<da&&(l=Math.max(l,N))}m[0]=T;m[1]=Y;m[2]=ea;m[3]=l;return m}function a(m,l){if(!l.length)return null;m[0]=m[1]=Number.POSITIVE_INFINITY;m[2]=m[3]=Number.NEGATIVE_INFINITY;for(let B=0;B<l.length;B++)q(m,m,l[B]);return m}function u(m,l,B){m=y(m);l.xmin=r(m,B.xmin);l.ymin=D(m,B.ymin);l.xmax=r(m,B.xmax);l.ymax=D(m,B.ymax);B.hasZ&&(l.zmin=z(m,B.zmin),l.zmax=z(m,B.zmax));B.hasM&&(l.mmin=g(m,B.mmin),l.mmax=g(m,B.mmax));l.hasZ=
B.hasZ??!1;l.hasM=B.hasM??!1;return l}function p(m,l,B){m=y(m);l.points=n(B.hasZ,B.hasM)(m,B.points)??[];l.hasZ=B.hasZ??!1;l.hasM=B.hasM??!1;return l}function F(m,l,B){m=y(m);l.x=r(m,B.x);l.y=D(m,B.y);null!=B.z&&(l.z=z(m,B.z));null!=B.m&&(l.m=g(m,B.m));return l}function L(m,l,B){{m=y(m);var P=B.rings;const N=[],T=n(B.hasZ,B.hasM);for(let Y=0;Y<P.length;Y++){const ea=T(m,P[Y]);ea&&3<=ea.length&&N.push(ea)}m=N.length?N:null}if(!m)return null;l.rings=m;l.hasZ=B.hasZ??!1;l.hasM=B.hasM??!1;return l}function d(m,
l,B){{m=y(m);var P=B.paths;const N=[],T=n(B.hasZ,B.hasM);for(let Y=0;Y<P.length;Y++){const ea=T(m,P[Y]);ea&&2<=ea.length&&N.push(ea)}m=N.length?N:null}if(!m)return null;l.paths=m;l.hasZ=B.hasZ??!1;l.hasM=B.hasM??!1;return l}const J=(m,l)=>{const B=[];if(!l.length)return null;var P=l[0];let N=r(m,P[0]);P=D(m,P[1]);B.push([N,P]);for(let T=1;T<l.length;T++){const [Y,ea]=l[T],la=r(m,Y),ra=D(m,ea);la===N&&ra===P||B.push([la-N,ra-P]);N=la;P=ra}return B},Q=(m,l)=>{const B=[];if(!l.length)return null;var P=
l[0];let N=r(m,P[0]),T=D(m,P[1]);P=z(m,P[2]);B.push([N,T,P]);for(let Y=1;Y<l.length;Y++){const [ea,la,ra]=l[Y],da=r(m,ea),ka=D(m,la),ia=z(m,ra);da===N&&ka===T&&ia===P||B.push([da-N,ka-T,ia]);N=da;T=ka;P=ia}return B},S=(m,l)=>{const B=[];if(!l.length)return null;var P=l[0];let N=r(m,P[0]),T=D(m,P[1]);P=g(m,P[2]);B.push([N,T,P]);for(let Y=1;Y<l.length;Y++){const [ea,la,ra]=l[Y],da=r(m,ea),ka=D(m,la),ia=g(m,ra);da===N&&ka===T&&ia===P||B.push([da-N,ka-T,ia]);N=da;T=ka;P=ia}return B},Z=(m,l)=>{const B=
[];if(!l.length)return null;var P=l[0];let N=r(m,P[0]),T=D(m,P[1]),Y=z(m,P[2]);P=g(m,P[3]);B.push([N,T,Y,P]);for(let ea=1;ea<l.length;ea++){const [la,ra,da,ka]=l[ea],ia=r(m,la),qa=D(m,ra),ua=z(m,da),xa=g(m,ka);ia===N&&qa===T&&ua===Y&&xa===P||B.push([ia-N,qa-T,ua,xa]);N=ia;T=qa;Y=ua;P=xa}return B},W=(m,l)=>{const B=Array(l.length);if(!l.length)return B;var P=l[0];let N=e(m,P[0]);P=v(m,P[1]);B[0]=[N,P];const {scale:T,originPosition:Y}=m;m=T[0];const ea="lowerLeft"===Y?T[1]:-T[1];for(let la=1;la<l.length;la++){const [ra,
da]=l[la];N+=m*ra;P+=ea*da;B[la]=[N,P]}return B},U=(m,l)=>{const B=Array(l.length);if(!l.length)return B;var P=l[0];let N=e(m,P[0]),T=v(m,P[1]);B[0]=[N,T,A(m,P[2])];const {scale:Y,originPosition:ea}=m;P=Y[0];const la="lowerLeft"===ea?Y[1]:-Y[1];for(let ra=1;ra<l.length;ra++){const [da,ka,ia]=l[ra];N+=P*da;T+=la*ka;B[ra]=[N,T,A(m,ia)]}return B},x=(m,l)=>{const B=Array(l.length);if(!l.length)return B;var P=l[0];let N=e(m,P[0]),T=v(m,P[1]);B[0]=[N,T,w(m,P[2])];const {scale:Y,originPosition:ea}=m;P=Y[0];
const la="lowerLeft"===ea?Y[1]:-Y[1];for(let ra=1;ra<l.length;ra++){const [da,ka,ia]=l[ra];N+=P*da;T+=la*ka;B[ra]=[N,T,w(m,ia)]}return B},I=(m,l)=>{const B=Array(l.length);if(!l.length)return B;var P=l[0];let N=e(m,P[0]),T=v(m,P[1]);B[0]=[N,T,A(m,P[2]),w(m,P[3])];const {scale:Y,originPosition:ea}=m;P=Y[0];const la="lowerLeft"===ea?Y[1]:-Y[1];for(let ra=1;ra<l.length;ra++){const [da,ka,ia,qa]=l[ra];N+=P*da;T+=la*ka;B[ra]=[N,T,A(m,ia),w(m,qa)]}return B};b.getQuantizedBoundsCoordsArray=q;b.getQuantizedBoundsCoordsArrayArray=
a;b.getQuantizedBoundsPaths=function(m){return a([0,0,0,0],m)};b.getQuantizedBoundsPoints=function(m){const l=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return q(l,l,m)};b.getQuantizedBoundsRings=function(m){return a([0,0,0,0],m)};b.normalizeTransform=y;b.quantizeBounds=function(m,l,B){m=y(m);l[0]=r(m,B[0]);l[3]=D(m,B[1]);l[2]=r(m,B[2]);l[1]=D(m,B[3]);return l};b.quantizeCoordsArrayXY=J;b.quantizeCoordsArrayXYM=S;b.quantizeCoordsArrayXYZ=
Q;b.quantizeCoordsArrayXYZM=Z;b.quantizeExtent=u;b.quantizeGeometry=function(m,l){return m&&l?f.isPoint(l)?F(m,{},l):f.isPolyline(l)?d(m,{},l):f.isPolygon(l)?L(m,{},l):f.isMultipoint(l)?p(m,{},l):f.isExtent(l)?u(m,{},l):null:null};b.quantizeM=g;b.quantizeMultipoint=p;b.quantizePoint=F;b.quantizePolygon=L;b.quantizePolyline=d;b.quantizeX=r;b.quantizeY=D;b.quantizeZ=z;b.toQuantizationTransform=function(m){return m?{originPosition:"upper-left"===m.originPosition?"upperLeft":"lower-left"===m.originPosition?
"lowerLeft":m.originPosition,scale:m.tolerance?[m.tolerance,m.tolerance,1,1]:[1,1,1,1],translate:null!=m.extent?[m.extent.xmin,m.extent.ymax,m.extent.zmin??0,m.extent.mmin??0]:[0,0,0,0]}:null};b.unquantizeBounds=function(m,l,B){m=y(m);return B?(l[0]=e(m,B[0]),l[1]=v(m,B[3]),l[2]=e(m,B[2]),l[3]=v(m,B[1]),l):[e(m,l[0]),v(m,l[3]),e(m,l[2]),v(m,l[1])]};b.unquantizeCoordsArrayArray=t;b.unquantizeCoordsArrayXY=W;b.unquantizeCoordsArrayXYM=x;b.unquantizeCoordsArrayXYZ=U;b.unquantizeCoordsArrayXYZM=I;b.unquantizeExtent=
function(m,l,B,P=B.hasZ??!1,N=B.hasM??!1){m=y(m);l.xmin=e(m,B.xmin);l.xmax=e(m,B.xmax);l.ymin=v(m,B.ymin);l.ymax=v(m,B.ymax);P&&(l.zmin=A(m,B.zmin),l.zmax=A(m,B.zmax));N&&(l.mmin=w(m,B.mmin),l.mmax=w(m,B.mmax));l.hasZ=P;l.hasM=N;return l};b.unquantizeM=w;b.unquantizeMultipoint=function(m,l,B,P=B?.hasZ??!1,N=B?.hasM??!1){null!=B&&(m=y(m),l.points=E(P,N)(m,B.points),l.hasZ=P,l.hasM=N);return l};b.unquantizePoint=function(m,l,B,P=null!=B?.z,N=null!=B?.m){if(null==B)return l;m=y(m);l.x=e(m,B.x);l.y=v(m,
B.y);P&&(l.z=A(m,B.z));N&&(l.m=w(m,B.m));return l};b.unquantizePolygon=function(m,l,B,P=B?.hasZ??!1,N=B?.hasM??!1){null!=B&&(m=y(m),l.rings=t(m,E(P,N),B.rings),l.hasZ=P,l.hasM=N);return l};b.unquantizePolyline=function(m,l,B,P=B?.hasZ??!1,N=B?.hasM??!1){null!=B&&(m=y(m),l.paths=t(m,E(P,N),B.paths),l.hasZ=P,l.hasM=N);return l};b.unquantizeX=e;b.unquantizeY=v;b.unquantizeZ=A;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(b,f,y,r,D,z){class g{constructor(n,e,v){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=n.returnDistinctValues??!1;this.fieldsIndex=v;this.featureAdapter=e;if((e=n.outFields)&&!e.includes("*")){this.outFields=e;n=0;for(const w of e){var A=b.getExpressionFromFieldName(w);A=(e=this.fieldsIndex.get(A))?null:b.getWhereClause(A,v);e=e?e.name:b.getAliasFromFieldName(w)||`FIELD_EXP_${n++}`;this._fieldDataCache.set(w,{alias:e,clause:A})}}}countDistinctValues(n){if(!this.returnDistinctValues)return n.length;
n.forEach(e=>this.getAttributes(e));return this._returnDistinctMap.size}getAttributes(n){n=this._processAttributesForOutFields(n);return this._processAttributesForDistinctValues(n)}getFieldValue(n,e,v){const A=v?v.name:e;let w=null;this._fieldDataCache.has(A)?w=this._fieldDataCache.get(A)?.clause:v||(w=b.getWhereClause(e,this.fieldsIndex),this._fieldDataCache.set(A,{alias:A,clause:w}));return v?this.featureAdapter.getAttribute(n,A):w?.calculateValue(n,this.featureAdapter)}getDataValues(n,e,v=!0){const A=
e.normalizationType,w=e.normalizationTotal,E=this.fieldsIndex.get(e.field),t=y.isDateOnlyField(E)||y.isTimestampOffsetField(E),q=y.isTimeOnlyField(E);return n.map(a=>{let u=e.field&&this.getFieldValue(a,e.field,this.fieldsIndex.get(e.field));e.field2?(u=`${D.processNullValue(u)}${e.fieldDelimiter}${D.processNullValue(this.getFieldValue(a,e.field2,this.fieldsIndex.get(e.field2)))}`,e.field3&&(u=`${u}${e.fieldDelimiter}${D.processNullValue(this.getFieldValue(a,e.field3,this.fieldsIndex.get(e.field3)))}`)):
"string"===typeof u&&v&&(t?u=u?(new Date(u)).getTime():null:q&&(u=u?r.timeOnlyToMilliseconds(u):null));A&&Number.isFinite(u)&&(a="field"===A&&e.normalizationField?this.getFieldValue(a,e.normalizationField,this.fieldsIndex.get(e.normalizationField)):null,u=D.getNormalizedValue(u,A,a,w));return u})}async getExpressionValues(n,e,v,A,w){const {arcadeUtils:E}=await z.loadArcade(),t=E.hasGeometryOperations(e);t&&await E.enableGeometryOperations();const q=E.createFunction(e),a=E.getViewInfo(v),u={fields:this.fieldsIndex.fields};
return n.map(p=>{p={attributes:this.featureAdapter.getAttributes(p),layer:u,geometry:t?{...f.getGeometry(A.geometryType,A.hasZ,A.hasM,this.featureAdapter.getGeometry(p)),spatialReference:v?.spatialReference}:null};p=E.createExecContext(p,a,w);return E.executeFunction(q,p)})}validateItem(n,e){this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:b.getWhereClause(e,this.fieldsIndex)});return this._fieldDataCache.get(e)?.clause?.testFeature(n,this.featureAdapter)??!1}validateItems(n,
e){this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:b.getWhereClause(e,this.fieldsIndex)});return this._fieldDataCache.get(e)?.clause?.testSet(n,this.featureAdapter)??!1}_processAttributesForOutFields(n){const e=this.outFields;if(!e?.length)return this.featureAdapter.getAttributes(n);const v={};for(const A of e){const {alias:w,clause:E}=this._fieldDataCache.get(A);v[w]=E?E.calculateValue(n,this.featureAdapter):this.featureAdapter.getAttribute(n,w)}return v}_processAttributesForDistinctValues(n){if(null==
n||!this.returnDistinctValues)return n;var e=this.outFields,v=[];if(e)for(const w of e){var {alias:A}=this._fieldDataCache.get(w);v.push(n[A])}else for(A in n)v.push(n[A]);e=`${(e||["*"]).join(",")}=${v.join(",")}`;v=this._returnDistinctMap.get(e)||0;this._returnDistinctMap.set(e,++v);return 1<v?null:n}}return g})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A,w,E,t){function q(d){d=L.exec(d);if(!d)return null;const {hh:J,mm:Q,ss:S,ms:Z}=d.groups;return Number(J)*D.millisecondsPerTimeUnit.hours+Number(Q)*D.millisecondsPerTimeUnit.minutes+Number(S)*D.millisecondsPerTimeUnit.seconds+Number(Z||0)}function a(d,J){d=null!=d?d:"";null!=J&&J&&(d=d?"("+d+") AND ("+J+")":J);return d}function u(d){const J=d.layer;return d.fields.filter(Q=>!J.getField(Q))}function p(d){const J=d.layer;return d.fields.filter(Q=>{Q=J.getFieldUsageInfo(Q);
return!Q||!Q.supportsStatistics})}let F=null;const L=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;b.calculateHeatmapStats=function(d,J=18,Q,S,Z){const W=new Float64Array(S*Z);J=Math.round(r.pt2px(J));let U=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;Q=v.createValueFunction(Q);for(const {geometry:l,attributes:B}of d){const {x:P,y:N}=l;d=Math.max(0,P-J);var I=Math.max(0,N-J);const T=Math.min(Z,N+J),Y=Math.min(S,P+J),ea=+Q(B);for(;I<T;I++)for(let la=
d;la<Y;la++){var m=I*S+la;const ra=v.evaluateDensityKernel(la-P,I-N,J)*ea;m=W[m]+=ra;U=Math.min(U,m);x=Math.max(x,m)}}return{min:U,max:x}};b.getDataValues=async function(d,J,Q=!0){if(!J)return[];const {field:S,field2:Z,field3:W,fieldDelimiter:U,fieldInfos:x,timeZone:I}=d;var m=S&&x?.find(ka=>ka.name.toLowerCase()===S.toLowerCase());const l=m?e.isTimeOnlyField(m):!1,B=m?A.isAnyDateField(m):!1,P=d.valueExpression,N=d.normalizationType,T=d.normalizationField,Y=d.normalizationTotal,ea=[];m=d.viewInfoParams;
let la=null,ra=null;if(P){if(!F){const {arcadeUtils:ka}=await E.loadArcade();F=ka}F.hasGeometryOperations(P)&&await F.enableGeometryOperations();la=F.createFunction(P);ra=m?F.getViewInfo({viewingMode:m.viewingMode,scale:m.scale,spatialReference:new z(m.spatialReference)}):null}d=d.fieldInfos;const da=J[0]&&"declaredClass"in J[0]&&"esri.Graphic"===J[0].declaredClass||!d?null:{fields:d};J.forEach(ka=>{var ia=ka.attributes;if(P){var qa=F.createExecContext(da?{...ka,layer:da}:ka,ra,I);qa=F.executeFunction(la,
qa)}else ia&&(qa=ia[S],Z?(qa=`${w.processNullValue(qa)}${U}${w.processNullValue(ia[Z])}`,W&&(qa=`${qa}${U}${w.processNullValue(ia[W])}`)):"string"===typeof qa&&Q&&(B?qa=qa?(new Date(qa)).getTime():null:l&&(qa=qa?q(qa):null)));N&&"number"===typeof qa&&isFinite(qa)&&(ia=ia&&parseFloat(ia[T]),qa=w.getNormalizedValue(qa,N,ia,Y));ea.push(qa)});return ea};b.getRangeExpr=function(d,J,Q){J=null!=J?d+" \x3e\x3d "+J:"";d=null!=Q?d+" \x3c\x3d "+Q:"";Q="";return(Q=J&&d?a(J,d):J||d)?"("+Q+")":""};b.getSQLFilterForNormalization=
function(d){const J=d.field,Q=d.normalizationType;d=d.normalizationField;let S;if("field"===Q)S="(NOT "+d+" \x3d 0)";else if("log"===Q||"natural-log"===Q||"square-root"===Q)S=`(${J} > 0)`;return S};b.getSumOfAttributesExpr=function(d,J,Q){const S=[],Z=[],W=[],U=[],x=[];d.forEach((l,B)=>{const P=l.field?"field":"expression",N=l.field||l.valueExpression;l.field?(x.push(N),Z.push(`var ${P}${B} = Number($feature["${N}"]);`)):(S.push(`function getValueForExpr${B}() {\n  ${N} \n}`),Z.push(`var ${P}${B} = Number(getValueForExpr${B}());`));
Q||W.push(`${P}${B} = IIf(${P}${B} < 0, 0, ${P}${B});`);U.push(`${P}${B}`)});d="return sum;";const I=S.length?null:x.reduce((l,B)=>`${l} + ${B}`);let m=null;J||Q?J?Q||(d="return IIf(sum \x3e\x3d 0, sum, null);",I&&(m=`(( ${I} ) >= 0)`)):(d="return IIf(sum !\x3d 0, sum, null);",I&&(m=`(( ${I} ) <> 0)`)):(d="return IIf(sum \x3e 0, sum, null);",I&&(m=`(( ${I} ) > 0)`));return{valueExpression:[S.length?S.join("\n"):"",Z.join("\n"),W.join("\n"),`var sum = ${U.join(" + ")};`,d].filter(Boolean).join("\n\n"),
sqlExpression:I,sqlWhere:m}};b.mergeWhereClauses=a;b.quantizeFeatures=function(d,J,Q,S){const Z=n.isWrappable(Q)?n.getInfo(Q):null,W=Z?Math.round((Z.valid[1]-Z.valid[0])/J.scale[0]):null;return d.map(U=>{const x=new t(U.geometry);g.quantizePoint(J,x,x);if(Z){var I=W??0,m=S[0];0>x.x?x.x+=I:x.x>m&&(x.x-=I)}U.geometry=x;return U})};b.timeOnlyToMilliseconds=q;b.verifyBasicFieldValidity=function(d,J,Q){const S=u({layer:d,fields:J});if(S.length)return new y(Q,"Unknown fields: "+S.join(", ")+". You can only use fields defined in the layer schema");
d=p({layer:d,fields:J});if(d.length)return new y(Q,"Unsupported fields: "+d.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};b.verifyFieldType=function(d,J,Q,S){let Z;J?J.name!==d.objectIdField&&S.includes(J.type)||(Z=new y(Q,"'field' should be one of these types: "+S.join(","))):Z=new y(Q,"'field' is not defined in the layer schema");return Z};b.verifyFilterValidty=function(d,J){if(d&&"intersects"!==d.spatialRelationship)return new y(J,
"Only 'intersects' spatialRelationship is supported for featureFilter")};b.verifyNumericField=function(d,J,Q){let S;J?J.name!==d.objectIdField&&e.isNumericField(J)||(S=new y(Q,"'field' should be one of these numeric types: "+e.numericTypes.join(","))):S=new y(Q,"'field' is not defined in the layer schema");return S};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(b){function f(r){return r?72*r/96:0}const y=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;
b.castRenderScreenPointArray=function(r){return r};b.castRenderScreenPointArray3=function(r){return r};b.castScreenPointArray=function(r){return r};b.createRenderScreenPoint=function(r=0,D=0){return{x:r,y:D}};b.createRenderScreenPointArray=function(r=0,D=0){return[r,D]};b.createRenderScreenPointArray3=function(r=0,D=0,z=0){return[r,D,z]};b.createScreenPoint=function(r=0,D=0){return{x:r,y:D}};b.createScreenPointArray=function(r=0,D=0){return[r,D]};b.pt2px=function(r){return r?r/72*96:0};b.px2pt=f;
b.screenPointArrayToObject=function(r,D){return D?(D.x=r[0],D.y=r[1],D):{x:r[0],y:r[1]}};b.screenPointObjectToArray=function(r,D){return D?(D[0]=r.x,D[1]=r.y,2<D.length&&(D[2]=0),D):[r.x,r.y]};b.toPt=function(r){if("string"===typeof r){var D=r.match(y);if(D){var z=Number(D[1]);D=D[3]&&D[3].toLowerCase();r="-"===r.charAt(0);z="px"===D?f(z):z;return r?-z:z}console.warn("screenUtils.toPt: input not recognized!");return null}return r};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports",
"../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(b,f,y,r){function D(n,e,v){return 0===n?0:n*g[e]/g[v]}function z(n){switch(n){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const g={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,
centuries:31536E8};b.convertTime=D;b.isValidDate=function(n){return n instanceof Date&&!isNaN(n.getTime())};b.makeUTCTime=function(n,e,v="milliseconds"){e=new Date(D(e,v,"milliseconds"));e.setUTCFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return e};b.mergeTimeExtents=function(n,e){return n&&e?n.intersection(e):n||e};b.millisecondsPerTimeUnit=g;b.offsetDate=function(n,e,v,A=y.system){A=new r.IANAZone(f.resolveTimeZone(A));n=r.DateTime.fromJSDate(n,{zone:A});A="decades"===v||"centuries"===
v?"year":z(v);"decades"===v&&(e*=10);"centuries"===v&&(e*=100);return n.plus({[A]:e}).toJSDate()};b.offsetDateUTC=function(n,e,v="milliseconds"){n=n.getTime();e=D(e,v,"milliseconds");return new Date(n+e)};b.resetUTCDate=function(n,e){n=new Date(n.getTime());n.setUTCFullYear(e.getFullYear(),e.getMonth(),e.getDate());return n};b.timeSinceUTCMidnight=function(n,e="milliseconds"){const v=D(n.getUTCHours(),"hours","milliseconds"),A=D(n.getUTCMinutes(),"minutes","milliseconds"),w=D(n.getUTCSeconds(),"seconds",
"milliseconds");n=n.getUTCMilliseconds();return D(v+A+w+n,"milliseconds",e)};b.truncateDate=function(n,e,v=y.system){v=new r.IANAZone(f.resolveTimeZone(v));n=r.DateTime.fromJSDate(n,{zone:v});if("decades"===e||"centuries"===e)return n=n.startOf("year"),{year:v}=n,n.set({year:v-v%("decades"===e?10:100)}).toJSDate();e=z(e);return n.startOf(e).toJSDate()};b.truncateLocalTime=function(n){const e=new Date(0);e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);e.setFullYear(n.getUTCFullYear(),
n.getUTCMonth(),n.getUTCDate());return e};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(b,f,y,r,D){function z(g,n,e,v){let {color:A,ratio:w}=n,{color:E,ratio:t}=e;t===w&&(1===t?w-=1E-6:t+=1E-6);n=f.clamp((v-w)/(t-w),0,1);r.lerp(g,A.toArray(),E.toArray(),n)}b.createValueFunction=function(g){return"function"===
typeof g?g:g?n=>+n[g]:()=>1};b.evaluateDensityKernel=function(g,n,e){g=Math.sqrt(g**2+n**2)/e;return 1<g?0:3/(Math.PI*e**2)*(1-g**2)**2};b.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(g){return y.px2pt(2.4*g)};b.generateGradient=function(g){const n=new Uint8ClampedArray(2048);g=g.filter(({ratio:E})=>0<=E&&1>=E).sort((E,t)=>E.ratio-t.ratio).map(({color:E,ratio:t})=>({color:E,ratio:Math.max(t,.001)}));if(1>g.length)return n;let e=g[0],v=g[0],A=1;const w=D.create();for(let E=0;512>E;E++){const t=
(E+.5)/512;for(;t>v.ratio&&A<g.length;)e=v,v=g[A++];z(w,e,v,t);n.set(w,4*E)}return n};b.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(g){return y.pt2px(g)/2.4};b.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),function(b,f,y,r,D,z){function g(t){return String(t).padStart(2,
"0")}function n(t,q,a){if("date"===q||"number"===q){"number"===q&&(t=new Date(t));q=a?t.getFullYear():t.getUTCFullYear();const u=g((a?t.getMonth():t.getUTCMonth())+1),p=g(a?t.getDate():t.getUTCDate()),F=g(a?t.getHours():t.getUTCHours()),L=g(a?t.getMinutes():t.getUTCMinutes());t=g(a?t.getSeconds():t.getUTCSeconds());t=`TIMESTAMP'${q}-${u}-${p} ${F}:${L}:${t}'`}return t}function e(t,q){if(q instanceof Date)return"date";if("number"===typeof q)return"number";if("string"===typeof q&&(t=t.getField(q),"\x3cnow\x3e"!==
q.toLowerCase()&&y.isDateField(t)))return"field"}const v={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},A={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},w=new Set(["integer","small-integer"]);let E=null;b.castIntegerFieldToFloat=function(t){return`cast(${t} as float)`};b.dateTypes=
["date","date-only","timestamp-offset"];b.defaultBasemapGroups=v;b.fieldDelimiter=",";b.formatAnyDate=function(t,q){const {format:a,timeZoneOptions:u,fieldType:p}=q??{};let F;u&&({timeZone:L,timeZoneName:F}=z.getTimeZoneFormattingOptions(u.layerTimeZone,u.datesInUnknownTimezone,u.viewTimeZone,f.convertDateFormatToIntlOptions(a||"short-date-short-time"),p));if("string"===typeof t&&isNaN(Date.parse("time-only"===p?`1970-01-01T${t}Z`:t)))return t;switch(p){case "date-only":var L=f.convertDateFormatToIntlOptions(a||
"short-date");return"string"===typeof t?f.formatDateOnly(t,{...L}):f.formatDate(t,{...L,timeZone:z.utc});case "time-only":return L=f.convertDateFormatToIntlOptions(a||"short-time"),"string"===typeof t?f.formatTimeOnly(t,L):f.formatDate(t,{...L,timeZone:z.utc});case "timestamp-offset":if(!L&&"string"===typeof t&&(new Date(t)).toISOString()!==t)return t;L=(q=a||u?f.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0)?{...q,timeZone:L,timeZoneName:F}:void 0;return"string"===typeof t?f.formatTimestamp(t,
L):f.formatDate(t,L);default:return q=a||u?f.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0,f.formatDate("string"===typeof t?new Date(t):t,q?{...q,timeZone:L,timeZoneName:F}:void 0)}};b.getBasemapGroup=function(t,q=v){for(const a in q)if(q[a].includes(t))return a};b.getBasemapId=function(t,q,a=!0){let u=null;t&&("string"===typeof t?q.includes(t)&&(u=t):u=D.getWellKnownBasemapId(t));return a?u||"gray":u};b.getDateDiffSQL=function(t,q,a,u){const {hasQueryEngine:p}=t;a=n(a,e(t,a),
p);t=n(q,e(t,q),p);t=`(${a} - ${t})`;u=A[u];q="/";1>u&&(u=1/u,q="*");return{sqlExpression:1===u?t:`(${t} ${q} ${u})`,sqlWhere:null}};b.getDateType=e;b.getFieldsList=async function(t){const {field:q,field2:a,field3:u,normalizationField:p,valueExpression:F}=t;t=[];F&&(E||({arcadeUtils:t}=await r.loadArcade(),E=t),t=E.extractFieldNames(F));q&&t.push(q);a&&t.push(a);u&&t.push(u);p&&t.push(p);return t};b.getNormalizationType=function(t){let q=t.normalizationType;q||(t.normalizationField?q="field":null!=
t.normalizationTotal&&(q="percent-of-total"));return q??void 0};b.isAnyDateField=function(t){return y.isDateField(t)||y.isDateOnlyField(t)||y.isTimestampOffsetField(t)};b.isIntegerField=function(t,q){t=q&&t.getField(q);return!!t&&w.has(t.type)};b.unitValueInDays=A;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(b,f,y,r,D,z,g,n,e,v){function A(I,m){let l;if("string"===typeof I){const B=I in v.esriBasemapDefinitions,P=!B&&I.includes("/");if(!B&&!P)return m=Object.entries(v.esriBasemapDefinitions).filter(([,N])=>y.apiKey&&!N.classic||!y.apiKey&&(N.classic||N.is3d)).map(([N])=>`"${N}"`).sort().join(", "),D.getLogger("esri.support.basemapUtils").warn(`Unable to find basemap definition for: ${I}. Try one of these: ${m}`),null;m&&(l=m[I]);l||(l=B?f.fromId(I):new f({style:{id:I}}),m&&(m[I]=l))}else l=n.ensureType(f,
I);l?.destroyed&&(D.getLogger("esri.support.basemapUtils").warn("The provided basemap is already destroyed",{basemap:l}),l=null);return l}function w(I){if(U)return U(I);let m=null;I=a(I);const l=!I?.baseLayers.length;for(const P in v.esriBasemapDefinitions){var B=L(v.esriBasemapDefinitions[P]);B=J(I,B,{mustMatchReferences:l});if("equal"===B){m=P;break}"base-layers-equal"===B&&(m=P)}return m}function E(I,m){const l=new r;I.forEach(B=>{const P=m.find(N=>"scene"!==N.type&&S(p(B),p(N)))||B;l.includes(P)?
l.push(B):l.push(P)});return l}function t(I){if(q(I.url))return!0;if("vector-tile"===I.type)for(const m in I.sourceNameToSource)if(q(I.sourceNameToSource[m]?.sourceUrl))return!0;return!1}function q(I){if(!I)return!1;I=new g.Url(g.makeAbsolute(I));return!!I.authority&&x.test(I.authority)}function a(I){return I?!I.loaded&&I.resourceInfo?L(I.resourceInfo.data):{baseLayers:u(I.baseLayers),referenceLayers:u(I.referenceLayers)}:null}function u(I){return(r.isCollection(I)?I.toArray():I).map(p)}function p(I){return{type:I.type,
effect:"effect"in I?I.effect:void 0,url:Z("urlTemplate"in I&&I.urlTemplate||I.url||"styleUrl"in I&&I.styleUrl||""),minScale:"minScale"in I&&null!=I.minScale?I.minScale:0,maxScale:"maxScale"in I&&null!=I.maxScale?I.maxScale:0,opacity:null!=I.opacity?I.opacity:1,visible:null!=I.visible?!!I.visible:!0,sublayers:"map-image"!==I.type&&"wms"!==I.type||null==I.sublayers?void 0:I.sublayers?.map(m=>({id:m.id,visible:m.visible})),activeLayerId:"wmts"===I.type?I.activeLayer?.id:void 0}}function F(I){return I.isReference||
"ArcGISSceneServiceLayer"===I.layerType}function L(I){return I?{baseLayers:d((I.baseMapLayers??[]).filter(m=>!F(m))),referenceLayers:d((I.baseMapLayers??[]).filter(m=>F(m)))}:null}function d(I){return I.map(m=>{let l;switch(m.layerType){case "VectorTileLayer":l="vector-tile";break;case "ArcGISTiledMapServiceLayer":l="tile";break;case "ArcGISSceneServiceLayer":l="scene";break;default:l="unknown"}return{type:l,effect:m.effect,url:Z(m.templateUrl||m.urlTemplate||m.styleUrl||m.url),minScale:m.minScale??
0,maxScale:m.maxScale??0,opacity:m.opacity??1,visible:null!=m.visibility?!!m.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function J(I,m,l){return null!=I!==(null!=m)?"not-equal":I&&m?Q(I.baseLayers,m.baseLayers)?Q(I.referenceLayers,m.referenceLayers)?"equal":l.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function Q(I,m){if(I.length!==m.length)return!1;for(let l=0;l<I.length;l++)if(!S(I[l],m[l]))return!1;return!0}function S(I,m){if(I.type!==m.type||I.url!==m.url||
I.minScale!==m.minScale||I.maxScale!==m.maxScale||I.visible!==m.visible||I.opacity!==m.opacity||!e.effectEquals(I.effect,m.effect))return!1;if(null!=I.activeLayerId||null!=m.activeLayerId)return I.activeLayerId===m.activeLayerId;if(null!=I.sublayers||null!=m.sublayers){if(null==I.sublayers||null==m.sublayers||I.sublayers.length!==m.sublayers.length)return!1;for(let l=0;l<I.sublayers.length;l++){const B=I.sublayers.at(l),P=m.sublayers.at(l);if(B?.id!==P?.id||B?.visible!==P?.visible)return!1}}return!0}
function Z(I){return I?g.normalize(I).replace(/^\s*https?:/i,"").toLowerCase():""}function W(I){return"portalItem"in I?I.portalItem?.thumbnailUrl:void 0}let U;const x=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;b.clonePreservingTiledLayers=function(I,m=null){I=A(I);if(!I)return null;I=I.clone();m&&(I.baseLayers=E(I.baseLayers,m.baseLayers),I.referenceLayers=E(I.referenceLayers,m.referenceLayers));return I};b.contentEquals=function(I,m){if(I===m||null!=I?.portalItem?.id&&I.portalItem.id===m?.portalItem?.id)return!0;
I=a(I);m=a(m);return"equal"===J(I,m,{mustMatchReferences:!0})};b.createCache=function(){return{}};b.destroyCache=function(I){for(const m in I)z.destroyMaybe(I[m]),delete I[m]};b.ensureType=A;b.findSpatialReference=function(I,m){if(null==m||null==I)return{spatialReference:null,updating:!1};if("not-loaded"===m.loadStatus)return m.load(),{spatialReference:null,updating:!0};if(m.spatialReference)return{spatialReference:m.spatialReference,updating:!1};if(0===m.baseLayers.length)return{spatialReference:null,
updating:!1};m=m.baseLayers.at(0);switch(m.loadStatus){case "not-loaded":m.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}m=(("supportedSpatialReferences"in m?m.supportedSpatialReferences:null)||["tileInfo"in m?m.tileInfo?.spatialReference:m.spatialReference]).filter(Boolean);const l=I.spatialReference;return l?{spatialReference:m.find(B=>l.equals(B))??m[0]??null,updating:!1}:{spatialReference:m[0],updating:!1}};b.getBasemapThumbnailUrl=
function(I){if(!I)return null;var {thumbnailUrl:m}=I;return m?m:(m=w(I))?v.esriBasemapDefinitions[m].thumbnailUrl:z.mappedFind(I.baseLayers,W)};b.getWellKnownBasemapId=w;b.hasDeveloperBasemapLayer=function(I){return!!I?.baseLayers.concat(I.referenceLayers).some(t)};b.isBasemap3D=function(I){return"Web Scene"===I.portalItem?.type||I.referenceLayers.some(m=>"scene"===m.type)};b.isBasemapInBeta=function(I){return!!I?.portalItem?.tags?.some(m=>"beta"===m.toLowerCase())};b.isBasemapLayer=function(I,m){return I.basemap?.referenceLayers?.some(l=>
l.uid===m)||I.basemap?.baseLayers?.some(l=>l.uid===m)};b.isDeveloperBasemapLayer=t;b.overrideGetWellKnownBasemapId=function(I){U=I};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A,w,E,t,q,a,u,p,F,L,d,J,Q){var S;let Z=0;z=S=class extends z.JSONSupportMixin(n){constructor(x){super(x);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+Z++;this.baseLayers=new r;this.referenceLayers=new r;const I=m=>{m.parent&&m.parent!==this&&"remove"in m.parent&&m.parent.remove(m);m.parent=this;"elevation"===m.type&&v.getLogger(this).error(`Layer '${m.title}, id:${m.id}' of type '${m.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",m=>I(m.item)),this.referenceLayers.on("after-add",m=>I(m.item)),this.baseLayers.on("after-remove",m=>{m.item.parent=null}),this.referenceLayers.on("after-remove",m=>{m.item.parent=null})])}initialize(){this.when().catch(x=>{v.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,x)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var x=this.baseLayers.toArray();for(const I of x)I.destroy();
x=this.referenceLayers.toArray();for(const I of x)I.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=A.destroyMaybe(this.portalItem)}normalizeCtorArgs(x){x&&"resourceInfo"in x&&(this._set("resourceInfo",x.resourceInfo),x={...x},delete x.resourceInfo);return x}set baseLayers(x){this._set("baseLayers",D.referenceSetter(x,this._get("baseLayers")))}_writeBaseLayers(x,I,m){const l=[];x&&(m={...m,layerContainerType:"basemap"},this.baseLayers.forEach(B=>{B=Q.getLayerJSON(B,
m.webmap?m.webmap.getLayerJSONFromResourceInfo(B):null,m);null!=B&&l.push(B)}),this.referenceLayers.forEach(B=>{const P=Q.getLayerJSON(B,m.webmap?m.webmap.getLayerJSONFromResourceInfo(B):null,m);null!=P&&("scene"!==B.type&&(P.isReference=!0),l.push(P))}));I.baseMapLayers=l}set referenceLayers(x){this._set("referenceLayers",D.referenceSetter(x,this._get("referenceLayers")))}writeTitle(x,I){I.title=x||"Basemap"}load(x){this.addResolvingPromise(this._loadFromSource(x));return Promise.resolve(this)}loadAll(){return e.loadAll(this,
x=>{x(this.baseLayers,this.referenceLayers)})}clone(){const x={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(I=>g.isClonable(I)?I.clone():I),referenceLayers:this.referenceLayers.map(I=>g.isClonable(I)?I.clone():I)};this.loaded&&(x.loadStatus="loaded");return(new S({resourceInfo:this.resourceInfo})).set(x)}read(x,I){this.resourceInfo||this._set("resourceInfo",{data:x,context:I});super.read(x,I)}write(x,I){x=x||{};I?.origin||(I={origin:"web-map",...I});super.write(x,
I);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(x.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(m=>{m=g.clone(m);m.url&&E.isProtocolRelative(m.url)&&(m.url=`https:${m.url}`);m.templateUrl&&E.isProtocolRelative(m.templateUrl)&&(m.templateUrl=`https:${m.templateUrl}`);return m}));return x}async _loadFromSource(x){const {resourceInfo:I,portalItem:m,style:l}=this;w.throwIfAborted(x);const B=[];I?(B.push(this._loadLayersFromJSON(I.data,I.context?I.context.url:null,x)),I.data.id&&!I.data.title&&
B.push(d.getBasemapTitle(I.data.id).then(P=>{P&&this.read({title:P},I.context)}))):m?B.push(this._loadFromItem(m,x)):l&&B.push(this._loadFromStylesService(l,x));await Promise.all(B)}async _loadLayersFromJSON(x,I,m){const l=this.resourceInfo?.context,B=this.portalItem?.portal||l?.portal||null,P=U[l?.origin||""]??"web-map",{populateOperationalLayers:N}=await new Promise((Y,ea)=>b(["./layers/support/layersCreator"],Y,ea)),T=[];w.throwIfAborted(m);if(x.baseMapLayers&&Array.isArray(x.baseMapLayers)){I=
{context:{...l,origin:P,url:I,portal:B,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const Y=ea=>"web-scene"===P&&"ArcGISSceneServiceLayer"===ea.layerType||ea.isReference;m=N(this.baseLayers,x.baseMapLayers.filter(ea=>!Y(ea)),I);T.push(m);x=N(this.referenceLayers,x.baseMapLayers.filter(Y),I);T.push(x)}await Promise.allSettled(T)}async _loadFromItem(x,I){const m=await (await x.load(I)).fetchData("json",I),l=E.urlToObject(x.itemUrl??"");this._set("resourceInfo",{data:m.baseMap??
{},context:{origin:W[x.type||""]??"web-map",portal:x.portal||F.getDefault(),url:l}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:m.spatialReference},this.resourceInfo.context);this.read({title:x.title,thumbnailUrl:x.thumbnailUrl},{origin:"portal-item",portal:x.portal||F.getDefault(),url:l});return this._loadLayersFromJSON(this.resourceInfo.data,l,I)}async _loadFromStylesService(x,I){var m=`${x.serviceUrl}/${x.id}`;x=(await y(m,{query:{language:x.getLanguageParamValue(),
places:x.places,worldview:x.worldview},signal:I?.signal})).data;m=E.urlToObject(m);this._set("resourceInfo",{data:x.baseMap??{},context:{origin:"web-map",url:m}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:x.spatialReference},this.resourceInfo.context);return this._loadLayersFromJSON(this.resourceInfo.data,m,I)}static fromId(x){return(x=d.esriBasemapDefinitions[x])?x.itemId?new S({portalItem:{id:x.itemId,portal:{url:"https://www.arcgis.com"}}}):S.fromJSON(x,
{origin:x.is3d?"web-scene":"web-map"}):null}};f.__decorate([t.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(x,I,m,l){this._writeBaseLayers(x,I,l)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:r}},writer(x,I,m,l){this._writeBaseLayers(x,I,l)}}}}}})],z.prototype,"baseLayers",null);f.__decorate([t.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],z.prototype,"id",void 0);f.__decorate([t.property({type:L})],z.prototype,"portalItem",void 0);
f.__decorate([t.property()],z.prototype,"referenceLayers",null);f.__decorate([t.property({readOnly:!0})],z.prototype,"resourceInfo",void 0);f.__decorate([t.property({type:p})],z.prototype,"spatialReference",void 0);f.__decorate([t.property({type:J})],z.prototype,"style",void 0);f.__decorate([t.property()],z.prototype,"thumbnailUrl",void 0);f.__decorate([t.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],z.prototype,"title",void 0);f.__decorate([u.writer("title")],z.prototype,
"writeTitle",null);z=S=f.__decorate([a.subclass("esri.Basemap")],z);const W={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},U={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return z})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(b,f){b.castForReferenceSetter=function(y){return y};b.referenceSetter=function(y,r,D=f){r||=new D;if(r===y)return r;r.removeAll();y&&(Array.isArray(y)||"items"in y&&Array.isArray(y.items))?
r.addMany(y):y&&r.add(y);return r};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(b,f,y,r,D,z,g,n){const e=v=>{v=class extends v{constructor(...A){super(...A);this.loadError=this._loadController=null;this.loadStatus="not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(w=>
{const E=this.load.bind(this);this.load=t=>{const q=new Promise((a,u)=>{const p=D.onAbortOrThrow(t,u);this.destroyed&&u(new f("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(a,u).finally(()=>{p&&p.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const a=this._loadController=new AbortController;E({signal:a.signal})}w();return q}}));this.when(()=>{this._set("loadStatus","loaded");
this._loadController=null},w=>{this._set("loadStatus","failed");this._set("loadError",w);this._loadController=null})}destroy(){this._loadController&&(this._loadController=y.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;this._set("loadError",new f("load:cancelled","Cancelled"));
this._loadController?.abort();this._promiseProps.abort();return this}};b.__decorate([g.property({readOnly:!0})],v.prototype,"loaded",null);b.__decorate([g.property({readOnly:!0})],v.prototype,"loadError",void 0);b.__decorate([g.property({clonable:!1})],v.prototype,"loadStatus",void 0);b.__decorate([g.property({type:[z],readOnly:!0})],v.prototype,"loadWarnings",null);return v=b.__decorate([n.subclass("esri.core.Loadable")],v)};r=class extends e(r.EsriPromise){};r=b.__decorate([n.subclass("esri.core.Loadable")],
r);(function(v){v.LoadableMixin=e;v.isLoadable=function(A){return!(!A||!A.load)}})(r||={});return r})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(b,f,y,r,D){var z;(function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"})(z||={});class g{constructor(){this._resolver=r.createResolver();this._status=z.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>
{this._status=z.RESOLVED;this._cleanUp()},()=>{this._status=z.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e);this._tryResolve()}isResolved(){return this._status===z.RESOLVED}isRejected(){return this._status===z.REJECTED}isFulfilled(){return this._status!==z.PENDING}abort(){this._resolver.reject(r.createAbortError())}_cleanUp(){this._resolvingPromises=this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var e=
r.createResolver(),v=[...this._resolvingPromises,e.promise],A=this._allPromise=Promise.all(v);A.then(()=>{this.isFulfilled()||this._allPromise!==A||this._resolver.resolve()},w=>{this.isFulfilled()||this._allPromise!==A||r.isAbortError(w)||this._resolver.reject(w)});e.resolve()}}}const n=e=>{e=class extends e{constructor(...v){super(...v);this._promiseProps=new g;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(v,
A){return this._promiseProps.promise.then(()=>this).then(v,A)}catch(v){return this.when(null,v)}addResolvingPromise(v){v&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in v?v.when():v)}};return e=f.__decorate([D.subclass("esri.core.Promise")],e)};b.EsriPromise=class extends n(y){};b.EsriPromise=f.__decorate([D.subclass("esri.core.Promise")],b.EsriPromise);b.EsriPromiseMixin=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(b,f,y,r){async function D(z,g){const n=[],e=(...A)=>{for(const w of A)null!=w&&(Array.isArray(w)?e(...w):y.isCollection(w)?w.forEach(E=>e(E)):r.isLoadable(w)&&n.push(w))};g(e);let v=null;await f.map(n,async A=>{A=await f.result("loadAll"in A&&"function"===typeof A.loadAll?A.loadAll():A.load());!1!==A.ok||v||(v=A)});if(v)throw v.error;return z}b.loadAll=async function(z,g){await z.load();return D(z,g)};b.loadAllChildren=D;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A,w,E,t,q,a,u,p,F,L,d,J,Q,S){function Z(l){const B=r.id;return()=>{const P=l.deref();P&&B.findCredential(P.restUrl)&&P.signIn().catch(()=>{})}}const W=l=>Object.freeze(Object.defineProperty({__proto__:null,default:l},Symbol.toStringTag,{value:"Module"}));var U;let x;const I={PortalGroup:()=>Promise.resolve({default:L}),PortalItem:()=>new Promise((l,B)=>b(["./PortalItem"],P=>l(W(P)),B)),PortalUser:()=>Promise.resolve({default:Q})};g=U=class extends g.JSONSupportMixin(n){constructor(l){super(l);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.layoutGroupQuery=
this.galleryTemplatesGroupQuery=this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=null;this.isReadOnly=this.isPortal=!1;this.region=this.portalProperties=
this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.recycleBinEnabled=!1;this.rotatorPanels=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=y.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(l){return"string"===
typeof l?{url:l}:l}destroy(){m.unregister(this);this.defaultBasemap=e.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=e.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=e.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=e.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(l){if(l)for(const B of l)y.request.trustedServers.includes(B)||y.request.trustedServers.push(B);return l}readDefaultBasemap(l){return this._readBasemap(l)}readDefaultDevBasemap(l){return this._readBasemap(l)}readDefaultVectorBasemap(l){return this._readBasemap(l)}get extraQuery(){const l=
!this.user?.orgId||this.canSearchPublic;return this.id&&!l?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let l=this.url;if(l){const B=l.indexOf("/sharing");l=0<B?l.substring(0,B):this.url.replace(/\/+$/,"");l+="/sharing/rest"}return l}get thumbnailUrl(){const l=this.restUrl,B=this.thumbnail;return l&&B?this._normalizeSSL(l+"/portals/self/resources/"+B):null}readUrlKey(l){return l?l.toLowerCase():
l}readUser(l){let B=null;l&&(B=Q.fromJSON(l),B.portal=this);return B}load(l){const B=(new Promise((P,N)=>b(["../Basemap"],T=>P(W(T)),N))).then(({default:P})=>{v.throwIfAborted(l);x=P}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,l)).then(P=>{if(r.id){const N=r.id;this.credential=N.findCredential(this.restUrl);this.credential||this.authMode!==U.AUTH_MODE_AUTO&&this.authMode!==U.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=
N.on("credential-create",Z(new WeakRef(this))),m.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=P;this.read(P)});this.addResolvingPromise(B);return Promise.resolve(this)}async createElevationLayers(){await this.load();const l=this._getHelperService("defaultElevationLayers"),B=(await new Promise((P,N)=>b(["../layers/ElevationLayer"],T=>P(W(T)),N))).default;return l?l.map(P=>new B({id:P.id,url:P.url})):[]}async fetchBasemaps(l,B){const P=await this._fetchBasemaps(l,B);!0===
B?.include3d&&!1!==this.use3dBasemaps&&(l=await this._fetchBasemaps3D(l,B),P.unshift(...l));return P}fetchCategorySchema(l){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",l).then(B=>B.categorySchema):v.isAborted(l)?Promise.reject(v.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(l){const B=this.featuredGroups,P=new d({num:100,sortField:"title"});if(B?.length){const N=[];for(const T of B)N.push(`(title:"${T.title}" AND owner:${T.owner})`);P.query=
N.join(" OR ");return this.queryGroups(P,l).then(T=>T.results)}return v.isAborted(l)?Promise.reject(v.createAbortError()):Promise.resolve([])}fetchRegions(l){const B=this.user?.culture||this.culture||p.getLocale();return this.request(this.restUrl+"/portals/regions",{...l,query:{culture:B}})}fetchSettings(l){const B=this.user?.culture||this.culture||p.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...l,query:{culture:B}})}static getDefault(){return F.ensureDefaultPortalInstance(()=>
new U)}queryGroups(l,B){return this.queryPortal("/community/groups",l,"PortalGroup",B)}queryItems(l,B){return this.queryPortal("/search",l,"PortalItem",B)}queryUsers(l,B){l.sortField||(l.sortField="username");return this.queryPortal("/community/users",l,"PortalUser",B)}fetchSelf(l=this.authMode,B=!1,P){const N=this.restUrl+"/portals/self";l={authMode:l,query:{culture:p.getLocale().toLowerCase()},withCredentials:!0,...P};"auto"===l.authMode&&(l.authMode="no-prompt");B&&(l.query.default=!0);return this.request(N,
l)}queryPortal(l,B,P,N){const T=w.ensureType(d,B),Y=ea=>this.request(this.restUrl+l,{...T.toRequestOptions(this),...N}).then(la=>{const ra=T.clone();ra.start=la.nextStart;return new J({nextQueryParams:ra,queryParams:T,total:la.total,results:U._resultsToTypedArray(ea,{portal:this},la,N)})}).then(la=>Promise.all(la.results.map(ra=>"function"===typeof ra.when?ra.when():la)).then(()=>la,ra=>{v.throwIfAbortError(ra);return la}));return P&&I[P]?I[P]().then(({default:ea})=>{v.throwIfAborted(N);return Y(ea)}):
Y()}signIn(){if(this.authMode===U.AUTH_MODE_ANONYMOUS||this.authMode===U.AUTH_MODE_NO_PROMPT&&!r.id)return Promise.reject(new z("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const l=B=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return B||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=
B;return this.fetchSelf("immediate")});if(this.user&&this.credential===B)return null;this.credential=B;return this.fetchSelf("immediate")}).then(P=>{P&&(this.sourceJSON=P,this.read(P))});return r.id?r.id.getCredential(this.restUrl,{prompt:this.authMode!==U.AUTH_MODE_NO_PROMPT}).then(B=>l(B)):l(this.credential)}normalizeUrl(l){const B=this.credential?.token;return this._normalizeSSL(B?l+(l.includes("?")?"\x26":"?")+"token\x3d"+B:l)}requestToTypedArray(l,B,P){return this.request(l,B).then(N=>{const T=
U._resultsToTypedArray(P,{portal:this},N);return Promise.all(T.map(Y=>"function"===typeof Y.when?Y.when():N)).then(()=>T,()=>T)})}request(l,B={}){var P={f:"json",...B.query};const {authMode:N=this.authMode===U.AUTH_MODE_ANONYMOUS||this.authMode===U.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:T=null,cacheBust:Y=!1,method:ea="auto",responseType:la="json",signal:ra}=B;P={authMode:N,body:T,cacheBust:Y,method:ea,query:P,responseType:la,timeout:0,signal:ra};B.withCredentials&&(P.withCredentials=!0);return D(this._normalizeSSL(l),
P).then(da=>da.data)}toJSON(){throw new z("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(l){if(!l)return null;if(l.declaredClass)throw Error("JSON object is already hydrated");return new U({sourceJSON:l})}_getHelperService(l){const B=this.helperServices&&this.helperServices[l];if(!B)throw new z("portal:service-not-found",`The \`helperServices\` do not include an entry named "${l}"`);return B}async _fetchBasemaps(l,B){const P=new d;P.query=l||(y.apiKey&&S.supportsApiKey(this.url)?
this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);P.disableExtraQuery=!0;l=await this.queryGroups(P,B);if(!l.total)return[];l=l.results[0];P.num=100;P.query='type:"Web Map" -type:"Web Application"';P.sortField=l.sortField||"name";P.sortOrder=l.sortOrder||"desc";B=await l.queryItems(P,B);return B.total?B.results.filter(N=>"Web Map"===N.type).map(N=>new x({portalItem:N})):[]}async _fetchBasemaps3D(l,B){l=l||this.basemapGalleryGroupQuery3D;
if(!l)return[];l=new d({query:l,disableExtraQuery:!0});var P=await this.queryGroups(l,B);if(!P.total)return[];P=P.results[0];l.num=100;l.query='type:"Web Scene"';l.sortField=P.sortField||"name";l.sortOrder=P.sortOrder||"desc";B=await P.queryItems(l,B);return B.total?B.results.filter(N=>"Web Scene"===N.type).map(N=>new x({portalItem:N})):[]}_normalizeSSL(l){return l.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(l){return l?(l=x.fromJSON(l),l.portalItem={portal:this},l):null}static _resultsToTypedArray(l,
B,P,N){if(P){const T=null!=N?N.signal:null;P=P.listings||P.notifications||P.userInvitations||P.tags||P.items||P.groups||P.comments||P.provisions||P.results||P.relatedItems||P;if(l||B)P=P.map(Y=>{Y=Object.assign(l?l.fromJSON(Y):Y,B);"function"===typeof Y.load&&Y.load(T);return Y})}else P=[];return P}};g.AUTH_MODE_ANONYMOUS="anonymous";g.AUTH_MODE_AUTO="auto";g.AUTH_MODE_IMMEDIATE="immediate";g.AUTH_MODE_NO_PROMPT="no-prompt";f.__decorate([A.property()],g.prototype,"access",void 0);f.__decorate([A.property()],
g.prototype,"allSSL",void 0);f.__decorate([A.property()],g.prototype,"authMode",void 0);f.__decorate([A.property()],g.prototype,"authorizedCrossOriginDomains",void 0);f.__decorate([q.reader("authorizedCrossOriginDomains")],g.prototype,"readAuthorizedCrossOriginDomains",null);f.__decorate([A.property()],g.prototype,"basemapGalleryGroupQuery",void 0);f.__decorate([A.property({json:{name:"3DBasemapGalleryGroupQuery"}})],g.prototype,"basemapGalleryGroupQuery3D",void 0);f.__decorate([A.property()],g.prototype,
"bingKey",void 0);f.__decorate([A.property()],g.prototype,"canListApps",void 0);f.__decorate([A.property()],g.prototype,"canListData",void 0);f.__decorate([A.property()],g.prototype,"canListPreProvisionedItems",void 0);f.__decorate([A.property()],g.prototype,"canProvisionDirectPurchase",void 0);f.__decorate([A.property()],g.prototype,"canSearchPublic",void 0);f.__decorate([A.property()],g.prototype,"canShareBingPublic",void 0);f.__decorate([A.property()],g.prototype,"canSharePublic",void 0);f.__decorate([A.property()],
g.prototype,"canSignInArcGIS",void 0);f.__decorate([A.property()],g.prototype,"canSignInIDP",void 0);f.__decorate([A.property()],g.prototype,"colorSetsGroupQuery",void 0);f.__decorate([A.property()],g.prototype,"commentsEnabled",void 0);f.__decorate([A.property({type:Date})],g.prototype,"created",void 0);f.__decorate([A.property()],g.prototype,"credential",void 0);f.__decorate([A.property()],g.prototype,"culture",void 0);f.__decorate([A.property()],g.prototype,"currentVersion",void 0);f.__decorate([A.property()],
g.prototype,"customBaseUrl",void 0);f.__decorate([A.property()],g.prototype,"defaultBasemap",void 0);f.__decorate([q.reader("defaultBasemap")],g.prototype,"readDefaultBasemap",null);f.__decorate([A.property()],g.prototype,"defaultDevBasemap",void 0);f.__decorate([q.reader("defaultDevBasemap")],g.prototype,"readDefaultDevBasemap",null);f.__decorate([A.property({type:u})],g.prototype,"defaultExtent",void 0);f.__decorate([A.property()],g.prototype,"defaultVectorBasemap",void 0);f.__decorate([q.reader("defaultVectorBasemap")],
g.prototype,"readDefaultVectorBasemap",null);f.__decorate([A.property()],g.prototype,"description",void 0);f.__decorate([A.property()],g.prototype,"devBasemapGalleryGroupQuery",void 0);f.__decorate([A.property()],g.prototype,"eueiEnabled",void 0);f.__decorate([A.property({readOnly:!0})],g.prototype,"extraQuery",null);f.__decorate([A.property()],g.prototype,"featuredGroups",void 0);f.__decorate([A.property()],g.prototype,"featuredItemsGroupQuery",void 0);f.__decorate([A.property()],g.prototype,"galleryTemplatesGroupQuery",
void 0);f.__decorate([A.property()],g.prototype,"layoutGroupQuery",void 0);f.__decorate([A.property()],g.prototype,"livingAtlasGroupQuery",void 0);f.__decorate([A.property()],g.prototype,"hasCategorySchema",void 0);f.__decorate([A.property()],g.prototype,"helpBase",void 0);f.__decorate([A.property()],g.prototype,"helperServices",void 0);f.__decorate([A.property()],g.prototype,"helpMap",void 0);f.__decorate([A.property()],g.prototype,"homePageFeaturedContent",void 0);f.__decorate([A.property()],g.prototype,
"homePageFeaturedContentCount",void 0);f.__decorate([A.property()],g.prototype,"httpPort",void 0);f.__decorate([A.property()],g.prototype,"httpsPort",void 0);f.__decorate([A.property()],g.prototype,"id",void 0);f.__decorate([A.property()],g.prototype,"ipCntryCode",void 0);f.__decorate([A.property({readOnly:!0})],g.prototype,"isOrganization",null);f.__decorate([A.property()],g.prototype,"isPortal",void 0);f.__decorate([A.property()],g.prototype,"isReadOnly",void 0);f.__decorate([A.property({readOnly:!0})],
g.prototype,"itemPageUrl",null);f.__decorate([A.property()],g.prototype,"layerTemplatesGroupQuery",void 0);f.__decorate([A.property()],g.prototype,"maxTokenExpirationMinutes",void 0);f.__decorate([A.property({type:Date})],g.prototype,"modified",void 0);f.__decorate([A.property()],g.prototype,"name",void 0);f.__decorate([A.property()],g.prototype,"portalHostname",void 0);f.__decorate([A.property()],g.prototype,"portalMode",void 0);f.__decorate([A.property()],g.prototype,"portalProperties",void 0);
f.__decorate([A.property()],g.prototype,"region",void 0);f.__decorate([A.property()],g.prototype,"recycleBinEnabled",void 0);f.__decorate([A.property({readOnly:!0})],g.prototype,"restUrl",null);f.__decorate([A.property()],g.prototype,"rotatorPanels",void 0);f.__decorate([A.property()],g.prototype,"showHomePageDescription",void 0);f.__decorate([A.property()],g.prototype,"sourceJSON",void 0);f.__decorate([A.property()],g.prototype,"staticImagesUrl",void 0);f.__decorate([A.property({json:{name:"2DStylesGroupQuery"}})],
g.prototype,"stylesGroupQuery2d",void 0);f.__decorate([A.property({json:{name:"stylesGroupQuery"}})],g.prototype,"stylesGroupQuery3d",void 0);f.__decorate([A.property()],g.prototype,"supportsHostedServices",void 0);f.__decorate([A.property()],g.prototype,"symbolSetsGroupQuery",void 0);f.__decorate([A.property()],g.prototype,"templatesGroupQuery",void 0);f.__decorate([A.property()],g.prototype,"thumbnail",void 0);f.__decorate([A.property({readOnly:!0})],g.prototype,"thumbnailUrl",null);f.__decorate([A.property()],
g.prototype,"units",void 0);f.__decorate([A.property()],g.prototype,"url",void 0);f.__decorate([A.property()],g.prototype,"urlKey",void 0);f.__decorate([q.reader("urlKey")],g.prototype,"readUrlKey",null);f.__decorate([A.property()],g.prototype,"user",void 0);f.__decorate([q.reader("user")],g.prototype,"readUser",null);f.__decorate([A.property()],g.prototype,"use3dBasemaps",void 0);f.__decorate([A.property()],g.prototype,"useStandardizedQuery",void 0);f.__decorate([A.property()],g.prototype,"useVectorBasemaps",
void 0);f.__decorate([A.property()],g.prototype,"vectorBasemapGalleryGroupQuery",void 0);f=g=U=f.__decorate([a.subclass("esri.portal.Portal")],g);const m=new FinalizationRegistry(l=>{l.remove()});return f})},"esri/portal/portalDefault":function(){define(["exports"],function(b){let f;b.clearDefaultPortalInstance=function(){f=void 0};b.ensureDefaultPortalInstance=function(y){if(!f||f.destroyed)f=y();return f};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(b,f,y,r,D,z,g,n,e){var v;y=v=class extends y.JSONSupport{constructor(A){super(A);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const A=this.url,w=this.thumbnail;return A&&w&&this.portal?this.portal?.normalizeUrl(`${A}/info/${w}?f=json`):null}get url(){const A=this.portal?.restUrl;return A?A+"/community/groups/"+this.id:
null}fetchCategorySchema(A){return this.portal.request(this.url+"/categorySchema",A).then(w=>{w=w.categorySchema||[];return w.some(E=>"contentCategorySetsGroupQuery.LivingAtlas"===E.source)?this._fetchCategorySchemaSet("LivingAtlas",A):w})}fetchMembers(A){return this.portal.request(this.url+"/users",A)}getThumbnailUrl(A){let w=this.thumbnailUrl;w&&A&&(w+=`&w=${A}`);return w}toJSON(){throw new f("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(A){if(!A)return null;
if(A.declaredClass)throw Error("JSON object is already hydrated");const w=new v({sourceJSON:A});w.read(A);return w}queryItems(A,w){A=D.ensureType(e,A);const E=this.portal;if(5<parseFloat(E.currentVersion))return A=A||new e,E.queryPortal(`/content/groups/${this.id}/search`,A,"PortalItem",w);A=A?A.clone():new e;A.query="group:"+this.id+(A.query?" "+A.query:"");return E.queryItems(A,w)}_fetchCategorySchemaSet(A,w){const E=this.portal;return E.fetchSelf(E.authMode,!0,w).then(t=>{if(t=t.contentCategorySetsGroupQuery)return t=
new e({disableExtraQuery:!0,num:1,query:t}),E.queryGroups(t,w);throw new f("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(t=>{if(t.total){t=t.results[0];const q=new e({num:1,query:`typekeywords:"${A}"`});return t.queryItems(q,w)}throw new f("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(t=>t.total?t.results[0].fetchData("json",w).then(q=>{q=q?.categorySchema;return q?.length?q:[]}):[])}};b.__decorate([r.property()],
y.prototype,"access",void 0);b.__decorate([r.property({type:Date})],y.prototype,"created",void 0);b.__decorate([r.property()],y.prototype,"description",void 0);b.__decorate([r.property()],y.prototype,"id",void 0);b.__decorate([r.property()],y.prototype,"isInvitationOnly",void 0);b.__decorate([r.property({type:Date})],y.prototype,"modified",void 0);b.__decorate([r.property()],y.prototype,"owner",void 0);b.__decorate([r.property()],y.prototype,"portal",void 0);b.__decorate([r.property()],y.prototype,
"snippet",void 0);b.__decorate([r.property()],y.prototype,"sortField",void 0);b.__decorate([r.property()],y.prototype,"sortOrder",void 0);b.__decorate([r.property()],y.prototype,"sourceJSON",void 0);b.__decorate([r.property()],y.prototype,"tags",void 0);b.__decorate([r.property()],y.prototype,"thumbnail",void 0);b.__decorate([r.property({readOnly:!0})],y.prototype,"thumbnailUrl",null);b.__decorate([r.property()],y.prototype,"title",void 0);b.__decorate([r.property({readOnly:!0})],y.prototype,"url",
null);return y=v=b.__decorate([n.subclass("esri.portal.PortalGroup")],y)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(b,f,y,r,D,z,g,n,e,v,A){var w;const E=new y.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});f=w=class extends f{constructor(t){super(t);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t)}clone(){return new w({categories:this.categories?r.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,q){let a=[];this.categories&&(a=this.categories.map(F=>Array.isArray(F)?JSON.stringify(F):F));let u="";if(this.extent){var p=A.project(this.extent,v.WGS84);null!=p&&(u=`${p.xmin},${p.ymin},${p.xmax},${p.ymax}`)}p=this.query;!this.disableExtraQuery&&t.extraQuery&&(p="("+p+")"+t.extraQuery);t={categories:a,bbox:u,q:p,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(t.sortField=this.sortField.split(",").map(F=>E.toJSON(F.trim())).join(","),t.sortOrder=this.sortOrder);return{query:{...q,...t}}}};b.__decorate([D.property()],f.prototype,"categories",void 0);b.__decorate([D.property()],f.prototype,"disableExtraQuery",void 0);b.__decorate([D.property({type:e})],f.prototype,"extent",void 0);b.__decorate([D.property()],f.prototype,"filter",void 0);b.__decorate([D.property()],f.prototype,"num",void 0);b.__decorate([D.property()],
f.prototype,"query",void 0);b.__decorate([D.property()],f.prototype,"sortField",void 0);b.__decorate([D.property()],f.prototype,"sortOrder",null);b.__decorate([D.property()],f.prototype,"start",void 0);return f=w=b.__decorate([n.subclass("esri.portal.PortalQueryParams")],f)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,y,r,D,z,g){f=class extends f{constructor(n){super(n);this.total=this.results=this.queryParams=this.nextQueryParams=null}};b.__decorate([y.property()],f.prototype,"nextQueryParams",void 0);b.__decorate([y.property()],f.prototype,"queryParams",void 0);b.__decorate([y.property()],f.prototype,"results",void 0);b.__decorate([y.property()],f.prototype,"total",void 0);return f=b.__decorate([g.subclass("esri.portal.PortalQueryResult")],f)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A){var w;r=w=class extends r.JSONSupport{constructor(E){super(E);this.userType=this.userLicenseTypeId=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const E=this.url,t=this.thumbnail;return E&&t?this.portal.normalizeUrl(`${E}/info/${t}?f=json`):null}get userContentUrl(){const E=
this.portal?.restUrl;return E?`${E}/content/users/${this.username}`:null}get url(){const E=this.portal?.restUrl;return E?`${E}/community/users/${this.username}`:null}addItem(E){const t=E&&E.item;var q=E?.data;E=E?.folder;const a={method:"post"};t&&(a.query=t.createPostQuery(),null!=q&&("string"===typeof q?a.query.text=q:"object"===typeof q&&(a.query.text=JSON.stringify(q))));q=this.userContentUrl;E&&(q+="/"+("string"===typeof E?E:E.id));return this.portal.request(q+"/addItem",a).then(u=>{t.id=u.id;
t.portal=this.portal;return t.loaded?t.reload():t.load()})}async deleteItem(E,t=!1){let q=this.userContentUrl;E.ownerFolder&&(q+="/"+E.ownerFolder);await this.portal.request(q+`/items/${E.id}/delete`,{method:"post",query:t?{permanentDelete:!0}:{}});E.id=null;E.portal=null}async deleteItems(E,t=!1){E=E.concat();var q=this.userContentUrl+"/deleteItems";const a=[];var u=E.map(p=>p.id);if(u.length){t={method:"post",query:{items:u.join(","),permanentDelete:t}};q=await this.portal.request(q,t);for(const p of q.results)q=
E.find(F=>p.itemId===F.id),t=p.success,u=null,t?(q.id=null,q.portal=null):p.error&&(u=new y("portal:delete-item-failed",p.error.message,p.error)),a.push({item:q,success:t,error:u})}return a}fetchFolders(){return this.portal.request(this.userContentUrl??"",{query:{num:1}}).then(E=>E&&E.folders?E.folders.map(t=>{t=v.fromJSON(t);t.portal=this.portal;return t}):[])}fetchGroups(){return this.portal.request(this.url??"").then(E=>E&&E.groups?E.groups.map(t=>{t=A.fromJSON(t);t.portal=this.portal;return t}):
[])}async fetchItems(E){E??={};var t=this.userContentUrl??"";E.folder&&(t+="/"+E.folder.id);const {default:q}=await new Promise((a,u)=>b(["./PortalItem"],p=>a(Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"}))),u));E=await this.portal.request(t,{query:{folders:!1,inRecycleBin:E.inRecycleBin?!0:null,foldersContent:!E.folder&&E.includeSubfolderItems?!0:null,num:E.num||10,start:E.start||1,sortField:E.sortField||"created",sortOrder:E.sortOrder||"asc"}});
return E?.items?(t=E.items.map(a=>{a=q.fromJSON(a);a.portal=this.portal;return a}),await Promise.all(t.map(a=>a.load())),{items:t,nextStart:E.nextStart,total:E.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(E=>E.tags)}getThumbnailUrl(E){let t=this.thumbnailUrl;t&&E&&(t+=`&w=${E}`);return t}queryFavorites(E){return this.favGroupId?(this._favGroup||(this._favGroup=new A({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(E)):Promise.reject(new y("internal:unknown",
"Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(E,t){await this.portal.request(this.userContentUrl+`/items/${E.id}/restore`,{method:"post",query:t?{folderID:"string"===typeof t?t:t.id}:null})}toJSON(){throw new y("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(E){if(!E)return null;if(E.declaredClass)throw Error("JSON object is already hydrated");const t=new w({sourceJSON:E});t.read(E);return t}};f.__decorate([D.property()],
r.prototype,"access",void 0);f.__decorate([D.property({type:Date})],r.prototype,"created",void 0);f.__decorate([D.property()],r.prototype,"culture",void 0);f.__decorate([D.property()],r.prototype,"description",void 0);f.__decorate([D.property()],r.prototype,"email",void 0);f.__decorate([D.property()],r.prototype,"favGroupId",void 0);f.__decorate([D.property()],r.prototype,"fullName",void 0);f.__decorate([D.property({type:Date})],r.prototype,"modified",void 0);f.__decorate([D.property()],r.prototype,
"orgId",void 0);f.__decorate([D.property()],r.prototype,"portal",void 0);f.__decorate([D.property()],r.prototype,"preferredView",void 0);f.__decorate([D.property()],r.prototype,"privileges",void 0);f.__decorate([D.property()],r.prototype,"region",void 0);f.__decorate([D.property()],r.prototype,"role",void 0);f.__decorate([D.property()],r.prototype,"roleId",void 0);f.__decorate([D.property()],r.prototype,"sourceJSON",void 0);f.__decorate([D.property()],r.prototype,"thumbnail",void 0);f.__decorate([D.property({readOnly:!0})],
r.prototype,"thumbnailUrl",null);f.__decorate([D.property()],r.prototype,"units",void 0);f.__decorate([D.property({readOnly:!0})],r.prototype,"userContentUrl",null);f.__decorate([D.property({readOnly:!0})],r.prototype,"url",null);f.__decorate([D.property()],r.prototype,"username",void 0);f.__decorate([D.property()],r.prototype,"userLicenseTypeId",void 0);f.__decorate([D.property()],r.prototype,"userType",void 0);return r=w=f.__decorate([e.subclass("esri.portal.PortalUser")],r)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,y,r,D,z,g,n){y=class extends y.JSONSupport{constructor(e){super(e);this.username=this.title=this.portal=this.id=this.created=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new f("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};b.__decorate([r.property({type:Date})],y.prototype,"created",void 0);b.__decorate([r.property()],y.prototype,"id",void 0);b.__decorate([r.property()],y.prototype,
"portal",void 0);b.__decorate([r.property()],y.prototype,"title",void 0);b.__decorate([r.property({readOnly:!0})],y.prototype,"url",null);b.__decorate([r.property()],y.prototype,"username",void 0);return y=b.__decorate([n.subclass("esri.portal.PortalFolder")],y)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A,w,E,t,q,a,u){var p;const F=new Set("3DTiles Service;CSV;Feature Collection;Feature Service;Feed;GeoJson;Group Layer;Image Service;KML;Map Service;Media Layer;Scene Service;Stream Service;Vector Tile Service;WFS;WMS;WMTS".split(";")),L=new Set(["KML","GeoJson","CSV"]);D=p=class extends D.JSONSupportMixin(g){static from(d){return v.ensureClass(p,d)}constructor(d){super(d);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.categories=
this.avgRating=this.applicationProxies=this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const d=this.type,J=this.typeKeywords||[];let Q=
d;"Feature Service"===d||"Feature Collection"===d?Q=J.includes("Table")?"Table":J.includes("Route Layer")?"Route Layer":J.includes("Markup")?"Markup":"Feature Layer":"Image Service"===d?Q=J.includes("Elevation 3D Layer")?"Elevation Layer":J.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===d?Q="Scene Layer":"Video Service"===d?Q="Video Layer":"Scene Package"===d?Q="Scene Layer Package":"Stream Service"===d?Q="Feature Layer":"Geoprocessing Service"===d?Q=J.includes("Web Tool")?
"Tool":"Geoprocessing Service":"Geoenrichment Service"===d?Q="GeoEnrichment Service":"Geocoding Service"===d?Q="Locator":"Microsoft Powerpoint"===d?Q="Microsoft PowerPoint":"GeoJson"===d?Q="GeoJSON":"Globe Service"===d?Q="Globe Layer":"Vector Tile Service"===d?Q="Tile Layer":"netCDF"===d?Q="NetCDF":"Map Service"===d?Q=J.includes("Spatiotemporal")||!J.includes("Hosted Service")&&!J.includes("Tiled")||J.includes("Relational")?"Map Image Layer":"Tile Layer":d?.toLowerCase().includes("add in")?Q=d.replaceAll(/(add in)/gi,
"Add-In"):"datastore catalog service"===d?Q="Big Data File Share":"Compact Tile Package"===d?Q="Tile Package (tpkx)":"Raster function template"===d?Q="Raster Function Template":"OGCFeatureServer"===d?Q="OGC Feature Layer":"web mapping application"===d&&J.includes("configurableApp")?Q="Instant App":"Insights Page"===d?Q="Insights Report":"Excalibur Imagery Project"===d?Q="Excalibur Project":"3DTiles Service"===d?Q="3D tiles layer":"3DTiles Package"===d&&(Q="3D tiles package");return Q}readExtent(d){return d&&
d.length?new E(d[0][0],d[0][1],d[1][0],d[1][1]):null}get iconUrl(){var d=this.type?.toLowerCase()||"";const J=this.typeKeywords||[];var Q=!1,S=!1;let Z=!1,W=!1,U=!1,x=!1;Q=S=!1;0<d.indexOf("service")||"feature collection"===d||"kml"===d||"wms"===d||"wmts"===d||"wfs"===d?(Q=J.includes("Hosted Service"),"feature service"===d||"feature collection"===d||"kml"===d||"wfs"===d?(S=J.includes("Table"),Z=J.includes("Route Layer"),W=J.includes("Markup"),U=J.includes("Spatiotemporal"),x=J.includes("UtilityNetwork"),
d=U&&S?"spatiotemporaltable":S?"table":Z?"routelayer":W?"markup":U?"spatiotemporal":x?"utilitynetwork":Q?"featureshosted":"features"):"map service"===d||"wms"===d||"wmts"===d?(U=J.includes("Spatiotemporal"),S=J.includes("Relational"),d=U||S?"mapimages":Q||J.includes("Tiled")||"wmts"===d?"maptiles":"mapimages"):d="scene service"===d?J.includes("Line")?"sceneweblayerline":J.includes("3DObject")?"sceneweblayermultipatch":J.includes("Point")?"sceneweblayerpoint":J.includes("IntegratedMesh")?"sceneweblayermesh":
J.includes("PointCloud")?"sceneweblayerpointcloud":J.includes("Polygon")?"sceneweblayerpolygon":J.includes("Building")?"sceneweblayerbuilding":J.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===d?J.includes("Elevation 3D Layer")?"elevationlayer":J.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===d?"streamlayer":"vector tile service"===d?"vectortile":"datastore catalog service"===d?"datastorecollection":"geocoding service"===d?"geocodeservice":"video service"===
d?J.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===d?J.includes("Web Tool")?"tool":"layers":"geodata service"===d?"geodataservice":"3dtiles service"===d?J.includes("3DObject")?"3dobjecttileslayer":J.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):d="web map"===d||"cityengine web scene"===d?"maps":"web scene"===d?J.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===d&&J.includes("configurableApp")?
"instantapps":"web mapping application"===d||"mobile application"===d||"application"===d||"operation view"===d||"desktop application"===d?"apps":"map document"===d||"map package"===d||"published map"===d||"scene document"===d||"globe document"===d||"basemap package"===d||"mobile basemap package"===d||"mobile map package"===d||"project package"===d||"project template"===d||"pro map"===d||"layout"===d||"layer"===d&&J.includes("ArcGIS Pro")||"explorer map"===d&&J.indexOf("Explorer Document")?"mapsgray":
"service definition"===d||"shapefile"===d||"cad drawing"===d||"geojson"===d||"netcdf"===d||"administrative report"===d?"datafiles":"360 vr experience"===d?"360vr":"explorer add in"===d||"desktop add in"===d||"windows viewer add in"===d||"windows viewer configuration"===d?"appsgray":"arcgis pro add in"===d||"arcgis pro configuration"===d?"addindesktop":"pdf"===d?"pdf":"microsoft word"===d?"word":"microsoft excel"===d?"excel":"microsoft powerpoint"===d?"ppt":"rule package"===d||"file geodatabase"===
d||"sqlite geodatabase"===d||"csv collection"===d||"kml collection"===d||"windows mobile package"===d||"map template"===d||"desktop application template"===d||"gml"===d||"arcpad package"===d||"code sample"===d||"document link"===d||"earth configuration"===d||"operations dashboard add in"===d||"rules package"===d||"workflow manager package"===d||"explorer map"===d&&J.includes("Explorer Mapping Application")||J.includes("Document")?"datafilesgray":"network analysis service"===d||"geoprocessing service"===
d||"geodata service"===d||"geometry service"===d||"geoprocessing package"===d||"locator package"===d||"geoprocessing sample"===d||"workflow manager service"===d?"toolsgray":"layer"===d||"layer package"===d||"explorer layer"===d?"layersgray":"analysis model"===d?"analysismodel":"scene package"===d?"scenepackage":"3dtiles package"===d?"3dtileslayerpackage":"3dtiles service"===d?"3dtileslayer":"mobile scene package"===d?"mobilescenepackage":"tile package"===d||"compact tile package"===d?"tilepackage":
"task file"===d?"taskfile":"report template"===d?"report-template":"statistical data collection"===d?"statisticaldatacollection":"insights workbook"===d?"workbook":"insights model"===d?"insightsmodel":"insights page"===d?"insightspage":"insights theme"===d?"insightstheme":"hub initiative"===d?"hubinitiative":"hub page"===d?"hubpage":"hub site application"===d?"hubsite":"hub event"===d?"hubevent":"hub project"===d?"hubproject":"relational database connection"===d?"relationaldatabaseconnection":"big data file share"===
d?"datastorecollection":"image collection"===d?"imagecollection":"desktop style"===d?"desktopstyle":"style"===d?J.includes("Dictionary")?"dictionarystyle":"style":"dashboard"===d?"dashboard":"raster function template"===d?"rasterprocessingtemplate":"vector tile package"===d?"vectortilepackage":"ortho mapping project"===d?"orthomappingproject":"ortho mapping template"===d?"orthomappingtemplate":"solution"===d?"solutions":"geopackage"===d?"geopackage":"deep learning package"===d?"deeplearningpackage":
"real time analytic"===d?"realtimeanalytics":"big data analytic"===d?"bigdataanalytics":"feed"===d?"feed":"excalibur imagery project"===d?"excaliburimageryproject":"notebook"===d?"notebook":"storymap"===d?"storymap":"survey123 add in"===d?"survey123addin":"mission"===d?"mission":"mission report"===d?"missionreport":"mission template"===d?"missiontemplate":"quickcapture project"===d?"quickcaptureproject":"pro report"===d?"proreport":"pro report template"===d?"proreporttemplate":"urban model"===d?"urbanmodel":
"web experience"===d?"experiencebuilder":"web experience template"===d?"webexperiencetemplate":"experience builder widget"===d?"experiencebuilderwidget":"experience builder widget package"===d?"experiencebuilderwidgetpackage":"workflow"===d?"workflow":"kernel gateway connection"===d?"kernelgatewayconnection":"insights script"===d?"insightsscript":"hub initiative template"===d?"hubinitiativetemplate":"storymap theme"===d?"storymaptheme":"knowledge graph"===d?"knowledgegraph":"knowledge graph layer"===
d?"knowledgegraphlayer":"knowledge studio project"===d?"knowledgestudio":"native application"===d?"nativeapp":"native application installer"===d?"nativeappinstaller":"web link chart"===d?"linkchart":"knowledge graph web investigation"===d?"investigation":"ogcfeatureserver"===d?"features":"pro project"===d?"proproject":"insights workbook package"===d?"insightsworkbookpackage":"apache parquet"===d?"apacheparquet":"notebook code snippet library"===d?"notebookcodesnippets":"suitability model"===d?"suitabilitymodel":
"esri classifier definition"===d?"classifierdefinition":"esri classification schema"===d?"classificationschema":"insights data engineering workbook"===d?"dataengineeringworkbook":"insights data engineering model"===d?"dataengineeringmodel":"deep learning studio project"===d?"deeplearningproject":"discussion"===d?"discussion":"allsource project"===d?"allsourceproject":"api key"===d?"apikey":"data pipeline"===d?"datapipelines":"group layer"===d?(Q=J.includes("Map"))?"layergroup2d":"layergroup":"media layer"===
d?"onlinemedialayer":"form"===d?J.includes("Survey123")?"survey":"datafilesgray":"csv"===d?"csv":"image"===d?"image":"maps";return d?y.getAssetUrl("esri/images/portal/"+d+"16.png"):null}get isLayer(){return null!=this.type&&F.has(this.type)}get itemCdnUrl(){return u.toCDNUrl(this.itemUrl)}get itemPageUrl(){const d=this.portal?.itemPageUrl;return d&&this.id?`${d}?id=${this.id}`:null}get itemUrl(){const d=this.portal?.restUrl;return d&&this.id?`${d}/content/items/${this.id}`:null}get thumbnailUrl(){const d=
this.itemUrl,J=this.thumbnail;return d&&J?this.portal?.normalizeUrl(`${d}/info/${J}?f=json`)??null:null}get userItemUrl(){const d=this.portal?.restUrl;if(!d)return null;const J=this.owner||this.portal?.user?.username;return J?`${d}/content/users/${this.ownerFolder?`${J}/${this.ownerFolder}`:J}/items/${this.id}`:null}load(d){const J=this.portal??(this.portal=t.getDefault()),Q=J.load(d).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?J.request(this.itemUrl,{signal:null!=d?d.signal:null,
query:{token:this.apiKey}}):{}).then(S=>{this.sourceJSON=S;this.read(S)});this.addResolvingPromise(Q);return Promise.resolve(this)}async addRating(d){const J={method:"post",query:{}};d instanceof a&&(d=d.rating);null==d||isNaN(d)||"number"!==typeof d||(J.query.rating=d);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",J);return new a({rating:d,created:new Date})}clone(){var d={access:this.access,accessInformation:this.accessInformation,applicationProxies:z.clone(this.applicationProxies),
avgRating:this.avgRating,categories:z.clone(this.categories),created:z.clone(this.created),culture:this.culture,description:this.description,extent:z.clone(this.extent),groupCategories:z.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:z.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:z.clone(this.screenshots),
size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:z.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:z.clone(this.typeKeywords),url:this.url};this.loaded&&(d.loadStatus="loaded");d=(new p({sourceJSON:this.sourceJSON})).set(d);d._set("isOrgItem",this.isOrgItem);return d}createPostQuery(){const d=this.toJSON();for(var J of["tags","typeKeywords","categories"])d[J]=d[J]?.join(", ");({extent:J}=d);J&&(d.extent=
JSON.stringify(J));return d}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(d="json",J){return this.portal.request(this.itemUrl+"/data",{responseType:d,...J,query:{token:this.apiKey}})}async fetchRating(d){d=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...d});return null!=d.rating?(d.created=new Date(d.created),new a(d)):null}fetchRelatedItems(d,J){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",
{query:{...d,token:this.apiKey},...J},p)}getThumbnailUrl(d){let J=this.thumbnailUrl;J&&d&&(J+=`&w=${d}`);return J}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(d=>{this.sourceJSON=d;this.read(d);return this})}update(d){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const J=d?.data,Q={method:"post"};Q.query=this.createPostQuery();for(const S in Q.query)null===Q.query[S]&&(Q.query[S]="");Q.query.clearEmptyFields=!0;null!=J&&
("string"===typeof J?Q.query.text=J:"object"===typeof J&&(Q.query.text=JSON.stringify(J)));return this.portal.request(`${this.userItemUrl}/update`,Q).then(()=>this.reload())}):Promise.reject(new r("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(d){if(!this.id)throw new r("portal:item-does-not-exist","The item does not exist yet");await this.load();const {portal:J,itemUrl:Q}=this;await J.signIn();const {copyResources:S,folder:Z,tags:W,title:U}=d||{};d=
{method:"post",query:{copyPrivateResources:"all"===S,folder:"string"===typeof Z?Z:Z?.id,includeResources:!!S,tags:W?.join(","),title:U}};({itemId:d}=await J.request(`${Q}/copy`,d));return new p({id:d,portal:J})}updateThumbnail(d){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const J=d.thumbnail,Q=d.filename,S={method:"post"};if("string"===typeof J)n.isDataProtocol(J)?S.query={data:J}:S.query={url:n.makeAbsolute(J)},null!=Q&&(S.query.filename=Q);else{const Z=new FormData;null!=
Q?Z.append("file",J,Q):Z.append("file",J);S.body=Z}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,S).then(()=>this.reload())}):Promise.reject(new r("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(d={},J){const {fetchResources:Q}=await new Promise((S,Z)=>b(["./support/resourceUtils"],S,Z));return Q(this,d,J)}async addResource(d,J,Q){const {addOrUpdateResources:S}=await new Promise((Z,W)=>b(["./support/resourceUtils"],Z,W));d.portalItem=
this;await S(this,[{resource:d,content:J,compress:Q?.compress,access:Q?.access}],"add",Q);return d}async removeResource(d,J){const {removeResource:Q}=await new Promise((S,Z)=>b(["./support/resourceUtils"],S,Z));if(d.portalItem&&d.portalItem.itemUrl!==this.itemUrl)throw new r("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return Q(this,d,J)}async removeAllResources(d){const {removeAllResources:J}=await new Promise((Q,S)=>b(["./support/resourceUtils"],
Q,S));return J(this,d)}resourceFromPath(d){return new q({portalItem:this,path:d})}toJSON(){var d=this.extent;d={accessInformation:this.accessInformation,categories:z.clone(this.categories),created:this.created?.getTime(),description:this.description,extent:d&&[[d.xmin,d.ymin],[d.xmax,d.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,
tags:z.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:z.clone(this.typeKeywords),url:this.url};return z.fixJson(d)}static fromJSON(d){if(!d)return null;if(d.declaredClass)throw Error("JSON object is already hydrated");return new p({sourceJSON:d})}_getPostQuery(){const d=this.toJSON();for(const J in d)"tags"===J&&null!==d[J]&&(d[J]=d[J].join(", ")),"typeKeywords"===J&&null!==d[J]&&(d[J]=d[J].join(", ")),"extent"===J&&d[J]&&(d[J]=JSON.stringify(d[J]));return d}};
f.__decorate([e.property({type:["private","shared","org","public"]})],D.prototype,"access",void 0);f.__decorate([e.property()],D.prototype,"accessInformation",void 0);f.__decorate([e.property({type:String})],D.prototype,"apiKey",void 0);f.__decorate([e.property({json:{read:{source:"appProxies"}}})],D.prototype,"applicationProxies",void 0);f.__decorate([e.property()],D.prototype,"avgRating",void 0);f.__decorate([e.property()],D.prototype,"categories",void 0);f.__decorate([e.property({type:Date})],
D.prototype,"created",void 0);f.__decorate([e.property()],D.prototype,"culture",void 0);f.__decorate([e.property()],D.prototype,"description",void 0);f.__decorate([e.property({readOnly:!0})],D.prototype,"displayName",null);f.__decorate([e.property({type:E})],D.prototype,"extent",void 0);f.__decorate([A.reader("extent")],D.prototype,"readExtent",null);f.__decorate([e.property()],D.prototype,"groupCategories",void 0);f.__decorate([e.property({readOnly:!0})],D.prototype,"iconUrl",null);f.__decorate([e.property()],
D.prototype,"id",void 0);f.__decorate([e.property({readOnly:!0})],D.prototype,"isLayer",null);f.__decorate([e.property({type:Boolean,readOnly:!0})],D.prototype,"isOrgItem",void 0);f.__decorate([e.property()],D.prototype,"itemControl",void 0);f.__decorate([e.property({readOnly:!0})],D.prototype,"itemPageUrl",null);f.__decorate([e.property({readOnly:!0})],D.prototype,"itemUrl",null);f.__decorate([e.property()],D.prototype,"licenseInfo",void 0);f.__decorate([e.property({type:Date})],D.prototype,"modified",
void 0);f.__decorate([e.property()],D.prototype,"name",void 0);f.__decorate([e.property()],D.prototype,"numComments",void 0);f.__decorate([e.property()],D.prototype,"numRatings",void 0);f.__decorate([e.property()],D.prototype,"numViews",void 0);f.__decorate([e.property()],D.prototype,"owner",void 0);f.__decorate([e.property()],D.prototype,"ownerFolder",void 0);f.__decorate([e.property({type:t})],D.prototype,"portal",void 0);f.__decorate([e.property()],D.prototype,"screenshots",void 0);f.__decorate([e.property()],
D.prototype,"size",void 0);f.__decorate([e.property()],D.prototype,"snippet",void 0);f.__decorate([e.property()],D.prototype,"sourceJSON",void 0);f.__decorate([e.property({type:String})],D.prototype,"sourceUrl",void 0);f.__decorate([e.property({type:String})],D.prototype,"spatialReference",void 0);f.__decorate([e.property()],D.prototype,"tags",void 0);f.__decorate([e.property()],D.prototype,"thumbnail",void 0);f.__decorate([e.property({readOnly:!0})],D.prototype,"thumbnailUrl",null);f.__decorate([e.property()],
D.prototype,"title",void 0);f.__decorate([e.property()],D.prototype,"type",void 0);f.__decorate([e.property()],D.prototype,"typeKeywords",void 0);f.__decorate([e.property({type:String,json:{read(d,J){L.has(J.type)&&(J=this.portal?.restUrl,d||=J&&this.id?`${J}/content/items/${this.id}/data`:null);return d}}})],D.prototype,"url",void 0);f.__decorate([e.property({readOnly:!0})],D.prototype,"userItemUrl",null);return D=p=f.__decorate([w.subclass("esri.portal.PortalItem")],D)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A){function w(E,t){if(null==E)return E;E=E.replace(/^\/+/,"");null!=t&&z.isAbsolute(E)&&(E=z.makeRelative(E,t.itemUrl));return E?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}y=class extends y{constructor(E){super(E);this.portalItem=null}normalizeCtorArgs(E){return E?.portalItem&&E.path?{...E,path:w(E.path,E.portalItem)}:E}set path(E){null!=E&&z.isAbsolute(E)?D.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):
this._set("path",E)}_castPath(E){return w(E,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(E="json",t){const q=this.cdnUrl;if(null==q)throw new r("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");
return this.portalItem.portal.request(q,{responseType:E,query:{token:this.portalItem.apiKey},signal:t?.signal})}async update(E,t){const {addOrUpdateResources:q}=await new Promise((a,u)=>b(["./support/resourceUtils"],a,u));await q(this.portalItem,[{resource:this,content:E,compress:t?.compress,access:t?.access}],"update",t);return this}hasPath(){return null!=this.path}};f.__decorate([g.property()],y.prototype,"portalItem",void 0);f.__decorate([g.property({type:String,value:null})],y.prototype,"path",
null);f.__decorate([n.cast("path")],y.prototype,"_castPath",null);f.__decorate([g.property({type:String,readOnly:!0})],y.prototype,"url",null);f.__decorate([g.property({type:String,readOnly:!0})],y.prototype,"cdnUrl",null);f.__decorate([g.property({type:String,readOnly:!0})],y.prototype,"itemRelativeUrl",null);return y=f.__decorate([A.subclass("esri.portal.PortalItemResource")],y)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,y,r,D,z,g){f=class extends f{constructor(n){super(n);this.rating=this.created=null}};b.__decorate([y.property()],f.prototype,"created",void 0);b.__decorate([y.property()],f.prototype,"rating",void 0);return f=b.__decorate([g.subclass("esri.portal.PortalRating")],f)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils","../portal/support/urlUtils"],function(b,f,y,r){function D(p,F){var L=F?.url?.path;p&&L&&(p=y.makeAbsolute(p,L,{preserveProtocolRelative:!0}),
F.portalItem&&F.readResourcePaths&&(L=y.makeRelative(p,F.portalItem.itemUrl),null!=L&&a.test(L)&&F.readResourcePaths.push(F.portalItem.resourceFromPath(L).path)));return(p=w(p,F?.portal))&&q.test(p)?E(p):p}function z(p,F,L=b.MarkKeep.YES){p=p&&q.test(p)?t(p):p;if(null==p)return p;!y.isAbsolute(p)&&F?.blockedRelativeUrls&&F.blockedRelativeUrls.push(p);let d=y.makeAbsolute(p);if(F){var J=F.verifyItemRelativeUrls?.rootPath||F.url?.path;if(J){J=w(J,F.portal);const Q=w(d,F.portal);d=y.makeRelative(Q,J,
J);null!=d&&d!==Q&&d!==p&&F.verifyItemRelativeUrls&&F.verifyItemRelativeUrls.writtenUrls.push(d)}}d=A(d,F?.portal);y.isAbsolute(d)&&(d=y.normalize(d));F?.resources&&F?.portalItem&&!y.isAbsolute(d)&&!y.isDataProtocol(d)&&L===b.MarkKeep.YES&&F.resources.toKeep.push({resource:F.portalItem.resourceFromPath(d),compress:!1});return d}function g(p,F,L){return D(p,L)}function n(p,F,L,d){p=z(p,d);void 0!==p&&(F[L]=p)}function e(p){return(p?.match(q)??null)?.[1]??null}function v(p){p=p?.match(q)??null;if(null==
p)return null;p=p[2];const F=p.lastIndexOf("/");if(-1===F){const {path:J,extension:Q}=y.splitPathExtension(p);return{prefix:null,filename:J,extension:Q}}const {path:L,extension:d}=y.splitPathExtension(p.slice(F+1));return{prefix:p.slice(0,F),filename:L,extension:d}}function A(p,F){return F&&!F.isPortal&&F.urlKey&&F.customBaseUrl?y.changeDomain(p,`${F.urlKey}.${F.customBaseUrl}`,F.portalHostname):p}function w(p,F){if(!F||F.isPortal||!F.urlKey||!F.customBaseUrl)return p;const L=`${F.urlKey}.${F.customBaseUrl}`,
d=y.getAppUrl();return y.hasSameOrigin(d,`${d.scheme}://${L}`)?y.changeDomain(p,F.portalHostname,L):y.changeDomain(p,L,F.portalHostname)}function E(p){if(!p)return p||null;p&&f.id&&!f.id.findCredential(p)&&(p=r.normalizeArcGISOnlineOrgDomain(p),p=p.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),p=p.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),p=p.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return p}function t(p){if(!p)return p||
null;p=p.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");p=p.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(p=p.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"))&&f.id&&!f.id.findCredential(p)&&(p=r.normalizeArcGISOnlineOrgDomain(p));return p}const q=/\/items\/([^/]+)\/resources\/(.*)/,a=/^\.\/resources\//;b.MarkKeep=void 0;(function(p){p[p.YES=0]="YES";p[p.NO=1]="NO"})(b.MarkKeep||(b.MarkKeep={}));const u=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return b.MarkKeep},ensureMainOnlineDomain:A,fromCDNUrl:t,fromJSON:D,itemIdFromResourceUrl:e,prefixAndFilenameFromResourceUrl:v,read:g,toCDNUrl:E,toJSON:z,write:n},Symbol.toStringTag,{value:"Module"}));b.ensureMainOnlineDomain=A;b.fromCDNUrl=t;b.fromJSON=D;b.itemIdFromResourceUrl=e;b.persistableUrlUtils=u;b.prefixAndFilenameFromResourceUrl=v;b.read=g;b.toCDNUrl=E;b.toJSON=z;b.write=n})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(b,
f,y){b.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",
classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",
isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-vector.jpg")},
baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],
id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},
"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",
styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",
layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},
{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",
title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};b.getBasemapTitle=async function(r){if(r){var D=r.includes("-vector")?r.slice(0,r.indexOf("-vector")):
r.includes("-3d")?r.slice(0,r.indexOf("-3d")):r,z=await y.fetchMessageBundle("esri/t9n/basemaps");return z[r]||z[D]}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(b,f,y,r,D,z,g,n){const e=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
f=class extends f{constructor(v){super(v);this.places=this.language=this.id=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var v=n.getLocale().toLowerCase();switch(v){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}v=n.getLanguage(v);return"pt"===v?"pt-BR":v&&e.has(v)?v:"global"}};
b.__decorate([y.property()],f.prototype,"id",void 0);b.__decorate([y.property()],f.prototype,"language",void 0);b.__decorate([y.property()],f.prototype,"places",void 0);b.__decorate([y.property()],f.prototype,"serviceUrl",void 0);b.__decorate([y.property()],f.prototype,"worldview",void 0);return f=b.__decorate([g.subclass("esri.support.BasemapStyle")],f)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(b,f,y,r,D,z){function g(v,A){"maxScale"in v&&(A.maxScale=D.numberToJSON(v.maxScale)??void 0);"minScale"in v&&(A.minScale=D.numberToJSON(v.minScale)??void 0)}const n=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),e=new Set("catalog csv feature geo-rss geojson group imagery imagery-tile kml knowledge-graph map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
b.disableRestrictedWriting=function(v){n.add(v);e.add(v)};b.enableRestrictedWriting=function(v){n.delete(v);e.delete(v)};b.getLayerJSON=function(v,A,w){if(!v.persistenceEnabled)return null;if(!("write"in v&&v.write))return w?.messages&&w.messages.push(new f("layer:unsupported",`Layers (${v.title}, ${v.id}) of type '${v.declaredClass}' cannot be persisted`,{layer:v})),null;if(z.isFeatureCollectionLayer(v)&&!v.isTable)A=v.resourceInfo;else{if(w.restrictedWebMapWriting){var E="basemap"===w.layerContainerType?
n:"operational-layers"===w.layerContainerType?e:null;E=null!=E?E.has(v.type)&&!z.isFeatureCollectionLayer(v):!0}else E=!0;if(E)return A={},v.write(A,w)?A:null}if(null!=A){A=y.clone(A);if(w=A)z.isFeatureCollectionLayer(v)?(E=r.getDeepValue("featureCollection.layers",w)?.[0]?.layerDefinition)&&g(v,E):"group"!==v.type&&g(v,w);if(w&&(w.id=v.id,"blendMode"in v&&(w.blendMode=v.blendMode,"normal"===w.blendMode&&delete w.blendMode),w.opacity=D.numberToJSON(v.opacity)??void 0,w.title=v.title||"Layer",w.visibility=
v.visible,"legendEnabled"in v&&"wmts"!==v.type))if(z.isFeatureCollectionLayer(v)){if(w=w.featureCollection)w.showLegend=v.legendEnabled}else w.showLegend=v.legendEnabled}return A};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(b,f,y){function r(z){return"scene"===z?.type}function D(z){z=z?.type;return"imagery-tile"===z||"tile"===z||"open-street-map"===z||"vector-tile"===z||"web-tile"===
z||"wmts"===z}b.getEffectiveEditingEnabled=function(z){a:if("editingEnabled"in z)switch(z.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var g=!0;break a;default:g=!1}else g=!1;return g?"effectiveEditingEnabled"in z?z.effectiveEditingEnabled:z.editingEnabled:!1};b.getEffectiveLayerCapabilities=function(z){a:if("capabilities"in z)switch(z.type){case "catalog":case "catalog-footprint":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "sublayer":case "subtype-group":case "subtype-sublayer":case "wfs":var g=
!0;break a;default:g=!1}else g=!1;return g?"effectiveCapabilities"in z?z.effectiveCapabilities:z.capabilities:null};b.getOwningPortalUrl=async function(z,g){var n=f.id?.findServerInfo(z);if(null!=n?.currentVersion)return n.owningSystemUrl||null;n=z.toLowerCase().indexOf("/rest/services");if(-1===n)return null;z=`${z.substring(0,n)}/rest/info`;({data:g}=await y(z,{query:{f:"json"},responseType:"json",signal:null!=g?g.signal:null}));return g?.owningSystemUrl||null};b.getTileMaxtrixSetFromActiveLayer=
function(z){if(z.activeLayer){const g=z.activeLayer.tileMatrixSet;if(g)return g;if(z=z.activeLayer.tileMatrixSets)return z}return null};b.isBaseLayer=function(z){return null!=z?.parent&&"declaredClass"in z.parent&&"esri.Basemap"===z.parent.declaredClass&&z.parent.baseLayers.includes(z)};b.isBasemap3DSupportedLayer=function(z){return D(z)||r(z)};b.isBasemapSupportedTiledLayer=D;b.isFeatureCollectionLayer=function(z){return"feature"===z?.type&&!z.url&&"memory"===z.source?.type};b.isFeatureLayer=function(z){return null!=
z&&"object"===typeof z&&"type"in z&&"feature"===z.type};b.isFeatureServiceLayer=function(z){return"feature"===z?.type&&"feature-layer"===z.source?.type};b.isGraphicsLayer=function(z){return null!=z&&"object"===typeof z&&"type"in z&&"graphics"===z.type};b.isGroupLayer=function(z){return null!=z&&"type"in z&&"group"===z.type};b.isImageryTileLayer=function(z){return"imagery-tile"===z?.type};b.isIntegratedMeshLayer=function(z){return"integrated-mesh"===z||"integrated-mesh-3dtiles"===z};b.isIntegratedMeshOperationalLayer=
function(z){return"IntegratedMeshLayer"===z||"IntegratedMesh3DTilesLayer"===z};b.isKnowledgeGraphLayer=function(z){return null!=z&&"object"===typeof z&&"type"in z&&"knowledge-graph"===z.type&&"layers"in z};b.isLayerWithFeatureLayerSource=function(z){return("feature"===z?.type||"subtype-group"===z?.type)&&"feature-layer"===z.source?.type};b.isLinkChartLayer=function(z){return null!=z&&"object"===typeof z&&"type"in z&&"link-chart"===z.type&&"layers"in z};b.isMapNotesLayer=function(z){return null!=z&&
"object"===typeof z&&"type"in z&&"map-notes"===z.type&&"sublayers"in z};b.isSceneLayer=r;b.isSceneServiceLayer=function(z){z=z?.type;return"building-scene"===z||"integrated-mesh"===z||"point-cloud"===z||"scene"===z};b.isSubtypeGroupLayer=function(z){return null!=z&&"object"===typeof z&&"type"in z&&"subtype-group"===z.type&&"sublayers"in z};b.isSubtypeSublayer=function(z){return"subtype-sublayer"===z?.type};b.isTable=function(z){return null!=z&&"object"===typeof z&&"isTable"in z&&!!z.isTable};b.isTiledLayer=
function(z){z=z?.type;return"base-tile"===z||"tile"===z||"elevation"===z||"imagery-tile"===z||"base-elevation"===z||"open-street-map"===z||"wcs"===z||"web-tile"===z||"wmts"===z||"vector-tile"===z};b.isVoxelLayer=function(z){return"voxel"===z?.type};b.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};b.serializeLayerDefinitions=function(z){const g=/[:;]/,n=[];let e=!1;if(z&&(z.forEach((v,
A)=>{n.push([A,v]);!e&&g.test(v)&&(e=!0)}),0<n.length)){if(e){const v={};n.forEach(A=>{v[A[0]]=A[1]});z=JSON.stringify(v)}else{const v=[];n.forEach(A=>{v.push(A[0]+":"+A[1])});z=v.join(";")}return z}return null};b.serializeTimeOptions=function(z){if(z){var g=[];z.forEach((n,e)=>{g.push('"'+e+'":'+JSON.stringify(n))});if(g.length)return"{"+g.join(",")+"}"}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(b,
f){b.canInterpolateEffects=function(y,r){const D=y.length>r.length?y:r;return(y.length>r.length?r:y).every((z,g)=>z.type===D[g].type)};b.effectEquals=function(y,r){y=JSON.stringify(y??null);r=JSON.stringify(r??null);return y===r};b.isEffectFunctions=function(y){return(y=y[0])?"type"in y:!1};b.normalizeEffects=function(y,r){const D=y.length>r.length?y:r;y=y.length>r.length?r:y;for(r=y.length;r<D.length;r++)y.push(f.createEffectWithInitialValues(D[r]))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/effects/effects":function(){define(["exports","../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(b,f,y,r,D){function z(t,q,a){return t+(q-t)*a}function g(t){return Math.round(1E3*y.px2pt(t))/1E3}class n{constructor(t,q,a){this.strength=t;this.radius=q;this.threshold=a;this.type="bloom"}interpolate(t,q,a){this.strength=z(t.strength,q.strength,a);this.radius=z(t.radius,q.radius,a);this.threshold=z(t.threshold,q.threshold,
a)}clone(){return new n(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:g(this.radius),strength:this.strength,threshold:this.threshold}}}class e{constructor(t){this.radius=t;this.type="blur"}interpolate(t,q,a){this.radius=Math.round(z(t.radius,q.radius,a))}clone(){return new e(this.radius)}toJSON(){return{type:"blur",radius:g(this.radius)}}}class v{constructor(t,q){this.type=t;this.amount=q;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=
Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(t,q,a){this.amount=z(t.amount,q.amount,a);this._updateMatrix()}clone(){return new v(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||r.create();switch(this.type){case "brightness":this._colorMatrix=D.brightness(t,this.amount);break;case "contrast":this._colorMatrix=D.contrast(t,this.amount);break;case "grayscale":this._colorMatrix=
D.grayscale(t,this.amount);break;case "invert":this._colorMatrix=D.invert(t,this.amount);break;case "saturate":this._colorMatrix=D.saturate(t,this.amount);break;case "sepia":this._colorMatrix=D.sepia(t,this.amount)}}}class A{constructor(t,q,a,u){this.offsetX=t;this.offsetY=q;this.blurRadius=a;this.color=u;this.type="drop-shadow"}interpolate(t,q,a){this.offsetX=z(t.offsetX,q.offsetX,a);this.offsetY=z(t.offsetY,q.offsetY,a);this.blurRadius=z(t.blurRadius,q.blurRadius,a);this.color[0]=Math.round(z(t.color[0],
q.color[0],a));this.color[1]=Math.round(z(t.color[1],q.color[1],a));this.color[2]=Math.round(z(t.color[2],q.color[2],a));this.color[3]=z(t.color[3],q.color[3],a)}clone(){return new A(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];t[3]*=255;return{type:"drop-shadow",xoffset:g(this.offsetX),yoffset:g(this.offsetY),blurRadius:g(this.blurRadius),color:t}}}class w{constructor(t){this.angle=t;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();
return this._colorMatrix}interpolate(t,q,a){this.angle=z(t.angle,q.angle,a);this._updateMatrix()}clone(){return new w(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||r.create();this._colorMatrix=D.rotateHue(t,this.angle)}}class E{constructor(t){this.amount=t;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(t,q,a){this.amount=z(t.amount,q.amount,a)}clone(){return new E(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}
b.BloomEffect=n;b.BlurEffect=e;b.ColorMatrixEffect=v;b.DropShadowEffect=A;b.HueRotateEffect=w;b.OpacityEffect=E;b.createEffectWithInitialValues=function(t){switch(t.type){case "grayscale":case "sepia":case "invert":return new v(t.type,0);case "saturate":case "brightness":case "contrast":return new v(t.type,1);case "opacity":return new E(1);case "hue-rotate":return new w(0);case "blur":return new e(0);case "drop-shadow":return new A(0,0,0,[...f.getNamedColor("transparent")]);case "bloom":return new n(0,
0,1)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(b){function f(){const n=new Float32Array(16);n[0]=1;n[5]=1;n[10]=1;n[15]=1;return n}function y(n){const e=new Float32Array(16);e[0]=n[0];e[1]=n[1];e[2]=n[2];e[3]=n[3];e[4]=n[4];e[5]=n[5];e[6]=n[6];e[7]=n[7];e[8]=n[8];e[9]=n[9];e[10]=n[10];e[11]=n[11];e[12]=n[12];e[13]=n[13];e[14]=n[14];e[15]=n[15];return e}function r(n,e,v,A,w,E,t,q,a,u,p,F,L,
d,J,Q){const S=new Float32Array(16);S[0]=n;S[1]=e;S[2]=v;S[3]=A;S[4]=w;S[5]=E;S[6]=t;S[7]=q;S[8]=a;S[9]=u;S[10]=p;S[11]=F;S[12]=L;S[13]=d;S[14]=J;S[15]=Q;return S}function D(n,e){return new Float32Array(n,e,16)}const z=f(),g=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:z,clone:y,create:f,createView:D,fromValues:r},Symbol.toStringTag,{value:"Module"}));b.IDENTITY=z;b.clone=y;b.create=f;b.createView=D;b.fromValues=r;b.mat4f32=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/effects/colorMatrixFunctions":function(){define(["exports","../../core/libs/gl-matrix-2/math/mat4"],function(b,f){b.brightness=(y,r)=>{y=f.set(y,r,0,0,0,0,r,0,0,0,0,r,0,0,0,0,1);return f.transpose(y,y)};b.contrast=(y,r)=>{y=f.set(y,r,0,0,.5-.5*r,0,r,0,.5-.5*r,0,0,r,.5-.5*r,0,0,0,1);return f.transpose(y,y)};b.grayscale=(y,r)=>{r=1-r;y=f.set(y,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return f.transpose(y,
y)};b.invert=(y,r)=>{const D=1-2*r;y=f.set(y,D,0,0,r,0,D,0,r,0,0,D,r,0,0,0,1);return f.transpose(y,y)};b.rotateHue=(y,r)=>{const D=Math.sin(r*Math.PI/180);r=Math.cos(r*Math.PI/180);y=f.set(y,.213+.787*r-.213*D,.715-.715*r-.715*D,.072-.072*r+.928*D,0,.213-.213*r+.143*D,.715+.285*r+.14*D,.072-.072*r-.283*D,0,.213-.213*r-.787*D,.715-.715*r+.715*D,.072+.928*r+.072*D,0,0,0,0,1);return f.transpose(y,y)};b.saturate=(y,r)=>{y=f.set(y,.213+.787*r,.715-.715*r,.072-.072*r,0,.213-.213*r,.715+.285*r,.072-.072*
r,0,.213-.213*r,.715-.715*r,.072+.928*r,0,0,0,0,1);return f.transpose(y,y)};b.sepia=(y,r)=>{r=1-r;y=f.set(y,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return f.transpose(y,y)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(b,f,y){function r(h,G){h[0]=G[0];h[1]=G[1];h[2]=G[2];h[3]=G[3];h[4]=G[4];
h[5]=G[5];h[6]=G[6];h[7]=G[7];h[8]=G[8];h[9]=G[9];h[10]=G[10];h[11]=G[11];h[12]=G[12];h[13]=G[13];h[14]=G[14];h[15]=G[15];return h}function D(h,G,X,ba,ma,C,K,M,V,aa,ca,ha,oa,pa,ya,ta,wa){h[0]=G;h[1]=X;h[2]=ba;h[3]=ma;h[4]=C;h[5]=K;h[6]=M;h[7]=V;h[8]=aa;h[9]=ca;h[10]=ha;h[11]=oa;h[12]=pa;h[13]=ya;h[14]=ta;h[15]=wa;return h}function z(h){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function g(h,G){if(h===G){const X=G[1],
ba=G[2],ma=G[3],C=G[6],K=G[7],M=G[11];h[1]=G[4];h[2]=G[8];h[3]=G[12];h[4]=X;h[6]=G[9];h[7]=G[13];h[8]=ba;h[9]=C;h[11]=G[14];h[12]=ma;h[13]=K;h[14]=M}else h[0]=G[0],h[1]=G[4],h[2]=G[8],h[3]=G[12],h[4]=G[1],h[5]=G[5],h[6]=G[9],h[7]=G[13],h[8]=G[2],h[9]=G[6],h[10]=G[10],h[11]=G[14],h[12]=G[3],h[13]=G[7],h[14]=G[11],h[15]=G[15];return h}function n(h,G){e(h,G)||z(h);return h}function e(h,G){const X=G[0],ba=G[1],ma=G[2],C=G[3],K=G[4],M=G[5],V=G[6],aa=G[7],ca=G[8],ha=G[9],oa=G[10],pa=G[11],ya=G[12],ta=G[13],
wa=G[14];G=G[15];const Fa=X*M-ba*K,za=X*V-ma*K,Ea=X*aa-C*K,Da=ba*V-ma*M,Ba=ba*aa-C*M,La=ma*aa-C*V,Sa=ca*ta-ha*ya,Ya=ca*wa-oa*ya,Wa=ca*G-pa*ya,Na=ha*wa-oa*ta,Oa=ha*G-pa*ta,na=oa*G-pa*wa;let Ta=Fa*na-za*Oa+Ea*Na+Da*Wa-Ba*Ya+La*Sa;if(!Ta)return null;Ta=1/Ta;h[0]=(M*na-V*Oa+aa*Na)*Ta;h[1]=(ma*Oa-ba*na-C*Na)*Ta;h[2]=(ta*La-wa*Ba+G*Da)*Ta;h[3]=(oa*Ba-ha*La-pa*Da)*Ta;h[4]=(V*Wa-K*na-aa*Ya)*Ta;h[5]=(X*na-ma*Wa+C*Ya)*Ta;h[6]=(wa*Ea-ya*La-G*za)*Ta;h[7]=(ca*La-oa*Ea+pa*za)*Ta;h[8]=(K*Oa-M*Wa+aa*Sa)*Ta;h[9]=
(ba*Wa-X*Oa-C*Sa)*Ta;h[10]=(ya*Ba-ta*Ea+G*Fa)*Ta;h[11]=(ha*Ea-ca*Ba-pa*Fa)*Ta;h[12]=(M*Ya-K*Na-V*Sa)*Ta;h[13]=(X*Na-ba*Ya+ma*Sa)*Ta;h[14]=(ta*za-ya*Da-wa*Fa)*Ta;h[15]=(ca*Da-ha*za+oa*Fa)*Ta;return h}function v(h,G){const X=G[0],ba=G[1],ma=G[2],C=G[3],K=G[4],M=G[5],V=G[6],aa=G[7],ca=G[8],ha=G[9],oa=G[10],pa=G[11],ya=G[12],ta=G[13],wa=G[14];G=G[15];h[0]=M*(oa*G-pa*wa)-ha*(V*G-aa*wa)+ta*(V*pa-aa*oa);h[1]=-(ba*(oa*G-pa*wa)-ha*(ma*G-C*wa)+ta*(ma*pa-C*oa));h[2]=ba*(V*G-aa*wa)-M*(ma*G-C*wa)+ta*(ma*aa-C*
V);h[3]=-(ba*(V*pa-aa*oa)-M*(ma*pa-C*oa)+ha*(ma*aa-C*V));h[4]=-(K*(oa*G-pa*wa)-ca*(V*G-aa*wa)+ya*(V*pa-aa*oa));h[5]=X*(oa*G-pa*wa)-ca*(ma*G-C*wa)+ya*(ma*pa-C*oa);h[6]=-(X*(V*G-aa*wa)-K*(ma*G-C*wa)+ya*(ma*aa-C*V));h[7]=X*(V*pa-aa*oa)-K*(ma*pa-C*oa)+ca*(ma*aa-C*V);h[8]=K*(ha*G-pa*ta)-ca*(M*G-aa*ta)+ya*(M*pa-aa*ha);h[9]=-(X*(ha*G-pa*ta)-ca*(ba*G-C*ta)+ya*(ba*pa-C*ha));h[10]=X*(M*G-aa*ta)-K*(ba*G-C*ta)+ya*(ba*aa-C*M);h[11]=-(X*(M*pa-aa*ha)-K*(ba*pa-C*ha)+ca*(ba*aa-C*M));h[12]=-(K*(ha*wa-oa*ta)-ca*(M*
wa-V*ta)+ya*(M*oa-V*ha));h[13]=X*(ha*wa-oa*ta)-ca*(ba*wa-ma*ta)+ya*(ba*oa-ma*ha);h[14]=-(X*(M*wa-V*ta)-K*(ba*wa-ma*ta)+ya*(ba*V-ma*M));h[15]=X*(M*oa-V*ha)-K*(ba*oa-ma*ha)+ca*(ba*V-ma*M);return h}function A(h){const G=h[0],X=h[1],ba=h[2],ma=h[3],C=h[4],K=h[5],M=h[6],V=h[7],aa=h[8],ca=h[9],ha=h[10],oa=h[11],pa=h[12],ya=h[13],ta=h[14];h=h[15];return(G*K-X*C)*(ha*h-oa*ta)-(G*M-ba*C)*(ca*h-oa*ya)+(G*V-ma*C)*(ca*ta-ha*ya)+(X*M-ba*K)*(aa*h-oa*pa)-(X*V-ma*K)*(aa*ta-ha*pa)+(ba*V-ma*M)*(aa*ya-ca*pa)}function w(h,
G,X){const ba=G[0],ma=G[1],C=G[2],K=G[3],M=G[4],V=G[5],aa=G[6],ca=G[7],ha=G[8],oa=G[9],pa=G[10],ya=G[11],ta=G[12],wa=G[13],Fa=G[14];G=G[15];let za=X[0],Ea=X[1],Da=X[2],Ba=X[3];h[0]=za*ba+Ea*M+Da*ha+Ba*ta;h[1]=za*ma+Ea*V+Da*oa+Ba*wa;h[2]=za*C+Ea*aa+Da*pa+Ba*Fa;h[3]=za*K+Ea*ca+Da*ya+Ba*G;za=X[4];Ea=X[5];Da=X[6];Ba=X[7];h[4]=za*ba+Ea*M+Da*ha+Ba*ta;h[5]=za*ma+Ea*V+Da*oa+Ba*wa;h[6]=za*C+Ea*aa+Da*pa+Ba*Fa;h[7]=za*K+Ea*ca+Da*ya+Ba*G;za=X[8];Ea=X[9];Da=X[10];Ba=X[11];h[8]=za*ba+Ea*M+Da*ha+Ba*ta;h[9]=za*ma+
Ea*V+Da*oa+Ba*wa;h[10]=za*C+Ea*aa+Da*pa+Ba*Fa;h[11]=za*K+Ea*ca+Da*ya+Ba*G;za=X[12];Ea=X[13];Da=X[14];Ba=X[15];h[12]=za*ba+Ea*M+Da*ha+Ba*ta;h[13]=za*ma+Ea*V+Da*oa+Ba*wa;h[14]=za*C+Ea*aa+Da*pa+Ba*Fa;h[15]=za*K+Ea*ca+Da*ya+Ba*G;return h}function E(h,G,X){const ba=X[0],ma=X[1];X=X[2];if(G===h)h[12]=G[0]*ba+G[4]*ma+G[8]*X+G[12],h[13]=G[1]*ba+G[5]*ma+G[9]*X+G[13],h[14]=G[2]*ba+G[6]*ma+G[10]*X+G[14],h[15]=G[3]*ba+G[7]*ma+G[11]*X+G[15];else{const C=G[0],K=G[1],M=G[2],V=G[3],aa=G[4],ca=G[5],ha=G[6],oa=G[7],
pa=G[8],ya=G[9],ta=G[10],wa=G[11];h[0]=C;h[1]=K;h[2]=M;h[3]=V;h[4]=aa;h[5]=ca;h[6]=ha;h[7]=oa;h[8]=pa;h[9]=ya;h[10]=ta;h[11]=wa;h[12]=C*ba+aa*ma+pa*X+G[12];h[13]=K*ba+ca*ma+ya*X+G[13];h[14]=M*ba+ha*ma+ta*X+G[14];h[15]=V*ba+oa*ma+wa*X+G[15]}return h}function t(h,G,X){const ba=X[0],ma=X[1];X=X[2];h[0]=G[0]*ba;h[1]=G[1]*ba;h[2]=G[2]*ba;h[3]=G[3]*ba;h[4]=G[4]*ma;h[5]=G[5]*ma;h[6]=G[6]*ma;h[7]=G[7]*ma;h[8]=G[8]*X;h[9]=G[9]*X;h[10]=G[10]*X;h[11]=G[11]*X;h[12]=G[12];h[13]=G[13];h[14]=G[14];h[15]=G[15];return h}
function q(h,G,X,ba){let ma=ba[0],C=ba[1];ba=ba[2];let K=Math.sqrt(ma*ma+C*C+ba*ba);var M=void 0,V=void 0;let aa=void 0,ca=void 0,ha=void 0,oa=void 0,pa=void 0,ya=void 0,ta=void 0,wa=void 0,Fa=void 0,za=void 0,Ea=void 0,Da=void 0,Ba=void 0,La=void 0,Sa=void 0,Ya=void 0,Wa=void 0,Na=void 0,Oa=void 0,na=void 0;V=M=void 0;if(K<y.getEpsilon())return null;K=1/K;ma*=K;C*=K;ba*=K;M=Math.sin(X);V=Math.cos(X);aa=1-V;ca=G[0];ha=G[1];oa=G[2];pa=G[3];ya=G[4];ta=G[5];wa=G[6];Fa=G[7];za=G[8];Ea=G[9];Da=G[10];Ba=
G[11];La=ma*ma*aa+V;Sa=C*ma*aa+ba*M;Ya=ba*ma*aa-C*M;Wa=ma*C*aa-ba*M;Na=C*C*aa+V;Oa=ba*C*aa+ma*M;na=ma*ba*aa+C*M;M=C*ba*aa-ma*M;V=ba*ba*aa+V;h[0]=ca*La+ya*Sa+za*Ya;h[1]=ha*La+ta*Sa+Ea*Ya;h[2]=oa*La+wa*Sa+Da*Ya;h[3]=pa*La+Fa*Sa+Ba*Ya;h[4]=ca*Wa+ya*Na+za*Oa;h[5]=ha*Wa+ta*Na+Ea*Oa;h[6]=oa*Wa+wa*Na+Da*Oa;h[7]=pa*Wa+Fa*Na+Ba*Oa;h[8]=ca*na+ya*M+za*V;h[9]=ha*na+ta*M+Ea*V;h[10]=oa*na+wa*M+Da*V;h[11]=pa*na+Fa*M+Ba*V;G!==h&&(h[12]=G[12],h[13]=G[13],h[14]=G[14],h[15]=G[15]);return h}function a(h,G,X){const ba=
Math.sin(X);X=Math.cos(X);const ma=G[4],C=G[5],K=G[6],M=G[7],V=G[8],aa=G[9],ca=G[10],ha=G[11];G!==h&&(h[0]=G[0],h[1]=G[1],h[2]=G[2],h[3]=G[3],h[12]=G[12],h[13]=G[13],h[14]=G[14],h[15]=G[15]);h[4]=ma*X+V*ba;h[5]=C*X+aa*ba;h[6]=K*X+ca*ba;h[7]=M*X+ha*ba;h[8]=V*X-ma*ba;h[9]=aa*X-C*ba;h[10]=ca*X-K*ba;h[11]=ha*X-M*ba;return h}function u(h,G,X){const ba=Math.sin(X);X=Math.cos(X);const ma=G[0],C=G[1],K=G[2],M=G[3],V=G[8],aa=G[9],ca=G[10],ha=G[11];G!==h&&(h[4]=G[4],h[5]=G[5],h[6]=G[6],h[7]=G[7],h[12]=G[12],
h[13]=G[13],h[14]=G[14],h[15]=G[15]);h[0]=ma*X-V*ba;h[1]=C*X-aa*ba;h[2]=K*X-ca*ba;h[3]=M*X-ha*ba;h[8]=ma*ba+V*X;h[9]=C*ba+aa*X;h[10]=K*ba+ca*X;h[11]=M*ba+ha*X;return h}function p(h,G,X){const ba=Math.sin(X);X=Math.cos(X);const ma=G[0],C=G[1],K=G[2],M=G[3],V=G[4],aa=G[5],ca=G[6],ha=G[7];G!==h&&(h[8]=G[8],h[9]=G[9],h[10]=G[10],h[11]=G[11],h[12]=G[12],h[13]=G[13],h[14]=G[14],h[15]=G[15]);h[0]=ma*X+V*ba;h[1]=C*X+aa*ba;h[2]=K*X+ca*ba;h[3]=M*X+ha*ba;h[4]=V*X-ma*ba;h[5]=aa*X-C*ba;h[6]=ca*X-K*ba;h[7]=ha*
X-M*ba;return h}function F(h,G){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=G[0];h[13]=G[1];h[14]=G[2];h[15]=1;return h}function L(h,G){h[0]=G[0];h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=G[1];h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=G[2];h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function d(h,G,X){if(0===G)return z(h);let ba=X[0],ma=X[1];X=X[2];let C=Math.sqrt(ba*ba+ma*ma+X*X),K=void 0,M=void 0,V=void 0;if(C<y.getEpsilon())return null;C=1/C;ba*=C;ma*=C;X*=C;
K=Math.sin(G);M=Math.cos(G);V=1-M;h[0]=ba*ba*V+M;h[1]=ma*ba*V+X*K;h[2]=X*ba*V-ma*K;h[3]=0;h[4]=ba*ma*V-X*K;h[5]=ma*ma*V+M;h[6]=X*ma*V+ba*K;h[7]=0;h[8]=ba*X*V+ma*K;h[9]=ma*X*V-ba*K;h[10]=X*X*V+M;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function J(h,G){const X=Math.sin(G);G=Math.cos(G);h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=G;h[6]=X;h[7]=0;h[8]=0;h[9]=-X;h[10]=G;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function Q(h,G){const X=Math.sin(G);G=Math.cos(G);h[0]=G;h[1]=0;h[2]=-X;h[3]=0;h[4]=
0;h[5]=1;h[6]=0;h[7]=0;h[8]=X;h[9]=0;h[10]=G;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function S(h,G){const X=Math.sin(G);G=Math.cos(G);h[0]=G;h[1]=X;h[2]=0;h[3]=0;h[4]=-X;h[5]=G;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function Z(h,G,X){var ba=G[0],ma=G[1],C=G[2],K=G[3],M=ba+ba,V=ma+ma;const aa=C+C;G=ba*M;const ca=ba*V;ba*=aa;const ha=ma*V;ma*=aa;C*=aa;M*=K;V*=K;K*=aa;h[0]=1-(ha+C);h[1]=ca+K;h[2]=ba-V;h[3]=0;h[4]=ca-K;h[5]=1-(G+C);h[6]=ma+M;h[7]=
0;h[8]=ba+V;h[9]=ma-M;h[10]=1-(G+ha);h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function W(h,G){const X=Ma,ba=-G[0],ma=-G[1],C=-G[2],K=G[3],M=G[4],V=G[5],aa=G[6],ca=G[7],ha=ba*ba+ma*ma+C*C+K*K;0<ha?(X[0]=2*(M*K+ca*ba+V*C-aa*ma)/ha,X[1]=2*(V*K+ca*ma+aa*ba-M*C)/ha,X[2]=2*(aa*K+ca*C+M*ma-V*ba)/ha):(X[0]=2*(M*K+ca*ba+V*C-aa*ma),X[1]=2*(V*K+ca*ma+aa*ba-M*C),X[2]=2*(aa*K+ca*C+M*ma-V*ba));Z(h,G,X);return h}function U(h,G){h[0]=G[12];h[1]=G[13];h[2]=G[14];return h}function x(h,G){const X=G[0],
ba=G[1],ma=G[2],C=G[4],K=G[5],M=G[6],V=G[8],aa=G[9];G=G[10];h[0]=Math.sqrt(X*X+ba*ba+ma*ma);h[1]=Math.sqrt(C*C+K*K+M*M);h[2]=Math.sqrt(V*V+aa*aa+G*G);return h}function I(h,G){const X=G[0]+G[5]+G[10];let ba=0;0<X?(ba=2*Math.sqrt(X+1),h[3]=.25*ba,h[0]=(G[6]-G[9])/ba,h[1]=(G[8]-G[2])/ba,h[2]=(G[1]-G[4])/ba):G[0]>G[5]&&G[0]>G[10]?(ba=2*Math.sqrt(1+G[0]-G[5]-G[10]),h[3]=(G[6]-G[9])/ba,h[0]=.25*ba,h[1]=(G[1]+G[4])/ba,h[2]=(G[8]+G[2])/ba):G[5]>G[10]?(ba=2*Math.sqrt(1+G[5]-G[0]-G[10]),h[3]=(G[8]-G[2])/ba,
h[0]=(G[1]+G[4])/ba,h[1]=.25*ba,h[2]=(G[6]+G[9])/ba):(ba=2*Math.sqrt(1+G[10]-G[0]-G[5]),h[3]=(G[1]-G[4])/ba,h[0]=(G[8]+G[2])/ba,h[1]=(G[6]+G[9])/ba,h[2]=.25*ba);return h}function m(h,G,X,ba){var ma=G[0],C=G[1],K=G[2],M=G[3],V=ma+ma,aa=C+C,ca=K+K;G=ma*V;const ha=ma*aa;ma*=ca;const oa=C*aa;C*=ca;K*=ca;V*=M;aa*=M;M*=ca;ca=ba[0];const pa=ba[1];ba=ba[2];h[0]=(1-(oa+K))*ca;h[1]=(ha+M)*ca;h[2]=(ma-aa)*ca;h[3]=0;h[4]=(ha-M)*pa;h[5]=(1-(G+K))*pa;h[6]=(C+V)*pa;h[7]=0;h[8]=(ma+aa)*ba;h[9]=(C-V)*ba;h[10]=(1-
(G+oa))*ba;h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function l(h,G,X,ba,ma){var C=G[0],K=G[1],M=G[2],V=G[3],aa=C+C,ca=K+K,ha=M+M;G=C*aa;var oa=C*ca,pa=C*ha;C=K*ca;K*=ha;var ya=M*ha;M=V*aa;ca*=V;const ta=V*ha;var wa=ba[0],Fa=ba[1];ha=ba[2];ba=ma[0];V=ma[1];ma=ma[2];aa=(1-(C+ya))*wa;const za=(oa+ta)*wa;wa*=pa-ca;oa=(oa-ta)*Fa;ya=(1-(G+ya))*Fa;Fa*=K+M;pa=(pa+ca)*ha;K=(K-M)*ha;G=(1-(G+C))*ha;h[0]=aa;h[1]=za;h[2]=wa;h[3]=0;h[4]=oa;h[5]=ya;h[6]=Fa;h[7]=0;h[8]=pa;h[9]=K;h[10]=G;h[11]=0;
h[12]=X[0]+ba-(aa*ba+oa*V+pa*ma);h[13]=X[1]+V-(za*ba+ya*V+K*ma);h[14]=X[2]+ma-(wa*ba+Fa*V+G*ma);h[15]=1;return h}function B(h,G){var X=G[0],ba=G[1],ma=G[2];G=G[3];var C=X+X,K=ba+ba;const M=ma+ma;X*=C;const V=ba*C;ba*=K;const aa=ma*C,ca=ma*K;ma*=M;C*=G;K*=G;G*=M;h[0]=1-ba-ma;h[1]=V+G;h[2]=aa-K;h[3]=0;h[4]=V-G;h[5]=1-X-ma;h[6]=ca+C;h[7]=0;h[8]=aa+K;h[9]=ca-C;h[10]=1-X-ba;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function P(h,G,X,ba,ma,C,K){const M=1/(X-G),V=1/(ma-ba),aa=1/(C-K);h[0]=2*C*M;h[1]=
0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*C*V;h[6]=0;h[7]=0;h[8]=(X+G)*M;h[9]=(ma+ba)*V;h[10]=(K+C)*aa;h[11]=-1;h[12]=0;h[13]=0;h[14]=K*C*2*aa;h[15]=0;return h}function N(h,G,X,ba,ma){G=1/Math.tan(G/2);let C=void 0;h[0]=G/X;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=G;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[11]=-1;h[12]=0;h[13]=0;h[15]=0;null!=ma&&Infinity!==ma?(C=1/(ba-ma),h[10]=(ma+ba)*C,h[14]=2*ma*ba*C):(h[10]=-1,h[14]=-2*ba);return h}function T(h,G,X,ba){const ma=Math.tan(G.upDegrees*Math.PI/180),C=Math.tan(G.downDegrees*Math.PI/
180),K=Math.tan(G.leftDegrees*Math.PI/180);G=Math.tan(G.rightDegrees*Math.PI/180);const M=2/(K+G),V=2/(ma+C);h[0]=M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=V;h[6]=0;h[7]=0;h[8]=-((K-G)*M*.5);h[9]=(ma-C)*V*.5;h[10]=ba/(X-ba);h[11]=-1;h[12]=0;h[13]=0;h[14]=ba*X/(X-ba);h[15]=0;return h}function Y(h,G,X,ba,ma,C,K){const M=1/(G-X),V=1/(ba-ma),aa=1/(C-K);h[0]=-2*M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*V;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=2*aa;h[11]=0;h[12]=(G+X)*M;h[13]=(ma+ba)*V;h[14]=(K+C)*aa;h[15]=1;return h}
function ea(h,G,X,ba){const ma=G[0],C=G[1];G=G[2];let K=ma-X[0],M=C-X[1];X=G-X[2];var V=y.getEpsilon();if(Math.abs(K)<V&&Math.abs(M)<V&&Math.abs(X)<V)z(h);else{var aa=1/Math.sqrt(K*K+M*M+X*X);K*=aa;M*=aa;X*=aa;aa=ba[0];var ca=ba[1];V=ba[2];ba=ca*X-V*M;V=V*K-aa*X;ca=aa*M-ca*K;(aa=Math.sqrt(ba*ba+V*V+ca*ca))?(aa=1/aa,ba*=aa,V*=aa,ca*=aa):ca=V=ba=0;var ha=M*ca-X*V,oa=X*ba-K*ca,pa=K*V-M*ba;(aa=Math.sqrt(ha*ha+oa*oa+pa*pa))?(aa=1/aa,ha*=aa,oa*=aa,pa*=aa):pa=oa=ha=0;h[0]=ba;h[1]=ha;h[2]=K;h[3]=0;h[4]=V;
h[5]=oa;h[6]=M;h[7]=0;h[8]=ca;h[9]=pa;h[10]=X;h[11]=0;h[12]=-(ba*ma+V*C+ca*G);h[13]=-(ha*ma+oa*C+pa*G);h[14]=-(K*ma+M*C+X*G);h[15]=1}}function la(h,G,X,ba){const ma=G[0],C=G[1];G=G[2];var K=ba[0];const M=ba[1];var V=ba[2];ba=ma-X[0];let aa=C-X[1];X=G-X[2];let ca=ba*ba+aa*aa+X*X;0<ca&&(ca=1/Math.sqrt(ca),ba*=ca,aa*=ca,X*=ca);let ha=M*X-V*aa;V=V*ba-K*X;K=K*aa-M*ba;ca=ha*ha+V*V+K*K;0<ca&&(ca=1/Math.sqrt(ca),ha*=ca,V*=ca,K*=ca);h[0]=ha;h[1]=V;h[2]=K;h[3]=0;h[4]=aa*K-X*V;h[5]=X*ha-ba*K;h[6]=ba*V-aa*ha;
h[7]=0;h[8]=ba;h[9]=aa;h[10]=X;h[11]=0;h[12]=ma;h[13]=C;h[14]=G;h[15]=1;return h}function ra(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function da(h){return Math.sqrt(h[0]**2+h[1]**2+h[2]**2+h[3]**2+h[4]**2+h[5]**2+h[6]**2+h[7]**2+h[8]**2+h[9]**2+h[10]**2+h[11]**2+h[12]**2+h[13]**2+h[14]**2+h[15]**2)}function ka(h,G,X){h[0]=G[0]+X[0];h[1]=G[1]+X[1];h[2]=G[2]+
X[2];h[3]=G[3]+X[3];h[4]=G[4]+X[4];h[5]=G[5]+X[5];h[6]=G[6]+X[6];h[7]=G[7]+X[7];h[8]=G[8]+X[8];h[9]=G[9]+X[9];h[10]=G[10]+X[10];h[11]=G[11]+X[11];h[12]=G[12]+X[12];h[13]=G[13]+X[13];h[14]=G[14]+X[14];h[15]=G[15]+X[15];return h}function ia(h,G,X){h[0]=G[0]-X[0];h[1]=G[1]-X[1];h[2]=G[2]-X[2];h[3]=G[3]-X[3];h[4]=G[4]-X[4];h[5]=G[5]-X[5];h[6]=G[6]-X[6];h[7]=G[7]-X[7];h[8]=G[8]-X[8];h[9]=G[9]-X[9];h[10]=G[10]-X[10];h[11]=G[11]-X[11];h[12]=G[12]-X[12];h[13]=G[13]-X[13];h[14]=G[14]-X[14];h[15]=G[15]-X[15];
return h}function qa(h,G,X){h[0]=G[0]*X;h[1]=G[1]*X;h[2]=G[2]*X;h[3]=G[3]*X;h[4]=G[4]*X;h[5]=G[5]*X;h[6]=G[6]*X;h[7]=G[7]*X;h[8]=G[8]*X;h[9]=G[9]*X;h[10]=G[10]*X;h[11]=G[11]*X;h[12]=G[12]*X;h[13]=G[13]*X;h[14]=G[14]*X;h[15]=G[15]*X;return h}function ua(h,G,X,ba){h[0]=G[0]+X[0]*ba;h[1]=G[1]+X[1]*ba;h[2]=G[2]+X[2]*ba;h[3]=G[3]+X[3]*ba;h[4]=G[4]+X[4]*ba;h[5]=G[5]+X[5]*ba;h[6]=G[6]+X[6]*ba;h[7]=G[7]+X[7]*ba;h[8]=G[8]+X[8]*ba;h[9]=G[9]+X[9]*ba;h[10]=G[10]+X[10]*ba;h[11]=G[11]+X[11]*ba;h[12]=G[12]+X[12]*
ba;h[13]=G[13]+X[13]*ba;h[14]=G[14]+X[14]*ba;h[15]=G[15]+X[15]*ba;return h}function xa(h,G){return h[0]===G[0]&&h[1]===G[1]&&h[2]===G[2]&&h[3]===G[3]&&h[4]===G[4]&&h[5]===G[5]&&h[6]===G[6]&&h[7]===G[7]&&h[8]===G[8]&&h[9]===G[9]&&h[10]===G[10]&&h[11]===G[11]&&h[12]===G[12]&&h[13]===G[13]&&h[14]===G[14]&&h[15]===G[15]}function Aa(h,G){if(h===G)return!0;const X=h[0],ba=h[1],ma=h[2],C=h[3],K=h[4],M=h[5],V=h[6],aa=h[7],ca=h[8],ha=h[9],oa=h[10],pa=h[11],ya=h[12],ta=h[13],wa=h[14];h=h[15];const Fa=G[0],
za=G[1],Ea=G[2],Da=G[3],Ba=G[4],La=G[5],Sa=G[6],Ya=G[7],Wa=G[8],Na=G[9],Oa=G[10],na=G[11],Ta=G[12],Mb=G[13],nb=G[14];G=G[15];const c=y.getEpsilon();return Math.abs(X-Fa)<=c*Math.max(1,Math.abs(X),Math.abs(Fa))&&Math.abs(ba-za)<=c*Math.max(1,Math.abs(ba),Math.abs(za))&&Math.abs(ma-Ea)<=c*Math.max(1,Math.abs(ma),Math.abs(Ea))&&Math.abs(C-Da)<=c*Math.max(1,Math.abs(C),Math.abs(Da))&&Math.abs(K-Ba)<=c*Math.max(1,Math.abs(K),Math.abs(Ba))&&Math.abs(M-La)<=c*Math.max(1,Math.abs(M),Math.abs(La))&&Math.abs(V-
Sa)<=c*Math.max(1,Math.abs(V),Math.abs(Sa))&&Math.abs(aa-Ya)<=c*Math.max(1,Math.abs(aa),Math.abs(Ya))&&Math.abs(ca-Wa)<=c*Math.max(1,Math.abs(ca),Math.abs(Wa))&&Math.abs(ha-Na)<=c*Math.max(1,Math.abs(ha),Math.abs(Na))&&Math.abs(oa-Oa)<=c*Math.max(1,Math.abs(oa),Math.abs(Oa))&&Math.abs(pa-na)<=c*Math.max(1,Math.abs(pa),Math.abs(na))&&Math.abs(ya-Ta)<=c*Math.max(1,Math.abs(ya),Math.abs(Ta))&&Math.abs(ta-Mb)<=c*Math.max(1,Math.abs(ta),Math.abs(Mb))&&Math.abs(wa-nb)<=c*Math.max(1,Math.abs(wa),Math.abs(nb))&&
Math.abs(h-G)<=c*Math.max(1,Math.abs(h),Math.abs(G))}function Ka(h){const G=y.getEpsilon(),X=h[0],ba=h[1],ma=h[2],C=h[4],K=h[5],M=h[6],V=h[8],aa=h[9];h=h[10];return Math.abs(1-(X*X+C*C+V*V))<=G&&Math.abs(1-(ba*ba+K*K+aa*aa))<=G&&Math.abs(1-(ma*ma+M*M+h*h))<=G}function Ha(h){return 1===h[0]&&0===h[1]&&0===h[2]&&0===h[4]&&1===h[5]&&0===h[6]&&0===h[8]&&0===h[9]&&1===h[10]}const Ma=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:ka,adjoint:v,copy:r,determinant:A,equals:Aa,exactEquals:xa,
frob:da,fromQuat:B,fromQuat2:W,fromRotation:d,fromRotationTranslation:Z,fromRotationTranslationScale:m,fromRotationTranslationScaleOrigin:l,fromScaling:L,fromTranslation:F,fromXRotation:J,fromYRotation:Q,fromZRotation:S,frustum:P,getRotation:I,getScaling:x,getTranslation:U,hasIdentityRotation:Ha,identity:z,invert:e,invertOrIdentity:n,isOrthoNormal:Ka,lookAt:ea,mul:w,multiply:w,multiplyScalar:qa,multiplyScalarAndAdd:ua,ortho:Y,perspective:N,perspectiveFromFieldOfView:T,rotate:q,rotateX:a,rotateY:u,
rotateZ:p,scale:t,set:D,str:ra,sub:ia,subtract:ia,targetTo:la,translate:E,transpose:g},Symbol.toStringTag,{value:"Module"}));b.add=ka;b.adjoint=v;b.copy=r;b.determinant=A;b.equals=Aa;b.exactEquals=xa;b.frob=da;b.fromQuat=B;b.fromQuat2=W;b.fromRotation=d;b.fromRotationTranslation=Z;b.fromRotationTranslationScale=m;b.fromRotationTranslationScaleOrigin=l;b.fromScaling=L;b.fromTranslation=F;b.fromXRotation=J;b.fromYRotation=Q;b.fromZRotation=S;b.frustum=P;b.getRotation=I;b.getScaling=x;b.getTranslation=
U;b.hasIdentityRotation=Ha;b.identity=z;b.invert=e;b.invertOrIdentity=n;b.isOrthoNormal=Ka;b.lookAt=ea;b.mat4=f;b.mul=w;b.multiply=w;b.multiplyScalar=qa;b.multiplyScalarAndAdd=ua;b.ortho=Y;b.perspective=N;b.perspectiveFromFieldOfView=T;b.rotate=q;b.rotateX=a;b.rotateY=u;b.rotateZ=p;b.scale=t;b.set=D;b.str=ra;b.sub=ia;b.subtract=ia;b.targetTo=la;b.translate=E;b.transpose=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition",
"../rest/support/generateRendererUtils"],function(b,f,y){function r(m){return null==m||"string"===typeof m&&!m?"\x3cNull\x3e":m}function D(m){const l=null!=m.minValue||null!=m.maxValue,B=!!m.sqlExpression&&m.supportsSQLExpression;return!(null!=m.normalizationField||null!=m.normalizationType)&&!l&&!B}function z(m){const {values:l,useSampleStdDev:B,supportsNullCount:P}=m;var N=Number.POSITIVE_INFINITY;let T=Number.NEGATIVE_INFINITY,Y=null,ea=null;var la=null;let ra=null,da=0;const ka=null==m.minValue?
-Infinity:m.minValue,ia=null==m.maxValue?Infinity:m.maxValue;for(const qa of l)Number.isFinite(qa)?qa>=ka&&qa<=ia&&(Y=null===Y?qa:Y+qa,N=Math.min(N,qa),T=Math.max(T,qa),da++):"string"===typeof qa&&da++;if(da&&null!=Y){ea=Y/da;la=0;for(const qa of l)Number.isFinite(qa)&&qa>=ka&&qa<=ia&&(la+=(qa-ea)**2);ra=B?1<da?la/(da-1):0:0<da?la/da:0;la=Math.sqrt(ra)}else T=N=null;N={avg:ea,count:da,max:T,min:N,stddev:la,sum:Y,variance:ra};P&&(N.nullcount=l.length-da);m.percentileParams&&(N.median=g(l,m.percentileParams));
return N}function g(m,l){const {fieldType:B,value:P,orderBy:N,isDiscrete:T}=l,Y=n(B,"desc"===N);m=[...m].filter(da=>null!=da).sort((da,ka)=>Y(da,ka));if(0===m.length)return null;if(0>=P)return m[0];if(1<=P)return m[m.length-1];var ea=(m.length-1)*P,la=Math.floor(ea);l=la+1;ea%=1;la=m[la];const ra=m[l];return l>=m.length||T||"string"===typeof la||"string"===typeof ra?la:la*(1-ea)+ra*ea}function n(m,l){if(m){if(F.has(m))return l?x:I;if(L.has(m))return e(l,!1);if("esriFieldTypeTimestampOffset"===m)return l?
Z:S;const T=e(l,!0);if("esriFieldTypeString"===m)return T;if("esriFieldTypeGUID"===m||"esriFieldTypeGlobalID"===m)return(Y,ea)=>T(v(Y),v(ea))}const B=l?1:-1,P=l?x:I,N=e(l,!0);return(T,Y)=>"number"===typeof T&&"number"===typeof Y?P(T,Y):"string"===typeof T&&"string"===typeof Y?N(T,Y):B}function e(m,l){if(!l)return m?U:W;const B=m?J:Q;return m?(P,N)=>{const T=B(P,N);if(null!=T)return T;P=P.toUpperCase();N=N.toUpperCase();return P>N?-1:P<N?1:0}:(P,N)=>{const T=B(P,N);if(null!=T)return T;P=P.toUpperCase();
N=N.toUpperCase();return P<N?-1:P>N?1:0}}function v(m){return m.substr(24,12)+m.substr(19,4)+m.substr(16,2)+m.substr(14,2)+m.substr(11,2)+m.substr(9,2)+m.substr(6,2)+m.substr(4,2)+m.substr(2,2)+m.substr(0,2)}function A(m){return"coded-value"!==m?.type?[]:m.codedValues.map(l=>l.code)}function w(m,l){const B=t({field:l.field,normalizationType:l.normalizationType,normalizationField:l.normalizationField,classificationMethod:l.classificationMethod,standardDeviationInterval:l.standardDeviationInterval,
breakCount:l.numClasses||5});m=E(m,l.minValue,l.maxValue);return y.createGenerateRendererClassBreaks({definition:B,values:m,normalizationTotal:l.normalizationTotal})}function E(m,l,B){const P=null==l?-Infinity:l,N=null==B?Infinity:B;return m.filter(T=>Number.isFinite(T)&&T>=P&&T<=N)}function t(m){const {breakCount:l,field:B,normalizationField:P,normalizationType:N}=m,T=m.classificationMethod||"equal-interval";return new f({breakCount:l,classificationField:B,classificationMethod:T,normalizationField:"field"===
N?P:void 0,normalizationType:N,standardDeviationInterval:"standard-deviation"===T?m.standardDeviationInterval||1:void 0})}function q(m,l){const {field:B,classificationMethod:P,standardDeviationInterval:N,normalizationType:T,normalizationField:Y,normalizationTotal:ea,minValue:la,maxValue:ra}=l,da=l.numBins||10;let ka=l=null,ia=null;P&&"equal-interval"!==P||T?({classBreaks:m}=w(m,{field:B,normalizationType:T,normalizationField:Y,normalizationTotal:ea,classificationMethod:P,standardDeviationInterval:N,
minValue:la,maxValue:ra,numClasses:da}),l=m[0].minValue,ka=m[m.length-1].maxValue,ia=m.map(qa=>[qa.minValue,qa.maxValue])):(null!=la&&null!=ra?(l=la,ka=ra):(m=z({values:m,minValue:la,maxValue:ra,useSampleStdDev:!T,supportsNullCount:D({normalizationType:T,normalizationField:Y,minValue:la,maxValue:ra})}),l=m.min??null,ka=m.max??null),ia=u(l??0,ka??0,da));return{min:l,max:ka,intervals:ia}}function a(m,l){let B=-1;for(let P=m.length-1;0<=P;P--)if(l>=m[P][0]){B=P;break}return B}function u(m,l,B){const P=
(l-m)/B,N=[];let T;for(let Y=1;Y<=B;Y++)T=m+P,T=Number(T.toFixed(16)),N.push([m,Y===B?l:T]),m=T;return N}const p=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,F=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),L=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),d="min max avg stddev count sum variance nullcount median".split(" "),J=(m,l)=>null==m?null==l?0:1:
null==l?-1:null,Q=(m,l)=>null==m?null==l?0:-1:null==l?1:null,S=(m,l)=>Q(m,l)??(m===l?0:(new Date(m)).getTime()-(new Date(l)).getTime()),Z=(m,l)=>J(m,l)??(m===l?0:(new Date(l)).getTime()-(new Date(m)).getTime()),W=(m,l)=>Q(m,l)??(m===l?0:m<l?-1:1),U=(m,l)=>J(m,l)??(m===l?0:m<l?1:-1),x=(m,l)=>J(m,l)??l-m,I=(m,l)=>Q(m,l)??m-l;b.calculateClassBreaks=w;b.calculateHistogram=function(m,l){var B=q(m,l);if(null==B.min&&null==B.max)return{bins:[],minValue:B.min,maxValue:B.max,normalizationTotal:l.normalizationTotal};
const P=B.intervals,N=B.min??0;B=B.max??0;const T=P.map((Y,ea)=>({minValue:P[ea][0],maxValue:P[ea][1],count:0}));for(const Y of m)null!=Y&&Y>=N&&Y<=B&&(m=a(P,Y),-1<m&&T[m].count++);return{bins:T,minValue:N,maxValue:B,normalizationTotal:l.normalizationTotal}};b.calculatePercentile=g;b.calculateStatistics=z;b.calculateStringStatistics=function(m){const l=m.returnDistinct?[...(new Set(m.values))]:m.values;var B=l.filter(N=>null!=N).sort();const P=B.length;B={count:P,min:B[0],max:B[P-1]};m.supportsNullCount&&
(B.nullcount=l.length-P);m.percentileParams&&(B.median=g(l,m.percentileParams));return B};b.calculateUniqueValuesCount=function(m){const l={};for(let B of m){if(null==B||"string"===typeof B&&""===B.trim())B=null;null==l[B]?l[B]={count:1,data:B}:l[B].count++}return{count:l}};b.createClassBreaksDefinition=t;b.createUVResult=function(m,l,B,P){m=m.count;const N=[];if(B&&l){B=[];var T=A(l[0]);for(const Y of T)if(l[1]){T=A(l[1]);for(const ea of T)if(l[2]){T=A(l[2]);for(const la of T)B.push(`${r(Y)}${P}${r(ea)}${P}${r(la)}`)}else B.push(`${r(Y)}${P}${r(ea)}`)}else B.push(Y);
for(const Y of B)m.hasOwnProperty(Y)||(m[Y]={data:Y,count:0})}for(const Y in m)l=m[Y],N.push({value:l.data,count:l.count,label:l.label});return{uniqueValueInfos:N}};b.getAttributeComparator=n;b.getEqualIntervalBins=u;b.getNormalizedValue=function(m,l,B,P){let N=null;switch(l){case "log":0!==m&&(N=Math.log(m)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(P)&&0!==P&&(N=m/P*100);break;case "field":Number.isFinite(B)&&0!==B&&(N=m/B);break;case "natural-log":0<m&&(N=Math.log(m));break;case "square-root":0<
m&&(N=m**.5)}return N};b.isNullCountSupported=D;b.processNullValue=r;b.processSummaryStatisticsResult=function(m,l){let B;for(B in m)d.includes(B)&&(Number.isFinite(m[B])||(m[B]=null));if(!l)return m;["avg","stddev","variance"].forEach(P=>{null!=m[P]&&(m[P]=Math.ceil(m[P]??0))});return m};b.resolveCBResult=function(m,l){let B=m.classBreaks;const P=B[0]?.minValue,N=B[B.length-1]?.maxValue,T="standard-deviation"===l;B=B.map(Y=>{const ea=Y.label;Y={minValue:Y.minValue,maxValue:Y.maxValue,label:ea};if(T&&
ea){const la=ea.match(p)?.map(ra=>+ra.trim())??[];2===la.length?(Y.minStdDev=la[0],Y.maxStdDev=la[1],0>la[0]&&0<la[1]&&(Y.hasAvg=!0)):1===la.length&&(ea.includes("\x3c")?(Y.minStdDev=null,Y.maxStdDev=la[0]):ea.includes("\x3e")&&(Y.minStdDev=la[0],Y.maxStdDev=null))}return Y});return{minValue:P,maxValue:N,classBreakInfos:B,normalizationTotal:m.normalizationTotal}};b.statisticTypes=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,y,r,D,z,g,n,e){D=new f.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});f=new f.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});y=class extends y.JSONSupport{constructor(v){super(v);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(v){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",v)}set definedInterval(v){"defined-interval"===this.classificationMethod&&this._set("definedInterval",v)}};b.__decorate([n.enumeration({classBreaksDef:"class-breaks-definition"})],y.prototype,"type",void 0);b.__decorate([r.property({json:{write:!0}})],y.prototype,
"breakCount",void 0);b.__decorate([r.property({json:{write:!0}})],y.prototype,"classificationField",void 0);b.__decorate([r.property({type:String,json:{read:D.read,write:D.write}})],y.prototype,"classificationMethod",void 0);b.__decorate([r.property({json:{write:!0}})],y.prototype,"normalizationField",void 0);b.__decorate([r.property({json:{read:f.read,write:f.write}})],y.prototype,"normalizationType",void 0);b.__decorate([r.property({value:null,json:{write:!0}})],y.prototype,"standardDeviationInterval",
null);b.__decorate([r.property({value:null,json:{write:!0}})],y.prototype,"definedInterval",null);return y=b.__decorate([e.subclass("esri.rest.support.ClassBreaksDefinition")],y)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(b,f,y){b.enumeration=function(r,D={}){r=r instanceof f.JSONMap?r:new f.JSONMap(r,D);r={type:D?.ignoreUnknown??!0?r.apiValues:String,json:{type:r.jsonValues,read:D?.readOnly?!1:{reader:r.read},write:{writer:r.write}}};
void 0!==D?.readOnly&&(r.readOnly=!!D.readOnly);void 0!==D?.default&&(r.json.default=D.default);void 0!==D?.name&&(r.json.name=D.name);void 0!==D?.nonNullable&&(r.nonNullable=D.nonNullable);return y.property(r)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(b,f){function y(w){var E=w.definition;const {classificationMethod:t,normalizationType:q,definedInterval:a}=E;E=E.breakCount??
1;const u=[];var p=w.values;if(0===p.length)return[];p=p.sort((S,Z)=>S-Z);var F=p[0],L=p[p.length-1];if("equal-interval"===t)if(p.length>=E){p=(L-F)/E;w=F;for(var d=1;d<E;d++){var J=Number((F+d*p).toFixed(6));u.push({minValue:w,maxValue:J,label:r(w,J,q)});w=J}u.push({minValue:w,maxValue:L,label:r(w,L,q)})}else p.forEach(S=>{u.push({minValue:S,maxValue:S,label:r(S,S,q)})});else if("natural-breaks"===t){p=D(p);w=z(p.uniqueValues,w.valueFrequency||p.valueFrequency,E);for(d=1;d<E;d++)p.uniqueValues.length>
d&&(J=Number(p.uniqueValues[w[d]].toFixed(6)),u.push({minValue:F,maxValue:J,label:r(F,J,q)}),F=J);u.push({minValue:F,maxValue:L,label:r(F,L,q)})}else if("quantile"===t)if(p.length>=E&&F!==L){w=Math.ceil(p.length/E);d=0;for(J=1;J<E;J++){var Q=w+d-1;Q>p.length&&(Q=p.length-1);0>Q&&(Q=0);u.push({minValue:F,maxValue:p[Q],label:r(F,p[Q],q)});F=p[Q];d+=w;w=Math.ceil((p.length-d)/(E-J))}u.push({minValue:F,maxValue:L,label:r(F,L,q)})}else for(E=-1,L=0;L<p.length;L++)F=p[L],F!==E&&(E=F,u.push({minValue:E,
maxValue:F,label:r(E,F,q)}),E=F);else if("standard-deviation"===t)if(w=e(p),d=v(p,w),0===d)u.push({minValue:p[0],maxValue:p[0],label:r(p[0],p[0],q)});else{p=n(F,L,E,w,d)*d;d=0;for(J=E;1<=J;J--)Q=Number((w-(J-.5)*p).toFixed(6)),u.push({minValue:F,maxValue:Q,label:r(F,Q,q)}),F=Q,d++;J=Number((w+.5*p).toFixed(6));u.push({minValue:F,maxValue:J,label:r(F,J,q)});F=J;d++;for(Q=1;Q<=E;Q++)J=d===2*E?L:Number((w+(Q+.5)*p).toFixed(6)),u.push({minValue:F,maxValue:J,label:r(F,J,q)}),F=J,d++}else if("defined-interval"===
t){if(!a)return u;E=p[0];L=p[p.length-1];p=Math.ceil((L-E)/a);F=E;for(w=1;w<p;w++)d=Number((E+w*a).toFixed(6)),u.push({minValue:F,maxValue:d,label:r(F,d,q)}),F=d;u.push({minValue:F,maxValue:L,label:r(F,L,q)})}return u}function r(w,E,t){let q=null;return q=w===E?t&&"percent-of-total"===t?w+"%":w.toString():t&&"percent-of-total"===t?w+"% - "+E+"%":w+" - "+E}function D(w){const E=[],t=[];let q=Number.MIN_VALUE,a=1,u=-1;for(let p=0;p<w.length;p++){const F=w[p];F===q?(a++,t[u]=a):null!==F&&(E.push(F),
q=F,a=1,t.push(a),u++)}return{uniqueValues:E,valueFrequency:t}}function z(w,E,t){var q=w.length;const a=[];t>q&&(t=q);for(var u=0;u<t;u++)a.push(Math.round(u*q/t-1));a.push(q-1);u=g(a,w,E,t);q=u.mean;u=u.sdcm;var p=t,F=0,L=0;let d=0,J=0,Q=!0;for(let Z=0;2>Z&&Q;Z++){0===Z&&(Q=!1);for(var S=0;S<p-1;S++)for(;a[S+1]+1!==a[S+2];)if(a[S+1]+=1,F=A(S,a,w,E),d=F.sbMean,F=F.sbSdcm,L=A(S+1,a,w,E),J=L.sbMean,L=L.sbSdcm,F+L<u[S]+u[S+1])u[S]=F,u[S+1]=L,q[S]=d,q[S+1]=J,Q=!0;else{--a[S+1];break}for(S=p-1;0<S;S--)for(;a[S]!==
a[S-1]+1;)if(--a[S],F=A(S-1,a,w,E),d=F.sbMean,F=F.sbSdcm,L=A(S,a,w,E),J=L.sbMean,L=L.sbSdcm,F+L<u[S-1]+u[S])u[S-1]=F,u[S]=L,q[S-1]=d,q[S]=J,Q=!0;else{a[S]+=1;break}}Q&&(u=g(a,w,E,t));return a}function g(w,E,t,q){let a=[];var u=[],p=[];let F=0;const L=[],d=[];for(var J=0;J<q;J++){var Q=A(J,w,E,t);L.push(Q.sbMean);d.push(Q.sbSdcm);F+=d[J]}Q=F;for(J=!0;J||F<Q;){J=!1;a=[];for(u=0;u<q;u++)a.push(w[u]);for(p=0;p<q;p++)for(Q=w[p]+1;Q<=w[p+1];Q++)if(u=E[Q],0<p&&Q!==w[p+1]&&Math.abs(u-L[p])>Math.abs(u-L[p-
1]))w[p]=Q;else if(p<q-1&&w[p]!==Q-1&&Math.abs(u-L[p])>Math.abs(u-L[p+1])){w[p+1]=Q-1;break}Q=F;F=0;u=[];p=[];for(let S=0;S<q;S++){u.push(L[S]);p.push(d[S]);const Z=A(S,w,E,t);L[S]=Z.sbMean;d[S]=Z.sbSdcm;F+=d[S]}}if(F>Q){for(E=0;E<q;E++)w[E]=a[E],L[E]=u[E],d[E]=p[E];F=Q}return{mean:L,sdcm:d}}function n(w,E,t,q,a){w=Math.max(q-w,E-q)/a/t;return 1<=w?1:.5<=w?.5:.25}function e(w){let E=0;for(let t=0;t<w.length;t++)E+=w[t];return E/=w.length}function v(w,E){let t=0;for(let q=0;q<w.length;q++){const a=
w[q];t+=(a-E)*(a-E)}t/=w.length;return Math.sqrt(t)}function A(w,E,t,q){var a=0,u=0;for(var p=E[w]+1;p<=E[w+1];p++){const F=q[p];a+=t[p]*F;u+=F}0>=u&&f.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");a/=u;u=0;for(p=E[w]+1;p<=E[w+1];p++)u+=q[p]*(t[p]-a)**2;return{sbMean:a,sbSdcm:u}}b.createGenerateRendererClassBreaks=function(w){const {normalizationTotal:E}=w;return{classBreaks:y(w),normalizationTotal:E}};b.createGenerateRendererUniqueValues=function(w){w=
D(w);const E=[],t=w.uniqueValues.length;for(let q=0;q<t;q++){const a=w.uniqueValues[q];E.push({value:a,count:w.valueFrequency[q],label:a.toString()})}return{uniqueValues:E}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(b){b.makeEdgeCandidate=function(f,y,r,D,z,g=!1){return{objectId:f,target:y,distance:r,type:"edge",start:D,end:z,draped:g}};b.makeVertexCandidate=function(f,y,r){return{objectId:f,
target:y,distance:r,type:"vertex"}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),function(b,f,y,r,D,z,g,n,e,v){async function A(u,p,F){if(!u)return null;
var {where:L}=u;u.where=L=L?.trim();if(!L||/^1 *= *1$/.test(L)||p&&p===L)u.where=null;if(!u.geometry)return u;p=await E(u);u.distance=0;u.units=null;"esriSpatialRelEnvelopeIntersects"===u.spatialRel&&({spatialReference:L}=u.geometry,p=z.getGeometryExtent(p),p.spatialReference=L);if(p){await v.checkProjectionSupport(p.spatialReference,F);L=p.spatialReference;p=w(p,F)&&g.isExtent(p)?{spatialReference:L,rings:[[[p.xmin,p.ymin],[p.xmin,p.ymax],[p.xmax,p.ymax],[p.xmax,p.ymin],[p.xmin,p.ymin]]]}:p;L=(await n.normalizeCentralMeridian(g.fromJSON(p)))[0];
if(null==L)throw a;const d="quantizationParameters"in u&&u.quantizationParameters?.tolerance||"maxAllowableOffset"in u&&u.maxAllowableOffset||0;p=d&&w(p,F)?{densificationStep:8*d}:void 0;L=L.toJSON();p=v.project(L,L.spatialReference,F,p);if(!p)throw a;p.spatialReference=F;u.geometry=p}return u}function w(u,p){if(!u)return!1;const F=u.spatialReference;return(g.isExtent(u)||g.isPolygon(u)||g.isPolyline(u))&&!e.equals(F,p)&&!D.canProjectWithoutEngine(F,p)}async function E(u){const {distance:p,units:F}=
u,L=u.geometry;if(null==p||"vertexAttributes"in L)return L;var d=L.spatialReference;u=F?q.fromJSON(F):r.getUnitString(d);d=d&&(e.isGeographic(d)||e.isWebMercator(d))?L:await v.checkProjectionSupport(d,e.wgs84).then(()=>v.project(L,e.wgs84));return(await t())(d.spatialReference,d,p,u)}async function t(){return(await new Promise((u,p)=>b(["../../../geometry/geometryEngineJSON"],u,p))).geodesicBuffer}const q=new y.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),a=Object.freeze({});f.normalizeQuery=async function(u,p,F){const {outFields:L,orderByFields:d,groupByFieldsForStatistics:J,outStatistics:Q}=u;if(L)for(var S=0;S<L.length;S++)L[S]=L[S].trim();if(d)for(S=0;S<d.length;S++)d[S]=d[S].trim();if(J)for(S=0;S<J.length;S++)J[S]=J[S].trim();if(Q)for(S=0;S<Q.length;S++)Q[S].onStatisticField&&(Q[S].onStatisticField=Q[S].onStatisticField.trim());
u.geometry&&!u.outSR&&(u.outSR=u.geometry.spatialReference);return A(u,p,F)};f.normalizeQueryLike=A;f.queryEngineEmptyResult=a;f.unitsKebabDict=q;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),function(b,f,y,r,D,z){function g(w,E,t){const {outFields:q,orderByFields:a,returnDistinctValues:u,
outStatistics:p}=t,F=p?p.map(L=>L.outStatisticFieldName&&L.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(a&&0<a.length){const L=a.map(d=>{const J=d.toLowerCase();return J.includes(" asc")?J.split(" asc")[0]:J.includes(" desc")?J.split(" desc")[0]:d}).filter(d=>!F.includes(d));y.validateFields(w,E,L,{expressionName:"orderByFields",query:t})}if(q&&0<q.length)y.validateFields(w,E,q,{expressionName:"outFields",query:t,allowedFieldTypes:"all"});else if(u)throw new f("unsupported-query","outFields should be specified for returnDistinctValues",
{query:t});y.validateWhere(w,E,t.where,t)}function n(w,E,t){const {outStatistics:q,groupByFieldsForStatistics:a,having:u}=t;var p=a?.length,F=q?.length;if(u){if(!p||!F)throw new f("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});y.validateHaving(w,E,u,q,t)}if(F&&v(q)){F=q.map(L=>L.onStatisticField).filter(Boolean);y.validateFields(w,E,F,{expressionName:"onStatisticFields",query:t});p&&y.validateFields(w,E,a,{expressionName:"groupByFieldsForStatistics",
query:t});for(const L of q){const {onStatisticField:d,statisticType:J}=L;if(("percentile_disc"===J||"percentile_cont"===J)&&"statisticParameters"in L){if({statisticParameters:p}=L,!p)throw new f("unsupported-query","statisticParameters should be set for percentile type",{definition:L,query:t});}else w.get(d)&&"count"!==J&&"min"!==J&&"max"!==J&&y.validateFields(w,E,[d],{expressionName:`outStatistics with '${J}' statistic type`,allowedFieldTypes:A,query:t})}}}async function e(w,E,t,q){var a=[];t.valueExpression&&
({arcadeUtils:a}=await z.loadArcade(),a=a.extractFieldNames(t.valueExpression));t.field&&a.push(t.field);t.field2&&a.push(t.field2);t.field3&&a.push(t.field3);t.normalizationField&&a.push(t.normalizationField);if(!a.length&&!t.valueExpression)throw new f("unsupported-query","field or valueExpression is required",{params:t});y.validateFields(w,E,a,{expressionName:"statistics",query:q})}function v(w){return null!=w&&w.every(E=>"exceedslimit"!==E.statisticType)}const A=new Set([...y.numericFieldTypes,
...y.allDateAndTimeFieldTypes]);b.validateQuery=async function(w,{fieldsIndex:E,geometryType:t,spatialReference:q,availableFields:a}){if(0>(w.distance??0)||null!=w.geometryPrecision||w.multipatchOption&&"xyFootprint"!==w.multipatchOption||w.pixelSize||w.relationParam||w.text)throw new f("unsupported-query","Unsupported query options",{query:w});g(E,a,w);n(E,a,w);return Promise.all([D.checkSpatialQuerySupport(w,t,q),r.checkProjectionSupport(q,w.outSR)]).then(()=>w)};b.validateStatisticsQuery=async function(w,
E,{fieldsIndex:t,geometryType:q,spatialReference:a,availableFields:u}){if(0>(w.distance??0)||null!=w.geometryPrecision||w.multipatchOption||w.pixelSize||w.relationParam||w.text||w.outStatistics||w.groupByFieldsForStatistics||w.having||w.orderByFields)throw new f("unsupported-query","Unsupported query options",{query:w});g(t,u,w);return Promise.all([e(t,u,E,w),D.checkSpatialQuerySupport(w,q,a),r.checkProjectionSupport(a,w.outSR)]).then(()=>w)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(b,f,y,r,D,z,g,n,e,v,A,w){function E(){return new Promise((p,F)=>b(["../../../geometry/geometryEngineJSON"],p,F))}const t={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var q={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},a={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},u={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};f.canQueryWithRBush=function(p){if(z.isExtent(p))return!0;if(z.isPolygon(p)){for(const F of p.rings)if(5!==F.length||F[0][0]!==F[1][0]||F[0][0]!==F[4][0]||F[2][0]!==F[3][0]||F[0][1]!==F[3][1]||F[0][1]!==
F[4][1]||F[1][1]!==F[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=async function(p,F,L){const {spatialRel:d,geometry:J}=p;if(J){if(null==d||!0!==q[d])throw new y("unsupported-query","Unsupported query spatial relationship",{query:p});if(g.isValid(J.spatialReference)&&g.isValid(L)){if(null==J||!0!==a[z.getJsonType(J)])throw new y("unsupported-query","Unsupported query geometry type",{query:p});if(null==F||!0!==u[F])throw new y("unsupported-query","Unsupported layer geometry type",{query:p});
if(p.outSR)return w.checkProjectionSupport(p.geometry?.spatialReference,p.outSR)}}};f.getSpatialQueryOperator=function(p,F,L,d,J){if(z.isPolygon(F)&&"esriGeometryPoint"===L&&("esriSpatialRelIntersects"===p||"esriSpatialRelContains"===p)){const Q=e.convertFromPolygon(new v,F,!1,!1);return Promise.resolve(S=>n.polygonContainsPoint(Q,!1,!1,S))}if(z.isPolygon(F)&&"esriGeometryMultipoint"===L){const Q=e.convertFromPolygon(new v,F,!1,!1);if("esriSpatialRelContains"===p)return Promise.resolve(S=>n.polygonContainsMultipoint(Q,
!1,!1,S,d,J))}if(z.isExtent(F)&&"esriGeometryPoint"===L&&("esriSpatialRelIntersects"===p||"esriSpatialRelContains"===p))return Promise.resolve(Q=>r.extentContainsPoint(F,A.getGeometry(L,d,J,Q)));if(z.isExtent(F)&&"esriGeometryMultipoint"===L&&"esriSpatialRelContains"===p)return Promise.resolve(Q=>r.extentContainsMultipoint(F,A.getGeometry(L,d,J,Q)));if(z.isExtent(F)&&"esriSpatialRelIntersects"===p){const Q=D.getExtentIntersector(L);return Promise.resolve(S=>Q(F,A.getGeometry(L,d,J,S)))}return E().then(Q=>
{const S=Q[t[p]].bind(null,F.spatialReference,F);return Z=>S(A.getGeometry(L,d,J,Z))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(b,f){b.extentIntersectsExtent=f.extentIntersectsExtent;b.extentIntersectsMultipoint=f.extentIntersectsMultipoint;b.extentIntersectsPoint=f.extentIntersectsPoint;b.extentIntersectsPolygon=f.extentIntersectsPolygon;b.extentIntersectsPolyline=f.extentIntersectsPolyline;
b.getFeatureExtentIntersector=f.getFeatureExtentIntersector;b.isSelfIntersecting=f.isSelfIntersecting;b.segmentIntersects=f.segmentIntersects;b.getExtentIntersector=function(y){return"mesh"===y?f.extentIntersectsExtent:f.getFeatureExtentIntersector(y)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(b){function f(y,r,D,z,g){if(!y)return!1;r=r?D?4:3:D?3:2;const {coords:n,lengths:e}=y;D=!1;y=0;for(const A of e){var v=
y;for(let w=y,E=y+A*r;w<E;w+=r){v=w+r;v===E&&(v=y);const t=n[w],q=n[w+1],a=n[v];v=n[v+1];(q<g&&v>=g||v<g&&q>=g)&&t+(g-q)/(v-q)*(a-t)<z&&(D=!D)}y+=A*r}return D}b.polygonContainsCoords=f;b.polygonContainsMultipoint=function(y,r,D,z,g,n){g=g?n?4:3:n?3:2;const {coords:e,lengths:v}=z;if(!v)return!1;for(let A=0,w=0;A<v.length;A++,w+=g)if(!f(y,r,D,e[w],e[w+1]))return!1;return!0};b.polygonContainsPoint=function(y,r,D,z){return f(y,r,D,z.coords[0],z.coords[1])};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(b){function f(D,z,g,n,e){if(null!=n&&null!=e)return v=>{const A=D(v,z);v=D(v,g);return(null==A||A<=e)&&(null==v||v>=n)};if(null!=n)return v=>{v=D(v,g);return null==v||v>=n};if(null!=e)return v=>{v=D(v,z);return null==v||v<=e}}function y(D,z,g,n){if(null!=g&&null!=n&&g===n)return e=>D(e,z)===g;if(null!=g&&null!=n)return e=>{e=D(e,z);return null!=e&&e>=g&&e<=n};if(null!=g)return e=>{e=D(e,z);return null!=e&&e>=g};if(null!=
n)return e=>{e=D(e,z);return null!=e&&e<=n}}function r(){return()=>!1}b.getTimeExtent=async function(D,z){if(!D)return null;const g=z.featureAdapter,{startTimeField:n,endTimeField:e}=D;let v=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY;if(n&&e)await z.forEach(w=>{const E=g.getAttribute(w,n);w=g.getAttribute(w,e);null==E||isNaN(E)||(v=Math.min(v,E));null==w||isNaN(w)||(A=Math.max(A,w))});else{const w=n||e;await z.forEach(E=>{E=g.getAttribute(E,w);null==E||isNaN(E)||(v=Math.min(v,E),A=Math.max(A,
E))})}return{start:v,end:A}};b.getTimeOperator=function(D,z,g){if(!z||!D)return null;const {startTimeField:n,endTimeField:e}=D;if(!n&&!e)return null;const {start:v,end:A}=z;if(null===v&&null===A)return null;if(void 0===v&&void 0===A)return r();D=g.getAttributeAsTimestamp?.bind(g)??g.getAttribute.bind(g);return n&&e?f(D,n,e,v,A):y(D,n||e,v,A)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),
function(b,f,y,r,D,z,g,n){function e(t){return t.trim().toLowerCase()}function v(t){const q=new Map;if(!t.fields)return q;const a=!0===t.datesInUnknownTimezone,{timeInfo:u,editFieldsInfo:p}=t;var F=(u?"startField"in u?u.startField:u.startTimeField:"")??"";const L=(u?"endField"in u?u.endField:u.endTimeField:"")??"",d="dateFieldsTimeZone"in t?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?g.fromTimeReference(t.dateFieldsTimeReference):null,J=p?"timeZone"in p?p.timeZone??d:p.dateFieldsTimeReference?
g.fromTimeReference(p.dateFieldsTimeReference):d??g.utc:null,Q=u?"timeZone"in u?u.timeZone??d:u.timeReference?g.fromTimeReference(u.timeReference):d:null;F=new Map([[e(p?.creationDateField??""),J],[e(p?.editDateField??""),J],[e(F),Q],[e(L),Q]]);for(const {name:S,type:Z}of t.fields)E.has(Z)?q.set(S,g.unknown):"date"!==Z&&"esriFieldTypeDate"!==Z?q.set(S,null):a?q.set(S,g.unknown):(t=F.get(e(S??""))??d,q.set(S,t));return q}const A=new Map;class w{static fromJSON(t){return new w(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new w(t.fields??
[],v(t))}static fromLayerJSON(t){return new w(t.fields??[],v(t))}constructor(t=[],q){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=t||[];this._timeZoneByFieldName=q?new Map(q):null;t=[];for(const a of this.fields){q=a?.name;const u=z.normalizeFieldName(q)?.toLowerCase()??"";if(q&&u){const p=e(q);this._fieldsMap.set(q,a);this._fieldsMap.set(p,a);this._normalizedFieldsMap.set(u,
a);t.push(`${p}:${a.type}:${this._timeZoneByFieldName?.get(q)}`);z.isDateField(a)?(this.dateFields.push(a),this._dateFieldsSet.add(a)):z.isNumericField(a)&&(this._numericFieldsSet.add(a),this.numericFields.push(a));z.isObjectIDField(a)||z.isGlobalIDField(a)||(a.editable=null==a.editable||!!a.editable,a.nullable=null==a.nullable||!!a.nullable)}}t.sort();this.uid=t.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)z.isObjectIDField(t)||z.isGlobalIDField(t)||
t.nullable||void 0!==z.getFieldDefaultValue(t)||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===t?.uid}has(t){return null!=this.get(t)}get(t){if(t){var q=this._fieldsMap.get(t);if(q)return q;(q=this._fieldsMap.get(e(t))??this._normalizedFieldsMap.get(z.normalizeFieldName(t)?.toLowerCase()??""))&&this._fieldsMap.set(t,q);return q}}getTimeZone(t){t=this.get(t&&"string"!==typeof t?t.name:t);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):
"date"===t.type||"esriFieldTypeDate"===t.type?(y.getLogger("esri.layers.support.FieldsIndex").error(new b("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),g.utc):E.has(t.type)?g.unknown:null:null}getLuxonTimeZone(t){const q=this.getTimeZone(t);return q?q===g.unknown?D.UnknownTimeZone.instance:q===g.utc?n.FixedOffsetZone.utcInstance:r.getOrCreateMapValue(A,q,()=>n.IANAZone.create(q)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return z.isTimeOnlyField(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){return this.get(t)?.name??
void 0}toJSON(){return{fields:this.fields.map(t=>f.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const E=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return w})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A,w,E,t,q){function a(U){return u.has(U)?u.get(U):"number"===typeof U?U:1}b.TaskPriority=void 0;(function(U){U.RESOURCE_CONTROLLER_IMMEDIATE="immediate";U.RESOURCE_CONTROLLER="schedule";U.SLIDE="slide";U.STREAM_DATA_LOADER="stream loader";U.ELEVATION_QUERY="elevation query";U.TERRAIN_SURFACE="terrain";U.SURFACE_GEOMETRY_UPDATES="surface geometry updates";U.LOD_RENDERER="LoD renderer";U.GRAPHICS_CORE="Graphics3D";U.I3S_CONTROLLER="I3S";U.POINT_CLOUD_LAYER="point cloud";
U.FEATURE_TILE_FETCHER="feature fetcher";U.OVERLAY="overlay";U.STAGE="stage";U.GRAPHICS_DECONFLICTOR="graphics deconflictor";U.FILTER_VISIBILITY="Graphics3D filter visibility";U.SCALE_VISIBILITY="Graphics3D scale visibility";U.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";U.POINT_OF_INTEREST_FREQUENT="POI frequent";U.POINT_OF_INTEREST_INFREQUENT="POI infrequent";U.LABELER="labeler";U.FEATURE_QUERY_ENGINE="feature query";U.FEATURE_TILE_TREE="feature tile tree";U.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
U.ELEVATION_ALIGNMENT="elevation alignment";U.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";U.TEXT_TEXTURE_ATLAS="text texture atlas";U.TEXTURE_UNLOAD="texture unload";U.LINE_OF_SIGHT_TOOL="line of sight tool";U.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";U.ELEVATION_PROFILE="elevation profile";U.SNAPPING="snapping";U.SHADOW_ACCUMULATOR="shadow accumulator";U.CLOUDS_GENERATOR="clouds generator";U[U.NONE=0]="NONE";U[U.TEST_PRIO=1]="TEST_PRIO"})(b.TaskPriority||(b.TaskPriority=
{}));const u=new Map([[b.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[b.TaskPriority.RESOURCE_CONTROLLER,4],[b.TaskPriority.SLIDE,0],[b.TaskPriority.STREAM_DATA_LOADER,0],[b.TaskPriority.ELEVATION_QUERY,0],[b.TaskPriority.TERRAIN_SURFACE,1],[b.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[b.TaskPriority.LOD_RENDERER,2],[b.TaskPriority.GRAPHICS_CORE,2],[b.TaskPriority.I3S_CONTROLLER,2],[b.TaskPriority.POINT_CLOUD_LAYER,2],[b.TaskPriority.FEATURE_TILE_FETCHER,2],[b.TaskPriority.OVERLAY,4],[b.TaskPriority.STAGE,
4],[b.TaskPriority.GRAPHICS_DECONFLICTOR,4],[b.TaskPriority.FILTER_VISIBILITY,4],[b.TaskPriority.SCALE_VISIBILITY,4],[b.TaskPriority.FRUSTUM_VISIBILITY,4],[b.TaskPriority.CLOUDS_GENERATOR,4],[b.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[b.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[b.TaskPriority.LABELER,8],[b.TaskPriority.FEATURE_QUERY_ENGINE,8],[b.TaskPriority.FEATURE_TILE_TREE,16],[b.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[b.TaskPriority.ELEVATION_ALIGNMENT,12],[b.TaskPriority.ELEVATION_ALIGNMENT_SCENE,
14],[b.TaskPriority.TEXT_TEXTURE_ATLAS,12],[b.TaskPriority.TEXTURE_UNLOAD,12],[b.TaskPriority.LINE_OF_SIGHT_TOOL,16],[b.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[b.TaskPriority.SNAPPING,0],[b.TaskPriority.SHADOW_ACCUMULATOR,30]]),p=A.Milliseconds(6.5),F=A.Milliseconds(1),L=A.Milliseconds(30),d=A.Milliseconds(1E3/30),J=A.Milliseconds(100);var Q;(function(U){class x{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(l=>l.needsUpdate)}constructor(){this._updating=
v.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new z("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new m;this._state=t.RenderState.INTERACTING;this._tasks=new g;this._runQueue=new g;this._load=0;this._idleStateCallbacks=new g;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=e.watch(()=>E.SCHEDULER_LOG_SLOW_TASKS,l=>this._debug=l,e.initial);for(const l of Object.keys(b.TaskPriority))this.performanceInfo.tasks.set(b.TaskPriority[l],
new z(b.TaskPriority[l]))}destroy(){this._tasks.toArray().forEach(l=>l.remove());this._tasks.clear();D.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(l){this._updatingChanged();l&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(l,B){B=new I(this,l,B);this._tasks.push(B);this._updatingChanged();
this.performanceInfo.tasks.has(l)||this.performanceInfo.tasks.set(l,new z(l));return B}registerIdleStateCallbacks(l,B){const P={idleBegin:l,idleEnd:B};this._idleStateCallbacks.push(P);this.state===t.RenderState.IDLE&&this._idleUpdatesStartFired&&P.idleBegin();const N=this;return{remove:()=>this._removeIdleStateCallbacks(P),set idleBegin(T){N._idleUpdatesStartFired&&(P.idleEnd(),N._state===t.RenderState.IDLE&&T());P.idleBegin=T},set idleEnd(T){P.idleEnd=T}}}get load(){return this._load}set state(l){this._state!==
l&&(this._state=l,this.state!==t.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(B=>B.idleEnd())))}get state(){return this._state}updateBudget(l){++this._frameNumber;let B=p,P=l.frameDuration,N=F;switch(this.state){case t.RenderState.IDLE:B=A.Milliseconds(0);P=A.Milliseconds(Math.max(J,l.frameDuration));N=L;break;case t.RenderState.INTERACTING:P=A.Milliseconds(Math.max(d,l.frameDuration))}P=A.Milliseconds(P-l.elapsedFrameTime-B);if(this.state!==
t.RenderState.IDLE&&P<F&&!this._forceTask)return this._forceTask=!0,!1;P=A.Milliseconds(Math.max(P,N));this._budget.reset(P,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case t.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(l=>l.idleBegin()));this._runIdle();break;case t.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}}stopFrame(){this._budget.reset(A.Milliseconds(0),
this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(l){this._idleUpdatesStartFired&&l.idleEnd();this._idleStateCallbacks.removeUnordered(l)}removeTask(l){this._tasks.removeUnordered(l);this._runQueue.removeUnordered(l);this._updatingChanged()}_updateTask(l){this._tasks.forAll(B=>{B.name===l&&B.setPriority(l)})}_getState(l){if(this._runQueue.some(P=>P.name===l))return b.TaskState.SCHEDULED;let B=b.TaskState.IDLE;this._tasks.forAll(P=>{P.name===l&&P.needsUpdate&&(1>=P.schedulePriority?
B=b.TaskState.READY:B!==b.TaskState.READY&&(B=b.TaskState.WAITING))});return B}_getRuntime(l){let B=0;this._tasks.forAll(P=>{P.name===l&&(B+=P.runtime)});return B}_resetRuntimes(){this._tasks.forAll(l=>l.runtime=0)}_getRunning(){const l=new Map;this._tasks.forAll(P=>{P.needsUpdate&&l.set(P.name,(l.get(P.name)||0)+1)});if(0===l.size)return null;let B="";l.forEach((P,N)=>{B=1<P?B+` ${P}x ${N}`:B+` ${N}`});return B}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const l=
this._tasks.reduce((B,P)=>P.needsUpdate?++B:B,0);this._load=.9*this._load+l*(1-.9)}_schedule(){this._runQueue.filterInPlace(l=>{if(l.needsUpdate)return!0;l.schedulePriority=l.basePriority;return!1});for(this._tasks.forAll(l=>{0===l.basePriority&&l.needsUpdate&&!this._runQueue.includes(l)&&l.blockFrame!==this._frameNumber&&this._runQueue.unshift(l)});0===this._runQueue.length;){let l=!1;this._tasks.forAll(B=>{if(B.needsUpdate&&0!==B.schedulePriority&&0!==B.basePriority&&B.blockFrame!==this._frameNumber)switch(l=
!0,B.schedulePriority){case 1:B.schedulePriority=0;this._runQueue.push(B);break;default:--B.schedulePriority}});if(!l)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const l=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var B=this._budget.now();const P=this._runQueue.pop();this._budget.resetProgress();try{P.task.runTask(this._budget)===q.Yield&&(P.blockFrame=this._frameNumber)}catch(N){r.getLogger("esri.views.support.Scheduler").error(`Exception in task "${P.name}"`,
N),P.blockFrame=this._frameNumber}!this._budget.hasProgressed&&P.blockFrame!==this._frameNumber&&P.needsUpdate&&(P.blockFrame=this._frameNumber);P.schedulePriority=P.basePriority;B=this._budget.now()-B;P.runtime+=B;this._frameTaskTimes.set(P.priority,this._frameTaskTimes.get(P.priority)+B);if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-l);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-l)}_startFrameTaskTimes(){for(const l of Object.keys(b.TaskPriority))this._frameTaskTimes.set(b.TaskPriority[l],
0)}_recordFrameTaskTimes(l){this._frameTaskTimes.forEach((B,P)=>this.performanceInfo.tasks.get(P).record(B));this.performanceInfo.total.record(l)}get test(){}}U.Scheduler=x;class I{get task(){return this._task.value}get updating(){return this._queue.running}constructor(l,B,P){this._scheduler=l;this.name=B;this.runtime=this.blockFrame=0;this._queue=new w.PromiseQueue;this._handles=new f;this.schedulePriority=this._basePriority=a(B);this._task=v.signal(null!=P?P:this._queue);this._handles.add(e.when(()=>
this.task.running,N=>l.taskRunningChanged(N)))}remove(){this.processQueue(S);this._scheduler.removeTask(this);this.schedule=W.schedule;this.reschedule=W.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(l){if(this.name!==l){this.name=l;l=a(l);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=l;this._basePriority=l}}get priority(){return this.name}set priority(l){this.setPriority(l)}get needsUpdate(){return this.updating||this.task.running}schedule(l,
B,P){return this._queue.push(l,B,P)}reschedule(l,B,P){return this._queue.unshift(l,B,P)}processQueue(l){return this._queue.runTask(l)}}class m{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=t.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(l){if(this.done)return!1;!0===l()&&this.madeProgress();return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=
this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(l){this._enabled=l}reset(l,B){this._begin=this.now();this._budget=l;this._state=B;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._done=this._progressed=!1}get hasProgressed(){return this._progressed}}U.Budget=m})(Q||={});b.TaskState=void 0;(function(U){U.SCHEDULED=
"s";U.READY="r";U.WAITING="w";U.IDLE="i"})(b.TaskState||(b.TaskState={}));const S=(()=>{const U=new Q.Budget;U.enabled=!1;return U})();class Z{remove(){}processQueue(){}schedule(U,x,I){try{if(n.isAborted(x)){const m=n.createAbortError();return I?Promise.resolve(I(m)):Promise.reject(m)}return n.when(U(S))}catch(m){return Promise.reject(m)}}reschedule(U,x,I){return this.schedule(U,x,I)}}const W=new Z;b.ImmediateTask=W;b.getTaskPriority=a;b.newScheduler=function(){return new Q.Scheduler};b.noBudget=
S;b.taskPriorities=u;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(b,f,y,r){class D{constructor(z,g){this._observable=new r.SimpleObservable;this._value=z;this._equalityFunction=g}get value(){y.trackAccess(this._observable);return this._value}set value(z){this._equalityFunction(z,this._value)||(this._value=z,this._observable.notify())}mutate(z){z(this._value);
this._observable.notify()}}b.signal=function(z,g=f.equalsShallow){return new D(z,g)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(b,f,y,r){class D{constructor(){this._tasks=[];this._runningTasks=y.signal(0)}get length(){return this._tasks.length}get running(){return 0<this._runningTasks.value}destroy(){this.cancelAll()}runTask(g){if(0===
this.length)return r.Yield;for(;!g.done&&this._process(g);)g.madeProgress()}push(g,n,e){++this._runningTasks.value;return(new Promise((v,A)=>this._tasks.push(new z(v,A,g,n,e)))).finally(()=>--this._runningTasks.value)}unshift(g,n,e){++this._runningTasks.value;return(new Promise((v,A)=>this._tasks.unshift(new z(v,A,g,n,e)))).finally(()=>--this._runningTasks.value)}_process(g){if(0===this._tasks.length)return!1;const n=this._tasks.shift();try{const e=f.isAborted(n.signal);if(e&&!n.abortCallback)n.reject(f.createAbortError());
else{const v=e?n.abortCallback?.(f.createAbortError()):n.callback(g);f.isPromiseLike(v)?v.then(n.resolve,n.reject):n.resolve(v)}}catch(e){n.reject(e)}return!0}cancelAll(){const g=f.createAbortError();for(const n of this._tasks)if(n.abortCallback){const e=n.abortCallback(g);n.resolve(e)}else n.reject(g);this._tasks.length=0}}class z{constructor(g,n,e,v,A){this.resolve=g;this.reject=n;this.callback=e;this.signal=v;this.abortCallback=A}}b.PromiseQueue=D;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/support/Yield":function(){define(["exports"],function(b){const f=Symbol("Yield");b.Yield=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,y,r,D,z,g){f=class extends f{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=
this.SCHEDULER_LOG_SLOW_TASKS=!1}};b.__decorate([y.property()],f.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);b.__decorate([y.property()],f.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);f=b.__decorate([g.subclass("esri.views.support.debugFlags")],f);return new f})},"esri/views/support/RenderState":function(){define(["exports"],function(b){b.RenderState=void 0;var f=b.RenderState||(b.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]=
"IDLE";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define("exports ../../../../core/date ../../../../core/Error ../../../../geometry/support/spatialReferenceUtils ../../OptimizedFeature ../../OptimizedGeometry ../../../support/fieldUtils".split(" "),function(b,f,y,r,D,z,g){function*n(d){switch(d.type){case "Feature":yield d;break;case "FeatureCollection":for(const J of d.features)J&&(yield J)}}function*e(d){if(d)switch(d.type){case "Point":yield d.coordinates;
break;case "LineString":case "MultiPoint":yield*d.coordinates;break;case "MultiLineString":case "Polygon":for(const J of d.coordinates)yield*J;break;case "MultiPolygon":for(const J of d.coordinates)for(const Q of J)yield*Q}}function*v(d,J={}){const {geometryType:Q,objectIdField:S}=J;for(const Z of d){const {geometry:W,properties:U,id:x}=Z;if(W&&L[W.type]!==Q)continue;d=U||{};let I=void 0;S&&(I=d[S],null==x||I||(d[S]=I=x));yield new D.OptimizedFeature(W?t(new z,W,J):null,d,null,I??void 0)}}function A(d){for(const J of d)if(2<
J.length)return!0;return!1}function w(d){let J=0;for(let Q=0;Q<d.length;Q++){const S=d[Q],Z=d[(Q+1)%d.length];J+=S[0]*Z[1]-Z[0]*S[1]}return 0>=J}function E(d){const J=d[0],Q=d[d.length-1];J[0]===Q[0]&&J[1]===Q[1]&&J[2]===Q[2]||d.push(J);return d}function t(d,J,Q){switch(J.type){case "LineString":return u(d,J.coordinates,Q),d;case "MultiLineString":for(const Z of J.coordinates)u(d,Z,Q);return d;case "MultiPoint":return u(d,J.coordinates,Q),d;case "MultiPolygon":for(var S of J.coordinates)for(q(d,S[0],
Q),J=1;J<S.length;J++)a(d,S[J],Q);return d;case "Point":return F(d,J.coordinates,Q),d;case "Polygon":S=J.coordinates;q(d,S[0],Q);for(J=1;J<S.length;J++)a(d,S[J],Q);return d}}function q(d,J,Q){J=E(J);w(J)?u(d,J,Q):p(d,J,Q)}function a(d,J,Q){J=E(J);w(J)?p(d,J,Q):u(d,J,Q)}function u(d,J,Q){for(const S of J)F(d,S,Q);d.lengths.push(J.length)}function p(d,J,Q){for(let S=J.length-1;0<=S;S--)F(d,J[S],Q);d.lengths.push(J.length)}function F(d,J,Q){const [S,Z,W]=J;d.coords.push(S,Z);Q.hasZ&&d.coords.push(W||
0)}const L={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};b.createOptimizedFeatures=function(d,J){return Array.from(v(n(d),J))};b.getGeometryType=function(d){return L[d]};b.inferLayerProperties=function(d,J={}){const Q=[];var S=new Set;const Z=new Set;var W=!1;let U=null,x=!1,I=void 0;({geometryType:J=null}=J);var m=!1;for(const l of n(d)){const {geometry:B,
properties:P,id:N}=l;if(B&&(J||=L[B.type],L[B.type]!==J))continue;W||(W=e(B),W=A(W));!x&&(x=null!=N)&&(I=typeof N,P&&(U=Object.keys(P).filter(T=>P[T]===N)));P&&U&&x&&null!=N&&(1<U.length?U=U.filter(T=>P[T]===N):1===U.length&&(U=P[U[0]]===N?U:[]));if(!m&&P){d=!0;for(const T in P){if(S.has(T))continue;m=P[T];if(null==m){d=!1;Z.add(T);continue}a:switch(typeof m){case "string":m=f.isISO8601Date(m)?"esriFieldTypeDate":"esriFieldTypeString";break a;case "number":m="esriFieldTypeDouble";break a;default:m=
"unknown"}if("unknown"===m){Z.add(T);continue}Z.delete(T);S.add(T);const Y=g.normalizeFieldName(T);Y&&Q.push({name:Y,alias:T,type:m})}m=d}}if(S=g.normalizeFieldName(1===U?.length&&U[0]||null)??void 0)for(const l of Q)if(l.name===S&&g.isNumericField(l)){l.type="esriFieldTypeOID";break}return{fields:Q,geometryType:J,hasZ:W,objectIdFieldName:S,objectIdFieldType:I,unknownFields:Array.from(Z)}};b.validateGeoJSON=function(d,J=4326){if(!d)throw new y("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==
d.type&&"FeatureCollection"!==d.type)throw new y("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:d});({crs:d}=d);if(d){var Q="string"===typeof d?d:"name"===d.type?d.properties.name:"EPSG"===d.type?d.properties.code:null;J=r.isWGS84({wkid:J})?RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${J})$`,"i");if(!Q||!J.test(Q))throw new y("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:d});}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/core/date":function(){define(["exports"],function(b){function f(g){const n=new Date(g);if(Number.isNaN(n.getTime()))g=!1;else{var e=!0;if(z&&/\d+\W*$/.test(g)&&(g=g.match(/[a-zA-Z]{2,}/))){e=!1;let v=0;for(;!e&&v<=g.length;)e=!D.test(g[v]),v++;e=!e}g=e}return g?Number.isNaN(n.getTime())?null:n.getTime()-6E4*n.getTimezoneOffset():null}function y(g){g=r.exec(g);if(!g?.groups)return null;g=g.groups;const n=+g.year,e=+g.month-1,v=+g.day,A=+(g.hours??0),w=+(g.minutes??0),E=+(g.seconds??0);if(23<
A||59<w||59<E)return null;var t=g.ms??"0";t=t?+t.padEnd(3,"0").substring(0,3):0;g=g.isUTC||!g.offsetSign?Date.UTC(n,e,v,A,w,E,t):6E4*("+"===g.offsetSign?-1:1)*(60*+g.offsetHours+ +g.offsetMinutes)+Date.UTC(n,e,v,A,w,E,t);return Number.isNaN(g)?null:g}const r=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,D=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
z=!Number.isNaN((new Date("technology 10")).getTime());b.isDateString=function(g){return null!=y(g)||null!=f(g)};b.isISO8601Date=function(g){return r.test(g)};b.parseDate=function(g){return y(g)??f(g)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../core/date","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(b,f,y,r,D){function z(E){return new e(E)}
async function g(){null==w&&(w=await new Promise((E,t)=>b(["../../../../geometry/geometryEngineJSON"],E,t)));return w}class n{constructor(){this.description=this.code=null}}class e{constructor(E){this.error=new n;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=E}}class v{constructor(E){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=E}}const A=new Set;let w;f.createFeatureEditErrorResult=z;f.createFeatureEditSuccessResult=function(E){return new v(E)};
f.loadGeometryEngineForSimplify=async function(E,t){!r.isValid(E)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await g()};f.mixAttributes=function(E,t,q,a=!1){A.clear();for(const F in q){const L=E.get(F);if(!L)continue;var u=L,p=q[F];let d=p;D.isNumericField(u)&&"string"===typeof p?d=parseFloat(p):D.isStringField(u)&&null!=p&&"string"!==typeof p?d=String(p):D.isDateField(u)&&"string"===typeof p&&(d=y.parseDate(p));u=D.sanitizeNullFieldValue(d);A.add(L.name);if(L&&(a||L.editable)){if(p=
D.validateFieldValue(L,u))return z(D.validationErrorToString(p,L,u));t[L.name]=u}}for(const F of E?.requiredFields??[])if(!A.has(F.name))return z(`missing required field "${F.name}"`);return null};f.simplify=function(E,t){if(!E||!r.isValid(t))return E;if("rings"in E||"paths"in E){if(null==w)throw new TypeError("geometry engine not loaded");return w.simplify(t,E)}return E};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/wfsUtils":function(){define("exports ../../geometry ../../request ../../core/Error ../../core/iteratorUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./xmlUtils ../support/arcgisLayerUrl ../support/Field ../support/fieldUtils ../../geometry/Extent ../../geometry/SpatialReference".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A,w,E,t,q,a){function u(da){da=P(da);T(da);Y(da);da=da.firstElementChild;const ka=D.cache(d(da));return{operations:F(da),get featureTypes(){return Array.from(ka())},readFeatureTypes:ka}}function p(da){for(const ka of la){const ia=da.findIndex(qa=>qa.toLowerCase()===ka);if(0<=ia)return da[ia]}return null}function F(da){let ka=!1;const ia={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}},qa=[],ua=[];A.visitXML(da,
{OperationsMetadata:{Parameter:xa=>{if("outputFormat"===xa.getAttribute("name"))return{AllowedValues:{Value:({textContent:Aa})=>{Aa&&qa.push(Aa)}}}},Operation:xa=>{switch(xa.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:Aa=>{ia.GetCapabilities.url=Aa.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:Aa=>{ia.DescribeFeatureType.url=Aa.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:Aa=>{ia.GetFeature.url=Aa.getAttribute("xlink:href")}}},
Parameter:Aa=>{if("outputFormat"===Aa.getAttribute("name"))return{AllowedValues:{Value:({textContent:Ka})=>{Ka&&ua.push(Ka)}}}}}}},Constraint:xa=>{switch(xa.getAttribute("name")){case "KVPEncoding":return{DefaultValue:Aa=>{ka="true"===Aa.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:Aa=>{ia.GetFeature.supportsPagination="true"===Aa.textContent.toLowerCase()}}}}}});ia.GetFeature.outputFormat=p(ua)??p(qa);if(!ka)throw new r("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");
if(null==ia.GetFeature.outputFormat)throw new r("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return ia}function L(da){da=parseInt(da.textContent?.match(/(?<wkid>\d+$)/i)?.groups?.wkid??"",10);if(!Number.isNaN(da))return da}function d(da){return A.iterateXML(da,{FeatureTypeList:{FeatureType:ka=>{const ia={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",defaultSpatialReference:4326,supportedSpatialReferences:[]},
qa=new Set;A.visitXML(ka,{Name:ua=>{const {name:xa,prefix:Aa}=N(ua.textContent);ia.typeName=`${Aa}:${xa}`;ia.name=xa;ia.namespacePrefix=Aa;ia.namespaceUri=ua.lookupNamespaceURI(Aa)},Abstract:ua=>{ia.description=ua.textContent},Title:ua=>{ia.title=ua.textContent},WGS84BoundingBox:ua=>{ia.extent=q.fromJSON(J(ua))},DefaultCRS:ua=>{if(ua=L(ua))ia.defaultSpatialReference=ua,qa.add(ua)},OtherCRS:ua=>{(ua=L(ua))&&qa.add(ua)}});ia.title||(ia.title=ia.name);qa.add(4326);ia.supportedSpatialReferences.push(...qa);
return ia}}})}function J(da){let ka,ia,qa,ua;for(const xa of da.children)switch(xa.localName){case "LowerCorner":[ka,ia]=xa.textContent.split(" ").map(Aa=>Number.parseFloat(Aa));break;case "UpperCorner":[qa,ua]=xa.textContent.split(" ").map(Aa=>Number.parseFloat(Aa))}return{xmin:ka,ymin:ia,xmax:qa,ymax:ua,spatialReference:n.wgs84}}function Q(da,ka,ia){return D.find(da,qa=>ia?qa.name===ka&&qa.namespaceUri===ia:qa.typeName===ka||qa.name===ka)}async function S(da,ka,ia,qa={}){da=da.readFeatureTypes();
ia=ka?Q(da,ka,ia):da.next().value;({spatialReference:da=new a({wkid:ia?.defaultSpatialReference})}=qa);if(null==ia){if(ka)throw new r("wfs-layer:feature-type-not-found",`The type '${ka}' could not be found in the service`);throw new r("wfs-layer:empty-service","The service is empty");}if((ka=ia.extent)&&!n.equals(ka.spatialReference,da))try{await g.initializeProjection(ka.spatialReference,da,void 0,qa),ka=g.project(ka,da)}catch{throw new r("wfs-layer:unsupported-spatial-reference","Projection not supported");
}return{extent:ka,spatialReference:da,featureType:ia}}async function Z(da,ka,ia,qa={}){const {typeName:ua}=ka,[xa,Aa]=await Promise.allSettled([x(da.operations.DescribeFeatureType.url,ua,qa),U(da,ua,ia,qa)]);da=Ma=>new r("wfs-layer:getWFSLayerTypeInfo-error",`An error occurred while getting info about the feature type '${ua}'`,{error:Ma});if("rejected"===xa.status)throw da(xa.reason);if("rejected"===Aa.status)throw da(Aa.reason);const {fields:Ka,errors:Ha}=xa.value??{};da=xa.value?.geometryType||
Aa.value?.geometryType;ka=Aa.value?.swapXY??!1;if(null==da)throw new r("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${ua}`,{typeName:ua,geometryType:da,fields:Ka,errors:Ha});return{...W(Ka??[]),geometryType:da,swapXY:ka}}function W(da){const ka=da.find(qa=>"geometry"===qa.type);let ia=da.find(qa=>"oid"===qa.type);da=da.filter(qa=>"geometry"!==qa.type);ia||(ia=new E({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),da.unshift(ia));return{geometryField:ka?.name??
null,objectIdField:ia.name,fields:da}}async function U(da,ka,ia,qa={}){let ua,xa=!1;const [Aa,Ka]=await Promise.all([l(da.operations.GetFeature.url,ka,ia,da.operations.GetFeature.outputFormat,{...qa,count:1}),y(da.operations.GetFeature.url,{responseType:"text",query:B(ka,ia,void 0,{...qa,count:1}),signal:qa?.signal})]);if(da="FeatureCollection"===Aa.type&&Aa.features[0]?.geometry){ua=e.featureGeometryTypeKebabDictionary.fromJSON(v.getGeometryType(da.type));switch(da.type){case "Point":var Ha=da.coordinates;
break;case "LineString":case "MultiPoint":Ha=da.coordinates[0];break;case "MultiLineString":case "Polygon":Ha=da.coordinates[0][0];break;case "MultiPolygon":Ha=da.coordinates[0][0][0]}if(ka=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(Ka.data))da=Ha[0].toFixed(3),Ha=Ha[1].toFixed(3),ia=parseFloat(ka[1]).toFixed(3),ka=parseFloat(ka[2]).toFixed(3),da===ka&&Ha===ia&&(xa=!0)}return{geometryType:ua,swapXY:xa}}async function x(da,ka,ia){da=await y(da,{responseType:"text",query:{SERVICE:"WFS",
REQUEST:"DescribeFeatureType",VERSION:"2.0.0",TYPENAME:ka,TYPENAMES:ka,...ia?.customParameters},signal:ia?.signal});return I(ka,da.data)}function I(da,ka){const {name:ia}=N(da);ka=P(ka);Y(ka);var qa=D.find(A.iterateXML(ka.firstElementChild,{element:ua=>ua}),ua=>ua.getAttribute("name")===ia);if(null!=qa){const ua=qa.getAttribute("type");if(qa=ua?D.find(A.iterateXML(ka.firstElementChild,{complexType:xa=>xa}),xa=>xa.getAttribute("name")===N(ua).name):D.find(A.iterateXML(qa,{complexType:xa=>xa}),()=>
!0))return m(qa)}throw new r("wfs-layer:feature-type-not-found",`Type '${da}' not found in document`,{document:(new XMLSerializer).serializeToString(ka)});}function m(da){const ka=[],ia=[];let qa=void 0;var ua=A.iterateXML(da,{complexContent:{extension:{sequence:{element:xa=>xa}}}});for(const xa of ua){ua=xa.getAttribute("name");if(!ua)continue;let Aa,Ka;xa.hasAttribute("type")?Aa=N(xa.getAttribute("type")).name:A.visitXML(xa,{simpleType:{restriction:h=>{Aa=N(h.getAttribute("base")).name;return{maxLength:G=>
{Ka=+G.getAttribute("value")}}}}});if(!Aa)continue;const Ha="true"===xa.getAttribute("nillable");let Ma=!1;switch(Aa.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":ia.push(new E({name:ua,alias:ua,type:"integer",nullable:Ha,length:t.getFieldDefaultLength("integer")}));break;case "float":case "double":case "decimal":ia.push(new E({name:ua,
alias:ua,type:"double",nullable:Ha,length:t.getFieldDefaultLength("double")}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":ia.push(new E({name:ua,alias:ua,type:"string",nullable:Ha,length:Ka??
t.getFieldDefaultLength("string")}));break;case "datetime":case "date":ia.push(new E({name:ua,alias:ua,type:"date",nullable:Ha,length:Ka??t.getFieldDefaultLength("date")}));break;case "pointpropertytype":qa="point";Ma=!0;break;case "multipointpropertytype":qa="multipoint";Ma=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":qa="polyline";Ma=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":qa="polygon";
Ma=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":Ma=!0;ka.push(new r("wfs-layer:unknown-geometry-type",`geometry type '${Aa}' is not supported`,{type:(new XMLSerializer).serializeToString(da)}));break;default:ka.push(new r("wfs-layer:unknown-field-type",`Unknown field type '${Aa}'`,{type:(new XMLSerializer).serializeToString(da)}))}Ma&&ia.push(new E({name:ua,alias:ua,type:"geometry",nullable:Ha}))}for(const xa of ia)if("integer"===xa.type&&!xa.nullable&&ra.has(xa.name.toLowerCase())){xa.type=
"oid";break}return{geometryType:qa,fields:ia,errors:ka}}async function l(da,ka,ia,qa,ua){({data:da}=await y(da,{responseType:"text",query:B(ka,ia,qa,ua),signal:ua?.signal}));da=da.replaceAll(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{return JSON.parse(da)}catch(xa){throw new r("wfs-layer:malformed-json","Error while parsing the\u00a0response",{response:da,error:xa});}}function B(da,ka,ia,qa){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:da,OUTPUTFORMAT:ia,SRSNAME:"EPSG:"+("number"===
typeof ka?ka:ka.wkid),STARTINDEX:qa?.startIndex,COUNT:qa?.count,...qa?.customParameters}}function P(da){return(new DOMParser).parseFromString(da.trim(),"text/xml")}function N(da){const [ka,ia]=da.split(":");return{prefix:ia?ka:"",name:ia??ka}}function T(da){if((da=da.firstElementChild?.getAttribute("version"))&&"2.0.0"!==da)throw new r("wfs-layer:unsupported-wfs-version",`Unsupported WFS version ${da}. Supported version: ${"2.0.0"}`);}function Y(da){let ka="",ia="";A.visitXML(da.firstElementChild,
{Exception:qa=>{ka=qa.getAttribute("exceptionCode");return{ExceptionText:ua=>{ia=ua.textContent}}}});if(ka)throw new r(`wfs-layer:${ka}`,ia);}function ea(da,ka,ia){const qa={wkid:ka.defaultSpatialReference};ia=null!=ia?.wkid?{wkid:ia.wkid}:qa;da=w.isArcGISUrl(da)||ia.wkid&&ka.supportedSpatialReferences.includes(ia.wkid)?{wkid:ia.wkid}:{wkid:ka.defaultSpatialReference};return{spatialReference:ia,getFeatureSpatialReference:da}}const la=["json","application/json","geojson","application/json; subtype\x3dgeojson",
"application/geo+json"],ra=new Set(["objectid","fid"]);b.describeFeatureType=x;b.findFeatureType=Q;b.getCapabilities=async function(da,ka){ka=await y(da,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...ka?.customParameters},signal:ka?.signal});ka=u(ka.data);z.isHTTPSProtocol(da)&&(z.hasSameOrigin(da,ka.operations.DescribeFeatureType.url,!0)&&(ka.operations.DescribeFeatureType.url=z.toHTTPS(ka.operations.DescribeFeatureType.url)),z.hasSameOrigin(da,ka.operations.GetFeature.url,
!0)&&(ka.operations.GetFeature.url=z.toHTTPS(ka.operations.GetFeature.url)));return ka};b.getFeature=l;b.getFeatureCount=async function(da,ka,ia){da=await y(da,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:ka,RESULTTYPE:"hits",...ia?.customParameters},signal:ia?.signal});da=/numberMatched=["'](?<numberMatched>\d+)["']/gi.exec(da.data);if(da?.groups)return+da.groups.numberMatched};b.getFeatureTypeInfo=S;b.getGetFeatureSpatialReference=ea;b.getWFSLayerInfo=
async function(da,ka,ia,qa={}){const {featureType:ua,extent:xa}=await S(da,ka,ia,qa);({spatialReference:ka}=ea(da.operations.GetFeature.url,ua,qa.spatialReference));const {fields:Aa,geometryType:Ka,swapXY:Ha,objectIdField:Ma,geometryField:h}=await Z(da,ua,ka,qa);return{url:da.operations.GetCapabilities.url,name:ua.name,namespaceUri:ua.namespaceUri,fields:Aa,geometryField:h,geometryType:Ka,objectIdField:Ma,spatialReference:qa.spatialReference??new a({wkid:ua.defaultSpatialReference}),extent:xa,swapXY:Ha,
wfsCapabilities:da,customParameters:qa.customParameters}};b.parseDescribeFeatureTypeResponse=I;b.parseGetCapabilitiesResponse=u;b.prepareWFSLayerFields=W;b.wfsOidFieldName="__esri_wfs_id__";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(b){function f(r,D){if(r&&D)for(const z of r.children)z.localName in D&&(r=D[z.localName],"function"===typeof r?(r=r(z))&&f(z,r):f(z,r))}function*y(r,D){for(const z of r.children)z.localName in
D&&(r=D[z.localName],"function"===typeof r?yield r(z):yield*y(z,r))}b.iterateXML=y;b.visitXML=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(b,f,y){function r(w){if(null==w)return null;w=f.urlToObject(w);w=w?.path.match(e)||w?.path.match(v);if(!w)return null;const [,E,t,q,a]=w;w=t.indexOf("/");return{title:z(-1!==w?t.slice(w+1):t),serverType:g[q.toLowerCase()],
sublayer:null!=a&&""!==a?parseInt(a,10):null,url:{path:E}}}function D(w){return(w=f.urlToObject(w).path.match(A))?{serviceUrl:w[1],sublayerId:Number(w[2])}:null}function z(w){w=w.replaceAll(/\s*[/_]+\s*/g," ");return w[0].toUpperCase()+w.slice(1)}const g={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},
n=Object.values(g),e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${n.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),v=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${n.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),A=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;b.cleanTitle=z;b.isArcGISUrl=function(w){return e.test(w)};b.isHostedAgolService=function(w){w=f.getOrigin(w,!0);if(!w)return!1;w=w.toLowerCase();return w.endsWith(".arcgis.com")&&(w.startsWith("services")||w.startsWith("tiles")||
w.startsWith("features"))};b.isServerOrServicesAGOLUrl=function(w){if(!w)return!1;w=(new f.Url(f.makeAbsolute(w))).authority?.toLowerCase();return"server.arcgisonline.com"===w||"services.arcgisonline.com"===w};b.isWmsServer=function(w){if(!w)return!1;var E=w.toLowerCase();w=E.includes("/services/");const t=E.includes("/mapserver/wmsserver"),q=E.includes("/imageserver/wmsserver");E=E.includes("/wmsserver");return w&&(t||q||E)};b.parse=r;b.parseNonStandardSublayerUrl=D;b.sanitizeUrl=function(w,E){return w?
f.removeTrailingSlash(f.removeQueryParameters(w,E)):w};b.sanitizeUrlWithLayerId=function(w){let {url:E}=w;if(!E)return{url:E};E=f.removeQueryParameters(E,w.logger);const t=f.urlToObject(E),q=r(t.path);let a=void 0;null!=q?(null!=q.sublayer&&null==w.layer.layerId&&(a=q.sublayer),E=q.url.path):w.nonStandardUrlAllowed&&(w=D(t.path),null!=w&&(E=w.serviceUrl,a=w.sublayerId));return{url:f.removeTrailingSlash(E),layerId:a}};b.serverTypes=n;b.titleFromUrlAndName=function(w,E){const t=[];w&&(w=r(w),null!=
w&&w.title&&t.push(w.title));E&&(E=z(E),t.push(E));if(2===t.length){if(t[0].toLowerCase().includes(t[1].toLowerCase()))return t[0];if(t[1].toLowerCase().includes(t[0].toLowerCase()))return t[1]}return t.join(" - ")};b.writeUrlWithLayerId=function(w,E,t,q,a){y.write(E,q,"url",a);q.url&&null!=w.layerId&&(q.url=f.join(q.url,t,w.layerId.toString()))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(b,f,y,r,D,z,g,n,e,v,A,w){var E;const t=new f.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});f=E=class extends y.JSONSupport{constructor(q){super(q);
this.alias=null;this.defaultValue=void 0;this.domain=this.description=null;this.editable=!0;this.length=void 0;this.name=null;this.nullable=!0;this.valueType=this.type=null;this.visible=!0}readDescription(q,{description:a}){q=null;try{q=a?JSON.parse(a):null}catch(u){}return q?.value??null}readValueType(q,{description:a}){q=null;try{q=a?JSON.parse(a):null}catch(u){}return q?t.fromJSON(q.fieldValueType):null}clone(){return new E({alias:this.alias,defaultValue:this.defaultValue,description:this.description,
domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};b.__decorate([r.property({type:String,json:{write:!0}})],f.prototype,"alias",void 0);b.__decorate([r.property({type:[String,Number],json:{write:{allowNull:!0}}})],f.prototype,"defaultValue",void 0);b.__decorate([r.property()],f.prototype,"description",void 0);b.__decorate([e.reader("description")],f.prototype,"readDescription",
null);b.__decorate([r.property({types:A.types,json:{read:{reader:A.fromJSON},write:!0}})],f.prototype,"domain",void 0);b.__decorate([r.property({type:Boolean,json:{write:!0}})],f.prototype,"editable",void 0);b.__decorate([r.property({type:D.Integer,json:{write:{overridePolicy(q){return{enabled:Number.isFinite(q)}}}}})],f.prototype,"length",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],f.prototype,"name",void 0);b.__decorate([r.property({type:Boolean,json:{write:!0}})],f.prototype,
"nullable",void 0);b.__decorate([n.enumeration(w.kebabDict)],f.prototype,"type",void 0);b.__decorate([r.property()],f.prototype,"valueType",void 0);b.__decorate([e.reader("valueType",["description"])],f.prototype,"readValueType",null);b.__decorate([r.property({type:Boolean,json:{read:!1}})],f.prototype,"visible",void 0);return f=E=b.__decorate([v.subclass("esri.layers.support.Field")],f)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(b,f,y,r,D,z){f={key:"type",base:r,typeMap:{range:z,"coded-value":y,inherited:D}};b.CodedValueDomain=y;b.DomainBase=r;b.InheritedDomain=D;b.RangeDomain=z;b.fromJSON=function(g){if(!g?.type)return null;switch(g.type){case "range":return z.fromJSON(g);case "codedValue":return y.fromJSON(g);case "inherited":return D.fromJSON(g)}return null};b.types=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(b,f,y,r,D,z,g,n,e){var v;r=v=class extends e{constructor(A){super(A);this.codedValues=null;this.type="coded-value"}getName(A){let w=null;if(this.codedValues){const E=String(A);this.codedValues.some(t=>{String(t.code)===E&&(w=t.name);return!!w})}return w}clone(){return new v({codedValues:f.clone(this.codedValues),name:this.name})}};b.__decorate([y.property({type:[n.CodedValue],json:{write:!0}})],r.prototype,"codedValues",void 0);b.__decorate([z.enumeration({codedValue:"coded-value"})],r.prototype,
"type",void 0);return r=v=b.__decorate([g.subclass("esri.layers.support.CodedValueDomain")],r)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,y,r,D,z,g,n){var e;b.CodedValue=e=class extends y.JSONSupport{constructor(v){super(v);this.code=this.name=null}clone(){return new e({name:this.name,
code:this.code})}};f.__decorate([r.property({type:String,json:{write:!0}})],b.CodedValue.prototype,"name",void 0);f.__decorate([r.property({type:[String,Number],json:{write:!0}})],b.CodedValue.prototype,"code",void 0);b.CodedValue=e=f.__decorate([n.subclass("esri.layers.support.CodedValue")],b.CodedValue);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,y,r,D,z,g,n,e){f=new f.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});y=class extends y.JSONSupport{constructor(v){super(v);this.type=this.name=null}};b.__decorate([r.property({type:String,json:{write:!0}})],y.prototype,"name",void 0);b.__decorate([n.enumeration(f)],y.prototype,"type",void 0);return y=b.__decorate([e.subclass("esri.layers.support.Domain")],y)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/tslib.es6 ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(b,f,y,r,D,z,g,n){var e;f=e=class extends n{constructor(v){super(v);this.type="inherited"}clone(){return new e}};b.__decorate([z.enumeration({inherited:"inherited"})],f.prototype,"type",void 0);return f=e=b.__decorate([g.subclass("esri.layers.support.InheritedDomain")],f)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(b,f,y,r,D,z,g,n){var e;y=e=class extends n{constructor(v){super(v);this.minValue=this.maxValue=null;this.type="range"}clone(){return new e({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};b.__decorate([f.property({json:{type:[Number],read:{source:"range",reader(v,A){return A.range?.[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(v,A,w){A[w]=[this.minValue||0,v]}}}})],y.prototype,"maxValue",void 0);b.__decorate([f.property({json:{type:[Number],
read:{source:"range",reader(v,A){return A.range?.[0]}},write:{target:"range",writer(v,A,w){A[w]=[v,this.maxValue||0]}}}})],y.prototype,"minValue",void 0);b.__decorate([z.enumeration({range:"range"})],y.prototype,"type",void 0);return y=e=b.__decorate([g.subclass("esri.layers.support.RangeDomain")],y)})},"*noref":1}});
define("../../../core/asyncUtils ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../core/Warning ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../data/FeatureStore ../data/projectionSupport ../data/QueryEngine ./geojson/geojson ./support/sourceUtils ../../ogc/wfsUtils ../../support/FieldsIndex ../../../time/timeZoneUtils".split(" "),function(b,f,y,r,D,z,g,n,e,v,A,w,E,t,q){function*a(L,d,J){for(let Q=0;Q<d;Q++)yield L._pageQuery(Q,J)}async function u(L,
d,J){let Q=L.next();for(;!Q.done;){try{const S=await Q.value;d.push(...S)}catch(S){r.isAbortError(S)||J.push(S)}Q=L.next()}}function p(L){const d=[];null!=L.totalRecordCount&&(L.features.length<L.totalRecordCount&&d.push({name:"wfs-layer:maxRecordCount-too-low",message:`Could only fetch ${L.features.length} of ${L.totalRecordCount} in ${L.maxPageCount} queries. Try increasing the value of WFSLayer.maxRecordCount.`,details:{recordCount:L.features.length,totalRecordCount:L.totalRecordCount}}),L.totalRecordCount>
L.maxTotalRecordCount&&d.push({name:"wfs-layer:large-dataset",message:`The number of ${L.totalRecordCount} features exceeds the maximum allowed of ${L.maxTotalRecordCount}.`,details:{recordCount:L.features.length,totalRecordCount:L.totalRecordCount,maxTotalRecordCount:L.maxTotalRecordCount}}));return d}class F{constructor(){this._queryEngine=this._customParameters=null;this._supportsPagination=!0}destroy(){this._queryEngine?.destroy();this._queryEngine=null}async load(L,d={}){const {getFeatureUrl:J,
getFeatureOutputFormat:Q,fields:S,geometryType:Z,featureType:W,maxRecordCount:U,maxTotalRecordCount:x,maxPageCount:I,objectIdField:m,customParameters:l}=L,{spatialReference:B,getFeatureSpatialReference:P}=E.getGetFeatureSpatialReference(J,W,L.spatialReference);try{await e.checkProjectionSupport(P,B)}catch{throw new f("unsupported-projection","Projection not supported",{inSpatialReference:P,outSpatialReference:B});}r.throwIfAborted(d);this._customParameters=l;this._featureType=W;this._fieldsIndex=
t.fromLayerJSON({fields:S,dateFieldsTimeReference:S.some(N=>"esriFieldTypeDate"===N.type)?{timeZoneIANA:q.utc}:null});this._geometryType=Z;this._getFeatureUrl=J;this._getFeatureOutputFormat=Q;this._getFeatureSpatialReference=P;this._maxRecordCount=U;this._maxTotalRecordCount=x;this._maxPageCount=I;this._objectIdField=m;this._spatialReference=B;L=await this._snapshotFeatures(d);if(0<L.errors.length&&(this._supportsPagination=!1,L=await this._snapshotFeatures(d),0<L.errors.length))throw L.errors[0];
this._queryEngine=new v.QueryEngine({fieldsIndex:this._fieldsIndex,geometryType:Z,hasM:!1,hasZ:!1,objectIdField:m,spatialReference:B,timeInfo:null,featureStore:new n({geometryType:Z,hasM:!1,hasZ:!1})});this._queryEngine.featureStore.addMany(L.features);return{warnings:p(L),extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new f("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");}async queryFeatures(L={},d={}){await this._waitSnapshotComplete();
return this._queryEngine.executeQuery(L,d.signal)}async queryFeatureCount(L={},d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(L,d.signal)}async queryObjectIds(L={},d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(L,d.signal)}async queryExtent(L={},d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(L,d.signal)}async querySnapping(L,d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(L,
d.signal)}async refresh(L){this._customParameters=L.customParameters;this._maxRecordCount=L.maxRecordCount;this._maxTotalRecordCount=L.maxTotalRecordCount;this._maxPageCount=L.maxPageCount;this._snapshotTask?.abort();this._snapshotTask=b.createTask(d=>this._snapshotFeatures({signal:d}));this._snapshotTask.promise.then(d=>{this._queryEngine.featureStore.clear();this._queryEngine.featureStore.addMany(d.features);for(const J of p(d))y.getLogger("esri.layers.WFSLayer").warn(new D("wfs-layer:refresh-warning",
J.message,J.details));d.errors?.length&&y.getLogger("esri.layers.WFSLayer").warn(new D("wfs-layer:refresh-error","Refresh completed with errors",{errors:d.errors}))},()=>{this._queryEngine.featureStore.clear()});await this._waitSnapshotComplete();return{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _snapshotFeatures(L){L=
L?.signal;const d=this._maxTotalRecordCount,J=this._maxPageCount,Q=this._supportsPagination?await E.getFeatureCount(this._getFeatureUrl,this._featureType.typeName,{customParameters:this._customParameters,signal:L}):void 0;let S=[];const Z=[];if(null==Q)try{S=await this._singleQuery(L)}catch(W){r.isAbortError(W)||Z.push(W)}else{const W=a(this,Math.max(1,Math.min(Math.ceil(Math.min(Q,d)/this._maxRecordCount),J)),L);await Promise.allSettled(Array.from({length:10}).map(()=>u(W,S,Z)))}r.throwIfAborted(L);
return{features:S,totalRecordCount:Q,maxTotalRecordCount:d,maxPageCount:J,errors:Z}}async _singleQuery(L){const d=await E.getFeature(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,signal:L});return this._processGeoJSON(d,{signal:L})}async _pageQuery(L,d){L*=this._maxRecordCount;const J=await E.getFeature(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,
{customParameters:this._customParameters,startIndex:L,count:this._maxRecordCount,signal:d});return this._processGeoJSON(J,{startIndex:L,signal:d})}_processGeoJSON(L,d){A.validateGeoJSON(L,this._getFeatureSpatialReference.wkid);const {startIndex:J,signal:Q}=d;r.throwIfAborted(Q);L=A.createOptimizedFeatures(L,{geometryType:this._geometryType,hasZ:!1,objectIdField:this._objectIdField});if(!z.equals(this._spatialReference,this._getFeatureSpatialReference))for(var S of L)null!=S.geometry&&(S.geometry=
g.convertFromGeometry(e.project(g.convertToGeometry(S.geometry,this._geometryType,!1,!1),this._getFeatureSpatialReference,this._spatialReference)));S=J??1;for(const Z of L)d={},w.mixAttributes(this._fieldsIndex,d,Z.attributes,!0),Z.attributes=d,null==d[this._objectIdField]&&(Z.objectId=d[this._objectIdField]=S++);return L}}return F});