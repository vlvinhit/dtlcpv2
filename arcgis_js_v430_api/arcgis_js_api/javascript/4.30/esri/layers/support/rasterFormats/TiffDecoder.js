// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../core/has ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./pixelRangeUtils ./TiffTags ./utils ../../../chunks/Zlib".split(" "),function(H,qa,ia,ja,W,X,Y,J,Z,ka){function O(b,a){let d="unknown";3===b?d=64===a?"f64":"f32":1===b?1===a?d="u1":2===a?d="u2":4===a?d="u4":8>=a?d="u8":16>=a?d="u16":32>=a&&(d="u32"):2===b&&(8>=a?d="s8":16>=a?d="s16":32>=a&&(d="s32"));return d}function L(b){let a=null;switch(b?b.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":a=
Uint8Array;break;case "u16":a=Uint16Array;break;case "u32":a=Uint32Array;break;case "s8":a=Int8Array;break;case "s16":a=Int16Array;break;case "s32":a=Int32Array;break;case "f64":a=Float64Array;break;default:a=Float32Array}return a}function la(b,a){return{x:a[0]*b.x+a[1]*b.y+a[2],y:a[3]*b.x+a[4]*b.y+a[5]}}function t(b,a){return b.get(a)?.values?.[0]}function P(b,a,d,h=0,l=J.tiffTags,e=4){var c=8===e;const g=c?Q(new DataView(b,d,8),0,a):(new DataView(b,d,2)).getUint16(0,a),f=4+2*e;var p=c?8:2;c=p+g*
f;if(d+c>b.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};const n=d+c+4<=b.byteLength?M(new DataView(b,d+c,8===e?8:4),0,a,8===e):null;d+=p;p=new Map;let k,u,m,v=0,y=0;for(let r=0;r<g;r++){var w=new DataView(b,d+f*r,f);k=w.getUint16(0,a);m=w.getUint16(2,a);u=J.getTagName(k,l);const q=[];2===e?(v=w.getUint16(4,a),y=w.getUint16(6,a)):4===e?(v=w.getUint32(4,a),y=w.getUint32(8,a)):8===e&&(v=M(w,4,a,!0),y=M(w,12,a,!0),q.push(w.getUint32(12,a)),q.push(w.getUint32(16,a)));w={id:k,
type:m,valueCount:v,valueOffset:y,valueOffsets:q,values:null};aa(b,a,w,h,!1,e);p.set(u,w)}return{success:!0,ifd:p,nextIFD:n,requiredBufferSize:c}}function ba(b,a){if(1!==a&&2!==a&&4!==a)return b;const d=new Uint8Array(b),h=8/a;b=new Uint8Array(b.byteLength*h);let l=0;const e=2**a-1;for(let c=0;c<d.length;c++){const g=d[c];for(let f=0;f<h;f++)b[l++]=g<<a*f>>>8-a&e}return b.buffer}function R(b,a,d){const h=new ja.JpegImage;h.parse(b);h.colorTransform=6===d?-1:0;b=h.getData(h.width,h.height,1!==a&&4!==
a);return new Uint8Array(b.buffer)}function S(b){b=(new ka.Zlib(b)).getBytes();var a=new ArrayBuffer(b.length);a=new Uint8Array(a);a.set(b);return a}async function T(b,a,d,h,l){var e=Z.isPlatformLittleEndian===a,c=t(d,"BITSPERSAMPLE"),g=t(d,"SAMPLESPERPIXEL")??1,f=t(d,"PHOTOMETRICINTERPRETATION"),p=t(d,"SAMPLEFORMAT")??1,n=O(p,c),k=t(d,"COMPRESSION")??1,u=L(n);if(34887===k)return await W.load(),W.decode(b,{inputOffset:h}).pixels[0];if(1===k)f=b.slice(h,h+l),a=new Uint8Array(f);else if(8===k||32946===
k)a=new Uint8Array(b,h,l),a=S(a),f=a.buffer;else if(6===k)a=new Uint8Array(b,h,l),a=R(a,g,f),f=a.buffer;else if(7===k){const m=d.get("JPEGTABLES").values,v=m.length-2;a=new Uint8Array(v+l-2);for(let y=0;y<v;y++)a[y]=m[y];b=new Uint8Array(b,h+2,l-2);for(h=0;h<b.length;h++)a[v+h]=b[h];a=R(a,g,f);f=a.buffer}else if(5===k)a=X.decode(b,h,l,a),f=a.buffer;else throw Error("tiff-decode: unsupport compression "+k);f=ba(f,c);if("u8"!==n&&"s8"!==n&&!e)switch(f=new ArrayBuffer(a.length),e=new Uint8Array(f),n){case "u16":case "s16":for(n=
0;n<a.length;n+=2)e[n]=a[n+1],e[n+1]=a[n];break;case "u32":case "s32":case "f32":for(n=0;n<a.length;n+=4)e[n]=a[n+3],e[n+1]=a[n+2],e[n+2]=a[n+1],e[n+3]=a[n]}c=new u(f);e=t(d,"PREDICTOR")??1;n=t(d,"TILEWIDTH");a=t(d,"TILELENGTH");if(1<e&&(5===k||8===k||32946===k)&&n&&a){k=K(d);u=new u(c.length);u.set(c);d=3===p&&3===e;k=k?1:g;g=d?4:1;p=n*g*k;d&&(u=new Uint8Array(u.buffer));for(e=0;e<a;e++)for(c=e*p,f=k;f<p;f++)u[c+f]+=u[c+f-k];if(d){d=new Uint8Array(u.length);k*=n;for(n=0;n<a;n++)for(e=n*p,c=0;c<k;c++)for(f=
0;f<g;f++)d[e+c*g+f]=u[e+c+(g-f-1)*k];c=new Float32Array(d.buffer)}else c=u}return c}async function ma(b,a,d){const h=d.get("TILEOFFSETS")?.values;if(void 0===h)return null;const l=d.get("TILEBYTECOUNTS")?.values,{width:e,height:c,pixelType:g,tileWidth:f,tileHeight:p}=N([d]);var n=K(d,a);const k=t(d,"SAMPLESPERPIXEL")||a.planes;var u=e*c,m=t(d,"BITSPERSAMPLE"),v=34887===(t(d,"COMPRESSION")??1),y=L(g);const w=[];for(var r=0;r<k;r++)w.push(new y(u));let q,E,x,B,z,D,C,I,A;y=Math.ceil(e/f);u=(new Uint8Array(u)).fill(255);
r=!1;if(0===m%8)if(v&&n&&1<k)for(n=Math.round(h.length/k),m=0;m<n;m++){var F=Math.floor(m/y)*p;x=m%y*f;B=F*e+x;for(v=0;v<k;v++){var G=m*k+v;0===l[G]?(G=null,r=!0):G=await T(b,a.littleEndian,d,h[G],l[G]);D=0;z=B;I=Math.min(f,e-x);C=Math.min(p,c-F);A=w[v];for(q=0;q<C;q++)for(z=B+q*e,D=q*f,E=0;E<I;E++,z++,D++)G?A[z]=G[D]:u[z]=0}}else for(m=0;m<h.length;m++)for(F=Math.floor(m/y)*p,x=m%y*f,B=F*e+x,0===l[m]?(G=null,r=!0):G=await T(b,a.littleEndian,d,h[m],l[m]),D=0,z=B,I=Math.min(f,e-x),C=Math.min(p,c-F),
F=0;F<k;F++)if(A=w[F],n||v)for(q=0;q<C;q++)for(z=B+q*e,D=f*p*F+q*f,E=0;E<I;E++,z++,D++)G?A[z]=G[D]:u[z]=0;else for(q=0;q<C;q++)for(z=B+q*e,D=q*f*k+F,E=0;E<I;E++,z++,D+=k)G?A[z]=G[D]:u[z]=0;return{width:e,height:c,pixelType:g,pixels:w,mask:r?u:void 0}}function aa(b,a,d,h=0,l=!1,e=4){if(d.values)return!0;var c=d.type,g=d.valueCount,f=d.valueOffset;let p=[];var n=ca[c],k=8*n,u=g*n,m=g*ca[c]*8,v=8===e?64:32;e=d.valueOffsets;if(m>v&&u>(l?b.byteLength:b?b.byteLength-f+h:0))return d.offlineOffsetSize=[f,
u],d.values=null,!1;if(m<=v)if(a||(32>=v?f>>>=32-m:(b=e?.length?e[0]:f>>>0,a=e?.length?e[1]:Math.round((f-b)/4294967296),32>=m?(f=b>>>32-m,e[0]=f):(f=b*2**(32-m)+(a>>>32-m),e[0]=b,e[1]=a>>>32-m))),1===g&&k===v)p=[f];else if(64===v)for(b=e?.length?e[0]:f>>>0,f=e?.length?e[1]:Math.round((f-b)/4294967296),a=b,n=32,b=1;b<=g;b++)u=32-k*b%32,n<k?(u=a<<u>>>32-n,m=f<<32-n>>>32-n,a=f,p.push(u+m*2**(k-n)),n-=32-(k-n)):(p.push(a<<u>>>32-k),n-=k),0===n&&(n=32,a=f);else for(b=1;b<=g;b++)p.push(f<<32-k*b>>>32-
k);else for(f-=h,l&&(f=0),g=f;g<f+u;g+=n){switch(c){case 1:k=(new DataView(b,g,1)).getUint8(0);break;case 2:k=(new DataView(b,g,1)).getUint8(0);break;case 3:k=(new DataView(b,g,2)).getUint16(0,a);break;case 4:case 13:k=(new DataView(b,g,4)).getUint32(0,a);break;case 5:k=(new DataView(b,g,4)).getUint32(0,a)/(new DataView(b,g+4,4)).getUint32(0,a);break;case 6:k=(new DataView(b,g,1)).getInt8(0);break;case 7:k=(new DataView(b,g,1)).getUint8(0);break;case 8:k=(new DataView(b,g,2)).getInt16(0,a);break;
case 9:k=(new DataView(b,g,4)).getInt32(0,a);break;case 10:k=(new DataView(b,g,4)).getInt32(0,a)/(new DataView(b,g+4,4)).getInt32(0,a);break;case 11:k=(new DataView(b,g,4)).getFloat32(0,a);break;case 12:k=(new DataView(b,g,8)).getFloat64(0,a);break;case 16:case 18:k=Q(new DataView(b,g,8),0,a);break;case 17:e=new DataView(b,g,8);m=(k=a)?e.getInt32(0,k):e.getUint32(0,k);e=k?e.getUint32(4,k):e.getInt32(4,k);v=0<=(k?m:e)?1:-1;k?m*=v:e*=v;k=v*(k?4294967296*e+m:4294967296*m+e);break;default:k=null}p.push(k)}if(2===
c){c="";f=p;p=[];for(b=0;b<f.length;b++)0===f[b]&&""!==c?(p.push(c),c=""):c+=String.fromCharCode(f[b]);""===c&&0!==p.length||p.push(c)}d.values=p;return!0}function N(b){var a=b[0];const d=t(a,"TILEWIDTH"),h=t(a,"TILELENGTH"),l=t(a,"IMAGEWIDTH"),e=t(a,"IMAGELENGTH");var c=t(a,"BITSPERSAMPLE");const g=t(a,"SAMPLESPERPIXEL");var f=t(a,"SAMPLEFORMAT")??1;const p=O(f,c),n=K(a);var k=a.get("GDAL_NODATA")?.values;let u=null;k?.length&&(u=k.map(A=>parseFloat(A)),u.some(A=>isNaN(A))&&(u=null));var m=t(a,"COMPRESSION")??
1;switch(m){case 1:k="NONE";break;case 2:case 3:case 4:case 32771:k="CCITT";break;case 5:k="LZW";break;case 6:case 7:k="JPEG";break;case 32773:k="PACKBITS";break;case 8:case 32946:k="DEFLATE";break;case 34712:k="JPEG2000";break;case 34887:k="LERC";break;default:k=String(m)}let v=!0,y="";na.has(m)||(v=!1,y+="unsupported tag compression "+m);3<f&&(v=!1,y+="unsupported tag sampleFormat "+f);1!==c&&2!==c&&4!==c&&0!==c%8&&(v=!1,y+="unsupported tag bitsPerSample "+c);c=a.get("GEOASCIIPARAMS")?.values?.[0];
if(c){c=(c=c.split("|").find(A=>A.includes("ESRI PE String \x3d ")))?c.replace("ESRI PE String \x3d ",""):"";var w=c.startsWith("COMPD_CS")||c.startsWith("PROJCS")||c.startsWith("GEOGCS")?{wkid:null,wkt:c}:null}f=a.get("GEOTIEPOINTS")?.values;c=a.get("GEOPIXELSCALE")?.values;m=a.get("GEOTRANSMATRIX")?.values;var r=a.has("GEOKEYDIRECTORY")?a.get("GEOKEYDIRECTORY").data:null,q=!1;a=!1;if(r){q=2===t(r,"GTRasterTypeGeoKey");var E=t(r,"GTModelTypeGeoKey");2===E?(r=t(r,"GeographicTypeGeoKey"),1024<=r&&
32766>=r&&(w={wkid:r}),w||32767!==r||(a=!0,w={wkid:4326})):1===E&&(r=t(r,"ProjectedCSTypeGeoKey"),1024<=r&&32766>=r&&(w={wkid:r}))}let x;c&&f&&6<=f.length?(x=[c[0],0,f[3]-f[0]*c[0],0,-Math.abs(c[1]),f[4]-f[1]*c[1]],q&&(x[2]-=.5*x[0]+.5*x[1],x[5]-=.5*x[3]+.5*x[4])):m&&16===m.length&&(x=q?[m[0],m[1],m[3]-.5*m[0],m[4],m[5],m[7]-.5*m[5]]:[m[0],m[1],m[3],m[4],m[5],m[7]]);if(x){f=[{x:0,y:e},{x:0,y:0},{x:l,y:e},{x:l,y:0}];r=q=Number.POSITIVE_INFINITY;let A=E=Number.NEGATIVE_INFINITY;for(let F=0;F<f.length;F++)m=
la(f[F],x),q=m.x>q?q:m.x,E=m.x<E?E:m.x,r=m.y>r?r:m.y,A=m.y<A?A:m.y;f={xmin:q,xmax:E,ymin:r,ymax:A,spatialReference:w}}else f={xmin:-.5,ymin:.5-e,xmax:l-.5,ymax:.5,spatialReference:w};a&&(400<f.xmax-f.xmin||361<Math.max(Math.abs(f.xmin),Math.abs(f.xmax)))&&(w=null,f.spatialReference=null);w=U(b);let B;let z,D;if(0<w.length){z=Math.round(Math.log(l/t(w[0],"IMAGEWIDTH"))/Math.LN2);var C=w[w.length-1];D=w.length;B=t(C,"TILEWIDTH");C=t(C,"TILELENGTH")}B=null!=D&&0<D?B||d:null;C=null!=D&&0<D?C||h:null;
let I;d&&(I=[{maxCol:Math.ceil(l/d)-1,maxRow:Math.ceil(e/h)-1,minRow:0,minCol:0}],w.forEach(A=>{I.push({maxCol:Math.ceil(t(A,"IMAGEWIDTH")/t(A,"TILEWIDTH"))-1,maxRow:Math.ceil(t(A,"IMAGELENGTH")/t(A,"TILELENGTH"))-1,minRow:0,minCol:0})}));m=b[0].get("GDAL_METADATA")?.values?.[0];m=oa(m);y+=" "+da({width:l,height:e,tileWidth:d,tileHeight:h,planes:g,ifds:b});b=V(b).length===w.length+1;w=w?.length?w.map(A=>{const F=l/t(A,"IMAGEWIDTH");A=e/t(A,"IMAGELENGTH");return{x:F,y:A}}):void 0;return{width:l,height:e,
tileWidth:d,tileHeight:h,planes:g,isBSQ:n,pixelType:p,compression:k,noData:u,hasMaskBand:b,isSupported:v,pyramidResolutions:w,message:y,extent:f,isPseudoGeographic:a,affine:c?null:x,firstPyramidLevel:z,maximumPyramidLevel:D,pyramidBlockWidth:B,pyramidBlockHeight:C,tileBoundary:I,metadata:m}}function K(b,a){return(b=b.get("PLANARCONFIGURATION")?.values)?2===b[0]:a?a.isBSQ:!1}function U(b){return b.filter(a=>1===t(a,"NEWSUBFILETYPE"))}function V(b){return b.filter(a=>{const d=4===((t(a,"NEWSUBFILETYPE")??
0)&4);a=4===t(a,"PHOTOMETRICINTERPRETATION");return d&&a})}function ea(b){const {littleEndian:a,isBigTiff:d,firstIFDPos:h}=fa(b);var l=h;const e=[];do if(l=ha(b,a,l,0,J.tiffTags,d?8:4),l.success)e.push(l.ifd),l=l.nextIFD;else break;while(0<l);b=N(e);l=U(e);const c=V(e);return{...b,littleEndian:a,isBigTiff:d,ifds:e,pyramidIFDs:l,maskIFDs:c}}function Q(b,a,d){const h=b.getUint32(a,d);b=b.getUint32(a+4,d);return d?4294967296*b+h:4294967296*h+b}function M(b,a,d,h){return h?Q(b,a,d):b.getUint32(a,d)}function fa(b){var a=
new DataView(b,0,16),d=a.getUint16(0,!1);b=null;if(18761===d)b=!0;else if(19789===d)b=!1;else throw Error("unexpected endianess byte");var h=a.getUint16(2,b);if(42!==h&&43!==h)throw Error("unexpected tiff identifier");d=4;if(h=43===h){const l=a.getUint16(d,b);d+=2;if(8!==l)throw Error("unsupported bigtiff version");if(0!==a.getUint16(d,b))throw Error("unsupported bigtiff version");d+=2}a=M(a,d,b,h);return{littleEndian:b,isBigTiff:h,firstIFDPos:a}}function ha(b,a,d,h=0,l=J.tiffTags,e=4){d=P(b,a,d,
h,l,e);let c;const g=d.ifd;g&&(J.ifdTags.forEach((f,p)=>{g.has(p)&&(c=g.get(p),c.data=P(b,a,c.valueOffset-h,h,f).ifd)}),g.has("GEOKEYDIRECTORY")&&(c=g.get("GEOKEYDIRECTORY"),(l=c.values)&&4<l.length&&(l=l[0]+"."+l[1]+"."+l[2],c.data=P(b,a,c.valueOffset+6-h,h,J.geoKeys,2).ifd,c.data&&c.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[l]}))),g.has("XMP")&&(c=g.get("XMP"),l=c.values,"number"===typeof l[0]&&7===c.type&&(c.values=[ia.bytesToUTF8(new Uint8Array(l))])));return d}
function da(b){const {width:a,height:d,tileHeight:h,tileWidth:l}=b,e=b.planes,c=l?l*h:a*d;b=t(b.ifds[0],"BITSPERSAMPLE");let g="";c*e>2**30/(8<b?b/8:1)&&(g=l?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return g}const ca=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],na=new Set([1,5,6,7,8,34712,34887]),pa=(b,a,d)=>{if(!(b&&0<b.length&&a&&d))return null;let h,l,e;const c=b[0].length,g=b.length,f=new Uint8Array(c);for(let n=0;n<g;n++)if(h=
b[n],l=a[n],e=d[n],0===n)for(var p=0;p<c;p++)f[p]=h[p]<l||h[p]>e?0:1;else for(p=0;p<c;p++)f[p]&&(f[p]=h[p]<l||h[p]>e?0:1);return f},oa=b=>{if(!b)return null;var a=b.match(/<Item(.*?)Item>/gi);if(!a||0===a.length)return null;b=new Map;var d;for(var h=0;h<a.length;h++){var l=a[h];var e=l.slice(6,l.indexOf("\x3e"));var c=l.indexOf("sample\x3d");-1<c&&(d=l.slice(c+8,l.indexOf('"',c+8)));c=l.indexOf("name\x3d");-1<c&&(e=l.slice(c+6,l.indexOf('"',c+6)));e&&(l=l.slice(l.indexOf("\x3e")+1,l.indexOf("\x3c/Item\x3e")).trim(),
null!=d?b.has(e)?b.get(e)[d]=l:b.set(e,[l]):b.set(e,l));d=null}a=b.get("STATISTICS_MINIMUM");e=b.get("STATISTICS_MAXIMUM");h=b.get("STATISTICS_MEAN");l=b.get("STATISTICS_STDDEV");d=null;if(a&&e)for(d=[],c=0;c<a.length;c++)d.push({min:parseFloat(a[c]),max:parseFloat(e[c]),avg:h&&parseFloat(h[c]),stddev:l&&parseFloat(l[c])});e=b.get("BandName");h=b.get("WavelengthMin");l=b.get("WavelengthMax");a=null;if(e)for(a=[],c=0;c<e.length;c++)a.push({BandName:e[c],WavelengthMin:h&&parseFloat(h[c]),WavelengthMax:l&&
parseFloat(l[c])});e=b.get("DataType");return{statistics:d,bandProperties:a,dataType:e,rawMetadata:b}};H.decode=async function(b,a={}){var d=a.pyramidLevel||0,h=a.headerInfo||ea(b);const {ifds:l,noData:e}=h;if(0===l.length)throw Error("no valid image file directory");var c=da(h);if(c)throw c;c=null;var g=-1===d?l[l.length-1]:l[d];a=e??a.noDataValue;if(h.tileWidth)c=await ma(b,h,g);else{{const D=Z.isPlatformLittleEndian===h.littleEndian,C=g.get("STRIPOFFSETS")?.values;if(void 0===C)c=null;else{var {width:f,
height:p,pixelType:n}=N([g]);d=t(g,"SAMPLESPERPIXEL")||h.planes;var k=t(g,"PHOTOMETRICINTERPRETATION");c=f*p;var u=t(g,"BITSPERSAMPLE"),m=L(n),v=new m(c*d),y=g.get("STRIPBYTECOUNTS")?.values,w=t(g,"ROWSPERSTRIP"),r=t(g,"COMPRESSION")??1,q;if(0===u%8)for(g=0;g<C.length;g++){var E=g*w*f*d;if("u8"===n||"s8"===n||D)if(8===r||32946===r){var x=new Uint8Array(b,C[g],y[g]);x=S(x);var B=x.buffer}else 6===r?(x=new Uint8Array(b,C[g],y[g]),x=R(x,d,k),B=x.buffer):5===r?(x=X.decode(b,C[g],y[g],h.littleEndian),
B=x.buffer):B=b.slice(C[g],C[g]+y[g]);else{if(6===r||8===r||32946===r){x=new Uint8Array(b,C[g],y[g]);var z=S(x);B=z.buffer}else B=new ArrayBuffer(y[g]),x=new Uint8Array(b,C[g],y[g]),z=new Uint8Array(B);switch(n){case "u16":case "s16":for(q=0;q<x.length;q+=2)z[q]=x[q+1],z[q+1]=x[q];break;case "u32":case "s32":case "f32":for(q=0;q<x.length;q+=4)z[q]=x[q+3],z[q+1]=x[q+2],z[q+2]=x[q+1],z[q+3]=x[q]}}B=ba(B,u);q=new m(B);v.set(q,E)}k=[];if(1===d)k.push(v);else for(g=0;g<d;g++){h=new m(c);for(b=0;b<c;b++)h[b]=
v[b*d+g];k.push(h)}c={width:f,height:p,pixelType:n,pixels:k}}}}if(!c)return c;null!=a&&Y.convertNoDataToMask(c,a);return c};H.decodeTileOrStrip=async function(b,a){const {headerInfo:d,ifd:h,offsets:l,sizes:e}=a;var c=[];for(var g=0;g<l.length;g++){0===e[g]?1:0;var f=await T(b,d.littleEndian,h,l[g],e[g]||b.byteLength);c.push(f)}var p=K(h,d);b=t(h,"BITSPERSAMPLE");g=t(h,"SAMPLEFORMAT")??1;g=O(g,b);var n=t(h,"SAMPLESPERPIXEL")||d.planes;const k=L(g);f=t(h,"TILEWIDTH");const u=t(h,"TILELENGTH");var m=
t(h,"COMPRESSION")??1;const v=f*u;b=[];let y=c[0];const w=34887===m;for(let r=0;r<n;r++){m=new k(v);if(c.length===n)y=c[r],y.length===v&&(m=y);else if(y.length)if(p||w)m=y.length===v?y:y.slice(v*r,v*(r+1));else for(let q=0;q<v;q++)m[q]=y[q*n+r];b.push(m)}c=d.noData?d.noData[0]:a.noDataValue;p=(n=d.metadata?d.metadata.statistics:null)?n.map(r=>r.min):null;n=n?n.map(r=>r.max):null;g={pixelType:g,width:f,height:u,pixels:b,noDataValue:c};null!=c?Y.convertNoDataToMask(g,c):p&&n&&a.applyMinMaxConstraint&&
(g.mask=pa(b,p,n));return g};H.getImageInfo=N;H.getMaskIFDs=V;H.getPyramidIFDs=U;H.isBSQConfig=K;H.parseFieldValues=aa;H.parseHeader=ea;H.parseIFD=ha;H.parseSignature=fa;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})});