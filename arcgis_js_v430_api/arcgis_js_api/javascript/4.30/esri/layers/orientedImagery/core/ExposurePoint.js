// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../geometry ../../../core/Clonable ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./CameraOrientation ./cameraOrientationFactory ./utils ../enums/CameraOrientationType ../../../geometry/Point".split(" "),
function(d,b,t,p,u,v,h,w,x,k,y,q,z,A,n,B,r){b=class extends t.ClonableMixin(u.JSONSupport){constructor(c){super(c);this.sourceMap=this.name=this.elevationSource=this.elevation=this.cameraOrientation=null}read(c,a){const e={},{attributes:f,layer:g,geometry:l}=c;c={};for(const m in f)e[m.toLowerCase()]=f[m],c[m.toLowerCase()]=m;super.read({geometry:l,layer:g??{},sourceMap:c,...e},a)}write(c,a){c=super.write(c,a);({sourceMap:a}=this);if(!a||!c)return c;const e={};for(const f in c){const g=a[f.toLowerCase()];
g&&(e[g]=c[f])}return e}readCameraHeading(c,a){const {cameraheading:e,camheading:f,layer:g}=a;return e??f??g.cameraHeading}readCameraHeight(c,a){const {cameraheight:e,avghtag:f,layer:g}=a;return e??f??g.cameraHeight}readCamOffset(c,a){const {cameraoffset:e,camoffset:f}=a;return e?.split(";").map(Number)??f?.split(";").map(Number)??null}writeCameraOffset(c,a){c&&(a.cameraOffset=c.join(";"))}readCameraOrientation(c,a){const {cameraorientation:e,camori:f}=a;return e??f}readCameraPitch(c,a){const {camerapitch:e,
campitch:f,layer:g}=a;return e??f??g.cameraPitch}readCameraRoll(c,a){const {cameraroll:e,camroll:f,layer:g}=a;return e??f??g.cameraRoll}readDepthImage(c,a){const {depthimage:e,depthimg:f,layer:g}=a,{depthImagePathPrefix:l,depthImagePathSuffix:m}=g??{};return n.appendPrefixAndSuffix(e??f??null,l,m)}readElevationSource(c,a){const {elevationsource:e,layer:f}=a,{demPathSuffix:g,demPathPrefix:l}=f;return e?(c=this._parseIfJSON(e),n.getEffectiveElevationSource(c,l,g)):f.effectiveElevationSource}readFarDistance(c,
a){const {fardistance:e,fardist:f,layer:g}=a;return e??f??g.farDistance}readHFOV(c,a){const {horizontalfieldofview:e,hfov:f,layer:g}=a;return e??f??g.horizontalFieldOfView}readImageURL(c,a){const {imagepath:e,layer:f}=a;if(!e)throw new p("exposure-point:missing-attribute-value","a value for imagePath is missing in attribute table",{exposurePoint:this});const {imagePathPrefix:g,imagePathSuffix:l}=f;return n.appendPrefixAndSuffix(e,g,l)}readImageRotation(c,a){const {imagerotation:e,imgrot:f,layer:g}=
a;return e??f??g.imageRotation}get isHorizontal(){return"horizontal"===this.orientedImageryType}get isInspection(){return"inspection"===this.orientedImageryType}get isNadir(){return"nadir"===this.orientedImageryType}get isOblique(){return"oblique"===this.orientedImageryType}get isSpherical(){return"360"===this.orientedImageryType}get location(){const {cameraOrientation:c,cameraHeight:a,elevation:e}=this;if(c){const {type:g,x:l,y:m,z:C,horizontalWKID:D}=c;return new r({x:l,y:m,z:C,spatialReference:{wkid:g===
B.CameraOrientationType.LTP?4326:D}})}if("number"!==typeof a){throw new p("exposure-point:missing-default-value","a value for cameraHeight is missing in default properties");throw void 0;}const f=this.geometry.clone();f.z=f.hasZ?f.z:(e??0)+a;return f}readNearDistance(c,a){const {neardistance:e,neardist:f,layer:g}=a;return e??f??g.nearDistance}readOrientationAccuracy(c,a){const {accuracy:e,orientationaccuracy:f}=a;return f?.split(";").map(Number)??e?.split(";").map(Number)??null}writeOrientationAccuracy(c,
a){c&&(a.orientationAccuracy=c.join(";"))}readOIType(c,a){const {orientedimagerytype:e,oitype:f,camerapitch:g,campitch:l,layer:m}=a;c=n.orientedImageryTypeMap.read(e??f??m.orientedImageryType);a=g??l??m.cameraPitch;return"oblique"===c?10>a?"nadir":"oblique":c}readVFOV(c,a){const {verticalfieldofview:e,vfov:f,layer:g}=a;return e??f??g.verticalFieldOfView}_parseIfJSON(c){let a=null;try{a=JSON.parse(c)}catch(e){v.getLogger(this).error("couldn't parse the given elevation source JSON",c,e)}return a}};
d.__decorate([h.property({type:Date,json:{write:{enabled:!0,target:"aquisitionDate"},name:"acquisitiondate"}})],b.prototype,"acquisitionDate",void 0);d.__decorate([h.property({type:Number,json:{write:!0,read:{source:["cameraheading","camheading","layer.cameraHeading"]}}})],b.prototype,"cameraHeading",void 0);d.__decorate([k.reader("cameraHeading")],b.prototype,"readCameraHeading",null);d.__decorate([h.property({type:Number,json:{write:!0}})],b.prototype,"cameraHeight",void 0);d.__decorate([k.reader("cameraHeight",
["cameraheight","avghtag","layer.cameraHeight"])],b.prototype,"readCameraHeight",null);d.__decorate([h.property()],b.prototype,"cameraOffset",void 0);d.__decorate([k.reader("cameraOffset",["cameraoffset","camoffset"])],b.prototype,"readCamOffset",null);d.__decorate([q.writer("cameraOffset")],b.prototype,"writeCameraOffset",null);d.__decorate([h.property({json:{write:{writer:(c,a,e)=>{a[e]=c.toString()}}},type:z}),w.cast(c=>c?A.getCameraOrientation(c):null)],b.prototype,"cameraOrientation",void 0);
d.__decorate([k.reader("cameraOrientation",["cameraorientation","camori"])],b.prototype,"readCameraOrientation",null);d.__decorate([h.property({type:Number,json:{write:!0}})],b.prototype,"cameraPitch",void 0);d.__decorate([k.reader("cameraPitch",["camerapitch","campitch","layer.cameraPitch"])],b.prototype,"readCameraPitch",null);d.__decorate([h.property({type:Number,json:{write:!0}})],b.prototype,"cameraRoll",void 0);d.__decorate([k.reader("cameraRoll",["cameraroll","camroll","layer.cameraRoll"])],
b.prototype,"readCameraRoll",null);d.__decorate([h.property({json:{write:!0},type:String})],b.prototype,"depthImage",void 0);d.__decorate([k.reader("depthImage",["depthimage","depthimg"])],b.prototype,"readDepthImage",null);d.__decorate([h.property({type:Number,json:{write:!0}})],b.prototype,"elevation",void 0);d.__decorate([h.property({json:{write:!0},clonable:"reference"})],b.prototype,"elevationSource",void 0);d.__decorate([k.reader("elevationSource",["elevationsource","layer.effectiveElevationSource"])],
b.prototype,"readElevationSource",null);d.__decorate([h.property({json:{name:"exposurestationid",write:{target:"exposureStationId"}},type:String})],b.prototype,"exposureStationId",void 0);d.__decorate([h.property({type:Number,json:{write:!0}})],b.prototype,"farDistance",void 0);d.__decorate([k.reader("farDistance",["fardistance","fardist","layer.farDistance"])],b.prototype,"readFarDistance",null);d.__decorate([h.property({type:r,json:{name:"geometry"}})],b.prototype,"geometry",void 0);d.__decorate([h.property({type:Number,
json:{write:!0}})],b.prototype,"horizontalFieldOfView",void 0);d.__decorate([k.reader("horizontalFieldOfView",["horizontalfieldofview","hfov","layer.horizontalFieldOfView"])],b.prototype,"readHFOV",null);d.__decorate([h.property({json:{write:!0},type:String})],b.prototype,"imagePath",void 0);d.__decorate([k.reader("imagePath",["imagepath"])],b.prototype,"readImageURL",null);d.__decorate([h.property({type:Number,json:{write:!0}})],b.prototype,"imageRotation",void 0);d.__decorate([k.reader("imageRotation",
["imagerotation","imgrot","layer.imageRotation"])],b.prototype,"readImageRotation",null);d.__decorate([h.property()],b.prototype,"isHorizontal",null);d.__decorate([h.property()],b.prototype,"isInspection",null);d.__decorate([h.property()],b.prototype,"isNadir",null);d.__decorate([h.property()],b.prototype,"isOblique",null);d.__decorate([h.property()],b.prototype,"isSpherical",null);d.__decorate([h.property()],b.prototype,"location",null);d.__decorate([h.property({json:{write:!0},type:String})],b.prototype,
"name",void 0);d.__decorate([h.property({type:Number,json:{write:!0}})],b.prototype,"nearDistance",void 0);d.__decorate([k.reader("nearDistance",["neardistance","neardist","layer.nearDistance"])],b.prototype,"readNearDistance",null);d.__decorate([h.property({json:{write:!0,name:"objectid"},type:Number})],b.prototype,"objectId",void 0);d.__decorate([h.property()],b.prototype,"orientationAccuracy",void 0);d.__decorate([k.reader("orientationAccuracy",["accuracy","orientationaccuracy"])],b.prototype,
"readOrientationAccuracy",null);d.__decorate([q.writer("orientationAccuracy")],b.prototype,"writeOrientationAccuracy",null);d.__decorate([x.enumeration(n.orientedImageryTypeMap)],b.prototype,"orientedImageryType",void 0);d.__decorate([k.reader("orientedImageryType",["orientedimagerytype","oitype","layer.orientedImageryType"])],b.prototype,"readOIType",null);d.__decorate([h.property({type:Number,json:{name:"sortorder",write:{target:"sortOrder"}}})],b.prototype,"sortOrder",void 0);d.__decorate([h.property({type:Object})],
b.prototype,"sourceMap",void 0);d.__decorate([h.property({type:Number,json:{write:!0}})],b.prototype,"verticalFieldOfView",void 0);d.__decorate([k.reader("verticalFieldOfView",["verticalfieldofview","vfov","layer.verticalFieldOfView"])],b.prototype,"readVFOV",null);return b=d.__decorate([y.subclass("esri.layers.orientedImagery.core.ExposurePoint")],b)});