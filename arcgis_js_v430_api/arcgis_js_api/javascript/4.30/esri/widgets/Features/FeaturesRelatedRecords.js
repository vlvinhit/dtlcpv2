// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("require ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../Widget ./css ../../chunks/componentsUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),function(h,e,f,c,w,x,n,p,k,q,y,r,d){c=class extends p{constructor(a,b){super(a,b);this.messages=null;this.closed=!1;this.closable=!0;this._handleOpenRelatedFeature=g=>{this.emit("open-related-feature",
{feature:g})}}loadDependencies(){return q.loadCalciteComponents({action:()=>new Promise((a,b)=>h(["../../chunks/calcite-action"],a,b)),"flow-item":()=>new Promise((a,b)=>h(["../../chunks/calcite-flow-item"],a,b))})}render(){var {flowItems:a}=this;a=a?.toArray();return d.tsx(d.tsxFragment,null,a?.map(b=>this._renderRelatedRecordsFlowItem(b)))}_handleCloseClick(){this.emit("close")}_handleExitClick(){this.emit("exit")}_handleRelatedRecordsBackClick(){const a=this.flowItems?.pop();a&&("showAllEnabled"in
a.viewModel&&(a.viewModel.showAllEnabled=!1),a&&(a.viewModel=null,a.destroy()))}_renderRelatedRecordsFlowItem(a){const {messages:b,closable:g,closed:t}=this,u="graphic"in a&&!a.isTable&&a.graphic?.geometry,l=b.exitRelatedRecords,m=b.selectFeature;return d.tsx("calcite-flow-item",{bind:this,closable:g,closed:t,description:this._getRelatedRecordsFlowItemDescription(a),heading:a.title??"",key:`flow-item-${a.viewModel.uid}`,onCalciteFlowItemBack:v=>{v.preventDefault();this._handleRelatedRecordsBackClick()},
onCalciteFlowItemClose:this._handleCloseClick},d.tsx("calcite-action",{appearance:"transparent",bind:this,class:k.css.actionExit,icon:"move-up",key:"exit-related-records-action",onclick:this._handleExitClick,slot:"header-actions-start",text:l,title:l}),u?d.tsx("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-related-feature-action",onclick:()=>this._handleOpenRelatedFeature(a),slot:"header-actions-end",text:m,title:m}):null,d.tsx("div",{class:k.css.container},a.render()))}_getRelatedRecordsFlowItemDescription(a){return"featureCountDescription"in
a?a.featureCountDescription:a.viewModel.description??""}};e.__decorate([f.property()],c.prototype,"flowItems",void 0);e.__decorate([f.property(),r.messageBundle("esri/widgets/Features/t9n/Features")],c.prototype,"messages",void 0);e.__decorate([f.property()],c.prototype,"closed",void 0);e.__decorate([f.property()],c.prototype,"closable",void 0);return c=e.__decorate([n.subclass("esri.widgets.Features.FeaturesRelatedRecords")],c)});