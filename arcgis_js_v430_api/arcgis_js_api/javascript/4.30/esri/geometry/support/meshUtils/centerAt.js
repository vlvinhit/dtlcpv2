// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.30/esri/copyright.txt for details.
//>>built
define("exports ../../../core/Logger ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../../projection/projectPointToVector ../MeshGeoreferencedVertexSpace ../MeshLocalVertexSpace ../meshVertexSpaceUtils ./geographicUtils ./projection ./vertexSpaceConversion".split(" "),function(n,u,p,g,k,v,q,r,w,f,t){const h=()=>u.getLogger("esri.geometry.support.meshUtils.centerAt"),l=g.create(),e=g.create(),x=g.create();n.centerAt=function(a,b,m){if(a.vertexAttributes?.position){var {vertexSpace:d}=
a,c=m?.origin??a.anchor;m=w.performGlobalOperation(h,d,c.spatialReference,m?.geographic);if(r.isRelativeVertexSpace(d))({vertexSpace:d}=a),r.isRelativeVertexSpace(d)&&(k.projectPointToVector(b,l,a.spatialReference)?k.projectPointToVector(c,e,a.spatialReference)?(a=p.subtract(x,l,e),d.origin=p.add(g.create(),d.origin,a)):(b=a.origin,e[0]=b.x,e[1]=b.y,e[2]=b.z,f.logProjectionError(h(),c.spatialReference,a.spatialReference,f.loadProjectErrorMessage)):f.logProjectionError(h(),b.spatialReference,a.spatialReference,
f.loadProjectErrorMessage));else if(m){if(c=g.fromValues(c.x,c.y,c.z??0),c=t.convertVertexSpace(a,new q({origin:c})))if(b=g.fromValues(b.x,b.y,b.z??0),b=t.convertVertexSpace({vertexAttributes:c,spatialReference:a.spatialReference,vertexSpace:new q({origin:b})},new v)){var {position:y,normal:z,tangent:A}=b;a.vertexAttributes.position=y;a.vertexAttributes.normal=z;a.vertexAttributes.tangent=A;a.vertexAttributesChanged()}}else if(k.projectPointToVector(b,l,a.spatialReference))if(k.projectPointToVector(c,
e,a.spatialReference)){if(b=a.vertexAttributes.position)for(c=0;c<b.length;c+=3)for(d=0;3>d;d++)b[c+d]+=l[d]-e[d];a.vertexAttributesChanged()}else b=a.origin,e[0]=b.x,e[1]=b.y,e[2]=b.z,f.logProjectionError(h(),c.spatialReference,a.spatialReference,f.loadProjectErrorMessage);else f.logProjectionError(h(),b.spatialReference,a.spatialReference,f.loadProjectErrorMessage)}};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});