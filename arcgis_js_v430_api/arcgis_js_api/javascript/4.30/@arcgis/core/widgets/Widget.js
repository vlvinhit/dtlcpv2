/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../intl.js";import{S as t,k as s}from"../core/Accessor.js";import{b as n}from"../chunks/domUtils.js";import r from"../core/Evented.js";import{debounce as o,throwIfNotAbortError as l,i,o as a}from"../core/promiseUtils.js";import{clone as c}from"../core/lang.js";import{L as d}from"../chunks/Logger.js";import{d as $}from"../chunks/maybe.js";import{EsriPromiseMixin as h}from"../core/Promise.js";import{watch as p,when as m,syncAndInitial as u}from"../core/reactiveUtils.js";import{g as f}from"../chunks/uuid.js";import{property as g}from"../core/accessorSupport/decorators/property.js";import{cast as y}from"../core/accessorSupport/decorators/cast.js";import{subclass as v}from"../core/accessorSupport/decorators/subclass.js";import{r as b}from"../chunks/tracking.js";import{d as w}from"../chunks/projector.js";import{g as k}from"../chunks/assets.js";import{makeAbsolute as S}from"../core/urlUtils.js";import{w as j,i as N,p as _,a as R}from"../chunks/jsxWidgetSupport.js";import{j as E,l as L,m as T,c as C,n as x}from"../chunks/widgetUtils.js";import{o as A}from"../chunks/locale.js";import{f as P}from"../chunks/messages.js";import"../chunks/date.js";import"../chunks/jsonMap.js";import"../config.js";import"../chunks/timeZoneUtils.js";import"../chunks/datetime.js";import"../chunks/number.js";import"../chunks/substitute.js";import"../request.js";import"../kernel.js";import"../core/Error.js";import"../core/JSONSupport.js";import"../chunks/utils.js";import"../chunks/handleUtils.js";import"../core/Handles.js";import"../chunks/metadata.js";import"../chunks/ObservableBase.js";import"../core/scheduling.js";import"../chunks/ensureType.js";import"../chunks/asyncUtils.js";import"../core/Collection.js";import"../chunks/shared.js";import"../chunks/SimpleObservable.js";const O={handleInterceptedEvent:(e,t,s,n)=>(e.scheduleRender(),t.properties[`on${n.type}`].apply(t.properties.bind||s,[n]))},F={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,s)=>{"-"===t.charAt(0)?e.style.setProperty(t,s):e.style[t]=s}},M=(e,t,s=!1)=>{let n=e;return t.forEach(((e,r)=>{const o=n?.children?(l=t=>t.domNode===e,n.children.find(l)):void 0;var l;s&&!o&&r!==t.length-1||(n=o)})),n},I="calcite-mode-auto",U="calcite-mode-dark",D={autoMode:I,darkMode:U,lightMode:"calcite-mode-light",rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};var H={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},B=Object.defineProperty,W=e=>{const t=new URL(e,it.$resourcesUrl$);return t.origin!==rt.location.origin?t.href:t.pathname},z={},V=e=>"object"==(e=typeof e)||"function"===e;((e,t)=>{for(var s in t)B(e,s,{get:t[s],enumerable:!0})})({},{err:()=>G,map:()=>Q,ok:()=>q,unwrap:()=>Z,unwrapErr:()=>Y});var q=e=>({isOk:!0,isErr:!1,value:e}),G=e=>({isOk:!1,isErr:!0,value:e});function Q(e,t){if(e.isOk){const s=t(e.value);return s instanceof Promise?s.then((e=>q(e))):q(s)}if(e.isErr){const t=e.value;return G(t)}throw"should never get here"}var J,K,X,Z=e=>{if(e.isOk)return e.value;throw e.value},Y=e=>{if(e.isErr)return e.value;throw e.value},ee="http://www.w3.org/1999/xlink",te=(e,t,...s)=>{let n=null,r=null,o=null,l=!1,i=!1;const a=[],c=t=>{for(let s=0;s<t.length;s++)n=t[s],Array.isArray(n)?c(n):null!=n&&"boolean"!=typeof n&&((l="function"!=typeof e&&!V(n))&&(n=String(n)),l&&i?a[a.length-1].$text$+=n:a.push(l?se(null,n):n),i=l)};if(c(s),t){t.key&&(r=t.key),t.name&&(o=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,a,re);const d=se(e,null);return d.$attrs$=t,a.length>0&&(d.$children$=a),d.$key$=r,d.$name$=o,d},se=(e,t)=>({$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),ne={},re={forEach:(e,t)=>e.map(oe).forEach(t),map:(e,t)=>e.map(oe).map(t).map(le)},oe=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),le=e=>{if("function"==typeof e.vtag){const t={...e.vattrs};return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),te(e.vtag,t,...e.vchildren||[])}const t=se(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},ie=(e,t,s)=>{const n=e;return{emit:e=>ae(n,t,{bubbles:!!(4&s),composed:!!(2&s),cancelable:!!(1&s),detail:e})}},ae=(e,t,s)=>{const n=it.ce(t,s);return e.dispatchEvent(n),n},ce=new WeakMap,de=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),$e=(e,t,s,n,r,o)=>{if(s!==n){let l=et(e,t),i=t.toLowerCase();if("class"===t){const t=e.classList,r=pe(s),o=pe(n);t.remove(...r.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!r.includes(e))))}else if("style"===t){for(const t in s)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)s&&n[t]===s[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const a=V(n);if((l||a&&null!==n)&&!r)try{if(e.tagName.includes("-"))e[t]=n;else{const r=n??"";"list"===t?l=!1:null!=s&&e[t]==r||(e[t]=r)}}catch(e){}let c=!1;i!==(i=i.replace(/^xlink\:?/,""))&&(t=i,c=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(ee,t):e.removeAttribute(t)):(!l||4&o||r)&&!a&&(n=!0===n?"":n,c?e.setAttributeNS(ee,t,n):e.setAttribute(t,n))}else if(t="-"===t[2]?t.slice(3):et(rt,i)?i.slice(2):i[2]+t.slice(3),s||n){const r=t.endsWith(me);t=t.replace(ue,""),s&&it.rel(e,t,s,r),n&&it.ael(e,t,n,r)}}},he=/\s/,pe=e=>e?e.split(he):[],me="Capture",ue=new RegExp(me+"$"),fe=(e,t,s,n)=>{const r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||z,l=t.$attrs$||z;for(n of ge(Object.keys(o)))n in l||$e(r,n,o[n],void 0,s,t.$flags$);for(n of ge(Object.keys(l)))$e(r,n,o[n],l[n],s,t.$flags$)};function ge(e){return e.includes("ref")?[...e.filter((e=>"ref"!==e)),"ref"]:e}var ye=!1,ve=!1,be=!1,we=!1,ke=(e,t,s,n)=>{var r;const o=t.$children$[s];let l,i,a,c=0;if(ye||(be=!0,"slot"===o.$tag$&&(J&&n.classList.add(J+"-s"),o.$flags$|=o.$children$?2:1)),null!==o.$text$)l=o.$elm$=ot.createTextNode(o.$text$);else if(1&o.$flags$)l=o.$elm$=ot.createTextNode("");else{if(we||(we="svg"===o.$tag$),l=o.$elm$=ot.createElementNS(we?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&o.$flags$?"slot-fb":o.$tag$),we&&"foreignObject"===o.$tag$&&(we=!1),fe(null,o,we),null!=J&&l["s-si"]!==J&&l.classList.add(l["s-si"]=J),o.$children$)for(c=0;c<o.$children$.length;++c)i=ke(e,o,c,l),i&&l.appendChild(i);"svg"===o.$tag$?we=!1:"foreignObject"===l.tagName&&(we=!0)}return l["s-hn"]=X,3&o.$flags$&&(l["s-sr"]=!0,l["s-cr"]=K,l["s-sn"]=o.$name$||"",l["s-rf"]=null==(r=o.$attrs$)?void 0:r.ref,a=e&&e.$children$&&e.$children$[s],a&&a.$tag$===o.$tag$&&e.$elm$&&Se(e.$elm$,!1)),l},Se=(e,t)=>{it.$flags$|=1;const s=Array.from(e.childNodes);if(e["s-sr"]&&H.experimentalSlotFixes){let t=e;for(;t=t.nextSibling;)t&&t["s-sn"]===e["s-sn"]&&t["s-sh"]===X&&s.push(t)}for(let e=s.length-1;e>=0;e--){const n=s[e];n["s-hn"]!==X&&n["s-ol"]&&(Ee(n).insertBefore(n,Re(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,be=!0),t&&Se(n,t)}it.$flags$&=-2},je=(e,t,s,n,r,o)=>{let l,i=e["s-cr"]&&e["s-cr"].parentNode||e;for(i.shadowRoot&&i.tagName===X&&(i=i.shadowRoot);r<=o;++r)n[r]&&(l=ke(null,s,r,e),l&&(n[r].$elm$=l,i.insertBefore(l,Re(t))))},Ne=(e,t,s)=>{for(let n=t;n<=s;++n){const t=e[n];if(t){const e=t.$elm$;Pe(t),e&&(ve=!0,e["s-ol"]?e["s-ol"].remove():Se(e,!0),e.remove())}}},_e=(e,t,s=!1)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:!!s||e.$key$===t.$key$),Re=e=>e&&e["s-ol"]||e,Ee=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Le=(e,t,s=!1)=>{const n=t.$elm$=e.$elm$,r=e.$children$,o=t.$children$,l=t.$tag$,i=t.$text$;let a;null===i?(we="svg"===l||"foreignObject"!==l&&we,("slot"!==l||ye)&&fe(e,t,we),null!==r&&null!==o?((e,t,s,n,r=!1)=>{let o,l,i=0,a=0,c=0,d=0,$=t.length-1,h=t[0],p=t[$],m=n.length-1,u=n[0],f=n[m];for(;i<=$&&a<=m;)if(null==h)h=t[++i];else if(null==p)p=t[--$];else if(null==u)u=n[++a];else if(null==f)f=n[--m];else if(_e(h,u,r))Le(h,u,r),h=t[++i],u=n[++a];else if(_e(p,f,r))Le(p,f,r),p=t[--$],f=n[--m];else if(_e(h,f,r))"slot"!==h.$tag$&&"slot"!==f.$tag$||Se(h.$elm$.parentNode,!1),Le(h,f,r),e.insertBefore(h.$elm$,p.$elm$.nextSibling),h=t[++i],f=n[--m];else if(_e(p,u,r))"slot"!==h.$tag$&&"slot"!==f.$tag$||Se(p.$elm$.parentNode,!1),Le(p,u,r),e.insertBefore(p.$elm$,h.$elm$),p=t[--$],u=n[++a];else{for(c=-1,d=i;d<=$;++d)if(t[d]&&null!==t[d].$key$&&t[d].$key$===u.$key$){c=d;break}c>=0?(l=t[c],l.$tag$!==u.$tag$?o=ke(t&&t[a],s,c,e):(Le(l,u,r),t[c]=void 0,o=l.$elm$),u=n[++a]):(o=ke(t&&t[a],s,a,e),u=n[++a]),o&&Ee(h.$elm$).insertBefore(o,Re(h.$elm$))}i>$?je(e,null==n[m+1]?null:n[m+1].$elm$,s,n,a,m):a>m&&Ne(t,i,$)})(n,r,t,o,s):null!==o?(null!==e.$text$&&(n.textContent=""),je(n,null,t,o,0,o.length-1)):null!==r&&Ne(r,0,r.length-1),we&&"svg"===l&&(we=!1)):(a=n["s-cr"])?a.parentNode.textContent=i:e.$text$!==i&&(n.data=i)},Te=e=>{const t=e.childNodes;for(const e of t)if(1===e.nodeType){if(e["s-sr"]){const s=e["s-sn"];e.hidden=!1;for(const n of t)if(n!==e)if(n["s-hn"]!==e["s-hn"]||""!==s){if(1===n.nodeType&&(s===n.getAttribute("slot")||s===n["s-sn"])||3===n.nodeType&&s===n["s-sn"]){e.hidden=!0;break}}else if(1===n.nodeType||3===n.nodeType&&""!==n.textContent.trim()){e.hidden=!0;break}}Te(e)}},Ce=[],xe=e=>{let t,s,n;for(const r of e.childNodes){if(r["s-sr"]&&(t=r["s-cr"])&&t.parentNode){s=t.parentNode.childNodes;const e=r["s-sn"];for(n=s.length-1;n>=0;n--)if(t=s[n],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==r["s-hn"]&&!H.experimentalSlotFixes)if(Ae(t,e)){let s=Ce.find((e=>e.$nodeToRelocate$===t));ve=!0,t["s-sn"]=t["s-sn"]||e,s?(s.$nodeToRelocate$["s-sh"]=r["s-hn"],s.$slotRefNode$=r):(t["s-sh"]=r["s-hn"],Ce.push({$slotRefNode$:r,$nodeToRelocate$:t})),t["s-sr"]&&Ce.map((e=>{Ae(e.$nodeToRelocate$,t["s-sn"])&&(s=Ce.find((e=>e.$nodeToRelocate$===t)),s&&!e.$slotRefNode$&&(e.$slotRefNode$=s.$slotRefNode$))}))}else Ce.some((e=>e.$nodeToRelocate$===t))||Ce.push({$nodeToRelocate$:t})}1===r.nodeType&&xe(r)}},Ae=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,Pe=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Pe)},Oe=(e,t)=>(e.$flags$|=16,e.$ancestorComponent$,yt((()=>Fe(e,t)))),Fe=(e,t)=>{const s=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{}),r=s;let o;return o=We(r,t?"componentWillLoad":"componentWillUpdate"),o=Me(o,(()=>We(r,"componentWillRender"))),n(),Me(o,(()=>Ue(e,r,t)))},Me=(e,t)=>Ie(e)?e.then(t):t(),Ie=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,Ue=async(e,t,s)=>{const n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{});n["s-rc"],s&&(e=>{const t=e.$cmpMeta$,s=e.$hostElement$,n=t.$flags$,r=(t.$tagName$,()=>{}),o=((e,t,s)=>{var n;const r=de(t,s),o=st.get(r);if(e=11===e.nodeType?e:ot,o)if("string"==typeof o){e=e.head||e;let s,l=ce.get(e);if(l||ce.set(e,l=new Set),!l.has(r)){{s=ot.createElement("style"),s.innerHTML=o;const t=null!=(n=it.$nonce$)?n:function(e){var t,s,n;return null!=(n=null==(s=null==(t=ot.head)?void 0:t.querySelector('meta[name="csp-nonce"]'))?void 0:s.getAttribute("content"))?n:void 0}();null!=t&&s.setAttribute("nonce",t),e.insertBefore(s,e.querySelector("link"))}4&t.$flags$&&(s.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),l&&l.add(r)}}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return r})(s.shadowRoot?s.shadowRoot:s.getRootNode(),t,e.$modeName$);10&n&&(s["s-sc"]=o,s.classList.add(o+"-h"),2&n&&s.classList.add(o+"-s")),r()})(e);const o=(e.$cmpMeta$.$tagName$,()=>{});De(e,t,n,s),o(),r(),He(e)},De=(e,t,s,n)=>{try{t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(H.hasRenderFn||H.reflect)&&(H.vdomRender||H.reflect)&&(H.hydrateServerSide||((e,t,s=!1)=>{var n,r,o,l,i;const a=e.$hostElement$,c=e.$cmpMeta$,d=e.$vnode$||se(null,null),$=(h=t)&&h.$tag$===ne?t:te(null,null,t);var h;if(X=a.tagName,c.$attrsToReflect$&&($.$attrs$=$.$attrs$||{},c.$attrsToReflect$.map((([e,t])=>$.$attrs$[t]=a[e]))),s&&$.$attrs$)for(const e of Object.keys($.$attrs$))a.hasAttribute(e)&&!["key","ref","style","class"].includes(e)&&($.$attrs$[e]=a[e]);if($.$tag$=null,$.$flags$|=4,e.$vnode$=$,$.$elm$=d.$elm$=a.shadowRoot||a,J=a["s-sc"],ye=!!(1&c.$flags$),K=a["s-cr"],ve=!1,Le(d,$,s),it.$flags$|=1,be){xe($.$elm$);for(const e of Ce){const t=e.$nodeToRelocate$;if(!t["s-ol"]){const e=ot.createTextNode("");e["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=e,t)}}for(const e of Ce){const t=e.$nodeToRelocate$,i=e.$slotRefNode$;if(i){const e=i.parentNode;let s=i.nextSibling;{let o=null==(n=t["s-ol"])?void 0:n.previousSibling;for(;o;){let n=null!=(r=o["s-nr"])?r:null;if(n&&n["s-sn"]===t["s-sn"]&&e===n.parentNode){for(n=n.nextSibling;n===t||(null==n?void 0:n["s-sr"]);)n=null==n?void 0:n.nextSibling;if(!n||!n["s-nr"]){s=n;break}}o=o.previousSibling}}(!s&&e!==t.parentNode||t.nextSibling!==s)&&t!==s&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),e.insertBefore(t,s),1===t.nodeType&&(t.hidden=null!=(o=t["s-ih"])&&o)),t&&"function"==typeof i["s-rf"]&&i["s-rf"](t)}else 1===t.nodeType&&(s&&(t["s-ih"]=null!=(l=t.hidden)&&l),t.hidden=!0)}}if(ve&&Te($.$elm$),it.$flags$&=-2,Ce.length=0,H.experimentalScopedSlotChanges&&2&c.$flags$)for(const e of $.$elm$.childNodes)e["s-hn"]===X||e["s-sh"]||(s&&null==e["s-ih"]&&(e["s-ih"]=null!=(i=e.hidden)&&i),e.hidden=!0);K=void 0})(e,t,n))}catch(t){tt(t,e.$hostElement$)}return null},He=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$;e.$ancestorComponent$,We(t,"componentDidRender"),64&e.$flags$?We(t,"componentDidUpdate"):(e.$flags$|=64,We(t,"componentDidLoad"))},Be=e=>{{const t=Ze(e),s=t.$hostElement$.isConnected;return s&&2==(18&t.$flags$)&&Oe(t,!1),s}},We=(e,t,s)=>{if(e&&e[t])try{return e[t](s)}catch(e){tt(e)}},ze=(e,t,s)=>{var n;const r=e.prototype;if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$);s.map((([e,[s]])=>{(31&s||32&s)&&Object.defineProperty(r,e,{get(){return t=e,Ze(this).$instanceValues$.get(t);var t},set(s){((e,t,s,n)=>{const r=Ze(e),o=e,l=r.$instanceValues$.get(t),i=r.$flags$,a=o;var c,d;c=s,d=n.$members$[t][0],s=null==c||V(c)?c:4&d?"false"!==c&&(""===c||!!c):2&d?parseFloat(c):1&d?String(c):c;const $=Number.isNaN(l)&&Number.isNaN(s);if(s!==l&&!$){if(r.$instanceValues$.set(t,s),n.$watchers$&&128&i){const e=n.$watchers$[t];e&&e.map((e=>{try{a[e](s,l,t)}catch(e){tt(e,o)}}))}if(2==(18&i)){if(a.componentShouldUpdate&&!1===a.componentShouldUpdate(s,l,t))return;Oe(r,!1)}}})(this,e,s,t)},configurable:!0,enumerable:!0})}));{const o=new Map;r.attributeChangedCallback=function(e,s,n){it.jmp((()=>{var l;const i=o.get(e);if(this.hasOwnProperty(i))n=this[i],delete this[i];else{if(r.hasOwnProperty(i)&&"number"==typeof this[i]&&this[i]==n)return;if(null==i){const r=Ze(this),o=null==r?void 0:r.$flags$;if(o&&!(8&o)&&128&o&&n!==s){const r=this,o=null==(l=t.$watchers$)?void 0:l[e];null==o||o.forEach((t=>{null!=r[t]&&r[t].call(r,n,s,e)}))}return}}this[i]=(null!==n||"boolean"!=typeof this[i])&&n}))},e.observedAttributes=Array.from(new Set([...Object.keys(null!=(n=t.$watchers$)?n:{}),...s.filter((([e,t])=>15&t[0])).map((([e,s])=>{var n;const r=s[1]||e;return o.set(r,e),512&s[0]&&(null==(n=t.$attrsToReflect$)||n.push([e,r])),r}))]))}}return e},Ve=(e,t)=>{const s={$flags$:t[0],$tagName$:t[1]};s.$members$=t[2],s.$listeners$=t[3],s.$watchers$=e.$watchers$,s.$attrsToReflect$=[];const n=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Ye(this,s)},connectedCallback(){(e=>{if(!(1&it.$flags$)){const t=Ze(e),s=t.$cmpMeta$,n=(s.$tagName$,()=>{});1&t.$flags$?(Ge(e,t,s.$listeners$),(null==t?void 0:t.$lazyInstance$)?t.$lazyInstance$:(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then((()=>{t.$lazyInstance$}))):(t.$flags$|=1,12&s.$flags$&&(e=>{const t=e["s-cr"]=ot.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)})(e),s.$members$&&Object.entries(s.$members$).map((([t,[s]])=>{if(31&s&&e.hasOwnProperty(t)){const s=e[t];delete e[t],e[t]=s}})),(async(e,t,s,n)=>{let r;if(!(32&t.$flags$)&&(t.$flags$|=32,s.$lazyBundleId$,r=e.constructor,customElements.whenDefined(s.$tagName$).then((()=>t.$flags$|=128)),r.style)){let n=r.style;"string"!=typeof n&&(n=n[t.$modeName$=(e=>nt.map((t=>t(e))).find((e=>!!e)))(e)]);const o=de(s,t.$modeName$);if(!st.has(o)){const e=(s.$tagName$,()=>{});((e,t,s)=>{let n=st.get(e);ct&&s?(n=n||new CSSStyleSheet,"string"==typeof n?n=t:n.replaceSync(t)):n=t,st.set(e,n)})(o,n,!!(1&s.$flags$)),e()}}t.$ancestorComponent$,Oe(t,!0)})(e,t,s)),n()}})(this),n&&n.call(this)},disconnectedCallback(){(async e=>{if(!(1&it.$flags$)){const t=Ze(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&s.$flags$)})}}),e.is=s.$tagName$,ze(e,s)},qe=(e,t)=>t,Ge=(e,t,s,n)=>{s&&s.map((([s,n,r])=>{const o=Je(e,s),l=Qe(t,r),i=Ke(s);it.ael(o,n,l,i),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>it.rel(o,n,l,i)))}))},Qe=(e,t)=>s=>{try{H.lazyLoad||e.$hostElement$[t](s)}catch(e){tt(e)}},Je=(e,t)=>4&t?ot:8&t?rt:16&t?ot.body:e,Ke=e=>at?{passive:!!(1&e),capture:!!(2&e)}:!!(2&e),Xe=new WeakMap,Ze=e=>Xe.get(e),Ye=(e,t)=>{const s={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Ge(e,s,t.$listeners$),Xe.set(e,s)},et=(e,t)=>t in e,tt=(e,t)=>(0,console.error)(e,t),st=new Map,nt=[],rt="undefined"!=typeof window?window:{},ot=rt.document||{head:{}},lt=rt.HTMLElement||class{},it={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,s,n)=>e.addEventListener(t,s,n),rel:(e,t,s,n)=>e.removeEventListener(t,s,n),ce:(e,t)=>new CustomEvent(e,t)},at=(()=>{let e=!1;try{ot.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),ct=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),dt=!1,$t=[],ht=[],pt=(e,t)=>s=>{e.push(s),dt||(dt=!0,t&&4&it.$flags$?ft(ut):it.raf(ut))},mt=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){tt(e)}e.length=0},ut=()=>{mt($t),mt(ht),(dt=$t.length>0)&&it.raf(ut)},ft=e=>Promise.resolve(void 0).then(e),gt=pt($t,!1),yt=pt(ht,!0);
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.8.5
 */
function vt(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,s=()=>e.contains(U)||e.contains(I)&&t?"dark":"light",n=e=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:e}})),r=e=>{o!==e&&n(e),o=e};let o=s();n(o),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>r(e.matches?"dark":"light"))),new MutationObserver((()=>r(s()))).observe(document.body,{attributes:!0,attributeFilter:["class"]})}let bt;function wt(e){const t=[];for(const s of Object.keys(e))customElements.get(`calcite-${s}`)||t.push(e[s]?.());return t.length>0?Promise.all(t):null}"undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document&&("interactive"===document.readyState?vt():document.addEventListener("DOMContentLoaded",(()=>vt()),{once:!0})),bt="esri/widgets/support/components/assets";const kt=new Set;var St;let jt=0;function Nt(e,t){const s=Object.prototype.hasOwnProperty;for(const n in t)s.call(t,n)&&s.call(e,n)&&(null!=e[n]&&null!=t[n]&&"object"==typeof e[n]&&"object"==typeof t[n]?Nt(e[n],t[n]):e[n]=t[n]);return e}const _t=(e=>{let t;const s={...O,...e},n=(e=>({...F,...e}))(s),r=n.performanceLogger;let o,l=!0,i=!1;const a=[],c=[],d=(e,o,l)=>{let i;n.eventHandlerInterceptor=(e,n,o,l)=>function(e){let n;r("domEvent",e);const o=((e,t)=>{const s=[];for(;e&&e!==t;)s.push(e),e=e.parentNode;return s})(e.currentTarget,i.domNode),l=o.some((e=>customElements.get(e?.tagName?.toLowerCase())));if(e.eventPhase!==Event.CAPTURING_PHASE&&l){const t=e.composedPath(),s=t.slice(t.indexOf(e.currentTarget),t.indexOf(i.domNode)).reverse();n=M(i.getLastRender(),s,!0)}else o.reverse(),n=M(i.getLastRender(),o);let a;return n&&(a=s.handleInterceptedEvent(t,n,this,e)),r("domEventProcessed",e),a},s.postProcessProjectionOptions?.(n);const d=l();i=e(o,d,n),n.eventHandlerInterceptor=void 0,a.push(i),c.push(l),s.afterFirstVNodeRendered&&s.afterFirstVNodeRendered(i,d)};let $=()=>{if(o=void 0,l){l=!1,r("renderStart",void 0);for(let e=0;e<a.length;e++){const t=c[e]();r("rendered",void 0),a[e].update(t),r("patched",void 0)}r("renderDone",void 0),l=!0}};return s.modifyDoRenderImplementation&&($=s.modifyDoRenderImplementation($,a,c)),t={renderNow:$,scheduleRender:()=>{o||i||(o=requestAnimationFrame($))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),i=!0},resume:()=>{i=!1,l=!0,t.scheduleRender()},append:(e,t)=>{d(w.append,e,t)},insertBefore:(e,t)=>{d(w.insertBefore,e,t)},merge:(e,t)=>{d(w.merge,e,t)},replace:(e,t)=>{d(w.replace,e,t)},detach:e=>{for(let t=0;t<c.length;t++)if(c[t]===e)return c.splice(t,1),a.splice(t,1)[0];throw new Error("renderFunction was not found")}},t})({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,s=/capture$/i;e.eventHandlerInterceptor=(e,n,r,o)=>{const l=t?.(e,n,r,o),i=s.test(e);if(!((e=e.replace(s,"")).toLowerCase()in r)||i){const t=e[2].toLowerCase()+e.slice(3),s=e=>l?.call(r,e);r.addEventListener(t,s,i);const n=()=>r.removeEventListener(t,s,i),a=o.afterRemoved;o.afterRemoved=e=>{a?.(e),n()}}return l}},handleInterceptedEvent(e,t,s,n){const{eventPhase:r,type:o}=n,l=r===Event.CAPTURING_PHASE;let i=`on${o}${l?"capture":""}`;const a=t.properties;(a&&i in a||(i=`on${o[0].toUpperCase()}${o.slice(1)}${l?"Capture":""}`,a&&i in a))&&(x(),e.scheduleRender(),a[i].call(a.bind||s,n))}});let Rt=!1,Et=class extends(h(r.EventedAccessor)){constructor(e,s){super(e,s),this._attached=!1,this._projector=_t,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=o((async()=>{if(this._messageBundleProps?.length){const e=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{if(this.destroyed)return;let s=await P(e);this.uiStrings&&Object.keys(this.uiStrings)&&(s=Nt(c(s),this.uiStrings)),this[t]=s})));if(this.destroyed)return;for(const t of e)"rejected"===t.status&&d.getLogger(this).error("widget-intl:locale-error",this.declaredClass,t.reason)}await this.loadLocale()})),function(){try{W(".")}catch{e=S(k("esri/widgets/support/components/assets")),it.$resourcesUrl$=e}var e}();const n="esri-widget-uid-"+f(),r=this.render.bind(this);this._trackingTarget=new t((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const l=()=>({vnodeSelector:"div",properties:{key:`${n}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),i=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const e=r()??l(),t=e.properties??={};if(t.key??=n,N(e.vnodeSelector)){if(!this.visible)return l()}else this.visible?t.styles||(t.styles={}):(t.class="",t.styles={display:"none"}),t.styles.display??="";let s=0;return e.children?.forEach((e=>{N(e.vnodeSelector)||(e.properties??={},e.properties.key??=`${this.id}--${s++}`)})),_(this,e)};this.render=()=>{if(Rt)return i();let e=E(this)??null;if(e)return e;this._trackingTarget.clear(),Rt=!0;try{e=b(this._trackingTarget,i)}catch(e){throw d.getLogger(this).error(e),e}finally{Rt=!1}return e&&L(this,e),e};const a=this.beforeFirstRender();var $;a?this._resourcesFetch=a.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),$=this._resourcesFetch,kt.add($),$.finally((()=>kt.delete($)))}normalizeCtorArgs(e,t){const s={...e};return t&&(s.container=t),s}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then((()=>{})).catch(l):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||($(this._trackingTarget),$(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,T(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return n(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+jt++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(St=R,j)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(T(this),this._projector.scheduleRender())}own(e){s(d.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return C.apply(this,e)}renderNow(){T(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(p((()=>this.viewModel),((e,t)=>{t&&this.removeHandles("delegated-events"),e&&i(e)&&this.addHandles(this._delegatedEventNames.map((t=>a(e,t,(e=>{this.emit(t,e)})))),"delegated-events")}),u)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(l),this.scheduleRender()};this.addHandles([A(e),p((()=>this.uiStrings),e),m((()=>this.container),(e=>{this.destroyed||this._attach(e)}),{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}};Et[St]=!0,e([g()],Et.prototype,"_readyForTrueRender",void 0),e([g({value:null})],Et.prototype,"container",null),e([y("container")],Et.prototype,"castContainer",null),e([g()],Et.prototype,"icon",null),e([g()],Et.prototype,"id",null),e([g()],Et.prototype,"label",null),e([g()],Et.prototype,"renderable",null),e([g()],Et.prototype,"uiStrings",void 0),e([g()],Et.prototype,"viewModel",void 0),e([g({value:!0})],Et.prototype,"visible",null),e([g()],Et.prototype,"key",void 0),e([g()],Et.prototype,"children",void 0),e([g()],Et.prototype,"afterCreate",void 0),e([g()],Et.prototype,"afterUpdate",void 0),e([g()],Et.prototype,"afterRemoved",void 0),Et=e([v("esri.widgets.Widget")],Et);const Lt=Et;export{D as C,qe as F,lt as H,ne as a,ie as c,Lt as default,Be as f,W as g,te as h,wt as l,Ve as p,gt as r};
