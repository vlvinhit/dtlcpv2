/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{c as e,C as t}from"./Cyclical.js";import{c as r,a}from"./quantityUtils.js";import{l as s,f as i}from"./unitUtils.js";import{f as n}from"./vec2.js";import{c as o,U as c}from"./vec2f64.js";import{s as l,g as u,p as f}from"./vec3.js";import{c as p}from"./vec3f64.js";import{p as g}from"./projectVectorToVector.js";import{geodesicCompatibleSpatialReference as m,inverseGeodeticSolver as v,directGeodeticSolver as d,InverseGeodeticSolverResult as h}from"../geometry/support/geodesicUtils.js";var j;function R(e,t){if(null==e||null==t)return;const a=b(e,t);return null!=a?r(a,"radians","geographic"):void 0}!function(e){e.Absolute="absolute",e.Relative="relative",e.RelativeBilateral="relative-bilateral"}(j||(j={}));const b=(()=>{const e=p(),t=p();return(r,a)=>(l(e,r.x,r.y,r.z??0),l(t,a.x,a.y,a.z??0),y(e,t,r.spatialReference,a.spatialReference))})(),y=(()=>{const e=o(),t=p(),r=p();return(a,o,l,f)=>{if(u(a,o))return;const p=m(l),d=m(f);if(p&&d&&i(p,d)&&g(a,l,t,p)&&g(o,f,r,d)){const{azimuth:e}=v(C,t,r,p);return null!=e?s(e,"degrees","radians"):void 0}e[0]=o[0]-a[0],e[1]=o[1]-a[1];let h=n(c,e);return e[0]<0&&(h=V-h),h}})();function z(e,t,r,a=j.Absolute){if(t&&r)switch(a){case j.Absolute:return R(t,r);case j.Relative:return A(w(e,t,r),j.Relative);case j.RelativeBilateral:return A(w(e,t,r),j.RelativeBilateral)}}function w(e,t,a){if(!e||!t||!a)return;const s=b(e,t),i=b(t,a);return null!=s&&null!=i?r(i-s,"radians","geographic"):void 0}function A(e,t){if(null!=e)switch(t){case j.Absolute:return B(e);case j.Relative:{const t=U(e);let a=D.normalize(t,0,!0);return-180===a&&(a=180),r(a,"degrees","geographic")}case j.RelativeBilateral:{const t=U(e),a=Math.abs(D.normalize(t,0,!0));return r(a,"degrees","geographic")}}}function B(e){const t=U(e),a=q.normalize(t,0,!0);return r(a,"degrees","geographic")}const M=(()=>{const e=p();return(t,r,i,n,o,c="geodesic")=>{f(e,r);const u=U(o);if("geodesic"===c){const a=m(i);if(a&&g(e,i,e,a))return d(t,e,u,n,a),t[2]=r[2],!!g(t,a,t,i)}const p=a(u,"geographic","arithmetic"),v=s(p,"degrees","radians"),h=r[0]+n*Math.cos(v),j=r[1]+n*Math.sin(v),R=r[2];return l(t,h,j,R),!0}})();function U(e){if(null!=e)return a(T(e),e.rotationType,"geographic")}function x(e){if(null!=e)return a(T(e),e.rotationType,"arithmetic")}function T(e){return s(e.value,e.unit,"degrees")}const C=new h,V=2*Math.PI,q=e,D=new t(-180,180);export{j as D,x as a,B as b,A as c,R as d,z as e,U as g,M as p,y as r};
