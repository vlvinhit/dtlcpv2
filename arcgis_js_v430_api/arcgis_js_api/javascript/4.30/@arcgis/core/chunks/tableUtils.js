/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
const e={action:"EsriFeatureTableActionColumn",attachments:"EsriFeatureTableAttachmentsColumn",relationship:"EsriFeatureTableRelationshipColumn"};function n(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"getField"in e&&"queryFeatureCount"in e&&"queryFeatures"in e&&"queryObjectIds"in e&&"capabilities"in e&&"fields"in e&&"fieldsIndex"in e&&"id"in e&&"load"in e&&"objectIdField"in e&&"type"in e&&"when"in e}function t(e){return n(e)&&"queryAttachments"in e}function i(e){return n(e)&&"editingEnabled"in e&&"applyEdits"in e}function a(e){return n(e)&&"relationships"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e}function r(e){return null!=e&&"object"==typeof e&&"type"in e&&null!==e.type&&("column"===e.type||"field"===e.type||"group"===e.type)}function u(e){return null!=e&&"object"==typeof e&&"type"in e&&"map-image"===e.type}function l(e,n,{relatedTableId:t}){if(!n?.map)return;const i="scene"===e.type&&e.associatedLayer?e.associatedLayer.url:e.url,r=n=>!(!a(n)||n===e)&&("sublayer"===n.type&&n.layer?.url===e.url?n.id===t:i===n.url&&n.layerId===t);if("sublayer"===e.type&&u(e.parent)){const n=n=>a(n)&&n!==e&&n.id===t,i=e.parent,r=i.sublayers?.find(n)||i.subtables?.find(n);if(a(r))return r}const l=[...n.map.allLayers,...n.map.allTables];let s=null;for(const e of l)if(u(e)){const n=e.sublayers?.find(r)||e.subtables?.find(r);if(n){s=n;break}}else if(r(e)){s=e;break}return a(s)?s:void 0}export{a,n as b,t as c,u as d,i as e,l as f,r as i,e as u};
