/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{h as e}from"../widgets/Widget.js";import{q as t,a as n}from"./dom.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.8.5
 */const i=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"],a="hidden-form-input";function o(e){return"checked"in e}const s=new WeakMap,l=new WeakSet;function r(e){return"CALCITE-RADIO-BUTTON"===e.nodeName?n(e,"calcite-radio-button-group"):e}const c=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function d(e){const t=e?.target,n=t?.validationMessage,a=r(t?.parentElement);if(!a)return;const o=a?.nodeName?.toLowerCase(),s=o?.split("-");if(s.length<2||"calcite"!==s[0])return;e?.preventDefault(),"validity"in a&&(a.validity=t?.validity),a.dispatchEvent(c),function(e,{status:t,message:n,icon:i}){"status"in e&&(e.status=t),"validationIcon"in e&&"string"!=typeof e.validationIcon&&(e.validationIcon=i),"validationMessage"in e&&!e.validationMessage&&(e.validationMessage=n)}(a,{message:n,icon:!0,status:"invalid"});const l=function(e){return`${e.split("-").map(((e,t)=>0===t?e:`${e[0].toUpperCase()}${e.slice(1)}`)).join("")}${i.includes(e)?"Input":"Change"}`}(o);a.addEventListener(l,(()=>{"status"in a&&(a.status="idle"),"validationIcon"in a&&!a.validationIcon&&(a.validationIcon=!1),"validationMessage"in a&&a.validationMessage===n&&(a.validationMessage=""),"validity"in a&&(a.validity=t?.validity)}),{once:!0})}function u(e){const{formEl:t}=e;return!!t&&(t.addEventListener("invalid",d,!0),t.requestSubmit(),t.removeEventListener("invalid",d,!0),requestAnimationFrame((()=>{const e=t.querySelectorAll("[status=invalid]");for(const t of e)if(t?.validationMessage){t?.setFocus();break}})),!0)}function v(e){e.formEl?.reset()}function f(e){const{el:t,value:i}=e,a=m(e);if(!a||function(e,t){if(n(t.parentElement,"[form]"))return!0;const i="calciteInternalFormComponentRegister";let a=!1;return e.addEventListener(i,(e=>{a=e.composedPath().some((e=>l.has(e))),e.stopPropagation()}),{once:!0}),t.dispatchEvent(new CustomEvent(i,{bubbles:!0,composed:!0})),a}(a,t))return;e.formEl=a,e.defaultValue=i,o(e)&&(e.defaultChecked=e.checked);const r=(e.onFormReset||p).bind(e);a.addEventListener("reset",r),s.set(e.el,r),l.add(t)}function m(e){const{el:i,form:a}=e;return a?t(i,{id:a}):n(i,"form")}function p(){"status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),o(this)?this.checked=this.defaultChecked:this.value=this.defaultValue}function h(e){const{el:t,formEl:n}=e;if(!n)return;const i=s.get(t);n.removeEventListener("reset",i),s.delete(t),e.formEl=null,l.delete(t)}function E(e,t){e.defaultValue=t}const g="calciteInternalHiddenInputInput",b=e=>{e.target.dispatchEvent(new CustomEvent(g,{bubbles:!0}))},I=e=>e.removeEventListener("input",b);function y(e,t,n){const{defaultValue:i,disabled:a,form:s,name:l,required:c}=e;t.defaultValue=i,t.disabled=a,t.name=l,t.required=c,t.tabIndex=-1,s?t.setAttribute("form",s):t.removeAttribute("form"),o(e)?(t.checked=e.checked,t.defaultChecked=e.defaultChecked,t.value=e.checked?n||"on":""):t.value=n||"",e.syncHiddenFormInput?.(t);const d=r(e.el);if(d&&"validity"in d)for(const e in{...t?.validity})d.validity[e]=t.validity[e]}const k=({component:t})=>(function(e){const{el:t,formEl:n,name:i,value:o}=e,{ownerDocument:s}=t,l=t.querySelectorAll(`input[slot="${a}"]`);if(!n||!i)return void l.forEach((e=>{I(e),e.remove()}));const r=Array.isArray(o)?o:[o],c=[],d=new Set;let u;l.forEach((t=>{const n=r.find((e=>e==t.value));null!=n?(d.add(n),y(e,t,n)):c.push(t)})),r.forEach((t=>{if(d.has(t))return;let n=c.pop();n||(n=s.createElement("input"),n.slot=a),u||(u=s.createDocumentFragment()),u.append(n),n.addEventListener("input",b),y(e,n,t)})),u&&t.append(u),c.forEach((e=>{I(e),e.remove()}))}(t),e("slot",{name:a}));export{k as H,E as a,f as c,h as d,m as f,g as i,v as r,u as s};
