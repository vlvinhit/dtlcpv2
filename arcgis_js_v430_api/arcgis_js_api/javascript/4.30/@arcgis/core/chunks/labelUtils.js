/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{r as e}from"./Logger.js";const n="__begin__",s="__end__",r=new RegExp(n,"ig"),t=new RegExp(s,"ig"),l=new RegExp("^"+n,"i"),a=new RegExp(s+"$","i"),o='"',i=o+" + ",p=" + "+o;function c(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function u(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function x(e){const n={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(n.expression=e.labelExpressionInfo.value,n.type="conventional"):e.labelExpressionInfo.expression&&(n.expression=e.labelExpressionInfo.expression,n.type="arcade"):null!=e.labelExpression&&(n.expression=c(e.labelExpression),n.type="conventional"),n}function f(e){const n=x(e);if(!n)return null;switch(n.type){case"conventional":return E(n.expression);case"arcade":return n.expression}return null}function g(e){const n=x(e);if(!n)return null;switch(n.type){case"conventional":return function(e){const n=e?.match(w);return n?.[1].trim()||null}(n.expression);case"arcade":return R(n.expression)}return null}function E(c){let u;return c?(u=e(c,(e=>n+'$feature["'+e+'"]'+s)),u=l.test(u)?u.replace(l,""):o+u,u=a.test(u)?u.replace(a,""):u+o,u=u.replaceAll(r,i).replaceAll(t,p)):u='""',u}const w=/^\s*\{([^}]+)\}\s*$/i,$=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,m=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function R(e){if(!e)return null;let n=$.exec(e)||b.exec(e);return n?n[1]||n[3]:(n=m.exec(e),n?n[2]:null)}export{R as a,f as b,E as c,g as d,x as g,c as s,u as t};
