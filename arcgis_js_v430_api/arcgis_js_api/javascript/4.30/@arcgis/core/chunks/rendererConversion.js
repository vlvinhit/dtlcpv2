/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{i as r}from"../core/lang.js";import e from"../core/Error.js";import{d as n,t as s}from"../symbols/support/jsonUtils.js";function t(r){return null==r||"simple"===r.type||"unique-value"===r.type||"class-breaks"===r.type||"dictionary"===r.type||"heatmap"===r.type}function o(o,a){if(null==o)return null;if(!t(o))return new e("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${o.type||o.declaredClass}'`,{renderer:o});switch(o.type){case"simple":return function(r,e){const t={...n,...e,cimFallbackEnabled:!0};return l(r,s(r.symbol,t).error)}(o,a);case"unique-value":return function(e,t){const o={...n,...t,cimFallbackEnabled:!0},a=e.uniqueValueInfos?.map((r=>s(r.symbol,o).error)).filter(r),u=s(e.defaultSymbol,o);return u.error&&a?.unshift(u.error),l(e,a)}(o,a);case"class-breaks":return function(e,t){const o={...n,...t,cimFallbackEnabled:!0},a=e.classBreakInfos.map((r=>s(r.symbol,o).error)).filter(r),u=s(e.defaultSymbol,o);return u.error&&a.unshift(u.error),l(e,a)}(o,a);case"dictionary":case"heatmap":return null}return null}function l(r,n){if(!n)return null;let s;if(s=Array.isArray(n)?n:[n],s.length>0){const n=s.map((r=>r.details.symbol.type||r.details.symbol.declaredClass)).filter((r=>!!r));n.sort();const t=[];return n.forEach(((r,e)=>{0!==e&&r===n[e-1]||t.push(r)})),new e("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${t.join(", ")}) which are not supported in 3D`,{renderer:r,symbolErrors:s})}return null}export{t as i,o as v};
