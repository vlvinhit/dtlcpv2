/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{p as e}from"./workerHelper.js";import{e as t,a as s,b as r,E as i,c as n,d as o}from"./edgeProcessing.js";import"./InterleavedLayout.js";import"./BufferView.js";import"./vec2.js";import"./common.js";import"./vec3.js";import"./vec3f64.js";import"./vec4.js";import"./types.js";import"./Util.js";import"./vec2f64.js";import"./vec4f64.js";import"./deduplicate.js";import"./mathUtils.js";import"./Indices.js";import"../core/lang.js";import"./VertexAttribute.js";import"./glUtil.js";import"./enums.js";import"./VertexElementDescriptor.js";import"./Normals.js";import"../core/scheduling.js";import"../core/promiseUtils.js";import"./handleUtils.js";import"../core/Error.js";import"./Logger.js";import"../config.js";import"./maybe.js";class a{async extract(s){const r=c(s),i=t(r),n=[r.data.buffer],o=function(t,s){return s.push(t.regular.lodInfo.lengths.buffer),s.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:e(t.regular.instancesData,s),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:e(t.silhouette.instancesData,s),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}(i,n);return{result:o,transferList:n}}async extractComponentsEdgeLocations(t){const i=c(t),n=s(i.data,i.skipDeduplicate,i.indices,i.indicesLength),o=r(n,l),a=[];return{result:e(o.regular.instancesData,a),transferList:a}}async extractEdgeLocations(t){const i=c(t),n=s(i.data,i.skipDeduplicate,i.indices,i.indicesLength),o=r(n,p),a=[];return{result:e(o.regular.instancesData,a),transferList:a}}}function c(e){return{data:i.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indices):"Uint16Array"===e.indicesType?new Uint16Array(e.indices):e.indices,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}const p=new class{allocate(e){return n.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,s){e.position0.setVec(t,s.position0),e.position1.setVec(t,s.position1)}},l=new class{allocate(e){return o.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,s){e.position0.setVec(t,s.position0),e.position1.setVec(t,s.position1),e.componentIndex.set(t,s.componentIndex)}};export{a as default};
