/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{e as i}from"../core/lang.js";import{n as t}from"../core/scheduling.js";import{p as n,c as r,e as s,n as o,d as e,i as c,b as a,x as h}from"./vec3.js";import{e as g,c as m}from"./vec3f64.js";import{s as u}from"./plane.js";class _{constructor(i){this._allocator=i,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&t((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const i=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*f);this._items.length=Math.min(i,this._items.length),this._itemsPtr=0}_grow(){for(let i=0;i<Math.max(8,Math.min(this._items.length,f));i++)this._items.push(this._allocator())}}const f=1024;function d(i){return i?l(g(i.origin),g(i.direction)):l(m(),m())}function l(i,t){return{origin:i,direction:t}}function p(t,n){return i(t.origin,n.origin)&&i(t.direction,n.direction)}function P(i,t){const n=O.get();return n.origin=i,n.direction=t,n}function j(i,t=d()){return M(i.origin,i.direction,t)}function w(i,t,s=d()){return n(s.origin,i),r(s.direction,t,i),s}function M(i,t,r=d()){return n(r.origin,i),n(r.direction,t),r}function x(i,t){const n=s(u.get(),o(u.get(),i.direction),r(u.get(),t,i.origin));return e(n,n)}function b(i,t,n){const s=e(i.direction,r(n,t,i.origin));return c(n,i.origin,a(n,i.direction,s)),n}function v(i,t,n,r){const s=i.direction,o=t.direction,g=h(k,t.origin,i.origin),m=e(s,o),u=e(o,g),_=e(s,g),f=e(s,s),d=e(o,o),l=(m*u+_*d)/(f*d-m*m),p=(m*_-u*f)/(f*d-m*m);return c(n,i.origin,a(k,s,l)),c(r,t.origin,a(k,o,p)),[n,r]}const O=new _((()=>d())),k=m();export{_ as O,d as a,v as b,b as c,x as d,M as e,w as f,j as g,p as h,P as w};
