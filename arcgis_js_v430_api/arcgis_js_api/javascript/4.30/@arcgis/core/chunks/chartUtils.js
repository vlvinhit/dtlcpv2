/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{R as t,D as o}from"./ResponsiveTheme.js";import"../intl.js";import{z as i}from"../core/lang.js";import{h as e,m as s}from"./handleUtils.js";import{throwIfAborted as r}from"../core/promiseUtils.js";import{signal as n}from"../core/signal.js";import{f as l,u as a}from"./unitFormatUtils.js";import{l as p}from"./unitUtils.js";import{g as m}from"./common.js";import{g as c,n as j}from"../widgets/ElevationProfile/ElevationProfileLine.js";import{g as d}from"../widgets/ElevationProfile.js";import{c as u,N as g}from"./chartUtilsAm5.js";import{a as f}from"./widgetUtils.js";import{i as y}from"./themeUtils.js";import{X as x,V as b,A as h,a as v,b as S,L as A}from"./LineSeries.js";import{b as L,d as T,a as M,C as P}from"./Theme.js";import{T as U}from"./Tooltip2.js";import{s as C}from"./substitute.js";import{f as F}from"./number.js";import"./date.js";import"./jsonMap.js";import"../config.js";import"./locale.js";import"./timeZoneUtils.js";import"./datetime.js";import"./messages.js";import"../core/Error.js";import"./Logger.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../core/JSONSupport.js";import"./tslib.es6.js";import"../core/Accessor.js";import"../core/Handles.js";import"./maybe.js";import"../core/accessorSupport/decorators/subclass.js";import"./metadata.js";import"./utils.js";import"./tracking.js";import"./ensureType.js";import"../core/accessorSupport/decorators/property.js";import"./ObservableBase.js";import"../core/scheduling.js";import"./assets.js";import"./SimpleObservable.js";import"./ByteSizeUnit.js";import"./Cyclical.js";import"./mathUtils.js";import"./vec3.js";import"./vec3f64.js";import"./quantityUtils.js";import"../Color.js";import"./colorUtils.js";import"../core/Evented.js";import"./memoize.js";import"../core/reactiveUtils.js";import"./asyncUtils.js";import"../core/Collection.js";import"./shared.js";import"./uuid.js";import"../geometry/Point.js";import"../core/accessorSupport/decorators/cast.js";import"./reader.js";import"./writer.js";import"../geometry/Geometry.js";import"../geometry/SpatialReference.js";import"../geometry/support/webMercatorUtils.js";import"./vec4f64.js";import"./Material.js";import"./interfaces3.js";import"./basicInterfaces.js";import"./VertexAttribute.js";import"./ViewingMode.js";import"../widgets/Widget.js";import"./domUtils.js";import"../core/Promise.js";import"./projector.js";import"./jsxWidgetSupport.js";import"../widgets/ElevationProfile/ElevationProfileViewModel.js";import"../Graphic.js";import"../geometry.js";import"../geometry/Extent.js";import"../geometry/Multipoint.js";import"./zmUtils.js";import"../geometry/Polygon.js";import"./coordsUtils.js";import"./Axis.js";import"./extentUtils.js";import"./aaBoundingRect.js";import"../geometry/Polyline.js";import"./typeUtils.js";import"../geometry/support/jsonUtils.js";import"../PopupTemplate.js";import"../core/Clonable.js";import"../layers/support/fieldUtils.js";import"../core/sql.js";import"../popup/content.js";import"../popup/content/AttachmentsContent.js";import"../popup/content/Content.js";import"../popup/content/CustomContent.js";import"../popup/content/ExpressionContent.js";import"../popup/ElementExpressionInfo.js";import"../popup/content/FieldsContent.js";import"../popup/FieldInfo.js";import"./enumeration.js";import"../popup/support/FieldInfoFormat.js";import"../popup/content/MediaContent.js";import"../popup/content/BarChartMediaInfo.js";import"../popup/content/mixins/ChartMediaInfo.js";import"../popup/content/mixins/MediaInfo.js";import"../popup/content/support/ChartMediaInfoValue.js";import"../popup/content/support/ChartMediaInfoValueSeries.js";import"./chartMediaInfoUtils.js";import"../popup/content/ColumnChartMediaInfo.js";import"../popup/content/ImageMediaInfo.js";import"../popup/content/support/ImageMediaInfoValue.js";import"../popup/content/LineChartMediaInfo.js";import"../popup/content/PieChartMediaInfo.js";import"../popup/content/RelationshipContent.js";import"../popup/support/RelatedRecordsInfoFieldOrder.js";import"../popup/content/TextContent.js";import"../popup/ExpressionInfo.js";import"../popup/LayerOptions.js";import"../popup/RelatedRecordsInfo.js";import"../support/actions/ActionBase.js";import"../core/Identifiable.js";import"../support/actions/ActionButton.js";import"../support/actions/ActionToggle.js";import"../symbols.js";import"../symbols/CIMSymbol.js";import"../symbols/Symbol.js";import"../symbols/ExtrudeSymbol3DLayer.js";import"../symbols/Symbol3DLayer.js";import"./utils4.js";import"../symbols/edges/Edges3D.js";import"./screenUtils.js";import"./materialUtils.js";import"./opacityUtils.js";import"../symbols/edges/SketchEdges3D.js";import"../symbols/edges/SolidEdges3D.js";import"./Symbol3DMaterial.js";import"../symbols/FillSymbol.js";import"../symbols/SimpleLineSymbol.js";import"../symbols/LineSymbol.js";import"../symbols/LineSymbolMarker.js";import"./lineMarkers.js";import"../symbols/FillSymbol3DLayer.js";import"../symbols/patterns/LineStylePattern3D.js";import"../symbols/patterns/StylePattern3D.js";import"./utils5.js";import"./colors.js";import"./symbolLayerUtils3D.js";import"./aaBoundingBox.js";import"../symbols/Font.js";import"../symbols/IconSymbol3DLayer.js";import"./persistableUrlUtils.js";import"../symbols/LabelSymbol3D.js";import"../symbols/Symbol3D.js";import"./collectionUtils.js";import"../portal/Portal.js";import"../core/Loadable.js";import"../portal/PortalGroup.js";import"../portal/PortalQueryParams.js";import"../portal/PortalQueryResult.js";import"../portal/PortalUser.js";import"../portal/PortalFolder.js";import"../symbols/LineSymbol3DLayer.js";import"../symbols/LineStyleMarker3D.js";import"../symbols/ObjectSymbol3DLayer.js";import"../symbols/PathSymbol3DLayer.js";import"../symbols/TextSymbol3DLayer.js";import"../symbols/WaterSymbol3DLayer.js";import"../symbols/support/StyleOrigin.js";import"./Thumbnail.js";import"./calloutUtils.js";import"../symbols/callouts/Callout3D.js";import"../symbols/callouts/LineCallout3D.js";import"../symbols/support/Symbol3DVerticalOffset.js";import"../symbols/LineSymbol3D.js";import"../symbols/MarkerSymbol.js";import"../symbols/MeshSymbol3D.js";import"../symbols/PictureFillSymbol.js";import"./urlUtils.js";import"../symbols/PictureMarkerSymbol.js";import"../symbols/PointSymbol3D.js";import"../symbols/PolygonSymbol3D.js";import"../symbols/SimpleFillSymbol.js";import"../symbols/SimpleMarkerSymbol.js";import"../symbols/TextSymbol.js";import"../symbols/WebStyleSymbol.js";import"./LRUCache.js";import"./MemCache.js";import"./ElevationQueryTileCache.js";import"./defaultUnit.js";import"./getDefaultUnitForView.js";import"./throttle.js";import"./elevationInfoUtils.js";import"./unitConversionUtils.js";import"./lengthUtils.js";import"./vec2.js";import"../geometry/projection.js";import"./projectBuffer.js";import"./geodesicConstants.js";import"../geometry/support/GeographicTransformation.js";import"../geometry/support/GeographicTransformationStep.js";import"./zscale.js";import"../geometry/support/geodesicUtils.js";import"./QueueProcessor.js";import"./Queue.js";import"./ReactiveMap.js";import"./Scheduler.js";import"./debugFlags.js";import"./traversalUtils.js";import"../widgets/ElevationProfile/ElevationProfileLineGround.js";import"./elevationQuerySourceUtils.js";import"../Ground.js";import"./compilerUtils.js";import"./loadAll.js";import"../widgets/ElevationProfile/ElevationProfileLineInput.js";import"./ElevationQuery.js";import"../layers/support/ElevationSampler.js";import"./ElevationTile.js";import"./ElevationSamplerData.js";import"./TileKey.js";import"../widgets/ElevationProfile/ElevationProfileLineQuery.js";import"../widgets/ElevationProfile/ElevationProfileLineView.js";import"./ray.js";import"./plane.js";import"./mat3f64.js";import"./mat4f64.js";import"./quatf64.js";import"./vec2f64.js";import"./mathUtils2.js";import"./hitTest.js";import"./projectVectorToVector.js";import"./projectPointToVector.js";import"./dehydratedPoint.js";import"./LayerConstants.js";import"./layerUtils2.js";import"./debugFlags2.js";import"./ElevationProvider.js";import"./Intersector2.js";import"./mat4.js";import"./vec4.js";import"./boundedPlane.js";import"./lineSegment.js";import"./verticalOffsetUtils.js";import"./mat3.js";import"./sphere.js";import"./orientedBoundingBox.js";import"./quat.js";import"./spatialReferenceEllipsoidUtils.js";import"./computeTranslationToOriginAndRotation.js";import"./Attribute.js";import"./intersectorUtilsConversions.js";import"./Intersector.js";import"./Intersector3.js";import"../layers/GraphicsLayer.js";import"./GraphicsCollection.js";import"../layers/Layer.js";import"../TimeExtent.js";import"./timeUtils.js";import"../layers/mixins/BlendLayer.js";import"./jsonUtils.js";import"./parser.js";import"./utils3.js";import"./_commonjsHelpers.js";import"../layers/mixins/ScaleRangeLayer.js";import"./ElevationInfo.js";import"./InputManager.js";import"../widgets/Sketch/SketchViewModel.js";import"./isSupportedObject.js";import"../views/interactive/sketch/SketchLabelOptions.js";import"../views/interactive/sketch/SketchTooltipOptions.js";import"./SketchTooltipVisibleElements.js";import"../views/interactive/sketch/SketchValueOptions.js";import"./angularMeasurementUtils.js";import"./layerUtils.js";import"./keybindings.js";import"./SnappingManager.js";import"./normalizedPoint.js";import"./Settings2.js";import"./RightAngleSnappingHint.js";import"./UpdatingHandles.js";import"./snappingUtils.js";import"./geometry2dUtils.js";import"../rest/support/Query.js";import"./DataLayerSource.js";import"../layers/support/Field.js";import"./domains.js";import"../layers/support/CodedValueDomain.js";import"../layers/support/Domain.js";import"../layers/support/InheritedDomain.js";import"../layers/support/RangeDomain.js";import"./fieldType.js";import"./FullTextSearch.js";import"./spatialRelationships.js";import"../rest/support/StatisticDefinition.js";import"./utils6.js";import"../layers/support/FeatureFilter.js";import"./floorFilterUtils.js";import"./layerViewUtils.js";import"./viewUtils.js";import"../geometry/geometryEngine.js";import"./geometryEngineBase.js";import"./hydrated.js";import"../views/interactive/snapping/SnappingOptions.js";import"../views/interactive/snapping/FeatureSnappingLayerSource.js";import"./hitTestSelectUtils.js";import"./screenUtils2.js";import"./messageBundle.js";import"./jsxFactory.js";import"./UnitSelect.js";import"./globalCss.js";import"./DefaultTheme.js";import"./ColorSet.js";import"./Tick.js";import"./Button2.js";function D(t,o){const i=Math.floor(Math.log10(t)),e=t/10**i;let s;return s=o?e<1.5?1:e<3?2:e<5?2.5:e<7?5:10:e<=1?1:e<=2?2:e<=3?2.5:e<=5?5:10,s*10**i}const k="#f8f8f8",w="#a9a9a9",E="#323232",I="line",z="fill",B=.001,R=.1,X=.02,Y={fontFamily:"Avenir Next",paddingBottom:6,paddingLeft:0,paddingRight:0,paddingTop:0,axisGridStroke:"#f4f4f4",axisLabelsFontSize:9,axisLabelsFontWeight:"400",axisLabelsColor:w,axisTooltipFontSize:12,axisTooltipBackgroundColor:E,axisTooltipLabelColor:k,axisTooltipPaddingTop:Math.round(3),axisTooltipPaddingBottom:Math.round(3),axisTooltipPaddingHorizontal:Math.round(3.75),xAxisMinGridDistance:50,xAxisLabelsSpacing:Math.round(6),xAxisMinLabelPosition:.05,xAxisMaxLabelPosition:.9,yAxisMinGridDistance:30,yAxisLabelSpacing:Math.round(3.75),yAxisMinLabelPosition:0,yAxisMaxLabelPosition:.8,seriesTooltipFontSize:12,seriesTooltipBackgroundColor:k,seriesTooltipLabelColor:E,seriesFillLighten:.9,seriesTooltipSpacing:6,seriesTooltipPaddingVertical:Math.round(3.75),seriesTooltipPaddingHorizontal:Math.round(3.75)},O={...Y,axisGridStroke:E,axisLabelsColor:w,axisTooltipBackgroundColor:E,axisTooltipLabelColor:k,seriesTooltipBackgroundColor:E,seriesTooltipLabelColor:k,seriesFillLighten:-.75},V={minX:void 0,maxX:void 0,minY:void 0,maxY:void 0};async function H(i){const s=await u(i.container);r(i.abortOptions);const l=y(),a=l?O:Y;s.setThemes(l?[t.new(s),o.new(s)]:[t.new(s)]);const p=f(i.container),m=s.container.children.push(x.new(s,{panX:!0,panY:!0,paddingTop:a.paddingTop,paddingBottom:a.paddingBottom,paddingLeft:p?a.paddingRight:a.paddingLeft,paddingRight:p?a.paddingLeft:a.paddingRight,maxTooltipDistance:0}));m.zoomOutButton.set("forceHidden",!0);const j=m.xAxes.push(b.new(s,{renderer:h.new(s,{})})),d=m.yAxes.push(b.new(s,{renderer:v.new(s,{})})),g=n(null),A=n("loading"),P={params:i,chart:m,xAxis:j,yAxis:d,seriesInfos:new Map,messages:null,theme:a,pointerIsOver:!1,get state(){return A.value},get data(){return g.value},set data(t){g.value=t}};!function(t){const{chart:o,xAxis:i,theme:e}=t;i.setAll({extraMax:0,extraMin:0,maxDeviation:0,numberFormatter:rt(t,"distance"),strictMinMax:!0,strictMinMaxSelection:!0}),i.axisHeader.set("forceHidden",!0);const s=i.get("renderer");s.setAll({inside:!1,minGridDistance:e.xAxisMinGridDistance}),s.labels.template.setAll({centerX:L,centerY:L,fill:T(e.axisLabelsColor),fontFamily:e.fontFamily,fontSize:e.axisLabelsFontSize,fontWeight:e.axisLabelsFontWeight,maxPosition:e.xAxisMaxLabelPosition,minPosition:e.xAxisMinLabelPosition,paddingLeft:0,paddingRight:0,paddingTop:e.xAxisLabelsSpacing});const r=i.set("tooltip",U.new(o.root,{paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0}));r.get("background")?.setAll({fill:T(e.axisTooltipBackgroundColor),stroke:void 0}),r.label.setAll({fill:T(e.axisTooltipLabelColor),fontFamily:e.fontFamily,fontSize:e.axisTooltipFontSize,paddingBottom:e.axisTooltipPaddingBottom,paddingLeft:e.axisTooltipPaddingHorizontal,paddingRight:e.axisTooltipPaddingHorizontal,paddingTop:e.axisTooltipPaddingTop}),s.grid.template.setAll({strokeOpacity:1,stroke:T(e.axisGridStroke)})}(P),function(t){const{yAxis:o,theme:i}=t;o.setAll({baseValue:c().noDataValue,extraMax:0,extraMin:0,maxDeviation:0,numberFormatter:rt(t,"elevation"),strictMinMax:!0,strictMinMaxSelection:!0,tooltip:void 0}),o.axisHeader.set("visible",!1);const e=f(t.params.container),s=o.get("renderer");s.setAll({minGridDistance:i.yAxisMinGridDistance,opposite:e,inside:!0}),s.labels.template.setAll({centerX:L,centerY:M,fill:T(i.axisLabelsColor),fontFamily:i.fontFamily,fontSize:i.axisLabelsFontSize,fontWeight:i.axisLabelsFontWeight,maxPosition:i.yAxisMaxLabelPosition,minPosition:i.yAxisMinLabelPosition,paddingBottom:0,paddingLeft:e?0:i.yAxisLabelSpacing,paddingRight:e?i.yAxisLabelSpacing:0,paddingTop:0,textAlign:"start"}),s.grid.template.setAll({strokeOpacity:1,stroke:T(i.axisGridStroke)})}(P),function({chart:t,xAxis:o,yAxis:i}){const e=S.new(t.root,{behavior:"none",xAxis:o,yAxis:i});e.lineY.set("visible",!1),t.set("cursor",e)}(P);const C=e([K(P,i.onRangeChange),tt(P,i.onCursorPositionChange),mt(s.events.once("frameended",(()=>{A.value="ready"}))),mt(s)]);return{destroy:()=>{C.remove(),A.value="destroyed"},update:t=>{t.data===P.data&&t.messages===P.messages||G(P)||function(t,o){if(G(t))return;const i=t.data??void 0,e=o.data??void 0;t.chart.get("cursor")?.set("forceHidden",!e?.refined);const s=i!==e,r=i?.effectiveUnits!==e?.effectiveUnits,n=i?.uniformScaling!==e?.uniformScaling;t.data=e,t.messages=o.messages,(s||r)&&(function(t){const{chart:o,data:i,xAxis:e,yAxis:s}=t,{minX:r,maxX:n,minY:l,maxY:a}=Q({data:i,pixelWidth:e.width(),pixelHeight:s.height()}),p=!!i?.uniformScaling,m=!!i?.refined;o.setAll({panX:!0,panY:p,pinchZoomX:m,pinchZoomY:m&&p,wheelX:"panX",wheelY:m?p?"zoomXY":"zoomX":"none"}),e.setAll({max:n,min:r,panX:!0,panY:!1,zoomX:!0,zoomY:p}),s.setAll({max:a,min:l,panX:!1,panY:p,zoomX:p,zoomY:p})}(t),function(t){const{chart:o,data:i,seriesInfos:e,xAxis:s,yAxis:r}=t;if(null==i||0===i.lines.length)return void o.series.clear();const n=new Map,l=new Set(o.series.values),a=i.lines.length;for(let s=0;s<a;s++){const r=i.lines[s];let p=e.get(r.id);p?(p.fill&&l.delete(p.fill),l.delete(p.line)):(p=N(t,r),p.fill&&o.series.push(p.fill),o.series.push(p.line)),n.set(p.id,p);const m=a-s-1;p.fill?.set("layer",m),p.line.set("layer",a+m),q(t,p,r)}t.seriesInfos=n;for(const t of l)o.series.removeValue(t);s.set("layer",a+1),r.set("layer",a+2)}(t)),n&&W(t),it(t)}(P,t)},zoomOut:()=>W(P)}}function G(t){return"destroyed"===t.state}function W(t){G(t)||(t.xAxis.zoom(0,1),t.yAxis.zoom(0,1))}function Q({data:t,pixelWidth:o,pixelHeight:i}){if(null==t)return V;const e=t.statistics,s=e?.maxDistance;let r=e?.minElevation,n=e?.maxElevation;if(null==s||null==r||null==n)return V;const l=Math.max(s-0,B);let a=Math.max(n-r,B);const m=t.effectiveUnits;if(t.dynamicElevationRange){const t=p(l,m.distance,m.elevation);a=Math.max(a,t/c().maxChartRatio)}return r-=X*a,n=r+a+R*a,[r,n]=function(t,o,i=10){const e=D(o-t,!1);if(0===e)return[t,o];const s=D(e/(i-1),!0);return[Math.floor(t/s)*s,Math.ceil(o/s)*s]}(r,n,10),a=n-r,t.uniformScaling?function({data:t,bounds:o,pixelWidth:i,pixelHeight:e,centered:s}){if(null==t)return o;let{minX:r,maxX:n,minY:l,maxY:a}=o;if(null==r||null==n||null==l||null==a)return V;const m=n-r,c=a-l,j=t.effectiveUnits,d=p(c,j.elevation,j.distance)/e/(m/i);return d>=1?[r,n]=$([r,n],d,s):[l,a]=$([l,a],1/d,s),{minX:r,maxX:n,minY:l,maxY:a}}({data:t,bounds:{minX:0,maxX:s,minY:r,maxY:n},pixelWidth:o,pixelHeight:i,centered:!0}):{minX:0,maxX:0+l,minY:r,maxY:r+a}}function $([t,o],i,e){const s=(o-t)*i;if(e){const i=(t+o)/2-s/2;return[i,i+s]}return[t,t+s]}function q({theme:t},o,i){const e=T(i.color.toCss()),s=i.samples??[],r=s.length>0,{line:n,fill:l}=o;n.set("visible",r),n.set("stroke",e),l?.set("visible",r),l?.set("fill",P.lighten(e,t.seriesFillLighten)),n.data.setAll(s),l?.data.setAll(s)}function N(t,o){const{id:i}=o,e=Z(t,`${I}-${i}`);e.setAll({dy:o.chartStrokeOffsetY,tooltip:J(t)}),e.strokes.template.setAll({strokeWidth:o.chartStrokeWidth});let s=null;return o.chartFillEnabled&&(s=Z(t,`${z}-${i}`),s.fills.template.setAll({fillOpacity:1,visible:!0})),{id:i,line:e,fill:s}}function Z(t,o){return A.new(t.chart.root,{connect:!1,excludeFromTotal:!0,fill:void 0,id:o,stroke:void 0,valueXField:"distance",valueYField:"elevation",xAxis:t.xAxis,yAxis:t.yAxis})}function J({theme:t,chart:o}){const i=U.new(o.root,{autoTextColor:!1,forceHidden:!0,getFillFromSprite:!1,getLabelFillFromSprite:!1,pointerOrientation:"vertical",visible:!1}),e=t.seriesTooltipPaddingHorizontal,s=t.seriesTooltipPaddingVertical;return i.label.setAll({fill:T(t.seriesTooltipLabelColor),fontFamily:t.fontFamily,fontSize:t.seriesTooltipFontSize,paddingBottom:s,paddingLeft:e,paddingRight:e,paddingTop:s,textAlign:"start"}),i.get("background")?.setAll({stroke:void 0,fill:T(t.seriesTooltipBackgroundColor)}),i.adapters.add("dy",(o=>{const e=t.seriesTooltipSpacing,s=i.get("pointTo")?.y??0;return(o??0)+(i.y()>s?e:-e)})),i}function K(t,o){const{xAxis:i,yAxis:e}=t,s=()=>{o(_(i),_(e))},r=t=>[t.on("start",s),t.on("end",s)];return pt([...r(i),...r(e)])}function _(t){const o=Math.abs((t.get("end")??0)-(t.get("start")??0)),i=0!==o?1/o:1;return Math.abs(1-i)<m()?1:i}function tt(t,o){const{chart:i,xAxis:e,yAxis:s}=t,r=i.get("cursor"),n=i.plotContainer.events,l=o=>{t.pointerIsOver=o,it(t)},a=()=>{l(!1),o(null,null)};return pt([r?.events.on("cursormoved",(()=>{if(!t.pointerIsOver)return;it(t);let i=r?.getPrivate("positionX")??0,n=r?.getPrivate("positionY")??0;const l=t.data;if(null!=l?.statistics){const{maxDistance:t,minElevation:o,maxElevation:r}=l.statistics;null!=t&&(i=ot(i,lt(e),at(e),0,t)),null!=o&&null!=r&&(n=ot(n,lt(s),at(s),o,r))}o(i,n)})),n.on("pointerover",(()=>l(!0))),n.on("pointerout",a),n.on("blur",a)])}function ot(t,o,i,e,s){return(o+t*(i-o)-e)/(s-e)}function it(t){const o=function(t){const{data:o}=t,i=o?.lines.map((o=>({line:o,y:nt(t,o)?.elevation}))).sort(et);return i&&0!==i.length&&null!=i[0].y?i.map((({y:o,line:i})=>function(t,o,i){const{data:e,messages:s}=t;if(null==e||null==s)return"";const r=c().formatPrecision,n=C(s.chartTooltip,{name:d(o,s),elevation:null!=i?l(s,i,e.effectiveUnits.elevation,r):j});return`[${o.color.toHex()}]●[/] ${n}`}(t,i,o))).join("\n"):null}(t);o?(t.seriesInfos.forEach((t=>{const i=t.line.get("tooltip");i.set("forceHidden",!1),i.label.set("text",o)})),t.xAxis.getTooltip().setAll({tooltipText:st(t)})):t.seriesInfos.forEach((t=>{t.line.get("tooltip")?.set("forceHidden",!0)}))}function et({y:t},{y:o}){return null==t?1:null==o?-1:o-t}function st(t){const{data:o,messages:i}=t;if(null==o||null==i)return"";const e=o.lines[0],s=e?nt(t,e):null,r=c().formatPrecision;return null!=s?l(i,s.distance,o.effectiveUnits.distance,r):"-"}function rt(t,o){const i=g.new(t.chart.root,{});return i.format=(i,e,s)=>{const{data:r,messages:n}=t;return null==n||null==r||"string"==typeof i?"":`${F(i,{maximumFractionDigits:s})} ${a(n,r.effectiveUnits[o],"abbr")}`},i}function nt({chart:t,xAxis:o},e){const s=e.samples??[];if(0===s.length)return null;const r=t.get("cursor"),n=r?.getPrivate("positionX")??0,l=o.toAxisPosition(n),a=o.positionToValue(l);return i(s,a,(t=>t.distance))}function lt(t){return t.positionToValue(t.get("start")??0)}function at(t){return t.positionToValue(t.get("end")??1)}function pt(t){return e(t.map(mt))}function mt(t){return s((()=>{t?.dispose()}))}export{H as createChart,Q as getAdjustedBounds};
