/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import e from"../core/Error.js";import{F as n,G as r,H as o,P as t,I as s,J as i,K as c,L as a,M as l}from"../chunks/unitUtils.js";import u from"./Point.js";import p from"./SpatialReference.js";import{p as m}from"../chunks/number.js";import"../core/lang.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/jsonMap.js";import"../chunks/assets.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../core/JSONSupport.js";import"../chunks/tslib.es6.js";import"../core/Accessor.js";import"../core/Handles.js";import"../chunks/maybe.js";import"../core/accessorSupport/decorators/subclass.js";import"../chunks/metadata.js";import"../chunks/utils.js";import"../chunks/handleUtils.js";import"../chunks/tracking.js";import"../chunks/ensureType.js";import"../core/accessorSupport/decorators/property.js";import"../chunks/ObservableBase.js";import"../core/scheduling.js";import"../core/promiseUtils.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/reader.js";import"../chunks/writer.js";import"./Geometry.js";import"./support/webMercatorUtils.js";import"../chunks/locale.js";function d(){return n()}function f(){return r()}function _(){return o()}function S(e,n){const r=[];e=(e=(e=e.replaceAll(/[\u00B0\u00BA]/g,"^")).replaceAll("′","'")).replaceAll("″",'"');const o=M(n);return t.dmsToGeog(o,1,[e],r)?new u(r[0][0],r[0][1],n||p.WGS84):null}function k(e){return e&&d()?m(e)??S(`0° 0' 0" N | ${e}`)?.longitude??null:null}function j(e){return e&&d()?m(e)??S(`${e} | 00° 00' 00" E`)?.latitude??null:null}function g(e,n,r){const o=[],t=b(r);if(-1===t)return console.warn(`invalid conversionMode: ${r}`),null;const i=M(n);return s.mgrsToGeogExtended(i,1,[e],t,o)?new u(o[0][0],o[0][1],n||p.WGS84):null}function w(e,n){const r=[];!n&&/\(.+27/.test(e)&&(n=p.GCS_NAD_1927);const o=M(n);return i.usngToGeog(o,1,[e],r)?new u(r[0][0],r[0][1],n||p.WGS84):null}function E(e,n,r){const o=[],t=v(r);if(-1===t)return console.warn(`invalid conversionMode: ${r}`),null;const s=M(n);return c.utmToGeog(s,1,[e],t,o)?new u(o[0][0],o[0][1],n||p.WGS84):null}function h(e,n,r=0){const o=[[e.x,e.y]],s=[],i=M(e.spatialReference);let c=0;switch(n){case"dd":c=t.geogToDd(i,1,o,r,s);break;case"ddm":c=t.geogToDdm(i,1,o,r,s);break;case"dms":c=t.geogToDms(i,1,o,r,s);break;default:return console.warn(`invalid format: ${n}`),null}return c?s[0]:null}function T(e,n,r=0,o=!1){const t=[[e.x,e.y]],i=[],c=M(e.spatialReference);let a=b(n);return-1===a?(console.warn(`invalid conversionMode: ${n}`),null):(o&&(a|=s.PE_MGRS_ADD_SPACES),s.geogToMgrsExtended(c,1,t,r,!1,a,i)?i[0]:null)}function G(e,n=0,r=!1){const o=[[e.x,e.y]],t=[],s=M(e.spatialReference);return i.geogToUsng(s,1,o,n,!1,r,t)?t[0]:null}function P(e,n,r=!1){const o=[[e.x,e.y]],t=[],s=M(e.spatialReference);let i=v(n);return-1===i?(console.warn(`invalid conversionMode: ${n}`),null):(r&&(i|=c.PE_UTM_OPTS_ADD_SPACES),c.geogToUtm(s,1,o,i,t)?t[0]:null)}function M(n){let r=null;if(n||(n=p.WGS84),n.wkid){if(r=a.geogcs(n.wkid),!r)throw new e("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!n.wkt2&&!n.wkt)throw new e("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(r=a.fromString(l.PE_TYPE_GEOGCS,n.wkt2||n.wkt),!r)throw new e("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return r}function b(e){let n=-1;switch(e){case"automatic":n=s.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":n=s.PE_MGRS_STYLE_NEW|s.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":n=s.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":n=s.PE_MGRS_STYLE_OLD|s.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":n=s.PE_MGRS_STYLE_OLD}return n}function v(e){let n=-1;switch(e){case"latitude-band-indicators":n=c.PE_UTM_OPTS_NONE;break;case"north-south-indicators":n=c.PE_UTM_OPTS_NS}return n}export{j as fromLatitude,S as fromLatitudeLongitude,k as fromLongitude,g as fromMgrs,w as fromUsng,E as fromUtm,d as isLoaded,f as isSupported,_ as load,h as toLatitudeLongitude,T as toMgrs,G as toUsng,P as toUtm};
