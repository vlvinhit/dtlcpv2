/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import{clone as s}from"../core/lang.js";import{property as r}from"../core/accessorSupport/decorators/property.js";import"../chunks/ensureType.js";import{subclass as e}from"../core/accessorSupport/decorators/subclass.js";import{w as i}from"../chunks/writer.js";import o from"./Extent.js";import n from"./Geometry.js";import a from"./Point.js";import{u as p}from"../chunks/zmUtils.js";import"../chunks/typedArrayUtil.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/maybe.js";import"../chunks/metadata.js";import"../core/Error.js";import"../chunks/tracking.js";import"./SpatialReference.js";import"../core/JSONSupport.js";import"../core/Accessor.js";import"../core/Handles.js";import"../chunks/ObjectPool.js";import"../chunks/ObservableBase.js";import"../chunks/watch.js";import"../chunks/ArrayPool.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../chunks/PooledArray.js";import"../core/promiseUtils.js";import"../chunks/unitUtils.js";import"../chunks/jsonMap.js";import"./support/webMercatorUtils.js";import"../chunks/reader.js";import"../core/accessorSupport/decorators/cast.js";var h;function c(t){return(s,r)=>null==s?r:null==r?s:t(s,r)}let m=h=class extends n{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,s){if(!t&&!s)return{};const r={};var e;Array.isArray(t)?(r.points=t,r.spatialReference=s):!(e=t)||"esri.geometry.SpatialReference"!==e.declaredClass&&null==e.wkid?(t.points&&(r.points=t.points),t.spatialReference&&(r.spatialReference=t.spatialReference),t.hasZ&&(r.hasZ=t.hasZ),t.hasM&&(r.hasM=t.hasM)):r.spatialReference=t;const i=r.points&&r.points[0];return i&&(void 0===r.hasZ&&void 0===r.hasM?(r.hasZ=i.length>2,r.hasM=!1):void 0===r.hasZ?r.hasZ=i.length>3:void 0===r.hasM&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const s=new o,r=this.hasZ,e=this.hasM,i=r?3:2,n=t[0],a=c(Math.min),p=c(Math.max);let h,m,l,u,[j,f]=n,[y,d]=n;for(let s=0,o=t.length;s<o;s++){const o=t[s],[n,c]=o;if(j=a(j,n),f=a(f,c),y=p(y,n),d=p(d,c),r&&o.length>2){const t=o[2];h=a(h,t),l=p(l,t)}if(e&&o.length>i){const t=o[i];m=a(m,t),u=p(u,t)}}return s.xmin=j,s.ymin=f,s.xmax=y,s.ymax=d,s.spatialReference=this.spatialReference,r?(s.zmin=h,s.zmax=l):(s.zmin=void 0,s.zmax=void 0),e?(s.mmin=m,s.mmax=u):(s.mmin=void 0,s.mmax=void 0),s}writePoints(t,r){r.points=s(this.points)}addPoint(t){return p(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:s(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new h(t)}getPoint(t){if(!this._validateInputs(t))return null;const s=this.points[t],r={x:s[0],y:s[1],spatialReference:this.spatialReference};let e=2;return this.hasZ&&(r.z=s[2],e=3),this.hasM&&(r.m=s[e]),new a(r)}removePoint(t){if(!this._validateInputs(t))return null;const s=new a(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),s}setPoint(t,s){return this._validateInputs(t)?(p(this,s),Array.isArray(s)||(s=s.toArray()),this.points[t]=s,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return null!=t&&t>=0&&t<this.points.length}};t([r({readOnly:!0})],m.prototype,"cache",null),t([r()],m.prototype,"extent",null),t([r({type:[[Number]],json:{write:{isRequired:!0}}})],m.prototype,"points",void 0),t([i("points")],m.prototype,"writePoints",null),m=h=t([e("esri.geometry.Multipoint")],m),m.prototype.toJSON.isDefaultToJSON=!0;const l=m;export{l as default};
