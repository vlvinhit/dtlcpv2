/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import e from"../core/Error.js";import{i as r,a as o,l as n,P as t,b as s,c as i,d as c,e as a,f as l}from"../chunks/pe.js";import u from"./Point.js";import p from"./SpatialReference.js";import"../core/lang.js";import"../chunks/typedArrayUtil.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../chunks/assets.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../chunks/maybe.js";import"../core/promiseUtils.js";import"../chunks/tslib.es6.js";import"../core/accessorSupport/decorators/property.js";import"../chunks/ensureType.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/metadata.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/reader.js";import"../core/accessorSupport/decorators/subclass.js";import"../chunks/tracking.js";import"../chunks/writer.js";import"./Geometry.js";import"../core/JSONSupport.js";import"../core/Accessor.js";import"../core/Handles.js";import"../chunks/ObjectPool.js";import"../chunks/ObservableBase.js";import"../chunks/watch.js";import"../chunks/ArrayPool.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../chunks/PooledArray.js";import"../chunks/unitUtils.js";import"../chunks/jsonMap.js";import"./support/webMercatorUtils.js";function m(){return r()}function d(){return o()}function j(){return n()}function k(e,r){const o=[];e=(e=(e=e.replaceAll(/[\u00B0\u00BA]/g,"^")).replaceAll("′","'")).replaceAll("″",'"');const n=P(r);return t.dmsToGeog(n,1,[e],o)?new u(o[0][0],o[0][1],r||p.WGS84):null}function _(e,r,o){const n=[],t=T(o);if(-1===t)return console.warn(`invalid conversionMode: ${o}`),null;const i=P(r);return s.mgrsToGeogExtended(i,1,[e],t,n)?new u(n[0][0],n[0][1],r||p.WGS84):null}function f(e,r){const o=[];!r&&/\(.+27/.test(e)&&(r=p.GCS_NAD_1927);const n=P(r);return i.usngToGeog(n,1,[e],o)?new u(o[0][0],o[0][1],r||p.WGS84):null}function S(e,r,o){const n=[],t=G(o);if(-1===t)return console.warn(`invalid conversionMode: ${o}`),null;const s=P(r);return c.utmToGeog(s,1,[e],t,n)?new u(n[0][0],n[0][1],r||p.WGS84):null}function g(e,r,o=0){const n=[[e.x,e.y]],s=[],i=P(e.spatialReference);let c=0;switch(r){case"dd":c=t.geogToDd(i,1,n,o,s);break;case"ddm":c=t.geogToDdm(i,1,n,o,s);break;case"dms":c=t.geogToDms(i,1,n,o,s);break;default:return console.warn(`invalid format: ${r}`),null}return c?s[0]:null}function h(e,r,o=0,n=!1){const t=[[e.x,e.y]],i=[],c=P(e.spatialReference);let a=T(r);return-1===a?(console.warn(`invalid conversionMode: ${r}`),null):(n&&(a|=s.PE_MGRS_ADD_SPACES),s.geogToMgrsExtended(c,1,t,o,!1,a,i)?i[0]:null)}function w(e,r=0,o=!1){const n=[[e.x,e.y]],t=[],s=P(e.spatialReference);return i.geogToUsng(s,1,n,r,!1,o,t)?t[0]:null}function E(e,r,o=!1){const n=[[e.x,e.y]],t=[],s=P(e.spatialReference);let i=G(r);return-1===i?(console.warn(`invalid conversionMode: ${r}`),null):(o&&(i|=c.PE_UTM_OPTS_ADD_SPACES),c.geogToUtm(s,1,n,i,t)?t[0]:null)}function P(r){let o=null;if(r||(r=p.WGS84),r.wkid){if(o=a.geogcs(r.wkid),!o)throw new e("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!r.wkt)throw new e("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(o=a.fromString(l.PE_TYPE_GEOGCS,r.wkt),!o)throw new e("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return o}function T(e){let r=-1;switch(e){case"automatic":r=s.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":r=s.PE_MGRS_STYLE_NEW|s.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":r=s.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":r=s.PE_MGRS_STYLE_OLD|s.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":r=s.PE_MGRS_STYLE_OLD}return r}function G(e){let r=-1;switch(e){case"latitude-band-indicators":r=c.PE_UTM_OPTS_NONE;break;case"north-south-indicators":r=c.PE_UTM_OPTS_NS}return r}export{k as fromLatitudeLongitude,_ as fromMgrs,f as fromUsng,S as fromUtm,m as isLoaded,d as isSupported,j as load,g as toLatitudeLongitude,h as toMgrs,w as toUsng,E as toUtm};
