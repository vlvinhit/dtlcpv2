/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{clone as t}from"../../core/lang.js";import n from"../SpatialReference.js";import{n as s,f as r,b as i,i as e}from"../../chunks/unitUtils.js";import"../../chunks/typedArrayUtil.js";import"../../chunks/tslib.es6.js";import"../../core/JSONSupport.js";import"../../core/Accessor.js";import"../../core/Handles.js";import"../../chunks/maybe.js";import"../../core/accessorSupport/decorators/subclass.js";import"../../chunks/metadata.js";import"../../chunks/utils.js";import"../../chunks/tracking.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/object.js";import"../../chunks/string.js";import"../../chunks/ensureType.js";import"../../core/Error.js";import"../../chunks/get.js";import"../../chunks/ObjectPool.js";import"../../chunks/ObservableBase.js";import"../../core/accessorSupport/decorators/property.js";import"../../chunks/watch.js";import"../../chunks/ArrayPool.js";import"../../core/scheduling.js";import"../../chunks/nextTick.js";import"../../chunks/PooledArray.js";import"../../core/promiseUtils.js";import"../../chunks/writer.js";import"../../chunks/jsonMap.js";const o=57.29577951308232,c=.017453292519943;function p(t){return t*o}function u(t){return t*c}function a(t){return t/s.radius}function h(t){return Math.PI/2-2*Math.atan(Math.exp(-t/s.radius))}function m(t){return null!=t.wkid||null!=t.wkt}const l=[0,0];function j(t,n,s,r,i){const e=t,o=i;if(o.spatialReference=s,"x"in e&&"x"in o)[o.x,o.y]=n(e.x,e.y,l,r);else if("xmin"in e&&"xmin"in o)[o.xmin,o.ymin]=n(e.xmin,e.ymin,l,r),[o.xmax,o.ymax]=n(e.xmax,e.ymax,l,r);else if("paths"in e&&"paths"in o||"rings"in e&&"rings"in o){const t="paths"in e?e.paths:e.rings,s=[];let i;for(let e=0;e<t.length;e++){const o=t[e];i=[],s.push(i);for(let t=0;t<o.length;t++)i.push(n(o[t][0],o[t][1],[0,0],r)),o[t].length>2&&i[t].push(o[t][2]),o[t].length>3&&i[t].push(o[t][3])}"paths"in o?o.paths=s:o.rings=s}else if("points"in e&&"points"in o){const t=e.points,s=[];for(let i=0;i<t.length;i++)s[i]=n(t[i][0],t[i][1],[0,0],r),t[i].length>2&&s[i].push(t[i][2]),t[i].length>3&&s[i].push(t[i][3]);o.points=s}return i}function f(t,n){const s=t&&(m(t)?t:t.spatialReference),o=n&&(m(n)?n:n.spatialReference);return!(t&&"type"in t&&"mesh"===t.type||n&&"type"in n&&"mesh"===n.type||!s||!o)&&(!!r(o,s)||i(o)&&e(s)||i(s)&&e(o))}function k(s,o){if(null==s)return null;const c=s.spatialReference,p=o&&(m(o)?o:o.spatialReference);return f(c,p)?r(c,p)?t(s):i(p)?j(s,g,n.WebMercator,!1,t(s)):e(p)?j(s,x,n.WGS84,!1,t(s)):null:null}function g(t,n,r=[0,0]){n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999);const i=u(n);return r[0]=u(t)*s.radius,r[1]=s.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function x(t,n,r=[0,0],i=!1){const e=p(t/s.radius);return r[0]=i?e:e-360*Math.floor((e+180)/360),r[1]=p(Math.PI/2-2*Math.atan(Math.exp(-n/s.radius))),r}function y(s,r=!1,i=t(s)){return j(s,g,n.WebMercator,r,i)}function M(s,r=!1,i=t(s)){return j(s,x,n.WGS84,r,i)}export{f as canProject,y as geographicToWebMercator,g as lngLatToXY,k as project,M as webMercatorToGeographic,a as x2lon,x as xyToLngLat,h as y2lat};
