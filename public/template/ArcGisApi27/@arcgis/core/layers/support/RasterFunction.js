/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{_ as t}from"../../chunks/tslib.es6.js";import{JSONSupport as e}from"../../core/JSONSupport.js";import{clone as o}from"../../core/lang.js";import{property as r}from"../../core/accessorSupport/decorators/property.js";import{I as n}from"../../chunks/ensureType.js";import{e as i}from"../../chunks/enumeration.js";import{r as s}from"../../chunks/reader.js";import{subclass as p}from"../../core/accessorSupport/decorators/subclass.js";import{w as a}from"../../chunks/writer.js";import{s as u,J as c}from"../../chunks/jsonMap.js";import"../../chunks/typedArrayUtil.js";import"../../core/Accessor.js";import"../../core/Handles.js";import"../../chunks/maybe.js";import"../../chunks/get.js";import"../../chunks/utils.js";import"../../chunks/metadata.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/object.js";import"../../chunks/string.js";import"../../chunks/ObjectPool.js";import"../../chunks/ObservableBase.js";import"../../chunks/tracking.js";import"../../chunks/watch.js";import"../../chunks/ArrayPool.js";import"../../core/scheduling.js";import"../../chunks/nextTick.js";import"../../chunks/PooledArray.js";import"../../core/promiseUtils.js";import"../../core/Error.js";const y=u()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),m=u()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),l=u()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});let j=class extends e{constructor(){super(...arguments),this.pixelType="unknown"}};t([r({type:String,json:{write:!0}})],j.prototype,"name",void 0),t([r({type:String,json:{write:!0}})],j.prototype,"description",void 0),t([r({type:n,json:{type:n,write:!0,name:"_object_id"}})],j.prototype,"id",void 0),t([r({type:String,json:{type:l.jsonValues,read:l.read,write:l.write}})],j.prototype,"pixelType",void 0),t([r({type:String,json:{write:!0}})],j.prototype,"type",void 0),j=t([p("esri.layers.support.RasterFunctionInfo")],j);const d=j;let f=class extends e{constructor(){super(...arguments),this.isDataset=!1,this.isPublic=!1,this.type="RasterFunctionVariable"}};t([r({type:String,json:{write:!0}})],f.prototype,"name",void 0),t([r({type:Number,json:{type:n,write:!0,name:"_object_id"}})],f.prototype,"id",void 0),t([r({type:Boolean,json:{write:!0}})],f.prototype,"isDataset",void 0),t([r({type:Boolean,json:{write:!0}})],f.prototype,"isPublic",void 0),t([r({json:{write:!0}})],f.prototype,"value",void 0),t([r({type:String,json:{write:!0}})],f.prototype,"type",void 0),f=t([p("esri.layers.support.RasterFunctionVariable")],f);const h={key:"type",base:null,typeMap:{RasterFunctionVariable:f}};let w=class extends e{};t([r({types:h,json:{types:h,name:"MatchVariable"}})],w.prototype,"matchVariable",void 0),t([r({types:h,json:{types:h,name:"UnionDimension"}})],w.prototype,"unionDimension",void 0),t([r({type:Number,json:{type:n,write:!0,name:"_object_id"}})],w.prototype,"id",void 0),t([r({type:String,json:{write:!0}})],w.prototype,"type",void 0),w=t([p("esri.layers.support.RasterFunctionProperties")],w);const g=w,v=new c({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0});let b=class extends e{constructor(){super(...arguments),this.functionType="mosaic",this.type="RasterFunctionTemplate"}};t([r({type:[String],json:{write:!0}})],b.prototype,"aliases",void 0),t([r({type:Object,json:{write:!0}})],b.prototype,"arguments",void 0),t([r({type:String,json:{write:!0}})],b.prototype,"description",void 0),t([r({type:d,json:{write:!0,name:"function"}})],b.prototype,"functionInfo",void 0),t([r({type:v.apiValues,json:{type:[0,1,2],read:v.read,write:v.write}})],b.prototype,"functionType",void 0),t([r({type:String,json:{write:!0}})],b.prototype,"group",void 0),t([r({type:String,json:{write:!0}})],b.prototype,"help",void 0),t([r({type:Number,json:{type:n,write:!0,name:"_object_id"}})],b.prototype,"id",void 0),t([r({type:String,json:{write:!0}})],b.prototype,"name",void 0),t([r({type:String,json:{write:!0,name:"definition"}})],b.prototype,"queryDefinition",void 0),t([r({type:String,json:{write:!0}})],b.prototype,"tag",void 0),t([r({type:g,json:{write:!0}})],b.prototype,"properties",void 0),t([r({type:String,json:{write:!0}})],b.prototype,"thumbnail",void 0),t([r({type:String,json:{write:!0}})],b.prototype,"thumbnailEx",void 0),t([r({json:{type:["RasterFunctionTemplate"],write:!0}})],b.prototype,"type",void 0),b=t([p("esri.layers.support.RasterFunctionTemplate")],b);const S=b;var F;const k=new Set(["raster","raster2","dem","fillraster"]),N=new Set(["rasters"]),A=t=>t&&t.rasterFunction?O.fromJSON(t):t,D=t=>t&&t instanceof O?t.toJSON():t,U=t=>t?.functionName&&!t.declaredClass,C=t=>U(t)?new O(t):t,x={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:S}},json:{write:!0,name:"rasterFunctionDefinition"}};let O=F=class extends e{constructor(t){super(t),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.functionDefinition=null}set functionArguments(t){if(t){const e=Object.keys(t);if(e.some((e=>k.has(e.toLowerCase())&&U(t[e])))||e.some((e=>N.has(e.toLowerCase())&&Array.isArray(t[e])&&t[e].some((t=>U(t)))))){t=o(t);for(const o of e)k.has(o.toLowerCase())?t[o]=C(t[o]):N.has(o.toLowerCase())&&Array.isArray(t[o])&&(t[o]=t[o].map((t=>C(t))))}}this._set("functionArguments",t)}readFunctionArguments(t){return(t=>{if(null==t)return null;t=o(t);const e={};for(const o of Object.keys(t))k.has(o.toLowerCase())?e[o]=A(t[o]):N.has(o.toLowerCase())&&Array.isArray(t[o])?e[o]=t[o].map(A):e[o]=t[o];return e})(t)}writeFunctionArguments(t,e,o){const r={};for(const e of Object.keys(t))k.has(e.toLowerCase())?r[e]=D(t[e]):N.has(e.toLowerCase())&&Array.isArray(t[e])?r[e]=t[e].map(D):r[e]=D(t[e]);e[o]=r}readFunctionName(t,e){const o=e.rasterFunctionInfos;return e.name||(o&&o.length&&"None"!==o[0].name?o[0].name:e.rasterFunctionDefinition?e.rasterFunctionDefinition.name:e.rasterFunction)}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(t){this.functionDefinition=t?S.fromJSON(t):null}clone(){return new F({functionName:this.functionName,functionArguments:o(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:o(this.rasterFunctionDefinition)})}};t([r({json:{type:Object,name:"rasterFunctionArguments"}})],O.prototype,"functionArguments",null),t([s("functionArguments")],O.prototype,"readFunctionArguments",null),t([a("functionArguments")],O.prototype,"writeFunctionArguments",null),t([r({json:{type:String,write:{target:"rasterFunction"}}})],O.prototype,"functionName",void 0),t([s("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],O.prototype,"readFunctionName",null),t([i({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),r({json:{default:"unknown"}})],O.prototype,"outputPixelType",void 0),t([r({type:String,json:{read:!0,write:!0}})],O.prototype,"variableName",void 0),t([r()],O.prototype,"rasterFunctionDefinition",null),t([r(x)],O.prototype,"functionDefinition",void 0),O=F=t([p("esri.layers.support.RasterFunction")],O);const P=O;export{P as default,y as i,m as n,l as p};
