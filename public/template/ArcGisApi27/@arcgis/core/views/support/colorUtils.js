/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import t from"../../Color.js";import{a as n,c as r,t as o}from"../../chunks/colorUtils2.js";import{a as s}from"../../chunks/vec4f64.js";import"../../chunks/colorUtils.js";import"../../chunks/mathUtils.js";import"../../chunks/vec3.js";import"../../chunks/vec3f64.js";import"../../chunks/common.js";import"../../chunks/vec4.js";import"../../chunks/ensureType.js";import"../../chunks/typedArrayUtil.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/object.js";import"../../core/lang.js";import"../../chunks/string.js";async function c(n){await n.whenReady();const r=n.basemapView?.baseLayerViews.map((t=>t.layer)).toArray()??[];if(!r.length){const r=getComputedStyle(n.container).backgroundColor,o=r&&new t(r);return n.get("background.color")||(o&&0!==o.a?o:null)||null}const o=(await n.takeScreenshot({format:"png",layers:r})).data.data,s=o.length;let c=0,e=0,a=0,u=0,i=0,l=0;for(let t=0;t<s;t+=4){const n=o[t],r=o[t+1],s=o[t+2],h=o[t+3],m=h/255;c+=n*n*m,e+=r*r*m,a+=s*s*m,i+=m,h&&(u+=h,l++)}return c=Math.round(Math.sqrt(c/i)),e=Math.round(Math.sqrt(e/i)),a=Math.round(Math.sqrt(a/i)),new t([c,e,a,u/l/255])}async function e(t){if(!t)return null;const n=await c(t);return null!=n?a(n):null}function a(t){return u(t).isBright?"light":"dark"}function u(n){let{r,g:o,b:s,a:c}=n;return c<1&&(r=Math.round(c*r+255*(1-c)),o=Math.round(c*o+255*(1-c)),s=Math.round(c*s+255*(1-c))),new t({r,g:o,b:s})}function i(t,n){const{r,g:o,b:s}=n?.ignoreAlpha?t:u(t);return.2126*r+.7152*o+.0722*s}function l(t,o){const s=n(t);s.l*=1-o;const c=r(s),e=t.clone();return e.setColor(c),e.a=t.a,e}function h(t,n){const r=t.clone();return r.a*=n,r}function m(t,n){const s=o(t);s.s*=n;const c=r(s),e=t.clone();return e.setColor(c),e.a=t.a,e}function p(n){return s(t.toUnitRGBA(n))}export{l as darken,m as desaturate,c as getBackgroundColor,e as getBackgroundColorTheme,i as getColorLuminance,a as getColorTheme,h as multiplyOpacity,p as unitRGBAFromColor};
