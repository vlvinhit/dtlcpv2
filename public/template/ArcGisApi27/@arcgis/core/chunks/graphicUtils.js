/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{g as t}from"./unitUtils.js";import{r as e,o as n,p as r}from"./mat4.js";import{c as i}from"./mat4f64.js";import{d as o,O as s}from"./vec3f64.js";import{s as a}from"./vec4.js";import{d as l,O as u}from"./vec4f64.js";import{projectPoint as m}from"../geometry/projection.js";import{w as c,q as f,r as p}from"./aaBoundingBox.js";import{c as h}from"./aaBoundingRect.js";import{d as g,a as y,r as d}from"../geometry/Polygon.js";import{m as x}from"./dehydratedFeatures.js";import{i as j,c as v}from"./hydratedFeatures.js";import{V as b}from"./VertexAttribute.js";function w(t,e){if("point"===t.type)return A(t,e,!1);if(j(t))switch(t.type){case"extent":return A(t.center,e,!1);case"polygon":return A(t.centroid,e,!1);case"polyline":return A(z(t),e,!0);case"mesh":return A(t.origin,e,!1)}else switch(t.type){case"extent":return A(function(t){return x(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),null!=t.zmin&&null!=t.zmax&&isFinite(t.zmin)&&isFinite(t.zmax)?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}(t),e,!0);case"polygon":return A(function(t){const e=t.rings[0];if(!e||0===e.length)return null;const n=d(t.rings,!!t.hasZ);return x(n[0],n[1],n[2],t.spatialReference)}(t),e,!0);case"polyline":return A(z(t),e,!0)}}function z(t){const e=t.paths[0];if(!e||0===e.length)return null;const n=g(e,y(e)/2);return x(n[0],n[1],n[2],t.spatialReference)}function A(t,e,n){const r=n?t:v(t);return e&&t?m(t,r,e)?r:null:r}function M(t,e,n,r=0){if(t){e||(e=h());const i=t;let o=.5*i.width*(n-1),s=.5*i.height*(n-1);return i.width<1e-7*i.height?o+=s/20:i.height<1e-7*i.width&&(s+=o/20),a(e,i.xmin-o-r,i.ymin-s-r,i.xmax+o+r,i.ymax+s+r),e}return null}function P(t,e){for(let n=0;n<t.geometries.length;++n){const r=t.geometries[n].getMutableAttribute(b.AUXPOS1);r&&r.data[3]!==e&&(r.data[3]=e,t.geometryVertexAttrsUpdated(t.geometries[n]))}}function R(t,e,n=null){const r=l(u);return null!=t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),null!=e?r[3]=e:null!=t&&t.length>3&&(r[3]=t[3]),n&&(r[0]*=n,r[1]*=n,r[2]*=n,r[3]*=n),r}function F(t,e,n,r,i,o=[0,0,0,0]){for(let e=0;e<3;++e)null!=t&&null!=t[e]?o[e]=t[e]:null!=n&&null!=n[e]?o[e]=n[e]:o[e]=i[e];return o[3]=null!=e?e:null!=r?r:i[3],o}function B(t=s,e,n,r=1){const i=new Array(3);if(null==e||null==n)i[0]=1,i[1]=1,i[2]=1;else{let r,o=0;for(let s=2;s>=0;s--){const a=t[s];let l;const u=null!=a,m=0===s&&!r&&!u,c=n[s];"symbol-value"===a||m?l=0!==c?e[s]/c:1:u&&"proportional"!==a&&isFinite(a)&&(l=0!==c?a/c:1),null!=l&&(i[s]=l,r=l,o=Math.max(o,Math.abs(l)))}for(let t=2;t>=0;t--)null==i[t]?i[t]=r:0===i[t]&&(i[t]=.001*o)}for(let t=2;t>=0;t--)i[t]/=r;return o(i)}function D(t){return I(null!=t.isPrimitive?[t.width,t.depth,t.height]:t)?null:"Symbol sizes may not be negative values"}function I(t){const e=t=>null==t||t>=0;return Array.isArray(t)?t.every(e):e(t)}function O(t,o,s,a=i()){return t&&e(a,a,-t/180*Math.PI),o&&n(a,a,o/180*Math.PI),s&&r(a,a,s/180*Math.PI),a}function U(e,n,r){if(null!=r.minDemResolution)return r.minDemResolution;const i=t(n),o=c(e)*i,s=f(e)*i,a=p(e)*(n.isGeographic?1:i);return 0===o&&0===s&&0===a?r.minDemResolutionForPoints:.01*Math.max(o,s,a)}export{B as a,O as b,w as c,U as d,M as e,I as i,R as m,F as o,P as u,D as v};
