/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{c as n}from"./quantityUtils.js";import{f as t,_ as r,$ as e}from"./unitUtils.js";import{z as i,s as l}from"./vec3.js";import{c as o}from"./vec3f64.js";import{projectVectorToVector as s}from"../geometry/projection.js";import{c as a}from"./measurementUtils2.js";var c;function u(n){return p(n,c.Direct)}function f(n){return p(n,c.Horizontal)}function p(t,r){const{hasZ:i,spatialReference:l}=t,o=a(l);let s=0;const u=e(o);if(null==u)return null;const f=r===c.Direct?v:x;for(const n of t.paths){if(n.length<2)continue;const t=n.length-1;for(let r=0;r<t;++r){const t=n[r];j[0]=t[0],j[1]=t[1],j[2]=i?t[2]:0;const e=n[r+1];d[0]=e[0],d[1]=e[1],d[2]=i?e[2]:0;const o=f(j,d,l);if(null==o)return null;s+=o.value}}return n(s,u)}function h(n,r){const{spatialReference:e}=n;return t(e,r.spatialReference)?(j[0]=n.x,j[1]=n.y,j[2]=n.hasZ?n.z:0,d[0]=r.x,d[1]=r.y,d[2]=r.hasZ?r.z:0,v(j,d,e)):null}function z(n,r){const{spatialReference:e}=n;return t(e,r.spatialReference)?(j[0]=n.x,j[1]=n.y,j[2]=n.hasZ?n.z:0,d[0]=r.x,d[1]=r.y,d[2]=r.hasZ?r.z:0,x(j,d,e)):null}function m(n,r){const{spatialReference:e}=n;return t(e,r.spatialReference)?(j[0]=n.x,j[1]=n.y,j[2]=n.hasZ?n.z:0,d[0]=r.x,d[1]=r.y,d[2]=r.hasZ?r.z:0,R(j,d,e)):null}function y(t){return j[0]=t.x,j[1]=t.y,j[2]=t.hasZ?t.z:0,function(t,e){const i=r(e);return null!=i?n(t[2],i):null}(j,t.spatialReference)}function v(t,r,e){const i=Z(t,r,e,c.Direct);return null!=i?n(i.direct,i.unit):null}function x(t,r,e){const i=Z(t,r,e,c.Horizontal);return null!=i?n(i.horizontal,i.unit):null}function R(t,r,e){const i=Z(t,r,e,c.Vertical);return null!=i?n(i.verticalSigned,i.unit):null}function Z(n,t,r,o){const u=a(r),f=e(u);if(null==f)return null;const p=t[2]-n[2];if(o===c.Vertical)return{verticalSigned:p,unit:f};if(!s(n,r,g,u)||!s(t,r,D,u))return null;if(o===c.Direct)return{direct:i(D,g),unit:f};if(l(H,n[0],n[1],t[2]),!s(H,r,H,u))return null;const h=i(H,D);return o===c.Horizontal?{horizontal:h,unit:f}:{direct:i(D,g),horizontal:h,vertical:Math.abs(p),unit:f}}!function(n){n[n.Direct=0]="Direct",n[n.Horizontal=1]="Horizontal",n[n.Vertical=2]="Vertical"}(c||(c={}));const j=o(),d=o(),g=o(),D=o(),H=o();export{h as a,f as b,u as c,z as d,v as e,x as f,y as g,R as h,m as v};
