/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{a as o}from"./quantityUtils.js";import{R as t}from"./unitUtils.js";import{e as r}from"./earcut.js";import{s as n,r as s,D as e}from"./vec3.js";import{c as i}from"./vec3f64.js";import{projectVectorToVector as a}from"../geometry/projection.js";import{d as l,w as f,n as c,p as u}from"./plane.js";import{a as m}from"./triangle.js";import{c as p}from"./measurementUtils2.js";function j(o,t={positionsWorldCoords:[]}){return g(o,t)}function d(o,t={positionsWorldCoords:[]}){return g(o,t,!1)}function g(r,j,d=r.hasZ){const g=p(r.spatialReference),W=t(g);if(null==W)return null;let y=0;for(const o of r.rings){const t=o.length;if(t<3)continue;const{positionsWorldCoords:p}=j;for(;p.length<t;)p.push(i());const W=h,w=n(C,0,0,0),q=1/t;for(let e=0;e<t;e++){if(R=W,(U=o[e]).length<2||(n(R,U[0],U[1],d&&U[2]||0),0))return null;if(!a(W,r.spatialReference,p[e],g))return null;s(w,w,p[e],q)}const x=l(p[0],p[1],w,f());if(0===e(c(x)))continue;for(let o=0;o<t;o++)u(x,w,p[o],p[o]);const A=v(p);for(let o=0;o<A.length;o+=3)y+=m(p[A[o]],p[A[o+1]],p[A[o+2]])}var R,U;return o(y,W)}const h=i(),C=i();function W(){return{positionsWorldCoords:[]}}function v(o){return r(function(o){const t=new Float64Array(2*o.length);for(let r=0;r<o.length;++r){const n=o[r],s=2*r;t[s]=n[0],t[s+1]=n[1]}return t}(o),[],2)}export{j as a,W as c,d as e,v as t};
