/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import s from"../core/Collection.js";import{r}from"../chunks/collectionUtils.js";import{L as e}from"../chunks/Logger.js";import{property as o}from"../core/accessorSupport/decorators/property.js";import"../chunks/ensureType.js";import"../chunks/typedArrayUtil.js";import{subclass as i}from"../core/accessorSupport/decorators/subclass.js";import"../chunks/ArrayPool.js";import"../chunks/ObjectPool.js";import"../core/Evented.js";import"../core/Accessor.js";import"../core/Handles.js";import"../chunks/maybe.js";import"../chunks/get.js";import"../chunks/utils.js";import"../core/lang.js";import"../chunks/metadata.js";import"../chunks/ObservableBase.js";import"../chunks/tracking.js";import"../chunks/watch.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../chunks/PooledArray.js";import"../core/promiseUtils.js";import"../core/Error.js";import"../chunks/object.js";import"../config.js";import"../chunks/string.js";import"../chunks/shared.js";import"../chunks/SimpleObservable.js";function n(t,s,r){if(t)for(let e=0,o=t.length;e<o;e++){const o=t.at(e);if(o[s]===r)return o;if("group"===o?.type){const t=n(o.tables,s,r);if(t)return t}}}const p=p=>{let a=class extends p{constructor(...t){super(...t),this.tables=new s,this.addHandles([this.tables.on("after-add",(t=>{const s=t.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,"feature"!==s.type&&e.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(t=>{t.item.parent=null}))])}destroy(){const t=this.tables.removeAll();for(const s of t)s.destroy();this.tables.destroy()}set tables(t){this._set("tables",r(t,this._get("tables")))}findTableById(t){return n(this.tables,"id",t)}findTableByUid(t){return n(this.tables,"uid",t)}};return t([o()],a.prototype,"tables",null),a=t([i("esri.support.TablesMixin")],a),a};export{p as TablesMixin};
