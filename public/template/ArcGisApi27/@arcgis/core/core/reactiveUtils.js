/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{i as n,o as r,isAborted as t,createAbortError as o,onAbort as s}from"./promiseUtils.js";import{h as i,b as e}from"../chunks/utils.js";import{r as u}from"../chunks/maybe.js";import{b as c}from"../chunks/watch.js";export{a as autorun}from"../chunks/watch.js";import"./Error.js";import"./lang.js";import"../chunks/typedArrayUtil.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../chunks/ArrayPool.js";import"../chunks/ObjectPool.js";import"./scheduling.js";import"../chunks/nextTick.js";import"../chunks/PooledArray.js";import"../chunks/get.js";import"../chunks/tracking.js";function l(n,r,t={}){return p(n,r,t,y)}function m(n,r,t={}){return p(n,r,t,g)}function p(n,r,t={},o){let s=null;const i=t.once?(n,t)=>{o(n)&&(u(s),r(n,t))}:(n,t)=>{o(n)&&r(n,t)};if(s=c(n,i,t.sync,t.equals),t.initial){const r=n();i(r,r)}return s}function f(t,o,s,i={}){let c=null,m=null,a=null;function p(){c&&m&&(m.remove(),i.onListenerRemove?.(c),c=null,m=null)}function f(n){i.once&&i.once&&u(a),s(n)}const j=l(t,((t,s)=>{p(),n(t)&&(c=t,m=r(t,o,f),i.onListenerAdd?.(t))}),{sync:i.sync,initial:!0});return a=e((()=>{j.remove(),p()})),a}function j(n,r){return k(n,null,r)}function h(n,r){return k(n,g,r)}function k(n,r,e){if(t(e))return Promise.reject(o());const c=n();if(r?.(c))return Promise.resolve(c);let l=null;function m(){l=u(l)}return new Promise(((t,u)=>{l=i([s(e,(()=>{m(),u(o())})),p(n,(n=>{m(),t(n)}),{sync:!1,once:!0},r??y)])}))}function y(n){return!0}function g(n){return!!n}function v(n,r,t={}){let o=!1;const s=l(n,((n,t)=>{o||r(n,t)}),t);return{remove(){s.remove()},pause(){o=!0},resume(){o=!1}}}const P={sync:!0},b={initial:!0},d={sync:!0,initial:!0};export{b as initial,f as on,j as once,v as pausable,P as sync,d as syncAndInitial,l as watch,m as when,h as whenOnce};
