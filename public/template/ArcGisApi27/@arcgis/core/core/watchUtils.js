/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{b as n}from"../chunks/deprecate.js";import{i as t,o as r,createResolver as e,onAbort as o,createAbortError as c}from"./promiseUtils.js";import{equals as u}from"./lang.js";import{L as i}from"../chunks/Logger.js";import"../chunks/typedArrayUtil.js";import"./Error.js";import"../chunks/object.js";import"../config.js";import"../chunks/string.js";import"../chunks/maybe.js";n(i.getLogger("esri.core.watchUtils"),"esri/core/watchUtils",{see:"https://arcg.is/1LTnuf",replacement:"esri/core/reactiveUtils",warnOnce:!0,version:"4.24"});const s=/\?(\.|$)/g;function f(n,t,r,e){const o=Array.isArray(t)?t:t.includes(",")?t.split(","):[t],c=l(n,t,r,e);for(const t of o){const e=t.trim().replaceAll(s,"$1"),o=n.get(e);r.call(n,o,o,e,n)}return c}function l(n,t,r,e){return n.watch(t,r,e)}function a(n,t,r,e){return z(n,t,null,r,e)}function m(n,t,r,e){return x(n,t,E,r,e)}function p(n,t,r,e){return z(n,t,E,r,e)}function h(n,t,r,e){return x(n,t,N,r,e)}function g(n,t,r,e){return z(n,t,N,r,e)}function j(n,t,r,e){return x(n,t,T,r,e)}function v(n,t,r,e){return z(n,t,T,r,e)}function d(n,t,r,e){return x(n,t,V,r,e)}function y(n,t,r,e){return z(n,t,V,r,e)}function b(n,t,r,e){return x(n,t,q,r,e)}function k(n,t,r,e){return z(n,t,q,r,e)}function w(n,t,r,e){return x(n,t,B,r,e)}function A(n,t,r,e){return z(n,t,B,r,e)}function U(n,t,r,e,o){return x(n,t,(n=>u(r,n)),e,o)}function L(n,t,r,e,o){return z(n,t,(n=>u(r,n)),e,o)}function O(n,t,r,e){let o=!1;const c=n.watch(t,((t,e,c,u)=>{o||r.call(n,t,e,c,u)}),e);return{remove(){c.remove()},pause(){o=!0},resume(){o=!1}}}function $(n,e,o,c,u,i,s){const l={};function a(t){const r=l[t];r&&(i&&i(r.target,t,n,o),r.handle.remove(),delete l[t])}const m=f(n,e,((e,i,s)=>{a(s),t(e)&&(l[s]={handle:r(e,o,c),target:e},u&&u(e,s,n,o))}),s);return{remove(){m.remove();for(const n in l)a(n)}}}function x(n,t,r,e,o){const c=n.watch(t,((t,o,c,u)=>{r&&!r(t)||e?.call(n,t,o,c,u)}),o);if(Array.isArray(t))for(const o of t){const c=n.get(o);r&&r(c)&&e?.call(n,c,c,t,n)}else{const o=n.get(t);r&&r(o)&&e?.call(n,o,o,t,n)}return c}function z(n,t,r,u,i){const s="function"==typeof u?u:null,f="object"==typeof u?u:null;"boolean"==typeof u&&(i=u);let l,a=!1;function m(){l&&(l.remove(),l=null)}const p=e();o(f,(()=>{m(),p.reject(c())}));const h={then:p.promise.then.bind(p.promise),catch:p.promise.catch.bind(p.promise),remove:m};return Object.freeze(h),l=x(n,t,r,((t,r,e,o)=>{a=!0,m(),s&&s.call(n,t,r,e,o),p.resolve({value:t,oldValue:r,propertyName:e,target:o})}),i),a&&m(),h}function E(n){return!!n}function N(n){return!n}function T(n){return!0===n}function V(n){return!1===n}function q(n){return void 0!==n}function B(n){return void 0===n}export{f as init,$ as on,a as once,O as pausable,l as watch,m as when,b as whenDefined,k as whenDefinedOnce,U as whenEqual,L as whenEqualOnce,d as whenFalse,y as whenFalseOnce,h as whenNot,g as whenNotOnce,p as whenOnce,j as whenTrue,v as whenTrueOnce,w as whenUndefined,A as whenUndefinedOnce,z as whenValidOnce};
