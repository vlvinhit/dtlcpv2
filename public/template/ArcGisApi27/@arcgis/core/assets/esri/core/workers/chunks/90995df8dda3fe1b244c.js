"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[7712,2058,9914,1796,3173],{2298:(e,t,r)=>{r.d(t,{a:()=>R,c:()=>F,d:()=>l,r:()=>x});var n=r(60991),o=r(76506),a=r(92143),s=r(99520);const i=!0,c={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function u(e,t,r){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,r+c.identifierOffset,c.identifierLength)),version:t.getUint16(r+c.versionOffset,i),checksum:t.getUint32(r+c.checksumOffset,i)}}function l(e){const t=new DataView(e,0);let r=0;const{identifier:o,version:a}=u(e,t,r);if(r+=c.byteCount,"LEPCC     "!==o)throw new n.Z("lepcc-decode-error","Bad identifier");if(a>1)throw new n.Z("lepcc-decode-error","Unknown version");const s=function(e,t){return{sizeLo:e.getUint32(t+0,i),sizeHi:e.getUint32(t+4,i),minX:e.getFloat64(t+8,i),minY:e.getFloat64(t+16,i),minZ:e.getFloat64(t+24,i),maxX:e.getFloat64(t+32,i),maxY:e.getFloat64(t+40,i),maxZ:e.getFloat64(t+48,i),errorX:e.getFloat64(t+56,i),errorY:e.getFloat64(t+64,i),errorZ:e.getFloat64(t+72,i),count:e.getUint32(t+80,i),reserved:e.getUint32(t+84,i)}}(t,r);if(r+=88,s.sizeHi*2**32+s.sizeLo!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");const l=new Float64Array(3*s.count),d=[],h=[],b=[],p=[];if(r=f(e,r,d),r=f(e,r,h),r=f(e,r,b),r=f(e,r,p),r!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad length");let m=0,g=0;for(let e=0;e<d.length;e++){g+=d[e];let t=0;for(let r=0;r<h[e];r++){t+=b[m];const e=p[m];l[3*m]=Math.min(s.maxX,s.minX+2*s.errorX*t),l[3*m+1]=Math.min(s.maxY,s.minY+2*s.errorY*g),l[3*m+2]=Math.min(s.maxZ,s.minZ+2*s.errorZ*e),m++}}return{errorX:s.errorX,errorY:s.errorY,errorZ:s.errorZ,result:l}}function f(e,t,r){const n=[];t=d(e,t,n);const o=[];for(let a=0;a<n.length;a++){o.length=0,t=d(e,t,o);for(let e=0;e<o.length;e++)r.push(o[e]+n[a])}return t}function d(e,t,r){const o=new DataView(e,t),a=o.getUint8(0),s=31&a,c=!!(32&a),u=(192&a)>>6;let l=0;if(0===u)l=o.getUint32(1,i),t+=5;else if(1===u)l=o.getUint16(1,i),t+=3;else{if(2!==u)throw new n.Z("lepcc-decode-error","Bad count type");l=o.getUint8(1),t+=2}if(c)throw new n.Z("lepcc-decode-error","LUT not implemented");const f=Math.ceil(l*s/8),d=new Uint8Array(e,t,f);let h=0,b=0,p=0;const m=-1>>>32-s;for(let e=0;e<l;e++){for(;b<s;)h|=d[p]<<b,b+=8,p+=1;r[e]=h&m,h>>>=s,b-=s,b+s>32&&(h|=d[p-1]>>8-b)}return t+p}const h=0,b=4,p=8,m=12,g=14,y=15,w=16,O=0,M=4,T=8,C=12,A=14,v=15,E=16,I=a.L.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function U(e,t,r){let o="",a=0;for(;a<r;){const s=e[t+a];if(s<128)o+=String.fromCharCode(s),a++;else if(s>=192&&s<224){if(a+1>=r)throw new n.Z("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const i=(31&s)<<6|63&e[t+a+1];o+=String.fromCharCode(i),a+=2}else if(s>=224&&s<240){if(a+2>=r)throw new n.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const i=(15&s)<<12|(63&e[t+a+1])<<6|63&e[t+a+2];o+=String.fromCharCode(i),a+=3}else{if(!(s>=240&&s<248))throw new n.Z("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(a+3>=r)throw new n.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const i=(7&s)<<18|(63&e[t+a+1])<<12|(63&e[t+a+2])<<6|63&e[t+a+3];if(i>=65536){const e=55296+(i-65536>>10),t=56320+(1023&i);o+=String.fromCharCode(e,t)}else o+=String.fromCharCode(i);a+=4}}}return o}function S(e,t){const r={byteOffset:0,byteCount:0,fields:Object.create(null)};let n=0;for(let o=0;o<t.length;o++){const a=t[o],s=a.valueType||a.type,i=k[s];r.fields[a.property]=i(e,n),n+=P[s].BYTES_PER_ELEMENT}return r.byteCount=n,r}function L(e,t,r){const o=[];let a,s,i=0;for(s=0;s<e;s+=1){if(a=t[s],a>0){if(o.push(U(r,i,a-1)),0!==r[i+a-1])throw new n.Z("string-array-error","Invalid string array: missing null termination.")}else o.push(null);i+=a}return o}function R(e,t){return new(0,P[t.valueType])(e,t.byteOffset,t.count*t.valuesPerElement)}function D(e,t,r){if(t!==e&&I.error(`Invalid ${r} buffer size\n expected: ${e}, actual: ${t})`),t<e)throw new n.Z("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function F(e,t){const r=S(e,t&&t.header);let n=r.byteCount;const o={isDraco:!1,header:r,byteOffset:r.byteCount,byteCount:0,vertexAttributes:{}},a=r.fields,s=null!=a.vertexCount?a.vertexCount:a.count;for(const e of t.ordering){if(!t.vertexAttributes[e])continue;const r={...t.vertexAttributes[e],byteOffset:n,count:s},a=N[e]||"_"+e;o.vertexAttributes[a]=r,n+=B(r.valueType)*r.valuesPerElement*s}const i=a.faceCount;if(t.faces&&i){o.faces={};for(const e of t.ordering){if(!t.faces[e])continue;const r={...t.faces[e],byteOffset:n,count:i};o.faces[e]=r,n+=B(r.valueType)*r.valuesPerElement*i}}const c=a.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&c){o.featureAttributes={};for(const e of t.featureAttributeOrder){if(!t.featureAttributes[e])continue;const r={...t.featureAttributes[e],byteOffset:n,count:c};o.featureAttributes[e]=r,n+=("UInt64"===r.valueType?8:B(r.valueType))*r.valuesPerElement*c}}return D(n,e.byteLength,"geometry"),o.byteCount=n-o.byteOffset,o}const N={position:s.V.POSITION,normal:s.V.NORMAL,color:s.V.COLOR,uv0:s.V.UV0,region:s.V.UVREGION};function x(e,t,r){if("lepcc-rgb"===e.encoding)return function(e){const t=new DataView(e,0);let r=0;const{identifier:o,version:a}=u(e,t,r);if(r+=c.byteCount,"ClusterRGB"!==o)throw new n.Z("lepcc-decode-error","Bad identifier");if(a>1)throw new n.Z("lepcc-decode-error","Unknown version");const s=function(e,t){return{sizeLo:e.getUint32(t+h,i),sizeHi:e.getUint32(t+b,i),count:e.getUint32(t+p,i),colorMapCount:e.getUint16(t+m,i),lookupMethod:e.getUint8(t+g),compressionMethod:e.getUint8(t+y)}}(t,r);if(r+=w,s.sizeHi*2**32+s.sizeLo!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");if((2===s.lookupMethod||1===s.lookupMethod)&&0===s.compressionMethod){if(3*s.colorMapCount+s.count+r!==e.byteLength||s.colorMapCount>256)throw new n.Z("lepcc-decode-error","Bad count");const t=new Uint8Array(e,r,3*s.colorMapCount),o=new Uint8Array(e,r+3*s.colorMapCount,s.count),a=new Uint8Array(3*s.count);for(let e=0;e<s.count;e++){const r=o[e];a[3*e]=t[3*r],a[3*e+1]=t[3*r+1],a[3*e+2]=t[3*r+2]}return a}if(0===s.lookupMethod&&0===s.compressionMethod){if(3*s.count+r!==e.byteLength||0!==s.colorMapCount)throw new n.Z("lepcc-decode-error","Bad count");return new Uint8Array(e,r).slice()}if(s.lookupMethod<=2&&1===s.compressionMethod){if(r+3!==e.byteLength||1!==s.colorMapCount)throw new n.Z("lepcc-decode-error","Bad count");const o=t.getUint8(r),a=t.getUint8(r+1),i=t.getUint8(r+2),c=new Uint8Array(3*s.count);for(let e=0;e<s.count;e++)c[3*e]=o,c[3*e+1]=a,c[3*e+2]=i;return c}throw new n.Z("lepcc-decode-error","Bad method "+s.lookupMethod+","+s.compressionMethod)}(t);if("lepcc-intensity"===e.encoding)return function(e){const t=new DataView(e,0);let r=0;const{identifier:o,version:a}=u(e,t,r);if(r+=c.byteCount,"Intensity "!==o)throw new n.Z("lepcc-decode-error","Bad identifier");if(a>1)throw new n.Z("lepcc-decode-error","Unknown version");const s=function(e,t){return{sizeLo:e.getUint32(t+O,i),sizeHi:e.getUint32(t+M,i),count:e.getUint32(t+T,i),scaleFactor:e.getUint16(t+C,i),bitsPerPoint:e.getUint8(t+A),reserved:e.getUint8(t+v)}}(t,r);if(r+=E,s.sizeHi*2**32+s.sizeLo!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");const l=new Uint16Array(s.count);if(8===s.bitsPerPoint){if(s.count+r!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");const t=new Uint8Array(e,r,s.count);for(let e=0;e<s.count;e++)l[e]=t[e]*s.scaleFactor}else if(16===s.bitsPerPoint){if(2*s.count+r!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");const t=new Uint16Array(e,r,s.count);for(let e=0;e<s.count;e++)l[e]=t[e]*s.scaleFactor}else{const t=[];if(d(e,r,t)!==e.byteLength)throw new n.Z("lepcc-decode-error","Bad size");for(let e=0;e<s.count;e++)l[e]=t[e]*s.scaleFactor}return l}(t);if(null!=e.encoding&&""!==e.encoding)throw new n.Z("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(I.warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(I.warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");const a=function(e,t,r){const a=null!=t.header?S(e,t.header):{byteOffset:0,byteCount:0,fields:{count:r}},s={header:a,byteOffset:a.byteCount,byteCount:0,entries:Object.create(null)};let i=a.byteCount;for(let e=0;e<t.ordering.length;e++){const r=t.ordering[e],c=(0,o.d9)(t[r]);if(c.count=a.fields.count??0,"String"===c.valueType){if(c.byteOffset=i,c.byteCount=a.fields[r+"ByteCount"],"UTF-8"!==c.encoding)throw new n.Z("unsupported-encoding","Unsupported String encoding.",{encoding:c.encoding});if(c.timeEncoding&&"ECMA_ISO8601"!==c.timeEncoding)throw new n.Z("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:c.timeEncoding})}else{if(!q(c.valueType))throw new n.Z("unsupported-value-type","Unsupported binary valueType",{valueType:c.valueType});{const e=B(c.valueType);i+=i%e!=0?e-i%e:0,c.byteOffset=i,c.byteCount=e*c.valuesPerElement*c.count}}i+=c.byteCount??0,s.entries[r]=c}return s.byteCount=i-s.byteOffset,s}(t,e,r);D(a.byteOffset+a.byteCount,t.byteLength,"attribute");const s=a.entries.attributeValues||a.entries.objectIds;if(s){if("String"===s.valueType){const e=a.entries.attributeByteCounts,r=R(t,e),n=function(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}(t,s);return s.timeEncoding?function(e,t,r){return L(e,t,r).map((e=>{const t=e?Date.parse(e):null;return t&&!Number.isNaN(t)?t:null}))}(e.count,r,n):L(e.count,r,n)}return R(t,s)}throw new n.Z("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const P={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},k={Float32:(e,t)=>new DataView(e,0).getFloat32(t,!0),Float64:(e,t)=>new DataView(e,0).getFloat64(t,!0),UInt8:(e,t)=>new DataView(e,0).getUint8(t),Int8:(e,t)=>new DataView(e,0).getInt8(t),UInt16:(e,t)=>new DataView(e,0).getUint16(t,!0),Int16:(e,t)=>new DataView(e,0).getInt16(t,!0),UInt32:(e,t)=>new DataView(e,0).getUint32(t,!0),Int32:(e,t)=>new DataView(e,0).getInt32(t,!0)};function q(e){return P.hasOwnProperty(e)}function B(e){return q(e)?P[e].BYTES_PER_ELEMENT:0}},27712:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var n=r(48578),o=r(35861),a=r(99),s=r(72836),i=r(56697),c=r(1623),u=r(60947),l=r(15206),f=r(35491),d=r(23884),h=r(2298);function b(e,t,r){return null!=e&&e.attributeInfo.useElevation?t?function(e,t){const r=new Float64Array(t);for(let n=0;n<t;n++)r[n]=e[3*n+2];return r}(t,r):null:null!=e&&e.attributeInfo.storageInfo?(0,h.r)(e.attributeInfo.storageInfo,e.buffer,r):null}function p(e,t,r,n,o){const a=e.length/3;let s=0;for(let i=0;i<a;i++){let a=!0;for(let e=0;e<n.length&&a;e++){const{filterJSON:t}=n[e],r=o[e].values[i];switch(t.type){case"pointCloudValueFilter":{const e="exclude"===t.mode;t.values.includes(r)===e&&(a=!1);break}case"pointCloudBitfieldFilter":{const e=g(t.requiredSetBits),n=g(t.requiredClearBits);(r&e)===e&&0==(r&n)||(a=!1);break}case"pointCloudReturnFilter":{const e=15&r,n=r>>>4&15,o=n>1,s=1===e,i=e===n;let c=!1;for(const e of t.includedReturns)if("last"===e&&i||"firstOfMany"===e&&s&&o||"lastOfMany"===e&&i&&o||"single"===e&&!o){c=!0;break}c||(a=!1);break}}}a&&(r[s]=i,e[3*s]=e[3*i],e[3*s+1]=e[3*i+1],e[3*s+2]=e[3*i+2],t[3*s]=t[3*i],t[3*s+1]=t[3*i+1],t[3*s+2]=t[3*i+2],s++)}return s}function m(e){switch(e){default:case null:case"none":return e=>e;case"low-four-bit":return e=>15&e;case"high-four-bit":return e=>(240&e)>>4;case"absolute-value":return e=>Math.abs(e);case"modulo-ten":return e=>e%10}}function g(e){let t=0;for(const r of e||[])t|=1<<r;return t}r(66106),r(29794),r(7200),r(60991),r(76506),r(92143),r(31450),r(71552),r(40642),r(82426),r(50406),r(53785),r(57251),r(6540),r(66396),r(89914),r(62062),r(65775),r(21801),r(34250),r(91306),r(60474),r(86656),r(17533),r(73796),r(12047),r(21972),r(379),r(19657),r(91055),r(6906),r(79456),r(97714),r(2906),r(91597),r(86787),r(35132),r(84069),r(12381),r(73173),r(82058),r(88762),r(32101),r(44567),r(98380),r(92482),r(92896),r(92624),r(92847),r(59465),r(60158),r(17035),r(51669),r(48027),r(54174),r(6090),r(99520);class y{transform(e){const t=this._transform(e),r=[t.points.buffer,t.rgb.buffer];null!=t.pointIdFilterMap&&r.push(t.pointIdFilterMap.buffer);for(const e of t.attributes)"buffer"in e.values&&(0,n.v)(e.values.buffer)&&e.values.buffer!==t.rgb.buffer&&r.push(e.values.buffer);return Promise.resolve({result:t,transferList:r})}_transform(e){const t=function(e,t){if(null==e.encoding||""===e.encoding){const r=(0,h.c)(t,e);if(null==r.vertexAttributes.position)return;const n=(0,h.a)(t,r.vertexAttributes.position),o=r.header.fields,a=[o.offsetX,o.offsetY,o.offsetZ],s=[o.scaleX,o.scaleY,o.scaleZ],i=n.length/3,c=new Float64Array(3*i);for(let e=0;e<i;e++)c[3*e]=n[3*e]*s[0]+a[0],c[3*e+1]=n[3*e+1]*s[1]+a[1],c[3*e+2]=n[3*e+2]*s[2]+a[2];return c}if("lepcc-xyz"===e.encoding)return(0,h.d)(t).result}(e.schema,e.geometryBuffer);let r=t.length/3,o=null;const a=new Array,s=b(e.primaryAttributeData,t,r);null!=e.primaryAttributeData&&s&&a.push({attributeInfo:e.primaryAttributeData.attributeInfo,values:s});const i=b(e.modulationAttributeData,t,r);null!=e.modulationAttributeData&&i&&a.push({attributeInfo:e.modulationAttributeData.attributeInfo,values:i});let c=function(e,t,r,n){const{rendererJSON:o,isRGBRenderer:a}=e;let s=null,i=null;if(t&&a)s=t;else if(t&&"pointCloudUniqueValueRenderer"===o?.type){i=d.Z.fromJSON(o);const e=i.colorUniqueValueInfos;s=new Uint8Array(3*n);const r=m(i.fieldTransformType);for(let o=0;o<n;o++){const n=(r?r(t[o]):t[o])+"";for(let t=0;t<e.length;t++)if(e[t].values.includes(n)){s[3*o]=e[t].color.r,s[3*o+1]=e[t].color.g,s[3*o+2]=e[t].color.b;break}}}else if(t&&"pointCloudStretchRenderer"===o?.type){i=f.Z.fromJSON(o);const e=i.stops;s=new Uint8Array(3*n);const r=m(i.fieldTransformType);for(let o=0;o<n;o++){const n=r?r(t[o]):t[o],a=e.length-1;if(n<e[0].value)s[3*o]=e[0].color.r,s[3*o+1]=e[0].color.g,s[3*o+2]=e[0].color.b;else if(n>=e[a].value)s[3*o]=e[a].color.r,s[3*o+1]=e[a].color.g,s[3*o+2]=e[a].color.b;else for(let t=1;t<e.length;t++)if(n<e[t].value){const r=(n-e[t-1].value)/(e[t].value-e[t-1].value);s[3*o]=e[t].color.r*r+e[t-1].color.r*(1-r),s[3*o+1]=e[t].color.g*r+e[t-1].color.g*(1-r),s[3*o+2]=e[t].color.b*r+e[t-1].color.b*(1-r);break}}}else if(t&&"pointCloudClassBreaksRenderer"===o?.type){i=l.Z.fromJSON(o);const e=i.colorClassBreakInfos;s=new Uint8Array(3*n);const r=m(i.fieldTransformType);for(let o=0;o<n;o++){const n=r?r(t[o]):t[o];for(let t=0;t<e.length;t++)if(n>=e[t].minValue&&n<=e[t].maxValue){s[3*o]=e[t].color.r,s[3*o+1]=e[t].color.g,s[3*o+2]=e[t].color.b;break}}}else s=new Uint8Array(3*n).fill(255);if(r&&i&&i.colorModulation){const e=i.colorModulation.minValue,t=i.colorModulation.maxValue,o=.3;for(let a=0;a<n;a++){const n=r[a],i=n>=t?1:n<=e?o:o+(1-o)*(n-e)/(t-e);s[3*a]=i*s[3*a],s[3*a+1]=i*s[3*a+1],s[3*a+2]=i*s[3*a+2]}}return s}(e.rendererInfo,s,i,r);if(e.filterInfo&&e.filterInfo.length>0&&null!=e.filterAttributesData){const s=e.filterAttributesData.filter(n.i).map((e=>{const n=b(e,t,r),o={attributeInfo:e.attributeInfo,values:n};return a.push(o),o}));o=new Uint32Array(r),r=p(t,c,o,e.filterInfo,s)}for(const n of e.userAttributesData){const e=b(n,t,r);a.push({attributeInfo:n.attributeInfo,values:e})}3*r<c.length&&(c=new Uint8Array(c.buffer.slice(0,3*r))),this._applyElevationOffsetInPlace(t,r,e.elevationOffset);const g=this._transformCoordinates(t,r,e.obb,u.Z.fromJSON(e.inSR),u.Z.fromJSON(e.outSR));return{obb:e.obb,points:g,rgb:c,attributes:a,pointIdFilterMap:o}}_transformCoordinates(e,t,r,n,a){if(!(0,c.projectBuffer)(e,n,0,e,a,0,t))throw new Error("Can't reproject");const u=(0,i.f)(r.center[0],r.center[1],r.center[2]),l=(0,i.b)(),f=(0,i.b)();(0,o.a)(w,r.quaternion);const d=new Float32Array(3*t);for(let n=0;n<t;n++)l[0]=e[3*n]-u[0],l[1]=e[3*n+1]-u[1],l[2]=e[3*n+2]-u[2],(0,s.o)(f,l,w),r.halfSize[0]=Math.max(r.halfSize[0],Math.abs(f[0])),r.halfSize[1]=Math.max(r.halfSize[1],Math.abs(f[1])),r.halfSize[2]=Math.max(r.halfSize[2],Math.abs(f[2])),d[3*n]=l[0],d[3*n+1]=l[1],d[3*n+2]=l[2];return d}_applyElevationOffsetInPlace(e,t,r){if(0!==r)for(let n=0;n<t;n++)e[3*n+2]+=r}}const w=(0,a.c)();function O(){return new y}},89914:(e,t,r)=>{r.d(t,{S:()=>o});var n=r(62062);class o extends n.O{notify(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const e of t)e.onInvalidated(),e.onCommitted()}}}},99520:(e,t,r)=>{var n;r.d(t,{V:()=>n}),function(e){e.POSITION="position",e.NORMAL="normal",e.NORMALCOMPRESSED="normalCompressed",e.UV0="uv0",e.AUXPOS1="auxpos1",e.AUXPOS2="auxpos2",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.TANGENT="tangent",e.OFFSET="offset",e.SUBDIVISIONFACTOR="subdivisionFactor",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.FEATUREVALUE="featureValue",e.MODELORIGINHI="modelOriginHi",e.MODELORIGINLO="modelOriginLo",e.MODEL="model",e.MODELNORMAL="modelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMALA="normalA",e.NORMALB="normalB",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.U8PADDING="u8padding",e.U16PADDING="u16padding",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.EXTRUDE="extrude",e.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",e.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(n||(n={}))},73173:(e,t,r)=>{r.d(t,{g:()=>c});var n=r(31450),o=(r(82058),r(60991)),a=r(92143),s=r(32101);const i=a.L.getLogger("esri.assets");function c(e){if(!n.default.assetsPath)throw i.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new o.Z("assets:path-not-set","config.assetsPath is not set");return(0,s.v_)(n.default.assetsPath,e)}},65775:(e,t,r)=>{r.d(t,{C:()=>f,D:()=>b,a:()=>h,b:()=>p,c:()=>i,d:()=>g,e:()=>m,f:()=>d,g:()=>l,i:()=>a,k:()=>w,l:()=>y,m:()=>c,n:()=>u,s:()=>o,t:()=>s});var n=r(29794);function o(e,t,r,n,o,a,s,i,c,u,l,f,d,h,b,p,m){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=a,e[5]=s,e[6]=i,e[7]=c,e[8]=u,e[9]=l,e[10]=f,e[11]=d,e[12]=h,e[13]=b,e[14]=p,e[15]=m,e}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function s(e,t){if(e===t){const r=t[1],n=t[2],o=t[3],a=t[6],s=t[7],i=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=o,e[13]=s,e[14]=i}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function i(e,t){const r=t[0],n=t[1],o=t[2],a=t[3],s=t[4],i=t[5],c=t[6],u=t[7],l=t[8],f=t[9],d=t[10],h=t[11],b=t[12],p=t[13],m=t[14],g=t[15],y=r*i-n*s,w=r*c-o*s,O=r*u-a*s,M=n*c-o*i,T=n*u-a*i,C=o*u-a*c,A=l*p-f*b,v=l*m-d*b,E=l*g-h*b,I=f*m-d*p,U=f*g-h*p,S=d*g-h*m;let L=y*S-w*U+O*I+M*E-T*v+C*A;return L?(L=1/L,e[0]=(i*S-c*U+u*I)*L,e[1]=(o*U-n*S-a*I)*L,e[2]=(p*C-m*T+g*M)*L,e[3]=(d*T-f*C-h*M)*L,e[4]=(c*E-s*S-u*v)*L,e[5]=(r*S-o*E+a*v)*L,e[6]=(m*O-b*C-g*w)*L,e[7]=(l*C-d*O+h*w)*L,e[8]=(s*U-i*E+u*A)*L,e[9]=(n*E-r*U-a*A)*L,e[10]=(b*T-p*O+g*y)*L,e[11]=(f*O-l*T-h*y)*L,e[12]=(i*v-s*I-c*A)*L,e[13]=(r*I-n*v+o*A)*L,e[14]=(p*w-b*M-m*y)*L,e[15]=(l*M-f*w+d*y)*L,e):null}function c(e,t,r){const n=t[0],o=t[1],a=t[2],s=t[3],i=t[4],c=t[5],u=t[6],l=t[7],f=t[8],d=t[9],h=t[10],b=t[11],p=t[12],m=t[13],g=t[14],y=t[15];let w=r[0],O=r[1],M=r[2],T=r[3];return e[0]=w*n+O*i+M*f+T*p,e[1]=w*o+O*c+M*d+T*m,e[2]=w*a+O*u+M*h+T*g,e[3]=w*s+O*l+M*b+T*y,w=r[4],O=r[5],M=r[6],T=r[7],e[4]=w*n+O*i+M*f+T*p,e[5]=w*o+O*c+M*d+T*m,e[6]=w*a+O*u+M*h+T*g,e[7]=w*s+O*l+M*b+T*y,w=r[8],O=r[9],M=r[10],T=r[11],e[8]=w*n+O*i+M*f+T*p,e[9]=w*o+O*c+M*d+T*m,e[10]=w*a+O*u+M*h+T*g,e[11]=w*s+O*l+M*b+T*y,w=r[12],O=r[13],M=r[14],T=r[15],e[12]=w*n+O*i+M*f+T*p,e[13]=w*o+O*c+M*d+T*m,e[14]=w*a+O*u+M*h+T*g,e[15]=w*s+O*l+M*b+T*y,e}function u(e,t,r){const n=r[0],o=r[1],a=r[2];if(t===e)e[12]=t[0]*n+t[4]*o+t[8]*a+t[12],e[13]=t[1]*n+t[5]*o+t[9]*a+t[13],e[14]=t[2]*n+t[6]*o+t[10]*a+t[14],e[15]=t[3]*n+t[7]*o+t[11]*a+t[15];else{const r=t[0],s=t[1],i=t[2],c=t[3],u=t[4],l=t[5],f=t[6],d=t[7],h=t[8],b=t[9],p=t[10],m=t[11];e[0]=r,e[1]=s,e[2]=i,e[3]=c,e[4]=u,e[5]=l,e[6]=f,e[7]=d,e[8]=h,e[9]=b,e[10]=p,e[11]=m,e[12]=r*n+u*o+h*a+t[12],e[13]=s*n+l*o+b*a+t[13],e[14]=i*n+f*o+p*a+t[14],e[15]=c*n+d*o+m*a+t[15]}return e}function l(e,t,r){const n=r[0],o=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f(e,t,r,o){let a,s,i,c,u,l,f,d,h,b,p,m,g,y,w,O,M,T,C,A,v,E,I,U,S=o[0],L=o[1],R=o[2],D=Math.sqrt(S*S+L*L+R*R);return D<(0,n.g)()?null:(D=1/D,S*=D,L*=D,R*=D,a=Math.sin(r),s=Math.cos(r),i=1-s,c=t[0],u=t[1],l=t[2],f=t[3],d=t[4],h=t[5],b=t[6],p=t[7],m=t[8],g=t[9],y=t[10],w=t[11],O=S*S*i+s,M=L*S*i+R*a,T=R*S*i-L*a,C=S*L*i-R*a,A=L*L*i+s,v=R*L*i+S*a,E=S*R*i+L*a,I=L*R*i-S*a,U=R*R*i+s,e[0]=c*O+d*M+m*T,e[1]=u*O+h*M+g*T,e[2]=l*O+b*M+y*T,e[3]=f*O+p*M+w*T,e[4]=c*C+d*A+m*v,e[5]=u*C+h*A+g*v,e[6]=l*C+b*A+y*v,e[7]=f*C+p*A+w*v,e[8]=c*E+d*I+m*U,e[9]=u*E+h*I+g*U,e[10]=l*E+b*I+y*U,e[11]=f*E+p*I+w*U,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function d(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function h(e,t,r){if(0===t)return a(e);let o,s,i,c=r[0],u=r[1],l=r[2],f=Math.sqrt(c*c+u*u+l*l);return f<(0,n.g)()?null:(f=1/f,c*=f,u*=f,l*=f,o=Math.sin(t),s=Math.cos(t),i=1-s,e[0]=c*c*i+s,e[1]=u*c*i+l*o,e[2]=l*c*i-u*o,e[3]=0,e[4]=c*u*i-l*o,e[5]=u*u*i+s,e[6]=l*u*i+c*o,e[7]=0,e[8]=c*l*i+u*o,e[9]=u*l*i-c*o,e[10]=l*l*i+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function b(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function p(e,t,r,n){const o=t[0],a=t[1],s=t[2],i=t[3],c=o+o,u=a+a,l=s+s,f=o*c,d=o*u,h=o*l,b=a*u,p=a*l,m=s*l,g=i*c,y=i*u,w=i*l,O=n[0],M=n[1],T=n[2];return e[0]=(1-(b+m))*O,e[1]=(d+w)*O,e[2]=(h-y)*O,e[3]=0,e[4]=(d-w)*M,e[5]=(1-(f+m))*M,e[6]=(p+g)*M,e[7]=0,e[8]=(h+y)*T,e[9]=(p-g)*T,e[10]=(1-(f+b))*T,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function m(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function g(e,t){if(e===t)return!0;const r=e[0],o=e[1],a=e[2],s=e[3],i=e[4],c=e[5],u=e[6],l=e[7],f=e[8],d=e[9],h=e[10],b=e[11],p=e[12],m=e[13],g=e[14],y=e[15],w=t[0],O=t[1],M=t[2],T=t[3],C=t[4],A=t[5],v=t[6],E=t[7],I=t[8],U=t[9],S=t[10],L=t[11],R=t[12],D=t[13],F=t[14],N=t[15],x=(0,n.g)();return Math.abs(r-w)<=x*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(o-O)<=x*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(a-M)<=x*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(s-T)<=x*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(i-C)<=x*Math.max(1,Math.abs(i),Math.abs(C))&&Math.abs(c-A)<=x*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(u-v)<=x*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-E)<=x*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(f-I)<=x*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-U)<=x*Math.max(1,Math.abs(d),Math.abs(U))&&Math.abs(h-S)<=x*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(b-L)<=x*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(p-R)<=x*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-D)<=x*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(g-F)<=x*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(y-N)<=x*Math.max(1,Math.abs(y),Math.abs(N))}function y(e){const t=(0,n.g)(),r=e[0],o=e[1],a=e[2],s=e[4],i=e[5],c=e[6],u=e[8],l=e[9],f=e[10];return Math.abs(1-(r*r+s*s+u*u))<=t&&Math.abs(1-(o*o+i*i+l*l))<=t&&Math.abs(1-(a*a+c*c+f*f))<=t}function w(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[8]&&0===e[9]&&1===e[10]}},35861:(e,t,r)=>{r.d(t,{a:()=>c,e:()=>l,f:()=>u,g:()=>s,m:()=>i,s:()=>a});var n=r(66106),o=r(29794);function a(e,t,r){r*=.5;const n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function s(e,t){const r=2*Math.acos(t[3]),n=Math.sin(r/2);return n>(0,o.g)()?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r}function i(e,t,r){const n=t[0],o=t[1],a=t[2],s=t[3],i=r[0],c=r[1],u=r[2],l=r[3];return e[0]=n*l+s*i+o*u-a*c,e[1]=o*l+s*c+a*i-n*u,e[2]=a*l+s*u+n*c-o*i,e[3]=s*l-n*i-o*c-a*u,e}function c(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function u(e,t,r,n){const o=.5*Math.PI/180;t*=o,r*=o,n*=o;const a=Math.sin(t),s=Math.cos(t),i=Math.sin(r),c=Math.cos(r),u=Math.sin(n),l=Math.cos(n);return e[0]=a*c*l-s*i*u,e[1]=s*i*l+a*c*u,e[2]=s*c*u-a*i*l,e[3]=s*c*l+a*i*u,e}const l=(r(72836),r(7200)).e;(0,n.c)(),(0,n.f)(1,0,0),(0,n.f)(0,1,0)},99:(e,t,r)=>{function n(){const e=new Float32Array(4);return e[3]=1,e}function o(e){const t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}r.d(t,{a:()=>o,c:()=>n})},56697:(e,t,r)=>{function n(){return new Float32Array(3)}function o(e){const t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e,t,r){const n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}r.d(t,{b:()=>n,c:()=>o,f:()=>a}),a(1,1,1),a(1,0,0),a(0,1,0),a(0,0,1)},82058:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m,i:()=>p,l:()=>d,r:()=>F,s:()=>f});var n=r(31450),o=r(88762),a=r(60991),s=r(48578),i=r(76506),c=r(50406),u=r(32101);r(71552),r(92143),r(40642);const l=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function f(e){const t=(0,u.P$)(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!l.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function d(e,t,r=!1,n){return new Promise(((o,a)=>{if((0,c.Hc)(n))return void a(h());let i=()=>{f(),a(new Error(`Unable to load ${t}`))},u=()=>{const t=e;f(),o(t)},l=()=>{if(!e)return;const t=e;f(),t.src="",a(h())};const f=()=>{(0,s.h)("esri-image-decode")||(e.removeEventListener("error",i),e.removeEventListener("load",u)),i=null,u=null,e=null,null!=n&&n.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};null!=n&&n.addEventListener("abort",l),(0,s.h)("esri-image-decode")?e.decode().then(u,i):(e.addEventListener("error",i),e.addEventListener("load",u))}))}function h(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const b="Timeout exceeded";function p(e){return"object"==typeof e&&!!e&&"message"in e&&e.message===b}async function m(e,t){e instanceof URL&&(e=e.toString()),t?.query instanceof URLSearchParams&&(t.query=(0,u.u0)(t.query.toString().replaceAll("+"," ")));const i=(0,u.HK)(e),l=(0,u.jc)(e);l||i||(e=(0,u.Fv)(e));const d={url:e,requestOptions:{...t}};let h=(0,u.oh)(e);if(h){const e=await async function(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,n;try{n=await e.before(t)}catch(e){r=E("request:interceptor",e,t)}if((n instanceof Error||n instanceof a.Z)&&(r=E("request:interceptor",n,t)),r)throw e.error&&e.error(r),r;return n}}(h,d);if(null!=e)return{data:e,getHeader:C,httpStatus:200,requestOptions:d.requestOptions,url:d.url};h.after||h.error||(h=null)}if(e=d.url,"image"===(t=d.requestOptions).responseType&&((0,s.h)("host-webworker")||(0,s.h)("host-node")))throw E("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),d);if("head"===t.method){if(t.body)throw E("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),d);if(i||l)throw E("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),d)}if(await async function(){(0,s.h)("host-webworker")?g||(g=await r.e(9768).then(r.bind(r,89768))):m._abortableFetch||(m._abortableFetch=globalThis.fetch.bind(globalThis))}(),g)return g.execute(e,t);const b=new AbortController;(0,c.fu)(t,(()=>b.abort()));const p={controller:b,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:h,params:d,redoRequest:!1,useIdentity:y.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},O=await async function(e){let t,r;await async function(e){const t=e.params.url,r=e.params.requestOptions,a=e.controller.signal,s=r.body;let i=null,u=null;if(w&&"HTMLFormElement"in globalThis&&(s instanceof FormData?i=s:s instanceof HTMLFormElement&&(i=new FormData(s))),"string"==typeof s&&(u=s),e.fetchOptions={cache:r.cacheBust&&!("polyfill"in m._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:"head"===r.method?"HEAD":"GET",mode:"cors",priority:y.priority,redirect:"follow",signal:a},(i||u)&&(e.fetchOptions.body=i||u),"anonymous"===r.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query?.token||i?.get("token")),!e.hasToken&&n.default.apiKey&&f(t)&&(r.query||(r.query={}),r.query.token=n.default.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!U(t)&&!(0,c.Hc)(a)){let n;"immediate"===r.authMode?(await I(),n=await o.id.getCredential(t,{signal:a}),e.credential=n):"no-prompt"===r.authMode?(await I(),n=await o.id.getCredential(t,{prompt:!1,signal:a}).catch((()=>{})),e.credential=n):o.id&&(n=o.id.findCredential(t)),n&&(e.credentialToken=n.token,e.useSSL=!!n.ssl)}}(e);try{do{[t,r]=await S(e)}while(!await R(e,t,r))}catch(r){const n=E("request:server",r,e.params,t);throw n.details.ssl=e.useSSL,e.interceptor?.error&&e.interceptor.error(n),n}const a=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(a)){if(!e.hasToken&&!e.credentialToken&&r.user?.username&&!(0,u.kl)(a)){const e=(0,u.P$)(a,!0);e&&y.trustedServers.push(e)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&function(e){n.default.request.crossOriginNoCorsDomains||(n.default.request.crossOriginNoCorsDomains={});const t=n.default.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[(0,u.P$)(r)??""]=0:(t[(0,u.P$)("http://"+r)??""]=0,t[(0,u.P$)("https://"+r)??""]=0)}(r.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&o.id){const e=o.id.findServerInfo(s.server);let t=e?.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=o.id.findCredential(t,s.userId);e&&-1===o.id._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:r,getHeader:t?e=>t?.headers.get(e):C,httpStatus:t?.status??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}(p);return h?.after?.(O),O}let g;const y=n.default.request,w="FormData"in globalThis,O=[499,498,403,401],M=["COM_0056","COM_0057","SB_0008"],T=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],C=()=>null,A=Symbol();function v(e){const t=(0,u.P$)(e);return!t||t.endsWith(".arcgis.com")||m._corsServers.includes(t)||(0,u.kl)(t)}function E(e,t,r,n){let o="Error";const s={url:r.url,requestOptions:r.requestOptions,getHeader:C,ssl:!1};if(t instanceof a.Z)return t.details?(t.details=(0,i.d9)(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const e=n&&(e=>n.headers.get(e)),r=n?.status,a=t.message;a&&(o=a),e&&(s.getHeader=e),s.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||r||0,s.subCode=t.subcode,s.messageCode=t.messageCode,"string"==typeof t.details?s.messages=[t.details]:s.messages=t.details,s.raw=A in t?t[A]:t}return(0,c.D_)(t)?(0,c.zE)():new a.Z(e,o,s)}async function I(){o.id||await Promise.all([r.e(4078),r.e(6676),r.e(6097),r.e(7803)]).then(r.bind(r,67803))}function U(e){return T.some((t=>t.test(e)))}async function S(e){let t=e.params.url;const r=e.params.requestOptions,a=e.fetchOptions??{},i=(0,u.jc)(t)||(0,u.HK)(t),l=r.responseType||"json",f=i?0:null!=r.timeout?r.timeout:y.timeout;let d=!1;if(!i){e.useSSL&&(t=(0,u.hO)(t)),r.cacheBust&&"default"===a.cache&&(t=(0,u.ZN)(t,"request.preventCache",Date.now()));let i={...r.query};e.credentialToken&&(i.token=e.credentialToken);let c=(0,u.B7)(i);(0,s.h)("esri-url-encodes-apostrophe")&&(c=c.replaceAll("'","%27"));const l=t.length+1+c.length;let f;d="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||l>y.maxUrlLength;const h=r.useProxy||!!(0,u.ed)(t);if(h){const e=(0,u.b7)(t);f=e.path,!d&&f.length+1+l>y.maxUrlLength&&(d=!0),e.query&&(i={...e.query,...i})}if("HEAD"===a.method&&(d||h)){if(d){if(l>y.maxUrlLength)throw E("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw E("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(h)throw E("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(d?(a.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?t=(0,u.fl)(t,i):(a.body=(0,u.B7)(i),a.headers||(a.headers={}),a.headers["Content-Type"]="application/x-www-form-urlencoded")):t=(0,u.fl)(t,i),h&&(e.useProxy=!0,t=`${f}?${t}`),i.token&&w&&a.body instanceof FormData&&!(0,u.i)(t)&&a.body.set("token",i.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!(0,u.D6)(t,(0,u.TI)()))if((0,u.kl)(t))e.withCredentials=!0;else if(o.id){const r=o.id.findServerInfo(t);r?.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(a.credentials="include",function(e){const t=n.default.request.crossOriginNoCorsDomains;if(t){let r=(0,u.P$)(e);if(r)return r=r.toLowerCase(),!(0,u.D6)(r,(0,u.TI)())&&t[r]<Date.now()-36e5}return!1}(t)&&await async function(e){const t=n.default.request.crossOriginNoCorsDomains,r=(0,u.P$)(e);t&&r&&(t[r.toLowerCase()]=Date.now());const o=(0,u.mN)(e);e=o.path,"json"===o.query?.f&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}(d?(0,u.fl)(t,i):t))}let h,p,g=0,O=!1;f>0&&(g=setTimeout((()=>{O=!0,e.controller.abort()}),f));try{if("native-request-init"===r.responseType)p=a,p.url=t;else if("image"!==r.responseType||"default"!==a.cache||"GET"!==a.method||d||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(r.headers)||!i&&!e.useProxy&&y.proxyUrl&&!v(t)){if(h=await m._abortableFetch(t,a),e.useProxy||function(e){const t=(0,u.P$)(e);t&&!m._corsServers.includes(t)&&m._corsServers.push(t)}(t),"native"===r.responseType)p=h;else if("HEAD"!==a.method)if(h.ok){switch(l){case"array-buffer":p=await h.arrayBuffer();break;case"blob":case"image":p=await h.blob();break;default:p=await h.text()}if(g&&(clearTimeout(g),g=0),"json"===l||"xml"===l||"document"===l)if(p)switch(l){case"json":p=JSON.parse(p);break;case"xml":p=L(p,"application/xml");break;case"document":p=L(p,"text/html")}else p=null;if(p){if("array-buffer"===l||"blob"===l){const e=h.headers.get("Content-Type");if(e&&/application\/json|text\/plain/i.test(e)&&p["blob"===l?"size":"byteLength"]<=750)try{const e=await new Response(p).json();e.error&&(p=e)}catch{}}"image"===l&&p instanceof Blob&&(p=await D(URL.createObjectURL(p),e,!0))}}else{p=await h.text();try{p=JSON.parse(p)}catch{}}}else p=await D(t,e)}catch(n){if("AbortError"===n.name){if(O)throw new Error(b);throw(0,c.zE)("Request canceled")}if(!(!h&&n instanceof TypeError&&y.proxyUrl)||r.body||"delete"===r.method||"head"===r.method||"post"===r.method||"put"===r.method||e.useProxy||v(t))throw n;e.redoRequest=!0,(0,u.tD)({proxyUrl:y.proxyUrl,urlPrefix:(0,u.P$)(t)??""})}finally{g&&clearTimeout(g)}return[h,p]}function L(e,t){let r;try{r=(new DOMParser).parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function R(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const n=e.params.requestOptions;if(!t||"native"===n.responseType||"native-request-init"===n.responseType)return!0;let a,s;if(r&&(r.error?a=r.error:"error"===r.status&&Array.isArray(r.messages)&&(a={...r},a[A]=r,a.details=r.messages)),!a&&!t.ok)throw a=new Error(`Unable to load ${t.url} status: ${t.status}`),a[A]=r,a;let i,c=null;a&&(s=Number(a.code),c=a.hasOwnProperty("subcode")?Number(a.subcode):null,i=a.messageCode,i=i?.toUpperCase());const u=n.authMode;if(403===s&&(4===c||a.message?.toLowerCase().includes("ssl")&&!a.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==u||498===s)&&void 0!==s&&O.includes(s)&&!U(e.params.url)&&(403!==s||i&&!M.includes(i)&&(null==c||2===c&&e.credentialToken))){await I();try{const t=await o.id.getCredential(e.params.url,{error:E("request:server",a,e.params),prompt:"no-prompt"!==u,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===u)return e.credential=void 0,e.credentialToken=void 0,!1;a=t}}if(a)throw a;return!0}function D(e,t,r=!1){const n=t.controller.signal,o=new Image;return t.withCredentials?o.crossOrigin="use-credentials":o.crossOrigin="anonymous",o.alt="",o.fetchPriority=y.priority,o.src=e,d(o,e,r,n)}m._abortableFetch=null,m._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const F=Object.freeze(Object.defineProperty({__proto__:null,default:m},Symbol.toStringTag,{value:"Module"}))}}]);