"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[8629,6646],{29395:(e,t,r)=>{r.d(t,{F:()=>a});var i=r(29768),n=r(12047),s=r(34250),o=(r(91306),r(48578),r(17533));let a=class extends n.wq{constructor(){super(...arguments),this.type=null}};(0,i._)([(0,s.Cb)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=(0,i._)([(0,o.j)("esri.layers.support.FeatureReduction")],a)},81317:(e,t,r)=>{r.d(t,{c:()=>p,o:()=>i});const i={Base64:0,Hex:1,String:2,Raw:3};function n(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function s(e,t,r,i,s,o){return n((a=n(n(t,e),n(i,o)))<<(l=s)|a>>>32-l,r);var a,l}function o(e,t,r,i,n,o,a){return s(t&r|~t&i,e,t,n,o,a)}function a(e,t,r,i,n,o,a){return s(t&i|r&~i,e,t,n,o,a)}function l(e,t,r,i,n,o,a){return s(t^r^i,e,t,n,o,a)}function u(e,t,r,i,n,o,a){return s(r^(t|~i),e,t,n,o,a)}function p(e,t=i.Hex){const r=t||i.Base64,s=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,s=-1732584194,p=271733878;for(let t=0;t<e.length;t+=16){const d=r,c=i,y=s,f=p;r=o(r,i,s,p,e[t],7,-680876936),p=o(p,r,i,s,e[t+1],12,-389564586),s=o(s,p,r,i,e[t+2],17,606105819),i=o(i,s,p,r,e[t+3],22,-1044525330),r=o(r,i,s,p,e[t+4],7,-176418897),p=o(p,r,i,s,e[t+5],12,1200080426),s=o(s,p,r,i,e[t+6],17,-1473231341),i=o(i,s,p,r,e[t+7],22,-45705983),r=o(r,i,s,p,e[t+8],7,1770035416),p=o(p,r,i,s,e[t+9],12,-1958414417),s=o(s,p,r,i,e[t+10],17,-42063),i=o(i,s,p,r,e[t+11],22,-1990404162),r=o(r,i,s,p,e[t+12],7,1804603682),p=o(p,r,i,s,e[t+13],12,-40341101),s=o(s,p,r,i,e[t+14],17,-1502002290),i=o(i,s,p,r,e[t+15],22,1236535329),r=a(r,i,s,p,e[t+1],5,-165796510),p=a(p,r,i,s,e[t+6],9,-1069501632),s=a(s,p,r,i,e[t+11],14,643717713),i=a(i,s,p,r,e[t],20,-373897302),r=a(r,i,s,p,e[t+5],5,-701558691),p=a(p,r,i,s,e[t+10],9,38016083),s=a(s,p,r,i,e[t+15],14,-660478335),i=a(i,s,p,r,e[t+4],20,-405537848),r=a(r,i,s,p,e[t+9],5,568446438),p=a(p,r,i,s,e[t+14],9,-1019803690),s=a(s,p,r,i,e[t+3],14,-187363961),i=a(i,s,p,r,e[t+8],20,1163531501),r=a(r,i,s,p,e[t+13],5,-1444681467),p=a(p,r,i,s,e[t+2],9,-51403784),s=a(s,p,r,i,e[t+7],14,1735328473),i=a(i,s,p,r,e[t+12],20,-1926607734),r=l(r,i,s,p,e[t+5],4,-378558),p=l(p,r,i,s,e[t+8],11,-2022574463),s=l(s,p,r,i,e[t+11],16,1839030562),i=l(i,s,p,r,e[t+14],23,-35309556),r=l(r,i,s,p,e[t+1],4,-1530992060),p=l(p,r,i,s,e[t+4],11,1272893353),s=l(s,p,r,i,e[t+7],16,-155497632),i=l(i,s,p,r,e[t+10],23,-1094730640),r=l(r,i,s,p,e[t+13],4,681279174),p=l(p,r,i,s,e[t],11,-358537222),s=l(s,p,r,i,e[t+3],16,-722521979),i=l(i,s,p,r,e[t+6],23,76029189),r=l(r,i,s,p,e[t+9],4,-640364487),p=l(p,r,i,s,e[t+12],11,-421815835),s=l(s,p,r,i,e[t+15],16,530742520),i=l(i,s,p,r,e[t+2],23,-995338651),r=u(r,i,s,p,e[t],6,-198630844),p=u(p,r,i,s,e[t+7],10,1126891415),s=u(s,p,r,i,e[t+14],15,-1416354905),i=u(i,s,p,r,e[t+5],21,-57434055),r=u(r,i,s,p,e[t+12],6,1700485571),p=u(p,r,i,s,e[t+3],10,-1894986606),s=u(s,p,r,i,e[t+10],15,-1051523),i=u(i,s,p,r,e[t+1],21,-2054922799),r=u(r,i,s,p,e[t+8],6,1873313359),p=u(p,r,i,s,e[t+15],10,-30611744),s=u(s,p,r,i,e[t+6],15,-1560198380),i=u(i,s,p,r,e[t+13],21,1309151649),r=u(r,i,s,p,e[t+4],6,-145523070),p=u(p,r,i,s,e[t+11],10,-1120210379),s=u(s,p,r,i,e[t+2],15,718787259),i=u(i,s,p,r,e[t+9],21,-343485551),r=n(r,d),i=n(i,c),s=n(s,y),p=n(p,f)}return[r,i,s,p]}(function(e){const t=[];for(let r=0,i=8*e.length;r<i;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}(e),8*e.length);switch(r){case i.Raw:return s;case i.Hex:return function(e){const t="0123456789abcdef",r=[];for(let i=0,n=4*e.length;i<n;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}(s);case i.String:return function(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=8)t.push(String.fromCharCode(e[r>>5]>>>r%32&255));return t.join("")}(s);case i.Base64:return function(e){const t=[];for(let r=0,i=4*e.length;r<i;r+=3){const i=(e[r>>2]>>r%4*8&255)<<16|(e[r+1>>2]>>(r+1)%4*8&255)<<8|e[r+2>>2]>>(r+2)%4*8&255;for(let n=0;n<4;n++)8*r+6*n>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6*(3-n)&63))}return t.join("")}(s)}}},13201:(e,t,r)=>{r.d(t,{c:()=>x});var i,n=r(60991),s=r(48578),o=r(92143),a=r(81317),l=r(70846),u=r(67961),p=r(12158),d=r(90319),c=r(38822),y=r(29768),f=r(76506),h=r(34250),m=(r(91306),r(17533)),b=r(2906),w=r(74057);let v=i=class extends d.Z{writeLevels(e,t,r){for(const r in e){const e=this.levels[r];return void(t.stops=e)}}clone(){return new i({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,w.i)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,w.i)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:(0,f.d9)(this.levels)})}};(0,y._)([(0,h.Cb)()],v.prototype,"levels",void 0),(0,y._)([(0,b.w)("levels")],v.prototype,"writeLevels",null),v=i=(0,y._)([(0,m.j)("esri.views.2d.engine.LevelDependentSizeVariable")],v);const g=o.L.getLogger("esri.views.2d.layers.support.clusterUtils");s.h.add("esri-cluster-arcade-enabled",!0);const _=(0,s.h)("esri-cluster-arcade-enabled"),x=(e,t,r,i,n)=>{const s=t.clone();if(!I(s))return s;if(s.authoringInfo||(s.authoringInfo=new p.Z),s.authoringInfo.isAutoGenerated=!0,"visualVariables"in s){const t=(s.visualVariables||[]).filter((e=>"$view.scale"!==e.valueExpression)),o=S(t);t.forEach((t=>{"rotation"===t.type?t.field?t.field=Z(e,t.field,"avg_angle","number"):t.valueExpression&&(t.field=j(e,t.valueExpression,"avg_angle","number"),t.valueExpression=null):t.normalizationField?(t.field=Z(e,t.field,"avg_norm","number",t.normalizationField),t.normalizationField=null):t.field?t.field=Z(e,t.field,"avg","number"):t.valueExpression&&(t.field=j(e,t.valueExpression,"avg","number"),t.valueExpression=null)})),null==o&&!C(t)&&n&&(t.push(F(r,i)),s.dynamicClusterSize=!0),s.visualVariables=t}switch(s.type){case"simple":break;case"pie-chart":for(const t of s.attributes)t.field?t.field=Z(e,t.field,"sum","number"):t.valueExpression&&(t.field=j(e,t.valueExpression,"sum","number"),t.valueExpression=null);break;case"unique-value":s.field?s.field=Z(e,s.field,"mode","string"):s.valueExpression&&(s.field=j(e,s.valueExpression,"mode","string"),s.valueExpression=null);break;case"class-breaks":s.normalizationField?(s.field=Z(e,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=Z(e,s.field,"avg","number"):s.valueExpression&&(s.field=j(e,s.valueExpression,"avg","number"),s.valueExpression=null)}return s},S=e=>{for(const t of e)if("size"===t.type)return t;return null},C=e=>{for(const t of e)if("cluster_count"===t.field)return!0;return!1},F=(e,t)=>{const r=[new c.Z({value:0,size:0}),new c.Z({value:1})];if(null==t)return new d.Z({field:"cluster_count",stops:[...r,new c.Z({value:2,size:0})]});const i=Object.keys(t).reduce(((i,n)=>({...i,[n]:[...r,new c.Z({value:Math.max(2,t[n].minValue),size:e.clusterMinSize}),new c.Z({value:Math.max(3,t[n].maxValue),size:e.clusterMaxSize})]})),{});return new v({field:"cluster_count",levels:i})},I=e=>{const t=t=>g.error(new n.Z("Unsupported-renderer",t,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if("field"!==r)return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!_){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some((e=>!(!("valueExpression"in e)||!e.valueExpression))))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function j(e,t,r,i){const n=(0,a.c)(t),s="mode"===r?`cluster_type_${n}`:"sum"===r?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some((e=>e.name===s))||e.push(new l.Z({name:s,isAutoGenerated:!0,onStatisticExpression:new u.Z({expression:t,returnType:i}),statisticType:r})),s}function Z(e,t,r,i,n){if("cluster_count"===t||e.some((e=>e.name===t)))return t;const s=function(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const e=r,i="field",n=t.toLowerCase()+",norm:"+i+","+e.toLowerCase();return"cluster_avg_"+(0,a.c)(n)}}}(r,t,n);return e.some((e=>e.name===s))||("avg_norm"===r?e.push(new l.Z({name:s,isAutoGenerated:!0,onStatisticExpression:new u.Z({expression:`$feature.${t} / $feature.${n}`,returnType:i}),statisticType:"avg"})):e.push(new l.Z({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),s}},62670:(e,t,r)=>{r.d(t,{a:()=>z,b:()=>G,c:()=>V,d:()=>m,e:()=>O,f:()=>v,g:()=>g,h:()=>R,i:()=>_,j:()=>x,k:()=>C,l:()=>F,m:()=>I,n:()=>j,o:()=>Z,p:()=>E,q:()=>S,r:()=>A,s:()=>h,t:()=>M,u:()=>w});var i=r(88762),n=r(96467),s=r(60991),o=r(57251),a=r(52991),l=r(17533),u=r(51899),p=r(86758),d=r(95310),c=r(34446),y=r(31292),f=r(46646);const h=new o.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function m(e,t,r,i){const n=await T(e);if(await b(e,t,i),!n.addAttachment)throw new s.Z(i,"Layer source does not support addAttachment capability");return n.addAttachment(t,r)}function b(e,t,r){const{attributes:i}=t,{objectIdField:n}=e;return e.get("capabilities.data.supportsAttachment")?t?i?n&&i[n]?Promise.resolve():Promise.reject(new s.Z(r,`feature is missing the identifying attribute ${n}`)):Promise.reject(new s.Z(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new s.Z(r,"A feature is required to add/delete/update attachments")):Promise.reject(new s.Z(r,"this layer doesn't support attachments"))}async function w(e,t,r,i,n){const o=await T(e);if(await b(e,t,n),!o.updateAttachment)throw new s.Z(n,"Layer source does not support updateAttachment capability");return o.updateAttachment(t,r,i)}async function v(e,t,i){const{applyEdits:n}=await r.e(9231).then(r.bind(r,89231)),s=await e.load();return n(s,s.source,t,i)}async function g(e,t,i){const{uploadAssets:n}=await r.e(9231).then(r.bind(r,89231)),s=await e.load();return n(s,s.source,t,i)}async function _(e,t,r,i){const n=await T(e);if(await b(e,t,i),!n.deleteAttachments)throw new s.Z(i,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,r)}async function x(e,t,r){const i=(await e.load({signal:t?.signal})).source;if(!i.fetchRecomputedExtents)throw new s.Z(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function S(e,t,r,i){t=c.Z.from(t),await e.load();const n=e.source,o=e.capabilities;if(!o?.data?.supportsAttachment)throw new s.Z(i,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:l,globalIds:u,num:p,size:d,start:y,where:f}=t;if(!o?.operations?.supportsQueryAttachments&&(a?.length>0||u?.length>0||d?.length>0||p||y||f))throw new s.Z(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(l?.length||u?.length||f))throw new s.Z(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new s.Z(i,"Layer source does not support queryAttachments capability",t);return n.queryAttachments(t)}async function C(e,t,r,i){const n=await T(e);if(!n.queryObjectIds)throw new s.Z(i,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(y.Z.from(t)??e.createQuery(),r)}async function F(e,t,r,i){const n=await T(e);if(!n.queryFeatureCount)throw new s.Z(i,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(y.Z.from(t)??e.createQuery(),r)}async function I(e,t,r,i){const n=await T(e);if(!n.queryExtent)throw new s.Z(i,"Layer source does not support queryExtent capability");return n.queryExtent(y.Z.from(t)??e.createQuery(),r)}async function j(e,t,r,i){const n=await T(e);if(!n.queryRelatedFeatures)throw new s.Z(i,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(f.default.from(t),r)}async function Z(e,t,r,i){const n=await T(e);if(!n.queryRelatedFeaturesCount)throw new s.Z(i,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(f.default.from(t),r)}async function E(e){const t=e.source;if(t?.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(null!=i&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await(0,a.E)(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function R(e){const t=new y.Z,r=e.get("capabilities.data"),i=e.get("capabilities.query");t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,i&&(t.compactGeometryEnabled=i.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),r&&(r.supportsZ&&null!=e.returnZ&&(t.returnZ=e.returnZ),r.supportsM&&null!=e.returnM&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:s}=e;return t.timeExtent=null!=n&&null!=s?s.offset(-n.value,n.unit):s||null,t.multipatchOption="multipatch"===e.geometryType?"xyFootprint":null,t}function A(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r)for(const e of r)if("esriFieldTypeGlobalID"===e.type)return e.name}function z(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r)for(const e of r)if("esriFieldTypeOID"===e.type)return e.name}function M(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function T(e){return(await e.load()).source}async function O(e,t){const r=e.parsedUrl?.path;r&&function(e){const t=e.editFieldsInfo;return!(!t?.creatorField&&!t?.editorField)||(e.userHasUpdateItemPrivileges?e.hasUpdateItemRestrictions:!!e.userHasFullEditingPrivileges&&e.hasFullEditingRestrictions)}(e)&&await async function(e,t){if(!i.id)return;if(i.id.findCredential(e))return;let r;try{const n=await(0,u.g)(e,t);n&&(r=await i.id.checkSignInStatus(`${n}/sharing`))}catch(e){}if(r)try{const r=null!=t?t.signal:null;await i.id.getCredential(e,{signal:r})}catch(e){}}(r,t)}function V(e){return!e.sourceJSON?.isMultiServicesView&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const q=(0,l.c)({types:n.QT});function G(e,t){if(e.defaultSymbol)return e.types&&e.types.length?new d.Z({defaultSymbol:q(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map((e=>({id:e.id,symbol:q(e.symbol,e,t)})))}):new p.Z({symbol:q(e.defaultSymbol,e,t)})}},47346:(e,t,r)=>{r.d(t,{d:()=>a});var i=r(92143),n=r(97546),s=r(1709),o=r(14249);function a(){return{fields:{type:[n.Z],value:null},fieldsIndex:{readOnly:!0,get(){return new s.Z(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const r=this.fieldsIndex?.has(t);r||i.L.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return(0,o.Q0)(this.fieldsIndex,e)}}}}},39275:(e,t,r)=>{r.d(t,{M:()=>f});var i=r(29768),n=r(34250),s=(r(91306),r(48578),r(17533)),o=r(70846),a=r(29395),l=r(94303),u=r(14460),p=r(13322),d=r(13201);r(92143),r(31450),r(71552),r(76506),r(40642),r(60474),r(66396),r(86656),r(60991),r(6540),r(12047),r(21972),r(379),r(62062),r(19657),r(91055),r(6906),r(79456),r(50406),r(67961),r(66122),r(86748),r(15324),r(75067),r(89914),r(86787),r(97714),r(2906),r(14249),r(60217),r(74569),r(21801),r(73796),r(60947),r(53785),r(57251),r(91597),r(35132),r(84069),r(44567),r(98380),r(92482),r(82426),r(72836),r(66106),r(29794),r(7200),r(92896),r(22781),r(32422),r(29107),r(30574),r(2157),r(25977),r(58076),r(98242),r(7471),r(54414),r(59465),r(1648),r(8925),r(3482),r(36097),r(33921),r(45154),r(16769),r(93603),r(15438),r(593),r(85699),r(55531),r(96055),r(47776),r(18033),r(6331),r(62048),r(56890),r(30493),r(4292),r(75626),r(72652),r(29641),r(70821),r(3296),r(34229),r(37029),r(55306),r(96467),r(63571),r(30776),r(48027),r(54174),r(63130),r(25696),r(98402),r(42775),r(95834),r(34394),r(57150),r(76726),r(20444),r(76393),r(78548),r(2497),r(49906),r(46527),r(11799),r(48649),r(59877),r(9960),r(30823),r(53326),r(5853),r(39141),r(32101),r(38742),r(48243),r(34635),r(10401),r(49900),r(88762),r(82058),r(81184),r(33101),r(67477),r(78533),r(74653),r(91091),r(58943),r(70737),r(36834),r(8487),r(17817),r(90814),r(15459),r(97189),r(61847),r(28212),r(16955),r(22401),r(48699),r(77894),r(55187),r(8586),r(44509),r(69814),r(11305),r(62259),r(44790),r(5909),r(60669),r(48208),r(51589),r(65684),r(12158),r(74864),r(63683),r(94479),r(45702),r(51127),r(26822),r(51723),r(23243),r(51669),r(6090),r(3977),r(36741),r(11253),r(90319),r(38822),r(74057),r(23761),r(48190),r(85557),r(94070),r(67541),r(16218),r(51899),r(71206),r(9352),r(89241),r(91700),r(10738),r(1709),r(51979),r(32037),r(60698),r(23639),r(90811),r(60045),r(68681),r(53321),r(86758),r(95310),r(58085),r(93939),r(62407),r(90033),r(97807),r(238),r(71831),r(1693),r(20208),r(43022),r(93314),r(35197),r(1557),r(47842),r(17298),r(62670),r(34446),r(31292),r(69218),r(97546),r(9801),r(53523),r(42911),r(46826),r(45433),r(54732),r(32925),r(50619),r(27207),r(46646),r(77807),r(50203),r(30439),r(6941),r(81317);const c={key:"type",base:a.F,typeMap:{cluster:u.Z,binning:l.Z}},y={types:{key:"type",base:a.F,typeMap:{selection:p.Z,cluster:u.Z,binning:l.Z}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:c},"portal-item":{types:c},"web-scene":{types:{key:"type",base:a.F,typeMap:{selection:p.Z}}}}}},f=e=>{let t=class extends e{constructor(...e){super(...e),this.own(this.watch("renderer",(()=>{if(this.featureReduction){const e=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",e)}}),!0))}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}set renderer(e){}_normalizeFeatureReduction(e){if("cluster"!==e?.type)return e;const t=e.clone(),r=[new o.Z({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],i=(t.fields??[]).filter((e=>!e.isAutoGenerated));if(e.renderer&&!e.renderer.authoringInfo?.isAutoGenerated)return t.fields=[...r,...i],t;if(e.symbol)return t.fields=[...r,...i],t.renderer=null,t;if(!this.renderer)return e;const n=(0,d.c)(r,this.renderer,e,null,!1);return t.fields=[...r,...i],t.renderer=n,t}};return(0,i._)([(0,n.Cb)(y)],t.prototype,"featureReduction",null),t=(0,i._)([(0,s.j)("esri.layers.mixins.FeatureReductionLayer")],t),t}},70846:(e,t,r)=>{r.d(t,{Z:()=>d});var i,n=r(29768),s=r(12047),o=r(76506),a=r(34250),l=(r(91306),r(17533)),u=r(67961);r(21972),r(60474),r(66396),r(86656),r(48578),r(92143),r(31450),r(71552),r(40642),r(379),r(62062),r(6540),r(19657),r(91055),r(6906),r(79456),r(50406),r(60991),r(66122);let p=i=class extends s.wq{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new i({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:(0,o.d9)(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};(0,n._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],p.prototype,"isAutoGenerated",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],p.prototype,"name",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],p.prototype,"alias",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],p.prototype,"onStatisticField",void 0),(0,n._)([(0,a.Cb)({type:u.Z,json:{write:!0}})],p.prototype,"onStatisticExpression",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],p.prototype,"statisticType",void 0),p=i=(0,n._)([(0,l.j)("esri.layers.support.AggregateField")],p);const d=p},67961:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(29768),n=r(66122),s=r(12047),o=r(34250),a=(r(91306),r(48578),r(17533));r(21972),r(60474),r(66396),r(76506),r(86656),r(92143),r(31450),r(71552),r(40642),r(379),r(62062),r(6540),r(19657),r(91055),r(6906),r(79456),r(50406),r(60991);let l=class extends((0,n.J)(s.wq)){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],l.prototype,"expression",void 0),(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],l.prototype,"title",void 0),(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],l.prototype,"returnType",void 0),l=(0,i._)([(0,a.j)("esri.layers.support.ExpressionInfo")],l);const u=l},94303:(e,t,r)=>{r.d(t,{Z:()=>g});var i,n=r(29768),s=r(86748),o=(r(55306),r(71206),r(51979),r(60698),r(53321),r(65684),r(86758),r(95310),r(20208)),a=r(76506),l=r(71552),u=r(34250),p=(r(91306),r(59465)),d=r(97714),c=r(17533),y=r(2906),f=r(70846),h=r(43022),m=r(62670),b=r(29395),w=r(77807);r(66122),r(21972),r(60474),r(66396),r(86656),r(48578),r(92143),r(31450),r(40642),r(379),r(62062),r(6540),r(19657),r(91055),r(6906),r(79456),r(50406),r(60991),r(15324),r(75067),r(89914),r(12047),r(86787),r(14249),r(60217),r(74569),r(21801),r(73796),r(60947),r(53785),r(57251),r(91597),r(35132),r(84069),r(44567),r(98380),r(92482),r(82426),r(72836),r(66106),r(29794),r(7200),r(92896),r(22781),r(32422),r(29107),r(30574),r(2157),r(25977),r(58076),r(98242),r(7471),r(54414),r(1648),r(8925),r(3482),r(36097),r(33921),r(45154),r(16769),r(93603),r(15438),r(593),r(85699),r(55531),r(96055),r(47776),r(18033),r(6331),r(62048),r(56890),r(30493),r(4292),r(75626),r(72652),r(29641),r(70821),r(3296),r(34229),r(37029),r(96467),r(63571),r(30776),r(48027),r(54174),r(63130),r(25696),r(98402),r(42775),r(95834),r(34394),r(57150),r(76726),r(20444),r(76393),r(78548),r(2497),r(49906),r(46527),r(11799),r(48649),r(59877),r(9960),r(30823),r(53326),r(5853),r(39141),r(32101),r(38742),r(48243),r(34635),r(10401),r(49900),r(88762),r(82058),r(81184),r(33101),r(67477),r(78533),r(74653),r(91091),r(58943),r(70737),r(36834),r(8487),r(17817),r(90814),r(15459),r(97189),r(61847),r(28212),r(16955),r(22401),r(48699),r(77894),r(55187),r(8586),r(44509),r(69814),r(11305),r(62259),r(44790),r(5909),r(60669),r(48208),r(51589),r(26822),r(51723),r(23243),r(51669),r(6090),r(3977),r(36741),r(11253),r(90319),r(38822),r(74057),r(23761),r(48190),r(85557),r(94070),r(67541),r(16218),r(51899),r(12158),r(74864),r(63683),r(94479),r(45702),r(51127),r(9352),r(89241),r(91700),r(10738),r(1709),r(32037),r(23639),r(90811),r(60045),r(68681),r(58085),r(93939),r(62407),r(90033),r(97807),r(238),r(71831),r(1693),r(67961),r(93314),r(35197),r(1557),r(47842),r(17298),r(34446),r(31292),r(69218),r(97546),r(9801),r(53523),r(42911),r(46826),r(45433),r(54732),r(32925),r(50619),r(27207),r(46646),r(50203),r(30439),r(6941);let v=i=class extends b.F{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,l.s)(r,i,t)}readRenderer(e,t,r){const i=t.drawingInfo?.renderer;return i?(0,o.a)(i,t,r)??void 0:(0,m.b)(t,r)}clone(){return new i({fields:(0,a.d9)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,a.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:(0,a.d9)(this.popupTemplate),renderer:(0,a.d9)(this.renderer)})}};(0,n._)([(0,p.e)({binning:"binning"})],v.prototype,"type",void 0),(0,n._)([(0,p.e)({geohash:"geohash"})],v.prototype,"binType",void 0),(0,n._)([(0,u.Cb)({type:Number,range:{min:1,max:9},json:{write:!0}})],v.prototype,"fixedBinLevel",void 0),(0,n._)([(0,u.Cb)({type:[w.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],v.prototype,"labelingInfo",void 0),(0,n._)([(0,u.Cb)(h.l)],v.prototype,"labelsVisible",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],v.prototype,"maxScale",void 0),(0,n._)([(0,u.Cb)(h.p)],v.prototype,"popupEnabled",void 0),(0,n._)([(0,u.Cb)({type:s.Z,json:{name:"popupInfo",write:!0}})],v.prototype,"popupTemplate",void 0),(0,n._)([(0,u.Cb)({type:[f.Z],json:{write:!0}})],v.prototype,"fields",void 0),(0,n._)([(0,y.w)("fields")],v.prototype,"writeFields",null),(0,n._)([(0,u.Cb)({types:o.r,json:{write:{target:"drawingInfo.renderer"}}})],v.prototype,"renderer",void 0),(0,n._)([(0,d.r)("renderer",["drawingInfo.renderer"])],v.prototype,"readRenderer",null),v=i=(0,n._)([(0,c.j)("esri.layers.support.FeatureReductionBinning")],v);const g=v},14460:(e,t,r)=>{r.d(t,{Z:()=>S});var i,n=r(29768),s=r(86748),o=(r(55306),r(71206),r(51979),r(60698),r(53321),r(65684),r(86758)),a=(r(95310),r(20208)),l=r(96467),u=r(12047),p=r(76506),d=r(71552),c=r(99403),y=r(34250),f=(r(91306),r(97714)),h=r(17533),m=r(2906),b=r(70846),w=r(43022),v=r(62670),g=r(77807);function _(e){return"simple"===e.type&&!e.visualVariables?.length}r(66122),r(21972),r(60474),r(66396),r(86656),r(48578),r(92143),r(31450),r(40642),r(379),r(62062),r(6540),r(19657),r(91055),r(6906),r(79456),r(50406),r(60991),r(15324),r(75067),r(89914),r(86787),r(14249),r(60217),r(74569),r(21801),r(73796),r(60947),r(53785),r(57251),r(91597),r(35132),r(84069),r(44567),r(98380),r(92482),r(82426),r(72836),r(66106),r(29794),r(7200),r(92896),r(22781),r(32422),r(29107),r(30574),r(2157),r(25977),r(58076),r(98242),r(7471),r(54414),r(59465),r(1648),r(8925),r(3482),r(36097),r(33921),r(45154),r(16769),r(93603),r(15438),r(593),r(85699),r(55531),r(96055),r(47776),r(18033),r(6331),r(62048),r(56890),r(30493),r(4292),r(75626),r(72652),r(29641),r(70821),r(3296),r(34229),r(37029),r(26822),r(51723),r(23243),r(51669),r(6090),r(48027),r(54174),r(3977),r(36741),r(34394),r(11253),r(90319),r(38822),r(74057),r(23761),r(63571),r(30776),r(63130),r(25696),r(98402),r(42775),r(95834),r(57150),r(76726),r(20444),r(76393),r(78548),r(2497),r(49906),r(46527),r(11799),r(48649),r(59877),r(9960),r(30823),r(53326),r(5853),r(39141),r(32101),r(38742),r(48243),r(34635),r(10401),r(49900),r(88762),r(82058),r(81184),r(33101),r(67477),r(78533),r(74653),r(91091),r(58943),r(70737),r(36834),r(8487),r(17817),r(90814),r(15459),r(97189),r(61847),r(28212),r(16955),r(22401),r(48699),r(77894),r(55187),r(8586),r(44509),r(69814),r(11305),r(62259),r(44790),r(5909),r(60669),r(48208),r(51589),r(48190),r(85557),r(94070),r(67541),r(16218),r(51899),r(12158),r(74864),r(63683),r(94479),r(45702),r(51127),r(9352),r(89241),r(91700),r(10738),r(1709),r(32037),r(23639),r(90811),r(60045),r(68681),r(58085),r(93939),r(62407),r(90033),r(97807),r(238),r(71831),r(1693),r(67961),r(93314),r(35197),r(1557),r(47842),r(17298),r(34446),r(31292),r(69218),r(97546),r(9801),r(53523),r(42911),r(46826),r(45433),r(54732),r(32925),r(50619),r(27207),r(46646),r(50203),r(30439),r(6941);let x=i=class extends u.wq{constructor(e){super(e),this.type="cluster",this.clusterRadius=(0,c.t)("80px"),this.clusterMinSize=(0,c.t)("12px"),this.clusterMaxSize=(0,c.t)("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(e,t,r){const i=t.drawingInfo?.renderer;return i?.authoringInfo?.isAutoGenerated?null:i?_(i)?null:(0,a.a)(i,t,r)??void 0:(0,v.b)(t,r)}readSymbol(e,t,r){const i=t.drawingInfo?.renderer;if(i?.authoringInfo?.isAutoGenerated)return null;if(i&&_(i)){const e=(0,a.a)(i,t,r);return e?.symbol}return null}writeSymbol(e,t,r,i){const n=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||n){const r=new o.Z({symbol:e});t.drawingInfo={renderer:r.write({},i)}}}writeFields(e,t,r){const i=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,d.s)(r,i,t)}readFields(e,t,r){return e.filter((e=>!e.isAutoGenerated)).map((e=>b.Z.fromJSON(e)))}clone(){return new i({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,p.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,p.d9)(this.fields),maxScale:this.maxScale,renderer:(0,p.d9)(this.renderer),symbol:(0,p.d9)(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:(0,p.d9)(this.popupTemplate)})}};(0,n._)([(0,y.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],x.prototype,"type",void 0),(0,n._)([(0,y.Cb)({type:Number,cast:e=>"auto"===e?e:(0,c.t)(e),json:{write:!0}})],x.prototype,"clusterRadius",void 0),(0,n._)([(0,y.Cb)({type:Number,cast:c.t,json:{write:!0}})],x.prototype,"clusterMinSize",void 0),(0,n._)([(0,y.Cb)({type:Number,cast:c.t,json:{write:!0}})],x.prototype,"clusterMaxSize",void 0),(0,n._)([(0,y.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],x.prototype,"maxScale",void 0),(0,n._)([(0,y.Cb)(w.p)],x.prototype,"popupEnabled",void 0),(0,n._)([(0,y.Cb)({type:s.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],x.prototype,"popupTemplate",void 0),(0,n._)([(0,y.Cb)({types:a.r,json:{write:{target:"drawingInfo.renderer"}}})],x.prototype,"renderer",void 0),(0,n._)([(0,f.r)("renderer",["drawingInfo.renderer"])],x.prototype,"readRenderer",null),(0,n._)([(0,y.Cb)({types:l.AH})],x.prototype,"symbol",void 0),(0,n._)([(0,f.r)("symbol",["drawingInfo.renderer"])],x.prototype,"readSymbol",null),(0,n._)([(0,m.w)("symbol")],x.prototype,"writeSymbol",null),(0,n._)([(0,y.Cb)({type:[g.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],x.prototype,"labelingInfo",void 0),(0,n._)([(0,y.Cb)(w.l)],x.prototype,"labelsVisible",void 0),(0,n._)([(0,y.Cb)({type:[b.Z],json:{write:!0}})],x.prototype,"fields",void 0),(0,n._)([(0,m.w)("fields")],x.prototype,"writeFields",null),(0,n._)([(0,f.r)("fields")],x.prototype,"readFields",null),x=i=(0,n._)([(0,h.j)("esri.layers.support.FeatureReductionCluster")],x);const S=x},13322:(e,t,r)=>{r.d(t,{Z:()=>u});var i,n=r(29768),s=r(34250),o=(r(91306),r(48578),r(17533)),a=r(29395);r(92143),r(31450),r(71552),r(76506),r(40642),r(60474),r(66396),r(86656),r(60991),r(6540),r(12047),r(21972),r(379),r(62062),r(19657),r(91055),r(6906),r(79456),r(50406);let l=i=class extends a.F{constructor(e){super(e),this.type="selection"}clone(){return new i}};(0,n._)([(0,s.Cb)({type:["selection"]})],l.prototype,"type",void 0),l=i=(0,n._)([(0,o.j)("esri.layers.support.FeatureReductionSelection")],l);const u=l},46646:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var i,n=r(29768),s=(r(74569),r(12047)),o=r(76506),a=r(34250),l=r(91306),u=r(17533),p=r(2906),d=r(69218),c=r(60947);r(21801),r(40642),r(71552),r(48578),r(73796),r(97714),r(21972),r(60474),r(66396),r(86656),r(92143),r(31450),r(379),r(62062),r(6540),r(19657),r(91055),r(6906),r(79456),r(50406),r(60991),r(53785),r(57251),r(91597),r(86787),r(35132),r(84069),r(44567),r(98380),r(92482),r(82426),r(72836),r(66106),r(29794),r(7200),r(92896),r(22781),r(32422),r(59465),r(97546),r(9801),r(53523),r(42911),r(46826),r(45433),r(54732);let y=i=class extends s.wq{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(t.definitionExpression="1=1")}clone(){return new i((0,o.d9)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,n._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],y.prototype,"cacheHint",void 0),(0,n._)([(0,a.Cb)({type:d.D,json:{write:!0}})],y.prototype,"dynamicDataSource",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],y.prototype,"gdbVersion",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],y.prototype,"geometryPrecision",void 0),(0,n._)([(0,a.Cb)({type:Date})],y.prototype,"historicMoment",void 0),(0,n._)([(0,p.w)("historicMoment")],y.prototype,"_writeHistoricMoment",null),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],y.prototype,"maxAllowableOffset",void 0),(0,n._)([(0,a.Cb)({type:[Number],json:{write:!0}})],y.prototype,"objectIds",void 0),(0,n._)([(0,a.Cb)({type:[String],json:{write:!0}})],y.prototype,"orderByFields",void 0),(0,n._)([(0,a.Cb)({type:[String],json:{write:!0}})],y.prototype,"outFields",void 0),(0,n._)([(0,a.Cb)({type:c.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],y.prototype,"outSpatialReference",void 0),(0,n._)([(0,a.Cb)({json:{write:!0}})],y.prototype,"relationshipId",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],y.prototype,"start",void 0),(0,n._)([(0,p.w)("start"),(0,p.w)("num")],y.prototype,"writeStart",null),(0,n._)([(0,a.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],y.prototype,"num",void 0),(0,n._)([(0,a.Cb)({json:{write:!0}})],y.prototype,"returnGeometry",void 0),(0,n._)([(0,a.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"returnM",void 0),(0,n._)([(0,a.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"returnZ",void 0),(0,n._)([(0,a.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],y.prototype,"where",void 0),y=i=(0,n._)([(0,u.j)("esri.rest.support.RelationshipQuery")],y),y.from=(0,l.e)(y);const f=y}}]);