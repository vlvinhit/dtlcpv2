"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2197,5777],{93314:(e,t,r)=>{r.d(t,{Z:()=>y});var s,i=r(29768),n=r(12047),a=r(71252),l=r(35197),o=r(34250),h=(r(91306),r(48578),r(97714)),u=r(17533),c=r(2906);r(21972),r(60474),r(66396),r(76506),r(86656),r(92143),r(31450),r(71552),r(40642),r(379),r(62062),r(6540),r(19657),r(91055),r(6906),r(79456),r(50406),r(60991);let d=s=class extends n.wq{static get allTime(){return p}static get empty(){return g}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(s.allTime)}get isEmpty(){return this.equals(s.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new s({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=null!=this.start?this.start.getTime():this.start,r=null!=this.end?this.end.getTime():this.end,s=null!=e.start?e.start.getTime():e.start,i=null!=e.end?e.end.getTime():e.end;return t===s&&r===i}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=(0,a.c)(this.start,(t=>(0,l.t)(t,e))),r=(0,a.c)(this.end,(t=>{const r=(0,l.t)(t,e);return t.getTime()===r.getTime()?r:(0,l.o)(r,1,e)}));return new s({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return s.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,i=e.start?.getTime()??-1/0,n=e.end?.getTime()??1/0;let a,l;if(i>=t&&i<=r?a=i:t>=i&&t<=n&&(a=t),r>=i&&r<=n?l=r:n>=t&&n<=r&&(l=n),null!=a&&null!=l&&!isNaN(a)&&!isNaN(l)){const e=new s;return e.start=a===-1/0?null:new Date(a),e.end=l===1/0?null:new Date(l),e}return s.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new s,{start:i,end:n}=this;return null!=i&&(r.start=(0,l.o)(i,e,t)),null!=n&&(r.end=(0,l.o)(n,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return p.clone();const t=null!=this.start&&null!=e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=null!=this.end&&null!=e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new s({start:t,end:r})}};(0,i._)([(0,o.Cb)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),(0,i._)([(0,h.r)("end")],d.prototype,"readEnd",null),(0,i._)([(0,c.w)("end")],d.prototype,"writeEnd",null),(0,i._)([(0,o.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),(0,i._)([(0,o.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),(0,i._)([(0,o.Cb)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),(0,i._)([(0,h.r)("start")],d.prototype,"readStart",null),(0,i._)([(0,c.w)("start")],d.prototype,"writeStart",null),d=s=(0,i._)([(0,u.j)("esri.TimeExtent")],d);const p=new d,g=new d({start:void 0,end:void 0}),y=d},54179:(e,t,r)=>{r.d(t,{M:()=>f,a:()=>m});var s=r(29768),i=r(21972),n=r(71252),a=r(12047),l=r(76506),o=r(66396),h=r(17533);class u{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(i.a),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new u,r=this._originStores[i.O.DEFAULTS];r&&r.forEach(((e,r)=>{t.set(r,(0,l.d9)(e),i.O.DEFAULTS)}));for(let r=i.O.SERVICE;r<i.a;r++){const s=this._originStores[r];s&&s.forEach(((s,i)=>{e&&e.has(i)||t.set(i,(0,l.d9)(s),r)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=i.O.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(e,t),!this._values.has(e)||(0,n.a)(this._propertyOriginMap.get(e))<=r){const s=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),s!==t}return!1}delete(e,t=i.O.USER){const r=this._originStores[t];if(!r)return;const s=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return s}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],s=r&&r.get(e),i=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,t),i!==s}originOf(e){return this._propertyOriginMap.get(e)||i.O.DEFAULTS}forEach(e){this._values.forEach(e)}}const c=e=>{let t=class extends e{constructor(...e){super(...e);const t=(0,n.a)((0,o.g)(this)),r=t.store,s=new u;t.store=s,(0,a.s)(t,r,s)}read(e,t){(0,a.r)(this,e,t)}getAtOrigin(e,t){const r=d(this),s=(0,i.n)(t);if("string"==typeof e)return r.get(e,s);const n={};return e.forEach((e=>{n[e]=r.get(e,s)})),n}originOf(e){return(0,i.b)(this.originIdOf(e))}originIdOf(e){return d(this).originOf(e)}revert(e,t){const r=d(this),s=(0,i.n)(t),n=(0,o.g)(this);let a;a="string"==typeof e?"*"===e?r.keys(s):[e]:e,a.forEach((e=>{n.invalidate(e),r.revert(e,s),n.commit(e)}))}};return t=(0,s._)([(0,h.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function d(e){return(0,o.g)(e).store}let p=class extends(c(i.Z)){};p=(0,s._)([(0,h.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],p);const g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return y(this).delete(e,(0,i.n)(t))}write(e,t){return(0,a.w)(this,e=e||{},t),e}setAtOrigin(e,t,r){(0,o.g)(this).setAtOrigin(e,t,(0,i.n)(r))}removeOrigin(e){const t=y(this),r=(0,i.n)(e),s=t.keys(r);for(const e of s)t.originOf(e)===r&&t.set(e,t.get(e,r),i.O.USER)}updateOrigin(e,t){const r=y(this),s=(0,i.n)(t),n=this.get(e);for(let t=s+1;t<i.a;++t)r.delete(e,t);r.set(e,n,s)}toJSON(e){return this.write({},e)}};return t=(0,s._)([(0,h.j)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function y(e){return(0,o.g)(e).store}const f=e=>{let t=class extends(g(c(e))){constructor(...e){super(...e)}};return t=(0,s._)([(0,h.j)("esri.core.MultiOriginJSONSupport")],t),t};let m=class extends(f(i.Z)){};m=(0,s._)([(0,h.j)("esri.core.MultiOriginJSONSupport")],m)},89440:(e,t,r)=>{r.d(t,{O:()=>y});var s=r(29768),i=r(60991),n=r(32101),a=r(34250),l=(r(91306),r(48578),r(17533)),o=r(2906),h=r(12047),u=r(43022);const c={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},d={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},p={ArcGISFeatureLayer:!0},g={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":c,"web-map/basemap":d,"web-map/tables":p,"link-chart/operational-layers":{...c,LinkChartLayer:!0},"link-chart/basemap":d,"link-chart/tables":p,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},y=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(e,t,r,s){(s&&"ground"===s.layerContainerType||e&&(0,h.a)(this,r,{},s))&&(t[r]=e)}writeOperationalLayerType(e,t,r,s){!e||s&&"tables"===s.layerContainerType||(t.layerType=e)}writeTitle(e,t){t.title=e??"Layer"}read(e,t){t&&(t.layer=this),(0,h.b)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(t?.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=g[e];let s=!!r?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(s=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(s=!1),!s)return t.messages?.push(new i.Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const r=super.write(e,{...t,layer:this}),s=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof i.Z&&"web-document-write:property-required"===e.name)).length;return(0,n.jc)(r?.url)?(t?.messages?.push(new i.Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:r}beforeSave(){}};return(0,s._)([(0,a.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,s._)([(0,a.Cb)(u.b)],t.prototype,"listMode",void 0),(0,s._)([(0,o.w)("listMode")],t.prototype,"writeListMode",null),(0,s._)([(0,a.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),(0,s._)([(0,o.w)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,s._)([(0,a.Cb)(u.d)],t.prototype,"opacity",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,s._)([(0,o.w)("title"),(0,o.w)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,s._)([(0,a.Cb)({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=(0,s._)([(0,l.j)("esri.layers.mixins.OperationalLayer")],t),t}},5777:(e,t,r)=>{r.d(t,{c:()=>s,g:()=>i});var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},3530:(e,t,r)=>{function s(e){return(t,r)=>{t[r]=e}}r.d(t,{s:()=>s})},35197:(e,t,r)=>{r.d(t,{c:()=>l,o:()=>n,t:()=>a}),r(48578);const s={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},i={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function n(e,t,r){const s=new Date(e.getTime());if(t&&r){const e=i[r],{getter:n,setter:a,multiplier:l}=e;if("months"===r){const e=function(e,t){const r=new Date(e,t+1,1);return r.setDate(0),r.getDate()}(s.getFullYear(),s.getMonth()+t);s.getDate()>e&&s.setDate(e)}s[a](s[n]()+t*l)}return s}function a(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function l(e,t,r){return 0===e?0:e*s[t]/s[r]}},15324:(e,t,r)=>{r.d(t,{Z:()=>D});var s,i,n,a=r(29768),l=r(91055),o=r(75067),h=r(76506),u=r(71252),c=r(379),d=r(6906),p=r(91306),g=r(6540),y=r(34250),f=r(3530),m=r(17533),_=r(89914);r(21972),r(60474),r(66396),r(86656),r(48578),r(92143),r(31450),r(71552),r(40642),r(62062),r(19657),r(79456),r(50406),r(60991),(n=s||(s={}))[n.ADD=1]="ADD",n[n.REMOVE=2]="REMOVE",n[n.MOVE=4]="MOVE";const v=new c.O(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),b=()=>{};function S(e){return e?e instanceof T?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function w(e){if(e&&e.length)return e[0]}function C(e,t,r,s){const i=Math.min(e.length-r,t.length-s);let n=0;for(;n<i&&e[r+n]===t[s+n];)n++;return n}function E(e,t,r,s){t&&t.forEach(((t,i,n)=>{e.push(t),E(e,r.call(s,t,i,n),r,s)}))}const I=new Set,L=new Set,O=new Set,M=new Map;let A=0,T=i=class extends o.Z.EventedAccessor{static isCollection(e){return null!=e&&e instanceof i}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new _.S,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:A++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof i?{items:e}:e:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return(0,g.t)(this._observable),this._items}set items(e){this._emitBeforeChanges(s.ADD)||(this._splice(0,this.length,S(e)),this._emitAfterChanges(s.ADD))}hasEventListener(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,r={removed:!1,callback:t};return e.push(r),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=b,r.removed=!0,e.splice(e.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if((0,g.t)(this._observable),this._emitBeforeChanges(s.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(s.ADD),this}addMany(e,t=this._items.length){if((0,g.t)(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(s.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,S(e)),this._emitAfterChanges(s.ADD),this}at(e){if((0,g.t)(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if((0,g.t)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(s.REMOVE),e}_removeAllRaw(){return 0===this.length?[]:this._splice(0,this.length)||[]}clone(){return(0,g.t)(this._observable),this._createNewInstance({items:this._items.map(h.d9)})}concat(...e){(0,g.t)(this._observable);const t=e.map(S);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if((0,g.t)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return;const r=(0,u.a)(this._splice(0,this.length)),i=r.length;for(let s=0;s<i;s++)e.call(t,r[s],s,r);this._emitAfterChanges(s.REMOVE)}every(e,t){return(0,g.t)(this._observable),this._items.every(e,t)}filter(e,t){let r;return(0,g.t)(this._observable),r=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return(0,g.t)(this._observable),this._items.find(e,t)}findIndex(e,t){return(0,g.t)(this._observable),this._items.findIndex(e,t)}flatten(e,t){(0,g.t)(this._observable);const r=[];return E(r,this,e,t),new i(r)}forEach(e,t){return(0,g.t)(this._observable),this._items.forEach(e,t)}getItemAt(e){return(0,g.t)(this._observable),this._items[e]}getNextIndex(e){(0,g.t)(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return(0,g.t)(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return(0,g.t)(this._observable),this._items.indexOf(e,t)}join(e=","){return(0,g.t)(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return(0,g.t)(this._observable),this._items.lastIndexOf(e,t)}map(e,t){(0,g.t)(this._observable);const r=this._items.map(e,t);return new i({items:r})}reorder(e,t=this.length-1){(0,g.t)(this._observable);const r=this.indexOf(e);if(-1!==r){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(s.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(s.MOVE)}return e}}pop(){if((0,g.t)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return;const e=w(this._splice(this.length-1,1));return this._emitAfterChanges(s.REMOVE),e}push(...e){return(0,g.t)(this._observable),this._emitBeforeChanges(s.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(s.ADD)),this.length}reduce(e,t){(0,g.t)(this._observable);const r=this._items;return 2===arguments.length?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){(0,g.t)(this._observable);const r=this._items;return 2===arguments.length?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return(0,g.t)(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if((0,g.t)(this._observable),e<0||e>=this.length||this._emitBeforeChanges(s.REMOVE))return;const t=w(this._splice(e,1));return this._emitAfterChanges(s.REMOVE),t}removeMany(e){if((0,g.t)(this._observable),!e||!e.length||this._emitBeforeChanges(s.REMOVE))return[];const t=e instanceof i?e.toArray():e,r=this._items,n=[],a=t.length;for(let e=0;e<a;e++){const s=t[e],i=r.indexOf(s);if(i>-1){const s=1+C(t,r,e+1,i+1),a=this._splice(i,s);a&&a.length>0&&n.push.apply(n,a),e+=s-1}}return this._emitAfterChanges(s.REMOVE),n}reverse(){if((0,g.t)(this._observable),this._emitBeforeChanges(s.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(s.MOVE),this}shift(){if((0,g.t)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return;const e=w(this._splice(0,1));return this._emitAfterChanges(s.REMOVE),e}slice(e=0,t=this.length){return(0,g.t)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return(0,g.t)(this._observable),this._items.some(e,t)}sort(e){if((0,g.t)(this._observable),!this.length||this._emitBeforeChanges(s.MOVE))return this;const t=(0,u.a)(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(s.MOVE),this}splice(e,t,...r){(0,g.t)(this._observable);const i=(t?s.REMOVE:0)|(r.length?s.ADD:0);if(this._emitBeforeChanges(i))return[];const n=this._splice(e,t,r)||[];return this._emitAfterChanges(i),n}toArray(){return(0,g.t)(this._observable),this._items.slice()}toJSON(){return(0,g.t)(this._observable),this.toArray()}toLocaleString(){return(0,g.t)(this._observable),this._items.toLocaleString()}toString(){return(0,g.t)(this._observable),this._items.toString()}unshift(...e){return(0,g.t)(this._observable),!e.length||this._emitBeforeChanges(s.ADD)||(this._splice(0,0,e),this._emitAfterChanges(s.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const s=this._items,i=this.itemType;let n,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,d.Os)((()=>this._dispatchChange()))),t){if(a=s.splice(e,t),this.hasEventListener("before-remove")){const t=v.acquire();t.target=this,t.cancellable=!0;for(let r=0,i=a.length;r<i;r++)n=a[r],t.reset(n),this.emit("before-remove",t),t.defaultPrevented&&(a.splice(r,1),s.splice(e,0,n),e+=1,r-=1,i-=1);v.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=v.acquire();e.target=this,e.cancellable=!1;const t=a.length;for(let r=0;r<t;r++)e.reset(a[r]),this.emit("after-remove",e);v.release(e)}}if(r&&r.length){if(i){const e=[];for(const t of r){const r=i.ensureType(t);null==r&&null!=t||e.push(r)}r=e}const t=this.hasEventListener("before-add"),n=this.hasEventListener("after-add"),a=e===this.length;if(t||n){const i=v.acquire();i.target=this,i.cancellable=!0;const l=v.acquire();l.target=this,l.cancellable=!1;for(const o of r)t?(i.reset(o),this.emit("before-add",i),i.defaultPrevented||(a?s.push(o):s.splice(e++,0,o),this._set("length",s.length),n&&(l.reset(o),this.emit("after-add",l)))):(a?s.push(o):s.splice(e++,0,o),this._set("length",s.length),l.reset(o),this.emit("after-add",l));v.release(l),v.release(i)}else{if(a)for(const e of r)s.push(e);else s.splice(e,0,...r);this._set("length",s.length)}}return(r&&r.length||a&&a.length)&&this._notifyChangeEvent(r,a),a}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=v.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,v.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=v.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),v.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;I.clear(),L.clear(),O.clear();for(const{added:t,removed:r}of e){if(t)if(0===O.size&&0===L.size)for(const e of t)I.add(e);else for(const e of t)L.has(e)?(O.add(e),L.delete(e)):O.has(e)||I.add(e);if(r)if(0===O.size&&0===I.size)for(const e of r)L.add(e);else for(const e of r)I.has(e)?I.delete(e):(O.delete(e),L.add(e))}const r=l.A.acquire();I.forEach((e=>{r.push(e)}));const s=l.A.acquire();L.forEach((e=>{s.push(e)}));const i=this._items,n=t.items,a=l.A.acquire();if(O.forEach((e=>{n.indexOf(e)!==i.indexOf(e)&&a.push(e)})),t.listeners&&(r.length||s.length||a.length)){const e={target:this,added:r,removed:s,moved:a},i=t.listeners.length;for(let r=0;r<i;r++){const s=t.listeners[r];s.removed||s.callback.call(this,e)}}l.A.release(r),l.A.release(s),l.A.release(a)}I.clear(),L.clear(),O.clear()}};T.ofType=e=>{if(!e)return i;if(M.has(e))return M.get(e);let t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const s=e.typeMap[r].prototype.declaredClass;t?t+=` | ${s}`:t=s}let r=class extends i{};return(0,a._)([(0,f.s)({Type:e,ensureType:"function"==typeof e?(0,p.e)(e):(0,p.a)(e)})],r.prototype,"itemType",void 0),r=(0,a._)([(0,m.j)(`esri.core.Collection<${t}>`)],r),M.set(e,r),r},(0,a._)([(0,y.Cb)()],T.prototype,"length",void 0),(0,a._)([(0,y.Cb)()],T.prototype,"items",null),T=i=(0,a._)([(0,m.j)("esri.core.Collection")],T);const D=T},92197:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var s=r(29768),i=r(31450),n=r(82058),a=(r(96467),r(54179)),l=r(50406),o=r(32101),h=r(34250),u=(r(91306),r(48578),r(97714)),c=r(17533),d=r(21801),p=r(53785),g=r(41617),y=r(80462),f=r(89440),m=r(39241),_=r(68219),v=r(6416),b=r(43022),S=r(30776),w=r(78548),C=r(11305),E=r(60669),I=r(5909);r(71552),r(76506),r(88762),r(60991),r(92143),r(40642),r(63571),r(59465),r(57251),r(2906),r(14249),r(60217),r(74569),r(73796),r(12047),r(21972),r(60474),r(66396),r(86656),r(379),r(62062),r(6540),r(19657),r(91055),r(6906),r(79456),r(60947),r(84069),r(91597),r(86787),r(35132),r(44567),r(98380),r(92482),r(82426),r(72836),r(66106),r(29794),r(7200),r(92896),r(22781),r(32422),r(48027),r(54174),r(63130),r(25696),r(98402),r(42775),r(95834),r(34394),r(57150),r(76726),r(20444),r(76393),r(2497),r(49906),r(46527),r(11799),r(48649),r(59877),r(9960),r(30823),r(53326),r(5853),r(39141),r(38742),r(48243),r(15324),r(75067),r(89914),r(34635),r(10401),r(49900),r(81184),r(33101),r(3482),r(67477),r(78533),r(74653),r(91091),r(58943),r(70737),r(36834),r(66122),r(8487),r(17817),r(90814),r(15459),r(97189),r(61847),r(28212),r(16955),r(22401),r(48699),r(77894),r(55187),r(8586),r(44509),r(69814),r(62259),r(44790),r(48208),r(51589),r(3296),r(92200),r(65949),r(65775),r(5777),r(41864),r(51899),r(56420),r(73173),r(74742),r(28239),r(60111),r(1623),r(12381),r(92624),r(92847),r(93314),r(35197),r(1557),r(47842),r(17298),r(85557);const L=["atom","xml"],O={base:S.Z,key:"type",typeMap:{"simple-line":w.Z},errorContext:"symbol"},M={base:S.Z,key:"type",typeMap:{"picture-marker":C.Z,"simple-marker":E.Z},errorContext:"symbol"},A={base:S.Z,key:"type",typeMap:{"simple-fill":I.Z},errorContext:"symbol"};let T=class extends((0,y.h)((0,_.Q)((0,f.O)((0,m.I)((0,v.M)((0,a.M)(g.Z))))))){constructor(...e){super(...e),this.description=null,this.fullExtent=null,this.legendEnabled=!0,this.lineSymbol=null,this.pointSymbol=null,this.polygonSymbol=null,this.operationalLayerType="GeoRSS",this.url=null,this.type="geo-rss"}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readFeatureCollections(e,t){return t.featureCollection.layers.forEach((e=>{const t=e.layerDefinition.drawingInfo.renderer.symbol;t&&"esriSFS"===t.type&&t.outline?.style.includes("esriSFS")&&(t.outline.style="esriSLSSolid")})),t.featureCollection.layers}get hasPoints(){return this._hasGeometry("esriGeometryPoint")}get hasPolylines(){return this._hasGeometry("esriGeometryPolyline")}get hasPolygons(){return this._hasGeometry("esriGeometryPolygon")}get title(){const e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?(0,o.vt)(this.url,L)||"GeoRSS":e||""}set title(e){this._set("title",e)}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service","Feature Service","Feature Collection","Scene Service"]},e).catch(l.r9).then((()=>this._fetchService(t))).then((e=>{this.read(e,{origin:"service"})}))),Promise.resolve(this)}async hasDataChanged(){const e=await this._fetchService();return this.read(e,{origin:"service",ignoreDefaults:!0}),!0}async _fetchService(e){const t=this.spatialReference,{data:r}=await(0,n.default)(i.default.geoRSSServiceUrl,{query:{url:this.url,refresh:!!this.loaded||void 0,outSR:(0,p.i)(t)?void 0:t.wkid??JSON.stringify(t)},signal:e});return r}_hasGeometry(e){return this.featureCollections?.some((t=>t.featureSet?.geometryType===e&&t.featureSet.features?.length>0))??!1}};(0,s._)([(0,h.Cb)()],T.prototype,"description",void 0),(0,s._)([(0,h.Cb)()],T.prototype,"featureCollections",void 0),(0,s._)([(0,u.r)("service","featureCollections",["featureCollection.layers"])],T.prototype,"readFeatureCollections",null),(0,s._)([(0,h.Cb)({type:d.Z,json:{name:"lookAtExtent"}})],T.prototype,"fullExtent",void 0),(0,s._)([(0,h.Cb)(b.i)],T.prototype,"id",void 0),(0,s._)([(0,h.Cb)(b.a)],T.prototype,"legendEnabled",void 0),(0,s._)([(0,h.Cb)({types:O,json:{write:!0}})],T.prototype,"lineSymbol",void 0),(0,s._)([(0,h.Cb)({type:["show","hide"]})],T.prototype,"listMode",void 0),(0,s._)([(0,h.Cb)({types:M,json:{write:!0}})],T.prototype,"pointSymbol",void 0),(0,s._)([(0,h.Cb)({types:A,json:{write:!0}})],T.prototype,"polygonSymbol",void 0),(0,s._)([(0,h.Cb)({type:["GeoRSS"]})],T.prototype,"operationalLayerType",void 0),(0,s._)([(0,h.Cb)(b.u)],T.prototype,"url",void 0),(0,s._)([(0,h.Cb)({json:{origins:{service:{read:{source:"name",reader:e=>e||void 0}}}}})],T.prototype,"title",null),(0,s._)([(0,h.Cb)({readOnly:!0,json:{read:!1},value:"geo-rss"})],T.prototype,"type",void 0),T=(0,s._)([(0,c.j)("esri.layers.GeoRSSLayer")],T);const D=T},39241:(e,t,r)=>{r.d(t,{I:()=>w});var s=r(29768),i=r(31450),n=r(88762),a=r(82058),l=r(41864),o=r(60991),h=r(92143),u=r(71252),c=r(50406),d=r(32101),p=r(34250),g=(r(91306),r(48578),r(97714)),y=r(17533),f=r(2906),m=r(51899),_=r(49900),v=r(56420),b=r(74653),S=r(60111);r(71552),r(76506),r(40642),r(21972),r(60474),r(66396),r(86656),r(379),r(62062),r(6540),r(19657),r(91055),r(6906),r(79456),r(12047),r(81184),r(33101),r(21801),r(73796),r(60947),r(53785),r(57251),r(91597),r(86787),r(35132),r(3482),r(67477),r(78533),r(91091),r(58943),r(73173),r(74742),r(28239),r(1623),r(82426),r(72836),r(66106),r(29794),r(7200),r(89914),r(65775),r(84069),r(12381),r(44567),r(98380),r(92482),r(92896),r(92624),r(92847);const w=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,u.d)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new v.default({id:t.itemId,portal:r&&r.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const{load:s}=await r.e(8642).then(r.bind(r,8642));return(0,c.k_)(t),await s({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(e){throw(0,c.D_)(e)||h.L.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,c.r9)(e),!0))))}async _setUserPrivileges(e,t){if(!i.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:s},content:{updateItem:i}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",i)}catch(e){(0,c.r9)(e)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const s=e===r.id;if(s&&r.portal.user)return(0,S.g)(r);let i,a;if(s)i=r.portal.url;else try{i=await(0,m.g)(this.url,t)}catch(e){(0,c.r9)(e)}if(!i||!(0,d.Zo)(i,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;a=await(n.id?.getCredential(`${i}/sharing`,{prompt:!1,signal:e}))}catch(e){(0,c.r9)(e)}if(!a)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(s?await r.reload():(r=new v.default({id:e,portal:{url:i}}),await r.load(t)),r.portal.user)return(0,S.g)(r)}catch(e){(0,c.r9)(e)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,c.r9)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?n.id?.findCredential(this.url):null;if(!t)return!0;const r=C.credential===t?C.user:await this._fetchEditingUser(e);return C.credential=t,C.user=r,null==r||null==r.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=n.id.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const s=`${r.owningSystemUrl}/sharing/rest`,i=_.Z.getDefault();if(i&&i.loaded&&(0,d.Fv)(i.restUrl)===(0,d.Fv)(s))return i.user;const o=`${s}/community/self`,h=null!=e?e.signal:null,u=await(0,l.r)((0,a.default)(o,{authMode:"no-prompt",query:{f:"json"},signal:h}));return u.ok?b.default.fromJSON(u.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t&&t.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||_.Z.getDefault());return r&&s&&!(0,d.tm)(s.restUrl,r.restUrl)?(t.messages&&t.messages.push(new o.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,s._)([(0,p.Cb)({type:v.default})],t.prototype,"portalItem",null),(0,s._)([(0,g.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,s._)([(0,f.w)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,s._)([(0,p.Cb)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,s._)([(0,p.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,s._)([(0,p.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,s._)([(0,p.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,s._)([(0,y.j)("esri.layers.mixins.PortalLayer")],t),t},C={credential:null,user:null}},68219:(e,t,r)=>{r.d(t,{Q:()=>m});var s=r(29768),i=r(92143),n=r(50406),a=r(34250),l=(r(91306),r(48578),r(17533)),o=r(15324),h=(r(60991),r(19657));r(31450),r(71552),r(76506),r(40642),r(60474),r(66396),r(86656),r(6540),r(91055),r(379),r(75067),r(21972),r(62062),r(6906),r(79456),r(89914);const u=new o.Z,c=new WeakMap;function d(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function p(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:p(t,e%t):0}let g=0,y=0;function f(){const e=Date.now();for(const t of u)t.refreshInterval&&e-(c.get(t)??0)+5>=6e4*t.refreshInterval&&(c.set(t,e),t.refresh(e))}(0,h.a)((()=>{const e=Date.now();let t=0;for(const r of u)t=p(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?c.get(r)||c.set(r,e):c.delete(r);if(t!==y){if(y=t,clearInterval(g),0===y)return void(g=0);g=setInterval(f,y)}}));const m=e=>{let t=class extends e{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,n.Ds)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||d(this)&&u.push(this)}),(()=>{}))}destroy(){d(this)&&u.includes(this)&&u.remove(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,n.R8)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{i.L.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}};return(0,s._)([(0,a.Cb)({type:Number,cast:e=>e>=.1?e:e<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,s._)([(0,a.Cb)()],t.prototype,"refreshParameters",null),t=(0,s._)([(0,l.j)("esri.layers.mixins.RefreshableLayer")],t),t}}}]);