"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[332],{60332:(e,n,t)=>{t.r(n),t.d(n,{registerFunctions:()=>E});var a=t(66802),i=t(94056),r=t(27874),l=t(97944),s=t(84494),o=t(20625),f=t(72256),u=t(50406),c=t(72274),d=t(9506),m=t(97546),y=t(49900);async function p(e,n,t){const a=e.getVariables();if(a.length>0){const i=[];for(let e=0;e<a.length;e++){const r={name:a[e]};i.push(await n.evaluateIdentifier(t,r))}const r={};for(let e=0;e<a.length;e++)r[a[e]]=i[e];return e.parameters=r,e}return e}function h(e,n,t=null){for(const t in e)if(t.toLowerCase()===n.toLowerCase())return e[t];return t}function w(e){if(null===e)return null;const n={type:h(e,"type",""),name:h(e,"name","")};if("range"===n.type)n.range=h(e,"range",[]);else{n.codedValues=[];for(const t of h(e,"codedValues",[]))n.codedValues.push({name:h(t,"name",""),code:h(t,"code",null)})}return n}function g(e){if(null===e)return null;const n={},t=h(e,"wkt",null);null!==t&&(n.wkt=t);const a=h(e,"wkid",null);return null!==a&&(n.wkid=a),n}function F(e){if(null===e)return null;const n={hasZ:h(e,"hasz",!1),hasM:h(e,"hasm",!1)},t=h(e,"spatialreference",null);t&&(n.spatialReference=g(t));const a=h(e,"x",null);if(null!==a)return n.x=a,n.y=h(e,"y",null),n;const i=h(e,"rings",null);if(null!==i)return n.rings=i,n;const r=h(e,"paths",null);if(null!==r)return n.paths=r,n;const l=h(e,"points",null);if(null!==l)return n.points=l,n;for(const t of["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]){const a=h(e,t,null);null!==a&&(n[t]=a)}return n}function E(e){"async"===e.mode&&(e.functions.timezone=function(n,t){return e.standardFunctionAsync(n,t,(async(e,l,s)=>{if((0,i.p)(s,1,2,n,t),(0,i.q)(s[0])){if(await s[0].load(),1===s.length||null===s[1])return s[0].dateTimeReferenceFieldIndex.layerDateFieldsTimeZone;if(!(s[1]instanceof i.F)||!1===s[1].hasField("type"))throw new r.A(n,r.E.InvalidParameter,t);const e=s[1].field("type");if(!1===(0,i.l)(e))throw new r.A(n,r.E.InvalidParameter,t);switch((0,i.w)(e).toLowerCase()){case"preferredtimezone":return s[0].dateTimeReferenceFieldIndex.layerPreferredTimeZone;case"editfieldsinfo":return s[0].dateTimeReferenceFieldIndex.layerEditFieldsTimeZone;case"timeinfo":return s[0].dateTimeReferenceFieldIndex.layerTimeInfoTimeZone;case"field":if(s[1].hasField("fieldname")&&(0,i.l)(s[1].field("fieldname")))return s[0].dateTimeReferenceFieldIndex.fieldTimeZone((0,i.w)(s[1].field("fieldname")))}throw new r.A(n,r.E.InvalidParameter,t)}const o=(0,i.af)(s[0],(0,i.V)(n));if(null===o)return null;const f=o.timeZone;return"system"===f?a.A.systemTimeZoneCanonicalName:f}))},e.functions.sqltimestamp=function(n,t){return e.standardFunctionAsync(n,t,(async(e,a,l)=>{(0,i.p)(l,1,3,n,t);const s=l[0];if((0,i.H)(s)){if(1===l.length)return s.toSQLString();if(2===l.length)return s.changeTimeZone((0,i.w)(l[1])).toSQLString();throw new r.A(n,r.E.InvalidParameter,t)}if((0,i.q)(s)){if(3!==l.length)throw new r.A(n,r.E.InvalidParameter,t);await s.load();const e=(0,i.w)(l[1]);if(!1===(0,i.H)(l[2]))throw new r.A(n,r.E.InvalidParameter,t);const a=s.fieldTimeZone(e);return null===a?l[2].toSQLString():l[2].changeTimeZone(a).toSQLString()}throw new r.A(n,r.E.InvalidParameter,t)}))},e.signatures.push({name:"sqltimestamp",min:2,max:4}),e.functions.featuresetbyid=function(n,t){return e.standardFunctionAsync(n,t,((e,a,s)=>{if((0,i.p)(s,2,4,n,t),s[0]instanceof l.F){const e=(0,i.w)(s[1]);let a=(0,i.L)(s[2],null);const l=(0,i.T)((0,i.L)(s[3],!0));if(null===a&&(a=["*"]),!1===(0,i.m)(a))throw new r.A(n,r.E.InvalidParameter,t);return s[0].featureSetById(e,l,a)}throw new r.A(n,r.E.InvalidParameter,t)}))},e.signatures.push({name:"featuresetbyid",min:2,max:4}),e.functions.getfeatureset=function(n,t){return e.standardFunctionAsync(n,t,((e,a,s)=>{if((0,i.p)(s,1,2,n,t),(0,i.o)(s[0])){let e=(0,i.L)(s[1],"datasource");return null===e&&(e="datasource"),e=(0,i.w)(e).toLowerCase(),(0,l.c)(s[0].fullSchema(),e,n.lrucache,n.interceptor,n.spatialReference)}throw new r.A(n,r.E.InvalidParameter,t)}))},e.signatures.push({name:"getfeatureset",min:1,max:2}),e.functions.featuresetbyportalitem=function(n,t){return e.standardFunctionAsync(n,t,((e,a,s)=>{if((0,i.p)(s,2,5,n,t),null===s[0])throw new r.A(n,r.E.PortalRequired,t);if(s[0]instanceof i.U){const e=(0,i.w)(s[1]),a=(0,i.w)(s[2]);let f=(0,i.L)(s[3],null);const u=(0,i.T)((0,i.L)(s[4],!0));if(null===f&&(f=["*"]),!1===(0,i.m)(f))throw new r.A(n,r.E.InvalidParameter,t);let c=null;return c=n.services&&n.services.portal?n.services.portal:y.Z.getDefault(),c=(0,o.g)(s[0],c),(0,l.a)(e,a,n.spatialReference,f,u,c,n.lrucache,n.interceptor)}if(!1===(0,i.l)(s[0]))throw new r.A(n,r.E.PortalRequired,t);const f=(0,i.w)(s[0]),u=(0,i.w)(s[1]);let c=(0,i.L)(s[2],null);const d=(0,i.T)((0,i.L)(s[3],!0));if(null===c&&(c=["*"]),!1===(0,i.m)(c))throw new r.A(n,r.E.InvalidParameter,t);return(0,l.a)(f,u,n.spatialReference,c,d,n.services?.portal??y.Z.getDefault(),n.lrucache,n.interceptor)}))},e.signatures.push({name:"featuresetbyportalitem",min:2,max:5}),e.functions.featuresetbyname=function(n,t){return e.standardFunctionAsync(n,t,((e,a,s)=>{if((0,i.p)(s,2,4,n,t),s[0]instanceof l.F){const e=(0,i.w)(s[1]);let a=(0,i.L)(s[2],null);const l=(0,i.T)((0,i.L)(s[3],!0));if(null===a&&(a=["*"]),!1===(0,i.m)(a))throw new r.A(n,r.E.InvalidParameter,t);return s[0].featureSetByName(e,l,a)}throw new r.A(n,r.E.InvalidParameter,t)}))},e.signatures.push({name:"featuresetbyname",min:2,max:4}),e.functions.featureset=function(n,t){return e.standardFunction(n,t,((e,a,s)=>{(0,i.p)(s,1,1,n,t);let o=s[0];const f={layerDefinition:{geometryType:"",objectIdField:"",hasM:!1,hasZ:!1,globalIdField:"",typeIdField:"",fields:[]},featureSet:{geometryType:"",features:[]}};if((0,i.l)(o))o=JSON.parse(o),void 0!==o.layerDefinition?(f.layerDefinition=o.layerDefinition,f.featureSet=o.featureSet,o.layerDefinition.spatialReference&&(f.layerDefinition.spatialReference=o.layerDefinition.spatialReference)):(f.featureSet.features=o.features,f.featureSet.geometryType=o.geometryType,f.layerDefinition.geometryType=f.featureSet.geometryType,f.layerDefinition.objectIdField=o.objectIdFieldName??"",f.layerDefinition.typeIdField=o.typeIdFieldName,f.layerDefinition.globalIdField=o.globalIdFieldName,f.layerDefinition.fields=o.fields,o.spatialReference&&(f.layerDefinition.spatialReference=o.spatialReference));else{if(!(s[0]instanceof i.F))throw new r.A(n,r.E.InvalidParameter,t);{o=JSON.parse(s[0].castToText(!0));const e=h(o,"layerdefinition");if(null!==e){f.layerDefinition.geometryType=h(e,"geometrytype",""),f.featureSet.geometryType=f.layerDefinition.geometryType,f.layerDefinition.globalIdField=h(e,"globalidfield",""),f.layerDefinition.objectIdField=h(e,"objectidfield",""),f.layerDefinition.typeIdField=h(e,"typeidfield",""),f.layerDefinition.hasZ=!0===h(e,"hasz",!1),f.layerDefinition.hasM=!0===h(e,"hasm",!1);const n=h(e,"spatialreference",null);n&&(f.layerDefinition.spatialReference=g(n));for(const n of h(e,"fields",[])){const e={name:h(n,"name",""),alias:h(n,"alias",""),type:h(n,"type",""),nullable:h(n,"nullable",!0),editable:h(n,"editable",!0),length:h(n,"length",null),domain:w(h(n,"domain"))};f.layerDefinition.fields.push(e)}const t=h(o,"featureset",null);if(t){const e={};for(const n of f.layerDefinition.fields)e[n.name.toLowerCase()]=n.name;for(const n of h(t,"features",[])){const t={},a=h(n,"attributes",{});for(const n in a)t[e[n.toLowerCase()]]=a[n];f.featureSet.features.push({attributes:t,geometry:F(h(n,"geometry",null))})}}}else{f.layerDefinition.hasZ=!0===h(o,"hasz",!1),f.layerDefinition.hasM=!0===h(o,"hasm",!1),f.layerDefinition.geometryType=h(o,"geometrytype",""),f.featureSet.geometryType=f.layerDefinition.geometryType,f.layerDefinition.objectIdField=h(o,"objectidfieldname",""),f.layerDefinition.typeIdField=h(o,"typeidfieldname","");const e=h(o,"spatialreference",null);e&&(f.layerDefinition.spatialReference=g(e));let n=h(o,"fields",null);if((0,i.m)(n))for(const e of n){const n={name:h(e,"name",""),alias:h(e,"alias",""),type:h(e,"type",""),nullable:h(e,"nullable",!0),editable:h(e,"editable",!0),length:h(e,"length",null),domain:w(h(e,"domain"))};f.layerDefinition.fields.push(n)}else n=null,f.layerDefinition.fields=n;const t={};for(const e of f.layerDefinition.fields)t[e.name.toLowerCase()]=e.name;let a=h(o,"features",null);if((0,i.m)(a))for(const e of a){const n={},a=h(e,"attributes",{});for(const e in a)n[t[e.toLowerCase()]]=a[e];f.featureSet.features.push({attributes:n,geometry:F(h(e,"geometry",null))})}else a=null,f.featureSet.features=a}}}if(0==(!!(u=f).layerDefinition&&!!u.featureSet&&!1!==function(e,n){for(const n of["",null,"esriGeometryNull","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])if(n===e)return!0;return!1}(u.layerDefinition.geometryType)&&!1!==(0,i.m)(u.layerDefinition.fields)&&!1!==(0,i.m)(u.featureSet.features)))throw new r.A(n,r.E.InvalidParameter,t);var u;return""===(f?.layerDefinition?.geometryType||"")&&(f.layerDefinition.geometryType="esriGeometryNull"),l.b.create(f,n.spatialReference)}))},e.signatures.push({name:"featureset",min:1,max:1}),e.functions.filter=function(n,t){return e.standardFunctionAsync(n,t,(async(a,o,f)=>{if((0,i.p)(f,2,2,n,t),(0,i.m)(f[0])||(0,i.n)(f[0])){const e=[];let a=f[0];a instanceof s.I&&(a=a.toArray());let l=null;if(!(0,i.k)(f[1]))throw new r.A(n,r.E.InvalidParameter,t);l=f[1].createFunction(n);for(const n of a){const t=l(n);(0,u.y8)(t)?!0===await t&&e.push(n):!0===t&&e.push(n)}return e}if((0,i.q)(f[0])){const t=await f[0].load(),a=c.WhereClause.create(f[1],t.getFieldsIndex()),i=a.getVariables();if(i.length>0){const t=[];for(let a=0;a<i.length;a++){const r={name:i[a]};t.push(await e.evaluateIdentifier(n,r))}const r={};for(let e=0;e<i.length;e++)r[i[e]]=t[e];return a.parameters=r,new l.d({parentfeatureset:f[0],whereclause:a})}return new l.d({parentfeatureset:f[0],whereclause:a})}throw new r.A(n,r.E.InvalidParameter,t)}))},e.signatures.push({name:"filter",min:2,max:2}),e.functions.orderby=function(n,t){return e.standardFunctionAsync(n,t,(async(e,a,s)=>{if((0,i.p)(s,2,2,n,t),(0,i.q)(s[0])){const e=new l.O(s[1]);return new l.e({parentfeatureset:s[0],orderbyclause:e})}throw new r.A(n,r.E.InvalidParameter,t)}))},e.signatures.push({name:"orderby",min:2,max:2}),e.functions.top=function(n,t){return e.standardFunctionAsync(n,t,(async(e,a,s)=>{if((0,i.p)(s,2,2,n,t),(0,i.q)(s[0]))return new l.T({parentfeatureset:s[0],topnum:s[1]});if((0,i.m)(s[0]))return(0,i.t)(s[1])>=s[0].length?s[0].slice(0):s[0].slice(0,(0,i.t)(s[1]));if((0,i.n)(s[0]))return(0,i.t)(s[1])>=s[0].length()?s[0].slice(0):s[0].slice(0,(0,i.t)(s[1]));throw new r.A(n,r.E.InvalidParameter,t)}))},e.signatures.push({name:"top",min:2,max:2}),e.functions.first=function(n,t){return e.standardFunctionAsync(n,t,(async(e,a,r)=>{if((0,i.p)(r,1,1,n,t),(0,i.q)(r[0])){const t=await r[0].first(e.abortSignal);if(null!==t){const e=i.B.createFromGraphicLikeObject(t.geometry,t.attributes,r[0],n.timeReference);return e._underlyingGraphic=t,e}return t}return(0,i.m)(r[0])?0===r[0].length?null:r[0][0]:(0,i.n)(r[0])?0===r[0].length()?null:r[0].get(0):null}))},e.signatures.push({name:"first",min:1,max:1}),e.functions.attachments=function(n,t){return e.standardFunctionAsync(n,t,(async(e,a,s)=>{(0,i.p)(s,1,2,n,t);const o={minsize:-1,maxsize:-1,types:null,returnMetadata:!1};if(s.length>1)if(s[1]instanceof i.F){if(s[1].hasField("minsize")&&(o.minsize=(0,i.t)(s[1].field("minsize"))),s[1].hasField("metadata")&&(o.returnMetadata=(0,i.T)(s[1].field("metadata"))),s[1].hasField("maxsize")&&(o.maxsize=(0,i.t)(s[1].field("maxsize"))),s[1].hasField("types")){const e=(0,i.ag)(s[1].field("types"),!1);e.length>0&&(o.types=e)}}else if(null!==s[1])throw new r.A(n,r.E.InvalidParameter,t);if((0,i.o)(s[0])){let e=s[0]._layer;return e instanceof d.default&&(e=(0,l.f)(e,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null===e||!1===(0,i.q)(e)?[]:(await e.load(),e.queryAttachments(s[0].field(e.objectIdField),o.minsize,o.maxsize,o.types,o.returnMetadata))}if(null===s[0])return[];throw new r.A(n,r.E.InvalidParameter,t)}))},e.signatures.push({name:"attachments",min:1,max:2}),e.functions.featuresetbyrelationshipname=function(n,t){return e.standardFunctionAsync(n,t,(async(e,a,s)=>{(0,i.p)(s,2,4,n,t);const o=s[0],u=(0,i.w)(s[1]);let m=(0,i.L)(s[2],null);const y=(0,i.T)((0,i.L)(s[3],!0));if(null===m&&(m=["*"]),!1===(0,i.m)(m))throw new r.A(n,r.E.InvalidParameter,t);if(null===s[0])return null;if(!(0,i.o)(s[0]))throw new r.A(n,r.E.InvalidParameter,t);let p=o._layer;if(p instanceof d.default&&(p=(0,l.f)(p,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null===p)return null;if(!1===(0,i.q)(p))return null;p=await p.load();const h=p.relationshipMetaData().filter((e=>e.name===u));if(0===h.length)return null;if(void 0!==h[0].relationshipTableId&&null!==h[0].relationshipTableId&&h[0].relationshipTableId>-1)return(0,l.g)(p,h[0],o.field(p.objectIdField),p.spatialReference,m,y,n.lrucache,n.interceptor);let w=p.serviceUrl();if(!w)return null;w="/"===w.charAt(w.length-1)?w+h[0].relatedTableId.toString():w+"/"+h[0].relatedTableId.toString();const g=await(0,l.h)(w,p.spatialReference,m,y,n.lrucache,n.interceptor);await g.load();let F=g.relationshipMetaData();if(F=F.filter((e=>e.id===h[0].id)),!1===o.hasField(h[0].keyField)||null===o.field(h[0].keyField)){const e=await p.getFeatureByObjectId(o.field(p.objectIdField),[h[0].keyField]);if(e){const n=c.WhereClause.create(F[0].keyField+"= @id",g.getFieldsIndex());return n.parameters={id:e.attributes[h[0].keyField]},g.filter(n)}return new f.E({parentfeatureset:g})}const E=c.WhereClause.create(F[0].keyField+"= @id",g.getFieldsIndex());return E.parameters={id:o.field(h[0].keyField)},g.filter(E)}))},e.signatures.push({name:"featuresetbyrelationshipname",min:2,max:4}),e.functions.featuresetbyassociation=function(n,t){return e.standardFunctionAsync(n,t,(async(e,a,s)=>{(0,i.p)(s,2,3,n,t);const o=s[0],f=(0,i.w)((0,i.L)(s[1],"")).toLowerCase(),u=(0,i.l)(s[2])?(0,i.w)(s[2]):null;if(null===s[0])return null;if(!(0,i.o)(s[0]))throw new r.A(n,r.E.InvalidParameter,t);let y=o._layer;if(y instanceof d.default&&(y=(0,l.f)(y,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null===y)return null;if(!1===(0,i.q)(y))return null;await y.load();const p=y.serviceUrl(),h=await(0,l.i)(p,n.spatialReference);let w=null,g=null,F=!1;if(null!==u&&""!==u&&void 0!==u){for(const e of h.terminals)e.terminalName===u&&(g=e.terminalId);null===g&&(F=!0)}const E=h.associations.getFieldsIndex(),I=E.get("TOGLOBALID").name,A=E.get("FROMGLOBALID").name,D=E.get("TOTERMINALID").name,b=E.get("FROMTERMINALID").name,S=E.get("FROMNETWORKSOURCEID").name,T=E.get("TONETWORKSOURCEID").name,x=E.get("ASSOCIATIONTYPE").name,N=E.get("ISCONTENTVISIBLE").name,L=E.get("OBJECTID").name;for(const e of y.fields)if("global-id"===e.type){w=o.field(e.name);break}let C=null,v=new l.S(new m.Z({name:"percentalong",alias:"percentalong",type:"double"}),c.WhereClause.create("0",h.associations.getFieldsIndex())),$=new l.S(new m.Z({name:"side",alias:"side",type:"string"}),c.WhereClause.create("''",h.associations.getFieldsIndex()));const P="globalid",R="globalId",k={};for(const e in h.lkp)k[e]=h.lkp[e].sourceId;const M=new l.j(new m.Z({name:"classname",alias:"classname",type:"string"}),null,k);let W="";switch(f){case"midspan":{W=`((${I}='${w}') OR ( ${A}='${w}')) AND (${x} IN (5))`,M.codefield=c.WhereClause.create(`CASE WHEN (${I}='${w}') THEN ${S} ELSE ${T} END`,h.associations.getFieldsIndex());const e=(0,i.Y)(l.A.findField(h.associations.fields,A));e.name=P,e.alias=P,C=new l.S(e,c.WhereClause.create(`CASE WHEN (${A}='${w}') THEN ${I} ELSE ${A} END`,h.associations.getFieldsIndex())),v=h.unVersion>=4?new l.l(l.A.findField(h.associations.fields,E.get("PERCENTALONG").name)):new l.S(new m.Z({name:"percentalong",alias:"percentalong",type:"double"}),c.WhereClause.create("0",h.associations.getFieldsIndex()));break}case"junctionedge":{W=`((${I}='${w}') OR ( ${A}='${w}')) AND (${x} IN (4,6))`,M.codefield=c.WhereClause.create(`CASE WHEN (${I}='${w}') THEN ${S} ELSE ${T} END`,h.associations.getFieldsIndex());const e=(0,i.Y)(l.A.findField(h.associations.fields,A));e.name=P,e.alias=P,C=new l.S(e,c.WhereClause.create(`CASE WHEN (${A}='${w}') THEN ${I} ELSE ${A} END`,h.associations.getFieldsIndex())),$=new l.S(new m.Z({name:"side",alias:"side",type:"string"}),c.WhereClause.create(`CASE WHEN (${x}=4) THEN 'from' ELSE 'to' END`,h.associations.getFieldsIndex()));break}case"connected":{let e=`${I}='@T'`,n=`${A}='@T'`;null!==g&&(e+=` AND ${D}=@A`,n+=` AND ${b}=@A`),W="(("+e+") OR ("+n+"))",W=(0,i.ah)(W,"@T",w??""),e=(0,i.ah)(e,"@T",w??""),null!==g&&(e=(0,i.ah)(e,"@A",g.toString()),W=(0,i.ah)(W,"@A",g.toString())),M.codefield=c.WhereClause.create("CASE WHEN "+e+` THEN ${S} ELSE ${T} END`,h.associations.getFieldsIndex());const t=(0,i.Y)(l.A.findField(h.associations.fields,A));t.name=P,t.alias=P,C=new l.S(t,c.WhereClause.create("CASE WHEN "+e+` THEN ${A} ELSE ${I} END`,h.associations.getFieldsIndex()));break}case"container":W=`${I}='${w}' AND ${x} = 2`,null!==g&&(W+=` AND ${D} = `+g.toString()),M.codefield=S,W="( "+W+" )",C=new l.k(l.A.findField(h.associations.fields,A),P,P);break;case"content":W=`(${A}='${w}' AND ${x} = 2)`,null!==g&&(W+=` AND ${b} = `+g.toString()),M.codefield=T,W="( "+W+" )",C=new l.k(l.A.findField(h.associations.fields,I),P,P);break;case"structure":W=`(${I}='${w}' AND ${x} = 3)`,null!==g&&(W+=` AND ${D} = `+g.toString()),M.codefield=S,W="( "+W+" )",C=new l.k(l.A.findField(h.associations.fields,A),P,R);break;case"attached":W=`(${A}='${w}' AND ${x} = 3)`,null!==g&&(W+=` AND ${b} = `+g.toString()),M.codefield=T,W="( "+W+" )",C=new l.k(l.A.findField(h.associations.fields,I),P,R);break;default:throw new r.A(n,r.E.InvalidParameter,t)}return F&&(W="1 <> 1"),new l.A({parentfeatureset:h.associations,adaptedFields:[new l.l(l.A.findField(h.associations.fields,L)),new l.l(l.A.findField(h.associations.fields,N)),C,$,M,v],extraFilter:W?c.WhereClause.create(W,h.associations.getFieldsIndex()):null})}))},e.signatures.push({name:"featuresetbyassociation",min:2,max:6}),e.functions.groupby=function(n,t){return e.standardFunctionAsync(n,t,(async(a,l,s)=>{if((0,i.p)(s,3,3,n,t),!(0,i.q)(s[0]))throw new r.A(n,r.E.InvalidParameter,t);const o=await s[0].load(),u=[],d=[];let m=!1,y=[];if((0,i.l)(s[1]))y.push(s[1]);else if(s[1]instanceof i.F)y.push(s[1]);else if((0,i.m)(s[1]))y=s[1];else{if(!(0,i.n)(s[1]))throw new r.A(n,r.E.InvalidParameter,t);y=s[1].toArray()}for(const e of y)if((0,i.l)(e)){const n=c.WhereClause.create((0,i.w)(e),o.getFieldsIndex()),t=!0===(0,f.i)(n)?(0,i.w)(e):"%%%%FIELDNAME";u.push({name:t,expression:n}),"%%%%FIELDNAME"===t&&(m=!0)}else{if(!(e instanceof i.F))throw new r.A(n,r.E.InvalidParameter,t);{const a=e.hasField("name")?e.field("name"):"%%%%FIELDNAME",i=e.hasField("expression")?e.field("expression"):"";if("%%%%FIELDNAME"===a&&(m=!0),!a)throw new r.A(n,r.E.InvalidParameter,t);u.push({name:a,expression:c.WhereClause.create(i||a,o.getFieldsIndex())})}}if(y=[],(0,i.l)(s[2]))y.push(s[2]);else if((0,i.m)(s[2]))y=s[2];else if((0,i.n)(s[2]))y=s[2].toArray();else{if(!(s[2]instanceof i.F))throw new r.A(n,r.E.InvalidParameter,t);y.push(s[2])}for(const e of y){if(!(e instanceof i.F))throw new r.A(n,r.E.InvalidParameter,t);{const a=e.hasField("name")?e.field("name"):"",i=e.hasField("statistic")?e.field("statistic"):"",l=e.hasField("expression")?e.field("expression"):"";if(!a||!i||!l)throw new r.A(n,r.E.InvalidParameter,t);d.push({name:a,statistic:i.toLowerCase(),expression:c.WhereClause.create(l,o.getFieldsIndex())})}}if(m){const e={};for(const n of o.fields)e[n.name.toLowerCase()]=1;for(const n of u)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);for(const n of d)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);let n=0;for(const t of u)if("%%%%FIELDNAME"===t.name){for(;1===e["field_"+n.toString()];)n++;e["field_"+n.toString()]=1,t.name="FIELD_"+n.toString()}}for(const t of u)await p(t.expression,e,n);for(const t of d)await p(t.expression,e,n);return s[0].groupby(u,d)}))},e.signatures.push({name:"groupby",min:3,max:3}),e.functions.distinct=function(n,t){return e.standardFunctionAsync(n,t,(async(a,l,s)=>{if((0,i.q)(s[0])){(0,i.p)(s,2,2,n,t);const a=await s[0].load(),l=[];let o=[];if((0,i.l)(s[1]))o.push(s[1]);else if(s[1]instanceof i.F)o.push(s[1]);else if((0,i.m)(s[1]))o=s[1];else{if(!(0,i.n)(s[1]))throw new r.A(n,r.E.InvalidParameter,t);o=s[1].toArray()}let u=!1;for(const e of o)if((0,i.l)(e)){const n=c.WhereClause.create((0,i.w)(e),a.getFieldsIndex()),t=!0===(0,f.i)(n)?(0,i.w)(e):"%%%%FIELDNAME";l.push({name:t,expression:n}),"%%%%FIELDNAME"===t&&(u=!0)}else{if(!(e instanceof i.F))throw new r.A(n,r.E.InvalidParameter,t);{const i=e.hasField("name")?e.field("name"):"%%%%FIELDNAME",s=e.hasField("expression")?e.field("expression"):"";if("%%%%FIELDNAME"===i&&(u=!0),!i)throw new r.A(n,r.E.InvalidParameter,t);l.push({name:i,expression:c.WhereClause.create(s||i,a.getFieldsIndex())})}}if(u){const e={};for(const n of a.fields)e[n.name.toLowerCase()]=1;for(const n of l)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);let n=0;for(const t of l)if("%%%%FIELDNAME"===t.name){for(;1===e["field_"+n.toString()];)n++;e["field_"+n.toString()]=1,t.name="FIELD_"+n.toString()}}for(const t of l)await p(t.expression,e,n);return s[0].groupby(l,[])}return function(e,n,t,a){if(1===a.length){if((0,i.m)(a[0]))return(0,i.ai)(e,a[0],-1);if((0,i.n)(a[0]))return(0,i.ai)(e,a[0].toArray(),-1)}return(0,i.ai)(e,a,-1)}("distinct",0,0,s)}))})}t(36097),t(74569),t(91306),t(48578),t(92143),t(31450),t(71552),t(76506),t(40642),t(21801),t(34250),t(60474),t(66396),t(86656),t(60991),t(17533),t(6540),t(73796),t(12047),t(21972),t(379),t(62062),t(19657),t(91055),t(6906),t(79456),t(97714),t(60947),t(53785),t(57251),t(2906),t(91597),t(86787),t(35132),t(84069),t(44567),t(98380),t(92482),t(82426),t(72836),t(66106),t(29794),t(7200),t(92896),t(22781),t(32422),t(56240),t(3482),t(88762),t(32101),t(40267),t(53326),t(33622),t(1709),t(14249),t(60217),t(99983),t(66122),t(96916),t(82058),t(23761),t(86748),t(15324),t(75067),t(89914),t(29107),t(30574),t(2157),t(25977),t(58076),t(98242),t(7471),t(54414),t(59465),t(1648),t(8925),t(33921),t(45154),t(16769),t(93603),t(15438),t(593),t(85699),t(55531),t(96055),t(47776),t(18033),t(6331),t(62048),t(56890),t(30493),t(4292),t(75626),t(72652),t(29641),t(70821),t(3296),t(34229),t(37029),t(96467),t(63571),t(30776),t(48027),t(54174),t(63130),t(25696),t(98402),t(42775),t(95834),t(34394),t(57150),t(76726),t(20444),t(76393),t(78548),t(2497),t(49906),t(46527),t(11799),t(48649),t(59877),t(9960),t(30823),t(5853),t(39141),t(38742),t(48243),t(34635),t(10401),t(70737),t(36834),t(8487),t(17817),t(90814),t(15459),t(97189),t(81184),t(33101),t(67477),t(78533),t(74653),t(91091),t(58943),t(61847),t(28212),t(16955),t(22401),t(48699),t(77894),t(55187),t(8586),t(44509),t(69814),t(11305),t(62259),t(44790),t(5909),t(60669),t(48208),t(51589),t(81317),t(38629),t(69218),t(2845),t(94216),t(49214),t(95533),t(94751),t(95307),t(81731),t(76733),t(11385),t(55823),t(92847),t(87258),t(9801),t(53523),t(42911),t(46826),t(45433),t(54732),t(31292),t(93314),t(35197),t(32925),t(50619),t(27207),t(6502),t(53426),t(34446),t(55402),t(46646),t(39210),t(90549),t(79014),t(95873),t(23771),t(58085),t(91162),t(41864),t(54179),t(41617),t(96994),t(75025),t(21132),t(80462),t(92200),t(65949),t(65775),t(5777),t(21471),t(65398),t(79093),t(29027),t(43022),t(1557),t(47842),t(17298),t(85557),t(62670),t(51899),t(86758),t(65684),t(12158),t(74864),t(63683),t(94479),t(45702),t(51127),t(26822),t(51723),t(23243),t(51669),t(6090),t(3977),t(36741),t(11253),t(90319),t(38822),t(74057),t(48190),t(67541),t(16218),t(95310),t(93939),t(62407),t(90033),t(97807),t(238),t(71831),t(1693),t(17055),t(2180),t(14327),t(62748),t(89440),t(39241),t(56420),t(73173),t(74742),t(28239),t(60111),t(1623),t(12381),t(92624),t(68219),t(6416),t(82377),t(59765),t(77361),t(47346),t(76412),t(27064),t(55306),t(94070),t(71206),t(9352),t(89241),t(91700),t(10738),t(51979),t(32037),t(60698),t(23639),t(90811),t(60045),t(68681),t(53321),t(20208),t(10691),t(38949),t(71777),t(19755),t(62554),t(27371),t(78648),t(87558),t(13063),t(17153),t(35962),t(9252),t(67350),t(11471),t(83748),t(28376),t(94612),t(46495),t(77807),t(50203),t(30439),t(6941),t(68653),t(78893),t(40944),t(78303),t(42870),t(65514),t(46987),t(15173),t(37453),t(66284),t(87239),t(87728),t(9641),t(6210),t(36231),t(39275),t(70846),t(67961),t(29395),t(94303),t(14460),t(13322),t(13201),t(86861),t(97565),t(64049),t(68714)},20625:(e,n,t)=>{t.d(n,{g:()=>l,l:()=>s});var a=t(88762),i=t(82058),r=t(49900);function l(e,n){return null===e?n:new r.Z({url:e.field("url")})}async function s(e,n,t){const r=a.id?.findCredential(e.restUrl);if(!r)return null;if("loaded"===e.loadStatus&&""===n&&e.user&&e.user.sourceJSON&&!1===t)return e.user.sourceJSON;if(""===n){const n=await(0,i.default)(e.restUrl+"/community/self",{responseType:"json",query:{f:"json",...!1===t?{}:{returnUserLicenseTypeExtensions:!0}}});if(n.data){const e=n.data;if(e&&e.username)return e}return null}const l=await(0,i.default)(e.restUrl+"/community/users/"+n,{responseType:"json",query:{f:"json"}});if(l.data){const e=l.data;return e.error?null:e}return null}}}]);