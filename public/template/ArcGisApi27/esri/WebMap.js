// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(f,b){f.updateOrigins=function(a){a&&a.writtenProperties&&a.writtenProperties.forEach(({target:d,propName:g,newOrigin:q})=>{b.isMultiOriginJSONMixin(d)&&q&&d.originOf(g)!==q&&d.updateOrigin(g,q)})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(f){f.isMultiOriginJSONMixin=function(b){return b&&
"getAtOrigin"in b&&"originOf"in b};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/networks/UtilityNetwork":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/deprecate ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../layers/FeatureLayer ../layers/support/featureQueryAll ./Network ./RulesTable ./support/NamedTraceConfiguration ./support/NetworkSystemLayers ./support/TerminalConfiguration ./support/TraceJobInfo ./support/typeUtils ../rest/support/Query".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e,l,n,p,t,v,w,z,H,G){const E=N=>Object.freeze(Object.defineProperty({__proto__:null,default:N},Symbol.toStringTag,{value:"Module"})),P=g.getLogger("esri.networks.UtilityNetwork");g=function(N){function U(A){A=N.call(this,A)||this;A.sharedNamedTraceConfigurations=[];A.type="utility";return A}b._inherits(U,N);var O=U.prototype;O.load=async function(A){this.addResolvingPromise(b._get(b._getPrototypeOf(U.prototype),"load",this).call(this,A));this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(A));
return this};O.getTerminalConfiguration=function(A){let J=null,F=null;var D=A.layer;let x=null;if("feature"===D?.type){if(x=D.layerId,null===x)return null}else if("subtype-sublayer"===D?.type){if(x=D?.parent?.layerId??null,null===x)return null}else return null;D=A.attributes;if(null==D)return null;for(const M of Object.keys(D))"ASSETGROUP"===M.toUpperCase()&&(J=A.getAttribute(M)),"ASSETTYPE"===M.toUpperCase()&&(F=A.getAttribute(M));if(!this.dataElement)return null;let L=null;A=this.dataElement.domainNetworks;
for(var Q of A)if(A=Q.junctionSources?.find(M=>M.layerId===x))if(A=A.assetGroups?.find(M=>M.assetGroupCode===J))if(A=A.assetTypes?.find(M=>M.assetTypeCode===F)){L=A.terminalConfigurationId;break}return null!=L?(Q=this.dataElement.terminalConfigurations?.find(M=>M.terminalConfigurationId===L))?w.fromJSON(Q):null:null};O.getTierNames=function(A){return this.dataElement?.domainNetworks.find(J=>J.domainNetworkName===A)?.tiers.map(J=>J.name)||[]};O.getRulesTable=async function(){return this._createRulesTable()};
O.isUtilityLayer=function(A){return this._utilityLayerList.has(A.layerId)};O.trace=async function(A){const [{trace:J},{default:F}]=await Promise.all([new Promise((D,x)=>f(["../rest/networks/trace"],D,x)),new Promise((D,x)=>f(["../rest/networks/support/TraceParameters"],L=>D(E(L)),x))]);A=F.from(A);return J(this.networkServiceUrl,A)};O.submitTraceJob=async function(A){const [{submitTraceJob:J},{default:F}]=await Promise.all([new Promise((D,x)=>f(["../rest/networks/trace"],D,x)),new Promise((D,x)=>
f(["../rest/networks/support/TraceParameters"],L=>D(E(L)),x))]);A=F.from(A);A=await J(this.networkServiceUrl,A);return new z({statusUrl:A})};O._loadNamedTraceConfigurationsFromNetwork=async function(A){if(0!==this.sharedNamedTraceConfigurations?.length){var J=this.sharedNamedTraceConfigurations.map(F=>F.globalId);A=await this.queryNamedTraceConfigurations({globalIds:J},A);for(const F of this.sharedNamedTraceConfigurations)if(J=A?.find(D=>D.globalId===F.globalId))J=J.write({},{origin:"service"}),F.read(J,
{origin:"service"})}};O._createRulesTable=async function(){const A=new e({url:this.rulesTableUrl});await A.load();var J=this.dataElement?.domainNetworks;if(!J)return null;const F=J.flatMap(D=>[...D.edgeSources,...D.junctionSources]);J=(await this._queryRulesTable(A)).map(D=>this._hydrateRuleInfo(A,F,D));return new p({layer:A,rules:J})};O._queryRulesTable=async function(A){const J=new G({where:"1\x3d1",outFields:["*"]});return(await l.queryAllJSON(A,J)).features};O._hydrateRuleInfo=function(A,J,F){var D=
A.fieldsIndex;A=D.get("RULETYPE");var x=D.get("CREATIONDATE"),L=D.get("FROMNETWORKSOURCEID"),Q=D.get("FROMASSETGROUP"),M=D.get("FROMASSETTYPE"),I=D.get("FROMTERMINALID"),T=D.get("TONETWORKSOURCEID"),R=D.get("TOASSETGROUP");const S=D.get("TOASSETTYPE"),W=D.get("TOTERMINALID"),ka=D.get("VIANETWORKSOURCEID"),ha=D.get("VIAASSETGROUP"),la=D.get("VIAASSETTYPE");D=D.get("VIATERMINALID");A=F.attributes[A.name];x=new Date(F.attributes[x.name]);F=[{networkSourceId:F.attributes[L.name],assetGroupId:F.attributes[Q.name],
assetTypeId:F.attributes[M.name],terminalId:F.attributes[I.name]},{networkSourceId:F.attributes[T.name],assetGroupId:F.attributes[R.name],assetTypeId:F.attributes[S.name],terminalId:F.attributes[W.name]},{networkSourceId:F.attributes[ka.name],assetGroupId:F.attributes[ha.name],assetTypeId:F.attributes[la.name],terminalId:F.attributes[D.name]}];let Z;(function(Y){Y[Y.from=0]="from";Y[Y.to=1]="to";Y[Y.via=2]="via"})(Z||(Z={}));L={ruleType:A,creationDate:x};for(const Y of[Z.from,Z.to,Z.via]){if(A!==
H.RuleType.RTEdgeJunctionEdgeConnectivity&&Y===Z.via)continue;const da=F[Y];Q=J.find(aa=>aa.sourceId===da.networkSourceId);M=Q?.assetGroups.find(aa=>aa.assetGroupCode===da.assetGroupId);I=M?.assetTypes.find(aa=>aa.assetTypeCode===da.assetTypeId);T=this._getTerminal(A,I,da);if(A===H.RuleType.RTContainment||A===H.RuleType.RTAttachment)T=null;R="";switch(Y){case Z.from:R="from";break;case Z.to:R="to";break;case Z.via:R="via"}L[`${R}NetworkSource`]=Q;L[`${R}AssetGroup`]=M;L[`${R}AssetType`]=I;L[`${R}Terminal`]=
T?.toJSON()}return L};O._getTerminal=function(A,J,F){if(A===H.RuleType.RTAttachment||A===H.RuleType.RTContainment)return null;const D=J?.terminalConfigurationId;return this.terminalConfigurations?.find(x=>x.id===D)?.terminals?.find(x=>x.id===F.terminalId)??null};b._createClass(U,[{key:"serviceTerritoryFeatureLayerId",get:function(){return this.dataElement?.serviceTerritoryFeatureLayerId??null}},{key:"networkSystemLayers",get:function(){return new v({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,
rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null})}},{key:"rulesTableId",
get:function(){d.deprecatedProperty(P,"rulesTableId",{replacement:"networkSystemLayers.rulesTableId",version:"4.25"});return this.sourceJSON?.systemLayers.rulesTableId}},{key:"rulesTableUrl",get:function(){d.deprecatedProperty(P,"rulesTableUrl",{replacement:"networkSystemLayers.rulesTableUrl",version:"4.25"});return this.sourceJSON?`${this.featureServiceUrl}/${this.networkSystemLayers.rulesTableId}`:null}},{key:"subnetworksTableId",get:function(){d.deprecatedProperty(P,"subnetworksTableId",{replacement:"networkSystemLayers.subnetworksTableId",
version:"4.25"});return this.sourceJSON?.systemLayers.subnetworksTableId}},{key:"subnetworksTableUrl",get:function(){d.deprecatedProperty(P,"subnetworksTableUrl",{replacement:"networkSystemLayers.subnetworksTableUrl",version:"4.25"});return this.sourceJSON?`${this.featureServiceUrl}/${this.networkSystemLayers.subnetworksTableId}`:null}},{key:"terminalConfigurations",get:function(){return this.dataElement?.terminalConfigurations.map(A=>w.fromJSON(A))||[]}},{key:"domainNetworkNames",get:function(){return this.dataElement?.domainNetworks.map(A=>
A.domainNetworkName)||[]}},{key:"_utilityLayerList",get:function(){const A=new Set;this.dataElement?.domainNetworks?.map(J=>{J.edgeSources.map(F=>{A.add(F.layerId)});J.junctionSources.map(F=>{A.add(F.layerId)})});return A}}]);return U}(n);a.__decorate([q.property({type:[t],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],g.prototype,"sharedNamedTraceConfigurations",void 0);a.__decorate([q.property({type:["utility"],
readOnly:!0,json:{read:!1,write:!1}})],g.prototype,"type",void 0);a.__decorate([q.property({readOnly:!0})],g.prototype,"serviceTerritoryFeatureLayerId",null);a.__decorate([q.property({readOnly:!0})],g.prototype,"networkSystemLayers",null);a.__decorate([q.property({readOnly:!0})],g.prototype,"rulesTableId",null);a.__decorate([q.property({readOnly:!0})],g.prototype,"rulesTableUrl",null);a.__decorate([q.property({readOnly:!0})],g.prototype,"subnetworksTableId",null);a.__decorate([q.property({readOnly:!0})],
g.prototype,"subnetworksTableUrl",null);a.__decorate([q.property({readOnly:!0})],g.prototype,"terminalConfigurations",null);a.__decorate([q.property({readOnly:!0})],g.prototype,"domainNetworkNames",null);return g=a.__decorate([k.subclass("esri.networks.UtilityNetwork")],g)})},"esri/layers/support/featureQueryAll":function(){define(["exports","../../rest/support/Query"],function(f,b){function a(q){return g(q)*d(q)}function d(q){return q.capabilities.query.maxRecordCount||2E3}function g(q){return q.capabilities.query.supportsMaxRecordCountFactor?
b.MAX_MAX_RECORD_COUNT_FACTOR:1}f.getMaxRecordCountFactor=g;f.getMaximumQuerySize=a;f.getMaximumRecordCount=d;f.queryAllJSON=async function(q,y,r){y=y.clone();q.capabilities.query.supportsMaxRecordCountFactor&&(y.maxRecordCountFactor=g(q));const h=a(q),k=q.capabilities.query.supportsPagination;y.start=0;y.num=h;let e=null;for(;;){const l=await q.source.queryFeaturesJSON(y,r);null==e?e=l:e.features=e.features.concat(l.features);e.exceededTransferLimit=l.exceededTransferLimit;if(!k||!l.exceededTransferLimit)break;
y.start+=h}return e};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/networks/Network":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../geometry ../Graphic ../request ../core/Error ../core/Loadable ../core/Logger ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/support/jsonUtils ../layers/mixins/EditBusLayer ../layers/support/arcgisLayerUrl ./support/TopologyValidationJobInfo ./support/utils ../rest/networks/support/QueryNamedTraceConfigurationsParameters ../geometry/SpatialReference".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e,l,n,p,t,v,w,z,H,G,E,P,N,U,O){const A=J=>Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));d=function(J){function F(x){x=J.call(this,x)||this;x.id=null;x.title=null;x.layerUrl=null;x.dataElement=null;x.fullExtent=null;x.spatialReference=null;x.type=null;x.sourceJSON=null;return x}b._inherits(F,J);F.fromPortalItem=function(x){return N.networkFromPortalItem(x)};var D=F.prototype;D.initialize=function(){this.when().catch(x=>
{e.isAbortError(x)||h.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:x})})};D.load=async function(x){this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),x));this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,x));return this};D.getLayerIdBySourceId=function(x){if(this.dataElement){const L=this.dataElement.domainNetworks;for(const Q of L){for(const M of Q.edgeSources??
[])if(M.sourceId===x)return M.layerId;for(const M of Q.junctionSources??[])if(M.sourceId===x)return M.layerId}}return null};D.queryNamedTraceConfigurations=async function(x,L){const {queryNamedTraceConfigurations:Q}=await new Promise((I,T)=>f(["../rest/networks/queryNamedTraceConfigurations"],I,T)),M=this.networkServiceUrl;x=new U({...x});return(await Q(M,x,{...L}))?.namedTraceConfigurations??null};D.validateTopology=async function(x,L){if(!x.validateArea)throw new y("network:undefined-validateArea",
"the network must have validateArea defined in the validate network topology parameters.");const [{validateNetworkTopology:Q},{default:M}]=await Promise.all([new Promise((R,S)=>f(["../rest/networks/validateNetworkTopology"],R,S)),new Promise((R,S)=>f(["../rest/networks/support/ValidateNetworkTopologyParameters"],W=>R(A(W)),S))]);var I=M.from(x),T=this.networkServiceUrl;x=G.emitApplyEditsEvent(this.featureServiceUrl,null,!0);L=await Q(T,I,{...L});if(L?.serviceEdits){I=[];for(const R of L.serviceEdits){({editedFeatures:T}=
R);const S=T?.spatialReference?new O(T.spatialReference):null;I.push({layerId:R.layerId,editedFeatures:{adds:T?.adds?.map(W=>this._createEditedFeature(W,S))||[],updates:T?.updates?.map(W=>({original:this._createEditedFeature(W[0],S),current:this._createEditedFeature(W[1],S)}))||[],deletes:T?.deletes?.map(W=>this._createEditedFeature(W,S))||[],spatialReference:S}})}x.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],
editedFeatures:I,exceededTransferLimit:!1})}return L};D.submitTopologyValidationJob=async function(x,L){if(!x.validateArea)throw new y("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!x.gdbVersion)throw new y("network:undefined-gdb-version","version must be defined");const [{submitValidateNetworkTopologyJob:Q},{default:M}]=await Promise.all([new Promise((R,S)=>f(["../rest/networks/validateNetworkTopology"],R,S)),new Promise((R,
S)=>f(["../rest/networks/support/ValidateNetworkTopologyParameters"],W=>R(A(W)),S))]),I=M.from(x),T=this.networkServiceUrl;x=this.featureServiceUrl?G.emitApplyEditsEvent(this.featureServiceUrl,null,!0):void 0;L=await Q(T,I,{...L});return new P({statusUrl:L,editsResolver:x})};D._createEditedFeature=function(x,L){return new g({attributes:x.attributes,geometry:H.fromJSON({...x.geometry,spatialReference:L})})};D._fetchLayerMetaData=async function(x,L){x=await q(x,{responseType:"json",query:{f:"json"},
...L});this.sourceJSON=x.data;this.read(x.data,{origin:"service"})};D._fetchDataElement=async function(x,L,Q){this.dataElement||(x=await q(`${x}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([L]),f:"json"},...Q}).then(M=>M.data.layerDataElements?.[0]))&&this.read(x,{origin:"service"})};b._createClass(F,[{key:"datasetName",get:function(){return this.dataElement?.name??null}},{key:"owner",get:function(){return this.dataElement?.userIdentity??null}},{key:"schemaGeneration",get:function(){return this.dataElement?.schemaGeneration??
null}},{key:"parsedUrl",get:function(){return l.urlToObject(this.layerUrl)}},{key:"featureServiceUrl",get:function(){return E.parse(this.parsedUrl?.path)?.url?.path??null}},{key:"networkServiceUrl",get:function(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}},{key:"layerId",get:function(){const x=this.parsedUrl&&E.parse(this.parsedUrl.path);return null!=x?x.sublayer:null}},{key:"networkSystemLayers",get:function(){return null}}]);return F}(k.MultiOriginJSONMixin(r));
a.__decorate([n.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],d.prototype,"id",void 0);a.__decorate([n.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],d.prototype,"title",void 0);a.__decorate([n.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],d.prototype,
"layerUrl",void 0);a.__decorate([n.property({type:Object,json:{origins:{service:{read:!0}},read:!1}})],d.prototype,"dataElement",void 0);a.__decorate([n.property({type:z,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],d.prototype,"fullExtent",void 0);a.__decorate([n.property({type:O,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],d.prototype,"spatialReference",void 0);a.__decorate([n.property({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],
d.prototype,"type",void 0);a.__decorate([n.property({readOnly:!0})],d.prototype,"datasetName",null);a.__decorate([n.property({readOnly:!0})],d.prototype,"owner",null);a.__decorate([n.property({readOnly:!0})],d.prototype,"schemaGeneration",null);a.__decorate([n.property({readOnly:!0})],d.prototype,"parsedUrl",null);a.__decorate([n.property({readOnly:!0})],d.prototype,"featureServiceUrl",null);a.__decorate([n.property({readOnly:!0})],d.prototype,"networkServiceUrl",null);a.__decorate([n.property({readOnly:!0})],
d.prototype,"layerId",null);a.__decorate([n.property()],d.prototype,"sourceJSON",void 0);a.__decorate([n.property({readOnly:!0})],d.prototype,"networkSystemLayers",null);return d=a.__decorate([w.subclass("esri.networks.Network")],d)})},"esri/networks/support/TopologyValidationJobInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/has ../../core/jsonMap ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../rest/networks/support/ValidateNetworkTopologyResult".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e,l){d=g.strict()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});l=function(n){function p(v){v=n.call(this,v)||this;v.statusUrl=null;v.status=null;v.submissionTime=null;v.lastUpdatedTime=null;v._timer=void 0;return v}f._inherits(p,n);var t=p.prototype;t.destroy=function(){clearInterval(this._timer)};t.checkJobStatus=async function(v){({data:v}=await a(this.statusUrl,{...v,query:{f:"json"}}));this.read(v);this.editsResolver&&this.editsResolver.resolve({edits:null,
addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0});return this};t.waitForJobCompletion=async function(v={}){const {interval:w=1E3,statusCallback:z}=v;return new Promise((H,G)=>{this._clearTimer();this._timer=setInterval(()=>{this._timer||G(q.createAbortError());this.checkJobStatus().then(E=>{({status:E}=E);this.status=E;switch(E){case "job-succeeded":this._clearTimer();H(this);break;case "job-waiting":case "job-executing":z&&
z(this)}},E=>{this._clearTimer();G(E)})},w)})};t._clearTimer=function(){clearInterval(this._timer);this._timer=void 0};return f._createClass(p)}(l);b.__decorate([y.property()],l.prototype,"editsResolver",void 0);b.__decorate([y.property({type:String,json:{write:!0}})],l.prototype,"statusUrl",void 0);b.__decorate([k.enumeration(d)],l.prototype,"status",void 0);b.__decorate([y.property({type:Date,json:{type:Number,write:{writer:(n,p)=>{p.submissionTime=n?n.getTime():null}}}})],l.prototype,"submissionTime",
void 0);b.__decorate([y.property({type:Date,json:{type:Number,write:{writer:(n,p)=>{p.lastUpdatedTime=n?n.getTime():null}}}})],l.prototype,"lastUpdatedTime",void 0);return l=b.__decorate([e.subclass("esri.networks.support.TopologyValidationJobInfo")],l)})},"esri/rest/networks/support/ValidateNetworkTopologyResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,b,a,d,g,q,y,r){a=function(h){function k(e){e=h.call(this,e)||this;e.moment=null;e.fullUpdate=!1;e.validateErrorsCreated=!1;e.dirtyAreaCount=null;e.exceededTransferLimit=null;e.serviceEdits=null;return e}f._inherits(k,h);return f._createClass(k)}(a.JSONSupport);b.__decorate([d.property({type:Date,json:{type:Number,write:{writer:(h,k)=>{k.moment=h?h.getTime():null}}}})],a.prototype,"moment",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"fullUpdate",void 0);
b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"validateErrorsCreated",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"dirtyAreaCount",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exceededTransferLimit",void 0);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"serviceEdits",void 0);return a=b.__decorate([r.subclass("esri.rest.networks.support.ValidateNetworkTopologyResult")],a)})},"esri/networks/support/utils":function(){define("require exports ../../request ../../core/Error ../../layers/support/featureQueryAll ../../portal/PortalItem ../../rest/support/FeatureSet".split(" "),
function(f,b,a,d,g,q,y){async function r(h,k){return"Utility Network Layer"===h?({default:h}=await new Promise((e,l)=>f(["../UtilityNetwork"],n=>e(Object.freeze(Object.defineProperty({__proto__:null,default:n},Symbol.toStringTag,{value:"Module"}))),l)),new h({layerUrl:k})):null}b.getFeaturesFromLayers=async function(h){const k=h.layers,e=h.layerInfos,l=h.returnGeometry||!1,n=h.outSpatialReference;await Promise.all(k.map(p=>p.load()));return(await Promise.all(k.map(async p=>{var t=e.find(w=>w.layerUrl===
p.parsedUrl?.path);if(!t||!t.objectIds?.length)return{layer:p,featureSet:void 0};const v=p.createQuery();v.returnGeometry=l;v.outFields=t.outFields||["*"];v.outSpatialReference=n;v.gdbVersion=p.gdbVersion;v.objectIds=t.objectIds;t=y.fromJSON(await g.queryAllJSON(p,v));return{layer:p,featureSet:t}}))).filter(p=>void 0!==p.featureSet)};b.getObjectIdsFromElements=function(h,k){const e=[],l=new Map;for(const p of k){k=h.getLayerIdBySourceId(p.networkSourceId);if(null==k)continue;let t=l.get(k);void 0===
t&&(t=[]);t.push(p.objectId);l.set(k,t)}const n=h.featureServiceUrl;l.forEach((p,t)=>e.push({layerUrl:`${n}/${t}`,objectIds:p}));return e};b.networkFromPortalItem=async function(h){h="portalItem"in h?h:{portalItem:h};!h.portalItem||h.portalItem instanceof q||(h={...h,portalItem:new q(h.portalItem)});h=h.portalItem;await h.load();if("Feature Service"!==h.type)throw new d("portal:unknown-item-type","Unknown item type '${type}'",{type:h.type});h=h.url;var k=await a(h,{responseType:"json",query:{f:"json"}});
return k.data.type&&k.data.type.includes("Network Layer")?r(k.data.type,h):k.data.layers&&(k=k.data.layers.find(e=>e.type.includes("Network Layer")))?r(k.type,`${h}/${k.id}`):null};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/networks/support/QueryNamedTraceConfigurationsParameters":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,b,a,d,g,q,y,r){a=function(h){function k(e){e=h.call(this,e)||this;e.globalIds=[];e.creators=[];e.tags=[];e.names=[];return e}f._inherits(k,h);return f._createClass(k)}(a.JSONSupport);b.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"globalIds",void 0);b.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"creators",void 0);b.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"tags",void 0);b.__decorate([d.property({type:[String],
json:{write:!0}})],a.prototype,"names",void 0);return a=b.__decorate([r.subclass("esri.rest.networks.support.QueryNamedTraceConfigurationsParameters")],a)})},"esri/networks/RulesTable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/JSONSupport ../core/Loadable ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./support/typeUtils".split(" "),function(f,
b,a,d,g,q,y,r,h,k,e){d=function(l){function n(t){t=l.call(this,t)||this;t.request=a;return t}f._inherits(n,l);var p=n.prototype;p.initialize=function(){};p.load=async function(t){t=this.layer.load(t).then(()=>this._initializeRulesTable());this.addResolvingPromise(t);return this};p.getFeatureSQL=function(t,v){var w=t.layerId.toString(),z=t.fieldsIndex?.normalizeFieldName("assetGroup");t=t.fieldsIndex?.normalizeFieldName("assetType");z=z?v.attributes[z]:null;v=t?v.attributes[t]:null;if(w=this.rulesHash[w])if(w=
w.assetGroupHash[z])return w.assetTypeHash[v]||null;return null};p._initializeRulesTable=async function(){const t={};let v;var w=v||(v={});w[w.from=0]="from";w[w.to=1]="to";w[w.via=2]="via";w=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];for(const N of this.rules)if(N.ruleType===
e.RuleType.RTJunctionJunctionConnectivity||N.ruleType===e.RuleType.RTJunctionEdgeConnectivity||N.ruleType===e.RuleType.RTEdgeJunctionEdgeConnectivity){var z=[[v.from,v.to],[v.to,v.from]];N.ruleType===e.RuleType.RTEdgeJunctionEdgeConnectivity&&(z=[[v.from,v.via],[v.via,v.from],[v.to,v.via],[v.via,v.to]]);for(const U of z){z=U.shift();var H=U.shift(),G=!1;switch(N.ruleType){case e.RuleType.RTEdgeJunctionEdgeConnectivity:G=z===v.from||z===v.to;break;case e.RuleType.RTJunctionEdgeConnectivity:G=z===v.to}var E=
w[z];z=N[E.networkSourceId]?.layerId.toString()??"";const O=N[E.assetGroupId]?.assetGroupCode?.toString();E=N[E.assetTypeId]?.assetTypeCode?.toString();var P=w[H];H=N[P.networkSourceId]?.layerId.toString()??"";const A=N[P.assetGroupId]?.assetGroupCode?.toString();P=N[P.assetTypeId];const J=P?.assetTypeCode?.toString(),F=t[z]??{assetGroupHash:{}};if(!(O&&E&&A&&J))continue;const D=F.assetGroupHash[O]??{assetTypeHash:{}},x=D.assetTypeHash[E]??{};x[H]=x[H]??{};G&&(x[z]=x[z]??{},G=`(assetgroup = ${O} AND assettype = ${E})`,
x[z].anyVertex=x[z].anyVertex?`${x[z].anyVertex}`:`${G}`,"esriNECPEndVertex"===P?.connectivityPolicy&&(x[z].endVertex=x[z]?.endVertex?`${x[z].endVertex}`:`${G}`));G=`(assetgroup = ${A} AND assettype = ${J})`;x[H].anyVertex=x[H]?.anyVertex?`${x[H].anyVertex} OR ${G}`:`${G}`;"esriNECPEndVertex"===P?.connectivityPolicy&&(x[H].endVertex=x[H]?.endVertex?`${x[H].endVertex} OR ${G}`:`${G}`);D.assetTypeHash[E]=x;F.assetGroupHash[O]=D;t[z]=F}}this.rulesHash=t};return f._createClass(n)}(d.JSONSupportMixin(g));
b.__decorate([q.property({constructOnly:!0})],d.prototype,"layer",void 0);b.__decorate([q.property({constructOnly:!0})],d.prototype,"rules",void 0);b.__decorate([q.property()],d.prototype,"rulesHash",void 0);b.__decorate([q.property({constructOnly:!0})],d.prototype,"request",void 0);return d=b.__decorate([k.subclass("esri.networks.RulesTable")],d)})},"esri/networks/support/typeUtils":function(){define(["exports","../../core/jsonMap"],function(f,b){f.RuleType=void 0;var a=f.RuleType||(f.RuleType={});
a[a.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity";a[a.RTContainment=2]="RTContainment";a[a.RTAttachment=3]="RTAttachment";a[a.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity";a[a.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity";a=new b.JSONMap({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});const d=
new b.JSONMap({connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});b=new b.JSONMap({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});f.associationTypeKebabDict=d;f.traceTypeKebabDict=a;f.validationTypeKebabDict=b;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},
"esri/networks/support/NamedTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./TraceConfiguration ./typeUtils ./UNTraceConfiguration".split(" "),function(f,b,a,d,g,q,y,r,h,k,e,l){a=function(n){function p(t){t=
n.call(this,t)||this;t.globalId=null;t.title=null;t.traceConfiguration=null;t.creationDate=null;t.creator=null;t.description=null;t.minStartingPoints=null;t.resultTypes=[];t.tags=[];t.traceType=null;return t}f._inherits(p,n);p.prototype.readTraceConfiguration=function(t,v){return void 0!==t.tierName?l.fromJSON(t):k.fromJSON(t)};return f._createClass(p)}(a.MultiOriginJSONSupport);b.__decorate([d.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},
service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],a.prototype,"globalId",void 0);b.__decorate([d.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],a.prototype,"title",void 0);b.__decorate([d.property({type:k,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"traceConfiguration",void 0);b.__decorate([r.reader("service",
"traceConfiguration")],a.prototype,"readTraceConfiguration",null);b.__decorate([d.property({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creationDate",void 0);b.__decorate([d.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creator",void 0);b.__decorate([d.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"description",void 0);b.__decorate([d.property({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},
write:{target:"minNumStartingPoints"}}},read:!1}})],a.prototype,"minStartingPoints",void 0);b.__decorate([d.property({json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"resultTypes",void 0);b.__decorate([d.property({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"tags",void 0);b.__decorate([d.property({type:e.traceTypeKebabDict.apiValues,json:{type:e.traceTypeKebabDict.jsonValues,origins:{service:{read:e.traceTypeKebabDict.read,write:e.traceTypeKebabDict.write}},
read:!1}})],a.prototype,"traceType",void 0);return a=b.__decorate([h.subclass("esri.networks.support.NamedTraceConfiguration")],a)})},"esri/networks/support/TraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,b,a,d,g,q,y,r){a=function(h){function k(e){e=
h.call(this,e)||this;e.conditionBarriers=[];e.outputConditions=[];e.functions=[];e.functionBarriers=[];e.traversabilityScope=null;e.shortestPathNetworkAttributeName=null;e.includeBarriers=null;e.validateConsistency=null;e.ignoreBarriersAtStartingPoints=null;return e}f._inherits(k,h);return f._createClass(k)}(a.JSONSupport);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"conditionBarriers",void 0);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"outputConditions",
void 0);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"functions",void 0);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"functionBarriers",void 0);b.__decorate([d.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"traversabilityScope",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"shortestPathNetworkAttributeName",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],
a.prototype,"includeBarriers",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"validateConsistency",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"ignoreBarriersAtStartingPoints",void 0);return a=b.__decorate([r.subclass("esri.networks.support.TraceConfiguration")],a)})},"esri/networks/support/UNTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./TraceConfiguration".split(" "),
function(f,b,a,d,g,q,y,r){d=function(h){function k(e){e=h.call(this,e)||this;e.filterBarriers=[];e.arcadeExpressionBarrier=null;e.domainNetworkName=null;e.filterBitsetNetworkAttributeName=null;e.filterFunctionBarriers=[];e.filterScope=null;e.includeContainers=null;e.includeContent=null;e.includeIsolated=null;e.includeStructures=null;e.allowIndeterminateFlow=null;e.includeUpToFirstSpatialContainer=null;e.nearestNeighbor=null;e.outputFilterCategories=[];e.outputFilters=[];e.propagators=[];e.subnetworkName=
null;e.targetTierName=null;e.diagramTemplateName=null;e.tierName=null;e.validateLocatability=null;return e}f._inherits(k,h);return f._createClass(k)}(r);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"filterBarriers",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"arcadeExpressionBarrier",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"domainNetworkName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],
d.prototype,"filterBitsetNetworkAttributeName",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"filterFunctionBarriers",void 0);b.__decorate([a.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],d.prototype,"filterScope",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeContainers",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeContent",void 0);b.__decorate([a.property({type:Boolean,
json:{write:!0}})],d.prototype,"includeIsolated",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeStructures",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"allowIndeterminateFlow",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeUpToFirstSpatialContainer",void 0);b.__decorate([a.property({type:Object,json:{write:!0}})],d.prototype,"nearestNeighbor",void 0);b.__decorate([a.property({type:[Object],
json:{write:!0}})],d.prototype,"outputFilterCategories",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"outputFilters",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"propagators",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"subnetworkName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"targetTierName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,
"diagramTemplateName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"tierName",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"validateLocatability",void 0);return d=b.__decorate([y.subclass("esri.networks.support.UNTraceConfiguration")],d)})},"esri/networks/support/NetworkSystemLayers":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,b,a,d,g,q,y,r){a=function(h){function k(e){e=h.call(this,e)||this;e.rulesTableId=null;e.rulesTableUrl=null;e.subnetworksTableId=null;e.subnetworksTableUrl=null;e.dirtyAreasLayerId=null;e.dirtyAreasLayerUrl=null;return e}f._inherits(k,h);return f._createClass(k)}(a);b.__decorate([d.property({constructOnly:!0})],a.prototype,"rulesTableId",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"rulesTableUrl",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"subnetworksTableId",
void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"subnetworksTableUrl",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerId",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerUrl",void 0);return a=b.__decorate([r.subclass("esri.networks.support.NetworkSystemLayers")],a)})},"esri/networks/support/TerminalConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./Terminal".split(" "),
function(f,b,a,d,g,q,y,r,h,k){a=new a.JSONMap({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});d=function(e){function l(n){n=e.call(this,n)||this;n.defaultConfiguration=null;n.id=null;n.name=null;n.terminals=[];n.traversabilityModel=null;return n}f._inherits(l,e);return f._createClass(l)}(d.JSONSupport);b.__decorate([g.property({type:String,json:{write:!0}})],d.prototype,"defaultConfiguration",void 0);b.__decorate([g.property({type:Number,json:{read:{source:"terminalConfigurationId"},
write:{target:"terminalConfigurationId"}}})],d.prototype,"id",void 0);b.__decorate([g.property({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],d.prototype,"name",void 0);b.__decorate([g.property({type:[k],json:{write:!0}})],d.prototype,"terminals",void 0);b.__decorate([g.property({type:a.apiValues,json:{type:a.jsonValues,read:a.read,write:a.write}})],d.prototype,"traversabilityModel",void 0);return d=b.__decorate([h.subclass("esri.networks.support.TerminalConfiguration")],
d)})},"esri/networks/support/Terminal":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,b,a,d,g,q,y,r){a=function(h){function k(e){e=h.call(this,e)||this;e.id=null;e.name=null;return e}f._inherits(k,h);return f._createClass(k)}(a.JSONSupport);b.__decorate([d.property({type:Number,
json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],a.prototype,"id",void 0);b.__decorate([d.property({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],a.prototype,"name",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"isUpstreamTerminal",void 0);return a=b.__decorate([r.subclass("esri.networks.support.Terminal")],a)})},"esri/networks/support/TraceJobInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/has ../../core/jsonMap ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../rest/networks/support/TraceResult".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e,l){d=g.strict()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});l=function(n){function p(v){v=n.call(this,v)||this;v.statusUrl=null;v.status=null;v.submissionTime=null;v.lastUpdatedTime=null;v._timer=void 0;return v}f._inherits(p,n);var t=p.prototype;t.destroy=function(){clearInterval(this._timer)};t.checkJobStatus=async function(v){({data:v}=await a(this.statusUrl,{...v,query:{f:"json"}}));this.read(v.traceResults?{...v.traceResults,...v}:
v);return this};t.waitForJobCompletion=async function(v={}){const {interval:w=1E3,statusCallback:z}=v;return new Promise((H,G)=>{this._clearTimer();this._timer=setInterval(()=>{this._timer||G(q.createAbortError());this.checkJobStatus().then(E=>{({status:E}=E);this.status=E;switch(E){case "job-succeeded":this._clearTimer();H(this);break;case "job-waiting":case "job-executing":z&&z(this)}},E=>{this._clearTimer();G(E)})},w)})};t._clearTimer=function(){clearInterval(this._timer);this._timer=void 0};return f._createClass(p)}(l);
b.__decorate([y.property({type:String,json:{write:!0}})],l.prototype,"statusUrl",void 0);b.__decorate([k.enumeration(d)],l.prototype,"status",void 0);b.__decorate([y.property({type:Date,json:{type:Number,write:{writer:(n,p)=>{p.submissionTime=n?n.getTime():null}}}})],l.prototype,"submissionTime",void 0);b.__decorate([y.property({type:Date,json:{type:Number,write:{writer:(n,p)=>{p.lastUpdatedTime=n?n.getTime():null}}}})],l.prototype,"lastUpdatedTime",void 0);return l=b.__decorate([e.subclass("esri.networks.support.TraceJobInfo")],
l)})},"esri/rest/networks/support/TraceResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./AggregatedGeometry ./FunctionResult ./NetworkElement".split(" "),function(f,b,a,d,g,q,y,r,h,k,e){a=function(l){function n(p){p=l.call(this,p)||this;p.aggregatedGeometry=
null;p.elements=null;p.globalFunctionResults=null;p.kFeaturesForKNNFound=!1;p.startingPointsIgnored=!1;p.warnings=null;return p}f._inherits(n,l);return f._createClass(n)}(a.JSONSupport);b.__decorate([d.property({type:h,json:{write:!0},readOnly:!0})],a.prototype,"aggregatedGeometry",void 0);b.__decorate([d.property({type:[e],json:{write:!0},readOnly:!0})],a.prototype,"elements",void 0);b.__decorate([d.property({type:[k],json:{write:!0},readOnly:!0})],a.prototype,"globalFunctionResults",void 0);b.__decorate([d.property({type:Boolean,
json:{write:!0},readOnly:!0})],a.prototype,"kFeaturesForKNNFound",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0},readOnly:!0})],a.prototype,"startingPointsIgnored",void 0);b.__decorate([d.property({type:[String],json:{write:!0},readOnly:!0})],a.prototype,"warnings",void 0);return a=b.__decorate([r.subclass("esri.rest.networks.support.TraceResult")],a)})},"esri/rest/networks/support/AggregatedGeometry":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../geometry/Multipoint ../../../geometry/Polygon ../../../geometry/Polyline".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e){a=function(l){function n(p){p=l.call(this,p)||this;p.line=null;p.multipoint=null;p.polygon=null;return p}f._inherits(n,l);return f._createClass(n)}(a.JSONSupport);b.__decorate([d.property({type:e,json:{write:!0},readOnly:!0})],a.prototype,"line",void 0);b.__decorate([d.property({type:h,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],a.prototype,"multipoint",void 0);b.__decorate([d.property({type:k,json:{write:!0},readOnly:!0})],a.prototype,"polygon",
void 0);return a=b.__decorate([r.subclass("esri.rest.networks.support.AggregatedGeometry")],a)})},"esri/rest/networks/support/FunctionResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),function(f,b,a,d,g,q,y,r){a=function(h){function k(e){e=
h.call(this,e)||this;e.functionType=null;e.networkAttributeName=null;e.result=null;return e}f._inherits(k,h);return f._createClass(k)}(a.JSONSupport);b.__decorate([d.property({type:"add subtract average count min max".split(" "),json:{write:!0},readOnly:!0})],a.prototype,"functionType",void 0);b.__decorate([d.property({type:String,json:{write:!0},readOnly:!0})],a.prototype,"networkAttributeName",void 0);b.__decorate([d.property({type:Number,json:{write:!0},readOnly:!0})],a.prototype,"result",void 0);
return a=b.__decorate([r.subclass("esri.rest.networks.support.FunctionResult")],a)})},"esri/rest/networks/support/NetworkElement":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),function(f,b,a,d,g,q,y,r){a=function(h){function k(e){e=h.call(this,
e)||this;e.assetGroupCode=null;e.assetTypeCode=null;e.globalId=null;e.networkSourceId=null;e.objectId=null;e.positionFrom=null;e.positionTo=null;e.terminalId=null;return e}f._inherits(k,h);return f._createClass(k)}(a.JSONSupport);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"assetGroupCode",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"assetTypeCode",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"globalId",void 0);
b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"networkSourceId",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"objectId",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"positionFrom",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"positionTo",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"terminalId",void 0);return a=b.__decorate([r.subclass("esri.rest.networks.support.NetworkElement")],
a)})},"esri/rest/geometryService/project":function(){define("exports ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),function(f,b,a,d,g,q,y){const r=a.ensureType(y);f.project=async function(h,k,e){k=r(k);h=g.parseUrl(h);const l={...h.query,f:"json",...k.toJSON()},n=k.outSpatialReference,p=d.getJsonType(k.geometries[0]);k=g.asValidOptions(l,e);return b(h.path+"/project",k).then(({data:{geometries:t}})=>q.decodeGeometries(t,
p,n))};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(f,b,a,d,g,q,y,r,h){a=function(k){function e(l){l=k.call(this,l)||
this;l.geometries=[];l.outSpatialReference=null;l.transformation=null;l.transformForward=null;return l}f._inherits(e,k);e.prototype.toJSON=function(){const l=this.geometries.map(t=>t.toJSON()),n=this.geometries[0],p={};p.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());p.inSR=n.spatialReference.wkid||JSON.stringify(n.spatialReference.toJSON());p.geometries=JSON.stringify({geometryType:h.getJsonType(n),geometries:l});this.transformation&&(p.transformation=this.transformation.wkid||
JSON.stringify(this.transformation));null!=this.transformForward&&(p.transformForward=this.transformForward);return p};return f._createClass(e)}(a.JSONSupport);b.__decorate([d.property()],a.prototype,"geometries",void 0);b.__decorate([d.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([d.property()],a.prototype,"transformation",void 0);b.__decorate([d.property()],a.prototype,"transformForward",void 0);return a=b.__decorate([r.subclass("esri.rest.support.ProjectParameters")],
a)})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),function(f,b,a,d,g,q,y,r,h,k,e){a=function(l){function n(p){p=l.call(this,p)||this;p.levelLayer=null;p.facilityLayer=
null;p.siteLayer=null;return p}f._inherits(n,l);return f._createClass(n)}(a.JSONSupport);b.__decorate([d.property({type:k,json:{write:!0}})],a.prototype,"levelLayer",void 0);b.__decorate([d.property({type:h,json:{write:!0}})],a.prototype,"facilityLayer",void 0);b.__decorate([d.property({type:e,json:{write:!0}})],a.prototype,"siteLayer",void 0);return a=b.__decorate([r.subclass("esri.support.MapFloorInfo")],a)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,b,a,d,g,q,y,r){a=function(h){function k(e){e=h.call(this,e)||this;e.facilityIdField=null;e.layerId=null;e.nameField=null;e.siteIdField=null;e.sublayerId=null;return e}f._inherits(k,h);return f._createClass(k)}(a.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);
b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([d.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([r.subclass("esri.layers.support.FacilityLayerInfo")],a)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,b,a,d,g,q,y,r){a=function(h){function k(e){e=h.call(this,e)||this;e.facilityIdField=null;e.layerId=null;e.levelIdField=null;e.levelNumberField=null;e.longNameField=null;e.shortNameField=null;e.sublayerId=null;e.verticalOrderField=null;return e}f._inherits(k,h);return f._createClass(k)}(a.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([d.property({type:String,
json:{write:!0}})],a.prototype,"levelIdField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"levelNumberField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"longNameField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"shortNameField",void 0);b.__decorate([d.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",
void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"verticalOrderField",void 0);return a=b.__decorate([r.subclass("esri.layers.support.LevelLayerInfo")],a)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,b,a,d,g,q,y,r){a=function(h){function k(e){e=h.call(this,e)||this;e.layerId=null;e.nameField=null;e.siteIdField=null;e.sublayerId=null;return e}f._inherits(k,h);return f._createClass(k)}(a.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([d.property({type:Number,
json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([r.subclass("esri.layers.support.SiteLayerInfo")],a)})},"esri/webdoc/GeotriggersInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./geotriggersInfo/support/geotriggerTypes".split(" "),
function(f,b,a,d,g,q,y,r,h,k){a=function(e){function l(n){n=e.call(this,n)||this;n.geotriggers=null;return n}f._inherits(l,e);return f._createClass(l)}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({types:[k.types],json:{write:{isRequired:!0}}})],a.prototype,"geotriggers",void 0);return a=b.__decorate([h.subclass("esri.webdoc.GeotriggersInfo")],a)})},"esri/webdoc/geotriggersInfo/support/geotriggerTypes":function(){define(["exports","../FenceGeotrigger","../Geotrigger"],function(f,b,a){f.types=
{base:a,key:"type",typeMap:{fence:b}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/geotriggersInfo/FenceGeotrigger":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./DeviceLocationFeed ./FeatureFenceParameters ./Geotrigger ./GeotriggerNotificationOptions ./support/typeUtils".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e,l,n){d=function(p){function t(v){v=p.call(this,v)||this;v.enterExitRule="enter-contains-and-exit-does-not-intersect";v.feed=null;v.feedAccuracyMode="use-geometry";v.fenceNotificationRule=null;v.fenceParameters=null;v.name=null;v.notificationOptions=null;v.type="fence";return v}f._inherits(t,p);return f._createClass(t)}(e);b.__decorate([y.enumeration(n.enterExitRuleKebabDict)],d.prototype,"enterExitRule",void 0);b.__decorate([a.property({type:h,json:{write:{isRequired:!0}}})],
d.prototype,"feed",void 0);b.__decorate([y.enumeration(n.feedAccuracyModeKebabDict)],d.prototype,"feedAccuracyMode",void 0);b.__decorate([a.property({type:n.fenceNotificationRuleKebabDict.apiValues,json:{type:n.fenceNotificationRuleKebabDict.jsonValues,read:n.fenceNotificationRuleKebabDict.read,write:{writer:n.fenceNotificationRuleKebabDict.write,isRequired:!0}}})],d.prototype,"fenceNotificationRule",void 0);b.__decorate([a.property({type:k,json:{write:{isRequired:!0}}})],d.prototype,"fenceParameters",
void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);b.__decorate([a.property({type:l,json:{write:!0}})],d.prototype,"notificationOptions",void 0);b.__decorate([y.enumeration({fence:"fence"},{readOnly:!0})],d.prototype,"type",void 0);return d=b.__decorate([r.subclass("esri.webdoc.geotriggersInfo.FenceGeotrigger")],d)})},"esri/webdoc/geotriggersInfo/DeviceLocationFeed":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e){d=new d.JSONMap({deviceLocation:"device-location"});a=function(l){function n(p){p=l.call(this,p)||this;p.filterExpression=null;p.type="device-location";return p}f._inherits(n,l);return f._createClass(n)}(a.ClonableMixin(g.JSONSupport));b.__decorate([q.property({type:e,json:{write:!0}})],a.prototype,"filterExpression",void 0);b.__decorate([q.property({type:d.apiValues,readOnly:!0,json:{type:d.jsonValues,read:d.read,write:d.write}})],a.prototype,"type",void 0);return a=
b.__decorate([k.subclass("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],a)})},"esri/webdoc/geotriggersInfo/ExpressionInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,b,a,d,g,q,y,r,h){a=function(k){function e(l){l=k.call(this,
l)||this;l.expression=null;l.returnType="string";l.title=null;return l}f._inherits(e,k);return f._createClass(e)}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"expression",void 0);b.__decorate([g.property({type:["number","string"],json:{write:!0}})],a.prototype,"returnType",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"title",void 0);return a=b.__decorate([h.subclass("esri.webdoc.geotriggersInfo.ExpressionInfo")],
a)})},"esri/webdoc/geotriggersInfo/FeatureFenceParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./FeatureFilter ./FeatureLayerSource".split(" "),function(f,b,a,d,g,q,y,r,h,k,e,l){a=function(n){function p(t){t=
n.call(this,t)||this;t.fenceSource=null;t.filter=null;t.bufferDistance=null;t.type="features";return t}f._inherits(p,n);return f._createClass(p)}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:l,json:{write:{isRequired:!0}}})],a.prototype,"fenceSource",void 0);b.__decorate([g.property({type:e,json:{write:!0}})],a.prototype,"filter",void 0);b.__decorate([g.property({type:Number,json:{write:!0}})],a.prototype,"bufferDistance",void 0);b.__decorate([h.enumeration({features:"features"},
{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([k.subclass("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],a)})},"esri/webdoc/geotriggersInfo/FeatureFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e){d=function(l){function n(p){p=l.call(this,p)||this;p.geometry=null;p.where=null;return p}f._inherits(n,l);return f._createClass(n)}(d.ClonableMixin(g.JSONSupport));b.__decorate([q.property({types:a.geometryTypes,json:{read:e.fromJSON,write:!0}})],d.prototype,"geometry",void 0);b.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"where",void 0);return d=b.__decorate([k.subclass("esri.webdoc.geotriggersInfo.FeatureFilter")],d)})},"esri/webdoc/geotriggersInfo/FeatureLayerSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,b,a,d,g,q,y,r,h,k){a=function(e){function l(n){n=e.call(this,n)||this;n.layerId=null;n.layerUrl=null;n.type="feature-layer";return n}f._inherits(l,e);return f._createClass(l)}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerUrl}}}}})],a.prototype,"layerId",void 0);b.__decorate([g.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerId}}}}})],a.prototype,"layerUrl",void 0);
b.__decorate([h.enumeration({featureLayer:"feature-layer"},{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([k.subclass("esri.webdoc.geotriggersInfo.FeatureLayerSource")],a)})},"esri/webdoc/geotriggersInfo/Geotrigger":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e){a=function(l){function n(p){p=l.call(this,p)||this;p.type="fence";return p}f._inherits(n,l);return f._createClass(n)}(a.ClonableMixin(d.JSONSupport));b.__decorate([k.enumeration({fence:"fence"},{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([e.subclass("esri.webdoc.geotriggersInfo.Geotrigger")],a)})},"esri/webdoc/geotriggersInfo/GeotriggerNotificationOptions":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(f,b,a,d,g,q,y,r,h,k){a=function(e){function l(n){n=e.call(this,n)||this;n.expressionInfo=null;n.requestedActions=null;return n}f._inherits(l,e);return f._createClass(l)}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:k,json:{write:!0}})],a.prototype,"expressionInfo",void 0);b.__decorate([g.property({type:[String],json:{write:!0}})],a.prototype,"requestedActions",void 0);return a=b.__decorate([h.subclass("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],a)})},"esri/webdoc/geotriggersInfo/support/typeUtils":function(){define(["exports",
"../../../core/jsonMap"],function(f,b){const a=new b.JSONMap({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),d=new b.JSONMap({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"});b=new b.JSONMap({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});f.enterExitRuleKebabDict=
a;f.feedAccuracyModeKebabDict=d;f.fenceNotificationRuleKebabDict=b;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/RangeInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),function(f,b,a,d,g,q,y){var r;a=r=function(h){function k(e){e=h.call(this,e)||this;e.activeRange=null;e.currentRangeExtent=
null;e.fullRangeExtent=null;return e}f._inherits(k,h);k.prototype.clone=function(){return new r(d.clone({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))};return f._createClass(k)}(a.JSONSupport);b.__decorate([g.property({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],a.prototype,"activeRange",void 0);b.__decorate([g.property({type:[Number],json:{write:!0}})],a.prototype,
"currentRangeExtent",void 0);b.__decorate([g.property({type:[Number],json:{write:!0}})],a.prototype,"fullRangeExtent",void 0);return a=r=b.__decorate([y.subclass("esri.webdoc.RangeInfo")],a)})},"esri/webdoc/Widgets":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./widgets/FloorFilter ./widgets/Range ./widgets/TimeSlider".split(" "),
function(f,b,a,d,g,q,y,r,h,k){var e;a=e=function(l){function n(p){p=l.call(this,p)||this;p.range=null;p.timeSlider=null;p.floorFilter=null;return p}f._inherits(n,l);n.prototype.clone=function(){return new e(d.clone({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))};return f._createClass(n)}(a.JSONSupport);b.__decorate([g.property({type:h,json:{write:!0}})],a.prototype,"range",void 0);b.__decorate([g.property({type:k,json:{write:!0}})],a.prototype,"timeSlider",void 0);b.__decorate([g.property({type:r,
json:{write:!0}})],a.prototype,"floorFilter",void 0);return a=e=b.__decorate([y.subclass("esri.webdoc.Widgets")],a)})},"esri/webdoc/widgets/FloorFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(f,b,a,d,g,q,y){var r;a=r=function(h){function k(e){e=h.call(this,e)||this;e.enabled=
!1;e.longNames=!1;e.minimized=!1;e.pinnedLevels=!1;e.site=null;e.facility=null;e.level=null;return e}f._inherits(k,h);k.prototype.clone=function(){return new r(d.clone({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))};return f._createClass(k)}(a.JSONSupport);b.__decorate([g.property({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],a.prototype,"enabled",void 0);b.__decorate([g.property({type:Boolean,
json:{read:{source:"longNames"},write:{target:"longNames"}}})],a.prototype,"longNames",void 0);b.__decorate([g.property({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],a.prototype,"minimized",void 0);b.__decorate([g.property({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],a.prototype,"pinnedLevels",void 0);b.__decorate([g.property({type:String,json:{read:{source:"site"},write:{target:"site"}}})],a.prototype,"site",void 0);b.__decorate([g.property({type:String,
json:{read:{source:"facility"},write:{target:"facility"}}})],a.prototype,"facility",void 0);b.__decorate([g.property({type:String,json:{read:{source:"level"},write:{target:"level"}}})],a.prototype,"level",void 0);return a=r=b.__decorate([y.subclass("esri.webdoc.widgets.FloorFilter")],a)})},"esri/webdoc/widgets/Range":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,b,a,d,g,q,y,r,h){var k;a=new a.JSONMap({slider:"slider",picker:"picker"});d=k=function(e){function l(n){n=e.call(this,n)||this;n.interactionMode=null;n.numStops=null;n.stopInterval=null;return n}f._inherits(l,e);l.prototype.clone=function(){return new k({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})};return f._createClass(l)}(d.JSONSupport);b.__decorate([g.property({type:a.apiValues,nonNullable:!0,json:{type:a.jsonValues,default:null,read:{reader:a.read},
write:{isRequired:!0,writer:a.write}}})],d.prototype,"interactionMode",void 0);b.__decorate([g.property({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],d.prototype,"numStops",void 0);b.__decorate([g.property({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],d.prototype,"stopInterval",void 0);return d=k=b.__decorate([h.subclass("esri.webdoc.widgets.Range")],
d)})},"esri/webdoc/widgets/TimeSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/object ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(f,b,a,d,g,q,y,r,h,k,e,l){var n;g=n=function(p){function t(w){w=
p.call(this,w)||this;w.currentTimeExtent=null;w.fullTimeExtent=null;w.loop=!1;w.numStops=null;w.numThumbs=null;w.stopDelay=null;w.stopInterval=null;w.stops=null;return w}f._inherits(t,p);var v=t.prototype;v.readCurrentTimeExtent=function(w){if(w)return new a({start:null!=w[0]?new Date(w[0]):null,end:null!=w[1]?new Date(w[1]):null})};v.writeCurrentTimeExtent=function(w,z,H){w&&y.setDeepValue(H,[null!=w.start?w.start.getTime():null,null!=w.end?w.end.getTime():null],z)};v.readFullTimeExtent=function(w,
z){if(w=z.properties)return new a({start:null!=w.startTime?new Date(w.startTime):null,end:null!=w.endTime?new Date(w.endTime):null})};v.writeFullTimeExtent=function(w,z){if(w){z=z.properties=z.properties||{};var H=w.end;w=w.start;H&&(z.endTime=null!=H?H.getTime():null);w&&(z.startTime=null!=w?w.getTime():null)}};v.readStopInterval=function(w,z,H){return w?d.fromJSON({value:w.interval,unit:w.units},H):null};v.writeStopInterval=function(w,z,H,G){w&&(w=w.toJSON(G),y.setDeepValue(H,{interval:w.value,
units:w.unit},z))};v.readStops=function(w){return w&&w.length?w.map(z=>new Date(z)):null};v.writeStops=function(w,z,H){w&&w.length&&y.setDeepValue(H,w.map(G=>G.getTime()),z)};v.clone=function(){return new n(q.clone({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))};return f._createClass(t)}(g.JSONSupport);b.__decorate([r.property({type:a,
json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],g.prototype,"currentTimeExtent",void 0);b.__decorate([k.reader("currentTimeExtent")],g.prototype,"readCurrentTimeExtent",null);b.__decorate([l.writer("currentTimeExtent")],g.prototype,"writeCurrentTimeExtent",null);b.__decorate([r.property({type:a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],
g.prototype,"fullTimeExtent",void 0);b.__decorate([k.reader("fullTimeExtent")],g.prototype,"readFullTimeExtent",null);b.__decorate([l.writer("fullTimeExtent")],g.prototype,"writeFullTimeExtent",null);b.__decorate([r.property({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],g.prototype,"loop",void 0);b.__decorate([r.property({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var p=
!!this.stops?.length;p=!(this.stopInterval||p);return{enabled:p,isRequired:p}}}}})],g.prototype,"numStops",void 0);b.__decorate([r.property({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],g.prototype,"numThumbs",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],g.prototype,"stopDelay",void 0);b.__decorate([r.property({type:d,
json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){const p=!!this.stops?.length;return{enabled:!p,isRequired:!(null!=this.numStops||p)}}}}})],g.prototype,"stopInterval",void 0);b.__decorate([k.reader("stopInterval")],g.prototype,"readStopInterval",null);b.__decorate([l.writer("stopInterval")],g.prototype,"writeStopInterval",null);b.__decorate([r.property({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",
overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],g.prototype,"stops",void 0);b.__decorate([k.reader("stops")],g.prototype,"readStops",null);b.__decorate([l.writer("stops")],g.prototype,"writeStops",null);return g=n=b.__decorate([e.subclass("esri.webdoc.widgets.TimeSlider")],g)})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(f){const b={width:600,height:400};f.getOptimalThumbnailSize=function(a,d){d=d||b;let {width:g,height:q}=d;d=g/q;
1.5>d?q=g/1.5:1.5<d&&(g=1.5*q);g>a.width&&(q*=a.width/g,g=a.width);q>a.height&&(g*=a.height/q,q=a.height);return{width:Math.round(g),height:Math.round(q)}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(f,b,a,d,g,q,y,r){var h;a=h=function(k){function e(l){l=k.call(this,l)||this;l.editing=null;l.offline=null;l.viewing=null;return l}f._inherits(e,k);e.prototype.clone=function(){return new h(d.clone({editing:this.editing,offline:this.offline,viewing:this.viewing}))};return f._createClass(e)}(a.JSONSupport);b.__decorate([g.property({json:{write:!0}})],a.prototype,"editing",void 0);b.__decorate([g.property({json:{write:!0}})],a.prototype,"offline",void 0);b.__decorate([g.property({type:r,json:{write:!0}})],
a.prototype,"viewing",void 0);return a=h=b.__decorate([y.subclass("esri.webmap.ApplicationProperties")],a)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),function(f,b,a,d,g,q,y,r){var h;a=h=function(k){function e(l){l=k.call(this,
l)||this;l.search=null;return l}f._inherits(e,k);e.prototype.clone=function(){return new h(d.clone({search:this.search}))};return f._createClass(e)}(a.JSONSupport);b.__decorate([g.property({type:r,json:{write:!0}})],a.prototype,"search",void 0);return a=h=b.__decorate([y.subclass("esri.webdoc.applicationProperties.Viewing")],a)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e,l,n){var p;const t=a.ofType(l),v=a.ofType(n);a=p=function(w){function z(G){G=w.call(this,G)||this;G.addressSearchEnabled=!0;G.enabled=!0;G.hintText=null;G.layers=new t;G.tables=new v;return G}f._inherits(z,w);var H=z.prototype;H.readAddressSearchEnabled=function(G){return!G};H.writeAddressSearchEnabled=function(G,E,P){E[P]=!G};H.clone=function(){return new p(g.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,
tables:this.tables}))};return f._createClass(z)}(d.JSONSupport);b.__decorate([q.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"addressSearchEnabled",void 0);b.__decorate([r.reader("addressSearchEnabled")],a.prototype,"readAddressSearchEnabled",null);b.__decorate([k.writer("addressSearchEnabled")],a.prototype,"writeAddressSearchEnabled",null);b.__decorate([q.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],a.prototype,"enabled",void 0);b.__decorate([q.property({type:String,json:{write:!0}})],a.prototype,"hintText",void 0);b.__decorate([q.property({type:t,json:{write:{overridePolicy:e.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"layers",void 0);b.__decorate([q.property({type:v,json:{read:!0,write:{overridePolicy:e.writeNonEmptyCollectionPolicy}}})],
a.prototype,"tables",void 0);return a=p=b.__decorate([h.subclass("esri.webdoc.applicationProperties.Search")],a)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(f){f.writeNonEmptyCollectionPolicy=function(b){return{enabled:!!b?.length}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(f,b,a,d,g,q,y,r){var h;a=h=function(k){function e(l){l=k.call(this,l)||this;l.field=null;l.id=null;l.subLayer=null;return l}f._inherits(e,k);e.prototype.clone=function(){return new h(d.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return f._createClass(e)}(a.JSONSupport);b.__decorate([g.property({type:r,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);b.__decorate([g.property({type:q.Integer,
json:{write:!0}})],a.prototype,"subLayer",void 0);return a=h=b.__decorate([y.subclass("esri.webdoc.applicationProperties.SearchLayer")],a)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(f,b,a,d,g,q,y,r,h,k){var e;a=e=function(l){function n(p){p=l.call(this,p)||this;p.exactMatch=!1;p.name=null;p.type=null;return p}f._inherits(n,l);n.prototype.clone=function(){return new e({exactMatch:this.exactMatch,type:this.type,name:this.name})};return f._createClass(n)}(a.JSONSupport);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([r.enumeration(k.kebabDict)],
a.prototype,"type",void 0);return a=e=b.__decorate([h.subclass("esri.webdoc.applicationProperties.SearchLayerField")],a)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(f,b,a,d,g,q,y,r){var h;a=h=function(k){function e(l){l=
k.call(this,l)||this;l.field=null;l.id=null;return l}f._inherits(e,k);e.prototype.clone=function(){return new h(d.clone({field:this.field,id:this.id}))};return f._createClass(e)}(a.JSONSupport);b.__decorate([g.property({type:r,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);return a=h=b.__decorate([y.subclass("esri.webdoc.applicationProperties.SearchTable")],a)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(f,b,a,d,g,q,y,r,h,k){var e;a=e=function(l){function n(p){p=l.call(this,p)||this;p.exactMatch=!1;p.name=null;p.type=null;return p}f._inherits(n,l);n.prototype.clone=function(){return new e({exactMatch:this.exactMatch,type:this.type,name:this.name})};return f._createClass(n)}(a.JSONSupport);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([r.enumeration(k.kebabDict)],
a.prototype,"type",void 0);return a=e=b.__decorate([h.subclass("esri.webdoc.applicationProperties.SearchTableField")],a)})},"esri/webmap/Bookmark":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../TimeExtent ../Viewpoint ../core/Error ../core/Identifiable ../core/JSONSupport ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/ensureType ../webdoc/support/SlideThumbnail".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e,l,n,p,t,v){var w;q=w=function(z){function H(E){E=z.call(this,E)||this;E.name=null;E.thumbnail=new v.SlideThumbnail;E.timeExtent=null;return E}f._inherits(H,z);var G=H.prototype;G.castThumbnail=function(E){return"string"===typeof E?new v.SlideThumbnail({url:E}):t.ensureType(v.SlideThumbnail,E)};G.readViewpoint=function(E,P){const {extent:N,viewpoint:U}=P;return d.fromJSON(U||{targetGeometry:N})};G.writeViewpoint=function(E,P,N,U){if(E){var {targetGeometry:O}=E;null!=
O&&"extent"!==O.type?U?.messages?U.messages.push(new g("property:unsupported","Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.")):h.getLogger(this).error("Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent."):(null!=O&&(P.extent=O.toJSON()),P[N]=E.toJSON())}};G.clone=function(){return new w(r.clone({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))};f._createClass(H,
[{key:"viewpoint",set:function(E){const {targetGeometry:P,scale:N}=E;null!=P&&"point"===P.type&&null==N&&h.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",E);this._set("viewpoint",E)}}]);return H}(q.IdentifiableMixin(y.JSONSupport));b.__decorate([k.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],q.prototype,"name",void 0);b.__decorate([k.property({type:v.SlideThumbnail,json:{write:{overridePolicy(z){return{enabled:!(!z||!z.url)}}}}})],
q.prototype,"thumbnail",void 0);b.__decorate([e.cast("thumbnail")],q.prototype,"castThumbnail",null);b.__decorate([k.property({type:a,json:{write:!0}})],q.prototype,"timeExtent",void 0);b.__decorate([k.property({type:d,nonNullable:!0,json:{write:!0}})],q.prototype,"viewpoint",null);b.__decorate([l.reader("viewpoint",["extent","viewpoint"])],q.prototype,"readViewpoint",null);b.__decorate([p.writer("viewpoint")],q.prototype,"writeViewpoint",null);return q=w=b.__decorate([n.subclass("esri.webmap.Bookmark")],
q)})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,b,a,d,g,q,y,r,h){var k;f.SlideThumbnail=k=function(e){function l(){var p=e.apply(this,arguments)||this;p.url="";return p}b._inherits(l,e);var n=l.prototype;
n.destroy=function(){this.url=""};n.clone=function(){return new k({url:this.url})};return b._createClass(l)}(d.JSONSupport);a.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],f.SlideThumbnail.prototype,"url",void 0);f.SlideThumbnail=k=a.__decorate([h.subclass("esri.webdoc.support.SlideThumbnail")],f.SlideThumbnail);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/Accessor ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../webdoc/RangeInfo ./background/ColorBackground".split(" "),
function(f,b,a,d,g,q,y,r,h,k,e){var l;d=l=function(n){function p(t){t=n.call(this,t)||this;t.background=null;t.rangeInfo=null;t.spatialReference=null;t.viewpoint=null;return t}f._inherits(p,n);p.prototype.clone=function(){return new l(g.clone({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))};return f._createClass(p)}(d);b.__decorate([q.property({type:e})],d.prototype,"background",void 0);b.__decorate([q.property({type:k})],d.prototype,
"rangeInfo",void 0);b.__decorate([q.property({type:h})],d.prototype,"spatialReference",void 0);b.__decorate([q.property({type:a})],d.prototype,"viewpoint",void 0);return d=l=b.__decorate([r.subclass("esri.webmap.InitialViewProperties")],d)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,b,a,d,g,q,y,r){var h;d=h=function(k){function e(l){l=k.call(this,l)||this;l.color=new a([0,0,0,1]);return l}f._inherits(e,k);e.prototype.clone=function(){return new h(g.clone({color:this.color}))};return f._createClass(e)}(d.JSONSupport);b.__decorate([q.property({type:a,json:{write:!0}})],d.prototype,"color",void 0);return d=h=b.__decorate([r.subclass("esri.webmap.background.ColorBackground")],d)})},"esri/webmap/initialViewPropertiesUtils":function(){define("require exports ../Viewpoint ../geometry/support/webMercatorUtils ../rest/geometryService/project ../rest/support/ProjectParameters".split(" "),
function(f,b,a,d,g,q){async function y(r,h,k){r=r?.spatialReference;const e=h?.extent;if(!r||!e)return null;if(r.isWGS84)return e.clone();if(r.isWebMercator)return d.geographicToWebMercator(e);const {getGeometryServiceURL:l}=await new Promise((n,p)=>f(["../portal/support/geometryServiceUtils"],n,p));try{const n=await l(h),p=new q;p.geometries=[e];p.outSpatialReference=r;return(await g.project(n,p))[0]}catch(n){k.error("Error projecting item's extent:",n)}return null}b.computeInitialViewpoint=async function(r,
h,k){return r?.viewpoint?.targetGeometry?null:(r=await y(r,h,k))?new a({targetGeometry:r}):null};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(f,b,a){a=function(d){function g(q,y){return d.call(this,q,y,"webmap")||this}b._inherits(g,d);return b._createClass(g)}(a.Version);f.Version=a;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/arrayUtils ./core/Collection ./core/Error ./core/Loadable ./core/loadAll ./core/Logger ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/has ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/SpatialReference ./geometry/support/spatialReferenceUtils ./geometry/support/webMercatorUtils ./layers/support/arcgisLayerUrl ./layers/support/layerUtils ./networks/UtilityNetwork ./portal/Portal ./portal/PortalItem ./portal/support/portalItemUtils ./rest/geometryService/project ./rest/support/ProjectParameters ./support/basemapUtils ./support/MapFloorInfo ./webdoc/GeotriggersInfo ./webdoc/RangeInfo ./webdoc/Widgets ./webdoc/support/thumbnailUtils ./webdoc/support/writeUtils ./webmap/ApplicationProperties ./webmap/Bookmark ./webmap/InitialViewProperties ./webmap/initialViewPropertiesUtils ./webmap/Version ./webmap/background/ColorBackground".split(" "),function(f,
b,a,d,g,q,y,r,h,k,e,l,n,p,t,v,w,z,H,G,E,P,N,U,O,A,J,F,D,x,L,Q,M,I,T,R,S,W,ka,ha,la,Z,Y,da,aa,ia,ra,ea,na){const ja=new ea.Version(2,28),oa=r.ofType(aa);r=r.ofType(L);const fa=new Map;fa.set("image/jpeg","jpeg");fa.set("image/jpg","jpg");fa.set("image/png","png");fa.set("image/gif","gif");const pa=I.TypeKeyword.JSAPI,qa=I.TypeKeyword.DEVELOPER_BASEMAP,sa="NatGeo_World_Map Ocean_Basemap USA_Topo_Maps World_Imagery World_Street_Map World_Terrain_Base World_Topo_Map World_Hillshade Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Reference_Overlay Reference/World_Transportation".split(" ").map(ba=>
ba.toLowerCase());g=function(ba){function ca(c){c=ba.call(this,c)||this;c._isAuthoringAppSetByUser=!1;c._isAuthoringAppVersionSetByUser=!1;c._thumbnailFilename=null;c._updateFromPromise=null;c._resourceReferences={portalItem:null,paths:[]};c.applicationProperties=null;c.bookmarks=new oa;c.floorInfo=null;c.geotriggersInfo=null;c.initialViewProperties=new ia;c.portalItem=null;c.presentation=null;c.sourceVersion=null;c.widgets=null;c.utilityNetworks=null;c.authoringApp=c.authoringAppVersion=null;c._isAuthoringAppSetByUser=
c._isAuthoringAppVersionSetByUser=!1;return c}b._inherits(ca,ba);var C=ca.prototype;C.destroy=function(){const c=this.portalItem;this.portalItem=null;c?.destroy()};C.initialize=function(){this.when().catch(c=>{l.getLogger(this).error("#load()","Failed to load web map",c)});if(this.resourceInfo){let c;try{c=this._validateJSON(this.resourceInfo)}catch(m){this.addResolvingPromise(Promise.reject(m));return}this.read(c)}};C.writeAuthoringApp=function(c,m){m.authoringApp=c&&this._isAuthoringAppSetByUser?
c:pa};C.writeAuthoringAppVersion=function(c,m){m.authoringAppVersion=c&&this._isAuthoringAppVersionSetByUser?c:d.version};C.readInitialViewProperties=function(c,m){c=new ia;m.background&&(c.background=na.fromJSON(m.background));const u=m.initialState?.viewpoint;u&&(u.rotation&&ea.Version.parse(m.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===m.authoringApp&&(u.rotation*=-1),c.viewpoint=q.fromJSON(u));m.mapRangeInfo&&(c.rangeInfo=ha.fromJSON(m.mapRangeInfo));m.spatialReference&&(c.spatialReference=
A.fromJSON(m.spatialReference));return c};C.writeInitialViewProperties=function(c,m,u,B){c&&((u=c.background)&&u.color&&(m.background=u.write({},B)),c.viewpoint&&(m.initialState={viewpoint:c.viewpoint.write({},B)}),c.rangeInfo&&(m.mapRangeInfo=c.rangeInfo.toJSON(B)),c.spatialReference&&(m.spatialReference=c.spatialReference.write({},B)))};C.writeLayers=function(c,m,u,B){m[u]=this._writeLayers(c,B,"operational-layers")};C.readSourceVersion=function(c,m){const [u,B]=m.version.split(".");return new ea.Version(parseInt(u,
10),parseInt(B,10))};C.writeSourceVersion=function(c,m,u){m[u]=`${ja.major}.${ja.minor}`};C.writeTables=function(c,m,u,B){c=this._writeLayers(c,B,"tables");c.length&&(m[u]=c)};C.load=function(c){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};C.loadAll=function(){return e.loadAll(this,c=>{c(this.ground,this.basemap,this.layers,this.tables)})};C.read=function(c,m){m={...m,origin:"web-map"};const u=this._getAuthoringPropsState();O.readLoadable(this,c,B=>b._get(b._getPrototypeOf(ca.prototype),
"read",this).call(this,c,B),m);this._restoreAuthoringPropsFromState(u)};C.write=function(c,m){if("loaded"!==this.loadStatus)throw c=new h("webmap:not-loaded","Web map must be loaded before it can be serialized"),l.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),c;this._removeDanglingLayerRefs();m={...m,origin:"web-map",restrictedWebMapWriting:!0,webmap:this};return b._get(b._getPrototypeOf(ca.prototype),"write",this).call(this,
c,m)};C.save=async function(c){c=c||{};this._validateItem();const m=new Promise((V,X)=>f(["./webdoc/support/saveUtils"],V,X));await this._updateFromPromise;await this.load();await this._loadLayerContainers();await this._beforeSave();await this._validateMap();const u=this.portalItem;var B=w.urlToObject(u.itemUrl);const K={origin:"web-map",messages:[],writtenProperties:[],url:B,portal:u.portal||Q.getDefault(),portalItem:u,verifyItemRelativeUrls:B?{rootPath:B.path,writtenUrls:[]}:null,blockedRelativeUrls:[],
resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}};B=this.write({},K);await Promise.all(K.resources.pendingOperations);this._validateJSONForWriting(K,c);await this._updateItemProperties(u);await this._updateItem(u,B,K);await Promise.all([this._updateItemThumbnail(),m.then(({saveResources:V})=>V(this._resourceReferences,K,null))]);return u};C.saveAs=async function(c,m){m=m||{};c=this._getPortalItem(c);const u=new Promise((X,ma)=>f(["./webdoc/support/saveUtils"],X,ma));await this._updateFromPromise;
await this.load();await this._loadLayerContainers();await this._beforeSave();await this._validateMap();const B={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:c.portal,portalItem:c,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},K=this.write({},B);await Promise.all(B.resources.pendingOperations);this._validateJSONForWriting(B,m);await this._updateItemPropertiesForSaveAs(c);const V=this._getThumbnailState();await this._createItem(c,K,B,m)&&
(this._resourceReferences.portalItem=c);this._restoreThumbnailFromState(V);await Promise.all([this._updateItemThumbnail(),u.then(({saveResources:X})=>X(this._resourceReferences,B,null))]);return c};C.updateFrom=async function(c,m){this._updateFromPromise=c=this._updateFromInternal(c,m);await c;c===this._updateFromPromise&&(this._updateFromPromise=null)};C.getLayerJSONFromResourceInfo=function(c){const m=this.resourceInfo;return this._collectAllLayersJSON([...(m?.baseMap?.baseMapLayers||[]),...(m?.operationalLayers||
[]),...(this.basemap?.resourceInfo?.data?.baseMapLayers||[])]).find(u=>u.id===c.id)};C._collectAllLayersJSON=function(c){return c.reduce((m,u)=>{m.push(u);"GroupLayer"===u.layerType&&(m=m.concat(this._collectAllLayersJSON(u.layers||[])));return m},[])};C._writeLayers=function(c,m,u){m={...m,layerContainerType:u};return c.map(B=>Y.getLayerJSON(B,"tables"===u?null:this.getLayerJSONFromResourceInfo(B),m)).filter(y.isSome).toArray()};C._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,
{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve()};C._loadFromItem=async function(c){await c.load().catch(B=>{throw new h("webmap:load-portal-item","Failed to load portal item",{error:B});});if("Web Map"!==c.type)throw new h("webmap:invalid-portal-item",`Invalid portal item type '${c.type}', expected 'Web Map'`,{type:c.type});var m=await c.fetchData();this.resourceInfo=m;const u={origin:"web-map",url:w.urlToObject(c.itemUrl),portal:c.portal||
Q.getDefault(),portalItem:c,readResourcePaths:[]};await this._readAndLoadFromJSON(m,u);this._resourceReferences={portalItem:c,paths:u.readResourcePaths??[]};if(c=await ra.computeInitialViewpoint(this.initialViewProperties,c,l.getLogger(this)))m=this.initialViewProperties?.clone()??new ia,m.viewpoint=c,this.initialViewProperties=m};C._readAndLoadFromJSON=function(c,m){c=this._validateJSON(c);this.read(c,m);return this._loadFromJSON(c,m)};C._validateJSON=function(c){const m=ea.Version.parse(c.version||
"","webmap");ja.validate(m);c.version=`${m.major}.${m.minor}`;return c};C._loadFromJSON=function(c,m){const u={context:{...m,layerContainerType:"operational-layers"}};this.portalItem&&(u.context.portal=this.portalItem.portal||Q.getDefault());return(new Promise((B,K)=>f(["./layers/support/layersCreator"],B,K))).then(({populateOperationalLayers:B})=>{const K=[];var V=c.operationalLayers;V&&V.length&&K.push(B(this.layers,V,u));V={...u,context:{...u.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"};
const X=c.tables;X&&X.length&&K.push(B(this.tables,X,V));return t.eachAlways(K).then(()=>{})})};C._removeDanglingLayerRefs=function(){var c=this.applicationProperties,m=c&&c.viewing&&c.viewing.search;const u=B=>this.allLayers.some(K=>K.id===B);m&&m.layers&&(m.layers=m.layers.filter(B=>u(B.id)));m&&m.tables&&(m.tables=m.tables.filter(B=>this.tables.some(K=>K.id===B.id)));(m=c&&c.editing&&c.editing.locationTracking)&&m.info&&!u(m.info.layerId)&&(c.editing=null);(c=this.presentation&&this.presentation.slides)&&
c.forEach(B=>{B.visibleLayers&&(B.visibleLayers=B.visibleLayers.filter(K=>u(K.id)))})};C._validateMap=async function(){if(!this.basemap?.baseLayers.length)throw new h("webmap:save","Map does not have a valid basemap with a base layer.");let c=null;await v.whenOnce(()=>{const m=S.findSpatialReference(this.initialViewProperties,this.basemap);c=m.spatialReference;return!m.updating});if(!J.equals(c,this.initialViewProperties.spatialReference))throw new h("webmap:save","The spatial reference of the basemap is not compatible with the one from the map.",
{expected:this.initialViewProperties.spatialReference,actual:c});};C._validateItem=function(){if(!this.portalItem)throw l.getLogger(this).error("save: requires the portalItem property to be set"),new h("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)};C._validateItemType=function(c){if("Web Map"!==c.type)throw new h("webmap:portal-item-wrong-type",'Portal item needs to have type "Web Map"');};C._loadLayerContainers=function(){const c=
[];this.basemap&&c.push(this.basemap.load());this.ground&&c.push(this.ground.load());return t.eachAlways(c).then(()=>{})};C._beforeSave=async function(){const c=[];for(const m of this.allLayers)if("beforeSave"in m&&"function"===typeof m.beforeSave){const u=m.beforeSave();u&&c.push(u)}await t.eachAlways(c)};C._loadAllLayers=function(){const c=this._getAllLayersAndTables().map(m=>m.load());return t.eachAlways(c).then(()=>{})};C._getAllLayersAndTables=function(){return this.allLayers.concat(this.allTables)};
C._validateJSONForWriting=function(c,m){let u=(c.messages??[]).filter(B=>"error"===B.type).map(B=>new h(B.name,B.message,B.details));c.blockedRelativeUrls&&(u=u.concat(c.blockedRelativeUrls.map(B=>new h("url:unsupported",`Relative url '${B}' is not supported in Web Map`))));m.ignoreUnsupported&&(u=u.filter(B=>"layer:unsupported"!==B.name&&"symbol:unsupported"!==B.name&&"symbol-layer:unsupported"!==B.name&&"property:unsupported"!==B.name&&"url:unsupported"!==B.name));if(0<u.length)throw new h("webmap:save",
"Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:u});};C._updateItemProperties=async function(c){c.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry);await this._updateTypeKeywords(c)};C._updateItemPropertiesForSaveAs=async function(c){I.removeTypeKeyword(c,"CollectorDisabled");I.removeTypeKeyword(c,"FieldMapsDisabled");I.removeTypeKeyword(c,I.TypeKeyword.METADATA);I.removeTypeKeyword(c,"OfflineDisabled");
I.removeTypeKeyword(c,"Offline Map Areas");I.removeTypeKeyword(c,"Workforce Dispatcher");I.removeTypeKeyword(c,"Workforce Project");I.removeTypeKeyword(c,"Workforce Worker");await this._updateItemProperties(c)};C._getWGS84Extent=async function(c){c=c.clone().normalize();let m;if(1<c.length)for(const u of c)m?u.width>m.width&&(m=u):m=u;else m=c[0];return this._projectToWGS84(m)};C._projectToWGS84=async function(c){var m=c.spatialReference;if(m.isWGS84)return c.clone();if(m.isWebMercator)return F.webMercatorToGeographic(c);
({getGeometryServiceURL:m}=await new Promise((B,K)=>f(["./portal/support/geometryServiceUtils"],B,K)));m=await m(this.portalItem);const u=new R;u.geometries=[c];u.outSpatialReference=A.WGS84;return(await T.project(m,u))[0]};C._updateTypeKeywords=async function(c){I.addTypeKeyword(c,pa);await this._loadAllLayers();this._evalCollectorKeyword(c);this._evalDataEditingKeyword(c);this._evalOfflineKeyword(c);this._evalDeveloperBasemapKeyword(c);this._evalUtilityNetworkKeyword(c);c.typeKeywords&&(c.typeKeywords=
c.typeKeywords.filter((m,u,B)=>B.indexOf(m)===u))};C._evalCollectorKeyword=function(c){I.hasTypeKeyword(c,"CollectorDisabled")||I.hasTypeKeyword(c,"Workforce Project")||I.hasTypeKeyword(c,"Workforce Worker")||I.hasTypeKeyword(c,"Workforce Dispatcher")||!this._hasEditableFeatureLayer()?I.removeTypeKeyword(c,"Collector"):I.addTypeKeyword(c,"Collector")};C._evalDataEditingKeyword=function(c){this._hasEditableFeatureLayer()?I.addTypeKeyword(c,"Data Editing"):I.removeTypeKeyword(c,"Data Editing")};C._evalOfflineKeyword=
function(c){!I.hasTypeKeyword(c,"OfflineDisabled")&&this._isOfflineCapableMap()?I.addTypeKeyword(c,"Offline"):I.removeTypeKeyword(c,"Offline")};C._evalDeveloperBasemapKeyword=function(c){S.hasDeveloperBasemapLayer(this.basemap)?I.addTypeKeyword(c,qa):I.removeTypeKeyword(c,qa)};C._evalUtilityNetworkKeyword=function(c){this.utilityNetworks?.length?I.addTypeKeyword(c,"UtilityNetwork"):I.removeTypeKeyword(c,"UtilityNetwork")};C._hasEditableFeatureLayer=function(){return this._getAllLayersAndTables().some(c=>
c.loaded&&x.isLayerWithFeatureLayerSource(c)&&c.capabilities.operations.supportsEditing&&c.editingEnabled&&("subtype-group"!==c.type||c.sublayers.some(m=>m.editingEnabled)))};C._isOfflineCapableMap=function(){return this._getAllLayersAndTables().filter(c=>"group"!==c.type).every(c=>c.loaded&&this._isOfflineCapableLayer(c))};C._isFeatureCollectionLike=function(c){return x.isFeatureCollectionLayer(c)||"map-notes"===c.type||"route"===c.type};C._isOfflineCapableLayer=function(c){return x.isLayerWithFeatureLayerSource(c)&&
c.capabilities.operations.supportsSync||this._isFeatureCollectionLike(c)&&!c.portalItem||("tile"===c.type||"vector-tile"===c.type)&&(c.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(c)||S.isDeveloperBasemapLayer(c))&&c.spatialReference.equals(this.initialViewProperties.spatialReference)};C._isExportableAGOLTileLayer=function(c){return"tile"===c.type?D.isServerOrServicesAGOLUrl(c.url)&&sa.some(m=>c.url?.toLowerCase().includes("/"+m+"/")):!1};C._updateItem=async function(c,
m,u){await c.update({data:m});this._syncUpInstanceWithItem(c,m,u)};C._createItem=async function(c,m,u,B){var K=this.portalItem;K={item:K,authenticated:!(!K?.id||!K.portal.user)};const V=c.portal;await V.signIn();const {copyAllowed:X,itemReloaded:ma}=await this._isCopyAllowed(K,V);K.authenticated||(K.authenticated=ma);if(!X)throw new h("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");B=await this._initializeNewItem(c,K,m,B);this.portalItem=c;this._syncUpInstanceWithItem(c,
m,u);return B};C._isCopyAllowed=async function(c,m){const {item:u,authenticated:B}=c;if(u?.id&&u.typeKeywords?.includes("useOnly")){if(u.portal.portalHostname!==m.portalHostname)return{copyAllowed:!1,itemReloaded:!1};B||await u.reload();return{copyAllowed:"admin"===u.itemControl||"update"===u.itemControl,itemReloaded:!0}}return{copyAllowed:!0,itemReloaded:!1}};C._initializeNewItem=async function(c,m,u,B){var K=c.portal;({item:m}=m);const {folder:V,copyAllResources:X}=B;B=!1;X&&m?.id&&w.hasSameCanonicalArcGISOnlinePortal(m.portal.url,
K.url)&&({total:B}=await m.fetchResources(),B=!!B);B?(K=await m.copy({copyResources:"all",folder:V}),c.id=K.id,c.portal=K.portal,K=c.toJSON(),await c.load(),c.read(K),await c.update({data:u})):await K.user?.addItem({item:c,folder:V,data:u});return B};C._syncUpInstanceWithItem=function(c,m,u){n.MultiOriginJSONSupport.prototype.read.call(this,{version:m.version,authoringApp:m.authoringApp,authoringAppVersion:m.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:c.itemUrl?w.urlToObject(c.itemUrl):
void 0});U.updateOrigins(u);this.resourceInfo=m};C._updateItemThumbnail=async function(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())};C._getPortalItem=function(c){c=M.from(c);c.id&&(c=c.clone(),c.id=null);c.type||(c.type="Web Map");c.portal||(c.portal=Q.getDefault());this._validateItemType(c);return c};C._updateFromInternal=async function(c,m){m=m||{};
await v.whenOnce(()=>c.ready);this._updateInitialViewProperties(c,m);if(c.map===this)for(const u of c.allLayerViews)"visible"in u&&"visible"in u.layer&&u._isOverridden("visible")&&(u.layer.visible=u.visible),"featureEffect"in u&&"featureEffect"in u.layer&&u._isOverridden("featureEffect")&&(u.layer.featureEffect=u.featureEffect);await this._updateThumbnailUrl(c,m)};C._updateInitialViewProperties=function(c,m){m.backgroundExcluded||(this.initialViewProperties.background=c.background?.clone());this.initialViewProperties.spatialReference=
c.spatialReference?.clone();m.viewpointExcluded||(this.initialViewProperties.viewpoint=new q({rotation:c.rotation,scale:m.scalePreserved?c.scale:null,targetGeometry:this._getViewExtent(c)}));if(!m.widgetsExcluded)for(const u of c.persistableViewModels)u.updateWebDocument(this)};C._getViewExtent=function(c){const m=c.center.clone().normalize();c=c.extent.clone();const u=c.width/2;c.xmin=m.x-u;c.xmax=m.x+u;return c};C._updateThumbnailUrl=async function(c,m){m.thumbnailExcluded||(m=Z.getOptimalThumbnailSize(c,
m.thumbnailSize),c=await c.takeScreenshot({format:"png",width:m.width,height:m.height}),this._setAutoGeneratedThumbnail(c.dataUrl))};C._setAutoGeneratedThumbnail=function(c){this.thumbnailUrl=c;this._thumbnailFilename=null};C._clearThumbnailOverride=function(){this._clearOverride("thumbnailUrl");this.clear("thumbnailUrl","user");this._thumbnailFilename=null};C._generateCustomThumbnailFilename=function(c){if(w.isDataProtocol(c)){c=(c=(c=w.dataComponents(c))&&c.mediaType)&&fa.get(c.toLowerCase())||
null;const m=`thumbnail${Date.now()}`;return c?`${m}.${c}`:m}return null};C._getThumbnailState=function(){let c=this.thumbnailUrl;c&&(c=this._isOverridden("thumbnailUrl")?c:w.addQueryParameter(c,"w","8192"));return{thumbnailUrl:c,filename:this._thumbnailFilename}};C._restoreThumbnailFromState=function(c){this.thumbnailUrl=c.thumbnailUrl;this._thumbnailFilename=c.filename};C._getAuthoringPropsState=function(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,
isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}};C._restoreAuthoringPropsFromState=function(c){c.isAuthoringAppSetByUser?this.authoringApp=c.authoringApp:this._isAuthoringAppSetByUser=!1;c.isAuthoringAppVersionSetByUser?this.authoringAppVersion=c.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1};ca.fromJSON=function(c){if(!c)throw new h("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:c})};b._createClass(ca,[{key:"authoringApp",
set:function(c){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",c)}},{key:"authoringAppVersion",set:function(c){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",c)}},{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(c){c?(this._override("thumbnailUrl",c),this._thumbnailFilename=this._generateCustomThumbnailFilename(c)):this._clearThumbnailOverride()}}]);return ca}(n.MultiOriginJSONMixin(k.LoadableMixin(p.EsriPromiseMixin(g))));
g.VERSION=ja;a.__decorate([z.property({type:da,json:{write:!0}})],g.prototype,"applicationProperties",void 0);a.__decorate([z.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringApp",null);a.__decorate([N.writer("authoringApp")],g.prototype,"writeAuthoringApp",null);a.__decorate([z.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringAppVersion",null);a.__decorate([N.writer("authoringAppVersion")],g.prototype,"writeAuthoringAppVersion",
null);a.__decorate([z.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],g.prototype,"basemap",void 0);a.__decorate([z.property({type:oa,json:{write:{overridePolicy(ba){return{enabled:!!(ba&&0<ba.length),ignoreOrigin:!0}}}}})],g.prototype,"bookmarks",void 0);a.__decorate([z.property({type:W,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],g.prototype,"floorInfo",void 0);a.__decorate([z.property({type:ka,json:{write:!0}})],g.prototype,"geotriggersInfo",void 0);
a.__decorate([z.property({type:ia,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:na},"initialState.viewpoint":{type:q},mapRangeInfo:{type:ha},spatialReference:{type:A}}}}})],g.prototype,"initialViewProperties",void 0);a.__decorate([E.reader("initialViewProperties")],g.prototype,"readInitialViewProperties",null);a.__decorate([N.writer("initialViewProperties")],g.prototype,"writeInitialViewProperties",
null);a.__decorate([z.property({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],g.prototype,"layers",void 0);a.__decorate([N.writer("layers")],g.prototype,"writeLayers",null);a.__decorate([z.property({type:M})],g.prototype,"portalItem",void 0);a.__decorate([z.property({json:{write:!0}})],g.prototype,"presentation",void 0);a.__decorate([z.property()],g.prototype,"resourceInfo",void 0);a.__decorate([z.property({readOnly:!0,type:ea.Version,json:{read:{source:"version"},write:{allowNull:!0,
ignoreOrigin:!0,target:"version",isRequired:!0}}})],g.prototype,"sourceVersion",void 0);a.__decorate([E.reader("sourceVersion")],g.prototype,"readSourceVersion",null);a.__decorate([N.writer("sourceVersion")],g.prototype,"writeSourceVersion",null);a.__decorate([z.property({json:{read:!1,write:{ignoreOrigin:!0}}})],g.prototype,"tables",void 0);a.__decorate([N.writer("tables")],g.prototype,"writeTables",null);a.__decorate([z.property()],g.prototype,"thumbnailUrl",null);a.__decorate([z.property({type:la,
json:{write:!0}})],g.prototype,"widgets",void 0);a.__decorate([z.property({type:r,json:{read:!0,write:!0}})],g.prototype,"utilityNetworks",void 0);return g=a.__decorate([P.subclass("esri.WebMap")],g)});