// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../layers/support/fieldUtils ../support/randomRotationExpression ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),
function(m,n,h,r,E,F,G,t,u,v,k,w,x,y,z,A,B,C){const D={base:B,key:"type",typeMap:{opacity:y,color:x,rotation:z,size:A}};m.VisualVariablesMixin=e=>{e=function(p){function l(){var a=p.apply(this,arguments)||this;a._vvFactory=new C;return a}n._inherits(l,p);var g=l.prototype;g.readVisualVariables=function(a,b,c){return this._vvFactory.readVariables(a,b,c)};g.writeVisualVariables=function(a,b,c,f){b[c]=this._vvFactory.writeVariables(a,f)};g.hasVisualVariables=function(a,b){return a?0<this.getVisualVariablesForType(a,
b).length:0<this.getVisualVariablesForType("size",b).length||0<this.getVisualVariablesForType("color",b).length||0<this.getVisualVariablesForType("opacity",b).length||0<this.getVisualVariablesForType("rotation",b).length};g.getVisualVariablesForType=function(a,b){const c=this.visualVariables;return c?c.filter(f=>f.type===a&&("string"===typeof b?f.target===b:!1===b?!f.target:!0)):[]};g.collectVVRequiredFields=async function(a,b){var c=[];this.visualVariables&&(c=c.concat(this.visualVariables));for(const d of c)if(d&&
(d.field&&k.collectField(a,b,d.field),d.normalizationField&&k.collectField(a,b,d.normalizationField),d.valueExpression)){{c=a;var f=b;const q=w.matchRandomRotationExpression(d.valueExpression);null!=q?(k.collectField(c,f,q),c=!0):c=!1}c||await k.collectArcadeFieldNames(a,b,d.valueExpression)}};n._createClass(l,[{key:"visualVariables",set:function(a){this._vvFactory.visualVariables=a;this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;
for(const a of this.visualVariables)if(a.arcadeRequired)return!0;return!1}}]);return l}(e);h.__decorate([r.property({types:[D],value:null,json:{write:!0}})],e.prototype,"visualVariables",null);h.__decorate([t.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null);h.__decorate([v.writer("visualVariables")],e.prototype,"writeVisualVariables",null);return e=h.__decorate([u.subclass("esri.renderers.mixins.VisualVariablesMixin")],e)};
Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});