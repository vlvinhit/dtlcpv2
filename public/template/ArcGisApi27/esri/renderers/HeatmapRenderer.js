// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../symbols ../core/deprecate ../core/lang ../core/Logger ../core/scheduling ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/utils ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ./Renderer ./support/AuthoringInfo ./support/HeatmapColorStop ./support/HeatmapLegendOptions ./support/heatmapUtils ../symbols/SimpleMarkerSymbol".split(" "),
function(l,c,p,b,w,t,x,y,z,d,J,A,B,C,u,D,E,m,F,q,G){function v(g){if(null!=g){const {maxDensity:h,minDensity:e,radius:a}=g;if(null!=h||null!=e||null!=a){const {blurRadius:f,maxPixelIntensity:k,minPixelIntensity:n,...H}=g;return H}}return g}var r;const I=x.getLogger("esri.renderers.HeatmapRenderer");b=r=function(g){function h(a){a=g.call(this,a)||this;a.authoringInfo=null;a.colorStops=[new m({ratio:0,color:new p("rgba(255, 140, 0, 0)")}),new m({ratio:.75,color:new p("rgba(255, 140, 0, 1)")}),new m({ratio:.9,
color:new p("rgba(255, 0,   0, 1)")})];a.field=null;a.fieldOffset=0;a.legendOptions=null;a.maxDensity=.04;a.minDensity=0;a.radius=18;a.referenceScale=0;a.type="heatmap";a.valueExpression=null;a.valueExpressionTitle=null;a._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1};return a}l._inherits(h,g);var e=h.prototype;e.normalizeCtorArgs=function(a){return v(a)};e._warnAboutDeprecatedGaussianBlurProp=function(a,f){this._warnedProps[a]||"user"!==A.getProperties(this).getDefaultOrigin()||
(this._warnedProps[a]=!0,y.schedule(()=>{w.deprecatedProperty(I,a,{replacement:`${String(f)} (suggested value: ${this._get(f)})`,version:"4.24"})}))};e.read=function(a,f){a=v(a);l._get(l._getPrototypeOf(h.prototype),"read",this).call(this,a,f)};e.getSymbol=function(){return new G};e.getSymbolAsync=async function(){return this.getSymbol()};e.getSymbols=function(){return[this.getSymbol()]};e.collectRequiredFields=async function(a,f){const k=this.field,n=this.valueExpression;k&&"string"===typeof k&&
await u.collectField(a,f,k);n&&"string"===typeof n&&await u.collectArcadeFieldNames(a,f,n)};e.getAttributeHash=function(){return null};e.getMeshHash=function(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`};e.clone=function(){return new r({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:t.clone(this.colorStops),field:this.field,legendOptions:t.clone(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,
valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})};l._createClass(h,[{key:"blurRadius",get:function(){return q.kernelDensityRadiusPtToGaussianBlurRadiusPx(this.radius)},set:function(a){const f=this.maxPixelIntensity,k=this.minPixelIntensity;this._set("radius",q.gaussianBlurRadiusPxToKernelDensityRadiusPt(a));this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius");this._set("maxDensity",f*this._pixelIntensityToDensity);this._set("minDensity",k*this._pixelIntensityToDensity)}},
{key:"maxPixelIntensity",get:function(){return this.maxDensity/this._pixelIntensityToDensity},set:function(a){this._set("maxDensity",a*this._pixelIntensityToDensity);this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}},{key:"minPixelIntensity",get:function(){return this.minDensity/this._pixelIntensityToDensity},set:function(a){this._set("minDensity",a*this._pixelIntensityToDensity);this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}},{key:"_pixelIntensityToDensity",
get:function(){return 24/(q.MAGIC_KERNEL_DENSITY_RADIUS_INFLATION_FACTOR**2*this.blurRadius**4)}}]);return h}(D);c.__decorate([d.property({type:E,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b.prototype,"authoringInfo",void 0);c.__decorate([d.property({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],b.prototype,"blurRadius",null);c.__decorate([d.property({type:[m],json:{write:!0}})],b.prototype,"colorStops",void 0);c.__decorate([d.property({type:String,
json:{write:!0}})],b.prototype,"field",void 0);c.__decorate([d.property({type:Number,json:{write:{overridePolicy:(g,h,e)=>({enabled:null==e})},origins:{"web-scene":{write:!1}}}})],b.prototype,"fieldOffset",void 0);c.__decorate([d.property({type:F.HeatmapLegendOptions,json:{write:!0}})],b.prototype,"legendOptions",void 0);c.__decorate([d.property({type:Number,json:{write:!0}})],b.prototype,"maxDensity",void 0);c.__decorate([d.property({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],
b.prototype,"maxPixelIntensity",null);c.__decorate([d.property({type:Number,json:{write:!0}})],b.prototype,"minDensity",void 0);c.__decorate([d.property({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],b.prototype,"minPixelIntensity",null);c.__decorate([d.property({type:Number,cast:z.toPt,json:{write:!0}})],b.prototype,"radius",void 0);c.__decorate([d.property({type:Number,range:{min:0},json:{default:0,write:!0}})],b.prototype,"referenceScale",void 0);c.__decorate([B.enumeration({heatmap:"heatmap"})],
b.prototype,"type",void 0);c.__decorate([d.property({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],b.prototype,"valueExpression",void 0);c.__decorate([d.property({type:String})],b.prototype,"valueExpressionTitle",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"_pixelIntensityToDensity",null);return b=r=c.__decorate([C.subclass("esri.renderers.HeatmapRenderer")],b)});