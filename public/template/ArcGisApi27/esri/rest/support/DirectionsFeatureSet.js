// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/arrayUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./DirectionsFeature ./FeatureSet ../../geometry/SpatialReference ../../geometry/Extent ../../geometry/Polyline".split(" "),function(n,c,b,q,d,z,A,r,t,u,v,w,x,p){function y(k,h){if(0===k.length)return new p({spatialReference:h});
const a=[];for(const g of k)for(const l of g.paths)a.push(...l);const e=[];a.forEach((g,l)=>{0!==l&&g[0]===a[l-1][0]&&g[1]===a[l-1][1]||e.push(g)});const {hasM:m,hasZ:f}=k[0];return new p({hasM:m,hasZ:f,paths:[e],spatialReference:h})}b=function(k){function h(a){a=k.call(this,a)||this;a.extent=null;a.features=[];a.geometryType="polyline";a.routeId=null;a.routeName=null;a.totalDriveTime=null;a.totalLength=null;a.totalTime=null;return a}n._inherits(h,k);h.prototype.readFeatures=function(a,e){if(!a)return[];
const m=(e=e.summary.envelope.spatialReference??e.spatialReference)&&w.fromJSON(e);return a.map(f=>{f=u.fromJSON(f);null!=f.geometry&&(f.geometry.spatialReference=m);if(null!=f.events)for(const g of f.events)null!=g.geometry&&(g.geometry.spatialReference=m);return f})};n._createClass(h,[{key:"mergedGeometry",get:function(){if(!this.features)return null;const a=this.features.map(({geometry:e})=>e);return y(a,this.extent.spatialReference)}},{key:"strings",get:function(){return this.features.map(({strings:a})=>
a).flat().filter(q.isSome)}}]);return h}(v);c.__decorate([d.property({type:x,json:{read:{source:"summary.envelope"}}})],b.prototype,"extent",void 0);c.__decorate([d.property({nonNullable:!0})],b.prototype,"features",void 0);c.__decorate([r.reader("features")],b.prototype,"readFeatures",null);c.__decorate([d.property()],b.prototype,"geometryType",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"mergedGeometry",null);c.__decorate([d.property()],b.prototype,"routeId",void 0);c.__decorate([d.property()],
b.prototype,"routeName",void 0);c.__decorate([d.property({value:null,readOnly:!0})],b.prototype,"strings",null);c.__decorate([d.property({json:{read:{source:"summary.totalDriveTime"}}})],b.prototype,"totalDriveTime",void 0);c.__decorate([d.property({json:{read:{source:"summary.totalLength"}}})],b.prototype,"totalLength",void 0);c.__decorate([d.property({json:{read:{source:"summary.totalTime"}}})],b.prototype,"totalTime",void 0);return b=c.__decorate([t.subclass("esri.rest.support.DirectionsFeatureSet")],
b)});