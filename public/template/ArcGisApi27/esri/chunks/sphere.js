// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../core/has ../core/Logger ../core/mathUtils ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(e,r,U,t,V,d,l,u,v,p,W,X,k){function m(){return v.create()}function w(a,b=m()){return u.copy(b,a)}function E(a,b){return v.fromValues(a[0],a[1],a[2],b)}function F(a){return a}function G(a){a[0]=a[1]=a[2]=a[3]=0}function H(a,b){a[0]=a[1]=a[2]=0;a[3]=b;return a}function I(a){return a[3]}
function J(a){return a}function K(a,b,c,f){return v.fromValues(a,b,c,f)}function L(a,b,c){a!==c&&d.copy(c,a);c[3]=a[3]+b;return c}function M(a,b,c){U.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported");return a===c?c:w(a,c)}function n(a,b,c){if(null==b)return!1;const {origin:f,direction:g}=b;var h=Y;h[0]=f[0]-a[0];h[1]=f[1]-a[1];h[2]=f[2]-a[2];b=g[0]*g[0]+g[1]*g[1]+g[2]*g[2];if(0===b)return!1;const q=2*(g[0]*h[0]+g[1]*h[1]+g[2]*h[2]);a=q*q-4*b*(h[0]*h[0]+h[1]*
h[1]+h[2]*h[2]-a[3]*a[3]);if(0>a)return!1;h=Math.sqrt(a);a=(-q-h)/(2*b);b=(-q+h)/(2*b);if(0>a||b<a&&0<b)a=b;if(0>a)return!1;c&&(c[0]=f[0]+g[0]*a,c[1]=f[1]+g[1]*a,c[2]=f[2]+g[2]*a);return!0}function N(a,b){return n(a,b,null)}function O(a,b,c){if(n(a,b,c))return c;a=x(a,b,k.sv3d.get());d.add(c,b.origin,d.scale(k.sv3d.get(),b.direction,d.distance(b.origin,a)/d.length(b.direction)));return c}function x(a,b,c){const f=k.sv3d.get(),g=k.sm4d.get();d.cross(f,b.origin,b.direction);const h=a[3];d.cross(c,f,
b.origin);d.scale(c,c,1/d.length(c)*h);a=y(a,b.origin);b=X.angle(b.origin,c);V.fromRotation(g,b+a,f);d.transformMat4(c,c,g);return c}function P(a,b,c){if(n(a,b,c))return c;W.closestPoint(b,a,c);return z(a,c,c)}function z(a,b,c){b=d.subtract(k.sv3d.get(),b,a);b=d.scale(k.sv3d.get(),b,a[3]/d.length(b));return d.add(c,b,a)}function Q(a,b){b=d.subtract(k.sv3d.get(),b,a);b=d.squaredLength(b);return Math.sqrt(Math.abs(b-a[3]*a[3]))}function y(a,b){b=d.subtract(k.sv3d.get(),b,a);b=d.length(b);a=a[3];return t.acosClamped(a/
(a+Math.abs(a-b)))}function A(a,b,c,f){a=d.subtract(B,b,a);switch(c){case p.Axis.X:return c=t.cartesianToSpherical(a,B)[2],d.set(f,-Math.sin(c),Math.cos(c),0);case p.Axis.Y:return a=t.cartesianToSpherical(a,B),c=a[1],a=a[2],b=Math.sin(c),d.set(f,-b*Math.cos(a),-b*Math.sin(a),Math.cos(c));case p.Axis.Z:return d.normalize(f,a)}}function C(a,b){b=d.subtract(D,b,a);return d.length(b)-a[3]}function R(a,b,c,f){const g=C(a,b);a=A(a,b,p.Axis.Z,D);c=d.scale(D,a,c-g);return d.add(f,b,c)}function S(a,b){b=d.squaredDistance(a,
b);a=a[3];return b<=a*a}function T(a,b,c=m()){const f=d.distance(a,b),g=a[3],h=b[3];if(f+h<g)return u.copy(c,a),c;if(f+g<h)return u.copy(c,b),c;d.lerp(c,a,b,(f+h-g)/(2*f));c[3]=(f+g+h)/2;return c}r=m();const Y=l.create(),B=l.create(),D=l.create();l=m();const Z=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:r,altitudeAt:C,angleToSilhouette:y,axisAt:A,clear:G,closestPoint:P,closestPointOnSilhouette:x,containsPoint:S,copy:w,create:m,distanceToSilhouette:Q,elevate:L,fromCenterAndRadius:E,
fromRadius:H,fromValues:K,getCenter:J,getRadius:I,intersectRay:n,intersectRayClosestSilhouette:O,intersectsRay:N,projectPoint:z,setAltitudeAt:R,setExtent:M,tmpSphere:l,union:T,wrap:F},Symbol.toStringTag,{value:"Module"}));e.NullSphere=r;e.altitudeAt=C;e.angleToSilhouette=y;e.axisAt=A;e.clear=G;e.closestPoint=P;e.closestPointOnSilhouette=x;e.containsPoint=S;e.copy=w;e.create=m;e.distanceToSilhouette=Q;e.elevate=L;e.fromCenterAndRadius=E;e.fromRadius=H;e.fromValues=K;e.getCenter=J;e.getRadius=I;e.intersectRay=
n;e.intersectRayClosestSilhouette=O;e.intersectsRay=N;e.projectPoint=z;e.setAltitudeAt=R;e.setExtent=M;e.sphere=Z;e.tmpSphere=l;e.union=T;e.wrap=F});