// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","./dom","./index"],function(h,p,y){function z(a,b){if(p.closestElementCrossShadowBoundary(b.parentElement,"[form]"))return!0;let c=!1;a.addEventListener("calciteInternalFormComponentRegister",d=>{c=d.composedPath().some(e=>q.has(e));d.stopPropagation()},{once:!0});b.dispatchEvent(new CustomEvent("calciteInternalFormComponentRegister",{bubbles:!0,composed:!0}));return c}function v(a){const {el:b,form:c}=a;return c?p.queryElementRoots(b,{id:c}):p.closestElementCrossShadowBoundary(b,
"form")}function A(){"checked"in this?this.checked=this.defaultChecked:this.value=this.defaultValue}function B(a){const {el:b,formEl:c,name:d,value:e}=a,{ownerDocument:k}=b,m=b.querySelectorAll('input[slot\x3d"hidden-form-input"]');if(c&&d){var n=Array.isArray(e)?e:[e],r=[],w=new Set;m.forEach(f=>{const g=n.find(C=>C==f.value);null!=g?(w.add(g),x(a,f,g)):r.push(f)});var l;n.forEach(f=>{if(!w.has(f)){var g=r.pop();g||(g=k.createElement("input"),g.slot="hidden-form-input");l||(l=k.createDocumentFragment());
l.append(g);g.addEventListener("change",t);x(a,g,f)}});l&&b.append(l);r.forEach(f=>{f.removeEventListener("change",t);f.remove()})}else m.forEach(f=>{f.removeEventListener("change",t);f.remove()})}function x(a,b,c){const {defaultValue:d,disabled:e,form:k,name:m,required:n}=a;b.defaultValue=d;b.disabled=e;b.name=m;b.required=n;b.tabIndex=-1;k?b.setAttribute("form",k):b.removeAttribute("form");"checked"in a?(b.checked=a.checked,b.defaultChecked=a.defaultChecked,b.value=a.checked?c||"on":""):b.value=
c||"";a.syncHiddenFormInput?.(b)}(function(a){function b(c,d,e){throw new c("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+d+".",e);}"function"!=typeof a.requestSubmit&&(a.requestSubmit=function(c){if(c){var d=c;d instanceof HTMLElement||b(TypeError,"parameter 1 is not of type 'HTMLElement'");"submit"==d.type||b(TypeError,"The specified element is not a submit button");d.form==this||b(DOMException,"The specified element is not owned by this form element","NotFoundError");c.click()}else c=
document.createElement("input"),c.type="submit",c.hidden=!0,this.appendChild(c),c.click(),this.removeChild(c)})})(HTMLFormElement.prototype);const u=new WeakMap,q=new WeakSet,t=a=>{a.target.dispatchEvent(new CustomEvent("calciteInternalHiddenInputChange",{bubbles:!0}))};h.HiddenFormInputSlot=({component:a})=>{B(a);return y.h("slot",{name:"hidden-form-input"})};h.afterConnectDefaultValueSet=function(a,b){a.defaultValue=b};h.connectForm=function(a){const {el:b,value:c}=a,d=v(a);if(d&&!z(d,b)){a.formEl=
d;a.defaultValue=c;"checked"in a&&(a.defaultChecked=a.checked);var e=(a.onFormReset||A).bind(a);d.addEventListener("reset",e);u.set(a.el,e);q.add(b)}};h.disconnectForm=function(a){const {el:b,formEl:c}=a;if(c){var d=u.get(b);c.removeEventListener("reset",d);u.delete(b);a.formEl=null;q.delete(b)}};h.findAssociatedForm=v;h.resetForm=function(a){a.formEl?.reset()};h.submitForm=function(a){({formEl:a}=a);if(!a)return!1;a.requestSubmit();return!0}});