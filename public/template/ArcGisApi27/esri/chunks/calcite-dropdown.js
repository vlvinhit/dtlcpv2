// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ./index ./dom ./floating-ui ./guid ./interactive ./key ./loadable ./observers ./openCloseComponent".split(" "),function(k,d,e,f,u,v,w,l,p,m){function q(){"undefined"!==typeof customElements&&["calcite-dropdown"].forEach(a=>{switch(a){case "calcite-dropdown":customElements.get(a)||customElements.define(a,r)}})}const r=d.proxyCustomElement(class extends d.H{constructor(){super();this.__registerHost();this.__attachShadow();this.calciteDropdownSelect=d.createEvent(this,"calciteDropdownSelect",
6);this.calciteDropdownBeforeClose=d.createEvent(this,"calciteDropdownBeforeClose",6);this.calciteDropdownClose=d.createEvent(this,"calciteDropdownClose",6);this.calciteDropdownBeforeOpen=d.createEvent(this,"calciteDropdownBeforeOpen",6);this.calciteDropdownOpen=d.createEvent(this,"calciteDropdownOpen",6);this.items=[];this.groups=[];this.mutationObserver=p.createObserver("mutation",()=>this.updateItems());this.resizeObserver=p.createObserver("resize",a=>this.resizeObserverCallback(a));this.openTransitionProp=
"opacity";this.guid=`calcite-dropdown-${u.guid()}`;this.defaultAssignedElements=[];this.slotChangeHandler=a=>{this.defaultAssignedElements=a.target.assignedElements({flatten:!0});this.updateItems()};this.setFilteredPlacements=()=>{const {el:a,flipPlacements:b}=this;this.filteredFlipPlacements=b?f.filterComputedPlacements(b,a):null};this.updateTriggers=a=>{this.triggers=a.target.assignedElements({flatten:!0});this.reposition(!0)};this.updateItems=()=>{this.items=this.groups.map(a=>Array.from(a?.querySelectorAll("calcite-dropdown-item"))).reduce((a,
b)=>[...a,...b],[]);this.updateSelectedItems();this.reposition(!0)};this.updateGroups=a=>{this.groups=a.target.assignedElements({flatten:!0}).filter(b=>b?.matches("calcite-dropdown-group"));this.updateItems()};this.resizeObserverCallback=a=>{a.forEach(b=>{({target:b}=b);b===this.referenceEl?this.setDropdownWidth():b===this.scrollerEl&&this.setMaxScrollerHeight()})};this.setDropdownWidth=()=>{const {referenceEl:a,scrollerEl:b}=this,c=a?.clientWidth;c&&b&&(b.style.minWidth=`${c}px`)};this.setMaxScrollerHeight=
()=>{const {scrollerEl:a}=this;if(a){this.reposition(!0);var b=this.getMaxScrollerHeight();a.style.maxHeight=0<b?`${b}px`:"";this.reposition(!0)}};this.setScrollerAndTransitionEl=a=>{this.resizeObserver.observe(a);this.transitionEl=this.scrollerEl=a;m.connectOpenCloseComponent(this)};this.setReferenceEl=a=>{this.referenceEl=a;f.connectFloatingUI(this,this.referenceEl,this.floatingEl);this.resizeObserver.observe(a)};this.setFloatingEl=a=>{this.floatingEl=a;f.connectFloatingUI(this,this.referenceEl,
this.floatingEl)};this.keyDownHandler=a=>{if(a.target===this.referenceEl){var {defaultPrevented:b,key:c}=a;if(!b){if(this.open){if("Escape"===c){this.closeCalciteDropdown();a.preventDefault();return}if(a.shiftKey&&"Tab"===c){this.closeCalciteDropdown();a.preventDefault();return}}w.isActivationKey(c)?(this.openCalciteDropdown(),a.preventDefault()):"Escape"===c&&(this.closeCalciteDropdown(),a.preventDefault())}}};this.focusOnFirstActiveOrFirstItem=()=>{this.getFocusableElement(this.items.find(a=>a.selected)||
this.items[0])};this.toggleOpenEnd=()=>{this.focusOnFirstActiveOrFirstItem();this.el.removeEventListener("calciteDropdownOpen",this.toggleOpenEnd)};this.openCalciteDropdown=()=>{(this.open=!this.open)&&this.el.addEventListener("calciteDropdownOpen",this.toggleOpenEnd)};this.disabled=this.closeOnSelectDisabled=this.open=!1;this.flipPlacements=void 0;this.maxItems=0;this.overlayPositioning="absolute";this.placement=f.defaultMenuPlacement;this.scale="m";this.selectedItems=[];this.type="click";this.width=
void 0}openHandler(a){this.disabled?this.open=!1:a&&this.reposition(!0)}handleDisabledChange(a){a||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements();this.reposition(!0)}maxItemsHandler(){this.setMaxScrollerHeight()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}async setFocus(){await l.componentLoaded(this);this.el.focus()}connectedCallback(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0});this.setFilteredPlacements();this.reposition(!0);
this.open&&this.openHandler(this.open);m.connectOpenCloseComponent(this)}componentWillLoad(){l.setUpLoadableComponent(this)}componentDidLoad(){l.setComponentLoaded(this);this.reposition(!0)}componentDidRender(){v.updateHostInteraction(this)}disconnectedCallback(){this.mutationObserver?.disconnect();f.disconnectFloatingUI(this,this.referenceEl,this.floatingEl);this.resizeObserver?.disconnect();m.disconnectOpenCloseComponent(this)}render(){const {open:a,guid:b}=this;return d.h(d.Host,null,d.h("div",
{class:"calcite-trigger-container",id:`${b}-menubutton`,onClick:this.openCalciteDropdown,onKeyDown:this.keyDownHandler,ref:this.setReferenceEl},d.h("slot",{"aria-controls":`${b}-menu`,"aria-expanded":e.toAriaBoolean(a),"aria-haspopup":"menu",name:"trigger",onSlotchange:this.updateTriggers})),d.h("div",{"aria-hidden":e.toAriaBoolean(!a),class:"calcite-dropdown-wrapper",ref:this.setFloatingEl},d.h("div",{"aria-labelledby":`${b}-menubutton`,class:{["calcite-dropdown-content"]:!0,[f.FloatingCSS.animation]:!0,
[f.FloatingCSS.animationActive]:a},id:`${b}-menu`,role:"menu",ref:this.setScrollerAndTransitionEl},d.h("slot",{onSlotchange:this.updateGroups}))))}async reposition(a=!1){const {floatingEl:b,referenceEl:c,placement:g,overlayPositioning:h,filteredFlipPlacements:n}=this;return f.reposition(this,{floatingEl:b,referenceEl:c,overlayPositioning:h,placement:g,flipPlacements:n,type:"menu"},a)}closeCalciteDropdownOnClick(a){!this.disabled&&e.isPrimaryPointerButton(a)&&this.open&&!a.composedPath().includes(this.el)&&
this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(a){this.closeCalciteDropdown();a.stopPropagation()}closeCalciteDropdownOnOpenEvent(a){a.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||"hover"!==this.type||this.openCalciteDropdown()}pointerLeaveHandler(){this.disabled||"hover"!==this.type||this.closeCalciteDropdown()}calciteInternalDropdownItemKeyEvent(a){const {keyboardEvent:b}=a.detail,c=b.target;switch(b.key){case "Tab":this.items.indexOf(c)!==this.items.length-
1||b.shiftKey?0===this.items.indexOf(c)&&b.shiftKey&&this.closeCalciteDropdown():this.closeCalciteDropdown();break;case "ArrowDown":e.focusElementInGroup(this.items,c,"next");break;case "ArrowUp":e.focusElementInGroup(this.items,c,"previous");break;case "Home":e.focusElementInGroup(this.items,c,"first");break;case "End":e.focusElementInGroup(this.items,c,"last")}a.stopPropagation()}handleItemSelect(a){this.updateSelectedItems();a.stopPropagation();this.calciteDropdownSelect.emit();this.closeOnSelectDisabled&&
"none"!==a.detail.requestedDropdownGroup.selectionMode||this.closeCalciteDropdown();a.stopPropagation()}onBeforeOpen(){this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit()}updateSelectedItems(){this.selectedItems=this.items.filter(a=>a.selected)}getMaxScrollerHeight(){const {maxItems:a,items:b}=this;let c=0,g=0,h;this.groups.forEach(n=>{0<a&&c<a&&Array.from(n.children).forEach((t,
x)=>{0===x&&(isNaN(h)&&(h=t.offsetTop),g+=h);c<a&&(g+=t.offsetHeight,c+=1)})});return b.length>a?g:0}closeCalciteDropdown(a=!0){this.open=!1;a&&e.focusElement(this.triggers[0])}getFocusableElement(a){a&&(a=a.attributes.isLink?a.shadowRoot.querySelector("a"):a,e.focusElement(a))}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],
placement:["placementHandler"]}}static get style(){return"@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-right{0%{opacity:0;transform:translate3D(-5px, 0, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-left{0%{opacity:0;transform:translate3D(5px, 0, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-right{animation-name:in-right}.calcite-animate__in-left{animation-name:in-left}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:var(--calcite-app-z-index-dropdown)}:host([hidden]){display:none}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;flex:0 1 auto}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:var(--calcite-app-z-index-dropdown);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-app-z-index);border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^\x3dbottom] .calcite-floating-ui-anim{transform:translateY(-5px)}.calcite-dropdown-wrapper[data-placement^\x3dtop] .calcite-floating-ui-anim{transform:translateY(5px)}.calcite-dropdown-wrapper[data-placement^\x3dleft] .calcite-floating-ui-anim{transform:translateX(5px)}.calcite-dropdown-wrapper[data-placement^\x3dright] .calcite-floating-ui-anim{transform:translateX(-5px)}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-ui-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;flex:1 1 auto;word-wrap:break-word;word-break:break-word}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width\x3ds]){--calcite-dropdown-width:12rem}:host([width\x3dm]){--calcite-dropdown-width:14rem}:host([width\x3dl]){--calcite-dropdown-width:16rem}"}},
[17,"calcite-dropdown",{open:[1540],closeOnSelectDisabled:[516,"close-on-select-disabled"],disabled:[516],flipPlacements:[16],maxItems:[514,"max-items"],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],selectedItems:[1040],type:[513],width:[513],setFocus:[64],reposition:[64]},[[9,"pointerdown","closeCalciteDropdownOnClick"],[0,"calciteInternalDropdownCloseRequest","closeCalciteDropdownOnEvent"],[8,"calciteDropdownOpen","closeCalciteDropdownOnOpenEvent"],[1,"pointerenter",
"pointerEnterHandler"],[1,"pointerleave","pointerLeaveHandler"],[0,"calciteInternalDropdownItemKeyEvent","calciteInternalDropdownItemKeyEvent"],[0,"calciteInternalDropdownItemSelect","handleItemSelect"]]]);q();k.CalciteDropdown=r;k.defineCustomElement=q;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});