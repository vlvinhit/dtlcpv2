// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../chunks/_rollupPluginBabelHelpers","../request","../core/Error","./messages"],function(g,p,q,h,r){async function t(b,a,d,c){var e=a.exec(d);if(!e)throw new h("esri-intl:invalid-bundle",`Bundle id "${d}" is not compatible with the pattern "${a}"`);a=e[1]?`${e[1]}/`:"";e=e[2];const f=r.normalizeMessageBundleLocale(c);c=`${a}${e}.json`;a=f?`${a}${e}_${f}.json`:c;let k;try{k=await m(b(a))}catch(u){if(a===c)throw new h("intl:unknown-bundle",`Bundle "${d}" cannot be loaded`,{error:u});
try{k=await m(b(c))}catch(v){throw new h("intl:unknown-bundle",`Bundle "${d}" cannot be loaded`,{error:v});}}return k}async function m(b){if(null!=l.fetchBundleAsset)return l.fetchBundleAsset(b);b=await q(b,{responseType:"text"});return JSON.parse(b.data)}let n=function(){function b({base:a="",pattern:d,location:c=new URL(window.location.href)}){let e;e="string"===typeof c?f=>(new URL(f,new URL(c,window.location.href))).href:c instanceof URL?f=>(new URL(f,c)).href:c;this.pattern="string"===typeof d?
new RegExp(`^${d}`):d;this.getAssetUrl=e;a=a?a.endsWith("/")?a:a+"/":"";this.matcher=new RegExp(`^${a}(?:(.*)/)?(.*)$`)}b.prototype.fetchMessageBundle=function(a,d){return t(this.getAssetUrl,this.matcher,a,d)};return p._createClass(b)}();const l={};g.JSONLoader=n;g.createJSONLoader=function(b){return new n(b)};g.test=l;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});