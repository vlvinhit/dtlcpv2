// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/handleUtils ../../core/maybe ../../core/memoize ../../core/reactiveUtils ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ElevationProfileLine ./support/elevationQuerySourceUtils".split(" "),function(h,c,m,v,n,w,x,p,d,b,D,E,y,z,A){b=function(q){function g(a){a=q.call(this,
a)||this;a.type="ground";a.color=new m("#ff7f00");a.viewVisualizationEnabled=!0;a.numSamplesForPreview=50;a.numSamplesPerChunk=1E3;a._getQueryElevationDependencies=w.memoize((f,e)=>({ground:f,groundLayers:e}));return a}h._inherits(g,q);var r=g.prototype;r.queryElevation=async function(a,f){var e=this._queryElevationDependencies;if(null==e)throw Error("ElevationProfileLineGround: no dependencies");const {ground:k}=e;if(null==k)throw Error("No ground configured in the view");e=await k.queryElevation(a,
f);const t=p.getMetersPerVerticalUnitForSR(a.spatialReference),u=p.getMetersPerVerticalUnitForSR(k.layers.at(0).spatialReference);t!==u&&(a=e.geometry,a.points=a.points.map(([B,C,l])=>[B,C,l===f.noDataValue?l:l*u/t]));return e};r.attach=function(a){return v.handlesGroup([h._get(h._getPrototypeOf(g.prototype),"attach",this).call(this,a),x.watch(()=>this._queryElevationDependencies,()=>this._onChange())])};h._createClass(g,[{key:"available",get:function(){const a=this._ground;return null!=a&&a.layers.some(f=>
f.visible)}},{key:"minDemResolution",get:function(){return A.getGroundMinDemResolution(this._ground)}},{key:"_queryElevationDependencies",get:function(){return this._getQueryElevationDependencies(this._ground,this._groundLayers)}},{key:"_ground",get:function(){return n.applySome(this._viewModel?.view,a=>a.map?.ground)}},{key:"_groundLayers",get:function(){return n.applySome(this._ground,a=>a.layers?.toArray())??[]}}]);return g}(z);c.__decorate([d.property({type:m,nonNullable:!0})],b.prototype,"color",
void 0);c.__decorate([d.property()],b.prototype,"viewVisualizationEnabled",void 0);c.__decorate([d.property()],b.prototype,"available",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"minDemResolution",null);c.__decorate([d.property()],b.prototype,"_queryElevationDependencies",null);c.__decorate([d.property()],b.prototype,"_ground",null);c.__decorate([d.property()],b.prototype,"_groundLayers",null);return b=c.__decorate([y.subclass("esri.widgets.ElevationProfile.ElevationProfileLineGround")],
b)});