// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/Handles ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec4f64 ../../../geometry/Polyline ../../../views/3d/interactive/visualElements/OutlineVisualElement ./constants".split(" "),
function(h,p,l,u,v,w,q,x,r,E,F,G,y,z,A,B,C){h.ProfileLines3D=function(t){function m(a){a=t.call(this,a)||this;a._chartData=null;a._visualElements=[];a._handles=new w;return a}p._inherits(m,t);var f=m.prototype;f.initialize=function(){const a=x.throttle(c=>{this._update(c)},100);this._handles.add([q.watch(()=>({spatialReference:this.view.spatialReference,chartData:this._chartData}),a,q.syncAndInitial),a])};f.destroy=function(){this._handles.destroy();this._destroyVisualElements()};f.remove=function(){this._destroyVisualElements()};
f.update=function(a){this._chartData=a};f._update=function(a){var {chartData:c}=a;if(null==c)return this.remove();if(c.refined){var e=this._visualElements;c=c.lines.filter(k=>k.viewVisualizationEnabled);for(var g=c.length;e.length>g;)e.pop().destroy();for(var b=C.getConfig().profileLinesStyle3D;e.length<g;){var d=new B.OutlineVisualElement({view:this.view,elevationInfo:{mode:"absolute-height",offset:0},innerWidth:b.width-b.outlineSize,width:b.width,falloff:b.falloff,color:b.outlineColor,renderOccluded:b.renderOccluded});
e.push(d)}a=a.spatialReference;for(b=0;b<g;++b){d=e[b];const k=c[g-1-b];d.geometry=this._createLineGeometry(k,a);d.innerColor=z.fromArray(u.toUnitRGBA(k.color))}}};f._createLineGeometry=function(a,c){a=a.samples??[];const e=a.length-1,g=[];let b=[];for(let d=0;d<=e;d++){const {x:k,y:D,z:n}=a[d];null!=n&&b.push([k,D,n]);d!==e&&null!=n||!b.length||(g.push(b),b=[])}return new A({paths:g,hasZ:!0,spatialReference:c})};f._destroyVisualElements=function(){this._visualElements.forEach(a=>a.destroy());this._visualElements.length=
0};return p._createClass(m)}(v);l.__decorate([r.property()],h.ProfileLines3D.prototype,"view",void 0);l.__decorate([r.property()],h.ProfileLines3D.prototype,"_chartData",void 0);h.ProfileLines3D=l.__decorate([y.subclass("esri.widgets.ElevationProfile.support.ProfileLines3D")],h.ProfileLines3D);Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});