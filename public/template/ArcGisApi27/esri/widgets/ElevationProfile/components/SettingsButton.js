// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/events ../../../core/maybe ../../../core/unitUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../Widget ../css ../../support/Popover ../../support/widgetUtils ../../support/decorators/messageBundle ../../support/jsxFactory".split(" "),function(e,q,k,t,h,u,m,A,
B,C,v,w,g,x,y,r,f){function z(n){n.preventDefault()}e.SettingsButton=function(n){function p(a,b){a=n.call(this,a,b)||this;a._popover=null;a._buttonElement=null;a._focusOutElement=null;a._requestFocusOnCreate=!1;return a}q._inherits(p,n);var c=p.prototype;c.destroy=function(){this._destroyPopover()};c.render=function(){const {unitSelector:a,uniformChartScalingToggle:b}=this.visibleElements;if(!a&&!b)return f.tsx("div",{key:`${this.id}-empty`});const d=null!=this._popover&&this._popover.open?this._messages.hideSettings:
this._messages.showSettings;return f.tsx("button",{class:g.SETTINGS_CSS.base,title:d,bind:this,afterCreate:this._initializePopover,onclick:this._togglePopover,"aria-label":d,type:"button"})};c._initializePopover=function(a){this._destroyPopover();this._buttonElement=a;this._popover=new x({owner:this,placement:"bottom-end",offset:[0,0],anchorElement:a,renderContentFunction:()=>this._renderPopoverContent()})};c._destroyPopover=function(){this._focusOutElement=h.removeMaybe(this._focusOutElement);this._popover=
h.destroyMaybe(this._popover)};c._renderPopoverContent=function(){const {unitSelector:a,uniformChartScalingToggle:b}=this.visibleElements;return f.tsx("div",{class:g.SETTINGS_CSS.popoverContent,dir:y.getDir(this._buttonElement),bind:this,afterCreate:this._onPopoverContentAfterCreate},a&&this._renderUnitSelector(),b&&this._renderUniformChartScalingToggle())};c._renderUnitSelector=function(){const {unit:a,unitOptions:b}=this.viewModel,d=this._messagesUnits;return f.tsx("label",{key:"unit-selector-label",
class:g.SETTINGS_CSS.selectLabel},this._messages.unitSelectLabel,f.tsx("select",{class:g.SETTINGS_CSS.select,value:a,bind:this,onchange:this._onUnitChange,afterCreate:this._onUnitSelectAfterCreate},b.map(l=>f.tsx("option",{key:l,value:l},u.isMeasurementSystem(l)?d.systems[l]:d.units[l].pluralCapitalized))))};c._onUnitChange=function(a){this.viewModel.unit=a.target.value};c._onUnitSelectAfterCreate=function(a){this._requestFocusOnCreate&&(this._requestFocusOnCreate=!1,a.focus())};c._renderUniformChartScalingToggle=
function(){const a=this._messages,b=this.viewModel.uniformChartScaling,d=b?a.uniformChartScalingDisable:a.uniformChartScalingEnable;return f.tsx("label",{key:"uniform-chart-scaling-label",class:g.SETTINGS_CSS.checkboxLabel,onmousedown:z},f.tsx("input",{class:this.classes(g.SETTINGS_CSS.checkbox,g.SETTINGS_CSS.uniformChartScalingCheckbox),type:"checkbox",checked:b,title:d,"aria-label":d,bind:this,onchange:this._onUniformChartScalingChange}),a.uniformChartScalingLabel)};c._onUniformChartScalingChange=
function(a){this.viewModel.uniformChartScaling=a.target.checked};c._togglePopover=function(a){null!=this._popover&&this._popover.open?this._closePopover():this._openPopover()};c._openPopover=function(){h.applySome(this._popover,a=>a.open=!0);this._requestFocusOnCreate=!0};c._closePopover=function({focusOnButton:a=!0}={}){h.applySome(this._popover,b=>b.open=!1);a&&h.applySome(this._buttonElement,b=>b.focus())};c._onPopoverContentAfterCreate=function(a){h.removeMaybe(this._focusOutElement);this._focusOutElement=
t.on(a,"focusout",({relatedTarget:b})=>{const d=a.contains(b);b=b===this._buttonElement;d||b||this._closePopover({focusOnButton:!1})})};return q._createClass(p)}(w);k.__decorate([m.property()],e.SettingsButton.prototype,"viewModel",void 0);k.__decorate([m.property()],e.SettingsButton.prototype,"visibleElements",void 0);k.__decorate([m.property(),r.messageBundle("esri/widgets/ElevationProfile/t9n/ElevationProfile")],e.SettingsButton.prototype,"_messages",void 0);k.__decorate([m.property(),r.messageBundle("esri/core/t9n/Units")],
e.SettingsButton.prototype,"_messagesUnits",void 0);e.SettingsButton=k.__decorate([v.subclass("esri.widgets.ElevationProfile.SettingsButton")],e.SettingsButton);Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});