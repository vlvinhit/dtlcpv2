// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/throttle":function(){define(["exports"],function(p){p.throttle=function(r,v,e,x){let L=null,K=1E3;"number"===typeof v?(K=v,x=e):(L=v??null,K=e);let R=0,J;const C=()=>{R=0;r.apply(x,J)};v=(...t)=>{L&&L.apply(x,t);J=t;K?R||(R=setTimeout(C,K)):C()};v.remove=()=>{R&&(clearTimeout(R),R=0)};v.forceUpdate=()=>{R&&(clearTimeout(R),C())};v.hasPendingUpdates=()=>!!R;return v};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureRelationship ./Feature/FeatureViewModel ./Feature/resources ./Feature/support/FeatureContentMixin ./support/componentsUtils ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H,u,y,G,z,ba,Z,D,q,m,n,E){var Y;const U={title:!0,content:!0,lastEditedInfo:!0};e=Y=function(ea){function aa(O,da){O=ea.call(this,O,da)||this;O._contentWidgets=[];O.flowItems=null;O.headingLevel=2;O.messages=null;O.messagesCommon=null;O.messagesURIUtils=null;O.visibleElements={...U};O.viewModel=new G;return O}r._inherits(aa,ea);var fa=aa.prototype;fa.initialize=function(){this.addHandles(x.watch(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),
x.initial))};fa.loadDependencies=function(){return Z.loadCalciteComponents({notice:()=>new Promise((O,da)=>p(["../chunks/calcite-notice"],O,da))})};fa.destroy=function(){this._destroyContentWidgets()};fa.castVisibleElements=function(O){return{...U,...O}};fa.render=function(){var {state:O}=this.viewModel;O=n.tsx("div",{class:z.CSS.container,key:"container"},this.renderTitle(),"error"===O?this.renderError():"loading"===O?this.renderLoading():this.renderContentContainer());return n.tsx("div",{class:this.classes(z.CSS.base,
z.CSS.esriWidget)},O)};fa.setActiveMedia=function(O,da){return this.viewModel.setActiveMedia(O,da)};fa.nextMedia=function(O){return this.viewModel.nextMedia(O)};fa.previousMedia=function(O){return this.viewModel.previousMedia(O)};fa.renderError=function(){const {messagesCommon:O,messages:da,visibleElements:la}=this;return n.tsx("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},la.title?n.tsx("div",{key:"error-title",slot:"title"},O.errorMessage):null,n.tsx("div",{key:"error-message",
slot:"message"},da.loadingError))};fa.renderLoading=function(){return n.tsx("div",{key:"loading-container",class:z.CSS.loadingSpinnerContainer},n.tsx("span",{class:this.classes(z.CSS.iconLoading,z.CSS.spinner)}))};fa.renderContentContainer=function(){const {visibleElements:O}=this;return O.content?n.tsx("div",{class:z.CSS.main},[this.renderContent(),this.renderLastEditInfo()]):null};fa.renderTitle=function(){const {visibleElements:O,title:da}=this;return O.title?n.tsx(D.Heading,{level:this.headingLevel,
class:z.CSS.title,innerHTML:da}):null};fa.renderContent=function(){var O=this.viewModel.content;return O?Array.isArray(O)?O.length?n.tsx("div",{class:z.CSS.contentNode,key:"content-content-elements"},O.map(this.renderContentElement,this)):null:"string"===typeof O?(O=this._contentWidgets[0],!O||O.destroyed?null:n.tsx("div",{class:z.CSS.contentNode,key:"content-content"},O.render())):this.renderNodeContent(O):null};fa.renderContentElement=function(O,da){const {visibleElements:la}=this;if("boolean"!==
typeof la.content&&!la.content?.[O.type])return null;switch(O.type){case "attachments":return this.renderAttachments(da);case "custom":return this.renderCustom(O,da);case "fields":return this.renderFields(da);case "media":return this.renderMedia(da);case "text":return this.renderText(O,da);case "expression":return this.renderExpression(da);case "relationship":return this.renderRelationship(da);default:return null}};fa.renderAttachments=function(O){const da=this._contentWidgets[O];if(!da||da.destroyed)return null;
const {state:la,attachmentInfos:l}=da.viewModel;return"loading"===la||0<l.length?n.tsx("div",{key:this._buildKey("attachments-element",O),class:this.classes(z.CSS.contentElement)},da.render()):null};fa.renderRelationship=function(O){const da=this._contentWidgets[O];return da&&!da.destroyed&&this.flowItems?n.tsx("div",{key:this._buildKey("relationship-element",O),class:z.CSS.contentElement},da.render()):null};fa.renderExpression=function(O){const da=this._contentWidgets[O];return!da||da.destroyed?
null:n.tsx("div",{key:this._buildKey("expression-element",O),class:z.CSS.contentElement},da.render())};fa.renderCustom=function(O,da){({creator:O}=O);const la=this._contentWidgets[da];return!la||la.destroyed?null:O?n.tsx("div",{key:this._buildKey("custom-element",da),class:z.CSS.contentElement},la.render()):null};fa.renderFields=function(O){const da=this._contentWidgets[O];return!da||da.destroyed?null:n.tsx("div",{key:this._buildKey("fields-element",O),class:z.CSS.contentElement},da.render())};fa.renderMedia=
function(O){const da=this._contentWidgets[O];return!da||da.destroyed?null:n.tsx("div",{key:this._buildKey("media-element",O),class:z.CSS.contentElement},da.render())};fa.renderLastEditInfo=function(){const {visibleElements:O,messages:da}=this;var {lastEditInfo:la}=this.viewModel;if(!la||!O.lastEditedInfo)return null;const {date:l,user:P}=la;la=E.substitute("edit"===la.type?P?da.lastEditedByUser:da.lastEdited:P?da.lastCreatedByUser:da.lastCreated,{date:l,user:P});return n.tsx("div",{key:"edit-info-element",
class:this.classes(z.CSS.lastEditedInfo,z.CSS.contentElement)},la)};fa.renderText=function(O,da){const la=this._contentWidgets[da];return!la||la.destroyed?null:O.text?n.tsx("div",{key:this._buildKey("text-element",da),class:this.classes(z.CSS.contentElement,z.CSS.text)},la.render()):null};fa._buildKey=function(O,...da){const la=this.get("viewModel.graphic.uid")||"0";da=da.join("-");return`${O}__${la}-${da}`};fa._destroyContentWidget=function(O){O&&(O.viewModel=null,!O.destroyed&&O.destroy())};fa._destroyContentWidgets=
function(){this.removeHandles("relationship-handles");this._contentWidgets.forEach(O=>this._destroyContentWidget(O));this._contentWidgets=[]};fa._addFeatureRelationshipHandles=function(O){const {flowItems:da,visibleElements:la}=this;this.addHandles([x.on(()=>O,"select-record",({featureViewModel:l})=>{da&&(l.abilities={relationshipContent:!0},da.push(new Y({flowItems:da,viewModel:l,visibleElements:la})))}),x.on(()=>O,"show-all-records",()=>{if(da){var {viewModel:l}=O;l.showAllEnabled=!0;l=new y({visibleElements:{title:!1,
description:!1},viewModel:l});this._addFeatureRelationshipHandles(l);da.push(l)}})],"relationship-handles")};fa._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:O,visibleElements:da}=this;var la=this.get("viewModel.content");const {contentViewModels:l}=this.viewModel;Array.isArray(la)?la.forEach((P,W)=>{"attachments"===P.type&&(this._contentWidgets[W]=new f({displayType:P.displayType,headingLevel:da.title?O+1:O,viewModel:l[W]}));"fields"===P.type&&(this._contentWidgets[W]=
new H({viewModel:l[W]}));"media"===P.type&&(this._contentWidgets[W]=new u({viewModel:l[W]}));"text"===P.type&&(this._contentWidgets[W]=new w({viewModel:l[W]}));"custom"===P.type&&(this._contentWidgets[W]=new w({viewModel:l[W]}));"expression"===P.type&&(this._contentWidgets[W]=new F({viewModel:l[W]}));"relationship"===P.type&&(P=new y({viewModel:l[W]}),this._addFeatureRelationshipHandles(P),this._contentWidgets[W]=P)},this):(la=l[0])&&!la.destroyed&&(this._contentWidgets[0]=new w({viewModel:la}));
this.scheduleRender()};r._createClass(aa,[{key:"graphic",get:function(){return this.viewModel.graphic},set:function(O){this.viewModel.graphic=O}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(O){this.viewModel.defaultPopupTemplateEnabled=O}},{key:"isTable",get:function(){return this.viewModel.isTable}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(O){this._overrideIfSome("label",O)}},{key:"spatialReference",
get:function(){return this.viewModel.spatialReference},set:function(O){this.viewModel.spatialReference=O}},{key:"title",get:function(){return this.viewModel.title}},{key:"map",get:function(){return this.viewModel.map},set:function(O){this.viewModel.map=O}},{key:"view",get:function(){return this.viewModel.view},set:function(O){this.viewModel.view=O}}]);return aa}(ba.FeatureContentMixin(t));v.__decorate([L.property()],e.prototype,"graphic",null);v.__decorate([L.property()],e.prototype,"defaultPopupTemplateEnabled",
null);v.__decorate([L.property()],e.prototype,"flowItems",void 0);v.__decorate([L.property()],e.prototype,"headingLevel",void 0);v.__decorate([L.property({readOnly:!0})],e.prototype,"isTable",null);v.__decorate([L.property()],e.prototype,"label",null);v.__decorate([L.property(),m.messageBundle("esri/widgets/Feature/t9n/Feature")],e.prototype,"messages",void 0);v.__decorate([L.property(),m.messageBundle("esri/t9n/common")],e.prototype,"messagesCommon",void 0);v.__decorate([L.property(),m.messageBundle("esri/widgets/support/t9n/uriUtils")],
e.prototype,"messagesURIUtils",void 0);v.__decorate([L.property()],e.prototype,"spatialReference",null);v.__decorate([L.property({readOnly:!0})],e.prototype,"title",null);v.__decorate([L.property()],e.prototype,"visibleElements",void 0);v.__decorate([K.cast("visibleElements")],e.prototype,"castVisibleElements",null);v.__decorate([L.property()],e.prototype,"map",null);v.__decorate([L.property()],e.prototype,"view",null);v.__decorate([L.property({type:G})],e.prototype,"viewModel",void 0);return e=Y=
v.__decorate([C.subclass("esri.widgets.Feature")],e)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F){x=function(H){function u(G,z){G=H.call(this,G,z)||this;G._featureElementInfo=null;G.attachmentsWidget=new J;G.headingLevel=2;G.viewModel=new t;return G}p._inherits(u,H);var y=u.prototype;y.initialize=function(){this._featureElementInfo=new f;this.addHandles([v.watch(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),v.initial),v.watch(()=>this.viewModel,G=>this.attachmentsWidget.viewModel=G,v.initial)])};
y.destroy=function(){this.attachmentsWidget.viewModel=null;this.attachmentsWidget.destroy();this._featureElementInfo?.destroy()};y.render=function(){const {attachmentsWidget:G}=this;return F.tsx("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),G?.render())};y._setupFeatureElementInfo=function(){const {description:G,title:z,headingLevel:ba}=this;this._featureElementInfo?.set({description:G,title:z,headingLevel:ba})};p._createClass(u,[{key:"description",get:function(){return this.viewModel.description},
set:function(G){this.viewModel.description=G}},{key:"displayType",get:function(){return this.attachmentsWidget.displayType},set:function(G){this.attachmentsWidget.displayType=G}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(G){this.viewModel.graphic=G}},{key:"title",get:function(){return this.viewModel.title},set:function(G){this.viewModel.title=G}}]);return u}(C);r.__decorate([e.property({readOnly:!0})],x.prototype,"attachmentsWidget",void 0);r.__decorate([e.property()],
x.prototype,"description",null);r.__decorate([e.property()],x.prototype,"displayType",null);r.__decorate([e.property()],x.prototype,"graphic",null);r.__decorate([e.property()],x.prototype,"headingLevel",void 0);r.__decorate([e.property()],x.prototype,"title",null);r.__decorate([e.property({type:t})],x.prototype,"viewModel",void 0);return x=r.__decorate([R.subclass("esri.widgets.Feature.FeatureAttachments")],x)})},"esri/widgets/Attachments":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/componentsUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H,u,y,G){const z={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},ba=window.CSS;J=function(Z){function D(m,n){m=Z.call(this,m,n)||this;m.displayType="auto";m.messages=null;m.messagesUnits=null;m.selectedFile=null;m.submitting=!1;m.viewModel=null;m.visibleElements={...z};m._supportsImageOrientation=ba&&ba.supports&&ba.supports("image-orientation","from-image");m._addAttachmentForm=
null;m._updateAttachmentForm=null;return m}r._inherits(D,Z);var q=D.prototype;q.initialize=function(){this.viewModel||(this.viewModel=new w);this.addHandles([x.on(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),x.on(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),x.watch(()=>this.viewModel?.mode,()=>this._modeChanged(),x.initial)])};q.loadDependencies=function(){return H.loadCalciteComponents({icon:()=>new Promise((m,n)=>p(["../chunks/calcite-icon"],m,n))})};
q.castVisibleElements=function(m){return{...z,...m}};q.addAttachment=function(){const {_addAttachmentForm:m,viewModel:n}=this;this._set("submitting",!0);this._set("error",null);return n.addAttachment(m).then(E=>{this._set("submitting",!1);this._set("error",null);n.mode="view";return E}).catch(E=>{this._set("submitting",!1);this._set("error",new e("attachments:add-attachment",this.messages.addErrorMessage,E));throw E;})};q.deleteAttachment=function(m){const {viewModel:n}=this;this._set("submitting",
!0);this._set("error",null);return n.deleteAttachment(m).then(E=>{this._set("submitting",!1);this._set("error",null);n.mode="view";return E}).catch(E=>{this._set("submitting",!1);this._set("error",new e("attachments:delete-attachment",this.messages.deleteErrorMessage,E));throw E;})};q.updateAttachment=function(){const {viewModel:m}=this,{_updateAttachmentForm:n}=this;this._set("submitting",!0);this._set("error",null);return m.updateAttachment(n).then(E=>{this._set("submitting",!1);this._set("error",
null);m.mode="view";return E}).catch(E=>{this._set("submitting",!1);this._set("error",new e("attachments:update-attachment",this.messages.updateErrorMessage,E));throw E;})};q.addFile=function(){const m=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);this.viewModel.mode="view";return m};q.updateFile=function(){const {viewModel:m}=this,n=m.updateFile(this.selectedFile,this._updateAttachmentForm,m.activeFileInfo);m.mode="view";return n};q.deleteFile=function(m){m=this.viewModel.deleteFile(m||
this.viewModel.activeFileInfo?.file);this.viewModel.mode="view";return m};q.render=function(){const {submitting:m,viewModel:n}=this,{state:E}=n;return G.tsx("div",{class:this.classes("esri-attachments","esri-widget")},m?this.renderProgressBar():null,"loading"===E?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};q.renderErrorMessage=function(){const {error:m,visibleElements:n}=this;return m&&n.errorMessage?G.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},
m.message):null};q.renderAttachments=function(){const {activeFileInfo:m,mode:n,activeAttachmentInfo:E}=this.viewModel;return"add"===n?this.renderAddForm():"edit"===n?this.renderDetailsForm(E||m):this.renderAttachmentContainer()};q.renderLoading=function(){return G.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},G.tsx("div",{class:"esri-attachments__loader"}))};q.renderProgressBar=function(){return this.visibleElements.progressBar?G.tsx("div",{class:"esri-attachments__progress-bar",
key:"progress-bar"}):null};q.renderAddForm=function(){const {submitting:m,selectedFile:n}=this;var E=m||!n,Y=this.visibleElements.cancelAddButton?G.tsx("button",{type:"button",bind:this,disabled:m,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",m&&"esri-button--disabled")},this.messages.cancel):null;E=this.visibleElements.addSubmitButton?G.tsx("button",{type:"submit",disabled:E,class:this.classes("esri-button","esri-button--secondary",
"esri-button--small","esri-button--half",{["esri-button--disabled"]:E})},this.messages.add):null;const U=n?G.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},n.name):null;Y=G.tsx("form",{bind:this,afterCreate:u.storeNode,afterRemoved:u.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},G.tsx("fieldset",{class:"esri-attachments__file-fieldset"},U,G.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},
n?this.messages.changeFile:this.messages.selectFile,G.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),E,Y);return G.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},Y)};q.renderDetailsForm=function(m){const {visibleElements:n,viewModel:E,selectedFile:Y,submitting:U}=this;var {capabilities:ea}=E,aa=U||!Y;let fa;if(Y){var O=Y.type;fa=Y.name;var da=Y.size}else if(m&&"file"in m)O=m.file.type,fa=
m.file.name,da=m.file.size;else if(m&&"contentType"in m){O=m.contentType;fa=m.name;da=m.size;var la=m.url}var l=ea.editing&&ea.operations?.delete&&n.deleteButton?G.tsx("button",{key:"delete-button",type:"button",disabled:U,bind:this,onclick:W=>this._submitDeleteAttachment(W,m),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:U})},this.messages.delete):void 0;aa=ea.editing&&ea.operations?.update&&n.updateButton?
G.tsx("button",{disabled:aa,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:aa})},this.messages.update):void 0;const P=this.visibleElements.cancelUpdateButton?G.tsx("button",{disabled:U,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:U})},this.messages.cancel):void 0;
ea=ea.editing&&ea.operations?.update?G.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},G.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},fa),G.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,G.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0;da=G.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},
G.tsx("label",null,L.formatFileSize(this.messagesUnits,da??0)));O=G.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},G.tsx("label",null,O));la=null!=la?G.tsx("a",{class:"esri-attachments__item-link",href:la,rel:"noreferrer",target:"_blank"},this.renderImageMask(m,400),G.tsx("div",{class:"esri-attachments__item-link-overlay"},G.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},G.tsx("calcite-icon",{icon:"launch"})))):this.renderImageMask(m,400);l=G.tsx("form",
{bind:this,afterCreate:u.storeNode,afterRemoved:u.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:W=>this._submitUpdateAttachment(W,m)},G.tsx("div",{class:"esri-attachments__metadata"},da,O),ea,G.tsx("div",{class:"esri-attachments__actions"},l,P,aa));return G.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},la,l)};q.renderImageMask=function(m,n){return m?"file"in m?this.renderGenericImageMask(m.file.name,m.file.type):this.renderImageMaskForAttachment(m,n):null};
q.renderGenericImageMask=function(m,n){var {supportsResizeAttachments:E}=this.viewModel;n=F.getIconPath(n);E={["esri-attachments__image--resizable"]:E};return G.tsx("div",{key:n,class:this.classes("esri-attachments__item-mask--icon","esri-attachments__item-mask")},G.tsx("img",{title:m,alt:m,src:n,class:this.classes(E,"esri-attachments__image")}))};q.renderImageMaskForAttachment=function(m,n){var {supportsResizeAttachments:E}=this.viewModel;if(!m)return null;const {contentType:Y,name:U,url:ea}=m;if(!E||
!F.isSupportedImage(Y))return this.renderGenericImageMask(U,Y);m=(m=this._getCSSTransform(m))?{transform:m,"image-orientation":"none"}:{};n=`${ea}${ea?.includes("?")?"\x26":"?"}w=${n}`;E={["esri-attachments__image--resizable"]:E};return G.tsx("div",{key:n,class:this.classes("esri-attachments__item-mask")},G.tsx("img",{styles:m,alt:U,title:U,src:n,class:this.classes(E,"esri-attachments__image")}))};q.renderFile=function(m){const {file:n}=m;return G.tsx("li",{class:"esri-attachments__item",key:n},G.tsx("button",
{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(m),type:"button"},this.renderImageMask(m),G.tsx("label",{class:"esri-attachments__label"},G.tsx("span",{class:"esri-attachments__filename"},n.name||this.messages.noTitle),G.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",u.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}))))};
q.renderAttachmentInfo=function({attachmentInfo:m,displayType:n}){const {viewModel:E,effectiveDisplayType:Y}=this,{capabilities:U,supportsResizeAttachments:ea}=E,{contentType:aa,name:fa,url:O}=m;n=this.renderImageMask(m,"list"===n?48:400);var da=U.editing?G.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",u.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;da="preview"===Y&&ea&&F.isSupportedImage(aa)?null:G.tsx("label",{class:"esri-attachments__label"},
G.tsx("span",{class:"esri-attachments__filename"},fa||this.messages.noTitle),da);n=[n,da];n=U.editing?G.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":m.id,onclick:()=>this._startEditAttachment(m),type:"button"},n):G.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:O??void 0,target:"_blank"},n);return G.tsx("li",{class:"esri-attachments__item",
key:m},n)};q.renderAttachmentContainer=function(){const {effectiveDisplayType:m,viewModel:n,visibleElements:E}=this,{attachmentInfos:Y,capabilities:U,fileInfos:ea}=n;var aa=!!Y?.length;const fa=!!ea?.length,O={["esri-attachments__container--list"]:"preview"!==m,["esri-attachments__container--preview"]:"preview"===m},da=U.editing&&U.operations?.add&&E.addButton?G.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),
type:"button"},G.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):void 0,la=aa?G.tsx("ul",{key:"attachments-list",class:"esri-attachments__items"},Y.toArray().map(P=>this.renderAttachmentInfo({attachmentInfo:P,displayType:m}))):void 0,l=fa?G.tsx("ul",{key:"file-list",class:"esri-attachments__items"},ea.toArray().map(P=>this.renderFile(P))):void 0;aa=fa||aa?void 0:G.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);
return G.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",O)},la,l,aa,da)};q._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};q._handleFileInputChange=function(m){m=(m=m.target)&&m.files&&m.files.item(0);this._set("selectedFile",m)};q._submitDeleteAttachment=function(m,n){m.preventDefault();n&&("file"in n?this.deleteFile(n.file):n&&this.deleteAttachment(n))};q._submitAddAttachment=function(m){m.preventDefault();this.viewModel.filesEnabled?
this.addFile():this.addAttachment()};q._submitUpdateAttachment=function(m,n){m.preventDefault();n&&"file"in n?this.updateFile():this.updateAttachment()};q._startEditAttachment=function(m){const {viewModel:n}=this;n.activeFileInfo=null;n.activeAttachmentInfo=m;n.mode="edit"};q._startEditFile=function(m){const {viewModel:n}=this;n.activeAttachmentInfo=null;n.activeFileInfo=m;n.mode="edit"};q._startAddAttachment=function(){this.viewModel.mode="add"};q._cancelForm=function(m){m.preventDefault();this.viewModel.mode=
"view"};q._getCSSTransform=function(m){({orientationInfo:m}=m);return!this._supportsImageOrientation&&m?[m.rotation?`rotate(${m.rotation}deg)`:"",m.mirrored?"scaleX(-1)":""].join(" "):""};r._createClass(D,[{key:"capabilities",get:function(){return this.viewModel.capabilities},set:function(m){this.viewModel.capabilities=m}},{key:"effectiveDisplayType",get:function(){const {displayType:m}=this;return m&&"auto"!==m?m:this.viewModel.supportsResizeAttachments?"preview":"list"}},{key:"graphic",get:function(){return this.viewModel.graphic},
set:function(m){this.viewModel.graphic=m}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(m){this._overrideIfSome("label",m)}}]);return D}(f);v.__decorate([K.property()],J.prototype,"capabilities",null);v.__decorate([K.property()],J.prototype,"displayType",void 0);v.__decorate([K.property({readOnly:!0})],J.prototype,"effectiveDisplayType",null);v.__decorate([K.property()],J.prototype,"graphic",null);v.__decorate([K.property()],J.prototype,"label",null);v.__decorate([K.property(),
y.messageBundle("esri/widgets/Attachments/t9n/Attachments")],J.prototype,"messages",void 0);v.__decorate([K.property(),y.messageBundle("esri/core/t9n/Units")],J.prototype,"messagesUnits",void 0);v.__decorate([K.property({readOnly:!0})],J.prototype,"selectedFile",void 0);v.__decorate([K.property({readOnly:!0})],J.prototype,"submitting",void 0);v.__decorate([K.property({readOnly:!0})],J.prototype,"error",void 0);v.__decorate([K.property({type:w})],J.prototype,"viewModel",void 0);v.__decorate([K.property()],
J.prototype,"visibleElements",void 0);v.__decorate([R.cast("visibleElements")],J.prototype,"castVisibleElements",null);return J=v.__decorate([t.subclass("esri.widgets.Attachments")],J)})},"esri/core/unitFormatUtils":function(){define("exports ./ByteSizeUnit ./Cyclical ./mathUtils ./string ./unitUtils ../intl/number".split(" "),function(p,r,v,e,x,L,K){function R(F,H,u){return F.units[H][u]}function J(F,H,u,y=2,G="abbr"){return`${K.formatNumber(H,{minimumFractionDigits:y,maximumFractionDigits:y,signDisplay:0<
H?"never":"exceptZero"})} ${R(F,u,G)}`}function C(F,H,u,y=2,G="abbr"){return`${K.formatNumber(H,{minimumFractionDigits:y,maximumFractionDigits:y,signDisplay:"exceptZero"})} ${R(F,u,G)}`}function t(F,H){const u=JSON.stringify(H);let y=f.get(u);y||(y=new Intl.NumberFormat("en-US",H),f.set(u,y));return/\-?\+?360/.test(y.format(F))?0:F}const f=new Map,w=["B","kB","MB","GB","TB"];p.formatAngleDegrees=function(F,H,u,y,G){G=G??2;var z=v.cyclicalDegrees,ba=z.normalize;a:if(F=L.convertUnit(F,H,"degrees"),
u===y)u=F;else{switch(y){case "arithmetic":u=-F+90;break a;case "geographic":u=-F-90;break a}u=void 0}z=ba.call(z,u,0,!0);G={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:G,minimumFractionDigits:G,signDisplay:0<z?"never":"exceptZero"};z=t(z,G);return K.formatNumber(z,G)};p.formatDMS=function(F,H,u=2){F=L.convertUnit(F,H,"degrees");H=F-Math.floor(F);F-=H;H*=60;let y=H-Math.floor(H);H-=y;y*=60;return`${F.toFixed()}\u00b0 ${H.toFixed()}' ${y.toFixed(u)}"`};p.formatDecimal=J;p.formatFileSize=
function(F,H){let u=0===H?0:Math.floor(Math.log(H)/Math.log(r.ByteSizeUnit.KILOBYTES));u=e.clamp(u,0,w.length-1);H=K.formatNumber(H/r.ByteSizeUnit.KILOBYTES**u,{maximumFractionDigits:2});return x.replace(F.units.bytes[w[u]],{fileSize:H})};p.formatImperialArea=function(F,H,u,y=2,G="abbr"){const z=L.preferredImperialAreaUnit(H,u);return J(F,L.convertUnit(H,u,z),z,y,G)};p.formatImperialLength=function(F,H,u,y=2,G="abbr"){const z=L.preferredImperialLengthUnit(H,u);return J(F,L.convertUnit(H,u,z),z,y,
G)};p.formatImperialRelativeLength=function(F,H,u,y=2,G="abbr"){const z=L.preferredImperialLengthUnit(H,u);return C(F,L.convertUnit(H,u,z),z,y,G)};p.formatImperialRelativeVerticalLength=function(F,H,u,y=2,G="abbr"){const z=L.preferredImperialVerticalLengthUnit(H,u);return C(F,L.convertUnit(H,u,z),z,y,G)};p.formatImperialVerticalLength=function(F,H,u,y=2,G="abbr"){const z=L.preferredImperialVerticalLengthUnit(H,u);return J(F,L.convertUnit(H,u,z),z,y,G)};p.formatMetricArea=function(F,H,u,y=2,G="abbr"){const z=
L.preferredMetricAreaUnit(H,u);return J(F,L.convertUnit(H,u,z),z,y,G)};p.formatMetricLength=function(F,H,u,y=2,G="abbr"){const z=L.preferredMetricLengthUnit(H,u);return J(F,L.convertUnit(H,u,z),z,y,G)};p.formatMetricRelativeLength=function(F,H,u,y=2,G="abbr"){const z=L.preferredMetricLengthUnit(H,u);return C(F,L.convertUnit(H,u,z),z,y,G)};p.formatMetricRelativeVerticalLength=function(F,H,u,y=2,G="abbr"){const z=L.preferredMetricVerticalLengthUnit(H,u);return C(F,L.convertUnit(H,u,z),z,y,G)};p.formatMetricVerticalLength=
function(F,H,u,y=2,G="abbr"){const z=L.preferredMetricVerticalLengthUnit(H,u);return J(F,L.convertUnit(H,u,z),z,y,G)};p.formatRelativeAngleDegrees=function(F,H,u,y,G){u!==y&&(F=-F);G=G??2;u={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:G,minimumFractionDigits:G,signDisplay:"exceptZero"};F=L.convertUnit(F,H,"degrees")%360;F=t(F,u);return K.formatNumber(F,u)};p.formatRelativeDecimal=C;p.unitName=R;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],
function(p){p.ByteSizeUnit=void 0;var r=p.ByteSizeUnit||(p.ByteSizeUnit={});r[r.KILOBYTES=1024]="KILOBYTES";r[r.MEGABYTES=1048576]="MEGABYTES";r[r.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H){const u={editing:!1,operations:{add:!0,update:!0,delete:!0}},y=x.ofType(w);e=function(G){function z(Z){var D=G.call(this,Z)||this;D._getAttachmentsPromise=null;D._attachmentLayer=null;D.capabilities={...u};D.activeAttachmentInfo=null;D.activeFileInfo=null;D.attachmentInfos=new y;D.fileInfos=new x;D.graphic=null;D.mode="view";D.filesEnabled=!1;D.addHandles(K.watch(()=>D.graphic,()=>D._graphicChanged(),K.initial));return D}p._inherits(z,G);var ba=z.prototype;
ba.destroy=function(){this.graphic=this._attachmentLayer=null};ba.castCapabilities=function(Z){return{...u,...Z}};ba.getAttachments=async function(){const {_attachmentLayer:Z,attachmentInfos:D}=this;if(!Z||"function"!==typeof Z.queryAttachments)throw new L("invalid-layer","getAttachments(): A valid layer is required.");const q=this._getObjectId();var m=new F({objectIds:[q],returnMetadata:!0});const n=[];this._getAttachmentsPromise=m=Z.queryAttachments(m).then(E=>E[q]||n).catch(()=>n);this.notifyChange("state");
m=await m;D.removeAll();m.length&&D.addMany(m);this._getAttachmentsPromise=null;this.notifyChange("state");return m};ba.addAttachment=async function(Z,D=this.graphic){const {_attachmentLayer:q,attachmentInfos:m,capabilities:n}=this;if(!D)throw new L("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:D});if(!Z)throw new L("invalid-attachment","addAttachment(): An attachment is required.",{attachment:Z});if(!n.operations?.add)throw new L("invalid-capabilities","addAttachment(): add capabilities are required.");
if(!q||"function"!==typeof q.addAttachment)throw new L("invalid-layer","addAttachment(): A valid layer is required.");Z=await q.addAttachment(D,Z).then(E=>this._queryAttachment(E.objectId,D));m.add(Z);return Z};ba.deleteAttachment=async function(Z){const {_attachmentLayer:D,attachmentInfos:q,graphic:m,capabilities:n}=this;if(!Z)throw new L("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:Z});if(!n.operations?.delete)throw new L("invalid-capabilities",
"deleteAttachment(): delete capabilities are required.");if(!D||"function"!==typeof D.deleteAttachments)throw new L("invalid-layer","deleteAttachment(): A valid layer is required.");if(!m)throw new L("invalid-graphic","deleteAttachment(): A graphic is required.");const E=await D.deleteAttachments(m,[Z.id]).then(()=>Z);q.remove(E);return E};ba.updateAttachment=async function(Z,D=this.activeAttachmentInfo){const {_attachmentLayer:q,attachmentInfos:m,graphic:n,capabilities:E}=this;if(!Z)throw new L("invalid-attachment",
"updateAttachment(): An attachment is required.",{attachment:Z});if(!D)throw new L("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:D});if(!E.operations?.update)throw new L("invalid-capabilities","updateAttachment(): Update capabilities are required.");const Y=m.findIndex(U=>U===D);if(!q||"function"!==typeof q.updateAttachment)throw new L("invalid-layer","updateAttachment(): A valid layer is required.");if(!n)throw new L("invalid-graphic","updateAttachment(): A graphic is required.");
Z=await q.updateAttachment(n,D.id,Z).then(U=>this._queryAttachment(U.objectId));m.splice(Y,1,Z);return Z};ba.commitFiles=async function(){await Promise.all(this.fileInfos.items.map(Z=>this.addAttachment(Z.form)));this.fileInfos.removeAll();return this.getAttachments()};ba.addFile=function(Z,D){if(!Z||!D)return null;Z={file:Z,form:D};this.fileInfos.add(Z);return Z};ba.updateFile=function(Z,D,q=this.activeFileInfo){if(!Z||!D||!q)return null;const m=this.fileInfos.findIndex(n=>q===n);-1<m&&this.fileInfos.splice(m,
1,{file:Z,form:D});return this.fileInfos.items[m]};ba.deleteFile=function(Z){const D=this.fileInfos.find(q=>q.file===Z);return D?(this.fileInfos.remove(D),D):null};ba._queryAttachment=async function(Z,D){const {_attachmentLayer:q}=this;if(!Z||!q?.queryAttachments)throw new L("invalid-attachment-id","Could not query attachment.");const m=this._getObjectId(D);Z=new F({objectIds:[m],attachmentsWhere:`AttachmentId=${Z}`,returnMetadata:!0});return q.queryAttachments(Z).then(n=>n[m][0])};ba._getObjectId=
function(Z=this.graphic){return Z?.getObjectId()??null};ba._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};ba._setAttachmentLayer=function(){var {graphic:Z}=this;this._attachmentLayer=(Z=H.getSourceLayer(Z))?"scene"===Z.type&&null!=Z.associatedLayer?Z.associatedLayer:Z:null};p._createClass(z,[{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){var {graphic:Z}=
this;if(!Z)return!1;Z=Z.layer||Z.sourceLayer;return Z?.loaded&&"capabilities"in Z&&Z.capabilities&&"operations"in Z.capabilities&&"supportsResizeAttachments"in Z.capabilities.operations&&Z.capabilities.operations.supportsResizeAttachments||!1}}]);return z}(e);r.__decorate([R.property()],e.prototype,"capabilities",void 0);r.__decorate([J.cast("capabilities")],e.prototype,"castCapabilities",null);r.__decorate([R.property()],e.prototype,"activeAttachmentInfo",void 0);r.__decorate([R.property()],e.prototype,
"activeFileInfo",void 0);r.__decorate([R.property({readOnly:!0,type:y})],e.prototype,"attachmentInfos",void 0);r.__decorate([R.property()],e.prototype,"fileInfos",void 0);r.__decorate([R.property({type:v})],e.prototype,"graphic",void 0);r.__decorate([R.property()],e.prototype,"mode",void 0);r.__decorate([R.property({readOnly:!0})],e.prototype,"state",null);r.__decorate([R.property()],e.prototype,"filesEnabled",void 0);r.__decorate([R.property({readOnly:!0})],e.prototype,"supportsResizeAttachments",
null);return e=r.__decorate([f.subclass("esri.widgets.Attachments.AttachmentsViewModel")],e)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),function(p,r,v,e,x,L,
K,R,J){var C;const t={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};v=C=function(f){function w(F){F=f.call(this,F)||this;F.contentType=null;F.exifInfo=null;F.id=null;F.globalId=null;F.keywords=null;F.name=null;F.parentGlobalId=null;F.parentObjectId=null;F.size=null;F.url=null;return F}
p._inherits(w,f);w.prototype.clone=function(){return new C({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};p._createClass(w,[{key:"orientationInfo",get:function(){var {exifInfo:F}=this;F=J.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:F});return t[F]||null}}]);return w}(v.JSONSupport);r.__decorate([e.property({type:String})],
v.prototype,"contentType",void 0);r.__decorate([e.property()],v.prototype,"exifInfo",void 0);r.__decorate([e.property({readOnly:!0})],v.prototype,"orientationInfo",null);r.__decorate([e.property({type:x.Integer})],v.prototype,"id",void 0);r.__decorate([e.property({type:String})],v.prototype,"globalId",void 0);r.__decorate([e.property({type:String})],v.prototype,"keywords",void 0);r.__decorate([e.property({type:String})],v.prototype,"name",void 0);r.__decorate([e.property({json:{read:!1}})],v.prototype,
"parentGlobalId",void 0);r.__decorate([e.property({json:{read:!1}})],v.prototype,"parentObjectId",void 0);r.__decorate([e.property({type:x.Integer})],v.prototype,"size",void 0);r.__decorate([e.property({json:{read:!1}})],v.prototype,"url",void 0);return v=C=r.__decorate([R.subclass("esri.layers.support.AttachmentInfo")],v)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(p){function r(v){const {tagName:e,tags:x}=v;return x&&e?(v=x.find(L=>L.name===e))&&v.value||null:null}
p.getExifValue=function(v){const {exifInfo:e,exifName:x,tagName:L}=v;return e&&x&&L?(v=e.find(K=>K.name===x))?r({tagName:L,tags:v.tags}):null:null};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../core/Logger ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../layers/support/layerUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(p,r,v,e,x,L,K,R,J){function C(M){return M?X.test(M):!1}function t(M,ja){if(!C(ja)||!M)return null;const qa=ja.replace(X,"").toLowerCase();let ua=null;M.some(ya=>ya.name.toLowerCase()===qa?(ua=ya,!0):!1);return ua}function f(M,ja){return(ja=w(ja,M))?ja.name:M}function w(M,ja){return M&&"function"===typeof M.getField&&ja?M.getField(ja)??null:null}function F({formattedAttributes:M,template:ja,fieldInfoMap:qa}){return`${v.replace(v.replace(ja,ua=>{const ya=qa.get(ua.toLowerCase());return`{${ya&&
ya.fieldName||ua}}`}),M).replaceAll(P,"")}`.trim()}function H(M,ja,qa=!1){const ua=ja[M];"string"===typeof ua&&(qa=(qa?encodeURIComponent(ua):ua).replaceAll(Q,"%27"),ja[M]=qa)}function u(M,ja=!1){const qa={...M};Object.keys(qa).forEach(ua=>H(ua,qa,ja));return qa}function y(M,ja){return M.replaceAll(W,(qa,ua,ya)=>(qa=w(ja,ya))?`{${qa.name}}`:ua)}function G(M,ja,qa){return(M=y(M,qa))?M.replaceAll(S,(ua,ya,Aa)=>{ya=`${ya||Aa}`.trim();return v.replace(ua,u(ja,ya&&"{"!==ya[0]||!1))}):M}function z(M){return null!=
M&&"object"===typeof M&&"layer"in M&&!!M.layer}function ba(M){return null!=M&&"object"===typeof M&&"fieldsIndex"in M&&"geometryType"in M&&"getField"in M&&"load"in M&&"loaded"in M&&"objectIdField"in M&&"spatialReference"in M&&"type"in M&&"feature"===M.type&&"when"in M}function Z(M){return null!=M&&"object"===typeof M&&"createQuery"in M&&"queryFeatureCount"in M&&"queryObjectIds"in M&&"queryRelatedFeatures"in M&&"queryRelatedFeaturesCount"in M&&"relationships"in M}function D(M){return ba(M)&&Z(M)}function q(M,
ja){const {fieldInfos:qa,fieldName:ua,preventPlacesFormatting:ya,layer:Aa}=ja;var Ba=m(qa,ua)?.clone();ja=w(Aa,ua);if(Ba&&!L.isRasterPixelValueField(ua)){const Ia=ja?.type;if("date"===Ia||"date-only"===Ia||"time-only"===Ia||"timestamp-offset"===Ia||Ba.format?.dateFormat){ja=Ba.format??new R;ja.dateFormat??(ja.dateFormat="date-only"===Ia?"short-date":"short-date-short-time");if("number"===typeof M){if(!(Ba=!z(Aa)&&K.isFeatureLayer(Aa)&&Aa.datesInUnknownTimezone)){if(Ba=z(Aa))Ba=Aa.layer,Ba=null!=Ba&&
"object"===typeof Ba&&"type"in Ba&&"map-image"===Ba.type;Ba=Ba&&Aa.layer.datesInUnknownTimezone}return ja.formatDate(M,Ba)}switch(Ia){case "date-only":return ja.formatDateOnly(M);case "time-only":return ja.formatTimeOnly(M);case "timestamp-offset":return ja.formatTimestamp(M)}}}ja=Ba?.format;if("string"===typeof M&&L.isRasterPixelValueField(ua)&&ja)return ja.formatRasterPixelValue(M);"string"!==typeof M||!ja||null!=ja.dateFormat||null==ja.places&&null==ja.digitSeparator||(Ba=Number(M),isNaN(Ba)||
(M=Ba));return"string"===typeof M||null==M||null==ja?Y(M):ya?x.formatNumber(M,{...x.convertNumberFormatToIntlOptions(ja),minimumFractionDigits:0,maximumFractionDigits:20}):ja.formatNumber(M)}function m(M,ja){if(M&&M.length&&ja)return M.find(qa=>qa.fieldName?.toLowerCase()===ja.toLowerCase())}function n({fieldName:M,graphic:ja,layer:qa}){if(fa(M)||!qa||"function"!==typeof qa.getFeatureType)return null;const {typeIdField:ua}=qa;return ua&&M===ua?(M=qa.getFeatureType(ja))?M.name:null:null}function E({fieldName:M,
value:ja,graphic:qa,layer:ua}){return fa(M)||!ua||"function"!==typeof ua.getFieldDomain?null:(M=qa&&ua.getFieldDomain(M,{feature:qa}))&&"coded-value"===M.type?M.getName(ja):null}function Y(M){return"string"===typeof M?M.replaceAll(T,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):M}function U(M){const {value:ja,fieldName:qa,fieldInfos:ua,fieldInfoMap:ya,layer:Aa,graphic:Ba}=M;if(null==ja)return"";if((M=E({fieldName:qa,value:ja,graphic:Ba,layer:Aa}))||(M=n({fieldName:qa,graphic:Ba,layer:Aa})))return M;
if(ya.get(qa.toLowerCase()))return q(ja,{fieldInfos:ua||Array.from(ya.values()),fieldName:qa,layer:Aa});switch(Aa?.fieldsIndex?.get(qa)?.type){case "date":return e.formatDate(ja);case "date-only":return e.formatDateOnly(ja);case "time-only":return e.formatTimeOnly(ja);case "timestamp-offset":return e.formatTimestamp(ja)}return Y(ja)}async function ea(M,ja){const {layer:qa,graphic:ua,outFields:ya,objectIds:Aa,returnGeometry:Ba,spatialReference:Ia}=M;M=Aa[0];if("number"!==typeof M&&"string"!==typeof M)return l.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",
{layer:qa,graphic:ua,objectId:M,requiredFields:ya}),null;if(!K.getEffectiveLayerCapabilities(qa)?.operations?.supportsQuery)return l.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:qa,graphic:ua,requiredFields:ya,returnGeometry:Ba}),null;M=qa.createQuery();M.objectIds=Aa;M.outFields=ya?.length?ya:[qa.objectIdField];M.returnGeometry=!!Ba;M.returnZ=!!Ba;M.returnM=!!Ba;M.outSpatialReference=Ia;return(await qa.queryFeatures(M,ja)).features[0]}async function aa(M){if(!M.expressionInfos?.length)return!1;
var ja=await J.loadArcade();({arcadeUtils:{hasGeometryFunctions:ja}}=ja);return ja(M)}function fa(M=""){return M?M.includes("relationships/"):!1}function O({attributes:M,graphic:ja,relatedInfo:qa,fieldInfos:ua,fieldInfoMap:ya,layer:Aa}){M&&ja&&qa&&Object.keys(ja.attributes).forEach(Ba=>{var Ia=(Ia={layerId:qa.relation.id.toString(),fieldName:Ba},`${"relationships/"}${Ia.layerId}/${Ia.fieldName}`);M[Ia]=U({fieldName:Ia,fieldInfos:ua,fieldInfoMap:ya,layer:Aa,value:ja.attributes[Ba],graphic:ja})})}function da({attributes:M,
relatedInfo:ja,fieldInfoMap:qa,fieldInfos:ua,layer:ya}){M&&ja&&(ja.relatedFeatures&&ja.relatedFeatures&&ja.relatedFeatures.forEach(Aa=>O({attributes:M,graphic:Aa,relatedInfo:ja,fieldInfoMap:qa,fieldInfos:ua,layer:ya})),ja.relatedStatsFeatures&&ja.relatedStatsFeatures&&ja.relatedStatsFeatures.forEach(Aa=>O({attributes:M,graphic:Aa,relatedInfo:ja,fieldInfoMap:qa,fieldInfos:ua,layer:ya})))}function la(M,ja,qa){return M.filter(D).find(ua=>ua!==ja&&ua.url===ja.url&&ua.layerId===qa.relatedTableId)}const l=
r.getLogger("esri.widgets.Feature.support.featureUtils"),P=/href=(""|'')/gi,W=/(\{([^\{\r\n]+)\})/g,Q=/'/g,X=/^\s*expression\//i,T=/(\n)/gi,k=/[\u00A0-\u9999<>&]/gim,S=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,N=/^(?:mailto:|tel:)/,ka=e.convertDateFormatToIntlOptions("short-date-short-time"),oa=M=>{if(!M)return!1;M=M.toUpperCase();return M.includes("CURRENT_TIMESTAMP")||M.includes("CURRENT_DATE")||M.includes("CURRENT_TIME")},sa=({layer:M,method:ja,query:qa,definitionExpression:ua})=>{M.capabilities?.query?.supportsCacheHint&&
"attachments"!==ja&&(M=null!=qa.where?qa.where:null,ja=null!=qa.geometry?qa.geometry:null,oa(ua)||oa(M)||"extent"===ja?.type||"tile"===qa.resultType||(qa.cacheHint=!0))};p.applyTextFormattingHTML=Y;p.createfieldInfoMap=function(M,ja){const qa=new Map;if(!M)return qa;M.forEach(ua=>{const ya=f(ua.fieldName,ja);ua.fieldName=ya;qa.set(ya.toLowerCase(),ua)});return qa};p.findRelatedLayer=function(M,ja,qa){return M&&ja&&qa?la(M.allLayers,ja,qa)||la(M.allTables,ja,qa):null};p.fixTokens=y;p.formatAttributes=
function({fieldInfos:M,attributes:ja,layer:qa,graphic:ua,fieldInfoMap:ya,relatedInfos:Aa}){const Ba={};Aa?.forEach(Ia=>da({attributes:Ba,relatedInfo:Ia,fieldInfoMap:ya,fieldInfos:M,layer:qa}));ja&&Object.keys(ja).forEach(Ia=>{Ba[Ia]=U({fieldName:Ia,fieldInfos:M,fieldInfoMap:ya,layer:qa,value:ja[Ia],graphic:ua})});return Ba};p.formatEditInfo=function(M,ja){const {creatorField:qa,creationDateField:ua,editorField:ya,editDateField:Aa}=M;if(ja){M=ja[Aa];if("number"===typeof M)return ja=ja[ya],{type:"edit",
date:e.formatDate(M,ka),user:ja};M=ja[ua];return"number"===typeof M?(ja=ja[qa],{type:"create",date:e.formatDate(M,ka),user:ja}):null}};p.formatValueToFieldInfo=q;p.getAllFieldInfos=function(M){const ja=[];if(!M)return ja;const {fieldInfos:qa,content:ua}=M;qa&&ja.push(...qa);if(!ua||!Array.isArray(ua))return ja;ua.forEach(ya=>{"fields"===ya.type&&(ya=ya&&ya.fieldInfos)&&ja.push(...ya)});return ja};p.getFieldInfo=m;p.getFieldInfoLabel=function(M,ja){return(ja=t(ja,M?.fieldName))?ja.title||null:M?M.label||
M.fieldName:null};p.getFixedFieldName=f;p.getFixedFieldNames=function(M,ja){return M&&M.map(qa=>f(qa,ja))};p.getSourceLayer=function(M){if(null!=M)return M.get("sourceLayer")||M.get("layer")};p.graphicCallback=async function(M,ja){return"function"===typeof M?M(ja):M};p.htmlEntities=function(M){return M.replaceAll(k,ja=>`&#${ja.charCodeAt(0)};`)};p.isExpressionField=C;p.isFeatureSupportedLayer=ba;p.isGraphicForRelatableFeatureSupportedLayer=function(M){return!!M&&"object"===typeof M&&"sourceLayer"in
M&&D(M.sourceLayer)};p.isRelatableFeatureSupportedLayer=D;p.isRelatableLayer=Z;p.isRelatedField=fa;p.preLayerQueryCallback=({query:M,layer:ja,method:qa})=>{sa({layer:ja,method:qa,query:M,definitionExpression:`${ja.definitionExpression} ${ja.serviceDefinitionExpression}`})};p.preRequestCallback=({queryPayload:M,layer:ja,method:qa})=>{sa({layer:ja,method:qa,query:M,definitionExpression:`${ja.definitionExpression} ${ja.serviceDefinitionExpression}`})};p.querySourceLayer=ea;p.queryUpdatedFeature=async function({graphic:M,
popupTemplate:ja,layer:qa,spatialReference:ua},ya){if(qa&&ja&&("function"===typeof qa.load&&await qa.load(ya),M.attributes)){var Aa=M.attributes[qa.objectIdField];if(null!=Aa){Aa=[Aa];var Ba=await ja.getRequiredFields(qa.fieldsIndex),Ia=L.featureHasFields(Ba,M);Ba=Ia?[]:Ba;ja=ja.returnGeometry||await aa(ja);if(!Ia||ja)if(qa=await ea({layer:qa,graphic:M,outFields:Ba,objectIds:Aa,returnGeometry:ja,spatialReference:ua},ya))qa.geometry&&(M.geometry=qa.geometry),qa.attributes&&(M.attributes={...M.attributes,
...qa.attributes})}}};p.shouldOpenInNewTab=function(M=""){if(M)return!N.test(M.trim().toLowerCase())};p.substituteAttributes=F;p.substituteFieldsInLinksAndAttributes=function({attributes:M,globalAttributes:ja,layer:qa,text:ua,expressionAttributes:ya,fieldInfoMap:Aa}){return ua?F({formattedAttributes:ja,template:G(ua,{...ja,...ya,...M},qa),fieldInfoMap:Aa}):""};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports",
"../../../assets"],function(p,r){p.getIconPath=function(v){const e=r.getAssetUrl("esri/themes/base/images/files/");return v?"text/plain"===v?`${e}text-32.svg`:"application/pdf"===v?`${e}pdf-32.svg`:"text/csv"===v?`${e}csv-32.svg`:"application/gpx+xml"===v?`${e}gpx-32.svg`:"application/x-dwf"===v?`${e}cad-32.svg`:"application/postscript"===v||"application/json"===v||"text/xml"===v||"model/vrml"===v?`${e}code-32.svg`:"application/x-zip-compressed"===v||"application/x-7z-compressed"===v||"application/x-gzip"===
v||"application/x-tar"===v||"application/x-gtar"===v||"application/x-bzip2"===v||"application/gzip"===v||"application/x-compress"===v||"application/x-apple-diskimage"===v||"application/x-rar-compressed"===v||"application/zip"===v?`${e}zip-32.svg`:v.includes("image/")?`${e}image-32.svg`:v.includes("audio/")?`${e}sound-32.svg`:v.includes("video/")?`${e}video-32.svg`:v.includes("msexcel")||v.includes("ms-excel")||v.includes("spreadsheetml")?`${e}excel-32.svg`:v.includes("msword")||v.includes("ms-word")||
v.includes("wordprocessingml")?`${e}word-32.svg`:v.includes("powerpoint")||v.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`};p.isSupportedImage=function(v){v=v.toLowerCase();return"image/bmp"===v||"image/emf"===v||"image/exif"===v||"image/gif"===v||"image/x-icon"===v||"image/jpeg"===v||"image/png"===v||"image/tiff"===v||"image/x-wmf"===v};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(p,r,v,e,x,L,K,R){e=function(J){function C(t){t=J.call(this,t)||this;t.description=null;t.title=null;return t}p._inherits(C,J);return p._createClass(C)}(R);r.__decorate([v.property()],e.prototype,"description",void 0);r.__decorate([v.property()],e.prototype,"title",void 0);return e=r.__decorate([K.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],e)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t){e=function(f){function w(H,u){H=f.call(this,H,u)||this;H.description=null;H.headingLevel=2;H.title=null;return H}p._inherits(w,f);var F=w.prototype;F.render=function(){return t.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};F.renderTitle=function(){const {title:H}=this;return H?t.tsx(J.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},H):null};F.renderDescription=function(){const {description:H}=
this;return H?t.tsx("div",{key:"description",class:"esri-feature-element-info__description"},H):null};return p._createClass(w)}(R);r.__decorate([v.property()],e.prototype,"description",void 0);r.__decorate([v.property()],e.prototype,"headingLevel",void 0);r.__decorate([v.property()],e.prototype,"title",void 0);return e=r.__decorate([K.subclass("esri.widgets.Feature.support.FeatureElementInfo")],e)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils",
"./jsxFactory"],function(p,r,v,e){const x={heading:"esri-widget__heading"};p.CSS=x;p.Heading=function({level:L,class:K,...R},J){L=r.clamp(Math.ceil(L),1,6);return e.tsx(`h${L}`,{...R,class:v.classes(x.heading,K),role:"heading","aria-level":String(L)},J)};p.incrementHeadingLevel=function(L,K=1){return r.clamp(Math.ceil(L+K),1,6)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f){e=function(w){function F(u,y){u=w.call(this,u,y)||this;u.viewModel=null;u._addTargetToAnchors=G=>{Array.from(G.querySelectorAll("a")).forEach(z=>{C.shouldOpenInNewTab(z.href)&&!z.hasAttribute("target")&&z.setAttribute("target","_blank")})};return u}p._inherits(F,w);var H=F.prototype;H.renderLoading=function(){return f.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},f.tsx("div",{class:"esri-feature-content__loader"}))};H.renderCreated=function(){const u=
this.viewModel?.created;return u?u instanceof HTMLElement?f.tsx("div",{key:u,bind:u,afterCreate:this._attachToNode}):t.isWidget(u)?f.tsx("div",{key:u},!u.destroyed&&u.render()):f.tsx("div",{key:u,innerHTML:u,afterCreate:this._addTargetToAnchors}):null};H.render=function(){return f.tsx("div",{class:"esri-feature-content"},"loading"===this.viewModel?.state?this.renderLoading():this.renderCreated())};H._attachToNode=function(u){u.appendChild(this)};p._createClass(F,[{key:"creator",get:function(){return this.viewModel?.creator},
set:function(u){this.viewModel&&(this.viewModel.creator=u)}},{key:"graphic",get:function(){return this.viewModel?.graphic},set:function(u){this.viewModel&&(this.viewModel.graphic=u)}}]);return F}(R);r.__decorate([v.property()],e.prototype,"creator",null);r.__decorate([v.property()],e.prototype,"graphic",null);r.__decorate([v.property({type:J})],e.prototype,"viewModel",void 0);return e=r.__decorate([K.subclass("esri.widgets.Feature.FeatureContent")],e)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f){e=function(w){function F(u){var y=w.call(this,u)||this;y._loadingPromise=null;y.created=null;y.creator=null;y.destroyer=null;y.graphic=null;y.handles.add(L.watch(()=>y.creator,G=>{y._destroyContent();y._createContent(G)},L.initial));return y}p._inherits(F,w);var H=F.prototype;H.destroy=function(){this._destroyContent()};H._destroyContent=function(){const {created:u,graphic:y,destroyer:G}=this;u&&y&&(f.graphicCallback(G,{graphic:y}).catch(()=>null),this._set("created",
null))};H._createContent=async function(u){var y=this.graphic;y&&u&&(this._loadingPromise=u=f.graphicCallback(u,{graphic:y}).catch(()=>null),this.notifyChange("state"),y=await u,u===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",y)))};p._createClass(F,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return F}(x.HandleOwnerMixin(e));r.__decorate([K.property({readOnly:!0})],e.prototype,"created",void 0);r.__decorate([K.property()],
e.prototype,"creator",void 0);r.__decorate([K.property()],e.prototype,"destroyer",void 0);r.__decorate([K.property({type:v})],e.prototype,"graphic",void 0);r.__decorate([K.property({readOnly:!0})],e.prototype,"state",null);return e=r.__decorate([t.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],e)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H){x=function(u){function y(z,ba){z=u.call(this,z,ba)||this;z._contentWidget=null;z.viewModel=new w;return z}p._inherits(y,u);var G=y.prototype;G.initialize=function(){this.addHandles(v.watch(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),v.initial))};G.destroy=function(){this._destroyContentWidget()};G.renderLoading=function(){return H.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},H.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};G.render=function(){const {state:z}=this.viewModel;return H.tsx("div",{class:"esri-feature-expression"},"loading"===z?this.renderLoading():"disabled"===z?null:this._contentWidget?.render())};G._destroyContentWidget=function(){const {_contentWidget:z}=this;z&&(z.viewModel=null,z.destroy());this._contentWidget=null};G._setupExpressionWidget=function(){const {contentElementViewModel:z,contentElement:ba}=this.viewModel,Z=ba?.type;this._destroyContentWidget();this._contentWidget=
z?"fields"===Z?new t({viewModel:z}):"media"===Z?new f({viewModel:z}):"text"===Z?new C({viewModel:z}):null:null;this.scheduleRender()};return p._createClass(y)}(J);r.__decorate([e.property({type:w})],x.prototype,"viewModel",void 0);return x=r.__decorate([R.subclass("esri.widgets.Feature.FeatureExpression")],x)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H){x=function(u){function y(z,ba){z=u.call(this,z,ba)||this;z._featureElementInfo=null;z.viewModel=new C;z.messages=null;z.messagesURIUtils=null;return z}p._inherits(y,u);var G=y.prototype;G.initialize=function(){this._featureElementInfo=new t;this.addHandles(v.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),v.initial))};G.destroy=function(){this._featureElementInfo?.destroy()};G.renderFieldInfo=function(z,ba){var {attributes:Z}=
this.viewModel;const D=z.fieldName,q=z.label||D;Z=Z?null==Z[D]?"":Z[D]:"";z=!(!z.format||!z.format.dateFormat);Z="number"!==typeof Z||z?f.autoLink(this.messagesURIUtils,Z):this._forceLTR(Z);z={["esri-feature-fields__field-data--date"]:z};return H.tsx("tr",{key:`fields-element-info-row-${D}-${ba}`},H.tsx("th",{key:`fields-element-info-row-header-${D}-${ba}`,class:"esri-feature-fields__field-header",innerHTML:q}),H.tsx("td",{key:`fields-element-info-row-data-${D}-${ba}`,class:this.classes("esri-feature-fields__field-data",
z),innerHTML:Z}))};G.renderFields=function(){const {formattedFieldInfos:z}=this.viewModel;return z?.length?H.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},H.tsx("tbody",null,z.map((ba,Z)=>this.renderFieldInfo(ba,Z)))):null};G.render=function(){return H.tsx("div",{class:"esri-feature-fields"},this._featureElementInfo?.render(),this.renderFields())};G._setupFeatureElementInfo=function(){const {description:z,title:ba}=this;this._featureElementInfo?.set({description:z,title:ba})};
G._forceLTR=function(z){return`&lrm;${z}`};p._createClass(y,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(z){this.viewModel.attributes=z}},{key:"description",get:function(){return this.viewModel.description},set:function(z){this.viewModel.description=z}},{key:"expressionInfos",get:function(){return this.viewModel.expressionInfos},set:function(z){this.viewModel.expressionInfos=z}},{key:"fieldInfos",get:function(){return this.viewModel.fieldInfos},set:function(z){this.viewModel.fieldInfos=
z}},{key:"title",get:function(){return this.viewModel.title},set:function(z){this.viewModel.title=z}}]);return y}(J);r.__decorate([e.property()],x.prototype,"attributes",null);r.__decorate([e.property()],x.prototype,"description",null);r.__decorate([e.property()],x.prototype,"expressionInfos",null);r.__decorate([e.property()],x.prototype,"fieldInfos",null);r.__decorate([e.property()],x.prototype,"title",null);r.__decorate([e.property({type:C,nonNullable:!0})],x.prototype,"viewModel",void 0);r.__decorate([e.property(),
F.messageBundle("esri/widgets/Feature/t9n/Feature")],x.prototype,"messages",void 0);r.__decorate([e.property(),F.messageBundle("esri/widgets/support/t9n/uriUtils")],x.prototype,"messagesURIUtils",void 0);return x=r.__decorate([R.subclass("esri.widgets.Feature.FeatureFields")],x)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t){v=function(f){function w(F){F=f.call(this,F)||this;F.attributes=null;F.expressionInfos=null;F.description=null;F.fieldInfos=null;F.title=null;return F}p._inherits(w,f);p._createClass(w,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:F,fieldInfos:H}=this,u=[];H?.forEach(y=>{if(!y.hasOwnProperty("visible")||y.visible)y=y.clone(),y.label=t.getFieldInfoLabel(y,F),u.push(y)});return u}}]);return w}(v);r.__decorate([e.property()],v.prototype,"attributes",
void 0);r.__decorate([e.property({type:[J]})],v.prototype,"expressionInfos",void 0);r.__decorate([e.property()],v.prototype,"description",void 0);r.__decorate([e.property({type:[C]})],v.prototype,"fieldInfos",void 0);r.__decorate([e.property({readOnly:!0})],v.prototype,"formattedFieldInfos",null);r.__decorate([e.property()],v.prototype,"title",void 0);return v=r.__decorate([R.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],v)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(p,r){function v(x){let L=null;e.some(K=>{K.pattern.test(x)&&(L=K);return!!L});return L}const e=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];p.autoLink=function(x,L){if("string"!==typeof L||!L)return L;const K=v(L);if(!K)return L;const R=L.match(K.pattern);
x=r.replace(r.replace(K.label,{messages:x,hierPart:R&&R[2]}),{appName:K.appName});return L.replace(K.pattern,`<a${K.target?` target="${K.target}"`:""} href="$1"${"_blank"===K.target?' rel\x3d"noreferrer"':""}>${x}</a>`)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureMedia":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/a11yUtils ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtilsAm5 ../support/componentsUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils ../../intl/substitute".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H,u,y,G,z,ba,Z,D,q,m){e=function(n){function E(U,ea){var aa=n.call(this,U,ea)||this;aa._refreshTimer=null;aa._refreshIntervalInfo=null;aa._featureElementInfo=null;aa._chartRootMap=new WeakMap;aa.viewModel=new H;aa.messages=null;aa._disposeChart=fa=>{aa._chartRootMap.get(fa)?.dispose();aa._chartRootMap.delete(fa)};aa._createChart=async fa=>{const {destroyed:O,viewModel:da}=r._assertThisInitialized(aa);if(!O&&da&&fa){var {createRoot:la}=await new Promise((l,P)=>
p(["../support/chartUtilsAm5"],l,P));la=await la(fa);aa._chartRootMap.set(fa,la);aa._renderChart({mediaInfo:da.activeMediaInfo,root:la})}};return aa}r._inherits(E,n);var Y=E.prototype;Y.initialize=function(){this._featureElementInfo=new u;this.addHandles([K.watch(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),K.initial),K.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),K.initial)])};Y.loadDependencies=
function(){return z.loadCalciteComponents({icon:()=>new Promise((U,ea)=>p(["../../chunks/calcite-icon"],U,ea))})};Y.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo?.destroy()};Y.render=function(){return D.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())};Y.renderMedia=function(){const {formattedMediaInfoCount:U,activeMediaInfoIndex:ea}=this.viewModel,aa=this.renderMediaText();return U?
D.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaInfo(),D.tsx("div",{class:"esri-feature-media__item-navigation"},aa,D.tsx("div",{class:"esri-feature-media__pagination"},this.renderMediaPageButton("previous"),D.tsx("span",{class:"esri-feature-media__pagination-text"},m.substitute(this.messages.pageText,{index:ea+1,total:U})),this.renderMediaPageButton("next")))):null};Y.renderMediaText=function(){var {activeMediaInfo:U}=this.viewModel;if(!U)return null;
const ea=U&&U.title?D.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:U.title}):null;U=U&&U.caption?D.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:U.caption}):null;return ea||U?D.tsx("div",{key:"media-text",class:"esri-feature-media__item-text"},ea,U):null};Y.renderImageMediaInfo=function(U){var {_refreshIntervalInfo:ea}=this;const {activeMediaInfoIndex:aa,formattedMediaInfoCount:fa}=this.viewModel,{value:O,refreshInterval:da,altText:la,
title:l,type:P}=U,{sourceURL:W,linkURL:Q}=O;U=y.shouldOpenInNewTab(Q??void 0)?"_blank":"_self";const X="_blank"===U?"noreferrer":"";ea=da?ea:null;ea=D.tsx("img",{alt:la||l,key:`media-${P}-${aa}-${fa}-${ea?ea.timestamp:0}`,src:(ea?ea.sourceURL:W)??void 0});return(Q?D.tsx("a",{title:l,href:Q,rel:X,target:U},ea):null)??ea};Y.renderChartMediaInfo=function(U){const {activeMediaInfoIndex:ea,formattedMediaInfoCount:aa}=this.viewModel;return D.tsx("div",{key:`media-${U.type}-${ea}-${aa}`,bind:this,class:"esri-feature-media__chart",
afterCreate:this._createChart,afterRemoved:this._disposeChart})};Y.renderMediaInfoType=function(){const {activeMediaInfo:U}=this.viewModel;return U?"image"===U.type?this.renderImageMediaInfo(U):U.type.includes("chart")?this.renderChartMediaInfo(U):null:null};Y.renderMediaInfo=function(){const {activeMediaInfo:U}=this.viewModel;return U?D.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},D.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType())):
null};Y.renderMediaPageButton=function(U){if(2>this.viewModel.formattedMediaInfoCount)return null;const ea=(U="previous"===U)?this.messages.previous:this.messages.next;return D.tsx("button",{type:"button",key:U?"media-previous":"media-next",title:ea,"aria-label":ea,tabIndex:0,class:"esri-feature-media__pagination-button",bind:this,onclick:U?this._previous:this._next},D.tsx("calcite-icon",{class:"esri-feature-media__pagination-icon",scale:"s",icon:U?"chevron-left":"chevron-right"}))};Y._setupFeatureElementInfo=
function(){const {description:U,title:ea}=this;this._featureElementInfo?.set({description:U,title:ea})};Y._next=function(){this.viewModel.next()};Y._previous=function(){this.viewModel.previous()};Y._getRenderer=function(){if(this.viewModel){var {isAggregate:U,layer:ea}=this.viewModel;return U&&ea?.featureReduction&&"renderer"in ea.featureReduction?ea.featureReduction.renderer:ea?.renderer}};Y._getRendererColors=async function(){const {colorAm5:U}=await new Promise((O,da)=>p(["./FeatureMedia/chartCommon"],
O,da)),ea=new Map,aa=this._getRenderer();if(!aa)return ea;const fa=await w.getColorsFromRenderer(aa);fa.delete("default");if(!Array.from(fa.values()).every(O=>1===O?.length))return ea;Array.from(fa.keys()).forEach(O=>{const da=fa.get(O)?.[0]?.toCss(!0);da&&ea.set(O,U(da))});return ea};Y._handleMediaKeyup=function(U){const ea=L.eventKey(U);"ArrowLeft"===ea&&(U.stopPropagation(),this.viewModel.previous());"ArrowRight"===ea&&(U.stopPropagation(),this.viewModel.next())};Y._canAnimateChart=function(){return this.viewModel?
!!this.viewModel.abilities.chartAnimation&&!x.prefersReducedMotion():!1};Y._getChartAnimationMS=function(){return this._canAnimateChart()?250:0};Y._getChartSeriesAnimationMS=function(){return this._canAnimateChart()?500:0};Y._renderChart=async function(U){const {root:ea,mediaInfo:aa}=U,{value:fa,type:O}=aa,{ResponsiveThemeAm5:da,DarkThemeAm5:la,AnimatedThemeAm5:l,ColorSetAm5:P,ThemeAm5:W}=await new Promise((k,S)=>p(["./FeatureMedia/chartCommon"],k,S));var Q=W.new(ea);Q.rule("ColorSet").set("colors",
G.esriChartColorSet);Q=[da.new(ea),Q];q.isDarkTheme()&&Q.push(la.new(ea));this._canAnimateChart()&&Q.push(l.new(ea));ea.setThemes(Q);const X=await this._getRendererColors(),T=P.new(ea,{});Q=fa.series.map((k,S)=>{S=X.get(k.fieldName)||T.getIndex(S);return{category:k.tooltip,value:k.value,columnSettings:{fill:S,stroke:S}}}).filter(k=>"pie-chart"===O?null!=k.value&&0<k.value:!0);"pie-chart"===O?this._createPieChart(U,Q):this._createXYChart(U,Q)};Y._getDirection=function(){return ba.isRTL(this.container)?
"rtl":"ltr"};Y._isInversed=function(){return!!ba.isRTL(this.container)};Y._customizeChartTooltip=async function(U,ea="horizontal"){const {colorAm5:aa}=await new Promise((fa,O)=>p(["./FeatureMedia/chartCommon"],fa,O));U.setAll({pointerOrientation:ea});U.get("background")?.setAll({stroke:aa("rgba(50, 50, 50, 1)")});U.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:200})};Y._createPieChart=async function(U,ea){var {TooltipAm5:aa}=await new Promise((P,W)=>p(["./FeatureMedia/chartCommon"],
P,W));const {PieChartAm5:fa,PieSeriesAm5:O}=await new Promise((P,W)=>p(["./FeatureMedia/pieChart"],P,W)),{mediaInfo:da,root:la}=U;var {title:l}=da;U=la.container.children.push(fa.new(la,{ariaLabel:da?.altText||da?.title||"",focusable:!0,paddingBottom:5,paddingTop:5,paddingLeft:5,paddingRight:5}));aa=aa.new(la,{labelText:"{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})"});l=U.series.push(O.new(la,{name:l,valueField:"value",categoryField:"category",tooltip:aa}));l.ticks.template.set("forceHidden",
!0);l.labels.template.set("forceHidden",!0);l.slices.template.states.create("active",{shiftRadius:5});this._customizeChartTooltip(aa);l.slices.template.setAll({ariaLabel:"{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})",focusable:!0,templateField:"columnSettings"});l.data.setAll(ea);l.appear(this._getChartSeriesAnimationMS());U.appear(this._getChartAnimationMS());U.root.dom.classList.toggle("esri-feature-media__chart--rendered",!0)};Y._getMinSeriesValue=function(U){let ea=0;U.forEach(aa=>
ea=Math.min(aa.value,ea));return ea};Y._createColumnChart=async function(U,ea,aa){const {TooltipAm5:fa,ScrollbarAm5:O}=await new Promise((ka,oa)=>p(["./FeatureMedia/chartCommon"],ka,oa)),{CategoryAxisAm5:da,AxisRendererXAm5:la,ValueAxisAm5:l,AxisRendererYAm5:P,ColumnSeriesAm5:W}=await new Promise((ka,oa)=>p(["./FeatureMedia/xyChart"],ka,oa)),{mediaInfo:Q,root:X}=ea,{value:T,title:k}=Q;U.setAll({wheelX:"panX",wheelY:"zoomX"});ea=U.xAxes.push(da.new(X,{renderer:la.new(X,{inversed:this._isInversed()}),
categoryField:"category"}));ea.get("renderer").labels.template.setAll({forceHidden:!0});var S=U.yAxes.push(l.new(X,{renderer:P.new(X,{inside:!1}),min:this._getMinSeriesValue(T.series)}));S.get("renderer").labels.template.setAll({direction:this._getDirection()});const N=fa.new(X,{labelText:"{categoryX}"});S=U.series.push(W.new(X,{name:k,xAxis:ea,yAxis:S,valueYField:"value",categoryXField:"category",tooltip:N}));this._customizeChartTooltip(N);S.columns.template.setAll({ariaLabel:"{categoryX}",focusable:!0,
templateField:"columnSettings"});15<T.series.length&&U.set("scrollbarX",O.new(X,{orientation:"horizontal"}));ea.data.setAll(aa);S.data.setAll(aa);S.appear(this._getChartSeriesAnimationMS());U.appear(this._getChartAnimationMS())};Y._createBarChart=async function(U,ea,aa){const {TooltipAm5:fa,ScrollbarAm5:O}=await new Promise((ka,oa)=>p(["./FeatureMedia/chartCommon"],ka,oa)),{CategoryAxisAm5:da,AxisRendererXAm5:la,ValueAxisAm5:l,AxisRendererYAm5:P,ColumnSeriesAm5:W}=await new Promise((ka,oa)=>p(["./FeatureMedia/xyChart"],
ka,oa)),{mediaInfo:Q,root:X}=ea,{value:T,title:k}=Q;U.setAll({wheelX:"panY",wheelY:"zoomY"});ea=U.yAxes.push(da.new(X,{renderer:P.new(X,{inversed:!0}),categoryField:"category"}));ea.get("renderer").labels.template.setAll({forceHidden:!0});var S=U.xAxes.push(l.new(X,{renderer:la.new(X,{inside:!1,inversed:this._isInversed()}),min:this._getMinSeriesValue(T.series)}));S.get("renderer").labels.template.setAll({direction:this._getDirection()});const N=fa.new(X,{labelText:"{categoryY}"});S=U.series.push(W.new(X,
{name:k,xAxis:S,yAxis:ea,valueXField:"value",categoryYField:"category",tooltip:N}));this._customizeChartTooltip(N,"vertical");S.columns.template.setAll({ariaLabel:"{categoryY}",focusable:!0,templateField:"columnSettings"});15<T.series.length&&U.set("scrollbarY",O.new(X,{orientation:"vertical"}));ea.data.setAll(aa);S.data.setAll(aa);S.appear(this._getChartSeriesAnimationMS());U.appear(this._getChartAnimationMS())};Y._createLineChart=async function(U,ea,aa){const {TooltipAm5:fa,ScrollbarAm5:O}=await new Promise((ka,
oa)=>p(["./FeatureMedia/chartCommon"],ka,oa)),{CategoryAxisAm5:da,AxisRendererXAm5:la,ValueAxisAm5:l,AxisRendererYAm5:P,LineSeriesAm5:W}=await new Promise((ka,oa)=>p(["./FeatureMedia/xyChart"],ka,oa)),{root:Q,mediaInfo:X}=ea,{value:T,title:k}=X;U.setAll({wheelX:"panX",wheelY:"zoomX"});ea=U.xAxes.push(da.new(Q,{renderer:la.new(Q,{inversed:this._isInversed()}),categoryField:"category"}));ea.get("renderer").labels.template.setAll({forceHidden:!0});var S=U.yAxes.push(l.new(Q,{renderer:P.new(Q,{inside:!1}),
min:this._getMinSeriesValue(T.series)}));S.get("renderer").labels.template.setAll({direction:this._getDirection()});const N=fa.new(Q,{labelText:"{categoryX}"});S=U.series.push(W.new(Q,{name:k,xAxis:ea,yAxis:S,valueYField:"value",categoryXField:"category",tooltip:N}));this._customizeChartTooltip(N,"vertical");15<T.series.length&&U.set("scrollbarX",O.new(Q,{orientation:"horizontal"}));ea.data.setAll(aa);S.data.setAll(aa);S.appear(this._getChartSeriesAnimationMS());U.appear(this._getChartAnimationMS())};
Y._createXYChart=async function(U,ea){const {XYChartAm5:aa,XYCursorAm5:fa}=await new Promise((P,W)=>p(["./FeatureMedia/xyChart"],P,W)),{root:O,mediaInfo:da}=U,{type:la}=da,l=O.container.children.push(aa.new(O,{ariaLabel:da?.altText||da?.title||"",focusable:!0,panX:!0,panY:!0}));l.set("cursor",fa.new(O,{}));"column-chart"===la&&await this._createColumnChart(l,U,ea);"bar-chart"===la&&await this._createBarChart(l,U,ea);"line-chart"===la&&await this._createLineChart(l,U,ea);l.root.dom.classList.toggle("esri-feature-media__chart--rendered",
!0)};Y._clearMediaRefreshTimer=function(){const {_refreshTimer:U}=this;U&&(clearTimeout(U),this._refreshTimer=null)};Y._updateMediaInfoTimestamp=function(U){const ea=Date.now();this._refreshIntervalInfo={timestamp:ea,sourceURL:U&&this._getImageSource(U,ea)}};Y._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:U}=this.viewModel;U&&"image"===U.type&&U.refreshInterval&&this._setRefreshTimeout(U)};Y._setRefreshTimeout=function(U){const {refreshInterval:ea,value:aa}=
U;ea&&(U=6E4*ea,this._updateMediaInfoTimestamp(aa.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(aa.sourceURL)},U))};Y._getImageSource=function(U,ea){const aa=U.includes("?")?"\x26":"?",[fa,O=""]=U.split("#");return`${fa}${aa}timestamp=${ea}${O?"#":""}${O}`};r._createClass(E,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(U){this.viewModel.attributes=U}},{key:"activeMediaInfoIndex",get:function(){return this.viewModel.activeMediaInfoIndex},
set:function(U){this.viewModel.activeMediaInfoIndex=U}},{key:"description",get:function(){return this.viewModel.description},set:function(U){this.viewModel.description=U}},{key:"fieldInfoMap",get:function(){return this.viewModel.fieldInfoMap},set:function(U){this.viewModel.fieldInfoMap=U}},{key:"layer",get:function(){return this.viewModel.layer},set:function(U){this.viewModel.layer=U}},{key:"mediaInfos",get:function(){return this.viewModel.mediaInfos},set:function(U){this.viewModel.mediaInfos=U}},
{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},set:function(U){this.viewModel.popupTemplate=U}},{key:"relatedInfos",get:function(){return this.viewModel.relatedInfos},set:function(U){this.viewModel.relatedInfos=U}},{key:"title",get:function(){return this.viewModel.title},set:function(U){this.viewModel.title=U}}]);return E}(F);v.__decorate([R.property()],e.prototype,"_refreshIntervalInfo",void 0);v.__decorate([R.property()],e.prototype,"attributes",null);v.__decorate([R.property()],
e.prototype,"activeMediaInfoIndex",null);v.__decorate([R.property()],e.prototype,"description",null);v.__decorate([R.property()],e.prototype,"fieldInfoMap",null);v.__decorate([R.property()],e.prototype,"layer",null);v.__decorate([R.property()],e.prototype,"mediaInfos",null);v.__decorate([R.property()],e.prototype,"popupTemplate",null);v.__decorate([R.property()],e.prototype,"relatedInfos",null);v.__decorate([R.property()],e.prototype,"title",null);v.__decorate([R.property({type:H})],e.prototype,"viewModel",
void 0);v.__decorate([R.property(),Z.messageBundle("esri/widgets/Feature/t9n/Feature")],e.prototype,"messages",void 0);return e=v.__decorate([f.subclass("esri.widgets.Feature.FeatureMedia")],e)})},"esri/core/a11yUtils":function(){define(["exports"],function(p){p.prefersReducedMotion=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/utils":function(){define("exports ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),
function(p,r,v,e,x,L,K,R,J,C){async function t(z,ba,Z){e.getOrCreateMapValue(z,ba,()=>[]).push(...Z)}async function f(z,ba,Z){z=e.getOrCreateMapValue(z,ba,()=>new Map);for(const D of Z)z.set(D.value,D.color)}function w(z){let ba=z.minValue,Z=z.maxValue;const D=z.isFirstBreak?"":u.gt+" ";z="percent-of-total"===z.normalizationType?u.pct:"";ba=null==ba?"":L.format(ba);Z=null==Z?"":L.format(Z);return D+ba+z+" "+u.ld+" "+Z+z}function F(z,ba){return"normalizationField"in z&&z.normalizationField?{type:"normalized-field",
field:z.field,normalizationField:z.normalizationField}:"field"in z&&z.field?{type:"field",field:z.field}:"valueExpression"in z&&z.valueExpression?{type:"expression",expression:z.valueExpression,title:z.valueExpressionTitle,returnType:ba}:null}const H=v.getLogger("esri.renderers.support.utils"),u={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},y={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},G={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",
minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};v=x.convertDateFormatToIntlOptions("short-date");p.calculateDateFormatInterval=function(z){z=z.map(m=>new Date(m));const ba=z.length;let Z=Infinity,D=null;for(let m=0;m<ba-1;m++){const n=z[m];let E=Infinity,Y=null;for(let U=m+1;U<ba;U++){var q=z[U];q=n.getFullYear()!==q.getFullYear()&&"year"||n.getMonth()!==q.getMonth()&&"month"||n.getDate()!==q.getDate()&&
"day"||n.getHours()!==q.getHours()&&"hour"||n.getMinutes()!==q.getMinutes()&&"minute"||n.getSeconds()!==q.getSeconds()&&"second"||"millisecond";const ea=y[q];ea<E&&(E=ea,Y=q)}E<Z&&(Z=E,D=Y)}return D};p.createClassBreakLabel=w;p.createColorStops=function(z){const {values:ba,colors:Z,labelIndexes:D,isDate:q,dateFormatOptions:m}=z;return ba.map((n,E)=>{var Y=null;if(!D||D.includes(E)){let U;if(U=q?x.formatDate(n,m):L.format(n))Y="",0===E?Y=u.lt+" ":E===ba.length-1&&(Y=u.gt+" "),Y+=U}return new K({value:n,
color:Z[E],label:Y})})};p.createUniqueValueLabel=function(z){const {value:ba,domain:Z,fieldInfo:D,dateFormatInterval:q}=z;z=String(ba);const m=Z&&"codedValues"in Z&&Z.codedValues?Z.getName(ba):null;m?z=m:"number"===typeof ba&&(z=D&&"date"===D.type?x.formatDate(ba,q&&x.convertDateFormatToIntlOptions(G[q])):L.format(ba));return z};p.getAttribute=F;p.getAttributes=function(z,ba){const Z=[];if("class-breaks"===z.type||"heatmap"===z.type)Z.push(F(z,"number"));else if("unique-value"===z.type){var D=z.authoringInfo;
if(D&&"relationship"===D.type){if(D.field1&&D.field2){var q=D.field2.field;const m=D.field2.normalizationField;Z.push(F({field:D.field1.field,normalizationField:D.field1.normalizationField}));Z.push(F({field:q,normalizationField:m}))}}else q=z.uniqueValueInfos?.[0],D=null,q&&q.value&&(q=typeof z.uniqueValueInfos[0].value,"string"===q||"number"===q)&&(D=q),Z.push(F(z,D)),[z.field2,z.field3].forEach(m=>m&&Z.push({type:"field",field:m}))}else"attributes"in z&&z.attributes?.forEach(m=>Z.push(F(m,"number")));
(z=ba?ba(z):"visualVariables"in z?z.visualVariables:null)&&z.forEach(m=>Z.push(F(m,"number")));return r.unique(Z.filter(r.isSome),(m,n)=>"field"===m.type&&"field"===n.type?m.field===n.field:"normalized-field"===m.type&&"normalized-field"===n.type?m.field===n.field&&m.normalizationField===n.normalizationField:"expression"===m.type&&"expression"===n.type?m.expression===n.expression:!1)};p.getColorsForRendererValues=async function(z){const ba=new Map;if(!z)return ba;if("unique-value"!==z.type||z.authoringInfo?.type)if("class-breaks"===
z.type){var Z=z.classBreakInfos.map(m=>({value:m.minValue,color:R.getColorFromSymbol(m.symbol,null)})).reverse();const {field:D,valueExpression:q}=z;await f(ba,D??q,Z)}else"simple"===z.type&&await f(ba,"default",[{value:"default",color:R.getColorFromSymbol(z.symbol,null)}]);else{Z=(z.uniqueValueInfos??[]).map(U=>({value:U.value,color:R.getColorFromSymbol(U.symbol,null)}));const {field:D,field2:q,field3:m,valueExpression:n,fieldDelimiter:E}=z,Y=[D,q,m].filter(Boolean).join(E||"");(Y||n)&&await f(ba,
Y||n,Z)}"defaultSymbol"in z&&z.defaultSymbol&&await f(ba,"default",[{value:"default",color:R.getColorFromSymbol(z.defaultSymbol,null)}]);if("visualVariables"in z&&z.visualVariables){z=z.visualVariables.filter(D=>"color"===D.type);for(const D of z)z=await J.getRampStops(D)??[],await f(ba,D.field||D.valueExpression,z)}return ba};p.getColorsFromRenderer=async function(z){const ba=new Map;if(!z)return ba;if("visualVariables"in z&&z.visualVariables){var Z=z.visualVariables.filter(q=>"color"===q.type);
for(var D of Z)Z=(await J.getRampStops(D)??[]).map(q=>q.color),await t(ba,D.field||D.valueExpression,Z)}if("heatmap"===z.type)D=C.getHeatmapRampStops(z).map(q=>q.color),await t(ba,z.field||z.valueExpression,D);else if("pie-chart"===z.type){for(const q of z.attributes)await t(ba,q.field||q.valueExpression,[q.color]);await t(ba,"default",[z?.othersCategory?.color,R.getColorFromSymbol(z.backgroundFillSymbol,null)])}else if("dot-density"===z.type){for(const q of z.attributes)await t(ba,q.field||q.valueExpression,
[q.color]);await t(ba,"default",[z.backgroundColor])}else if("unique-value"===z.type)if("predominance"===z.authoringInfo?.type)for(const q of z.uniqueValueInfos??[])await t(ba,q.value.toString(),[R.getColorFromSymbol(q.symbol,null)]);else{D=(z.uniqueValueInfos??[]).map(Y=>R.getColorFromSymbol(Y.symbol,null));const {field:q,field2:m,field3:n,valueExpression:E}=z;(q||E)&&await t(ba,q||E,D);m&&await t(ba,m,D);n&&await t(ba,n,D)}else if("class-breaks"===z.type){D=z.classBreakInfos.map(n=>R.getColorFromSymbol(n.symbol,
null));const {field:q,valueExpression:m}=z;await t(ba,q??m,D)}else"simple"===z.type&&await t(ba,"default",[R.getColorFromSymbol(z.symbol,null)]);"defaultSymbol"in z&&z.defaultSymbol&&await t(ba,"default",[R.getColorFromSymbol(z.defaultSymbol,null)]);ba.forEach((q,m)=>{q=r.unique(q.filter(Boolean),(n,E)=>JSON.stringify(n)===JSON.stringify(E));ba.set(m,q)});return ba};p.setLabelsForClassBreaks=function(z){const ba=z.classBreakInfos,Z=z.normalizationType;let D=[];if(ba&&ba.length)if("standard-deviation"===
z.classificationMethod)H.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");else if(z.round){D.push(ba[0].minValue);for(const q of ba)D.push(q.maxValue);D=L.round(D);ba.forEach((q,m)=>{q.label=w({minValue:0===m?D[0]:D[m],maxValue:D[m+1],isFirstBreak:0===m,normalizationType:Z})})}else ba.forEach((q,m)=>{q.label=w({minValue:q.minValue,maxValue:q.maxValue,isFirstBreak:0===m,normalizationType:Z})})};p.timelineDateFormatOptions=v;Object.defineProperty(p,
Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(p,r,v){function e(t,f){return t-f}function x(t,f){let w;w=Number(t.toFixed(f));w<t?t=w+1/10**f:(t=w,w-=1/10**f);w=Number(w.toFixed(f));t=Number(t.toFixed(f));return[w,t]}function L(t,f,w,F,H){t=R(t,f,w,F);f=null==t.next||t.next<=H;return(null==t.previous||t.previous<=H)&&f||t.previous+t.next<=2*H}function K(t){t=String(t);var f=t.match(J);if(f&&f[1])return{integer:f[1].split("").length,
fractional:f[3]?f[3].split("").length:0};if(t.toLowerCase().includes("e")&&(f=t.split("e"),t=f[0],f=f[1],t&&f)){t=Number(t);f=Number(f);const w=0<f;w||(f=Math.abs(f));t=K(t);w?(t.integer+=f,t.fractional=f>t.fractional?0:t.fractional-f):(t.fractional+=f,t.integer=f>t.integer?1:t.integer-f);return t}return{integer:0,fractional:0}}function R(t,f,w,F){const H={previous:null,next:null};if(null!=w){const u=t-w;H.previous=Math.floor(Math.abs(100*(f-w-u)/u))}null!=F&&(t=F-t,H.next=Math.floor(Math.abs(100*
(F-f-t)/t)));return H}const J=/^-?(\d+)(\.(\d+))?$/i,C={maximumFractionDigits:20};p.format=function(t){return v.formatNumber(t,C)};p.numDigits=K;p.percentChange=R;p.round=function(t,f={}){t=t.slice(0);const {tolerance:w=2,strictBounds:F=!1,indexes:H=t.map((y,G)=>G)}=f;H.sort(e);for(f=0;f<H.length;f++){const y=H[f],G=t[y],z=0===y?null:t[y-1],ba=y===t.length-1?null:t[y+1],Z=K(G).fractional;if(Z){let D=0,q=!1;for(var u=void 0;D<=Z&&!q;)u=x(G,D),u=F&&0===f?u[1]:u[0],q=L(G,u,z,ba,w),D++;q&&(t[y]=u)}}return t};
Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./cimSymbolUtils ./gfxUtils ./Symbol3DMaterial".split(" "),function(p,r,v,e,x,L,K,R,J,C,t,f,w){function F(n){n=n.symbolLayers;if(!n)return null;let E=null;n.forEach(Y=>{"object"===Y.type&&Y.resource?.href||(E="water"===
Y.type?Y.color:Y.material?Y.material.color:null)});return E?new v(E):null}function H(n,E){if(null==E||null==n)return n;n=n.toRgba();n[3]*=E;return new v(n)}function u(n,E,Y){if(n=n.symbolLayers){var U=ea=>{E=E??ea??(null!=Y?m:null);return H(E,Y)};n.forEach(ea=>{if("object"!==ea.type||!ea.resource?.href||E)if("water"===ea.type)ea.color=U(ea.color);else{const aa=U(null!=ea.material?ea.material.color:null);null==ea.material?ea.material=new w.Symbol3DMaterial({color:aa}):ea.material.color=aa;null!=Y&&
"outline"in ea&&null!=ea.outline&&null!=ea.outline.color&&(ea.outline.color=H(ea.outline.color,Y))}})}}async function y(n,E){(n=n.symbolLayers)&&await x.forEach(n,async Y=>G(Y,E))}async function G(n,E){switch(n.type){case "extrude":n.size="number"===typeof E[2]?E[2]:0;break;case "icon":case "line":case "text":E=z(E);null!=E&&(n.size=E);break;case "path":const Y=Z(E,J.ONES,[n.width,void 0,n.height]);n.width=q(E[0],n.width,1,Y);n.height=q(E[2],n.height,1,Y);break;case "object":await ba(n,E)}}function z(n){for(const E of n)if("number"===
typeof E)return E;return null}async function ba(n,E){const {resourceSize:Y,symbolSize:U}=await D(n),ea=Z(E,Y,U);n.width=q(E[0],U[0],Y[0],ea);n.depth=q(E[1],U[1],Y[1],ea);n.height=q(E[2],U[2],Y[2],ea)}function Z(n,E,Y){for(let U=0;3>U;U++){const ea=n[U];switch(ea){case "symbol-value":return n=Y[U],null!=n?n/E[U]:1;case "proportional":break;default:if(ea&&E[U])return ea/E[U]}}return 1}async function D(n){var {computeObjectLayerResourceSize:E}=await new Promise((O,da)=>p(["./symbolLayerUtils"],O,da));
E=await E(n,10);const {width:Y,height:U,depth:ea}=n;n=[Y,ea,U];let aa=1;for(var fa=0;3>fa;fa++){const O=n[fa];if(null!=O){aa=O/E[fa];break}}for(fa=0;3>fa;fa++)null==n[fa]&&(n[fa]=E[fa]*aa);return{resourceSize:E,symbolSize:n}}function q(n,E,Y,U){switch(n){case "proportional":return Y*U;case "symbol-value":return null!=E?E:Y;default:return n}}const m=new v("white");r.applyColorToSymbol=function(n,E,Y){if(n&&(E||null!=Y))if(E&&(E=new v(E)),e.isSymbol3D(n))u(n,E,Y);else if(e.isSymbol2D(n)){if(E=E??n.color)n.color=
H(E,Y);null!=Y&&"outline"in n&&n.outline&&n.outline.color&&(n.outline.color=H(n.outline.color,Y))}};r.applyOpacityToColor=H;r.applyRotationToSymbol=function(n,E,Y){n&&null!=E&&(e.isSymbol3D(n)?(n=n.symbolLayers)&&n.forEach(U=>{if(U&&"object"===U.type)switch(Y){case "tilt":U.tilt=E;break;case "roll":U.roll=E;break;default:U.heading=E}}):!e.isSymbol2D(n)||"simple-marker"!==n.type&&"picture-marker"!==n.type&&"text"!==n.type||(n.angle=E))};r.applySizesToSymbol=async function(n,E){if(n&&E){if(e.isSymbol3D(n))return y(n,
E);if(e.isSymbol2D(n)&&(E=z(E),null!=E))switch(n.type){case "simple-marker":n.size=E;break;case "picture-marker":const Y=n.width/n.height;1<Y?(n.width=E,n.height=E*Y):(n.width=E*Y,n.height=E);break;case "simple-line":n.width=E;break;case "text":n.font.size=E}}};r.fetchWebStyleSymbol=async function(n,E){const Y=await n.fetchSymbol(E);return Y?Y:n.fetchCIMSymbol(E)};r.getCSSFilterFromEffectList=function(n){if(!n)return null;n=n.effects.filter(E=>"bloom"!==E.type).map(E=>E.toJSON());return C.effectFunctionsFromJSON(n)};
r.getColorFromSymbol=function(n,E){if(!n)return null;let Y=null;e.isSymbol3D(n)?Y=F(n):e.isSymbol2D(n)&&(Y="cim"===n.type?t.getCIMSymbolColor(n):n.color?new v(n.color):null);return Y?H(Y,E):null};r.getIconHref=function(n){return K.unwrapOrThrow(n.resource).href};r.getSymbolOutlineSize=function(n){return n?e.isSymbol3D(n)?(n=(n=n.symbolLayers?.at(-1))&&"outline"in n?n?.outline?.size:void 0,null!=n?n:0):R.px2pt(f.getStroke(n)?.width):0};r.isVolumetricSymbol=function(n){if(null==n||!("symbolLayers"in
n)||null==n.symbolLayers)return!1;switch(n.type){case "point-3d":return n.symbolLayers.some(E=>"object"===E.type);case "line-3d":return n.symbolLayers.some(E=>"path"===E.type);case "polygon-3d":return n.symbolLayers.some(E=>"object"===E.type||"extrude"===E.type);default:return!1}};r.symbolHasExtrudeSymbolLayer=function(n){return null!=n&&"polygon-3d"===n.type&&n.symbolLayers.some(E=>"extrude"===E.type)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports",
"../../Color","../cim/utils"],function(p,r,v){function e(f){f=v.toCIMSymbolJSON(f);if("CIMTextSymbol"===f?.type)return f.height??0;let w=0;if(f?.symbolLayers)for(const F of f.symbolLayers)v.isCIMMarker(F)&&null!=F.size&&F.size>w?w=F.size:v.isCIMStroke(F)&&null!=F.width&&F.width>w?w=F.width:v.isCIMFill(F);return w}function x(f,w,F,H){if(f)if("CIMTextSymbol"===f.type)null!=f.height&&(f.height*=w);else{if(F&&f.effects)for(const u of f.effects)R(u,w);if(f.symbolLayers)for(const u of f.symbolLayers)switch(u.type){case "CIMPictureMarker":case "CIMVectorMarker":L(u,
w,H);break;case "CIMPictureStroke":case "CIMSolidStroke":!H?.preserveOutlineWidth&&u.width&&(u.width*=w);break;case "CIMPictureFill":u.height&&(u.height*=w);u.offsetX&&(u.offsetX*=w);u.offsetY&&(u.offsetY*=w);break;case "CIMHatchFill":x(u.lineSymbol,w,!0,{...H,preserveOutlineWidth:!1}),u.offsetX&&(u.offsetX*=w),u.offsetY&&(u.offsetY*=w),u.separation&&(u.separation*=w)}}}function L(f,w,F){if(f&&(f.markerPlacement&&K(f.markerPlacement,w),f.offsetX&&(f.offsetX*=w),f.offsetY&&(f.offsetY*=w),f.anchorPoint&&
"Absolute"===f.anchorPointUnits&&(f.anchorPoint={x:f.anchorPoint.x*w,y:f.anchorPoint.y*w}),f.size=null!=f.size?f.size*w:0,"CIMVectorMarker"===f.type&&f.markerGraphics))for(const H of f.markerGraphics)f.scaleSymbolsProportionally||x(H.symbol,w,!0,F)}function K(f,w){v.isCIMMarkerStrokePlacement(f)&&f.offset&&(f.offset*=w);switch(f.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":f.customEndingOffset&&(f.customEndingOffset*=w);f.offsetAlongLine&&(f.offsetAlongLine*=
w);if(f.placementTemplate&&f.placementTemplate.length){var F=f.placementTemplate.map(H=>H*w);f.placementTemplate=F}break;case "CIMMarkerPlacementAlongLineVariableSize":f.maxRandomOffset&&(f.maxRandomOffset*=w);f.placementTemplate&&f.placementTemplate.length&&(F=f.placementTemplate.map(H=>H*w),f.placementTemplate=F);break;case "CIMMarkerPlacementOnLine":f.startPointOffset&&(f.startPointOffset*=w);break;case "CIMMarkerPlacementAtExtremities":f.offsetAlongLine&&(f.offsetAlongLine*=w);break;case "CIMMarkerPlacementAtRatioPositions":f.beginPosition&&
(f.beginPosition*=w);f.endPosition&&(f.endPosition*=w);break;case "CIMMarkerPlacementPolygonCenter":f.offsetX&&(f.offsetX*=w);f.offsetY&&(f.offsetY*=w);break;case "CIMMarkerPlacementInsidePolygon":f.offsetX&&(f.offsetX*=w),f.offsetY&&(f.offsetY*=w),f.stepX&&(f.stepX*=w),f.stepY&&(f.stepY*=w)}}function R(f,w){switch(f.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":f.width&&(f.width*=w);break;case "CIMGeometricEffectBuffer":f.size&&(f.size*=w);break;case "CIMGeometricEffectCut":f.beginCut&&
(f.beginCut*=w);f.endCut&&(f.endCut*=w);f.middleCut&&(f.middleCut*=w);break;case "CIMGeometricEffectDashes":f.customEndingOffset&&(f.customEndingOffset*=w);f.offsetAlongLine&&(f.offsetAlongLine*=w);if(f.dashTemplate&&f.dashTemplate.length){const F=f.dashTemplate.map(H=>H*w);f.dashTemplate=F}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":f.length&&(f.length*=w);break;case "CIMGeometricEffectMove":f.offsetX&&(f.offsetX*=w);f.offsetY&&(f.offsetY*=
w);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":f.offset&&(f.offset*=w);break;case "CIMGeometricEffectRegularPolygon":f.radius&&(f.radius*=w);break;case "CIMGeometricEffectTaperedPolygon":f.fromWidth&&(f.fromWidth*=w);f.length&&(f.length*=w);f.toWidth&&(f.toWidth*=w);break;case "CIMGeometricEffectWave":f.amplitude&&(f.amplitude*=w),f.period&&(f.period*=w)}}function J(f,w){if(f){var F="CIMTextSymbol"===f.type?f.symbol:f;f="CIMPolygonSymbol"===f.type;if(F?.symbolLayers)for(const H of F.symbolLayers)if(!(H.colorLocked||
f&&(v.isCIMStroke(H)||v.isCIMMarker(H)&&H.markerPlacement&&v.isCIMMarkerStrokePlacement(H.markerPlacement))))switch(H.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":H.tintColor&&C(w,H.tintColor);break;case "CIMVectorMarker":H.markerGraphics?.forEach(u=>{J(u.symbol,w)});break;case "CIMSolidStroke":case "CIMSolidFill":C(w,H.color);break;case "CIMHatchFill":J(H.lineSymbol,w)}}}function C(f,w){for(const F of f)if(F.join(".")===w.join("."))return;f.push(w)}function t(f,w,F){if(f){var H=
"CIMTextSymbol"===f.type?f.symbol:f;f="CIMPolygonSymbol"===H?.type;if(H?.symbolLayers)for(const u of H.symbolLayers)if(!u.colorLocked){if(f)if(F){if({layersToColor:H}=F,(v.isCIMStroke(u)||v.isCIMMarker(u)&&u.markerPlacement&&v.isCIMMarkerStrokePlacement(u.markerPlacement))&&"fill"===H||v.isCIMFill(u)&&"outline"===H)continue}else if(v.isCIMStroke(u)||v.isCIMMarker(u)&&u.markerPlacement&&v.isCIMMarkerStrokePlacement(u.markerPlacement))continue;H=w.toArray();switch(u.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":u.tintColor=
H;break;case "CIMVectorMarker":u.markerGraphics?.forEach(y=>{t(y.symbol,w,F)});break;case "CIMSolidStroke":case "CIMSolidFill":u.color=H;break;case "CIMHatchFill":t(u.lineSymbol,w,F)}}}}p.applyCIMSymbolColor=function(f,w,F){w instanceof r||(w=new r(w));(f=v.toCIMSymbolJSON(f))&&t(f,w,F)};p.applyCIMSymbolRotation=function(f,w,F=!1){f=v.toCIMSymbolJSON(f);F&&0!==w&&(w=360-w);if("CIMTextSymbol"===f?.type)f.angle=w;else if("CIMPointSymbol"===f?.type&&f.symbolLayers){F=w-(f.angle||0);for(const H of f.symbolLayers)if(v.isCIMMarker(H)){let u=
H.rotation||0;u=H.rotateClockwise?u-F:u+F;H.rotation=u}f.angle=w}};p.getCIMSymbolColor=function(f){f=v.toCIMSymbolJSON(f);const w=[];J(f,w);return w.length?new r(v.fromCIMColor(w[0])):null};p.getCIMSymbolRotation=function(f,w=!1){f=v.toCIMSymbolJSON(f);return"CIMTextSymbol"===f?.type||"CIMPointSymbol"===f?.type?(f=f.angle,null!=f&&0!==f&&w?360-f:f??0):0};p.getCIMSymbolSize=e;p.getCIMSymbolType=function(f){f=v.toCIMSymbolJSON(f);if(!f)return null;switch(f.type){case "CIMPointSymbol":return"CIMPointSymbol";
case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};p.scaleCIMMarker=L;p.scaleCIMSymbol=x;p.scaleCIMSymbolTo=function(f,w,F){if(f){var H=v.toCIMSymbolJSON(f);f=e(f);if(0===f){if(H)if("CIMTextSymbol"===H.type)H.height=w;else if(H.symbolLayers)for(const u of H.symbolLayers)switch(u.type){case "CIMPictureMarker":case "CIMVectorMarker":u.size=w;break;case "CIMPictureStroke":case "CIMSolidStroke":u.width=
w}}else x(H,w/f,!1,F)}};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(p,r){function v(f){return"function"===typeof f}function e(f){let w=f.length;for(;w--;)if(!" /-,\n".includes(f.charAt(w)))return!1;return!0}function x(f,w){const F=[];var H=0;let u=-1;do u=f.indexOf("[",H),u>=H&&(u>H&&(H=f.substr(H,u-H),F.push([H,null,e(H)])),H=u+1,u=f.indexOf("]",H),u>=H&&(u>H&&(H=f.substr(H,u-H),(H=w[H])&&F.push([null,H,
!1])),H=u+1));while(-1!==u);H<f.length-1&&(f=f.substr(H),F.push([f,null,e(f)]));return F}function L(f,w,F){let H="",u=null;for(const y of w){const [G,z,ba]=y;if(G)ba?u=G:(u&&(H+=u,u=null),H+=G);else if(w=f.attributes[z])u&&(H+=u,u=null),H+=w}return K(H,F)}function K(f,w){"string"!==typeof f&&(f=String(f));switch(w){case "LowerCase":return f.toLowerCase();case "Allcaps":return f.toUpperCase();default:return f}}function R(f){return f?{r:f[0],g:f[1],b:f[2],a:f[3]/255}:{r:0,g:0,b:0,a:0}}function J(f){if(!f)return null;
switch(f.type){case "CIMPolygonSymbol":if(f.symbolLayers)for(const w of f.symbolLayers)if(f=J(w),null!=f)return f;break;case "CIMTextSymbol":return J(f.symbol);case "CIMSolidFill":return f.color}}function C(f){if(f)switch(f.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(f=f.symbolLayers)for(const w of f)if(f=C(w),null!=f)return f;break;case "CIMTextSymbol":return C(f.symbol);case "CIMSolidStroke":return f.color}}function t(f){if(f)switch(f.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(f.symbolLayers)for(const w of f.symbolLayers)if(f=
t(w),void 0!==f)return f;break;case "CIMTextSymbol":return t(f.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return f.width}}r.adjustTextCase=K;r.analyzeTextParts=x;r.assignTextValuesFromFeature=L;r.attributesToFields=function(f){return(f?Object.keys(f):[]).map(w=>({name:w,alias:w,type:"string"===typeof f[w]?"esriFieldTypeString":"esriFieldTypeDouble"}))};r.colorToArray=function(f){return[f.r,f.g,f.b,f.a]};r.createLabelOverrideFunction=function(f,w,F){const H=x(w,
f);return u=>L(u,H,F)};r.evaluateValueOrFunction=function(f,w,F,H){return v(f)?f(w,F,H):f};r.fromCIMColor=R;r.fromCIMFontDecoration=function(f){return f.underline?"underline":f.strikethrough?"line-through":"none"};r.fromCIMFontStyle=function(f){let w="normal",F="normal";f&&(f=f.toLowerCase(),f.includes("italic")?w="italic":f.includes("oblique")&&(w="oblique"),f.includes("bold")?F="bold":f.includes("light")&&(F="lighter"));return{style:w,weight:F}};r.fromCIMHorizontalAlignment=function(f){switch(f){default:return"left";
case "Right":return"right";case "Center":return"center";case "Justify":return"center"}};r.fromCIMVerticalAlignment=function(f){switch(f){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}};r.getFillColor=J;r.getFontStyle=function(f){if(!f)return"normal";switch(f.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};r.getFontWeight=function(f){if(!f)return"normal";switch(f.toLowerCase()){case "bold":return"bold";
case "bolder":return"bolder";case "lighter":return"lighter";default:return"normal"}};r.getStrokeColor=C;r.getStrokeWidth=t;r.getTintColor=f=>f.tintColor?R(f.tintColor):{r:255,g:255,b:255,a:1};r.getValue=(f,w=0)=>null==f||isNaN(f)?w:f;r.importGeometryEngine=function(){return new Promise((f,w)=>p(["../../geometry/geometryEngineJSON"],f,w))};r.isCIMFill=function(f){return null!=f&&("CIMGradientFill"===f.type||"CIMHatchFill"===f.type||"CIMPictureFill"===f.type||"CIMSolidFill"===f.type||"CIMWaterFill"===
f.type)};r.isCIMMarker=function(f){return"CIMVectorMarker"===f.type||"CIMPictureMarker"===f.type||"CIMBarChartMarker"===f.type||"CIMCharacterMarker"===f.type||"CIMPieChartMarker"===f.type||"CIMStackedBarChartMarker"===f.type};r.isCIMMarkerStrokePlacement=function(f){return null!=f&&("CIMMarkerPlacementAlongLineRandomSize"===f.type||"CIMMarkerPlacementAlongLineSameSize"===f.type||"CIMMarkerPlacementAlongLineVariableSize"===f.type||"CIMMarkerPlacementAtExtremities"===f.type||"CIMMarkerPlacementAtMeasuredUnits"===
f.type||"CIMMarkerPlacementAtRatioPositions"===f.type||"CIMMarkerPlacementOnLine"===f.type||"CIMMarkerPlacementOnVertices"===f.type)};r.isCIMStroke=function(f){return"CIMGradientStroke"===f.type||"CIMPictureStroke"===f.type||"CIMSolidStroke"===f.type};r.isFeatureValueFn=v;r.isGeometryEngineRequired=f=>{if(!f)return!1;for(const w of f)switch(w.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":case "CIMGeometricEffectDonut":return!0}return!1};r.isSVGImage=f=>f.includes("data:image/svg+xml");
r.mapCIMSymbolToGeometryType=function(f){if(!f)return null;switch(f.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}};r.resampleHermite=function(f,w,F,H,u,y,G=!0){const z=w/u;F/=y;const ba=Math.ceil(z/2),Z=Math.ceil(F/2);for(let m=0;m<y;m++)for(let n=0;n<u;n++){const E=4*(n+(G?y-m-1:m)*u);var D=0;let Y=0,U=0,ea=0,aa=0,fa=0,O=0;const da=(m+.5)*F;for(let la=
Math.floor(m*F);la<(m+1)*F;la++){var q=Math.abs(da-(la+.5))/Z;const l=(n+.5)*z;q*=q;for(let P=Math.floor(n*z);P<(n+1)*z;P++){let W=Math.abs(l-(P+.5))/ba;D=Math.sqrt(q+W*W);-1<=D&&1>=D&&(D=2*D*D*D-3*D*D+1,0<D&&(W=4*(P+la*w),O+=D*f[W+3],U+=D,255>f[W+3]&&(D=D*f[W+3]/250),ea+=D*f[W],aa+=D*f[W+1],fa+=D*f[W+2],Y+=D))}}H[E]=ea/Y;H[E+1]=aa/Y;H[E+2]=fa/Y;H[E+3]=O/U}};r.toCIMSymbolJSON=function(f){return f.data?.symbol??null};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/LRUCache ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(p,r,v,e,x,L,K){function R(t){if(!t)return null;let f=null;switch(t.type){case "simple-fill":case "picture-fill":case "simple-marker":f=R(t.outline);break;case "simple-line":const w=L.pt2px(t.width);null!=t.style&&"none"!==t.style&&0!==w&&(f={color:t.color,style:C(t.style),width:w,cap:t.cap,join:"miter"===t.join?L.pt2px(t.miterLimit):t.join});break;default:f=null}return f}const J=new x.LRUCache(1E3),C=(()=>{const t={};return f=>{if(t[f])return t[f];const w=f.replaceAll("-","");return t[f]=
w}})();v=new v([128,128,128]);p.defaultThematicColor=v;p.dekebabifyLineStyle=C;p.getFill=function(t){const f=t.style;let w=null;if(t)switch(t.type){case "simple-marker":"cross"!==f&&"x"!==f&&(w=t.color);break;case "simple-fill":"solid"===f?w=t.color:"none"!==f&&(w={type:"pattern",x:0,y:0,src:r.getAssetUrl(`esri/symbols/patterns/${f}.png`),width:5,height:5});break;case "picture-fill":w={type:"pattern",src:t.url,width:L.pt2px(t.width)*t.xscale,height:L.pt2px(t.height)*t.yscale,x:L.pt2px(t.xoffset),
y:L.pt2px(t.yoffset)};break;case "text":w=t.color;break;case "cim":w=K.getCIMSymbolColor(t)}return w};p.getPatternUrlWithColor=function(t,f){const w=t+"-"+f;return void 0!==J.get(w)?Promise.resolve(J.get(w)):e(t,{responseType:"image"}).then(F=>{F=F.data;const H=F.naturalWidth,u=F.naturalHeight,y=document.createElement("canvas");y.width=H;y.height=u;const G=y.getContext("2d");G.fillStyle=f;G.fillRect(0,0,H,u);G.globalCompositeOperation="destination-in";G.drawImage(F,0,0);F=y.toDataURL();J.put(w,F);
return F})};p.getStroke=R;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../Color","./utils"],function(p,r,v,e){function x(C,t){const f=[],w=C.length-1;5===C.length?f.push(0,2,4):f.push(0,w);return C.map((F,H)=>f.includes(H)?e.createStopLabel(F,H,w,t):null)}async function L(C,t,f){f=new v(f??J);C=(await new Promise((w,F)=>p(["../../../renderers/visualVariables/support/visualVariableUtils"],
w,F))).getOpacity(t,C);null!=C&&(f.a=C);return f}function K(C,t){const {startIndex:f,endIndex:w,weight:F}=R(C,t);if(f===w)return t[f].color;C=v.blendColors(t[f].color,t[w].color,F);return new v(C)}function R(C,t){let f=0,w=t.length-1;t.some((F,H)=>{if(C<F.value)return w=H,!0;f=H;return!1});return{startIndex:f,endIndex:w,weight:(C-t[f].value)/(t[w].value-t[f].value)}}const J=new v([64,64,64]);r.getColorFromPointCloudStops=K;r.getRampStops=async function(C,t,f){let w=!1,F=[],H=[];if(C.stops){var u=
C.stops;F=u.map(G=>G.value);(w=u.some(G=>!!G.label))&&(H=u.map(G=>G.label))}u=F[F.length-1];if(null==F[0]&&null==u)return null;const y=w?null:x(F,f??!1);return(await Promise.all(F.map(async(G,z)=>{const ba="opacity"===C.type?await L(G,C,t):(await new Promise((Z,D)=>p(["../../../renderers/visualVariables/support/visualVariableUtils"],Z,D))).getColor(C,G);return{value:G,color:ba,label:w?H[z]:y?.[z]??""}}))).reverse()};r.getRampStopsForPointCloud=function(C){let t=!1,f=[],w=[];f=C.map(u=>u.value);(t=
C.some(u=>!!u.label))&&(w=C.map(u=>u.label??""));const F=f[f.length-1];if(null==f[0]&&null==F)return null;const H=t?null:x(f,!1);return f.map((u,y)=>{const G=K(u,C);return{value:u,color:G,label:t?w[y]:H?.[y]??""}}).reverse()};r.getStrectchRampStops=function(C,t){let f=[];if(C&&"multipart"===C.type)C.colorRamps.reverse().forEach((w,F)=>{0===F?f.push({value:t.max,color:new v(w.toColor),label:"high"}):f.push({value:null,color:new v(w.toColor),label:""});F===C.colorRamps.length-1?f.push({value:t.min,
color:new v(w.fromColor),label:"low"}):f.push({value:null,color:new v(w.fromColor),label:""})});else{let w,F;C&&"algorithmic"===C.type?(w=C.fromColor,F=C.toColor):(w=[0,0,0,1],F=[255,255,255,1]);f=[{value:t.max,color:new v(F),label:"high"},{value:t.min,color:new v(w),label:"low"}]}return f};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),
function(p,r,v,e,x,L){async function K(J){if(!("visualVariables"in J&&J.visualVariables))return null;J=J.visualVariables.find(f=>"color"===f.type);if(!J)return null;var C=null,t=null;if(J.stops){if(1===J.stops.length)return J.stops[0].color;C=J.stops[0].value;t=J.stops[J.stops.length-1].value}C=null!=C&&null!=t?C+(t-C)/2:0;({getColor:t}=await new Promise((f,w)=>p(["../../../renderers/visualVariables/support/visualVariableUtils"],f,w)));return t(J,C)??null}const R=e.convertDateFormatToIntlOptions("short-date");
r.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];
r.SPECIAL_CHARS_GREATER_THAN="\x3e";r.SPECIAL_CHARS_LESS_THAN="\x3c";r.createStopLabel=function(J,C,t,f){let w="";0===C?w="\x3c ":C===t&&(w="\x3e ");C=null;C=f?e.formatDate(J,R):x.format(J);return w+C};r.getMedianColor=K;r.getSymbolForFlowRenderer=async function(J,C){const t=J.trailCap,f=J.trailWidth||1;J=C||await K(J)||J.color;return new L({cap:t,color:J,width:f})};r.isRasterBandStatistics=function(J){return null!=J&&"object"===typeof J&&"min"in J&&"max"in J};Object.defineProperty(r,Symbol.toStringTag,
{value:"Module"})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(p,r){p.getHeatmapRampStops=function(v){if(!v.colorStops)return[];const e=[...v.colorStops].filter(L=>0<L.color?.a);let x=e.length-1;if(e&&e[0]){const L=e[x];L&&1!==L.ratio&&(e.push(new r({ratio:1,color:L.color})),x++)}return e.map((L,K)=>{let R="";0===K?R=v.legendOptions?.minLabel||"low":K===x&&(R=v.legendOptions?.maxLabel||"high");return{color:L.color,
label:R,ratio:L.ratio}}).reverse()};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/arrayUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f){const w={chartAnimation:!0};v=function(F){function H(y){y=F.call(this,y)||this;y.abilities={...w};y.activeMediaInfoIndex=0;y.attributes=null;y.description=null;y.fieldInfoMap=null;y.formattedAttributes=null;y.expressionAttributes=null;y.isAggregate=!1;y.layer=null;y.mediaInfos=null;y.popupTemplate=null;y.relatedInfos=null;y.title=null;return y}p._inherits(H,F);var u=H.prototype;u.castAbilities=function(y){return{...w,...y}};u.setActiveMedia=function(y){this._setContentElementMedia(y)};
u.next=function(){this._pageContentElementMedia(1)};u.previous=function(){this._pageContentElementMedia(-1)};u._setContentElementMedia=function(y){const {formattedMediaInfoCount:G}=this;this.activeMediaInfoIndex=(y+G)%G};u._pageContentElementMedia=function(y){const {activeMediaInfoIndex:G}=this;this._setContentElementMedia(G+y)};u._formatMediaInfos=function(){const {mediaInfos:y,layer:G}=this,z=this.attributes??{},ba=this.formattedAttributes??{},Z=this.expressionAttributes??{},D=this.fieldInfoMap??
new Map;return y?.map(q=>{q=q?.clone();if(!q)return null;q.title=t.substituteFieldsInLinksAndAttributes({attributes:z,fieldInfoMap:D,globalAttributes:ba,expressionAttributes:Z,layer:G,text:q.title});q.caption=t.substituteFieldsInLinksAndAttributes({attributes:z,fieldInfoMap:D,globalAttributes:ba,expressionAttributes:Z,layer:G,text:q.caption});q.altText=t.substituteFieldsInLinksAndAttributes({attributes:z,fieldInfoMap:D,globalAttributes:ba,expressionAttributes:Z,layer:G,text:q.altText});if("image"===
q.type){var {value:m}=q;this._setImageValue({value:m,formattedAttributes:ba,layer:G});return q.value.sourceURL?q:void 0}return"pie-chart"===q.type||"line-chart"===q.type||"column-chart"===q.type||"bar-chart"===q.type?({value:m}=q,this._setChartValue({value:m,chartType:q.type,attributes:z,formattedAttributes:ba,layer:G,expressionAttributes:Z}),q):null}).filter(e.isSome)??[]};u._setImageValue=function(y){const G=this.fieldInfoMap??new Map,{value:z,formattedAttributes:ba,layer:Z}=y,{linkURL:D,sourceURL:q}=
z;q&&(y=t.fixTokens(q,Z),z.sourceURL=t.substituteAttributes({formattedAttributes:ba,template:y,fieldInfoMap:G}));D&&(y=t.fixTokens(D,Z),z.linkURL=t.substituteAttributes({formattedAttributes:ba,template:y,fieldInfoMap:G}))};u._setChartValue=function(y){const {value:G,attributes:z,formattedAttributes:ba,chartType:Z,layer:D,expressionAttributes:q}=y,{popupTemplate:m,relatedInfos:n}=this,{fields:E,normalizeField:Y}=G;G.fields=t.getFixedFieldNames(E,D);Y&&(G.normalizeField=t.getFixedFieldName(Y,D));if(E.some(ea=>
!!(null!=ba[ea]||t.isRelatedField(ea)&&n?.size))){var U=m?.fieldInfos??[];E.forEach(ea=>{t.isRelatedField(ea)?G.series=[...G.series,...this._getRelatedChartInfos({fieldInfos:U,fieldName:ea,formattedAttributes:ba,chartType:Z,value:G})]:(ea=this._getChartOption({value:G,attributes:z,chartType:Z,formattedAttributes:ba,expressionAttributes:q,fieldName:ea,fieldInfos:U}),G.series.push(ea))})}};u._getRelatedChartInfos=function(y){const {fieldInfos:G,fieldName:z,formattedAttributes:ba,chartType:Z,value:D}=
y,q=[],m=f.getRelatedFieldInfo(z);y=m&&this.relatedInfos?.get(m.layerId.toString());if(!y)return q;const {relatedFeatures:n,relation:E}=y;if(!E||!n)return q;({cardinality:y}=E);n.forEach(Y=>{const {attributes:U}=Y;U&&Object.keys(U).forEach(ea=>{ea===m.fieldName&&q.push(this._getChartOption({value:D,attributes:U,formattedAttributes:ba,fieldName:z,chartType:Z,relatedFieldName:ea,hasMultipleRelatedFeatures:1<n?.length,fieldInfos:G}))})});return"one-to-many"===y||"many-to-many"===y?q:[q[0]]};u._getTooltip=
function({label:y,value:G,chartType:z}){return"pie-chart"===z?`${y}`:`${y}: ${G}`};u._getChartOption=function(y){const {value:G,attributes:z,formattedAttributes:ba,expressionAttributes:Z,fieldName:D,relatedFieldName:q,fieldInfos:m,chartType:n,hasMultipleRelatedFeatures:E}=y;var Y=this.layer,U=this.fieldInfoMap??new Map;const {normalizeField:ea,tooltipField:aa}=G;y=ea?t.isRelatedField(ea)?z[f.getRelatedFieldInfo(ea).fieldName]:z[ea]:null;var fa=t.isExpressionField(D)&&Z&&void 0!==Z[D]?Z[D]:q&&void 0!==
z[q]?z[q]:void 0!==z[D]?z[D]:ba[D];y=new C({fieldName:D,value:void 0===fa?null:fa&&y?fa/y:fa});if(t.isRelatedField(D))return Y=U.get(D.toLowerCase()),fa=aa&&U.get(aa.toLowerCase()),U=Y?.fieldName??D,fa=E&&aa?f.getRelatedFieldInfo(aa).fieldName:fa?.fieldName??aa,y.tooltip=this._getTooltip({label:E&&fa?z[fa]:ba[fa]??Y?.label??Y?.fieldName??q,value:E&&q?z[q]:ba[U],chartType:n}),y;U=t.getFieldInfo(m,D);Y=t.getFixedFieldName(D,Y);U=aa&&void 0!==ba[aa]?ba[aa]:t.getFieldInfoLabel(U||new J({fieldName:Y}),
this.popupTemplate?.expressionInfos);y.tooltip=this._getTooltip({label:U,value:ba[Y],chartType:n});return y};p._createClass(H,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return H}(v);r.__decorate([x.property()],v.prototype,"abilities",void 0);r.__decorate([L.cast("abilities")],
v.prototype,"castAbilities",null);r.__decorate([x.property()],v.prototype,"activeMediaInfoIndex",void 0);r.__decorate([x.property({readOnly:!0})],v.prototype,"activeMediaInfo",null);r.__decorate([x.property()],v.prototype,"attributes",void 0);r.__decorate([x.property()],v.prototype,"description",void 0);r.__decorate([x.property()],v.prototype,"fieldInfoMap",void 0);r.__decorate([x.property()],v.prototype,"formattedAttributes",void 0);r.__decorate([x.property()],v.prototype,"expressionAttributes",
void 0);r.__decorate([x.property({readOnly:!0})],v.prototype,"formattedMediaInfos",null);r.__decorate([x.property()],v.prototype,"isAggregate",void 0);r.__decorate([x.property()],v.prototype,"layer",void 0);r.__decorate([x.property({readOnly:!0})],v.prototype,"formattedMediaInfoCount",null);r.__decorate([x.property()],v.prototype,"mediaInfos",void 0);r.__decorate([x.property()],v.prototype,"popupTemplate",void 0);r.__decorate([x.property()],v.prototype,"relatedInfos",void 0);r.__decorate([x.property()],
v.prototype,"title",void 0);return v=r.__decorate([R.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],v)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../config ../../../kernel ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H,u,y,G,z,ba,Z,D,q,m,n,E,Y,U,ea,aa,fa,O,da){function la(N,ka){if(!ka.relationships)return null;let oa=null;({relationships:ka}=ka);ka.some(sa=>sa.id===parseInt(N,10)?(oa=sa,!0):!1);return oa}function l({originRelationship:N,relationships:ka,layerId:oa}){let sa=null;ka&&ka.some(M=>{`${M.relatedTableId}`===oa&&M.id===N?.id&&(sa=M);return!!sa});return sa}function P(N,ka){ka=ka.toLowerCase();for(const oa in N)if(oa.toLowerCase()===ka)return N[oa];return null}function W(N,
ka,oa,sa){const M=new aa;M.outFields=["*"];M.relationshipId="number"===typeof ka.id?ka.id:parseInt(ka.id,10);M.objectIds=[N.attributes[oa.objectIdField]];return oa.queryRelatedFeatures?.(M,sa)??Promise.resolve({})}function Q(N,ka,oa){let sa=0;const M=[];for(;sa<ka.length;)M.push(`${N} IN (${ka.slice(sa,oa+sa)})`),sa+=oa;return M.join(" OR ")}async function X(N,ka,oa,sa){var M=oa.layerId.toString();const {layerInfo:ja,relation:qa,relatedFields:ua,outStatistics:ya,url:Aa,sourceSpatialReference:Ba}=
ka;if(!ja||!qa)return null;M=l({originRelationship:qa,relationships:ja.relationships,layerId:M});if(M?.relationshipTableId&&M.keyFieldInRelationshipTable){oa=(await W(N,M,oa,sa))[N.attributes[oa.objectIdField]];if(!oa)return null;const Ia=oa.features.map($a=>$a.attributes[ja.objectIdField]);if(ya?.length&&ja.supportsStatistics)return ka=new E,ka.where=Q(ja.objectIdField,Ia,1E3),ka.outFields=ua,ka.outStatistics=ya,ka.sourceSpatialReference=Ba,ka={features:Promise.resolve(oa),statsFeatures:J.executeQueryJSON(Aa,
ka)},x.eachAlways(ka)}return(M=M?.keyField)?(oa=L.isNumericField(T(ja.fields,M)),N=P(N.attributes,qa.keyField),M=oa?`${M}=${N}`:`${M}='${N}'`,N=J.executeQueryJSON(Aa,new E({where:M,outFields:ka.relatedFields,sourceSpatialReference:Ba}),sa),ka=ka.outStatistics&&0<ka.outStatistics.length&&ja.supportsStatistics?J.executeQueryJSON(Aa,new E({where:M,outFields:ka.relatedFields,outStatistics:ka.outStatistics,sourceSpatialReference:Ba}),sa):null,sa={features:N},ka&&(sa.statsFeatures=ka),x.eachAlways(sa)):
null}function T(N,ka){if(null!=N){ka=ka.toLowerCase();for(const oa of N)if(oa&&oa.name.toLowerCase()===ka)return oa}return null}const k=e.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),S=new Map;p.createRelatedInfo=function(N,ka){if(N=la(N,ka))return{url:`${ka.url}/${N.relatedTableId}`,sourceSpatialReference:ka.spatialReference,relation:N,relatedFields:[],outStatistics:[]}};p.getDestinationRelation=l;p.getRelatedFieldInfo=function(N){if(!da.isRelatedField(N))return null;const [ka,oa]=
N.split("/").slice(1);return{layerId:ka,fieldName:oa}};p.queryLayerInfos=function({relatedInfos:N,layer:ka},oa){const sa={};N.forEach((M,ja)=>{({relation:M}=M);if(!M)throw ja=new v("relation-required","A relation is required on a layer to retrieve related records."),k.error(ja),ja;({relatedTableId:M}=M);if("number"!==typeof M)throw ja=new v("A related table ID is required on a layer to retrieve related records."),k.error(ja),ja;M=`${ka.url}/${M}`;const qa=S.get(M),ua=qa??r(M,{query:{f:"json"},signal:void 0});
qa||S.set(M,ua);sa[ja]=ua});return x.whenOrAbort(x.eachAlways(sa),oa)};p.queryRelatedFeatures=function({graphic:N,relatedInfos:ka,layer:oa},sa){const M={};ka.forEach((ja,qa)=>{ja.layerInfo&&(M[qa]=X(N,ja,oa,sa))});return x.eachAlways(M)};p.setRelatedFeatures=function(N,ka){if(ka&&N){var {features:oa,statsFeatures:sa}=N;N=oa&&oa.value;ka.relatedFeatures=N?N.features:[];N=sa&&sa.value;ka.relatedStatsFeatures=N?N.features:[]}};p.updateRelatedInfo=function({relatedInfo:N,fieldName:ka,fieldInfo:oa}){N.relatedFields?.push(ka);
oa.statisticType&&(ka=new O({statisticType:oa.statisticType,onStatisticField:ka,outStatisticFieldName:ka}),N.outStatistics?.push(ka))};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/chartUtilsAm5":function(){define("require exports ../../intl ../../chunks/Theme ../../chunks/Tooltip ../../chunks/DefaultTheme ../../intl/locale".split(" "),function(p,r,v,e,x,L,K){function R(b,c,g){if(c!==g)throw Error("Required "+g+" arguments for "+b+" but got "+c);}function J(b,
c,g){if(c<g)throw Error("Required at least "+g+" arguments for "+b+" but got "+c);}function C(b,c,g){J(b,c,g);if(0!==c%g)throw Error("Arguments for "+b+" must be in pairs of "+g);}function t(b){for(let g=0;g<b.length;g+=7){let A=g+3;var c=b[A];1<c.length&&(c=/^([01])([01])(.*)$/.exec(c),null!==c&&(b.splice(A,0,c[1]),++A,b.splice(A,0,c[2]),++A,0<c[3].length?b[A]=c[3]:b.splice(A,1)));++A;c=b[A];1<c.length&&(c=/^([01])(.+)$/.exec(c),null!==c&&(b.splice(A,0,c[1]),++A,b[A]=c[2]))}}function f(b){if(0===
b||1===b)return b;throw Error("Flag must be 0 or 1");}function w(b,c){for(;!b.interactive||c(b);)if(b._parent)b=b._parent;else break}function F(b,c,g){return e.addEventListener(b,e.getRendererEvent(c),A=>{const I=e.getEventTarget(A);let V=A.touches;V?(0==V.length&&(V=A.changedTouches),g(e.copy$1(V),I)):g([A],I)})}function H(b){var c=document.createElement("canvas");c.width=1;c.height=1;c=c.getContext("2d",{willReadFrequently:!0});c.drawImage(b,0,0,1,1);try{return c.getImageData(0,0,1,1),!1}catch(g){return console.warn('Image "'+
b.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function u(b){b.width=0;b.height=0;b.style.width="0px";b.style.height="0px"}function y(b,c){b.left=Math.min(b.left,c.x);b.top=Math.min(b.top,c.y);b.right=Math.max(b.right,c.x);b.bottom=Math.max(b.bottom,c.y)}function G(b,c){null==b?requestAnimationFrame(c):setTimeout(()=>{requestAnimationFrame(c)},1E3/b)}class z{constructor(){Object.defineProperty(this,
"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]});this._observer=new ResizeObserver(b=>{e.each(b,c=>{e.each(this._targets,g=>{g.target===c.target&&g.callback()})})})}addTarget(b,c){this._observer.observe(b,{box:"border-box"});this._targets.push({target:b,callback:c})}removeTarget(b){this._observer.unobserve(b);e.keepIf(this._targets,c=>c.target!==b)}}class ba{constructor(){Object.defineProperty(this,
"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null});Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(b,c){if(null===this._timer){let g=null;const A=()=>{const I=Date.now();if(null===g||I>g+ba.delay)g=I,e.each(this._targets,V=>{let na=V.target.getBoundingClientRect();if(na.width!==V.size.width||na.height!==V.size.height)V.size=na,V.callback()});this._timer=0===this._targets.length?null:requestAnimationFrame(A)};this._timer=requestAnimationFrame(A)}this._targets.push({target:b,
callback:c,size:{width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0}})}removeTarget(b){e.keepIf(this._targets,c=>c.target!==b);0===this._targets.length&&null!==this._timer&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty(ba,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let Z=null;class D{constructor(b,c){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_element",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});null===Z&&(Z="undefined"!==typeof ResizeObserver?new z:new ba);this._sensor=Z;this._element=b;this._listener=e.onZoom(c);this._sensor.addTarget(b,c)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),
this._listener.dispose())}get sensor(){return this._sensor}}class q extends e.Entity{}Object.defineProperty(q,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"});Object.defineProperty(q,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:e.Entity.classNames.concat([q.className])});class m extends e.Entity{_setDefaults(){this._setDefault("negativeBase",0);this._setDefault("numberFormat","#,###.#####");this._setDefault("smallNumberThreshold",1);this._setDefault("bigNumberPrefixes",
[{number:1E3,suffix:this._t("_big_number_suffix_3")},{number:1E6,suffix:this._t("_big_number_suffix_6")},{number:1E9,suffix:this._t("_big_number_suffix_9")},{number:1E12,suffix:this._t("_big_number_suffix_12")},{number:1E15,suffix:this._t("_big_number_suffix_15")},{number:1E18,suffix:this._t("_big_number_suffix_18")},{number:1E21,suffix:this._t("_big_number_suffix_21")},{number:1E24,suffix:this._t("_big_number_suffix_24")}]);this._setDefault("smallNumberPrefixes",[{number:1E-24,suffix:this._t("_small_number_suffix_24")},
{number:1E-21,suffix:this._t("_small_number_suffix_21")},{number:1E-18,suffix:this._t("_small_number_suffix_18")},{number:1E-15,suffix:this._t("_small_number_suffix_15")},{number:1E-12,suffix:this._t("_small_number_suffix_12")},{number:1E-9,suffix:this._t("_small_number_suffix_9")},{number:1E-6,suffix:this._t("_small_number_suffix_6")},{number:.001,suffix:this._t("_small_number_suffix_3")}]);this._setDefault("bytePrefixes",[{number:1,suffix:this._t("_byte_suffix_B")},{number:1024,suffix:this._t("_byte_suffix_KB")},
{number:1048576,suffix:this._t("_byte_suffix_MB")},{number:1073741824,suffix:this._t("_byte_suffix_GB")},{number:1099511627776,suffix:this._t("_byte_suffix_TB")},{number:0x4000000000000,suffix:this._t("_byte_suffix_PB")}]);super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(b,c,g){if(null==c||e.isString(c)&&"number"===c.toLowerCase())c=this.get("numberFormat","");b=Number(b);if(e.isObject(c))try{return this.get("intlLocales")?(new Intl.NumberFormat(this.get("intlLocales"),c)).format(b):
(new Intl.NumberFormat(void 0,c)).format(b)}catch(A){return"Invalid"}else c=e.cleanFormat(c),c=this.parseFormat(c,this._root.language),c=b>this.get("negativeBase")?c.positive:b<this.get("negativeBase")?c.negative:c.zero,null==g||c.mod||(c=e.copy(c),c.decimals.active=0==b?0:g),g=c.template.split(e.PLACEHOLDER).join(this.applyFormat(b,c));return g}parseFormat(b,c){var g=c.translateEmpty("_thousandSeparator");c=c.translateEmpty("_decimalSeparator");g={positive:{thousands:{active:-1,passive:-1,interval:-1,
separator:g},decimals:{active:-1,passive:-1,separator:c},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:g},decimals:{active:-1,passive:-1,separator:c},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:g},decimals:{active:-1,passive:-1,separator:c},template:"",source:"",parsed:!1}};b=b.replace("||",e.PLACEHOLDER2);b=b.split("|");g.positive.source=b[0];"undefined"===typeof b[2]?g.zero=g.positive:g.zero.source=
b[2];"undefined"===typeof b[1]?g.negative=g.positive:g.negative.source=b[1];e.each$1(g,(A,I)=>{if(!I.parsed){A=I.source;"number"===A.toLowerCase()&&(A=this.get("numberFormat","#,###.#####"));A=e.TextFormatter.chunk(A,!0);for(let na=0;na<A.length;na++){let pa=A[na];pa.text=pa.text.replace(e.PLACEHOLDER2,"|");if("value"===pa.type){let ta=pa.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP\u2030!]?/);if(ta)if(null===ta||""===ta[0])I.template+=pa.text;else{var V=ta[0].match(/[abespABESP%\u2030!]{2}|[abespABESP%\u2030]{1}$/);
V&&(I.mod=V[0].toLowerCase(),I.modSpacing=ta[0].match(/[ ]{1}[abespABESP%\u2030!]{1}$/)?!0:!1);V=ta[0].split(".");if(""!==V[0]){I.thousands.active=(V[0].match(/0/g)||[]).length;I.thousands.passive=(V[0].match(/#/g)||[]).length+I.thousands.active;let ra=V[0].split(",");1!==ra.length&&(I.thousands.interval=(ra.pop()||"").length,0===I.thousands.interval&&(I.thousands.interval=-1))}"undefined"!==typeof V[1]&&(I.decimals.active=(V[1].match(/0/g)||[]).length,I.decimals.passive=(V[1].match(/#/g)||[]).length+
I.decimals.active);I.template+=pa.text.split(ta[0]).join(e.PLACEHOLDER)}}else I.template+=pa.text}I.parsed=!0}});return g}applyFormat(b,c){let g=0>b;b=Math.abs(b);let A="";var I="";let V=c.mod?c.mod.split(""):[];-1!==V.indexOf("b")?(I=this.applyPrefix(b,this.get("bytePrefixes"),-1!==V.indexOf("!")),b=I[0],A=I[1],I=I[2],c.modSpacing&&(I=" "+I)):-1!==V.indexOf("a")?(I=this.applyPrefix(b,b<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),-1!==V.indexOf("!")),
b=I[0],A=I[1],I=I[2],c.modSpacing&&(I=" "+I)):-1!==V.indexOf("p")?(b=parseFloat(b.toPrecision(Math.min(b.toString().length+2,21))),A=this._root.language.translate("_percentPrefix"),I=this._root.language.translate("_percentSuffix"),""==A&&""==I&&(I="%")):-1!==V.indexOf("%")?(b=parseFloat((100*b).toPrecision(Math.min(b.toString().length+2,21))),I="%"):-1!==V.indexOf("\u2030")&&(b=parseFloat((1E3*b).toPrecision(Math.min(b.toString().length+3,21))),I="\u2030");if(-1!==V.indexOf("e"))I=0<=c.decimals.passive?
b.toExponential(c.decimals.passive).split("e"):b.toExponential().split("e"),b=Number(I[0]),I="e"+I[1],c.modSpacing&&(I=" "+I);else if(0===c.decimals.passive)b=Math.round(b);else if(0<c.decimals.passive){var na=Math.pow(10,c.decimals.passive);b=Math.round(b*na)/na}na="";var pa=e.numberToString(b).split("."),ta=pa[0];ta.length<c.thousands.active&&(ta=Array(c.thousands.active-ta.length+1).join("0")+ta);if(0<c.thousands.interval){let ra=[],wa=ta.split("").reverse().join("");for(let Da=0,ia=ta.length;Da<=
ia;Da+=c.thousands.interval)ta=wa.substr(Da,c.thousands.interval).split("").reverse().join(""),""!==ta&&ra.unshift(ta);ta=ra.join(c.thousands.separator)}na+=ta;1===pa.length&&pa.push("");pa=pa[1];pa.length<c.decimals.active&&(pa+=Array(c.decimals.active-pa.length+1).join("0"));""!==pa&&(na+=c.decimals.separator+pa);""===na&&(na="0");0!==b&&g&&-1===V.indexOf("s")&&(na="-"+na);A&&(na=A+na);I&&(na+=I);return na}applyPrefix(b,c,g=!1){let A=b,I="",V="",na=!1,pa=1;for(let ta=0,ra=c.length;ta<ra;ta++)c[ta].number<=
b&&(0===c[ta].number?A=0:(A=b/c[ta].number,pa=c[ta].number),I=c[ta].prefix,V=c[ta].suffix,na=!0);!na&&g&&c.length&&0!=b&&(A=b/c[0].number,I=c[0].prefix,V=c[0].suffix,na=!0);na&&(A=parseFloat(A.toPrecision(Math.min(pa.toString().length+Math.floor(A).toString().replace(/[^0-9]*/g,"").length,21))));return[A,I,V]}escape(b){return b.replace("||",e.PLACEHOLDER2)}unescape(b){return b.replace(e.PLACEHOLDER2,"|")}}class n extends e.Entity{_setDefaults(){this._setDefault("capitalize",!0);this._setDefault("dateFormat",
"yyyy-MM-dd");super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(b,c){if("undefined"===typeof c||""===c)c=this.get("dateFormat","yyyy-MM-dd");if(e.isObject(c))try{var g=this.get("intlLocales");return g?(new Intl.DateTimeFormat(g,c)).format(b):(new Intl.DateTimeFormat(void 0,c)).format(b)}catch(A){return"Invalid"}c=this.parseFormat(c);(g=this._root.timezone)&&!this._root.utc&&(b=g.convertLocal(b));if(!e.isNumber(b.getTime()))return"Invalid date";b=this.applyFormat(b,c);this.get("capitalize")&&
(b=b.replace(/^.{1}/,b.substr(0,1).toUpperCase()));return b}applyFormat(b,c){let g=c.template,A,I,V,na,pa,ta,ra,wa,Da=b.getTime();this._root.utc?(A=b.getUTCFullYear(),I=b.getUTCMonth(),V=b.getUTCDay(),na=b.getUTCDate(),pa=b.getUTCHours(),ta=b.getUTCMinutes(),ra=b.getUTCSeconds(),wa=b.getUTCMilliseconds()):(A=b.getFullYear(),I=b.getMonth(),V=b.getDay(),na=b.getDate(),pa=b.getHours(),ta=b.getMinutes(),ra=b.getSeconds(),wa=b.getMilliseconds());for(let za=0,Fa=c.parts.length;za<Fa;za++){var ia="";switch(c.parts[za]){case "G":ia=
this._t(0>A?"_era_bc":"_era_ad");break;case "yyyy":ia=Math.abs(A).toString();0>A&&(ia+=this._t("_era_bc"));break;case "yyy":case "yy":case "y":ia=Math.abs(A).toString().substr(-c.parts[za].length);0>A&&(ia+=this._t("_era_bc"));break;case "YYYY":case "YYY":case "YY":case "Y":var Ea=e.getWeekYear(b,this._root.utc);ia="YYYY"==c.parts[za]?Math.abs(Ea).toString():Math.abs(Ea).toString().substr(-c.parts[za].length);0>Ea&&(ia+=this._t("_era_bc"));break;case "q":ia=""+Math.ceil((b.getMonth()+1)/3);break;
case "MMMMM":ia=this._t(this._getMonth(I)).substr(0,1);break;case "MMMM":ia=this._t(this._getMonth(I));break;case "MMM":ia=this._t(this._getShortMonth(I));break;case "MM":ia=e.padString(I+1,2,"0");break;case "M":ia=(I+1).toString();break;case "ww":ia=e.padString(e.getWeek(b,this._root.utc),2,"0");break;case "w":ia=e.getWeek(b,this._root.utc).toString();break;case "W":ia=e.getMonthWeek(b,this._root.utc).toString();break;case "dd":ia=e.padString(na,2,"0");break;case "d":ia=na.toString();break;case "DD":case "DDD":ia=
e.padString(e.getYearDay(b,this._root.utc).toString(),c.parts[za].length,"0");break;case "D":ia=e.getYearDay(b,this._root.utc).toString();break;case "t":ia=this._root.language.translateFunc("_dateOrd").call(this,na);break;case "E":ia=(V||7).toString();break;case "EE":ia=e.padString((V||7).toString(),2,"0");break;case "EEE":case "eee":ia=this._t(this._getShortWeekday(V));break;case "EEEE":case "eeee":ia=this._t(this._getWeekday(V));break;case "EEEEE":case "eeeee":ia=this._t(this._getShortWeekday(V)).substr(0,
1);break;case "e":case "ee":ia=(V-(this._root.locale.firstDayOfWeek||1)+1).toString();"ee"==c.parts[za]&&(ia=e.padString(ia,2,"0"));break;case "a":ia=12<=pa?this._t("PM"):this._t("AM");break;case "aa":ia=12<=pa?this._t("P.M."):this._t("A.M.");break;case "aaa":ia=12<=pa?this._t("P"):this._t("A");break;case "h":ia=e.get12Hours(pa).toString();break;case "hh":ia=e.padString(e.get12Hours(pa),2,"0");break;case "H":ia=pa.toString();break;case "HH":ia=e.padString(pa,2,"0");break;case "K":ia=e.get12Hours(pa,
0).toString();break;case "KK":ia=e.padString(e.get12Hours(pa,0),2,"0");break;case "k":ia=(pa+1).toString();break;case "kk":ia=e.padString(pa+1,2,"0");break;case "m":ia=ta.toString();break;case "mm":ia=e.padString(ta,2,"0");break;case "s":ia=ra.toString();break;case "ss":ia=e.padString(ra,2,"0");break;case "S":case "SS":case "SSS":ia=Math.round(wa/1E3*Math.pow(10,c.parts[za].length)).toString();break;case "x":ia=Da.toString();break;case "n":case "nn":case "nnn":ia=e.padString(wa,c.parts[za].length,
"0");break;case "z":ia=e.getTimeZone(b,!1,!1,this._root.utc);break;case "zz":ia=e.getTimeZone(b,!0,!1,this._root.utc);break;case "zzz":ia=e.getTimeZone(b,!1,!0,this._root.utc);break;case "zzzz":ia=e.getTimeZone(b,!0,!0,this._root.utc);break;case "Z":case "ZZ":Ea=(ia=this._root.utc?"UTC":this._root.timezone)?e.getTimezoneOffset(ia):b.getTimezoneOffset();ia=Math.abs(Ea)/60;let xa=Math.floor(ia),Ma=60*ia-60*xa;this._root.utc&&(Ma=xa=0);"Z"==c.parts[za]?(ia="GMT",ia+=0<Ea?"-":"+",ia+=e.padString(xa,2)+
":"+e.padString(Ma,2)):(ia=0<Ea?"-":"+",ia+=e.padString(xa,2)+e.padString(Ma,2));break;case "i":ia=b.toISOString();break;case "I":ia=b.toUTCString()}g=g.replace(e.PLACEHOLDER,ia)}return g}parseFormat(b){let c={template:"",parts:[]};b=e.TextFormatter.chunk(b,!0);for(let A=0;A<b.length;A++){let I=b[A];if("value"===I.type){if(I.text.match(/^date$/i)){var g=this.get("dateFormat","yyyy-MM-dd");e.isString(g)||(g="yyyy-MM-dd");I.text=g}if(g=I.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g))for(let V=
0;V<g.length;V++)c.parts.push(g[V]),I.text=I.text.replace(g[V],e.PLACEHOLDER)}c.template+=I.text}return c}_months(){return"January February March April May June July August September October November December".split(" ")}_getMonth(b){return this._months()[b]}_shortMonths(){return"Jan Feb Mar Apr May(short) Jun Jul Aug Sep Oct Nov Dec".split(" ")}_getShortMonth(b){return this._shortMonths()[b]}_weekdays(){return"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")}_getWeekday(b){return this._weekdays()[b]}_shortWeekdays(){return"Sun Mon Tue Wed Thu Fri Sat".split(" ")}_getShortWeekday(b){return this._shortWeekdays()[b]}parse(b,
c){if(b instanceof Date)return b;if(e.isNumber(b))return new Date(b);e.isString(b)||(b=b.toString());var g="";c=e.cleanFormat(c);c=c.substr(0,b.length);let A=this.parseFormat(c);var I=-1,V=-1,na=-1,pa=-1,ta=-1,ra=-1,wa=-1,Da=-1,ia=-1,Ea=-1,za=-1,Fa=-1,xa=-1,Ma=-1,Ga=-1,Pa=-1,Qa=-1,Oa=-1,Ua=-1,Wa=c=-1,Sa=-1,Ha=1970,Ta=0,Na=1,a=0,d=0,h=0,B=0,ca=null,ha=0,ma=this._root.utc;let va=ca=0;for(let Ca=0;Ca<A.parts.length;Ca++){va=Ca+ca+1;switch(A.parts[Ca]){case "yyyy":case "YYYY":g+="([0-9]{4})";I=va;break;
case "yyy":case "YYY":g+="([0-9]{3})";V=va;break;case "yy":case "YY":g+="([0-9]{2})";na=va;break;case "y":case "Y":g+="([0-9]{1})";pa=va;break;case "MMMM":g+="("+this.getStringList(this._months()).join("|")+")";wa=va;break;case "MMM":g+="("+this.getStringList(this._shortMonths()).join("|")+")";ra=va;break;case "MM":case "M":g+="([0-9]{2}|[0-9]{1})";ta=va;break;case "ww":case "w":g+="([0-9]{2}|[0-9]{1})";Ea=va;break;case "dd":case "d":g+="([0-9]{2}|[0-9]{1})";Da=va;break;case "DDD":case "DD":case "D":g+=
"([0-9]{3}|[0-9]{2}|[0-9]{1})";ia=va;break;case "dddd":g+="("+this.getStringList(this._weekdays()).join("|")+")";break;case "ddd":g+="("+this.getStringList(this._shortWeekdays()).join("|")+")";break;case "aaa":case "aa":case "a":g+="("+this.getStringList("AM PM A.M. P.M. A P".split(" ")).join("|")+")";Ua=va;break;case "hh":case "h":g+="([0-9]{2}|[0-9]{1})";Ma=va;break;case "HH":case "H":g+="([0-9]{2}|[0-9]{1})";za=va;break;case "KK":case "K":g+="([0-9]{2}|[0-9]{1})";Fa=va;break;case "kk":case "k":g+=
"([0-9]{2}|[0-9]{1})";xa=va;break;case "mm":case "m":g+="([0-9]{2}|[0-9]{1})";Ga=va;break;case "ss":case "s":g+="([0-9]{2}|[0-9]{1})";Pa=va;break;case "SSS":case "SS":case "S":g+="([0-9]{3}|[0-9]{2}|[0-9]{1})";Qa=va;Oa=A.parts[Ca].length;break;case "nnn":case "nn":case "n":g+="([0-9]{3}|[0-9]{2}|[0-9]{1})";Qa=va;break;case "x":g+="([0-9]{1,})";Wa=va;break;case "Z":g+="GMT([-+]+[0-9]{2}:[0-9]{2})";c=va;break;case "ZZ":g+="([\\-+]+[0-9]{2}[0-9]{2})";c=va;break;case "i":g+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)";
Sa=va;ca+=7;break;case "G":case "YYYY":case "YYY":case "YY":case "Y":case "MMMMM":case "W":case "EEEEE":case "EEEE":case "EEE":case "EE":case "E":case "eeeee":case "eeee":case "eee":case "ee":case "e":case "zzzz":case "zzz":case "zz":case "z":case "t":ca--}g+="[^0-9]*"}(g=b.match(new RegExp(g)))?(-1<I&&(Ha=parseInt(g[I])),-1<V&&(Ha=parseInt(g[V])+1E3),-1<na&&(Ha=parseInt(g[na]),Ha=50<Ha?Ha+1E3:Ha+2E3),-1<pa&&(Ha=parseInt(g[pa]),Ha=10*Math.floor((new Date).getFullYear()/10)+Ha),-1<wa&&(Ta=this.resolveMonth(g[wa])),
-1<ra&&(Ta=this.resolveShortMonth(g[ra])),-1<ta&&(Ta=parseInt(g[ta])-1),-1<Ea&&-1===Da&&(Ta=0,Na=e.getDayFromWeek(parseInt(g[Ea]),Ha,1,this._root.utc)),-1<Da&&(Na=parseInt(g[Da])),-1<ia&&(Ta=0,Na=parseInt(g[ia])),-1<za&&(a=parseInt(g[za])),-1<xa&&(a=parseInt(g[xa])-1),-1<Fa&&(a=parseInt(g[Fa]),11==a&&(a=0),-1<Ua&&!this.isAm(g[Ua])&&(a+=12)),-1<Ma&&(a=parseInt(g[Ma]),12==a&&(a=0),-1<Ua&&!this.isAm(g[Ua])&&(a+=12)),-1<Ga&&(d=parseInt(g[Ga])),-1<Pa&&(h=parseInt(g[Pa])),-1<Qa&&(Ga=parseInt(g[Qa]),2==
Oa?Ga*=10:1==Oa&&(Ga*=100),B=Ga),-1<Wa&&(ca=parseInt(g[Wa]),Oa=new Date(ca),Ha=Oa.getUTCFullYear(),Ta=Oa.getUTCMonth(),Na=Oa.getUTCDate(),a=Oa.getUTCHours(),d=Oa.getUTCMinutes(),h=Oa.getUTCSeconds(),B=Oa.getUTCMilliseconds()),-1<c&&(ha=this.resolveTimezoneOffset(new Date(Ha,Ta,Na),g[c])),-1<Sa&&(Ha=e.toNumber(g[Sa+0]),Ta=e.toNumber(g[Sa+1])-1,Na=e.toNumber(g[Sa+2]),a=e.toNumber(g[Sa+3]),d=e.toNumber(g[Sa+4]),h=e.toNumber(g[Sa+5]),B=e.toNumber(g[Sa+6]),"Z"==g[Sa+7]||"z"==g[Sa+7]?ma=!0:""!=g[Sa+7]&&
(ha=this.resolveTimezoneOffset(new Date(Ha,Ta,Na),g[Sa+7]))),c=ma?new Date(Date.UTC(Ha,Ta,Na,a,d,h,B)):new Date(Ha,Ta,Na,a,d+ha,h,B)):c=new Date(b);return c}resolveTimezoneOffset(b,c){if(c.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){var g=c.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/);c=g[1];let A=g[3];g=60*parseInt(g[2])+parseInt(A);"+"==c&&(g*=-1);b=(b||new Date).getTimezoneOffset();return g-b}return 0}resolveMonth(b){let c=this._months().indexOf(b);return-1<c||!this._root.language.isDefault()&&(c=this._root.language.translateAll(this._months()).indexOf(b),
-1<c)?c:0}resolveShortMonth(b){let c=this._shortMonths().indexOf(b);if(-1<c)return c;c=this._months().indexOf(b);return-1<c||this._root.language&&!this._root.language.isDefault()&&(c=this._root.language.translateAll(this._shortMonths()).indexOf(b),-1<c)?c:0}isAm(b){return-1<this.getStringList(["AM","A.M.","A"]).indexOf(b.toUpperCase())}getStringList(b){let c=[];for(let g=0;g<b.length;g++)this._root.language?c.push(e.escapeForRgex(this._t(b[g]))):c.push(e.escapeForRgex(b[g]));return c}}class E extends e.Entity{constructor(){super(...arguments);
Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){this._setDefault("negativeBase",0);this._setDefault("baseUnit","second");this._setDefault("durationFormats",{millisecond:{millisecond:this._t("_duration_millisecond"),second:this._t("_duration_millisecond_second"),minute:this._t("_duration_millisecond_minute"),hour:this._t("_duration_millisecond_hour"),day:this._t("_duration_millisecond_day"),week:this._t("_duration_millisecond_week"),
month:this._t("_duration_millisecond_week"),year:this._t("_duration_millisecond_year")},second:{second:this._t("_duration_second"),minute:this._t("_duration_second_minute"),hour:this._t("_duration_second_hour"),day:this._t("_duration_second_day"),week:this._t("_duration_second_week"),month:this._t("_duration_second_week"),year:this._t("_duration_second_year")},minute:{minute:this._t("_duration_minute"),hour:this._t("_duration_minute_hour"),day:this._t("_duration_minute_day"),week:this._t("_duration_minute_week"),
month:this._t("_duration_minute_week"),year:this._t("_duration_minute_year")},hour:{hour:this._t("_duration_hour"),day:this._t("_duration_hour_day"),week:this._t("_duration_hour_week"),month:this._t("_duration_hour_week"),year:this._t("_duration_hour_year")},day:{day:this._t("_duration_day"),week:this._t("_duration_day_week"),month:this._t("_duration_day_week"),year:this._t("_duration_day_year")},week:{week:this._t("_duration_week"),month:this._t("_duration_week_week"),year:this._t("_duration_week_year")},
month:{month:this._t("_duration_month"),year:this._t("_duration_month_year")},year:{year:this._t("_duration_year")}});super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(b,c,g){g=g||this.get("baseUnit");if("undefined"===typeof c||""===c)c=null!=this.get("durationFormat")?this.get("durationFormat"):this.getFormat(e.toNumber(b),void 0,g);c=e.cleanFormat(c);c=this.parseFormat(c,g);b=Number(b);c=b>this.get("negativeBase")?c.positive:b<this.get("negativeBase")?c.negative:c.zero;b=this.applyFormat(b,
c);""!==c.color&&(b="["+c.color+"]"+b+"[/]");return b}parseFormat(b,c){c=c||this.get("baseUnit");c={positive:{color:"",template:"",parts:[],source:"",baseUnit:c,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:c,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:c,parsed:!1,absolute:!1}};b=b.replace("||",e.PLACEHOLDER2);b=b.split("|");c.positive.source=b[0];"undefined"===typeof b[2]?c.zero=c.positive:c.zero.source=b[2];"undefined"===typeof b[1]?
c.negative=c.positive:c.negative.source=b[1];e.each$1(c,(g,A)=>{if(!A.parsed){g=A.source;var I=[];(I=A.source.match(/^\[([^\]]*)\]/))&&I.length&&""!==I[0]&&(g=A.source.substr(I[0].length),A.color=I[1]);g=e.TextFormatter.chunk(g,!0);for(I=0;I<g.length;I++){let V=g[I];V.text=V.text.replace(e.PLACEHOLDER2,"|");if("value"===V.type){V.text.match(/[yYMdDwhHKkmsSn]+a/)&&(A.absolute=!0,V.text=V.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let na=V.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(na)for(let pa=
0;pa<na.length;pa++)null==na[pa]&&(na[pa]=this._unitAliases[na[pa]]),A.parts.push(na[pa]),V.text=V.text.replace(na[pa],e.PLACEHOLDER)}A.template+=V.text}A.parsed=!0}});return c}applyFormat(b,c){let g=!c.absolute&&b<this.get("negativeBase");b=Math.abs(b);b=this.toTimeStamp(b,c.baseUnit);let A=c.template;for(let V=0,na=c.parts.length;V<na;V++){var I=c.parts[V];let pa=this._toTimeUnit(I.substr(0,1));I=I.length;let ta=Math.floor(b/this._getUnitValue(pa));A=A.replace(e.PLACEHOLDER,e.padString(ta,I,"0"));
b-=ta*this._getUnitValue(pa)}g&&(A="-"+A);return A}toTimeStamp(b,c){return b*this._getUnitValue(c)}_toTimeUnit(b){switch(b){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year"}}getFormat(b,c,g){if(null!=this.get("durationFormat"))return this.get("durationFormat");g||(g=this.get("baseUnit"));if(null!=c&&b!=c)return b=Math.abs(b),c=Math.abs(c),b=this.getValueUnit(Math.max(b,
c),g),this.get("durationFormats")[g][b];b=this.getValueUnit(b,g);return this.get("durationFormats")[g][b]}getValueUnit(b,c){c||(c=this.get("baseUnit"));let g,A=this.getMilliseconds(b,c);e.eachContinue(this._getUnitValues(),(I,V)=>{if(I==c||g){if(1>=A/V)return g||(g=I),!1;g=I}return!0});return g}getMilliseconds(b,c){c||(c=this.get("baseUnit"));return b*this._getUnitValue(c)}_getUnitValue(b){return this._getUnitValues()[b]}_getUnitValues(){return{millisecond:1,second:1E3,minute:6E4,hour:36E5,day:864E5,
week:6048E5,month:2592E6,year:31536E6}}}const Y={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",
_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",
_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",
_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",
_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",
Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(b){let c="th";if(11>b||13<b)switch(b%10){case 1:c="st";break;case 2:c="nd";break;case 3:c="rd"}return c},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"",
"Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"",
"Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"",
"Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};class U extends e.Entity{_setDefaults(){this.setPrivate("defaultLocale",
Y);super._setDefaults()}translate(b,c,...g){c||(c=this._root.locale||this.getPrivate("defaultLocale"));let A=b,I=c[b];if(null===I)A="";else if(null!=I)I&&(A=I);else if(c!==this.getPrivate("defaultLocale"))return this.translate(b,this.getPrivate("defaultLocale"),...g);if(g.length)for(let V=g.length,na=0;na<V;++na)A=A.split("%"+(na+1)).join(g[na]);return A}translateAny(b,c,...g){return this.translate(b,c,...g)}setTranslationAny(b,c,g){(g||this._root.locale)[b]=c}setTranslationsAny(b,c){e.each$1(b,(g,
A)=>{this.setTranslationAny(g,A,c)})}translateEmpty(b,c,...g){c=this.translate(b,c,...g);return c==b?"":c}translateFunc(b,c){return this._root.locale[b]?this._root.locale[b]:c!==this.getPrivate("defaultLocale")?this.translateFunc(b,this.getPrivate("defaultLocale")):()=>""}translateAll(b,c){return this.isDefault()?b:e.map(b,g=>this.translate(g,c))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}class ea{constructor(b=1,c=0,g=0,A=1,I=0,V=0){Object.defineProperty(this,"a",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.a=b;this.b=
c;this.c=g;this.d=A;this.tx=I;this.ty=V}setTransform(b,c,g,A,I,V=1){this.a=Math.cos(I)*V;this.b=Math.sin(I)*V;this.c=-Math.sin(I)*V;this.d=Math.cos(I)*V;this.tx=b-(g*this.a+A*this.c);this.ty=c-(g*this.b+A*this.d)}apply(b){return{x:this.a*b.x+this.c*b.y+this.tx,y:this.b*b.x+this.d*b.y+this.ty}}applyInverse(b){const c=1/(this.a*this.d+this.c*-this.b);return{x:this.d*c*b.x+-this.c*c*b.y+(this.ty*this.c-this.tx*this.d)*c,y:this.a*c*b.y+-this.b*c*b.x+(-this.ty*this.a+this.tx*this.b)*c}}append(b){const c=
this.a,g=this.b,A=this.c,I=this.d;this.a=b.a*c+b.b*A;this.b=b.a*g+b.b*I;this.c=b.c*c+b.d*A;this.d=b.c*g+b.d*I;this.tx=b.tx*c+b.ty*A+this.tx;this.ty=b.tx*g+b.ty*I+this.ty}prepend(b){const c=this.tx;if(1!==b.a||0!==b.b||0!==b.c||1!==b.d){const g=this.a,A=this.c;this.a=g*b.a+this.b*b.c;this.b=g*b.b+this.b*b.d;this.c=A*b.a+this.d*b.c;this.d=A*b.b+this.d*b.d}this.tx=c*b.a+this.ty*b.c+b.tx;this.ty=c*b.b+this.ty*b.d+b.ty}copyFrom(b){this.a=b.a;this.b=b.b;this.c=b.c;this.d=b.d;this.tx=b.tx;this.ty=b.ty}}
var aa=function(){return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b)){var g=[],A=!0,I=!1,V=void 0;try{for(var na=b[Symbol.iterator](),pa;!(A=(pa=na.next()).done)&&(g.push(pa.value),!c||g.length!==c);A=!0);}catch(ta){I=!0,V=ta}finally{try{if(!A&&na["return"])na["return"]()}finally{if(I)throw V;}}return g}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),fa=2*Math.PI,O=function(b,c,g,A,I,V,na){var pa=b.x;b=b.y;pa*=c;b*=g;return{x:A*pa-I*
b+V,y:I*pa+A*b+na}},da=function(b,c){var g=1.5707963267948966===c?.551915024494:-1.5707963267948966===c?-.551915024494:4/3*Math.tan(c/4),A=Math.cos(b),I=Math.sin(b),V=Math.cos(b+c);b=Math.sin(b+c);return[{x:A-I*g,y:I+A*g},{x:V+b*g,y:b-V*g},{x:V,y:b}]},la=function(b,c,g,A){var I=b*g+c*A;1<I&&(I=1);-1>I&&(I=-1);return(0>b*A-c*g?-1:1)*Math.acos(I)},l=function(b,c,g,A,I,V,na,pa,ta,ra,wa,Da){var ia=Math.pow(I,2),Ea=Math.pow(V,2),za=Math.pow(wa,2),Fa=Math.pow(Da,2),xa=ia*Ea-ia*Fa-Ea*za;0>xa&&(xa=0);xa=
Math.sqrt(xa/(ia*Fa+Ea*za))*(na===pa?-1:1);na=xa*I/V*Da;xa=xa*-V/I*wa;b=ra*na-ta*xa+(b+g)/2;c=ta*na+ra*xa+(c+A)/2;A=(wa-na)/I;ta=(Da-xa)/V;I=(-wa-na)/I;Da=(-Da-xa)/V;V=la(1,0,A,ta);Da=la(A,ta,I,Da);0===pa&&0<Da&&(Da-=fa);1===pa&&0>Da&&(Da+=fa);return[b,c,V,Da]},P=function(b){var c=b.px,g=b.py,A=b.cx,I=b.cy,V=b.rx,na=b.ry,pa=b.xAxisRotation,ta=void 0===pa?0:pa;pa=b.largeArcFlag;var ra=b.sweepFlag;b=[];if(0===V||0===na)return[];var wa=Math.sin(ta*fa/360),Da=Math.cos(ta*fa/360);ta=Da*(c-A)/2+wa*(g-I)/
2;var ia=-wa*(c-A)/2+Da*(g-I)/2;if(0===ta&&0===ia)return[];V=Math.abs(V);na=Math.abs(na);var Ea=Math.pow(ta,2)/Math.pow(V,2)+Math.pow(ia,2)/Math.pow(na,2);1<Ea&&(V*=Math.sqrt(Ea),na*=Math.sqrt(Ea));c=l(c,g,A,I,V,na,void 0===pa?0:pa,void 0===ra?0:ra,wa,Da,ta,ia);g=aa(c,4);var za=g[0],Fa=g[1];c=g[2];g=g[3];A=Math.abs(g)/(fa/4);1E-7>Math.abs(1-A)&&(A=1);A=Math.max(Math.ceil(A),1);g/=A;for(I=0;I<A;I++)b.push(da(c,g)),c+=g;return b.map(function(xa){var Ma=O(xa[0],V,na,Da,wa,za,Fa),Ga=Ma.x;Ma=Ma.y;var Pa=
O(xa[1],V,na,Da,wa,za,Fa),Qa=Pa.x;Pa=Pa.y;xa=O(xa[2],V,na,Da,wa,za,Fa);return{x1:Ga,y1:Ma,x2:Qa,y2:Pa,x:xa.x,y:xa.y}})};class W{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(b){this._x=b}set y(b){this._y=b}}class Q extends e.DisposerClass{constructor(b){super();Object.defineProperty(this,"_layer",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null});Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:!1});
Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"compoundAlpha",
{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,
"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new W});Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new ea});Object.defineProperty(this,"_matrix",
{enumerable:!0,configurable:!0,writable:!0,value:new ea});Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new ea});Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._renderer=b}_dispose(){this._renderer._removeObject(this);this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let b=this;for(;;){if(b._layer)return b._layer;if(b._parent)b=b._parent;else return this._renderer.defaultLayer}}setLayer(b,c){null==b?this._layer=void 0:(this._layer=this._renderer.getLayer(b,!0),this._layer.visible=!0,(this._layer.margin=
c)&&e.setInteractive(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(b){}_getColorId(){void 0===this._colorId&&(this._colorId=this._renderer.paintId(this));return this._colorId}_isInteractive(){return 0==
this.inactive&&(this.interactive||0<this._renderer._forceInteractive)}_isInteractiveMask(){return this._isInteractive()}contains(b){for(;;){if(b===this)return!0;if(b._parent)b=b._parent;else return!1}}toGlobal(b){return this._matrix.apply(b)}toLocal(b){return this._matrix.applyInverse(b)}getLocalMatrix(){this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale);return this._uMatrix}getLocalBounds(){this._localBounds||(this._localBounds={left:1E7,top:1E7,right:-1E7,
bottom:-1E7},this._addBounds(this._localBounds));return this._localBounds}getAdjustedBounds(b){this._setMatrix();const c=this.getLocalMatrix(),g=c.apply({x:b.left,y:b.top}),A=c.apply({x:b.right,y:b.top}),I=c.apply({x:b.right,y:b.bottom});b=c.apply({x:b.left,y:b.bottom});return{left:Math.min(g.x,A.x,I.x,b.x),top:Math.min(g.y,A.y,I.y,b.y),right:Math.max(g.x,A.x,I.x,b.x),bottom:Math.max(g.y,A.y,I.y,b.y)}}on(b,c,g){return this.interactive?this._renderer._addEvent(this,b,c,g):new e.Disposer(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,
this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale);this._matrix.copyFrom(this._localMatrix);this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(b,c){const g=this._matrix;let A=g.tx*c,I=g.ty*c;this.crisp&&(A=Math.floor(A)+.5,I=Math.floor(I)+.5);b.setTransform(g.a*c,g.b*c,g.c*c,g.d*c,A,I)}_transformMargin(b,c,g){const A=this._matrix;b.setTransform(A.a*c,A.b*c,A.c*c,A.d*c,(A.tx+g.left)*c,(A.ty+g.top)*c)}_transformLayer(b,c,g){g.margin?this._transformMargin(b,g.scale||
c,g.margin):this._transform(b,g.scale||c)}render(b){if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();const c=this._renderer.resolution,g=this._renderer.layers,A=this._renderer._ghostLayer,I=A.context,V=this.mask;V&&V._setMatrix();e.each(g,na=>{if(na){const pa=na.context;pa.save();V&&(V._transformLayer(pa,c,na),V._runPath(pa),pa.clip());pa.globalAlpha=this.compoundAlpha*this.alpha;this._transformLayer(pa,c,na);this.filter&&(pa.filter=this.filter)}});I.save();
V&&this._isInteractiveMask()&&(V._transformMargin(I,c,A.margin),V._runPath(I),I.clip());this._transformMargin(I,c,A.margin);this._render(b);I.restore();e.each(g,na=>{na&&na.context.restore()})}}_render(b){!1===this.exportable&&((this._layer||b).tainted=!0)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(b=>b.value===this)}shouldCancelTouch(){const b=this._renderer;return b.tapToActivate&&!b._touchActive?!1:this.cancelTouch?!0:this._parent?this._parent.shouldCancelTouch():
!1}}class X extends Q{constructor(){super(...arguments);Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(){return this.interactiveChildren||super._isInteractiveMask()}addChild(b){b._parent=this;this._children.push(b);b._layer&&this.registerChildLayer(b._layer)}addChildAt(b,
c){b._parent=this;this._children.splice(c,0,b);b._layer&&this.registerChildLayer(b._layer)}removeChild(b){b._parent=void 0;e.removeFirst(this._children,b)}_render(b){super._render(b);const c=this._renderer;this.interactive&&this.interactiveChildren&&++c._forceInteractive;const g=this._layer||b;e.each(this._children,A=>{A.compoundAlpha=this.compoundAlpha*this.alpha;A.render(g)});this.interactive&&this.interactiveChildren&&--c._forceInteractive}registerChildLayer(b){this._childLayers||(this._childLayers=
[]);e.pushOne(this._childLayers,b);this._parent&&this._parent.registerChildLayer(b)}markDirtyLayer(b=!1){super.markDirtyLayer();b&&this._childLayers&&e.each(this._childLayers,c=>c.dirty=!0)}_dispose(){super._dispose();this._childLayers&&e.each(this._childLayers,b=>{b.dirty=!0})}}class T{colorize(b,c){}path(b){}addBounds(b){}}class k extends T{colorize(b,c){b.beginPath()}}class S extends T{constructor(b){super();Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:b})}colorize(b,
c){b.fillStyle=void 0!==c?c:this.color}}class N extends T{constructor(b){super();Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:b})}colorize(b,c){b.fill();this.clearShadow&&(b.shadowColor="",b.shadowBlur=0,b.shadowOffsetX=0,b.shadowOffsetY=0)}}class ka extends T{colorize(b,c){b.stroke()}}class oa extends T{constructor(b,c,g){super();Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"color",
{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:g})}colorize(b,c){b.strokeStyle=void 0!==c?c:this.color;b.lineWidth=this.width;this.lineJoin&&(b.lineJoin=this.lineJoin)}}class sa extends T{constructor(b){super();Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:b})}colorize(b,c){b.setLineDash(this.dash)}}class M extends T{constructor(b){super();Object.defineProperty(this,"dashOffset",
{enumerable:!0,configurable:!0,writable:!0,value:b})}colorize(b,c){b.lineDashOffset=this.dashOffset}}class ja extends T{constructor(b,c,g,A){super();Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:g});Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:A})}path(b){b.rect(this.x,
this.y,this.width,this.height)}addBounds(b){const c=this.x,g=this.y,A=c+this.width,I=g+this.height;y(b,{x:c,y:g});y(b,{x:A,y:g});y(b,{x:c,y:I});y(b,{x:A,y:I})}}class qa extends T{constructor(b,c,g){super();Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:g})}path(b){b.moveTo(this.x+this.radius,this.y);
b.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(b){y(b,{x:this.x-this.radius,y:this.y-this.radius});y(b,{x:this.x+this.radius,y:this.y+this.radius})}}class ua extends T{constructor(b,c,g,A){super();Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:g});Object.defineProperty(this,"radiusY",{enumerable:!0,
configurable:!0,writable:!0,value:A})}path(b){b.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(b){y(b,{x:this.x-this.radiusX,y:this.y-this.radiusY});y(b,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class ya extends T{constructor(b,c,g,A,I,V){super();Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,
writable:!0,value:g});Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:A});Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:I});Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:V})}path(b){0<this.radius&&b.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(b){let c=e.getArcBounds(this.cx,this.cy,this.startAngle*e.DEGREES,this.endAngle*e.DEGREES,
this.radius);y(b,{x:c.left,y:c.top});y(b,{x:c.right,y:c.bottom})}}class Aa extends T{constructor(b,c,g,A,I){super();Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:g});Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:A});Object.defineProperty(this,"radius",{enumerable:!0,
configurable:!0,writable:!0,value:I})}path(b){0<this.radius&&b.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(b){}}class Ba extends T{constructor(b,c){super();Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:c})}path(b){b.lineTo(this.x,this.y)}addBounds(b){y(b,{x:this.x,y:this.y})}}class Ia extends T{constructor(b,c){super();Object.defineProperty(this,"x",{enumerable:!0,
configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:c})}path(b){b.moveTo(this.x,this.y)}addBounds(b){y(b,{x:this.x,y:this.y})}}class $a extends T{path(b){b.closePath()}}class Xa extends T{constructor(b,c,g,A,I,V){super();Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"cpX2",{enumerable:!0,
configurable:!0,writable:!0,value:g});Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:A});Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:I});Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:V})}path(b){b.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(b){y(b,{x:this.cpX,y:this.cpY});y(b,{x:this.cpX2,y:this.cpY2});y(b,{x:this.toX,y:this.toY})}}class ib extends T{constructor(b,
c,g,A){super();Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:g});Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:A})}path(b){b.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(b){y(b,{x:this.cpX,y:this.cpY});y(b,{x:this.toX,y:this.toY})}}class Za extends T{constructor(b,
c,g,A,I){super();Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:g});Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:A});Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:I})}colorize(b,c){this.opacity&&(b.fillStyle=
this.color);b.shadowColor=this.color;b.shadowBlur=this.blur;b.shadowOffsetX=this.offsetX;b.shadowOffsetY=this.offsetY}}class jb extends T{constructor(b,c,g,A,I){super();Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:g});Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,
value:A});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:I})}path(b){b.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(b){y(b,{x:this.x,y:this.y});y(b,{x:this.width,y:this.height})}}class db extends Q{constructor(){super(...arguments);Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:e.BlendMode.NORMAL});Object.defineProperty(this,
"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear();this._operations.length=0}_pushOp(b){this._operations.push(b)}beginFill(b,c=1){this._fillAlpha=c;b?b instanceof e.Color?this._pushOp(new S(b.toCSS(c))):(this.isMeasured=!0,this._pushOp(new S(b))):this._pushOp(new S("rgba(0, 0, 0, "+
c+")"))}endFill(){this._pushOp(new N(this._hasShadows))}endStroke(){this._pushOp(new ka)}beginPath(){this._pushOp(new k)}lineStyle(b=0,c,g=1,A){this._strokeAlpha=g;c?c instanceof e.Color?this._pushOp(new oa(b,c.toCSS(g),A)):this._pushOp(new oa(b,c,A)):this._pushOp(new oa(b,"rgba(0, 0, 0, "+g+")",A))}setLineDash(b){this._pushOp(new sa(b?b:[]))}setLineDashOffset(b=0){this._pushOp(new M(b))}drawRect(b,c,g,A){this._pushOp(new ja(b,c,g,A))}drawCircle(b,c,g){this._pushOp(new qa(b,c,g))}drawEllipse(b,c,
g,A){this._pushOp(new ua(b,c,g,A))}arc(b,c,g,A,I,V=!1){this._pushOp(new ya(b,c,g,A,I,V))}arcTo(b,c,g,A,I){this._pushOp(new Aa(b,c,g,A,I))}lineTo(b,c){this._pushOp(new Ba(b,c))}moveTo(b,c){this._pushOp(new Ia(b,c))}bezierCurveTo(b,c,g,A,I,V){this._pushOp(new Xa(b,c,g,A,I,V))}quadraticCurveTo(b,c,g,A){this._pushOp(new ib(b,c,g,A))}closePath(){this._pushOp(new $a)}shadow(b,c=0,g=0,A=0,I){this._hasShadows=!0;this._pushOp(new Za(I?b.toCSS(I):b.toCSS(this._fillAlpha||this._strokeAlpha),c,g,A))}image(b,
c,g,A,I){this._pushOp(new jb(b,c,g,A,I))}svgPath(b){let c=0,g=0,A=null,I=null,V=null,na=null;const pa=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,ta=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;for(var ra;null!==(ra=pa.exec(b));){var wa=ra[1],Da=ra[2];const ia=[];for(;null!==(ra=ta.exec(Da));)ia.push(ra[1]);"S"!==wa&&"s"!==wa&&"C"!==wa&&"c"!==wa&&(I=A=null);"Q"!==wa&&"q"!==wa&&"T"!==wa&&"t"!==wa&&(na=V=null);switch(wa){case "M":C(wa,
ia.length,2);c=+ia[0];g=+ia[1];this.moveTo(c,g);for(ra=2;ra<ia.length;ra+=2)c=+ia[ra],g=+ia[ra+1],this.lineTo(c,g);break;case "m":C(wa,ia.length,2);c+=+ia[0];g+=+ia[1];this.moveTo(c,g);for(ra=2;ra<ia.length;ra+=2)c+=+ia[ra],g+=+ia[ra+1],this.lineTo(c,g);break;case "L":C(wa,ia.length,2);for(ra=0;ra<ia.length;ra+=2)c=+ia[ra],g=+ia[ra+1],this.lineTo(c,g);break;case "l":C(wa,ia.length,2);for(ra=0;ra<ia.length;ra+=2)c+=+ia[ra],g+=+ia[ra+1],this.lineTo(c,g);break;case "H":J(wa,ia.length,1);for(ra=0;ra<
ia.length;++ra)c=+ia[ra],this.lineTo(c,g);break;case "h":J(wa,ia.length,1);for(ra=0;ra<ia.length;++ra)c+=+ia[ra],this.lineTo(c,g);break;case "V":J(wa,ia.length,1);for(ra=0;ra<ia.length;++ra)g=+ia[ra],this.lineTo(c,g);break;case "v":J(wa,ia.length,1);for(ra=0;ra<ia.length;++ra)g+=+ia[ra],this.lineTo(c,g);break;case "C":C(wa,ia.length,6);for(ra=0;ra<ia.length;ra+=6)wa=+ia[ra],Da=+ia[ra+1],A=+ia[ra+2],I=+ia[ra+3],c=+ia[ra+4],g=+ia[ra+5],this.bezierCurveTo(wa,Da,A,I,c,g);break;case "c":C(wa,ia.length,
6);for(ra=0;ra<ia.length;ra+=6)wa=+ia[ra]+c,Da=+ia[ra+1]+g,A=+ia[ra+2]+c,I=+ia[ra+3]+g,c+=+ia[ra+4],g+=+ia[ra+5],this.bezierCurveTo(wa,Da,A,I,c,g);break;case "S":C(wa,ia.length,4);if(null===A||null===I)A=c,I=g;for(ra=0;ra<ia.length;ra+=4)wa=2*c-A,Da=2*g-I,A=+ia[ra],I=+ia[ra+1],c=+ia[ra+2],g=+ia[ra+3],this.bezierCurveTo(wa,Da,A,I,c,g);break;case "s":C(wa,ia.length,4);if(null===A||null===I)A=c,I=g;for(ra=0;ra<ia.length;ra+=4)wa=2*c-A,Da=2*g-I,A=+ia[ra]+c,I=+ia[ra+1]+g,c+=+ia[ra+2],g+=+ia[ra+3],this.bezierCurveTo(wa,
Da,A,I,c,g);break;case "Q":C(wa,ia.length,4);for(ra=0;ra<ia.length;ra+=4)V=+ia[ra],na=+ia[ra+1],c=+ia[ra+2],g=+ia[ra+3],this.quadraticCurveTo(V,na,c,g);break;case "q":C(wa,ia.length,4);for(ra=0;ra<ia.length;ra+=4)V=+ia[ra]+c,na=+ia[ra+1]+g,c+=+ia[ra+2],g+=+ia[ra+3],this.quadraticCurveTo(V,na,c,g);break;case "T":C(wa,ia.length,2);if(null===V||null===na)V=c,na=g;for(ra=0;ra<ia.length;ra+=2)V=2*c-V,na=2*g-na,c=+ia[ra],g=+ia[ra+1],this.quadraticCurveTo(V,na,c,g);break;case "t":C(wa,ia.length,2);if(null===
V||null===na)V=c,na=g;for(ra=0;ra<ia.length;ra+=2)V=2*c-V,na=2*g-na,c+=+ia[ra],g+=+ia[ra+1],this.quadraticCurveTo(V,na,c,g);break;case "A":case "a":ra="a"===wa;t(ia);C(wa,ia.length,7);for(wa=0;wa<ia.length;wa+=7){Da=+ia[wa+5];let Ea=+ia[wa+6];ra&&(Da+=c,Ea+=g);Da=P({px:c,py:g,rx:+ia[wa],ry:+ia[wa+1],xAxisRotation:+ia[wa+2],largeArcFlag:f(+ia[wa+3]),sweepFlag:f(+ia[wa+4]),cx:Da,cy:Ea});e.each(Da,za=>{this.bezierCurveTo(za.x1,za.y1,za.x2,za.y2,za.x,za.y);c=za.x;g=za.y})}break;case "Z":case "z":R(wa,
ia.length,0),this.closePath()}}}_runPath(b){b.beginPath();e.each(this._operations,c=>{c.path(b)})}_render(b){super._render(b);b=this._layer||b;const c=b.dirty,g=this._isInteractive();if(c||g){const A=b.context,I=this._renderer._ghostLayer.context;c&&(A.globalCompositeOperation=this.blendMode,A.beginPath());let V;g&&(I.beginPath(),V=this._getColorId());e.each(this._operations,na=>{c&&(na.path(A),na.colorize(A,void 0));g&&(na.path(I),na.colorize(I,V))})}}renderDetached(b){if(this.visible){this._setMatrix();
b.save();const c=this.mask;c&&(c._setMatrix(),c._transform(b,1),c._runPath(b),b.clip());b.globalAlpha=this.compoundAlpha*this.alpha;this._transform(b,1);this.filter&&(b.filter=this.filter);b.globalCompositeOperation=this.blendMode;b.beginPath();e.each(this._operations,g=>{g.path(b);g.colorize(b,void 0)});b.restore()}}_addBounds(b){this.visible&&this.isMeasured&&e.each(this._operations,c=>{c.addBounds(b)})}}class hb extends Q{constructor(b,c,g){super(b);Object.defineProperty(this,"text",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,
value:1});this.text=c;this.style=g}invalidateBounds(){super.invalidateBounds();this._textInfo=void 0}_shared(b){this.style.textAlign&&(b.textAlign=this.style.textAlign);this.style.direction&&(b.direction=this.style.direction);this.style.textBaseline&&(b.textBaseline=this.style.textBaseline)}_prerender(b,c=!1,g=!1){super._render(b);const A=b.context,I=this._renderer._ghostLayer.context,V=this.style;g=this._getFontStyle(void 0,g);A.font=g;this._isInteractive()&&!c&&(I.font=g);V.fill&&(A.fillStyle=V.fill instanceof
e.Color?V.fill.toCSS(void 0!=V.fillOpacity?V.fillOpacity:1):V.fill);V.shadowColor&&(b.context.shadowColor=V.shadowColor.toCSS(V.shadowOpacity||1));V.shadowBlur&&(b.context.shadowBlur=V.shadowBlur);V.shadowOffsetX&&(b.context.shadowOffsetX=V.shadowOffsetX);V.shadowOffsetY&&(b.context.shadowOffsetY=V.shadowOffsetY);this._shared(A);this._isInteractive()&&!c&&(I.fillStyle=this._getColorId(),this._shared(I))}_getFontStyle(b,c=!1){const g=this.style;let A=[];b&&b.fontVariant?A.push(b.fontVariant):g.fontVariant&&
A.push(g.fontVariant);c||(b&&b.fontWeight?A.push(b.fontWeight):g.fontWeight&&A.push(g.fontWeight));b&&b.fontStyle?A.push(b.fontStyle):g.fontStyle&&A.push(g.fontStyle);b&&b.fontSize?(e.isNumber(b.fontSize)&&(b.fontSize+="px"),A.push(b.fontSize)):g.fontSize&&(e.isNumber(g.fontSize)&&(g.fontSize+="px"),A.push(g.fontSize));b&&b.fontFamily?A.push(b.fontFamily):g.fontFamily?A.push(g.fontFamily):A.length&&A.push("Arial");return A.join(" ")}_render(b){b=this._layer||b;this._textInfo||this._measure(b);if(this.textVisible){const c=
this._isInteractive(),g=b.context,A=b.dirty,I=this._renderer._ghostLayer.context;g.save();I.save();this._prerender(b);e.each(this._textInfo,(V,na)=>{e.each(V.textChunks,(pa,ta)=>{pa.style&&(g.save(),I.save(),g.font=pa.style,this._isInteractive()&&(I.font=pa.style));pa.fill&&(g.save(),g.fillStyle=pa.fill.toCSS());A&&g.fillText(pa.text,pa.offsetX,V.offsetY+pa.offsetY);if("underline"==pa.textDecoration||"line-through"==pa.textDecoration){let wa=ta=1;var ra=pa.height;let Da=pa.offsetX;switch(this.style.textAlign){case "right":case "end":Da-=
pa.width;break;case "center":Da-=pa.width/2}if(pa.style)switch(e.TextFormatter.getTextStyle(pa.style).fontWeight){case "bolder":case "bold":case "700":case "800":case "900":ta=2}ra&&(wa=ra/20);ra="line-through"==pa.textDecoration?ta+V.offsetY+pa.offsetY-pa.height/2:ta+1.5*wa+V.offsetY+pa.offsetY;g.save();g.beginPath();pa.fill?g.strokeStyle=pa.fill.toCSS():this.style.fill&&this.style.fill instanceof e.Color&&(g.strokeStyle=this.style.fill.toCSS());g.lineWidth=ta*wa;g.moveTo(Da,ra);g.lineTo(Da+pa.width,
ra);g.stroke();g.restore()}c&&this.interactive&&I.fillText(pa.text,pa.offsetX,V.offsetY+pa.offsetY);pa.fill&&g.restore();pa.style&&(g.restore(),I.restore())})});g.restore();I.restore()}}_addBounds(b){if(this.visible&&this.isMeasured){const c=this._measure(this.getLayer());y(b,{x:c.left,y:c.top});y(b,{x:c.right,y:c.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(b){const c=b.context,g=this._renderer._ghostLayer.context;var A="rtl"==this.style.direction;this._textInfo=[];
const I=this.style.oversizedBehavior,V=this.style.maxWidth,na=e.isNumber(V)&&"truncate"==I,pa=e.isNumber(V)&&("wrap"==I||"wrap-no-break"==I);c.save();g.save();this._prerender(b,!0,this._ignoreFontWeight());b=this.text.toString().replace(/\r/g,"").split(/\n/);let ta=!0,ra=0,wa=0,Da=0,ia;e.each(b,(Ea,za)=>{let Fa;for(Fa=""==Ea?[{type:"value",text:""}]:e.TextFormatter.chunk(Ea,!1,this.style.ignoreFormatting);0<Fa.length;){let xa={offsetY:Da,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};Ea=
this._measureText("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",c);xa.height=Ea.actualBoundingBoxAscent+Ea.actualBoundingBoxDescent;xa.ascent=Ea.actualBoundingBoxAscent;let Ma,Ga=this.style.textDecoration,Pa,Qa,Oa=!1,Ua=!0,Wa=[],Sa;e.eachContinue$1(Fa,(Ha,Ta)=>{if("format"==Ha.type)if("[/]"==Ha.text)ta||(c.restore(),g.restore(),ta=!0),Qa=ia=Pa=void 0,Ga=this.style.textDecoration,Sa=void 0,Ma=Ha.text;else{ta||(c.restore(),g.restore());var Na=e.TextFormatter.getTextStyle(Ha.text),
a=this._getFontStyle(Na);c.save();g.save();ia=c.font=a;Ma=Ha.text;Na.textDecoration&&(Ga=Na.textDecoration);Na.fill&&(Pa=Na.fill);Na.width&&(Qa=e.toNumber(Na.width));Na.verticalAlign&&(Sa=Na.verticalAlign);ta=!1;Ha=this._measureText("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",c);Na=Ha.actualBoundingBoxAscent+Ha.actualBoundingBoxDescent;Na>xa.height&&(xa.height=Na);Ha.actualBoundingBoxAscent>xa.ascent&&(xa.ascent=Ha.actualBoundingBoxAscent)}else if("value"==Ha.type&&!Oa){Na=this._measureText(Ha.text,
c);a=Na.actualBoundingBoxLeft+Na.actualBoundingBoxRight;if(na){Ta=Ua||this.style.breakWords||!1;var d=this.style.ellipsis||"",h=this._measureText(d,c);h=h.actualBoundingBoxLeft+h.actualBoundingBoxRight;xa.width+a>V&&(Ha.text=this._truncateText(c,Ha.text,V-xa.width-h,Ta),Ha.text+=d,Oa=!0)}else if(pa&&xa.width+a>V){d=this._truncateText(c,Ha.text,V-xa.width,!1,Ua&&"wrap-no-break"!=this.style.oversizedBehavior);if(""==d)return this.textVisible=!0,!1;Wa=Fa.slice(Ta+1);e.trim(d)!=e.trim(Ha.text)&&(Wa.unshift({type:"value",
text:Ha.text.substr(d.length)}),Ma&&Wa.unshift({type:"format",text:Ma}));Ha.text=e.trim(d);Fa=[];Oa=!0}d=Ta=1;if(ia&&Qa&&Qa>a){a/=Qa;switch(this.style.textAlign){case "right":case "end":Ta=a;break;case "center":d=Ta=a;break;default:d=a}a=Qa}h=Na.actualBoundingBoxAscent+Na.actualBoundingBoxDescent;h>xa.height&&(xa.height=h);Na.actualBoundingBoxAscent>xa.ascent&&(xa.ascent=Na.actualBoundingBoxAscent);xa.width+=a;xa.left+=Na.actualBoundingBoxLeft/Ta;xa.right+=Na.actualBoundingBoxRight/d;xa.textChunks.push({style:ia,
fill:Pa,text:Ha.text,width:a,height:h,left:Na.actualBoundingBoxLeft,right:Na.actualBoundingBoxRight,ascent:Na.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:Ga,verticalAlign:Sa});Ua=!1}return!0});this.style.lineHeight instanceof e.Percent?(xa.height*=this.style.lineHeight.value,xa.ascent*=this.style.lineHeight.value):(xa.height*=this.style.lineHeight||1.2,xa.ascent*=this.style.lineHeight||1.2);ra<xa.left&&(ra=xa.left);wa<xa.right&&(wa=xa.right);this._textInfo.push(xa);Da+=xa.height;Fa=
Wa||[]}});ta||(c.restore(),g.restore());e.each(this._textInfo,(Ea,za)=>{let Fa=0;e.each(Ea.textChunks,xa=>{xa.offsetX=Fa+xa.left-Ea.left;xa.offsetY+=Ea.height-Ea.height*(this.style.baselineRatio||.19);Fa+=xa.width;if(xa.verticalAlign)switch(xa.verticalAlign){case "super":xa.offsetY-=Ea.height/2-xa.height/2;break;case "sub":xa.offsetY+=xa.height/2}})});A={left:A?-wa:-ra,top:0,right:A?ra:wa,bottom:Da};if("none"!==I)if(b=this._fitRatio(A),1>b)if("fit"==I)e.isNumber(this.style.minScale)&&b<this.style.minScale?
(this.textVisible=!1,A.left=0,A.top=0,A.right=0,A.bottom=0):(this._originalScale&&1!=this._originalScale||(this._originalScale=this.scale),this.scale=b,this.textVisible=!0);else if("hide"==I)this.textVisible=!1,A.left=0,A.top=0,A.right=0,A.bottom=0;else{switch(this.style.textAlign){case "right":case "end":A.left=-V;A.right=0;break;case "center":A.left=-V/2;A.right=V/2;break;default:A.left=0,A.right=V}this.scale=this._originalScale||1;this._originalScale=void 0;this.textVisible=!0}else this.scale=
this._originalScale||1,this._originalScale=void 0,this.textVisible=!0;c.restore();g.restore();return A}_fitRatio(b){const c=this.style.maxWidth,g=this.style.maxHeight;return e.isNumber(c)||e.isNumber(g)?Math.min(c/(b.right-b.left)||1,g/(b.bottom-b.top)||1):1}_truncateText(b,c,g,A=!1,I=!0){do{if(A)c=c.slice(0,-1);else{var V=c.replace(/[^,;:!?\\\/\s]+[,;:!?\\\/\s]*$/g,"");if(""==V&&I)A=!0;else if(""==V)break;else c=V}V=this._measureText(c,b);V=V.actualBoundingBoxLeft+V.actualBoundingBoxRight}while(V>
g&&""!=c);return c}_measureText(b,c){c=c.measureText(b);var g={};null==c.actualBoundingBoxAscent?(g=document.createElement("div"),g.innerText=b,g.style.visibility="hidden",g.style.position="absolute",g.style.top="-1000000px;",g.style.fontFamily=this.style.fontFamily||"",g.style.fontSize=this.style.fontSize+"",document.body.appendChild(g),b=g.getBoundingClientRect(),document.body.removeChild(g),b=b.height,g=c.width,g={actualBoundingBoxAscent:b,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:g,
fontBoundingBoxAscent:b,fontBoundingBoxDescent:0,width:g}):g={actualBoundingBoxAscent:c.actualBoundingBoxAscent,actualBoundingBoxDescent:c.actualBoundingBoxDescent,actualBoundingBoxLeft:c.actualBoundingBoxLeft,actualBoundingBoxRight:c.actualBoundingBoxRight,fontBoundingBoxAscent:c.actualBoundingBoxAscent,fontBoundingBoxDescent:c.actualBoundingBoxDescent,width:c.width};c=c.width;switch(this.style.textAlign){case "right":case "end":g.actualBoundingBoxLeft=c;g.actualBoundingBoxRight=0;break;case "center":g.actualBoundingBoxLeft=
c/2;g.actualBoundingBoxRight=c/2;break;default:g.actualBoundingBoxLeft=0,g.actualBoundingBoxRight=c}return g}}class kb{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,
value:void 0});Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0});
Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:e.percent(120)});Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19});Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"});Object.defineProperty(this,
"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"\u2026"});Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,
configurable:!0,writable:!0,value:!1})}}class ob extends hb{constructor(){super(...arguments);Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"});Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,
"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"});Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(b){switch(this.textType){case "circular":this._renderCircular(b);break;default:super._render(b)}}_renderCircular(b){if(this.textVisible){b=this._layer||b;this._prerender(b);const c=this._isInteractive(),g=b.context,A=b.dirty,I=this._renderer._ghostLayer.context;
g.save();c&&I.save();this._textInfo||this._measure(b);let V=this.radius||0,na=this.startAngle||0,pa=0;b=this.orientation;let ta="auto"==b?"auto":"inward"==b;const ra=this.inside,wa=this.style.textAlign||"left",Da=this.kerning||0;let ia="left"==wa?1:-1;const Ea=!this._textReversed;if("auto"==ta){let za=0;b=0;e.each(this._textInfo,(Fa,xa)=>{Fa=na+Fa.width/(V-Fa.height)/2*-ia;Fa>za&&(za=Fa)});b="left"==wa?(za+pa/2)*e.DEGREES:"right"==wa?(za-pa/2)*e.DEGREES:na*e.DEGREES;b=e.normalizeAngle(b);ta=270<=
b||90>=b}1==ta&&Ea&&(this._textInfo.reverse(),this._textReversed=!0);e.each(this._textInfo,(za,Fa)=>{const xa=za.height;ra||(V+=xa);(-1==ia&&ta||1==ia&&!ta)&&Ea&&za.textChunks.reverse();Fa=na;pa=0;"center"==wa&&(Fa+=za.width/(V-xa)/2*-ia,pa=Fa-na);Fa+=Math.PI*(ta?0:1);g.save();c&&I.save();g.rotate(Fa);c&&I.rotate(Fa);let Ma=0;e.each(za.textChunks,(Ga,Pa)=>{Pa=Ga.text;const Qa=Ga.width;Ma=Qa/2/(V-xa)*ia;g.rotate(Ma);c&&I.rotate(Ma);Ga.style&&(g.save(),I.save(),g.font=Ga.style,c&&(I.font=Ga.style));
Ga.fill&&(g.save(),g.fillStyle=Ga.fill.toCSS());g.textBaseline="middle";g.textAlign="center";c&&(I.textBaseline="middle",I.textAlign="center");A&&g.fillText(Pa,0,(ta?1:-1)*(0-V+xa/2));c&&I.fillText(Pa,0,(ta?1:-1)*(0-V+xa/2));Ga.fill&&g.restore();Ga.style&&(g.restore(),I.restore());Ma=(Qa/2+Da)/(V-xa)*ia;g.rotate(Ma);c&&I.rotate(Ma)});g.restore();c&&I.restore();ra&&(V-=xa)});g.restore();c&&I.restore()}}_measure(b){switch(this.textType){case "circular":return this._measureCircular(b);default:return super._measure(b)}}_measureCircular(b){const c=
b.context,g=this._renderer._ghostLayer.context,A="rtl"==this.style.direction,I=this.style.oversizedBehavior,V=this.style.maxWidth,na=e.isNumber(V)&&"truncate"==I,pa=this.style.ellipsis||"";let ta;this.textVisible=!0;this._textInfo=[];this._textReversed=!1;c.save();g.save();this._prerender(b,!0);b=this.text.toString().replace(/\r/g,"").split(/\n/);let ra=!0,wa=0,Da=0;e.each(b,(ia,Ea)=>{ia=e.TextFormatter.chunk(ia,!1,this.style.ignoreFormatting);let za={offsetY:Da,ascent:0,width:0,height:0,left:0,right:0,
textChunks:[]},Fa,xa,Ma;e.each(ia,(Ga,Pa)=>{if("format"==Ga.type)"[/]"==Ga.text?(ra||(c.restore(),g.restore(),ra=!0),Ma=Fa=xa=void 0):(Ga=e.TextFormatter.getTextStyle(Ga.text),Pa=this._getFontStyle(Ga),c.save(),g.save(),Fa=c.font=Pa,Ga.fill&&(xa=Ga.fill),Ga.width&&(Ma=e.toNumber(Ga.width)),ra=!1),na&&(ta=this._measureText(pa,c));else if("value"==Ga.type)for(Ga=Ga.text.match(/./gu)||[],A&&Ga.reverse(),Pa=0;Pa<Ga.length;Pa++){var Qa=Ga[Pa];const Oa=this._measureText(Qa,c);let Ua=Oa.width;Fa&&Ma&&Ma>
Ua&&(Ua=Ma);const Wa=Oa.actualBoundingBoxAscent+Oa.actualBoundingBoxDescent;Wa>za.height&&(za.height=Wa);Oa.actualBoundingBoxAscent>za.ascent&&(za.ascent=Oa.actualBoundingBoxAscent);za.width+=Ua;za.left+=Oa.actualBoundingBoxLeft;za.right+=Oa.actualBoundingBoxRight;za.textChunks.push({style:Fa,fill:xa,text:Qa,width:Ua,height:Wa+Oa.actualBoundingBoxDescent,left:Oa.actualBoundingBoxLeft,right:Oa.actualBoundingBoxRight,ascent:Oa.actualBoundingBoxAscent,offsetX:0,offsetY:Wa,textDecoration:void 0});wa+=
Ua;if(na&&(ta||(ta=this._measureText(pa,c)),Qa=ta.actualBoundingBoxLeft+ta.actualBoundingBoxRight,wa+=Qa,wa+Qa>V)){1==za.textChunks.length?this.textVisible=!1:(za.width+=Qa,za.left+=ta.actualBoundingBoxLeft,za.right+=ta.actualBoundingBoxRight,za.textChunks.push({style:Fa,fill:xa,text:pa,width:Qa,height:Wa+ta.actualBoundingBoxDescent,left:ta.actualBoundingBoxLeft,right:ta.actualBoundingBoxRight,ascent:ta.actualBoundingBoxAscent,offsetX:0,offsetY:Wa,textDecoration:void 0}));break}if(A)break}});za.height=
this.style.lineHeight instanceof e.Percent?za.height*this.style.lineHeight.value:za.height*(this.style.lineHeight||1.2);this._textInfo.push(za);Da+=za.height});ra||(c.restore(),g.restore());"hide"==I&&wa>V&&(this.textVisible=!1);e.each(this._textInfo,ia=>{e.each(ia.textChunks,Ea=>{Ea.offsetY+=Math.round((ia.height-Ea.height+(ia.ascent-Ea.ascent))/2)})});c.restore();g.restore();return{left:0,top:0,right:0,bottom:0}}}class pb extends Q{constructor(b,c){super(b);Object.defineProperty(this,"width",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,
value:void 0});Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.image=c}_dispose(){super._dispose();this._imageMask&&u(this._imageMask)}getLocalBounds(){if(!this._localBounds){let b=
0,c=0;this.width&&(b=this.width);this.height&&(c=this.height);this._localBounds={left:0,top:0,right:b,bottom:c};this._addBounds(this._localBounds)}return this._localBounds}_render(b){super._render(b);this.image&&(b=this._layer||b,void 0===this.tainted&&(this.tainted=H(this.image),b.tainted=!0),this.tainted&&this._renderer._omitTainted||(b.dirty&&(this.shadowColor&&(b.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(b.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&
(b.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(b.context.shadowOffsetY=this.shadowOffsetY),b.context.drawImage(this.image,0,0,this.width||this.image.naturalWidth,this.height||this.image.naturalHeight)),this.interactive&&this._isInteractive()&&(b=this._getMask(this.image),this._renderer._ghostLayer.context.drawImage(b,0,0))))}clear(){super.clear();this._imageMask=this.image=void 0}_getMask(b){if(void 0===this._imageMask){const c=this.width||b.naturalWidth,g=this.height||b.naturalHeight,
A=document.createElement("canvas");A.width=c;A.height=g;const I=A.getContext("2d");I.imageSmoothingEnabled=!1;I.fillStyle=this._getColorId();I.fillRect(0,0,c,g);H(b)||(I.globalCompositeOperation="destination-in",I.drawImage(b,0,0,c,g));this._imageMask=A}return this._imageMask}}class Ra{constructor(b,c,g,A){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,
"point",{enumerable:!0,configurable:!0,writable:!0,value:g});Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:A});Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0});e.supports("touchevents")&&b instanceof Touch?this.id=b.identifier:this.id=null}}
class lb extends e.ArrayDisposer{constructor(b){super();Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")});Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")});Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,
"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)});Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new mb});Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")});Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")});Object.defineProperty(this,"_domWidth",{enumerable:!0,configurable:!0,
writable:!0,value:0});Object.defineProperty(this,"_domHeight",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_canvasWidth",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_canvasHeight",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0});
Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_omitTainted",
{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set});Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"tapToActivate",{enumerable:!0,
configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3E3});Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.resolution=null==b?window.devicePixelRatio:b;this.view.style.position="absolute";this.view.appendChild(this._layerDom);this._disposers.push(new e.Disposer(()=>
{e.each$1(this._events,(c,g)=>{g.disposer.dispose()});e.each(this.layers,c=>{u(c.view);c.exportableView&&u(c.exportableView)});u(this._ghostLayer.view);u(this._patternCanvas)}));this._disposers.push(e.onZoom(()=>{null==b&&(this.resolution=window.devicePixelRatio)}));if(e.supports("touchevents")){const c=g=>{0!==this._dragging.length&&e.eachContinue$1(this._dragging,A=>A.value.shouldCancelTouch()?(g.preventDefault(),!1):!0);this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(e.addEventListener(window,
"touchstart",c,{passive:!1}));this._disposers.push(e.addEventListener(this.view,"touchstart",c,{passive:!1}));this._disposers.push(e.addEventListener(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0}));this._disposers.push(e.addEventListener(window,"click",g=>{this._touchActive=!1},{passive:!0}));this._disposers.push(e.addEventListener(this.view,"click",g=>{window.setTimeout(()=>{this._touchActive=!0;this._delayTouchDeactivate()},100)},{passive:!0}))}e.supports("wheelevents")&&
this._disposers.push(e.addEventListener(this.view,"wheel",c=>{let g=!1;this._hovering.forEach(A=>{if(A.wheelable)return g=!0,!1});g&&c.preventDefault()},{passive:!1}))}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout);0<this.tapToActivateTimeout&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(b){b?this._ghostLayer.view.parentNode||
this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(b,c,g,A){return this.defaultLayer.context.createLinearGradient(b,c,g,A)}createRadialGradient(b,c,g,A,I,V){return this.defaultLayer.context.createRadialGradient(b,c,g,A,I,V)}createPattern(b,c,g,A,I){this._patternCanvas.width=A;this._patternCanvas.height=I;this._patternContext.clearRect(0,0,A,I);c.renderDetached(this._patternContext);
b.renderDetached(this._patternContext);return this._patternContext.createPattern(this._patternCanvas,g)}makeContainer(){return new X(this)}makeGraphics(){return new db(this)}makeText(b,c){return new hb(this,b,c)}makeTextStyle(){return new kb}makeRadialText(b,c){return new ob(this,b,c)}makePicture(b){return new pb(this,b)}resizeLayer(b){b.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._canvasWidth,this._canvasHeight,
this._domWidth,this._domHeight,this.resolution)}resize(b,c,g,A){this._canvasWidth=b;this._canvasHeight=c;this._domWidth=g;this._domHeight=A;e.each(this.layers,I=>{I&&(I.dirty=!0,this.resizeLayer(I))});this.resizeGhost();this.view.style.width=g+"px";this.view.style.height=A+"px"}createDetachedLayer(b=!1){const c=document.createElement("canvas");b=c.getContext("2d",{willReadFrequently:b});b=new Va(c,b);c.style.position="absolute";c.style.top="0px";c.style.left="0px";return b}getLayerByOrder(b){const c=
this.layers,g=c.length;for(let A=0;A<g;A++){const I=c[A];if(I.order==b)return I}}getLayer(b,c=!0){var g=this.getLayerByOrder(b);if(g)return g;g=this.createDetachedLayer(99==b);g.order=b;g.visible=c;g.visible&&this.resizeLayer(g);b=this.layers;b.push(g);b.sort((V,na)=>V.order>na.order?1:V.order<na.order?-1:0);c=b.length;var A=e.indexOf(b,g);let I;for(A+=1;A<c;A++)if(b[A].visible){I=b[A];break}g.visible&&(void 0===I?this._layerDom.appendChild(g.view):this._layerDom.insertBefore(g.view,I.view));return g}render(b){this._dirtyLayers.length=
0;e.each(this.layers,c=>{c&&c.dirty&&c.visible&&(this._dirtyLayers.push(c),c.clear())});this._ghostLayer.clear();b.render(this.defaultLayer);this._ghostLayer.context.restore();e.each(this.layers,c=>{c&&(c=c.context,c.beginPath(),c.moveTo(0,0),c.stroke())});e.each(this._dirtyLayers,c=>{c.context.restore();c.dirty=!1});if(this._hovering.size&&this._lastPointerMoveEvent){const {events:c,target:g,native:A}=this._lastPointerMoveEvent;e.each(c,I=>{this._dispatchGlobalMousemove(I,g,A)})}}paintId(b){var c=
++this._colorId;const g=[0,0,0];for(let A=0;24>A;A++)g[A%3]<<=1,g[A%3]|=c&1,c>>=1;c=e.Color.fromHex((g[2]|0)+(g[1]<<8)+(g[0]<<16)).toCSS();this._colorMap[c]=b;return c}_removeObject(b){void 0!==b._colorId&&delete this._colorMap[b._colorId]}_adjustBoundingBox(b){const c=this._ghostLayer.margin;return new DOMRect(b.left-c.left,b.top-c.top,b.width+c.left+c.right,b.height+c.top+c.bottom)}getEvent(b,c=!0){const g=this.view.getBoundingClientRect(),A={x:b.clientX||0,y:b.clientY||0};return new Ra(b,A,{x:A.x-
(c?g.left:0),y:A.y-(c?g.top:0)},this._adjustBoundingBox(g))}_getHitTarget(b,c,g){if(!(0===c.width||0===c.height||b.x<c.left||b.x>c.right||b.y<c.top||b.y>c.bottom)&&g&&this._layerDom.contains(g)){b=this._ghostLayer.getImageData(b,c);if(0===b.data[0]&&0===b.data[1]&&0===b.data[2])return!1;b=e.Color.fromRGB(b.data[0],b.data[1],b.data[2]).toCSS();return this._colorMap[b]}}_withEvents(b,c){const g=this._events[b];if(void 0!==g){g.dispatching=!0;try{c(g)}finally{g.dispatching=!1,g.cleanup&&(g.cleanup=!1,
e.keepIf(g.callbacks,A=>!A.disposed),0===g.callbacks.length&&(g.disposer.dispose(),delete this._events[b]))}}}_dispatchEventAll(b,c){this.interactionsEnabled&&this._withEvents(b,g=>{e.each(g.callbacks,A=>{A.disposed||A.callback.call(A.context,c)})})}_dispatchEvent(b,c,g){if(!this.interactionsEnabled)return!1;let A=!1;this._withEvents(b,I=>{e.each(I.callbacks,V=>{V.disposed||V.object!==c||(V.callback.call(V.context,g),A=!0)})});return A}_dispatchMousedown(b,c){const g=b.button;if(0==g||2==g||1==g||
void 0===g){var A=this.getEvent(b);if(b=this._getHitTarget(A.originalPoint,A.bbox,c)){const I=A.id;let V=!1;w(b,na=>{const pa={id:I,value:na};this._mousedown.push(pa);!V&&this._dispatchEvent("pointerdown",na,A)&&(V=!0,this._dragging.some(ta=>ta.value===na&&ta.id===I)||this._dragging.push(pa));return!0})}}}_dispatchGlobalMousemove(b,c,g){const A=this.getEvent(b),I=this._getHitTarget(A.originalPoint,A.bbox,c);A.native=g;I?(this._hovering.forEach(V=>{V.contains(I)||(this._hovering.delete(V),V.cursorOverStyle&&
e.setStyle(document.body,"cursor",V._replacedCursorStyle),this._dispatchEvent("pointerout",V,A))}),A.native&&w(I,V=>{this._hovering.has(V)||(this._hovering.add(V),V.cursorOverStyle&&(V._replacedCursorStyle=e.getStyle(document.body,"cursor"),e.setStyle(document.body,"cursor",V.cursorOverStyle)),this._dispatchEvent("pointerover",V,A));return!0})):(this._hovering.forEach(V=>{V.cursorOverStyle&&e.setStyle(document.body,"cursor",V._replacedCursorStyle);this._dispatchEvent("pointerout",V,A)}),this._hovering.clear());
this._dispatchEventAll("globalpointermove",A)}_dispatchGlobalMouseup(b,c){b=this.getEvent(b);b.native=c;this._dispatchEventAll("globalpointerup",b)}_dispatchDragMove(b){if(0!==this._dragging.length){const c=this.getEvent(b),g=c.id;this._dragging.forEach(A=>{A.id===g&&this._dispatchEvent("pointermove",A.value,c)})}}_dispatchDragEnd(b,c){const g=b.button;let A;if(0==g||void 0===g)A="click";else if(2==g)A="rightclick";else if(1==g)A="middleclick";else return;const I=this.getEvent(b),V=I.id;if(0!==this._mousedown.length){const na=
this._getHitTarget(I.originalPoint,I.bbox,c);na&&this._mousedown.forEach(pa=>{pa.id===V&&pa.value.contains(na)&&this._dispatchEvent(A,pa.value,I)});this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach(na=>{na.id===V&&this._dispatchEvent("pointerup",na.value,I)}),this._dragging.length=0)}_dispatchDoubleClick(b,c){const g=this.getEvent(b);(b=this._getHitTarget(g.originalPoint,g.bbox,c))&&w(b,A=>this._dispatchEvent("dblclick",A,g)?!1:!0)}_dispatchWheel(b,c){const g=this.getEvent(b);
(b=this._getHitTarget(g.originalPoint,g.bbox,c))&&w(b,A=>this._dispatchEvent("wheel",A,g)?!1:!0)}_makeSharedEvent(b,c){if(void 0===this._listeners[b]){const g=c();this._listeners[b]=new e.CounterDisposer(()=>{delete this._listeners[b];g.dispose()})}return this._listeners[b].increment()}_onPointerEvent(b,c){function g(){I=null;A=!1}let A=!1,I=null;return new e.MultiDisposer([new e.Disposer(()=>{null!==I&&clearTimeout(I);g()}),e.addEventListener(this.view,e.getRendererEvent(b),V=>{A=!0;null!==I&&clearTimeout(I);
I=window.setTimeout(g,0)}),F(window,b,(V,na)=>{null!==I&&(clearTimeout(I),I=null);c(V,na,A);A=!1})])}_initEvent(b){switch(b){case "globalpointermove":case "pointerover":case "pointerout":return this._makeSharedEvent("pointermove",()=>{const c=(g,A,I)=>{this._lastPointerMoveEvent={events:g,target:A,native:I};e.each(g,V=>{this._dispatchGlobalMousemove(V,A,I)})};return new e.MultiDisposer([this._onPointerEvent("pointerdown",c),this._onPointerEvent("pointermove",c)])});case "globalpointerup":return this._makeSharedEvent("pointerup",
()=>{const c=this._onPointerEvent("pointerup",(A,I,V)=>{e.each(A,na=>{this._dispatchGlobalMouseup(na,V)});this._lastPointerMoveEvent={events:A,target:I,native:V}}),g=this._onPointerEvent("pointercancel",(A,I,V)=>{e.each(A,na=>{this._dispatchGlobalMouseup(na,V)});this._lastPointerMoveEvent={events:A,target:I,native:V}});return new e.Disposer(()=>{c.dispose();g.dispose()})});case "click":case "rightclick":case "middleclick":case "pointerdown":case "pointermove":case "pointerup":return this._makeSharedEvent("pointerdown",
()=>{const c=this._onPointerEvent("pointerdown",(V,na)=>{e.each(V,pa=>{this._dispatchMousedown(pa,na)})}),g=this._onPointerEvent("pointermove",V=>{e.each(V,na=>{this._dispatchDragMove(na)})}),A=this._onPointerEvent("pointerup",(V,na)=>{e.each(V,pa=>{this._dispatchDragEnd(pa,na)})}),I=this._onPointerEvent("pointercancel",(V,na)=>{e.each(V,pa=>{this._dispatchDragEnd(pa,na)})});return new e.Disposer(()=>{c.dispose();g.dispose();A.dispose();I.dispose()})});case "dblclick":return this._makeSharedEvent("dblclick",
()=>this._onPointerEvent("dblclick",(c,g)=>{e.each(c,A=>{this._dispatchDoubleClick(A,g)})}));case "wheel":return this._makeSharedEvent("wheel",()=>e.addEventListener(window,e.getRendererEvent("wheel"),c=>{this._dispatchWheel(c,e.getEventTarget(c))},{passive:!1}))}}_addEvent(b,c,g,A){let I=this._events[c];void 0===I&&(I=this._events[c]={disposer:this._initEvent(c),callbacks:[],dispatching:!1,cleanup:!1});const V={object:b,context:A,callback:g,disposed:!1};I.callbacks.push(V);return new e.Disposer(()=>
{V.disposed=!0;I.dispatching?I.cleanup=!0:(e.removeFirst(I.callbacks,V),0===I.callbacks.length&&(I.disposer.dispose(),delete this._events[c]))})}getCanvas(b,c){this.render(b);c||(c={});let g=this.resolution,A=Math.floor(this._canvasWidth*this.resolution),I=Math.floor(this._canvasHeight*this.resolution);if(c.minWidth&&c.minWidth>A){var V=c.minWidth/A;V>g&&(g=V*this.resolution)}c.minHeight&&c.minHeight>I&&(V=c.minHeight/I,V>g&&(g=V*this.resolution));c.maxWidth&&c.maxWidth<A&&(V=c.maxWidth/A,V<g&&(g=
V*this.resolution));c.maxHeight&&c.maxHeight>I&&(V=c.maxHeight/I,V<g&&(g=V*this.resolution));c.maintainPixelRatio&&(g/=this.resolution);const na=[];let pa=!1;c=document.createElement("canvas");g!=this.resolution&&(pa=!0,A=A*g/this.resolution,I=I*g/this.resolution);c.width=A;c.height=I;c.style.position="fixed";c.style.top="-10000px";this.view.appendChild(c);na.push(c);const ta=c.getContext("2d");let ra=0,wa=0,Da=!1;e.each(this.layers,ia=>{if(ia&&ia.visible&&(ia.tainted||pa)){Da=!0;ia.exportableView=
ia.view;ia.exportableContext=ia.context;ia.view=document.createElement("canvas");ia.view.style.position="fixed";ia.view.style.top="-10000px";this.view.appendChild(ia.view);na.push(ia.view);let Ea=0,za=0;ia.margin&&(Ea+=ia.margin.left||0+ia.margin.right||0,za+=ia.margin.top||0+ia.margin.bottom||0);ia.view.width=A+Ea;ia.view.height=I+za;ia.context=ia.view.getContext("2d");ia.dirty=!0;ia.scale=g}});Da&&(this._omitTainted=!0,this.render(b),this._omitTainted=!1);e.each(this.layers,ia=>{if(ia&&ia.visible){let Ea=
0,za=0;ia.margin&&(Ea=-(ia.margin.left||0)*this.resolution,za=-(ia.margin.top||0)*this.resolution);ta.drawImage(ia.view,Ea,za);ia.exportableView&&(ia.view=ia.exportableView,ia.exportableView=void 0);ia.exportableContext&&(ia.context=ia.exportableContext,ia.exportableContext=void 0);ra<ia.view.clientWidth&&(ra=ia.view.clientWidth);wa<ia.view.clientHeight&&(wa=ia.view.clientHeight);ia.scale=void 0}});c.style.width=ra+"px";c.style.height=wa+"px";e.each(na,ia=>{ia.style.position="";ia.style.top="";this.view.removeChild(ia)});
return c}}class mb{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}});Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,
value:0});this.view=document.createElement("canvas");this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0});this.context.imageSmoothingEnabled=!1;this.view.style.position="absolute";this.view.style.top="0px";this.view.style.left="0px"}resize(b,c,g,A,I){b+=this.margin.left+this.margin.right;c+=this.margin.top+this.margin.bottom;g+=this.margin.left+this.margin.right;A+=this.margin.top+this.margin.bottom;this.view.style.left=-this.margin.left+"px";this.view.style.top=-this.margin.top+
"px";this._width=Math.floor(b*I);this._height=Math.floor(c*I);this.view.width=this._width;this.view.style.width=g+"px";this.view.height=this._height;this.view.style.height=A+"px"}getImageData(b,c){return this.context.getImageData(Math.round((b.x-c.left)/c.width*this._width),Math.round((b.y-c.top)/c.height*this._height),1,1)}setMargin(b){this.margin.left=0;this.margin.right=0;this.margin.top=0;this.margin.bottom=0;e.each(b,c=>{c.margin&&(this.margin.left=Math.max(this.margin.left,c.margin.left),this.margin.right=
Math.max(this.margin.right,c.margin.right),this.margin.top=Math.max(this.margin.top,c.margin.top),this.margin.bottom=Math.max(this.margin.bottom,c.margin.bottom))})}clear(){this.context.save();this.context.fillStyle="#000";this.context.fillRect(0,0,this._width,this._height)}}class Va{constructor(b,c){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,
value:void 0});Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,
"_height",{enumerable:!0,configurable:!0,writable:!0,value:0});this.view=b;this.context=c}resize(b,c,g,A,I){null!=this.width&&(g=b=this.width);null!=this.height&&(A=c=this.height);this.margin?(b+=this.margin.left+this.margin.right,c+=this.margin.top+this.margin.bottom,g+=this.margin.left+this.margin.right,A+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px");this._width=Math.floor(b*
I);this._height=Math.floor(c*I);this.view.width=this._width;this.view.style.width=g+"px";this.view.height=this._height;this.view.style.height=A+"px"}clear(){this.context.save();this.context.clearRect(0,0,this._width,this._height)}}class fb{constructor(b,c={},g){Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_settings",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,
value:{}});Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null});Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new e.EventDispatcher});Object.defineProperty(this,
"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null});Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"tooltipContainer",
{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:U.new(this,{})});Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:Y});Object.defineProperty(this,"utc",{enumerable:!0,
configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:m.new(this,{})});Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:n.new(this,{})});Object.defineProperty(this,"durationFormatter",{enumerable:!0,
configurable:!0,writable:!0,value:E.new(this,{})});Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,
writable:!0,value:e.VerticalLayout.new(this,{})});Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:e.HorizontalLayout.new(this,{})});Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:e.GridLayout.new(this,{})});Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,
"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""});Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_htmlElementContainer",
{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]});if(!g)throw Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=c;0==c.accessible&&(this._a11yD=!0);null==c.useSafeResolution&&(c.useSafeResolution=!0);let A;c.useSafeResolution&&(A=e.getSafeResolution());this._renderer=new lb(A);let I;I=b instanceof HTMLElement?b:document.getElementById(b);e.each(e.registry.rootElements,
V=>{if(V.dom===I)throw Error("You cannot have multiple Roots on the same DOM node");});this.interfaceColors=q.new(this,{});if(null===I)throw Error("Could not find HTML element with id `"+b+"`");this.dom=I;b=document.createElement("div");b.style.position="relative";b.style.height="100%";I.appendChild(b);if(c=c.tooltipContainerBounds)this._tooltipContainerSettings=c;this._inner=b;this._updateComputedStyles();e.registry.rootElements.push(this)}static new(b,c){b=new fb(b,c,!0);b._init();return b}moveDOM(b){if(b=
b instanceof HTMLElement?b:document.getElementById(b)){for(;0<this.dom.childNodes.length;)b.appendChild(this.dom.childNodes[0]);this.dom=b;this._initResizeSensor();this.resize()}}_handleLogo(){if(this._logo){const b=this.dom.offsetHeight;150>=this.dom.offsetWidth||60>=b?this._logo.hide():this._logo.show()}}_showBranding(){if(!this._logo){const b=this.tooltipContainer.children.push(e.Container.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,
paddingBottom:9,paddingLeft:9,scale:.6,y:e.percent(100),centerY:e.p100,tooltipText:"Created using amCharts 5",tooltipX:e.p100,cursorOverStyle:"pointer",background:e.Rectangle.new(this,{fill:e.color(4671320),fillOpacity:0,tooltipY:5})})),c=x.Tooltip.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});c.label.setAll({fontSize:12});c.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3});
b.set("tooltip",c);b.events.on("click",()=>{window.open("https://www.amcharts.com/","_blank")});b.states.create("hover",{});b.children.push(e.Graphics.new(this,{stroke:e.color(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:e.color(3976191)});b.children.push(e.Graphics.new(this,{stroke:e.color(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",
{stroke:e.color(4671320)});this._logo=b;this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(b){return this._settings.calculateSize?this._settings.calculateSize(b):{width:b.width,height:b.height}}_init(){const b=this._renderer;var c=this._getRealSize(),g=this._getCalculatedSize(c),A=Math.floor(g.width);g=Math.floor(g.height);var I=Math.floor(c.width);c=Math.floor(c.height);const V=e.Container.new(this,{visible:!0,width:I,height:c});this._rootContainer=V;this._rootContainer._defaultThemes.push(L.DefaultTheme.new(this));
this.container=V.children.push(e.Container.new(this,{visible:!0,width:e.p100,height:e.p100}));b.resize(I,c,A,g);this._inner.appendChild(b.view);this._initResizeSensor();this._htmlElementContainer=I=document.createElement("div");I.className="am5-html-container";I.style.position="absolute";I.style.pointerEvents="none";this._tooltipContainerSettings||(I.style.overflow="hidden");this._inner.appendChild(I);!0!==this._a11yD&&(I=document.createElement("div"),I.className="am5-reader-container",I.setAttribute("role",
"alert"),I.style.position="absolute",I.style.width="1px",I.style.height="1px",I.style.overflow="hidden",I.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=I,this._inner.appendChild(this._readerAlertElement),I=document.createElement("div"),I.className="am5-focus-container",I.style.position="absolute",I.style.pointerEvents="none",I.style.top="0px",I.style.left="0px",I.style.overflow="hidden",I.style.width=A+"px",I.style.height=g+"px",I.setAttribute("role","application"),e.setInteractive(I,
!1),this._focusElementContainer=I,this._inner.appendChild(this._focusElementContainer),this._tooltipElementContainer=A=document.createElement("div"),A.className="am5-tooltip-container",this._inner.appendChild(A),e.supports("keyboardevents")&&(this._disposers.push(e.addEventListener(window,"keydown",na=>{16==na.keyCode?this._isShift=!0:9==na.keyCode&&(this._isShift=na.shiftKey)})),this._disposers.push(e.addEventListener(window,"keyup",na=>{16==na.keyCode&&(this._isShift=!1)})),this._disposers.push(e.addEventListener(I,
"keydown",na=>{const pa=this._focusedSprite;if(pa){27==na.keyCode&&(e.blur(),this._focusedSprite=void 0);var ta=0;let ra=0;switch(na.keyCode){case 13:na.preventDefault();ta=b.getEvent(new MouseEvent("click"));pa.events.dispatch("click",{type:"click",originalEvent:ta.event,point:ta.point,simulated:!0,target:pa});return;case 37:ta=-6;break;case 39:ta=6;break;case 38:ra=-6;break;case 40:ra=6;break;default:return}if(0!=ta||0!=ra)na.preventDefault(),pa.isDragging()||(this._keyboardDragPoint={x:0,y:0},
na=b.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0})),pa.events.isEnabled("pointerdown")&&pa.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:na.event,point:na.point,simulated:!0,target:pa})),na=this._keyboardDragPoint,na.x+=ta,na.y+=ra,ta=b.getEvent(new MouseEvent("mousemove",{clientX:na.x,clientY:na.y}),!1),pa.events.isEnabled("globalpointermove")&&pa.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:ta.event,point:ta.point,simulated:!0,target:pa})}})),
this._disposers.push(e.addEventListener(I,"keyup",na=>{if(this._focusedSprite){var pa=this._focusedSprite;na=na.keyCode;switch(na){case 37:case 39:case 38:case 40:if(pa.isDragging())na=this._keyboardDragPoint,na=b.getEvent(new MouseEvent("mouseup",{clientX:na.x,clientY:na.y})),pa.events.isEnabled("globalpointerup")&&pa.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:na.event,point:na.point,simulated:!0,target:pa}),this._keyboardDragPoint=void 0;else if(pa.get("focusableGroup")){const ta=
pa.get("focusableGroup"),ra=this._tabindexes.filter(Da=>Da.get("focusableGroup")==ta);pa=ra.indexOf(pa);const wa=ra.length-1;pa+=39==na||40==na?1:-1;0>pa?pa=wa:pa>wa&&(pa=0);e.focus(ra[pa].getPrivate("focusElement").dom)}}}}))));this._startTicker();this.setThemes([]);this._addTooltip();this._hasLicense()||this._showBranding()}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose();this._resizeSensorDisposer=new D(this.dom,()=>{this.autoResize&&this.resize()});this._disposers.push(this._resizeSensorDisposer)}resize(){var b=
this._getRealSize(),c=this._getCalculatedSize(b),g=Math.floor(c.width);const A=Math.floor(c.height);if(0<g&&0<A){c=Math.floor(b.width);b=Math.floor(b.height);var I=this._htmlElementContainer;I.style.width=g+"px";I.style.height=A+"px";!0!==this._a11yD&&(I=this._focusElementContainer,I.style.width=g+"px",I.style.height=A+"px");this._renderer.resize(c,b,g,A);g=this._rootContainer;g.setPrivate("width",c);g.setPrivate("height",b);this._render();this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display);
this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(b){e.each(this._tickers,c=>{c(b)})}_runAnimations(b){e.keepIf(this._animations,c=>c._runAnimation(b))}_runDirties(){let b={};for(;this._isDirtyParents;)this._isDirtyParents=!1,e.keys(this._dirtyParents).forEach(V=>{const na=this._dirtyParents[V];delete this._dirtyParents[V];na.isDisposed()||(b[na.uid]=na,na._prepareChildren())});e.keys(b).forEach(V=>{b[V]._updateChildren()});const c=[];e.keys(this._dirty).forEach(V=>
{V=this._dirty[V];V.isDisposed()?delete this._dirty[V.uid]:(c.push(V),V._beforeChanged())});c.forEach(V=>{V._changed();delete this._dirty[V.uid];V._clearDirty()});this._isDirty=!1;const g={},A=[];e.keys(this._dirtyBounds).forEach(V=>{const na=this._dirtyBounds[V];delete this._dirtyBounds[V];na.isDisposed()||(g[na.uid]=na.depth(),A.push(na))});this._positionHTMLElements();A.sort((V,na)=>e.compare(g[na.uid],g[V.uid]));A.forEach(V=>{V._updateBounds()});const I=this._dirtyPositions;e.keys(I).forEach(V=>
{const na=I[V];delete I[V];na.isDisposed()||na._updatePosition()});c.forEach(V=>{V._afterChanged()})}_renderFrame(b){return this._updateTick?(this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:b}),this._checkComputedStyles(),this._runTickers(b),this._runAnimations(b),this._runDirties(),this._render(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:b}),
0===this._tickers.length&&0===this._animations.length&&!this._isDirty):!0}_runTicker(b,c){this.isDisposed()||(this.animationTime=b,this._renderFrame(b)?this.animationTime=this._ticker=null:this._paused||(c?this._ticker:G(this.fps,this._ticker)))}_runTickerNow(b=1E4){if(!this.isDisposed())for(b=performance.now()+b;;){const c=performance.now();if(c>=b){this.animationTime=null;break}this.animationTime=c;if(this._renderFrame(c)){this.animationTime=null;break}}}_startTicker(){null===this._ticker&&(this.animationTime=
null,this._ticker=b=>{this._runTicker(b)},G(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(b){(this._updateTick=b)&&this._startTicker()}_addDirtyEntity(b){void 0===this._dirty[b.uid]&&(this._isDirty=!0,this._dirty[b.uid]=b,this._startTicker())}_addDirtyParent(b){void 0===this._dirtyParents[b.uid]&&(this._isDirtyParents=this._isDirty=!0,this._dirtyParents[b.uid]=b,this._startTicker())}_addDirtyBounds(b){void 0===this._dirtyBounds[b.uid]&&(this._isDirty=!0,this._dirtyBounds[b.uid]=
b,this._startTicker())}_addDirtyPosition(b){void 0===this._dirtyPositions[b.uid]&&(this._isDirty=!0,this._dirtyPositions[b.uid]=b,this._startTicker())}_addAnimation(b){-1===this._animations.indexOf(b)&&(this._animations.push(b),this._startTicker())}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",()=>{this._isDirty=!0;this._startTicker()})}eachFrame(b){this._tickers.push(b);this._startTicker();return new e.Disposer(()=>{e.removeFirst(this._tickers,b)})}markDirtyGlobal(b){b||
(b=this.container);b.walkChildren(c=>{c instanceof e.Container&&this.markDirtyGlobal(c);c.markDirty();c.markDirtyBounds()})}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),e.each(this._disposers,
b=>{b.dispose()}),this._inner&&e.removeElement(this._inner),e.remove(e.registry.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(b){!0!==this._a11yD&&(this._readerAlertElement.innerHTML=e.stripTags(b))}setThemes(b){this._rootContainer.set("themes",b);(b=this.tooltipContainer)&&b._applyThemes();(b=this.interfaceColors)&&b._applyThemes()}_addTooltip(){if(!this.tooltipContainer){var b=this._tooltipContainerSettings;this.tooltipContainer=this._rootContainer.children.push(e.Container.new(this,
{position:"absolute",isMeasured:!1,width:e.p100,height:e.p100,layer:b?35:30,layerMargin:b?b:void 0}));b=x.Tooltip.new(this,{});this.container.set("tooltip",b);b.hide(0);this._tooltip=b}}_registerTabindexOrder(b){1!=this._a11yD&&(b.get("focusable")?e.pushOne(this._tabindexes,b):e.remove(this._tabindexes,b),this._invalidateTabindexes())}_unregisterTabindexOrder(b){1!=this._a11yD&&(e.remove(this._tabindexes,b),this._invalidateTabindexes())}_invalidateTabindexes(){if(1!=this._a11yD){this._tabindexes.sort((c,
g)=>{c=c.get("tabindexOrder",0);g=g.get("tabindexOrder",0);return c==g?0:c>g?1:-1});var b=[];e.each(this._tabindexes,(c,g)=>{c.getPrivate("focusElement")?this._moveFocusElement(g,c):this._makeFocusElement(g,c);(g=c.get("focusableGroup"))&&(-1!==b.indexOf(g)?c.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):b.push(g))})}}_updateCurrentFocus(){1!=this._a11yD&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(b,
c){if(1!=this._a11yD&&(c||(c=b.getPrivate("focusElement").dom),c)){b.get("visible")&&"tooltip"!=b.get("role")&&!b.isHidden()?"-1"!=c.getAttribute("tabindex")&&c.setAttribute("tabindex",""+this.tabindex):c.removeAttribute("tabindex");var g=b.get("role");g?c.setAttribute("role",g):c.removeAttribute("role");(g=b.get("ariaLabel"))?(g=e.populateString(b,g),c.setAttribute("aria-label",g)):c.removeAttribute("aria-label");(g=b.get("ariaLive"))?c.setAttribute("aria-live",g):c.removeAttribute("aria-live");
g=b.get("ariaChecked");null!=g?c.setAttribute("aria-checked",g?"true":"false"):c.removeAttribute("aria-checked");b.get("ariaHidden")?c.setAttribute("aria-hidden","hidden"):c.removeAttribute("aria-hidden");(g=b.get("ariaOrientation"))?c.setAttribute("aria-orientation",g):c.removeAttribute("aria-orientation");(g=b.get("ariaValueNow"))?c.setAttribute("aria-valuenow",g):c.removeAttribute("aria-valuenow");(g=b.get("ariaValueMin"))?c.setAttribute("aria-valuemin",g):c.removeAttribute("aria-valuemin");(g=
b.get("ariaValueMax"))?c.setAttribute("aria-valuemax",g):c.removeAttribute("aria-valuemax");(g=b.get("ariaValueText"))?c.setAttribute("aria-valuetext",g):c.removeAttribute("aria-valuetext");(b=b.get("ariaControls"))?c.setAttribute("aria-controls",b):c.removeAttribute("aria-controls")}}_makeFocusElement(b,c){if(!c.getPrivate("focusElement")&&1!=this._a11yD){var g=document.createElement("div");"tooltip"!=c.get("role")&&(g.tabIndex=this.tabindex);g.style.position="absolute";e.setInteractive(g,!1);var A=
[];c.setPrivate("focusElement",{dom:g,disposers:A});this._decorateFocusElement(c);A.push(e.addEventListener(g,"focus",I=>{this._handleFocus(I,b)}));A.push(e.addEventListener(g,"blur",I=>{this._handleBlur(I,b)}));this._moveFocusElement(b,c)}}_removeFocusElement(b){1!=this._a11yD&&(e.remove(this._tabindexes,b),b=b.getPrivate("focusElement"))&&(this._focusElementContainer.removeChild(b.dom),e.each(b.disposers,c=>{c.dispose()}))}_hideFocusElement(b){1!=this._a11yD&&(b.getPrivate("focusElement").dom.style.display=
"none")}_moveFocusElement(b,c){if(1!=this._a11yD){var g=this._focusElementContainer;c=c.getPrivate("focusElement").dom;c!==this._focusElementContainer.children[b]&&((b=this._focusElementContainer.children[b+1])?g.insertBefore(c,b):g.append(c))}}_positionFocusElement(b){if(1!=this._a11yD){var c=b.globalBounds(),g=c.right==c.left?b.width():c.right-c.left,A=c.top==c.bottom?b.height():c.bottom-c.top,I=c.left-2;c=c.top-2;0>g&&(I+=g,g=Math.abs(g));0>A&&(c+=A,A=Math.abs(A));b=b.getPrivate("focusElement").dom;
b.style.top=c+"px";b.style.left=I+"px";b.style.width=g+4+"px";b.style.height=A+4+"px"}}_handleFocus(b,c){1!=this._a11yD&&(c=this._tabindexes[c],c.isVisibleDeep()?(this._positionFocusElement(c),this._focusedSprite=c,c.events.isEnabled("focus")&&c.events.dispatch("focus",{type:"focus",originalEvent:b,target:c})):this._focusNext(b.target,this._isShift?-1:1))}_focusNext(b,c){if(1!=this._a11yD){var g=Array.from(document.querySelectorAll('a[href],area[href],button:not([disabled]),details,input:not([disabled]),iframe:not([disabled]),select:not([disabled]),textarea:not([disabled]),[contentEditable\x3d""],[contentEditable\x3d"true"],[contentEditable\x3d"TRUE"],[tabindex]:not([tabindex^\x3d"-"])'));
b=g.indexOf(b)+c;0>b?b=g.length-1:b>=g.length&&(b=0);g[b].focus()}}_handleBlur(b,c){1!=this._a11yD&&((c=this._focusedSprite)&&c.events.isEnabled("blur")&&c.events.dispatch("blur",{type:"blur",originalEvent:b,target:c}),this._focusedSprite=void 0)}updateTooltip(b){if(1!=this._a11yD){var c=e.stripTags(b._getText()),g=b.getPrivate("tooltipElement");"tooltip"==b.get("role")&&""!=c?(g||(g=this._makeTooltipElement(b)),g.innerHTML!=c&&(g.innerHTML=c)):g&&(g.remove(),b.removePrivate("tooltipElement"))}}_makeTooltipElement(b){const c=
this._tooltipElementContainer,g=document.createElement("div");g.style.position="absolute";g.style.width="1px";g.style.height="1px";g.style.overflow="hidden";g.style.clip="rect(1px, 1px, 1px, 1px)";e.setInteractive(g,!1);this._decorateFocusElement(b,g);c.append(g);b.setPrivate("tooltipElement",g);return g}_removeTooltipElement(b){if(1!=this._a11yD&&(b=b.getPrivate("tooltipElement"))){const c=b.parentElement;c&&c.removeChild(b)}}_invalidateAccessibility(b){if(1!=this._a11yD){this._focusElementDirty=
!0;var c=b.getPrivate("focusElement");b.get("focusable")?c&&(this._decorateFocusElement(b),this._positionFocusElement(b)):c&&this._removeFocusElement(b)}}focused(b){return this._focusedSprite===b}documentPointToRoot(b){const c=this.dom.getBoundingClientRect();return{x:b.x-c.left,y:b.y-c.top}}rootPointToDocument(b){const c=this.dom.getBoundingClientRect();return{x:b.x+c.left,y:b.y+c.top}}addDisposer(b){this._disposers.push(b);return b}_updateComputedStyles(){var b=window.getComputedStyle(this.dom);
let c="";e.each$1(b,(g,A)=>{e.isString(g)&&g.match(/^font/)&&(c+=A)});if(b=c!=this._fontHash)this._fontHash=c;return b}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(b){b instanceof e.Container?b.children.each(c=>{this._invalidateLabelBounds(c)}):b instanceof e.Text&&b.markDirtyBounds()}_hasLicense(){for(let b=0;b<e.registry.licenses.length;b++)if(e.registry.licenses[b].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&
this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(b){this._renderer.debugGhostView=b}set tapToActivate(b){this._renderer.tapToActivate=b}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(b){this._renderer.tapToActivateTimeout=b}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(b){const c=this._htmlElementContainer,g=document.createElement("div");b.setPrivate("htmlElement",
g);g.style.position="absolute";g.style.overflow="auto";g.style.boxSizing="border-box";e.setInteractive(g,b.get("interactive",!1));b.events.isEnabled("click")&&(e.setInteractive(g,!0),this._disposers.push(e.addEventListener(g,"click",A=>{A=this._renderer.getEvent(A);b.events.dispatch("click",{type:"click",originalEvent:A.event,point:A.point,simulated:!1,target:b})})));this._positionHTMLElement(b);c.append(g);e.pushOne(this._htmlEnabledContainers,b);return g}_positionHTMLElements(){e.each(this._htmlEnabledContainers,
b=>{this._positionHTMLElement(b)})}_positionHTMLElement(b){const c=b.getPrivate("htmlElement");if(c){e.each("paddingTop paddingRight paddingBottom paddingLeft minWidth minHeight maxWidth maxHeight".split(" "),ta=>{const ra=b.get(ta);c.style[ta]=ra?ra+"px":""});const I=b.compositeOpacity();setTimeout(()=>{c.style.opacity=I+""},10);const V=b.isVisibleDeep();V&&(c.style.display="block");var g=b.globalBounds();c.style.top=g.top+"px";c.style.left=g.left+"px";var A=b.get("width");const na=b.get("height");
let pa=g=0;A&&(g=b.width());na&&(pa=b.height());A&&na?(b.removePrivate("minWidth"),b.removePrivate("minHeight")):(c.style.position="fixed",c.style.width="",c.style.height="",A=c.getBoundingClientRect(),c.style.position="absolute",g=A.width,pa=A.height,b._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},b.setPrivate("minWidth",g),b.setPrivate("minHeight",pa));0<g&&(c.style.minWidth=g+"px");0<pa&&(c.style.minHeight=pa+"px");V&&0!=I||(c.style.display="none")}}_setHTMLContent(b,c){let g=b.getPrivate("htmlElement");
g||(g=this._makeHTMLElement(b));g.innerHTML!=c&&(g.innerHTML=c)}_removeHTMLContent(b){let c=b.getPrivate("htmlElement");c&&this._htmlElementContainer.removeChild(c);e.remove(this._htmlEnabledContainers,b)}}e.addLicense("AM5C241025748");const eb=new Map([["ar",()=>new Promise((b,c)=>p(["../../chunks/ar2"],b,c))],["bg-bg",()=>new Promise((b,c)=>p(["../../chunks/bg_BG2"],b,c))],["bs-ba",()=>new Promise((b,c)=>p(["../../chunks/bs_BA2"],b,c))],["ca-es",()=>new Promise((b,c)=>p(["../../chunks/ca_ES2"],
b,c))],["cs-cz",()=>new Promise((b,c)=>p(["../../chunks/cs_CZ2"],b,c))],["da-dk",()=>new Promise((b,c)=>p(["../../chunks/da_DK2"],b,c))],["de-de",()=>new Promise((b,c)=>p(["../../chunks/de_DE2"],b,c))],["de-ch",()=>new Promise((b,c)=>p(["../../chunks/de_CH2"],b,c))],["el-gr",()=>new Promise((b,c)=>p(["../../chunks/el_GR2"],b,c))],["en-us",()=>new Promise((b,c)=>p(["../../chunks/en_US2"],b,c))],["en-ca",()=>new Promise((b,c)=>p(["../../chunks/en_CA2"],b,c))],["es-es",()=>new Promise((b,c)=>p(["../../chunks/es_ES2"],
b,c))],["et-ee",()=>new Promise((b,c)=>p(["../../chunks/et_EE2"],b,c))],["fi-fi",()=>new Promise((b,c)=>p(["../../chunks/fi_FI2"],b,c))],["fr-fr",()=>new Promise((b,c)=>p(["../../chunks/fr_FR2"],b,c))],["he-il",()=>new Promise((b,c)=>p(["../../chunks/he_IL2"],b,c))],["hr-hr",()=>new Promise((b,c)=>p(["../../chunks/hr_HR2"],b,c))],["hu-hu",()=>new Promise((b,c)=>p(["../../chunks/hu_HU2"],b,c))],["id-id",()=>new Promise((b,c)=>p(["../../chunks/id_ID2"],b,c))],["it-it",()=>new Promise((b,c)=>p(["../../chunks/it_IT2"],
b,c))],["ja-jp",()=>new Promise((b,c)=>p(["../../chunks/ja_JP2"],b,c))],["ko-kr",()=>new Promise((b,c)=>p(["../../chunks/ko_KR2"],b,c))],["lt-lt",()=>new Promise((b,c)=>p(["../../chunks/lt_LT2"],b,c))],["lv-lv",()=>new Promise((b,c)=>p(["../../chunks/lv_LV2"],b,c))],["nb-no",()=>new Promise((b,c)=>p(["../../chunks/nb_NO2"],b,c))],["nl-nl",()=>new Promise((b,c)=>p(["../../chunks/nl_NL2"],b,c))],["pl-pl",()=>new Promise((b,c)=>p(["../../chunks/pl_PL2"],b,c))],["pt-br",()=>new Promise((b,c)=>p(["../../chunks/pt_BR2"],
b,c))],["pt-pt",()=>new Promise((b,c)=>p(["../../chunks/pt_PT2"],b,c))],["ro-ro",()=>new Promise((b,c)=>p(["../../chunks/ro_RO2"],b,c))],["ru-ru",()=>new Promise((b,c)=>p(["../../chunks/ru_RU2"],b,c))],["sk-sk",()=>new Promise((b,c)=>p(["../../chunks/sk_SK2"],b,c))],["sl-sl",()=>new Promise((b,c)=>p(["../../chunks/sl_SL2"],b,c))],["sr-rs",()=>new Promise((b,c)=>p(["../../chunks/sr_RS2"],b,c))],["sv-se",()=>new Promise((b,c)=>p(["../../chunks/sv_SE2"],b,c))],["th-th",()=>new Promise((b,c)=>p(["../../chunks/th_TH2"],
b,c))],["tr-tr",()=>new Promise((b,c)=>p(["../../chunks/tr_TR2"],b,c))],["uk-ua",()=>new Promise((b,c)=>p(["../../chunks/uk_UA2"],b,c))],["vi-vn",()=>new Promise((b,c)=>p(["../../chunks/vi_VN2"],b,c))],["zh-cn",()=>new Promise((b,c)=>p(["../../chunks/zh_Hans2"],b,c))],["zh-hk",()=>new Promise((b,c)=>p(["../../chunks/zh_Hant2"],b,c))],["zh-tw",()=>new Promise((b,c)=>p(["../../chunks/zh_Hant2"],b,c))]]);v="#7ABEE5 #B39BD5 #F8AE83 #92E6E4 #FBC487 #EE967A #CEA2D6 #89D594 #CEE68F #F1A6D5".split(" ").map(b=>
e.color(b));r.createRoot=async function(b,c=K.getLocale()){b=fb.new(b);var g=eb.get;if(c)if(eb.has(c.toLowerCase()))var A=c.toLowerCase();else{c=c.split("-")[0].toLowerCase();let I=null;for(A of eb.keys())if(A.startsWith(c)){I=A;break}A=I||"en-us"}else A="en-us";b.locale=(await g.call(eb,A)()).default;return b};r.esriChartColorSet=v;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/Theme":function(){define(["exports","./tslib.es6"],function(p,r){function v(a){return Number(a)!==
a}function e(a){if(null!=a&&!K(a)){let d=Number(a);return v(d)&&L(a)&&""!=a?e(a.replace(/[^0-9.\-]+/g,"")):d}return a}function x(a){return"[object Date]"==={}.toString.call(a)}function L(a){return"string"===typeof a}function K(a){return"number"===typeof a&&Number(a)==a}function R(a){return"object"===typeof a&&null!==a}function J(a,d){const h=a.length;for(let B=0;B<h;++B)if(a[B]===d)return B;return-1}function C(a,d){const h=a.length;for(let B=0;B<h;++B)if(d(a[B]))return!0;return!1}function t(a,d){const h=
a.length;for(let B=0;B<h;++B)d(a[B],B)}function f(a,d){let h=a.length;for(;0<h;)--h,d(a[h],h)}function w(a,d){let h=!1,B=0;for(;;){B=a.indexOf(d,B);if(-1===B)return h;h=!0;a.splice(B,1)}}function F(a,d){d=a.indexOf(d);return-1!==d?(a.splice(d,1),!0):!1}function H(a,d){-1===a.indexOf(d)&&a.push(d)}function u(a,d){const h=a.length;for(let B=0;B<h;++B)if(d(a[B],B))return B;return-1}function y(a,d){d=u(a,d);if(-1!==d)return a[d]}function G(a,d){let h=0,B=a.length,ca=!1;for(;h<B;){const ha=h+B>>1,ma=d(a[ha]);
0>ma?h=ha+1:0===ma?(ca=!0,h=ha+1):B=ha}return{found:ca,index:ca?h-1:h}}function z(a,d){let h=0,B=a.length,ca=!1;for(;h<B;){const ha=h+B>>1,ma=d(a[ha]);0>ma?h=ha+1:(0===ma&&(ca=!0),B=ha)}return{found:ca,index:h}}function ba(a,d){if(!(0<=a&&a<d))throw Error("Index out of bounds: "+a);}function Z(a){return new Ra(a)}function D(a){return Object.keys(a)}function q(a,d){return D(a).sort(d)}function m(a,d){D(a).forEach(h=>{d(h,a[h])})}function n(a,d,h,B){a.addEventListener(d,h,B||!1);return new Xa(()=>{a.removeEventListener(d,
h,B||!1)})}function E(a){switch(a){case "touchevents":return window.hasOwnProperty("TouchEvent");case "pointerevents":return window.hasOwnProperty("PointerEvent");case "mouseevents":return window.hasOwnProperty("MouseEvent");case "wheelevents":return window.hasOwnProperty("WheelEvent");case "keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function Y(a){if(!("undefined"!==typeof Touch&&a instanceof Touch))if("undefined"!==typeof PointerEvent&&a instanceof PointerEvent&&null!=
a.pointerType)switch(a.pointerType){case "touch":case "pen":case 2:break;case "mouse":case 4:return!1;default:return!(a instanceof MouseEvent)}else if(null!=a.type&&a.type.match(/^mouse/))return!1;return!0}function U(a,d){var h;if(h=a.target)a:for(a=a.target;;)if(d.root.dom===a){h=!0;break a}else if(null===a.parentNode)if(null==a.host){h=!1;break a}else a=a.host;else a=a.parentNode;return h}function ea(a,d){return K(a)?a:null!=a&&K(a.value)&&K(d)?d*a.value:0}function aa(a,d=0,h="0"){"string"!==typeof a&&
(a=a.toString());return d>a.length?Array(d-a.length+1).join(h)+a:a}function fa(a){return a.replace(/[\s]*$/,"").replace(/^[\s]*/,"")}function O(a,d){a=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()));d=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-d);d=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a.getTime()-d.getTime())/864E5+1)/7)}function da(a){var d=a.h;var h=a.s;var B=a.l;if(0==h)h=B=d=B;else{a=function(ma,va,Ca){0>Ca&&(Ca+=1);1<Ca&&--Ca;return Ca<1/6?ma+6*(va-ma)*
Ca:.5>Ca?va:Ca<2/3?ma+(va-ma)*(2/3-Ca)*6:ma};let ca=.5>B?B*(1+h):B+h-B*h,ha=2*B-ca;h=a(ha,ca,d+1/3);B=a(ha,ca,d);d=a(ha,ca,d-1/3)}return{r:Math.round(255*h),g:Math.round(255*B),b:Math.round(255*d)}}function la(a){let d=a.r/255,h=a.g/255;a=a.b/255;let B=Math.max(d,h,a),ca=Math.min(d,h,a),ha=0,ma=0,va=(B+ca)/2;if(B===ca)ha=ma=0;else{let Ca=B-ca;ma=.5<va?Ca/(2-B-ca):Ca/(B+ca);switch(B){case d:ha=(h-a)/Ca+(h<a?6:0);break;case h:ha=(a-d)/Ca+2;break;case a:ha=(d-h)/Ca+4}ha/=6}return{h:ha,s:ma,l:va}}function l(a,
d){return Math.round((0<d?255-a:a)*d)}function P(a,d={r:255,g:255,b:255},h={r:255,g:255,b:255}){let B=d,ca=h;128<=(299*h.r+587*h.g+114*h.b)/1E3&&(B=h,ca=d);return 128<=(299*a.r+587*a.g+114*a.b)/1E3?ca:B}function W(a){"#"===a[0]&&(a=a.substr(1));3==a.length&&(a=a[0].repeat(2)+a[1].repeat(2)+a[2].repeat(2));return parseInt(a,16)}function Q(a){return r.__awaiter(this,void 0,void 0,function*(){if(void 0!==a){const d=[];m(a,(h,B)=>{d.push(B.waitForStop())});yield Promise.all(d)}})}function X(a,d,h){return d+
a*(h-d)}function T(a,d,h){return 1<=a?h:d}function k(a,d,h){return new Ra(X(a,d.percent,h.percent))}function S(a,d,h){return Va.interpolate(a,d,h)}function N(a,d,h){return Math.min(Math.max(a,d),h)}function ka(a){return Math.sin(eb*a)}function oa(a){return Math.cos(eb*a)}function sa(a,d){return{x:a*oa(d),y:a*ka(d)}}function M(a){return a}function ja(a){return a*a*a}function qa(a,d){return a===d?0:a<d?-1:1}function ua(a,d,h){const B=a.length,ca=d.length,ha=Math.min(B,ca);for(let ma=0;ma<ha;++ma){const va=
h(a[ma],d[ma]);if(0!==va)return va}return qa(B,ca)}function ya(a,d){a.get("reverseChildren",!1)?a.children.eachReverse(d):a.children.each(d)}function Aa(a,d){if(null!=d){d=Wa.escape(""+d);let B=d.match(/\{([^}]+)\}/g),ca;if(B)for(ca=0;ca<B.length;ca++){var h=B[ca].replace(/\{([^}]+)\}/,"$1");h=Ba(a,h);null==h&&(h="");d=d.split(B[ca]).join(h)}d=Wa.unescape(d)}else d="";return d}function Ba(a,d,h){let B;h=a.dataItem;let ca=[];var ha=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;let ma;for(;;){ma=ha.exec(d);
if(null===ma)break;if(ma[3]){ca.push({prop:ma[3]});var va=a.getDateFormatter().get("dateFields",[]),Ca=a.getNumberFormatter().get("numericFields",[]),Ka=a.getDurationFormatter().get("durationFields",[]);-1!==va.indexOf(ma[3])?ca.push({method:"formatDate",params:[]}):-1!==Ca.indexOf(ma[3])?ca.push({method:"formatNumber",params:[]}):-1!==Ka.indexOf(ma[3])&&ca.push({method:"formatDuration",params:[]})}else{va=[];if(""!=fa(ma[2]))for(Ca=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;;){Ka=Ca.exec(ma[2]);if(null===
Ka)break;va.push(Ka[1]||Ka[2]||Ka[3])}ca.push({method:ma[1],params:va})}}if(h){B=Ia(a,ca,h._settings);if(null==B||R(B))B=Ia(a,ca,h);ha=h.dataContext;null==B&&ha&&(B=Ia(a,ca,ha),null==B&&(B=Ia(a,[{prop:d}],ha)),null==B&&ha.dataContext&&(B=Ia(a,ca,ha.dataContext)));null==B&&h.component&&h.component.dataItem!==h&&(B=Ba(h.component,d))}null==B&&(B=Ia(a,ca,a));null==B&&a.parent&&(B=Ba(a.parent,d));return B}function Ia(a,d,h,B){let ca=h,ha=!1;for(let Ca=0,Ka=d.length;Ca<Ka;Ca++){let Ja=d[Ca];if(Ja.prop){if(ca instanceof
za){var ma=ca.get(Ja.prop);null==ma&&(ma=ca.getPrivate(Ja.prop));if(null==ma){ma=Ja.prop;var va=ca.getPrivate("customData");ma=R(va)?va[ma]:void 0}null==ma&&(ma=ca[Ja.prop]);ca=ma}else ca.get?(ma=ca.get(Ja.prop),null==ma&&(ma=ca[Ja.prop]),ca=ma):ca=ca[Ja.prop];if(null==ca)return}else switch(Ja.method){case "formatNumber":ma=e(ca);null!=ma&&(ca=a.getNumberFormatter().format(ma,B||Ja.params[0]||void 0),ha=!0);break;case "formatDate":ma=ca;x(ma)||K(ma)?ma=new Date(ma):(va=Number(ma),ma=K(va)?new Date(va):
new Date(ma));if(!x(ma)||v(ma.getTime()))return;null!=ma&&(ca=a.getDateFormatter().format(ma,B||Ja.params[0]||void 0),ha=!0);break;case "formatDuration":ma=e(ca);null!=ma&&(ca=a.getDurationFormatter().format(ma,B||Ja.params[0]||void 0,Ja.params[1]||void 0),ha=!0);break;case "urlEncode":case "encodeURIComponent":ca=encodeURIComponent(ca);break;default:ca[Ja.method]&&ca[Ja.method].apply(h,Ja.params)}}ha||(d=[{method:"",params:B}],null==B?K(ca)?(d[0].method="formatNumber",d[0].params=""):x(ca)&&(d[0].method=
"formatDate",d[0].params=""):("undefined"===typeof B?B="string":(B=B.toLowerCase().replace(/^\[[^\]]*\]/,""),B=B.replace(/\[[^\]]+\]/,""),B=B.trim(),B=(h=B.match(/\/(date|number|duration)$/))?h[1]:"number"===B?"number":"date"===B?"date":"duration"===B?"duration":B.match(/[#0]/)?"number":B.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"),"number"===B?d[0].method="formatNumber":"date"===B?d[0].method="formatDate":"duration"===B&&(d[0].method="formatDuration")),d[0].method&&(ca=Ia(a,d,ca)));return ca}class $a{constructor(){Object.defineProperty(this,
"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class Xa{constructor(a){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._disposed=!1;this._dispose=a}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=
!0,this._dispose())}}class ib extends $a{constructor(){super(...arguments);Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){t(this._disposers,a=>{a.dispose()})}}class Za extends $a{constructor(a){super();Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._disposers=a}_dispose(){t(this._disposers,a=>{a.dispose()})}}class jb extends Xa{constructor(){super(...arguments);Object.defineProperty(this,
"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){++this._counter;return new Xa(()=>{--this._counter;0===this._counter&&this.dispose()})}}class db{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._listeners=[];this._killed=[];this._disabled={};this._iterating=0;this._enabled=!0;this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const a=this._listeners;this._iterating=1;this._disabled=
this._listeners=null;try{t(a,d=>{d.disposer.dispose()})}finally{this._iterating=this._killed=null}}}hasListeners(){return 0!==this._listeners.length}hasListenersByType(a){return C(this._listeners,d=>(null===d.type||d.type===a)&&!d.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(a){delete this._disabled[a]}disableType(a,d=Infinity){this._disabled[a]=d}_removeListener(a){if(0===this._iterating){a=this._listeners.indexOf(a);if(-1===a)throw Error("Invalid state: could not remove listener");
this._listeners.splice(a,1)}else this._killed.push(a)}_removeExistingListener(a,d,h,B){if(this._disposed)throw Error("EventDispatcher is disposed");this._eachListener(ca=>{ca.once!==a||ca.type!==d||void 0!==h&&ca.callback!==h||ca.context!==B||ca.disposer.dispose()})}isEnabled(a){if(this._disposed)throw Error("EventDispatcher is disposed");return this._enabled&&0<this._listeners.length&&this.hasListenersByType(a)&&void 0===this._disabled[a]}removeType(a){if(this._disposed)throw Error("EventDispatcher is disposed");
this._eachListener(d=>{d.type===a&&d.disposer.dispose()})}has(a,d,h){return-1!==u(this._listeners,B=>!0!==B.once&&B.type===a&&(void 0===d||B.callback===d)&&B.context===h)}_shouldDispatch(a){if(this._disposed)throw Error("EventDispatcher is disposed");const d=this._disabled[a];return K(d)?(1>=d?delete this._disabled[a]:--this._disabled[a],!1):this._enabled}_eachListener(a){++this._iterating;try{t(this._listeners,a)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(t(this._killed,
d=>{this._removeListener(d)}),this._killed.length=0)}}dispatch(a,d){this._shouldDispatch(a)&&this._eachListener(h=>{h.killed||null!==h.type&&h.type!==a||h.dispatch(a,d)})}_on(a,d,h,B,ca,ha){if(this._disposed)throw Error("EventDispatcher is disposed");this._removeExistingListener(a,d,h,B);const ma={type:d,callback:h,context:B,shouldClone:ca,dispatch:ha,killed:!1,once:a,disposer:new Xa(()=>{ma.killed=!0;this._removeListener(ma)})};this._listeners.push(ma);return ma}onAll(a,d,h=!0){return this._on(!1,
null,a,d,h,(B,ca)=>a.call(d,ca)).disposer}on(a,d,h,B=!0){return this._on(!1,a,d,h,B,(ca,ha)=>d.call(h,ha)).disposer}once(a,d,h,B=!0){const ca=this._on(!0,a,d,h,B,(ha,ma)=>{ca.disposer.dispose();d.call(h,ma)});return ca.disposer}off(a,d,h){this._removeExistingListener(!1,a,d,h)}copyFrom(a){if(this._disposed)throw Error("EventDispatcher is disposed");if(a===this)throw Error("Cannot copyFrom the same TargetedEventDispatcher");const d=[];t(a._listeners,h=>{!h.killed&&h.shouldClone&&(null===h.type?d.push(this.onAll(h.callback,
h.context)):h.once?d.push(this.once(h.type,h.callback,h.context)):d.push(this.on(h.type,h.callback,h.context)))});return new Za(d)}}class hb{constructor(a=[]){Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new db});this._values=a}get values(){return this._values}contains(a){return-1!==this._values.indexOf(a)}removeValue(a){let d=0,h=this._values.length;for(;d<h;)this._values[d]===
a?(this.removeIndex(d),--h):++d}indexOf(a){return J(this._values,a)}get length(){return this._values.length}hasIndex(a){return 0<=a&&a<this._values.length}getIndex(a){return this._values[a]}_onPush(a){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:a})}_onInsertIndex(a,d){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:a,newValue:d})}_onSetIndex(a,d,h){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",
{type:"setIndex",target:this,index:a,oldValue:d,newValue:h})}_onRemoveIndex(a,d){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:a,oldValue:d})}_onMoveIndex(a,d,h){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:a,newIndex:d,value:h})}_onClear(a){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:a})}setIndex(a,d){ba(a,this._values.length);
const h=this._values[a];h!==d&&(this._values[a]=d,this._onSetIndex(a,h,d));return h}insertIndex(a,d){ba(a,this._values.length+1);this._values.splice(a,0,d);this._onInsertIndex(a,d);return d}swap(a,d){var h=this._values.length;ba(a,h);ba(d,h);if(a!==d){h=this._values[a];const B=this._values[d];this._values[a]=B;this._onSetIndex(a,h,B);this._values[d]=h;this._onSetIndex(d,B,h)}}removeIndex(a){ba(a,this._values.length);const d=this._values[a];this._values.splice(a,1);this._onRemoveIndex(a,d);return d}moveValue(a,
d){let h=this.indexOf(a);-1!==h?(this._values.splice(h,1),null==d?(d=this._values.length,this._values.push(a),this._onMoveIndex(h,d,a)):(this._values.splice(d,0,a),this._onMoveIndex(h,d,a))):null==d?(this._values.push(a),this._onPush(a)):(this._values.splice(d,0,a),this._onInsertIndex(d,a));return a}push(a){this._values.push(a);this._onPush(a);return a}unshift(a){this.insertIndex(0,a);return a}pushAll(a){t(a,d=>{this.push(d)})}copyFrom(a){this.pushAll(a._values)}pop(){return 0>this._values.length-
1?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(a){const d=this._values;this._values=[];this._onClear(d);t(a,h=>{this._values.push(h);this._onPush(h)})}clear(){this.setAll([])}*[Symbol.iterator](){const a=this._values.length;for(let d=0;d<a;++d)yield this._values[d]}each(a){t(this._values,a)}eachReverse(a){f(this._values,a)}}class kb extends hb{constructor(){super(...arguments);Object.defineProperty(this,"autoDispose",{enumerable:!0,
configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_onSetIndex(a,d,h){this.autoDispose&&d.dispose();super._onSetIndex(a,d,h)}_onRemoveIndex(a,d){this.autoDispose&&d.dispose();super._onRemoveIndex(a,d)}_onClear(a){this.autoDispose&&t(a,d=>{d.dispose()});super._onClear(a)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this.autoDispose&&t(this._values,a=>{a.dispose()}))}}class ob extends kb{constructor(a,
d){super();Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.template=a;this.make=d}}class pb extends hb{constructor(a){super();Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_events",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});this._container=a;this._events=this.events.onAll(d=>{if("clear"===d.type)t(d.oldValues,h=>{this._onRemoved(h)});else if("push"===d.type)this._onInserted(d.newValue);else if("setIndex"===d.type)this._onRemoved(d.oldValue),this._onInserted(d.newValue,d.index);else if("insertIndex"===d.type)this._onInserted(d.newValue,d.index);else if("removeIndex"===d.type)this._onRemoved(d.oldValue);else if("moveIndex"===d.type)this._onRemoved(d.value),this._onInserted(d.value,
d.newIndex);else throw Error("Unknown IListEvent type");})}_onInserted(a,d){a._setParent(this._container,!0);const h=this._container._childrenDisplay;void 0===d?h.addChild(a._display):h.addChildAt(a._display,d)}_onRemoved(a){this._container._childrenDisplay.removeChild(a._display);this._container.markDirtyBounds();this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),t(this.values,a=>{a.dispose()}))}}class Ra{constructor(a){Object.defineProperty(this,
"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._value=a}get value(){return this._value/100}get percent(){return this._value}toString(){return""+this._value+"%"}interpolate(a,d){return a+this.value*(d-a)}static normalize(a,d,h){return a instanceof Ra?a:d===h?new Ra(0):new Ra(100*Math.min(Math.max(1/(h-d)*(a-d),0),1))}}Z(0);const lb=Z(100),mb=Z(50);class Va{constructor(a){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._hex=a|
0}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return this._hex&255}toCSS(a=1){return"rgba("+this.r+", "+this.g+", "+this.b+", "+a+")"}toCSSHex(){return"#"+aa(this.r.toString(16),2)+aa(this.g.toString(16),2)+aa(this.b.toString(16),2)}toHSL(a=1){return la({r:this.r,g:this.g,b:this.b,a})}static fromHSL(a,d,h){a=da({h:a,s:d,l:h});return this.fromRGB(a.r,a.g,a.b)}toString(){return this.toCSSHex()}static fromHex(a){return new Va(a)}static fromRGB(a,d,
h){return new Va((h|0)+(d<<8)+(a<<16))}static fromString(a){return new Va(W(a))}static fromCSS(a){a:{var d=a.replace(/[ ]/g,"");if(a=d.match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i))a.push("1");else if(a=d.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!a){a=0;break a}d="";for(let h=1;3>=h;h++){let B=parseInt(a[h]).toString(16);1==B.length&&(B="0"+B);d+=B}a=W(d)}return new Va(a)}static fromAny(a){if(L(a)){if("#"==a[0])return Va.fromString(a);if("rgb"==a.substr(0,3))return Va.fromCSS(a)}else{if(K(a))return Va.fromHex(a);
if(a instanceof Va)return Va.fromHex(a.hex)}throw Error("Unknown color syntax: "+a);}static alternative(a,d,h){a=P({r:a.r,g:a.g,b:a.b},d?{r:d.r,g:d.g,b:d.b}:void 0,h?{r:h.r,g:h.g,b:h.b}:void 0);return this.fromRGB(a.r,a.g,a.b)}static interpolate(a,d,h,B="rgb"){return"hsl"==B?(d=d.toHSL(),h=h.toHSL(),Va.fromHSL(X(a,d.h,h.h),X(a,d.s,h.s),X(a,d.l,h.l))):Va.fromRGB(X(a,d.r,h.r),X(a,d.g,h.g),X(a,d.b,h.b))}static lighten(a,d){d=(a={r:a.r,g:a.g,b:a.b},{r:Math.max(0,Math.min(255,a.r+l(a.r,d))),g:Math.max(0,
Math.min(255,a.g+l(a.g,d))),b:Math.max(0,Math.min(255,a.b+l(a.b,d))),a:a.a});return Va.fromRGB(d.r,d.g,d.b)}static brighten(a,d){var h=a.r;var B=a.g;a=a.b;d=l(Math.min(Math.max(h,B,a),230),d);h=Math.max(0,Math.min(255,Math.round(h+d)));B=Math.max(0,Math.min(255,Math.round(B+d)));a=Math.max(0,Math.min(255,Math.round(a+d)));return Va.fromRGB(h,B,a)}static saturate(a,d){a={r:a.r,g:a.g,b:a.b};void 0===a||1==d?d=a:(a=la(a),a.s=d,d=da(a));return Va.fromRGB(d.r,d.g,d.b)}}var fb=Math.PI;const eb=fb/180;fb=
180/fb;class b{constructor(a,d){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}});this._entity=a;this._settings=d;m(d,h=>{this._userSettings[h]=!0})}get(a,d){a=this._settings[a];return void 0!==a?a:d}setRaw(a,d){this._settings[a]=d}set(a,d){this._userSettings[a]=
!0;this.setRaw(a,d)}remove(a){delete this._userSettings[a];delete this._settings[a]}setAll(a){D(a).forEach(d=>{this.set(d,a[d])})}_eachSetting(a){m(this._settings,a)}apply(){const a={stateAnimationEasing:!0,stateAnimationDuration:!0},d=this._entity.states.lookup("default");this._eachSetting((h,B)=>{a[h]||(a[h]=!0,this!==d&&(h in d._settings||(d._settings[h]=this._entity.get(h))),this._entity.set(h,B))})}applyAnimate(a){null==a&&(a=this._settings.stateAnimationDuration);null==a&&(a=this.get("stateAnimationDuration",
this._entity.get("stateAnimationDuration",0)));let d=this._settings.stateAnimationEasing;null==d&&(d=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",ja)));const h=this._entity.states.lookup("default"),B={stateAnimationEasing:!0,stateAnimationDuration:!0},ca={};this._eachSetting((ha,ma)=>{B[ha]||(B[ha]=!0,this!=h&&(ha in h._settings||(h._settings[ha]=this._entity.get(ha))),(ma=this._entity.animate({key:ha,to:ma,duration:a,easing:d}))&&(ca[ha]=ma))});return ca}}class c{constructor(a){Object.defineProperty(this,
"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._entity=a}lookup(a){return this._states[a]}create(a,d){const h=this._states[a];if(h)return h.setAll(d),h;d=new b(this._entity,d);return this._states[a]=d}remove(a){delete this._states[a]}apply(a){const d=this._states[a];d&&d.apply();this._entity._applyState(a)}applyAnimate(a,d){let h;const B=this._states[a];B&&(h=B.applyAnimate(d));this._entity._applyStateAnimated(a,
d);return h}}class g{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.3.12"});Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}const A=new g;class I{constructor(a){Object.defineProperty(this,"_entity",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}});this._entity=a}add(a,d){let h=this._callbacks[a];void 0===h&&(h=this._callbacks[a]=[]);h.push(d);this._entity._markDirtyKey(a);return new Xa(()=>{F(h,d)&&this._entity._markDirtyKey(a)})}remove(a){const d=this._callbacks[a];void 0!==d&&(delete this._callbacks[a],0!==d.length&&
this._entity._markDirtyKey(a))}enable(a){this._disabled[a]&&(delete this._disabled[a],this._entity._markDirtyKey(a))}disable(a){this._disabled[a]||(this._disabled[a]=!0,this._entity._markDirtyKey(a))}fold(a,d){if(!this._disabled[a]){const h=this._callbacks[a];if(void 0!==h)for(let B=0,ca=h.length;B<ca;++B)d=h[B](d,this._entity,a)}return d}}class V{constructor(a,d,h,B,ca,ha,ma){Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new db});this._animation=
a;this._from=d;this._to=h;this._duration=B;this._easing=ca;this._loops=ha;this._interpolate="number"===typeof d&&"number"===typeof h?X:d instanceof Ra&&h instanceof Ra?k:d instanceof Va&&h instanceof Va?S:T;this._oldTime=ma}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=
!1;this._oldTime=null}play(){this._stopped||this._playing||(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise((a,d)=>{if(this._stopped)a();else{const h=this.events.on("stopped",()=>{h.dispose();a()})}})}_checkEnded(){return 1<this._loops?(--this._loops,!1):!0}_run(a){null!==this._oldTime&&(this._time+=a-this._oldTime,this._time>this._duration&&(this._time=this._duration));this._oldTime=a}_reset(a){this._oldTime=a;
this._time=0}_value(a){return this._interpolate(this._easing(a),this._from,this._to)}}let na=0;class pa{constructor(a){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++na});Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}});
Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,
value:{}});Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}});this._settings=a}_checkDirty(){D(this._settings).forEach(a=>{this._userProperties[a]=!0;this._markDirtyKey(a)})}resetUserSettings(){this._userProperties={}}_runAnimation(a){if(this.isDisposed())return!1;let d=!1;m(this._animatingSettings,(h,B)=>{if(B._stopped)this._stopAnimation(h);else if(B._playing){B._run(a);
const ca=B.percentage;1<=ca?B._checkEnded()?this.set(h,B._value(1)):(d=!0,B._reset(a),this._set(h,B._value(1))):(d=!0,this._set(h,B._value(ca)))}});m(this._animatingPrivateSettings,(h,B)=>{if(B._stopped)this._stopAnimationPrivate(h);else if(B._playing){B._run(a);const ca=B.percentage;1<=ca?B._checkEnded()?this.setPrivate(h,B._value(1)):(d=!0,B._reset(a),this._setPrivate(h,B._value(1))):(d=!0,this._setPrivate(h,B._value(ca)))}});return d}_markDirtyKey(a){this.markDirty()}_markDirtyPrivateKey(a){this.markDirty()}on(a,
d){let h=this._settingEvents[a];void 0===h&&(h=this._settingEvents[a]=[]);h.push(d);return new Xa(()=>{F(h,d);0===h.length&&delete this._settingEvents[a]})}onPrivate(a,d){let h=this._privateSettingEvents[a];void 0===h&&(h=this._privateSettingEvents[a]=[]);h.push(d);return new Xa(()=>{F(h,d);0===h.length&&delete this._privateSettingEvents[a]})}getRaw(a,d){a=this._settings[a];return void 0!==a?a:d}get(a,d){return this.getRaw(a,d)}_sendKeyEvent(a,d){const h=this._settingEvents[a];void 0!==h&&t(h,B=>
{B(d,this,a)})}_sendPrivateKeyEvent(a,d){const h=this._privateSettingEvents[a];void 0!==h&&t(h,B=>{B(d,this,a)})}_setRaw(a,d,h){this._prevSettings[a]=d;this._sendKeyEvent(a,h)}setRaw(a,d){const h=this._settings[a];this._settings[a]=d;h!==d&&this._setRaw(a,h,d)}_set(a,d){const h=this._settings[a];this._settings[a]=d;h!==d&&(this._setRaw(a,h,d),this._markDirtyKey(a))}_stopAnimation(a){const d=this._animatingSettings[a];d&&(delete this._animatingSettings[a],d.stop())}set(a,d){this._set(a,d);this._stopAnimation(a);
return d}remove(a){a in this._settings&&(this._prevSettings[a]=this._settings[a],delete this._settings[a],this._sendKeyEvent(a,void 0),this._markDirtyKey(a));this._stopAnimation(a)}removeAll(){t(D(this._settings),a=>{this.remove(a)})}getPrivate(a,d){a=this._privateSettings[a];return void 0!==a?a:d}_setPrivateRaw(a,d,h){this._prevPrivateSettings[a]=d;this._sendPrivateKeyEvent(a,h)}setPrivateRaw(a,d){const h=this._privateSettings[a];this._privateSettings[a]=d;h!==d&&this._setPrivateRaw(a,h,d)}_setPrivate(a,
d){const h=this._privateSettings[a];this._privateSettings[a]=d;h!==d&&(this._setPrivateRaw(a,h,d),this._markDirtyPrivateKey(a))}_stopAnimationPrivate(a){const d=this._animatingPrivateSettings[a];d&&(d.stop(),delete this._animatingPrivateSettings[a])}setPrivate(a,d){this._setPrivate(a,d);this._stopAnimationPrivate(a);return d}removePrivate(a){a in this._privateSettings&&(this._prevPrivateSettings[a]=this._privateSettings[a],delete this._privateSettings[a],this._markDirtyPrivateKey(a));this._stopAnimationPrivate(a)}setAll(a){m(a,
(d,h)=>{this.set(d,h)})}animate(a){var d=a.key;const h=a.to,B=a.duration||0,ca=a.loops||1,ha=void 0===a.from?this.get(d):a.from;a=void 0===a.easing?M:a.easing;if(0===B)this.set(d,h);else if(void 0===ha||ha===h)this.set(d,h);else return this.set(d,ha),d=this._animatingSettings[d]=new V(this,ha,h,B,a,ca,this._animationTime()),this._startAnimation(),d;d=new V(this,ha,h,B,a,ca,null);d.stop();return d}animatePrivate(a){var d=a.key;const h=a.to,B=a.duration||0,ca=a.loops||1,ha=void 0===a.from?this.getPrivate(d):
a.from;a=void 0===a.easing?M:a.easing;if(0===B)this.setPrivate(d,h);else if(void 0===ha||ha===h)this.setPrivate(d,h);else return this.setPrivate(d,ha),d=this._animatingPrivateSettings[d]=new V(this,ha,h,B,a,ca,this._animationTime()),this._startAnimation(),d;d=new V(this,ha,h,B,a,ca,null);d.stop();return d}_dispose(){}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class ta extends pa{constructor(a,d,h,B=[]){super(d);Object.defineProperty(this,"_root",
{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new c(this)});Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new I(this)});Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:this._createEvents()});Object.defineProperty(this,"_userPrivateProperties",
{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_internalTemplates",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,
value:{}});if(!h)throw Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=a;this._internalTemplates=B;d.id&&this._registerId(d.id)}static new(a,d,h){a=new this(a,d,!0);a._template=h;a._afterNew();return a}static _new(a,d,h=[]){a=new this(a,d,!0,h);a._afterNew();return a}_afterNew(){this._checkDirty();let a=!1;const d=this._template;d&&(a=!0,d._setObjectTemplate(this));t(this._internalTemplates,h=>{a=!0;h._setObjectTemplate(this)});a&&this._applyTemplates(!1);this.states.create("default",
{});this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const a=this._template;a&&a._setObjectTemplate(this);t(this._internalTemplates,d=>{d._setObjectTemplate(this)});this.states.create("default",{});this._setDefaults();this._applyThemes()}_createEvents(){return new db}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefault(a,d){a in this._settings||super.set(a,d)}_setRawDefault(a,d){a in this._settings||super.setRaw(a,
d)}_clearDirty(){D(this._dirty).forEach(a=>{this._dirty[a]=!1});D(this._dirtyPrivate).forEach(a=>{this._dirtyPrivate[a]=!1})}isDirty(a){return!!this._dirty[a]}isPrivateDirty(a){return!!this._dirtyPrivate[a]}_markDirtyKey(a){this._dirty[a]=!0;super._markDirtyKey(a)}_markDirtyPrivateKey(a){this._dirtyPrivate[a]=!0;super._markDirtyKey(a)}isType(a){return-1!==this.classNames.indexOf(a)}_pushPropertyDisposer(a,d){let h=this._disposerProperties[a];void 0===h&&(h=this._disposerProperties[a]=[]);h.push(d);
return d}_disposeProperty(a){const d=this._disposerProperties[a];void 0!==d&&(t(d,h=>{h.dispose()}),delete this._disposerProperties[a])}set template(a){const d=this._template;d!==a&&(this._template=a,d&&d._removeObjectTemplate(this),a&&a._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(a){}_applyStateAnimated(a,
d){}get(a,d){a=this.adapters.fold(a,this._settings[a]);return void 0!==a?a:d}isUserSetting(a){return this._userProperties[a]||!1}set(a,d){this._userProperties[a]=!0;return super.set(a,d)}setRaw(a,d){this._userProperties[a]=!0;super.setRaw(a,d)}_setSoft(a,d){return this._userProperties[a]?d:super.set(a,d)}remove(a){delete this._userProperties[a];this._removeTemplateProperty(a)}setPrivate(a,d){this._userPrivateProperties[a]=!0;return super.setPrivate(a,d)}setPrivateRaw(a,d){this._userPrivateProperties[a]=
!0;super.setPrivateRaw(a,d)}removePrivate(a){delete this._userPrivateProperties[a];this._removeTemplatePrivateProperty(a)}_setTemplateProperty(a,d,h){if(!this._userProperties[d]){const B=this._findTemplateByKey(d);a===B&&super.set(d,h)}}_setTemplatePrivateProperty(a,d,h){if(!this._userPrivateProperties[d]){const B=this._findTemplateByPrivateKey(d);a===B&&super.setPrivate(d,h)}}_removeTemplateProperty(a){if(!this._userProperties[a]){const d=this._findTemplateByKey(a);d?super.set(a,d._settings[a]):
super.remove(a)}}_removeTemplatePrivateProperty(a){if(!this._userPrivateProperties[a]){const d=this._findTemplateByPrivateKey(a);d?super.setPrivate(a,d._privateSettings[a]):super.removePrivate(a)}}_walkParents(a){a(this._root._rootContainer);a(this)}_applyStateByKey(a){const d=this.states.create(a,{}),h={};this._eachTemplate(B=>{(B=B.states.lookup(a))&&B._apply(d,h)});m(d._settings,B=>{h[B]||d._userSettings[B]||d.remove(B)})}_applyTemplate(a,d){this._templateDisposers.push(a._apply(this,d));m(a._settings,
(h,B)=>{d.settings[h]||this._userProperties[h]||(d.settings[h]=!0,super.set(h,B))});m(a._privateSettings,(h,B)=>{d.privateSettings[h]||this._userPrivateProperties[h]||(d.privateSettings[h]=!0,super.setPrivate(h,B))});this._runSetup&&a.setup&&(this._runSetup=!1,a.setup(this))}_findStaticTemplate(a){if(this._template&&a(this._template))return this._template}_eachTemplate(a){this._findStaticTemplate(d=>{a(d);return!1});f(this._internalTemplates,a);t(this._templates,a)}_applyTemplates(a=!0){a&&this._disposeTemplates();
const d={settings:{},privateSettings:{},states:{}};this._eachTemplate(h=>{this._applyTemplate(h,d)});a&&(m(this._settings,h=>{this._userProperties[h]||d.settings[h]||super.remove(h)}),m(this._privateSettings,h=>{this._userPrivateProperties[h]||d.privateSettings[h]||super.removePrivate(h)}))}_findTemplate(a){var d=this._findStaticTemplate(a);if(void 0===d){d=this._internalTemplates;var h;b:{for(h=d.length;0<h;)if(--h,a(d[h],h))break b;h=-1}d=-1!==h?d[h]:void 0;return void 0===d?y(this._templates,a):
d}return d}_findTemplateByKey(a){return this._findTemplate(d=>a in d._settings)}_findTemplateByPrivateKey(a){return this._findTemplate(d=>a in d._privateSettings)}_disposeTemplates(){t(this._templateDisposers,a=>{a.dispose()});this._templateDisposers.length=0}_removeTemplates(){t(this._templates,a=>{a._removeObjectTemplate(this)});this._templates.length=0}_applyThemes(){let a=!1;const d=[];let h=[];const B=new Set,ca=this.get("themeTagsSelf");ca&&t(ca,ha=>{B.add(ha)});this._walkParents(ha=>{ha===
this._root._rootContainer&&(a=!0);0<ha._defaultThemes.length&&d.push(ha._defaultThemes);const ma=ha.get("themes");ma&&h.push(ma);(ha=ha.get("themeTags"))&&t(ha,va=>{B.add(va)})});h=d.concat(h);this._removeTemplates();a&&f(this.classNames,ha=>{const ma=[];t(h,va=>{t(va,Ca=>{(Ca=Ca._lookupRules(ha))&&f(Ca,Ka=>{if(Ka.tags.every(Ja=>B.has(Ja))){const Ja=z(ma,Ya=>{const La=qa(Ka.tags.length,Ya.tags.length);return 0===La?ua(Ka.tags,Ya.tags,qa):La});ma.splice(Ja.index,0,Ka)}})})});t(ma,va=>{this._templates.push(va.template);
va.template._setObjectTemplate(this)})});this._applyTemplates();a&&(this._runSetup=!1);return a}_changed(){}_beforeChanged(){if(this.isDirty("id")){var a=this.get("id");a&&this._registerId(a);(a=this._prevSettings.id)&&delete A.entitiesById[a]}}_registerId(a){if(A.entitiesById[a]&&A.entitiesById[a]!==this)throw Error('An entity with id "'+a+'" already exists.');A.entitiesById[a]=this}_afterChanged(){}addDisposer(a){this._disposers.push(a);return a}_dispose(){super._dispose();var a=this._template;
a&&a._removeObjectTemplate(this);t(this._internalTemplates,d=>{d._removeObjectTemplate(this)});this._removeTemplates();this._disposeTemplates();this.events.dispose();this._disposers.forEach(d=>{d.dispose()});m(this._disposerProperties,(d,h)=>{t(h,B=>{B.dispose()})});(a=this.get("id"))&&delete A.entitiesById[a]}setTimeout(a,d){const h=setTimeout(()=>{this.removeDispose(B);a()},d),B=new Xa(()=>{clearTimeout(h)});this._disposers.push(B);return B}removeDispose(a){if(!this.isDisposed()){let d=J(this._disposers,
a);-1<d&&this._disposers.splice(d,1)}a.dispose()}hasTag(a){return-1!==J(this.get("themeTags",[]),a)}addTag(a){if(!this.hasTag(a)){const d=this.get("themeTags",[]);d.push(a);this.set("themeTags",d)}}removeTag(a){if(this.hasTag(a)){const d=this.get("themeTags",[]);w(d,a);this.set("themeTags",d)}}_t(a,d,...h){return this._root.language.translate(a,d,...h)}get root(){return this._root}}Object.defineProperty(ta,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"});Object.defineProperty(ta,
"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});class ra{constructor(a,d,h){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._name=a;this._template=d;this._settings=h}get(a,d){a=this._settings[a];return void 0!==a?a:d}set(a,d){this._settings[a]=
d;this._template._stateChanged(this._name)}remove(a){delete this._settings[a];this._template._stateChanged(this._name)}setAll(a){D(a).forEach(d=>{this._settings[d]=a[d]});this._template._stateChanged(this._name)}_apply(a,d){m(this._settings,(h,B)=>{d[h]||a._userSettings[h]||(d[h]=!0,a.setRaw(h,B))})}}class wa{constructor(a){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,
value:{}});this._template=a}lookup(a){return this._states[a]}create(a,d){const h=this._states[a];if(h)return h.setAll(d),h;d=new ra(a,this._template,d);this._states[a]=d;this._template._stateChanged(a);return d}remove(a){delete this._states[a];this._template._stateChanged(a)}_apply(a,d){m(this._states,(h,B)=>{let ca=d.states[h];null==ca&&(ca=d.states[h]={});h=a.states.create(h,{});B._apply(h,ca)})}}class Da{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,
value:{}})}add(a,d){let h=this._callbacks[a];void 0===h&&(h=this._callbacks[a]=[]);h.push(d);return new Xa(()=>{F(h,d);0===h.length&&delete this._callbacks[a]})}remove(a){void 0!==this._callbacks[a]&&delete this._callbacks[a]}_apply(a){const d=[];m(this._callbacks,(h,B)=>{t(B,ca=>{d.push(a.adapters.add(h,ca))})});return new Za(d)}}class ia{constructor(a,d){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_privateSettings",
{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new wa(this)});Object.defineProperty(this,"adapters",{enumerable:!0,
configurable:!0,writable:!0,value:new Da});Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new db});Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0});if(!d)throw Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=a}static new(a){return new ia(a,!0)}get entities(){return this._entities}get(a,d){a=this._settings[a];return void 0!==a?a:d}setRaw(a,d){this._settings[a]=d}set(a,d){this._settings[a]!==
d&&(this.setRaw(a,d),this._entities.forEach(h=>{h._setTemplateProperty(this,a,d)}))}remove(a){a in this._settings&&(delete this._settings[a],this._entities.forEach(d=>{d._removeTemplateProperty(a)}))}removeAll(){m(this._settings,(a,d)=>{this.remove(a)})}getPrivate(a,d){a=this._privateSettings[a];return void 0!==a?a:d}setPrivateRaw(a,d){return this._privateSettings[a]=d}setPrivate(a,d){this._privateSettings[a]!==d&&(this.setPrivateRaw(a,d),this._entities.forEach(h=>{h._setTemplatePrivateProperty(this,
a,d)}));return d}removePrivate(a){a in this._privateSettings&&(delete this._privateSettings[a],this._entities.forEach(d=>{d._removeTemplatePrivateProperty(a)}))}setAll(a){m(a,(d,h)=>{this.set(d,h)})}on(a,d){let h=this._settingEvents[a];void 0===h&&(h=this._settingEvents[a]=[]);h.push(d);return new Xa(()=>{F(h,d);0===h.length&&delete this._settingEvents[a]})}onPrivate(a,d){let h=this._privateSettingEvents[a];void 0===h&&(h=this._privateSettingEvents[a]=[]);h.push(d);return new Xa(()=>{F(h,d);0===h.length&&
delete this._privateSettingEvents[a]})}_apply(a,d){const h=[];m(this._settingEvents,(B,ca)=>{t(ca,ha=>{h.push(a.on(B,ha))})});m(this._privateSettingEvents,(B,ca)=>{t(ca,ha=>{h.push(a.onPrivate(B,ha))})});this.states._apply(a,d);h.push(this.adapters._apply(a));h.push(a.events.copyFrom(this.events));return new Za(h)}_setObjectTemplate(a){this._entities.push(a)}_removeObjectTemplate(a){w(this._entities,a)}_stateChanged(a){this._entities.forEach(d=>{d._applyStateByKey(a)})}}class Ea extends db{constructor(a){super();
Object.defineProperty(this,"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0});this._sprite=a}_makePointerEvent(a,d){return{type:a,originalEvent:d.event,point:d.point,simulated:d.simulated,native:d.native,target:this._sprite}}_onRenderer(a,d){this._sprite.set("interactive",!0);this._sprite._display.interactive=
!0;let h=this._rendererDisposers[a];if(void 0===h){const B=this._sprite._display.on(a,ca=>{d.call(this,ca)});h=this._rendererDisposers[a]=new jb(()=>{delete this._rendererDisposers[a];B.dispose()})}return h.increment()}_on(a,d,h,B,ca,ha){a=super._on(a,d,h,B,ca,ha);h=Ea.RENDERER_EVENTS[d];void 0!==h&&(a.disposer=new Za([a.disposer,this._onRenderer(d,h)]));return a}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(a,d){const h=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(a,
d),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(a,d)}finally{this._dispatchParents=h}}}Object.defineProperty(Ea,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(a){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",a))&&this.dispatch("click",this._makePointerEvent("click",a))},rightclick:function(a){this.isEnabled("rightclick")&&this.dispatch("rightclick",
this._makePointerEvent("rightclick",a))},middleclick:function(a){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",a))},dblclick:function(a){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",a))},pointerover:function(a){this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",a))},pointerout:function(a){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",a))},
pointerdown:function(a){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",a))},pointerup:function(a){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",a))},globalpointerup:function(a){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",a))},globalpointermove:function(a){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",
a))},wheel:function(a){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:a.event,point:a.point})}}});class za extends ta{constructor(){super(...arguments);Object.defineProperty(this,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}});Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}});Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0});
Object.defineProperty(this,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_downPoint",
{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_hoverDp",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this.setPrivateRaw("visible",!0);super._afterNew()}_markDirtyKey(a){super._markDirtyKey(a);
if("x"==a||"y"==a||"dx"==a||"dy"==a)this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition()}_markDirtyPrivateKey(a){super._markDirtyPrivateKey(a);"x"!=a&&"y"!=a||this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new Ea(this)}_processTemplateField(){let a;const d=this.get("templateField");if(d){var h=this.dataItem;h&&(h=h.dataContext)&&(a=h[d],a instanceof ia||!a||(a=ia.new(a)))}this._templateField!==
a&&(this._removeTemplateField(),(this._templateField=a)&&a._setObjectTemplate(this),this._applyTemplates())}_setDataItem(a){const d=this._dataItem;this._dataItem=a;this._processTemplateField();a!=d&&this.events.isEnabled("dataitemchanged")&&this.events.dispatch("dataitemchanged",{type:"dataitemchanged",target:this,oldDataItem:d,newDataItem:a})}set dataItem(a){this._setDataItem(a)}get dataItem(){if(this._dataItem)return this._dataItem;let a=this._parent;for(;a;){if(a._dataItem)return a._dataItem;a=
a._parent}}_addPercentageSizeChildren(){let a=this.parent;a&&(this.get("width")instanceof Ra||this.get("height")instanceof Ra?H(a._percentageSizeChildren,this):F(a._percentageSizeChildren,this))}_addPercentagePositionChildren(){let a=this.parent;a&&(this.get("x")instanceof Ra||this.get("y")instanceof Ra?H(a._percentagePositionChildren,this):F(a._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const a=this._localBounds;if(a){var d=this.get("centerX");
null!=d&&(this._display.pivot.x=a.left+ea(d,a.right-a.left));d=this.get("centerY");null!=d&&(this._display.pivot.y=a.top+ea(d,a.bottom-a.top))}}_beforeChanged(){super._beforeChanged();this._handleStates();if(this.isDirty("tooltip")){var a=this._prevSettings.tooltip;a&&a.dispose()}if(this.isDirty("layer")||this.isDirty("layerMargin"))this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer();if(this.isDirty("tooltipPosition")){if(a=this._tooltipMoveDp)a.dispose(),this._tooltipMoveDp=
void 0;if(a=this._tooltipPointerDp)a.dispose(),this._tooltipPointerDp=void 0;"pointer"==this.get("tooltipPosition")&&(this._tooltipPointerDp=new Za([this.events.on("pointerover",()=>{this._tooltipMoveDp=this.events.on("globalpointermove",d=>{this.showTooltip(d.point)})}),this.events.on("pointerout",()=>{const d=this._tooltipMoveDp;d&&(d.dispose(),this._tooltipMoveDp=void 0)})]))}}_handleStates(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),
this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}_changed(){super._changed();var a=this._display;const d=this.events;if(this.isDirty("draggable")){var h=this.get("draggable");
h?(this.set("interactive",!0),this._dragDp=new Za([d.on("pointerdown",B=>{this.dragStart(B)}),d.on("globalpointermove",B=>{this.dragMove(B)}),d.on("globalpointerup",B=>{this.dragStop(B)})])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0);a.cancelTouch=h?!0:!1}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){h=this.get("tooltipText");const B=this.get("tooltipHTML"),ca=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),
this._tooltipDp=void 0);if(h||B)"click"==ca?this._tooltipDp=new Za([d.on("click",()=>{this.setTimeout(()=>this.showTooltip(),10)}),n(document,"click",ha=>{this.hideTooltip()})]):"always"!=ca&&(this._tooltipDp=new Za([d.on("pointerover",()=>{this.showTooltip()}),d.on("pointerout",()=>{this.hideTooltip()})]))}if(this.isDirty("toggleKey")){let B=this.get("toggleKey");B&&"none"!=B?this._toggleDp=d.on("click",()=>{this._isDragging||this.set(B,!this.get(B))}):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=
void 0)}this.isDirty("opacity")&&(a.alpha=Math.max(0,this.get("opacity",1)));this.isDirty("rotation")&&(this.markDirtyBounds(),a.angle=this.get("rotation",0));this.isDirty("scale")&&(this.markDirtyBounds(),a.scale=this.get("scale",0));if(this.isDirty("centerX")||this.isDirty("centerY"))this.markDirtyBounds(),this.updatePivotPoint();if(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?a.visible=
!0:(a.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility();if(this.isDirty("width")||this.isDirty("height"))this.markDirtyBounds(),this._addPercentageSizeChildren(),(h=this.parent)&&(this.isDirty("width")&&this.get("width")instanceof Ra||this.isDirty("height")&&this.get("height")instanceof Ra)&&(h.markDirty(),h._prevWidth=0),this._sizeDirty=!0;if(this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||
this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))this.markDirtyBounds(),this._sizeDirty=!0;this._sizeDirty&&this._updateSize();this.isDirty("wheelable")&&((h=this.get("wheelable"))&&this.set("interactive",!0),a.wheelable=h?!0:!1);if(this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this);
this.isDirty("filter")&&(a.filter=this.get("filter"));this.isDirty("cursorOverStyle")&&(a.cursorOverStyle=this.get("cursorOverStyle"));this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new Za([d.on("focus",()=>{this.showTooltip()}),d.on("blur",()=>{this.hideTooltip()})]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0));this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility());
(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility();this.isDirty("exportable")&&(a.exportable=this.get("exportable"));this.isDirty("interactive")&&(a=this.events,this.get("interactive")?this._hoverDp=new Za([a.on("click",
B=>{Y(B.originalEvent)&&(this.getPrivate("touchHovering")||this.setTimeout(()=>{this._handleOver();(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip();this.setPrivateRaw("touchHovering",!0);this.events.dispatch("pointerover",{type:"pointerover",target:B.target,originalEvent:B.originalEvent,point:B.point,simulated:B.simulated})},10))}),a.on("globalpointerup",B=>{Y(B.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&
this.hideTooltip(),this.setPrivateRaw("touchHovering",!1),this.events.dispatch("pointerout",{type:"pointerout",target:B.target,originalEvent:B.originalEvent,point:B.point,simulated:B.simulated}));this._isDown&&this._handleUp(B)}),a.on("pointerover",()=>{this._handleOver()}),a.on("pointerout",()=>{this._handleOut()}),a.on("pointerdown",B=>{this._handleDown(B)})]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0)));this.isDirty("forceInactive")&&(this._display.inactive=
this.get("forceInactive",!1));"always"==this.get("showTooltipOn")&&this._display.visible&&this.showTooltip()}dragStart(a){this._dragEvent=a;this.events.stopParentDispatch()}dragStop(a){this._dragPoint=this._dragEvent=void 0;this.events.stopParentDispatch();this._isDragging&&(this._isDragging=!1,this.events.isEnabled("dragstop")&&this.events.dispatch("dragstop",{type:"dragstop",target:this,originalEvent:a.originalEvent,point:a.point,simulated:a.simulated}))}_handleOver(){this.isHidden()||(this.get("active")&&
this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):
(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(a){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),
this._downPoint=void 0,delete this._downPoints[a.originalEvent.pointerId||0],0==D(this._downPoints).length&&(this._isDown=!1))}_hasMoved(a){const d=this._downPoints[a.originalEvent.pointerId||0];if(d){const h=Math.abs(d.y-a.point.y);return 5<Math.abs(d.x-a.point.x)||5<h}return!1}_hasDown(){return 0<D(this._downPoints).length}_handleDown(a){const d=this.parent;d&&!this.get("draggable")&&d._handleDown(a);this.get("interactive")&&!this.isHidden()&&(this.states.lookup("down")&&this.states.applyAnimate("down"),
this._downPoint={x:a.point.x,y:a.point.y},this._isDown=!0,this._downPoints[a.originalEvent.pointerId||0]={x:a.point.x,y:a.point.y})}dragMove(a){var d=this._dragEvent;if(d){if(d.simulated&&!a.simulated)return!0;let B=0;for(var h=this.parent;null!=h;)B+=h.get("rotation",0),h=h.parent;h=a.point.x-d.point.x;let ca=a.point.y-d.point.y;const ha=this.events;d.simulated&&!this._isDragging&&(this._isDragging=!0,this._dragEvent=a,this._dragPoint={x:this.x(),y:this.y()},ha.isEnabled("dragstart")&&ha.dispatch("dragstart",
{type:"dragstart",target:this,originalEvent:a.originalEvent,point:a.point,simulated:a.simulated}));this._isDragging?(d=this._dragPoint,this.set("x",d.x+h*oa(B)+ca*ka(B)),this.set("y",d.y+ca*oa(B)-h*ka(B)),ha.isEnabled("dragged")&&ha.dispatch("dragged",{type:"dragged",target:this,originalEvent:a.originalEvent,point:a.point,simulated:a.simulated})):5<Math.hypot(h,ca)&&(this._isDragging=!0,this._dragEvent=a,this._dragPoint={x:this.x(),y:this.y()},ha.isEnabled("dragstart")&&ha.dispatch("dragstart",{type:"dragstart",
target:this,originalEvent:a.originalEvent,point:a.point,simulated:a.simulated}))}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let a=this.parent,d=0;for(;;)if(a)++d,a=a.parent;else return d}markDirtySize(){this._sizeDirty=!0;this.markDirty()}markDirtyBounds(){if(this.get("isMeasured")){var a=this._display;this._root._addDirtyBounds(this);a.isMeasured=!0;a.invalidateBounds();(a=this.parent)&&"absolute"!=this.get("position")&&(null==a.get("width")||null==a.get("height")||
a.get("layout"))&&a.markDirtyBounds();this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty();this.markDirtyLayer()}_updateBounds(){const a=this._adjustedLocalBounds;let d;this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),d=this._adjustedLocalBounds=
this._display.getAdjustedBounds(this._localBounds)):this._adjustedLocalBounds=this._localBounds=d={left:0,right:0,top:0,bottom:0};a&&a.left===d.left&&a.top===d.top&&a.right===d.right&&a.bottom===d.bottom||(this.events.isEnabled("boundschanged")&&this.events.dispatch("boundschanged",{type:"boundschanged",target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds()))}_fixMinBounds(a){var d=this.get("minWidth",this.getPrivate("minWidth")),h=this.get("minHeight",this.getPrivate("minHeight"));
K(d)&&a.right-a.left<d&&(a.right=a.left+d);K(h)&&a.bottom-a.top<h&&(a.bottom=a.top+h);d=this.getPrivate("width");h=this.getPrivate("height");K(d)&&(0<d?a.right=a.left+d:a.left=a.right+d);K(h)&&(0<h?a.bottom=a.top+h:a.top=a.bottom+h)}_removeParent(a){a&&(a.children.removeValue(this),F(a._percentageSizeChildren,this),F(a._percentagePositionChildren,this))}_clearDirty(){super._clearDirty();this._statesHandled=this._sizeDirty=!1}hover(){this.showTooltip();this._handleOver()}unhover(){this.hideTooltip();
this._handleOut()}showTooltip(a){const d=this.getTooltip();var h=this.get("tooltipText");const B=this.get("tooltipHTML");if((h||B)&&d){const ca=this.get("tooltipPosition"),ha=this.getPrivate("tooltipTarget",this);"fixed"!=ca&&a||(this._display._setMatrix(),a=this.toGlobal(ha._getTooltipPoint()));d.set("pointTo",a);d.set("tooltipTarget",ha);d.get("x")||d.set("x",a.x);d.get("y")||d.set("y",a.y);h&&d.label.set("text",h);B&&d.label.set("html",B);(h=this.dataItem)&&d.label._setDataItem(h);if("always"==
this.get("showTooltipOn")&&(0>a.x||a.x>this._root.width()||0>a.y||a.y>this._root.height()))this.hideTooltip();else return d.label.text.markDirtyText(),a=d.show(),this.setPrivateRaw("showingTooltip",!0),a}}hideTooltip(){var a=this.getTooltip();if(a&&a.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)){let d=a.get("keepTargetHover")&&0==a.get("stateAnimationDuration",0)?400:void 0;a=a.hide(d);this.setPrivateRaw("showingTooltip",!1);return a}}_getTooltipPoint(){const a=this._localBounds;if(a){let d=
0,h=0;this.get("isMeasured")?(d=a.left+ea(this.get("tooltipX",0),a.right-a.left),h=a.top+ea(this.get("tooltipY",0),a.bottom-a.top)):(d=ea(this.get("tooltipX",0),this.width()),h=ea(this.get("tooltipY",0),this.height()));return{x:d,y:h}}return{x:0,y:0}}getTooltip(){var a=this.get("tooltip");if(a)return a;if(a=this.parent)return a.getTooltip()}_updatePosition(){var a=this.parent,d=this.get("dx",0);let h=this.get("dy",0);var B=this.get("x");let ca=this.getPrivate("x"),ha=0,ma=0;const va=this.get("position");
B instanceof Ra&&(B=a?a.innerWidth()*B.value+a.get("paddingLeft",0):0);K(B)?ha=B+d:null!=ca?ha=ca:a&&"relative"==va&&(ha=a.get("paddingLeft",0)+d);d=this.get("y");B=this.getPrivate("y");d instanceof Ra&&(d=a?a.innerHeight()*d.value+a.get("paddingTop",0):0);K(d)?ma=d+h:null!=B?ma=B:a&&"relative"==va&&(ma=a.get("paddingTop",0)+h);a=this._display;if(a.x!=ha||a.y!=ma)a.invalidateBounds(),a.x=ha,a.y=ma,this.events.isEnabled("positionchanged")&&this.events.dispatch("positionchanged",{type:"positionchanged",
target:this});this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let a=this.get("x"),d=this.getPrivate("x");const h=this.parent;return h?a instanceof Ra?ea(a,h.innerWidth())+h.get("paddingLeft",0):K(a)?a:null!=d?d:h.get("paddingLeft",this._display.x):this._display.x}y(){let a=this.getPrivate("y");if(null!=a)return a;let d=this.get("y");const h=this.parent;return h?d instanceof Ra?ea(d,h.innerHeight())+h.get("paddingTop",0):K(d)?d:null!=a?a:h.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose();
this._display.dispose();this._removeTemplateField();this._removeParent(this.parent);this._root._removeFocusElement(this);const a=this.get("tooltip");a&&a.dispose();this.markDirty()}adjustedLocalBounds(){this._fixMinBounds(this._adjustedLocalBounds);return this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const a=this._adjustedLocalBounds,d=this.x(),h=this.y();return{left:a.left+d,right:a.right+d,top:a.top+h,bottom:a.bottom+h}}globalBounds(){var a=this.localBounds();const d=
this.toGlobal({x:a.left,y:a.top}),h=this.toGlobal({x:a.right,y:a.top}),B=this.toGlobal({x:a.right,y:a.bottom});a=this.toGlobal({x:a.left,y:a.bottom});return{left:Math.min(d.x,h.x,B.x,a.x),top:Math.min(d.y,h.y,B.y,a.y),right:Math.max(d.x,h.x,B.x,a.x),bottom:Math.max(d.y,h.y,B.y,a.y)}}_onShow(a){}_onHide(a){}appear(a,d){return r.__awaiter(this,void 0,void 0,function*(){yield this.hide(0);return d?new Promise((h,B)=>{this.setTimeout(()=>{h(this.show(a))},d)}):this.show(a)})}show(a){return r.__awaiter(this,
void 0,void 0,function*(){if(!this._isShowing){this._isHidden=!1;this._isShowing=!0;this._isHiding=!1;this.states.lookup("default").get("visible")&&this.set("visible",!0);this._onShow(a);const d=this.states.applyAnimate("default",a);yield Q(d);this._isShowing=!1}})}hide(a){return r.__awaiter(this,void 0,void 0,function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0;this._isShowing=!1;var d=this.states.lookup("hidden");d||(d=this.states.create("hidden",{opacity:0,visible:!1}));this._isHidden=
!0;this._onHide(a);d=this.states.applyAnimate("hidden",a);yield Q(d);this._isHiding=!1}})}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?!0:!1}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const a=
this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*a:a}width(){let a=this.get("width"),d=this.get("maxWidth",this.getPrivate("maxWidth")),h=this.get("minWidth",this.getPrivate("minWidth"));var B=this.getPrivate("width");let ca=0;K(B)?ca=B:null==a?this._adjustedLocalBounds&&(ca=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left):a instanceof Ra?ca=(B=this.parent)?B.innerWidth()*a.value:this._root.width()*a.value:K(a)&&(ca=a);K(h)&&(ca=Math.max(h,ca));K(d)&&(ca=Math.min(d,
ca));return ca}maxWidth(){var a=this.get("maxWidth",this.getPrivate("maxWidth"));if(K(a))return a;a=this.get("width");return K(a)?a:(a=this.parent)?a.innerWidth():this._root.width()}maxHeight(){var a=this.get("maxHeight",this.getPrivate("maxHeight"));if(K(a))return a;a=this.get("height");return K(a)?a:(a=this.parent)?a.innerHeight():this._root.height()}height(){let a=this.get("height"),d=this.get("maxHeight",this.getPrivate("maxHeight")),h=this.get("minHeight",this.getPrivate("minHeight"));var B=
this.getPrivate("height");let ca=0;K(B)?ca=B:null==a?this._adjustedLocalBounds&&(ca=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top):a instanceof Ra?ca=(B=this.parent)?B.innerHeight()*a.value:this._root.height()*a.value:K(a)&&(ca=a);K(h)&&(ca=Math.max(h,ca));K(d)&&(ca=Math.min(d,ca));return ca}_findStaticTemplate(a){return this._templateField&&a(this._templateField)?this._templateField:super._findStaticTemplate(a)}_walkParents(a){this._parent&&this._walkParent(a)}_walkParent(a){this._parent&&
this._parent._walkParent(a);a(this)}get parent(){return this._parent}_setParent(a,d=!1){const h=this._parent;a!==h&&(this.markDirtyBounds(),a.markDirty(),this._parent=a,d&&(this._removeParent(h),a&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",
this._root.durationFormatter)}toGlobal(a){return this._display.toGlobal(a)}toLocal(a){return this._display.toLocal(a)}_getDownPoint(){const a=this._getDownPointId();if(a)return this._downPoints[a]}_getDownPointId(){if(this._downPoints)return q(this._downPoints,(a,d)=>a>d?1:a<d?-1:0)[0]}toFront(){const a=this.parent;a&&a.children.moveValue(this,a.children.length-1)}toBack(){const a=this.parent;a&&a.children.moveValue(this,0)}}Object.defineProperty(za,"className",{enumerable:!0,configurable:!0,writable:!0,
value:"Sprite"});Object.defineProperty(za,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ta.classNames.concat([za.className])});class Fa extends ta{constructor(){super(...arguments);Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()});Object.defineProperty(this,"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()});Object.defineProperty(this,"_clear",{enumerable:!0,
configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged();if(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("color")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||
this.isDirty("fill")||this.isDirty("fillOpacity"))this._clear=!0}_changed(){super._changed();if(this._clear){const a=this.get("repetition",""),d=this.get("width",100),h=this.get("height",100),B=this.get("fill"),ca=this.get("fillOpacity",1);this._display.clear();this._backgroundDisplay.clear();B&&0<ca&&(this._backgroundDisplay.beginFill(B,ca),this._backgroundDisplay.drawRect(0,0,d,h),this._backgroundDisplay.endFill());this._display.angle=this.get("rotation",0);this._draw();this._pattern=this._root._renderer.createPattern(this._display,
this._backgroundDisplay,a,d,h)}}}Object.defineProperty(Fa,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"});Object.defineProperty(Fa,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ta.classNames.concat([Fa.className])});class xa extends Fa{constructor(){super(...arguments);Object.defineProperty(this,"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged();this._clear=!0;this.isDirty("src")&&this._load()}_draw(){super._draw();
const a=this._image;if(a){const h=this.get("width",100),B=this.get("height",100);var d=this.get("fit","image");let ca=0,ha=0;"pattern"==d?(ca=h,ha=B):(ca=a.width,ha=a.height,"image"==d&&(this.set("width",ca),this.set("height",ha)));let ma=d=0;this.get("centered",!0)&&(d=h/2-ca/2,ma=B/2-ha/2);this._display.image(a,ca,ha,d,ma)}}_load(){const a=this.get("src");if(a){const d=new Image;d.src=a;d.decode().then(()=>{this._image=d;this._draw();this.events.isEnabled("loaded")&&this.events.dispatch("loaded",
{type:"loaded",target:this})}).catch(h=>{})}}}Object.defineProperty(xa,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"});Object.defineProperty(xa,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Fa.classNames.concat([xa.className])});p.BlendMode=void 0;(function(a){a.ADD="lighter";a.COLOR="color";a.COLOR_BURN="color-burn";a.COLOR_DODGE="color-dodge";a.DARKEN="darken";a.DIFFERENCE="difference";a.DST_OVER="destination-over";a.EXCLUSION="exclusion";a.HARD_LIGHT=
"hard-light";a.HUE="hue";a.LIGHTEN="lighten";a.LUMINOSITY="luminosity";a.MULTIPLY="multiply";a.NORMAL="source-over";a.OVERLAY="overlay";a.SATURATION="saturation";a.SCREEN="screen";a.SOFT_LIGHT="soft-light";a.SRC_ATOP="source-atop";a.XOR="xor"})(p.BlendMode||(p.BlendMode={}));class Ma extends za{constructor(){super(...arguments);Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()});Object.defineProperty(this,"_clear",{enumerable:!0,
configurable:!0,writable:!0,value:!1})}_beforeChanged(){super._beforeChanged();(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds();if(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||
this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))this._clear=!0;this._display.crisp=this.get("crisp",!1);if(this.isDirty("fillGradient")){var a=this.get("fillGradient");a&&(this._display.isMeasured=!0,a=a.get("target"))&&(this._disposers.push(a.events.on("boundschanged",()=>{this._markDirtyKey("fill")})),
this._disposers.push(a.events.on("positionchanged",()=>{this._markDirtyKey("fill")})))}this.isDirty("strokeGradient")&&(a=this.get("strokeGradient"))&&(this._display.isMeasured=!0,a=a.get("target"))&&(this._disposers.push(a.events.on("boundschanged",()=>{this._markDirtyKey("stroke")})),this._disposers.push(a.events.on("positionchanged",()=>{this._markDirtyKey("stroke")})))}_changed(){super._changed();if(this._clear){this.markDirtyBounds();this.markDirtyLayer();this._display.clear();var a=this.get("strokeDasharray");
K(a)&&(a=.5>a?[0]:[a]);this._display.setLineDash(a);(a=this.get("strokeDashoffset"))&&this._display.setLineDashOffset(a);a=this.get("blendMode",p.BlendMode.NORMAL);this._display.blendMode=a;(a=this.get("draw"))&&a(this._display,this);a=this.get("svgPath");null!=a&&this._display.svgPath(a)}}_afterChanged(){super._afterChanged();if(this._clear){const ca=this.get("fill");var a=this.get("fillGradient"),d=this.get("fillPattern");const ha=this.get("fillOpacity"),ma=this.get("stroke");var h=this.get("strokeGradient"),
B=this.get("strokePattern");const va=this.get("shadowColor"),Ca=this.get("shadowBlur"),Ka=this.get("shadowOffsetX"),Ja=this.get("shadowOffsetY"),Ya=this.get("shadowOpacity");va&&(Ca||Ka||Ja)&&this._display.shadow(va,Ca,Ka,Ja,Ya);if(d){if(a=!1,!ca||d.get("fill")&&!d.get("fillInherited")||(d.set("fill",ca),d.set("fillInherited",!0),a=!0),!ma||d.get("color")&&!d.get("colorInherited")||(d.set("color",ma),d.set("colorInherited",!0),a=!0),a&&d._changed(),a=d.pattern)if(this._display.beginFill(a,ha),this._display.endFill(),
d instanceof xa)d.events.once("loaded",()=>{this._clear=!0;this.markDirty()})}else if(a){if(ca&&(d=a.get("stops",[]),d.length&&t(d,La=>{La.color&&!La.colorInherited||!ca||(La.color=ca,La.colorInherited=!0);if(null==La.opacity||La.opacityInherited)La.opacity=ha,La.opacityInherited=!0})),d=a.getFill(this))this._display.beginFill(d,ha),this._display.endFill()}else ca&&(this._display.beginFill(ca,ha),this._display.endFill());if(ma||h||B){const La=this.get("strokeOpacity");d=this.get("strokeWidth",1);
this.get("nonScalingStroke")&&(d/=this.get("scale",1));this.get("crisp")&&(d/=this._root._renderer.resolution);a=this.get("lineJoin");if(B){if(h=!1,!ma||B.get("color")&&!B.get("colorInherited")||(B.set("color",ma),B.set("colorInherited",!0),h=!0),h&&B._changed(),h=B.pattern)if(this._display.lineStyle(d,h,La,a),this._display.endStroke(),B instanceof xa)B.events.once("loaded",()=>{this._clear=!0;this.markDirty()})}else if(h){if(B=h.get("stops",[]),B.length&&t(B,ab=>{ab.color&&!ab.colorInherited||!ma||
(ab.color=ma,ab.colorInherited=!0);if(null==ab.opacity||ab.opacityInherited)ab.opacity=La,ab.opacityInherited=!0}),B=h.getFill(this))this._display.lineStyle(d,B,La,a),this._display.endStroke()}else ma&&(this._display.lineStyle(d,ma,La,a),this._display.endStroke())}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}}Object.defineProperty(Ma,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"});Object.defineProperty(Ma,"classNames",{enumerable:!0,configurable:!0,
writable:!0,value:za.classNames.concat([Ma.className])});class Ga extends Ma{_beforeChanged(){super._beforeChanged();if(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))this._clear=!0}_changed(){super._changed();this._clear&&!this.get("draw")&&this._draw()}_draw(){this._display.drawRect(0,0,this.width(),this.height())}_updateSize(){this.markDirty();this._clear=!0}}Object.defineProperty(Ga,"className",{enumerable:!0,configurable:!0,writable:!0,
value:"Rectangle"});Object.defineProperty(Ga,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ma.classNames.concat([Ga.className])});class Pa extends ta{}Object.defineProperty(Pa,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"});Object.defineProperty(Pa,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ta.classNames.concat([Pa.className])});class Qa extends Pa{updateContainer(a){let d=a.get("paddingLeft",0),h=a.innerWidth(),B=0;ya(a,ha=>{if(ha.isVisible()&&
"relative"==ha.get("position")){let ma=ha.get("width");if(ma instanceof Ra){B+=ma.value;let va=h*ma.value,Ca=ha.get("minWidth",ha.getPrivate("minWidth",-Infinity));Ca>va&&(h-=Ca,B-=ma.value);ha=ha.get("maxWidth",ha.getPrivate("maxWidth",Infinity));va>ha&&(h-=ha,B-=ma.value)}else K(ma)||(ma=ha.width()),h-=ma+ha.get("marginLeft",0)+ha.get("marginRight",0)}});if(0>=h||Infinity==h)h=.1;ya(a,ha=>{if(ha.isVisible()&&"relative"==ha.get("position")){var ma=ha.get("width");if(ma instanceof Ra){ma=h*ma.value/
B-ha.get("marginLeft",0)-ha.get("marginRight",0);let va=ha.get("minWidth",ha.getPrivate("minWidth",-Infinity)),Ca=ha.get("maxWidth",ha.getPrivate("maxWidth",Infinity));ma=Math.min(Math.max(va,ma),Ca);ha.setPrivate("width",ma)}}});let ca=d;ya(a,ha=>{if("relative"==ha.get("position"))if(ha.isVisible()){var ma=ha.adjustedLocalBounds(),va=ha.get("marginLeft",0);let Ca=ha.get("marginRight",0),Ka=ha.get("maxWidth"),Ja=ma.left;ma=ma.right;Ka&&ma-Ja>Ka&&(ma=Ja+Ka);va=ca+va-Ja;ha.setPrivate("x",va);ca=va+
ma+Ca}else ha.setPrivate("x",void 0)})}}Object.defineProperty(Qa,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"});Object.defineProperty(Qa,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Pa.classNames.concat([Qa.className])});class Oa extends Pa{updateContainer(a){let d=a.get("paddingTop",0),h=a.innerHeight(),B=0;ya(a,ha=>{if(ha.isVisible()&&"relative"==ha.get("position")){let ma=ha.get("height");if(ma instanceof Ra){B+=ma.value;let va=h*ma.value,Ca=
ha.get("minHeight",ha.getPrivate("minHeight",-Infinity));Ca>va&&(h-=Ca,B-=ma.value);ha=ha.get("maxHeight",ha.getPrivate("maxHeight",Infinity));va>ha&&(h-=ha,B-=ma.value)}else K(ma)||(ma=ha.height()),h-=ma+ha.get("marginTop",0)+ha.get("marginBottom",0)}});if(0>=h||Infinity==h)h=.1;ya(a,ha=>{if(ha.isVisible()&&"relative"==ha.get("position")){var ma=ha.get("height");if(ma instanceof Ra){ma=h*ma.value/B-ha.get("marginTop",0)-ha.get("marginBottom",0);let va=ha.get("minHeight",ha.getPrivate("minHeight",
-Infinity)),Ca=ha.get("maxHeight",ha.getPrivate("maxHeight",Infinity));ma=Math.min(Math.max(va,ma),Ca);ha.setPrivate("height",ma)}}});let ca=d;ya(a,ha=>{if("relative"==ha.get("position"))if(ha.isVisible()){var ma=ha.adjustedLocalBounds(),va=ha.get("marginTop",0);let Ka=ma.top;ma=ma.bottom;var Ca=ha.get("maxHeight");Ca&&ma-Ka>Ca&&(ma=Ka+Ca);Ca=ha.get("marginBottom",0);va=ca+va-Ka;ha.setPrivate("y",va);ca=va+ma+Ca}else ha.setPrivate("y",void 0)})}}Object.defineProperty(Oa,"className",{enumerable:!0,
configurable:!0,writable:!0,value:"VerticalLayout"});Object.defineProperty(Oa,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Pa.classNames.concat([Oa.className])});class Ua extends Pa{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE);super._afterNew()}updateContainer(a){let d=a.get("paddingLeft",0);var h=a.get("paddingRight",0);let B=a.get("paddingTop",0),ca=h=a.maxWidth()-d-h,ha=1;ya(a,La=>{La.get("visible")&&La.getPrivate("visible")&&!La.get("forceHidden")&&"absolute"!=
La.get("position")&&(La=La.width(),La<ca&&(ca=La),La>ha&&(ha=La))});ca=N(ca,1,h);ha=N(ha,1,h);let ma=1;ma=this.get("fixedWidthGrid")?h/ha:h/ca;ma=Math.max(1,Math.floor(ma));ma=Math.min(this.get("maxColumns",Number.MAX_VALUE),ma);let va=this.getColumnWidths(a,ma,ha,h),Ca=B,Ka=0,Ja=0;ma=va.length;let Ya=d;ya(a,La=>{if("relative"==La.get("position")&&La.isVisible()){const ab=La.get("marginTop",0),qb=La.get("marginBottom",0);let nb=La.adjustedLocalBounds(),bb=La.get("marginLeft",0),cb=La.get("marginRight",
0),gb=Ca+ab-nb.top;La.setPrivate("x",Ya+bb-nb.left);La.setPrivate("y",gb);Ya+=va[Ka]+cb;Ja=Math.max(Ja,La.height()+ab+qb);Ka++;Ka>=ma&&(Ka=0,Ya=d,Ca+=Ja)}})}getColumnWidths(a,d,h,B){let ca=0,ha=[],ma=0;ya(a,va=>{let Ca=va.adjustedLocalBounds();"absolute"!=va.get("position")&&va.isVisible()&&(this.get("fixedWidthGrid")?ha[ma]=h:ha[ma]=Math.max(ha[ma]|0,Ca.right-Ca.left+va.get("marginLeft",0)+va.get("marginRight",0)),ma<a.children.length-1&&(ma++,ma==d&&(ma=0)))});t(ha,va=>{ca+=va});return ca>B?2<d?
(--d,this.getColumnWidths(a,d,h,B)):[B]:ha}}Object.defineProperty(Ua,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"});Object.defineProperty(Ua,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Pa.classNames.concat([Ua.className])});class Wa{static escape(a){return a.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/''/g,
this.prefix+"5")}static unescape(a){return a.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(a){return a.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/''/g,"'")}static chunk(a,d=!1,h=!1){let B=[];a=this.escape(a);a=d?a.split("'"):[a];for(d=0;d<a.length;d++){var ca=
a[d];if(""!==ca)if(0===d%2){ca=ca.replace(/\]\[/g,"]__\u00a7\u00a7\u00a7__[");ca=ca.replace(/\[\]/g,"[ ]");ca=ca.split(/[\[\]]+/);for(var ha=0;ha<ca.length;ha++){var ma=this.cleanUp(this.unescape(ca[ha]));"__\u00a7\u00a7\u00a7__"!==ma&&""!==ma&&(0===ha%2?B.push({type:"value",text:ma}):B.push({type:h?"value":"format",text:"["+ma+"]"}))}}else for(ca=ca.split(/[\[\]]+/),ha=0;ha<ca.length;ha++)ma=this.cleanUp(this.unescape(ca[ha])),""!==ma&&(0===ha%2?B.push({type:"text",text:ma}):this.isImage(ma)?B.push({type:"image",
text:"["+ma+"]"}):B.push({type:"format",text:"["+ma+"]"}))}return B}static isImage(a){return a.match(/img[ ]?:/)?!0:!1}static getTextStyle(a){let d={};if(""==a||"[ ]"==a)return{};var h=a.match(/('[^']*')|("[^"]*")/gi);if(h)for(var B=0;B<h.length;B++)a=a.replace(h[B],h[B].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));a=a.match(/([\w\-]*:[\s]?[^;\s\]]*)|(#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!a)return{};for(h=0;h<a.length;h++)a[h].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i)?
d.fontWeight=a[h]:a[h].match(/^(underline|line-through)$/i)?d.textDecoration=a[h]:"/"!=a[h]&&(a[h].match(/:/)?(B=a[h].replace("+"," ").split(/:[ ]*/),d[B[0]]=B[1]):d.fill=Va.fromString(a[h]));return d}}Object.defineProperty(Wa,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});class Sa extends za{constructor(){super(...arguments);Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()});Object.defineProperty(this,
"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()});Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:new pb(this)});Object.defineProperty(this,"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,
value:0});Object.defineProperty(this,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew();this._display.addChild(this._childrenDisplay)}_dispose(){f(this.allChildren(),a=>{a.dispose()});this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this);super._dispose()}_changed(){super._changed();this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1));this.isDirty("layout")&&(this._prevHeight=this._prevWidth=0,this.markDirtyBounds(),this._prevSettings.layout&&
this.children.each(a=>{a.removePrivate("x");a.removePrivate("y")}));(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each(a=>{a.markDirtyPosition()});if(this.isDirty("maskContent")){const a=this._childrenDisplay;let d=this._contentMask;this.get("maskContent")?d||(this._contentMask=d=Ga.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),a.addChildAt(d._display,0),a.mask=d._display):d&&(a.removeChild(d._display),
a.mask=null,d.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize();t(this._percentageSizeChildren,a=>{a._updateSize()});t(this._percentagePositionChildren,a=>{a.markDirtyPosition();a._updateSize()});this.updateBackground()}updateBackground(){var a=this.get("background"),d=this._localBounds;if(d&&!this.isHidden()){var h=d.left;let ca=d.top,ha=d.right-h,ma=d.bottom-ca;d=this.get("maxWidth");var B=this.get("maxHeight");B&&ma>B&&(ma=B);d&&ha>d&&(ha=d);B=this.width();d=this.height();
a&&(a.setAll({width:ha,height:ma,x:h,y:ca}),this._display.interactive&&(a._display.interactive=!0));(a=this._contentMask)&&a.setAll({width:B+1,height:d+1});if(a=this.get("verticalScrollbar"))a.set("height",d),a.set("x",B-a.width()-a.get("marginRight",0)),a.set("end",a.get("start",0)+d/this._contentHeight),(h=a.get("background"))&&h.setAll({width:a.width(),height:d}),h=!0,this._contentHeight<=d&&(h=!1),a.setPrivate("visible",h)}}_applyThemes(){return super._applyThemes()?(this.eachChildren(a=>{a._applyThemes()}),
!0):!1}_applyState(a){super._applyState(a);this.get("setStateOnChildren")&&this.eachChildren(d=>{d.states.apply(a)})}_applyStateAnimated(a,d){super._applyStateAnimated(a,d);this.get("setStateOnChildren")&&this.eachChildren(h=>{h.states.applyAnimate(a,d)})}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){let a=this.get("width"),d=this.get("height"),h=this.getPrivate("width"),
B=this.getPrivate("height"),ca={left:0,top:0,right:this.width(),bottom:this.height()};var ha=this.get("layout");let ma=!1,va=!1;if(ha instanceof Qa||ha instanceof Ua)ma=!0;ha instanceof Oa&&(va=!0);if(null==a&&null==h||null==d&&null==B||this.get("verticalScrollbar")){let Ca=ha=Number.MAX_VALUE,Ka=-ha,Ja=ha,Ya=-ha;const La=this.get("paddingLeft",0),ab=this.get("paddingTop",0),qb=this.get("paddingRight",0),nb=this.get("paddingBottom",0);this.children.each(bb=>{if("absolute"!=bb.get("position")&&bb.get("isMeasured")){var cb=
bb.adjustedLocalBounds(),gb=bb.x();let tb=bb.y(),rb=gb+cb.left;gb+=cb.right;let sb=tb+cb.top;cb=tb+cb.bottom;ma&&(rb-=bb.get("marginLeft",0),gb+=bb.get("marginRight",0));va&&(sb-=bb.get("marginTop",0),cb+=bb.get("marginBottom",0));rb<Ca&&(Ca=rb);gb>Ka&&(Ka=gb);sb<Ja&&(Ja=sb);cb>Ya&&(Ya=cb)}});Ca==ha&&(Ca=0);Ka==-ha&&(Ka=0);Ja==ha&&(Ja=0);Ya==-ha&&(Ya=0);ca.left=Ca-La;ca.top=Ja-ab;ca.right=Ka+qb;ca.bottom=Ya+nb}this._contentWidth=ca.right-ca.left;this._contentHeight=ca.bottom-ca.top;K(a)&&(ca.left=
0,ca.right=a);K(h)&&(ca.left=0,ca.right=h);K(d)&&(ca.top=0,ca.bottom=d);K(B)&&(ca.top=0,ca.bottom=B);this._localBounds=ca}_updateBounds(){const a=this.get("layout");a&&a.updateContainer(this);super._updateBounds();this.updateBackground()}markDirty(){super.markDirty();this._root._addDirtyParent(this)}_prepareChildren(){const a=this.innerWidth(),d=this.innerHeight();if(a!=this._prevWidth||d!=this._prevHeight){let h=this.get("layout"),B=!1,ca=!1;if(h){if(h instanceof Qa||h instanceof Ua)B=!0;h instanceof
Oa&&(ca=!0)}t(this._percentageSizeChildren,ha=>{if(!B){var ma=ha.get("width");ma instanceof Ra&&ha.setPrivate("width",ma.value*a)}ca||(ma=ha.get("height"),ma instanceof Ra&&ha.setPrivate("height",ma.value*d))});t(this._percentagePositionChildren,ha=>{ha.markDirtyPosition();ha.markDirtyBounds()});this._prevWidth=a;this._prevHeight=d;this._sizeDirty=!0;this.updateBackground()}this._handleStates()}_updateChildren(){if(this.isDirty("html")){var a=this.get("html");a&&""!==a?this._root._setHTMLContent(this,
Aa(this,this.get("html",""))):this._root._removeHTMLContent(this);this._root._positionHTMLElement(this)}if(this.isDirty("verticalScrollbar")){const h=this.get("verticalScrollbar");if(h)h._setParent(this),h.children.removeValue(h.startGrip),h.children.removeValue(h.endGrip),this.set("maskContent",!0),this.set("paddingRight",h.width()+h.get("marginRight",0)+h.get("marginLeft",0)),(a=this.get("background"))||(a=this.set("background",Ga.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),
this._vsbd0=this.events.on("wheel",B=>{B=B.originalEvent;if(U(B,this)){B.preventDefault();B=B.deltaY/5E3;var ca=h.get("start",0),ha=h.get("end",1);0>=ca+B&&(B=-ca);1<=ha+B&&(B=1-ha);0<=ca+B&&1>=ha+B&&(h.set("start",ca+B),h.set("end",ha+B))}}),this._disposers.push(this._vsbd0),this._vsbd1=h.events.on("rangechanged",()=>{let B=this._contentHeight;const ca=this._childrenDisplay,ha=this._contentMask;ca.y=-h.get("start")*B;ca.markDirtyLayer();ha&&(ha._display.y=-ca.y,ca.mask=ha._display)}),this._disposers.push(this._vsbd1),
this._display.addChild(h._display);else if(a=this._prevSettings.verticalScrollbar)this._display.removeChild(a._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose(),this._childrenDisplay.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0)}this.isDirty("background")&&((a=this._prevSettings.background)&&this._display.removeChild(a._display),a=this.get("background"),a instanceof za&&(a.set("isMeasured",!1),a._setParent(this),this._display.addChildAt(a._display,
0)));if(this.isDirty("mask")){a=this.get("mask");var d=this._prevSettings.mask;d&&(this._display.removeChild(d._display),d!=a&&d.dispose());a&&((d=a.parent)&&d.children.removeValue(a),a._setParent(this),this._display.addChildAt(a._display,0),this._childrenDisplay.mask=a._display)}}_processTemplateField(){super._processTemplateField();this.children.each(a=>{a._processTemplateField()})}walkChildren(a){this.children.each(d=>{d instanceof Sa&&d.walkChildren(a);a(d)})}eachChildren(a){var d=this.get("background");
d&&a(d);(d=this.get("verticalScrollbar"))&&a(d);(d=this.get("mask"))&&a(d);this.children.values.forEach(h=>{a(h)})}allChildren(){const a=[];this.eachChildren(d=>{a.push(d)});return a}_setDataItem(a){const d=a!==this._dataItem;super._setDataItem(a);(a=this.get("html",""))&&""!==a&&d&&this._root._setHTMLContent(this,Aa(this,a))}}Object.defineProperty(Sa,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"});Object.defineProperty(Sa,"classNames",{enumerable:!0,configurable:!0,writable:!0,
value:za.classNames.concat([Sa.className])});class Ha extends za{constructor(){super(...arguments);Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()});Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText("",this.textStyle)});Object.defineProperty(this,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:"textAlign fontFamily fontSize fontStyle fontWeight fontStyle fontVariant textDecoration shadowColor shadowBlur shadowOffsetX shadowOffsetY shadowOpacity lineHeight baselineRatio direction textBaseline oversizedBehavior breakWords ellipsis minScale".split(" ")});
Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){this.get("text")?super._updateBounds():this._adjustedLocalBounds={left:0,right:0,top:0,bottom:0}}_changed(){super._changed();this._display.clear();let a=this.textStyle;if(this.isDirty("opacity")){var d=this.get("opacity",1);this._display.alpha=d}if(this.isDirty("text")||this.isDirty("populateText"))this._display.text=this._getText(),this.markDirtyBounds(),"tooltip"==this.get("role")&&
this._root.updateTooltip(this);this.isPrivateDirty("tooltipElement")&&this.getPrivate("tooltipElement")&&this._disposers.push(new Xa(()=>{this._root._removeTooltipElement(this)}));this.isDirty("width")&&(a.wordWrapWidth=this.width(),this.markDirtyBounds());this.isDirty("oversizedBehavior")&&(a.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds());this.isDirty("breakWords")&&(a.breakWords=this.get("breakWords",!1),this.markDirtyBounds());this.isDirty("ellipsis")&&(a.ellipsis=
this.get("ellipsis"),this.markDirtyBounds());this.isDirty("ignoreFormatting")&&(a.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds());this.isDirty("minScale")&&(a.minScale=this.get("minScale",0),this.markDirtyBounds());this.isDirty("fill")&&(d=this.get("fill"))&&(a.fill=d);this.isDirty("fillOpacity")&&(d=this.get("fillOpacity",1))&&(a.fillOpacity=d);if(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))a.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds();
if(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))a.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds();t(this._textStyles,h=>{this._dirty[h]&&(a[h]=this.get(h),this.markDirtyBounds())});a.fontSize=this.get("fontSize");a.fontFamily=this.get("fontFamily");this._display.style=a;this.isDirty("role")&&"tooltip"==this.get("role")&&this._root.updateTooltip(this)}_getText(){const a=this.get("text","");return this.get("populateText")?Aa(this,a):a}markDirtyText(){this._display.text=
this._getText();"tooltip"==this.get("role")&&this._root.updateTooltip(this);this.markDirtyBounds();this.markDirty()}_setDataItem(a){super._setDataItem(a);this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}}
Object.defineProperty(Ha,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"});Object.defineProperty(Ha,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:za.classNames.concat([Ha.className])});class Ta extends Sa{constructor(){super(...arguments);Object.defineProperty(this,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:"text fill fillOpacity textAlign fontFamily fontSize fontStyle fontWeight fontStyle fontVariant textDecoration shadowColor shadowBlur shadowOffsetX shadowOffsetY shadowOpacity lineHeight baselineRatio direction textBaseline oversizedBehavior breakWords ellipsis minScale populateText role ignoreFormatting".split(" ")})}get text(){return this._text}_afterNew(){super._afterNew();
this._makeText();t(this._textKeys,a=>{const d=this.get(a);void 0!=d&&this._text.set(a,d)});""!==this.get("html","")&&this._text.set("text","");this.onPrivate("maxWidth",()=>{this._setMaxDimentions()});this.onPrivate("maxHeight",()=>{this._setMaxDimentions()})}_makeText(){this._text=this.children.push(Ha.new(this._root,{}))}_updateChildren(){super._updateChildren();t(this._textKeys,a=>{this._text.set(a,this.get(a))});this.isDirty("maxWidth")&&this._setMaxDimentions();this.isDirty("maxHeight")&&this._setMaxDimentions();
this.isDirty("rotation")&&this._setMaxDimentions();""!==this.get("html","")?this._text.set("text",""):this._text.set("text",this.get("text"));if(this.isDirty("textAlign")||this.isDirty("width")){const a=this.get("textAlign");let d;if(null!=this.get("width"))d="right"==a?lb:"center"==a?mb:0;else if("left"==a||"start"==a)d=this.get("paddingLeft");else if("right"==a||"end"==a)d=-this.get("paddingRight");this.text.set("x",d)}}_setMaxDimentions(){var a=this.get("rotation");a=90==a||270==a||-90==a;var d=
this.get("maxWidth",this.getPrivate("maxWidth",Infinity));K(d)?this.text.set(a?"maxHeight":"maxWidth",d-this.get("paddingLeft",0)-this.get("paddingRight",0)):this.text.set(a?"maxHeight":"maxWidth",void 0);d=this.get("maxHeight",this.getPrivate("maxHeight",Infinity));K(d)?this.text.set(a?"maxWidth":"maxHeight",d-this.get("paddingTop",0)-this.get("paddingBottom",0)):this.text.set(a?"maxWidth":"maxHeight",void 0)}_setDataItem(a){super._setDataItem(a);this._markDirtyKey("text");this.text.get("populateText")&&
this.text.markDirtyText()}getText(){return this._text._getText()}}Object.defineProperty(Ta,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"});Object.defineProperty(Ta,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Sa.classNames.concat([Ta.className])});class Na{constructor(a,d){Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}});this._root=
a;if(!d)throw Error("You cannot use `new Class()`, instead use `Class.new()`");}static new(a){a=new this(a,!0);a.setupDefaultRules();return a}setupDefaultRules(){}_lookupRules(a){return this._rules[a]}ruleRaw(a,d=[]){let h=this._rules[a];h||(h=this._rules[a]=[]);d.sort(qa);const {index:B,found:ca}=G(h,ha=>{const ma=qa(ha.tags.length,d.length);return 0===ma?ua(ha.tags,d,qa):ma});if(ca)return h[B].template;a=ia.new({});h.splice(B,0,{tags:d,template:a});return a}rule(a,d=[]){return this.ruleRaw(a,d)}}
p.ArrayDisposer=ib;p.Color=Va;p.Container=Sa;p.CounterDisposer=jb;p.DEGREES=fb;p.Disposer=Xa;p.DisposerClass=$a;p.Entity=ta;p.EventDispatcher=db;p.Graphics=Ma;p.GridLayout=Ua;p.HorizontalLayout=Qa;p.Label=Ta;p.List=hb;p.ListAutoDispose=kb;p.ListTemplate=ob;p.MultiDisposer=Za;p.PLACEHOLDER="__\u00a7\u00a7\u00a7__";p.PLACEHOLDER2="__\u00a7\u00a7\u00a7\u00a7__";p.Percent=Ra;p.RADIANS=eb;p.Rectangle=Ga;p.Settings=pa;p.Template=ia;p.Text=Ha;p.TextFormatter=Wa;p.Theme=Na;p.VerticalLayout=Oa;p.addEventListener=
n;p.addLicense=function(a){A.licenses.push(a)};p.blur=function(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let a=document.createElement("button");a.style.position="fixed";a.style.top="0px";a.style.left="-10000px";document.body.appendChild(a);a.focus();a.blur();document.body.removeChild(a)}};p.capitalizeFirst=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};p.ceil=function(a,d){if(!K(d)||0>=d)return Math.ceil(a);
d=Math.pow(10,d);return Math.ceil(a*d)/d};p.cleanFormat=function(a){return a.replace(/\/(date|number|duration)$/i,"")};p.color=function(a){return Va.fromAny(a)};p.compare=qa;p.compareNumber=function(a,d){return a===d?0:a<d?-1:1};p.copy=function(a){return Object.assign({},a)};p.copy$1=function(a){const d=a.length,h=Array(d);for(let B=0;B<d;++B)h[B]=a[B];return h};p.cos=oa;p.cubic=ja;p.decimalPlaces=function(a){return(a=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(a[1]?a[1].length:
0)-(a[2]?+a[2]:0)):0};p.each=t;p.each$1=m;p.eachContinue=function(a,d){for(let h in a)if({}.hasOwnProperty.call(a,h)&&!d(h,a[h]))break};p.eachContinue$1=function(a,d){const h=a.length;for(let B=0;B<h&&d(a[B],B);++B);};p.escapeForRgex=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")};p.find=y;p.fitToRange=N;p.focus=function(a){a&&a.focus()};p.get12Hours=function(a,d){12<a?a-=12:0===a&&(a=12);return null!=d?a+(d-1):a};p.getArcBounds=function(a,d,h,B,ca){let ha=Number.MAX_VALUE,ma=
Number.MAX_VALUE,va=-Number.MAX_VALUE,Ca=-Number.MAX_VALUE,Ka=[];Ka.push(sa(ca,h));Ka.push(sa(ca,B));var Ja=Math.min(90*Math.floor(h/90),90*Math.floor(B/90));let Ya=Math.max(90*Math.ceil(h/90),90*Math.ceil(B/90));for(;Ja<=Ya;Ja+=90)Ja>=h&&Ja<=B&&Ka.push(sa(ca,Ja));for(h=0;h<Ka.length;h++)B=Ka[h],B.x<ha&&(ha=B.x),B.y<ma&&(ma=B.y),B.x>va&&(va=B.x),B.y>Ca&&(Ca=B.y);return{left:a+ha,top:d+ma,right:a+va,bottom:d+Ca}};p.getDayFromWeek=function(a,d,h=1,B=!1){let ca=new Date(d,0,4,0,0,0,0);B&&ca.setUTCFullYear(d);
return 7*a+h-((ca.getDay()||7)+3)};p.getEventTarget=function(a){return a.composedPath?(a=a.composedPath(),0===a.length?null:a[0]):a.target};p.getMonthWeek=function(a,d=!1){const h=O(new Date(a.getFullYear(),a.getMonth(),1),d);a=O(a,d);1==a&&(a=53);return a-h+1};p.getRendererEvent=function(a){if(!E("pointerevents"))if(E("touchevents"))switch(a){case "pointerover":return"touchstart";case "pointerout":return"touchend";case "pointerdown":return"touchstart";case "pointermove":return"touchmove";case "pointerup":return"touchend";
case "click":return"click";case "dblclick":return"dblclick"}else if(E("mouseevents"))switch(a){case "pointerover":return"mouseover";case "pointerout":return"mouseout";case "pointerdown":return"mousedown";case "pointermove":return"mousemove";case "pointerup":return"mouseup";case "click":return"click";case "dblclick":return"dblclick"}return a};p.getSafeResolution=function(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document?1:void 0};p.getStyle=function(a,d){return a.style[d]};p.getTimeZone=
function(a,d=!1,h=!1,B=!1){if(B)return d?"Coordinated Universal Time":"UTC";B=a.toLocaleString("UTC");a=a.toLocaleString("UTC",{timeZoneName:d?"long":"short"}).substr(B.length);!1===h&&(a=a.replace(/ (standard|daylight|summer|winter) /i," "));return a};p.getTimezoneOffset=function(a){const d=new Date(Date.UTC(2012,0,1,0,0,0,0)),h=new Date(d.toLocaleString("en-US",{timeZone:"UTC"}));return((new Date(d.toLocaleString("en-US",{timeZone:a}))).getTime()-h.getTime())/6E4*-1};p.getWeek=O;p.getWeekYear=function(a,
d){a=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()));d=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-d);return(new Date(Date.UTC(a.getUTCFullYear(),0,1))).getFullYear()};p.getYearDay=function(a,d){d=new Date(a.getFullYear(),0,0);a=a.getTime()-d.getTime()+6E4*(d.getTimezoneOffset()-a.getTimezoneOffset());return Math.floor(a/864E5)};p.indexOf=J;p.isLocalEvent=U;p.isNaN=v;p.isNumber=K;p.isObject=R;p.isString=L;p.isTouchEvent=Y;p.keepIf=function(a,d){let h=a.length;for(;0<h;)--h,d(a[h])||
a.splice(h,1)};p.keys=D;p.map=function(a,d){const h=a.length,B=Array(h);for(let ca=0;ca<h;++ca)B[ca]=d(a[ca],ca);return B};p.mergeBounds=function(a){const d=a.length;if(0<d){let h=a[0],B=h.left,ca=h.top,ha=h.right,ma=h.bottom;if(1<d)for(let va=1;va<d;va++)h=a[va],B=Math.min(h.left,B),ha=Math.max(h.right,ha),ca=Math.min(h.top,ca),ma=Math.max(h.bottom,ma);return{left:B,right:ha,top:ca,bottom:ma}}return{left:0,right:0,top:0,bottom:0}};p.mergeTags=function(a,d){a||(a=[]);return[...a,...d].filter((h,B,
ca)=>ca.indexOf(h)===B)};p.normalizeAngle=function(a){a%=360;0>a&&(a+=360);return a};p.numberToString=function(a){if(v(a))return"NaN";if(Infinity===a)return"Infinity";if(-Infinity===a)return"-Infinity";if(0===a&&-Infinity===1/a)return"-0";let d=0>a;a=Math.abs(a);var h=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+a),B=h[1];let ca=h[2]||"";void 0===h[3]?B=""===ca?B:B+"."+ca:(h=+h[3],1>a?B="0."+Array(h-1+1).join("0")+B+ca:(a=h-ca.length,B=0===a?B+ca:0>a?B+ca.slice(0,a)+"."+ca.slice(a):B+ca+
Array(a+1).join("0")));return d?"-"+B:B};p.onZoom=function(a){return n(window,"resize",d=>{a()})};p.out=function(a){return function(d){return 1-a(1-d)}};p.p100=lb;p.p50=mb;p.padString=aa;p.percent=Z;p.percentInterpolate=k;p.populateString=Aa;p.pushOne=H;p.registry=A;p.relativeToValue=ea;p.remove=w;p.removeElement=function(a){a.parentNode&&a.parentNode.removeChild(a)};p.removeFirst=F;p.round=function(a,d,h){if(!K(d)||0>=d)return d=Math.round(a),h&&.5==d-a&&d--,d;h=Math.pow(10,d);return Math.round(a*
h)/h};p.sameBounds=function(a,d){return d&&a.left==d.left&&a.right==d.right&&a.top==d.top&&a.bottom==d.bottom?!0:!1};p.setInteractive=function(a,d){a.style.pointerEvents=d?"auto":"none"};p.setStyle=function(a,d,h){a.style[d]=h};p.sin=ka;p.stripTags=function(a){return a?a.replace(/<[^>]*>/g,""):a};p.supports=E;p.toNumber=e;p.trim=fa;p.visualSettings="fill fillOpacity stroke strokeWidth strokeOpacity fillPattern strokePattern fillGradient strokeGradient strokeDasharray strokeDashoffset".split(" ")})},
"esri/chunks/Tooltip":function(){define(["exports","./Theme"],function(p,r){class v extends r.Graphics{_beforeChanged(){super._beforeChanged();if(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))this._clear=!0}_changed(){super._changed();if(this._clear){this.markDirtyBounds();var x=this.width();let K=this.height();if(0<x&&0<K){let R=this.get("cornerRadius",
8);R=r.fitToRange(R,0,Math.min(x/2,K/2));let J=this.get("pointerX",0),C=this.get("pointerY",0),t=this.get("pointerBaseWidth",15)/2,f=(J-0)*(K-0)-(C-0)*(x-0),w=(J-0)*(0-K)-(C-K)*(x-0);const F=this._display;F.moveTo(R,0);if(0<f&&0<w){var L=Math.round(r.fitToRange(J,R+t,x-t-R));C=r.fitToRange(C,-Infinity,0);F.lineTo(L-t,0);F.lineTo(J,C);F.lineTo(L+t,0)}F.lineTo(x-R,0);F.arcTo(x,0,x,R,R);0<f&&0>w&&(L=Math.round(r.fitToRange(C,R+t,K-t-R)),J=r.fitToRange(J,x,Infinity),F.lineTo(x,R),F.lineTo(x,Math.max(L-
t,R)),F.lineTo(J,C),F.lineTo(x,L+t));F.lineTo(x,K-R);F.arcTo(x,K,x-R,K,R);0>f&&0>w&&(L=Math.round(r.fitToRange(J,R+t,x-t-R)),C=r.fitToRange(C,K,Infinity),F.lineTo(x-R,K),F.lineTo(L+t,K),F.lineTo(J,C),F.lineTo(L-t,K));F.lineTo(R,K);F.arcTo(0,K,0,K-R,R);0>f&&0<w&&(x=Math.round(r.fitToRange(C,R+t,K-R-t)),J=r.fitToRange(J,-Infinity,0),F.lineTo(0,K-R),F.lineTo(0,x+t),F.lineTo(J,C),F.lineTo(0,Math.max(x-t,R)));F.lineTo(0,R);F.arcTo(0,0,R,0,R);F.closePath()}}}}Object.defineProperty(v,"className",{enumerable:!0,
configurable:!0,writable:!0,value:"PointedRectangle"});Object.defineProperty(v,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:r.Graphics.classNames.concat([v.className])});class e extends r.Container{constructor(x,L,K,R=[]){super(x,L,K,R);Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,
value:void 0});Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_keepHoverDp",
{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=r.mergeTags(this._settings.themeTags,["tooltip"]);super._afterNew();this.set("background",v.new(this._root,{themeTags:["tooltip","background"]}));this._label=this.children.push(r.Label.new(this._root,{}));this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()}));this._disposers.push(this.on("bounds",
()=>{this._updateBackground()}));this._updateTextColor();this._root.tooltipContainer.children.push(this);this.hide(0);this._disposers.push(this.label.onPrivate("htmlElement",x=>{x&&(r.addEventListener(x,"pointerover",L=>{this._htmlContentHovered=!0}),r.addEventListener(x,"pointerout",L=>{this._htmlContentHovered=!1}))}));this._root._tooltips.push(this)}get label(){return this._label}dispose(){super.dispose();r.remove(this._root._tooltips,this)}_updateChildren(){super._updateChildren();(this.isDirty("pointerOrientation")||
this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width");null!=this.get("labelText")&&this.label.set("text",this.get("labelText"));null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML"))}_changed(){super._changed();(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground();this.isDirty("tooltipTarget")&&this.updateBackgroundColor();if(this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const x=
this.get("background");this._keepHoverDp=new r.MultiDisposer([x.events.on("pointerover",L=>{if(L=this.get("tooltipTarget"))L.parent&&L.parent.getPrivate("tooltipTarget")==L&&(L=L.parent),L.hover()}),x.events.on("pointerout",L=>{if(L=this.get("tooltipTarget"))L.parent&&L.parent.getPrivate("tooltipTarget")==L&&(L=L.parent),this._htmlContentHovered||L.unhover()})])}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow();this.updateBackgroundColor()}updateBackgroundColor(){let x=
this.get("tooltipTarget");const L=this.get("background");let K,R;x&&L&&(K=x.get("fill"),R=x.get("stroke"),null==K&&(K=R),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=K&&L.set("fill",K),this._fillDp=x.on("fill",J=>{null!=J&&(L.set("fill",J),this._updateTextColor(J))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=K&&L.set("stroke",K),this._strokeDp=x.on("fill",J=>{null!=J&&L.set("stroke",J)}),this._disposers.push(this._strokeDp)),
this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=K&&this.label.set("fill",K),this._labelDp=x.on("fill",J=>{null!=J&&this.label.set("fill",J)}),this._disposers.push(this._labelDp)));this._updateTextColor(K)}_updateTextColor(x){this.get("autoTextColor")&&(null==x&&(x=this.get("background").get("fill")),null==x&&(x=this._root.interfaceColors.get("background")),x instanceof r.Color&&this.label.set("fill",r.Color.alternative(x,this._root.interfaceColors.get("alternativeText"),
this._root.interfaceColors.get("text"))))}_setDataItem(x){super._setDataItem(x);this.label._setDataItem(x)}_updateBackground(){super.updateBackground();var x=this._root.container;if(x){var L=.5,K=.5,R=this.get("centerX");R instanceof r.Percent&&(L=R.value);R=this.get("centerY");R instanceof r.Percent&&(K=R.value);var J=x.width(),C=x.height(),t=this.parent;R=x=0;t&&(x=t.x(),R=t.y(),t=t.get("layerMargin"))&&(x+=t.left||0,R+=t.top||0,J+=(t.left||0)+(t.right||0),C+=(t.top||0)+(t.bottom||0));t=this.get("bounds",
{left:-x,top:-R,right:J-x,bottom:C-R});this._updateBounds();x=this.width();R=this.height();0===x&&(x=this._w);0===R&&(R=this._h);let F=this.get("pointTo",{x:J/2,y:C/2});J=F.x;C=F.y;let H=this.get("pointerOrientation"),u=this.get("background"),y=0,G=0,z=0;u instanceof v&&(y=u.get("pointerLength",0),z=G=u.get("strokeWidth",0)/2,u.set("width",x),u.set("height",R));var f=0,w=0;f=t.right-t.left;w=t.bottom-t.top;"horizontal"==H||"left"==H||"right"==H?(G=0,"horizontal"==H?J>t.left+f/2?(J-=x*(1-L)+y,z*=-1):
J+=x*L+y:"left"==H?J+=x*(1-L)+y:(J-=x*L+y,z*=-1)):(z=0,"vertical"==H?C>t.top+R/2+y?C-=R*(1-K)+y:(C+=R*K+y,G*=-1):"down"==H?C-=R*(1-K)+y:(C+=R*K+y,G*=-1));J=r.fitToRange(J,t.left+x*L,t.left+f-x*(1-L))+z;C=r.fitToRange(C,t.top+R*K,t.top+w-R*(1-K))-G;f=F.x-J+x*L+z;w=F.y-C+R*K-G;this._fx=J;this._fy=C;L=this.get("animationDuration",0);0<L&&this.get("visible")&&.1<this.get("opacity")?(K=this.get("animationEasing"),this.animate({key:"x",to:J,duration:L,easing:K}),this.animate({key:"y",to:C,duration:L,easing:K})):
(this.set("x",J),this.set("y",C));u instanceof v&&(u.set("pointerX",f),u.set("pointerY",w));0<x&&(this._w=x);0<R&&(this._h=R)}}}Object.defineProperty(e,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"});Object.defineProperty(e,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:r.Container.classNames.concat([e.className])});p.Tooltip=e})},"esri/chunks/DefaultTheme":function(){define(["exports","./Theme"],function(p,r){function v(x,L,K,R){x.set(L,K.get(R));K.on(R,J=>
{x.set(L,J)})}class e extends r.Theme{setupDefaultRules(){super.setupDefaultRules();var x=this._root.language;const L=this._root.interfaceColors;var K=this._root.horizontalLayout,R=this._root.verticalLayout,J=this.rule.bind(this);J("InterfaceColors").setAll({stroke:r.Color.fromHex(15066597),fill:r.Color.fromHex(15987699),primaryButton:r.Color.fromHex(6788316),primaryButtonHover:r.Color.fromHex(6779356),primaryButtonDown:r.Color.fromHex(6872182),primaryButtonActive:r.Color.fromHex(6872182),primaryButtonText:r.Color.fromHex(16777215),
primaryButtonStroke:r.Color.fromHex(16777215),secondaryButton:r.Color.fromHex(14277081),secondaryButtonHover:r.Color.fromHex(10724259),secondaryButtonDown:r.Color.fromHex(9276813),secondaryButtonActive:r.Color.fromHex(15132390),secondaryButtonText:r.Color.fromHex(0),secondaryButtonStroke:r.Color.fromHex(16777215),grid:r.Color.fromHex(0),background:r.Color.fromHex(16777215),alternativeBackground:r.Color.fromHex(0),text:r.Color.fromHex(0),alternativeText:r.Color.fromHex(16777215),disabled:r.Color.fromHex(11382189),
positive:r.Color.fromHex(5288704),negative:r.Color.fromHex(11730944)});const C=J("ColorSet");C.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[r.Color.fromHex(6797276)],step:1,reuse:!1,startIndex:0});C.setPrivate("currentStep",0);C.setPrivate("currentPass",0);J("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:r.out(r.cubic)});J("Component").setAll({interpolationDuration:0,interpolationEasing:r.out(r.cubic)});J("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,
position:"relative",tooltipX:r.p50,tooltipY:r.p50,tooltipPosition:"fixed",isMeasured:!0});J("Sprite").states.create("default",{visible:!0,opacity:1});J("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1});J("Graphics").setAll({strokeWidth:1});J("Chart").setAll({width:r.p100,height:r.p100,interactiveChildren:!1});J("Sprite",["horizontal","center"]).setAll({centerX:r.p50,x:r.p50});J("Sprite",["vertical","center"]).setAll({centerY:r.p50,y:r.p50});J("Container",["horizontal","layout"]).setAll({layout:K});
J("Container",["vertical","layout"]).setAll({layout:R});J("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1});J("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49});J("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0});J("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45});J("LinearGradient").setAll({rotation:90});J("Legend").setAll({fillField:"fill",
strokeField:"stroke",nameField:"name",layout:r.GridLayout.new(this._root,{}),layer:30,clickTarget:"itemContainer"});J("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:K,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:x.translate("Press ENTER to toggle"),role:"checkbox"});R=J("Rectangle",["legend","item","background"]);R.setAll({fillOpacity:0});v(R,"fill",L,"background");J("Container",["legend",
"marker"]).setAll({setStateOnChildren:!0,centerY:r.p50,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18});J("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:r.p100,height:r.p100,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});R=J("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});v(R,"fill",L,"disabled");v(R,"stroke",L,"disabled");J("Label",["legend","label"]).setAll({centerY:r.p50,marginLeft:5,paddingRight:0,
paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0});R=J("Label",["legend","label"]).states.create("disabled",{});v(R,"fill",L,"disabled");J("Label",["legend","value","label"]).setAll({centerY:r.p50,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:r.p100,populateText:!0});R=J("Label",["legend","value","label"]).states.create("disabled",{});v(R,"fill",L,"disabled");J("HeatLegend").setAll({stepCount:1});J("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,
cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0});J("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:r.p100,width:15});J("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:r.p100,height:15});J("HeatLegend",["vertical"]).setAll({height:r.p100});J("HeatLegend",["horizontal"]).setAll({width:r.p100});J("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});J("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,
paddingTop:5,paddingBottom:5});R=J("Label");R.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1});v(R,"fill",L,"text");J("RadialLabel").setAll({textType:"regular",centerY:r.p50,centerX:r.p50,inside:!1,radius:0,baseRadius:r.p100,orientation:"auto",textAlign:"center"});J("RoundedRectangle").setAll({cornerRadiusTL:8,
cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8});J("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8});J("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});R=J("Tick");R.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0});v(R,"stroke",L,"grid");J("Bullet").setAll({locationX:.5,locationY:.5});J("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,
paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:r.p50,centerY:r.p50,animationEasing:r.out(r.cubic),exportable:!1});J("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:r.Color.fromHex(16777215)});R=J("Label",["tooltip"]);R.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0});v(R,"fill",L,"alternativeText");J("Button").setAll({paddingTop:8,paddingBottom:8,
paddingLeft:10,paddingRight:10,interactive:!0,layout:K,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0});J("Button").states.create("hover",{});J("Button").states.create("down",{stateAnimationDuration:0});J("Button").states.create("active",{});K=J("RoundedRectangle",["button","background"]);v(K,"fill",L,"primaryButton");v(K,"stroke",L,"primaryButtonStroke");K=J("RoundedRectangle",["button","background"]).states.create("hover",{});v(K,"fill",L,"primaryButtonHover");K=J("RoundedRectangle",
["button","background"]).states.create("down",{stateAnimationDuration:0});v(K,"fill",L,"primaryButtonDown");K=J("RoundedRectangle",["button","background"]).states.create("active",{});v(K,"fill",L,"primaryButtonActive");K=J("Graphics",["button","icon"]);v(K,"stroke",L,"primaryButtonText");K=J("Label",["button"]);v(K,"fill",L,"primaryButtonText");J("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:r.p100,role:"button",ariaLabel:x.translate("Zoom Out"),
layer:30});K=J("RoundedRectangle",["background","button","zoom"]);K.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40});v(K,"fill",L,"primaryButton");K=J("RoundedRectangle",["background","button","zoom"]).states.create("hover",{});v(K,"fill",L,"primaryButtonHover");K=J("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0});v(K,"fill",L,"primaryButtonDown");K=J("Graphics",["icon","button","zoom"]);K.setAll({crisp:!0,strokeOpacity:.7,
draw:t=>{t.moveTo(0,0);t.lineTo(12,0)}});v(K,"stroke",L,"primaryButtonText");J("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:r.p50,centerY:r.p50,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:x.translate("Use up and down arrows to move selection")});K=J("RoundedRectangle",["background","resize","button"]);K.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40});v(K,"fill",L,
"secondaryButton");v(K,"stroke",L,"secondaryButtonStroke");K=J("RoundedRectangle",["background","resize","button"]).states.create("hover",{});v(K,"fill",L,"secondaryButtonHover");K=J("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0});v(K,"fill",L,"secondaryButtonDown");K=J("Graphics",["resize","button","icon"]);K.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:t=>{t.moveTo(0,.5);t.lineTo(0,12.5);t.moveTo(4,.5);t.lineTo(4,12.5)}});v(K,"stroke",
L,"secondaryButtonText");J("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"});J("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"});J("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:x.translate("Play"),toggleKey:"active"});K=J("RoundedRectangle",["play","background"]);K.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100});v(K,"fill",L,"primaryButton");
K=J("Graphics",["play","icon"]);K.setAll({stateAnimationDuration:0,dx:1,draw:t=>{t.moveTo(0,-5);t.lineTo(8,0);t.lineTo(0,5);t.lineTo(0,-5)}});v(K,"fill",L,"primaryButtonText");J("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0});J("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:t=>{t.moveTo(-4,-5);t.lineTo(-1,-5);t.lineTo(-1,5);t.lineTo(-4,5);t.lineTo(-4,-5);t.moveTo(4,-5);t.lineTo(1,-5);t.lineTo(1,5);t.lineTo(4,5);t.lineTo(4,-5)}});J("Button",
["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:x.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});K=J("RoundedRectangle",["switch","background"]);K.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100});v(K,"fill",L,"primaryButton");K=J("Circle",["switch","icon"]);K.setAll({radius:8,centerY:0,centerX:0,dx:0});v(K,"fill",L,"primaryButtonText");J("Graphics",["switch","icon"]).states.create("active",
{dx:16});J("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:r.out(r.cubic)});J("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:r.p100});J("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:r.p100});this.rule("Button",["scrollbar"]).setAll({exportable:!1});K=J("RoundedRectangle",["scrollbar","main","background"]);K.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8});v(K,"fill",L,"fill");
K=J("RoundedRectangle",["scrollbar","thumb"]);K.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0});v(K,"fill",L,"secondaryButton");K=J("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{});v(K,"fill",L,"secondaryButtonHover");K=J("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0});v(K,"fill",L,"secondaryButtonDown");J("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:r.p50,width:r.p100,centerX:r.p50,ariaLabel:x.translate("Use up and down arrows to move selection")});
J("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:r.p50,centerY:r.p50,height:r.p100,ariaLabel:x.translate("Use left and right arrows to move selection")});x=J("PointedRectangle",["axis","tooltip","background"]);x.setAll({cornerRadius:0});v(x,"fill",L,"alternativeBackground");J("Label",["axis","tooltip"]).setAll({role:void 0});J("Label",["axis","tooltip","y"]).setAll({textAlign:"right"});J("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"});J("Label",["axis","tooltip",
"x"]).setAll({textAlign:"center"});J("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"});J("Star").setAll({spikes:5,innerRadius:5,radius:10});J("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7});J("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3});J("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"});J("SpriteResizer").setAll({rotationStep:10});J("Container",["resizer","grip"]).states.create("hover",
{});x=J("RoundedRectangle",["resizer","grip"]);x.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12});v(x,"fill",L,"background");v(x,"stroke",L,"alternativeBackground");x=J("RoundedRectangle",["resizer","grip","outline"]);x.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20});x.states.create("hover",{fillOpacity:.3});v(x,"fill",L,"alternativeBackground");J("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});
J("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});J=J("Rectangle",["resizer","rectangle"]);J.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1});v(J,"stroke",L,"alternativeBackground")}}p.DefaultTheme=e;p.setColor=v})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/RelationshipContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H,u,y,G,z,ba,Z,D,q,m,n){e=function(E){function Y(ea){var aa=E.call(this,ea)||this;aa._abortController=null;aa.expressionInfo=null;aa.graphic=null;aa.contentElement=null;aa.contentElementViewModel=null;aa.interceptor=null;aa.view=null;aa._cancelQuery=()=>{const {_abortController:fa}=p._assertThisInitialized(aa);fa&&fa.abort();aa._abortController=null};aa._createVM=()=>{var fa=aa.contentElement?.type;aa.contentElementViewModel?.destroy();fa="fields"===fa?new q:"media"===
fa?new m:"text"===fa?new D:null;aa._set("contentElementViewModel",fa)};aa._compile=async()=>{aa._cancelQuery();const fa=new AbortController;aa._abortController=fa;await aa._compileExpression();aa._abortController===fa&&(aa._abortController=null)};aa._compileThrottled=K.throttle(aa._compile,1,p._assertThisInitialized(aa));aa._compileExpression=async()=>{const {expressionInfo:fa,graphic:O,interceptor:da,spatialReference:la,map:l,view:P,_abortController:W}=p._assertThisInitialized(aa);if(fa&&O&&la&&
l){var Q=await n.loadArcadeUtils();if(W===aa._abortController)if((Q=await n.createCompiledExpression({arcadeUtils:Q,expressionInfo:fa,graphic:O,interceptor:da,map:l,spatialReference:la,view:P}))&&"esri.arcade.Dictionary"===Q.declaredClass){Q=await Q.castAsJsonAsync(W?.signal);var X=Q?.type;Q="media"===X?G.fromJSON(Q):"text"===X?ba.fromJSON(Q):"fields"===X?y.fromJSON(Q):null;aa._set("contentElement",Q)}else aa._set("contentElement",null)}else aa._set("contentElement",null)};aa.handles.add([L.watch(()=>
[aa.expressionInfo,aa.graphic,aa.map,aa.spatialReference,aa.view],()=>aa._compileThrottled(),L.initial),L.watch(()=>[aa.contentElement],()=>aa._createVM(),L.initial)]);return aa}p._inherits(Y,E);var U=Y.prototype;U.initialize=function(){this.addHandles(this._compileThrottled)};U.destroy=function(){this._cancelQuery();this.contentElementViewModel?.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};p._createClass(Y,[{key:"spatialReference",get:function(){return this.view?.spatialReference??
null},set:function(ea){this._override("spatialReference",ea)}},{key:"state",get:function(){const {_abortController:ea,contentElement:aa,contentElementViewModel:fa}=this;return ea?"loading":aa||fa?"ready":"disabled"}},{key:"map",get:function(){return this.view?.map??null},set:function(ea){this._override("map",ea)}}]);return Y}(x.HandleOwnerMixin(e));r.__decorate([R.property()],e.prototype,"_abortController",void 0);r.__decorate([R.property({type:Z})],e.prototype,"expressionInfo",void 0);r.__decorate([R.property({type:v})],
e.prototype,"graphic",void 0);r.__decorate([R.property({readOnly:!0})],e.prototype,"contentElement",void 0);r.__decorate([R.property({readOnly:!0})],e.prototype,"contentElementViewModel",void 0);r.__decorate([R.property()],e.prototype,"interceptor",void 0);r.__decorate([R.property()],e.prototype,"spatialReference",null);r.__decorate([R.property({readOnly:!0})],e.prototype,"state",null);r.__decorate([R.property()],e.prototype,"map",null);r.__decorate([R.property()],e.prototype,"view",void 0);return e=
r.__decorate([f.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],e)})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(p,r,v,e,x,L){function K(H){return`<ul class="esri-widget__list">${H.map(u=>`<li>${"string"===typeof u?L.applyTextFormattingHTML(L.htmlEntities(u)):u}</li>`).join("")}</ul>`}function R(H){return`<table class="esri-widget__table">${H.keys().map(u=>
{var y=H.field(u);y="string"===typeof y?L.applyTextFormattingHTML(L.htmlEntities(y)):y;return`<tr><th>${u}</th><td>${y}</td></tr>`}).join("")}</table>`}function J({aggregatedFeatures:H,arcadeUtils:u,featureSetVars:y,context:G,viewInfo:z,map:ba,graphic:Z,interceptor:D}){y.forEach(q=>{q=q.toLowerCase();var m=z.sr;const n={map:ba,spatialReference:m,interceptor:D};"$map"===q&&(G.vars[q]=u.convertMapToFeatureSetCollection(n));"$layer"===q&&(G.vars[q]=u.convertFeatureLayerToFeatureSet({layer:Z.sourceLayer,
spatialReference:m,interceptor:D}));"$datastore"===q&&(G.vars[q]=u.convertServiceUrlToWorkspace({url:Z.sourceLayer.url,spatialReference:m,interceptor:D}));if("$aggregatedfeatures"===q){m=Z.layer;const {fields:E,objectIdField:Y,geometryType:U,spatialReference:ea,displayField:aa}=m;m=new x({fields:E,objectIdField:Y,geometryType:U,spatialReference:ea,displayField:aa,...("feature"===m.type?{templates:m.templates,typeIdField:m.typeIdField,types:m.types}:null),source:H});G.vars[q]=u.convertFeatureLayerToFeatureSet({layer:m,
spatialReference:ea,interceptor:D})}})}function C(){return new Promise((H,u)=>p(["../../../support/arcadeUtils"],H,u))}async function t({graphic:H,view:u}){const {isAggregate:y,layer:G}=H;if(!y||!G||"2d"!==u?.type)return[];u=await u.whenLayerView(G);if(!("createQuery"in u&&"queryFeatures"in u))return[];const z=u.createQuery();H=H.getObjectId();z.aggregateIds=null!=H?[H]:[];({features:H}=await u.queryFeatures(z));return H}async function f({expressionInfo:H,arcadeUtils:u,interceptor:y,spatialReference:G,
map:z,graphic:ba,view:Z}){if(!H||!H.expression)return null;const D=u.createSyntaxTree(H.expression),q=w.filter(n=>u.hasVariable(D,n));[Z]=await Promise.all([t({graphic:ba,view:Z}),u.loadScriptDependencies(D,!0,q)]);const m=u.getViewInfo({spatialReference:G});G=u.createExecContext(ba,m);G.interceptor=y;G.useAsync=!0;J({aggregatedFeatures:Z,arcadeUtils:u,featureSetVars:q,context:G,viewInfo:m,map:z,graphic:ba,interceptor:y});y=u.createFunction(D,G);return u.executeAsyncFunction(y,G).catch(n=>F.error("arcade-execution-error",
{error:n,graphic:ba,expressionInfo:H}))}const w=["$datastore","$map","$layer","$aggregatedfeatures"],F=v.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");r.createCompiledExpression=f;r.createCompiledExpressions=async function({expressionInfos:H,spatialReference:u,graphic:y,interceptor:G,map:z,view:ba}){if(!H||!H.length)return{};const Z=await C(),D={};for(const q of H)D[`expression/${q.name}`]=f({expressionInfo:q,arcadeUtils:Z,interceptor:G,spatialReference:u,map:z,graphic:y,view:ba});
H=await e.eachAlways(D);u={};for(const q in H)y=H[q].value,y="string"===typeof y?L.applyTextFormattingHTML(L.htmlEntities(y)):Array.isArray(y)?K(y):"esri.arcade.Dictionary"===y?.declaredClass?R(y):y,u[q]=y;return u};r.loadArcadeUtils=C;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureRelationship":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureRelationship/FeatureRelationshipViewModel ./support/FeatureElementInfo ../support/componentsUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../intl/substitute".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H,u,y,G,z,ba){const Z={title:!0,description:!0};e=function(D){function q(n,E){var Y=D.call(this,n,E)||this;Y._featureElementInfo=null;Y._relatedFeatureIntersectionObserverNode=null;Y._relatedFeatureIntersectionObserver=new IntersectionObserver(([U])=>{U?.isIntersecting&&Y._increaseFeaturePage()},{root:window.document});Y.headingLevel=2;Y.viewModel=new F;Y.messages=null;Y.messagesCommon=null;Y.visibleElements={...Z};Y._increaseFeaturePage=()=>{const {state:U,showAllEnabled:ea,
relatedFeatures:aa,featuresPerPage:fa,featurePage:O}=Y.viewModel;"ready"===U&&ea&&aa.length>=fa*O&&Y.viewModel.featurePage++};return Y}r._inherits(q,D);var m=q.prototype;m.initialize=function(){this._featureElementInfo=new H;this.addHandles([K.watch(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),K.initial),K.watch(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),
K.on(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])};m.loadDependencies=function(){return u.loadCalciteComponents({icon:()=>new Promise((n,E)=>p(["../../chunks/calcite-icon"],n,E)),list:()=>new Promise((n,E)=>p(["../../chunks/calcite-list"],n,E)),"list-item":()=>new Promise((n,E)=>p(["../../chunks/calcite-list-item"],n,E)),notice:()=>new Promise((n,E)=>p(["../../chunks/calcite-notice"],n,E))})};m.destroy=function(){this._unobserveRelatedFeatureObserver();
this._featureElementInfo=x.destroyMaybe(this._featureElementInfo)};m.castVisibleElements=function(n){return{...Z,...n}};m.renderStickyLoading=function(){return"querying"===this.viewModel.state?z.tsx("div",{key:"sticky-loader",class:"esri-feature__sticky-loading-container"},this.renderLoadingIcon()):null};m.renderLoadingIcon=function(){return z.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")})};m.renderLoading=function(){return z.tsx("div",
{key:"loading-container",class:"esri-feature__loading-container"},this.renderLoadingIcon())};m.renderShowAllIconNode=function(){return z.tsx("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})};m.renderChevronIconNode=function(){const n=y.isRTL(this.container)?"chevron-left":"chevron-right";return z.tsx("calcite-icon",{scale:"s",icon:n,slot:"content-end"})};m.renderRelatedFeature=function(n){const {itemDescriptionFieldName:E}=this.viewModel,Y=n.title;n.description=E&&n.formattedAttributes?.global[E];
return z.tsx("calcite-list-item",{class:this.classes("esri-feature-relationship__list-item",{["esri-feature-relationship__list-item--hidden"]:"loading"===n.state}),key:n.uid,label:Y,description:n.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:n})},this.renderChevronIconNode())};m.renderShowAllListItem=function(){return this.displayShowAllButton?z.tsx("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,
onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null};m.renderNoRelatedFeaturesMessage=function(){return z.tsx("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},z.tsx("div",{slot:"message"},this.messages?.noRelatedFeatures))};m.renderFeatureObserver=function(){return z.tsx("div",{key:"feature-observer",class:"esri-feature__feature-observer",bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})};
m.renderList=function(){const {relatedFeatureViewModels:n}=this.viewModel;return z.tsx("calcite-list",null,n.toArray().map(E=>this.renderRelatedFeature(E)),this.renderShowAllListItem())};m.renderRelatedFeatures=function(){const {displayListItems:n}=this,{state:E}=this.viewModel;return z.tsx("div",{key:"list-container",class:this.classes("esri-feature-relationship__list",{["esri-feature-relationship__list--querying"]:"querying"===E})},n?this.renderList():"ready"===E?this.renderNoRelatedFeaturesMessage():
null,this.renderStickyLoading(),this.renderFeatureObserver())};m.renderRelationshipNotFound=function(){return z.tsx("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},z.tsx("div",{slot:"message"},this.messages?.relationshipNotFound))};m.render=function(){const {state:n}=this.viewModel;return z.tsx("div",{class:this.classes("esri-feature-relationship","esri-widget")},this._featureElementInfo?.render(),"loading"===n?this.renderLoading():
"disabled"===n?this.renderRelationshipNotFound():this.renderRelatedFeatures())};m._setupRelatedFeatureViewModels=function(){const {relatedFeatureViewModels:n}=this.viewModel;this.removeHandles("related-feature-viewmodels");n?.forEach(E=>{this.addHandles(K.watch(()=>[E.title,E.state],()=>this.scheduleRender(),K.initial),"related-feature-viewmodels")});this.scheduleRender()};m._setupFeatureElementInfo=function(){const {headingLevel:n,visibleElements:E}=this,Y=E.description&&this.description,U=E.title&&
this.title;this._featureElementInfo?.set({description:Y,title:U,headingLevel:n})};m._handleRelatedFeatureObserverChange=async function(){this._unobserveRelatedFeatureObserver();const {state:n,showAllEnabled:E}=this.viewModel;await L.after(0);this._relatedFeatureIntersectionObserverNode&&"ready"===n&&E&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)};m._relatedFeatureIntersectionObserverCreated=function(n){this._relatedFeatureIntersectionObserverNode=
n};m._unobserveRelatedFeatureObserver=function(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)};r._createClass(q,[{key:"displayShowAllButton",get:function(){const {showAllEnabled:n,featureCount:E,displayCount:Y,state:U}=this.viewModel;return!n&&!!E&&"ready"===U&&(E>Y||0===Y)}},{key:"displayListItems",get:function(){return this.displayShowAllButton||0<this.viewModel.relatedFeatureViewModels.length}},{key:"description",
get:function(){return this.viewModel.description},set:function(n){this.viewModel.description=n}},{key:"featureCountDescription",get:function(){const {messages:n}=this,{featureCount:E}=this.viewModel;return ba.substitute(n?.numberRecords,{number:E})}},{key:"title",get:function(){return this.viewModel.title},set:function(n){this.viewModel.title=n}}]);return q}(w);v.__decorate([R.property()],e.prototype,"_relatedFeatureIntersectionObserverNode",void 0);v.__decorate([R.property({readOnly:!0})],e.prototype,
"displayShowAllButton",null);v.__decorate([R.property({readOnly:!0})],e.prototype,"displayListItems",null);v.__decorate([R.property()],e.prototype,"description",null);v.__decorate([R.property({readOnly:!0})],e.prototype,"featureCountDescription",null);v.__decorate([R.property()],e.prototype,"headingLevel",void 0);v.__decorate([R.property()],e.prototype,"title",null);v.__decorate([R.property({type:F})],e.prototype,"viewModel",void 0);v.__decorate([R.property(),G.messageBundle("esri/widgets/Feature/t9n/Feature")],
e.prototype,"messages",void 0);v.__decorate([R.property(),G.messageBundle("esri/t9n/common")],e.prototype,"messagesCommon",void 0);v.__decorate([R.property()],e.prototype,"visibleElements",void 0);v.__decorate([J.cast("visibleElements")],e.prototype,"castVisibleElements",null);return e=v.__decorate([f.subclass("esri.widgets.Feature.FeatureRelationship")],e)})},"esri/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/arrayUtils ../../../core/Clonable ../../../core/Collection ../../../core/HandleOwner ../../../core/Identifiable ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../rest/support/RelationshipQuery ../support/featureUtils ../../FeatureForm/featureFormUtils".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H,u,y,G){e=function(z){function ba(D){var q=z.call(this,D)||this;q._loaded=!1;q._queryAbortController=null;q._queryPageAbortController=null;q._queryFeatureCountAbortController=null;q.featuresPerPage=10;q.description=null;q.graphic=null;q.layer=null;q.map=null;q.orderByFields=null;q.featureCount=0;q.relationshipId=null;q.showAllEnabled=!1;q.title=null;q._cancelQuery=()=>{const {_queryAbortController:m}=p._assertThisInitialized(q);m&&m.abort();q._queryAbortController=
null};q._cancelQueryFeatureCount=()=>{const {_queryFeatureCountAbortController:m}=p._assertThisInitialized(q);m&&m.abort();q._queryFeatureCountAbortController=null};q._cancelQueryPage=()=>{const {_queryPageAbortController:m}=p._assertThisInitialized(q);m&&m.abort();q._queryPageAbortController=null};q._queryController=async()=>{q._cancelQuery();const m=new AbortController;q._queryAbortController=m;await C.ignoreAbortErrors(q._query());q._queryAbortController===m&&(q._queryAbortController=null)};q._queryFeatureCountController=
async()=>{q._loaded=!1;q._cancelQueryFeatureCount();const m=new AbortController;q._queryFeatureCountAbortController=m;await C.ignoreAbortErrors(q._queryFeatureCount());q._queryFeatureCountAbortController===m&&(q._queryFeatureCountAbortController=null);q._loaded=!0};q._queryPageController=async()=>{const m=new AbortController;q._queryPageAbortController=m;await C.ignoreAbortErrors(q._queryPage());q._queryPageAbortController===m&&(q._queryPageAbortController=null)};q._queryDebounced=C.debounce(q._queryController,
100);q._queryFeatureCountDebounced=C.debounce(q._queryFeatureCountController,100);q._queryPageDebounced=C.debounce(q._queryPageController,100);q._query=async()=>{const {_queryAbortController:m,relatedFeatures:n}=p._assertThisInitialized(q);q.featureCount&&(q._destroyRelatedFeatureViewModels(),q.featurePage=1,n.removeAll(),q.destroyed||n.addMany(q._sliceFeatures(await q._queryRelatedFeatures({signal:m?.signal}))))};q.handles.add([t.watch(()=>[q.displayCount,q.graphic,q.layer,q.layer?.loaded,q.map,
q.orderByFields,q.relationshipId,q.featuresPerPage,q.showAllEnabled,q.canQuery,q.featureCount],()=>q._queryDebounced(),t.initial),t.watch(()=>[q.featurePage,q.showAllEnabled],()=>q._queryPageDebounced()),t.watch(()=>[q.layer,q.relationshipId,q.objectId,q.canQuery],()=>q._queryFeatureCountDebounced())]);return q}p._inherits(ba,z);var Z=ba.prototype;Z.destroy=function(){this._destroyRelatedFeatureViewModels();this.relatedFeatures.removeAll();this._cancelQuery();this._cancelQueryFeatureCount();this._cancelQueryPage()};
Z.getRelatedFeatureByObjectId=function(D){return this.relatedFeatures.find(q=>q.getObjectId()===D)};Z._destroyRelatedFeatureViewModels=function(){this.relatedFeatureViewModels?.forEach(D=>!D.destroyed&&D.destroy());this.relatedFeatureViewModels.removeAll()};Z._queryFeatureCount=async function(){const {layer:D,relatedLayer:q,relationshipId:m,objectId:n,_queryFeatureCountAbortController:E,canQuery:Y,supportsCacheHint:U}=this;await D?.load();await q?.load();if(Y&&D&&q){var ea=q.createQuery();ea=new u({cacheHint:U,
relationshipId:m,returnGeometry:!1,objectIds:[n],where:ea.where??void 0});ea=await D.queryRelatedFeaturesCount(ea,{signal:E?.signal});this._set("featureCount",ea[n]||0)}else this._set("featureCount",0)};Z._sliceFeatures=function(D){const {showAllEnabled:q,displayCount:m}=this;return q?D:m?D.slice(0,m):[]};Z._queryPage=async function(){const {relatedFeatures:D,featurePage:q,showAllEnabled:m,_queryPageAbortController:n,featureCount:E}=this;!m||2>q||!E||D.addMany(await this._queryRelatedFeatures({signal:n?.signal}))};
Z._queryRelatedFeatures=async function(D){const {orderByFieldsFixedCasing:q,showAllEnabled:m,featuresPerPage:n,displayCount:E,layer:Y,relationshipId:U,featurePage:ea,featureCount:aa,relatedLayer:fa,supportsCacheHint:O}=this,{canQuery:da,objectId:la}=this;if(!da||!Y||!fa)return[];var l=m?((ea-1)*n+aa)%aa:0;const P=m?n:E;var W=fa.objectIdField;W=[...q.map(T=>T.field),...G.getFieldsInTitleAndDesc(fa),W].filter(x.isSome);const Q=q.map(T=>`${T.field} ${T.order}`),X=fa.createQuery();l=new u({orderByFields:Q,
start:l,num:P,outFields:W,cacheHint:O,relationshipId:U,returnGeometry:!1,objectIds:[la],where:X.where??void 0});D=(await Y.queryRelatedFeatures(l,{signal:D?.signal}))[la]?.features||[];D.forEach(T=>{T.sourceLayer=fa;T.layer=fa});return D};p._createClass(ba,[{key:"featurePage",get:function(){return this._get("featurePage")},set:function(D){const {featuresPerPage:q,featureCount:m}=this;this._set("featurePage",Math.min(Math.max(D,1),Math.ceil(m/q)||1))}},{key:"orderByFieldsFixedCasing",get:function(){const {orderByFields:D,
relatedLayer:q}=this;return D&&q?.loaded?D.map(m=>{const n=m.clone();n.field=y.getFixedFieldName(m.field,q);return n}):D??[]}},{key:"supportsCacheHint",get:function(){return!!this.layer?.capabilities?.queryRelated?.supportsCacheHint}},{key:"canLoad",get:function(){return!!this.map&&"number"===typeof this.relationshipId&&"number"===typeof this.objectId}},{key:"canQuery",get:function(){const D=this.layer?.capabilities?.queryRelated;return!!this.relatedLayer&&!!this.relationship&&"number"===typeof this.relationshipId&&
"number"===typeof this.objectId&&!!D?.supportsCount&&!!D?.supportsPagination}},{key:"itemDescriptionFieldName",get:function(){return this.orderByFieldsFixedCasing[0]?.field||null}},{key:"displayCount",get:function(){return this._get("displayCount")},set:function(D){this._set("displayCount",Math.min(Math.max(D,0),10))}},{key:"objectId",get:function(){return(this.objectIdField&&this.graphic?.attributes?.[this.objectIdField])??null}},{key:"objectIdField",get:function(){return this.layer?.objectIdField||
null}},{key:"relatedFeatures",get:function(){return this._get("relatedFeatures")||new K}},{key:"relatedFeatureInfos",get:function(){const {itemDescriptionFieldName:D,relatedFeatures:q,relatedLayer:m}=this;if(!q.length||!m)return[];const n=m&&"formTemplate"in m&&m.formTemplate,E=n&&n?.title||void 0;return q.map(Y=>{let U=void 0;if(D){var ea=Y.getAttribute(D);const aa=m.fieldsIndex.get(D);aa&&(ea=G.getComputedAttributes([ea],[aa])[D],null!=ea&&(U=ea.toString()))}ea=E?G.parseFormTemplateString(E,Y.attributes,
m.fieldsIndex):void 0;return{feature:Y,description:U,title:ea}}).toArray()}},{key:"relatedLayer",get:function(){const {layer:D,map:q,relationship:m}=this;return D?.loaded&&q&&m?y.findRelatedLayer(q,D,m)??null:null}},{key:"relationship",get:function(){const {relationshipId:D,layer:q}=this;return"number"===typeof D?q?.relationships?.find(({id:m})=>m===D)??null:null}},{key:"relatedFeatureViewModels",get:function(){return this._get("relatedFeatureViewModels")||new K}},{key:"state",get:function(){const {_queryAbortController:D,
_queryFeatureCountAbortController:q,_queryPageAbortController:m,canQuery:n,_loaded:E,canLoad:Y}=this;return q||Y&&!E?"loading":D||m?"querying":n?"ready":"disabled"}}]);return ba}(L.ClonableMixin(J.IdentifiableMixin(R.HandleOwnerMixin(e))));r.__decorate([f.property()],e.prototype,"_loaded",void 0);r.__decorate([f.property()],e.prototype,"_queryAbortController",void 0);r.__decorate([f.property()],e.prototype,"_queryPageAbortController",void 0);r.__decorate([f.property()],e.prototype,"_queryFeatureCountAbortController",
void 0);r.__decorate([f.property({value:1})],e.prototype,"featurePage",null);r.__decorate([f.property()],e.prototype,"featuresPerPage",void 0);r.__decorate([f.property({readOnly:!0})],e.prototype,"orderByFieldsFixedCasing",null);r.__decorate([f.property({readOnly:!0})],e.prototype,"supportsCacheHint",null);r.__decorate([f.property({readOnly:!0})],e.prototype,"canLoad",null);r.__decorate([f.property({readOnly:!0})],e.prototype,"canQuery",null);r.__decorate([f.property()],e.prototype,"description",
void 0);r.__decorate([f.property({readOnly:!0})],e.prototype,"itemDescriptionFieldName",null);r.__decorate([f.property({value:3})],e.prototype,"displayCount",null);r.__decorate([f.property({type:v})],e.prototype,"graphic",void 0);r.__decorate([f.property()],e.prototype,"layer",void 0);r.__decorate([f.property()],e.prototype,"map",void 0);r.__decorate([f.property({readOnly:!0})],e.prototype,"objectId",null);r.__decorate([f.property({readOnly:!0})],e.prototype,"objectIdField",null);r.__decorate([f.property()],
e.prototype,"orderByFields",void 0);r.__decorate([f.property({readOnly:!0})],e.prototype,"relatedFeatures",null);r.__decorate([f.property({readOnly:!0})],e.prototype,"relatedFeatureInfos",null);r.__decorate([f.property({readOnly:!0})],e.prototype,"relatedLayer",null);r.__decorate([f.property({readOnly:!0})],e.prototype,"relationship",null);r.__decorate([f.property()],e.prototype,"featureCount",void 0);r.__decorate([f.property({readOnly:!0})],e.prototype,"relatedFeatureViewModels",null);r.__decorate([f.property()],
e.prototype,"relationshipId",void 0);r.__decorate([f.property()],e.prototype,"showAllEnabled",void 0);r.__decorate([f.property()],e.prototype,"state",null);r.__decorate([f.property()],e.prototype,"title",void 0);r.__decorate([f.property()],e.prototype,"getRelatedFeatureByObjectId",null);return e=r.__decorate([H.subclass("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],e)})},"esri/widgets/FeatureForm/featureFormUtils":function(){define("exports ../../intl ../../core/arrayUtils ../../core/string ../../intl/date ../../layers/support/domainUtils ../../layers/support/fieldUtils ../../intl/substitute".split(" "),
function(p,r,v,e,x,L,K,R){function J(D,q){q=q.map((m,n)=>{let E=D[n];m.domain&&"coded-value"===m.domain.type&&(n=m.domain.codedValues.find(Y=>Y.code===E),n?.name&&(E=n.name));K.isDateField(m)&&(E=C(m,E));return[m.name,E]});return Object.fromEntries(q)}function C(D,q){if(!D||null==q)return null;switch(D.type){case "date":return x.formatDate(q);case "date-only":return x.formatDateOnly(q);case "time-only":return x.formatTimeOnly(q);case "timestamp-offset":return x.formatTimestamp(q);default:return null}}
function t(D,q){return e.replace(e.replace(D,m=>`{${m.toLowerCase()}}`),Object.fromEntries(Object.entries(q).map(([m,n])=>[m.toLowerCase(),n])))}function f(D){return 1E7<=D||-1E7>=D}const w=D=>"field"===D?.type,F=D=>"relationship"===D?.type,H=D=>"field"===D.type,u=D=>D.reduce((q,m)=>"group"===m?.type?[...q,...m.inputs]:[...q,m],[]),y=(D,q)=>null!=D&&D.input?.type===q,G={typeFieldName:null,types:[]};r=new Set(["date-only","time-only","timestamp-offset"]);p.LengthValidationError=void 0;(p.LengthValidationError||
(p.LengthValidationError={})).TOO_SHORT="length-validation-error::too-short";const z={type:"number"},ba={type:"number",intlOptions:{notation:"scientific"}},Z={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};p.capabilitiesAllowEditType=(D,q)=>{if(!D)return!0;({operations:D}=D);switch(q){case "INSERT":return D.supportsAdd;case "UPDATE":case "DELETE":return D.supportsUpdate;default:return!0}};p.flattenFieldInputs=D=>u(D).filter(w);
p.flattenInputs=u;p.flattenRelationshipInputs=D=>u(D).filter(F);p.formTemplateHasInvalidFields=function(D){return"formTemplate"in D&&D.formTemplate?(D.formTemplate.elements?.filter(H)??[]).some(({fieldName:q})=>!D.fieldsIndex.get(q)):!1};p.formatDateFieldValue=C;p.getComputedAttributes=J;p.getErrorMessageForFieldInput=(D,q)=>{const {dataType:m,domain:n,error:E,field:Y,minLength:U,value:ea,required:aa}=D;return q&&E?aa&&null===ea?q.validationErrors.cannotBeNull:E===L.DomainValidationError.VALUE_OUT_OF_RANGE||
E===K.NumericRangeValidationError.OUT_OF_RANGE?(D=L.getDomainRange(n)||K.getFieldRange(Y),R.substitute(q.validationErrors.outsideRange,D,{format:{max:"date"===m?Z:f(D.max)?ba:z,min:"date"===m?Z:f(D.min)?ba:z}})):E===L.DomainValidationError.INVALID_CODED_VALUE?q.validationErrors.invalidCodedValue:E===K.TypeValidationError.INVALID_TYPE?q.validationErrors.invalidType:E===p.LengthValidationError.TOO_SHORT?R.substitute(q.validationErrors.tooShort,{min:U}):null:null};p.getFieldsInTitleAndDesc=D=>{const q=
[];if(D.formTemplate){const {description:m,title:n}=D.formTemplate;D.fields?.forEach(E=>{const Y=n&&e.templateHasKey(n,E.name),U=m&&e.templateHasKey(m,E.name);(Y||U)&&q.push(E.name)})}return q};p.getIconForFeature=D=>{if(D){var q=D.layer;q=q&&"geometryType"in q?q.geometryType:void 0;D=D.geometry?.type;return"polyline"===D||"polyline"===q?"line":D||q||"table"}};p.getNormalizedFeatureTypeInfo=D=>D?"subtype-sublayer"===D.type?{typeFieldName:D.parent?.subtypeField,types:D.parent?.subtypes??[]}:"types"in
D&&D.types?{typeFieldName:D.typeIdField,types:D.types.map(({id:q,name:m,domains:n})=>({code:q,name:m,domains:n}))}:G:G;p.isFieldElement=H;p.isFieldElementWithInputType=y;p.isFieldElementWithTextInput=D=>null!=D&&(y(D,"text-box")||y(D,"text-area"));p.isFieldInput=w;p.isGroupElement=D=>"group"===D.type;p.isGroupInput=D=>"group"===D?.type;p.isInputInGroupInput=D=>"group"!==D?.type&&null!=D.group;p.isNumberFieldInput=({domain:D,inputType:q="text-box",dataType:m})=>"number"===m&&"text-box"===q&&(!D||"coded-value"!==
D.type);p.isRelationshipElement=D=>"relationship"===D.type;p.isRelationshipInput=F;p.isTemplateItemGroup=D=>"items"in D;p.parseFormTemplateString=function(D,q,m){var n=Object.keys(q).filter(Y=>e.templateHasKey(D,Y));const E=n.map(Y=>q[Y]);n=n.map(Y=>m.get(Y)).filter(v.isSome);return t(D,J(E,n))};p.substituteFieldTemplatesInString=t;p.unsupportedDateFieldTypes=r;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/arrayUtils ../../core/Handles ../../core/Identifiable ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./FeatureRelationship/FeatureRelationshipViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H,u,y,G,z,ba,Z,D,q,m,n,E){var Y;const U={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};x=Y=function(ea){function aa(O){var da=ea.call(this,O)||this;da._handles=new K;da._error=null;da._featureAbortController=null;da._graphicChangedThrottled=f.throttle(da._graphicChanged,1,p._assertThisInitialized(da));da._expressionAttributes=null;da._graphicExpressionAttributes=
null;da.abilities={...U};da.content=null;da.contentViewModels=[];da.description=null;da.defaultPopupTemplateEnabled=!1;da.formattedAttributes=null;da.lastEditInfo=null;da.relatedInfos=new Map;da.title="";da.view=null;da._isAllowedContentType=la=>{const {abilities:l}=p._assertThisInitialized(da);return"attachments"===la.type&&!!l.attachmentsContent||"custom"===la.type&&!!l.customContent||"fields"===la.type&&!!l.fieldsContent||"media"===la.type&&!!l.mediaContent||"text"===la.type&&!!l.textContent||
"expression"===la.type&&!!l.expressionContent||"relationship"===la.type&&!!l.relationshipContent};da._handles.add(t.watch(()=>[da.graphic,da._effectivePopupTemplate,da.abilities],()=>da._graphicChangedThrottled(),t.initial));return da}p._inherits(aa,ea);var fa=aa.prototype;fa.initialize=function(){this.addHandles(this._graphicChangedThrottled)};fa.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=null;this._destroyContentViewModels();
this.relatedInfos.clear()};fa.castAbilities=function(O){return{...U,...O}};fa.setActiveMedia=function(O,da){O=this.contentViewModels[O];O instanceof D&&O.setActiveMedia(da)};fa.nextMedia=function(O){O=this.contentViewModels[O];O instanceof D&&O.next()};fa.previousMedia=function(O){O=this.contentViewModels[O];O instanceof D&&O.previous()};fa.updateGeometry=async function(){const {graphic:O,spatialReference:da,_sourceLayer:la}=this;await la?.load();var l=la?.objectIdField;l&&O&&la&&(l=O?.attributes?.[l],
null!=l&&(l=[l],!O.geometry&&(l=(await n.querySourceLayer({layer:la,graphic:O,outFields:[],objectIds:l,returnGeometry:!0,spatialReference:da}))?.geometry)))&&(O.geometry=l)};fa._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};fa._graphicChanged=async function(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:O}=this;if(O){var da=new AbortController;this._featureAbortController=da;try{await this._queryFeature({signal:da.signal})}catch(la){C.isAbortError(la)||
(this._error=la,J.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:la,graphic:O,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===da&&(this._featureAbortController=null)}};fa._cancelFeatureQuery=function(){const {_featureAbortController:O}=this;O&&O.abort();this._featureAbortController=null};fa._compileContentElement=function(O,da){if("attachments"===O.type)return this._compileAttachments(O,da);if("custom"===O.type)return this._compileCustom(O,
da);if("fields"===O.type)return this._compileFields(O,da);if("media"===O.type)return this._compileMedia(O,da);if("text"===O.type)return this._compileText(O,da);if("expression"===O.type)return this._compileExpression(O,da);if("relationship"===O.type)return this._compileRelationship(O,da)};fa._compileContent=function(O){this._destroyContentViewModels();if(this.graphic)return Array.isArray(O)?O.filter(this._isAllowedContentType).map((da,la)=>this._compileContentElement(da,la)).filter(L.isSome):"string"===
typeof O?this._compileText(new y({text:O}),0).text:O};fa._destroyContentViewModels=function(){this._handles?.remove("relationship-view-models");this._handles?.remove("content-view-models");this.contentViewModels.forEach(O=>O&&!O.destroyed&&O.destroy());this._set("contentViewModels",[])};fa._matchesFeature=function(O,da){O=O?.graphic?.getObjectId();da=da?.getObjectId();return null!=O&&null!=da&&O===da};fa._setRelatedFeaturesViewModels=function({relatedFeatureViewModels:O,relatedFeatures:da,map:la}){const {view:l,
spatialReference:P}=this;da?.filter(Boolean).forEach(W=>{O.find(Q=>this._matchesFeature(Q,W))||O.add(new Y({abilities:{relationshipContent:!1},map:la,view:l,spatialReference:P,graphic:W}))});O.forEach(W=>{da?.find(Q=>this._matchesFeature(W,Q))||O.remove(W)})};fa._setExpressionContentVM=function(O,da){const la=this.formattedAttributes,{contentElement:l,contentElementViewModel:P}=O;O=l?.type;P&&O&&("fields"===O&&(this._createFieldsFormattedAttributes({contentElement:l,contentElementIndex:da,formattedAttributes:la}),
P.set(this._createFieldsVMParams(l,da))),"media"===O&&(this._createMediaFormattedAttributes({contentElement:l,contentElementIndex:da,formattedAttributes:la}),P.set(this._createMediaVMParams(l,da))),"text"===O&&P.set(this._createTextVMParams(l)))};fa._compileRelationship=function(O,da){const {displayCount:la,orderByFields:l,relationshipId:P,title:W,description:Q}=O,{_sourceLayer:X,graphic:T,map:k}=this;if(n.isRelatableFeatureSupportedLayer(X)){var S=new q({displayCount:la,graphic:T,orderByFields:l,
relationshipId:P,layer:X,map:k,...this._compileTitleAndDesc({title:W,description:Q})});this.contentViewModels[da]=S;this._handles.add(t.on(()=>S.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(S)),"relationship-view-models");return O}};fa._compileExpression=function(O,da){const {expressionInfo:la}=O,{graphic:l,map:P,spatialReference:W,view:Q}=this,X=new ba({expressionInfo:la,graphic:l,interceptor:Y.interceptor,map:P,spatialReference:W,view:Q});this.contentViewModels[da]=X;this._handles.add(t.watch(()=>
X.contentElementViewModel,()=>this._setExpressionContentVM(X,da),t.initial),"content-view-models");return O};fa._compileAttachments=function(O,da){const {graphic:la}=this,{description:l,title:P}=O;this.contentViewModels[da]=new G({graphic:la,...this._compileTitleAndDesc({title:P,description:l})});return O};fa._compileCustom=function(O,da){const {graphic:la}=this,{creator:l,destroyer:P}=O;this.contentViewModels[da]=new z({graphic:la,creator:l,destroyer:P});return O};fa._compileTitleAndDesc=function({title:O,
description:da}){const {_fieldInfoMap:la,_sourceLayer:l,graphic:P,formattedAttributes:W}=this,Q=P?.attributes,X=this._expressionAttributes,T=W.global;return{title:n.substituteFieldsInLinksAndAttributes({attributes:Q,fieldInfoMap:la,globalAttributes:T,expressionAttributes:X,layer:l,text:O}),description:n.substituteFieldsInLinksAndAttributes({attributes:Q,fieldInfoMap:la,globalAttributes:T,expressionAttributes:X,layer:l,text:da})}};fa._createFieldsVMParams=function(O,da){const la=this._effectivePopupTemplate,
l=this.formattedAttributes,P={...l?.global,...l?.content[da]};da=(O?.fieldInfos||la?.fieldInfos)?.filter(({fieldName:X})=>n.isExpressionField(X)||n.isRelatedField(X)||P.hasOwnProperty(X));const {description:W,title:Q}=O;return{attributes:P,expressionInfos:la?.expressionInfos,fieldInfos:da,...this._compileTitleAndDesc({title:Q,description:W})}};fa._compileFields=function(O,da){const la=O.clone();O=new Z(this._createFieldsVMParams(O,da));this.contentViewModels[da]=O;la.fieldInfos=O.formattedFieldInfos.slice(0);
return la};fa._createMediaVMParams=function(O,da){const {abilities:la,graphic:l,_fieldInfoMap:P,_effectivePopupTemplate:W,relatedInfos:Q,_sourceLayer:X,_expressionAttributes:T}=this,k=this.formattedAttributes,S=l?.attributes??{},{description:N,mediaInfos:ka,title:oa}=O;return{abilities:{chartAnimation:la.chartAnimation},activeMediaInfoIndex:O.activeMediaInfoIndex||0,attributes:S,isAggregate:l?.isAggregate,layer:X,fieldInfoMap:P,formattedAttributes:{...k?.global,...k?.content[da]},expressionAttributes:T,
mediaInfos:ka,popupTemplate:W,relatedInfos:Q,...this._compileTitleAndDesc({title:oa,description:N})}};fa._compileMedia=function(O,da){const la=O.clone();O=new D(this._createMediaVMParams(O,da));la.mediaInfos=O.formattedMediaInfos.slice(0);this.contentViewModels[da]=O;return la};fa._createTextVMParams=function(O){const {graphic:da,_fieldInfoMap:la,_sourceLayer:l,_expressionAttributes:P}=this;O&&O.text&&(O.text=n.substituteFieldsInLinksAndAttributes({attributes:da?.attributes??{},fieldInfoMap:la,globalAttributes:this.formattedAttributes?.global??
{},expressionAttributes:P,layer:l,text:O.text}));return{graphic:da,creator:O.text}};fa._compileText=function(O,da){O=O.clone();this.contentViewModels[da]=new z(this._createTextVMParams(O));return O};fa._compileLastEditInfo=function(){const {_effectivePopupTemplate:O,_sourceLayer:da,graphic:la}=this;if(O){var {lastEditInfoEnabled:l}=O,P=da?.editFieldsInfo;if(l&&P)return n.formatEditInfo(P,la?.attributes)}};fa._compileTitle=function(O){const {_fieldInfoMap:da,_sourceLayer:la,graphic:l,_expressionAttributes:P}=
this;return n.substituteFieldsInLinksAndAttributes({attributes:l?.attributes??{},fieldInfoMap:da,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:P,layer:la,text:O})};fa._getTitle=async function(){const {_effectivePopupTemplate:O,graphic:da}=this;return da?n.graphicCallback(O?.title,{graphic:da}):null};fa._getContent=async function(){const {_effectivePopupTemplate:O,graphic:da}=this;return da?n.graphicCallback(O?.content,{graphic:da}):null};fa._queryFeature=async function(O){const {_featureAbortController:da,
_sourceLayer:la,graphic:l,_effectivePopupTemplate:P}=this,W=this.map,Q=this.view,X=this.spatialReference;if(da===this._featureAbortController&&l){await n.queryUpdatedFeature({graphic:l,popupTemplate:P,layer:la,spatialReference:X},O);var {content:{value:T},title:{value:k}}=await C.eachAlways({content:this._getContent(),title:this._getTitle()});({expressionAttributes:{value:O}}=await C.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(O),expressionAttributes:m.createCompiledExpressions({expressionInfos:P?.expressionInfos,
spatialReference:X,graphic:l,map:W,interceptor:Y.interceptor,view:Q})}));da===this._featureAbortController&&l&&(this._expressionAttributes=O,this._graphicExpressionAttributes={...l.attributes,...O},this._set("formattedAttributes",this._createFormattedAttributes(T)),this._set("title",this._compileTitle(k)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(T)||null))}};fa._createMediaFormattedAttributes=function({contentElement:O,contentElementIndex:da,
formattedAttributes:la}){const {_effectivePopupTemplate:l,graphic:P,relatedInfos:W,_sourceLayer:Q,_fieldInfoMap:X,_graphicExpressionAttributes:T}=this;la.content[da]=n.formatAttributes({fieldInfos:l?.fieldInfos,graphic:P,attributes:{...T,...O.attributes},layer:Q,fieldInfoMap:X,relatedInfos:W})};fa._createFieldsFormattedAttributes=function({contentElement:O,contentElementIndex:da,formattedAttributes:la}){if(O.fieldInfos){const {graphic:l,relatedInfos:P,_sourceLayer:W,_fieldInfoMap:Q,_graphicExpressionAttributes:X}=
this;la.content[da]=n.formatAttributes({fieldInfos:O.fieldInfos,graphic:l,attributes:{...X,...O.attributes},layer:W,fieldInfoMap:Q,relatedInfos:P})}};fa._createFormattedAttributes=function(O){const {_effectivePopupTemplate:da,graphic:la,relatedInfos:l,_sourceLayer:P,_fieldInfoMap:W,_graphicExpressionAttributes:Q}=this,X={global:n.formatAttributes({fieldInfos:da?.fieldInfos,graphic:la,attributes:Q,layer:P,fieldInfoMap:W,relatedInfos:l}),content:[]};Array.isArray(O)&&O.forEach((T,k)=>{"fields"===T.type&&
this._createFieldsFormattedAttributes({contentElement:T,contentElementIndex:k,formattedAttributes:X});"media"===T.type&&this._createMediaFormattedAttributes({contentElement:T,contentElementIndex:k,formattedAttributes:X})});return X};fa._checkForRelatedFeatures=function(O){const {graphic:da,_effectivePopupTemplate:la}=this;return this._queryRelatedInfos(da,n.getAllFieldInfos(la),O)};fa._queryRelatedInfos=async function(O,da,la){const {relatedInfos:l,_sourceLayer:P}=this;l.clear();const W=null!=P?.associatedLayer?
await P?.associatedLayer.load(la):P;if(W&&O){var Q=da.filter(k=>k&&n.isRelatedField(k.fieldName));if(Q&&Q.length){da.forEach(k=>this._configureRelatedInfo(k,W));var X=await E.queryLayerInfos({relatedInfos:l,layer:W},la);Object.keys(X).forEach(k=>{const S=l.get(k.toString());k=X[k]?.value;S&&k&&(S.layerInfo=k.data)});var T=await E.queryRelatedFeatures({graphic:O,relatedInfos:l,layer:W},la);Object.keys(T).forEach(k=>{E.setRelatedFeatures(T[k]?.value,l.get(k.toString()))})}}};fa._configureRelatedInfo=
function(O,da){const {relatedInfos:la}=this,l=E.getRelatedFieldInfo(O.fieldName);if(l){var {layerId:P,fieldName:W}=l;P&&(da=la.get(P.toString())||E.createRelatedInfo(P,da))&&(E.updateRelatedInfo({relatedInfo:da,fieldName:W,fieldInfo:O}),this.relatedInfos.set(P,da))}};p._createClass(aa,[{key:"_effectivePopupTemplate",get:function(){return null!=this.graphic?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return n.createfieldInfoMap(n.getAllFieldInfos(this._effectivePopupTemplate),
this._sourceLayer)}},{key:"_sourceLayer",get:function(){return n.getSourceLayer(this.graphic)}},{key:"isTable",get:function(){return this._sourceLayer?.isTable||!1}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(O){this._set("graphic",O?O.clone():null)}},{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(O){this._override("spatialReference",O)}},{key:"map",
get:function(){return this.view?.map||null},set:function(O){this._override("map",O)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return aa}(R.IdentifiableMixin(x));x.interceptor=new e.FeatureSetQueryInterceptor(n.preLayerQueryCallback,n.preRequestCallback);r.__decorate([w.property()],x.prototype,"_error",void 0);r.__decorate([w.property()],x.prototype,"_featureAbortController",void 0);r.__decorate([w.property({readOnly:!0})],x.prototype,"_effectivePopupTemplate",
null);r.__decorate([w.property({readOnly:!0})],x.prototype,"_fieldInfoMap",null);r.__decorate([w.property({readOnly:!0})],x.prototype,"_sourceLayer",null);r.__decorate([w.property()],x.prototype,"abilities",void 0);r.__decorate([F.cast("abilities")],x.prototype,"castAbilities",null);r.__decorate([w.property({readOnly:!0})],x.prototype,"content",void 0);r.__decorate([w.property({readOnly:!0})],x.prototype,"contentViewModels",void 0);r.__decorate([w.property()],x.prototype,"description",void 0);r.__decorate([w.property({type:Boolean})],
x.prototype,"defaultPopupTemplateEnabled",void 0);r.__decorate([w.property({readOnly:!0})],x.prototype,"isTable",null);r.__decorate([w.property({readOnly:!0})],x.prototype,"state",null);r.__decorate([w.property({readOnly:!0})],x.prototype,"formattedAttributes",void 0);r.__decorate([w.property({type:v,value:null})],x.prototype,"graphic",null);r.__decorate([w.property({readOnly:!0})],x.prototype,"lastEditInfo",void 0);r.__decorate([w.property({readOnly:!0})],x.prototype,"relatedInfos",void 0);r.__decorate([w.property()],
x.prototype,"spatialReference",null);r.__decorate([w.property({readOnly:!0})],x.prototype,"title",void 0);r.__decorate([w.property()],x.prototype,"map",null);r.__decorate([w.property({readOnly:!0})],x.prototype,"waitingForContent",null);r.__decorate([w.property()],x.prototype,"view",void 0);return x=Y=r.__decorate([u.subclass("esri.widgets.FeatureViewModel")],x)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],
function(p,r){r=r._createClass(function(v,e){this.preLayerQueryCallback=v;this.preRequestCallback=e;this.preLayerQueryCallback||(this.preLayerQueryCallback=x=>{});this.preRequestCallback||(this.preLayerQueryCallback=x=>{})});p.FeatureSetQueryInterceptor=r;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/resources":function(){define(["exports"],function(p){p.CSS={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",
esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",
fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/Error ../../../core/accessorSupport/decorators/subclass ../resources ../../support/widget ../../support/jsxFactory".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f){p.FeatureContentMixin=w=>{w=function(F){function H(){var u=F.apply(this,arguments)||this;u.renderNodeContent=y=>t.isWidget(y)&&!y.destroyed?f.tsx("div",{class:C.CSS.contentNode,key:y},y.render()):y instanceof HTMLElement?f.tsx("div",{class:C.CSS.contentNode,key:y,bind:y,afterCreate:u._attachToNode}):t.hasDomNode(y)?f.tsx("div",{class:C.CSS.contentNode,key:y,bind:y.domNode,afterCreate:u._attachToNode}):null;return u}r._inherits(H,F);H.prototype._attachToNode=function(u){u.appendChild(this)};
return r._createClass(H)}(w);return w=v.__decorate([J.subclass("esri.widgets.Feature.ContentMixin")],w)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w){L=function(F){function H(y,G){y=F.call(this,y,G)||this;y._animationDelay=500;y._animationPromise=null;y.viewModel=new t;return y}p._inherits(H,F);var u=H.prototype;u.initialize=function(){this.addHandles(e.watch(()=>this.visible,y=>this._visibleChange(y)))};u.destroy=function(){this._animationPromise=null};u.show=function(y){const {location:G,promise:z}=y??{};G&&(this.viewModel.location=G);this.visible=!0;y=()=>this.hide();z&&z.catch(()=>{}).then(y)};u.hide=function(){this.visible=
!1};u.render=function(){var {visible:y}=this,{screenLocation:G}=this.viewModel;G=!!G;y={["esri-spinner--start"]:y&&G,["esri-spinner--finish"]:!y&&G};G=this._getPositionStyles();return w.tsx("div",{class:this.classes("esri-spinner",y),styles:G})};u._visibleChange=function(y){if(y)this.viewModel.screenLocationEnabled=!0;else{var G=v.after(this._animationDelay);this._animationPromise=G;G.catch(()=>{}).then(()=>{this._animationPromise===G&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=
null)})}};u._getPositionStyles=function(){const {screenLocation:y,view:G}=this.viewModel;if(null==G||null==y)return{};const {padding:z}=G;return{left:`${y.x-z.left}px`,top:`${y.y-z.top}px`}};p._createClass(H,[{key:"location",get:function(){return this.viewModel.location},set:function(y){this.viewModel.location=y}},{key:"view",get:function(){return this.viewModel.view},set:function(y){this.viewModel.view=y}},{key:"visible",get:function(){return this.viewModel.visible},set:function(y){this.viewModel.visible=
y}}]);return H}(C);r.__decorate([x.property()],L.prototype,"location",null);r.__decorate([x.property()],L.prototype,"view",null);r.__decorate([x.property({type:t})],L.prototype,"viewModel",void 0);r.__decorate([x.property()],L.prototype,"visible",null);return L=r.__decorate([J.subclass("esri.widgets.Spinner")],L)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),
function(p,r,v,e,x,L,K,R){e=function(J){function C(t){t=J.call(this,t)||this;t.visible=!1;return t}p._inherits(C,J);return p._createClass(C)}(R);r.__decorate([v.property()],e.prototype,"visible",void 0);return e=r.__decorate([K.subclass("esri.widgets.CompassViewModel")],e)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t){const f=Symbol("anchorHandles");v=function(F){function H(u){var y=F.call(this,u)||this;y[w]=new e;y.location=null;y.screenLocationEnabled=!1;y.view=null;y[f].add([L.when(()=>x.applySome(y.screenLocationEnabled?y.view:null,G=>[G.size,"3d"===G.type?G.camera:G.viewpoint]),()=>y.notifyChange("screenLocation")),L.watch(()=>y.screenLocation,(G,z)=>{null!=G&&null!=z&&y.emit("view-change")})]);return y}p._inherits(H,F);H.prototype.destroy=function(){this.view=null;this[f]=
x.destroyMaybe(this[f])};p._createClass(H,[{key:"screenLocation",get:function(){const {location:u,view:y,screenLocationEnabled:G}=this;return G&&null!=u&&null!=y&&y.ready?y.toScreen?.(u):null}}]);return H}(v.EventedAccessor);var w=f;r.__decorate([K.property()],v.prototype,"location",void 0);r.__decorate([K.property()],v.prototype,"screenLocation",null);r.__decorate([K.property()],v.prototype,"screenLocationEnabled",void 0);r.__decorate([K.property()],v.prototype,"view",void 0);return v=r.__decorate([t.subclass("esri.widgets.support.AnchorElementViewModel")],
v)})},"esri/widgets/Popup/actionUtils":function(){define(["exports","../../core/Error","../../core/Logger","../../core/promiseUtils","./actions"],function(p,r,v,e,x){function L(w){const {selectedFeature:F,location:H,view:u}=w;return u?"3d"===u.type?F??H??null:w.get("selectedFeature.geometry")||H:null}function K(w){return!!w&&w.isAggregate&&"cluster"===w.sourceLayer?.featureReduction?.type}async function R(w,F){if("3d"!==F?.type||!w||"esri.Graphic"!==w.declaredClass)return!0;if((F=F.getViewForGraphic(w))&&
"whenGraphicBounds"in F){let H;try{H=await F.whenGraphicBounds(w,{useViewElevation:!0})}catch(u){}return!H||!H.boundingBox||H.boundingBox[0]===H.boundingBox[3]&&H.boundingBox[1]===H.boundingBox[4]&&H.boundingBox[2]===H.boundingBox[5]}return!0}async function J(w){const {location:F,selectedFeature:H,view:u,zoomFactor:y}=w,G=L(w);if(!u||!G)throw w=new r("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:G,view:u}),f.error(w),w;const z=u.scale/y,ba=w.selectedFeature?.geometry??
F,Z=null!=ba&&"point"===ba.type&&await R(H,u);x.zoomToFeature.active=!0;x.zoomToFeature.disabled=!0;try{await w.zoomTo({target:{target:G,scale:Z?z:void 0}})}catch(D){const q=new r("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:H});f.error(q)}finally{x.zoomToFeature.active=!1,x.zoomToFeature.disabled=!1,w.zoomToLocation=null,Z&&(w.location=ba)}}async function C(w){const {selectedFeature:F,view:H}=w;if("2d"!==H?.type)throw w=new r("zoomToCluster:invalid-view","View must be 2d MapView.",
{view:H}),f.error(w),w;if(!F||!K(F))throw w=new r("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:F}),f.error(w),w;const [u,y]=await t(H,F);x.zoomToClusteredFeatures.active=!0;x.zoomToClusteredFeatures.disabled=!0;const {extent:G}=await u.queryExtent(y);await w.zoomTo({target:G});x.zoomToClusteredFeatures.active=!1;x.zoomToClusteredFeatures.disabled=!1}async function t(w,F){w=await w.whenLayerView(F.sourceLayer);const H=w.createQuery();
F=F.getObjectId();H.aggregateIds=null!=F?[F]:[];return[w,H]}const f=v.getLogger("esri.widgets.Popup.PopupViewModel");p.browseAggregateFeatures=async function(w){const {selectedFeature:F,view:H}=w;if(H&&F){var [u,y]=await t(H,F);x.browseClusteredFeatures.active=!0;x.browseClusteredFeatures.disabled=!0;var {features:G}=await u.queryFeatures(y);x.browseClusteredFeatures.active=!1;x.browseClusteredFeatures.disabled=!1;x.browseClusteredFeatures.value=!0;w?.open({features:[F].concat(G),featureMenuOpen:!0})}};
p.displayClusterExtent=async function(w){const {view:F,selectedFeature:H}=w;if(F&&H){var [u,y]=await t(F,H),{extent:G}=await u.queryExtent(y);w.selectedClusterBoundaryFeature.geometry=G;F.graphics.add(w.selectedClusterBoundaryFeature)}};p.getPointFromGeometry=function(w){if(null==w)return null;switch(w.type){case "point":return w;case "extent":return w.center;case "polygon":return w.centroid;case "multipoint":case "polyline":return w.extent?.center;default:return null}};p.getSelectedTarget=L;p.isClusterFeature=
K;p.removeClusteredFeaturesForBrowsing=function(w){x.browseClusteredFeatures.value=!1;const F=w.features.filter(H=>K(H));F.length&&(w.features=F)};p.triggerAction=w=>{const {event:F,view:H,viewModel:u}=w;({action:w}=F);if(!w)return Promise.reject(new r("trigger-action:missing-arguments","Event has no action"));const {disabled:y,id:G}=w;if(!G)return Promise.reject(new r("trigger-action:invalid-action","action.id is missing"));if(y)return Promise.reject(new r("trigger-action:invalid-action","Action is disabled"));
if(G===x.zoomToFeature.id)return J(u).catch(e.throwIfNotAbortError);if(G===x.zoomToClusteredFeatures.id)return C(u);if(G===x.browseClusteredFeatures.id)return u.browseClusterEnabled=!u.browseClusterEnabled,u.featureMenuOpen=u.browseClusterEnabled,Promise.resolve();if(G===x.removeSelectedFeature.id){u.visible=!1;({selectedFeature:w}=u);if(!w)return Promise.reject(new r(`trigger-action:${x.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:w}));const {sourceLayer:z}=w;z?z.remove(w):
H?.graphics.remove(w)}return Promise.resolve()};p.zoomToClusterExtent=C;p.zoomToLocation=J;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton","../../support/actions/ActionToggle"],function(p,r,v){const e=new r({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),x=new r({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",
className:"esri-icon-trash"});r=new r({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});v=new v({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table",value:!1});p.all=[e,x,v,r];p.browseClusteredFeatures=v;p.removeSelectedFeature=x;p.zoomToClusteredFeatures=r;p.zoomToFeature=e;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Popup/css":function(){define(["exports"],
function(p){p.CSS={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",
iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",
isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",
hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",
footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",
actionToggleOn:"esri-popup__action-toggle--on",actionExit:"esri-popup__action--exit",actionSelectFeature:"esri-popup__action--select-feature",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationIcon:"esri-popup__pagination-icon",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",
featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuButtonIcon:"esri-popup__feature-menu-button-icon",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button",
collapseIcon:"esri-popup__collapse-icon"};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../layers/LayerConstants ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../symbols/SimpleFillSymbol ../../geometry/Point".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,H,u,y,G,z,ba,Z,D,q,m,n,E,Y,U,ea,aa){const fa=L.ofType({key:"type",defaultKeyValue:"button",base:z,typeMap:{button:ba,toggle:Z}});v=function(O){function da(l){l=O.call(this,l)||this;l._handles=new R;l._pendingPromises=new Set;l._fetchFeaturesController=null;l._highlightSelectedFeaturePromise=null;l._highlightActiveFeaturePromise=null;l._selectedClusterFeature=null;l.featurePage=null;l.actions=new fa;l.activeFeature=null;l.defaultPopupTemplateEnabled=!1;l.autoCloseEnabled=
!1;l.autoOpenEnabled=!0;l.browseClusterEnabled=!1;l.content=null;l.featuresPerPage=20;l.featureMenuOpen=!1;l.featureViewModelAbilities=null;l.featureViewModels=[];l.highlightEnabled=!0;l.includeDefaultActions=!0;l.selectedClusterBoundaryFeature=new e({symbol:new ea({outline:{width:1.5,color:"cyan"},style:"none"})});l.title=null;l.updateLocationEnabled=!1;l.view=null;l.visible=!1;l.zoomFactor=4;l.zoomToLocation=null;return l}p._inherits(da,O);var la=da.prototype;la.initialize=function(){this._handles.add([this.on("view-change",
()=>this._autoClose()),C.watch(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),C.watch(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),C.watch(()=>this.view?.animation?.state,l=>this._animationStateChange(l)),C.watch(()=>this.location,l=>this._locationChange(l)),C.watch(()=>this.selectedFeature,l=>this._selectedFeatureChange(l)),C.watch(()=>[this.selectedFeatureIndex,this.featureCount,
this.featuresPerPage],()=>this._selectedFeatureIndexChange()),C.watch(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),C.watch(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",l=>E.triggerAction({event:l,viewModel:this,view:this.view})),C.when(()=>!this.waitingForResult,()=>this._waitingForResultChange(),C.sync),C.watch(()=>[this.features,this.view?.map,
this.view?.spatialReference],()=>this._updateFeatureVMs()),C.watch(()=>this.view?.scale,()=>this._viewScaleChange()),C.when(()=>!this.visible,()=>this.browseClusterEnabled=!1),C.watch(()=>this.browseClusterEnabled,l=>l?this.enableClusterBrowsing():this.disableClusterBrowsing())])};la.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};la.centerAtLocation=function(){const {view:l}=this,P=E.getSelectedTarget(this);
return P&&l?this.callGoTo({target:{target:P,scale:l.scale}}):Promise.reject(new K("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:P,view:l}))};la.zoomTo=function(l){return this.callGoTo(l)};la.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})};la.fetchFeatures=function(l,P){const {view:W}=this;if(!W||!l)throw new K("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",
{screenPoint:l,view:W});return W.fetchPopupFeatures(l,{event:P&&P.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:P&&P.signal})};la.open=function(l){l={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...l,visible:!0};var {fetchFeatures:P}=l;delete l.fetchFeatures;P&&this._setFetchFeaturesPromises(l.location);P=["actionsMenuOpen","collapsed"];for(const W of P)delete l[W];this.set(l)};la.triggerAction=function(l){(l=this.allActions.at(l))&&!l.disabled&&this.emit("trigger-action",
{action:l})};la.next=function(){this.selectedFeatureIndex+=1;return this};la.previous=function(){--this.selectedFeatureIndex;return this};la.disableClusterBrowsing=function(){E.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};la.enableClusterBrowsing=async function(){const {view:l,selectedFeature:P}=this;"2d"!==l?.type?J.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",P):E.isClusterFeature(P)?(await E.displayClusterExtent(this),await E.browseAggregateFeatures(this)):
J.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",P)};la.handleViewClick=function(l){this.autoOpenEnabled&&this._fetchFeaturesAndOpen(l)};la._animationStateChange=function(l){this.zoomToLocation||(n.zoomToFeature.disabled="waiting-for-target"===l)};la._clearBrowsedClusterGraphics=function(){const l=this.view?.graphics;l&&(l.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&l.remove(this._selectedClusterFeature));
this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};la._viewScaleChange=function(){E.isClusterFeature(this.selectedFeature)?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])};la._locationChange=function(l){const {selectedFeature:P,updateLocationEnabled:W}=this;W&&l&&(!P||P.geometry)&&this.centerAtLocation()};la._selectedFeatureIndexChange=function(){this.featurePage=1<
this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};la._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};la._setGraphicOnFeatureViewModels=function(){const {features:l,featureCount:P,featurePage:W,featuresPerPage:Q,featureViewModels:X}=this;if(null!==W){var T=((W-1)*Q+P)%P;X.slice(T,T+Q).forEach((k,S)=>{k&&!k.graphic&&(k.graphic=l[T+S])})}};la._selectedFeatureChange=async function(l){const {location:P,updateLocationEnabled:W,view:Q}=
this;l&&Q&&(this.browseClusterEnabled?(this._selectedClusterFeature&&(Q.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),E.isClusterFeature(l)||(l.symbol=await D.getDisplayedSymbol(l),this._selectedClusterFeature=l,Q.graphics.add(this._selectedClusterFeature))):!W&&P||!l.geometry?W&&!l.geometry&&this.centerAtLocation().then(()=>{const X=Q.center?.clone();X&&(this.location=X)}):this.location=E.getPointFromGeometry(l.geometry))};la._waitingForResultChange=function(){!this.featureCount&&
this.promises&&(this.visible=!1)};la._setFetchFeaturesPromises=function(l){return this._fetchFeaturesWithController(this._getScreenPoint(l||this.location)).then(P=>{const {clientOnlyGraphics:W,promisesPerLayerView:Q}=P;P=Promise.resolve(W);const X=Q.map(T=>T.promise);this.promises=[P,...X]})};la._destroyFeatureVMs=function(){this.featureViewModels.forEach(l=>l&&!l.destroyed&&l.destroy());this._set("featureViewModels",[])};la._updateFeatureVMs=function(){const {selectedFeature:l,features:P,featureViewModels:W}=
this;E.isClusterFeature(l)||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(P&&P.length){var Q=W.slice(0),X=[];P.forEach((T,k)=>{if(T){var S=null;Q.some((N,ka)=>{N&&N.graphic===T&&(S=N,Q.splice(ka,1));return!!S});if(S)X[k]=S;else{const N=new m({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:this.view?.spatialReference,graphic:T===l?T:null,map:this.view?.map,view:this.view});X[k]=N}}});Q.forEach(T=>T&&!T.destroyed&&
T.destroy());this._set("featureViewModels",X)}};la._getScreenPoint=function(l){const {view:P}=this;return P&&l&&"function"===typeof P.toScreen?P.toScreen(l):null};la._cancelFetchingFeatures=function(){const l=this._fetchFeaturesController;l&&l.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};la._fetchFeaturesWithController=function(l,P){this._cancelFetchingFeatures();const W=new AbortController,{signal:Q}=W;this._fetchFeaturesController=W;this.notifyChange("waitingForResult");
l=this.fetchFeatures(l,{signal:Q,event:P});l.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return l};la._fetchFeaturesAndOpen=function(l){const {screenPoint:P,mapPoint:W}=l,{view:Q}=this;this._fetchFeaturesWithController(P,l).then(X=>{const {clientOnlyGraphics:T,promisesPerLayerView:k,location:S}=X,N=[Promise.resolve(T),...k.map(ka=>ka.promise)];Q?.popup&&"open"in Q.popup&&Q.popup.open({location:S||W,promises:N});return X})};la._updatePendingPromises=
function(l){l&&this._pendingPromises.has(l)&&(this._pendingPromises.delete(l),this.notifyChange("pendingPromisesCount"))};la._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};la._getLayerView=async function(l,P){await l.when();return l.whenLayerView(P)};la._getHighlightLayer=function(l){const {layer:P,sourceLayer:W}=l;return W&&"layer"in W&&W.layer?W.layer:"map-notes"===W?.type||"subtype-group"===W?.type?W:P};la._getHighlightTarget=function(l,P){P="imagery"===P.type?void 0:"objectIdField"in
P?P.objectIdField||G.fallbackObjectIDAttribute:null;const W=l.attributes;return W&&P&&W[P]||l};la._highlightActiveFeature=async function(){this._handles.remove("highlight-active-feature");const {highlightEnabled:l,view:P,activeFeature:W,visible:Q}=this;if(W&&P&&l&&Q){var X=this._getHighlightLayer(W);if(X&&X instanceof y){var T=this._getLayerView(P,X);this._highlightActiveFeaturePromise=T;var k=await T;k&&q.highlightsSupported(k)&&this._highlightActiveFeaturePromise===T&&this.activeFeature&&this.highlightEnabled&&
(X=k.highlight(this._getHighlightTarget(W,X)),this._handles.add(X,"highlight-active-feature"))}}};la._highlightSelectedFeature=async function(){this._handles.remove("highlight-selected-feature");const {selectedFeature:l,highlightEnabled:P,view:W,visible:Q}=this;if(l&&W&&P&&Q){var X=this._getHighlightLayer(l);if(X&&X instanceof y){var T=this._getLayerView(W,X);this._highlightSelectedFeaturePromise=T;var k=await T;k&&q.highlightsSupported(k)&&this._highlightSelectedFeaturePromise===T&&this.selectedFeature&&
this.highlightEnabled&&this.visible&&(X=k.highlight(this._getHighlightTarget(l,X)),this._handles.add(X,"highlight-selected-feature"))}}};la._updateFeatures=function(l){const {features:P}=this;l&&l.length&&(P.length?(l=l.filter(W=>!P.includes(W)),this.features=P.concat(l)):this.features=l)};p._createClass(da,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(l=>l.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",
get:function(){const l=this._get("allActions")||new fa;l.removeAll();const {actions:P,defaultActions:W,defaultPopupTemplateEnabled:Q,includeDefaultActions:X,selectedFeature:T}=this;var k=X?W.concat(P):P;const S=T&&("function"===typeof T.getEffectivePopupTemplate&&T.getEffectivePopupTemplate(Q)||T.popupTemplate),N=S&&S.actions;(k=S&&S.overwriteActions?N:N?N.concat(k):k)&&k.filter(Boolean).forEach(ka=>l.add(ka));return l}},{key:"defaultActions",get:function(){const l=this._get("defaultActions")||new fa;
l.removeAll();l.addMany(E.isClusterFeature(this.selectedFeature)?[n.zoomToClusteredFeatures.clone(),n.browseClusteredFeatures.clone()]:[n.zoomToFeature.clone()]);return l}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(l){l=l||[];this._set("features",l);const {pendingPromisesCount:P,promiseCount:W,selectedFeatureIndex:Q}=this,X=W&&l.length;X&&P&&-1===Q?this.selectedFeatureIndex=0:X&&-1!==Q||(this.selectedFeatureIndex=
l.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(l){let P=l;const W=this.view?.spatialReference?.isWebMercator;l&&l?.spatialReference?.isWGS84&&W&&(P=u.geographicToWebMercator(l));this._set("location",P)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},
{key:"promises",get:function(){return this._get("promises")||[]},set:function(l){this._pendingPromises.clear();this.features=[];Array.isArray(l)&&l.length?(this._set("promises",l),l=l.slice(0),l.forEach(P=>{this._pendingPromises.add(P);P.then(W=>{this._pendingPromises.has(P)&&this._updateFeatures(W);this._updatePendingPromises(P)},()=>this._updatePendingPromises(P))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:l,selectedFeatureIndex:P}=
this;return-1===P?null:l[P]||null}},{key:"selectedFeatureIndex",get:function(){const l=this._get("selectedFeatureIndex");return"number"===typeof l?l:-1},set:function(l){const {featureCount:P}=this;l=isNaN(l)||-1>l||!P?-1:(l+P)%P;this.activeFeature=null;this._set("selectedFeatureIndex",l)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return da}(U.GoToMixin(Y));
r.__decorate([t.property()],v.prototype,"featurePage",void 0);r.__decorate([t.property()],v.prototype,"isLoadingFeature",null);r.__decorate([t.property({type:fa})],v.prototype,"actions",void 0);r.__decorate([t.property({readOnly:!0})],v.prototype,"active",null);r.__decorate([t.property()],v.prototype,"activeFeature",void 0);r.__decorate([t.property({readOnly:!0})],v.prototype,"allActions",null);r.__decorate([t.property({type:Boolean})],v.prototype,"defaultPopupTemplateEnabled",void 0);r.__decorate([t.property()],
v.prototype,"autoCloseEnabled",void 0);r.__decorate([t.property()],v.prototype,"autoOpenEnabled",void 0);r.__decorate([t.property()],v.prototype,"browseClusterEnabled",void 0);r.__decorate([t.property()],v.prototype,"content",void 0);r.__decorate([t.property({type:fa,readOnly:!0})],v.prototype,"defaultActions",null);r.__decorate([t.property({readOnly:!0})],v.prototype,"featureCount",null);r.__decorate([t.property()],v.prototype,"features",null);r.__decorate([t.property()],v.prototype,"featuresPerPage",
void 0);r.__decorate([t.property()],v.prototype,"featureMenuOpen",void 0);r.__decorate([t.property()],v.prototype,"featureViewModelAbilities",void 0);r.__decorate([t.property({readOnly:!0})],v.prototype,"featureViewModels",void 0);r.__decorate([t.property()],v.prototype,"highlightEnabled",void 0);r.__decorate([t.property()],v.prototype,"includeDefaultActions",void 0);r.__decorate([t.property({type:aa})],v.prototype,"location",null);r.__decorate([t.property({readOnly:!0})],v.prototype,"pendingPromisesCount",
null);r.__decorate([t.property({readOnly:!0})],v.prototype,"selectedClusterBoundaryFeature",void 0);r.__decorate([t.property({readOnly:!0})],v.prototype,"waitingForResult",null);r.__decorate([t.property({readOnly:!0})],v.prototype,"promiseCount",null);r.__decorate([t.property()],v.prototype,"promises",null);r.__decorate([t.property({value:null,readOnly:!0})],v.prototype,"selectedFeature",null);r.__decorate([t.property({value:-1})],v.prototype,"selectedFeatureIndex",null);r.__decorate([t.property({readOnly:!0})],
v.prototype,"selectedFeatureViewModel",null);r.__decorate([t.property({readOnly:!0})],v.prototype,"state",null);r.__decorate([t.property()],v.prototype,"title",void 0);r.__decorate([t.property()],v.prototype,"updateLocationEnabled",void 0);r.__decorate([t.property()],v.prototype,"view",void 0);r.__decorate([t.property()],v.prototype,"visible",void 0);r.__decorate([t.property()],v.prototype,"zoomFactor",void 0);r.__decorate([t.property()],v.prototype,"zoomToLocation",void 0);r.__decorate([t.property()],
v.prototype,"centerAtLocation",null);return v=r.__decorate([H.subclass("esri.widgets.Popup.PopupViewModel")],v)})},"esri/layers/LayerConstants":function(){define(["exports"],function(p){p.fallbackObjectIDAttribute="OBJECTID";Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../core/has ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils ../../widgets/Legend/styles/support/relationshipUtils ../../widgets/Legend/support/relationshipRampUtils".split(" "),
function(p,r,v,e,x,L,K,R,J,C){function t(u,y){if(y&&(u.style.filter=R.getCSSFilterFromEffectList(y),y=y.effects))for(const G of y)if("drop-shadow"===G?.type){0>G.offsetX?u.style.marginLeft=`${Math.abs(G.offsetX)}px`:u.style.marginRight=`${G.offsetX}px`;break}}async function f(u,y){switch(u.type){case "web-style":var {previewWebStyleSymbol:G}=await new Promise((z,ba)=>p(["./previewWebStyleSymbol"],z,ba));return G(u,f,y);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:G}=
await new Promise((z,ba)=>p(["./previewSymbol3D"],z,ba)),G(u,y);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:G}=await new Promise((z,ba)=>p(["./previewSymbol2D"],z,ba)),G(u,y);case "cim":return{previewCIMSymbol:G}=await new Promise((z,ba)=>p(["./previewCIMSymbol"],z,ba)),G(u,y)}}function w(u){return u&&"opacity"in u?u.opacity*w(u.parent):1}let F=null;const H=[255,255,255];r.getDisplayedColor=async function(u,
y){if(u){var G=w(u.layer||u.sourceLayer);if(null!=u.symbol&&(null==y||!0!==y.ignoreGraphicSymbol))return u="web-style"===u.symbol.type?await R.fetchWebStyleSymbol(u.symbol,y):u.symbol.clone(),R.getColorFromSymbol(u,G);var z=null!=y&&y.renderer||u.get("layer.renderer")||u.get("sourceLayer.renderer"),ba=await z.getSymbolAsync(u,y);if(ba){ba="web-style"===ba.type?await R.fetchWebStyleSymbol(ba,y):ba.clone();ba=R.getColorFromSymbol(ba,G);if(!("visualVariables"in z)||"visualVariables"in z&&!z.visualVariables||
"visualVariables"in z&&!z.visualVariables?.length)return ba;!z.arcadeRequiredForVisualVariables||null!=y&&null!=y.arcade||(y={...y},y.arcade=await e.loadArcade());var {getColor:Z,getOpacity:D}=await new Promise((n,E)=>p(["../../renderers/visualVariables/support/visualVariableUtils"],n,E)),q=[],m=[];for(const n of z.visualVariables)switch(n.type){case "color":q.push(n);break;case "opacity":m.push(n)}z=(z=0<q.length?q[q.length-1]:null)?Z(z,u,y):ba;u=(ba=0<m.length?m[m.length-1]:null)?D(ba,u,y):null;
null!=G&&(u=null!=u?u*G:G);return z?R.applyOpacityToColor(z,u):null}}};r.getDisplayedSymbol=async function(u,y){if(u){var G=u.sourceLayer,z=(null!=y&&(y.useSourceLayer??!1)?G:u.layer)??G;G=w(z);if(null!=u.symbol&&(null==y||!0!==y.ignoreGraphicSymbol))return u="web-style"===u.symbol.type?await R.fetchWebStyleSymbol(u.symbol,{...y,cache:null!=y?y.webStyleCache:null}):u.symbol.clone(),R.applyColorToSymbol(u,null,G),u;var ba=(null!=y?y.renderer:null)??(z&&"renderer"in z?z.renderer:null);if(z=ba&&"getSymbolAsync"in
ba?await ba.getSymbolAsync(u,y):null){z="web-style"===z.type?await z.fetchSymbol({...y,cache:null!=y?y.webStyleCache:null}):z.clone();if(!(ba&&"visualVariables"in ba&&ba.visualVariables&&ba.visualVariables.length))return R.applyColorToSymbol(z,null,G),z;"arcadeRequiredForVisualVariables"in ba&&ba.arcadeRequiredForVisualVariables&&(null==y||null==y.arcade)&&(y={...y},y.arcade=await e.loadArcade());var {getColor:Z,getOpacity:D,getAllSizes:q,getRotationAngle:m}=await new Promise((aa,fa)=>p(["../../renderers/visualVariables/support/visualVariableUtils"],
aa,fa)),n=[],E=[],Y=[],U=[];for(var ea of ba.visualVariables)switch(ea.type){case "color":n.push(ea);break;case "opacity":E.push(ea);break;case "rotation":U.push(ea);break;case "size":ea.target||Y.push(ea)}ea=(ea=!!n.length&&n[n.length-1])?Z(ea,u,y):null;E=(E=!!E.length&&E[E.length-1])?D(E,u,y):null;null!=G&&(E=null!=E?E*G:G);R.applyColorToSymbol(z,ea,E);Y.length&&(G=q(Y,u,y),await R.applySizesToSymbol(z,G));for(const aa of U)R.applyRotationToSymbol(z,m(aa,u,y),aa.axis);return z}}};r.renderColorRampPreviewHTML=
function(u,y={}){var G="horizontal"===y.align;const z=y.width??(G?75:24),ba=y.height??(G?24:75);var Z=y.gradient??!0,D=window.devicePixelRatio,q=z*D,m=ba*D;D=document.createElement("canvas");D.width=q;D.height=m;D.ariaLabel=y.ariaLabel??null;D.style.width=`${z}px`;D.style.height=`${ba}px`;const n=D.getContext("2d");var E=G?q:0;const Y=G?0:m;if(Z){const U=n.createLinearGradient(0,0,E,Y);G=u.length;const ea=1===G?0:1/(G-1);u.forEach((aa,fa)=>U.addColorStop(fa*ea,aa.toString()));n.fillStyle=U;n.fillRect(0,
0,q,m)}else{q=G?q/u.length:q;m=G?m:m/u.length;E=Z=0;for(const U of u)n.fillStyle=U.toString(),n.fillRect(Z,E,q,m),Z=G?Z+q:0,E=G?0:E+m}u=document.createElement("div");u.style.width=`${z}px`;u.style.height=`${ba}px`;t(u,y?.effectList);u.appendChild(D);return u};r.renderDotDensityPreviewHTML=function(u,y,G){const {backgroundColor:z,outline:ba,dotSize:Z}=u;var D=G&&G.swatchSize||L.SymbolSizeDefaults.size;const q=Math.round(D*D/Z**2*.8),m=window.devicePixelRatio;u=document.createElement("canvas");const n=
D*m;u.width=n;u.height=n;u.style.width=`${u.width/m}px`;u.style.height=`${u.height/m}px`;const E=u.getContext("2d");z&&(E.fillStyle=z.toCss(!0),E.fillRect(0,0,n,n),E.fill());E.fillStyle=y?.toCss(!0)??"";if(F&&F.length/2===q)for(y=0;y<2*q;y+=2)E.fillRect(F[y],F[y+1],Z*m,Z*m),E.fill();else for(F=[],y=0;y<2*q;y+=2){const Y=Math.floor(Math.random()*(n-0+1)),U=Math.floor(Math.random()*(n-0+1));F.push(Y,U);E.fillRect(Y,U,Z*m,Z*m);E.fill()}ba&&(ba.color&&(E.strokeStyle=ba.color.toCss(!0)),E.lineWidth=ba.width,
E.strokeRect(0,0,n,n));D=new Image(D,D);D.src=u.toDataURL();D.ariaLabel=G?.ariaLabel??null;D.alt=G?.ariaLabel??"";return D};r.renderPieChartPreviewHTML=function(u,y={}){const G=y.radius||40;var z=2*Math.PI*G,ba=u.length;const Z=z/ba,D=[],q=x.getStroke(y.outline);null!=q?.width&&(q.width*=2);(q||y.backgroundColor)&&D.push({shape:{type:"circle",cx:G,cy:G,r:G},fill:y.backgroundColor,stroke:q,offset:[0,0]});const m=y.values,n=m&&m.length===ba&&100===m.reduce((Y,U)=>Y+U,0),E=[0];for(let Y=0;Y<ba;Y++){let U=
null;n&&(U=m[Y]*z/100,E.push(U+E[Y]));D.push({shape:{type:"circle",cx:G,cy:G,r:G/2},fill:[0,0,0,0],stroke:{width:G,dashArray:`${(U??Z)/2} ${z}`,dashoffset:`-${n?E[Y]/2:Z/2*Y}`,color:u[Y]},offset:[0,0]})}ba=null;u=2*G+(q?.width||0);if(z=y.holePercentage)q&&D.push({shape:{type:"circle",cx:G,cy:G,r:G*z},fill:null,stroke:q,offset:[0,0]}),ba=u/2,ba=[[{shape:{type:"circle",cx:ba,cy:ba,r:ba},fill:H,stroke:q?{...q,color:H}:null,offset:[0,0]},{shape:{type:"circle",cx:ba,cy:ba,r:G*z},fill:[0,0,0],stroke:null,
offset:[0,0]}]];return K.renderSymbol([D],[u,u],{effectView:y.effectList,ignoreStrokeWidth:!0,masking:ba,rotation:-90,ariaLabel:y.ariaLabel})};r.renderPreviewHTML=f;r.renderRelationshipRampPreviewHTML=function(u,y={}){const G=u?.authoringInfo;if("relationship"!==G?.type||!G?.numClasses||!u.uniqueValueInfos)return null;const {focus:z,numClasses:ba}=G,Z=C.getRelationshipRampElement({focus:z,numClasses:ba,infos:u.uniqueValueInfos});u=y&&y.node||document.createElement("div");K.renderOnce(u,()=>J.renderRelationshipRamp(Z,
y.id||"relationship",{opacity:y.opacity||1,effectList:y.effectList,ariaLabel:y.ariaLabel}));return u};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(p,r){function v(e,x){return Math.round(Math.min(Math.max(e+191.25*x,0),255))}p.SymbolSizeDefaults=void 0;(function(e){e[e.size=22]="size";e[e.lineWidth=50]="lineWidth";e[e.maxSize=120]="maxSize";e[e.maxOutlineSize=80]="maxOutlineSize";e[e.tallSymbolWidth=
20]="tallSymbolWidth"})(p.SymbolSizeDefaults||(p.SymbolSizeDefaults={}));p.adjustColorBrightness=function(e,x){if(null==e)return new r;if("type"in e&&("linear"===e.type||"pattern"===e.type))return e;e=new r(e);return new r([v(e.r,x),v(e.g,x),v(e.b,x),e.a])};p.adjustColorComponentBrightness=v;p.getConeShapes=function(e,x){let L=x?p.SymbolSizeDefaults.tallSymbolWidth:e;x=x?4:6;L=L<=p.SymbolSizeDefaults.size?L-.5*x:L-x;x=.15*L;const K=L;e-=x;return[{type:"ellipse",cx:.5*L,cy:e,rx:.5*L,ry:x},{type:"path",
path:[{command:"M",values:[.5*K,0]},{command:"L",values:[K,e]},{command:"L",values:[0,e]},{command:"Z",values:[]}]}]};p.getCubeShapes=function(e,x){let L=x?p.SymbolSizeDefaults.tallSymbolWidth:e;var K=x?4:6;K=L=L<=p.SymbolSizeDefaults.size?L-.5*K:L-K;x=x?.35*L:.5*L;return[{type:"path",path:[{command:"M",values:[.5*K,0]},{command:"L",values:[K,.5*x]},{command:"L",values:[.5*K,x]},{command:"L",values:[0,.5*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[.5*
K,x]},{command:"L",values:[.5*K,e]},{command:"L",values:[0,e-.5*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*K,x]},{command:"L",values:[.5*K,e]},{command:"L",values:[K,e-.5*x]},{command:"L",values:[K,.5*x]},{command:"Z",values:[]}]}]};p.getCylinderShapes=function(e,x){var L=x?p.SymbolSizeDefaults.tallSymbolWidth:e;x=x?4:6;L=L<=p.SymbolSizeDefaults.size?L-.5*x:L-x;x=.5*L;const K=.15*L;e-=K;return[{type:"ellipse",cx:.5*L,cy:e,rx:x,ry:K},{type:"path",path:[{command:"M",values:[0,
K]},{command:"L",values:[0,e]},{command:"L",values:[L,e]},{command:"L",values:[L,K]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*L,cy:K,rx:x,ry:K}]};p.getDiamondShapes=function(e){var x=e;x=x<p.SymbolSizeDefaults.size?x-2:x-4;const L=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*x,0]},{command:"L",values:[x,.5*e-L]},{command:"L",values:[.45*x-L,.5*e+L]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*x,0]},{command:"L",values:[.45*x-L,.5*e+L]},
{command:"L",values:[0,.5*e-L]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*e-L]},{command:"L",values:[.45*x-L,.5*e+L]},{command:"L",values:[.45*x,e]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*x,e]},{command:"L",values:[x,.5*e-L]},{command:"L",values:[.45*x-L,.5*e+L]},{command:"Z",values:[]}]}]};p.getExtrudeSymbolShapes=function(e){const x=p.SymbolSizeDefaults.size;e*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*x]},{command:"L",values:[.3*
x,.7*x]},{command:"L",values:[.3*x,.7*x+e]},{command:"L",values:[0,.7*x+e-.35*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*x,.7*x]},{command:"L",values:[.3*x,.7*x+e]},{command:"L",values:[x,e]},{command:"L",values:[x,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*x,0]},{command:"L",values:[x,0]},{command:"L",values:[.3*x,.7*x]},{command:"L",values:[0,.35*x]},{command:"Z",values:[]}]}]};p.getInvertedConeShapes=function(e){let x=e;x=x<p.SymbolSizeDefaults.size?
x-3:x-6;const L=.15*x,K=x;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[K,0]},{command:"L",values:[.5*K,e-L]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*x,cy:0,rx:.5*x,ry:L}]};p.getPathSymbolShapes=function(e,x,L){var K=p.SymbolSizeDefaults.size;let R=K,J=K;1>e?R*=.75:1<e&&(J*=1.25);e=K;x&&L&&(R=J=e=K=0);return[{type:"path",path:[{command:"M",values:[e,0]},{command:"L",values:[L?e:.875*e,0]},{command:"L",values:[L?R-.5*e:0,J-.5*K]},{command:"L",values:[R-.5*e,J-.5*
K]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[e,0]},{command:"L",values:[e,x?0:.125*K]},{command:"L",values:[R-.5*e,x?J-.5*K:K]},{command:"L",values:[R-.5*e,J-.5*K]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[R-.5*e,J-.5*K]},{command:"L",values:[L?R-.5*e:0,J-.5*K]},{command:"L",values:[L?R-.5*e:0,x?J-.5*K:K]},{command:"L",values:[R-.5*e,x?J-.5*K:K]},{command:"Z",values:[]}]}]};p.getTetrahedronShapes=function(e){var x=e;x=x<p.SymbolSizeDefaults.size?x-
1:x-2;return[{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[e,x]},{command:"L",values:[.45*e,.6*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[.45*e,.6*x]},{command:"L",values:[0,x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,x]},{command:"L",values:[.45*e,.6*x]},{command:"L",values:[e,x]},{command:"Z",values:[]}]}]};p.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},
{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
p.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(p,r,v,e,x,L,K,R,J,C){function t(F,H){w.append(F,H);w.detach(H)}function f(F,H,u){return F?v(F,{responseType:"image"}).then(y=>{y=y.data;const G=y.width,z=y.height,ba=G/z;let Z=H;u&&(Z=Math.min(Z,Math.max(G,z)));return{image:y,width:1>=ba?Math.ceil(Z*ba):Z,height:1>=ba?Z:Math.ceil(Z/ba)}}):Promise.reject(new x("renderUtils: imageDataSize","href not provided."))}const w=R.createProjector();p.renderOnce=t;p.renderSymbol=function(F,H,u){const y=Math.ceil(H[0]),G=Math.ceil(H[1]);if(!F.some(z=>
!!z.length))return null;H=u&&u.node||document.createElement("div");null!=u.opacity&&(H.style.opacity=u.opacity.toString());null!=u.effectView&&(H.style.filter=C.getCSSFilterFromEffectList(u.effectView));t(H,()=>J.renderSVG(F,y,G,u));return H};p.tintImageWithColor=function(F,H,u,y,G){return f(F,H,G).then(z=>{const ba=z.width??H,Z=z.height??H;var D;if(D=z.image)D=u&&"ignore"!==y?"multiply"===y&&255===u.r&&255===u.g&&255===u.b&&1===u.a?!1:!0:!1;if(D){var q=z.image.width,m=z.image.height;L("edge")&&/\.svg$/i.test(F)&&
(--q,--m);D=Math.ceil(ba);var n=Math.ceil(Z);var E=document.createElement("canvas");E.width=D;E.height=n;E.style.width=D+"px";E.style.height=n+"px";E=E.getContext("2d");E.clearRect(0,0,D,n);D=E;D.drawImage(z.image,0,0,q,m,0,0,ba,Z);n=D.getImageData(0,0,ba,Z);E=[u.r/255,u.g/255,u.b/255,u.a];const U=e.toHSV(u);for(let ea=0;ea<n.data.length;ea+=4){z=n.data;q=ea;m=E;var Y=U;switch(y){case "multiply":z[q]*=m[0];z[q+1]*=m[1];z[q+2]*=m[2];z[q+3]*=m[3];break;default:const aa=e.toHSV({r:z[q],g:z[q+1],b:z[q+
2]});aa.h=Y.h;aa.s=Y.s;aa.v=aa.v/100*Y.v;Y=e.toRGB(aa);z[q]=Y.r;z[q+1]=Y.g;z[q+2]=Y.b;z[q+3]*=m[3]}}D.putImageData(n,0,0);F=D.canvas.toDataURL("image/png")}else(D=r.id&&r.id.findCredential(F))&&D.token&&(z=F.includes("?")?"\x26":"?",F=`${F}${z}token=${D.token}`);return{url:F,width:ba,height:Z}}).catch(()=>({url:F,width:H,height:H}))};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports"],function(p){function r(C,t){const f=[];let w,F;if(C[0].length!==
t.length)throw Error("dimensions do not match");const H=C.length,u=C[0].length;let y=0;for(w=0;w<H;w++){for(F=y=0;F<u;F++)y+=C[w][F]*t[F];f.push(y)}return f}function v(C){C=[C.r/255,C.g/255,C.b/255].map(t=>.04045>=t?t/12.92:((t+.055)/1.055)**2.4);C=r(R,C);return{x:100*C[0],y:100*C[1],z:100*C[2]}}function e(C){C=r(J,[C.x/100,C.y/100,C.z/100]).map(t=>Math.min(1,Math.max(.0031308>=t?12.92*t:1.055*t**(1/2.4)-.055,0)));return{r:Math.round(255*C[0]),g:Math.round(255*C[1]),b:Math.round(255*C[2])}}function x(C){C=
[C.x/95.047,C.y/100,C.z/108.883].map(t=>t>(6/29)**3?t**(1/3):1/3*(29/6)**2*t+4/29);return{l:116*C[1]-16,a:500*(C[0]-C[1]),b:200*(C[1]-C[2])}}function L(C){const t=C.l;C=[(t+16)/116+C.a/500,(t+16)/116,(t+16)/116-C.b/200].map(f=>f>6/29?f**3:3*(6/29)**2*(f-4/29));return{x:95.047*C[0],y:100*C[1],z:108.883*C[2]}}function K(C){if("r"in C&&"g"in C&&"b"in C)return C;if("l"in C&&"c"in C&&"h"in C){var t=C.c,f=C.h;return e(L({l:C.l,a:t*Math.cos(f),b:t*Math.sin(f)}))}if("l"in C&&"a"in C&&"b"in C)return e(L(C));
if("x"in C&&"y"in C&&"z"in C)return e(C);if("h"in C&&"s"in C&&"v"in C){f=(C.h+360)%360/60;t=C.v/100*255;C=C.s/100*t;const w=C*(1-Math.abs(f%2-1));switch(Math.floor(f)){case 0:f={r:C,g:w,b:0};break;case 1:f={r:w,g:C,b:0};break;case 2:f={r:0,g:C,b:w};break;case 3:f={r:0,g:w,b:C};break;case 4:f={r:w,g:0,b:C};break;case 5:case 6:f={r:C,g:0,b:w};break;default:f={r:0,g:0,b:0}}f.r=Math.round(f.r+t-C);f.g=Math.round(f.g+t-C);f.b=Math.round(f.b+t-C);return f}return C}const R=[[.4124,.3576,.1805],[.2126,.7152,
.0722],[.0193,.1192,.9505]],J=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];p.toHSV=function(C){if("h"in C&&"s"in C&&"v"in C)return C;var t=K(C);C=t.r;const f=t.g,w=t.b;t=Math.max(C,f,w);const F=t-Math.min(C,f,w);C=0===F?0:t===C?(f-w)/F%6:t===f?(w-C)/F+2:(C-f)/F+4;0>C&&(C+=6);return{h:60*C,s:100*(0===F?0:F/t),v:100/255*t}};p.toLAB=function(C){return"l"in C&&"a"in C&&"b"in C?C:x(v(K(C)))};p.toLCH=function(C){if(!("l"in C&&"c"in C&&"h"in C)){var t=x(v(K(C)));C=t.l;var f=t.a;const w=
t.b;t=Math.sqrt(f*f+w*w);f=Math.atan2(w,f);f=0<f?f:f+2*Math.PI;C={l:C,c:t,h:f}}return C};p.toRGB=K;p.toXYZ=function(C){return"x"in C&&"y"in C&&"z"in C?C:v(K(C))};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../core/maybe ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),function(p,r,v,e,x,L,K,R){function J(l,P){l*=da/180;
return Math.abs(P*Math.sin(l))+Math.abs(P*Math.cos(l))}function C(l){return l.map(P=>`${P.command} ${P.values.join(" ")}`).join(" ").trim()}function t(l,P,W,Q){if(l){if("circle"===l.type)return R.tsx("circle",{fill:P,"fill-rule":"evenodd",stroke:W.color,"stroke-width":W.width,"stroke-linecap":W.cap,"stroke-linejoin":W.join,"stroke-dasharray":W.dashArray,"stroke-dashoffset":W.dashOffset,"stroke-miterlimit":"4",cx:l.cx,cy:l.cy,r:l.r});if("ellipse"===l.type)return R.tsx("ellipse",{fill:P,"fill-rule":"evenodd",
stroke:W.color,"stroke-width":W.width,"stroke-linecap":W.cap,"stroke-linejoin":W.join,"stroke-dasharray":W.dashArray,"stroke-miterlimit":"4",cx:l.cx,cy:l.cy,rx:l.rx,ry:l.ry});if("rect"===l.type)return R.tsx("rect",{fill:P,"fill-rule":"evenodd",stroke:W.color,"stroke-width":W.width,"stroke-linecap":W.cap,"stroke-linejoin":W.join,"stroke-dasharray":W.dashArray,"stroke-miterlimit":"4",x:l.x,y:l.y,width:l.width,height:l.height});if("image"===l.type)return R.tsx("image",{href:l.src,x:l.x,y:l.y,width:l.width,
height:l.height,preserveAspectRatio:"none"});if("path"===l.type)return l="string"!==typeof l.path?C(l.path):l.path,R.tsx("path",{fill:P,"fill-rule":"evenodd",stroke:W.color,"stroke-width":W.width,"stroke-linecap":W.cap,"stroke-linejoin":W.join,"stroke-dasharray":W.dashArray,"stroke-miterlimit":"4",d:l});if("text"===l.type)return e.assertIsSome(Q),R.tsx("text",{"dominant-baseline":Q.dominantBaseline,fill:P,"fill-rule":"evenodd",stroke:W.color,"stroke-width":W.width,"stroke-linecap":W.cap,"stroke-linejoin":W.join,
"stroke-dasharray":W.dashArray,"stroke-miterlimit":"4","text-anchor":Q.align,"text-decoration":Q.decoration,kerning:Q.kerning,rotate:Q.rotate,"text-rendering":Y,"font-style":Q.font.style,"font-variant":Q.font.variant,"font-weight":Q.font.weight,"font-size":Q.font.size,"font-family":Q.font.family,x:l.x,y:l.y},l.text)}return null}function f(l){const P={fill:"none",pattern:null,linearGradient:null};if(l)if("type"in l&&"pattern"===l.type){var W=`patternId-${++n}`;P.fill=`url(#${W})`;P.pattern={id:W,x:l.x,
y:l.y,width:l.width,height:l.height,image:{x:0,y:0,width:l.width,height:l.height,href:l.src}}}else"type"in l&&"linear"===l.type?(W=`linearGradientId-${++E}`,P.fill=`url(#${W})`,P.linearGradient={id:W,x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,stops:l.colors.map(Q=>({offset:Q.offset,color:Q.color&&(new r(Q.color)).toString()}))}):l&&(l=new r(l),P.fill=l.toString());return P}function w(l){const P={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(l&&(null!=l.width&&(P.width=l.width),
l.cap&&(P.cap=l.cap),l.join&&(P.join=l.join.toString()),l.color&&(P.color=(new r(l.color)).toString()),l.dashArray&&(P.dashArray=l.dashArray),l.dashArray&&(P.dashOffset=l.dashoffset),l.style)){let W=null;l.style in O&&(W=O[l.style]);if(Array.isArray(W)){W=W.slice(0);const Q=l.width??0;for(let X=0;X<W.length;++X)W[X]*=Q;if("butt"!==l.cap){for(l=0;l<W.length;l+=2)W[l]-=Q,1>W[l]&&(W[l]=1);for(l=1;l<W.length;l+=2)W[l]+=Q}W=W.join(",")}P.dashArray=W}return P}function F(l,P){const W={align:null,decoration:null,
kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(l){const Q=l.alignBaseline;W.align=l.align;W.dominantBaseline="baseline"===Q?"auto":"top"===Q?"text-top":"bottom"===Q?"hanging":Q;W.decoration=l.decoration;W.kerning=l.kerning?"auto":"0";W.rotate=l.rotated?"90":"0";e.assertIsSome(P);W.font.style=P.style||"normal";W.font.variant=P.variant||"normal";W.font.weight=P.weight||"normal";W.font.size=P.size&&P.size.toString()||"10pt";W.font.family=P.family||"serif"}return W}
function H(l){const {pattern:P,linearGradient:W}=l;return P?R.tsx("pattern",{id:P.id,patternUnits:"userSpaceOnUse",x:P.x,y:P.y,width:P.width,height:P.height},R.tsx("image",{x:P.image.x,y:P.image.y,width:P.image.width,height:P.image.height,href:P.image.href})):W?(l=W.stops.map((Q,X)=>R.tsx("stop",{key:`${X}-stop`,offset:Q.offset,"stop-color":Q.color})),R.tsx("linearGradient",{id:W.id,gradientUnits:"userSpaceOnUse",x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2},l)):null}function u(l,P){if(!l||0===l.length)return null;
const W=[];for(const Q of l){const {shape:X,fill:T,stroke:k,font:S}=Q;l=f(T);const N=w(k),ka="text"===X.type?F(X,S):null;(l=t(X,l.fill,N,ka))&&W.push(l)}return R.tsx("mask",{id:P,maskUnits:"userSpaceOnUse"},R.tsx("g",null,W))}function y(l,P,W,Q,X){L.scale(l,L.identity(l),[P,W]);l[4]=l[4]*P-Q*P+Q;l[5]=l[5]*W-X*W+X;return l}function G(l,P){if(aa&&"left"in aa){null!=aa.left&&aa.left>l&&(aa.left=l);if(null==aa.right||aa.right<l)aa.right=l;if(null==aa.top||aa.top>P)aa.top=P;if(null==aa.bottom||aa.bottom<
P)aa.bottom=P}else aa={left:l,bottom:P,right:l,top:P}}function z(l){const P=l.args,W=P.length;switch(l.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(l=0;l<W;l+=2)G(P[l],P[l+1]);fa.x=P[W-2];fa.y=P[W-1];break;case "H":for(l=0;l<W;++l)G(P[l],fa.y);fa.x=P[W-1];break;case "V":for(l=0;l<W;++l)G(fa.x,P[l]);fa.y=P[W-1];break;case "m":l=0;"x"in fa||(G(fa.x=P[0],fa.y=P[1]),l=2);for(;l<W;l+=2)G(fa.x+=P[l],fa.y+=P[l+1]);break;case "l":case "t":for(l=0;l<W;l+=2)G(fa.x+=P[l],fa.y+=P[l+1]);break;
case "h":for(l=0;l<W;++l)G(fa.x+=P[l],fa.y);break;case "v":for(l=0;l<W;++l)G(fa.x,fa.y+=P[l]);break;case "c":for(l=0;l<W;l+=6)G(fa.x+P[l],fa.y+P[l+1]),G(fa.x+P[l+2],fa.y+P[l+3]),G(fa.x+=P[l+4],fa.y+=P[l+5]);break;case "s":case "q":for(l=0;l<W;l+=4)G(fa.x+P[l],fa.y+P[l+1]),G(fa.x+=P[l+2],fa.y+=P[l+3]);break;case "A":for(l=0;l<W;l+=7)G(P[l+5],P[l+6]);fa.x=P[W-2];fa.y=P[W-1];break;case "a":for(l=0;l<W;l+=7)G(fa.x+=P[l+5],fa.y+=P[l+6])}}function ba(l,P,W){const Q=U[l.toLowerCase()];"number"===typeof Q&&
(Q?P.length>=Q&&(l={action:l,args:P.slice(0,P.length-P.length%Q)},W.push(l),z(l)):(l={action:l,args:[]},W.push(l),z(l)))}function Z(l){const P={x:0,y:0,width:0,height:0};if("circle"===l.type)P.x=l.cx-l.r,P.y=l.cy-l.r,P.width=2*l.r,P.height=2*l.r;else if("ellipse"===l.type)P.x=l.cx-l.rx,P.y=l.cy-l.ry,P.width=2*l.rx,P.height=2*l.ry;else if("image"===l.type||"rect"===l.type)P.x=l.x,P.y=l.y,P.width=l.width,P.height=l.height;else if("path"===l.type){var W=e.unwrapOrThrow;{const T=("string"!==typeof l.path?
C(l.path):l.path).match(ea),k=[];aa={};fa={};if(T){l="";var Q=[],X=T.length;for(let S=0;S<X;++S){const N=T[S],ka=parseFloat(N);isNaN(ka)?(l&&ba(l,Q,k),Q=[],l=N):Q.push(ka)}ba(l,Q,k);l={x:0,y:0,width:0,height:0};aa&&"left"in aa&&(l.x=aa.left,l.y=aa.top,l.width=aa.right-aa.left,l.height=aa.bottom-aa.top)}else l=null}W=W.call(e,l);P.x=W.x;P.y=W.y;P.width=W.width;P.height=W.height}return P}function D(l){const P={x:0,y:0,width:0,height:0};let W=null,Q=Number.NEGATIVE_INFINITY,X=Number.NEGATIVE_INFINITY;
for(const T of l)W?(W.x=Math.min(W.x,T.x),W.y=Math.min(W.y,T.y),Q=Math.max(Q,T.x+T.width),X=Math.max(X,T.y+T.height)):(W=P,W.x=T.x,W.y=T.y,Q=T.x+T.width,X=T.y+T.height);W&&(W.width=Q-W.x,W.height=X-W.y);return W}function q(l,P,W,Q,X,T,k,S,N){var ka=(k&&T?J(T,P):P)/2,oa=(k&&T?J(T,W):W)/2;if(N){var sa=N[0];N=N[1];ka=(k&&T?J(T,sa):sa)/2;oa=(k&&T?J(T,N):N)/2}sa=l.width+Q;var M=l.height+Q;N=x.create();k=x.create();var ja=!1;if(X&&0!==sa&&0!==M){X=P!==W?P/W:sa/M;ja=P>W?P:W;let qa=1,ua=1;isNaN(ja)||(1<X?
(qa=ja/sa,ua=ja/X/M):(ua=ja/M,qa=ja*X/sa));L.multiply(k,k,y(N,qa,ua,ka,oa));ja=!0}X=l.x+(sa-Q)/2;l=l.y+(M-Q)/2;Q=L.multiply;ka-=X;oa-=l;ka=L.translate(N,L.identity(N),[ka,oa]);Q.call(L,k,k,ka);!ja&&(sa>P||M>W)&&(ka=sa/P>M/W,P=(ka?P:W)/(ka?sa:M),L.multiply(k,k,y(N,P,P,X,l)));T&&(P=L.multiply,W=T%360*Math.PI/180,L.rotate(N,L.identity(N),W),T=Math.cos(W),W=Math.sin(W),sa=N[4],M=N[5],N[4]=sa*T-M*W+l*W-X*T+X,N[5]=M*T+sa*W-X*W-l*T+l,P.call(L,k,k,N));S&&(T=L.multiply,P=S[0],S=S[1],S=L.translate(N,L.identity(N),
[P,S]),T.call(L,k,k,S));return`matrix(${k[0]},${k[1]},${k[2]},${k[3]},${k[4]},${k[5]})`}function m(l,P,W){l=l?.effects.find(S=>"bloom"===S.type);if(!l)return null;const {strength:Q,radius:X}=l;l=0<Q?X:0;const T=(Q+l)*P,k=4*Q+1;return R.tsx("filter",{id:`bloom${W}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},R.tsx("feMorphology",{operator:"dilate",radius:(Q+.5*l)*5**(P/100)*(.4+P/100),in:"SourceGraphic",result:"dilate"}),R.tsx("feGaussianBlur",{in:"dilate",stdDeviation:T/
25,result:"blur"}),R.tsx("feGaussianBlur",{in:"blur",stdDeviation:T/50,result:"intensityBlur"}),R.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},R.tsx("feFuncR",{type:"linear",slope:k}),R.tsx("feFuncG",{type:"linear",slope:k}),R.tsx("feFuncB",{type:"linear",slope:k})),R.tsx("feMerge",null,R.tsx("feMergeNode",{in:"intensityBlur"}),R.tsx("feMergeNode",{in:"intensityBrightness"}),R.tsx("feGaussianBlur",{stdDeviation:Q/10})))}let n=0,E=0;K=v("android");const Y=v("chrome")||
K&&4<=K?"auto":"optimizeLegibility",U={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},ea=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let aa={},fa={};const O={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},da=Math.PI;let la=1;p.computeBBox=D;p.generateFillAttributes=f;p.generateStrokeAttributes=w;p.generateTextAttributes=F;p.getBoundingBox=
Z;p.getTransformMatrix=q;p.renderDef=H;p.renderSVG=function(l,P,W,Q={}){const X=[],T=[],k=++la,S=m(Q.effectView,P,k);var N=null;S&&(N=Q.effectView?.effects.find(ja=>"bloom"===ja.type),N=(N.strength?N.strength+N.radius/2:0)/3,N=[Math.max(P+P*N,10),Math.max(W+W*N,10)]);for(let ja=0;ja<l.length;ja++){var ka=l[ja];const qa=[];var oa=[],sa=0,M=0;let ua=0;for(const ya of ka){const {shape:Aa,fill:Ba,stroke:Ia,font:$a,offset:Xa}=ya;Q.ignoreStrokeWidth||"text"===Aa.type||(sa+=Ia&&Ia.width||0);ka=f(Ba);const ib=
w(Ia),Za="text"===Aa.type?F(Aa,$a):null;X.push(H(ka));qa.push(t(Aa,ka.fill,ib,Za));oa.push(Z(Aa));Xa&&(M+=Xa[0],ua+=Xa[1])}oa=e.unwrapOrThrow(D(oa));sa=q(oa,P,W,sa,Q.scale??!1,Q.rotation,Q.useRotationSize??!1,[M,ua],N);M=null;Q.masking&&(M=`mask-${ja}`,X.push(u(Q.masking[ja],M)),M=`url(#${M})`);T.push(M?R.tsx("g",{mask:M},R.tsx("g",{transform:sa},qa)):R.tsx("g",{transform:sa},qa))}Q.useRotationSize&&Q.rotation&&(P=J(Q.rotation,P),W=J(Q.rotation,W));S&&(e.assertIsSome(N),P=N[0],W=N[1]);return R.tsx("svg",
{xmlns:"http://www.w3.org/2000/svg",width:P,height:W,style:"display: block;","aria-labelledby":Q.ariaLabel,role:"img",focusable:!1},S,R.tsx("defs",null,X),S?R.tsx("g",{filter:`url(#bloom${k})`},T):T)};p.renderShape=t;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat2df32":function(){define(["exports"],function(p){function r(){const J=new Float32Array(6);J[0]=1;J[3]=1;return J}function v(J){const C=new Float32Array(6);C[0]=J[0];C[1]=J[1];C[2]=J[2];C[3]=J[3];C[4]=J[4];
C[5]=J[5];return C}function e(J,C,t,f,w,F){const H=new Float32Array(6);H[0]=J;H[1]=C;H[2]=t;H[3]=f;H[4]=w;H[5]=F;return H}function x(J,C){return new Float32Array(J,C,6)}function L(J,C,t,f){const w=C[f];C=C[f+1];J[f]=t[0]*w+t[2]*C+t[4];J[f+1]=t[1]*w+t[3]*C+t[5]}function K(J,C,t,f=0,w=0,F=2){for(w=w||C.length/F;f<w;f++)L(J,C,t,f*F)}const R=Object.freeze(Object.defineProperty({__proto__:null,clone:v,create:r,createView:x,fromValues:e,transform:L,transformMany:K},Symbol.toStringTag,{value:"Module"}));
p.clone=v;p.create=r;p.createView=x;p.fromValues=e;p.mat2df32=R;p.transform=L;p.transformMany=K})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(p,r){function v(m,n){m[0]=n[0];m[1]=n[1];m[2]=n[2];m[3]=n[3];m[4]=n[4];m[5]=n[5];return m}function e(m){m[0]=1;m[1]=0;m[2]=0;m[3]=1;m[4]=0;m[5]=0;return m}function x(m,n,E,Y,U,ea,aa){m[0]=n;m[1]=E;m[2]=Y;m[3]=U;m[4]=ea;m[5]=aa;return m}function L(m,n){const E=n[0],Y=n[1],U=n[2],ea=n[3],aa=n[4];n=n[5];let fa=E*ea-Y*U;if(!fa)return null;
fa=1/fa;m[0]=ea*fa;m[1]=-Y*fa;m[2]=-U*fa;m[3]=E*fa;m[4]=(U*n-ea*aa)*fa;m[5]=(Y*aa-E*n)*fa;return m}function K(m){return m[0]*m[3]-m[1]*m[2]}function R(m,n,E){const Y=n[0],U=n[1],ea=n[2],aa=n[3],fa=n[4];n=n[5];const O=E[0],da=E[1],la=E[2],l=E[3],P=E[4];E=E[5];m[0]=Y*O+ea*da;m[1]=U*O+aa*da;m[2]=Y*la+ea*l;m[3]=U*la+aa*l;m[4]=Y*P+ea*E+fa;m[5]=U*P+aa*E+n;return m}function J(m,n,E){const Y=n[0],U=n[1],ea=n[2],aa=n[3],fa=n[4];n=n[5];const O=Math.sin(E);E=Math.cos(E);m[0]=Y*E+ea*O;m[1]=U*E+aa*O;m[2]=Y*-O+
ea*E;m[3]=U*-O+aa*E;m[4]=fa;m[5]=n;return m}function C(m,n,E){const Y=n[1],U=n[2],ea=n[3],aa=n[4],fa=n[5],O=E[0];E=E[1];m[0]=n[0]*O;m[1]=Y*O;m[2]=U*E;m[3]=ea*E;m[4]=aa;m[5]=fa;return m}function t(m,n,E){const Y=n[0],U=n[1],ea=n[2],aa=n[3],fa=n[4];n=n[5];const O=E[0];E=E[1];m[0]=Y;m[1]=U;m[2]=ea;m[3]=aa;m[4]=Y*O+ea*E+fa;m[5]=U*O+aa*E+n;return m}function f(m,n){const E=Math.sin(n);n=Math.cos(n);m[0]=n;m[1]=E;m[2]=-E;m[3]=n;m[4]=0;m[5]=0;return m}function w(m,n){m[0]=n[0];m[1]=0;m[2]=0;m[3]=n[1];m[4]=
0;m[5]=0;return m}function F(m,n){m[0]=1;m[1]=0;m[2]=0;m[3]=1;m[4]=n[0];m[5]=n[1];return m}function H(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"}function u(m){return Math.sqrt(m[0]**2+m[1]**2+m[2]**2+m[3]**2+m[4]**2+m[5]**2+1)}function y(m,n,E){m[0]=n[0]+E[0];m[1]=n[1]+E[1];m[2]=n[2]+E[2];m[3]=n[3]+E[3];m[4]=n[4]+E[4];m[5]=n[5]+E[5];return m}function G(m,n,E){m[0]=n[0]-E[0];m[1]=n[1]-E[1];m[2]=n[2]-E[2];m[3]=n[3]-E[3];m[4]=n[4]-E[4];m[5]=n[5]-E[5];return m}function z(m,
n,E){m[0]=n[0]*E;m[1]=n[1]*E;m[2]=n[2]*E;m[3]=n[3]*E;m[4]=n[4]*E;m[5]=n[5]*E;return m}function ba(m,n,E,Y){m[0]=n[0]+E[0]*Y;m[1]=n[1]+E[1]*Y;m[2]=n[2]+E[2]*Y;m[3]=n[3]+E[3]*Y;m[4]=n[4]+E[4]*Y;m[5]=n[5]+E[5]*Y;return m}function Z(m,n){return m[0]===n[0]&&m[1]===n[1]&&m[2]===n[2]&&m[3]===n[3]&&m[4]===n[4]&&m[5]===n[5]}function D(m,n){const E=m[0],Y=m[1],U=m[2],ea=m[3],aa=m[4];m=m[5];const fa=n[0],O=n[1],da=n[2],la=n[3],l=n[4];n=n[5];const P=r.getEpsilon();return Math.abs(E-fa)<=P*Math.max(1,Math.abs(E),
Math.abs(fa))&&Math.abs(Y-O)<=P*Math.max(1,Math.abs(Y),Math.abs(O))&&Math.abs(U-da)<=P*Math.max(1,Math.abs(U),Math.abs(da))&&Math.abs(ea-la)<=P*Math.max(1,Math.abs(ea),Math.abs(la))&&Math.abs(aa-l)<=P*Math.max(1,Math.abs(aa),Math.abs(l))&&Math.abs(m-n)<=P*Math.max(1,Math.abs(m),Math.abs(n))}const q=Object.freeze(Object.defineProperty({__proto__:null,add:y,copy:v,determinant:K,equals:D,exactEquals:Z,frob:u,fromRotation:f,fromScaling:w,fromTranslation:F,identity:e,invert:L,mul:R,multiply:R,multiplyScalar:z,
multiplyScalarAndAdd:ba,rotate:J,scale:C,set:x,str:H,sub:G,subtract:G,translate:t},Symbol.toStringTag,{value:"Module"}));p.add=y;p.copy=v;p.determinant=K;p.equals=D;p.exactEquals=Z;p.frob=u;p.fromRotation=f;p.fromScaling=w;p.fromTranslation=F;p.identity=e;p.invert=L;p.mat2d=q;p.mul=R;p.multiply=R;p.multiplyScalar=z;p.multiplyScalarAndAdd=ba;p.rotate=J;p.scale=C;p.set=x;p.str=H;p.sub=G;p.subtract=G;p.translate=t})},"esri/widgets/Legend/styles/support/relationshipUtils":function(){define(["exports",
"../../../../symbols/support/svgUtils","../../../../symbols/support/utils","../../../support/widgetUtils","../../../support/jsxFactory"],function(p,r,v,e,x){function L(J,C,t){const f=`${t}_arrowStart`;t=`${t}_arrowEnd`;J="left"===J;const w={markerStart:null,markerEnd:null};switch(C){case "HL":J?w.markerStart=`url(#${t})`:w.markerEnd=`url(#${f})`;break;case "LL":w.markerStart=`url(#${t})`;break;case "LH":J?w.markerEnd=`url(#${f})`:w.markerStart=`url(#${t})`;break;default:w.markerEnd=`url(#${f})`}return w}
function K(J,C,t={}){const {focus:f,numClasses:w,colors:F,rotation:H}=J,{opacity:u,effectList:y,ariaLabel:G}=t;J=t.size??60;t=!!f;const z=Math.sqrt(J**2+J**2)+(t?0:5),ba=[],Z=[];var D=[],q=(J||75)/w;for(var m=0;m<w;m++){var n=m*q;for(var E=0;E<w;E++){var Y=E*q,U=r.generateFillAttributes(F[m][E]);const ea=r.generateStrokeAttributes(null);Y={type:"rect",x:Y,y:n,width:q,height:q};const aa=r.renderDef(U);aa&&ba.push(aa);(U=r.renderShape(Y,U.fill,ea,null))&&Z.push(U);D.push(r.getBoundingBox(Y))}}q=null;
t||(q="margin: -15px -15px -18px -15px");m=L("left",f,C);n=L("right",f,C);E=r.computeBBox(D);D=r.getTransformMatrix(E,z,z,0,!1,H,!1);E=r.getTransformMatrix(E,z,z,0,!1,t?-45:null,!1);U={filter:v.getCSSFilterFromEffectList(y)??void 0,opacity:null==u?"":`${u}`};return x.tsx("div",{styles:U,class:t?R.diamondMidColRamp:R.squareTableCell},x.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:z,height:z,style:q,"aria-labelledBy":G,role:"image",focusable:!1},x.tsx("defs",null,x.tsx("marker",{id:`${C}_arrowStart`,
markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},x.tsx("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),x.tsx("marker",{id:`${C}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},x.tsx("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),ba),x.tsx("g",{transform:D},Z),x.tsx("g",{transform:E},x.tsx("line",{fill:"none",stroke:"#555555",
"stroke-width":"1","marker-start":m.markerStart,"marker-end":m.markerEnd,x1:-10,y1:J-15,x2:-10,y2:15}),x.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":n.markerStart,"marker-end":n.markerEnd,x1:15,y1:J+10,x2:J-15,y2:J+10}))))}const R={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",
diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",
squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};p.renderRelationshipRamp=function(J,C,t={}){const {focus:f,labels:w}=J,F=!!f;J=K(J,C,t);C={justifyContent:"center"};t=e.isRTL();return F?x.tsx("div",{class:R.diamondContainer,styles:C},x.tsx("div",{class:R.diamondLeftCol},t?w.right:w.left),x.tsx("div",{class:R.diamondMidCol},x.tsx("div",{class:R.diamondMidColLabel},w.top),J,x.tsx("div",
{class:R.diamondMidColLabel},w.bottom)),x.tsx("div",{class:R.diamondRightCol},t?w.left:w.right)):x.tsx("div",{class:R.squareTable},x.tsx("div",{class:R.squareTableRow},x.tsx("div",{class:e.classes(R.squareTableCell,R.squareTableLabel,R.squareTableLabelRightBottom)},t?w.top:w.left),x.tsx("div",{class:R.squareTableCell}),x.tsx("div",{class:e.classes(R.squareTableCell,R.squareTableLabel,R.squareTableLabelLeftBottom)},t?w.left:w.top)),x.tsx("div",{class:R.squareTableRow},x.tsx("div",{class:R.squareTableCell}),
J,x.tsx("div",{class:R.squareTableCell})),x.tsx("div",{class:R.squareTableRow},x.tsx("div",{class:e.classes(R.squareTableCell,R.squareTableLabel,R.squareTableLabelRightTop)},t?w.right:w.bottom),x.tsx("div",{class:R.squareTableCell}),x.tsx("div",{class:e.classes(R.squareTableCell,R.squareTableLabel,R.squareTableLabelLeftTop)},t?w.bottom:w.right)))};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/relationshipRampUtils":function(){define(["exports","../../../core/lang",
"../../../symbols/support/gfxUtils","../../../symbols/support/previewSymbol3D"],function(p,r,v,e){function x(C){if(C){var {type:t}=C;return t.includes("3d")?e.getSymbolLayerFill(C.symbolLayers.at(0)):"simple-line"===t||"simple-marker"===C.type&&("x"===C.style||"cross"===C.style)?(C=v.getStroke(C))&&C.color:v.getFill(C)}}function L(C,t){const f=t.HH.label,w=t.LL.label,F=t.HL.label;t=t.LH.label;switch(C){case "HH":return{top:f,bottom:w,left:F,right:t};case "HL":return{top:F,bottom:t,left:w,right:f};
case "LL":return{top:w,bottom:f,left:t,right:F};case "LH":return{top:t,bottom:F,left:f,right:w};default:return{top:f,bottom:w,left:F,right:t}}}function K(C){let t=R[C];C&&null==t&&(t=R.HH);return t||0}const R={HH:315,HL:45,LL:135,LH:225},J={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};p.getRelationshipRampColors2D=function(C,t){const f=[],w=C.length**.5;
C=r.clone(C);var F=(t||"HH").split("");t=F[0];for(F="H"===F[1];C.length;){const H=[];for(;H.length<w;)H.push(C.shift());F&&H.reverse();f.push(H)}"L"===t&&f.reverse();return f};p.getRelationshipRampElement=function(C){const {focus:t,infos:f,numClasses:w}=C;var F=J[w];const H={};f.forEach(u=>{H[u.value]={label:u.label,fill:x(u.symbol)}});C=[];for(let u=0;u<w;u++){const y=[];for(let G=0;G<w;G++)y.push(H[F[u][G]].fill);C.push(y)}F=L(t,H);return{type:"relationship-ramp",numClasses:w,focus:t,colors:C,labels:F,
rotation:K(t)}};p.getRotationAngleForFocus=K;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/previewSymbol3D":function(){define("exports ../../assets ../../core/colorUtils ../../core/has ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ./gfxUtils ./IconSymbol3DLayerResource ./ObjectSymbol3DLayerResource ./previewUtils ./renderUtils ./utils ./webStyleSymbolUtils".split(" "),function(p,r,v,e,x,L,K,R,J,C,t,f,w,F,
H,u){function y(Q){const X=Q.outline;var T=null!=Q.material?Q.material.color:null;T=null!=T?T.toHex():null;if(null==X||"pattern"in X&&null!=X.pattern&&"style"===X.pattern.type&&"none"===X.pattern.style)return"fill"===Q.type&&"#ffffff"===T?{color:"#bdc3c7",width:.75}:null;Q=J.pt2px(X.size)||0;return{color:"rgba("+(null!=X.color?X.color.toRgba():"255,255,255,1")+")",width:Math.min(Q,l),style:"pattern"in X&&null!=X.pattern&&"style"===X.pattern.type?C.dekebabifyLineStyle(X.pattern.style):null,join:"butt",
cap:"patternCap"in X?X.patternCap:"butt"}}async function G(Q,X){if(Q.thumbnail?.url)return Q.thumbnail.url;if("icon"===X.type&&X?.resource?.href)return H.getIconHref(X);X=r.getAssetUrl("esri/images/Legend/legend3dsymboldefault.png");return Q.styleOrigin&&(Q.styleOrigin.styleName||Q.styleOrigin.styleUrl)&&(Q=await u.resolveWebStyleSymbol(Q.styleOrigin,{portal:Q.styleOrigin.portal},"webRef").catch(()=>null))&&"thumbnail"in Q&&Q.thumbnail?.url?Q.thumbnail.url:X}function z(Q,X=1){const T=Q.a;Q=v.toHSV(Q);
const {r:k,g:S,b:N}=v.toRGB({h:Q.h,s:Q.s/X,v:100-(100-Q.v)/X});return[k,S,N,T]}function ba(Q){return"water"===Q.type?null==Q.color?null:Q.color:null==Q.material||null==Q.material.color?null:Q.material.color}function Z(Q,X=0){var T=ba(Q);if(!T){if("fill"===Q.type)return null;X=w.adjustColorComponentBrightness(C.defaultThematicColor.r,X);return[X,X,X,100]}Q=T.toRgba();for(T=0;3>T;T++)Q[T]=w.adjustColorComponentBrightness(Q[T],X);return Q}async function D(Q,X){Q=Q.style;return"none"===Q?null:{type:"pattern",
x:0,y:0,src:await C.getPatternUrlWithColor(r.getAssetUrl(`esri/symbols/patterns/${Q}.png`),X.toCss(!0)),width:5,height:5}}function q(Q){return Q.outline?y(Q):{color:"rgba(0, 0, 0, 1)",width:1.5}}function m(Q,X){Q=ba(Q);if(!Q)return null;let T;T="rgba("+(w.adjustColorComponentBrightness(Q.r,X)+",");T+=w.adjustColorComponentBrightness(Q.g,X)+",";T+=w.adjustColorComponentBrightness(Q.b,X)+",";return T+Q.a+");"}function n(Q,X){X=m(Q,X);if(!X)return{};if("pattern"in Q&&null!=Q.pattern&&"style"===Q.pattern.type&&
"none"===Q.pattern.style)return null;const T=Math.min(Q.size?J.pt2px(Q.size):.75,l);return{color:X,width:T,style:"pattern"in Q&&null!=Q.pattern&&"style"===Q.pattern.type?C.dekebabifyLineStyle(Q.pattern.style):null,cap:"cap"in Q?Q.cap:null,join:"join"in Q?"miter"===Q.join?J.pt2px(2):Q.join:null}}function E(Q,X,T){T=null!=T?.75*T:0;return{type:"linear",x1:T?.25*T:0,y1:T?.5*T:0,x2:T||4,y2:T?.5*T:4,colors:[{color:Q,offset:0},{color:X,offset:1}]}}function Y(Q){const X=Q.depth,T=Q.height;Q=Q.width;return 0!==
Q&&0!==X&&0!==T&&Q===X&&null!=Q&&null!=T&&Q<T}function U(Q,X,T){const k=[];if(!Q)return k;switch(Q.type){case "icon":switch(Q.resource&&Q.resource.primitive||t.defaultPrimitive){case "circle":k.push({shape:{type:"circle",cx:0,cy:0,r:.5*X},fill:Z(Q,0),stroke:y(Q)});break;case "square":k.push({shape:{type:"path",path:[{command:"M",values:[0,X]},{command:"L",values:[0,0]},{command:"L",values:[X,0]},{command:"L",values:[X,X]},{command:"Z",values:[]}]},fill:Z(Q,0),stroke:y(Q)});break;case "triangle":k.push({shape:{type:"path",
path:[{command:"M",values:[0,X]},{command:"L",values:[.5*X,0]},{command:"L",values:[X,X]},{command:"Z",values:[]}]},fill:Z(Q,0),stroke:y(Q)});break;case "cross":k.push({shape:{type:"path",path:[{command:"M",values:[.5*X,0]},{command:"L",values:[.5*X,X]},{command:"M",values:[0,.5*X]},{command:"L",values:[X,.5*X]}]},stroke:q(Q)});break;case "x":k.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[X,X]},{command:"M",values:[X,0]},{command:"L",values:[0,X]}]},stroke:q(Q)});
break;case "kite":k.push({shape:{type:"path",path:[{command:"M",values:[0,.5*X]},{command:"L",values:[.5*X,0]},{command:"L",values:[X,.5*X]},{command:"L",values:[.5*X,X]},{command:"Z",values:[]}]},fill:Z(Q,0),stroke:y(Q)})}break;case "object":switch(Q.resource&&Q.resource.primitive||f.defaultPrimitive){case "cone":var S=Z(Q,0);Q=Z(Q,-.6);Q=E(S,Q,T?W:X);X=w.getConeShapes(X,T);k.push({shape:X[0],fill:Q});k.push({shape:X[1],fill:Q});break;case "inverted-cone":T=Z(Q,0);Q=Z(Q,-.6);Q=E(T,Q,X);X=w.getInvertedConeShapes(X);
k.push({shape:X[0],fill:Q});k.push({shape:X[1],fill:T});break;case "cube":X=w.getCubeShapes(X,T);k.push({shape:X[0],fill:Z(Q,0)});k.push({shape:X[1],fill:Z(Q,-.3)});k.push({shape:X[2],fill:Z(Q,-.5)});break;case "cylinder":S=Z(Q,0);const N=Z(Q,-.6);S=E(S,N,T?W:X);X=w.getCylinderShapes(X,T);k.push({shape:X[0],fill:S});k.push({shape:X[1],fill:S});k.push({shape:X[2],fill:Z(Q,0)});break;case "diamond":X=w.getDiamondShapes(X);k.push({shape:X[0],fill:Z(Q,-.3)});k.push({shape:X[1],fill:Z(Q,0)});k.push({shape:X[2],
fill:Z(Q,-.3)});k.push({shape:X[3],fill:Z(Q,-.7)});break;case "sphere":T=Z(Q,0);Q=Z(Q,-.6);Q=E(T,Q);Q.x1=0;Q.y1=0;Q.x2=.25*X;Q.y2=.25*X;k.push({shape:{type:"circle",cx:0,cy:0,r:.5*X},fill:Q});break;case "tetrahedron":X=w.getTetrahedronShapes(X),k.push({shape:X[0],fill:Z(Q,-.3)}),k.push({shape:X[1],fill:Z(Q,0)}),k.push({shape:X[2],fill:Z(Q,-.6)})}}return k}function ea(Q){return(Q="number"===typeof Q?.size?Q?.size:null)?J.pt2px(Q):null}function aa(Q,X){const T=ea(X),k=X?.maxSize?J.pt2px(X.maxSize):
null,S=X?.disableUpsampling??!1,N=Q.symbolLayers,ka=[];let oa=0,sa=0;const M=N.at(-1);let ja;M&&"icon"===M.type&&(ja=M.size&&J.pt2px(M.size));N.forEach(qa=>{if("icon"===qa.type||"object"===qa.type){var ua="icon"===qa.type?qa.size&&J.pt2px(qa.size):0,ya=T||ua?Math.ceil(Math.min(T||ua,k||la)):da;if(qa&&qa.resource&&qa.resource.href){var Aa=G(Q,qa).then(Ba=>{const Ia=qa.get("material.color");var $a="icon"===qa.type?"multiply":"tint";return F.tintImageWithColor(Ba,ya,Ia,$a,S)}).then(Ba=>{const Ia=Ba.width,
$a=Ba.height;oa=Math.max(oa,Ia);sa=Math.max(sa,$a);return[{shape:{type:"image",x:0,y:0,width:Ia,height:$a,src:Ba.url},fill:null,stroke:null}]});ka.push(Aa)}else Aa=ya,"icon"===qa.type&&ja&&T&&(Aa=ua/ja*ya),ua="tall"===X?.symbolConfig||X?.symbolConfig?.isTall||("object"===qa.type?Y(qa):!1),oa=Math.max(oa,ua?W:Aa),sa=Math.max(sa,Aa),ka.push(Promise.resolve(U(qa,Aa,ua)))}});return R.eachAlways(ka).then(qa=>{const ua=[];qa.forEach(ya=>{ya.value?ua.push(ya.value):ya.error&&L.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",
ya.error)});return F.renderSymbol(ua,[oa,sa],{node:X&&X.node,scale:!1,opacity:X&&X.opacity,ariaLabel:X?.ariaLabel})})}function fa(Q,X){const T=Q.symbolLayers,k=[];Q=H.isVolumetricSymbol(Q);const S=ea(X),N=(X&&X.maxSize?J.pt2px(X.maxSize):null)||l;let ka=0,oa=0,sa;T.forEach((M,ja)=>{if(M&&("line"===M.type||"path"===M.type)){var qa=[];switch(M.type){case "line":var ua=n(M,0);if(null==ua)break;var ya=ua&&ua.width||0;0===ja&&(sa=ya);M=Math.min(S||ya,N);ja=0===ja?M:S?ya/sa*M:M;ya=ja>P/2?2*ja:P;oa=Math.max(oa,
ja);ka=Math.max(ka,ya);ua.width=ja;qa.push({shape:{type:"path",path:[{command:"M",values:[0,.5*oa]},{command:"L",values:[ka,.5*oa]}]},stroke:ua});break;case "path":ua=Math.min(S||da,N);ja=Z(M,0);ya=Z(M,-.2);var Aa=m(M,-.4);Aa=Aa?{color:Aa,width:1}:{};if("quad"===M.profile){const Ba=M.width;M=M.height;M=w.getPathSymbolShapes(Ba&&M?Ba/M:1,0===M,0===Ba);Aa={...Aa,join:"bevel"};qa.push({shape:M[0],fill:ya,stroke:Aa});qa.push({shape:M[1],fill:ya,stroke:Aa});qa.push({shape:M[2],fill:ja,stroke:Aa})}else qa.push({shape:w.shapes.pathSymbol3DLayer[0],
fill:ya,stroke:Aa}),qa.push({shape:w.shapes.pathSymbol3DLayer[1],fill:ja,stroke:Aa});ka=oa=Math.max(oa,ua)}k.push(qa)}});return Promise.resolve(F.renderSymbol(k,[ka,oa],{node:X&&X.node,scale:Q,opacity:X&&X.opacity,ariaLabel:X?.ariaLabel}))}async function O(Q,X){const T="mesh-3d"===Q.type;Q=Q.symbolLayers;var k=ea(X);const S=X&&X.maxSize?J.pt2px(X.maxSize):null;k=k||da;const N=[];let ka=0,oa=0;var sa=!1;for(let Aa=0;Aa<Q.length;Aa++){var M=Q.at(Aa);const Ba=[];if(!T||"fill"===M.type){var ja=w.shapes.fill[0];
switch(M.type){case "fill":var qa=y(M);sa=Math.min(k,S||la);ka=Math.max(ka,sa);oa=Math.max(oa,sa);sa=!0;var ua=Z(M,0),ya="pattern"in M?M.pattern:null;M=ba(M);!T&&null!=ya&&"style"===ya.type&&"solid"!==ya.style&&M&&(ua=await D(ya,M));Ba.push({shape:ja,fill:ua,stroke:qa});break;case "line":M=n(M,0);if(null==M)break;M={stroke:M,shape:ja};ka=Math.max(ka,da);oa=Math.max(oa,da);Ba.push(M);break;case "extrude":ja={join:"round",width:1,...n(M,-.4)};qa=Z(M,0);M=Z(M,-.2);ua=Math.min(k,S||la);ya=w.getExtrudeSymbolShapes(ua);
ja.width=1;Ba.push({shape:ya[0],fill:M,stroke:ja});Ba.push({shape:ya[1],fill:M,stroke:ja});Ba.push({shape:ya[2],fill:qa,stroke:ja});M=.7*da+.5*ua;ka=Math.max(ka,da);oa=Math.max(oa,M);break;case "water":sa=K.unwrapOrThrow(ba(M)),M=z(sa),ja=z(sa,2),qa=z(sa,3),ua=w.getWaterSymbolShapes(),sa=!0,Ba.push({shape:ua[0],fill:M}),Ba.push({shape:ua[1],fill:ja}),Ba.push({shape:ua[2],fill:qa}),M=Math.min(k,S||la),ka=Math.max(ka,M),oa=Math.max(oa,M)}N.push(Ba)}}return F.renderSymbol(N,[ka,oa],{node:X&&X.node,scale:sa,
opacity:X&&X.opacity,ariaLabel:X?.ariaLabel})}const da=w.SymbolSizeDefaults.size,la=w.SymbolSizeDefaults.maxSize,l=w.SymbolSizeDefaults.maxOutlineSize,P=w.SymbolSizeDefaults.lineWidth,W=w.SymbolSizeDefaults.tallSymbolWidth;p.getPatternDescriptor=D;p.getSizeFromOptions=ea;p.getSymbolLayerFill=Z;p.previewSymbol3D=function(Q,X){if(0===Q.symbolLayers.length)return Promise.reject(new x("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(Q.type){case "point-3d":return aa(Q,X);
case "line-3d":return fa(Q,X);case "polygon-3d":case "mesh-3d":return O(Q,X)}return Promise.reject(new x("symbolPreview: swatchInfo3D","symbol not supported."))};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/webStyleSymbolUtils":function(){define("exports ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/maybe ../../core/urlUtils ../../portal/Portal ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./styleUtils ./Thumbnail".split(" "),
function(p,r,v,e,x,L,K,R,J,C,t,f){function w(u,y){return y.items.find(G=>G.name===u)}function F(u,y,G,z,ba,Z){const D=G&&null!=G.portal?G.portal:K.getDefault(),q={portal:D,url:L.urlToObject(u.baseUrl),origin:"portal-item"},m=w(y,u.data);if(!m)return Promise.reject(new e("symbolstyleutils:symbol-name-not-found",`The symbol name '${y}' could not be found`,{symbolName:y}));ba=R.fromJSON(ba(m,z),q);let n=m.thumbnail?.href??null;const E=m.thumbnail&&m.thumbnail.imageData;v.isDevEnvironment()&&(ba=v.adjustStaticAGOUrl(ba)??
"",n=v.adjustStaticAGOUrl(n));const Y={portal:D,url:L.urlToObject(L.removeFile(ba)),origin:"portal-item"};return t.requestJSON(ba,Z).then(U=>{U="cimRef"===z?t.makeCIMSymbolRef(U.data):U.data;if((U=J.fromJSON(U,Y))&&r.isSymbol3D(U)){if(n){const ea=R.fromJSON(n,q);U.thumbnail=new f.Thumbnail({url:ea})}else E&&(U.thumbnail=new f.Thumbnail({url:`data:image/png;base64,${E}`}));u.styleUrl?U.styleOrigin=new C({portal:G.portal,styleUrl:u.styleUrl,name:y}):u.styleName&&(U.styleOrigin=new C({portal:G.portal,
styleName:u.styleName,name:y}))}return U})}function H(u,y,G){const z=t.Style2DUrlTemplate.replaceAll(/\{SymbolName\}/gi,u),ba=null!=y.portal?y.portal:K.getDefault();return t.requestJSON(z,G).then(Z=>{Z=t.makeCIMSymbolRef(Z.data);return J.fromJSON(Z,{portal:ba,url:L.urlToObject(L.removeFile(z)),origin:"portal-item"})})}p.fetchSymbolFromStyle=F;p.getStyleItemFromStyle=w;p.resolveWebStyleSymbol=function(u,y,G,z){const ba=u.name;return null==ba?Promise.reject(new e("symbolstyleutils:style-symbol-reference-name-missing",
"Missing name in style symbol reference")):u.styleName&&"Esri2DPointSymbolsStyle"===u.styleName?H(ba,y,z):t.fetchStyle(u,y,z).then(Z=>F(x.unwrapOrThrow(Z),ba,y,G,t.symbolUrlFromStyleItem,z))};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/core/devEnvironmentUtils":function(){define(["exports"],function(p){const r=/^devext.arcgis.com$/,v=/^qaext.arcgis.com$/,e=/^[\w-]*\.mapsdevext.arcgis.com$/,x=/^[\w-]*\.mapsqa.arcgis.com$/,L=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,r,
v,/^jsapps.esri.com$/,e,x];p.adjustStaticAGOUrl=function(K,R){return K?(R=R||globalThis.location.hostname)?null!=R.match(r)||null!=R.match(e)?K.replace("static.arcgis.com","staticdev.arcgis.com"):null!=R.match(v)||null!=R.match(x)?K.replace("static.arcgis.com","staticqa.arcgis.com"):K:K:K};p.isDevEnvironment=function(K){K=K||globalThis.location.hostname;return L.some(R=>null!=K?.match(R))};p.isTelemetryDevEnvironment=function(K){K=K||globalThis.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(L).some(R=>
null!=K?.match(R))};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/layerViewUtils":function(){define(["exports"],function(p){p.extractSafeScaleBounds=function(r){r=r.effectiveScaleRange;return{minScale:r?.minScale??0,maxScale:r?.maxScale??0}};p.highlightsSupported=function(r){return r&&"function"===typeof r.highlight};p.isScaleRangeActive=function(r,v){return null!=r&&0<r||null!=v&&0<v};p.occludeesSupported=function(r){return r&&"function"===typeof r.maskOccludee};
p.scaleBoundsPredicate=function(r,v,e){return null==r||r>e&&(0===v||r<v)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(p,r,v,e,x,L,K,R,J){p.GoToMixin=C=>{C=function(t){function f(...w){w=
t.call(this,...w)||this;w.goToOverride=null;w.view=null;return w}r._inherits(f,t);f.prototype.callGoTo=function(w){const {view:F}=this;e.assertIsSome(F);return this.goToOverride?this.goToOverride(F,w):F.goTo(w.target,w.options)};return r._createClass(f)}(C);v.__decorate([x.property()],C.prototype,"goToOverride",void 0);v.__decorate([x.property()],C.prototype,"view",void 0);return C=v.__decorate([J.subclass("esri.widgets.support.GoTo")],C)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},
"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/deprecate ../core/events ../core/Handles ../core/Logger ../core/reactiveUtils ../core/throttle ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/resources ./Feature/support/FeatureContentMixin ./Popup/actionUtils ./Popup/css ./Popup/PopupViewModel ./support/componentsUtils ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../support/themeUtils ../intl/substitute".split(" "),function(p,
r,v,e,x,L,K,R,J,C,t,f,w,F,H,u,y,G,z,ba,Z,D,q,m,n,E,Y,U,ea,aa,fa,O,da){function la(Q,X){return void 0===X?`${"esri-popup"}__${Q}`:`${"esri-popup"}__${Q}-${X}`}function l(Q){return Q?.["data-feature-index"]}const P={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},W={closeButton:!0,featureNavigation:!0};e=function(Q){function X(k,S){var N=Q.call(this,k,S)||this;N._blurClose=!1;N._blurContainer=!1;N._containerNode=null;N._mainContainerNode=null;N._featureMenuNode=null;N._actionsMenuNode=null;
N._focusClose=!1;N._focusContainer=!1;N._focusDockButton=!1;N._focusFeatureMenuButton=!1;N._focusActionsMenuButton=!1;N._focusFirstFeature=!1;N._focusFirstAction=!1;N._handles=new R;N._pointerOffsetInPx=16;N._spinner=null;N._feature=null;N._featureMenuIntersectionObserverNode=null;N._featureMenuViewportNode=null;N._rootFlowItemNode=null;N._featureMenuIntersectionObserverCallback=([ka])=>{ka?.isIntersecting&&null!=N.viewModel.featurePage&&N.viewModel.featurePage++};N._featureMenuIntersectionObserver=
new IntersectionObserver(N._featureMenuIntersectionObserverCallback,{root:window.document});N._displaySpinnerThrottled=t.throttle(()=>N._displaySpinner(),0);N._exitRelatedRecordsActions=new WeakMap;N._featureSelectionActions=new WeakMap;N._flowItems=new x;N.alignment="auto";N.collapsed=!1;N.collapseEnabled=!0;N.dockEnabled=!1;N.headingLevel=2;N.maxInlineActions=3;N.messages=null;N.messagesCommon=null;N.spinnerEnabled=!0;N.viewModel=new m;N.visibleElements={...W};N._handleOpenRelatedFeature=ka=>{N._openRelatedFeature(ka)};
N._addSelectedFeatureIndexHandle();N.addHandles([N._displaySpinnerThrottled,C.watch(()=>N.viewModel?.screenLocation,()=>N._positionContainer()),C.watch(()=>[N.viewModel?.active,N.dockEnabled],()=>N._toggleScreenLocationEnabled()),C.watch(()=>N.viewModel?.screenLocation,(ka,oa)=>{!!ka!==!!oa&&N.reposition()}),C.watch(()=>[N.viewModel?.view?.padding,N.viewModel?.view?.size,N.viewModel?.active,N.viewModel?.location,N.alignment],()=>N.reposition()),C.watch(()=>N.spinnerEnabled,ka=>N._spinnerEnabledChange(ka)),
C.watch(()=>N.viewModel?.view?.size,(ka,oa)=>N._updateDockEnabledForViewSize(ka,oa)),C.watch(()=>N.viewModel?.view,(ka,oa)=>N._viewChange(ka,oa)),C.watch(()=>N.viewModel?.view?.ready,(ka,oa)=>N._viewReadyChange(ka??!1,oa??!1)),C.watch(()=>[N.viewModel?.waitingForResult,N.viewModel?.location],()=>{N._hideSpinner();N._displaySpinnerThrottled()}),C.watch(()=>N.selectedFeatureWidget,()=>N._destroyFlowItemWidgets()),C.watch(()=>[N.selectedFeatureWidget?.viewModel?.title,N.selectedFeatureWidget?.viewModel?.state],
()=>N._setTitleFromFeatureWidget()),C.watch(()=>[N.selectedFeatureWidget?.viewModel?.content,N.selectedFeatureWidget?.viewModel?.state],()=>N._setContentFromFeatureWidget()),C.when(()=>!N.collapsed,()=>{"xsmall"===N.viewModel?.view?.widthBreakpoint&&N.viewModel.active&&N.collapseEnabled&&N.viewModel.centerAtLocation()}),C.on(()=>N.viewModel?.allActions,"change",()=>N._watchActions()),C.watch(()=>N.viewModel?.allActions,()=>N._watchActions(),C.initial),C.watch(()=>N.viewModel?.featureViewModels,()=>
N._featureMenuViewportScrollTop()),C.on(()=>N._flowItems,"change",()=>{N.notifyChange("_activeFlowItemWidget");N.scheduleRender()}),C.watch(()=>[N._activeFlowItemWidget?.viewModel?.state,N._activeFlowItemWidget?.viewModel?.title],()=>N.scheduleRender())]);return N}r._inherits(X,Q);var T=X.prototype;T.loadDependencies=function(){return n.loadCalciteComponents({action:()=>new Promise((k,S)=>p(["../chunks/calcite-action"],k,S)),flow:()=>new Promise((k,S)=>p(["../chunks/calcite-flow"],k,S)),"flow-item":()=>
new Promise((k,S)=>p(["../chunks/calcite-flow-item"],k,S)),icon:()=>new Promise((k,S)=>p(["../chunks/calcite-icon"],k,S)),tooltip:()=>new Promise((k,S)=>p(["../chunks/calcite-tooltip"],k,S))})};T.initialize=function(){this.addHandles(this._displaySpinnerThrottled)};T.destroy=function(){this._destroyFlowItemWidgets();this._destroySelectedFeatureWidget();this._destroySpinner();this._handles?.destroy();this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver?.disconnect()};T.castVisibleElements=
function(k){return{...W,...k}};T.blur=function(){const {active:k}=this.viewModel;k||J.getLogger(this).warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};T.clear=function(){return this.viewModel.clear()};T.close=function(){this.visible=!1};T.fetchFeatures=function(k,S){return this.viewModel.fetchFeatures(k,S)};T.focus=function(){const {active:k}=this.viewModel;k||J.getLogger(this).warn("Popup can only be focused when currently active.");
this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};T.next=function(){return this.viewModel.next()};T.open=function(k){this._handles.remove("selected-index");const S={collapsed:k?!!k.collapsed:!1,actionsMenuOpen:k?!!k.actionsMenuOpen:!1,featureMenuOpen:k?!!k.featureMenuOpen:!1};"xsmall"===this.viewModel?.view?.widthBreakpoint&&(S.collapsed=!0);this.set(S);this.viewModel.open(k);this._shouldFocus(k);this._addSelectedFeatureIndexHandle()};T.previous=function(){return this.viewModel.previous()};
T.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};T.triggerAction=function(k){return this.viewModel.triggerAction(k)};T.render=function(){const {actionsMenuOpen:k,dockEnabled:S,featureMenuVisible:N,dividedActions:ka,currentAlignment:oa,currentDockPosition:sa}=this,{active:M}=this.viewModel,{menuActions:ja}=ka,qa=this.selectedFeature?.layer?.title,ua=this.selectedFeature?.layer?.id;return aa.tsx("div",{class:this.classes(q.CSS.base,{[q.CSS.alignTopCenter]:"top-center"===
oa,[q.CSS.alignBottomCenter]:"bottom-center"===oa,[q.CSS.alignTopLeft]:"top-left"===oa,[q.CSS.alignBottomLeft]:"bottom-left"===oa,[q.CSS.alignTopRight]:"top-right"===oa,[q.CSS.alignBottomRight]:"bottom-right"===oa,[q.CSS.isDocked]:M&&S,[q.CSS.shadow]:M&&!S,[q.CSS.isDockedTopLeft]:"top-left"===sa,[q.CSS.isDockedTopCenter]:"top-center"===sa,[q.CSS.isDockedTopRight]:"top-right"===sa,[q.CSS.isDockedBottomLeft]:"bottom-left"===sa,[q.CSS.isDockedBottomCenter]:"bottom-center"===sa,[q.CSS.isDockedBottomRight]:"bottom-right"===
sa,[q.CSS.isFeatureMenuOpen]:N,[q.CSS.isActionsMenuOpen]:M&&1<ja.length&&k}),role:"presentation","data-layer-title":qa,"data-layer-id":ua,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},M?[this.renderMainContainer(),this.renderPointer()]:null)};T.renderLoadingIcon=function(){return aa.tsx("span",{"aria-hidden":"true",class:this.classes(q.CSS.icon,q.CSS.iconLoading,q.CSS.rotating)})};T.renderNavigationLoading=function(){const {messagesCommon:k}=this;return this.viewModel.pendingPromisesCount?
aa.tsx("div",{key:la("loading-container"),role:"presentation",class:q.CSS.loadingContainer,"aria-label":k.loading,title:k.loading},this.renderLoadingIcon()):null};T.renderPreviousButton=function(){const {messages:k}=this;return aa.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(q.CSS.button,q.CSS.paginationPrevious),"aria-label":k.previous,title:k.previous},aa.tsx("calcite-icon",{icon:"chevron-left",scale:"s",class:q.CSS.paginationIcon}))};
T.renderNextButton=function(){const {messages:k}=this;return aa.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(q.CSS.button,q.CSS.paginationNext),"aria-label":k.next,title:k.next},aa.tsx("calcite-icon",{icon:"chevron-right",scale:"s",class:q.CSS.paginationIcon}))};T.renderFeatureMenuButton=function(){const {featureMenuOpen:k,featureMenuId:S,messagesCommon:N}=this,{featureCount:ka,selectedFeatureIndex:oa}=this.viewModel;return aa.tsx("div",
{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:q.CSS.featureMenuButton,"aria-haspopup":"true","aria-controls":S,"aria-expanded":k.toString(),"aria-label":N.menu,title:N.menu},aa.tsx("calcite-icon",{icon:"list-bullet",scale:"s",class:q.CSS.featureMenuButtonIcon}),this._getPageText(ka,oa))};T.renderNavigationButtons=function(){return this.featureNavigationVisible?
[this.renderPreviousButton(),this.renderNextButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton()]:[]};T.renderDockIcon=function(){const {dockEnabled:k}=this,S=this._wouldDockTo();return aa.tsx("span",{"aria-hidden":"true",class:this.classes({[q.CSS.iconUndock]:k,[q.CSS.iconDock]:!k,[q.CSS.iconDockToRight]:!k&&("top-right"===S||"bottom-right"===S),[q.CSS.iconDockToLeft]:!k&&("top-left"===S||"bottom-left"===S),[q.CSS.iconDockToTop]:!k&&"top-center"===S,[q.CSS.iconDockToBottom]:!k&&
"bottom-center"===S},q.CSS.icon)})};T.renderDockButton=function(){const {dockEnabled:k,messages:S}=this,N=k?S.undock:S.dock;return"xsmall"!==this.viewModel?.view?.widthBreakpoint&&this.dockOptions?.buttonEnabled?aa.tsx("div",{role:"button","aria-label":N,title:N,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(q.CSS.button,q.CSS.buttonDock)},this.renderDockIcon()):null};
T.renderTitle=function(){const {title:k}=this.viewModel,{titleId:S,collapsible:N,contentCollapsed:ka,messagesCommon:oa}=this;var sa={[q.CSS.headerContainerButton]:N};const M=aa.tsx(E.Heading,{level:this.headingLevel,class:q.CSS.headerTitle,innerHTML:k??""});sa=N?aa.tsx("button",{key:`${k}--collapsible`,id:S,title:ka?oa.expand:oa.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(q.CSS.headerContainer,sa),"aria-expanded":ka?"false":"true",onclick:this._toggleCollapsed,
type:"button"},M,aa.tsx("calcite-icon",{class:q.CSS.collapseIcon,key:"collapse-icon",icon:ka?"chevron-down":"chevron-up",scale:"m"})):aa.tsx("div",{key:k??"title",id:S,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(q.CSS.headerContainer,sa)},M);return k?sa:null};T.renderCloseIcon=function(){return aa.tsx("span",{"aria-hidden":"true",class:this.classes(q.CSS.icon,q.CSS.iconClose)})};T.renderCloseButton=function(){const {visibleElements:k,messagesCommon:S}=this;return k.closeButton?
aa.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:q.CSS.button,"aria-label":S.close,title:S.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};T.renderHeader=function(){return aa.tsx("header",{class:q.CSS.header},this.renderTitle(),aa.tsx("div",{class:q.CSS.headerButtons},this.renderDockButton(),this.renderCloseButton()))};T.renderContentContainer=function(){const {contentId:k,hasContent:S,
contentCollapsed:N,_flowItems:ka}=this,{content:oa}=this.viewModel,sa=ka.toArray(),M={[q.CSS.contentHasFlows]:!!sa.length};return S&&!N?aa.tsx("div",{key:oa??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:k,class:this.classes(q.CSS.content,M)},aa.tsx("calcite-flow",{bind:this},aa.tsx("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:fa.storeNode,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),sa.map(ja=>this.renderFlowItem(ja))),
sa.map(ja=>this.renderFlowItemTooltips(ja))):null};T.renderFlowItem=function(k){const {messages:S}=this,N=O.isDarkTheme(),ka="graphic"in k&&!k.isTable;return aa.tsx("calcite-flow-item",{bind:this,class:this.classes({[q.CSS.calciteThemeDark]:!N,[q.CSS.calciteThemeLight]:N}),heading:k.title??"",description:this._getFlowItemDescription(k),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${k.viewModel.uid}`},aa.tsx("calcite-action",{class:q.CSS.actionExit,icon:"move-up",label:S?.exitRelatedRecords,
text:S?.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:oa=>this._storeExitRelatedRecordsAction(k,oa),onclick:this._destroyFlowItemWidgets}),ka?aa.tsx("calcite-action",{class:q.CSS.actionSelectFeature,icon:"zoom-to-object",label:S?.selectFeature,text:S?.selectFeature,slot:"header-actions-end",bind:this,afterCreate:oa=>this._storeFeatureSelectionAction(k,oa),onclick:()=>this._handleOpenRelatedFeature(k)}):null,aa.tsx("div",{class:this.classes(q.CSS.contentFlowItem,{[q.CSS.calciteThemeDark]:N,
[q.CSS.calciteThemeLight]:!N})},k.render()))};T.renderFlowItemTooltips=function(k){const {messages:S,_exitRelatedRecordsActions:N,_featureSelectionActions:ka}=this,oa=O.isDarkTheme(),sa=ka.get(k);return[aa.tsx("calcite-tooltip",{class:this.classes({[q.CSS.calciteThemeDark]:!oa,[q.CSS.calciteThemeLight]:oa}),key:`exit-related-records-tooltip-${k.viewModel.uid}`,label:S?.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:N.get(k),placement:"top"},S?.exitRelatedRecords),sa?aa.tsx("calcite-tooltip",
{class:this.classes({[q.CSS.calciteThemeDark]:!oa,[q.CSS.calciteThemeLight]:oa}),key:`select-related-record-tooltip-${k.viewModel.uid}`,label:S?.selectFeature,overlayPositioning:"fixed",referenceElement:sa,placement:"top"},S?.selectFeature):null]};T.renderActionsMenuButton=function(){const {actionsMenuId:k,actionsMenuButtonId:S,actionsMenuOpen:N,dividedActions:ka,messagesCommon:oa}=this,sa=N?oa.close:oa.open,{menuActions:M}=ka;return M.length?aa.tsx("div",{key:la("actions-menu-button"),class:this.classes(q.CSS.button,
q.CSS.actionsMenuButton),role:"button",id:S,"aria-haspopup":"true","aria-controls":N?k:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":sa,title:sa},aa.tsx("span",{"aria-hidden":"true",class:q.CSS.iconActionsMenu})):null};T.renderMenuActions=function(){const {actionsMenuId:k,actionsMenuButtonId:S,actionsMenuOpen:N,dividedActions:ka}=this,{menuActions:oa}=
ka;return oa.length&&N?aa.tsx("ul",{id:k,role:"menu","aria-labelledby":S,key:la("actions"),class:q.CSS.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},oa.toArray().map(sa=>this.renderAction({action:sa,type:"menu-item"}))):null};T.renderInlineActions=function(){const {inlineActions:k}=this.dividedActions;return k.length?k.toArray().map(S=>this.renderAction({action:S,type:"inline"})):[]};T.renderInlineActionsContainer=
function(){const {inlineActions:k,menuActions:S}=this.dividedActions,N=!!k.length,ka=!!S.length;return N||ka?aa.tsx("div",{key:"inline-actions-container","data-inline-actions":N.toString(),"data-menu-actions":ka.toString(),class:q.CSS.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};T.renderNavigation=function(){return this.featureNavigationVisible?aa.tsx("section",{key:la("navigation"),class:this.classes(q.CSS.navigation)},this.renderNavigationButtons()):
null};T.renderFooter=function(){const {featureNavigationVisible:k,dividedActions:S}=this,{inlineActions:N,menuActions:ka}=S,oa=!!N.length,sa={[q.CSS.footerHasPagination]:k,[q.CSS.footerHasActions]:oa,[q.CSS.footerHasActionsMenu]:!!ka.length};return k||oa?aa.tsx("div",{key:la("feature-buttons"),class:this.classes(q.CSS.footer,sa)},this.renderInlineActionsContainer(),this.renderNavigation()):null};T.renderFeatureMenuContainer=function(){var {messages:k}=this;const {featureViewModels:S,isLoadingFeature:N}=
this.viewModel;k=da.substitute(k.selectedFeatures,{total:S.length});return aa.tsx("section",{key:la("menu"),class:q.CSS.featureMenu},aa.tsx("strong",{class:q.CSS.featureMenuHeader},k),aa.tsx("nav",{bind:this,class:q.CSS.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:fa.storeNode},this.renderFeatureMenu(),aa.tsx("div",{class:q.CSS.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),N?aa.tsx("div",{class:q.CSS.featureMenuLoader},this.renderLoadingIcon()):
null))};T.renderPointer=function(){return this.dockEnabled?null:aa.tsx("div",{key:la("pointer"),class:q.CSS.pointer,role:"presentation"},aa.tsx("div",{class:this.classes(q.CSS.pointerDirection,q.CSS.shadow)}))};T.renderMainContainer=function(){const {dockEnabled:k,currentAlignment:S,currentDockPosition:N,titleId:ka,contentId:oa,collapsible:sa,hasContent:M,contentCollapsed:ja,visibleElements:qa}=this,{title:ua}=this.viewModel,ya="bottom-left"===S||"bottom-center"===S||"bottom-right"===S||"top-left"===
N||"top-center"===N||"top-right"===N,Aa="top-left"===S||"top-center"===S||"top-right"===S||"bottom-left"===N||"bottom-center"===N||"bottom-right"===N;return aa.tsx("div",{class:this.classes(q.CSS.main,q.CSS.widget,{[q.CSS.shadow]:k,[q.CSS.isCollapsible]:sa,[q.CSS.isCollapsed]:ja}),tabIndex:qa.closeButton?void 0:-1,role:"dialog","aria-live":"polite","aria-labelledby":ua?ka:"","aria-describedby":M&&!ja?oa:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},
ya?this.renderFooter():null,ya?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),Aa?this.renderFooter():null,Aa?this.renderFeatureMenuContainer():null)};T.renderContent=function(){const k=this.viewModel?.content;return k?"string"===typeof k?aa.tsx("div",{class:ba.CSS.contentNode,key:k,innerHTML:k}):this.renderNodeContent(k):null};T.renderActionText=function(k){return aa.tsx("span",{key:"text",class:q.CSS.actionText},k)};T.renderActionCalciteIcon=function(k,S){return aa.tsx("calcite-icon",
{scale:"s",key:`calcite-icon-${S}`,icon:k,class:q.CSS.icon})};T.renderActionIcon=function(k){const S=this._getActionClass(k),N=this._getActionImage(k),ka={[q.CSS.iconLoading]:k.active,[q.CSS.rotating]:k.active,[q.CSS.icon]:!!S,[q.CSS.actionImage]:!k.active&&!!N};S&&(ka[S]=!k.active);return aa.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes(q.CSS.icon,ka),styles:this._getIconStyles(N)})};T.renderAction=function(k){const {action:S,type:N}=k;k=this._getActionTitle(S);const ka={[q.CSS.action]:"toggle"!==
S.type,[q.CSS.actionToggle]:"toggle"===S.type,[q.CSS.actionToggleOn]:"toggle"===S.type&&S.value,[q.CSS.buttonDisabled]:S.disabled},oa=[S.icon&&!S.active?this.renderActionCalciteIcon(S.icon,S.uid):this.renderActionIcon(S),this.renderActionText(k)];k="menu-item"===N?aa.tsx("li",{key:S.uid,role:"menuitem",tabIndex:0,title:k,"aria-label":k,class:this.classes(q.CSS.button,ka),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":S.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},
oa):aa.tsx("div",{key:S.uid,role:"button",tabIndex:0,title:k,"aria-label":k,class:this.classes(q.CSS.button,ka),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":S.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},oa);return S.visible?k:null};T.renderFeatureMenuItem=function(k,S){const {messages:N,messagesCommon:ka}=this,{selectedFeatureIndex:oa,selectedFeatureViewModel:sa}=this.viewModel;var M=k===sa;const ja={[q.CSS.featureMenuSelected]:M};M=M?aa.tsx("span",{key:la(`feature-menu-selected-feature-${oa}`),
title:N.selectedFeature,"aria-label":N.selectedFeature,class:q.CSS.iconCheckMark}):null;k=aa.tsx("span",{innerHTML:k.title||ka.untitled});return aa.tsx("li",{role:"menuitem",tabIndex:-1,key:la(`feature-menu-feature-${oa}`),class:this.classes(ja,q.CSS.featureMenuItem),bind:this,"data-feature-index":S,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},
aa.tsx("span",{class:q.CSS.featureMenuTitle},k,M))};T.renderFeatureMenu=function(){const {featureMenuId:k}=this,{featureViewModels:S}=this.viewModel;return 1<S.length?aa.tsx("ol",{class:q.CSS.featureMenuList,id:k,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},S.filter(N=>!!N.graphic).map((N,ka)=>this.renderFeatureMenuItem(N,ka))):null};T._storeFeatureSelectionAction=function(k,S){this._featureSelectionActions.set(k,
S);this.scheduleRender()};T._storeExitRelatedRecordsAction=function(k,S){this._exitRelatedRecordsActions.set(k,S);this.scheduleRender()};T._getFlowItemDescription=function(k){return"featureCountDescription"in k?k.featureCountDescription:k.viewModel.description??""};T._openRelatedFeature=async function(k){await k.viewModel.updateGeometry();k=k.graphic;var S=k?.geometry;null!=S&&null!=k&&(this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:S}),S=D.getPointFromGeometry(S),this.open({features:[k],
location:null!=S?S:void 0}))};T._destroyFlowItemWidgets=function(){this._flowItems.removeAll().forEach(k=>{"showAllEnabled"in k.viewModel&&(k.viewModel.showAllEnabled=!1);k.viewModel=null;k.destroy()})};T._handleBackClick=function(){const k=this._flowItems.pop();k&&(this._exitRelatedRecordsActions.delete(k),this._featureSelectionActions.delete(k),"showAllEnabled"in k.viewModel&&(k.viewModel.showAllEnabled=!1),k&&(k.viewModel=null,k.destroy()))};T._getActionTitle=function(k){const {messages:S,selectedFeature:N,
messagesCommon:ka}=this,{id:oa}=k,sa=N?.attributes,M=k.title??"";return(k="zoom-to-feature"===oa?da.substitute(M,{messages:S}):"remove-selected-feature"===oa?da.substitute(M,{messages:ka}):"zoom-to-clustered-features"===oa?da.substitute(M,{messages:S}):"browse-clustered-features"===oa?da.substitute(M,{messages:S}):k.title)&&sa?da.substitute(k,sa):k??""};T._getActionClass=function(k){var {selectedFeature:S}=this;S=S?.attributes;const {className:N,image:ka}=k;return(k=ka||N?N:q.CSS.iconDefaultAction)&&
S?da.substitute(k,S):k??""};T._getActionImage=function(k){if(k.active)return"";var {selectedFeature:S}=this;S=S?.attributes;({image:k}=k);return k&&S?da.substitute(k,S):k??""};T._createFeatureUpdatedAnimation=function(){return fa.cssTransition("enter",q.CSS.hasFeatureUpdated)};T._getInlineActionCount=function(){const {maxInlineActions:k,featureNavigationVisible:S}=this;if("number"!==typeof k)return null;const N=Math.round(k);return Math.max(S?N-1:N,0)};T._watchActions=function(){const {allActions:k}=
this.viewModel;this.notifyChange("dividedActions");this._handles.remove("actions");k&&k.forEach(S=>{this._handles.add(C.watch(()=>[S.uid,S.active,S.className,S.disabled,S.id,S.title,S.image,S.visible],()=>this.scheduleRender()),"actions")})};T._divideActions=function(){var {allActions:k}=this.viewModel;k=k.filter(oa=>oa.visible);const S=this._getInlineActionCount(),N=null===S,ka=0===S;return{inlineActions:N?k.slice(0):ka?new x:k.slice(0,S),menuActions:N?new x:ka?k.slice(0):k.slice(S)}};T._featureMenuOpenChanged=
function(k){k?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};T._actionsMenuOpenChanged=function(k){k?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};T._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:k,messagesCommon:S}=this;k&&(this.viewModel.title="error"===k.viewModel?.state?S.errorMessage:k.viewModel?.title||"")};T._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:k}=this;k&&(this.viewModel.content=k)};T._unobserveFeatureMenuObserver=
function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};T._featureMenuIntersectionObserverCreated=function(k){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(k);this._featureMenuIntersectionObserverNode=k};T._handleFeatureMenuKeyup=function(k){"Escape"===K.eventKey(k)&&(k.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};T._handleActionMenuKeyup=
function(k){"Escape"===K.eventKey(k)&&(k.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};T._setActiveFeature=function(k){const {viewModel:S}=this;k=l(k.currentTarget);S.activeFeature=S.features[k]||null};T._removeActiveFeature=function(){this.viewModel.activeFeature=null};T._handleFeatureMenuItemKeyup=function(k){const S=K.eventKey(k);var {_featureMenuNode:N}=this;const ka=l(k.currentTarget);if(N){N=N.querySelectorAll("li");var oa=N.length;"ArrowUp"===
S?(k.stopPropagation(),N[(ka-1+oa)%oa].focus()):"ArrowDown"===S?(k.stopPropagation(),N[(ka+1+oa)%oa].focus()):"Home"===S?(k.stopPropagation(),N[0].focus()):"End"===S&&(k.stopPropagation(),N[N.length-1].focus())}};T._handleActionMenuItemKeyup=function(k){const S=K.eventKey(k);var {_actionsMenuNode:N}=this;const ka=k.currentTarget.dataset.actionUid;var {menuActions:oa}=this.dividedActions;oa=oa.findIndex(M=>M.uid===ka);if(N){N=N.querySelectorAll("li");var sa=N.length;"ArrowUp"===S?(k.stopPropagation(),
N[(oa-1+sa)%sa].focus()):"ArrowDown"===S?(k.stopPropagation(),N[(oa+1+sa)%sa].focus()):"Home"===S?(k.stopPropagation(),N[0].focus()):"End"===S&&(k.stopPropagation(),N[N.length-1].focus())}};T._handleMainKeyup=function(k){const S=K.eventKey(k);"ArrowLeft"===S&&(k.stopPropagation(),this.previous());"ArrowRight"===S&&(k.stopPropagation(),this.next())};T._spinnerEnabledChange=function(k){this._destroySpinner();k&&(k=this.get("viewModel.view"),this._createSpinner(k))};T._hideSpinner=function(){const {_spinner:k}=
this;k&&(k.location=null,k.hide())};T._displaySpinner=function(){const {_spinner:k}=this;if(k){var {location:S,waitingForResult:N}=this.viewModel;N&&S?k.show({location:S}):k.hide()}};T._getIconStyles=function(k){return{"background-image":k?`url(${k})`:""}};T._shouldFocus=async function(k){k?.shouldFocus&&(await C.whenOnce(()=>!0===this.viewModel?.active),this.focus())};T._addSelectedFeatureIndexHandle=function(){const k=C.watch(()=>this.viewModel?.selectedFeatureIndex,(S,N)=>this._selectedFeatureIndexUpdated(S,
N));this._handles.add(k,"selected-index")};T._selectedFeatureIndexUpdated=function(k,S){const {featureCount:N}=this;N&&k!==S&&-1!==k&&(this._destroyFlowItemWidgets(),this.featureMenuOpen=this.actionsMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))};T._destroySelectedFeatureWidget=function(){const {_feature:k}=this;k&&(k.viewModel=null,k&&!k.destroyed&&k.destroy());this._feature=null};T._isScreenLocationWithinView=
function(k,S){return-1<k.x&&-1<k.y&&k.x<=S.width&&k.y<=S.height};T._isOutsideView=function(k){const {popupHeight:S,popupWidth:N,screenLocation:ka,side:oa,view:sa}=k;if(isNaN(N)||isNaN(S)||!sa||!ka)return!1;k=sa.padding;return"right"===oa&&ka.x+N/2>sa.width-k.right||"left"===oa&&ka.x-N/2<k.left||"top"===oa&&ka.y-S<k.top||"bottom"===oa&&ka.y+S>sa.height-k.bottom?!0:!1};T._calculateAutoAlignment=function(k){if("auto"!==k)return k;const {_pointerOffsetInPx:S,_containerNode:N,_mainContainerNode:ka,viewModel:oa}=
this,{screenLocation:sa,view:M}=oa;if(null==sa||!M||!N)return"top-center";if(!this._isScreenLocationWithinView(sa,M))return this._get("currentAlignment")||"top-center";var ja=(k=ka?window.getComputedStyle(ka,null):null)?parseInt(k.getPropertyValue("max-height").replaceAll(/[^-\d\.]/g,""),10):0,qa=k?parseInt(k.getPropertyValue("height").replaceAll(/[^-\d\.]/g,""),10):0;const {height:ua,width:ya}=N.getBoundingClientRect();k=ya+S;const Aa=Math.max(ua,ja,qa)+S;ja=this._isOutsideView({popupHeight:Aa,popupWidth:k,
screenLocation:sa,side:"right",view:M});qa=this._isOutsideView({popupHeight:Aa,popupWidth:k,screenLocation:sa,side:"left",view:M});const Ba=this._isOutsideView({popupHeight:Aa,popupWidth:k,screenLocation:sa,side:"top",view:M});k=this._isOutsideView({popupHeight:Aa,popupWidth:k,screenLocation:sa,side:"bottom",view:M});return qa?Ba?"bottom-right":"top-right":ja?Ba?"bottom-left":"top-left":Ba?k?"top-center":"bottom-center":"top-center"};T._callCurrentAlignment=function(k){return"function"===typeof k?
k.call(this):k};T._getCurrentAlignment=function(){const {alignment:k,dockEnabled:S}=this;return S||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(k)))};T._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};T._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};T._calculatePositionResult=function(k){const S=["left","right"];fa.isRTL(this.container)&&
S.reverse();return k?.replace(/leading/gi,S[0]).replaceAll(/trailing/gi,S[1])};T._callDockPosition=function(k){return"function"===typeof k?k.call(this):k};T._getDockPosition=function(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))};T._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};T._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};
T._calculateAutoDockPosition=function(k){if("auto"!==k)return k;var S=this.viewModel?.view;k=fa.isRTL(this.container)?"top-left":"top-right";if(!S)return k;var N=S.padding||{left:0,right:0,top:0,bottom:0};N=S.width-N.left-N.right;({breakpoints:S}=S);return S&&N<=S.xsmall?"bottom-center":k};T._positionContainer=function(k=this._containerNode){k&&(this._containerNode=k);if(this._containerNode){({screenLocation:k}=this.viewModel);var {width:S}=this._containerNode.getBoundingClientRect();(k=this._calculatePositionStyle(k,
S))&&Object.assign(this._containerNode.style,k)}};T._calculateFullWidth=function(k){const {currentAlignment:S,_pointerOffsetInPx:N}=this;return"top-left"===S||"bottom-left"===S||"top-right"===S||"bottom-right"===S?k+N:k};T._calculateAlignmentPosition=function(k,S,N,ka){const {currentAlignment:oa,_pointerOffsetInPx:sa}=this;if(N){var {padding:M}=N;ka/=2;var ja=N.height-S;N=N.width-k;if("bottom-center"===oa)return{top:S+sa-M.top,left:k-ka-M.left};if("top-left"===oa)return{bottom:ja+sa-M.bottom,right:N+
sa-M.right};if("bottom-left"===oa)return{top:S+sa-M.top,right:N+sa-M.right};if("top-right"===oa)return{bottom:ja+sa-M.bottom,left:k+sa-M.left};if("bottom-right"===oa)return{top:S+sa-M.top,left:k+sa-M.left};if("top-center"===oa)return{bottom:ja+sa-M.bottom,left:k-ka-M.left}}};T._calculatePositionStyle=function(k,S){const {dockEnabled:N,view:ka}=this;if(ka){if(N)return{left:"",top:"",right:"",bottom:""};if(null!=k&&S&&(S=this._calculateFullWidth(S),k=this._calculateAlignmentPosition(k.x,k.y,ka,S)))return{top:void 0!==
k.top?`${k.top}px`:"auto",left:void 0!==k.left?`${k.left}px`:"auto",bottom:void 0!==k.bottom?`${k.bottom}px`:"auto",right:void 0!==k.right?`${k.right}px`:"auto"}}};T._viewChange=function(k,S){k&&S&&(this.close(),this.clear())};T._viewReadyChange=function(k,S){k?(k=this.get("viewModel.view"),this._wireUpView(k)):S&&(this.close(),this.clear())};T._wireUpView=function(k){this._destroySpinner();if(k){var {spinnerEnabled:S}=this;S&&this._createSpinner(k);this._setDockEnabledForViewSize(this.dockOptions)}};
T._dockingThresholdCrossed=function(k,S,N){const [ka,oa]=k,[sa,M]=S,{width:ja=0,height:qa=0}=N??{};return ka<=ja&&sa>ja||ka>ja&&sa<=ja||oa<=qa&&M>qa||oa>qa&&M<=qa};T._updateDockEnabledForViewSize=function(k,S){if(k&&S){var N=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},ka=N.left+N.right,oa=N.top+N.bottom;N=[];var sa=[];N[0]=k[0]-ka;N[1]=k[1]-oa;sa[0]=S[0]-ka;sa[1]=S[1]-oa;({dockOptions:k}=this);this._dockingThresholdCrossed(N,sa,k.breakpoint)&&this._setDockEnabledForViewSize(k);
this._setCurrentDockPosition()}};T._focusDockButtonNode=function(k){this._focusDockButton&&(this._focusDockButton=!1,k.focus())};T._closeButtonNodeUpdated=function(k){this._focusClose?(this._focusClose=!1,k.focus()):this._blurClose&&(this._blurClose=!1,k.blur())};T._mainContainerNodeUpdated=function(k){this._mainContainerNode=k;this._focusContainer?(this._focusContainer=!1,k.focus()):this._blurContainer&&(this._blurContainer=!1,k.blur())};T._featureMenuNodeUpdated=function(k){(this._featureMenuNode=
k)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,k=k.querySelectorAll("li"),k.length&&k[0].focus())};T._actionsMenuNodeUpdated=function(k){(this._actionsMenuNode=k)&&this._focusFirstAction&&(this._focusFirstAction=!1,k=k.querySelectorAll("li"),k.length&&k[0].focus())};T._focusFeatureMenuButtonNode=function(k){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,k.focus())};T._focusActionsMenuButtonNode=function(k){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,k.focus())};
T._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)};T._toggleScreenLocationEnabled=function(){const {dockEnabled:k,viewModel:S}=this;S&&(S.screenLocationEnabled=S.active&&!k)};T._shouldDockAtCurrentViewSize=function(k){k=k.breakpoint;var S=this.viewModel?.view?.ui;if(!S)return!1;const {width:N,height:ka}=S;if(isNaN(N)||isNaN(ka)||!k)return!1;S=k.hasOwnProperty("width")&&N<=(k.width??0);k=k.hasOwnProperty("height")&&ka<=(k.height??
0);return S||k};T._setDockEnabledForViewSize=function(k){k.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(k))};T._getPageText=function(k,S){return this.featureNavigationVisible?da.substitute(this.messages.pageText,{index:S+1,total:k}):null};T._destroySpinner=function(){this._spinner&&(this.view?.ui?.remove(this._spinner,"popup-spinner"),this._spinner.destroy(),this._spinner=null)};T._createSpinner=function(k){k&&(this._spinner=new G({view:k}),k.ui.add(this._spinner,{key:"popup-spinner",
position:"manual",internal:!0}))};T._toggleCollapsed=function(){this.collapsed=!this.collapsed};T._close=function(){this.close();this.view&&this.view.focus()};T._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};T._toggleFeatureMenu=function(){const k=!this.featureMenuOpen;this._featureMenuOpenChanged(k);this.actionsMenuOpen=!1;this.featureMenuOpen=k};T._toggleActionsMenu=function(){const k=!this.actionsMenuOpen;this._actionsMenuOpenChanged(k);
this.featureMenuOpen=!1;this.actionsMenuOpen=k};T._triggerAction=function(k){const S=k.currentTarget.dataset.actionUid;var {allActions:N}=this.viewModel;k=N.findIndex(ka=>ka.uid===S);(N=N.at(k))&&"toggle"===N.type&&(N.value=!N.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(k)};T._selectFeature=function(k){k=l(k.currentTarget);null==k||isNaN(k)||(this.viewModel.selectedFeatureIndex=k);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};T._next=function(){this.next()};
T._previous=function(){this.previous()};r._createClass(X,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){const {selectedFeatureWidget:k,viewModel:S}=this;if(!k)return!!S?.content;
var N=k.viewModel;if(N?.waitingForContent||"error"===N?.state)return!0;N=N?.content;return Array.isArray(N)?!!N.length:!!N}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&!!this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",
get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"_activeFlowItemWidget",get:function(){const {_flowItems:k}=this;return k.at(-1)??null}},{key:"actions",get:function(){return this.viewModel.actions},set:function(k){this.viewModel.actions=k}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(k){this._set("actionsMenuOpen",!!k)}},{key:"autoCloseEnabled",
get:function(){return this.viewModel.autoCloseEnabled},set:function(k){this.viewModel.autoCloseEnabled=k}},{key:"autoOpenEnabled",get:function(){L.deprecatedProperty(J.getLogger(this),"autoOpenEnabled",{replacement:"MapView/SceneView.popupEnabled",version:"4.27"});return this.viewModel.autoOpenEnabled},set:function(k){L.deprecatedProperty(J.getLogger(this),"autoOpenEnabled",{replacement:"MapView/SceneView.popupEnabled",version:"4.27"});this.viewModel.autoOpenEnabled=k}},{key:"defaultPopupTemplateEnabled",
get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(k){this.viewModel.defaultPopupTemplateEnabled=k}},{key:"content",get:function(){return this.viewModel.content},set:function(k){this.viewModel.content=k}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||P},set:function(k){var S={...P};const N=this.viewModel?.view?.breakpoints;
var ka={};N&&(ka.width=N.xsmall,ka.height=N.xsmall);k={...S,...k};S={...S.breakpoint,...ka};({breakpoint:ka}=k);"object"===typeof ka?k.breakpoint={...S,...ka}:ka&&(k.breakpoint=S);this._set("dockOptions",k);this._setCurrentDockPosition();this.reposition()}},{key:"featureCount",get:function(){return this.viewModel.featureCount}},{key:"featureMenuOpen",get:function(){return this.viewModel.featureMenuOpen},set:function(k){this.viewModel.featureMenuOpen=k}},{key:"features",get:function(){return this.viewModel.features},
set:function(k){this.viewModel.features=k}},{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(k){this.viewModel.goToOverride=k}},{key:"highlightEnabled",get:function(){return this.viewModel.highlightEnabled},set:function(k){this.viewModel.highlightEnabled=k}},{key:"location",get:function(){return this.viewModel.location},set:function(k){this.viewModel.location=k}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(k){this._overrideIfSome("label",
k)}},{key:"promises",get:function(){return this.viewModel.promises},set:function(k){this.viewModel.promises=k}},{key:"selectedFeature",get:function(){return this.viewModel.selectedFeature}},{key:"selectedFeatureIndex",get:function(){return this.viewModel.selectedFeatureIndex},set:function(k){this.viewModel.selectedFeatureIndex=k}},{key:"selectedFeatureWidget",get:function(){const {_feature:k,visibleElements:S,headingLevel:N,_flowItems:ka}=this,{selectedFeatureViewModel:oa}=this.viewModel,sa={...S,
title:!1};if(!oa)return null;k?(k.viewModel=oa,k.visibleElements=sa):this._feature=new y({flowItems:ka,headingLevel:N+1,viewModel:oa,visibleElements:sa});return this._feature}},{key:"title",get:function(){return this.viewModel.title},set:function(k){this.viewModel.title=k}},{key:"updateLocationEnabled",get:function(){return this.viewModel.updateLocationEnabled},set:function(k){this.viewModel.updateLocationEnabled=k}},{key:"view",get:function(){return this.viewModel.view},set:function(k){this.viewModel.view=
k}},{key:"visible",get:function(){return this.viewModel.visible},set:function(k){this.viewModel.visible=k}}]);return X}(Z.FeatureContentMixin(z));v.__decorate([f.property({readOnly:!0})],e.prototype,"actionsMenuId",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"actionsMenuButtonId",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"featureMenuId",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"titleId",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"contentId",
null);v.__decorate([f.property({readOnly:!0})],e.prototype,"hasContent",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"featureNavigationVisible",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"collapsible",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"featureMenuVisible",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"contentCollapsed",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"dividedActions",null);v.__decorate([f.property({readOnly:!0,
dependsOn:["_flowItems.length"]})],e.prototype,"_activeFlowItemWidget",null);v.__decorate([f.property()],e.prototype,"actions",null);v.__decorate([f.property()],e.prototype,"actionsMenuOpen",null);v.__decorate([f.property()],e.prototype,"alignment",void 0);v.__decorate([f.property()],e.prototype,"autoCloseEnabled",null);v.__decorate([f.property()],e.prototype,"autoOpenEnabled",null);v.__decorate([f.property()],e.prototype,"defaultPopupTemplateEnabled",null);v.__decorate([f.property()],e.prototype,
"content",null);v.__decorate([f.property()],e.prototype,"collapsed",void 0);v.__decorate([f.property()],e.prototype,"collapseEnabled",void 0);v.__decorate([f.property({readOnly:!0})],e.prototype,"currentAlignment",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"currentDockPosition",null);v.__decorate([f.property()],e.prototype,"dockOptions",null);v.__decorate([f.property()],e.prototype,"dockEnabled",void 0);v.__decorate([f.property({readOnly:!0})],e.prototype,"featureCount",null);v.__decorate([f.property()],
e.prototype,"featureMenuOpen",null);v.__decorate([f.property()],e.prototype,"features",null);v.__decorate([f.property()],e.prototype,"goToOverride",null);v.__decorate([f.property()],e.prototype,"headingLevel",void 0);v.__decorate([f.property()],e.prototype,"highlightEnabled",null);v.__decorate([f.property()],e.prototype,"location",null);v.__decorate([f.property()],e.prototype,"label",null);v.__decorate([f.property()],e.prototype,"maxInlineActions",void 0);v.__decorate([f.property(),U.messageBundle("esri/widgets/Popup/t9n/Popup")],
e.prototype,"messages",void 0);v.__decorate([f.property(),U.messageBundle("esri/t9n/common")],e.prototype,"messagesCommon",void 0);v.__decorate([f.property()],e.prototype,"promises",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"selectedFeature",null);v.__decorate([f.property()],e.prototype,"selectedFeatureIndex",null);v.__decorate([f.property({readOnly:!0})],e.prototype,"selectedFeatureWidget",null);v.__decorate([f.property()],e.prototype,"spinnerEnabled",void 0);v.__decorate([f.property()],
e.prototype,"title",null);v.__decorate([f.property()],e.prototype,"updateLocationEnabled",null);v.__decorate([f.property()],e.prototype,"view",null);v.__decorate([f.property({type:m}),ea.vmEvent(["triggerAction","trigger-action"])],e.prototype,"viewModel",void 0);v.__decorate([f.property()],e.prototype,"visible",null);v.__decorate([f.property()],e.prototype,"visibleElements",void 0);v.__decorate([w.cast("visibleElements")],e.prototype,"castVisibleElements",null);v.__decorate([Y.accessibleHandler()],
e.prototype,"_close",null);v.__decorate([Y.accessibleHandler()],e.prototype,"_toggleDockEnabled",null);v.__decorate([Y.accessibleHandler()],e.prototype,"_toggleFeatureMenu",null);v.__decorate([Y.accessibleHandler()],e.prototype,"_toggleActionsMenu",null);v.__decorate([Y.accessibleHandler()],e.prototype,"_triggerAction",null);v.__decorate([Y.accessibleHandler()],e.prototype,"_selectFeature",null);v.__decorate([Y.accessibleHandler()],e.prototype,"_next",null);v.__decorate([Y.accessibleHandler()],e.prototype,
"_previous",null);return e=v.__decorate([u.subclass("esri.widgets.Popup")],e)});