// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/deprecate ../core/Logger ../core/reactiveUtils ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../intl/number ../properties/defaultUnit ./Widget ./ScaleBar/css ./ScaleBar/ScaleBarViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),function(t,g,v,e,w,x,k,G,
H,I,y,z,A,B,b,C,J,D,d){function u(q,l){return z.formatNumber(q,{style:"unit",unit:l,unitDisplay:"short"})}const E=e.getLogger("esri.widgets.ScaleBar");e=function(q){function l(a,c){a=q.call(this,a,c)||this;a.messages=null;a.style="line";a.viewModel=new C;return a}t._inherits(l,q);var p=l.prototype;p.initialize=function(){this.addHandles(w.watch(()=>{const {view:a}=this;return[a?.stationary,a?.center,a?.scale,a?.zoom]},([a])=>{a&&this.scheduleRender()}))};p.render=function(){var a="disabled"===this.viewModel.state;
const c={[b.CSS.disabled]:a};let m,n;if(!a){const {unit:f,style:F}=this;var h="metric"===f||"dual"===f;a="dual"===f?"line":F;if("imperial"===f||"non-metric"===f||"dual"===f){const r=this.viewModel.getScaleBarProperties(100,"imperial");r&&(n="ruler"===a?this._renderRuler(r):this._renderLine(r,"bottom"))}h&&(h=this.viewModel.getScaleBarProperties(100,"metric"))&&(m="ruler"===a?this._renderRuler(h):this._renderLine(h,"top"))}return d.tsx("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,
bind:this,class:this.classes(b.CSS.base,c)},m,n)};p._renderRuler=function(a){const {length:c,unit:m,value:n}=a;a=Math.round(c);const h=u(n,m);return d.tsx("div",{class:this.classes(b.CSS.barContainer,b.CSS.rulerBarContainer),key:b.CSS.rulerBarContainer},d.tsx("div",{class:b.CSS.ruler,styles:{width:`${a}px`}},d.tsx("div",{class:b.CSS.rulerBlock}),d.tsx("div",{class:b.CSS.rulerBlock}),d.tsx("div",{class:b.CSS.rulerBlock}),d.tsx("div",{class:b.CSS.rulerBlock})),d.tsx("div",{class:this.classes(b.CSS.labelContainer,
b.CSS.rulerLabelContainer)},d.tsx("div",{class:b.CSS.label},"0"),d.tsx("div",{class:b.CSS.label},h)))};p._renderLine=function(a,c){const {length:m,unit:n,value:h}=a;a=Math.round(m);var f=u(h,n);f=d.tsx("div",{class:this.classes(b.CSS.labelContainer,b.CSS.lineLabelContainer,{[b.CSS.topLabelContainer]:"top"===c,[b.CSS.bottomLabelContainer]:"bottom"===c}),key:b.CSS.labelContainer},d.tsx("div",{class:b.CSS.label},f));c=d.tsx("div",{class:this.classes(b.CSS.line,{[b.CSS.topLine]:"top"===c,[b.CSS.bottomLine]:"bottom"===
c}),key:b.CSS.line,styles:{width:`${a}px`}});return d.tsx("div",{class:this.classes(b.CSS.barContainer,b.CSS.lineBarContainer),key:b.CSS.lineBarContainer},[c,f])};p._handleRootCreateOrUpdate=function(a){if(this.viewModel){var {scaleComputedFrom:c}=this.viewModel;a=a.getBoundingClientRect();a=x.createScreenPoint(a.left+window.pageXOffset,a.top+window.pageYOffset);if(a.x!==c.x||a.y!==c.y)this.viewModel.scaleComputedFrom=a}};t._createClass(l,[{key:"label",get:function(){return this.messages?.widgetLabel??
""},set:function(a){this._overrideIfSome("label",a)}},{key:"unit",get:function(){return this._defaultUnit},set:function(a){"non-metric"===a&&v.deprecatedProperty(E,"unit",{replacement:"Please use 'imperial' instead of 'non-metric'.",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-ScaleBar.html#unit",version:"4.27",warnOnce:!0});this._overrideIfSome("unit",a)}},{key:"view",get:function(){return this.viewModel.view},set:function(a){this.viewModel.view=a}}]);return l}(B);
g.__decorate([k.property(A.defaultUnitPropertyMetadata)],e.prototype,"_defaultUnit",void 0);g.__decorate([k.property()],e.prototype,"label",null);g.__decorate([k.property(),D.messageBundle("esri/widgets/ScaleBar/t9n/ScaleBar")],e.prototype,"messages",void 0);g.__decorate([k.property({type:["ruler","line"]})],e.prototype,"style",void 0);g.__decorate([k.property({type:["metric","imperial","dual","non-metric"]})],e.prototype,"unit",null);g.__decorate([k.property()],e.prototype,"view",null);g.__decorate([k.property()],
e.prototype,"viewModel",void 0);return e=g.__decorate([y.subclass("esri.widgets.ScaleBar")],e)});