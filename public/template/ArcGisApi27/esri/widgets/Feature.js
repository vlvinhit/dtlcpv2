// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),function(n,
p,w,h,H,K,F,R,E,X,v,g,A,C){H=function(D){function y(L,x){L=D.call(this,L,x)||this;L._featureElementInfo=null;L.attachmentsWidget=new E;L.headingLevel=2;L.viewModel=new v;return L}n._inherits(y,D);var G=y.prototype;G.initialize=function(){this._featureElementInfo=new g;this.addHandles([w.watch(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),w.initial),w.watch(()=>this.viewModel,L=>this.attachmentsWidget.viewModel=L,w.initial)])};G.destroy=
function(){this.attachmentsWidget.viewModel=null;this.attachmentsWidget.destroy();this._featureElementInfo?.destroy()};G.render=function(){const {attachmentsWidget:L}=this;return C.tsx("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),L?.render())};G._setupFeatureElementInfo=function(){const {description:L,title:x,headingLevel:Z}=this;this._featureElementInfo?.set({description:L,title:x,headingLevel:Z})};n._createClass(y,[{key:"description",get:function(){return this.viewModel.description},
set:function(L){this.viewModel.description=L}},{key:"displayType",get:function(){return this.attachmentsWidget.displayType},set:function(L){this.attachmentsWidget.displayType=L}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(L){this.viewModel.graphic=L}},{key:"title",get:function(){return this.viewModel.title},set:function(L){this.viewModel.title=L}}]);return y}(X);p.__decorate([h.property({readOnly:!0})],H.prototype,"attachmentsWidget",void 0);p.__decorate([h.property()],
H.prototype,"description",null);p.__decorate([h.property()],H.prototype,"displayType",null);p.__decorate([h.property()],H.prototype,"graphic",null);p.__decorate([h.property()],H.prototype,"headingLevel",void 0);p.__decorate([h.property()],H.prototype,"title",null);p.__decorate([h.property({type:v})],H.prototype,"viewModel",void 0);return H=p.__decorate([R.subclass("esri.widgets.Feature.FeatureAttachments")],H)})},"esri/widgets/Attachments":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/componentsUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A,C,D,y,G,L){const x={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Z=window.CSS;E=function(W){function u(r,m){r=W.call(this,r,m)||this;r.displayType="auto";r.messages=null;r.messagesUnits=null;r.selectedFile=null;r.submitting=!1;r.viewModel=null;r.visibleElements={...x};r._supportsImageOrientation=Z&&Z.supports&&Z.supports("image-orientation","from-image");r._addAttachmentForm=
null;r._updateAttachmentForm=null;return r}p._inherits(u,W);var t=u.prototype;t.initialize=function(){this.viewModel||(this.viewModel=new A);this.addHandles([H.on(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),H.on(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),H.watch(()=>this.viewModel?.mode,()=>this._modeChanged(),H.initial)])};t.loadDependencies=function(){return D.loadCalciteComponents({icon:()=>new Promise((r,m)=>n(["../chunks/calcite-icon"],r,m))})};
t.castVisibleElements=function(r){return{...x,...r}};t.addAttachment=function(){const {_addAttachmentForm:r,viewModel:m}=this;this._set("submitting",!0);this._set("error",null);return m.addAttachment(r).then(J=>{this._set("submitting",!1);this._set("error",null);m.mode="view";return J}).catch(J=>{this._set("submitting",!1);this._set("error",new h("attachments:add-attachment",this.messages.addErrorMessage,J));throw J;})};t.deleteAttachment=function(r){const {viewModel:m}=this;this._set("submitting",
!0);this._set("error",null);return m.deleteAttachment(r).then(J=>{this._set("submitting",!1);this._set("error",null);m.mode="view";return J}).catch(J=>{this._set("submitting",!1);this._set("error",new h("attachments:delete-attachment",this.messages.deleteErrorMessage,J));throw J;})};t.updateAttachment=function(){const {viewModel:r}=this,{_updateAttachmentForm:m}=this;this._set("submitting",!0);this._set("error",null);return r.updateAttachment(m).then(J=>{this._set("submitting",!1);this._set("error",
null);r.mode="view";return J}).catch(J=>{this._set("submitting",!1);this._set("error",new h("attachments:update-attachment",this.messages.updateErrorMessage,J));throw J;})};t.addFile=function(){const r=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);this.viewModel.mode="view";return r};t.updateFile=function(){const {viewModel:r}=this,m=r.updateFile(this.selectedFile,this._updateAttachmentForm,r.activeFileInfo);r.mode="view";return m};t.deleteFile=function(r){r=this.viewModel.deleteFile(r||
this.viewModel.activeFileInfo?.file);this.viewModel.mode="view";return r};t.render=function(){const {submitting:r,viewModel:m}=this,{state:J}=m;return L.tsx("div",{class:this.classes("esri-attachments","esri-widget")},r?this.renderProgressBar():null,"loading"===J?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};t.renderErrorMessage=function(){const {error:r,visibleElements:m}=this;return r&&m.errorMessage?L.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},
r.message):null};t.renderAttachments=function(){const {activeFileInfo:r,mode:m,activeAttachmentInfo:J}=this.viewModel;return"add"===m?this.renderAddForm():"edit"===m?this.renderDetailsForm(J||r):this.renderAttachmentContainer()};t.renderLoading=function(){return L.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},L.tsx("div",{class:"esri-attachments__loader"}))};t.renderProgressBar=function(){return this.visibleElements.progressBar?L.tsx("div",{class:"esri-attachments__progress-bar",
key:"progress-bar"}):null};t.renderAddForm=function(){const {submitting:r,selectedFile:m}=this;var J=r||!m,S=this.visibleElements.cancelAddButton?L.tsx("button",{type:"button",bind:this,disabled:r,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",r&&"esri-button--disabled")},this.messages.cancel):null;J=this.visibleElements.addSubmitButton?L.tsx("button",{type:"submit",disabled:J,class:this.classes("esri-button","esri-button--secondary",
"esri-button--small","esri-button--half",{["esri-button--disabled"]:J})},this.messages.add):null;const P=m?L.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},m.name):null;S=L.tsx("form",{bind:this,afterCreate:y.storeNode,afterRemoved:y.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},L.tsx("fieldset",{class:"esri-attachments__file-fieldset"},P,L.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},
m?this.messages.changeFile:this.messages.selectFile,L.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),J,S);return L.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},S)};t.renderDetailsForm=function(r){const {visibleElements:m,viewModel:J,selectedFile:S,submitting:P}=this;var {capabilities:T}=J,da=P||!S;let Y;if(S){var z=S.type;Y=S.name;var Q=S.size}else if(r&&"file"in r)z=r.file.type,Y=r.file.name,
Q=r.file.size;else if(r&&"contentType"in r){z=r.contentType;Y=r.name;Q=r.size;var ea=r.url}var fa=T.editing&&T.operations?.delete&&m.deleteButton?L.tsx("button",{key:"delete-button",type:"button",disabled:P,bind:this,onclick:na=>this._submitDeleteAttachment(na,r),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:P})},this.messages.delete):void 0;da=T.editing&&T.operations?.update&&m.updateButton?L.tsx("button",
{disabled:da,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:da})},this.messages.update):void 0;const ja=this.visibleElements.cancelUpdateButton?L.tsx("button",{disabled:P,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:P})},this.messages.cancel):void 0;T=T.editing&&
T.operations?.update?L.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},L.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},Y),L.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,L.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0;Q=L.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},
L.tsx("label",null,K.formatFileSize(this.messagesUnits,Q??0)));z=L.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},L.tsx("label",null,z));ea=null!=ea?L.tsx("a",{class:"esri-attachments__item-link",href:ea,rel:"noreferrer",target:"_blank"},this.renderImageMask(r,400),L.tsx("div",{class:"esri-attachments__item-link-overlay"},L.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},L.tsx("calcite-icon",{icon:"launch"})))):this.renderImageMask(r,400);fa=L.tsx("form",
{bind:this,afterCreate:y.storeNode,afterRemoved:y.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:na=>this._submitUpdateAttachment(na,r)},L.tsx("div",{class:"esri-attachments__metadata"},Q,z),T,L.tsx("div",{class:"esri-attachments__actions"},fa,ja,da));return L.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},ea,fa)};t.renderImageMask=function(r,m){return r?"file"in r?this.renderGenericImageMask(r.file.name,r.file.type):this.renderImageMaskForAttachment(r,m):
null};t.renderGenericImageMask=function(r,m){var {supportsResizeAttachments:J}=this.viewModel;m=C.getIconPath(m);J={["esri-attachments__image--resizable"]:J};return L.tsx("div",{key:m,class:this.classes("esri-attachments__item-mask--icon","esri-attachments__item-mask")},L.tsx("img",{title:r,alt:r,src:m,class:this.classes(J,"esri-attachments__image")}))};t.renderImageMaskForAttachment=function(r,m){var {supportsResizeAttachments:J}=this.viewModel;if(!r)return null;const {contentType:S,name:P,url:T}=
r;if(!J||!C.isSupportedImage(S))return this.renderGenericImageMask(P,S);r=(r=this._getCSSTransform(r))?{transform:r,"image-orientation":"none"}:{};m=`${T}${T?.includes("?")?"\x26":"?"}w=${m}`;J={["esri-attachments__image--resizable"]:J};return L.tsx("div",{key:m,class:this.classes("esri-attachments__item-mask")},L.tsx("img",{styles:r,alt:P,title:P,src:m,class:this.classes(J,"esri-attachments__image")}))};t.renderFile=function(r){const {file:m}=r;return L.tsx("li",{class:"esri-attachments__item",key:m},
L.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(r),type:"button"},this.renderImageMask(r),L.tsx("label",{class:"esri-attachments__label"},L.tsx("span",{class:"esri-attachments__filename"},m.name||this.messages.noTitle),L.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",y.isRTL(this.container)?"esri-icon-left":
"esri-icon-right")}))))};t.renderAttachmentInfo=function({attachmentInfo:r,displayType:m}){const {viewModel:J,effectiveDisplayType:S}=this,{capabilities:P,supportsResizeAttachments:T}=J,{contentType:da,name:Y,url:z}=r;m=this.renderImageMask(r,"list"===m?48:400);var Q=P.editing?L.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",y.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;Q="preview"===S&&T&&C.isSupportedImage(da)?null:L.tsx("label",{class:"esri-attachments__label"},
L.tsx("span",{class:"esri-attachments__filename"},Y||this.messages.noTitle),Q);m=[m,Q];m=P.editing?L.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":r.id,onclick:()=>this._startEditAttachment(r),type:"button"},m):L.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:z??void 0,target:"_blank"},m);return L.tsx("li",{class:"esri-attachments__item",
key:r},m)};t.renderAttachmentContainer=function(){const {effectiveDisplayType:r,viewModel:m,visibleElements:J}=this,{attachmentInfos:S,capabilities:P,fileInfos:T}=m;var da=!!S?.length;const Y=!!T?.length,z={["esri-attachments__container--list"]:"preview"!==r,["esri-attachments__container--preview"]:"preview"===r},Q=P.editing&&P.operations?.add&&J.addButton?L.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),
type:"button"},L.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):void 0,ea=da?L.tsx("ul",{key:"attachments-list",class:"esri-attachments__items"},S.toArray().map(ja=>this.renderAttachmentInfo({attachmentInfo:ja,displayType:r}))):void 0,fa=Y?L.tsx("ul",{key:"file-list",class:"esri-attachments__items"},T.toArray().map(ja=>this.renderFile(ja))):void 0;da=Y||da?void 0:L.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);
return L.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",z)},ea,fa,da,Q)};t._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};t._handleFileInputChange=function(r){r=(r=r.target)&&r.files&&r.files.item(0);this._set("selectedFile",r)};t._submitDeleteAttachment=function(r,m){r.preventDefault();m&&("file"in m?this.deleteFile(m.file):m&&this.deleteAttachment(m))};t._submitAddAttachment=function(r){r.preventDefault();this.viewModel.filesEnabled?
this.addFile():this.addAttachment()};t._submitUpdateAttachment=function(r,m){r.preventDefault();m&&"file"in m?this.updateFile():this.updateAttachment()};t._startEditAttachment=function(r){const {viewModel:m}=this;m.activeFileInfo=null;m.activeAttachmentInfo=r;m.mode="edit"};t._startEditFile=function(r){const {viewModel:m}=this;m.activeAttachmentInfo=null;m.activeFileInfo=r;m.mode="edit"};t._startAddAttachment=function(){this.viewModel.mode="add"};t._cancelForm=function(r){r.preventDefault();this.viewModel.mode=
"view"};t._getCSSTransform=function(r){({orientationInfo:r}=r);return!this._supportsImageOrientation&&r?[r.rotation?`rotate(${r.rotation}deg)`:"",r.mirrored?"scaleX(-1)":""].join(" "):""};p._createClass(u,[{key:"capabilities",get:function(){return this.viewModel.capabilities},set:function(r){this.viewModel.capabilities=r}},{key:"effectiveDisplayType",get:function(){const {displayType:r}=this;return r&&"auto"!==r?r:this.viewModel.supportsResizeAttachments?"preview":"list"}},{key:"graphic",get:function(){return this.viewModel.graphic},
set:function(r){this.viewModel.graphic=r}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(r){this._overrideIfSome("label",r)}}]);return u}(g);w.__decorate([F.property()],E.prototype,"capabilities",null);w.__decorate([F.property()],E.prototype,"displayType",void 0);w.__decorate([F.property({readOnly:!0})],E.prototype,"effectiveDisplayType",null);w.__decorate([F.property()],E.prototype,"graphic",null);w.__decorate([F.property()],E.prototype,"label",null);w.__decorate([F.property(),
G.messageBundle("esri/widgets/Attachments/t9n/Attachments")],E.prototype,"messages",void 0);w.__decorate([F.property(),G.messageBundle("esri/core/t9n/Units")],E.prototype,"messagesUnits",void 0);w.__decorate([F.property({readOnly:!0})],E.prototype,"selectedFile",void 0);w.__decorate([F.property({readOnly:!0})],E.prototype,"submitting",void 0);w.__decorate([F.property({readOnly:!0})],E.prototype,"error",void 0);w.__decorate([F.property({type:A})],E.prototype,"viewModel",void 0);w.__decorate([F.property()],
E.prototype,"visibleElements",void 0);w.__decorate([R.cast("visibleElements")],E.prototype,"castVisibleElements",null);return E=w.__decorate([v.subclass("esri.widgets.Attachments")],E)})},"esri/core/unitFormatUtils":function(){define("exports ./ByteSizeUnit ./Cyclical ./mathUtils ./string ./unitUtils ../intl/number".split(" "),function(n,p,w,h,H,K,F){function R(C,D,y){return C.units[D][y]}function E(C,D,y,G=2,L="abbr"){return`${F.formatNumber(D,{minimumFractionDigits:G,maximumFractionDigits:G,signDisplay:0<
D?"never":"exceptZero"})} ${R(C,y,L)}`}function X(C,D,y,G=2,L="abbr"){return`${F.formatNumber(D,{minimumFractionDigits:G,maximumFractionDigits:G,signDisplay:"exceptZero"})} ${R(C,y,L)}`}function v(C,D){const y=JSON.stringify(D);let G=g.get(y);G||(G=new Intl.NumberFormat("en-US",D),g.set(y,G));return/\-?\+?360/.test(G.format(C))?0:C}const g=new Map,A=["B","kB","MB","GB","TB"];n.formatAngleDegrees=function(C,D,y,G,L){L=L??2;var x=w.cyclicalDegrees,Z=x.normalize;a:if(C=K.convertUnit(C,D,"degrees"),y===
G)y=C;else{switch(G){case "arithmetic":y=-C+90;break a;case "geographic":y=-C-90;break a}y=void 0}x=Z.call(x,y,0,!0);L={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:L,minimumFractionDigits:L,signDisplay:0<x?"never":"exceptZero"};x=v(x,L);return F.formatNumber(x,L)};n.formatDMS=function(C,D,y=2){C=K.convertUnit(C,D,"degrees");D=C-Math.floor(C);C-=D;D*=60;let G=D-Math.floor(D);D-=G;G*=60;return`${C.toFixed()}\u00b0 ${D.toFixed()}' ${G.toFixed(y)}"`};n.formatDecimal=E;n.formatFileSize=
function(C,D){let y=0===D?0:Math.floor(Math.log(D)/Math.log(p.ByteSizeUnit.KILOBYTES));y=h.clamp(y,0,A.length-1);D=F.formatNumber(D/p.ByteSizeUnit.KILOBYTES**y,{maximumFractionDigits:2});return H.replace(C.units.bytes[A[y]],{fileSize:D})};n.formatImperialArea=function(C,D,y,G=2,L="abbr"){const x=K.preferredImperialAreaUnit(D,y);return E(C,K.convertUnit(D,y,x),x,G,L)};n.formatImperialLength=function(C,D,y,G=2,L="abbr"){const x=K.preferredImperialLengthUnit(D,y);return E(C,K.convertUnit(D,y,x),x,G,
L)};n.formatImperialRelativeLength=function(C,D,y,G=2,L="abbr"){const x=K.preferredImperialLengthUnit(D,y);return X(C,K.convertUnit(D,y,x),x,G,L)};n.formatImperialRelativeVerticalLength=function(C,D,y,G=2,L="abbr"){const x=K.preferredImperialVerticalLengthUnit(D,y);return X(C,K.convertUnit(D,y,x),x,G,L)};n.formatImperialVerticalLength=function(C,D,y,G=2,L="abbr"){const x=K.preferredImperialVerticalLengthUnit(D,y);return E(C,K.convertUnit(D,y,x),x,G,L)};n.formatMetricArea=function(C,D,y,G=2,L="abbr"){const x=
K.preferredMetricAreaUnit(D,y);return E(C,K.convertUnit(D,y,x),x,G,L)};n.formatMetricLength=function(C,D,y,G=2,L="abbr"){const x=K.preferredMetricLengthUnit(D,y);return E(C,K.convertUnit(D,y,x),x,G,L)};n.formatMetricRelativeLength=function(C,D,y,G=2,L="abbr"){const x=K.preferredMetricLengthUnit(D,y);return X(C,K.convertUnit(D,y,x),x,G,L)};n.formatMetricRelativeVerticalLength=function(C,D,y,G=2,L="abbr"){const x=K.preferredMetricVerticalLengthUnit(D,y);return X(C,K.convertUnit(D,y,x),x,G,L)};n.formatMetricVerticalLength=
function(C,D,y,G=2,L="abbr"){const x=K.preferredMetricVerticalLengthUnit(D,y);return E(C,K.convertUnit(D,y,x),x,G,L)};n.formatRelativeAngleDegrees=function(C,D,y,G,L){y!==G&&(C=-C);L=L??2;y={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:L,minimumFractionDigits:L,signDisplay:"exceptZero"};C=K.convertUnit(C,D,"degrees")%360;C=v(C,y);return F.formatNumber(C,y)};n.formatRelativeDecimal=X;n.unitName=R;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],
function(n){n.ByteSizeUnit=void 0;var p=n.ByteSizeUnit||(n.ByteSizeUnit={});p[p.KILOBYTES=1024]="KILOBYTES";p[p.MEGABYTES=1048576]="MEGABYTES";p[p.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A,C,D){const y={editing:!1,operations:{add:!0,update:!0,delete:!0}},G=H.ofType(A);h=function(L){function x(W){var u=L.call(this,W)||this;u._getAttachmentsPromise=null;u._attachmentLayer=null;u.capabilities={...y};u.activeAttachmentInfo=null;u.activeFileInfo=null;u.attachmentInfos=new G;u.fileInfos=new H;u.graphic=null;u.mode="view";u.filesEnabled=!1;u.addHandles(F.watch(()=>u.graphic,()=>u._graphicChanged(),F.initial));return u}n._inherits(x,L);var Z=x.prototype;Z.destroy=
function(){this.graphic=this._attachmentLayer=null};Z.castCapabilities=function(W){return{...y,...W}};Z.getAttachments=async function(){const {_attachmentLayer:W,attachmentInfos:u}=this;if(!W||"function"!==typeof W.queryAttachments)throw new K("invalid-layer","getAttachments(): A valid layer is required.");const t=this._getObjectId();var r=new C({objectIds:[t],returnMetadata:!0});const m=[];this._getAttachmentsPromise=r=W.queryAttachments(r).then(J=>J[t]||m).catch(()=>m);this.notifyChange("state");
r=await r;u.removeAll();r.length&&u.addMany(r);this._getAttachmentsPromise=null;this.notifyChange("state");return r};Z.addAttachment=async function(W,u=this.graphic){const {_attachmentLayer:t,attachmentInfos:r,capabilities:m}=this;if(!u)throw new K("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:u});if(!W)throw new K("invalid-attachment","addAttachment(): An attachment is required.",{attachment:W});if(!m.operations?.add)throw new K("invalid-capabilities","addAttachment(): add capabilities are required.");
if(!t||"function"!==typeof t.addAttachment)throw new K("invalid-layer","addAttachment(): A valid layer is required.");W=await t.addAttachment(u,W).then(J=>this._queryAttachment(J.objectId,u));r.add(W);return W};Z.deleteAttachment=async function(W){const {_attachmentLayer:u,attachmentInfos:t,graphic:r,capabilities:m}=this;if(!W)throw new K("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:W});if(!m.operations?.delete)throw new K("invalid-capabilities","deleteAttachment(): delete capabilities are required.");
if(!u||"function"!==typeof u.deleteAttachments)throw new K("invalid-layer","deleteAttachment(): A valid layer is required.");if(!r)throw new K("invalid-graphic","deleteAttachment(): A graphic is required.");const J=await u.deleteAttachments(r,[W.id]).then(()=>W);t.remove(J);return J};Z.updateAttachment=async function(W,u=this.activeAttachmentInfo){const {_attachmentLayer:t,attachmentInfos:r,graphic:m,capabilities:J}=this;if(!W)throw new K("invalid-attachment","updateAttachment(): An attachment is required.",
{attachment:W});if(!u)throw new K("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:u});if(!J.operations?.update)throw new K("invalid-capabilities","updateAttachment(): Update capabilities are required.");const S=r.findIndex(P=>P===u);if(!t||"function"!==typeof t.updateAttachment)throw new K("invalid-layer","updateAttachment(): A valid layer is required.");if(!m)throw new K("invalid-graphic","updateAttachment(): A graphic is required.");W=await t.updateAttachment(m,
u.id,W).then(P=>this._queryAttachment(P.objectId));r.splice(S,1,W);return W};Z.commitFiles=async function(){await Promise.all(this.fileInfos.items.map(W=>this.addAttachment(W.form)));this.fileInfos.removeAll();return this.getAttachments()};Z.addFile=function(W,u){if(!W||!u)return null;W={file:W,form:u};this.fileInfos.add(W);return W};Z.updateFile=function(W,u,t=this.activeFileInfo){if(!W||!u||!t)return null;const r=this.fileInfos.findIndex(m=>t===m);-1<r&&this.fileInfos.splice(r,1,{file:W,form:u});
return this.fileInfos.items[r]};Z.deleteFile=function(W){const u=this.fileInfos.find(t=>t.file===W);return u?(this.fileInfos.remove(u),u):null};Z._queryAttachment=async function(W,u){const {_attachmentLayer:t}=this;if(!W||!t?.queryAttachments)throw new K("invalid-attachment-id","Could not query attachment.");const r=this._getObjectId(u);W=new C({objectIds:[r],attachmentsWhere:`AttachmentId=${W}`,returnMetadata:!0});return t.queryAttachments(W).then(m=>m[r][0])};Z._getObjectId=function(W=this.graphic){return W?.getObjectId()??
null};Z._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};Z._setAttachmentLayer=function(){var {graphic:W}=this;this._attachmentLayer=(W=D.getSourceLayer(W))?"scene"===W.type&&null!=W.associatedLayer?W.associatedLayer:W:null};n._createClass(x,[{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){var {graphic:W}=this;if(!W)return!1;W=W.layer||
W.sourceLayer;return W?.loaded&&"capabilities"in W&&W.capabilities&&"operations"in W.capabilities&&"supportsResizeAttachments"in W.capabilities.operations&&W.capabilities.operations.supportsResizeAttachments||!1}}]);return x}(h);p.__decorate([R.property()],h.prototype,"capabilities",void 0);p.__decorate([E.cast("capabilities")],h.prototype,"castCapabilities",null);p.__decorate([R.property()],h.prototype,"activeAttachmentInfo",void 0);p.__decorate([R.property()],h.prototype,"activeFileInfo",void 0);
p.__decorate([R.property({readOnly:!0,type:G})],h.prototype,"attachmentInfos",void 0);p.__decorate([R.property()],h.prototype,"fileInfos",void 0);p.__decorate([R.property({type:w})],h.prototype,"graphic",void 0);p.__decorate([R.property()],h.prototype,"mode",void 0);p.__decorate([R.property({readOnly:!0})],h.prototype,"state",null);p.__decorate([R.property()],h.prototype,"filesEnabled",void 0);p.__decorate([R.property({readOnly:!0})],h.prototype,"supportsResizeAttachments",null);return h=p.__decorate([g.subclass("esri.widgets.Attachments.AttachmentsViewModel")],
h)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),function(n,p,w,h,H,K,F,R,E){var X;const v={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,
rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};w=X=function(g){function A(C){C=g.call(this,C)||this;C.contentType=null;C.exifInfo=null;C.id=null;C.globalId=null;C.keywords=null;C.name=null;C.parentGlobalId=null;C.parentObjectId=null;C.size=null;C.url=null;return C}n._inherits(A,g);A.prototype.clone=function(){return new X({contentType:this.contentType,
exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};n._createClass(A,[{key:"orientationInfo",get:function(){var {exifInfo:C}=this;C=E.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:C});return v[C]||null}}]);return A}(w.JSONSupport);p.__decorate([h.property({type:String})],w.prototype,"contentType",void 0);p.__decorate([h.property()],w.prototype,
"exifInfo",void 0);p.__decorate([h.property({readOnly:!0})],w.prototype,"orientationInfo",null);p.__decorate([h.property({type:H.Integer})],w.prototype,"id",void 0);p.__decorate([h.property({type:String})],w.prototype,"globalId",void 0);p.__decorate([h.property({type:String})],w.prototype,"keywords",void 0);p.__decorate([h.property({type:String})],w.prototype,"name",void 0);p.__decorate([h.property({json:{read:!1}})],w.prototype,"parentGlobalId",void 0);p.__decorate([h.property({json:{read:!1}})],
w.prototype,"parentObjectId",void 0);p.__decorate([h.property({type:H.Integer})],w.prototype,"size",void 0);p.__decorate([h.property({json:{read:!1}})],w.prototype,"url",void 0);return w=X=p.__decorate([R.subclass("esri.layers.support.AttachmentInfo")],w)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(n){function p(w){const {tagName:h,tags:H}=w;return H&&h?(w=H.find(K=>K.name===h))&&w.value||null:null}n.getExifValue=function(w){const {exifInfo:h,exifName:H,tagName:K}=w;
return h&&H&&K?(w=h.find(F=>F.name===H))?p({tagName:K,tags:w.tags}):null:null};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../core/Logger ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../layers/support/layerUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),function(n,p,w,h,H,K,F,R,E){function X(O){return O?ra.test(O):
!1}function v(O,ba){if(!X(ba)||!O)return null;const ia=ba.replace(ra,"").toLowerCase();let sa=null;O.some(ya=>ya.name.toLowerCase()===ia?(sa=ya,!0):!1);return sa}function g(O,ba){return(ba=A(ba,O))?ba.name:O}function A(O,ba){return O&&"function"===typeof O.getField&&ba?O.getField(ba)??null:null}function C({formattedAttributes:O,template:ba,fieldInfoMap:ia}){return`${w.replace(w.replace(ba,sa=>{const ya=ia.get(sa.toLowerCase());return`{${ya&&ya.fieldName||sa}}`}),O).replaceAll(ja,"")}`.trim()}function D(O,
ba,ia=!1){const sa=ba[O];"string"===typeof sa&&(ia=(ia?encodeURIComponent(sa):sa).replaceAll(qa,"%27"),ba[O]=ia)}function y(O,ba=!1){const ia={...O};Object.keys(ia).forEach(sa=>D(sa,ia,ba));return ia}function G(O,ba){return O.replaceAll(na,(ia,sa,ya)=>(ia=A(ba,ya))?`{${ia.name}}`:sa)}function L(O,ba,ia){return(O=G(O,ia))?O.replaceAll(Da,(sa,ya,Fa)=>{ya=`${ya||Fa}`.trim();return w.replace(sa,y(ba,ya&&"{"!==ya[0]||!1))}):O}function x(O){return null!=O&&"object"===typeof O&&"layer"in O&&!!O.layer}function Z(O){return null!=
O&&"object"===typeof O&&"fieldsIndex"in O&&"geometryType"in O&&"getField"in O&&"load"in O&&"loaded"in O&&"objectIdField"in O&&"spatialReference"in O&&"type"in O&&"feature"===O.type&&"when"in O}function W(O){return null!=O&&"object"===typeof O&&"createQuery"in O&&"queryFeatureCount"in O&&"queryObjectIds"in O&&"queryRelatedFeatures"in O&&"queryRelatedFeaturesCount"in O&&"relationships"in O}function u(O){return Z(O)&&W(O)}function t(O,ba){const {fieldInfos:ia,fieldName:sa,preventPlacesFormatting:ya,
layer:Fa}=ba;var Aa=r(ia,sa)?.clone();ba=A(Fa,sa);if(Aa&&!K.isRasterPixelValueField(sa)){const Na=ba?.type;if("date"===Na||"date-only"===Na||"time-only"===Na||"timestamp-offset"===Na||Aa.format?.dateFormat){ba=Aa.format??new R;ba.dateFormat??(ba.dateFormat="date-only"===Na?"short-date":"short-date-short-time");if("number"===typeof O){if(!(Aa=!x(Fa)&&F.isFeatureLayer(Fa)&&Fa.datesInUnknownTimezone)){if(Aa=x(Fa))Aa=Fa.layer,Aa=null!=Aa&&"object"===typeof Aa&&"type"in Aa&&"map-image"===Aa.type;Aa=Aa&&
Fa.layer.datesInUnknownTimezone}return ba.formatDate(O,Aa)}switch(Na){case "date-only":return ba.formatDateOnly(O);case "time-only":return ba.formatTimeOnly(O);case "timestamp-offset":return ba.formatTimestamp(O)}}}ba=Aa?.format;if("string"===typeof O&&K.isRasterPixelValueField(sa)&&ba)return ba.formatRasterPixelValue(O);"string"!==typeof O||!ba||null!=ba.dateFormat||null==ba.places&&null==ba.digitSeparator||(Aa=Number(O),isNaN(Aa)||(O=Aa));return"string"===typeof O||null==O||null==ba?S(O):ya?H.formatNumber(O,
{...H.convertNumberFormatToIntlOptions(ba),minimumFractionDigits:0,maximumFractionDigits:20}):ba.formatNumber(O)}function r(O,ba){if(O&&O.length&&ba)return O.find(ia=>ia.fieldName?.toLowerCase()===ba.toLowerCase())}function m({fieldName:O,graphic:ba,layer:ia}){if(Y(O)||!ia||"function"!==typeof ia.getFeatureType)return null;const {typeIdField:sa}=ia;return sa&&O===sa?(O=ia.getFeatureType(ba))?O.name:null:null}function J({fieldName:O,value:ba,graphic:ia,layer:sa}){return Y(O)||!sa||"function"!==typeof sa.getFieldDomain?
null:(O=ia&&sa.getFieldDomain(O,{feature:ia}))&&"coded-value"===O.type?O.getName(ba):null}function S(O){return"string"===typeof O?O.replaceAll(xa,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):O}function P(O){const {value:ba,fieldName:ia,fieldInfos:sa,fieldInfoMap:ya,layer:Fa,graphic:Aa}=O;if(null==ba)return"";if((O=J({fieldName:ia,value:ba,graphic:Aa,layer:Fa}))||(O=m({fieldName:ia,graphic:Aa,layer:Fa})))return O;if(ya.get(ia.toLowerCase()))return t(ba,{fieldInfos:sa||Array.from(ya.values()),fieldName:ia,
layer:Fa});switch(Fa?.fieldsIndex?.get(ia)?.type){case "date":return h.formatDate(ba);case "date-only":return h.formatDateOnly(ba);case "time-only":return h.formatTimeOnly(ba);case "timestamp-offset":return h.formatTimestamp(ba)}return S(ba)}async function T(O,ba){const {layer:ia,graphic:sa,outFields:ya,objectIds:Fa,returnGeometry:Aa,spatialReference:Na}=O;O=Fa[0];if("number"!==typeof O&&"string"!==typeof O)return fa.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",
{layer:ia,graphic:sa,objectId:O,requiredFields:ya}),null;if(!F.getEffectiveLayerCapabilities(ia)?.operations?.supportsQuery)return fa.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:ia,graphic:sa,requiredFields:ya,returnGeometry:Aa}),null;O=ia.createQuery();O.objectIds=Fa;O.outFields=ya?.length?ya:[ia.objectIdField];O.returnGeometry=!!Aa;O.returnZ=!!Aa;O.returnM=!!Aa;O.outSpatialReference=Na;return(await ia.queryFeatures(O,ba)).features[0]}async function da(O){if(!O.expressionInfos?.length)return!1;
var ba=await E.loadArcade();({arcadeUtils:{hasGeometryFunctions:ba}}=ba);return ba(O)}function Y(O=""){return O?O.includes("relationships/"):!1}function z({attributes:O,graphic:ba,relatedInfo:ia,fieldInfos:sa,fieldInfoMap:ya,layer:Fa}){O&&ba&&ia&&Object.keys(ba.attributes).forEach(Aa=>{var Na=(Na={layerId:ia.relation.id.toString(),fieldName:Aa},`${"relationships/"}${Na.layerId}/${Na.fieldName}`);O[Na]=P({fieldName:Na,fieldInfos:sa,fieldInfoMap:ya,layer:Fa,value:ba.attributes[Aa],graphic:ba})})}function Q({attributes:O,
relatedInfo:ba,fieldInfoMap:ia,fieldInfos:sa,layer:ya}){O&&ba&&(ba.relatedFeatures&&ba.relatedFeatures&&ba.relatedFeatures.forEach(Fa=>z({attributes:O,graphic:Fa,relatedInfo:ba,fieldInfoMap:ia,fieldInfos:sa,layer:ya})),ba.relatedStatsFeatures&&ba.relatedStatsFeatures&&ba.relatedStatsFeatures.forEach(Fa=>z({attributes:O,graphic:Fa,relatedInfo:ba,fieldInfoMap:ia,fieldInfos:sa,layer:ya})))}function ea(O,ba,ia){return O.filter(u).find(sa=>sa!==ba&&sa.url===ba.url&&sa.layerId===ia.relatedTableId)}const fa=
p.getLogger("esri.widgets.Feature.support.featureUtils"),ja=/href=(""|'')/gi,na=/(\{([^\{\r\n]+)\})/g,qa=/'/g,ra=/^\s*expression\//i,xa=/(\n)/gi,Ba=/[\u00A0-\u9999<>&]/gim,Da=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,va=/^(?:mailto:|tel:)/,pa=h.convertDateFormatToIntlOptions("short-date-short-time"),wa=O=>{if(!O)return!1;O=O.toUpperCase();return O.includes("CURRENT_TIMESTAMP")||O.includes("CURRENT_DATE")||O.includes("CURRENT_TIME")},Ka=({layer:O,method:ba,query:ia,definitionExpression:sa})=>{O.capabilities?.query?.supportsCacheHint&&
"attachments"!==ba&&(O=null!=ia.where?ia.where:null,ba=null!=ia.geometry?ia.geometry:null,wa(sa)||wa(O)||"extent"===ba?.type||"tile"===ia.resultType||(ia.cacheHint=!0))};n.applyTextFormattingHTML=S;n.createfieldInfoMap=function(O,ba){const ia=new Map;if(!O)return ia;O.forEach(sa=>{const ya=g(sa.fieldName,ba);sa.fieldName=ya;ia.set(ya.toLowerCase(),sa)});return ia};n.findRelatedLayer=function(O,ba,ia){return O&&ba&&ia?ea(O.allLayers,ba,ia)||ea(O.allTables,ba,ia):null};n.fixTokens=G;n.formatAttributes=
function({fieldInfos:O,attributes:ba,layer:ia,graphic:sa,fieldInfoMap:ya,relatedInfos:Fa}){const Aa={};Fa?.forEach(Na=>Q({attributes:Aa,relatedInfo:Na,fieldInfoMap:ya,fieldInfos:O,layer:ia}));ba&&Object.keys(ba).forEach(Na=>{Aa[Na]=P({fieldName:Na,fieldInfos:O,fieldInfoMap:ya,layer:ia,value:ba[Na],graphic:sa})});return Aa};n.formatEditInfo=function(O,ba){const {creatorField:ia,creationDateField:sa,editorField:ya,editDateField:Fa}=O;if(ba){O=ba[Fa];if("number"===typeof O)return ba=ba[ya],{type:"edit",
date:h.formatDate(O,pa),user:ba};O=ba[sa];return"number"===typeof O?(ba=ba[ia],{type:"create",date:h.formatDate(O,pa),user:ba}):null}};n.formatValueToFieldInfo=t;n.getAllFieldInfos=function(O){const ba=[];if(!O)return ba;const {fieldInfos:ia,content:sa}=O;ia&&ba.push(...ia);if(!sa||!Array.isArray(sa))return ba;sa.forEach(ya=>{"fields"===ya.type&&(ya=ya&&ya.fieldInfos)&&ba.push(...ya)});return ba};n.getFieldInfo=r;n.getFieldInfoLabel=function(O,ba){return(ba=v(ba,O?.fieldName))?ba.title||null:O?O.label||
O.fieldName:null};n.getFixedFieldName=g;n.getFixedFieldNames=function(O,ba){return O&&O.map(ia=>g(ia,ba))};n.getSourceLayer=function(O){if(null!=O)return O.get("sourceLayer")||O.get("layer")};n.graphicCallback=async function(O,ba){return"function"===typeof O?O(ba):O};n.htmlEntities=function(O){return O.replaceAll(Ba,ba=>`&#${ba.charCodeAt(0)};`)};n.isExpressionField=X;n.isFeatureSupportedLayer=Z;n.isGraphicForRelatableFeatureSupportedLayer=function(O){return!!O&&"object"===typeof O&&"sourceLayer"in
O&&u(O.sourceLayer)};n.isRelatableFeatureSupportedLayer=u;n.isRelatableLayer=W;n.isRelatedField=Y;n.preLayerQueryCallback=({query:O,layer:ba,method:ia})=>{Ka({layer:ba,method:ia,query:O,definitionExpression:`${ba.definitionExpression} ${ba.serviceDefinitionExpression}`})};n.preRequestCallback=({queryPayload:O,layer:ba,method:ia})=>{Ka({layer:ba,method:ia,query:O,definitionExpression:`${ba.definitionExpression} ${ba.serviceDefinitionExpression}`})};n.querySourceLayer=T;n.queryUpdatedFeature=async function({graphic:O,
popupTemplate:ba,layer:ia,spatialReference:sa},ya){if(ia&&ba&&("function"===typeof ia.load&&await ia.load(ya),O.attributes)){var Fa=O.attributes[ia.objectIdField];if(null!=Fa){Fa=[Fa];var Aa=await ba.getRequiredFields(ia.fieldsIndex),Na=K.featureHasFields(Aa,O);Aa=Na?[]:Aa;ba=ba.returnGeometry||await da(ba);if(!Na||ba)if(ia=await T({layer:ia,graphic:O,outFields:Aa,objectIds:Fa,returnGeometry:ba,spatialReference:sa},ya))ia.geometry&&(O.geometry=ia.geometry),ia.attributes&&(O.attributes={...O.attributes,
...ia.attributes})}}};n.shouldOpenInNewTab=function(O=""){if(O)return!va.test(O.trim().toLowerCase())};n.substituteAttributes=C;n.substituteFieldsInLinksAndAttributes=function({attributes:O,globalAttributes:ba,layer:ia,text:sa,expressionAttributes:ya,fieldInfoMap:Fa}){return sa?C({formattedAttributes:ba,template:L(sa,{...ba,...ya,...O},ia),fieldInfoMap:Fa}):""};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports",
"../../../assets"],function(n,p){n.getIconPath=function(w){const h=p.getAssetUrl("esri/themes/base/images/files/");return w?"text/plain"===w?`${h}text-32.svg`:"application/pdf"===w?`${h}pdf-32.svg`:"text/csv"===w?`${h}csv-32.svg`:"application/gpx+xml"===w?`${h}gpx-32.svg`:"application/x-dwf"===w?`${h}cad-32.svg`:"application/postscript"===w||"application/json"===w||"text/xml"===w||"model/vrml"===w?`${h}code-32.svg`:"application/x-zip-compressed"===w||"application/x-7z-compressed"===w||"application/x-gzip"===
w||"application/x-tar"===w||"application/x-gtar"===w||"application/x-bzip2"===w||"application/gzip"===w||"application/x-compress"===w||"application/x-apple-diskimage"===w||"application/x-rar-compressed"===w||"application/zip"===w?`${h}zip-32.svg`:w.includes("image/")?`${h}image-32.svg`:w.includes("audio/")?`${h}sound-32.svg`:w.includes("video/")?`${h}video-32.svg`:w.includes("msexcel")||w.includes("ms-excel")||w.includes("spreadsheetml")?`${h}excel-32.svg`:w.includes("msword")||w.includes("ms-word")||
w.includes("wordprocessingml")?`${h}word-32.svg`:w.includes("powerpoint")||w.includes("presentationml")?`${h}report-32.svg`:`${h}generic-32.svg`:`${h}generic-32.svg`};n.isSupportedImage=function(w){w=w.toLowerCase();return"image/bmp"===w||"image/emf"===w||"image/exif"===w||"image/gif"===w||"image/x-icon"===w||"image/jpeg"===w||"image/png"===w||"image/tiff"===w||"image/x-wmf"===w};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(n,p,w,h,H,K,F,R){h=function(E){function X(v){v=E.call(this,v)||this;v.description=null;v.title=null;return v}n._inherits(X,E);return n._createClass(X)}(R);p.__decorate([w.property()],h.prototype,"description",void 0);p.__decorate([w.property()],h.prototype,"title",void 0);return h=p.__decorate([F.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],h)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v){h=function(g){function A(D,y){D=g.call(this,D,y)||this;D.description=null;D.headingLevel=2;D.title=null;return D}n._inherits(A,g);var C=A.prototype;C.render=function(){return v.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};C.renderTitle=function(){const {title:D}=this;return D?v.tsx(E.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},D):null};C.renderDescription=function(){const {description:D}=
this;return D?v.tsx("div",{key:"description",class:"esri-feature-element-info__description"},D):null};return n._createClass(A)}(R);p.__decorate([w.property()],h.prototype,"description",void 0);p.__decorate([w.property()],h.prototype,"headingLevel",void 0);p.__decorate([w.property()],h.prototype,"title",void 0);return h=p.__decorate([F.subclass("esri.widgets.Feature.support.FeatureElementInfo")],h)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils",
"./jsxFactory"],function(n,p,w,h){const H={heading:"esri-widget__heading"};n.CSS=H;n.Heading=function({level:K,class:F,...R},E){K=p.clamp(Math.ceil(K),1,6);return h.tsx(`h${K}`,{...R,class:w.classes(H.heading,F),role:"heading","aria-level":String(K)},E)};n.incrementHeadingLevel=function(K,F=1){return p.clamp(Math.ceil(K+F),1,6)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g){h=function(A){function C(y,G){y=A.call(this,y,G)||this;y.viewModel=null;y._addTargetToAnchors=L=>{Array.from(L.querySelectorAll("a")).forEach(x=>{X.shouldOpenInNewTab(x.href)&&!x.hasAttribute("target")&&x.setAttribute("target","_blank")})};return y}n._inherits(C,A);var D=C.prototype;D.renderLoading=function(){return g.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},g.tsx("div",{class:"esri-feature-content__loader"}))};D.renderCreated=function(){const y=
this.viewModel?.created;return y?y instanceof HTMLElement?g.tsx("div",{key:y,bind:y,afterCreate:this._attachToNode}):v.isWidget(y)?g.tsx("div",{key:y},!y.destroyed&&y.render()):g.tsx("div",{key:y,innerHTML:y,afterCreate:this._addTargetToAnchors}):null};D.render=function(){return g.tsx("div",{class:"esri-feature-content"},"loading"===this.viewModel?.state?this.renderLoading():this.renderCreated())};D._attachToNode=function(y){y.appendChild(this)};n._createClass(C,[{key:"creator",get:function(){return this.viewModel?.creator},
set:function(y){this.viewModel&&(this.viewModel.creator=y)}},{key:"graphic",get:function(){return this.viewModel?.graphic},set:function(y){this.viewModel&&(this.viewModel.graphic=y)}}]);return C}(R);p.__decorate([w.property()],h.prototype,"creator",null);p.__decorate([w.property()],h.prototype,"graphic",null);p.__decorate([w.property({type:E})],h.prototype,"viewModel",void 0);return h=p.__decorate([F.subclass("esri.widgets.Feature.FeatureContent")],h)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g){h=function(A){function C(y){var G=A.call(this,y)||this;G._loadingPromise=null;G.created=null;G.creator=null;G.destroyer=null;G.graphic=null;G.handles.add(K.watch(()=>G.creator,L=>{G._destroyContent();G._createContent(L)},K.initial));return G}n._inherits(C,A);var D=C.prototype;D.destroy=function(){this._destroyContent()};D._destroyContent=function(){const {created:y,graphic:G,destroyer:L}=this;y&&G&&(g.graphicCallback(L,{graphic:G}).catch(()=>null),this._set("created",
null))};D._createContent=async function(y){var G=this.graphic;G&&y&&(this._loadingPromise=y=g.graphicCallback(y,{graphic:G}).catch(()=>null),this.notifyChange("state"),G=await y,y===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",G)))};n._createClass(C,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return C}(H.HandleOwnerMixin(h));p.__decorate([F.property({readOnly:!0})],h.prototype,"created",void 0);p.__decorate([F.property()],
h.prototype,"creator",void 0);p.__decorate([F.property()],h.prototype,"destroyer",void 0);p.__decorate([F.property({type:w})],h.prototype,"graphic",void 0);p.__decorate([F.property({readOnly:!0})],h.prototype,"state",null);return h=p.__decorate([v.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],h)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A,C,D){H=function(y){function G(x,Z){x=y.call(this,x,Z)||this;x._contentWidget=null;x.viewModel=new A;return x}n._inherits(G,y);var L=G.prototype;L.initialize=function(){this.addHandles(w.watch(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),w.initial))};L.destroy=function(){this._destroyContentWidget()};L.renderLoading=function(){return D.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},D.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};L.render=function(){const {state:x}=this.viewModel;return D.tsx("div",{class:"esri-feature-expression"},"loading"===x?this.renderLoading():"disabled"===x?null:this._contentWidget?.render())};L._destroyContentWidget=function(){const {_contentWidget:x}=this;x&&(x.viewModel=null,x.destroy());this._contentWidget=null};L._setupExpressionWidget=function(){const {contentElementViewModel:x,contentElement:Z}=this.viewModel,W=Z?.type;this._destroyContentWidget();this._contentWidget=
x?"fields"===W?new v({viewModel:x}):"media"===W?new g({viewModel:x}):"text"===W?new X({viewModel:x}):null:null;this.scheduleRender()};return n._createClass(G)}(E);p.__decorate([h.property({type:A})],H.prototype,"viewModel",void 0);return H=p.__decorate([R.subclass("esri.widgets.Feature.FeatureExpression")],H)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A,C,D){H=function(y){function G(x,Z){x=y.call(this,x,Z)||this;x._featureElementInfo=null;x.viewModel=new X;x.messages=null;x.messagesURIUtils=null;return x}n._inherits(G,y);var L=G.prototype;L.initialize=function(){this._featureElementInfo=new v;this.addHandles(w.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),w.initial))};L.destroy=function(){this._featureElementInfo?.destroy()};L.renderFieldInfo=function(x,Z){var {attributes:W}=
this.viewModel;const u=x.fieldName,t=x.label||u;W=W?null==W[u]?"":W[u]:"";x=!(!x.format||!x.format.dateFormat);W="number"!==typeof W||x?g.autoLink(this.messagesURIUtils,W):this._forceLTR(W);x={["esri-feature-fields__field-data--date"]:x};return D.tsx("tr",{key:`fields-element-info-row-${u}-${Z}`},D.tsx("th",{key:`fields-element-info-row-header-${u}-${Z}`,class:"esri-feature-fields__field-header",innerHTML:t}),D.tsx("td",{key:`fields-element-info-row-data-${u}-${Z}`,class:this.classes("esri-feature-fields__field-data",
x),innerHTML:W}))};L.renderFields=function(){const {formattedFieldInfos:x}=this.viewModel;return x?.length?D.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},D.tsx("tbody",null,x.map((Z,W)=>this.renderFieldInfo(Z,W)))):null};L.render=function(){return D.tsx("div",{class:"esri-feature-fields"},this._featureElementInfo?.render(),this.renderFields())};L._setupFeatureElementInfo=function(){const {description:x,title:Z}=this;this._featureElementInfo?.set({description:x,title:Z})};
L._forceLTR=function(x){return`&lrm;${x}`};n._createClass(G,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(x){this.viewModel.attributes=x}},{key:"description",get:function(){return this.viewModel.description},set:function(x){this.viewModel.description=x}},{key:"expressionInfos",get:function(){return this.viewModel.expressionInfos},set:function(x){this.viewModel.expressionInfos=x}},{key:"fieldInfos",get:function(){return this.viewModel.fieldInfos},set:function(x){this.viewModel.fieldInfos=
x}},{key:"title",get:function(){return this.viewModel.title},set:function(x){this.viewModel.title=x}}]);return G}(E);p.__decorate([h.property()],H.prototype,"attributes",null);p.__decorate([h.property()],H.prototype,"description",null);p.__decorate([h.property()],H.prototype,"expressionInfos",null);p.__decorate([h.property()],H.prototype,"fieldInfos",null);p.__decorate([h.property()],H.prototype,"title",null);p.__decorate([h.property({type:X,nonNullable:!0})],H.prototype,"viewModel",void 0);p.__decorate([h.property(),
C.messageBundle("esri/widgets/Feature/t9n/Feature")],H.prototype,"messages",void 0);p.__decorate([h.property(),C.messageBundle("esri/widgets/support/t9n/uriUtils")],H.prototype,"messagesURIUtils",void 0);return H=p.__decorate([R.subclass("esri.widgets.Feature.FeatureFields")],H)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v){w=function(g){function A(C){C=g.call(this,C)||this;C.attributes=null;C.expressionInfos=null;C.description=null;C.fieldInfos=null;C.title=null;return C}n._inherits(A,g);n._createClass(A,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:C,fieldInfos:D}=this,y=[];D?.forEach(G=>{if(!G.hasOwnProperty("visible")||G.visible)G=G.clone(),G.label=v.getFieldInfoLabel(G,C),y.push(G)});return y}}]);return A}(w);p.__decorate([h.property()],w.prototype,"attributes",
void 0);p.__decorate([h.property({type:[E]})],w.prototype,"expressionInfos",void 0);p.__decorate([h.property()],w.prototype,"description",void 0);p.__decorate([h.property({type:[X]})],w.prototype,"fieldInfos",void 0);p.__decorate([h.property({readOnly:!0})],w.prototype,"formattedFieldInfos",null);p.__decorate([h.property()],w.prototype,"title",void 0);return w=p.__decorate([R.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],w)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(n,p){function w(H){let K=null;h.some(F=>{F.pattern.test(H)&&(K=F);return!!K});return K}const h=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];n.autoLink=function(H,K){if("string"!==typeof K||!K)return K;const F=w(K);if(!F)return K;const R=K.match(F.pattern);
H=p.replace(p.replace(F.label,{messages:H,hierPart:R&&R[2]}),{appName:F.appName});return K.replace(F.pattern,`<a${F.target?` target="${F.target}"`:""} href="$1"${"_blank"===F.target?' rel\x3d"noreferrer"':""}>${H}</a>`)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureMedia":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/a11yUtils ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtilsAm5 ../support/componentsUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils ../../intl/substitute".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A,C,D,y,G,L,x,Z,W,u,t,r){h=function(m){function J(P,T){var da=m.call(this,P,T)||this;da._refreshTimer=null;da._refreshIntervalInfo=null;da._featureElementInfo=null;da._chartRootMap=new WeakMap;da.viewModel=new D;da.messages=null;da._disposeChart=Y=>{da._chartRootMap.get(Y)?.dispose();da._chartRootMap.delete(Y)};da._createChart=async Y=>{const {destroyed:z,viewModel:Q}=p._assertThisInitialized(da);if(!z&&Q&&Y){var {createRoot:ea}=await new Promise((fa,ja)=>n(["../support/chartUtilsAm5"],
fa,ja));ea=await ea(Y);da._chartRootMap.set(Y,ea);da._renderChart({mediaInfo:Q.activeMediaInfo,root:ea})}};return da}p._inherits(J,m);var S=J.prototype;S.initialize=function(){this._featureElementInfo=new y;this.addHandles([F.watch(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),F.initial),F.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),F.initial)])};S.loadDependencies=function(){return x.loadCalciteComponents({icon:()=>
new Promise((P,T)=>n(["../../chunks/calcite-icon"],P,T))})};S.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo?.destroy()};S.render=function(){return u.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())};S.renderMedia=function(){const {formattedMediaInfoCount:P,activeMediaInfoIndex:T}=this.viewModel,da=this.renderMediaText();return P?u.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},
this.renderMediaInfo(),u.tsx("div",{class:"esri-feature-media__item-navigation"},da,u.tsx("div",{class:"esri-feature-media__pagination"},this.renderMediaPageButton("previous"),u.tsx("span",{class:"esri-feature-media__pagination-text"},r.substitute(this.messages.pageText,{index:T+1,total:P})),this.renderMediaPageButton("next")))):null};S.renderMediaText=function(){var {activeMediaInfo:P}=this.viewModel;if(!P)return null;const T=P&&P.title?u.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",
innerHTML:P.title}):null;P=P&&P.caption?u.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:P.caption}):null;return T||P?u.tsx("div",{key:"media-text",class:"esri-feature-media__item-text"},T,P):null};S.renderImageMediaInfo=function(P){var {_refreshIntervalInfo:T}=this;const {activeMediaInfoIndex:da,formattedMediaInfoCount:Y}=this.viewModel,{value:z,refreshInterval:Q,altText:ea,title:fa,type:ja}=P,{sourceURL:na,linkURL:qa}=z;P=G.shouldOpenInNewTab(qa??void 0)?"_blank":
"_self";const ra="_blank"===P?"noreferrer":"";T=Q?T:null;T=u.tsx("img",{alt:ea||fa,key:`media-${ja}-${da}-${Y}-${T?T.timestamp:0}`,src:(T?T.sourceURL:na)??void 0});return(qa?u.tsx("a",{title:fa,href:qa,rel:ra,target:P},T):null)??T};S.renderChartMediaInfo=function(P){const {activeMediaInfoIndex:T,formattedMediaInfoCount:da}=this.viewModel;return u.tsx("div",{key:`media-${P.type}-${T}-${da}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._createChart,afterRemoved:this._disposeChart})};
S.renderMediaInfoType=function(){const {activeMediaInfo:P}=this.viewModel;return P?"image"===P.type?this.renderImageMediaInfo(P):P.type.includes("chart")?this.renderChartMediaInfo(P):null:null};S.renderMediaInfo=function(){const {activeMediaInfo:P}=this.viewModel;return P?u.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},u.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType())):null};S.renderMediaPageButton=function(P){if(2>
this.viewModel.formattedMediaInfoCount)return null;const T=(P="previous"===P)?this.messages.previous:this.messages.next;return u.tsx("button",{type:"button",key:P?"media-previous":"media-next",title:T,"aria-label":T,tabIndex:0,class:"esri-feature-media__pagination-button",bind:this,onclick:P?this._previous:this._next},u.tsx("calcite-icon",{class:"esri-feature-media__pagination-icon",scale:"s",icon:P?"chevron-left":"chevron-right"}))};S._setupFeatureElementInfo=function(){const {description:P,title:T}=
this;this._featureElementInfo?.set({description:P,title:T})};S._next=function(){this.viewModel.next()};S._previous=function(){this.viewModel.previous()};S._getRenderer=function(){if(this.viewModel){var {isAggregate:P,layer:T}=this.viewModel;return P&&T?.featureReduction&&"renderer"in T.featureReduction?T.featureReduction.renderer:T?.renderer}};S._getRendererColors=async function(){const {colorAm5:P}=await new Promise((z,Q)=>n(["./FeatureMedia/chartCommon"],z,Q)),T=new Map,da=this._getRenderer();if(!da)return T;
const Y=await A.getColorsFromRenderer(da);Y.delete("default");if(!Array.from(Y.values()).every(z=>1===z?.length))return T;Array.from(Y.keys()).forEach(z=>{const Q=Y.get(z)?.[0]?.toCss(!0);Q&&T.set(z,P(Q))});return T};S._handleMediaKeyup=function(P){const T=K.eventKey(P);"ArrowLeft"===T&&(P.stopPropagation(),this.viewModel.previous());"ArrowRight"===T&&(P.stopPropagation(),this.viewModel.next())};S._canAnimateChart=function(){return this.viewModel?!!this.viewModel.abilities.chartAnimation&&!H.prefersReducedMotion():
!1};S._getChartAnimationMS=function(){return this._canAnimateChart()?250:0};S._getChartSeriesAnimationMS=function(){return this._canAnimateChart()?500:0};S._renderChart=async function(P){const {root:T,mediaInfo:da}=P,{value:Y,type:z}=da,{ResponsiveThemeAm5:Q,DarkThemeAm5:ea,AnimatedThemeAm5:fa,ColorSetAm5:ja,ThemeAm5:na}=await new Promise((Ba,Da)=>n(["./FeatureMedia/chartCommon"],Ba,Da));var qa=na.new(T);qa.rule("ColorSet").set("colors",L.esriChartColorSet);qa=[Q.new(T),qa];t.isDarkTheme()&&qa.push(ea.new(T));
this._canAnimateChart()&&qa.push(fa.new(T));T.setThemes(qa);const ra=await this._getRendererColors(),xa=ja.new(T,{});qa=Y.series.map((Ba,Da)=>{Da=ra.get(Ba.fieldName)||xa.getIndex(Da);return{category:Ba.tooltip,value:Ba.value,columnSettings:{fill:Da,stroke:Da}}}).filter(Ba=>"pie-chart"===z?null!=Ba.value&&0<Ba.value:!0);"pie-chart"===z?this._createPieChart(P,qa):this._createXYChart(P,qa)};S._getDirection=function(){return Z.isRTL(this.container)?"rtl":"ltr"};S._isInversed=function(){return!!Z.isRTL(this.container)};
S._customizeChartTooltip=async function(P,T="horizontal"){const {colorAm5:da}=await new Promise((Y,z)=>n(["./FeatureMedia/chartCommon"],Y,z));P.setAll({pointerOrientation:T});P.get("background")?.setAll({stroke:da("rgba(50, 50, 50, 1)")});P.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:200})};S._createPieChart=async function(P,T){var {TooltipAm5:da}=await new Promise((ja,na)=>n(["./FeatureMedia/chartCommon"],ja,na));const {PieChartAm5:Y,PieSeriesAm5:z}=await new Promise((ja,
na)=>n(["./FeatureMedia/pieChart"],ja,na)),{mediaInfo:Q,root:ea}=P;var {title:fa}=Q;P=ea.container.children.push(Y.new(ea,{ariaLabel:Q?.altText||Q?.title||"",focusable:!0,paddingBottom:5,paddingTop:5,paddingLeft:5,paddingRight:5}));da=da.new(ea,{labelText:"{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})"});fa=P.series.push(z.new(ea,{name:fa,valueField:"value",categoryField:"category",tooltip:da}));fa.ticks.template.set("forceHidden",!0);fa.labels.template.set("forceHidden",!0);fa.slices.template.states.create("active",
{shiftRadius:5});this._customizeChartTooltip(da);fa.slices.template.setAll({ariaLabel:"{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})",focusable:!0,templateField:"columnSettings"});fa.data.setAll(T);fa.appear(this._getChartSeriesAnimationMS());P.appear(this._getChartAnimationMS());P.root.dom.classList.toggle("esri-feature-media__chart--rendered",!0)};S._getMinSeriesValue=function(P){let T=0;P.forEach(da=>T=Math.min(da.value,T));return T};S._createColumnChart=async function(P,T,
da){const {TooltipAm5:Y,ScrollbarAm5:z}=await new Promise((pa,wa)=>n(["./FeatureMedia/chartCommon"],pa,wa)),{CategoryAxisAm5:Q,AxisRendererXAm5:ea,ValueAxisAm5:fa,AxisRendererYAm5:ja,ColumnSeriesAm5:na}=await new Promise((pa,wa)=>n(["./FeatureMedia/xyChart"],pa,wa)),{mediaInfo:qa,root:ra}=T,{value:xa,title:Ba}=qa;P.setAll({wheelX:"panX",wheelY:"zoomX"});T=P.xAxes.push(Q.new(ra,{renderer:ea.new(ra,{inversed:this._isInversed()}),categoryField:"category"}));T.get("renderer").labels.template.setAll({forceHidden:!0});
var Da=P.yAxes.push(fa.new(ra,{renderer:ja.new(ra,{inside:!1}),min:this._getMinSeriesValue(xa.series)}));Da.get("renderer").labels.template.setAll({direction:this._getDirection()});const va=Y.new(ra,{labelText:"{categoryX}"});Da=P.series.push(na.new(ra,{name:Ba,xAxis:T,yAxis:Da,valueYField:"value",categoryXField:"category",tooltip:va}));this._customizeChartTooltip(va);Da.columns.template.setAll({ariaLabel:"{categoryX}",focusable:!0,templateField:"columnSettings"});15<xa.series.length&&P.set("scrollbarX",
z.new(ra,{orientation:"horizontal"}));T.data.setAll(da);Da.data.setAll(da);Da.appear(this._getChartSeriesAnimationMS());P.appear(this._getChartAnimationMS())};S._createBarChart=async function(P,T,da){const {TooltipAm5:Y,ScrollbarAm5:z}=await new Promise((pa,wa)=>n(["./FeatureMedia/chartCommon"],pa,wa)),{CategoryAxisAm5:Q,AxisRendererXAm5:ea,ValueAxisAm5:fa,AxisRendererYAm5:ja,ColumnSeriesAm5:na}=await new Promise((pa,wa)=>n(["./FeatureMedia/xyChart"],pa,wa)),{mediaInfo:qa,root:ra}=T,{value:xa,title:Ba}=
qa;P.setAll({wheelX:"panY",wheelY:"zoomY"});T=P.yAxes.push(Q.new(ra,{renderer:ja.new(ra,{inversed:!0}),categoryField:"category"}));T.get("renderer").labels.template.setAll({forceHidden:!0});var Da=P.xAxes.push(fa.new(ra,{renderer:ea.new(ra,{inside:!1,inversed:this._isInversed()}),min:this._getMinSeriesValue(xa.series)}));Da.get("renderer").labels.template.setAll({direction:this._getDirection()});const va=Y.new(ra,{labelText:"{categoryY}"});Da=P.series.push(na.new(ra,{name:Ba,xAxis:Da,yAxis:T,valueXField:"value",
categoryYField:"category",tooltip:va}));this._customizeChartTooltip(va,"vertical");Da.columns.template.setAll({ariaLabel:"{categoryY}",focusable:!0,templateField:"columnSettings"});15<xa.series.length&&P.set("scrollbarY",z.new(ra,{orientation:"vertical"}));T.data.setAll(da);Da.data.setAll(da);Da.appear(this._getChartSeriesAnimationMS());P.appear(this._getChartAnimationMS())};S._createLineChart=async function(P,T,da){const {TooltipAm5:Y,ScrollbarAm5:z}=await new Promise((pa,wa)=>n(["./FeatureMedia/chartCommon"],
pa,wa)),{CategoryAxisAm5:Q,AxisRendererXAm5:ea,ValueAxisAm5:fa,AxisRendererYAm5:ja,LineSeriesAm5:na}=await new Promise((pa,wa)=>n(["./FeatureMedia/xyChart"],pa,wa)),{root:qa,mediaInfo:ra}=T,{value:xa,title:Ba}=ra;P.setAll({wheelX:"panX",wheelY:"zoomX"});T=P.xAxes.push(Q.new(qa,{renderer:ea.new(qa,{inversed:this._isInversed()}),categoryField:"category"}));T.get("renderer").labels.template.setAll({forceHidden:!0});var Da=P.yAxes.push(fa.new(qa,{renderer:ja.new(qa,{inside:!1}),min:this._getMinSeriesValue(xa.series)}));
Da.get("renderer").labels.template.setAll({direction:this._getDirection()});const va=Y.new(qa,{labelText:"{categoryX}"});Da=P.series.push(na.new(qa,{name:Ba,xAxis:T,yAxis:Da,valueYField:"value",categoryXField:"category",tooltip:va}));this._customizeChartTooltip(va,"vertical");15<xa.series.length&&P.set("scrollbarX",z.new(qa,{orientation:"horizontal"}));T.data.setAll(da);Da.data.setAll(da);Da.appear(this._getChartSeriesAnimationMS());P.appear(this._getChartAnimationMS())};S._createXYChart=async function(P,
T){const {XYChartAm5:da,XYCursorAm5:Y}=await new Promise((ja,na)=>n(["./FeatureMedia/xyChart"],ja,na)),{root:z,mediaInfo:Q}=P,{type:ea}=Q,fa=z.container.children.push(da.new(z,{ariaLabel:Q?.altText||Q?.title||"",focusable:!0,panX:!0,panY:!0}));fa.set("cursor",Y.new(z,{}));"column-chart"===ea&&await this._createColumnChart(fa,P,T);"bar-chart"===ea&&await this._createBarChart(fa,P,T);"line-chart"===ea&&await this._createLineChart(fa,P,T);fa.root.dom.classList.toggle("esri-feature-media__chart--rendered",
!0)};S._clearMediaRefreshTimer=function(){const {_refreshTimer:P}=this;P&&(clearTimeout(P),this._refreshTimer=null)};S._updateMediaInfoTimestamp=function(P){const T=Date.now();this._refreshIntervalInfo={timestamp:T,sourceURL:P&&this._getImageSource(P,T)}};S._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:P}=this.viewModel;P&&"image"===P.type&&P.refreshInterval&&this._setRefreshTimeout(P)};S._setRefreshTimeout=function(P){const {refreshInterval:T,value:da}=
P;T&&(P=6E4*T,this._updateMediaInfoTimestamp(da.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(da.sourceURL)},P))};S._getImageSource=function(P,T){const da=P.includes("?")?"\x26":"?",[Y,z=""]=P.split("#");return`${Y}${da}timestamp=${T}${z?"#":""}${z}`};p._createClass(J,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(P){this.viewModel.attributes=P}},{key:"activeMediaInfoIndex",get:function(){return this.viewModel.activeMediaInfoIndex},
set:function(P){this.viewModel.activeMediaInfoIndex=P}},{key:"description",get:function(){return this.viewModel.description},set:function(P){this.viewModel.description=P}},{key:"fieldInfoMap",get:function(){return this.viewModel.fieldInfoMap},set:function(P){this.viewModel.fieldInfoMap=P}},{key:"layer",get:function(){return this.viewModel.layer},set:function(P){this.viewModel.layer=P}},{key:"mediaInfos",get:function(){return this.viewModel.mediaInfos},set:function(P){this.viewModel.mediaInfos=P}},
{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},set:function(P){this.viewModel.popupTemplate=P}},{key:"relatedInfos",get:function(){return this.viewModel.relatedInfos},set:function(P){this.viewModel.relatedInfos=P}},{key:"title",get:function(){return this.viewModel.title},set:function(P){this.viewModel.title=P}}]);return J}(C);w.__decorate([R.property()],h.prototype,"_refreshIntervalInfo",void 0);w.__decorate([R.property()],h.prototype,"attributes",null);w.__decorate([R.property()],
h.prototype,"activeMediaInfoIndex",null);w.__decorate([R.property()],h.prototype,"description",null);w.__decorate([R.property()],h.prototype,"fieldInfoMap",null);w.__decorate([R.property()],h.prototype,"layer",null);w.__decorate([R.property()],h.prototype,"mediaInfos",null);w.__decorate([R.property()],h.prototype,"popupTemplate",null);w.__decorate([R.property()],h.prototype,"relatedInfos",null);w.__decorate([R.property()],h.prototype,"title",null);w.__decorate([R.property({type:D})],h.prototype,"viewModel",
void 0);w.__decorate([R.property(),W.messageBundle("esri/widgets/Feature/t9n/Feature")],h.prototype,"messages",void 0);return h=w.__decorate([g.subclass("esri.widgets.Feature.FeatureMedia")],h)})},"esri/core/a11yUtils":function(){define(["exports"],function(n){n.prefersReducedMotion=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/utils":function(){define("exports ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),
function(n,p,w,h,H,K,F,R,E,X){async function v(x,Z,W){h.getOrCreateMapValue(x,Z,()=>[]).push(...W)}async function g(x,Z,W){x=h.getOrCreateMapValue(x,Z,()=>new Map);for(const u of W)x.set(u.value,u.color)}function A(x){let Z=x.minValue,W=x.maxValue;const u=x.isFirstBreak?"":y.gt+" ";x="percent-of-total"===x.normalizationType?y.pct:"";Z=null==Z?"":K.format(Z);W=null==W?"":K.format(W);return u+Z+x+" "+y.ld+" "+W+x}function C(x,Z){return"normalizationField"in x&&x.normalizationField?{type:"normalized-field",
field:x.field,normalizationField:x.normalizationField}:"field"in x&&x.field?{type:"field",field:x.field}:"valueExpression"in x&&x.valueExpression?{type:"expression",expression:x.valueExpression,title:x.valueExpressionTitle,returnType:Z}:null}const D=w.getLogger("esri.renderers.support.utils"),y={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},G={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},L={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",
minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};w=H.convertDateFormatToIntlOptions("short-date");n.calculateDateFormatInterval=function(x){x=x.map(r=>new Date(r));const Z=x.length;let W=Infinity,u=null;for(let r=0;r<Z-1;r++){const m=x[r];let J=Infinity,S=null;for(let P=r+1;P<Z;P++){var t=x[P];t=m.getFullYear()!==t.getFullYear()&&"year"||m.getMonth()!==t.getMonth()&&"month"||m.getDate()!==t.getDate()&&
"day"||m.getHours()!==t.getHours()&&"hour"||m.getMinutes()!==t.getMinutes()&&"minute"||m.getSeconds()!==t.getSeconds()&&"second"||"millisecond";const T=G[t];T<J&&(J=T,S=t)}J<W&&(W=J,u=S)}return u};n.createClassBreakLabel=A;n.createColorStops=function(x){const {values:Z,colors:W,labelIndexes:u,isDate:t,dateFormatOptions:r}=x;return Z.map((m,J)=>{var S=null;if(!u||u.includes(J)){let P;if(P=t?H.formatDate(m,r):K.format(m))S="",0===J?S=y.lt+" ":J===Z.length-1&&(S=y.gt+" "),S+=P}return new F({value:m,
color:W[J],label:S})})};n.createUniqueValueLabel=function(x){const {value:Z,domain:W,fieldInfo:u,dateFormatInterval:t}=x;x=String(Z);const r=W&&"codedValues"in W&&W.codedValues?W.getName(Z):null;r?x=r:"number"===typeof Z&&(x=u&&"date"===u.type?H.formatDate(Z,t&&H.convertDateFormatToIntlOptions(L[t])):K.format(Z));return x};n.getAttribute=C;n.getAttributes=function(x,Z){const W=[];if("class-breaks"===x.type||"heatmap"===x.type)W.push(C(x,"number"));else if("unique-value"===x.type){var u=x.authoringInfo;
if(u&&"relationship"===u.type){if(u.field1&&u.field2){var t=u.field2.field;const r=u.field2.normalizationField;W.push(C({field:u.field1.field,normalizationField:u.field1.normalizationField}));W.push(C({field:t,normalizationField:r}))}}else t=x.uniqueValueInfos?.[0],u=null,t&&t.value&&(t=typeof x.uniqueValueInfos[0].value,"string"===t||"number"===t)&&(u=t),W.push(C(x,u)),[x.field2,x.field3].forEach(r=>r&&W.push({type:"field",field:r}))}else"attributes"in x&&x.attributes?.forEach(r=>W.push(C(r,"number")));
(x=Z?Z(x):"visualVariables"in x?x.visualVariables:null)&&x.forEach(r=>W.push(C(r,"number")));return p.unique(W.filter(p.isSome),(r,m)=>"field"===r.type&&"field"===m.type?r.field===m.field:"normalized-field"===r.type&&"normalized-field"===m.type?r.field===m.field&&r.normalizationField===m.normalizationField:"expression"===r.type&&"expression"===m.type?r.expression===m.expression:!1)};n.getColorsForRendererValues=async function(x){const Z=new Map;if(!x)return Z;if("unique-value"!==x.type||x.authoringInfo?.type)if("class-breaks"===
x.type){var W=x.classBreakInfos.map(r=>({value:r.minValue,color:R.getColorFromSymbol(r.symbol,null)})).reverse();const {field:u,valueExpression:t}=x;await g(Z,u??t,W)}else"simple"===x.type&&await g(Z,"default",[{value:"default",color:R.getColorFromSymbol(x.symbol,null)}]);else{W=(x.uniqueValueInfos??[]).map(P=>({value:P.value,color:R.getColorFromSymbol(P.symbol,null)}));const {field:u,field2:t,field3:r,valueExpression:m,fieldDelimiter:J}=x,S=[u,t,r].filter(Boolean).join(J||"");(S||m)&&await g(Z,S||
m,W)}"defaultSymbol"in x&&x.defaultSymbol&&await g(Z,"default",[{value:"default",color:R.getColorFromSymbol(x.defaultSymbol,null)}]);if("visualVariables"in x&&x.visualVariables){x=x.visualVariables.filter(u=>"color"===u.type);for(const u of x)x=await E.getRampStops(u)??[],await g(Z,u.field||u.valueExpression,x)}return Z};n.getColorsFromRenderer=async function(x){const Z=new Map;if(!x)return Z;if("visualVariables"in x&&x.visualVariables){var W=x.visualVariables.filter(t=>"color"===t.type);for(var u of W)W=
(await E.getRampStops(u)??[]).map(t=>t.color),await v(Z,u.field||u.valueExpression,W)}if("heatmap"===x.type)u=X.getHeatmapRampStops(x).map(t=>t.color),await v(Z,x.field||x.valueExpression,u);else if("pie-chart"===x.type){for(const t of x.attributes)await v(Z,t.field||t.valueExpression,[t.color]);await v(Z,"default",[x?.othersCategory?.color,R.getColorFromSymbol(x.backgroundFillSymbol,null)])}else if("dot-density"===x.type){for(const t of x.attributes)await v(Z,t.field||t.valueExpression,[t.color]);
await v(Z,"default",[x.backgroundColor])}else if("unique-value"===x.type)if("predominance"===x.authoringInfo?.type)for(const t of x.uniqueValueInfos??[])await v(Z,t.value.toString(),[R.getColorFromSymbol(t.symbol,null)]);else{u=(x.uniqueValueInfos??[]).map(S=>R.getColorFromSymbol(S.symbol,null));const {field:t,field2:r,field3:m,valueExpression:J}=x;(t||J)&&await v(Z,t||J,u);r&&await v(Z,r,u);m&&await v(Z,m,u)}else if("class-breaks"===x.type){u=x.classBreakInfos.map(m=>R.getColorFromSymbol(m.symbol,
null));const {field:t,valueExpression:r}=x;await v(Z,t??r,u)}else"simple"===x.type&&await v(Z,"default",[R.getColorFromSymbol(x.symbol,null)]);"defaultSymbol"in x&&x.defaultSymbol&&await v(Z,"default",[R.getColorFromSymbol(x.defaultSymbol,null)]);Z.forEach((t,r)=>{t=p.unique(t.filter(Boolean),(m,J)=>JSON.stringify(m)===JSON.stringify(J));Z.set(r,t)});return Z};n.setLabelsForClassBreaks=function(x){const Z=x.classBreakInfos,W=x.normalizationType;let u=[];if(Z&&Z.length)if("standard-deviation"===x.classificationMethod)D.warn("setLabelsForClassBreaks",
"cannot set labels for class breaks generated using 'standard-deviation' method.");else if(x.round){u.push(Z[0].minValue);for(const t of Z)u.push(t.maxValue);u=K.round(u);Z.forEach((t,r)=>{t.label=A({minValue:0===r?u[0]:u[r],maxValue:u[r+1],isFirstBreak:0===r,normalizationType:W})})}else Z.forEach((t,r)=>{t.label=A({minValue:t.minValue,maxValue:t.maxValue,isFirstBreak:0===r,normalizationType:W})})};n.timelineDateFormatOptions=w;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/numberUtils":function(){define(["exports",
"../../intl","../../intl/number"],function(n,p,w){function h(v,g){return v-g}function H(v,g){let A;A=Number(v.toFixed(g));A<v?v=A+1/10**g:(v=A,A-=1/10**g);A=Number(A.toFixed(g));v=Number(v.toFixed(g));return[A,v]}function K(v,g,A,C,D){v=R(v,g,A,C);g=null==v.next||v.next<=D;return(null==v.previous||v.previous<=D)&&g||v.previous+v.next<=2*D}function F(v){v=String(v);var g=v.match(E);if(g&&g[1])return{integer:g[1].split("").length,fractional:g[3]?g[3].split("").length:0};if(v.toLowerCase().includes("e")&&
(g=v.split("e"),v=g[0],g=g[1],v&&g)){v=Number(v);g=Number(g);const A=0<g;A||(g=Math.abs(g));v=F(v);A?(v.integer+=g,v.fractional=g>v.fractional?0:v.fractional-g):(v.fractional+=g,v.integer=g>v.integer?1:v.integer-g);return v}return{integer:0,fractional:0}}function R(v,g,A,C){const D={previous:null,next:null};if(null!=A){const y=v-A;D.previous=Math.floor(Math.abs(100*(g-A-y)/y))}null!=C&&(v=C-v,D.next=Math.floor(Math.abs(100*(C-g-v)/v)));return D}const E=/^-?(\d+)(\.(\d+))?$/i,X={maximumFractionDigits:20};
n.format=function(v){return w.formatNumber(v,X)};n.numDigits=F;n.percentChange=R;n.round=function(v,g={}){v=v.slice(0);const {tolerance:A=2,strictBounds:C=!1,indexes:D=v.map((G,L)=>L)}=g;D.sort(h);for(g=0;g<D.length;g++){const G=D[g],L=v[G],x=0===G?null:v[G-1],Z=G===v.length-1?null:v[G+1],W=F(L).fractional;if(W){let u=0,t=!1;for(var y=void 0;u<=W&&!t;)y=H(L,u),y=C&&0===g?y[1]:y[0],t=K(L,y,x,Z,A),u++;t&&(v[G]=y)}}return v};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./cimSymbolUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A){function C(m){m=m.symbolLayers;if(!m)return null;let J=null;m.forEach(S=>{"object"===S.type&&S.resource?.href||(J="water"===S.type?S.color:S.material?S.material.color:null)});return J?new w(J):null}function D(m,J){if(null==J||null==m)return m;m=m.toRgba();m[3]*=J;return new w(m)}function y(m,J,S){if(m=m.symbolLayers){var P=T=>{J=J??T??(null!=S?r:null);return D(J,S)};m.forEach(T=>{if("object"!==T.type||!T.resource?.href||J)if("water"===T.type)T.color=P(T.color);
else{const da=P(null!=T.material?T.material.color:null);null==T.material?T.material=new A.Symbol3DMaterial({color:da}):T.material.color=da;null!=S&&"outline"in T&&null!=T.outline&&null!=T.outline.color&&(T.outline.color=D(T.outline.color,S))}})}}async function G(m,J){(m=m.symbolLayers)&&await H.forEach(m,async S=>L(S,J))}async function L(m,J){switch(m.type){case "extrude":m.size="number"===typeof J[2]?J[2]:0;break;case "icon":case "line":case "text":J=x(J);null!=J&&(m.size=J);break;case "path":const S=
W(J,E.ONES,[m.width,void 0,m.height]);m.width=t(J[0],m.width,1,S);m.height=t(J[2],m.height,1,S);break;case "object":await Z(m,J)}}function x(m){for(const J of m)if("number"===typeof J)return J;return null}async function Z(m,J){const {resourceSize:S,symbolSize:P}=await u(m),T=W(J,S,P);m.width=t(J[0],P[0],S[0],T);m.depth=t(J[1],P[1],S[1],T);m.height=t(J[2],P[2],S[2],T)}function W(m,J,S){for(let P=0;3>P;P++){const T=m[P];switch(T){case "symbol-value":return m=S[P],null!=m?m/J[P]:1;case "proportional":break;
default:if(T&&J[P])return T/J[P]}}return 1}async function u(m){var {computeObjectLayerResourceSize:J}=await new Promise((z,Q)=>n(["./symbolLayerUtils"],z,Q));J=await J(m,10);const {width:S,height:P,depth:T}=m;m=[S,T,P];let da=1;for(var Y=0;3>Y;Y++){const z=m[Y];if(null!=z){da=z/J[Y];break}}for(Y=0;3>Y;Y++)null==m[Y]&&(m[Y]=J[Y]*da);return{resourceSize:J,symbolSize:m}}function t(m,J,S,P){switch(m){case "proportional":return S*P;case "symbol-value":return null!=J?J:S;default:return m}}const r=new w("white");
p.applyColorToSymbol=function(m,J,S){if(m&&(J||null!=S))if(J&&(J=new w(J)),h.isSymbol3D(m))y(m,J,S);else if(h.isSymbol2D(m)){if(J=J??m.color)m.color=D(J,S);null!=S&&"outline"in m&&m.outline&&m.outline.color&&(m.outline.color=D(m.outline.color,S))}};p.applyOpacityToColor=D;p.applyRotationToSymbol=function(m,J,S){m&&null!=J&&(h.isSymbol3D(m)?(m=m.symbolLayers)&&m.forEach(P=>{if(P&&"object"===P.type)switch(S){case "tilt":P.tilt=J;break;case "roll":P.roll=J;break;default:P.heading=J}}):!h.isSymbol2D(m)||
"simple-marker"!==m.type&&"picture-marker"!==m.type&&"text"!==m.type||(m.angle=J))};p.applySizesToSymbol=async function(m,J){if(m&&J){if(h.isSymbol3D(m))return G(m,J);if(h.isSymbol2D(m)&&(J=x(J),null!=J))switch(m.type){case "simple-marker":m.size=J;break;case "picture-marker":const S=m.width/m.height;1<S?(m.width=J,m.height=J*S):(m.width=J*S,m.height=J);break;case "simple-line":m.width=J;break;case "text":m.font.size=J}}};p.fetchWebStyleSymbol=async function(m,J){const S=await m.fetchSymbol(J);return S?
S:m.fetchCIMSymbol(J)};p.getCSSFilterFromEffectList=function(m){if(!m)return null;m=m.effects.filter(J=>"bloom"!==J.type).map(J=>J.toJSON());return X.effectFunctionsFromJSON(m)};p.getColorFromSymbol=function(m,J){if(!m)return null;let S=null;h.isSymbol3D(m)?S=C(m):h.isSymbol2D(m)&&(S="cim"===m.type?v.getCIMSymbolColor(m):m.color?new w(m.color):null);return S?D(S,J):null};p.getIconHref=function(m){return F.unwrapOrThrow(m.resource).href};p.getSymbolOutlineSize=function(m){return m?h.isSymbol3D(m)?
(m=(m=m.symbolLayers?.at(-1))&&"outline"in m?m?.outline?.size:void 0,null!=m?m:0):R.px2pt(g.getStroke(m)?.width):0};p.isVolumetricSymbol=function(m){if(null==m||!("symbolLayers"in m)||null==m.symbolLayers)return!1;switch(m.type){case "point-3d":return m.symbolLayers.some(J=>"object"===J.type);case "line-3d":return m.symbolLayers.some(J=>"path"===J.type);case "polygon-3d":return m.symbolLayers.some(J=>"object"===J.type||"extrude"===J.type);default:return!1}};p.symbolHasExtrudeSymbolLayer=function(m){return null!=
m&&"polygon-3d"===m.type&&m.symbolLayers.some(J=>"extrude"===J.type)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(n,p,w){function h(g){g=w.toCIMSymbolJSON(g);if("CIMTextSymbol"===g?.type)return g.height??0;let A=0;if(g?.symbolLayers)for(const C of g.symbolLayers)w.isCIMMarker(C)&&null!=C.size&&C.size>A?A=C.size:w.isCIMStroke(C)&&null!=C.width&&C.width>A?A=C.width:w.isCIMFill(C);
return A}function H(g,A,C,D){if(g)if("CIMTextSymbol"===g.type)null!=g.height&&(g.height*=A);else{if(C&&g.effects)for(const y of g.effects)R(y,A);if(g.symbolLayers)for(const y of g.symbolLayers)switch(y.type){case "CIMPictureMarker":case "CIMVectorMarker":K(y,A,D);break;case "CIMPictureStroke":case "CIMSolidStroke":!D?.preserveOutlineWidth&&y.width&&(y.width*=A);break;case "CIMPictureFill":y.height&&(y.height*=A);y.offsetX&&(y.offsetX*=A);y.offsetY&&(y.offsetY*=A);break;case "CIMHatchFill":H(y.lineSymbol,
A,!0,{...D,preserveOutlineWidth:!1}),y.offsetX&&(y.offsetX*=A),y.offsetY&&(y.offsetY*=A),y.separation&&(y.separation*=A)}}}function K(g,A,C){if(g&&(g.markerPlacement&&F(g.markerPlacement,A),g.offsetX&&(g.offsetX*=A),g.offsetY&&(g.offsetY*=A),g.anchorPoint&&"Absolute"===g.anchorPointUnits&&(g.anchorPoint={x:g.anchorPoint.x*A,y:g.anchorPoint.y*A}),g.size=null!=g.size?g.size*A:0,"CIMVectorMarker"===g.type&&g.markerGraphics))for(const D of g.markerGraphics)g.scaleSymbolsProportionally||H(D.symbol,A,!0,
C)}function F(g,A){w.isCIMMarkerStrokePlacement(g)&&g.offset&&(g.offset*=A);switch(g.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":g.customEndingOffset&&(g.customEndingOffset*=A);g.offsetAlongLine&&(g.offsetAlongLine*=A);if(g.placementTemplate&&g.placementTemplate.length){var C=g.placementTemplate.map(D=>D*A);g.placementTemplate=C}break;case "CIMMarkerPlacementAlongLineVariableSize":g.maxRandomOffset&&(g.maxRandomOffset*=A);g.placementTemplate&&g.placementTemplate.length&&
(C=g.placementTemplate.map(D=>D*A),g.placementTemplate=C);break;case "CIMMarkerPlacementOnLine":g.startPointOffset&&(g.startPointOffset*=A);break;case "CIMMarkerPlacementAtExtremities":g.offsetAlongLine&&(g.offsetAlongLine*=A);break;case "CIMMarkerPlacementAtRatioPositions":g.beginPosition&&(g.beginPosition*=A);g.endPosition&&(g.endPosition*=A);break;case "CIMMarkerPlacementPolygonCenter":g.offsetX&&(g.offsetX*=A);g.offsetY&&(g.offsetY*=A);break;case "CIMMarkerPlacementInsidePolygon":g.offsetX&&(g.offsetX*=
A),g.offsetY&&(g.offsetY*=A),g.stepX&&(g.stepX*=A),g.stepY&&(g.stepY*=A)}}function R(g,A){switch(g.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":g.width&&(g.width*=A);break;case "CIMGeometricEffectBuffer":g.size&&(g.size*=A);break;case "CIMGeometricEffectCut":g.beginCut&&(g.beginCut*=A);g.endCut&&(g.endCut*=A);g.middleCut&&(g.middleCut*=A);break;case "CIMGeometricEffectDashes":g.customEndingOffset&&(g.customEndingOffset*=A);g.offsetAlongLine&&(g.offsetAlongLine*=A);if(g.dashTemplate&&
g.dashTemplate.length){const C=g.dashTemplate.map(D=>D*A);g.dashTemplate=C}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":g.length&&(g.length*=A);break;case "CIMGeometricEffectMove":g.offsetX&&(g.offsetX*=A);g.offsetY&&(g.offsetY*=A);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":g.offset&&(g.offset*=A);break;case "CIMGeometricEffectRegularPolygon":g.radius&&(g.radius*=A);break;case "CIMGeometricEffectTaperedPolygon":g.fromWidth&&
(g.fromWidth*=A);g.length&&(g.length*=A);g.toWidth&&(g.toWidth*=A);break;case "CIMGeometricEffectWave":g.amplitude&&(g.amplitude*=A),g.period&&(g.period*=A)}}function E(g,A){if(g){var C="CIMTextSymbol"===g.type?g.symbol:g;g="CIMPolygonSymbol"===g.type;if(C?.symbolLayers)for(const D of C.symbolLayers)if(!(D.colorLocked||g&&(w.isCIMStroke(D)||w.isCIMMarker(D)&&D.markerPlacement&&w.isCIMMarkerStrokePlacement(D.markerPlacement))))switch(D.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":D.tintColor&&
X(A,D.tintColor);break;case "CIMVectorMarker":D.markerGraphics?.forEach(y=>{E(y.symbol,A)});break;case "CIMSolidStroke":case "CIMSolidFill":X(A,D.color);break;case "CIMHatchFill":E(D.lineSymbol,A)}}}function X(g,A){for(const C of g)if(C.join(".")===A.join("."))return;g.push(A)}function v(g,A,C){if(g){var D="CIMTextSymbol"===g.type?g.symbol:g;g="CIMPolygonSymbol"===D?.type;if(D?.symbolLayers)for(const y of D.symbolLayers)if(!y.colorLocked){if(g)if(C){if({layersToColor:D}=C,(w.isCIMStroke(y)||w.isCIMMarker(y)&&
y.markerPlacement&&w.isCIMMarkerStrokePlacement(y.markerPlacement))&&"fill"===D||w.isCIMFill(y)&&"outline"===D)continue}else if(w.isCIMStroke(y)||w.isCIMMarker(y)&&y.markerPlacement&&w.isCIMMarkerStrokePlacement(y.markerPlacement))continue;D=A.toArray();switch(y.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":y.tintColor=D;break;case "CIMVectorMarker":y.markerGraphics?.forEach(G=>{v(G.symbol,A,C)});break;case "CIMSolidStroke":case "CIMSolidFill":y.color=D;break;case "CIMHatchFill":v(y.lineSymbol,
A,C)}}}}n.applyCIMSymbolColor=function(g,A,C){A instanceof p||(A=new p(A));(g=w.toCIMSymbolJSON(g))&&v(g,A,C)};n.applyCIMSymbolRotation=function(g,A,C=!1){g=w.toCIMSymbolJSON(g);C&&0!==A&&(A=360-A);if("CIMTextSymbol"===g?.type)g.angle=A;else if("CIMPointSymbol"===g?.type&&g.symbolLayers){C=A-(g.angle||0);for(const D of g.symbolLayers)if(w.isCIMMarker(D)){let y=D.rotation||0;y=D.rotateClockwise?y-C:y+C;D.rotation=y}g.angle=A}};n.getCIMSymbolColor=function(g){g=w.toCIMSymbolJSON(g);const A=[];E(g,A);
return A.length?new p(w.fromCIMColor(A[0])):null};n.getCIMSymbolRotation=function(g,A=!1){g=w.toCIMSymbolJSON(g);return"CIMTextSymbol"===g?.type||"CIMPointSymbol"===g?.type?(g=g.angle,null!=g&&0!==g&&A?360-g:g??0):0};n.getCIMSymbolSize=h;n.getCIMSymbolType=function(g){g=w.toCIMSymbolJSON(g);if(!g)return null;switch(g.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";
case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};n.scaleCIMMarker=K;n.scaleCIMSymbol=H;n.scaleCIMSymbolTo=function(g,A,C){if(g){var D=w.toCIMSymbolJSON(g);g=h(g);if(0===g){if(D)if("CIMTextSymbol"===D.type)D.height=A;else if(D.symbolLayers)for(const y of D.symbolLayers)switch(y.type){case "CIMPictureMarker":case "CIMVectorMarker":y.size=A;break;case "CIMPictureStroke":case "CIMSolidStroke":y.width=A}}else H(D,A/g,!1,C)}};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},
"esri/symbols/cim/utils":function(){define(["require","exports"],function(n,p){function w(g){return"function"===typeof g}function h(g){let A=g.length;for(;A--;)if(!" /-,\n".includes(g.charAt(A)))return!1;return!0}function H(g,A){const C=[];var D=0;let y=-1;do y=g.indexOf("[",D),y>=D&&(y>D&&(D=g.substr(D,y-D),C.push([D,null,h(D)])),D=y+1,y=g.indexOf("]",D),y>=D&&(y>D&&(D=g.substr(D,y-D),(D=A[D])&&C.push([null,D,!1])),D=y+1));while(-1!==y);D<g.length-1&&(g=g.substr(D),C.push([g,null,h(g)]));return C}
function K(g,A,C){let D="",y=null;for(const G of A){const [L,x,Z]=G;if(L)Z?y=L:(y&&(D+=y,y=null),D+=L);else if(A=g.attributes[x])y&&(D+=y,y=null),D+=A}return F(D,C)}function F(g,A){"string"!==typeof g&&(g=String(g));switch(A){case "LowerCase":return g.toLowerCase();case "Allcaps":return g.toUpperCase();default:return g}}function R(g){return g?{r:g[0],g:g[1],b:g[2],a:g[3]/255}:{r:0,g:0,b:0,a:0}}function E(g){if(!g)return null;switch(g.type){case "CIMPolygonSymbol":if(g.symbolLayers)for(const A of g.symbolLayers)if(g=
E(A),null!=g)return g;break;case "CIMTextSymbol":return E(g.symbol);case "CIMSolidFill":return g.color}}function X(g){if(g)switch(g.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(g=g.symbolLayers)for(const A of g)if(g=X(A),null!=g)return g;break;case "CIMTextSymbol":return X(g.symbol);case "CIMSolidStroke":return g.color}}function v(g){if(g)switch(g.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(g.symbolLayers)for(const A of g.symbolLayers)if(g=v(A),void 0!==g)return g;break;case "CIMTextSymbol":return v(g.symbol);
case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return g.width}}p.adjustTextCase=F;p.analyzeTextParts=H;p.assignTextValuesFromFeature=K;p.attributesToFields=function(g){return(g?Object.keys(g):[]).map(A=>({name:A,alias:A,type:"string"===typeof g[A]?"esriFieldTypeString":"esriFieldTypeDouble"}))};p.colorToArray=function(g){return[g.r,g.g,g.b,g.a]};p.createLabelOverrideFunction=function(g,A,C){const D=H(A,g);return y=>K(y,D,C)};p.evaluateValueOrFunction=function(g,A,C,D){return w(g)?
g(A,C,D):g};p.fromCIMColor=R;p.fromCIMFontDecoration=function(g){return g.underline?"underline":g.strikethrough?"line-through":"none"};p.fromCIMFontStyle=function(g){let A="normal",C="normal";g&&(g=g.toLowerCase(),g.includes("italic")?A="italic":g.includes("oblique")&&(A="oblique"),g.includes("bold")?C="bold":g.includes("light")&&(C="lighter"));return{style:A,weight:C}};p.fromCIMHorizontalAlignment=function(g){switch(g){default:return"left";case "Right":return"right";case "Center":return"center";
case "Justify":return"center"}};p.fromCIMVerticalAlignment=function(g){switch(g){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}};p.getFillColor=E;p.getFontStyle=function(g){if(!g)return"normal";switch(g.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};p.getFontWeight=function(g){if(!g)return"normal";switch(g.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";
default:return"normal"}};p.getStrokeColor=X;p.getStrokeWidth=v;p.getTintColor=g=>g.tintColor?R(g.tintColor):{r:255,g:255,b:255,a:1};p.getValue=(g,A=0)=>null==g||isNaN(g)?A:g;p.importGeometryEngine=function(){return new Promise((g,A)=>n(["../../geometry/geometryEngineJSON"],g,A))};p.isCIMFill=function(g){return null!=g&&("CIMGradientFill"===g.type||"CIMHatchFill"===g.type||"CIMPictureFill"===g.type||"CIMSolidFill"===g.type||"CIMWaterFill"===g.type)};p.isCIMMarker=function(g){return"CIMVectorMarker"===
g.type||"CIMPictureMarker"===g.type||"CIMBarChartMarker"===g.type||"CIMCharacterMarker"===g.type||"CIMPieChartMarker"===g.type||"CIMStackedBarChartMarker"===g.type};p.isCIMMarkerStrokePlacement=function(g){return null!=g&&("CIMMarkerPlacementAlongLineRandomSize"===g.type||"CIMMarkerPlacementAlongLineSameSize"===g.type||"CIMMarkerPlacementAlongLineVariableSize"===g.type||"CIMMarkerPlacementAtExtremities"===g.type||"CIMMarkerPlacementAtMeasuredUnits"===g.type||"CIMMarkerPlacementAtRatioPositions"===
g.type||"CIMMarkerPlacementOnLine"===g.type||"CIMMarkerPlacementOnVertices"===g.type)};p.isCIMStroke=function(g){return"CIMGradientStroke"===g.type||"CIMPictureStroke"===g.type||"CIMSolidStroke"===g.type};p.isFeatureValueFn=w;p.isGeometryEngineRequired=g=>{if(!g)return!1;for(const A of g)switch(A.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":case "CIMGeometricEffectDonut":return!0}return!1};p.isSVGImage=g=>g.includes("data:image/svg+xml");p.mapCIMSymbolToGeometryType=function(g){if(!g)return null;
switch(g.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}};p.resampleHermite=function(g,A,C,D,y,G,L=!0){const x=A/y;C/=G;const Z=Math.ceil(x/2),W=Math.ceil(C/2);for(let r=0;r<G;r++)for(let m=0;m<y;m++){const J=4*(m+(L?G-r-1:r)*y);var u=0;let S=0,P=0,T=0,da=0,Y=0,z=0;const Q=(r+.5)*C;for(let ea=Math.floor(r*C);ea<(r+1)*C;ea++){var t=Math.abs(Q-(ea+.5))/
W;const fa=(m+.5)*x;t*=t;for(let ja=Math.floor(m*x);ja<(m+1)*x;ja++){let na=Math.abs(fa-(ja+.5))/Z;u=Math.sqrt(t+na*na);-1<=u&&1>=u&&(u=2*u*u*u-3*u*u+1,0<u&&(na=4*(ja+ea*A),z+=u*g[na+3],P+=u,255>g[na+3]&&(u=u*g[na+3]/250),T+=u*g[na],da+=u*g[na+1],Y+=u*g[na+2],S+=u))}}D[J]=T/S;D[J+1]=da/S;D[J+2]=Y/S;D[J+3]=z/P}};p.toCIMSymbolJSON=function(g){return g.data?.symbol??null};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/LRUCache ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(n,p,w,h,H,K,F){function R(v){if(!v)return null;let g=null;switch(v.type){case "simple-fill":case "picture-fill":case "simple-marker":g=R(v.outline);break;case "simple-line":const A=K.pt2px(v.width);null!=v.style&&"none"!==v.style&&0!==A&&(g={color:v.color,style:X(v.style),width:A,cap:v.cap,join:"miter"===v.join?K.pt2px(v.miterLimit):v.join});break;default:g=null}return g}const E=new H.LRUCache(1E3),X=(()=>{const v={};return g=>{if(v[g])return v[g];const A=g.replaceAll("-","");return v[g]=
A}})();w=new w([128,128,128]);n.defaultThematicColor=w;n.dekebabifyLineStyle=X;n.getFill=function(v){const g=v.style;let A=null;if(v)switch(v.type){case "simple-marker":"cross"!==g&&"x"!==g&&(A=v.color);break;case "simple-fill":"solid"===g?A=v.color:"none"!==g&&(A={type:"pattern",x:0,y:0,src:p.getAssetUrl(`esri/symbols/patterns/${g}.png`),width:5,height:5});break;case "picture-fill":A={type:"pattern",src:v.url,width:K.pt2px(v.width)*v.xscale,height:K.pt2px(v.height)*v.yscale,x:K.pt2px(v.xoffset),
y:K.pt2px(v.yoffset)};break;case "text":A=v.color;break;case "cim":A=F.getCIMSymbolColor(v)}return A};n.getPatternUrlWithColor=function(v,g){const A=v+"-"+g;return void 0!==E.get(A)?Promise.resolve(E.get(A)):h(v,{responseType:"image"}).then(C=>{C=C.data;const D=C.naturalWidth,y=C.naturalHeight,G=document.createElement("canvas");G.width=D;G.height=y;const L=G.getContext("2d");L.fillStyle=g;L.fillRect(0,0,D,y);L.globalCompositeOperation="destination-in";L.drawImage(C,0,0);C=G.toDataURL();E.put(A,C);
return C})};n.getStroke=R;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../Color","./utils"],function(n,p,w,h){function H(X,v){const g=[],A=X.length-1;5===X.length?g.push(0,2,4):g.push(0,A);return X.map((C,D)=>g.includes(D)?h.createStopLabel(C,D,A,v):null)}async function K(X,v,g){g=new w(g??E);X=(await new Promise((A,C)=>n(["../../../renderers/visualVariables/support/visualVariableUtils"],
A,C))).getOpacity(v,X);null!=X&&(g.a=X);return g}function F(X,v){const {startIndex:g,endIndex:A,weight:C}=R(X,v);if(g===A)return v[g].color;X=w.blendColors(v[g].color,v[A].color,C);return new w(X)}function R(X,v){let g=0,A=v.length-1;v.some((C,D)=>{if(X<C.value)return A=D,!0;g=D;return!1});return{startIndex:g,endIndex:A,weight:(X-v[g].value)/(v[A].value-v[g].value)}}const E=new w([64,64,64]);p.getColorFromPointCloudStops=F;p.getRampStops=async function(X,v,g){let A=!1,C=[],D=[];if(X.stops){var y=
X.stops;C=y.map(L=>L.value);(A=y.some(L=>!!L.label))&&(D=y.map(L=>L.label))}y=C[C.length-1];if(null==C[0]&&null==y)return null;const G=A?null:H(C,g??!1);return(await Promise.all(C.map(async(L,x)=>{const Z="opacity"===X.type?await K(L,X,v):(await new Promise((W,u)=>n(["../../../renderers/visualVariables/support/visualVariableUtils"],W,u))).getColor(X,L);return{value:L,color:Z,label:A?D[x]:G?.[x]??""}}))).reverse()};p.getRampStopsForPointCloud=function(X){let v=!1,g=[],A=[];g=X.map(y=>y.value);(v=X.some(y=>
!!y.label))&&(A=X.map(y=>y.label??""));const C=g[g.length-1];if(null==g[0]&&null==C)return null;const D=v?null:H(g,!1);return g.map((y,G)=>{const L=F(y,X);return{value:y,color:L,label:v?A[G]:D?.[G]??""}}).reverse()};p.getStrectchRampStops=function(X,v){let g=[];if(X&&"multipart"===X.type)X.colorRamps.reverse().forEach((A,C)=>{0===C?g.push({value:v.max,color:new w(A.toColor),label:"high"}):g.push({value:null,color:new w(A.toColor),label:""});C===X.colorRamps.length-1?g.push({value:v.min,color:new w(A.fromColor),
label:"low"}):g.push({value:null,color:new w(A.fromColor),label:""})});else{let A,C;X&&"algorithmic"===X.type?(A=X.fromColor,C=X.toColor):(A=[0,0,0,1],C=[255,255,255,1]);g=[{value:v.max,color:new w(C),label:"high"},{value:v.min,color:new w(A),label:"low"}]}return g};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),
function(n,p,w,h,H,K){async function F(E){if(!("visualVariables"in E&&E.visualVariables))return null;E=E.visualVariables.find(g=>"color"===g.type);if(!E)return null;var X=null,v=null;if(E.stops){if(1===E.stops.length)return E.stops[0].color;X=E.stops[0].value;v=E.stops[E.stops.length-1].value}X=null!=X&&null!=v?X+(v-X)/2:0;({getColor:v}=await new Promise((g,A)=>n(["../../../renderers/visualVariables/support/visualVariableUtils"],g,A)));return v(E,X)??null}const R=h.convertDateFormatToIntlOptions("short-date");
p.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];
p.SPECIAL_CHARS_GREATER_THAN="\x3e";p.SPECIAL_CHARS_LESS_THAN="\x3c";p.createStopLabel=function(E,X,v,g){let A="";0===X?A="\x3c ":X===v&&(A="\x3e ");X=null;X=g?h.formatDate(E,R):H.format(E);return A+X};p.getMedianColor=F;p.getSymbolForFlowRenderer=async function(E,X){const v=E.trailCap,g=E.trailWidth||1;E=X||await F(E)||E.color;return new K({cap:v,color:E,width:g})};p.isRasterBandStatistics=function(E){return null!=E&&"object"===typeof E&&"min"in E&&"max"in E};Object.defineProperty(p,Symbol.toStringTag,
{value:"Module"})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(n,p){n.getHeatmapRampStops=function(w){if(!w.colorStops)return[];const h=[...w.colorStops].filter(K=>0<K.color?.a);let H=h.length-1;if(h&&h[0]){const K=h[H];K&&1!==K.ratio&&(h.push(new p({ratio:1,color:K.color})),H++)}return h.map((K,F)=>{let R="";0===F?R=w.legendOptions?.minLabel||"low":F===H&&(R=w.legendOptions?.maxLabel||"high");return{color:K.color,
label:R,ratio:K.ratio}}).reverse()};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/arrayUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g){const A={chartAnimation:!0};w=function(C){function D(G){G=C.call(this,G)||this;G.abilities={...A};G.activeMediaInfoIndex=0;G.attributes=null;G.description=null;G.fieldInfoMap=null;G.formattedAttributes=null;G.expressionAttributes=null;G.isAggregate=!1;G.layer=null;G.mediaInfos=null;G.popupTemplate=null;G.relatedInfos=null;G.title=null;return G}n._inherits(D,C);var y=D.prototype;y.castAbilities=function(G){return{...A,...G}};y.setActiveMedia=function(G){this._setContentElementMedia(G)};
y.next=function(){this._pageContentElementMedia(1)};y.previous=function(){this._pageContentElementMedia(-1)};y._setContentElementMedia=function(G){const {formattedMediaInfoCount:L}=this;this.activeMediaInfoIndex=(G+L)%L};y._pageContentElementMedia=function(G){const {activeMediaInfoIndex:L}=this;this._setContentElementMedia(L+G)};y._formatMediaInfos=function(){const {mediaInfos:G,layer:L}=this,x=this.attributes??{},Z=this.formattedAttributes??{},W=this.expressionAttributes??{},u=this.fieldInfoMap??
new Map;return G?.map(t=>{t=t?.clone();if(!t)return null;t.title=v.substituteFieldsInLinksAndAttributes({attributes:x,fieldInfoMap:u,globalAttributes:Z,expressionAttributes:W,layer:L,text:t.title});t.caption=v.substituteFieldsInLinksAndAttributes({attributes:x,fieldInfoMap:u,globalAttributes:Z,expressionAttributes:W,layer:L,text:t.caption});t.altText=v.substituteFieldsInLinksAndAttributes({attributes:x,fieldInfoMap:u,globalAttributes:Z,expressionAttributes:W,layer:L,text:t.altText});if("image"===
t.type){var {value:r}=t;this._setImageValue({value:r,formattedAttributes:Z,layer:L});return t.value.sourceURL?t:void 0}return"pie-chart"===t.type||"line-chart"===t.type||"column-chart"===t.type||"bar-chart"===t.type?({value:r}=t,this._setChartValue({value:r,chartType:t.type,attributes:x,formattedAttributes:Z,layer:L,expressionAttributes:W}),t):null}).filter(h.isSome)??[]};y._setImageValue=function(G){const L=this.fieldInfoMap??new Map,{value:x,formattedAttributes:Z,layer:W}=G,{linkURL:u,sourceURL:t}=
x;t&&(G=v.fixTokens(t,W),x.sourceURL=v.substituteAttributes({formattedAttributes:Z,template:G,fieldInfoMap:L}));u&&(G=v.fixTokens(u,W),x.linkURL=v.substituteAttributes({formattedAttributes:Z,template:G,fieldInfoMap:L}))};y._setChartValue=function(G){const {value:L,attributes:x,formattedAttributes:Z,chartType:W,layer:u,expressionAttributes:t}=G,{popupTemplate:r,relatedInfos:m}=this,{fields:J,normalizeField:S}=L;L.fields=v.getFixedFieldNames(J,u);S&&(L.normalizeField=v.getFixedFieldName(S,u));if(J.some(T=>
!!(null!=Z[T]||v.isRelatedField(T)&&m?.size))){var P=r?.fieldInfos??[];J.forEach(T=>{v.isRelatedField(T)?L.series=[...L.series,...this._getRelatedChartInfos({fieldInfos:P,fieldName:T,formattedAttributes:Z,chartType:W,value:L})]:(T=this._getChartOption({value:L,attributes:x,chartType:W,formattedAttributes:Z,expressionAttributes:t,fieldName:T,fieldInfos:P}),L.series.push(T))})}};y._getRelatedChartInfos=function(G){const {fieldInfos:L,fieldName:x,formattedAttributes:Z,chartType:W,value:u}=G,t=[],r=g.getRelatedFieldInfo(x);
G=r&&this.relatedInfos?.get(r.layerId.toString());if(!G)return t;const {relatedFeatures:m,relation:J}=G;if(!J||!m)return t;({cardinality:G}=J);m.forEach(S=>{const {attributes:P}=S;P&&Object.keys(P).forEach(T=>{T===r.fieldName&&t.push(this._getChartOption({value:u,attributes:P,formattedAttributes:Z,fieldName:x,chartType:W,relatedFieldName:T,hasMultipleRelatedFeatures:1<m?.length,fieldInfos:L}))})});return"one-to-many"===G||"many-to-many"===G?t:[t[0]]};y._getTooltip=function({label:G,value:L,chartType:x}){return"pie-chart"===
x?`${G}`:`${G}: ${L}`};y._getChartOption=function(G){const {value:L,attributes:x,formattedAttributes:Z,expressionAttributes:W,fieldName:u,relatedFieldName:t,fieldInfos:r,chartType:m,hasMultipleRelatedFeatures:J}=G;var S=this.layer,P=this.fieldInfoMap??new Map;const {normalizeField:T,tooltipField:da}=L;G=T?v.isRelatedField(T)?x[g.getRelatedFieldInfo(T).fieldName]:x[T]:null;var Y=v.isExpressionField(u)&&W&&void 0!==W[u]?W[u]:t&&void 0!==x[t]?x[t]:void 0!==x[u]?x[u]:Z[u];G=new X({fieldName:u,value:void 0===
Y?null:Y&&G?Y/G:Y});if(v.isRelatedField(u))return S=P.get(u.toLowerCase()),Y=da&&P.get(da.toLowerCase()),P=S?.fieldName??u,Y=J&&da?g.getRelatedFieldInfo(da).fieldName:Y?.fieldName??da,G.tooltip=this._getTooltip({label:J&&Y?x[Y]:Z[Y]??S?.label??S?.fieldName??t,value:J&&t?x[t]:Z[P],chartType:m}),G;P=v.getFieldInfo(r,u);S=v.getFixedFieldName(u,S);P=da&&void 0!==Z[da]?Z[da]:v.getFieldInfoLabel(P||new E({fieldName:S}),this.popupTemplate?.expressionInfos);G.tooltip=this._getTooltip({label:P,value:Z[S],
chartType:m});return G};n._createClass(D,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return D}(w);p.__decorate([H.property()],w.prototype,"abilities",void 0);p.__decorate([K.cast("abilities")],w.prototype,"castAbilities",null);p.__decorate([H.property()],w.prototype,"activeMediaInfoIndex",
void 0);p.__decorate([H.property({readOnly:!0})],w.prototype,"activeMediaInfo",null);p.__decorate([H.property()],w.prototype,"attributes",void 0);p.__decorate([H.property()],w.prototype,"description",void 0);p.__decorate([H.property()],w.prototype,"fieldInfoMap",void 0);p.__decorate([H.property()],w.prototype,"formattedAttributes",void 0);p.__decorate([H.property()],w.prototype,"expressionAttributes",void 0);p.__decorate([H.property({readOnly:!0})],w.prototype,"formattedMediaInfos",null);p.__decorate([H.property()],
w.prototype,"isAggregate",void 0);p.__decorate([H.property()],w.prototype,"layer",void 0);p.__decorate([H.property({readOnly:!0})],w.prototype,"formattedMediaInfoCount",null);p.__decorate([H.property()],w.prototype,"mediaInfos",void 0);p.__decorate([H.property()],w.prototype,"popupTemplate",void 0);p.__decorate([H.property()],w.prototype,"relatedInfos",void 0);p.__decorate([H.property()],w.prototype,"title",void 0);return w=p.__decorate([R.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],
w)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../config ../../../kernel ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A,C,D,y,G,L,x,Z,W,u,t,r,m,J,S,P,T,da,Y,z,Q){function ea(va,pa){if(!pa.relationships)return null;let wa=null;({relationships:pa}=pa);pa.some(Ka=>Ka.id===parseInt(va,10)?(wa=Ka,!0):!1);return wa}function fa({originRelationship:va,relationships:pa,layerId:wa}){let Ka=null;pa&&pa.some(O=>{`${O.relatedTableId}`===wa&&O.id===va?.id&&(Ka=O);return!!Ka});return Ka}function ja(va,pa){pa=pa.toLowerCase();for(const wa in va)if(wa.toLowerCase()===pa)return va[wa];return null}
function na(va,pa,wa,Ka){const O=new da;O.outFields=["*"];O.relationshipId="number"===typeof pa.id?pa.id:parseInt(pa.id,10);O.objectIds=[va.attributes[wa.objectIdField]];return wa.queryRelatedFeatures?.(O,Ka)??Promise.resolve({})}function qa(va,pa,wa){let Ka=0;const O=[];for(;Ka<pa.length;)O.push(`${va} IN (${pa.slice(Ka,wa+Ka)})`),Ka+=wa;return O.join(" OR ")}async function ra(va,pa,wa,Ka){var O=wa.layerId.toString();const {layerInfo:ba,relation:ia,relatedFields:sa,outStatistics:ya,url:Fa,sourceSpatialReference:Aa}=
pa;if(!ba||!ia)return null;O=fa({originRelationship:ia,relationships:ba.relationships,layerId:O});if(O?.relationshipTableId&&O.keyFieldInRelationshipTable){wa=(await na(va,O,wa,Ka))[va.attributes[wa.objectIdField]];if(!wa)return null;const Na=wa.features.map(eb=>eb.attributes[ba.objectIdField]);if(ya?.length&&ba.supportsStatistics)return pa=new J,pa.where=qa(ba.objectIdField,Na,1E3),pa.outFields=sa,pa.outStatistics=ya,pa.sourceSpatialReference=Aa,pa={features:Promise.resolve(wa),statsFeatures:E.executeQueryJSON(Fa,
pa)},H.eachAlways(pa)}return(O=O?.keyField)?(wa=K.isNumericField(xa(ba.fields,O)),va=ja(va.attributes,ia.keyField),O=wa?`${O}=${va}`:`${O}='${va}'`,va=E.executeQueryJSON(Fa,new J({where:O,outFields:pa.relatedFields,sourceSpatialReference:Aa}),Ka),pa=pa.outStatistics&&0<pa.outStatistics.length&&ba.supportsStatistics?E.executeQueryJSON(Fa,new J({where:O,outFields:pa.relatedFields,outStatistics:pa.outStatistics,sourceSpatialReference:Aa}),Ka):null,Ka={features:va},pa&&(Ka.statsFeatures=pa),H.eachAlways(Ka)):
null}function xa(va,pa){if(null!=va){pa=pa.toLowerCase();for(const wa of va)if(wa&&wa.name.toLowerCase()===pa)return wa}return null}const Ba=h.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),Da=new Map;n.createRelatedInfo=function(va,pa){if(va=ea(va,pa))return{url:`${pa.url}/${va.relatedTableId}`,sourceSpatialReference:pa.spatialReference,relation:va,relatedFields:[],outStatistics:[]}};n.getDestinationRelation=fa;n.getRelatedFieldInfo=function(va){if(!Q.isRelatedField(va))return null;
const [pa,wa]=va.split("/").slice(1);return{layerId:pa,fieldName:wa}};n.queryLayerInfos=function({relatedInfos:va,layer:pa},wa){const Ka={};va.forEach((O,ba)=>{({relation:O}=O);if(!O)throw ba=new w("relation-required","A relation is required on a layer to retrieve related records."),Ba.error(ba),ba;({relatedTableId:O}=O);if("number"!==typeof O)throw ba=new w("A related table ID is required on a layer to retrieve related records."),Ba.error(ba),ba;O=`${pa.url}/${O}`;const ia=Da.get(O),sa=ia??p(O,{query:{f:"json"},
signal:void 0});ia||Da.set(O,sa);Ka[ba]=sa});return H.whenOrAbort(H.eachAlways(Ka),wa)};n.queryRelatedFeatures=function({graphic:va,relatedInfos:pa,layer:wa},Ka){const O={};pa.forEach((ba,ia)=>{ba.layerInfo&&(O[ia]=ra(va,ba,wa,Ka))});return H.eachAlways(O)};n.setRelatedFeatures=function(va,pa){if(pa&&va){var {features:wa,statsFeatures:Ka}=va;va=wa&&wa.value;pa.relatedFeatures=va?va.features:[];va=Ka&&Ka.value;pa.relatedStatsFeatures=va?va.features:[]}};n.updateRelatedInfo=function({relatedInfo:va,
fieldName:pa,fieldInfo:wa}){va.relatedFields?.push(pa);wa.statisticType&&(pa=new z({statisticType:wa.statisticType,onStatisticField:pa,outStatisticFieldName:pa}),va.outStatistics?.push(pa))};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/chartUtilsAm5":function(){define("require exports ../../intl ../../chunks/Theme ../../chunks/Tooltip ../../chunks/DefaultTheme ../../intl/locale".split(" "),function(n,p,w,h,H,K,F){function R(b,c,e){if(c!==e)throw Error("Required "+
e+" arguments for "+b+" but got "+c);}function E(b,c,e){if(c<e)throw Error("Required at least "+e+" arguments for "+b+" but got "+c);}function X(b,c,e){E(b,c,e);if(0!==c%e)throw Error("Arguments for "+b+" must be in pairs of "+e);}function v(b){for(let e=0;e<b.length;e+=7){let k=e+3;var c=b[k];1<c.length&&(c=/^([01])([01])(.*)$/.exec(c),null!==c&&(b.splice(k,0,c[1]),++k,b.splice(k,0,c[2]),++k,0<c[3].length?b[k]=c[3]:b.splice(k,1)));++k;c=b[k];1<c.length&&(c=/^([01])(.+)$/.exec(c),null!==c&&(b.splice(k,
0,c[1]),++k,b[k]=c[2]))}}function g(b){if(0===b||1===b)return b;throw Error("Flag must be 0 or 1");}function A(b,c){for(;!b.interactive||c(b);)if(b._parent)b=b._parent;else break}function C(b,c,e){return h.addEventListener(b,h.getRendererEvent(c),k=>{const q=h.getEventTarget(k);let B=k.touches;B?(0==B.length&&(B=k.changedTouches),e(h.copy$1(B),q)):e([k],q)})}function D(b){var c=document.createElement("canvas");c.width=1;c.height=1;c=c.getContext("2d",{willReadFrequently:!0});c.drawImage(b,0,0,1,1);
try{return c.getImageData(0,0,1,1),!1}catch(e){return console.warn('Image "'+b.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function y(b){b.width=0;b.height=0;b.style.width="0px";b.style.height="0px"}function G(b,c){b.left=Math.min(b.left,c.x);b.top=Math.min(b.top,c.y);b.right=Math.max(b.right,c.x);b.bottom=Math.max(b.bottom,c.y)}function L(b,c){null==b?requestAnimationFrame(c):
setTimeout(()=>{requestAnimationFrame(c)},1E3/b)}class x{constructor(){Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]});this._observer=new ResizeObserver(b=>{h.each(b,c=>{h.each(this._targets,e=>{e.target===c.target&&e.callback()})})})}addTarget(b,c){this._observer.observe(b,{box:"border-box"});this._targets.push({target:b,callback:c})}removeTarget(b){this._observer.unobserve(b);
h.keepIf(this._targets,c=>c.target!==b)}}class Z{constructor(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null});Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(b,c){if(null===this._timer){let e=null;const k=()=>{const q=Date.now();if(null===e||q>e+Z.delay)e=q,h.each(this._targets,B=>{let V=B.target.getBoundingClientRect();if(V.width!==B.size.width||V.height!==B.size.height)B.size=V,B.callback()});this._timer=
0===this._targets.length?null:requestAnimationFrame(k)};this._timer=requestAnimationFrame(k)}this._targets.push({target:b,callback:c,size:{width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0}})}removeTarget(b){h.keepIf(this._targets,c=>c.target!==b);0===this._targets.length&&null!==this._timer&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty(Z,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let W=null;class u{constructor(b,c){Object.defineProperty(this,
"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});null===W&&(W="undefined"!==typeof ResizeObserver?new x:new Z);this._sensor=W;this._element=b;this._listener=h.onZoom(c);this._sensor.addTarget(b,c)}isDisposed(){return this._disposed}dispose(){this._disposed||
(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}class t extends h.Entity{}Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"});Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.Entity.classNames.concat([t.className])});class r extends h.Entity{_setDefaults(){this._setDefault("negativeBase",0);this._setDefault("numberFormat","#,###.#####");
this._setDefault("smallNumberThreshold",1);this._setDefault("bigNumberPrefixes",[{number:1E3,suffix:this._t("_big_number_suffix_3")},{number:1E6,suffix:this._t("_big_number_suffix_6")},{number:1E9,suffix:this._t("_big_number_suffix_9")},{number:1E12,suffix:this._t("_big_number_suffix_12")},{number:1E15,suffix:this._t("_big_number_suffix_15")},{number:1E18,suffix:this._t("_big_number_suffix_18")},{number:1E21,suffix:this._t("_big_number_suffix_21")},{number:1E24,suffix:this._t("_big_number_suffix_24")}]);
this._setDefault("smallNumberPrefixes",[{number:1E-24,suffix:this._t("_small_number_suffix_24")},{number:1E-21,suffix:this._t("_small_number_suffix_21")},{number:1E-18,suffix:this._t("_small_number_suffix_18")},{number:1E-15,suffix:this._t("_small_number_suffix_15")},{number:1E-12,suffix:this._t("_small_number_suffix_12")},{number:1E-9,suffix:this._t("_small_number_suffix_9")},{number:1E-6,suffix:this._t("_small_number_suffix_6")},{number:.001,suffix:this._t("_small_number_suffix_3")}]);this._setDefault("bytePrefixes",
[{number:1,suffix:this._t("_byte_suffix_B")},{number:1024,suffix:this._t("_byte_suffix_KB")},{number:1048576,suffix:this._t("_byte_suffix_MB")},{number:1073741824,suffix:this._t("_byte_suffix_GB")},{number:1099511627776,suffix:this._t("_byte_suffix_TB")},{number:0x4000000000000,suffix:this._t("_byte_suffix_PB")}]);super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(b,c,e){if(null==c||h.isString(c)&&"number"===c.toLowerCase())c=this.get("numberFormat","");b=Number(b);if(h.isObject(c))try{return this.get("intlLocales")?
(new Intl.NumberFormat(this.get("intlLocales"),c)).format(b):(new Intl.NumberFormat(void 0,c)).format(b)}catch(k){return"Invalid"}else c=h.cleanFormat(c),c=this.parseFormat(c,this._root.language),c=b>this.get("negativeBase")?c.positive:b<this.get("negativeBase")?c.negative:c.zero,null==e||c.mod||(c=h.copy(c),c.decimals.active=0==b?0:e),e=c.template.split(h.PLACEHOLDER).join(this.applyFormat(b,c));return e}parseFormat(b,c){var e=c.translateEmpty("_thousandSeparator");c=c.translateEmpty("_decimalSeparator");
e={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:e},decimals:{active:-1,passive:-1,separator:c},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:e},decimals:{active:-1,passive:-1,separator:c},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:e},decimals:{active:-1,passive:-1,separator:c},template:"",source:"",parsed:!1}};b=b.replace("||",h.PLACEHOLDER2);b=b.split("|");e.positive.source=b[0];
"undefined"===typeof b[2]?e.zero=e.positive:e.zero.source=b[2];"undefined"===typeof b[1]?e.negative=e.positive:e.negative.source=b[1];h.each$1(e,(k,q)=>{if(!q.parsed){k=q.source;"number"===k.toLowerCase()&&(k=this.get("numberFormat","#,###.#####"));k=h.TextFormatter.chunk(k,!0);for(let V=0;V<k.length;V++){let aa=k[V];aa.text=aa.text.replace(h.PLACEHOLDER2,"|");if("value"===aa.type){let ha=aa.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP\u2030!]?/);if(ha)if(null===ha||""===ha[0])q.template+=aa.text;
else{var B=ha[0].match(/[abespABESP%\u2030!]{2}|[abespABESP%\u2030]{1}$/);B&&(q.mod=B[0].toLowerCase(),q.modSpacing=ha[0].match(/[ ]{1}[abespABESP%\u2030!]{1}$/)?!0:!1);B=ha[0].split(".");if(""!==B[0]){q.thousands.active=(B[0].match(/0/g)||[]).length;q.thousands.passive=(B[0].match(/#/g)||[]).length+q.thousands.active;let ca=B[0].split(",");1!==ca.length&&(q.thousands.interval=(ca.pop()||"").length,0===q.thousands.interval&&(q.thousands.interval=-1))}"undefined"!==typeof B[1]&&(q.decimals.active=
(B[1].match(/0/g)||[]).length,q.decimals.passive=(B[1].match(/#/g)||[]).length+q.decimals.active);q.template+=aa.text.split(ha[0]).join(h.PLACEHOLDER)}}else q.template+=aa.text}q.parsed=!0}});return e}applyFormat(b,c){let e=0>b;b=Math.abs(b);let k="";var q="";let B=c.mod?c.mod.split(""):[];-1!==B.indexOf("b")?(q=this.applyPrefix(b,this.get("bytePrefixes"),-1!==B.indexOf("!")),b=q[0],k=q[1],q=q[2],c.modSpacing&&(q=" "+q)):-1!==B.indexOf("a")?(q=this.applyPrefix(b,b<this.get("smallNumberThreshold")?
this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),-1!==B.indexOf("!")),b=q[0],k=q[1],q=q[2],c.modSpacing&&(q=" "+q)):-1!==B.indexOf("p")?(b=parseFloat(b.toPrecision(Math.min(b.toString().length+2,21))),k=this._root.language.translate("_percentPrefix"),q=this._root.language.translate("_percentSuffix"),""==k&&""==q&&(q="%")):-1!==B.indexOf("%")?(b=parseFloat((100*b).toPrecision(Math.min(b.toString().length+2,21))),q="%"):-1!==B.indexOf("\u2030")&&(b=parseFloat((1E3*b).toPrecision(Math.min(b.toString().length+
3,21))),q="\u2030");if(-1!==B.indexOf("e"))q=0<=c.decimals.passive?b.toExponential(c.decimals.passive).split("e"):b.toExponential().split("e"),b=Number(q[0]),q="e"+q[1],c.modSpacing&&(q=" "+q);else if(0===c.decimals.passive)b=Math.round(b);else if(0<c.decimals.passive){var V=Math.pow(10,c.decimals.passive);b=Math.round(b*V)/V}V="";var aa=h.numberToString(b).split("."),ha=aa[0];ha.length<c.thousands.active&&(ha=Array(c.thousands.active-ha.length+1).join("0")+ha);if(0<c.thousands.interval){let ca=[],
la=ha.split("").reverse().join("");for(let ua=0,N=ha.length;ua<=N;ua+=c.thousands.interval)ha=la.substr(ua,c.thousands.interval).split("").reverse().join(""),""!==ha&&ca.unshift(ha);ha=ca.join(c.thousands.separator)}V+=ha;1===aa.length&&aa.push("");aa=aa[1];aa.length<c.decimals.active&&(aa+=Array(c.decimals.active-aa.length+1).join("0"));""!==aa&&(V+=c.decimals.separator+aa);""===V&&(V="0");0!==b&&e&&-1===B.indexOf("s")&&(V="-"+V);k&&(V=k+V);q&&(V+=q);return V}applyPrefix(b,c,e=!1){let k=b,q="",B=
"",V=!1,aa=1;for(let ha=0,ca=c.length;ha<ca;ha++)c[ha].number<=b&&(0===c[ha].number?k=0:(k=b/c[ha].number,aa=c[ha].number),q=c[ha].prefix,B=c[ha].suffix,V=!0);!V&&e&&c.length&&0!=b&&(k=b/c[0].number,q=c[0].prefix,B=c[0].suffix,V=!0);V&&(k=parseFloat(k.toPrecision(Math.min(aa.toString().length+Math.floor(k).toString().replace(/[^0-9]*/g,"").length,21))));return[k,q,B]}escape(b){return b.replace("||",h.PLACEHOLDER2)}unescape(b){return b.replace(h.PLACEHOLDER2,"|")}}class m extends h.Entity{_setDefaults(){this._setDefault("capitalize",
!0);this._setDefault("dateFormat","yyyy-MM-dd");super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(b,c){if("undefined"===typeof c||""===c)c=this.get("dateFormat","yyyy-MM-dd");if(h.isObject(c))try{var e=this.get("intlLocales");return e?(new Intl.DateTimeFormat(e,c)).format(b):(new Intl.DateTimeFormat(void 0,c)).format(b)}catch(k){return"Invalid"}c=this.parseFormat(c);(e=this._root.timezone)&&!this._root.utc&&(b=e.convertLocal(b));if(!h.isNumber(b.getTime()))return"Invalid date";b=
this.applyFormat(b,c);this.get("capitalize")&&(b=b.replace(/^.{1}/,b.substr(0,1).toUpperCase()));return b}applyFormat(b,c){let e=c.template,k,q,B,V,aa,ha,ca,la,ua=b.getTime();this._root.utc?(k=b.getUTCFullYear(),q=b.getUTCMonth(),B=b.getUTCDay(),V=b.getUTCDate(),aa=b.getUTCHours(),ha=b.getUTCMinutes(),ca=b.getUTCSeconds(),la=b.getUTCMilliseconds()):(k=b.getFullYear(),q=b.getMonth(),B=b.getDay(),V=b.getDate(),aa=b.getHours(),ha=b.getMinutes(),ca=b.getSeconds(),la=b.getMilliseconds());for(let oa=0,
Ca=c.parts.length;oa<Ca;oa++){var N="";switch(c.parts[oa]){case "G":N=this._t(0>k?"_era_bc":"_era_ad");break;case "yyyy":N=Math.abs(k).toString();0>k&&(N+=this._t("_era_bc"));break;case "yyy":case "yy":case "y":N=Math.abs(k).toString().substr(-c.parts[oa].length);0>k&&(N+=this._t("_era_bc"));break;case "YYYY":case "YYY":case "YY":case "Y":var za=h.getWeekYear(b,this._root.utc);N="YYYY"==c.parts[oa]?Math.abs(za).toString():Math.abs(za).toString().substr(-c.parts[oa].length);0>za&&(N+=this._t("_era_bc"));
break;case "q":N=""+Math.ceil((b.getMonth()+1)/3);break;case "MMMMM":N=this._t(this._getMonth(q)).substr(0,1);break;case "MMMM":N=this._t(this._getMonth(q));break;case "MMM":N=this._t(this._getShortMonth(q));break;case "MM":N=h.padString(q+1,2,"0");break;case "M":N=(q+1).toString();break;case "ww":N=h.padString(h.getWeek(b,this._root.utc),2,"0");break;case "w":N=h.getWeek(b,this._root.utc).toString();break;case "W":N=h.getMonthWeek(b,this._root.utc).toString();break;case "dd":N=h.padString(V,2,"0");
break;case "d":N=V.toString();break;case "DD":case "DDD":N=h.padString(h.getYearDay(b,this._root.utc).toString(),c.parts[oa].length,"0");break;case "D":N=h.getYearDay(b,this._root.utc).toString();break;case "t":N=this._root.language.translateFunc("_dateOrd").call(this,V);break;case "E":N=(B||7).toString();break;case "EE":N=h.padString((B||7).toString(),2,"0");break;case "EEE":case "eee":N=this._t(this._getShortWeekday(B));break;case "EEEE":case "eeee":N=this._t(this._getWeekday(B));break;case "EEEEE":case "eeeee":N=
this._t(this._getShortWeekday(B)).substr(0,1);break;case "e":case "ee":N=(B-(this._root.locale.firstDayOfWeek||1)+1).toString();"ee"==c.parts[oa]&&(N=h.padString(N,2,"0"));break;case "a":N=12<=aa?this._t("PM"):this._t("AM");break;case "aa":N=12<=aa?this._t("P.M."):this._t("A.M.");break;case "aaa":N=12<=aa?this._t("P"):this._t("A");break;case "h":N=h.get12Hours(aa).toString();break;case "hh":N=h.padString(h.get12Hours(aa),2,"0");break;case "H":N=aa.toString();break;case "HH":N=h.padString(aa,2,"0");
break;case "K":N=h.get12Hours(aa,0).toString();break;case "KK":N=h.padString(h.get12Hours(aa,0),2,"0");break;case "k":N=(aa+1).toString();break;case "kk":N=h.padString(aa+1,2,"0");break;case "m":N=ha.toString();break;case "mm":N=h.padString(ha,2,"0");break;case "s":N=ca.toString();break;case "ss":N=h.padString(ca,2,"0");break;case "S":case "SS":case "SSS":N=Math.round(la/1E3*Math.pow(10,c.parts[oa].length)).toString();break;case "x":N=ua.toString();break;case "n":case "nn":case "nnn":N=h.padString(la,
c.parts[oa].length,"0");break;case "z":N=h.getTimeZone(b,!1,!1,this._root.utc);break;case "zz":N=h.getTimeZone(b,!0,!1,this._root.utc);break;case "zzz":N=h.getTimeZone(b,!1,!0,this._root.utc);break;case "zzzz":N=h.getTimeZone(b,!0,!0,this._root.utc);break;case "Z":case "ZZ":za=(N=this._root.utc?"UTC":this._root.timezone)?h.getTimezoneOffset(N):b.getTimezoneOffset();N=Math.abs(za)/60;let ma=Math.floor(N),La=60*N-60*ma;this._root.utc&&(La=ma=0);"Z"==c.parts[oa]?(N="GMT",N+=0<za?"-":"+",N+=h.padString(ma,
2)+":"+h.padString(La,2)):(N=0<za?"-":"+",N+=h.padString(ma,2)+h.padString(La,2));break;case "i":N=b.toISOString();break;case "I":N=b.toUTCString()}e=e.replace(h.PLACEHOLDER,N)}return e}parseFormat(b){let c={template:"",parts:[]};b=h.TextFormatter.chunk(b,!0);for(let k=0;k<b.length;k++){let q=b[k];if("value"===q.type){if(q.text.match(/^date$/i)){var e=this.get("dateFormat","yyyy-MM-dd");h.isString(e)||(e="yyyy-MM-dd");q.text=e}if(e=q.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g))for(let B=
0;B<e.length;B++)c.parts.push(e[B]),q.text=q.text.replace(e[B],h.PLACEHOLDER)}c.template+=q.text}return c}_months(){return"January February March April May June July August September October November December".split(" ")}_getMonth(b){return this._months()[b]}_shortMonths(){return"Jan Feb Mar Apr May(short) Jun Jul Aug Sep Oct Nov Dec".split(" ")}_getShortMonth(b){return this._shortMonths()[b]}_weekdays(){return"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")}_getWeekday(b){return this._weekdays()[b]}_shortWeekdays(){return"Sun Mon Tue Wed Thu Fri Sat".split(" ")}_getShortWeekday(b){return this._shortWeekdays()[b]}parse(b,
c){if(b instanceof Date)return b;if(h.isNumber(b))return new Date(b);h.isString(b)||(b=b.toString());var e="";c=h.cleanFormat(c);c=c.substr(0,b.length);let k=this.parseFormat(c);var q=-1,B=-1,V=-1,aa=-1,ha=-1,ca=-1,la=-1,ua=-1,N=-1,za=-1,oa=-1,Ca=-1,ma=-1,La=-1,Ea=-1,Pa=-1,Qa=-1,Oa=-1,Ua=-1,Wa=c=-1,Sa=-1,Ga=1970,Ta=0,Ma=1,a=0,d=0,f=0,l=0,I=null,M=0,U=this._root.utc;let ka=I=0;for(let ta=0;ta<k.parts.length;ta++){ka=ta+I+1;switch(k.parts[ta]){case "yyyy":case "YYYY":e+="([0-9]{4})";q=ka;break;case "yyy":case "YYY":e+=
"([0-9]{3})";B=ka;break;case "yy":case "YY":e+="([0-9]{2})";V=ka;break;case "y":case "Y":e+="([0-9]{1})";aa=ka;break;case "MMMM":e+="("+this.getStringList(this._months()).join("|")+")";la=ka;break;case "MMM":e+="("+this.getStringList(this._shortMonths()).join("|")+")";ca=ka;break;case "MM":case "M":e+="([0-9]{2}|[0-9]{1})";ha=ka;break;case "ww":case "w":e+="([0-9]{2}|[0-9]{1})";za=ka;break;case "dd":case "d":e+="([0-9]{2}|[0-9]{1})";ua=ka;break;case "DDD":case "DD":case "D":e+="([0-9]{3}|[0-9]{2}|[0-9]{1})";
N=ka;break;case "dddd":e+="("+this.getStringList(this._weekdays()).join("|")+")";break;case "ddd":e+="("+this.getStringList(this._shortWeekdays()).join("|")+")";break;case "aaa":case "aa":case "a":e+="("+this.getStringList("AM PM A.M. P.M. A P".split(" ")).join("|")+")";Ua=ka;break;case "hh":case "h":e+="([0-9]{2}|[0-9]{1})";La=ka;break;case "HH":case "H":e+="([0-9]{2}|[0-9]{1})";oa=ka;break;case "KK":case "K":e+="([0-9]{2}|[0-9]{1})";Ca=ka;break;case "kk":case "k":e+="([0-9]{2}|[0-9]{1})";ma=ka;
break;case "mm":case "m":e+="([0-9]{2}|[0-9]{1})";Ea=ka;break;case "ss":case "s":e+="([0-9]{2}|[0-9]{1})";Pa=ka;break;case "SSS":case "SS":case "S":e+="([0-9]{3}|[0-9]{2}|[0-9]{1})";Qa=ka;Oa=k.parts[ta].length;break;case "nnn":case "nn":case "n":e+="([0-9]{3}|[0-9]{2}|[0-9]{1})";Qa=ka;break;case "x":e+="([0-9]{1,})";Wa=ka;break;case "Z":e+="GMT([-+]+[0-9]{2}:[0-9]{2})";c=ka;break;case "ZZ":e+="([\\-+]+[0-9]{2}[0-9]{2})";c=ka;break;case "i":e+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)";
Sa=ka;I+=7;break;case "G":case "YYYY":case "YYY":case "YY":case "Y":case "MMMMM":case "W":case "EEEEE":case "EEEE":case "EEE":case "EE":case "E":case "eeeee":case "eeee":case "eee":case "ee":case "e":case "zzzz":case "zzz":case "zz":case "z":case "t":I--}e+="[^0-9]*"}(e=b.match(new RegExp(e)))?(-1<q&&(Ga=parseInt(e[q])),-1<B&&(Ga=parseInt(e[B])+1E3),-1<V&&(Ga=parseInt(e[V]),Ga=50<Ga?Ga+1E3:Ga+2E3),-1<aa&&(Ga=parseInt(e[aa]),Ga=10*Math.floor((new Date).getFullYear()/10)+Ga),-1<la&&(Ta=this.resolveMonth(e[la])),
-1<ca&&(Ta=this.resolveShortMonth(e[ca])),-1<ha&&(Ta=parseInt(e[ha])-1),-1<za&&-1===ua&&(Ta=0,Ma=h.getDayFromWeek(parseInt(e[za]),Ga,1,this._root.utc)),-1<ua&&(Ma=parseInt(e[ua])),-1<N&&(Ta=0,Ma=parseInt(e[N])),-1<oa&&(a=parseInt(e[oa])),-1<ma&&(a=parseInt(e[ma])-1),-1<Ca&&(a=parseInt(e[Ca]),11==a&&(a=0),-1<Ua&&!this.isAm(e[Ua])&&(a+=12)),-1<La&&(a=parseInt(e[La]),12==a&&(a=0),-1<Ua&&!this.isAm(e[Ua])&&(a+=12)),-1<Ea&&(d=parseInt(e[Ea])),-1<Pa&&(f=parseInt(e[Pa])),-1<Qa&&(Ea=parseInt(e[Qa]),2==Oa?
Ea*=10:1==Oa&&(Ea*=100),l=Ea),-1<Wa&&(I=parseInt(e[Wa]),Oa=new Date(I),Ga=Oa.getUTCFullYear(),Ta=Oa.getUTCMonth(),Ma=Oa.getUTCDate(),a=Oa.getUTCHours(),d=Oa.getUTCMinutes(),f=Oa.getUTCSeconds(),l=Oa.getUTCMilliseconds()),-1<c&&(M=this.resolveTimezoneOffset(new Date(Ga,Ta,Ma),e[c])),-1<Sa&&(Ga=h.toNumber(e[Sa+0]),Ta=h.toNumber(e[Sa+1])-1,Ma=h.toNumber(e[Sa+2]),a=h.toNumber(e[Sa+3]),d=h.toNumber(e[Sa+4]),f=h.toNumber(e[Sa+5]),l=h.toNumber(e[Sa+6]),"Z"==e[Sa+7]||"z"==e[Sa+7]?U=!0:""!=e[Sa+7]&&(M=this.resolveTimezoneOffset(new Date(Ga,
Ta,Ma),e[Sa+7]))),c=U?new Date(Date.UTC(Ga,Ta,Ma,a,d,f,l)):new Date(Ga,Ta,Ma,a,d+M,f,l)):c=new Date(b);return c}resolveTimezoneOffset(b,c){if(c.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){var e=c.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/);c=e[1];let k=e[3];e=60*parseInt(e[2])+parseInt(k);"+"==c&&(e*=-1);b=(b||new Date).getTimezoneOffset();return e-b}return 0}resolveMonth(b){let c=this._months().indexOf(b);return-1<c||!this._root.language.isDefault()&&(c=this._root.language.translateAll(this._months()).indexOf(b),
-1<c)?c:0}resolveShortMonth(b){let c=this._shortMonths().indexOf(b);if(-1<c)return c;c=this._months().indexOf(b);return-1<c||this._root.language&&!this._root.language.isDefault()&&(c=this._root.language.translateAll(this._shortMonths()).indexOf(b),-1<c)?c:0}isAm(b){return-1<this.getStringList(["AM","A.M.","A"]).indexOf(b.toUpperCase())}getStringList(b){let c=[];for(let e=0;e<b.length;e++)this._root.language?c.push(h.escapeForRgex(this._t(b[e]))):c.push(h.escapeForRgex(b[e]));return c}}class J extends h.Entity{constructor(){super(...arguments);
Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){this._setDefault("negativeBase",0);this._setDefault("baseUnit","second");this._setDefault("durationFormats",{millisecond:{millisecond:this._t("_duration_millisecond"),second:this._t("_duration_millisecond_second"),minute:this._t("_duration_millisecond_minute"),hour:this._t("_duration_millisecond_hour"),day:this._t("_duration_millisecond_day"),week:this._t("_duration_millisecond_week"),
month:this._t("_duration_millisecond_week"),year:this._t("_duration_millisecond_year")},second:{second:this._t("_duration_second"),minute:this._t("_duration_second_minute"),hour:this._t("_duration_second_hour"),day:this._t("_duration_second_day"),week:this._t("_duration_second_week"),month:this._t("_duration_second_week"),year:this._t("_duration_second_year")},minute:{minute:this._t("_duration_minute"),hour:this._t("_duration_minute_hour"),day:this._t("_duration_minute_day"),week:this._t("_duration_minute_week"),
month:this._t("_duration_minute_week"),year:this._t("_duration_minute_year")},hour:{hour:this._t("_duration_hour"),day:this._t("_duration_hour_day"),week:this._t("_duration_hour_week"),month:this._t("_duration_hour_week"),year:this._t("_duration_hour_year")},day:{day:this._t("_duration_day"),week:this._t("_duration_day_week"),month:this._t("_duration_day_week"),year:this._t("_duration_day_year")},week:{week:this._t("_duration_week"),month:this._t("_duration_week_week"),year:this._t("_duration_week_year")},
month:{month:this._t("_duration_month"),year:this._t("_duration_month_year")},year:{year:this._t("_duration_year")}});super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(b,c,e){e=e||this.get("baseUnit");if("undefined"===typeof c||""===c)c=null!=this.get("durationFormat")?this.get("durationFormat"):this.getFormat(h.toNumber(b),void 0,e);c=h.cleanFormat(c);c=this.parseFormat(c,e);b=Number(b);c=b>this.get("negativeBase")?c.positive:b<this.get("negativeBase")?c.negative:c.zero;b=this.applyFormat(b,
c);""!==c.color&&(b="["+c.color+"]"+b+"[/]");return b}parseFormat(b,c){c=c||this.get("baseUnit");c={positive:{color:"",template:"",parts:[],source:"",baseUnit:c,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:c,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:c,parsed:!1,absolute:!1}};b=b.replace("||",h.PLACEHOLDER2);b=b.split("|");c.positive.source=b[0];"undefined"===typeof b[2]?c.zero=c.positive:c.zero.source=b[2];"undefined"===typeof b[1]?
c.negative=c.positive:c.negative.source=b[1];h.each$1(c,(e,k)=>{if(!k.parsed){e=k.source;var q=[];(q=k.source.match(/^\[([^\]]*)\]/))&&q.length&&""!==q[0]&&(e=k.source.substr(q[0].length),k.color=q[1]);e=h.TextFormatter.chunk(e,!0);for(q=0;q<e.length;q++){let B=e[q];B.text=B.text.replace(h.PLACEHOLDER2,"|");if("value"===B.type){B.text.match(/[yYMdDwhHKkmsSn]+a/)&&(k.absolute=!0,B.text=B.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let V=B.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(V)for(let aa=
0;aa<V.length;aa++)null==V[aa]&&(V[aa]=this._unitAliases[V[aa]]),k.parts.push(V[aa]),B.text=B.text.replace(V[aa],h.PLACEHOLDER)}k.template+=B.text}k.parsed=!0}});return c}applyFormat(b,c){let e=!c.absolute&&b<this.get("negativeBase");b=Math.abs(b);b=this.toTimeStamp(b,c.baseUnit);let k=c.template;for(let B=0,V=c.parts.length;B<V;B++){var q=c.parts[B];let aa=this._toTimeUnit(q.substr(0,1));q=q.length;let ha=Math.floor(b/this._getUnitValue(aa));k=k.replace(h.PLACEHOLDER,h.padString(ha,q,"0"));b-=ha*
this._getUnitValue(aa)}e&&(k="-"+k);return k}toTimeStamp(b,c){return b*this._getUnitValue(c)}_toTimeUnit(b){switch(b){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year"}}getFormat(b,c,e){if(null!=this.get("durationFormat"))return this.get("durationFormat");e||(e=this.get("baseUnit"));if(null!=c&&b!=c)return b=Math.abs(b),c=Math.abs(c),b=this.getValueUnit(Math.max(b,
c),e),this.get("durationFormats")[e][b];b=this.getValueUnit(b,e);return this.get("durationFormats")[e][b]}getValueUnit(b,c){c||(c=this.get("baseUnit"));let e,k=this.getMilliseconds(b,c);h.eachContinue(this._getUnitValues(),(q,B)=>{if(q==c||e){if(1>=k/B)return e||(e=q),!1;e=q}return!0});return e}getMilliseconds(b,c){c||(c=this.get("baseUnit"));return b*this._getUnitValue(c)}_getUnitValue(b){return this._getUnitValues()[b]}_getUnitValues(){return{millisecond:1,second:1E3,minute:6E4,hour:36E5,day:864E5,
week:6048E5,month:2592E6,year:31536E6}}}const S={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",
_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",
_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",
_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",
_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",
Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(b){let c="th";if(11>b||13<b)switch(b%10){case 1:c="st";break;case 2:c="nd";break;case 3:c="rd"}return c},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"",
"Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"",
"Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"",
"Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};class P extends h.Entity{_setDefaults(){this.setPrivate("defaultLocale",
S);super._setDefaults()}translate(b,c,...e){c||(c=this._root.locale||this.getPrivate("defaultLocale"));let k=b,q=c[b];if(null===q)k="";else if(null!=q)q&&(k=q);else if(c!==this.getPrivate("defaultLocale"))return this.translate(b,this.getPrivate("defaultLocale"),...e);if(e.length)for(let B=e.length,V=0;V<B;++V)k=k.split("%"+(V+1)).join(e[V]);return k}translateAny(b,c,...e){return this.translate(b,c,...e)}setTranslationAny(b,c,e){(e||this._root.locale)[b]=c}setTranslationsAny(b,c){h.each$1(b,(e,k)=>
{this.setTranslationAny(e,k,c)})}translateEmpty(b,c,...e){c=this.translate(b,c,...e);return c==b?"":c}translateFunc(b,c){return this._root.locale[b]?this._root.locale[b]:c!==this.getPrivate("defaultLocale")?this.translateFunc(b,this.getPrivate("defaultLocale")):()=>""}translateAll(b,c){return this.isDefault()?b:h.map(b,e=>this.translate(e,c))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}class T{constructor(b=1,c=0,e=0,k=1,q=0,B=0){Object.defineProperty(this,"a",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.a=b;this.b=
c;this.c=e;this.d=k;this.tx=q;this.ty=B}setTransform(b,c,e,k,q,B=1){this.a=Math.cos(q)*B;this.b=Math.sin(q)*B;this.c=-Math.sin(q)*B;this.d=Math.cos(q)*B;this.tx=b-(e*this.a+k*this.c);this.ty=c-(e*this.b+k*this.d)}apply(b){return{x:this.a*b.x+this.c*b.y+this.tx,y:this.b*b.x+this.d*b.y+this.ty}}applyInverse(b){const c=1/(this.a*this.d+this.c*-this.b);return{x:this.d*c*b.x+-this.c*c*b.y+(this.ty*this.c-this.tx*this.d)*c,y:this.a*c*b.y+-this.b*c*b.x+(-this.ty*this.a+this.tx*this.b)*c}}append(b){const c=
this.a,e=this.b,k=this.c,q=this.d;this.a=b.a*c+b.b*k;this.b=b.a*e+b.b*q;this.c=b.c*c+b.d*k;this.d=b.c*e+b.d*q;this.tx=b.tx*c+b.ty*k+this.tx;this.ty=b.tx*e+b.ty*q+this.ty}prepend(b){const c=this.tx;if(1!==b.a||0!==b.b||0!==b.c||1!==b.d){const e=this.a,k=this.c;this.a=e*b.a+this.b*b.c;this.b=e*b.b+this.b*b.d;this.c=k*b.a+this.d*b.c;this.d=k*b.b+this.d*b.d}this.tx=c*b.a+this.ty*b.c+b.tx;this.ty=c*b.b+this.ty*b.d+b.ty}copyFrom(b){this.a=b.a;this.b=b.b;this.c=b.c;this.d=b.d;this.tx=b.tx;this.ty=b.ty}}
var da=function(){return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b)){var e=[],k=!0,q=!1,B=void 0;try{for(var V=b[Symbol.iterator](),aa;!(k=(aa=V.next()).done)&&(e.push(aa.value),!c||e.length!==c);k=!0);}catch(ha){q=!0,B=ha}finally{try{if(!k&&V["return"])V["return"]()}finally{if(q)throw B;}}return e}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),Y=2*Math.PI,z=function(b,c,e,k,q,B,V){var aa=b.x;b=b.y;aa*=c;b*=e;return{x:k*aa-q*b+B,y:q*
aa+k*b+V}},Q=function(b,c){var e=1.5707963267948966===c?.551915024494:-1.5707963267948966===c?-.551915024494:4/3*Math.tan(c/4),k=Math.cos(b),q=Math.sin(b),B=Math.cos(b+c);b=Math.sin(b+c);return[{x:k-q*e,y:q+k*e},{x:B+b*e,y:b-B*e},{x:B,y:b}]},ea=function(b,c,e,k){var q=b*e+c*k;1<q&&(q=1);-1>q&&(q=-1);return(0>b*k-c*e?-1:1)*Math.acos(q)},fa=function(b,c,e,k,q,B,V,aa,ha,ca,la,ua){var N=Math.pow(q,2),za=Math.pow(B,2),oa=Math.pow(la,2),Ca=Math.pow(ua,2),ma=N*za-N*Ca-za*oa;0>ma&&(ma=0);ma=Math.sqrt(ma/
(N*Ca+za*oa))*(V===aa?-1:1);V=ma*q/B*ua;ma=ma*-B/q*la;b=ca*V-ha*ma+(b+e)/2;c=ha*V+ca*ma+(c+k)/2;k=(la-V)/q;ha=(ua-ma)/B;q=(-la-V)/q;ua=(-ua-ma)/B;B=ea(1,0,k,ha);ua=ea(k,ha,q,ua);0===aa&&0<ua&&(ua-=Y);1===aa&&0>ua&&(ua+=Y);return[b,c,B,ua]},ja=function(b){var c=b.px,e=b.py,k=b.cx,q=b.cy,B=b.rx,V=b.ry,aa=b.xAxisRotation,ha=void 0===aa?0:aa;aa=b.largeArcFlag;var ca=b.sweepFlag;b=[];if(0===B||0===V)return[];var la=Math.sin(ha*Y/360),ua=Math.cos(ha*Y/360);ha=ua*(c-k)/2+la*(e-q)/2;var N=-la*(c-k)/2+ua*
(e-q)/2;if(0===ha&&0===N)return[];B=Math.abs(B);V=Math.abs(V);var za=Math.pow(ha,2)/Math.pow(B,2)+Math.pow(N,2)/Math.pow(V,2);1<za&&(B*=Math.sqrt(za),V*=Math.sqrt(za));c=fa(c,e,k,q,B,V,void 0===aa?0:aa,void 0===ca?0:ca,la,ua,ha,N);e=da(c,4);var oa=e[0],Ca=e[1];c=e[2];e=e[3];k=Math.abs(e)/(Y/4);1E-7>Math.abs(1-k)&&(k=1);k=Math.max(Math.ceil(k),1);e/=k;for(q=0;q<k;q++)b.push(Q(c,e)),c+=e;return b.map(function(ma){var La=z(ma[0],B,V,ua,la,oa,Ca),Ea=La.x;La=La.y;var Pa=z(ma[1],B,V,ua,la,oa,Ca),Qa=Pa.x;
Pa=Pa.y;ma=z(ma[2],B,V,ua,la,oa,Ca);return{x1:Ea,y1:La,x2:Qa,y2:Pa,x:ma.x,y:ma.y}})};class na{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(b){this._x=b}set y(b){this._y=b}}class qa extends h.DisposerClass{constructor(b){super();Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});
Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null});Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"wheelable",
{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,
value:1});Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,
writable:!0,value:new na});Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new T});Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,
value:new T});Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new T});Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._renderer=b}_dispose(){this._renderer._removeObject(this);this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let b=this;for(;;){if(b._layer)return b._layer;if(b._parent)b=b._parent;else return this._renderer.defaultLayer}}setLayer(b,c){null==b?this._layer=void 0:(this._layer=this._renderer.getLayer(b,!0),this._layer.visible=!0,(this._layer.margin=c)&&h.setInteractive(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),
this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(b){}_getColorId(){void 0===this._colorId&&(this._colorId=this._renderer.paintId(this));return this._colorId}_isInteractive(){return 0==this.inactive&&(this.interactive||0<this._renderer._forceInteractive)}_isInteractiveMask(){return this._isInteractive()}contains(b){for(;;){if(b===
this)return!0;if(b._parent)b=b._parent;else return!1}}toGlobal(b){return this._matrix.apply(b)}toLocal(b){return this._matrix.applyInverse(b)}getLocalMatrix(){this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale);return this._uMatrix}getLocalBounds(){this._localBounds||(this._localBounds={left:1E7,top:1E7,right:-1E7,bottom:-1E7},this._addBounds(this._localBounds));return this._localBounds}getAdjustedBounds(b){this._setMatrix();const c=this.getLocalMatrix(),e=
c.apply({x:b.left,y:b.top}),k=c.apply({x:b.right,y:b.top}),q=c.apply({x:b.right,y:b.bottom});b=c.apply({x:b.left,y:b.bottom});return{left:Math.min(e.x,k.x,q.x,b.x),top:Math.min(e.y,k.y,q.y,b.y),right:Math.max(e.x,k.x,q.x,b.x),bottom:Math.max(e.y,k.y,q.y,b.y)}}on(b,c,e){return this.interactive?this._renderer._addEvent(this,b,c,e):new h.Disposer(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale);this._matrix.copyFrom(this._localMatrix);
this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(b,c){const e=this._matrix;let k=e.tx*c,q=e.ty*c;this.crisp&&(k=Math.floor(k)+.5,q=Math.floor(q)+.5);b.setTransform(e.a*c,e.b*c,e.c*c,e.d*c,k,q)}_transformMargin(b,c,e){const k=this._matrix;b.setTransform(k.a*c,k.b*c,k.c*c,k.d*c,(k.tx+e.left)*c,(k.ty+e.top)*c)}_transformLayer(b,c,e){e.margin?this._transformMargin(b,e.scale||c,e.margin):this._transform(b,e.scale||c)}render(b){if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();
const c=this._renderer.resolution,e=this._renderer.layers,k=this._renderer._ghostLayer,q=k.context,B=this.mask;B&&B._setMatrix();h.each(e,V=>{if(V){const aa=V.context;aa.save();B&&(B._transformLayer(aa,c,V),B._runPath(aa),aa.clip());aa.globalAlpha=this.compoundAlpha*this.alpha;this._transformLayer(aa,c,V);this.filter&&(aa.filter=this.filter)}});q.save();B&&this._isInteractiveMask()&&(B._transformMargin(q,c,k.margin),B._runPath(q),q.clip());this._transformMargin(q,c,k.margin);this._render(b);q.restore();
h.each(e,V=>{V&&V.context.restore()})}}_render(b){!1===this.exportable&&((this._layer||b).tainted=!0)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(b=>b.value===this)}shouldCancelTouch(){const b=this._renderer;return b.tapToActivate&&!b._touchActive?!1:this.cancelTouch?!0:this._parent?this._parent.shouldCancelTouch():!1}}class ra extends qa{constructor(){super(...arguments);Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,
writable:!0,value:!0});Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(){return this.interactiveChildren||super._isInteractiveMask()}addChild(b){b._parent=this;this._children.push(b);b._layer&&this.registerChildLayer(b._layer)}addChildAt(b,c){b._parent=this;this._children.splice(c,0,b);b._layer&&this.registerChildLayer(b._layer)}removeChild(b){b._parent=
void 0;h.removeFirst(this._children,b)}_render(b){super._render(b);const c=this._renderer;this.interactive&&this.interactiveChildren&&++c._forceInteractive;const e=this._layer||b;h.each(this._children,k=>{k.compoundAlpha=this.compoundAlpha*this.alpha;k.render(e)});this.interactive&&this.interactiveChildren&&--c._forceInteractive}registerChildLayer(b){this._childLayers||(this._childLayers=[]);h.pushOne(this._childLayers,b);this._parent&&this._parent.registerChildLayer(b)}markDirtyLayer(b=!1){super.markDirtyLayer();
b&&this._childLayers&&h.each(this._childLayers,c=>c.dirty=!0)}_dispose(){super._dispose();this._childLayers&&h.each(this._childLayers,b=>{b.dirty=!0})}}class xa{colorize(b,c){}path(b){}addBounds(b){}}class Ba extends xa{colorize(b,c){b.beginPath()}}class Da extends xa{constructor(b){super();Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:b})}colorize(b,c){b.fillStyle=void 0!==c?c:this.color}}class va extends xa{constructor(b){super();Object.defineProperty(this,
"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:b})}colorize(b,c){b.fill();this.clearShadow&&(b.shadowColor="",b.shadowBlur=0,b.shadowOffsetX=0,b.shadowOffsetY=0)}}class pa extends xa{colorize(b,c){b.stroke()}}class wa extends xa{constructor(b,c,e){super();Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"lineJoin",{enumerable:!0,
configurable:!0,writable:!0,value:e})}colorize(b,c){b.strokeStyle=void 0!==c?c:this.color;b.lineWidth=this.width;this.lineJoin&&(b.lineJoin=this.lineJoin)}}class Ka extends xa{constructor(b){super();Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:b})}colorize(b,c){b.setLineDash(this.dash)}}class O extends xa{constructor(b){super();Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:b})}colorize(b,c){b.lineDashOffset=this.dashOffset}}
class ba extends xa{constructor(b,c,e,k){super();Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e});Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:k})}path(b){b.rect(this.x,this.y,this.width,this.height)}addBounds(b){const c=this.x,e=this.y,k=c+this.width,q=
e+this.height;G(b,{x:c,y:e});G(b,{x:k,y:e});G(b,{x:c,y:q});G(b,{x:k,y:q})}}class ia extends xa{constructor(b,c,e){super();Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:e})}path(b){b.moveTo(this.x+this.radius,this.y);b.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(b){G(b,{x:this.x-this.radius,
y:this.y-this.radius});G(b,{x:this.x+this.radius,y:this.y+this.radius})}}class sa extends xa{constructor(b,c,e,k){super();Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:e});Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:k})}path(b){b.ellipse(0,0,this.radiusX,
this.radiusY,0,0,2*Math.PI)}addBounds(b){G(b,{x:this.x-this.radiusX,y:this.y-this.radiusY});G(b,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class ya extends xa{constructor(b,c,e,k,q,B){super();Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:e});Object.defineProperty(this,"startAngle",{enumerable:!0,
configurable:!0,writable:!0,value:k});Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:q});Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:B})}path(b){0<this.radius&&b.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(b){let c=h.getArcBounds(this.cx,this.cy,this.startAngle*h.DEGREES,this.endAngle*h.DEGREES,this.radius);G(b,{x:c.left,y:c.top});G(b,{x:c.right,y:c.bottom})}}class Fa extends xa{constructor(b,
c,e,k,q){super();Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:e});Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:k});Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:q})}path(b){0<this.radius&&b.arcTo(this.x1,this.y1,this.x2,
this.y2,this.radius)}addBounds(b){}}class Aa extends xa{constructor(b,c){super();Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:c})}path(b){b.lineTo(this.x,this.y)}addBounds(b){G(b,{x:this.x,y:this.y})}}class Na extends xa{constructor(b,c){super();Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,
writable:!0,value:c})}path(b){b.moveTo(this.x,this.y)}addBounds(b){G(b,{x:this.x,y:this.y})}}class eb extends xa{path(b){b.closePath()}}class Ya extends xa{constructor(b,c,e,k,q,B){super();Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:e});Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,
writable:!0,value:k});Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:q});Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:B})}path(b){b.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(b){G(b,{x:this.cpX,y:this.cpY});G(b,{x:this.cpX2,y:this.cpY2});G(b,{x:this.toX,y:this.toY})}}class nb extends xa{constructor(b,c,e,k){super();Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,
value:b});Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:e});Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:k})}path(b){b.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(b){G(b,{x:this.cpX,y:this.cpY});G(b,{x:this.toX,y:this.toY})}}class Za extends xa{constructor(b,c,e,k,q){super();Object.defineProperty(this,"color",{enumerable:!0,
configurable:!0,writable:!0,value:b});Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:e});Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:k});Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:q})}colorize(b,c){this.opacity&&(b.fillStyle=this.color);b.shadowColor=this.color;b.shadowBlur=this.blur;b.shadowOffsetX=
this.offsetX;b.shadowOffsetY=this.offsetY}}class ib extends xa{constructor(b,c,e,k,q){super();Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:e});Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:k});Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,
writable:!0,value:q})}path(b){b.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(b){G(b,{x:this.x,y:this.y});G(b,{x:this.width,y:this.height})}}class cb extends qa{constructor(){super(...arguments);Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:h.BlendMode.NORMAL});Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,
value:!1});Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear();this._operations.length=0}_pushOp(b){this._operations.push(b)}beginFill(b,c=1){this._fillAlpha=c;b?b instanceof h.Color?this._pushOp(new Da(b.toCSS(c))):(this.isMeasured=!0,this._pushOp(new Da(b))):this._pushOp(new Da("rgba(0, 0, 0, "+c+")"))}endFill(){this._pushOp(new va(this._hasShadows))}endStroke(){this._pushOp(new pa)}beginPath(){this._pushOp(new Ba)}lineStyle(b=
0,c,e=1,k){this._strokeAlpha=e;c?c instanceof h.Color?this._pushOp(new wa(b,c.toCSS(e),k)):this._pushOp(new wa(b,c,k)):this._pushOp(new wa(b,"rgba(0, 0, 0, "+e+")",k))}setLineDash(b){this._pushOp(new Ka(b?b:[]))}setLineDashOffset(b=0){this._pushOp(new O(b))}drawRect(b,c,e,k){this._pushOp(new ba(b,c,e,k))}drawCircle(b,c,e){this._pushOp(new ia(b,c,e))}drawEllipse(b,c,e,k){this._pushOp(new sa(b,c,e,k))}arc(b,c,e,k,q,B=!1){this._pushOp(new ya(b,c,e,k,q,B))}arcTo(b,c,e,k,q){this._pushOp(new Fa(b,c,e,k,
q))}lineTo(b,c){this._pushOp(new Aa(b,c))}moveTo(b,c){this._pushOp(new Na(b,c))}bezierCurveTo(b,c,e,k,q,B){this._pushOp(new Ya(b,c,e,k,q,B))}quadraticCurveTo(b,c,e,k){this._pushOp(new nb(b,c,e,k))}closePath(){this._pushOp(new eb)}shadow(b,c=0,e=0,k=0,q){this._hasShadows=!0;this._pushOp(new Za(q?b.toCSS(q):b.toCSS(this._fillAlpha||this._strokeAlpha),c,e,k))}image(b,c,e,k,q){this._pushOp(new ib(b,c,e,k,q))}svgPath(b){let c=0,e=0,k=null,q=null,B=null,V=null;const aa=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,
ha=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;for(var ca;null!==(ca=aa.exec(b));){var la=ca[1],ua=ca[2];const N=[];for(;null!==(ca=ha.exec(ua));)N.push(ca[1]);"S"!==la&&"s"!==la&&"C"!==la&&"c"!==la&&(q=k=null);"Q"!==la&&"q"!==la&&"T"!==la&&"t"!==la&&(V=B=null);switch(la){case "M":X(la,N.length,2);c=+N[0];e=+N[1];this.moveTo(c,e);for(ca=2;ca<N.length;ca+=2)c=+N[ca],e=+N[ca+1],this.lineTo(c,e);break;case "m":X(la,N.length,2);
c+=+N[0];e+=+N[1];this.moveTo(c,e);for(ca=2;ca<N.length;ca+=2)c+=+N[ca],e+=+N[ca+1],this.lineTo(c,e);break;case "L":X(la,N.length,2);for(ca=0;ca<N.length;ca+=2)c=+N[ca],e=+N[ca+1],this.lineTo(c,e);break;case "l":X(la,N.length,2);for(ca=0;ca<N.length;ca+=2)c+=+N[ca],e+=+N[ca+1],this.lineTo(c,e);break;case "H":E(la,N.length,1);for(ca=0;ca<N.length;++ca)c=+N[ca],this.lineTo(c,e);break;case "h":E(la,N.length,1);for(ca=0;ca<N.length;++ca)c+=+N[ca],this.lineTo(c,e);break;case "V":E(la,N.length,1);for(ca=
0;ca<N.length;++ca)e=+N[ca],this.lineTo(c,e);break;case "v":E(la,N.length,1);for(ca=0;ca<N.length;++ca)e+=+N[ca],this.lineTo(c,e);break;case "C":X(la,N.length,6);for(ca=0;ca<N.length;ca+=6)la=+N[ca],ua=+N[ca+1],k=+N[ca+2],q=+N[ca+3],c=+N[ca+4],e=+N[ca+5],this.bezierCurveTo(la,ua,k,q,c,e);break;case "c":X(la,N.length,6);for(ca=0;ca<N.length;ca+=6)la=+N[ca]+c,ua=+N[ca+1]+e,k=+N[ca+2]+c,q=+N[ca+3]+e,c+=+N[ca+4],e+=+N[ca+5],this.bezierCurveTo(la,ua,k,q,c,e);break;case "S":X(la,N.length,4);if(null===k||
null===q)k=c,q=e;for(ca=0;ca<N.length;ca+=4)la=2*c-k,ua=2*e-q,k=+N[ca],q=+N[ca+1],c=+N[ca+2],e=+N[ca+3],this.bezierCurveTo(la,ua,k,q,c,e);break;case "s":X(la,N.length,4);if(null===k||null===q)k=c,q=e;for(ca=0;ca<N.length;ca+=4)la=2*c-k,ua=2*e-q,k=+N[ca]+c,q=+N[ca+1]+e,c+=+N[ca+2],e+=+N[ca+3],this.bezierCurveTo(la,ua,k,q,c,e);break;case "Q":X(la,N.length,4);for(ca=0;ca<N.length;ca+=4)B=+N[ca],V=+N[ca+1],c=+N[ca+2],e=+N[ca+3],this.quadraticCurveTo(B,V,c,e);break;case "q":X(la,N.length,4);for(ca=0;ca<
N.length;ca+=4)B=+N[ca]+c,V=+N[ca+1]+e,c+=+N[ca+2],e+=+N[ca+3],this.quadraticCurveTo(B,V,c,e);break;case "T":X(la,N.length,2);if(null===B||null===V)B=c,V=e;for(ca=0;ca<N.length;ca+=2)B=2*c-B,V=2*e-V,c=+N[ca],e=+N[ca+1],this.quadraticCurveTo(B,V,c,e);break;case "t":X(la,N.length,2);if(null===B||null===V)B=c,V=e;for(ca=0;ca<N.length;ca+=2)B=2*c-B,V=2*e-V,c+=+N[ca],e+=+N[ca+1],this.quadraticCurveTo(B,V,c,e);break;case "A":case "a":ca="a"===la;v(N);X(la,N.length,7);for(la=0;la<N.length;la+=7){ua=+N[la+
5];let za=+N[la+6];ca&&(ua+=c,za+=e);ua=ja({px:c,py:e,rx:+N[la],ry:+N[la+1],xAxisRotation:+N[la+2],largeArcFlag:g(+N[la+3]),sweepFlag:g(+N[la+4]),cx:ua,cy:za});h.each(ua,oa=>{this.bezierCurveTo(oa.x1,oa.y1,oa.x2,oa.y2,oa.x,oa.y);c=oa.x;e=oa.y})}break;case "Z":case "z":R(la,N.length,0),this.closePath()}}}_runPath(b){b.beginPath();h.each(this._operations,c=>{c.path(b)})}_render(b){super._render(b);b=this._layer||b;const c=b.dirty,e=this._isInteractive();if(c||e){const k=b.context,q=this._renderer._ghostLayer.context;
c&&(k.globalCompositeOperation=this.blendMode,k.beginPath());let B;e&&(q.beginPath(),B=this._getColorId());h.each(this._operations,V=>{c&&(V.path(k),V.colorize(k,void 0));e&&(V.path(q),V.colorize(q,B))})}}renderDetached(b){if(this.visible){this._setMatrix();b.save();const c=this.mask;c&&(c._setMatrix(),c._transform(b,1),c._runPath(b),b.clip());b.globalAlpha=this.compoundAlpha*this.alpha;this._transform(b,1);this.filter&&(b.filter=this.filter);b.globalCompositeOperation=this.blendMode;b.beginPath();
h.each(this._operations,e=>{e.path(b);e.colorize(b,void 0)});b.restore()}}_addBounds(b){this.visible&&this.isMeasured&&h.each(this._operations,c=>{c.addBounds(b)})}}class hb extends qa{constructor(b,c,e){super(b);Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,
"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1});this.text=c;this.style=e}invalidateBounds(){super.invalidateBounds();this._textInfo=void 0}_shared(b){this.style.textAlign&&(b.textAlign=this.style.textAlign);this.style.direction&&(b.direction=this.style.direction);this.style.textBaseline&&
(b.textBaseline=this.style.textBaseline)}_prerender(b,c=!1,e=!1){super._render(b);const k=b.context,q=this._renderer._ghostLayer.context,B=this.style;e=this._getFontStyle(void 0,e);k.font=e;this._isInteractive()&&!c&&(q.font=e);B.fill&&(k.fillStyle=B.fill instanceof h.Color?B.fill.toCSS(void 0!=B.fillOpacity?B.fillOpacity:1):B.fill);B.shadowColor&&(b.context.shadowColor=B.shadowColor.toCSS(B.shadowOpacity||1));B.shadowBlur&&(b.context.shadowBlur=B.shadowBlur);B.shadowOffsetX&&(b.context.shadowOffsetX=
B.shadowOffsetX);B.shadowOffsetY&&(b.context.shadowOffsetY=B.shadowOffsetY);this._shared(k);this._isInteractive()&&!c&&(q.fillStyle=this._getColorId(),this._shared(q))}_getFontStyle(b,c=!1){const e=this.style;let k=[];b&&b.fontVariant?k.push(b.fontVariant):e.fontVariant&&k.push(e.fontVariant);c||(b&&b.fontWeight?k.push(b.fontWeight):e.fontWeight&&k.push(e.fontWeight));b&&b.fontStyle?k.push(b.fontStyle):e.fontStyle&&k.push(e.fontStyle);b&&b.fontSize?(h.isNumber(b.fontSize)&&(b.fontSize+="px"),k.push(b.fontSize)):
e.fontSize&&(h.isNumber(e.fontSize)&&(e.fontSize+="px"),k.push(e.fontSize));b&&b.fontFamily?k.push(b.fontFamily):e.fontFamily?k.push(e.fontFamily):k.length&&k.push("Arial");return k.join(" ")}_render(b){b=this._layer||b;this._textInfo||this._measure(b);if(this.textVisible){const c=this._isInteractive(),e=b.context,k=b.dirty,q=this._renderer._ghostLayer.context;e.save();q.save();this._prerender(b);h.each(this._textInfo,(B,V)=>{h.each(B.textChunks,(aa,ha)=>{aa.style&&(e.save(),q.save(),e.font=aa.style,
this._isInteractive()&&(q.font=aa.style));aa.fill&&(e.save(),e.fillStyle=aa.fill.toCSS());k&&e.fillText(aa.text,aa.offsetX,B.offsetY+aa.offsetY);if("underline"==aa.textDecoration||"line-through"==aa.textDecoration){let la=ha=1;var ca=aa.height;let ua=aa.offsetX;switch(this.style.textAlign){case "right":case "end":ua-=aa.width;break;case "center":ua-=aa.width/2}if(aa.style)switch(h.TextFormatter.getTextStyle(aa.style).fontWeight){case "bolder":case "bold":case "700":case "800":case "900":ha=2}ca&&
(la=ca/20);ca="line-through"==aa.textDecoration?ha+B.offsetY+aa.offsetY-aa.height/2:ha+1.5*la+B.offsetY+aa.offsetY;e.save();e.beginPath();aa.fill?e.strokeStyle=aa.fill.toCSS():this.style.fill&&this.style.fill instanceof h.Color&&(e.strokeStyle=this.style.fill.toCSS());e.lineWidth=ha*la;e.moveTo(ua,ca);e.lineTo(ua+aa.width,ca);e.stroke();e.restore()}c&&this.interactive&&q.fillText(aa.text,aa.offsetX,B.offsetY+aa.offsetY);aa.fill&&e.restore();aa.style&&(e.restore(),q.restore())})});e.restore();q.restore()}}_addBounds(b){if(this.visible&&
this.isMeasured){const c=this._measure(this.getLayer());G(b,{x:c.left,y:c.top});G(b,{x:c.right,y:c.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(b){const c=b.context,e=this._renderer._ghostLayer.context;var k="rtl"==this.style.direction;this._textInfo=[];const q=this.style.oversizedBehavior,B=this.style.maxWidth,V=h.isNumber(B)&&"truncate"==q,aa=h.isNumber(B)&&("wrap"==q||"wrap-no-break"==q);c.save();e.save();this._prerender(b,!0,this._ignoreFontWeight());b=this.text.toString().replace(/\r/g,
"").split(/\n/);let ha=!0,ca=0,la=0,ua=0,N;h.each(b,(za,oa)=>{let Ca;for(Ca=""==za?[{type:"value",text:""}]:h.TextFormatter.chunk(za,!1,this.style.ignoreFormatting);0<Ca.length;){let ma={offsetY:ua,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};za=this._measureText("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",c);ma.height=za.actualBoundingBoxAscent+za.actualBoundingBoxDescent;ma.ascent=za.actualBoundingBoxAscent;let La,Ea=this.style.textDecoration,Pa,Qa,Oa=!1,Ua=!0,Wa=
[],Sa;h.eachContinue$1(Ca,(Ga,Ta)=>{if("format"==Ga.type)if("[/]"==Ga.text)ha||(c.restore(),e.restore(),ha=!0),Qa=N=Pa=void 0,Ea=this.style.textDecoration,Sa=void 0,La=Ga.text;else{ha||(c.restore(),e.restore());var Ma=h.TextFormatter.getTextStyle(Ga.text),a=this._getFontStyle(Ma);c.save();e.save();N=c.font=a;La=Ga.text;Ma.textDecoration&&(Ea=Ma.textDecoration);Ma.fill&&(Pa=Ma.fill);Ma.width&&(Qa=h.toNumber(Ma.width));Ma.verticalAlign&&(Sa=Ma.verticalAlign);ha=!1;Ga=this._measureText("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",
c);Ma=Ga.actualBoundingBoxAscent+Ga.actualBoundingBoxDescent;Ma>ma.height&&(ma.height=Ma);Ga.actualBoundingBoxAscent>ma.ascent&&(ma.ascent=Ga.actualBoundingBoxAscent)}else if("value"==Ga.type&&!Oa){Ma=this._measureText(Ga.text,c);a=Ma.actualBoundingBoxLeft+Ma.actualBoundingBoxRight;if(V){Ta=Ua||this.style.breakWords||!1;var d=this.style.ellipsis||"",f=this._measureText(d,c);f=f.actualBoundingBoxLeft+f.actualBoundingBoxRight;ma.width+a>B&&(Ga.text=this._truncateText(c,Ga.text,B-ma.width-f,Ta),Ga.text+=
d,Oa=!0)}else if(aa&&ma.width+a>B){d=this._truncateText(c,Ga.text,B-ma.width,!1,Ua&&"wrap-no-break"!=this.style.oversizedBehavior);if(""==d)return this.textVisible=!0,!1;Wa=Ca.slice(Ta+1);h.trim(d)!=h.trim(Ga.text)&&(Wa.unshift({type:"value",text:Ga.text.substr(d.length)}),La&&Wa.unshift({type:"format",text:La}));Ga.text=h.trim(d);Ca=[];Oa=!0}d=Ta=1;if(N&&Qa&&Qa>a){a/=Qa;switch(this.style.textAlign){case "right":case "end":Ta=a;break;case "center":d=Ta=a;break;default:d=a}a=Qa}f=Ma.actualBoundingBoxAscent+
Ma.actualBoundingBoxDescent;f>ma.height&&(ma.height=f);Ma.actualBoundingBoxAscent>ma.ascent&&(ma.ascent=Ma.actualBoundingBoxAscent);ma.width+=a;ma.left+=Ma.actualBoundingBoxLeft/Ta;ma.right+=Ma.actualBoundingBoxRight/d;ma.textChunks.push({style:N,fill:Pa,text:Ga.text,width:a,height:f,left:Ma.actualBoundingBoxLeft,right:Ma.actualBoundingBoxRight,ascent:Ma.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:Ea,verticalAlign:Sa});Ua=!1}return!0});this.style.lineHeight instanceof h.Percent?(ma.height*=
this.style.lineHeight.value,ma.ascent*=this.style.lineHeight.value):(ma.height*=this.style.lineHeight||1.2,ma.ascent*=this.style.lineHeight||1.2);ca<ma.left&&(ca=ma.left);la<ma.right&&(la=ma.right);this._textInfo.push(ma);ua+=ma.height;Ca=Wa||[]}});ha||(c.restore(),e.restore());h.each(this._textInfo,(za,oa)=>{let Ca=0;h.each(za.textChunks,ma=>{ma.offsetX=Ca+ma.left-za.left;ma.offsetY+=za.height-za.height*(this.style.baselineRatio||.19);Ca+=ma.width;if(ma.verticalAlign)switch(ma.verticalAlign){case "super":ma.offsetY-=
za.height/2-ma.height/2;break;case "sub":ma.offsetY+=ma.height/2}})});k={left:k?-la:-ca,top:0,right:k?ca:la,bottom:ua};if("none"!==q)if(b=this._fitRatio(k),1>b)if("fit"==q)h.isNumber(this.style.minScale)&&b<this.style.minScale?(this.textVisible=!1,k.left=0,k.top=0,k.right=0,k.bottom=0):(this._originalScale&&1!=this._originalScale||(this._originalScale=this.scale),this.scale=b,this.textVisible=!0);else if("hide"==q)this.textVisible=!1,k.left=0,k.top=0,k.right=0,k.bottom=0;else{switch(this.style.textAlign){case "right":case "end":k.left=
-B;k.right=0;break;case "center":k.left=-B/2;k.right=B/2;break;default:k.left=0,k.right=B}this.scale=this._originalScale||1;this._originalScale=void 0;this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0;c.restore();e.restore();return k}_fitRatio(b){const c=this.style.maxWidth,e=this.style.maxHeight;return h.isNumber(c)||h.isNumber(e)?Math.min(c/(b.right-b.left)||1,e/(b.bottom-b.top)||1):1}_truncateText(b,c,e,k=!1,q=!0){do{if(k)c=c.slice(0,-1);
else{var B=c.replace(/[^,;:!?\\\/\s]+[,;:!?\\\/\s]*$/g,"");if(""==B&&q)k=!0;else if(""==B)break;else c=B}B=this._measureText(c,b);B=B.actualBoundingBoxLeft+B.actualBoundingBoxRight}while(B>e&&""!=c);return c}_measureText(b,c){c=c.measureText(b);var e={};null==c.actualBoundingBoxAscent?(e=document.createElement("div"),e.innerText=b,e.style.visibility="hidden",e.style.position="absolute",e.style.top="-1000000px;",e.style.fontFamily=this.style.fontFamily||"",e.style.fontSize=this.style.fontSize+"",document.body.appendChild(e),
b=e.getBoundingClientRect(),document.body.removeChild(e),b=b.height,e=c.width,e={actualBoundingBoxAscent:b,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:e,fontBoundingBoxAscent:b,fontBoundingBoxDescent:0,width:e}):e={actualBoundingBoxAscent:c.actualBoundingBoxAscent,actualBoundingBoxDescent:c.actualBoundingBoxDescent,actualBoundingBoxLeft:c.actualBoundingBoxLeft,actualBoundingBoxRight:c.actualBoundingBoxRight,fontBoundingBoxAscent:c.actualBoundingBoxAscent,fontBoundingBoxDescent:c.actualBoundingBoxDescent,
width:c.width};c=c.width;switch(this.style.textAlign){case "right":case "end":e.actualBoundingBoxLeft=c;e.actualBoundingBoxRight=0;break;case "center":e.actualBoundingBoxLeft=c/2;e.actualBoundingBoxRight=c/2;break;default:e.actualBoundingBoxLeft=0,e.actualBoundingBoxRight=c}return e}}class jb{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fontVariant",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:h.percent(120)});Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19});Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"textBaseline",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"});Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"\u2026"});Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class ob extends hb{constructor(){super(...arguments);Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"});Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"startAngle",
{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"});Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(b){switch(this.textType){case "circular":this._renderCircular(b);
break;default:super._render(b)}}_renderCircular(b){if(this.textVisible){b=this._layer||b;this._prerender(b);const c=this._isInteractive(),e=b.context,k=b.dirty,q=this._renderer._ghostLayer.context;e.save();c&&q.save();this._textInfo||this._measure(b);let B=this.radius||0,V=this.startAngle||0,aa=0;b=this.orientation;let ha="auto"==b?"auto":"inward"==b;const ca=this.inside,la=this.style.textAlign||"left",ua=this.kerning||0;let N="left"==la?1:-1;const za=!this._textReversed;if("auto"==ha){let oa=0;b=
0;h.each(this._textInfo,(Ca,ma)=>{Ca=V+Ca.width/(B-Ca.height)/2*-N;Ca>oa&&(oa=Ca)});b="left"==la?(oa+aa/2)*h.DEGREES:"right"==la?(oa-aa/2)*h.DEGREES:V*h.DEGREES;b=h.normalizeAngle(b);ha=270<=b||90>=b}1==ha&&za&&(this._textInfo.reverse(),this._textReversed=!0);h.each(this._textInfo,(oa,Ca)=>{const ma=oa.height;ca||(B+=ma);(-1==N&&ha||1==N&&!ha)&&za&&oa.textChunks.reverse();Ca=V;aa=0;"center"==la&&(Ca+=oa.width/(B-ma)/2*-N,aa=Ca-V);Ca+=Math.PI*(ha?0:1);e.save();c&&q.save();e.rotate(Ca);c&&q.rotate(Ca);
let La=0;h.each(oa.textChunks,(Ea,Pa)=>{Pa=Ea.text;const Qa=Ea.width;La=Qa/2/(B-ma)*N;e.rotate(La);c&&q.rotate(La);Ea.style&&(e.save(),q.save(),e.font=Ea.style,c&&(q.font=Ea.style));Ea.fill&&(e.save(),e.fillStyle=Ea.fill.toCSS());e.textBaseline="middle";e.textAlign="center";c&&(q.textBaseline="middle",q.textAlign="center");k&&e.fillText(Pa,0,(ha?1:-1)*(0-B+ma/2));c&&q.fillText(Pa,0,(ha?1:-1)*(0-B+ma/2));Ea.fill&&e.restore();Ea.style&&(e.restore(),q.restore());La=(Qa/2+ua)/(B-ma)*N;e.rotate(La);c&&
q.rotate(La)});e.restore();c&&q.restore();ca&&(B-=ma)});e.restore();c&&q.restore()}}_measure(b){switch(this.textType){case "circular":return this._measureCircular(b);default:return super._measure(b)}}_measureCircular(b){const c=b.context,e=this._renderer._ghostLayer.context,k="rtl"==this.style.direction,q=this.style.oversizedBehavior,B=this.style.maxWidth,V=h.isNumber(B)&&"truncate"==q,aa=this.style.ellipsis||"";let ha;this.textVisible=!0;this._textInfo=[];this._textReversed=!1;c.save();e.save();
this._prerender(b,!0);b=this.text.toString().replace(/\r/g,"").split(/\n/);let ca=!0,la=0,ua=0;h.each(b,(N,za)=>{N=h.TextFormatter.chunk(N,!1,this.style.ignoreFormatting);let oa={offsetY:ua,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]},Ca,ma,La;h.each(N,(Ea,Pa)=>{if("format"==Ea.type)"[/]"==Ea.text?(ca||(c.restore(),e.restore(),ca=!0),La=Ca=ma=void 0):(Ea=h.TextFormatter.getTextStyle(Ea.text),Pa=this._getFontStyle(Ea),c.save(),e.save(),Ca=c.font=Pa,Ea.fill&&(ma=Ea.fill),Ea.width&&(La=h.toNumber(Ea.width)),
ca=!1),V&&(ha=this._measureText(aa,c));else if("value"==Ea.type)for(Ea=Ea.text.match(/./gu)||[],k&&Ea.reverse(),Pa=0;Pa<Ea.length;Pa++){var Qa=Ea[Pa];const Oa=this._measureText(Qa,c);let Ua=Oa.width;Ca&&La&&La>Ua&&(Ua=La);const Wa=Oa.actualBoundingBoxAscent+Oa.actualBoundingBoxDescent;Wa>oa.height&&(oa.height=Wa);Oa.actualBoundingBoxAscent>oa.ascent&&(oa.ascent=Oa.actualBoundingBoxAscent);oa.width+=Ua;oa.left+=Oa.actualBoundingBoxLeft;oa.right+=Oa.actualBoundingBoxRight;oa.textChunks.push({style:Ca,
fill:ma,text:Qa,width:Ua,height:Wa+Oa.actualBoundingBoxDescent,left:Oa.actualBoundingBoxLeft,right:Oa.actualBoundingBoxRight,ascent:Oa.actualBoundingBoxAscent,offsetX:0,offsetY:Wa,textDecoration:void 0});la+=Ua;if(V&&(ha||(ha=this._measureText(aa,c)),Qa=ha.actualBoundingBoxLeft+ha.actualBoundingBoxRight,la+=Qa,la+Qa>B)){1==oa.textChunks.length?this.textVisible=!1:(oa.width+=Qa,oa.left+=ha.actualBoundingBoxLeft,oa.right+=ha.actualBoundingBoxRight,oa.textChunks.push({style:Ca,fill:ma,text:aa,width:Qa,
height:Wa+ha.actualBoundingBoxDescent,left:ha.actualBoundingBoxLeft,right:ha.actualBoundingBoxRight,ascent:ha.actualBoundingBoxAscent,offsetX:0,offsetY:Wa,textDecoration:void 0}));break}if(k)break}});oa.height=this.style.lineHeight instanceof h.Percent?oa.height*this.style.lineHeight.value:oa.height*(this.style.lineHeight||1.2);this._textInfo.push(oa);ua+=oa.height});ca||(c.restore(),e.restore());"hide"==q&&la>B&&(this.textVisible=!1);h.each(this._textInfo,N=>{h.each(N.textChunks,za=>{za.offsetY+=
Math.round((N.height-za.height+(N.ascent-za.ascent))/2)})});c.restore();e.restore();return{left:0,top:0,right:0,bottom:0}}}class pb extends qa{constructor(b,c){super(b);Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"tainted",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.image=c}_dispose(){super._dispose();this._imageMask&&y(this._imageMask)}getLocalBounds(){if(!this._localBounds){let b=0,c=0;this.width&&(b=this.width);this.height&&(c=this.height);this._localBounds={left:0,top:0,right:b,bottom:c};this._addBounds(this._localBounds)}return this._localBounds}_render(b){super._render(b);this.image&&(b=this._layer||b,void 0===this.tainted&&
(this.tainted=D(this.image),b.tainted=!0),this.tainted&&this._renderer._omitTainted||(b.dirty&&(this.shadowColor&&(b.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(b.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(b.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(b.context.shadowOffsetY=this.shadowOffsetY),b.context.drawImage(this.image,0,0,this.width||this.image.naturalWidth,this.height||this.image.naturalHeight)),this.interactive&&this._isInteractive()&&
(b=this._getMask(this.image),this._renderer._ghostLayer.context.drawImage(b,0,0))))}clear(){super.clear();this._imageMask=this.image=void 0}_getMask(b){if(void 0===this._imageMask){const c=this.width||b.naturalWidth,e=this.height||b.naturalHeight,k=document.createElement("canvas");k.width=c;k.height=e;const q=k.getContext("2d");q.imageSmoothingEnabled=!1;q.fillStyle=this._getColorId();q.fillRect(0,0,c,e);D(b)||(q.globalCompositeOperation="destination-in",q.drawImage(b,0,0,c,e));this._imageMask=k}return this._imageMask}}
class Ra{constructor(b,c,e,k){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:b});Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:c});Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:e});Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:k});Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0});h.supports("touchevents")&&b instanceof Touch?this.id=b.identifier:this.id=null}}class kb extends h.ArrayDisposer{constructor(b){super();Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")});Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")});
Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)});Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new lb});Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")});
Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")});Object.defineProperty(this,"_domWidth",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_domHeight",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_canvasWidth",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_canvasHeight",{enumerable:!0,configurable:!0,writable:!0,value:0});
Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,
"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set});Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_mousedown",{enumerable:!0,
configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3E3});Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});this.resolution=null==b?window.devicePixelRatio:b;this.view.style.position="absolute";this.view.appendChild(this._layerDom);this._disposers.push(new h.Disposer(()=>{h.each$1(this._events,(c,e)=>{e.disposer.dispose()});h.each(this.layers,c=>{y(c.view);c.exportableView&&y(c.exportableView)});y(this._ghostLayer.view);y(this._patternCanvas)}));this._disposers.push(h.onZoom(()=>{null==b&&(this.resolution=window.devicePixelRatio)}));if(h.supports("touchevents")){const c=
e=>{0!==this._dragging.length&&h.eachContinue$1(this._dragging,k=>k.value.shouldCancelTouch()?(e.preventDefault(),!1):!0);this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(h.addEventListener(window,"touchstart",c,{passive:!1}));this._disposers.push(h.addEventListener(this.view,"touchstart",c,{passive:!1}));this._disposers.push(h.addEventListener(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0}));this._disposers.push(h.addEventListener(window,
"click",e=>{this._touchActive=!1},{passive:!0}));this._disposers.push(h.addEventListener(this.view,"click",e=>{window.setTimeout(()=>{this._touchActive=!0;this._delayTouchDeactivate()},100)},{passive:!0}))}h.supports("wheelevents")&&this._disposers.push(h.addEventListener(this.view,"wheel",c=>{let e=!1;this._hovering.forEach(k=>{if(k.wheelable)return e=!0,!1});e&&c.preventDefault()},{passive:!1}))}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout);0<this.tapToActivateTimeout&&
(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(b){b?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(b,c,e,k){return this.defaultLayer.context.createLinearGradient(b,c,e,k)}createRadialGradient(b,c,e,k,q,B){return this.defaultLayer.context.createRadialGradient(b,
c,e,k,q,B)}createPattern(b,c,e,k,q){this._patternCanvas.width=k;this._patternCanvas.height=q;this._patternContext.clearRect(0,0,k,q);c.renderDetached(this._patternContext);b.renderDetached(this._patternContext);return this._patternContext.createPattern(this._patternCanvas,e)}makeContainer(){return new ra(this)}makeGraphics(){return new cb(this)}makeText(b,c){return new hb(this,b,c)}makeTextStyle(){return new jb}makeRadialText(b,c){return new ob(this,b,c)}makePicture(b){return new pb(this,b)}resizeLayer(b){b.resize(this._canvasWidth,
this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resize(b,c,e,k){this._canvasWidth=b;this._canvasHeight=c;this._domWidth=e;this._domHeight=k;h.each(this.layers,q=>{q&&(q.dirty=!0,this.resizeLayer(q))});this.resizeGhost();this.view.style.width=e+"px";this.view.style.height=k+"px"}createDetachedLayer(b=!1){const c=document.createElement("canvas");b=c.getContext("2d",
{willReadFrequently:b});b=new Va(c,b);c.style.position="absolute";c.style.top="0px";c.style.left="0px";return b}getLayerByOrder(b){const c=this.layers,e=c.length;for(let k=0;k<e;k++){const q=c[k];if(q.order==b)return q}}getLayer(b,c=!0){var e=this.getLayerByOrder(b);if(e)return e;e=this.createDetachedLayer(99==b);e.order=b;e.visible=c;e.visible&&this.resizeLayer(e);b=this.layers;b.push(e);b.sort((B,V)=>B.order>V.order?1:B.order<V.order?-1:0);c=b.length;var k=h.indexOf(b,e);let q;for(k+=1;k<c;k++)if(b[k].visible){q=
b[k];break}e.visible&&(void 0===q?this._layerDom.appendChild(e.view):this._layerDom.insertBefore(e.view,q.view));return e}render(b){this._dirtyLayers.length=0;h.each(this.layers,c=>{c&&c.dirty&&c.visible&&(this._dirtyLayers.push(c),c.clear())});this._ghostLayer.clear();b.render(this.defaultLayer);this._ghostLayer.context.restore();h.each(this.layers,c=>{c&&(c=c.context,c.beginPath(),c.moveTo(0,0),c.stroke())});h.each(this._dirtyLayers,c=>{c.context.restore();c.dirty=!1});if(this._hovering.size&&this._lastPointerMoveEvent){const {events:c,
target:e,native:k}=this._lastPointerMoveEvent;h.each(c,q=>{this._dispatchGlobalMousemove(q,e,k)})}}paintId(b){var c=++this._colorId;const e=[0,0,0];for(let k=0;24>k;k++)e[k%3]<<=1,e[k%3]|=c&1,c>>=1;c=h.Color.fromHex((e[2]|0)+(e[1]<<8)+(e[0]<<16)).toCSS();this._colorMap[c]=b;return c}_removeObject(b){void 0!==b._colorId&&delete this._colorMap[b._colorId]}_adjustBoundingBox(b){const c=this._ghostLayer.margin;return new DOMRect(b.left-c.left,b.top-c.top,b.width+c.left+c.right,b.height+c.top+c.bottom)}getEvent(b,
c=!0){const e=this.view.getBoundingClientRect(),k={x:b.clientX||0,y:b.clientY||0};return new Ra(b,k,{x:k.x-(c?e.left:0),y:k.y-(c?e.top:0)},this._adjustBoundingBox(e))}_getHitTarget(b,c,e){if(!(0===c.width||0===c.height||b.x<c.left||b.x>c.right||b.y<c.top||b.y>c.bottom)&&e&&this._layerDom.contains(e)){b=this._ghostLayer.getImageData(b,c);if(0===b.data[0]&&0===b.data[1]&&0===b.data[2])return!1;b=h.Color.fromRGB(b.data[0],b.data[1],b.data[2]).toCSS();return this._colorMap[b]}}_withEvents(b,c){const e=
this._events[b];if(void 0!==e){e.dispatching=!0;try{c(e)}finally{e.dispatching=!1,e.cleanup&&(e.cleanup=!1,h.keepIf(e.callbacks,k=>!k.disposed),0===e.callbacks.length&&(e.disposer.dispose(),delete this._events[b]))}}}_dispatchEventAll(b,c){this.interactionsEnabled&&this._withEvents(b,e=>{h.each(e.callbacks,k=>{k.disposed||k.callback.call(k.context,c)})})}_dispatchEvent(b,c,e){if(!this.interactionsEnabled)return!1;let k=!1;this._withEvents(b,q=>{h.each(q.callbacks,B=>{B.disposed||B.object!==c||(B.callback.call(B.context,
e),k=!0)})});return k}_dispatchMousedown(b,c){const e=b.button;if(0==e||2==e||1==e||void 0===e){var k=this.getEvent(b);if(b=this._getHitTarget(k.originalPoint,k.bbox,c)){const q=k.id;let B=!1;A(b,V=>{const aa={id:q,value:V};this._mousedown.push(aa);!B&&this._dispatchEvent("pointerdown",V,k)&&(B=!0,this._dragging.some(ha=>ha.value===V&&ha.id===q)||this._dragging.push(aa));return!0})}}}_dispatchGlobalMousemove(b,c,e){const k=this.getEvent(b),q=this._getHitTarget(k.originalPoint,k.bbox,c);k.native=e;
q?(this._hovering.forEach(B=>{B.contains(q)||(this._hovering.delete(B),B.cursorOverStyle&&h.setStyle(document.body,"cursor",B._replacedCursorStyle),this._dispatchEvent("pointerout",B,k))}),k.native&&A(q,B=>{this._hovering.has(B)||(this._hovering.add(B),B.cursorOverStyle&&(B._replacedCursorStyle=h.getStyle(document.body,"cursor"),h.setStyle(document.body,"cursor",B.cursorOverStyle)),this._dispatchEvent("pointerover",B,k));return!0})):(this._hovering.forEach(B=>{B.cursorOverStyle&&h.setStyle(document.body,
"cursor",B._replacedCursorStyle);this._dispatchEvent("pointerout",B,k)}),this._hovering.clear());this._dispatchEventAll("globalpointermove",k)}_dispatchGlobalMouseup(b,c){b=this.getEvent(b);b.native=c;this._dispatchEventAll("globalpointerup",b)}_dispatchDragMove(b){if(0!==this._dragging.length){const c=this.getEvent(b),e=c.id;this._dragging.forEach(k=>{k.id===e&&this._dispatchEvent("pointermove",k.value,c)})}}_dispatchDragEnd(b,c){const e=b.button;let k;if(0==e||void 0===e)k="click";else if(2==e)k=
"rightclick";else if(1==e)k="middleclick";else return;const q=this.getEvent(b),B=q.id;if(0!==this._mousedown.length){const V=this._getHitTarget(q.originalPoint,q.bbox,c);V&&this._mousedown.forEach(aa=>{aa.id===B&&aa.value.contains(V)&&this._dispatchEvent(k,aa.value,q)});this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach(V=>{V.id===B&&this._dispatchEvent("pointerup",V.value,q)}),this._dragging.length=0)}_dispatchDoubleClick(b,c){const e=this.getEvent(b);(b=this._getHitTarget(e.originalPoint,
e.bbox,c))&&A(b,k=>this._dispatchEvent("dblclick",k,e)?!1:!0)}_dispatchWheel(b,c){const e=this.getEvent(b);(b=this._getHitTarget(e.originalPoint,e.bbox,c))&&A(b,k=>this._dispatchEvent("wheel",k,e)?!1:!0)}_makeSharedEvent(b,c){if(void 0===this._listeners[b]){const e=c();this._listeners[b]=new h.CounterDisposer(()=>{delete this._listeners[b];e.dispose()})}return this._listeners[b].increment()}_onPointerEvent(b,c){function e(){q=null;k=!1}let k=!1,q=null;return new h.MultiDisposer([new h.Disposer(()=>
{null!==q&&clearTimeout(q);e()}),h.addEventListener(this.view,h.getRendererEvent(b),B=>{k=!0;null!==q&&clearTimeout(q);q=window.setTimeout(e,0)}),C(window,b,(B,V)=>{null!==q&&(clearTimeout(q),q=null);c(B,V,k);k=!1})])}_initEvent(b){switch(b){case "globalpointermove":case "pointerover":case "pointerout":return this._makeSharedEvent("pointermove",()=>{const c=(e,k,q)=>{this._lastPointerMoveEvent={events:e,target:k,native:q};h.each(e,B=>{this._dispatchGlobalMousemove(B,k,q)})};return new h.MultiDisposer([this._onPointerEvent("pointerdown",
c),this._onPointerEvent("pointermove",c)])});case "globalpointerup":return this._makeSharedEvent("pointerup",()=>{const c=this._onPointerEvent("pointerup",(k,q,B)=>{h.each(k,V=>{this._dispatchGlobalMouseup(V,B)});this._lastPointerMoveEvent={events:k,target:q,native:B}}),e=this._onPointerEvent("pointercancel",(k,q,B)=>{h.each(k,V=>{this._dispatchGlobalMouseup(V,B)});this._lastPointerMoveEvent={events:k,target:q,native:B}});return new h.Disposer(()=>{c.dispose();e.dispose()})});case "click":case "rightclick":case "middleclick":case "pointerdown":case "pointermove":case "pointerup":return this._makeSharedEvent("pointerdown",
()=>{const c=this._onPointerEvent("pointerdown",(B,V)=>{h.each(B,aa=>{this._dispatchMousedown(aa,V)})}),e=this._onPointerEvent("pointermove",B=>{h.each(B,V=>{this._dispatchDragMove(V)})}),k=this._onPointerEvent("pointerup",(B,V)=>{h.each(B,aa=>{this._dispatchDragEnd(aa,V)})}),q=this._onPointerEvent("pointercancel",(B,V)=>{h.each(B,aa=>{this._dispatchDragEnd(aa,V)})});return new h.Disposer(()=>{c.dispose();e.dispose();k.dispose();q.dispose()})});case "dblclick":return this._makeSharedEvent("dblclick",
()=>this._onPointerEvent("dblclick",(c,e)=>{h.each(c,k=>{this._dispatchDoubleClick(k,e)})}));case "wheel":return this._makeSharedEvent("wheel",()=>h.addEventListener(window,h.getRendererEvent("wheel"),c=>{this._dispatchWheel(c,h.getEventTarget(c))},{passive:!1}))}}_addEvent(b,c,e,k){let q=this._events[c];void 0===q&&(q=this._events[c]={disposer:this._initEvent(c),callbacks:[],dispatching:!1,cleanup:!1});const B={object:b,context:k,callback:e,disposed:!1};q.callbacks.push(B);return new h.Disposer(()=>
{B.disposed=!0;q.dispatching?q.cleanup=!0:(h.removeFirst(q.callbacks,B),0===q.callbacks.length&&(q.disposer.dispose(),delete this._events[c]))})}getCanvas(b,c){this.render(b);c||(c={});let e=this.resolution,k=Math.floor(this._canvasWidth*this.resolution),q=Math.floor(this._canvasHeight*this.resolution);if(c.minWidth&&c.minWidth>k){var B=c.minWidth/k;B>e&&(e=B*this.resolution)}c.minHeight&&c.minHeight>q&&(B=c.minHeight/q,B>e&&(e=B*this.resolution));c.maxWidth&&c.maxWidth<k&&(B=c.maxWidth/k,B<e&&(e=
B*this.resolution));c.maxHeight&&c.maxHeight>q&&(B=c.maxHeight/q,B<e&&(e=B*this.resolution));c.maintainPixelRatio&&(e/=this.resolution);const V=[];let aa=!1;c=document.createElement("canvas");e!=this.resolution&&(aa=!0,k=k*e/this.resolution,q=q*e/this.resolution);c.width=k;c.height=q;c.style.position="fixed";c.style.top="-10000px";this.view.appendChild(c);V.push(c);const ha=c.getContext("2d");let ca=0,la=0,ua=!1;h.each(this.layers,N=>{if(N&&N.visible&&(N.tainted||aa)){ua=!0;N.exportableView=N.view;
N.exportableContext=N.context;N.view=document.createElement("canvas");N.view.style.position="fixed";N.view.style.top="-10000px";this.view.appendChild(N.view);V.push(N.view);let za=0,oa=0;N.margin&&(za+=N.margin.left||0+N.margin.right||0,oa+=N.margin.top||0+N.margin.bottom||0);N.view.width=k+za;N.view.height=q+oa;N.context=N.view.getContext("2d");N.dirty=!0;N.scale=e}});ua&&(this._omitTainted=!0,this.render(b),this._omitTainted=!1);h.each(this.layers,N=>{if(N&&N.visible){let za=0,oa=0;N.margin&&(za=
-(N.margin.left||0)*this.resolution,oa=-(N.margin.top||0)*this.resolution);ha.drawImage(N.view,za,oa);N.exportableView&&(N.view=N.exportableView,N.exportableView=void 0);N.exportableContext&&(N.context=N.exportableContext,N.exportableContext=void 0);ca<N.view.clientWidth&&(ca=N.view.clientWidth);la<N.view.clientHeight&&(la=N.view.clientHeight);N.scale=void 0}});c.style.width=ca+"px";c.style.height=la+"px";h.each(V,N=>{N.style.position="";N.style.top="";this.view.removeChild(N)});return c}}class lb{constructor(){Object.defineProperty(this,
"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}});Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0});this.view=document.createElement("canvas");
this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0});this.context.imageSmoothingEnabled=!1;this.view.style.position="absolute";this.view.style.top="0px";this.view.style.left="0px"}resize(b,c,e,k,q){b+=this.margin.left+this.margin.right;c+=this.margin.top+this.margin.bottom;e+=this.margin.left+this.margin.right;k+=this.margin.top+this.margin.bottom;this.view.style.left=-this.margin.left+"px";this.view.style.top=-this.margin.top+"px";this._width=Math.floor(b*q);this._height=Math.floor(c*
q);this.view.width=this._width;this.view.style.width=e+"px";this.view.height=this._height;this.view.style.height=k+"px"}getImageData(b,c){return this.context.getImageData(Math.round((b.x-c.left)/c.width*this._width),Math.round((b.y-c.top)/c.height*this._height),1,1)}setMargin(b){this.margin.left=0;this.margin.right=0;this.margin.top=0;this.margin.bottom=0;h.each(b,c=>{c.margin&&(this.margin.left=Math.max(this.margin.left,c.margin.left),this.margin.right=Math.max(this.margin.right,c.margin.right),
this.margin.top=Math.max(this.margin.top,c.margin.top),this.margin.bottom=Math.max(this.margin.bottom,c.margin.bottom))})}clear(){this.context.save();this.context.fillStyle="#000";this.context.fillRect(0,0,this._width,this._height)}}class Va{constructor(b,c){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,
writable:!0,value:!0});Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_height",{enumerable:!0,
configurable:!0,writable:!0,value:0});this.view=b;this.context=c}resize(b,c,e,k,q){null!=this.width&&(e=b=this.width);null!=this.height&&(k=c=this.height);this.margin?(b+=this.margin.left+this.margin.right,c+=this.margin.top+this.margin.bottom,e+=this.margin.left+this.margin.right,k+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px");this._width=Math.floor(b*q);this._height=
Math.floor(c*q);this.view.width=this._width;this.view.style.width=e+"px";this.view.height=this._height;this.view.style.height=k+"px"}clear(){this.context.save();this.context.clearRect(0,0,this._width,this._height)}}class fb{constructor(b,c={},e){Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}});
Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null});Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new h.EventDispatcher});Object.defineProperty(this,
"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null});Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"tooltipContainer",
{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:P.new(this,{})});Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:S});Object.defineProperty(this,"utc",{enumerable:!0,
configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:r.new(this,{})});Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:m.new(this,{})});Object.defineProperty(this,"durationFormatter",{enumerable:!0,
configurable:!0,writable:!0,value:J.new(this,{})});Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,
configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,
writable:!0,value:h.VerticalLayout.new(this,{})});Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:h.HorizontalLayout.new(this,{})});Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:h.GridLayout.new(this,{})});Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,
"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""});Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_htmlElementContainer",
{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]});if(!e)throw Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=c;0==c.accessible&&(this._a11yD=!0);null==c.useSafeResolution&&(c.useSafeResolution=!0);let k;c.useSafeResolution&&(k=h.getSafeResolution());this._renderer=new kb(k);let q;q=b instanceof HTMLElement?b:document.getElementById(b);h.each(h.registry.rootElements,
B=>{if(B.dom===q)throw Error("You cannot have multiple Roots on the same DOM node");});this.interfaceColors=t.new(this,{});if(null===q)throw Error("Could not find HTML element with id `"+b+"`");this.dom=q;b=document.createElement("div");b.style.position="relative";b.style.height="100%";q.appendChild(b);if(c=c.tooltipContainerBounds)this._tooltipContainerSettings=c;this._inner=b;this._updateComputedStyles();h.registry.rootElements.push(this)}static new(b,c){b=new fb(b,c,!0);b._init();return b}moveDOM(b){if(b=
b instanceof HTMLElement?b:document.getElementById(b)){for(;0<this.dom.childNodes.length;)b.appendChild(this.dom.childNodes[0]);this.dom=b;this._initResizeSensor();this.resize()}}_handleLogo(){if(this._logo){const b=this.dom.offsetHeight;150>=this.dom.offsetWidth||60>=b?this._logo.hide():this._logo.show()}}_showBranding(){if(!this._logo){const b=this.tooltipContainer.children.push(h.Container.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,
paddingBottom:9,paddingLeft:9,scale:.6,y:h.percent(100),centerY:h.p100,tooltipText:"Created using amCharts 5",tooltipX:h.p100,cursorOverStyle:"pointer",background:h.Rectangle.new(this,{fill:h.color(4671320),fillOpacity:0,tooltipY:5})})),c=H.Tooltip.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});c.label.setAll({fontSize:12});c.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3});
b.set("tooltip",c);b.events.on("click",()=>{window.open("https://www.amcharts.com/","_blank")});b.states.create("hover",{});b.children.push(h.Graphics.new(this,{stroke:h.color(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:h.color(3976191)});b.children.push(h.Graphics.new(this,{stroke:h.color(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",
{stroke:h.color(4671320)});this._logo=b;this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(b){return this._settings.calculateSize?this._settings.calculateSize(b):{width:b.width,height:b.height}}_init(){const b=this._renderer;var c=this._getRealSize(),e=this._getCalculatedSize(c),k=Math.floor(e.width);e=Math.floor(e.height);var q=Math.floor(c.width);c=Math.floor(c.height);const B=h.Container.new(this,{visible:!0,width:q,height:c});this._rootContainer=B;this._rootContainer._defaultThemes.push(K.DefaultTheme.new(this));
this.container=B.children.push(h.Container.new(this,{visible:!0,width:h.p100,height:h.p100}));b.resize(q,c,k,e);this._inner.appendChild(b.view);this._initResizeSensor();this._htmlElementContainer=q=document.createElement("div");q.className="am5-html-container";q.style.position="absolute";q.style.pointerEvents="none";this._tooltipContainerSettings||(q.style.overflow="hidden");this._inner.appendChild(q);!0!==this._a11yD&&(q=document.createElement("div"),q.className="am5-reader-container",q.setAttribute("role",
"alert"),q.style.position="absolute",q.style.width="1px",q.style.height="1px",q.style.overflow="hidden",q.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=q,this._inner.appendChild(this._readerAlertElement),q=document.createElement("div"),q.className="am5-focus-container",q.style.position="absolute",q.style.pointerEvents="none",q.style.top="0px",q.style.left="0px",q.style.overflow="hidden",q.style.width=k+"px",q.style.height=e+"px",q.setAttribute("role","application"),h.setInteractive(q,
!1),this._focusElementContainer=q,this._inner.appendChild(this._focusElementContainer),this._tooltipElementContainer=k=document.createElement("div"),k.className="am5-tooltip-container",this._inner.appendChild(k),h.supports("keyboardevents")&&(this._disposers.push(h.addEventListener(window,"keydown",V=>{16==V.keyCode?this._isShift=!0:9==V.keyCode&&(this._isShift=V.shiftKey)})),this._disposers.push(h.addEventListener(window,"keyup",V=>{16==V.keyCode&&(this._isShift=!1)})),this._disposers.push(h.addEventListener(q,
"keydown",V=>{const aa=this._focusedSprite;if(aa){27==V.keyCode&&(h.blur(),this._focusedSprite=void 0);var ha=0;let ca=0;switch(V.keyCode){case 13:V.preventDefault();ha=b.getEvent(new MouseEvent("click"));aa.events.dispatch("click",{type:"click",originalEvent:ha.event,point:ha.point,simulated:!0,target:aa});return;case 37:ha=-6;break;case 39:ha=6;break;case 38:ca=-6;break;case 40:ca=6;break;default:return}if(0!=ha||0!=ca)V.preventDefault(),aa.isDragging()||(this._keyboardDragPoint={x:0,y:0},V=b.getEvent(new MouseEvent("mousedown",
{clientX:0,clientY:0})),aa.events.isEnabled("pointerdown")&&aa.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:V.event,point:V.point,simulated:!0,target:aa})),V=this._keyboardDragPoint,V.x+=ha,V.y+=ca,ha=b.getEvent(new MouseEvent("mousemove",{clientX:V.x,clientY:V.y}),!1),aa.events.isEnabled("globalpointermove")&&aa.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:ha.event,point:ha.point,simulated:!0,target:aa})}})),this._disposers.push(h.addEventListener(q,
"keyup",V=>{if(this._focusedSprite){var aa=this._focusedSprite;V=V.keyCode;switch(V){case 37:case 39:case 38:case 40:if(aa.isDragging())V=this._keyboardDragPoint,V=b.getEvent(new MouseEvent("mouseup",{clientX:V.x,clientY:V.y})),aa.events.isEnabled("globalpointerup")&&aa.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:V.event,point:V.point,simulated:!0,target:aa}),this._keyboardDragPoint=void 0;else if(aa.get("focusableGroup")){const ha=aa.get("focusableGroup"),ca=this._tabindexes.filter(ua=>
ua.get("focusableGroup")==ha);aa=ca.indexOf(aa);const la=ca.length-1;aa+=39==V||40==V?1:-1;0>aa?aa=la:aa>la&&(aa=0);h.focus(ca[aa].getPrivate("focusElement").dom)}}}}))));this._startTicker();this.setThemes([]);this._addTooltip();this._hasLicense()||this._showBranding()}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose();this._resizeSensorDisposer=new u(this.dom,()=>{this.autoResize&&this.resize()});this._disposers.push(this._resizeSensorDisposer)}resize(){var b=this._getRealSize(),
c=this._getCalculatedSize(b),e=Math.floor(c.width);const k=Math.floor(c.height);if(0<e&&0<k){c=Math.floor(b.width);b=Math.floor(b.height);var q=this._htmlElementContainer;q.style.width=e+"px";q.style.height=k+"px";!0!==this._a11yD&&(q=this._focusElementContainer,q.style.width=e+"px",q.style.height=k+"px");this._renderer.resize(c,b,e,k);e=this._rootContainer;e.setPrivate("width",c);e.setPrivate("height",b);this._render();this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display);
this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(b){h.each(this._tickers,c=>{c(b)})}_runAnimations(b){h.keepIf(this._animations,c=>c._runAnimation(b))}_runDirties(){let b={};for(;this._isDirtyParents;)this._isDirtyParents=!1,h.keys(this._dirtyParents).forEach(B=>{const V=this._dirtyParents[B];delete this._dirtyParents[B];V.isDisposed()||(b[V.uid]=V,V._prepareChildren())});h.keys(b).forEach(B=>{b[B]._updateChildren()});const c=[];h.keys(this._dirty).forEach(B=>
{B=this._dirty[B];B.isDisposed()?delete this._dirty[B.uid]:(c.push(B),B._beforeChanged())});c.forEach(B=>{B._changed();delete this._dirty[B.uid];B._clearDirty()});this._isDirty=!1;const e={},k=[];h.keys(this._dirtyBounds).forEach(B=>{const V=this._dirtyBounds[B];delete this._dirtyBounds[B];V.isDisposed()||(e[V.uid]=V.depth(),k.push(V))});this._positionHTMLElements();k.sort((B,V)=>h.compare(e[V.uid],e[B.uid]));k.forEach(B=>{B._updateBounds()});const q=this._dirtyPositions;h.keys(q).forEach(B=>{const V=
q[B];delete q[B];V.isDisposed()||V._updatePosition()});c.forEach(B=>{B._afterChanged()})}_renderFrame(b){return this._updateTick?(this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:b}),this._checkComputedStyles(),this._runTickers(b),this._runAnimations(b),this._runDirties(),this._render(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:b}),
0===this._tickers.length&&0===this._animations.length&&!this._isDirty):!0}_runTicker(b,c){this.isDisposed()||(this.animationTime=b,this._renderFrame(b)?this.animationTime=this._ticker=null:this._paused||(c?this._ticker:L(this.fps,this._ticker)))}_runTickerNow(b=1E4){if(!this.isDisposed())for(b=performance.now()+b;;){const c=performance.now();if(c>=b){this.animationTime=null;break}this.animationTime=c;if(this._renderFrame(c)){this.animationTime=null;break}}}_startTicker(){null===this._ticker&&(this.animationTime=
null,this._ticker=b=>{this._runTicker(b)},L(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(b){(this._updateTick=b)&&this._startTicker()}_addDirtyEntity(b){void 0===this._dirty[b.uid]&&(this._isDirty=!0,this._dirty[b.uid]=b,this._startTicker())}_addDirtyParent(b){void 0===this._dirtyParents[b.uid]&&(this._isDirtyParents=this._isDirty=!0,this._dirtyParents[b.uid]=b,this._startTicker())}_addDirtyBounds(b){void 0===this._dirtyBounds[b.uid]&&(this._isDirty=!0,this._dirtyBounds[b.uid]=
b,this._startTicker())}_addDirtyPosition(b){void 0===this._dirtyPositions[b.uid]&&(this._isDirty=!0,this._dirtyPositions[b.uid]=b,this._startTicker())}_addAnimation(b){-1===this._animations.indexOf(b)&&(this._animations.push(b),this._startTicker())}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",()=>{this._isDirty=!0;this._startTicker()})}eachFrame(b){this._tickers.push(b);this._startTicker();return new h.Disposer(()=>{h.removeFirst(this._tickers,b)})}markDirtyGlobal(b){b||
(b=this.container);b.walkChildren(c=>{c instanceof h.Container&&this.markDirtyGlobal(c);c.markDirty();c.markDirtyBounds()})}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),h.each(this._disposers,
b=>{b.dispose()}),this._inner&&h.removeElement(this._inner),h.remove(h.registry.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(b){!0!==this._a11yD&&(this._readerAlertElement.innerHTML=h.stripTags(b))}setThemes(b){this._rootContainer.set("themes",b);(b=this.tooltipContainer)&&b._applyThemes();(b=this.interfaceColors)&&b._applyThemes()}_addTooltip(){if(!this.tooltipContainer){var b=this._tooltipContainerSettings;this.tooltipContainer=this._rootContainer.children.push(h.Container.new(this,
{position:"absolute",isMeasured:!1,width:h.p100,height:h.p100,layer:b?35:30,layerMargin:b?b:void 0}));b=H.Tooltip.new(this,{});this.container.set("tooltip",b);b.hide(0);this._tooltip=b}}_registerTabindexOrder(b){1!=this._a11yD&&(b.get("focusable")?h.pushOne(this._tabindexes,b):h.remove(this._tabindexes,b),this._invalidateTabindexes())}_unregisterTabindexOrder(b){1!=this._a11yD&&(h.remove(this._tabindexes,b),this._invalidateTabindexes())}_invalidateTabindexes(){if(1!=this._a11yD){this._tabindexes.sort((c,
e)=>{c=c.get("tabindexOrder",0);e=e.get("tabindexOrder",0);return c==e?0:c>e?1:-1});var b=[];h.each(this._tabindexes,(c,e)=>{c.getPrivate("focusElement")?this._moveFocusElement(e,c):this._makeFocusElement(e,c);(e=c.get("focusableGroup"))&&(-1!==b.indexOf(e)?c.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):b.push(e))})}}_updateCurrentFocus(){1!=this._a11yD&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(b,
c){if(1!=this._a11yD&&(c||(c=b.getPrivate("focusElement").dom),c)){b.get("visible")&&"tooltip"!=b.get("role")&&!b.isHidden()?"-1"!=c.getAttribute("tabindex")&&c.setAttribute("tabindex",""+this.tabindex):c.removeAttribute("tabindex");var e=b.get("role");e?c.setAttribute("role",e):c.removeAttribute("role");(e=b.get("ariaLabel"))?(e=h.populateString(b,e),c.setAttribute("aria-label",e)):c.removeAttribute("aria-label");(e=b.get("ariaLive"))?c.setAttribute("aria-live",e):c.removeAttribute("aria-live");
e=b.get("ariaChecked");null!=e?c.setAttribute("aria-checked",e?"true":"false"):c.removeAttribute("aria-checked");b.get("ariaHidden")?c.setAttribute("aria-hidden","hidden"):c.removeAttribute("aria-hidden");(e=b.get("ariaOrientation"))?c.setAttribute("aria-orientation",e):c.removeAttribute("aria-orientation");(e=b.get("ariaValueNow"))?c.setAttribute("aria-valuenow",e):c.removeAttribute("aria-valuenow");(e=b.get("ariaValueMin"))?c.setAttribute("aria-valuemin",e):c.removeAttribute("aria-valuemin");(e=
b.get("ariaValueMax"))?c.setAttribute("aria-valuemax",e):c.removeAttribute("aria-valuemax");(e=b.get("ariaValueText"))?c.setAttribute("aria-valuetext",e):c.removeAttribute("aria-valuetext");(b=b.get("ariaControls"))?c.setAttribute("aria-controls",b):c.removeAttribute("aria-controls")}}_makeFocusElement(b,c){if(!c.getPrivate("focusElement")&&1!=this._a11yD){var e=document.createElement("div");"tooltip"!=c.get("role")&&(e.tabIndex=this.tabindex);e.style.position="absolute";h.setInteractive(e,!1);var k=
[];c.setPrivate("focusElement",{dom:e,disposers:k});this._decorateFocusElement(c);k.push(h.addEventListener(e,"focus",q=>{this._handleFocus(q,b)}));k.push(h.addEventListener(e,"blur",q=>{this._handleBlur(q,b)}));this._moveFocusElement(b,c)}}_removeFocusElement(b){1!=this._a11yD&&(h.remove(this._tabindexes,b),b=b.getPrivate("focusElement"))&&(this._focusElementContainer.removeChild(b.dom),h.each(b.disposers,c=>{c.dispose()}))}_hideFocusElement(b){1!=this._a11yD&&(b.getPrivate("focusElement").dom.style.display=
"none")}_moveFocusElement(b,c){if(1!=this._a11yD){var e=this._focusElementContainer;c=c.getPrivate("focusElement").dom;c!==this._focusElementContainer.children[b]&&((b=this._focusElementContainer.children[b+1])?e.insertBefore(c,b):e.append(c))}}_positionFocusElement(b){if(1!=this._a11yD){var c=b.globalBounds(),e=c.right==c.left?b.width():c.right-c.left,k=c.top==c.bottom?b.height():c.bottom-c.top,q=c.left-2;c=c.top-2;0>e&&(q+=e,e=Math.abs(e));0>k&&(c+=k,k=Math.abs(k));b=b.getPrivate("focusElement").dom;
b.style.top=c+"px";b.style.left=q+"px";b.style.width=e+4+"px";b.style.height=k+4+"px"}}_handleFocus(b,c){1!=this._a11yD&&(c=this._tabindexes[c],c.isVisibleDeep()?(this._positionFocusElement(c),this._focusedSprite=c,c.events.isEnabled("focus")&&c.events.dispatch("focus",{type:"focus",originalEvent:b,target:c})):this._focusNext(b.target,this._isShift?-1:1))}_focusNext(b,c){if(1!=this._a11yD){var e=Array.from(document.querySelectorAll('a[href],area[href],button:not([disabled]),details,input:not([disabled]),iframe:not([disabled]),select:not([disabled]),textarea:not([disabled]),[contentEditable\x3d""],[contentEditable\x3d"true"],[contentEditable\x3d"TRUE"],[tabindex]:not([tabindex^\x3d"-"])'));
b=e.indexOf(b)+c;0>b?b=e.length-1:b>=e.length&&(b=0);e[b].focus()}}_handleBlur(b,c){1!=this._a11yD&&((c=this._focusedSprite)&&c.events.isEnabled("blur")&&c.events.dispatch("blur",{type:"blur",originalEvent:b,target:c}),this._focusedSprite=void 0)}updateTooltip(b){if(1!=this._a11yD){var c=h.stripTags(b._getText()),e=b.getPrivate("tooltipElement");"tooltip"==b.get("role")&&""!=c?(e||(e=this._makeTooltipElement(b)),e.innerHTML!=c&&(e.innerHTML=c)):e&&(e.remove(),b.removePrivate("tooltipElement"))}}_makeTooltipElement(b){const c=
this._tooltipElementContainer,e=document.createElement("div");e.style.position="absolute";e.style.width="1px";e.style.height="1px";e.style.overflow="hidden";e.style.clip="rect(1px, 1px, 1px, 1px)";h.setInteractive(e,!1);this._decorateFocusElement(b,e);c.append(e);b.setPrivate("tooltipElement",e);return e}_removeTooltipElement(b){if(1!=this._a11yD&&(b=b.getPrivate("tooltipElement"))){const c=b.parentElement;c&&c.removeChild(b)}}_invalidateAccessibility(b){if(1!=this._a11yD){this._focusElementDirty=
!0;var c=b.getPrivate("focusElement");b.get("focusable")?c&&(this._decorateFocusElement(b),this._positionFocusElement(b)):c&&this._removeFocusElement(b)}}focused(b){return this._focusedSprite===b}documentPointToRoot(b){const c=this.dom.getBoundingClientRect();return{x:b.x-c.left,y:b.y-c.top}}rootPointToDocument(b){const c=this.dom.getBoundingClientRect();return{x:b.x+c.left,y:b.y+c.top}}addDisposer(b){this._disposers.push(b);return b}_updateComputedStyles(){var b=window.getComputedStyle(this.dom);
let c="";h.each$1(b,(e,k)=>{h.isString(e)&&e.match(/^font/)&&(c+=k)});if(b=c!=this._fontHash)this._fontHash=c;return b}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(b){b instanceof h.Container?b.children.each(c=>{this._invalidateLabelBounds(c)}):b instanceof h.Text&&b.markDirtyBounds()}_hasLicense(){for(let b=0;b<h.registry.licenses.length;b++)if(h.registry.licenses[b].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&
this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(b){this._renderer.debugGhostView=b}set tapToActivate(b){this._renderer.tapToActivate=b}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(b){this._renderer.tapToActivateTimeout=b}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(b){const c=this._htmlElementContainer,e=document.createElement("div");b.setPrivate("htmlElement",
e);e.style.position="absolute";e.style.overflow="auto";e.style.boxSizing="border-box";h.setInteractive(e,b.get("interactive",!1));b.events.isEnabled("click")&&(h.setInteractive(e,!0),this._disposers.push(h.addEventListener(e,"click",k=>{k=this._renderer.getEvent(k);b.events.dispatch("click",{type:"click",originalEvent:k.event,point:k.point,simulated:!1,target:b})})));this._positionHTMLElement(b);c.append(e);h.pushOne(this._htmlEnabledContainers,b);return e}_positionHTMLElements(){h.each(this._htmlEnabledContainers,
b=>{this._positionHTMLElement(b)})}_positionHTMLElement(b){const c=b.getPrivate("htmlElement");if(c){h.each("paddingTop paddingRight paddingBottom paddingLeft minWidth minHeight maxWidth maxHeight".split(" "),ha=>{const ca=b.get(ha);c.style[ha]=ca?ca+"px":""});const q=b.compositeOpacity();setTimeout(()=>{c.style.opacity=q+""},10);const B=b.isVisibleDeep();B&&(c.style.display="block");var e=b.globalBounds();c.style.top=e.top+"px";c.style.left=e.left+"px";var k=b.get("width");const V=b.get("height");
let aa=e=0;k&&(e=b.width());V&&(aa=b.height());k&&V?(b.removePrivate("minWidth"),b.removePrivate("minHeight")):(c.style.position="fixed",c.style.width="",c.style.height="",k=c.getBoundingClientRect(),c.style.position="absolute",e=k.width,aa=k.height,b._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},b.setPrivate("minWidth",e),b.setPrivate("minHeight",aa));0<e&&(c.style.minWidth=e+"px");0<aa&&(c.style.minHeight=aa+"px");B&&0!=q||(c.style.display="none")}}_setHTMLContent(b,c){let e=b.getPrivate("htmlElement");
e||(e=this._makeHTMLElement(b));e.innerHTML!=c&&(e.innerHTML=c)}_removeHTMLContent(b){let c=b.getPrivate("htmlElement");c&&this._htmlElementContainer.removeChild(c);h.remove(this._htmlEnabledContainers,b)}}h.addLicense("AM5C241025748");const db=new Map([["ar",()=>new Promise((b,c)=>n(["../../chunks/ar2"],b,c))],["bg-bg",()=>new Promise((b,c)=>n(["../../chunks/bg_BG2"],b,c))],["bs-ba",()=>new Promise((b,c)=>n(["../../chunks/bs_BA2"],b,c))],["ca-es",()=>new Promise((b,c)=>n(["../../chunks/ca_ES2"],
b,c))],["cs-cz",()=>new Promise((b,c)=>n(["../../chunks/cs_CZ2"],b,c))],["da-dk",()=>new Promise((b,c)=>n(["../../chunks/da_DK2"],b,c))],["de-de",()=>new Promise((b,c)=>n(["../../chunks/de_DE2"],b,c))],["de-ch",()=>new Promise((b,c)=>n(["../../chunks/de_CH2"],b,c))],["el-gr",()=>new Promise((b,c)=>n(["../../chunks/el_GR2"],b,c))],["en-us",()=>new Promise((b,c)=>n(["../../chunks/en_US2"],b,c))],["en-ca",()=>new Promise((b,c)=>n(["../../chunks/en_CA2"],b,c))],["es-es",()=>new Promise((b,c)=>n(["../../chunks/es_ES2"],
b,c))],["et-ee",()=>new Promise((b,c)=>n(["../../chunks/et_EE2"],b,c))],["fi-fi",()=>new Promise((b,c)=>n(["../../chunks/fi_FI2"],b,c))],["fr-fr",()=>new Promise((b,c)=>n(["../../chunks/fr_FR2"],b,c))],["he-il",()=>new Promise((b,c)=>n(["../../chunks/he_IL2"],b,c))],["hr-hr",()=>new Promise((b,c)=>n(["../../chunks/hr_HR2"],b,c))],["hu-hu",()=>new Promise((b,c)=>n(["../../chunks/hu_HU2"],b,c))],["id-id",()=>new Promise((b,c)=>n(["../../chunks/id_ID2"],b,c))],["it-it",()=>new Promise((b,c)=>n(["../../chunks/it_IT2"],
b,c))],["ja-jp",()=>new Promise((b,c)=>n(["../../chunks/ja_JP2"],b,c))],["ko-kr",()=>new Promise((b,c)=>n(["../../chunks/ko_KR2"],b,c))],["lt-lt",()=>new Promise((b,c)=>n(["../../chunks/lt_LT2"],b,c))],["lv-lv",()=>new Promise((b,c)=>n(["../../chunks/lv_LV2"],b,c))],["nb-no",()=>new Promise((b,c)=>n(["../../chunks/nb_NO2"],b,c))],["nl-nl",()=>new Promise((b,c)=>n(["../../chunks/nl_NL2"],b,c))],["pl-pl",()=>new Promise((b,c)=>n(["../../chunks/pl_PL2"],b,c))],["pt-br",()=>new Promise((b,c)=>n(["../../chunks/pt_BR2"],
b,c))],["pt-pt",()=>new Promise((b,c)=>n(["../../chunks/pt_PT2"],b,c))],["ro-ro",()=>new Promise((b,c)=>n(["../../chunks/ro_RO2"],b,c))],["ru-ru",()=>new Promise((b,c)=>n(["../../chunks/ru_RU2"],b,c))],["sk-sk",()=>new Promise((b,c)=>n(["../../chunks/sk_SK2"],b,c))],["sl-sl",()=>new Promise((b,c)=>n(["../../chunks/sl_SL2"],b,c))],["sr-rs",()=>new Promise((b,c)=>n(["../../chunks/sr_RS2"],b,c))],["sv-se",()=>new Promise((b,c)=>n(["../../chunks/sv_SE2"],b,c))],["th-th",()=>new Promise((b,c)=>n(["../../chunks/th_TH2"],
b,c))],["tr-tr",()=>new Promise((b,c)=>n(["../../chunks/tr_TR2"],b,c))],["uk-ua",()=>new Promise((b,c)=>n(["../../chunks/uk_UA2"],b,c))],["vi-vn",()=>new Promise((b,c)=>n(["../../chunks/vi_VN2"],b,c))],["zh-cn",()=>new Promise((b,c)=>n(["../../chunks/zh_Hans2"],b,c))],["zh-hk",()=>new Promise((b,c)=>n(["../../chunks/zh_Hant2"],b,c))],["zh-tw",()=>new Promise((b,c)=>n(["../../chunks/zh_Hant2"],b,c))]]);w="#7ABEE5 #B39BD5 #F8AE83 #92E6E4 #FBC487 #EE967A #CEA2D6 #89D594 #CEE68F #F1A6D5".split(" ").map(b=>
h.color(b));p.createRoot=async function(b,c=F.getLocale()){b=fb.new(b);var e=db.get;if(c)if(db.has(c.toLowerCase()))var k=c.toLowerCase();else{c=c.split("-")[0].toLowerCase();let q=null;for(k of db.keys())if(k.startsWith(c)){q=k;break}k=q||"en-us"}else k="en-us";b.locale=(await e.call(db,k)()).default;return b};p.esriChartColorSet=w;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/Theme":function(){define(["exports","./tslib.es6"],function(n,p){function w(a){return Number(a)!==
a}function h(a){if(null!=a&&!F(a)){let d=Number(a);return w(d)&&K(a)&&""!=a?h(a.replace(/[^0-9.\-]+/g,"")):d}return a}function H(a){return"[object Date]"==={}.toString.call(a)}function K(a){return"string"===typeof a}function F(a){return"number"===typeof a&&Number(a)==a}function R(a){return"object"===typeof a&&null!==a}function E(a,d){const f=a.length;for(let l=0;l<f;++l)if(a[l]===d)return l;return-1}function X(a,d){const f=a.length;for(let l=0;l<f;++l)if(d(a[l]))return!0;return!1}function v(a,d){const f=
a.length;for(let l=0;l<f;++l)d(a[l],l)}function g(a,d){let f=a.length;for(;0<f;)--f,d(a[f],f)}function A(a,d){let f=!1,l=0;for(;;){l=a.indexOf(d,l);if(-1===l)return f;f=!0;a.splice(l,1)}}function C(a,d){d=a.indexOf(d);return-1!==d?(a.splice(d,1),!0):!1}function D(a,d){-1===a.indexOf(d)&&a.push(d)}function y(a,d){const f=a.length;for(let l=0;l<f;++l)if(d(a[l],l))return l;return-1}function G(a,d){d=y(a,d);if(-1!==d)return a[d]}function L(a,d){let f=0,l=a.length,I=!1;for(;f<l;){const M=f+l>>1,U=d(a[M]);
0>U?f=M+1:0===U?(I=!0,f=M+1):l=M}return{found:I,index:I?f-1:f}}function x(a,d){let f=0,l=a.length,I=!1;for(;f<l;){const M=f+l>>1,U=d(a[M]);0>U?f=M+1:(0===U&&(I=!0),l=M)}return{found:I,index:f}}function Z(a,d){if(!(0<=a&&a<d))throw Error("Index out of bounds: "+a);}function W(a){return new Ra(a)}function u(a){return Object.keys(a)}function t(a,d){return u(a).sort(d)}function r(a,d){u(a).forEach(f=>{d(f,a[f])})}function m(a,d,f,l){a.addEventListener(d,f,l||!1);return new Ya(()=>{a.removeEventListener(d,
f,l||!1)})}function J(a){switch(a){case "touchevents":return window.hasOwnProperty("TouchEvent");case "pointerevents":return window.hasOwnProperty("PointerEvent");case "mouseevents":return window.hasOwnProperty("MouseEvent");case "wheelevents":return window.hasOwnProperty("WheelEvent");case "keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function S(a){if(!("undefined"!==typeof Touch&&a instanceof Touch))if("undefined"!==typeof PointerEvent&&a instanceof PointerEvent&&null!=
a.pointerType)switch(a.pointerType){case "touch":case "pen":case 2:break;case "mouse":case 4:return!1;default:return!(a instanceof MouseEvent)}else if(null!=a.type&&a.type.match(/^mouse/))return!1;return!0}function P(a,d){var f;if(f=a.target)a:for(a=a.target;;)if(d.root.dom===a){f=!0;break a}else if(null===a.parentNode)if(null==a.host){f=!1;break a}else a=a.host;else a=a.parentNode;return f}function T(a,d){return F(a)?a:null!=a&&F(a.value)&&F(d)?d*a.value:0}function da(a,d=0,f="0"){"string"!==typeof a&&
(a=a.toString());return d>a.length?Array(d-a.length+1).join(f)+a:a}function Y(a){return a.replace(/[\s]*$/,"").replace(/^[\s]*/,"")}function z(a,d){a=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()));d=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-d);d=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a.getTime()-d.getTime())/864E5+1)/7)}function Q(a){var d=a.h;var f=a.s;var l=a.l;if(0==f)f=l=d=l;else{a=function(U,ka,ta){0>ta&&(ta+=1);1<ta&&--ta;return ta<1/6?U+6*(ka-U)*ta:
.5>ta?ka:ta<2/3?U+(ka-U)*(2/3-ta)*6:U};let I=.5>l?l*(1+f):l+f-l*f,M=2*l-I;f=a(M,I,d+1/3);l=a(M,I,d);d=a(M,I,d-1/3)}return{r:Math.round(255*f),g:Math.round(255*l),b:Math.round(255*d)}}function ea(a){let d=a.r/255,f=a.g/255;a=a.b/255;let l=Math.max(d,f,a),I=Math.min(d,f,a),M=0,U=0,ka=(l+I)/2;if(l===I)M=U=0;else{let ta=l-I;U=.5<ka?ta/(2-l-I):ta/(l+I);switch(l){case d:M=(f-a)/ta+(f<a?6:0);break;case f:M=(a-d)/ta+2;break;case a:M=(d-f)/ta+4}M/=6}return{h:M,s:U,l:ka}}function fa(a,d){return Math.round((0<
d?255-a:a)*d)}function ja(a,d={r:255,g:255,b:255},f={r:255,g:255,b:255}){let l=d,I=f;128<=(299*f.r+587*f.g+114*f.b)/1E3&&(l=f,I=d);return 128<=(299*a.r+587*a.g+114*a.b)/1E3?I:l}function na(a){"#"===a[0]&&(a=a.substr(1));3==a.length&&(a=a[0].repeat(2)+a[1].repeat(2)+a[2].repeat(2));return parseInt(a,16)}function qa(a){return p.__awaiter(this,void 0,void 0,function*(){if(void 0!==a){const d=[];r(a,(f,l)=>{d.push(l.waitForStop())});yield Promise.all(d)}})}function ra(a,d,f){return d+a*(f-d)}function xa(a,
d,f){return 1<=a?f:d}function Ba(a,d,f){return new Ra(ra(a,d.percent,f.percent))}function Da(a,d,f){return Va.interpolate(a,d,f)}function va(a,d,f){return Math.min(Math.max(a,d),f)}function pa(a){return Math.sin(db*a)}function wa(a){return Math.cos(db*a)}function Ka(a,d){return{x:a*wa(d),y:a*pa(d)}}function O(a){return a}function ba(a){return a*a*a}function ia(a,d){return a===d?0:a<d?-1:1}function sa(a,d,f){const l=a.length,I=d.length,M=Math.min(l,I);for(let U=0;U<M;++U){const ka=f(a[U],d[U]);if(0!==
ka)return ka}return ia(l,I)}function ya(a,d){a.get("reverseChildren",!1)?a.children.eachReverse(d):a.children.each(d)}function Fa(a,d){if(null!=d){d=Wa.escape(""+d);let l=d.match(/\{([^}]+)\}/g),I;if(l)for(I=0;I<l.length;I++){var f=l[I].replace(/\{([^}]+)\}/,"$1");f=Aa(a,f);null==f&&(f="");d=d.split(l[I]).join(f)}d=Wa.unescape(d)}else d="";return d}function Aa(a,d,f){let l;f=a.dataItem;let I=[];var M=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;let U;for(;;){U=M.exec(d);if(null===U)break;if(U[3]){I.push({prop:U[3]});
var ka=a.getDateFormatter().get("dateFields",[]),ta=a.getNumberFormatter().get("numericFields",[]),Ia=a.getDurationFormatter().get("durationFields",[]);-1!==ka.indexOf(U[3])?I.push({method:"formatDate",params:[]}):-1!==ta.indexOf(U[3])?I.push({method:"formatNumber",params:[]}):-1!==Ia.indexOf(U[3])&&I.push({method:"formatDuration",params:[]})}else{ka=[];if(""!=Y(U[2]))for(ta=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;;){Ia=ta.exec(U[2]);if(null===Ia)break;ka.push(Ia[1]||Ia[2]||Ia[3])}I.push({method:U[1],params:ka})}}if(f){l=
Na(a,I,f._settings);if(null==l||R(l))l=Na(a,I,f);M=f.dataContext;null==l&&M&&(l=Na(a,I,M),null==l&&(l=Na(a,[{prop:d}],M)),null==l&&M.dataContext&&(l=Na(a,I,M.dataContext)));null==l&&f.component&&f.component.dataItem!==f&&(l=Aa(f.component,d))}null==l&&(l=Na(a,I,a));null==l&&a.parent&&(l=Aa(a.parent,d));return l}function Na(a,d,f,l){let I=f,M=!1;for(let ta=0,Ia=d.length;ta<Ia;ta++){let Ha=d[ta];if(Ha.prop){if(I instanceof oa){var U=I.get(Ha.prop);null==U&&(U=I.getPrivate(Ha.prop));if(null==U){U=Ha.prop;
var ka=I.getPrivate("customData");U=R(ka)?ka[U]:void 0}null==U&&(U=I[Ha.prop]);I=U}else I.get?(U=I.get(Ha.prop),null==U&&(U=I[Ha.prop]),I=U):I=I[Ha.prop];if(null==I)return}else switch(Ha.method){case "formatNumber":U=h(I);null!=U&&(I=a.getNumberFormatter().format(U,l||Ha.params[0]||void 0),M=!0);break;case "formatDate":U=I;H(U)||F(U)?U=new Date(U):(ka=Number(U),U=F(ka)?new Date(ka):new Date(U));if(!H(U)||w(U.getTime()))return;null!=U&&(I=a.getDateFormatter().format(U,l||Ha.params[0]||void 0),M=!0);
break;case "formatDuration":U=h(I);null!=U&&(I=a.getDurationFormatter().format(U,l||Ha.params[0]||void 0,Ha.params[1]||void 0),M=!0);break;case "urlEncode":case "encodeURIComponent":I=encodeURIComponent(I);break;default:I[Ha.method]&&I[Ha.method].apply(f,Ha.params)}}M||(d=[{method:"",params:l}],null==l?F(I)?(d[0].method="formatNumber",d[0].params=""):H(I)&&(d[0].method="formatDate",d[0].params=""):("undefined"===typeof l?l="string":(l=l.toLowerCase().replace(/^\[[^\]]*\]/,""),l=l.replace(/\[[^\]]+\]/,
""),l=l.trim(),l=(f=l.match(/\/(date|number|duration)$/))?f[1]:"number"===l?"number":"date"===l?"date":"duration"===l?"duration":l.match(/[#0]/)?"number":l.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"),"number"===l?d[0].method="formatNumber":"date"===l?d[0].method="formatDate":"duration"===l&&(d[0].method="formatDuration")),d[0].method&&(I=Na(a,d,I)));return I}class eb{constructor(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||
(this._disposed=!0,this._dispose())}}class Ya{constructor(a){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._disposed=!1;this._dispose=a}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class nb extends eb{constructor(){super(...arguments);Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,
writable:!0,value:[]})}_dispose(){v(this._disposers,a=>{a.dispose()})}}class Za extends eb{constructor(a){super();Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._disposers=a}_dispose(){v(this._disposers,a=>{a.dispose()})}}class ib extends Ya{constructor(){super(...arguments);Object.defineProperty(this,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){++this._counter;return new Ya(()=>{--this._counter;0===this._counter&&
this.dispose()})}}class cb{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,
value:void 0});Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._listeners=[];this._killed=[];this._disabled={};this._iterating=0;this._enabled=!0;this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const a=this._listeners;this._iterating=1;this._disabled=this._listeners=null;try{v(a,d=>{d.disposer.dispose()})}finally{this._iterating=this._killed=null}}}hasListeners(){return 0!==this._listeners.length}hasListenersByType(a){return X(this._listeners,
d=>(null===d.type||d.type===a)&&!d.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(a){delete this._disabled[a]}disableType(a,d=Infinity){this._disabled[a]=d}_removeListener(a){if(0===this._iterating){a=this._listeners.indexOf(a);if(-1===a)throw Error("Invalid state: could not remove listener");this._listeners.splice(a,1)}else this._killed.push(a)}_removeExistingListener(a,d,f,l){if(this._disposed)throw Error("EventDispatcher is disposed");this._eachListener(I=>{I.once!==a||
I.type!==d||void 0!==f&&I.callback!==f||I.context!==l||I.disposer.dispose()})}isEnabled(a){if(this._disposed)throw Error("EventDispatcher is disposed");return this._enabled&&0<this._listeners.length&&this.hasListenersByType(a)&&void 0===this._disabled[a]}removeType(a){if(this._disposed)throw Error("EventDispatcher is disposed");this._eachListener(d=>{d.type===a&&d.disposer.dispose()})}has(a,d,f){return-1!==y(this._listeners,l=>!0!==l.once&&l.type===a&&(void 0===d||l.callback===d)&&l.context===f)}_shouldDispatch(a){if(this._disposed)throw Error("EventDispatcher is disposed");
const d=this._disabled[a];return F(d)?(1>=d?delete this._disabled[a]:--this._disabled[a],!1):this._enabled}_eachListener(a){++this._iterating;try{v(this._listeners,a)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(v(this._killed,d=>{this._removeListener(d)}),this._killed.length=0)}}dispatch(a,d){this._shouldDispatch(a)&&this._eachListener(f=>{f.killed||null!==f.type&&f.type!==a||f.dispatch(a,d)})}_on(a,d,f,l,I,M){if(this._disposed)throw Error("EventDispatcher is disposed");
this._removeExistingListener(a,d,f,l);const U={type:d,callback:f,context:l,shouldClone:I,dispatch:M,killed:!1,once:a,disposer:new Ya(()=>{U.killed=!0;this._removeListener(U)})};this._listeners.push(U);return U}onAll(a,d,f=!0){return this._on(!1,null,a,d,f,(l,I)=>a.call(d,I)).disposer}on(a,d,f,l=!0){return this._on(!1,a,d,f,l,(I,M)=>d.call(f,M)).disposer}once(a,d,f,l=!0){const I=this._on(!0,a,d,f,l,(M,U)=>{I.disposer.dispose();d.call(f,U)});return I.disposer}off(a,d,f){this._removeExistingListener(!1,
a,d,f)}copyFrom(a){if(this._disposed)throw Error("EventDispatcher is disposed");if(a===this)throw Error("Cannot copyFrom the same TargetedEventDispatcher");const d=[];v(a._listeners,f=>{!f.killed&&f.shouldClone&&(null===f.type?d.push(this.onAll(f.callback,f.context)):f.once?d.push(this.once(f.type,f.callback,f.context)):d.push(this.on(f.type,f.callback,f.context)))});return new Za(d)}}class hb{constructor(a=[]){Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0});
Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new cb});this._values=a}get values(){return this._values}contains(a){return-1!==this._values.indexOf(a)}removeValue(a){let d=0,f=this._values.length;for(;d<f;)this._values[d]===a?(this.removeIndex(d),--f):++d}indexOf(a){return E(this._values,a)}get length(){return this._values.length}hasIndex(a){return 0<=a&&a<this._values.length}getIndex(a){return this._values[a]}_onPush(a){this.events.isEnabled("push")&&this.events.dispatch("push",
{type:"push",target:this,newValue:a})}_onInsertIndex(a,d){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:a,newValue:d})}_onSetIndex(a,d,f){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:a,oldValue:d,newValue:f})}_onRemoveIndex(a,d){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:a,oldValue:d})}_onMoveIndex(a,d,f){this.events.isEnabled("moveIndex")&&
this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:a,newIndex:d,value:f})}_onClear(a){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:a})}setIndex(a,d){Z(a,this._values.length);const f=this._values[a];f!==d&&(this._values[a]=d,this._onSetIndex(a,f,d));return f}insertIndex(a,d){Z(a,this._values.length+1);this._values.splice(a,0,d);this._onInsertIndex(a,d);return d}swap(a,d){var f=this._values.length;Z(a,f);Z(d,f);if(a!==d){f=this._values[a];
const l=this._values[d];this._values[a]=l;this._onSetIndex(a,f,l);this._values[d]=f;this._onSetIndex(d,l,f)}}removeIndex(a){Z(a,this._values.length);const d=this._values[a];this._values.splice(a,1);this._onRemoveIndex(a,d);return d}moveValue(a,d){let f=this.indexOf(a);-1!==f?(this._values.splice(f,1),null==d?(d=this._values.length,this._values.push(a),this._onMoveIndex(f,d,a)):(this._values.splice(d,0,a),this._onMoveIndex(f,d,a))):null==d?(this._values.push(a),this._onPush(a)):(this._values.splice(d,
0,a),this._onInsertIndex(d,a));return a}push(a){this._values.push(a);this._onPush(a);return a}unshift(a){this.insertIndex(0,a);return a}pushAll(a){v(a,d=>{this.push(d)})}copyFrom(a){this.pushAll(a._values)}pop(){return 0>this._values.length-1?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(a){const d=this._values;this._values=[];this._onClear(d);v(a,f=>{this._values.push(f);this._onPush(f)})}clear(){this.setAll([])}*[Symbol.iterator](){const a=
this._values.length;for(let d=0;d<a;++d)yield this._values[d]}each(a){v(this._values,a)}eachReverse(a){g(this._values,a)}}class jb extends hb{constructor(){super(...arguments);Object.defineProperty(this,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_onSetIndex(a,d,f){this.autoDispose&&d.dispose();super._onSetIndex(a,d,f)}_onRemoveIndex(a,d){this.autoDispose&&d.dispose();super._onRemoveIndex(a,
d)}_onClear(a){this.autoDispose&&v(a,d=>{d.dispose()});super._onClear(a)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this.autoDispose&&v(this._values,a=>{a.dispose()}))}}class ob extends jb{constructor(a,d){super();Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.template=a;this.make=d}}class pb extends hb{constructor(a){super();
Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._container=a;this._events=this.events.onAll(d=>{if("clear"===d.type)v(d.oldValues,f=>{this._onRemoved(f)});else if("push"===d.type)this._onInserted(d.newValue);else if("setIndex"===d.type)this._onRemoved(d.oldValue),
this._onInserted(d.newValue,d.index);else if("insertIndex"===d.type)this._onInserted(d.newValue,d.index);else if("removeIndex"===d.type)this._onRemoved(d.oldValue);else if("moveIndex"===d.type)this._onRemoved(d.value),this._onInserted(d.value,d.newIndex);else throw Error("Unknown IListEvent type");})}_onInserted(a,d){a._setParent(this._container,!0);const f=this._container._childrenDisplay;void 0===d?f.addChild(a._display):f.addChildAt(a._display,d)}_onRemoved(a){this._container._childrenDisplay.removeChild(a._display);
this._container.markDirtyBounds();this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),v(this.values,a=>{a.dispose()}))}}class Ra{constructor(a){Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._value=a}get value(){return this._value/100}get percent(){return this._value}toString(){return""+this._value+"%"}interpolate(a,d){return a+this.value*(d-a)}static normalize(a,d,f){return a instanceof
Ra?a:d===f?new Ra(0):new Ra(100*Math.min(Math.max(1/(f-d)*(a-d),0),1))}}W(0);const kb=W(100),lb=W(50);class Va{constructor(a){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._hex=a|0}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return this._hex&255}toCSS(a=1){return"rgba("+this.r+", "+this.g+", "+this.b+", "+a+")"}toCSSHex(){return"#"+da(this.r.toString(16),2)+da(this.g.toString(16),2)+da(this.b.toString(16),
2)}toHSL(a=1){return ea({r:this.r,g:this.g,b:this.b,a})}static fromHSL(a,d,f){a=Q({h:a,s:d,l:f});return this.fromRGB(a.r,a.g,a.b)}toString(){return this.toCSSHex()}static fromHex(a){return new Va(a)}static fromRGB(a,d,f){return new Va((f|0)+(d<<8)+(a<<16))}static fromString(a){return new Va(na(a))}static fromCSS(a){a:{var d=a.replace(/[ ]/g,"");if(a=d.match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i))a.push("1");else if(a=d.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!a){a=0;break a}d="";for(let f=
1;3>=f;f++){let l=parseInt(a[f]).toString(16);1==l.length&&(l="0"+l);d+=l}a=na(d)}return new Va(a)}static fromAny(a){if(K(a)){if("#"==a[0])return Va.fromString(a);if("rgb"==a.substr(0,3))return Va.fromCSS(a)}else{if(F(a))return Va.fromHex(a);if(a instanceof Va)return Va.fromHex(a.hex)}throw Error("Unknown color syntax: "+a);}static alternative(a,d,f){a=ja({r:a.r,g:a.g,b:a.b},d?{r:d.r,g:d.g,b:d.b}:void 0,f?{r:f.r,g:f.g,b:f.b}:void 0);return this.fromRGB(a.r,a.g,a.b)}static interpolate(a,d,f,l="rgb"){return"hsl"==
l?(d=d.toHSL(),f=f.toHSL(),Va.fromHSL(ra(a,d.h,f.h),ra(a,d.s,f.s),ra(a,d.l,f.l))):Va.fromRGB(ra(a,d.r,f.r),ra(a,d.g,f.g),ra(a,d.b,f.b))}static lighten(a,d){d=(a={r:a.r,g:a.g,b:a.b},{r:Math.max(0,Math.min(255,a.r+fa(a.r,d))),g:Math.max(0,Math.min(255,a.g+fa(a.g,d))),b:Math.max(0,Math.min(255,a.b+fa(a.b,d))),a:a.a});return Va.fromRGB(d.r,d.g,d.b)}static brighten(a,d){var f=a.r;var l=a.g;a=a.b;d=fa(Math.min(Math.max(f,l,a),230),d);f=Math.max(0,Math.min(255,Math.round(f+d)));l=Math.max(0,Math.min(255,
Math.round(l+d)));a=Math.max(0,Math.min(255,Math.round(a+d)));return Va.fromRGB(f,l,a)}static saturate(a,d){a={r:a.r,g:a.g,b:a.b};void 0===a||1==d?d=a:(a=ea(a),a.s=d,d=Q(a));return Va.fromRGB(d.r,d.g,d.b)}}var fb=Math.PI;const db=fb/180;fb=180/fb;class b{constructor(a,d){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_userSettings",
{enumerable:!0,configurable:!0,writable:!0,value:{}});this._entity=a;this._settings=d;r(d,f=>{this._userSettings[f]=!0})}get(a,d){a=this._settings[a];return void 0!==a?a:d}setRaw(a,d){this._settings[a]=d}set(a,d){this._userSettings[a]=!0;this.setRaw(a,d)}remove(a){delete this._userSettings[a];delete this._settings[a]}setAll(a){u(a).forEach(d=>{this.set(d,a[d])})}_eachSetting(a){r(this._settings,a)}apply(){const a={stateAnimationEasing:!0,stateAnimationDuration:!0},d=this._entity.states.lookup("default");
this._eachSetting((f,l)=>{a[f]||(a[f]=!0,this!==d&&(f in d._settings||(d._settings[f]=this._entity.get(f))),this._entity.set(f,l))})}applyAnimate(a){null==a&&(a=this._settings.stateAnimationDuration);null==a&&(a=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));let d=this._settings.stateAnimationEasing;null==d&&(d=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",ba)));const f=this._entity.states.lookup("default"),l={stateAnimationEasing:!0,stateAnimationDuration:!0},
I={};this._eachSetting((M,U)=>{l[M]||(l[M]=!0,this!=f&&(M in f._settings||(f._settings[M]=this._entity.get(M))),(U=this._entity.animate({key:M,to:U,duration:a,easing:d}))&&(I[M]=U))});return I}}class c{constructor(a){Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._entity=a}lookup(a){return this._states[a]}create(a,d){const f=this._states[a];if(f)return f.setAll(d),
f;d=new b(this._entity,d);return this._states[a]=d}remove(a){delete this._states[a]}apply(a){const d=this._states[a];d&&d.apply();this._entity._applyState(a)}applyAnimate(a,d){let f;const l=this._states[a];l&&(f=l.applyAnimate(d));this._entity._applyStateAnimated(a,d);return f}}class e{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.3.12"});Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,
"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}const k=new e;class q{constructor(a){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}});this._entity=a}add(a,
d){let f=this._callbacks[a];void 0===f&&(f=this._callbacks[a]=[]);f.push(d);this._entity._markDirtyKey(a);return new Ya(()=>{C(f,d)&&this._entity._markDirtyKey(a)})}remove(a){const d=this._callbacks[a];void 0!==d&&(delete this._callbacks[a],0!==d.length&&this._entity._markDirtyKey(a))}enable(a){this._disabled[a]&&(delete this._disabled[a],this._entity._markDirtyKey(a))}disable(a){this._disabled[a]||(this._disabled[a]=!0,this._entity._markDirtyKey(a))}fold(a,d){if(!this._disabled[a]){const f=this._callbacks[a];
if(void 0!==f)for(let l=0,I=f.length;l<I;++l)d=f[l](d,this._entity,a)}return d}}class B{constructor(a,d,f,l,I,M,U){Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,
writable:!0,value:!1});Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new cb});this._animation=a;this._from=d;this._to=f;this._duration=l;this._easing=I;this._loops=M;this._interpolate="number"===typeof d&&"number"===typeof f?ra:d instanceof Ra&&f instanceof Ra?Ba:d instanceof Va&&f instanceof Va?Da:xa;this._oldTime=U}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||
(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=!1;this._oldTime=null}play(){this._stopped||this._playing||(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise((a,d)=>{if(this._stopped)a();else{const f=this.events.on("stopped",()=>{f.dispose();a()})}})}_checkEnded(){return 1<this._loops?(--this._loops,!1):!0}_run(a){null!==
this._oldTime&&(this._time+=a-this._oldTime,this._time>this._duration&&(this._time=this._duration));this._oldTime=a}_reset(a){this._oldTime=a;this._time=0}_value(a){return this._interpolate(this._easing(a),this._from,this._to)}}let V=0;class aa{constructor(a){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++V});Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_privateSettings",{enumerable:!0,
configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_animatingSettings",{enumerable:!0,
configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}});this._settings=a}_checkDirty(){u(this._settings).forEach(a=>{this._userProperties[a]=!0;this._markDirtyKey(a)})}resetUserSettings(){this._userProperties={}}_runAnimation(a){if(this.isDisposed())return!1;
let d=!1;r(this._animatingSettings,(f,l)=>{if(l._stopped)this._stopAnimation(f);else if(l._playing){l._run(a);const I=l.percentage;1<=I?l._checkEnded()?this.set(f,l._value(1)):(d=!0,l._reset(a),this._set(f,l._value(1))):(d=!0,this._set(f,l._value(I)))}});r(this._animatingPrivateSettings,(f,l)=>{if(l._stopped)this._stopAnimationPrivate(f);else if(l._playing){l._run(a);const I=l.percentage;1<=I?l._checkEnded()?this.setPrivate(f,l._value(1)):(d=!0,l._reset(a),this._setPrivate(f,l._value(1))):(d=!0,this._setPrivate(f,
l._value(I)))}});return d}_markDirtyKey(a){this.markDirty()}_markDirtyPrivateKey(a){this.markDirty()}on(a,d){let f=this._settingEvents[a];void 0===f&&(f=this._settingEvents[a]=[]);f.push(d);return new Ya(()=>{C(f,d);0===f.length&&delete this._settingEvents[a]})}onPrivate(a,d){let f=this._privateSettingEvents[a];void 0===f&&(f=this._privateSettingEvents[a]=[]);f.push(d);return new Ya(()=>{C(f,d);0===f.length&&delete this._privateSettingEvents[a]})}getRaw(a,d){a=this._settings[a];return void 0!==a?
a:d}get(a,d){return this.getRaw(a,d)}_sendKeyEvent(a,d){const f=this._settingEvents[a];void 0!==f&&v(f,l=>{l(d,this,a)})}_sendPrivateKeyEvent(a,d){const f=this._privateSettingEvents[a];void 0!==f&&v(f,l=>{l(d,this,a)})}_setRaw(a,d,f){this._prevSettings[a]=d;this._sendKeyEvent(a,f)}setRaw(a,d){const f=this._settings[a];this._settings[a]=d;f!==d&&this._setRaw(a,f,d)}_set(a,d){const f=this._settings[a];this._settings[a]=d;f!==d&&(this._setRaw(a,f,d),this._markDirtyKey(a))}_stopAnimation(a){const d=this._animatingSettings[a];
d&&(delete this._animatingSettings[a],d.stop())}set(a,d){this._set(a,d);this._stopAnimation(a);return d}remove(a){a in this._settings&&(this._prevSettings[a]=this._settings[a],delete this._settings[a],this._sendKeyEvent(a,void 0),this._markDirtyKey(a));this._stopAnimation(a)}removeAll(){v(u(this._settings),a=>{this.remove(a)})}getPrivate(a,d){a=this._privateSettings[a];return void 0!==a?a:d}_setPrivateRaw(a,d,f){this._prevPrivateSettings[a]=d;this._sendPrivateKeyEvent(a,f)}setPrivateRaw(a,d){const f=
this._privateSettings[a];this._privateSettings[a]=d;f!==d&&this._setPrivateRaw(a,f,d)}_setPrivate(a,d){const f=this._privateSettings[a];this._privateSettings[a]=d;f!==d&&(this._setPrivateRaw(a,f,d),this._markDirtyPrivateKey(a))}_stopAnimationPrivate(a){const d=this._animatingPrivateSettings[a];d&&(d.stop(),delete this._animatingPrivateSettings[a])}setPrivate(a,d){this._setPrivate(a,d);this._stopAnimationPrivate(a);return d}removePrivate(a){a in this._privateSettings&&(this._prevPrivateSettings[a]=
this._privateSettings[a],delete this._privateSettings[a],this._markDirtyPrivateKey(a));this._stopAnimationPrivate(a)}setAll(a){r(a,(d,f)=>{this.set(d,f)})}animate(a){var d=a.key;const f=a.to,l=a.duration||0,I=a.loops||1,M=void 0===a.from?this.get(d):a.from;a=void 0===a.easing?O:a.easing;if(0===l)this.set(d,f);else if(void 0===M||M===f)this.set(d,f);else return this.set(d,M),d=this._animatingSettings[d]=new B(this,M,f,l,a,I,this._animationTime()),this._startAnimation(),d;d=new B(this,M,f,l,a,I,null);
d.stop();return d}animatePrivate(a){var d=a.key;const f=a.to,l=a.duration||0,I=a.loops||1,M=void 0===a.from?this.getPrivate(d):a.from;a=void 0===a.easing?O:a.easing;if(0===l)this.setPrivate(d,f);else if(void 0===M||M===f)this.setPrivate(d,f);else return this.setPrivate(d,M),d=this._animatingPrivateSettings[d]=new B(this,M,f,l,a,I,this._animationTime()),this._startAnimation(),d;d=new B(this,M,f,l,a,I,null);d.stop();return d}_dispose(){}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=
!0,this._dispose())}}class ha extends aa{constructor(a,d,f,l=[]){super(d);Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new c(this)});Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new q(this)});Object.defineProperty(this,"events",{enumerable:!0,
configurable:!0,writable:!0,value:this._createEvents()});Object.defineProperty(this,"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_templates",{enumerable:!0,
configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_runSetup",{enumerable:!0,configurable:!0,
writable:!0,value:!0});Object.defineProperty(this,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}});if(!f)throw Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=a;this._internalTemplates=l;d.id&&this._registerId(d.id)}static new(a,d,f){a=new this(a,d,!0);a._template=f;a._afterNew();return a}static _new(a,d,f=[]){a=new this(a,d,!0,f);a._afterNew();return a}_afterNew(){this._checkDirty();let a=!1;const d=this._template;d&&(a=!0,d._setObjectTemplate(this));
v(this._internalTemplates,f=>{a=!0;f._setObjectTemplate(this)});a&&this._applyTemplates(!1);this.states.create("default",{});this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const a=this._template;a&&a._setObjectTemplate(this);v(this._internalTemplates,d=>{d._setObjectTemplate(this)});this.states.create("default",{});this._setDefaults();this._applyThemes()}_createEvents(){return new cb}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefault(a,
d){a in this._settings||super.set(a,d)}_setRawDefault(a,d){a in this._settings||super.setRaw(a,d)}_clearDirty(){u(this._dirty).forEach(a=>{this._dirty[a]=!1});u(this._dirtyPrivate).forEach(a=>{this._dirtyPrivate[a]=!1})}isDirty(a){return!!this._dirty[a]}isPrivateDirty(a){return!!this._dirtyPrivate[a]}_markDirtyKey(a){this._dirty[a]=!0;super._markDirtyKey(a)}_markDirtyPrivateKey(a){this._dirtyPrivate[a]=!0;super._markDirtyKey(a)}isType(a){return-1!==this.classNames.indexOf(a)}_pushPropertyDisposer(a,
d){let f=this._disposerProperties[a];void 0===f&&(f=this._disposerProperties[a]=[]);f.push(d);return d}_disposeProperty(a){const d=this._disposerProperties[a];void 0!==d&&(v(d,f=>{f.dispose()}),delete this._disposerProperties[a])}set template(a){const d=this._template;d!==a&&(this._template=a,d&&d._removeObjectTemplate(this),a&&a._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(a){}_applyStateAnimated(a,
d){}get(a,d){a=this.adapters.fold(a,this._settings[a]);return void 0!==a?a:d}isUserSetting(a){return this._userProperties[a]||!1}set(a,d){this._userProperties[a]=!0;return super.set(a,d)}setRaw(a,d){this._userProperties[a]=!0;super.setRaw(a,d)}_setSoft(a,d){return this._userProperties[a]?d:super.set(a,d)}remove(a){delete this._userProperties[a];this._removeTemplateProperty(a)}setPrivate(a,d){this._userPrivateProperties[a]=!0;return super.setPrivate(a,d)}setPrivateRaw(a,d){this._userPrivateProperties[a]=
!0;super.setPrivateRaw(a,d)}removePrivate(a){delete this._userPrivateProperties[a];this._removeTemplatePrivateProperty(a)}_setTemplateProperty(a,d,f){if(!this._userProperties[d]){const l=this._findTemplateByKey(d);a===l&&super.set(d,f)}}_setTemplatePrivateProperty(a,d,f){if(!this._userPrivateProperties[d]){const l=this._findTemplateByPrivateKey(d);a===l&&super.setPrivate(d,f)}}_removeTemplateProperty(a){if(!this._userProperties[a]){const d=this._findTemplateByKey(a);d?super.set(a,d._settings[a]):
super.remove(a)}}_removeTemplatePrivateProperty(a){if(!this._userPrivateProperties[a]){const d=this._findTemplateByPrivateKey(a);d?super.setPrivate(a,d._privateSettings[a]):super.removePrivate(a)}}_walkParents(a){a(this._root._rootContainer);a(this)}_applyStateByKey(a){const d=this.states.create(a,{}),f={};this._eachTemplate(l=>{(l=l.states.lookup(a))&&l._apply(d,f)});r(d._settings,l=>{f[l]||d._userSettings[l]||d.remove(l)})}_applyTemplate(a,d){this._templateDisposers.push(a._apply(this,d));r(a._settings,
(f,l)=>{d.settings[f]||this._userProperties[f]||(d.settings[f]=!0,super.set(f,l))});r(a._privateSettings,(f,l)=>{d.privateSettings[f]||this._userPrivateProperties[f]||(d.privateSettings[f]=!0,super.setPrivate(f,l))});this._runSetup&&a.setup&&(this._runSetup=!1,a.setup(this))}_findStaticTemplate(a){if(this._template&&a(this._template))return this._template}_eachTemplate(a){this._findStaticTemplate(d=>{a(d);return!1});g(this._internalTemplates,a);v(this._templates,a)}_applyTemplates(a=!0){a&&this._disposeTemplates();
const d={settings:{},privateSettings:{},states:{}};this._eachTemplate(f=>{this._applyTemplate(f,d)});a&&(r(this._settings,f=>{this._userProperties[f]||d.settings[f]||super.remove(f)}),r(this._privateSettings,f=>{this._userPrivateProperties[f]||d.privateSettings[f]||super.removePrivate(f)}))}_findTemplate(a){var d=this._findStaticTemplate(a);if(void 0===d){d=this._internalTemplates;var f;b:{for(f=d.length;0<f;)if(--f,a(d[f],f))break b;f=-1}d=-1!==f?d[f]:void 0;return void 0===d?G(this._templates,a):
d}return d}_findTemplateByKey(a){return this._findTemplate(d=>a in d._settings)}_findTemplateByPrivateKey(a){return this._findTemplate(d=>a in d._privateSettings)}_disposeTemplates(){v(this._templateDisposers,a=>{a.dispose()});this._templateDisposers.length=0}_removeTemplates(){v(this._templates,a=>{a._removeObjectTemplate(this)});this._templates.length=0}_applyThemes(){let a=!1;const d=[];let f=[];const l=new Set,I=this.get("themeTagsSelf");I&&v(I,M=>{l.add(M)});this._walkParents(M=>{M===this._root._rootContainer&&
(a=!0);0<M._defaultThemes.length&&d.push(M._defaultThemes);const U=M.get("themes");U&&f.push(U);(M=M.get("themeTags"))&&v(M,ka=>{l.add(ka)})});f=d.concat(f);this._removeTemplates();a&&g(this.classNames,M=>{const U=[];v(f,ka=>{v(ka,ta=>{(ta=ta._lookupRules(M))&&g(ta,Ia=>{if(Ia.tags.every(Ha=>l.has(Ha))){const Ha=x(U,Xa=>{const Ja=ia(Ia.tags.length,Xa.tags.length);return 0===Ja?sa(Ia.tags,Xa.tags,ia):Ja});U.splice(Ha.index,0,Ia)}})})});v(U,ka=>{this._templates.push(ka.template);ka.template._setObjectTemplate(this)})});
this._applyTemplates();a&&(this._runSetup=!1);return a}_changed(){}_beforeChanged(){if(this.isDirty("id")){var a=this.get("id");a&&this._registerId(a);(a=this._prevSettings.id)&&delete k.entitiesById[a]}}_registerId(a){if(k.entitiesById[a]&&k.entitiesById[a]!==this)throw Error('An entity with id "'+a+'" already exists.');k.entitiesById[a]=this}_afterChanged(){}addDisposer(a){this._disposers.push(a);return a}_dispose(){super._dispose();var a=this._template;a&&a._removeObjectTemplate(this);v(this._internalTemplates,
d=>{d._removeObjectTemplate(this)});this._removeTemplates();this._disposeTemplates();this.events.dispose();this._disposers.forEach(d=>{d.dispose()});r(this._disposerProperties,(d,f)=>{v(f,l=>{l.dispose()})});(a=this.get("id"))&&delete k.entitiesById[a]}setTimeout(a,d){const f=setTimeout(()=>{this.removeDispose(l);a()},d),l=new Ya(()=>{clearTimeout(f)});this._disposers.push(l);return l}removeDispose(a){if(!this.isDisposed()){let d=E(this._disposers,a);-1<d&&this._disposers.splice(d,1)}a.dispose()}hasTag(a){return-1!==
E(this.get("themeTags",[]),a)}addTag(a){if(!this.hasTag(a)){const d=this.get("themeTags",[]);d.push(a);this.set("themeTags",d)}}removeTag(a){if(this.hasTag(a)){const d=this.get("themeTags",[]);A(d,a);this.set("themeTags",d)}}_t(a,d,...f){return this._root.language.translate(a,d,...f)}get root(){return this._root}}Object.defineProperty(ha,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"});Object.defineProperty(ha,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});
class ca{constructor(a,d,f){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this._name=a;this._template=d;this._settings=f}get(a,d){a=this._settings[a];return void 0!==a?a:d}set(a,d){this._settings[a]=d;this._template._stateChanged(this._name)}remove(a){delete this._settings[a];
this._template._stateChanged(this._name)}setAll(a){u(a).forEach(d=>{this._settings[d]=a[d]});this._template._stateChanged(this._name)}_apply(a,d){r(this._settings,(f,l)=>{d[f]||a._userSettings[f]||(d[f]=!0,a.setRaw(f,l))})}}class la{constructor(a){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}});this._template=a}lookup(a){return this._states[a]}create(a,d){const f=
this._states[a];if(f)return f.setAll(d),f;d=new ca(a,this._template,d);this._states[a]=d;this._template._stateChanged(a);return d}remove(a){delete this._states[a];this._template._stateChanged(a)}_apply(a,d){r(this._states,(f,l)=>{let I=d.states[f];null==I&&(I=d.states[f]={});f=a.states.create(f,{});l._apply(f,I)})}}class ua{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(a,d){let f=this._callbacks[a];void 0===f&&(f=this._callbacks[a]=
[]);f.push(d);return new Ya(()=>{C(f,d);0===f.length&&delete this._callbacks[a]})}remove(a){void 0!==this._callbacks[a]&&delete this._callbacks[a]}_apply(a){const d=[];r(this._callbacks,(f,l)=>{v(l,I=>{d.push(a.adapters.add(f,I))})});return new Za(d)}}class N{constructor(a,d){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,
"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new la(this)});Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new ua});Object.defineProperty(this,"events",
{enumerable:!0,configurable:!0,writable:!0,value:new cb});Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0});if(!d)throw Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=a}static new(a){return new N(a,!0)}get entities(){return this._entities}get(a,d){a=this._settings[a];return void 0!==a?a:d}setRaw(a,d){this._settings[a]=d}set(a,d){this._settings[a]!==d&&(this.setRaw(a,d),this._entities.forEach(f=>{f._setTemplateProperty(this,
a,d)}))}remove(a){a in this._settings&&(delete this._settings[a],this._entities.forEach(d=>{d._removeTemplateProperty(a)}))}removeAll(){r(this._settings,(a,d)=>{this.remove(a)})}getPrivate(a,d){a=this._privateSettings[a];return void 0!==a?a:d}setPrivateRaw(a,d){return this._privateSettings[a]=d}setPrivate(a,d){this._privateSettings[a]!==d&&(this.setPrivateRaw(a,d),this._entities.forEach(f=>{f._setTemplatePrivateProperty(this,a,d)}));return d}removePrivate(a){a in this._privateSettings&&(delete this._privateSettings[a],
this._entities.forEach(d=>{d._removeTemplatePrivateProperty(a)}))}setAll(a){r(a,(d,f)=>{this.set(d,f)})}on(a,d){let f=this._settingEvents[a];void 0===f&&(f=this._settingEvents[a]=[]);f.push(d);return new Ya(()=>{C(f,d);0===f.length&&delete this._settingEvents[a]})}onPrivate(a,d){let f=this._privateSettingEvents[a];void 0===f&&(f=this._privateSettingEvents[a]=[]);f.push(d);return new Ya(()=>{C(f,d);0===f.length&&delete this._privateSettingEvents[a]})}_apply(a,d){const f=[];r(this._settingEvents,(l,
I)=>{v(I,M=>{f.push(a.on(l,M))})});r(this._privateSettingEvents,(l,I)=>{v(I,M=>{f.push(a.onPrivate(l,M))})});this.states._apply(a,d);f.push(this.adapters._apply(a));f.push(a.events.copyFrom(this.events));return new Za(f)}_setObjectTemplate(a){this._entities.push(a)}_removeObjectTemplate(a){A(this._entities,a)}_stateChanged(a){this._entities.forEach(d=>{d._applyStateByKey(a)})}}class za extends cb{constructor(a){super();Object.defineProperty(this,"_sprite",{enumerable:!0,configurable:!0,writable:!0,
value:void 0});Object.defineProperty(this,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0});this._sprite=a}_makePointerEvent(a,d){return{type:a,originalEvent:d.event,point:d.point,simulated:d.simulated,native:d.native,target:this._sprite}}_onRenderer(a,d){this._sprite.set("interactive",!0);this._sprite._display.interactive=!0;let f=this._rendererDisposers[a];if(void 0===f){const l=
this._sprite._display.on(a,I=>{d.call(this,I)});f=this._rendererDisposers[a]=new ib(()=>{delete this._rendererDisposers[a];l.dispose()})}return f.increment()}_on(a,d,f,l,I,M){a=super._on(a,d,f,l,I,M);f=za.RENDERER_EVENTS[d];void 0!==f&&(a.disposer=new Za([a.disposer,this._onRenderer(d,f)]));return a}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(a,d){const f=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(a,d),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(a,
d)}finally{this._dispatchParents=f}}}Object.defineProperty(za,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(a){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",a))&&this.dispatch("click",this._makePointerEvent("click",a))},rightclick:function(a){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",a))},middleclick:function(a){this.isEnabled("middleclick")&&
this.dispatch("middleclick",this._makePointerEvent("middleclick",a))},dblclick:function(a){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",a))},pointerover:function(a){this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",a))},pointerout:function(a){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",a))},pointerdown:function(a){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",
a))},pointerup:function(a){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",a))},globalpointerup:function(a){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",a))},globalpointermove:function(a){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",a))},wheel:function(a){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:a.event,
point:a.point})}}});class oa extends ha{constructor(){super(...arguments);Object.defineProperty(this,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}});Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}});Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,
value:void 0});Object.defineProperty(this,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0});
Object.defineProperty(this,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_downPoints",
{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_focusDp",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this.setPrivateRaw("visible",!0);super._afterNew()}_markDirtyKey(a){super._markDirtyKey(a);if("x"==a||"y"==a||"dx"==a||"dy"==a)this.markDirtyBounds(),this._addPercentagePositionChildren(),
this.markDirtyPosition()}_markDirtyPrivateKey(a){super._markDirtyPrivateKey(a);"x"!=a&&"y"!=a||this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new za(this)}_processTemplateField(){let a;const d=this.get("templateField");if(d){var f=this.dataItem;f&&(f=f.dataContext)&&(a=f[d],a instanceof N||!a||(a=N.new(a)))}this._templateField!==a&&(this._removeTemplateField(),(this._templateField=a)&&a._setObjectTemplate(this),
this._applyTemplates())}_setDataItem(a){const d=this._dataItem;this._dataItem=a;this._processTemplateField();a!=d&&this.events.isEnabled("dataitemchanged")&&this.events.dispatch("dataitemchanged",{type:"dataitemchanged",target:this,oldDataItem:d,newDataItem:a})}set dataItem(a){this._setDataItem(a)}get dataItem(){if(this._dataItem)return this._dataItem;let a=this._parent;for(;a;){if(a._dataItem)return a._dataItem;a=a._parent}}_addPercentageSizeChildren(){let a=this.parent;a&&(this.get("width")instanceof
Ra||this.get("height")instanceof Ra?D(a._percentageSizeChildren,this):C(a._percentageSizeChildren,this))}_addPercentagePositionChildren(){let a=this.parent;a&&(this.get("x")instanceof Ra||this.get("y")instanceof Ra?D(a._percentagePositionChildren,this):C(a._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const a=this._localBounds;if(a){var d=this.get("centerX");null!=d&&(this._display.pivot.x=a.left+T(d,a.right-a.left));d=this.get("centerY");
null!=d&&(this._display.pivot.y=a.top+T(d,a.bottom-a.top))}}_beforeChanged(){super._beforeChanged();this._handleStates();if(this.isDirty("tooltip")){var a=this._prevSettings.tooltip;a&&a.dispose()}if(this.isDirty("layer")||this.isDirty("layerMargin"))this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer();if(this.isDirty("tooltipPosition")){if(a=this._tooltipMoveDp)a.dispose(),this._tooltipMoveDp=void 0;if(a=this._tooltipPointerDp)a.dispose(),this._tooltipPointerDp=
void 0;"pointer"==this.get("tooltipPosition")&&(this._tooltipPointerDp=new Za([this.events.on("pointerover",()=>{this._tooltipMoveDp=this.events.on("globalpointermove",d=>{this.showTooltip(d.point)})}),this.events.on("pointerout",()=>{const d=this._tooltipMoveDp;d&&(d.dispose(),this._tooltipMoveDp=void 0)})]))}}_handleStates(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),
this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}_changed(){super._changed();var a=this._display;const d=this.events;if(this.isDirty("draggable")){var f=this.get("draggable");f?(this.set("interactive",!0),this._dragDp=new Za([d.on("pointerdown",
l=>{this.dragStart(l)}),d.on("globalpointermove",l=>{this.dragMove(l)}),d.on("globalpointerup",l=>{this.dragStop(l)})])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0);a.cancelTouch=f?!0:!1}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){f=this.get("tooltipText");const l=this.get("tooltipHTML"),I=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0);if(f||l)"click"==I?this._tooltipDp=new Za([d.on("click",
()=>{this.setTimeout(()=>this.showTooltip(),10)}),m(document,"click",M=>{this.hideTooltip()})]):"always"!=I&&(this._tooltipDp=new Za([d.on("pointerover",()=>{this.showTooltip()}),d.on("pointerout",()=>{this.hideTooltip()})]))}if(this.isDirty("toggleKey")){let l=this.get("toggleKey");l&&"none"!=l?this._toggleDp=d.on("click",()=>{this._isDragging||this.set(l,!this.get(l))}):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}this.isDirty("opacity")&&(a.alpha=Math.max(0,this.get("opacity",
1)));this.isDirty("rotation")&&(this.markDirtyBounds(),a.angle=this.get("rotation",0));this.isDirty("scale")&&(this.markDirtyBounds(),a.scale=this.get("scale",0));if(this.isDirty("centerX")||this.isDirty("centerY"))this.markDirtyBounds(),this.updatePivotPoint();if(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?a.visible=!0:(a.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&
this.markDirtyAccessibility();if(this.isDirty("width")||this.isDirty("height"))this.markDirtyBounds(),this._addPercentageSizeChildren(),(f=this.parent)&&(this.isDirty("width")&&this.get("width")instanceof Ra||this.isDirty("height")&&this.get("height")instanceof Ra)&&(f.markDirty(),f._prevWidth=0),this._sizeDirty=!0;if(this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||
this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))this.markDirtyBounds(),this._sizeDirty=!0;this._sizeDirty&&this._updateSize();this.isDirty("wheelable")&&((f=this.get("wheelable"))&&this.set("interactive",!0),a.wheelable=f?!0:!1);if(this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this);this.isDirty("filter")&&(a.filter=this.get("filter"));
this.isDirty("cursorOverStyle")&&(a.cursorOverStyle=this.get("cursorOverStyle"));this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new Za([d.on("focus",()=>{this.showTooltip()}),d.on("blur",()=>{this.hideTooltip()})]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0));this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility());(this.isDirty("role")||this.isDirty("ariaLive")||
this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility();this.isDirty("exportable")&&(a.exportable=this.get("exportable"));this.isDirty("interactive")&&(a=this.events,this.get("interactive")?this._hoverDp=new Za([a.on("click",l=>{S(l.originalEvent)&&(this.getPrivate("touchHovering")||
this.setTimeout(()=>{this._handleOver();(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip();this.setPrivateRaw("touchHovering",!0);this.events.dispatch("pointerover",{type:"pointerover",target:l.target,originalEvent:l.originalEvent,point:l.point,simulated:l.simulated})},10))}),a.on("globalpointerup",l=>{S(l.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.hideTooltip(),this.setPrivateRaw("touchHovering",
!1),this.events.dispatch("pointerout",{type:"pointerout",target:l.target,originalEvent:l.originalEvent,point:l.point,simulated:l.simulated}));this._isDown&&this._handleUp(l)}),a.on("pointerover",()=>{this._handleOver()}),a.on("pointerout",()=>{this._handleOut()}),a.on("pointerdown",l=>{this._handleDown(l)})]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0)));this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",!1));"always"==this.get("showTooltipOn")&&
this._display.visible&&this.showTooltip()}dragStart(a){this._dragEvent=a;this.events.stopParentDispatch()}dragStop(a){this._dragPoint=this._dragEvent=void 0;this.events.stopParentDispatch();this._isDragging&&(this._isDragging=!1,this.events.isEnabled("dragstop")&&this.events.dispatch("dragstop",{type:"dragstop",target:this,originalEvent:a.originalEvent,point:a.point,simulated:a.simulated}))}_handleOver(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):
this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&
this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(a){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0,delete this._downPoints[a.originalEvent.pointerId||
0],0==u(this._downPoints).length&&(this._isDown=!1))}_hasMoved(a){const d=this._downPoints[a.originalEvent.pointerId||0];if(d){const f=Math.abs(d.y-a.point.y);return 5<Math.abs(d.x-a.point.x)||5<f}return!1}_hasDown(){return 0<u(this._downPoints).length}_handleDown(a){const d=this.parent;d&&!this.get("draggable")&&d._handleDown(a);this.get("interactive")&&!this.isHidden()&&(this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:a.point.x,y:a.point.y},this._isDown=!0,this._downPoints[a.originalEvent.pointerId||
0]={x:a.point.x,y:a.point.y})}dragMove(a){var d=this._dragEvent;if(d){if(d.simulated&&!a.simulated)return!0;let l=0;for(var f=this.parent;null!=f;)l+=f.get("rotation",0),f=f.parent;f=a.point.x-d.point.x;let I=a.point.y-d.point.y;const M=this.events;d.simulated&&!this._isDragging&&(this._isDragging=!0,this._dragEvent=a,this._dragPoint={x:this.x(),y:this.y()},M.isEnabled("dragstart")&&M.dispatch("dragstart",{type:"dragstart",target:this,originalEvent:a.originalEvent,point:a.point,simulated:a.simulated}));
this._isDragging?(d=this._dragPoint,this.set("x",d.x+f*wa(l)+I*pa(l)),this.set("y",d.y+I*wa(l)-f*pa(l)),M.isEnabled("dragged")&&M.dispatch("dragged",{type:"dragged",target:this,originalEvent:a.originalEvent,point:a.point,simulated:a.simulated})):5<Math.hypot(f,I)&&(this._isDragging=!0,this._dragEvent=a,this._dragPoint={x:this.x(),y:this.y()},M.isEnabled("dragstart")&&M.dispatch("dragstart",{type:"dragstart",target:this,originalEvent:a.originalEvent,point:a.point,simulated:a.simulated}))}}_updateSize(){}_getBounds(){this._localBounds=
this._display.getLocalBounds()}depth(){let a=this.parent,d=0;for(;;)if(a)++d,a=a.parent;else return d}markDirtySize(){this._sizeDirty=!0;this.markDirty()}markDirtyBounds(){if(this.get("isMeasured")){var a=this._display;this._root._addDirtyBounds(this);a.isMeasured=!0;a.invalidateBounds();(a=this.parent)&&"absolute"!=this.get("position")&&(null==a.get("width")||null==a.get("height")||a.get("layout"))&&a.markDirtyBounds();this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty();
this.markDirtyLayer()}_updateBounds(){const a=this._adjustedLocalBounds;let d;this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),d=this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds)):this._adjustedLocalBounds=this._localBounds=d={left:0,right:0,top:0,bottom:0};a&&a.left===d.left&&a.top===d.top&&a.right===d.right&&a.bottom===d.bottom||(this.events.isEnabled("boundschanged")&&
this.events.dispatch("boundschanged",{type:"boundschanged",target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds()))}_fixMinBounds(a){var d=this.get("minWidth",this.getPrivate("minWidth")),f=this.get("minHeight",this.getPrivate("minHeight"));F(d)&&a.right-a.left<d&&(a.right=a.left+d);F(f)&&a.bottom-a.top<f&&(a.bottom=a.top+f);d=this.getPrivate("width");f=this.getPrivate("height");F(d)&&(0<d?a.right=a.left+d:a.left=a.right+d);F(f)&&(0<f?a.bottom=a.top+f:a.top=a.bottom+f)}_removeParent(a){a&&
(a.children.removeValue(this),C(a._percentageSizeChildren,this),C(a._percentagePositionChildren,this))}_clearDirty(){super._clearDirty();this._statesHandled=this._sizeDirty=!1}hover(){this.showTooltip();this._handleOver()}unhover(){this.hideTooltip();this._handleOut()}showTooltip(a){const d=this.getTooltip();var f=this.get("tooltipText");const l=this.get("tooltipHTML");if((f||l)&&d){const I=this.get("tooltipPosition"),M=this.getPrivate("tooltipTarget",this);"fixed"!=I&&a||(this._display._setMatrix(),
a=this.toGlobal(M._getTooltipPoint()));d.set("pointTo",a);d.set("tooltipTarget",M);d.get("x")||d.set("x",a.x);d.get("y")||d.set("y",a.y);f&&d.label.set("text",f);l&&d.label.set("html",l);(f=this.dataItem)&&d.label._setDataItem(f);if("always"==this.get("showTooltipOn")&&(0>a.x||a.x>this._root.width()||0>a.y||a.y>this._root.height()))this.hideTooltip();else return d.label.text.markDirtyText(),a=d.show(),this.setPrivateRaw("showingTooltip",!0),a}}hideTooltip(){var a=this.getTooltip();if(a&&a.get("tooltipTarget")==
this.getPrivate("tooltipTarget",this)){let d=a.get("keepTargetHover")&&0==a.get("stateAnimationDuration",0)?400:void 0;a=a.hide(d);this.setPrivateRaw("showingTooltip",!1);return a}}_getTooltipPoint(){const a=this._localBounds;if(a){let d=0,f=0;this.get("isMeasured")?(d=a.left+T(this.get("tooltipX",0),a.right-a.left),f=a.top+T(this.get("tooltipY",0),a.bottom-a.top)):(d=T(this.get("tooltipX",0),this.width()),f=T(this.get("tooltipY",0),this.height()));return{x:d,y:f}}return{x:0,y:0}}getTooltip(){var a=
this.get("tooltip");if(a)return a;if(a=this.parent)return a.getTooltip()}_updatePosition(){var a=this.parent,d=this.get("dx",0);let f=this.get("dy",0);var l=this.get("x");let I=this.getPrivate("x"),M=0,U=0;const ka=this.get("position");l instanceof Ra&&(l=a?a.innerWidth()*l.value+a.get("paddingLeft",0):0);F(l)?M=l+d:null!=I?M=I:a&&"relative"==ka&&(M=a.get("paddingLeft",0)+d);d=this.get("y");l=this.getPrivate("y");d instanceof Ra&&(d=a?a.innerHeight()*d.value+a.get("paddingTop",0):0);F(d)?U=d+f:null!=
l?U=l:a&&"relative"==ka&&(U=a.get("paddingTop",0)+f);a=this._display;if(a.x!=M||a.y!=U)a.invalidateBounds(),a.x=M,a.y=U,this.events.isEnabled("positionchanged")&&this.events.dispatch("positionchanged",{type:"positionchanged",target:this});this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let a=this.get("x"),d=this.getPrivate("x");const f=this.parent;return f?a instanceof Ra?T(a,f.innerWidth())+f.get("paddingLeft",0):F(a)?a:null!=d?d:f.get("paddingLeft",this._display.x):this._display.x}y(){let a=
this.getPrivate("y");if(null!=a)return a;let d=this.get("y");const f=this.parent;return f?d instanceof Ra?T(d,f.innerHeight())+f.get("paddingTop",0):F(d)?d:null!=a?a:f.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose();this._display.dispose();this._removeTemplateField();this._removeParent(this.parent);this._root._removeFocusElement(this);const a=this.get("tooltip");a&&a.dispose();this.markDirty()}adjustedLocalBounds(){this._fixMinBounds(this._adjustedLocalBounds);return this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const a=
this._adjustedLocalBounds,d=this.x(),f=this.y();return{left:a.left+d,right:a.right+d,top:a.top+f,bottom:a.bottom+f}}globalBounds(){var a=this.localBounds();const d=this.toGlobal({x:a.left,y:a.top}),f=this.toGlobal({x:a.right,y:a.top}),l=this.toGlobal({x:a.right,y:a.bottom});a=this.toGlobal({x:a.left,y:a.bottom});return{left:Math.min(d.x,f.x,l.x,a.x),top:Math.min(d.y,f.y,l.y,a.y),right:Math.max(d.x,f.x,l.x,a.x),bottom:Math.max(d.y,f.y,l.y,a.y)}}_onShow(a){}_onHide(a){}appear(a,d){return p.__awaiter(this,
void 0,void 0,function*(){yield this.hide(0);return d?new Promise((f,l)=>{this.setTimeout(()=>{f(this.show(a))},d)}):this.show(a)})}show(a){return p.__awaiter(this,void 0,void 0,function*(){if(!this._isShowing){this._isHidden=!1;this._isShowing=!0;this._isHiding=!1;this.states.lookup("default").get("visible")&&this.set("visible",!0);this._onShow(a);const d=this.states.applyAnimate("default",a);yield qa(d);this._isShowing=!1}})}hide(a){return p.__awaiter(this,void 0,void 0,function*(){if(!this._isHiding&&
!this._isHidden){this._isHiding=!0;this._isShowing=!1;var d=this.states.lookup("hidden");d||(d=this.states.create("hidden",{opacity:0,visible:!1}));this._isHidden=!0;this._onHide(a);d=this.states.applyAnimate("hidden",a);yield qa(d);this._isHiding=!1}})}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return this.get("visible")&&
this.getPrivate("visible")&&!this.get("forceHidden")?!0:!1}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const a=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*a:a}width(){let a=this.get("width"),d=this.get("maxWidth",this.getPrivate("maxWidth")),f=this.get("minWidth",this.getPrivate("minWidth"));var l=this.getPrivate("width");let I=0;F(l)?I=l:null==a?this._adjustedLocalBounds&&(I=this._adjustedLocalBounds.right-
this._adjustedLocalBounds.left):a instanceof Ra?I=(l=this.parent)?l.innerWidth()*a.value:this._root.width()*a.value:F(a)&&(I=a);F(f)&&(I=Math.max(f,I));F(d)&&(I=Math.min(d,I));return I}maxWidth(){var a=this.get("maxWidth",this.getPrivate("maxWidth"));if(F(a))return a;a=this.get("width");return F(a)?a:(a=this.parent)?a.innerWidth():this._root.width()}maxHeight(){var a=this.get("maxHeight",this.getPrivate("maxHeight"));if(F(a))return a;a=this.get("height");return F(a)?a:(a=this.parent)?a.innerHeight():
this._root.height()}height(){let a=this.get("height"),d=this.get("maxHeight",this.getPrivate("maxHeight")),f=this.get("minHeight",this.getPrivate("minHeight"));var l=this.getPrivate("height");let I=0;F(l)?I=l:null==a?this._adjustedLocalBounds&&(I=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top):a instanceof Ra?I=(l=this.parent)?l.innerHeight()*a.value:this._root.height()*a.value:F(a)&&(I=a);F(f)&&(I=Math.max(f,I));F(d)&&(I=Math.min(d,I));return I}_findStaticTemplate(a){return this._templateField&&
a(this._templateField)?this._templateField:super._findStaticTemplate(a)}_walkParents(a){this._parent&&this._walkParent(a)}_walkParent(a){this._parent&&this._parent._walkParent(a);a(this)}get parent(){return this._parent}_setParent(a,d=!1){const f=this._parent;a!==f&&(this.markDirtyBounds(),a.markDirty(),this._parent=a,d&&(this._removeParent(f),a&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",
this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",this._root.durationFormatter)}toGlobal(a){return this._display.toGlobal(a)}toLocal(a){return this._display.toLocal(a)}_getDownPoint(){const a=this._getDownPointId();if(a)return this._downPoints[a]}_getDownPointId(){if(this._downPoints)return t(this._downPoints,(a,d)=>a>d?1:a<d?-1:0)[0]}toFront(){const a=this.parent;a&&a.children.moveValue(this,
a.children.length-1)}toBack(){const a=this.parent;a&&a.children.moveValue(this,0)}}Object.defineProperty(oa,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"});Object.defineProperty(oa,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ha.classNames.concat([oa.className])});class Ca extends ha{constructor(){super(...arguments);Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()});Object.defineProperty(this,
"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()});Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged();if(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||
this.isDirty("color")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fill")||this.isDirty("fillOpacity"))this._clear=!0}_changed(){super._changed();if(this._clear){const a=this.get("repetition",""),d=this.get("width",100),f=this.get("height",100),l=this.get("fill"),I=this.get("fillOpacity",1);this._display.clear();this._backgroundDisplay.clear();l&&0<I&&(this._backgroundDisplay.beginFill(l,I),this._backgroundDisplay.drawRect(0,
0,d,f),this._backgroundDisplay.endFill());this._display.angle=this.get("rotation",0);this._draw();this._pattern=this._root._renderer.createPattern(this._display,this._backgroundDisplay,a,d,f)}}}Object.defineProperty(Ca,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"});Object.defineProperty(Ca,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ha.classNames.concat([Ca.className])});class ma extends Ca{constructor(){super(...arguments);Object.defineProperty(this,"_image",
{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged();this._clear=!0;this.isDirty("src")&&this._load()}_draw(){super._draw();const a=this._image;if(a){const f=this.get("width",100),l=this.get("height",100);var d=this.get("fit","image");let I=0,M=0;"pattern"==d?(I=f,M=l):(I=a.width,M=a.height,"image"==d&&(this.set("width",I),this.set("height",M)));let U=d=0;this.get("centered",!0)&&(d=f/2-I/2,U=l/2-M/2);this._display.image(a,I,M,d,U)}}_load(){const a=this.get("src");
if(a){const d=new Image;d.src=a;d.decode().then(()=>{this._image=d;this._draw();this.events.isEnabled("loaded")&&this.events.dispatch("loaded",{type:"loaded",target:this})}).catch(f=>{})}}}Object.defineProperty(ma,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"});Object.defineProperty(ma,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ca.classNames.concat([ma.className])});n.BlendMode=void 0;(function(a){a.ADD="lighter";a.COLOR="color";a.COLOR_BURN="color-burn";
a.COLOR_DODGE="color-dodge";a.DARKEN="darken";a.DIFFERENCE="difference";a.DST_OVER="destination-over";a.EXCLUSION="exclusion";a.HARD_LIGHT="hard-light";a.HUE="hue";a.LIGHTEN="lighten";a.LUMINOSITY="luminosity";a.MULTIPLY="multiply";a.NORMAL="source-over";a.OVERLAY="overlay";a.SATURATION="saturation";a.SCREEN="screen";a.SOFT_LIGHT="soft-light";a.SRC_ATOP="source-atop";a.XOR="xor"})(n.BlendMode||(n.BlendMode={}));class La extends oa{constructor(){super(...arguments);Object.defineProperty(this,"_display",
{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()});Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){super._beforeChanged();(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds();if(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||
this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))this._clear=!0;this._display.crisp=this.get("crisp",!1);if(this.isDirty("fillGradient")){var a=this.get("fillGradient");
a&&(this._display.isMeasured=!0,a=a.get("target"))&&(this._disposers.push(a.events.on("boundschanged",()=>{this._markDirtyKey("fill")})),this._disposers.push(a.events.on("positionchanged",()=>{this._markDirtyKey("fill")})))}this.isDirty("strokeGradient")&&(a=this.get("strokeGradient"))&&(this._display.isMeasured=!0,a=a.get("target"))&&(this._disposers.push(a.events.on("boundschanged",()=>{this._markDirtyKey("stroke")})),this._disposers.push(a.events.on("positionchanged",()=>{this._markDirtyKey("stroke")})))}_changed(){super._changed();
if(this._clear){this.markDirtyBounds();this.markDirtyLayer();this._display.clear();var a=this.get("strokeDasharray");F(a)&&(a=.5>a?[0]:[a]);this._display.setLineDash(a);(a=this.get("strokeDashoffset"))&&this._display.setLineDashOffset(a);a=this.get("blendMode",n.BlendMode.NORMAL);this._display.blendMode=a;(a=this.get("draw"))&&a(this._display,this);a=this.get("svgPath");null!=a&&this._display.svgPath(a)}}_afterChanged(){super._afterChanged();if(this._clear){const I=this.get("fill");var a=this.get("fillGradient"),
d=this.get("fillPattern");const M=this.get("fillOpacity"),U=this.get("stroke");var f=this.get("strokeGradient"),l=this.get("strokePattern");const ka=this.get("shadowColor"),ta=this.get("shadowBlur"),Ia=this.get("shadowOffsetX"),Ha=this.get("shadowOffsetY"),Xa=this.get("shadowOpacity");ka&&(ta||Ia||Ha)&&this._display.shadow(ka,ta,Ia,Ha,Xa);if(d){if(a=!1,!I||d.get("fill")&&!d.get("fillInherited")||(d.set("fill",I),d.set("fillInherited",!0),a=!0),!U||d.get("color")&&!d.get("colorInherited")||(d.set("color",
U),d.set("colorInherited",!0),a=!0),a&&d._changed(),a=d.pattern)if(this._display.beginFill(a,M),this._display.endFill(),d instanceof ma)d.events.once("loaded",()=>{this._clear=!0;this.markDirty()})}else if(a){if(I&&(d=a.get("stops",[]),d.length&&v(d,Ja=>{Ja.color&&!Ja.colorInherited||!I||(Ja.color=I,Ja.colorInherited=!0);if(null==Ja.opacity||Ja.opacityInherited)Ja.opacity=M,Ja.opacityInherited=!0})),d=a.getFill(this))this._display.beginFill(d,M),this._display.endFill()}else I&&(this._display.beginFill(I,
M),this._display.endFill());if(U||f||l){const Ja=this.get("strokeOpacity");d=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(d/=this.get("scale",1));this.get("crisp")&&(d/=this._root._renderer.resolution);a=this.get("lineJoin");if(l){if(f=!1,!U||l.get("color")&&!l.get("colorInherited")||(l.set("color",U),l.set("colorInherited",!0),f=!0),f&&l._changed(),f=l.pattern)if(this._display.lineStyle(d,f,Ja,a),this._display.endStroke(),l instanceof ma)l.events.once("loaded",()=>{this._clear=!0;this.markDirty()})}else if(f){if(l=
f.get("stops",[]),l.length&&v(l,$a=>{$a.color&&!$a.colorInherited||!U||($a.color=U,$a.colorInherited=!0);if(null==$a.opacity||$a.opacityInherited)$a.opacity=Ja,$a.opacityInherited=!0}),l=f.getFill(this))this._display.lineStyle(d,l,Ja,a),this._display.endStroke()}else U&&(this._display.lineStyle(d,U,Ja,a),this._display.endStroke())}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}}Object.defineProperty(La,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"});
Object.defineProperty(La,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:oa.classNames.concat([La.className])});class Ea extends La{_beforeChanged(){super._beforeChanged();if(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))this._clear=!0}_changed(){super._changed();this._clear&&!this.get("draw")&&this._draw()}_draw(){this._display.drawRect(0,0,this.width(),this.height())}_updateSize(){this.markDirty();this._clear=!0}}Object.defineProperty(Ea,
"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"});Object.defineProperty(Ea,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:La.classNames.concat([Ea.className])});class Pa extends ha{}Object.defineProperty(Pa,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"});Object.defineProperty(Pa,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ha.classNames.concat([Pa.className])});class Qa extends Pa{updateContainer(a){let d=a.get("paddingLeft",
0),f=a.innerWidth(),l=0;ya(a,M=>{if(M.isVisible()&&"relative"==M.get("position")){let U=M.get("width");if(U instanceof Ra){l+=U.value;let ka=f*U.value,ta=M.get("minWidth",M.getPrivate("minWidth",-Infinity));ta>ka&&(f-=ta,l-=U.value);M=M.get("maxWidth",M.getPrivate("maxWidth",Infinity));ka>M&&(f-=M,l-=U.value)}else F(U)||(U=M.width()),f-=U+M.get("marginLeft",0)+M.get("marginRight",0)}});if(0>=f||Infinity==f)f=.1;ya(a,M=>{if(M.isVisible()&&"relative"==M.get("position")){var U=M.get("width");if(U instanceof
Ra){U=f*U.value/l-M.get("marginLeft",0)-M.get("marginRight",0);let ka=M.get("minWidth",M.getPrivate("minWidth",-Infinity)),ta=M.get("maxWidth",M.getPrivate("maxWidth",Infinity));U=Math.min(Math.max(ka,U),ta);M.setPrivate("width",U)}}});let I=d;ya(a,M=>{if("relative"==M.get("position"))if(M.isVisible()){var U=M.adjustedLocalBounds(),ka=M.get("marginLeft",0);let ta=M.get("marginRight",0),Ia=M.get("maxWidth"),Ha=U.left;U=U.right;Ia&&U-Ha>Ia&&(U=Ha+Ia);ka=I+ka-Ha;M.setPrivate("x",ka);I=ka+U+ta}else M.setPrivate("x",
void 0)})}}Object.defineProperty(Qa,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"});Object.defineProperty(Qa,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Pa.classNames.concat([Qa.className])});class Oa extends Pa{updateContainer(a){let d=a.get("paddingTop",0),f=a.innerHeight(),l=0;ya(a,M=>{if(M.isVisible()&&"relative"==M.get("position")){let U=M.get("height");if(U instanceof Ra){l+=U.value;let ka=f*U.value,ta=M.get("minHeight",M.getPrivate("minHeight",
-Infinity));ta>ka&&(f-=ta,l-=U.value);M=M.get("maxHeight",M.getPrivate("maxHeight",Infinity));ka>M&&(f-=M,l-=U.value)}else F(U)||(U=M.height()),f-=U+M.get("marginTop",0)+M.get("marginBottom",0)}});if(0>=f||Infinity==f)f=.1;ya(a,M=>{if(M.isVisible()&&"relative"==M.get("position")){var U=M.get("height");if(U instanceof Ra){U=f*U.value/l-M.get("marginTop",0)-M.get("marginBottom",0);let ka=M.get("minHeight",M.getPrivate("minHeight",-Infinity)),ta=M.get("maxHeight",M.getPrivate("maxHeight",Infinity));
U=Math.min(Math.max(ka,U),ta);M.setPrivate("height",U)}}});let I=d;ya(a,M=>{if("relative"==M.get("position"))if(M.isVisible()){var U=M.adjustedLocalBounds(),ka=M.get("marginTop",0);let Ia=U.top;U=U.bottom;var ta=M.get("maxHeight");ta&&U-Ia>ta&&(U=Ia+ta);ta=M.get("marginBottom",0);ka=I+ka-Ia;M.setPrivate("y",ka);I=ka+U+ta}else M.setPrivate("y",void 0)})}}Object.defineProperty(Oa,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"});Object.defineProperty(Oa,"classNames",{enumerable:!0,
configurable:!0,writable:!0,value:Pa.classNames.concat([Oa.className])});class Ua extends Pa{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE);super._afterNew()}updateContainer(a){let d=a.get("paddingLeft",0);var f=a.get("paddingRight",0);let l=a.get("paddingTop",0),I=f=a.maxWidth()-d-f,M=1;ya(a,Ja=>{Ja.get("visible")&&Ja.getPrivate("visible")&&!Ja.get("forceHidden")&&"absolute"!=Ja.get("position")&&(Ja=Ja.width(),Ja<I&&(I=Ja),Ja>M&&(M=Ja))});I=va(I,1,f);M=va(M,1,f);let U=1;U=this.get("fixedWidthGrid")?
f/M:f/I;U=Math.max(1,Math.floor(U));U=Math.min(this.get("maxColumns",Number.MAX_VALUE),U);let ka=this.getColumnWidths(a,U,M,f),ta=l,Ia=0,Ha=0;U=ka.length;let Xa=d;ya(a,Ja=>{if("relative"==Ja.get("position")&&Ja.isVisible()){const $a=Ja.get("marginTop",0),qb=Ja.get("marginBottom",0);let mb=Ja.adjustedLocalBounds(),ab=Ja.get("marginLeft",0),bb=Ja.get("marginRight",0),gb=ta+$a-mb.top;Ja.setPrivate("x",Xa+ab-mb.left);Ja.setPrivate("y",gb);Xa+=ka[Ia]+bb;Ha=Math.max(Ha,Ja.height()+$a+qb);Ia++;Ia>=U&&(Ia=
0,Xa=d,ta+=Ha)}})}getColumnWidths(a,d,f,l){let I=0,M=[],U=0;ya(a,ka=>{let ta=ka.adjustedLocalBounds();"absolute"!=ka.get("position")&&ka.isVisible()&&(this.get("fixedWidthGrid")?M[U]=f:M[U]=Math.max(M[U]|0,ta.right-ta.left+ka.get("marginLeft",0)+ka.get("marginRight",0)),U<a.children.length-1&&(U++,U==d&&(U=0)))});v(M,ka=>{I+=ka});return I>l?2<d?(--d,this.getColumnWidths(a,d,f,l)):[l]:M}}Object.defineProperty(Ua,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"});Object.defineProperty(Ua,
"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Pa.classNames.concat([Ua.className])});class Wa{static escape(a){return a.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/''/g,this.prefix+"5")}static unescape(a){return a.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3",
"g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(a){return a.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/''/g,"'")}static chunk(a,d=!1,f=!1){let l=[];a=this.escape(a);a=d?a.split("'"):[a];for(d=0;d<a.length;d++){var I=a[d];if(""!==I)if(0===d%2){I=I.replace(/\]\[/g,"]__\u00a7\u00a7\u00a7__[");I=I.replace(/\[\]/g,"[ ]");I=I.split(/[\[\]]+/);for(var M=0;M<I.length;M++){var U=this.cleanUp(this.unescape(I[M]));
"__\u00a7\u00a7\u00a7__"!==U&&""!==U&&(0===M%2?l.push({type:"value",text:U}):l.push({type:f?"value":"format",text:"["+U+"]"}))}}else for(I=I.split(/[\[\]]+/),M=0;M<I.length;M++)U=this.cleanUp(this.unescape(I[M])),""!==U&&(0===M%2?l.push({type:"text",text:U}):this.isImage(U)?l.push({type:"image",text:"["+U+"]"}):l.push({type:"format",text:"["+U+"]"}))}return l}static isImage(a){return a.match(/img[ ]?:/)?!0:!1}static getTextStyle(a){let d={};if(""==a||"[ ]"==a)return{};var f=a.match(/('[^']*')|("[^"]*")/gi);
if(f)for(var l=0;l<f.length;l++)a=a.replace(f[l],f[l].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));a=a.match(/([\w\-]*:[\s]?[^;\s\]]*)|(#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!a)return{};for(f=0;f<a.length;f++)a[f].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i)?d.fontWeight=a[f]:a[f].match(/^(underline|line-through)$/i)?d.textDecoration=a[f]:"/"!=a[f]&&(a[f].match(/:/)?(l=a[f].replace("+"," ").split(/:[ ]*/),d[l[0]]=l[1]):d.fill=Va.fromString(a[f]));return d}}Object.defineProperty(Wa,
"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});class Sa extends oa{constructor(){super(...arguments);Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()});Object.defineProperty(this,"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()});Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:new pb(this)});Object.defineProperty(this,
"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,
"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew();this._display.addChild(this._childrenDisplay)}_dispose(){g(this.allChildren(),a=>{a.dispose()});this.getPrivate("htmlElement")&&
this._root._removeHTMLContent(this);super._dispose()}_changed(){super._changed();this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1));this.isDirty("layout")&&(this._prevHeight=this._prevWidth=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each(a=>{a.removePrivate("x");a.removePrivate("y")}));(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each(a=>
{a.markDirtyPosition()});if(this.isDirty("maskContent")){const a=this._childrenDisplay;let d=this._contentMask;this.get("maskContent")?d||(this._contentMask=d=Ea.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),a.addChildAt(d._display,0),a.mask=d._display):d&&(a.removeChild(d._display),a.mask=null,d.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize();v(this._percentageSizeChildren,a=>{a._updateSize()});v(this._percentagePositionChildren,a=>{a.markDirtyPosition();
a._updateSize()});this.updateBackground()}updateBackground(){var a=this.get("background"),d=this._localBounds;if(d&&!this.isHidden()){var f=d.left;let I=d.top,M=d.right-f,U=d.bottom-I;d=this.get("maxWidth");var l=this.get("maxHeight");l&&U>l&&(U=l);d&&M>d&&(M=d);l=this.width();d=this.height();a&&(a.setAll({width:M,height:U,x:f,y:I}),this._display.interactive&&(a._display.interactive=!0));(a=this._contentMask)&&a.setAll({width:l+1,height:d+1});if(a=this.get("verticalScrollbar"))a.set("height",d),a.set("x",
l-a.width()-a.get("marginRight",0)),a.set("end",a.get("start",0)+d/this._contentHeight),(f=a.get("background"))&&f.setAll({width:a.width(),height:d}),f=!0,this._contentHeight<=d&&(f=!1),a.setPrivate("visible",f)}}_applyThemes(){return super._applyThemes()?(this.eachChildren(a=>{a._applyThemes()}),!0):!1}_applyState(a){super._applyState(a);this.get("setStateOnChildren")&&this.eachChildren(d=>{d.states.apply(a)})}_applyStateAnimated(a,d){super._applyStateAnimated(a,d);this.get("setStateOnChildren")&&
this.eachChildren(f=>{f.states.applyAnimate(a,d)})}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){let a=this.get("width"),d=this.get("height"),f=this.getPrivate("width"),l=this.getPrivate("height"),I={left:0,top:0,right:this.width(),bottom:this.height()};var M=this.get("layout");let U=!1,ka=!1;if(M instanceof Qa||M instanceof Ua)U=!0;M instanceof Oa&&(ka=!0);
if(null==a&&null==f||null==d&&null==l||this.get("verticalScrollbar")){let ta=M=Number.MAX_VALUE,Ia=-M,Ha=M,Xa=-M;const Ja=this.get("paddingLeft",0),$a=this.get("paddingTop",0),qb=this.get("paddingRight",0),mb=this.get("paddingBottom",0);this.children.each(ab=>{if("absolute"!=ab.get("position")&&ab.get("isMeasured")){var bb=ab.adjustedLocalBounds(),gb=ab.x();let tb=ab.y(),rb=gb+bb.left;gb+=bb.right;let sb=tb+bb.top;bb=tb+bb.bottom;U&&(rb-=ab.get("marginLeft",0),gb+=ab.get("marginRight",0));ka&&(sb-=
ab.get("marginTop",0),bb+=ab.get("marginBottom",0));rb<ta&&(ta=rb);gb>Ia&&(Ia=gb);sb<Ha&&(Ha=sb);bb>Xa&&(Xa=bb)}});ta==M&&(ta=0);Ia==-M&&(Ia=0);Ha==M&&(Ha=0);Xa==-M&&(Xa=0);I.left=ta-Ja;I.top=Ha-$a;I.right=Ia+qb;I.bottom=Xa+mb}this._contentWidth=I.right-I.left;this._contentHeight=I.bottom-I.top;F(a)&&(I.left=0,I.right=a);F(f)&&(I.left=0,I.right=f);F(d)&&(I.top=0,I.bottom=d);F(l)&&(I.top=0,I.bottom=l);this._localBounds=I}_updateBounds(){const a=this.get("layout");a&&a.updateContainer(this);super._updateBounds();
this.updateBackground()}markDirty(){super.markDirty();this._root._addDirtyParent(this)}_prepareChildren(){const a=this.innerWidth(),d=this.innerHeight();if(a!=this._prevWidth||d!=this._prevHeight){let f=this.get("layout"),l=!1,I=!1;if(f){if(f instanceof Qa||f instanceof Ua)l=!0;f instanceof Oa&&(I=!0)}v(this._percentageSizeChildren,M=>{if(!l){var U=M.get("width");U instanceof Ra&&M.setPrivate("width",U.value*a)}I||(U=M.get("height"),U instanceof Ra&&M.setPrivate("height",U.value*d))});v(this._percentagePositionChildren,
M=>{M.markDirtyPosition();M.markDirtyBounds()});this._prevWidth=a;this._prevHeight=d;this._sizeDirty=!0;this.updateBackground()}this._handleStates()}_updateChildren(){if(this.isDirty("html")){var a=this.get("html");a&&""!==a?this._root._setHTMLContent(this,Fa(this,this.get("html",""))):this._root._removeHTMLContent(this);this._root._positionHTMLElement(this)}if(this.isDirty("verticalScrollbar")){const f=this.get("verticalScrollbar");if(f)f._setParent(this),f.children.removeValue(f.startGrip),f.children.removeValue(f.endGrip),
this.set("maskContent",!0),this.set("paddingRight",f.width()+f.get("marginRight",0)+f.get("marginLeft",0)),(a=this.get("background"))||(a=this.set("background",Ea.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",l=>{l=l.originalEvent;if(P(l,this)){l.preventDefault();l=l.deltaY/5E3;var I=f.get("start",0),M=f.get("end",1);0>=I+l&&(l=-I);1<=M+l&&(l=1-M);0<=I+l&&1>=M+l&&(f.set("start",I+l),f.set("end",
M+l))}}),this._disposers.push(this._vsbd0),this._vsbd1=f.events.on("rangechanged",()=>{let l=this._contentHeight;const I=this._childrenDisplay,M=this._contentMask;I.y=-f.get("start")*l;I.markDirtyLayer();M&&(M._display.y=-I.y,I.mask=M._display)}),this._disposers.push(this._vsbd1),this._display.addChild(f._display);else if(a=this._prevSettings.verticalScrollbar)this._display.removeChild(a._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose(),this._childrenDisplay.y=0,this.setPrivate("height",
void 0),this.set("maskContent",!1),this.set("paddingRight",void 0)}this.isDirty("background")&&((a=this._prevSettings.background)&&this._display.removeChild(a._display),a=this.get("background"),a instanceof oa&&(a.set("isMeasured",!1),a._setParent(this),this._display.addChildAt(a._display,0)));if(this.isDirty("mask")){a=this.get("mask");var d=this._prevSettings.mask;d&&(this._display.removeChild(d._display),d!=a&&d.dispose());a&&((d=a.parent)&&d.children.removeValue(a),a._setParent(this),this._display.addChildAt(a._display,
0),this._childrenDisplay.mask=a._display)}}_processTemplateField(){super._processTemplateField();this.children.each(a=>{a._processTemplateField()})}walkChildren(a){this.children.each(d=>{d instanceof Sa&&d.walkChildren(a);a(d)})}eachChildren(a){var d=this.get("background");d&&a(d);(d=this.get("verticalScrollbar"))&&a(d);(d=this.get("mask"))&&a(d);this.children.values.forEach(f=>{a(f)})}allChildren(){const a=[];this.eachChildren(d=>{a.push(d)});return a}_setDataItem(a){const d=a!==this._dataItem;super._setDataItem(a);
(a=this.get("html",""))&&""!==a&&d&&this._root._setHTMLContent(this,Fa(this,a))}}Object.defineProperty(Sa,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"});Object.defineProperty(Sa,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:oa.classNames.concat([Sa.className])});class Ga extends oa{constructor(){super(...arguments);Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()});Object.defineProperty(this,
"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText("",this.textStyle)});Object.defineProperty(this,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:"textAlign fontFamily fontSize fontStyle fontWeight fontStyle fontVariant textDecoration shadowColor shadowBlur shadowOffsetX shadowOffsetY shadowOpacity lineHeight baselineRatio direction textBaseline oversizedBehavior breakWords ellipsis minScale".split(" ")});Object.defineProperty(this,"_originalScale",
{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){this.get("text")?super._updateBounds():this._adjustedLocalBounds={left:0,right:0,top:0,bottom:0}}_changed(){super._changed();this._display.clear();let a=this.textStyle;if(this.isDirty("opacity")){var d=this.get("opacity",1);this._display.alpha=d}if(this.isDirty("text")||this.isDirty("populateText"))this._display.text=this._getText(),this.markDirtyBounds(),"tooltip"==this.get("role")&&this._root.updateTooltip(this);this.isPrivateDirty("tooltipElement")&&
this.getPrivate("tooltipElement")&&this._disposers.push(new Ya(()=>{this._root._removeTooltipElement(this)}));this.isDirty("width")&&(a.wordWrapWidth=this.width(),this.markDirtyBounds());this.isDirty("oversizedBehavior")&&(a.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds());this.isDirty("breakWords")&&(a.breakWords=this.get("breakWords",!1),this.markDirtyBounds());this.isDirty("ellipsis")&&(a.ellipsis=this.get("ellipsis"),this.markDirtyBounds());this.isDirty("ignoreFormatting")&&
(a.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds());this.isDirty("minScale")&&(a.minScale=this.get("minScale",0),this.markDirtyBounds());this.isDirty("fill")&&(d=this.get("fill"))&&(a.fill=d);this.isDirty("fillOpacity")&&(d=this.get("fillOpacity",1))&&(a.fillOpacity=d);if(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))a.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds();if(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))a.maxHeight=
this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds();v(this._textStyles,f=>{this._dirty[f]&&(a[f]=this.get(f),this.markDirtyBounds())});a.fontSize=this.get("fontSize");a.fontFamily=this.get("fontFamily");this._display.style=a;this.isDirty("role")&&"tooltip"==this.get("role")&&this._root.updateTooltip(this)}_getText(){const a=this.get("text","");return this.get("populateText")?Fa(this,a):a}markDirtyText(){this._display.text=this._getText();"tooltip"==this.get("role")&&this._root.updateTooltip(this);
this.markDirtyBounds();this.markDirty()}_setDataItem(a){super._setDataItem(a);this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}}Object.defineProperty(Ga,"className",{enumerable:!0,configurable:!0,writable:!0,
value:"Text"});Object.defineProperty(Ga,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:oa.classNames.concat([Ga.className])});class Ta extends Sa{constructor(){super(...arguments);Object.defineProperty(this,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:"text fill fillOpacity textAlign fontFamily fontSize fontStyle fontWeight fontStyle fontVariant textDecoration shadowColor shadowBlur shadowOffsetX shadowOffsetY shadowOpacity lineHeight baselineRatio direction textBaseline oversizedBehavior breakWords ellipsis minScale populateText role ignoreFormatting".split(" ")})}get text(){return this._text}_afterNew(){super._afterNew();
this._makeText();v(this._textKeys,a=>{const d=this.get(a);void 0!=d&&this._text.set(a,d)});""!==this.get("html","")&&this._text.set("text","");this.onPrivate("maxWidth",()=>{this._setMaxDimentions()});this.onPrivate("maxHeight",()=>{this._setMaxDimentions()})}_makeText(){this._text=this.children.push(Ga.new(this._root,{}))}_updateChildren(){super._updateChildren();v(this._textKeys,a=>{this._text.set(a,this.get(a))});this.isDirty("maxWidth")&&this._setMaxDimentions();this.isDirty("maxHeight")&&this._setMaxDimentions();
this.isDirty("rotation")&&this._setMaxDimentions();""!==this.get("html","")?this._text.set("text",""):this._text.set("text",this.get("text"));if(this.isDirty("textAlign")||this.isDirty("width")){const a=this.get("textAlign");let d;if(null!=this.get("width"))d="right"==a?kb:"center"==a?lb:0;else if("left"==a||"start"==a)d=this.get("paddingLeft");else if("right"==a||"end"==a)d=-this.get("paddingRight");this.text.set("x",d)}}_setMaxDimentions(){var a=this.get("rotation");a=90==a||270==a||-90==a;var d=
this.get("maxWidth",this.getPrivate("maxWidth",Infinity));F(d)?this.text.set(a?"maxHeight":"maxWidth",d-this.get("paddingLeft",0)-this.get("paddingRight",0)):this.text.set(a?"maxHeight":"maxWidth",void 0);d=this.get("maxHeight",this.getPrivate("maxHeight",Infinity));F(d)?this.text.set(a?"maxWidth":"maxHeight",d-this.get("paddingTop",0)-this.get("paddingBottom",0)):this.text.set(a?"maxWidth":"maxHeight",void 0)}_setDataItem(a){super._setDataItem(a);this._markDirtyKey("text");this.text.get("populateText")&&
this.text.markDirtyText()}getText(){return this._text._getText()}}Object.defineProperty(Ta,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"});Object.defineProperty(Ta,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Sa.classNames.concat([Ta.className])});class Ma{constructor(a,d){Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}});this._root=
a;if(!d)throw Error("You cannot use `new Class()`, instead use `Class.new()`");}static new(a){a=new this(a,!0);a.setupDefaultRules();return a}setupDefaultRules(){}_lookupRules(a){return this._rules[a]}ruleRaw(a,d=[]){let f=this._rules[a];f||(f=this._rules[a]=[]);d.sort(ia);const {index:l,found:I}=L(f,M=>{const U=ia(M.tags.length,d.length);return 0===U?sa(M.tags,d,ia):U});if(I)return f[l].template;a=N.new({});f.splice(l,0,{tags:d,template:a});return a}rule(a,d=[]){return this.ruleRaw(a,d)}}n.ArrayDisposer=
nb;n.Color=Va;n.Container=Sa;n.CounterDisposer=ib;n.DEGREES=fb;n.Disposer=Ya;n.DisposerClass=eb;n.Entity=ha;n.EventDispatcher=cb;n.Graphics=La;n.GridLayout=Ua;n.HorizontalLayout=Qa;n.Label=Ta;n.List=hb;n.ListAutoDispose=jb;n.ListTemplate=ob;n.MultiDisposer=Za;n.PLACEHOLDER="__\u00a7\u00a7\u00a7__";n.PLACEHOLDER2="__\u00a7\u00a7\u00a7\u00a7__";n.Percent=Ra;n.RADIANS=db;n.Rectangle=Ea;n.Settings=aa;n.Template=N;n.Text=Ga;n.TextFormatter=Wa;n.Theme=Ma;n.VerticalLayout=Oa;n.addEventListener=m;n.addLicense=
function(a){k.licenses.push(a)};n.blur=function(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let a=document.createElement("button");a.style.position="fixed";a.style.top="0px";a.style.left="-10000px";document.body.appendChild(a);a.focus();a.blur();document.body.removeChild(a)}};n.capitalizeFirst=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};n.ceil=function(a,d){if(!F(d)||0>=d)return Math.ceil(a);d=Math.pow(10,
d);return Math.ceil(a*d)/d};n.cleanFormat=function(a){return a.replace(/\/(date|number|duration)$/i,"")};n.color=function(a){return Va.fromAny(a)};n.compare=ia;n.compareNumber=function(a,d){return a===d?0:a<d?-1:1};n.copy=function(a){return Object.assign({},a)};n.copy$1=function(a){const d=a.length,f=Array(d);for(let l=0;l<d;++l)f[l]=a[l];return f};n.cos=wa;n.cubic=ba;n.decimalPlaces=function(a){return(a=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:
0)):0};n.each=v;n.each$1=r;n.eachContinue=function(a,d){for(let f in a)if({}.hasOwnProperty.call(a,f)&&!d(f,a[f]))break};n.eachContinue$1=function(a,d){const f=a.length;for(let l=0;l<f&&d(a[l],l);++l);};n.escapeForRgex=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")};n.find=G;n.fitToRange=va;n.focus=function(a){a&&a.focus()};n.get12Hours=function(a,d){12<a?a-=12:0===a&&(a=12);return null!=d?a+(d-1):a};n.getArcBounds=function(a,d,f,l,I){let M=Number.MAX_VALUE,U=Number.MAX_VALUE,
ka=-Number.MAX_VALUE,ta=-Number.MAX_VALUE,Ia=[];Ia.push(Ka(I,f));Ia.push(Ka(I,l));var Ha=Math.min(90*Math.floor(f/90),90*Math.floor(l/90));let Xa=Math.max(90*Math.ceil(f/90),90*Math.ceil(l/90));for(;Ha<=Xa;Ha+=90)Ha>=f&&Ha<=l&&Ia.push(Ka(I,Ha));for(f=0;f<Ia.length;f++)l=Ia[f],l.x<M&&(M=l.x),l.y<U&&(U=l.y),l.x>ka&&(ka=l.x),l.y>ta&&(ta=l.y);return{left:a+M,top:d+U,right:a+ka,bottom:d+ta}};n.getDayFromWeek=function(a,d,f=1,l=!1){let I=new Date(d,0,4,0,0,0,0);l&&I.setUTCFullYear(d);return 7*a+f-((I.getDay()||
7)+3)};n.getEventTarget=function(a){return a.composedPath?(a=a.composedPath(),0===a.length?null:a[0]):a.target};n.getMonthWeek=function(a,d=!1){const f=z(new Date(a.getFullYear(),a.getMonth(),1),d);a=z(a,d);1==a&&(a=53);return a-f+1};n.getRendererEvent=function(a){if(!J("pointerevents"))if(J("touchevents"))switch(a){case "pointerover":return"touchstart";case "pointerout":return"touchend";case "pointerdown":return"touchstart";case "pointermove":return"touchmove";case "pointerup":return"touchend";case "click":return"click";
case "dblclick":return"dblclick"}else if(J("mouseevents"))switch(a){case "pointerover":return"mouseover";case "pointerout":return"mouseout";case "pointerdown":return"mousedown";case "pointermove":return"mousemove";case "pointerup":return"mouseup";case "click":return"click";case "dblclick":return"dblclick"}return a};n.getSafeResolution=function(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document?1:void 0};n.getStyle=function(a,d){return a.style[d]};n.getTimeZone=function(a,d=!1,f=!1,l=
!1){if(l)return d?"Coordinated Universal Time":"UTC";l=a.toLocaleString("UTC");a=a.toLocaleString("UTC",{timeZoneName:d?"long":"short"}).substr(l.length);!1===f&&(a=a.replace(/ (standard|daylight|summer|winter) /i," "));return a};n.getTimezoneOffset=function(a){const d=new Date(Date.UTC(2012,0,1,0,0,0,0)),f=new Date(d.toLocaleString("en-US",{timeZone:"UTC"}));return((new Date(d.toLocaleString("en-US",{timeZone:a}))).getTime()-f.getTime())/6E4*-1};n.getWeek=z;n.getWeekYear=function(a,d){a=new Date(Date.UTC(a.getFullYear(),
a.getMonth(),a.getDate()));d=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-d);return(new Date(Date.UTC(a.getUTCFullYear(),0,1))).getFullYear()};n.getYearDay=function(a,d){d=new Date(a.getFullYear(),0,0);a=a.getTime()-d.getTime()+6E4*(d.getTimezoneOffset()-a.getTimezoneOffset());return Math.floor(a/864E5)};n.indexOf=E;n.isLocalEvent=P;n.isNaN=w;n.isNumber=F;n.isObject=R;n.isString=K;n.isTouchEvent=S;n.keepIf=function(a,d){let f=a.length;for(;0<f;)--f,d(a[f])||a.splice(f,1)};n.keys=u;n.map=function(a,
d){const f=a.length,l=Array(f);for(let I=0;I<f;++I)l[I]=d(a[I],I);return l};n.mergeBounds=function(a){const d=a.length;if(0<d){let f=a[0],l=f.left,I=f.top,M=f.right,U=f.bottom;if(1<d)for(let ka=1;ka<d;ka++)f=a[ka],l=Math.min(f.left,l),M=Math.max(f.right,M),I=Math.min(f.top,I),U=Math.max(f.bottom,U);return{left:l,right:M,top:I,bottom:U}}return{left:0,right:0,top:0,bottom:0}};n.mergeTags=function(a,d){a||(a=[]);return[...a,...d].filter((f,l,I)=>I.indexOf(f)===l)};n.normalizeAngle=function(a){a%=360;
0>a&&(a+=360);return a};n.numberToString=function(a){if(w(a))return"NaN";if(Infinity===a)return"Infinity";if(-Infinity===a)return"-Infinity";if(0===a&&-Infinity===1/a)return"-0";let d=0>a;a=Math.abs(a);var f=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+a),l=f[1];let I=f[2]||"";void 0===f[3]?l=""===I?l:l+"."+I:(f=+f[3],1>a?l="0."+Array(f-1+1).join("0")+l+I:(a=f-I.length,l=0===a?l+I:0>a?l+I.slice(0,a)+"."+I.slice(a):l+I+Array(a+1).join("0")));return d?"-"+l:l};n.onZoom=function(a){return m(window,
"resize",d=>{a()})};n.out=function(a){return function(d){return 1-a(1-d)}};n.p100=kb;n.p50=lb;n.padString=da;n.percent=W;n.percentInterpolate=Ba;n.populateString=Fa;n.pushOne=D;n.registry=k;n.relativeToValue=T;n.remove=A;n.removeElement=function(a){a.parentNode&&a.parentNode.removeChild(a)};n.removeFirst=C;n.round=function(a,d,f){if(!F(d)||0>=d)return d=Math.round(a),f&&.5==d-a&&d--,d;f=Math.pow(10,d);return Math.round(a*f)/f};n.sameBounds=function(a,d){return d&&a.left==d.left&&a.right==d.right&&
a.top==d.top&&a.bottom==d.bottom?!0:!1};n.setInteractive=function(a,d){a.style.pointerEvents=d?"auto":"none"};n.setStyle=function(a,d,f){a.style[d]=f};n.sin=pa;n.stripTags=function(a){return a?a.replace(/<[^>]*>/g,""):a};n.supports=J;n.toNumber=h;n.trim=Y;n.visualSettings="fill fillOpacity stroke strokeWidth strokeOpacity fillPattern strokePattern fillGradient strokeGradient strokeDasharray strokeDashoffset".split(" ")})},"esri/chunks/Tooltip":function(){define(["exports","./Theme"],function(n,p){class w extends p.Graphics{_beforeChanged(){super._beforeChanged();
if(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))this._clear=!0}_changed(){super._changed();if(this._clear){this.markDirtyBounds();var H=this.width();let F=this.height();if(0<H&&0<F){let R=this.get("cornerRadius",8);R=p.fitToRange(R,0,Math.min(H/2,F/2));let E=this.get("pointerX",0),X=this.get("pointerY",0),v=this.get("pointerBaseWidth",15)/2,g=(E-0)*(F-
0)-(X-0)*(H-0),A=(E-0)*(0-F)-(X-F)*(H-0);const C=this._display;C.moveTo(R,0);if(0<g&&0<A){var K=Math.round(p.fitToRange(E,R+v,H-v-R));X=p.fitToRange(X,-Infinity,0);C.lineTo(K-v,0);C.lineTo(E,X);C.lineTo(K+v,0)}C.lineTo(H-R,0);C.arcTo(H,0,H,R,R);0<g&&0>A&&(K=Math.round(p.fitToRange(X,R+v,F-v-R)),E=p.fitToRange(E,H,Infinity),C.lineTo(H,R),C.lineTo(H,Math.max(K-v,R)),C.lineTo(E,X),C.lineTo(H,K+v));C.lineTo(H,F-R);C.arcTo(H,F,H-R,F,R);0>g&&0>A&&(K=Math.round(p.fitToRange(E,R+v,H-v-R)),X=p.fitToRange(X,
F,Infinity),C.lineTo(H-R,F),C.lineTo(K+v,F),C.lineTo(E,X),C.lineTo(K-v,F));C.lineTo(R,F);C.arcTo(0,F,0,F-R,R);0>g&&0<A&&(H=Math.round(p.fitToRange(X,R+v,F-R-v)),E=p.fitToRange(E,-Infinity,0),C.lineTo(0,F-R),C.lineTo(0,H+v),C.lineTo(E,X),C.lineTo(0,Math.max(H-v,R)));C.lineTo(0,R);C.arcTo(0,0,R,0,R);C.closePath()}}}}Object.defineProperty(w,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"});Object.defineProperty(w,"classNames",{enumerable:!0,configurable:!0,writable:!0,
value:p.Graphics.classNames.concat([w.className])});class h extends p.Container{constructor(H,K,F,R=[]){super(H,K,F,R);Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,
writable:!0,value:!1})}_afterNew(){this._settings.themeTags=p.mergeTags(this._settings.themeTags,["tooltip"]);super._afterNew();this.set("background",w.new(this._root,{themeTags:["tooltip","background"]}));this._label=this.children.push(p.Label.new(this._root,{}));this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()}));this._disposers.push(this.on("bounds",()=>{this._updateBackground()}));this._updateTextColor();this._root.tooltipContainer.children.push(this);this.hide(0);
this._disposers.push(this.label.onPrivate("htmlElement",H=>{H&&(p.addEventListener(H,"pointerover",K=>{this._htmlContentHovered=!0}),p.addEventListener(H,"pointerout",K=>{this._htmlContentHovered=!1}))}));this._root._tooltips.push(this)}get label(){return this._label}dispose(){super.dispose();p.remove(this._root._tooltips,this)}_updateChildren(){super._updateChildren();(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width");
null!=this.get("labelText")&&this.label.set("text",this.get("labelText"));null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML"))}_changed(){super._changed();(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground();this.isDirty("tooltipTarget")&&this.updateBackgroundColor();if(this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const H=this.get("background");this._keepHoverDp=new p.MultiDisposer([H.events.on("pointerover",K=>{if(K=this.get("tooltipTarget"))K.parent&&
K.parent.getPrivate("tooltipTarget")==K&&(K=K.parent),K.hover()}),H.events.on("pointerout",K=>{if(K=this.get("tooltipTarget"))K.parent&&K.parent.getPrivate("tooltipTarget")==K&&(K=K.parent),this._htmlContentHovered||K.unhover()})])}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow();this.updateBackgroundColor()}updateBackgroundColor(){let H=this.get("tooltipTarget");const K=this.get("background");let F,R;H&&K&&(F=H.get("fill"),R=H.get("stroke"),
null==F&&(F=R),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=F&&K.set("fill",F),this._fillDp=H.on("fill",E=>{null!=E&&(K.set("fill",E),this._updateTextColor(E))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=F&&K.set("stroke",F),this._strokeDp=H.on("fill",E=>{null!=E&&K.set("stroke",E)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),
null!=F&&this.label.set("fill",F),this._labelDp=H.on("fill",E=>{null!=E&&this.label.set("fill",E)}),this._disposers.push(this._labelDp)));this._updateTextColor(F)}_updateTextColor(H){this.get("autoTextColor")&&(null==H&&(H=this.get("background").get("fill")),null==H&&(H=this._root.interfaceColors.get("background")),H instanceof p.Color&&this.label.set("fill",p.Color.alternative(H,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(H){super._setDataItem(H);
this.label._setDataItem(H)}_updateBackground(){super.updateBackground();var H=this._root.container;if(H){var K=.5,F=.5,R=this.get("centerX");R instanceof p.Percent&&(K=R.value);R=this.get("centerY");R instanceof p.Percent&&(F=R.value);var E=H.width(),X=H.height(),v=this.parent;R=H=0;v&&(H=v.x(),R=v.y(),v=v.get("layerMargin"))&&(H+=v.left||0,R+=v.top||0,E+=(v.left||0)+(v.right||0),X+=(v.top||0)+(v.bottom||0));v=this.get("bounds",{left:-H,top:-R,right:E-H,bottom:X-R});this._updateBounds();H=this.width();
R=this.height();0===H&&(H=this._w);0===R&&(R=this._h);let C=this.get("pointTo",{x:E/2,y:X/2});E=C.x;X=C.y;let D=this.get("pointerOrientation"),y=this.get("background"),G=0,L=0,x=0;y instanceof w&&(G=y.get("pointerLength",0),x=L=y.get("strokeWidth",0)/2,y.set("width",H),y.set("height",R));var g=0,A=0;g=v.right-v.left;A=v.bottom-v.top;"horizontal"==D||"left"==D||"right"==D?(L=0,"horizontal"==D?E>v.left+g/2?(E-=H*(1-K)+G,x*=-1):E+=H*K+G:"left"==D?E+=H*(1-K)+G:(E-=H*K+G,x*=-1)):(x=0,"vertical"==D?X>v.top+
R/2+G?X-=R*(1-F)+G:(X+=R*F+G,L*=-1):"down"==D?X-=R*(1-F)+G:(X+=R*F+G,L*=-1));E=p.fitToRange(E,v.left+H*K,v.left+g-H*(1-K))+x;X=p.fitToRange(X,v.top+R*F,v.top+A-R*(1-F))-L;g=C.x-E+H*K+x;A=C.y-X+R*F-L;this._fx=E;this._fy=X;K=this.get("animationDuration",0);0<K&&this.get("visible")&&.1<this.get("opacity")?(F=this.get("animationEasing"),this.animate({key:"x",to:E,duration:K,easing:F}),this.animate({key:"y",to:X,duration:K,easing:F})):(this.set("x",E),this.set("y",X));y instanceof w&&(y.set("pointerX",
g),y.set("pointerY",A));0<H&&(this._w=H);0<R&&(this._h=R)}}}Object.defineProperty(h,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"});Object.defineProperty(h,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:p.Container.classNames.concat([h.className])});n.Tooltip=h})},"esri/chunks/DefaultTheme":function(){define(["exports","./Theme"],function(n,p){function w(H,K,F,R){H.set(K,F.get(R));F.on(R,E=>{H.set(K,E)})}class h extends p.Theme{setupDefaultRules(){super.setupDefaultRules();
var H=this._root.language;const K=this._root.interfaceColors;var F=this._root.horizontalLayout,R=this._root.verticalLayout,E=this.rule.bind(this);E("InterfaceColors").setAll({stroke:p.Color.fromHex(15066597),fill:p.Color.fromHex(15987699),primaryButton:p.Color.fromHex(6788316),primaryButtonHover:p.Color.fromHex(6779356),primaryButtonDown:p.Color.fromHex(6872182),primaryButtonActive:p.Color.fromHex(6872182),primaryButtonText:p.Color.fromHex(16777215),primaryButtonStroke:p.Color.fromHex(16777215),secondaryButton:p.Color.fromHex(14277081),
secondaryButtonHover:p.Color.fromHex(10724259),secondaryButtonDown:p.Color.fromHex(9276813),secondaryButtonActive:p.Color.fromHex(15132390),secondaryButtonText:p.Color.fromHex(0),secondaryButtonStroke:p.Color.fromHex(16777215),grid:p.Color.fromHex(0),background:p.Color.fromHex(16777215),alternativeBackground:p.Color.fromHex(0),text:p.Color.fromHex(0),alternativeText:p.Color.fromHex(16777215),disabled:p.Color.fromHex(11382189),positive:p.Color.fromHex(5288704),negative:p.Color.fromHex(11730944)});
const X=E("ColorSet");X.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[p.Color.fromHex(6797276)],step:1,reuse:!1,startIndex:0});X.setPrivate("currentStep",0);X.setPrivate("currentPass",0);E("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:p.out(p.cubic)});E("Component").setAll({interpolationDuration:0,interpolationEasing:p.out(p.cubic)});E("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:p.p50,tooltipY:p.p50,tooltipPosition:"fixed",
isMeasured:!0});E("Sprite").states.create("default",{visible:!0,opacity:1});E("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1});E("Graphics").setAll({strokeWidth:1});E("Chart").setAll({width:p.p100,height:p.p100,interactiveChildren:!1});E("Sprite",["horizontal","center"]).setAll({centerX:p.p50,x:p.p50});E("Sprite",["vertical","center"]).setAll({centerY:p.p50,y:p.p50});E("Container",["horizontal","layout"]).setAll({layout:F});E("Container",["vertical","layout"]).setAll({layout:R});
E("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1});E("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49});E("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0});E("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45});E("LinearGradient").setAll({rotation:90});E("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:p.GridLayout.new(this._root,
{}),layer:30,clickTarget:"itemContainer"});E("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:F,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:H.translate("Press ENTER to toggle"),role:"checkbox"});R=E("Rectangle",["legend","item","background"]);R.setAll({fillOpacity:0});w(R,"fill",K,"background");E("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:p.p50,paddingLeft:0,paddingRight:0,
paddingBottom:0,paddingTop:0,width:18,height:18});E("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:p.p100,height:p.p100,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});R=E("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});w(R,"fill",K,"disabled");w(R,"stroke",K,"disabled");E("Label",["legend","label"]).setAll({centerY:p.p50,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0});R=E("Label",["legend",
"label"]).states.create("disabled",{});w(R,"fill",K,"disabled");E("Label",["legend","value","label"]).setAll({centerY:p.p50,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:p.p100,populateText:!0});R=E("Label",["legend","value","label"]).states.create("disabled",{});w(R,"fill",K,"disabled");E("HeatLegend").setAll({stepCount:1});E("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0});E("RoundedRectangle",
["vertical","heatlegend","marker"]).setAll({height:p.p100,width:15});E("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:p.p100,height:15});E("HeatLegend",["vertical"]).setAll({height:p.p100});E("HeatLegend",["horizontal"]).setAll({width:p.p100});E("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});E("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});R=E("Label");R.setAll({paddingTop:8,
paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1});w(R,"fill",K,"text");E("RadialLabel").setAll({textType:"regular",centerY:p.p50,centerX:p.p50,inside:!1,radius:0,baseRadius:p.p100,orientation:"auto",textAlign:"center"});E("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8});
E("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8});E("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});R=E("Tick");R.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0});w(R,"stroke",K,"grid");E("Bullet").setAll({locationX:.5,locationY:.5});E("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",
centerX:p.p50,centerY:p.p50,animationEasing:p.out(p.cubic),exportable:!1});E("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:p.Color.fromHex(16777215)});R=E("Label",["tooltip"]);R.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0});w(R,"fill",K,"alternativeText");E("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:F,
interactiveChildren:!1,setStateOnChildren:!0,focusable:!0});E("Button").states.create("hover",{});E("Button").states.create("down",{stateAnimationDuration:0});E("Button").states.create("active",{});F=E("RoundedRectangle",["button","background"]);w(F,"fill",K,"primaryButton");w(F,"stroke",K,"primaryButtonStroke");F=E("RoundedRectangle",["button","background"]).states.create("hover",{});w(F,"fill",K,"primaryButtonHover");F=E("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0});
w(F,"fill",K,"primaryButtonDown");F=E("RoundedRectangle",["button","background"]).states.create("active",{});w(F,"fill",K,"primaryButtonActive");F=E("Graphics",["button","icon"]);w(F,"stroke",K,"primaryButtonText");F=E("Label",["button"]);w(F,"fill",K,"primaryButtonText");E("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:p.p100,role:"button",ariaLabel:H.translate("Zoom Out"),layer:30});F=E("RoundedRectangle",["background","button",
"zoom"]);F.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40});w(F,"fill",K,"primaryButton");F=E("RoundedRectangle",["background","button","zoom"]).states.create("hover",{});w(F,"fill",K,"primaryButtonHover");F=E("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0});w(F,"fill",K,"primaryButtonDown");F=E("Graphics",["icon","button","zoom"]);F.setAll({crisp:!0,strokeOpacity:.7,draw:v=>{v.moveTo(0,0);v.lineTo(12,0)}});w(F,"stroke",
K,"primaryButtonText");E("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:p.p50,centerY:p.p50,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:H.translate("Use up and down arrows to move selection")});F=E("RoundedRectangle",["background","resize","button"]);F.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40});w(F,"fill",K,"secondaryButton");w(F,"stroke",K,"secondaryButtonStroke");
F=E("RoundedRectangle",["background","resize","button"]).states.create("hover",{});w(F,"fill",K,"secondaryButtonHover");F=E("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0});w(F,"fill",K,"secondaryButtonDown");F=E("Graphics",["resize","button","icon"]);F.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:v=>{v.moveTo(0,.5);v.lineTo(0,12.5);v.moveTo(4,.5);v.lineTo(4,12.5)}});w(F,"stroke",K,"secondaryButtonText");E("Button",["resize","vertical"]).setAll({rotation:90,
cursorOverStyle:"ns-resize"});E("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"});E("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:H.translate("Play"),toggleKey:"active"});F=E("RoundedRectangle",["play","background"]);F.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100});w(F,"fill",K,"primaryButton");F=E("Graphics",["play","icon"]);F.setAll({stateAnimationDuration:0,dx:1,draw:v=>
{v.moveTo(0,-5);v.lineTo(8,0);v.lineTo(0,5);v.lineTo(0,-5)}});w(F,"fill",K,"primaryButtonText");E("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0});E("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:v=>{v.moveTo(-4,-5);v.lineTo(-1,-5);v.lineTo(-1,5);v.lineTo(-4,5);v.lineTo(-4,-5);v.moveTo(4,-5);v.lineTo(1,-5);v.lineTo(1,5);v.lineTo(4,5);v.lineTo(4,-5)}});E("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,
ariaLabel:H.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});F=E("RoundedRectangle",["switch","background"]);F.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100});w(F,"fill",K,"primaryButton");F=E("Circle",["switch","icon"]);F.setAll({radius:8,centerY:0,centerX:0,dx:0});w(F,"fill",K,"primaryButtonText");E("Graphics",["switch","icon"]).states.create("active",{dx:16});E("Scrollbar").setAll({start:0,end:1,layer:30,
animationEasing:p.out(p.cubic)});E("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:p.p100});E("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:p.p100});this.rule("Button",["scrollbar"]).setAll({exportable:!1});F=E("RoundedRectangle",["scrollbar","main","background"]);F.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8});w(F,"fill",K,"fill");F=E("RoundedRectangle",["scrollbar","thumb"]);F.setAll({role:"slider",
ariaLive:"polite",position:"absolute",draggable:!0});w(F,"fill",K,"secondaryButton");F=E("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{});w(F,"fill",K,"secondaryButtonHover");F=E("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0});w(F,"fill",K,"secondaryButtonDown");E("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:p.p50,width:p.p100,centerX:p.p50,ariaLabel:H.translate("Use up and down arrows to move selection")});E("RoundedRectangle",
["scrollbar","thumb","horizontal"]).setAll({y:p.p50,centerY:p.p50,height:p.p100,ariaLabel:H.translate("Use left and right arrows to move selection")});H=E("PointedRectangle",["axis","tooltip","background"]);H.setAll({cornerRadius:0});w(H,"fill",K,"alternativeBackground");E("Label",["axis","tooltip"]).setAll({role:void 0});E("Label",["axis","tooltip","y"]).setAll({textAlign:"right"});E("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"});E("Label",["axis","tooltip","x"]).setAll({textAlign:"center"});
E("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"});E("Star").setAll({spikes:5,innerRadius:5,radius:10});E("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7});E("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3});E("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"});E("SpriteResizer").setAll({rotationStep:10});E("Container",["resizer","grip"]).states.create("hover",{});H=E("RoundedRectangle",
["resizer","grip"]);H.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12});w(H,"fill",K,"background");w(H,"stroke",K,"alternativeBackground");H=E("RoundedRectangle",["resizer","grip","outline"]);H.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20});H.states.create("hover",{fillOpacity:.3});w(H,"fill",K,"alternativeBackground");E("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});E("RoundedRectangle",
["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});E=E("Rectangle",["resizer","rectangle"]);E.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1});w(E,"stroke",K,"alternativeBackground")}}n.DefaultTheme=h;n.setColor=w})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/RelationshipContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A,C,D,y,G,L,x,Z,W,u,t,r,m){h=function(J){function S(T){var da=J.call(this,T)||this;da._abortController=null;da.expressionInfo=null;da.graphic=null;da.contentElement=null;da.contentElementViewModel=null;da.interceptor=null;da.view=null;da._cancelQuery=()=>{const {_abortController:Y}=n._assertThisInitialized(da);Y&&Y.abort();da._abortController=null};da._createVM=()=>{var Y=da.contentElement?.type;da.contentElementViewModel?.destroy();Y="fields"===Y?new t:"media"===
Y?new r:"text"===Y?new u:null;da._set("contentElementViewModel",Y)};da._compile=async()=>{da._cancelQuery();const Y=new AbortController;da._abortController=Y;await da._compileExpression();da._abortController===Y&&(da._abortController=null)};da._compileThrottled=F.throttle(da._compile,1,n._assertThisInitialized(da));da._compileExpression=async()=>{const {expressionInfo:Y,graphic:z,interceptor:Q,spatialReference:ea,map:fa,view:ja,_abortController:na}=n._assertThisInitialized(da);if(Y&&z&&ea&&fa){var qa=
await m.loadArcadeUtils();if(na===da._abortController)if((qa=await m.createCompiledExpression({arcadeUtils:qa,expressionInfo:Y,graphic:z,interceptor:Q,map:fa,spatialReference:ea,view:ja}))&&"esri.arcade.Dictionary"===qa.declaredClass){qa=await qa.castAsJsonAsync(na?.signal);var ra=qa?.type;qa="media"===ra?L.fromJSON(qa):"text"===ra?Z.fromJSON(qa):"fields"===ra?G.fromJSON(qa):null;da._set("contentElement",qa)}else da._set("contentElement",null)}else da._set("contentElement",null)};da.handles.add([K.watch(()=>
[da.expressionInfo,da.graphic,da.map,da.spatialReference,da.view],()=>da._compileThrottled(),K.initial),K.watch(()=>[da.contentElement],()=>da._createVM(),K.initial)]);return da}n._inherits(S,J);var P=S.prototype;P.initialize=function(){this.addHandles(this._compileThrottled)};P.destroy=function(){this._cancelQuery();this.contentElementViewModel?.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};n._createClass(S,[{key:"spatialReference",get:function(){return this.view?.spatialReference??
null},set:function(T){this._override("spatialReference",T)}},{key:"state",get:function(){const {_abortController:T,contentElement:da,contentElementViewModel:Y}=this;return T?"loading":da||Y?"ready":"disabled"}},{key:"map",get:function(){return this.view?.map??null},set:function(T){this._override("map",T)}}]);return S}(H.HandleOwnerMixin(h));p.__decorate([R.property()],h.prototype,"_abortController",void 0);p.__decorate([R.property({type:W})],h.prototype,"expressionInfo",void 0);p.__decorate([R.property({type:w})],
h.prototype,"graphic",void 0);p.__decorate([R.property({readOnly:!0})],h.prototype,"contentElement",void 0);p.__decorate([R.property({readOnly:!0})],h.prototype,"contentElementViewModel",void 0);p.__decorate([R.property()],h.prototype,"interceptor",void 0);p.__decorate([R.property()],h.prototype,"spatialReference",null);p.__decorate([R.property({readOnly:!0})],h.prototype,"state",null);p.__decorate([R.property()],h.prototype,"map",null);p.__decorate([R.property()],h.prototype,"view",void 0);return h=
p.__decorate([g.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],h)})},"esri/core/throttle":function(){define(["exports"],function(n){n.throttle=function(p,w,h,H){let K=null,F=1E3;"number"===typeof w?(F=w,H=h):(K=w??null,F=h);let R=0,E;const X=()=>{R=0;p.apply(H,E)};w=(...v)=>{K&&K.apply(H,v);E=v;F?R||(R=setTimeout(X,F)):X()};w.remove=()=>{R&&(clearTimeout(R),R=0)};w.forceUpdate=()=>{R&&(clearTimeout(R),X())};w.hasPendingUpdates=()=>!!R;return w};Object.defineProperty(n,
Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(n,p,w,h,H,K){function F(D){return`<ul class="esri-widget__list">${D.map(y=>`<li>${"string"===typeof y?K.applyTextFormattingHTML(K.htmlEntities(y)):y}</li>`).join("")}</ul>`}function R(D){return`<table class="esri-widget__table">${D.keys().map(y=>{var G=D.field(y);
G="string"===typeof G?K.applyTextFormattingHTML(K.htmlEntities(G)):G;return`<tr><th>${y}</th><td>${G}</td></tr>`}).join("")}</table>`}function E({aggregatedFeatures:D,arcadeUtils:y,featureSetVars:G,context:L,viewInfo:x,map:Z,graphic:W,interceptor:u}){G.forEach(t=>{t=t.toLowerCase();var r=x.sr;const m={map:Z,spatialReference:r,interceptor:u};"$map"===t&&(L.vars[t]=y.convertMapToFeatureSetCollection(m));"$layer"===t&&(L.vars[t]=y.convertFeatureLayerToFeatureSet({layer:W.sourceLayer,spatialReference:r,
interceptor:u}));"$datastore"===t&&(L.vars[t]=y.convertServiceUrlToWorkspace({url:W.sourceLayer.url,spatialReference:r,interceptor:u}));if("$aggregatedfeatures"===t){r=W.layer;const {fields:J,objectIdField:S,geometryType:P,spatialReference:T,displayField:da}=r;r=new H({fields:J,objectIdField:S,geometryType:P,spatialReference:T,displayField:da,...("feature"===r.type?{templates:r.templates,typeIdField:r.typeIdField,types:r.types}:null),source:D});L.vars[t]=y.convertFeatureLayerToFeatureSet({layer:r,
spatialReference:T,interceptor:u})}})}function X(){return new Promise((D,y)=>n(["../../../support/arcadeUtils"],D,y))}async function v({graphic:D,view:y}){const {isAggregate:G,layer:L}=D;if(!G||!L||"2d"!==y?.type)return[];y=await y.whenLayerView(L);if(!("createQuery"in y&&"queryFeatures"in y))return[];const x=y.createQuery();D=D.getObjectId();x.aggregateIds=null!=D?[D]:[];({features:D}=await y.queryFeatures(x));return D}async function g({expressionInfo:D,arcadeUtils:y,interceptor:G,spatialReference:L,
map:x,graphic:Z,view:W}){if(!D||!D.expression)return null;const u=y.createSyntaxTree(D.expression),t=A.filter(m=>y.hasVariable(u,m));[W]=await Promise.all([v({graphic:Z,view:W}),y.loadScriptDependencies(u,!0,t)]);const r=y.getViewInfo({spatialReference:L});L=y.createExecContext(Z,r);L.interceptor=G;L.useAsync=!0;E({aggregatedFeatures:W,arcadeUtils:y,featureSetVars:t,context:L,viewInfo:r,map:x,graphic:Z,interceptor:G});G=y.createFunction(u,L);return y.executeAsyncFunction(G,L).catch(m=>C.error("arcade-execution-error",
{error:m,graphic:Z,expressionInfo:D}))}const A=["$datastore","$map","$layer","$aggregatedfeatures"],C=w.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");p.createCompiledExpression=g;p.createCompiledExpressions=async function({expressionInfos:D,spatialReference:y,graphic:G,interceptor:L,map:x,view:Z}){if(!D||!D.length)return{};const W=await X(),u={};for(const t of D)u[`expression/${t.name}`]=g({expressionInfo:t,arcadeUtils:W,interceptor:L,spatialReference:y,map:x,graphic:G,view:Z});D=await h.eachAlways(u);
y={};for(const t in D)G=D[t].value,G="string"===typeof G?K.applyTextFormattingHTML(K.htmlEntities(G)):Array.isArray(G)?F(G):"esri.arcade.Dictionary"===G?.declaredClass?R(G):G,y[t]=G;return y};p.loadArcadeUtils=X;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureRelationship":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureRelationship/FeatureRelationshipViewModel ./support/FeatureElementInfo ../support/componentsUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../intl/substitute".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A,C,D,y,G,L,x,Z){const W={title:!0,description:!0};h=function(u){function t(m,J){var S=u.call(this,m,J)||this;S._featureElementInfo=null;S._relatedFeatureIntersectionObserverNode=null;S._relatedFeatureIntersectionObserver=new IntersectionObserver(([P])=>{P?.isIntersecting&&S._increaseFeaturePage()},{root:window.document});S.headingLevel=2;S.viewModel=new C;S.messages=null;S.messagesCommon=null;S.visibleElements={...W};S._increaseFeaturePage=()=>{const {state:P,showAllEnabled:T,
relatedFeatures:da,featuresPerPage:Y,featurePage:z}=S.viewModel;"ready"===P&&T&&da.length>=Y*z&&S.viewModel.featurePage++};return S}p._inherits(t,u);var r=t.prototype;r.initialize=function(){this._featureElementInfo=new D;this.addHandles([F.watch(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),F.initial),F.watch(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),
F.on(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])};r.loadDependencies=function(){return y.loadCalciteComponents({icon:()=>new Promise((m,J)=>n(["../../chunks/calcite-icon"],m,J)),list:()=>new Promise((m,J)=>n(["../../chunks/calcite-list"],m,J)),"list-item":()=>new Promise((m,J)=>n(["../../chunks/calcite-list-item"],m,J)),notice:()=>new Promise((m,J)=>n(["../../chunks/calcite-notice"],m,J))})};r.destroy=function(){this._unobserveRelatedFeatureObserver();
this._featureElementInfo=H.destroyMaybe(this._featureElementInfo)};r.castVisibleElements=function(m){return{...W,...m}};r.renderStickyLoading=function(){return"querying"===this.viewModel.state?x.tsx("div",{key:"sticky-loader",class:"esri-feature__sticky-loading-container"},this.renderLoadingIcon()):null};r.renderLoadingIcon=function(){return x.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")})};r.renderLoading=function(){return x.tsx("div",
{key:"loading-container",class:"esri-feature__loading-container"},this.renderLoadingIcon())};r.renderShowAllIconNode=function(){return x.tsx("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})};r.renderChevronIconNode=function(){const m=G.isRTL(this.container)?"chevron-left":"chevron-right";return x.tsx("calcite-icon",{scale:"s",icon:m,slot:"content-end"})};r.renderRelatedFeature=function(m){const {itemDescriptionFieldName:J}=this.viewModel,S=m.title;m.description=J&&m.formattedAttributes?.global[J];
return x.tsx("calcite-list-item",{class:this.classes("esri-feature-relationship__list-item",{["esri-feature-relationship__list-item--hidden"]:"loading"===m.state}),key:m.uid,label:S,description:m.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:m})},this.renderChevronIconNode())};r.renderShowAllListItem=function(){return this.displayShowAllButton?x.tsx("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,
onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null};r.renderNoRelatedFeaturesMessage=function(){return x.tsx("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},x.tsx("div",{slot:"message"},this.messages?.noRelatedFeatures))};r.renderFeatureObserver=function(){return x.tsx("div",{key:"feature-observer",class:"esri-feature__feature-observer",bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})};
r.renderList=function(){const {relatedFeatureViewModels:m}=this.viewModel;return x.tsx("calcite-list",null,m.toArray().map(J=>this.renderRelatedFeature(J)),this.renderShowAllListItem())};r.renderRelatedFeatures=function(){const {displayListItems:m}=this,{state:J}=this.viewModel;return x.tsx("div",{key:"list-container",class:this.classes("esri-feature-relationship__list",{["esri-feature-relationship__list--querying"]:"querying"===J})},m?this.renderList():"ready"===J?this.renderNoRelatedFeaturesMessage():
null,this.renderStickyLoading(),this.renderFeatureObserver())};r.renderRelationshipNotFound=function(){return x.tsx("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},x.tsx("div",{slot:"message"},this.messages?.relationshipNotFound))};r.render=function(){const {state:m}=this.viewModel;return x.tsx("div",{class:this.classes("esri-feature-relationship","esri-widget")},this._featureElementInfo?.render(),"loading"===m?this.renderLoading():
"disabled"===m?this.renderRelationshipNotFound():this.renderRelatedFeatures())};r._setupRelatedFeatureViewModels=function(){const {relatedFeatureViewModels:m}=this.viewModel;this.removeHandles("related-feature-viewmodels");m?.forEach(J=>{this.addHandles(F.watch(()=>[J.title,J.state],()=>this.scheduleRender(),F.initial),"related-feature-viewmodels")});this.scheduleRender()};r._setupFeatureElementInfo=function(){const {headingLevel:m,visibleElements:J}=this,S=J.description&&this.description,P=J.title&&
this.title;this._featureElementInfo?.set({description:S,title:P,headingLevel:m})};r._handleRelatedFeatureObserverChange=async function(){this._unobserveRelatedFeatureObserver();const {state:m,showAllEnabled:J}=this.viewModel;await K.after(0);this._relatedFeatureIntersectionObserverNode&&"ready"===m&&J&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)};r._relatedFeatureIntersectionObserverCreated=function(m){this._relatedFeatureIntersectionObserverNode=
m};r._unobserveRelatedFeatureObserver=function(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)};p._createClass(t,[{key:"displayShowAllButton",get:function(){const {showAllEnabled:m,featureCount:J,displayCount:S,state:P}=this.viewModel;return!m&&!!J&&"ready"===P&&(J>S||0===S)}},{key:"displayListItems",get:function(){return this.displayShowAllButton||0<this.viewModel.relatedFeatureViewModels.length}},{key:"description",
get:function(){return this.viewModel.description},set:function(m){this.viewModel.description=m}},{key:"featureCountDescription",get:function(){const {messages:m}=this,{featureCount:J}=this.viewModel;return Z.substitute(m?.numberRecords,{number:J})}},{key:"title",get:function(){return this.viewModel.title},set:function(m){this.viewModel.title=m}}]);return t}(A);w.__decorate([R.property()],h.prototype,"_relatedFeatureIntersectionObserverNode",void 0);w.__decorate([R.property({readOnly:!0})],h.prototype,
"displayShowAllButton",null);w.__decorate([R.property({readOnly:!0})],h.prototype,"displayListItems",null);w.__decorate([R.property()],h.prototype,"description",null);w.__decorate([R.property({readOnly:!0})],h.prototype,"featureCountDescription",null);w.__decorate([R.property()],h.prototype,"headingLevel",void 0);w.__decorate([R.property()],h.prototype,"title",null);w.__decorate([R.property({type:C})],h.prototype,"viewModel",void 0);w.__decorate([R.property(),L.messageBundle("esri/widgets/Feature/t9n/Feature")],
h.prototype,"messages",void 0);w.__decorate([R.property(),L.messageBundle("esri/t9n/common")],h.prototype,"messagesCommon",void 0);w.__decorate([R.property()],h.prototype,"visibleElements",void 0);w.__decorate([E.cast("visibleElements")],h.prototype,"castVisibleElements",null);return h=w.__decorate([g.subclass("esri.widgets.Feature.FeatureRelationship")],h)})},"esri/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/arrayUtils ../../../core/Clonable ../../../core/Collection ../../../core/HandleOwner ../../../core/Identifiable ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../rest/support/RelationshipQuery ../support/featureUtils ../../FeatureForm/featureFormUtils".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A,C,D,y,G,L){h=function(x){function Z(u){var t=x.call(this,u)||this;t._loaded=!1;t._queryAbortController=null;t._queryPageAbortController=null;t._queryFeatureCountAbortController=null;t.featuresPerPage=10;t.description=null;t.graphic=null;t.layer=null;t.map=null;t.orderByFields=null;t.featureCount=0;t.relationshipId=null;t.showAllEnabled=!1;t.title=null;t._cancelQuery=()=>{const {_queryAbortController:r}=n._assertThisInitialized(t);r&&r.abort();t._queryAbortController=
null};t._cancelQueryFeatureCount=()=>{const {_queryFeatureCountAbortController:r}=n._assertThisInitialized(t);r&&r.abort();t._queryFeatureCountAbortController=null};t._cancelQueryPage=()=>{const {_queryPageAbortController:r}=n._assertThisInitialized(t);r&&r.abort();t._queryPageAbortController=null};t._queryController=async()=>{t._cancelQuery();const r=new AbortController;t._queryAbortController=r;await X.ignoreAbortErrors(t._query());t._queryAbortController===r&&(t._queryAbortController=null)};t._queryFeatureCountController=
async()=>{t._loaded=!1;t._cancelQueryFeatureCount();const r=new AbortController;t._queryFeatureCountAbortController=r;await X.ignoreAbortErrors(t._queryFeatureCount());t._queryFeatureCountAbortController===r&&(t._queryFeatureCountAbortController=null);t._loaded=!0};t._queryPageController=async()=>{const r=new AbortController;t._queryPageAbortController=r;await X.ignoreAbortErrors(t._queryPage());t._queryPageAbortController===r&&(t._queryPageAbortController=null)};t._queryDebounced=X.debounce(t._queryController,
100);t._queryFeatureCountDebounced=X.debounce(t._queryFeatureCountController,100);t._queryPageDebounced=X.debounce(t._queryPageController,100);t._query=async()=>{const {_queryAbortController:r,relatedFeatures:m}=n._assertThisInitialized(t);t.featureCount&&(t._destroyRelatedFeatureViewModels(),t.featurePage=1,m.removeAll(),t.destroyed||m.addMany(t._sliceFeatures(await t._queryRelatedFeatures({signal:r?.signal}))))};t.handles.add([v.watch(()=>[t.displayCount,t.graphic,t.layer,t.layer?.loaded,t.map,
t.orderByFields,t.relationshipId,t.featuresPerPage,t.showAllEnabled,t.canQuery,t.featureCount],()=>t._queryDebounced(),v.initial),v.watch(()=>[t.featurePage,t.showAllEnabled],()=>t._queryPageDebounced()),v.watch(()=>[t.layer,t.relationshipId,t.objectId,t.canQuery],()=>t._queryFeatureCountDebounced())]);return t}n._inherits(Z,x);var W=Z.prototype;W.destroy=function(){this._destroyRelatedFeatureViewModels();this.relatedFeatures.removeAll();this._cancelQuery();this._cancelQueryFeatureCount();this._cancelQueryPage()};
W.getRelatedFeatureByObjectId=function(u){return this.relatedFeatures.find(t=>t.getObjectId()===u)};W._destroyRelatedFeatureViewModels=function(){this.relatedFeatureViewModels?.forEach(u=>!u.destroyed&&u.destroy());this.relatedFeatureViewModels.removeAll()};W._queryFeatureCount=async function(){const {layer:u,relatedLayer:t,relationshipId:r,objectId:m,_queryFeatureCountAbortController:J,canQuery:S,supportsCacheHint:P}=this;await u?.load();await t?.load();if(S&&u&&t){var T=t.createQuery();T=new y({cacheHint:P,
relationshipId:r,returnGeometry:!1,objectIds:[m],where:T.where??void 0});T=await u.queryRelatedFeaturesCount(T,{signal:J?.signal});this._set("featureCount",T[m]||0)}else this._set("featureCount",0)};W._sliceFeatures=function(u){const {showAllEnabled:t,displayCount:r}=this;return t?u:r?u.slice(0,r):[]};W._queryPage=async function(){const {relatedFeatures:u,featurePage:t,showAllEnabled:r,_queryPageAbortController:m,featureCount:J}=this;!r||2>t||!J||u.addMany(await this._queryRelatedFeatures({signal:m?.signal}))};
W._queryRelatedFeatures=async function(u){const {orderByFieldsFixedCasing:t,showAllEnabled:r,featuresPerPage:m,displayCount:J,layer:S,relationshipId:P,featurePage:T,featureCount:da,relatedLayer:Y,supportsCacheHint:z}=this,{canQuery:Q,objectId:ea}=this;if(!Q||!S||!Y)return[];var fa=r?((T-1)*m+da)%da:0;const ja=r?m:J;var na=Y.objectIdField;na=[...t.map(xa=>xa.field),...L.getFieldsInTitleAndDesc(Y),na].filter(H.isSome);const qa=t.map(xa=>`${xa.field} ${xa.order}`),ra=Y.createQuery();fa=new y({orderByFields:qa,
start:fa,num:ja,outFields:na,cacheHint:z,relationshipId:P,returnGeometry:!1,objectIds:[ea],where:ra.where??void 0});u=(await S.queryRelatedFeatures(fa,{signal:u?.signal}))[ea]?.features||[];u.forEach(xa=>{xa.sourceLayer=Y;xa.layer=Y});return u};n._createClass(Z,[{key:"featurePage",get:function(){return this._get("featurePage")},set:function(u){const {featuresPerPage:t,featureCount:r}=this;this._set("featurePage",Math.min(Math.max(u,1),Math.ceil(r/t)||1))}},{key:"orderByFieldsFixedCasing",get:function(){const {orderByFields:u,
relatedLayer:t}=this;return u&&t?.loaded?u.map(r=>{const m=r.clone();m.field=G.getFixedFieldName(r.field,t);return m}):u??[]}},{key:"supportsCacheHint",get:function(){return!!this.layer?.capabilities?.queryRelated?.supportsCacheHint}},{key:"canLoad",get:function(){return!!this.map&&"number"===typeof this.relationshipId&&"number"===typeof this.objectId}},{key:"canQuery",get:function(){const u=this.layer?.capabilities?.queryRelated;return!!this.relatedLayer&&!!this.relationship&&"number"===typeof this.relationshipId&&
"number"===typeof this.objectId&&!!u?.supportsCount&&!!u?.supportsPagination}},{key:"itemDescriptionFieldName",get:function(){return this.orderByFieldsFixedCasing[0]?.field||null}},{key:"displayCount",get:function(){return this._get("displayCount")},set:function(u){this._set("displayCount",Math.min(Math.max(u,0),10))}},{key:"objectId",get:function(){return(this.objectIdField&&this.graphic?.attributes?.[this.objectIdField])??null}},{key:"objectIdField",get:function(){return this.layer?.objectIdField||
null}},{key:"relatedFeatures",get:function(){return this._get("relatedFeatures")||new F}},{key:"relatedFeatureInfos",get:function(){const {itemDescriptionFieldName:u,relatedFeatures:t,relatedLayer:r}=this;if(!t.length||!r)return[];const m=r&&"formTemplate"in r&&r.formTemplate,J=m&&m?.title||void 0;return t.map(S=>{let P=void 0;if(u){var T=S.getAttribute(u);const da=r.fieldsIndex.get(u);da&&(T=L.getComputedAttributes([T],[da])[u],null!=T&&(P=T.toString()))}T=J?L.parseFormTemplateString(J,S.attributes,
r.fieldsIndex):void 0;return{feature:S,description:P,title:T}}).toArray()}},{key:"relatedLayer",get:function(){const {layer:u,map:t,relationship:r}=this;return u?.loaded&&t&&r?G.findRelatedLayer(t,u,r)??null:null}},{key:"relationship",get:function(){const {relationshipId:u,layer:t}=this;return"number"===typeof u?t?.relationships?.find(({id:r})=>r===u)??null:null}},{key:"relatedFeatureViewModels",get:function(){return this._get("relatedFeatureViewModels")||new F}},{key:"state",get:function(){const {_queryAbortController:u,
_queryFeatureCountAbortController:t,_queryPageAbortController:r,canQuery:m,_loaded:J,canLoad:S}=this;return t||S&&!J?"loading":u||r?"querying":m?"ready":"disabled"}}]);return Z}(K.ClonableMixin(E.IdentifiableMixin(R.HandleOwnerMixin(h))));p.__decorate([g.property()],h.prototype,"_loaded",void 0);p.__decorate([g.property()],h.prototype,"_queryAbortController",void 0);p.__decorate([g.property()],h.prototype,"_queryPageAbortController",void 0);p.__decorate([g.property()],h.prototype,"_queryFeatureCountAbortController",
void 0);p.__decorate([g.property({value:1})],h.prototype,"featurePage",null);p.__decorate([g.property()],h.prototype,"featuresPerPage",void 0);p.__decorate([g.property({readOnly:!0})],h.prototype,"orderByFieldsFixedCasing",null);p.__decorate([g.property({readOnly:!0})],h.prototype,"supportsCacheHint",null);p.__decorate([g.property({readOnly:!0})],h.prototype,"canLoad",null);p.__decorate([g.property({readOnly:!0})],h.prototype,"canQuery",null);p.__decorate([g.property()],h.prototype,"description",
void 0);p.__decorate([g.property({readOnly:!0})],h.prototype,"itemDescriptionFieldName",null);p.__decorate([g.property({value:3})],h.prototype,"displayCount",null);p.__decorate([g.property({type:w})],h.prototype,"graphic",void 0);p.__decorate([g.property()],h.prototype,"layer",void 0);p.__decorate([g.property()],h.prototype,"map",void 0);p.__decorate([g.property({readOnly:!0})],h.prototype,"objectId",null);p.__decorate([g.property({readOnly:!0})],h.prototype,"objectIdField",null);p.__decorate([g.property()],
h.prototype,"orderByFields",void 0);p.__decorate([g.property({readOnly:!0})],h.prototype,"relatedFeatures",null);p.__decorate([g.property({readOnly:!0})],h.prototype,"relatedFeatureInfos",null);p.__decorate([g.property({readOnly:!0})],h.prototype,"relatedLayer",null);p.__decorate([g.property({readOnly:!0})],h.prototype,"relationship",null);p.__decorate([g.property()],h.prototype,"featureCount",void 0);p.__decorate([g.property({readOnly:!0})],h.prototype,"relatedFeatureViewModels",null);p.__decorate([g.property()],
h.prototype,"relationshipId",void 0);p.__decorate([g.property()],h.prototype,"showAllEnabled",void 0);p.__decorate([g.property()],h.prototype,"state",null);p.__decorate([g.property()],h.prototype,"title",void 0);p.__decorate([g.property()],h.prototype,"getRelatedFeatureByObjectId",null);return h=p.__decorate([D.subclass("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],h)})},"esri/widgets/FeatureForm/featureFormUtils":function(){define("exports ../../intl ../../core/arrayUtils ../../core/string ../../intl/date ../../layers/support/domainUtils ../../layers/support/fieldUtils ../../intl/substitute".split(" "),
function(n,p,w,h,H,K,F,R){function E(u,t){t=t.map((r,m)=>{let J=u[m];r.domain&&"coded-value"===r.domain.type&&(m=r.domain.codedValues.find(S=>S.code===J),m?.name&&(J=m.name));F.isDateField(r)&&(J=X(r,J));return[r.name,J]});return Object.fromEntries(t)}function X(u,t){if(!u||null==t)return null;switch(u.type){case "date":return H.formatDate(t);case "date-only":return H.formatDateOnly(t);case "time-only":return H.formatTimeOnly(t);case "timestamp-offset":return H.formatTimestamp(t);default:return null}}
function v(u,t){return h.replace(h.replace(u,r=>`{${r.toLowerCase()}}`),Object.fromEntries(Object.entries(t).map(([r,m])=>[r.toLowerCase(),m])))}function g(u){return 1E7<=u||-1E7>=u}const A=u=>"field"===u?.type,C=u=>"relationship"===u?.type,D=u=>"field"===u.type,y=u=>u.reduce((t,r)=>"group"===r?.type?[...t,...r.inputs]:[...t,r],[]),G=(u,t)=>null!=u&&u.input?.type===t,L={typeFieldName:null,types:[]};p=new Set(["date-only","time-only","timestamp-offset"]);n.LengthValidationError=void 0;(n.LengthValidationError||
(n.LengthValidationError={})).TOO_SHORT="length-validation-error::too-short";const x={type:"number"},Z={type:"number",intlOptions:{notation:"scientific"}},W={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};n.capabilitiesAllowEditType=(u,t)=>{if(!u)return!0;({operations:u}=u);switch(t){case "INSERT":return u.supportsAdd;case "UPDATE":case "DELETE":return u.supportsUpdate;default:return!0}};n.flattenFieldInputs=u=>y(u).filter(A);
n.flattenInputs=y;n.flattenRelationshipInputs=u=>y(u).filter(C);n.formTemplateHasInvalidFields=function(u){return"formTemplate"in u&&u.formTemplate?(u.formTemplate.elements?.filter(D)??[]).some(({fieldName:t})=>!u.fieldsIndex.get(t)):!1};n.formatDateFieldValue=X;n.getComputedAttributes=E;n.getErrorMessageForFieldInput=(u,t)=>{const {dataType:r,domain:m,error:J,field:S,minLength:P,value:T,required:da}=u;return t&&J?da&&null===T?t.validationErrors.cannotBeNull:J===K.DomainValidationError.VALUE_OUT_OF_RANGE||
J===F.NumericRangeValidationError.OUT_OF_RANGE?(u=K.getDomainRange(m)||F.getFieldRange(S),R.substitute(t.validationErrors.outsideRange,u,{format:{max:"date"===r?W:g(u.max)?Z:x,min:"date"===r?W:g(u.min)?Z:x}})):J===K.DomainValidationError.INVALID_CODED_VALUE?t.validationErrors.invalidCodedValue:J===F.TypeValidationError.INVALID_TYPE?t.validationErrors.invalidType:J===n.LengthValidationError.TOO_SHORT?R.substitute(t.validationErrors.tooShort,{min:P}):null:null};n.getFieldsInTitleAndDesc=u=>{const t=
[];if(u.formTemplate){const {description:r,title:m}=u.formTemplate;u.fields?.forEach(J=>{const S=m&&h.templateHasKey(m,J.name),P=r&&h.templateHasKey(r,J.name);(S||P)&&t.push(J.name)})}return t};n.getIconForFeature=u=>{if(u){var t=u.layer;t=t&&"geometryType"in t?t.geometryType:void 0;u=u.geometry?.type;return"polyline"===u||"polyline"===t?"line":u||t||"table"}};n.getNormalizedFeatureTypeInfo=u=>u?"subtype-sublayer"===u.type?{typeFieldName:u.parent?.subtypeField,types:u.parent?.subtypes??[]}:"types"in
u&&u.types?{typeFieldName:u.typeIdField,types:u.types.map(({id:t,name:r,domains:m})=>({code:t,name:r,domains:m}))}:L:L;n.isFieldElement=D;n.isFieldElementWithInputType=G;n.isFieldElementWithTextInput=u=>null!=u&&(G(u,"text-box")||G(u,"text-area"));n.isFieldInput=A;n.isGroupElement=u=>"group"===u.type;n.isGroupInput=u=>"group"===u?.type;n.isInputInGroupInput=u=>"group"!==u?.type&&null!=u.group;n.isNumberFieldInput=({domain:u,inputType:t="text-box",dataType:r})=>"number"===r&&"text-box"===t&&(!u||"coded-value"!==
u.type);n.isRelationshipElement=u=>"relationship"===u.type;n.isRelationshipInput=C;n.isTemplateItemGroup=u=>"items"in u;n.parseFormTemplateString=function(u,t,r){var m=Object.keys(t).filter(S=>h.templateHasKey(u,S));const J=m.map(S=>t[S]);m=m.map(S=>r.get(S)).filter(w.isSome);return v(u,E(J,m))};n.substituteFieldTemplatesInString=v;n.unsupportedDateFieldTypes=p;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/arrayUtils ../../core/Handles ../../core/Identifiable ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./FeatureRelationship/FeatureRelationshipViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g,A,C,D,y,G,L,x,Z,W,u,t,r,m,J){var S;const P={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};H=S=function(T){function da(z){var Q=T.call(this,z)||this;Q._handles=new F;Q._error=null;Q._featureAbortController=null;Q._graphicChangedThrottled=g.throttle(Q._graphicChanged,1,n._assertThisInitialized(Q));Q._expressionAttributes=null;Q._graphicExpressionAttributes=null;Q.abilities=
{...P};Q.content=null;Q.contentViewModels=[];Q.description=null;Q.defaultPopupTemplateEnabled=!1;Q.formattedAttributes=null;Q.lastEditInfo=null;Q.relatedInfos=new Map;Q.title="";Q.view=null;Q._isAllowedContentType=ea=>{const {abilities:fa}=n._assertThisInitialized(Q);return"attachments"===ea.type&&!!fa.attachmentsContent||"custom"===ea.type&&!!fa.customContent||"fields"===ea.type&&!!fa.fieldsContent||"media"===ea.type&&!!fa.mediaContent||"text"===ea.type&&!!fa.textContent||"expression"===ea.type&&
!!fa.expressionContent||"relationship"===ea.type&&!!fa.relationshipContent};Q._handles.add(v.watch(()=>[Q.graphic,Q._effectivePopupTemplate,Q.abilities],()=>Q._graphicChangedThrottled(),v.initial));return Q}n._inherits(da,T);var Y=da.prototype;Y.initialize=function(){this.addHandles(this._graphicChangedThrottled)};Y.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=null;this._destroyContentViewModels();this.relatedInfos.clear()};Y.castAbilities=
function(z){return{...P,...z}};Y.setActiveMedia=function(z,Q){z=this.contentViewModels[z];z instanceof u&&z.setActiveMedia(Q)};Y.nextMedia=function(z){z=this.contentViewModels[z];z instanceof u&&z.next()};Y.previousMedia=function(z){z=this.contentViewModels[z];z instanceof u&&z.previous()};Y.updateGeometry=async function(){const {graphic:z,spatialReference:Q,_sourceLayer:ea}=this;await ea?.load();var fa=ea?.objectIdField;fa&&z&&ea&&(fa=z?.attributes?.[fa],null!=fa&&(fa=[fa],!z.geometry&&(fa=(await m.querySourceLayer({layer:ea,
graphic:z,outFields:[],objectIds:fa,returnGeometry:!0,spatialReference:Q}))?.geometry)))&&(z.geometry=fa)};Y._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};Y._graphicChanged=async function(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:z}=this;if(z){var Q=new AbortController;this._featureAbortController=Q;try{await this._queryFeature({signal:Q.signal})}catch(ea){X.isAbortError(ea)||(this._error=ea,E.getLogger(this).error("error",
"The popupTemplate could not be displayed for this feature.",{error:ea,graphic:z,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===Q&&(this._featureAbortController=null)}};Y._cancelFeatureQuery=function(){const {_featureAbortController:z}=this;z&&z.abort();this._featureAbortController=null};Y._compileContentElement=function(z,Q){if("attachments"===z.type)return this._compileAttachments(z,Q);if("custom"===z.type)return this._compileCustom(z,Q);if("fields"===z.type)return this._compileFields(z,
Q);if("media"===z.type)return this._compileMedia(z,Q);if("text"===z.type)return this._compileText(z,Q);if("expression"===z.type)return this._compileExpression(z,Q);if("relationship"===z.type)return this._compileRelationship(z,Q)};Y._compileContent=function(z){this._destroyContentViewModels();if(this.graphic)return Array.isArray(z)?z.filter(this._isAllowedContentType).map((Q,ea)=>this._compileContentElement(Q,ea)).filter(K.isSome):"string"===typeof z?this._compileText(new G({text:z}),0).text:z};Y._destroyContentViewModels=
function(){this._handles?.remove("relationship-view-models");this._handles?.remove("content-view-models");this.contentViewModels.forEach(z=>z&&!z.destroyed&&z.destroy());this._set("contentViewModels",[])};Y._matchesFeature=function(z,Q){z=z?.graphic?.getObjectId();Q=Q?.getObjectId();return null!=z&&null!=Q&&z===Q};Y._setRelatedFeaturesViewModels=function({relatedFeatureViewModels:z,relatedFeatures:Q,map:ea}){const {view:fa,spatialReference:ja}=this;Q?.filter(Boolean).forEach(na=>{z.find(qa=>this._matchesFeature(qa,
na))||z.add(new S({abilities:{relationshipContent:!1},map:ea,view:fa,spatialReference:ja,graphic:na}))});z.forEach(na=>{Q?.find(qa=>this._matchesFeature(na,qa))||z.remove(na)})};Y._setExpressionContentVM=function(z,Q){const ea=this.formattedAttributes,{contentElement:fa,contentElementViewModel:ja}=z;z=fa?.type;ja&&z&&("fields"===z&&(this._createFieldsFormattedAttributes({contentElement:fa,contentElementIndex:Q,formattedAttributes:ea}),ja.set(this._createFieldsVMParams(fa,Q))),"media"===z&&(this._createMediaFormattedAttributes({contentElement:fa,
contentElementIndex:Q,formattedAttributes:ea}),ja.set(this._createMediaVMParams(fa,Q))),"text"===z&&ja.set(this._createTextVMParams(fa)))};Y._compileRelationship=function(z,Q){const {displayCount:ea,orderByFields:fa,relationshipId:ja,title:na,description:qa}=z,{_sourceLayer:ra,graphic:xa,map:Ba}=this;if(m.isRelatableFeatureSupportedLayer(ra)){var Da=new t({displayCount:ea,graphic:xa,orderByFields:fa,relationshipId:ja,layer:ra,map:Ba,...this._compileTitleAndDesc({title:na,description:qa})});this.contentViewModels[Q]=
Da;this._handles.add(v.on(()=>Da.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(Da)),"relationship-view-models");return z}};Y._compileExpression=function(z,Q){const {expressionInfo:ea}=z,{graphic:fa,map:ja,spatialReference:na,view:qa}=this,ra=new Z({expressionInfo:ea,graphic:fa,interceptor:S.interceptor,map:ja,spatialReference:na,view:qa});this.contentViewModels[Q]=ra;this._handles.add(v.watch(()=>ra.contentElementViewModel,()=>this._setExpressionContentVM(ra,Q),v.initial),"content-view-models");
return z};Y._compileAttachments=function(z,Q){const {graphic:ea}=this,{description:fa,title:ja}=z;this.contentViewModels[Q]=new L({graphic:ea,...this._compileTitleAndDesc({title:ja,description:fa})});return z};Y._compileCustom=function(z,Q){const {graphic:ea}=this,{creator:fa,destroyer:ja}=z;this.contentViewModels[Q]=new x({graphic:ea,creator:fa,destroyer:ja});return z};Y._compileTitleAndDesc=function({title:z,description:Q}){const {_fieldInfoMap:ea,_sourceLayer:fa,graphic:ja,formattedAttributes:na}=
this,qa=ja?.attributes,ra=this._expressionAttributes,xa=na.global;return{title:m.substituteFieldsInLinksAndAttributes({attributes:qa,fieldInfoMap:ea,globalAttributes:xa,expressionAttributes:ra,layer:fa,text:z}),description:m.substituteFieldsInLinksAndAttributes({attributes:qa,fieldInfoMap:ea,globalAttributes:xa,expressionAttributes:ra,layer:fa,text:Q})}};Y._createFieldsVMParams=function(z,Q){const ea=this._effectivePopupTemplate,fa=this.formattedAttributes,ja={...fa?.global,...fa?.content[Q]};Q=(z?.fieldInfos||
ea?.fieldInfos)?.filter(({fieldName:ra})=>m.isExpressionField(ra)||m.isRelatedField(ra)||ja.hasOwnProperty(ra));const {description:na,title:qa}=z;return{attributes:ja,expressionInfos:ea?.expressionInfos,fieldInfos:Q,...this._compileTitleAndDesc({title:qa,description:na})}};Y._compileFields=function(z,Q){const ea=z.clone();z=new W(this._createFieldsVMParams(z,Q));this.contentViewModels[Q]=z;ea.fieldInfos=z.formattedFieldInfos.slice(0);return ea};Y._createMediaVMParams=function(z,Q){const {abilities:ea,
graphic:fa,_fieldInfoMap:ja,_effectivePopupTemplate:na,relatedInfos:qa,_sourceLayer:ra,_expressionAttributes:xa}=this,Ba=this.formattedAttributes,Da=fa?.attributes??{},{description:va,mediaInfos:pa,title:wa}=z;return{abilities:{chartAnimation:ea.chartAnimation},activeMediaInfoIndex:z.activeMediaInfoIndex||0,attributes:Da,isAggregate:fa?.isAggregate,layer:ra,fieldInfoMap:ja,formattedAttributes:{...Ba?.global,...Ba?.content[Q]},expressionAttributes:xa,mediaInfos:pa,popupTemplate:na,relatedInfos:qa,
...this._compileTitleAndDesc({title:wa,description:va})}};Y._compileMedia=function(z,Q){const ea=z.clone();z=new u(this._createMediaVMParams(z,Q));ea.mediaInfos=z.formattedMediaInfos.slice(0);this.contentViewModels[Q]=z;return ea};Y._createTextVMParams=function(z){const {graphic:Q,_fieldInfoMap:ea,_sourceLayer:fa,_expressionAttributes:ja}=this;z&&z.text&&(z.text=m.substituteFieldsInLinksAndAttributes({attributes:Q?.attributes??{},fieldInfoMap:ea,globalAttributes:this.formattedAttributes?.global??
{},expressionAttributes:ja,layer:fa,text:z.text}));return{graphic:Q,creator:z.text}};Y._compileText=function(z,Q){z=z.clone();this.contentViewModels[Q]=new x(this._createTextVMParams(z));return z};Y._compileLastEditInfo=function(){const {_effectivePopupTemplate:z,_sourceLayer:Q,graphic:ea}=this;if(z){var {lastEditInfoEnabled:fa}=z,ja=Q?.editFieldsInfo;if(fa&&ja)return m.formatEditInfo(ja,ea?.attributes)}};Y._compileTitle=function(z){const {_fieldInfoMap:Q,_sourceLayer:ea,graphic:fa,_expressionAttributes:ja}=
this;return m.substituteFieldsInLinksAndAttributes({attributes:fa?.attributes??{},fieldInfoMap:Q,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:ja,layer:ea,text:z})};Y._getTitle=async function(){const {_effectivePopupTemplate:z,graphic:Q}=this;return Q?m.graphicCallback(z?.title,{graphic:Q}):null};Y._getContent=async function(){const {_effectivePopupTemplate:z,graphic:Q}=this;return Q?m.graphicCallback(z?.content,{graphic:Q}):null};Y._queryFeature=async function(z){const {_featureAbortController:Q,
_sourceLayer:ea,graphic:fa,_effectivePopupTemplate:ja}=this,na=this.map,qa=this.view,ra=this.spatialReference;if(Q===this._featureAbortController&&fa){await m.queryUpdatedFeature({graphic:fa,popupTemplate:ja,layer:ea,spatialReference:ra},z);var {content:{value:xa},title:{value:Ba}}=await X.eachAlways({content:this._getContent(),title:this._getTitle()});({expressionAttributes:{value:z}}=await X.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(z),expressionAttributes:r.createCompiledExpressions({expressionInfos:ja?.expressionInfos,
spatialReference:ra,graphic:fa,map:na,interceptor:S.interceptor,view:qa})}));Q===this._featureAbortController&&fa&&(this._expressionAttributes=z,this._graphicExpressionAttributes={...fa.attributes,...z},this._set("formattedAttributes",this._createFormattedAttributes(xa)),this._set("title",this._compileTitle(Ba)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(xa)||null))}};Y._createMediaFormattedAttributes=function({contentElement:z,contentElementIndex:Q,
formattedAttributes:ea}){const {_effectivePopupTemplate:fa,graphic:ja,relatedInfos:na,_sourceLayer:qa,_fieldInfoMap:ra,_graphicExpressionAttributes:xa}=this;ea.content[Q]=m.formatAttributes({fieldInfos:fa?.fieldInfos,graphic:ja,attributes:{...xa,...z.attributes},layer:qa,fieldInfoMap:ra,relatedInfos:na})};Y._createFieldsFormattedAttributes=function({contentElement:z,contentElementIndex:Q,formattedAttributes:ea}){if(z.fieldInfos){const {graphic:fa,relatedInfos:ja,_sourceLayer:na,_fieldInfoMap:qa,_graphicExpressionAttributes:ra}=
this;ea.content[Q]=m.formatAttributes({fieldInfos:z.fieldInfos,graphic:fa,attributes:{...ra,...z.attributes},layer:na,fieldInfoMap:qa,relatedInfos:ja})}};Y._createFormattedAttributes=function(z){const {_effectivePopupTemplate:Q,graphic:ea,relatedInfos:fa,_sourceLayer:ja,_fieldInfoMap:na,_graphicExpressionAttributes:qa}=this,ra={global:m.formatAttributes({fieldInfos:Q?.fieldInfos,graphic:ea,attributes:qa,layer:ja,fieldInfoMap:na,relatedInfos:fa}),content:[]};Array.isArray(z)&&z.forEach((xa,Ba)=>{"fields"===
xa.type&&this._createFieldsFormattedAttributes({contentElement:xa,contentElementIndex:Ba,formattedAttributes:ra});"media"===xa.type&&this._createMediaFormattedAttributes({contentElement:xa,contentElementIndex:Ba,formattedAttributes:ra})});return ra};Y._checkForRelatedFeatures=function(z){const {graphic:Q,_effectivePopupTemplate:ea}=this;return this._queryRelatedInfos(Q,m.getAllFieldInfos(ea),z)};Y._queryRelatedInfos=async function(z,Q,ea){const {relatedInfos:fa,_sourceLayer:ja}=this;fa.clear();const na=
null!=ja?.associatedLayer?await ja?.associatedLayer.load(ea):ja;if(na&&z){var qa=Q.filter(Ba=>Ba&&m.isRelatedField(Ba.fieldName));if(qa&&qa.length){Q.forEach(Ba=>this._configureRelatedInfo(Ba,na));var ra=await J.queryLayerInfos({relatedInfos:fa,layer:na},ea);Object.keys(ra).forEach(Ba=>{const Da=fa.get(Ba.toString());Ba=ra[Ba]?.value;Da&&Ba&&(Da.layerInfo=Ba.data)});var xa=await J.queryRelatedFeatures({graphic:z,relatedInfos:fa,layer:na},ea);Object.keys(xa).forEach(Ba=>{J.setRelatedFeatures(xa[Ba]?.value,
fa.get(Ba.toString()))})}}};Y._configureRelatedInfo=function(z,Q){const {relatedInfos:ea}=this,fa=J.getRelatedFieldInfo(z.fieldName);if(fa){var {layerId:ja,fieldName:na}=fa;ja&&(Q=ea.get(ja.toString())||J.createRelatedInfo(ja,Q))&&(J.updateRelatedInfo({relatedInfo:Q,fieldName:na,fieldInfo:z}),this.relatedInfos.set(ja,Q))}};n._createClass(da,[{key:"_effectivePopupTemplate",get:function(){return null!=this.graphic?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",
get:function(){return m.createfieldInfoMap(m.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return m.getSourceLayer(this.graphic)}},{key:"isTable",get:function(){return this._sourceLayer?.isTable||!1}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(z){this._set("graphic",z?z.clone():null)}},{key:"spatialReference",get:function(){return this.view?.spatialReference??
null},set:function(z){this._override("spatialReference",z)}},{key:"map",get:function(){return this.view?.map||null},set:function(z){this._override("map",z)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return da}(R.IdentifiableMixin(H));H.interceptor=new h.FeatureSetQueryInterceptor(m.preLayerQueryCallback,m.preRequestCallback);p.__decorate([A.property()],H.prototype,"_error",void 0);p.__decorate([A.property()],H.prototype,"_featureAbortController",void 0);p.__decorate([A.property({readOnly:!0})],
H.prototype,"_effectivePopupTemplate",null);p.__decorate([A.property({readOnly:!0})],H.prototype,"_fieldInfoMap",null);p.__decorate([A.property({readOnly:!0})],H.prototype,"_sourceLayer",null);p.__decorate([A.property()],H.prototype,"abilities",void 0);p.__decorate([C.cast("abilities")],H.prototype,"castAbilities",null);p.__decorate([A.property({readOnly:!0})],H.prototype,"content",void 0);p.__decorate([A.property({readOnly:!0})],H.prototype,"contentViewModels",void 0);p.__decorate([A.property()],
H.prototype,"description",void 0);p.__decorate([A.property({type:Boolean})],H.prototype,"defaultPopupTemplateEnabled",void 0);p.__decorate([A.property({readOnly:!0})],H.prototype,"isTable",null);p.__decorate([A.property({readOnly:!0})],H.prototype,"state",null);p.__decorate([A.property({readOnly:!0})],H.prototype,"formattedAttributes",void 0);p.__decorate([A.property({type:w,value:null})],H.prototype,"graphic",null);p.__decorate([A.property({readOnly:!0})],H.prototype,"lastEditInfo",void 0);p.__decorate([A.property({readOnly:!0})],
H.prototype,"relatedInfos",void 0);p.__decorate([A.property()],H.prototype,"spatialReference",null);p.__decorate([A.property({readOnly:!0})],H.prototype,"title",void 0);p.__decorate([A.property()],H.prototype,"map",null);p.__decorate([A.property({readOnly:!0})],H.prototype,"waitingForContent",null);p.__decorate([A.property()],H.prototype,"view",void 0);return H=S=p.__decorate([y.subclass("esri.widgets.FeatureViewModel")],H)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers"],function(n,p){p=p._createClass(function(w,h){this.preLayerQueryCallback=w;this.preRequestCallback=h;this.preLayerQueryCallback||(this.preLayerQueryCallback=H=>{});this.preRequestCallback||(this.preLayerQueryCallback=H=>{})});n.FeatureSetQueryInterceptor=p;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/resources":function(){define(["exports"],function(n){n.CSS={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",
esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",
fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/Error ../../../core/accessorSupport/decorators/subclass ../resources ../../support/widget ../../support/jsxFactory".split(" "),
function(n,p,w,h,H,K,F,R,E,X,v,g){n.FeatureContentMixin=A=>{A=function(C){function D(){var y=C.apply(this,arguments)||this;y.renderNodeContent=G=>v.isWidget(G)&&!G.destroyed?g.tsx("div",{class:X.CSS.contentNode,key:G},G.render()):G instanceof HTMLElement?g.tsx("div",{class:X.CSS.contentNode,key:G,bind:G,afterCreate:y._attachToNode}):v.hasDomNode(G)?g.tsx("div",{class:X.CSS.contentNode,key:G,bind:G.domNode,afterCreate:y._attachToNode}):null;return y}p._inherits(D,C);D.prototype._attachToNode=function(y){y.appendChild(this)};
return p._createClass(D)}(A);return A=w.__decorate([E.subclass("esri.widgets.Feature.ContentMixin")],A)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureRelationship ./Feature/FeatureViewModel ./Feature/resources ./Feature/support/FeatureContentMixin ./support/componentsUtils ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),function(n,
p,w,h,H,K,F,R,E,X,v,g,A,C,D,y,G,L,x,Z,W,u,t,r,m,J){var S;const P={title:!0,content:!0,lastEditedInfo:!0};h=S=function(T){function da(z,Q){z=T.call(this,z,Q)||this;z._contentWidgets=[];z.flowItems=null;z.headingLevel=2;z.messages=null;z.messagesCommon=null;z.messagesURIUtils=null;z.visibleElements={...P};z.viewModel=new L;return z}p._inherits(da,T);var Y=da.prototype;Y.initialize=function(){this.addHandles(H.watch(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),H.initial))};Y.loadDependencies=
function(){return W.loadCalciteComponents({notice:()=>new Promise((z,Q)=>n(["../chunks/calcite-notice"],z,Q))})};Y.destroy=function(){this._destroyContentWidgets()};Y.castVisibleElements=function(z){return{...P,...z}};Y.render=function(){var {state:z}=this.viewModel;z=m.tsx("div",{class:x.CSS.container,key:"container"},this.renderTitle(),"error"===z?this.renderError():"loading"===z?this.renderLoading():this.renderContentContainer());return m.tsx("div",{class:this.classes(x.CSS.base,x.CSS.esriWidget)},
z)};Y.setActiveMedia=function(z,Q){return this.viewModel.setActiveMedia(z,Q)};Y.nextMedia=function(z){return this.viewModel.nextMedia(z)};Y.previousMedia=function(z){return this.viewModel.previousMedia(z)};Y.renderError=function(){const {messagesCommon:z,messages:Q,visibleElements:ea}=this;return m.tsx("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},ea.title?m.tsx("div",{key:"error-title",slot:"title"},z.errorMessage):null,m.tsx("div",{key:"error-message",slot:"message"},
Q.loadingError))};Y.renderLoading=function(){return m.tsx("div",{key:"loading-container",class:x.CSS.loadingSpinnerContainer},m.tsx("span",{class:this.classes(x.CSS.iconLoading,x.CSS.spinner)}))};Y.renderContentContainer=function(){const {visibleElements:z}=this;return z.content?m.tsx("div",{class:x.CSS.main},[this.renderContent(),this.renderLastEditInfo()]):null};Y.renderTitle=function(){const {visibleElements:z,title:Q}=this;return z.title?m.tsx(u.Heading,{level:this.headingLevel,class:x.CSS.title,
innerHTML:Q}):null};Y.renderContent=function(){var z=this.viewModel.content;return z?Array.isArray(z)?z.length?m.tsx("div",{class:x.CSS.contentNode,key:"content-content-elements"},z.map(this.renderContentElement,this)):null:"string"===typeof z?(z=this._contentWidgets[0],!z||z.destroyed?null:m.tsx("div",{class:x.CSS.contentNode,key:"content-content"},z.render())):this.renderNodeContent(z):null};Y.renderContentElement=function(z,Q){const {visibleElements:ea}=this;if("boolean"!==typeof ea.content&&!ea.content?.[z.type])return null;
switch(z.type){case "attachments":return this.renderAttachments(Q);case "custom":return this.renderCustom(z,Q);case "fields":return this.renderFields(Q);case "media":return this.renderMedia(Q);case "text":return this.renderText(z,Q);case "expression":return this.renderExpression(Q);case "relationship":return this.renderRelationship(Q);default:return null}};Y.renderAttachments=function(z){const Q=this._contentWidgets[z];if(!Q||Q.destroyed)return null;const {state:ea,attachmentInfos:fa}=Q.viewModel;
return"loading"===ea||0<fa.length?m.tsx("div",{key:this._buildKey("attachments-element",z),class:this.classes(x.CSS.contentElement)},Q.render()):null};Y.renderRelationship=function(z){const Q=this._contentWidgets[z];return Q&&!Q.destroyed&&this.flowItems?m.tsx("div",{key:this._buildKey("relationship-element",z),class:x.CSS.contentElement},Q.render()):null};Y.renderExpression=function(z){const Q=this._contentWidgets[z];return!Q||Q.destroyed?null:m.tsx("div",{key:this._buildKey("expression-element",
z),class:x.CSS.contentElement},Q.render())};Y.renderCustom=function(z,Q){({creator:z}=z);const ea=this._contentWidgets[Q];return!ea||ea.destroyed?null:z?m.tsx("div",{key:this._buildKey("custom-element",Q),class:x.CSS.contentElement},ea.render()):null};Y.renderFields=function(z){const Q=this._contentWidgets[z];return!Q||Q.destroyed?null:m.tsx("div",{key:this._buildKey("fields-element",z),class:x.CSS.contentElement},Q.render())};Y.renderMedia=function(z){const Q=this._contentWidgets[z];return!Q||Q.destroyed?
null:m.tsx("div",{key:this._buildKey("media-element",z),class:x.CSS.contentElement},Q.render())};Y.renderLastEditInfo=function(){const {visibleElements:z,messages:Q}=this;var {lastEditInfo:ea}=this.viewModel;if(!ea||!z.lastEditedInfo)return null;const {date:fa,user:ja}=ea;ea=J.substitute("edit"===ea.type?ja?Q.lastEditedByUser:Q.lastEdited:ja?Q.lastCreatedByUser:Q.lastCreated,{date:fa,user:ja});return m.tsx("div",{key:"edit-info-element",class:this.classes(x.CSS.lastEditedInfo,x.CSS.contentElement)},
ea)};Y.renderText=function(z,Q){const ea=this._contentWidgets[Q];return!ea||ea.destroyed?null:z.text?m.tsx("div",{key:this._buildKey("text-element",Q),class:this.classes(x.CSS.contentElement,x.CSS.text)},ea.render()):null};Y._buildKey=function(z,...Q){const ea=this.get("viewModel.graphic.uid")||"0";Q=Q.join("-");return`${z}__${ea}-${Q}`};Y._destroyContentWidget=function(z){z&&(z.viewModel=null,!z.destroyed&&z.destroy())};Y._destroyContentWidgets=function(){this.removeHandles("relationship-handles");
this._contentWidgets.forEach(z=>this._destroyContentWidget(z));this._contentWidgets=[]};Y._addFeatureRelationshipHandles=function(z){const {flowItems:Q,visibleElements:ea}=this;this.addHandles([H.on(()=>z,"select-record",({featureViewModel:fa})=>{Q&&(fa.abilities={relationshipContent:!0},Q.push(new S({flowItems:Q,viewModel:fa,visibleElements:ea})))}),H.on(()=>z,"show-all-records",()=>{if(Q){var {viewModel:fa}=z;fa.showAllEnabled=!0;fa=new G({visibleElements:{title:!1,description:!1},viewModel:fa});
this._addFeatureRelationshipHandles(fa);Q.push(fa)}})],"relationship-handles")};Y._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:z,visibleElements:Q}=this;var ea=this.get("viewModel.content");const {contentViewModels:fa}=this.viewModel;Array.isArray(ea)?ea.forEach((ja,na)=>{"attachments"===ja.type&&(this._contentWidgets[na]=new g({displayType:ja.displayType,headingLevel:Q.title?z+1:z,viewModel:fa[na]}));"fields"===ja.type&&(this._contentWidgets[na]=new D({viewModel:fa[na]}));
"media"===ja.type&&(this._contentWidgets[na]=new y({viewModel:fa[na]}));"text"===ja.type&&(this._contentWidgets[na]=new A({viewModel:fa[na]}));"custom"===ja.type&&(this._contentWidgets[na]=new A({viewModel:fa[na]}));"expression"===ja.type&&(this._contentWidgets[na]=new C({viewModel:fa[na]}));"relationship"===ja.type&&(ja=new G({viewModel:fa[na]}),this._addFeatureRelationshipHandles(ja),this._contentWidgets[na]=ja)},this):(ea=fa[0])&&!ea.destroyed&&(this._contentWidgets[0]=new A({viewModel:ea}));this.scheduleRender()};
p._createClass(da,[{key:"graphic",get:function(){return this.viewModel.graphic},set:function(z){this.viewModel.graphic=z}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(z){this.viewModel.defaultPopupTemplateEnabled=z}},{key:"isTable",get:function(){return this.viewModel.isTable}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(z){this._overrideIfSome("label",z)}},{key:"spatialReference",get:function(){return this.viewModel.spatialReference},
set:function(z){this.viewModel.spatialReference=z}},{key:"title",get:function(){return this.viewModel.title}},{key:"map",get:function(){return this.viewModel.map},set:function(z){this.viewModel.map=z}},{key:"view",get:function(){return this.viewModel.view},set:function(z){this.viewModel.view=z}}]);return da}(Z.FeatureContentMixin(v));w.__decorate([K.property()],h.prototype,"graphic",null);w.__decorate([K.property()],h.prototype,"defaultPopupTemplateEnabled",null);w.__decorate([K.property()],h.prototype,
"flowItems",void 0);w.__decorate([K.property()],h.prototype,"headingLevel",void 0);w.__decorate([K.property({readOnly:!0})],h.prototype,"isTable",null);w.__decorate([K.property()],h.prototype,"label",null);w.__decorate([K.property(),r.messageBundle("esri/widgets/Feature/t9n/Feature")],h.prototype,"messages",void 0);w.__decorate([K.property(),r.messageBundle("esri/t9n/common")],h.prototype,"messagesCommon",void 0);w.__decorate([K.property(),r.messageBundle("esri/widgets/support/t9n/uriUtils")],h.prototype,
"messagesURIUtils",void 0);w.__decorate([K.property()],h.prototype,"spatialReference",null);w.__decorate([K.property({readOnly:!0})],h.prototype,"title",null);w.__decorate([K.property()],h.prototype,"visibleElements",void 0);w.__decorate([F.cast("visibleElements")],h.prototype,"castVisibleElements",null);w.__decorate([K.property()],h.prototype,"map",null);w.__decorate([K.property()],h.prototype,"view",null);w.__decorate([K.property({type:L})],h.prototype,"viewModel",void 0);return h=S=w.__decorate([X.subclass("esri.widgets.Feature")],
h)});