// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/domUtils ../core/Evented ../core/events ../core/Handles ../core/has ../core/lang ../core/Logger ../core/maybe ../core/Promise ../core/promiseUtils ../core/reactiveUtils ../core/uuid ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleTrackingTarget ../libs/maquette-advanced-projector/projector ./support/componentsUtils ./support/jsxWidgetSupport ./support/symbols ./support/tests ./support/vnodeCache ./support/widgetUtils ../intl/locale ../intl/messages".split(" "),
function(q,g,B,H,e,C,I,aa,J,K,D,L,w,x,M,m,N,O,P,Q,R,S,E,F,T,u,U,V,W){function G(n,h){for(const k in h)null!=n[k]&&("object"===typeof n[k]&&"object"===typeof h[k]?G(n[k],h?.[k]):n[k]=h[k]);return n}let X=0;const Y=R.createAdvancedProjector({postProcessProjectionOptions(n){const h=n.eventHandlerInterceptor,k=/capture$/i;n.eventHandlerInterceptor=(c,b,f,a)=>{const p=h?.(c,b,f,a),r=k.test(c);c=c.replace(k,"");if(!(c.toLowerCase()in f)||r){const v=c[2].toLowerCase()+c.slice(3),l=t=>p?.call(f,t);f.addEventListener(v,
l,r);const d=a.afterRemoved;a.afterRemoved=t=>{d?.(t);f.removeEventListener(v,l,r)}}return p}},handleInterceptedEvent(n,h,k,c){const {eventPhase:b,type:f}=c,a=b===Event.CAPTURING_PHASE;let p=`on${f}${a?"capture":""}`;h=h.properties;if(!(h&&p in h||(p=`on${f[0].toUpperCase()}${f.slice(1)}${a?"Capture":""}`,h&&p in h)))return;u.clearVNodeCache();n.scheduleRender();h[p].call(h.bind||k,c)}});let z=!1;e=function(n,h){function k(b,f){var a=n.call(this,b,f)||this;a._attached=!1;a._internalHandles=new I;
a._projector=Y;a._readyForTrueRender=!1;a.iconClass="esri-icon-checkbox-unchecked";a.icon=null;a.key=q._assertThisInitialized(a);a._loadLocale=w.debounce(async()=>{if(a._messageBundleProps&&a._messageBundleProps.length){const l=await w.eachAlways(a._messageBundleProps.map(async({bundlePath:d,propertyName:t})=>{a.destroyed||(d=await W.fetchMessageBundle(d),a.uiStrings&&Object.keys(a.uiStrings)&&(d=G(J.clone(d),a.uiStrings)),a[t]=d)}));if(a.destroyed)return;for(const d of l)d.error&&K.getLogger(q._assertThisInitialized(a)).error("widget-intl:locale-error",
a.declaredClass,d.error)}await a.loadLocale()});S.commitAssetPath();const p="esri-widget-uid-"+M.generateUUID(),r=a.render.bind(q._assertThisInitialized(a));a._trackingTarget=new Q.SimpleTrackingTarget(()=>a.scheduleRender());const v=()=>{if(!a._readyForTrueRender||a.destroyed)return null;const l=r();let {properties:d}=l;d||(l.properties=d={});const {key:t}=d;t||(d.key=p);a.visible?d.styles||(d.styles={}):(d.class="",d.styles={display:"none"});d.styles.display||(d.styles.display="");let Z=0;l.children?.forEach(A=>
{if(!E.isWidgetConstructor(A.vnodeSelector)){var {properties:y}=A;y||(A.properties=y={});y.key||(y.key=`${a.id}--${Z++}`)}});return E.processWidgets(q._assertThisInitialized(a),l)};a.render=()=>{if(z)return v();let l=u.getVNodeCache(q._assertThisInitialized(a))??null;if(l)return l;a._trackingTarget.clear();z=!0;try{l=P.runTracked(a._trackingTarget,v)}catch(d){throw console.error(d),d;}finally{z=!1}l&&u.setVNodeCache(q._assertThisInitialized(a),l);return l};a.addResolvingPromise(a._resourcesFetch=
a.beforeFirstRender().then(()=>{a._readyForTrueRender=!0;a._postInitialize()}));T.registerLoading(a._resourcesFetch);return a}q._inherits(k,n);var c=k.prototype;c.normalizeCtorArgs=function(b,f){b={...b};f&&(b.container=f);return b};c.postInitialize=function(){};c.beforeFirstRender=function(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(w.throwIfNotAbortError)};c.loadDependencies=async function(){};c.loadLocale=async function(){};c.destroy=function(){this.destroyed||
(D.destroyMaybe(this._trackingTarget),D.destroyMaybe(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,u.deleteVNodeCache(this))};c.castContainer=function(b){return H.byId(b)};c.render=function(){throw Error("not implemented");};c.scheduleRender=function(){this.destroyed||(u.deleteVNodeCache(this),this._projector.scheduleRender())};c.classes=function(...b){return U.classes.apply(this,
b)};c.renderNow=function(){u.deleteVNodeCache(this);this._projector.renderNow()};c._postInitialize=function(){if(!this.destroyed){this.scheduleRender();this._delegatedEventNames?.length&&this._internalHandles.add(x.watch(()=>this.viewModel,(f,a)=>{a&&this._internalHandles.remove("delegated-events");f&&C.isEventTarget(f)&&this._internalHandles.add(this._delegatedEventNames.map(p=>C.on(f,p,r=>{this.emit(p,r)})),"delegated-events")},x.initial));this.postInitialize();var b=async()=>{await this._loadLocale().catch(w.throwIfNotAbortError);
this.scheduleRender()};this._internalHandles.add([V.onLocaleChange(b),x.watch(()=>this.uiStrings,b),x.when(()=>this.container,f=>{this.destroyed||this._attach(f)},{initial:!0,once:!0})])}};c._attach=function(b){b&&(this._projector.merge(b,this.render),this._attached=!0)};c._detach=function(b){this._attached&&(this._projector.detach(this.render),this._attached=!1);b?.parentNode?.removeChild(b)};q._createClass(k,[{key:"container",set:function(b){this._get("container")||this._set("container",b)}},{key:"domNode",
get:function(){return this.container},set:function(b){this.container=b}},{key:"id",get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+X++},set:function(b){b&&this._set("id",b)}},{key:"label",get:function(){return this.declaredClass.split(".").pop()},set:function(b){this._overrideIfSome("label",b)}},{key:"renderable",get:function(){return this._resourcesFetch}},{key:"visible",get:function(){return this._get("visible")},set:function(b){this._set("visible",
b)}},{key:h,get:function(){return{projector:this._projector}}}]);return k}(L.EsriPromiseMixin(e.EventedAccessor),(B=F.WIDGET_SYMBOL,F.WIDGET_TEST_DATA_SYMBOL));e[B]=!0;g.__decorate([m.property()],e.prototype,"_readyForTrueRender",void 0);g.__decorate([m.property({value:null})],e.prototype,"container",null);g.__decorate([N.cast("container")],e.prototype,"castContainer",null);g.__decorate([m.property()],e.prototype,"iconClass",void 0);g.__decorate([m.property()],e.prototype,"icon",void 0);g.__decorate([m.property()],
e.prototype,"id",null);g.__decorate([m.property()],e.prototype,"label",null);g.__decorate([m.property()],e.prototype,"renderable",null);g.__decorate([m.property()],e.prototype,"uiStrings",void 0);g.__decorate([m.property()],e.prototype,"viewModel",void 0);g.__decorate([m.property({value:!0})],e.prototype,"visible",null);g.__decorate([m.property()],e.prototype,"key",void 0);g.__decorate([m.property()],e.prototype,"children",void 0);g.__decorate([m.property()],e.prototype,"afterCreate",void 0);g.__decorate([m.property()],
e.prototype,"afterUpdate",void 0);g.__decorate([m.property()],e.prototype,"afterRemoved",void 0);return e=g.__decorate([O.subclass("esri.widgets.Widget")],e)});