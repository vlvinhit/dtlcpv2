// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/CloudyWeather ../../views/3d/environment/FoggyWeather ../../views/3d/environment/RainyWeather ../../views/3d/environment/SnowyWeather ../../views/3d/environment/SunnyWeather ../../views/3d/environment/weather ./enums".split(" "),
function(k,e,b,p,q,l,m,f,r,t,u,v,w,x,y,c){const z=q.getLogger("esri.widgets.Weather.WeatherViewModel");b=function(n){function g(a){a=n.call(this,a)||this;a.view=null;a._handles=new p;a._settingWeather=!1;a._weatherByType={sunny:new x,cloudy:new t,rainy:new v,snowy:new w,foggy:new u};return a}k._inherits(g,n);var h=g.prototype;h.initialize=function(){this._handles.add([m.watch(()=>this.current,a=>{this._settingWeather||null==a||(this._weatherByType={...this._weatherByType,[a.type]:a})},m.syncAndInitial)])};
h.destroy=function(){this._handles=l.destroyMaybe(this._handles)};h.setWeatherByType=function(a){if(y.validateWeatherType(a,z)){var d=this._environment;null!=d&&(this._settingWeather=!0,d.weather=this._weatherByType[a],this._settingWeather=!1)}};h.setSnowCoverEnabled=function(a){const d=this.current;"snowCover"in d&&(d.snowCover=a?"enabled":"disabled")};k._createClass(g,[{key:"state",get:function(){const a=this.view;if(null==a||!a.ready)return c.WeatherState.Disabled;if(null!=this.error)switch(this.error){case c.WeatherError.NotVisible:break;
default:return c.WeatherState.Error}return c.WeatherState.Ready}},{key:"error",get:function(){const a=this.view;return null!=a&&a.ready?"3d"!==a.type?c.WeatherError.UnsupportedView:"local"===a.viewingMode?c.WeatherError.LocalScene:a.environment.atmosphereEnabled?a.environmentManager.weatherVisible?null:c.WeatherError.NotVisible:c.WeatherError.NoAtmosphere:null}},{key:"current",get:function(){return this._environment?.weather??this._weatherByType.sunny},set:function(a){l.applySome(this._environment,
d=>d.weather=a)}},{key:"test",get:function(){return{...this._weatherByType}}},{key:"_environment",get:function(){const a=this.view;return null!=a&&"3d"===a.type?a.environment:null}}]);return g}(b);e.__decorate([f.property()],b.prototype,"view",void 0);e.__decorate([f.property()],b.prototype,"state",null);e.__decorate([f.property()],b.prototype,"error",null);e.__decorate([f.property()],b.prototype,"current",null);e.__decorate([f.property()],b.prototype,"_environment",null);return b=e.__decorate([r.subclass("esri.widgets.Weather.WeatherViewModel")],
b)});