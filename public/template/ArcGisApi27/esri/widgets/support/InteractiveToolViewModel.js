// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(c,h,d,n,p,q,l,k,e,u,v,w,r){c.InteractiveToolViewModel=function(m){function g(b){var a=m.call(this,b)||this;a.tool=null;a._baseHandles=
new p;a._loggedUnsupportedErrorOnce=!1;a.logger=q.getLogger(h._assertThisInitialized(a));b&&null!=b.visible&&(a.visible=b.visible);return a}h._inherits(g,m);var f=g.prototype;f.initialize=function(){this._baseHandles.add(k.watch(()=>({ready:null!=this.view&&this.view.ready,supported:this.supported}),({ready:b,supported:a})=>{!b||a||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)},k.syncAndInitial))};f.destroy=function(){this.removeTool();
this.view=null;this._baseHandles=l.destroyMaybe(this._baseHandles)};f.createTool=function(b={interactive:!1}){this.removeTool();if(null!=this.view&&this.view.ready&&this.supported){var a=this.constructTool();a.created?(this._set("tool",a),this.view.tools.add(a)):b.interactive?(this._set("tool",a),this.view.addAndActivateTool(a),k.when(()=>a.created,()=>{a.active&&null!=this.view&&(this.view.activeTool=null)},{initial:!0,once:!0})):a.destroy()}};f.removeTool=function(){const b=this.tool;if(null!=b){var a=
l.applySome(this.view,t=>t.tools);null!=a?a.remove(b):b.destroy();this._set("tool",null)}};f.logError=function(...b){this.logger.error(...b)};h._createClass(g,[{key:"active",get:function(){return null!=this.tool&&this.tool.active}},{key:"disabled",get:function(){return null==this.view||!this.view.ready||!this.supported}},{key:"supported",get:function(){return null==this.view||this.view.type===this.supportedViewType}},{key:"view",get:function(){return this._get("view")},set:function(b){b!==this.view&&
(this.removeTool(),this._set("view",b),this._baseHandles.remove("tools"),null!=b&&this._baseHandles.add(b.tools.on("after-remove",a=>{a.item===this.tool&&this._set("tool",null)}),"tools"))}},{key:"visible",set:function(b){this._set("visible",b);null!=this.tool&&(this.tool.visible=b)}}]);return g}(n);d.__decorate([e.property({constructOnly:!0})],c.InteractiveToolViewModel.prototype,"tool",void 0);d.__decorate([e.property()],c.InteractiveToolViewModel.prototype,"active",null);d.__decorate([e.property()],
c.InteractiveToolViewModel.prototype,"disabled",null);d.__decorate([e.property()],c.InteractiveToolViewModel.prototype,"supported",null);d.__decorate([e.property({value:null})],c.InteractiveToolViewModel.prototype,"view",null);d.__decorate([e.property({type:Boolean,value:!0})],c.InteractiveToolViewModel.prototype,"visible",null);c.InteractiveToolViewModel=d.__decorate([r.subclass("esri.widgets.support.InteractiveToolViewModel")],c.InteractiveToolViewModel);Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})});