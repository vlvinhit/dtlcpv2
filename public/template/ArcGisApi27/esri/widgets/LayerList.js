// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),function(S,D,r,B,T,fa,K,y,l,Q,I,M){const C=r.ofType(I);r=function(ma){function ba(t){t=
ma.call(this,t)||this;t.checkPublishStatusEnabled=!1;t.listItemCreatedFunction=null;t.operationalItems=new C;t.view=null;return t}S._inherits(ba,ma);var R=ba.prototype;R.initialize=function(){this.addHandles([T.watch(()=>[this.view,this.view?.ready],()=>this._viewHandles(),T.initial),T.watch(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],"view")};R.destroy=function(){this.removeAllHandles();this.view=null;this.operationalItems.removeAll()};R.triggerAction=
function(t,E){t&&!t.disabled&&this.emit("trigger-action",{action:t,item:E})};R.moveListItem=function(t,E,q,v){const N=t?.layer;if(N){var ja=this.view?.map?.layers,U=E?M.getItemLayers(E):ja;ja=q?M.getItemLayers(q):ja;if(U&&ja){var {operationalItems:n}=this;E=E?.children||n;n=q?.children||n;v=ja.length-v;t.parent=q||null;E.includes(t)&&E.remove(t);U.includes(N)&&U.remove(N);n.includes(t)||n.add(t,v);ja.includes(N)||ja.add(N,v)}}};R._createLayerViewHandles=function(t){this.removeHandles("layer-views");
this._compileList();t&&this.addHandles(t.on("change",()=>this._compileList()),"layer-views")};R._createMapLayerHandles=function(t){this.removeHandles("map-layers");this._compileList();t&&this.addHandles(t.on("change",()=>this._compileList()),"map-layers")};R._createListItem=function(t){const {view:E,listItemCreatedFunction:q,checkPublishStatusEnabled:v}=this;return new I({checkPublishStatusEnabled:v,layer:t,listItemCreatedFunction:q,view:E})};R._removeAllItems=function(){this.operationalItems.removeAll()};
R._getViewableLayers=function(t){if(t)return t.filter(E=>"hide"!==M.findLayerListMode(E))};R._watchLayersListMode=function(t){this.removeHandles("layer-list-mode");t&&t.forEach(E=>{"listMode"in E&&this.addHandles(T.watch(()=>E.listMode,()=>this._compileList()),"layer-list-mode")})};R._compileList=function(){var t=this.get("view.map.layers");this._watchLayersListMode(t);(t=this._getViewableLayers(t))&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()};
R._createNewItems=function(t){const {operationalItems:E}=this;t.forEach(q=>{E.find(v=>v.layer===q)||E.add(this._createListItem(q))})};R._removeItems=function(t){const {operationalItems:E}=this,q=[];E.forEach(v=>{v&&t&&t.includes(v.layer)||q.push(v)});E.removeMany(q)};R._sortItems=function(t){const {operationalItems:E}=this;E.sort((q,v)=>{q=t.indexOf(q.layer);v=t.indexOf(v.layer);return q>v?-1:q<v?1:0})};R._recompileList=function(){this._removeAllItems();this._compileList()};R._viewHandles=function(){const {view:t}=
this;this.removeHandles(["map-layers","layer-views","view-layers"]);this._recompileList();t&&t.ready&&this.addHandles([T.watch(()=>this.view?.map?.allLayers,E=>this._createMapLayerHandles(E),T.initial),T.watch(()=>this.view?.allLayerViews,E=>this._createLayerViewHandles(E),T.initial)],"view-layers")};S._createClass(ba,[{key:"state",get:function(){const t=this.get("view");return this.get("view.ready")?"ready":t?"loading":"disabled"}}]);return ba}(B.EventedAccessor);D.__decorate([fa.property()],r.prototype,
"checkPublishStatusEnabled",void 0);D.__decorate([fa.property()],r.prototype,"listItemCreatedFunction",void 0);D.__decorate([fa.property({type:C})],r.prototype,"operationalItems",void 0);D.__decorate([fa.property({readOnly:!0})],r.prototype,"state",null);D.__decorate([fa.property()],r.prototype,"view",void 0);return r=D.__decorate([Q.subclass("esri.widgets.LayerList.LayerListViewModel")],r)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/arrayUtils ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(S,D,r,B,T,fa,K,y,l,Q,I,M,C,ma,ba,R,t,E){var q;I=T.ofType({key:"type",defaultKeyValue:"button",base:C,typeMap:{button:ma,toggle:R,slider:ba}});const v=T.ofType(I);r=q=function(N){function ja(n){n=N.call(this,n)||this;n.actionsSections=new v;n.actionsOpen=!1;n.checkPublishStatusEnabled=!1;n.children=new (T.ofType(q));n.childrenSortable=!0;n.hidden=!1;n.layer=null;n.layerView=null;n.listItemCreatedFunction=null;n.open=!1;n.panel=null;n.parent=null;n.sortable=!0;n.view=null;return n}S._inherits(ja,
N);var U=ja.prototype;U.initialize=function(){this.handles.add([y.watch(()=>this.layer,n=>this._watchLayerProperties(n),y.initial),y.watch(()=>this.checkPublishStatusEnabled,n=>this._updateChildrenPublishing(n),y.initial),y.watch(()=>this.view,n=>this._updateChildrenView(n),y.initial),y.watch(()=>this.panel,n=>this._setListItemOnPanel(n),y.initial),y.watch(()=>[this.layer,this.view],()=>this._getLayerView(),y.initial)]);"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:this})};U.destroy=function(){this.view=null};U.castPanel=function(n){this.get("panel.open")&&!n.hasOwnProperty("open")&&(n.open=!0);return n?new t(n):null};U.clone=function(){return new q({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};
U._setListItemOnPanel=function(n){n&&(n.listItem=this)};U._updateChildrenPublishing=function(n){const V=this.children;V&&V.forEach(Z=>Z.checkPublishStatusEnabled=n)};U._updateChildrenView=function(n){const V=this.children;V&&V.forEach(Z=>Z.view=n)};U._addChildren=function(n){this.handles.remove("child-list-mode");this.children.removeAll();if(n){n.forEach(Z=>{this.handles.add(y.watch(()=>Z.listMode,()=>this._addChildren(n)),"child-list-mode")});var V=n.filter(Z=>"hide"!==E.findLayerListMode(Z));this.children.addMany(this._makeChildren(V))}};
U._watchSublayerChanges=function(n){n&&this.handles.add(n.on("change",()=>{this._addChildren(n)}),"layer")};U._initializeChildLayers=function(n){this._addChildren(n);this._watchSublayerChanges(n)};U._makeChildren=function(n){return n.map(V=>E.canDisplayLayer(V)?new q({layer:V,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(B.isSome).reverse()};U._watchLayerProperties=function(n){if(this.handles&&
(this.handles.remove("layer"),this.handles.remove("child-list-mode"),n))if(this.handles.add(y.watch(()=>n.listMode,()=>this._watchLayerProperties(n)),"layer"),"hide-children"===E.findLayerListMode(n))this.children.removeAll();else{var V=E.getNormalizedChildLayerProperty(n);V&&this.handles.add(y.watch(()=>n[V],Z=>{n.hasOwnProperty(V)&&this._initializeChildLayers(Z)},y.initial),"layer")}};U._getLayerView=async function(){const {layer:n,view:V}=this;if(n&&V)try{const Z=await V.whenLayerView(n);Z.layer===
this.layer&&this._set("layerView",Z)}catch{}};S._createClass(ja,[{key:"connectionStatus",get:function(){const {layerView:n,publishing:V}=this;if(!V&&n&&"connectionStatus"in n)return n.connectionStatus}},{key:"error",get:function(){return this.layer?.loadError}},{key:"incompatible",get:function(){const {layerView:n}=this;return n&&"spatialReferenceSupported"in n?!n.spatialReferenceSupported:!1}},{key:"title",get:function(){const n=this.get("layer.layer");return(!n||n&&this.get("layer.layer.loaded"))&&
this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(n){this._override("title",n)}},{key:"publishing",get:function(){const {layer:n,checkPublishStatusEnabled:V}=this;return V&&n&&"publishingInfo"in n&&"publishing"===n.publishingInfo?.status}},{key:"updating",get:function(){const {layerView:n,connectionStatus:V,layer:Z,publishing:Ha}=this;return Ha||V?!1:n?n.updating:"loading"===Z?.loadStatus||!1}},{key:"visible",get:function(){return this.layer?.visible},set:function(n){const V=
this.layer;V&&(V.visible=n)}},{key:"visibleAtCurrentScale",get:function(){return!E.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return E.findLayerVisibilityMode(this.layer)}}]);return ja}(K.IdentifiableMixin(fa.HandleOwnerMixin(r)));D.__decorate([l.property({type:v})],r.prototype,"actionsSections",void 0);D.__decorate([l.property()],r.prototype,"actionsOpen",void 0);D.__decorate([l.property()],r.prototype,"checkPublishStatusEnabled",void 0);D.__decorate([l.property({type:T})],
r.prototype,"children",void 0);D.__decorate([l.property()],r.prototype,"childrenSortable",void 0);D.__decorate([l.property({readOnly:!0})],r.prototype,"connectionStatus",null);D.__decorate([l.property({readOnly:!0})],r.prototype,"error",null);D.__decorate([l.property()],r.prototype,"hidden",void 0);D.__decorate([l.property({readOnly:!0})],r.prototype,"incompatible",null);D.__decorate([l.property()],r.prototype,"layer",void 0);D.__decorate([l.property({readOnly:!0})],r.prototype,"layerView",void 0);
D.__decorate([l.property()],r.prototype,"listItemCreatedFunction",void 0);D.__decorate([l.property()],r.prototype,"open",void 0);D.__decorate([l.property({type:t})],r.prototype,"panel",void 0);D.__decorate([Q.cast("panel")],r.prototype,"castPanel",null);D.__decorate([l.property()],r.prototype,"parent",void 0);D.__decorate([l.property()],r.prototype,"sortable",void 0);D.__decorate([l.property()],r.prototype,"title",null);D.__decorate([l.property({readOnly:!0})],r.prototype,"publishing",null);D.__decorate([l.property({readOnly:!0})],
r.prototype,"updating",null);D.__decorate([l.property()],r.prototype,"view",void 0);D.__decorate([l.property()],r.prototype,"visible",null);D.__decorate([l.property({readOnly:!0})],r.prototype,"visibleAtCurrentScale",null);D.__decorate([l.property({readOnly:!0})],r.prototype,"visibilityMode",null);return r=q=D.__decorate([M.subclass("esri.widgets.LayerList.ListItem")],r)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(S,D,r,B,T,fa,K,y){var l;B=l=function(Q){function I(M){M=Q.call(this,M)||this;M.displayValueEnabled=!1;M.max=1;M.min=0;M.step=.1;M.type="slider";M.value=null;return M}S._inherits(I,Q);I.prototype.clone=function(){return new l({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return S._createClass(I)}(y);
D.__decorate([r.property()],B.prototype,"displayValueEnabled",void 0);D.__decorate([r.property()],B.prototype,"max",void 0);D.__decorate([r.property()],B.prototype,"min",void 0);D.__decorate([r.property()],B.prototype,"step",void 0);D.__decorate([r.property()],B.prototype,"value",void 0);return B=l=D.__decorate([K.subclass("esri.support.Action.ActionSlider")],B)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(S,D,r,B,T,fa,K,y,l,Q,I,M,C,ma,ba){B=function(R){function t(q,v){q=R.call(this,q,v)||this;q._legend=null;q.content=null;q.image=null;q.listItem=null;q.open=!1;q.visible=!0;return q}D._inherits(t,R);var E=t.prototype;E.initialize=function(){this.addHandles(fa.watch(()=>this.content,q=>this._createLegend(q),fa.initial))};E.destroy=function(){this._legend=T.destroyMaybe(this._legend)};E.render=function(){return ba.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};E._renderContent=
function(q){const {_legend:v,disabled:N}=this;return!q||N?null:"legend"===q&&v?ba.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:v},v.render()):"string"===typeof q?ba.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:q,innerHTML:q}):ma.isWidget(q)?ba.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:q},q.render()):q instanceof
HTMLElement?ba.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:q,bind:q,afterCreate:this._attachToNode}):null};E._renderContents=function(){const {content:q}=this;return Array.isArray(q)?q.map(v=>this._renderContent(v)):this._renderContent(q)};E._getLegendOptions=function(){const {listItem:q}=this;if(!q)return{};const {layer:v,view:N}=q;return v&&N?{view:N,layerInfos:[C.getLegendLayerInfo(v)]}:{}};E._createLegend=async function(q){if(this._hasLegend(q)&&
!this._legend){({default:q}=await new Promise((ja,U)=>S(["../Legend"],n=>ja(Object.freeze(Object.defineProperty({__proto__:null,default:n},Symbol.toStringTag,{value:"Module"}))),U)));var {listItem:v}=this,N=new q(this._getLegendOptions());this._legend=N;this.notifyChange("className");this.notifyChange("title");q=fa.watch(()=>[v?.view,v?.layer,v?.layer?.source,v?.layer?.parent],()=>this._updateLegend(N),fa.initial);this.addHandles(q,"legends");this.scheduleRender()}};E._hasLegend=function(q){return"legend"===
q?!0:null!=q&&(Array.isArray(q)?q.includes("legend"):!1)};E._attachToNode=function(q){q.appendChild(this)};E._updateLegend=function(q){q.set(this._getLegendOptions());this.scheduleRender()};E._getWidget=function(q){return"legend"===q?this._legend:ma.isWidget(q)?q:null};E._getFirstWidget=function(){const {content:q}=this;if(Array.isArray(q)){let v=null;q.some(N=>{(N=this._getWidget(N))&&(v=N);return!!N});return v}return this._getWidget(q)};D._createClass(t,[{key:"className",get:function(){const {image:q}=
this,v=this._getFirstWidget();return this._get("className")||(!q&&v?v.iconClass??"":"")},set:function(q){this._override("className",q)}},{key:"disabled",get:function(){const {listItem:q,_legend:v,content:N}=this;return q?Array.isArray(N)&&1<N.length?!1:v?!v.activeLayerInfos?.length||!q.visibleAtCurrentScale||!q.visible:!1:!0},set:function(q){this._overrideIfSome("disabled",q)}},{key:"title",get:function(){const q=this._getFirstWidget();return this._get("title")||(q?.label??"")},set:function(q){this._override("title",
q)}}]);return t}(B.IdentifiableMixin(M));r.__decorate([K.property()],B.prototype,"_legend",void 0);r.__decorate([K.property()],B.prototype,"className",null);r.__decorate([K.property()],B.prototype,"content",void 0);r.__decorate([K.property()],B.prototype,"disabled",null);r.__decorate([K.property()],B.prototype,"image",void 0);r.__decorate([K.property()],B.prototype,"listItem",void 0);r.__decorate([K.property()],B.prototype,"title",null);r.__decorate([K.property()],B.prototype,"open",void 0);r.__decorate([K.property()],
B.prototype,"visible",void 0);return B=r.__decorate([I.subclass("esri.widgets.LayerList.ListItemPanel")],B)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(S){function D(l){if(l)return null!=l.listMode?l.listMode:void 0}function r(l){if(l)return null!=l.minScale?l.minScale:void 0}function B(l){if(l)return null!=l.maxScale?l.maxScale:void 0}function T(l){if(l&&!("type"in l&&"wmts"===l.type)&&l.listMode!==y.hideChildren)return"sublayers"in l?"sublayers":"layers"in
l?"layers":void 0}function fa(l,Q){l&&l.sort((I,M)=>{I=Q.indexOf(I.uid);M=Q.indexOf(M.uid);return I>M?-1:I<M?1:0})}function K(l){return!!l?.layer}const y={hide:"hide",hideChildren:"hide-children"};S.canDisplayLayer=function(l){return D(l)!==y.hide};S.canSortSublayers=function(l){l=l&&(l.get("layer.layer")||l.layer);if(!l)return!1;l=l.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof l?l:!0};S.findLayerListMode=D;S.findLayerMaxScale=B;S.findLayerMinScale=r;S.findLayerVisibilityMode=
function(l){if(!l)return"inherited";var Q=l.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof Q)return Q?"independent":"inherited";Q=l.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof Q?Q?"independent":"inherited":null!=l.visibilityMode?l.visibilityMode:"independent"};S.findSelectedItem=function(l,Q){const I=l.layer?.uid;return null!=I?Q.find(M=>M.layer?.uid===I):null};S.getItemLayers=function(l){return(l=l?.layer)&&"layers"in l?
l.layers:null};S.getLegendLayerInfo=function(l){var Q=K(l)?l:null;const I=l?.parent;return(Q="map-image"===I?.type?Q?.source:null)&&I?{layer:I,title:"",sublayerIds:[Q.mapLayerId]}:{layer:l,title:""}};S.getNormalizedChildLayerProperty=T;S.isLayerOutsideScaleRange=function(l,Q){if(!l||isNaN(Q))return!1;var I=r(l);l=B(l);I=null!=I&&!isNaN(I)&&0<I&&Q>I;Q=null!=l&&!isNaN(l)&&0<l&&Q<l;return I||Q};S.isSublayer=K;S.sortChildLayersToIds=function(l,Q){if(l=l?.layer){var I=T(l);I&&(l=l.get(I),fa(l,Q))}};S.sortLayersToIds=
fa;Object.defineProperty(S,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/sortable.esm":function(){define(["exports"],function(S){function D(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable}));c.push.apply(c,e)}return c}function r(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?D(Object(c),!0).forEach(function(e){var g=c[e];e in
a?Object.defineProperty(a,e,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[e]=g}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):D(Object(c)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(c,e))})}return a}function B(a){"@babel/helpers - typeof";B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&
b!==Symbol.prototype?"symbol":typeof b};return B(a)}function T(){T=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return T.apply(this,arguments)}function fa(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var e=Object.keys(a),g;for(g=0;g<e.length;g++){var k=e[g];0<=b.indexOf(k)||(c[k]=a[k])}}if(Object.getOwnPropertySymbols)for(g=Object.getOwnPropertySymbols(a),k=0;k<g.length;k++)e=
g[k],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(c[e]=a[e]);return c}function K(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function y(a,b,c){a.addEventListener(b,c,!Aa&&ub)}function l(a,b,c){a.removeEventListener(b,c,!Aa&&ub)}function Q(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}
function I(a,b,c,e){if(a){c=c||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===c&&Q(a,b):Q(a,b))||e&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function M(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(vb," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(vb," ")}}function C(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?
c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function ma(a,b){var c="";if("string"===typeof a)c=a;else{do{var e=C(a,"transform");e&&"none"!==e&&(c=e+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function ba(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<
e;b++)c(a[b],b);return a}return[]}function R(){var a=document.scrollingElement;return a?a:document.documentElement}function t(a,b,c,e,g){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==R()){var k=a.getBoundingClientRect();var m=k.top;var x=k.left;var z=k.bottom;var F=k.right;var H=k.height;var O=k.width}else x=m=0,z=window.innerHeight,F=window.innerWidth,H=window.innerHeight,O=window.innerWidth;if((b||c)&&a!==window&&(g=g||a.parentNode,!Aa)){do if(g&&g.getBoundingClientRect&&
("none"!==C(g,"transform")||c&&"static"!==C(g,"position"))){z=g.getBoundingClientRect();m-=z.top+parseInt(C(g,"border-top-width"));x-=z.left+parseInt(C(g,"border-left-width"));z=m+k.height;F=x+k.width;break}while(g=g.parentNode)}e&&a!==window&&(e=(a=ma(g||a))&&a.a,g=a&&a.d,a&&(m/=g,x/=e,O/=e,H/=g,z=m+H,F=x+O));return{top:m,left:x,bottom:z,right:F,width:O,height:H}}}function E(a,b,c){var e=U(a,!0);for(a=t(a)[b];e;){b=t(e)[c];var g=void 0;g="top"===c||"left"===c?a>=b:a<=b;if(!g)return e;if(e===R())break;
e=U(e,!1)}return!1}function q(a,b,c,e){for(var g=0,k=0,m=a.children;k<m.length;){if("none"!==m[k].style.display&&m[k]!==p.ghost&&(e||m[k]!==p.dragged)&&I(m[k],c.draggable,a,!1)){if(g===b)return m[k];g++}k++}return null}function v(a,b){for(a=a.lastElementChild;a&&(a===p.ghost||"none"===C(a,"display")||b&&!Q(a,b));)a=a.previousElementSibling;return a||null}function N(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===p.clone||b&&!Q(a,
b)||c++;return c}function ja(a){var b=0,c=0,e=R();if(a){do{var g=ma(a),k=g.d;b+=a.scrollLeft*g.a;c+=a.scrollTop*k}while(a!==e&&(a=a.parentNode))}return[b,c]}function U(a,b){if(!a||!a.getBoundingClientRect)return R();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=C(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;
if(c||b)return a;c=!0}}while(a=a.parentNode);return R()}function n(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function V(a,b){return function(){if(!Qa){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);Qa=setTimeout(function(){Qa=void 0},b)}}}function Z(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function Ha(a){var b=window.Polymer,c=window.jQuery||window.Zepto;
return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function Ba(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==C(c,"display")&&c!==p.ghost){a.push({target:c,rect:t(c)});var e=r({},a[a.length-1].rect);if(c.thisAnimationDuration){var g=ma(c,!0);g&&(e.top-=g.f,e.left-=g.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){var e=a,g=e.splice;
a:{var k=a;c={target:c};for(var m in k)if(k.hasOwnProperty(m))for(var x in c)if(c.hasOwnProperty(x)&&c[x]===k[m][x]){k=Number(m);break a}k=-1}g.call(e,k,1)},animateAll:function(c){var e=this;if(this.options.animation){var g=!1,k=0;a.forEach(function(m){var x=0,z=m.target,F=z.fromRect,H=t(z),O=z.prevFromRect,ka=z.prevToRect;m=m.rect;var ha=ma(z,!0);ha&&(H.top-=ha.f,H.left-=ha.e);z.toRect=H;z.thisAnimationDuration&&n(O,H)&&!n(F,H)&&(m.top-H.top)/(m.left-H.left)===(F.top-H.top)/(F.left-H.left)&&(x=Math.sqrt(Math.pow(O.top-
m.top,2)+Math.pow(O.left-m.left,2))/Math.sqrt(Math.pow(O.top-ka.top,2)+Math.pow(O.left-ka.left,2))*e.options.animation);n(H,F)||(z.prevFromRect=F,z.prevToRect=H,x||(x=e.options.animation),e.animate(z,m,H,x));x&&(g=!0,k=Math.max(k,x),clearTimeout(z.animationResetTimer),z.animationResetTimer=setTimeout(function(){z.animationTime=0;z.prevFromRect=null;z.fromRect=null;z.prevToRect=null;z.thisAnimationDuration=null},x),z.thisAnimationDuration=x)});clearTimeout(b);g?b=setTimeout(function(){"function"===
typeof c&&c()},k):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,e,g,k){if(k){C(c,"transition","");C(c,"transform","");var m=ma(this.el),x=(e.left-g.left)/(m&&m.a||1);e=(e.top-g.top)/(m&&m.d||1);c.animatingX=!!x;c.animatingY=!!e;C(c,"transform","translate3d("+x+"px,"+e+"px,0)");this.forRepaintDummy=c.offsetWidth;C(c,"transition","transform "+k+"ms"+(this.options.easing?" "+this.options.easing:""));C(c,"transform","translate3d(0,0,0)");"number"===
typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){C(c,"transition","");C(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},k)}}}}function ca(a){var b=r({putSortable:la,cloneEl:aa,targetEl:w,rootEl:Y,oldIndex:La,oldDraggableIndex:Ra,newIndex:ra,newDraggableIndex:Da},a);a=b.sortable;var c=b.rootEl,e=b.name,g=b.targetEl,k=b.cloneEl,m=b.toEl,x=b.fromEl,z=b.oldIndex,F=b.newIndex,H=b.oldDraggableIndex,O=b.newDraggableIndex,ka=b.originalEvent,ha=b.putSortable,na=
b.extraEventProperties;if(a=a||c&&c[sa]){var X=a.options,ta="on"+e.charAt(0).toUpperCase()+e.substr(1);!window.CustomEvent||Aa||Sa?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=m||c;b.from=x||c;b.item=g||c;b.clone=k;b.oldIndex=z;b.newIndex=F;b.oldDraggableIndex=H;b.newDraggableIndex=O;b.originalEvent=ka;b.pullMode=ha?ha.lastPutMode:void 0;e=r(r({},na),Ta.getEventProperties(e,a));for(var va in e)b[va]=e[va];c&&c.dispatchEvent(b);X[ta]&&
X[ta].call(a,b)}}function p(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=T({},b);a[sa]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return wb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",
ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(k,m){k.setData("Text",m.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==p.supportPointer&&"PointerEvent"in window&&!Ua,emptyInsertThreshold:5};
Ta.initializePlugins(this,a,c);for(var e in c)e in b||(b[e]=c[e]);xb(b);for(var g in this)"_"===g.charAt(0)&&"function"===typeof this[g]&&(this[g]=this[g].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Ib)this.options.touchStartThreshold=1;b.supportPointer?y(a,"pointerdown",this._onTapStart):(y(a,"mousedown",this._onTapStart),y(a,"touchstart",this._onTapStart));this.nativeDraggable&&(y(a,"dragover",this),y(a,"dragenter",this));$a.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||
[]);T(this,Ba())}function d(a,b,c,e,g,k,m,x){var z=a[sa],F=z.options.onMove,H;if(!window.CustomEvent||Aa||Sa){var O=document.createEvent("Event");O.initEvent("move",!0,!0)}else O=new CustomEvent("move",{bubbles:!0,cancelable:!0});O.to=b;O.from=a;O.dragged=c;O.draggedRect=e;O.related=g||b;O.relatedRect=k||t(b);O.willInsertAfter=x;O.originalEvent=m;a.dispatchEvent(O);F&&(H=F.call(z,O,m));return H}function f(a){a.draggable=!1}function h(){kb=!1}function u(a,b,c){c=t(q(c.el,0,c.options,!0));return b?
a.clientX<c.left-10||a.clientY<c.top&&a.clientX<c.right:a.clientY<c.top-10||a.clientY<c.bottom&&a.clientX<c.left}function A(a,b,c){c=t(v(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function G(a,b,c,e,g,k,m,x){a=e?a.clientY:a.clientX;var z=e?c.height:c.width,F=e?c.top:c.left;c=e?c.bottom:c.right;e=!1;if(!m)if(x&&ab<z*g)if(!Va&&(1===Wa?a>F+z*k/2:a<c-z*
k/2)&&(Va=!0),Va)e=!0;else{if(1===Wa?a<F+ab:a>c-ab)return-Wa}else if(a>F+z*(1-g)/2&&a<c-z*(1-g)/2)return b=N(w)<N(b)?1:-1,b;if(e||m)if(a<F+z*k/2||a>c-z*k/2)return a>F+z/2?1:-1;return 0}function L(a){bb.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&bb.push(c)}}function P(a){return setTimeout(a,0)}function da(){ia.forEach(function(a){clearInterval(a.pid)});ia=[]}function ua(){}function Ea(){}var Aa=K(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),
Sa=K(/Edge/i),yb=K(/firefox/i),Ua=K(/safari/i)&&!K(/chrome/i)&&!K(/android/i),Xa=K(/iP(ad|od|hone)/i),zb=K(/chrome/i)&&K(/android/i),ub={capture:!1,passive:!1},vb=/\s+/g,Qa,sa="Sortable"+(new Date).getTime(),Ma=[],lb={initializeByDefault:!0},Ta={mount:function(a){for(var b in lb)!lb.hasOwnProperty(b)||b in a||(a[b]=lb[b]);Ma.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once");});Ma.push(a)},pluginEvent:function(a,b,c){var e=
this;this.eventCanceled=!1;c.cancel=function(){e.eventCanceled=!0};var g=a+"Global";Ma.forEach(function(k){if(b[k.pluginName]){if(b[k.pluginName][g])b[k.pluginName][g](r({sortable:b},c));if(b.options[k.pluginName]&&b[k.pluginName][a])b[k.pluginName][a](r({sortable:b},c))}})},initializePlugins:function(a,b,c,e){Ma.forEach(function(k){var m=k.pluginName;if(a.options[m]||k.initializeByDefault)k=new k(a,b,a.options),k.sortable=a,k.options=a.options,a[m]=k,T(c,k.defaults)});for(var g in a.options)a.options.hasOwnProperty(g)&&
(e=this.modifyOption(a,g,a.options[g]),"undefined"!==typeof e&&(a.options[g]=e))},getEventProperties:function(a,b){var c={};Ma.forEach(function(e){"function"===typeof e.eventProperties&&T(c,e.eventProperties.call(b[e.pluginName],a))});return c},modifyOption:function(a,b,c){var e;Ma.forEach(function(g){a[g.pluginName]&&g.optionListeners&&"function"===typeof g.optionListeners[b]&&(e=g.optionListeners[b].call(a[g.pluginName],c))});return e}},Jb=["evt"],qa=function(a,b){var c=2<arguments.length&&void 0!==
arguments[2]?arguments[2]:{},e=c.evt;c=fa(c,Jb);Ta.pluginEvent.bind(p)(a,b,r({dragEl:w,parentEl:ea,ghostEl:J,rootEl:Y,nextEl:Ia,lastDownEl:cb,cloneEl:aa,cloneHidden:Fa,dragStarted:Ya,putSortable:la,activeSortable:p.active,originalEvent:e,oldIndex:La,oldDraggableIndex:Ra,newIndex:ra,newDraggableIndex:Da,hideGhostForTarget:Ab,unhideGhostForTarget:Bb,cloneNowHidden:function(){Fa=!0},cloneNowShown:function(){Fa=!1},dispatchSortableEvent:function(g){ca({sortable:b,name:g,originalEvent:e})}},c))},w,ea,
J,Y,Ia,cb,aa,Fa,La,ra,Ra,Da,db,la,Na=!1,eb=!1,$a=[],Ja,wa,mb,nb,Cb,Db,Ya,Oa,Wa,Va=!1,fb=!1,ab,oa,ob=[],kb=!1,bb=[],gb="undefined"!==typeof document,Eb=Sa||Aa?"cssFloat":"float",Ib=gb&&!zb&&!Xa&&"draggable"in document.createElement("div"),Fb=function(){if(gb){if(Aa)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),wb=function(a,b){var c=C(a),e=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-
parseInt(c.borderRightWidth),g=q(a,0,b);a=q(a,1,b);var k=g&&C(g);b=a&&C(a);var m=k&&parseInt(k.marginLeft)+parseInt(k.marginRight)+t(g).width,x=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+t(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":g&&k["float"]&&"none"!==k["float"]?(c="left"===k["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==
c?"horizontal":"vertical"):g&&("block"===k.display||"flex"===k.display||"table"===k.display||"grid"===k.display||m>=e&&"none"===c[Eb]||a&&"none"===c[Eb]&&m+x>e)?"vertical":"horizontal"},Kb=function(a,b,c){var e=c?a.left:a.top,g=c?a.right:a.bottom;a=c?a.width:a.height;var k=c?b.left:b.top,m=c?b.right:b.bottom;b=c?b.width:b.height;return e===k||g===m||e+a/2===k+b/2},Lb=function(a,b){var c;$a.some(function(e){var g=e[sa].options.emptyInsertThreshold;if(g&&!v(e)){var k=t(e),m=b>=k.top-g&&b<=k.bottom+
g;if(a>=k.left-g&&a<=k.right+g&&m)return c=e}});return c},xb=function(a){function b(g,k){return function(m,x,z,F){var H=m.options.group.name&&x.options.group.name&&m.options.group.name===x.options.group.name;if(null==g&&(k||H))return!0;if(null==g||!1===g)return!1;if(k&&"clone"===g)return g;if("function"===typeof g)return b(g(m,x,z,F),k)(m,x,z,F);m=(k?m:x).options.group.name;return!0===g||"string"===typeof g&&g===m||g.join&&-1<g.indexOf(m)}}var c={},e=a.group;e&&"object"==B(e)||(e={name:e});c.name=
e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=c},Ab=function(){!Fb&&J&&C(J,"display","none")},Bb=function(){!Fb&&J&&C(J,"display","")};gb&&!zb&&document.addEventListener("click",function(a){if(eb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),eb=!1},!0);var Ka=function(a){if(w){a=a.touches?a.touches[0]:a;var b=Lb(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&
(c[e]=a[e]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[sa]._onDragOver(c)}}},Mb=function(a){w&&w.parentNode[sa]._isOutsideThisEl(a.target)};p.prototype={constructor:p,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Oa=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,w):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,g=e.preventOnFilter,
k=a.type,m=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,x=(m||a).target,z=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||x,F=e.filter;L(c);if(!(w||/mousedown|pointerdown/.test(k)&&0!==a.button||e.disabled||z.isContentEditable||!this.nativeDraggable&&Ua&&x&&"SELECT"===x.tagName.toUpperCase()||(x=I(x,e.draggable,c,!1),x&&x.animated||cb===x))){La=N(x);Ra=N(x,e.draggable);if("function"===typeof F){if(F.call(this,a,x,this)){ca({sortable:b,rootEl:z,
name:"filter",targetEl:x,toEl:c,fromEl:c});qa("filter",b,{evt:a});g&&a.cancelable&&a.preventDefault();return}}else if(F&&(F=F.split(",").some(function(H){if(H=I(z,H.trim(),c,!1))return ca({sortable:b,rootEl:H,name:"filter",targetEl:x,fromEl:c,toEl:c}),qa("filter",b,{evt:a}),!0}))){g&&a.cancelable&&a.preventDefault();return}e.handle&&!I(z,e.handle,c,!1)||this._prepareDragStart(a,m,x)}}},_prepareDragStart:function(a,b,c){var e=this,g=e.el,k=e.options,m=g.ownerDocument;if(c&&!w&&c.parentNode===g){var x=
t(c);Y=g;w=c;ea=w.parentNode;Ia=w.nextSibling;cb=c;db=k.group;p.dragged=w;Ja={target:w,clientX:(b||a).clientX,clientY:(b||a).clientY};Cb=Ja.clientX-x.left;Db=Ja.clientY-x.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;w.style["will-change"]="all";c=function(){qa("delayEnded",e,{evt:a});p.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!yb&&e.nativeDraggable&&(w.draggable=!0),e._triggerDragStart(a,b),ca({sortable:e,name:"choose",originalEvent:a}),M(w,k.chosenClass,!0))};k.ignore.split(",").forEach(function(z){ba(w,
z.trim(),f)});y(m,"dragover",Ka);y(m,"mousemove",Ka);y(m,"touchmove",Ka);y(m,"mouseup",e._onDrop);y(m,"touchend",e._onDrop);y(m,"touchcancel",e._onDrop);yb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,w.draggable=!0);qa("delayStart",this,{evt:a});!k.delay||k.delayOnTouchOnly&&!b||this.nativeDraggable&&(Sa||Aa)?c():p.eventCanceled?this._onDrop():(y(m,"mouseup",e._disableDelayedDrag),y(m,"touchend",e._disableDelayedDrag),y(m,"touchcancel",e._disableDelayedDrag),y(m,"mousemove",e._delayedDragTouchMoveHandler),
y(m,"touchmove",e._delayedDragTouchMoveHandler),k.supportPointer&&y(m,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,k.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){w&&f(w);clearTimeout(this._dragStartTimer);
this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;l(a,"mouseup",this._disableDelayedDrag);l(a,"touchend",this._disableDelayedDrag);l(a,"touchcancel",this._disableDelayedDrag);l(a,"mousemove",this._delayedDragTouchMoveHandler);l(a,"touchmove",this._delayedDragTouchMoveHandler);l(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?y(document,
"pointermove",this._onTouchMove):b?y(document,"touchmove",this._onTouchMove):y(document,"mousemove",this._onTouchMove):(y(w,"dragend",this),y(Y,"dragstart",this._onDragStart));try{document.selection?P(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){Na=!1;if(Y&&w){qa("dragStarted",this,{evt:b});this.nativeDraggable&&y(document,"dragover",Mb);var c=this.options;!a&&M(w,c.dragClass,!1);M(w,c.ghostClass,!0);p.active=this;a&&this._appendGhost();
ca({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(wa){this._lastX=wa.clientX;this._lastY=wa.clientY;Ab();for(var a=document.elementFromPoint(wa.clientX,wa.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(wa.clientX,wa.clientY);if(a===b)break;b=a}w.parentNode[sa]._isOutsideThisEl(a);if(b){do{if(b[sa]){var c=void 0;if((c=b[sa]._onDragOver({clientX:wa.clientX,clientY:wa.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=
b}while(b=b.parentNode)}Bb()}},_onTouchMove:function(a){if(Ja){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var g=J&&ma(J,!0),k=J&&g&&g.a,m=J&&g&&g.d,x=Xa&&oa&&ja(oa);k=(b.clientX-Ja.clientX+e.x)/(k||1)+(x?x[0]-ob[0]:0)/(k||1);e=(b.clientY-Ja.clientY+e.y)/(m||1)+(x?x[1]-ob[1]:0)/(m||1);if(!p.active&&!Na){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}J&&(g?(g.e+=k-(mb||0),g.f+=e-(nb||0)):g=
{a:1,b:0,c:0,d:1,e:k,f:e},c="matrix(".concat(g.a,",").concat(g.b,",").concat(g.c,",").concat(g.d,",").concat(g.e,",").concat(g.f,")"),C(J,"webkitTransform",c),C(J,"mozTransform",c),C(J,"msTransform",c),C(J,"transform",c),mb=k,nb=e,wa=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!J){var a=this.options.fallbackOnBody?document.body:Y,b=t(w,!0,Xa,!0,a),c=this.options;if(Xa){for(oa=a;"static"===C(oa,"position")&&"none"===C(oa,"transform")&&oa!==document;)oa=oa.parentNode;oa!==document.body&&
oa!==document.documentElement?(oa===document&&(oa=R()),b.top+=oa.scrollTop,b.left+=oa.scrollLeft):oa=R();ob=ja(oa)}J=w.cloneNode(!0);M(J,c.ghostClass,!1);M(J,c.fallbackClass,!0);M(J,c.dragClass,!0);C(J,"transition","");C(J,"transform","");C(J,"box-sizing","border-box");C(J,"margin",0);C(J,"top",b.top);C(J,"left",b.left);C(J,"width",b.width);C(J,"height",b.height);C(J,"opacity","0.8");C(J,"position",Xa?"absolute":"fixed");C(J,"zIndex","100000");C(J,"pointerEvents","none");p.ghost=J;a.appendChild(J);
C(J,"transform-origin",Cb/parseInt(J.style.width)*100+"% "+Db/parseInt(J.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,e=a.dataTransfer,g=c.options;qa("dragStart",this,{evt:a});p.eventCanceled?this._onDrop():(qa("setupClone",this),p.eventCanceled||(aa=Ha(w),aa.removeAttribute("id"),aa.draggable=!1,aa.style["will-change"]="",this._hideClone(),M(aa,this.options.chosenClass,!1),p.clone=aa),c.cloneId=P(function(){qa("clone",c);p.eventCanceled||(c.options.removeCloneOnHide||Y.insertBefore(aa,
w),c._hideClone(),ca({sortable:c,name:"clone"}))}),!b&&M(w,g.dragClass,!0),b?(eb=!0,c._loopId=setInterval(c._emulateDragOver,50)):(l(document,"mouseup",c._onDrop),l(document,"touchend",c._onDrop),l(document,"touchcancel",c._onDrop),e&&(e.effectAllowed="move",g.setData&&g.setData.call(c,e,w)),y(document,"drop",c),C(w,"transform","translateZ(0)")),Na=!0,c._dragStartId=P(c._dragStarted.bind(c,b,a)),y(document,"selectstart",c),Ya=!0,Ua&&C(document.body,"user-select","none"))},_onDragOver:function(a){function b(Ga,
hb){qa(Ga,X,r({evt:a,isOwner:ka,axis:va?"vertical":"horizontal",revert:z,dragRect:xa,targetRect:x,canSort:ha,fromSortable:na,target:m,completed:e,onMove:function(Gb,Nb){return d(Y,k,w,xa,Gb,t(Gb),a,Nb)},changed:g},hb))}function c(){b("dragOverAnimationCapture");X.captureAnimationState();X!==na&&na.captureAnimationState()}function e(Ga){b("dragOverCompleted",{insertion:Ga});Ga&&(ka?O._hideClone():O._showClone(X),X!==na&&(M(w,la?la.options.ghostClass:O.options.ghostClass,!1),M(w,F.ghostClass,!0)),la!==
X&&X!==p.active?la=X:X===p.active&&la&&(la=null),na===X&&(X._ignoreWhileAnimating=m),X.animateAll(function(){b("dragOverAnimationComplete");X._ignoreWhileAnimating=null}),X!==na&&(na.animateAll(),na._ignoreWhileAnimating=null));if(m===w&&!w.animated||m===k&&!m.animated)Oa=null;F.dragoverBubble||a.rootEl||m===document||(w.parentNode[sa]._isOutsideThisEl(a.target),!Ga&&Ka(a));!F.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return ta=!0}function g(){ra=N(w);Da=N(w,F.draggable);ca({sortable:X,
name:"change",toEl:k,newIndex:ra,newDraggableIndex:Da,originalEvent:a})}var k=this.el,m=a.target,x,z,F=this.options,H=F.group,O=p.active,ka=db===H,ha=F.sort,na=la||O,X=this,ta=!1;if(!kb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();m=I(m,F.draggable,k,!0);b("dragOver");if(p.eventCanceled)return ta;if(w.contains(a.target)||m.animated&&m.animatingX&&m.animatingY||X._ignoreWhileAnimating===m)return e(!1);eb=!1;if(O&&!F.disabled&&(ka?ha||(z=ea!==Y):la===this||(this.lastPutMode=db.checkPull(this,
O,w,a))&&H.checkPut(this,O,w,a))){var va="vertical"===this._getDirection(a,m);var xa=t(w);b("dragOverValid");if(p.eventCanceled)return ta;if(z)return ea=Y,c(),this._hideClone(),b("revert"),p.eventCanceled||(Ia?Y.insertBefore(w,Ia):Y.appendChild(w)),e(!0);H=v(k,F.draggable);if(!H||A(a,va,this)&&!H.animated){if(H===w)return e(!1);H&&k===a.target&&(m=H);m&&(x=t(m));if(!1!==d(Y,k,w,xa,m,x,a,!!m))return c(),H&&H.nextSibling?k.insertBefore(w,H.nextSibling):k.appendChild(w),ea=k,g(),e(!0)}else if(H&&u(a,
va,this)){var ya=q(k,0,F,!0);if(ya===w)return e(!1);m=ya;x=t(m);if(!1!==d(Y,k,w,xa,m,x,a,!1))return c(),k.insertBefore(w,ya),ea=k,g(),e(!0)}else if(m.parentNode===k){x=t(m);var W=0;W=w.parentNode!==k;var pa=!Kb(w.animated&&w.toRect||xa,m.animated&&m.toRect||x,va);H=va?"top":"left";var Ca=E(m,"top","top")||E(w,"top","top"),ib=Ca?Ca.scrollTop:void 0;Oa!==m&&(ya=x[H],Va=!1,fb=!pa&&F.invertSwap||W);W=G(a,m,x,va,pa?1:F.swapThreshold,null==F.invertedSwapThreshold?F.swapThreshold:F.invertedSwapThreshold,
fb,Oa===m);if(0!==W){pa=N(w);do{pa-=W;var za=ea.children[pa]}while(za&&("none"===C(za,"display")||za===J))}if(0===W||za===m)return e(!1);Oa=m;Wa=W;za=m.nextElementSibling;pa=!1;pa=1===W;W=d(Y,k,w,xa,m,x,a,pa);if(!1!==W){if(1===W||-1===W)pa=1===W;kb=!0;setTimeout(h,30);c();pa&&!za?k.appendChild(w):m.parentNode.insertBefore(w,pa?za:m);Ca&&Z(Ca,0,ib-Ca.scrollTop);ea=w.parentNode;void 0===ya||fb||(ab=Math.abs(ya-t(m)[H]));g();return e(!0)}}if(k.contains(w))return e(!1)}return!1}},_ignoreWhileAnimating:null,
_offMoveEvents:function(){l(document,"mousemove",this._onTouchMove);l(document,"touchmove",this._onTouchMove);l(document,"pointermove",this._onTouchMove);l(document,"dragover",Ka);l(document,"mousemove",Ka);l(document,"touchmove",Ka)},_offUpEvents:function(){var a=this.el.ownerDocument;l(a,"mouseup",this._onDrop);l(a,"touchend",this._onDrop);l(a,"pointerup",this._onDrop);l(a,"touchcancel",this._onDrop);l(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;ra=N(w);Da=N(w,
c.draggable);qa("drop",this,{evt:a});ea=w&&w.parentNode;ra=N(w);Da=N(w,c.draggable);if(!p.eventCanceled&&(Va=fb=Na=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(l(document,"drop",this),l(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ua&&C(document.body,"user-select",""),C(w,"transform",""),a&&(Ya&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),
J&&J.parentNode&&J.parentNode.removeChild(J),(Y===ea||la&&"clone"!==la.lastPutMode)&&aa&&aa.parentNode&&aa.parentNode.removeChild(aa),w&&(this.nativeDraggable&&l(w,"dragend",this),f(w),w.style["will-change"]="",Ya&&!Na&&M(w,la?la.options.ghostClass:this.options.ghostClass,!1),M(w,this.options.chosenClass,!1),ca({sortable:this,name:"unchoose",toEl:ea,newIndex:null,newDraggableIndex:null,originalEvent:a}),Y!==ea?(0<=ra&&(ca({rootEl:ea,name:"add",toEl:ea,fromEl:Y,originalEvent:a}),ca({sortable:this,
name:"remove",toEl:ea,originalEvent:a}),ca({rootEl:ea,name:"sort",toEl:ea,fromEl:Y,originalEvent:a}),ca({sortable:this,name:"sort",toEl:ea,originalEvent:a})),la&&la.save()):ra!==La&&0<=ra&&(ca({sortable:this,name:"update",toEl:ea,originalEvent:a}),ca({sortable:this,name:"sort",toEl:ea,originalEvent:a})),p.active)))){if(null==ra||-1===ra)ra=La,Da=Ra;ca({sortable:this,name:"end",toEl:ea,originalEvent:a});this.save()}this._nulling()},_nulling:function(){qa("nulling",this);Y=w=ea=J=Ia=aa=cb=Fa=Ja=wa=
Ya=ra=Da=La=Ra=Oa=Wa=la=db=p.dragged=p.ghost=p.clone=p.active=null;bb.forEach(function(a){a.checked=!0});bb.length=mb=nb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":w&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,g=c.length,k=this.options;e<g;e++)if(b=c[e],
I(b,k.draggable,this.el,!1)){var m=a,x=m.push,z;if(!(z=b.getAttribute(k.dataIdAttr))){b=b.tagName+b.className+b.src+b.href+b.textContent;z=b.length;for(var F=0;z--;)F+=b.charCodeAt(z);z=F.toString(36)}x.call(m,z)}return a},sort:function(a,b){var c={},e=this.el;this.toArray().forEach(function(g,k){k=e.children[k];I(k,this.options.draggable,e,!1)&&(c[g]=k)},this);b&&this.captureAnimationState();a.forEach(function(g){c[g]&&(e.removeChild(c[g]),e.appendChild(c[g]))});b&&this.animateAll()},save:function(){var a=
this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return I(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=Ta.modifyOption(this,a,b);c[a]="undefined"!==typeof e?e:b;"group"===a&&xb(c)},destroy:function(){qa("destroy",this);var a=this.el;a[sa]=null;l(a,"mousedown",this._onTapStart);l(a,"touchstart",this._onTapStart);l(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(l(a,"dragover",this),l(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),
function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();$a.splice($a.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Fa||(qa("hideClone",this),p.eventCanceled||(C(aa,"display","none"),this.options.removeCloneOnHide&&aa.parentNode&&aa.parentNode.removeChild(aa),Fa=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Fa&&(qa("showClone",this),p.eventCanceled||(w.parentNode!=Y||this.options.group.revertClone?Ia?Y.insertBefore(aa,Ia):Y.appendChild(aa):
Y.insertBefore(aa,w),this.options.group.revertClone&&this.animate(w,aa),C(aa,"display",""),Fa=!1))}};gb&&y(document,"touchmove",function(a){(p.active||Na)&&a.cancelable&&a.preventDefault()});p.utils={on:y,off:l,css:C,find:ba,is:function(a,b){return!!I(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:V,closest:I,toggleClass:M,clone:Ha,index:N,nextTick:P,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:wb,getChild:q};p.get=
function(a){return a[sa]};p.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(p.utils=r(r({},p.utils),e.utils));Ta.mount(e)})};p.create=function(a,b){return new p(a,b)};p.version="1.15.0";var ia=[],Za,pb,qb=!1,rb,sb,jb,Pa,tb=V(function(a,b,c,e){if(b.scroll){var g=
(a.touches?a.touches[0]:a).clientX,k=(a.touches?a.touches[0]:a).clientY,m=b.scrollSensitivity,x=b.scrollSpeed,z=R(),F=!1;if(pb!==c){pb=c;da();Za=b.scroll;var H=b.scrollFn;!0===Za&&(Za=U(c,!0))}c=0;var O=Za;do{var ka=O,ha=t(ka),na=ha.top,X=ha.bottom,ta=ha.left,va=ha.right,xa=ha.width;ha=ha.height;var ya=void 0,W=void 0,pa=ka.scrollWidth,Ca=ka.scrollHeight;W=C(ka);var ib=ka.scrollLeft,za=ka.scrollTop;ka===z?(ya=xa<pa&&("auto"===W.overflowX||"scroll"===W.overflowX||"visible"===W.overflowX),W=ha<Ca&&
("auto"===W.overflowY||"scroll"===W.overflowY||"visible"===W.overflowY)):(ya=xa<pa&&("auto"===W.overflowX||"scroll"===W.overflowX),W=ha<Ca&&("auto"===W.overflowY||"scroll"===W.overflowY));ta=ya&&(Math.abs(va-g)<=m&&ib+xa<pa)-(Math.abs(ta-g)<=m&&!!ib);na=W&&(Math.abs(X-k)<=m&&za+ha<Ca)-(Math.abs(na-k)<=m&&!!za);if(!ia[c])for(X=0;X<=c;X++)ia[X]||(ia[X]={});if(ia[c].vx!=ta||ia[c].vy!=na||ia[c].el!==ka)if(ia[c].el=ka,ia[c].vx=ta,ia[c].vy=na,clearInterval(ia[c].pid),0!=ta||0!=na)F=!0,ia[c].pid=setInterval(function(){e&&
0===this.layer&&p.active._onTouchMove(jb);var Ga=ia[this.layer].vy?ia[this.layer].vy*x:0,hb=ia[this.layer].vx?ia[this.layer].vx*x:0;"function"===typeof H&&"continue"!==H.call(p.dragged.parentNode[sa],hb,Ga,a,jb,ia[this.layer].el)||Z(ia[this.layer].el,hb,Ga)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&O!==z&&(O=U(O,!1)));qb=F}},30),Hb=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,g=a.activeSortable,k=a.dispatchSortableEvent,m=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(g=c||
g,m(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),g&&!g.el.contains(b)&&(k("spill"),this.onSpill({dragEl:e,putSortable:c})))};ua.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=q(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);
this.sortable.animateAll();a&&a.animateAll()},drop:Hb};T(ua,{pluginName:"revertOnSpill"});Ea.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Hb};T(Ea,{pluginName:"removeOnSpill"});p.mount(new function(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&
(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):this.options.supportPointer?y(document,"pointermove",this._handleFallbackAutoScroll):b.touches?y(document,"touchmove",this._handleFallbackAutoScroll):y(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?
l(document,"dragover",this._handleAutoScroll):(l(document,"pointermove",this._handleFallbackAutoScroll),l(document,"touchmove",this._handleFallbackAutoScroll),l(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Pa);da();clearTimeout(Qa);Qa=void 0},nulling:function(){jb=pb=Za=qb=Pa=rb=sb=null;ia.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var e=this,g=(b.touches?b.touches[0]:b).clientX,k=(b.touches?b.touches[0]:b).clientY,
m=document.elementFromPoint(g,k);jb=b;if(c||this.options.forceAutoScrollFallback||Sa||Aa||Ua){tb(b,this.options,m,c);var x=U(m,!0);!qb||Pa&&g===rb&&k===sb||(Pa&&clearInterval(Pa),Pa=setInterval(function(){var z=U(document.elementFromPoint(g,k),!0);z!==x&&(x=z,da());tb(b,e.options,z,c)},10),rb=g,sb=k)}else this.options.bubbleScroll&&U(m,!0)!==R()?tb(b,this.options,U(m,!1),!1):da()}};return T(a,{pluginName:"scroll",initializeByDefault:!0})});p.mount(Ea,ua);S.Sortable=p})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/events ../core/has ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./LayerList/support/layerListUtils ./support/componentsUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../chunks/sortable.esm".split(" "),function(S,
D,r,B,T,fa,K,y,l,Q,I,M,C,ma,ba,R,t,E,q,v,N,ja){function U(Ba){const {actionsOpen:ca,children:p}=Ba;ca&&(Ba.actionsOpen=!1);p.forEach(d=>U(d))}function n(Ba){return Ba?.["data-item"]}const V=B.ofType(ma),Z={exclusive:"exclusive",inherited:"inherited",independent:"independent"},Ha={statusIndicators:!0,errors:!1};B=function(Ba){function ca(d,f){var h=Ba.call(this,d,f)||this;h._sortableNodes=new Map;h._sortableMap=new Map;h._focusSortUid=null;h._newUI=fa("esri-layerlist-new-ui");h._tooltipReferenceMap=
new Map;h.visibleItems=null;h.iconClass="esri-icon-layers";h.icon=null;h.listItemCanGiveFunction=null;h.listItemCanReceiveFunction=null;h.messages=null;h.messagesCommon=null;h.multipleSelectionEnabled=!1;h.selectionEnabled=!1;h.selectedItems=new V;h.viewModel=new C;h.visibleElements={...Ha};h._onSortableSort=({to:u,from:A,item:G,newIndex:L})=>{A&&u&&(A===u?h._sortLayers(h._sortableMap.get(A.dataset.group)):h._moveLayerFromChildList({to:u,from:A,item:G,newIndex:L}))};h._sortableCanSort=(u,A)=>!(!u.el.dataset.group||
!A.el.dataset.group);h._sortableCanPull=(u,A,G)=>{const {listItemCanGiveFunction:L}=D._assertThisInitialized(h);G=n(G);const P=n(A.el),da=n(u.el);G={selected:G,from:P,to:da};return h._sortableCanSort(u,A)&&"function"===typeof L?L.call(null,G):!0};h._sortableCanPut=(u,A,G)=>{const {listItemCanReceiveFunction:L}=D._assertThisInitialized(h);G=n(G);const P=n(A.el),da=n(u.el);G={selected:G,from:P,to:da};return h._sortableCanSort(u,A)&&"function"===typeof L?L.call(null,G):!0};h._onSortableEnd=({oldIndex:u,
from:A,to:G,item:L})=>{A!==G&&A.insertBefore(L,A.children[u])};return h}D._inherits(ca,Ba);var p=ca.prototype;p.initialize=function(){const d=this.operationalItems;this._setVisibleItems(d);this.addHandles([K.on(()=>this.operationalItems,"change",()=>this._itemsChanged(d)),K.watch(()=>this.visibleElements,()=>this._itemsChanged(d)),K.watch(()=>this.selectionEnabled,()=>this._toggleAllSorting(),K.initial)])};p.loadDependencies=function(){return R.loadCalciteComponents({icon:()=>new Promise((d,f)=>S(["../chunks/calcite-icon"],
d,f)),tooltip:()=>new Promise((d,f)=>S(["../chunks/calcite-tooltip"],d,f))})};p.destroy=function(){this.removeAllHandles();this._destroySortables();this._tooltipReferenceMap.clear()};p.castVisibleElements=function(d){return{...Ha,...d}};p.triggerAction=function(d,f){return this.viewModel.triggerAction(d,f)};p.render=function(){const {visibleItems:d,_newUI:f}=this;var h=this.viewModel?.state;h={["esri-layer-list--new-ui"]:f,["esri-hidden"]:"loading"===h,["esri-disabled"]:"disabled"===h};const u=this.renderItemTooltips(),
A=this.renderItems();return v.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",h)},d.length?[u,A]:this.renderNoItems())};p.renderItemTooltip=function(d){const {_tooltipReferenceMap:f,messages:h}=this;return d?v.tsx("calcite-tooltip",{label:h.layerIncompatible,referenceElement:f.get(d.uid)},h.layerIncompatibleTooltip):null};p.renderItemTooltipNodes=function(d){const {incompatible:f,children:h}=d;return[f?this.renderItemTooltip(d):null,...(!f&&h?h.toArray().map(u=>this.renderItemTooltipNodes(u)):
[])]};p.renderItemTooltips=function(){return this.visibleItems.toArray().map(d=>this.renderItemTooltipNodes(d))??[]};p.renderNoItems=function(){return v.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)};p.renderItems=function(){const {visibleItems:d,selectionEnabled:f,messages:h}=this;return v.tsx("ul",{"aria-label":h.widgetLabel,role:f?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":"root",
bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},d.map(u=>this.renderItem(u,null)).toArray())};p.renderActionsMenuIcon=function(d,f){const {messagesCommon:h}=this;return v.tsx("div",{key:"actions-menu-toggle","data-item":d,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:d.actionsOpen}),
tabindex:"0",role:"button","aria-controls":f,"aria-label":h.options,title:h.options},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};p.renderActionsMenu=function(d,f,h,u){var {panel:A}=d;A=A&&A.visible?this.renderPanelButton(A):null;const G=(f=1===h&&this._getSingleActionButton(f))?this.renderAction({item:d,action:f,singleAction:!0}):null;return(d=!f&&h?this.renderActionsMenuIcon(d,u):null)||A||f?v.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},
A,G,d):null};p.renderChildList=function(d,f){const {selectionEnabled:h}=this,{visibilityMode:u,children:A}=d,G=this._hasChildren(d),L=!G&&h&&"group"===d.layer?.type,{exclusive:P,inherited:da}=Z,ua={["esri-layer-list__list--exclusive"]:u===P,["esri-layer-list__list--inherited"]:u===da,["esri-layer-list__list--independent"]:u!==da&&u!==P};return G||L?v.tsx("ul",{bind:this,key:"list-items",id:f,"data-group":d.uid,"data-item":d,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,
class:this.classes("esri-layer-list__list",ua),"aria-expanded":d.open?"true":"false",role:h?"listbox":u===P?"radiogroup":"group",hidden:d.open||L?null:!0},A?.map(Ea=>this.renderItem(Ea,d)).toArray()):null};p.renderChildrenToggle=function(d,f){var {messagesCommon:h}=this;const u=this._hasChildren(d),A={["esri-layer-list__child-toggle--open"]:d.open};h=d.open?h.collapse:h.expand;return u?v.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":d,key:"toggle-children",
class:this.classes("esri-layer-list__child-toggle",A),tabindex:"0",role:"button","aria-controls":f,"aria-label":h,title:h},v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):
null};p.renderItemMessage=function(d){return d.error?v.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-message",role:"alert"},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),this.messages.layerError):d.incompatible?v.tsx("div",{key:"esri-layer-list__incompatible",class:"esri-layer-list__item-message",role:"alert"},v.tsx("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:"esri-icon-notice-triangle",afterCreate:f=>this._setTooltipReference(f,d)}),this.messages.layerIncompatible):
null};p.renderItemContent=function(d,f,h){var {id:u}=this,A=`${u}_${d.uid}`;u=`${A}_actions`;A=`${A}__list`;const {panel:G}=d,L=this._filterActions(d.actionsSections),P=this._countActions(L);return[v.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(d,A),this.renderLabel(d,f,h),this.renderActionsMenu(d,L,P,u)),this.renderItemMessage(d),P?this.renderActionsSections(d,L,u):null,G&&G.open&&!G.disabled?G.render():null,this.renderChildList(d,A)]};p.renderItem=
function(d,f){const {_newUI:h,id:u,selectionEnabled:A,selectedItems:G}=this,L=`${`${u}_${d.uid}`}__title`;var P=this._hasMessage(d);P={["esri-layer-list__item--has-children"]:this._hasChildren(d),["esri-layer-list__item--has-message"]:!!P,["esri-layer-list__item--invisible"]:h&&!d.visible,["esri-layer-list__item--invisible-at-scale"]:!d.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:A};if(A){const da={["data-layer-uid"]:d.layer?.uid,["data-sort-filter"]:(!d.sortable).toString()};return v.tsx("li",
{key:`item-with-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",P),"aria-labelledby":L,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":d,"data-group":f?f.uid:"root",tabIndex:0,"aria-selected":ba.findSelectedItem(d,G)?"true":"false",role:"option",...da},this.renderItemContent(d,f,L))}return v.tsx("li",{key:`item-no-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,
class:this.classes("esri-layer-list__item",P),"aria-labelledby":L},this.renderItemContent(d,f,L))};p.renderConnectionIcon=function(d){({connectionStatus:d}=d);return null!=d?v.tsx("calcite-icon",{icon:"connected"===d?"beacon":"offline",scale:"s"}):null};p.renderItemStatus=function(d,f){var {visibleElements:h}=this;if(!h.statusIndicators)return null;const {connectionStatus:u,publishing:A,updating:G}=d;h=!!u;return v.tsx("span",{class:this.classes({["esri-layer-list__status-indicator"]:!0,["esri-layer-list__publishing"]:A,
["esri-layer-list__updating"]:G&&!f,["esri-layer-list__connection-status"]:h,["esri-layer-list__connection-status--connected"]:h&&"connected"===u}),key:"layer-item-status"},this.renderConnectionIcon(d))};p.renderItemTitle=function(d,f){const {messages:h}=this;if(!d)return null;const u=d.title||h.untitledLayer;d=d.visibleAtCurrentScale?u:`${u} (${h.layerInvisibleAtScale})`;return v.tsx("span",{key:"layer-title-container",id:f,title:d,"aria-label":d,class:"esri-layer-list__item-title"},u)};p.renderItemToggleIcon=
function(d,f){const {_newUI:h}=this,{exclusive:u}=Z;f=f?.visibilityMode;return v.tsx("span",{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:h,["esri-layer-list__item-toggle-icon"]:h&&f!==u,["esri-layer-list__item-radio-icon"]:h&&f===u,["esri-icon-radio-checked"]:f===u&&d.visible,["esri-icon-radio-unchecked"]:f===u&&!d.visible,["esri-icon-visible"]:f!==u&&d.visible,["esri-icon-non-visible"]:f!==u&&!d.visible}),"aria-hidden":"true"})};p.renderItemToggle=function(d,
f,h){const {selectionEnabled:u,messages:A}=this,{exclusive:G}=Z,L=f?.visibilityMode;return u?v.tsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":L,tabIndex:0,title:A.layerVisibility,"aria-checked":d.visible?"true":"false",role:L===G?"radio":"switch","aria-labelledby":h},this.renderItemToggleIcon(d,f)):v.tsx("span",{key:"item-toggle",class:"esri-layer-list__item-toggle"},
this.renderItemToggleIcon(d,f))};p.renderLabel=function(d,f,h){const {selectionEnabled:u,_newUI:A,messages:G}=this,{inherited:L,exclusive:P}=Z,da=f?.visibilityMode;var ua=da===P?"radio":"switch";const Ea=A?[this.renderItemTitle(d,h),this.renderItemStatus(d,f),this.renderItemToggle(d,f,h)]:[this.renderItemToggle(d,f,h),this.renderItemTitle(d,h),this.renderItemStatus(d,f)];ua=u?v.tsx("div",{key:`item-label-no-selection-${d.uid}`,class:"esri-layer-list__item-label"},Ea):v.tsx("div",{key:`item-label-with-selection-${d.uid}`,
class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":da,tabIndex:0,"aria-checked":d.visible?"true":"false",title:G.layerVisibility,role:ua,"aria-labelledby":h},Ea);return da===L||d.error?v.tsx("div",{key:`item-label-container-${d.uid}`,class:"esri-layer-list__item-label"},this.renderItemTitle(d,h),this.renderItemStatus(d,f)):ua};p.renderPanelButton=function(d){const {className:f,open:h,title:u,image:A,
disabled:G}=d,L=A||f?f:"esri-icon-default-action",P=this._getIconImageStyles(d),da={["esri-layer-list__item-actions-menu-item--active"]:h&&!G},ua={["esri-layer-list__item-action-image"]:!!P["background-image"],["esri-disabled-element"]:d.disabled};L&&(ua[L]=!!L);return v.tsx("div",{"aria-disabled":d.disabled.toString(),key:`panel-${d.uid}`,bind:this,"data-panel":d,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",da),role:"button",
tabindex:d.disabled?null:0,title:u,"aria-label":u},v.tsx("span",{class:this.classes(ua),styles:P}))};p.renderActionsSections=function(d,f,h){f=f.toArray().map((u,A)=>v.tsx("ul",{key:`${d}-action-section-${A}`,class:"esri-layer-list__item-actions-list"},this.renderActionSection(d,u)));return v.tsx("div",{role:"group","aria-expanded":d.actionsOpen?"true":"false",key:"actions-section",id:h,class:"esri-layer-list__item-actions",hidden:d.actionsOpen?null:!0},f)};p.renderActionSection=function(d,f){return(f&&
f.toArray()).map(h=>this.renderAction({item:d,action:h}))};p.renderActionIcon=function(d){const {active:f,className:h}=d,u=this._getIconImageStyles(d);d="button"!==d.type||d.image||h?h:"esri-icon-default-action";const A={["esri-layer-list__item-action-image"]:!f&&!!u["background-image"],["esri-icon-loading-indicator"]:f,["esri-rotating"]:f};d&&!f&&(A[d]=!0);return v.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",A),styles:u})};p.renderActionTitle=
function(d,f){return f?null:v.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},d)};p.renderAction=function(d){const {item:f,action:h,singleAction:u}=d,{active:A,disabled:G,title:L}=h;d={["esri-layer-list__item-actions-menu-item"]:u&&"button"===h.type,["esri-layer-list__item-action"]:A||!u&&"toggle"!==h.type,["esri-layer-list__action-toggle"]:!A&&"toggle"===h.type,["esri-layer-list__action-toggle--on"]:!A&&"toggle"===h.type&&h.value,["esri-disabled-element"]:G};const P=[this.renderActionIcon(h),
this.renderActionTitle(L,u)];return u?v.tsx("div",{bind:this,"data-item":f,"data-action":h,role:"button",key:`single-action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",title:L??void 0,"aria-label":L??void 0},P):v.tsx("li",{bind:this,"data-item":f,"data-action":h,key:`action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",role:"button",title:L??void 0,"aria-label":L??void 0},P)};p._setTooltipReference=function(d,
f){this._tooltipReferenceMap.set(f.uid,d);this.scheduleRender()};p._hasMessage=function(d){return!!d.error||d.incompatible};p._hasChildren=function(d){return!!d.children.length&&!this._hasMessage(d)};p._sortNodeRemoved=function(d){const {_sortableMap:f}=this;d=d.dataset.group;const h=f.get(d);h&&h.destroy();f.delete(d)};p._destroySortables=function(){const {_sortableMap:d,_sortableNodes:f}=this;d.forEach(h=>h&&h.destroy());d.clear();f.clear()};p._moveLayerFromChildList=function({to:d,from:f,item:h,
newIndex:u}){h=n(h);d=n(d);f=n(f);this.viewModel.moveListItem(h,f,d,u)};p._sortLayers=function(d){if(d){var f=n(d.el);d=d.toArray();f?ba.sortChildLayersToIds(f,d):ba.sortLayersToIds(this.view?.map?.layers,d)}};p._toggleSorting=function(d,f){const {_sortableMap:h,selectionEnabled:u}=this,A=h.get(f);var G=n(d);G=("root"===f||G?.childrenSortable&&ba.canSortSublayers(G))&&u;A?A.option("disabled",!G):G&&(d=ja.Sortable.create(d,{dataIdAttr:"data-layer-uid",group:{name:f,pull:this._sortableCanPull,put:this._sortableCanPut},
filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!G,chosenClass:"esri-layer-list--chosen"}),h.set(f,d))};p._toggleAllSorting=function(){this._sortableNodes.forEach((d,f)=>this._toggleSorting(d,f))};p._sortNodeCreated=function(d){const f=d.dataset.group;f&&(this._sortableNodes.set(f,d),this._toggleSorting(d,f))};p._setVisibleItems=function(d){this.visibleItems=d.filter(f=>!f.hidden&&(this.visibleElements.errors||!f.error))};p._getSingleActionButton=
function(d){return d.reduce(f=>f).filter(f=>f&&"button"===f.type).at(0)};p._focusListItem=function(d){const {_focusSortUid:f}=this;d&&f&&n(d)?.layer?.uid===f&&(d.focus(),this._focusSortUid=null)};p._watchActionSectionChanges=function(d){this.addHandles(d.on("change",this.scheduleRender.bind(this)),"action-section");d.forEach(f=>this._renderOnActionChanges(f))};p._renderOnActionChanges=function(d){"toggle"===d.type?this.addHandles(K.watch(()=>[d?.className,d?.image,d?.id,d?.title,d?.visible,d?.value],
()=>this.scheduleRender(),K.initial),"actions"):"slider"===d.type?this.addHandles(K.watch(()=>[d?.className,d?.id,d?.title,d?.visible,d?.value,d?.displayValueEnabled,d?.max,d?.min,d?.step],()=>this.scheduleRender(),K.initial),"actions"):this.addHandles(K.watch(()=>[d?.className,d?.image,d?.id,d?.title,d?.visible],()=>this.scheduleRender(),K.initial),"actions")};p._renderOnItemChanges=function(d){this.addHandles([K.watch(()=>[d?.actionsOpen,d?.visible,d?.open,d?.updating,d?.connectionStatus,d?.publishing,
d?.title,d?.visibleAtCurrentScale,d?.error,d?.visibilityMode,d?.panel,d?.panel?.title,d?.panel?.content,d?.panel?.className,d?.sortable,d?.childrenSortable],()=>this.scheduleRender(),K.syncAndInitial),K.watch(()=>[d?.hidden,d?.error],()=>this._setVisibleItems(this.operationalItems)),d.actionsSections.on("change",()=>this.scheduleRender()),d.children.on("change",()=>this.scheduleRender())],"items");d.children.forEach(f=>this._renderOnItemChanges(f));d.actionsSections.forEach(f=>this._watchActionSectionChanges(f))};
p._itemsChanged=function(d){this.removeHandles("items");this.removeHandles("actions");this.removeHandles("action-section");d.forEach(f=>this._renderOnItemChanges(f));this._tooltipReferenceMap.clear();this._setVisibleItems(d);this.scheduleRender()};p._filterActions=function(d){return d.map(f=>f.filter(h=>h.visible))};p._countActions=function(d){return d.reduce((f,h)=>f+h.length,0)};p._getIconImageStyles=function(d){d="esri.widgets.LayerList.ListItemPanel"===d.declaredClass||"esri.support.Action.ActionButton"===
d.declaredClass||"esri.support.Action.ActionToggle"===d.declaredClass?d.image:null;return{"background-image":d?`url("${d}")`:void 0}};p._selectionKeydown=function(d){var f=T.eventKey(d);if(["ArrowDown","ArrowUp"].includes(f)){d.stopPropagation();var h=d.currentTarget,u=n(h),{_sortableMap:A,selectedItems:G}=this;if((h=A.get(h.dataset.group))&&u){var L=ba.findSelectedItem(u,G),P=h.toArray();d=P.indexOf(d.target.dataset.layerUid);if(-1!==d){if("ArrowDown"===f){const da=d+1;if(da>=P.length)return;L?(P.splice(da,
0,P.splice(d,1)[0]),h.sort(P),this._sortLayers(h),this._focusSortUid=u.layer?.uid):(this._focusSortUid=u.layer?.uid,this.scheduleRender())}"ArrowUp"===f&&(f=d-1,-1>=f||(L?(P.splice(f,0,P.splice(d,1)[0]),h.sort(P),this._sortLayers(h),this._focusSortUid=u.layer?.uid):(this._focusSortUid=u.layer?.uid,this.scheduleRender())))}}}else this._toggleSelection(d)};p._toggleActionsOpen=function(d){const f=n(d.currentTarget);if(f){var {actionsOpen:h}=f;(h=!h)&&this.operationalItems.forEach(u=>U(u));f.actionsOpen=
h;d.stopPropagation()}};p._triggerPanel=function(d){const f=d.currentTarget?.["data-panel"];d.stopPropagation();f&&!f.disabled&&(f.open=!f.open)};p._triggerAction=function(d){var f=d.currentTarget;const h=f?.["data-action"];f=n(f);h&&f&&("toggle"===h.type&&(h.value=!h.value),this.triggerAction(h,f),d.stopPropagation())};p._toggleVisibility=function(d){var f=d.currentTarget;const h=f.getAttribute("data-parent-visibility");if(f=n(f))h===Z.exclusive&&f.visible||(f.visible=!f.visible),d.stopPropagation()};
p._toggleChildrenClick=function(d){const f=n(d.currentTarget);f&&(f.open=!f.open,d.stopPropagation())};p._toggleSelection=function(d){d.stopPropagation();const {multipleSelectionEnabled:f,selectedItems:h}=this;if(d=n(d.currentTarget)){var u=ba.findSelectedItem(d,h),{length:A}=h,G=u&&1===A;f?u?h.remove?.(u):h.add(d):A&&!G?(h.removeAll(),h.add(d)):u?h.remove?.(u):h.add(d)}};D._createClass(ca,[{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(d){this._overrideIfSome("label",
d)}},{key:"listItemCreatedFunction",get:function(){return this.viewModel.listItemCreatedFunction},set:function(d){this.viewModel.listItemCreatedFunction=d}},{key:"operationalItems",get:function(){return this.viewModel.operationalItems},set:function(d){this.viewModel.operationalItems=d}},{key:"view",get:function(){return this.viewModel.view},set:function(d){this.viewModel.view=d}},{key:"test",get:function(){return{visibleItems:this.visibleItems}}}]);return ca}(M);r.__decorate([y.property()],B.prototype,
"visibleItems",void 0);r.__decorate([y.property()],B.prototype,"iconClass",void 0);r.__decorate([y.property()],B.prototype,"icon",void 0);r.__decorate([y.property()],B.prototype,"label",null);r.__decorate([y.property()],B.prototype,"listItemCanGiveFunction",void 0);r.__decorate([y.property()],B.prototype,"listItemCanReceiveFunction",void 0);r.__decorate([y.property()],B.prototype,"listItemCreatedFunction",null);r.__decorate([y.property(),E.messageBundle("esri/widgets/LayerList/t9n/LayerList")],B.prototype,
"messages",void 0);r.__decorate([y.property(),E.messageBundle("esri/t9n/common")],B.prototype,"messagesCommon",void 0);r.__decorate([y.property()],B.prototype,"multipleSelectionEnabled",void 0);r.__decorate([y.property()],B.prototype,"operationalItems",null);r.__decorate([y.property()],B.prototype,"selectionEnabled",void 0);r.__decorate([y.property()],B.prototype,"selectedItems",void 0);r.__decorate([y.property()],B.prototype,"view",null);r.__decorate([q.vmEvent("trigger-action"),y.property({type:C})],
B.prototype,"viewModel",void 0);r.__decorate([y.property()],B.prototype,"visibleElements",void 0);r.__decorate([l.cast("visibleElements")],B.prototype,"castVisibleElements",null);r.__decorate([t.accessibleHandler()],B.prototype,"_toggleActionsOpen",null);r.__decorate([t.accessibleHandler()],B.prototype,"_triggerPanel",null);r.__decorate([t.accessibleHandler()],B.prototype,"_triggerAction",null);r.__decorate([t.accessibleHandler()],B.prototype,"_toggleVisibility",null);r.__decorate([t.accessibleHandler()],
B.prototype,"_toggleChildrenClick",null);r.__decorate([t.accessibleHandler()],B.prototype,"_toggleSelection",null);return B=r.__decorate([I.subclass("esri.widgets.LayerList")],B)});