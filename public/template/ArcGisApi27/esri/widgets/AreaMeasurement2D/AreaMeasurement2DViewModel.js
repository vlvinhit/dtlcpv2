// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/projection ../../properties/defaultUnit ./AreaMeasurement2DTool ../support/InteractiveToolViewModel".split(" "),function(n,c,e,k,d,b,v,w,q,r,t,l,u){b=function(p){function h(a){a=p.call(this,a)||this;a.supportedViewType=
"2d";a.unsupportedErrorMessage="AreaMeasurement2DViewModel is only supported in 2D views.";a.geodesicDistanceThreshold=1E5;return a}n._inherits(h,p);var f=h.prototype;f.initialize=function(){this.addHandles([e.watch(()=>this.view?.spatialReference,()=>this.clear()),e.watch(()=>this.unit,a=>{null!=this.tool&&(this.tool.unit=a)},e.initial),e.watch(()=>this.geodesicDistanceThreshold,a=>{null!=this.tool&&(this.tool.geodesicDistanceThreshold=a)},e.initial)])};f.start=async function(){const a=this.view;
null!=a&&(await e.whenOnce(()=>a.ready),l.isProjectionEngineRequired(a.spatialReference)&&await r.load());this.createTool({interactive:!0})};f.clear=function(){this.removeTool()};f.constructTool=function(){return new l.AreaMeasurement2DTool({view:this.view,visible:this.visible,geodesicDistanceThreshold:this.geodesicDistanceThreshold,unit:this.unit})};f._validateUnit=function(a){const {unitOptions:g,defaultUnit:m}=this;return null!=a&&g.includes(a)?a:g.includes(m)?m:0<g.length?g[0]:m};f._validateUnits=
function(a){if(null==a)return[];a=a.filter(g=>k.measurementAreaUnits.includes(g));return 0===a.length?k.measurementAreaUnits.slice():a};n._createClass(h,[{key:"measurement",get:function(){return null!=this.tool?this.tool.measurement:null}},{key:"measurementLabel",get:function(){return null!=this.tool?this.tool.measurementLabel:null}},{key:"state",get:function(){return this.disabled||null==this.view||!l.isSupported(this.view.spatialReference)?"disabled":null!=this.tool&&this.tool.measurement?this.tool.active?
"measuring":"measured":"ready"}},{key:"unit",get:function(){return this._validateUnit(this.defaultUnit)},set:function(a){this._overrideIfSome("unit",this._validateUnit(a))}},{key:"unitOptions",get:function(){return k.measurementAreaUnits},set:function(a){this._overrideIfSome("unitOptions",this._validateUnits(a))}}]);return h}(u.InteractiveToolViewModel);c.__decorate([d.property(t.defaultUnitPropertyMetadata)],b.prototype,"defaultUnit",void 0);c.__decorate([d.property({type:Number})],b.prototype,"geodesicDistanceThreshold",
void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"measurement",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"measurementLabel",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"state",null);c.__decorate([d.property({type:String})],b.prototype,"unit",null);c.__decorate([d.property({type:[String]})],b.prototype,"unitOptions",null);return b=c.__decorate([q.subclass("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel")],b)});