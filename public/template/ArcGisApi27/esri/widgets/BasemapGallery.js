// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../assets ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../support/basemapUtils ./Widget ./BasemapGallery/BasemapGalleryViewModel ./BasemapGallery/css ./support/componentsUtils ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(r,t,f,x,y,h,d,J,K,z,A,B,C,e,D,E,F,G,g,H){d=function(u){function n(a,c){var b=u.call(this,a,c)||this;b.disabled=!1;b.headingLevel=2;b.iconClass=e.CSS.widgetIcon;b.icon=null;b.messages=null;b.viewModel=new C;b._focusBasemapItemEnabled=!1;b._container=null;b._width=0;b._onContainerCreated=k=>{b._container=k};return b}t._inherits(n,u);var l=n.prototype;l.initialize=function(){this.addHandles([H.onResize(()=>this._container,({contentRect:a})=>{this._width=a.width}),y.when(()=>this.source,()=>
this.viewModel.load(),{sync:!0,initial:!0,once:!0})])};l.loadDependencies=function(){return D.loadCalciteComponents({scrim:()=>new Promise((a,c)=>r(["../chunks/calcite-scrim"],a,c)),chip:()=>new Promise((a,c)=>r(["../chunks/calcite-chip"],a,c))})};l.render=function(){var a="loading"===this.source.state;const c=this.viewModel.items,b={[e.CSS.sourceLoading]:a,[e.CSS.disabled]:this.disabled||"disabled"===this.viewModel.state};var k=this._width;200>=k||420<=k?b[e.CSS.layoutGrid]=!0:280>k&&(b[e.CSS.narrowItems]=
!0);k=a?g.tsx("div",{class:e.CSS.loader,key:"loader"}):null;a=a?null:0<c.length?g.tsx("ul",{bind:this,"aria-disabled":this.disabled,"aria-label":this.label,class:e.CSS.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},c.map((m,p)=>this._renderBasemapGalleryItem(m,p)).toArray()):g.tsx("div",{class:e.CSS.emptyMessage,key:"empty-message"},g.tsx(E.Heading,{level:this.headingLevel},this.messages.noBasemaps));return g.tsx("div",{key:"container",class:this.classes(e.CSS.base,
b),afterCreate:this._onContainerCreated},0===this._width?null:[k,a])};l._getRoundRobinIndex=function(a,c){return(a+c)%c};l._handleKeyDown=function(a){const {key:c}=a;if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(c)){a.preventDefault();var {items:b,activeBasemapIndex:k}=this.viewModel;a="ArrowUp"===c||"ArrowLeft"===c?this._getRoundRobinIndex(Math.max(k-1,-1),b.length):this._getRoundRobinIndex(k+1,b.length);a=b.at(a);"ready"===a?.state&&(this.viewModel.activeBasemap=a.basemap);this._focusBasemapItemEnabled=
!0}};l._focusBasemapItem=function(a){this._focusBasemapItemEnabled&&0===a.tabIndex&&(a.focus(),this._focusBasemapItemEnabled=!1)};l._handleClick=function(a){a=a.currentTarget["data-item"];"ready"===a.state&&(this.viewModel.activeBasemap=a.basemap)};l._renderBasemapGalleryItem=function(a,c){const b=a.basemap.thumbnailUrl||x.getAssetUrl("esri/themes/base/images/basemap-toggle-64.svg"),k=a.basemap.title;var m=a.basemap.portalItem?.snippet;m=a.error?.message||m||k;const {viewModel:{state:p,activeBasemapIndex:v}}=
this,q=v===c;c=q||-1===v&&0===c?0:-1;const I="loading"===p,w=`basemapgallery-item-${a.uid}`;return g.tsx("li",{"aria-checked":q.toString(),"aria-disabled":(this.disabled||"disabled"===p).toString(),"aria-labelledby":w,bind:this,class:this.classes(e.CSS.item,{[e.CSS.selectedItem]:q,[e.CSS.itemError]:"error"===a.state}),"data-item":a,key:a.uid,role:"radio",tabIndex:c,title:m,afterUpdate:this._focusBasemapItem,onclick:this._handleClick,onkeydown:this._handleClick},g.tsx("img",{alt:"",class:e.CSS.itemThumbnail,
src:b}),g.tsx("div",{key:"content",class:e.CSS.itemContent},g.tsx("div",{key:"title",class:e.CSS.itemTitle},g.tsx("span",{id:w},k)),A.isBasemap3D(a.basemap)?this._render3DTags():null),"loading"===a.state||q&&I?g.tsx("calcite-scrim",null,g.tsx("span",{key:"loader","aria-hidden":"true",role:"presentation",class:e.CSS.loaderAnimation})):null)};l._render3DTags=function(){const {messages:a}=this;return g.tsx("div",{key:"tag",class:e.CSS.itemTagsContainer},g.tsx("calcite-chip",{key:"tag-3d",value:a.tag3D,
scale:"s"},this.messages.tag3D),g.tsx("calcite-chip",{key:"tag-beta",value:a.tagBeta,scale:"s",appearance:"outline-fill"},this.messages.tagBeta))};t._createClass(n,[{key:"activeBasemap",get:function(){return this.viewModel.activeBasemap},set:function(a){this.viewModel.activeBasemap=a}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(a){this._overrideIfSome("label",a)}},{key:"source",get:function(){return this.viewModel.source},set:function(a){this.viewModel.source=
a}},{key:"view",get:function(){return this.viewModel.view},set:function(a){this.viewModel.view=a}}]);return n}(B);f.__decorate([h.property()],d.prototype,"activeBasemap",null);f.__decorate([h.property()],d.prototype,"disabled",void 0);f.__decorate([h.property()],d.prototype,"headingLevel",void 0);f.__decorate([h.property()],d.prototype,"iconClass",void 0);f.__decorate([h.property()],d.prototype,"icon",void 0);f.__decorate([h.property()],d.prototype,"label",null);f.__decorate([h.property(),G.messageBundle("esri/widgets/BasemapGallery/t9n/BasemapGallery")],
d.prototype,"messages",void 0);f.__decorate([h.property()],d.prototype,"source",null);f.__decorate([h.property()],d.prototype,"view",null);f.__decorate([h.property()],d.prototype,"viewModel",void 0);f.__decorate([h.property()],d.prototype,"_focusBasemapItemEnabled",void 0);f.__decorate([h.property()],d.prototype,"_container",void 0);f.__decorate([h.property()],d.prototype,"_width",void 0);f.__decorate([F.accessibleHandler()],d.prototype,"_handleClick",null);return d=f.__decorate([z.subclass("esri.widgets.BasemapGallery")],
d)});