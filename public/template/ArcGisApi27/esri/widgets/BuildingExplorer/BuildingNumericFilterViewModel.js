// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/arrayUtils ../../core/Collection ../../core/collectionUtils ../../core/Handles ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/accessorSupport/decorators/subclass ./support/layerUtils ./support/validation".split(" "),function(n,c,b,r,p,t,u,v,d,y,z,w,x,g){b=function(q){function h(a){a=q.call(this,a)||this;a.state=
"disabled";a._handles=new u;a._valueBeforeReady=null;a._domainInfo=g.getDomainInfo([]);a._loadLayers=x.createLoadLayersFunction();a.layers=new p;return a}n._inherits(h,q);var f=h.prototype;f.initialize=function(){this._handles.add(this.layers.on("change",()=>this._onLayersChange()));this._onLayersChange()};f.destroy=function(){this._set("state","disabled");this._handles.destroy()};f.select=function(a){"ready"!==this.state?this._valueBeforeReady=a:null!=g.getValidNumber(a,this)&&(this.enabled=!0,this.value=
a)};f.clear=function(){"ready"!==this.state?this._valueBeforeReady=null:this.enabled=!1};f.next=function(){const {state:a,allowedValues:e,enabled:k,hasNext:l,_valueIndex:m}=this;"ready"!==a&&null!=this._valueBeforeReady?this._valueBeforeReady++:0!==e.length&&(k?l&&(this.value=e[m+1]):(this.enabled=!0,this.value=e[0]))};f.previous=function(){const {state:a,allowedValues:e,enabled:k,hasPrevious:l,_valueIndex:m}=this;"ready"!==a&&null!=this._valueBeforeReady?this._valueBeforeReady++:0!==e.length&&(k?
l&&(this.value=e[m-1]):(this.enabled=!0,this.value=e[e.length-1]))};f.getValueLabel=function(a){return 0===this.layers.length?null:this._domainInfo.fieldValueMap.get(a)??null};f._onLayersChange=async function(){this._set("state","loading");this._domainInfo=g.getDomainInfo([]);if(0!==this.layers.length)try{await this._loadLayers(this.layers),this._setup()}catch(a){v.isAbortError(a)||this._set("state","failed")}};n._createClass(h,[{key:"enabled",get:function(){return 0<this.allowedValues.length&&this._get("enabled")},
set:function(a){a!==this.enabled&&0<this.allowedValues.length&&this._set("enabled",a)}},{key:"value",get:function(){return("ready"===this.state?this._get("value"):this._valueBeforeReady)??0},set:function(a){"ready"!==this.state?this._valueBeforeReady=a:a!==this.value&&(a=g.getValidNumber(a,this),null!=a&&this._set("value",a))}},{key:"min",get:function(){return g.getMin(this.allowedValues)}},{key:"max",get:function(){return g.getMax(this.allowedValues)}},{key:"allowedValues",get:function(){return this._domainInfo.allowedValues}},
{key:"hasNext",get:function(){if(!this.enabled)return!0;const a=this._valueIndex;return 0<=a&&a<this.allowedValues.length-1}},{key:"hasPrevious",get:function(){return this.enabled?0<this._valueIndex:!0}},{key:"layers",set:function(a){const e=this._get("layers");this._set("layers",t.referenceSetter(a,e))}},{key:"filterExpressions",get:function(){return{solid:null,xRay:null}}},{key:"_valueIndex",get:function(){return r.binaryIndexOf(this.allowedValues,this.value)}}]);return h}(b);c.__decorate([d.property({value:!1,
nonNullable:!0})],b.prototype,"enabled",null);c.__decorate([d.property({nonNullable:!0})],b.prototype,"value",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"min",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"max",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"allowedValues",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"hasNext",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"hasPrevious",null);c.__decorate([d.property({type:p,nonNullable:!0})],
b.prototype,"layers",null);c.__decorate([d.property({nonNullable:!0})],b.prototype,"state",void 0);c.__decorate([d.property()],b.prototype,"_valueBeforeReady",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"_valueIndex",null);c.__decorate([d.property()],b.prototype,"_domainInfo",void 0);return b=c.__decorate([w.subclass("esri.widgets.BuildingExplorer.BuildingNumericFilterViewModel")],b)});