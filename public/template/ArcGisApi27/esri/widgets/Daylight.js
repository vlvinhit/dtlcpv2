// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Logger ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Daylight/css ./Daylight/DaylightViewModel ./Daylight/VisibleElements ./Daylight/support/daylightUtils ./Daylight/support/SliderWithDropdown ./support/componentsUtils ./support/DatePicker ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(t,p,f,A,m,g,e,I,J,B,C,d,v,w,D,E,F,G,H,K,x,h){const y=/(.*)\s(.*)/;e=function(n){function q(a,c){var b=n.call(this,a,c)||this;b.headingLevel=3;b.iconClass=d.CSS.widgetIcon;b.icon=null;b.viewModel=new v;b.visibleElements=new w;b.dateOrSeason="date";b._timeSlider=new E({viewModel:b.viewModel.timeSliderViewModel,steps:b.timeSliderSteps,labelInputsEnabled:!1,visibleElements:{labels:!0},tickConfigs:[{mode:"position",values:[0,360,720,1080,1439],labelsVisible:!0,tickCreatedFunction:b._onPrimaryTickCreated.bind(p._assertThisInitialized(b))},
{mode:"position",values:[120,240,480,600,840,960,1200,1320],tickCreatedFunction:b._onSecondaryTickCreated.bind(p._assertThisInitialized(b))}]});b._datePicker=new G({viewModel:b.viewModel.datePickerViewModel,commitOnMonthChange:!0});b._onPlayDayClick=()=>{b.viewModel.toggleDayPlaying()};b._onYearPlayClick=()=>{b.viewModel.toggleYearPlaying()};b._onSeasonChange=l=>{b.viewModel.currentSeason=l.target.value};b._onSunLightingCheckboxChange=()=>{b.viewModel.toggleSunLightingEnabled()};b._onShadowCheckboxChange=
()=>{b.viewModel.toggleDirectShadowsEnabled()};return b}p._inherits(q,n);var k=q.prototype;k.postInitialize=function(){this.viewModel.isSupported&&this.addHandles([m.watch(()=>this.viewModel.datePickerViewModel,a=>this._datePicker.viewModel=a,m.syncAndInitial),m.watch(()=>this.viewModel.timeSliderViewModel,a=>this._timeSlider.viewModel=a,m.syncAndInitial),m.watch(()=>this.visibleElements?.timezone,a=>this._timeSlider.showDropDown=a,m.syncAndInitial),m.watch(()=>!this.viewModel.sunLightingEnabled,
a=>{this._datePicker.disabled=a;this._timeSlider.disabled=a},m.syncAndInitial),m.when(()=>!this.visible,()=>this._datePicker?.close(!1),m.sync)])};k.destroy=function(){this._datePicker.destroy();this._timeSlider.destroy()};k.render=function(){const {messages:a,viewModel:c,visibleElements:b}=this,l=c.isSupported;return h.tsx("div",{class:this.classes(d.CSS.base,d.CSS.widget)},l?h.tsx(h.tsxFragment,null,b.header&&h.tsx(H.Heading,{level:this.headingLevel},a.title),this._renderTimeOptions(),b.datePicker&&
this._renderDateOrSeason(),b.sunLightingToggle&&this._renderSunLightingToggle(),b.shadowsToggle&&this._renderShadowsToggle()):h.tsx("div",{key:"unsupported",class:d.CSS.panelError},h.tsx("p",null,a.unsupported)))};k.loadDependencies=function(){return F.loadCalciteComponents({button:()=>new Promise((a,c)=>t(["../chunks/calcite-button"],a,c)),checkbox:()=>new Promise((a,c)=>t(["../chunks/calcite-checkbox"],a,c)),label:()=>new Promise((a,c)=>t(["../chunks/calcite-label"],a,c))})};k._renderTimeOptions=
function(){const {viewModel:a,visibleElements:c,messages:b}=this,{directShadowsEnabled:l,dayPlaying:r}=a,z=!a.sunLightingEnabled;return h.tsx("div",{class:this.classes(d.CSS.dayContainer,{[d.CSS.shadowOn]:l,[d.CSS.shadowOff]:!l,[d.CSS.sliderDateOn]:c.datePicker,[d.CSS.sliderDateOff]:!c.datePicker,[d.CSS.sliderAmPmOn]:this._useAmPm,[d.CSS.containerDisabled]:z}),key:"daylight-time-options"},this._timeSlider.render(),c.playButtons&&this._renderPlayPauseButton({playing:r,disabled:z,label:b.playDay,onClick:this._onPlayDayClick}))};
k._renderDateOptions=function(){const {viewModel:a,visibleElements:c,messages:b}=this,{yearPlaying:l}=a,r=!a.sunLightingEnabled;return h.tsx("div",{key:"daylight-date-options",class:this.classes(d.CSS.dateContainer,r&&d.CSS.containerDisabled)},this._datePicker.render(),c.playButtons&&this._renderPlayPauseButton({playing:l,disabled:r,label:b.playYear,onClick:this._onYearPlayClick}))};k._renderPlayPauseButton=function({playing:a,disabled:c,label:b,onClick:l}){return h.tsx("calcite-button",{appearance:"solid",
class:d.CSS.playPauseButton,disabled:c,iconStart:a?"pause-f":"play-f",label:b,round:!0,title:b,type:"button",onclick:l})};k._renderSeasonOptions=function(){const {messages:a,viewModel:c}=this,b=!c.sunLightingEnabled;return h.tsx("select",{class:this.classes(d.CSS.select,d.CSS.seasonPicker,b&&d.CSS.seasonPickerDisabled),disabled:b,value:c.currentSeason,"aria-label":a.season,onchange:this._onSeasonChange},D.ORDERED_SEASONS.map(l=>h.tsx("option",{value:l},a[l])))};k._renderDateOrSeason=function(){return"date"===
this.dateOrSeason?this._renderDateOptions():this._renderSeasonOptions()};k._renderSunLightingToggle=function(){const a=this.messages?.sunLightingToggle;return h.tsx("calcite-label",{key:"date-time-toggle",layout:"inline",title:a?.tooltip,scale:"s"},h.tsx("calcite-checkbox",{class:d.CSS.sunLightingCheckbox,checked:this.viewModel.sunLightingEnabled,onCalciteCheckboxChange:this._onSunLightingCheckboxChange}),a?.label)};k._renderShadowsToggle=function(){const a=this.messages.shadowsToggle;return h.tsx("calcite-label",
{key:"shadow-toggle",layout:"inline",title:a?.tooltip,scale:"s"},h.tsx("calcite-checkbox",{class:d.CSS.shadowsCheckbox,checked:this.viewModel.directShadowsEnabled,onCalciteCheckboxChange:this._onShadowCheckboxChange}),a.label)};k._onPrimaryTickCreated=function(a,c,b){c.classList.add(...u,d.CSS.primaryTick);b.classList.add(...u,d.CSS.primaryTickLabel);b.onclick=c.onclick=this._makeGoToTime(a);a=b.textContent;if(a=null!=a&&y.exec(a))b.innerHTML=`${a[1]}<br><div class=${d.CSS.primaryTickAmPm}>${a[2]}</div>`};
k._onSecondaryTickCreated=function(a,c){c.classList.add(...u,d.CSS.secondaryTick);c.onclick=this._makeGoToTime(a)};k._makeGoToTime=function(a){return()=>{this.viewModel.timeSliderPosition=a}};p._createClass(q,[{key:"label",get:function(){return this.messages?.title??""},set:function(a){this._overrideIfSome("label",a)}},{key:"playSpeedMultiplier",get:function(){return this.viewModel.playSpeedMultiplier},set:function(a){this.viewModel.playSpeedMultiplier=a}},{key:"timeSliderSteps",get:function(){return this._timeSlider?.steps??
5},set:function(a){this._timeSlider.steps=a}},{key:"view",get:function(){return this.viewModel.view},set:function(a){this.viewModel.view=a}},{key:"test",get:function(){return{datePicker:this._datePicker}}},{key:"_useAmPm",get:function(){const a=this._timeSlider.viewModel.getLabelForValue(0,"tick");return null!=a&&y.test(a)}}]);return q}(C);f.__decorate([g.property(),x.messageBundle("esri/widgets/Daylight/t9n/Daylight")],e.prototype,"messages",void 0);f.__decorate([g.property(),x.messageBundle("esri/widgets/support/t9n/timezone")],
e.prototype,"timezoneMessages",void 0);f.__decorate([g.property()],e.prototype,"headingLevel",void 0);f.__decorate([g.property()],e.prototype,"iconClass",void 0);f.__decorate([g.property()],e.prototype,"icon",void 0);f.__decorate([g.property()],e.prototype,"label",null);f.__decorate([g.property()],e.prototype,"playSpeedMultiplier",null);f.__decorate([g.property()],e.prototype,"timeSliderSteps",null);f.__decorate([g.property()],e.prototype,"view",null);f.__decorate([g.property({type:v})],e.prototype,
"viewModel",void 0);f.__decorate([g.property({type:w,nonNullable:!0})],e.prototype,"visibleElements",void 0);f.__decorate([g.property({cast:n=>{if("season"===n||"date"===n)return n;A.getLogger("esri.widgets.Daylight").warn(`"${n}" is not a valid option. Acceptable values are only "date" or "season". Defaulting to "${"date"}".`);return"date"}})],e.prototype,"dateOrSeason",void 0);f.__decorate([g.property()],e.prototype,"_timeSlider",void 0);f.__decorate([g.property()],e.prototype,"_useAmPm",null);
f.__decorate([g.property()],e.prototype,"_datePicker",void 0);e=f.__decorate([B.subclass("esri.widgets.Daylight")],e);const u=["esri-interactive","esri-widget__anchor"];return e});