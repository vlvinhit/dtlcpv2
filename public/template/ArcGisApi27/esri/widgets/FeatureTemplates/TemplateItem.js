// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../symbols/support/symbolUtils".split(" "),function(k,p,f,t,e,q,g,y,z,A,u,v){async function w(b,c){var {renderer:d}=b;return d&&(c=new t({attributes:c.prototype.attributes}),d=await d.getSymbolAsync(c))?
d:x(b)}async function x(b){({geometryType:b}=b);return(b="point"===b||"multipoint"===b?await new Promise((c,d)=>k(["../../symbols/SimpleMarkerSymbol"],a=>c(l(a)),d)):"polyline"===b?await new Promise((c,d)=>k(["../../symbols/SimpleLineSymbol"],a=>c(l(a)),d)):"polygon"===b||"mesh"===b||"multipatch"===b?await new Promise((c,d)=>k(["../../symbols/SimpleFillSymbol"],a=>c(l(a)),d)):null)?new b.default:null}const l=b=>Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}));
var m;e=m=function(b){function c(a){a=b.call(this,a)||this;a._activeFetchInfo={id:null,request:null};a.layer=null;a.template=null;a.thumbnail=null;return a}p._inherits(c,b);var d=c.prototype;d.initialize=function(){this.addHandles(q.watch(()=>{const {layer:a}=this;return[a&&"renderer"in a?a.renderer:null,this.template]},()=>{this._activeFetchInfo.id=null;this._activeFetchInfo.request=null;this._set("thumbnail",null)},q.initial))};d.clone=function(){const a=null!=this.thumbnail?this.thumbnail.cloneNode(!0):
null,h=new m({layer:this.layer,template:this.template});h._set("thumbnail",a);return h};c.fetchThumbnail=async function(a,h){const r=await w(a,h);if(null==r)return null;const n={maxSize:36};"dictionary"===a.renderer?.type&&(n.fieldMap=a.renderer.fieldMap??void 0,n.feature={attributes:h.prototype.attributes??{}});return await v.renderPreviewHTML(r,n)};p._createClass(c,[{key:"description",get:function(){return this.template?.description},set:function(a){this.template&&(this.template.description=a)}},
{key:"label",get:function(){return this.template?.name},set:function(a){this.template&&(this.template.name=a)}},{key:"id",get:function(){return`${this.label??""}\u2013${this.layer?.id}`}},{key:"supportsUpload",get:function(){return"scene"===this.layer.type}}]);return c}(e);f.__decorate([g.property()],e.prototype,"description",null);f.__decorate([g.property()],e.prototype,"label",null);f.__decorate([g.property()],e.prototype,"layer",void 0);f.__decorate([g.property()],e.prototype,"template",void 0);
f.__decorate([g.property({readOnly:!0})],e.prototype,"thumbnail",void 0);f.__decorate([g.property()],e.prototype,"id",null);f.__decorate([g.property()],e.prototype,"supportsUpload",null);return e=m=f.__decorate([u.subclass("esri.widgets.FeatureTemplates.TemplateItem")],e)});