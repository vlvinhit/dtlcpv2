// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/HandleOwner ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./FeatureForm/featureFormUtils ./FeatureTemplates/FeatureTemplatesViewModel ./FeatureTemplates/ItemList ./FeatureTemplates/TemplateItem ./support/componentsUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory".split(" "),
function(u,w,d,c,x,e,B,L,M,C,D,y,z,E,F,G,N,H,I,p){function J(q){return q.id}const A={filter:!0};c=function(q){function r(b,f){var a=q.call(this,b,f)||this;a.enableListScroll=!0;a.filterText="";a.headingLevel=4;a.messages=null;a.viewModel=new z;a.visibleElements={...A};a.renderCustomItem=g=>null;a.renderCustomGroupContent=g=>null;a.renderItemLabel=()=>null;a.renderItemDescription=()=>null;a.renderItemContent=g=>null;a.renderItemContentEnd=g=>null;a._iconIntersectionObserver=new IntersectionObserver((g,
n)=>{g.forEach(async k=>{if(k.isIntersecting){const h=k.target;if(h?.["data-has-icon"])n.unobserve(h);else{var {layer:v,template:t}=h?.["data-item"];h&&(h["data-has-icon"]=!0);k=await F.fetchThumbnail(v,t).catch(()=>{h&&(h["data-has-icon"]=!1);return null});null!=k&&h.appendChild(k)}}})});a.renderItemIcon=g=>p.tsx("span",{key:"icon",afterCreate:a._afterItemCreateOrUpdate,afterUpdate:a._afterItemCreateOrUpdate,afterRemoved:a._afterItemRemoved,"data-item":g,"data-has-icon":!1});a._afterItemCreateOrUpdate=
g=>{a._iconIntersectionObserver?.observe(g)};a._afterItemRemoved=g=>{a._iconIntersectionObserver?.unobserve(g)};return a}w._inherits(r,q);var l=r.prototype;l.initialize=function(){const b=({label:f})=>!this.filterText||!!f?.toLowerCase().includes(this.filterText.toLowerCase());this.addHandles(x.watch(()=>this.viewModel,(f,a)=>{f&&!f.filterFunction&&(this.filterFunction=b);a&&a!==f&&a.filterFunction===b&&(a.filterFunction=null)},x.initial))};l.destroy=function(){this._iconIntersectionObserver?.disconnect();
this._iconIntersectionObserver=null};l.loadDependencies=function(){return G.loadCalciteComponents({input:()=>new Promise((b,f)=>u(["../chunks/calcite-input"],b,f)),"list-item":()=>new Promise((b,f)=>u(["../chunks/calcite-list-item"],b,f)),notice:()=>new Promise((b,f)=>u(["../chunks/calcite-notice"],b,f))})};l.castVisibleElements=function(b){return{...A,...b}};l.select=function(b,f){return this.viewModel.select(b,f)};l.render=function(){const {enableListScroll:b,filterText:f,headingLevel:a,messages:g,
viewModel:{items:n,numberOfFeatureTemplates:k,selectedItem:v,state:t}}=this,h=this.visibleElements.filter&&1<k;if(0<n.length&&y.isTemplateItemGroup(n[0])){const m=n.find(K=>K.label===z.nullGroupBy.label);m&&(m.label=g.other)}return p.tsx("div",{class:this.classes("esri-feature-templates","esri-widget"),"aria-label":g.widgetLabel},"loading"===t?this.renderLoader():"ready"===t?p.tsx(E.ItemList,{enableListScroll:b,filterEnabled:h,filterText:f,headingLevel:a,id:this.id,identify:J,items:n,messages:{filterPlaceholder:g.filterPlaceholder,
noItems:g.noItems,noMatches:g.noMatches},renderIcon:this.renderItemIcon,renderCustomItem:this.renderCustomItem,renderCustomGroupContent:this.renderCustomGroupContent,renderItemContent:this.renderItemContent,renderItemContentEnd:this.renderItemContentEnd,renderItemDescription:this.renderItemDescription,renderItemLabel:this.renderItemLabel,selectedItem:v??void 0,selectionMode:"single",onItemSelect:m=>!y.isTemplateItemGroup(m)&&this.viewModel.select(m),onFilterChange:m=>{this.filterText=m;this.viewModel.refresh()}}):
null)};l.renderLoader=function(){return p.tsx("div",{class:"esri-feature-templates__loader",key:"loader"})};w._createClass(r,[{key:"filterFunction",get:function(){return this.viewModel.filterFunction},set:function(b){this.viewModel.filterFunction=b}},{key:"groupBy",get:function(){return this.viewModel.groupBy},set:function(b){this.viewModel.groupBy=b}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(b){this._overrideIfSome("label",b)}},{key:"layers",get:function(){return this.viewModel.layers},
set:function(b){this.viewModel.layers=b}},{key:"selectedItem",get:function(){return this.viewModel.selectedItem}}]);return r}(c.HandleOwnerMixin(D));d.__decorate([e.property()],c.prototype,"enableListScroll",void 0);d.__decorate([e.property()],c.prototype,"filterFunction",null);d.__decorate([e.property()],c.prototype,"filterText",void 0);d.__decorate([e.property()],c.prototype,"groupBy",null);d.__decorate([e.property()],c.prototype,"headingLevel",void 0);d.__decorate([e.property()],c.prototype,"label",
null);d.__decorate([e.property()],c.prototype,"layers",null);d.__decorate([e.property(),H.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],c.prototype,"messages",void 0);d.__decorate([e.property({readOnly:!0})],c.prototype,"selectedItem",null);d.__decorate([e.property(),I.vmEvent("select")],c.prototype,"viewModel",void 0);d.__decorate([e.property()],c.prototype,"visibleElements",void 0);d.__decorate([B.cast("visibleElements")],c.prototype,"castVisibleElements",null);d.__decorate([e.property()],
c.prototype,"renderCustomItem",void 0);d.__decorate([e.property()],c.prototype,"renderCustomGroupContent",void 0);d.__decorate([e.property()],c.prototype,"renderItemLabel",void 0);d.__decorate([e.property()],c.prototype,"renderItemDescription",void 0);d.__decorate([e.property()],c.prototype,"renderItemContent",void 0);d.__decorate([e.property()],c.prototype,"renderItemContentEnd",void 0);return c=d.__decorate([C.subclass("esri.widgets.FeatureTemplates")],c)});