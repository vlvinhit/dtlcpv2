// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Slider/SliderViewModel ./support/utils".split(" "),function(t,g,h,f,y,z,w,x,u){f=function(v){function r(a){var b=v.call(this,a)||this;b._initialStopValues=[];b._max=null;b._min=null;b.hasTimeData=!1;b.inputFormatFunction=(d,c)=>"max"===c?b.getUnzoomedMax().toString():
"min"===c?b.getUnzoomedMin().toString():d.toString();b.inputParseFunction=null;b.labelFormatFunction=d=>{if(b.hasTimeData)return u.formatDateLabel(d);const {max:c,min:e,precision:k}=t._assertThisInitialized(b);return u.formatNumberLabel(parseFloat(d.toFixed(10<c-e?2:k)))};b.thumbsConstrained=!1;b.zoomingEnabled=!0;return b}t._inherits(r,v);var l=r.prototype;l.getStopIndexFromValueIndex=function(a){const {stops:b}=this,d=this.values[a];return 0===a?d<=this.values[1]?0:b.length-1:1===a?this.values[0]>=
d?0:b.length-1:null};l.getStopChanges=function(a,b){const d=this.stops;a=this.getStopIndexFromValueIndex(a);const c=this.getValuesFromStops();c[a]=b;const [e,k]=[c[0],c[c.length-1]].sort((p,m)=>p>m?1:-1),q=k-e,n=d.length-1;return c.map((p,m)=>({index:m,value:this.toPrecision(e+m*q/n)}))};l.setValue=function(a,b){const {max:d,min:c,values:e}=this,k=e[a];isNaN(b)||k===b||b>d||b<c||(e[a]=this.toPrecision(b),this._set("values",[...e]),a=e.slice().sort((q,n)=>q>n?1:-1),a=u.getStopChanges(a[0],a[a.length-
1],this._initialStopValues??[]),this.updateStops(a),this.updateBreaks(),this.notifyChange("labels"))};l.getValuesFromStops=function(a){return(a||this.stops)?.map(b=>b.hasOwnProperty("ratio")?b.ratio:b.value)};l.updateBreaks=function(){const {breaks:a,values:b}=this;a?.length&&b.slice().sort((d,c)=>d>c?1:-1).forEach((d,c)=>{a[c].max=d;null!=a[c+1]&&(a[c+1].min=d)})};l.updateBreakMax=function(a){const {breaks:b,max:d,min:c}=this;!isNaN(a)&&d!==a&&null!=c&&a>c&&b?.length&&(b[b.length-1].max=a)};l.updateBreakMin=
function(a){const {breaks:b,max:d,min:c}=this;!isNaN(a)&&c!==a&&null!=d&&a<d&&b?.length&&(b[0].min=a)};l.updateStops=function(a){const {stops:b}=this,d=this.getValuesFromStops();if(d?.length){for(const c of a)d[c.index]=c.value;b.forEach((c,e)=>{c.hasOwnProperty("ratio")?c.ratio=d[e]:c.value=d[e]})}};l.getUnzoomedMax=function(){return this.zoomOptions&&null!=this._max?this._max:this.max};l.getUnzoomedMin=function(){return this.zoomOptions&&null!=this._min?this._min:this.min};l._storeZoomMax=function(a,
b){this._max=b;this.setMax(a)};l._storeZoomMin=function(a,b){this._min=b;this.setMin(a)};t._createClass(r,[{key:"breaks",set:function(a){this._set("breaks",a);this.notifyChange("max");this.notifyChange("min")}},{key:"stops",set:function(a){if(a?.length){const {max:b,min:d}=this,c=this.getValuesFromStops(a),e={};null!=d&&c.some(k=>k<d)&&(e.min=Math.min(...c));null!=b&&c.some(k=>k>b)&&(e.max=Math.max(...c));this.set({...e});this._initialStopValues=c}else this._initialStopValues=null;this._set("stops",
a||null);this.notifyChange("values")}},{key:"labels",get:function(){var {values:a}=this;a=a&&a.length?a.map((c,e)=>this.getLabelForValue(c,"value",e)):[];const b=this.getUnzoomedMax(),d=this.getUnzoomedMin();return{max:this.getLabelForValue(b,"max"),min:this.getLabelForValue(d,"min"),values:a}}},{key:"max",get:function(){const {breaks:a}=this;return a?.length?a[a.length-1].max:this.max},set:function(a){var {zoomOptions:b}=this;if(b&&null!=b.max){const d=this.values;let c=b.max;a<c&&(c=a,b.max=a);
if(d&&d.length)for(b=0;b<d.length;b++)a<d[b]&&this.setValue(b,a);this._storeZoomMax(c,a)}else this.updateBreakMax(a),this.setMax(a);this.notifyChange("labels")}},{key:"min",get:function(){const {breaks:a}=this;return a?.length?a[0].min:this.min},set:function(a){var {zoomOptions:b}=this;if(b&&null!=b.min){const d=this.values;let c=b.min;a>c&&(c=a,b.min=a);if(d&&d.length)for(b=0;b<d.length;b++)a>d[b]&&this.setValue(b,a);this._storeZoomMin(c,a)}else this.updateBreakMin(a),this.setMin(a);this.notifyChange("labels")}},
{key:"state",get:function(){const {max:a,min:b,values:d}=this;return null!=a&&null!=b&&0<d.length?"ready":"disabled"}},{key:"values",get:function(){const {breaks:a,stops:b}=this;if(!a&&!b)return[];if(a?.length){var d=a.map(c=>c.max);d.pop();return d}if(2>b?.length)return[];d=this.getValuesFromStops();return[d[0],d[d.length-1]]}},{key:"zoomOptions",set:function(a){const {zoomingEnabled:b,zoomOptions:d}=this;if(b){if(d){var c=null!=this._max?this._max:this.max;const e=null!=this._min?this._min:this.min;
if(a){const {max:k,min:q}=a,n=null!=k,p=null!=q,m=n?a.max:c;c=n?c:null;this._storeZoomMin(p?a.min:e,p?e:null);this._storeZoomMax(m,c)}else this.setMax(c),this.setMin(e),this._max=this._min=null}else if(a){const {max:e,min:k}=a;null!=k&&this._storeZoomMin(a.min,this.min);null!=e&&this._storeZoomMax(a.max,this.max)}this._set("zoomOptions",a);this.notifyChange("max");this.notifyChange("min")}}}]);return r}(x);g.__decorate([h.property()],f.prototype,"breaks",null);g.__decorate([h.property()],f.prototype,
"stops",null);g.__decorate([h.property()],f.prototype,"hasTimeData",void 0);g.__decorate([h.property()],f.prototype,"inputFormatFunction",void 0);g.__decorate([h.property()],f.prototype,"inputParseFunction",void 0);g.__decorate([h.property()],f.prototype,"labelFormatFunction",void 0);g.__decorate([h.property({readOnly:!0})],f.prototype,"labels",null);g.__decorate([h.property()],f.prototype,"max",null);g.__decorate([h.property()],f.prototype,"min",null);g.__decorate([h.property({readOnly:!0})],f.prototype,
"state",null);g.__decorate([h.property()],f.prototype,"thumbsConstrained",void 0);g.__decorate([h.property({readOnly:!0})],f.prototype,"values",null);g.__decorate([h.property()],f.prototype,"zoomingEnabled",void 0);g.__decorate([h.property()],f.prototype,"zoomOptions",null);return f=g.__decorate([w.subclass("esri.widgets.smartMapping.SmartMappingSliderViewModel")],f)});