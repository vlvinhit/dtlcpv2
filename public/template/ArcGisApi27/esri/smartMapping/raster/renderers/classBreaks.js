// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Error","../../../intl/number","../../../renderers/support/rasterRendererHelper","../support/utils"],function(f,d,g,h,m){async function n(a){a=await m.processRasterRendererParameters(a);const e=a.layer,{rasterInfo:b}=e;if(1<b.bandCount)throw new d("raster-class-breaks-renderer:not-supported","Multiband raster is not supported");const {attributeTable:c}=b;a.field||(a.field=h.getField(c,"value")?.name??"value");if(!(null!=c&&c.fields.find(p=>p.name.toLowerCase()===a.field?.toLowerCase())||
null!=b.histograms)&&(await e.updateRasterInfoWithEstimatedStats({rasterFunction:a.rasterFunction,signal:a.signal}),null==b.histograms))throw new d("raster-class-breaks-renderer:not-supported","Histograms or raster attribute table is required on the source raster. Unable to estimate histograms");const {colors:k,numClasses:l}=a;if(k&&l&&k.length!==l)throw new d("raster-class-breaks-renderer:not-supported","The size of the `colors` parameter does not match 'numClasses'");a.classificationMethod||(a.classificationMethod=
"natural-breaks");return a}f.createRenderer=async function(a){a=await n(a);a=h.createClassBreaksRenderer(a.layer.rasterInfo,a);if(null==a)throw new d("raster-class-breaks-renderer:not-supported","Class breaks renderer is not supported on this data");const e={minValue:a.minValue,maxValue:a.classBreakInfos[a.classBreakInfos.length-1].maxValue,normalizationTotal:null,classBreakInfos:a.classBreakInfos.map(b=>{var c=b.maxValue;c=g.formatNumber(b.minValue,{maximumFractionDigits:3})+" - "+g.formatNumber(c,
{maximumFractionDigits:3});b.label=c;return{minValue:b.minValue,maxValue:b.maxValue,label:c}})};return{renderer:a,classBreaksResult:e}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});