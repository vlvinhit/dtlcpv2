// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["../../core/Error","./summaryStatistics","./support/ageUtils","../support/adapters/support/layerUtils"],function(g,l,c,d){async function m(a){if(!(a&&a.layer&&a.startTime&&a.endTime&&a.unit))throw new g("summary-statistics-for-age:missing-parameters","'layer', 'startTime', 'endTime' and 'unit' parameters are required");const {layer:e,...h}=a;var b=d.createLayerAdapter(e,d.featureCapableLayerTypes);if(!b)throw new g("summary-statistics-for-age:invalid-parameters","'layer' must be one of these types: "+
d.getLayerTypeLabels(d.featureCapableLayerTypes).join(", "));a={layerAdapter:b,...h};const f=a.view,k=null!=a.signal?{signal:a.signal}:null;await Promise.all([f&&f.when(),b.load(k)]);if(b=c.verifyDates(b,a.startTime,a.endTime,"summary-statistics-for-age:invalid-parameters"))throw b;if(!a.unit||!c.supportedAgeUnits.includes(a.unit))throw new g("summary-statistics-for-age:invalid-parameters",`Supported units are: ${c.supportedAgeUnits.join(", ")}`);return a}return async function(a){const {layerAdapter:e,
...h}=await m(a),{view:b,startTime:f,endTime:k,unit:n,minValue:p,maxValue:q,signal:r}=h,{valueExpression:t,statisticsQuery:u}=c.getAgeExpressions({layer:e,startTime:f,endTime:k,unit:n});return l({layer:e,valueExpression:t,...u,minValue:p,maxValue:q,view:b,signal:r})}});