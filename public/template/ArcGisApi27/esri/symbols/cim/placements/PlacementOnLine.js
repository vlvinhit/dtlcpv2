// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../enums"],function(v,q,x,y,n){let w=function(){function d(){}d.local=function(){null===d.instance&&(d.instance=new d);return d.instance};d.prototype.execute=function(l,p,a,b,c){return new z(l,p,a)};return q._createClass(d)}();w.instance=null;let z=function(d){function l(a,b,c){a=d.call(this,a)||this;a._curveHelper=new y.CurveHelper;a._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;a._offset=void 0!==
b.offset?b.offset*c:0;a._relativeTo=b.relativeTo;a._position=void 0!==b.startPointOffset?b.startPointOffset*c:0;a._epsilon=.001*c;return a}q._inherits(l,d);var p=l.prototype;p.processPath=function(a){var b=this._position;if(this._relativeTo===n.PlacementOnLineRelativeTo.SegmentMidpoint){this.iteratePath||(this.iteratePath=!0);if(a.nextPoint()){let [c,g]=[a.x,a.y],[f,e]=[0,0];for(;a.nextPoint();){f=a.x;e=a.y;b=this._curveHelper.getLength(c,g,f,e);if(b<this._epsilon){c=f;g=e;continue}a=.5+this._position/
b;const [k,h]=this._curveHelper.getAngleCS(c,g,f,e,a);a=this._curveHelper.getCoord2D(c,g,f,e,a);this.internalPlacement.setTranslate(a[0]-this._offset*h,a[1]+this._offset*k);this._angleToLine&&this.internalPlacement.setRotateCS(k,h);return this.internalPlacement}}this.iteratePath=!1;return null}return this.onLine(a,b,this._relativeTo===n.PlacementOnLineRelativeTo.LineEnd)};p.onLine=function(a,b,c){let g=!1;switch(this._relativeTo){default:a.seekPathStart();b=a.pathLength()/2+b;break;case n.PlacementOnLineRelativeTo.LineBeginning:break;
case n.PlacementOnLineRelativeTo.LineEnd:g=!0}c?a.seekPathEnd():a.seekPathStart();let f=0;if(c?a.prevPoint():a.nextPoint()){let [e,k]=[a.x,a.y],[h,m]=[0,0];for(;c?a.prevPoint():a.nextPoint();){h=a.x;m=a.y;const r=this._curveHelper.getLength(e,k,h,m);if(f+r>b){a=(b-f)/r;const [t,u]=this._curveHelper.getAngleCS(e,k,h,m,a);a=this._curveHelper.getCoord2D(e,k,h,m,a);c=g?-this._offset:this._offset;this.internalPlacement.setTranslate(a[0]-c*u,a[1]+c*t);this._angleToLine&&(g?this.internalPlacement.setRotateCS(-t,
-u):this.internalPlacement.setRotateCS(t,u));return this.internalPlacement}e=h;k=m;f+=r}}return null};return q._createClass(l)}(x.PathTransformationCursor);v.PlacementOnLine=w;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})});