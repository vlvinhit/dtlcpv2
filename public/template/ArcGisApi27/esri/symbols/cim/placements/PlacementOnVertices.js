// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(v,t,z,A){function p(c,d){const e=Math.PI;for(;Math.abs(d-c)>e+2E-15;)d=d-c>e?d-2*e:d+2*e;return(c+d)/2}let w=function(){function c(){}c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.execute=function(d,e,a,b,f){return new B(d,e,a)};return t._createClass(c)}();w.instance=null;let B=function(c){function d(a,b,f){a=c.call(this,a)||this;a._curveHelper=new A.CurveHelper;
a._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;a._offset=void 0!==b.offset?b.offset*f:0;a._endPoints=void 0!==b.placeOnEndPoints?b.placeOnEndPoints:!0;a._controlPoints=void 0!==b.placeOnControlPoints?b.placeOnControlPoints:!0;a._regularVertices=void 0!==b.placeOnRegularVertices?b.placeOnRegularVertices:!0;a._tags=[];a._tagIterator=0;return a}t._inherits(d,c);var e=d.prototype;e.processPath=function(a){this.iteratePath||(this._preparePath(a),this.iteratePath=!0);if(this._tagIterator>=this._tags.length)return this._tagIterator=
this._tags.length=0,this.iteratePath=!1,null;a=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(a[2]);let b=a[0],f=a[1];if(0!==this._offset){const q=Math.cos(a[2]);b-=this._offset*Math.sin(a[2]);f+=this._offset*q}this.internalPlacement.setTranslate(b,f);this._tagIterator++;return this.internalPlacement};e._preparePath=function(a){this._tagIterator=this._tags.length=0;a.seekPathStart();const b=a.isClosed();let f=0,q=!1,n=0,g=0;a.seekPathStart();if(a.nextPoint()){let h=
a.x,k=a.y,r=a.getControlPoint(),x=!0,y=a.nextPoint();for(;y;){const l=a.x,m=a.y,u=a.getControlPoint();if(this._angleToLine||0!==this._offset)n=this._curveHelper.getAngle(h,k,l,m,0);x?(x=!1,b?(f=n,q=r):(this._endPoints||this._controlPoints&&r)&&this._tags.push([h,k,n])):r?this._controlPoints&&this._tags.push([h,k,p(g,n)]):this._regularVertices&&this._tags.push([h,k,p(g,n)]);if(this._angleToLine||0!==this._offset)g=this._curveHelper.getAngle(h,k,l,m,1);(y=a.nextPoint())||(b?u||q?this._controlPoints&&
this._tags.push([l,m,p(g,f)]):this._regularVertices&&this._tags.push([l,m,p(g,f)]):(this._endPoints||this._controlPoints&&u)&&this._tags.push([l,m,g]));h=l;k=m;r=u}}this._tagIterator=0};return t._createClass(d)}(z.PathTransformationCursor);v.PlacementOnVertices=w;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})});