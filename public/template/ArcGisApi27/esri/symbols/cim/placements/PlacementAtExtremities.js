// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../enums"],function(r,m,w,x,n){let t=function(){function c(){}c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.execute=function(e,h,a,b,d){return new y(e,h,a)};return m._createClass(c)}();t.instance=null;let y=function(c){function e(a,b,d){a=c.call(this,a,!1,!0)||this;a._curveHelper=new x.CurveHelper;a._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;a._offset=
void 0!==b.offset?b.offset*d:0;a._type=b.extremityPlacement;a._position=void 0!==b.offsetAlongLine?b.offsetAlongLine*d:0;a._beginProcessed=!1;return a}m._inherits(e,c);var h=e.prototype;h.processPath=function(a){let b;switch(this._type){default:this._beginProcessed?(b=this._atExtremities(a,this._position,!1),this.iteratePath=this._beginProcessed=!1):(b=this._atExtremities(a,this._position,!0),this.iteratePath=this._beginProcessed=!0);break;case n.ExtremityPlacement.JustBegin:b=this._atExtremities(a,
this._position,!0);break;case n.ExtremityPlacement.JustEnd:b=this._atExtremities(a,this._position,!1);case n.ExtremityPlacement.None:}return b};h._atExtremities=function(a,b,d){d||a.seekPathEnd();if(d?a.nextPoint():a.prevPoint()){let p=0,[k,l]=[0,0],[f,g]=[a.x,a.y];for(;d?a.nextPoint():a.prevPoint();){k=f;l=g;f=a.x;g=a.y;const q=this._curveHelper.getLength(k,l,f,g);if(p+q>b){a=(b-p)/q;const [u,v]=this._curveHelper.getAngleCS(k,l,f,g,a);a=this._curveHelper.getCoord2D(k,l,f,g,a);this.internalPlacement.setTranslate(a[0]-
this._offset*v,a[1]+this._offset*u);this._angleToLine&&this.internalPlacement.setRotateCS(-u,-v);return this.internalPlacement}p+=q}}return null};return m._createClass(e)}(w.PathTransformationCursor);r.PlacementAtExtremities=t;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});