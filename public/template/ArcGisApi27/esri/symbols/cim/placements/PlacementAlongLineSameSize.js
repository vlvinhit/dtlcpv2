// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../enums","../GeometryWalker"],function(l,h,n,e,k){let m=function(){function c(){}c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.execute=function(f,g,a,b,d){return new p(f,g,a)};return h._createClass(c)}();m.instance=null;let p=function(c){function f(a,b,d){a=c.call(this,a)||this;a._geometryWalker=new k.GeometryWalker;a._geometryWalker.updateTolerance(d);a._angleToLine=b.angleToLine??
!0;a._offset=(b.offset?b.offset:0)*d;a._originalEndings=b.endings;a._offsetAtEnd=(b.customEndingOffset?b.customEndingOffset:0)*d;a._position=-(b.offsetAlongLine?b.offsetAlongLine:0)*d;a._pattern=new k.DashPattern;a._pattern.init(b.placementTemplate,!1);a._pattern.scale(d);a._endings=a._originalEndings;return a}h._inherits(f,c);var g=f.prototype;g.processPath=function(a){if(this._pattern.isEmpty())return null;if(this.iteratePath)var b=this._pattern.nextValue();else{this._endings=this._originalEndings===
e.PlacementEndings.WithFullGap&&this.isClosed?e.PlacementEndings.WithMarkers:this._originalEndings;this._pattern.extPtGap=0;let d=!0;switch(this._endings){case e.PlacementEndings.NoConstraint:b=-this._position;b=this._adjustPosition(b);d=!1;break;default:b=-this._pattern.lastValue()/2;break;case e.PlacementEndings.WithFullGap:b=-this._pattern.lastValue();this._pattern.extPtGap=this._pattern.lastValue();break;case e.PlacementEndings.WithMarkers:b=0;break;case e.PlacementEndings.Custom:b=-this._position,
b=this._adjustPosition(b),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(a,this._pattern,d))return null;this._pattern.reset();for(a=0;b>a;)b-=a,a=this._pattern.nextValue();b=a-b;this.iteratePath=!0}a=new k.Pos;if(!this._geometryWalker.nextPointAndAngle(b,a)||this._endings===e.PlacementEndings.WithFullGap&&this._geometryWalker.isPathEnd())return this.iteratePath=!1,null;if(this._endings===e.PlacementEndings.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=
!1,this.isClosed))return null;this.internalPlacement.setTranslate(a.pt[0]-this._offset*a.sa,a.pt[1]+this._offset*a.ca);this._angleToLine&&this.internalPlacement.setRotateCS(a.ca,a.sa);return this.internalPlacement};g._adjustPosition=function(a){a/=this._pattern.length();a-=Math.floor(a);return a*this._pattern.length()};return h._createClass(f)}(n.PathTransformationCursor);l.PlacementAlongLineSameSize=m;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});