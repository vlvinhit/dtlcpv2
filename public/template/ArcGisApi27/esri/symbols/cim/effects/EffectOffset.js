// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../geometry/GeometryCursor ../../../geometry/geometryCursorCollectUtils ../../../geometry/support/jsonUtils ../CIMEffects ../CurveHelper ../enums ../../../geometry/SpatialReference".split(" "),function(l,m,e,f,p,q,r,n,t,u){e=function(){function c(){}c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.execute=function(b,a,d,g,h,k){return new v(b,a,d,g,h,k)};return m._createClass(c)}();
e.instance=null;let v=function(){function c(b,a,d,g,h,k){this._inputGeometries=b;this._tileKey=g;this._geometryEngine=h;this._curveHelper=new n.CurveHelper;this._offset=(a.offset??1)*d;this._method=a.method;this._maxInflateSize=k*d;this._option=a.option;this._offsetFlattenError=n.PIXEL_TOLERANCE*d}c.prototype.next=function(){for(var b;b=this._inputGeometries.next();){if(0===this._offset)return b.clone();if("esriGeometryEnvelope"===b.geometryType){if(this._method===t.GeometricEffectOffsetMethod.Rounded&&
0<this._offset){var a=p.collectPath(b);if(a=this._curveHelper.offset(a,-this._offset,this._method,4,this._offsetFlattenError))return b=f.GeometryCursor.createEmptyOptimizedCIM(b.geometryType),b.pushPath(a),b;break}a=b.asJSON();if(q.isExtent(a)&&0<Math.min(a.xmax-a.xmin,a.ymax-a.ymin)+2*this._offset)return f.GeometryCursor.fromJSONCIM({xmin:a.xmin-this._offset,xmax:a.xmax+this._offset,ymin:a.ymin-this._offset,ymax:a.ymax+this._offset})}a=this._geometryEngine;if(null!=a&&(b=this._tileKey?r.clipCursorToTileExtent(b,
this._maxInflateSize):b.clone()))return(b=a.offset(u.WebMercator,b.asJSON(),-this._offset,1,this._method,4,this._offsetFlattenError))?f.GeometryCursor.fromJSONCIM(b):null}return null};return m._createClass(c)}();l.EffectOffset=e;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});