// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../geometry/GeometryCursor","./enums"],function(u,z,A,v){let B=function(){function x(b,a){}var n=x.prototype;n.isEmpty=function(b){if(!b.nextPoint())return!0;let a,h,f,c;a=b.x;for(h=b.y;b.nextPoint();a=h,h=c)if(f=b.x,c=b.y,f!==a||c!==h)return b.seekPathStart(),!1;b.seekPathStart();return!0};n.normalize=function(b){const a=Math.sqrt(b[0]*b[0]+b[1]*b[1]);0!==a&&(b[0]/=a,b[1]/=a)};n.getLength=function(b,a,h,f){b=h-b;a=f-a;return Math.sqrt(b*
b+a*a)};n.getSegLength=function(b){const [[a,h],[f,c]]=b;return this.getLength(a,h,f,c)};n.getCoord2D=function(b,a,h,f,c){return[b+(h-b)*c,a+(f-a)*c]};n.getSegCoord2D=function(b,a){const [[h,f],[c,l]]=b;return this.getCoord2D(h,f,c,l,a)};n.getAngle=function(b,a,h,f,c){return Math.atan2(f-a,h-b)};n.getAngleCS=function(b,a,h,f,c){b=h-b;a=f-a;f=Math.sqrt(b*b+a*a);return 0<f?[b/f,a/f]:[1,0]};n.getSegAngleCS=function(b,a){const [[h,f],[c,l]]=b;return this.getAngleCS(h,f,c,l,a)};n.cut=function(b,a,h,f,
c,l){c=0>=c?[b,a]:this.getCoord2D(b,a,h,f,c);b=1<=l?[h,f]:this.getCoord2D(b,a,h,f,l);return[c,b]};n.getSubCurve=function(b,a,h){const f=A.GeometryCursor.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(f,b,a,h)?f:null};n.appendSubCurve=function(b,a,h,f){b.startPath();a.seekPathStart();let c=0;var l=!0;if(!a.nextPoint())return!1;var k=a.x;let m=a.y;for(;a.nextPoint();){const d=this.getLength(k,m,a.x,a.y);if(0!==d){if(l){if(c+d>h){const e=(h-c)/d;let g=1;l=!1;c+d>=f&&(g=(f-
c)/d,l=!0);(k=this.cut(k,m,a.x,a.y,e,g))&&b.pushPoints(k);if(l)break;l=!1}}else{if(c+d>f){(a=this.cut(k,m,a.x,a.y,0,(f-c)/d))&&b.pushPoint(a[1]);break}b.pushXY(a.x,a.y)}c+=d}k=a.x;m=a.y}return!0};n.getCIMPointAlong=function(b,a){if(!b.nextPoint())return null;let h=0,f,c,l,k;f=b.x;for(c=b.y;b.nextPoint();f=l,c=k){l=b.x;k=b.y;const m=this.getLength(f,c,l,k);if(0!==m){if(h+m>a)return this.getCoord2D(f,c,l,k,(a-h)/m);h+=m}}return null};n.offset=function(b,a,h,f,c){if(!b||2>b.length)return null;var l=
0,k=b[l++];for(c=l;l<b.length;){var m=b[l];if(m[0]!==k[0]||m[1]!==k[1])l!==c&&(b[c]=b[l]),k=b[c++];l++}(l=b[0][0]===b[c-1][0]&&b[0][1]===b[c-1][1])&&--c;if(c<(l?3:2))return null;m=[];k=l?b[c-1]:null;let d=b[0];for(let t=0;t<c;t++){const r=t===c-1?l?b[0]:null:b[t+1];if(k)if(r){var e=[r[0]-d[0],r[1]-d[1]];this.normalize(e);var g=[d[0]-k[0],d[1]-k[1]];this.normalize(g);var p=g[0]*e[1]-g[1]*e[0],q=g[0]*e[0]+g[1]*e[1];if(0===p&&1===q){d=r;continue}if(0<=p===0>=a)1>q&&(e=[e[0]-g[0],e[1]-g[1]],this.normalize(e),
g=Math.sqrt((1+q)/2),g>1/f&&(g=-Math.abs(a)/g,m.push([d[0]-e[0]*g,d[1]-e[1]*g])));else switch(h){case v.GeometricEffectOffsetMethod.Mitered:if(k=Math.sqrt((1+q)/2),0<k&&1/k<f){e=[e[0]-g[0],e[1]-g[1]];this.normalize(e);g=Math.abs(a)/k;m.push([d[0]-e[0]*g,d[1]-e[1]*g]);break}case v.GeometricEffectOffsetMethod.Bevelled:m.push([d[0]+g[1]*a,d[1]-g[0]*a]);m.push([d[0]+e[1]*a,d[1]-e[0]*a]);break;case v.GeometricEffectOffsetMethod.Rounded:if(1>q){m.push([d[0]+g[1]*a,d[1]-g[0]*a]);k=Math.floor(2.5*(1-q));
if(0<k){p=q=1/k;for(let y=1;y<k;y++,p+=q){const w=[g[1]*(1-p)+e[1]*p,-g[0]*(1-p)-e[0]*p];this.normalize(w);m.push([d[0]+w[0]*a,d[1]+w[1]*a])}}m.push([d[0]+e[1]*a,d[1]-e[0]*a])}break;default:0>p?(m.push([d[0]+(g[1]+g[0])*a,d[1]+(g[1]-g[0])*a]),m.push([d[0]+(e[1]-e[0])*a,d[1]-(e[0]+e[1])*a])):(k=Math.sqrt((1+Math.abs(q))/2),e=[e[0]-g[0],e[1]-g[1]],this.normalize(e),g=a/k,m.push([d[0]-e[0]*g,d[1]-e[1]*g]))}}else e=[d[0]-k[0],d[1]-k[1]],this.normalize(e),m.push([d[0]+e[1]*a,d[1]-e[0]*a]);else e=[r[0]-
d[0],r[1]-d[1]],this.normalize(e),m.push([d[0]+e[1]*a,d[1]-e[0]*a]);k=d;d=r}if(m.length<(l?3:2))return null;l&&m.push([m[0][0],m[0][1]]);return m};return z._createClass(x)}();u.CurveHelper=B;u.PIXEL_TOLERANCE=.03;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});