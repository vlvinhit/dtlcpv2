// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(a,k){a.updateOrigins=function(c){c&&c.writtenProperties&&c.writtenProperties.forEach(({target:u,propName:x,newOrigin:y})=>{k.isMultiOriginJSONMixin(u)&&y&&u.originOf(x)!==y&&u.updateOrigin(x,y)})};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(a){a.isMultiOriginJSONMixin=function(k){return k&&
"getAtOrigin"in k&&"originOf"in k};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),function(a,k,
c,u,x,y,F,t,f,m,h){c=function(v){function z(G){G=v.call(this,G)||this;G.levelLayer=null;G.facilityLayer=null;G.siteLayer=null;return G}a._inherits(z,v);return a._createClass(z)}(c.JSONSupport);k.__decorate([u.property({type:m,json:{write:!0}})],c.prototype,"levelLayer",void 0);k.__decorate([u.property({type:f,json:{write:!0}})],c.prototype,"facilityLayer",void 0);k.__decorate([u.property({type:h,json:{write:!0}})],c.prototype,"siteLayer",void 0);return c=k.__decorate([t.subclass("esri.support.MapFloorInfo")],
c)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(a,k,c,u,x,y,F,t){c=function(f){function m(h){h=f.call(this,h)||this;h.facilityIdField=null;h.layerId=null;h.nameField=null;h.siteIdField=null;h.sublayerId=null;return h}
a._inherits(m,f);return a._createClass(m)}(c.JSONSupport);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"facilityIdField",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"layerId",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"nameField",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"siteIdField",void 0);k.__decorate([u.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},
origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"sublayerId",void 0);return c=k.__decorate([t.subclass("esri.layers.support.FacilityLayerInfo")],c)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(a,k,c,u,x,
y,F,t){c=function(f){function m(h){h=f.call(this,h)||this;h.facilityIdField=null;h.layerId=null;h.levelIdField=null;h.levelNumberField=null;h.longNameField=null;h.shortNameField=null;h.sublayerId=null;h.verticalOrderField=null;return h}a._inherits(m,f);return a._createClass(m)}(c.JSONSupport);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"facilityIdField",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"layerId",void 0);k.__decorate([u.property({type:String,
json:{write:!0}})],c.prototype,"levelIdField",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"levelNumberField",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"longNameField",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"shortNameField",void 0);k.__decorate([u.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"sublayerId",
void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"verticalOrderField",void 0);return c=k.__decorate([t.subclass("esri.layers.support.LevelLayerInfo")],c)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,k,c,u,x,y,F,t){c=function(f){function m(h){h=f.call(this,h)||this;h.layerId=null;h.nameField=null;h.siteIdField=null;h.sublayerId=null;return h}a._inherits(m,f);return a._createClass(m)}(c.JSONSupport);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"layerId",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"nameField",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"siteIdField",void 0);k.__decorate([u.property({type:Number,
json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"sublayerId",void 0);return c=k.__decorate([t.subclass("esri.layers.support.SiteLayerInfo")],c)})},"esri/support/tagSymbols":function(){define(["exports"],function(a){const k=Symbol("WebScene");a.WebSceneTag=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(a,k){a.createCopyError=function(){return new k("webscene:failed-to-copy-embedded-resources",
"Copying of embedded resources is currently not supported")};a.createSchemaValidationError=function(c){return new k("webscene:schema-validation","Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:c})};a.schemaValidationErrorName="webscene:schema-validation";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports","../../geometry/support/SupportedGCSWkids",
"../ViewingMode"],function(a,k,c){a.isSpatialReferenceSupported=function(u,x){return null==u?!1:null==x?!0:x===c.ViewingMode.Local?u.isGeographic?u.isWGS84||u.wkid===k.SupportedGCSWkids.CGCS2000:!0:u.isWebMercator||u.isWGS84||u.wkid===k.SupportedGCSWkids.CGCS2000||u.wkid===k.SupportedGCSWkids.GCSMARS2000||u.wkid===k.SupportedGCSWkids.GCSMARS2000_SPHERE||u.wkid===k.SupportedGCSWkids.GCSMOON2000};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/saveUtils":function(){define("exports ../../core/asyncUtils ../../core/Error ../../core/promiseUtils ../../core/uuid ../../portal/support/resourceUtils".split(" "),
function(a,k,c,u,x,y){async function F(f,m){m=await k.result(f.resource.portalItem.addResource(f.resource,f.content,{...(null!=m?m:{}),compress:f.compress}));if(!0===m.ok)f.finish?.(f.resource);else throw f.error?.(m.error),m.error;}async function t(f,m){m=await k.result(f.resource.update(f.content,m));if(!0===m.ok)f.finish?.(f.resource);else throw f.error?.(m.error),m.error;}a.saveResources=async function(f,m,h){if(m&&m.resources){var v=m.portalItem===f.portalItem?new Set(f.paths):new Set;f.paths.length=
0;f.portalItem=m.portalItem;var z=new Set(m.resources.toKeep.map(B=>B.resource.path)),G=new Set,C=[];z.forEach(B=>{v.delete(B);f.paths.push(B)});for(const B of m.resources.toUpdate)if(v.delete(B.resource.path),z.has(B.resource.path)||G.has(B.resource.path)){const {resource:N,content:M,finish:O,error:R}=B,T=y.getSiblingOfSameTypeI(N,x.generateUUID());f.paths.push(T.path);C.push(F({resource:T,content:M,compress:B.compress,finish:O,error:R},h))}else f.paths.push(B.resource.path),C.push(t(B,h)),G.add(B.resource.path);
for(const B of m.resources.toAdd)C.push(F(B,h)),f.paths.push(B.resource.path);v.forEach(B=>{m.portalItem&&(B=m.portalItem.resourceFromPath(B),C.push(B.portalItem.removeResource(B).catch(()=>{})))});if(0!==C.length&&(z=await u.eachAlways(C),u.throwIfAborted(h),h=z.filter(B=>"error"in B).map(B=>B.error),0<h.length))throw new c("save:resources","Failed to save one or more resources",{errors:h});}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/resourceUtils":function(){define(["exports",
"../../request","../../core/Error","../../core/urlUtils"],function(a,k,c,u){function x(t){const f=t.lastIndexOf("/");return-1===f?[".",t]:[t.slice(0,f),t.slice(f+1)]}function y(t){{const z=u.getPathExtension(t);t=null==z?[t,""]:[t.slice(0,t.length-z.length-1),`.${z}`]}const [f,m]=t,[h,v]=x(f);return[h,v,m]}async function F(t){return t instanceof Blob?t:(await k(t.url,{responseType:"blob"})).data}a.addOrUpdateResource=async function(t,f,m,h){if(!t.hasPath())throw new c(`portal-item-resource-${f}:invalid-path`,
"Resource does not have a valid path");const v=t.portalItem;await v.load(h);f=u.join(v.userItemUrl,"add"===f?"addResources":"updateResources");const [z,G]=x(t.path);m=await F(m);const C=new FormData;z&&"."!==z&&C.append("resourcesPrefix",z);null!=h&&h.compress&&C.append("compress","true");C.append("fileName",G);C.append("file",m,G);C.append("f","json");null!=h&&h.access&&C.append("access",h.access);await v.portal.request(f,{method:"post",body:C,signal:h?.signal});return t};a.contentToBlob=F;a.fetchResources=
async function(t,f={},m){await t.load(m);const h=u.join(t.itemUrl,"resources"),{start:v=1,num:z=10,sortOrder:G="asc",sortField:C="created"}=f;f=await t.portal.request(h,{query:{start:v,num:z,sortOrder:G,sortField:C,token:t.apiKey},signal:m?.signal});return{total:f.total,nextStart:f.nextStart,resources:f.resources.map(({created:B,size:N,resource:M})=>({created:new Date(B),size:N,resource:t.resourceFromPath(M)}))}};a.getSiblingOfSameType=function(t,f){if(!t.hasPath())return null;const [m,,h]=y(t.path);
return t.portalItem.resourceFromPath(u.join(m,f+h))};a.getSiblingOfSameTypeI=function(t,f){if(!t.hasPath())return null;const [m,,h]=y(t.path);return t.portalItem.resourceFromPath(u.join(m,f+h))};a.removeAllResources=async function(t,f){await t.load(f);const m=u.join(t.userItemUrl,"removeResources");return t.portal.request(m,{method:"post",query:{deleteAll:!0},signal:f?.signal})};a.removeResource=async function(t,f,m){if(!f.hasPath())throw new c("portal-item-resources-remove:invalid-path","Resource does not have a valid path");
await t.load(m);const h=u.join(t.userItemUrl,"removeResources");await t.portal.request(h,{method:"post",query:{resource:f.path},signal:m?.signal});f.portalItem=null};a.splitPrefixFileNameAndExtension=y;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(a){const k={width:600,height:400};a.getOptimalThumbnailSize=function(c,u){u=u||k;let {width:x,height:y}=u;u=x/y;1.5>u?y=x/1.5:1.5<u&&(x=1.5*y);x>c.width&&(y*=c.width/
x,x=c.width);y>c.height&&(x*=c.height/y,y=c.height);return{width:Math.round(x),height:Math.round(y)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(a,k,c,u,x,y,F,t,f){var m;c=m=function(h){function v(z){z=h.call(this,z)||this;z.viewing=null;return z}a._inherits(v,h);v.prototype.clone=function(){return new m({viewing:this.viewing?this.viewing.clone():null})};return a._createClass(v)}(c.JSONSupport);k.__decorate([u.property({type:f,json:{write:!0}})],c.prototype,"viewing",void 0);return c=m=k.__decorate([t.subclass("esri.webscene.ApplicationProperties")],c)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),
function(a,k,c,u,x,y,F,t){var f;c=f=function(m){function h(v){v=m.call(this,v)||this;v.search=null;return v}a._inherits(h,m);h.prototype.clone=function(){return new f(u.clone({search:this.search}))};return a._createClass(h)}(c.JSONSupport);k.__decorate([x.property({type:t,json:{write:!0}})],c.prototype,"search",void 0);return c=f=k.__decorate([F.subclass("esri.webdoc.applicationProperties.Viewing")],c)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v,z){var G;const C=c.ofType(v),B=c.ofType(z);c=G=function(N){function M(R){R=N.call(this,R)||this;R.addressSearchEnabled=!0;R.enabled=!0;R.hintText=null;R.layers=new C;R.tables=new B;return R}a._inherits(M,N);var O=M.prototype;O.readAddressSearchEnabled=function(R){return!R};O.writeAddressSearchEnabled=function(R,T,Y){T[Y]=!R};O.clone=function(){return new G(x.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,
tables:this.tables}))};return a._createClass(M)}(u.JSONSupport);k.__decorate([y.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"addressSearchEnabled",void 0);k.__decorate([t.reader("addressSearchEnabled")],c.prototype,"readAddressSearchEnabled",null);k.__decorate([m.writer("addressSearchEnabled")],c.prototype,"writeAddressSearchEnabled",null);k.__decorate([y.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],c.prototype,"enabled",void 0);k.__decorate([y.property({type:String,json:{write:!0}})],c.prototype,"hintText",void 0);k.__decorate([y.property({type:C,json:{write:{overridePolicy:h.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],c.prototype,"layers",void 0);k.__decorate([y.property({type:B,json:{read:!0,write:{overridePolicy:h.writeNonEmptyCollectionPolicy}}})],
c.prototype,"tables",void 0);return c=G=k.__decorate([f.subclass("esri.webdoc.applicationProperties.Search")],c)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(a){a.writeNonEmptyCollectionPolicy=function(k){return{enabled:!!k?.length}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(a,k,c,u,x,y,F,t){var f;c=f=function(m){function h(v){v=m.call(this,v)||this;v.field=null;v.id=null;v.subLayer=null;return v}a._inherits(h,m);h.prototype.clone=function(){return new f(u.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return a._createClass(h)}(c.JSONSupport);k.__decorate([x.property({type:t,json:{write:{isRequired:!0}}})],c.prototype,"field",void 0);k.__decorate([x.property({type:String,json:{write:{isRequired:!0}}})],c.prototype,"id",void 0);k.__decorate([x.property({type:y.Integer,
json:{write:!0}})],c.prototype,"subLayer",void 0);return c=f=k.__decorate([F.subclass("esri.webdoc.applicationProperties.SearchLayer")],c)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(a,k,c,u,x,y,F,t,f,m){var h;c=h=function(v){function z(G){G=v.call(this,G)||this;G.exactMatch=!1;G.name=null;G.type=null;return G}a._inherits(z,v);z.prototype.clone=function(){return new h({exactMatch:this.exactMatch,type:this.type,name:this.name})};return a._createClass(z)}(c.JSONSupport);k.__decorate([u.property({type:Boolean,json:{write:!0}})],c.prototype,"exactMatch",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);k.__decorate([t.enumeration(m.kebabDict)],
c.prototype,"type",void 0);return c=h=k.__decorate([f.subclass("esri.webdoc.applicationProperties.SearchLayerField")],c)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(a,k,c,u,x,y,F,t){var f;c=f=function(m){function h(v){v=
m.call(this,v)||this;v.field=null;v.id=null;return v}a._inherits(h,m);h.prototype.clone=function(){return new f(u.clone({field:this.field,id:this.id}))};return a._createClass(h)}(c.JSONSupport);k.__decorate([x.property({type:t,json:{write:{isRequired:!0}}})],c.prototype,"field",void 0);k.__decorate([x.property({type:String,json:{write:{isRequired:!0}}})],c.prototype,"id",void 0);return c=f=k.__decorate([F.subclass("esri.webdoc.applicationProperties.SearchTable")],c)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(a,k,c,u,x,y,F,t,f,m){var h;c=h=function(v){function z(G){G=v.call(this,G)||this;G.exactMatch=!1;G.name=null;G.type=null;return G}a._inherits(z,v);z.prototype.clone=function(){return new h({exactMatch:this.exactMatch,type:this.type,name:this.name})};return a._createClass(z)}(c.JSONSupport);k.__decorate([u.property({type:Boolean,json:{write:!0}})],c.prototype,"exactMatch",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);k.__decorate([t.enumeration(m.kebabDict)],
c.prototype,"type",void 0);return c=h=k.__decorate([f.subclass("esri.webdoc.applicationProperties.SearchTableField")],c)})},"esri/webscene/Environment":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../views/3d/environment/SunnyWeather ../views/3d/environment/weather ./lightingTypes ./SunLighting ./VirtualLighting ./background/utils".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v,z,G){var C;const B=x.getLogger("esri.webscene.Environment");x=(N,M,O)=>({enabled:!O||!O.isPresentation});c=C=function(N){function M(R){R=N.call(this,R)||this;R.lighting=new v;R.background=null;R.atmosphereEnabled=!0;R.starsEnabled=!0;return R}a._inherits(M,N);var O=M.prototype;O.clone=function(){return new C(this.cloneConstructProperties())};O.cloneConstructProperties=function(){return{lighting:this.lighting&&"virtual"===this.lighting.type?z.prototype.clone.call(this.lighting):
v.prototype.clone.call(this.lighting),background:u.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,weather:this.weather.clone()}};a._createClass(M,[{key:"weather",set:function(R){m.validateWeatherType(R?.type,B)&&this._set("weather",R)}}]);return M}(c.JSONSupport);k.__decorate([y.property({types:h.lightingTypes,nonNullable:!0,json:{write:!0}})],c.prototype,"lighting",void 0);k.__decorate([y.property(G.backgroundProperty)],c.prototype,"background",void 0);
k.__decorate([y.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:x}}})],c.prototype,"atmosphereEnabled",void 0);k.__decorate([y.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:x}}})],c.prototype,"starsEnabled",void 0);k.__decorate([y.property({types:m.weatherTypes,nonNullable:!0,json:{write:!0},value:new f})],c.prototype,"weather",null);return c=C=k.__decorate([t.subclass("esri.webscene.Environment")],c)})},"esri/views/3d/environment/SunnyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,k,c,u,x,y,F,t,f){var m;c=m=function(h){function v(z){z=h.call(this,z)||this;z.type="sunny";z.cloudCover=.5;return z}a._inherits(v,h);v.prototype.clone=function(){return new m({cloudCover:this.cloudCover})};return a._createClass(v)}(c.JSONSupport);k.__decorate([t.enumeration({sunny:"sunny"})],c.prototype,"type",void 0);k.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"cloudCover",void 0);return c=m=k.__decorate([f.subclass("esri.views.3d.environment.SunnyWeather")],
c)})},"esri/views/3d/environment/weather":function(){define("exports ./CloudyWeather ./FoggyWeather ./RainyWeather ./SnowyWeather ./SunnyWeather".split(" "),function(a,k,c,u,x,y){k={key:"type",base:y,typeMap:{sunny:y,cloudy:k,rainy:u,snowy:x,foggy:c}};const F=Object.keys(k.typeMap);a.validateWeatherType=function(t,f){return F.includes(t)?!0:(f.error(`"${t}" is not a valid weather type`),!1)};a.weatherHeightLimit=1E4;a.weatherTypes=k;a.weatherTypesArray=F;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/environment/CloudyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,k,c,u,x,y,F,t,f){var m;c=m=function(h){function v(z){z=h.call(this,
z)||this;z.type="cloudy";z.cloudCover=.5;return z}a._inherits(v,h);v.prototype.clone=function(){return new m({cloudCover:this.cloudCover})};return a._createClass(v)}(c.JSONSupport);k.__decorate([t.enumeration({cloudy:"cloudy"})],c.prototype,"type",void 0);k.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"cloudCover",void 0);return c=m=k.__decorate([f.subclass("esri.views.3d.environment.CloudyWeather")],c)})},"esri/views/3d/environment/FoggyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,k,c,u,x,y,F,t,f){var m;c=m=function(h){function v(z){z=h.call(this,z)||this;z.type="foggy";z.fogStrength=.5;return z}a._inherits(v,h);v.prototype.clone=function(){return new m({fogStrength:this.fogStrength})};return a._createClass(v)}(c.JSONSupport);k.__decorate([t.enumeration({foggy:"foggy"})],c.prototype,"type",void 0);k.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"fogStrength",void 0);return c=m=k.__decorate([f.subclass("esri.views.3d.environment.FoggyWeather")],
c)})},"esri/views/3d/environment/RainyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,k,c,u,x,y,F,t,f){var m;c=m=function(h){function v(z){z=h.call(this,z)||this;z.type=
"rainy";z.cloudCover=.5;z.precipitation=.5;return z}a._inherits(v,h);v.prototype.clone=function(){return new m({cloudCover:this.cloudCover,precipitation:this.precipitation})};return a._createClass(v)}(c.JSONSupport);k.__decorate([t.enumeration({rainy:"rainy"})],c.prototype,"type",void 0);k.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"cloudCover",void 0);k.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],
c.prototype,"precipitation",void 0);return c=m=k.__decorate([f.subclass("esri.views.3d.environment.RainyWeather")],c)})},"esri/views/3d/environment/SnowyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,k,c,u,x,y,F,t,f){var m;c=m=function(h){function v(z){z=h.call(this,z)||this;z.type="snowy";z.cloudCover=.5;z.precipitation=.5;z.snowCover="disabled";return z}a._inherits(v,h);v.prototype.clone=function(){return new m({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})};return a._createClass(v)}(c.JSONSupport);k.__decorate([t.enumeration({snowy:"snowy"})],c.prototype,"type",void 0);k.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:1},
json:{write:!0}})],c.prototype,"cloudCover",void 0);k.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"precipitation",void 0);k.__decorate([u.property({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],c.prototype,"snowCover",void 0);return c=m=k.__decorate([f.subclass("esri.views.3d.environment.SnowyWeather")],c)})},"esri/webscene/lightingTypes":function(){define(["exports","./SunLighting","./VirtualLighting"],function(a,k,c){a.lightingTypes=
{key:"type",defaultKeyValue:"sun",base:null,typeMap:{sun:k,virtual:c}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/SunLighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),
function(a,k,c,u,x,y,F,t,f,m){var h;c=h=function(v){function z(C){C=v.call(this,C)||this;C.type="sun";C.date=null;C.directShadowsEnabled=!1;C.displayUTCOffset=null;return C}a._inherits(z,v);var G=z.prototype;G.readDate=function(C,B){return null!=B.datetime&&new Date(B.datetime)||null};G.writeDate=function(C,B,N){B[N]=C.getTime()};G.readDirectShadowsEnabled=function(C,B){return!!B.directShadows};G.writedirectShadowsEnabled=function(C,B,N){C&&(B[N]=C)};G.writeDisplayUTCOffset=function(C,B){null!=C&&
(B.displayUTCOffset=C)};G.clone=function(){return new h(this.cloneConstructProperties())};G.cloneConstructProperties=function(){const C={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(C.date=new Date(this.date.getTime()));return C};return a._createClass(z)}(c.JSONSupport);k.__decorate([u.property({readOnly:!0,type:["sun"],json:{write:!0}})],c.prototype,"type",void 0);k.__decorate([u.property({type:Date,json:{type:Number,
write:{target:"datetime"}}})],c.prototype,"date",void 0);k.__decorate([t.reader("date",["datetime"])],c.prototype,"readDate",null);k.__decorate([m.writer("date")],c.prototype,"writeDate",null);k.__decorate([u.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],c.prototype,"directShadowsEnabled",void 0);k.__decorate([t.reader("directShadowsEnabled",["directShadows"])],c.prototype,"readDirectShadowsEnabled",null);k.__decorate([m.writer("directShadowsEnabled")],c.prototype,"writedirectShadowsEnabled",
null);k.__decorate([u.property({type:Number,json:{write:!0}})],c.prototype,"displayUTCOffset",void 0);k.__decorate([m.writer("displayUTCOffset")],c.prototype,"writeDisplayUTCOffset",null);return c=h=k.__decorate([f.subclass("esri.webscene.SunLighting")],c)})},"esri/webscene/VirtualLighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(a,k,c,u,x,y,F,t){var f;c=f=function(m){function h(z){z=m.call(this,z)||this;z.type="virtual";z.directShadowsEnabled=!1;return z}a._inherits(h,m);var v=h.prototype;v.clone=function(){return new f(this.cloneConstructProperties())};v.cloneConstructProperties=function(){return{directShadowsEnabled:this.directShadowsEnabled}};return a._createClass(h)}(c.JSONSupport);k.__decorate([u.property({readOnly:!0,type:["virtual"],json:{write:!0}})],c.prototype,"type",void 0);k.__decorate([u.property({type:Boolean,
json:{default:!1,name:"directShadows",write:!0}})],c.prototype,"directShadowsEnabled",void 0);return c=f=k.__decorate([t.subclass("esri.webscene.VirtualLighting")],c)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(a,k,c){k={base:k,key:"type",typeMap:{color:c}};k={types:k,json:{read:function(u){return(x,y,F)=>{if(!x)return x;for(const t in u.typeMap)if(x.type===t)return y=new u.typeMap[t],y.read(x,F),y}}(k),write:{overridePolicy:(u,x,y)=>
({enabled:!y||!y.isPresentation})}}};a.backgroundProperty=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/background/Background":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(a,k,c,u,x,y,F,t){c=function(f){function m(h){return f.call(this,
h)||this}a._inherits(m,f);m.prototype.clone=function(){};return a._createClass(m)}(c.JSONSupport);k.__decorate([u.property({readOnly:!0,json:{read:!1}})],c.prototype,"type",void 0);return c=k.__decorate([t.subclass("esri.webscene.background.Background")],c)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../symbols/support/materialUtils ./Background".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h){var v;x={...m.colorAndTransparencyProperty,nonNullable:!0};h=v=function(z){function G(B){B=z.call(this,B)||this;B.type="color";B.color=new c([0,0,0,1]);return B}a._inherits(G,z);var C=G.prototype;C.clone=function(){return new v(this.cloneProperties())};C.cloneProperties=function(){return{color:this.color.clone()}};return a._createClass(G)}(h);k.__decorate([t.enumeration({color:"color"},{readOnly:!0})],h.prototype,"type",void 0);k.__decorate([u.property(x)],h.prototype,
"color",void 0);return h=v=k.__decorate([f.subclass("esri.webscene.background.ColorBackground")],h)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ./Environment".split(" "),function(a,k,c,u,x,y,F,t,f,m,h){var v;u=v=function(z){function G(C){C=
z.call(this,C)||this;C.environment=new h;C.spatialReference=null;C.viewpoint=null;return C}a._inherits(G,z);G.prototype.clone=function(){return new v({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})};a._createClass(G,[{key:"viewingMode",set:function(C){this._set("viewingMode",C)}}]);return G}(u.JSONSupport);k.__decorate([x.property({type:h,json:{write:{isRequired:!0}}})],
u.prototype,"environment",void 0);k.__decorate([x.property({type:m})],u.prototype,"spatialReference",void 0);k.__decorate([x.property({type:["local","global"]})],u.prototype,"viewingMode",null);k.__decorate([x.property({type:c,json:{write:{isRequired:!0}}})],u.prototype,"viewpoint",void 0);return u=v=k.__decorate([f.subclass("esri.webscene.InitialViewProperties")],u)})},"esri/webscene/Presentation":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Slide".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h){const v=c.ofType(h);c=function(z){function G(B){B=z.call(this,B)||this;B.slides=new v;return B}a._inherits(G,z);var C=G.prototype;C.destroy=function(){this.slides.forEach(B=>B.destroy());this.slides.removeAll()};C.clone=function(){return new this.constructor({slides:this.slides.clone()})};a._createClass(G,[{key:"slides",set:function(B){B&&(B=B.filter(N=>!!N.viewpoint));this._set("slides",u.referenceSetter(B,this._get("slides"),v))}}]);return G}(x.JSONSupport);k.__decorate([y.property({type:v,
nonNullable:!0,json:{write:!0}}),F.cast(u.castForReferenceSetter)],c.prototype,"slides",null);return c=k.__decorate([m.subclass("esri.webscene.Presentation")],c)})},"esri/webscene/Slide":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Basemap ../Viewpoint ../core/asyncUtils ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../chunks/vec3 ../chunks/vec3f64 ../layers/Layer ../layers/mixins/OperationalLayer ../support/basemapUtils ../views/3d/support/mathUtils ../views/3d/support/viewpointUtils ../views/support/Scheduler ../webdoc/support/SlideThumbnail ./SunLighting ./VirtualLighting ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v,z,G,C,B,N,M,O,R,T,Y,Q,ka,ba,ja,l,w,I,P,U,S,da,d){function n(ca){if("building-scene"===ca.type||"map-image"===ca.type)return ca.allSublayers.toArray()}function K(ca){if(ca=n(ca))return ca.filter(ia=>ia.visible).map(ia=>ia.id)}function V(ca,ia){ca=ia-ca;43200<ca&&(ca-=86400);-43200>ca&&(ca+=86400);return ca}let Z=0;const ha=y.ofType(da.SlideVisibleLayer);t=function(ca){function ia(b){b=ca.call(this,b)||this;b.id=Date.now().toString(16)+"-slide-"+Z++;b.title=new d;b.description=
new P;b.thumbnail=new l.SlideThumbnail;b.viewpoint=null;b.basemap=null;b.ground=null;b.environment=new U.SlideEnvironment;b.visibleLayers=new ha;return b}a._inherits(ia,ca);var r=ia.prototype;r.destroy=function(){this.visibleLayers.removeAll();this.basemap?.destroy();this.basemap=null;this.thumbnail=m.destroyMaybe(this.thumbnail);this.thumbnail=this.title=this.description=null};r.castTitle=function(b){return"string"===typeof b?new d({text:b}):M.ensureType(d,b)};r.castDescription=function(b){return"string"===
typeof b?new P({text:b}):M.ensureType(P,b)};r.castThumbnail=function(b){return"string"===typeof b?new l.SlideThumbnail({url:b}):M.ensureType(l.SlideThumbnail,b)};r.castBasemap=function(b){return Q.ensureType(b)};r.castVisibleLayers=function(b){return b&&"function"===typeof b.map?b.map(e=>{if("string"===typeof e)return{id:e};if(e instanceof T){const A=K(e);return{id:e.id,sublayerIds:A}}if(e.id)return{id:e.id,sublayerIds:"sublayerIds"in e?e.sublayerIds:void 0};f.getLogger(this).warn('Invalid visible layer, expected { id }, Layer or "id"');
return e}):null};r.clone=function(){return new this.constructor({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})};r._updateVisibleLayersFrom=function(b){const e=[];return h.eachAlways(this._getLayers(b.map).map(A=>
b.whenLayerView(A).then(H=>{if(H.visible){const J=K(A);e.push(new da.SlideVisibleLayer({id:H.layer.id,sublayerIds:J}))}})).toArray()).then(()=>{this.visibleLayers.removeAll();this.visibleLayers.addMany(e)})};r.updateFrom=function(b,e){const A={format:"png",quality:80,width:120,height:75,disableDecorations:!0,...(e&&e.screenshot)};return b.when(()=>{this.viewpoint=b.viewpoint.clone();this.environment.lighting="virtual"===b.environment.lighting.type?I.prototype.clone.apply(b.environment.lighting):w.prototype.clone.apply(b.environment.lighting);
this.environment.weather=b.environment.weather.clone();this.basemap=b.map.basemap&&b.map.basemap.clone()||null;this.ground=b.map.ground?S.fromGround(b.map.ground):null;return this._updateVisibleLayersFrom(b)}).then(()=>b.takeScreenshot(A)).then(H=>{this.thumbnail=new l.SlideThumbnail({url:H.dataUrl});return this})};r.applyTo=async function(b,e){null!=this._applyToController&&this._applyToController.abort();let A=new AbortController;this._applyToController=A;const H=h.onAbortOrThrow(e,()=>A?.abort()),
J=b.resourceController.scheduler.registerTask(ja.TaskPriority.SLIDE);let W=!1;const fa={animate:!0,...e,signal:this._applyToController.signal};e=await x.result(b.addUpdatingPromise((async()=>{await Promise.all([J.schedule(()=>W=this._setViewpointOfInterest(b,fa)),J.schedule(()=>this._applyBasemap(b,fa),fa.signal)]);await this._loadLayersWithSublayerVisibility(b);await Promise.all([J.schedule(()=>this._applyLayerVisibility(b),fa.signal),J.schedule(()=>this._applyGround(b),fa.signal),J.schedule(()=>
this._applyViewpoint(b,fa),fa.signal)]);await J.schedule(()=>b.environment.weather=this.environment.weather.clone())})()));W&&(b.contentCamera=null);J.remove();this._applyToController===A&&(this._applyToController=null);A=null;H?.remove();if(!1===e.ok)throw e.error;return this};r._applyBasemap=async function(b,e){if(this.basemap){try{await this.basemap.load(e)}catch(A){if(h.isAbortError(A))throw A;}b.map.basemap=Q.clonePreservingTiledLayers(this.basemap,b.map.basemap)}};r._applyGround=function(b){this.ground&&
(b.map.ground=this.ground.cloneAndApplyTo(b.map.ground))};r._getLayers=function(b){const e=new y;this._collectLayers(b,e);this._collectLayers(b.ground,e);return e};r._collectLayers=function(b,e){b.layers.forEach(A=>{Y.isOperationalLayer(A)&&(e.add(A),"layers"in A&&this._collectLayers(A,e))})};r._loadLayersWithSublayerVisibility=async function(b){this.visibleLayers&&await h.eachAlways(this._getLayers(b.map).map(e=>this.visibleLayers.find(A=>A.id===e.id)?.sublayerIds?e.load():null))};r._applyLayerVisibility=
function(b){this.visibleLayers&&this._getLayers(b.map).forEach(e=>{var A=this.visibleLayers.find(J=>J.id===e.id);e.visible=null!=A;const H=A?.sublayerIds;A=n(e);H&&A&&A.forEach(J=>J.visible=H.includes(J.id))})};r._setViewpointOfInterest=function(b,e){if(b.state.fixedContentCamera||!this.viewpoint||e?.ignoreViewpoint||!e?.useDestinationCamera)return!1;e=ba.toCamera(b,this.viewpoint);b.contentCamera=e;return null!=e};r._applyViewpoint=async function(b,e){this._applyCachedCameraTrackingEnabled(b);if(this.viewpoint&&
!e.ignoreViewpoint){null!=this.viewpoint.camera&&(this.viewpoint.camera.fov=b.camera.fov);if(e.animate&&this.get("environment.lighting.date"))return this._animateToLighting(b,e);e.animate&&(b.environment.applyLighting(this.environment.lighting.clone()),await b.goTo(this.viewpoint,e));b.viewpoint=this.viewpoint}b.environment.applyLighting(this.environment.lighting.clone())};r._animateToLighting=async function(b,e){let A=null;"virtual"!==b.environment.lighting.type&&"virtual"!==this.environment.lighting.type&&
("global"===b.viewingMode&&(A=this._animateLightingWithCamera(b,b.environment.lighting,this.environment.lighting)),b.environment.cachedCameraTrackingEnabled=b.environment.lighting.cameraTrackingEnabled,b.environment.lighting.cameraTrackingEnabled=!1);b.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;"virtual"===this.environment.lighting.type||"virtual"===b.environment.lighting.type?(b.environment.applyLighting(this.environment.lighting.clone()),"virtual"!==
b.environment.lighting.type&&(b.environment.cachedCameraTrackingEnabled=b.environment.lighting.cameraTrackingEnabled,b.environment.lighting.cameraTrackingEnabled=!1)):null!=this.environment.lighting.displayUTCOffset&&(b.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return b.goTo(this.viewpoint,e).then(()=>{this._applyCachedCameraTrackingEnabled(b);b.environment.applyLighting(this.environment.lighting.clone())}).catch(H=>{null==b.animation&&this._applyCachedCameraTrackingEnabled(b);
throw H;}).finally(()=>{m.removeMaybe(A)})};r._applyCachedCameraTrackingEnabled=function(b){null!=b.environment.cachedCameraTrackingEnabled&&(b.environment.lighting.cameraTrackingEnabled=b.environment.cachedCameraTrackingEnabled,b.environment.cachedCameraTrackingEnabled=null)};r._getTime=function(b){const e=b.getTime();b=3600*b.getUTCHours()+60*b.getUTCMinutes()+b.getUTCSeconds();return[e,b]};r._setTime=function(b,e,A){b.setTime(e);b.setUTCHours(A/3600);b.setUTCMinutes(A%3600/60);b.setUTCSeconds(A%
3600%60);return b};r._animateLightingWithCamera=function(b,e,A){const [H,J]=this._getTime(new Date(e.date.toString())),[W,fa]=this._getTime(A.date),ma=V(J,fa),na=b.renderCoordsHelper,oa=R.create();na.toRenderCoords(b.camera.position,oa);const pa=R.create(),ea=R.create();null!=this.viewpoint.camera&&na.toRenderCoords(this.viewpoint.camera.position,pa);const E=new Date;return v.when(()=>b.camera,p=>{na.toRenderCoords(p.position,ea);var g=O.squaredDistance(oa,ea);const q=O.squaredDistance(pa,ea);p=0;
0!==g+q&&(p=g/(g+q));g=H+(W-H)*p;p=ka.moduloPositive(J+ma*p,86400);e.date=this._setTime(E,g,p)})};ia.createFrom=function(b,e){return(new this).updateFrom(b,e)};a._createClass(ia,[{key:"visibleLayers",set:function(b){this._set("visibleLayers",F.referenceSetter(b,this._get("visibleLayers"),ha))}}]);return ia}(t.JSONSupport);k.__decorate([z.property({type:String,json:{write:{isRequired:!0}}})],t.prototype,"id",void 0);k.__decorate([z.property({type:d,json:{default:()=>new d({text:""}),write:{isRequired:!0}}})],
t.prototype,"title",void 0);k.__decorate([G.cast("title")],t.prototype,"castTitle",null);k.__decorate([z.property({type:P,json:{write:{overridePolicy(ca){return{enabled:!(!ca||!ca.text)}}}}})],t.prototype,"description",void 0);k.__decorate([G.cast("description")],t.prototype,"castDescription",null);k.__decorate([z.property({type:l.SlideThumbnail,json:{default:()=>new l.SlideThumbnail({url:""}),write:{isRequired:!0}}})],t.prototype,"thumbnail",void 0);k.__decorate([G.cast("thumbnail")],t.prototype,
"castThumbnail",null);k.__decorate([z.property({type:u,nonNullable:!0,json:{write:{isRequired:!0}}})],t.prototype,"viewpoint",void 0);k.__decorate([z.property({type:c,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],t.prototype,"basemap",void 0);k.__decorate([G.cast("basemap")],t.prototype,"castBasemap",null);k.__decorate([z.property({type:S,json:{write:!0}})],t.prototype,"ground",void 0);k.__decorate([z.property({type:ha,json:{write:{isRequired:!0}}})],t.prototype,"visibleLayers",null);
k.__decorate([G.cast("visibleLayers")],t.prototype,"castVisibleLayers",null);k.__decorate([z.property({type:U.SlideEnvironment,json:{write:!0}})],t.prototype,"environment",void 0);return t=k.__decorate([N.subclass("esri.webscene.Slide")],t)})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(a,k,c,u){const x=u.create(),y=u.create(),F=u.create(),t=u.create(),f=u.create();a.angle=function(m,h,v){m=c.normalize(t,
m);h=c.normalize(f,h);const z=k.acosClamped(c.dot(m,h));return v&&(m=c.cross(F,m,h),0>c.dot(m,v))?-z:z};a.bilerp=function(m,h,v,z,G,C){m+=(h-m)*G;return m+(v+(z-v)*G-m)*C};a.cosCapped=function(m,h){return m>h?Math.cos(h):Math.cos(m)};a.fovx2fovy=function(m,h,v){return 2*Math.atan(v*Math.tan(.5*m)/h)};a.fovy2fovx=function(m,h,v){return 2*Math.atan(h*Math.tan(.5*m)/v)};a.makeOrthonormal=function(m,h,v){v=v||m;const z=c.dot(m,h);c.set(v,m[0]-z*h[0],m[1]-z*h[1],m[2]-z*h[2]);c.normalize(v,v)};a.makePiecewiseLinearFunction=
function(m){const h=m.length;return v=>{if(v<=m[0][0])return m[0][1];if(v>=m[h-1][0])return m[h-1][1];let z=1;for(;v>m[z][0];)z++;const G=m[z][0];v=(G-v)/(G-m[z-1][0]);return v*m[z-1][1]+(1-v)*m[z][1]}};a.maxScale=function(m){return Math.sqrt(Math.max(m[0]*m[0]+m[4]*m[4]+m[8]*m[8],m[1]*m[1]+m[5]*m[5]+m[9]*m[9],m[2]*m[2]+m[6]*m[6]+m[10]*m[10]))};a.moduloPositive=function(m,h){return(m%h+h)%h};a.planeFromPoints=function(m,h,v,z){c.subtract(x,h,m);c.subtract(y,v,m);c.cross(z,x,y);c.normalize(z,z);z[3]=
-c.dot(m,z)};a.scaleFromMatrix=function(m,h){c.set(m,Math.sqrt(h[0]*h[0]+h[4]*h[4]+h[8]*h[8]),Math.sqrt(h[1]*h[1]+h[5]*h[5]+h[9]*h[9]),Math.sqrt(h[2]*h[2]+h[6]*h[6]+h[10]*h[10]));return m};a.slerp=function(m,h,v,z=u.create()){const G=c.length(m);var C=c.length(h),B=c.dot(m,h)/(G*C);if(.9999999999999999>B){B=Math.acos(B);const N=((1-v)*G+v*C)/Math.sin(B);C=N/C*Math.sin(v*B);c.scale(t,m,N/G*Math.sin((1-v)*B));c.scale(f,h,C);return c.add(z,t,f)}return c.lerp(z,m,h,v)};a.slerpTangent=function(m,h,v,z=
u.create(),G=u.create()){const C=c.length(m),B=c.length(h);var N=c.dot(m,h)/(C*B);if(.9999999999999999>N){N=Math.acos(N);const M=Math.sin(N),O=Math.sin(v*N),R=Math.sin((1-v)*N),T=(1-v)*C+v*B,Y=T/M,Q=Y/B*O;c.scale(t,m,Y/C*R);c.scale(f,h,Q);c.add(z,t,f);c.scale(t,m,1/C*(-Math.cos((1-v)*N)*N*T+R*(-C+B)));c.scale(f,h,1/B*(Math.cos(v*N)*N*T+O*(-C+B)));c.add(G,t,f);c.scale(G,G,1/M);return G}c.lerp(z,m,h,v);c.subtract(G,h,m);c.normalize(G,G);return G};a.tangentFrame=function(m,h,v){Math.abs(m[0])>Math.abs(m[1])?
c.set(h,0,1,0):c.set(h,1,0,0);c.cross(v,m,h);c.normalize(h,h);c.cross(h,v,m);c.normalize(v,v)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/viewpointUtils":function(){define("exports ../../../Camera ../../../geometry ../../../Graphic ../../../Viewpoint ../../../core/asyncUtils ../../../core/has ../../../core/Cyclical ../../../core/Error ../../../core/promiseUtils ../../../chunks/mat3 ../../../chunks/mat3f64 ../../../chunks/mat4f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/frustum ../../../geometry/support/scaleUtils ../../../geometry/support/webMercatorUtils ../camera/intersectionUtils ./cameraUtils ./ElevationProvider ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Geometry".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v,z,G,C,B,N,M,O,R,T,Y,Q,ka,ba,ja,l,w){function I(g){return 360-t.cyclicalDegrees.normalize(g)}function P(g){return t.cyclicalDegrees.normalize(360-g)}function U(g){null!=g&&g.resolver&&g.resolver.reject();return null}function S(g,q,D,L=null){if(!q)return U(L);var X=g.spatialReference||ja.WGS84;if(null!=q.camera){g=T.project(q.camera.position,X);if(null==g)return U(L);q=q.camera.clone();q.position=g.clone();g=q;null!=L&&L.resolver&&L.resolver.resolve(g);return g}if(null==
q.targetGeometry)return U(L);var aa=q.get("targetGeometry.spatialReference");if(aa&&!T.canProject(aa,X))return U(L);X=Q.internalToExternal(g,g.state.camera);aa=Q.OrientationMode.ADJUST;null!=q.rotation&&(X.heading=I(q.rotation),aa=Q.OrientationMode.LOCKED);null!=D&&(X.tilt=D);if("point"===q.targetGeometry.type){const la=q.targetGeometry;D=q.targetGeometry.clone();q=null!=q.scale?Q.scaleToDistance(g,q.scale,la.latitude):g.state.camera.distance;return Q.fromCenterDistance(g,D,q,X,aa,L)}return(q=q.targetGeometry.extent)?
Q.fromExtent(g,q,X.heading,X.tilt,aa,L):U(L)}function da(g,q){return null==q.scale&&null!=q.zoom?Q.zoomToScale(g,q.zoom):q.scale}function d(g,q){let D=!1;null!=q.heading?(g.heading=q.heading,D=!0):null!=q.rotation&&(g.heading=I(q.rotation),D=!0);null!=q.tilt&&(g.tilt=q.tilt,D=!0);null!=q.fov&&(g.fov=q.fov);return D}function n(g,q,D,L){const X=g.spatialReference||ja.WGS84;q=null!=q?q:Q.externalToInternal(g,D);if(null==q)return L;L.targetGeometry=B.projectVectorToPoint(q.center,g.renderSpatialReference,
X);L.scale=Q.computeScale(g,q);L.rotation=P(D.heading);L.camera=D;return L}function K(g,q,D){var L=()=>new f("viewpointutils:invalid-geometry","The target is missing a valid geometry");if(!q)throw L();if(!T.canProject(q.spatialReference,g.spatialReference))throw new f("viewpointutils:incompatible-spatialreference",`Spatial reference (${q.spatialReference?q.spatialReference.wkid:"unknown"}) is incompatible with the view (${g.spatialReference?.wkid})`,{geometry:q});const X=[];if(!q.hasZ&&g.basemapTerrain){switch(q.type){case "point":var aa=
q;break;case "multipoint":case "polyline":aa=q.extent?.center;break;case "mesh":aa=q.origin;break;case "extent":aa=q.center;break;case "polygon":aa=q.centroid}aa&&null!=g.basemapTerrain.spatialReference&&T.canProject(aa,g.basemapTerrain.spatialReference)&&g.elevationProvider?H[2]=ka.getElevationAtPoint(g.elevationProvider,aa)??0:H[2]=0}(0,p[q.type])(q,la=>{X.push(la[0],la[1],la[2])},H);aa=X.length/3;if(0===aa)throw L();L=Array(X.length);if(B.projectBuffer(X,q.spatialReference,0,L,g.spatialReference,
0,aa))for(q.hasZ&&(D.hasZ=!0),g=0;g<L.length;g+=3)q.hasZ?(H[0]=L[g],H[1]=L[g+1],H[2]=L[g+2]):(H[0]=L[g],H[1]=L[g+1]),N.expandWithVec3(D.boundingBox,H)}async function V(g,q,D,L){const X=await y.result(g.whenViewForGraphic(q));if(!1!==X.ok&&null!=X.value&&"whenGraphicBounds"in X.value)if(D=await y.result(X.value.whenGraphicBounds(q,{minDemResolution:D})),!1===D.ok)K(g,q.geometry,L);else{var {screenSpaceObjects:aa,boundingBox:la}=D.value;N.expandWithAABB(L.boundingBox,la);aa&&aa.forEach(qa=>{L.screenSpaceObjects.push(qa)});
isFinite(la[2])&&(L.hasZ=!0)}else K(g,q.geometry,L)}async function Z(g,q,D,L){if(Array.isArray(q)&&2===q.length){const X=q[0],aa=q[1];if("number"===typeof X&&"number"===typeof aa){E.x=X;E.y=aa;E.z=void 0;E.spatialReference=g.spatialReference?.isGeographic?g.spatialReference:ja.WGS84;K(g,E,L);return}}q&&"map"in q&&"function"===typeof q.map?await m.eachAlways(q.map(X=>Z(g,X,D,L))):q instanceof w?K(g,q,L):q instanceof u&&await V(g,q,D,L)}async function ha(g,q,D,L,X){if(null!=q.camera)return ca(g,q.camera,
X);X.scale=q.scale;X.rotation=q.rotation;X.targetGeometry=null!=q.targetGeometry?q.targetGeometry.clone():null;X.camera=null;null!=D.heading?X.rotation=P(D.heading):null!=D.rotation&&(X.rotation=D.rotation);q=da(g,D);null!=q&&(X.scale=q);L=new Q.AsyncContext(L);S(g,X,D.tilt,L);X.camera=await L.resolver.promise;return X}function ca(g,q,D){const L=T.project(q.position,g.spatialReference);if(null==L)return null;q=q.clone();q.fov=g.camera.fov;q.position=L;return n(g,null,q,D)}async function ia(g,q,D,
L,X,aa){if(null==D)throw new f("createfromcenter","invalid point");aa.targetGeometry=D.clone();var la=Y.cameraOnContentAlongViewDirection(g);if(q.position)return D=aa.targetGeometry,q=q.position,X=g.renderSpatialReference,B.projectPointToVector(q,oa,X),B.projectPointToVector(D,pa,X),aa.targetGeometry=new ba(D),L.position=new ba(q),G.subtract(na,pa,oa),Q.directionToHeadingTilt(g,oa,na,la.up,L),aa.scale=Q.distanceToScale(g,G.distance(oa,pa),aa.targetGeometry.latitude),aa.rotation=P(L.heading),aa.camera=
L,aa;if(q.zoomFactor){var qa=la.distance/q.zoomFactor;const sa=G.scale(H,la.viewForward,-qa);la.eye=G.add(H,la.center,sa);aa.scale=Q.distanceToScale(g,qa,D.latitude)}Q.internalToExternal(g,la,L);qa=d(L,q)?Q.OrientationMode.LOCKED:Q.OrientationMode.ADJUST;q.zoomFactor||(q=da(g,q),null==q?(B.projectPointToVector(D,H,g.renderSpatialReference),O.intersectsPoint(la.frustum,H)?aa.scale=Q.distanceToScale(g,G.distance(la.eye,H),D.latitude):aa.scale=Q.computeScale(g,la)):aa.scale=q,la=new Q.AsyncContext(X),
Q.fromCenterScale(g,aa.targetGeometry,aa.scale,L,qa,la),aa.camera=await la.resolver.promise);return aa}async function r(g,q,D,L,X){var aa=Y.cameraOnContentAlongViewDirection(g);aa=B.projectVectorToPoint(aa.center,g.renderSpatialReference,g.spatialReference);return ia(g,q,aa,D,L,X)}async function b(g,q,D,L,X,aa){aa.targetGeometry=D.clone();const la=Y.cameraOnContentAlongViewDirection(g);Q.internalToExternal(g,la,L);q=d(L,q)?Q.OrientationMode.LOCKED:Q.OrientationMode.ADJUST;X=new Q.AsyncContext(X);
Q.fromExtent(g,D,L.heading,L.tilt,q,X);aa.camera=await X.resolver.promise;return aa}async function e(g,q,D,L,X,aa,la,qa){qa.targetGeometry=D.clone();const sa=Y.cameraOnContentAlongViewDirection(g);var ra=0;null!=D.z?ra=D.z:g.basemapTerrain&&g.elevationProvider&&(ra=ka.getElevationAtPoint(g.elevationProvider,D));G.set(H,D.x,D.y,ra);B.computeTranslationToOriginAndRotation(g.spatialReference,H,J,g.renderSpatialReference);h.fromMat4(W,J);h.transpose(W,W);N.empty(fa);D=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],
[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(var ta=0;ta<D.length;ta++){const ua=D[ta];let va=L[ua[2]];isFinite(va)||(va=ra);G.set(H,L[ua[0]],L[ua[1]],va);B.projectVectorToVector(H,g.spatialReference,H,g.renderSpatialReference);N.expandWithVec3(fa,G.transformMat3(H,H,W))}L=N.width(fa);ra=N.height(fa);D=N.depth(fa);ta=1/Math.tan(sa.fovY/2);X=Math.max(.5*Math.sqrt(L*L+D*D)*Math.max(ta,1/Math.tan(sa.fovX/2))+.5*ra,.5*ra*ta+.5*Math.max(L,D))/X;Q.internalToExternal(g,sa,aa);q=d(aa,q)?Q.OrientationMode.LOCKED:
Q.OrientationMode.ADJUST;qa.scale=Q.distanceToScale(g,X,qa.targetGeometry.latitude);la=new Q.AsyncContext(la);Q.fromCenterScale(g,qa.targetGeometry,qa.scale,aa,q,la);qa.camera=await la.resolver.promise;return qa}function A(g){g&&null!=g.camera&&(g.rotation=P(g.camera.heading));return g}const H=C.create(),J=z.create(),W=v.create(),fa=N.create(),ma=M.create(),na=C.create(),oa=C.create(),pa=C.create(),ea={heading:0,tilt:0},E=new ba,p={point(g,q,D){D[0]=g.x;D[1]=g.y;null!=g.z&&(D[2]=g.z);q(D)},polygon(g,
q,D){const L=g.hasZ;for(let X=0;X<g.rings.length;X++){const aa=g.rings[X];for(let la=0;la<aa.length;la++)D[0]=aa[la][0],D[1]=aa[la][1],L&&(D[2]=aa[la][2]),q(D)}},polyline(g,q,D){const L=g.hasZ;for(let X=0;X<g.paths.length;X++){const aa=g.paths[X];for(let la=0;la<aa.length;la++)D[0]=aa[la][0],D[1]=aa[la][1],L&&(D[2]=aa[la][2]),q(D)}},multipoint(g,q,D){const L=g.points;g=g.hasZ;for(let X=0;X<L.length;X++)D[0]=L[X][0],D[1]=L[X][1],g&&(D[2]=L[X][2]),q(D)},extent(g,q,D){null!=g.zmin&&null!=g.zmax?(q(G.set(D,
g.xmin,g.ymin,g.zmin)),q(G.set(D,g.xmax,g.ymin,g.zmin)),q(G.set(D,g.xmin,g.ymax,g.zmin)),q(G.set(D,g.xmax,g.ymax,g.zmin)),q(G.set(D,g.xmin,g.ymin,g.zmax)),q(G.set(D,g.xmax,g.ymin,g.zmax)),q(G.set(D,g.xmin,g.ymax,g.zmax)),q(G.set(D,g.xmax,g.ymax,g.zmax))):(q(G.set(D,g.xmin,g.ymin,D[2])),q(G.set(D,g.xmax,g.ymin,D[2])),q(G.set(D,g.xmin,g.ymax,D[2])),q(G.set(D,g.xmax,g.ymax,D[2])))},mesh(g,q,D){if(g=g.vertexAttributes&&g.vertexAttributes.position)for(let L=0;L<g.length;L+=3)q(G.set(D,g[L],g[L+1],g[L+
2]))}};a.create=async function(g,q,D){if(q&&g.spatialReference){var L={target:void 0};"declaredClass"in q||Array.isArray(q)?L.target=q:(Object.assign(L,q),q.center&&!L.target&&(L.target=q.center));q=L}else q=null;if(!q)throw new f("viewpointutils-create:no-target","Missing target for creating viewpoint");L=new k({fov:g.camera.fov});const X=new x({camera:L});if(q.target instanceof x)return g=await ha(g,q.target,q,D,X),A(g);if(q.target instanceof k)return A(ca(g,q.target,X));var aa=null!=q.scale||null!=
q.zoom;if(q.target instanceof l){var la=q.target.xmin===q.target.xmax||q.target.ymin===q.target.ymax;return aa||la?A(await ia(g,q,q.target.center,L,D,X)):A(await b(g,q,q.target,L,D,X))}la={boundingBox:N.empty(),hasZ:!1,screenSpaceObjects:[]};var qa=aa?(qa=da(g,q))?R.getResolutionInMetersForScale(qa):void 0:void 0;await Z(g,q.target,qa,la);if(isFinite(la.boundingBox[0])){N.center(la.boundingBox,H);E.x=H[0];E.y=H[1];E.z=H[2];E.spatialReference=g.spatialReference;isFinite(E.z)&&la.hasZ?qa=N.isPoint(la.boundingBox):
(E.z=void 0,qa=M.isPoint(N.toRect(la.boundingBox,ma)));if(aa||qa)return A(await ia(g,q,E,L,D,X));aa=la.screenSpaceObjects;if(aa.length){qa=Number.NEGATIVE_INFINITY;for(let sa=0;sa<aa.length;sa++){const ra=aa[sa].screenSpaceBoundingRect;qa=Math.max(qa,Math.abs(ra[0]),Math.abs(ra[1]),Math.abs(ra[2]),Math.abs(ra[3]))}aa=.66-qa/Math.min(g.width,g.height)*2}else aa=.66;return A(await e(g,q,E,la.boundingBox,aa,L,D,X))}return q.position?(D=Y.cameraOnContentAlongViewDirection(g),G.copy(na,D.viewForward),
Q.directionToHeadingTilt(g,D.eye,na,D.up,ea),L.position=new ba(q.position),L.heading=null!=q.heading?q.heading:ea.heading,L.tilt=null!=q.tilt?q.tilt:ea.tilt,g=n(g,null,L,X),A(g)):A(await r(g,q,L,D,X))};a.fromCamera=function(g,q,D=null){null==D&&(D=new x);return n(g,null,q.clone(),D)};a.headingToRotation=P;a.rotationToHeading=I;a.toCamera=S;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(a,k){function c(d,n){d[0]=
n[0];d[1]=n[1];d[2]=n[2];d[3]=n[4];d[4]=n[5];d[5]=n[6];d[6]=n[8];d[7]=n[9];d[8]=n[10];return d}function u(d,n){d[0]=n[0];d[1]=n[1];d[2]=n[2];d[3]=n[3];d[4]=n[4];d[5]=n[5];d[6]=n[6];d[7]=n[7];d[8]=n[8];return d}function x(d,n,K,V,Z,ha,ca,ia,r,b){d[0]=n;d[1]=K;d[2]=V;d[3]=Z;d[4]=ha;d[5]=ca;d[6]=ia;d[7]=r;d[8]=b;return d}function y(d){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=1;d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d}function F(d,n){if(d===n){const K=n[1],V=n[2],Z=n[5];d[1]=n[3];d[2]=n[6];d[3]=K;d[5]=n[7];d[6]=
V;d[7]=Z}else d[0]=n[0],d[1]=n[3],d[2]=n[6],d[3]=n[1],d[4]=n[4],d[5]=n[7],d[6]=n[2],d[7]=n[5],d[8]=n[8];return d}function t(d,n){const K=n[0],V=n[1],Z=n[2],ha=n[3],ca=n[4],ia=n[5],r=n[6],b=n[7];n=n[8];const e=n*ca-ia*b,A=-n*ha+ia*r,H=b*ha-ca*r;let J=K*e+V*A+Z*H;if(!J)return null;J=1/J;d[0]=e*J;d[1]=(-n*V+Z*b)*J;d[2]=(ia*V-Z*ca)*J;d[3]=A*J;d[4]=(n*K-Z*r)*J;d[5]=(-ia*K+Z*ha)*J;d[6]=H*J;d[7]=(-b*K+V*r)*J;d[8]=(ca*K-V*ha)*J;return d}function f(d,n){const K=n[0],V=n[1],Z=n[2],ha=n[3],ca=n[4],ia=n[5],r=
n[6],b=n[7];n=n[8];d[0]=ca*n-ia*b;d[1]=Z*b-V*n;d[2]=V*ia-Z*ca;d[3]=ia*r-ha*n;d[4]=K*n-Z*r;d[5]=Z*ha-K*ia;d[6]=ha*b-ca*r;d[7]=V*r-K*b;d[8]=K*ca-V*ha;return d}function m(d){const n=d[3],K=d[4],V=d[5],Z=d[6],ha=d[7],ca=d[8];return d[0]*(ca*K-V*ha)+d[1]*(-ca*n+V*Z)+d[2]*(ha*n-K*Z)}function h(d,n,K){const V=n[0],Z=n[1],ha=n[2],ca=n[3],ia=n[4],r=n[5],b=n[6],e=n[7];n=n[8];const A=K[0],H=K[1],J=K[2],W=K[3],fa=K[4],ma=K[5],na=K[6],oa=K[7];K=K[8];d[0]=A*V+H*ca+J*b;d[1]=A*Z+H*ia+J*e;d[2]=A*ha+H*r+J*n;d[3]=W*
V+fa*ca+ma*b;d[4]=W*Z+fa*ia+ma*e;d[5]=W*ha+fa*r+ma*n;d[6]=na*V+oa*ca+K*b;d[7]=na*Z+oa*ia+K*e;d[8]=na*ha+oa*r+K*n;return d}function v(d,n,K){const V=n[0],Z=n[1],ha=n[2],ca=n[3],ia=n[4],r=n[5],b=n[6],e=n[7];n=n[8];const A=K[0];K=K[1];d[0]=V;d[1]=Z;d[2]=ha;d[3]=ca;d[4]=ia;d[5]=r;d[6]=A*V+K*ca+b;d[7]=A*Z+K*ia+e;d[8]=A*ha+K*r+n;return d}function z(d,n,K){const V=n[0],Z=n[1],ha=n[2],ca=n[3],ia=n[4],r=n[5],b=n[6],e=n[7];n=n[8];const A=Math.sin(K);K=Math.cos(K);d[0]=K*V+A*ca;d[1]=K*Z+A*ia;d[2]=K*ha+A*r;d[3]=
K*ca-A*V;d[4]=K*ia-A*Z;d[5]=K*r-A*ha;d[6]=b;d[7]=e;d[8]=n;return d}function G(d,n,K){const V=K[0],Z=K[1];K=K[2];d[0]=V*n[0];d[1]=V*n[1];d[2]=V*n[2];d[3]=Z*n[3];d[4]=Z*n[4];d[5]=Z*n[5];d[6]=K*n[6];d[7]=K*n[7];d[8]=K*n[8];return d}function C(d,n,K){const V=K[0];K=K[1];d[0]=V*n[0];d[1]=V*n[1];d[2]=V*n[2];d[3]=K*n[3];d[4]=K*n[4];d[5]=K*n[5];return d}function B(d,n){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=1;d[5]=0;d[6]=n[0];d[7]=n[1];d[8]=1;return d}function N(d,n){const K=Math.sin(n);n=Math.cos(n);d[0]=n;d[1]=
K;d[2]=0;d[3]=-K;d[4]=n;d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d}function M(d,n){d[0]=n[0];d[1]=0;d[2]=0;d[3]=0;d[4]=n[1];d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d}function O(d,n){d[0]=n[0];d[1]=n[1];d[2]=0;d[3]=n[2];d[4]=n[3];d[5]=0;d[6]=n[4];d[7]=n[5];d[8]=1;return d}function R(d,n){var K=n[0],V=n[1],Z=n[2];n=n[3];var ha=K+K,ca=V+V;const ia=Z+Z;K*=ha;const r=V*ha;V*=ca;const b=Z*ha,e=Z*ca;Z*=ia;ha*=n;ca*=n;n*=ia;d[0]=1-V-Z;d[3]=r-n;d[6]=b+ca;d[1]=r+n;d[4]=1-K-Z;d[7]=e-ha;d[2]=b-ca;d[5]=e+ha;d[8]=1-K-V;return d}
function T(d,n){const K=n[0],V=n[1],Z=n[2],ha=n[4],ca=n[5],ia=n[6],r=n[8],b=n[9];n=n[10];const e=n*ca-ia*b,A=-n*ha+ia*r,H=b*ha-ca*r;var J=K*e+V*A+Z*H;if(!J)return null;J=1/J;d[0]=e*J;d[1]=(-n*V+Z*b)*J;d[2]=(ia*V-Z*ca)*J;d[3]=A*J;d[4]=(n*K-Z*r)*J;d[5]=(-ia*K+Z*ha)*J;d[6]=H*J;d[7]=(-b*K+V*r)*J;d[8]=(ca*K-V*ha)*J;return d}function Y(d,n){const K=n[0],V=n[1],Z=n[2],ha=n[3],ca=n[4],ia=n[5],r=n[6],b=n[7];var e=n[8],A=n[9],H=n[10],J=n[11];const W=n[12],fa=n[13],ma=n[14];n=n[15];const na=K*ia-V*ca,oa=K*r-
Z*ca,pa=K*b-ha*ca,ea=V*r-Z*ia,E=V*b-ha*ia,p=Z*b-ha*r,g=e*fa-A*W,q=e*ma-H*W;e=e*n-J*W;const D=A*ma-H*fa;A=A*n-J*fa;H=H*n-J*ma;J=na*H-oa*A+pa*D+ea*e-E*q+p*g;if(!J)return null;J=1/J;d[0]=(ia*H-r*A+b*D)*J;d[1]=(r*e-ca*H-b*q)*J;d[2]=(ca*A-ia*e+b*g)*J;d[3]=(Z*A-V*H-ha*D)*J;d[4]=(K*H-Z*e+ha*q)*J;d[5]=(V*e-K*A-ha*g)*J;d[6]=(fa*p-ma*E+n*ea)*J;d[7]=(ma*pa-W*p-n*oa)*J;d[8]=(W*E-fa*pa+n*na)*J;return d}function Q(d,n,K){d[0]=2/n;d[1]=0;d[2]=0;d[3]=0;d[4]=-2/K;d[5]=0;d[6]=-1;d[7]=1;d[8]=1;return d}function ka(d){return"mat3("+
d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+")"}function ba(d){return Math.sqrt(d[0]**2+d[1]**2+d[2]**2+d[3]**2+d[4]**2+d[5]**2+d[6]**2+d[7]**2+d[8]**2)}function ja(d,n,K){d[0]=n[0]+K[0];d[1]=n[1]+K[1];d[2]=n[2]+K[2];d[3]=n[3]+K[3];d[4]=n[4]+K[4];d[5]=n[5]+K[5];d[6]=n[6]+K[6];d[7]=n[7]+K[7];d[8]=n[8]+K[8];return d}function l(d,n,K){d[0]=n[0]-K[0];d[1]=n[1]-K[1];d[2]=n[2]-K[2];d[3]=n[3]-K[3];d[4]=n[4]-K[4];d[5]=n[5]-K[5];d[6]=n[6]-K[6];d[7]=n[7]-K[7];d[8]=n[8]-
K[8];return d}function w(d,n,K){d[0]=n[0]*K;d[1]=n[1]*K;d[2]=n[2]*K;d[3]=n[3]*K;d[4]=n[4]*K;d[5]=n[5]*K;d[6]=n[6]*K;d[7]=n[7]*K;d[8]=n[8]*K;return d}function I(d,n,K,V){d[0]=n[0]+K[0]*V;d[1]=n[1]+K[1]*V;d[2]=n[2]+K[2]*V;d[3]=n[3]+K[3]*V;d[4]=n[4]+K[4]*V;d[5]=n[5]+K[5]*V;d[6]=n[6]+K[6]*V;d[7]=n[7]+K[7]*V;d[8]=n[8]+K[8]*V;return d}function P(d,n){return d[0]===n[0]&&d[1]===n[1]&&d[2]===n[2]&&d[3]===n[3]&&d[4]===n[4]&&d[5]===n[5]&&d[6]===n[6]&&d[7]===n[7]&&d[8]===n[8]}function U(d,n){const K=d[0],V=
d[1],Z=d[2],ha=d[3],ca=d[4],ia=d[5],r=d[6],b=d[7];d=d[8];const e=n[0],A=n[1],H=n[2],J=n[3],W=n[4],fa=n[5],ma=n[6],na=n[7];n=n[8];const oa=k.getEpsilon();return Math.abs(K-e)<=oa*Math.max(1,Math.abs(K),Math.abs(e))&&Math.abs(V-A)<=oa*Math.max(1,Math.abs(V),Math.abs(A))&&Math.abs(Z-H)<=oa*Math.max(1,Math.abs(Z),Math.abs(H))&&Math.abs(ha-J)<=oa*Math.max(1,Math.abs(ha),Math.abs(J))&&Math.abs(ca-W)<=oa*Math.max(1,Math.abs(ca),Math.abs(W))&&Math.abs(ia-fa)<=oa*Math.max(1,Math.abs(ia),Math.abs(fa))&&Math.abs(r-
ma)<=oa*Math.max(1,Math.abs(r),Math.abs(ma))&&Math.abs(b-na)<=oa*Math.max(1,Math.abs(b),Math.abs(na))&&Math.abs(d-n)<=oa*Math.max(1,Math.abs(d),Math.abs(n))}function S(d){const n=k.getEpsilon(),K=d[0],V=d[1],Z=d[2],ha=d[3],ca=d[4],ia=d[5],r=d[6],b=d[7];d=d[8];return Math.abs(1-(K*K+ha*ha+r*r))<=n&&Math.abs(1-(V*V+ca*ca+b*b))<=n&&Math.abs(1-(Z*Z+ia*ia+d*d))<=n}const da=Object.freeze(Object.defineProperty({__proto__:null,add:ja,adjoint:f,copy:u,determinant:m,equals:U,exactEquals:P,frob:ba,fromMat2d:O,
fromMat4:c,fromQuat:R,fromRotation:N,fromScaling:M,fromTranslation:B,identity:y,invert:t,isOrthoNormal:S,mul:h,multiply:h,multiplyScalar:w,multiplyScalarAndAdd:I,normalFromMat4:Y,normalFromMat4Legacy:T,projection:Q,rotate:z,scale:G,scaleByVec2:C,set:x,str:ka,sub:l,subtract:l,translate:v,transpose:F},Symbol.toStringTag,{value:"Module"}));a.add=ja;a.adjoint=f;a.copy=u;a.determinant=m;a.equals=U;a.exactEquals=P;a.frob=ba;a.fromMat2d=O;a.fromMat4=c;a.fromQuat=R;a.fromRotation=N;a.fromScaling=M;a.fromTranslation=
B;a.identity=y;a.invert=t;a.isOrthoNormal=S;a.mat3=da;a.mul=h;a.multiply=h;a.multiplyScalar=w;a.multiplyScalarAndAdd=I;a.normalFromMat4=Y;a.normalFromMat4Legacy=T;a.projection=Q;a.rotate=z;a.scale=G;a.scaleByVec2=C;a.set=x;a.str=ka;a.sub=l;a.subtract=l;a.translate=v;a.transpose=F})},"esri/chunks/mat3f64":function(){define(["exports"],function(a){function k(){return[1,0,0,0,1,0,0,0,1]}function c(F){return[F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8]]}function u(F,t,f,m,h,v,z,G,C){return[F,t,f,m,h,
v,z,G,C]}function x(F,t){return new Float64Array(F,t,9)}const y=Object.freeze(Object.defineProperty({__proto__:null,clone:c,create:k,createView:x,fromValues:u},Symbol.toStringTag,{value:"Module"}));a.clone=c;a.create=k;a.createView=x;a.fromValues=u;a.mat3f64=y})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(a,k,c,
u,x,y,F,t,f,m){function h(){return[x.create(),x.create(),x.create(),x.create(),x.create(),x.create(),x.create(),x.create()]}function v(M,O){f.fromPoints(O[a.PointIndex.FAR_BOTTOM_LEFT],O[a.PointIndex.NEAR_BOTTOM_LEFT],O[a.PointIndex.NEAR_TOP_LEFT],M[a.PlaneIndex.LEFT]);f.fromPoints(O[a.PointIndex.NEAR_BOTTOM_RIGHT],O[a.PointIndex.FAR_BOTTOM_RIGHT],O[a.PointIndex.FAR_TOP_RIGHT],M[a.PlaneIndex.RIGHT]);f.fromPoints(O[a.PointIndex.FAR_BOTTOM_LEFT],O[a.PointIndex.FAR_BOTTOM_RIGHT],O[a.PointIndex.NEAR_BOTTOM_RIGHT],
M[a.PlaneIndex.BOTTOM]);f.fromPoints(O[a.PointIndex.NEAR_TOP_LEFT],O[a.PointIndex.NEAR_TOP_RIGHT],O[a.PointIndex.FAR_TOP_RIGHT],M[a.PlaneIndex.TOP]);f.fromPoints(O[a.PointIndex.NEAR_BOTTOM_LEFT],O[a.PointIndex.NEAR_BOTTOM_RIGHT],O[a.PointIndex.NEAR_TOP_RIGHT],M[a.PlaneIndex.NEAR]);f.fromPoints(O[a.PointIndex.FAR_BOTTOM_RIGHT],O[a.PointIndex.FAR_BOTTOM_LEFT],O[a.PointIndex.FAR_TOP_LEFT],M[a.PlaneIndex.FAR])}function z(M,O){for(let R=0;6>R;R++)if(!f.clip(M[R],O))return!1;return!0}a.PlaneIndex=void 0;
(function(M){M[M.LEFT=0]="LEFT";M[M.RIGHT=1]="RIGHT";M[M.BOTTOM=2]="BOTTOM";M[M.TOP=3]="TOP";M[M.NEAR=4]="NEAR";M[M.FAR=5]="FAR"})(a.PlaneIndex||(a.PlaneIndex={}));a.PointIndex=void 0;(function(M){M[M.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT";M[M.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT";M[M.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT";M[M.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT";M[M.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT";M[M.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT";M[M.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT";M[M.FAR_TOP_LEFT=7]=
"FAR_TOP_LEFT"})(a.PointIndex||(a.PointIndex={}));const G={bottom:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.FAR_BOTTOM_LEFT],near:[a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.NEAR_TOP_LEFT],far:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_LEFT,a.PointIndex.FAR_TOP_LEFT,a.PointIndex.FAR_TOP_RIGHT],right:[a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_TOP_RIGHT,
a.PointIndex.NEAR_TOP_RIGHT],left:[a.PointIndex.FAR_BOTTOM_LEFT,a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.FAR_TOP_LEFT],top:[a.PointIndex.FAR_TOP_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.FAR_TOP_RIGHT]},C=[F.fromValues(-1,-1,-1,1),F.fromValues(1,-1,-1,1),F.fromValues(1,1,-1,1),F.fromValues(-1,1,-1,1),F.fromValues(-1,-1,1,1),F.fromValues(1,-1,1,1),F.fromValues(1,1,1,1),F.fromValues(-1,1,1,1)],B=new k.ObjectStack(t.create),N=h();a.NumPlanes=
6;a.NumPoints=8;a.computePlanes=v;a.copy=function(M,O){for(let R=0;6>R;R++)f.copy(M[R],O[R])};a.create=function(M){return M?[f.create(M[0]),f.create(M[1]),f.create(M[2]),f.create(M[3]),f.create(M[4]),f.create(M[5])]:[f.create(),f.create(),f.create(),f.create(),f.create(),f.create()]};a.createPoints=h;a.fromMatrix=function(M,O,R,T=N){M=c.multiply(m.sm4d.get(),O,M);c.invert(M,M);for(O=0;8>O;++O){const Y=y.transformMat4(m.sv4d.get(),C[O],M);u.set(T[O],Y[0]/Y[3],Y[1]/Y[3],Y[2]/Y[3])}v(R,T)};a.intersectClipRay=
function(M,O){for(let R=0;6>R;R++)if(!f.clipInfinite(M[R],O))return!1;return!0};a.intersectsLineSegment=function(M,O,R){return z(M,t.fromLineSegmentAndDirection(O,R,B.get()))};a.intersectsPoint=function(M,O){for(let R=0;6>R;R++)if(0<f.signedDistance(M[R],O))return!1;return!0};a.intersectsRay=function(M,O){return z(M,t.fromRay(O,B.get()))};a.intersectsSphere=function(M,O){for(let R=0;6>R;R++){const T=M[R];if(T[0]*O[0]+T[1]*O[1]+T[2]*O[2]+T[3]>=O[3])return!1}return!0};a.planePointIndices=G;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/core/ObjectStack":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./nextTick"],function(a,k,c){let u=function(){function x(F){this._allocator=F;this._items=[];this._itemsPtr=0;this._grow()}var y=x.prototype;y.get=function(){0===this._itemsPtr&&c.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]};y._reset=function(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),
this._itemsPtr+3072),this._items.length);this._itemsPtr=0};y._grow=function(){for(let F=0;F<Math.max(8,Math.min(this._items.length,1024));F++)this._items.push(this._allocator())};return k._createClass(x)}();a.ObjectStack=u;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","./ray"],function(a,k,c,u){function x(f){return f?{ray:u.create(f.ray),c0:f.c0,c1:f.c1}:{ray:u.create(),c0:0,
c1:Number.MAX_VALUE}}function y(f,m,h,v=x()){u.copy(f,v.ray);v.c0=m;v.c1=h;return v}function F(f,m,h){return c.add(h,f.ray.origin,c.scale(h,f.ray.direction,m))}const t=new k.ObjectStack(()=>x());a.copy=function(f,m=x()){return y(f.ray,f.c0,f.c1,m)};a.create=x;a.fromLineSegmentAndDirection=function(f,m,h=x()){const v=c.length(f.vector);u.fromValues(f.origin,m,h.ray);h.c0=0;h.c1=v;return h};a.fromRay=function(f,m=x()){u.copy(f,m.ray);m.c0=0;m.c1=Number.MAX_VALUE;return m};a.fromValues=y;a.getAt=F;a.getEnd=
function(f,m){return F(f,f.c1,m)};a.getStart=function(f,m){return F(f,f.c0,m)};a.wrap=function(f,m,h){const v=t.get();v.ray=f;v.c0=m;v.c1=h;return v};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(a,k,c,u,x,y){function F(h){if(h){var v=x.clone(h.origin);h=x.clone(h.direction);v={origin:v,direction:h}}else v=
x.create(),h=x.create(),v={origin:v,direction:h};return v}function t(h,v,z=F()){u.copy(z.origin,h);u.copy(z.direction,v);return z}function f(h,v){h=u.cross(y.sv3d.get(),u.normalize(y.sv3d.get(),h.direction),u.subtract(y.sv3d.get(),v,h.origin));return u.dot(h,h)}const m=new c.ObjectStack(()=>F());a.closestPoint=function(h,v,z){v=u.dot(h.direction,u.subtract(z,v,h.origin));u.add(z,h.origin,u.scale(z,h.direction,v));return z};a.copy=function(h,v=F()){return t(h.origin,h.direction,v)};a.create=F;a.distance=
function(h,v){return Math.sqrt(f(h,v))};a.distance2=f;a.equals=function(h,v){return k.equals(h.origin,v.origin)&&k.equals(h.direction,v.direction)};a.fromPoints=function(h,v,z=F()){u.copy(z.origin,h);u.subtract(z.direction,v,h);return z};a.fromValues=t;a.wrap=function(h,v){const z=m.get();z.origin=h;z.direction=v;return z};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(a,k){const c=
k.VectorStack.createVec2f64(),u=k.VectorStack.createVec3f64(),x=k.VectorStack.createVec4f64(),y=k.VectorStack.createMat3f64(),F=k.VectorStack.createMat4f64();k=k.VectorStack.createQuatf64();a.sm3d=y;a.sm4d=F;a.sq4d=k;a.sv2d=c;a.sv3d=u;a.sv4d=x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./ByteSizeUnit ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),
function(a,k,c,u,x,y,F,t,f,m){let h=function(){function z(C,B,N){this._itemByteSize=C;this._itemCreate=B;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(N/this._itemByteSize)}var G=z.prototype;G.get=function(){0===this._itemsPtr&&u.nextTick(()=>this._reset());const C=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=C;){const B=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let N=0;N<this._itemsPerBuffer;++N)this._items.push(this._itemCreate(B,
N*this._itemByteSize));this._buffers.push(B)}return this._items[this._itemsPtr++]};G._reset=function(){const C=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>C;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0};z.createVec2f64=function(C=v){return new z(16,t.createView,C)};z.createVec3f64=function(C=v){return new z(24,f.createView,C)};z.createVec4f64=function(C=v){return new z(32,m.createView,C)};z.createMat3f64=function(C=
v){return new z(72,x.createView,C)};z.createMat4f64=function(C=v){return new z(128,y.createView,C)};z.createQuatf64=function(C=v){return new z(32,F.createView,C)};k._createClass(z,[{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}]);return z}();const v=4*c.ByteSizeUnit.KILOBYTES;a.VectorStack=h;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(a){a.ByteSizeUnit=void 0;
var k=a.ByteSizeUnit||(a.ByteSizeUnit={});k[k.KILOBYTES=1024]="KILOBYTES";k[k.MEGABYTES=1048576]="MEGABYTES";k[k.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quatf64":function(){define(["exports"],function(a){function k(){return[0,0,0,1]}function c(t){return[t[0],t[1],t[2],t[3]]}function u(t,f,m,h){return[t,f,m,h]}function x(t,f){return new Float64Array(t,f,4)}const y=k(),F=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:y,
clone:c,create:k,createView:x,fromValues:u},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=y;a.clone=c;a.create=k;a.createView=x;a.fromValues=u;a.quatf64=F})},"esri/chunks/vec2f64":function(){define(["exports"],function(a){function k(){return[0,0]}function c(B){return[B[0],B[1]]}function u(B,N){return[B,N]}function x(B){const N=[0,0],M=Math.min(2,B.length);for(let O=0;O<M;++O)N[O]=B[O];return N}function y(B,N){return new Float64Array(B,N,2)}function F(){return[0,0]}function t(){return[1,1]}function f(){return[1,
0]}function m(){return[0,1]}const h=[0,0],v=[1,1],z=[1,0],G=[0,1],C=Object.freeze(Object.defineProperty({__proto__:null,ONES:v,UNIT_X:z,UNIT_Y:G,ZEROS:h,clone:c,create:k,createView:y,fromArray:x,fromValues:u,ones:t,unitX:f,unitY:m,zeros:F},Symbol.toStringTag,{value:"Module"}));a.ONES=v;a.UNIT_X=z;a.UNIT_Y=G;a.ZEROS=h;a.clone=c;a.create=k;a.createView=y;a.fromArray=x;a.fromValues=u;a.ones=t;a.unitX=f;a.unitY=m;a.vec2f64=C;a.zeros=F})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),
function(a,k,c,u,x,y,F,t){function f(l=Q){return[l[0],l[1],l[2],l[3]]}function m(l,w){return h(w[0],w[1],w[2],w[3],l)}function h(l,w,I,P,U=f()){U[0]=l;U[1]=w;U[2]=I;U[3]=P;return U}function v(l,w,I){var P=w[0]*w[0]+w[1]*w[1]+w[2]*w[2];P=1E-5<Math.abs(P-1)&&1E-12<P?1/Math.sqrt(P):1;I[0]=w[0]*P;I[1]=w[1]*P;I[2]=w[2]*P;I[3]=-(I[0]*l[0]+I[1]*l[1]+I[2]*l[2]);return I}function z(l,w,I,P=f()){var U=I[0]-w[0],S=I[1]-w[1],da=I[2]-w[2];I=l[0]-w[0];const d=l[1]-w[1],n=l[2]-w[2];w=S*n-da*d;da=da*I-U*n;U=U*d-
S*I;S=w*w+da*da+U*U;S=1E-5<Math.abs(S-1)&&1E-12<S?1/Math.sqrt(S):1;P[0]=w*S;P[1]=da*S;P[2]=U*S;P[3]=-(P[0]*l[0]+P[1]*l[1]+P[2]*l[2]);return P}function G(l,w,I,P,U){const S=l.length/3;if(3>S)return!1;c.set(M,l[3*I],l[3*I+1],l[3*I+2]);let da=P;for(var d=!1;da<S-1&&!d;)d=3*da,c.set(O,l[d],l[d+1],l[d+2]),da++,d=!c.exactEquals(M,O);if(!d)return!1;da=Math.max(da,U);for(d=!1;da<S&&!d;)d=3*da,c.set(R,l[d],l[d+1],l[d+2]),da++,c.subtract(T,M,O),c.normalize(T,T),c.subtract(Y,O,R),c.normalize(Y,Y),d=!c.exactEquals(M,
R)&&!c.exactEquals(O,R)&&.99619469809>Math.abs(c.dot(T,Y));if(!d)return 0===I&&1===P&&2===U?!1:G(l,w,0,1,2);z(M,O,R,w);return!0}function C(l,w,I){l=c.scale(F.sv3d.get(),l,c.dot(l,w));c.subtract(I,w,l);return I}function B(l,w){return c.dot(l,w)+l[3]}function N(l,w,I,P,U){const S=c.dot(l,I);if(0===S)return!1;l=-(c.dot(l,w)+l[3])/S;P&ka.CLAMP&&(l=k.clamp(l,0,1));if(!(P&ka.INFINITE_MIN)&&0>l||!(P&ka.INFINITE_MAX)&&1<l)return!1;c.add(U,w,c.scale(U,I,l));return!0}const M=u.create(),O=u.create(),R=u.create(),
T=u.create(),Y=u.create(),Q=[0,0,1,0];var ka;(function(l){l[l.NONE=0]="NONE";l[l.CLAMP=1]="CLAMP";l[l.INFINITE_MIN=4]="INFINITE_MIN";l[l.INFINITE_MAX=8]="INFINITE_MAX"})(ka||(ka={}));const ba=ka.INFINITE_MIN|ka.INFINITE_MAX,ja=ka.INFINITE_MAX;a.UP=Q;a.clip=function(l,w){const I=c.dot(l,w.ray.direction);l=-B(l,w.ray.origin);if(0>l&&0<=I)return!1;if(-1E-6<I&&1E-6>I)return 0<l;if((0>l||0>I)&&!(0>l&&0>I))return!0;l/=I;0<I?l<w.c1&&(w.c1=l):l>w.c0&&(w.c0=l);return w.c0<=w.c1};a.clipInfinite=function(l,
w){const I=c.dot(l,w.ray.direction);l=-B(l,w.ray.origin);if(-1E-6<I&&1E-6>I)return 0<l;l/=I;0<I?l<w.c1&&(w.c1=l):l>w.c0&&(w.c0=l);return w.c0<=w.c1};a.copy=m;a.create=f;a.distance=function(l,w){return Math.abs(B(l,w))};a.fromManyPoints=function(l,w){return G(l,w,0,1,2)};a.fromManyPointsSampleAt=G;a.fromNormalAndOffset=function(l,w,I){c.copy(I,l);I[3]=w;return I};a.fromPoints=z;a.fromPositionAndNormal=v;a.fromValues=h;a.fromVectorsAndPoint=function(l,w,I,P){c.cross(R,w,l);return v(I,R,P)};a.intersectLine=
function(l,w,I,P){I=c.subtract(F.sv3d.get(),I,w);return N(l,w,I,ba,P)};a.intersectLineSegment=function(l,w,I){return N(l,w.origin,w.vector,ka.NONE,I)};a.intersectLineSegmentClamp=function(l,w,I){return N(l,w.origin,w.vector,ka.CLAMP,I)};a.intersectRay=function(l,w,I){return null!=w?N(l,w.origin,w.direction,ja,I):!1};a.isPointInside=function(l,w){return 0<=B(l,w)};a.isPointOutside=function(l,w){return 0>B(l,w)};a.isSphereFullyInside=function(l,w){return 0<=B(l,x.getCenter(w))-w[3]};a.isSphereFullyOutside=
function(l,w){return 0>B(l,x.getCenter(w))+w[3]};a.negate=function(l,w){w[0]=-l[0];w[1]=-l[1];w[2]=-l[2];w[3]=-l[3];return w};a.normal=function(l){return l};a.projectPoint=function(l,w,I){const P=c.scale(F.sv3d.get(),l,-l[3]);w=c.subtract(F.sv3d.get(),w,P);l=C(l,w,F.sv3d.get());c.add(I,l,P);return I};a.projectPointLocal=function(l,w,I,P){var U=F.sv3d.get(),S=F.sv3d.get();t.tangentFrame(l,U,S);w=c.subtract(F.sv3d.get(),I,w);U=y.projectPointSignedLength(U,w);S=y.projectPointSignedLength(S,w);l=y.projectPointSignedLength(l,
w);return c.set(P,U,S,l)};a.projectVector=C;a.setOffsetFromPoint=function(l,w,I){w!==l&&m(l,w);l[3]=-c.dot(l,I);return l};a.signedDistance=B;a.wrap=function(l=Q[0],w=Q[1],I=Q[2],P=Q[3]){return h(l,w,I,P,F.sv4d.get())};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v,z){function G(){return f.create()}function C(r,b=G()){return t.copy(b,r)}function B(r,b){return f.fromValues(r[0],r[1],r[2],b)}function N(r){return r}function M(r){r[0]=r[1]=r[2]=r[3]=0}function O(r,b){r[0]=r[1]=r[2]=0;r[3]=b;return r}function R(r){return r[3]}function T(r){return r}function Y(r,b,e,A){return f.fromValues(r,b,e,A)}function Q(r,b,e){r!==e&&y.copy(e,r);e[3]=r[3]+b;return e}function ka(r,b,e){c.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported");
return r===e?e:C(r,e)}function ba(r,b,e){if(null==b)return!1;const {origin:A,direction:H}=b;var J=Z;J[0]=A[0]-r[0];J[1]=A[1]-r[1];J[2]=A[2]-r[2];b=H[0]*H[0]+H[1]*H[1]+H[2]*H[2];if(0===b)return!1;const W=2*(H[0]*J[0]+H[1]*J[1]+H[2]*J[2]);r=W*W-4*b*(J[0]*J[0]+J[1]*J[1]+J[2]*J[2]-r[3]*r[3]);if(0>r)return!1;J=Math.sqrt(r);r=(-W-J)/(2*b);b=(-W+J)/(2*b);if(0>r||b<r&&0<b)r=b;if(0>r)return!1;e&&(e[0]=A[0]+H[0]*r,e[1]=A[1]+H[1]*r,e[2]=A[2]+H[2]*r);return!0}function ja(r,b){return ba(r,b,null)}function l(r,
b,e){if(ba(r,b,e))return e;r=w(r,b,z.sv3d.get());y.add(e,b.origin,y.scale(z.sv3d.get(),b.direction,y.distance(b.origin,r)/y.length(b.direction)));return e}function w(r,b,e){const A=z.sv3d.get(),H=z.sm4d.get();y.cross(A,b.origin,b.direction);const J=r[3];y.cross(e,A,b.origin);y.scale(e,e,1/y.length(e)*J);r=S(r,b.origin);b=v.angle(b.origin,e);x.fromRotation(H,b+r,A);y.transformMat4(e,e,H);return e}function I(r,b,e){if(ba(r,b,e))return e;h.closestPoint(b,r,e);return P(r,e,e)}function P(r,b,e){b=y.subtract(z.sv3d.get(),
b,r);b=y.scale(z.sv3d.get(),b,r[3]/y.length(b));return y.add(e,b,r)}function U(r,b){b=y.subtract(z.sv3d.get(),b,r);b=y.squaredLength(b);return Math.sqrt(Math.abs(b-r[3]*r[3]))}function S(r,b){b=y.subtract(z.sv3d.get(),b,r);b=y.length(b);r=r[3];return u.acosClamped(r/(r+Math.abs(r-b)))}function da(r,b,e,A){r=y.subtract(ha,b,r);switch(e){case m.Axis.X:return e=u.cartesianToSpherical(r,ha)[2],y.set(A,-Math.sin(e),Math.cos(e),0);case m.Axis.Y:return r=u.cartesianToSpherical(r,ha),e=r[1],r=r[2],b=Math.sin(e),
y.set(A,-b*Math.cos(r),-b*Math.sin(r),Math.cos(e));case m.Axis.Z:return y.normalize(A,r)}}function d(r,b){b=y.subtract(ca,b,r);return y.length(b)-r[3]}function n(r,b,e,A){const H=d(r,b);r=da(r,b,m.Axis.Z,ca);e=y.scale(ca,r,e-H);return y.add(A,b,e)}function K(r,b){b=y.squaredDistance(r,b);r=r[3];return b<=r*r}function V(r,b,e=G()){const A=y.distance(r,b),H=r[3],J=b[3];if(A+J<H)return t.copy(e,r),e;if(A+H<J)return t.copy(e,b),e;y.lerp(e,r,b,(A+J-H)/(2*A));e[3]=(A+H+J)/2;return e}k=G();const Z=F.create(),
ha=F.create(),ca=F.create();F=G();const ia=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:k,altitudeAt:d,angleToSilhouette:S,axisAt:da,clear:M,closestPoint:I,closestPointOnSilhouette:w,containsPoint:K,copy:C,create:G,distanceToSilhouette:U,elevate:Q,fromCenterAndRadius:B,fromRadius:O,fromValues:Y,getCenter:T,getRadius:R,intersectRay:ba,intersectRayClosestSilhouette:l,intersectsRay:ja,projectPoint:P,setAltitudeAt:n,setExtent:ka,tmpSphere:F,union:V,wrap:N},Symbol.toStringTag,{value:"Module"}));
a.NullSphere=k;a.altitudeAt=d;a.angleToSilhouette=S;a.axisAt=da;a.clear=M;a.closestPoint=I;a.closestPointOnSilhouette=w;a.containsPoint=K;a.copy=C;a.create=G;a.distanceToSilhouette=U;a.elevate=Q;a.fromCenterAndRadius=B;a.fromRadius=O;a.fromValues=Y;a.getCenter=T;a.getRadius=R;a.intersectRay=ba;a.intersectRayClosestSilhouette=l;a.intersectsRay=ja;a.projectPoint=P;a.setAltitudeAt=n;a.setExtent=ka;a.sphere=ia;a.tmpSphere=F;a.union=V;a.wrap=N})},"esri/geometry/support/Axis":function(){define(["exports"],
function(a){a.Axis=void 0;var k=a.Axis||(a.Axis={});k[k.X=0]="X";k[k.Y=1]="Y";k[k.Z=2]="Z";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(a,k,c,u){const x=u.create(),y=u.create();a.angle=function(F,t){F=c.dot(F,t)/(c.length(F)*c.length(t));return-k.acosClamped(F)};a.angleAroundAxis=function(F,t,f){c.normalize(x,F);c.normalize(y,t);F=c.dot(x,y);F=
k.acosClamped(F);t=c.cross(x,x,y);return 0>c.dot(t,f)?2*Math.PI-F:F};a.projectPoint=function(F,t,f){t=c.dot(F,t)/c.dot(F,F);return c.scale(f,F,t)};a.projectPointSignedLength=function(F,t){return c.dot(F,t)/c.length(F)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/unitUtils"],function(a,k){function c(u,x){x=k.getMetersPerUnitForSR(x);return u/(x*k.inchesPerMeter*96)}a.getExtentForScale=function(u,x){const y=
u.extent;u=u.width-(u.padding?u.padding.left+u.padding.right:0);x=c(x,y.spatialReference);return y.clone().expand(x*u/y.width)};a.getResolutionForScale=c;a.getResolutionInMetersForScale=function(u){return u/(96*k.inchesPerMeter)};a.getScale=function(u,x){x=x||u.extent;u=u.width;const y=k.getMetersPerUnitForSR(x&&x.spatialReference);return x&&u?x.width/u*y*k.inchesPerMeter*96:0};a.getScaleForResolution=function(u,x){x=k.getMetersPerUnitForSR(x);return u*x*k.inchesPerMeter*96};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/camera/intersectionUtils":function(){define("exports ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/ellipsoidUtils ../../../geometry/support/aaBoundingRect ../webgl-engine/lib/Intersector".split(" "),function(a,k,c,u,x,y){function F(G,C){return G.elevationProvider?G.elevationProvider.getElevation(C[0],C[1],C[2],G.renderCoordsHelper.spatialReference,"ground")??0:0}function t(G,C,B){if(!G.state.isGlobal||!G.stateManager.constraintsManager)return!1;
const N=F(G,C);({far:G}=G.stateManager.constraintsManager.nearFarHeuristic.compute(C,B,G.renderDataExtent,N,z));G*=G;return k.squaredDistance(C,B)>G}const f={},m=c.create(),h=c.create(),v=c.create(),z={near:0,far:0};a.cameraOnContentAlongViewDirection=function(G,C,B,N){const M=G.state.camera.clone();C&&B&&N&&(M.eye=C,M.center=B,M.up=N);C=M.ray;B=f[G.viewingMode];B||(B=y.newIntersector(G.state.viewingMode),B.options.backfacesTerrain=!G.state.isGlobal,B.options.invisibleTerrain=!0,f[G.viewingMode]=
B);({isGlobal:N}=G.state);G.sceneIntersectionHelper.intersectRay(C,B,h)&&!t(G,C.origin,h)?C=!0:!G.renderCoordsHelper.intersectManifold(C,0,h)||t(G,C.origin,h)?N?(B=u.getReferenceEllipsoid(G.spatialReference).radius,B=k.dot(C.origin,C.origin)-B*B,k.scale(h,C.direction,(0<B?Math.sqrt(B)/3:1)/k.length(C.direction)),k.add(h,h,C.origin),C=!0):C=!1:C=!0;C||k.copy(h,M.center);B=G.state.constraints;N=B.minimumPoiDistance;k.squaredDistance(M.eye,h)<N&&(C=B.collision.enabled,k.copy(v,M.viewForward),k.scale(v,
v,N),C?M.eye=k.subtract(m,h,v):k.add(h,M.eye,v),G=G.renderCoordsHelper,N=G.getAltitude(M.eye),B=B.collision.elevationMargin,C&&N<B&&(k.subtract(v,h,M.eye),M.eye=G.setAltitude(m,B,M.eye),k.add(h,M.eye,v)));M.center=h;return M};a.eyeWithinExtent=function(G,C,B,N){return null!=G.renderCoordsHelper.fromRenderCoords(C.eye,m,N)&&x.containsPoint(B,m)};a.surfaceElevationBelowRenderLocation=F;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Intersector":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/support/ray ../../../ViewingMode ./IntersectorInterfaces ./IntersectorTarget ./intersectorUtils ./verticalOffsetUtils".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v,z,G){let C=function(){function T(Q){this.options=new h.IntersectorOptions;this._results=new B;this.transform=new G.IntersectorTransform;this.tolerance=1E-5;this.verticalOffset=null;this._ray=f.create();this._rayEnd=y.create();this._rayBeginTransformed=y.create();this._rayEndTransformed=y.create();this.viewingMode=null==Q?m.ViewingMode.Global:Q}var Y=T.prototype;Y.reset=function(Q,ka,ba){this.resetWithRay(f.fromPoints(Q,ka,this._ray),ba)};Y.resetWithRay=function(Q,
ka){this.camera=ka;Q!==this._ray&&f.copy(Q,this._ray);0!==this.options.verticalOffset?this.viewingMode===m.ViewingMode.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null;x.add(this._rayEnd,this._ray.origin,this._ray.direction);this._results.init(this._ray)};Y.intersect=function(Q=null,ka,ba,ja,l){this.point=ka;this.filterPredicate=ja;this.tolerance=null==ba?1E-5:ba;ka=G.getVerticalOffsetObject3D(this.verticalOffset);if(Q&&
0<Q.length){const w=l?I=>{l(I)&&this.intersectObject(I)}:I=>{this.intersectObject(I)};for(const I of Q)Q=I.getSpatialQueryAccelerator&&I.getSpatialQueryAccelerator(),null!=Q?(null!=ka?Q.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,w,ka):Q.forEachAlongRay(this._ray.origin,this._ray.direction,w),this.options.selectionMode&&this.options.hud&&Q.forEachDegenerateObject(w)):I.objects.forAll(P=>w(P))}this.sortResults()};Y.intersectObject=function(Q){const ka=Q.geometries;if(ka){var ba=
Q.shaderTransformation,ja=G.getVerticalOffsetObject3D(this.verticalOffset);for(const l of ka){if(!l.visible)continue;const {material:w,id:I}=l;this.transform.setAndInvalidateLazyTransforms(ba,l.shaderTransformation);x.transformMat4(this._rayBeginTransformed,this.rayBegin,this.transform.inverse);x.transformMat4(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const P=this.transform.transform;null!=ja&&(ja.objectTransform=this.transform);w.intersect(l,this.transform.transform,this,this._rayBeginTransformed,
this._rayEndTransformed,(U,S,da,d,n,K)=>{if(0<=U&&(null==this.filterPredicate||this.filterPredicate(this._ray.origin,this._rayEnd,U))){var V=d?this._results.hud:this._results,Z=d?ha=>{const ca=new v.HudTarget(Q,I,da,K);ha.set(h.IntersectorType.HUD,ca,U,S,u.IDENTITY,n)}:ha=>ha.set(h.IntersectorType.OBJECT,{object:Q,geometryId:I,triangleNr:da},U,S,P,n);(null==V.min.drapedLayerOrder||n>=V.min.drapedLayerOrder)&&(null==V.min.dist||U<V.min.dist)&&Z(V.min);this.options.store!==h.StoreResults.MIN&&(null==
V.max.drapedLayerOrder||n<V.max.drapedLayerOrder)&&(null==V.max.dist||U>V.max.dist)&&Z(V.max);this.options.store===h.StoreResults.ALL&&(d?(d=new M(this._ray),Z(d),this._results.hud.all.push(d)):(d=new N(this._ray),Z(d),this._results.all.push(d)))}})}}};Y.sortResults=function(Q=this._results.all){Q.sort((ka,ba)=>ka.dist!==ba.dist?(ka.dist??0)-(ba.dist??0):ka.drapedLayerOrder!==ba.drapedLayerOrder?(ka.drapedLayerOrder??Number.MAX_VALUE)-(ba.drapedLayerOrder??Number.MAX_VALUE):(ba.drapedLayerGraphicOrder??
Number.MIN_VALUE)-(ka.drapedLayerGraphicOrder??Number.MIN_VALUE))};k._createClass(T,[{key:"results",get:function(){return this._results}},{key:"ray",get:function(){return this._ray}},{key:"rayBegin",get:function(){return this._ray.origin}},{key:"rayEnd",get:function(){return this._rayEnd}}]);return T}(),B=function(){function T(){this.min=new N(f.create());this.max=new N(f.create());this.hud={min:new M(f.create()),max:new M(f.create()),all:[]};this.ground=new N(f.create());this.all=[]}T.prototype.init=
function(Y){this.min.init(Y);this.max.init(Y);this.ground.init(Y);this.all.length=0;this.hud.min.init(Y);this.hud.max.init(Y);this.hud.all.length=0};return k._createClass(T)}(),N=function(){function T(Q){this.intersector=h.IntersectorType.OBJECT;this.normal=y.create();this.transformation=u.create();this._ray=f.create();this.init(Q)}var Y=T.prototype;Y.getIntersectionPoint=function(Q){if(!z.isValidIntersectorResult(this))return!1;x.scale(O,this.ray.direction,this.dist);x.add(Q,this.ray.origin,O);return!0};
Y.getTransformedNormal=function(Q){x.copy(R,this.normal);R[3]=0;F.transformMat4(R,R,this.transformation);x.copy(Q,R);return x.normalize(Q,Q)};Y.init=function(Q){this.drapedLayerGraphicOrder=this.drapedLayerOrder=this.target=this.dist=null;this.intersector=h.IntersectorType.OBJECT;f.copy(Q,this._ray)};Y.set=function(Q,ka,ba,ja,l,w,I){this.intersector=Q;this.dist=ba;x.copy(this.normal,ja??y.UNIT_Z);c.copy(this.transformation,l??u.IDENTITY);this.target=ka;this.drapedLayerOrder=w;this.drapedLayerGraphicOrder=
I};Y.copy=function(Q){f.copy(Q.ray,this._ray);this.intersector=Q.intersector;this.dist=Q.dist;this.target=Q.target;this.drapedLayerOrder=Q.drapedLayerOrder;this.drapedLayerGraphicOrder=Q.drapedLayerGraphicOrder;x.copy(this.normal,Q.normal);c.copy(this.transformation,Q.transformation)};k._createClass(T,[{key:"ray",get:function(){return this._ray}},{key:"distanceInRenderSpace",get:function(){return null!=this.dist?(x.scale(O,this.ray.direction,this.dist),x.length(O)):null}}]);return T}(),M=function(T){function Y(){var Q=
T.apply(this,arguments)||this;Q.intersector=h.IntersectorType.HUD;return Q}k._inherits(Y,T);return k._createClass(Y)}(N);const O=y.create(),R=t.create();a.DEFAULT_TOLERANCE=1E-5;a.newIntersector=function(T){return new C(T)};a.newIntersectorResult=function(T){return new N(T)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/IntersectorInterfaces":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(a,k){a.IntersectorType=
void 0;(function(c){c[c.OBJECT=0]="OBJECT";c[c.HUD=1]="HUD";c[c.TERRAIN=2]="TERRAIN";c[c.OVERLAY=3]="OVERLAY";c[c.I3S=4]="I3S";c[c.PCL=5]="PCL";c[c.LOD=6]="LOD";c[c.VOXEL=7]="VOXEL"})(a.IntersectorType||(a.IntersectorType={}));k=k._createClass(function(){this.verticalOffset=0;this.selectionMode=!1;this.selectOpaqueTerrainOnly=this.hud=!0;this.invisibleTerrain=!1;this.backfacesTerrain=!0;this.isFiltered=!1;this.filteredLayerUids=[];this.store=a.StoreResults.ALL});a.StoreResults=void 0;(function(c){c[c.MIN=
0]="MIN";c[c.MINMAX=1]="MINMAX";c[c.ALL=2]="ALL"})(a.StoreResults||(a.StoreResults={}));a.IntersectorOptions=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/IntersectorTarget":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3f64"],function(a,k,c){let u=k._createClass(function(f,m,h){this.object=f;this.geometryId=m;this.triangleNr=h}),x=function(f){function m(h,v,z,G){h=f.call(this,h,v,z)||this;h.center=
null!=G?c.clone(G):null;return h}k._inherits(m,f);return k._createClass(m)}(u),y=function(f){function m(){return f.apply(this,arguments)||this}k._inherits(m,f);return k._createClass(m)}(x),F=k._createClass(function(f){this.layerUid=f}),t=function(f){function m(h,v){h=f.call(this,h)||this;h.graphicUid=v;return h}k._inherits(m,f);return k._createClass(m)}(F);a.Graphic3DTarget=t;a.HudTarget=x;a.LayerTarget=F;a.ObjectTarget=u;a.ValidHudTarget=y;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/lib/intersectorUtils":function(){define(["exports","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../chunks/boundedPlane","./IntersectorInterfaces"],function(a,k,c,u,x){function y(t){return null!=t&&null!=t.dist}const F=c.create();a.isHudIntersectorResult=function(t){return y(t)&&t.intersector===x.IntersectorType.HUD&&!!t.target&&"center"in t.target&&null!=t.target.center};a.isObjectIntersectorResult=function(t){return y(t)&&t.intersector===x.IntersectorType.OBJECT&&
!!t.target};a.isValidIntersectorResult=y;a.sliceFilterPredicate=function(t){return(f,m,h)=>{k.lerp(F,f,m,h);return!u.extrusionContainsPoint(t,F)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/boundedPlane":function(){define("exports ./_rollupPluginBabelHelpers ../core/has ../core/Logger ../core/mathUtils ../core/ObjectStack ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/support/Axis ../geometry/support/lineSegment ../geometry/support/plane ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v,z,G,C,B){function N(p=W){return{plane:z.create(p.plane),origin:m.clone(p.origin),basis1:m.clone(p.basis1),basis2:m.clone(p.basis2)}}function M(p,g,q){const D=oa.get();D.origin=p;D.basis1=g;D.basis2=q;D.plane=z.wrap(0,0,0,0);Y(D);return D}function O(p,g=N()){return T(p.origin,p.basis1,p.basis2,g)}function R(p,g){f.copy(g.origin,p.origin);f.copy(g.basis1,p.basis1);f.copy(g.basis2,p.basis2);z.copy(g.plane,p.plane)}function T(p,g,q,D=N()){f.copy(D.origin,p);f.copy(D.basis1,
g);f.copy(D.basis2,q);Y(D);1E-6<Math.abs(f.dot(D.basis1,D.basis2)/(f.length(D.basis1)*f.length(D.basis2)))&&J.warn("fromValues()","Provided basis vectors are not perpendicular");1E-6<Math.abs(f.dot(D.basis1,r(D)))&&J.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-f.dot(r(D),D.origin)-D.plane[3])&&J.warn("fromValues()","Plane offset is not consistent with plane origin");return D}function Y(p){z.fromVectorsAndPoint(p.basis2,p.basis1,p.origin,p.plane)}function Q(p,
g,q){p!==q&&O(p,q);p=f.scale(B.sv3d.get(),r(p),g);f.add(q.origin,q.origin,p);q.plane[3]-=g;return q}function ka(p,g,q){ba(g,q);Q(q,V(p,p.origin),q);return q}function ba(p,g=N()){const q=(p[2]-p[0])/2,D=(p[3]-p[1])/2;f.set(g.origin,p[0]+q,p[1]+D,0);f.set(g.basis1,q,0,0);f.set(g.basis2,0,D,0);z.fromValues(0,0,1,0,g.plane);return g}function ja(p,g,q){return z.intersectRay(p.plane,g,q)?b(p,q):!1}function l(p,g,q){if(ja(p,g,q))return q;p=w(p,g,B.sv3d.get());f.add(q,g.origin,f.scale(B.sv3d.get(),g.direction,
f.distance(g.origin,p)/f.length(g.direction)));return q}function w(p,g,q){const D=fa.get();var L=fa.get();H(p,g,D,L);L=Number.POSITIVE_INFINITY;for(const aa of pa){var X=A(p,aa,ma.get());const la=B.sv3d.get();z.intersectLineSegment(D,X,la)&&(X=f.direction(B.sv3d.get(),g.origin,la),X=Math.abs(x.acosClamped(f.dot(g.direction,X))),X<L&&(L=X,f.copy(q,la)))}return L===Number.POSITIVE_INFINITY?I(p,g,q):q}function I(p,g,q){if(ja(p,g,q))return q;const D=fa.get(),L=fa.get();H(p,g,D,L);let X=Number.POSITIVE_INFINITY;
for(const la of pa){var aa=A(p,la,ma.get());const qa=B.sv3d.get();z.intersectLineSegmentClamp(D,aa,qa)&&(aa=G.distance2(g,qa),z.isPointInside(L,qa)&&aa<X&&(X=aa,f.copy(q,qa)))}S(p,g.origin)<X&&P(p,g.origin,q);return q}function P(p,g,q){var D=z.projectPoint(p.plane,g,B.sv3d.get());g=v.projectPointClamp(e(p,p.basis1),D,-1,1,B.sv3d.get());D=v.projectPointClamp(e(p,p.basis2),D,-1,1,B.sv3d.get());f.subtract(q,f.add(B.sv3d.get(),g,D),p.origin);return q}function U(p,g,q){const {origin:D,basis1:L,basis2:X}=
p,aa=f.subtract(B.sv3d.get(),g,D);g=C.projectPointSignedLength(L,aa);const la=C.projectPointSignedLength(X,aa);p=C.projectPointSignedLength(r(p),aa);return f.set(q,g,la,p)}function S(p,g){g=U(p,g,B.sv3d.get());const {basis1:q,basis2:D}=p;p=f.length(q);var L=f.length(D);p=Math.max(Math.abs(g[0])-p,0);L=Math.max(Math.abs(g[1])-L,0);g=g[2];return p*p+L*L+g*g}function da(p,g){return Math.sqrt(S(p,g))}function d(p,g){let q=Number.NEGATIVE_INFINITY;for(const L of pa){var D=A(p,L,ma.get());D=v.distance2(D,
g);D>q&&(q=D)}return Math.sqrt(q)}function n(p,g){return z.isPointInside(p.plane,g)&&b(p,g)}function K(p,g,q,D){switch(q){case h.Axis.X:f.copy(D,p.basis1);f.normalize(D,D);break;case h.Axis.Y:f.copy(D,p.basis2);f.normalize(D,D);break;case h.Axis.Z:f.copy(D,r(p))}return D}function V(p,g){const q=-p.plane[3];return C.projectPointSignedLength(r(p),g)-q}function Z(p,g,q,D){const L=V(p,g);p=f.scale(na,r(p),q-L);f.add(D,g,p);return D}function ha(p,g){return f.exactEquals(p.basis1,g.basis1)&&f.exactEquals(p.basis2,
g.basis2)&&f.exactEquals(p.origin,g.origin)}function ca(p,g,q){p!==q&&O(p,q);F.invert(ea,g);F.transpose(ea,ea);f.transformMat4(q.basis1,p.basis1,ea);f.transformMat4(q.basis2,p.basis2,ea);f.transformMat4(z.normal(q.plane),z.normal(p.plane),ea);f.transformMat4(q.origin,p.origin,g);z.setOffsetFromPoint(q.plane,q.plane,q.origin);return q}function ia(p,g,q,D){p!==D&&O(p,D);F.fromRotation(E,g,q);f.transformMat4(D.basis1,p.basis1,E);f.transformMat4(D.basis2,p.basis2,E);Y(D);return D}function r(p){return z.normal(p.plane)}
function b(p,g){const q=f.subtract(B.sv3d.get(),g,p.origin);g=f.squaredLength(p.basis1);const D=f.squaredLength(p.basis2),L=f.dot(p.basis1,q);p=f.dot(p.basis2,q);return 0>-L-g&&0>L-g&&0>-p-D&&0>p-D}function e(p,g){const q=ma.get();f.copy(q.origin,p.origin);f.copy(q.vector,g);return q}function A(p,g,q){const {basis1:D,basis2:L,origin:X}=p;p=f.scale(B.sv3d.get(),D,g.origin[0]);const aa=f.scale(B.sv3d.get(),L,g.origin[1]);f.add(q.origin,p,aa);f.add(q.origin,q.origin,X);p=f.scale(B.sv3d.get(),D,g.direction[0]);
g=f.scale(B.sv3d.get(),L,g.direction[1]);f.scale(q.vector,f.add(p,p,g),2);return q}function H(p,g,q,D){p=r(p);z.fromVectorsAndPoint(p,g.direction,g.origin,q);z.fromVectorsAndPoint(z.normal(q),p,g.origin,D)}const J=u.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");k=k._createClass(function(){this.plane=z.create();this.origin=m.create();this.basis1=m.create();this.basis2=m.create()});const W={plane:z.create(),origin:m.fromValues(0,0,0),basis1:m.fromValues(1,0,0),basis2:m.fromValues(0,
1,0)},fa=new y.ObjectStack(z.create),ma=new y.ObjectStack(v.create),na=m.create(),oa=new y.ObjectStack(()=>N()),pa=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],ea=t.create(),E=t.create();y=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:k,UP:W,altitudeAt:V,axisAt:K,closestPoint:I,closestPointOnSilhouette:w,copy:O,copyWithoutVerify:R,create:N,distance:da,distance2:S,distanceToSilhouette:d,elevate:Q,
equals:ha,extrusionContainsPoint:n,fromAABoundingRect:ba,fromValues:T,intersectRay:ja,intersectRayClosestSilhouette:l,normal:r,projectPoint:P,projectPointLocal:U,rotate:ia,setAltitudeAt:Z,setExtent:ka,transform:ca,updateUnboundedPlane:Y,wrap:M},Symbol.toStringTag,{value:"Module"}));a.BoundedPlaneClass=k;a.UP=W;a.altitudeAt=V;a.axisAt=K;a.boundedPlane=y;a.closestPoint=I;a.closestPointOnSilhouette=w;a.copy=O;a.copyWithoutVerify=R;a.create=N;a.distance=da;a.distance2=S;a.distanceToSilhouette=d;a.elevate=
Q;a.equals=ha;a.extrusionContainsPoint=n;a.fromAABoundingRect=ba;a.fromValues=T;a.intersectRay=ja;a.intersectRayClosestSilhouette=l;a.normal=r;a.projectPoint=P;a.projectPointLocal=U;a.rotate=ia;a.setAltitudeAt=Z;a.setExtent=ka;a.transform=ca;a.updateUnboundedPlane=Y;a.wrap=M})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(a,k,c,u,x,y){function F(C){return C?{origin:x.clone(C.origin),
vector:x.clone(C.vector)}:{origin:x.create(),vector:x.create()}}function t(C,B){const N=G.get();N.origin=C;N.vector=B;return N}function f(C,B,N=F()){u.copy(N.origin,C);u.copy(N.vector,B);return N}function m(C,B){B=u.subtract(y.sv3d.get(),B,C.origin);var N=u.dot(C.vector,B);const M=u.dot(C.vector,C.vector);N=k.clamp(N/M,0,1);C=u.subtract(y.sv3d.get(),u.scale(y.sv3d.get(),C.vector,N),B);return u.dot(C,C)}function h(C,B,N,M,O){const {vector:R,origin:T}=C;B=u.subtract(y.sv3d.get(),B,T);B=u.dot(R,B)/u.squaredLength(R);
u.scale(O,R,k.clamp(B,N,M));return u.add(O,O,C.origin)}function v(C,B,N,M){const O=C.origin;var R=u.add(y.sv3d.get(),O,C.vector);C=B.origin;var T=u.add(y.sv3d.get(),C,B.vector),Y=y.sv3d.get();B=y.sv3d.get();Y[0]=O[0]-C[0];Y[1]=O[1]-C[1];Y[2]=O[2]-C[2];B[0]=T[0]-C[0];B[1]=T[1]-C[1];B[2]=T[2]-C[2];if(1E-6>Math.abs(B[0])&&1E-6>Math.abs(B[1])&&1E-6>Math.abs(B[2]))return!1;T=y.sv3d.get();T[0]=R[0]-O[0];T[1]=R[1]-O[1];T[2]=R[2]-O[2];if(1E-6>Math.abs(T[0])&&1E-6>Math.abs(T[1])&&1E-6>Math.abs(T[2]))return!1;
R=Y[0]*B[0]+Y[1]*B[1]+Y[2]*B[2];var Q=B[0]*T[0]+B[1]*T[1]+B[2]*T[2];const ka=B[0]*B[0]+B[1]*B[1]+B[2]*B[2],ba=(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])*ka-Q*Q;if(1E-6>Math.abs(ba))return!1;Y=(R*Q-(Y[0]*T[0]+Y[1]*T[1]+Y[2]*T[2])*ka)/ba;R=(R+Q*Y)/ka;N&&(Y=k.clamp(Y,0,1),R=k.clamp(R,0,1));N=y.sv3d.get();Q=y.sv3d.get();N[0]=O[0]+Y*T[0];N[1]=O[1]+Y*T[1];N[2]=O[2]+Y*T[2];Q[0]=C[0]+R*B[0];Q[1]=C[1]+R*B[1];Q[2]=C[2]+R*B[2];M.tA=Y;M.tB=R;M.pA=N;M.pB=Q;M.distance2=u.squaredDistance(N,Q);return!0}const z={tA:0,tB:0,pA:x.create(),
pB:x.create(),distance2:0},G=new c.ObjectStack(()=>F());a.closestLineSegmentDistance2=function(C,B){return v(C,B,!0,z)?z.distance2:null};a.closestLineSegmentPoint=function(C,B,N){return v(C,B,!0,z)?(u.copy(N,z.pA),!0):!1};a.closestRayDistance2=function(C,B){if(v(C,t(B.origin,B.direction),!1,z)){const {tA:N,pB:M,distance2:O}=z;if(0<=N&&1>=N)return O;if(0>N)return u.squaredDistance(C.origin,M);if(1<N)return u.squaredDistance(u.add(y.sv3d.get(),C.origin,C.vector),M)}return null};a.copy=function(C,B=
F()){return f(C.origin,C.vector,B)};a.create=F;a.distance=function(C,B){return Math.sqrt(m(C,B))};a.distance2=m;a.fromPoints=function(C,B,N=F()){u.copy(N.origin,C);u.subtract(N.vector,B,C);return N};a.fromValues=f;a.pointAt=function(C,B,N){return u.add(N,C.origin,u.scale(N,C.vector,B))};a.projectPoint=function(C,B,N){return h(C,B,0,1,N)};a.projectPointClamp=h;a.wrap=t;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/verticalOffsetUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/mat3 ../../../../chunks/mat3f64 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/quat ../../../../chunks/quatf64 ../../../../chunks/vec3 ../../../../chunks/vec3f32 ../../../../chunks/vec3f64 ../../../../chunks/sphere".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v){let z=function(){function ba(){this._transform=y.create();this._transformInverse=new G({value:this._transform},x.invert,y.create);this._transformInverseTranspose=new G(this._transformInverse,x.transpose,y.create);this._transformTranspose=new G({value:this._transform},x.transpose,y.create);this._transformInverseRotation=new G({value:this._transform},c.normalFromMat4Legacy,u.create)}var ja=ba.prototype;ja._invalidateLazyTransforms=function(){this._transformInverse.invalidate();
this._transformInverseTranspose.invalidate();this._transformTranspose.invalidate();this._transformInverseRotation.invalidate()};ja.setTransformMatrix=function(l){x.copy(this._transform,l)};ja.multiplyTransform=function(l){x.multiply(this._transform,this._transform,l)};ja.set=function(l){x.copy(this._transform,l);this._invalidateLazyTransforms()};ja.setAndInvalidateLazyTransforms=function(l,w){this.setTransformMatrix(l);this.multiplyTransform(w);this._invalidateLazyTransforms()};k._createClass(ba,
[{key:"transform",get:function(){return this._transform}},{key:"inverse",get:function(){return this._transformInverse.value}},{key:"inverseTranspose",get:function(){return this._transformInverseTranspose.value}},{key:"inverseRotation",get:function(){return this._transformInverseRotation.value}},{key:"transpose",get:function(){return this._transformTranspose.value}}]);return ba}(),G=function(){function ba(ja,l,w){this._original=ja;this._update=l;this._dirty=!0;this._transform=w()}ba.prototype.invalidate=
function(){this._dirty=!0};k._createClass(ba,[{key:"value",get:function(){this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1);return this._transform}}]);return ba}(),C=function(){function ba(l=0){this.offset=l;this.tmpVertex=h.create()}var ja=ba.prototype;ja.applyToVertex=function(l,w,I){const P=l+this.localOrigin[0],U=w+this.localOrigin[1],S=I+this.localOrigin[2],da=this.offset/Math.sqrt(P*P+U*U+S*S);this.tmpVertex[0]=l+P*da;this.tmpVertex[1]=w+U*da;this.tmpVertex[2]=
I+S*da;return this.tmpVertex};ja.applyToAabb=function(l){for(var w=0;3>w;++w)B[w]=l[0+w]+this.localOrigin[w],N[w]=l[3+w]+this.localOrigin[w],M[w]=B[w];w=this.applyToVertex(B[0],B[1],B[2]);for(var I=0;3>I;++I)l[I]=w[I],l[I+3]=w[I];w=U=>{U=this.applyToVertex(U[0],U[1],U[2]);for(let S=0;3>S;++S)l[S]=Math.min(l[S],U[S]),l[S+3]=Math.max(l[S+3],U[S])};for(I=1;8>I;++I){for(var P=0;3>P;++P)M[P]=0===(I&1<<P)?B[P]:N[P];w(M)}I=0;for(P=0;3>P;++P)0>B[P]*N[P]&&(I|=1<<P);if(0!==I&&7!==I)for(P=0;8>P;++P)if(0===(I&
P)){for(let U=0;3>U;++U)M[U]=0!==(I&1<<U)?0:0!==(P&1<<U)?B[U]:N[U];w(M)}for(w=0;3>w;++w)l[w]-=this.localOrigin[w],l[w+3]-=this.localOrigin[w];return l};return k._createClass(ba)}();const B=h.create(),N=h.create(),M=h.create();let O=function(){function ba(l=0){this.componentLocalOriginLength=0;this._tmpVertex=h.create();this._mbs=v.create();this._obb={center:h.create(),halfSize:m.create(),quaternion:null};this._offset=this._totalOffset=0;this._resetOffset(l)}var ja=ba.prototype;ja._resetOffset=function(l){this._totalOffset=
this._offset=l};ja.applyToVertex=function(l,w,I){const P=I+this.componentLocalOriginLength,U=this._totalOffset/Math.sqrt(l*l+w*w+P*P);this._tmpVertex[0]=l+l*U;this._tmpVertex[1]=w+w*U;this._tmpVertex[2]=I+P*U;return this._tmpVertex};ja.applyToAabb=function(l){const w=l[0],I=l[1],P=l[2]+this.componentLocalOriginLength,U=l[3],S=l[4],da=l[5]+this.componentLocalOriginLength;var d=0>w*U?0:Math.min(Math.abs(w),Math.abs(U)),n=0>I*S?0:Math.min(Math.abs(I),Math.abs(S)),K=0>P*da?0:Math.min(Math.abs(P),Math.abs(da));
d=Math.sqrt(d*d+n*n+K*K);if(d<this._totalOffset)return l[0]-=0>w?this._totalOffset:0,l[1]-=0>I?this._totalOffset:0,l[2]-=0>P?this._totalOffset:0,l[3]+=0<U?this._totalOffset:0,l[4]+=0<S?this._totalOffset:0,l[5]+=0<da?this._totalOffset:0,l;n=Math.max(Math.abs(w),Math.abs(U));K=Math.max(Math.abs(I),Math.abs(S));const V=Math.max(Math.abs(P),Math.abs(da));n=this._totalOffset/Math.sqrt(n*n+K*K+V*V);d=this._totalOffset/d;l[0]+=w*(0<w?n:d);l[1]+=I*(0<I?n:d);l[2]+=P*(0<P?n:d);l[3]+=U*(0>U?n:d);l[4]+=S*(0>
S?n:d);l[5]+=da*(0>da?n:d);return l};ja.applyToMbs=function(l){const w=Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]),I=this._totalOffset/w;this._mbs[0]=l[0]+l[0]*I;this._mbs[1]=l[1]+l[1]*I;this._mbs[2]=l[2]+l[2]*I;this._mbs[3]=l[3]+l[3]*this._totalOffset/w;return this._mbs};ja.applyToObb=function(l){var w=l.center;const I=this._totalOffset/Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2]);this._obb.center[0]=w[0]+w[0]*I;this._obb.center[1]=w[1]+w[1]*I;this._obb.center[2]=w[2]+w[2]*I;f.transformQuat(this._obb.halfSize,
l.halfSize,l.quaternion);f.add(this._obb.halfSize,this._obb.halfSize,l.center);w=this._totalOffset/Math.sqrt(this._obb.halfSize[0]*this._obb.halfSize[0]+this._obb.halfSize[1]*this._obb.halfSize[1]+this._obb.halfSize[2]*this._obb.halfSize[2]);this._obb.halfSize[0]+=this._obb.halfSize[0]*w;this._obb.halfSize[1]+=this._obb.halfSize[1]*w;this._obb.halfSize[2]+=this._obb.halfSize[2]*w;f.subtract(this._obb.halfSize,this._obb.halfSize,l.center);F.conjugate(ka,l.quaternion);f.transformQuat(this._obb.halfSize,
this._obb.halfSize,ka);this._obb.halfSize[0]*=0>this._obb.halfSize[0]?-1:1;this._obb.halfSize[1]*=0>this._obb.halfSize[1]?-1:1;this._obb.halfSize[2]*=0>this._obb.halfSize[2]?-1:1;this._obb.quaternion=l.quaternion;return this._obb};k._createClass(ba,[{key:"offset",get:function(){return this._offset},set:function(l){this._resetOffset(l)}},{key:"componentOffset",set:function(l){this._totalOffset=this._offset+l}},{key:"localOrigin",set:function(l){this.componentLocalOriginLength=Math.sqrt(l[0]*l[0]+l[1]*
l[1]+l[2]*l[2])}}]);return ba}(),R=function(){function ba(l=0){this.offset=l;this.sphere=v.create();this.tmpVertex=h.create()}var ja=ba.prototype;ja.applyToVertex=function(l,w,I){const P=this.objectTransform.transform;let U=P[0]*l+P[4]*w+P[8]*I+P[12],S=P[1]*l+P[5]*w+P[9]*I+P[13];l=P[2]*l+P[6]*w+P[10]*I+P[14];w=this.offset/Math.sqrt(U*U+S*S+l*l);U+=U*w;S+=S*w;l+=l*w;w=this.objectTransform.inverse;this.tmpVertex[0]=w[0]*U+w[4]*S+w[8]*l+w[12];this.tmpVertex[1]=w[1]*U+w[5]*S+w[9]*l+w[13];this.tmpVertex[2]=
w[2]*U+w[6]*S+w[10]*l+w[14];return this.tmpVertex};ja.applyToMinMax=function(l,w){const I=this.offset/Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]);l[0]+=l[0]*I;l[1]+=l[1]*I;l[2]+=l[2]*I;l=this.offset/Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2]);w[0]+=w[0]*l;w[1]+=w[1]*l;w[2]+=w[2]*l};ja.applyToAabb=function(l){var w=this.offset/Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]);l[0]+=l[0]*w;l[1]+=l[1]*w;l[2]+=l[2]*w;w=this.offset/Math.sqrt(l[3]*l[3]+l[4]*l[4]+l[5]*l[5]);l[3]+=l[3]*w;l[4]+=l[4]*w;l[5]+=l[5]*w;return l};
ja.applyToBoundingSphere=function(l){const w=Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]),I=this.offset/w;this.sphere[0]=l[0]+l[0]*I;this.sphere[1]=l[1]+l[1]*I;this.sphere[2]=l[2]+l[2]*I;this.sphere[3]=l[3]+l[3]*this.offset/w;return this.sphere};return k._createClass(ba)}();const T=new R,Y=new O,Q=new C,ka=t.create();a.I3SVerticalOffsetGlobalViewingMode=O;a.IntersectorTransform=z;a.Object3DVerticalOffsetGlobalViewingMode=R;a.TERRAIN_ID="terrain";a.TerrainVerticalOffsetGlobalViewingMode=C;a.getVerticalOffsetI3S=
function(ba){return null!=ba?(Y.offset=ba,Y):null};a.getVerticalOffsetObject3D=function(ba){return null!=ba?(T.offset=ba,T):null};a.getVerticalOffsetTerrain=function(ba){return null!=ba?(Q.offset=ba,Q):null};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quat":function(){define("exports ./mat3f64 ./quatf64 ./vec3f64 ./common ./vec3 ./vec4".split(" "),function(a,k,c,u,x,y,F){function t(r){r[0]=0;r[1]=0;r[2]=0;r[3]=1;return r}function f(r,b,e){e*=.5;const A=Math.sin(e);
r[0]=A*b[0];r[1]=A*b[1];r[2]=A*b[2];r[3]=Math.cos(e);return r}function m(r,b){const e=2*Math.acos(b[3]),A=Math.sin(e/2);A>x.getEpsilon()?(r[0]=b[0]/A,r[1]=b[1]/A,r[2]=b[2]/A):(r[0]=1,r[1]=0,r[2]=0);return e}function h(r,b,e){const A=b[0],H=b[1],J=b[2];b=b[3];const W=e[0],fa=e[1],ma=e[2];e=e[3];r[0]=A*e+b*W+H*ma-J*fa;r[1]=H*e+b*fa+J*W-A*ma;r[2]=J*e+b*ma+A*fa-H*W;r[3]=b*e-A*W-H*fa-J*ma;return r}function v(r,b,e){e*=.5;const A=b[0],H=b[1],J=b[2];b=b[3];const W=Math.sin(e);e=Math.cos(e);r[0]=A*e+b*W;
r[1]=H*e+J*W;r[2]=J*e-H*W;r[3]=b*e-A*W;return r}function z(r,b,e){e*=.5;const A=b[0],H=b[1],J=b[2];b=b[3];const W=Math.sin(e);e=Math.cos(e);r[0]=A*e-J*W;r[1]=H*e+b*W;r[2]=J*e+A*W;r[3]=b*e-H*W;return r}function G(r,b,e){e*=.5;const A=b[0],H=b[1],J=b[2];b=b[3];const W=Math.sin(e);e=Math.cos(e);r[0]=A*e+H*W;r[1]=H*e-A*W;r[2]=J*e+b*W;r[3]=b*e-J*W;return r}function C(r,b){const e=b[0],A=b[1];b=b[2];r[0]=e;r[1]=A;r[2]=b;r[3]=Math.sqrt(Math.abs(1-e*e-A*A-b*b));return r}function B(r,b,e,A){const H=b[0],J=
b[1],W=b[2];b=b[3];let fa=e[0],ma=e[1],na=e[2];e=e[3];let oa;let pa;var ea=H*fa+J*ma+W*na+b*e;0>ea&&(ea=-ea,fa=-fa,ma=-ma,na=-na,e=-e);1-ea>x.getEpsilon()?(oa=Math.acos(ea),pa=Math.sin(oa),ea=Math.sin((1-A)*oa)/pa,A=Math.sin(A*oa)/pa):ea=1-A;r[0]=ea*H+A*fa;r[1]=ea*J+A*ma;r[2]=ea*W+A*na;r[3]=ea*b+A*e;return r}function N(r){var b=x.RANDOM,e=b();const A=b();b=b();const H=Math.sqrt(1-e);e=Math.sqrt(e);r[0]=H*Math.sin(2*Math.PI*A);r[1]=H*Math.cos(2*Math.PI*A);r[2]=e*Math.sin(2*Math.PI*b);r[3]=e*Math.cos(2*
Math.PI*b);return r}function M(r,b){const e=b[0],A=b[1],H=b[2];b=b[3];var J=e*e+A*A+H*H+b*b;J=J?1/J:0;r[0]=-e*J;r[1]=-A*J;r[2]=-H*J;r[3]=b*J;return r}function O(r,b){r[0]=-b[0];r[1]=-b[1];r[2]=-b[2];r[3]=b[3];return r}function R(r,b){var e=b[0]+b[4]+b[8];if(0<e)e=Math.sqrt(e+1),r[3]=.5*e,e=.5/e,r[0]=(b[5]-b[7])*e,r[1]=(b[6]-b[2])*e,r[2]=(b[1]-b[3])*e;else{let A=0;b[4]>b[0]&&(A=1);b[8]>b[3*A+A]&&(A=2);const H=(A+1)%3,J=(A+2)%3;e=Math.sqrt(b[3*A+A]-b[3*H+H]-b[3*J+J]+1);r[A]=.5*e;e=.5/e;r[3]=(b[3*H+
J]-b[3*J+H])*e;r[H]=(b[3*H+A]+b[3*A+H])*e;r[J]=(b[3*J+A]+b[3*A+J])*e}return r}function T(r,b,e,A){var H=.5*Math.PI/180;b*=H;e*=H;A*=H;H=Math.sin(b);b=Math.cos(b);const J=Math.sin(e);e=Math.cos(e);const W=Math.sin(A);A=Math.cos(A);r[0]=H*e*A-b*J*W;r[1]=b*J*A+H*e*W;r[2]=b*e*W-H*J*A;r[3]=b*e*A+H*J*W;return r}function Y(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function Q(r,b,e){const A=y.dot(b,e);if(-.999999>A)return y.cross(K,V,b),1E-6>y.len(K)&&y.cross(K,Z,b),y.normalize(K,K),f(r,K,Math.PI),
r;if(.999999<A)return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r;y.cross(K,b,e);r[0]=K[0];r[1]=K[1];r[2]=K[2];r[3]=1+A;return d(r,r)}function ka(r,b,e,A,H,J){B(ha,b,H,J);B(ca,e,A,J);B(r,ha,ca,2*J*(1-J));return r}function ba(r,b,e,A){const H=ia;H[0]=e[0];H[3]=e[1];H[6]=e[2];H[1]=A[0];H[4]=A[1];H[7]=A[2];H[2]=-b[0];H[5]=-b[1];H[8]=-b[2];return d(r,R(r,H))}const ja=F.copy,l=F.set,w=F.add,I=F.scale,P=F.dot,U=F.lerp,S=F.length,da=F.squaredLength,d=F.normalize,n=F.exactEquals;F=F.equals;const K=u.create(),V=u.fromValues(1,
0,0),Z=u.fromValues(0,1,0),ha=c.create(),ca=c.create(),ia=k.create();k=Object.freeze(Object.defineProperty({__proto__:null,add:w,calculateW:C,conjugate:O,copy:ja,dot:P,equals:F,exactEquals:n,fromEuler:T,fromMat3:R,getAxisAngle:m,identity:t,invert:M,len:S,length:S,lerp:U,mul:h,multiply:h,normalize:d,random:N,rotateX:v,rotateY:z,rotateZ:G,rotationTo:Q,scale:I,set:l,setAxes:ba,setAxisAngle:f,slerp:B,sqlerp:ka,sqrLen:da,squaredLength:da,str:Y},Symbol.toStringTag,{value:"Module"}));a.add=w;a.calculateW=
C;a.conjugate=O;a.copy=ja;a.dot=P;a.equals=F;a.exactEquals=n;a.fromEuler=T;a.fromMat3=R;a.getAxisAngle=m;a.identity=t;a.invert=M;a.len=S;a.length=S;a.lerp=U;a.mul=h;a.multiply=h;a.normalize=d;a.quat=k;a.random=N;a.rotateX=v;a.rotateY=z;a.rotateZ=G;a.rotationTo=Q;a.scale=I;a.set=l;a.setAxes=ba;a.setAxisAngle=f;a.slerp=B;a.sqlerp=ka;a.sqrLen=da;a.squaredLength=da;a.str=Y})},"esri/chunks/vec3f32":function(){define(["exports"],function(a){function k(){return new Float32Array(3)}function c(N){const M=
new Float32Array(3);M[0]=N[0];M[1]=N[1];M[2]=N[2];return M}function u(N,M,O){const R=new Float32Array(3);R[0]=N;R[1]=M;R[2]=O;return R}function x(N,M){return new Float32Array(N,M,3)}function y(){return k()}function F(){return u(1,1,1)}function t(){return u(1,0,0)}function f(){return u(0,1,0)}function m(){return u(0,0,1)}const h=k(),v=F(),z=t(),G=f(),C=m(),B=Object.freeze(Object.defineProperty({__proto__:null,ONES:v,UNIT_X:z,UNIT_Y:G,UNIT_Z:C,ZEROS:h,clone:c,create:k,createView:x,fromValues:u,ones:F,
unitX:t,unitY:f,unitZ:m,zeros:y},Symbol.toStringTag,{value:"Module"}));a.ONES=v;a.UNIT_X=z;a.UNIT_Y=G;a.UNIT_Z=C;a.ZEROS=h;a.clone=c;a.create=k;a.createView=x;a.fromValues=u;a.ones=F;a.unitX=t;a.unitY=f;a.unitZ=m;a.vec3f32=B;a.zeros=y})},"esri/views/3d/support/cameraUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../core/Cyclical ../../../core/Logger ../../../core/mathUtils ../../../core/promiseUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/ellipsoidUtils ../../../geometry/Point ../../../geometry/projection ../../../geometry/SpatialReference ../../ViewingMode ../camera/intersectionUtils ../../../chunks/cameraUtilsPlanar ../../../chunks/cameraUtilsSpherical ./earthUtils ./ElevationProvider ../../support/spatialReferenceSupport".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v,z,G,C,B,N,M,O,R){function T(b){return"global"===b.viewingMode?N.cameraUtilsSpherical:B.cameraUtilsPlanar}function Y(b,e,A){const H=b.state.camera,J=H.width/2/H.pixelRatio;b.renderCoordsHelper.viewingMode===G.ViewingMode.Global&&null!=A&&(e*=Math.cos(y.deg2rad(A)));e/=b.renderCoordsHelper.unitInMeters;return J/(96*39.37/e)/Math.tan(H.fovX/2)}function Q(b,e,A){const H=b.state.camera;e=96*39.37/(H.width/2/H.pixelRatio/(e*Math.tan(H.fovX/2)));b.renderCoordsHelper.viewingMode===
G.ViewingMode.Global&&null!=A&&(e/=Math.cos(y.deg2rad(A)));return e*b.renderCoordsHelper.unitInMeters}function ka(b,e,A,H,J,W){if(d(W)){const fa=new r(W.signal);P(b,H.heading,H.tilt,e,A,J,fa);fa.resolver.promise.then(ma=>{ma=da(b,ma,H.fov);if(null==ma)W.resolver.reject();else return W.resolver.resolve(ma)},ma=>W.resolver.reject(ma))}else return e=P(b,H.heading,H.tilt,e,A,J),da(b,e,H.fov,W)}function ba(b,e,A,H,J){return T(b).directionToHeadingTilt(e,A,H,J)}function ja(b,e){return!!(b.basemapTerrain&&
b.renderCoordsHelper.fromRenderCoords(e,Z,b.spatialReference)&&b.elevationProvider&&(O.getElevationAtPoint(b.elevationProvider,Z)??0)>(Z.z??0)-1)}async function l(b,e,A){if(!b.renderCoordsHelper.fromRenderCoords(e,Z,b.spatialReference)||!b.elevationProvider)return!1;e=Z.z??0;return(await b.elevationProvider.queryElevation(Z.x,Z.y,e,Z.spatialReference,"ground",A)??0)>e-1}async function w(b,e,A){const H=f.create();e?e instanceof h?(v.projectPointToVector(e,H,b.renderSpatialReference),null==e.z&&null!=
b.basemapTerrain&&null!=b.elevationProvider&&(e=await b.elevationProvider.queryElevation(e.x,e.y,e.z??0,e.spatialReference,"ground",A),null!=e&&b.renderCoordsHelper.setAltitude(H,e))):t.copy(H,e):t.copy(H,b.state.camera.center);return H}function I(b,e){const A=f.create();e&&e instanceof h?(v.projectPointToVector(e,A,b.renderSpatialReference),null==e.z&&null!=b.basemapTerrain&&null!=b.elevationProvider&&(e=O.getElevationAtPoint(b.elevationProvider,e),null!=e&&b.renderCoordsHelper.setAltitude(A,e))):
e?t.copy(A,e):t.copy(A,b.state.camera.center);return A}function P(b,e,A,H,J,W,fa){const ma=H&&H instanceof h?H:null;if(d(fa))return w(b,H,fa.signal).then(na=>{U(b,e,A,ma,na,J,W,fa)},na=>fa.resolver.reject(na)),null;H=I(b,H);return U(b,e,A,ma,H,J,W,fa)}function U(b,e,A,H,J,W,fa,ma){if(null==H&&(H=v.projectVectorToPoint(J,b.renderSpatialReference,b.spatialReference||z.WGS84),null==H))return null;W=Math.max(W,b.state.constraints.minimumPoiDistance);var na=S(b,e,A,J,W,fa);const oa=T(b).eyeForCenterWithHeadingTilt,
pa=oa(J,W,na.heading,na.tilt);if(fa===a.OrientationMode.ADJUST&&"global"===b.viewingMode&&0<A){const ea=()=>{var E=W;var p=W;var g=T(b).eyeTiltToLookAtTilt(A,J,p);b.state.constraints.tilt&&(p=b.state.constraints.tilt(p),g=Math.min(g,.5*Math.PI),g=p.min*(1-.7)+.7*g);E=T(b).lookAtTiltToEyeTilt(g,J,E);fa=1>A-E?a.OrientationMode.LOCKED:a.OrientationMode.ADJUST;return U(b,e,E,H,J,W,fa,ma)};na=b.map.ground.navigationConstraint;if(!na||"stay-above"===na.type){if(ja(b,pa.eye))return ea();if(d(ma))return l(b,
pa.eye,ma.signal).then(E=>{if(E)return ea();ma.resolver.resolve({eye:pa.eye,up:pa.up,center:f.clone(J),heading:pa.heading,tilt:pa.tilt});return null}),null}}na=!ma||d(ma)?{center:f.create(),eye:f.create(),up:f.create(),tilt:0,heading:0}:ma;na.eye=pa.eye;na.up=pa.up;na.center=f.clone(J);na.heading=pa.heading;na.tilt=pa.tilt;d(ma)&&ma.resolver.resolve(na);return na}function S(b,e,A,H,J,W){var fa=0;if(W=W===a.OrientationMode.ADJUST)if(fa=b.pointsOfInterest.centerOnSurfaceFrequent.distance,8<Math.log(J/
fa)/Math.LN2)W=!0;else{var ma=b.renderSpatialReference,na=b.spatialReference||z.WGS84;W=v.projectVectorToPoint(H,ma,na);ma=v.projectVectorToPoint(b.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,ma,na);null==W||null==ma?W=!1:(fa*=Math.tan(.5*b.state.camera.fov),W=5<ma.distance(W)/fa)}W?(e=0,A=T(b).eyeTiltToLookAtTilt(A,H,J),b.state.constraints.tilt?(W=b.state.constraints.tilt(J),W.max=Math.min(W.max,.5*Math.PI),fa=Math.min(A,W.min*(1-.7)+.7*W.max)):fa=A):fa=T(b).eyeTiltToLookAtTilt(A,H,J);
A=fa=b.state.constraints.clampTilt(J,fa);A=T(b).lookAtTiltToEyeTilt(A,H,J);return{heading:e,tilt:A}}function da(b,e,A,H){if(null==e)return null;b=v.projectVectorToPoint(e.eye,b.renderSpatialReference,b.spatialReference||z.WGS84);return null==b?null:null!=H?(H.position=b,H.heading=e.heading,H.tilt=e.tilt,H.fov=A,H):new c(b,e.heading,e.tilt,A)}function d(b){return b&&"resolver"in b}const n=x.getLogger("esri.views.3d.support.cameraUtils"),K=f.create(),V={heading:0,tilt:0},Z=new h,ha=new u.Cyclical(-2.0037508342788905E7,
2.0037508342788905E7),ca=new u.Cyclical(-180,180);a.OrientationMode=void 0;(function(b){b[b.LOCKED=0]="LOCKED";b[b.ADJUST=1]="ADJUST"})(a.OrientationMode||(a.OrientationMode={}));const ia=f.create();let r=k._createClass(function(b){this.signal=b;this.resolver=F.createResolver()});a.AsyncContext=r;a.computeScale=function(b,e){v.projectVectorToVector(e.center,b.renderSpatialReference,K,z.WGS84);return Q(b,e.distance,K[1])};a.directionToHeadingTilt=ba;a.distanceToScale=Q;a.externalToInternal=function(b,
e){if(null==e)return null;var A=b.renderSpatialReference;const H=T(b).headingTiltToDirectionUp,J=f.create();if(!v.projectPointToVector(e.position,J,A))return null;A=H(J,e.heading,e.tilt);t.scale(A.direction,A.direction,b.state.camera.distance);t.add(A.direction,A.direction,J);b=C.cameraOnContentAlongViewDirection(b,J,A.direction,A.up);b.fov=y.deg2rad(e.fov);return b};a.fromCenterDistance=ka;a.fromCenterScale=function(b,e,A,H,J,W){A=Y(b,A,e.latitude);return ka(b,e,A,H,J,W)};a.fromExtent=function(b,
e,A,H,J,W=null){if(b.state.isGlobal){if(!R.isSpatialReferenceSupported(e.spatialReference,G.ViewingMode.Global))return d(W)&&W.resolver.reject(),null;var fa=new h(e.xmin,e.ymin,e.spatialReference);const pa=new h(e.xmax,e.ymax,e.spatialReference),ea=e.spatialReference.isGeographic?ca:ha;var ma=new h({x:ea.center(fa.x,pa.x),y:(pa.y+fa.y)/2,z:null!=e.zmax&&null!=e.zmin?(e.zmax+e.zmin)/2:void 0,spatialReference:e.spatialReference});const E=m.getReferenceEllipsoid(e.spatialReference);var na=M.getGreatCircleSpanAt(ma,
fa,pa);var oa=na.lon;na=na.lat;ea.diff(fa.x,pa.x)>ea.range/2&&(oa+=E.halfCircumference);oa=Math.min(oa,E.halfCircumference);na=Math.min(na,E.halfCircumference)}else ma=b.renderSpatialReference??e.spatialReference,ma.equals(e.spatialReference)||(e=v.project(e,ma)),oa=e.xmax-e.xmin,na=e.ymax-e.ymin,ma=new h({x:e.xmin+.5*oa,y:e.ymin+.5*na,z:null!=e.zmax&&null!=e.zmin?(e.zmax+e.zmin)/2:void 0,spatialReference:ma});fa=b.state.camera;e=Math.max(1/Math.tan(fa.fovX/2)*oa*.5,1/Math.tan(fa.fovY/2)*na*.5,1/
Math.tan(fa.fov/2)*(null!=e.zmax&&null!=e.zmin?e.zmax-e.zmin:0)*.5)/1;if(d(W))oa=new r(W.signal),P(b,A,H,ma,e,J,oa),oa.resolver.promise.then(pa=>{pa=da(b,pa,b.camera.fov);if(null==pa)W.resolver.reject();else return W.resolver.resolve(pa)},pa=>W.resolver.reject(pa));else return A=P(b,A,H,ma,e,J),da(b,A,b.camera.fov,W)};a.getObserverForPointAtDistance=P;a.headingTiltToDirectionUp=function(b,e,A,H,J){return T(b).headingTiltToDirectionUp(e,A,H,J)};a.internalToExternal=function(b,e,A){const H=b.renderSpatialReference,
J=ba(b,e.eye,e.viewForward,e.up,V);b=b.spatialReference||z.WGS84;v.projectVectorToVector(e.eye,H,ia,b)||(b=z.WGS84,v.projectVectorToVector(e.eye,H,ia,b));if(null==A)return new c(new h(ia,b),J.heading,J.tilt,y.rad2deg(e.fov));A.position.x=ia[0];A.position.y=ia[1];A.position.z=ia[2];A.position.spatialReference=b;A.heading=J.heading;A.tilt=J.tilt;A.fov=y.rad2deg(e.fov);return A};a.observerToCamera=da;a.scaleToDistance=Y;a.scaleToZoom=function(b,e){if(b=b.basemapTerrain?.tilingScheme)return b.levelAtScale(e);
n.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")};a.toExtent=function(b,e,A){const H=v.projectVectorToPoint(A,b.renderSpatialReference,b.spatialReference||z.WGS84);if(null==H)return null;var J=Math.tan(e.fovX/2),W=Math.tan(e.fovY/2);e=t.dist(e.eye,A);J*=2*e;W*=2*e;return"global"===b.viewingMode?N.toExtent(b,H,J,W):B.toExtent(b,H,J,W)};a.zoomToScale=function(b,e){if(b=b.basemapTerrain?.tilingScheme)return b.scaleAtLevel(e);n.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")};
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/cameraUtilsPlanar":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projection ../views/3d/support/cameraUtilsInternal".split(" "),function(a,k,c,u,x,y,F,t,f){function m(T,Y,Q,ka=f.createDirectionUp()){const {direction:ba,up:ja}=ka;c.fromZRotation(M,-k.deg2rad(Y));c.rotateX(M,M,k.deg2rad(Q));x.transformMat4(ba,N,M);x.scale(ba,ba,-1);x.transformMat4(ja,B,M);return ka}
function h(T,Y,Q,ka){return f.directionToHeadingTilt(Y,Q,ka,N,B)}function v(T,Y,Q,ka){const ba=m(T,Q,ka),ja=y.create();x.scale(ja,ba.direction,-Y);x.add(ja,ja,T);return{up:ba.up,eye:ja,heading:Q,tilt:ka}}function z(T){return k.rad2deg(T)}function G(T){return k.deg2rad(T)}function C(T,Y,Q,ka,ba){const ja=T.renderSpatialReference;T=T.map&&T.spatialReference||Y.spatialReference;t.projectPointToVector(Y,O,ja);t.projectPointToVector(Y,R,ja);O[0]-=Q/2;R[0]+=Q/2;O[1]-=ka/2;R[1]+=ka/2;t.projectVectorToVector(O,
ja,O,T);t.projectVectorToVector(R,ja,R,T);ba?(ba.xmin=O[0],ba.ymin=O[1],ba.xmax=R[0],ba.ymax=R[1],ba.spatialReference=T):ba=new F(O[0],O[1],R[0],R[1],T);return ba}const B=y.fromValues(0,1,0),N=y.fromValues(0,0,1),M=u.create(),O=y.create(),R=y.create();u=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:h,eyeForCenterWithHeadingTilt:v,eyeTiltToLookAtTilt:G,headingTiltToDirectionUp:m,lookAtTiltToEyeTilt:z,toExtent:C},Symbol.toStringTag,{value:"Module"}));a.cameraUtilsPlanar=
u;a.directionToHeadingTilt=h;a.eyeForCenterWithHeadingTilt=v;a.eyeTiltToLookAtTilt=G;a.headingTiltToDirectionUp=m;a.lookAtTiltToEyeTilt=z;a.toExtent=C})},"esri/views/3d/support/cameraUtilsInternal":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(a,k,c,u){const x=u.create(),y=u.create();a.createDirectionUp=function(){return{direction:u.create(),up:u.create()}};a.directionToHeadingTilt=function(F,t,f,m,h){let v=c.normalize(x,F),z=c.dot(v,
m);const G=0<z;z=Math.abs(z);.99<z&&(z=Math.abs(c.dot(t,m)),.99>z?(c.copy(v,t),G&&c.scale(v,v,-1)):v=null);t=0;v&&(c.scale(y,m,c.dot(m,v)),c.subtract(v,v,y),t=c.dot(v,h)/(c.length(v)*c.length(h)),c.cross(y,v,h),t=(0<c.dot(y,m)?1:-1)*k.rad2deg(k.acosClamped(t)));F=k.rad2deg(k.acosClamped(-c.dot(m,F)/c.length(F)));if(!f)return{heading:t,tilt:F};f.heading=t;f.tilt=F;return f};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/cameraUtilsSpherical":function(){define("exports ../core/Cyclical ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/ellipsoidUtils ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../views/3d/support/cameraUtilsInternal ../views/3d/support/earthUtils".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v,z){function G(w,I,P,U=v.createDirectionUp()){y.cross(ja,w,Y);0===y.dot(ja,ja)&&y.cross(ja,w,Q);u.fromRotation(ba,-c.deg2rad(I),w);u.rotate(ba,ba,-c.deg2rad(P),ja);const {up:S,direction:da}=U;y.cross(S,ja,w);y.normalize(S,S);y.transformMat4(S,S,ba);y.normalize(da,w);y.negate(da,da);y.transformMat4(da,da,ba);return U}function C(w,I,P,U){const S=ja,da=l;y.normalize(S,w);y.cross(l,S,Y);0===y.dot(l,l)&&y.cross(l,S,Q);y.cross(da,l,S);return v.directionToHeadingTilt(I,P,
U,S,da)}function B(w,I,P,U){const S={eye:F.create(),up:null,tilt:U,heading:P},da=ja;da[0]=w[0];da[1]=w[2];da[2]=-w[1];P=c.deg2rad(P);var d=c.deg2rad(U);U=Math.sin(P);P=Math.cos(P);var n=Math.sin(d),K=Math.cos(d);const V=y.length(da);if(1E-8>Math.abs(d))d=I+V;else{var Z=V/n,ha=c.asinClamped(I/Z);d=Z*Math.sin(Math.PI-d-ha)}K*=I;Z=I*I*n*n;ha=P*P*Z;const ca=d-K,ia=ca*ca;var r=ha*(ha+ia-da[1]*da[1]);if(0>r)return y.scale(S.eye,da,d/V),S.tilt=0,M(S,w);var b=Math.sqrt(r);const e=da[1]*ca;r=ha+ia;b=0<P?-b+
e:b+e;if(1E-8>Math.abs(r))return 1E-8>V?(S.eye[0]=0,S.eye[1]=0,S.eye[2]=I):y.scale(S.eye,da,d/V),S.tilt=0,N(S.eye),M(S,w);S.eye[1]=b/r;I*=n;b=S.eye[1]*S.eye[1];n=1-b;r=Math.sqrt(n);Z=ha*b+U*U*Z-2*P*I*S.eye[1]*r*ca+n*ia;if(1E-8>Math.abs(Z))return y.scale(S.eye,da,d/V),S.tilt=0,N(S.eye),M(S,w);S.eye[0]=(n*(d*da[0]-K*da[0])-I*r*(da[0]*S.eye[1]*P+da[2]*U))/Z;S.eye[2]=(n*(d*da[2]-K*da[2])-I*r*(da[2]*S.eye[1]*P-da[0]*U))/Z;y.scale(S.eye,S.eye,d);N(S.eye);return M(S,w)}function N(w){const I=w[1];w[1]=-w[2];
w[2]=I}function M(w,I){I=G(I,w.heading,w.tilt);w.up=I.up;return w}function O(w,I,P){I=y.length(I);P=c.asinClamped(P/(Math.sqrt(P*P+I*I-2*P*I*Math.cos(Math.PI-w))/Math.sin(w)));return c.rad2deg(w-P)}function R(w,I,P){w=c.deg2rad(w);I=y.length(I);return c.asinClamped(P/(I/Math.sin(w)))+w}function T(w,I,P,U,S){function da(V){const Z=Math.PI/2;V=k.cyclical2PI.normalize(V,-Z);V>Z&&(V=Math.PI-V);return V}var d=I.latitude;var n=t.getReferenceEllipsoid(w.spatialReference).radius;I=I.longitude;var K=z.getLonDeltaForDistance(d,
P,n)/2;P=I-K;I+=K;d=c.deg2rad(d);d=(1+Math.sin(d))/(1-Math.sin(d));K=(d+1)*Math.tan(U/n/2);d=1.5*Math.PI-2*Math.atan(.5*(K+Math.sqrt(4*d+K*K)));U=d+U/n;d=da(d);U=da(U);U<d&&(n=U,U=d,d=n);d=Math.max(c.rad2deg(d),-90);U=Math.min(c.rad2deg(U),90);I=ka.monotonic(P,I);180<I-P&&(n=(I-P-180)/2,P+=n,I-=n);n=w.spatialReference&&w.spatialReference.isGeographic?w.spatialReference:m.WGS84;S?(S.xmin=P,S.ymin=d,S.xmax=I,S.ymax=U,S.spatialReference=n):S=new f(P,d,I,U,n);w.spatialReference&&w.spatialReference.isWebMercator&&
h.geographicToWebMercator(S,!1,S);return S}const Y=F.fromValues(0,0,1),Q=y.normalize(F.create(),F.fromValues(1,1,1)),ka=new k.Cyclical(-180,180),ba=x.create(),ja=F.create(),l=F.create();x=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:C,eyeForCenterWithHeadingTilt:B,eyeTiltToLookAtTilt:R,headingTiltToDirectionUp:G,lookAtTiltToEyeTilt:O,toExtent:T},Symbol.toStringTag,{value:"Module"}));a.cameraUtilsSpherical=x;a.directionToHeadingTilt=C;a.eyeForCenterWithHeadingTilt=B;a.eyeTiltToLookAtTilt=
R;a.headingTiltToDirectionUp=G;a.lookAtTiltToEyeTilt=O;a.toExtent=T})},"esri/views/3d/support/earthUtils":function(){define(["exports","../../../core/mathUtils","../../../geometry/ellipsoidUtils","../../../geometry/Point"],function(a,k,c,u){function x(t,f,m){if(null==f.longitude||null==f.latitude||null==m.longitude||null==m.latitude)throw Error("Invalid points: no lon/lat");return y(t,f.longitude,f.latitude,m.longitude,m.latitude)}function y(t,f,m,h,v){m=k.deg2rad(m);v=k.deg2rad(v);f=k.deg2rad(f);
const z=k.deg2rad(h);h=Math.sin((m-v)/2);f=Math.sin((f-z)/2);m=2*k.asinClamped(Math.sqrt(h*h+Math.cos(m)*Math.cos(v)*f*f));return Math.round(m*t*1E4)/1E4}function F(t,f){t/=15;f||(t=Math.round(t));return t}a.getGreatCircleDistance=y;a.getGreatCircleDistanceFromPoints=x;a.getGreatCircleSpanAt=function(t,f,m){const h=f.spatialReference,v=c.getReferenceEllipsoid(h),z=new u(f.x,t.y,h),G=new u(m.x,t.y,h);f=new u(t.x,f.y,h);t=new u(t.x,m.y,h);return{lon:x(v.radius,z,G),lat:x(v.radius,f,t)}};a.getLonDeltaForDistance=
function(t,f,m){f/=m;t=k.deg2rad(t);f=Math.sin(f/2);t=Math.cos(t);t=2*k.asinClamped(Math.sqrt(f*f/(t*t)));return k.rad2deg(t)};a.longitudeToTimezone=F;a.positionToTimezoneInfo=function(t,f){t=t?.[0];if(null==t)return null;f||(f={hours:0,minutes:0,seconds:0});f.hours=F(t,!0);t=f.hours%1;f.hours-=t;f.minutes=60*t;t=f.minutes%1;f.minutes-=t;f.seconds=Math.round(60*t);return f};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/ElevationProvider":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../layers/graphics/dehydratedFeatureUtils"],function(a,k,c){function u(x){return"array"in x}k=k._createClass(function(x,y=null,F=0){this.array=x;this.spatialReference=y;this.offset=F});a.SamplePosition=k;a.getElevationAtPoint=function(x,y,F="ground"){if(c.isDehydratedPoint(y))return x.getElevation(y.x,y.y,y.z||0,y.spatialReference,F);if(u(y)){let t=y.offset;return x.getElevation(y.array[t++],y.array[t++],y.array[t]||0,y.spatialReference??x.spatialReference,
F)}return x.getElevation(y[0],y[1],y[2]||0,x.spatialReference,F)};a.isSamplePosition=u;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedFeatureUtils":function(){define(["exports"],function(a){a.isDehydratedPoint=function(k){return"point"===k.type};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,k,c,u,x,y,F,t,f){var m;a.SlideThumbnail=m=function(h){function v(){var G=h.apply(this,arguments)||this;G.url="";return G}k._inherits(v,h);var z=v.prototype;z.destroy=function(){this.url=""};z.clone=function(){return new m({url:this.url})};return k._createClass(v)}(u.JSONSupport);c.__decorate([x.property({type:String,json:{write:{isRequired:!0}}})],a.SlideThumbnail.prototype,"url",void 0);a.SlideThumbnail=m=c.__decorate([f.subclass("esri.webdoc.support.SlideThumbnail")],a.SlideThumbnail);
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/Description":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(a,k,c,u,x,y,F,t){var f;c=f=function(m){function h(){var v=m.apply(this,arguments)||this;v.text="";return v}
a._inherits(h,m);h.prototype.clone=function(){return new f({text:this.text})};return a._createClass(h)}(c.JSONSupport);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"text",void 0);return c=f=k.__decorate([t.subclass("esri.webscene.support.Description")],c)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/SunnyWeather ../../views/3d/environment/weather ../lightingTypes ../SunLighting".split(" "),
function(a,k,c,u,x,y,F,t,f,m,h,v){var z;a.SlideEnvironment=z=function(G){function C(){var B=G.apply(this,arguments)||this;B.lighting=new v;B.weather=new f;return B}k._inherits(C,G);C.prototype.clone=function(){return new z({lighting:x.clone(this.lighting),weather:x.clone(this.weather)})};return k._createClass(C)}(u.JSONSupport);c.__decorate([y.property({types:h.lightingTypes,json:{write:!0}})],a.SlideEnvironment.prototype,"lighting",void 0);c.__decorate([y.property({types:m.weatherTypes,json:{write:!0}})],
a.SlideEnvironment.prototype,"weather",void 0);a.SlideEnvironment=z=c.__decorate([t.subclass("esri.webscene.Environment")],a.SlideEnvironment);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../webdoc/support/opacityUtils".split(" "),
function(a,k,c,u,x,y,F,t,f,m){var h;u=h=function(v){function z(){var C=v.apply(this,arguments)||this;C.opacity=null;return C}a._inherits(z,v);var G=z.prototype;G.clone=function(){return new h({opacity:this.opacity})};G.cloneAndApplyTo=function(C){if(null==this.opacity)return C;C=C?.clone()??new c;C.opacity=this.opacity;return C};z.fromGround=function(C){return new h({opacity:C.opacity})};return a._createClass(z)}(u.JSONSupport);k.__decorate([x.property({type:Number,json:{type:y.Integer,read:{reader:m.transparencyToOpacity,
source:"transparency"},write:{writer:(v,z)=>{z.transparency=m.opacityToTransparency(v)},target:"transparency"}}})],u.prototype,"opacity",void 0);return u=h=k.__decorate([f.subclass("esri.webscene.support.SlideGround")],u)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,k,c,u,x,y,F,t){var f;a.SlideVisibleLayer=f=function(m){function h(v){v=m.call(this,v)||this;v.id="";v.sublayerIds=null;return v}k._inherits(h,m);h.prototype.clone=function(){return new f({id:this.id,sublayerIds:x.clone(this.sublayerIds)})};return k._createClass(h)}(u.JSONSupport);c.__decorate([y.property({type:String,json:{write:!0}})],a.SlideVisibleLayer.prototype,"id",void 0);c.__decorate([y.property({type:[F.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],
a.SlideVisibleLayer.prototype,"sublayerIds",void 0);a.SlideVisibleLayer=f=c.__decorate([t.subclass("esri.webscene.support.SlideVisibleLayer")],a.SlideVisibleLayer);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/Title":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,k,c,u,x,y,F,t){var f;c=f=function(m){function h(){var v=m.apply(this,arguments)||this;v.text="";return v}a._inherits(h,m);h.prototype.clone=function(){return new f({text:this.text})};return a._createClass(h)}(c.JSONSupport);k.__decorate([u.property({type:String,json:{write:{isRequired:!0}}})],c.prototype,"text",void 0);return c=f=k.__decorate([t.subclass("esri.webscene.support.Title")],c)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(a,k,c,u,x,y,F,t){var f;c=f=function(m){function h(v){return m.call(this,v)||this}a._inherits(h,m);h.prototype.clone=function(){return new f({name:this.name,path:this.path,title:this.title})};return a._createClass(h)}(c.JSONSupport);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"path",void 0);k.__decorate([u.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=
f=k.__decorate([t.subclass("esri.webscene.TransportationNetwork")],c)})},"esri/webscene/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(a,k,c){c=function(u){function x(y,F){return u.call(this,y,F,"webscene")||this}k._inherits(x,u);k._createClass(x,[{key:"supportsGround",get:function(){return this.since(1,8)}},{key:"supportsVisibleElevationLayersInSlides",get:function(){return this.lessThan(1,8)}}]);return x}(c.Version);a.Version=c;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/schemaValidatorLoader":function(){define(["exports"],function(a){let k=null;a.getLoader=function(){return k};a.registerLoader=function(c){k=c};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/projection ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./geometry/support/spatialReferenceUtils ./portal/Portal ./portal/PortalItem ./support/MapFloorInfo ./support/tagSymbols ./support/webSceneUtils ./views/ViewingMode ./views/support/spatialReferenceSupport ./webdoc/support/saveUtils ./webdoc/support/thumbnailUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version ./webscene/support/schemaValidatorLoader".split(" "),function(a,
k,c,u,x,y,F,t,f,m,h,v,z,G,C,B,N,M,O,R,T,Y,Q,ka,ba,ja,l,w,I,P,U,S,da,d,n,K,V,Z,ha,ca,ia,r,b,e,A,H,J,W){const fa=new J.Version(1,31);x=function(oa){function pa(E){var p=oa.call(this,E)||this;p[ma]=!0;p._layersIdGCTimeoutId=void 0;p._updateFromPromise=null;p.applicationProperties=null;p.clippingArea=null;p.clippingEnabled=!1;p.floorInfo=null;p.heightModelInfo=void 0;p.sourceVersion=null;p.transportationNetworks=null;p.presentation=new A;p.initialViewProperties=new e;p.portalItem=null;p.resourceInfo=
null;p._debouncedSaveOperations=B.debounce(async(g,q,D)=>{switch(g){case na.SAVE:return p._saveImpl(q);case na.SAVE_AS:return p._saveAsImpl(D,q)}});p._resourceReferences={portalItem:null,paths:[]};p.authoringApp=null;p.authoringAppVersion=null;p._isAuthoringAppSetByUser=!1;p._isAuthoringAppVersionSetByUser=!1;return p}k._inherits(pa,oa);var ea=pa.prototype;ea.initialize=function(){this.when().catch(E=>{v.getLogger(this).error("#load()","Failed to load web scene",E)});if(this.resourceInfo){let E;try{E=
this._validateJSON(this.resourceInfo)}catch(p){this.addResolvingPromise(Promise.reject(p));return}this.read(E);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this.addHandles([N.on(()=>this.tables,"before-add",E=>{E.preventDefault();v.getLogger(this).errorOnce("tables","Tables are not yet supported in a WebScene")}),N.on(()=>this.allLayers,"change",()=>this._scheduleLayersIdGC())])};ea.destroy=function(){this._unscheduleLayersIdGC();
this.presentation&&this.presentation.destroy();this.portalItem=z.destroyMaybe(this.portalItem);this.basemap?.destroy()};ea.writeClippingArea=function(E,p){p.clippingArea||(p.clippingArea={});p.clippingArea.geometry=E.toJSON()};ea.readClippingEnabled=function(E,p){return p.clippingArea?!!p.clippingArea.clip:!1};ea.writeClippingEnabled=function(E,p){this.clippingArea&&(p.clippingArea||(p.clippingArea={}),p.clippingArea.clip=E)};ea.writeLayers=function(E,p,g,q){const D={...q,layerContainerType:"operational-layers"};
E=E.map(L=>this.verifyWriteLayer(L,q)?L.write({},D):null).filter(L=>!!L);p[g]=E.toArray()};ea.verifyWriteLayer=function(E,p){return"write"in E?!0:(p&&p.messages&&p.messages.push(new t("layer:unsupported",`Layers (${E.title}, ${E.id}) of type '${E.declaredClass}' cannot be persisted in web scenes`,{layer:E})),!1)};ea.readSourceVersion=function(E,p){const [g,q]=p.version.split(".");return new J.Version(parseInt(g,10),parseInt(q,10))};ea.writeSourceVersion=function(E,p,g){p[g]=`${fa.major}.${fa.minor}`};
ea.writeAuthoringApp=function(E,p){p.authoringApp=E&&this._isAuthoringAppSetByUser?E:"ArcGIS API for JavaScript"};ea.writeAuthoringAppVersion=function(E,p){p.authoringAppVersion=E&&this._isAuthoringAppVersionSetByUser?E:u.version};ea.writeGround=function(E,p,g,q){p[g]=E?E.write({},q):{transparency:0,layers:[]}};ea.readInitialViewProperties=function(E,p){E={};p.initialState&&p.initialState.environment&&(E.environment=b.fromJSON(p.initialState.environment));E.spatialReference=p.spatialReference?I.fromJSON(p.spatialReference):
I.WebMercator;E.viewingMode=p.viewingMode||"global";p.initialState&&p.initialState.viewpoint&&(E.viewpoint=y.fromJSON(p.initialState.viewpoint));return new e(E)};ea.load=function(E){const p=this.ground;this.addResolvingPromise(this._loadFromSource().then(()=>{p&&p!==this.ground&&p.destroy()}));return Promise.resolve(this)};ea.loadAll=function(){return h.loadAll(this,E=>{const p=this.presentation&&this.presentation.slides;E(this.ground,this.basemap,this.layers,p&&p.map(g=>g.basemap))})};ea.read=function(E,
p){p={...p,origin:"web-scene"};const g=this._isAuthoringAppVersionSetByUser,q=this._isAuthoringAppSetByUser;ba.readLoadable(this,E,D=>k._get(k._getPrototypeOf(pa.prototype),"read",this).call(this,E,D),p);q||(this._isAuthoringAppSetByUser=!1);g||(this._isAuthoringAppVersionSetByUser=!1);if(E.baseMap&&Array.isArray(E.baseMap.elevationLayers)&&(this.sourceVersion?.supportsVisibleElevationLayersInSlides??!1)){p=E.baseMap.elevationLayers.map(aa=>({id:aa.id}));const D=this.presentation.slides,L=(aa,la)=>
aa.visibleLayers.some(qa=>qa.id===la),X=p.filter(aa=>!D.some(la=>L(la,aa.id)));D.forEach(aa=>{aa.visibleLayers.addMany(X)})}};ea._writeBasemapElevationLayers=function(E){const p=E.ground&&E.ground.layers;!E.baseMap&&p&&p.length&&(E.baseMap={title:"Basemap",baseMapLayers:[]});E.baseMap&&(E.baseMap.elevationLayers=f.clone(p))};ea.write=function(E,p){if("loaded"!==this.loadStatus)throw p=new t("webscene:not-loaded","Web scene must be loaded before it can be serialized"),v.getLogger(this).error("#toJSON()",
"Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),p;this._runLayersIdGC();var g=!p?.messages;p={messages:[],...p,origin:"web-scene"};E=k._get(k._getPrototypeOf(pa.prototype),"write",this).call(this,E,p);if(g&&(p=p.messages?.filter(q=>"web-document-write:property-required"===q.name)??[],p.length))throw g=new t("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:p}),
v.getLogger(this).error("#toJSON()","One or more properties that are required in the webscene JSON are missing",p),g;this._writeBasemapElevationLayers(E);return E};ea.save=async function(E){return this._debouncedSaveOperations(na.SAVE,E)};ea._saveImpl=async function(E){if(!this.portalItem)throw v.getLogger(this).error("save(): requires the .portalItem property to be set"),await Promise.resolve(),new t("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene");if("Web Scene"!==
this.portalItem?.type)throw await Promise.resolve(),new t("webscene:portal-item-wrong-type",'Portal item needs to have type "Web Scene"');const p=this._updateFromPromise;await this._ensureLoadBeforeSave();const g=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl?M.urlToObject(this.portalItem.itemUrl):null,messages:[],portal:this.portalItem.portal??da.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],
toKeep:[],pendingOperations:[]}}),q=this.write({},g);await Promise.all(g.resources.pendingOperations);await this._verifySave(q,g,E);this._updateTypeKeywords(this.portalItem);await this.portalItem.update({data:q});await ca.saveResources(this._resourceReferences,g,null);ka.updateOrigins(g);p&&await p;await this._saveThumbnail();return this.portalItem};ea.saveAs=async function(E,p){return this._debouncedSaveOperations(na.SAVE_AS,p,E)};ea._saveAsImpl=async function(E,p){E=d.from(E);E||(v.getLogger(this).error("saveAs(portalItem): requires a portal item parameter"),
await Promise.reject(new t("webscene:portal-item-required","saveAs requires a portal item to save to")));E.id&&(E=E.clone(),E.id=null);const g=E.portal||da.getDefault();await this._ensureLoadBeforeSave();E.type="Web Scene";E.portal=g;const q=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:g,portalItem:E,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),D=this.write({},q);await Promise.all(q.resources.pendingOperations);
await this._verifySaveAs(D,q,p);const L=this.thumbnailUrl,X=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(E);await g.signIn();await g.user?.addItem({item:E,folder:p&&p.folder,data:D});await ca.saveResources(this._resourceReferences,q,null);this.portalItem=E;G.MultiOriginJSONSupport.prototype.read.call(this,{version:D.version,authoringApp:D.authoringApp,authoringAppVersion:D.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:E.itemUrl?M.urlToObject(E.itemUrl):void 0});ka.updateOrigins(q);
L&&(this.thumbnailUrl=X?M.addQueryParameter(L,"w","8192"):L);q.portalItem=E;await this._saveThumbnail();return E};ea._saveThumbnail=async function(){this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))};ea._verifySave=function(E,p,g,q=!1){if(!S.isEarth(this.spatialReference))return Promise.reject(new t("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));
let D=p.messages?.filter(L=>"error"===L.type).map(L=>new t(L.name,L.message,L.details))??[];p.blockedRelativeUrls&&(D=D.concat(p.blockedRelativeUrls.map(L=>new t("url:unsupported",`Relative url '${L}' is not supported in Web Scene`))));g&&g.ignoreUnsupported&&(D=D.filter(L=>"layer:unsupported"!==L.name&&"symbol:unsupported"!==L.name&&"symbol-layer:unsupported"!==L.name&&"property:unsupported"!==L.name&&"url:unsupported"!==L.name&&"scenemodification:unsupported"!==L.name));g?.requiredPropertyChecksDisabled&&
(D=D.filter(L=>"web-document-write:property-required"!==L.name));p=!!g?.strictSchemaValidationEnabled;g=W.getLoader();return(p&&g?g().then(L=>{L=L.validate(E);if(0<L.length){const X=`webscene did not validate:\n${L.join("\n")}`;v.getLogger(this).error(`${q?"saveAs":"save"}(): ${X}`)}return L.map(X=>new t("webscene:schema-validation",X))}).then(L=>{if(0<L.length)throw V.createSchemaValidationError(L.concat(D));return D}):Promise.resolve(D)).then(L=>{if(0<L.length)throw new t("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",
{errors:L});})};ea._verifySaveAs=function(E,p,g){return this.canNotSaveAs(p)?Promise.reject(V.createCopyError()):this._verifySave(E,p,g,!0)};ea.verifySaveAs=function(E){const p=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),g=this.write({},p);return this._verifySaveAs(g,p,E)};ea.canNotSaveAs=function(E){E||(E=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),this.write({},E));return 0<(E.verifyItemRelativeUrls?.writtenUrls?.length??0)};ea.updateFrom=async function(E,
p={}){this._updateFromPromise=E=this._updateFrom(E,p);await E;this._updateFromPromise===E&&(this._updateFromPromise=null)};ea._updateFrom=async function(E,p={}){await E.whenReady();!p.environmentExcluded&&E.environment&&(this.initialViewProperties.environment=b.prototype.clone.apply(E.environment));!p.viewpointExcluded&&E.viewpoint&&(this.initialViewProperties.viewpoint=E.viewpoint.clone());this.initialViewProperties.spatialReference=E.spatialReference.clone();this.initialViewProperties.viewingMode=
E.viewingMode;null!=E.clippingArea?E.clippingArea!==this.clippingArea&&(this.clippingArea=E.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;E.heightModelInfo&&(this.heightModelInfo=E.heightModelInfo.clone());if(E.map===this)for(const g of E.allLayerViews)"visible"in g&&"visible"in g.layer&&g._isOverridden("visible")&&(g.layer.visible=g.visible);(!1===p.thumbnailExcluded||null==p.thumbnailExcluded&&!p.viewpointExcluded)&&await this._updateFromThumbnail(E,p.thumbnailSize??void 0)};
ea._updateFromThumbnail=async function(E,p){p=ia.getOptimalThumbnailSize(E,p);this.thumbnailUrl=(await E.takeScreenshot({format:"jpg",width:p.width,height:p.height,disableDecorations:!0})).dataUrl};ea._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()};ea._readAndLoadFromJSON=function(E,p){E=this._validateJSON(E);this.read(E,p);return this._loadFromJSON(E,
p)};ea._extractOperationalLayers=function(E){const p=[];if(!this.sourceVersion?.supportsGround&&E.baseMap&&Array.isArray(E.baseMap.elevationLayers))for(const D of E.baseMap.elevationLayers)p.push(D);const g=[],q=D=>{D.layers&&(D.layers=D.layers.filter(q));return"ArcGISTiledElevationServiceLayer"===D.layerType?(this.sourceVersion?.supportsGround||g.push(D),!1):!0};return{operationalLayers:E.operationalLayers?E.operationalLayers.filter(q):[],operationalElevationLayers:g,basemapElevationLayers:p}};ea._loadFromJSON=
function(E,p){const g=new F;return this._validateSpatialReference().then(()=>this._validateHeightModelInfo()).then(()=>new Promise((q,D)=>a(["./layers/support/layersCreator"],q,D))).then(({populateOperationalLayers:q})=>{const {operationalLayers:D,operationalElevationLayers:L,basemapElevationLayers:X}=this._extractOperationalLayers(E),aa=[],la={context:{...p,layerContainerType:"operational-layers"}};this.portalItem&&(la.context.portal=this.portalItem.portal||da.getDefault());0<X.length&&aa.push(q(this.ground.layers,
X,{...la,context:{...la.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));0<L.length&&aa.push(q(g,L,{...la,context:{...la.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));D&&0<D.length&&aa.push(q(this.layers,D,la));return B.eachAlways(aa).then(()=>{})}).then(()=>this._loadObjectsWithLayers()).then(()=>{this.ground.layers.addMany(g)})};ea._ensureLoadBeforeSave=async function(){await this.load();await this._loadObjectsWithLayers();
const E=[];var p=[...this.allLayers.items];for(const {basemap:g}of this.presentation.slides.items)g&&(p.push(...g.baseLayers.items),p.push(...g.referenceLayers.items));for(const g of p)"beforeSave"in g&&"function"===typeof g.beforeSave&&(p=g.beforeSave())&&E.push(p);await B.eachAlways(E)};ea._loadObjectsWithLayers=async function(){const E=[];this.ground&&E.push(this.ground.load());this.basemap&&E.push(this.basemap.load());this.presentation.slides.forEach(p=>{p.basemap&&E.push(p.basemap.load())});
await B.eachAlways(E)};ea._loadFromItem=async function(E){await E.load().catch(q=>{throw new t("webscene:load-portal-item","Failed to load portal item",{error:q});});if("Web Scene"!==E.type)throw new t("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:E.type});const p=await E.fetchData();this.resourceInfo=p;const g={origin:"web-scene",url:M.urlToObject(E.itemUrl),portal:E.portal||da.getDefault(),portalItem:E,readResourcePaths:[]};await this._readAndLoadFromJSON(p,
g);this._resourceReferences={portalItem:E,paths:g.readResourcePaths??[]}};ea._validateSpatialReference=function(){const E=this.initialViewProperties,p=this._sceneSpatialReference;let g=void 0;if("local"!==E.viewingMode){if(!ha.isSpatialReferenceSupported(p,Z.ViewingMode.Global))return Promise.reject(new t("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:p,viewingMode:E.viewingMode}));
g=L=>!L||w.canProjectWithoutEngine(L,p)}else{if(!ha.isSpatialReferenceSupported(p,Z.ViewingMode.Local))return Promise.reject(new t("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:p,viewingMode:E.viewingMode}));g=L=>!L||L.equals(p)}const q=L=>L?.camera?.position.spatialReference??L?.targetGeometry?.spatialReference;var D=q(E.viewpoint);return D&&!g(D)?Promise.reject(new t("webscene:incompatible-camera-spatial-reference",
"Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:D,sceneSpatialReference:p,viewingMode:E.viewingMode})):(D=this.presentation.slides.find(L=>!g(q(L.viewpoint))))?(D=q(D.viewpoint),Promise.reject(new t("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",
{slideSpatialReference:D,sceneSpatialReference:p,viewingMode:E.viewingMode}))):Promise.resolve()};ea._validateHeightModelInfo=function(){const E=P.validateWebSceneError(this.heightModelInfo,this._sceneSpatialReference);return E?Promise.reject(E):Promise.resolve()};ea._validateJSON=function(E){const p=J.Version.parse(E.version||"","webscene");fa.validate(p);E.version=`${p.major}.${p.minor}`;1===p.major&&2>=p.minor&&(E.spatialReference=I.WebMercator.toJSON());return E};ea._updateTypeKeywords=function(E){"local"===
this.initialViewProperties.viewingMode?E.typeKeywords?E.typeKeywords.includes("ViewingMode-Local")||E.typeKeywords.push("ViewingMode-Local"):E.typeKeywords=["ViewingMode-Local"]:"global"===this.initialViewProperties.viewingMode&&E.typeKeywords&&(E.typeKeywords=E.typeKeywords.filter(p=>"ViewingMode-Local"!==p));E.typeKeywords&&(E.typeKeywords=E.typeKeywords.filter((p,g,q)=>q.indexOf(p)===g))};ea._enableVerifyItemRelativeUrls=function(E){const p=this._verifyItemRelativeRootPath;p&&(E.verifyItemRelativeUrls=
{rootPath:p,writtenUrls:[]});return E};ea._unscheduleLayersIdGC=function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)};ea._scheduleLayersIdGC=function(){this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)};ea._runLayersIdGC=function(){this._unscheduleLayersIdGC();var E=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search;
const p=g=>this.allLayers.some(q=>q.id===g);E&&E.layers&&(E.layers=E.layers.filter(g=>p(g.id)));(E=this.presentation&&this.presentation.slides)&&E.forEach(g=>{g.visibleLayers&&(g.visibleLayers=g.visibleLayers.filter(q=>p(q.id)))})};pa.fromJSON=function(E){if(!E)throw new t("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:E})};k._createClass(pa,[{key:"thumbnailUrl",get:function(){return this.portalItem?.thumbnailUrl??null},set:function(E){E?this._override("thumbnailUrl",
E):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}},{key:"authoringApp",set:function(E){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",E)}},{key:"authoringAppVersion",set:function(E){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",E)}},{key:"spatialReference",get:function(){return this.initialViewProperties?.spatialReference??I.WebMercator}},{key:"viewingMode",get:function(){return this.initialViewProperties?.viewingMode??"global"}},{key:"_sceneSpatialReference",
get:function(){return this.initialViewProperties.spatialReference||I.WebMercator}},{key:"_verifyItemRelativeRootPath",get:function(){return this.portalItem?.itemUrl?M.urlToObject(this.portalItem.itemUrl).path:null}}]);return pa}(m.LoadableMixin(C.EsriPromiseMixin(G.MultiOriginJSONMixin(x))));var ma=K.WebSceneTag;x.version=`${fa.major}.${fa.minor}`;c.__decorate([O.property({type:r,json:{write:!0}})],x.prototype,"applicationProperties",void 0);c.__decorate([O.property({json:{read:{source:"baseMap"},
write:{target:"baseMap"}}})],x.prototype,"basemap",void 0);c.__decorate([O.property({type:ja,json:{read:{source:"clippingArea.geometry",reader:U.fromJSON},write:{target:"clippingArea.geometry"}}})],x.prototype,"clippingArea",void 0);c.__decorate([Q.writer("clippingArea")],x.prototype,"writeClippingArea",null);c.__decorate([O.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],x.prototype,"clippingEnabled",void 0);c.__decorate([T.reader("clippingEnabled",["clippingArea"])],x.prototype,
"readClippingEnabled",null);c.__decorate([Q.writer("clippingEnabled")],x.prototype,"writeClippingEnabled",null);c.__decorate([O.property({type:n,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],x.prototype,"floorInfo",void 0);c.__decorate([O.property({type:l,json:{write:!0}})],x.prototype,"heightModelInfo",void 0);c.__decorate([O.property({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],x.prototype,"layers",void 0);c.__decorate([Q.writer("layers")],x.prototype,"writeLayers",
null);c.__decorate([O.property({readOnly:!0,type:J.Version,json:{type:(()=>{const oa=[],pa=fa.major;for(let ea=8;ea<=fa.minor;ea++)oa.push(`${pa}.${ea}`);return oa})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],x.prototype,"sourceVersion",void 0);c.__decorate([T.reader("sourceVersion",["version"])],x.prototype,"readSourceVersion",null);c.__decorate([Q.writer("sourceVersion")],x.prototype,"writeSourceVersion",null);c.__decorate([O.property({json:{read:!1,
write:!1}})],x.prototype,"tables",void 0);c.__decorate([O.property()],x.prototype,"thumbnailUrl",null);c.__decorate([O.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],x.prototype,"authoringApp",null);c.__decorate([Q.writer("authoringApp")],x.prototype,"writeAuthoringApp",null);c.__decorate([O.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],x.prototype,"authoringAppVersion",null);c.__decorate([Q.writer("authoringAppVersion")],x.prototype,
"writeAuthoringAppVersion",null);c.__decorate([O.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],x.prototype,"ground",void 0);c.__decorate([Q.writer("ground")],x.prototype,"writeGround",null);c.__decorate([O.property({type:F.ofType(H),json:{write:!0}})],x.prototype,"transportationNetworks",void 0);c.__decorate([O.property({type:A,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(oa,pa,ea,E)=>{oa.slides&&0<oa.slides.length&&(pa.presentation=oa.write({},{...E,isPresentation:!0}))}}}})],
x.prototype,"presentation",void 0);c.__decorate([O.property({type:e,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new e({viewingMode:"global",spatialReference:I.WebMercator})}})],x.prototype,"initialViewProperties",void 0);c.__decorate([T.reader("initialViewProperties",["initialState.environment","spatialReference","viewingMode","initialState.viewpoint"])],x.prototype,"readInitialViewProperties",null);c.__decorate([O.property({type:I,json:{read:!1,write:{isRequired:!0,
ignoreOrigin:!0}}})],x.prototype,"spatialReference",null);c.__decorate([O.property({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],x.prototype,"viewingMode",null);c.__decorate([O.property({type:d})],x.prototype,"portalItem",void 0);c.__decorate([O.property()],x.prototype,"resourceInfo",void 0);x=c.__decorate([Y.subclass("esri.WebScene")],x);var na;(function(oa){oa[oa.SAVE=0]="SAVE";oa[oa.SAVE_AS=1]="SAVE_AS"})(na||(na={}));return x});