// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(ua,l,va,Xa,V,da,Ya,Za,$a,ea,L,R,W,ab,bb,fa,wa,cb,db,eb,u,fb,X,v,gb,hb){function ha(){return!!y&&fa.isLoaded()}function Y(a){null==S&&(S=Promise.all([fa.load(),(new Promise((c,b)=>ua(["../chunks/geometryEngineBase"],c,b))).then(c=>c.geometryEngineBase),new Promise((c,b)=>ua(["./geometryAdapters/hydrated"],c,b))]));return S.then(([,c,{hydratedAdapter:b}])=>{da.throwIfAborted(a);E=b;y=c.default;y._enableProjection(fa.pe);xa.notify()})}function ya(a,c,b=null,e=null){return Array.isArray(a)?0===
a.length?[]:ia(E,a,a[0].spatialReference,c,b,e):ia(E,[a],a.spatialReference,c,b,e)[0]}function ia(a,c,b,e,f=null,g=null){if(null==b||null==e)return c;if(T(b,e,f))return c.map(h=>za(h,b,e));if(null==f){const h=X.cacheKey(b,e);void 0!==Z[h]?f=Z[h]:(f=Aa(b,e,void 0),null==f&&(f=new X),Z[h]=f)}if(null==y||null==a)throw new aa;return null!=g?y._project(a,c,b,e,f,g):y._project(a,c,b,e,f)}function Ba(a,c){if(!ha())for(const b of a)if(null!=b&&!v.equals(b.spatialReference,c)&&v.isValid(b.spatialReference)&&
v.isValid(c)&&!T(b.spatialReference,c))return Za.trackAccess(xa),{pending:Y(),geometries:null};return{pending:null,geometries:a.map(b=>null==b?null:v.equals(b.spatialReference,c)?b:v.isValid(b.spatialReference)&&v.isValid(c)?Ca(b,c):null)}}function Aa(a,c,b=null){if(null==a||null==c)return null;if(null==y||null==E)throw new aa;a=y._getTransformation(E,a,c,b,b?.spatialReference);return null!==a?X.fromGE(a):null}function Ca(a,c){try{const b=ya(a,c);if(null==b)return null;"xmin"in a&&"xmin"in b&&(b.zmin=
a.zmin,b.zmax=a.zmax);const e=hb.getGeometryZScaler(b.type,a.spatialReference,c);null!=e&&e(b);return b}catch(b){if(!(b instanceof aa))throw b;return null}}function T(a,c,b){return b?!1:v.equals(a,c)?!0:v.isValid(a)&&v.isValid(c)&&!!ja(a,c,ka)}function za(a,c,b){return a?"x"in a?Da(a,c,new wa,b,0):"xmin"in a?Ea(a,c,new ab,b,0):"rings"in a?Fa(a,c,new cb,b,0):"paths"in a?Ga(a,c,new db,b,0):"points"in a?Ha(a,c,new bb,b,0):null:null}function Da(a,c,b,e,f){m[0]=a.x;m[1]=a.y;const g=a.z;m[2]=void 0!==g?
g:f;if(!z(m,c,0,m,e,0,1))return null;b.x=m[0];b.y=m[1];b.spatialReference=e;void 0===g?(b.z=void 0,b.hasZ=!1):(b.z=m[2],b.hasZ=!0);void 0===a.m?(b.m=void 0,b.hasM=!1):(b.m=a.m,b.hasM=!0);return b}function Ha(a,c,b,e,f){const {points:g,hasZ:h,hasM:k}=a;a=[];const t=g.length,r=[];for(var q of g)r.push(q[0],q[1],h?q[2]:f);if(!z(r,c,0,r,e,0,t))return null;for(c=0;c<t;++c){f=3*c;q=r[f];const w=r[f+1];h&&k?a.push([q,w,r[f+2],g[c][3]]):h?a.push([q,w,r[f+2]]):k?a.push([q,w,g[c][2]]):a.push([q,w])}b.points=
a;b.spatialReference=e;b.hasZ=h;b.hasM=k;return b}function Ga(a,c,b,e,f){const {paths:g,hasZ:h,hasM:k}=a;a=[];if(!Ia(g,h??!1,k??!1,c,a,e,f))return null;b.paths=a;b.spatialReference=e;b.hasZ=h;b.hasM=k;return b}function Fa(a,c,b,e,f){const {rings:g,hasZ:h,hasM:k}=a;a=[];if(!Ia(g,h??!1,k??!1,c,a,e,f))return null;b.rings=a;b.spatialReference=e;b.hasZ=h;b.hasM=k;return b}function Ea(a,c,b,e,f){const {xmin:g,ymin:h,xmax:k,ymax:t,hasZ:r,hasM:q}=a;if(!la(g,h,r?a.zmin:f,c,m,e))return null;b.xmin=m[0];b.ymin=
m[1];r&&(b.zmin=m[2]);if(!la(k,t,r?a.zmax:f,c,m,e))return null;b.xmax=m[0];b.ymax=m[1];r&&(b.zmax=m[2]);q&&(b.mmin=a.mmin,b.mmax=a.mmax);b.spatialReference=e;return b}function la(a,c,b,e,f,g){p[0]=a;p[1]=c;p[2]=b;return z(p,e,0,f,g,0,1)}function ma(a,c,b,e){if(null==c||null==e||2>a.length)return!1;2===a.length&&(p[0]=a[0],p[1]=a[1],p[2]=0,a=p);return z(a,c,0,b,e,0,1)}function Ja(a,c,b){if(null==c)return!1;c=C(c,P);c=x[c][d.WGS84_COMPARABLE_LON_LAT];if(null==c)return!1;c(a,0,p,0);b!==p&&(b[0]=p[0],
b[1]=p[1],2<b.length&&(b[2]=p[2]));return!0}function z(a,c,b,e,f,g,h=1){c=ja(c,f,ka);if(null==c)return!1;if(c===n){if(a===e&&b===g)return!0;h=b+3*h;for(let k=b,t=g;k<h;k++,t++)e[t]=a[k];return!0}h=b+3*h;for(let k=b,t=g;k<h;k+=3,t+=3)c(a,k,e,t);return!0}function Ia(a,c,b,e,f,g,h=0){const k=[];for(const t of a)for(const r of t)k.push(r[0],r[1],c?r[2]:h);if(!z(k,e,0,k,g,0,k.length/3))return!1;e=0;f.length=0;for(const t of a){a=[];for(const r of t)c&&b?a.push([k[e++],k[e++],k[e++],r[3]]):c?a.push([k[e++],
k[e++],k[e++]]):(b?a.push([k[e++],k[e++],r[2]]):a.push([k[e++],k[e++]]),e++);f.push(a)}return!0}function Ka(a,c,b,e){c=e+c;if(c<e/2||b>c)return Number.MAX_VALUE;a=Math.abs(A*a)+Math.asin(b/c);return a>=Math.PI/2?Number.MAX_VALUE:b/Math.cos(a)}function na(a,c,b){const e=Math.sin(a);a=Math.cos(a);const f=Math.sin(c);c=Math.cos(c);b[0]=-e;b[4]=-f*a;b[8]=c*a;b[12]=0;b[1]=a;b[5]=-f*e;b[9]=c*e;b[13]=0;b[2]=0;b[6]=c;b[10]=f;b[14]=0;b[3]=0;b[7]=0;b[11]=0;b[15]=1;return b}function La(a,c,b){na(a,c,b);ea.transpose(b,
b);return b}function C(a,c){if(!a)return d.UNKNOWN;if(c.spatialReference===a)return c.spatialReferenceId;c.spatialReference=a;"metersPerUnit"in c&&(c.metersPerUnit=Ya.getMetersPerUnitForSR(a,1));return a.wkt===W.SphericalECEFSpatialReferenceLike.wkt?c.spatialReferenceId=d.SPHERICAL_ECEF:v.isWGS84(a)?c.spatialReferenceId=d.WGS84:v.isWebMercator(a)?c.spatialReferenceId=d.WEB_MERCATOR:v.isPlateCarree(a)?c.spatialReferenceId=d.PLATE_CARREE:a.wkt===W.WGS84ECEFSpatialReferenceLike.wkt?c.spatialReferenceId=
d.WGS84_ECEF:a.wkid===gb.SupportedGCSWkids.CGCS2000?c.spatialReferenceId=d.CGCS2000:a.wkt===W.SphericalPCPFMarsLike.wkt?c.spatialReferenceId=d.SPHERICAL_MARS_PCPF:a.wkt===W.SphericalPCPFMoonLike.wkt?c.spatialReferenceId=d.SPHERICAL_MOON_PCPF:v.isMars(a)?c.spatialReferenceId=d.GCSMARS2000:v.isMoon(a)?c.spatialReferenceId=d.GCSMOON2000:c.spatialReferenceId=d.UNKNOWN}function n(a,c,b,e){a!==b&&(b[e++]=a[c++],b[e++]=a[c++],b[e]=a[c])}function M(a,c,b,e){b[e++]=Q*(a[c++]/u.earth.radius);b[e++]=Q*(Math.PI/
2-2*Math.atan(Math.exp(-a[c++]/u.earth.radius)));b[e]=a[c]}function Ma(a,c,b,e){M(a,c,b,e);F(b,e,b,e)}function Na(a,c,b,e){M(a,c,b,e);G(b,e,b,e)}function Oa(a,c,b,e,f){var g=.4999999*Math.PI;g=V.clamp(A*a[c+1],-g,g);g=Math.sin(g);b[e++]=A*a[c]*f.radius;b[e++]=f.halfSemiMajorAxis*Math.log((1+g)/(1-g));b[e]=a[c+2]}function N(a,c,b,e){Oa(a,c,b,e,u.earth)}function H(a,c,b,e){b[e]=a[c]*Pa;b[e+1]=a[c+1]*Pa;b[e+2]=a[c+2]}function O(a,c,b,e){b[e]=a[c]*U;b[e+1]=a[c+1]*U;b[e+2]=a[c+2]}function Qa(a,c,b,e){M(a,
c,b,e);H(b,e,b,e)}function oa(a,c,b,e,f){f+=a[c+2];const g=A*a[c+1];a=A*a[c];c=Math.cos(g);b[e++]=Math.cos(a)*c*f;b[e++]=Math.sin(a)*c*f;b[e]=Math.sin(g)*f}function pa(a,c,b,e){oa(a,c,b,e,u.moon.radius)}function qa(a,c,b,e){oa(a,c,b,e,u.mars.radius)}function F(a,c,b,e){oa(a,c,b,e,u.earth.radius)}function ba(a,c,b,e,f){var g=a[c];const h=a[c+1];c=a[c+2];a=Math.sqrt(g*g+h*h+c*c);c=V.asinClamped(c/(0===a?1:a));g=Math.atan2(h,g);b[e++]=Q*g;b[e++]=Q*c;b[e]=a-f}function ra(a,c,b,e){ba(a,c,b,e,u.moon.radius)}
function sa(a,c,b,e){ba(a,c,b,e,u.mars.radius)}function I(a,c,b,e){ba(a,c,b,e,u.earth.radius)}function Ra(a,c,b,e){I(a,c,b,e);N(b,e,b,e)}function Sa(a,c,b,e){I(a,c,b,e);G(b,e,b,e)}function G(a,c,b,e){var f=u.earth;const g=A*a[c];var h=A*a[c+1];a=a[c+2];c=Math.sin(h);h=Math.cos(h);const k=f.radius/Math.sqrt(1-f.eccentricitySquared*c*c);b[e++]=(k+a)*h*Math.cos(g);b[e++]=(k+a)*h*Math.sin(g);b[e++]=(k*(1-f.eccentricitySquared)+a)*c}function J(a,c,b,e){var f=fb.earthEllipsoidConstants,g=a[c],h=a[c+1];
a=a[c+2];let k;c=Math.abs(a);var t=g*g+h*h;var r=Math.sqrt(t);var q=t+a*a;var w=Math.sqrt(q);g=Math.atan2(h,g);var D=a*a/q;q=t/q;h=f.a2/w;t=f.a3-f.a4/w;.3<q?(D=c/w*(1+q*(f.a1+h+D*t)/w),w=Math.asin(D),h=D*D,q=Math.sqrt(1-h)):(q=r/w*(1-D*(f.a5-h-q*t)/w),w=Math.acos(q),h=1-q*q,D=Math.sqrt(h));k=1-u.earth.eccentricitySquared*h;h=u.earth.radius/Math.sqrt(k);f=f.a6*h;h=r-h*q;t=c-f*D;c=q*h+D*t;r=q*t-D*h;f=r/(f/k+c);w+=f;0>a&&(w=-w);b[e++]=Q*g;b[e++]=Q*w;b[e]=c+r*f/2}function Ta(a,c,b,e){J(a,c,b,e);F(b,e,
b,e)}function Ua(a,c,b,e){J(a,c,b,e);N(b,e,b,e)}function ja(a,c,b=ta()){return null==a||null==c?null:Va(a,c,b).projector}function Va(a,c,b){if(null==a||null==c||b.source.spatialReference===a&&b.dest.spatialReference===c)return b;const e=C(a,b.source),f=C(c,b.dest);e===d.UNKNOWN&&f===d.UNKNOWN?v.equals(a,c)?b.projector=n:b.projector=null:b.projector=x[e][f];return b}function ta(){return{source:{spatialReference:null,spatialReferenceId:d.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:d.UNKNOWN,
metersPerUnit:1},projector:n}}let y=null,E=null,S=null,Z={};const xa=new $a.SimpleObservable;let aa=function(a){function c(){return a.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}va._inherits(c,a);return va._createClass(c)}(Xa);var d;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";a[a.WGS84=2]="WGS84";a[a.WEB_MERCATOR=3]="WEB_MERCATOR";a[a.WGS84_ECEF=4]="WGS84_ECEF";a[a.CGCS2000=5]="CGCS2000";a[a.WGS84_COMPARABLE_LON_LAT=
6]="WGS84_COMPARABLE_LON_LAT";a[a.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";a[a.GCSMARS2000=8]="GCSMARS2000";a[a.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";a[a.GCSMOON2000=10]="GCSMOON2000";a[a.LON_LAT=11]="LON_LAT";a[a.PLATE_CARREE=12]="PLATE_CARREE"})(d||(d={}));const Pa=u.earth.radius*Math.PI/180,U=180/(u.earth.radius*Math.PI),x={[d.WGS84]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:n,[d.WGS84_COMPARABLE_LON_LAT]:n,[d.SPHERICAL_ECEF]:F,[d.SPHERICAL_MARS_PCPF]:null,
[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:N,[d.PLATE_CARREE]:H,[d.WGS84]:n,[d.WGS84_ECEF]:G},[d.CGCS2000]:{[d.CGCS2000]:n,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:n,[d.WGS84_COMPARABLE_LON_LAT]:n,[d.SPHERICAL_ECEF]:F,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:H,[d.WGS84]:null,[d.WGS84_ECEF]:G},[d.GCSMARS2000]:{[d.CGCS2000]:null,[d.GCSMARS2000]:n,[d.GCSMOON2000]:null,[d.LON_LAT]:n,[d.WGS84_COMPARABLE_LON_LAT]:null,
[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:qa,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.GCSMOON2000]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:n,[d.LON_LAT]:n,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:pa,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.WEB_MERCATOR]:{[d.CGCS2000]:null,
[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:M,[d.WGS84_COMPARABLE_LON_LAT]:M,[d.SPHERICAL_ECEF]:Ma,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:n,[d.PLATE_CARREE]:Qa,[d.WGS84]:M,[d.WGS84_ECEF]:Na},[d.WGS84_ECEF]:{[d.CGCS2000]:J,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:J,[d.WGS84_COMPARABLE_LON_LAT]:J,[d.SPHERICAL_ECEF]:Ta,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:Ua,[d.PLATE_CARREE]:function(a,
c,b,e){J(a,c,b,e);H(b,e,b,e)},[d.WGS84]:J,[d.WGS84_ECEF]:n},[d.SPHERICAL_ECEF]:{[d.CGCS2000]:I,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:I,[d.WGS84_COMPARABLE_LON_LAT]:I,[d.SPHERICAL_ECEF]:n,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:Ra,[d.PLATE_CARREE]:function(a,c,b,e){I(a,c,b,e);H(b,e,b,e)},[d.WGS84]:I,[d.WGS84_ECEF]:Sa},[d.SPHERICAL_MARS_PCPF]:{[d.CGCS2000]:null,[d.GCSMARS2000]:sa,[d.GCSMOON2000]:null,[d.LON_LAT]:sa,[d.WGS84_COMPARABLE_LON_LAT]:null,
[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:n,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.SPHERICAL_MOON_PCPF]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:ra,[d.LON_LAT]:ra,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:n,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.UNKNOWN]:{[d.CGCS2000]:null,
[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:null,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:n,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.LON_LAT]:{[d.CGCS2000]:n,[d.GCSMARS2000]:n,[d.GCSMOON2000]:n,[d.LON_LAT]:n,[d.WGS84_COMPARABLE_LON_LAT]:n,[d.SPHERICAL_ECEF]:F,[d.SPHERICAL_MARS_PCPF]:qa,[d.SPHERICAL_MOON_PCPF]:pa,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:N,[d.PLATE_CARREE]:H,
[d.WGS84]:n,[d.WGS84_ECEF]:G},[d.WGS84_COMPARABLE_LON_LAT]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:n,[d.WGS84_COMPARABLE_LON_LAT]:n,[d.SPHERICAL_ECEF]:F,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:H,[d.WGS84]:n,[d.WGS84_ECEF]:G},[d.PLATE_CARREE]:{[d.CGCS2000]:O,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:O,[d.WGS84_COMPARABLE_LON_LAT]:O,[d.SPHERICAL_ECEF]:function(a,c,b,e){O(a,c,b,e);F(b,
e,b,e)},[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:function(a,c,b,e){O(a,c,b,e);N(b,e,b,e)},[d.PLATE_CARREE]:n,[d.WGS84]:O,[d.WGS84_ECEF]:function(a,c,b,e){O(a,c,b,e);G(b,e,b,e)}}},P={spatialReference:null,spatialReferenceId:d.UNKNOWN},Wa={spatialReference:null,spatialReferenceId:d.UNKNOWN},ka=ta(),ib=ta(),A=V.deg2rad(1),Q=V.rad2deg(1),p=R.create(),B=R.create(),K=R.create(),m=R.create(),ca=R.create();l.canProjectToWGS84ComparableLonLat=function(a){if(null==
a)return!1;a=C(a,P);return!!x[a][d.WGS84_COMPARABLE_LON_LAT]};l.canProjectWithoutEngine=T;l.computeENUToSphericalPCPFLocalRotation=na;l.computeSphericalPCPFToENULocalRotation=La;l.computeTranslationToOriginAndRotation=function(a,c,b,e){if(null==a||null==e)return!1;var f=C(a,P),g=C(e,Wa);if(f===g&&g!==d.SPHERICAL_ECEF&&g!==d.SPHERICAL_MARS_PCPF&&g!==d.SPHERICAL_MOON_PCPF&&(f!==d.UNKNOWN||v.equals(a,e)))return ea.fromTranslation(b,c),!0;if(g===d.SPHERICAL_ECEF||g===d.SPHERICAL_MARS_PCPF||g===d.SPHERICAL_MOON_PCPF){f=
x[f][d.LON_LAT];g=x[d.LON_LAT][g];if(null==f||null==g)return!1;f(c,0,B,0);g(B,0,K,0);na(A*B[0],A*B[1],b);b[12]=K[0];b[13]=K[1];b[14]=K[2];return!0}if((g===d.WEB_MERCATOR||g===d.PLATE_CARREE)&&(f===d.WGS84||f===d.CGCS2000&&g===d.PLATE_CARREE||f===d.SPHERICAL_ECEF||f===d.WEB_MERCATOR)){a=x[f][d.LON_LAT];g=x[d.LON_LAT][g];if(null==a||null==g)return!1;a(c,0,B,0);g(B,0,K,0);f===d.SPHERICAL_ECEF?La(A*B[0],A*B[1],b):ea.identity(b);b[12]=K[0];b[13]=K[1];b[14]=K[2];return!0}return!1};l.getProjectorName=function(a,
c){switch(ja(a,c,ka)){case n:return"copy3";case F:return"wgs84ToSphericalECEF";case N:return"wgs84ToWebMercator";case H:return"wgs84ToPlateCarree";case G:return"wgs84ToWGS84ECEF";case M:return"webMercatorToWGS84";case Ma:return"webMercatorToSphericalECEF";case Na:return"webMercatorToWGS84ECEF";case Qa:return"webMercatorToPlateCarree";case J:return"wgs84ECEFToWGS84";case Ta:return"wgs84ECEFToSphericalECEF";case Ua:return"wgs84ECEFToWebMercator";case I:return"sphericalECEFToWGS84";case Ra:return"sphericalECEFToWebMercator";
case sa:return"sphericalMarsPCPFToMars2000";case ra:return"sphericalMoonPCPFToMoon2000";case Sa:return"sphericalECEFToWGS84ECEF";case qa:return"mars2000ToSphericalPCPF";case pa:return"moon2000ToSphericalPCPF";default:return null}};l.getTransformation=Aa;l.getTransformations=function(a,c,b=null){if(null==y||null==E)throw new aa;a=y._getTransformationBySuitability(E,a,c,b,b?.spatialReference);if(null!==a){c=[];for(const e of a)c.push(X.fromGE(e));return c}return[]};l.initializeProjection=async function(a,
c,b,e){if(ha())return da.waitTick(e);if(Array.isArray(a))for(const {source:f,dest:g,geographicTransformation:h}of a){if(!T(f,g,h))return Y(e)}else if(!T(a,c,b))return Y(e);return da.waitTick(e)};l.isLoaded=ha;l.load=Y;l.localLinearScaleFactors=function(a,c,b,e){if(null==c||null==e)return!1;const f=C(c,P);var g=C(e,Wa);if(f===g&&f!==d.UNKNOWN||v.equals(c,e))return b[0]=1,b[1]=1,b[2]=1,!0;if(f===d.SPHERICAL_ECEF){c=L.length(a);a=c/Math.sqrt(a[0]*a[0]+a[1]*a[1]);c/=u.earth.radius;if(g===d.WEB_MERCATOR)return b[0]=
a*c,b[1]=a*c,b[2]=1,!0;if(g===d.WGS84||g===d.CGCS2000)return g=U,b[0]=g*a*c,b[1]=g*c,b[2]=1,!0}else if(f===d.PLATE_CARREE){if(g===d.WGS84||g===d.CGCS2000)return b[0]=U,b[1]=U,b[2]=1,!0;if(g===d.WEB_MERCATOR)return g=a[1]/u.earth.radius,b[0]=1,b[1]=1/Math.cos(g),b[2]=1,!0}return!1};l.lonLatToSphericalPCPF=function(a,c,b,e){const f=Math.cos(b);a[0]=Math.cos(c)*f*e;a[1]=Math.sin(c)*f*e;a[2]=Math.sin(b)*e};l.lonLatToWebMercatorComparable=Oa;l.project=ya;l.projectBoundingRect=function(a,c,b,e){if(null==
a)return!1;if(v.equals(c,e))return eb.copy(b,a),!0;p[0]=a[0];p[1]=a[1];p[2]=0;if(!z(p,c,0,p,e,0,1))return!1;b[0]=p[0];b[1]=p[1];p[0]=a[2];p[1]=a[3];p[2]=0;if(!z(p,c,0,p,e,0,1))return!1;b[2]=p[0];b[3]=p[1];return!0};l.projectBoundingSphere=function(a,c,b,e){if(null==c||null==e)return!1;c=Va(c,e,ib);if(c.projector===n)return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],!0;if(null==c.projector)return!1;const {source:f,dest:g}=c;if(g.spatialReferenceId===d.WEB_MERCATOR){c=x[f.spatialReferenceId][d.WGS84];
if(null==c)return!1;c(a,0,B,0);N(B,0,b,0);b[3]=Ka(B[1],a[2],a[3],u.earth.radius);return!0}if(f.spatialReferenceId!==d.WGS84&&f.spatialReferenceId!==d.CGCS2000||g.spatialReferenceId!==d.PLATE_CARREE)c.projector(a,0,b,0),b[3]=a[3]*(f.metersPerUnit??1)/(g.metersPerUnit??1);else{e=x[d.SPHERICAL_ECEF][d.PLATE_CARREE];let h=a[3];null!=x[f.spatialReferenceId][d.SPHERICAL_ECEF]&&null!=e&&(h=Ka(a[1],a[2],a[3],u.earth.radius));c.projector(a,0,b,0);b[3]=h}return!0};l.projectBuffer=z;l.projectDirection=function(a,
c,b,e,f){L.copy(m,a);L.add(ca,a,c);ma(m,b,m,f);ma(ca,b,ca,f);L.subtract(e,ca,m);L.normalize(e,e)};l.projectExtent=function(a,c,b=c.spatialReference,e=0){return null!=a.spatialReference&&null!=b&&null!=Ea(a,a.spatialReference,c,b,e)};l.projectMany=ia;l.projectMultipoint=function(a,c,b=c.spatialReference,e=0){return null!=a.spatialReference&&null!=b&&null!=Ha(a,a.spatialReference,c,b,e)};l.projectOrLoad=function(a,c){a=Ba([a],c);return null!=a.pending?{pending:a.pending,geometry:null}:null!=a.geometries?
{pending:null,geometry:a.geometries[0]}:{pending:null,geometry:null}};l.projectOrLoadMany=Ba;l.projectPoint=function(a,c,b=c.spatialReference,e=0){return null!=b&&null!=a.spatialReference&&null!=Da(a,a.spatialReference,c,b,e)};l.projectPointToVector=function(a,c,b,e=0){m[0]=a.x;m[1]=a.y;const f=a.z;m[2]=void 0!==f?f:e;return z(m,a.spatialReference,0,c,b,0,1)};l.projectPointToWGS84ComparableLonLat=function(a,c){m[0]=a.x;m[1]=a.y;const b=a.z;m[2]=void 0!==b?b:0;return Ja(m,a.spatialReference,c)};l.projectPolygon=
function(a,c,b=c.spatialReference,e=0){return null!=a.spatialReference&&null!=b&&null!=Fa(a,a.spatialReference,c,b,e)};l.projectPolygonToWGS84ComparableLonLat=function({hasZ:a,spatialReference:c,rings:b},e,f=0){c=C(c,P);c=x[c][d.WGS84_COMPARABLE_LON_LAT];if(null==c)return!1;a=a?g=>g:g=>L.set(m,g[0],g[1],f);for(const g of b){b=[];for(const h of g){const k=[0,0,f];c(a(h),0,k,0);b.push(k)}e.push(b)}return!0};l.projectPolyline=function(a,c,b=c.spatialReference,e=0){return null!=a.spatialReference&&null!=
b&&null!=Ga(a,a.spatialReference,c,b,e)};l.projectPolylineToWGS84ComparableLonLat=function({hasZ:a,spatialReference:c,paths:b},e,f=0){c=C(c,P);c=x[c][d.WGS84_COMPARABLE_LON_LAT];if(null==c)return!1;a=a?g=>g:g=>L.set(m,g[0],g[1],f);for(const g of b){b=[];for(const h of g){const k=[0,0,f];c(a(h),0,k,0);b.push(k)}e.push(b)}return!0};l.projectVectorToDehydratedPoint=function(a,c,b){return z(a,c,0,m,b.spatialReference,0,1)?(b.x=m[0],b.y=m[1],b.z=m[2],b):null};l.projectVectorToPoint=function(a,c,b){if(null==
c||null==b)return null;const e=new wa({spatialReference:b});return z(a,c,0,m,b,0,1)?(e.x=m[0],e.y=m[1],e.z=m[2],e):null};l.projectVectorToVector=ma;l.projectVectorToWGS84ComparableLonLat=function(a,c,b){return Ja(a,c,b)};l.projectWithoutEngine=za;l.projectXYZToVector=la;l.sphericalPCPFtoLonLatElevation=ba;l.test={get loadPromise(){return S}};l.tryProjectWithZConversion=Ca;l.unload=function(){S=E=y=null;Z={}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});