// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/earcut ./coordsUtils ./DoubleArray ./Indices ./meshUtils/deduplicate".split(" "),function(m,B,C,t,y,z){function D(a,h,d){if(1===a.length)return a[0];h=t.newDoubleArray(h);d=Array(d);let e=0,b=0,l=0;for(const k of a){for(a=0;a<k.position.length;a++)h[e++]=k.position[a];for(const f of k.faces)d[b++]=f+l;l=e/3}return{position:h,faces:y.compactIndices(d)}}function A(a,h,d){const e=a.length,b=Array(e),l=Array(e),k=Array(e);let f=0,n=0,u=0;var p=0;for(var g=0;g<e;++g)p+=a[g].length;
p=t.newDoubleArray(3*p);g=0;for(let w=e-1;0<=w;w--){var c=a[w],q=d===m.CounterClockwiseMode.CCW_IS_HOLE?!C.isClockwise(c,!1,!1):!1;if(q&&1!==e)b[f++]=c;else{var r=c.length;for(let x=0;x<f;++x)r+=b[x].length;r={index:g,pathLengths:Array(f+1),count:r,holeIndices:Array(f)};r.pathLengths[0]=c.length;0<c.length&&(k[u++]={index:g,count:c.length});g=q?v(c,c.length-1,-1,p,g,c.length,h):v(c,0,1,p,g,c.length,h);for(c=0;c<f;++c)q=b[c],r.holeIndices[c]=g,r.pathLengths[c+1]=q.length,0<q.length&&(k[u++]={index:g,
count:q.length}),g=v(q,0,1,p,g,q.length,h);f=0;0<r.count&&(l[n++]=r)}}for(a=0;a<f;++a)d=b[a],0<d.length&&(k[u++]={index:g,count:d.length}),g=v(d,0,1,p,g,d.length,h);l.length=n;k.length=u;return{position:p,polygons:l,outlines:k}}function v(a,h,d,e,b,l,k){b*=3;for(let f=0;f<l;++f){const n=a[h];e[b++]=n[0];e[b++]=n[1];e[b++]=k?n[2]:0;h+=d}return b/3}m.CounterClockwiseMode=void 0;(function(a){a[a.NONE=0]="NONE";a[a.CCW_IS_HOLE=1]="CCW_IS_HOLE"})(m.CounterClockwiseMode||(m.CounterClockwiseMode={}));m.pathsToTriangulationInfo=
A;m.triangulate=function(a){a=A(a.rings,a.hasZ,m.CounterClockwiseMode.CCW_IS_HOLE);const h=[];let d=0,e=0;for(var b of a.polygons){const k=b.index,f=t.doubleSubArray(a.position,3*k,3*b.count);var l=b.holeIndices.map(n=>n-k);l=y.compactIndices(B.earcut(f,l,3));h.push({position:f,faces:l});d+=f.length;e+=l.length}b=D(h,d,e);a=Array.isArray(b.position)?z.deduplicate(b.position,3,{originalIndices:b.faces}):z.deduplicate(b.position.buffer,6,{originalIndices:b.faces});b.position=t.doubleArrayFrom(new Float64Array(a.buffer));
b.faces=a.indices;return b};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});