// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/arrayUtils ../../../core/promiseUtils ../../../layers/support/infoFor3D".split(" "),function(e,m,v,w,n,g){function p(a){return Array.isArray(a)?a.every(c=>c instanceof h):!1}function q(a){return a?Array.isArray(a)?a.some(k):k(a):!1}function k(a){if(a instanceof File){const {type:c,name:b}=a;return r.test(c)||t.test(b)}return r.test(a.assetMimeType)||t.test(a.assetName)}function u(a,c){return Array.isArray(a)?
a.every(b=>l(b,c)):l(a,c)}function l(a,c){return a instanceof h&&a.isOnService(c)}let h=function(){function a(b,d,f){this.assetName=b;this.assetMimeType=d;this.parts=f}var c=a.prototype;c.equals=function(b){return this===b||this.assetName===b.assetName&&this.assetMimeType===b.assetMimeType&&w.equals(this.parts,b.parts,(d,f)=>d.equals(f))};c.isOnService=function(b){return this.parts.every(d=>d.isOnService(b))};c.makeHash=function(){let b="";for(const d of this.parts)b+=d.partHash;return b};c.toBlob=
async function(b){var {parts:d}=this;if(1===d.length)return d[0].toBlob(b);d=await Promise.all(d.map(f=>f.toBlob(b)));n.throwIfAborted(b);return new Blob(d)};return m._createClass(a)}(),x=function(){function a(b,d){this.partUrl=b;this.partHash=d}var c=a.prototype;c.equals=function(b){return this===b||this.partUrl===b.partUrl&&this.partHash===b.partHash};c.isOnService=function(b){return this.partUrl.startsWith(`${b.path}/assets/`)};c.toBlob=async function(b){const {data:d}=await v(this.partUrl,{responseType:"blob"});
n.throwIfAborted(b);return d};return m._createClass(a)}();const r=/^(model\/gltf\+json)|(model\/gltf-binary)$/,t=/\.(gltf|glb)/i;e.ServiceAsset=h;e.ServiceAssetPart=x;e.assetFormatId=function(a,c){return a instanceof File?g.getFilenameFormatId(a.name,c)??g.getMimeTypeFormatId(a.type,c):g.getMimeTypeFormatId(a.assetMimeType,c)??g.getFilenameFormatId(a.assetName,c)};e.assetIsOnService=l;e.externalIsOnService=function(a,c){if(!a)return!1;({source:a}=a);return u(a,c)};e.externalSourceToMultiPart=function(a){return Array.isArray(a)?
a:[a]};e.externalSourcesAreEqual=function(a,c){if(a===c)return!0;({source:a}=a);({source:c}=c);if(a===c)return!0;if(p(a)&&p(c)){if(a.length!==c.length)return!1;var b=(d,f)=>d.assetName<f.assetName?-1:d.assetName>f.assetName?1:0;a=[...a].sort(b);c=[...c].sort(b);for(b=0;b<a.length;++b)if(!a[b].equals(c[b]))return!1;return!0}return!1};e.isDisplayAsset=k;e.isDisplayExternal=function(a){return q(a?.source)};e.isDisplaySource=q;e.isOriginalExternal=function(a){return!!a.original};e.sourceIsOnService=u;
Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});