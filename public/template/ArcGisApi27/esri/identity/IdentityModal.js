// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/handleUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../widgets/Widget ../widgets/support/widget ../widgets/support/jsxFactory ../widgets/support/decorators/messageBundle".split(" "),function(ca,F,ta,ua,H,X,da,Na,va,B,wa,C,xa){function ea(t,r){var d=Object.keys(t);if(Object.getOwnPropertySymbols){var a=
Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(b){return Object.getOwnPropertyDescriptor(t,b).enumerable}));d.push.apply(d,a)}return d}function fa(t){for(var r=1;r<arguments.length;r++){var d=null!=arguments[r]?arguments[r]:{};r%2?ea(Object(d),!0).forEach(function(a){var b=d[a];a:if("object"===typeof a&&null!==a){var f=a[Symbol.toPrimitive];if(void 0!==f){a=f.call(a,"string");if("object"!==typeof a)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}a=
"symbol"===typeof a?a:String(a);a in t?Object.defineProperty(t,a,{value:b,enumerable:!0,configurable:!0,writable:!0}):t[a]=b}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(d)):ea(Object(d)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(d,a))})}return t}X='input:not([inert]) select:not([inert]) textarea:not([inert]) a[href]:not([inert]) button:not([inert]) [tabindex]:not(slot):not([inert]) audio[controls]:not([inert]) video[controls]:not([inert]) [contenteditable]:not([contenteditable\x3d"false"]):not([inert]) details\x3esummary:first-of-type:not([inert]) details:not([inert])'.split(" ");
var Q=X.join(","),E=(da="undefined"===typeof Element)?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,R=!da&&Element.prototype.getRootNode?function(t){var r;return null===t||void 0===t?void 0:null===(r=t.getRootNode)||void 0===r?void 0:r.call(t)}:function(t){return null===t||void 0===t?void 0:t.ownerDocument},S=function a(r,d){var b;void 0===d&&(d=!0);var f=null===r||void 0===r?void 0:null===(b=r.getAttribute)||void 0===b?void 0:
b.call(r,"inert");return""===f||"true"===f||d&&r&&a(r.parentNode)},ha=function(r,d,a){if(S(r))return[];var b=Array.prototype.slice.apply(r.querySelectorAll(Q));d&&E.call(r,Q)&&b.unshift(r);return b=b.filter(a)},ia=function f(d,a,b){for(var h=[],g=Array.from(d);g.length;){var k=g.shift();if(!S(k,!1))if("SLOT"===k.tagName){var m=k.assignedElements();m=f(m.length?m:k.children,!0,b);b.flatten?h.push.apply(h,m):h.push({scopeParent:k,candidates:m})}else{E.call(k,Q)&&b.filter(k)&&(a||!d.includes(k))&&h.push(k);
m=k.shadowRoot||"function"===typeof b.getShadowRoot&&b.getShadowRoot(k);var p=!S(m,!1)&&(!b.shadowRootFilter||b.shadowRootFilter(k));m&&p?(m=f(!0===m?k.children:m.children,!0,b),b.flatten?h.push.apply(h,m):h.push({scopeParent:k,candidates:m})):g.unshift.apply(g,k.children)}}return h},ja=function(d,a){if(0>d.tabIndex){if(!(a=a||/^(AUDIO|VIDEO|DETAILS)$/.test(d.tagName))){var b;a=null===d||void 0===d?void 0:null===(b=d.getAttribute)||void 0===b?void 0:b.call(d,"contenteditable");a=""===a||"true"===
a}if(a&&isNaN(parseInt(d.getAttribute("tabindex"),10)))return 0}return d.tabIndex},ya=function(d,a){return d.tabIndex===a.tabIndex?d.documentOrder-a.documentOrder:d.tabIndex-a.tabIndex},za=function(d){return"DETAILS"===d.tagName&&Array.prototype.slice.apply(d.children).some(function(a){return"SUMMARY"===a.tagName})},Aa=function(d,a){for(var b=0;b<d.length;b++)if(d[b].checked&&d[b].form===a)return d[b]},Ba=function(d){if(!d.name)return!0;var a=d.form||R(d),b=function(h){return a.querySelectorAll('input[type\x3d"radio"][name\x3d"'+
h+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)var f=b(window.CSS.escape(d.name));else try{f=b(d.name)}catch(h){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",h.message),!1}b=Aa(f,d.form);return!b||b===d},ka=function(d){d=d.getBoundingClientRect();var a=d.height;return 0===d.width&&0===a},Ca=function(d,a){var b=a.displayCheck;
a=a.getShadowRoot;if("hidden"===getComputedStyle(d).visibility)return!0;var f=E.call(d,"details\x3esummary:first-of-type")?d.parentElement:d;if(E.call(f,"details:not([open]) *"))return!0;if(!b||"full"===b||"legacy-full"===b){if("function"===typeof a){for(f=d;d;){var h=d.parentElement,g=R(d);if(h&&!h.shadowRoot&&!0===a(h))return ka(d);d=d.assignedSlot?d.assignedSlot:h||g===d.ownerDocument?h:g.host}d=f}a=d;var k;f=a&&R(a);h=null===(k=f)||void 0===k?void 0:k.host;k=!1;if(f&&f!==a){var m,p,v;for(k=!!(null!==
(m=h)&&void 0!==m&&null!==(p=m.ownerDocument)&&void 0!==p&&p.contains(h)||null!==a&&void 0!==a&&null!==(v=a.ownerDocument)&&void 0!==v&&v.contains(a));!k&&h;){var y,u,w;f=R(h);h=null===(y=f)||void 0===y?void 0:y.host;k=!(null===(u=h)||void 0===u||null===(w=u.ownerDocument)||void 0===w||!w.contains(h))}}if(k)return!d.getClientRects().length;if("legacy-full"!==b)return!0}else if("non-zero-area"===b)return ka(d);return!1},T=function(d,a){var b;(b=a.disabled||S(a))||(b="INPUT"===a.tagName&&"hidden"===
a.type);if(!(d=b||Ca(a,d)||za(a)))a:{if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(a.tagName))for(d=a.parentElement;d;){if("FIELDSET"===d.tagName&&d.disabled){for(b=0;b<d.children.length;b++){var f=d.children.item(b);if("LEGEND"===f.tagName){d=E.call(d,"fieldset[disabled] *")?!0:!f.contains(a);break a}}d=!0;break a}d=d.parentElement}d=!1}return d?!1:!0},Y=function(d,a){return"INPUT"===a.tagName&&"radio"===a.type&&!Ba(a)||0>ja(a)||!T(d,a)?!1:!0},Da=function(d){d=parseInt(d.getAttribute("tabindex"),10);
return isNaN(d)||0<=d?!0:!1},Ea=function b(a){var f=[],h=[];a.forEach(function(g,k){var m=!!g.scopeParent,p=m?g.scopeParent:g,v=ja(p,m),y=m?b(g.candidates):p;0===v?m?f.push.apply(f,y):f.push(p):h.push({documentOrder:k,tabIndex:v,item:g,isScope:m,content:y})});return h.sort(ya).reduce(function(g,k){k.isScope?g.push.apply(g,k.content):g.push(k.content);return g},[]).concat(f)},Fa=function(a,b){b=b||{};a=b.getShadowRoot?ia([a],b.includeContainer,{filter:Y.bind(null,b),flatten:!1,getShadowRoot:b.getShadowRoot,
shadowRootFilter:Da}):ha(a,b.includeContainer,Y.bind(null,b));return Ea(a)},Ga=function(a,b){b=b||{};return b.getShadowRoot?ia([a],b.includeContainer,{filter:T.bind(null,b),flatten:!0,getShadowRoot:b.getShadowRoot}):ha(a,b.includeContainer,T.bind(null,b))},U=function(a,b){b=b||{};if(!a)throw Error("No node provided");return!1===E.call(a,Q)?!1:Y(b,a)},Ha=X.concat("iframe").join(","),Z=function(a,b){b=b||{};if(!a)throw Error("No node provided");return!1===E.call(a,Ha)?!1:T(b,a)},la={activateTrap:function(a,
b){if(0<a.length){var f=a[a.length-1];f!==b&&f.pause()}f=a.indexOf(b);-1!==f&&a.splice(f,1);a.push(b)},deactivateTrap:function(a,b){b=a.indexOf(b);-1!==b&&a.splice(b,1);0<a.length&&a[a.length-1].unpause()}},I=function(a){return"Tab"===a.key||9===a.keyCode},Ia=function(a){return I(a)&&!a.shiftKey},Ja=function(a){return I(a)&&a.shiftKey},ma=function(a,b){var f=-1;a.every(function(h,g){return b(h)?(f=g,!1):!0});return f},J=function(a){for(var b=arguments.length,f=Array(1<b?b-1:0),h=1;h<b;h++)f[h-1]=
arguments[h];return"function"===typeof a?a.apply(void 0,f):a},V=function(a){return a.target.shadowRoot&&"function"===typeof a.composedPath?a.composedPath()[0]:a.target},Ka=[],Ma=function(a,b){var f=(null===b||void 0===b?void 0:b.document)||document,h=(null===b||void 0===b?void 0:b.trapStack)||Ka,g=fa({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Ia,isKeyBackward:Ja},b),k=[],m=[],p=[],v=null,y=null,u=!1,w=!1,K=void 0,A=function(q,c,e){return q&&void 0!==q[c]?q[c]:
g[e||c]},L=function(q,c){var e="function"===typeof(null===c||void 0===c?void 0:c.composedPath)?c.composedPath():void 0;return m.findIndex(function(l){var n=l.container;l=l.tabbableNodes;return n.contains(q)||(null===e||void 0===e?void 0:e.includes(n))||l.find(function(x){return x===q})})},M=function(q){var c=g[q];if("function"===typeof c){for(var e=arguments.length,l=Array(1<e?e-1:0),n=1;n<e;n++)l[n-1]=arguments[n];c=c.apply(void 0,l)}!0===c&&(c=void 0);if(!c){if(void 0===c||!1===c)return c;throw Error("`".concat(q,
"` was specified but was not a node, or did not return a node"));}e=c;if("string"===typeof c&&(e=f.querySelector(c),!e))throw Error("`".concat(q,"` as selector refers to no known node"));return e},N=function(){var q=M("initialFocus");if(!1===q)return!1;void 0!==q&&Z(q,g.tabbableOptions)||(q=0<=L(f.activeElement)?f.activeElement:(q=p[0])&&q.firstTabbableNode||M("fallbackFocus"));if(!q)throw Error("Your focus-trap needs to have at least one focusable element");return q},O=function(){m=k.map(function(q){var c=
Fa(q,g.tabbableOptions),e=Ga(q,g.tabbableOptions);return{container:q,tabbableNodes:c,focusableNodes:e,firstTabbableNode:0<c.length?c[0]:null,lastTabbableNode:0<c.length?c[c.length-1]:null,nextTabbableNode:function(l){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,x=e.findIndex(function(z){return z===l});if(!(0>x))return n?e.slice(x+1).find(function(z){return U(z,g.tabbableOptions)}):e.slice(0,x).reverse().find(function(z){return U(z,g.tabbableOptions)})}}});p=m.filter(function(q){return 0<
q.tabbableNodes.length});if(0>=p.length&&!M("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");},G=function e(c){!1!==c&&c!==f.activeElement&&(c&&c.focus?(c.focus({preventScroll:!!g.preventScroll}),y=c,c.tagName&&"input"===c.tagName.toLowerCase()&&"function"===typeof c.select&&c.select()):e(N()))},na=function(c){var e=M("setReturnFocus",c);return e?e:!1===e?!1:c},W=function(c){var e=V(c);0<=L(e,c)||(J(g.clickOutsideDeactivates,
c)?D.deactivate({returnFocus:g.returnFocusOnDeactivate}):J(g.allowOutsideClick,c)||c.preventDefault())},oa=function(c){var e=V(c),l=0<=L(e,c);l||e instanceof Document?l&&(y=e):(c.stopImmediatePropagation(),G(y||N()))},La=function(c){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,l=V(c);O();var n=null;if(0<p.length){var x=L(l,c),z=0<=x?m[x]:void 0;0>x?n=e?p[p.length-1].lastTabbableNode:p[0].firstTabbableNode:e?(e=ma(p,function(aa){return l===aa.firstTabbableNode}),0>e&&(z.container===
l||Z(l,g.tabbableOptions)&&!U(l,g.tabbableOptions)&&!z.nextTabbableNode(l,!1))&&(e=x),0<=e?n=p[0===e?p.length-1:e-1].lastTabbableNode:I(c)||(n=z.nextTabbableNode(l,!1))):(e=ma(p,function(aa){return l===aa.lastTabbableNode}),0>e&&(z.container===l||Z(l,g.tabbableOptions)&&!U(l,g.tabbableOptions)&&!z.nextTabbableNode(l))&&(e=x),0<=e?n=p[e===p.length-1?0:e+1].firstTabbableNode:I(c)||(n=z.nextTabbableNode(l)))}else n=M("fallbackFocus");n&&(I(c)&&c.preventDefault(),G(n))},pa=function(c){"Escape"!==c.key&&
"Esc"!==c.key&&27!==c.keyCode||!1===J(g.escapeDeactivates,c)?(g.isKeyForward(c)||g.isKeyBackward(c))&&La(c,g.isKeyBackward(c)):(c.preventDefault(),D.deactivate())},qa=function(c){var e=V(c);0<=L(e,c)||J(g.clickOutsideDeactivates,c)||J(g.allowOutsideClick,c)||(c.preventDefault(),c.stopImmediatePropagation())},ra=function(){if(u)return la.activateTrap(h,D),K=g.delayInitialFocus?setTimeout(function(){G(N())},0):G(N()),f.addEventListener("focusin",oa,!0),f.addEventListener("mousedown",W,{capture:!0,passive:!1}),
f.addEventListener("touchstart",W,{capture:!0,passive:!1}),f.addEventListener("click",qa,{capture:!0,passive:!1}),f.addEventListener("keydown",pa,{capture:!0,passive:!1}),D},sa=function(){if(u)return f.removeEventListener("focusin",oa,!0),f.removeEventListener("mousedown",W,!0),f.removeEventListener("touchstart",W,!0),f.removeEventListener("click",qa,!0),f.removeEventListener("keydown",pa,!0),D};b=function(c){c.some(function(e){return Array.from(e.removedNodes).some(function(l){return l===y})})&&
G(N())};var ba="undefined"!==typeof window&&"MutationObserver"in window?new MutationObserver(b):void 0,P=function(){ba&&(ba.disconnect(),u&&!w&&k.map(function(c){ba.observe(c,{subtree:!0,childList:!0})}))};var D={get active(){return u},get paused(){return w},activate:function(c){if(u)return this;var e=A(c,"onActivate"),l=A(c,"onPostActivate"),n=A(c,"checkCanFocusTrap");n||O();u=!0;w=!1;v=f.activeElement;null===e||void 0===e?void 0:e();c=function(){n&&O();ra();P();null===l||void 0===l?void 0:l()};
if(n)return n(k.concat()).then(c,c),this;c();return this},deactivate:function(c){if(!u)return this;var e=fa({onDeactivate:g.onDeactivate,onPostDeactivate:g.onPostDeactivate,checkCanReturnFocus:g.checkCanReturnFocus},c);clearTimeout(K);K=void 0;sa();w=u=!1;P();la.deactivateTrap(h,D);var l=A(e,"onDeactivate"),n=A(e,"onPostDeactivate");c=A(e,"checkCanReturnFocus");var x=A(e,"returnFocus","returnFocusOnDeactivate");null===l||void 0===l?void 0:l();e=function(){setTimeout(function(){x&&G(na(v));null===
n||void 0===n?void 0:n()},0)};if(x&&c)return c(na(v)).then(e,e),this;e();return this},pause:function(c){if(w||!u)return this;var e=A(c,"onPause");c=A(c,"onPostPause");w=!0;null===e||void 0===e?void 0:e();sa();P();null===c||void 0===c?void 0:c();return this},unpause:function(c){if(!w||!u)return this;var e=A(c,"onUnpause");c=A(c,"onPostUnpause");w=!1;null===e||void 0===e?void 0:e();O();ra();P();null===c||void 0===c?void 0:c();return this},updateContainerElements:function(c){k=[].concat(c).filter(Boolean).map(function(e){return"string"===
typeof e?f.querySelector(e):e});u&&O();P();return this}};D.updateContainerElements(a);return D};B=function(a){function b(h,g){var k=a.call(this,h,g)||this;k.container=document.createElement("div");k.content=null;k.open=!1;k._focusTrap=null;k._close=()=>{k.open=!1};document.body.appendChild(k.container);k.addHandles(ua.watch(()=>k.open,()=>k._toggleFocusTrap()));return k}ca._inherits(b,a);var f=b.prototype;f.destroy=function(){this._destroyFocusTrap()};f.render=function(){var h=this.id;const {open:g,
content:k,title:m,messages:p}=this;var v=g&&!!k;const y={["esri-identity-modal--open"]:v,["esri-identity-modal--closed"]:!v},u=C.tsx("button",{class:"esri-identity-modal__close-button","aria-label":p.close,title:p.close,bind:this,onclick:this._close,type:"button"},C.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})),w=`${h}_title`;h=`${h}_content`;const K=m?C.tsx("h1",{id:w,class:"esri-identity-modal__title"},m):null;v=v?C.tsx("div",{bind:this,class:"esri-identity-modal__dialog",role:"dialog",
"aria-labelledby":w,"aria-describedby":h,afterCreate:this._createFocusTrap},u,K,this._renderContent(h)):null;return C.tsx("div",{tabIndex:-1,class:this.classes("esri-identity-modal",y)},v)};f._destroyFocusTrap=function(){this._focusTrap?.deactivate({onDeactivate:()=>{}});this._focusTrap=null};f._toggleFocusTrap=function(){const {_focusTrap:h,open:g}=this;h&&(g?h.activate():h.deactivate())};f._createFocusTrap=function(h){this._destroyFocusTrap();const g=requestAnimationFrame(()=>{this._focusTrap=Ma(h,
{initialFocus:"input",onDeactivate:this._close});this._toggleFocusTrap()});this.addHandles(ta.makeHandle(()=>cancelAnimationFrame(g)))};f._renderContent=function(h){const g=this.content;return"string"===typeof g?C.tsx("div",{class:"esri-identity-modal__content",id:h,innerHTML:g}):wa.isWidget(g)?C.tsx("div",{class:"esri-identity-modal__content",id:h},g.render()):g instanceof HTMLElement?C.tsx("div",{class:"esri-identity-modal__content",id:h,bind:g,afterCreate:this._attachToNode}):null};f._attachToNode=
function(h){h.appendChild(this)};ca._createClass(b,[{key:"title",get:function(){return this.messages?.auth.signIn}}]);return b}(B);F.__decorate([H.property({readOnly:!0})],B.prototype,"container",void 0);F.__decorate([H.property()],B.prototype,"content",void 0);F.__decorate([H.property()],B.prototype,"open",void 0);F.__decorate([H.property(),xa.messageBundle("esri/t9n/common")],B.prototype,"messages",void 0);F.__decorate([H.property()],B.prototype,"title",null);return B=F.__decorate([va.subclass("esri.identity.IdentityModal")],
B)});