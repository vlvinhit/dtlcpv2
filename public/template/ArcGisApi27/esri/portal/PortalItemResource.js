// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(n,l,c,b,p,q,k,f,r,w,x,t){b=function(m){function g(a){a=m.call(this,a)||this;a.portalItem=null;return a}l._inherits(g,m);var d=g.prototype;d.normalizeCtorArgs=function(a){return a&&a.portalItem&&
a.path?{...a,path:this._normalizePath(a.path,a.portalItem)}:a};d._castPath=function(a){return this._normalizePath(a,this.portalItem)};d.fetch=function(a="json",e){const h=this.cdnUrl;if(null==h)throw new p("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(h,{responseType:a,query:{token:this.portalItem.apiKey},signal:e?.signal})};d.update=async function(a,e){const {addOrUpdateResource:h}=await new Promise((u,v)=>n(["./support/resourceUtils"],
u,v));return h(this,"update",a,e)};d.hasPath=function(){return null!=this.path};d._normalizePath=function(a,e){if(null==a)return a;a=a.replace(/^\/+/,"");null!=e&&k.isAbsolute(a)&&(a=k.makeRelative(a,e.itemUrl));return a?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")};l._createClass(g,[{key:"path",set:function(a){null!=a&&k.isAbsolute(a)?q.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",a)}},{key:"url",get:function(){return this.portalItem&&
this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}},{key:"cdnUrl",get:function(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}},{key:"itemRelativeUrl",get:function(){return this.portalItem&&this.path?`./resources/${this.path}`:null}}]);return g}(b);c.__decorate([f.property()],b.prototype,"portalItem",void 0);c.__decorate([f.property({type:String,value:null})],b.prototype,"path",null);c.__decorate([r.cast("path")],b.prototype,"_castPath",
null);c.__decorate([f.property({type:String,readOnly:!0})],b.prototype,"url",null);c.__decorate([f.property({type:String,readOnly:!0})],b.prototype,"cdnUrl",null);c.__decorate([f.property({type:String,readOnly:!0})],b.prototype,"itemRelativeUrl",null);return b=c.__decorate([t.subclass("esri.portal.PortalItemResource")],b)});