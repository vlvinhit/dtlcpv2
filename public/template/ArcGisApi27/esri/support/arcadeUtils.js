// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/chunks/arcade":function(){define("require exports ../arcade/arcadeCompiler ../arcade/ArcadeModuleResolver ../arcade/arcadeRuntime ../arcade/executionError ../arcade/parser ../arcade/treeAnalysis ../core/has ../core/maybe".split(" "),function(t,K,B,w,f,a,C,E,p,x){function z(e,q){if(!0===q.useAsync||!0===e.isAsync)return l(e,q);if(p("esri-csp-restrictions"))return function(I){return f.executeScript(e,I)};try{return B.compileScript(e,q)}catch(I){if("esri.arcade.arcadeuncompilableerror"===
I.declaredRootClass)return function(M){return f.executeScript(e,M)};throw I;}}function l(e,q){if(null===H)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.AsyncNotEnabled,null);if(p("esri-csp-restrictions"))return function(I){return H.executeScript(e,I)};try{return B.compileScript(e,q,!0)}catch(I){if("esri.arcade.arcadeuncompilableerror"===I.declaredRootClass)return function(M){return H.executeScript(e,M)};throw I;}}function m(e){f.extend(e);B.extend(e,"sync");null===H?O.push(e):(B.extend(e,
"async"),H.extend(e))}function n(e,q=[]){return C.parseScript(e,q)}function c(e,q,I=[]){e=C.parseScript(e,I);return d(e,q)}function d(e,q){if(!0===q.useAsync||!0===e.isAsync){if(null===H)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.AsyncNotEnabled,null);return H.executeScript(e,q)}return f.executeScript(e,q)}function k(e,q){return E.referencesMember(e,q)}function y(e,q){return E.referencesFunction(e,q)}function u(e,q=!1){void 0===q&&(q=!1);return E.findFieldLiterals(e)}function D(e){return E.findExpectedFieldLiterals(e)}
function h(e,q=[]){void 0===e.usesGeometry&&E.findScriptDependencies(e,q);return!0===e.usesGeometry}function g(){return G?G:G=v()}async function v(){const [e,q]=await Promise.all([new Promise((I,M)=>t(["../geometry/geometryEngine"],I,M)),new Promise((I,M)=>t(["../arcade/functions/geomsync"],I,M))]);F=!0;q.setGeometryEngine(e);return!0}function r(){return null!==Q?Q:Q=N()}async function N(){await B.enableAsyncSupport();H=await new Promise((e,q)=>t(["../arcade/arcadeAsyncRuntime"],e,q));for(const e of O)H.extend(e),
B.extend(e,"async");O=null;return!0}function b(){return J}function U(){return H?!0:!1}function ba(){return F}function Y(){return P?P:P=ia()}async function ia(){await r();const [e,q,I,M,T]=await Promise.all([new Promise((X,ca)=>t(["../arcade/featureSetUtils"],X,ca)),new Promise((X,ca)=>t(["../arcade/functions/featuresetbase"],X,ca)),new Promise((X,ca)=>t(["../arcade/functions/featuresetgeom"],X,ca)),new Promise((X,ca)=>t(["../arcade/functions/featuresetstats"],X,ca)),new Promise((X,ca)=>t(["../arcade/functions/featuresetstring"],
X,ca))]);S=e;H.extend([q,I,M,T]);B.extend([q,I,M,T],"async");return J=!0}function pa(e,q=[]){void 0===e.usesFeatureSet&&E.findScriptDependencies(e,q);return!0===e.usesFeatureSet}function Ba(e,q=[]){void 0===e.isAsync&&E.findScriptDependencies(e,q);return!0===e.isAsync}async function wa(e,q,I=[],M=!1,T=null){return oa(new Set,e,q,I,M,T)}async function oa(e,q,I,M=[],T=!1,X=null){q="string"===typeof q?n(q):q;const ca=[];if(q&&(!1===F&&(h(q)||T)&&ca.push(g()),!1===U()&&(!0===q.isAsync||I)&&ca.push(r()),
!1===J)){var aa;if(!(aa=pa(q)))a:{if(M)for(const ja of M)if(k(q,ja)){aa=!0;break a}aa=!1}aa&&ca.push(Y())}ca.length&&await Promise.all(ca);await W(e,q,X,I,T);return!0}function la(e,q=[]){void 0===e.usesModules&&E.findScriptDependencies(e,q);return!0===e.usesModules}async function W(e,q,I=null,M=!1,T=!1){var X=E.findModuleImports(q);null===I&&0<X.length&&(I=w.ArcadeModuleResolver.getDefault());q.loadedModules={};for(const ca of X){x.assertIsSome(I);X=I.normalizeModuleUri(ca.source);if(e.has(X.uri))throw new a.ArcadeExecutionError(null,
a.ExecutionErrorCodes.CircularModules,null);e.add(X.uri);const aa=await I.fetchModule(X);await oa(e,aa,M,[],T,I);e.delete(X.uri);aa.isAsync&&(q.isAsync=!0);aa.usesFeatureSet&&(q.usesFeatureSet=!0);aa.usesGeometry&&(q.usesGeometry=!0);q.loadedModules[ca.libname]={uri:X.uri,script:aa}}}function ka(e){if(h(e))return!0;e=E.findFunctionCalls(e);let q=!1;for(let I=0;I<e.length;I++)if(ra.includes(e[I])){q=!0;break}return q}function sa(){return S}const ra="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" ");
let J=!1,F=!1,H=null,O=[],G=null,Q=null,P=null,S=null;const da=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:oa,compileScript:z,enableAsyncSupport:r,enableAsyncSupportImpl:N,enableFeatureSetSupport:Y,enableFeatureSetSupportImpl:ia,enableGeometrySupport:g,enableGeometrySupportImpl:v,executeScript:d,extend:m,extractExpectedFieldLiterals:D,extractFieldLiterals:u,featureSetUtils:sa,isAsyncEnabled:U,isFeatureSetSupportEnabled:b,isGeometryEnabled:ba,loadDependentModules:W,
loadScriptDependencies:wa,parseAndExecuteScript:c,parseScript:n,referencesFunction:y,referencesMember:k,scriptIsAsync:Ba,scriptTouchesGeometry:ka,scriptUsesFeatureSet:pa,scriptUsesGeometryEngine:h,scriptUsesModules:la},Symbol.toStringTag,{value:"Module"}));K._loadScriptDependenciesImpl=oa;K.arcade=da;K.compileScript=z;K.enableAsyncSupport=r;K.enableAsyncSupportImpl=N;K.enableFeatureSetSupport=Y;K.enableFeatureSetSupportImpl=ia;K.enableGeometrySupport=g;K.enableGeometrySupportImpl=v;K.executeScript=
d;K.extend=m;K.extractExpectedFieldLiterals=D;K.extractFieldLiterals=u;K.featureSetUtils=sa;K.isAsyncEnabled=U;K.isFeatureSetSupportEnabled=b;K.isGeometryEnabled=ba;K.loadDependentModules=W;K.loadScriptDependencies=wa;K.parseAndExecuteScript=c;K.parseScript=n;K.referencesFunction=y;K.referencesMember=k;K.scriptIsAsync=Ba;K.scriptTouchesGeometry=ka;K.scriptUsesFeatureSet=pa;K.scriptUsesGeometryEngine=h;K.scriptUsesModules=la})},"esri/arcade/arcadeCompiler":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ./Dictionary ./Feature ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Geometry ../geometry/SpatialReference ./ArcadeModuleLoader ./ArcadeModule ./FunctionWrapper ./executionError".split(" "),
function(t,K,B,w,f,a,C,E,p,x,z,l,m,n,c,d,k,y,u,D,h){function g(e,q,I){try{return I(e,null,q.arguments)}catch(M){throw M;}}function v(e,q){try{switch(q.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return ia(e,q);case "VariableDeclaration":var I=[];for(var M=0;M<q.declarations.length;M++)I.push(v(e,q.declarations[M]));return I.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":case "Program":return ba(e,q);case "FunctionDeclaration":{const ha=
q.id.name.toLowerCase();Y(ha);var T="",X=!1;void 0!==e.globalScope[ha]?T=ha:void 0!==e.globalScope._SymbolsMap[ha]?T=e.globalScope._SymbolsMap[ha]:e.undeclaredGlobalsInFunctions.has(ha)?(T=e.undeclaredGlobalsInFunctions.get(ha).manglename,e.globalScope._SymbolsMap[ha]=T,e.mangleMap[ha]=T,e.undeclaredGlobalsInFunctions.delete(ha),X=!0):(T=wa(e),e.globalScope._SymbolsMap[ha]=T,e.mangleMap[ha]=T);M={isAsync:e.isAsync,console:e.console,exports:e.exports,undeclaredGlobalsInFunctions:e.undeclaredGlobalsInFunctions,
customfunctions:e.customfunctions,moduleFactory:e.moduleFactory,moduleFactoryMap:e.moduleFactoryMap,libraryResolver:e.libraryResolver,lrucache:e.lrucache,interceptor:e.interceptor,services:e.services,symbols:e.symbols,mangleMap:e.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:e.depthCounter,globalScope:e.globalScope};var ca="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(var aa=0;aa<q.params.length;aa++){const Ca=q.params[aa].name.toLowerCase();Y(Ca);const Da=wa(e);M.localScope._SymbolsMap[Ca]=Da;M.mangleMap[Ca]=Da;ca+="lscope['"+Da+"']\x3darguments["+aa.toString()+"];\n"}!0===e.isAsync?(ca=ca+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(ba(M,q.body)+"\n return lastStatement; "),ca=ca+"});  }, runtimeCtx),"+(q.params.length+")")):ca+=ba(M,q.body)+"\n return lastStatement; }, runtimeCtx),"+q.params.length+")";ca+="\n lastStatement \x3d lc.voidOperation; \n";
I=X?"gscope[lang.setAssig('"+T+"', runtimeCtx)]\x3d"+ca:"gscope['"+T+"']\x3d"+ca}return I;case "ImportDeclaration":{const ha=q.specifiers[0].local.name.toLowerCase();Y(ha);const Ca=e.libraryResolver?.loadLibrary(ha),Da=wa(e);void 0===e.moduleFactory[Ca.uri]&&(e.moduleFactory[Ca.uri]=J(Ca.syntax,{interceptor:e.interceptor,services:e.services,moduleFactory:e.moduleFactory,lrucache:e.lrucache,timeReference:e.timeReference??null,libraryResolver:e.libraryResolver,customfunctions:e.customfunctions,vars:{}},
e.isAsync));e.moduleFactoryMap[Da]=Ca.uri;q="";q=e.isAsync?"(yield lang.loadModule('"+Da+"', runtimeCtx) ); ":"lang.loadModule('"+Da+"', runtimeCtx); ";void 0!==e.globalScope[ha]?T="gscope['"+ha+"']\x3d"+q:void 0!==e.globalScope._SymbolsMap[ha]?T="gscope['"+e.globalScope._SymbolsMap[ha]+"']\x3d"+q:(I="",e.undeclaredGlobalsInFunctions.has(ha)?(I=e.undeclaredGlobalsInFunctions.get(ha).manglename,e.undeclaredGlobalsInFunctions.delete(ha)):I=wa(e),e.globalScope._SymbolsMap[ha]=I,e.mangleMap[ha]=I,T="gscope[lang.setAssig('"+
I+"', runtimeCtx)]\x3d"+q)}return T;case "ExportNamedDeclaration":const Aa=v(e,q.declaration);if("FunctionDeclaration"===q.declaration.type)e.exports[q.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===q.declaration.type)for(const ha of q.declaration.declarations)e.exports[ha.id.name.toLowerCase()]="variable";return Aa;case "ReturnStatement":var ja=null===q.argument?"return lc.voidOperation":"return "+v(e,q.argument);return ja;case "IfStatement":return U(e,q);case "ExpressionStatement":var fa=
"AssignmentExpression"===q.expression.type?"lastStatement \x3d lc.voidOperation; "+v(e,q.expression)+"; \n ":"lastStatement \x3d "+v(e,q.expression)+"; ";return fa;case "AssignmentExpression":return N(e,q);case "UpdateExpression":return r(e,q);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{I=[];M=0;for(const ha of q.quasis)I.push(ha.value?JSON.stringify(ha.value.cooked):JSON.stringify("")),!1===ha.tail&&(I.push(q.expressions[M]?"lang.castString(lang.aCheck("+
v(e,q.expressions[M])+", 'TemplateLiteral'))":""),M++);X="(["+I.join(",")+"]).join('')"}catch(ha){throw ha;}return X;case "TemplateElement":return JSON.stringify(q.value?q.value.cooked:"");case "ForStatement":I="lastStatement \x3d lc.voidOperation; \n";null!==q.init&&(I+=v(e,q.init)+"; ");const Ga=oa(e),Ea=oa(e);I+="var "+Ga+" \x3d true; \n do { ";null!==q.update&&(I+=" if ("+Ga+"\x3d\x3d\x3dfalse) {\n "+v(e,q.update)+"  \n}\n "+Ga+"\x3dfalse; \n");null!==q.test&&(I+="var "+Ea+" \x3d "+v(e,q.test)+
"; ",I+="if ("+Ea+"\x3d\x3d\x3dfalse) { break; } else if ("+Ea+"!\x3d\x3dtrue) { lang.error('"+h.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n");I+=v(e,q.body);null!==q.update&&(I+="\n "+v(e,q.update));return I+("\n"+Ga+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":aa=oa(e);const ya=oa(e),V=oa(e);let ma="var "+aa+" \x3d "+v(e,q.right)+";\n";"VariableDeclaration"===q.left.type&&(ma+=v(e,q.left));let ta="VariableDeclaration"===q.left.type?q.left.declarations[0].id.name:
q.left.name;ta=ta.toLowerCase();Y(ta);I="";null!==e.localScope&&(void 0!==e.localScope[ta]?I="lscope['"+ta+"']":void 0!==e.localScope._SymbolsMap[ta]&&(I="lscope['"+e.localScope._SymbolsMap[ta]+"']"));M="";if(""===I)if(void 0!==e.globalScope[ta])I="gscope['"+ta+"']";else if(void 0!==e.globalScope._SymbolsMap[ta])I="gscope['"+e.globalScope._SymbolsMap[ta]+"']";else if(null!==e.localScope)if(e.undeclaredGlobalsInFunctions.has(ta))I="gscope['"+e.undeclaredGlobalsInFunctions.get(ta).manglename+"']",M=
e.undeclaredGlobalsInFunctions.get(ta).manglename;else{const ha={manglename:wa(e),node:q.left};e.undeclaredGlobalsInFunctions.set(ta,ha);I="gscope['"+ha.manglename+"']";M=ha.manglename}M&&(ma+="lang.chkAssig('"+M+"',runtimeCtx); \n");ma=ma+("if ("+aa+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(aa+") || lc.isString("+aa+")) {var ")+(ya+"\x3d"+aa+".length; \nfor(var ")+(V+"\x3d0; "+V+"\x3c"+ya+"; "+V+"++) {\n");ma+=I+"\x3d"+V+";\n";ma+=v(e,q.body);ma+="\n}\n";
ma+=" lastStatement \x3d lc.voidOperation; \n";ma+=" \n}\n";ma+="else if (lc.isImmutableArray("+aa+")) {";ma=ma+("var "+ya+"\x3d"+aa+".length(); \nfor(var ")+(V+"\x3d0; "+V+"\x3c"+ya+"; "+V+"++) {\n");ma+=I+"\x3d"+V+";\n";ma+=v(e,q.body);ma+="\n}\n";ma+=" lastStatement \x3d lc.voidOperation; \n";ma+=" \n}\n";ma+="else if (( "+aa+" instanceof lang.Dictionary) || ( "+aa+" instanceof lang.Feature)) {";ma=ma+("var "+ya+"\x3d"+aa+".keys(); \nfor(var ")+(V+"\x3d0; "+V+"\x3c"+ya+".length; "+V+"++) {\n");
ma+=I+"\x3d"+ya+"["+V+"];\n";ma+=v(e,q.body);ma+="\n}\n";ma+=" lastStatement \x3d lc.voidOperation; \n";ma+=" \n}\n";e.isAsync&&(ma+="else if (lc.isFeatureSet("+aa+")) {",ma=ma+("var "+ya+"\x3d"+aa+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(V+"\x3dlang. graphicToFeature( yield "+ya+".next(),"+aa+", runtimeCtx); "+V+"!\x3dnull; "+V+"\x3dlang. graphicToFeature( yield "+ya+".next(),"+aa+", runtimeCtx)) {\n")+(I+"\x3d"+V+";\n"),ma+=v(e,q.body),ma+="\n}\n",ma+=" lastStatement \x3d lc.voidOperation; \n",
ma+=" \n}\n");return ma+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":I="lastStatement \x3d lc.voidOperation; \n";const Ha=oa(e);return I+=`\n  var ${Ha} = true;\n    do {\n      ${Ha} = ${v(e,q.test)};\n      if (${Ha}==false) {\n        break;\n      }\n      if (${Ha}!==true) {\n        lang.error('${h.ExecutionErrorCodes.BooleanConditionRequired}');\n      }\n      ${v(e,q.body)}\n    }\n    while (${Ha} !== false);\n    lastStatement = lc.voidOperation;\n  `;case "Identifier":return pa(e,
q);case "MemberExpression":try{let ha;!0===q.computed?ha=v(e,q.property):(ha="'"+q.property.name+"'",Y(q.property.name));var ua="lang.member("+v(e,q.object)+","+ha+")"}catch(ha){throw ha;}return ua;case "Literal":return null===q.value||void 0===q.value?"null":JSON.stringify(q.value);case "CallExpression":return Ba(e,q);case "UnaryExpression":try{var xa="lang.unary("+v(e,q.argument)+",'"+q.operator+"')"}catch(ha){throw ha;}return xa;case "BinaryExpression":try{var Fa="lang.binary("+v(e,q.left)+","+
v(e,q.right)+",'"+q.operator+"')"}catch(ha){throw ha;}return Fa;case "LogicalExpression":try{if("AssignmentExpression"===q.left.type||"UpdateExpression"===q.left.type)throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,q);if("AssignmentExpression"===q.right.type||"UpdateExpression"===q.right.type)throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,q);if("\x26\x26"===q.operator||"||"===q.operator)var Ia="(lang.logicalCheck("+v(e,
q.left)+") "+q.operator+" lang.logicalCheck("+v(e,q.right)+"))";else throw new h.ArcadeCompilationError(null,h.ExecutionErrorCodes.LogicExpressionOrAnd,null);}catch(ha){throw ha;}return Ia;case "ArrayExpression":try{I=[];for(M=0;M<q.elements.length;M++)"Literal"===q.elements[M].type?I.push(v(e,q.elements[M])):I.push("lang.aCheck("+v(e,q.elements[M])+",'ArrayExpression')");ca="["+I.join(",")+"]"}catch(ha){throw ha;}return ca;case "ObjectExpression":I="lang.dictionary([";for(M=0;M<q.properties.length;M++){const ha=
q.properties[M];Y(ha.key.name);const Ca="Identifier"===ha.key.type?"'"+ha.key.name+"'":v(e,ha.key),Da=v(e,ha.value);0<M&&(I+=",");I+="lang.strCheck("+Ca+",'ObjectExpression'),lang.aCheck("+Da+", 'ObjectExpression')"}return I+"])";case "Property":throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.NeverReach,q);case "Array":throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.NeverReach,q);default:throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.Unrecognised,q);}}catch(Aa){throw Aa;
}}function r(e,q){let I=null;var M="";if("MemberExpression"===q.argument.type)return I=v(e,q.argument.object),!0===q.argument.computed?M=v(e,q.argument.property):(M="'"+q.argument.property.name+"'",Y(q.argument.property.name)),"lang.memberupdate("+I+","+M+",'"+q.operator+"',"+q.prefix+")";I=q.argument.name.toLowerCase();Y(I);if(null!==e.localScope){if(void 0!==e.localScope[I])return"lang.update(lscope, '"+I+"','"+q.operator+"',"+q.prefix+")";if(void 0!==e.localScope._SymbolsMap[I])return"lang.update(lscope, '"+
e.localScope._SymbolsMap[I]+"','"+q.operator+"',"+q.prefix+")"}if(void 0!==e.globalScope[I])return"lang.update(gscope, '"+I+"','"+q.operator+"',"+q.prefix+")";if(void 0!==e.globalScope._SymbolsMap[I])return"lang.update(gscope, '"+e.globalScope._SymbolsMap[I]+"','"+q.operator+"',"+q.prefix+")";if(null!==e.localScope){if(e.undeclaredGlobalsInFunctions.has(I))return"lang.update(gscope,lang.chkAssig( '"+e.undeclaredGlobalsInFunctions.get(I).manglename+"',runtimeCtx),'"+q.operator+"',"+q.prefix+")";M=
{manglename:wa(e),node:q.argument};e.undeclaredGlobalsInFunctions.set(I,M);return"lang.update(gscope, lang.chkAssig('"+M.manglename+"',runtimeCtx),'"+q.operator+"',"+q.prefix+")"}throw new h.ArcadeExecutionError(e,h.ExecutionErrorCodes.InvalidIdentifier,q);}function N(e,q){const I=v(e,q.right);let M=null;var T="";if("MemberExpression"===q.left.type)return M=v(e,q.left.object),!0===q.left.computed?T=v(e,q.left.property):(T="'"+q.left.property.name+"'",Y(q.left.property.name)),"lang.assignmember("+
M+","+T+",'"+q.operator+"',"+I+")";M=q.left.name.toLowerCase();Y(M);if(null!==e.localScope){if(void 0!==e.localScope[M])return"lscope['"+M+"']\x3dlang.assign("+I+",'"+q.operator+"', lscope['"+M+"'])";if(void 0!==e.localScope._SymbolsMap[M])return"lscope['"+e.localScope._SymbolsMap[M]+"']\x3dlang.assign("+I+",'"+q.operator+"', lscope['"+e.localScope._SymbolsMap[M]+"'])"}if(void 0!==e.globalScope[M])return"gscope['"+M+"']\x3dlang.assign("+I+",'"+q.operator+"', gscope['"+M+"'])";if(void 0!==e.globalScope._SymbolsMap[M])return"gscope['"+
e.globalScope._SymbolsMap[M]+"']\x3dlang.assign("+I+",'"+q.operator+"', gscope['"+e.globalScope._SymbolsMap[M]+"'])";if(null!==e.localScope){if(e.undeclaredGlobalsInFunctions.has(M))return"gscope[lang.chkAssig('"+e.undeclaredGlobalsInFunctions.get(M).manglename+"',runtimeCtx)]\x3dlang.assign("+I+",'"+q.operator+"', gscope['"+e.undeclaredGlobalsInFunctions.get(M).manglename+"'])";T={manglename:wa(e),node:q.argument};e.undeclaredGlobalsInFunctions.set(M,T);return"gscope[lang.chkAssig('"+T.manglename+
"',runtimeCtx)]\x3dlang.assign("+I+",'"+q.operator+"', gscope['"+T.manglename+"'])"}throw new h.ArcadeExecutionError(e,h.ExecutionErrorCodes.InvalidIdentifier,q);}function b(e,q){return"BlockStatement"===q.type?v(e,q):"ReturnStatement"===q.type||"BreakStatement"===q.type||"ContinueStatement"===q.type?v(e,q)+"; ":"UpdateExpression"===q.type?"lastStatement \x3d "+v(e,q)+"; ":"ExpressionStatement"===q.type?v(e,q):"ObjectExpression"===q.type?"lastStatement \x3d "+v(e,q)+"; ":v(e,q)+"; "}function U(e,
q){if("AssignmentExpression"===q.test.type||"UpdateExpression"===q.test.type)throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.BooleanConditionRequired,q);return`if (lang.mustBoolean(${v(e,q.test)}, runtimeCtx) === true) {\n    ${b(e,q.consequent)}\n  } `+(null!==q.alternate?"IfStatement"===q.alternate.type?" else "+U(e,q.alternate):` else {\n      ${b(e,q.alternate)}\n    }\n`:" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function ba(e,q){let I="";for(let M=0;M<q.body.length;M++)"EmptyStatement"!==
q.body[M].type&&(I="ReturnStatement"===q.body[M].type?I+(v(e,q.body[M])+"; \n"):"BreakStatement"===q.body[M].type?I+(v(e,q.body[M])+"; \n"):"ContinueStatement"===q.body[M].type?I+(v(e,q.body[M])+"; \n"):"UpdateExpression"===q.body[M].type?I+("lastStatement \x3d "+v(e,q.body[M])+"; \n"):"ObjectExpression"===q.body[M].type?I+("lastStatement \x3d "+v(e,q.body[M])+"; \n"):I+(v(e,q.body[M])+" \n"));return I}function Y(e){if("iif"===e)throw new h.ArcadeUncompilableError;if("decode"===e)throw new h.ArcadeUncompilableError;
if("when"===e)throw new h.ArcadeUncompilableError;}function ia(e,q){let I=null===q.init?null:v(e,q.init);I===a.voidOperation&&(I=null);q=q.id.name.toLowerCase();Y(q);if(null!==e.localScope){if(void 0!==e.localScope[q])return"lscope['"+q+"']\x3d"+I+"; ";if(void 0!==e.localScope._SymbolsMap[q])return"lscope['"+e.localScope._SymbolsMap[q]+"']\x3d"+I+"; ";var M=wa(e);e.localScope._SymbolsMap[q]=M;e.mangleMap[q]=M;return"lscope['"+M+"']\x3d"+I+"; "}if(void 0!==e.globalScope[q])return"gscope['"+q+"']\x3d"+
I+"; ";if(void 0!==e.globalScope._SymbolsMap[q])return"gscope['"+e.globalScope._SymbolsMap[q]+"']\x3d"+I+"; ";if(e.undeclaredGlobalsInFunctions.has(q))return M=e.undeclaredGlobalsInFunctions.get(q).manglename,e.globalScope._SymbolsMap[q]=M,e.mangleMap[q]=M,e.undeclaredGlobalsInFunctions.delete(q),"gscope[lang.setAssig('"+M+"', runtimeCtx)]\x3d"+I+"; ";M=wa(e);e.globalScope._SymbolsMap[q]=M;e.mangleMap[q]=M;return"gscope['"+M+"']\x3d"+I+"; "}function pa(e,q){try{const I=q.name.toLowerCase();Y(I);if(null!==
e.localScope){if(void 0!==e.localScope[I])return"lscope['"+I+"']";if(void 0!==e.localScope._SymbolsMap[I])return"lscope['"+e.localScope._SymbolsMap[I]+"']"}if(void 0!==e.globalScope[I])return"gscope['"+I+"']";if(void 0!==e.globalScope._SymbolsMap[I])return"gscope['"+e.globalScope._SymbolsMap[I]+"']";if(null!==e.localScope){if(e.undeclaredGlobalsInFunctions.has(I))return"gscope[lang.chkAssig('"+e.undeclaredGlobalsInFunctions.get(I).manglename+"',runtimeCtx)]";const M={manglename:wa(e),node:q.argument};
e.undeclaredGlobalsInFunctions.set(I,M);return"gscope[lang.chkAssig('"+M.manglename+"',runtimeCtx)]"}throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.InvalidIdentifier,q);}catch(I){throw I;}}function Ba(e,q){try{if("MemberExpression"===q.callee.type){if(!0===q.callee.computed)var I=v(e,q.callee.property);else I="'"+q.callee.property.name+"'",Y(q.callee.property.name);var M="[";for(var T=0;T<q.arguments.length;T++)0<T&&(M+=", "),M+=v(e,q.arguments[T]);M+="]";return e.isAsync?"(yield lang.callModuleFunction("+
v(e,q.callee.object)+","+M+","+I+",runtimeCtx))":"lang.callModuleFunction("+v(e,q.callee.object)+","+M+","+I+",runtimeCtx)"}if("Identifier"!==q.callee.type)throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.FunctionNotFound,q);const ja=q.callee.name.toLowerCase();if("iif"===ja){try{if(3!==q.arguments.length)throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.WrongNumberOfParameters,q);const fa=oa(e);var X=`${e.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":
"function() {"}\n        var ${fa} = ${v(e,q.arguments[0])};\n\n        if (${fa} === true) {\n          return  ${v(e,q.arguments[1])};\n        }\n        else if (${fa} === false) {\n          return ${v(e,q.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${e.isAsync?"})}()))":"}()"}`}catch(fa){throw fa;}return X}if("when"===ja){try{if(3>q.arguments.length)throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.WrongNumberOfParameters,
q);if(0===q.arguments.length%2)throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.WrongNumberOfParameters,q);const fa=oa(e);T="var ";for(var ca=0;ca<q.arguments.length-1;ca+=2)T+=`${fa} = lang.mustBoolean(${v(e,q.arguments[ca])}, runtimeCtx);\n      if (${fa} === true ) {\n        return ${v(e,q.arguments[ca+1])}\n      }\n`;M=`${e.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${T}\n        return ${v(e,q.arguments[q.arguments.length-
1])}\n        ${e.isAsync?"})}()))":"}()"}`}catch(fa){throw fa;}return M}if("decode"===ja){try{if(2>q.arguments.length)throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.WrongNumberOfParameters,q);if(2===q.arguments.length)T=`(${v(e,q.arguments[1])})`;else{if(0===(q.arguments.length-1)%2)throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.WrongNumberOfParameters,q);ca=oa(e);var aa=oa(e);M="var ";for(I=1;I<q.arguments.length-1;I+=2)M+=`${aa} = ${v(e,q.arguments[I])};\n      if (lang.binary(${aa}, ${ca}, "==") === true ) {\n        return ${v(e,
q.arguments[I+1])}\n      }\n`;T=`${e.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${ca} = ${v(e,q.arguments[0])};\n        ${M}\n        return ${v(e,q.arguments[q.arguments.length-1])}\n        ${e.isAsync?"})}()))":"}()"}`}}catch(fa){throw fa;}return T}M="";null!==e.localScope&&(void 0!==e.localScope[ja]?M="lscope['"+ja+"']":void 0!==e.localScope._SymbolsMap[ja]&&(M="lscope['"+e.localScope._SymbolsMap[ja]+"']"));if(""===
M)if(void 0!==e.globalScope[ja])M="gscope['"+ja+"']";else if(void 0!==e.globalScope._SymbolsMap[ja])M="gscope['"+e.globalScope._SymbolsMap[ja]+"']";else if(null!==e.localScope)if(e.undeclaredGlobalsInFunctions.has(ja))M="gscope[lang.chkAssig('"+e.undeclaredGlobalsInFunctions.get(ja).manglename+"',runtimeCtx)]";else{const fa={manglename:wa(e),node:q.argument};e.undeclaredGlobalsInFunctions.set(ja,fa);M="gscope[lang.chkAssig('"+fa.manglename+"',runtimeCtx)]"}if(""!==M){T="[";for(ca=0;ca<q.arguments.length;ca++)0<
ca&&(T+=", "),T+=v(e,q.arguments[ca]);T+="]";return e.isAsync?"(yield lang.callfunc("+M+","+T+",runtimeCtx) )":"lang.callfunc("+M+","+T+",runtimeCtx)"}throw new h.ArcadeCompilationError(e,h.ExecutionErrorCodes.FunctionNotFound,q);}catch(ja){throw ja;}}function wa(e){e.symbols.symbolCounter++;return"_T"+e.symbols.symbolCounter.toString()}function oa(e){e.symbols.symbolCounter++;return"_Tvar"+e.symbols.symbolCounter.toString()}function la(e,q,I){const M={};e||(e={});I||(I={});M._SymbolsMap={};M.textformatting=
1;M.infinity=1;M.pi=1;for(const T in q)M[T]=1;for(const T in I)M[T]=1;for(const T in e)M[T]=1;return M}function W(e,q,I,M){I=I?new Q:new G;e||(e={});q||(q={});const T=new w({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});T.immutable=!1;I._SymbolsMap={textformatting:1,infinity:1,pi:1};I.textformatting=T;I.infinity=Number.POSITIVE_INFINITY;I.pi=Math.PI;for(const X in q)I[X]=q[X],I._SymbolsMap[X]=1;for(const X in e)I._SymbolsMap[X]=1,I[X]=e[X]&&"esri.Graphic"===
e[X].declaredClass?f.createFromGraphic(e[X],M??null):e[X];return I}function ka(e,q){const I={mode:q,compiled:!0,functions:{},signatures:[],standardFunction:g,standardFunctionAsync:g,evaluateIdentifier:sa};for(let M=0;M<e.length;M++)e[M].registerFunctions(I);if("sync"===q){for(const M in I.functions)H[M]=new D.NativeFunction(I.functions[M]),G.prototype[M]=H[M];for(e=0;e<I.signatures.length;e++)C.addFunctionDeclaration(I.signatures[e],"sync")}else{for(const M in I.functions)O[M]=new D.NativeFunction(I.functions[M]),
Q.prototype[M]=O[M];for(e=0;e<I.signatures.length;e++)C.addFunctionDeclaration(I.signatures[e],"async")}}function sa(e,q){q=q.name;if("_SymbolsMap"===q)throw new h.ArcadeExecutionError(e,h.ExecutionErrorCodes.InvalidIdentifier,null);if(0<e.localStack.length){if("_t"!==q.substr(0,2).toLowerCase()&&void 0!==e.localStack[e.localStack.length-1][q])return e.localStack[e.localStack.length-1][q];const I=e.mangleMap[q];if(void 0!==I&&void 0!==e.localStack[e.localStack.length-1][I])return e.localStack[e.localStack.length-
1][I]}if("_t"!==q.substr(0,2).toLowerCase()&&void 0!==e.globalScope[q]||1===e.globalScope._SymbolsMap[q])return e.globalScope[q];q=e.mangleMap[q];if(void 0!==q)return e.globalScope[q]}function ra(e){console.log(e)}function J(e,q,I=!1){q={isAsync:I,moduleFactory:q.moduleFactory,moduleFactoryMap:{},libraryResolver:new y.ArcadeModuleLoader(null,e.loadedModules),globalScope:la(q.vars,I?O:H,q.customfunctions),customfunctions:q.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,
depthCounter:{depth:1},exports:{},console:ra,lrucache:q.lrucache,timeReference:q.timeReference??null,interceptor:q.interceptor,services:q.services,symbols:{symbolCounter:0}};e=v(q,e);""===e&&(e="lc.voidOperation; ");const M=q.moduleFactory,T=q.moduleFactoryMap,X=q.exports,ca={};for(var aa in X)ca[aa]=void 0!==q.mangleMap[aa]?q.mangleMap[aa]:aa;aa={lc:a.lc,lang:S,mangles:q.mangleMap,prepareModule(ja){return new da(ja)},prepare(ja,fa){let ua=ja.spatialReference;if(null===ua||void 0===ua)ua=new k({wkid:102100});
const xa=W(ja.vars,ja.customfunctions,fa,ja.timeReference);return{localStack:[],isAsync:fa,exports:X,exportmangle:ca,gdefs:{},moduleFactory:M,moduleFactoryMap:T,moduleSingletons:ja.moduleSingletons,mangleMap:this.mangles,spatialReference:ua,globalScope:xa,abortSignal:void 0===ja.abortSignal||null===ja.abortSignal?{aborted:!1}:ja.abortSignal,localScope:null,services:ja.services,console:ja.console??ra,lrucache:ja.lrucache,timeReference:ja.timeReference??null,interceptor:ja.interceptor,symbols:{symbolCounter:0},
depthCounter:ja.depthCounter}}};return(new Function("context","spatialReference",I?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+e+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":
"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+e+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(aa)}let F=function(e){function q(M,T){var X=e.call(this)||this;X.paramCount=T;X.fn=M;return X}B._inherits(q,e);var I=q.prototype;I.createFunction=function(M){return(...T)=>{if(T.length!==this.paramCount)throw new h.ArcadeExecutionError(M,
h.ExecutionErrorCodes.WrongNumberOfParameters,null);return this.fn(...T)}};I.call=function(M,T){return this.fn(...T.arguments)};I.marshalledCall=function(M,T,X,ca){return ca(M,T,(aa,ja,fa)=>{fa=fa.map(ua=>!a.isFunctionParameter(ua)||ua instanceof D.ScopeMarshalledFunction?ua:D.wrapModuleScopedResponse(ua,M,ca));aa=this.call(X,{arguments:fa});return c.isPromiseLike(aa)?aa.then(ua=>D.wrapModuleScopedResponse(ua,X,ca)):aa})};return B._createClass(q)}(D.ArcadeFunction);const H={};p.registerFunctions(H,
g);n.registerFunctions(H,g);l.registerFunctions(H,g);x.registerFunctions(H,g);m.registerFunctions(H,g);H.iif=function(e,q){try{return g(e,q,(I,M,T)=>{throw new h.ArcadeExecutionError(e,h.ExecutionErrorCodes.Unrecognised,q);})}catch(I){throw I;}};H.decode=function(e,q){try{return g(e,q,(I,M,T)=>{throw new h.ArcadeExecutionError(e,h.ExecutionErrorCodes.Unrecognised,q);})}catch(I){throw I;}};H.when=function(e,q){try{return g(e,q,(I,M,T)=>{throw new h.ArcadeExecutionError(e,h.ExecutionErrorCodes.Unrecognised,
q);})}catch(I){throw I;}};const O={};for(const e in H)O[e]=new D.NativeFunction(H[e]);z.registerFunctions(H,g);for(const e in H)H[e]=new D.NativeFunction(H[e]);const G=function(){};G.prototype=H;const Q=function(){};Q.prototype=O;p={fixSpatialReference:a.fixSpatialReference,parseArguments:function(e,q){const I=[];for(let M=0;M<q.arguments.length;M++)I.push(v(e,q.arguments[M]));return I},standardFunction:g};ka([E.ArrayFunctions],"sync");ka([E.ArrayFunctions],"async");let P=0;const S={error(e){throw new h.ArcadeExecutionError(null,
e,null);},__awaiter(e,q,I,M){return new Promise((T,X)=>{function ca(fa){try{ja(M.next(fa))}catch(ua){X(ua)}}function aa(fa){try{ja(M["throw"](fa))}catch(ua){X(ua)}}function ja(fa){fa.done?T(fa.value):fa.value&&fa.value.then?fa.value.then(ca,aa):(P++,0===P%100?setTimeout(()=>{P=0;ca(fa.value)},0):ca(fa.value))}ja((M=M.apply(e,q||[])).next())})},functionDepthchecker(e,q){return function(){q.depthCounter.depth++;q.localStack.push([]);if(64<q.depthCounter.depth)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.MaximumCallDepth,
null);const I=e.apply(this,arguments);if(c.isPromiseLike(I))return I.then(M=>{q.depthCounter.depth--;--q.localStack.length;return M});q.depthCounter.depth--;--q.localStack.length;return I}},chkAssig(e,q){if(void 0===q.gdefs[e])throw new h.ArcadeExecutionError(q,h.ExecutionErrorCodes.InvalidIdentifier,null);return e},mustBoolean(e,q){if(!0===e||!1===e)return e;throw new h.ArcadeExecutionError(q,h.ExecutionErrorCodes.BooleanConditionRequired,null);},setAssig(e,q){q.gdefs[e]=1;return e},castString(e){return a.toString(e)},
aCheck(e,q){if(a.isFunctionParameter(e)){if("ArrayExpression"===q)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===q)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.NoFunctionInDictionary,null);throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return e===a.voidOperation?null:e},Dictionary:w,Feature:f,UserDefinedCompiledFunction:F,dictionary(e){const q={},I=new Map;for(let M=0;M<e.length;M+=
2){if(a.isFunctionParameter(e[M+1]))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===a.isString(e[M]))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.KeyMustBeString,null);let T=e[M].toString();const X=T.toLowerCase();I.has(X)?T=I.get(X):I.set(X,T);q[T]=e[M+1]===a.voidOperation?null:e[M+1]}e=new w(q);e.immutable=!1;return e},strCheck(e){if(!1===a.isString(e))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.KeyMustBeString,null);
return e},unary(e,q){if(a.isBoolean(e)){if("!"===q)return!e;if("-"===q)return-1*a.toNumber(e);if("+"===q)return 1*a.toNumber(e);if("~"===q)return~a.toNumber(e);throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===q)return-1*a.toNumber(e);if("+"===q)return 1*a.toNumber(e);if("~"===q)return~a.toNumber(e);throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck(e){if(!1===a.isBoolean(e))throw new h.ArcadeExecutionError(null,
h.ExecutionErrorCodes.LogicExpressionOrAnd,null);return e},logical(e,q,I){if(a.isBoolean(e)&&a.isBoolean(q))switch(I){case "||":return e||q;case "\x26\x26":return e&&q}throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary(e,q,I){switch(I){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return a.binaryOperator(a.toNumber(e),a.toNumber(q),I);case "\x3d\x3d":return a.equalityTest(e,q);case "\x3d":return a.equalityTest(e,q);case "!\x3d":return!a.equalityTest(e,
q);case "\x3c":return a.greaterThanLessThan(e,q,I);case "\x3e":return a.greaterThanLessThan(e,q,I);case "\x3c\x3d":return a.greaterThanLessThan(e,q,I);case "\x3e\x3d":return a.greaterThanLessThan(e,q,I);case "+":return a.isString(e)||a.isString(q)?a.toString(e)+a.toString(q):a.toNumber(e)+a.toNumber(q);case "-":return a.toNumber(e)-a.toNumber(q);case "*":return a.toNumber(e)*a.toNumber(q);case "/":return a.toNumber(e)/a.toNumber(q);case "%":return a.toNumber(e)%a.toNumber(q);default:throw new h.ArcadeExecutionError(null,
h.ExecutionErrorCodes.UnsupportedOperator,null);}},assign(e,q,I){switch(q){case "\x3d":return e===a.voidOperation?null:e;case "/\x3d":return a.toNumber(I)/a.toNumber(e);case "*\x3d":return a.toNumber(I)*a.toNumber(e);case "-\x3d":return a.toNumber(I)-a.toNumber(e);case "+\x3d":return a.isString(I)||a.isString(e)?a.toString(I)+a.toString(e):a.toNumber(I)+a.toNumber(e);case "%\x3d":return a.toNumber(I)%a.toNumber(e);default:throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.UnsupportedOperator,
null);}},update(e,q,I,M){const T=a.toNumber(e[q]);e[q]="++"===I?T+1:T-1;return!1===M?T:"++"===I?T+1:T-1},graphicToFeature(e,q,I){return null===e?null:f.createFromGraphicLikeObject(e.geometry,e.attributes,q,I.timeReference)},memberupdate(e,q,I,M){let T;if(a.isArray(e))if(a.isNumber(q)){0>q&&(q=e.length+q);if(0>q||q>=e.length)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.OutOfBounds,null);T=a.toNumber(e[q]);e[q]="++"===I?T+1:T-1}else throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.ArrayAccessorMustBeNumber,
null);else if(e instanceof w){if(!1===a.isString(q))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===e.hasField(q))T=a.toNumber(e.field(q)),e.setField(q,"++"===I?T+1:T-1);else throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.FieldNotFound,null,{key:q});}else if(a.isFeature(e)){if(!1===a.isString(q))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===e.hasField(q))T=a.toNumber(e.field(q)),e.setField(q,
"++"===I?T+1:T-1);else throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.FieldNotFound,null);}else{if(a.isImmutableArray(e))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.Immutable,null);if(e instanceof da){if(!1===a.isString(q))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(!0===e.hasGlobal(q))T=a.toNumber(e.global(q)),e.setGlobal(q,"++"===I?T+1:T-1);else throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.ModuleExportNotFound,
null);}else throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===M?T:"++"===I?T+1:T-1},assignmember(e,q,I,M){if(a.isArray(e))if(a.isNumber(q)){0>q&&(q=e.length+q);if(0>q||q>e.length)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.OutOfBounds,null);if(q===e.length&&"\x3d"!==I)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.OutOfBounds,null);e[q]=this.assign(M,I,e[q])}else throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.ArrayAccessorMustBeNumber,
null);else if(e instanceof w){if(!1===a.isString(q))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===e.hasField(q))e.setField(q,this.assign(M,I,e.field(q)));else{if("\x3d"!==I)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.FieldNotFound,null);e.setField(q,this.assign(M,I,null))}}else if(a.isFeature(e)){if(!1===a.isString(q))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===e.hasField(q))e.setField(q,
this.assign(M,I,e.field(q)));else{if("\x3d"!==I)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.FieldNotFound,null);e.setField(q,this.assign(M,I,null))}}else{if(a.isImmutableArray(e))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.Immutable,null);if(e instanceof da){if(!1===a.isString(q))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(e.hasGlobal(q))e.setGlobal(q,this.assign(M,I,e.global(q)));else throw new h.ArcadeExecutionError(null,
h.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.InvalidIdentifier,null);}},member(e,q){if(null===e)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.MemberOfNull,null);if(e instanceof w||a.isFeature(e)){if(a.isString(q))return e.field(q);throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(e instanceof d){if(a.isString(q))return x.geometryMember(e,q,null,null);throw new h.ArcadeExecutionError(null,
h.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(a.isArray(e)){if(a.isNumber(q)&&isFinite(q)&&Math.floor(q)===q){0>q&&(q=e.length+q);if(q>=e.length||0>q)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.OutOfBounds,null);return e[q]}throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(a.isString(e)){if(a.isNumber(q)&&isFinite(q)&&Math.floor(q)===q){0>q&&(q=e.length+q);if(q>=e.length||0>q)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.OutOfBounds,
null);return e[q]}throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(a.isImmutableArray(e)){if(a.isNumber(q)&&isFinite(q)&&Math.floor(q)===q){0>q&&(q=e.length()+q);if(q>=e.length()||0>q)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.OutOfBounds,null);return e.get(q)}throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(e instanceof da&&a.isString(q))return e.global(q);throw new h.ArcadeExecutionError(null,
h.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc(e,q,I){return e.call(I,{arguments:q,preparsed:!0})},loadModule(e,q){e=q.moduleFactoryMap[e];if(q.moduleSingletons[e])return q.moduleSingletons[e];const I=q.moduleFactory[e]({vars:{},moduleSingletons:q.moduleSingletons,depthCounter:q.depthCounter,console:q.console,abortSignal:q.abortSignal,isAsync:q.isAsync,services:q.services,lrucache:q.lrucache,timeReference:q.timeReference??null,interceptor:q.interceptor},q.spatialReference);return q.moduleSingletons[e]=
I},callModuleFunction(e,q,I,M){if(!(e instanceof da))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.FunctionNotFound,null);e=e.global(I);if(!1===a.isFunctionParameter(e))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.CallNonFunction,null);return e.call(M,{preparsed:!0,arguments:q})}};let da=function(e){function q(M){var T=e.call(this,null)||this;T.moduleContext=M;return T}B._inherits(q,e);var I=q.prototype;I.hasGlobal=function(M){void 0===this.moduleContext.exports[M]&&(M=
M.toLowerCase());return void 0!==this.moduleContext.exports[M]?!0:!1};I.setGlobal=function(M,T){const X=this.moduleContext.globalScope;M=M.toLowerCase();if(a.isFunctionParameter(T))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.AssignModuleFunction,null);X[this.moduleContext.exportmangle[M]]=T};I.global=function(M){const T=this.moduleContext.globalScope;M=M.toLowerCase();const X=T[this.moduleContext.exportmangle[M]];if(void 0===X)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.InvalidIdentifier,
null);if(a.isFunctionParameter(X)&&!(X instanceof D.ScopeMarshalledFunction)){const ca=new D.ScopeMarshalledFunction;ca.fn=X;ca.parameterEvaluator=g;ca.context=this.moduleContext;return T[this.moduleContext.exportmangle[M]]=ca}return X};return B._createClass(q)}(u.ArcadeModule);K.UserDefinedCompiledFunction=F;K.compileScript=function(e,q,I=!1){null===q&&(q={vars:{},customfunctions:{}});var M=null;e.usesModules&&(M=new y.ArcadeModuleLoader(null,e.loadedModules));M={isAsync:I,globalScope:la(q.vars,
I?O:H,q.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:q.customfunctions,libraryResolver:M,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:ra,lrucache:q.lrucache,timeReference:q.timeReference??null,interceptor:q.interceptor,services:q.services,symbols:{symbolCounter:0}};e=v(M,e);""===e&&(e="lc.voidOperation; ");0<M.undeclaredGlobalsInFunctions.size&&M.undeclaredGlobalsInFunctions.forEach(fa=>{throw new h.ArcadeCompilationError(q,
h.ExecutionErrorCodes.InvalidIdentifier,fa.node);});const T=M.moduleFactory,X=M.moduleFactoryMap,ca=M.exports,aa={};for(var ja in ca)aa[ja]=void 0!==M.mangleMap[ja]?M.mangleMap[ja]:ja;ja={lc:a.lc,lang:S,mangles:M.mangleMap,postProcess(fa){fa instanceof a.ReturnResult&&(fa=fa.value);fa instanceof a.ImplicitResult&&(fa=fa.value);fa===a.voidOperation&&(fa=null);if(fa===a.breakResult)throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.IllegalResult,null);if(fa===a.continueResult)throw new h.ArcadeExecutionError(null,
h.ExecutionErrorCodes.IllegalResult,null);if(a.isFunctionParameter(fa))throw new h.ArcadeExecutionError(null,h.ExecutionErrorCodes.IllegalResult,null);return fa},prepare(fa,ua){let xa=fa.spatialReference;if(null===xa||void 0===xa)xa=k.WebMercator;const Fa=W(fa.vars,fa.customfunctions,ua,fa.timeReference);return{localStack:[],isAsync:ua,moduleFactory:T,moduleFactoryMap:X,mangleMap:this.mangles,moduleSingletons:{},exports:ca,gdefs:{},exportmangle:aa,spatialReference:xa,globalScope:Fa,abortSignal:void 0===
fa.abortSignal||null===fa.abortSignal?{aborted:!1}:fa.abortSignal,localScope:null,services:fa.services,console:fa.console??ra,lrucache:fa.lrucache,timeReference:fa.timeReference??null,interceptor:fa.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",I?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
e+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+e+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(ja)};K.enableAsyncSupport=async function(){const e=await new Promise((q,I)=>t(["./functions/geomasync"],q,I));ka([e],"async");return!0};
K.executeScript=function(e,q){return e(q)};K.extend=ka;K.functionHelper=p;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Dictionary":function(){define("../chunks/_rollupPluginBabelHelpers ./ArcadeDate ./deepClone ./executionError ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry".split(" "),function(t,K,B,w,f,a,C){function E(x,z,l=!1,m=!1){if(null===x||void 0===x)return null;if(a.isNumber(x))return a.toNumber(x);if(a.isBoolean(x))return a.toBoolean(x);if(a.isString(x))return a.toString(x);
if(a.isDate(x))return a.toDate(x,z);if(a.isArray(x)){var n=[];for(var c of x)n.push(E(c,z,l,m));return n}if(m&&a.isGeometry(x))return x;c=new p;c.immutable=!1;for(n of Object.keys(x)){const d=x[n];void 0!==d&&c.setField(n,E(d,z,l,m))}c.immutable=l;return c}let p=function(){function x(l){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=l instanceof x?l.attributes:void 0===l?{}:null===l?{}:l}var z=x.prototype;z.field=function(l){const m=
l.toLowerCase(),n=this.attributes[l];if(void 0!==n)return n;for(const c in this.attributes)if(c.toLowerCase()===m)return this.attributes[c];throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.FieldNotFound,null,{key:l});};z.setField=function(l,m){if(this.immutable)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.Immutable,null);if(a.isFunctionParameter(m))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.NoFunctionInDictionary,null);const n=l.toLowerCase();m instanceof
Date&&(m=K.ArcadeDate.dateJSToArcadeDate(m));if(void 0===this.attributes[l])for(const c in this.attributes)if(c.toLowerCase()===n){this.attributes[c]=m;return}this.attributes[l]=m};z.hasField=function(l){const m=l.toLowerCase();if(void 0!==this.attributes[l])return!0;for(const n in this.attributes)if(n.toLowerCase()===m)return!0;return!1};z.keys=function(){let l=[];for(const m in this.attributes)l.push(m);return l=l.sort()};z.castToText=function(l=!1){let m="";for(const n in this.attributes){""!==
m&&(m+=",");const c=this.attributes[n];null==c?m+=JSON.stringify(n)+":null":a.isBoolean(c)||a.isNumber(c)||a.isString(c)?m+=JSON.stringify(n)+":"+JSON.stringify(c):c instanceof C?m+=JSON.stringify(n)+":"+a.toStringExplicit(c):c instanceof f?m+=JSON.stringify(n)+":"+a.toStringExplicit(c,null,l):c instanceof Array?m+=JSON.stringify(n)+":"+a.toStringExplicit(c,null,l):c instanceof K.ArcadeDate?m=l?m+(JSON.stringify(n)+":"+JSON.stringify(c.getTime())):m+(JSON.stringify(n)+":"+c.stringify()):null!==c&&
"object"===typeof c&&void 0!==c.castToText&&(m+=JSON.stringify(n)+":"+c.castToText(l))}return"{"+m+"}"};x.convertObjectToArcadeDictionary=function(l,m,n=!0,c=!1){const d=new x;d.immutable=!1;for(const k in l){const y=l[k];void 0!==y&&d.setField(k.toString(),E(y,m,n,c))}d.immutable=n;return d};x.convertJsonToArcade=function(l,m,n=!1){return E(l,m,n)};z.castAsJson=function(l=null){const m={};for(let n in this.attributes){const c=this.attributes[n];void 0!==c&&(l?.keyTranslate&&(n=l.keyTranslate(n)),
m[n]=a.castAsJson(c,l))}return m};z.castDictionaryValueAsJsonAsync=async function(l,m,n,c=null,d){n=await a.castAsJsonAsync(n,c,d);return l[m]=n};z.castAsJsonAsync=async function(l=null,m=null){const n={},c=[];for(let d in this.attributes){const k=this.attributes[d];m?.keyTranslate&&(d=m.keyTranslate(d));void 0!==k&&(a.isSimpleType(k)||k instanceof C||k instanceof K.ArcadeDate?n[d]=a.castAsJson(k,m):c.push(this.castDictionaryValueAsJsonAsync(n,d,k,l,m)))}0<c.length&&await Promise.all(c);return n};
z.deepClone=function(){const l=new x;l.immutable=!1;for(const m of this.keys())l.setField(m,B.deepClone(this.field(m)));return l};return t._createClass(x)}();return p})},"esri/arcade/ArcadeDate":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./executionError","../chunks/datetime"],function(t,K,B,w){function f(x){if(x instanceof w.Zone)return x;if("system"===x.toLowerCase())return"system";if("utc"===x.toLowerCase())return"utc";if("unknown"===x.toLowerCase())return a.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(x)){const z=
w.FixedOffsetZone.parseSpecifier("UTC"+(x.startsWith("+")||x.startsWith("-")?"":"+")+x);if(z)return z}x=w.IANAZone.create(x);if(!x.isValid)throw new E(t.ArcadeDateErrorCodes.TimeZoneNotRecognised);return x}let a=K._createClass(function(){});a.instance=new w.IANAZone("Etc/UTC");t.ArcadeDateErrorCodes=void 0;(t.ArcadeDateErrorCodes||(t.ArcadeDateErrorCodes={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const C={[t.ArcadeDateErrorCodes.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};
let E=function(x){function z(l,m){l=x.call(this,B.doSubstitutions(C[l],m))||this;l.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(l),z);return l}K._inherits(z,x);return K._createClass(z)}(K._wrapNativeSuper(Error)),p=function(){function x(l){this._date=l;this.declaredRootClass="esri.arcade.arcadedate"}x.fromParts=function(l=0,m=1,n=1,c=0,d=0,k=0,y=0,u){if(isNaN(l)||isNaN(m)||isNaN(n)||isNaN(c)||isNaN(d)||isNaN(k)||isNaN(y))return null;
let D=0;var h=w.DateTime.local(l,m).daysInMonth;1>n&&(D=n-1,n=1);n>h&&(D=n-h,n=h);h=0;12<m?(h=m-12,m=12):1>m&&(h=m-1,m=1);let g=0;59<d?(g=d-59,d=59):0>d&&(g=d,d=0);let v=0;59<k?(v=k-59,k=59):0>k&&(v=k,k=0);let r=0;999<y?(r=y-999,y=999):0>y&&(r=y,y=0);l=w.DateTime.fromObject({day:n,year:l,month:m,hour:c,minute:d,second:k,millisecond:y},{zone:f(u)});0!==h&&(l=l.plus({months:h}));0!==D&&(l=l.plus({days:D}));0!==g&&(l=l.plus({minutes:g}));0!==v&&(l=l.plus({seconds:v}));0!==r&&(l=l.plus({milliseconds:r}));
return new x(l)};x.arcadeDateAndZoneToArcadeDate=function(l,m){const n=f(m);return l.isUnknownTimeZone||n===a.instance?x.fromParts(l.year,l.monthJS+1,l.day,l.hour,l.minute,l.second,l.millisecond,n):new x(l._date.setZone(m))};x.dateJSToArcadeDate=function(l){return new x(w.DateTime.fromJSDate(l,{zone:"system"}))};x.dateJSAndZoneToArcadeDate=function(l,m="system"){return new x(w.DateTime.fromJSDate(l,{zone:m}))};x.unknownEpochToArcadeDate=function(l){return new x(w.DateTime.fromMillis(l,{zone:a.instance}))};
x.unknownDateJSToArcadeDate=function(l){return new x(w.DateTime.fromMillis(l.getTime(),{zone:a.instance}))};x.epochToArcadeDate=function(l,m="system"){return new x(w.DateTime.fromMillis(l,{zone:m}))};x.dateTimeToArcadeDate=function(l){return new x(l)};var z=x.prototype;z.clone=function(){return new x(this._date)};z.changeTimeZone=function(l){l=f(l);return x.dateTimeToArcadeDate(this._date.setZone(l))};x.dateTimeAndZoneToArcadeDate=function(l,m){m=f(m);return l.zone===a.instance||m===a.instance?x.fromParts(l.year,
l.month,l.day,l.hour,l.minute,l.second,l.millisecond,m):new x(l.setZone(m))};x.nowToArcadeDate=function(l){return new x(w.DateTime.fromJSDate(new Date,{zone:l}))};x.nowUTCToArcadeDate=function(){return new x(w.DateTime.utc())};z.equals=function(l){return this.isSystem&&l.isSystem?this.toNumber()===l.toNumber():this.isUnknownTimeZone!==l.isUnknownTimeZone?!1:this._date.equals(l._date)};z.stringify=function(){return JSON.stringify(this.toJSDate())};z.plus=function(l){return new x(this._date.plus(l))};
z.diff=function(l,m="milliseconds"){return this._date.diff(l._date,m)[m]};z.toISOString=function(l){return l?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})};z.toFormat=function(l,m){return this._date.toFormat(l,m)};z.toJSDate=function(){return this._date.toJSDate()};z.toSQLString=function(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"};z.toDateTime=function(){return this._date};z.toNumber=
function(){return this._date.toMillis()};z.getTime=function(){return this._date.toMillis()};z.toUTC=function(){return new x(this._date.toUTC())};z.toLocal=function(){return new x(this._date.toLocal())};z.toString=function(){return this.toISOString(!0)};K._createClass(x,[{key:"isSystem",get:function(){return"system"===this.timeZone||this.timeZone===x.systemTimeZoneCanonicalName}},{key:"isUnknownTimeZone",get:function(){return this._date.zone===a.instance}},{key:"isValid",get:function(){return this._date.isValid}},
{key:"hour",get:function(){return this._date.hour}},{key:"second",get:function(){return this._date.second}},{key:"day",get:function(){return this._date.day}},{key:"dayOfWeekISO",get:function(){return this._date.weekday}},{key:"dayOfWeekJS",get:function(){let l=this._date.weekday;6<l&&(l=0);return l}},{key:"millisecond",get:function(){return this._date.millisecond}},{key:"monthISO",get:function(){return this._date.month}},{key:"weekISO",get:function(){return this._date.weekNumber}},{key:"yearISO",
get:function(){return this._date.weekYear}},{key:"monthJS",get:function(){return this._date.month-1}},{key:"year",get:function(){return this._date.year}},{key:"minute",get:function(){return this._date.minute}},{key:"zone",get:function(){return this._date.zone}},{key:"timeZoneOffset",get:function(){return this.isUnknownTimeZone?0:this._date.offset}},{key:"timeZone",get:function(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const l=this.zone;return"fixed"===
l.type?0===l.fixed?"utc":l.formatOffset(0,"short"):l.name}}],[{key:"systemTimeZoneCanonicalName",get:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}}]);return x}();t.ArcadeDate=p;t.ArcadeDateError=E;t.ArcadeDateErrorMessages=C;t.UnknownTimeZone=a;t.createDateTimeZone=f;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(t,K){function B(m){return m&&m.loc?
`Line : ${m.loc.start?.line}, ${m.loc.start?.column}: `:""}function w(m,n){try{if(!n)return m;for(const c in n){let d=n[c];d||(d="");m=m.replace("{"+c+"}",n[c])}}catch(c){}return m}t.ExecutionErrorCodes=void 0;(function(m){m.AsyncNotEnabled="AsyncNotEnabled";m.ModulesNotSupported="ModulesNotSupported";m.CircularModules="CircularModules";m.NeverReach="NeverReach";m.UnsupportedHashType="UnsupportedHashType";m.InvalidParameter="InvalidParameter";m.UnexpectedToken="UnexpectedToken";m.Unrecognised="Unrecognised";
m.UnrecognisedType="UnrecognisedType";m.MaximumCallDepth="MaximumCallDepth";m.BooleanConditionRequired="BooleanConditionRequired";m.TypeNotAllowedInFeature="TypeNotAllowedInFeature";m.KeyMustBeString="KeyMustBeString";m.WrongNumberOfParameters="WrongNumberOfParameters";m.CallNonFunction="CallNonFunction";m.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";m.NoFunctionInDictionary="NoFunctionInDictionary";m.NoFunctionInArray="NoFunctionInArray";m.AssignModuleFunction="AssignModuleFunction";
m.LogicExpressionOrAnd="LogicExpressionOrAnd";m.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";m.FunctionNotFound="FunctionNotFound";m.InvalidMemberAccessKey="InvalidMemberAccessKey";m.UnsupportedUnaryOperator="UnsupportUnaryOperator";m.InvalidIdentifier="InvalidIdentifier";m.MemberOfNull="MemberOfNull";m.UnsupportedOperator="UnsupportedOperator";m.Cancelled="Cancelled";m.ModuleAccessorMustBeString="ModuleAccessorMustBeString";m.ModuleExportNotFound="ModuleExportNotFound";m.Immutable=
"Immutable";m.OutOfBounds="OutOfBounds";m.IllegalResult="IllegalResult";m.FieldNotFound="FieldNotFound";m.PortalRequired="PortalRequired";m.LogicError="LogicError";m.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";m.KeyAccessorMustBeString="KeyAccessorMustBeString";m.WrongSpatialReference="WrongSpatialReference"})(t.ExecutionErrorCodes||(t.ExecutionErrorCodes={}));const f={[t.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[t.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",
[t.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[t.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[t.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[t.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[t.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[t.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[t.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[t.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[t.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[t.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[t.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[t.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[t.ExecutionErrorCodes.PortalRequired]:"Portal is required",[t.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[t.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[t.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[t.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[t.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[t.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[t.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[t.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[t.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[t.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[t.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[t.ExecutionErrorCodes.Immutable]:"Object is immutable",[t.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[t.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",
[t.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[t.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[t.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[t.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[t.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[t.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[t.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",
[t.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[t.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[t.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let a=function(m){function n(...c){return m.call(this,...c)||this}K._inherits(n,m);return K._createClass(n)}(K._wrapNativeSuper(Error)),C=function(m){function n(c,d){c=m.call(this,B(d)+c.message,{cause:c})||this;c.loc=null;Error.captureStackTrace&&
Error.captureStackTrace(K._assertThisInitialized(c),n);d&&d.loc&&(c.loc=d.loc);return c}K._inherits(n,m);return K._createClass(n)}(a),E=function(m){function n(c,d,k,y){c=m.call(this,"Execution error - "+B(k)+w(f[d],y))||this;c.loc=null;c.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(c),n);k&&k.loc&&(c.loc=k.loc);return c}K._inherits(n,m);return K._createClass(n)}(K._wrapNativeSuper(Error)),p=function(m){function n(c,
d,k,y){c=m.call(this,"Compilation error - "+B(k)+w(f[d],y))||this;c.loc=null;c.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(c),n);k&&k.loc&&(c.loc=k.loc);return c}K._inherits(n,m);return K._createClass(n)}(K._wrapNativeSuper(Error)),x=function(m){function n(){var c=m.call(this,"Uncompilable code structures")||this;c.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(c),
n);return c}K._inherits(n,m);return K._createClass(n)}(K._wrapNativeSuper(Error));t.ModuleErrorCodes=void 0;(function(m){m.UnrecognisedUri="UnrecognisedUri";m.UnsupportedUriProtocol="UnsupportedUriProtocol"})(t.ModuleErrorCodes||(t.ModuleErrorCodes={}));const z={[t.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[t.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let l=function(m){function n(c,d){c=m.call(this,w(z[c],d))||this;c.declaredRootClass="esri.arcade.arcademoduleerror";
Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(c),n);return c}K._inherits(n,m);return K._createClass(n)}(K._wrapNativeSuper(Error));t.ArcadeCompilationError=p;t.ArcadeExecutionError=E;t.ArcadeUncompilableError=x;t.ErrorWithCause=a;t.ExecutionErrorMessages=f;t.LocatableArcadeExecutionError=C;t.ModuleError=l;t.ModuleErrorMessages=z;t.doSubstitutions=w;t.ensureArcadeExecutionError=function(m,n,c){return"esri.arcade.arcadeexecutionerror"===c.declaredRootClass||"esri.arcade.arcadecompilationerror"===
c.declaredRootClass?null===c.loc&&n&&n.loc?new C(c,{cause:c}):c:n&&n.loc?new C(c,{cause:c}):c};t.parsingValidationMessage=function(m,n,c){return"Parsing error - "+B(m)+w(f[n],c)};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/deepClone":function(){define(["exports","./ArcadeModule","../chunks/languageUtils"],function(t,K,B){function w(a){if(null===a)return null;if(B.isDate(a))return a.clone();if(B.isSimpleType(a))return a;if(B.isGeometry(a))return a.clone();if(B.isImmutableArray(a))return a.toArray().map(C=>
w(C));if(B.isArray(a))return a.map(C=>w(C));if(B.isFeature(a))return f.createFromArcadeFeature(a);if(B.isFeatureSetCollection(a)||B.isFeatureSet(a))return a;if(B.isDictionary(a)||"esri.arcade.Attachment"===a?.declaredClass)return a.deepClone();if("esri.arcade.Portal"===a?.declaredClass||a instanceof K.ArcadeModule)return a;B.isFunctionParameter(a);return a}let f;t.configureDeepClone=function(a){f=a};t.deepClone=w;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModule":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers"],function(t,K){K=K._createClass(function(B){this.source=B});t.ArcadeModule=K;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/languageUtils":function(){define("exports ./_rollupPluginBabelHelpers ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../arcade/ArcadeDate ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/number ../geometry/support/coordsUtils ../intl/locale ../config ../kernel ../arcade/featureset/support/shared ../arcade/ArcadeModule ../arcade/executionError".split(" "),
function(t,K,B,w,f,a,C,E,p,x,z,l,m,n,c,d,k,y,u,D,h,g){function v(A,L,R){return""===L||null===L||void 0===L||L===R||L===R?A:A=A.split(L).join(R)}function r(A){return A instanceof B.ArcadeFunction}function N(A){return A instanceof h.ArcadeModule}function b(A){return Y(A)||pa(A)||J(A)||ia(A)||null===A||A===za||"number"===typeof A?!0:!1}function U(A,L){return void 0===A?L:A}function ba(A){return null==A?"":oa(A)||ra(A)?"Array":J(A)?"Date":Y(A)?"String":ia(A)?"Boolean":pa(A)?"Number":"esri.arcade.Attachment"===
A?.declaredClass?"Attachment":"esri.arcade.Portal"===A?.declaredClass?"Portal":"esri.arcade.Dictionary"===A?.declaredClass?"Dictionary":A instanceof h.ArcadeModule?"Module":la(A)?"Feature":A instanceof z?"Point":A instanceof l?"Polygon":A instanceof m?"Polyline":A instanceof x?"Multipoint":A instanceof E?"Extent":r(A)?"Function":W(A)?"FeatureSet":sa(A)?"FeatureSetCollection":A===za?"":"number"===typeof A&&isNaN(A)?"Number":"Unrecognised Type"}function Y(A){return"string"===typeof A||A instanceof String}
function ia(A){return"boolean"===typeof A}function pa(A){return"number"===typeof A}function Ba(A){return"number"===typeof A&&isFinite(A)&&Math.floor(A)===A}function wa(A){return A instanceof p}function oa(A){return A instanceof Array}function la(A){return"esri.arcade.Feature"===A?.arcadeDeclaredClass?!0:!1}function W(A){return"esri.arcade.featureset.support.FeatureSet"===A?.declaredRootClass}function ka(A){return"esri.arcade.Dictionary"===A?.declaredClass}function sa(A){return"esri.arcade.featureSetCollection"===
A?.declaredRootClass}function ra(A){return A instanceof w}function J(A){return A instanceof C.ArcadeDate}function F(A){return null!=A&&"object"===typeof A}function H(A){return A instanceof Date}function O(A,L,R,Z,ea){if(A.length<L||A.length>R)throw new g.ArcadeExecutionError(Z,g.ExecutionErrorCodes.WrongNumberOfParameters,ea);}function G(A){return 0>A?-Math.round(-A):Math.round(A)}function Q(){let A=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replaceAll(/[xy]/g,L=>{const R=(A+16*Math.random())%
16|0;A=Math.floor(A/16);return("x"===L?R:R&3|8).toString(16)})}function P(A,L){if(!isNaN(A)){if(void 0===L||null===L||""===L)return A.toString();L=v(L,"\u2030","");L=v(L,"\u00a4","");return c.format(A,{pattern:L})}return A.toString()}function S(A,L){return void 0===L||null===L||""===L?A.toISOString(!0):A.toFormat(da(L),{locale:k.getLocale(),numberingSystem:"latn"})}function da(A){A=A.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let L="";const R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;
for(const Z of A.match(R)||[])switch(Z){case "D":L+="d";break;case "DD":L+="dd";break;case "DDD":L+="o";break;case "d":L+="c";break;case "ddd":L+="ccc";break;case "dddd":L+="cccc";break;case "M":L+="L";break;case "MM":L+="LL";break;case "MMM":L+="LLL";break;case "MMMM":L+="LLLL";break;case "YY":L+="yy";break;case "Y":case "YYYY":L+="yyyy";break;case "Q":L+="q";break;case "Z":L+="ZZ";break;case "ZZ":L+="ZZZ";break;case "S":L+="'S'";break;case "SS":L+="'SS'";break;case "SSS":L+="u";break;case "A":case "a":L+=
"a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":L+=Z;break;default:L=2<=Z.length&&"["===Z.slice(0,1)&&"]"===Z.slice(-1)?L+`'${Z.slice(1,-1)}'`:L+`'${Z}'`}return L}function e(A,L,R){switch(R){case "\x3e":return A>L;case "\x3c":return A<L;case "\x3e\x3d":return A>=L;case "\x3c\x3d":return A<=L}return!1}function q(A,L,R){if(null===A){if(null===L||L===za)return e(null,null,R);if(pa(L))return e(0,L,R);if(Y(L)||ia(L))return e(0,aa(L),R);if(J(L))return e(0,
L.toNumber(),R)}if(A===za){if(null===L||L===za)return e(null,null,R);if(pa(L))return e(0,L,R);if(Y(L)||ia(L))return e(0,aa(L),R);if(J(L))return e(0,L.toNumber(),R)}else if(pa(A)){if(pa(L))return e(A,L,R);if(ia(L))return e(A,aa(L),R);if(null===L||L===za)return e(A,0,R);if(Y(L))return e(A,aa(L),R);if(J(L))return e(A,L.toNumber(),R)}else if(Y(A)){if(Y(L))return e(M(A),M(L),R);if(J(L))return e(aa(A),L.toNumber(),R);if(pa(L))return e(aa(A),L,R);if(null===L||L===za)return e(aa(A),0,R);if(ia(L))return e(aa(A),
aa(L),R)}else if(J(A)){if(J(L))return e(A.toNumber(),L.toNumber(),R);if(null===L||L===za)return e(A.toNumber(),0,R);if(pa(L))return e(A.toNumber(),L,R);if(ia(L)||Y(L))return e(A.toNumber(),aa(L),R)}else if(ia(A)){if(ia(L))return e(A,L,R);if(pa(L))return e(aa(A),aa(L),R);if(J(L))return e(aa(A),L.toNumber(),R);if(null===L||L===za)return e(aa(A),0,R);if(Y(L))return e(aa(A),aa(L),R)}return!I(A,L)||"\x3c\x3d"!==R&&"\x3e\x3d"!==R?!1:!0}function I(A,L){if(A===L||null===A&&L===za||null===L&&A===za)return!0;
if(J(A)&&J(L))return A.equals(L);if(A instanceof f||A instanceof a)return A.equalityTest(L);if(A instanceof z&&L instanceof z){const R=A.cache._arcadeCacheId,Z=L.cache._arcadeCacheId;if(void 0!==R&&null!==R)return R===Z}return F(A)&&F(L)&&(A._arcadeCacheId===L._arcadeCacheId&&void 0!==A._arcadeCacheId&&null!==A._arcadeCacheId||A._underlyingGraphic===L._underlyingGraphic&&void 0!==A._underlyingGraphic&&null!==A._underlyingGraphic)?!0:!1}function M(A,L){if(Y(A))return A;if(null===A)return"";if(pa(A))return P(A,
L);if(ia(A))return A.toString();if(J(A))return S(A,L);if(A instanceof p)return JSON.stringify(A.toJSON());if(oa(A)){L=[];for(var R=0;R<A.length;R++)L[R]=ca(A[R]);return"["+L.join(",")+"]"}if(A instanceof w){L=[];for(R=0;R<A.length();R++)L[R]=ca(A.get(R));return"["+L.join(",")+"]"}return null!==A&&"object"===typeof A&&void 0!==A.castToText?A.castToText():r(A)?"object, Function":A===za?"":N(A)?"object, Module":""}function T(A){const L=[];if(!oa(A))return null;if(A instanceof w){for(var R=0;R<A.length();R++)L[R]=
aa(A.get(R));return L}for(R=0;R<A.length;R++)L[R]=aa(A[R]);return L}function X(A,L,R=!1){if(Y(A))return A;if(null===A)return"";if(pa(A))return P(A,L);if(ia(A))return A.toString();if(J(A))return S(A,L);if(A instanceof p)return A instanceof E?'{"xmin":'+A.xmin.toString()+',"ymin":'+A.ymin.toString()+","+(A.hasZ?'"zmin":'+A.zmin.toString()+",":"")+(A.hasM?'"mmin":'+A.mmin.toString()+",":"")+'"xmax":'+A.xmax.toString()+',"ymax":'+A.ymax.toString()+","+(A.hasZ?'"zmax":'+A.zmax.toString()+",":"")+(A.hasM?
'"mmax":'+A.mmax.toString()+",":"")+'"spatialReference":'+Ea(A.spatialReference)+"}":Ea(A.toJSON(),(ea,na)=>ea.key===na.key?0:"spatialReference"===ea.key?1:"spatialReference"===na.key||ea.key<na.key?-1:ea.key>na.key?1:0);if(oa(A)){L=[];for(var Z=0;Z<A.length;Z++)L[Z]=ca(A[Z],R);return"["+L.join(",")+"]"}if(A instanceof w){L=[];for(Z=0;Z<A.length();Z++)L[Z]=ca(A.get(Z),R);return"["+L.join(",")+"]"}return null!==A&&"object"===typeof A&&void 0!==A.castToText?A.castToText(R):r(A)?"object, Function":A===
za?"":N(A)?"object, Module":""}function ca(A,L=!1){return null===A?"null":ia(A)||pa(A)||Y(A)?JSON.stringify(A):A instanceof p||A instanceof w||A instanceof Array?X(A,null,L):J(A)?L?JSON.stringify(A.getTime()):JSON.stringify(S(A,"")):null!==A&&"object"===typeof A&&void 0!==A.castToText?A.castToText(L):"null"}function aa(A,L){return pa(A)?A:null===A||""===A?0:J(A)?NaN:ia(A)?A?1:0:oa(A)||""===A||void 0===A?NaN:void 0!==L&&Y(A)?(L=v(L,"\u2030",""),L=v(L,"\u00a4",""),c.parse(A,{pattern:L})):A===za?0:Number(A)}
function ja(A,L){if(J(A))return A;if(Y(A)){a:{const Z=/ (\d\d)/;var R=C.createDateTimeZone(L);R=n.DateTime.fromISO(A,{zone:R});if(R.isValid)L=R;else{if(Z.test(A)&&(A=A.replace(Z,"T$1"),R=n.DateTime.fromISO(A,{zone:L}),R.isValid)){L=R;break a}L=null}}if(L)return C.ArcadeDate.dateTimeToArcadeDate(L)}return null}function fa(A){return ia(A)?A:Y(A)?(A=A.toLowerCase(),"true"===A?!0:!1):pa(A)?0===A||isNaN(A)?!1:!0:!1}function ua(A,L){if(null==A)return null;if(null===A.spatialReference||void 0===A.spatialReference)A.spatialReference=
L;return A}function xa(A){if(null===A)return null;if(A instanceof z)return"NaN"===A.x||null===A.x||isNaN(A.x)?null:A;if(A instanceof l){if(0===A.rings.length)return null;for(const L of A.rings)if(0<L.length)return A;return null}if(A instanceof m){if(0===A.paths.length)return null;for(const L of A.paths)if(0<L.length)return A;return null}return A instanceof x?0===A.points.length?null:A:A instanceof E?"NaN"===A.xmin||null===A.xmin||isNaN(A.xmin)?null:A:null}function Fa(A,L){if(!A||!A.domain)return L;
let R=null,Z=null;if("string"===A.field.type||"esriFieldTypeString"===A.field.type)R=M(L);else{if(null===L||void 0===L)return null;if(""===L)return L;R=aa(L)}for(let ea=0;ea<A.domain.codedValues.length;ea++){const na=A.domain.codedValues[ea];na.code===R&&(Z=na)}return null===Z?M(L):Z.name}function Ia(A,L){if(!A||!A.domain)return L;let R=null;const Z=M(L);for(let ea=0;ea<A.domain.codedValues.length;ea++){const na=A.domain.codedValues[ea];na.name===Z&&(R=na)}return null===R?L:R.code}function Aa(A,L,
R=null,Z=null){if(!L||!L.fields)return null;let ea=null;for(var na=0;na<L.fields.length;na++){const va=L.fields[na];va.name.toLowerCase()===A.toString().toLowerCase()&&(ea=va)}if(null===ea)throw new g.ArcadeExecutionError(null,g.ExecutionErrorCodes.FieldNotFound,null,{key:A});let qa,Ja;if(null===Z&&R&&L.typeIdField)Z=R.hasField(L.typeIdField)?R.field(L.typeIdField):null;else if(L.typeIdField&&null!==Z){na=!1;for(const va of L.types||[])if(Z===va.id){na=!0;break}if(!na)for(const va of L.types||[])if(Z===
va.name){Z=va.id;na=!0;break}na||(Z=null,R&&L.typeIdField&&(Z=R.hasField(L.typeIdField)?R.field(L.typeIdField):null))}null!==Z&&void 0!==Z&&L.types.some(va=>va.id===Z?((qa=va.domains&&va.domains[ea.name])&&"inherited"===qa.type&&(qa=Ga(ea.name,L),Ja=!0),!0):!1);Ja||qa||(qa=Ga(A,L));return{field:ea,domain:qa}}function Ga(A,L){let R;L.fields.some(Z=>{Z.name.toLowerCase()===A.toLowerCase()&&(R=Z.domain);return!!R});return R}function Ea(A,L){L||(L={});"function"===typeof L&&(L={cmp:L});const R="boolean"===
typeof L.cycles?L.cycles:!1,Z=L.cmp&&function(na){return function(qa){return function(Ja,va){return na({key:Ja,value:qa[Ja]},{key:va,value:qa[va]})}}}(L.cmp),ea=[];return function Ja(qa){qa&&qa.toJSON&&"function"===typeof qa.toJSON&&(qa=qa.toJSON());if(void 0!==qa){if("number"===typeof qa)return isFinite(qa)?""+qa:"null";if("object"!==typeof qa)return JSON.stringify(qa);var va;if(Array.isArray(qa)){var Ka="[";for(va=0;va<qa.length;va++)va&&(Ka+=","),Ka+=Ja(qa[va])||"null";return Ka+"]"}if(null===
qa)return"null";if(ea.includes(qa)){if(R)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var db=ea.push(qa)-1,Ra=Object.keys(qa).sort(Z&&Z(qa));Ka="";for(va=0;va<Ra.length;va++){const Sa=Ra[va],Ta=Ja(qa[Sa]);Ta&&(Ka&&(Ka+=","),Ka+=JSON.stringify(Sa)+":"+Ta)}ea.splice(db,1);return"{"+Ka+"}"}}(A)}function ya(A){if(null===A)return null;const L=[];for(const R of A)R&&R.arcadeDeclaredClass&&"esri.arcade.Feature"===R.arcadeDeclaredClass?L.push(R.geometry()):
L.push(R);return L}function V(A,L){if(L instanceof z)A.push(L.hasZ?L.hasM?[L.x,L.y,L.z,L.m]:[L.x,L.y,L.z]:[L.x,L.y]);else throw new g.ArcadeExecutionError(null,g.ExecutionErrorCodes.InvalidParameter,null);}function ma(A,L){if(oa(A)||ra(A)){let R=!1,Z=!1,ea=[];if(oa(A)){for(const na of A)V(ea,na);0<ea.length&&(L=A[0].spatialReference,R=A[0].hasZ,Z=A[0].hasM)}else if(A instanceof a)ea=A._elements,0<ea.length&&(R=A._hasZ,Z=A._hasM,L=A.get(0).spatialReference);else if(ra(A)){for(const na of A.toArray())V(ea,
na);0<ea.length&&(L=A.get(0).spatialReference,R=!0===A.get(0).hasZ,Z=!0===A.get(0).hasM)}else throw new g.ArcadeExecutionError(null,g.ExecutionErrorCodes.InvalidParameter,null);if(0===ea.length)return null;d.isClockwise(ea,Z,R)||(ea=ea.slice(0).reverse());return new l({rings:[ea],spatialReference:L,hasZ:R,hasM:Z})}return A}function ta(A,L){if(oa(A)||ra(A)){let R=!1,Z=!1,ea=[];if(oa(A)){for(const na of A)V(ea,na);0<ea.length&&(L=A[0].spatialReference,R=!0===A[0].hasZ,Z=!0===A[0].hasM)}else if(A instanceof
a)ea=A._elements,0<ea.length&&(R=A._hasZ,Z=A._hasM,L=A.get(0).spatialReference);else if(ra(A)){for(const na of A.toArray())V(ea,na);0<ea.length&&(L=A.get(0).spatialReference,R=!0===A.get(0).hasZ,Z=!0===A.get(0).hasM)}return 0===ea.length?null:new m({paths:[ea],spatialReference:L,hasZ:R,hasM:Z})}return A}function Ha(A,L){if(oa(A)||ra(A)){let R=!1,Z=!1,ea=[];if(oa(A)){for(const na of A)V(ea,na);0<ea.length&&(L=A[0].spatialReference,R=!0===A[0].hasZ,Z=!0===A[0].hasM)}else if(A instanceof a)ea=A._elements,
0<ea.length&&(R=A._hasZ,Z=A._hasM,L=A.get(0).spatialReference);else if(ra(A)){for(const na of A.toArray())V(ea,na);0<ea.length&&(L=A.get(0).spatialReference,R=!0===A.get(0).hasZ,Z=!0===A.get(0).hasM)}return 0===ea.length?null:new x({points:ea,spatialReference:L,hasZ:R,hasM:Z})}return A}function ha(A,L=!1){const R=[];if(null===A)return R;if(!0===oa(A)){for(var Z=0;Z<A.length;Z++){var ea=M(A[Z]);""===ea&&!0!==L||R.push(ea)}return R}if(A instanceof w){for(Z=0;Z<A.length();Z++)ea=M(A.get(Z)),""===ea&&
!0!==L||R.push(ea);return R}return b(A)?(A=M(A),""===A&&!0!==L||R.push(A),R):[]}function Ca(A){Oa++;return 0===Oa%100?(Oa=0,new Promise(L=>{setTimeout(()=>{L(A)},0)})):A}function Da(A,L,R){switch(R){case "\x26":return A&L;case "|":return A|L;case "^":return A^L;case "\x3c\x3c":return A<<L;case "\x3e\x3e":return A>>L;case "\x3e\x3e\x3e":return A>>>L}}function La(A,L=null){if(null!=A){if(ia(A)||pa(A)||Y(A))return A;if(A instanceof p)return!0===L?.keepGeometryType?A:A.toJSON();if(A instanceof w)return A.toArray().map(R=>
La(R,L));if(A instanceof Array)return A.map(R=>La(R,L));if(H(A))return A;if(J(A))return A.toJSDate();if(null!==A&&"object"===typeof A&&void 0!==A.castAsJson)return A.castAsJson(L)}return null}async function eb(A,L,R,Z,ea){A=await Pa(A,L,R);ea[Z]=A}async function Pa(A,L=null,R=null){A instanceof w&&(A=A.toArray());if(null!=A){if(b(A)||A instanceof p||H(A)||J(A))return La(A,R);if(A instanceof Array){const Z=[],ea=[];for(const na of A)null===na||b(na)||na instanceof p||H(na)||J(na)?ea.push(La(na,R)):
(ea.push(null),Z.push(eb(na,L,R,ea.length-1,ea)));0<Z.length&&await Promise.all(Z);return ea}if(null!==A&&"object"===typeof A&&void 0!==A.castAsJsonAsync)return A.castAsJsonAsync(L,R)}return null}function Ma(A){return Qa(A)?A.parent:A}function Qa(A){return A&&"declaredClass"in A&&"esri.layers.support.SubtypeSublayer"===A.declaredClass}function Ua(A){return A&&"declaredClass"in A&&"esri.layers.SubtypeGroupLayer"===A.declaredClass}function Va(A,L,R){const Z=Ma(A.fullSchema());return null!==Z&&Z.fields?
Aa(L,Z,A,R):null}function Wa(A){A=Ma(A.fullSchema());return null!==A&&A.fields?A.typeIdField?{subtypeField:A.typeIdField,subtypes:A.types?A.types.map(L=>({name:L.name,code:L.id})):[]}:null:null}function Xa(A,L,R,Z){const ea=Ma(A.fullSchema());if(null===ea||!ea.fields)return null;Z=Aa(L,ea,A,Z);if(void 0===R)try{R=A.field(L)}catch(na){return null}return Fa(Z,R)}function Ya(A,L,R,Z){const ea=Ma(A.fullSchema());if(null===ea||!ea.fields)return null;if(void 0===R){try{R=A.field(L)}catch(na){return null}return R}A=
Aa(L,ea,A,Z);return Ia(A,R)}function Za(A){return A?.timeReference?.timeZone??"system"}function $a(A){A=Ma(A.fullSchema());if(null===A||!A.fields)return null;const L=[];for(const R of A.fields)L.push(D.esriFieldToJson(R));return{objectIdField:A.objectIdField,globalIdField:A.globalIdField??"",geometryType:void 0===D.layerGeometryEsriRestConstants[A.geometryType]?"":D.layerGeometryEsriRestConstants[A.geometryType],fields:L}}function ab(A,L){"system"===A&&(A=C.ArcadeDate.systemTimeZoneCanonicalName);
return{version:"1.23",engineVersion:u.version,timeZone:A,spatialReference:L.toJSON(),application:y.applicationName??"",engine:"web",locale:k.getLocale()}}let Na=K._createClass(function(A){this.value=A});K=K._createClass(function(A){this.value=A});const za={type:"VOID"},bb={type:"BREAK"},cb={type:"CONTINUE"};let Oa=0;const fb=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:K,ImplicitResultE:K,ReturnResult:Na,ReturnResultE:Na,absRound:G,arcadeVersion:"1.23",autoCastArrayOfPointsToMultiPoint:Ha,
autoCastArrayOfPointsToPolygon:ma,autoCastArrayOfPointsToPolyline:ta,autoCastFeatureToGeometry:ya,binaryOperator:Da,breakResult:bb,castAsJson:La,castAsJsonAsync:Pa,continueResult:cb,defaultExecutingContext:ab,defaultTimeZone:Za,defaultUndefined:U,equalityTest:I,featureDomainCodeLookup:Ya,featureDomainValueLookup:Xa,featureFullDomain:Va,featureSchema:$a,featureSubtypes:Wa,fixNullGeometry:xa,fixSpatialReference:ua,formatDate:S,formatNumber:P,generateUUID:Q,getDomain:Aa,getDomainCode:Ia,getDomainValue:Fa,
getType:ba,greaterThanLessThan:q,isArray:oa,isBoolean:ia,isDate:J,isDictionary:ka,isFeature:la,isFeatureSet:W,isFeatureSetCollection:sa,isFunctionParameter:r,isGeometry:wa,isImmutableArray:ra,isInteger:Ba,isJsDate:H,isModule:N,isNumber:pa,isObject:F,isSimpleType:b,isString:Y,isSubtypeGrouplayer:Ua,isSubtypeSublayer:Qa,multiReplace:v,pcCheck:O,stableStringify:Ea,standardiseDateFormat:da,tick:Ca,toBoolean:fa,toDate:ja,toNumber:aa,toNumberArray:T,toString:M,toStringArray:ha,toStringExplicit:X,voidOperation:za},
Symbol.toStringTag,{value:"Module"}));t.ImplicitResult=K;t.ImplicitResultE=K;t.ReturnResult=Na;t.ReturnResultE=Na;t.absRound=G;t.arcadeVersion="1.23";t.autoCastArrayOfPointsToMultiPoint=Ha;t.autoCastArrayOfPointsToPolygon=ma;t.autoCastArrayOfPointsToPolyline=ta;t.autoCastFeatureToGeometry=ya;t.binaryOperator=Da;t.breakResult=bb;t.castAsJson=La;t.castAsJsonAsync=Pa;t.continueResult=cb;t.defaultExecutingContext=ab;t.defaultTimeZone=Za;t.defaultUndefined=U;t.equalityTest=I;t.featureDomainCodeLookup=
Ya;t.featureDomainValueLookup=Xa;t.featureFullDomain=Va;t.featureSchema=$a;t.featureSubtypes=Wa;t.fixNullGeometry=xa;t.fixSpatialReference=ua;t.formatDate=S;t.formatNumber=P;t.generateUUID=Q;t.getDomain=Aa;t.getDomainCode=Ia;t.getDomainValue=Fa;t.getType=ba;t.greaterThanLessThan=q;t.isArray=oa;t.isBoolean=ia;t.isDate=J;t.isDictionary=ka;t.isFeature=la;t.isFeatureSet=W;t.isFeatureSetCollection=sa;t.isFunctionParameter=r;t.isGeometry=wa;t.isImmutableArray=ra;t.isInteger=Ba;t.isJsDate=H;t.isModule=N;
t.isNumber=pa;t.isObject=F;t.isSimpleType=b;t.isString=Y;t.isSubtypeGrouplayer=Ua;t.isSubtypeSublayer=Qa;t.lc=fb;t.multiReplace=v;t.pcCheck=O;t.stableStringify=Ea;t.standardiseDateFormat=da;t.tick=Ca;t.toBoolean=fa;t.toDate=ja;t.toNumber=aa;t.toNumberArray=T;t.toString=M;t.toStringArray=ha;t.toStringExplicit=X;t.voidOperation=za})},"esri/arcade/FunctionWrapper":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/promiseUtils"],function(t,K,B){function w(E,p,x){if(E instanceof
f&&!(E instanceof C)){const z=new C;z.fn=E;z.parameterEvaluator=x;z.context=p;return z}return E}let f=K._createClass(function(){}),a=function(E){function p(z){var l=E.call(this)||this;l.fn=z;return l}K._inherits(p,E);var x=p.prototype;x.createFunction=function(z){return(...l)=>this.fn(z,{preparsed:!0,arguments:l})};x.call=function(z,l){return this.fn(z,l)};x.marshalledCall=function(z,l,m,n){return n(z,l,(c,d,k)=>{k=k.map(y=>y instanceof f&&!(y instanceof C)?w(y,z,n):y);c=this.call(m,{args:k});return B.isPromiseLike(c)?
c.then(y=>w(y,m,n)):c})};return K._createClass(p)}(f),C=function(E){function p(){var z=E.apply(this,arguments)||this;z.fn=null;z.context=null;return z}K._inherits(p,E);var x=p.prototype;x.createFunction=function(z){return this.fn.createFunction(this.context)};x.call=function(z,l){return this.fn.marshalledCall(z,l,this.context,this.parameterEvaluator)};x.marshalledCall=function(z,l,m){return this.fn.marshalledCall(z,l,this.context,this.parameterEvaluator)};return K._createClass(p)}(f);t.ArcadeFunction=
f;t.NativeFunction=a;t.ScopeMarshalledFunction=C;t.wrapModuleScopedResponse=w;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ImmutableArray":function(){define(["../chunks/_rollupPluginBabelHelpers"],function(t){return function(){function K(w=[]){this._elements=w}var B=K.prototype;B.length=function(){return this._elements.length};B.get=function(w){return this._elements[w]};B.toArray=function(){const w=[];for(let f=0;f<this.length();f++)w.push(this.get(f));return w};return t._createClass(K)}()})},
"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(t,K,B){return function(w){function f(C,E,p,x,z){C=w.call(this,C)||this;C._lazyPath=[];C._hasZ=!1;C._hasM=!1;C._hasZ=p;C._hasM=x;C._spRef=E;C._cacheId=z;return C}t._inherits(f,w);var a=f.prototype;a.get=function(C){if(void 0===this._lazyPath[C]){const E=this._elements[C];if(void 0===E)return;this._lazyPath[C]=new B(E,this._spRef,this._hasZ,this._hasM,this._cacheId,
C)}return this._lazyPath[C]};a.equalityTest=function(C){return C===this?!0:null===C||!1===C instanceof f?!1:C.getUniqueHash()===this.getUniqueHash()};a.getUniqueHash=function(){return this._cacheId.toString()};return t._createClass(f)}(K)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],function(t,K,B){return function(w){function f(C,E,p,x,z,l){C=w.call(this,C)||this;C._lazyPt=[];C._hasZ=!1;C._hasM=!1;C._spRef=E;
C._hasZ=p;C._hasM=x;C._cacheId=z;C._partId=l;return C}t._inherits(f,w);var a=f.prototype;a.get=function(C){if(void 0===this._lazyPt[C]){const E=this._elements[C];if(void 0===E)return;const p=this._hasZ,x=this._hasM;let z=null;z=p&&!x?new B(E[0],E[1],E[2],void 0,this._spRef):x&&!p?new B(E[0],E[1],void 0,E[2],this._spRef):p&&x?new B(E[0],E[1],E[2],E[3],this._spRef):new B(E[0],E[1],this._spRef);z.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+C.toString();this._lazyPt[C]=
z}return this._lazyPt[C]};a.equalityTest=function(C){return C===this?!0:null===C||!1===C instanceof f?!1:C.getUniqueHash()===this.getUniqueHash()};a.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return t._createClass(f)}(K)})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(t,K,B){function w(z=B.getLocale()){z=z.toLowerCase();let l=z in E;if(!l){const d=z.split("-");1<d.length&&d[0]in E&&(z=d[0],l=!0);l||(z="en")}const [m,
n,c="#,##0.###"]=E[z];return{decimal:m,group:n,pattern:c}}function f(z){z=z||{};var l=w(z.locale);const m=z.pattern||l.pattern,n=l.group,c=l.decimal;let d=1;if(m.includes("%"))d/=100;else if(m.includes("\u2030"))d/=1E3;else if(m.includes("\u00a4"))throw Error("currency notation not supported");l=m.split(";");1===l.length&&l.push("-"+l[0]);return{regexp:x(l,k=>{k="(?:"+K.escapeRegExpString(k,".")+")";return k.replace(p,y=>{const u={signed:!1,separator:z.strict?n:[n,""],fractional:z.fractional,decimal:c,
exponent:!1};y=y.split(".");let D=z.places;1===y.length&&1!==d&&(y[1]="###");1===y.length||0===D?u.fractional=!1:(void 0===D&&(D=z.pattern?y[1].lastIndexOf("0")+1:Infinity),D&&null==z.fractional&&(u.fractional=!0),!z.places&&+D<y[1].length&&(D+=","+y[1].length),u.places=D);y=y[0].split(",");1<y.length&&(u.groupSize=y.pop().length,1<y.length&&(u.groupSize2=y.pop().length));return"("+a(u)+")"})},!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:n,decimal:c,factor:d}}function a(z){z=z||{};"places"in z||
(z.places=Infinity);"string"!==typeof z.decimal&&(z.decimal=".");"fractional"in z&&!/^0/.test(String(z.places))||(z.fractional=[!0,!1]);"exponent"in z||(z.exponent=[!0,!1]);"eSigned"in z||(z.eSigned=[!0,!1]);var l=C(z);const m=x(z.fractional,c=>{let d="";c&&0!==z.places&&(d="\\"+z.decimal,d=Infinity===z.places?"(?:"+d+"\\d+)?":d+("\\d{"+z.places+"}"));return d},!0),n=x(z.exponent,c=>c?"([eE]"+C({signed:z.eSigned})+")":"");l+=m;m&&(l="(?:(?:"+l+")|(?:"+m+"))");return l+n}function C(z){z=z||{};"signed"in
z||(z.signed=[!0,!1]);"separator"in z?"groupSize"in z||(z.groupSize=3):z.separator="";const l=x(z.signed,n=>n?"[-+]":"",!0),m=x(z.separator,n=>{if(!n)return"(?:\\d+)";n=K.escapeRegExpString(n);" "===n?n="\\s":"\u00a0"===n&&(n="\\s\\xa0");const c=z.groupSize,d=z.groupSize2;return d?(n="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+n+"]\\d{"+d+"})*["+n+"]\\d{"+c+"})",0<c-d?"(?:"+n+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":n):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+n+"]\\d{"+c+"})*)"},!0);return l+m}const E={ar:[".",","],bg:[",",
"\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",",
"."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},p=/[#0,]*[#0](?:\.0*#*)?/,x=(z,l,m)=>{if(!(z instanceof Array))return l(z);const n=[];for(let c=0;c<z.length;c++)n.push(l(z[c]));z=n.join("|");return"("+(m?"?:":"")+z+")"};t._parseInfo=f;t.format=function(z,l){l={...l};var m=w(l.locale);l.customs=m;m=l.pattern||m.pattern;if(isNaN(z)||Infinity===Math.abs(z))return null;
var n=z;var c=l||{};var d=c.customs.group,k=c.customs.decimal;m=m.split(";");z=m[0];l=m[0>n?1:0]||"-"+z;if(l.includes("%"))n*=100;else if(l.includes("\u2030"))n*=1E3;else{if(l.includes("\u00a4"))throw Error("currency notation not supported");if(l.includes("E"))throw Error("exponential notation not supported");}m=p;var y=z.match(m);if(!y)throw Error("unable to find a number expression in pattern: "+l);!1===c.fractional&&(c.places=0);z=l.replace;y=y[0];c=c={decimal:k,group:d,places:c.places,round:c.round};
!0===c.places&&(c.places=0);Infinity===c.places&&(c.places=6);k=y.split(".");var u="string"===typeof c.places&&c.places.indexOf(",");y=c.places;u?y=c.places.substring(u+1):0<=+y||(y=(k[1]||[]).length);0>c.round||(n=Number(n.toFixed(Number(y))));d=String(Math.abs(n)).split(".");n=d[1]||"";k[1]||c.places?(u&&(c.places=c.places.substring(0,u)),u=void 0!==c.places?c.places:k[1]&&k[1].lastIndexOf("0")+1,+u>n.length&&(d[1]=n.padEnd(Number(u),"0")),+y<n.length&&(d[1]=n.substr(0,Number(y)))):d[1]&&d.pop();
n=k[0].replace(",","");y=n.indexOf("0");-1!==y&&(y=n.length-y,y>d[0].length&&(d[0]=d[0].padStart(y,"0")),n.includes("#")||(d[0]=d[0].substr(d[0].length-y)));n=k[0].lastIndexOf(",");let D;if(-1!==n){var h=k[0].length-n-1;k=k[0].substr(0,n);n=k.lastIndexOf(",");-1!==n&&(D=k.length-n-1)}k=[];for(n=d[0];n;)y=n.length-h,k.push(0<y?n.substr(y):n),n=0<y?n.slice(0,y):"",D&&(h=D,D=void 0);d[0]=k.reverse().join(c.group||",");h=d.join(c.decimal||".");return z.call(l,m,h)};t.getCustoms=w;t.parse=function(z,l){l=
f(l);z=(new RegExp("^"+l.regexp+"$")).exec(z);if(!z)return NaN;let m=z[1];if(!z[1]){if(!z[2])return NaN;m=z[2];l.factor*=-1}m=m.replaceAll(new RegExp("["+l.group+"\\s\\xa0]","g"),"").replace(l.decimal,".");return Number(m)*l.factor};t.regexp=function(z){return f(z).regexp};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../ArcadeDate","../../../geometry/Extent","../../../layers/support/Field"],function(t,K,B,
w){function f(C){return C instanceof Date}function a(C){return C instanceof K.ArcadeDate}t.FeatureServiceDatabaseType=void 0;(function(C){C[C.Standardised=0]="Standardised";C[C.StandardisedNoInterval=1]="StandardisedNoInterval";C[C.SqlServer=2]="SqlServer";C[C.Oracle=3]="Oracle";C[C.Postgres=4]="Postgres";C[C.PGDB=5]="PGDB";C[C.FILEGDB=6]="FILEGDB";C[C.NotEvaluated=7]="NotEvaluated"})(t.FeatureServiceDatabaseType||(t.FeatureServiceDatabaseType={}));t.IdState=void 0;(function(C){C[C.InFeatureSet=0]=
"InFeatureSet";C[C.NotInFeatureSet=1]="NotInFeatureSet";C[C.Unknown=2]="Unknown"})(t.IdState||(t.IdState={}));t.callback=function(C,E){return function(){try{C.apply(null,arguments)}catch(p){E.reject(p)}}};t.cloneAttributes=function(C){const E={};for(const p in C)E[p]=C[p];return E};t.cloneField=function(C){return w.fromJSON(C.toJSON())};t.convertLinearUnitsToCode=function(C){if(null==C)return null;if("number"===typeof C||"number"===typeof C)return C;switch(C.toLowerCase()){case "meters":case "meter":return 9001;
case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};t.convertSquareUnitsToCode=function(C){if(null==C)return null;if("number"===typeof C)return C;switch(C.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;case "kilometers":case "kilometer":case "km":return 109414}return null};t.defaultMaxRecords=1E3;t.equalityTest=function(C,E){return C===E?!0:(f(C)||a(C))&&(f(E)||a(E))?C.getTime()===E.getTime():!1};
t.errback=function(C){return function(E){C.reject(E)}};t.esriFieldToJson=function(C){return C.toJSON?C.toJSON():C};t.extractServiceUrl=function(C){if(void 0===C)return"";C=C.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");C=C.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return C=C.split("?")[0]};t.isArcadeDate=a;t.isArray=function(C){return C instanceof Array};t.isBoolean=function(C){return"boolean"===typeof C};t.isDate=f;t.isNumber=function(C){return"number"===typeof C};t.isString=function(C){return"string"===
typeof C||C instanceof String};t.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",
esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};
t.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};t.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",
esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};t.sameGeomType=function(C,E){return C===E||"point"===C&&"esriGeometryPoint"===E||"polyline"===C&&"esriGeometryPolyline"===E||"polygon"===C&&"esriGeometryPolygon"===E||"extent"===C&&"esriGeometryEnvelope"===E||"multipoint"===C&&"esriGeometryMultipoint"===E||"point"===E&&"esriGeometryPoint"===
C||"polyline"===E&&"esriGeometryPolyline"===C||"polygon"===E&&"esriGeometryPolygon"===C||"extent"===E&&"esriGeometryEnvelope"===C||"multipoint"===E&&"esriGeometryMultipoint"===C?!0:!1};t.shapeExtent=function(C){if(null==C)return null;switch(C.type){case "polygon":case "multipoint":case "polyline":return C.extent;case "point":return new B({xmin:C.x,ymin:C.y,xmax:C.x,ymax:C.y,spatialReference:C.spatialReference});case "extent":return C}return null};t.stableStringify=function(C,E){E||(E={});"function"===
typeof E&&(E={cmp:E});const p="boolean"===typeof E.cycles?E.cycles:!1,x=E.cmp&&function(l){return function(m){return function(n,c){return l({key:n,value:m[n]},{key:c,value:m[c]})}}}(E.cmp),z=[];return function n(m){m&&m.toJSON&&"function"===typeof m.toJSON&&(m=m.toJSON());if(void 0!==m){if("number"===typeof m)return isFinite(m)?""+m:"null";if("object"!==typeof m)return JSON.stringify(m);var c;if(Array.isArray(m)){var d="[";for(c=0;c<m.length;c++)c&&(d+=","),d+=n(m[c])||"null";return d+"]"}if(null===
m)return"null";if(z.includes(m)){if(p)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var k=z.push(m)-1,y=Object.keys(m).sort(x&&x(m));d="";for(c=0;c<y.length;c++){const u=y[c],D=n(m[u]);D&&(d&&(d+=","),d+=JSON.stringify(u)+":"+D)}z.splice(k,1);return"{"+d+"}"}}(C)};t.toEsriGeometryType=function(C){switch(C){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";
default:return"esriGeometryPoint"}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Feature":function(){define("../chunks/_rollupPluginBabelHelpers ./Dictionary ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ./ArcadeDate ./executionError ./arcadeTimeUtils ./deepClone".split(" "),function(t,K,B,w,f,a,C,E,p,x,z,l){let m=function(){function n(){this.arcadeDeclaredClass=
"esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this._datesfixed=!0;this.contextTimeReference=this.dateTimeReferenceFieldIndex=null;this.immutable=!0;this._datefields=null;this.immutable=!0}n.createFromGraphic=function(d,k){const y=new n;y.contextTimeReference=k??null;y._geometry=null!=d.geometry?d.geometry:null;y.attributes=void 0===d.attributes?{}:null===d.attributes?{}:d.attributes;d._sourceLayer?(y._layer=d._sourceLayer,y._datesfixed=!1):d._layer?
(y._layer=d._layer,y._datesfixed=!1):d.layer&&"fields"in d.layer?(y._layer=d.layer,y._datesfixed=!1):d.sourceLayer&&"fields"in d.sourceLayer&&(y._layer=d.sourceLayer,y._datesfixed=!1);y._layer&&!1===y._datesfixed&&(y.dateTimeReferenceFieldIndex=void 0!==y._layer.dateTimeReferenceFieldIndex?y._layer.dateTimeReferenceFieldIndex:z.DateTimeReferenceFieldIndex.createFromLayer(y._layer));return y};n.createFromArcadeFeature=function(d){if(d instanceof n){var k=new n;k._datesfixed=d._datesfixed;k.attributes=
d.attributes;k._geometry=d._geometry;k._optimizedGeomDefinition=d._optimizedGeomDefinition;d._layer&&(k._layer=d._layer);k.dateTimeReferenceFieldIndex=d.dateTimeReferenceFieldIndex;k.contextTimeReference=d.contextTimeReference;return k}k={};for(const y of d.keys())k[y]=d.field(y);return n.createFromGraphicLikeObject(d.geometry(),k,d.fullSchema(),d.contextTimeReference)};n.createFromOptimisedFeature=function(d,k,y){const u=new n;u._geometry=d.geometry?{geometry:d.geometry}:null;u._optimizedGeomDefinition=
y;u.attributes=d.attributes||{};u._layer=k;u._datesfixed=!1;return u};n.createFromArcadeDictionary=function(d){const k=new n;k.attributes=d.field("attributes");null!==k.attributes?k.attributes instanceof K?(k.attributes=k.attributes.attributes,null===k.attributes&&(k.attributes={})):k.attributes={}:k.attributes={};k._geometry=d.field("geometry");null!==k._geometry&&(k._geometry instanceof K?k._geometry=n.parseGeometryFromDictionary(k._geometry):k._geometry instanceof f||(k._geometry=null));return k};
n.createFromGraphicLikeObject=function(d,k,y=null,u){const D=new n;D.contextTimeReference=u??null;null===k&&(k={});D.attributes=k;D._geometry=null!=d?d:null;D._layer=y;D._layer&&(D._datesfixed=!1,D.dateTimeReferenceFieldIndex=void 0!==D._layer.dateTimeReferenceFieldIndex?D._layer.dateTimeReferenceFieldIndex:z.DateTimeReferenceFieldIndex.createFromLayer(D._layer));return D};var c=n.prototype;c.repurposeFromGraphicLikeObject=function(d,k,y=null){null===k&&(k={});this.attributes=k;this._geometry=d??
null;this._datesfixed=(this._layer=y)?!1:!0};c.fieldSourceTimeZone=function(d){return this.dateTimeReferenceFieldIndex?.fieldTimeZone(d)??""};c.castToText=function(d=!1){let k="";!1===this._datesfixed&&this._fixDates();for(const y in this.attributes){""!==k&&(k+=",");const u=this.attributes[y];null==u?k+=JSON.stringify(y)+":null":w.isBoolean(u)||w.isNumber(u)||w.isString(u)?k+=JSON.stringify(y)+":"+JSON.stringify(u):u instanceof f?k+=JSON.stringify(y)+":"+w.toStringExplicit(u):u instanceof B?k+=JSON.stringify(y)+
":"+w.toStringExplicit(u,null,d):u instanceof Array?k+=JSON.stringify(y)+":"+w.toStringExplicit(u,null,d):u instanceof p.ArcadeDate?k=d?k+(JSON.stringify(y)+":"+JSON.stringify(u.getTime())):k+(JSON.stringify(y)+":"+u.stringify()):null!==u&&"object"===typeof u&&void 0!==u.castToText&&(k+=JSON.stringify(y)+":"+u.castToText(d))}return'{"geometry":'+(null===this.geometry()?"null":w.toStringExplicit(this.geometry()))+',"attributes":{'+k+"}}"};c._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&
this._fixDateFields(this._datefields);else{var d=[],k=this._layer.fields;for(let y=0;y<k.length;y++){const u=k[y],D=u.type;"date"!==D&&"esriFieldTypeDate"!==D||d.push(u.name)}this._datefields=d;0<d.length&&this._fixDateFields(d)}this._datesfixed=!0};c.isUnknownDateTimeField=function(d){return"unknown"===this.dateTimeReferenceFieldIndex?.fieldTimeZone(d)};c._fixDateFields=function(d){this.attributes={...this.attributes};const k=this.contextTimeReference?.timeZone??"system";for(let u=0;u<d.length;u++){let D=
this.attributes[d[u]];if(null!==D)if(void 0===D)for(const h in this.attributes){if(h.toLowerCase()===d[u].toLowerCase()){D=this.attributes[h];if(null!==D){var y=this.isUnknownDateTimeField(h);w.isDate(D)?this.attributes[h]=D:this.attributes[h]=D instanceof Date?y?p.ArcadeDate.unknownDateJSToArcadeDate(D):p.ArcadeDate.dateJSAndZoneToArcadeDate(D,k):y?p.ArcadeDate.unknownEpochToArcadeDate(D):p.ArcadeDate.epochToArcadeDate(D,k)}break}}else y=this.isUnknownDateTimeField(d[u]),w.isDate(D)?this.attributes[d[u]]=
D:this.attributes[d[u]]=D instanceof Date?y?p.ArcadeDate.unknownDateJSToArcadeDate(D):p.ArcadeDate.dateJSAndZoneToArcadeDate(D,k):y?p.ArcadeDate.unknownEpochToArcadeDate(D):p.ArcadeDate.epochToArcadeDate(D,k)}};c.geometry=function(){if(null===this._geometry||this._geometry instanceof f)return this._geometry;this._optimizedGeomDefinition?(this._geometry=C.fromJSON(E.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),
this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=C.fromJSON(this._geometry);return this._geometry};c.field=function(d){!1===this._datesfixed&&this._fixDates();var k=this.attributes[d];if(void 0!==k)return k;k=d.toLowerCase();for(const y in this.attributes)if(y.toLowerCase()===k)return this.attributes[y];if(this._hasFieldDefinition(k))return null;throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.FieldNotFound,null,{key:d});};c._hasFieldDefinition=
function(d){if(null===this._layer)return!1;for(let k=0;k<this._layer.fields.length;k++)if(this._layer.fields[k].name.toLowerCase()===d)return!0;return!1};c.setField=function(d,k){if(this.immutable)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.Immutable,null);k instanceof Date&&(k=this.isUnknownDateTimeField(d)?p.ArcadeDate.unknownDateJSToArcadeDate(k):p.ArcadeDate.dateJSToArcadeDate(k));if(!1===w.isSimpleType(k))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.TypeNotAllowedInFeature,
null);const y=d.toLowerCase();if(void 0===this.attributes[d])for(const u in this.attributes)if(u.toLowerCase()===y){this.attributes[u]=k;return}this.attributes[d]=k};c.hasField=function(d){const k=d.toLowerCase();if(void 0!==this.attributes[d])return!0;for(const y in this.attributes)if(y.toLowerCase()===k)return!0;return this._hasFieldDefinition(k)?!0:!1};c.keys=function(){let d=[];const k={};for(var y in this.attributes)d.push(y),k[y.toLowerCase()]=1;if(null!==this._layer)for(y=0;y<this._layer.fields.length;y++){const u=
this._layer.fields[y];1!==k[u.name.toLowerCase()]&&d.push(u.name)}return d=d.sort()};n.parseGeometryFromDictionary=function(d){d=n._convertDictionaryToJson(d,!0);void 0!==d.hasm&&(d.hasM=d.hasm,delete d.hasm);void 0!==d.hasz&&(d.hasZ=d.hasz,delete d.hasz);void 0!==d.spatialreference&&(d.spatialReference=d.spatialreference,delete d.spatialreference);void 0!==d.rings&&(d.rings=this._fixPathArrays(d.rings,!0===d.hasZ,!0===d.hasZ));void 0!==d.paths&&(d.paths=this._fixPathArrays(d.paths,!0===d.hasZ,!0===
d.hasM));void 0!==d.points&&(d.points=this._fixPointArrays(d.points,!0===d.hasZ,!0===d.hasM));return C.fromJSON(d)};n._fixPathArrays=function(d,k,y){const u=[];if(d instanceof Array)for(var D=0;D<d.length;D++)u.push(this._fixPointArrays(d[D],k,y));else if(d instanceof B)for(D=0;D<d.length();D++)u.push(this._fixPointArrays(d.get(D),k,y));return u};n._fixPointArrays=function(d,k,y){const u=[];if(d instanceof Array)for(var D=0;D<d.length;D++){var h=d[D];h instanceof a?k&&y?u.push([h.x,h.y,h.z,h.m]):
k?u.push([h.x,h.y,h.z]):y?u.push([h.x,h.y,h.m]):u.push([h.x,h.y]):h instanceof B?u.push(h.toArray()):u.push(h)}else if(d instanceof B)for(D=0;D<d.length();D++)h=d.get(D),h instanceof a?k&&y?u.push([h.x,h.y,h.z,h.m]):k?u.push([h.x,h.y,h.z]):y?u.push([h.x,h.y,h.m]):u.push([h.x,h.y]):h instanceof B?u.push(h.toArray()):u.push(h);return u};n._convertDictionaryToJson=function(d,k=!1){const y={};for(const u in d.attributes){let D=d.attributes[u];D instanceof K&&(D=n._convertDictionaryToJson(D));k?y[u.toLowerCase()]=
D:y[u]=D}return y};n.parseAttributesFromDictionary=function(d){const k={};for(const y in d.attributes){const u=d.attributes[y];if(w.isSimpleType(u))k[y]=u;else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidParameter,null);}return k};n.fromJson=function(d,k){let y=null;null!==d.geometry&&void 0!==d.geometry&&(y=C.fromJSON(d.geometry));const u={};if(null!==d.attributes&&void 0!==d.attributes)for(const D in d.attributes){const h=d.attributes[D];if(null===h)u[D]=h;else if(w.isString(h)||
w.isNumber(h)||w.isBoolean(h)||w.isDate(h))u[D]=h;else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidParameter,null);}return n.createFromGraphicLikeObject(y,u,null,k??null)};c.fullSchema=function(){return this._layer};c.gdbVersion=function(){if(null===this._layer)return"";const d=this._layer.gdbVersion;return void 0===d?"":""===d&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":d};c.castAsJson=function(d){const k={attributes:{},geometry:!0===d?.keepGeometryType?
this.geometry():this.geometry()?.toJSON()??null};for(const y in this.attributes){const u=this.attributes[y];void 0!==u&&(k.attributes[y]=w.castAsJson(u,d))}return k};c.castAsJsonAsync=async function(d,k){return this.castAsJson(k)};t._createClass(n,[{key:"layerPreferredTimeZone",get:function(){return this.dateTimeReferenceFieldIndex?.layerPreferredTimeZone??""}}]);return n}();l.configureDeepClone(m);return m})},"esri/arcade/arcadeTimeUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./ArcadeDate ../layers/support/FieldsIndex ../time/TimeReference ../chunks/datetime ../time/timeReferenceUtils".split(" "),
function(t,K,B,w,f,a,C){function E(x){return x?.timeZoneIANA?x?.timeZoneIANA:x?.timeZone?C.convertLegacyTimeZone(x,""):""}let p=function(){function x(){this.dateTimeReferenceMetaData=null;this._fieldTimeZoneIndex={};this._ianaLayerDateFields=this._ianaEditFields=this._ianaTimeInfo=this._ianaPreferred=this._fieldIndex=null}x.create=function(l,m){const n=new x;n.dateTimeReferenceMetaData=m;n._fieldIndex=l instanceof w?l:new w(l);return n};x.createFromLayer=function(l){if(!l)return null;if(!l.fieldsIndex)return!l.declaredClass&&
l.fields?x.create(l.fields,l):null;const m=new x;m._fieldIndex=l.fieldsIndex;m.dateTimeReferenceMetaData={timeInfo:l?.timeInfo?.toJSON()??null,editFieldsInfo:l?.editFieldsInfo?.toJSON()??null,dateFieldsTimeReference:l?.dateFieldsTimeReference?.toJSON()??null,preferredTimeReference:l?.preferredTimeReference?.toJSON()??null,datesInUnknownTimezone:!0===l?.datesInUnknownTimezone};return m};var z=x.prototype;z.fieldTimeZone=function(l){l=this._fieldIndex?.get(l);if(!l||"date"!==l.type&&"esriFieldTypeDate"!==
l.type)return null;var m=this._fieldTimeZoneIndex[l.name];if(void 0!==m)return m;m=[{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.creationDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.editDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},
{field:this.dateTimeReferenceMetaData?.timeInfo?.startTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.endTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone}];for(var n of m)if(n.field===l.name)return n=this.convertToIANA(n.timeReference,n.isunknown),
this._fieldTimeZoneIndex[l.name]=n;n=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,this.dateTimeReferenceMetaData?.datesInUnknownTimezone);return this._fieldTimeZoneIndex[l.name]=n};z.convertToIANA=function(l,m){return m?"unknown":E(l)};K._createClass(x,[{key:"layerPreferredTimeZone",get:function(){if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";return this._ianaPreferred=this.convertToIANA(this.dateTimeReferenceMetaData?.preferredTimeReference,
!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}},{key:"layerTimeInfoTimeZone",get:function(){if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";return this._ianaTimeInfo=this.convertToIANA(this.dateTimeReferenceMetaData?.timeInfo?.timeReference,!1)}},{key:"layerEditFieldsTimeZone",get:function(){if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";return this._ianaEditFields=this.convertToIANA(this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,
this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}},{key:"layerDateFieldsTimeZone",get:function(){if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;this._ianaLayerDateFields="";return this._ianaLayerDateFields=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}}]);return x}();t.DateTimeReferenceFieldIndex=p;t.convertTimeReference=function(x){if(!x)return null;x instanceof f&&(x=E(x.toJSON()));
if(x instanceof a.Zone)return x;if("unknown"===x.toLowerCase())return B.UnknownTimeZone.instance;if("system"===x.toLowerCase())return a.SystemZone.instance;if("utc"===x.toLowerCase())return a.FixedOffsetZone.utcInstance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(x)){const z=a.FixedOffsetZone.parseSpecifier("UTC"+(x.startsWith("+")||x.startsWith("-")?"":"+")+x);if(z)return z}x=a.IANAZone.create(x);if(!x.isValid)throw new B.ArcadeDateError(B.ArcadeDateErrorCodes.TimeZoneNotRecognised);return x};t.convertToIANA=
E;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/treeAnalysis":function(){define(["exports"],function(t){function K(n){return"string"===typeof n||n instanceof String}function B(n,c){if(n)for(const d of n)w(d,c)}function w(n,c){if(n&&!1!==c(n))switch(n.type){case "ImportDeclaration":B(n.specifiers,c);w(n.source,c);break;case "ExportNamedDeclaration":w(n.declaration,c);break;case "ArrayExpression":B(n.elements,c);break;case "AssignmentExpression":case "BinaryExpression":w(n.left,
c);w(n.right,c);break;case "BlockStatement":B(n.body,c);break;case "Program":B(n.body,c);break;case "CallExpression":w(n.callee,c);B(n.arguments,c);break;case "ExpressionStatement":w(n.expression,c);break;case "ForInStatement":w(n.left,c);w(n.right,c);w(n.body,c);break;case "ForStatement":w(n.init,c);w(n.test,c);w(n.update,c);w(n.body,c);break;case "WhileStatement":w(n.test,c);w(n.body,c);break;case "FunctionDeclaration":w(n.id,c);B(n.params,c);w(n.body,c);break;case "IfStatement":w(n.test,c);w(n.consequent,
c);w(n.alternate,c);break;case "LogicalExpression":w(n.left,c);w(n.right,c);break;case "MemberExpression":w(n.object,c);w(n.property,c);break;case "ObjectExpression":B(n.properties,c);break;case "Property":w(n.key,c);w(n.value,c);break;case "ReturnStatement":w(n.argument,c);break;case "UnaryExpression":w(n.argument,c);break;case "UpdateExpression":w(n.argument,c);break;case "VariableDeclaration":B(n.declarations,c);break;case "VariableDeclarator":w(n.id,c);w(n.init,c);break;case "TemplateLiteral":B(n.expressions,
c),B(n.quasis,c)}}function f(n,c){let d=!1;const k=c.toLowerCase();w(n,y=>{if(d)return!1;"Identifier"===y.type&&y.name&&y.name.toLowerCase()===k&&(d=!0);return!0});return d}function a(n){const c=[];w(n,d=>{"ImportDeclaration"===d.type&&d.source&&d.source.value&&c.push({libname:d.specifiers[0].local.name.toLowerCase(),source:d.source.value});return!0});return c}function C(n){const c=[];w(n,d=>{"CallExpression"===d.type&&"Identifier"===d.callee.type&&c.push(d.callee.name.toLowerCase());return!0});return c}
const E={all:{min:2,max:2},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,
max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},
now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},
decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},
exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,
max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},
length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,
max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}},p={functionDefinitions:new Map,constantDefinitions:new Map},x={functionDefinitions:new Map,constantDefinitions:new Map};for(var z of["pi","infinity"])x.constantDefinitions.set(z,{type:"constant"}),p.constantDefinitions.set(z,{type:"constant"});x.constantDefinitions.set("textformatting",
{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});p.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",
type:"constant"},{key:"newline",type:"constant"}]});for(const n in E)z=E[n],x.functionDefinitions.set(n,{overloads:[{type:"function",parametersInfo:{min:z.min,max:z.max}}]}),p.functionDefinitions.set(n,{overloads:[{type:"function",parametersInfo:{min:z.min,max:z.max}}]});const l="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem".split(" "),m="disjoint intersects touches crosses within contains overlaps equals relate intersection nearestvertex nearestcoordinate union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart".split(" ");
t.addFunctionDeclaration=function(n,c){c="sync"===c?p:x;c.functionDefinitions.has(n.name.toLowerCase())?c.functionDefinitions.get(n.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:n.min,max:n.max}}):c.functionDefinitions.set(n.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:n.min,max:n.max}}]})};t.extractFunctionDeclaration=function(n,c){const d=[];if(void 0!==c.params&&null!==c.params)for(let k=0;k<c.params.length;k++)d.push("any");return{name:n,return:"any",
params:d}};t.findExpectedFieldLiterals=function(n){const c=[];w(n,d=>{if("CallExpression"===d.type){if("Identifier"===d.callee.type&&"expects"===d.callee.name.toLowerCase()){var k="";for(let y=0;y<(d.arguments||[]).length;y++)0===y?"Identifier"===d.arguments[y].type&&(k=d.arguments[y].name.toLowerCase()):k&&"Literal"===d.arguments[y].type&&K(d.arguments[y].value)&&c.push(k+"."+d.arguments[y].value.toLowerCase());return!1}if("Identifier"===d.callee.type&&["domainname","domaincode","domain","haskey"].includes(d.callee.name.toLowerCase())&&
2<=d.arguments.length)return k="","Identifier"===d.arguments[0].type&&(k=d.arguments[0].name.toLowerCase()),k&&"Literal"===d.arguments[1].type&&K(d.arguments[1].value)&&c.push(k+"."+d.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==d.type||"Identifier"!==d.object.type)return!0;!1===d.computed&&d.object&&d.object.name&&d.property&&"Identifier"===d.property.type&&d.property.name?c.push(d.object.name.toLowerCase()+"."+d.property.name.toLowerCase()):d.object&&d.object.name&&d.property&&"Literal"===
d.property.type&&"string"===typeof d.property.value&&c.push(d.object.name.toLowerCase()+"."+d.property.value?.toString().toLowerCase());return!1});return c};t.findFieldLiterals=function(n){const c=[];w(n,d=>{if("MemberExpression"!==d.type||"Identifier"!==d.object.type)return!0;!1===d.computed&&d.object&&d.object.name&&d.property&&"Identifier"===d.property.type&&d.property.name?c.push(d.object.name.toLowerCase()+"."+d.property.name.toLowerCase()):d.object&&d.object.name&&d.property&&"Literal"===d.property.type&&
"string"===typeof d.property.value&&c.push(d.object.name.toLowerCase()+"."+d.property.value?.toString().toLowerCase());return!1});return c};t.findFunctionCalls=C;t.findModuleImports=a;t.findScriptDependencies=function(n,c=[]){let d=null;if(void 0===n.usesFeatureSet){null===d&&(d=C(n));n.usesFeatureSet=!1;for(let k=0;k<d.length;k++)l.includes(d[k])&&(n.usesFeatureSet=!0,n.isAsync=!0);if(!1===n.usesFeatureSet&&c&&0<c.length)for(const k of c)if(f(n,k)){n.usesFeatureSet=!0;n.isAsync=!0;break}}void 0===
n.usesModules&&(n.usesModules=!1,0<a(n).length&&(n.usesModules=!0));if(void 0===n.usesGeometry)for(n.usesGeometry=!1,null===d&&(d=C(n)),c=0;c<d.length;c++)m.includes(d[c])&&(n.usesGeometry=!0)};t.fullArcadeApiAsync=x;t.fullArcadeApiSync=p;t.referencesFunction=function(n,c){let d=!1;const k=c.toLowerCase();w(n,y=>d?!1:"CallExpression"===y.type&&"Identifier"===y.callee.type&&y.callee.name&&y.callee.name.toLowerCase()===k?(d=!0,!1):!0);return d};t.referencesMember=f;t.scriptUsesFeatureSet=function(n){n=
C(n);for(let c=0;c<n.length;c++)if(l.includes(n[c]))return!0;return!1};t.walk=w;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/array":function(){define("exports ../arcade/deepClone ../arcade/executionError ../arcade/ImmutableArray ./languageUtils ../core/promiseUtils".split(" "),function(t,K,B,w,f,a){function C(p){function x(c,d,k){if(c instanceof w)return c.toArray();if(f.isArray(c))return c;throw new B.ArcadeExecutionError(d,B.ExecutionErrorCodes.InvalidParameter,k);
}function z(c,d){var k=c.length,y=Math.floor(k/2);if(0===k)return[];if(1===k)return[c[0]];var u=z(c.slice(0,y),d);c=z(c.slice(y,k),d);for(k=[];0<u.length||0<c.length;)0<u.length&&0<c.length?(y=d(u[0],c[0]),isNaN(y)&&(y=0),0>=y?(k.push(u[0]),u=u.slice(1)):(k.push(c[0]),c=c.slice(1))):0<u.length?(k.push(u[0]),u=u.slice(1)):0<c.length&&(k.push(c[0]),c=c.slice(1));return k}async function l(c,d){const k=c.length,y=Math.floor(k/2);if(0===k)return[];if(1===k)return[c[0]];c=[await l(c.slice(0,y),d),await l(c.slice(y,
k),d)];return m(c[0],c[1],d,[])}async function m(c,d,k,y){if(0<c.length||0<d.length){if(0<c.length&&0<d.length){let u=await k(c[0],d[0]);isNaN(u)&&(u=1);0>=u?(y.push(c[0]),c=c.slice(1)):(y.push(d[0]),d=d.slice(1));return m(c,d,k,y)}if(0<c.length)return y.push(c[0]),c=c.slice(1),m(c,d,k,y);if(0<d.length)return y.push(d[0]),d=d.slice(1),m(c,d,k,y)}else return y}function n(c,d,k,y){f.pcCheck(k,1,2,c,d);let u=k[0];f.isImmutableArray(u)&&(u=u.toArray());if(!1===f.isArray(u))throw new B.ArcadeExecutionError(c,
B.ExecutionErrorCodes.InvalidParameter,d);if(1<k.length){if(!1===f.isFunctionParameter(k[1]))throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);var D=u;const h=k[1].createFunction(c);return y?l(D,h):D=z(D,(g,v)=>h(g,v))}c=u;if(0===c.length)return[];k={};for(y=0;y<c.length;y++)d=f.getType(c[y]),""!==d&&(k[d]=!0);if(!0===k.Array||!0===k.Dictionary||!0===k.Feature||!0===k.Point||!0===k.Polygon||!0===k.Polyline||!0===k.Multipoint||!0===k.Extent||!0===k.Function)return c.slice(0);
y=0;d="";for(D in k)y++,d=D;return c=1<y||"String"===d?z(c,(h,g)=>{if(null===h||void 0===h||h===f.voidOperation)return null===g||void 0===g||g===f.voidOperation?0:1;if(null===g||void 0===g||g===f.voidOperation)return-1;h=f.toString(h);g=f.toString(g);return h<g?-1:h===g?0:1}):"Number"===d?z(c,(h,g)=>h-g):"Boolean"===d?z(c,(h,g)=>h===g?0:g?-1:1):"Date"===d?z(c,(h,g)=>g-h):c.slice(0)}p.functions.array=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,0,2,c,d);if(0===u.length||1===u.length&&
null===u[0])return[];if(f.isArray(u[0])){if(2===u.length&&!1===f.isBoolean(u[1]))throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);return!0===f.defaultUndefined(u[1],!1)?K.deepClone(u[0]):u[0].slice(0)}if(f.isImmutableArray(u[0])){if(2===u.length&&!1===f.isBoolean(u[1]))throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);return!0===f.defaultUndefined(u[1],!1)?K.deepClone(u[0]):u[0].toArray().slice(0)}k=f.toNumber(u[0]);if(isNaN(k)||!1===f.isInteger(k))throw new B.ArcadeExecutionError(c,
B.ExecutionErrorCodes.InvalidParameter,d);u=f.defaultUndefined(u[1],null);k=Array(k);k.fill(u);return k})};p.functions.front=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,1,1,c,d);if(f.isImmutableArray(u[0])){if(0>=u[0].length())throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.OutOfBounds,d);return u[0].get(0)}if(f.isArray(u[0])){if(0>=u[0].length)throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.OutOfBounds,d);return u[0][0]}throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,
d);})};p.functions.back=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,1,1,c,d);if(f.isImmutableArray(u[0])){if(0>=u[0].length())throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.OutOfBounds,d);return u[0].get(u[0].length()-1)}if(f.isArray(u[0])){if(0>=u[0].length)throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.OutOfBounds,d);return u[0][u[0].length-1]}throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);})};p.functions.push=function(c,d){return p.standardFunction(c,
d,(k,y,u)=>{f.pcCheck(u,1,2,c,d);if(f.isArray(u[0]))return u[0][u[0].length]=u[1],u[0].length;throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);})};p.functions.pop=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,1,1,c,d);if(f.isArray(u[0])){if(0>=u[0].length)throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.OutOfBounds,d);k=u[0][u[0].length-1];--u[0].length;return k}throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);})};
p.functions.erase=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,2,2,c,d);if(f.isArray(u[0])){k=f.toNumber(u[1]);if(isNaN(k)||!1===f.isInteger(k))throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);u=u[0];if(0>=u.length)throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.OutOfBounds,d);0>k&&(k=u.length+k);if(0>k)throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.OutOfBounds,d);if(k>=u.length)throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.OutOfBounds,
d);u.splice(k,1);return f.voidOperation}throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);})};p.functions.insert=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,3,3,c,d);if(f.isArray(u[0])){k=f.toNumber(u[1]);if(isNaN(k)||!1===f.isInteger(k))throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);y=u[2];u=u[0];if(k>u.length)throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.OutOfBounds,d);if(0>k&&k<-1*u.length)throw new B.ArcadeExecutionError(c,
B.ExecutionErrorCodes.OutOfBounds,d);if(k===u.length)return u[k]=y,f.voidOperation;u.splice(k,0,y);return f.voidOperation}throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);})};p.functions.resize=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,2,3,c,d);if(f.isArray(u[0])){y=f.toNumber(u[1]);if(isNaN(y)||!1===f.isInteger(y))throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);if(0>y)throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,
d);k=f.defaultUndefined(u[2],null);u=u[0];if(u.length>=y)return u.length=y,f.voidOperation;const D=u.length;u.length=y;for(y=D;y<u.length;y++)u[y]=k;return f.voidOperation}throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);})};p.functions.includes=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,2,2,c,d);if(f.isArray(u[0])){const D=u[1];return-1<u[0].findIndex(h=>f.equalityTest(h,D))?!0:!1}if(f.isImmutableArray(u[0])){const D=u[1];return-1<u[0].toArray().findIndex(h=>
f.equalityTest(h,D))?!0:!1}throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);})};p.functions.slice=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,1,3,c,d);if(f.isArray(u[0])){k=f.toNumber(f.defaultUndefined(u[1],0));y=f.toNumber(f.defaultUndefined(u[2],u[0].length));if(isNaN(k)||!1===f.isInteger(k))throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);if(isNaN(y)||!1===f.isInteger(y))throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,
d);return u[0].slice(k,y)}if(f.isImmutableArray(u[0])){k=u[0];y=f.toNumber(f.defaultUndefined(u[1],0));u=f.toNumber(f.defaultUndefined(u[2],k.length()));if(isNaN(y)||!1===f.isInteger(y))throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);if(isNaN(u)||!1===f.isInteger(u))throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);return k.toArray().slice(y,u)}throw new B.ArcadeExecutionError(c,B.ExecutionErrorCodes.InvalidParameter,d);})};p.functions.splice=
function(c,d){return p.standardFunction(c,d,(k,y,u)=>{k=[];for(y=0;y<u.length;y++)f.isArray(u[y])?k.push(...u[y]):f.isImmutableArray(u[y])?k.push(...u[y].toArray()):k.push(u[y]);return k})};p.functions.top=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,2,2,c,d);if(f.isArray(u[0]))return f.toNumber(u[1])>=u[0].length?u[0].slice(0):u[0].slice(0,f.toNumber(u[1]));if(f.isImmutableArray(u[0]))return f.toNumber(u[1])>=u[0].length()?u[0].slice(0):u[0].slice(0,f.toNumber(u[1]));throw new B.ArcadeExecutionError(c,
B.ExecutionErrorCodes.InvalidParameter,d);})};p.functions.first=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,1,1,c,d);return f.isArray(u[0])?0===u[0].length?null:u[0][0]:f.isImmutableArray(u[0])?0===u[0].length()?null:u[0].get(0):null})};"sync"===p.mode&&(p.functions.sort=function(c,d){return p.standardFunction(c,d,(k,y,u)=>n(c,d,u,!1))},p.functions.any=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,2,2,c,d);k=u[1].createFunction(c);u=x(u[0],c,d);for(const D of u)if(u=
k(D),f.isBoolean(u)&&!0===u)return!0;return!1})},p.functions.all=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,2,2,c,d);k=u[1].createFunction(c);u=x(u[0],c,d);for(const D of u)if(!0!==k(D))return!1;return!0})},p.functions.none=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,2,2,c,d);k=u[1].createFunction(c);u=x(u[0],c,d);for(const D of u)if(!0===k(D))return!1;return!0})},p.functions.reduce=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,2,3,
c,d);const D=u[1].createFunction(c);k=x(u[0],c,d);return 2===u.length?0===k.length?null:k.reduce((h,g)=>{h=D(h,g);return h=void 0!==h&&h!==f.voidOperation?h:null}):k.reduce((h,g)=>{h=D(h,g);return h=void 0!==h&&h!==f.voidOperation?h:null},u[2])})},p.functions.map=function(c,d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,2,2,c,d);k=u[1].createFunction(c);y=x(u[0],c,d);u=[];for(const D of y)y=k(D),void 0!==y&&y!==f.voidOperation?u.push(y):u.push(null);return u})},p.functions.filter=function(c,
d){return p.standardFunction(c,d,(k,y,u)=>{f.pcCheck(u,2,2,c,d);k=u[1].createFunction(c);u=x(u[0],c,d);y=[];for(const D of u)!0===k(D)&&y.push(D);return y})});"async"===p.mode&&(p.functions.sort=function(c,d){return p.standardFunctionAsync(c,d,(k,y,u)=>n(c,d,u,!0))},p.functions.any=function(c,d){return p.standardFunctionAsync(c,d,async(k,y,u)=>{f.pcCheck(u,2,2,c,d);k=u[1].createFunction(c);u=x(u[0],c,d);for(const D of u)if(u=await k(D),y=null,y=a.isPromiseLike(y)?await u:u,f.isBoolean(y)&&!0===y)return!0;
return!1})},p.functions.all=function(c,d){return p.standardFunctionAsync(c,d,async(k,y,u)=>{f.pcCheck(u,2,2,c,d);k=u[1].createFunction(c);u=x(u[0],c,d);for(const D of u)if(u=await k(D),y=null,y=a.isPromiseLike(y)?await u:u,!0!==y)return!1;return!0})},p.functions.none=function(c,d){return p.standardFunctionAsync(c,d,async(k,y,u)=>{f.pcCheck(u,2,2,c,d);k=u[1].createFunction(c);u=x(u[0],c,d);for(const D of u)if(u=await k(D),y=null,y=a.isPromiseLike(y)?await u:u,!0===y)return!1;return!0})},p.functions.filter=
function(c,d){return p.standardFunctionAsync(c,d,async(k,y,u)=>{f.pcCheck(u,2,2,c,d);k=u[1].createFunction(c);y=x(u[0],c,d);u=[];for(const D of y){y=await k(D);let h=null;h=a.isPromiseLike(h)?await y:y;!0===h&&u.push(D)}return u})},p.functions.reduce=function(c,d){return p.standardFunctionAsync(c,d,(k,y,u)=>{f.pcCheck(u,2,3,c,d);const D=u[1].createFunction(c);k=x(u[0],c,d);y=null;if(2<u.length)u=f.defaultUndefined(u[2],null),y=k.reduce(async(h,g)=>{h=await h;if(void 0===h||h===f.voidOperation)h=null;
return D(h,g)},Promise.resolve(u));else{if(0===k.length)return null;y=k.reduce(async(h,g,v)=>{if(1>=v)return D(h,g);h=await h;if(void 0===h||h===f.voidOperation)h=null;return D(h,g)})}return y.then(h=>void 0!==h&&h!==f.voidOperation?h:null)})},p.functions.map=function(c,d){return p.standardFunctionAsync(c,d,async(k,y,u)=>{f.pcCheck(u,2,2,c,d);k=u[1].createFunction(c);y=x(u[0],c,d);u=[];for(const D of y){y=await k(D);let h=null;h=a.isPromiseLike(h)?await y:y;void 0!==h&&h!==f.voidOperation?u.push(h):
u.push(null)}return u})})}const E=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:C},Symbol.toStringTag,{value:"Module"}));t.ArrayFunctions=E;t.registerFunctions=C})},"esri/arcade/functions/date":function(){define("exports ../ArcadeDate ../../chunks/languageUtils ../executionError ../../intl/locale ../../chunks/datetime".split(" "),function(t,K,B,w,f,a){function C(z){return null===z?z:!1===z.isValid?null:z}function E(z,l){return""===z||"default"===z.toLowerCase().trim()?B.defaultTimeZone(l):
z}const p=[0,31,59,90,120,151,181,212,243,273,304,334],x=[0,31,60,91,121,152,182,213,244,274,305,335];t.registerFunctions=function(z,l){z.today=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,0,0,m,n);c=new Date;c.setHours(0,0,0,0);return K.ArcadeDate.dateJSAndZoneToArcadeDate(c,B.defaultTimeZone(m))})};z.changetimezone=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,2,2,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));if(null===c)return null;k=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(c,E(B.toString(k[1]),
m));return!1===k.isValid?null:k})};z.timezone=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,2,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));if(null===c)return null;c=c.timeZone;return"system"===c?K.ArcadeDate.systemTimeZoneCanonicalName:c})};z.timezoneoffset=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?null:c.timeZoneOffset})};z.now=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,0,0,m,n);c=K.ArcadeDate.nowToArcadeDate(B.defaultTimeZone(m));
return!1===c.isValid?null:c})};z.timestamp=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,0,0,m,n);c=K.ArcadeDate.nowUTCToArcadeDate();return!1===c.isValid?null:c})};z.toutc=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?null:c.toUTC()})};z.tolocal=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?null:c.toLocal()})};z.day=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,
1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.day})};z.month=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.monthJS})};z.year=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.year})};z.hour=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.hour})};z.second=function(m,n){return l(m,
n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.second})};z.millisecond=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.millisecond})};z.minute=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.minute})};z.week=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,2,m,n);d=B.toDate(k[0],B.defaultTimeZone(m));if(null===d)return NaN;
k=B.toNumber(B.defaultUndefined(k[1],0));if(0>k||6<k)throw new w.ArcadeExecutionError(m,w.ExecutionErrorCodes.InvalidParameter,n);c=d.dayOfWeekJS;var y=d.year;d=d.day+(0!==y%4||0===y%100&&0!==y%400?p:x)[d.monthJS]-1;y=Math.floor(d/7);return c-k+(0>c-k?7:0)<d-7*y?y+1:y})};z.weekday=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.dayOfWeekJS})};z.isoweekday=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],
B.defaultTimeZone(m));return null===c?NaN:c.dayOfWeekISO})};z.isomonth=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.monthISO})};z.isoweek=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.weekISO})};z.isoyear=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,1,1,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));return null===c?NaN:c.yearISO})};z.date=function(m,n){return l(m,
n,(c,d,k)=>{B.pcCheck(k,0,8,m,n);if(3===k.length)return C(K.ArcadeDate.fromParts(B.toNumber(k[0]),B.toNumber(k[1])+1,B.toNumber(k[2]),0,0,0,0,B.defaultTimeZone(m)));if(4===k.length)return C(K.ArcadeDate.fromParts(B.toNumber(k[0]),B.toNumber(k[1])+1,B.toNumber(k[2]),B.toNumber(k[3]),0,0,0,B.defaultTimeZone(m)));if(5===k.length)return C(K.ArcadeDate.fromParts(B.toNumber(k[0]),B.toNumber(k[1])+1,B.toNumber(k[2]),B.toNumber(k[3]),B.toNumber(k[4]),0,0,B.defaultTimeZone(m)));if(6===k.length)return C(K.ArcadeDate.fromParts(B.toNumber(k[0]),
B.toNumber(k[1])+1,B.toNumber(k[2]),B.toNumber(k[3]),B.toNumber(k[4]),B.toNumber(k[5]),0,B.defaultTimeZone(m)));if(7===k.length)return C(K.ArcadeDate.fromParts(B.toNumber(k[0]),B.toNumber(k[1])+1,B.toNumber(k[2]),B.toNumber(k[3]),B.toNumber(k[4]),B.toNumber(k[5]),B.toNumber(k[6]),B.defaultTimeZone(m)));if(8===k.length)return C(K.ArcadeDate.fromParts(B.toNumber(k[0]),B.toNumber(k[1])+1,B.toNumber(k[2]),B.toNumber(k[3]),B.toNumber(k[4]),B.toNumber(k[5]),B.toNumber(k[6]),E(B.toString(k[7]),m)));if(2===
k.length){c=B.toString(k[1]);if(""===c)return null;c=B.standardiseDateFormat(c);k="X"===c?a.DateTime.fromSeconds(B.toNumber(k[0])):"x"===c?a.DateTime.fromMillis(B.toNumber(k[0])):a.DateTime.fromFormat(B.toString(k[0]),c,{locale:f.getLocale(),numberingSystem:"latn"});return k.isValid?K.ArcadeDate.dateTimeToArcadeDate(k):null}if(1===k.length){if(B.isString(k[0])){if(""===k[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(k[0]))return B.toDate(k[0]+
"-01-01",B.defaultTimeZone(m))}c=B.toNumber(k[0]);return!1===isNaN(c)?(k=a.DateTime.fromMillis(c),k.isValid?K.ArcadeDate.dateTimeAndZoneToArcadeDate(k,B.defaultTimeZone(m)):null):B.toDate(k[0],B.defaultTimeZone(m))}return 0===k.length?K.ArcadeDate.nowToArcadeDate(B.defaultTimeZone(m)):null})};z.datediff=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,2,4,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));d=B.toDate(k[1],B.defaultTimeZone(m));if(null===c||null===d)return NaN;let y=B.defaultUndefined(k[3],
"");""!==y&&null!==y?(y=B.toString(y),c=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(c,y),d=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(d,y)):c.timeZone!==d.timeZone&&(c.isUnknownTimeZone?c=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(c,d.timeZone):d=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(d,c.timeZone));switch(B.toString(k[2]).toLowerCase()){case "days":case "day":case "d":return c.diff(d,"days");case "months":case "month":return c.diff(d,"months");case "minutes":case "minute":case "m":return"M"===
k[2]?c.diff(d,"months"):c.diff(d,"minutes");case "seconds":case "second":case "s":return c.diff(d,"seconds");case "milliseconds":case "millisecond":case "ms":return c.diff(d);case "hours":case "hour":case "h":return c.diff(d,"hours");case "years":case "year":case "y":return c.diff(d,"years");default:return c.diff(d)}})};z.dateadd=function(m,n){return l(m,n,(c,d,k)=>{B.pcCheck(k,2,3,m,n);c=B.toDate(k[0],B.defaultTimeZone(m));if(null===c)return null;d=B.toNumber(k[1]);if(isNaN(d))return c;let y="milliseconds";
switch(B.toString(k[2]).toLowerCase()){case "days":case "day":case "d":y="days";d=B.absRound(d);break;case "months":case "month":y="months";d=B.absRound(d);break;case "minutes":case "minute":case "m":y="M"===k[2]?"months":"minutes";break;case "seconds":case "second":case "s":y="seconds";break;case "milliseconds":case "millisecond":case "ms":y="milliseconds";break;case "hours":case "hour":case "h":y="hours";break;case "years":case "year":case "y":y="years"}return c.plus({[y]:d})})}};Object.defineProperty(t,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geometry":function(){define("exports ../Dictionary ../Feature ../ImmutablePointArray ../../chunks/languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../executionError ../ImmutablePathArray ../../geometry/support/coordsUtils".split(" "),function(t,K,B,w,f,a,C,E,p,x,z,l,m,n,c,d){function k(D){return D&&
"esri.arcade.Feature"===D.arcadeDeclaredClass}function y(D,h,g,v,r=1){h=h.toLowerCase();switch(h){case "hasz":return D=D.hasZ,void 0===D?!1:D;case "hasm":return D=D.hasM,void 0===D?!1:D;case "spatialreference":return h=D.spatialReference._arcadeCacheId,void 0===h&&(g=!0,Object.freeze&&Object.isFrozen(D.spatialReference)&&(g=!1),g&&(u++,h=D.spatialReference._arcadeCacheId=u)),D=new K({wkt:D.spatialReference.wkt,wkid:D.spatialReference.wkid}),void 0!==h&&(D._arcadeCacheId="SPREF"+h.toString()),D}switch(D.type){case "extent":switch(h){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return D=
D[h],void 0!==D?D:null;case "type":return"Extent"}break;case "polygon":switch(h){case "rings":return h=D.cache._arcadeCacheId,void 0===h&&(u++,h=u,D.cache._arcadeCacheId=h),new c(D.rings,D.spatialReference,!0===D.hasZ,!0===D.hasM,h);case "type":return"Polygon"}break;case "point":switch(h){case "x":case "y":case "z":case "m":return void 0!==D[h]?D[h]:null;case "type":return"Point"}break;case "polyline":switch(h){case "paths":return h=D.cache._arcadeCacheId,void 0===h&&(u++,h=u,D.cache._arcadeCacheId=
h),new c(D.paths,D.spatialReference,!0===D.hasZ,!0===D.hasM,h);case "type":return"Polyline"}break;case "multipoint":switch(h){case "points":return h=D.cache._arcadeCacheId,void 0===h&&(u++,h=u,D.cache._arcadeCacheId=h),new w(D.points,D.spatialReference,!0===D.hasZ,!0===D.hasM,h,1);case "type":return"Multipoint"}}if(1===r)throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidIdentifier,v);return 2===r?{keystate:"notfound"}:null}let u=0;t.geometryMember=y;t.registerFunctions=function(D,h){D.ringisclockwise=
function(g,v){return h(g,v,(r,N,b)=>{f.pcCheck(b,1,1,g,v);r=[];let U=N=!1;if(null===b[0])return!1;if(f.isArray(b[0])){for(const ba of b[0])if(ba instanceof p)r.push(ba.hasZ?ba.hasM?[ba.x,ba.y,ba.z,ba.m]:[ba.x,ba.y,ba.z]:[ba.x,ba.y]);else throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);0<r.length&&(N=b[0][0].hasZ,U=b[0][0].hasM)}else if(b[0]instanceof w)r=b[0]._elements,0<r.length&&(N=b[0]._hasZ,U=b[0]._hasM);else if(f.isImmutableArray(b[0])){for(const ba of b[0].toArray())if(ba instanceof
p)r.push(ba.hasZ?ba.hasM?[ba.x,ba.y,ba.z,ba.m]:[ba.x,ba.y,ba.z]:[ba.x,ba.y]);else throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);0<r.length&&(N=b[0].get(0).hasZ,U=b[0].get(0).hasM)}else throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);return 3>r.length?!1:d.isClockwise(r,U,N)})};D.polygon=function(g,v){return h(g,v,(r,N,b)=>{f.pcCheck(b,1,1,g,v);r=null;if(b[0]instanceof K){if(r=f.fixSpatialReference(B.parseGeometryFromDictionary(b[0]),g.spatialReference),
!1===r instanceof x)throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);}else r=b[0]instanceof x?m.fromJSON(b[0].toJSON()):f.fixSpatialReference(new x(JSON.parse(b[0])),g.spatialReference);if(null!==r&&!1===r.spatialReference.equals(g.spatialReference))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.WrongSpatialReference,v);return f.fixNullGeometry(r)})};D.polyline=function(g,v){return h(g,v,(r,N,b)=>{f.pcCheck(b,1,1,g,v);r=null;if(b[0]instanceof K){if(r=f.fixSpatialReference(B.parseGeometryFromDictionary(b[0]),
g.spatialReference),!1===r instanceof z)throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);}else r=b[0]instanceof z?m.fromJSON(b[0].toJSON()):f.fixSpatialReference(new z(JSON.parse(b[0])),g.spatialReference);if(null!==r&&!1===r.spatialReference.equals(g.spatialReference))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.WrongSpatialReference,v);return f.fixNullGeometry(r)})};D.point=function(g,v){return h(g,v,(r,N,b)=>{f.pcCheck(b,1,1,g,v);r=null;if(b[0]instanceof
K){if(r=f.fixSpatialReference(B.parseGeometryFromDictionary(b[0]),g.spatialReference),!1===r instanceof p)throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);}else r=b[0]instanceof p?m.fromJSON(b[0].toJSON()):f.fixSpatialReference(new p(JSON.parse(b[0])),g.spatialReference);if(null!==r&&!1===r.spatialReference.equals(g.spatialReference))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.WrongSpatialReference,v);return f.fixNullGeometry(r)})};D.multipoint=function(g,
v){return h(g,v,(r,N,b)=>{f.pcCheck(b,1,1,g,v);r=null;if(b[0]instanceof K){if(r=f.fixSpatialReference(B.parseGeometryFromDictionary(b[0]),g.spatialReference),!1===r instanceof E)throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);}else r=b[0]instanceof E?m.fromJSON(b[0].toJSON()):f.fixSpatialReference(new E(JSON.parse(b[0])),g.spatialReference);if(null!==r&&!1===r.spatialReference.equals(g.spatialReference))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.WrongSpatialReference,
v);return f.fixNullGeometry(r)})};D.extent=function(g,v){return h(g,v,(r,N,b)=>{b=f.autoCastFeatureToGeometry(b);f.pcCheck(b,1,1,g,v);r=null;b[0]instanceof K?r=f.fixSpatialReference(B.parseGeometryFromDictionary(b[0]),g.spatialReference):b[0]instanceof p?(r={xmin:b[0].x,ymin:b[0].y,xmax:b[0].x,ymax:b[0].y,spatialReference:b[0].spatialReference.toJSON()},b=b[0],b.hasZ?(r.zmin=b.z,r.zmax=b.z):b.hasM&&(r.mmin=b.m,r.mmax=b.m),r=m.fromJSON(r)):r=b[0]instanceof x?m.fromJSON(b[0].extent?.toJSON()):b[0]instanceof
z?m.fromJSON(b[0].extent?.toJSON()):b[0]instanceof E?m.fromJSON(b[0].extent?.toJSON()):b[0]instanceof a?m.fromJSON(b[0].toJSON()):f.fixSpatialReference(new a(JSON.parse(b[0])),g.spatialReference);if(null!==r&&!1===r.spatialReference.equals(g.spatialReference))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.WrongSpatialReference,v);return f.fixNullGeometry(r)})};D.geometry=function(g,v){return h(g,v,(r,N,b)=>{f.pcCheck(b,1,1,g,v);r=null;if(null===b[0])return null;r=k(b[0])?f.fixSpatialReference(b[0].geometry(),
g.spatialReference):b[0]instanceof K?f.fixSpatialReference(B.parseGeometryFromDictionary(b[0]),g.spatialReference):f.fixSpatialReference(m.fromJSON(JSON.parse(b[0])),g.spatialReference);if(null!==r&&!1===r.spatialReference.equals(g.spatialReference))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.WrongSpatialReference,v);return f.fixNullGeometry(r)})};D.setgeometry=function(g,v){return h(g,v,(r,N,b)=>{f.pcCheck(b,2,2,g,v);if(k(b[0])){if(!0===b[0].immutable)throw new n.ArcadeExecutionError(g,
n.ExecutionErrorCodes.Immutable,v);if(b[1]instanceof C||null===b[1])b[0]._geometry=b[1];else throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);}else throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);return f.voidOperation})};D.feature=function(g,v){return h(g,v,(r,N,b)=>{if(0===b.length)throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.WrongNumberOfParameters,v);r=null;if(1===b.length)if(f.isString(b[0]))r=B.fromJson(JSON.parse(b[0]),g.timeReference);
else if(k(b[0]))r=B.createFromArcadeFeature(b[0]);else if(b[0]instanceof C)r=B.createFromGraphicLikeObject(b[0],null,null,g.timeReference);else if(b[0]instanceof K)r=b[0].hasField("geometry")?b[0].field("geometry"):null,b=b[0].hasField("attributes")?b[0].field("attributes"):null,null!==r&&r instanceof K&&(r=B.parseGeometryFromDictionary(r)),null!==b&&(b=B.parseAttributesFromDictionary(b)),r=B.createFromGraphicLikeObject(r,b,null,g.timeReference);else throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,
v);else if(2===b.length){N=r=null;if(null!==b[0])if(b[0]instanceof C)r=b[0];else if(r instanceof K)r=B.parseGeometryFromDictionary(b[0]);else throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);if(null!==b[1])if(b[1]instanceof K)N=B.parseAttributesFromDictionary(b[1]);else throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);r=B.createFromGraphicLikeObject(r,N,null,g.timeReference)}else{r=null;N={};if(null!==b[0])if(b[0]instanceof C)r=b[0];else if(r instanceof
K)r=B.parseGeometryFromDictionary(b[0]);else throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);for(let U=1;U<b.length;U+=2){const ba=f.toString(b[U]),Y=b[U+1];if(null===Y||void 0===Y||f.isString(Y)||isNaN(Y)||f.isDate(Y)||f.isNumber(Y)||f.isBoolean(Y)){if(f.isFunctionParameter(Y)||!1===f.isSimpleType(Y))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);N[ba]=Y===f.voidOperation?null:Y}else throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,
v);}r=B.createFromGraphicLikeObject(r,N,null,g.timeReference)}r._geometry=f.fixSpatialReference(r.geometry(),g.spatialReference);r.immutable=!1;return r})};D.dictionary=function(g,v){return h(g,v,(r,N,b)=>{if(0===b.length||1===b.length&&null===b[0])return b=new K,b.immutable=!1,b;if(1===b.length&&f.isString(b[0]))try{var U=JSON.parse(b[0]),ba=K.convertObjectToArcadeDictionary(U,f.defaultTimeZone(g),!1);ba.immutable=!1;return ba}catch(Y){throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,
v);}if(1===b.length&&b[0]instanceof C)try{const Y=b[0].toJSON();Y.hasZ=!0===b[0].hasZ;Y.hasM=!0===b[0].hasM;const ia=K.convertObjectToArcadeDictionary(Y,f.defaultTimeZone(g),!1);ia.immutable=!1;return ia}catch(Y){throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);}if(1===b.length&&f.isFeature(b[0]))try{const Y=new K;Y.immutable=!1;Y.setField("geometry",b[0].geometry());const ia=new K;ia.immutable=!1;Y.setField("attributes",ia);for(const pa of b[0].keys())ia.setField(pa,b[0].field(pa));
return Y}catch(Y){throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);}if(1===b.length&&b[0]instanceof K)try{const Y=new K;Y.immutable=!1;for(const ia of b[0].keys())Y.setField(ia,b[0].field(ia));return Y}catch(Y){throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);}if(2===b.length&&b[0]instanceof K&&f.isBoolean(b[1]))try{if(!0!==b[1]){const Y=new K;Y.immutable=!1;for(const ia of b[0].keys())Y.setField(ia,b[0].field(ia));return Y}return b[0].deepClone()}catch(Y){throw new n.ArcadeExecutionError(g,
n.ExecutionErrorCodes.InvalidParameter,v);}if(0!==b.length%2)throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.WrongNumberOfParameters,v);r={};for(N=0;N<b.length;N+=2)if(U=f.toString(b[N]),ba=b[N+1],null===ba||void 0===ba||f.isString(ba)||isNaN(ba)||f.isDate(ba)||f.isNumber(ba)||f.isBoolean(ba)||f.isArray(ba)||f.isImmutableArray(ba)){if(f.isFunctionParameter(ba))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);r[U]=ba===f.voidOperation?null:ba}else throw new n.ArcadeExecutionError(g,
n.ExecutionErrorCodes.InvalidParameter,v);b=new K(r);b.immutable=!1;return b})};D.haskey=function(g,v){return h(g,v,(r,N,b)=>{f.pcCheck(b,2,2,g,v);r=f.toString(b[1]);if(k(b[0])||b[0]instanceof K)return b[0].hasField(r);if(b[0]instanceof C)return(b=y(b[0],r,null,null,2))&&"notfound"===b.keystate?!1:!0;throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);})};D.hasvalue=function(g,v){return h(g,v,(r,N,b)=>{f.pcCheck(b,2,2,g,v);if(null===b[0]||null===b[1])return!1;r=f.toString(b[1]);
return f.isFeature(b[0])||b[0]instanceof K?b[0].hasField(r)&&null!==b[0].field(r)?!0:!1:b[0]instanceof C?null===y(b[0],r,null,null,0)?!1:!0:!1})};D.indexof=function(g,v){return h(g,v,(r,N,b)=>{f.pcCheck(b,2,2,g,v);r=b[1];if(f.isArray(b[0])){for(N=0;N<b[0].length;N++)if(f.equalityTest(r,b[0][N]))return N;return-1}if(f.isImmutableArray(b[0])){N=b[0].length();for(let U=0;U<N;U++)if(f.equalityTest(r,b[0].get(U)))return U;return-1}throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,
v);})};D.angle=function(g,v){return h(g,v,(r,N,b)=>{b=f.autoCastFeatureToGeometry(b);f.pcCheck(b,2,3,g,v);if(!(b[0]instanceof p))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);if(!(b[1]instanceof p))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);if(2<b.length&&!(b[2]instanceof p))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);return 2===b.length?l.angle2D(b[0],b[1]):l.angleBetween2D(b[0],b[1],b[2])})};D.bearing=
function(g,v){return h(g,v,(r,N,b)=>{b=f.autoCastFeatureToGeometry(b);f.pcCheck(b,2,3,g,v);if(!(b[0]instanceof p))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);if(!(b[1]instanceof p))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);if(2<b.length&&!(b[2]instanceof p))throw new n.ArcadeExecutionError(g,n.ExecutionErrorCodes.InvalidParameter,v);return 2===b.length?l.bearing2D(b[0],b[1]):l.bearingBetween2D(b[0],b[1],b[2])})};D.isselfintersecting=
function(g,v){return h(g,v,(r,N,b)=>{b=f.autoCastFeatureToGeometry(b);f.pcCheck(b,1,1,g,v);r=b[0];if(r instanceof x)return r.isSelfIntersecting;if(r instanceof z)return r=r.paths,l.pathsSelfIntersecting(r);if(r instanceof E)for(N=r.points,b=0;b<N.length;b++)for(let U=0;U<N.length;U++)if(U!==b){let ba=!0;for(let Y=0;Y<N[b].length;Y++)if(N[b][Y]!==N[U][Y]){ba=!1;break}if(!0===ba)return!0}return f.isArray(r)||f.isImmutableArray(r)?(r=f.autoCastArrayOfPointsToPolyline(r,g.spatialReference),null!==r&&
(r=r.paths),l.pathsSelfIntersecting(r)):!1})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/centroid":function(){define(["exports","../../geometry/Point","../../geometry/support/intersectsBase"],function(t,K,B){function w(l,m,n){const c={x:0,y:0};m&&(c.z=0);n&&(c.m=0);let d=0;var k=l[0];for(let g=0;g<l.length;g++){const v=l[g];a:if(v.length!==k.length)var y=!1;else{for(y=0;y<v.length;y++)if(v[y]!==k[y]){y=!1;break a}y=!0}if(!1===y){y=f(k,v,m);var u=v,D=m,
h=n;const r={x:(k[0]+u[0])/2,y:(k[1]+u[1])/2};D&&(r.z=(k[2]+u[2])/2);D&&h?r.m=(k[3]+u[3])/2:h&&(r.m=(k[2]+u[2])/2);k=r;k.x*=y;k.y*=y;c.x+=k.x;c.y+=k.y;m&&(k.z*=y,c.z+=k.z);n&&(k.m*=y,c.m+=k.m);d+=y;k=v}}0<d?(c.x/=d,c.y/=d,m&&(c.z/=d),n&&(c.m/=d)):(c.x=l[0][0],c.y=l[0][1],m&&(c.z=l[0][2]),n&&m?c.m=l[0][3]:n&&(c.m=l[0][2]));return c}function f(l,m,n){const c=m[0]-l[0];l=m[1]-l[1];return n?(m=m[2]-m[2],Math.sqrt(c*c+l*l+m*m)):Math.sqrt(c*c+l*l)}function a(l,m,n=0){for(;l<n;)l+=m;for(n+=m;l>=n;)l-=m;
return l}function C(l,m){return Math.atan2(m.y-l.y,m.x-l.x)}function E(l,m,n){var c=l.x-m.x;l=l.y-m.y;var d=n.x-m.x;m=n.y-m.y;return Math.atan2(c*m-d*l,c*d+l*m)}const p=[];for(const l of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const m=l[0];for(let n=1;n<l.length;n++)p[l[n]]=m}const x=[];x[9002]=.3048;x[9003]=.3048006096012192;x[9095]=.3048007491;const z=[0,0];t.angle2D=function(l,m){return a(C(l,m),2*Math.PI)*(180/Math.PI)};t.angleBetween2D=function(l,
m,n){return a(E(l,m,n),2*Math.PI)*(180/Math.PI)};t.angleBetweenRad=E;t.angleRad=C;t.bearing2D=function(l,m){return a(Math.PI/2-C(l,m),2*Math.PI)*(180/Math.PI)};t.bearingBetween2D=function(l,m,n){return a(-1*E(l,m,n),2*Math.PI)*(180/Math.PI)};t.centroidMultiPoint=function(l){if(0===l.points.length)return null;var m=0;let n=0,c=0,d=0;for(let k=0;k<l.points.length;k++){const y=l.getPoint(k);!0===y.hasZ&&(c+=y.z);!0===y.hasM&&(d+=y.m);m+=y.x;n+=y.y;d+=y.m}m={x:m/l.points.length,y:n/l.points.length,spatialReference:null};
m.spatialReference=l.spatialReference.toJSON();!0===l.hasZ&&(m.z=c/l.points.length);!0===l.hasM&&(m.m=d/l.points.length);return new K(m)};t.centroidPolyline=function(l){const m={x:0,y:0,spatialReference:l.spatialReference.toJSON()},n={x:0,y:0,spatialReference:l.spatialReference.toJSON()};let c=0,d=0;for(let u=0;u<l.paths.length;u++)if(0!==l.paths[u].length){a:{var k=l.paths[u];var y=!0===l.hasZ;if(1>=k.length){k=0;break a}let D=0;for(let h=1;h<k.length;h++)D+=f(k[h-1],k[h],y);k=D}0===k?(k=w(l.paths[u],
!0===l.hasZ,!0===l.hasM),m.x+=k.x,m.y+=k.y,!0===l.hasZ&&(m.z+=k.z),!0===l.hasM&&(m.m+=k.m),++c):(y=w(l.paths[u],!0===l.hasZ,!0===l.hasM),n.x+=y.x*k,n.y+=y.y*k,!0===l.hasZ&&(n.z+=y.z*k),!0===l.hasM&&(n.m+=y.m*k),d+=k)}return 0<d?(n.x/=d,n.y/=d,!0===l.hasZ&&(n.z/=d),!0===l.hasM&&(n.m/=d),new K(n)):0<c?(m.x/=c,m.y/=c,!0===l.hasZ&&(n.z/=c),!0===l.hasM&&(m.m/=c),new K(m)):null};t.getMetersPerVerticalUnitForSR=function(l){return l.vcsWkid&&void 0!==p[l.vcsWkid]?x[p[l.vcsWkid]]:l.latestVcsWkid&&void 0!==
p[l.latestVcsWkid]?x[p[l.latestVcsWkid]]:1};t.pathsSelfIntersecting=function(l){for(let D=0;D<l.length;D++){const h=l[D];for(var m=0;m<h.length-1;m++){var n=h[m],c=h[m+1];for(var d=D+1;d<l.length;d++)for(var k=0;k<l[d].length-1;k++){var y=l[d][k],u=l[d][k+1];if(B.segmentIntersects(n,c,y,u,z)&&!(z[0]===n[0]&&z[1]===n[1]||z[0]===y[0]&&z[1]===y[1]||z[0]===c[0]&&z[1]===c[1]||z[0]===u[0]&&z[1]===u[1]))return!0}}m=h.length;if(!(3>m))for(n=0;n<=m-2;n++)for(c=h[n],d=h[n+1],k=n+2;k<=m-2;k++)if(y=h[k],u=h[k+
1],B.segmentIntersects(c,d,y,u,z)&&!(z[0]===c[0]&&z[1]===c[1]||z[0]===y[0]&&z[1]===y[1]||z[0]===d[0]&&z[1]===d[1]||z[0]===u[0]&&z[1]===u[1]))return!0}return!1};t.segmentLength3d=function(l,m,n){return Math.sqrt((l[0]-m[0])**2+(l[1]-m[1])**2+(void 0!==l[2]&&void 0!==m[2]?(l[2]*n-m[2]*n)**2:0))};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geomsync":function(){define("exports ../../kernel ../kernel ../../chunks/languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils ../executionError ../Dictionary ../../core/unitUtils".split(" "),
function(t,K,B,w,f,a,C,E,p,x,z,l,m,n,c){function d(u){return 0===K.version.indexOf("4.")?x.fromExtent(u):new x({spatialReference:u.spatialReference,rings:[[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]]]})}function k(u,D){if("polygon"!==u.type&&"polyline"!==u.type&&"extent"!==u.type)return 0;var h=1;if(u.spatialReference.vcsWkid||u.spatialReference.latestVcsWkid){h=f.getMetersPerVerticalUnitForSR(u.spatialReference);var g=c.getMetersPerUnitForSR(u.spatialReference);
h/=g}g=0;if("polyline"===u.type)for(var v of u.paths)for(var r=1;r<v.length;r++)g+=f.segmentLength3d(v[r],v[r-1],h);else if("polygon"===u.type)for(r of u.rings){for(v=1;v<r.length;v++)g+=f.segmentLength3d(r[v],r[v-1],h);if(r[0][0]!==r[r.length-1][0]||r[0][1]!==r[r.length-1][1]||void 0!==r[0][2]&&r[0][2]!==r[r.length-1][2])g+=f.segmentLength3d(r[0],r[r.length-1],h)}else"extent"===u.type&&(g+=2*f.segmentLength3d([u.xmin,u.ymin,0],[u.xmax,u.ymin,0],h),g+=2*f.segmentLength3d([u.xmin,u.ymin,0],[u.xmin,
u.ymax,0],h),g=2*g+4*Math.abs(w.defaultUndefined(u.zmax,0)*h-w.defaultUndefined(u.zmin,0)*h));u=new z({hasZ:!1,hasM:!1,spatialReference:u.spatialReference,paths:[[0,0],[0,g]]});return y.planarLength(u,D)}let y=null;t.registerFunctions=function(u,D){function h(g,v,r){w.pcCheck(r,2,2,g,v);if(!(r[0]instanceof C&&r[1]instanceof C||r[0]instanceof C&&null===r[1]||r[1]instanceof C&&null===r[0]||null===r[0]&&null===r[1]))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);}u.disjoint=
function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);h(g,v,b);return null===b[0]||null===b[1]?!0:y.disjoint(b[0],b[1])})};u.intersects=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);h(g,v,b);return null===b[0]||null===b[1]?!1:y.intersects(b[0],b[1])})};u.touches=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);h(g,v,b);return null===b[0]||null===b[1]?!1:y.touches(b[0],b[1])})};u.crosses=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);
h(g,v,b);return null===b[0]||null===b[1]?!1:y.crosses(b[0],b[1])})};u.within=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);h(g,v,b);return null===b[0]||null===b[1]?!1:y.within(b[0],b[1])})};u.contains=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);h(g,v,b);return null===b[0]||null===b[1]?!1:y.contains(b[0],b[1])})};u.overlaps=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);h(g,v,b);return null===b[0]||null===b[1]?!1:y.overlaps(b[0],
b[1])})};u.equals=function(g,v){return D(g,v,(r,N,b)=>{w.pcCheck(b,2,2,g,v);return b[0]===b[1]?!0:b[0]instanceof C&&b[1]instanceof C?y.equals(b[0],b[1]):w.isDate(b[0])&&w.isDate(b[1])?b[0].equals(b[1]):!1})};u.relate=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,3,3,g,v);if(b[0]instanceof C&&b[1]instanceof C)return y.relate(b[0],b[1],w.toString(b[2]));if(b[0]instanceof C&&null===b[1]||b[1]instanceof C&&null===b[0]||null===b[0]&&null===b[1])return!1;throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,v);})};u.intersection=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);h(g,v,b);return null===b[0]||null===b[1]?null:y.intersect(b[0],b[1])})};u.union=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);r=[];if(0===b.length)throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.WrongNumberOfParameters,v);if(1===b.length)if(w.isArray(b[0]))for(b=w.autoCastFeatureToGeometry(b[0]),N=0;N<b.length;N++){if(null!==b[N]){if(!(b[N]instanceof
C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);r.push(b[N])}}else if(w.isImmutableArray(b[0]))for(b=w.autoCastFeatureToGeometry(b[0].toArray()),N=0;N<b.length;N++){if(null!==b[N]){if(!(b[N]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);r.push(b[N])}}else{if(b[0]instanceof C)return w.fixSpatialReference(B.cloneGeometry(b[0]),g.spatialReference);if(null===b[0])return null;throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,
v);}else for(N=0;N<b.length;N++)if(null!==b[N]){if(!(b[N]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);r.push(b[N])}return 0===r.length?null:y.union(r)})};u.difference=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);h(g,v,b);return null!==b[0]&&null===b[1]?B.cloneGeometry(b[0]):null===b[0]?null:y.difference(b[0],b[1])})};u.symmetricdifference=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);h(g,v,b);return null===
b[0]&&null===b[1]?null:null===b[0]?B.cloneGeometry(b[1]):null===b[1]?B.cloneGeometry(b[0]):y.symmetricDifference(b[0],b[1])})};u.clip=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,2,g,v);if(!(b[1]instanceof a)&&null!==b[1])throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);if(null===b[0])return null;if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return null===b[1]?null:y.clip(b[0],
b[1])})};u.cut=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,2,g,v);if(!(b[1]instanceof z)&&null!==b[1])throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);if(null===b[0])return[];if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return null===b[1]?[B.cloneGeometry(b[0])]:y.cut(b[0],b[1])})};u.area=function(g,v){return D(g,v,(r,N,b)=>{w.pcCheck(b,1,2,g,v);b=w.autoCastFeatureToGeometry(b);
if(null===b[0])return 0;if(w.isArray(b[0])||w.isImmutableArray(b[0]))return r=w.autoCastArrayOfPointsToPolygon(b[0],g.spatialReference),null===r?0:y.planarArea(r,B.convertSquareUnitsToCode(w.defaultUndefined(b[1],-1)));if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return y.planarArea(b[0],B.convertSquareUnitsToCode(w.defaultUndefined(b[1],-1)))})};u.areageodetic=function(g,v){return D(g,v,(r,N,b)=>{w.pcCheck(b,1,2,g,v);b=w.autoCastFeatureToGeometry(b);
if(null===b[0])return 0;if(w.isArray(b[0])||w.isImmutableArray(b[0]))return r=w.autoCastArrayOfPointsToPolygon(b[0],g.spatialReference),null===r?0:y.geodesicArea(r,B.convertSquareUnitsToCode(w.defaultUndefined(b[1],-1)));if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return y.geodesicArea(b[0],B.convertSquareUnitsToCode(w.defaultUndefined(b[1],-1)))})};u.length=function(g,v){return D(g,v,(r,N,b)=>{w.pcCheck(b,1,2,g,v);b=w.autoCastFeatureToGeometry(b);
if(null===b[0])return 0;if(w.isArray(b[0])||w.isImmutableArray(b[0]))return r=w.autoCastArrayOfPointsToPolyline(b[0],g.spatialReference),null===r?0:y.planarLength(r,B.convertLinearUnitsToCode(w.defaultUndefined(b[1],-1)));if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return y.planarLength(b[0],B.convertLinearUnitsToCode(w.defaultUndefined(b[1],-1)))})};u.length3d=function(g,v){return D(g,v,(r,N,b)=>{w.pcCheck(b,1,2,g,v);b=w.autoCastFeatureToGeometry(b);
if(null===b[0])return 0;if(w.isArray(b[0])||w.isImmutableArray(b[0]))return r=w.autoCastArrayOfPointsToPolyline(b[0],g.spatialReference),null===r?0:!0===r.hasZ?k(r,B.convertLinearUnitsToCode(w.defaultUndefined(b[1],-1))):y.planarLength(r,B.convertLinearUnitsToCode(w.defaultUndefined(b[1],-1)));if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return!0===b[0].hasZ?k(b[0],B.convertLinearUnitsToCode(w.defaultUndefined(b[1],-1))):y.planarLength(b[0],B.convertLinearUnitsToCode(w.defaultUndefined(b[1],
-1)))})};u.lengthgeodetic=function(g,v){return D(g,v,(r,N,b)=>{w.pcCheck(b,1,2,g,v);b=w.autoCastFeatureToGeometry(b);if(null===b[0])return 0;if(w.isArray(b[0])||w.isImmutableArray(b[0]))return r=w.autoCastArrayOfPointsToPolyline(b[0],g.spatialReference),null===r?0:y.geodesicLength(r,B.convertLinearUnitsToCode(w.defaultUndefined(b[1],-1)));if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return y.geodesicLength(b[0],B.convertLinearUnitsToCode(w.defaultUndefined(b[1],
-1)))})};u.distance=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,3,g,v);r=b[0];if(w.isArray(b[0])||w.isImmutableArray(b[0]))r=w.autoCastArrayOfPointsToMultiPoint(b[0],g.spatialReference);N=b[1];if(w.isArray(b[1])||w.isImmutableArray(b[1]))N=w.autoCastArrayOfPointsToMultiPoint(b[1],g.spatialReference);if(!(r instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);if(!(N instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,
v);return y.distance(r,N,B.convertLinearUnitsToCode(w.defaultUndefined(b[2],-1)))})};u.distancegeodetic=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,3,g,v);r=b[0];N=b[1];if(!(r instanceof p))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);if(!(N instanceof p))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);const U=new z({paths:[],spatialReference:r.spatialReference});U.addPath([r,N]);return y.geodesicLength(U,
B.convertLinearUnitsToCode(w.defaultUndefined(b[2],-1)))})};u.densify=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,3,g,v);if(null===b[0])return null;if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);r=w.toNumber(b[1]);if(isNaN(r))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);if(0>=r)throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return b[0]instanceof
x||b[0]instanceof z?y.densify(b[0],r,B.convertLinearUnitsToCode(w.defaultUndefined(b[2],-1))):b[0]instanceof a?y.densify(d(b[0]),r,B.convertLinearUnitsToCode(w.defaultUndefined(b[2],-1))):b[0]})};u.densifygeodetic=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,3,g,v);if(null===b[0])return null;if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);r=w.toNumber(b[1]);if(isNaN(r))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,
v);if(0>=r)throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return b[0]instanceof x||b[0]instanceof z?y.geodesicDensify(b[0],r,B.convertLinearUnitsToCode(w.defaultUndefined(b[2],-1))):b[0]instanceof a?y.geodesicDensify(d(b[0]),r,B.convertLinearUnitsToCode(w.defaultUndefined(b[2],-1))):b[0]})};u.generalize=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,4,g,v);if(null===b[0])return null;if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,v);r=w.toNumber(b[1]);if(isNaN(r))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return y.generalize(b[0],r,w.toBoolean(w.defaultUndefined(b[2],!0)),B.convertLinearUnitsToCode(w.defaultUndefined(b[3],-1)))})};u.buffer=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,3,g,v);if(null===b[0])return null;if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,
v);r=w.toNumber(b[1]);if(isNaN(r))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return 0===r?B.cloneGeometry(b[0]):y.buffer(b[0],r,B.convertLinearUnitsToCode(w.defaultUndefined(b[2],-1)))})};u.buffergeodetic=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,3,g,v);if(null===b[0])return null;if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);r=w.toNumber(b[1]);if(isNaN(r))throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,v);return 0===r?B.cloneGeometry(b[0]):y.geodesicBuffer(b[0],r,B.convertLinearUnitsToCode(w.defaultUndefined(b[2],-1)))})};u.offset=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,6,g,v);if(null===b[0])return null;if(!(b[0]instanceof x||b[0]instanceof z))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);r=w.toNumber(b[1]);if(isNaN(r))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,
v);N=w.toNumber(w.defaultUndefined(b[4],10));if(isNaN(N))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);const U=w.toNumber(w.defaultUndefined(b[5],0));if(isNaN(U))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return y.offset(b[0],r,B.convertLinearUnitsToCode(w.defaultUndefined(b[2],-1)),w.toString(w.defaultUndefined(b[3],"round")).toLowerCase(),N,U)})};u.rotate=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,
2,3,g,v);r=b[0];if(null===r)return null;if(!(r instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);r instanceof a&&(r=x.fromExtent(r));N=w.toNumber(b[1]);if(isNaN(N))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);b=w.defaultUndefined(b[2],null);if(null===b)return y.rotate(r,N);if(b instanceof p)return y.rotate(r,N,b);throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);})};u.centroid=function(g,v){return D(g,
v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,1,1,g,v);if(null===b[0])return null;r=b[0];if(w.isArray(b[0])||w.isImmutableArray(b[0]))r=w.autoCastArrayOfPointsToMultiPoint(b[0],g.spatialReference);if(null===r)return null;if(!(r instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return r instanceof p?w.fixSpatialReference(B.cloneGeometry(b[0]),g.spatialReference):r instanceof x?r.centroid:r instanceof z?f.centroidPolyline(r):r instanceof E?f.centroidMultiPoint(r):
r instanceof a?r.center:null})};u.multiparttosinglepart=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,1,1,g,v);N=[];if(null===b[0])return null;if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);if(b[0]instanceof p||b[0]instanceof a)return[w.fixSpatialReference(B.cloneGeometry(b[0]),g.spatialReference)];r=y.simplify(b[0]);if(r instanceof x){b=[];N=[];for(var U=0;U<r.rings.length;U++)if(r.isClockwise(r.rings[U])){const ba=
l.fromJSON({rings:[r.rings[U]],hasZ:!0===r.hasZ,hasM:!0===r.hasM,spatialReference:r.spatialReference.toJSON()});b.push(ba)}else N.push({ring:r.rings[U],pt:r.getPoint(U,0)});for(r=0;r<N.length;r++)for(U=0;U<b.length;U++)if(b[U].contains(N[r].pt)){b[U].addRing(N[r].ring);break}return b}if(r instanceof z){b=[];for(N=0;N<r.paths.length;N++)U=l.fromJSON({paths:[r.paths[N]],hasZ:!0===r.hasZ,hasM:!0===r.hasM,spatialReference:r.spatialReference.toJSON()}),b.push(U);return b}if(b[0]instanceof E){r=w.fixSpatialReference(B.cloneGeometry(b[0]),
g.spatialReference);for(b=0;b<r.points.length;b++)N.push(r.getPoint(b));return N}return null})};u.issimple=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,1,1,g,v);if(null===b[0])return!0;if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return y.isSimple(b[0])})};u.simplify=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,1,1,g,v);if(null===b[0])return null;if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,v);return y.simplify(b[0])})};u.convexhull=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,1,1,g,v);if(null===b[0])return null;if(!(b[0]instanceof C))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);return y.convexHull(b[0])})};u.nearestcoordinate=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,2,g,v);if(!(b[0]instanceof C||null===b[0]))throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,v);if(!(b[1]instanceof p||null===b[1]))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);if(null===b[0]||null===b[1])return null;r=y.nearestCoordinate(b[0],b[1]);return null===r||r.isEmpty?null:n.convertObjectToArcadeDictionary({coordinate:r.coordinate,distance:r.distance},w.defaultTimeZone(g),!1,!0)})};u.nearestvertex=function(g,v){return D(g,v,(r,N,b)=>{b=w.autoCastFeatureToGeometry(b);w.pcCheck(b,2,2,g,v);if(!(b[0]instanceof C||
null===b[0]))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);if(!(b[1]instanceof p||null===b[1]))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,v);if(null===b[0]||null===b[1])return null;r=y.nearestVertex(b[0],b[1]);return null===r||r.isEmpty?null:n.convertObjectToArcadeDictionary({coordinate:r.coordinate,distance:r.distance},w.defaultTimeZone(g),!1,!0)})}};t.setGeometryEngine=function(u){y=u};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(t,K){t.cloneGeometry=function(B){if(null==B)return null;const w=B.clone();void 0!==B.cache._geVersion&&(w.cache._geVersion=B.cache._geVersion);return w};t.convertLinearUnitsToCode=function(B){if(null==B)return null;if("number"===typeof B)return B;B=B.toLowerCase();B=B.replaceAll(/\s/g,"");B=B.replaceAll("-","");switch(B){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};t.convertSquareUnitsToCode=function(B){if(null==B)return null;if("number"===typeof B)return B;B=B.toLowerCase();
B=B.replaceAll(/\s/g,"");B=B.replaceAll("-","");switch(B){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;
case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};t.sameGeomType=function(B,w){return B===w||"point"===B&&"esriGeometryPoint"===w||"polyline"===B&&"esriGeometryPolyline"===w||"polygon"===B&&"esriGeometryPolygon"===w||"extent"===B&&"esriGeometryEnvelope"===w||"multipoint"===B&&"esriGeometryMultipoint"===w||"point"===w&&"esriGeometryPoint"===
B||"polyline"===w&&"esriGeometryPolyline"===B||"polygon"===w&&"esriGeometryPolygon"===B||"extent"===w&&"esriGeometryEnvelope"===B||"multipoint"===w&&"esriGeometryMultipoint"===B?!0:!1};t.shapeExtent=function(B){if(null==B)return null;switch(B.type){case "polygon":case "multipoint":case "polyline":return B.extent;case "point":return new K({xmin:B.x,ymin:B.y,xmax:B.x,ymax:B.y,spatialReference:B.spatialReference});case "extent":return B}return null};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/functions/maths":function(){define(["exports","../../chunks/languageUtils","../../core/number"],function(t,K,B){function w(f,a,C){if(void 0===C||0===+C)return Math[f](a);a=+a;C=+C;if(isNaN(a)||"number"!==typeof C||0!==C%1)return NaN;a=a.toString().split("e");a=Math[f](+(a[0]+"e"+(a[1]?+a[1]-C:-C)));a=a.toString().split("e");return+(a[0]+"e"+(a[1]?+a[1]+C:C))}t.registerFunctions=function(f,a){function C(E,p,x){E=K.toNumber(E);return isNaN(E)?E:isNaN(p)||isNaN(x)||p>x?NaN:E<p?p:E>x?x:E}
f.number=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,2,E,p);x=l[0];return K.isNumber(x)?x:null===x?0:K.isDate(x)?x.toNumber():K.isBoolean(x)?Number(x):K.isArray(x)?NaN:""===x||void 0===x?Number(x):K.isString(x)?void 0!==l[1]?(l=K.multiReplace(l[1],"\u2030",""),l=K.multiReplace(l,"\u00a4",""),B.parse(x,{pattern:l})):Number(x.trim()):Number(x)})};f.abs=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return Math.abs(K.toNumber(l[0]))})};f.acos=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,
1,1,E,p);return Math.acos(K.toNumber(l[0]))})};f.asin=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return Math.asin(K.toNumber(l[0]))})};f.atan=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return Math.atan(K.toNumber(l[0]))})};f.atan2=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,2,2,E,p);return Math.atan2(K.toNumber(l[0]),K.toNumber(l[1]))})};f.ceil=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,2,E,p);return 2===l.length?(x=K.toNumber(l[1]),isNaN(x)&&(x=0),w("ceil",
K.toNumber(l[0]),-1*x)):Math.ceil(K.toNumber(l[0]))})};f.round=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,2,E,p);return 2===l.length?(x=K.toNumber(l[1]),isNaN(x)&&(x=0),w("round",K.toNumber(l[0]),-1*x)):Math.round(K.toNumber(l[0]))})};f.floor=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,2,E,p);return 2===l.length?(x=K.toNumber(l[1]),isNaN(x)&&(x=0),w("floor",K.toNumber(l[0]),-1*x)):Math.floor(K.toNumber(l[0]))})};f.cos=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return Math.cos(K.toNumber(l[0]))})};
f.isnan=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return"number"===typeof l[0]&&isNaN(l[0])})};f.exp=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return Math.exp(K.toNumber(l[0]))})};f.log=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return Math.log(K.toNumber(l[0]))})};f.pow=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,2,2,E,p);return K.toNumber(l[0])**K.toNumber(l[1])})};f.random=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,0,0,E,p);return Math.random()})};
f.sin=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return Math.sin(K.toNumber(l[0]))})};f.sqrt=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return Math.sqrt(K.toNumber(l[0]))})};f.tan=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return Math.tan(K.toNumber(l[0]))})};f.defaultvalue=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,2,2,E,p);return null===l[0]||""===l[0]||void 0===l[0]?l[1]:l[0]})};f.isempty=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,
p);return null===l[0]||""===l[0]||void 0===l[0]?!0:!1})};f["boolean"]=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,1,1,E,p);return K.toBoolean(l[0])})};f.constrain=function(E,p){return a(E,p,(x,z,l)=>{K.pcCheck(l,3,3,E,p);x=K.toNumber(l[1]);z=K.toNumber(l[2]);if(K.isArray(l[0])){var m=[];for(var n of l[0])m.push(C(n,x,z));return m}if(K.isImmutableArray(l[0])){n=[];for(m=0;m<l[0].length();m++)n.push(C(l[0].get(m),x,z));return n}return C(l[0],x,z)})}};Object.defineProperty(t,Symbol.toStringTag,
{value:"Module"})})},"esri/arcade/functions/stats":function(){define(["exports","../executionError","../../chunks/languageUtils","./fieldStats"],function(t,K,B,w){function f(a,C,E,p){if(1===p.length){if(B.isArray(p[0]))return w.calculateStat(a,p[0],-1);if(B.isImmutableArray(p[0]))return w.calculateStat(a,p[0].toArray(),-1)}return w.calculateStat(a,p,-1)}t.registerFunctions=function(a,C){a.stdev=function(E,p){return C(E,p,(x,z,l)=>f("stdev",x,z,l))};a.variance=function(E,p){return C(E,p,(x,z,l)=>f("variance",
x,z,l))};a.average=function(E,p){return C(E,p,(x,z,l)=>f("mean",x,z,l))};a.mean=function(E,p){return C(E,p,(x,z,l)=>f("mean",x,z,l))};a.sum=function(E,p){return C(E,p,(x,z,l)=>f("sum",x,z,l))};a.min=function(E,p){return C(E,p,(x,z,l)=>f("min",x,z,l))};a.max=function(E,p){return C(E,p,(x,z,l)=>f("max",x,z,l))};a.distinct=function(E,p){return C(E,p,(x,z,l)=>f("distinct",x,z,l))};a.count=function(E,p){return C(E,p,(x,z,l)=>{B.pcCheck(l,1,1,E,p);if(B.isArray(l[0])||B.isString(l[0]))return l[0].length;
if(B.isImmutableArray(l[0]))return l[0].length();throw new K.ArcadeExecutionError(E,K.ExecutionErrorCodes.InvalidParameter,p);})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/fieldStats":function(){define(["exports","../../chunks/languageUtils"],function(t,K){function B(f){let a=0;for(let C=0;C<f.length;C++)a+=f[C];return a/f.length}function w(f){const a=B(f);let C=0;for(let E=0;E<f.length;E++)C+=(a-f[E])**2;return C/f.length}t.calculateStat=function(f,a,
C=1E3){switch(f.toLowerCase()){case "distinct":a:{f=[];const E={},p=[];for(let x=0;x<a.length;x++){if(void 0!==a[x]&&null!==a[x]&&a[x]!==K.voidOperation){const z=a[x];if(K.isNumber(z)||K.isString(z))void 0===E[z]&&(f.push(z),E[z]=1);else{let l=!1;for(let m=0;m<p.length;m++)!0===K.equalityTest(p[m],z)&&(l=!0);!1===l&&(p.push(z),f.push(z))}}if(f.length>=C&&-1!==C){a=f;break a}}a=f}return a;case "avg":case "mean":return B(K.toNumberArray(a));case "min":return Math.min.apply(Math,K.toNumberArray(a));
case "sum":a=K.toNumberArray(a);C=0;for(f=0;f<a.length;f++)C+=a[f];return C;case "max":return Math.max.apply(Math,K.toNumberArray(a));case "stdev":case "stddev":return Math.sqrt(w(K.toNumberArray(a)));case "var":case "variance":return w(K.toNumberArray(a));case "count":return a.length}return 0};t.decodeStatType=function(f){switch(f.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";
case "var":case "variance":return"var";case "count":return"count"}return""};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/string":function(){define("exports ../ArcadePortal ../Attachment ../Dictionary ../executionError ../../chunks/languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/SpatialReference ../../core/urlUtils ../../portal/Portal".split(" "),
function(t,K,B,w,f,a,C,E,p,x,z,l,m,n,c,d,k){function y(D,h){if(!D||!h)return D===h;if(D.x===h.x&&D.y===h.y){if(D.hasZ){if(D.z!==h.z)return!1}else if(h.hasZ)return!1;if(D.hasM){if(D.m!==h.m)return!1}else if(h.hasM)return!1;return!0}return!1}function u(D,h,g){if(null===D)h.updateUint8Array([0,139]);else if(a.isArray(D)){h.updateUint8Array([61]);if(g.map.has(D))D=g.map.get(D),h.updateIntArray([D^61237541]);else{g.map.set(D,g.currentLength++);for(var v of D)u(v,h,g);g.map.delete(D);g.currentLength--}h.updateUint8Array([199])}else if(a.isImmutableArray(D)){h.updateUint8Array([61]);
if(g.map.has(D))D=g.map.get(D),h.updateIntArray([D^61237541]);else{g.map.set(D,g.currentLength++);for(var r of D.toArray())u(r,h,g);g.map.delete(D);g.currentLength--}h.updateUint8Array([199])}else if(a.isDate(D))h.updateIntArray([D.toNumber()]),h.updateUint8Array([241]);else if(a.isString(D))h.updateIntArray([D.length]),h.updateWithString(D),h.updateUint8Array([41]);else if(a.isBoolean(D))h.updateUint8Array([!0===D?1:0,113]);else if(a.isNumber(D))h.updateFloatArray([D]),h.updateUint8Array([173]);
else{if(D instanceof B)throw new f.ArcadeExecutionError(g.context,f.ExecutionErrorCodes.UnsupportedHashType,g.node);if(D instanceof K)throw new f.ArcadeExecutionError(g.context,f.ExecutionErrorCodes.UnsupportedHashType,g.node);if(D instanceof w){h.updateUint8Array([223]);if(g.map.has(D))D=g.map.get(D),h.updateIntArray([D^61237541]);else{g.map.set(D,g.currentLength++);for(var N of D.keys())h.updateIntArray([N.length]),h.updateWithString(N),h.updateUint8Array([251]),v=D.field(N),u(v,h,g),h.updateUint8Array([239]);
g.map.delete(D);g.currentLength--}h.updateUint8Array([73])}else{if(a.isFeature(D))throw new f.ArcadeExecutionError(g.context,f.ExecutionErrorCodes.UnsupportedHashType,g.node);if(D instanceof l)h.updateIntArray([3833836621]),h.updateIntArray([0]),h.updateFloatArray([D.x]),h.updateIntArray([1]),h.updateFloatArray([D.y]),D.hasZ&&(h.updateIntArray([2]),h.updateFloatArray([D.z])),D.hasM&&(h.updateIntArray([3]),h.updateFloatArray([D.m])),h.updateIntArray([3765347959]),u(D.spatialReference.wkid,h,g);else if(D instanceof
m){h.updateIntArray([1266616829]);for(N=0;N<D.rings.length;N++){r=D.rings[N];v=[];var b=null;let U=null;for(let ba=0;ba<r.length;ba++){const Y=D.getPoint(N,ba);if(0===ba)b=Y;else if(y(U,Y))continue;U=Y;ba===r.length-1&&y(b,Y)||v.push(Y)}h.updateIntArray([1397116793,v.length]);for(r=0;r<v.length;r++)b=v[r],h.updateIntArray([3962308117,r]),u(b,h,g),h.updateIntArray([2716288009]);h.updateIntArray([2278822459])}h.updateIntArray([3878477243]);u(D.spatialReference.wkid,h,g)}else if(D instanceof n){h.updateIntArray([4106883559]);
for(N=0;N<D.paths.length;N++){v=D.paths[N];h.updateIntArray([1397116793,v.length]);for(r=0;r<v.length;r++)h.updateIntArray([3962308117,r]),u(D.getPoint(N,r),h,g),h.updateIntArray([2716288009]);h.updateIntArray([2278822459])}h.updateIntArray([2568784753]);u(D.spatialReference.wkid,h,g)}else if(D instanceof z){h.updateIntArray([588535921,D.points.length]);for(N=0;N<D.points.length;N++)v=D.getPoint(N),h.updateIntArray([N]),u(v,h,g);h.updateIntArray([1700171621]);u(D.spatialReference.wkid,h,g)}else if(D instanceof
x)h.updateIntArray([3483648373]),h.updateIntArray([0]),h.updateFloatArray([D.xmax]),h.updateIntArray([1]),h.updateFloatArray([D.xmin]),h.updateIntArray([2]),h.updateFloatArray([D.ymax]),h.updateIntArray([3]),h.updateFloatArray([D.ymin]),D.hasZ&&(h.updateIntArray([4]),h.updateFloatArray([D.zmax]),h.updateIntArray([5]),h.updateFloatArray([D.zmin])),D.hasM&&(h.updateIntArray([6]),h.updateFloatArray([D.mmax]),h.updateIntArray([7]),h.updateFloatArray([D.mmin])),h.updateIntArray([3622027469]),u(D.spatialReference.wkid,
h,g);else if(D instanceof c)h.updateIntArray([14]),void 0!==D.wkid&&null!==D.wkid&&h.updateIntArray([D.wkid]),D.wkt&&h.updateWithString(D.wkt);else{if(a.isFunctionParameter(D))throw new f.ArcadeExecutionError(g.context,f.ExecutionErrorCodes.UnsupportedHashType,g.node);if(a.isFeatureSet(D))throw new f.ArcadeExecutionError(g.context,f.ExecutionErrorCodes.UnsupportedHashType,g.node);a.isFeatureSetCollection(D);throw new f.ArcadeExecutionError(g.context,f.ExecutionErrorCodes.UnsupportedHashType,g.node);
}}}}t.registerFunctions=function(D,h){D.portal=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);return new K(a.toString(b[0]))})};D.typeof=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);r=a.getType(b[0]);if("Unrecognised Type"===r)throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.UnrecognisedType,v);return r})};D.trim=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);return a.toString(b[0]).trim()})};D.tohex=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,
v);r=a.toNumber(b[0]);return isNaN(r)?r:r.toString(16)})};D.upper=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);return a.toString(b[0]).toUpperCase()})};D.proper=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,2,g,v);r=1;2===b.length&&"firstword"===a.toString(b[1]).toLowerCase()&&(r=2);N=/\s/;b=a.toString(b[0]);let U="",ba=!0;for(let Y=0;Y<b.length;Y++){let ia=b[Y];N.test(ia)?1===r&&(ba=!0):ia.toUpperCase()!==ia.toLowerCase()&&(ba?(ia=ia.toUpperCase(),ba=!1):ia=ia.toLowerCase());U+=
ia}return U})};D.lower=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);return a.toString(b[0]).toLowerCase()})};D.guid=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,0,1,g,v);if(0<b.length)switch(a.toString(b[0]).toLowerCase()){case "digits":return a.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return a.generateUUID();case "digits-hyphen-parentheses":return"("+a.generateUUID()+")"}return"{"+a.generateUUID()+"}"})};D.standardizeguid=
function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,2,2,g,v);r=a.toString(b[0]);if(""===r||null===r)return"";r=/^(\{|\()?(?<partA>[0-9a-z]{8})(\-?)(?<partB>[0-9a-z]{4})(\-?)(?<partC>[0-9a-z]{4})(\-?)(?<partD>[0-9a-z]{4})(\-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(r);if(!r)return"";r=r.groups;r=r.partA+"-"+r.partB+"-"+r.partC+"-"+r.partD+"-"+r.partE;switch(a.toString(b[1]).toLowerCase()){case "digits":return r.replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return r;
case "digits-hyphen-parentheses":return"("+r+")"}return"{"+r+"}"})};D.console=function(g,v){return h(g,v,(r,N,b)=>{0!==b.length&&(1===b.length?g.console(a.toString(b[0])):g.console(a.toString(b)));return a.voidOperation})};D.mid=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,2,3,g,v);r=a.toNumber(b[1]);if(isNaN(r))return"";0>r&&(r=0);if(2===b.length)return a.toString(b[0]).substr(r);N=a.toNumber(b[2]);if(isNaN(N))return"";0>N&&(N=0);return a.toString(b[0]).substr(r,N)})};D.find=function(g,v){return h(g,
v,(r,N,b)=>{a.pcCheck(b,2,3,g,v);r=0;if(2<b.length){r=a.toNumber(a.defaultUndefined(b[2],0));if(isNaN(r))return-1;0>r&&(r=0)}return a.toString(b[1]).indexOf(a.toString(b[0]),r)})};D.left=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,2,2,g,v);r=a.toNumber(b[1]);if(isNaN(r))return"";0>r&&(r=0);return a.toString(b[0]).substr(0,r)})};D.right=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,2,2,g,v);r=a.toNumber(b[1]);if(isNaN(r))return"";0>r&&(r=0);return a.toString(b[0]).substr(-1*r,r)})};D.split=
function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,2,4,g,v);r=a.toNumber(a.defaultUndefined(b[2],-1));N=a.toBoolean(a.defaultUndefined(b[3],!1));-1===r||null===r||!0===N?b=a.toString(b[0]).split(a.toString(b[1])):(isNaN(r)&&(r=-1),-1>r&&(r=-1),b=a.toString(b[0]).split(a.toString(b[1]),r));if(!1===N)return b;N=[];for(let U=0;U<b.length&&!(-1!==r&&N.length>=r);U++)""!==b[U]&&void 0!==b[U]&&N.push(b[U]);return N})};D.text=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,2,g,v);return a.toStringExplicit(b[0],
b[1])})};D.concatenate=function(g,v){return h(g,v,(r,N,b)=>{r=[];if(1>b.length)return"";if(a.isArray(b[0])){N=a.defaultUndefined(b[2],"");for(var U=0;U<b[0].length;U++)r[U]=a.toStringExplicit(b[0][U],N);return 1<b.length?r.join(b[1]):r.join("")}if(a.isImmutableArray(b[0])){N=a.defaultUndefined(b[2],"");for(U=0;U<b[0].length();U++)r[U]=a.toStringExplicit(b[0].get(U),N);return 1<b.length?r.join(b[1]):r.join("")}for(N=0;N<b.length;N++)r[N]=a.toStringExplicit(b[N]);return r.join("")})};D.reverse=function(g,
v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);if(a.isArray(b[0]))return r=b[0].slice(0),r.reverse(),r;if(a.isImmutableArray(b[0]))return r=b[0].toArray().slice(0),r.reverse(),r;throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.InvalidParameter,v);})};D.replace=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,3,4,g,v);r=a.toString(b[0]);N=a.toString(b[1]);const U=a.toString(b[2]);return(4===b.length?a.toBoolean(b[3]):1)?a.multiReplace(r,N,U):r.replace(N,U)})};D.schema=function(g,v){return h(g,
v,(r,N,b)=>{if(a.isFeature(b[0]))return(r=a.featureSchema(b[0]))?w.convertObjectToArcadeDictionary(r,a.defaultTimeZone(g)):null;throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.InvalidParameter,v);})};D.subtypes=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);if(a.isFeature(b[0]))return(r=a.featureSubtypes(b[0]))?w.convertObjectToArcadeDictionary(r,a.defaultTimeZone(g)):null;throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.InvalidParameter,v);})};D.subtypecode=function(g,
v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);if(a.isFeature(b[0])){r=a.featureSubtypes(b[0]);if(!r)return null;if(r.subtypeField&&b[0].hasField(r.subtypeField)){b=b[0].field(r.subtypeField);for(const U of r.subtypes)if(U.code===b)return U.code}return null}throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.InvalidParameter,v);})};D.subtypename=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);if(a.isFeature(b[0])){r=a.featureSubtypes(b[0]);if(!r)return"";if(r.subtypeField&&b[0].hasField(r.subtypeField)){b=
b[0].field(r.subtypeField);for(const U of r.subtypes)if(U.code===b)return U.name}return""}throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.InvalidParameter,v);})};D.gdbversion=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);if(a.isFeature(b[0]))return b[0].gdbVersion();throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.InvalidParameter,v);})};D.domain=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,2,3,g,v);if(a.isFeature(b[0]))return(r=a.featureFullDomain(b[0],a.toString(b[1]),
void 0===b[2]?void 0:b[2]))&&r.domain?"coded-value"===r.domain.type||"codedValue"===r.domain.type?w.convertObjectToArcadeDictionary({type:"codedValue",name:r.domain.name,dataType:C.layerFieldEsriConstants[r.field.type],codedValues:r.domain.codedValues.map(U=>({name:U.name,code:U.code}))},a.defaultTimeZone(g)):w.convertObjectToArcadeDictionary({type:"range",name:r.domain.name,dataType:C.layerFieldEsriConstants[r.field.type],min:r.domain.min,max:r.domain.max},a.defaultTimeZone(g)):null;throw new f.ArcadeExecutionError(g,
f.ExecutionErrorCodes.InvalidParameter,v);})};D.domainname=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,2,4,g,v);if(a.isFeature(b[0]))return a.featureDomainValueLookup(b[0],a.toString(b[1]),b[2],void 0===b[3]?void 0:b[3]);throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.InvalidParameter,v);})};D.domaincode=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,2,4,g,v);if(a.isFeature(b[0]))return a.featureDomainCodeLookup(b[0],a.toString(b[1]),b[2],void 0===b[3]?void 0:b[3]);throw new f.ArcadeExecutionError(g,
f.ExecutionErrorCodes.InvalidParameter,v);})};D.urlencode=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);if(null===b[0])return"";if(b[0]instanceof w){r="";for(const U of b[0].keys())N=b[0].field(U),""!==r&&(r+="\x26"),r=null===N?r+(encodeURIComponent(U)+"\x3d"):r+(encodeURIComponent(U)+"\x3d"+encodeURIComponent(N));return r}return encodeURIComponent(a.toString(b[0]))})};D.hash=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);r=new p.XXH(0);u(b[0],r,{context:g,node:v,map:new Map,
currentLength:0});return r.digest()})};D.convertdirection=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,3,3,g,v);return E.convertDirection(b[0],b[1],b[2])})};D.fromjson=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,1,g,v);if(!1===a.isString(b[0]))throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.InvalidParameter,v);return w.convertJsonToArcade(JSON.parse(a.toString(b[0])),a.defaultTimeZone(g))})};D.expects=function(g,v){return h(g,v,(r,N,b)=>{if(1>b.length)throw new f.ArcadeExecutionError(g,
f.ExecutionErrorCodes.WrongNumberOfParameters,v);return a.voidOperation})};D.tocharcode=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,2,g,v);r=a.toNumber(a.defaultUndefined(b[1],0));N=a.toString(b[0]);if(0===N.length&&1===b.length)return null;if(N.length<=r||0>r)throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.OutOfBounds,v);return N.charCodeAt(r)})};D.tocodepoint=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,1,2,g,v);r=a.toNumber(a.defaultUndefined(b[1],0));N=a.toString(b[0]);if(0===
N.length&&1===b.length)return null;if(N.length<=r||0>r)throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.OutOfBounds,v);return N.codePointAt(r)})};D.fromcharcode=function(g,v){return h(g,v,(r,N,b)=>{if(1>b.length)throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.WrongNumberOfParameters,v);r=b.map(U=>Math.trunc(a.toNumber(U))).filter(U=>0<=U&&65535>=U);return 0===r.length?null:String.fromCharCode.apply(null,r)})};D.fromcodepoint=function(g,v){return h(g,v,(r,N,b)=>{if(1>b.length)throw new f.ArcadeExecutionError(g,
f.ExecutionErrorCodes.WrongNumberOfParameters,v);let U;try{U=b.map(ba=>Math.trunc(a.toNumber(ba))).filter(ba=>1114111>=ba&&ba>>>0===ba)}catch(ba){return null}return 0===U.length?null:String.fromCodePoint.apply(null,U)})};D.getuser=function(g,v){return h(g,v,(r,N,b)=>{a.pcCheck(b,0,2,g,v);r=a.defaultUndefined(b[1],"");r=!0===r||!1===r?"":a.toString(r);if(null!==r&&""!==r)return null;if(0===b.length||b[0]instanceof K){N=null;N=g.services&&g.services.portal?g.services.portal:k.getDefault();if(0<b.length&&
(b=b[0].field("url"),b=b?d.hasSamePortal(b,N?.restUrl||""):!1,!b)||!N)return null;if(""===r&&(b="loaded"===N.loadStatus&&N.user&&N.user.sourceJSON?N.user.sourceJSON:null,b)){b=JSON.parse(JSON.stringify(b));for(const U of["lastLogin","created","modified"])void 0!==b[U]&&null!==b[U]&&(b[U]=new Date(b[U]));return w.convertObjectToArcadeDictionary(b,a.defaultTimeZone(g))}return null}throw new f.ArcadeExecutionError(g,f.ExecutionErrorCodes.InvalidParameter,v);})};D.getenvironment=function(g,v){return h(g,
v,(r,N,b)=>{a.pcCheck(b,0,0,g,v);return w.convertObjectToArcadeDictionary(a.defaultExecutingContext(a.defaultTimeZone(g),g.spatialReference),a.defaultTimeZone(g),!0)})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadePortal":function(){define(["../chunks/_rollupPluginBabelHelpers","./Dictionary"],function(t,K){return function(B){function w(f){var a=B.call(this)||this;a.declaredClass="esri.arcade.Portal";a.immutable=!1;a.setField("url",f);a.immutable=!0;return a}
t._inherits(w,B);return t._createClass(w)}(K)})},"esri/arcade/Attachment":function(){define(["../chunks/_rollupPluginBabelHelpers","./Dictionary"],function(t,K){return function(B){function w(f,a,C,E,p,x,z){var l=B.call(this)||this;l.attachmentUrl=p;l.declaredClass="esri.arcade.Attachment";l.immutable=!1;l.setField("id",f);l.setField("name",a);l.setField("contenttype",C);l.setField("size",E);l.setField("exifinfo",x);l.setField("keywords",z);l.immutable=!0;return l}t._inherits(w,B);w.prototype.deepClone=
function(){return new w(this.field("id"),this.field("name"),this.field("contenttype"),this.field("size"),this.attachmentUrl,this.field("exifinfo")?.deepClone()??null,this.field("keywords"))};return t._createClass(w)}(K)})},"esri/arcade/functions/convertdirection":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../Dictionary ../executionError ../../chunks/languageUtils ../../core/maybe".split(" "),function(t,K,B,w,f,a){function C(G){if(!1===f.isString(G))throw new w.ArcadeExecutionError(null,
w.ExecutionErrorCodes.InvalidParameter,null);return G}function E(G,Q){Q=10**Q;return Math.round(G*Q)/Q}function p(G){const Q=parseFloat(G.toString().replace(Math.trunc(G).toString(),"0"))*Math.sign(G);return 0>G?{fraction:Q,integer:Math.ceil(G)}:{fraction:Q,integer:Math.floor(G)}}function x(G,Q){switch(G){case la.north:return"SHORT"===Q?"N":"North";case la.east:return"SHORT"===Q?"E":"East";case la.south:return"SHORT"===Q?"S":"South";case la.west:return"SHORT"===Q?"W":"West"}}function z(G,Q,P){for(;G.length<
P;)G=Q+G;return G}function l(G,Q){return G-Math.floor(G/Q)*Q}function m(G){switch(G){case W.truncated_degrees:case W.decimal_degrees:return 360;case W.radians:return Ba;case W.gradians:return 400;case W.seconds:return 1296E3;case W.fractional_degree_minutes:return 60;case W.fractional_minute_seconds:return 60;default:throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});}}function n(G){switch(G.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return ka.north_azimuth;
case "POLAR":return ka.polar;case "QUADRANT":return ka.quadrant;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return ka.south_azimuth}throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"unsupported directionType"});}function c(G){switch(G.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return W.decimal_degrees;case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return W.degrees_minutes_seconds;
case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return W.radians;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return W.gradians}throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function d(G,Q,P){let S=null;switch(Q){case W.decimal_degrees:S=ia(G,3600);break;case W.seconds:S=G;break;case W.gradians:S=ia(G,3240);break;case W.radians:S=ia(G,wa);break;default:throw new w.ArcadeExecutionError(null,
w.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(P){case W.decimal_degrees:return pa(S,3600);case W.seconds:return S;case W.gradians:return pa(S,3240);case W.radians:return S/wa;default:throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function k(G){a.assertIsSome(G);switch(G){case W.decimal_degrees:case W.truncated_degrees:case W.degrees_minutes_seconds:return W.decimal_degrees;case W.gradians:return W.gradians;
case W.fractional_degree_minutes:return W.fractional_degree_minutes;case W.radians:return W.radians;case W.seconds:case W.fractional_minute_seconds:return W.seconds}}function y(G){switch(f.toNumber(G)){case 1:return{first:la.north,second:la.east};case 2:return{first:la.south,second:la.east};case 3:return{first:la.south,second:la.west};case 4:return{first:la.north,second:la.west}}return null}function u(G){switch(G.toUpperCase().trim()){case "N":case "NORTH":return la.north;case "E":case "EAST":return la.east;
case "S":case "SOUTH":return la.south;case "W":case "WEST":return la.west}return null}function D(G){G=parseFloat(G);if(f.isNumber(G)){if(isNaN(G))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});return G}throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function h(G,Q,P){const S=P===ka.quadrant;let da=null;var e=null;let q=0;var I=0;I=0;if(S){if(2>G.length)throw new w.ArcadeExecutionError(null,
w.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});I=1;(e=y(f.toString(G[G.length-1])))?(da=e.first,e=e.second):(q=1,da=u(f.toString(G[0])),e=u(f.toString(G[G.length-1])));if(null===da||null===e)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}switch(Q){case W.decimal_degrees:case W.radians:case W.gradians:if(0===G.length)break;return S?F.createFromAngleMeridianAndDirection(H.createFromAngleAndUnits(D(G[q]),k(Q)),da,e):F.createFromAngleAndDirection(H.createFromAngleAndUnits(D(G[q]),
k(Q)),P);case W.degrees_minutes_seconds:I=G.length-I-q;if(3===I)return G=H.createFromDegreesMinutesSeconds(D(G[q]),D(G[q+1]),D(G[q+2])),S?F.createFromAngleMeridianAndDirection(G,da,e):F.createFromAngleAndDirection(G,P);if(1===I)return G=D(G[q]),G=ra.numberToDms(G),G=H.createFromDegreesMinutesSeconds(G.m_degrees,G.m_minutes,G.m_seconds),S?F.createFromAngleMeridianAndDirection(G,da,e):F.createFromAngleAndDirection(G,P)}throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});
}function g(G){const Q=[" ","-","/","'",'"',"\\","^","\u00b0",oa,"\t","\r","\n","*"];let P="";for(let S=0;S<G.length;S++){const da=G.charAt(S);P=Q.includes(da)?P+"RRSPLITRRSPLITRR":P+da}return P.split("RRSPLITRRSPLITRR").filter(S=>""!==S)}function v(G,Q,P){const S={padding:0,rounding:0,newpos:Q};let da=!1;for(;Q<G.length;){const e=G[Q];if(e===P)da?S.rounding++:S.padding++,Q++;else if("."===e)da=!0,Q++;else break}S.newpos=Q-1;return S}const r=G=>(Q,P,S)=>{S=S||14;return+G(Q,P).toFixed(S)},N=(G,Q)=>
G+Q,b=(G,Q)=>G-Q,U=(G,Q)=>G*Q,ba=(G,Q)=>G/Q,Y=(G,Q,P)=>r(N)(G,Q,P),ia=(G,Q,P)=>r(U)(G,Q,P),pa=(G,Q,P)=>r(ba)(G,Q,P),Ba=2*Math.PI,wa=648E3/Math.PI,oa=String.fromCharCode(7501);var la;(function(G){G[G.north=0]="north";G[G.east=1]="east";G[G.south=2]="south";G[G.west=3]="west"})(la||(la={}));var W;(function(G){G[G.decimal_degrees=1]="decimal_degrees";G[G.seconds=2]="seconds";G[G.degrees_minutes_seconds=3]="degrees_minutes_seconds";G[G.radians=4]="radians";G[G.gradians=5]="gradians";G[G.truncated_degrees=
6]="truncated_degrees";G[G.fractional_degree_minutes=7]="fractional_degree_minutes";G[G.fractional_minute_seconds=8]="fractional_minute_seconds"})(W||(W={}));var ka;(function(G){G[G.north_azimuth=1]="north_azimuth";G[G.polar=2]="polar";G[G.quadrant=3]="quadrant";G[G.south_azimuth=4]="south_azimuth"})(ka||(ka={}));var sa;(function(G){G[G.meridian=0]="meridian";G[G.direction=1]="direction"})(sa||(sa={}));let ra=function(){function G(P,S,da){this.m_degrees=P;this.m_minutes=S;this.m_seconds=da}var Q=
G.prototype;Q.getField=function(P){switch(P){case W.decimal_degrees:case W.truncated_degrees:return this.m_degrees;case W.fractional_degree_minutes:return this.m_minutes;case W.seconds:case W.fractional_minute_seconds:return this.m_seconds;default:throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}};G.secondsToDMS=function(P){const S=p(P).fraction;P=p(P).integer;const da=Math.floor(P/3600);P-=3600*da;const e=Math.floor(P/60);return new G(da,
e,P-60*e+S)};G.numberToDms=function(P){var S=p(P).fraction;P=p(P).integer;const da=ia(p(100*S).fraction,100);S=p(100*S).integer;return new G(P,S,da)};Q.format=function(P,S){S=E(this.m_seconds,S);let da=this.m_minutes,e=this.m_degrees;if(P===W.seconds||P===W.fractional_minute_seconds)60<=S&&(S-=60,++da),60<=da&&(da=0,++e),360<=e&&(e=0);else if(P===W.fractional_degree_minutes)S=0,da=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,e=this.m_degrees,60<=da&&(da=0,++e),360<=e&&(e=0);else if(P===W.decimal_degrees||
P===W.truncated_degrees)P=pa(this.m_seconds,3600),S=pa(this.m_minutes,60),e=Math.round(this.m_degrees+S+P),S=da=0;return new G(e,da,S)};G.dmsToSeconds=function(P,S,da){return 3600*P+60*S+da};return K._createClass(G)}(),J=function(){function G(Q,P,S){this.meridian=Q;this.angle=P;this.direction=S}G.prototype.fetchAzimuth=function(Q){return Q===sa.meridian?this.meridian:this.direction};return K._createClass(G)}(),F=function(){function G(P){this._angle=P}G.createFromAngleAndDirection=function(P,S){return new G(new H(G._convertDirectionFormat(P.extractAngularUnits(W.seconds),
S,ka.north_azimuth)))};var Q=G.prototype;Q.getAngle=function(P){const S=this._angle.extractAngularUnits(W.seconds);switch(P){case ka.north_azimuth:case ka.south_azimuth:case ka.polar:return new H(G._convertDirectionFormat(S,ka.north_azimuth,P));case ka.quadrant:return P=G.secondsNorthAzimuthToQuadrant(S),new H(P.angle)}};Q.getMeridian=function(P){const S=this._angle.extractAngularUnits(W.seconds);switch(P){case ka.north_azimuth:return la.north;case ka.south_azimuth:return la.south;case ka.polar:return la.east;
case ka.quadrant:return G.secondsNorthAzimuthToQuadrant(S).meridian}};Q.getDirection=function(P){const S=this._angle.extractAngularUnits(W.seconds);switch(P){case ka.north_azimuth:return la.east;case ka.south_azimuth:return la.west;case ka.polar:return la.north;case ka.quadrant:return G.secondsNorthAzimuthToQuadrant(S).direction}};G.secondsNorthAzimuthToQuadrant=function(P){const S=324E3>=P||972E3<=P?la.north:la.south;return new J(S,S===la.north?Math.min(1296E3-P,P):Math.abs(P-648E3),648E3<P?la.west:
la.east)};G.createFromAngleMeridianAndDirection=function(P,S,da){return new G(new H(G.secondsQuadrantToNorthAzimuth(P.extractAngularUnits(W.seconds),S,da)))};G.secondsQuadrantToNorthAzimuth=function(P,S,da){return S===la.north?da===la.east?P:1296E3-P:da===la.east?648E3-P:648E3+P};G._convertDirectionFormat=function(P,S,da){let e=0;switch(S){case ka.north_azimuth:e=P;break;case ka.polar:e=324E3-P;break;case ka.quadrant:throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});
case ka.south_azimuth:e=P+648E3}P=0;switch(da){case ka.north_azimuth:P=e;break;case ka.polar:P=324E3-e;break;case ka.quadrant:throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case ka.south_azimuth:P=e-648E3}P%=1296E3;return 0>P?1296E3+P:P};return K._createClass(G)}(),H=function(){function G(Q){this._seconds=Q}G.createFromAngleAndUnits=function(Q,P){return new G(d(Q,P,W.seconds))};G.prototype.extractAngularUnits=function(Q){return d(this._seconds,
W.seconds,k(Q))};G.createFromDegreesMinutesSeconds=function(Q,P,S){return new G(Y(Y(ia(Q,3600),ia(P,60)),S))};return K._createClass(G)}(),O=function(){function G(P,S,da,e){this.view=P;this.angle=S;this.merdian=da;this.direction=e;this._formattedDms=this._dms=null}G.createFromStringAndBearing=function(P,S,da){return new G(P,S.getAngle(da),S.getMeridian(da),S.getDirection(da))};var Q=G.prototype;Q.fetchAngle=function(){return this.angle};Q.fetchMeridian=function(){return this.merdian};Q.fetchDirection=
function(){return this.direction};Q.fetchView=function(){return this.view};Q.fetchDms=function(){null===this._dms&&this._calculateDms();return this._dms};Q.fetchFormattedDms=function(){null===this._formattedDms&&this._calculateDms();return this._formattedDms};Q._calculateDms=function(){var P=null;let S=W.truncated_degrees,da=0;for(P=0;P<this.view.length;P++){const e=this.view[P];switch(e){case "m":P=v(this.view,P,e);S=S===W.truncated_degrees?W.fractional_degree_minutes:S;P=P.newpos;continue;case "s":P=
v(this.view,P,e),S=W.fractional_minute_seconds,da=da<P.rounding?P.rounding:da,P=P.newpos}}this._dms=ra.secondsToDMS(this.angle.extractAngularUnits(W.seconds));this._formattedDms=ra.secondsToDMS(this.angle.extractAngularUnits(W.seconds)).format(S,da)};return K._createClass(G)}();t.convertDirection=function(G,Q,P){if(!(Q instanceof B))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidParameter,null);if(!1===Q.hasField("directionType"))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,
null,{reason:"missing directionType"});if(!1===Q.hasField("angleType"))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});var S=n(C(Q.field("directiontype")));Q=c(C(Q.field("angletype")));if(f.isNumber(G)){G=f.toNumber(G);if(S===ka.quadrant)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});Q===W.degrees_minutes_seconds?(G=ra.numberToDms(G),S=F.createFromAngleAndDirection(H.createFromDegreesMinutesSeconds(G.m_degrees,
G.m_minutes,G.m_seconds),S)):S=F.createFromAngleAndDirection(H.createFromAngleAndUnits(G,k(Q)),S)}else if(f.isString(G))S=h(g(G),Q,S);else if(f.isArray(G))S=h(G,Q,S);else if(f.isImmutableArray(G))S=h(G.toArray(),Q,S);else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(P instanceof B))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidParameter,null);if(!1===P.hasField("directionType"))throw new w.ArcadeExecutionError(null,
w.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===P.hasField("outputType"))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});G=n(C(P.field("directiontype")));Q=P.hasField("angleType")?c(C(P.field("angletype"))):null;var da=C(P.field("outputType")).toUpperCase().trim();if(!G||!da)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(Q||"TEXT"===da&&P.hasField("format")))throw new w.ArcadeExecutionError(null,
w.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(da){case "VALUE":if(G===ka.quadrant||Q===W.degrees_minutes_seconds)return P=S.getAngle(G),G===ka.quadrant&&Q===W.degrees_minutes_seconds?(P=ra.secondsToDMS(P.extractAngularUnits(W.seconds)),S=[x(S.getMeridian(G),"SHORT"),P.m_degrees,P.m_minutes,P.m_seconds,x(S.getDirection(G),"SHORT")]):Q===W.degrees_minutes_seconds?(S=ra.secondsToDMS(P.extractAngularUnits(W.seconds)),S=[S.m_degrees,S.m_minutes,S.m_seconds]):S=G===ka.quadrant?[x(S.getMeridian(G),
"SHORT"),P.extractAngularUnits(Q),x(S.getDirection(G),"SHORT")]:[P.extractAngularUnits(Q)],S;if((P=k(Q))&&Q!==W.degrees_minutes_seconds)S=S.getAngle(G).extractAngularUnits(P);else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return S;case "TEXT":da="";P.hasField("format")&&(da=f.toString(P.field("format")));if(null===da||""===da){P="";switch(Q){case W.decimal_degrees:P=G===ka.quadrant?"DD.DD\u00b0":"DDD.DD\u00b0";break;case W.degrees_minutes_seconds:P=
G===ka.quadrant?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case W.radians:P="R.RR";break;case W.gradians:P="GGG.GG"+oa;break;default:throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});}G===ka.quadrant&&(P="p "+P+" b");da=P}P=da;var e="",q=null,I=null;Q=O.createFromStringAndBearing(P,S,G);da={D:W.decimal_degrees,d:W.truncated_degrees,m:W.fractional_degree_minutes,s:W.fractional_minute_seconds,R:W.radians,G:W.gradians};for(I=0;I<P.length;I++){var M=
P[I];switch(M){case "[":q=P;M={escaped:"",newpos:I};for(I++;I<q.length;){var T=q[I];I++;if("]"===T)break;M.escaped+=T}M.newpos=I-1;q=M;e+=q.escaped;I=q.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":q=v(P,I,M);I=S.getAngle(G);a:{M=da[M];T=q.padding;var X=q.rounding,ca=Q;let aa=null;switch(M){case W.decimal_degrees:case W.radians:case W.gradians:aa=l(E(I.extractAngularUnits(M),X),m(M));I=z(aa.toFixed(X),"0",T+X+(0<X?1:0));break a;case W.truncated_degrees:case W.fractional_degree_minutes:aa=
l(ca.fetchFormattedDms().getField(M),m(M));I=z(aa.toFixed(X),"0",T+X+(0<X?1:0));break a;case W.fractional_minute_seconds:aa=l(E(ca.fetchDms().getField(M),X),m(M));I=z(aa.toFixed(X),"0",T+X+(0<X?1:0));break a;default:throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}e+=I;I=q.newpos;continue;case "P":case "p":e+=x(Q.fetchMeridian(),"p"===M?"SHORT":"LONG");continue;case "B":case "b":e+=x(Q.fetchDirection(),"b"===M?"SHORT":"LONG");continue;
default:e+=M}}return e;default:throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidParameter,null);}};t.preciseAdd=Y;t.preciseDivide=pa;t.preciseMinus=(G,Q,P)=>r(b)(G,Q,P);t.preciseMultiply=ia;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/hash":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(t,K){function B(f){const a=[];for(let C=0,E=f.length;C<E;C++){let p=f.charCodeAt(C);128>p?a.push(p):2048>p?a.push(192|p>>
6,128|p&63):55296>p||57344<=p?a.push(224|p>>12,128|p>>6&63,128|p&63):(C++,p=65536+((p&1023)<<10|f.charCodeAt(C)&1023),a.push(240|p>>18,128|p>>12&63,128|p>>6&63,128|p&63))}return new Uint8Array(a)}let w=function(){function f(C){this._seed=C;this._totallen=0;this._bufs=[];this.init()}var a=f.prototype;a.init=function(){this._bufs=[];this._totallen=0;return this};a.updateFloatArray=function(C){const E=[];for(const p of C)isNaN(p)?E.push("NaN"):Infinity===p?E.push("Infinity"):-Infinity===p?E.push("-Infinity"):
0===p?E.push("0"):E.push(p.toString(16));this.update(B(E.join("")))};a.updateIntArray=function(C){C=Int32Array.from(C);this.update(new Uint8Array(C.buffer))};a.updateUint8Array=function(C){this.update(Uint8Array.from(C))};a.updateWithString=function(C){return this.update(B(C))};a.update=function(C){this._bufs.push(C);this._totallen+=C.length;return this};a.digest=function(){const C=new Uint8Array(this._totallen);let E=0;for(const p of this._bufs)C.set(p,E),E+=p.length;this.init();return this._xxHash32(C,
this._seed)};a._xxHash32=function(C,E=0){var p=E+374761393&4294967295;let x=0;if(16<=C.length){p=[E+2654435761+2246822519&4294967295,E+2246822519&4294967295,E+0&4294967295,E-2654435761&4294967295];E=C.length-16;var z=0;for(x=0;(x&4294967280)<=E;x+=4){var l=x;l=p[z]+(2246822519*(C[l]+(C[l+1]<<8))+(2246822519*(C[l+2]+(C[l+3]<<8))<<16))&4294967295;l=l<<13|l>>>19;p[z]=2654435761*(l&65535)+(2654435761*(l>>>16)<<16)&4294967295;z=z+1&3}p=(p[0]<<1|p[0]>>>31)+(p[1]<<7|p[1]>>>25)+(p[2]<<12|p[2]>>>20)+(p[3]<<
18|p[3]>>>14)&4294967295}p=p+C.length&4294967295;for(E=C.length-4;x<=E;x+=4)z=x,p=p+(3266489917*(C[z]+(C[z+1]<<8))+(3266489917*(C[z+2]+(C[z+3]<<8))<<16))&4294967295,p=p<<17|p>>>15,p=668265263*(p&65535)+(668265263*(p>>>16)<<16)&4294967295;for(;x<C.length;++x)p+=374761393*C[x],p=p<<11|p>>>21,p=2654435761*(p&65535)+(2654435761*(p>>>16)<<16)&4294967295;p^=p>>>15;p=(2246822519*(p&65535)&4294967295)+(2246822519*(p>>>16)<<16);p^=p>>>13;p=(3266489917*(p&65535)&4294967295)+(3266489917*(p>>>16)<<16);p^=p>>>
16;return 0>p?p+4294967296:p};return K._createClass(f)}();t.XXH=w;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleLoader":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(t,K){let B=function(){function w(f,a){this._moduleSingletons=f;this._syntaxModules=a}w.prototype.loadLibrary=function(f){return null==this._syntaxModules?null:(f=this._syntaxModules[f.toLowerCase()])?{syntax:f.script,uri:f.uri}:null};return K._createClass(w)}();
t.ArcadeModuleLoader=B;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleResolver":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../portal/Portal ./parser ./featureset/support/RecentlyUsedCache ./executionError".split(" "),function(t,K,B,w,f,a,C){let E=function(){function p(z){this.portalUri=z}var x=p.prototype;x.normalizeModuleUri=function(z){const l=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi;var m=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi;
const n=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,c=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi;var d=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(z.startsWith("portal+")){let u=z.substring(7);var k="",y=u;let D=!1;for(const h of[m,c,n])if(m=h.exec(u),null!==m){k=m.groups;y=k.itemid;k=k.portalurl;D=!0;break}if(!1===D)if(l.test(u))y=u,k=this.portalUri;else throw new C.ModuleError(C.ModuleErrorCodes.UnsupportedUriProtocol,
{uri:z});y.includes("/")&&(y=y.split("/")[0]);y.includes("?")&&(y=y.split("?")[0]);z="current";d=d.exec(y);null!==d&&(z=d.groups,y=z.itemid,z=z.versionstring);u=(new w({url:k})).restUrl+"/content/items/"+y+"/resources/"+z+".arc";return{url:u,scheme:"portal",uri:"PO:"+u}}if(z.startsWith("mock")){if("mock"===z)return{url:"",scheme:"mock",data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};y=z.replace("mock:",
"");if(void 0!==p.mocks[y])return{url:"",scheme:"mock",data:p.mocks[y],uri:z}}throw new C.ModuleError(C.ModuleErrorCodes.UnrecognisedUri,{uri:z});};x.fetchModule=async function(z){var l=p.cachedModules.getFromCache(z.uri);if(l)return l;l=this.fetchSource(z);p.cachedModules.addToCache(z.uri,l);let m=null;try{m=await l}catch(n){throw p.cachedModules.removeFromCache(z.uri),n;}return m};x.fetchSource=async function(z){if("portal"===z.scheme){const l=await B(z.url,{responseType:"text",query:{}});if(l.data)return f.parseScript(l.data,
[])}if("mock"===z.scheme)return f.parseScript(z.data??"",[]);throw new C.ModuleError(C.ModuleErrorCodes.UnsupportedUriProtocol);};p.create=function(z){return new p(z)};p.getDefault=function(){return this._default??(p._default=p._moduleResolverFactory())};K._createClass(p,null,[{key:"moduleResolverClass",set:function(z){this._moduleResolverFactory=z;this._default=null}}]);return p}();E.mocks={};E.cachedModules=new a(30);E._default=null;E._moduleResolverFactory=()=>{const p=w.getDefault();return new E(p.url)};
t.ArcadeModuleResolver=E;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/parser":function(){define(["exports","./treeAnalysis","./lib/arcade-parser","./lib/types"],function(t,K,B,w){t.parseScript=function(f,a=[]){f=B.parse(f);if(null===f.body||void 0===f.body)throw new w.ParsingError({index:0,line:0,column:0,data:null,description:"",code:w.ParsingErrorCodes.InvalidExpression});f.loadedModules={};K.findScriptDependencies(f,a);return f};Object.defineProperty(t,Symbol.toStringTag,
{value:"Module"})})},"esri/arcade/lib/arcade-parser":function(){define(["exports","./parser","./tokenizer","./types"],function(t,K,B,w){t.AssignmentOperators=w.AssignmentOperators;t.BinaryOperators=w.BinaryOperators;Object.defineProperty(t,"Keywords",{enumerable:!0,get:()=>w.Keywords});t.LogicalOperators=w.LogicalOperators;t.OperatorPrecedence=w.OperatorPrecedence;t.ParsingError=w.ParsingError;Object.defineProperty(t,"ParsingErrorCodes",{enumerable:!0,get:()=>w.ParsingErrorCodes});t.ParsingErrorMessages=
w.ParsingErrorMessages;Object.defineProperty(t,"Syntax",{enumerable:!0,get:()=>w.Syntax});t.TokenNames=w.TokenNames;Object.defineProperty(t,"TokenType",{enumerable:!0,get:()=>w.TokenType});t.UnaryOperators=w.UnaryOperators;t.UpdateOperators=w.UpdateOperators;t.isArrayExpression=w.isArrayExpression;t.isAssignmentExpression=w.isAssignmentExpression;t.isBinaryExpression=w.isBinaryExpression;t.isBlockComment=w.isBlockComment;t.isBlockStatement=w.isBlockStatement;t.isBreakStatement=w.isBreakStatement;
t.isCallExpression=w.isCallExpression;t.isContinueStatement=w.isContinueStatement;t.isEmptyStatement=w.isEmptyStatement;t.isExpression=w.isExpression;t.isExpressionStatement=w.isExpressionStatement;t.isForInStatement=w.isForInStatement;t.isForStatement=w.isForStatement;t.isFunctionDeclaration=w.isFunctionDeclaration;t.isIdentifier=w.isIdentifier;t.isIfStatement=w.isIfStatement;t.isLiteral=w.isLiteral;t.isLogicalExpression=w.isLogicalExpression;t.isMemberExpression=w.isMemberExpression;t.isObjectExpression=
w.isObjectExpression;t.isProgram=w.isProgram;t.isProperty=w.isProperty;t.isReturnStatement=w.isReturnStatement;t.isStatement=w.isStatement;t.isTemplateElement=w.isTemplateElement;t.isTemplateLiteral=w.isTemplateLiteral;t.isUnaryExpression=w.isUnaryExpression;t.isUpdateExpression=w.isUpdateExpression;t.isVariableDeclaration=w.isVariableDeclaration;t.isVariableDeclarator=w.isVariableDeclarator;t.parse=function(f,a,C){return(new K.Parser(f,a,C)).parseScript()};t.tokenize=function(f,a,C){f=new B.Tokenizer(f,
a);a=[];let E=void 0;try{let p;for(;p=f.getNextToken();)C&&(p=C(p)),a.push(p)}catch(p){f.errorHandler.tolerate(p)}f.errorHandler.tolerant&&(E=f.errors());return{tokens:a,errors:E}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/parser":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ./comment-handler ./error-handler ./scanner ./types".split(" "),function(t,K,B,w,f,a){function C(m,n=0){let c=m.start-m.lineStart,d=m.lineNumber;0>c&&(c+=n,d--);return{index:m.start,
line:d,column:c}}function E(m){return[{index:m.range[0],...m.loc.start},{index:m.range[1],...m.loc.end}]}function p(m){return a.OperatorPrecedence[m]??0}var x;(function(m){m[m.None=0]="None";m[m.Function=1]="Function";m[m.IfClause=2]="IfClause";m[m.ForLoop=4]="ForLoop";m[m.WhileLoop=8]="WhileLoop"})(x||(x={}));var z;(function(m){m[m.AsObject=0]="AsObject";m[m.Automatic=1]="Automatic"})(z||(z={}));let l=function(){function m(c,d={},k){this.delegate=k;this.hasLineTerminator=!1;this.options={tokens:"boolean"===
typeof d.tokens&&d.tokens,comments:"boolean"===typeof d.comments&&d.comments,tolerant:"boolean"===typeof d.tolerant&&d.tolerant};this.options.comments&&(this.commentHandler=new B.CommentHandler);this.errorHandler=new w.ErrorHandler(this.options.tolerant);this.scanner=new f.Scanner(c,this.errorHandler);this.context={isAssignmentTarget:!1,blockContext:x.None,curlyParsingType:z.AsObject};this.rawToken={type:a.TokenType.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=
[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}var n=m.prototype;n.throwIfInvalidType=function(c,d,{validTypes:k,invalidTypes:y}){k?.some(u=>c.type===u)||y?.some(u=>c.type===u)&&this.throwError(a.ParsingErrorCodes.InvalidExpression,d)};n.throwError=function(c,d,k=this.endMarker){const {index:y,
line:u,column:D}=d;this.errorHandler.throwError({code:c,index:y,line:u,column:D+1,len:k.index-y-1})};n.tolerateError=function(c,d){throw Error("######################################### !!!");};n.unexpectedTokenError=function(c={}){const {rawToken:d}=c;let {code:k,data:y}=c;if(d){if(!k)switch(d.type){case a.TokenType.EOF:k=a.ParsingErrorCodes.UnexpectedEndOfScript;break;case a.TokenType.Identifier:k=a.ParsingErrorCodes.UnexpectedIdentifier;break;case a.TokenType.NumericLiteral:k=a.ParsingErrorCodes.UnexpectedNumber;
break;case a.TokenType.StringLiteral:k=a.ParsingErrorCodes.UnexpectedString;break;case a.TokenType.Template:k=a.ParsingErrorCodes.UnexpectedTemplate}c=d.value.toString()}else c="ILLEGAL";k=k??a.ParsingErrorCodes.UnexpectedToken;y||(y={value:c});c=w.formatErrorDescription(k,y);if(d)return new a.ParsingError({code:k,index:d.start,line:d.lineNumber,column:d.start-d.lineStart+1,len:d.end-d.start-1,data:y,description:c});const {index:u,line:D}=this.endMarker;return new a.ParsingError({code:k,index:u,line:D,
column:this.endMarker.column+1,data:y,description:c})};n.throwUnexpectedToken=function(c={}){c.rawToken=c.rawToken??this.rawToken;throw this.unexpectedTokenError(c);};n.collectComments=function(c){const {commentHandler:d}=this;d&&c.length&&c.forEach(k=>{k={type:k.multiLine?a.Syntax.BlockComment:a.Syntax.LineComment,value:this.getSourceValue(k),range:k.range,loc:k.loc};d.collectComment(k)})};n.peekAhead=function(c){const d=this.scanner.saveState();c=c.call(this,()=>{this.scanner.scanComments();return this.scanner.lex()});
this.scanner.restoreState(d);return c};n.getSourceValue=function(c){return this.scanner.source.slice(c.start,c.end)};n.convertToToken=function(c){return{type:a.TokenNames[c.type],value:this.getSourceValue(c),range:[c.start,c.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}};n.readNextRawToken=function(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;
this.endMarker.column=this.scanner.index-this.scanner.lineStart;const c=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=c.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&this.rawToken.type!==a.TokenType.EOF&&this.tokens.push(this.convertToToken(this.rawToken))};
n.captureStartMarker=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};n.getItemLocation=function(c){return{range:[c.index,this.endMarker.index],loc:{start:{line:c.line,column:c.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}};n.finalize=function(c){if(this.delegate||this.commentHandler)this.commentHandler?.attachComments(c),this.delegate?.(c);return c};n.expectPunctuator=function(c){const d=this.rawToken;this.matchPunctuator(c)?
this.readNextRawToken():this.throwUnexpectedToken({rawToken:d,code:a.ParsingErrorCodes.PunctuatorExpected,data:{value:c}})};n.expectKeyword=function(c){this.rawToken.type===a.TokenType.Keyword&&this.rawToken.value.toLowerCase()===c?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};n.expectContextualKeyword=function(c){this.rawToken.type===a.TokenType.Identifier&&this.rawToken.value.toLowerCase()===c?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};
n.matchKeyword=function(c){return this.rawToken.type===a.TokenType.Keyword&&this.rawToken.value.toLowerCase()===c};n.matchContextualKeyword=function(c){return this.rawToken.type===a.TokenType.Identifier&&this.rawToken.value===c};n.matchPunctuator=function(c){return this.rawToken.type===a.TokenType.Punctuator&&this.rawToken.value===c};n.getMatchingPunctuator=function(c){"string"===typeof c&&(c=c.split(""));if(this.rawToken.type===a.TokenType.Punctuator&&c?.length)return c.find(this.matchPunctuator,
this)};n.isolateCoverGrammar=function(c){const d=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;c=c.call(this);this.context.isAssignmentTarget=d;return c};n.inheritCoverGrammar=function(c){const d=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;c=c.call(this);this.context.isAssignmentTarget=this.context.isAssignmentTarget&&d;return c};n.withBlockContext=function(c,d){const k=this.context.blockContext;this.context.blockContext|=c;c=this.context.curlyParsingType;
this.context.curlyParsingType=z.Automatic;d=d.call(this);this.context.blockContext=k;this.context.curlyParsingType=c;return d};n.consumeSemicolon=function(){this.matchPunctuator(";")?this.readNextRawToken():this.hasLineTerminator||(this.rawToken.type===a.TokenType.EOF||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))};n.parsePrimaryExpression=
function(){const c=this.captureStartMarker(),d=this.rawToken;switch(d.type){case a.TokenType.Identifier:return this.readNextRawToken(),this.finalize({type:a.Syntax.Identifier,name:d.value,...this.getItemLocation(c)});case a.TokenType.NumericLiteral:case a.TokenType.StringLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:d.value,raw:this.getSourceValue(d),isString:"string"===typeof d.value,...this.getItemLocation(c)});case a.TokenType.BooleanLiteral:return this.context.isAssignmentTarget=
!1,this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:d.value.toLowerCase()===a.Keywords.True,raw:this.getSourceValue(d),isString:!1,...this.getItemLocation(c)});case a.TokenType.NullLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:null,raw:this.getSourceValue(d),isString:!1,...this.getItemLocation(c)});case a.TokenType.Template:return this.parseTemplateLiteral();case a.TokenType.Punctuator:switch(d.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression);
case "[":return this.inheritCoverGrammar(this.parseArrayInitializer);case "{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case a.TokenType.Keyword:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};n.parseArrayInitializer=function(){const c=this.captureStartMarker();this.expectPunctuator("[");const d=[];for(;!this.matchPunctuator("]");){const k=
this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(a.ParsingErrorCodes.InvalidExpression,k)):(d.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||this.expectPunctuator(","))}this.expectPunctuator("]");return this.finalize({type:a.Syntax.ArrayExpression,elements:d,...this.getItemLocation(c)})};n.parseObjectPropertyKey=function(){const c=this.captureStartMarker(),d=this.rawToken;switch(d.type){case a.TokenType.StringLiteral:return this.readNextRawToken(),
this.finalize({type:a.Syntax.Literal,value:d.value,raw:this.getSourceValue(d),isString:!0,...this.getItemLocation(c)});case a.TokenType.Identifier:case a.TokenType.BooleanLiteral:case a.TokenType.NullLiteral:case a.TokenType.Keyword:return this.readNextRawToken(),this.finalize({type:a.Syntax.Identifier,name:d.value,...this.getItemLocation(c)});default:this.throwError(a.ParsingErrorCodes.KeyMustBeString,c)}};n.parseObjectProperty=function(){const c=this.rawToken,d=this.captureStartMarker(),k=this.parseObjectPropertyKey();
let y=!1,u=null;this.matchPunctuator(":")?(this.readNextRawToken(),u=this.inheritCoverGrammar(this.parseAssignmentExpression)):c.type===a.TokenType.Identifier?(y=!0,u=this.finalize({type:a.Syntax.Identifier,name:c.value,...this.getItemLocation(d)})):this.throwUnexpectedToken({rawToken:this.rawToken});return this.finalize({type:a.Syntax.Property,kind:"init",key:k,value:u,shorthand:y,...this.getItemLocation(d)})};n.parseObjectExpression=function(){const c=this.captureStartMarker();this.expectPunctuator("{");
const d=[];for(;!this.matchPunctuator("}");)d.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");this.expectPunctuator("}");return this.finalize({type:a.Syntax.ObjectExpression,properties:d,...this.getItemLocation(c)})};n.parseTemplateElement=function(c=!1){var d=this.rawToken;d.type!==a.TokenType.Template&&this.throwUnexpectedToken({rawToken:d});c&&!d.head&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.InvalidTemplateHead,rawToken:d});c=this.captureStartMarker();
this.readNextRawToken();const {value:k,cooked:y,tail:u}=d;d=this.finalize({type:a.Syntax.TemplateElement,value:{raw:k,cooked:y},tail:u,...this.getItemLocation(c)});d.loc.start.column++;d.loc.end.column-=u?1:2;return d};n.parseTemplateLiteral=function(){const c=this.captureStartMarker(),d=[],k=[];let y=this.parseTemplateElement(!0);for(k.push(y);!y.tail;)d.push(this.parseExpression()),y=this.parseTemplateElement(),k.push(y);return this.finalize({type:a.Syntax.TemplateLiteral,quasis:k,expressions:d,
...this.getItemLocation(c)})};n.parseGroupExpression=function(){this.expectPunctuator("(");const c=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expectPunctuator(")");return c};n.parseArguments=function(){this.expectPunctuator("(");const c=[];if(!this.matchPunctuator(")"))for(;;){const d=this.isolateCoverGrammar(this.parseAssignmentExpression);c.push(d);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return c};
n.parseMemberName=function(){const c=this.rawToken,d=this.captureStartMarker();this.readNextRawToken();c.type!==a.TokenType.NullLiteral&&c.type!==a.TokenType.Identifier&&c.type!==a.TokenType.Keyword&&c.type!==a.TokenType.BooleanLiteral&&this.throwUnexpectedToken({rawToken:c});return this.finalize({type:a.Syntax.Identifier,name:c.value,...this.getItemLocation(d)})};n.parseLeftHandSideExpression=function(){const c=this.captureStartMarker();let d=this.inheritCoverGrammar(this.parsePrimaryExpression);
const k=this.captureStartMarker();for(var y;y=this.getMatchingPunctuator("([.");)switch(y){case "(":this.context.isAssignmentTarget=!1;d.type!==a.Syntax.Identifier&&d.type!==a.Syntax.MemberExpression&&this.throwError(a.ParsingErrorCodes.IdentiferExpected,c,k);y=this.parseArguments();d=this.finalize({type:a.Syntax.CallExpression,callee:d,arguments:y,...this.getItemLocation(c)});continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");y=this.isolateCoverGrammar(this.parseExpression);
this.expectPunctuator("]");d=this.finalize({type:a.Syntax.MemberExpression,computed:!0,object:d,property:y,...this.getItemLocation(c)});continue;case ".":this.context.isAssignmentTarget=!0,this.expectPunctuator("."),y=this.parseMemberName(),d=this.finalize({type:a.Syntax.MemberExpression,computed:!1,object:d,property:y,...this.getItemLocation(c)})}return d};n.parseUpdateExpression=function(){const c=this.captureStartMarker();let d=this.getMatchingPunctuator(a.UpdateOperators);if(d){this.readNextRawToken();
var k=this.captureStartMarker(),y=this.inheritCoverGrammar(this.parseUnaryExpression);y.type!==a.Syntax.Identifier&&y.type!==a.Syntax.MemberExpression&&y.type!==a.Syntax.CallExpression&&this.throwError(a.ParsingErrorCodes.InvalidExpression,k);this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInAssignment,c);this.context.isAssignmentTarget=!1;return this.finalize({type:a.Syntax.UpdateExpression,operator:d,argument:y,prefix:!0,...this.getItemLocation(c)})}k=
this.captureStartMarker();y=this.inheritCoverGrammar(this.parseLeftHandSideExpression);const u=this.captureStartMarker();if(this.hasLineTerminator)return y;d=this.getMatchingPunctuator(a.UpdateOperators);if(!d)return y;y.type!==a.Syntax.Identifier&&y.type!==a.Syntax.MemberExpression&&this.throwError(a.ParsingErrorCodes.InvalidExpression,k,u);this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInAssignment,c);this.readNextRawToken();this.context.isAssignmentTarget=
!1;return this.finalize({type:a.Syntax.UpdateExpression,operator:d,argument:y,prefix:!1,...this.getItemLocation(c)})};n.parseUnaryExpression=function(){const c=this.getMatchingPunctuator(a.UnaryOperators);if(c){const d=this.captureStartMarker();this.readNextRawToken();const k=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget=!1;return this.finalize({type:a.Syntax.UnaryExpression,operator:c,argument:k,prefix:!0,...this.getItemLocation(d)})}return this.parseUpdateExpression()};
n.parseBinaryExpression=function(){var c=this.rawToken,d=this.inheritCoverGrammar(this.parseUnaryExpression);if(this.rawToken.type!==a.TokenType.Punctuator)return d;var k=this.rawToken.value,y=p(k);if(0===y)return d;this.readNextRawToken();this.context.isAssignmentTarget=!1;c=[c,this.rawToken];var u=this.inheritCoverGrammar(this.parseUnaryExpression);k=[d,k,u];for(var D=[y];this.rawToken.type===a.TokenType.Punctuator&&0<(y=p(this.rawToken.value));){for(;2<k.length&&y<=D[D.length-1];){u=k.pop();const g=
k.pop();D.pop();d=k.pop();c.pop();var h=c[c.length-1];h=C(h,h.lineStart);k.push(this.finalize(this.createBinaryOrLogicalExpression(h,g,d,u)))}k.push(this.rawToken.value);D.push(y);c.push(this.rawToken);this.readNextRawToken();k.push(this.inheritCoverGrammar(this.parseUnaryExpression))}y=k.length-1;d=k[y];for(D=c.pop();1<y;){u=c.pop();if(!u)break;D=C(u,D?.lineStart);d=this.finalize(this.createBinaryOrLogicalExpression(D,k[y-1],k[y-2],d));y-=2;D=u}return d};n.createBinaryOrLogicalExpression=function(c,
d,k,y){const u=a.LogicalOperators.includes(d)?a.Syntax.LogicalExpression:a.Syntax.BinaryExpression;if(u===a.Syntax.BinaryExpression)return{type:u,operator:d,left:k,right:y,...this.getItemLocation(c)};k.type!==a.Syntax.AssignmentExpression&&k.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,...E(k));y.type!==a.Syntax.AssignmentExpression&&y.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,...E(k));return{type:u,operator:d,
left:k,right:y,...this.getItemLocation(c)}};n.parseAssignmentExpression=function(){const c=this.captureStartMarker(),d=this.inheritCoverGrammar(this.parseBinaryExpression);var k=this.captureStartMarker();const y=this.getMatchingPunctuator(a.AssignmentOperators);if(!y)return d;d.type!==a.Syntax.Identifier&&d.type!==a.Syntax.MemberExpression&&this.throwError(a.ParsingErrorCodes.InvalidExpression,c,k);this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInAssignment,
c);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();k=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize({type:a.Syntax.AssignmentExpression,left:d,operator:y,right:k,...this.getItemLocation(c)})};n.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};n.parseStatements=function(c){const d=[];for(;this.rawToken.type!==a.TokenType.EOF&&!this.matchPunctuator(c);){const k=this.parseStatementListItem();
a.isEmptyStatement(k)||d.push(k)}return d};n.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;return this.matchKeyword(a.Keywords.Function)?this.parseFunctionDeclaration():this.matchKeyword(a.Keywords.Export)?this.parseExportDeclaration():this.matchKeyword(a.Keywords.Import)?this.parseImportDeclaration():this.parseStatement()};n.parseBlock=function(){const c=this.captureStartMarker();this.expectPunctuator("{");const d=this.parseStatements("}");this.expectPunctuator("}");return this.finalize({type:a.Syntax.BlockStatement,
body:d,...this.getItemLocation(c)})};n.parseObjectStatement=function(){const c=this.captureStartMarker(),d=this.parseObjectExpression();return this.finalize({type:a.Syntax.ExpressionStatement,expression:d,...this.getItemLocation(c)})};n.parseBlockOrObjectStatement=function(){return this.context.curlyParsingType===z.AsObject||this.peekAhead(c=>{let d=c();if(d.type!==a.TokenType.Identifier&&d.type!==a.TokenType.StringLiteral)return!1;d=c();return d.type!==a.TokenType.Punctuator||":"!==d.value?!1:!0})?
this.parseObjectStatement():this.parseBlock()};n.parseIdentifier=function(){const c=this.rawToken;if(c.type!==a.TokenType.Identifier)return null;const d=this.captureStartMarker();this.readNextRawToken();return this.finalize({type:a.Syntax.Identifier,name:c.value,...this.getItemLocation(d)})};n.parseVariableDeclarator=function(){const c=this.captureStartMarker(),d=this.parseIdentifier();d||this.throwUnexpectedToken({code:a.ParsingErrorCodes.IdentiferExpected});let k=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();
const y=this.rawToken;try{k=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch(u){this.throwUnexpectedToken({rawToken:y,code:a.ParsingErrorCodes.InvalidVariableAssignment})}}return this.finalize({type:a.Syntax.VariableDeclarator,id:d,init:k,...this.getItemLocation(c)})};n.parseVariableDeclarationList=function(){const c=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),c.push(this.parseVariableDeclarator());return c};n.parseVariableDeclaration=function(){const c=
this.captureStartMarker();this.expectKeyword(a.Keywords.Var);const d=this.parseVariableDeclarationList();this.consumeSemicolon();return this.finalize({type:a.Syntax.VariableDeclaration,declarations:d,kind:"var",...this.getItemLocation(c)})};n.parseEmptyStatement=function(){const c=this.captureStartMarker();this.expectPunctuator(";");return this.finalize({type:a.Syntax.EmptyStatement,...this.getItemLocation(c)})};n.parseExpressionStatement=function(){const c=this.captureStartMarker(),d=this.parseExpression();
this.consumeSemicolon();return this.finalize({type:a.Syntax.ExpressionStatement,expression:d,...this.getItemLocation(c)})};n.parseIfClause=function(){return this.withBlockContext(x.IfClause,this.parseStatement)};n.parseIfStatement=function(){const c=this.captureStartMarker();this.expectKeyword(a.Keywords.If);this.expectPunctuator("(");var d=this.captureStartMarker();const k=this.parseExpression();var y=this.captureStartMarker();this.expectPunctuator(")");k.type!==a.Syntax.AssignmentExpression&&k.type!==
a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,d,y);d=this.parseIfClause();y=null;this.matchKeyword(a.Keywords.Else)&&(this.readNextRawToken(),y=this.parseIfClause());return this.finalize({type:a.Syntax.IfStatement,test:k,consequent:d,alternate:y,...this.getItemLocation(c)})};n.parseWhileStatement=function(){const c=this.captureStartMarker();this.expectKeyword(a.Keywords.While);this.expectPunctuator("(");var d=this.captureStartMarker();const k=this.parseExpression(),
y=this.captureStartMarker();this.expectPunctuator(")");k.type!==a.Syntax.AssignmentExpression&&k.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,d,y);d=this.withBlockContext(x.WhileLoop,this.parseStatement);return this.finalize({type:a.Syntax.WhileStatement,test:k,body:d,...this.getItemLocation(c)})};n.parseForStatement=function(){let c=null,d=null,k=null,y=null,u=null;const D=this.captureStartMarker();this.expectKeyword(a.Keywords.For);this.expectPunctuator("(");
if(this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(a.Keywords.Var)){var h=this.captureStartMarker();this.readNextRawToken();var g=this.parseVariableDeclarationList();1===g.length&&this.matchKeyword(a.Keywords.In)?(g[0].init&&this.throwError(a.ParsingErrorCodes.ForInOfLoopInitializer,h),y=this.finalize({type:a.Syntax.VariableDeclaration,declarations:g,kind:"var",...this.getItemLocation(h)}),this.readNextRawToken(),u=this.parseExpression()):(this.matchKeyword(a.Keywords.In)&&
this.throwError(a.ParsingErrorCodes.InvalidLeftHandSideInForIn,h),c=this.finalize({type:a.Syntax.VariableDeclaration,declarations:g,kind:"var",...this.getItemLocation(h)}),this.expectPunctuator(";"))}else h=this.context.isAssignmentTarget,g=this.captureStartMarker(),c=this.inheritCoverGrammar(this.parseAssignmentExpression),this.matchKeyword(a.Keywords.In)?(this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInForIn,g),c.type!==a.Syntax.Identifier&&this.throwError(a.ParsingErrorCodes.InvalidLeftHandSideInForIn,
g),this.readNextRawToken(),y=c,u=this.parseExpression(),c=null):(this.context.isAssignmentTarget=h,this.expectPunctuator(";"));y||(this.matchPunctuator(";")||(d=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(k=this.isolateCoverGrammar(this.parseExpression)));this.expectPunctuator(")");h=this.withBlockContext(x.ForLoop,()=>this.isolateCoverGrammar(this.parseStatement));return y&&u?this.finalize({type:a.Syntax.ForInStatement,left:y,right:u,body:h,
...this.getItemLocation(D)}):this.finalize({type:a.Syntax.ForStatement,init:c,test:d,update:k,body:h,...this.getItemLocation(D)})};n.parseContinueStatement=function(){const c=this.captureStartMarker();this.expectKeyword(a.Keywords.Continue);this.consumeSemicolon();return this.finalize({type:a.Syntax.ContinueStatement,...this.getItemLocation(c)})};n.parseBreakStatement=function(){const c=this.captureStartMarker();this.expectKeyword(a.Keywords.Break);this.consumeSemicolon();return this.finalize({type:a.Syntax.BreakStatement,
...this.getItemLocation(c)})};n.parseReturnStatement=function(){const c=this.captureStartMarker();this.expectKeyword(a.Keywords.Return);const d=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||this.rawToken.type===a.TokenType.EOF)&&this.rawToken.type!==a.TokenType.StringLiteral&&this.rawToken.type!==a.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize({type:a.Syntax.ReturnStatement,argument:d,...this.getItemLocation(c)})};n.parseStatement=
function(){switch(this.rawToken.type){case a.TokenType.BooleanLiteral:case a.TokenType.NullLiteral:case a.TokenType.NumericLiteral:case a.TokenType.StringLiteral:case a.TokenType.Template:case a.TokenType.Identifier:return this.parseExpressionStatement();case a.TokenType.Punctuator:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case a.TokenType.Keyword:switch(this.rawToken.value.toLowerCase()){case a.Keywords.Break:return this.parseBreakStatement();
case a.Keywords.Continue:return this.parseContinueStatement();case a.Keywords.For:return this.parseForStatement();case a.Keywords.Function:return this.parseFunctionDeclaration();case a.Keywords.If:return this.parseIfStatement();case a.Keywords.Return:return this.parseReturnStatement();case a.Keywords.Var:return this.parseVariableDeclaration();case a.Keywords.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};
n.parseFormalParameters=function(){const c=[];this.expectPunctuator("(");if(!this.matchPunctuator(")"))for(;this.rawToken.type!==a.TokenType.EOF;){const d=this.parseIdentifier();d||this.throwUnexpectedToken({rawToken:this.rawToken,code:a.ParsingErrorCodes.IdentiferExpected});c.push(d);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return c};n.parseFunctionDeclaration=function(){(this.context.blockContext&x.Function)===x.Function&&
this.throwUnexpectedToken({code:a.ParsingErrorCodes.NoFunctionInsideFunction});(this.context.blockContext&x.WhileLoop)!==x.WhileLoop&&(this.context.blockContext&x.IfClause)!==x.IfClause||this.throwUnexpectedToken({code:a.ParsingErrorCodes.NoFunctionInsideBlock});const c=this.captureStartMarker();this.expectKeyword(a.Keywords.Function);const d=this.parseIdentifier();d||this.throwUnexpectedToken({code:a.ParsingErrorCodes.InvalidFunctionIdentifier});const k=this.parseFormalParameters(),y=this.context.blockContext;
this.context.blockContext|=x.Function;const u=this.parseBlock();this.context.blockContext=y;return this.finalize({type:a.Syntax.FunctionDeclaration,id:d,params:k,body:u,...this.getItemLocation(c)})};n.parseScript=function(){var c=this.captureStartMarker();const d=this.parseStatements();c=this.finalize({type:a.Syntax.Program,body:d,...this.getItemLocation(c)});this.options.tokens&&(c.tokens=this.tokens);this.options.tolerant&&(c.errors=this.errorHandler.errors);return c};n.parseExportDeclaration=function(){this.context.blockContext!==
x.None&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.ModuleExportRootOnly});let c=null;const d=this.captureStartMarker();this.expectKeyword(a.Keywords.Export);this.matchKeyword(a.Keywords.Var)?c=this.parseVariableDeclaration():this.matchKeyword("function")?c=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:a.ParsingErrorCodes.InvalidExpression});return this.finalize({type:a.Syntax.ExportNamedDeclaration,declaration:c,specifiers:[],source:null,...this.getItemLocation(d)})};n.parseModuleSpecifier=
function(){const c=this.captureStartMarker(),d=this.rawToken;if(d.type===a.TokenType.StringLiteral)return this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:d.value,raw:this.getSourceValue(d),isString:!0,...this.getItemLocation(c)});this.throwError(a.ParsingErrorCodes.InvalidModuleUri,c)};n.parseDefaultSpecifier=function(){const c=this.captureStartMarker(),d=this.parseIdentifier();d||this.throwUnexpectedToken({code:a.ParsingErrorCodes.IdentiferExpected});return this.finalize({type:a.Syntax.ImportDefaultSpecifier,
local:d,...this.getItemLocation(c)})};n.parseImportDeclaration=function(){this.context.blockContext!==x.None&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.ModuleImportRootOnly});const c=this.captureStartMarker();this.expectKeyword(a.Keywords.Import);const d=this.parseDefaultSpecifier();this.expectContextualKeyword(a.Keywords.From);const k=this.parseModuleSpecifier();return this.finalize({type:a.Syntax.ImportDeclaration,specifiers:[d],source:k,...this.getItemLocation(c)})};return K._createClass(m)}();
t.Parser=l;t.binaryOperatorPrecedence=p;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/comment-handler":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./types"],function(t,K,B){function w(a,C){return C?C.loc.end.line===a.loc.start.line&&C.loc.end.column<=a.loc.start.column:!1}let f=function(){function a(){this.comments=[];this._nodeStack=[];this._newComments=[]}var C=a.prototype;C.insertInnerComments=function(E){if(B.isBlockStatement(E)&&0===
E.body.length){var p=[];for(let x=this._newComments.length-1;0<=x;--x){const z=this._newComments[x];E.range[1]>=z.range[0]&&(p.unshift(z),this._newComments.splice(x,1))}p.length&&(E.innerComments=p)}};C.attachTrailingComments=function(E){if(E){var p=this._nodeStack[this._nodeStack.length-1];if(B.isBlockStatement(E)&&p.range[0]>=E.range[0]&&p.range[1]<=E.range[1])for(var x=this._newComments.length-1;0<=x;--x){var z=this._newComments[x];z.range[0]>=E.range[0]&&z.range[1]<=E.range[1]&&(p.trailingComments=
[...(p.trailingComments??[]),z],this._newComments.splice(x,1))}x=[];if(0<this._newComments.length)for(z=this._newComments.length-1;0<=z;--z){const l=this._newComments[z];w(l,p)?(p.trailingComments=[...(p.trailingComments??[]),l],this._newComments.splice(z,1)):w(l,E)&&(x.unshift(l),this._newComments.splice(z,1))}p?.trailingComments&&w(p.trailingComments[0],E)&&(x=[...x,...p.trailingComments],delete p.trailingComments);0<x.length&&(E.trailingComments=x)}};C.attachLeadingComments=function(E){if(E){for(var p;0<
this._nodeStack.length;){var x=this._nodeStack[this._nodeStack.length-1];if(E.range[0]<=x.range[0])p=x,this._nodeStack.pop();else break}x=[];var z=[];if(p){var l=p.leadingComments?.length??0;for(--l;0<=l;--l){const m=p.leadingComments[l];E.range[0]>=m.range[1]?(x.unshift(m),p.leadingComments.splice(l,1)):B.isVariableDeclarator(E)&&!B.isBlockComment(m)&&(z.unshift(m),p.leadingComments.splice(l,1))}0===p.leadingComments?.length&&delete p.leadingComments;x.length&&(E.leadingComments=x);z.length&&(E.trailingComments=
[...z,...(E.trailingComments??[])])}else{for(p=this._newComments.length-1;0<=p;--p)z=this._newComments[p],E.range[0]>=z.range[0]&&(x.unshift(z),this._newComments.splice(p,1));x.length&&(E.leadingComments=x)}}};C.attachComments=function(E){if(B.isProgram(E)&&0<E.body.length){const p=this._nodeStack[this._nodeStack.length-1];p?(p.trailingComments=[...(p.trailingComments??[]),...this._newComments],this._newComments.length=0,this._nodeStack.pop()):(E.trailingComments=[...this._newComments],this._newComments.length=
0)}else this.attachTrailingComments(E),this.attachLeadingComments(E),this.insertInnerComments(E),this._nodeStack.push(E)};C.collectComment=function(E){this.comments.push(E);this._newComments.push(E)};return K._createClass(a)}();t.CommentHandler=f;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/types":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(t,K){t.Keywords=void 0;(function(f){f.Break="break";f.Continue="continue";f.Else="else";
f.False="false";f.For="for";f.From="from";f.Function="function";f.If="if";f.Import="import";f.Export="export";f.In="in";f.Null="null";f.Return="return";f.True="true";f.Var="var";f.While="while"})(t.Keywords||(t.Keywords={}));t.Syntax=void 0;(function(f){f.AssignmentExpression="AssignmentExpression";f.ArrayExpression="ArrayExpression";f.BlockComment="BlockComment";f.BlockStatement="BlockStatement";f.BinaryExpression="BinaryExpression";f.BreakStatement="BreakStatement";f.CallExpression="CallExpression";
f.ContinueStatement="ContinueStatement";f.EmptyStatement="EmptyStatement";f.ExpressionStatement="ExpressionStatement";f.ExportNamedDeclaration="ExportNamedDeclaration";f.ExportSpecifier="ExportSpecifier";f.ForStatement="ForStatement";f.ForInStatement="ForInStatement";f.FunctionDeclaration="FunctionDeclaration";f.Identifier="Identifier";f.IfStatement="IfStatement";f.ImportDeclaration="ImportDeclaration";f.ImportDefaultSpecifier="ImportDefaultSpecifier";f.LineComment="LineComment";f.Literal="Literal";
f.LogicalExpression="LogicalExpression";f.MemberExpression="MemberExpression";f.ObjectExpression="ObjectExpression";f.Program="Program";f.Property="Property";f.ReturnStatement="ReturnStatement";f.TemplateElement="TemplateElement";f.TemplateLiteral="TemplateLiteral";f.UnaryExpression="UnaryExpression";f.UpdateExpression="UpdateExpression";f.VariableDeclaration="VariableDeclaration";f.VariableDeclarator="VariableDeclarator";f.WhileStatement="WhileStatement"})(t.Syntax||(t.Syntax={}));t.TokenType=void 0;
(function(f){f[f.Unknown=0]="Unknown";f[f.BooleanLiteral=1]="BooleanLiteral";f[f.EOF=2]="EOF";f[f.Identifier=3]="Identifier";f[f.Keyword=4]="Keyword";f[f.NullLiteral=5]="NullLiteral";f[f.NumericLiteral=6]="NumericLiteral";f[f.Punctuator=7]="Punctuator";f[f.StringLiteral=8]="StringLiteral";f[f.Template=10]="Template"})(t.TokenType||(t.TokenType={}));t.ParsingErrorCodes=void 0;(function(f){f.InvalidModuleUri="InvalidModuleUri";f.ForInOfLoopInitializer="ForInOfLoopInitializer";f.IdentiferExpected="IdentiferExpected";
f.InvalidEscapedReservedWord="InvalidEscapedReservedWord";f.InvalidExpression="InvalidExpression";f.InvalidFunctionIdentifier="InvalidFunctionIdentifier";f.InvalidHexEscapeSequence="InvalidHexEscapeSequence";f.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment";f.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn";f.InvalidTemplateHead="InvalidTemplateHead";f.InvalidVariableAssignment="InvalidVariableAssignment";f.KeyMustBeString="KeyMustBeString";f.NoFunctionInsideBlock="NoFunctionInsideBlock";
f.NoFunctionInsideFunction="NoFunctionInsideFunction";f.ModuleExportRootOnly="ModuleExportRootOnly";f.ModuleImportRootOnly="ModuleImportRootOnly";f.PunctuatorExpected="PunctuatorExpected";f.TemplateOctalLiteral="TemplateOctalLiteral";f.UnexpectedBoolean="UnexpectedBoolean";f.UnexpectedEndOfScript="UnexpectedEndOfScript";f.UnexpectedIdentifier="UnexpectedIdentifier";f.UnexpectedKeyword="UnexpectedKeyword";f.UnexpectedNull="UnexpectedNull";f.UnexpectedNumber="UnexpectedNumber";f.UnexpectedPunctuator=
"UnexpectedPunctuator";f.UnexpectedString="UnexpectedString";f.UnexpectedTemplate="UnexpectedTemplate";f.UnexpectedToken="UnexpectedToken"})(t.ParsingErrorCodes||(t.ParsingErrorCodes={}));const B={[t.ParsingErrorCodes.InvalidModuleUri]:"Module uri must be a text literal.",[t.ParsingErrorCodes.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[t.ParsingErrorCodes.IdentiferExpected]:"'${value}' is an invalid identifier.",[t.ParsingErrorCodes.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",
[t.ParsingErrorCodes.InvalidExpression]:"Invalid expression.",[t.ParsingErrorCodes.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[t.ParsingErrorCodes.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[t.ParsingErrorCodes.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[t.ParsingErrorCodes.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",[t.ParsingErrorCodes.InvalidTemplateHead]:"Invalid template structure.",[t.ParsingErrorCodes.InvalidVariableAssignment]:"Invalid variable assignment.",
[t.ParsingErrorCodes.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[t.ParsingErrorCodes.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[t.ParsingErrorCodes.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[t.ParsingErrorCodes.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[t.ParsingErrorCodes.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",
[t.ParsingErrorCodes.PunctuatorExpected]:"'${value}' expected.",[t.ParsingErrorCodes.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[t.ParsingErrorCodes.UnexpectedBoolean]:"Unexpected boolean literal.",[t.ParsingErrorCodes.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[t.ParsingErrorCodes.UnexpectedIdentifier]:"Unexpected identifier.",[t.ParsingErrorCodes.UnexpectedKeyword]:"Unexpected keyword.",[t.ParsingErrorCodes.UnexpectedNull]:"Unexpected null literal.",
[t.ParsingErrorCodes.UnexpectedNumber]:"Unexpected number.",[t.ParsingErrorCodes.UnexpectedPunctuator]:"Unexpected ponctuator.",[t.ParsingErrorCodes.UnexpectedString]:"Unexpected text literal.",[t.ParsingErrorCodes.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[t.ParsingErrorCodes.UnexpectedToken]:"Unexpected token '${value}'."};let w=function(f){function a({code:C,index:E,line:p,column:x,len:z=0,description:l,data:m}){var n=f.call(this,`${l??C}`)||this;n.declaredRootClass="esri.arcade.lib.parsingerror";
n.name="ParsingError";n.code=C;n.index=E;n.line=p;n.column=x;n.len=z;n.data=m;n.description=l;n.range={start:{line:p,column:x-1},end:{line:p,column:x+z}};Error.captureStackTrace?.(K._assertThisInitialized(n),a);return n}K._inherits(a,f);return K._createClass(a)}(K._wrapNativeSuper(Error));t.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");t.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");t.LogicalOperators=
["||","\x26\x26"];t.OperatorPrecedence={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10};t.ParsingError=w;t.ParsingErrorMessages=B;t.TokenNames="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" ");t.UnaryOperators=["-","+","!","~"];t.UpdateOperators=["++","--"];t.isArrayExpression=function(f){return f?.type===
t.Syntax.ArrayExpression};t.isAssignmentExpression=function(f){return f?.type===t.Syntax.AssignmentExpression};t.isBinaryExpression=function(f){return f?.type===t.Syntax.BinaryExpression};t.isBlockComment=function(f){return f?.type===t.Syntax.BlockComment};t.isBlockStatement=function(f){return f?.type===t.Syntax.BlockStatement};t.isBreakStatement=function(f){return f?.type===t.Syntax.BreakStatement};t.isCallExpression=function(f){return f?.type===t.Syntax.CallExpression};t.isContinueStatement=function(f){return f?.type===
t.Syntax.ContinueStatement};t.isEmptyStatement=function(f){return f?.type===t.Syntax.EmptyStatement};t.isExpression=function(f){switch(f?.type){case t.Syntax.ArrayExpression:case t.Syntax.AssignmentExpression:case t.Syntax.BinaryExpression:case t.Syntax.CallExpression:case t.Syntax.Identifier:case t.Syntax.Literal:case t.Syntax.LogicalExpression:case t.Syntax.MemberExpression:case t.Syntax.ObjectExpression:case t.Syntax.TemplateLiteral:case t.Syntax.UpdateExpression:case t.Syntax.UnaryExpression:return!0;
default:return!1}};t.isExpressionStatement=function(f){return f?.type===t.Syntax.ExpressionStatement};t.isForInStatement=function(f){return f?.type===t.Syntax.ForInStatement};t.isForStatement=function(f){return f?.type===t.Syntax.ForStatement};t.isFunctionDeclaration=function(f){return f?.type===t.Syntax.FunctionDeclaration};t.isIdentifier=function(f){return f?.type===t.Syntax.Identifier};t.isIfStatement=function(f){return f?.type===t.Syntax.IfStatement};t.isLiteral=function(f){return f?.type===t.Syntax.Literal};
t.isLogicalExpression=function(f){return f?.type===t.Syntax.LogicalExpression};t.isMemberExpression=function(f){return f?.type===t.Syntax.MemberExpression};t.isObjectExpression=function(f){return f?.type===t.Syntax.ObjectExpression};t.isProgram=function(f){return f?.type===t.Syntax.Program};t.isProperty=function(f){return f?.type===t.Syntax.Property};t.isReturnStatement=function(f){return f?.type===t.Syntax.ReturnStatement};t.isStatement=function(f){switch(f?.type){case t.Syntax.BlockStatement:case t.Syntax.BreakStatement:case t.Syntax.ContinueStatement:case t.Syntax.EmptyStatement:case t.Syntax.ExpressionStatement:case t.Syntax.ForInStatement:case t.Syntax.ForStatement:case t.Syntax.FunctionDeclaration:case t.Syntax.IfStatement:case t.Syntax.ReturnStatement:case t.Syntax.VariableDeclaration:return!0;
default:return!1}};t.isTemplateElement=function(f){return f?.type===t.Syntax.TemplateElement};t.isTemplateLiteral=function(f){return f?.type===t.Syntax.TemplateLiteral};t.isUnaryExpression=function(f){return f?.type===t.Syntax.UnaryExpression};t.isUpdateExpression=function(f){return f?.type===t.Syntax.UpdateExpression};t.isVariableDeclaration=function(f){return f?.type===t.Syntax.VariableDeclaration};t.isVariableDeclarator=function(f){return f?.type===t.Syntax.VariableDeclarator};Object.defineProperty(t,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/error-handler":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./types"],function(t,K,B){function w(a,C){a=B.ParsingErrorMessages[a];return C?a.replaceAll(/\${(.*?)}/g,(E,p)=>C[p]?.toString()??""):a}let f=function(){function a(E=!1){this.tolerant=E;this.errors=[]}var C=a.prototype;C.recordError=function(E){this.errors.push(E)};C.tolerate=function(E){if(this.tolerant)this.recordError(E);else throw E;};C.throwError=function(E){E.description=
E.description??w(E.code,E.data);throw new B.ParsingError(E);};C.tolerateError=function(E){E.description=E.description??w(E.code,E.data);E=new B.ParsingError(E);if(this.tolerant)this.recordError(E);else throw E;};return K._createClass(a)}();t.ErrorHandler=f;t.formatErrorDescription=w;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/scanner":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./assert","./character","./types"],function(t,K,B,w,f){const a=
[[],[],[]];f.UpdateOperators.forEach(E=>a[E.length-1].push(E));f.UnaryOperators.forEach(E=>a[E.length-1].push(E));f.LogicalOperators.forEach(E=>a[E.length-1].push(E));f.AssignmentOperators.forEach(E=>a[E.length-1].push(E));f.BinaryOperators.forEach(E=>a[E.length-1].push(E));let C=function(){function E(x,z){this.source=x;this.errorHandler=z;this._length=x.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}var p=E.prototype;p.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,
lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};p.restoreState=function(x){this.index=x.index;this.lineNumber=x.lineNumber;this.lineStart=x.lineStart;this.curlyStack=x.curlyStack};p.eof=function(){return this.index>=this._length};p.throwUnexpectedToken=function(x=f.ParsingErrorCodes.UnexpectedToken){this.errorHandler.throwError({code:x,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};p.tolerateUnexpectedToken=function(x=f.ParsingErrorCodes.UnexpectedToken){this.errorHandler.tolerateError({code:x,
index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};p.skipSingleLineComment=function(x){const z=[],l=this.index-x,m={start:{line:this.lineNumber,column:this.index-this.lineStart-x},end:{line:0,column:0}};for(;!this.eof();){const n=this.source.charCodeAt(this.index);++this.index;if(w.Character.isLineTerminator(n))return m&&(m.end={line:this.lineNumber,column:this.index-this.lineStart-1},z.push({multiLine:!1,start:l+x,end:this.index-1,range:[l,this.index-1],loc:m})),13===n&&
10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,z}m&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},z.push({multiLine:!1,start:l+x,end:this.index,range:[l,this.index],loc:m}));return z};p.skipMultiLineComment=function(){const x=[],z=this.index-2,l={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){const m=this.source.charCodeAt(this.index);if(w.Character.isLineTerminator(m))13===
m&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===m&&47===this.source.charCodeAt(this.index+1))return this.index+=2,l&&(l.end={line:this.lineNumber,column:this.index-this.lineStart},x.push({multiLine:!0,start:z+2,end:this.index-2,range:[z,this.index],loc:l})),x;++this.index}}l&&(l.end={line:this.lineNumber,column:this.index-this.lineStart},x.push({multiLine:!0,start:z+2,end:this.index,range:[z,this.index],loc:l}));this.tolerateUnexpectedToken();
return x};p.scanComments=function(){let x=[];for(;!this.eof();){var z=this.source.charCodeAt(this.index);if(w.Character.isWhiteSpace(z))++this.index;else if(w.Character.isLineTerminator(z))++this.index,13===z&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index;else if(47===z)if(z=this.source.charCodeAt(this.index+1),47===z)this.index+=2,z=this.skipSingleLineComment(2),x=[...x,...z];else if(42===z)this.index+=2,z=this.skipMultiLineComment(),x=[...x,...z];
else break;else break}return x};p.isKeyword=function(x){x=x.toLowerCase();switch(x.length){case 2:return x===f.Keywords.If||x===f.Keywords.In;case 3:return x===f.Keywords.Var||x===f.Keywords.For;case 4:return x===f.Keywords.Else;case 5:return x===f.Keywords.Break||x===f.Keywords.While;case 6:return x===f.Keywords.Return||x===f.Keywords.Import||x===f.Keywords.Export;case 8:return x===f.Keywords.Function||x===f.Keywords.Continue;default:return!1}};p.codePointAt=function(x){let z=this.source.charCodeAt(x);
55296<=z&&56319>=z&&(x=this.source.charCodeAt(x+1),56320<=x&&57343>=x&&(z=1024*(z-55296)+x-56320+65536));return z};p.scanHexEscape=function(x){x="u"===x?4:2;let z=0;for(let l=0;l<x;++l)if(!this.eof()&&w.Character.isHexDigit(this.source.charCodeAt(this.index)))z=16*z+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(z)};p.scanUnicodeCodePointEscape=function(){let x=this.source[this.index],z=0;for("}"===x&&this.throwUnexpectedToken();!this.eof();){x=
this.source[this.index++];if(!w.Character.isHexDigit(x.charCodeAt(0)))break;z=16*z+"0123456789abcdef".indexOf(x.toLowerCase())}(1114111<z||"}"!==x)&&this.throwUnexpectedToken();return w.Character.fromCodePoint(z)};p.getIdentifier=function(){const x=this.index++;for(;!this.eof();){const z=this.source.charCodeAt(this.index);if(92===z||55296<=z&&57343>z)return this.index=x,this.getComplexIdentifier();if(w.Character.isIdentifierPart(z))++this.index;else break}return this.source.slice(x,this.index)};p.getComplexIdentifier=
function(){let x=this.codePointAt(this.index),z=w.Character.fromCodePoint(x);this.index+=z.length;let l;92===x&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,l=this.scanUnicodeCodePointEscape()):(l=this.scanHexEscape("u"),null!==l&&"\\"!==l&&w.Character.isIdentifierStart(l.charCodeAt(0))||this.throwUnexpectedToken()),z=l);for(;!this.eof();){x=this.codePointAt(this.index);if(!w.Character.isIdentifierPart(x))break;l=w.Character.fromCodePoint(x);
z+=l;this.index+=l.length;92===x&&(z=z.substring(0,z.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,l=this.scanUnicodeCodePointEscape()):(l=this.scanHexEscape("u"),null!==l&&"\\"!==l&&w.Character.isIdentifierPart(l.charCodeAt(0))||this.throwUnexpectedToken()),z+=l)}return z};p.octalToDecimal=function(x){let z="0"!==x,l="01234567".indexOf(x);!this.eof()&&w.Character.isOctalDigit(this.source.charCodeAt(this.index))&&
(z=!0,l=8*l+"01234567".indexOf(this.source[this.index++]),"0123".includes(x)&&!this.eof()&&w.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(l=8*l+"01234567".indexOf(this.source[this.index++])));return{code:l,octal:z}};p.scanIdentifier=function(){let x;const z=this.index,l=92===this.source.charCodeAt(z)?this.getComplexIdentifier():this.getIdentifier();x=1===l.length?f.TokenType.Identifier:this.isKeyword(l)?f.TokenType.Keyword:l.toLowerCase()===f.Keywords.Null?f.TokenType.NullLiteral:
l.toLowerCase()===f.Keywords.True||l.toLowerCase()===f.Keywords.False?f.TokenType.BooleanLiteral:f.TokenType.Identifier;if(x!==f.TokenType.Identifier&&z+l.length!==this.index){const m=this.index;this.index=z;this.tolerateUnexpectedToken(f.ParsingErrorCodes.InvalidEscapedReservedWord);this.index=m}return{type:x,value:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:z,end:this.index}};p.scanPunctuator=function(){const x=this.index;let z=this.source[this.index];switch(z){case "(":case "{":"{"===
z&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:for(let l=a.length;0<l;l--)if(z=this.source.substring(this.index,this.index+l),a[l-1].includes(z)){this.index+=l;break}}this.index===x&&this.throwUnexpectedToken();return{type:f.TokenType.Punctuator,value:z,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}};
p.scanHexLiteral=function(x){let z="";for(;!this.eof()&&w.Character.isHexDigit(this.source.charCodeAt(this.index));)z+=this.source[this.index++];0===z.length&&this.throwUnexpectedToken();w.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:f.TokenType.NumericLiteral,value:parseInt("0x"+z,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}};p.scanBinaryLiteral=function(x){let z="";for(;!this.eof();){var l=this.source[this.index];
if("0"!==l&&"1"!==l)break;z+=this.source[this.index++]}0===z.length&&this.throwUnexpectedToken();this.eof()||(l=this.source.charCodeAt(this.index),(w.Character.isIdentifierStart(l)||w.Character.isDecimalDigit(l))&&this.throwUnexpectedToken());return{type:f.TokenType.NumericLiteral,value:parseInt(z,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}};p.scanOctalLiteral=function(x,z){let l="",m=!1;w.Character.isOctalDigit(x.charCodeAt(0))?(m=!0,l="0"+this.source[this.index++]):
++this.index;for(;!this.eof()&&w.Character.isOctalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];m||0!==l.length||this.throwUnexpectedToken();(w.Character.isIdentifierStart(this.source.charCodeAt(this.index))||w.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:f.TokenType.NumericLiteral,value:parseInt(l,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:z,end:this.index}};p.scanNumericLiteral=function(){const x=
this.index;let z=this.source[x];B.assert(w.Character.isDecimalDigit(z.charCodeAt(0))||"."===z,"Numeric literal must start with a decimal digit or a decimal point");let l="";if("."!==z){l=this.source[this.index++];z=this.source[this.index];if("0"===l){if("x"===z||"X"===z)return++this.index,this.scanHexLiteral(x);if("b"===z||"B"===z)return++this.index,this.scanBinaryLiteral(x);if("o"===z||"O"===z)return this.scanOctalLiteral(z,x)}for(;w.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=
this.source[this.index++];z=this.source[this.index]}if("."===z){for(l+=this.source[this.index++];w.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];z=this.source[this.index]}if("e"===z||"E"===z){l+=this.source[this.index++];z=this.source[this.index];if("+"===z||"-"===z)l+=this.source[this.index++];if(w.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;w.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];
else this.throwUnexpectedToken()}w.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:f.TokenType.NumericLiteral,value:parseFloat(l),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}};p.scanStringLiteral=function(){const x=this.index;let z=this.source[x];B.assert("'"===z||'"'===z,"String literal must starts with a quote");++this.index;let l="";for(;!this.eof();){var m=this.source[this.index++];if(m===z){z="";break}if("\\"===
m)if((m=this.source[this.index++])&&w.Character.isLineTerminator(m.charCodeAt(0)))++this.lineNumber,"\r"===m&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(m){case "u":"{"===this.source[this.index]?(++this.index,l+=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape(m),null===m&&this.throwUnexpectedToken(),l+=m);break;case "x":m=this.scanHexEscape(m);null===m&&this.throwUnexpectedToken(f.ParsingErrorCodes.InvalidHexEscapeSequence);l+=m;break;case "n":l+="\n";
break;case "r":l+="\r";break;case "t":l+="\t";break;case "b":l+="\b";break;case "f":l+="\f";break;case "v":l+="\v";break;case "8":case "9":l+=m;this.tolerateUnexpectedToken();break;default:m&&w.Character.isOctalDigit(m.charCodeAt(0))?(m=this.octalToDecimal(m),l+=String.fromCharCode(m.code)):l+=m}else if(w.Character.isLineTerminator(m.charCodeAt(0)))break;else l+=m}""!==z&&(this.index=x,this.throwUnexpectedToken());return{type:f.TokenType.StringLiteral,value:l,lineNumber:this.lineNumber,lineStart:this.lineStart,
start:x,end:this.index}};p.scanTemplate=function(){let x="",z=!1;const l=this.index,m="`"===this.source[l];let n=!1,c=2;for(++this.index;!this.eof();){var d=this.source[this.index++];if("`"===d){c=1;z=n=!0;break}if("$"===d){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;z=!0;break}x+=d}else if("\\"===d)if(d=this.source[this.index++],w.Character.isLineTerminator(d.charCodeAt(0)))++this.lineNumber,"\r"===d&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;
else switch(d){case "n":x+="\n";break;case "r":x+="\r";break;case "t":x+="\t";break;case "u":if("{"===this.source[this.index])++this.index,x+=this.scanUnicodeCodePointEscape();else{const k=this.index,y=this.scanHexEscape(d);null!==y?x+=y:(this.index=k,x+=d)}break;case "x":d=this.scanHexEscape(d);null===d&&this.throwUnexpectedToken(f.ParsingErrorCodes.InvalidHexEscapeSequence);x+=d;break;case "b":x+="\b";break;case "f":x+="\f";break;case "v":x+="\v";break;default:"0"===d?(w.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken(f.ParsingErrorCodes.TemplateOctalLiteral),x+="\x00"):w.Character.isOctalDigit(d.charCodeAt(0))?this.throwUnexpectedToken(f.ParsingErrorCodes.TemplateOctalLiteral):x+=d}else w.Character.isLineTerminator(d.charCodeAt(0))?(++this.lineNumber,"\r"===d&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,x+="\n"):x+=d}z||this.throwUnexpectedToken();m||this.curlyStack.pop();return{type:f.TokenType.Template,value:this.source.slice(l+1,this.index-c),cooked:x,head:m,
tail:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};p.lex=function(){if(this.eof())return{type:f.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const x=this.source.charCodeAt(this.index);return w.Character.isIdentifierStart(x)?this.scanIdentifier():40===x||41===x||59===x?this.scanPunctuator():39===x||34===x?this.scanStringLiteral():46===x?w.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():
this.scanPunctuator():w.Character.isDecimalDigit(x)?this.scanNumericLiteral():96===x||125===x&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=x&&57343>x&&w.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return K._createClass(E)}();t.Scanner=C;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/assert":function(){define(["exports"],function(t){t.assert=function(K,B){if(!K)throw Error("ASSERT: "+
B);};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/character":function(){define(["exports"],function(t){var K=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
B=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
const w={fromCodePoint(f){return 65536>f?String.fromCharCode(f):String.fromCharCode(55296+(f-65536>>10))+String.fromCharCode(56320+(f-65536&1023))},isWhiteSpace(f){return 32===f||9===f||11===f||12===f||160===f||5760<=f&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(f)},isLineTerminator(f){return 10===f||13===f||8232===f||8233===f},isIdentifierStart(f){return 36===f||95===f||65<=f&&90>=f||97<=f&&122>=f||92===f||128<=f&&K.test(w.fromCodePoint(f))},isIdentifierPart(f){return 36===
f||95===f||65<=f&&90>=f||97<=f&&122>=f||48<=f&&57>=f||92===f||128<=f&&B.test(w.fromCodePoint(f))},isDecimalDigit(f){return 48<=f&&57>=f},isHexDigit(f){return 48<=f&&57>=f||65<=f&&70>=f||97<=f&&102>=f},isOctalDigit(f){return 48<=f&&55>=f}};t.Character=w;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/tokenizer":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./error-handler","./scanner","./types"],function(t,K,B,w,f){let a=function(){function C(p,
x){this.errorHandler=new B.ErrorHandler;this.errorHandler.tolerant=x?"boolean"===typeof x.tolerant&&x.tolerant:!1;this.scanner=new w.Scanner(p,this.errorHandler);this.trackComments=x?"boolean"===typeof x.comment&&x.comment:!1;this.buffer=[]}var E=C.prototype;E.errors=function(){return this.errorHandler.errors};E.getNextToken=function(){if(0===this.buffer.length){var p=this.scanner.scanComments();this.trackComments&&p&&p.forEach(x=>{const z=this.scanner.source.slice(x.start,x.end);this.buffer.push({type:x.multiLine?
f.Syntax.BlockComment:f.Syntax.LineComment,value:z,range:x.range,loc:x.loc})});if(!this.scanner.eof()){p={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};const x=this.scanner.lex(),z={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};p={type:f.TokenNames[x.type],value:this.scanner.source.slice(x.start,x.end),range:[x.start,x.end],loc:{start:p,end:z}};this.buffer.push(p)}}return this.buffer.shift()};return K._createClass(C)}();t.Tokenizer=
a;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],function(t){let K=function(){function w(a){const C=this;C._keys=[];C._values=[];C.length=0;a&&a.forEach(E=>{C.set(E[0],E[1])})}var f=w.prototype;f.entries=function(){return[].slice.call(this.keys().map((a,C)=>[a,this._values[C]]))};f.keys=function(){return[].slice.call(this._keys)};f.values=function(){return[].slice.call(this._values)};
f.has=function(a){return this._keys.includes(a)};f.get=function(a){a=this._keys.indexOf(a);return-1<a?this._values[a]:null};f.deepGet=function(a){if(!a||!a.length)return null;const C=(E,p)=>null==E?null:p.length?C(E instanceof w?E.get(p[0]):E[p[0]],p.slice(1)):E;return C(this.get(a[0]),a.slice(1))};f.set=function(a,C){const E=this._keys.indexOf(a);-1<E?this._values[E]=C:(this._keys.push(a),this._values.push(C),this.length=this._values.length);return this};f.sortedSet=function(a,C,E,p){var x=this._keys.length;
E=E||0;p=void 0!==p?p:x-1;if(0===x)return this._keys.push(a),this._values.push(C),this;if(a===this._keys[E])return this._values.splice(E,0,C),this;if(a===this._keys[p])return this._values.splice(p,0,C),this;if(a>this._keys[p])return this._keys.splice(p+1,0,a),this._values.splice(p+1,0,C),this;if(a<this._keys[E])return this._values.splice(E,0,C),this._keys.splice(E,0,a),this;if(E>=p)return this;x=E+Math.floor((p-E)/2);return a<this._keys[x]?this.sortedSet(a,C,E,x-1):a>this._keys[x]?this.sortedSet(a,
C,x+1,p):this};f.size=function(){return this.length};f.clear=function(){this._keys.length=this.length=this._values.length=0;return this};f.delete=function(a){a=this._keys.indexOf(a);return-1<a?(this._keys.splice(a,1),this._values.splice(a,1),this.length=this._keys.length,!0):!1};f.forEach=function(a){this._keys.forEach((C,E)=>{a(this._values[E],C,E)})};f.map=function(a){return this.keys().map((C,E)=>a(this._values[E],C,E))};f.filter=function(a){const C=this;C._keys.forEach((E,p)=>{!1===a(C._values[p],
E,p)&&C.delete(E)});return this};f.clone=function(){return new w(this.entries())};return t._createClass(w)}(),B=function(){function w(a=20){this._maxEntries=a;this._values=new K}var f=w.prototype;f.delete=function(a){this._values.has(a)&&this._values.delete(a)};f.get=function(a){let C=null;this._values.has(a)&&(C=this._values.get(a),this._values.delete(a),this._values.set(a,C));return C};f.put=function(a,C){if(this._values.size()>=this._maxEntries){const E=this._values.keys()[0];this._values.delete(E)}this._values.set(a,
C)};return t._createClass(w)}();return function(){function w(a=20){this._maxEntries=a;this._cache=new B(this._maxEntries)}var f=w.prototype;f.clear=function(){this._cache=new B(this._maxEntries)};f.addToCache=function(a,C){this._cache.put(a,C)};f.removeFromCache=function(a){this._cache.delete(a)};f.getFromCache=function(a){return this._cache.get(a)};return t._createClass(w)}()})},"esri/arcade/arcadeRuntime":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../geometry/SpatialReference".split(" "),
function(t,K,B,w,f,a,C,E,p,x,z,l,m,n,c,d,k,y,u){function D(J,F){const H=[];for(let O=0;O<F.arguments.length;O++)H.push(g(J,F.arguments[O]));return H}function h(J,F,H){try{return!0===F.preparsed?H(J,null,F.arguments):H(J,F,D(J,F))}catch(O){throw O;}}function g(J,F){try{switch(F?.type){case "EmptyStatement":return p.voidOperation;case "VariableDeclarator":let xa=null===F.init?null:g(J,F.init);xa===p.voidOperation&&(xa=null);if("Identifier"!==F.id.type)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,
F);const Fa=F.id.name.toLowerCase();null!=J.localScope?J.localScope[Fa]={value:xa,valueset:!0,node:F.init}:J.globalScope[Fa]={value:xa,valueset:!0,node:F.init};return p.voidOperation;case "VariableDeclaration":for(var H=0;H<F.declarations.length;H++)g(J,F.declarations[H]);return p.voidOperation;case "ImportDeclaration":const Ia=F.specifiers[0].local.name.toLowerCase(),Aa=J.libraryResolver.loadLibrary(Ia);H=null;J.libraryResolver._moduleSingletons?.has(Aa.uri)?H=J.libraryResolver._moduleSingletons.get(Aa.uri):
(H=new ka(Aa),H.loadModule(J),J.libraryResolver._moduleSingletons?.set(Aa.uri,H));J.globalScope[Ia]={value:H,valueset:!0,node:F};return p.voidOperation;case "ExportNamedDeclaration":g(J,F.declaration);if("FunctionDeclaration"===F.declaration.type)J.exports[F.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===F.declaration.type)for(const V of F.declaration.declarations)J.exports[V.id.name.toLowerCase()]="variable";return p.voidOperation;case "BlockStatement":case "Program":a:{let V=
p.voidOperation;for(H=0;H<F.body.length;H++)if(V=g(J,F.body[H]),V instanceof p.ReturnResult||V===p.breakResult||V===p.continueResult){var O=V;break a}O=V}return O;case "FunctionDeclaration":const Ga=F.id.name.toLowerCase();J.globalScope[Ga]={valueset:!0,node:null,value:new W(F,J)};return p.voidOperation;case "ReturnStatement":if(null===F.argument)var G=new p.ReturnResult(p.voidOperation);else{var Q=g(J,F.argument);G=new p.ReturnResult(Q)}return G;case "IfStatement":{const V=g(J,F.test);if(!0===V)var P=
g(J,F.consequent);else if(!1===V)P=null!==F.alternate?g(J,F.alternate):p.voidOperation;else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,F);}return P;case "ExpressionStatement":if("AssignmentExpression"===F.expression.type||"UpdateExpression"===F.expression.type)var S=g(J,F.expression);else if("CallExpression"===F.expression.type){const V=g(J,F.expression);S=V===p.voidOperation?p.voidOperation:new p.ImplicitResult(V)}else{var da=g(J,F.expression);S=da===p.voidOperation?
p.voidOperation:new p.ImplicitResult(da)}return S;case "AssignmentExpression":H=null;var e="";if("MemberExpression"===F.left.type){H=g(J,F.left.object);if(!0===F.left.computed)e=g(J,F.left.property);else if("Identifier"===F.left.property.type)e=F.left.property.name;else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,F);const V=g(J,F.right);if(p.isArray(H))if(p.isNumber(e)){0>e&&(e=H.length+e);if(0>e||e>H.length)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,
F);if(e===H.length&&"\x3d"!==F.operator)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,F);H[e]=r(V,F.operator,H[e],F,J)}else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,F);else if(H instanceof f){if(!1===p.isString(e))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.KeyAccessorMustBeString,F);if(!0===H.hasField(e))H.setField(e,r(V,F.operator,H.field(e),F,J));else{if("\x3d"!==F.operator)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FieldNotFound,
F,{key:e});H.setField(e,r(V,F.operator,null,F,J))}}else if(p.isFeature(H)){if(!1===p.isString(e))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.KeyAccessorMustBeString,F);if(!0===H.hasField(e))H.setField(e,r(V,F.operator,H.field(e),F,J));else{if("\x3d"!==F.operator)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FieldNotFound,F,{key:e});H.setField(e,r(V,F.operator,null,F,J))}}else{if(p.isImmutableArray(H))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.Immutable,F);if(H instanceof
ka){if(!1===p.isString(e))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ModuleAccessorMustBeString,F);if(!0===H.hasGlobal(e))H.setGlobal(e,r(V,F.operator,H.global(e),F,J));else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ModuleExportNotFound,F);}else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,F);}var q=p.voidOperation}else{H=F.left.name.toLowerCase();var I=g(J,F.right);if(null!=J.localScope&&void 0!==J.localScope[H])J.localScope[H]={value:r(I,
F.operator,J.localScope[H].value,F,J),valueset:!0,node:F.right},q=p.voidOperation;else if(void 0!==J.globalScope[H])J.globalScope[H]={value:r(I,F.operator,J.globalScope[H].value,F,J),valueset:!0,node:F.right},q=p.voidOperation;else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,F);}return q;case "UpdateExpression":{let V;H=null;e="";if("MemberExpression"===F.argument.type){H=g(J,F.argument.object);!0===F.argument.computed?e=g(J,F.argument.property):"Identifier"===F.argument.property.type&&
(e=F.argument.property.name);if(p.isArray(H))if(p.isNumber(e)){0>e&&(e=H.length+e);if(0>e||e>=H.length)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,F);V=p.toNumber(H[e]);H[e]="++"===F.operator?V+1:V-1}else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,F);else if(H instanceof f){if(!1===p.isString(e))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.KeyAccessorMustBeString,F);if(!0===H.hasField(e))V=p.toNumber(H.field(e)),H.setField(e,
"++"===F.operator?V+1:V-1);else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FieldNotFound,F);}else if(p.isFeature(H)){if(!1===p.isString(e))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.KeyAccessorMustBeString,F);if(!0===H.hasField(e))V=p.toNumber(H.field(e)),H.setField(e,"++"===F.operator?V+1:V-1);else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FieldNotFound,F);}else{if(p.isImmutableArray(H))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.Immutable,
F);if(H instanceof ka){if(!1===p.isString(e))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ModuleAccessorMustBeString,F);if(!0===H.hasGlobal(e))V=p.toNumber(H.global(e)),H.setGlobal(e,"++"===F.operator?V+1:V-1);else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ModuleExportNotFound,F);}else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidParameter,F);}var M=!1===F.prefix?V:"++"===F.operator?V+1:V-1}else{H="Identifier"===F.argument.type?F.argument.name.toLowerCase():
"";if(!H)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,F);if(null!=J.localScope&&void 0!==J.localScope[H])V=p.toNumber(J.localScope[H].value),J.localScope[H]={value:"++"===F.operator?V+1:V-1,valueset:!0,node:F},M=!1===F.prefix?V:"++"===F.operator?V+1:V-1;else if(void 0!==J.globalScope[H])V=p.toNumber(J.globalScope[H].value),J.globalScope[H]={value:"++"===F.operator?V+1:V-1,valueset:!0,node:F},M=!1===F.prefix?V:"++"===F.operator?V+1:V-1;else throw new a.ArcadeExecutionError(J,
a.ExecutionErrorCodes.InvalidIdentifier,F);}}return M;case "BreakStatement":return p.breakResult;case "ContinueStatement":return p.continueResult;case "TemplateElement":return F.value?F.value.cooked:"";case "TemplateLiteral":I="";M=0;for(const V of F.quasis)if(I+=V.value?V.value.cooked:"",!1===V.tail){if(F.expressions[M]){var T=p;e=T.toString;var X=g(J,F.expressions[M]),ca=J;q=F;if(p.isFunctionParameter(X))throw new a.ArcadeExecutionError(ca,a.ExecutionErrorCodes.NoFunctionInTemplateLiteral,q);H=
e.call(T,X)}else H="";I+=H;M++}return I;case "ForStatement":null!==F.init&&g(J,F.init);ca={testResult:!0,lastAction:p.voidOperation};do b:{H=J;e=F;X=ca;if(null!==e.test){X.testResult=g(H,e.test);if(!1===X.testResult)break b;if(!0!==X.testResult)throw new a.ArcadeExecutionError(H,a.ExecutionErrorCodes.BooleanConditionRequired,e);}X.lastAction=g(H,e.body);X.lastAction===p.breakResult?X.testResult=!1:X.lastAction instanceof p.ReturnResult?X.testResult=!1:null!==e.update&&g(H,e.update)}while(!0===ca.testResult);
T=ca.lastAction instanceof p.ReturnResult?ca.lastAction:p.voidOperation;return T;case "ForInStatement":return v(J,F);case "WhileStatement":H=!0;var aa=p.voidOperation;H=g(J,F.test);if(!1===H)var ja=p.voidOperation;else{if(!0!==H)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,F);for(;!0===H;){aa=g(J,F.body);if(aa===p.breakResult)break;if(aa instanceof p.ReturnResult)break;H=g(J,F.test);if(!0!==H&&!1!==H)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,
F);}ja=aa instanceof p.ReturnResult?aa:p.voidOperation}return ja;case "Identifier":return Y(J,F);case "MemberExpression":return N(J,F);case "Literal":return F.value;case "CallExpression":a:try{if("MemberExpression"===F.callee.type){const V=g(J,F.callee.object);if(!(V instanceof ka))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FunctionNotFound,F);const ma=!1===F.callee.computed?F.callee.property.name:g(J,F.callee.property);if(!V.hasGlobal(ma))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FunctionNotFound,
F);const ta=V.global(ma);if(!p.isFunctionParameter(ta))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.CallNonFunction,F);var fa=ta.call(J,F)}else{if("Identifier"!==F.callee.type)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FunctionNotFound,F);if(null!=J.localScope&&void 0!==J.localScope[F.callee.name.toLowerCase()]){const V=J.localScope[F.callee.name.toLowerCase()];if(p.isFunctionParameter(V.value)){fa=V.value.call(J,F);break a}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.CallNonFunction,
F);}if(void 0!==J.globalScope[F.callee.name.toLowerCase()]){const V=J.globalScope[F.callee.name.toLowerCase()];if(p.isFunctionParameter(V.value)){fa=V.value.call(J,F);break a}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.CallNonFunction,F);}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FunctionNotFound,F);}}catch(V){throw V;}return fa;case "UnaryExpression":return b(J,F);case "BinaryExpression":return U(J,F);case "LogicalExpression":return ba(J,F);case "ArrayExpression":try{H=
[];for(e=0;e<F.elements.length;e++){const V=g(J,F.elements[e]);if(p.isFunctionParameter(V))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.NoFunctionInArray,F);V===p.voidOperation?H.push(null):H.push(V)}var ua=H}catch(V){throw V;}return ua;case "ObjectExpression":H={};const Ea=new Map;for(e=0;e<F.properties.length;e++){const V=g(J,F.properties[e]);if(p.isFunctionParameter(V.value))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.NoFunctionInDictionary,F);if(!1===p.isString(V.key))throw new a.ArcadeExecutionError(J,
a.ExecutionErrorCodes.KeyMustBeString,F);let ma=V.key.toString();const ta=ma.toLowerCase();Ea.has(ta)?ma=Ea.get(ta):Ea.set(ta,ma);H[ma]=V.value===p.voidOperation?null:V.value}const ya=new f(H);ya.immutable=!1;return ya;case "Property":return{key:"Identifier"===F.key.type?F.key.name:g(J,F.key),value:g(J,F.value)};default:throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.Unrecognised,F);}}catch(xa){throw a.ensureArcadeExecutionError(J,F,xa);}}function v(J,F){var H=g(J,F.right);"VariableDeclaration"===
F.left.type&&g(J,F.left);let O=null;var G="";if("VariableDeclaration"===F.left.type){var Q=F.left.declarations[0].id;"Identifier"===Q.type&&(G=Q.name)}else"Identifier"===F.left.type&&(G=F.left.name);if(!G)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,F);G=G.toLowerCase();null!=J.localScope&&void 0!==J.localScope[G]&&(O=J.localScope[G]);null===O&&void 0!==J.globalScope[G]&&(O=J.globalScope[G]);if(null===O)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,
F);if(p.isArray(H)||p.isString(H)){H=H.length;for(G=0;G<H;G++){O.value=G;Q=g(J,F.body);if(Q===p.breakResult)break;if(Q instanceof p.ReturnResult)return Q}return p.voidOperation}if(p.isImmutableArray(H)){for(G=0;G<H.length();G++){O.value=G;Q=g(J,F.body);if(Q===p.breakResult)break;if(Q instanceof p.ReturnResult)return Q}return p.voidOperation}if(H instanceof f||p.isFeature(H))for(H=H.keys(),G=0;G<H.length;G++){O.value=H[G];Q=g(J,F.body);if(Q===p.breakResult)break;if(Q instanceof p.ReturnResult)return Q}else return p.voidOperation}
function r(J,F,H,O,G){switch(F){case "\x3d":return J===p.voidOperation?null:J;case "/\x3d":return p.toNumber(H)/p.toNumber(J);case "*\x3d":return p.toNumber(H)*p.toNumber(J);case "-\x3d":return p.toNumber(H)-p.toNumber(J);case "+\x3d":return p.isString(H)||p.isString(J)?p.toString(H)+p.toString(J):p.toNumber(H)+p.toNumber(J);case "%\x3d":return p.toNumber(H)%p.toNumber(J);default:throw new a.ArcadeExecutionError(G,a.ExecutionErrorCodes.UnsupportedOperator,O);}}function N(J,F){try{const H=g(J,F.object);
if(null===H)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.MemberOfNull,F);if(!1===F.computed){if("Identifier"===F.property.type){if(H instanceof f||p.isFeature(H))return H.field(F.property.name);if(H instanceof y)return m.geometryMember(H,F.property.name,F,J);if(H instanceof ka){if(!H.hasGlobal(F.property.name))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,F);return H.global(F.property.name)}}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,
F);}let O=g(J,F.property);if(H instanceof f||p.isFeature(H)){if(p.isString(O))return H.field(O);throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,F);}if(H instanceof ka){if(p.isString(O))return H.global(O);throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,F);}if(H instanceof y){if(p.isString(O))return m.geometryMember(H,O,F,J);throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,F);}if(p.isArray(H)){if(p.isNumber(O)&&
isFinite(O)&&Math.floor(O)===O){0>O&&(O=H.length+O);if(O>=H.length||0>O)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,F);return H[O]}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,F);}if(p.isString(H)){if(p.isNumber(O)&&isFinite(O)&&Math.floor(O)===O){0>O&&(O=H.length+O);if(O>=H.length||0>O)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,F);return H[O]}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,
F);}if(p.isImmutableArray(H)&&p.isNumber(O)&&isFinite(O)&&Math.floor(O)===O){0>O&&(O=H.length()+O);if(O>=H.length()||0>O)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,F);return H.get(O)}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,F);}catch(H){throw H;}}function b(J,F){try{const H=g(J,F.argument);if(p.isBoolean(H)){if("!"===F.operator)return!H;if("-"===F.operator)return-1*p.toNumber(H);if("+"===F.operator)return 1*p.toNumber(H);if("~"===F.operator)return~p.toNumber(H);
throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.UnsupportedUnaryOperator,F);}if("~"===F.operator)return~p.toNumber(H);if("-"===F.operator)return-1*p.toNumber(H);if("+"===F.operator)return 1*p.toNumber(H);throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.UnsupportedUnaryOperator,F);}catch(H){throw H;}}function U(J,F){try{const H=[g(J,F.left),g(J,F.right)],O=H[0],G=H[1];switch(F.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return p.binaryOperator(p.toNumber(O),
p.toNumber(G),F.operator);case "\x3d\x3d":return p.equalityTest(O,G);case "!\x3d":return!p.equalityTest(O,G);case "\x3c":return p.greaterThanLessThan(O,G,F.operator);case "\x3e":return p.greaterThanLessThan(O,G,F.operator);case "\x3c\x3d":return p.greaterThanLessThan(O,G,F.operator);case "\x3e\x3d":return p.greaterThanLessThan(O,G,F.operator);case "+":return p.isString(O)||p.isString(G)?p.toString(O)+p.toString(G):p.toNumber(O)+p.toNumber(G);case "-":return p.toNumber(O)-p.toNumber(G);case "*":return p.toNumber(O)*
p.toNumber(G);case "/":return p.toNumber(O)/p.toNumber(G);case "%":return p.toNumber(O)%p.toNumber(G);default:throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.UnsupportedOperator,F);}}catch(H){throw H;}}function ba(J,F){try{const H=g(J,F.left);if(p.isBoolean(H))switch(F.operator){case "||":if(!0===H)return H;const O=g(J,F.right);if(p.isBoolean(O))return O;throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.LogicExpressionOrAnd,F);case "\x26\x26":if(!1===H)return H;const G=g(J,F.right);
if(p.isBoolean(G))return G;throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.LogicExpressionOrAnd,F);default:throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.LogicExpressionOrAnd,F);}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,F);}catch(H){throw H;}}function Y(J,F){let H;try{const O=F.name.toLowerCase();if(null!=J.localScope&&void 0!==J.localScope[O]){H=J.localScope[O];if(!0===H.valueset)return H.value;H.value=g(J,H.node);H.valueset=!0;return H.value}if(void 0!==
J.globalScope[O]){H=J.globalScope[O];if(!0===H.valueset)return H.value;H.value=g(J,H.node);H.valueset=!0;return H.value}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,F);}catch(O){throw O;}}function ia(J,F,H,O){try{const G=F.arguments,Q=g(J,G[H]);if(p.equalityTest(Q,O))return g(J,G[H+1]);const P=G.length-H;return 1===P?g(J,G[H]):2===P?null:3===P?g(J,G[H+2]):ia(J,F,H+2,O)}catch(G){throw G;}}function pa(J,F,H,O){try{const G=F.arguments;if(!0===O)return g(J,G[H+1]);if(3===
G.length-H)return g(J,G[H+2]);const Q=g(J,G[H+2]);if(!1===p.isBoolean(Q))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,G[H+2]);return pa(J,F,H+2,Q)}catch(G){throw G;}}function Ba(J,F,H,O){try{const G=J.body;if(H.length!==J.params.length)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.WrongNumberOfParameters,O);if(null!=F.localScope)for(let P=0;P<H.length;P++)F.localScope[J.params[P].name.toLowerCase()]={value:H[P],valueset:!0,node:null};const Q=g(F,G);
if(Q instanceof p.ReturnResult)return Q.value;if(Q===p.breakResult)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.UnexpectedToken,O);if(Q===p.continueResult)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.UnexpectedToken,O);return Q instanceof p.ImplicitResult?Q.value:Q}catch(G){throw G;}}function wa(J,F,H){const O=new ra;J||(J={});F||(F={});const G=new f({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});G.immutable=!1;O.textformatting=
{value:G,valueset:!0,node:null};for(const Q in F)O[Q]={value:new E.NativeFunction(F[Q]),native:!0,valueset:!0,node:null};for(const Q in J)O[Q]=J[Q]&&"esri.Graphic"===J[Q].declaredClass?{value:C.createFromGraphic(J[Q],H),valueset:!0,node:null}:{value:J[Q],valueset:!0,node:null};return O}function oa(J){console.log(J)}function la(J){const F={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:h,evaluateIdentifier:Y};for(let H=0;H<J.length;H++)J[H].registerFunctions(F);for(const H in F.functions)sa[H]=
{value:new E.NativeFunction(F.functions[H]),valueset:!0,node:null},ra.prototype[H]=sa[H];for(J=0;J<F.signatures.length;J++)x.addFunctionDeclaration(F.signatures[J],"sync")}let W=function(J){function F(O,G){var Q=J.call(this)||this;Q.definition=null;Q.context=null;Q.definition=O;Q.context=G;return Q}K._inherits(F,J);var H=F.prototype;H.createFunction=function(O){return(...G)=>{const Q={spatialReference:this.context.spatialReference,console:this.context.console,services:this.context.services,timeReference:this.context.timeReference??
null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:O.depthCounter.depth+1},globalScope:this.context.globalScope};if(64<Q.depthCounter.depth)throw new a.ArcadeExecutionError(O,a.ExecutionErrorCodes.MaximumCallDepth,null);return Ba(this.definition,Q,G,null)}};H.call=function(O,G){return h(O,G,(Q,P,S)=>{Q={spatialReference:O.spatialReference,services:O.services,globalScope:O.globalScope,
depthCounter:{depth:O.depthCounter.depth+1},libraryResolver:O.libraryResolver,exports:O.exports,timeReference:O.timeReference??null,console:O.console,lrucache:O.lrucache,interceptor:O.interceptor,localScope:{}};if(64<Q.depthCounter.depth)throw new a.ArcadeExecutionError(O,a.ExecutionErrorCodes.MaximumCallDepth,G);return Ba(this.definition,Q,S,G)})};H.marshalledCall=function(O,G,Q,P){return P(O,G,(S,da,e)=>{S={spatialReference:O.spatialReference,globalScope:Q.globalScope,services:O.services,depthCounter:{depth:O.depthCounter.depth+
1},libraryResolver:O.libraryResolver,exports:O.exports,console:O.console,timeReference:O.timeReference??null,lrucache:O.lrucache,interceptor:O.interceptor,localScope:{}};e=e.map(q=>!p.isFunctionParameter(q)||q instanceof E.ScopeMarshalledFunction?q:E.wrapModuleScopedResponse(q,O,P));return E.wrapModuleScopedResponse(Ba(this.definition,S,e,G),Q,P)})};return K._createClass(F)}(E.ArcadeFunction),ka=function(J){function F(O){return J.call(this,O)||this}K._inherits(F,J);var H=F.prototype;H.global=function(O){O=
this.executingContext.globalScope[O.toLowerCase()];O.valueset||(O.value=g(this.executingContext,O.node),O.valueset=!0);if(p.isFunctionParameter(O.value)&&!(O.value instanceof E.ScopeMarshalledFunction)){const G=new E.ScopeMarshalledFunction;G.fn=O.value;G.parameterEvaluator=h;G.context=this.executingContext;O.value=G}return O.value};H.setGlobal=function(O,G){if(p.isFunctionParameter(G))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.AssignModuleFunction,null);this.executingContext.globalScope[O.toLowerCase()]=
{value:G,valueset:!0,node:null}};H.hasGlobal=function(O){void 0===this.executingContext.exports[O]&&(O=O.toLowerCase());return void 0!==this.executingContext.exports[O]?!0:!1};H.loadModule=function(O){let G=O.spatialReference;if(null===G||void 0===G)G=new u({wkid:102100});this.moduleScope=wa({},O.customfunctions,O.timeReference);this.executingContext={spatialReference:G,globalScope:this.moduleScope,localScope:null,libraryResolver:new w.ArcadeModuleLoader(O.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),
exports:{},services:O.services,console:O.console??oa,timeReference:O.timeReference??null,lrucache:O.lrucache,interceptor:O.interceptor,depthCounter:{depth:1}};g(this.executingContext,this.source.syntax)};return K._createClass(F)}(B.ArcadeModule);const sa={};l.registerFunctions(sa,h);k.registerFunctions(sa,h);c.registerFunctions(sa,h);m.registerFunctions(sa,h);d.registerFunctions(sa,h);n.registerFunctions(sa,h);sa.iif=function(J,F){try{const H=F.arguments;p.pcCheck(null===H?[]:H,3,3,J,F);const O=g(J,
H[0]);if(!1===p.isBoolean(O))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,F);return!0===O?g(J,H[1]):g(J,H[2])}catch(H){throw H;}};sa.decode=function(J,F){try{const H=F.arguments;if(2>H.length)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.WrongNumberOfParameters,F);if(2===H.length)return g(J,H[1]);if(0===(H.length-1)%2)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.WrongNumberOfParameters,F);const O=g(J,H[0]);return ia(J,F,1,O)}catch(H){throw H;
}};sa.when=function(J,F){try{const H=F.arguments;if(3>H.length)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.WrongNumberOfParameters,F);if(0===H.length%2)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.WrongNumberOfParameters,F);const O=g(J,H[0]);if(!1===p.isBoolean(O))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,H[0]);return pa(J,F,0,O)}catch(H){throw H;}};for(const J in sa)sa[J]={value:new E.NativeFunction(sa[J]),valueset:!0,node:null};const ra=
function(){};ra.prototype=sa;ra.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ra.prototype.pi={value:Math.PI,valueset:!0,node:null};B={fixSpatialReference:p.fixSpatialReference,parseArguments:D,standardFunction:h};la([z.ArrayFunctions]);t.executeScript=function(J,F){let H=F.spatialReference;if(null===H||void 0===H)H=new u({wkid:102100});let O=null;J.usesModules&&(O=new w.ArcadeModuleLoader(new Map,J.loadedModules));const G=wa(F.vars,F.customfunctions,F.timeReference);F=
{spatialReference:H,globalScope:G,localScope:null,services:F.services??null,exports:{},libraryResolver:O,console:F.console??oa,timeReference:F.timeReference??null,lrucache:F.lrucache,interceptor:F.interceptor,depthCounter:{depth:1}};J=g(F,J);J instanceof p.ReturnResult&&(J=J.value);J instanceof p.ImplicitResult&&(J=J.value);J===p.voidOperation&&(J=null);if(J===p.breakResult)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.IllegalResult,null);if(J===p.continueResult)throw new a.ArcadeExecutionError(F,
a.ExecutionErrorCodes.IllegalResult,null);if(p.isFunctionParameter(J))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.IllegalResult,null);return J};t.extend=la;t.functionHelper=B;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ../geometry ../chunks/arcade ../arcade/Dictionary ../arcade/Feature ../chunks/languageUtils ../core/lang ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/Multipoint ../geometry/Extent".split(" "),function(t,K,B,w,f,a,C,E,p,x,z,l){function m(h){return h.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}function n(h){if(!h)return null;try{return B.parseScript(h)}catch(g){}return null}function c(h,g){if(!h)return!1;if("string"===typeof h)return g(h);if("simple"===h.type||
"class-breaks"===h.type||"unique-value"===h.type||"dot-density"===h.type||"dictionary"===h.type||"pie-chart"===h.type){if("dot-density"===h.type){var v=h.attributes?.some(r=>g(r.valueExpression));if(v)return v}v=h.visualVariables;v=!!v&&v.some(r=>{let N=g(r.valueExpression);"size"===r.type&&(y(r.minSize)&&(N=N||g(r.minSize.valueExpression)),y(r.maxSize)&&(N=N||g(r.maxSize.valueExpression)));return N});return"valueExpression"in h&&g(h.valueExpression)?!0:v}return"esri.layers.support.LabelClass"===
h.declaredClass?(h=h.labelExpressionInfo&&h.labelExpressionInfo.expression,!(!h||!g(h))||!1):"esri.PopupTemplate"===h.declaredClass?!!h.expressionInfos&&h.expressionInfos.some(r=>g(r.expression))||Array.isArray(h.content)&&h.content.some(r=>"expression"===r.type&&g(r.expressionInfo?.expression)):!1}function d(h){h=n(h);return!!h&&B.scriptTouchesGeometry(h)}function k(h){h=n(h);return!!h&&B.scriptUsesGeometryEngine(h)}function y(h){return h&&"esri.renderers.visualVariables.SizeVariable"===h.declaredClass}
const u=/^\$(feature|aggregatedFeatures)\./i,D={vars:{$feature:"any",$view:"any"},spatialReference:null};t.arcade=B.arcade;t.Dictionary=w;t.arcadeFeature=f;t.convertFeatureLayerToFeatureSet=function({layer:h,spatialReference:g,outFields:v,returnGeometry:r,lrucache:N,interceptor:b}){if(null===h)return null;const U=B.featureSetUtils();return U?U.constructFeatureSet(h,g,v,r??!0,N,b):null};t.convertJsonToArcade=function(h,g){return w.convertJsonToArcade(h,g)};t.convertMapToFeatureSetCollection=function(h){if(null===
h?.map)return null;const g=B.featureSetUtils();return g?g.createFeatureSetCollectionFromMap(h.map,h.spatialReference,h.lrucache,h.interceptor):null};t.convertServiceUrlToWorkspace=function({url:h,spatialReference:g,lrucache:v,interceptor:r}){const N=B.featureSetUtils();return N?N.createFeatureSetCollectionFromService(h,g,v,r):null};t.createExecContext=function(h,g){return{vars:{$feature:null==h?new f:f.createFromGraphic(h,null),$view:g&&g.view},spatialReference:g&&g.sr}};t.createFeature=function(h,
g,v){return f.createFromGraphicLikeObject(g,h,v,null)};t.createFunction=function(h,g){h="string"===typeof h?n(h):h;if(!h)return null;try{return g=g||C.clone(D),B.compileScript(h,g)}catch(v){}return null};t.createSyntaxTree=n;t.dependsOnView=function(h){return B.referencesMember(h,"$view")};t.enableFeatureSetOperations=function(){return B.enableFeatureSetSupport()};t.enableGeometryOperations=function(){return B.enableGeometrySupport()};t.evalSyntaxTree=function(h,g){let v;try{v=B.executeScript(h,g)}catch(r){v=
null}return v};t.executeAsyncFunction=function(h,g){try{return h?h(g):Promise.resolve(null)}catch(v){return Promise.resolve(null)}};t.executeFunction=function(h,g){let v;try{v=h?h(g):null}catch(r){v=null}return v};t.extractFieldNames=function(h,g){if(!h)return[];h="string"===typeof h?n(h):h;if(!h)return[];let v=[];B.extractExpectedFieldLiterals(h).forEach(N=>{u.test(N)&&(N=N.replace(u,""),v.push(N))});const r=v.filter(N=>N.includes("*"));v=v.filter(N=>!r.includes(N));g&&r.forEach(N=>{const b=new RegExp(`^${N.split(/\*+/).map(m).join(".*")}$`,
"i");g.forEach(U=>b.test(U)?v.push(U):null)});return[...(new Set(v.sort()))]};t.getArcadeType=function(h){return null==h?null:a.isArray(h)||a.isImmutableArray(h)?"array":a.isDate(h)?"date":a.isString(h)?"text":a.isBoolean(h)?"boolean":a.isNumber(h)?"number":h instanceof w?"dictionary":a.isFeature(h)?"feature":h instanceof E?"point":h instanceof p?"polygon":h instanceof x?"polyline":h instanceof z?"multipoint":h instanceof l?"extent":a.isFeatureSet(h)?"featureSet":a.isFeatureSetCollection(h)?"featureSetCollection":
null};t.getViewInfo=function(h){if(h&&(null!=h.spatialReference||null!=h.scale&&null!=h.viewingMode))return{view:h.viewingMode&&null!=h.scale?new w({viewingMode:h.viewingMode,scale:h.scale}):null,sr:h.spatialReference}};t.hasGeometryFunctions=function(h){return c(h,d)};t.hasGeometryOperations=function(h){return c(h,k)};t.hasVariable=function(h,g){return h?B.referencesMember(h,g):!1};t.loadScriptDependencies=function(h,g,v=[]){return B.loadScriptDependencies(h,g,v)};t.updateExecContext=function(h,
g){null!=h.vars&&(h.vars.$feature=g)};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});