// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../layers/Layer".split(" "),function(n,k,p,r,t,q,u,v,y,z,A,w,x){function l(e,g,f){if(e)for(let a=0,c=e.length;a<c;a++){var d=e.at(a);if(d?.[g]===f||"group"===d?.type&&(d=l(d.layers,g,f)))return d}}
n.LayersMixin=e=>{e=function(g){function f(...a){var c=g.call(this,...a)||this;c.layers=new r;c.addHandles([c.layers.on("before-add",b=>{b=b.item;b.parent&&"remove"in b.parent&&b.parent.remove(b)}),c.layers.on("after-add",b=>{b=b.item;b.parent=k._assertThisInitialized(c);c.layerAdded(b);"elevation"!==b.type&&"base-elevation"!==b.type||q.getLogger(k._assertThisInitialized(c)).error(`Layer 'title:${b.title}, id:${b.id}' of type '${b.type}' is not supported as an operational layer and will therefore be ignored.`)}),
c.layers.on("after-remove",b=>{b=b.item;b.parent=null;c.layerRemoved(b)})]);return c}k._inherits(f,g);var d=f.prototype;d.destroy=function(){const a=this.layers.toArray();for(const c of a)c.destroy();this.layers.destroy()};d.add=function(a,c){const b=this.layers;c=b.getNextIndex(c);a instanceof x?a.parent===this?this.reorder(a,c):b.add(a,c):u.isPromiseLike(a)?a.then(h=>{this.destroyed||this.add(h,c)}):q.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")};
d.addMany=function(a,c){const b=this.layers;let h=b.getNextIndex(c);a.slice().forEach(m=>{m.parent===this?this.reorder(m,h):(b.add(m,h),h+=1)})};d.findLayerById=function(a){return l(this.layers,"id",a)};d.findLayerByUid=function(a){return l(this.layers,"uid",a)};d.remove=function(a){return this.layers.remove(a)};d.removeMany=function(a){return this.layers.removeMany(a)};d.removeAll=function(){return this.layers.removeAll()};d.reorder=function(a,c){return this.layers.reorder(a,c)};d.layerAdded=function(a){};
d.layerRemoved=function(a){};k._createClass(f,[{key:"layers",set:function(a){this._set("layers",t.referenceSetter(a,this._get("layers")))}}]);return f}(e);p.__decorate([v.property()],e.prototype,"layers",null);return e=p.__decorate([w.subclass("esri.support.LayersMixin")],e)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});