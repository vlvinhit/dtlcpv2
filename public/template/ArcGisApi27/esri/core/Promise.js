// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/subclass".split(" "),function(g,h,m,q,r,k,n){var e;(function(b){b[b.PENDING=0]="PENDING";b[b.RESOLVED=1]="RESOLVED";b[b.REJECTED=2]="REJECTED"})(e||(e={}));let t=function(){function b(){this._resolver=k.createResolver();this._status=e.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=e.RESOLVED;this._cleanUp()},()=>{this._status=e.REJECTED;
this._cleanUp()});this.promise=this._resolver.promise}var c=b.prototype;c.destroy=function(){this._cleanUp()};c.addResolvingPromise=function(f){this._resolvingPromises.push(f);this._tryResolve()};c.isResolved=function(){return this._status===e.RESOLVED};c.isRejected=function(){return this._status===e.REJECTED};c.isFulfilled=function(){return this._status!==e.PENDING};c.abort=function(){this._resolver.reject(k.createAbortError())};c._cleanUp=function(){this._resolvingPromises=this._allPromise=null};
c._tryResolve=function(){if(!this.isFulfilled()){var f=k.createResolver(),d=[...this._resolvingPromises,r.assumeNonNull(f.promise)],a=this._allPromise=Promise.all(d);a.then(()=>{this.isFulfilled()||this._allPromise!==a||this._resolver.resolve()},l=>{this.isFulfilled()||this._allPromise!==a||k.isAbortError(l)||this._resolver.reject(l)});f.resolve()}};return h._createClass(b)}();const p=b=>{b=function(c){function f(...a){a=c.call(this,...a)||this;a._promiseProps=new t;a.addResolvingPromise(Promise.resolve());
return a}h._inherits(f,c);var d=f.prototype;d.destroy=function(){this._promiseProps?.destroy()};d.isResolved=function(){return this._promiseProps.isResolved()};d.isRejected=function(){return this._promiseProps.isRejected()};d.isFulfilled=function(){return this._promiseProps.isFulfilled()};d.when=function(a,l){return this._promiseProps.promise.then(()=>this).then(a,l)};d.catch=function(a){return this.when(null,a)};d.addResolvingPromise=function(a){a&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in
a?a.when():a)};return h._createClass(f)}(b);return b=m.__decorate([n.subclass("esri.core.Promise")],b)};g.EsriPromise=function(b){function c(){return b.apply(this,arguments)||this}h._inherits(c,b);return h._createClass(c)}(p(q));g.EsriPromise=m.__decorate([n.subclass("esri.core.Promise")],g.EsriPromise);g.EsriPromiseMixin=p;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});