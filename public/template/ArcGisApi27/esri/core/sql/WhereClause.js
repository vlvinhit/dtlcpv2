// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(u){function G(z){let L=0;for(let E=0;E<z.length;E++)L+=z[E];return L/z.length}function M(z){const L=G(z),E=z.length;let D=0;for(const k of z)D+=(k-L)**2;return 1<E?D/(E-1):0}const R={min:{minParams:1,maxParams:1,evaluate:z=>null==z[0]?null:Math.min.apply(Math,z[0])},max:{minParams:1,maxParams:1,evaluate:z=>null==z[0]?null:Math.max.apply(Math,z[0])},avg:{minParams:1,maxParams:1,evaluate:z=>null==z[0]?null:G(z[0])},
sum:{minParams:1,maxParams:1,evaluate:z=>{if(null==z[0])z=null;else{z=z[0];let L=0;for(let E=0;E<z.length;E++)L+=z[E];z=L}return z}},stddev:{minParams:1,maxParams:1,evaluate:z=>null==z[0]?null:Math.sqrt(M(z[0]))},count:{minParams:1,maxParams:1,evaluate:z=>null==z[0]?null:z[0].length},var:{minParams:1,maxParams:1,evaluate:z=>null==z[0]?null:M(z[0])}};u.aggregateFunction=function(z,L){const E=R[z.toLowerCase()];if(null==E)throw Error("Function Not Recognised");if(L.length<E.minParams||L.length>E.maxParams)throw Error(`Invalid Parameter count for call to ${z.toUpperCase()}`);
return E.evaluate(L)};u.isAggregate=function(z,L){z=R[z.toLowerCase()];return null!=z&&L>=z.minParams&&L<=z.maxParams};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(u,G,M,R,z){function L(h){h=new Date(h.getTime());h.setHours(0,0,0,0);return h}function E(h,g){if(h instanceof Date)return g?
L(h):h;if("string"===typeof h||h instanceof String)if(h=z.DateTime.fromSQL(h),h.isValid)return g?L(h.toJSDate()):h.toJSDate();throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);}let D=function(){function h(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}h._fixDefaults=function(g){if(null!==g.precision||null!==g.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};h._parseSecondsComponent=function(g,w){w.includes(".")?
(w=w.split("."),g.second=parseFloat(w[0]),g.millis=parseInt(w[1],10)):g.second=parseFloat(w)};h.createFromMilliseconds=function(g){const w=new h;w.second=g/1E3;return w};h.createFromValueAndQualifer=function(g,w,v){let A=null;const m=new h;m.op="-"===v?"-":"+";if("interval-period"===w.type){h._fixDefaults(w);v=RegExp("^[0-9]{1,}$");if("year"===w.period||"month"===w.period)throw Error("Year-Month Intervals not supported");if("second"===w.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(g))h._parseSecondsComponent(m,
g);else throw Error("Illegal Interval");else if(v.test(g))m[w.period]=parseFloat(g);else throw Error("Illegal Interval");}else{h._fixDefaults(w.start);h._fixDefaults(w.end);if("year"===w.start.period||"month"===w.start.period)throw Error("Year-Month Intervals not supported");if("year"===w.end.period||"month"===w.end.period)throw Error("Year-Month Intervals not supported");switch(w.start.period){case "day":switch(w.end.period){case "hour":A=RegExp("^[0-9]{1,} [0-9]{1,}$");if(A.test(g))m[w.start.period]=
parseFloat(g.split(" ")[0]),m[w.end.period]=parseFloat(g.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":A=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(A.test(g))m[w.start.period]=parseFloat(g.split(" ")[0]),g=g.split(" ")[1].split(":"),m.hour=parseFloat(g[0]),m.minute=parseFloat(g[1]);else throw Error("Illegal Interval");break;case "second":A=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(A.test(g))m[w.start.period]=parseFloat(g.split(" ")[0]),
g=g.split(" ")[1].split(":"),m.hour=parseFloat(g[0]),m.minute=parseFloat(g[1]),h._parseSecondsComponent(m,g[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(w.end.period){case "minute":A=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(A.test(g))m.hour=parseFloat(g.split(":")[0]),m.minute=parseFloat(g.split(":")[1]);else throw Error("Illegal Interval");break;case "second":A=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(A.test(g))g=
g.split(":"),m.hour=parseFloat(g[0]),m.minute=parseFloat(g[1]),h._parseSecondsComponent(m,g[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(w.end.period){case "second":A=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(A.test(g))g=g.split(":"),m.minute=parseFloat(g[0]),h._parseSecondsComponent(m,g[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");
}}return m};h.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return G._createClass(h)}();const k={extract:{minParams:2,maxParams:2,evaluate:([h,g])=>{if(null==g)return null;if(g instanceof Date)switch(h.toUpperCase()){case "SECOND":return g.getSeconds();case "MINUTE":return g.getMinutes();case "HOUR":return g.getHours();case "DAY":return g.getDate();case "MONTH":return g.getMonth()+
1;case "YEAR":return g.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:h=>{if(2===h.length){const [g,w]=h;return null==g||null==w?null:g.toString().substring(w-1)}if(3===h.length){const [g,w,v]=h;return null==g||null==w||null==v?null:0>=v?"":g.toString().substring(w-1,w+v-1)}}},position:{minParams:2,maxParams:2,evaluate:([h,g])=>null==h||null==g?null:g.indexOf(h)+1},trim:{minParams:2,maxParams:3,evaluate:h=>{var g=3===h.length,w=g?
h[1]:" ";g=g?h[2]:h[1];if(null==w||null==g)return null;w=`(${R.escapeRegExpString(w)})`;switch(h[0]){case "BOTH":return g.replaceAll(new RegExp(`^${w}*|${w}*$`,"g"),"");case "LEADING":return g.replaceAll(new RegExp(`^${w}*`,"g"),"");case "TRAILING":return g.replaceAll(new RegExp(`${w}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.abs(h[0])},ceiling:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.ceil(h[0])},
floor:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.floor(h[0])},log:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.log(h[0])},log10:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.log(h[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.sin(h[0])},cos:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.cos(h[0])},tan:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.tan(h[0])},asin:{minParams:1,maxParams:1,evaluate:h=>null==
h[0]?null:Math.asin(h[0])},acos:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.acos(h[0])},atan:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.atan(h[0])},sign:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:0<h[0]?1:0>h[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:h=>null==h[0]||null==h[1]?null:h[0]**h[1]},mod:{minParams:2,maxParams:2,evaluate:h=>null==h[0]||null==h[1]?null:h[0]%h[1]},round:{minParams:1,maxParams:2,evaluate:h=>{const g=h[0];h=2===h.length?10**h[1]:
1;return null==g?null:Math.round(g*h)/h}},truncate:{minParams:1,maxParams:2,evaluate:h=>null==h[0]?null:1===h.length?parseInt(h[0].toFixed(0),10):parseFloat(h[0].toFixed(h[1]))},char_length:{minParams:1,maxParams:1,evaluate:h=>"string"===typeof h[0]||h[0]instanceof String?h[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:h=>{let g="";for(let w=0;w<h.length;w++){if(null==h[w])return null;g+=h[w].toString()}return g}},lower:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:h[0].toString().toLowerCase()},
upper:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:h[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:h=>{for(const g of h)if(null!==g)return g;return null}},cosh:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.cosh(h[0])},sinh:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.sinh(h[0])},tanh:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.tanh(h[0])},nullif:{minParams:2,maxParams:2,evaluate:h=>{const g=h[0];h=h[1];return(g instanceof
Date?g.valueOf():g)===(h instanceof Date?h.valueOf():h)?null:g}},cast:{minParams:2,maxParams:2,evaluate:h=>{var g=h[0];h=h[1];if(null===g)return null;switch(h.type){case "integer":g=parseInt(g,10);if(isNaN(g))throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);return g;case "smallint":g=parseInt(g,10);if(isNaN(g))throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);if(32767<g||-32767>g)throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);return g;case "float":case "real":g=parseFloat(g);if(isNaN(g))throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);
return g;case "date":return E(g,!0);case "timestamp":return E(g,!1);case "varchar":g=g.toString();if(g.length>h.size)throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);return g;default:throw new M.SqlError(M.SqlErrorCodes.InvalidDataType);}}}};u.SqlInterval=D;u.evaluateFunction=function(h,g){const w=k[h.toLowerCase()];if(null==w)throw Error("Function Not Recognised");if(g.length<w.minParams||g.length>w.maxParams)throw Error(`Invalid Parameter count for call to ${h.toUpperCase()}`);return w.evaluate(g)};
u.isStandardized=function(h,g){h=k[h.toLowerCase()];return null!=h&&g>=h.minParams&&g<=h.maxParams};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(u,G,M){u.SqlErrorCodes=void 0;(function(D){D.InvalidFunctionParameters="InvalidFunctionParameters";D.UnsupportedSqlFunction="UnsupportedSqlFunction";D.UnsupportedOperator="UnsupportedOperator";
D.UnsupportedSyntax="UnsupportedSyntax";D.UnsupportedIsRhs="UnsupportedIsRhs";D.UnsupportedIsLhs="UnsupportedIsLhs";D.InvalidDataType="InvalidDataType";D.CannotCastValue="CannotCastValue";D.MissingStatisticParameters="MissingStatisticParameters"})(u.SqlErrorCodes||(u.SqlErrorCodes={}));const R={[u.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[u.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[u.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",
[u.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[u.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[u.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[u.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[u.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[u.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let z=function(D){function k(h,g){h=D.call(this,M.doSubstitutions(R[h],
g))||this;h.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(G._assertThisInitialized(h),k);return h}G._inherits(k,D);return G._createClass(k)}(G._wrapNativeSuper(Error));u.FeatureSetErrorCodes=void 0;(function(D){D.NeverReach="NeverReach";D.NotImplemented="NotImplemented";D.Cancelled="Cancelled";D.InvalidStatResponse="InvalidStatResponse";D.InvalidRequest="InvalidRequest";D.RequestFailed="RequestFailed";D.MissingFeatures="MissingFeatures";
D.AggregationFieldNotFound="AggregationFieldNotFound";D.DataElementsNotFound="DataElementsNotFound"})(u.FeatureSetErrorCodes||(u.FeatureSetErrorCodes={}));const L={[u.FeatureSetErrorCodes.Cancelled]:"Cancelled",[u.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[u.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[u.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[u.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[u.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",
[u.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[u.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[u.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let E=function(D){function k(h,g){h=D.call(this,M.doSubstitutions(L[h],g))||this;h.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(G._assertThisInitialized(h),k);return h}G._inherits(k,D);return G._createClass(k)}(G._wrapNativeSuper(Error));
u.FeatureSetError=E;u.FeatureSetErrorMessages=L;u.SqlError=z;u.SqlErrorMessages=R;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(u,G){function M(v){return v&&v.loc?`Line : ${v.loc.start?.line}, ${v.loc.start?.column}: `:""}function R(v,A){try{if(!A)return v;for(const m in A){let C=A[m];C||(C="");v=v.replace("{"+m+"}",A[m])}}catch(m){}return v}u.ExecutionErrorCodes=void 0;(function(v){v.AsyncNotEnabled=
"AsyncNotEnabled";v.ModulesNotSupported="ModulesNotSupported";v.CircularModules="CircularModules";v.NeverReach="NeverReach";v.UnsupportedHashType="UnsupportedHashType";v.InvalidParameter="InvalidParameter";v.UnexpectedToken="UnexpectedToken";v.Unrecognised="Unrecognised";v.UnrecognisedType="UnrecognisedType";v.MaximumCallDepth="MaximumCallDepth";v.BooleanConditionRequired="BooleanConditionRequired";v.TypeNotAllowedInFeature="TypeNotAllowedInFeature";v.KeyMustBeString="KeyMustBeString";v.WrongNumberOfParameters=
"WrongNumberOfParameters";v.CallNonFunction="CallNonFunction";v.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";v.NoFunctionInDictionary="NoFunctionInDictionary";v.NoFunctionInArray="NoFunctionInArray";v.AssignModuleFunction="AssignModuleFunction";v.LogicExpressionOrAnd="LogicExpressionOrAnd";v.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";v.FunctionNotFound="FunctionNotFound";v.InvalidMemberAccessKey="InvalidMemberAccessKey";v.UnsupportedUnaryOperator="UnsupportUnaryOperator";
v.InvalidIdentifier="InvalidIdentifier";v.MemberOfNull="MemberOfNull";v.UnsupportedOperator="UnsupportedOperator";v.Cancelled="Cancelled";v.ModuleAccessorMustBeString="ModuleAccessorMustBeString";v.ModuleExportNotFound="ModuleExportNotFound";v.Immutable="Immutable";v.OutOfBounds="OutOfBounds";v.IllegalResult="IllegalResult";v.FieldNotFound="FieldNotFound";v.PortalRequired="PortalRequired";v.LogicError="LogicError";v.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";v.KeyAccessorMustBeString="KeyAccessorMustBeString";
v.WrongSpatialReference="WrongSpatialReference"})(u.ExecutionErrorCodes||(u.ExecutionErrorCodes={}));const z={[u.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[u.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[u.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[u.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[u.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",
[u.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[u.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[u.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[u.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[u.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[u.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[u.ExecutionErrorCodes.Cancelled]:"Execution cancelled",
[u.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[u.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[u.ExecutionErrorCodes.PortalRequired]:"Portal is required",[u.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[u.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[u.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[u.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[u.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
[u.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[u.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[u.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[u.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[u.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[u.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[u.ExecutionErrorCodes.Immutable]:"Object is immutable",
[u.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[u.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[u.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[u.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[u.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[u.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[u.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[u.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[u.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[u.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[u.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[u.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let L=function(v){function A(...m){return v.call(this,...m)||this}G._inherits(A,v);return G._createClass(A)}(G._wrapNativeSuper(Error)),E=function(v){function A(m,
C){m=v.call(this,M(C)+m.message,{cause:m})||this;m.loc=null;Error.captureStackTrace&&Error.captureStackTrace(G._assertThisInitialized(m),A);C&&C.loc&&(m.loc=C.loc);return m}G._inherits(A,v);return G._createClass(A)}(L),D=function(v){function A(m,C,J,K){m=v.call(this,"Execution error - "+M(J)+R(z[C],K))||this;m.loc=null;m.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(G._assertThisInitialized(m),A);J&&J.loc&&(m.loc=J.loc);return m}G._inherits(A,
v);return G._createClass(A)}(G._wrapNativeSuper(Error)),k=function(v){function A(m,C,J,K){m=v.call(this,"Compilation error - "+M(J)+R(z[C],K))||this;m.loc=null;m.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(G._assertThisInitialized(m),A);J&&J.loc&&(m.loc=J.loc);return m}G._inherits(A,v);return G._createClass(A)}(G._wrapNativeSuper(Error)),h=function(v){function A(){var m=v.call(this,"Uncompilable code structures")||this;m.declaredRootClass=
"esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(G._assertThisInitialized(m),A);return m}G._inherits(A,v);return G._createClass(A)}(G._wrapNativeSuper(Error));u.ModuleErrorCodes=void 0;(function(v){v.UnrecognisedUri="UnrecognisedUri";v.UnsupportedUriProtocol="UnsupportedUriProtocol"})(u.ModuleErrorCodes||(u.ModuleErrorCodes={}));const g={[u.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[u.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};
let w=function(v){function A(m,C){m=v.call(this,R(g[m],C))||this;m.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(G._assertThisInitialized(m),A);return m}G._inherits(A,v);return G._createClass(A)}(G._wrapNativeSuper(Error));u.ArcadeCompilationError=k;u.ArcadeExecutionError=D;u.ArcadeUncompilableError=h;u.ErrorWithCause=L;u.ExecutionErrorMessages=z;u.LocatableArcadeExecutionError=E;u.ModuleError=w;u.ModuleErrorMessages=g;u.doSubstitutions=R;u.ensureArcadeExecutionError=
function(v,A,m){return"esri.arcade.arcadeexecutionerror"===m.declaredRootClass||"esri.arcade.arcadecompilationerror"===m.declaredRootClass?null===m.loc&&A&&A.loc?new E(m,{cause:m}):m:A&&A.loc?new E(m,{cause:m}):m};u.parsingValidationMessage=function(v,A,m){return"Parsing error - "+M(v)+R(z[A],m)};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(u,
G,M){var R={exports:{}};R.exports;(function(L){(function(E,D){L.exports&&(L.exports=D())})(M.commonjsGlobal,function(){function E(k,h,g,w){k=Error.call(this,k);Object.setPrototypeOf&&Object.setPrototypeOf(k,E.prototype);k.expected=h;k.found=g;k.location=w;k.name="SyntaxError";return k}function D(k,h,g){g=g||" ";if(k.length>h)return k;h-=k.length;g+=g.repeat(h);return k+g.slice(0,h)}(function(k,h){function g(){this.constructor=k}g.prototype=h.prototype;k.prototype=new g})(E,Error);E.prototype.format=
function(k){var h="Error: "+this.message;if(this.location){var g=null,w;for(w=0;w<k.length;w++)if(k[w].source===this.location.source){g=k[w].text.split(/\r\n|\n|\r/g);break}k=this.location.start;w=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(k):k;var v=this.location.source+":"+w.line+":"+w.column;if(g){var A=this.location.end,m=D("",w.line.toString().length," ");g=g[k.line-1];A=(k.line===A.line?A.column:g.length+1)-k.column||1;h+="\n --\x3e "+v+
"\n"+m+" |\n"+w.line+" | "+g+"\n"+m+" | "+D("",k.column-1," ")+D("",A,"^")}else h+="\n at "+v}return h};E.buildMessage=function(k,h){function g(C){return C.charCodeAt(0).toString(16).toUpperCase()}function w(C){return C.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(J){return"\\x0"+g(J)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(J){return"\\x"+g(J)})}function v(C){return C.replace(/\\/g,
"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(J){return"\\x0"+g(J)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(J){return"\\x"+g(J)})}function A(C){return m[C.type](C)}var m={literal:function(C){return'"'+w(C.text)+'"'},class:function(C){var J=C.parts.map(function(K){return Array.isArray(K)?v(K[0])+"-"+v(K[1]):v(K)});return"["+(C.inverted?"^":"")+J.join("")+"]"},
any:function(){return"any character"},end:function(){return"end of input"},other:function(C){return C.description}};return"Expected "+function(C){C=C.map(A);var J,K;C.sort();if(0<C.length){for(K=J=1;J<C.length;J++)C[J-1]!==C[J]&&(C[K]=C[J],K++);C.length=K}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(k)+" but "+(h?'"'+w(h)+'"':"end of input")+" found."};return{SyntaxError:E,parse:function(k,h){function g(c,d){return{type:"literal",
text:c,ignoreCase:d}}function w(c,d,e){return{type:"class",parts:c,inverted:d,ignoreCase:e}}function v(c){var d=fb[c],e;if(!d){for(e=c-1;!fb[e];)e--;d=fb[e];for(d={line:d.line,column:d.column};e<c;)10===k.charCodeAt(e)?(d.line++,d.column=1):d.column++,e++;fb[c]=d}return d}function A(c,d,e){var p=v(c),x=v(d);c={source:Pa,start:{offset:c,line:p.line,column:p.column},end:{offset:d,line:x.line,column:x.column}};e&&Pa&&"function"===typeof Pa.offset&&(c.start=Pa.offset(c.start),c.end=Pa.offset(c.end));
return c}function m(c){b<ka||(b>ka&&(ka=b,Nb=[]),Nb.push(c))}function C(){var c=b;t();var d=K();d!==a?(t(),c=d):(b=c,c=a);return c}function J(){var c=b;var d=K();if(d!==a){c=[];var e=b;var p=t();var x=gb();if(x!==a){var H=t();var I=K();I!==a?e=p=[p,x,H,I]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,p=t(),x=gb(),x!==a?(H=t(),I=K(),I!==a?e=p=[p,x,H,I]:(b=e,e=a)):(b=e,e=a);e={type:"expression-list"};d=[d];for(p=0;p<c.length;p++)d.push(c[p][3]);e.value=d;c=e}else b=c,c=a;return c}function K(){var c=
b;var d=ya();if(d!==a){c=[];var e=b;var p=t();var x=gc();if(x!==a){var H=t();var I=ya();I!==a?e=p=[p,x,H,I]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,p=t(),x=gc(),x!==a?(H=t(),I=ya(),I!==a?e=p=[p,x,H,I]:(b=e,e=a)):(b=e,e=a);c=Qa(d,c)}else b=c,c=a;return c}function ya(){var c=b;var d=ta();if(d!==a){c=[];var e=b;var p=t();var x=hb();if(x!==a){var H=t();var I=ta();I!==a?e=p=[p,x,H,I]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,p=t(),x=hb(),x!==a?(H=t(),I=ta(),I!==a?e=p=[p,x,H,I]:(b=e,e=a)):
(b=e,e=a);c=Qa(d,c)}else b=c,c=a;return c}function ta(){var c=b;var d=Ra();if(d===a){d=b;if(33===k.charCodeAt(b)){var e=sd;b++}else e=a,0===l&&m(td);if(e!==a){var p=b;l++;if(61===k.charCodeAt(b)){var x=hc;b++}else x=a,0===l&&m(ic);l--;x===a?p=void 0:(b=p,p=a);p!==a?d=e=[e,p]:(b=d,d=a)}else b=d,d=a}d!==a?(e=t(),p=ta(),p!==a?c={type:"unary-expression",operator:"NOT",expr:p}:(b=c,c=a)):(b=c,c=a);if(c===a){d=b;c=fa();if(c!==a){t();d=[];e=b;p=t();x=Sa();if(x!==a){var H=t();var I=fa();I!==a?e=p=[p,x,H,
I]:(b=e,e=a)}else b=e,e=a;if(e!==a)for(;e!==a;)d.push(e),e=b,p=t(),x=Sa(),x!==a?(H=t(),I=fa(),I!==a?e=p=[p,x,H,I]:(b=e,e=a)):(b=e,e=a);else d=a;d!==a&&(d={type:"arithmetic",tail:d});d===a&&(d=b,e=Ta(),e!==a?(t(),p=W(),p!==a?(t(),p=J(),p!==a?(t(),x=X(),x!==a?d={op:e,right:p}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=Ta(),e!==a?(t(),p=W(),p!==a?(t(),p=X(),p!==a?d={op:e,right:{type:"expression-list",value:[]}}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=Ta(),e!==a?(t(),p=f(),p!==a?d=
{op:e,right:p}:(b=d,d=a)):(b=d,d=a))),d===a&&(d=b,x=Ra(),x!==a?(t(),e=jc(),e!==a?(t(),p=fa(),p!==a?(t(),H=hb(),H!==a?(t(),x=fa(),x!==a?d={op:"NOT"+e,right:{type:"expression-list",value:[p,x]}}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,x=jc(),x!==a?(t(),e=fa(),e!==a?(t(),p=hb(),p!==a?(t(),H=fa(),H!==a?d={op:x,right:{type:"expression-list",value:[e,H]}}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a)),d===a&&(d=b,e=kc(),e!==a?(t(),p=Ra(),p!==a?(t(),p=fa(),p!==a?d={op:e+"NOT",right:p}:
(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=kc(),e!==a?(t(),p=fa(),p!==a?d={op:e,right:p}:(b=d,d=a)):(b=d,d=a)),d===a&&(d=b,e=ib(),e!==a?(t(),p=T(),p!==a?(t(),x=b,k.substr(b,6).toLowerCase()===ud?(H=k.substr(b,6),b+=6):(H=a,0===l&&m(vd)),H!==a?(H=b,l++,I=r(),l--,I===a?H=void 0:(b=H,H=a),H!==a?x="ESCAPE":(b=x,x=a)):(b=x,x=a),x!==a?(t(),x=da(),x!==a?d={op:e,right:p,escape:x.value}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=ib(),e!==a?(t(),p=T(),p!==a?d={op:e,right:p,escape:""}:(b=d,
d=a)):(b=d,d=a))))));d===a&&(d=null);""==d||void 0==d||null==d?d=c:(e=null,d=e="arithmetic"==d.type?Qa(c,d.tail):lc(d.op,c,d.right,d.escape))}else b=d,d=a;c=d}return c}function Sa(){if(k.substr(b,2)===mc){var c=mc;b+=2}else c=a,0===l&&m(wd);c===a&&(62===k.charCodeAt(b)?(c=xd,b++):(c=a,0===l&&m(yd)),c===a&&(k.substr(b,2)===nc?(c=nc,b+=2):(c=a,0===l&&m(zd)),c===a&&(k.substr(b,2)===oc?(c=oc,b+=2):(c=a,0===l&&m(Ad)),c===a&&(60===k.charCodeAt(b)?(c=Bd,b++):(c=a,0===l&&m(Cd)),c===a&&(61===k.charCodeAt(b)?
(c=hc,b++):(c=a,0===l&&m(ic)),c===a&&(k.substr(b,2)===pc?(c=pc,b+=2):(c=a,0===l&&m(Dd))))))));return c}function ib(){var c=c=b;var d=Ra();if(d!==a){var e=t();var p=qc();p!==a?c=d=[d,e,p]:(b=c,c=a)}else b=c,c=a;c!==a&&(c=c[0]+" "+c[2]);c===a&&(c=qc());return c}function Ta(){var c=c=b;var d=Ra();if(d!==a){var e=t();var p=Ob();p!==a?c=d=[d,e,p]:(b=c,c=a)}else b=c,c=a;c!==a&&(c=c[0]+" "+c[2]);c===a&&(c=Ob());return c}function fa(){var c=b;var d=Ua();if(d!==a){c=[];var e=b;var p=t();var x=jb();if(x!==
a){var H=t();var I=Ua();I!==a?e=p=[p,x,H,I]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,p=t(),x=jb(),x!==a?(H=t(),I=Ua(),I!==a?e=p=[p,x,H,I]:(b=e,e=a)):(b=e,e=a);c=Qa(d,c)}else b=c,c=a;return c}function jb(){if(43===k.charCodeAt(b)){var c=Pb;b++}else c=a,0===l&&m(Qb);c===a&&(45===k.charCodeAt(b)?(c=Rb,b++):(c=a,0===l&&m(Sb)),c===a&&(k.substr(b,2)===rc?(c=rc,b+=2):(c=a,0===l&&m(Ed))));return c}function Ua(){var c=b;var d=Va();if(d!==a){c=[];var e=b;var p=t();var x=kb();if(x!==a){var H=t();var I=
Va();I!==a?e=p=[p,x,H,I]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,p=t(),x=kb(),x!==a?(H=t(),I=Va(),I!==a?e=p=[p,x,H,I]:(b=e,e=a)):(b=e,e=a);c=Qa(d,c)}else b=c,c=a;return c}function kb(){if(42===k.charCodeAt(b)){var c=Fd;b++}else c=a,0===l&&m(Gd);c===a&&(47===k.charCodeAt(b)?(c=Hd,b++):(c=a,0===l&&m(Id)));return c}function Va(){var c=da();if(c===a){var d=b;var e=b;var p=lb();if(p!==a){var x=sc();if(x!==a){var H=tc();H!==a?e=parseFloat(p+x+H):(b=e,e=a)}else b=e,e=a}else b=e,e=a;e===a&&(e=b,
p=lb(),p!==a?(x=sc(),x!==a?e=parseFloat(p+x):(b=e,e=a)):(b=e,e=a),e===a&&(e=b,p=lb(),p!==a?(x=tc(),x!==a?e=parseFloat(p+x):(b=e,e=a)):(b=e,e=a),e===a&&(e=b,p=lb(),p!==a&&(p=parseFloat(p)),e=p)));var I=e;if(I!==a){var mb=b;l++;var Jd=ha();l--;Jd===a?mb=void 0:(b=mb,mb=a);mb!==a?d={type:"number",value:I}:(b=d,d=a)}else b=d,d=a;c=d;if(c===a){var Wa=b;var za=b;if(k.substr(b,4).toLowerCase()===Kd){var nb=k.substr(b,4);b+=4}else nb=a,0===l&&m(Ld);if(nb!==a){var Xa=b;l++;var Md=r();l--;Md===a?Xa=void 0:
(b=Xa,Xa=a);Xa!==a?za=nb=[nb,Xa]:(b=za,za=a)}else b=za,za=a;var ua=za;ua!==a&&(ua={type:"boolean",value:!0});Wa=ua;if(Wa===a){Wa=b;var Aa=b;if(k.substr(b,5).toLowerCase()===Nd){var ob=k.substr(b,5);b+=5}else ob=a,0===l&&m(Od);if(ob!==a){var Ya=b;l++;var Pd=r();l--;Pd===a?Ya=void 0:(b=Ya,Ya=a);Ya!==a?Aa=ob=[ob,Ya]:(b=Aa,Aa=a)}else b=Aa,Aa=a;ua=Aa;ua!==a&&(ua={type:"boolean",value:!1});Wa=ua}c=Wa;if(c===a){var Ba=b;if(k.substr(b,4).toLowerCase()===Qd){var pb=k.substr(b,4);b+=4}else pb=a,0===l&&m(Rd);
if(pb!==a){var Za=b;l++;var Sd=r();l--;Sd===a?Za=void 0:(b=Za,Za=a);Za!==a?Ba=pb=[pb,Za]:(b=Ba,Ba=a)}else b=Ba,Ba=a;var Tb=Ba;Tb!==a&&(Tb={type:"null",value:null});c=Tb;if(c===a){var Ca=b;if(uc()!==a){t();var vc=T();vc!==a?Ca={type:"date",value:vc.value}:(b=Ca,Ca=a)}else b=Ca,Ca=a;c=Ca;if(c===a){var Da=b;if(wc()!==a){t();var xc=T();xc!==a?Da={type:"timestamp",value:xc.value}:(b=Da,Da=a)}else b=Da,Da=a;c=Da;if(c===a){var U=b;var Ub=yc();if(Ub!==a){t();if(45===k.charCodeAt(b)){var oa=Rb;b++}else oa=
a,0===l&&m(Sb);oa===a&&(43===k.charCodeAt(b)?(oa=Pb,b++):(oa=a,0===l&&m(Qb)));if(oa!==a){t();var $a=T();if($a!==a){t();var zc=y();zc!==a?U={type:"interval",value:$a,qualifier:zc,op:oa}:(b=U,U=a)}else b=U,U=a}else b=U,U=a}else b=U,U=a;U===a&&(U=b,Ub=yc(),Ub!==a?(t(),oa=T(),oa!==a?(t(),$a=y(),$a!==a?U={type:"interval",value:oa,qualifier:$a,op:""}:(b=U,U=a)):(b=U,U=a)):(b=U,U=a));c=U}}}}}}var N=c;if(N===a){var Z=b;var Ea=b;if(k.substr(b,7).toLowerCase()===Td){var Ac=k.substr(b,7);b+=7}else Ac=a,0===
l&&m(Ud);if(Ac!==a){var qb=b;l++;var Vd=r();l--;Vd===a?qb=void 0:(b=qb,qb=a);qb!==a?Ea="EXTRACT":(b=Ea,Ea=a)}else b=Ea,Ea=a;if(Ea!==a){t();var Wd=W();if(Wd!==a){t();var ia=Bc();ia===a&&(ia=Cc(),ia===a&&(ia=Dc(),ia===a&&(ia=Ec(),ia===a&&(ia=Fc(),ia===a&&(ia=va())))));var Gc=ia;if(Gc!==a){t();var Xd=Vb();if(Xd!==a){t();var Hc=K();if(Hc!==a){t();var Yd=X();Yd!==a?Z={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Gc},Hc]}}:(b=Z,Z=a)}else b=Z,Z=a}else b=Z,Z=a}else b=
Z,Z=a}else b=Z,Z=a}else b=Z,Z=a;N=Z;if(N===a){var aa=b;var Fa=b;if(k.substr(b,9).toLowerCase()===Zd){var Ic=k.substr(b,9);b+=9}else Ic=a,0===l&&m($d);if(Ic!==a){var rb=b;l++;var ae=r();l--;ae===a?rb=void 0:(b=rb,rb=a);rb!==a?Fa="SUBSTRING":(b=Fa,Fa=a)}else b=Fa,Fa=a;if(Fa!==a){t();var be=W();if(be!==a){t();var Wb=K();if(Wb!==a){t();var ce=Vb();if(ce!==a){t();var Xb=K();if(Xb!==a){t();var pa=b;var Ga=b;if(k.substr(b,3).toLowerCase()===de){var Jc=k.substr(b,3);b+=3}else Jc=a,0===l&&m(ee);if(Jc!==a){var sb=
b;l++;var fe=r();l--;fe===a?sb=void 0:(b=sb,sb=a);sb!==a?Ga="FOR":(b=Ga,Ga=a)}else b=Ga,Ga=a;var ab=Ga;if(ab!==a){var ge=t();var Kc=K();if(Kc!==a){var he=t();pa=ab=[ab,ge,Kc,he]}else b=pa,pa=a}else b=pa,pa=a;pa===a&&(pa=null);ab=X();ab!==a?aa={type:"function",name:"substring",args:{type:"expression-list",value:pa?[Wb,Xb,pa[2]]:[Wb,Xb]}}:(b=aa,aa=a)}else b=aa,aa=a}else b=aa,aa=a}else b=aa,aa=a}else b=aa,aa=a}else b=aa,aa=a;N=aa;if(N===a){var P=b;var Yb=Lc();if(Yb!==a){t();var Zb=W();if(Zb!==a){t();
var qa=q();qa===a&&(qa=null);t();var bb=K();if(bb!==a){t();var $b=Vb();if($b!==a){t();var Mc=K();if(Mc!==a){t();var ie=X();ie!==a?P={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==qa?"BOTH":qa},bb,Mc]}}:(b=P,P=a)}else b=P,P=a}else b=P,P=a}else b=P,P=a}else b=P,P=a}else b=P,P=a;P===a&&(P=b,Yb=Lc(),Yb!==a?(t(),Zb=W(),Zb!==a?(t(),qa=q(),qa===a&&(qa=null),t(),bb=K(),bb!==a?(t(),$b=X(),$b!==a?P={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",
value:null==qa?"BOTH":qa},bb]}}:(b=P,P=a)):(b=P,P=a)):(b=P,P=a)):(b=P,P=a));N=P;if(N===a){var ba=b;var Ha=b;if(k.substr(b,8).toLowerCase()===je){var Nc=k.substr(b,8);b+=8}else Nc=a,0===l&&m(ke);if(Nc!==a){var tb=b;l++;var le=r();l--;le===a?tb=void 0:(b=tb,tb=a);tb!==a?Ha="POSITION":(b=Ha,Ha=a)}else b=Ha,Ha=a;if(Ha!==a){t();var me=W();if(me!==a){t();var Oc=K();if(Oc!==a){t();var ne=Ob();if(ne!==a){t();var Pc=K();if(Pc!==a){t();var oe=X();oe!==a?ba={type:"function",name:"position",args:{type:"expression-list",
value:[Oc,Pc]}}:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;N=ba;if(N===a){var ca=b;var Ia=b;if(k.substr(b,4).toLowerCase()===pe){var Qc=k.substr(b,4);b+=4}else Qc=a,0===l&&m(qe);if(Qc!==a){var ub=b;l++;var re=r();l--;re===a?ub=void 0:(b=ub,ub=a);ub!==a?Ia="CAST":(b=Ia,Ia=a)}else b=Ia,Ia=a;if(Ia!==a){t();var se=W();if(se!==a){t();var Rc=K();if(Rc!==a){t();var Ja=b;if(k.substr(b,2).toLowerCase()===te){var Sc=k.substr(b,2);b+=2}else Sc=a,0===l&&m(ue);if(Sc!==
a){var vb=b;l++;var ve=r();l--;ve===a?vb=void 0:(b=vb,vb=a);vb!==a?Ja="AS":(b=Ja,Ja=a)}else b=Ja,Ja=a;var we=Ja;if(we!==a){t();var O=b;var Ka=b;if(k.substr(b,7).toLowerCase()===xe){var Tc=k.substr(b,7);b+=7}else Tc=a,0===l&&m(ye);if(Tc!==a){var wb=b;l++;var ze=r();l--;ze===a?wb=void 0:(b=wb,wb=a);wb!==a?Ka="INTEGER":(b=Ka,Ka=a)}else b=Ka,Ka=a;var Q=Ka;Q!==a&&(Q={type:"data-type",value:{type:"integer"}});O=Q;if(O===a){O=b;var La=b;if(k.substr(b,8).toLowerCase()===Ae){var Uc=k.substr(b,8);b+=8}else Uc=
a,0===l&&m(Be);if(Uc!==a){var xb=b;l++;var Ce=r();l--;Ce===a?xb=void 0:(b=xb,xb=a);xb!==a?La="SMALLINT":(b=La,La=a)}else b=La,La=a;Q=La;Q!==a&&(Q={type:"data-type",value:{type:"smallint"}});O=Q;if(O===a){O=b;var Ma=b;if(k.substr(b,5).toLowerCase()===De){var Vc=k.substr(b,5);b+=5}else Vc=a,0===l&&m(Ee);if(Vc!==a){var yb=b;l++;var Fe=r();l--;Fe===a?yb=void 0:(b=yb,yb=a);yb!==a?Ma="FLOAT":(b=Ma,Ma=a)}else b=Ma,Ma=a;Q=Ma;Q!==a&&(Q={type:"data-type",value:{type:"float"}});O=Q;if(O===a){O=b;var Na=b;if(k.substr(b,
4).toLowerCase()===Ge){var Wc=k.substr(b,4);b+=4}else Wc=a,0===l&&m(He);if(Wc!==a){var zb=b;l++;var Ie=r();l--;Ie===a?zb=void 0:(b=zb,zb=a);zb!==a?Na="REAL":(b=Na,Na=a)}else b=Na,Na=a;Q=Na;Q!==a&&(Q={type:"data-type",value:{type:"real"}});O=Q;if(O===a&&(O=b,Q=uc(),Q!==a&&(Q={type:"data-type",value:{type:"date"}}),O=Q,O===a&&(O=b,Q=wc(),Q!==a&&(Q={type:"data-type",value:{type:"timestamp"}}),O=Q,O===a))){O=b;var Oa=b;if(k.substr(b,7).toLowerCase()===Je){var Xc=k.substr(b,7);b+=7}else Xc=a,0===l&&m(Ke);
if(Xc!==a){var Ab=b;l++;var Le=r();l--;Le===a?Ab=void 0:(b=Ab,Ab=a);Ab!==a?Oa="VARCHAR":(b=Oa,Oa=a)}else b=Oa,Oa=a;Q=Oa;if(Q!==a){t();var Me=W();if(Me!==a){t();var Yc=wa();if(Yc!==a){t();var Ne=X();Ne!==a?O={type:"data-type",value:{type:"varchar",size:parseInt(Yc)}}:(b=O,O=a)}else b=O,O=a}else b=O,O=a}else b=O,O=a}}}}var Zc=O;if(Zc!==a){t();var Oe=X();Oe!==a?ca={type:"function",name:"cast",args:{type:"expression-list",value:[Rc,Zc]}}:(b=ca,ca=a)}else b=ca,ca=a}else b=ca,ca=a}else b=ca,ca=a}else b=
ca,ca=a}else b=ca,ca=a;N=ca;if(N===a){var sa=b;var Bb;var ja=b;ja=Bb=la();if(ja===a)if(ja=b,96===k.charCodeAt(b)?(Bb=$c,b++):(Bb=a,0===l&&m(ad)),Bb!==a){var Cb=[];if(bd.test(k.charAt(b))){var ra=k.charAt(b);b++}else ra=a,0===l&&m(cd);if(ra!==a)for(;ra!==a;)Cb.push(ra),bd.test(k.charAt(b))?(ra=k.charAt(b),b++):(ra=a,0===l&&m(cd));else Cb=a;Cb!==a?(96===k.charCodeAt(b)?(ra=$c,b++):(ra=a,0===l&&m(ad)),ra!==a?ja=Cb.join(""):(b=ja,ja=a)):(b=ja,ja=a)}else b=ja,ja=a;var dd=ja;if(dd!==a){t();var Pe=W();if(Pe!==
a){t();var Db=J();Db===a&&(Db=null);t();var Qe=X();Qe!==a?sa={type:"function",name:dd,args:Db?Db:{type:"expression-list",value:[]}}:(b=sa,sa=a)}else b=sa,sa=a}else b=sa,sa=a;N=sa;if(N===a){var ma;var V=b;var ac=Eb();if(ac!==a){t();var cb=K();if(cb!==a){t();var db=[];for(ma=xa();ma!==a;)db.push(ma),ma=xa();ma=t();var Gb=Fb();Gb!==a?V={type:"case-expression",format:"simple",operand:cb,clauses:db,else:null}:(b=V,V=a)}else b=V,V=a}else b=V,V=a;if(V===a)if(V=b,ac=Eb(),ac!==a)if(t(),cb=K(),cb!==a){t();
db=[];for(ma=xa();ma!==a;)db.push(ma),ma=xa();ma=t();Gb=Hb();if(Gb!==a){t();var Re=Fb();Re!==a?V={type:"case-expression",format:"simple",operand:cb,clauses:db,else:Gb.value}:(b=V,V=a)}else b=V,V=a}else b=V,V=a;else b=V,V=a;var bc=V;if(bc===a){var na;var Y=b;var cc=Eb();if(cc!==a){t();var eb=[];for(na=ea();na!==a;)eb.push(na),na=ea();na=t();var Ib=Fb();Ib!==a?Y={type:"case-expression",format:"searched",clauses:eb,else:null}:(b=Y,Y=a)}else b=Y,Y=a;if(Y===a)if(Y=b,cc=Eb(),cc!==a){t();eb=[];for(na=ea();na!==
a;)eb.push(na),na=ea();na=t();Ib=Hb();if(Ib!==a){t();var Se=Fb();Se!==a?Y={type:"case-expression",format:"searched",clauses:eb,else:Ib.value}:(b=Y,Y=a)}else b=Y,Y=a}else b=Y,Y=a;bc=Y}N=bc;if(N===a){var Jb;var Kb=b;var ed=ha();if(ed!==a){var fd=[];for(Jb=n();Jb!==a;)fd.push(Jb),Jb=n();Kb=ed+fd.join("")}else b=Kb,Kb=a;var Lb=Kb;if(Lb!==a){var dc=Lb;Lb=/^CURRENT_DATE$/i.test(dc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(dc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",
table:"",column:dc}}N=Lb;if(N===a&&(N=f(),N===a)){N=b;var Te=W();if(Te!==a){t();var ec=K();if(ec!==a){t();var Ue=X();Ue!==a?(ec.paren=!0,N=ec):(b=N,N=a)}else b=N,N=a}else b=N,N=a}}}}}}}}}return N}function la(){var c;var d=b;var e=ha();if(e!==a){d=[];for(c=r();c!==a;)d.push(c),c=r();d=e+d.join("")}else b=d,d=a;return d}function ha(){if(Ve.test(k.charAt(b))){var c=k.charAt(b);b++}else c=a,0===l&&m(We);return c}function r(){if(Xe.test(k.charAt(b))){var c=k.charAt(b);b++}else c=a,0===l&&m(Ye);return c}
function n(){if(Ze.test(k.charAt(b))){var c=k.charAt(b);b++}else c=a,0===l&&m($e);return c}function f(){var c=b;if(64===k.charCodeAt(b)){var d=af;b++}else d=a,0===l&&m(bf);if(d!==a){var e=la();e!==a?c=d=[d,e]:(b=c,c=a)}else b=c,c=a;c!==a&&(c={type:"parameter",value:c[1]});return c}function q(){var c=b;if(k.substr(b,7).toLowerCase()===cf){var d=k.substr(b,7);b+=7}else d=a,0===l&&m(df);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="LEADING":(b=c,c=a)}else b=c,c=a;c===a&&(c=b,k.substr(b,
8).toLowerCase()===ef?(d=k.substr(b,8),b+=8):(d=a,0===l&&m(ff)),d!==a?(d=b,l++,e=r(),l--,e===a?d=void 0:(b=d,d=a),d!==a?c="TRAILING":(b=c,c=a)):(b=c,c=a),c===a&&(c=b,k.substr(b,4).toLowerCase()===gf?(d=k.substr(b,4),b+=4):(d=a,0===l&&m(hf)),d!==a?(d=b,l++,e=r(),l--,e===a?d=void 0:(b=d,d=a),d!==a?c="BOTH":(b=c,c=a)):(b=c,c=a)));return c}function y(){var c=b;var d=b;var e=B();if(e!==a){t();var p=W();if(p!==a)if(t(),p=S(),p!==a){t();var x=X();x!==a?d={type:"interval-period",period:e.value,precision:p,
secondary:null}:(b=d,d=a)}else b=d,d=a;else b=d,d=a}else b=d,d=a;d===a&&(d=b,e=B(),e!==a&&(e={type:"interval-period",period:e.value,precision:null,secondary:null}),d=e);if(d!==a)if(t(),e=b,k.substr(b,2).toLowerCase()===jf?(p=k.substr(b,2),b+=2):(p=a,0===l&&m(kf)),p!==a?(p=b,l++,x=r(),l--,x===a?p=void 0:(b=p,p=a),p!==a?e="TO":(b=e,e=a)):(b=e,e=a),e!==a){t();e=b;p=B();p!==a&&(p={type:"interval-period",period:p.value,precision:null,secondary:null});e=p;if(e===a){e=b;p=va();if(p!==a)if(t(),p=W(),p!==
a)if(t(),p=S(),p!==a)if(t(),x=gb(),x!==a)if(t(),x=F(),x!==a){t();var H=X();H!==a?e={type:"interval-period",period:"second",precision:p,secondary:x}:(b=e,e=a)}else b=e,e=a;else b=e,e=a;else b=e,e=a;else b=e,e=a;else b=e,e=a;e===a&&(e=b,p=va(),p!==a?(t(),p=W(),p!==a?(t(),p=S(),p!==a?(t(),x=X(),x!==a?e={type:"interval-period",period:"second",precision:p,secondary:null}:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a),e===a&&(e=b,p=va(),p!==a&&(p={type:"interval-period",period:"second",precision:null,secondary:null}),
e=p))}e!==a?c={type:"interval-qualifier",start:d,end:e}:(b=c,c=a)}else b=c,c=a;else b=c,c=a;c===a&&(c=b,e=B(),e!==a?(t(),d=W(),d!==a?(t(),d=F(),d!==a?(t(),p=X(),p!==a?c={type:"interval-period",period:e.value,precision:d,secondary:null}:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a),c===a&&(c=b,e=B(),e!==a&&(e={type:"interval-period",period:e.value,precision:null,secondary:null}),c=e,c===a&&(c=b,e=va(),e!==a?(t(),d=W(),d!==a?(t(),d=S(),d!==a?(t(),p=gb(),p!==a?(t(),e=F(),e!==a?(t(),p=X(),p!==a?c={type:"interval-period",
period:"second",precision:d,secondary:e}:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a),c===a&&(c=b,e=va(),e!==a?(t(),d=W(),d!==a?(t(),d=F(),d!==a?(t(),p=X(),p!==a?c={type:"interval-period",period:"second",precision:d,secondary:null}:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a),c===a&&(c=b,e=va(),e!==a&&(e={type:"interval-period",period:"second",precision:null,secondary:null}),c=e)))));return c}function B(){var c=b;c=Dc();c!==a&&(c={type:"string",value:"day"});c===a&&(c=b,c=Ec(),c!==
a&&(c={type:"string",value:"hour"}),c===a&&(c=b,c=Fc(),c!==a&&(c={type:"string",value:"minute"}),c===a&&(c=b,c=Cc(),c!==a&&(c={type:"string",value:"month"}),c===a&&(c=b,c=Bc(),c!==a&&(c={type:"string",value:"year"})))));return c}function F(){var c=wa();c!==a&&(c=parseFloat(c));return c}function S(){var c=wa();c!==a&&(c=parseFloat(c));return c}function T(){var c=da();c===a&&(c=f());return c}function da(){var c=b;if(39===k.charCodeAt(b)){var d=gd;b++}else d=a,0===l&&m(hd);d===a&&(k.substr(b,2)===id?
(d=id,b+=2):(d=a,0===l&&m(lf)));if(d!==a){d=[];var e=b;k.substr(b,2)===Mb?(e=Mb,b+=2):(e=a,0===l&&m(jd));e!==a&&(e="'");e===a&&(kd.test(k.charAt(b))?(e=k.charAt(b),b++):(e=a,0===l&&m(ld)));for(;e!==a;)d.push(e),e=b,k.substr(b,2)===Mb?(e=Mb,b+=2):(e=a,0===l&&m(jd)),e!==a&&(e="'"),e===a&&(kd.test(k.charAt(b))?(e=k.charAt(b),b++):(e=a,0===l&&m(ld)));39===k.charCodeAt(b)?(e=gd,b++):(e=a,0===l&&m(hd));e!==a?c={type:"string",value:d.join("")}:(b=c,c=a)}else b=c,c=a;return c}function ea(){var c=b;if(md()!==
a){t();var d=K();if(d!==a){t();var e=nd();e!==a?(t(),e=K(),e!==a?c={type:"when-clause",operand:d,value:e}:(b=c,c=a)):(b=c,c=a)}else b=c,c=a}else b=c,c=a;return c}function xa(){var c=b;if(md()!==a){t();var d=K();if(d!==a){t();var e=nd();e!==a?(t(),e=K(),e!==a?c={type:"when-clause",operand:d,value:e}:(b=c,c=a)):(b=c,c=a)}else b=c,c=a}else b=c,c=a;return c}function Hb(){var c=b;var d=b;if(k.substr(b,4).toLowerCase()===mf){var e=k.substr(b,4);b+=4}else e=a,0===l&&m(nf);if(e!==a){e=b;l++;var p=r();l--;
p===a?e=void 0:(b=e,e=a);e!==a?d="ELSE":(b=d,d=a)}else b=d,d=a;d!==a?(t(),d=K(),d!==a?c={type:"else-clause",value:d}:(b=c,c=a)):(b=c,c=a);return c}function lb(){var c=wa();if(c===a){c=b;if(45===k.charCodeAt(b)){var d=Rb;b++}else d=a,0===l&&m(Sb);d===a&&(43===k.charCodeAt(b)?(d=Pb,b++):(d=a,0===l&&m(Qb)));if(d!==a){var e=wa();e!==a?c=d[0]+e:(b=c,c=a)}else b=c,c=a}return c}function sc(){var c=b;if(46===k.charCodeAt(b)){var d=of;b++}else d=a,0===l&&m(pf);d!==a?(c=wa(),c===a&&(c=null),c="."+(null!=c?
c:"")):(b=c,c=a);return c}function tc(){var c;var d=c=b;if(qf.test(k.charAt(b))){var e=k.charAt(b);b++}else e=a,0===l&&m(rf);e!==a?(sf.test(k.charAt(b))?(d=k.charAt(b),b++):(d=a,0===l&&m(tf)),d===a&&(d=null),d="e"+(null===d?"":d)):(b=d,d=a);d!==a?(e=wa(),e!==a?c=d+e:(b=c,c=a)):(b=c,c=a);return c}function wa(){var c=[];var d=od();if(d!==a)for(;d!==a;)c.push(d),d=od();else c=a;c!==a&&(c=c.join(""));return c}function od(){if(uf.test(k.charAt(b))){var c=k.charAt(b);b++}else c=a,0===l&&m(vf);return c}
function Ob(){var c=b;if(k.substr(b,2).toLowerCase()===wf){var d=k.substr(b,2);b+=2}else d=a,0===l&&m(xf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="IN":(b=c,c=a)}else b=c,c=a;return c}function kc(){var c=b;if(k.substr(b,2).toLowerCase()===yf){var d=k.substr(b,2);b+=2}else d=a,0===l&&m(zf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="IS":(b=c,c=a)}else b=c,c=a;return c}function qc(){var c=b;if(k.substr(b,4).toLowerCase()===Af){var d=k.substr(b,4);b+=4}else d=
a,0===l&&m(Bf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="LIKE":(b=c,c=a)}else b=c,c=a;return c}function Ra(){var c=b;if(k.substr(b,3).toLowerCase()===Cf){var d=k.substr(b,3);b+=3}else d=a,0===l&&m(Df);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="NOT":(b=c,c=a)}else b=c,c=a;return c}function hb(){var c=b;if(k.substr(b,3).toLowerCase()===Ef){var d=k.substr(b,3);b+=3}else d=a,0===l&&m(Ff);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="AND":
(b=c,c=a)}else b=c,c=a;return c}function gc(){var c=b;if(k.substr(b,2).toLowerCase()===Gf){var d=k.substr(b,2);b+=2}else d=a,0===l&&m(Hf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="OR":(b=c,c=a)}else b=c,c=a;return c}function jc(){var c=b;if(k.substr(b,7).toLowerCase()===If){var d=k.substr(b,7);b+=7}else d=a,0===l&&m(Jf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="BETWEEN":(b=c,c=a)}else b=c,c=a;return c}function Vb(){var c=b;if(k.substr(b,4).toLowerCase()===
Kf){var d=k.substr(b,4);b+=4}else d=a,0===l&&m(Lf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="FROM":(b=c,c=a)}else b=c,c=a;return c}function Lc(){var c=b;if(k.substr(b,4).toLowerCase()===Mf){var d=k.substr(b,4);b+=4}else d=a,0===l&&m(Nf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="TRIM":(b=c,c=a)}else b=c,c=a;return c}function wc(){var c=b;if(k.substr(b,9).toLowerCase()===Of){var d=k.substr(b,9);b+=9}else d=a,0===l&&m(Pf);if(d!==a){d=b;l++;var e=r();l--;
e===a?d=void 0:(b=d,d=a);d!==a?c="TIMESTAMP":(b=c,c=a)}else b=c,c=a;return c}function uc(){var c=b;if(k.substr(b,4).toLowerCase()===Qf){var d=k.substr(b,4);b+=4}else d=a,0===l&&m(Rf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="DATE":(b=c,c=a)}else b=c,c=a;return c}function yc(){var c=b;if(k.substr(b,8).toLowerCase()===Sf){var d=k.substr(b,8);b+=8}else d=a,0===l&&m(Tf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="INTERVAL":(b=c,c=a)}else b=c,c=a;return c}
function Bc(){var c=b;if(k.substr(b,4).toLowerCase()===Uf){var d=k.substr(b,4);b+=4}else d=a,0===l&&m(Vf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="YEAR":(b=c,c=a)}else b=c,c=a;return c}function Cc(){var c=b;if(k.substr(b,5).toLowerCase()===Wf){var d=k.substr(b,5);b+=5}else d=a,0===l&&m(Xf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="MONTH":(b=c,c=a)}else b=c,c=a;return c}function Dc(){var c=b;if(k.substr(b,3).toLowerCase()===Yf){var d=k.substr(b,3);b+=
3}else d=a,0===l&&m(Zf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="DAY":(b=c,c=a)}else b=c,c=a;return c}function Ec(){var c=b;if(k.substr(b,4).toLowerCase()===$f){var d=k.substr(b,4);b+=4}else d=a,0===l&&m(ag);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="HOUR":(b=c,c=a)}else b=c,c=a;return c}function Fc(){var c=b;if(k.substr(b,6).toLowerCase()===bg){var d=k.substr(b,6);b+=6}else d=a,0===l&&m(cg);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==
a?c="MINUTE":(b=c,c=a)}else b=c,c=a;return c}function va(){var c=b;if(k.substr(b,6).toLowerCase()===dg){var d=k.substr(b,6);b+=6}else d=a,0===l&&m(eg);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="SECOND":(b=c,c=a)}else b=c,c=a;return c}function Eb(){var c=b;if(k.substr(b,4).toLowerCase()===fg){var d=k.substr(b,4);b+=4}else d=a,0===l&&m(gg);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="CASE":(b=c,c=a)}else b=c,c=a;return c}function Fb(){var c=b;if(k.substr(b,
3).toLowerCase()===hg){var d=k.substr(b,3);b+=3}else d=a,0===l&&m(ig);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="END":(b=c,c=a)}else b=c,c=a;return c}function md(){var c=b;if(k.substr(b,4).toLowerCase()===jg){var d=k.substr(b,4);b+=4}else d=a,0===l&&m(kg);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="WHEN":(b=c,c=a)}else b=c,c=a;return c}function nd(){var c=b;if(k.substr(b,4).toLowerCase()===lg){var d=k.substr(b,4);b+=4}else d=a,0===l&&m(mg);if(d!==a){d=
b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="THEN":(b=c,c=a)}else b=c,c=a;return c}function gb(){if(44===k.charCodeAt(b)){var c=ng;b++}else c=a,0===l&&m(og);return c}function W(){if(40===k.charCodeAt(b)){var c=pg;b++}else c=a,0===l&&m(qg);return c}function X(){if(41===k.charCodeAt(b)){var c=rg;b++}else c=a,0===l&&m(sg);return c}function t(){var c;var d=[];for(c=pd();c!==a;)d.push(c),c=pd();return d}function pd(){if(tg.test(k.charAt(b))){var c=k.charAt(b);b++}else c=a,0===l&&m(ug);return c}
function lc(c,d,e,p){c={type:"binary-expression",operator:c,left:d,right:e};void 0!==p&&(c.escape=p);return c}function Qa(c,d){for(var e=0;e<d.length;e++)c=lc(d[e][1],c,d[e][3]);return c}h=void 0!==h?h:{};var a={},Pa=h.grammarSource,qd={start:C},rd=C,sd="!",hc="\x3d",mc="\x3e\x3d",xd="\x3e",nc="\x3c\x3d",oc="\x3c\x3e",Bd="\x3c",pc="!\x3d",Pb="+",Rb="-",rc="||",Fd="*",Hd="/",af="@",gd="'",id="N'",Mb="''",of=".",Qd="null",Kd="true",Nd="false",wf="in",yf="is",Af="like",ud="escape",Cf="not",Ef="and",
Gf="or",If="between",Kf="from",de="for",Zd="substring",Td="extract",Mf="trim",je="position",Of="timestamp",Qf="date",cf="leading",ef="trailing",gf="both",pe="cast",te="as",xe="integer",Ae="smallint",De="float",Ge="real",Je="varchar",jf="to",Sf="interval",Uf="year",Wf="month",Yf="day",$f="hour",bg="minute",dg="second",fg="case",hg="end",jg="when",lg="then",mf="else",ng=",",pg="(",rg=")",$c="`",Ve=/^[A-Za-z_\x80-\uFFFF]/,Xe=/^[A-Za-z0-9_]/,Ze=/^[A-Za-z0-9_.\x80-\uFFFF]/,kd=/^[^']/,uf=/^[0-9]/,qf=/^[eE]/,
sf=/^[+\-]/,tg=/^[ \t\n\r]/,bd=/^[^`]/,td=g("!",!1),ic=g("\x3d",!1),wd=g("\x3e\x3d",!1),yd=g("\x3e",!1),zd=g("\x3c\x3d",!1),Ad=g("\x3c\x3e",!1),Cd=g("\x3c",!1),Dd=g("!\x3d",!1),Qb=g("+",!1),Sb=g("-",!1),Ed=g("||",!1),Gd=g("*",!1),Id=g("/",!1),We=w([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Ye=w([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),$e=w([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),bf=g("@",!1),hd=g("'",!1),lf=g("N'",!1),jd=g("''",!1),ld=w(["'"],!0,!1),pf=g(".",
!1),vf=w([["0","9"]],!1,!1),rf=w(["e","E"],!1,!1),tf=w(["+","-"],!1,!1),Rd=g("NULL",!0),Ld=g("TRUE",!0),Od=g("FALSE",!0),xf=g("IN",!0),zf=g("IS",!0),Bf=g("LIKE",!0),vd=g("ESCAPE",!0),Df=g("NOT",!0),Ff=g("AND",!0),Hf=g("OR",!0),Jf=g("BETWEEN",!0),Lf=g("FROM",!0),ee=g("FOR",!0),$d=g("SUBSTRING",!0),Ud=g("EXTRACT",!0),Nf=g("TRIM",!0),ke=g("POSITION",!0),Pf=g("TIMESTAMP",!0),Rf=g("DATE",!0),df=g("LEADING",!0),ff=g("TRAILING",!0),hf=g("BOTH",!0),qe=g("CAST",!0),ue=g("AS",!0),ye=g("INTEGER",!0),Be=g("SMALLINT",
!0),Ee=g("FLOAT",!0),He=g("REAL",!0),Ke=g("VARCHAR",!0),kf=g("TO",!0),Tf=g("INTERVAL",!0),Vf=g("YEAR",!0),Xf=g("MONTH",!0),Zf=g("DAY",!0),ag=g("HOUR",!0),cg=g("MINUTE",!0),eg=g("SECOND",!0),gg=g("CASE",!0),ig=g("END",!0),kg=g("WHEN",!0),mg=g("THEN",!0),nf=g("ELSE",!0),og=g(",",!1),qg=g("(",!1),sg=g(")",!1),ug=w([" ","\t","\n","\r"],!1,!1),ad=g("`",!1),cd=w(["`"],!0,!1),b=0,fb=[{line:1,column:1}],ka=0,Nb=[],l=0;if("startRule"in h){if(!(h.startRule in qd))throw Error("Can't start parsing from rule \""+
h.startRule+'".');rd=qd[h.startRule]}var fc=rd();if(fc!==a&&b===k.length)return fc;fc!==a&&b<k.length&&m({type:"end"});throw function(c,d,e){return new E(E.buildMessage(c,d),c,d,e)}(Nb,ka<k.length?k.charAt(ka):null,ka<k.length?A(ka,ka+1):A(ka,ka));}}})})(R);var z=R.exports;R=function(){function L(){}L.parse=function(E){return z.parse(E)};return G._createClass(L)}();u.WhereGrammar=R;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(u,G,M,R,z,L){function E(r,n){r+="";return r.length>=n?r:Array(n-r.length+1).join("0")+r}function D(r,n,f="0",q="0",y="0",B="0",F="",S="0",T="0"){return"+"===F||"-"===F?(r=`${E(parseInt(r,10),4)}-${E(parseInt(n,10),2)}-${E(parseInt(f,10),2)}`,n="",10>parseFloat(B)&&(n="0"),q=`${E(parseInt(q,10),2)}:${E(parseInt(y,10),2)}:${n+parseFloat(B).toString()}`,F=`${F}${E(parseInt(S,
10),2)}:${E(parseInt(T,10),2)}`,new Date(r+"T"+q+F)):new Date(parseInt(r,10),parseInt(n,10)-1,parseInt(f,10),parseInt(q,10),parseInt(y,10),parseFloat(B))}function k(r){let n=ib.exec(r);if(null!==n){const [,f,q,y,B,F,S]=n;return D(f,q,y,B,F,S)}n=Ta.exec(r);if(null!==n){const [,f,q,y,B,F,S,T,da,ea]=n;return D(f,q,y,B,F,S,T,da,ea)}n=fa.exec(r);if(null!==n){const [,f,q,y,B,F,S,T,da]=n;return D(f,q,y,B,F,"0",S,T,da)}n=jb.exec(r);if(null!==n){const [,f,q,y,B,F]=n;return D(f,q,y,B,F)}n=Sa.exec(r);if(null!==
n){const [,f,q,y]=n;return D(f,q,y)}throw Error("SQL Invalid Timestamp");}function h(r){const n=Sa.exec(r);if(null===n)try{return k(r)}catch{throw Error("SQL Invalid Date");}const [,f,q,y]=n;return new Date(parseInt(f,10),parseInt(q,10)-1,parseInt(y,10))}function g(r){return Array.isArray(r)?r:[r]}function w(r){return null!==r?!0!==r:null}function v(r,n){return null!=r&&null!=n?!0===r&&!0===n:!1===r||!1===n?!1:null}function A(r,n){return null!=r&&null!=n?!0===r||!0===n:!0===r||!0===n?!0:null}function m(r,
n){if(null==r)return null;let f=!1;for(const q of n)if(null==q)f=null;else if(r===q){f=!0;break}return f}function C(r,n,f){if(null==r)return null;let q="",y=la.Normal;for(let B=0;B<n.length;B++){const F=n.charAt(B);switch(y){case la.Normal:F===f?y=la.Escaped:q="-[]/{}()*+?.\\^$|".includes(F)?q+("\\"+F):"%"===F?q+".*":"_"===F?q+".":q+F;break;case la.Escaped:q="-[]/{}()*+?.\\^$|".includes(F)?q+("\\"+F):q+F,y=la.Normal}}return(new RegExp("^"+q+"$","m")).test(r)}function J(r){return r instanceof Date?
r.valueOf():r}function K(r,n,f){if(null==n||null==f)return null;n=J(n);f=J(f);switch(r){case "\x3c\x3e":return n!==f;case "\x3d":return n===f;case "\x3e":return n>f;case "\x3c":return n<f;case "\x3e\x3d":return n>=f;case "\x3c\x3d":return n<=f}}function ya(r,n,f){if("||"===r)return z.evaluateFunction("concat",[n,f]);if(n instanceof z.SqlInterval)if(f instanceof Date)switch(r){case "+":return new Date(n.valueInMilliseconds()+f.getTime());case "-":return n.valueInMilliseconds()-f.getTime();case "*":return n.valueInMilliseconds()*
f.getTime();case "/":return n.valueInMilliseconds()/f.getTime()}else if(f instanceof z.SqlInterval)switch(r){case "+":return z.SqlInterval.createFromMilliseconds(n.valueInMilliseconds()+f.valueInMilliseconds());case "-":return z.SqlInterval.createFromMilliseconds(n.valueInMilliseconds()-f.valueInMilliseconds());case "*":return n.valueInMilliseconds()*f.valueInMilliseconds();case "/":return n.valueInMilliseconds()/f.valueInMilliseconds()}else n=n.valueInMilliseconds();else if(f instanceof z.SqlInterval)if(n instanceof
Date)switch(r){case "+":return new Date(f.valueInMilliseconds()+n.getTime());case "-":return new Date(n.getTime()-f.valueInMilliseconds());case "*":return n.getTime()*f.valueInMilliseconds();case "/":return n.getTime()/f.valueInMilliseconds()}else f=f.valueInMilliseconds();else if(n instanceof Date&&"number"===typeof f)switch(f*=864E5,n=n.getTime(),r){case "+":return new Date(n+f);case "-":return new Date(n-f);case "*":return new Date(n*f);case "/":return new Date(n/f)}else if(f instanceof Date&&
"number"===typeof n)switch(n*=864E5,f=f.getTime(),r){case "+":return new Date(n+f);case "-":return new Date(n-f);case "*":return new Date(n*f);case "/":return new Date(n/f)}switch(r){case "+":return n+f;case "-":return n-f;case "*":return n*f;case "/":return n/f}}function ta(r,n,f,q){r=q.getAttribute(r,n);return null!=r&&1===f[n]?new Date(r):r}const Sa=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,ib=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,Ta=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,
fa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,jb=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,Ua=new Set(["current_timestamp","current_date","current_time"]);let kb=function(){function r(){}r.makeBool=function(n){return!0===n};r.featureValue=function(n,f,q,y){return ta(n,f,q,y)};r.equalsNull=function(n){return null===n};r.applyLike=function(n,f,q){return C(n,f,q)};r.ensureArray=function(n){return g(n)};r.applyIn=function(n,f){return m(n,f)};r.currentDate=
function(){const n=new Date;n.setHours(0,0,0,0);return n};r.makeSqlInterval=function(n,f,q){return z.SqlInterval.createFromValueAndQualifer(n,f,q)};r.convertInterval=function(n){return n instanceof z.SqlInterval?n.valueInMilliseconds():n};r.currentTimestamp=function(){return new Date};r.compare=function(n,f,q){return K(n,f,q)};r.calculate=function(n,f,q){return ya(n,f,q)};r.makeComparable=function(n){return J(n)};r.evaluateFunction=function(n,f){return z.evaluateFunction(n,f)};r.lookup=function(n,
f){n=f[n];return void 0===n?null:n};r.between=function(n,f){return null==n||null==f[0]||null==f[1]?null:n>=f[0]&&n<=f[1]};r.notbetween=function(n,f){return null==n||null==f[0]||null==f[1]?null:n<f[0]||n>f[1]};r.ternaryNot=function(n){return w(n)};r.ternaryAnd=function(n,f){return v(n,f)};r.ternaryOr=function(n,f){return A(n,f)};return G._createClass(r)}(),Va=function(){function r(f,q){this.fieldsIndex=q;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=L.WhereGrammar.parse(f);
const {isStandardized:y,isAggregate:B,referencedFieldNames:F}=this._extractExpressionInfo(q);this._referencedFieldNames=F;this.isStandardized=y;this.isAggregate=B}r.create=function(f,q){return new r(f,q)};var n=r.prototype;n.testSet=function(f,q=ha){const y={};for(const B of this.fieldNames)y[B]=f.map(F=>q.getAttribute(F,B));return!!this._evaluateNode(this.parseTree,{attributes:y},ha)};n.calculateValue=function(f,q=ha){f=this._evaluateNode(this.parseTree,f,q);return f instanceof z.SqlInterval?f.valueInMilliseconds()/
864E5:f};n.calculateValueCompiled=function(f,q=ha){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(f,this.parameters,q,this._datefields);if(M("esri-csp-restrictions"))return this.calculateValue(f,q);this._compileMe();return this.parseTree._compiledVersion(f,this.parameters,q,this._datefields)};n.testFeature=function(f,q=ha){return!!this._evaluateNode(this.parseTree,f,q)};n.testFeatureCompiled=function(f,q=ha){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(f,
this.parameters,q,this._datefields);if(M("esri-csp-restrictions"))return this.testFeature(f,q);this._compileMe();return!!this.parseTree._compiledVersion(f,this.parameters,q,this._datefields)};n.getFunctions=function(){const f=new Set;this._visitAll(this.parseTree,q=>{"function"===q.type&&f.add(q.name.toLowerCase())});return Array.from(f)};n.getExpressions=function(){const f=new Map;this._visitAll(this.parseTree,q=>{if("function"===q.type){const y=q.name.toLowerCase();q=q.args.value[0];if("column-reference"===
q.type){q=q.column;const B=`${y}-${q}`;f.has(B)||f.set(B,{aggregateType:y,field:q})}}});return[...f.values()]};n.getVariables=function(){const f=new Set;this._visitAll(this.parseTree,q=>{"parameter"===q.type&&f.add(q.value.toLowerCase())});return Array.from(f)};n._compileMe=function(){const f="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",f)).bind(kb)};n._extractExpressionInfo=
function(f){const q=[],y=new Set;let B=!0,F=!0;this._visitAll(this.parseTree,S=>{switch(S.type){case "column-reference":const T=f?.get(S.column);let da,ea;T?da=ea=T.name??"":(ea=S.column,da=ea.toLowerCase());T&&T.name&&("date"===T.type||"esriFieldTypeDate"===T.type)&&(this._datefields[T.name]=1);y.has(da)||(y.add(da),q.push(ea));S.column=ea;break;case "function":const {name:xa,args:Hb}=S;S=Hb.value.length;B&&(B=z.isStandardized(xa,S));F&&(F=R.isAggregate(xa,S))}});return{referencedFieldNames:Array.from(q),
isStandardized:B,isAggregate:F}};n._visitAll=function(f,q){if(null!=f)switch(q(f),f.type){case "when-clause":this._visitAll(f.operand,q);this._visitAll(f.value,q);break;case "case-expression":for(const y of f.clauses)this._visitAll(y,q);"simple"===f.format&&this._visitAll(f.operand,q);null!==f.else&&this._visitAll(f.else,q);break;case "expression-list":for(const y of f.value)this._visitAll(y,q);break;case "unary-expression":this._visitAll(f.expr,q);break;case "binary-expression":this._visitAll(f.left,
q);this._visitAll(f.right,q);break;case "function":this._visitAll(f.args,q)}};n.evaluateNodeToJavaScript=function(f){switch(f.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(f.value)+", "+JSON.stringify(f.qualifier)+","+JSON.stringify(f.op)+")";case "case-expression":var q="";if("simple"===f.format){var y="this.makeComparable("+this.evaluateNodeToJavaScript(f.operand)+")";q="( ";for(let B=0;B<f.clauses.length;B++)q+=" ("+y+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(f.clauses[B].operand)+
")) ? ("+this.evaluateNodeToJavaScript(f.clauses[B].value)+") : "}else for(q="( ",y=0;y<f.clauses.length;y++)q+=" this.makeBool("+this.evaluateNodeToJavaScript(f.clauses[y].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(f.clauses[y].value)+") : ";q=null!==f.else?q+this.evaluateNodeToJavaScript(f.else):q+"null";return q+" )";case "parameter":return"this.lookup("+JSON.stringify(f.value.toLowerCase())+",lookups)";case "expression-list":q="[";for(y of f.value)"["!==q&&(q+=","),q+=this.evaluateNodeToJavaScript(y);
return q+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(f.expr)+")";case "binary-expression":switch(f.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+
")";case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(f.left)+
","+this.evaluateNodeToJavaScript(f.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")"}throw Error("Not Supported Operator "+f.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(f.value);case "date":return"(new Date("+h(f.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+k(f.value).getTime().toString()+"))";case "current-time":return"date"===f.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(f.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(f.name)+","+this.evaluateNodeToJavaScript(f.args)+")"}throw Error("Unsupported sql syntax "+f.type);};n._evaluateNode=function(f,q,y){switch(f.type){case "interval":return q=
this._evaluateNode(f.value,q,y),z.SqlInterval.createFromValueAndQualifer(q,f.qualifier,f.op);case "case-expression":if("simple"===f.format){var B=J(this._evaluateNode(f.operand,q,y));for(var F=0;F<f.clauses.length;F++)if(B===J(this._evaluateNode(f.clauses[F].operand,q,y)))return this._evaluateNode(f.clauses[F].value,q,y)}else for(B=0;B<f.clauses.length;B++)if(!0===this._evaluateNode(f.clauses[B].operand,q,y))return this._evaluateNode(f.clauses[B].value,q,y);return null!==f.else?this._evaluateNode(f.else,
q,y):null;case "parameter":return this.parameters[f.value.toLowerCase()];case "expression-list":B=[];for(F of f.value)B.push(this._evaluateNode(F,q,y));return B;case "unary-expression":return w(this._evaluateNode(f.expr,q,y));case "binary-expression":switch(f.operator){case "AND":return v(this._evaluateNode(f.left,q,y),this._evaluateNode(f.right,q,y));case "OR":return A(this._evaluateNode(f.left,q,y),this._evaluateNode(f.right,q,y));case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(f.left,q,y);case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(f.left,q,y);case "IN":return B=g(this._evaluateNode(f.right,q,y)),m(this._evaluateNode(f.left,q,y),B);case "NOT IN":return B=g(this._evaluateNode(f.right,q,y)),w(m(this._evaluateNode(f.left,q,y),B));case "BETWEEN":return B=this._evaluateNode(f.left,q,y),f=this._evaluateNode(f.right,q,y),null==B||null==f[0]||null==f[1]?null:B>=J(f[0])&&B<=J(f[1]);
case "NOTBETWEEN":return B=this._evaluateNode(f.left,q,y),f=this._evaluateNode(f.right,q,y),null==B||null==f[0]||null==f[1]?null:B<J(f[0])||B>J(f[1]);case "LIKE":return C(this._evaluateNode(f.left,q,y),this._evaluateNode(f.right,q,y),f.escape);case "NOT LIKE":return w(C(this._evaluateNode(f.left,q,y),this._evaluateNode(f.right,q,y),f.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return K(f.operator,this._evaluateNode(f.left,q,y),this._evaluateNode(f.right,
q,y));case "-":case "+":case "*":case "/":case "||":return ya(f.operator,this._evaluateNode(f.left,q,y),this._evaluateNode(f.right,q,y))}case "null":case "boolean":case "string":case "number":return f.value;case "date":return h(f.value);case "timestamp":return k(f.value);case "current-time":return q=new Date,"date"===f.mode&&q.setHours(0,0,0,0),q;case "column-reference":return ta(q,f.column,this._datefields,y);case "data-type":return f.value;case "function":return q=this._evaluateNode(f.args,q,y),
this.isAggregate?R.aggregateFunction(f.name,q):z.evaluateFunction(f.name,q)}throw Error("Unsupported sql syntax "+f.type);};G._createClass(r,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,f=>{"current-time"===f.type?this._hasDateFunctions=!0:"function"===f.type&&(this._hasDateFunctions=this._hasDateFunctions||Ua.has(f.name.toLowerCase()))});
return this._hasDateFunctions}}]);return r}();var la;(function(r){r[r.Normal=0]="Normal";r[r.Escaped=1]="Escaped"})(la||(la={}));const ha={getAttribute(r,n){return(r&&"object"===typeof r.attributes?r.attributes:r)[n]}};u.WhereClause=Va;u.defaultAttributeAdapter=ha;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});