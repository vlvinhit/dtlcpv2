// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ./ObservableBase ./PropertyOrigin ./tracking ./tracking/Flags".split(" "),function(m,h,p,q,l,c){let t=function(){function k(b,a){this.propertyName=b;this.metadata=a;this.observerObject=new r;this._handles=this._accessed=null;this.observerObject.flags=c.Flags.Dirty|(a.nonNullable?c.Flags.NonNullable:0)|(a.hasOwnProperty("value")?c.Flags.HasDefaultValue:0)|(void 0===a.get?c.Flags.DepTrackingInitialized:0)|(void 0===a.dependsOn?c.Flags.AutoTracked:
0)}var e=k.prototype;e.destroy=function(){this.observerObject.destroy();this._accessed=null;this._clearObservationHandles()};e.getComputed=function(b){const a=this.observerObject;l.trackAccess(a);var d=b.store;const f=this.propertyName;var g=a.flags;const n=d.get(f);if(g&c.Flags.Computing||~g&c.Flags.Dirty&&d.has(f))return n;a.flags|=c.Flags.Computing;b=b.host;g&c.Flags.AutoTracked?g=l.runTracked(this,this.metadata.get,b):(l.trackExplicitDependencies(b,this),g=this.metadata.get.call(b));d.set(f,g,
q.OriginId.COMPUTED);d=d.get(f);d===n?a.flags&=~c.Flags.Dirty:l.runUntracked(this.commit,this);a.flags&=~c.Flags.Computing;return d};e.onObservableAccessed=function(b){if(b!==this.observerObject){var a=this._accessed;if(null==a)this._accessed=a=[];else if(a.includes(b))return;a.push(b)}};e.onTrackingEnd=function(){this._clearObservationHandles();const b=this.observerObject;b.flags|=c.Flags.DepTrackingInitialized;const a=this._accessed;if(null!=a&&0!==a.length){var d=this._handles;null==d&&(this._handles=
d=[]);for(let f=0;f<a.length;++f)d.push(a[f].observe(b));a.length=0}};e.notifyChange=function(){const b=this.observerObject;b.onInvalidated();b.onCommitted()};e.invalidate=function(){this.observerObject.onInvalidated()};e.commit=function(){const b=this.observerObject;b.flags&=~c.Flags.Dirty;b.onCommitted()};e._clearObservationHandles=function(){const b=this._handles;if(null!==b){for(let a=0;a<b.length;++a)b[a].remove();b.length=0}};return h._createClass(k)}(),r=function(k){function e(){var a=k.apply(this,
arguments)||this;a.flags=0;return a}h._inherits(e,k);var b=e.prototype;b.onInvalidated=function(){~this.flags&c.Flags.Overriden&&(this.flags|=c.Flags.Dirty);const a=this._observers;if(a&&0<a.length)for(const d of a)d.onInvalidated()};b.onCommitted=function(){var a=this._observers;if(a&&0<a.length){a=a.slice();for(const d of a)d.onCommitted()}};b.destroy=function(){if(this.flags&c.Flags.Dirty)this.onCommitted();h._get(h._getPrototypeOf(e.prototype),"destroy",this).call(this)};return h._createClass(e)}(p.ObservableBase);
m.Property=t;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});