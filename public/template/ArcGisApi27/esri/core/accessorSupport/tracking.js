// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../has","../Logger","./utils","./tracking/Flags"],function(e,C,A,t,k){function u(a){f.onObservableAccessed(a)}function v(a,b,d){if(l)return m(a,b,d);f=a;g.push(a);a=b.call(d);w();return a}function m(a,b,d){const c=l;l=!0;f=a;g.push(a);a=null;try{a=b.call(d)}catch(h){n&&A.getLogger("esri.core.accessorSupport.tracking").error(h)}w();l=c;return a}function w(){var a=g.length;if(1<a){const b=g.pop();f=g[a-2];b.onTrackingEnd()}else 1===a?(a=g.pop(),f=p,a.onTrackingEnd()):f=p}function x(a,
b){const d=b.observerObject;if(!(d.flags&k.Flags.DepTrackingInitialized)){var c=n;n=!1;d.flags&k.Flags.AutoTracked?m(b,b.metadata.get,a):y(a,b);n=c}}function y(a,b){const d=b.observerObject;d.flags&k.Flags.ExplicitlyTracking||(d.flags|=k.Flags.ExplicitlyTracking,m(b,()=>{var c=b.metadata.dependsOn||B;for(const h of c)if("string"!==typeof h||h.includes(".")){c=t.pathToArray(h);for(let q=0,r=a;q<c.length&&null!=r&&"object"===typeof r;++q)r=z(r,c[q],q!==c.length-1)}else z(a,h,!1)}),d.flags&=~k.Flags.ExplicitlyTracking)}
function z(a,b,d){b="?"===b[b.length-1]?b.slice(0,-1):b;if(null!=a.getItemAt||Array.isArray(a)){var c=parseInt(b,10);if(!isNaN(c))return Array.isArray(a)?a[c]:a.at(c)}if(c=t.getProperties(a))if(c=c.propertiesByName.get(b))u(c.observerObject),x(a,c);return d?a[b]:void 0}const p={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},g=[];let f=p,l=!1,n=!1;const B=[];e.initializeDependencyTracking=x;e.runTracked=v;e.runTrackedNoThrow=m;e.runUntracked=function(a,b){return v(p,a,b)};e.trackAccess=u;e.trackExplicitDependencies=
y;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});