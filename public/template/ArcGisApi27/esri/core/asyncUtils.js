// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(d,r,h,w,t,m,k,x){function n(a){return{ok:!0,value:a}}function p(a){return{ok:!1,error:a}}function u(a){return null!=a&&!0===a.ok?a.value:null}function v(a){return null!=a&&!1===a.ok?a.error:null}let e=function(a){function c(f,l){var b=a.call(this,{})||this;b._result=null;b._abortHandle=null;b.abort=
()=>{b._abortController=t.abortMaybe(b._abortController)};b.remove=b.abort;b._abortController=new AbortController;const {signal:y}=b._abortController;b.promise=f(y);b.promise.then(q=>{b._result=n(q);b._cleanup()},q=>{b._result=p(q);b._cleanup()});b._abortHandle=m.onAbort(l,b.abort);return b}r._inherits(c,a);var g=c.prototype;g.normalizeCtorArgs=function(){return{}};g.destroy=function(){this.abort()};g._cleanup=function(){this._abortHandle=t.removeMaybe(this._abortHandle);this._abortController=null};
r._createClass(c,[{key:"value",get:function(){return u(this._result)}},{key:"error",get:function(){return v(this._result)}},{key:"finished",get:function(){return null!=this._result}}]);return c}(w);h.__decorate([k.property()],e.prototype,"value",null);h.__decorate([k.property()],e.prototype,"error",null);h.__decorate([k.property()],e.prototype,"finished",null);h.__decorate([k.property()],e.prototype,"promise",void 0);h.__decorate([k.property()],e.prototype,"_result",void 0);e=h.__decorate([x.subclass("esri.core.asyncUtils.ReactiveTask")],
e);d.assertResult=function(a){if(!0===a.ok)return a.value;throw a.error;};d.createTask=function(a,c){return new e(a,c)};d.forEach=function(a,c,g){return m.eachAlways(a.map((f,l)=>c.apply(g,[f,l])))};d.makeResultError=p;d.makeResultOk=n;d.map=async function(a,c,g){return(await m.eachAlways(a.map((f,l)=>c.apply(g,[f,l])))).map(f=>f.value)};d.result=async function(a){if(null==a)return{ok:!1,error:Error("no promise provided")};try{return n(await a)}catch(c){return p(c)}};d.resultError=v;d.resultOrAbort=
async function(a){try{return n(await a)}catch(c){return m.throwIfAbortError(c),p(c)}};d.resultValue=u;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});