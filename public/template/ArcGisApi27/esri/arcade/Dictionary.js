// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ./ArcadeDate ./deepClone ./executionError ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry".split(" "),function(t,n,u,l,v,f,p){function m(e,h,a=!1,b=!1){if(null===e||void 0===e)return null;if(f.isNumber(e))return f.toNumber(e);if(f.isBoolean(e))return f.toBoolean(e);if(f.isString(e))return f.toString(e);if(f.isDate(e))return f.toDate(e,h);if(f.isArray(e)){var d=[];for(var c of e)d.push(m(c,h,a,b));return d}if(b&&f.isGeometry(e))return e;c=new q;
c.immutable=!1;for(d of Object.keys(e)){const g=e[d];void 0!==g&&c.setField(d,m(g,h,a,b))}c.immutable=a;return c}let q=function(){function e(a){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=a instanceof e?a.attributes:void 0===a?{}:null===a?{}:a}var h=e.prototype;h.field=function(a){const b=a.toLowerCase(),d=this.attributes[a];if(void 0!==d)return d;for(const c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];throw new l.ArcadeExecutionError(null,
l.ExecutionErrorCodes.FieldNotFound,null,{key:a});};h.setField=function(a,b){if(this.immutable)throw new l.ArcadeExecutionError(null,l.ExecutionErrorCodes.Immutable,null);if(f.isFunctionParameter(b))throw new l.ArcadeExecutionError(null,l.ExecutionErrorCodes.NoFunctionInDictionary,null);const d=a.toLowerCase();b instanceof Date&&(b=n.ArcadeDate.dateJSToArcadeDate(b));if(void 0===this.attributes[a])for(const c in this.attributes)if(c.toLowerCase()===d){this.attributes[c]=b;return}this.attributes[a]=
b};h.hasField=function(a){const b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(const d in this.attributes)if(d.toLowerCase()===b)return!0;return!1};h.keys=function(){let a=[];for(const b in this.attributes)a.push(b);return a=a.sort()};h.castToText=function(a=!1){let b="";for(const d in this.attributes){""!==b&&(b+=",");const c=this.attributes[d];null==c?b+=JSON.stringify(d)+":null":f.isBoolean(c)||f.isNumber(c)||f.isString(c)?b+=JSON.stringify(d)+":"+JSON.stringify(c):c instanceof p?
b+=JSON.stringify(d)+":"+f.toStringExplicit(c):c instanceof v?b+=JSON.stringify(d)+":"+f.toStringExplicit(c,null,a):c instanceof Array?b+=JSON.stringify(d)+":"+f.toStringExplicit(c,null,a):c instanceof n.ArcadeDate?b=a?b+(JSON.stringify(d)+":"+JSON.stringify(c.getTime())):b+(JSON.stringify(d)+":"+c.stringify()):null!==c&&"object"===typeof c&&void 0!==c.castToText&&(b+=JSON.stringify(d)+":"+c.castToText(a))}return"{"+b+"}"};e.convertObjectToArcadeDictionary=function(a,b,d=!0,c=!1){const g=new e;g.immutable=
!1;for(const k in a){const r=a[k];void 0!==r&&g.setField(k.toString(),m(r,b,d,c))}g.immutable=d;return g};e.convertJsonToArcade=function(a,b,d=!1){return m(a,b,d)};h.castAsJson=function(a=null){const b={};for(let d in this.attributes){const c=this.attributes[d];void 0!==c&&(a?.keyTranslate&&(d=a.keyTranslate(d)),b[d]=f.castAsJson(c,a))}return b};h.castDictionaryValueAsJsonAsync=async function(a,b,d,c=null,g){d=await f.castAsJsonAsync(d,c,g);return a[b]=d};h.castAsJsonAsync=async function(a=null,b=
null){const d={},c=[];for(let g in this.attributes){const k=this.attributes[g];b?.keyTranslate&&(g=b.keyTranslate(g));void 0!==k&&(f.isSimpleType(k)||k instanceof p||k instanceof n.ArcadeDate?d[g]=f.castAsJson(k,b):c.push(this.castDictionaryValueAsJsonAsync(d,g,k,a,b)))}0<c.length&&await Promise.all(c);return d};h.deepClone=function(){const a=new e;a.immutable=!1;for(const b of this.keys())a.setField(b,u.deepClone(this.field(b)));return a};return t._createClass(e)}();return q});