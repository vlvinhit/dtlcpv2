// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../Color","../../core/colorUtils","../../chunks/vec4f64"],function(f,h,k,y){async function p(a){await a.whenReady();var b=a.basemapView?.baseLayerViews.map(g=>g.layer).toArray()??[];if(!b.length)return b=(b=getComputedStyle(a.container).backgroundColor)&&new h(b),a.get("background.color")||(b&&0!==b.a?b:null)||null;a=(await a.takeScreenshot({format:"png",layers:b})).data.data;b=a.length;let c=0,e=0,d=0,q=0,l=0,r=0;for(let g=0;g<b;g+=4){const t=a[g],u=a[g+1],v=a[g+2],n=a[g+3],
m=n/255;c+=t*t*m;e+=u*u*m;d+=v*v*m;l+=m;n&&(q+=n,r++)}c=Math.round(Math.sqrt(c/l));e=Math.round(Math.sqrt(e/l));d=Math.round(Math.sqrt(d/l));return new h([c,e,d,q/r/255])}function w(a){return x(a).isBright?"light":"dark"}function x(a){let {r:b,g:c,b:e,a:d}=a;1>d&&(b=Math.round(d*b+255*(1-d)),c=Math.round(d*c+255*(1-d)),e=Math.round(d*e+255*(1-d)));return new h({r:b,g:c,b:e})}f.darken=function(a,b){var c=k.toLAB(a);c.l*=1-b;b=k.toRGB(c);c=a.clone();c.setColor(b);c.a=a.a;return c};f.desaturate=function(a,
b){var c=k.toHSV(a);c.s*=b;b=k.toRGB(c);c=a.clone();c.setColor(b);c.a=a.a;return c};f.getBackgroundColor=p;f.getBackgroundColorTheme=async function(a){if(!a)return null;a=await p(a);return null!=a?w(a):null};f.getColorLuminance=function(a,b){const {r:c,g:e,b:d}=b?.ignoreAlpha?a:x(a);return.2126*c+.7152*e+.0722*d};f.getColorTheme=w;f.multiplyOpacity=function(a,b){a=a.clone();a.a*=b;return a};f.unitRGBAFromColor=function(a){return y.fromArray(h.toUnitRGBA(a))};Object.defineProperty(f,Symbol.toStringTag,
{value:"Module"})});