// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/arrayUtils ../../core/domUtils ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils ../../intl/locale".split(" "),function(w,l,h,z,r,A,n,p,B,H,C,D,t,E,x){function q(g){return 0===g?"0":`${g}px`}function u(g){const k=
"object"===typeof g&&null!==g&&Object.getPrototypeOf(g);return null!==k&&k!==Object.prototype||!("component"in g||"index"in g||"position"in g)?null:g}function v(g,{top:k,bottom:e,left:a,right:b}){g.style.top=k;g.style.bottom=e;g.style.left=a;g.style.right=b}const F={left:0,top:0,bottom:0,right:0},y={bottom:30,top:15,right:15,left:15};h=function(g){function k(a){var b=g.call(this,a)||this;b._cornerNameToContainerLookup={};b._positionNameToContainerLookup={};b._components=[];b._componentMap=new Map;
b._locale=x.getLocale();b.view=null;b._applyViewPadding=()=>{const c=b.container;c&&v(c,b._toPixelPosition(b._getViewPadding()))};b._applyUIPadding=()=>{const c=b._innerContainer;c&&v(c,b._toPixelPosition(b.padding))};b._initContainers();return b}w._inherits(k,g);var e=k.prototype;e.initialize=function(){this.addHandles([n.watch(()=>[this.view?.padding,this.container],this._applyViewPadding,n.initial),n.watch(()=>this.padding,this._applyUIPadding,n.initial),n.watch(()=>[this.container,this._locale],
([a,b])=>{a&&a.setAttribute("lang",b)},n.initial),x.onLocaleChange(a=>{this._locale=a})])};e.destroy=function(){this.container=null;for(const a of this._components)a.destroy();this._components.length=0;this._componentMap.clear()};e.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:{...y,...a}};e.add=function(a,b){let c,d,f;if(Array.isArray(a))a.forEach(G=>this.add(G,b));else{var m=u(a);m&&({index:c,position:b,component:a,key:d}=m);b&&"object"===typeof b&&({index:c,
key:d,position:b,internal:f}=b);!a||b&&!this._isValidPosition(b)||this._add(a,b,c,d,f)}};e.remove=function(a,b){if(a){if(Array.isArray(a))return a.map(f=>this.remove(f,b));var c=this._find(a);if(c&&(!this._componentMap.has(a)||this._componentMap.get(a)?.key===b)){var d=this._components.indexOf(c);c.node.parentNode?.removeChild(c.node);this._componentMap.delete(a);return this._components.splice(d,1)[0]}}};e.empty=function(a,b={removeInternal:!1}){if(Array.isArray(a))for(const c of a)this.empty(c,b);
else{a=Array.prototype.slice.call(this._positionNameToContainerLookup[a??"manual"].children).map(c=>this._findByNode(c)).filter(c=>null==c?!1:!(this._componentMap.get(c)?.internal??!1)||b.removeInternal);for(const c of a)this.remove(c)}};e.move=function(a,b){Array.isArray(a)&&a.forEach(f=>this.move(f,b));if(a){var c=u(a)||u(b);if(c){var d=c.index;b=c.position;a=c.component||a}(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};e.find=function(a){return a?(a=this._findById(a))&&
(a.widget||a.node):null};e.getComponents=function(a,b={includeInternal:!1}){return a?Array.isArray(a)?a.map(c=>this._getComponentsAtPosition(c,b)).flat():this._getComponentsAtPosition(a,b):this._components.filter(c=>b.includeInternal||!(this._componentMap.get(c)?.internal??!1)).map(({widget:c,node:d})=>c??d)};e.getPosition=function(a){for(const b in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[b].contains(a))return b;return null};e._add=function(a,b,c,d,f){a instanceof
t||(a=new t({node:a}));this._place({component:a,position:b,index:c});this._components.push(a);this._componentMap.set(a,{key:d,internal:f})};e._find=function(a){return a?a instanceof t?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a):null};e._getViewPadding=function(){return this.view?.padding??F};e._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};e._initContainers=function(){var a=document.createElement("div");
a.classList.add("esri-ui-inner-container","esri-ui-corner-container");const b=document.createElement("div");b.classList.add("esri-ui-inner-container","esri-ui-manual-container");const c=document.createElement("div");c.classList.add("esri-ui-top-left","esri-ui-corner");a.appendChild(c);const d=document.createElement("div");d.classList.add("esri-ui-top-right","esri-ui-corner");a.appendChild(d);const f=document.createElement("div");f.classList.add("esri-ui-bottom-left","esri-ui-corner");a.appendChild(f);
const m=document.createElement("div");m.classList.add("esri-ui-bottom-right","esri-ui-corner");a.appendChild(m);this._innerContainer=a;this._manualContainer=b;a=E.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":f,"bottom-right":m,"top-leading":a?d:c,"top-trailing":a?c:d,"bottom-leading":a?m:f,"bottom-trailing":a?f:m};this._positionNameToContainerLookup={manual:b,...this._cornerNameToContainerLookup}};e._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};
e._place=function(a){var b=a.position??"manual";const {component:c,index:d}=a;a=this._positionNameToContainerLookup[b];b=null!=d&&-1<d;var f=c.widget;f&&!f._started&&"function"===typeof f.postMixInProperties&&"function"===typeof f.buildRendering&&"function"===typeof f.postCreate&&"function"===typeof f.startup&&c.widget.startup();b?(b=Array.from(a.children),0===d?a.firstChild?r.insertBefore(c.node,a.firstChild):a.appendChild(c.node):d>=b.length?a.appendChild(c.node):r.insertBefore(c.node,b[d])):a.appendChild(c.node)};
e._toPixelPosition=function(a){return{top:q(a.top),left:q(a.left),right:q(a.right),bottom:q(a.bottom)}};e._findByComponent=function(a){return this._components.find(b=>b===a)??null};e._findById=function(a){return this._components.find(({id:b})=>b===a)??null};e._findByNode=function(a){return this._components.find(({node:b})=>b===a)??null};e._getComponentsAtPosition=function(a,b){return Array.prototype.slice.call(this._positionNameToContainerLookup[a].children).map(c=>this._findByNode(c)).filter(z.isSome).filter(c=>
b.includeInternal||!(this._componentMap.get(c)?.internal??!1)).map(({widget:c,node:d})=>c??d)};w._createClass(k,[{key:"container",set:function(a){const b=this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),D.setCalciteThemeClass(a),this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),v(b,{top:"",bottom:"",left:"",right:""}),r.empty(b)),this._set("container",a))}},{key:"height",get:function(){const a=this.view?.height??0;if(0===a)return a;const b=this._getViewPadding(),{top:c,bottom:d}=
b;return Math.max(a-c-d,0)}},{key:"padding",get:function(){return this._get("padding")},set:function(a){this._overrideIfSome("padding",a)}},{key:"width",get:function(){const a=this.view?.width??0;if(0===a)return a;const b=this._getViewPadding(),{left:c,right:d}=b;return Math.max(a-c-d,0)}}]);return k}(A.EventedAccessor);l.__decorate([p.property()],h.prototype,"_locale",void 0);l.__decorate([p.property()],h.prototype,"container",null);l.__decorate([p.property()],h.prototype,"height",null);l.__decorate([p.property({value:y})],
h.prototype,"padding",null);l.__decorate([B.cast("padding")],h.prototype,"castPadding",null);l.__decorate([p.property()],h.prototype,"view",void 0);l.__decorate([p.property()],h.prototype,"width",null);return h=l.__decorate([C.subclass("esri.views.ui.UI")],h)});