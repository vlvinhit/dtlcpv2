// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e,b,a,d,v,A){var q;k=new k.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});l=q=function(y){function D(c){c=y.call(this,c)||this;c.dpi=96;c.format=null;c.origin=null;c.size=null;c.spatialReference=null;return c}f._inherits(D,y);D.create=function(c={}){const {resolutionFactor:x=
1,scales:G,size:E=256,spatialReference:I=e.WebMercator,numLODs:L=24}=c;if(!a.isValid(I)){c=[];if(G)for(var R=0;R<G.length;R++){var S=G[R];c.push(new v({level:R,scale:S,resolution:S}))}else for(R=5E-4,S=L-1;0<=S;S--)c.unshift(new v({level:S,scale:R,resolution:R})),R*=2;return new q({dpi:96,lods:c,origin:new g(0,0,I),size:[E,E],spatialReference:I})}R=a.getInfo(I);c=c.origin?new g({x:c.origin.x,y:c.origin.y,spatialReference:I}):R?new g({x:R.origin[0],y:R.origin[1],spatialReference:I}):new g({x:0,y:0,
spatialReference:I});R=1/(39.37*u.getMetersPerUnitForSR(I)*96);S=[];if(G)for(var Y=0;Y<G.length;Y++){var da=G[Y];S.push(new v({level:Y,scale:da,resolution:da*R}))}else{var B=a.isGeographic(I)?512/E*5.916575275917094E8:256/E*5.91657527591555E8;Y=Math.ceil(L/x);S.push(new v({level:0,scale:B,resolution:B*R}));for(da=1;da<Y;da++)B/=2**x,S.push(new v({level:da,scale:B,resolution:B*R}))}return new q({dpi:96,lods:S,origin:c,size:[E,E],spatialReference:I})};var C=D.prototype;C.readOrigin=function(c,x){return g.fromJSON({spatialReference:x.spatialReference,
...c})};C.readSize=function(c,x){return[x.cols,x.rows]};C.writeSize=function(c,x){x.cols=c[0];x.rows=c[1]};C.zoomToScale=function(c){const x=this.scales;if(0>=c)return x[0];if(c>=x.length-1)return x[x.length-1];const G=Math.floor(c);return x[G]/(x[G]/x[G+1])**(c-G)};C.scaleToZoom=function(c){const x=this.scales,G=x.length-1;let E=0;for(;E<G;E++){const I=x[E],L=x[E+1];if(I<=c)break;if(L===c)return E+1;if(I>c&&L<c)return E+Math.log(I/c)/Math.log(I/L)}return E};C.snapScale=function(c,x=.95){c=this.scaleToZoom(c);
return c%Math.floor(c)>=x?this.zoomToScale(Math.ceil(c)):this.zoomToScale(Math.floor(c))};C.tileAt=function(c,x,G,E){var I=this.lodAt(c);if(!I)return null;let L;if("number"===typeof x)L=x,x=G;else{if(a.equals(x.spatialReference,this.spatialReference))L=x.x,x=x.y;else{E=d.project(x,this.spatialReference);if(null==E)return null;L=E.x;x=E.y}E=G}G=I.resolution*this.size[0];I=I.resolution*this.size[1];E||(E=new A.TileKey(null,0,0,0,b.create()));E.level=c;E.row=Math.floor((this.origin.y-x)/I+.001);E.col=
Math.floor((L-this.origin.x)/G+.001);this.updateTileInfo(E);return E};C.updateTileInfo=function(c,x=q.ExtrapolateOptions.NONE){var G=this.lodAt(c.level);G||x!==q.ExtrapolateOptions.POWER_OF_TWO||(x=this.lods[this.lods.length-1],x.level<c.level&&(G=x));if(G){var E=c.level-G.level;x=G.resolution*this.size[0]/2**E;G=G.resolution*this.size[1]/2**E;c.id=`${c.level}/${c.row}/${c.col}`;c.extent||(c.extent=b.create());c.extent[0]=this.origin.x+c.col*x;c.extent[1]=this.origin.y-(c.row+1)*G;c.extent[2]=c.extent[0]+
x;c.extent[3]=c.extent[1]+G}};C.upsampleTile=function(c){const x=this._upsampleLevels[c.level];if(!x||-1===x.parentLevel)return!1;c.level=x.parentLevel;c.row=Math.floor(c.row/x.factor+.001);c.col=Math.floor(c.col/x.factor+.001);this.updateTileInfo(c);return!0};C.getTileBounds=function(c,x){var G=this.lodAt(x.level);if(null==G)return null;var {resolution:E}=G;G=E*this.size[0];E*=this.size[1];c[0]=this.origin.x+x.col*G;c[1]=this.origin.y-(x.row+1)*E;c[2]=c[0]+G;c[3]=c[1]+E;return c};C.lodAt=function(c){return this._levelToLOD?.[c]??
null};C.clone=function(){return q.fromJSON(this.write({}))};C.getOrCreateCompatible=function(c,x){if(256===this.size[0]&&256===this.size[1])return 256===c?this:null;const G=[],E=this.lods.length;for(let I=0;I<E;I++){const L=this.lods[I];G.push(new v({level:L.level,scale:L.scale,resolution:L.resolution*x}))}return new q({size:[c,c],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:G})};C._initializeUpsampleLevels=
function(){const c=this.lods;this._upsampleLevels=[];let x=null;for(let G=0;G<c.length;G++){const E=c[G];this._upsampleLevels[E.level]={parentLevel:x?x.level:-1,factor:x?x.resolution/E.resolution:0};x=E}};f._createClass(D,[{key:"isWrappable",get:function(){const {spatialReference:c,origin:x}=this;if(c&&x){const G=a.getInfo(c);return c.isWrappable&&!!G&&Math.abs(G.origin[0]-x.x)<=G.dx}return!1}},{key:"lods",set:function(c){const x=[],G=this._levelToLOD={};c&&c.forEach(E=>{x.push(E.scale);G[E.level]=
E});this._set("scales",x);this._set("lods",c);this._initializeUpsampleLevels()}}]);return D}(l.JSONSupport);p.__decorate([r.property({type:Number,json:{write:!0}})],l.prototype,"compressionQuality",void 0);p.__decorate([r.property({type:Number,json:{write:!0}})],l.prototype,"dpi",void 0);p.__decorate([r.property({type:String,json:{read:k.read,write:k.write,origins:{"web-scene":{read:!1,write:!1}}}})],l.prototype,"format",void 0);p.__decorate([r.property({readOnly:!0})],l.prototype,"isWrappable",null);
p.__decorate([r.property({type:g,json:{write:!0}})],l.prototype,"origin",void 0);p.__decorate([t.reader("origin")],l.prototype,"readOrigin",null);p.__decorate([r.property({type:[v],value:null,json:{write:!0}})],l.prototype,"lods",null);p.__decorate([r.property({readOnly:!0})],l.prototype,"scales",void 0);p.__decorate([r.property({cast:y=>Array.isArray(y)?y:"number"===typeof y?[y,y]:[256,256]})],l.prototype,"size",void 0);p.__decorate([t.reader("size",["rows","cols"])],l.prototype,"readSize",null);
p.__decorate([h.writer("size",{cols:{type:z.Integer},rows:{type:z.Integer}})],l.prototype,"writeSize",null);p.__decorate([r.property({type:e,json:{write:!0}})],l.prototype,"spatialReference",void 0);l=q=p.__decorate([n.subclass("esri.layers.support.TileInfo")],l);(function(y){y=y.ExtrapolateOptions||(y.ExtrapolateOptions={});y[y.NONE=0]="NONE";y[y.POWER_OF_TWO=1]="POWER_OF_TWO"})(l||(l={}));return l})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,p,k,l,u,r,z,w){var m;k=m=function(t){function n(h){h=t.call(this,h)||this;h.cols=null;h.level=0;h.levelValue=null;h.origin=null;h.resolution=0;h.rows=null;h.scale=0;return h}f._inherits(n,t);n.prototype.clone=function(){return new m({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return f._createClass(n)}(k.JSONSupport);p.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,
write:!1}}}})],k.prototype,"cols",void 0);p.__decorate([l.property({type:u.Integer,json:{write:!0}})],k.prototype,"level",void 0);p.__decorate([l.property({type:String,json:{write:!0}})],k.prototype,"levelValue",void 0);p.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],k.prototype,"origin",void 0);p.__decorate([l.property({type:Number,json:{write:!0}})],k.prototype,"resolution",void 0);p.__decorate([l.property({json:{write:!0,
origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],k.prototype,"rows",void 0);p.__decorate([l.property({type:Number,json:{write:!0}})],k.prototype,"scale",void 0);return k=m=p.__decorate([w.subclass("esri.layers.support.LOD")],k)})},"esri/layers/support/TileKey":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(f,p){p=p._createClass(function(k,l,u,r,z){this.id=k;this.level=l;this.row=u;this.col=r;this.extent=z});f.TileKey=p;Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/ArrayPool ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(f,p,k,l,u,r,z,w,m,t,n,h){function g(a,d){return d?e[a].valueToClassName[d].split(" "):[]}const e={widthBreakpoint:{getValue(a){const d=
a.viewSize[0];a=a.breakpoints;const v=this.values;return d<=a.xsmall?v.xsmall:d<=a.small?v.small:d<=a.medium?v.medium:d<=a.large?v.large:v.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue(a){const d=a.viewSize[1];a=a.breakpoints;const v=this.values;return d<=a.xsmall?v.xsmall:d<=a.small?v.small:d<=a.medium?v.medium:d<=a.large?v.large:v.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue(a){a=a.viewSize;const d=this.values;return a[1]>=a[0]?d.portrait:d.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},b={xsmall:544,small:768,medium:992,large:1200};f.BreakpointsOwner=a=>{a=function(d){function v(...q){q=d.call(this,...q)||this;q._breakpointsHandles=new u;q.orientation=null;q.widthBreakpoint=null;q.heightBreakpoint=null;q.breakpoints=b;return q}
p._inherits(v,d);var A=v.prototype;A.initialize=function(){this._breakpointsHandles.add(z.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),z.initial))};A.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=r.destroyMaybe(this._breakpointsHandles))};A._updateClassNames=function(){if(this.container){var q=l.acquire(),y=l.acquire(),D=!1,C;for(C in e){const c=this[C],x=e[C].getValue({viewSize:this.size,breakpoints:this.breakpoints});c!==x&&(D=
!0,this[C]=x,g(C,c).forEach(G=>y.push(G)),g(C,x).forEach(G=>q.push(G)))}D&&(this._applyClassNameChanges(q,y),l.release(q),l.release(y))}};A._applyClassNameChanges=function(q,y){const D=this.container;D&&(y.forEach(C=>D.classList.remove(C)),q.forEach(C=>D.classList.add(C)))};A._removeActiveClassNames=function(){const q=this.container;if(q)for(var y in e)g(y,this[y]).forEach(D=>q.classList.remove(D))};p._createClass(v,[{key:"breakpoints",set:function(q){var y=this._get("breakpoints");if(q!==y){y=(y=
q)&&y.xsmall<y.small&&y.small<y.medium&&y.medium<y.large;if(!y){const D=JSON.stringify(b,null,2);console.warn("provided breakpoints are not valid, using defaults:"+D)}q=y?q:b;this._set("breakpoints",{...q})}}}]);return v}(a);k.__decorate([w.property()],a.prototype,"breakpoints",null);k.__decorate([w.property()],a.prototype,"orientation",void 0);k.__decorate([w.property()],a.prototype,"widthBreakpoint",void 0);k.__decorate([w.property()],a.prototype,"heightBreakpoint",void 0);return a=k.__decorate([h.subclass("esri.views.BreakpointsOwner")],
a)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/Logger ../core/maybe ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay".split(" "),function(f,p,k,l,u,r,z,w,m,t,n,h,g,e){function b(d){d&&
(l.empty(d),d.parentNode&&d.parentNode.removeChild(d))}const a=[0,0];f.DOMContainer=d=>{d=function(v){function A(...y){var D=v.call(this,...y)||this;D._freqInfo={freq:16,time:750};D._overlayRenderTaskHandle=null;D.height=0;D.overlay=null;D.position=null;D.resizing=!1;D.root=null;D.surface=null;D.suspended=!0;D.ui=null;D.userContent=null;D.width=0;D.widthBreakpoint=null;D.addHandles([z.watch(()=>D.cursor,C=>{const {surface:c}=p._assertThisInitialized(D);c&&c.setAttribute("data-cursor",C)}),z.watch(()=>
D.navigating,C=>{const {surface:c}=p._assertThisInitialized(D);c&&c.setAttribute("data-navigating",C.toString())})]);return D}p._inherits(A,v);var q=A.prototype;q.initialize=function(){this.addHandles([z.watch(()=>this.ui,(y,D)=>this._handleUIChange(y,D),z.initial),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};q.destroy=function(){this.destroyed||(this.ui=r.destroyMaybe(this.ui),this.container=null)};q.blur=function(){this.surface?.blur()};q.focus=
function(){this.surface?.focus()};q.pageToContainer=function(y,D,C){const c=this.position;y-=c?c[0]:0;D-=c?c[1]:0;C?(C[0]=y,C[1]=D):C=[y,D];return C};q.containerToPage=function(y,D,C){const c=this.position;y+=c?c[0]:0;D+=c?c[1]:0;C?(C[0]=y,C[1]=D):C=[y,D];return C};q._handleUIChange=function(y,D){this.removeHandles("ui");D&&D!==y&&D.destroy();y&&(y.view=this,this.addHandles(z.watch(()=>this.root,C=>{if(C){const c=document.createElement("div");C.appendChild(c);C=c}else C=null;y.container=C},z.initial),
"ui"));this._set("ui",y)};q._stopMeasuring=function(){this.removeHandles("measuring");this._get("resizing")&&this._set("resizing",!1)};q._startMeasuring=function(){const y=this._freqInfo;y.freq=16;y.time=750;this.addHandles([(()=>{const D=()=>{y.freq=16;y.time=750};window.addEventListener("resize",D);return{remove(){window.removeEventListener("resize",D)}}})(),w.addFrameTask({prepare:D=>{const C=this._measure(),c=this._freqInfo;c.time+=D.deltaTime;C&&(c.freq=16,this._get("resizing")||this._set("resizing",
!0));c.time<c.freq||(c.time=0,this._position()||C?c.freq=16:c.freq=Math.min(750,2*c.freq),!C&&512<=c.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};q._measure=function(){var y=this.container;const D=y?y.clientWidth:0;y=y?y.clientHeight:0;if(0===D||0===y)return this.suspended||this._set("suspended",!0),!1;const C=this.width,c=this.height;if(D===C&&y===c)return this.suspended&&this._set("suspended",!1),!1;this._set("width",D);this._set("height",
y);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:C,oldHeight:c,width:D,height:y});return!0};q._position=function(){var y=this.container;const D=this.position;var C;if(C=y)C=(y.ownerDocument||window.document).defaultView,y=y.getBoundingClientRect(),a[0]=y.left+(C?.pageXOffset??0),a[1]=y.top+(C?.pageYOffset??0),C=a;y=C;return y?D&&y[0]===D[0]&&y[1]===D[1]?!1:(this._set("position",[y[0],y[1]]),!0):!1};q.forceDOMReadyCycle=function(){};p._createClass(A,[{key:"container",get:function(){return this._get("container")??
null},set:function(y){var D=this._get("container");const C=l.byId(y);C||"string"!==typeof y||u.getLogger(this).error("#container",`element with id '${y}' not found`);if(D!==C)if(this._stopMeasuring(),D&&(D.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(b(this.root),this._set("root",null)),this.userContent&&(l.reparent(this.userContent,
D),b(this.userContent),this._set("userContent",null))),C){C.classList.add("esri-view");y=document.createElement("div");y.className="esri-view-user-storage";l.reparent(C,y);C.appendChild(y);this._set("userContent",y);y=document.createElement("div");y.className="esri-view-root";C.insertBefore(y,C.firstChild);this._set("root",y);D=document.createElement("div");D.className="esri-view-surface";D.setAttribute("role","application");D.tabIndex=0;y.appendChild(D);this._set("surface",D);var c=new e;y.appendChild(c.surface);
this._set("overlay",c);this.addHandles(z.watch(()=>c.needsRender,x=>{this._overlayRenderTaskHandle=x&&!this._overlayRenderTaskHandle?w.addFrameTask({render:()=>this.overlay?.render()}):r.removeMaybe(this._overlayRenderTaskHandle)}));this.forceDOMReadyCycle();this._set("container",C);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const y=
document.activeElement===this.surface;return document.hasFocus()&&y}},{key:"size",get:function(){return[this.width,this.height]}}]);return A}(d);k.__decorate([m.property()],d.prototype,"container",null);k.__decorate([m.property({readOnly:!0})],d.prototype,"focused",null);k.__decorate([m.property({readOnly:!0})],d.prototype,"height",void 0);k.__decorate([m.property({type:e})],d.prototype,"overlay",void 0);k.__decorate([m.property({readOnly:!0})],d.prototype,"position",void 0);k.__decorate([m.property({readOnly:!0})],
d.prototype,"resizing",void 0);k.__decorate([m.property({readOnly:!0})],d.prototype,"root",void 0);k.__decorate([m.property({value:null,readOnly:!0})],d.prototype,"size",null);k.__decorate([m.property({readOnly:!0})],d.prototype,"surface",void 0);k.__decorate([m.property({readOnly:!0})],d.prototype,"suspended",void 0);k.__decorate([m.property()],d.prototype,"ui",void 0);k.__decorate([m.property({readOnly:!0})],d.prototype,"userContent",void 0);k.__decorate([m.property({readOnly:!0})],d.prototype,
"width",void 0);k.__decorate([m.property()],d.prototype,"widthBreakpoint",void 0);return d=k.__decorate([g.subclass("esri.views.DOMContainer")],d)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/support/WatchUpdatingTracking ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h){k=function(g){function e(){var a=g.apply(this,arguments)||this;a.items=new l;a._watchUpdatingTracking=new t.WatchUpdatingTracking;a._callbacks=new Map;a._projector=h.createProjector();a._hiddenProjector=h.createProjector();return a}f._inherits(e,g);var b=e.prototype;b.initialize=function(){const a=document.createElement("div");a.className="esri-overlay-surface";this._set("surface",a);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");a.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,d=>{for(const v of d.added){const A=()=>v.render();this._callbacks.set(v,A);this._projector.append(this.surface,A)}for(const v of d.removed)d=this._projector.detach(this._callbacks.get(v)),this.surface.removeChild(d.domNode),this._callbacks.delete(v)})};b.addItem=function(a){this.items.add(a)};b.removeItem=function(a){this.items.remove(a)};b.destroy=function(){this.items.removeAll();
this._callbacks.forEach(a=>this._projector.detach(a));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};b.render=function(){this._projector.renderNow()};b.computeBoundingRect=function(a){const d=this._hiddenSurface,v=this._hiddenProjector;let A;const q=()=>A=a.render();v.append(d,q);v.renderNow();const y={left:0,top:0,right:0,bottom:0};if(A&&A.domNode){const D=A.domNode.getBoundingClientRect();y.left=D.left;y.top=D.top;y.right=D.right;y.bottom=D.bottom}for(v.detach(q);d.firstChild;)d.removeChild(d.firstChild);
return y};b.overlaps=function(a,d){a=this.computeBoundingRect(a);d=this.computeBoundingRect(d);return Math.max(a.left,d.left)<=Math.min(a.right,d.right)&&Math.max(a.top,d.top)<=Math.min(a.bottom,d.bottom)};b.prepare=async function(){await document.fonts.load(this._fontString()).catch(()=>{})};b.renderCanvas=function(a){if(this.items.some(v=>v.visible)){var d=a.getContext("2d");d.save();d.font=this._fontString();this.items.forEach(v=>{d.save();v.renderCanvas(d);d.restore()});d.restore()}};b._fontString=
function(){return`10px ${getComputedStyle(this.surface).fontFamily}`};f._createClass(e,[{key:"needsRender",get:function(){return 0<this.items.length}},{key:"updating",get:function(){return this._watchUpdatingTracking?.updating??!1}},{key:"hasVisibleItems",get:function(){return this.items.some(a=>a.visible)}}]);return e}(k);p.__decorate([u.property({readOnly:!0})],k.prototype,"surface",void 0);p.__decorate([u.property({readOnly:!0})],k.prototype,"items",void 0);p.__decorate([u.property({readOnly:!0})],
k.prototype,"needsRender",null);p.__decorate([u.property({readOnly:!0})],k.prototype,"_watchUpdatingTracking",void 0);p.__decorate([u.property({readOnly:!0})],k.prototype,"updating",null);return k=p.__decorate([m.subclass("esri.views.overlay.ViewOverlay")],k)})},"esri/views/PopupView":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/asyncUtils ../core/deprecate ../core/Error ../core/Logger ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./input/InputManager".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e,b,a){function d(q){return null!=q&&"open"in q&&"declaredClass"in q}function v(q){return null!=q&&"declaredClass"in q&&"dockOptions"in q}const A=q=>Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));p.PopupView=q=>{q=function(y){function D(){var c=y.apply(this,arguments)||this;c._popupSetupTask=null;c.popup={};c.popupEnabled=!0;return c}k._inherits(D,y);var C=D.prototype;C.initialize=function(){this.addHandles([t.watch(()=>
[this.ui,this.popup],([c,x],G)=>{if(G){const [E,I]=G;E&&d(I)&&(I.view=null,v(I)&&E.remove(I,"popup"))}c&&d(x)&&(x.view=this,v(x)&&c.add(x,{key:"popup",position:"manual",internal:!0}))},t.initial),this.on("click",c=>{this.popup&&this.popupEnabled&&("mouse"!==c.pointerType||0===c.button)&&(!d(this.popup)&&"autoOpenEnabled"in this.popup&&!1===this.popup.autoOpenEnabled||(d(this.popup)?this.popup.viewModel.handleViewClick(c):c.async(async()=>{await this.setupPopup();d(this.popup)&&!this.destroyed&&this.ready&&
this.popupEnabled&&this.popup.viewModel.handleViewClick(c)})))},a.ViewEventPriorities.WIDGET)]);t.whenOnce(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{new Promise((c,x)=>f(["../widgets/Popup"],G=>c(A(G)),x))})};C.destroy=function(){this.destroyed||this.closePopup()};C.openPopup=async function(c){d(this.popup)&&this.popup.open(c);try{await this.setupPopup(),this.popup?this.popup.open(c):w.getLogger(this).error(new z("view:null-popup","Popup is null and can't be opened"))}catch{}};
C.closePopup=function(){this._popupSetupTask?.abort();d(this.popup)&&this.popup.close()};C.fetchPopupFeatures=async function(c,x){await this.when();const {location:G,queryArea:E,layerViewsAndGraphics:I,clientOnlyGraphics:L}=await this._prepareFetchPopupFeatures(c,x);c=Promise.resolve(L);x=this._queryLayerPopupFeatures(E,I,x);const R=x.map(S=>S.promise);c=m.eachAlwaysValues([c,...R]).then(S=>Array.from(new Set(S.flat())));return{location:G,clientOnlyGraphics:L,allGraphicsPromise:c,promisesPerLayerView:x}};
C.setupPopup=async function(){this._popupSetupTask?.abort();if(this.popup&&!d(this.popup))return this._popupSetupTask=u.createTask(async c=>{const {default:x}=await new Promise((G,E)=>f(["../widgets/Popup"],I=>G(A(I)),E));m.throwIfAborted(c);this.popup&&!d(this.popup)&&(c=this.popup,delete c.open,delete c.close,this.popup=new x(c))}),this._popupSetupTask.promise};C._queryLayerPopupFeatures=function(c,x,G){return x.map(({layerView:E,graphics:I})=>{I=E.fetchPopupFeatures(c,{clientGraphics:I,event:null!=
G?G.event:void 0,signal:null!=G?G.signal:void 0,defaultPopupTemplateEnabled:null!=G?!!G.defaultPopupTemplateEnabled:!1});return{layerView:E,promise:I}})};C._isValidPopupGraphic=function(c,x){return c&&!!c.getEffectivePopupTemplate(null!=x&&x.defaultPopupTemplateEnabled)};C._prepareFetchPopupFeatures=async function(c,x){const {clientGraphics:G,queryArea:E,location:I}=await this._popupHitTestGraphics(c,x);c=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:L,clientOnlyGraphics:R}=this._graphicsPerFetchPopupLayerView(G,
c);return{clientOnlyGraphics:R,layerViewsAndGraphics:L,queryArea:E,location:I}};C._popupHitTestGraphics=async function(c,x){var G=await this.popupHitTest(c);c=G.mapPoint;G=G.results.filter(I=>"graphic"===I.type&&this._isValidPopupGraphic(I.graphic,x));const E=G.length?G[0].mapPoint:null;return{clientGraphics:G.map(I=>I.graphic),queryArea:c,location:c||E}};C._getFetchPopupLayerViews=function(){const c=[];this.allLayerViews.forEach(x=>{this._isValidPopupLayerView(x)&&c.push(x)});null!=this.graphicsView&&
this._isValidPopupLayerView(this.graphicsView)&&c.push(this.graphicsView);return c.reverse()};C._isValidPopupLayerView=function(c){return null!=c&&(!("layer"in c)||!c.suspended)&&"fetchPopupFeatures"in c};C._graphicsPerFetchPopupLayerView=function(c,x){const G=[],E=new Map;x=x.map(I=>{const L=[];"layer"in I?E.set(I.layer,L):E.set(I.graphics,L);return{layerView:I,graphics:L}});for(const I of c)(c=E.get(I.layer)||E.get(I.sourceLayer)||null)?c.push(I):G.push(I);return{layerViewsAndGraphics:x,clientOnlyGraphics:G}};
return k._createClass(D)}(q);l.__decorate([n.property({cast(y){if(!y||d(y))return y;"object"===typeof y&&(y.open=D=>{r.deprecated(w.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"});return this.openPopup(D)},y.close=()=>{r.deprecated(w.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",
{replacement:"Use view.closePopup() instead.",version:"4.27"});return this.closePopup()});return y}})],q.prototype,"popup",void 0);l.__decorate([n.property()],q.prototype,"popupEnabled",void 0);return q=l.__decorate([b.subclass("esri.views.PopupView")],q)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/maybe ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e,b,a){let d=function(){function v(A,q,y,D){const C=A.targetGeometry,c=q.targetGeometry;D?"string"===typeof D&&(D=e.parse(D)||e.easingFunctions.ease):D=e.easingFunctions.ease;this.easing=D;this.duration=y;this.sCenterX=C.x;this.sCenterY=C.y;this.sScale=A.scale;this.sRotation=A.rotation;this.tCenterX=c.x;this.tCenterY=c.y;this.tScale=q.scale;this.tRotation=q.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-
this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}v.prototype.applyRatio=function(A,q){var y=this.easing(q);let D,C;1<=q?(q=this.tCenterX,D=this.tCenterY,C=this.tRotation,y=this.tScale):(q=this.sCenterX+y*this.dCenterX,D=this.sCenterY+y*this.dCenterY,C=this.sRotation+y*this.dRotation,y=this.sScale+y*this.dScale);A.targetGeometry.x=q;A.targetGeometry.y=D;A.scale=y;A.rotation=C};return f._createClass(v)}();k=function(v){function A(y){y=
v.call(this,y)||this;y.updateFunction=null;y.animation=null;y.duration=200;y.transition=null;y.easing=e.easingFunctions.ease;y.view=null;y.viewpoint=new l({targetGeometry:new a,scale:0,rotation:0});y._updateTask=z.addFrameTask({postRender:y._postRender.bind(f._assertThisInitialized(y))});y._updateTask.pause();return y}f._inherits(A,v);var q=A.prototype;q.destroy=function(){this._updateTask=r.removeMaybe(this._updateTask)};q.animate=function(y,D,C){this.stop();b.copy(this.viewpoint,D);this.transition=
new d(this.viewpoint,y.target,C&&C.duration||this.duration,C&&C.easing||this.easing);D=()=>{this.animation===y&&this._updateTask&&("finished"===y.state&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};y.when(D,D);this._startTime=performance.now();this._updateTask.resume();return this.animation=y};q.animateContinous=function(y,D){this.stop();this.updateFunction=D;this.viewpoint=y;const C=
new g({target:y.clone()});y=()=>{this.animation===C&&this._updateTask&&(this.updateFunction=this.animation=null)};C.when(y,y);this._startTime=performance.now();this._updateTask.resume();return this.animation=C};q.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};q._postRender=function(y){var D=this.animation;if(D&&D.state!==g.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,y.deltaTime);else{y=this.transition;D=(performance.now()-
this._startTime)/y.duration;const C=1<=D;y.applyRatio(this.viewpoint,D);C&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()};return f._createClass(A)}(u);p.__decorate([w.property()],k.prototype,"animation",void 0);p.__decorate([w.property()],k.prototype,"duration",void 0);p.__decorate([w.property()],k.prototype,"transition",void 0);p.__decorate([w.property()],k.prototype,"easing",void 0);p.__decorate([w.property()],k.prototype,
"view",void 0);p.__decorate([w.property()],k.prototype,"viewpoint",void 0);return k=p.__decorate([h.subclass("esri.views.2d.AnimationManager")],k)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(f){function p(u,r,z,w){function m(a,d){var v;let A,q;A=a;for(v=0;8>v;v++){q=((h*A+n)*A+t)*A-a;if(Math.abs(q)<d)return A;var y=(3*h*A+2*n)*A+t;if(1E-6>Math.abs(y))break;A-=q/y}y=0;v=1;A=a;if(A<y)return y;if(A>v)return v;for(;y<v;){q=((h*A+n)*A+t)*A;if(Math.abs(q-a)<d)break;a>q?y=A:v=A;
A=.5*(v-y)+y}return A}const t=3*u,n=3*(z-u)-t,h=1-t-n,g=3*r,e=3*(w-r)-g,b=1-g-e;return function(a,d=1E-6){a=m(a,d);return((b*a+e)*a+g)*a}}const k=/^cubic-bezier\((.*)\)/,l={};l.ease=p(.25,.1,.25,1);l.linear=p(0,0,1,1);l.easeIn=l["ease-in"]=p(.42,0,1,1);l.easeOut=l["ease-out"]=p(0,0,.58,1);l.easeInOut=l["ease-in-out"]=p(.42,0,.58,1);f.easingFunctions=l;f.parse=function(u){let r=l[u]||null;!r&&(u=k.exec(u))&&(u=u[1].split(",").map(z=>parseFloat(z.trim())),4!==u.length||u.some(z=>isNaN(z))||(r=p.apply(p,
u)));return r};f.unitBezier=p;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../Viewpoint ../../core/Collection ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils".split(" "),function(f,
p,k,l,u,r,z,w,m,t,n,h,g,e,b){function a(H,M){return M.type?w.set(H,M.x,M.y):w.copy(H,M)}function d(H,M){return Math.max(H.width/Math.max(1,M[0]),H.height/Math.max(1,M[1]))*c(H.spatialReference)}async function v(H,M,Q,V){if(!H||Array.isArray(H)&&!H.length)return null;k.isCollection(H)&&(H=H.toArray());if(Array.isArray(H)&&H.length&&"object"===typeof H[0]){var U=H.every(la=>"attributes"in la);var aa=H.some(la=>!la.geometry),ha=H;if(U&&aa&&M&&M.allLayerViews){U=new Map;for(var ja of H)H=ja.layer,aa=
U.get(H)||[],ha=ja.attributes[H.objectIdField],null!=ha&&aa.push(ha),U.set(H,aa);const la=[];U.forEach((na,va)=>{const ua=M.allLayerViews.find(ta=>ta.layer.id===va.id);if(ua&&"queryFeatures"in ua){const ta=va.createQuery();ta.objectIds=na;ta.returnGeometry=!0;la.push(ua.queryFeatures(ta))}});ja=await Promise.all(la);H=[];for(var fa of ja)if(fa&&fa.features&&fa.features.length)for(var ea of fa.features)null!=ea.geometry&&H.push(ea.geometry);ha=H}for(const la of ha)V=await v(la,M,Q,V);return V}if(Array.isArray(H)&&
2===H.length&&"number"===typeof H[0]&&"number"===typeof H[1])U=new h(H);else if(H instanceof n)U=H;else if("geometry"in H)if(H.geometry)U=H.geometry;else if(H.layer){const la=H.layer;(fa=M.allLayerViews.find(na=>na.layer.id===la.id))&&"queryFeatures"in fa&&(ea=la.createQuery(),ea.objectIds=[H.attributes[la.objectIdField]],ea.returnGeometry=!0,U=(await fa.queryFeatures(ea))?.features?.[0]?.geometry)}if(null==U)return null;fa="point"===U.type?new t({xmin:U.x,ymin:U.y,xmax:U.x,ymax:U.y,spatialReference:U.spatialReference}):
U.extent;if(!fa)return null;g.isLoaded()||g.canProjectWithoutEngine(fa.spatialReference,Q)||await g.load();Q=g.project(fa,Q);return Q?V=V?V.union(Q):Q:null}function A(H){if(H&&(!Array.isArray(H)||"number"!==typeof H[0])&&("object"===typeof H||Array.isArray(H)&&"object"===typeof H[0])){if("layer"in H&&H.layer&&H.layer.minScale&&H.layer.maxScale){var M=H.layer;return{min:M.minScale,max:M.maxScale}}if(Array.isArray(H)&&H.length&&H.every(Q=>"layer"in Q)){let Q=M=0;for(const V of H)(H=V.layer)&&H.minScale&&
H.maxScale&&(M=H.minScale<M?H.minScale:M,Q=H.maxScale>Q?H.maxScale:Q);return M&&Q?{min:M,max:Q}:null}}}function q(H,M){return b.equals(H.wkid?H:H.spatialReference||e.WGS84,M)?H:g.project(H,M)}function y(H,M){const Q=H.targetGeometry,V=M.targetGeometry;Q.x=V.x;Q.y=V.y;Q.spatialReference=V.spatialReference;H.scale=M.scale;H.rotation=M.rotation;return H}function D(H,M,Q){return Q?w.set(H,.5*(M[0]-Q.right+Q.left),.5*(M[1]-Q.bottom+Q.top)):w.scale(H,M,.5)}function C(H){var M=H.scale;H=H.targetGeometry;
H=null!=H&&b.isValid(H.spatialReference)?1/(39.37*l.getMetersPerUnitForSR(H.spatialReference)*96):1;return M*H}function c(H){return b.isValid(H)?39.37*l.getMetersPerUnitForSR(H)*96:1}function x(H){return(H=b.getInfo(H))?H.valid[1]-H.valid[0]:0}const G=180/Math.PI,E=function(){const H=m.create();return function(M,Q,V){const U=Q.targetGeometry;a(H,U);Q=.5*C(Q);M.xmin=H[0]-Q*V[0];M.ymin=H[1]-Q*V[1];M.xmax=H[0]+Q*V[0];M.ymax=H[1]+Q*V[1];M.spatialReference=U.spatialReference;return M}}(),I=function(){const H=
m.create();return function(M,Q,V){return w.sub(M,w.scale(M,Q,.5),D(H,Q,V))}}(),L=function(){const H=z.create(),M=m.create();return function(Q,V,U,aa){const ha=C(V);V=u.toRadian(V.rotation)||0;w.set(M,ha,ha);r.fromScaling(H,M);r.rotate(H,H,V);r.translate(H,H,I(M,U,aa));r.translate(H,H,[0,aa.top-aa.bottom]);return w.set(Q,H[4],H[5])}}(),R=function(){const H=m.create(),M=m.create(),Q=m.create();return function(V,U,aa,ha,ja,fa){w.negate(H,U);w.scale(M,aa,.5*fa);w.set(Q,1/ha*fa,-1/ha*fa);r.fromTranslation(V,
M);ja&&r.rotate(V,V,ja);r.scale(V,V,Q);r.translate(V,V,H);return V}}(),S=function(){const H=m.create();return function(M,Q,V,U){const aa=C(Q),ha=u.toRadian(Q.rotation)||0;a(H,Q.targetGeometry);return R(M,H,V,aa,ha,U)}}(),Y=function(){const H=m.create();return function(M,Q,V,U){const aa=C(Q);a(H,Q.targetGeometry);return R(M,H,V,aa,0,U)}}(),da=function(){const H=m.create(),M=m.create(),Q=[0,0,0];return function(V,U,aa){w.subtract(H,V,U);w.normalize(H,H);w.subtract(M,V,aa);w.normalize(M,M);w.cross(Q,
H,M);V=Math.acos(w.dot(H,M)/(w.length(H)*w.length(M)))*G;0>Q[2]&&(V=-V);isNaN(V)&&(V=0);return V}}(),B=function(){const H=m.create();return function(M,Q,V,U){const aa=M.targetGeometry;y(M,Q);L(H,Q,V,U);aa.x+=H[0];aa.y+=H[1];return M}}(),F=function(){return function(H,M,Q){y(H,M);M=H.targetGeometry;M.x=Q.x;M.y=Q.y;M.spatialReference=Q.spatialReference;return H}}(),N=function(){const H=m.create();return function(M,Q,V,U,aa){aa||(aa="center");w.sub(H,V,U);w.scale(H,H,.5);V=H[0];U=H[1];switch(aa){case "center":w.set(H,
0,0);break;case "left":w.set(H,-V,0);break;case "top":w.set(H,0,U);break;case "right":w.set(H,V,0);break;case "bottom":w.set(H,0,-U);break;case "top-left":w.set(H,-V,U);break;case "bottom-left":w.set(H,-V,-U);break;case "top-right":w.set(H,V,U);break;case "bottom-right":w.set(H,V,-U)}Z(M,Q,H);return M}}(),W=function(){const H=m.create();return function(M,Q,V,U,aa){y(M,Q);isNaN(V)||0===V||(O(H,U,Q,aa),M.scale=Q.scale*V,X(H,H,M,aa),Z(M,M,w.set(H,H[0]-U[0],U[1]-H[1])));return M}}(),J=function(){const H=
m.create();return function(M,Q,V,U,aa,ha){y(M,Q);isNaN(V)||0===V||(O(H,aa,Q,ha),M.scale=Q.scale*V,M.rotation+=U,X(H,H,M,ha),Z(M,M,w.set(H,H[0]-aa[0],aa[1]-H[1])));return M}}(),K=function(){const H=m.create(),M=m.create();return function(Q,V,U,aa,ha,ja,fa){I(M,ja,fa);w.add(H,ha,M);return aa?J(Q,V,U,aa,H,ja):W(Q,V,U,H,ja)}}(),O=function(){const H=z.create();return function(M,Q,V,U){var aa=w.transformMat2d;S(H,V,U,1);V=r.invert(H,H);return aa.call(w,M,Q,V)}}(),X=function(){const H=z.create();return function(M,
Q,V,U){return w.transformMat2d(M,Q,S(H,V,U,1))}}(),Z=function(){const H=m.create(),M=z.create();return function(Q,V,U){y(Q,V);const aa=C(V),ha=Q.targetGeometry;r.fromRotation(M,u.toRadian(V.rotation)||0);r.scale(M,M,m.fromValues(aa,aa));w.transformMat2d(H,U,M);ha.x+=H[0];ha.y+=H[1];return Q}}();f.addPadding=B;f.angleBetween=da;f.centerAt=F;f.copy=y;f.create=async function(H,M){if(!H||!M)return new p({targetGeometry:new h,scale:0,rotation:0});let Q=M.spatialReference;const {constraints:V,padding:U,
viewpoint:aa,size:ha}=M,ja=[U?ha[0]-U.left-U.right:ha[0],U?ha[1]-U.top-U.bottom:ha[1]];let fa=null;H instanceof p?fa=H:H.viewpoint?fa=H.viewpoint:H.target&&"esri.Viewpoint"===H.target.declaredClass&&(fa=H.target);let ea=null;if(fa&&fa.targetGeometry)ea=fa.targetGeometry;else if(H instanceof t)ea=H;else if(H||H&&("center"in H||"extent"in H||"target"in H))ea=await v(H.center,M,Q)||await v(H.extent,M,Q)||await v(H.target,M,Q)||await v(H,M,Q);!ea&&aa&&aa.targetGeometry?ea=aa.targetGeometry:!ea&&M.extent&&
(ea=M.extent);if(!Q){var la=M.spatialReference||M.extent||ea;Q=la.wkid?la:la.spatialReference||e.WGS84}g.isLoaded()||b.equals(ea.spatialReference,Q)||g.canProjectWithoutEngine(ea,Q)||await g.load();la=q(ea.center??ea,Q);var na=0;fa&&null!=fa.targetGeometry&&"point"===fa.targetGeometry.type?na=fa.scale:"scale"in H&&H.scale?na=H.scale:"zoom"in H&&-1!==H.zoom&&V&&V.effectiveLODs?na=V.zoomToScale(H.zoom):Array.isArray(ea)||"point"===ea.type||"extent"===ea.type&&0===ea.width&&0===ea.height?(na=q(M.extent,
Q),na=null!=na?d(na,ja):M.extent?d(M.extent,ja):aa.scale):na=d(q(ea.extent,Q),ja);if(M=A(H))M.min&&M.min>na?na=M.min:M.max&&M.max<na&&(na=M.max);M=0;fa?M=fa.rotation:H.hasOwnProperty("rotation")?M=H.rotation:aa&&(M=aa.rotation);H=new p({targetGeometry:la,scale:na,rotation:M});V&&(H=V.fit(H),V.constrainByGeometry(H),V.rotationEnabled||(H.rotation=M));return H};f.extentToScale=d;f.getAnchor=D;f.getExtent=E;f.getMatrix=R;f.getPaddingMapTranslation=L;f.getPaddingScreenTranslation=I;f.getResolution=C;
f.getResolutionToScaleFactor=c;f.getTransform=S;f.getTransformNoRotation=Y;f.getWorldScreenWidth=function(H,M){return Math.round(x(H)/M)};f.getWorldWidth=x;f.padAndScaleAndRotateBy=K;f.resize=N;f.rotateBy=function(H,M,Q){y(H,M);H.rotation+=Q;return H};f.rotateTo=function(H,M,Q){y(H,M);H.rotation=Q;return H};f.scaleAndRotateBy=J;f.scaleTo=function(H,M,Q){y(H,M);H.scale=Q;return H};f.setExtent=function(H,M,Q,V,U){F(H,M,Q.center);H.scale=d(Q,V);U?.constraints?.constrain(H);return H};f.toMap=O;f.toScreen=
X;f.translateBy=Z;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(f,p){function k(c,x){c[0]=x[0];c[1]=x[1];c[2]=x[2];c[3]=x[3];c[4]=x[4];c[5]=x[5];return c}function l(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c}function u(c,x,G,E,I,L,R){c[0]=x;c[1]=G;c[2]=E;c[3]=I;c[4]=L;c[5]=R;return c}function r(c,x){const G=x[0],E=x[1],I=x[2],L=x[3],R=x[4];x=x[5];let S=G*L-E*I;if(!S)return null;S=1/S;c[0]=L*S;c[1]=-E*
S;c[2]=-I*S;c[3]=G*S;c[4]=(I*x-L*R)*S;c[5]=(E*R-G*x)*S;return c}function z(c){return c[0]*c[3]-c[1]*c[2]}function w(c,x,G){const E=x[0],I=x[1],L=x[2],R=x[3],S=x[4];x=x[5];const Y=G[0],da=G[1],B=G[2],F=G[3],N=G[4];G=G[5];c[0]=E*Y+L*da;c[1]=I*Y+R*da;c[2]=E*B+L*F;c[3]=I*B+R*F;c[4]=E*N+L*G+S;c[5]=I*N+R*G+x;return c}function m(c,x,G){const E=x[0],I=x[1],L=x[2],R=x[3],S=x[4];x=x[5];const Y=Math.sin(G);G=Math.cos(G);c[0]=E*G+L*Y;c[1]=I*G+R*Y;c[2]=E*-Y+L*G;c[3]=I*-Y+R*G;c[4]=S;c[5]=x;return c}function t(c,
x,G){const E=x[1],I=x[2],L=x[3],R=x[4],S=x[5],Y=G[0];G=G[1];c[0]=x[0]*Y;c[1]=E*Y;c[2]=I*G;c[3]=L*G;c[4]=R;c[5]=S;return c}function n(c,x,G){const E=x[0],I=x[1],L=x[2],R=x[3],S=x[4];x=x[5];const Y=G[0];G=G[1];c[0]=E;c[1]=I;c[2]=L;c[3]=R;c[4]=E*Y+L*G+S;c[5]=I*Y+R*G+x;return c}function h(c,x){const G=Math.sin(x);x=Math.cos(x);c[0]=x;c[1]=G;c[2]=-G;c[3]=x;c[4]=0;c[5]=0;return c}function g(c,x){c[0]=x[0];c[1]=0;c[2]=0;c[3]=x[1];c[4]=0;c[5]=0;return c}function e(c,x){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=x[0];
c[5]=x[1];return c}function b(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"}function a(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+1)}function d(c,x,G){c[0]=x[0]+G[0];c[1]=x[1]+G[1];c[2]=x[2]+G[2];c[3]=x[3]+G[3];c[4]=x[4]+G[4];c[5]=x[5]+G[5];return c}function v(c,x,G){c[0]=x[0]-G[0];c[1]=x[1]-G[1];c[2]=x[2]-G[2];c[3]=x[3]-G[3];c[4]=x[4]-G[4];c[5]=x[5]-G[5];return c}function A(c,x,G){c[0]=x[0]*G;c[1]=x[1]*G;c[2]=x[2]*G;c[3]=x[3]*G;c[4]=x[4]*G;
c[5]=x[5]*G;return c}function q(c,x,G,E){c[0]=x[0]+G[0]*E;c[1]=x[1]+G[1]*E;c[2]=x[2]+G[2]*E;c[3]=x[3]+G[3]*E;c[4]=x[4]+G[4]*E;c[5]=x[5]+G[5]*E;return c}function y(c,x){return c[0]===x[0]&&c[1]===x[1]&&c[2]===x[2]&&c[3]===x[3]&&c[4]===x[4]&&c[5]===x[5]}function D(c,x){const G=c[0],E=c[1],I=c[2],L=c[3],R=c[4];c=c[5];const S=x[0],Y=x[1],da=x[2],B=x[3],F=x[4];x=x[5];const N=p.getEpsilon();return Math.abs(G-S)<=N*Math.max(1,Math.abs(G),Math.abs(S))&&Math.abs(E-Y)<=N*Math.max(1,Math.abs(E),Math.abs(Y))&&
Math.abs(I-da)<=N*Math.max(1,Math.abs(I),Math.abs(da))&&Math.abs(L-B)<=N*Math.max(1,Math.abs(L),Math.abs(B))&&Math.abs(R-F)<=N*Math.max(1,Math.abs(R),Math.abs(F))&&Math.abs(c-x)<=N*Math.max(1,Math.abs(c),Math.abs(x))}const C=Object.freeze(Object.defineProperty({__proto__:null,add:d,copy:k,determinant:z,equals:D,exactEquals:y,frob:a,fromRotation:h,fromScaling:g,fromTranslation:e,identity:l,invert:r,mul:w,multiply:w,multiplyScalar:A,multiplyScalarAndAdd:q,rotate:m,scale:t,set:u,str:b,sub:v,subtract:v,
translate:n},Symbol.toStringTag,{value:"Module"}));f.add=d;f.copy=k;f.determinant=z;f.equals=D;f.exactEquals=y;f.frob=a;f.fromRotation=h;f.fromScaling=g;f.fromTranslation=e;f.identity=l;f.invert=r;f.mat2d=C;f.mul=w;f.multiply=w;f.multiplyScalar=A;f.multiplyScalarAndAdd=q;f.rotate=m;f.scale=t;f.set=u;f.str=b;f.sub=v;f.subtract=v;f.translate=n})},"esri/chunks/mat2df64":function(){define(["exports"],function(f){function p(){return[1,0,0,1,0,0]}function k(z){return[z[0],z[1],z[2],z[3],z[4],z[5]]}function l(z,
w,m,t,n,h){return[z,w,m,t,n,h]}function u(z,w){return new Float64Array(z,w,6)}const r=Object.freeze(Object.defineProperty({__proto__:null,clone:k,create:p,createView:u,fromValues:l},Symbol.toStringTag,{value:"Module"}));f.clone=k;f.create=p;f.createView=u;f.fromValues=l;f.mat2df64=r})},"esri/chunks/vec2":function(){define(["exports","./common"],function(f,p){function k(J,K){J[0]=K[0];J[1]=K[1];return J}function l(J,K,O){J[0]=K;J[1]=O;return J}function u(J,K,O){J[0]=K[0]+O[0];J[1]=K[1]+O[1];return J}
function r(J,K,O){J[0]=K[0]-O[0];J[1]=K[1]-O[1];return J}function z(J,K,O){J[0]=K[0]*O[0];J[1]=K[1]*O[1];return J}function w(J,K,O){J[0]=K[0]/O[0];J[1]=K[1]/O[1];return J}function m(J,K){J[0]=Math.ceil(K[0]);J[1]=Math.ceil(K[1]);return J}function t(J,K){J[0]=Math.floor(K[0]);J[1]=Math.floor(K[1]);return J}function n(J,K,O){J[0]=Math.min(K[0],O[0]);J[1]=Math.min(K[1],O[1]);return J}function h(J,K,O){J[0]=Math.max(K[0],O[0]);J[1]=Math.max(K[1],O[1]);return J}function g(J,K){J[0]=Math.round(K[0]);J[1]=
Math.round(K[1]);return J}function e(J,K,O){J[0]=K[0]*O;J[1]=K[1]*O;return J}function b(J,K,O,X){J[0]=K[0]+O[0]*X;J[1]=K[1]+O[1]*X;return J}function a(J,K){const O=K[0]-J[0];J=K[1]-J[1];return Math.sqrt(O*O+J*J)}function d(J,K){const O=K[0]-J[0];J=K[1]-J[1];return O*O+J*J}function v(J){const K=J[0];J=J[1];return Math.sqrt(K*K+J*J)}function A(J){const K=J[0];J=J[1];return K*K+J*J}function q(J,K){J[0]=-K[0];J[1]=-K[1];return J}function y(J,K){J[0]=1/K[0];J[1]=1/K[1];return J}function D(J,K){var O=K[0];
const X=K[1];O=O*O+X*X;0<O&&(O=1/Math.sqrt(O),J[0]=K[0]*O,J[1]=K[1]*O);return J}function C(J,K){return J[0]*K[0]+J[1]*K[1]}function c(J,K,O){K=K[0]*O[1]-K[1]*O[0];J[0]=J[1]=0;J[2]=K;return J}function x(J,K,O,X){const Z=K[0];K=K[1];J[0]=Z+X*(O[0]-Z);J[1]=K+X*(O[1]-K);return J}function G(J,K){K=K||1;const O=2*p.RANDOM()*Math.PI;J[0]=Math.cos(O)*K;J[1]=Math.sin(O)*K;return J}function E(J,K,O){const X=K[0];K=K[1];J[0]=O[0]*X+O[2]*K;J[1]=O[1]*X+O[3]*K;return J}function I(J,K,O){const X=K[0];K=K[1];J[0]=
O[0]*X+O[2]*K+O[4];J[1]=O[1]*X+O[3]*K+O[5];return J}function L(J,K,O){const X=K[0];K=K[1];J[0]=O[0]*X+O[3]*K+O[6];J[1]=O[1]*X+O[4]*K+O[7];return J}function R(J,K,O){const X=K[0];K=K[1];J[0]=O[0]*X+O[4]*K+O[12];J[1]=O[1]*X+O[5]*K+O[13];return J}function S(J,K,O,X){const Z=K[0]-O[0];K=K[1]-O[1];const H=Math.sin(X);X=Math.cos(X);J[0]=Z*X-K*H+O[0];J[1]=Z*H+K*X+O[1];return J}function Y(J,K){var O=J[0];J=J[1];const X=K[0];K=K[1];let Z=O*O+J*J;0<Z&&(Z=1/Math.sqrt(Z));let H=X*X+K*K;0<H&&(H=1/Math.sqrt(H));
O=(O*X+J*K)*Z*H;return 1<O?0:-1>O?Math.PI:Math.acos(O)}function da(J){return"vec2("+J[0]+", "+J[1]+")"}function B(J,K){return J[0]===K[0]&&J[1]===K[1]}function F(J,K){const O=J[0];J=J[1];const X=K[0];K=K[1];const Z=p.getEpsilon();return Math.abs(O-X)<=Z*Math.max(1,Math.abs(O),Math.abs(X))&&Math.abs(J-K)<=Z*Math.max(1,Math.abs(J),Math.abs(K))}function N(J,K,O,X,Z){let H=K[0]-O[0];O=K[1]-O[1];Z=(X[0]*H+X[1]*O)*(Z-1);H=X[0]*Z;O=X[1]*Z;J[0]=K[0]+H;J[1]=K[1]+O;return J}const W=Object.freeze(Object.defineProperty({__proto__:null,
add:u,angle:Y,ceil:m,copy:k,cross:c,dist:a,distance:a,div:w,divide:w,dot:C,equals:F,exactEquals:B,floor:t,inverse:y,len:v,length:v,lerp:x,max:h,min:n,mul:z,multiply:z,negate:q,normalize:D,projectAndScale:N,random:G,rotate:S,round:g,scale:e,scaleAndAdd:b,set:l,sqrDist:d,sqrLen:A,squaredDistance:d,squaredLength:A,str:da,sub:r,subtract:r,transformMat2:E,transformMat2d:I,transformMat3:L,transformMat4:R},Symbol.toStringTag,{value:"Module"}));f.add=u;f.angle=Y;f.ceil=m;f.copy=k;f.cross=c;f.dist=a;f.distance=
a;f.div=w;f.divide=w;f.dot=C;f.equals=F;f.exactEquals=B;f.floor=t;f.inverse=y;f.len=v;f.length=v;f.lerp=x;f.max=h;f.min=n;f.mul=z;f.multiply=z;f.negate=q;f.normalize=D;f.projectAndScale=N;f.random=G;f.rotate=S;f.round=g;f.scale=e;f.scaleAndAdd=b;f.set=l;f.sqrDist=d;f.sqrLen=A;f.squaredDistance=d;f.squaredLength=A;f.str=da;f.sub=r;f.subtract=r;f.transformMat2=E;f.transformMat2d=I;f.transformMat3=L;f.transformMat4=R;f.vec2=W})},"esri/chunks/vec2f64":function(){define(["exports"],function(f){function p(){return[0,
0]}function k(a){return[a[0],a[1]]}function l(a,d){return[a,d]}function u(a){const d=[0,0],v=Math.min(2,a.length);for(let A=0;A<v;++A)d[A]=a[A];return d}function r(a,d){return new Float64Array(a,d,2)}function z(){return[0,0]}function w(){return[1,1]}function m(){return[1,0]}function t(){return[0,1]}const n=[0,0],h=[1,1],g=[1,0],e=[0,1],b=Object.freeze(Object.defineProperty({__proto__:null,ONES:h,UNIT_X:g,UNIT_Y:e,ZEROS:n,clone:k,create:p,createView:r,fromArray:u,fromValues:l,ones:w,unitX:m,unitY:t,
zeros:z},Symbol.toStringTag,{value:"Module"}));f.ONES=h;f.UNIT_X=g;f.UNIT_Y=e;f.ZEROS=n;f.clone=k;f.create=p;f.createView=r;f.fromArray=u;f.fromValues=l;f.ones=w;f.unitX=m;f.unitY=t;f.vec2f64=b;f.zeros=z})},"esri/views/2d/FrameTask":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/reactiveUtils","../../core/scheduling"],function(f,p,k){return function(){function l(r){this.view=r;this._updateParameters=this._frameTaskHandle=this._stationaryHandle=null;this._updateRequested=!1;
this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)};this.update=()=>{this._updateRequested=!1;if(!this.view?.destroyed){var {allLayerViews:z,graphicsView:w,labelManager:m,state:{id:t}}=this.view;z.forEach(this._updateLayerView,this);null!=
m&&(m.lastUpdateId!==t&&(m.viewChange(),m.lastUpdateId=t),m.updateRequested&&m.processUpdate(this._updateParameters));null!=w&&(w.lastUpdateId!==t&&(w.viewChange(),w.lastUpdateId=t),w.updateRequested&&w.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}}var u=l.prototype;u.destroy=function(){this.stop()};u.start=function(){if(!this._frameTaskHandle){var r=this.view;
this.stationary=r.stationary;this._updateParameters={state:r.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:r.renderingOptions};this._stationaryHandle=p.watch(()=>r.stationary,z=>{this.stationary=z;this.requestFrame()});this._frameTaskHandle=k.addFrameTask(this);this.requestUpdate()}};u.stop=function(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=
this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};u.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};u.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};u._updateLayerView=function(r){if(r.attached){var z=this.view.state,w=r.lastUpdateId;if(null==w||!this.stationary&&!r.moving)r.moving=!0,r.moveStart();w!==z.id&&r.viewChange();this.stationary&&r.moving&&(r.moving=!1,r.moveEnd());r.lastUpdateId=z.id;
r.updateRequested&&r.processUpdate(this._updateParameters);"layerViews"in r&&r.layerViews?.forEach(this._updateLayerView,this)}else this.requestUpdate()};return f._createClass(l)}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error"],function(f,p,k){function l(){return Promise.all([new Promise((m,t)=>f(["./webglDeps"],m,t)),new Promise((m,t)=>f(["./mapViewDeps"],m,t))])}const u=m=>Object.freeze(Object.defineProperty({__proto__:null,default:m},Symbol.toStringTag,
{value:"Module"})),r=()=>l().then(()=>new Promise((m,t)=>f(["./layers/TileLayerView2D"],n=>m(u(n)),t))),z=()=>l().then(()=>new Promise((m,t)=>f(["./layers/FeatureLayerView2D"],n=>m(u(n)),t))),w={"base-dynamic":()=>l().then(()=>new Promise((m,t)=>f(["./layers/BaseDynamicLayerView2D"],n=>m(u(n)),t))),"base-tile":r,"bing-maps":r,csv:z,"geo-rss":()=>l().then(()=>new Promise((m,t)=>f(["./layers/GeoRSSLayerView2D"],n=>m(u(n)),t))),feature:z,geojson:z,graphics:()=>l().then(()=>new Promise((m,t)=>f(["./layers/GraphicsLayerView2D"],
n=>m(u(n)),t))),group:()=>l().then(()=>new Promise((m,t)=>f(["./layers/GroupLayerView2D"],n=>m(u(n)),t))),imagery:()=>l().then(()=>new Promise((m,t)=>f(["./layers/ImageryLayerView2D"],n=>m(u(n)),t))),"imagery-tile":()=>l().then(()=>new Promise((m,t)=>f(["./layers/ImageryTileLayerView2D"],n=>m(u(n)),t))),kml:()=>l().then(()=>new Promise((m,t)=>f(["./layers/KMLLayerView2D"],n=>m(u(n)),t))),"knowledge-graph":()=>l().then(()=>new Promise((m,t)=>f(["./layers/KnowledgeGraphLayerView2D"],n=>m(u(n)),t))),
"link-chart":()=>l().then(()=>new Promise((m,t)=>f(["./layers/KnowledgeGraphLayerView2D"],n=>m(u(n)),t))),"knowledge-graph-sublayer":z,"map-image":()=>l().then(()=>new Promise((m,t)=>f(["./layers/MapImageLayerView2D"],n=>m(u(n)),t))),"map-notes":()=>l().then(()=>new Promise((m,t)=>f(["./layers/MapNotesLayerView2D"],n=>m(u(n)),t))),media:()=>l().then(()=>new Promise((m,t)=>f(["./layers/MediaLayerView2D"],n=>m(u(n)),t))),"ogc-feature":()=>l().then(()=>new Promise((m,t)=>f(["./layers/OGCFeatureLayerView2D"],
n=>m(u(n)),t))),"open-street-map":r,"oriented-imagery":z,route:()=>l().then(()=>new Promise((m,t)=>f(["./layers/RouteLayerView2D"],n=>m(u(n)),t))),stream:()=>l().then(()=>new Promise((m,t)=>f(["./layers/StreamLayerView2D"],n=>m(u(n)),t))),"subtype-group":()=>l().then(()=>new Promise((m,t)=>f(["./layers/SubtypeGroupLayerView2D"],n=>m(u(n)),t))),tile:r,"vector-tile":()=>l().then(()=>new Promise((m,t)=>f(["./layers/VectorTileLayerView2D"],n=>m(u(n)),t))),video:()=>l().then(()=>new Promise((m,t)=>f(["./layers/VideoLayerView2D"],
n=>m(u(n)),t))),wcs:()=>l().then(()=>new Promise((m,t)=>f(["./layers/ImageryTileLayerView2D"],n=>m(u(n)),t))),"web-tile":r,wfs:z,wms:()=>l().then(()=>new Promise((m,t)=>f(["./layers/WMSLayerView2D"],n=>m(u(n)),t))),wmts:()=>l().then(()=>new Promise((m,t)=>f(["./layers/WMTSLayerView2D"],n=>m(u(n)),t))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};p.layerView2DImporter=
{hasLayerViewModule:m=>null!=w[m.type],importLayerView:m=>{var t=w[m.type];if(null==t)throw m=m.declaredClass?m.declaredClass.slice(m.declaredClass.lastIndexOf(".")+1):"Unknown",t=m.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new k(`${t}:view-not-supported`,`${m} is not supported in 2D`);return t(m)}};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e,b,a){k={base:null,key:"type",typeMap:{extent:b,polygon:a}};l=function(d){function v(q){q=d.call(this,q)||this;q.lods=null;q.minScale=0;q.maxScale=0;q.minZoom=-1;q.maxZoom=-1;q.rotationEnabled=!0;q.snapToZoom=!0;q.customConstraints=new u;return q}f._inherits(v,d);var A=v.prototype;A.destroy=function(){this.view=null};A.canZoomInTo=function(q){const y=this.effectiveMaxScale;return 0===y||q>=y};A.canZoomOutTo=function(q){const y=this.effectiveMinScale;return 0===
y||q<=y};A.constrain=function(q,y){this._zoom.constrain(q,y);this._rotation.constrain(q,y);this._geometry.constrain(q,y);this.customConstraints.forEach(D=>D.constrain(q,y));return q};A.constrainByGeometry=function(q){return this._geometry.constrain(q)};A.fit=function(q){return this._zoom.fit(q)};A.zoomToScale=function(q){return this._zoom.zoomToScale(q)};A.scaleToZoom=function(q){return this._zoom.scaleToZoom(q)};A.snapScale=function(q){return this._zoom.snapToClosestScale(q)};A.snapToNextScale=function(q){return this._zoom.snapToNextScale(q)};
A.snapToPreviousScale=function(q){return this._zoom.snapToPreviousScale(q)};f._createClass(v,[{key:"effectiveLODs",get:function(){return this._zoom.effectiveLODs}},{key:"effectiveMinScale",get:function(){return this._zoom.effectiveMinScale}},{key:"effectiveMaxScale",get:function(){return this._zoom.effectiveMaxScale}},{key:"effectiveMinZoom",get:function(){return this._zoom.effectiveMinZoom}},{key:"effectiveMaxZoom",get:function(){return this._zoom.effectiveMaxZoom}},{key:"geometry",set:function(q){q?
this._set("geometry",q):this._set("geometry",null)}},{key:"version",get:function(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}},{key:"_geometry",get:function(){const q=this._get("_geometry");return q&&this.geometry===q.geometry&&this.view?.constraintsInfo.spatialReference===q.spatialReference?q:new h.GeometryConstraint({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}},{key:"_rotation",get:function(){return new g({rotationEnabled:this.rotationEnabled})}},
{key:"_zoom",get:function(){const q=this._get("_zoom"),y=this.lods||this.view?.constraintsInfo.lods,D=this.minZoom,C=this.maxZoom,c=this.minScale,x=this.maxScale,G=this.snapToZoom;return q&&q.lods===y&&q.minZoom===D&&q.maxZoom===C&&q.minScale===c&&q.maxScale===x&&q.snapToZoom===G?q:new e({lods:y,minZoom:D,maxZoom:C,minScale:c,maxScale:x,snapToZoom:G})}}]);return v}(l);p.__decorate([r.property({readOnly:!0})],l.prototype,"effectiveLODs",null);p.__decorate([r.property({readOnly:!0})],l.prototype,"effectiveMinScale",
null);p.__decorate([r.property({readOnly:!0})],l.prototype,"effectiveMaxScale",null);p.__decorate([r.property({readOnly:!0})],l.prototype,"effectiveMinZoom",null);p.__decorate([r.property({readOnly:!0})],l.prototype,"effectiveMaxZoom",null);p.__decorate([r.property({types:k,value:null})],l.prototype,"geometry",null);p.__decorate([r.property({type:[n]})],l.prototype,"lods",void 0);p.__decorate([r.property()],l.prototype,"minScale",void 0);p.__decorate([r.property()],l.prototype,"maxScale",void 0);
p.__decorate([r.property()],l.prototype,"minZoom",void 0);p.__decorate([r.property()],l.prototype,"maxZoom",void 0);p.__decorate([r.property()],l.prototype,"rotationEnabled",void 0);p.__decorate([r.property()],l.prototype,"snapToZoom",void 0);p.__decorate([r.property({type:u})],l.prototype,"customConstraints",void 0);p.__decorate([r.property()],l.prototype,"view",void 0);p.__decorate([r.property({readOnly:!0})],l.prototype,"version",null);p.__decorate([r.property({type:h.GeometryConstraint,readOnly:!0})],
l.prototype,"_geometry",null);p.__decorate([r.property({type:g})],l.prototype,"_rotation",null);p.__decorate([r.property({readOnly:!0,type:e})],l.prototype,"_zoom",null);return l=p.__decorate([t.subclass("esri.views.2d.MapViewConstraints")],l)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/Logger ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e){var b;f.GeometryConstraint=b=function(a){function d(A){A=a.call(this,A)||this;A.geometry=null;A.spatialReference=null;return A}p._inherits(d,a);var v=d.prototype;v.constrain=function(A,q){if(null==this.normalizedGeometry)return A;q=A.targetGeometry;if("extent"===this.normalizedGeometry.type?g.extentContainsPoint(this.normalizedGeometry,q):g.polygonContainsPoint(this.normalizedGeometry,q))return A;({coordinate:q}=e.nearestCoordinate(this.normalizedGeometry,q));
if(!q)return A;A.targetGeometry=q;return A};v.clone=function(){return new b({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})};p._createClass(d,[{key:"normalizedGeometry",get:function(){if(null==this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return h.project(this.geometry,this.spatialReference)}catch(A){return r.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",
{geometry:this.geometry,spatialReference:this.spatialReference,error:A}),null}return this.geometry}}]);return d}(u.NumericIdentifiableMixin(l));k.__decorate([z.property({constructOnly:!0})],f.GeometryConstraint.prototype,"geometry",void 0);k.__decorate([z.property({readOnly:!0})],f.GeometryConstraint.prototype,"normalizedGeometry",null);k.__decorate([z.property({constructOnly:!0})],f.GeometryConstraint.prototype,"spatialReference",void 0);f.GeometryConstraint=b=k.__decorate([n.subclass("esri.views.2d.constraints.GeometryConstraint")],
f.GeometryConstraint);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/near":function(){define(["exports","../../geometry","../../chunks/vec2","./coordsUtils","../Point"],function(f,p,k,l,u){f.nearestCoordinate=function(r,z){const {spatialReference:w}=z;z=[z.x,z.y];let m=Number.POSITIVE_INFINITY,t=0,n=0;const h=[0,0];r="extent"===r.type?[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]:r.rings;for(const g of r)for(r=0;r<g.length-
1;r++){l.projectPointOnLine(h,z,g,r);const e=k.distance(z,h);e<m&&(m=e,t=h[0],n=h[1])}return{coordinate:new u({x:t,y:n,spatialReference:w}),distance:m}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,p,k,l,u,r,z,w,m){var t;k=t=function(n){function h(){var e=n.apply(this,arguments)||this;e.enabled=!0;e.rotationEnabled=!0;return e}f._inherits(h,n);var g=h.prototype;g.constrain=function(e,b){if(!this.enabled||!b)return e;this.rotationEnabled||(e.rotation=b.rotation);return e};g.clone=function(){return new t({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return f._createClass(h)}(l.NumericIdentifiableMixin(k));p.__decorate([u.property()],k.prototype,"enabled",void 0);p.__decorate([u.property()],
k.prototype,"rotationEnabled",void 0);return k=t=p.__decorate([m.subclass("esri.views.2d.constraints.RotationConstraint")],k)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,p,k,l,u,r,z,w,m){var t;k=t=function(n){function h(e){e=n.call(this,e)||this;e._lodByScale={};e._scales=[];e.effectiveLODs=null;e.effectiveMinZoom=-1;e.effectiveMaxZoom=-1;e.effectiveMinScale=0;e.effectiveMaxScale=0;e.lods=null;e.minZoom=-1;e.maxZoom=-1;e.minScale=0;e.maxScale=0;e.snapToZoom=!0;return e}f._inherits(h,n);var g=h.prototype;g.initialize=function(){let {lods:e,minScale:b,maxScale:a,minZoom:d,maxZoom:v}=this,A=-1,q=-1,y=!1,D=!1;0!==b&&0!==a&&b<a&&([b,a]=[a,b]);if(e&&e.length){e=
e.map(c=>c.clone());e.sort((c,x)=>x.scale-c.scale);e.forEach((c,x)=>c.level=x);for(const c of e){!y&&0<b&&b>=c.scale&&(A=c.level,y=!0);!D&&0<a&&a>=c.scale&&(q=C?C.level:-1,D=!0);var C=c}-1===d&&(d=0===b?0:A);-1===v&&(v=0===a?e.length-1:q);d=Math.max(d,0);d=Math.min(d,e.length-1);v=Math.max(v,0);v=Math.min(v,e.length-1);d>v&&([d,v]=[v,d]);b=e[d].scale;a=e[v].scale;e.splice(0,d);e.splice(v-d+1,e.length);e.forEach((c,x)=>{this._lodByScale[c.scale]=c;this._scales[x]=c.scale});this._set("effectiveLODs",
e);this._set("effectiveMinZoom",d);this._set("effectiveMaxZoom",v)}this._set("effectiveMinScale",b);this._set("effectiveMaxScale",a)};g.constrain=function(e,b){if(b&&e.scale===b.scale)return e;var a=this.effectiveMinScale;const d=this.effectiveMaxScale,v=e.targetGeometry,A=b&&b.targetGeometry,q=0!==a&&e.scale>a;if(0!==d&&e.scale<d||q)a=q?a:d,b&&A&&(b=(a-b.scale)/(e.scale-b.scale),v.x=A.x+(v.x-A.x)*b,v.y=A.y+(v.y-A.y)*b),e.scale=a;this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale));
return e};g.fit=function(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const b=this.scaleToZoom(e.scale);e.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return e};g.zoomToScale=function(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom;e=Math.max(0,e);const b=this._scales;if(0>=e)return b[0];if(e>=b.length)return b[b.length-1];const a=Math.round(e);return b[a]+(a-e)*(b[Math.round(e-.5)]-b[a])};g.scaleToZoom=function(e){if(!this.effectiveLODs)return-1;
const b=this._scales;let a,d;if(e>=b[0])return this.effectiveMinZoom;if(e<=b[b.length-1])return this.effectiveMaxZoom;for(let v=0;v<b.length-1;v++){a=b[v];d=b[v+1];if(d===e)return v+this.effectiveMinZoom+1;if(a>e&&d<e)return v+this.effectiveMinZoom+1-(e-d)/(a-d)}return-1};g.snapToClosestScale=function(e){if(!this.effectiveLODs)return e;e=this.scaleToZoom(e);return this.zoomToScale(Math.round(e))};g.snapToNextScale=function(e,b=.5){if(!this.effectiveLODs)return e*b;e=Math.round(this.scaleToZoom(e));
return this.zoomToScale(e+1)};g.snapToPreviousScale=function(e,b=2){if(!this.effectiveLODs)return e*b;e=Math.round(this.scaleToZoom(e));return this.zoomToScale(e-1)};g.clone=function(){return new t({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};g._getClosestScale=function(e){if(this._lodByScale[e])return this._lodByScale[e].scale;e=this._scales.reduce((b,a)=>Math.abs(a-e)<=Math.abs(b-e)?a:b,this._scales[0]);return this._lodByScale[e].scale};
return f._createClass(h)}(l.NumericIdentifiableMixin(k));p.__decorate([u.property({readOnly:!0})],k.prototype,"effectiveLODs",void 0);p.__decorate([u.property({readOnly:!0})],k.prototype,"effectiveMinZoom",void 0);p.__decorate([u.property({readOnly:!0})],k.prototype,"effectiveMaxZoom",void 0);p.__decorate([u.property({readOnly:!0})],k.prototype,"effectiveMinScale",void 0);p.__decorate([u.property({readOnly:!0})],k.prototype,"effectiveMaxScale",void 0);p.__decorate([u.property()],k.prototype,"lods",
void 0);p.__decorate([u.property()],k.prototype,"minZoom",void 0);p.__decorate([u.property()],k.prototype,"maxZoom",void 0);p.__decorate([u.property()],k.prototype,"minScale",void 0);p.__decorate([u.property()],k.prototype,"maxScale",void 0);p.__decorate([u.property()],k.prototype,"snapToZoom",void 0);return k=t=p.__decorate([m.subclass("esri.views.2d.constraints.ZoomConstraint")],k)})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n){function h(d,v){d.length=0;v.forEach(A=>d.push(A));return d}const g=new Set,e=[],b=new Map,a=[0,0];k=function(d){function v(q){q=d.call(this,q)||this;q._keyToItem=new Map;q.concurrency=6;q.strategy="scale-first";q.tileInfoView=null;return q}f._inherits(v,d);var A=v.prototype;A.initialize=function(){const {concurrency:q,process:y}=this;this._queue=new n.QueueProcessor({concurrency:q,process:(D,C)=>{D=this._keyToItem.get(D);return y(D,{signal:C})},peeker:D=>D.values().next().value})};
A.destroy=function(){this.clear();this._queue=l.destroyMaybe(this._queue)};A.abort=function(q){this._queue.abort("string"===typeof q?q:q.id)};A.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};A.has=function(q){return"string"===typeof q?this._keyToItem.has(q):this._keyToItem.has(q.id)};A.isOngoing=function(q){q="string"===typeof q?q:q.id;return this.has(q)&&this._queue.isOngoing(q)};A.pause=function(){this._queue.pause()};A.push=function(q,y){const D=q.key.id+
"-"+y;if(this.has(D))return this.get(D);y=this._queue.push(D);const C=()=>{this._keyToItem.delete(D);this.notifyChange("updating")};this._keyToItem.set(D,q);y.then(C,C);this.notifyChange("updating");return y};A.reset=function(){this._queue.reset();this.notifyChange("updating")};A.resume=function(){this._queue.resume()};A._peekByScaleFirst=function(q){if(!this.state)return q.values().next().value;const y=this.tileInfoView;let D=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY;q.forEach(I=>{I=this._keyToItem.get(I);
const L=this.tileInfoView.getTileScale(I.key);b.has(L)||(b.set(L,[]),D=Math.max(L,D),C=Math.min(L,C));b.get(L).push(I.key);g.add(L)});let c=this.state.scale;b.has(c)||(h(e,g),e.sort((I,L)=>I-L),c=e.reduce((I,L)=>Math.abs(L-c)<Math.abs(I-c)?L:I,e[0]));c=Math.min(c,D);c=Math.max(c,C);q=b.get(c);const x=y.getClosestInfoForScale(c),G=x.getColumnForX(this.state.center[0]),E=x.getRowForY(this.state.center[1]);q.sort((I,L)=>{const R=x.denormalizeCol(I.col,I.world),S=x.denormalizeCol(L.col,L.world);return Math.sqrt((G-
R)*(G-R)+(E-I.row)*(E-I.row))-Math.sqrt((G-S)*(G-S)+(E-L.row)*(E-L.row))});g.clear();b.clear();return q[0].id};A._peekByCenterFirst=function(q){if(!this.state)return q.values().next().value;const y=this.tileInfoView,D=this.state.center;let C=Number.POSITIVE_INFINITY,c;q.forEach(x=>{x=this._keyToItem.get(x);y.getTileCoords(a,x.key);const G=t.distance(a,D);G<C&&(C=G,c=x.key)});return c.id};f._createClass(v,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},
{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return v}(k);p.__decorate([u.property({constructOnly:!0})],k.prototype,"concurrency",void 0);p.__decorate([u.property({constructOnly:!0})],k.prototype,"process",void 0);p.__decorate([u.property()],k.prototype,"state",void 0);p.__decorate([u.property({constructOnly:!0})],k.prototype,"strategy",void 0);p.__decorate([u.property({constructOnly:!0})],k.prototype,"tileInfoView",void 0);p.__decorate([u.property({readOnly:!0})],
k.prototype,"updating",null);return k=p.__decorate([m.subclass("esri.views.2d.tiling.PagedTileQueue")],k)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(f,p,k,l,u,r){let z=p._createClass(function(m,t){this.item=m;this.controller=t;this.promise=null}),w=function(){function m(n){this._deferreds=new Map;this._controllers=new Map;this._processingItems=
new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;n.concurrency&&(this.concurrency=n.concurrency);this._queue=new u(n.peeker);this.process=n.process;const h=n.scheduler;n.priority&&h&&(this._task=h.registerTask(n.priority,this))}var t=m.prototype;t.destroy=function(){this.clear();this._schedule=k.removeMaybe(this._schedule);this._task=k.removeMaybe(this._task)};t.abort=function(n){(n=this._controllers.get(n))&&n.abort()};t.clear=function(){this._queue.clear();const n=[];
this._controllers.forEach(h=>n.push(h));this._controllers.clear();n.forEach(h=>h.abort());this._processingItems.clear();this._cancelNext()};t.forEach=function(n){this._deferreds.forEach((h,g)=>n(g))};t.get=function(n){return(n=this._deferreds.get(n))?n.promise:void 0};t.isOngoing=function(n){return this._processingItems.has(n)};t.has=function(n){return this._deferreds.has(n)};t.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};t.push=function(n,h){const g=this.get(n);if(g)return g;
const e=new AbortController;let b=null;h&&(b=l.onAbort(h,()=>e.abort()));const a=()=>{d.remove();null!=b&&b.remove();this._deferreds.delete(n);this._controllers.delete(n);this._queue.remove(n);this._processingItems.delete(n);this._scheduleNext()},d=l.onAbortOrThrow(e.signal,()=>{const A=this._processingItems.get(n);A&&A.controller.abort();a();v.reject(l.createAbortError())}),v=l.createResolver();this._deferreds.set(n,v);this._controllers.set(n,e);v.promise.then(a,a);this._queue.push(n);this._scheduleNext();
return v.promise};t.last=function(){return this._queue.last()};t.peek=function(){return this._queue.peek()};t.popLast=function(){return this._queue.popLast()};t.reset=function(){const n=[];this._processingItems.forEach(h=>n.push(h));this._processingItems.clear();for(const h of n)this._queue.push(h.item),h.controller.abort();this._scheduleNext()};t.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};t.takeAll=function(){const n=[];for(;this._queue.length;)n.push(this._queue.pop());
this.clear();return n};t.runTask=function(n){for(;!n.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),n.madeProgress()};t._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=r.schedule(()=>{this._schedule=null;this._next()}))};t._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};t._cancelNext=function(){this._schedule&&(this._schedule.remove(),
this._schedule=null)};t._processResult=function(n,h){this._canProcessFulfillment(n)&&(this._scheduleNext(),this._deferreds.get(n.item).resolve(h))};t._processError=function(n,h){this._canProcessFulfillment(n)&&(this._scheduleNext(),this._deferreds.get(n.item).reject(h))};t._canProcessFulfillment=function(n){return this._deferreds.get(n.item)&&this._processingItems.get(n.item)===n?!0:!1};t._process=function(n){if(null!=n){var h=new AbortController,g=new z(n,h);this._processingItems.set(n,g);try{var e=
this.process(n,h.signal)}catch(b){this._processError(g,b)}l.isPromiseLike(e)?(g.promise=e,e.then(b=>this._processResult(g,b),b=>this._processError(g,b))):this._processResult(g,e)}};p._createClass(m,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:n=>this.runTask(n)}}}]);return m}();f.QueueProcessor=w;Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(f,p,k,l,u,r){const z=new u("0/0/0/0");let w=function(){function t(h,g,e,b,a,d,v,A){this.x=h;this.ymin=g;this.ymax=e;this.invM=b;this.leftAdjust=a;this.rightAdjust=d;this.leftBound=v;this.rightBound=A}t.create=function(h,g){h[1]>g[1]&&([h,g]=[g,h]);const [e,
b]=h,[a,d]=g;h=a-e;g=d-b;g=0!==g?h/g:0;const v=(Math.ceil(b)-b)*g,A=(Math.floor(b)-b)*g;return new t(e,Math.floor(b),Math.ceil(d),g,0>h?v:A,0>h?A:v,0>h?a:e,0>h?e:a)};var n=t.prototype;n.incrRow=function(){this.x+=this.invM};n.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};n.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return f._createClass(t)}();const m=[[0,0],[0,0],[0,0],[0,0]];return function(){function t(h,g=null,e=h.lods[0].level,
b=h.lods[h.lods.length-1].level){this.tileInfo=h;this.fullExtent=g;this.scales=[];this._infoByScale={};this._infoByLevel={};const a=h.lods.filter(v=>v.level>=e&&v.level<=b);this.minScale=a[0].scale;this.maxScale=a[a.length-1].scale;const d=this._lodInfos=a.map(v=>k.create(h,v,g));a.forEach((v,A)=>{this._infoByLevel[v.level]=d[A];this._infoByScale[v.scale]=d[A];this.scales[A]=v.scale},this);this._wrap=h.isWrappable}var n=t.prototype;n.getLODInfoAt=function(h){return this._infoByLevel["number"===typeof h?
h:h.level]};n.getTileBounds=function(h,g,e=!1){z.set(g);return(g=this._infoByLevel[z.level])?g.getTileBounds(h,z,e):h};n.getTileCoords=function(h,g,e=!1){z.set(g);return(g=this._infoByLevel[z.level])?g.getTileCoords(h,z,e):h};n.getTileCoverage=function(h,g=192,e=!0,b="closest"){if(!e&&(h.scale>this.minScale||h.scale<this.maxScale))return null;e="closest"===b?this.getClosestInfoForScale(h.scale):this.getSmallestInfoForScale(h.scale);b=l.pool.acquire(e);const a=this._wrap;var d=Infinity;let v=-Infinity;
const A=b.spans;m[0][0]=m[0][1]=m[1][1]=m[3][0]=-g;m[1][0]=m[2][0]=h.size[0]+g;m[2][1]=m[3][1]=h.size[1]+g;for(q of m)h.toMap(q,q),q[0]=e.getColumnForX(q[0]),q[1]=e.getRowForY(q[1]);h=[];var q=3;for(g=0;4>g;g++)m[g][1]===m[q][1]?q=g:(q=w.create(m[g],m[q]),d=Math.min(q.ymin,d),v=Math.max(q.ymax,v),void 0===h[q.ymin]&&(h[q.ymin]=[]),h[q.ymin].push(q),q=g);if(null==d||null==v||100<v-d)return null;for(g=[];d<v;){null!=h[d]&&(g=g.concat(h[d]));q=Infinity;var y=-Infinity;for(var D=g.length-1;0<=D;D--){var C=
g[D];q=Math.min(q,C.getLeftCol());y=Math.max(y,C.getRightCol())}q=Math.floor(q);y=Math.floor(y);if(d>=e.first[1]&&d<=e.last[1])if(a)if(e.size[0]<e.worldSize[0])for(D=Math.floor(y/e.worldSize[0]),C=Math.floor(q/e.worldSize[0]);C<=D;C++)A.push(new r(d,Math.max(e.getFirstColumnForWorld(C),q),Math.min(e.getLastColumnForWorld(C),y)));else A.push(new r(d,q,y));else q>e.last[0]||y<e.first[0]||(q=Math.max(q,e.first[0]),y=Math.min(y,e.last[0]),A.push(new r(d,q,y)));d+=1;for(q=g.length-1;0<=q;q--)y=g[q],y.ymax>=
d?y.incrRow():g.splice(q,1)}return b};n.getTileParentId=function(h){z.set(h);h=this._lodInfos.indexOf(this._infoByLevel[z.level])-1;if(0>h)return null;this._getTileIdAtLOD(z,this._lodInfos[h],z);return z.id};n.getTileResolution=function(h){return(h=this._infoByLevel["object"===typeof h?h.level:h])?h.resolution:-1};n.getTileScale=function(h){return(h=this._infoByLevel[h.level])?h.scale:-1};n.intersects=function(h,g){z.set(g);g=this._infoByLevel[z.level];const e=h.lodInfo;if(e.resolution>g.resolution){this._getTileIdAtLOD(z,
e,z);var b=e.denormalizeCol(z.col,z.world);for(var a of h.spans)if(a.row===z.row&&a.colFrom<=b&&a.colTo>=b)return!0}if(e.resolution<g.resolution){const [v,A,q,y]=h.spans.reduce((D,C)=>{D[0]=Math.min(D[0],C.row);D[1]=Math.max(D[1],C.row);D[2]=Math.min(D[2],C.colFrom);D[3]=Math.max(D[3],C.colTo);return D},[Infinity,-Infinity,Infinity,-Infinity]);b=g.denormalizeCol(z.col,z.world);h=e.getColumnForX(g.getXForColumn(b));a=e.getRowForY(g.getYForRow(z.row));b=e.getColumnForX(g.getXForColumn(b+1))-1;g=e.getRowForY(g.getYForRow(z.row+
1))-1;return!(h>y||b<q||a>A||g<v)}const d=e.denormalizeCol(z.col,z.world);return h.spans.some(v=>v.row===z.row&&v.colFrom<=d&&v.colTo>=d)};n.normalizeBounds=function(h,g,e){h[0]=g[0];h[1]=g[1];h[2]=g[2];h[3]=g[3];this._wrap&&(g=p.getInfo(this.tileInfo.spatialReference),e=-e*(g.valid[1]-g.valid[0]),h[0]+=e,h[2]+=e);return h};n.getSmallestInfoForScale=function(h){const g=this.scales;if(this._infoByScale[h])return this._infoByScale[h];if(h>g[0])return this._infoByScale[g[0]];for(let e=1;e<g.length-1;e++)if(h>
g[e]+1E-6)return this._infoByScale[g[e-1]];return this._infoByScale[g[g.length-1]]};n.getClosestInfoForScale=function(h){const g=this.scales;if(this._infoByScale[h])return this._infoByScale[h];h=g.reduce((e,b)=>Math.abs(b-h)<Math.abs(e-h)?b:e,g[0]);return this._infoByScale[h]};n.scaleToLevel=function(h){const g=this.scales;if(this._infoByScale[h])return this._infoByScale[h].level;for(let e=g.length-1;0<=e;e--)if(h<g[e])return e===g.length-1?this._infoByScale[g[g.length-1]].level:this._infoByScale[g[e]].level+
(g[e]-h)/(g[e]-g[e+1]);return this._infoByScale[g[0]].level};n.scaleToZoom=function(h){return this.tileInfo.scaleToZoom(h)};n._getTileIdAtLOD=function(h,g,e){const b=this._infoByLevel[e.level];h.set(e);if(g.resolution<b.resolution)return null;if(g.resolution===b.resolution)return h;h.level=g.level;h.col=Math.floor(e.col*b.resolution/g.resolution+.01);h.row=Math.floor(e.row*b.resolution/g.resolution+.01);return h};f._createClass(t,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);
return t}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(f,p,k){function l(r,z,w){r[0]=z;r[1]=w;return r}const u=new k("0/0/0/0");return function(){function r(w,m,t,n,h,g,e,b,a,d,v,A){this.level=w;this.resolution=m;this.scale=t;this.origin=n;this.first=h;this.last=g;this.size=e;this.norm=b;this.worldStart=a;this.worldEnd=d;this.worldSize=v;this.wrap=A}r.create=function(w,m,t=
null){var n=p.getInfo(w.spatialReference);const h=m.origin||[w.origin.x,w.origin.y],g=[w.size[0]*m.resolution,w.size[1]*m.resolution],e=[-Infinity,-Infinity],b=[Infinity,Infinity],a=[Infinity,Infinity];null!=t&&(l(e,Math.max(0,Math.floor((t.xmin-h[0])/g[0])),Math.max(0,Math.floor((h[1]-t.ymax)/g[1]))),l(b,Math.max(0,Math.floor((t.xmax-h[0])/g[0])),Math.max(0,Math.floor((h[1]-t.ymin)/g[1]))),l(a,b[0]-e[0]+1,b[1]-e[1]+1));const {cols:d,rows:v}=m;!t&&d&&v&&(l(e,d[0],v[0]),l(b,d[1],v[1]),l(a,d[1]-d[0]+
1,v[1]-v[0]+1));let A;w.isWrappable?(w=[Math.ceil(Math.round((n.valid[1]-n.valid[0])/m.resolution)/w.size[0]),a[1]],n=[Math.floor((n.origin[0]-h[0])/g[0]),e[1]],t=[w[0]+n[0]-1,b[1]],A=!0):(n=e,t=b,w=a,A=!1);return new r(m.level,m.resolution,m.scale,h,e,b,a,g,n,t,w,A)};var z=r.prototype;z.normalizeCol=function(w){if(!this.wrap)return w;const m=this.worldSize[0];return 0>w?m-1-Math.abs((w+1)%m):w%m};z.denormalizeCol=function(w,m){return this.wrap?this.worldSize[0]*m+w:w};z.getWorldForColumn=function(w){return this.wrap?
Math.floor(w/this.worldSize[0]):0};z.getFirstColumnForWorld=function(w){return w*this.worldSize[0]+this.first[0]};z.getLastColumnForWorld=function(w){return w*this.worldSize[0]+this.first[0]+this.size[0]-1};z.getColumnForX=function(w){return(w-this.origin[0])/this.norm[0]};z.getXForColumn=function(w){return this.origin[0]+w*this.norm[0]};z.getRowForY=function(w){return(this.origin[1]-w)/this.norm[1]};z.getYForRow=function(w){return this.origin[1]-w*this.norm[1]};z.getTileBounds=function(w,m,t=!1){u.set(m);
var n=t?u.col:this.denormalizeCol(u.col,u.world),h=u.row;m=this.getXForColumn(n);t=this.getYForRow(h+1);n=this.getXForColumn(n+1);h=this.getYForRow(h);w[0]=m;w[1]=t;w[2]=n;w[3]=h;return w};z.getTileCoords=function(w,m,t=!1){u.set(m);m=t?u.col:this.denormalizeCol(u.col,u.world);Array.isArray(w)?l(w,this.getXForColumn(m),this.getYForRow(u.row)):(w.x=this.getXForColumn(m),w.y=this.getYForRow(u.row));return w};return f._createClass(r)}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../core/ObjectPool"],function(f,p){let k=function(){function l(r,z,w,m){this.set(r,z,w,m)}l.getId=function(r,z,w,m){return"object"===typeof r?`${r.level}/${r.row}/${r.col}/${r.world}`:`${r}/${z}/${w}/${m}`};var u=l.prototype;u.acquire=function(r,z,w,m){this.set(r,z,w,m)};u.contains=function(r){const z=r.level-this.level;return 0<=z&&this.row===r.row>>z&&this.col===r.col>>z&&this.world===r.world};u.equals=function(r){return this.level===r.level&&this.row===r.row&&this.col===r.col&&this.world===
r.world};u.clone=function(){return new l(this)};u.release=function(){this.world=this.col=this.row=this.level=0};u.set=function(r,z,w,m){if(null==r)this.world=this.col=this.row=this.level=0;else if("object"===typeof r)this.level=r.level||0,this.row=r.row||0,this.col=r.col||0,this.world=r.world||0;else if("string"===typeof r){const [t,n,h,g]=r.split("/");this.level=parseFloat(t);this.row=parseFloat(n);this.col=parseFloat(h);this.world=parseFloat(g)}else this.level=+r,this.row=+z,this.col=+w,this.world=
+m||0;return this};u.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};u.getParentKey=function(){return 0>=this.level?null:new l(this.level-1,this.row>>1,this.col>>1,this.world)};u.getChildKeys=function(){const r=this.level+1,z=this.row<<1,w=this.col<<1,m=this.world;return[new l(r,z,w,m),new l(r,z,w+1,m),new l(r,z+1,w,m),new l(r,z+1,w+1,m)]};u.compareRowMajor=function(r){return this.row<r.row?-1:this.row>r.row?1:this.col<r.col?-1:this.col>r.col?1:0};f._createClass(l,
[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(r){this.set(r)}},{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return l}();k.pool=new p(k,null,null,25,50);return k})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(f,p){let k=function(){function l(){this.spans=[]}var u=l.prototype;u.acquire=function(r){this.lodInfo=
r};u.release=function(){this.lodInfo=null;this.spans.length=0};u.forEach=function(r,z){const {spans:w,lodInfo:m}=this,{level:t}=m;if(0!==w.length)for(const {row:n,colFrom:h,colTo:g}of w)for(let e=h;e<=g;e++)r.call(z,t,n,m.normalizeCol(e),m.getWorldForColumn(e))};return f._createClass(l)}();k.pool=new p(k);return k})},"esri/views/2d/tiling/TileSpan":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],function(f){return f._createClass(function(p,k,l){this.row=p;this.colFrom=k;this.colTo=
l})})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),function(f,p,k,l,u,r,z,w,m,t,n){function h(d,v){d.length=0;v.forEach(A=>d.push(A));return d}
const g=new Set,e=[],b=new Map,a=[0,0];k=function(d){function v(q){q=d.call(this,q)||this;q._keyToItem=new Map;q.concurrency=6;q.strategy="scale-first";q.tileInfoView=null;return q}f._inherits(v,d);var A=v.prototype;A.initialize=function(){const {concurrency:q,process:y,strategy:D}=this;this._queue=new n.QueueProcessor({concurrency:q,process:(C,c)=>{C=this._keyToItem.get(C);return y(C,{signal:c})},peeker:"scale-first"===D?C=>this._peekByScaleFirst(C):C=>this._peekByCenterFirst(C)})};A.destroy=function(){this.clear();
this._queue=l.destroyMaybe(this._queue)};A.abort=function(q){this._queue.abort("string"===typeof q?q:q.id)};A.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};A.has=function(q){return"string"===typeof q?this._keyToItem.has(q):this._keyToItem.has(q.id)};A.isOngoing=function(q){q="string"===typeof q?q:q.id;return this.has(q)&&this._queue.isOngoing(q)};A.pause=function(){this._queue.pause()};A.push=function(q){const y=q.key.id;if(this._queue.has(y))return this._queue.get(y);
const D=this._queue.push(y),C=()=>{this._keyToItem.delete(y);this.notifyChange("updating")};this._keyToItem.set(y,q);D.then(C,C);this.notifyChange("updating");return D};A.reset=function(){this._queue.reset()};A.resume=function(){this._queue.resume()};A._peekByScaleFirst=function(q){if(!this.state)return q.values().next().value;const y=this.tileInfoView;let D=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY;q.forEach(I=>{I=this._keyToItem.get(I);const L=this.tileInfoView.getTileScale(I.key);b.has(L)||
(b.set(L,[]),D=Math.max(L,D),C=Math.min(L,C));b.get(L).push(I.key);g.add(L)});let c=this.state.scale;b.has(c)||(h(e,g),e.sort((I,L)=>I-L),c=e.reduce((I,L)=>Math.abs(L-c)<Math.abs(I-c)?L:I,e[0]));c=Math.min(c,D);c=Math.max(c,C);q=b.get(c);const x=y.getClosestInfoForScale(c),G=x.getColumnForX(this.state.center[0]),E=x.getRowForY(this.state.center[1]);q.sort((I,L)=>{const R=x.denormalizeCol(I.col,I.world),S=x.denormalizeCol(L.col,L.world);return Math.sqrt((G-R)*(G-R)+(E-I.row)*(E-I.row))-Math.sqrt((G-
S)*(G-S)+(E-L.row)*(E-L.row))});g.clear();b.clear();return q[0].id};A._peekByCenterFirst=function(q){if(!this.state)return q.values().next().value;const y=this.tileInfoView,D=this.state.center;let C=Number.POSITIVE_INFINITY,c;q.forEach(x=>{x=this._keyToItem.get(x);y.getTileCoords(a,x.key);const G=t.distance(a,D);G<C&&(C=G,c=x.key)});return c.id};f._createClass(v,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},
{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return v}(k);p.__decorate([u.property({constructOnly:!0})],k.prototype,"concurrency",void 0);p.__decorate([u.property({constructOnly:!0})],k.prototype,"process",void 0);p.__decorate([u.property()],k.prototype,"state",void 0);p.__decorate([u.property({constructOnly:!0})],k.prototype,"strategy",void 0);p.__decorate([u.property({constructOnly:!0})],k.prototype,"tileInfoView",void 0);p.__decorate([u.property({readOnly:!0})],
k.prototype,"updating",null);return k=p.__decorate([m.subclass("esri.views.2d.tiling.TileQueue")],k)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(f,p,k,l,u){const r=new u(0,0,0,0),z=new Map,w=[],m=[];return function(){function t(h){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;
this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=h.acquireTile;this.releaseTile=h.releaseTile;this.tileInfoView=h.tileInfoView;null!=h.resampling&&(this.resampling=h.resampling);h.cachePolicy&&(this.cachePolicy=h.cachePolicy);h.coveragePolicy&&(this.coveragePolicy=h.coveragePolicy);null!=h.buffer&&(this.buffer=h.buffer);h.cacheSize&&(this._tileCache=new k(h.cacheSize,this.tileInfoView,g=>{this.releaseTile(g)}))}var n=t.prototype;n.destroy=function(){this.tileIndex.clear()};n.update=
function(h){const {resampling:g,tileIndex:e}=this,{scale:b,center:a,resolution:d}=h.state,{minScale:v,maxScale:A}=this.tileInfoView,q=!h.stationary&&b>this._previousScale;this._previousScale=b;if(!g&&(b>v||b<A))this.tiles.length=0,this.clear();else if(h=this.tileInfoView.getTileCoverage(h.state,this.buffer,this.resampling,this.coveragePolicy)){var {spans:y,lodInfo:D}=h,{level:C}=D;this.tiles.length=0;e.forEach(E=>E.visible=!0);var c=0,x=0;if(0<y.length)for(const {row:E,colFrom:I,colTo:L}of y)for(var G=
I;G<=L;G++){c++;const R=r.set(C,E,D.normalizeCol(G),D.getWorldForColumn(G)).id;let S=e.get(R);if(S)S.isReady?(z.set(R,S),x++):q||this._addParentTile(R,z);else{if(this._tileCache?.has(R)){if(S=this._tileCache.pop(R),this.tileIndex.set(R,S),S.isReady){z.set(R,S);x++;continue}}else S=this.acquireTile(r),this.tileIndex.set(R,S);q||this._addParentTile(R,z)}}c=x===c;for(const [E,I]of e)z.has(E)||(r.set(E),x=this.tileInfoView.intersects(h,r),G="purge"===this.cachePolicy?r.level!==C:r.level>C,!x||!q&&c?!G&&
x||w.push(I):I.isReady?G&&"purge"===this.cachePolicy&&this._hasReadyAncestor(r,C)?w.push(I):m.push(I):G&&w.push(I));for(const E of m)E.isReady&&z.set(E.key.id,E);for(const E of w)this._tileCache?this._tileCache.add(E):this.releaseTile(E),e.delete(E.key.id);for(const E of z.values())this.tiles.push(E);for(const E of e.values())z.has(E.key.id)||(E.visible=!1);this._tileCache?.prune(C,a,d);l.pool.release(h);m.length=0;w.length=0;z.clear()}else this.tiles.length=0,this.clear()};n.clear=function(){const {tileIndex:h}=
this;for(const g of h.values())this.releaseTile(g);h.clear()};n.refresh=function(h){for(const g of this.tileIndex.values())this.tiles.includes(g)?h(g):w.push(g);for(const g of w)this.releaseTile(g),this.tileIndex.delete(g.key.id);this._tileCache?.clear()};n.updateCacheSize=function(h){this._tileCache&&(this._tileCache.maxSize=h)};n._addParentTile=function(h,g){let e=null;for(;;){h=this.tileInfoView.getTileParentId(h);if(!h)break;if(this.tileIndex.has(h)){if(e=this.tileIndex.get(h),e?.isReady){g.has(e.key.id)||
g.set(e.key.id,e);break}}else if(this._tileCache?.has(h)&&(e=this._tileCache.pop(h),this.tileIndex.set(h,e),e?.isReady)){g.has(e.key.id)||g.set(e.key.id,e);break}}};n._hasReadyAncestor=function(h,g){const e=p.create();this.tileInfoView.getTileBounds(e,h,!0);for(const b of this.tileIndex.values())if(b.isReady&&b.key.level>=g&&b.key.level<h.level){const a=p.create();this.tileInfoView.getTileBounds(a,b.key,!0);if(p.contains(a,e))return!0}return!1};return f._createClass(t)}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../chunks/vec2"],function(f,p){return function(){function k(u,r,z){this.maxSize=u;this._tileInfoView=r;this._removedFunc=z;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var l=k.prototype;l.clear=function(){this._tilePerId.clear();this._tileKeysPerLevel=[]};l.has=function(u){return this._tilePerId.has(u)};l.get=function(u){return this._tilePerId.get(u)};l.pop=function(u){const r=this._tilePerId.get(u);if(r){var z=this._tileKeysPerLevel[r.key.level];this._tilePerId["delete"](u);for(let w=
0;w<z.length;w++)if(z[w].id===u){z.splice(w,1);break}r.visible=!0;return r}};l.add=function(u){u.visible=!1;const r=u.key,z=r.id;this._tilePerId.has(z)||(this._tilePerId.set(z,u),u=r.level,this._tileKeysPerLevel[u]||(this._tileKeysPerLevel[u]=[]),this._tileKeysPerLevel[u].push(r))};l.prune=function(u,r,z){let w=this._tilePerId.size;if(!(w<=this.maxSize)){for(var m=this._tileKeysPerLevel.length-1;w>this.maxSize&&0<=m;)m!==u&&(w=this._pruneAroundCenterTile(w,r,z,m)),m--;w>this.maxSize&&(w=this._pruneAroundCenterTile(w,
r,z,u))}};l._pruneAroundCenterTile=function(u,r,z,w){w=this._tileKeysPerLevel[w];if(!w||0===w.length)return u;const {size:m,origin:t}=this._tileInfoView.tileInfo,n=z*m[0],h=z*m[1],g=[0,0],e=[0,0];for(w.sort((b,a)=>{g[0]=t.x+n*(b.col+.5);g[1]=t.y-h*(b.row+.5);e[0]=t.x+n*(a.col+.5);e[1]=t.y-h*(a.row+.5);return p.squaredDistance(g,r)-p.squaredDistance(e,r)});0<w.length&&(z=w.pop(),this._removeTile(z.id),u--,u!==this.maxSize););return u};l._removeTile=function(u){const r=this._tilePerId.get(u);this._removedFunc&&
r&&this._removedFunc(r);this._tilePerId["delete"](u)};return f._createClass(k)}()})},"esri/views/2d/ViewStateManager":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/Error ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/screenUtils ../../core/Warning ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../chunks/pe ../../geometry/Point ../../geometry/projection ../../geometry/support/spatialReferenceUtils ./PaddedViewState ./viewpointUtils ../../geometry/Extent".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e,b,a,d,v,A,q,y,D,C){f.ViewStateManager=function(c){function x(E){var I=c.call(this,E)||this;I.constraints=null;I.ready=!1;I.resizeAlign="center";I.addHandles([t.watch(()=>I.constraints?.version,L=>{I.constraints&&L&&I.ready&&(I.state.viewpoint=I.constraints.fit(I.state.paddedViewState.viewpoint))},t.sync)]);return I}p._inherits(x,c);var G=x.prototype;G.getUserStartupOptions=function(E){if(!E[0]&&!E[1])return{center:void 0,rotation:void 0,scale:void 0};const {padding:I,
constraints:L}=this;var R=this._get("center"),S=this._get("extent");const Y=this._get("scale");var da=this._get("rotation");const B=this._get("viewpoint");var F=this._get("zoom");F=null!=F&&null!=L?L.zoomToScale(F)||void 0:void 0;let N=void 0,W=void 0,J=void 0;const K=B?.targetGeometry;"extent"===K?.type?N=K:"point"===K?.type&&(W=K,J=B?.scale);S=S??N;R=R??W??S?.center;da=da??B?.rotation;E=(Y??F??J??(S&&D.extentToScale(S,[E[0]-I.left-I.right,E[1]-I.top-I.bottom])))||void 0;return{center:R,rotation:da,
scale:E}};G.startup=function(E,I,L,R){const S=E.targetGeometry;try{this._project(E,L)}catch(Y){m.getLogger(this).warn(new h("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:S.toJSON(),spatialReference:L,error:Y})),E.targetGeometry=R||new v({x:0,y:0,spatialReference:L})}this.constraints?.fit(E);this._set("state",new y({padding:this.padding,size:I,viewpoint:E}));this._set("ready",!0)};G.teardown=function(){this._set("ready",
!1);const {center:[E,I],spatialReference:L,rotation:R,scale:S}=this.state.paddedViewState,Y=new v({x:E,y:I,spatialReference:L});this._set("viewpoint",null);this._set("extent",null);this._set("center",Y);this._set("zoom",-1);this._set("rotation",R);this._set("scale",S);this._set("state",null)};G.changeSpatialReference=function(E){const I=this.state.paddedViewState.clone();if(null==this._scaleBeforeChangingSpatialReference)this._scaleBeforeChangingSpatialReference=I.scale;else{var L=I.viewpoint.clone();
L.scale=this._scaleBeforeChangingSpatialReference;I.viewpoint=L}L=I.clone();const [R,S]=I.center;var Y=null;try{Y=this._project(new v({x:R,y:S,spatialReference:I.spatialReference}),E)}catch(da){d.isLoaded()||m.getLogger(this).warn(new h("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:Y?.toJSON(),spatialReference:E,error:da}))}Y||(Y=new v({x:0,y:0,spatialReference:E}));Y=D.centerAt(new u({targetGeometry:new v,scale:0,rotation:0}),I.viewpoint,
Y);L.viewpoint=Y;try{const da=[I.size[0]/2,I.size[1]/2],B=[da[0]+20,da[1]],F=I.toMap([0,0],B),{x:N,y:W}=this._project(new v({x:F[0],y:F[1],spatialReference:I.spatialReference}),E);F[0]=N;F[1]=W;L.toScreen(F,F);const J=D.angleBetween(da,F,B),K=Math.hypot(F[0]-da[0],F[1]-da[1])/20;!Number.isFinite(K)||4<Math.abs(K)?(Y.rotation=0,Y.targetGeometry=new v({x:0,y:0,spatialReference:E})):(Y.scale*=K,Y.scale>w("mapview-srswitch-adjust-rotation-scale-threshold")?Y.rotation=0:Y.rotation+=Number.isFinite(J)?
J:0)}catch{}this._get("constraints")?.constrain(Y,void 0);this._get("state").viewpoint=Y};G.resize=function(E,I){if(this.ready){var L=this.state,R=this.state.paddedViewState.viewpoint,S=this.state.paddedViewState.size.concat();L.size=[E,I];D.resize(R,R,S,this.state.paddedViewState.size,this.resizeAlign);R=this.constraints?.constrain(R,void 0)??R;this.state.viewpoint=R}};G.toMap=function(E){if(!this.ready)return null;const [I,L]=this.state.toMap([0,0],[E.x,E.y]);return new v({x:I,y:L,spatialReference:this.state.spatialReference})};
G.toScreen=function(E){if(!this.ready)return null;E=this._project(E,this.state.spatialReference);E=[E.x,E.y];this.state.toScreen(E,E);return n.createScreenPoint(E[0],E[1])};G._project=function(E,I){const L=E&&E.targetGeometry||E;if(!I)return E;if(!L)return null;if(I.imageCoordinateSystem||L.spatialReference?.imageCoordinateSystem||q.equals(I,L.spatialReference))return E;const R=A.project(L,I);if(!R)throw new z("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",
{geometry:L,spatialReference:I});return"esri.Viewpoint"===E?.declaredClass?(E.targetGeometry=R,E):R};p._createClass(x,[{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:E,spatialReference:I}=this.state.paddedViewState;this.state.commitProperty("id");return new v({x:E[0],y:E[1],spatialReference:I})},set:function(E){if(null!=E)if(this.ready){try{var I=this._project(E,this.state.spatialReference)}catch(L){m.getLogger(this).error(new z("mapview:invalid-center","could not project the value in the view's spatial reference",
{input:E,error:L}));return}E=this.viewpoint;D.centerAt(E,E,I);this.viewpoint=E}else this._set("center",E)}},{key:"extent",get:function(){if(!this.ready)return this._get("extent");this.state.commitProperty("id");return this.state.paddedViewState.extent.clone()},set:function(E){if(null!=E)if(E.width&&E.height)if(this.ready){try{var I=this._project(E,this.state.spatialReference)}catch(L){m.getLogger(this).error(new z("mapview:invalid-extent","could not project the value in the view's spatial reference",
{error:L}));return}E=this.viewpoint;D.setExtent(E,E,I,this.state.size,{constraints:this.constraints});this.viewpoint=E}else this._set("extent",E),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),this._set("zoom",void 0);else m.getLogger(this).error(new z("mapview:invalid-extent","invalid extent size"))}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(E){this.ready?(this.state.padding=E,this._set("padding",this.state.padding)):
this._set("padding",E)}},{key:"resolution",get:function(){if(!this.ready)return 0;this.state.commitProperty("id");return this.state.resolution}},{key:"rotation",get:function(){if(!this.ready)return this._get("rotation");this.state.commitProperty("id");return this.state.rotation},set:function(E){if(!isNaN(E))if(this.ready){var I=this.viewpoint;D.rotateTo(I,I,E);this.viewpoint=I}else this._set("rotation",E)}},{key:"scale",get:function(){if(!this.ready)return this._get("scale");this.state.commitProperty("id");
return this.state.scale},set:function(E){if(E&&!isNaN(E))if(this.ready){var I=this.viewpoint;D.scaleTo(I,I,E);this.viewpoint=I}else if(this._set("scale",E),this._set("zoom",void 0),E=this._get("extent"))this._set("extent",void 0),this._set("center",E.center)}},{key:"viewpoint",get:function(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")},set:function(E){if(null!=E)if(this.ready){var I;try{var L=this._project(E,this.state.spatialReference);!E.scale||isNaN(E.scale)?
I=new z("mapview:invalid-viewpoint",`invalid scale value of ${E.scale}`):null==E.targetGeometry&&(I=new z("mapview:invalid-viewpoint","geometry not defined"))}catch(R){I=new z("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:R})}I?m.getLogger(this).error(I):(this._scaleBeforeChangingSpatialReference=null,E=new u({targetGeometry:new v,scale:0,rotation:0}),D.copy(E,L),this.constraints?.constrain(E,this.state.paddedViewState.viewpoint),this.state.viewpoint=
E,this._set("viewpoint",E))}else this._set("viewpoint",E),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),this._set("scale",void 0)}},{key:"zoom",get:function(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")},set:function(E){if(0<=E)if(this.ready)if(E=this.constraints?.zoomToScale(E)??0){var I=this.viewpoint;D.scaleTo(I,I,E);this.viewpoint=I;this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}else this._set("zoom",-1);else if(this._set("zoom",
E),this._set("scale",void 0),E=this._get("extent"))this._set("extent",void 0),this._set("center",E.center)}}]);return x}(r);k.__decorate([g.property({type:v})],f.ViewStateManager.prototype,"center",null);k.__decorate([g.property()],f.ViewStateManager.prototype,"constraints",void 0);k.__decorate([g.property({type:C})],f.ViewStateManager.prototype,"extent",null);k.__decorate([g.property({value:{top:0,right:0,bottom:0,left:0},cast:c=>({top:0,right:0,bottom:0,left:0,...c})})],f.ViewStateManager.prototype,
"padding",null);k.__decorate([g.property()],f.ViewStateManager.prototype,"ready",void 0);k.__decorate([g.property()],f.ViewStateManager.prototype,"resizeAlign",void 0);k.__decorate([g.property({readOnly:!0})],f.ViewStateManager.prototype,"resolution",null);k.__decorate([g.property({type:Number})],f.ViewStateManager.prototype,"rotation",null);k.__decorate([g.property({type:Number})],f.ViewStateManager.prototype,"scale",null);k.__decorate([g.property({readOnly:!0})],f.ViewStateManager.prototype,"state",
void 0);k.__decorate([g.property({type:u})],f.ViewStateManager.prototype,"viewpoint",null);k.__decorate([g.property()],f.ViewStateManager.prototype,"zoom",null);f.ViewStateManager=k.__decorate([a.subclass("esri.views.2d.ViewStateManager")],f.ViewStateManager);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g){var e,b;let a=e=function(d){function v(){var A=d.apply(this,arguments)||this;A.left=0;A.top=0;A.right=0;A.bottom=0;return A}f._inherits(v,d);v.prototype.clone=function(){return new e({left:this.left,top:this.top,right:this.right,bottom:this.bottom})};return f._createClass(v)}(k);p.__decorate([u.property()],a.prototype,"left",void 0);p.__decorate([u.property()],a.prototype,"top",void 0);p.__decorate([u.property()],a.prototype,"right",void 0);p.__decorate([u.property()],
a.prototype,"bottom",void 0);a=e=p.__decorate([m.subclass("esri.views.2d.PaddedViewState.Padding")],a);k=b=function(d){function v(...A){var q=d.call(this,...A)||this;q.paddedViewState=new g;q._updateContent=(()=>{const y=n.create();return()=>{var D=q._get("size");const C=q._get("padding");if(D&&C){var c=q.paddedViewState;t.set(y,C.left+C.right,C.top+C.bottom);t.subtract(y,D,y);t.copy(c.size,y);if(D=c.viewpoint)q.viewpoint=D}}})();q.addHandles(l.watch(()=>[q.size,q.padding],()=>q._updateContent(),
l.sync));q.padding=new a;q.size=[0,0];return q}f._inherits(v,d);v.prototype.clone=function(){return new b({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})};f._createClass(v,[{key:"padding",set:function(A){this._set("padding",A||new a)}},{key:"viewpoint",set:function(A){if(A){const q=A.clone();this.paddedViewState.viewpoint=A;h.addPadding(q,A,this._get("size"),this._get("padding"));A=this._viewpoint2D;const y=q.targetGeometry;
A.center[0]=y.x;A.center[1]=y.y;A.rotation=q.rotation;A.scale=q.scale;A.spatialReference=y.spatialReference;this._update()}}}]);return v}(g);p.__decorate([u.property()],k.prototype,"paddedViewState",void 0);p.__decorate([u.property({type:a})],k.prototype,"padding",null);p.__decorate([u.property()],k.prototype,"viewpoint",null);return k=b=p.__decorate([m.subclass("esri.views.2d.PaddedViewState")],k)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e,b,a,d,v,A,q,y,D,C){var c;const x=[0,0];k=c=function(G){function E(L){L=G.call(this,L)||this;L._viewpoint2D={center:A.create(),rotation:0,scale:0,spatialReference:void 0};L.center=[0,0];L.extent=new D;L.id=0;L.inverseTransform=e.create();L.resolution=0;L.rotation=0;L.scale=0;L.transform=e.create();L.transformNoRotation=e.create();L.displayMat3=a.create();L.displayViewMat3=a.create();L.viewMat3=a.create();L.viewMat2d=g.create();L.worldScreenWidth=0;L.size=[0,0];
return L}f._inherits(E,G);var I=E.prototype;I.copy=function(L){const R=this.size,S=this.viewpoint;S&&R?(this.viewpoint=y.copy(S,L.viewpoint),this._set("size",d.copy(R,L.size))):(this.viewpoint=L.viewpoint.clone(),this._set("size",[L.size[0],L.size[1]]));this._set("pixelRatio",L.pixelRatio);return this};I.clone=function(){return new c({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};I.toMap=function(L,R,S){if(q.isVec2(R))return d.transformMat2d(L,R,this.inverseTransform);
x[0]=R;x[1]=S;return d.transformMat2d(L,x,this.inverseTransform)};I.toScreen=function(L,R,S){if(q.isVec2(R))return d.transformMat2d(L,R,this.transform);x[0]=R;x[1]=S;return d.transformMat2d(L,x,this.transform)};I.toScreenNoRotation=function(L,R,S){if(q.isVec2(R))return d.transformMat2d(L,R,this.transformNoRotation);x[0]=R;x[1]=S;return d.transformMat2d(L,x,this.transformNoRotation)};I.getScreenTransform=function(L,R){const {center:S}=this._viewpoint2D,Y=this._get("pixelRatio")||1,da=this._get("size");
y.getMatrix(L,S,da,R,0,Y);return L};I._update=function(){const {center:L,spatialReference:R,scale:S,rotation:Y}=this._viewpoint2D,da=this._get("pixelRatio")||1,B=this._get("size"),F=new l({targetGeometry:new C(L[0],L[1],R),scale:S,rotation:Y});this._set("viewpoint",F);if(B&&R&&S){this.resolution=y.getResolution(F);this.rotation=Y;this.scale=S;this.spatialReference=R;d.copy(this.center,L);b.set(this.displayMat3,0!==B[0]?2/B[0]:0,0,0,0,0!==B[1]?-2/B[1]:0,0,-1,1,1);var N=b.identity(this.viewMat3),W=
v.fromValues(B[0]/2,B[1]/2),J=v.fromValues(-B[0]/2,-B[1]/2),K=n.toRadian(Y);b.translate(N,N,W);b.rotate(N,N,K);b.translate(N,N,J);b.multiply(this.displayViewMat3,this.displayMat3,N);N=h.fromTranslation(this.viewMat2d,W);h.rotate(N,N,K);h.translate(N,N,J);y.getExtent(this.extent,F,B);y.getTransform(this.transform,F,B,da);h.invert(this.inverseTransform,this.transform);y.getTransformNoRotation(this.transformNoRotation,F,B,da);this.worldScreenWidth=y.getWorldScreenWidth(this.spatialReference,this.resolution);
this._set("id",this.id+1);return this}};f._createClass(E,[{key:"pixelRatio",set:function(L){this._set("pixelRatio",L);this._update()}},{key:"size",set:function(L){this._set("size",L);this._update()}},{key:"viewpoint",set:function(L){if(L){const R=this._viewpoint2D,S=L.targetGeometry;R.center[0]=S.x;R.center[1]=S.y;R.rotation=L.rotation;R.scale=L.scale;R.spatialReference=S.spatialReference}this._update()}}]);return E}(u.JSONSupport);p.__decorate([r.property({readOnly:!0})],k.prototype,"id",void 0);
p.__decorate([r.property({value:1,json:{write:!0}})],k.prototype,"pixelRatio",null);p.__decorate([r.property({json:{write:!0}})],k.prototype,"size",null);p.__decorate([r.property()],k.prototype,"spatialReference",void 0);p.__decorate([r.property({type:l,json:{write:!0}})],k.prototype,"viewpoint",null);return k=c=p.__decorate([t.subclass("esri.views.2d.ViewState")],k)})},"esri/chunks/mat2df32":function(){define(["exports"],function(f){function p(){const m=new Float32Array(6);m[0]=1;m[3]=1;return m}
function k(m){const t=new Float32Array(6);t[0]=m[0];t[1]=m[1];t[2]=m[2];t[3]=m[3];t[4]=m[4];t[5]=m[5];return t}function l(m,t,n,h,g,e){const b=new Float32Array(6);b[0]=m;b[1]=t;b[2]=n;b[3]=h;b[4]=g;b[5]=e;return b}function u(m,t){return new Float32Array(m,t,6)}function r(m,t,n,h){const g=t[h];t=t[h+1];m[h]=n[0]*g+n[2]*t+n[4];m[h+1]=n[1]*g+n[3]*t+n[5]}function z(m,t,n,h=0,g=0,e=2){for(g=g||t.length/e;h<g;h++)r(m,t,n,h*e)}const w=Object.freeze(Object.defineProperty({__proto__:null,clone:k,create:p,
createView:u,fromValues:l,transform:r,transformMany:z},Symbol.toStringTag,{value:"Module"}));f.clone=k;f.create=p;f.createView=u;f.fromValues=l;f.mat2df32=w;f.transform=r;f.transformMany=z})},"esri/chunks/mat3":function(){define(["exports","./common"],function(f,p){function k(B,F){B[0]=F[0];B[1]=F[1];B[2]=F[2];B[3]=F[4];B[4]=F[5];B[5]=F[6];B[6]=F[8];B[7]=F[9];B[8]=F[10];return B}function l(B,F){B[0]=F[0];B[1]=F[1];B[2]=F[2];B[3]=F[3];B[4]=F[4];B[5]=F[5];B[6]=F[6];B[7]=F[7];B[8]=F[8];return B}function u(B,
F,N,W,J,K,O,X,Z,H){B[0]=F;B[1]=N;B[2]=W;B[3]=J;B[4]=K;B[5]=O;B[6]=X;B[7]=Z;B[8]=H;return B}function r(B){B[0]=1;B[1]=0;B[2]=0;B[3]=0;B[4]=1;B[5]=0;B[6]=0;B[7]=0;B[8]=1;return B}function z(B,F){if(B===F){const N=F[1],W=F[2],J=F[5];B[1]=F[3];B[2]=F[6];B[3]=N;B[5]=F[7];B[6]=W;B[7]=J}else B[0]=F[0],B[1]=F[3],B[2]=F[6],B[3]=F[1],B[4]=F[4],B[5]=F[7],B[6]=F[2],B[7]=F[5],B[8]=F[8];return B}function w(B,F){const N=F[0],W=F[1],J=F[2],K=F[3],O=F[4],X=F[5],Z=F[6],H=F[7];F=F[8];const M=F*O-X*H,Q=-F*K+X*Z,V=H*
K-O*Z;let U=N*M+W*Q+J*V;if(!U)return null;U=1/U;B[0]=M*U;B[1]=(-F*W+J*H)*U;B[2]=(X*W-J*O)*U;B[3]=Q*U;B[4]=(F*N-J*Z)*U;B[5]=(-X*N+J*K)*U;B[6]=V*U;B[7]=(-H*N+W*Z)*U;B[8]=(O*N-W*K)*U;return B}function m(B,F){const N=F[0],W=F[1],J=F[2],K=F[3],O=F[4],X=F[5],Z=F[6],H=F[7];F=F[8];B[0]=O*F-X*H;B[1]=J*H-W*F;B[2]=W*X-J*O;B[3]=X*Z-K*F;B[4]=N*F-J*Z;B[5]=J*K-N*X;B[6]=K*H-O*Z;B[7]=W*Z-N*H;B[8]=N*O-W*K;return B}function t(B){const F=B[3],N=B[4],W=B[5],J=B[6],K=B[7],O=B[8];return B[0]*(O*N-W*K)+B[1]*(-O*F+W*J)+B[2]*
(K*F-N*J)}function n(B,F,N){const W=F[0],J=F[1],K=F[2],O=F[3],X=F[4],Z=F[5],H=F[6],M=F[7];F=F[8];const Q=N[0],V=N[1],U=N[2],aa=N[3],ha=N[4],ja=N[5],fa=N[6],ea=N[7];N=N[8];B[0]=Q*W+V*O+U*H;B[1]=Q*J+V*X+U*M;B[2]=Q*K+V*Z+U*F;B[3]=aa*W+ha*O+ja*H;B[4]=aa*J+ha*X+ja*M;B[5]=aa*K+ha*Z+ja*F;B[6]=fa*W+ea*O+N*H;B[7]=fa*J+ea*X+N*M;B[8]=fa*K+ea*Z+N*F;return B}function h(B,F,N){const W=F[0],J=F[1],K=F[2],O=F[3],X=F[4],Z=F[5],H=F[6],M=F[7];F=F[8];const Q=N[0];N=N[1];B[0]=W;B[1]=J;B[2]=K;B[3]=O;B[4]=X;B[5]=Z;B[6]=
Q*W+N*O+H;B[7]=Q*J+N*X+M;B[8]=Q*K+N*Z+F;return B}function g(B,F,N){const W=F[0],J=F[1],K=F[2],O=F[3],X=F[4],Z=F[5],H=F[6],M=F[7];F=F[8];const Q=Math.sin(N);N=Math.cos(N);B[0]=N*W+Q*O;B[1]=N*J+Q*X;B[2]=N*K+Q*Z;B[3]=N*O-Q*W;B[4]=N*X-Q*J;B[5]=N*Z-Q*K;B[6]=H;B[7]=M;B[8]=F;return B}function e(B,F,N){const W=N[0],J=N[1];N=N[2];B[0]=W*F[0];B[1]=W*F[1];B[2]=W*F[2];B[3]=J*F[3];B[4]=J*F[4];B[5]=J*F[5];B[6]=N*F[6];B[7]=N*F[7];B[8]=N*F[8];return B}function b(B,F,N){const W=N[0];N=N[1];B[0]=W*F[0];B[1]=W*F[1];
B[2]=W*F[2];B[3]=N*F[3];B[4]=N*F[4];B[5]=N*F[5];return B}function a(B,F){B[0]=1;B[1]=0;B[2]=0;B[3]=0;B[4]=1;B[5]=0;B[6]=F[0];B[7]=F[1];B[8]=1;return B}function d(B,F){const N=Math.sin(F);F=Math.cos(F);B[0]=F;B[1]=N;B[2]=0;B[3]=-N;B[4]=F;B[5]=0;B[6]=0;B[7]=0;B[8]=1;return B}function v(B,F){B[0]=F[0];B[1]=0;B[2]=0;B[3]=0;B[4]=F[1];B[5]=0;B[6]=0;B[7]=0;B[8]=1;return B}function A(B,F){B[0]=F[0];B[1]=F[1];B[2]=0;B[3]=F[2];B[4]=F[3];B[5]=0;B[6]=F[4];B[7]=F[5];B[8]=1;return B}function q(B,F){var N=F[0],
W=F[1],J=F[2];F=F[3];var K=N+N,O=W+W;const X=J+J;N*=K;const Z=W*K;W*=O;const H=J*K,M=J*O;J*=X;K*=F;O*=F;F*=X;B[0]=1-W-J;B[3]=Z-F;B[6]=H+O;B[1]=Z+F;B[4]=1-N-J;B[7]=M-K;B[2]=H-O;B[5]=M+K;B[8]=1-N-W;return B}function y(B,F){const N=F[0],W=F[1],J=F[2],K=F[4],O=F[5],X=F[6],Z=F[8],H=F[9];F=F[10];const M=F*O-X*H,Q=-F*K+X*Z,V=H*K-O*Z;var U=N*M+W*Q+J*V;if(!U)return null;U=1/U;B[0]=M*U;B[1]=(-F*W+J*H)*U;B[2]=(X*W-J*O)*U;B[3]=Q*U;B[4]=(F*N-J*Z)*U;B[5]=(-X*N+J*K)*U;B[6]=V*U;B[7]=(-H*N+W*Z)*U;B[8]=(O*N-W*K)*U;
return B}function D(B,F){const N=F[0],W=F[1],J=F[2],K=F[3],O=F[4],X=F[5],Z=F[6],H=F[7];var M=F[8],Q=F[9],V=F[10],U=F[11];const aa=F[12],ha=F[13],ja=F[14];F=F[15];const fa=N*X-W*O,ea=N*Z-J*O,la=N*H-K*O,na=W*Z-J*X,va=W*H-K*X,ua=J*H-K*Z,ta=M*ha-Q*aa,wa=M*ja-V*aa;M=M*F-U*aa;const xa=Q*ja-V*ha;Q=Q*F-U*ha;V=V*F-U*ja;U=fa*V-ea*Q+la*xa+na*M-va*wa+ua*ta;if(!U)return null;U=1/U;B[0]=(X*V-Z*Q+H*xa)*U;B[1]=(Z*M-O*V-H*wa)*U;B[2]=(O*Q-X*M+H*ta)*U;B[3]=(J*Q-W*V-K*xa)*U;B[4]=(N*V-J*M+K*wa)*U;B[5]=(W*M-N*Q-K*ta)*
U;B[6]=(ha*ua-ja*va+F*na)*U;B[7]=(ja*la-aa*ua-F*ea)*U;B[8]=(aa*va-ha*la+F*fa)*U;return B}function C(B,F,N){B[0]=2/F;B[1]=0;B[2]=0;B[3]=0;B[4]=-2/N;B[5]=0;B[6]=-1;B[7]=1;B[8]=1;return B}function c(B){return"mat3("+B[0]+", "+B[1]+", "+B[2]+", "+B[3]+", "+B[4]+", "+B[5]+", "+B[6]+", "+B[7]+", "+B[8]+")"}function x(B){return Math.sqrt(B[0]**2+B[1]**2+B[2]**2+B[3]**2+B[4]**2+B[5]**2+B[6]**2+B[7]**2+B[8]**2)}function G(B,F,N){B[0]=F[0]+N[0];B[1]=F[1]+N[1];B[2]=F[2]+N[2];B[3]=F[3]+N[3];B[4]=F[4]+N[4];B[5]=
F[5]+N[5];B[6]=F[6]+N[6];B[7]=F[7]+N[7];B[8]=F[8]+N[8];return B}function E(B,F,N){B[0]=F[0]-N[0];B[1]=F[1]-N[1];B[2]=F[2]-N[2];B[3]=F[3]-N[3];B[4]=F[4]-N[4];B[5]=F[5]-N[5];B[6]=F[6]-N[6];B[7]=F[7]-N[7];B[8]=F[8]-N[8];return B}function I(B,F,N){B[0]=F[0]*N;B[1]=F[1]*N;B[2]=F[2]*N;B[3]=F[3]*N;B[4]=F[4]*N;B[5]=F[5]*N;B[6]=F[6]*N;B[7]=F[7]*N;B[8]=F[8]*N;return B}function L(B,F,N,W){B[0]=F[0]+N[0]*W;B[1]=F[1]+N[1]*W;B[2]=F[2]+N[2]*W;B[3]=F[3]+N[3]*W;B[4]=F[4]+N[4]*W;B[5]=F[5]+N[5]*W;B[6]=F[6]+N[6]*W;B[7]=
F[7]+N[7]*W;B[8]=F[8]+N[8]*W;return B}function R(B,F){return B[0]===F[0]&&B[1]===F[1]&&B[2]===F[2]&&B[3]===F[3]&&B[4]===F[4]&&B[5]===F[5]&&B[6]===F[6]&&B[7]===F[7]&&B[8]===F[8]}function S(B,F){const N=B[0],W=B[1],J=B[2],K=B[3],O=B[4],X=B[5],Z=B[6],H=B[7];B=B[8];const M=F[0],Q=F[1],V=F[2],U=F[3],aa=F[4],ha=F[5],ja=F[6],fa=F[7];F=F[8];const ea=p.getEpsilon();return Math.abs(N-M)<=ea*Math.max(1,Math.abs(N),Math.abs(M))&&Math.abs(W-Q)<=ea*Math.max(1,Math.abs(W),Math.abs(Q))&&Math.abs(J-V)<=ea*Math.max(1,
Math.abs(J),Math.abs(V))&&Math.abs(K-U)<=ea*Math.max(1,Math.abs(K),Math.abs(U))&&Math.abs(O-aa)<=ea*Math.max(1,Math.abs(O),Math.abs(aa))&&Math.abs(X-ha)<=ea*Math.max(1,Math.abs(X),Math.abs(ha))&&Math.abs(Z-ja)<=ea*Math.max(1,Math.abs(Z),Math.abs(ja))&&Math.abs(H-fa)<=ea*Math.max(1,Math.abs(H),Math.abs(fa))&&Math.abs(B-F)<=ea*Math.max(1,Math.abs(B),Math.abs(F))}function Y(B){const F=p.getEpsilon(),N=B[0],W=B[1],J=B[2],K=B[3],O=B[4],X=B[5],Z=B[6],H=B[7];B=B[8];return Math.abs(1-(N*N+K*K+Z*Z))<=F&&Math.abs(1-
(W*W+O*O+H*H))<=F&&Math.abs(1-(J*J+X*X+B*B))<=F}const da=Object.freeze(Object.defineProperty({__proto__:null,add:G,adjoint:m,copy:l,determinant:t,equals:S,exactEquals:R,frob:x,fromMat2d:A,fromMat4:k,fromQuat:q,fromRotation:d,fromScaling:v,fromTranslation:a,identity:r,invert:w,isOrthoNormal:Y,mul:n,multiply:n,multiplyScalar:I,multiplyScalarAndAdd:L,normalFromMat4:D,normalFromMat4Legacy:y,projection:C,rotate:g,scale:e,scaleByVec2:b,set:u,str:c,sub:E,subtract:E,translate:h,transpose:z},Symbol.toStringTag,
{value:"Module"}));f.add=G;f.adjoint=m;f.copy=l;f.determinant=t;f.equals=S;f.exactEquals=R;f.frob=x;f.fromMat2d=A;f.fromMat4=k;f.fromQuat=q;f.fromRotation=d;f.fromScaling=v;f.fromTranslation=a;f.identity=r;f.invert=w;f.isOrthoNormal=Y;f.mat3=da;f.mul=n;f.multiply=n;f.multiplyScalar=I;f.multiplyScalarAndAdd=L;f.normalFromMat4=D;f.normalFromMat4Legacy=y;f.projection=C;f.rotate=g;f.scale=e;f.scaleByVec2=b;f.set=u;f.str=c;f.sub=E;f.subtract=E;f.translate=h;f.transpose=z})},"esri/chunks/mat3f32":function(){define(["exports"],
function(f){function p(){const z=new Float32Array(9);z[0]=1;z[4]=1;z[8]=1;return z}function k(z){const w=new Float32Array(9);w[0]=z[0];w[1]=z[1];w[2]=z[2];w[3]=z[3];w[4]=z[4];w[5]=z[5];w[6]=z[6];w[7]=z[7];w[8]=z[8];return w}function l(z,w,m,t,n,h,g,e,b){const a=new Float32Array(9);a[0]=z;a[1]=w;a[2]=m;a[3]=t;a[4]=n;a[5]=h;a[6]=g;a[7]=e;a[8]=b;return a}function u(z,w){return new Float32Array(z,w,9)}const r=Object.freeze(Object.defineProperty({__proto__:null,clone:k,create:p,createView:u,fromValues:l},
Symbol.toStringTag,{value:"Module"}));f.clone=k;f.create=p;f.createView=u;f.fromValues=l;f.mat3f32=r})},"esri/chunks/vec2f32":function(){define(["exports"],function(f){function p(){return new Float32Array(2)}function k(b){const a=new Float32Array(2);a[0]=b[0];a[1]=b[1];return a}function l(b,a){const d=new Float32Array(2);d[0]=b;d[1]=a;return d}function u(b,a){return new Float32Array(b,a,2)}function r(){return p()}function z(){return l(1,1)}function w(){return l(1,0)}function m(){return l(0,1)}const t=
p(),n=z(),h=w(),g=m(),e=Object.freeze(Object.defineProperty({__proto__:null,ONES:n,UNIT_X:h,UNIT_Y:g,ZEROS:t,clone:k,create:p,createView:u,fromValues:l,ones:z,unitX:w,unitY:m,zeros:r},Symbol.toStringTag,{value:"Module"}));f.ONES=n;f.UNIT_X=h;f.UNIT_Y=g;f.ZEROS=t;f.clone=k;f.create=p;f.createView=u;f.fromValues=l;f.ones=z;f.unitX=w;f.unitY=m;f.vec2f32=e;f.zeros=r})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(f){function p(l){return l instanceof Float32Array&&2<=
l.length}function k(l){return Array.isArray(l)&&2<=l.length}f.isVec2=function(l){return p(l)||k(l)};f.isVec2f32=p;f.isVec2f64=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Handles ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e,b,a,d,v,A,q,y,D,C,c,x,G,E,I,L){var R={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},S={zoomIn:["\x3d","+"],zoomOut:["-","_"]},Y={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};k=function(da){function B(){var N=da.apply(this,arguments)||this;N._handles=new l;return N}f._inherits(B,da);var F=B.prototype;F.initialize=function(){const N=()=>this.view?.ready;this._handles.add([r.when(()=>
!N(),()=>this._disconnect()),r.when(N,()=>this._connect())])};F.destroy=function(){this._handles=u.destroyMaybe(this._handles);this._disconnect()};F._disconnect=function(){this.view.viewEvents.disconnect();this._inputManager=u.destroyMaybe(this._inputManager)};F._connect=function(){const N=new D.BrowserEventSource(this.view.surface,this.view.input);var W=[new E.ImmediateDoubleClick,new I.PointerClickHoldAndDrag,new L.SingleAndDoubleClick,new G.Drag(this.view.navigation),new x.DoubleTapDrag];W=new C.InputManager({eventSource:N,
recognizers:W});W.installHandlers("prevent-context-menu",[new c.PreventContextMenu],C.ViewEventPriorities.INTERNAL);W.installHandlers("navigation",[new y.PinchRotateAndZoom(this.view),new a.GamepadNavigation(this.view),new q.MouseWheelZoom(this.view),new h.DoubleClickZoom(this.view),new h.DoubleClickZoom(this.view,["Ctrl"]),new e.DragPan(this.view,"primary"),new d.KeyPan(this.view,R),new A.KeyZoom(this.view,S),new v.KeyRotate(this.view,Y),new b.DragRotate(this.view,"secondary"),new g.DoubleTapDragZoom(this.view,
"touch")],C.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(W);this._source=N;this._inputManager=W;r.watch(()=>this.view?.navigation?.browserTouchPanEnabled,J=>{this._source&&(this._source.browserTouchPanningEnabled=!J)},r.initial)};f._createClass(B,[{key:"latestPointerType",get:function(){return this._inputManager?.latestPointerType}},{key:"latestPointerLocation",get:function(){return this._inputManager?.latestPointerLocation}},{key:"multiTouchActive",get:function(){return this._inputManager?.multiTouchActive??
!1}},{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return B}(k);p.__decorate([z.property()],k.prototype,"view",void 0);p.__decorate([z.property()],k.prototype,"latestPointerType",null);p.__decorate([z.property()],k.prototype,"latestPointerLocation",null);p.__decorate([z.property()],k.prototype,"multiTouchActive",null);return k=p.__decorate([n.subclass("esri.views.2d.input.MapViewInputManager")],k)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(f,p,k,l){k=function(u){function r(z,w){var m=u.call(this,!0)||this;m._view=z;m.registerIncoming("double-click",w,t=>m._handleDoubleClick(t,w));return m}p._inherits(r,u);r.prototype._handleDoubleClick=function(z,w){l.eventMatchesPointerAction(z.data,"primary")&&(z.stopPropagation(),w?this._view.mapViewNavigation.zoomOut([z.data.x,z.data.y]):this._view.mapViewNavigation.zoomIn([z.data.x,
z.data.y]))};return p._createClass(r)}(k.InputHandler);f.DoubleClickZoom=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/support":function(){define(["exports"],function(f){f.eventMatchesMousePointerAction=function(p,k){if("touch"===p.pointerType)return!1;switch(k){case "primary":return 0===p.button;case "secondary":return 2===p.button;case "tertiary":return 1===p.button}};f.eventMatchesPointerAction=function(p,k){switch(k){case "primary":return"touch"===
p.pointerType||0===p.button;case "secondary":return"touch"!==p.pointerType&&2===p.button;case "tertiary":return"touch"!==p.pointerType&&1===p.button}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(f,p,k,l){k=function(u){function r(z,w,m){var t=u.call(this,!0)||this;t.view=z;t.pointerType=w;t.registerIncoming("double-tap-drag",
m,n=>t._handleDoubleTapDrag(n));return t}p._inherits(r,u);r.prototype._handleDoubleTapDrag=function(z){var {data:w}=z,{pointerType:m}=w;if(m===this.pointerType){z.stopPropagation();var {action:t,delta:n}=w;({view:w}=this);({mapViewNavigation:z}=w);switch(t){case "begin":({scale:w}=w);this._currentScale=this._startScale=w;this._previousDelta=n;z.begin();break;case "update":if(this._previousDelta.y===n.y)break;this._previousDelta=n;w=this._startScale*1.015**n.y;z.setViewpointImmediate(w/this._currentScale);
this._currentScale=w;break;case "end":({constraints:m}=w);const {effectiveLODs:h,snapToZoom:g}=m;g&&h?(w=m.snapScale(this._currentScale),w=(0<n.y?Math.max(w,m.snapToPreviousScale(this._startScale)):Math.min(w,m.snapToNextScale(this._startScale)))/this._currentScale,z.zoom(w)):z.end()}}};return p._createClass(r)}(l.InputHandler);f.DoubleTapDragZoom=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(f,p,k,l,u){l=function(r){function z(m,t,n){var h=r.call(this,!0)||this;h.view=m;h.pointerAction=t;h.registerIncoming("drag",n,g=>h._handleDrag(g));h.registerIncoming("pointer-down",()=>h.stopMomentumNavigation());return h}p._inherits(z,r);var w=z.prototype;w.onInstall=function(m){p._get(p._getPrototypeOf(z.prototype),"onInstall",this).call(this,m);this._dragEventSeparator=new k.DragEventSeparator({start:(t,
n)=>{this.view.mapViewNavigation.pan.begin(this.view,n.data);n.stopPropagation()},update:(t,n)=>{this.view.mapViewNavigation.pan.update(this.view,n.data);n.stopPropagation()},end:(t,n)=>{this.view.mapViewNavigation.pan.end(this.view,n.data);n.stopPropagation()},condition:(t,n)=>1===t&&u.eventMatchesPointerAction(n.data,this.pointerAction)})};w._handleDrag=function(m){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(m)};
w.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return p._createClass(z)}(l.InputHandler);f.DragPan=l;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/DragEventSeparator":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(f,p){let k=function(){function l(r){this._callbacks=r;this._currentCount=0;this._callbacks.condition||(this._callbacks.condition=()=>!0)}var u=l.prototype;u.handle=function(r){const z=
r.data,w=z.pointers.size;switch(z.action){case "start":this._currentCount=w;this._emitStart(r);break;case "added":this._emitEnd(this._previousEvent);this._currentCount=w;this._emitStart(r);break;case "update":this._emitUpdate(r);break;case "removed":this._startEvent&&this._emitEnd(this._previousEvent);this._currentCount=w;this._emitStart(r);break;case "end":this._emitEnd(r),this._currentCount=0}this._previousEvent=r};u._emitStart=function(r){this._startEvent=r;this._callbacks.condition?.(this._currentCount,
r)&&this._callbacks.start(this._currentCount,r,this._startEvent)};u._emitUpdate=function(r){this._callbacks.condition?.(this._currentCount,r)&&this._callbacks.update(this._currentCount,r,this._startEvent)};u._emitEnd=function(r){this._callbacks.condition?.(this._currentCount,r)&&this._callbacks.end(this._currentCount,r,this._startEvent);this._startEvent=null};return p._createClass(l)}();f.DragEventSeparator=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(f,p,k,l,u){l=function(r){function z(w,m,t){var n=r.call(this,!0)||this;n._view=w;n.pointerAction=m;const h=n._view.mapViewNavigation;n._dragEventSeparator=new k.DragEventSeparator({start:(g,e)=>{h.rotate.begin(n._view,e.data);e.stopPropagation()},update:(g,e)=>{h.rotate.update(n._view,e.data);e.stopPropagation()},end:(g,e)=>{h.rotate.end();e.stopPropagation()},
condition:(g,e)=>1===g&&u.eventMatchesPointerAction(e.data,n.pointerAction)});n.registerIncoming("drag",t,g=>n._dragEventSeparator.handle(g));return n}p._inherits(z,r);return p._createClass(z)}(l.InputHandler);f.DragRotate=l;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(f,p,k,l,u,r,z,w){z=function(m){function t(h){var g=m.call(this,!0)||this;g._view=h;g._frameTask=null;g._watchHandles=new k;g._currentDevice=null;g._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};g._handle=g.registerIncoming("gamepad",e=>g._handleGamePadEvent(e));g._handle.pause();return g}p._inherits(t,m);var n=t.prototype;n.onInstall=function(h){p._get(p._getPrototypeOf(t.prototype),"onInstall",this).call(this,h);this._watchHandles.add([l.watch(()=>this._view.navigation.gamepad?.enabled,
g=>{g?(this._handle.resume(),this._frameTask||(this._frameTask=u.addFrameTask({update:e=>this._frameUpdate(e.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},l.initial)])};n.onUninstall=function(){this._watchHandles.removeAll();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);p._get(p._getPrototypeOf(t.prototype),"onUninstall",this).call(this)};n._handleGamePadEvent=function(h){const g=this._view.navigation.gamepad.device;g&&h.data.device!==
g||this._currentDevice&&this._currentDevice!==h.data.device||("end"===h.data.action?(this._currentDevice=null,w.resetTransformation(this._transformation)):(this._currentDevice=h.data.device,w.extractTransformation(h.data,this._view.navigation.gamepad,this._transformation)))};n._frameUpdate=function(h){const g=this._transformation;if(!w.isZeroTransformation(g)){var e=this._view.viewpoint.clone(),b=.7*this._view.navigation.gamepad.velocityFactor*h;r.translateBy(e,e,[g.translation[0]*b,-g.translation[1]*
b]);b=this._view.size;r.scaleAndRotateBy(e,e,1+6E-4*g.translation[2]*h,this._view.constraints.rotationEnabled?.06*-g.heading*h:0,[b[0]/2,b[1]],b);h=this._view.constraints.constrain(e,this._view.viewpoint);this._view.viewpoint=h}};return p._createClass(t)}(z.InputHandler);f.GamepadNavigation=z;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(f,p){function k(l){let u=l*l;0>l&&(u*=
-1);return u}f.extractTransformation=function(l,u,r){const z=l.state;l=l.device;u="forward-down"===u.tiltDirection?1:-1;"standard"===l.deviceType?(r.translation[0]=k(z.axes[0]),r.translation[1]=k(z.axes[1]),r.translation[2]=k(z.buttons[7])-k(z.buttons[6]),r.heading=k(z.axes[2]),r.tilt=k(z.axes[3])):"spacemouse"===l.deviceType&&(r.translation[0]=1.2*k(z.axes[0]),r.translation[1]=1.2*k(z.axes[1]),r.translation[2]=2*-k(z.axes[2]),r.heading=1.2*k(z.axes[5]),r.tilt=1.2*k(z.axes[3]));r.tilt*=u;p.scale(r.translation,
r.translation,1);return r};f.extractTransformationKeyboard=function(l,u){u.translation[0]=l[1]-l[0];u.translation[1]=l[3]-l[2];u.translation[2]=l[4]-l[5];u.heading=l[7]-l[6];u.tilt=l[8]-l[9];u.zoom=l[10]-l[11];return u};f.isZeroTransformation=function(l){return 0===l.translation[0]&&0===l.translation[1]&&0===l.translation[2]&&0===l.heading&&0===l.tilt&&0===l.zoom};f.resetTransformation=function(l){l.translation[0]=0;l.translation[1]=0;l.translation[2]=0;l.heading=0;l.tilt=0;return l};Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(f,p,k){k=function(l){function u(z,w,m){var t=l.call(this,!0)||this;t.view=z;t.keys=w;t._pressed=!1;t._keyMap={[w.left]:"left",[w.right]:"right",[w.up]:"up",[w.down]:"down"};t.registerIncoming("key-down",m,n=>t._handleKeyDown(n));t.registerIncoming("key-up",m,n=>t._handleKeyUp(n));t.registerIncoming("blur",
m,()=>t._handleBlur());return t}p._inherits(u,l);var r=u.prototype;r._handleKeyDown=function(z){z.data.repeat||this._handleKey(z,!0)};r._handleKeyUp=function(z){this._handleKey(z,!1)};r._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};r._handleKey=function(z,w){const m=this._keyMap[z.data.key];if(this._pressed=null!=m){if(w)switch(this.view.mapViewNavigation.begin(),m){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();z.stopPropagation()}};return p._createClass(u)}(k.InputHandler);f.KeyPan=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(f,p,k){k=function(l){function u(z,
w,m){var t=l.call(this,!0)||this;t.view=z;t.keys=w;t._pressed=!1;t._keyToDirection={[w.clockwiseOption1]:"clockwise",[w.clockwiseOption2]:"clockwise",[w.counterClockwiseOption1]:"counterClockwise",[w.counterClockwiseOption2]:"counterClockwise",[w.resetOption1]:"reset",[w.resetOption2]:"reset"};t.registerIncoming("key-down",m,n=>t._handleKeyDown(n));t.registerIncoming("key-up",m,n=>t._handleKeyUp(n));t.registerIncoming("blur",m,()=>t._handleBlur());return t}p._inherits(u,l);var r=u.prototype;r._handleKeyDown=
function(z){z.data.repeat||this._handleKey(z,!0)};r._handleKeyUp=function(z){this._handleKey(z,!1)};r._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};r._handleKey=function(z,w){var m=z.modifiers;if(!(0<m.size&&!m.has("Shift")||!this.view.constraints.rotationEnabled)&&(m=this._keyToDirection[z.data.key],this._pressed=null!=m)){if(w)switch(this.view.mapViewNavigation.begin(),m){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;
case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();z.stopPropagation()}};return p._createClass(u)}(k.InputHandler);f.KeyRotate=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],
function(f,p,k,l){var u;(function(r){r[r.IN=0]="IN";r[r.OUT=1]="OUT"})(u||(u={}));k=function(r){function z(m,t,n){var h=r.call(this,!0)||this;h.view=m;h.keys=t;h._keysToZoomAction={};h.registerIncoming("key-down",n,g=>h._handleKeyDown(g));t.zoomIn.forEach(g=>h._keysToZoomAction[g]=u.IN);t.zoomOut.forEach(g=>h._keysToZoomAction[g]=u.OUT);return h}p._inherits(z,r);var w=z.prototype;w._handleKeyDown=function(m){this._handleKey(m)};w._handleKey=function(m){var t=m.modifiers;if(!(0<t.size)||t.has("Shift"))if({key:t}=
m.data,t in this._keysToZoomAction){t=this._keysToZoomAction[t];var {mapViewNavigation:n}=this.view,h=null;switch(t){case u.IN:h=n.zoomIn();break;case u.OUT:h=n.zoomOut();break;default:return}n.begin();h.then(()=>n.end());m.stopPropagation()}};return p._createClass(z)}(l.InputHandler);f.KeyZoom=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],
function(f,p,k){k=function(l){function u(r,z){var w=l.call(this,!0)||this;w._view=r;w._canZoom=!0;w.registerIncoming("mouse-wheel",z,m=>w._handleMouseWheel(m));return w}p._inherits(u,l);u.prototype._handleMouseWheel=function(r){if(this._view.navigation.mouseWheelZoomEnabled&&(r.preventDefault(),r.stopPropagation(),this._canZoom)){var z=this._view.mapViewNavigation,{x:w,y:m,deltaY:t}=r.data;if(r=z.zoom(1/.6**(1/60*t),[w,m]))this._canZoom=!1,r.catch(()=>{}).then(()=>{this._canZoom=!0;z.end()})}};return p._createClass(u)}(k.InputHandler);
f.MouseWheelZoom=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler"],function(f,p,k,l){l=function(u){function r(w){var m=u.call(this,!0)||this;m.view=w;m.registerIncoming("drag",n=>m._handleDrag(n));m.registerIncoming("pointer-down",()=>m._stopMomentumNavigation());const t=m.view.mapViewNavigation;m._dragEventSeparator=
new k.DragEventSeparator({start:(n,h)=>{t.pinch.begin(m.view,h.data);h.stopPropagation()},update:(n,h)=>{t.pinch.update(m.view,h.data);h.stopPropagation()},end:(n,h)=>{t.pinch.end(m.view);h.stopPropagation()},condition:n=>2<=n});return m}p._inherits(r,u);var z=r.prototype;z._handleDrag=function(w){this._dragEventSeparator.handle(w)};z._stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return p._createClass(r)}(l.InputHandler);f.PinchRotateAndZoom=l;Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),function(f,p,k,l,u,r,z){const w=k("edge"),m=k("chrome"),t=k("ff"),n=k("safari");k=function(){function g(b,a){this._input=a;this._active={};this._callback=()=>{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=
!1;this._element=b;b.getAttribute("tabindex")||b.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();
this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new r.GamepadSource(b,this._input);this._gamepadSource.onEvent=d=>this._callback("gamepad",d)}var e=g.prototype;e.destroy=function(){this._callback=()=>{};this.activeEvents=null;this._activePointerCaptures.forEach(b=>{this._releasePointerCaptureSafe(b)});this._gamepadSource=l.destroyMaybe(this._gamepadSource);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",
this._preventAltKeyDefault)};e.setPointerCapture=function(b,a){a?this._setPointerCatpureSafe(b.pointerId):(this._releasePointerCaptureSafe(b.pointerId),this._activePointerCaptures.delete(b.pointerId))};e._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};e._updateTouchEventHandling=
function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};e._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};e._setPointerCatpureSafe=function(b){try{this._element.setPointerCapture(b),
this._activePointerCaptures.add(b)}catch{}};e._releasePointerCaptureSafe=function(b){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(b)||this._element.releasePointerCapture(b)}catch(a){}};e._updateNormalizedPointerLikeEvent=function(b,a){b=z.createScreenPointFromNativeEvent(this._element,b);g.test.disableSubpixelCoordinates&&(b.x=Math.round(b.x),b.y=Math.round(b.y));a.x=b.x;a.y=b.y;return a};e._handleKey=function(b,a){const d=u.eventKey(a);d&&"key-up"===b&&this._keyDownState.delete(d);
a={native:a,key:d,repeat:!!d&&this._keyDownState.has(d)};d&&"key-down"===b&&this._keyDownState.add(a.key);this._callback(b,a)};e._handlePointer=function(b,a){a=this._updateNormalizedPointerLikeEvent(a,{native:a,x:0,y:0,pointerType:a.pointerType,button:a.button,buttons:a.buttons,eventId:this._eventId++});this._callback(b,a)};e._handlePointerPreventDefault=function(b,a){const d=this._updateNormalizedPointerLikeEvent(a,{native:a,x:0,y:0,pointerType:a.pointerType,button:a.button,buttons:a.buttons,eventId:this._eventId++});
a.preventDefault();this._callback(b,d)};e._handleMouseWheel=function(b,a){let d=a.deltaY;switch(a.deltaMode){case 0:w&&(d=d/document.documentElement.clientHeight*600);break;case 1:d*=30;break;case 2:d*=900}w?d*=.7:m||n?d*=.6:t&&(d*=1.375);const v=Math.abs(d);100<v&&(d=d/v*200/(1+Math.exp(-.02*(v-100))));a=this._updateNormalizedPointerLikeEvent(a,{native:a,x:0,y:0,deltaY:d});this._callback(b,a)};e._handlePointerCaptureLost=function(b,a){this._activePointerCaptures.delete(a.pointerId);this._handleDefault(b,
a)};e._handleDefault=function(b,a){const d={native:a};a.preventDefault();this._callback(b,d)};e._preventAltKeyDefault=function(b){"Alt"===b.key&&b.preventDefault()};e._preventMultiTouchPanning=function(b){1<b.touches.length&&b.preventDefault()};p._createClass(g,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(b){this._browserTouchPanningEnabled=b;this._updateTouchAction();this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(b){this._callback=
b}},{key:"activeEvents",set:function(b){for(const a in this._active)b&&b.has(a)||(this._element.removeEventListener(h[a],this._active[a]),delete this._active[a]);b&&b.forEach(a=>{if(!this._active[a]&&h[a]){const d=(this._eventHandlers[a]||this._handleDefault).bind(this,a);this._element.addEventListener(h[a],d);this._active[a]=d}});this._gamepadSource.hasEventListeners=b?.has("gamepad")??!1}}]);return g}();k.test={disableSubpixelCoordinates:!1};const h={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown",
"pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};f.BrowserEventSource=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(f,p,k,l,u){let r=function(){function z(m,t){this._element=m;this._input=t;this._hasEventListeners=!1;this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)};this._onDisconnectGamepad=n=>{n=n.gamepad;const h=n.index,g=this._inputDevices[h];g&&(this._emitGamepadEvent(n,u.extractState(g),!1),this._inputDevices.splice(h,1),this._latestUpdate.splice(h,1),this._input.gamepad.devices.remove(g),this.ensurePollingState())};this._frameTask=
null;this._latestUpdate=[];this._inputDevices=[];this._callback=null;m=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&m)this._forEachGamepad(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}var w=z.prototype;w.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),
window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))};w._connectGamepad=function(m){const t=new l(m);"unknown"!==t.deviceType&&(this._inputDevices[m.index]=t,this._input.gamepad.devices.add(t));this.ensurePollingState()};w.ensurePollingState=function(){this._eventsEnabled?this._startPolling():this._stopPolling()};w._startPolling=function(){null==this._frameTask&&(this._frameTask=k.addFrameTask({update:()=>this._readGamepadState()}))};w._stopPolling=function(){null!=this._frameTask&&
(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=[])};w._readGamepadState=function(){const m=document.hasFocus(),t=this._element.contains(document.activeElement),n="document"===this._input.gamepad.enabledFocusMode&&!m||"view"===this._input.gamepad.enabledFocusMode&&!t;this._forEachGamepad(h=>{var g=this._inputDevices[h.index];if(g){var e=this._latestUpdate[h.index];g=u.extractState(g);var b=n||u.stateIdle(g);e&&(e.timestamp===h.timestamp||!e.active&&b||u.stateEqual(e.state,g))||this._emitGamepadEvent(h,
g,!b)}})};w._forEachGamepad=function(m){const t=window.navigator.getGamepads();for(let n=0;n<t.length;n++){const h=t[n];this._validate(h)&&m(h)}};w._emitGamepadEvent=function(m,t,n){var h=this._latestUpdate[m.index];if((h=h&&h.active)||n)this._latestUpdate[m.index]={timestamp:m.timestamp,state:t,active:n},this._callback&&this._callback({device:this._inputDevices[m.index],state:t,action:!h&&n?"start":h&&n?"update":"end"})};w._validate=function(m){if(!m||!m.connected)return!1;for(let t=0;t<m.axes.length;t++)if(isNaN(m.axes[t]))return!1;
return!0};p._createClass(z,[{key:"hasEventListeners",set:function(m){this._hasEventListeners!==m&&(this._hasEventListeners=m,this.ensurePollingState())}},{key:"_eventsEnabled",get:function(){return this.supported&&0<this._inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(m){this._callback=m}}]);return z}();f.GamepadSource=r;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],function(f){f.extractState=
function(p){const k=p.native;return k?{buttons:k.buttons.map(l=>l.pressed?l.value||1:0),axes:k.axes.map(l=>{{var u=p.axisThreshold;const r=Math.abs(l);l=r<u?0:Math.sign(l)*(r-u)/(1-u)}return l})}:{buttons:[],axes:[]}};f.stateEqual=function(p,k){if(p.axes.length!==k.axes.length||p.buttons.length!==k.buttons.length)return!1;for(var l=0;l<p.axes.length;l++)if(p.axes[l]!==k.axes[l])return!1;for(l=0;l<p.buttons.length;l++)if(p.buttons[l]!==k.buttons[l])return!1;return!0};f.stateIdle=function(p){for(var k=
0;k<p.axes.length;k++)if(0!==p.axes[k])return!1;for(k=0;k<p.buttons.length;k++)if(0!==p.buttons[k])return!1;return!0};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(f,p,k){k=function(l){function u(){var r=l.call(this,!0)||this;r.registerIncoming("context-menu",z=>{z.data.native.preventDefault()});return r}p._inherits(u,l);return p._createClass(u)}(k.InputHandler);
f.PreventContextMenu=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(f,p,k,l,u,r,z,w,m,t){w=function(n){function h(e=m.DefaultParameters.maximumDoubleClickDelay,b=m.DefaultParameters.maximumDoubleClickDistance,
a=m.DefaultParameters.maximumDoubleTouchDelay,d=m.DefaultParameters.maximumDoubleTouchDistance,v=k.clock){var A=n.call(this,!1)||this;A._maximumDoubleClickDelay=e;A._maximumDoubleClickDistance=b;A._maximumDoubleTouchDelay=a;A._maximumDoubleTouchDistance=d;A._clock=v;A._doubleTapDragReady=!1;A._doubleTapDragActive=!1;A._dragStartCenter=r.createScreenPoint(0,0);A._pointerState=new Map;A._doubleTapDrag=A.registerOutgoing("double-tap-drag");A._dragEventSeparator=new z.DragEventSeparator({start:(q,y)=>
A._dragStart(q,y),update:(q,y)=>A._dragUpdate(y),end:(q,y)=>A._dragEnd(y)});A.registerIncoming("drag",q=>A._dragEventSeparator.handle(q));A.registerIncoming("pointer-down",q=>A._handlePointerDown(q));A.registerIncoming("pointer-up",()=>A._handlePointerUp());return A}p._inherits(h,n);var g=h.prototype;g.onUninstall=function(){this._pointerState.forEach(e=>{e.doubleTapTimeout=u.removeMaybe(e.doubleTapTimeout)})};g._clearPointerDown=function(e){const b=this._pointerState.get(e);b&&(b.doubleTapTimeout=
u.removeMaybe(b.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())};g._createDoubleTapDragData=function(e,b,a){const {button:d,buttons:v,pointer:A,pointers:q,pointerType:y,timestamp:D}=a;return{action:e,delta:b,button:d,buttons:v,pointer:A,pointers:q,pointerType:y,timestamp:D}};g._dragStart=function(e,b){if(this._doubleTapDragReady&&1===e){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:a,modifiers:d}=b;({center:e}=a);this._dragStartCenter=e;e=this._createDoubleTapDragData("begin",
r.createScreenPoint(0,0),a);this._doubleTapDrag.emit(e,void 0,d);b.stopPropagation()}};g._dragUpdate=function(e){if(this._doubleTapDragActive){var {data:b,modifiers:a}=e,{center:d}=b;d=r.createScreenPoint(d.x-this._dragStartCenter.x,d.y-this._dragStartCenter.y);d=this._createDoubleTapDragData("update",d,b);this._doubleTapDrag.emit(d,void 0,a);e.stopPropagation()}};g._dragEnd=function(e){if(this._doubleTapDragActive){var {data:b,modifiers:a}=e,{center:d}=b;d=r.createScreenPoint(d.x-this._dragStartCenter.x,
d.y-this._dragStartCenter.y);d=this._createDoubleTapDragData("end",d,b);this._doubleTapDrag.emit(d,void 0,a);this._doubleTapDragActive=!1;e.stopPropagation()}};g._handlePointerDown=function(e){const {data:b}=e,a=t.getPointerId(b),d=this._pointerState.get(a);var {pointerType:v}=b.native;d?(v="touch"===v?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance,this._clearPointerDown(a),t.manhattanDistance(d.event.data,b)>v?this._storePointerDown(e):this._doubleTapDragReady=!0):this._storePointerDown(e)};
g._handlePointerUp=function(){this._doubleTapDragReady=!1};g._storePointerDown=function(e){var {data:b}=e;const {pointerType:a}=b.native,d=t.getPointerId(b);b=this._clock.setTimeout(()=>this._clearPointerDown(d),"touch"===a?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(d,{event:e,doubleTapTimeout:b});this.refreshHasPendingInputs()};p._createClass(h,[{key:"hasPendingInputs",get:function(){return l.someMap(this._pointerState,e=>null!=e.doubleTapTimeout)}}]);return h}(w.InputHandler);
f.DoubleTapDrag=w;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),function(f,p,k,l,u,r,z){const w={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};r=function(m){function t(h=w.maximumDoubleClickDelay,
g=w.maximumDoubleClickDistance,e=w.maximumDoubleTouchDelay,b=w.maximumDoubleTouchDistance,a=k.clock){var d=m.call(this,!1)||this;d._maximumDoubleClickDelay=h;d._maximumDoubleClickDistance=g;d._maximumDoubleTouchDelay=e;d._maximumDoubleTouchDistance=b;d._clock=a;d._pointerState=new Map;d._click=d.registerOutgoing("click");d._doubleClick=d.registerOutgoing("double-click");d.registerIncoming("immediate-click",d._handleImmediateClick.bind(p._assertThisInitialized(d)));d.registerIncoming("pointer-down",
d._handlePointerDown.bind(p._assertThisInitialized(d)));return d}p._inherits(t,m);var n=t.prototype;n.onUninstall=function(){this._pointerState.forEach(h=>h.doubleClickTimer=u.removeMaybe(h.doubleClickTimer))};n._clearDoubleClickTimer=function(h,g){const e=this._pointerState.get(h);e&&(e.doubleClickTimer=u.removeMaybe(e.doubleClickTimer),g&&this._click.emit(e.event.data,void 0,e.event.modifiers),this._pointerState.delete(h),this.refreshHasPendingInputs())};n._doubleClickTimeoutExceeded=function(h){const g=
this._pointerState.get(h);1===g.pointerDownCount&&this._click.emit(g.event.data,void 0,g.event.modifiers);g.doubleClickTimer=null;this._pointerState.delete(h);this.refreshHasPendingInputs()};n._getPointerId=function(h){const {pointerId:g,pointerType:e,button:b}=h.native;return"mouse"===e?`${g}:${b}`:`${e}`};n._handleImmediateClick=function(h){const g=h.data;var {pointerType:e}=g.native;const b=this._getPointerId(g);if(this._pointerState.has(b)){var a=this._pointerState.get(b),{data:d,modifiers:v}=
a.event;e="touch"===e?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;z.manhattanDistance(d,g)>e?(this._clearDoubleClickTimer(b,!0),this._startClick(h)):(this._clearDoubleClickTimer(b,!1),2===a.pointerDownCount&&this._doubleClick.emit(d,void 0,v))}else this._startClick(h)};n._handlePointerDown=function(h){h=z.getPointerId(h.data);if(h=this._pointerState.get(h))h.pointerDownCount+=1};n._startClick=function(h){var {data:g}=h;const {native:{pointerType:e}}=g,b=z.getPointerId(g);g=this._clock.setTimeout(()=>
this._doubleClickTimeoutExceeded(b),"touch"===e?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(b,{event:h,doubleClickTimer:g,pointerDownCount:1});this.refreshHasPendingInputs()};p._createClass(t,[{key:"hasPendingInputs",get:function(){return l.someMap(this._pointerState,h=>null!=h.doubleClickTimer)}}]);return t}(r.InputHandler);f.DefaultParameters=w;f.SingleAndDoubleClick=r;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/support":function(){define(["exports",
"../../../core/screenUtils"],function(f,p){f.euclideanDistance=function(k,l){const u=l.x-k.x;k=l.y-k.y;return Math.sqrt(u*u+k*k)};f.fitCircleLSQ=function(k,l){l?(l.radius=0,l.center.x=0,l.center.y=0):l={radius:0,center:p.createScreenPoint()};if(0===k.length)return l;if(1===k.length)return l.center.x=k[0].x,l.center.y=k[0].y,l;if(2===k.length){const [a,d]=k,[v,A]=[d.x-a.x,d.y-a.y];l.radius=Math.sqrt(v*v+A*A)/2;l.center.x=(a.x+d.x)/2;l.center.y=(a.y+d.y)/2;return l}let u=0,r=0;for(l=0;l<k.length;l++)u+=
k[l].x,r+=k[l].y;u/=k.length;r/=k.length;var z=k.map(a=>a.x-u),w=k.map(a=>a.y-r);let m=l=0;var t=0,n=0,h=0,g=0,e=0;for(var b=0;b<z.length;b++){const a=z[b],d=w[b],v=a*a,A=d*d;l+=v;m+=A;t+=a*d;n+=v*a;h+=A*d;g+=a*A;e+=d*v}z=l;w=t;b=m;n=.5*(n+g);h=.5*(h+e);e=z*b-t*w;g=(n*b-h*w)/e;h=(z*h-t*n)/e;e=p.createScreenPoint(g+u,h+r);return{radius:Math.sqrt(g*g+h*h+(l+m)/k.length),center:e}};f.getPointerId=function(k){({native:k}=k);const {pointerId:l,button:u,pointerType:r}=k;return"mouse"===r?`${l}:${u}`:`${r}`};
f.manhattanDistance=function(k,l){return Math.abs(l.x-k.x)+Math.abs(l.y-k.y)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../core/time ../InputHandler ./support".split(" "),function(f,p,k,l,u,r){function z(n){const h=[];n.forEach(g=>{h.push(k.createScreenPoint(g.event.x,g.event.y))});return r.fitCircleLSQ(h)}function w(n){const h=z(n);let g=0;
n.forEach(e=>{var b=t(e,h);for(b-=e.lastAngle;b>Math.PI;)b-=2*Math.PI;for(;b<-Math.PI;)b+=2*Math.PI;b=e.lastAngle+b;e.lastAngle=b;g+=b-e.initialAngle});g/=n.size||1;return{angle:g,radius:h.radius,center:h.center}}function m(n){const h=new Map;n.forEach((g,e)=>h.set(e,g.event));return h}function t(n,h){n=n.event;return Math.atan2(n.y-h.center.y,n.x-h.center.x)}u=function(n){function h(e){var b=n.call(this,!1)||this;b._navigationTouch=e;b._startStateModifiers=new Set;b._activePointerMap=new Map;b._isDragging=
!1;b._isCurrentDragSuppressed=!1;b._drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b._handlePointerDrag.bind(p._assertThisInitialized(b)));b.registerIncoming("pointer-up",b._handlePointerUpAndPointerLost.bind(p._assertThisInitialized(b)));b.registerIncoming("pointer-capture-lost",b._handlePointerUpAndPointerLost.bind(p._assertThisInitialized(b)));b.registerIncoming("pointer-cancel",b._handlePointerUpAndPointerLost.bind(p._assertThisInitialized(b)));return b}p._inherits(h,n);var g=
h.prototype;g._createPayload=function(e,b,a,d){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:b.buttons,timestamp:d,pointers:m(this._activePointerMap),pointer:b,angle:a.angle,radius:a.radius,center:a.center}};g._addPointer=function(e){var b=e.native.pointerId;const a=w(this._activePointerMap).angle;e={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(b,e);b=t(e,z(this._activePointerMap));e.initialAngle=b;e.lastAngle=b;this._updatePointerAngles(a)};g._updatePointer=
function(e){if(!e||null!=e.x||null!=e.y){var b=this._activePointerMap.get(e.native.pointerId);b?b.event=e:this._addPointer(e)}};g._removePointer=function(e){const b=w(this._activePointerMap).angle;this._activePointerMap.delete(e);this._updatePointerAngles(b)};g._updatePointerAngles=function(e){const b=w(this._activePointerMap);this._activePointerMap.forEach(a=>{a.initialAngle=t(a,b)-e;a.lastAngle=t(a,b)-e})};g._emitEvent=function(e,b,a){const d=w(this._activePointerMap);this._drag.emit(this._createPayload(e,
b,d,a),void 0,this._startStateModifiers)};g._handlePointerUpAndPointerLost=function(e){const b=e.data.native.pointerId,a=l.Milliseconds(e.timestamp);this._activePointerMap.get(b)&&(1===this._activePointerMap.size?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,a),this._isCurrentDragSuppressed=this._isDragging=!1,this._removePointer(b)):(this._removePointer(b),this._emitEvent("removed",e.data,l.Milliseconds(e.timestamp))))};g._handlePointerDrag=function(e){const b=
e.data,a=b.currentEvent,d=l.Milliseconds(e.timestamp);switch(b.action){case "start":case "update":this._isDragging?this._activePointerMap.has(a.native.pointerId)?(this._updatePointer(a),!this._isCurrentDragSuppressed&&this._emitEvent("update",a,d)):(this._addPointer(a),this._emitEvent("added",a,d),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(a),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,
this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",a,d))}};p._createClass(h,[{key:"_isSuppressed",get:function(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}]);return h}(u.InputHandler);f.Button=void 0;(function(n){n[n.Left=0]="Left";n[n.Middle=1]="Middle";n[n.Right=2]="Right";n[n.Back=3]="Back";n[n.Forward=4]="Forward";n[n.Undefined=
-1]="Undefined"})(f.Button||(f.Button={}));f.Drag=u;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(f,p,k,l,u,r){l=function(z){function w(t=u.DefaultParameters.maximumDoubleClickDelay,n=u.DefaultParameters.maximumDoubleClickDistance,h=u.DefaultParameters.maximumDoubleTouchDelay,
g=u.DefaultParameters.maximumDoubleTouchDistance,e=k.clock){var b=z.call(this,!1)||this;b._maximumDoubleClickDelay=t;b._maximumDoubleClickDistance=n;b._maximumDoubleTouchDelay=h;b._maximumDoubleTouchDistance=g;b._clock=e;b._pointerState=new Map;b._immediateDoubleClick=b.registerOutgoing("immediate-double-click");b.registerIncoming("pointer-down",b._handlePointerDown.bind(p._assertThisInitialized(b)));b.registerIncoming("pointer-up",b._handlePointerUp.bind(p._assertThisInitialized(b)));return b}p._inherits(w,
z);var m=w.prototype;m.onUninstall=function(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()});p._get(p._getPrototypeOf(w.prototype),"onUninstall",this).call(this)};m._handlePointerDown=function(t){t=t.data;const n=r.getPointerId(t);this._pointerState.has(n)||(this._pointerState.set(n,{downButton:t.native.button,immediateDoubleClick:null}),this.startCapturingPointer(t.native))};m._handlePointerUp=function(t){const n=t.data;var h=r.getPointerId(n);
if((h=this._pointerState.get(h))&&h.downButton===n.native.button){const g=h.immediateDoubleClick;if(g){g.timeoutHandle.remove();const e="touch"===t.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;r.manhattanDistance(g,t.data)>e?this._startImmediateDoubleClick(t,h):(this._immediateDoubleClick.emit(t.data,void 0,g.modifiers),this._removeState(n))}else this._startImmediateDoubleClick(t,h)}};m._startImmediateDoubleClick=function(t,n){n.immediateDoubleClick={x:t.data.x,
y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),"touch"===t.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}};m._removeState=function(t){const n=r.getPointerId(t);this._pointerState.delete(n);this.stopCapturingPointer(t.native);this.refreshHasPendingInputs()};return p._createClass(w)}(l.InputHandler);f.ImmediateDoubleClick=l;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/maybe ../InputHandler ./support".split(" "),
function(f,p,k,l,u,r){const z={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};u=function(w){function m(n=z.maximumClickDelay,h=z.movementUntilMouseDrag,g=z.movementUntilPenDrag,e=z.movementUntilTouchDrag,b=z.holdDelay,a=k.clock){var d=w.call(this,!1)||this;d._maximumClickDelay=n;d._movementUntilMouseDrag=h;d._movementUntilPenDrag=g;d._movementUntilTouchDrag=e;d._holdDelay=b;d._clock=a;d._pointerState=new Map;d._pointerDrag=d.registerOutgoing("pointer-drag");
d._immediateClick=d.registerOutgoing("immediate-click");d._pointerHold=d.registerOutgoing("hold");d.registerIncoming("pointer-down",d._handlePointerDown.bind(p._assertThisInitialized(d)));d.registerIncoming("pointer-up",v=>{d._handlePointerLoss(v,"pointer-up")});d.registerIncoming("pointer-capture-lost",v=>{d._handlePointerLoss(v,"pointer-capture-lost")});d.registerIncoming("pointer-cancel",v=>{d._handlePointerLoss(v,"pointer-cancel")});d._moveHandle=d.registerIncoming("pointer-move",d._handlePointerMove.bind(p._assertThisInitialized(d)));
d._moveHandle.pause();return d}p._inherits(m,w);var t=m.prototype;t.onUninstall=function(){this._pointerState.forEach(n=>{n.holdTimeout=l.removeMaybe(n.holdTimeout)});p._get(p._getPrototypeOf(m.prototype),"onUninstall",this).call(this)};t._handlePointerDown=function(n){const h=n.data,g=h.native.pointerId;var e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(()=>{const b=this._pointerState.get(g);b&&(b.isDragging||(this._pointerHold.emit(b.previousEvent,void 0,n.modifiers),b.holdEmitted=
!0),b.holdTimeout=null)},this._holdDelay));e={startEvent:h,previousEvent:h,startTimestamp:n.timestamp,isDragging:!1,downButton:h.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(g,e);this.startCapturingPointer(h.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(n)};t._createPointerDragData=function(n,h,g){return{action:n,startEvent:h.startEvent,previousEvent:h.previousEvent,currentEvent:g}};t._handlePointerMove=function(n){const h=n.data,g=this._pointerState.get(h.native.pointerId);
if(g){if(g.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",g,h),void 0,g.modifiers);else{const e=r.euclideanDistance(h,g.startEvent),b=this._getDragThreshold(h.native.pointerType);e>b&&this._startDragging(n)}g.previousEvent=h}};t._getDragThreshold=function(n){switch(n){case "touch":return this._movementUntilTouchDrag;case "pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}};t._startDragging=function(n){const h=n.data,g=h.native.pointerId;this._pointerState.forEach(e=>
{null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null);e.isDragging||(e.modifiers=n.modifiers,e.isDragging=!0,g===e.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",e,h)):this._pointerDrag.emit(this._createPointerDragData("start",e,e.previousEvent),n.timestamp))})};t._handlePointerLoss=function(n,h){const g=n.data,e=g.native.pointerId,b=this._pointerState.get(e);b&&(null!=b.holdTimeout&&(b.holdTimeout.remove(),b.holdTimeout=null),b.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",
b,"pointer-up"===h?g:b.previousEvent),void 0,b.modifiers):"pointer-up"===h&&b.downButton===g.native.button&&n.timestamp-b.startTimestamp<=this._maximumClickDelay&&!b.holdEmitted&&this._immediateClick.emit(g),this._pointerState.delete(e),this.stopCapturingPointer(g.native),0===this._pointerState.size&&this._moveHandle.pause())};return p._createClass(m)}(u.InputHandler);f.DefaultParameters=z;f.PointerClickHoldAndDrag=u;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(f,p,k,l,u,r,z){const w={added:[],removed:[]},m=new Set,t=new z(0,0,0,0);return function(n){function h(e){var b=n.call(this)||this;b._tiles=new Map;b._index=l.rbush(9,k("esri-csp-restrictions")?a=>({minX:a.bounds[0],minY:a.bounds[1],maxX:a.bounds[2],maxY:a.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);b.tiles=[];b.tileScheme=e;return b}f._inherits(h,n);var g=h.prototype;g.destroy=function(){this.clear()};g.clear=function(){this.tiles.length=0;this._tiles.clear();this._index.clear()};
g.has=function(e){return this._tiles.has(e)};g.get=function(e){return this._tiles.get(e)};g.boundsIntersections=function(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})};g.updateTiles=function(e){const b={added:[],removed:[]};for(const a of e.added)if(!this.has(a)){const d=new u.Tile(this.tileScheme,a);this._tiles.set(a,d);this._index.insert(d);b.added.push(d)}for(const a of e.removed)this.has(a)&&(e=this.get(a),this._tiles.delete(a),this._index.remove(e),b.removed.push(e));
this.tiles.length=0;this._tiles.forEach(a=>this.tiles.push(a));(b.added.length||b.removed.length)&&this.emit("update",b)};g.setViewState=function(e){if(e=this.tileScheme.getTileCoverage(e,0)){var {spans:b,lodInfo:a}=e,{level:d}=a;if(0<b.length)for(const {row:A,colFrom:q,colTo:y}of b)for(var v=q;v<=y;v++){const D=t.set(d,A,a.normalizeCol(v),a.getWorldForColumn(v)).id;m.add(D);if(!this.has(D)){const C=new u.Tile(this.tileScheme,D);this._tiles.set(D,C);this._index.insert(C);this.tiles.push(C);w.added.push(C)}}for(d=
this.tiles.length-1;0<=d;d--)v=this.tiles[d],m.has(v.id)||(this._tiles.delete(v.id),this.tiles.splice(d,1),this._index.remove(v),w.removed.push(v));(w.added.length||w.removed.length)&&this.emit("update",w);r.pool.release(e);m.clear();w.added.length=0;w.removed.length=0}};return f._createClass(h)}(p)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(f,p){function k(b,a){if(!(this instanceof k))return new k(b,a);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,
Math.ceil(.4*this._maxEntries));a&&("function"===typeof a?this.toBBox=a:this._initFormat(a));this.clear()}function l(b,a){u(b,0,b.children.length,a,b)}function u(b,a,d,v,A){A||(A=g(null));A.minX=Infinity;A.minY=Infinity;A.maxX=-Infinity;A.maxY=-Infinity;for(var q;a<d;a++)q=b.children[a],r(A,b.leaf?v(q):q);return A}function r(b,a){b.minX=Math.min(b.minX,a.minX);b.minY=Math.min(b.minY,a.minY);b.maxX=Math.max(b.maxX,a.maxX);b.maxY=Math.max(b.maxY,a.maxY);return b}function z(b,a){return b.minX-a.minX}
function w(b,a){return b.minY-a.minY}function m(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function t(b){return b.maxX-b.minX+(b.maxY-b.minY)}function n(b,a){return b.minX<=a.minX&&b.minY<=a.minY&&a.maxX<=b.maxX&&a.maxY<=b.maxY}function h(b,a){return a.minX<=b.maxX&&a.minY<=b.maxY&&a.maxX>=b.minX&&a.maxY>=b.minY}function g(b){return{children:b,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function e(b,a,d,v,A){for(var q=[a,d],y;q.length;)d=q.pop(),a=q.pop(),d-a<=v||(y=
a+Math.ceil((d-a)/v/2)*v,p.quickselect(b,y,a,d,A),q.push(a,y,y,d))}k.prototype={all:function(){return this._all(this.data,[])},search:function(b){var a=this.data,d=[],v=this.toBBox;if(!h(b,a))return d;for(var A=[],q,y,D,C;a;){q=0;for(y=a.children.length;q<y;q++)D=a.children[q],C=a.leaf?v(D):D,h(b,C)&&(a.leaf?d.push(D):n(b,C)?this._all(D,d):A.push(D));a=A.pop()}return d},collides:function(b){var a=this.data,d=this.toBBox;if(!h(b,a))return!1;for(var v=[],A,q,y,D;a;){A=0;for(q=a.children.length;A<q;A++)if(y=
a.children[A],D=a.leaf?d(y):y,h(b,D)){if(a.leaf||n(b,D))return!0;v.push(y)}a=v.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var a=0,d=b.length;a<d;a++)this.insert(b[a]);return this}b=this._build(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this._splitRoot(this.data,b):(this.data.height<b.height&&(a=this.data,this.data=b,b=a),this._insert(b,this.data.height-b.height-1,!0)):this.data=b;return this},insert:function(b){b&&
this._insert(b,this.data.height-1);return this},clear:function(){this.data=g([]);return this},remove:function(b,a){if(!b)return this;for(var d=this.data,v=this.toBBox(b),A=[],q=[],y,D,C,c;d||A.length;){d||(d=A.pop(),D=A[A.length-1],y=q.pop(),c=!0);if(d.leaf){a:{C=b;var x=d.children,G=a;if(G){for(var E=0;E<x.length;E++)if(G(C,x[E])){C=E;break a}C=-1}else C=x.indexOf(C)}if(-1!==C){d.children.splice(C,1);A.push(d);this._condense(A);break}}c||d.leaf||!n(d,v)?D?(y++,d=D.children[y],c=!1):d=null:(A.push(d),
q.push(y),y=0,D=d,d=d.children[0])}return this},toBBox:function(b){return b},compareMinX:z,compareMinY:w,toJSON:function(){return this.data},fromJSON:function(b){this.data=b;return this},_all:function(b,a){for(var d=[];b;)b.leaf?a.push.apply(a,b.children):d.push.apply(d,b.children),b=d.pop();return a},_build:function(b,a,d,v){var A=d-a+1,q=this._maxEntries;if(A<=q){var y=g(b.slice(a,d+1));l(y,this.toBBox);return y}v||(v=Math.ceil(Math.log(A)/Math.log(q)),q=Math.ceil(A/Math.pow(q,v-1)));y=g([]);y.leaf=
!1;y.height=v;A=Math.ceil(A/q);q=A*Math.ceil(Math.sqrt(q));var D;for(e(b,a,d,q,this.compareMinX);a<=d;a+=q){var C=Math.min(a+q-1,d);e(b,a,C,A,this.compareMinY);for(D=a;D<=C;D+=A){var c=Math.min(D+A-1,C);y.children.push(this._build(b,D,c,v-1))}}l(y,this.toBBox);return y},_chooseSubtree:function(b,a,d,v){for(var A,q,y,D,C,c,x,G;;){v.push(a);if(a.leaf||v.length-1===d)break;x=G=Infinity;A=0;for(q=a.children.length;A<q;A++)y=a.children[A],C=m(y),c=(Math.max(y.maxX,b.maxX)-Math.min(y.minX,b.minX))*(Math.max(y.maxY,
b.maxY)-Math.min(y.minY,b.minY))-C,c<G?(G=c,x=C<x?C:x,D=y):c===G&&C<x&&(x=C,D=y);a=D||a.children[0]}return a},_insert:function(b,a,d){var v=this.toBBox;d=d?b:v(b);v=[];var A=this._chooseSubtree(d,this.data,a,v);A.children.push(b);for(r(A,d);0<=a;)if(v[a].children.length>this._maxEntries)this._split(v,a),a--;else break;this._adjustParentBBoxes(d,v,a)},_split:function(b,a){var d=b[a],v=d.children.length,A=this._minEntries;this._chooseSplitAxis(d,A,v);v=this._chooseSplitIndex(d,A,v);v=g(d.children.splice(v,
d.children.length-v));v.height=d.height;v.leaf=d.leaf;l(d,this.toBBox);l(v,this.toBBox);a?b[a-1].children.push(v):this._splitRoot(d,v)},_splitRoot:function(b,a){this.data=g([b,a]);this.data.height=b.height+1;this.data.leaf=!1;l(this.data,this.toBBox)},_chooseSplitIndex:function(b,a,d){var v,A;var q=A=Infinity;for(v=a;v<=d-a;v++){var y=u(b,0,v,this.toBBox);var D=u(b,v,d,this.toBBox);var C=Math.max(0,Math.min(y.maxX,D.maxX)-Math.max(y.minX,D.minX))*Math.max(0,Math.min(y.maxY,D.maxY)-Math.max(y.minY,
D.minY));y=m(y)+m(D);if(C<q){q=C;var c=v;A=y<A?y:A}else C===q&&y<A&&(A=y,c=v)}return c},_chooseSplitAxis:function(b,a,d){var v=b.leaf?this.compareMinX:z,A=b.leaf?this.compareMinY:w,q=this._allDistMargin(b,a,d,v);a=this._allDistMargin(b,a,d,A);q<a&&b.children.sort(v)},_allDistMargin:function(b,a,d,v){b.children.sort(v);v=this.toBBox;var A=u(b,0,a,v),q=u(b,d-a,d,v),y=t(A)+t(q),D;for(D=a;D<d-a;D++){var C=b.children[D];r(A,b.leaf?v(C):C);y+=t(A)}for(D=d-a-1;D>=a;D--)C=b.children[D],r(q,b.leaf?v(C):C),
y+=t(q);return y},_adjustParentBBoxes:function(b,a,d){for(;0<=d;d--)r(a[d],b)},_condense:function(b){for(var a=b.length-1,d;0<=a;a--)0===b[a].children.length?0<a?(d=b[a-1].children,d.splice(d.indexOf(b[a]),1)):this.clear():l(b[a],this.toBBox)},_initFormat:function(b){var a=["return a"," - b",";"];this.compareMinX=new Function("a","b",a.join(b[0]));this.compareMinY=new Function("a","b",a.join(b[1]));this.toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+
"};")}};f.rbush=k})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(f,p){var k={exports:{}};k.exports;(function(l){(function(u){u=u();void 0!==u&&(l.exports=u)})(function(){function u(w,m,t,n,h){for(;n>t;){if(600<n-t){var g=n-t+1,e=m-t+1,b=Math.log(g),a=.5*Math.exp(2*b/3);b=.5*Math.sqrt(b*a*(g-a)/g)*(0>e-g/2?-1:1);u(w,m,Math.max(t,Math.floor(m-e*a/g+b)),Math.min(n,Math.floor(m+(g-e)*a/g+b)),h)}g=w[m];e=t;a=n;r(w,t,m);for(0<h(w[n],g)&&r(w,t,n);e<a;){r(w,e,a);
e++;for(a--;0>h(w[e],g);)e++;for(;0<h(w[a],g);)a--}0===h(w[t],g)?r(w,t,a):(a++,r(w,a,n));a<=m&&(t=a+1);m<=a&&(n=a-1)}}function r(w,m,t){var n=w[m];w[m]=w[t];w[t]=n}function z(w,m){return w<m?-1:w>m?1:0}return function(w,m,t,n,h){u(w,m,t||0,n||w.length-1,h||z)}})})(k);p=p.getDefaultExportFromCjs(k.exports);f.quickselect=p})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(f,p,k,l,u,r,z){let w=function(){function m(n,h){this.key=new z(0,0,0,0);this.bounds=u.create();this.objectIds=new Set;this.key.set(h);h=n.getLODInfoAt(this.key);this.tileInfoView=n;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=h.resolution;this.scale=h.scale;this.level=h.level}var t=m.prototype;t.createChildTiles=function(){const n=this.key.getChildKeys(),h=k.acquire();for(let g=0;g<n.length;g++)h[g]=new m(this.tileInfoView,n[g]);return h};t.getQuantizationParameters=
function(){return r.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};p._createClass(m,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return l.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return m}();f.Tile=w;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,p,k,l,u,r,z,w,m){l=function(t){function n(){var h=t.apply(this,arguments)||this;h.color=new k([0,255,255]);h.haloOpacity=1;h.fillOpacity=.25;return h}f._inherits(n,t);n.prototype.equals=function(h){return this.color.equals(h.color)&&(this.haloColor||this.color).equals(h.haloColor||h.color)&&this.haloOpacity===h.haloOpacity&&this.fillOpacity===h.fillOpacity};return f._createClass(n)}(l);p.__decorate([u.property({type:k})],l.prototype,"color",void 0);p.__decorate([u.property({type:k})],l.prototype,
"haloColor",void 0);p.__decorate([u.property()],l.prototype,"haloOpacity",void 0);p.__decorate([u.property()],l.prototype,"fillOpacity",void 0);return l=p.__decorate([m.subclass("esri.views.2d.support.HighlightOptions")],l)})},"esri/views/2d/support/Timeline":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(f,p){let k=function(){function l(){this._names=new Map}var u=l.prototype;u.begin=function(r){this._names.has(r)||(this._names.set(r,!1),r.includes("Brush")&&this.record("Esri.FirstDraw"),
performance.mark(`Esri.${r}.Start`))};u.end=function(r){this._names.has(r)&&!this._names.get(r)&&(this._names.set(r,!0),performance.mark(`Esri.${r}.End`))};u.record=function(r){this._names.has(r)||(this._names.set(r,!0),performance.mark(`Esri.${r}`))};return p._createClass(l)}();f.Timeline=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/createScreenshotPlan":function(){define(function(){return function(f,p,k,l,u,r,z,w){f.ignorePadding&&(l={left:0,right:0,top:0,
bottom:0});var m=null;null!=f.width&&null!=f.height?m=[f.width,f.height]:null==f.width&&null!=f.height?m=[f.height,f.height]:null!=f.width&&null==f.height?m=[f.width,f.width]:null==f.width&&null==f.height&&(m=null);var t=k[0]-(l.left+l.right);k=k[1]-(l.top+l.bottom);f=f.area||{x:0,y:0,width:t,height:k};if(m){const n=m[0]/m[1];n>t/k?(t=f.width/n,f={x:f.x,y:Math.round(f.y+(f.height-t)/2),width:f.width,height:Math.round(t)}):(t=f.height*n,f={x:Math.round(f.x+(f.width-t)/2),y:f.y,width:Math.round(t),
height:f.height})}else m=[f.width,f.height];m[0]>f.width?(p=Math.min(m[0]/f.width,p),m=m[0]/f.width/p):(p=1,m=m[0]/f.width);return{resolutionScale:p,cropArea:{x:Math.round((f.x+l.left)*p),y:Math.round((f.y+l.top)*p),width:Math.round(f.width*p),height:Math.round(f.height*p)},outputScale:m,format:u,quality:r,children:z,rotation:w}}})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/imageUtils"],function(f,p,k,l){function u(a,d){const {format:v,
quality:A,rotation:q,disableDecorations:y}=a||{};var D=t(a,d.padding);var C=d.width-D.left-D.right;d=d.height-D.top-D.bottom;D={x:0,y:0,width:C,height:d};if(a&&a.area){null!=a.area.x&&(D.x=Math.floor(a.area.x));null!=a.area.y&&(D.y=Math.floor(a.area.y));var c=null!=a.area.width?Math.floor(a.area.width):null,x=null!=a.area.height?Math.floor(a.area.height):null;D.width=C-D.x;D.height=d-D.y;null!=c&&null!=x?(D.width=Math.min(D.width,c),D.height=Math.min(D.height,x)):null==c&&null!=x?(c=Math.min(D.width,
c),D.height*=c/D.width,D.width=c):null!=c&&null==x&&(c=Math.min(D.height,x),D.width*=c/D.height,D.height=c)}D=m(D,a);c=Math.floor(Math.max(D.x,0));x=Math.floor(Math.max(D.y,0));C={x:c,y:x,width:Math.floor(Math.min(D.width,C-c)),height:Math.floor(Math.min(D.height,d-x))};d=C.width/C.height;D=D.width/D.height;D!==d&&(D>d?(d=Math.floor(C.width/D),C={x:C.x,y:Math.floor(C.y+(C.height-d)/2),width:C.width,height:d}):(d=Math.floor(C.height*D),C={x:Math.floor(C.x+(C.width-d)/2),y:C.y,width:d,height:C.height}));
const {width:G,height:E}=w(a,C);d=n(v);D=e[d];D=k.clamp(null!=A?A:D,0,100);return{format:d,quality:D,area:C,width:G,height:E,rotation:q,disableDecorations:!!y,ignoreBackground:!(!a||!a.ignoreBackground),ignorePadding:!(!a||!a.ignorePadding)}}function r(a,d){null==h&&(h=document.createElement("canvas"));var v=h;if(d.premultipliedAlpha){var A=a.data;const y=A.length;for(let D=0;D<y;D+=4){var q=A[D+3];255!==q&&0<q&&(q=255/q,A[D]*=q,A[D+1]*=q,A[D+2]*=q)}}v.width=a.width;v.height=a.height;A=v.getContext("2d",
{willReadFrequently:!0});A.putImageData(a,0,0);d.flipY&&(A.save(),A.globalCompositeOperation="copy",A.scale(1,-1),A.translate(0,-A.canvas.height),A.drawImage(A.canvas,0,0),A.restore());return{ctx:A,canvas:v}}function z(a,d){return a.toDataURL(g[d.format],d.quality/100)}function w(a,d){if(!a)return d;const v=a.width;a=a.height;if(null!=v&&null!=a)return{width:Math.floor(v),height:Math.floor(a)};if(null==v&&null==a)return d;d=d.width/d.height;return null==a?{width:Math.floor(v),height:Math.floor(v/
d)}:{width:Math.floor(a*d),height:Math.floor(a)}}function m(a,d){if(!d||null==d.width||null==d.height)return a;d=d.width/d.height;const v=a.width/a.height;if(v===d)return a;if(v<d)return d=Math.floor(a.height*d),a.x-=(d-a.width)/2,a.width=d,a;d=Math.floor(a.width/d);a.y-=(d-a.height)/2;a.height=d;return a}function t(a,d){return!d||a&&a.ignorePadding?b:d}function n(a){switch(a){case "png":case "jpg":case "jpeg":return a;case null:case void 0:return"png";default:return"png"}}let h=null;const g={png:"image/png",
jpg:"image/jpeg",jpeg:"image/jpeg"},e={png:100,jpg:98,jpeg:98},b={top:0,right:0,bottom:0,left:0};f.createEmptyImageData=l.createEmptyImageData;f.completeUserSettings=u;f.encode=function(a,d,v){const {ctx:A,canvas:q}=r(a,v);a=A.getImageData(0,0,a.width,a.height);d=z(q,d);q.width=0;q.height=0;return{dataUrl:d,data:a}};f.encodeData=function(a,d){const {ctx:v,canvas:A}=r(a,d);a=v.getImageData(0,0,a.width,a.height);A.width=0;A.height=0;return a};f.getFormatAndQuality=function(a,d){a=n(a);const v=e[a];
d=k.clamp(null!=d?d:v,0,100);return{format:a,quality:d}};f.getMaximumResolutionScale=function(a,d){return d/Math.max(a[0],a[1])};f.resampleHermite=function(a,d,v,A=0,q=0,y=a.width-A,D=a.height-q,C=!1){const {data:c}=a,{width:x,height:G,data:E}=d;y/=x;D/=G;const I=Math.ceil(y/2),L=Math.ceil(D/2);a=a.width;for(let Y=0;Y<G;Y++)for(let da=0;da<x;da++){const B=4*(da+(C?G-Y-1:Y)*x);let F=0,N=0,W=0,J=0,K=0,O=0;const X=(Y+.5)*D;for(let Z=Math.floor(Y*D);Z<(Y+1)*D;Z++){var R=Math.abs(X-(Z+.5))/L;const H=(da+
.5)*y;R*=R;for(let M=Math.floor(da*y);M<(da+1)*y;M++){var S=Math.abs(H-(M+.5))/I;S=Math.sqrt(R+S*S);if(1<=S)continue;S=2*S*S*S-3*S*S+1;const Q=4*(A+M+(q+Z)*a);O+=S*c[Q+3];N+=S;!v&&255>c[Q+3]&&(S=S*c[Q+3]/255);W+=S*c[Q];J+=S*c[Q+1];K+=S*c[Q+2];F+=S}}E[B]=W/F;E[B+1]=J/F;E[B+2]=K/F;E[B+3]=O/N}return d};f.screenshotSuperSampleSettings=function(a,d,v){if(!d)return a;const {framebufferWidth:A,framebufferHeight:q,pixelRatio:y,region:D}=a;d=t(a,v);v=d.left+d.right;const C=d.top+d.bottom,c=A-v,x=q-C,G=Math.min(8,
Math.min((2048-v)/c,(2048-C)/x));return 1.5>G?a:{...a,framebufferWidth:Math.round(c*G)+v,framebufferHeight:Math.round(x*G)+C,pixelRatio:y*G,resample:{region:{x:Math.round((D.x-d.left)*G)+d.left,y:Math.round((D.y-d.top)*G)+d.top,width:Math.round(D.width*G),height:Math.round(D.height*G)},width:A,height:q}}};f.toDataUrl=z;f.toRenderSettings=function(a,d){const v=u(a,d),A=v.area,q=v.width/A.width,y=t(v,d.padding),D=y.left+y.right,C=y.top+y.bottom;return{framebufferWidth:Math.floor((d.width-D)*q+D),framebufferHeight:Math.floor((d.height-
C)*q+C),region:{x:Math.floor(A.x*q)+y.left,y:Math.floor(A.y*q)+y.top,width:v.width,height:v.height},format:v.format,quality:v.quality,rotation:v.rotation,pixelRatio:q,layers:a&&a.layers?a.layers:[],disableDecorations:v.disableDecorations,ignoreBackground:v.ignoreBackground,ignorePadding:v.ignorePadding,objectAndLayerIdColor:!1}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/imageUtils":function(){define(["exports"],function(f){function p(u,r,z){z||(k||(k=document.createElement("canvas"),
k.width=1,k.height=1),z=k);return z.getContext("2d").createImageData(u,r)}let k=null,l=!0;f.createEmptyImageData=function(u,r,z){if(!u||!r)throw Error("Cannot construct image data without dimensions");if(l)try{return new ImageData(u,r)}catch(w){l=!1}return p(u,r,z)};f.wrapImageData=function(u,r,z,w){if(!r||!z)throw Error("Cannot construct image data without dimensions");if(l)try{return new ImageData(u,r,z)}catch(m){l=!1}r=p(r,z,w);r.data.set(u,0);return r};Object.defineProperty(f,Symbol.toStringTag,
{value:"Module"})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities","../webgl/contextUtils"],function(f,p,k,l){f.check=function(u){const r=k.getWebGLCapabilities(u);if(!r.available)return"3d"===u?new p("webgl:required","WebGL2 is required but not supported.",Error().stack):new p("webgl:required","WebGL is required but not supported.",Error().stack);if("3d"===u&&r.majorPerformanceCaveat)return new p("webgl:major-performance-caveat-detected",
"Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!r.supportsHighPrecisionFragment)return new p("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!r.supportsVertexShaderSamplers)return new p("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(r.type===l.ContextType.WEBGL1){if(!r.supportsElementIndexUint)return new p("webgl:element-index-uint-required",
"WebGL support for uint vertex indices is required but not supported.");if(!r.supportsStandardDerivatives)return new p("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!r.supportsInstancedArrays)return new p("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","./contextUtils"],function(f,p,k){function l(g){switch(g){case k.ContextType.WEBGL1:return u();case k.ContextType.WEBGL2:return r()}}function u(){if(!w){{const g=new n,e=z(k.ContextType.WEBGL1,g);null!=e&&(g.supportsElementIndexUint=null!==e.getExtension("OES_element_index_uint"),g.supportsStandardDerivatives=null!==e.getExtension("OES_standard_derivatives"),g.supportsInstancedArrays=null!==e.getExtension("ANGLE_instanced_arrays"),g.supportsTextureFloat=null!==
e.getExtension("OES_texture_float"),g.supportsTextureHalfFloat=null!==e.getExtension("OES_texture_half_float"),g.supportsColorBufferFloat=null!==e.getExtension("WEBGL_color_buffer_float"),g.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),g.supportsColorBufferHalfFloat=null!==e.getExtension("EXT_color_buffer_half_float"));w=g}}return w}function r(){if(!m){{const g=new h,e=z(k.ContextType.WEBGL2,g);null!=e&&(g.supportsColorBufferFloat=null!==e.getExtension("EXT_color_buffer_float"),
g.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),g.supportsColorBufferHalfFloat=g.supportsColorBufferFloat||null!==e.getExtension("EXT_color_buffer_half_float"));m=g}}return m}function z(g,e){if(g===k.ContextType.WEBGL1&&"undefined"===typeof WebGLRenderingContext||g===k.ContextType.WEBGL2&&"undefined"===typeof WebGL2RenderingContext)return null;const b=document.createElement("canvas");if(!b)return null;let a=k.createContext(b,g,{failIfMajorPerformanceCaveat:!0});null==a&&(a=
k.createContext(b,g),null!=a&&(e.majorPerformanceCaveat=!0));if(null==a)return a;if(g===k.ContextType.WEBGL1){if(g=a.getParameter(a.VERSION)?.match(/^WebGL\s+([\d.]*)/))g=parseFloat(g[1]),e.available=.94<=g}else e.available=!0;e.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);e.supportsVertexShaderSamplers=0<a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(g=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT))e.supportsHighPrecisionFragment=0<g.precision;return a}let w,m,t=p._createClass(function(){this.majorPerformanceCaveat=
this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}),n=function(g){function e(){var b=g.apply(this,arguments)||this;b.type=k.ContextType.WEBGL1;return b}p._inherits(e,g);return p._createClass(e)}(t),
h=function(g){function e(){var b=g.apply(this,arguments)||this;b.type=k.ContextType.WEBGL2;b.supportsElementIndexUint=!0;b.supportsStandardDerivatives=!0;b.supportsInstancedArrays=!0;b.supportsTextureFloat=!0;b.supportsTextureHalfFloat=!0;return b}p._inherits(e,g);return p._createClass(e)}(t);f.getWebGL1Capabilities=u;f.getWebGL2Capabilities=r;f.getWebGLCapabilities=function(g){for(g=k.getContextTypes(g);1<g.length;){const e=l(g.shift());if(e.available)return e}return l(g.shift())};f.getWebGLVersionCapabilities=
l;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/contextUtils":function(){define(["exports","../../core/has"],function(f,p){function k(u,r,z={}){r=r===f.ContextType.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const w of r)if(r=u.getContext(w,z))return r;return null}function l(u){if("3d"===u)return[f.ContextType.WEBGL2];u=p("esri-force-webgl");return u===f.ContextType.WEBGL1||u===f.ContextType.WEBGL2?[u]:p("mac")&&p("chrome")?[f.ContextType.WEBGL1,
f.ContextType.WEBGL2]:[f.ContextType.WEBGL2,f.ContextType.WEBGL1]}f.ContextType=void 0;(function(u){u[u.WEBGL1=1]="WEBGL1";u[u.WEBGL2=2]="WEBGL2"})(f.ContextType||(f.ContextType={}));f.createContext=k;f.createContextForView=function(u,r,z={}){u=l(u);for(const w of u)if(u=k(r,w,z))return u;return null};f.getContextTypes=l;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e,b){k=function(a){function d(A){var q=a.call(this,A)||this;q._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};q.components=[];q._updateViewAwareWidgets=y=>{q.components.forEach(D=>{D=q._find(D)?.widget;void 0!==D?.view&&(D.view=y)})};q._componentsWatcher=(y,D)=>{q._removeComponents(D);q._addComponents(y);q._adjustPadding(y)};return q}f._inherits(d,a);var v=d.prototype;v.initialize=function(){this.addHandles([u.watch(()=>
this.components,this._componentsWatcher,u.initial),u.watch(()=>this.view,this._updateViewAwareWidgets,u.initial)])};v._add=function(A,q,y,D,C){let c=A;if("string"===typeof A&&this._defaultPositionLookup[A]){if(this._find(A))return;c=this._createComponent(A)}f._get(f._getPrototypeOf(d.prototype),"_add",this).call(this,c,q,y,D,C)};v._removeComponents=function(A){A.forEach(q=>{if(q=this._find(q))this.remove(q),q.destroy()})};v._adjustPadding=function(A){A.includes("attribution")||this._isOverridden("padding")||
({top:A}=this.padding,this.padding=A)};v._addComponents=function(A){this.constructed&&A.forEach(q=>this.add(this._createComponent(q),this._defaultPositionLookup[q]))};v._createComponent=function(A){const q=this._createWidget(A);return new t({id:A,node:q})};v._createWidget=function(A){const {view:q}=this;switch(A){case "attribution":return new h({view:q});case "compass":return new g({view:q});case "navigation-toggle":return new e({view:q});case "zoom":return new b({view:q})}};return f._createClass(d)}(n);
p.__decorate([r.property()],k.prototype,"components",void 0);return k=p.__decorate([m.subclass("esri.views.ui.DefaultUI")],k)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,p,k,l,u,r,z,w,m){k=function(t){function n(){var g=
t.apply(this,arguments)||this;g.widget=null;return g}f._inherits(n,t);var h=n.prototype;h.destroy=function(){this.node=null;this.widget?.destroy()};h.castNode=function(g){this.widget?.destroy();if(!g)return this._set("widget",null),null;if("string"===typeof g||g&&"nodeType"in g)return this._set("widget",null),l.byId(g);g&&"function"===typeof g.render&&!g.domNode&&(g.domNode=document.createElement("div"));this._set("widget",g);return g.domNode};f._createClass(n,[{key:"id",get:function(){return this.get("widget.id")||
this.get("node.id")}},{key:"node",set:function(g){const e=this._get("node");g!==e&&(g&&g.classList.add("esri-component"),e&&e.classList.remove("esri-component"),this._set("node",g))}}]);return n}(k);p.__decorate([u.property({dependsOn:[]})],k.prototype,"id",null);p.__decorate([u.property()],k.prototype,"node",null);p.__decorate([r.cast("node")],k.prototype,"castNode",null);p.__decorate([u.property({readOnly:!0})],k.prototype,"widget",void 0);return k=p.__decorate([m.subclass("esri.views.ui.Component")],
k)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/arrayUtils ../../core/domUtils ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils ../../intl/locale".split(" "),function(f,p,k,l,u,r,z,w,m,t,n,h,g,e,b){function a(y){return 0===
y?"0":`${y}px`}function d(y){const D="object"===typeof y&&null!==y&&Object.getPrototypeOf(y);return null!==D&&D!==Object.prototype||!("component"in y||"index"in y||"position"in y)?null:y}function v(y,{top:D,bottom:C,left:c,right:x}){y.style.top=D;y.style.bottom=C;y.style.left=c;y.style.right=x}const A={left:0,top:0,bottom:0,right:0},q={bottom:30,top:15,right:15,left:15};k=function(y){function D(c){var x=y.call(this,c)||this;x._cornerNameToContainerLookup={};x._positionNameToContainerLookup={};x._components=
[];x._componentMap=new Map;x._locale=b.getLocale();x.view=null;x._applyViewPadding=()=>{const G=x.container;G&&v(G,x._toPixelPosition(x._getViewPadding()))};x._applyUIPadding=()=>{const G=x._innerContainer;G&&v(G,x._toPixelPosition(x.padding))};x._initContainers();return x}f._inherits(D,y);var C=D.prototype;C.initialize=function(){this.addHandles([z.watch(()=>[this.view?.padding,this.container],this._applyViewPadding,z.initial),z.watch(()=>this.padding,this._applyUIPadding,z.initial),z.watch(()=>
[this.container,this._locale],([c,x])=>{c&&c.setAttribute("lang",x)},z.initial),b.onLocaleChange(c=>{this._locale=c})])};C.destroy=function(){this.container=null;for(const c of this._components)c.destroy();this._components.length=0;this._componentMap.clear()};C.castPadding=function(c){return"number"===typeof c?{bottom:c,top:c,right:c,left:c}:{...q,...c}};C.add=function(c,x){let G,E,I;if(Array.isArray(c))c.forEach(R=>this.add(R,x));else{var L=d(c);L&&({index:G,position:x,component:c,key:E}=L);x&&"object"===
typeof x&&({index:G,key:E,position:x,internal:I}=x);!c||x&&!this._isValidPosition(x)||this._add(c,x,G,E,I)}};C.remove=function(c,x){if(c){if(Array.isArray(c))return c.map(I=>this.remove(I,x));var G=this._find(c);if(G&&(!this._componentMap.has(c)||this._componentMap.get(c)?.key===x)){var E=this._components.indexOf(G);G.node.parentNode?.removeChild(G.node);this._componentMap.delete(c);return this._components.splice(E,1)[0]}}};C.empty=function(c,x={removeInternal:!1}){if(Array.isArray(c))for(const G of c)this.empty(G,
x);else{c=Array.prototype.slice.call(this._positionNameToContainerLookup[c??"manual"].children).map(G=>this._findByNode(G)).filter(G=>null==G?!1:!(this._componentMap.get(G)?.internal??!1)||x.removeInternal);for(const G of c)this.remove(G)}};C.move=function(c,x){Array.isArray(c)&&c.forEach(I=>this.move(I,x));if(c){var G=d(c)||d(x);if(G){var E=G.index;x=G.position;c=G.component||c}(!x||this._isValidPosition(x))&&(c=this.remove(c))&&this.add(c,{position:x,index:E})}};C.find=function(c){return c?(c=this._findById(c))&&
(c.widget||c.node):null};C.getComponents=function(c,x={includeInternal:!1}){return c?Array.isArray(c)?c.map(G=>this._getComponentsAtPosition(G,x)).flat():this._getComponentsAtPosition(c,x):this._components.filter(G=>x.includeInternal||!(this._componentMap.get(G)?.internal??!1)).map(({widget:G,node:E})=>G??E)};C.getPosition=function(c){for(const x in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[x].contains(c))return x;return null};C._add=function(c,x,G,E,I){c instanceof
g||(c=new g({node:c}));this._place({component:c,position:x,index:G});this._components.push(c);this._componentMap.set(c,{key:E,internal:I})};C._find=function(c){return c?c instanceof g?this._findByComponent(c):"string"===typeof c?this._findById(c):this._findByNode(c.domNode||c):null};C._getViewPadding=function(){return this.view?.padding??A};C._attachContainers=function(c){c.appendChild(this._innerContainer);c.appendChild(this._manualContainer)};C._initContainers=function(){var c=document.createElement("div");
c.classList.add("esri-ui-inner-container","esri-ui-corner-container");const x=document.createElement("div");x.classList.add("esri-ui-inner-container","esri-ui-manual-container");const G=document.createElement("div");G.classList.add("esri-ui-top-left","esri-ui-corner");c.appendChild(G);const E=document.createElement("div");E.classList.add("esri-ui-top-right","esri-ui-corner");c.appendChild(E);const I=document.createElement("div");I.classList.add("esri-ui-bottom-left","esri-ui-corner");c.appendChild(I);
const L=document.createElement("div");L.classList.add("esri-ui-bottom-right","esri-ui-corner");c.appendChild(L);this._innerContainer=c;this._manualContainer=x;c=e.isRTL();this._cornerNameToContainerLookup={"top-left":G,"top-right":E,"bottom-left":I,"bottom-right":L,"top-leading":c?E:G,"top-trailing":c?G:E,"bottom-leading":c?L:I,"bottom-trailing":c?I:L};this._positionNameToContainerLookup={manual:x,...this._cornerNameToContainerLookup}};C._isValidPosition=function(c){return!!this._positionNameToContainerLookup[c]};
C._place=function(c){var x=c.position??"manual";const {component:G,index:E}=c;c=this._positionNameToContainerLookup[x];x=null!=E&&-1<E;var I=G.widget;I&&!I._started&&"function"===typeof I.postMixInProperties&&"function"===typeof I.buildRendering&&"function"===typeof I.postCreate&&"function"===typeof I.startup&&G.widget.startup();x?(x=Array.from(c.children),0===E?c.firstChild?u.insertBefore(G.node,c.firstChild):c.appendChild(G.node):E>=x.length?c.appendChild(G.node):u.insertBefore(G.node,x[E])):c.appendChild(G.node)};
C._toPixelPosition=function(c){return{top:a(c.top),left:a(c.left),right:a(c.right),bottom:a(c.bottom)}};C._findByComponent=function(c){return this._components.find(x=>x===c)??null};C._findById=function(c){return this._components.find(({id:x})=>x===c)??null};C._findByNode=function(c){return this._components.find(({node:x})=>x===c)??null};C._getComponentsAtPosition=function(c,x){return Array.prototype.slice.call(this._positionNameToContainerLookup[c].children).map(G=>this._findByNode(G)).filter(l.isSome).filter(G=>
x.includeInternal||!(this._componentMap.get(G)?.internal??!1)).map(({widget:G,node:E})=>G??E)};f._createClass(D,[{key:"container",set:function(c){const x=this._get("container");c!==x&&(c&&(c.classList.add("esri-ui"),h.setCalciteThemeClass(c),this._attachContainers(c)),x&&(x.classList.remove("esri-ui"),v(x,{top:"",bottom:"",left:"",right:""}),u.empty(x)),this._set("container",c))}},{key:"height",get:function(){const c=this.view?.height??0;if(0===c)return c;const x=this._getViewPadding(),{top:G,bottom:E}=
x;return Math.max(c-G-E,0)}},{key:"padding",get:function(){return this._get("padding")},set:function(c){this._overrideIfSome("padding",c)}},{key:"width",get:function(){const c=this.view?.width??0;if(0===c)return c;const x=this._getViewPadding(),{left:G,right:E}=x;return Math.max(c-G-E,0)}}]);return D}(r.EventedAccessor);p.__decorate([w.property()],k.prototype,"_locale",void 0);p.__decorate([w.property()],k.prototype,"container",null);p.__decorate([w.property()],k.prototype,"height",null);p.__decorate([w.property({value:q})],
k.prototype,"padding",null);p.__decorate([m.cast("padding")],k.prototype,"castPadding",null);p.__decorate([w.property()],k.prototype,"view",void 0);p.__decorate([w.property()],k.prototype,"width",null);return k=p.__decorate([n.subclass("esri.views.ui.UI")],k)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e){u=function(b){function a(v,A){var q=b.call(this,v,A)||this;q._isOpen=!1;q._attributionTextOverflowed=!1;q._prevSourceNodeHeight=0;q._resizeObserver=new ResizeObserver(y=>y.forEach(({target:D})=>q._checkSourceTextOverflow(D)));q.iconClass="esri-icon-description";q.icon=null;q.itemDelimiter=" | ";q.messages=null;q.viewModel=new t;return q}f._inherits(a,b);var d=a.prototype;d.initialize=function(){this.addHandles(k.on(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))};
d.destroy=function(){this._resizeObserver?.disconnect()};d.render=function(){return g.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};d.renderPoweredBy=function(){return g.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",g.tsx("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",
rel:"noreferrer"},"Esri"))};d.renderSourcesNode=function(){const v=this._isOpen,A=this._isInteractive,q=A?"0":"",{attributionText:y}=this;return g.tsx("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:v,["esri-interactive"]:A}),innerHTML:y,tabindex:q})};d._afterSourcesNodeCreate=function(v){this._prevSourceNodeHeight=v.clientWidth;this._resizeObserver.observe(v)};d._checkSourceTextOverflow=function(v){let A=
!1;const {clientHeight:q,clientWidth:y,scrollWidth:D}=v;v=D>y;const C=this._attributionTextOverflowed!==v;this._attributionTextOverflowed=v;C&&(A=!0);this._isOpen&&(v=q<this._prevSourceNodeHeight,this._prevSourceNodeHeight=q,v&&(this._isOpen=!1,A=!0));A&&this.scheduleRender()};d._toggleState=function(){this._isInteractive&&(this._isOpen=!this._isOpen)};f._createClass(a,[{key:"_isInteractive",get:function(){return this._isOpen||this._attributionTextOverflowed}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((v,
A)=>{v.includes(A.text)||v.push(A.text);return v},[]).join(this.itemDelimiter)}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(v){this._overrideIfSome("label",v)}},{key:"view",get:function(){return this.viewModel.view},set:function(v){this.viewModel.view=v}}]);return a}(m);p.__decorate([l.property()],u.prototype,"_isOpen",void 0);p.__decorate([l.property()],u.prototype,"_isInteractive",null);p.__decorate([l.property()],u.prototype,"_attributionTextOverflowed",void 0);
p.__decorate([l.property()],u.prototype,"_prevSourceNodeHeight",void 0);p.__decorate([l.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],u.prototype,"attributionText",null);p.__decorate([l.property()],u.prototype,"iconClass",void 0);p.__decorate([l.property()],u.prototype,"icon",void 0);p.__decorate([l.property()],u.prototype,"itemDelimiter",void 0);p.__decorate([l.property()],u.prototype,"label",null);p.__decorate([l.property(),h.messageBundle("esri/widgets/Attribution/t9n/Attribution")],
u.prototype,"messages",void 0);p.__decorate([l.property()],u.prototype,"view",null);p.__decorate([l.property({type:t})],u.prototype,"viewModel",void 0);p.__decorate([n.accessibleHandler()],u.prototype,"_toggleState",null);return u=p.__decorate([w.subclass("esri.widgets.Attribution")],u)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e,b){function a(q,y){return q&&"copyright"in q&&(!y||"function"===typeof q.originOf&&"user"===q.originOf("copyright"))}function d(q,y){return q.length!==y.length||q.some((D,C)=>D.text!==y[C].text)}function v(q,y,D){D&&y&&(q.find(C=>C.layerView===y&&C.text===D)||q.push({text:D,layerView:y}))}const A=[];u=function(q){function y(C){var c=q.call(this,C)||this;c._clear=()=>{c._fetchedAttributionData.clear();c._pendingAttributions.clear();c.handles.remove("suspension");
c.notifyChange("state")};c._pendingAttributions=new Set;c._fetchedAttributionData=new Map;c.items=new l;c.view=null;c._allLayerViewsChange=x=>{c.handles.remove("suspension");const G=c.get("view.allLayerViews");G&&c.handles.add(G.map(E=>r.watch(()=>[E.suspended,E.layer?.attributionVisible],()=>c._updateAttributionItems())),"suspension");x&&x.removed&&x.removed.forEach(E=>{c._pendingAttributions.delete(E);c._fetchedAttributionData.delete(E)});c._updateAttributionItems()};c.handles.add([r.on(()=>c.view?.allLayerViews,
"change",x=>c._allLayerViewsChange(x),{onListenerAdd:()=>c._allLayerViewsChange(),onListenerRemove:c._clear}),r.when(()=>!0===c.view?.stationary,()=>c._updateAttributionItems())]);return c}f._inherits(y,q);var D=y.prototype;D.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};D._updateAttributionItems=function(){const C=this.view,c=C?.allLayerViews;A.length=0;C&&c?(c.forEach(x=>{if(!x.suspended&&x.layer?.attributionVisible){var G=
x.layer;if(a(G,"user"))v(A,x,G.copyright);else if(G.hasAttributionData)if(this._fetchedAttributionData.has(x)){var E=this._fetchedAttributionData.get(x);E?v(A,x,this._getDynamicAttribution(E,C,G)):a(G)&&v(A,x,G.copyright)}else this._fetchAttributionData(x);else(E=G.get("portalItem.accessInformation"))?v(A,x,E):v(A,x,G.copyright)}}),d(this.items,A)&&(this.items.removeAll(),this.items.addMany(A)),A.length=0,this.notifyChange("state")):this._clear()};D._fetchAttributionData=async function(C){if(!this._pendingAttributions.has(C)){this._pendingAttributions.add(C);
var c=await k.result(C.layer.fetchAttributionData());this._pendingAttributions.has(C)&&(c=c.ok?this._createContributionIndex(c.value,"bing-maps"===C.layer.type):null,this._pendingAttributions.delete(C),this._fetchedAttributionData.set(C,c));this._updateAttributionItems()}};D._createContributionIndex=function(C,c){C=C.contributors;const x={};if(!C)return x;for(let R=0;R<C.length;R++){const S=C[R];var G=S.coverageAreas;if(!G)return;for(const Y of G){var E=Y.bbox,I=Y.zoomMin-(c&&Y.zoomMin?1:0);G=Y.zoomMax-
(c&&Y.zoomMax?1:0);E=new h({xmin:E[1],ymin:E[0],xmax:E[3],ymax:E[2],spatialReference:g.WGS84});for(E={extent:b.geographicToWebMercator(E),attribution:S.attribution||"",score:null!=Y.score?Y.score:100,id:R};I<=G;I++){var L;x[L=I]??(x[L]=[]);x[I].push(E)}}}x.maxKey=Math.max.apply(null,Object.keys(x));return x};D._getDynamicAttribution=function(C,c,x){const {extent:G,scale:E}=c;x=x.tileInfo?.scaleToZoom(E)??0;x=Math.min(C.maxKey??0,Math.round(x));if(!G||null==x||-1>=x)return"";C=C[x];const I=b.project(G.center.clone().normalize(),
c.spatialReference),L=new Set;return C?C.filter(R=>{const S=R.id;(R=!L.has(S)&&I&&R.extent&&e.extentContainsPoint(R.extent,I))&&L.add(S);return R}).sort((R,S)=>S.score-R.score||R.objectId-S.objectId).map(R=>R.attribution).join(", "):""};f._createClass(y,[{key:"state",get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return y}(u.HandleOwner);p.__decorate([z.property({readOnly:!0,type:l})],u.prototype,"items",void 0);p.__decorate([z.property({readOnly:!0})],
u.prototype,"state",null);p.__decorate([z.property()],u.prototype,"view",void 0);return u=p.__decorate([n.subclass("esri.widgets.Attribution.AttributionViewModel")],u)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./Compass/css ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e){l=function(b){function a(v,A){v=b.call(this,v,A)||this;v.iconClass=t.CSS.widgetIcon;v.icon=null;v.messages=null;v.viewModel=new m;return v}f._inherits(a,b);var d=a.prototype;d.reset=function(){return this.viewModel.reset()};d.render=function(){const {orientation:v,state:A}=this.viewModel;var q="disabled"===A,y="compass"===("rotation"===A?"rotation":"compass");const D=q?-1:0;q={[t.CSS.disabled]:q,[t.CSS.interactive]:!q};y={[t.CSS.northIcon]:y,[t.CSS.rotationIcon]:!y};
const {messages:C}=this;return g.tsx("div",{bind:this,class:this.classes(t.CSS.base,q),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:D,"aria-label":C.reset,title:C.reset},g.tsx("span",{"aria-hidden":"true",class:this.classes(t.CSS.icon,y),styles:this._toRotationTransform(v)}),g.tsx("span",{class:t.CSS.text},C.reset))};d._reset=function(){this.viewModel.reset()};d._toRotationTransform=function(v){return{transform:`rotateZ(${v.z}deg)`}};f._createClass(a,[{key:"goToOverride",get:function(){return this.viewModel.goToOverride},
set:function(v){this.viewModel.goToOverride=v}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(v){this._overrideIfSome("label",v)}},{key:"view",get:function(){return this.viewModel.view},set:function(v){this.viewModel.view=v}}]);return a}(w);p.__decorate([k.property()],l.prototype,"goToOverride",null);p.__decorate([k.property()],l.prototype,"iconClass",void 0);p.__decorate([k.property()],l.prototype,"icon",void 0);p.__decorate([k.property()],l.prototype,"label",null);
p.__decorate([k.property(),h.messageBundle("esri/widgets/Compass/t9n/Compass")],l.prototype,"messages",void 0);p.__decorate([k.property()],l.prototype,"view",null);p.__decorate([k.property({type:m})],l.prototype,"viewModel",void 0);p.__decorate([n.accessibleHandler()],l.prototype,"_reset",null);return l=p.__decorate([z.subclass("esri.widgets.Compass")],l)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h){k=function(g){function e(a){a=g.call(this,a)||this;a._handles=new l;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(f._assertThisInitialized(a));a._updateForRotation=a._updateForRotation.bind(f._assertThisInitialized(a));a._updateRotationWatcher=a._updateRotationWatcher.bind(f._assertThisInitialized(a));return a}f._inherits(e,g);var b=e.prototype;b.initialize=function(){this._handles.add(r.watch(()=>this.view,this._updateRotationWatcher,
r.initial))};b.destroy=function(){u.removeMaybe(this._handles);this.view=null};b.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view?.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};b._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};b._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};b._updateRotationWatcher=function(a){this._handles.removeAll();a&&this._handles.add("2d"===a.type?r.watch(()=>a?.rotation,this._updateForRotation,
r.initial):r.watch(()=>a?.camera,this._updateForCamera,r.initial))};f._createClass(e,[{key:"canShowNorth",get:function(){const a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return e}(h.GoToMixin(k));p.__decorate([z.property({readOnly:!0})],k.prototype,"canShowNorth",null);p.__decorate([z.property()],k.prototype,"orientation",void 0);p.__decorate([z.property({readOnly:!0})],
k.prototype,"state",null);p.__decorate([z.property()],k.prototype,"view",void 0);return k=p.__decorate([n.subclass("esri.widgets.CompassViewModel")],k)})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,p,k,l,u,r,z,w,m){f.GoToMixin=
t=>{t=function(n){function h(...g){g=n.call(this,...g)||this;g.goToOverride=null;g.view=null;return g}p._inherits(h,n);h.prototype.callGoTo=function(g){const {view:e}=this;l.assertIsSome(e);return this.goToOverride?this.goToOverride(e,g):e.goTo(g.target,g.options)};return p._createClass(h)}(t);k.__decorate([u.property()],t.prototype,"goToOverride",void 0);k.__decorate([u.property()],t.prototype,"view",void 0);return t=k.__decorate([m.subclass("esri.widgets.support.GoTo")],t)};Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass/css":function(){define(["exports"],function(f){f.CSS={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/css ./NavigationToggle/NavigationToggleViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e){l=function(b){function a(v,A){v=b.call(this,v,A)||this;v.iconClass=m.CSS.widgetIcon;v.icon=null;v.messages=null;v.viewModel=new t;return v}f._inherits(a,b);var d=a.prototype;d.toggle=function(){return this.viewModel.toggle()};d.render=function(){const v="disabled"===this.get("viewModel.state");var A="pan"===this.get("viewModel.navigationMode");const q={[m.CSS.activeButton]:A};A={[m.CSS.activeButton]:!A};const y=v?-1:0,D=this.messages.toggle;return g.tsx("div",
{bind:this,class:this.classes(m.CSS.base,{[m.CSS.disabled]:v,[m.CSS.isLayoutHorizontal]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:y,"aria-label":D,title:D},g.tsx("div",{class:this.classes(m.CSS.button,m.CSS.panButton,q)},g.tsx("span",{class:m.CSS.panIcon})),g.tsx("div",{class:this.classes(m.CSS.button,m.CSS.rotateButton,A)},g.tsx("span",{class:m.CSS.rotationIcon})))};d._toggle=function(){this.toggle()};f._createClass(a,[{key:"label",get:function(){return this.messages?.widgetLabel??
""},set:function(v){this._overrideIfSome("label",v)}},{key:"layout",set:function(v){"horizontal"!==v&&(v="vertical");this._set("layout",v)}},{key:"view",get:function(){return this.viewModel.view},set:function(v){this.viewModel.view=v}}]);return a}(w);p.__decorate([k.property()],l.prototype,"iconClass",void 0);p.__decorate([k.property()],l.prototype,"icon",void 0);p.__decorate([k.property()],l.prototype,"label",null);p.__decorate([k.property({value:"vertical"})],l.prototype,"layout",null);p.__decorate([k.property(),
h.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],l.prototype,"messages",void 0);p.__decorate([k.property()],l.prototype,"view",null);p.__decorate([k.property({type:t})],l.prototype,"viewModel",void 0);p.__decorate([n.accessibleHandler()],l.prototype,"_toggle",null);return l=p.__decorate([z.subclass("esri.widgets.NavigationToggle")],l)})},"esri/widgets/NavigationToggle/css":function(){define(["exports"],function(f){f.CSS={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",
activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,p,k,l,u,r,z,w,m){k=function(t){function n(g){g=t.call(this,g)||this;g.navigationMode="pan";g.view=null;return g}f._inherits(n,t);var h=n.prototype;h.initialize=function(){this.own(l.when(()=>this.view?.inputManager,()=>this._setNavigationMode()))};h.destroy=function(){this.view=null};h.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};h._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction=
"pan"===this.navigationMode?"pan":"rotate"};f._createClass(n,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view?.type?"ready":"disabled"}}]);return n}(k);p.__decorate([u.property({readOnly:!0})],k.prototype,"state",null);p.__decorate([u.property()],k.prototype,"navigationMode",void 0);p.__decorate([u.property()],k.prototype,"view",void 0);return k=p.__decorate([m.subclass("esri.widgets.NavigationToggleViewModel")],k)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n,h,g,e){u=function(b){function a(v,A){v=b.call(this,v,A)||this;v.iconClass="esri-icon-zoom-in-magnifying-glass";v.icon=null;v.messages=null;v.viewModel=new e;return v}f._inherits(a,b);var d=a.prototype;d.initialize=function(){this._zoomInButton=new g({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new g({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};d.destroy=function(){this._zoomInButton=k.destroyMaybe(this._zoomInButton);
this._zoomOutButton=k.destroyMaybe(this._zoomOutButton)};d.render=function(){const v={["esri-zoom--horizontal"]:"horizontal"===this.layout},{canZoomIn:A,canZoomOut:q}=this.viewModel;this._zoomInButton.enabled=A;this._zoomOutButton.enabled=q;const {zoomIn:y,zoomOut:D}=this.messages;this._zoomInButton.title=y;this._zoomOutButton.title=D;return h.tsx("div",{class:this.classes("esri-zoom esri-widget",v)},this._zoomInButton.render(),this._zoomOutButton.render())};d.zoomIn=function(){return this.viewModel.zoomIn()};
d.zoomOut=function(){return this.viewModel.zoomOut()};f._createClass(a,[{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(v){this._overrideIfSome("label",v)}},{key:"layout",set:function(v){"horizontal"!==v&&(v="vertical");this._set("layout",v)}},{key:"view",get:function(){return this.viewModel.view},set:function(v){this.viewModel.view=v}}]);return a}(m);p.__decorate([l.property()],u.prototype,"iconClass",void 0);p.__decorate([l.property()],u.prototype,"icon",void 0);
p.__decorate([l.property()],u.prototype,"label",null);p.__decorate([l.property({value:"vertical"})],u.prototype,"layout",null);p.__decorate([l.property(),n.messageBundle("esri/widgets/Zoom/t9n/Zoom")],u.prototype,"messages",void 0);p.__decorate([l.property()],u.prototype,"view",null);p.__decorate([l.property({type:e})],u.prototype,"viewModel",void 0);return u=p.__decorate([w.subclass("esri.widgets.Zoom")],u)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ../support/decorators/accessibleHandler ../support/jsxFactory ../support/widgetUtils".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n){l=function(h){function g(){var b=h.apply(this,arguments)||this;b.enabled=!0;b.iconClass=null;b.icon=null;b.title="";return b}f._inherits(g,h);var e=g.prototype;e.render=function(){const b=this.enabled?0:-1;return t.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:b,title:this.title},t.tsx("span",
{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",this.iconClass??"")}),t.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};e._triggerAction=function(){this.action.call(this)};return f._createClass(g)}(w);p.__decorate([k.property()],l.prototype,"action",void 0);p.__decorate([k.property()],l.prototype,"enabled",void 0);p.__decorate([k.property()],l.prototype,"iconClass",void 0);p.__decorate([k.property()],l.prototype,"icon",void 0);p.__decorate([k.property()],l.prototype,
"title",void 0);p.__decorate([m.accessibleHandler()],l.prototype,"_triggerAction",null);return l=p.__decorate([z.subclass("esri.widgets.IconButton")],l)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),
function(f,p,k,l,u,r,z,w,m,t,n){k=function(h){function g(b){return h.call(this,b)||this}f._inherits(g,h);var e=g.prototype;e.destroy=function(){this.view=null};e.zoomIn=function(){if(this.canZoomIn){var b=this.view;"2d"===b.type?b.mapViewNavigation.zoomIn():l.ignoreAbortErrors(b.goTo({zoomFactor:2}))}};e.zoomOut=function(){if(this.canZoomOut){var b=this.view;"2d"===b.type?b.mapViewNavigation.zoomOut():l.ignoreAbortErrors(b.goTo({zoomFactor:.5}))}};f._createClass(g,[{key:"canZoomIn",get:function(){return null!=
this._zoomConditions&&this._zoomConditions.canZoomIn}},{key:"canZoomOut",get:function(){return null!=this._zoomConditions&&this._zoomConditions?.canZoomOut}},{key:"state",get:function(){return this.view?.ready?"ready":"disabled"}},{key:"view",set:function(b){b?"2d"===b.type?this._zoomConditions=new t({view:b}):"3d"===b.type&&(this._zoomConditions=new n({view:b})):this._zoomConditions=null;this._set("view",b)}}]);return g}(k);p.__decorate([u.property()],k.prototype,"_zoomConditions",void 0);p.__decorate([u.property()],
k.prototype,"canZoomIn",null);p.__decorate([u.property()],k.prototype,"canZoomOut",null);p.__decorate([u.property({readOnly:!0})],k.prototype,"state",null);p.__decorate([u.property()],k.prototype,"view",null);return k=p.__decorate([m.subclass("esri.widgets.Zoom.ZoomViewModel")],k)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,p,k,l,u,r,z,w){k=function(m){function t(){return m.apply(this,arguments)||this}f._inherits(t,m);f._createClass(t,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const n=this.get("view.animation.target.scale")||this.get("view.scale"),h=this.get("view.constraints.effectiveMaxScale");return 0===h||n>h}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const n=this.get("view.animation.target.scale")||this.get("view.scale"),h=this.get("view.constraints.effectiveMinScale");
return 0===h||n<h}}]);return t}(k);p.__decorate([l.property({readOnly:!0})],k.prototype,"canZoomIn",null);p.__decorate([l.property({readOnly:!0})],k.prototype,"canZoomOut",null);p.__decorate([l.property()],k.prototype,"view",void 0);return k=p.__decorate([w.subclass("esri.widgets.Zoom.ZoomConditions2D")],k)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,p,k,l,u,r,z,w){k=function(m){function t(){return m.apply(this,arguments)||this}f._inherits(t,m);f._createClass(t,[{key:"canZoomIn",get:function(){return!!this.view.ready}},{key:"canZoomOut",get:function(){return!!this.view.ready}}]);return t}(k);p.__decorate([l.property({readOnly:!0})],k.prototype,"canZoomIn",null);p.__decorate([l.property({readOnly:!0})],k.prototype,"canZoomOut",null);p.__decorate([l.property()],k.prototype,"view",void 0);return k=p.__decorate([w.subclass("esri.widgets.Zoom.ZoomConditions3D")],
k)})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),function(f,p,k,l,u,r,z,w){l=function(m){function t(n){n=m.call(this,n)||this;n.components=["attribution","zoom"];return n}f._inherits(t,m);return f._createClass(t)}(w);
p.__decorate([k.property()],l.prototype,"components",void 0);return l=p.__decorate([z.subclass("esri.views.ui.2d.DefaultUI2D")],l)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(f,p,k,l,u,r,z,w){var m;l=m=function(t){function n(h){h=
t.call(this,h)||this;h.color=new k([0,0,0,1]);return h}f._inherits(n,t);n.prototype.clone=function(){return new m(u.clone({color:this.color}))};return f._createClass(n)}(l.JSONSupport);p.__decorate([r.property({type:k,json:{write:!0}})],l.prototype,"color",void 0);return l=m=p.__decorate([w.subclass("esri.webmap.background.ColorBackground")],l)})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Graphic ../Viewpoint ../core/arrayUtils ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/iteratorUtils ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/workers/workers ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../geometry/projection ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/ViewStateManager ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/Timeline ./support/createScreenshotPlan ./support/screenshotUtils ./support/screenUtils ./support/WebGLRequirements ./ui/DefaultUI ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(f,
p,k,l,u,r,z,w,m,t,n,h,g,e,b,a,d,v,A,q,y,D,C,c,x,G,E,I,L,R,S,Y,da,B,F,N,W,J,K,O,X,Z,H,M,Q,V,U,aa,ha){async function ja(){const [,{GraphicsView2D:oa,GraphicContainer:pa,LabelManager:ia,MapViewNavigation:P,MagnifierView2D:T,Stage:ba}]=await Promise.all([new Promise((ca,ma)=>f(["./2d/webglDeps"],ca,ma)),new Promise((ca,ma)=>f(["./2d/mapViewDeps"],ca,ma))]);va=oa;ua=pa;ta=ia;wa=P;xa=T;na=ba}function fa(oa){const pa=oa.getObjectId();return pa?`${oa.layer?.uid??oa.sourceLayer?.uid??"MapView"}/${pa}`:`"MapView/${oa.uid}`}
function ea(oa,pa,ia,P,T){return ba=>{if(ba instanceof l){if(ba.layer===oa)T?.();else{var ca=oa.allLayerViews.find(ma=>ma.layer===ba.layer);ca&&P?.(ca)}ia(fa(ba))}else(ca=oa.allLayerViews.find(ma=>ma.layer===ba))&&pa(ca)}}function la(oa,pa){if(oa)if(n.isIterable(oa))for(const ia of oa)if(n.isIterable(ia))for(const P of ia)pa(P);else pa(ia);else pa(oa)}let na,va,ua,ta,wa,xa;const za={flipY:!0,premultipliedAlpha:!0};C=function(oa){function pa(P){var T=oa.call(this,P)||this;T._magnifierView=null;T._stage=
null;T._resolveWhenReady=[];T.rootLayerViews=new w({getCollections:()=>[T.basemapView?.baseLayerViews,T.layerViews,T.basemapView?.referenceLayerViews],getChildrenFunction:()=>null});T.featuresTilingScheme=null;T.fullOpacity=1;T.graphicsView=null;T.stateManager=new J.ViewStateManager({constraints:new S({view:p._assertThisInitialized(T)})});T.labelManager=null;T.mapViewNavigation=null;T.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};
T.rendering=!1;T.supersampleScreenshotsEnabled=!0;T.supportsGround=!1;T._stationaryTimer=null;T._gotoTask=null;T.frameTask=new L(p._assertThisInitialized(T));T._pePromise=null;T.floors=new z;T.highlightOptions=new X;T.inputManager=new K({view:p._assertThisInitialized(T)});T.map=null;T.spatialReferenceLocked=!1;T.timeline=new Z.Timeline;T.type="2d";T.ui=new aa;T.padding={top:0,right:0,bottom:0,left:0};T.addHandles([b.watch(()=>T.viewpoint,()=>{T._lastStationaryEventTimestamp=performance.now();T._flipStationary(160)},
b.sync),T.on("resize",ba=>T.stateManager.resize(ba.width,ba.height)),b.watch(()=>T.animationManager?.animation,ba=>{T.animation=ba})]);a.initialize();return T}p._inherits(pa,oa);var ia=pa.prototype;ia.destroy=function(){this._set("preconditionsReady",!1);this.frameTask=g.destroyMaybe(this.frameTask);this._gotoTask=null;this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};ia.goTo=function(P,T){if(P)return this.animation&&(this.animation=null),this._createAnimation(),
b.whenOnce(()=>this.ready,T).then(()=>{const ba={animate:!0,...T},ca=W.create(P,this);this.animation?.update(ca);this._gotoTask={};return ba.animate?this._gotoAnimated(ca,ba):this._gotoImmediate(ca,ba)});h.getLogger(this).error("#goTo()","target cannot be null or undefined")};ia.hitTest=async function(P,T){const ba=Q.isSupportedScreenPointEvent(P)?Q.createScreenPointFromSupportedEvent(this,P):P;if(!this.ready||isNaN(ba.x)||isNaN(ba.y))return{screenPoint:ba,results:[]};let ca=new Set,ma=!1,qa=null,
ra=null;T?.include?la(T.include,ea(this,ka=>ca.add(ka),ka=>{qa||(qa=new Set);qa.add(ka)},ka=>ca.add(ka),()=>ma=!0)):(ma=!0,ca=new Set(this.allLayerViews));T?.exclude&&la(T.exclude,ea(this,ka=>ca.delete(ka),ka=>{ra||(ra=new Set);ra.add(ka)}));T=this.allLayerViews.filter(ka=>!ka.suspended&&ca.has(ka)).reverse();const sa=this.toMap(ba);P=ma?this.graphicsView.hitTest(sa).map(ka=>({type:"graphic",graphic:ka,layer:null,mapPoint:sa})):[];T=await Promise.all(T.map(ka=>ka.hitTest(sa,ba)).toArray());P=[...P,
...T].filter(r.isSome).flat().filter(r.isSome);qa&&(P=P.filter(ka=>!("graphic"in ka)||!ka.graphic||qa?.has(fa(ka.graphic))));ra&&(P=P.filter(ka=>!("graphic"in ka)||!ka.graphic||!ra?.has(fa(ka.graphic))));return{screenPoint:ba,results:P}};ia.takeScreenshot=async function(P){P=this._createScreenshotPlan(P);const T=await this._stage.takeScreenshot(P);return M.encode(T,{format:P.format,quality:P.quality,rotation:0,disableDecorations:!1},za)};ia._takeScreenshot=async function(P){P=this._createScreenshotPlan(P);
P=await this._stage.takeScreenshot(P);return M.encodeData(P,za)};ia._createScreenshotPlan=function(P){P=P??{};const T=this.supersampleScreenshotsEnabled?Math.min(4,M.getMaximumResolutionScale(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let ba;P.layers?(ba=[],P.layers.forEach(qa=>{const ra=this.allLayerViews.find(sa=>sa.layer.id===qa.id);ra&&"container"in ra&&ra.container&&ba.push(ra.container)})):ba=this._stage.children;const {format:ca,quality:ma}=M.getFormatAndQuality(P.format,
P.quality);return H(P,T,this.size,this.padding,ca,ma,ba,P.rotation)};ia.toMap=function(P){if(!this.ready)return null;P=Q.isSupportedScreenPointEvent(P)?Q.createScreenPointFromSupportedEvent(this,P):P;return this.stateManager.toMap(P)};ia.toScreen=function(P){return this.stateManager.toScreen(P)};ia.on=function(P,T,ba,ca){return(ba=this.inputManager&&this.viewEvents.on(P,T,ba,ca))?ba:p._get(p._getPrototypeOf(pa.prototype),"on",this).call(this,P,T)};ia.hasEventListener=function(P){return p._get(p._getPrototypeOf(pa.prototype),
"hasEventListener",this).call(this,P)||this.viewEvents.hasHandler(P)};ia.whenLayerView=function(P){return p._get(p._getPrototypeOf(pa.prototype),"whenLayerView",this).call(this,P)};ia.graphicChanged=function(P){this.graphicsView&&this.graphicsView.graphicUpdateHandler(P)};ia.whenReady=function(){return new Promise(P=>{this.ready?P(this):this._resolveWhenReady.push(P)})};ia.forceDOMReadyCycle=function(){this.forceReadyCycle()};ia.getDefaultSpatialReference=function(){return this.map&&"initialViewProperties"in
this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null};ia.hasLayerViewModule=function(P){return R.layerView2DImporter.hasLayerViewModule(P)};ia.importLayerView=function(P){return R.layerView2DImporter.importLayerView(P)};ia.pixelSizeAt=function(){return this.ready?this.resolution:(h.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};ia.popupHitTest=function(P){return this.hitTest(P).then(T=>({...T,mapPoint:this.toMap(P)}))};
ia.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};ia.validate=function(){let P=V.check(this.type);t("safari")&&9>t("safari")&&(P=new m("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:t("safari")}));return null!=P?(h.getLogger(this).warn("#validate()",P.message),Promise.reject(P)):ja()};ia._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new E;return this.animation};
ia._cancellableGoTo=function(P,T,ba){const ca=()=>P===this._gotoTask,ma=ba.then(()=>{ca()&&(this.animation=null)}).catch(ra=>{ca()&&(T&&!T.done&&(T.stop(),this.frameTask.animationInProgress=!1),this.animation=null);throw ra;}),qa=new Promise(ra=>ra(ma));T.when().catch(()=>{ca()&&qa.cancel&&qa.cancel()});return qa};ia._gotoImmediate=function(P,T){const ba=this._gotoTask,ca=this.animation;P=P.then(ma=>{e.throwIfAborted(T);if(ba!==this._gotoTask)throw new m("view:goto-interrupted","Goto was interrupted");
this.viewpoint=ca.target=ma;ca.finish()});return this._cancellableGoTo(ba,ca,P)};ia._flipStationary=function(P){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const T=performance.now()-this._lastStationaryEventTimestamp;160>T&&(this._stationaryTimer=this._flipStationary(T))},P)};ia._getDefaultViewpoint=function(){const {constraints:P,initialExtent:T,map:ba,padding:ca,size:ma}=this;if(!P)return null;var qa=ba&&"initialViewProperties"in
ba?ba.initialViewProperties:void 0;const ra=this.stateManager.getUserStartupOptions(this.size);var sa=qa?.viewpoint;const ka=sa?.targetGeometry?.extent??T;var ya=ka?.center;qa=sa?.rotation??0;sa=sa?.scale||ka&&W.extentToScale(ka,[ma[0]-ca.left-ca.right,ma[1]-ca.top-ca.bottom]);ya=ra.center??ya;sa=ra.scale??sa;return ya&&sa?new u({targetGeometry:ya,scale:sa,rotation:ra.rotation??qa}):null};ia._gotoAnimated=function(P,T){const ba=this._gotoTask,ca=this.animation;if(!ca)return Promise.resolve();P=P.then(ma=>
{e.throwIfAborted(T);if(ba!==this._gotoTask)throw new m("view:goto-interrupted","Goto was interrupted");ca.update(ma);this.animationManager.animate(ca,this.viewpoint,T);return ca.when().then(()=>{},()=>{})});return this._cancellableGoTo(ba,ca,P)};ia._startup=function(){this.timeline.begin("MapView Startup");var P=this._getDefaultViewpoint();this.stateManager.startup(P,this.size,this.spatialReference,this.defaultsFromMap.extent?.center);this.graphics.owner=this;const T=new na(this.surface,{canvas:this.renderCanvas,
supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=T;this._magnifierView=new xa;this._magnifierView.magnifier=this.magnifier;P=new ta({view:this});this._set("labelManager",P);P=new I({view:this});this._set("animationManager",P);P=new wa({view:this,animationManager:P});this._set("mapViewNavigation",P);this._setupSpatialReferenceDependentProperties();
this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),T.on("post-render",()=>this._set("rendering",T.renderRequested)),T.on("will-render",()=>this._set("rendering",T.renderRequested)),T.on("webgl-error",ba=>this.fatalError=ba.error),b.watch(()=>this.stationary,ba=>T.stationary=ba,b.syncAndInitial),b.watch(()=>this.background,ba=>{T.backgroundColor=ba?.color;this._magnifierView.backgroundColor=ba?.color},b.syncAndInitial),b.watch(()=>this.magnifier,ba=>this._magnifierView.magnifier=
ba,b.syncAndInitial),b.watch(()=>this.renderingOptions,ba=>T.renderingOptions=ba,b.syncAndInitial),b.watch(()=>this.highlightOptions,ba=>T.highlightOptions=ba,b.syncAndInitial),b.watch(()=>this.state.id,()=>T.state=this.state,b.syncAndInitial)],"map-view");this._updateStageChildren();P=this._resolveWhenReady;this._resolveWhenReady=[];P.forEach(ba=>ba(this));this.timeline.end("MapView Startup");this.frameTask.start();this._set("ready",!0)};ia._teardown=function(){this._destroySpatialReferenceDependentProperties();
this.handles.remove("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask.stop();this._stationaryTimer&&(clearTimeout(this._stationaryTimer),
this._stationaryTimer=null);this._set("ready",!1);this.stateManager.teardown();this.animation=null};ia._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(P=>{this._stage.addChild(P.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};ia._setupSpatialReferenceDependentProperties=function(){var P=new da(D.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",
P);P=new va({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new ua(P)});this._set("graphicsView",P)};ia._destroySpatialReferenceDependentProperties=function(){const P=this.graphicsView;this._set("graphicsView",null);P.destroy();this._set("featuresTilingScheme",null)};ia._spatialReferenceChanged=function(P){if(this.ready){this.frameTask.stop();for(const T of this.allLayerViews)T.processDetach();this._destroySpatialReferenceDependentProperties();this.stateManager.changeSpatialReference(P);
this._stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const T of this.allLayerViews)T.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}};p._createClass(pa,[{key:"graphicsTileStore",get:function(){return new O(this.featuresTilingScheme)}},{key:"constraintsInfo",get:function(){const P=this.defaultsFromMap?.tileInfo,T=this.spatialReference;return{lods:P?.spatialReference?.equals(T)?P.lods:null,spatialReference:T}}},{key:"state",
get:function(){return this.stateManager.state}},{key:"initialExtentRequired",get:function(){if(!this.stateManager)return!1;const {scale:P,constraints:T,center:ba,viewpoint:ca,extent:ma}=this;let qa=this.zoom;if(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||ma)return!1;T?.effectiveLODs||(qa=-1);return ba&&(0!==P||-1!==qa)||ca&&null!=ca.targetGeometry&&("extent"===ca.targetGeometry.type||ca.scale)?!1:!0}},{key:"resourceManager",get:function(){return this._stage.resourceManager}},
{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"_defaultsFromMapSettings",get:function(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}},{key:"_projectionEngineLoaded",get:function(){if(y.isLoaded())return!0;this._pePromise||(this._pePromise=y.load().finally(()=>{this._pePromise=null}));return!1}},{key:"typeSpecificPreconditionsReady",get:function(){const P=this._getDefaultViewpoint();
return P?y.canProjectWithoutEngine(P.targetGeometry.spatialReference,this.spatialReference)?!0:this._projectionEngineLoaded:!1}},{key:"animation",set:function(P){var T=this._get("animation");P!==T&&(T&&T.stop(),!P||P.isFulfilled()?this._set("animation",null):(this._set("animation",P),this.frameTask.animationInProgress=!0,T=()=>{P===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame());this.frameTask.animationInProgress=!1},P.when(T,T)))}},{key:"background",get:function(){return"esri.WebMap"===
this.map?.declaredClass?this.map.initialViewProperties.background:null},set:function(P){this._override("background",P)}},{key:"center",get:function(){return this.stateManager?.center??null},set:function(P){this.stateManager.center=P}},{key:"constraints",get:function(){return this.stateManager?.constraints},set:function(P){P.view=this;const T=this.stateManager.constraints;this.stateManager.constraints=P;T?.destroy()}},{key:"extent",get:function(){return this.stateManager?.extent??null},set:function(P){this.stateManager.extent=
P}},{key:"padding",get:function(){return this.stateManager?.padding},set:function(P){this.stateManager&&(this.stateManager.padding=P)}},{key:"resizeAlign",get:function(){return this.stateManager.resizeAlign},set:function(P){this.stateManager.resizeAlign=P}},{key:"resolution",get:function(){return this.stateManager.resolution??0}},{key:"rotation",get:function(){return this.stateManager.rotation??0},set:function(P){this.stateManager.rotation=P}},{key:"scale",get:function(){return this.stateManager?.scale??
0},set:function(P){this.stateManager&&(this.stateManager.scale=P)}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this.resizing&&!this._stationaryTimer}},{key:"updating",get:function(){const P=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(T=>!T.destroyed&&!("layerViews"in T)&&!0===T.updating));if(t("esri-2d-log-updating")){const T=
this.allLayerViews.reduce((ba,ca)=>({...ba,[ca.layer.id]:!ca.destroyed&&!("layerViews"in ca)&&ca.updating}),{});console.log(`Updating MapView: ${P}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(T)}\n`)}return P}},
{key:"viewpoint",get:function(){return this.stateManager.viewpoint??null},set:function(P){this.stateManager.viewpoint=P;this.frameTask.requestFrame()}},{key:"zoom",get:function(){return this.stateManager.zoom??-1},set:function(P){this.stateManager.zoom=P}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}},{key:"test",get:function(){return{takeScreenshot:P=>this._takeScreenshot(P)}}}]);return pa}(C.BreakpointsOwner(x.PopupView(c.DOMContainer(G))));
C.type="2d";k.__decorate([d.property({readOnly:!0})],C.prototype,"animationManager",void 0);k.__decorate([d.property({constructOnly:!0})],C.prototype,"deactivatedWebGLExtensions",void 0);k.__decorate([d.property({constructOnly:!0})],C.prototype,"debugWebGLExtensions",void 0);k.__decorate([d.property({readOnly:!0})],C.prototype,"featuresTilingScheme",void 0);k.__decorate([d.property({readOnly:!0})],C.prototype,"fullOpacity",void 0);k.__decorate([d.property({readOnly:!0})],C.prototype,"graphicsTileStore",
null);k.__decorate([d.property()],C.prototype,"graphicsView",void 0);k.__decorate([d.property()],C.prototype,"stateManager",void 0);k.__decorate([d.property()],C.prototype,"constraintsInfo",null);k.__decorate([d.property({readOnly:!0})],C.prototype,"state",null);k.__decorate([d.property()],C.prototype,"initialExtentRequired",null);k.__decorate([d.property()],C.prototype,"labelManager",void 0);k.__decorate([d.property({readOnly:!0})],C.prototype,"resourceManager",null);k.__decorate([d.property({readOnly:!0})],
C.prototype,"textureManager",null);k.__decorate([d.property({readOnly:!0})],C.prototype,"mapViewNavigation",void 0);k.__decorate([d.property({constructOnly:!0})],C.prototype,"renderCanvas",void 0);k.__decorate([d.property()],C.prototype,"renderingOptions",void 0);k.__decorate([d.property({readOnly:!0})],C.prototype,"rendering",void 0);k.__decorate([d.property({constructOnly:!0})],C.prototype,"supersampleScreenshotsEnabled",void 0);k.__decorate([d.property({readOnly:!0})],C.prototype,"supportsGround",
void 0);k.__decorate([d.property()],C.prototype,"_stationaryTimer",void 0);k.__decorate([d.property()],C.prototype,"_defaultsFromMapSettings",null);k.__decorate([d.property()],C.prototype,"_pePromise",void 0);k.__decorate([d.property({readOnly:!0})],C.prototype,"typeSpecificPreconditionsReady",null);k.__decorate([d.property()],C.prototype,"animation",null);k.__decorate([d.property({type:ha})],C.prototype,"background",null);k.__decorate([d.property()],C.prototype,"center",null);k.__decorate([d.property({type:S})],
C.prototype,"constraints",null);k.__decorate([d.property()],C.prototype,"extent",null);k.__decorate([d.property()],C.prototype,"floors",void 0);k.__decorate([d.property({type:X})],C.prototype,"highlightOptions",void 0);k.__decorate([d.property({readOnly:!0})],C.prototype,"inputManager",void 0);k.__decorate([d.property()],C.prototype,"map",void 0);k.__decorate([d.property()],C.prototype,"padding",null);k.__decorate([d.property()],C.prototype,"resizeAlign",null);k.__decorate([d.property({readOnly:!0})],
C.prototype,"resolution",null);k.__decorate([d.property()],C.prototype,"rotation",null);k.__decorate([d.property()],C.prototype,"scale",null);k.__decorate([d.property({constructOnly:!0})],C.prototype,"spatialReferenceLocked",void 0);k.__decorate([d.property()],C.prototype,"stationary",null);k.__decorate([d.property({type:Z.Timeline,readOnly:!0})],C.prototype,"timeline",void 0);k.__decorate([d.property({readOnly:!0})],C.prototype,"type",void 0);k.__decorate([d.property({readOnly:!0})],C.prototype,
"updating",null);k.__decorate([d.property()],C.prototype,"viewpoint",null);k.__decorate([d.property()],C.prototype,"zoom",null);k.__decorate([d.property({readOnly:!0})],C.prototype,"navigating",null);k.__decorate([d.property(),v.cast(oa=>oa instanceof U?oa:q.ensureClass(aa,oa))],C.prototype,"ui",void 0);return C=k.__decorate([A.subclass("esri.views.MapView")],C)});