// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(p,e,r,m,h,k){m=function(q){function l(a=h.DefaultParameters.maximumDoubleClickDelay,c=h.DefaultParameters.maximumDoubleClickDistance,d=h.DefaultParameters.maximumDoubleTouchDelay,f=h.DefaultParameters.maximumDoubleTouchDistance,n=r.clock){var b=q.call(this,!1)||this;b._maximumDoubleClickDelay=a;b._maximumDoubleClickDistance=c;b._maximumDoubleTouchDelay=
d;b._maximumDoubleTouchDistance=f;b._clock=n;b._pointerState=new Map;b._immediateDoubleClick=b.registerOutgoing("immediate-double-click");b.registerIncoming("pointer-down",b._handlePointerDown.bind(e._assertThisInitialized(b)));b.registerIncoming("pointer-up",b._handlePointerUp.bind(e._assertThisInitialized(b)));return b}e._inherits(l,q);var g=l.prototype;g.onUninstall=function(){this._pointerState.forEach(a=>{a.immediateDoubleClick&&a.immediateDoubleClick.timeoutHandle.remove()});e._get(e._getPrototypeOf(l.prototype),
"onUninstall",this).call(this)};g._handlePointerDown=function(a){a=a.data;const c=k.getPointerId(a);this._pointerState.has(c)||(this._pointerState.set(c,{downButton:a.native.button,immediateDoubleClick:null}),this.startCapturingPointer(a.native))};g._handlePointerUp=function(a){const c=a.data;var d=k.getPointerId(c);if((d=this._pointerState.get(d))&&d.downButton===c.native.button){const f=d.immediateDoubleClick;if(f){f.timeoutHandle.remove();const n="touch"===a.data.native.pointerType?this._maximumDoubleTouchDistance:
this._maximumDoubleClickDistance;k.manhattanDistance(f,a.data)>n?this._startImmediateDoubleClick(a,d):(this._immediateDoubleClick.emit(a.data,void 0,f.modifiers),this._removeState(c))}else this._startImmediateDoubleClick(a,d)}};g._startImmediateDoubleClick=function(a,c){c.immediateDoubleClick={x:a.data.x,y:a.data.y,modifiers:a.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(a.data),"touch"===a.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}};
g._removeState=function(a){const c=k.getPointerId(a);this._pointerState.delete(c);this.stopCapturingPointer(a.native);this.refreshHasPendingInputs()};return e._createClass(l)}(m.InputHandler);p.ImmediateDoubleClick=m;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});