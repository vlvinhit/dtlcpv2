// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../3d/webgl-engine/core/shaderModules/interfaces ./AppleAmdDriverHelper ./BufferObject ./contextUtils ./enums ./FramebufferObject ./TextureDescriptor ./WebGLDriverTestModule".split(" "),function(k,e,l,m,q,r,t,c,u,v,h){h=function(n){function f(b){var a=n.call(this)||this;a._rctx=b;a._helperProgram=null;a._rctx.type===t.ContextType.WEBGL2&&l("mac")&&l("chrome")&&(a._program=a._prepareProgram(),a._helperProgram=a._prepareHelperProgram());
return a}e._inherits(f,n);var g=f.prototype;g.dispose=function(){e._get(e._getPrototypeOf(f.prototype),"dispose",this).call(this);this._helperProgram?.dispose();this._helperProgram=null};g._test=function(b){const a=this._rctx;a.resetState();var d=new v.TextureDescriptor(1);d.wrapMode=c.TextureWrapMode.CLAMP_TO_EDGE;d.samplingMode=c.TextureSamplingMode.NEAREST;d=new u.FramebufferObject(a,d);const p=r.BufferObject.createIndex(this._rctx,c.Usage.STATIC_DRAW,new Uint8Array([0]));a.bindFramebuffer(d);
a.setViewport(0,0,1,1);a.useProgram(this._helperProgram);a.bindBuffer(p,c.BufferType.ELEMENT_ARRAY_BUFFER);a.drawElements(c.PrimitiveType.POINTS,1,c.DataType.UNSIGNED_BYTE,0);a.useProgram(b);a.bindVAO(null);a.drawArrays(c.PrimitiveType.TRIANGLES,0,258);b=new Uint8Array(4);d.readPixels(0,0,1,1,c.PixelFormat.RGBA,c.PixelType.UNSIGNED_BYTE,b);d.dispose();p.dispose();return 255===b[0]};g._prepareProgram=function(){const b=`#version 300 es\n    precision highp float;\n\n    out float triangleId;\n\n    const vec3 triangleVertices[3] = vec3[3](vec3(-0.5, -0.5, 0.0), vec3(0.5, -0.5, 0.0), vec3(0.0, 0.5, 0.0));\n\n    void main(void) {\n      triangleId = floor(float(gl_VertexID)/3.0);\n\n      vec3 position = triangleVertices[gl_VertexID % 3];\n      float offset = triangleId / ${m.glsl.float(85)};\n      position.z = 0.5 - offset;\n\n      gl_Position = vec4(position, 1.0);\n    }\n    `,
a=`#version 300 es\n    precision highp float;\n\n    in float triangleId;\n\n    out vec4 fragColor;\n\n    void main(void) {\n      fragColor = triangleId == ${m.glsl.float(85)} ? vec4(0.0, 1.0, 0.0, 1.0) : vec4(1.0, 0.0, 0.0, 1.0);\n    }\n    `;return this._rctx.programCache.acquire(b,a,new Map([]))};g._prepareHelperProgram=function(){const b=q.AppleAmdDriverHelper.getShaderSources();return this._rctx.programCache.acquire(b.vertex,b.fragment,new Map([]))};return e._createClass(f)}(h.WebGLDriverTestModule);
k.DrawArraysRequiresIndicesTypeReset=h;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});