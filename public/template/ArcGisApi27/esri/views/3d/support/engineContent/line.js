// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../geometry/ellipsoidUtils ../../../../geometry/projection ../../../../geometry/support/DoubleArray ../../../../geometry/support/FloatArray ../../../../geometry/support/Indices ../../../ViewingMode ../../webgl-engine/lib/Attribute ../../webgl-engine/lib/ContentObjectType ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/VertexAttribute".split(" "),function(u,y,v,w,z,
A,B,x,C,D,E,l,F,G,c){const H=w.create(),I=w.create();u.createGeometry=function(n,a,r=null){const g=[],e=[],p=a.mapPositions,{attributeData:{position:f},removeDuplicateStartEnd:J}=a;var b=f.length;b=f[0]===f[b-3]&&f[1]===f[b-2]&&f[2]===f[b-1]&&J;var k=f.length/3-(b?1:0),d=Array(2*(k-1)),m=b?f.slice(0,f.length-3):f,q=0;for(var h=0;h<k-1;h++)d[q++]=h,d[q++]=h+1;e.push([c.VertexAttribute.POSITION,new l.Attribute(m,3,b)]);g.push([c.VertexAttribute.POSITION,d]);k=e[0][1].data;b=D.getZeroIndexArray(g[0][1].length);
null==a.attributeData.colorFeature&&(e.push([c.VertexAttribute.COLOR,new l.Attribute(a.attributeData.color??z.ONES,4)]),g.push([c.VertexAttribute.COLOR,b]));null==a.attributeData.sizeFeature&&(e.push([c.VertexAttribute.SIZE,new l.Attribute([a.attributeData.size??1],1,!0)]),g.push([c.VertexAttribute.SIZE,b]));null!=a.attributeData.normal&&(e.push([c.VertexAttribute.NORMAL,new l.Attribute(a.attributeData.normal,3)]),g.push([c.VertexAttribute.NORMAL,b]));null!=a.attributeData.colorFeature&&(e.push([c.VertexAttribute.COLORFEATUREATTRIBUTE,
new l.Attribute([a.attributeData.colorFeature],1,!0)]),g.push([c.VertexAttribute.COLOR,b]));null!=a.attributeData.sizeFeature&&(e.push([c.VertexAttribute.SIZEFEATUREATTRIBUTE,new l.Attribute([a.attributeData.sizeFeature],1,!0)]),g.push([c.VertexAttribute.SIZEFEATUREATTRIBUTE,b]));d=a.attributeData.opacityFeature;null!=d&&(e.push([c.VertexAttribute.OPACITYFEATUREATTRIBUTE,new l.Attribute([d],1,!0)]),g.push([c.VertexAttribute.OPACITYFEATUREATTRIBUTE,b]));if(null!=a.overlayInfo&&a.overlayInfo.renderCoordsHelper.viewingMode===
E.ViewingMode.Global&&a.overlayInfo.spatialReference.isGeographic){b=x.newDoubleArray(k.length);a=A.getReferenceEllipsoid(a.overlayInfo.spatialReference);for(d=0;d<b.length;d+=3)B.lonLatToWebMercatorComparable(k,d,b,d,a);a=k.length/3;k=C.newFloatArray(a+1);d=H;m=I;h=q=0;v.set(d,b[h++],b[h++],b[h++]);k[0]=0;for(let t=1;t<a+1;++t)t===a&&(h=0),v.set(m,b[h++],b[h++],b[h++]),q+=y.dist(d,m),k[t]=q,[d,m]=[m,d];e.push([c.VertexAttribute.DISTANCETOSTART,new l.Attribute(k,1,!0)]);g.push([c.VertexAttribute.DISTANCETOSTART,
g[0][1]])}return new G.Geometry(n,e,g,p,F.ContentObjectType.Line,r)};u.lineStripsToParameters=function(n,a){if(null==n||0===n.length)return[];const r=[];n.forEach(g=>{const e=x.newDoubleArray(3*g.length);g.forEach((p,f)=>{e[3*f]=p[0];e[3*f+1]=p[1];e[3*f+2]=p[2]});r.push({attributeData:{position:e,normal:a},removeDuplicateStartEnd:!1})});return r};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});