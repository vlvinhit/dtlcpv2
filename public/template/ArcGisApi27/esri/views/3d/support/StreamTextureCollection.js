// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/promiseUtils ../../../core/urlUtils ./TextureCollection ../webgl-engine/lib/Texture ../../webgl/enums".split(" "),function(l,m,n,u,p,v,q){let x=function(r){function h(c,a,b){a=r.call(this,a,b)||this;a._streamDataRequester=c;return a}m._inherits(h,r);var t=h.prototype;t.fromUrl=async function(c,a,b){n.throwIfAborted(b);b=null!=b?b.signal:null;const d=this.makeUid(c,a);let e=this._textureRequests.get(d);if(!e){const g=new AbortController,
w=this._streamDataRequester.request(c,"image",{uid:d,signal:g.signal});e=new p.TextureRequest;e.abortController=g;const k=e;this._textureRequests.set(d,e);e.textureAsync=w.then(async f=>{f=this._createTexture(c,f,a);k.texture=f;k.abortController=null;this._stage.add(f);await this._stage.load(f);return{uid:d,texture:f,release:()=>this._release(d)}},f=>{k.abortController=null;throw f;})}e.referenceCount++;try{return await n.whenOrAbort(e.textureAsync,b)}catch(g){throw this._release(d),g;}};t._createTexture=
function(c,a,b){const d={width:a.width,height:a.height,wrap:{s:q.TextureWrapMode.CLAMP_TO_EDGE,t:q.TextureWrapMode.CLAMP_TO_EDGE},preMultiplyAlpha:!0};if(u.isSVG(c)){if(b||0===a.width&&0===a.height)c=a.width?a.height/a.width:1,b=b||64,1<c?(a.width=Math.round(b/c),a.height=b):(a.width=b,a.height=Math.round(b*c));this._stage.renderView?.renderingContext.driverTest.svgPremultipliesAlpha.result&&(d.preMultiplyAlpha=!1)}return new v.Texture(a,d)};return m._createClass(h)}(p.TextureCollection);l.StreamTextureCollection=
x;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});