// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/mathUtils ../../../core/unitUtils ../../../chunks/mat4 ../../../chunks/vec3 ../../../core/libs/gl-matrix-2/types/vec3 ../../../geometry/projection ../../../geometry/support/Axis ../../../geometry/support/coordinateSystem ../../../geometry/support/plane ../../../geometry/support/vector ../../../geometry/support/vectorStacks ../../../layers/graphics/dehydratedFeatureUtils ../../ViewingMode".split(" "),function(p,t,u,n,v,q,w,k,m,
d,x,y,g,r,l){let z=function(){function h(a,b,c,f){this.viewingMode=a;this.spatialReference=b;this.unitInMeters=c;this._coordinateSystem=f;this._tmpCoordinateSystem=d.create(f)}var e=h.prototype;e.getAltitude=function(a){return d.altitudeAt(this._coordinateSystem,a)};e.setAltitude=function(a,b,c=a){return d.setAltitudeAt(this._coordinateSystem,c,b,a)};e.setAltitudeOfTransformation=function(a,b){d.setAltitudeOfTransformation(this._coordinateSystem,b,a,b)};e.worldUpAtPosition=function(a,b){return d.normalAt(this._coordinateSystem,
a,b)};e.worldBasisAtPosition=function(a,b,c){return d.axisAt(this._coordinateSystem,a,b,c)};e.basisMatrixAtPosition=function(a,b){const c=this.worldBasisAtPosition(a,m.Axis.X,g.sv3d.get()),f=this.worldBasisAtPosition(a,m.Axis.Y,g.sv3d.get());a=this.worldBasisAtPosition(a,m.Axis.Z,g.sv3d.get());v.set(b,c[0],c[1],c[2],0,f[0],f[1],f[2],0,a[0],a[1],a[2],0,0,0,0,1);return b};e.headingAtPosition=function(a,b){const c=this.worldUpAtPosition(a,g.sv3d.get());a=this.worldBasisAtPosition(a,m.Axis.Y,g.sv3d.get());
b=y.angleAroundAxis(b,a,c);return u.rad2deg(b)};e.intersectManifoldClosestSilhouette=function(a,b,c){d.elevate(this._coordinateSystem,b,this._tmpCoordinateSystem);d.intersectRayClosestSilhouette(this._tmpCoordinateSystem,a,c);return c};e.intersectManifold=function(a,b,c){d.elevate(this._coordinateSystem,b,this._tmpCoordinateSystem);b=g.sv3d.get();return d.intersectRay(this._tmpCoordinateSystem,a,b)?q.copy(c,b):null};e.intersectInfiniteManifold=function(a,b,c){if(this.viewingMode===l.ViewingMode.Global)return this.intersectManifold(a,
b,c);d.elevate(this._coordinateSystem,b,this._tmpCoordinateSystem);b=this._tmpCoordinateSystem.value;const f=g.sv3d.get();return x.intersectRay(b.plane,a,f)?q.copy(c,f):null};e.toRenderCoords=function(a,b,c){return r.isDehydratedPoint(a)?k.projectPointToVector(a,b,this.spatialReference):k.projectVectorToVector(a,b,c,this.spatialReference)};e.fromRenderCoords=function(a,b,c=null){return r.isDehydratedPoint(b)?(null!=c&&(b.spatialReference=c),k.projectVectorToDehydratedPoint(a,this.spatialReference,
b)):w.isVec3(b)?k.projectVectorToVector(a,this.spatialReference,b,c)?b:null:k.projectVectorToPoint(a,this.spatialReference,b)};h.create=function(a,b){switch(a){case l.ViewingMode.Local:return new h(l.ViewingMode.Local,b,n.getMetersPerUnitForSR(b),d.createLocal());case l.ViewingMode.Global:return new h(l.ViewingMode.Global,b,1,d.createGlobal(b))}};h.renderUnitScaleFactor=function(a,b){return n.getMetersPerCartesianUnitForSR(a)/n.getMetersPerCartesianUnitForSR(b)};t._createClass(h,[{key:"extent",set:function(a){a&&
d.setExtent(this._coordinateSystem,a,this._coordinateSystem)}}]);return h}();p.RenderCoordsHelper=z;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});