// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(p,l){let B=function(){function u(h,g,b){this._scale=h;this._shift=g;this._levelShift=b}var n=u.prototype;n.getLevelRowColumn=function(h){const g=this.getLevelShift(h[0]),b=this._shift+g;return b?[h[0]-g,h[1]>>b,h[2]>>b]:h};n.getLevelShift=function(h){return Math.min(h,this._levelShift)};n.getOffset=function(h,g){let b=0;var e=0;const c=this._shift+this.getLevelShift(h[0]);
c&&(e=(1<<c)-1,g/=this._scale*(1<<c-1),b=(h[2]&e)*g,e=(h[1]&e)*g);return[b,e]};n.getScale=function(h){return this._scale*(1<<this._shift+this.getLevelShift(h))};return l._createClass(u)}();p.SchemaHelper=B;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/TileHandler3D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/MemCache ../../../../core/promiseUtils ../../../../chunks/mat3f32 ../../../../geometry/support/aaBoundingRect ./TileHandler ./VectorTile ./decluttering/jobsUtil ../../tiling/TileInfoViewPOT ../../tiling/TileKey".split(" "),
function(p,l,B,u,n,h,g,b,e,c){return function(f){function a(q,m,r,v){m=f.call(this,q,m,r)||this;m._memCache=v;m._ongoingTileRequests=new Map;m._ongoingRequestToController=new Map;m._tileInfoView=new e(q.tileInfo,q.fullExtent);return m}p._inherits(a,f);var d=a.prototype;d.destroy=function(){p._get(p._getPrototypeOf(a.prototype),"destroy",this).call(this);this._ongoingRequestToController.forEach(q=>q.abort());this._ongoingRequestToController.clear();this._ongoingTileRequests.clear()};d.getVectorTile=
async function(q,m,r,v){m=new c(q,m,r,0);let w=this._memCache.get(m.id);if(null!=w)return w.retain(),w;r=await this._getVectorTileData(m);B.throwIfAborted(v);if(!this._layer)return null;w=this._memCache.get(m.id);if(null!=w)return w.retain(),w;v=this._layer.tileInfo.getTileBounds(n.create(),m);q=this._tileInfoView.getTileResolution(q);w=new g.VectorTile(m,q,v[0],v[3],512,512,this._styleRepository,this._memCache);r?(w.setData(r),w.retain(),this._memCache.put(m.id,w,w.memoryUsed,l.MIN_PRIORITY)):w.setData(null);
w.neededForCoverage=!0;w.transforms.tileUnitsToPixels=u.fromValues(.125,0,0,0,.125,0,0,0,1);b.declutterSingleTile(w);return w};d._getVectorTileData=function(q){const m=q.id;if(this._ongoingTileRequests.has(m))return this._ongoingTileRequests.get(m);const r=new AbortController;q=this._getParsedVectorTileData(q,{signal:r.signal}).then(v=>{this._ongoingTileRequests.delete(m);this._ongoingRequestToController.delete(m);return v}).catch(()=>{this._ongoingTileRequests.delete(m);this._ongoingRequestToController.delete(m);
return null});this._ongoingTileRequests.set(m,q);this._ongoingRequestToController.set(m,r);return q};d._getParsedVectorTileData=function(q,m){return this.fetchTileData(q,m).then(r=>this.parseTileData({key:q,data:r},m))};return p._createClass(a)}(h.TileHandler)})},"esri/views/2d/engine/vectorTiles/TileHandler":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../core/workers/workers ./GlyphMosaic ./GlyphSource ./SpriteMosaic ../../tiling/TileKey".split(" "),
function(p,l,B,u,n,h,g,b,e,c){function f(d){return()=>d.abort()}let a=function(){function d(m,r,v){this._layer=m;this._styleRepository=r;this.devicePixelRatio=v;this._inputSignalEventListener=this._startOptionsInputSignal=this._spriteSourceAbortController=this._connection=this._glyphMosaic=this._spriteMosaic=null}var q=d.prototype;q.destroy=function(){this._connection?.close();this._glyphMosaic=this._spriteMosaic=this._layer=this._styleRepository=this._connection=null;this._spriteSourceAbortController=
B.abortMaybe(this._spriteSourceAbortController);this._spriteSourcePromise=null;this._inputSignalEventListener&&this._startOptionsInputSignal?.removeEventListener("abort",this._inputSignalEventListener);this._inputSignalEventListener=this._startOptionsInputSignal=null};q.start=async function(m){this._requestSprite(m);var r=this._layer.currentStyleInfo.glyphsUrl;r=new b(r?n.addQueryParameters(r,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new g(1024,1024,r);this._broadcastPromise=
h.open("WorkerTileHandler",{client:this,schedule:m.schedule,signal:m.signal}).then(v=>{this._layer&&(this._connection?.close(),this._connection=v,this._layer&&!this._connection.closed&&(v=v.broadcast("setStyle",this._layer.currentStyleInfo.style,m),Promise.all(v).catch(w=>u.throwIfNotAbortError(w))))})};q._requestSprite=function(m){this._spriteSourceAbortController?.abort();const r=new AbortController;this._spriteSourceAbortController=r;const v=m?.signal;this._inputSignalEventListener&&this._startOptionsInputSignal?.removeEventListener("abort",
this._inputSignalEventListener);this._startOptionsInputSignal=null;v&&(this._inputSignalEventListener=f(r),v.addEventListener("abort",this._inputSignalEventListener,{once:!0}));const {signal:w}=r;this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,{...m,signal:w});this._spriteSourcePromise.then(D=>{u.throwIfAbortError(w);this._spriteMosaic=new e(1024,1024,250);this._spriteMosaic.setSpriteSource(D)})};q.updateStyle=async function(m){await this._broadcastPromise;return this._broadcastPromise=
Promise.all(this._connection.broadcast("updateStyle",m))};q.setSpriteSource=function(m){const r=new e(1024,1024,250);r.setSpriteSource(m);this._spriteMosaic=r;this._spriteSourcePromise=Promise.resolve(m);this._spriteSourceAbortController=null;return r};q.setStyle=async function(m,r){await this._broadcastPromise;this._styleRepository=m;this._requestSprite();m=new b(this._layer.currentStyleInfo.glyphsUrl?n.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):
null);this._glyphMosaic=new g(1024,1024,m);return this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",r))};q.fetchTileData=function(m,r){return this._getRefKeys(m,r).then(v=>{const w=this._layer.sourceNameToSource,D=[];for(const C in w)D.push(C);return this._getSourcesData(D,v,r)})};q.parseTileData=function(m,r){const v=m&&m.data;if(!v)return Promise.resolve(null);const {sourceName2DataAndRefKey:w,transferList:D}=v;return 0===Object.keys(w).length?Promise.resolve(null):this._broadcastPromise.then(()=>
this._connection.invoke("createTileAndParse",{key:m.key.id,sourceName2DataAndRefKey:w,styleLayerUIDs:m.styleLayerUIDs},{...r,transferList:D}))};q.getSprites=async function(m){await this._spriteSourcePromise;return this._spriteMosaic.getSpriteItems(m)};q.getGlyphs=function(m){return this._glyphMosaic.getGlyphItems(m.font,m.codePoints)};q._getTilePayload=async function(m,r,v){m=c.pool.acquire(m.id);const w=this._layer.sourceNameToSource[r],{level:D,row:C,col:E}=m;c.pool.release(m);try{return{protobuff:await w.requestTile(D,
C,E,v),sourceName:r}}catch(F){if(u.isAbortError(F))throw F;return{protobuff:null,sourceName:r}}};q._getRefKeys=function(m,r){const v=this._layer.sourceNameToSource,w=[];for(const D in v){const C=v[D].getRefKey(m,r);w.push(C)}return u.eachAlways(w)};q._getSourcesData=function(m,r,v){const w=[];for(let D=0;D<r.length;D++)if(null==r[D].value||null==m[D])w.push(null);else{const C=this._getTilePayload(r[D].value,m[D],v);w.push(C)}return u.eachAlways(w).then(D=>{const C={},E=[];for(let F=0;F<D.length;F++){const y=
D[F].value;y&&y.protobuff&&0<y.protobuff.byteLength&&(C[y.sourceName]={refKey:r[F].value.id,protobuff:y.protobuff},E.push(y.protobuff))}return{sourceName2DataAndRefKey:C,transferList:E}})};l._createClass(d,[{key:"spriteMosaic",get:function(){return this._spriteSourcePromise.then(()=>this._spriteMosaic)}},{key:"glyphMosaic",get:function(){return this._glyphMosaic}}]);return d}();p.TileHandler=a;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GlyphMosaic":function(){define("../../../../chunks/_rollupPluginBabelHelpers ./RectangleBinPack ../webgl/Rect ../../../webgl/enums ../../../webgl/Texture ../../../webgl/TextureDescriptor".split(" "),
function(p,l,B,u,n,h){return function(){function g(e,c,f){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=e;this.height=c;this._glyphSource=f;this._binPack=new l(e-4,c-4);this._glyphData.push(new Uint8Array(e*c));this._dirties.push(!0);this._textures.push(void 0)}var b=g.prototype;b.getGlyphItems=function(e,c){const f=[],a=this._glyphSource,d=new Set,q=1/256;for(const r of c)d.add(Math.floor(r*
q));const m=[];d.forEach(r=>{const v=e+r;this._rangePromises.has(v)?m.push(this._rangePromises.get(v)):(r=a.getRange(e,r).then(()=>{this._rangePromises["delete"](v)},()=>{this._rangePromises["delete"](v)}),this._rangePromises.set(v,r),m.push(r))});return Promise.all(m).then(()=>{let r=this._glyphIndex[e];r||(r={},this._glyphIndex[e]=r);for(const E of c){var v=r[E];if(v){f[E]={sdf:!0,rect:v.rect,metrics:v.metrics,page:v.page,code:E};continue}var w=a.getGlyph(e,E);if(!w||!w.metrics)continue;v=w.metrics;
let F;if(0===v.width)F=new B(0,0,0,0);else{const y=v.width+6,z=v.height+6;var D=y%4?4-y%4:4,C=z%4?4-z%4:4;1===D&&(D=5);1===C&&(C=5);F=this._binPack.allocate(y+D,z+C);F.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new l(this.width-4,this.height-4),F=this._binPack.allocate(y+D,z+C));D=this._glyphData[this._currentPage];
w=w.bitmap;let I;if(w)for(let J=0;J<z;J++){C=y*J;I=this.width*(F.y+J+1)+F.x;for(let K=0;K<y;K++)D[I+K+1]=w[C+K]}}r[E]={rect:F,metrics:v,tileIDs:null,page:this._currentPage};f[E]={sdf:!0,rect:F,metrics:v,page:this._currentPage,code:E};this._dirties[this._currentPage]=!0}return f})};b.removeGlyphs=function(e){for(const c in this._glyphIndex){const f=this._glyphIndex[c];if(!f)continue;let a;for(const d in f)if(a=f[d],a.tileIDs["delete"](e),0===a.tileIDs.size){const q=this._glyphData[a.page],m=a.rect;
let r,v;for(let w=0;w<m.height;w++)for(r=this.width*(m.y+w)+m.x,v=0;v<m.width;v++)q[r+v]=0;delete f[d];this._dirties[a.page]=!0}}};b.bind=function(e,c,f,a=0){if(!this._textures[f]){var d=new h.TextureDescriptor;d.pixelFormat=u.PixelFormat.ALPHA;d.wrapMode=u.TextureWrapMode.CLAMP_TO_EDGE;d.width=this.width;d.height=this.height;this._textures[f]=new n.Texture(e,d,new Uint8Array(this.width*this.height))}d=this._textures[f];d.setSamplingMode(c);this._dirties[f]&&d.setData(this._glyphData[f]);e.bindTexture(d,
a);this._dirties[f]=!1};b.dispose=function(){this._binPack=null;for(const e of this._textures)e&&e.dispose();this._textures.length=0};return p._createClass(g)}()})},"esri/views/2d/engine/vectorTiles/RectangleBinPack":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../webgl/Rect"],function(p,l){return function(){function B(n,h){this._height=this._width=0;this._free=[];this._width=n;this._height=h;this._free.push(new l(0,0,n,h))}var u=B.prototype;u.allocate=function(n,h){if(n>this._width||
h>this._height)return new l;let g=null,b=-1;for(let e=0;e<this._free.length;++e){const c=this._free[e];n<=c.width&&h<=c.height&&(null===g||c.y<=g.y&&c.x<=g.x)&&(g=c,b=e)}if(null===g)return new l;this._free.splice(b,1);g.width<g.height?(g.width>n&&this._free.push(new l(g.x+n,g.y,g.width-n,h)),g.height>h&&this._free.push(new l(g.x,g.y+h,g.width,g.height-h))):(g.width>n&&this._free.push(new l(g.x+n,g.y,g.width-n,g.height)),g.height>h&&this._free.push(new l(g.x,g.y+h,n,g.height-h)));return new l(g.x,
g.y,n,h)};u.release=function(n){for(let h=0;h<this._free.length;++h){const g=this._free[h];if(g.y===n.y&&g.height===n.height&&g.x+g.width===n.x)g.width+=n.width;else if(g.x===n.x&&g.width===n.width&&g.y+g.height===n.y)g.height+=n.height;else if(n.y===g.y&&n.height===g.height&&n.x+n.width===g.x)g.x=n.x,g.width+=n.width;else if(n.x===g.x&&n.width===g.width&&n.y+n.height===g.y)g.y=n.y,g.height+=n.height;else continue;this._free.splice(h,1);this.release(n)}this._free.push(n)};p._createClass(B,[{key:"width",
get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);return B}()})},"esri/views/2d/engine/webgl/Rect":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function l(B=0,u=0,n=0,h=0){this.x=B;this.y=u;this.width=n;this.height=h}l.prototype.union=function(B){this.x=Math.min(this.x,B.x);this.y=Math.min(this.y,B.y);this.width=Math.max(this.width,B.width);this.height=Math.max(this.height,B.height)};p._createClass(l,[{key:"isEmpty",
get:function(){return 0>=this.width||0>=this.height}}]);return l}()})},"esri/views/2d/engine/vectorTiles/GlyphSource":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../request","../../../../core/pbf"],function(p,l,B){let u=function(){function h(b){this._metrics=[];this._bitmaps=[];if(b)for(;b.next();)switch(b.tag()){case 1:const e=b.getMessage();for(;e.next();)switch(e.tag()){case 3:const c=e.getMessage();let f,a,d,q,m,r,v;for(;c.next();)switch(c.tag()){case 1:f=c.getUInt32();
break;case 2:a=c.getBytes();break;case 3:d=c.getUInt32();break;case 4:q=c.getUInt32();break;case 5:m=c.getSInt32();break;case 6:r=c.getSInt32();break;case 7:v=c.getUInt32();break;default:c.skip()}c.release();f&&(this._metrics[f]={width:d,height:q,left:m,top:r,advance:v},this._bitmaps[f]=a);break;default:e.skip()}e.release();break;default:b.skip()}}var g=h.prototype;g.getMetrics=function(b){return this._metrics[b]};g.getBitmap=function(b){return this._bitmaps[b]};return p._createClass(h)}(),n=function(){function h(){this._ranges=
[]}var g=h.prototype;g.getRange=function(b){return this._ranges[b]};g.addRange=function(b,e){this._ranges[b]=e};return p._createClass(h)}();return function(){function h(b){this._glyphInfo={};this._baseURL=b}var g=h.prototype;g.getRange=function(b,e){const c=this._getFontStack(b);if(c.getRange(e))return Promise.resolve();const f=256*e,a=f+255;if(this._baseURL)return b=this._baseURL.replace("{fontstack}",b).replace("{range}",f+"-"+a),l(b,{responseType:"array-buffer"}).then(d=>{c.addRange(e,new u(new B(new Uint8Array(d.data),
new DataView(d.data))))}).catch(()=>{c.addRange(e,new u)});c.addRange(e,new u);return Promise.resolve()};g.getGlyph=function(b,e){if(b=this._getFontStack(b))if(b=b.getRange(Math.floor(e/256)))return{metrics:b.getMetrics(e),bitmap:b.getBitmap(e)}};g._getFontStack=function(b){let e=this._glyphInfo[b];e||(e=this._glyphInfo[b]=new n);return e};return p._createClass(h)}()})},"esri/views/2d/engine/vectorTiles/SpriteMosaic":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../symbols/cim/rasterizingUtils ./RectangleBinPack ../webgl/Rect ../../../webgl/enums ../../../webgl/Texture ../../../webgl/TextureDescriptor".split(" "),
function(p,l,B,u,n,h,g){return function(){function b(c,f,a=0){this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;(0>=c||0>=f)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=c;this._pageHeight=f;0<a&&(this._maxItemSize=a);this._binPack=new B(c-4,f-4)}var e=b.prototype;e.dispose=function(){this._binPack=null;this._mosaicRects=
{};for(const c of this._textures)c&&c.dispose();this._textures.length=0};e.getWidth=function(c){return c>=this._size.length?-1:this._size[c][0]};e.getHeight=function(c){return c>=this._size.length?-1:this._size[c][1]};e.getPageSize=function(c){return c>=this._size.length?null:this._size[c]};e.setSpriteSource=function(c){this.dispose();this.pixelRatio=c.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new B(this._pageWidth-4,this._pageHeight-4);const f=new Uint32Array(Math.floor(this._pageWidth)*
Math.floor(this._pageHeight));this._mosaicsData[0]=f;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=c};e.getSpriteItem=function(c,f=!1){var a=this._mosaicRects[c];if(a)return a;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;let d;c&&c.startsWith("dasharray-")?([a,d]=this._rasterizeDash(c),f=!0):a=this._sprites.getSpriteInfo(c);if(!a||!a.width||!a.height||0>a.width||0>a.height)return null;const q=a.width,m=a.height,
[r,v,w]=this._allocateImage(q,m);if(0>=r.width)return null;this._copy(r,a,v,w,f,d);a={rect:r,width:q,height:m,sdf:a.sdf,simplePattern:!1,pixelRatio:a.pixelRatio,page:v};return this._mosaicRects[c]=a};e.getSpriteItems=function(c){const f={};for(const a of c)f[a.name]=this.getSpriteItem(a.name,a.repeat);return f};e.getMosaicItemPosition=function(c,f){f=(c=this.getSpriteItem(c,f))&&c.rect;if(!f)return null;f.width=c.width;f.height=c.height;return{tl:[f.x+2,f.y+2],br:[f.x+2+c.width,f.y+2+c.height],page:c.page}};
e.bind=function(c,f,a=0,d=0){if(!(a>=this._size.length||a>=this._mosaicsData.length)){if(!this._textures[a]){var q=new g.TextureDescriptor;q.wrapMode=n.TextureWrapMode.CLAMP_TO_EDGE;q.width=this._size[a][0];q.height=this._size[a][1];this._textures[a]=new h.Texture(c,q,new Uint8Array(this._mosaicsData[a].buffer))}q=this._textures[a];q.setSamplingMode(f);this._dirties[a]&&q.setData(new Uint8Array(this._mosaicsData[a].buffer));c.bindTexture(q,d);this._dirties[a]=!1}};b._copyBits=function(c,f,a,d,q,m,
r,v,w,D,C){let E=d*f+a;r=v*m+r;if(C)for(r-=m,C=-1;C<=D;C++,E=((C+D)%D+d)*f+a,r+=m)for(v=-1;v<=w;v++)q[r+v]=c[E+(v+w)%w];else for(a=0;a<D;a++){for(d=0;d<w;d++)q[r+d]=c[E+d];E+=f;r+=m}};e._copy=function(c,f,a,d,q,m){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(a>=this._mosaicsData.length)){var r=new Uint32Array(m?m.buffer:this._sprites.image.buffer),v=this._mosaicsData[a];v&&r||console.error("Source or target images are uninitialized!");b._copyBits(r,m?f.width:this._sprites.width,f.x,f.y,
v,d[0],c.x+2,c.y+2,f.width,f.height,q);this._dirties[a]=!0}};e._allocateImage=function(c,f){c+=2;f+=2;var a=Math.max(c,f);if(this._maxItemSize&&this._maxItemSize<a)return a=new u(0,0,c,f),this._mosaicsData.push(new Uint32Array(c*f)),this._dirties.push(!0),this._size.push([c,f]),this._textures.push(void 0),[a,this._mosaicsData.length-1,[c,f]];a=c%4?4-c%4:4;let d=f%4?4-f%4:4;1===a&&(a=5);1===d&&(d=5);a=this._binPack.allocate(c+a,f+d);return 0>=a.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=
null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new B(this._pageWidth-4,this._pageHeight-4),this._allocateImage(c,f)):[a,this._currentPage,[this._pageWidth,this._pageHeight]]};e._rasterizeDash=function(c){var f=c.match(/\[(.*?)\]/);if(!f)return null;f=f[1].split(",").map(Number);c=c.slice(c.lastIndexOf("-")+
1);const [a,d,q]=l.rasterizeDash(f,c);c=new Uint8Array(a.buffer);return[{x:0,y:0,width:d,height:q,sdf:!0,pixelRatio:1},c]};return p._createClass(b)}()})},"esri/symbols/cim/rasterizingUtils":function(){define(["exports","../../core/floatRGBA","../../core/mathUtils"],function(p,l,B){p.rasterizeDash=function(u,n){var h="Butt"===n,g="Square"===n;n=!h&&!g;1===u.length%2&&(u=[...u,...u]);var b=0;for(var e of u)b+=e;e=Math.round(15.5*b);b=new Float32Array(31*e);let c=0,f=0,a=.5,d=!0;for(var q of u){c=f;
for(f+=15.5*q;a<=f;){for(u=.5;31>u;){const m=n?(u-15.5)*(u-15.5):Math.abs(u-15.5);b[(u-.5)*e+a-.5]=d?h?Math.max(Math.max(c+7.75-a,m),Math.max(a-f+7.75,m)):m:n?Math.min((a-c)*(a-c)+m,(a-f)*(a-f)+m):g?Math.min(Math.max(a-c,m),Math.max(f-a,m)):Math.min(Math.max(a-c+7.75,m),Math.max(f+7.75-a,m));u++}a++}d=!d}h=b.length;q=new Uint8Array(4*h);for(g=0;g<h;++g)l.packFloatRGBA((n?Math.sqrt(b[g]):b[g])/15.5,q,4*g);return[q,e,31]};p.rasterizeSimpleFill=function(u,n,h){h=B.nextPowerOfTwo(Math.ceil(h));var g=
"vertical"===n||"horizontal"===n||"cross"===n||"esriSFSCross"===n||"esriSFSVertical"===n||"esriSFSHorizontal"===n?8*h:16*h;const b=2*h;u.width=g;u.height=g;const e=u.getContext("2d");e.strokeStyle="#FFFFFF";e.lineWidth=h;e.beginPath();if("vertical"===n||"cross"===n||"esriSFSCross"===n||"esriSFSVertical"===n)e.moveTo(g/2,-b),e.lineTo(g/2,g+b);if("horizontal"===n||"cross"===n||"esriSFSCross"===n||"esriSFSHorizontal"===n)e.moveTo(-b,g/2),e.lineTo(g+b,g/2);if("forward-diagonal"===n||"diagonal-cross"===
n||"esriSFSDiagonalCross"===n||"esriSFSForwardDiagonal"===n)e.moveTo(-b,-b),e.lineTo(g+b,g+b),e.moveTo(g-b,-b),e.lineTo(g+b,b),e.moveTo(-b,g-b),e.lineTo(b,g+b);if("backward-diagonal"===n||"diagonal-cross"===n||"esriSFSBackwardDiagonal"===n||"esriSFSDiagonalCross"===n)e.moveTo(g+b,-b),e.lineTo(-b,g+b),e.moveTo(b,-b),e.lineTo(-b,b),e.moveTo(g+b,g-b),e.lineTo(g-b,g+b);e.stroke();n=e.getImageData(0,0,u.width,u.height);n=new Uint8Array(n.data);for(g=0;g<n.length;g+=4)h=n[g+3]/255,n[g]*=h,n[g+1]*=h,n[g+
2]*=h;return[n,u.width,u.height]};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/jobsUtil":function(){define("exports ./core ./jobs ./SymbolDeclutterer ./SymbolRepository ./util ../style/StyleDefinition".split(" "),function(p,l,B,u,n,h,g){p.declutterSingleTile=function(b){const e=[],c=new n.SymbolRepository(4096,e,()=>{const a=new l.VTLUniqueSymbol;a.show=!1;a.parts.push({startTime:0,startOpacity:0,targetOpacity:0,show:!1});a.parts.push({startTime:0,
startOpacity:0,targetOpacity:0,show:!1});return a}),f=new u.SymbolDeclutterer(e,c,(a,d,q)=>new B.CollisionJob(a,d,q,b.styleRepository,b.key.level,0),(a,d)=>{h.writeOpacityToBuffers(a,d,!1)},()=>0,a=>(a=b.styleRepository.getStyleLayerByUID(a).getLayoutProperty("visibility"))&&a.getValue()===g.Visibility.NONE?!1:!0);e.push(b);c.add(b);f.setScreenSize(512,512);f.continue(Infinity)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/jobs":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/mat3f32 ./config ./util ../style/StyleDefinition".split(" "),
function(p,l,B,u,n,h){let g=function(){function b(c,f,a,d,q,m){this._symbols=c;this._styleRepository=d;this._zoom=q;this._currentSymbolCursor=this._currentLayerCursor=0;this._styleProps=new Map;this._allNeededMatrices=new Map;this._gridIndex=new n.GridIndex(f,a,u.COLLISION_GRID_CELL_SIZE);this._si=Math.sin(Math.PI*m/180);this._co=Math.cos(Math.PI*m/180);for(const r of c)for(const v of r.symbols)this._allNeededMatrices.has(v.tile)||this._allNeededMatrices.set(v.tile,B.clone(v.tile.transforms.tileUnitsToPixels))}
var e=b.prototype;e.work=function(c){const f=this._gridIndex,a=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const y=this._symbols[this._currentLayerCursor],z=this._getProperties(y.styleLayerUID);for(;this._currentSymbolCursor<y.symbols.length;this._currentSymbolCursor++){if(99===this._currentSymbolCursor%100&&performance.now()-a>c)return!1;var d=y.symbols[this._currentSymbolCursor];if(!d.unique.show)continue;var q=d,m=
this._si,r=this._co,v=this._allNeededMatrices.get(d.tile),w=this._zoom;const {iconRotationAlignment:I,textRotationAlignment:J,iconTranslate:K,iconTranslateAnchor:S,textTranslate:M,textTranslateAnchor:O}=z;var D=0;for(const L of q.colliders){const [U,X]=0===L.partIndex?K:M;var C=0===L.partIndex?S:O,E=L.minLod<=w&&w<=L.maxLod;D+=E?0:1;L.enabled=E;L.xScreen=L.xTile*v[0]+L.yTile*v[3]+v[6];L.yScreen=L.xTile*v[1]+L.yTile*v[4]+v[7];C===h.TranslateAnchor.MAP?(L.xScreen+=r*U-m*X,L.yScreen+=m*U+r*X):(L.xScreen+=
U,L.yScreen+=X);h.RotationAlignment.VIEWPORT===(0===L.partIndex?I:J)?(L.dxScreen=L.dxPixels,L.dyScreen=L.dyPixels):(L.dxScreen=r*(L.dxPixels+L.width/2)-m*(L.dyPixels+L.height/2)-L.width/2,L.dyScreen=m*(L.dxPixels+L.width/2)+r*(L.dyPixels+L.height/2)-L.height/2)}0<q.colliders.length&&D===q.colliders.length&&(q.unique.show=!1);q=d.unique;if(!q.show)continue;const {iconAllowOverlap:T,iconIgnorePlacement:N,textAllowOverlap:P,textIgnorePlacement:R}=z;for(const L of d.colliders)if(L.enabled&&(m=q.parts[L.partIndex],
m.show)){if(r=!(L.partIndex?P:T))a:{r=L.xScreen+L.dxScreen;v=L.yScreen+L.dyScreen;w=r+L.width;D=v+L.height;const [U,X,Z,da]=f.getCellSpan(r,v,w,D);for(C=X;C<=da;C++)for(E=U;E<=Z;E++){var F=f.cells[C][E];for(const ca of F){F=ca.xScreen+ca.dxScreen;const W=ca.yScreen+ca.dyScreen,ea=F+ca.width,ia=W+ca.height;if(!(w<F||r>ea||D<W||v>ia)){r=!0;break a}}}r=!1}r&&(L.hard?q.show=!1:m.show=!1)}if(q.show)for(const L of d.colliders){if(!L.enabled)continue;if(L.partIndex?R:N)continue;if(!q.parts[L.partIndex].show)continue;
d=L.xScreen+L.dxScreen;m=L.yScreen+L.dyScreen;const [U,X,Z,da]=this._gridIndex.getCellSpan(d,m,d+L.width,m+L.height);for(d=X;d<=da;d++)for(m=U;m<=Z;m++)this._gridIndex.cells[d][m].push(L)}}}return!0};e._getProperties=function(c){var f=this._styleProps.get(c);if(f)return f;f=this._zoom;const a=this._styleRepository.getStyleLayerByUID(c);var d=a.getLayoutValue("symbol-placement",f)!==h.SymbolPlacement.POINT;let q=a.getLayoutValue("icon-rotation-alignment",f);q===h.RotationAlignment.AUTO&&(q=d?h.RotationAlignment.MAP:
h.RotationAlignment.VIEWPORT);let m=a.getLayoutValue("text-rotation-alignment",f);m===h.RotationAlignment.AUTO&&(m=d?h.RotationAlignment.MAP:h.RotationAlignment.VIEWPORT);d=a.getPaintValue("icon-translate",f);const r=a.getPaintValue("icon-translate-anchor",f),v=a.getPaintValue("text-translate",f),w=a.getPaintValue("text-translate-anchor",f);f={iconAllowOverlap:a.getLayoutValue("icon-allow-overlap",f),iconIgnorePlacement:a.getLayoutValue("icon-ignore-placement",f),textAllowOverlap:a.getLayoutValue("text-allow-overlap",
f),textIgnorePlacement:a.getLayoutValue("text-ignore-placement",f),iconRotationAlignment:q,textRotationAlignment:m,iconTranslateAnchor:r,iconTranslate:d,textTranslateAnchor:w,textTranslate:v};this._styleProps.set(c,f);return f};return l._createClass(b)}();p.CollisionJob=g;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./config"],function(p,
l,B){function u(h,g){if(h.priority-g.priority)return h.priority-g.priority;const b=h.tile.key,e=g.tile.key;return b.world-e.world?b.world-e.world:b.level-e.level?b.level-e.level:b.row-e.row?b.row-e.row:b.col-e.col?b.col-e.col:h.xTile-g.xTile?h.xTile-g.xTile:h.yTile-g.yTile}let n=function(){function h(b,e,c,f,a,d){this._visibleTiles=b;this._symbolRepository=e;this._createCollisionJob=c;this._assignTileSymbolsOpacity=f;this._symbolLayerSorter=a;this._isLayerVisible=d;this._selectionJob=null;this._selectionJobCompleted=
!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0}var g=h.prototype;g.setScreenSize=function(b,e){this._screenWidth===b&&this._screenHeight===e||this.restart();this._screenWidth=b;this._screenHeight=e};g.restart=function(){this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0};g.continue=function(b){this._selectionJob||
(this._selectionJob=this._createSelectionJob());if(!this._selectionJobCompleted){var e=performance.now();if(!this._selectionJob.work(b))return!1;this._selectionJobCompleted=!0;b=Math.max(0,b-(performance.now()-e));if(0===b)return!1}this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight));if(!this._collisionJobCompleted){e=performance.now();if(!this._collisionJob.work(b))return!1;this._collisionJobCompleted=!0;b=Math.max(0,
b-(performance.now()-e));if(0===b)return!1}this._opacityJob||(this._opacityJob=this._createOpacityJob());if(!this._opacityJobCompleted){e=performance.now();if(!this._opacityJob.work(b))return!1;this._opacityJobCompleted=!0;b=Math.max(0,b-(performance.now()-e));if(0===b)return!1}this._running=!1;return!0};g._createSelectionJob=function(){const b=this._symbolRepository.uniqueSymbols;for(let q=0;q<b.length;q++){const m=b[q];for(let r=0;r<m.uniqueSymbols.length;r++){const v=m.uniqueSymbols[r];for(const w of v.tileSymbols)w.selectedForRendering=
!1}}const e=[];let c=0,f=0;const a=this._isLayerVisible,d=this._symbolLayerSorter;return{work:function(q){const m=performance.now();for(;f<b.length;f++,c=0){const v=b[f];var r=v.styleLayerUID;if(!a(r)){e[f]||(e[f]={styleLayerUID:r,symbols:[]});continue}e[f]=e[f]||{styleLayerUID:r,symbols:[]};const w=e[f];for(;c<v.uniqueSymbols.length;c++){r=v.uniqueSymbols[c];if(99===c%100&&performance.now()-m>q)return!1;let D=null,C=!1,E=!1;for(const F of r.tileSymbols)if(!E||!C){const y=F.tile;if(!D||y.isCoverage||
y.neededForCoverage&&!C){D=F;if(y.neededForCoverage||y.isCoverage)E=!0;y.isCoverage&&(C=!0)}}D.selectedForRendering=!0;if(E){w.symbols.push(D);r.show=!0;for(const F of r.parts)F.show=!0}else r.show=!1}}for(const v of e)v.symbols.sort(u);return!0},get sortedSymbols(){return e.sort(d)}}};g._createOpacityJob=function(){function b(a,d){var q=a.symbols;for(const [,r]of q){var m=r;q=d;for(const v of m){m=v.unique;for(const w of m.parts)w.startOpacity+=(q-w.startTime)/B.FADE_DURATION*(.5<w.targetOpacity?
1:-1),w.startOpacity=Math.min(Math.max(w.startOpacity,0),1),w.startTime=q,w.targetOpacity=m.show&&w.show?1:0}}e(a,d);for(const r of a.childrenTiles)b(r,d)}const e=this._assignTileSymbolsOpacity,c=this._visibleTiles;let f=0;return{work(a){const d=performance.now();for(;f<c.length;f++){if(performance.now()-d>a)return!1;const q=c[f];if(null!=q.parentTile)continue;const m=performance.now();b(q,m)}return!0}}};l._createClass(h,[{key:"running",get:function(){return this._running}}]);return h}();p.SymbolDeclutterer=
n;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolRepository":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./util"],function(p,l,B){let u=function(){function n(g,b,e){this.tileCoordRange=g;this._visibleTiles=b;this._createUnique=e;this._tiles=new Map;this._uniqueSymbolsReferences=new Map}var h=n.prototype;h.add=function(g,b){this._uniqueSymbolLayerArray=null;let e=this._tiles.get(g.id);e||(e={symbols:new Map},
this._tiles.set(g.id,e));var c=new Map;if(b)for(var f of b)e.symbols.has(f)&&(c.set(f,e.symbols.get(f)),e.symbols.delete(f));else for(var [a]of g.layerData)e.symbols.has(a)&&(c.set(a,e.symbols.get(a)),e.symbols.delete(a));this._removeSymbols(c);b=g.symbols;c=new Map;for(const [d,q]of b)if(f=q.length,32<=f){a=this.tileCoordRange;do a/=2,f/=4;while(8<f&&64<a);f=new B.GridIndex(this.tileCoordRange,this.tileCoordRange,a);c.set(d,{flat:q,index:f});e.symbols.set(d,{flat:q,index:f});for(const m of q)f.getCell(m.xTile,
m.yTile).push(m)}else c.set(d,{flat:q}),e.symbols.set(d,{flat:q});this._addSymbols(g.key,b)};h.deleteStyleLayers=function(g){this._uniqueSymbolLayerArray=null;for(const [b,e]of this._tiles){const c=new Map;for(const f of g)e.symbols.has(f)&&(c.set(f,e.symbols.get(f)),e.symbols.delete(f));this._removeSymbols(c);0===e.symbols.size&&this._tiles.delete(b)}};h.removeTile=function(g){this._uniqueSymbolLayerArray=null;const b=this._tiles.get(g.id);if(b){var e=new Map;for(const [c]of g.symbols)b.symbols.has(c)&&
(e.set(c,b.symbols.get(c)),b.symbols.delete(c));this._removeSymbols(e);0===b.symbols.size&&this._tiles.delete(g.id)}};h._removeSymbols=function(g){for(const [e,{flat:c}]of g)for(const f of c){g=f.unique;var b=g.tileSymbols;const a=b.length-1;for(let d=0;d<a;d++)if(b[d]===f){b[d]=b[a];break}b.length=a;0===a&&(b=this._uniqueSymbolsReferences.get(e),b.delete(g),0===b.size&&this._uniqueSymbolsReferences.delete(e));f.unique=null}};h._addSymbols=function(g,b){if(0!==b.size){var e=this._visibleTiles;for(const c of e)c.parentTile||
c.key.world!==g.world||c.key.level===g.level&&!c.key.equals(g)||this._matchSymbols(c,g,b);for(const [c,f]of b)for(const a of f)null==a.unique&&(g=this._createUnique(),a.unique=g,g.tileSymbols.push(a),b=this._uniqueSymbolsReferences.get(c),b||(b=new Set,this._uniqueSymbolsReferences.set(c,b)),b.add(g))}};h._matchSymbols=function(g,b,e){if(g.key.level>b.level){var c=g.key.level-b.level;if(g.key.row>>c!==b.row||g.key.col>>c!==b.col)return}if(b.level>g.key.level&&(c=b.level-g.key.level,b.row>>c!==g.key.row||
b.col>>c!==g.key.col))return;if(b.equals(g.key))for(var f of g.childrenTiles)this._matchSymbols(f,b,e);else{f=new Map;for(const [q,m]of e){var a=[];for(const v of m)e=B.tileCoordChange(this.tileCoordRange,v.xTile,b.level,b.col,g.key.level,g.key.col),c=B.tileCoordChange(this.tileCoordRange,v.yTile,b.level,b.row,g.key.level,g.key.row),0<=e&&e<this.tileCoordRange&&0<=c&&c<this.tileCoordRange&&a.push({symbol:v,xTransformed:e,yTransformed:c});e=[];c=g.key.level<b.level?1:1<<g.key.level-b.level;const r=
this._tiles.get(g.id).symbols.get(q);if(r){const v=r.flat;for(const w of a){var d=!1;let D;const C=w.xTransformed,E=w.yTransformed;D=null!=r.index?r.index.getCell(C,E):v;a=w.symbol;const F=a.hash;for(const y of D)if(F===y.hash&&Math.abs(C-y.xTile)<=c&&Math.abs(E-y.yTile)<=c){d=y.unique;a.unique=d;d.tileSymbols.push(a);d=!0;break}d||e.push(a)}}0<e.length&&f.set(q,e)}for(const q of g.childrenTiles)this._matchSymbols(q,b,f)}};h._createUniqueSymbolLayerArray=function(){var g=this._uniqueSymbolsReferences;
const b=Array(g.size);let e=0;for(const [c,f]of g){const a=Array(f.size);g=0;for(const d of f)a[g++]=d;b[e]={styleLayerUID:c,uniqueSymbols:a};e++}return b};l._createClass(n,[{key:"uniqueSymbols",get:function(){null==this._uniqueSymbolLayerArray&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray());return this._uniqueSymbolLayerArray}}]);return n}();p.SymbolRepository=u;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileInfoViewPOT":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../layers/support/TileInfo","./TileInfoView","./TileKey"],function(p,l,B,u){return function(n){function h(){var b=n.apply(this,arguments)||this;b._fullCacheLodInfos=null;b._levelByScale={};return b}p._inherits(h,n);var g=h.prototype;g.getTileParentId=function(b){b=u.pool.acquire(b);const e=0===b.level?null:u.getId(b.level-1,b.row>>1,b.col>>1,b.world);u.pool.release(b);return e};g.getTileCoverage=function(b,e,c=!0,f){b=p._get(p._getPrototypeOf(h.prototype),"getTileCoverage",this).call(this,
b,e,c,f);if(!b)return b;const a=1<<b.lodInfo.level;b.spans=b.spans.filter(d=>0<=d.row&&d.row<a);return b};g.scaleToLevel=function(b){this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos);if(this._levelByScale[b])return this._levelByScale[b];var e=this._fullCacheLodInfos;if(b>e[0].scale)return e[0].level;let c;for(let f=0;f<e.length-1;f++)if(c=e[f+1],b>c.scale)return e=e[f],e.level+(e.scale-b)/(e.scale-c.scale);return e[e.length-1].level};g._initializeFullCacheLODs=function(b){b=0===
b[0].level?b.map(e=>({level:e.level,resolution:e.resolution,scale:e.scale})):l.create({size:this.tileInfo.size[0],spatialReference:this.tileInfo.spatialReference}).lods.map(e=>({level:e.level,resolution:e.resolution,scale:e.scale}));for(let e=0;e<b.length;e++)this._levelByScale[b[e].scale]=b[e].level;this._fullCacheLodInfos=b};return p._createClass(h)}(B)})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),
function(p,l,B,u,n,h){const g=new n("0/0/0/0");let b=function(){function c(a,d,q,m,r,v,w,D){this.x=a;this.ymin=d;this.ymax=q;this.invM=m;this.leftAdjust=r;this.rightAdjust=v;this.leftBound=w;this.rightBound=D}c.create=function(a,d){a[1]>d[1]&&([a,d]=[d,a]);const [q,m]=a,[r,v]=d;a=r-q;d=v-m;d=0!==d?a/d:0;const w=(Math.ceil(m)-m)*d,D=(Math.floor(m)-m)*d;return new c(q,Math.floor(m),Math.ceil(v),d,0>a?w:D,0>a?D:w,0>a?r:q,0>a?q:r)};var f=c.prototype;f.incrRow=function(){this.x+=this.invM};f.getLeftCol=
function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};f.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return p._createClass(c)}();const e=[[0,0],[0,0],[0,0],[0,0]];return function(){function c(a,d=null,q=a.lods[0].level,m=a.lods[a.lods.length-1].level){this.tileInfo=a;this.fullExtent=d;this.scales=[];this._infoByScale={};this._infoByLevel={};const r=a.lods.filter(w=>w.level>=q&&w.level<=m);this.minScale=r[0].scale;this.maxScale=r[r.length-1].scale;const v=
this._lodInfos=r.map(w=>B.create(a,w,d));r.forEach((w,D)=>{this._infoByLevel[w.level]=v[D];this._infoByScale[w.scale]=v[D];this.scales[D]=w.scale},this);this._wrap=a.isWrappable}var f=c.prototype;f.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};f.getTileBounds=function(a,d,q=!1){g.set(d);return(d=this._infoByLevel[g.level])?d.getTileBounds(a,g,q):a};f.getTileCoords=function(a,d,q=!1){g.set(d);return(d=this._infoByLevel[g.level])?d.getTileCoords(a,g,q):a};f.getTileCoverage=
function(a,d=192,q=!0,m="closest"){if(!q&&(a.scale>this.minScale||a.scale<this.maxScale))return null;q="closest"===m?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);m=u.pool.acquire(q);const r=this._wrap;var v=Infinity;let w=-Infinity;const D=m.spans;e[0][0]=e[0][1]=e[1][1]=e[3][0]=-d;e[1][0]=e[2][0]=a.size[0]+d;e[2][1]=e[3][1]=a.size[1]+d;for(C of e)a.toMap(C,C),C[0]=q.getColumnForX(C[0]),C[1]=q.getRowForY(C[1]);a=[];var C=3;for(d=0;4>d;d++)e[d][1]===e[C][1]?C=d:(C=b.create(e[d],
e[C]),v=Math.min(C.ymin,v),w=Math.max(C.ymax,w),void 0===a[C.ymin]&&(a[C.ymin]=[]),a[C.ymin].push(C),C=d);if(null==v||null==w||100<w-v)return null;for(d=[];v<w;){null!=a[v]&&(d=d.concat(a[v]));C=Infinity;var E=-Infinity;for(var F=d.length-1;0<=F;F--){var y=d[F];C=Math.min(C,y.getLeftCol());E=Math.max(E,y.getRightCol())}C=Math.floor(C);E=Math.floor(E);if(v>=q.first[1]&&v<=q.last[1])if(r)if(q.size[0]<q.worldSize[0])for(F=Math.floor(E/q.worldSize[0]),y=Math.floor(C/q.worldSize[0]);y<=F;y++)D.push(new h(v,
Math.max(q.getFirstColumnForWorld(y),C),Math.min(q.getLastColumnForWorld(y),E)));else D.push(new h(v,C,E));else C>q.last[0]||E<q.first[0]||(C=Math.max(C,q.first[0]),E=Math.min(E,q.last[0]),D.push(new h(v,C,E)));v+=1;for(C=d.length-1;0<=C;C--)E=d[C],E.ymax>=v?E.incrRow():d.splice(C,1)}return m};f.getTileParentId=function(a){g.set(a);a=this._lodInfos.indexOf(this._infoByLevel[g.level])-1;if(0>a)return null;this._getTileIdAtLOD(g,this._lodInfos[a],g);return g.id};f.getTileResolution=function(a){return(a=
this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};f.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};f.intersects=function(a,d){g.set(d);d=this._infoByLevel[g.level];const q=a.lodInfo;if(q.resolution>d.resolution){this._getTileIdAtLOD(g,q,g);var m=q.denormalizeCol(g.col,g.world);for(var r of a.spans)if(r.row===g.row&&r.colFrom<=m&&r.colTo>=m)return!0}if(q.resolution<d.resolution){const [w,D,C,E]=a.spans.reduce((F,y)=>{F[0]=Math.min(F[0],y.row);F[1]=Math.max(F[1],
y.row);F[2]=Math.min(F[2],y.colFrom);F[3]=Math.max(F[3],y.colTo);return F},[Infinity,-Infinity,Infinity,-Infinity]);m=d.denormalizeCol(g.col,g.world);a=q.getColumnForX(d.getXForColumn(m));r=q.getRowForY(d.getYForRow(g.row));m=q.getColumnForX(d.getXForColumn(m+1))-1;d=q.getRowForY(d.getYForRow(g.row+1))-1;return!(a>E||m<C||r>D||d<w)}const v=q.denormalizeCol(g.col,g.world);return a.spans.some(w=>w.row===g.row&&w.colFrom<=v&&w.colTo>=v)};f.normalizeBounds=function(a,d,q){a[0]=d[0];a[1]=d[1];a[2]=d[2];
a[3]=d[3];this._wrap&&(d=l.getInfo(this.tileInfo.spatialReference),q=-q*(d.valid[1]-d.valid[0]),a[0]+=q,a[2]+=q);return a};f.getSmallestInfoForScale=function(a){const d=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>d[0])return this._infoByScale[d[0]];for(let q=1;q<d.length-1;q++)if(a>d[q]+1E-6)return this._infoByScale[d[q-1]];return this._infoByScale[d[d.length-1]]};f.getClosestInfoForScale=function(a){const d=this.scales;if(this._infoByScale[a])return this._infoByScale[a];
a=d.reduce((q,m)=>Math.abs(m-a)<Math.abs(q-a)?m:q,d[0]);return this._infoByScale[a]};f.scaleToLevel=function(a){const d=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(let q=d.length-1;0<=q;q--)if(a<d[q])return q===d.length-1?this._infoByScale[d[d.length-1]].level:this._infoByScale[d[q]].level+(d[q]-a)/(d[q]-d[q+1]);return this._infoByScale[d[0]].level};f.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};f._getTileIdAtLOD=function(a,d,q){const m=this._infoByLevel[q.level];
a.set(q);if(d.resolution<m.resolution)return null;if(d.resolution===m.resolution)return a;a.level=d.level;a.col=Math.floor(q.col*m.resolution/d.resolution+.01);a.row=Math.floor(q.row*m.resolution/d.resolution+.01);return a};p._createClass(c,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return c}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(p,
l,B){function u(h,g,b){h[0]=g;h[1]=b;return h}const n=new B("0/0/0/0");return function(){function h(b,e,c,f,a,d,q,m,r,v,w,D){this.level=b;this.resolution=e;this.scale=c;this.origin=f;this.first=a;this.last=d;this.size=q;this.norm=m;this.worldStart=r;this.worldEnd=v;this.worldSize=w;this.wrap=D}h.create=function(b,e,c=null){var f=l.getInfo(b.spatialReference);const a=e.origin||[b.origin.x,b.origin.y],d=[b.size[0]*e.resolution,b.size[1]*e.resolution],q=[-Infinity,-Infinity],m=[Infinity,Infinity],r=
[Infinity,Infinity];null!=c&&(u(q,Math.max(0,Math.floor((c.xmin-a[0])/d[0])),Math.max(0,Math.floor((a[1]-c.ymax)/d[1]))),u(m,Math.max(0,Math.floor((c.xmax-a[0])/d[0])),Math.max(0,Math.floor((a[1]-c.ymin)/d[1]))),u(r,m[0]-q[0]+1,m[1]-q[1]+1));const {cols:v,rows:w}=e;!c&&v&&w&&(u(q,v[0],w[0]),u(m,v[1],w[1]),u(r,v[1]-v[0]+1,w[1]-w[0]+1));let D;b.isWrappable?(b=[Math.ceil(Math.round((f.valid[1]-f.valid[0])/e.resolution)/b.size[0]),r[1]],f=[Math.floor((f.origin[0]-a[0])/d[0]),q[1]],c=[b[0]+f[0]-1,m[1]],
D=!0):(f=q,c=m,b=r,D=!1);return new h(e.level,e.resolution,e.scale,a,q,m,r,d,f,c,b,D)};var g=h.prototype;g.normalizeCol=function(b){if(!this.wrap)return b;const e=this.worldSize[0];return 0>b?e-1-Math.abs((b+1)%e):b%e};g.denormalizeCol=function(b,e){return this.wrap?this.worldSize[0]*e+b:b};g.getWorldForColumn=function(b){return this.wrap?Math.floor(b/this.worldSize[0]):0};g.getFirstColumnForWorld=function(b){return b*this.worldSize[0]+this.first[0]};g.getLastColumnForWorld=function(b){return b*this.worldSize[0]+
this.first[0]+this.size[0]-1};g.getColumnForX=function(b){return(b-this.origin[0])/this.norm[0]};g.getXForColumn=function(b){return this.origin[0]+b*this.norm[0]};g.getRowForY=function(b){return(this.origin[1]-b)/this.norm[1]};g.getYForRow=function(b){return this.origin[1]-b*this.norm[1]};g.getTileBounds=function(b,e,c=!1){n.set(e);var f=c?n.col:this.denormalizeCol(n.col,n.world),a=n.row;e=this.getXForColumn(f);c=this.getYForRow(a+1);f=this.getXForColumn(f+1);a=this.getYForRow(a);b[0]=e;b[1]=c;b[2]=
f;b[3]=a;return b};g.getTileCoords=function(b,e,c=!1){n.set(e);e=c?n.col:this.denormalizeCol(n.col,n.world);Array.isArray(b)?u(b,this.getXForColumn(e),this.getYForRow(n.row)):(b.x=this.getXForColumn(e),b.y=this.getYForRow(n.row));return b};return p._createClass(h)}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(p,l){let B=function(){function u(){this.spans=[]}var n=u.prototype;n.acquire=function(h){this.lodInfo=
h};n.release=function(){this.lodInfo=null;this.spans.length=0};n.forEach=function(h,g){const {spans:b,lodInfo:e}=this,{level:c}=e;if(0!==b.length)for(const {row:f,colFrom:a,colTo:d}of b)for(let q=a;q<=d;q++)h.call(g,c,f,e.normalizeCol(q),e.getWorldForColumn(q))};return p._createClass(u)}();B.pool=new l(B);return B})},"esri/views/2d/tiling/TileSpan":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],function(p){return p._createClass(function(l,B,u){this.row=l;this.colFrom=B;this.colTo=
u})})},"esri/views/2d/engine/vectorTiles/VTLPainter3D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../vtlBrushes ./shaders/VTLMaterialManager ./style/StyleDefinition ../../../webgl/enums".split(" "),function(p,l,B,u,n,h){return function(){function g(e,c){this.spriteMosaic=e;this.glyphMosaic=c;this._brushCache=new Map;this._vtlMaterialManager=new u}var b=g.prototype;b.dispose=function(){this._brushCache&&(this._brushCache.forEach(e=>e.dispose()),this._brushCache=
null);this._vtlMaterialManager=l.disposeMaybe(this._vtlMaterialManager);this.spriteMosaic.dispose();this.glyphMosaic.dispose()};b.drawTile=function(e,c,f,a){const {context:d}=e,q=f.layers;0<f.backgroundBucketIds.length&&(e.renderPass="background",f.backgroundBucketIds.forEach(v=>{v=f.getLayerById(v);null!=a&&a!==v.type||this._renderStyleLayer(v,e,c,!0)}));d.setBlendingEnabled(!1);d.setDepthTestEnabled(!0);d.setDepthWriteEnabled(!0);d.setDepthFunction(h.CompareFunction.LEQUAL);e.renderPass="opaque";
for(var m=q.length-1;0<=m;m--){var r=q[m];null!=a&&a!==r.type||this._renderStyleLayer(r,e,c,!1)}d.setDepthWriteEnabled(!1);d.setBlendingEnabled(!0);d.setBlendFunctionSeparate(h.BlendFactor.ONE,h.BlendFactor.ONE_MINUS_SRC_ALPHA,h.BlendFactor.ONE,h.BlendFactor.ONE_MINUS_SRC_ALPHA);e.renderPass="translucent";for(m=0;m<q.length;m++)r=q[m],null!=a&&a!==r.type||this._renderStyleLayer(r,e,c,!1);d.setDepthTestEnabled(!1);d.bindVAO()};b._renderStyleLayer=function(e,c,f,a){if(a||e&&f.layerData.has(e.uid))if(a=
e.getLayoutProperty("visibility"),!a||a.getValue()!==n.Visibility.NONE){({renderPass:a}=c);switch(e.type){case n.StyleLayerType.BACKGROUND:if("background"!==a)return;var d="vtlBackground";break;case n.StyleLayerType.FILL:if("opaque"!==a&&"translucent"!==c.renderPass)return;d="vtlFill";break;case n.StyleLayerType.LINE:if("translucent"!==a)return;d="vtlLine";break;case n.StyleLayerType.CIRCLE:if("translucent"!==a)return;d="vtlCircle";break;case n.StyleLayerType.SYMBOL:if("translucent"!==a)return;d=
"vtlSymbol"}a=c.displayLevel;void 0!==e.minzoom&&e.minzoom>a+1E-6||void 0!==e.maxzoom&&e.maxzoom<=a-1E-6||(c.styleLayerUID=e.uid,c.styleLayer=e,this._drawWithBrush(c,f,d))}};b._drawWithBrush=function(e,c,f){this._brushCache.has(f)||this._brushCache.set(f,new B.vtlBrushes[f]);this._brushCache.get(f).drawMany(e,[c])};p._createClass(g,[{key:"vectorTilesMaterialManager",get:function(){return this._vtlMaterialManager}}]);return g}()})},"esri/views/2d/engine/vtlBrushes":function(){define("exports ./webgl/brushes/WGLBrushVTLBackground ./webgl/brushes/WGLBrushVTLCircle ./webgl/brushes/WGLBrushVTLFill ./webgl/brushes/WGLBrushVTLLine ./webgl/brushes/WGLBrushVTLSymbol".split(" "),
function(p,l,B,u,n,h){p.vtlBrushes={vtlBackground:l.WGLBrushVTLBackground,vtlFill:u.WGLBrushVTLFill,vtlLine:n.WGLBrushVTLLine,vtlCircle:B.WGLBrushVTLCircle,vtlSymbol:h.WGLBrushVTLSymbol};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLBackground":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/mathUtils ../../../../../chunks/mat3f32 ../../../../../chunks/vec4f32 ../definitions ../enums ../number ./WGLBrush ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/VertexArrayObject".split(" "),
function(p,l,B,u,n,h,g,b,e,c,f,a){e=function(d){function q(){var r=d.apply(this,arguments)||this;r._color=n.fromValues(1,0,0,1);r._patternMatrix=u.create();r._programOptions={id:!1,pattern:!1};return r}l._inherits(q,d);var m=q.prototype;m.dispose=function(){this._vao&&(this._vao.dispose(),this._vao=null)};m.drawMany=function(r,v){const {context:w,painter:D,styleLayerUID:C,requestRender:E,allowDelayedRender:F}=r;this._loadWGLResources(r);const y=r.displayLevel;var z=r.styleLayer,I=z.backgroundMaterial;
const J=D.vectorTilesMaterialManager;var K=z.getPaintValue("background-color",y);const S=z.getPaintValue("background-opacity",y),M=z.getPaintValue("background-pattern",y),O=void 0!==M,T=K[3]*S,N=r.spriteMosaic;let P,R;const L=(window.devicePixelRatio|1)>h.VTL_HIGH_RES_CUTOFF?2:1;r=r.drawPhase===g.WGLDrawPhase.HITTEST;const U=this._programOptions;U.id=r;U.pattern=O;I=J.getMaterialProgram(w,I,U);if(F&&null!=E&&!I.compiled)E();else{w.bindVAO(this._vao);w.useProgram(I);if(O){K=N.getMosaicItemPosition(M,
!0);if(null!=K){const {tl:X,br:Z,page:da}=K;P=Z[0]-X[0];R=Z[1]-X[1];K=N.getPageSize(da);null!=K&&(N.bind(w,f.TextureSamplingMode.LINEAR,da,h.VTL_TEXTURE_BINDING_UNIT_SPRITES),I.setUniform4f("u_tlbr",X[0],X[1],Z[0],Z[1]),I.setUniform2fv("u_mosaicSize",K),I.setUniform1i("u_texture",h.VTL_TEXTURE_BINDING_UNIT_SPRITES))}I.setUniform1f("u_opacity",S)}else this._color[0]=T*K[0],this._color[1]=T*K[1],this._color[2]=T*K[2],this._color[3]=T,I.setUniform4fv("u_color",this._color);I.setUniform1f("u_depth",z.z||
0);r&&(z=b.u32to4Xu8(C+1),I.setUniform4fv("u_id",z));for(const X of v)I.setUniform1f("u_coord_range",X.rangeX),I.setUniformMatrix3fv("u_dvsMat3",X.transforms.dvs),O&&(z=L*X.width*Math.max(2**(Math.round(y)-X.key.level),1),v=z/B.nextPowerOfTwo(P),z/=B.nextPowerOfTwo(R),this._patternMatrix[0]=v,this._patternMatrix[4]=z,I.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)),w.setStencilFunction(f.CompareFunction.EQUAL,0,255),w.drawArrays(f.PrimitiveType.TRIANGLE_STRIP,0,4)}};m._loadWGLResources=
function(r){if(!this._vao){var {context:v,styleLayer:w}=r;r=w.backgroundMaterial;var D=new Int8Array([0,0,1,0,0,1,1,1]);D=c.BufferObject.createVertex(v,f.Usage.STATIC_DRAW,D);this._vao=new a.VertexArrayObject(v,r.getAttributeLocations(),r.getLayoutInfo(),{geometry:D})}};return l._createClass(q)}(e);p.WGLBrushVTLBackground=e;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports","../../../../core/has"],function(p,l){const B=
256/360;l=l("featurelayer-force-marker-text-draw-order")?.5:3;p.ANGLE_FACTOR_256=B;p.ATTRIBUTE_DATA_ANIMATION=1;p.ATTRIBUTE_DATA_DD0=3;p.ATTRIBUTE_DATA_DD1=4;p.ATTRIBUTE_DATA_FILTER_FLAGS=0;p.ATTRIBUTE_DATA_GPGPU=2;p.ATTRIBUTE_DATA_VV=3;p.ATTRIBUTE_STORE_TEXTURE_SIZE=1024;p.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};p.BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR=32;p.BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR=64;p.BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR=
8;p.BITSET_FILL_RANDOM_PATTERN_OFFSET=4;p.BITSET_GENERIC_CONSIDER_ALPHA_ONLY=16;p.BITSET_GENERIC_LOCK_COLOR=2;p.BITSET_LINE_SCALE_DASH=4;p.BITSET_MARKER_ALIGNMENT_MAP=1;p.BITSET_MARKER_ALIGNMENT_SCREEN=0;p.BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE=4;p.BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY=8;p.BITSET_TYPE_FILL_OUTLINE=1;p.BUFFER_DATA_MINIMUM_SIZE=128;p.BUFFER_DATA_POOL_SIZE=4;p.CHART_MAX_FIELDS=10;p.COLLISION_BOX_PADDING=16;p.COLLISION_BUCKET_SIZE=128;p.COLLISION_EARLY_REJECT_BUCKET_SIZE=16;
p.COLLISION_MAX_ZOOM_DELTA=1;p.COLLISION_PLACEMENT_PADDING=8;p.COLLISION_TILE_BOX_SIZE=4;p.COMPRESSION_FACTOR_FOR_U16=128;p.DEBUG_LABELS=!1;p.DISPLAY_RECORD_INT_PER_ELEMENT=8;p.DOT_DENSITY_MAX_FIELDS=8;p.EFFECT_FLAG_0=4;p.ENABLE_EARLY_LABEL_DISCARD=!1;p.EXTRUDE_SCALE=64;p.FILTER_FLAG_0=2;p.GLYPH_SIZE=24;p.HEURISTIC_GLYPHS_PER_FEATURE=10;p.HEURISTIC_GLYPHS_PER_LINE=50;p.HIGHLIGHT_FLAG=1;p.HITTEST_RADIUS=l;p.MAGIC_LABEL_LINE_HEIGHT=29;p.MAX_FILTERS=2;p.MAX_GPU_UPLOADS_PER_FRAME=2;p.MAX_REPRESENTABLE_INT=
16777216;p.MAX_SIZE_FOR_U16_COMPRESSION=511;p.MIN_MAX_ZOOM_PRECISION_FACTOR=10;p.NAN_MAGIC_NUMBER=1E-30;p.PATCH_PIXEL_BUFFER_ALLOC_SIZE=500;p.PATTERN_FILL_RASTERIZATION_SCALE=2;p.PICTURE_FILL_COLOR=4294967295;p.RANDOM_INSIDE_POLYGON_TEXTURE_SIZE=1024;p.RASTER_TILE_SIZE=256;p.SDF_TEXTURE_SIZE=124;p.SPRITE_PADDING=2;p.TEXTURE_BINDING_ATTRIBUTE_DATA_0=1;p.TEXTURE_BINDING_ATTRIBUTE_DATA_1=2;p.TEXTURE_BINDING_ATTRIBUTE_DATA_2=3;p.TEXTURE_BINDING_ATTRIBUTE_DATA_3=4;p.TEXTURE_BINDING_ATTRIBUTE_DATA_4=5;
p.TEXTURE_BINDING_ATTRIBUTE_DATA_5=6;p.TEXTURE_BINDING_BITMAP=0;p.TEXTURE_BINDING_GLYPH_ATLAS=0;p.TEXTURE_BINDING_GPGPU=12;p.TEXTURE_BINDING_HIGHLIGHT_0=5;p.TEXTURE_BINDING_HIGHLIGHT_1=6;p.TEXTURE_BINDING_RENDERER_0=5;p.TEXTURE_BINDING_RENDERER_1=6;p.TEXTURE_BINDING_SPRITE_ATLAS=0;p.TEXTURE_UPLOAD_MANAGER_BUDGET=4;p.TEXTURE_UPLOAD_MANAGER_CHUNK_SIZE=128;p.TEXT_PLACEMENT_PADDING=8;p.THIN_LINE_HALF_WIDTH_THRESHOLD=1.05;p.TILE_SIZE=512;p.VTL_HIGH_RES_CUTOFF=1.15;p.VTL_TEXTURE_BINDING_UNIT_GLYPHS=6;p.VTL_TEXTURE_BINDING_UNIT_SPRITES=
5;p.WEBGL_MAX_INNER_STOPS=6;p.WEBGL_MAX_STOPS=8;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(p){p.WGLGeometryType=void 0;(function(l){l[l.FILL=0]="FILL";l[l.LINE=1]="LINE";l[l.MARKER=2]="MARKER";l[l.TEXT=3]="TEXT";l[l.LABEL=4]="LABEL"})(p.WGLGeometryType||(p.WGLGeometryType={}));p.WGLDrawPhase=void 0;(function(l){l[l.NONE=0]="NONE";l[l.MAP=1]="MAP";l[l.LABEL=2]="LABEL";l[l.LABEL_ALPHA=4]="LABEL_ALPHA";l[l.HITTEST=
8]="HITTEST";l[l.HIGHLIGHT=16]="HIGHLIGHT";l[l.CLIP=32]="CLIP";l[l.DEBUG=64]="DEBUG";l[l.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(p.WGLDrawPhase||(p.WGLDrawPhase={}));p.VVType=void 0;(function(l){l[l.SIZE=0]="SIZE";l[l.COLOR=1]="COLOR";l[l.OPACITY=2]="OPACITY";l[l.ROTATION=3]="ROTATION"})(p.VVType||(p.VVType={}));p.WGLVVFlag=void 0;(function(l){l[l.NONE=0]="NONE";l[l.OPACITY=1]="OPACITY";l[l.COLOR=2]="COLOR";l[l.ROTATION=4]="ROTATION";l[l.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";l[l.SIZE_SCALE_STOPS=
16]="SIZE_SCALE_STOPS";l[l.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";l[l.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(p.WGLVVFlag||(p.WGLVVFlag={}));p.WGLVVTarget=void 0;(function(l){l[l.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";l[l.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";l[l.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";l[l.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(p.WGLVVTarget||(p.WGLVVTarget={}));p.MosaicType=void 0;(function(l){l[l.SPRITE=0]="SPRITE";l[l.GLYPH=1]=
"GLYPH"})(p.MosaicType||(p.MosaicType={}));p.WGLSymbologyType=void 0;(function(l){l[l.DEFAULT=0]="DEFAULT";l[l.SIMPLE=1]="SIMPLE";l[l.DOT_DENSITY=2]="DOT_DENSITY";l[l.OUTLINE_FILL=3]="OUTLINE_FILL";l[l.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE";l[l.HEATMAP=5]="HEATMAP";l[l.PIE_CHART=6]="PIE_CHART"})(p.WGLSymbologyType||(p.WGLSymbologyType={}));Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/number":function(){define(["exports"],function(p){function l(n,
h,g){return Math.round(Math.max(Math.min(n,g),h))}const B=new Float32Array(1),u=new Uint32Array(B.buffer);p.i16=function(n){return l(n,-32768,32767)};p.i1616to32=function(n,h){return 65535&n|h<<16};p.i32=function(n){return l(n,-2147483648,2147483647)};p.i8=function(n){return l(n,-128,127)};p.i8816to32=function(n,h,g){return n&255|(h&255)<<8|g<<16};p.i8888to32=function(n,h,g,b){return n&255|(h&255)<<8|(g&255)<<16|b<<24};p.numTo32=function(n){return n|0};p.toFloat32=function(n){u[0]=n;return B[0]};
p.toUint32=function(n){B[0]=n;return u[0]};p.u16=function(n){return l(n,0,65535)};p.u32=function(n){return l(n,0,4294967295)};p.u32to4Xu8=function(n){return[n&255,(n&65280)>>>8,(n&16711680)>>>16,(n&4278190080)>>>24]};p.u4u4to8=function(n,h){return 15&n|(15&h)<<4};p.u8=function(n){return l(n,0,255)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function l(){this.name=
this.constructor.name||"UnnamedBrush";this.brushEffect=null}var B=l.prototype;B.prepareState=function(u,n){};B.draw=function(u,n,h){};B.drawMany=function(u,n,h){for(const g of n)g.visible&&this.draw(u,g,h)};return p._createClass(l)}()})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLCircle":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../vectorTiles/style/StyleDefinition ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(p,l,B,u,n,h,g){h=function(b){function e(){var f=
b.apply(this,arguments)||this;f._programOptions={id:!1};return f}l._inherits(e,b);var c=e.prototype;c.dispose=function(){};c.drawMany=function(f,a){const {context:d,displayLevel:q,requiredLevel:m,state:r,drawPhase:v,painter:w,spriteMosaic:D,styleLayerUID:C,requestRender:E,allowDelayedRender:F}=f;if(a.some(M=>M.layerData.get(C)?.circleIndexCount??!1)){f=f.styleLayer;var y=f.circleMaterial,z=w.vectorTilesMaterialManager,I=f.getPaintValue("circle-translate",q),J=f.getPaintValue("circle-translate-anchor",
q),K=v===u.WGLDrawPhase.HITTEST,S=this._programOptions;S.id=K;z=z.getMaterialProgram(d,y,S);if(F&&null!=E&&!z.compiled)E();else{d.useProgram(z);z.setUniformMatrix3fv("u_displayMat3",J===B.TranslateAnchor.VIEWPORT?r.displayMat3:r.displayViewMat3);z.setUniform2fv("u_circleTranslation",I);z.setUniform1f("u_depth",f.z);z.setUniform1f("u_antialiasingWidth",1.2);I=-1;K&&(K=n.u32to4Xu8(C+1),z.setUniform4fv("u_id",K));for(const M of a)M.layerData.has(C)&&(M.key.level!==I&&(I=M.key.level,y.setDataUniforms(z,
q,f,I,D)),a=M.layerData.get(C),a.circleIndexCount&&(a.prepareForRendering(d),K=a.vao,null!=K&&(d.bindVAO(K),z.setUniformMatrix3fv("u_dvsMat3",M.transforms.dvs),m!==M.key.level?d.setStencilFunction(g.CompareFunction.EQUAL,M.stencilRef,255):d.setStencilFunction(g.CompareFunction.GREATER,255,255),d.drawElements(g.PrimitiveType.TRIANGLES,a.circleIndexCount,g.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*a.circleIndexStart),M.triangleCount+=a.circleIndexCount/3)))}}};return l._createClass(e)}(h);
p.WGLBrushVTLCircle=h;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLFill":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(p,l,B,u,n,h,g,b){const e=1/65536;g=function(c){function f(){var d=c.apply(this,arguments)||this;d._fillProgramOptions={id:!1,pattern:!1};d._outlineProgramOptions=
{id:!1};return d}l._inherits(f,c);var a=f.prototype;a.dispose=function(){};a.drawMany=function(d,q){const {displayLevel:m,drawPhase:r,renderPass:v,spriteMosaic:w,styleLayerUID:D}=d;var C=!1;for(var E of q)if(E.layerData.has(D)){var F=E.layerData.get(D);if(0<F.fillIndexCount||0<F.outlineIndexCount){C=!0;break}}if(C){C=d.styleLayer;var y=C.getPaintProperty("fill-pattern");F=(E=void 0!==y)&&y.isDataDriven;if(E&&!F){var z=y.getValue(m);z=w.getMosaicItemPosition(z,!0)}y=!E&&C.getPaintValue("fill-antialias",
m);var I=!0,J=1;if(!E){var K=C.getPaintProperty("fill-color"),S=C.getPaintProperty("fill-opacity");K?.isDataDriven||S?.isDataDriven||(J=C.getPaintValue("fill-color",m),J=C.getPaintValue("fill-opacity",m)*J[3],1<=J&&(I=!1))}if(!I||"opaque"!==v){var M;r===n.WGLDrawPhase.HITTEST&&(M=h.u32to4Xu8(D+1));K=C.getPaintValue("fill-translate",m);S=C.getPaintValue("fill-translate-anchor",m);(I||"translucent"!==v)&&this._drawFill(d,D,C,q,K,S,E,z,F,M);z=!C.hasDataDrivenOutlineColor&&C.outlineUsesFillColor&&1>J;
y&&"opaque"!==v&&!z&&this._drawOutline(d,D,C,q,K,S,M)}}};a._drawFill=function(d,q,m,r,v,w,D,C,E,F){if(!D||E||null!=C){var {context:y,displayLevel:z,state:I,drawPhase:J,painter:K,pixelRatio:S,spriteMosaic:M,requestRender:O,allowDelayedRender:T}=d;d=m.fillMaterial;var N=K.vectorTilesMaterialManager,P=S>u.VTL_HIGH_RES_CUTOFF?2:1,R=J===n.WGLDrawPhase.HITTEST,L=this._fillProgramOptions;L.id=R;L.pattern=D;N=N.getMaterialProgram(y,d,L);if(T&&null!=O&&!N.compiled)O();else{y.useProgram(N);null!=C&&({page:C}=
C,L=M.getPageSize(C),null!=L&&(M.bind(y,b.TextureSamplingMode.LINEAR,C,u.VTL_TEXTURE_BINDING_UNIT_SPRITES),N.setUniform2fv("u_mosaicSize",L),N.setUniform1i("u_texture",u.VTL_TEXTURE_BINDING_UNIT_SPRITES)));N.setUniformMatrix3fv("u_displayMat3",w===B.TranslateAnchor.VIEWPORT?I.displayMat3:I.displayViewMat3);N.setUniform2fv("u_fillTranslation",v);N.setUniform1f("u_depth",m.z+e);R&&N.setUniform4fv("u_id",F);v=-1;for(const U of r)if(U.layerData.has(q)&&(U.key.level!==v&&(v=U.key.level,d.setDataUniforms(N,
z,m,v,M)),r=U.layerData.get(q),r.fillIndexCount&&(r.prepareForRendering(y),w=r.fillVAO,null!=w))){y.bindVAO(w);N.setUniformMatrix3fv("u_dvsMat3",U.transforms.dvs);y.setStencilFunction(b.CompareFunction.EQUAL,U.stencilRef,255);D&&N.setUniform1f("u_patternFactor",U.rangeX/(P*U.width*Math.max(2**(Math.round(z)-U.key.level),1)));if(E){w=r.patternMap;if(!w)continue;for(const [X,Z]of w)w=M.getPageSize(X),null!=w&&(M.bind(y,b.TextureSamplingMode.LINEAR,X,u.VTL_TEXTURE_BINDING_UNIT_SPRITES),N.setUniform2fv("u_mosaicSize",
w),N.setUniform1i("u_texture",u.VTL_TEXTURE_BINDING_UNIT_SPRITES),y.drawElements(b.PrimitiveType.TRIANGLES,Z[1],b.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*Z[0]))}else y.drawElements(b.PrimitiveType.TRIANGLES,r.fillIndexCount,b.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*r.fillIndexStart);U.triangleCount+=r.fillIndexCount/3}}}};a._drawOutline=function(d,q,m,r,v,w,D){const {context:C,displayLevel:E,state:F,drawPhase:y,painter:z,pixelRatio:I,spriteMosaic:J,requestRender:K,allowDelayedRender:S}=
d;d=m.outlineMaterial;var M=z.vectorTilesMaterialManager;const O=.75/I,T=y===n.WGLDrawPhase.HITTEST,N=this._outlineProgramOptions;N.id=T;M=M.getMaterialProgram(C,d,N);if(S&&null!=K&&!M.compiled)K();else{C.useProgram(M);M.setUniformMatrix3fv("u_displayMat3",w===B.TranslateAnchor.VIEWPORT?F.displayMat3:F.displayViewMat3);M.setUniform2fv("u_fillTranslation",v);M.setUniform1f("u_depth",m.z+e);M.setUniform1f("u_outline_width",O);T&&M.setUniform4fv("u_id",D);v=-1;for(const P of r)P.layerData.has(q)&&(P.key.level!==
v&&(v=P.key.level,d.setDataUniforms(M,E,m,v,J)),r=P.layerData.get(q),r.prepareForRendering(C),r.outlineIndexCount&&(w=r.outlineVAO,null!=w&&(C.bindVAO(w),M.setUniformMatrix3fv("u_dvsMat3",P.transforms.dvs),C.setStencilFunction(b.CompareFunction.EQUAL,P.stencilRef,255),C.drawElements(b.PrimitiveType.TRIANGLES,r.outlineIndexCount,b.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*r.outlineIndexStart),P.triangleCount+=r.outlineIndexCount/3)))}};return l._createClass(f)}(g);p.WGLBrushVTLFill=g;Object.defineProperty(p,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLLine":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(p,l,B,u,n,h,g,b){g=function(e){function c(){var a=e.apply(this,arguments)||this;a._programOptions={id:!1,pattern:!1,sdf:!1};return a}l._inherits(c,e);var f=c.prototype;f.dispose=function(){};f.drawMany=function(a,
d){const {context:q,displayLevel:m,state:r,drawPhase:v,painter:w,pixelRatio:D,spriteMosaic:C,styleLayerUID:E,requestRender:F,allowDelayedRender:y}=a;if(d.some(U=>U.layerData.get(E)?.lineIndexCount??!1)){a=a.styleLayer;var z=a.lineMaterial,I=w.vectorTilesMaterialManager,J=a.getPaintValue("line-translate",m),K=a.getPaintValue("line-translate-anchor",m),S=a.getPaintProperty("line-pattern"),M=void 0!==S,O=M&&S.isDataDriven;if(M&&!O){S=S.getValue(m);var T=C.getMosaicItemPosition(S)}var N;S=!1;if(!M){var P=
a.getPaintProperty("line-dasharray");S=(N=void 0!==P)&&P.isDataDriven;N&&!S&&(T=P.getValue(m),T=a.getDashKey(T,a.getLayoutValue("line-cap",m)),T=C.getMosaicItemPosition(T))}P=1/D;var R=v===n.WGLDrawPhase.HITTEST,L=this._programOptions;L.id=R;L.pattern=M;L.sdf=N;N=I.getMaterialProgram(q,z,L);if(y&&null!=F&&!N.compiled)F();else{q.useProgram(N);N.setUniformMatrix3fv("u_displayViewMat3",r.displayViewMat3);N.setUniformMatrix3fv("u_displayMat3",K===B.TranslateAnchor.VIEWPORT?r.displayMat3:r.displayViewMat3);
N.setUniform2fv("u_lineTranslation",J);N.setUniform1f("u_depth",a.z);N.setUniform1f("u_antialiasing",P);R&&(J=h.u32to4Xu8(E+1),N.setUniform4fv("u_id",J));T&&null!=T&&({page:J}=T,K=C.getPageSize(J),null!=K&&(C.bind(q,b.TextureSamplingMode.LINEAR,J,u.VTL_TEXTURE_BINDING_UNIT_SPRITES),N.setUniform2fv("u_mosaicSize",K),N.setUniform1i("u_texture",u.VTL_TEXTURE_BINDING_UNIT_SPRITES)));J=-1;for(const U of d)if(U.layerData.has(E)&&(U.key.level!==J&&(J=U.key.level,z.setDataUniforms(N,m,a,J,C)),N.setUniform1f("u_zoomFactor",
2**(m-J)/D),d=U.layerData.get(E),d.lineIndexCount&&(d.prepareForRendering(q),K=d.vao,null!=K))){q.bindVAO(K);N.setUniformMatrix3fv("u_dvsMat3",U.transforms.dvs);q.setStencilFunction(b.CompareFunction.EQUAL,U.stencilRef,255);if(O||S){K=d.patternMap;if(!K)continue;for(const [X,Z]of K)K=C.getPageSize(X),null!=K&&(C.bind(q,b.TextureSamplingMode.LINEAR,X,u.VTL_TEXTURE_BINDING_UNIT_SPRITES),N.setUniform2fv("u_mosaicSize",K),N.setUniform1i("u_texture",u.VTL_TEXTURE_BINDING_UNIT_SPRITES),q.drawElements(b.PrimitiveType.TRIANGLES,
Z[1],b.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*Z[0]))}else q.drawElements(b.PrimitiveType.TRIANGLES,d.lineIndexCount,b.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*d.lineIndexStart);U.triangleCount+=d.lineIndexCount/3}}}};return l._createClass(c)}(g);p.WGLBrushVTLLine=g;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLSymbol":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/vec2f32 ../../vectorTiles/decluttering/config ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../GeometryUtils ../number ./WGLBrush ../../../../webgl/enums".split(" "),
function(p,l,B,u,n,h,g,b,e,c,f){const a=1/65536;c=function(d){function q(){var r=d.apply(this,arguments)||this;r._iconProgramOptions={id:!1,sdf:!1};r._sdfProgramOptions={id:!1};r._spritesTextureSize=B.create();return r}l._inherits(q,d);var m=q.prototype;m.dispose=function(){};m.drawMany=function(r,v){const {drawPhase:w,styleLayerUID:D}=r,C=r.styleLayer;let E;w===g.WGLDrawPhase.HITTEST&&(E=e.u32to4Xu8(D+1));this._drawIcons(r,C,v,E);this._drawText(r,C,v,E)};m._drawIcons=function(r,v,w,D){const {context:C,
displayLevel:E,drawPhase:F,painter:y,spriteMosaic:z,state:I,styleLayerUID:J,requestRender:K,allowDelayedRender:S}=r,M=v.iconMaterial;var O=y.vectorTilesMaterialManager,T=!1;for(var N of w)if(N.layerData.has(J)){var P=N.layerData.get(J);if(0<P.iconPerPageElementsMap.size){T=!0;break}}if(T){T=v.getPaintValue("icon-translate",E);N=v.getPaintValue("icon-translate-anchor",E);var R=v.getLayoutValue("icon-rotation-alignment",E);R===n.RotationAlignment.AUTO&&(R=v.getLayoutValue("symbol-placement",E)===n.SymbolPlacement.POINT?
n.RotationAlignment.VIEWPORT:n.RotationAlignment.MAP);var L=R===n.RotationAlignment.MAP;L=v.getLayoutValue("icon-keep-upright",E)&&L;var U=P.isIconSDF;P=F===g.WGLDrawPhase.HITTEST;var X=this._iconProgramOptions;X.id=P;X.sdf=U;O=O.getMaterialProgram(C,M,X);if(S&&null!=K&&!O.compiled)K();else{C.useProgram(O);O.setUniformMatrix3fv("u_displayViewMat3",R===n.RotationAlignment.MAP?I.displayViewMat3:I.displayMat3);O.setUniformMatrix3fv("u_displayMat3",N===n.TranslateAnchor.VIEWPORT?I.displayMat3:I.displayViewMat3);
O.setUniform2fv("u_iconTranslation",T);O.setUniform1f("u_depth",v.z);O.setUniform1f("u_mapRotation",b.degToByte(I.rotation));O.setUniform1f("u_keepUpright",L?1:0);O.setUniform1f("u_level",10*E);O.setUniform1i("u_texture",h.VTL_TEXTURE_BINDING_UNIT_SPRITES);O.setUniform1f("u_fadeDuration",u.FADE_DURATION/1E3);P&&O.setUniform4fv("u_id",D);D=-1;for(const Z of w)if(Z.layerData.has(J)&&(Z.key.level!==D&&(D=Z.key.level,M.setDataUniforms(O,E,v,D,z)),P=Z.layerData.get(J),0!==P.iconPerPageElementsMap.size&&
(P.prepareForRendering(C),P.updateOpacityInfo(),w=P.iconVAO,null!=w))){C.bindVAO(w);O.setUniformMatrix3fv("u_dvsMat3",Z.transforms.dvs);O.setUniform1f("u_time",(performance.now()-P.lastOpacityUpdate)/1E3);for(const [da,ca]of P.iconPerPageElementsMap)this._renderIconRange(r,O,ca,da,Z)}}}};m._renderIconRange=function(r,v,w,D,C){const {context:E,spriteMosaic:F}=r;this._spritesTextureSize[0]=F.getWidth(D)/4;this._spritesTextureSize[1]=F.getHeight(D)/4;v.setUniform2fv("u_mosaicSize",this._spritesTextureSize);
F.bind(E,f.TextureSamplingMode.LINEAR,D,h.VTL_TEXTURE_BINDING_UNIT_SPRITES);E.setStencilTestEnabled(!0);E.setStencilFunction(f.CompareFunction.GREATER,255,255);E.setStencilWriteMask(0);E.drawElements(f.PrimitiveType.TRIANGLES,w[1],f.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*w[0]);C.triangleCount+=w[1]/3};m._drawText=function(r,v,w,D){const {context:C,displayLevel:E,drawPhase:F,glyphMosaic:y,painter:z,pixelRatio:I,spriteMosaic:J,state:K,styleLayerUID:S,requestRender:M,allowDelayedRender:O}=
r;r=v.textMaterial;const T=z.vectorTilesMaterialManager;var N=!1;for(var P of w)if(P.layerData.has(S)){var R=P.layerData.get(S);if(0<R.glyphPerPageElementsMap.size){N=!0;break}}if(N&&(R=v.getPaintProperty("text-opacity"),!R||R.isDataDriven||0!==R.getValue(E))){R=v.getPaintProperty("text-color");var L=!R||R.isDataDriven||0<R.getValue(E)[3];R=v.getPaintProperty("text-halo-width");P=v.getPaintProperty("text-halo-color");var U=(!R||R.isDataDriven||0<R.getValue(E))&&(!P||P.isDataDriven||0<P.getValue(E)[3]);
if(L||U){R=v.getLayoutValue("text-rotation-alignment",E);R===n.RotationAlignment.AUTO&&(R=v.getLayoutValue("symbol-placement",E)===n.SymbolPlacement.POINT?n.RotationAlignment.VIEWPORT:n.RotationAlignment.MAP);P=R===n.RotationAlignment.MAP;P=v.getLayoutValue("text-keep-upright",E)&&P;N=F===g.WGLDrawPhase.HITTEST;var X=.8*3/I;this._glyphTextureSize||(this._glyphTextureSize=B.fromValues(y.width/4,y.height/4));var Z=v.getPaintValue("text-translate",E),da=v.getPaintValue("text-translate-anchor",E),ca=
this._sdfProgramOptions;ca.id=N;var W=T.getMaterialProgram(C,r,ca);if(O&&null!=M&&!W.compiled)M();else{C.useProgram(W);W.setUniformMatrix3fv("u_displayViewMat3",R===n.RotationAlignment.MAP?K.displayViewMat3:K.displayMat3);W.setUniformMatrix3fv("u_displayMat3",da===n.TranslateAnchor.VIEWPORT?K.displayMat3:K.displayViewMat3);W.setUniform2fv("u_textTranslation",Z);W.setUniform1f("u_depth",v.z+a);W.setUniform2fv("u_mosaicSize",this._glyphTextureSize);W.setUniform1f("u_mapRotation",b.degToByte(K.rotation));
W.setUniform1f("u_keepUpright",P?1:0);W.setUniform1f("u_level",10*E);W.setUniform1i("u_texture",h.VTL_TEXTURE_BINDING_UNIT_GLYPHS);W.setUniform1f("u_antialiasingWidth",X);W.setUniform1f("u_fadeDuration",u.FADE_DURATION/1E3);N&&W.setUniform4fv("u_id",D);D=-1;for(const ea of w)ea.layerData.has(S)&&(ea.key.level!==D&&(D=ea.key.level,r.setDataUniforms(W,E,v,D,J)),R=ea.layerData.get(S),0!==R.glyphPerPageElementsMap.size&&(R.prepareForRendering(C),R.updateOpacityInfo(),w=R.textVAO,null!=w&&(C.bindVAO(w),
W.setUniformMatrix3fv("u_dvsMat3",ea.transforms.dvs),C.setStencilTestEnabled(!0),C.setStencilFunction(f.CompareFunction.GREATER,255,255),C.setStencilWriteMask(0),w=(performance.now()-R.lastOpacityUpdate)/1E3,W.setUniform1f("u_time",w),R.glyphPerPageElementsMap.forEach((ia,ka)=>{this._renderGlyphRange(C,ia,ka,y,W,U,L,ea)}))))}}}};m._renderGlyphRange=function(r,v,w,D,C,E,F,y){D.bind(r,f.TextureSamplingMode.LINEAR,w,h.VTL_TEXTURE_BINDING_UNIT_GLYPHS);E&&(C.setUniform1f("u_halo",1),r.drawElements(f.PrimitiveType.TRIANGLES,
v[1],f.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*v[0]),y.triangleCount+=v[1]/3);F&&(C.setUniform1f("u_halo",0),r.drawElements(f.PrimitiveType.TRIANGLES,v[1],f.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*v[0]),y.triangleCount+=v[1]/3)};return l._createClass(q)}(c);p.WGLBrushVTLSymbol=c;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["exports"],function(p){function l(h,g){h%=g;return 0<=h?h:h+g}const B=128/
Math.PI,u=256/360,n=1/Math.LN2;p.between=function(h,g,b){return h>=g&&h<=b||h>=b&&h<=g};p.degToByte=function(h){return l(h*u,256)};p.interpolate=function(h,g,b){return h*(1-b)+g*b};p.log2=function(h){return Math.log(h)*n};p.positiveMod=l;p.radToByte=function(h){return l(h*B,256)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterialManager":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../enums","./Programs"],
function(p,l,B){return function(){function u(){this._programByKey=new Map}var n=u.prototype;n.dispose=function(){this._programByKey.forEach(h=>h.dispose());this._programByKey.clear()};n.getMaterialProgram=function(h,g,b){const e=g.key<<3|this._getMaterialOptionsValue(g.type,b);if(this._programByKey.has(e))return this._programByKey.get(e);var c=this._getProgramTemplate(g.type);({shaders:c}=c);const {vertexShader:f,fragmentShader:a}=c(b);b=g.getShaderHeader();c=g.getShaderMain();b=f.replace("#pragma header",
b).replace("#pragma main",c);h=h.programCache.acquire(b,a,g.getAttributeLocations());this._programByKey.set(e,h);return h};n._getMaterialOptionsValue=function(h,g){switch(h){case l.ShaderProgramType.BACKGROUND:return(g.pattern?1:0)<<1|(g.id?1:0);case l.ShaderProgramType.FILL:return(g.pattern?1:0)<<1|(g.id?1:0);case l.ShaderProgramType.OUTLINE:return g.id?1:0;case l.ShaderProgramType.LINE:return(g.sdf?1:0)<<2|(g.pattern?1:0)<<1|(g.id?1:0);case l.ShaderProgramType.ICON:return(g.sdf?1:0)<<1|(g.id?1:
0);case l.ShaderProgramType.CIRCLE:return g.id?1:0;case l.ShaderProgramType.TEXT:return g.id?1:0;default:return 0}};n._getProgramTemplate=function(h){switch(h){case l.ShaderProgramType.BACKGROUND:return B.background;case l.ShaderProgramType.CIRCLE:return B.circle;case l.ShaderProgramType.FILL:return B.fill;case l.ShaderProgramType.ICON:return B.icon;case l.ShaderProgramType.LINE:return B.line;case l.ShaderProgramType.OUTLINE:return B.outline;case l.ShaderProgramType.TEXT:return B.text;default:return null}};
return p._createClass(u)}()})},"esri/views/2d/engine/vectorTiles/shaders/Programs":function(){define(["exports","./sources/resolver","../../../../webgl/programUtils"],function(p,l,B){p.background={shaders:u=>({vertexShader:B.glslifyDefineMap({ID:u.id,PATTERN:u.pattern})+l.resolveIncludes("background/background.vert"),fragmentShader:B.glslifyDefineMap({ID:u.id,PATTERN:u.pattern})+l.resolveIncludes("background/background.frag")})};p.circle={shaders:u=>({vertexShader:B.glslifyDefineMap({ID:u.id})+l.resolveIncludes("circle/circle.vert"),
fragmentShader:B.glslifyDefineMap({ID:u.id})+l.resolveIncludes("circle/circle.frag")})};p.fill={shaders:u=>({vertexShader:B.glslifyDefineMap({ID:u.id,PATTERN:u.pattern})+l.resolveIncludes("fill/fill.vert"),fragmentShader:B.glslifyDefineMap({ID:u.id,PATTERN:u.pattern})+l.resolveIncludes("fill/fill.frag")})};p.icon={shaders:u=>({vertexShader:B.glslifyDefineMap({ID:u.id,SDF:u.sdf})+l.resolveIncludes("icon/icon.vert"),fragmentShader:B.glslifyDefineMap({ID:u.id,SDF:u.sdf})+l.resolveIncludes("icon/icon.frag")})};
p.line={shaders:u=>({vertexShader:B.glslifyDefineMap({ID:u.id,PATTERN:u.pattern,SDF:u.sdf})+l.resolveIncludes("line/line.vert"),fragmentShader:B.glslifyDefineMap({ID:u.id,PATTERN:u.pattern,SDF:u.sdf})+l.resolveIncludes("line/line.frag")})};p.outline={shaders:u=>({vertexShader:B.glslifyDefineMap({ID:u.id})+l.resolveIncludes("outline/outline.vert"),fragmentShader:B.glslifyDefineMap({ID:u.id})+l.resolveIncludes("outline/outline.frag")})};p.text={shaders:u=>({vertexShader:B.glslifyDefineMap({ID:u.id})+
l.resolveIncludes("text/text.vert"),fragmentShader:B.glslifyDefineMap({ID:u.id})+l.resolveIncludes("text/text.frag")})};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/sources/resolver":function(){define(["exports","./shaderRepository","../../../../../webgl/ShaderCompiler"],function(p,l,B){const u=new B.ShaderCompiler(function(n){let h=l;n.split("/").forEach(g=>{h&&(h=h[g])});return h});p.resolveIncludes=function(n){return u.resolveIncludes(n)};
Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/sources/shaderRepository":function(){define(function(){return{background:{"background.frag":"#ifdef PATTERN\nuniform lowp float u_opacity;\nuniform lowp sampler2D u_texture;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#else\nuniform lowp vec4 u_color;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main() {\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d u_opacity * color;\n#else\ngl_FragColor \x3d u_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"background.vert":"precision mediump float;\nattribute vec2 a_pos;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\nuniform mediump vec4 u_tlbr;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\n#endif\nvoid main() {\ngl_Position \x3d vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\n#ifdef PATTERN\nv_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d u_tlbr / u_mosaicSize.xyxy;\n#endif\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n}"},
circle:{"circle.frag":"precision lowp float;\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float dist \x3d length(v_offset);\nmediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\nlowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\ngl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"circle.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_circleTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_antialiasingWidth;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_stroke_color \x3d stroke_color * stroke_opacity;\nv_stroke_width \x3d stroke_width;\nv_radius \x3d radius;\nv_blur \x3d max(blur, u_antialiasingWidth / (radius + stroke_width));\nmediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\nv_offset \x3d offset;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
fill:{"fill.frag":"precision lowp float;\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d fract(v_tileTextureCoord);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d v_color[3] * color;\n#else\ngl_FragColor \x3d v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"fill.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_fillTranslation;\n#ifdef PATTERN\n#include \x3cutil/util.glsl\x3e\nuniform mediump vec2 u_mosaicSize;\nuniform mediump float u_patternFactor;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n#ifdef PATTERN\nfloat patternWidth \x3d nextPOT(tlbr.z - tlbr.x);\nfloat patternHeight \x3d nextPOT(tlbr.w - tlbr.y);\nfloat scaleX \x3d 1.0 / (patternWidth * u_patternFactor);\nfloat scaleY \x3d 1.0 / (patternHeight * u_patternFactor);\nmat3 patterMat \x3d mat3(scaleX, 0.0,    0.0,\n0.0,    -scaleY, 0.0,\n0.0,    0.0,    1.0);\nv_tileTextureCoord \x3d (patterMat * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d tlbr / u_mosaicSize.xyxy;\n#endif\nvec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
icon:{"icon.frag":"precision mediump float;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nuniform lowp vec4 u_color;\nuniform lowp vec4 u_outlineColor;\n#endif\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump flaot v_halo_width;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\n#include \x3cutil/encoding.glsl\x3e\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef SDF\nlowp vec4 fillPixelColor \x3d v_color;\nfloat d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\nconst float softEdgeRatio \x3d 0.248062016;\nfloat size \x3d max(v_size.x, v_size.y);\nfloat dist \x3d d * softEdgeRatio * size;\nfillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\nif (v_halo_width \x3e 0.25) {\nlowp vec4 outlinePixelColor \x3d u_outlineColor;\nconst float outlineLimitRatio \x3d (16.0 / 86.0);\nfloat clampedOutlineSize \x3d softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\noutlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\ngl_FragColor \x3d v_opacity * mixColors(fillPixelColor, outlinePixelColor);\n}\nelse {\ngl_FragColor \x3d v_opacity * fillPixelColor;\n}\n#else\nlowp vec4 texColor \x3d texture2D(u_texture, v_tex);\ngl_FragColor \x3d v_opacity * texColor;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"icon.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump float v_halo_width;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_iconTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nconst float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\nconst float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\nconst float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\nconst float tileCoordRatio \x3d 1.0 / 8.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nv_color \x3d color;\nv_opacity \x3d opacity;\n#ifdef SDF\nv_halo_width \x3d halo_width;\n#endif\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_opacity *\x3d interpolatedOpacity;\nmediump float a_angle         \x3d a_levelInfo[1];\nmediump float a_minLevel      \x3d a_levelInfo[2];\nmediump float a_maxLevel      \x3d a_levelInfo[3];\nmediump vec2 a_tex            \x3d a_texAngleRange.xy;\nmediump float delta_z \x3d 0.0;\nmediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_opacity, 0.0);\nvec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\nv_size \x3d abs(offset);\n#ifdef SDF\noffset \x3d (120.0 / 86.0) * offset;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_tex \x3d a_tex.xy / u_mosaicSize;\n}"},
line:{"line.frag":"precision lowp float;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\nvarying mediump float v_blur;\n#if defined (PATTERN) || defined(SDF)\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\nuniform sampler2D u_texture;\nuniform mediump float u_antialiasing;\n#endif\n#ifdef SDF\n#include \x3cutil/encoding.glsl\x3e\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\nlowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\n#ifdef PATTERN\nmediump float relativeTexX \x3d fract(v_accumulatedDistance / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color \x3d texture2D(u_texture, texCoord);\ngl_FragColor \x3d alpha * v_color[3] * color;\n#elif defined(SDF)\nmediump float relativeTexX \x3d fract((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d  0.5 + 0.25 * v_normal.y;\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist \x3d d * (v_lineHalfWidth + u_antialiasing / 2.0);\ngl_FragColor \x3d alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\n#else\ngl_FragColor \x3d alpha * v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"line.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec4 a_extrude_offset;\nattribute vec4 a_dir_normal;\nattribute vec2 a_accumulatedDistance;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump float u_zoomFactor;\nuniform mediump vec2 u_lineTranslation;\nuniform mediump float u_antialiasing;\nuniform mediump float u_depth;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nconst float scale \x3d 1.0 / 31.0;\nconst mediump float tileCoordRatio \x3d 8.0;\n#if defined (SDF)\nconst mediump float sdfPatternHalfWidth \x3d 15.5;\n#endif\n#if defined (PATTERN) || defined(SDF)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvarying mediump float v_lineHalfWidth;\nvarying mediump float v_blur;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_blur \x3d blur + u_antialiasing;\nv_normal \x3d a_dir_normal.zw * scale;\n#if defined (PATTERN) || defined(SDF)\nv_tlbr          \x3d tlbr / u_mosaicSize.xyxy;\nv_patternSize   \x3d vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\n#if defined (PATTERN)\nv_widthRatio \x3d width / v_patternSize.y;\n#else\nv_widthRatio \x3d width / sdfPatternHalfWidth / 2.0;\n#endif\n#endif\nv_lineHalfWidth \x3d (width + u_antialiasing) * 0.5;\nmediump vec2 dir \x3d a_dir_normal.xy * scale;\nmediump vec2 offset_ \x3d a_extrude_offset.zw * scale * offset;\nmediump vec2 dist \x3d v_lineHalfWidth * scale * a_extrude_offset.xy;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n#if defined (PATTERN) || defined(SDF)\nv_accumulatedDistance \x3d a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\n#endif\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n}"},
outline:{"outline.frag":"varying lowp vec4 v_color;\nvarying mediump vec2 v_normal;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist \x3d abs(v_normal.y);\nlowp float alpha \x3d smoothstep(1.0, 0.0, dist);\ngl_FragColor \x3d alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}","outline.vert":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_fillTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\nvarying lowp vec2 v_normal;\nconst float scale \x3d 1.0 / 15.0;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_normal \x3d a_xnormal;\nmediump vec2 dist \x3d u_outline_width * scale * a_offset;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
text:{"text.frag":"uniform lowp sampler2D u_texture;\nvarying lowp vec2 v_tex;\nvarying lowp vec4 v_color;\nvarying mediump float v_edgeWidth;\nvarying mediump float v_edgeDistance;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist \x3d texture2D(u_texture, v_tex).a;\nmediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\ngl_FragColor \x3d alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"text.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_textTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying lowp vec2 v_tex;\nconst float offsetPrecision \x3d 1.0 / 8.0;\nconst mediump float edgePos \x3d 0.75;\nuniform mediump float u_antialiasingWidth;\nvarying mediump float v_edgeDistance;\nvarying mediump float v_edgeWidth;\nuniform lowp float u_halo;\nconst float sdfFontScale \x3d 1.0 / 24.0;\nconst float sdfPixel \x3d 3.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nif (u_halo \x3e 0.5)\n{\nv_color \x3d halo_color * opacity;\nhalo_width *\x3d sdfPixel;\nhalo_blur *\x3d sdfPixel;\n}\nelse\n{\nv_color \x3d color * opacity;\nhalo_width \x3d 0.0;\nhalo_blur \x3d 0.0;\n}\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_color *\x3d interpolatedOpacity;\nmediump float a_angle       \x3d a_levelInfo[1];\nmediump float a_minLevel    \x3d a_levelInfo[2];\nmediump float a_maxLevel    \x3d a_levelInfo[3];\nmediump vec2 a_tex          \x3d a_texAngleRange.xy;\nmediump float a_visMinAngle    \x3d a_texAngleRange.z;\nmediump float a_visMaxAngle    \x3d a_texAngleRange.w;\nmediump float delta_z \x3d 0.0;\nmediump float angle \x3d mod(a_angle + u_mapRotation, 256.0);\nif (a_visMinAngle \x3c a_visMaxAngle)\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\n}\nelse\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\n}\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_color[3], 0.0);\nv_tex \x3d a_tex.xy / u_mosaicSize;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_edgeDistance \x3d edgePos - halo_width / size;\nv_edgeWidth \x3d (u_antialiasingWidth + halo_blur) / size;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n}"},
util:{"encoding.glsl":"const vec4 rgba2float_factors \x3d vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}","util.glsl":"float nextPOT(in float x) {\nreturn pow(2.0, ceil(log2(abs(x))));\n}"}}})},"esri/views/webgl/ShaderCompiler":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(p,l){let B=function(){function u(h){this._readFile=
h}var n=u.prototype;n.resolveIncludes=function(h){return this._resolve(h)};n._resolve=function(h,g=new Map){if(g.has(h))return g.get(h);const b=this._read(h);if(!b)throw Error(`cannot find shader file ${h}`);const e=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let c=e.exec(b);const f=[];for(;null!=c;)f.push({path:c[1],start:c.index,length:c[0].length}),c=e.exec(b);let a=0,d="";f.forEach(q=>{d+=b.slice(a,q.start);d+=g.has(q.path)?"":this._resolve(q.path,g);a=q.start+q.length});d+=b.slice(a);g.set(h,d);
return d};n._read=function(h){return this._readFile(h)};return l._createClass(u)}();p.ShaderCompiler=B;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/programUtils":function(){define(["exports"],function(p){p.glslifyDefineMap=function(l){let B="";for(const n in l){var u=l[n];if("boolean"===typeof u)u&&(B+=`#define ${n}\n`);else if("number"===typeof u)B+=`#define ${n} ${u.toFixed()}\n`;else if("object"===typeof u){const {options:h,value:g}=u;if("number"===typeof h[g]){const {value:b,
options:e,namespace:c}=u;u=c?`${c}_`:"";for(const f in e)B+=`#define ${u}${f} ${e[f].toFixed()}\n`;B+=`#define ${n} ${u}${b}\n`}else{const b=u.options;let e=0;for(const c in b)B+=`#define ${b[c]} ${(e++).toFixed()}\n`;B+=`#define ${n} ${b[u.value]}\n`}}}return B};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","./StyleDefinition","./StyleLayer"],function(p,
l,B){return function(){function u(h){this._style=h;this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName={};this._runningId=0;h.layers||(h.layers=[]);this.version=parseFloat(h.version);if(this.layers=h.layers.map((g,b,e)=>this._create(g,b,e)).filter(g=>!!g))for(let g=0;g<this.layers.length;g++)h=this.layers[g],this._layerByName[h.id]=h,this._uidToLayer.set(h.uid,h),h.type===l.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(h.id);this._identifyRefLayers()}var n=u.prototype;
n.isPainterDataDriven=function(h){return(h=this._layerByName[h])?h.isPainterDataDriven():!1};n.getStyleLayerId=function(h){return h>=this.layers.length?null:this.layers[h].id};n.getStyleLayerByUID=function(h){return this._uidToLayer.get(h)??null};n.getStyleLayerIndex=function(h){return(h=this._layerByName[h])?this.layers.indexOf(h):-1};n.setStyleLayer=function(h,g){if(h&&h.id){var b=this._style;null!=g&&g>=this.layers.length&&(g=this.layers.length-1);var e=!0,c;if(c=this._layerByName[h.id]){const f=
this.layers.indexOf(c);g||(g=f);g===f?(e=!1,c=u._recreateLayer(h,c),this.layers[g]=c,b.layers[g]=h):(this.layers.splice(f,1),b.layers.splice(f,1),c=this._create(h,g,this.layers),this.layers.splice(g,0,c),b.layers.splice(g,0,h))}else c=this._create(h,g,this.layers),!g||g>=this.layers.length?(this.layers.push(c),b.layers.push(h)):(this.layers.splice(g,0,c),b.layers.splice(g,0,h));this._layerByName[h.id]=c;this._uidToLayer.set(c.uid,c);e&&this._recomputeZValues();this._identifyRefLayers()}};n.getStyleLayer=
function(h){return(h=this._layerByName[h])?{type:h.typeName,id:h.id,source:h.source,"source-layer":h.sourceLayer,minzoom:h.minzoom,maxzoom:h.maxzoom,filter:h.filter,layout:h.layout,paint:h.paint}:null};n.deleteStyleLayer=function(h){const g=this._layerByName[h];g&&(delete this._layerByName[h],this._uidToLayer.delete(g.uid),h=this.layers.indexOf(g),this.layers.splice(h,1),this._style.layers.splice(h,1),this._recomputeZValues(),this._identifyRefLayers())};n.getLayerById=function(h){return this._layerByName[h]};
n.getLayoutProperties=function(h){return(h=this._layerByName[h])?h.layout:null};n.getPaintProperties=function(h){return(h=this._layerByName[h])?h.paint:null};n.setPaintProperties=function(h,g){if(h=this._layerByName[h]){var b=u._recreateLayer({type:h.typeName,id:h.id,source:h.source,"source-layer":h.sourceLayer,minzoom:h.minzoom,maxzoom:h.maxzoom,filter:h.filter,layout:h.layout,paint:g},h),e=this.layers.indexOf(h);this.layers[e]=b;this._style.layers[e].paint=g;this._layerByName[h.id]=b;this._uidToLayer.set(h.uid,
b)}};n.setLayoutProperties=function(h,g){if(h=this._layerByName[h]){var b=u._recreateLayer({type:h.typeName,id:h.id,source:h.source,"source-layer":h.sourceLayer,minzoom:h.minzoom,maxzoom:h.maxzoom,filter:h.filter,layout:g,paint:h.paint},h),e=this.layers.indexOf(h);this.layers[e]=b;this._style.layers[e].layout=g;this._layerByName[h.id]=b;this._uidToLayer.set(h.uid,b)}};n.setStyleLayerVisibility=function(h,g){if(h=this._layerByName[h]){var b=h.layout||{};b.visibility=g;g=u._recreateLayer({type:h.typeName,
id:h.id,source:h.source,"source-layer":h.sourceLayer,minzoom:h.minzoom,maxzoom:h.maxzoom,filter:h.filter,layout:b,paint:h.paint},h);var e=this.layers.indexOf(h);this.layers[e]=g;this._style.layers[e].layout=b;this._layerByName[h.id]=g;this._uidToLayer.set(h.uid,g)}};n.getStyleLayerVisibility=function(h){return(h=this._layerByName[h])?h.layout?.visibility??"visible":"none"};n._recomputeZValues=function(){const h=this.layers,g=1/(h.length+1);for(let b=0;b<h.length;b++)h[b].z=1-(1+b)*g};n._identifyRefLayers=
function(){const h=[],g=[];let b=0;for(const f of this.layers){const a=f.layout;if(f.type===l.StyleLayerType.FILL){var e=f,c=f.source+"|"+f.sourceLayer;c+="|"+(a?.visibility??"");c+="|"+f.minzoom;c+="|"+f.maxzoom;c+="|"+JSON.stringify(f.filter);if(e.hasDataDrivenFill||e.hasDataDrivenOutline)c+="|"+b;h.push({key:c,layer:f})}else if(f.type===l.StyleLayerType.LINE){e=f;c=f.paint;c=null!=c&&(null!=c["line-pattern"]||null!=c["line-dasharray"]);let d=f.source+"|"+f.sourceLayer;d+="|"+(a?.visibility??"");
d+="|"+f.minzoom;d+="|"+f.maxzoom;d+="|"+JSON.stringify(f.filter);d+="|"+(void 0!==a?a["line-cap"]:"");d+="|"+(void 0!==a?a["line-join"]:"");if(e.hasDataDrivenLine||c)d+="|"+b;g.push({key:d,layer:f})}++b}this._assignRefLayers(h);this._assignRefLayers(g)};n._assignRefLayers=function(h){h.sort((a,d)=>a.key<d.key?-1:a.key>d.key?1:0);let g,b;const e=h.length;for(let a=0;a<e;a++){const d=h[a];if(d.key===g)d.layer.refLayerId=b;else if(g=d.key,b=d.layer.id,d.layer.type===l.StyleLayerType.FILL){if(!d.layer.getPaintProperty("fill-outline-color"))for(var c=
a+1;c<e;c++){var f=h[c];if(f.key===g){if(f.layer.getPaintProperty("fill-outline-color")){h[a]=f;h[c]=d;b=f.layer.id;break}}else break}}else if(d.layer.type===l.StyleLayerType.LINE)for(c=d.layer,f=a+1;f<e;f++){const q=h[f];if(q.key!==g)break;const m=q.layer;if(c.canUseThinTessellation&&!m.canUseThinTessellation||!c.canUseThinTessellation&&(m.getPaintProperty("line-pattern")||m.getPaintProperty("line-dasharray")))c=m,h[a]=q,h[f]=d,b=q.layer.id}}};n._create=function(h,g,b){g=1-1/(b.length+1)*(1+g);b=
this._runningId++;switch(h.type){case "background":return new B.BackgroundStyleLayer(l.StyleLayerType.BACKGROUND,h,g,b);case "fill":return new B.FillStyleLayer(l.StyleLayerType.FILL,h,g,b);case "line":return new B.LineStyleLayer(l.StyleLayerType.LINE,h,g,b);case "symbol":return new B.SymbolStyleLayer(l.StyleLayerType.SYMBOL,h,g,b);case "raster":console.warn(`Unsupported vector tile raster layer ${h.id}`);break;case "circle":return new B.CircleStyleLayer(l.StyleLayerType.CIRCLE,h,g,b)}return null};
u._recreateLayer=function(h,g){switch(h.type){case "background":return new B.BackgroundStyleLayer(l.StyleLayerType.BACKGROUND,h,g.z,g.uid);case "fill":return new B.FillStyleLayer(l.StyleLayerType.FILL,h,g.z,g.uid);case "line":return new B.LineStyleLayer(l.StyleLayerType.LINE,h,g.z,g.uid);case "symbol":return new B.SymbolStyleLayer(l.StyleLayerType.SYMBOL,h,g.z,g.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${h.id}`);break;case "circle":return new B.CircleStyleLayer(l.StyleLayerType.CIRCLE,
h,g.z,g.uid)}return null};return p._createClass(u)}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../enums ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),function(p,l,B,u,n,h,g,b,e,c,f,a){p.CapType=void 0;(function(E){E[E.BUTT=0]="BUTT";E[E.ROUND=
1]="ROUND";E[E.SQUARE=2]="SQUARE";E[E.UNKNOWN=4]="UNKNOWN"})(p.CapType||(p.CapType={}));let d=function(){function E(y,z,I,J){this.type=y;this.typeName=z.type;this.id=z.id;this.source=z.source;this.sourceLayer=z["source-layer"];this.minzoom=z.minzoom;this.maxzoom=z.maxzoom;this.filter=z.filter;this.layout=z.layout;this.paint=z.paint;this.z=I;this.uid=J;switch(y){case c.StyleLayerType.BACKGROUND:this._layoutDefinition=c.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=c.StyleDefinition.backgroundPaintDefinition;
break;case c.StyleLayerType.FILL:this._layoutDefinition=c.StyleDefinition.fillLayoutDefinition;this._paintDefinition=c.StyleDefinition.fillPaintDefinition;break;case c.StyleLayerType.LINE:this._layoutDefinition=c.StyleDefinition.lineLayoutDefinition;this._paintDefinition=c.StyleDefinition.linePaintDefinition;break;case c.StyleLayerType.SYMBOL:this._layoutDefinition=c.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=c.StyleDefinition.symbolPaintDefinition;break;case c.StyleLayerType.CIRCLE:this._layoutDefinition=
c.StyleDefinition.circleLayoutDefinition,this._paintDefinition=c.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}var F=E.prototype;F.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=e.createFilter(this.filter)};F.getLayoutProperty=function(y){return this._layoutProperties[y]};F.getPaintProperty=function(y){return this._paintProperties[y]};F.getLayoutValue=
function(y,z,I){let J;const K=this._layoutProperties[y];K&&(J=K.getValue(z,I));void 0===J&&(J=this._layoutDefinition[y]["default"]);return J};F.getPaintValue=function(y,z,I){let J;const K=this._paintProperties[y];K&&(J=K.getValue(z,I));void 0===J&&(J=this._paintDefinition[y]["default"]);return J};F.isPainterDataDriven=function(){const y=this._paintProperties;if(y)for(const z in y)if(y[z].isDataDriven)return!0;return!1};F._parseLayout=function(y){const z={};for(const I in y){const J=this._layoutDefinition[I];
J&&(z[I]=new f(J,y[I]))}return z};F._parsePaint=function(y){const z={};for(const I in y){const J=this._paintDefinition[I];J&&(z[I]=new f(J,y[I]))}return z};F.computeAttributesKey=function(y,z,I,J){let K=0,S=0;for(const M of z){z=3;if(!M||M!==J){const {isLayout:O,isOptional:T}=I[M];z=O?this.getLayoutProperty(M):this.getPaintProperty(M);z=z?.interpolator?2:z?.isDataDriven?1:T&&!z?3:0}S|=z<<K;K+=2}return S<<3|y};return l._createClass(E)}(),q=function(E){function F(y,z,I,J){y=E.call(this,y,z,I,J)||this;
y.backgroundMaterial=new u.VTLBackgroundMaterial(y.computeAttributesKey(B.ShaderProgramType.BACKGROUND,u.VTLBackgroundMaterial.ATTRIBUTES,u.VTLBackgroundMaterial.ATTRIBUTES_INFO));return y}l._inherits(F,E);return l._createClass(F)}(d),m=function(E){function F(y,z,I,J){y=E.call(this,y,z,I,J)||this;z=y.getPaintProperty("fill-color");I=y.getPaintProperty("fill-opacity");J=y.getPaintProperty("fill-pattern");y.hasDataDrivenColor=z?.isDataDriven;y.hasDataDrivenOpacity=I?.isDataDriven;y.hasDataDrivenFill=
y.hasDataDrivenColor||y.hasDataDrivenOpacity||J?.isDataDriven;I=y.getPaintProperty("fill-outline-color");y.outlineUsesFillColor=!I;y.hasDataDrivenOutlineColor=I?.isDataDriven;y.hasDataDrivenOutline=I?I.isDataDriven:z?z.isDataDriven:!1;y.hasDataDrivenOutline=(I?y.hasDataDrivenOutlineColor:y.hasDataDrivenColor)||y.hasDataDrivenOpacity;y.fillMaterial=new h.VTLFillMaterial(y.computeAttributesKey(B.ShaderProgramType.FILL,h.VTLFillMaterial.ATTRIBUTES,h.VTLFillMaterial.ATTRIBUTES_INFO));y.outlineMaterial=
new h.VTLOutlineMaterial(y.computeAttributesKey(B.ShaderProgramType.OUTLINE,y.outlineUsesFillColor?h.VTLOutlineMaterial.ATTRIBUTES_FILL:h.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,y.outlineUsesFillColor?h.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:h.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),y.outlineUsesFillColor);return y}l._inherits(F,E);return l._createClass(F)}(d),r=function(E){function F(y,z,I,J){y=E.call(this,y,z,I,J)||this;z=y.getPaintProperty("line-pattern");y.lineMaterial=new g.VTLLineMaterial(y.computeAttributesKey(B.ShaderProgramType.LINE,
g.VTLLineMaterial.ATTRIBUTES,g.VTLLineMaterial.ATTRIBUTES_INFO,z?"line-dasharray":""));y.hasDataDrivenLine=y.getPaintProperty("line-blur")?.isDataDriven||y.getPaintProperty("line-color")?.isDataDriven||y.getPaintProperty("line-gap-width")?.isDataDriven||y.getPaintProperty("line-offset")?.isDataDriven||y.getPaintProperty("line-opacity")?.isDataDriven||y.getPaintProperty("line-pattern")?.isDataDriven||y.getPaintProperty("line-dasharray")?.isDataDriven||y.getLayoutProperty("line-cap")?.isDataDriven||
y.getPaintProperty("line-width")?.isDataDriven;y.canUseThinTessellation=!1;!y.hasDataDrivenLine&&(z=y.getPaintProperty("line-width"),!z||"number"===typeof z&&.5*z<a.THIN_LINE_HALF_WIDTH_THRESHOLD)&&(z=y.getPaintProperty("line-offset"),!z||"number"===typeof z&&0===z)&&(y.canUseThinTessellation=!0);return y}l._inherits(F,E);F.prototype.getDashKey=function(y,z){switch(z){case p.CapType.BUTT:z="Butt";break;case p.CapType.ROUND:z="Round";break;case p.CapType.SQUARE:z="Square";break;default:z="Butt"}return`dasharray-[${y.toString()}]-${z}`};
return l._createClass(F)}(d),v=function(E){function F(y,z,I,J){y=E.call(this,y,z,I,J)||this;y.iconMaterial=new b.VTLIconMaterial(y.computeAttributesKey(B.ShaderProgramType.ICON,b.VTLIconMaterial.ATTRIBUTES,b.VTLIconMaterial.ATTRIBUTES_INFO));y.textMaterial=new b.VTLTextMaterial(y.computeAttributesKey(B.ShaderProgramType.TEXT,b.VTLTextMaterial.ATTRIBUTES,b.VTLTextMaterial.ATTRIBUTES_INFO));y.hasDataDrivenIcon=y.getPaintProperty("icon-color")?.isDataDriven||y.getPaintProperty("icon-halo-blur")?.isDataDriven||
y.getPaintProperty("icon-halo-color")?.isDataDriven||y.getPaintProperty("icon-halo-width")?.isDataDriven||y.getPaintProperty("icon-opacity")?.isDataDriven||y.getLayoutProperty("icon-size")?.isDataDriven;y.hasDataDrivenText=y.getPaintProperty("text-color")?.isDataDriven||y.getPaintProperty("text-halo-blur")?.isDataDriven||y.getPaintProperty("text-halo-color")?.isDataDriven||y.getPaintProperty("text-halo-width")?.isDataDriven||y.getPaintProperty("text-opacity")?.isDataDriven||y.getLayoutProperty("text-size")?.isDataDriven;
return y}l._inherits(F,E);return l._createClass(F)}(d),w=function(E){function F(y,z,I,J){y=E.call(this,y,z,I,J)||this;y.circleMaterial=new n.VTLCircleMaterial(y.computeAttributesKey(B.ShaderProgramType.CIRCLE,n.VTLCircleMaterial.ATTRIBUTES,n.VTLCircleMaterial.ATTRIBUTES_INFO));return y}l._inherits(F,E);return l._createClass(F)}(d),D=function(){function E(F,y,z){this.allowOverlap=F.getLayoutValue("icon-allow-overlap",y);this.ignorePlacement=F.getLayoutValue("icon-ignore-placement",y);this.keepUpright=
F.getLayoutValue("icon-keep-upright",y);this.optional=F.getLayoutValue("icon-optional",y);this.rotationAlignment=F.getLayoutValue("icon-rotation-alignment",y);this.rotationAlignment===c.RotationAlignment.AUTO&&(this.rotationAlignment=z?c.RotationAlignment.MAP:c.RotationAlignment.VIEWPORT);z=F.getLayoutProperty("icon-anchor");z?.isDataDriven?this._anchorProp=z:this.anchor=F.getLayoutValue("icon-anchor",y);z=F.getLayoutProperty("icon-offset");z?.isDataDriven?this._offsetProp=z:this.offset=F.getLayoutValue("icon-offset",
y);z=F.getLayoutProperty("icon-padding");z?.isDataDriven?this._paddingProp=z:this.padding=F.getLayoutValue("icon-padding",y);z=F.getLayoutProperty("icon-rotate");z?.isDataDriven?this._rotateProp=z:this.rotate=F.getLayoutValue("icon-rotate",y);z=F.getLayoutProperty("icon-size");z?.isDataDriven?this._sizeProp=z:this.size=F.getLayoutValue("icon-size",y)}E.prototype.update=function(F,y){this._anchorProp&&(this.anchor=this._anchorProp.getValue(F,y));this._offsetProp&&(this.offset=this._offsetProp.getValue(F,
y));this._paddingProp&&(this.padding=this._paddingProp.getValue(F,y));this._rotateProp&&(this.rotate=this._rotateProp.getValue(F,y));this._sizeProp&&(this.size=this._sizeProp.getValue(F,y))};return l._createClass(E)}(),C=function(){function E(F,y,z){this.allowOverlap=F.getLayoutValue("text-allow-overlap",y);this.ignorePlacement=F.getLayoutValue("text-ignore-placement",y);this.keepUpright=F.getLayoutValue("text-keep-upright",y);this.optional=F.getLayoutValue("text-optional",y);this.rotationAlignment=
F.getLayoutValue("text-rotation-alignment",y);this.rotationAlignment===c.RotationAlignment.AUTO&&(this.rotationAlignment=z?c.RotationAlignment.MAP:c.RotationAlignment.VIEWPORT);z=F.getLayoutProperty("text-anchor");z?.isDataDriven?this._anchorProp=z:this.anchor=F.getLayoutValue("text-anchor",y);z=F.getLayoutProperty("text-justify");z?.isDataDriven?this._justifyProp=z:this.justify=F.getLayoutValue("text-justify",y);z=F.getLayoutProperty("text-letter-spacing");z?.isDataDriven?this._letterSpacingProp=
z:this.letterSpacing=F.getLayoutValue("text-letter-spacing",y);z=F.getLayoutProperty("text-line-height");z?.isDataDriven?this._lineHeightProp=z:this.lineHeight=F.getLayoutValue("text-line-height",y);z=F.getLayoutProperty("text-max-angle");z?.isDataDriven?this._maxAngleProp=z:this.maxAngle=F.getLayoutValue("text-max-angle",y);z=F.getLayoutProperty("text-max-width");z?.isDataDriven?this._maxWidthProp=z:this.maxWidth=F.getLayoutValue("text-max-width",y);z=F.getLayoutProperty("text-offset");z?.isDataDriven?
this._offsetProp=z:this.offset=F.getLayoutValue("text-offset",y);z=F.getLayoutProperty("text-padding");z?.isDataDriven?this._paddingProp=z:this.padding=F.getLayoutValue("text-padding",y);z=F.getLayoutProperty("text-rotate");z?.isDataDriven?this._rotateProp=z:this.rotate=F.getLayoutValue("text-rotate",y);z=F.getLayoutProperty("text-size");z?.isDataDriven?this._sizeProp=z:this.size=F.getLayoutValue("text-size",y);z=F.getLayoutProperty("text-writing-mode");z?.isDataDriven?this._writingModeProp=z:this.writingMode=
F.getLayoutValue("text-writing-mode",y)}E.prototype.update=function(F,y){this._anchorProp&&(this.anchor=this._anchorProp.getValue(F,y));this._justifyProp&&(this.justify=this._justifyProp.getValue(F,y));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(F,y));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(F,y));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(F,y));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(F,y));this._offsetProp&&
(this.offset=this._offsetProp.getValue(F,y));this._paddingProp&&(this.padding=this._paddingProp.getValue(F,y));this._rotateProp&&(this.rotate=this._rotateProp.getValue(F,y));this._sizeProp&&(this.size=this._sizeProp.getValue(F,y));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(F,y))};return l._createClass(E)}();p.BackgroundStyleLayer=q;p.CircleStyleLayer=w;p.FillStyleLayer=m;p.IconLayout=D;p.LineStyleLayer=r;p.StyleLayer=d;p.SymbolStyleLayer=v;p.TextLayout=C;Object.defineProperty(p,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(p,l,B,u,n){B=function(h){function g(e){return h.call(this,e)||this}l._inherits(g,h);var b=g.prototype;b.geometryInfo=function(){return g.GEOMETRY_LAYOUT};b.opacityInfo=function(){return null};b.attributes=function(){return g.ATTRIBUTES};
b.attributesInfo=function(){return g.ATTRIBUTES_INFO};return l._createClass(g)}(B.VTLMaterial);B.ATTRIBUTES=[];B.GEOMETRY_LAYOUT=[new n.VertexElementDescriptor("a_pos",2,u.DataType.BYTE,0,2)];B.ATTRIBUTES_INFO={};p.VTLBackgroundMaterial=B;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../MemoryBuffer ./enums ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(p,l,B,u,n,h){let g=function(){function c(a){this._locations=new Map;this._key=a}var f=c.prototype;f.defines=function(){return[]};f.getStride=function(){this._layoutInfo||this._buildAttributesInfo();return this._stride};f.getAttributeLocations=function(){0===this._locations.size&&this._buildAttributesInfo();return this._locations};f.getLayoutInfo=function(){this._layoutInfo||this._buildAttributesInfo();return this._layoutInfo};f.getEncodingInfos=function(){this._propertyEncodingInfo||this._buildAttributesInfo();
return this._propertyEncodingInfo};f.getUniforms=function(){this._uniforms||this._buildAttributesInfo();return this._uniforms};f.getShaderHeader=function(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader};f.getShaderMain=function(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain};f.setDataUniforms=function(a,d,q,m,r){var v=this.getUniforms();for(const w of v){const {name:D,type:C,getValue:E}=w;v=E(q,d,m,r);if(null!==v)switch(C){case "float":a.setUniform1f(D,
v);break;case "vec2":a.setUniform2fv(D,v);break;case "vec4":a.setUniform4fv(D,v)}}};f.encodeAttributes=function(a,d,q,m){const r=this.attributesInfo(),v=this.getEncodingInfos(),w=[];let D=0,C=0;for(const F of Object.keys(v)){var E=v[F];const {type:y,precisionFactor:z,isLayout:I}=r[F],J=I?q.getLayoutProperty(F):q.getPaintProperty(F),K=J.interpolator?.getInterpolationRange(d);let S=0;for(const M of E){const {offset:O,bufferElementsToAdd:T}=M;if(0<T){for(E=0;E<T;E++)w.push(0);D+=C;C=M.bufferElementsToAdd}E=
m??J.getValue(K?K[S]:d,a);switch(y){case u.EncodingType.R8_SIGNED:case u.EncodingType.R8_UNSIGNED:w[D]|=this._encodeByte(E*(z||1),8*O);break;case u.EncodingType.R16_SIGNED:case u.EncodingType.R16_UNSIGNED:w[D]|=this._encodeShort(E*(z||1),8*O);break;case u.EncodingType.R8G8_SIGNED:case u.EncodingType.R8G8_UNSIGNED:w[D]|=this._encodeByte(E*(z||1),8*O);w[D]|=this._encodeByte(E*(z||1),8*O+8);break;case u.EncodingType.R16G16_SIGNED:case u.EncodingType.R16G16_UNSIGNED:w[D]|=this._encodeShort(E*(z||1),8*
O);w[D]|=this._encodeShort(E*(z||1),8*O+16);break;case u.EncodingType.R8G8B8A8_SIGNED:case u.EncodingType.R8G8B8A8_UNSIGNED:w[D]|=this._encodeByte(E*(z||1),8*O);w[D]|=this._encodeByte(E*(z||1),8*O+8);w[D]|=this._encodeByte(E*(z||1),8*O+16);w[D]|=this._encodeByte(E*(z||1),8*O+24);break;case u.EncodingType.R8G8B8A8_COLOR:w[D]=this._encodeColor(E);break;case u.EncodingType.R16G16B16A16_DASHARRAY:case u.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(D,w,E);break;default:throw Error("Unsupported encoding type");
}S++}}return w};f.getAtributeState=function(a){const d=3+2*a;a=0|this._bit(d);return a|=this._bit(d+1)<<1};f._buildAttributesInfo=function(){const a=[],d={};var q={},m=-1;const r=this.attributesInfo();var v=this.attributes();let w=-1;for(const F of v){w++;v=this.getAtributeState(w);if(v===u.AttributeStatus.UNIFORM||v===u.AttributeStatus.UNUSED)continue;var D=r[F];const y=[];d[F]=y;D=D.type;for(let z=0;z<v;z++){const {dataType:I,bytesPerElement:J,count:K,normalized:S}=c._encodingInfo[D],M=J*K;var C=
`${I}-${!0===S}`;let O=q[C],T=0;!O||4<O.count+K?(m++,O={dataIndex:m,count:0,offset:0},4!==K&&(q[C]=O),a.push({location:-1,name:"a_data_"+m,count:K,type:I,normalized:S}),T=Math.ceil(Math.max(M/4,1))):(C=a[O.dataIndex],C.count+=K,T=Math.ceil(Math.max(C.count*J/4,1))-Math.ceil(Math.max(O.offset/4,1)));y.push({dataIndex:O.dataIndex,offset:O.offset,bufferElementsToAdd:T});O.offset+=M;O.count+=K}}for(const F of a)switch(F.type){case n.DataType.BYTE:case n.DataType.UNSIGNED_BYTE:F.count=4;break;case n.DataType.SHORT:case n.DataType.UNSIGNED_SHORT:F.count+=
F.count%2}this._buildVertexBufferLayout(a);q=0;m=this._layoutInfo.geometry;for(var E of m)this._locations.set(E.name,q++);if(E=this._layoutInfo.opacity)for(const F of E)this._locations.set(F.name,q++);this._buildShaderInfo(a,d);this._propertyEncodingInfo=d};f._buildVertexBufferLayout=function(a){const d={},q=this.geometryInfo();let m=q[0].stride;if(0===a.length)d.geometry=q;else{const r=[];let v=m;for(const w of a)m+=b(w.type)*w.count;for(const w of q)r.push(new h.VertexElementDescriptor(w.name,w.count,
w.type,w.offset,m,w.normalized));for(const w of a)r.push(new h.VertexElementDescriptor(w.name,w.count,w.type,v,m,w.normalized)),v+=b(w.type)*w.count;d.geometry=r}this.opacityInfo()&&(d.opacity=this.opacityInfo());this._layoutInfo=d;this._stride=m};f._buildShaderInfo=function(a,d){let q="\n",m="\n";const r=[];for(var v of a)q+=`attribute ${this._getType(v.count)} ${v.name};\n`;var w=this.attributes();a=this.attributesInfo();v=-1;for(const E of w){v++;const {name:F,type:y,precisionFactor:z,isLayout:I}=
a[E];w=z&&1!==z?` * ${1/z}`:"";const {bytesPerElement:J,count:K}=c._encodingInfo[y];var D=S=>`a_data_${S.dataIndex}${e(K,S.offset,J)}`;switch(this.getAtributeState(v)){case u.AttributeStatus.UNIFORM:w=this._getType(K);var C=`u_${F}`;r.push({name:C,type:w,getValue:(M,O,T,N)=>{T=I?M.getLayoutValue(E,O):M.getPaintValue(E,O);if(y===u.EncodingType.R16G16B16A16_DASHARRAY){M=M.getDashKey(T,M.getLayoutValue("line-cap",O));N=N.getMosaicItemPosition(M,!1);if(null==N)return null;const {tl:P,br:R}=N;return[P[0],
R[1],R[0],P[1]]}if(y===u.EncodingType.R16G16B16A16_PATTERN){N=N.getMosaicItemPosition(T,!E.includes("line-"));if(null==N)return null;const {tl:P,br:R}=N;return[P[0],R[1],R[0],P[1]]}return y===u.EncodingType.R8G8B8A8_COLOR?(N=T[3],[N*T[0],N*T[1],N*T[2],N]):T}});q+=`uniform ${w} ${C};\n`;m+=`${w} ${F} = ${C};\n`;break;case u.AttributeStatus.DATA_DRIVEN:C=D(d[E][0]);m+=`${this._getType(K)} ${F} = ${C}${w};\n`;break;case u.AttributeStatus.INTERPOLATED_DATA_DRIVEN:C=`u_t_${F}`;r.push({name:C,type:"float",
getValue:(M,O,T,N)=>(I?M.getLayoutProperty(E):M.getPaintProperty(E)).interpolator.interpolationUniformValue(T,O)});q+=`uniform float ${C};\n`;const S=D(d[E][0]);D=D(d[E][1]);m+=`${this._getType(K)} ${F} = mix(${S}${w}, ${D}${w}, ${C});\n`}}this._shaderHeader=q;this._shaderMain=m;this._uniforms=r};f._bit=function(a){return(this._key&1<<a)>>a};f._getType=function(a){switch(a){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");};f._encodeColor=
function(a){const d=255*a[3];return B.i8888to32(a[0]*d,a[1]*d,a[2]*d,d)};f._encodePattern=function(a,d,q){if(q&&q.rect){var m=q.rect,r=q.width;q=q.height;d[a]=this._encodeShort(m.x+2,0);d[a]|=this._encodeShort(m.y+2+q,16);d[a+1]=this._encodeShort(m.x+2+r,0);d[a+1]|=this._encodeShort(m.y+2,16)}};f._encodeByte=function(a,d){return(a&255)<<d};f._encodeShort=function(a,d){return(a&65535)<<d};l._createClass(c,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return this._key&7}}]);
return c}();g._encodingInfo={[u.EncodingType.R8_SIGNED]:{dataType:n.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[u.EncodingType.R8_UNSIGNED]:{dataType:n.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[u.EncodingType.R16_SIGNED]:{dataType:n.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[u.EncodingType.R16_UNSIGNED]:{dataType:n.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[u.EncodingType.R8G8_SIGNED]:{dataType:n.DataType.BYTE,bytesPerElement:1,
count:2,normalized:!1},[u.EncodingType.R8G8_UNSIGNED]:{dataType:n.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[u.EncodingType.R16G16_SIGNED]:{dataType:n.DataType.SHORT,bytesPerElement:2,count:2,normalized:!1},[u.EncodingType.R16G16_UNSIGNED]:{dataType:n.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[u.EncodingType.R8G8B8A8_SIGNED]:{dataType:n.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[u.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:n.DataType.UNSIGNED_BYTE,
bytesPerElement:1,count:4,normalized:!1},[u.EncodingType.R8G8B8A8_COLOR]:{dataType:n.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[u.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:n.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[u.EncodingType.R16G16B16A16_PATTERN]:{dataType:n.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const b=c=>{switch(c){case n.DataType.FLOAT:return 4;case n.DataType.INT:return 4;case n.DataType.UNSIGNED_INT:return 4;
case n.DataType.SHORT:return 2;case n.DataType.UNSIGNED_SHORT:return 2;case n.DataType.BYTE:return 1;case n.DataType.UNSIGNED_BYTE:return 1}},e=(c,f,a)=>{f/=a;if(1===c)switch(f){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===c)switch(f){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===c)switch(f){case 0:return".xyz";case 1:return".yzw"}return""};p.VTLMaterial=g;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],
function(p){return function(){function l(u){this._array=[];0>=u&&console.error("strideInBytes must be positive!");this._stride=u}var B=l.prototype;B.reset=function(){this.array.length=0};B.toBuffer=function(){return(new Uint32Array(this._array)).buffer};l.i1616to32=function(u,n){return 65535&u|n<<16};l.i8888to32=function(u,n,h,g){return u&255|(n&255)<<8|(h&255)<<16|g<<24};l.i8816to32=function(u,n,h){return u&255|(n&255)<<8|h<<16};p._createClass(l,[{key:"array",get:function(){return this._array}},
{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",get:function(){return 4*this._array.length}}]);return l}()})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],function(p){p.EncodingType=void 0;(function(l){l[l.R8_SIGNED=0]="R8_SIGNED";l[l.R8_UNSIGNED=1]="R8_UNSIGNED";l[l.R16_SIGNED=2]="R16_SIGNED";l[l.R16_UNSIGNED=3]="R16_UNSIGNED";l[l.R8G8_SIGNED=4]="R8G8_SIGNED";l[l.R8G8_UNSIGNED=
5]="R8G8_UNSIGNED";l[l.R16G16_SIGNED=6]="R16G16_SIGNED";l[l.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";l[l.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";l[l.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";l[l.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";l[l.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";l[l.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(p.EncodingType||(p.EncodingType={}));p.AttributeStatus=void 0;(function(l){l[l.UNIFORM=0]="UNIFORM";l[l.DATA_DRIVEN=1]="DATA_DRIVEN";l[l.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";
l[l.UNUSED=3]="UNUSED"})(p.AttributeStatus||(p.AttributeStatus={}));Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(p,l,B,u,n,h){u=function(g){function b(c){return g.call(this,c)||this}l._inherits(b,g);var e=b.prototype;e.geometryInfo=function(){return b.GEOMETRY_LAYOUT};
e.opacityInfo=function(){return null};e.attributes=function(){return b.ATTRIBUTES};e.attributesInfo=function(){return b.ATTRIBUTES_INFO};return l._createClass(b)}(u.VTLMaterial);u.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");u.GEOMETRY_LAYOUT=[new h.VertexElementDescriptor("a_pos",2,n.DataType.SHORT,0,4)];u.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:B.EncodingType.R8_UNSIGNED},"circle-color":{name:"color",
type:B.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:B.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:B.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:B.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:B.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:B.EncodingType.R8_UNSIGNED,precisionFactor:32}};p.VTLCircleMaterial=u;Object.defineProperty(p,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(p,l,B,u,n,h){let g=function(b){function e(f){return b.call(this,f)||this}l._inherits(e,b);var c=e.prototype;c.geometryInfo=function(){return e.GEOMETRY_LAYOUT};c.opacityInfo=function(){return null};c.attributes=function(){return e.ATTRIBUTES};
c.attributesInfo=function(){return e.ATTRIBUTES_INFO};return l._createClass(e)}(u.VTLMaterial);g.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];g.GEOMETRY_LAYOUT=[new h.VertexElementDescriptor("a_pos",2,n.DataType.SHORT,0,4)];g.ATTRIBUTES_INFO={"fill-color":{name:"color",type:B.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:B.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:B.EncodingType.R16G16B16A16_PATTERN,isOptional:!0}};u=function(b){function e(f,
a){f=b.call(this,f)||this;f._usefillColor=a;return f}l._inherits(e,b);var c=e.prototype;c.geometryInfo=function(){return e.GEOMETRY_LAYOUT};c.opacityInfo=function(){return null};c.attributes=function(){return this._usefillColor?e.ATTRIBUTES_FILL:e.ATTRIBUTES_OUTLINE};c.attributesInfo=function(){return this._usefillColor?e.ATTRIBUTES_INFO_FILL:e.ATTRIBUTES_INFO_OUTLINE};return l._createClass(e)}(u.VTLMaterial);u.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"];u.ATTRIBUTES_FILL=["fill-color",
"fill-opacity"];u.GEOMETRY_LAYOUT=[new h.VertexElementDescriptor("a_pos",2,n.DataType.SHORT,0,8),new h.VertexElementDescriptor("a_offset",2,n.DataType.BYTE,4,8),new h.VertexElementDescriptor("a_xnormal",2,n.DataType.BYTE,6,8)];u.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:B.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:B.EncodingType.R8_UNSIGNED,precisionFactor:100}};u.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:B.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",
type:B.EncodingType.R8_UNSIGNED,precisionFactor:100}};p.VTLFillMaterial=g;p.VTLOutlineMaterial=u;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(p,l,B,u,n,h){u=function(g){function b(c){return g.call(this,c)||this}l._inherits(b,g);var e=b.prototype;
e.geometryInfo=function(){return b.GEOMETRY_LAYOUT};e.opacityInfo=function(){return null};e.attributes=function(){return b.ATTRIBUTES};e.attributesInfo=function(){return b.ATTRIBUTES_INFO};return l._createClass(b)}(u.VTLMaterial);u.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");u.GEOMETRY_LAYOUT=[new h.VertexElementDescriptor("a_pos",2,n.DataType.SHORT,0,16),new h.VertexElementDescriptor("a_extrude_offset",4,n.DataType.BYTE,
4,16),new h.VertexElementDescriptor("a_dir_normal",4,n.DataType.BYTE,8,16),new h.VertexElementDescriptor("a_accumulatedDistance",2,n.DataType.UNSIGNED_SHORT,12,16)];u.ATTRIBUTES_INFO={"line-width":{name:"width",type:B.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:B.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:B.EncodingType.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:B.EncodingType.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",
type:B.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:B.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:B.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:B.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};p.VTLLineMaterial=u;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(p,l,B,u,n,h){const g=[new h.VertexElementDescriptor("a_pos",2,n.DataType.SHORT,0,16),new h.VertexElementDescriptor("a_vertexOffset",2,n.DataType.SHORT,4,16),new h.VertexElementDescriptor("a_texAngleRange",4,n.DataType.UNSIGNED_BYTE,8,16),new h.VertexElementDescriptor("a_levelInfo",4,n.DataType.UNSIGNED_BYTE,12,16)],b=[new h.VertexElementDescriptor("a_opacityInfo",1,n.DataType.UNSIGNED_BYTE,0,1)];n=function(e){function c(a){return e.call(this,a)||this}l._inherits(c,e);var f=c.prototype;f.geometryInfo=
function(){return g};f.opacityInfo=function(){return b};f.attributes=function(){return c.ATTRIBUTES};f.attributesInfo=function(){return c.ATTRIBUTES_INFO};return l._createClass(c)}(u.VTLMaterial);n.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");n.ATTRIBUTES_INFO={"icon-color":{name:"color",type:B.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:B.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",
type:B.EncodingType.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:B.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:B.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:B.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};u=function(e){function c(a){return e.call(this,a)||this}l._inherits(c,e);var f=c.prototype;f.geometryInfo=function(){return g};f.opacityInfo=function(){return b};f.attributes=function(){return c.ATTRIBUTES};
f.attributesInfo=function(){return c.ATTRIBUTES_INFO};return l._createClass(c)}(u.VTLMaterial);u.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");u.ATTRIBUTES_INFO={"text-color":{name:"color",type:B.EncodingType.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:B.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:B.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:B.EncodingType.R8_UNSIGNED,
precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:B.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:B.EncodingType.R8_UNSIGNED,isLayout:!0}};p.VTLIconMaterial=n;p.VTLTextMaterial=u;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../expression/expression","../expression/types"],function(p,l,B){return function(){function u(n){this._expression=
n}u.prototype.filter=function(n,h){if(!this._expression)return!0;try{return this._expression.evaluate(n,h)}catch(g){return console.log(g.message),!0}};u.createFilter=function(n){if(!n)return null;this.isLegacyFilter(n)&&(n=this.convertLegacyFilter(n));try{const h=l.createExpression(n,null,B.BooleanType);return new u(h)}catch(h){return console.log(h.message),null}};u.isLegacyFilter=function(n){if(!Array.isArray(n)||0===n.length)return!0;switch(n[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===
n.length&&"string"===typeof n[1]&&!Array.isArray(n[2]);case "in":return 3<=n.length&&"string"===typeof n[1]&&!Array.isArray(n[2]);case "!in":return!0;case "any":case "all":for(let h=1;h<n.length;h++)if(this.isLegacyFilter(n[h]))return!0;return!1;case "none":return!0;case "has":return 2===n.length&&("$id"===n[1]||"$type"===n[1]);case "!has":return!0;default:return!1}};u.convertLegacyFilter=function(n){if(!Array.isArray(n)||0===n.length)return!0;const h=n[0];if(1===n.length)return"any"!==h;switch(h){case "\x3d\x3d":return u.convertComparison("\x3d\x3d",
n[1],n[2]);case "!\x3d":return u.negate(u.convertComparison("\x3d\x3d",n[1],n[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return u.convertComparison(h,n[1],n[2]);case "in":return u.convertIn(n[1],n.slice(2));case "!in":return u.negate(u.convertIn(n[1],n.slice(2)));case "any":case "all":case "none":return u.convertCombining(h,n.slice(1));case "has":return u.convertHas(n[1]);case "!has":return u.negate(u.convertHas(n[1]));default:throw Error("Unexpected legacy filter.");}};u.convertComparison=
function(n,h,g){switch(h){case "$type":return[n,["geometry-type"],g];case "$id":return[n,["id"],g];default:return[n,["get",h],g]}};u.convertIn=function(n,h){switch(n){case "$type":return["in",["geometry-type"],["literal",h]];case "$id":return["in",["id"],["literal",h]];default:return["in",["get",n],["literal",h]]}};u.convertHas=function(n){switch(n){case "$type":return!0;case "$id":return["has-id"];default:return["has",n]}};u.convertCombining=function(n,h){return[n].concat(h.map(this.convertLegacyFilter))};
u.negate=function(n){return["!",n]};return p._createClass(u)}()})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/colorUtils ../../../../../geometry/support/TileClipper ../../../unitBezier ../GeometryUtils ./types".split(" "),function(p,l,B,u,n,h,g,b){function e(x,k,t){var A=typeof x;if("string"===A||"boolean"===A||"number"===A||null===x){if(t)switch(t.kind){case "string":"string"!==
A&&(x=fa.toString(x));break;case "number":"number"!==A&&(x=fa.toNumber(x));break;case "color":x=fa.toColor(x)}x=["literal",x]}if(!Array.isArray(x)||0===x.length)throw Error("Expression must be a non empty array");A=x[0];if("string"!==typeof A)throw Error("First element of expression must be a string");const G=ma[A];if(void 0===G)throw Error(`Invalid expression operator "${A}"`);if(!G)throw Error(`Unimplemented expression operator "${A}"`);return G.parse(x,k,t)}let c=function(){function x(t){this._parent=
t;this._vars={}}var k=x.prototype;k.add=function(t,A){this._vars[t]=A};k.get=function(t){return this._vars[t]?this._vars[t]:this._parent?this._parent.get(t):null};return l._createClass(x)}(),f=function(){function x(){this.type=b.ValueType}x.parse=function(k){if(1<k.length)throw Error('"id" does not expect arguments');return new x};x.prototype.evaluate=function(k,t){return k?.id};return l._createClass(x)}(),a=function(){function x(){this.type=b.StringType}x.parse=function(k){if(1<k.length)throw Error('"geometry-type" does not expect arguments');
return new x};x.prototype.evaluate=function(k,t){if(!k)return null;switch(k.type){case n.GeometryType.Point:return"Point";case n.GeometryType.LineString:return"LineString";case n.GeometryType.Polygon:return"Polygon";default:return null}};return l._createClass(x)}(),d=function(){function x(){this.type=b.ObjectType}x.parse=function(k){if(1<k.length)throw Error('"properties" does not expect arguments');return new x};x.prototype.evaluate=function(k,t){return k?.values};return l._createClass(x)}(),q=function(){function x(){this.type=
b.NumberType}x.parse=function(k){if(1<k.length)throw Error('"zoom" does not expect arguments');return new x};x.prototype.evaluate=function(k,t){return t};return l._createClass(x)}(),m=function(){function x(k,t,A){this._lhs=k;this._rhs=t;this._compare=A;this.type=b.BooleanType}x.parse=function(k,t,A){if(3!==k.length&&4!==k.length)throw Error(`"${k[0]}" expects 2 or 3 arguments`);if(4===k.length)throw Error(`"${k[0]}" collator not supported`);return new x(e(k[1],t),e(k[2],t),A)};x.prototype.evaluate=
function(k,t){return this._compare(this._lhs.evaluate(k,t),this._rhs.evaluate(k,t))};return l._createClass(x)}(),r=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,x);k.parse=function(t,A){return m.parse(t,A,(G,H)=>G===H)};return l._createClass(k)}(m),v=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,x);k.parse=function(t,A){return m.parse(t,A,(G,H)=>G!==H)};return l._createClass(k)}(m),w=function(x){function k(){return x.apply(this,arguments)||
this}l._inherits(k,x);k.parse=function(t,A){return m.parse(t,A,(G,H)=>G<H)};return l._createClass(k)}(m),D=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,x);k.parse=function(t,A){return m.parse(t,A,(G,H)=>G<=H)};return l._createClass(k)}(m),C=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,x);k.parse=function(t,A){return m.parse(t,A,(G,H)=>G>H)};return l._createClass(k)}(m),E=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,
x);k.parse=function(t,A){return m.parse(t,A,(G,H)=>G>=H)};return l._createClass(k)}(m),F=function(){function x(k){this._arg=k;this.type=b.BooleanType}x.parse=function(k,t){if(2!==k.length)throw Error('"!" expects 1 argument');return new x(e(k[1],t))};x.prototype.evaluate=function(k,t){return!this._arg.evaluate(k,t)};return l._createClass(x)}(),y=function(){function x(k){this._args=k;this.type=b.BooleanType}x.parse=function(k,t){const A=[];for(let G=1;G<k.length;G++)A.push(e(k[G],t));return new x(A)};
x.prototype.evaluate=function(k,t){for(const A of this._args)if(!A.evaluate(k,t))return!1;return!0};return l._createClass(x)}(),z=function(){function x(k){this._args=k;this.type=b.BooleanType}x.parse=function(k,t){const A=[];for(let G=1;G<k.length;G++)A.push(e(k[G],t));return new x(A)};x.prototype.evaluate=function(k,t){for(const A of this._args)if(A.evaluate(k,t))return!0;return!1};return l._createClass(x)}(),I=function(){function x(k){this._args=k;this.type=b.BooleanType}x.parse=function(k,t){const A=
[];for(let G=1;G<k.length;G++)A.push(e(k[G],t));return new x(A)};x.prototype.evaluate=function(k,t){for(const A of this._args)if(A.evaluate(k,t))return!1;return!0};return l._createClass(x)}(),J=function(){function x(k,t,A){this.type=k;this._args=t;this._fallback=A}x.parse=function(k,t,A){if(4>k.length)throw Error('"case" expects at least 3 arguments');if(1===k.length%2)throw Error('"case" expects an odd number of arguments');let G;const H=[];for(let Q=1;Q<k.length-1;Q+=2){const Y=e(k[Q],t),V=e(k[Q+
1],t,A);G||(G=V.type);H.push({condition:Y,output:V})}k=e(k[k.length-1],t,A);G||(G=k.type);return new x(G,H,k)};x.prototype.evaluate=function(k,t){for(const A of this._args)if(A.condition.evaluate(k,t))return A.output.evaluate(k,t);return this._fallback.evaluate(k,t)};return l._createClass(x)}(),K=function(){function x(k,t){this.type=k;this._args=t}x.parse=function(k,t){if(2>k.length)throw Error('"coalesce" expects at least 1 argument');let A;const G=[];for(let H=1;H<k.length;H++){const Q=e(k[H],t);
A||(A=Q.type);G.push(Q)}return new x(A,G)};x.prototype.evaluate=function(k,t){for(const A of this._args){const G=A.evaluate(k,t);if(null!==G)return G}return null};return l._createClass(x)}(),S=function(){function x(k,t,A,G,H){this.type=k;this._input=t;this._labels=A;this._outputs=G;this._fallback=H}x.parse=function(k,t){if(3>k.length)throw Error('"match" expects at least 3 arguments');if(0===k.length%2)throw Error('"case" expects an even number of arguments');let A;const G=e(k[1],t),H=[],Q={};let Y;
for(let ba=2;ba<k.length-1;ba+=2){var V=k[ba];Array.isArray(V)||(V=[V]);for(const ha of V){V=typeof ha;if("string"!==V&&"number"!==V)throw Error('"match" requires string or number literal as labels');if(!Y)Y=V;else if(V!==Y)throw Error('"match" requires labels to have the same type');Q[ha]=H.length}V=e(k[ba+1],t);A||(A=V.type);H.push(V)}return new x(A,G,Q,H,e(k[k.length-1],t))};x.prototype.evaluate=function(k,t){const A=this._input.evaluate(k,t);return(this._outputs[this._labels[A]]||this._fallback).evaluate(k,
t)};return l._createClass(x)}(),M=function(){function x(t,A,G,H,Q){this._operator=t;this.type=A;this.interpolation=G;this.input=H;this._stops=Q}x.parse=function(t,A,G){const H=t[0];if(5>t.length)throw Error(`"${H}" expects at least 4 arguments`);const Q=t[1];if(!Array.isArray(Q)||0===Q.length)throw Error(`"${Q}" is not a valid interpolation`);switch(Q[0]){case "linear":if(1!==Q.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==Q.length||"number"!==typeof Q[1])throw Error("Exponential interpolation requires one numeric argument");
break;case "cubic-bezier":if(5!==Q.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var Y=1;5>Y;Y++){var V=Q[Y];if("number"!==typeof V||0>V||1<V)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");}break;default:throw Error(`"${t[0]}" unknown interpolation type "${Q[0]}"`);}if(1!==t.length%2)throw Error(`"${H}" expects an even number of arguments`);Y=e(t[2],A,b.NumberType);let ba;"interpolate-hcl"===
H||"interpolate-lab"===H?ba=b.ColorType:G&&"value"!==G.kind&&(ba=G);G=[];for(V=3;V<t.length;V+=2){const ha=t[V];if("number"!==typeof ha)throw Error(`"${H}" requires stop inputs as literal numbers`);if(G.length&&G[G.length-1][0]>=ha)throw Error(`"${H}" requires strictly ascending stop inputs`);const na=e(t[V+1],A,ba);ba||(ba=na.type);G.push([ha,na])}if(ba&&ba!==b.ColorType&&ba!==b.NumberType&&("array"!==ba.kind||ba.itemType!==b.NumberType))throw Error(`"${H}" cannot interpolate type ${b.typeToString(ba)}`);
return new x(H,ba,Q,Y,G)};var k=x.prototype;k.evaluate=function(t,A){var G=this._stops;if(1===G.length)return G[0][1].evaluate(t,A);var H=this.input.evaluate(t,A);if(H<=G[0][0])return G[0][1].evaluate(t,A);if(H>=G[G.length-1][0])return G[G.length-1][1].evaluate(t,A);let Q=0;for(;++Q<G.length&&!(H<G[Q][0]););const Y=x.interpolationRatio(this.interpolation,H,G[Q-1][0],G[Q][0]);H=G[Q-1][1].evaluate(t,A);const V=G[Q][1].evaluate(t,A);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(H)&&
Array.isArray(V))return H.map((ba,ha)=>g.interpolate(ba,V[ha],Y));if("color"===this.type.kind&&H instanceof B&&V instanceof B)return H=new B(H),t=new B(V),new B([g.interpolate(H.r,t.r,Y),g.interpolate(H.g,t.g,Y),g.interpolate(H.b,t.b,Y),g.interpolate(H.a,t.a,Y)]);if("number"===this.type.kind&&"number"===typeof H&&"number"===typeof V)return g.interpolate(H,V,Y);throw Error(`"${this._operator}" cannot interpolate type ${b.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return t=u.toLCH(H),
A=u.toLCH(V),G=A.h-t.h,t=u.toRGB({h:t.h+Y*(180<G||-180>G?G-360*Math.round(G/360):G),c:g.interpolate(t.c,A.c,Y),l:g.interpolate(t.l,A.l,Y)}),new B({a:g.interpolate(H.a,V.a,Y),...t});if("interpolate-lab"===this._operator)return t=u.toLAB(H),A=u.toLAB(V),t=u.toRGB({l:g.interpolate(t.l,A.l,Y),a:g.interpolate(t.a,A.a,Y),b:g.interpolate(t.b,A.b,Y)}),new B({a:g.interpolate(H.a,V.a,Y),...t});throw Error(`Unexpected operator "${this._operator}"`);};k.interpolationUniformValue=function(t,A){const G=this._stops;
if(1===G.length||t>=G[G.length-1][0])return 0;let H=0;for(;++H<G.length&&!(t<G[H][0]););return x.interpolationRatio(this.interpolation,A,G[H-1][0],G[H][0])};k.getInterpolationRange=function(t){const A=this._stops;if(1===A.length)return t=A[0][0],[t,t];var G=A[A.length-1][0];if(t>=G)return[G,G];for(G=0;++G<A.length&&!(t<A[G][0]););return[A[G-1][0],A[G][0]]};x.interpolationRatio=function(t,A,G,H){let Q=0;"linear"===t[0]?Q=x._exponentialInterpolationRatio(A,1,G,H):"exponential"===t[0]?Q=x._exponentialInterpolationRatio(A,
t[1],G,H):"cubic-bezier"===t[0]&&(Q=h.unitBezier(t[1],t[2],t[3],t[4])(x._exponentialInterpolationRatio(A,1,G,H),1E-5));0>Q?Q=0:1<Q&&(Q=1);return Q};x._exponentialInterpolationRatio=function(t,A,G,H){H-=G;if(0===H)return 0;t-=G;return 1===A?t/H:(A**t-1)/(A**H-1)};return l._createClass(x)}(),O=function(){function x(k,t,A){this.type=k;this._input=t;this._stops=A}x.parse=function(k,t){if(5>k.length)throw Error('"step" expects at least 4 arguments');if(1!==k.length%2)throw Error('"step" expects an even number of arguments');
const A=e(k[1],t,b.NumberType);let G;const H=[];H.push([-Infinity,e(k[2],t)]);for(let Q=3;Q<k.length;Q+=2){const Y=k[Q];if("number"!==typeof Y)throw Error('"step" requires stop inputs as literal numbers');if(H.length&&H[H.length-1][0]>=Y)throw Error('"step" requires strictly ascending stop inputs');const V=e(k[Q+1],t);G||(G=V.type);H.push([Y,V])}return new x(G,A,H)};x.prototype.evaluate=function(k,t){const A=this._stops;if(1===A.length)return A[0][1].evaluate(k,t);const G=this._input.evaluate(k,t);
let H=0;for(;++H<A.length&&!(G<A[H][0]););return this._stops[H-1][1].evaluate(k,t)};return l._createClass(x)}(),T=function(){function x(k,t){this.type=k;this._output=t}x.parse=function(k,t,A){if(4>k.length)throw Error('"let" expects at least 3 arguments');if(1===k.length%2)throw Error('"let" expects an odd number of arguments');const G=new c(t);for(let H=1;H<k.length-1;H+=2){const Q=k[H];if("string"!==typeof Q)throw Error(`"let" requires a string to define variable names - found ${Q}`);G.add(Q,e(k[H+
1],t))}k=e(k[k.length-1],G,A);return new x(k.type,k)};x.prototype.evaluate=function(k,t){return this._output.evaluate(k,t)};return l._createClass(x)}(),N=function(){function x(k,t){this.type=k;this.output=t}x.parse=function(k,t,A){if(2!==k.length||"string"!==typeof k[1])throw Error('"var" requires just one literal string argument');t=t.get(k[1]);if(!t)throw Error(`${k[1]} must be defined before being used in a "var" expression`);return new x(A||b.ValueType,t)};x.prototype.evaluate=function(k,t){return this.output.evaluate(k,
t)};return l._createClass(x)}(),P=function(){function x(k,t,A){this.type=k;this._index=t;this._array=A}x.parse=function(k,t){if(3!==k.length)throw Error('"at" expects 2 arguments');const A=e(k[1],t,b.NumberType);k=e(k[2],t);return new x(k.type.itemType,A,k)};x.prototype.evaluate=function(k,t){const A=this._index.evaluate(k,t);k=this._array.evaluate(k,t);if(0>A||A>=k.length)throw Error('"at" index out of bounds');if(A!==Math.floor(A))throw Error('"at" index must be an integer');return k[A]};return l._createClass(x)}(),
R=function(){function x(k,t){this._key=k;this._obj=t;this.type=b.ValueType}x.parse=function(k,t){let A;switch(k.length){case 2:return A=e(k[1],t),new x(A);case 3:return A=e(k[1],t),k=e(k[2],t),new x(A,k);default:throw Error('"get" expects 1 or 2 arguments');}};x.prototype.evaluate=function(k,t){const A=this._key.evaluate(k,t);return this._obj?this._obj.evaluate(k,t)[A]:k?.values[A]};return l._createClass(x)}(),L=function(){function x(k,t){this._key=k;this._obj=t;this.type=b.BooleanType}x.parse=function(k,
t){let A;switch(k.length){case 2:return A=e(k[1],t),new x(A);case 3:return A=e(k[1],t),k=e(k[2],t),new x(A,k);default:throw Error('"has" expects 1 or 2 arguments');}};x.prototype.evaluate=function(k,t){const A=this._key.evaluate(k,t);return this._obj?(k=this._obj.evaluate(k,t),A in k):!!k?.values[A]};return l._createClass(x)}(),U=function(){function x(k,t){this._key=k;this._vals=t;this.type=b.BooleanType}x.parse=function(k,t){if(3!==k.length)throw Error('"in" expects 2 arguments');return new x(e(k[1],
t),e(k[2],t))};x.prototype.evaluate=function(k,t){const A=this._key.evaluate(k,t);return this._vals.evaluate(k,t).includes(A)};return l._createClass(x)}(),X=function(){function x(k,t,A){this._item=k;this._array=t;this._from=A;this.type=b.NumberType}x.parse=function(k,t){if(3>k.length||4<k.length)throw Error('"index-of" expects 3 or 4 arguments');const A=e(k[1],t),G=e(k[2],t);return 4===k.length?(k=e(k[3],t,b.NumberType),new x(A,G,k)):new x(A,G)};x.prototype.evaluate=function(k,t){const A=this._item.evaluate(k,
t),G=this._array.evaluate(k,t);if(this._from){k=this._from.evaluate(k,t);if(k!==Math.floor(k))throw Error('"index-of" index must be an integer');return G.indexOf(A,k)}return G.indexOf(A)};return l._createClass(x)}(),Z=function(){function x(k){this._arg=k;this.type=b.NumberType}x.parse=function(k,t){if(2!==k.length)throw Error('"length" expects 2 arguments');k=e(k[1],t);return new x(k)};x.prototype.evaluate=function(k,t){k=this._arg.evaluate(k,t);if("string"===typeof k||Array.isArray(k))return k.length;
throw Error('"length" expects string or array');};return l._createClass(x)}(),da=function(){function x(k,t,A,G){this.type=k;this._array=t;this._from=A;this._to=G}x.parse=function(k,t){if(3>k.length||4<k.length)throw Error('"slice" expects 2 or 3 arguments');const A=e(k[1],t),G=e(k[2],t,b.NumberType);if(G.type!==b.NumberType)throw Error('"slice" index must return a number');if(4===k.length){k=e(k[3],t,b.NumberType);if(k.type!==b.NumberType)throw Error('"slice" index must return a number');return new x(A.type,
A,G,k)}return new x(A.type,A,G)};x.prototype.evaluate=function(k,t){const A=this._array.evaluate(k,t);if(!Array.isArray(A)&&"string"!==typeof A)throw Error('"slice" input must be an array or a string');const G=this._from.evaluate(k,t);if(0>G||G>=A.length)throw Error('"slice" index out of bounds');if(G!==Math.floor(G))throw Error('"slice" index must be an integer');if(this._to){k=this._to.evaluate(k,t);if(0>k||k>=A.length)throw Error('"slice" index out of bounds');if(k!==Math.floor(k))throw Error('"slice" index must be an integer');
return A.slice(G,k)}return A.slice(G)};return l._createClass(x)}(),ca=function(){function x(){this.type=b.BooleanType}x.parse=function(k){if(1!==k.length)throw Error('"has-id" expects no arguments');return new x};x.prototype.evaluate=function(k,t){return k&&void 0!==k.id};return l._createClass(x)}(),W=function(){function x(k,t){this._args=k;this._calculate=t;this.type=b.NumberType}x.parse=function(k,t,A){k=k.slice(1).map(G=>e(G,t));return new x(k,A)};x.prototype.evaluate=function(k,t){let A;this._args&&
(A=this._args.map(G=>G.evaluate(k,t)));return this._calculate(A)};return l._createClass(x)}(),ea=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,x);k.parse=function(t,A){switch(t.length){case 2:return W.parse(t,A,G=>-G[0]);case 3:return W.parse(t,A,G=>G[0]-G[1]);default:throw Error('"-" expects 1 or 2 arguments');}};return l._createClass(k)}(W),ia=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,x);k.parse=function(t,A){return W.parse(t,A,G=>
{let H=1;for(const Q of G)H*=Q;return H})};return l._createClass(k)}(W),ka=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,x);k.parse=function(t,A){if(3===t.length)return W.parse(t,A,G=>G[0]/G[1]);throw Error('"/" expects 2 arguments');};return l._createClass(k)}(W),oa=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,x);k.parse=function(t,A){if(3===t.length)return W.parse(t,A,G=>G[0]%G[1]);throw Error('"%" expects 2 arguments');};return l._createClass(k)}(W),
pa=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,x);k.parse=function(t,A){if(3===t.length)return W.parse(t,A,G=>G[0]**G[1]);throw Error('"^" expects 1 or 2 arguments');};return l._createClass(k)}(W),qa=function(x){function k(){return x.apply(this,arguments)||this}l._inherits(k,x);k.parse=function(t,A){return W.parse(t,A,G=>{let H=0;for(const Q of G)H+=Q;return H})};return l._createClass(k)}(W),aa=function(){function x(k,t){this._args=k;this._calculate=t;this.type=b.NumberType}
x.parse=function(k,t){const A=k.slice(1).map(G=>e(G,t));return new x(A,x.ops[k[0]])};x.prototype.evaluate=function(k,t){let A;this._args&&(A=this._args.map(G=>G.evaluate(k,t)));return this._calculate(A)};return l._createClass(x)}();aa.ops={abs:x=>Math.abs(x[0]),acos:x=>Math.acos(x[0]),asin:x=>Math.asin(x[0]),atan:x=>Math.atan(x[0]),ceil:x=>Math.ceil(x[0]),cos:x=>Math.cos(x[0]),e:()=>Math.E,floor:x=>Math.floor(x[0]),ln:x=>Math.log(x[0]),ln2:()=>Math.LN2,log10:x=>Math.log(x[0])/Math.LN10,log2:x=>Math.log(x[0])/
Math.LN2,max:x=>Math.max(...x),min:x=>Math.min(...x),pi:()=>Math.PI,round:x=>Math.round(x[0]),sin:x=>Math.sin(x[0]),sqrt:x=>Math.sqrt(x[0]),tan:x=>Math.tan(x[0])};let ra=function(){function x(k){this._args=k;this.type=b.StringType}x.parse=function(k,t){return new x(k.slice(1).map(A=>e(A,t)))};x.prototype.evaluate=function(k,t){return this._args.map(A=>A.evaluate(k,t)).join("")};return l._createClass(x)}(),la=function(){function x(k,t){this._arg=k;this._calculate=t;this.type=b.StringType}x.parse=function(k,
t){if(2!==k.length)throw Error(`${k[0]} expects 1 argument`);t=e(k[1],t);return new x(t,x.ops[k[0]])};x.prototype.evaluate=function(k,t){return this._calculate(this._arg.evaluate(k,t))};return l._createClass(x)}();la.ops={downcase:x=>x.toLowerCase(),upcase:x=>x.toUpperCase()};let sa=function(){function x(t){this._args=t;this.type=b.ColorType}x.parse=function(t,A){if(4!==t.length)throw Error('"rgb" expects 3 arguments');t=t.slice(1).map(G=>e(G,A));return new x(t)};var k=x.prototype;k.evaluate=function(t,
A){const G=this._validate(this._args[0].evaluate(t,A)),H=this._validate(this._args[1].evaluate(t,A));t=this._validate(this._args[2].evaluate(t,A));return new B({r:G,g:H,b:t})};k._validate=function(t){if("number"!==typeof t||0>t||255<t)throw Error(`${t}: invalid color component`);return Math.round(t)};return l._createClass(x)}(),ta=function(){function x(t){this._args=t;this.type=b.ColorType}x.parse=function(t,A){if(5!==t.length)throw Error('"rgba" expects 4 arguments');t=t.slice(1).map(G=>e(G,A));
return new x(t)};var k=x.prototype;k.evaluate=function(t,A){const G=this._validate(this._args[0].evaluate(t,A)),H=this._validate(this._args[1].evaluate(t,A)),Q=this._validate(this._args[2].evaluate(t,A));t=this._validateAlpha(this._args[3].evaluate(t,A));return new B({r:G,g:H,b:Q,a:t})};k._validate=function(t){if("number"!==typeof t||0>t||255<t)throw Error(`${t}: invalid color component`);return Math.round(t)};k._validateAlpha=function(t){if("number"!==typeof t||0>t||1<t)throw Error(`${t}: invalid alpha color component`);
return t};return l._createClass(x)}(),ua=function(){function x(k){this._color=k;this.type=b.arrayType(b.NumberType,4)}x.parse=function(k,t){if(2!==k.length)throw Error('"to-rgba" expects 1 argument');k=e(k[1],t);return new x(k)};x.prototype.evaluate=function(k,t){return(new B(this._color.evaluate(k,t))).toRgba()};return l._createClass(x)}(),ja=function(){function x(k,t){this.type=k;this._args=t}x.parse=function(k,t){var A=k[0];if(2>k.length)throw Error(`${A} expects at least one argument`);let G=
1,H;if("array"===A){if(2<k.length){switch(k[1]){case "string":H=b.StringType;break;case "number":H=b.NumberType;break;case "boolean":H=b.BooleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}G++}else H=b.ValueType;if(3<k.length){var Q=k[2];if(null!==Q&&("number"!==typeof Q||0>Q||Q!==Math.floor(Q)))throw Error('"array" length argument must be a positive integer literal');G++}H=b.arrayType(H,Q)}else switch(A){case "string":H=b.StringType;break;case "number":H=
b.NumberType;break;case "boolean":H=b.BooleanType;break;case "object":H=b.ObjectType}for(A=[];G<k.length;G++)Q=e(k[G],t),A.push(Q);return new x(H,A)};x.prototype.evaluate=function(k,t){let A;for(const G of this._args){const H=G.evaluate(k,t);A=b.getType(H);if(b.matchType(A,this.type))return H}throw Error(`Expected ${b.typeToString(this.type)} but got ${b.typeToString(A)}`);};return l._createClass(x)}(),fa=function(){function x(k,t){this.type=k;this._args=t}x.parse=function(k,t){var A=k[0];const G=
x.types[A];if(G===b.BooleanType||G===b.StringType){if(2!==k.length)throw Error(`${A} expects one argument`);}else if(2>k.length)throw Error(`${A} expects at least one argument`);A=[];for(let H=1;H<k.length;H++){const Q=e(k[H],t);A.push(Q)}return new x(G,A)};x.prototype.evaluate=function(k,t){if(this.type===b.BooleanType)return!!this._args[0].evaluate(k,t);if(this.type===b.StringType)return b.valueToString(this._args[0].evaluate(k,t));if(this.type===b.NumberType){for(const G of this._args){var A=Number(G.evaluate(k,
t));if(!isNaN(A))return A}return null}if(this.type===b.ColorType){for(A of this._args)try{const G=x.toColor(A.evaluate(k,t));if(G instanceof B)return G}catch{}return null}};x.toBoolean=function(k){return!!k};x.toString=function(k){return b.valueToString(k)};x.toNumber=function(k){const t=Number(k);if(isNaN(t))throw Error(`"${k}" is not a number`);return t};x.toColor=function(k){if(k instanceof B)return k;if("string"===typeof k){const t=B.fromString(k);if(t)return t;throw Error(`"${k}" is not a color`);
}if(Array.isArray(k))return B.fromArray(k);throw Error(`"${k}" is not a color`);};return l._createClass(x)}();fa.types={"to-boolean":b.BooleanType,"to-color":b.ColorType,"to-number":b.NumberType,"to-string":b.StringType};let va=function(){function x(k){this._val=k;this.type=b.getType(k)}x.parse=function(k){if(2!==k.length)throw Error('"literal" expects 1 argument');return new x(k[1])};x.prototype.evaluate=function(k,t){return this._val};return l._createClass(x)}(),wa=function(){function x(k){this._arg=
k;this.type=b.StringType}x.parse=function(k,t){if(2!==k.length)throw Error('"typeof" expects 1 argument');return new x(e(k[1],t))};x.prototype.evaluate=function(k,t){return b.typeToString(b.getType(this._arg.evaluate(k,t)))};return l._createClass(x)}();const ma={array:ja,boolean:ja,collator:null,format:null,image:null,literal:va,number:ja,"number-format":null,object:ja,string:ja,"to-boolean":fa,"to-color":fa,"to-number":fa,"to-string":fa,typeof:wa,accumulated:null,"feature-state":null,"geometry-type":a,
id:f,"line-progress":null,properties:d,at:P,get:R,has:L,in:U,"index-of":X,length:Z,slice:da,"!":F,"!\x3d":v,"\x3c":w,"\x3c\x3d":D,"\x3d\x3d":r,"\x3e":C,"\x3e\x3d":E,all:y,any:z,case:J,coalesce:K,match:S,within:null,interpolate:M,"interpolate-hcl":M,"interpolate-lab":M,step:O,let:T,var:N,concat:ra,downcase:la,"is-supported-script":null,"resolved-locale":null,upcase:la,rgb:sa,rgba:ta,"to-rgba":ua,"-":ea,"*":ia,"/":ka,"%":oa,"^":pa,"+":qa,abs:aa,acos:aa,asin:aa,atan:aa,ceil:aa,cos:aa,e:aa,floor:aa,ln:aa,
ln2:aa,log10:aa,log2:aa,max:aa,min:aa,pi:aa,round:aa,sin:aa,sqrt:aa,tan:aa,zoom:q,"heatmap-density":null,"has-id":ca,none:I};p.ALL=y;p.ANY=z;p.Add=qa;p.Assert=ja;p.At=P;p.Calculate=aa;p.Case=J;p.Coalesce=K;p.Coerce=fa;p.Concat=ra;p.Div=ka;p.EQ=r;p.GE=E;p.GT=C;p.GeomType=a;p.Get=R;p.Has=L;p.HasID=ca;p.ID=f;p.In=U;p.IndexOf=X;p.Interpolate=M;p.LE=D;p.LT=w;p.Length=Z;p.Let=T;p.Literal=va;p.Match=S;p.Mod=oa;p.Mul=ia;p.NE=v;p.NONE=I;p.NOT=F;p.Pow=pa;p.Properties=d;p.Rgb=sa;p.Rgba=ta;p.Slice=da;p.Step=
O;p.String=la;p.Sub=ea;p.ToRgba=ua;p.TypeOf=wa;p.Var=N;p.Zoom=q;p.createExpression=e;p.ops=ma;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports"],function(p){function l(c,f){const a=[];let d,q;if(c[0].length!==f.length)throw Error("dimensions do not match");const m=c.length,r=c[0].length;let v=0;for(d=0;d<m;d++){for(q=v=0;q<r;q++)v+=c[d][q]*f[q];a.push(v)}return a}function B(c){c=[c.r/255,c.g/255,c.b/255].map(f=>.04045>=f?f/12.92:((f+
.055)/1.055)**2.4);c=l(b,c);return{x:100*c[0],y:100*c[1],z:100*c[2]}}function u(c){c=l(e,[c.x/100,c.y/100,c.z/100]).map(f=>Math.min(1,Math.max(.0031308>=f?12.92*f:1.055*f**(1/2.4)-.055,0)));return{r:Math.round(255*c[0]),g:Math.round(255*c[1]),b:Math.round(255*c[2])}}function n(c){c=[c.x/95.047,c.y/100,c.z/108.883].map(f=>f>(6/29)**3?f**(1/3):1/3*(29/6)**2*f+4/29);return{l:116*c[1]-16,a:500*(c[0]-c[1]),b:200*(c[1]-c[2])}}function h(c){const f=c.l;c=[(f+16)/116+c.a/500,(f+16)/116,(f+16)/116-c.b/200].map(a=>
a>6/29?a**3:3*(6/29)**2*(a-4/29));return{x:95.047*c[0],y:100*c[1],z:108.883*c[2]}}function g(c){if("r"in c&&"g"in c&&"b"in c)return c;if("l"in c&&"c"in c&&"h"in c){var f=c.c,a=c.h;return u(h({l:c.l,a:f*Math.cos(a),b:f*Math.sin(a)}))}if("l"in c&&"a"in c&&"b"in c)return u(h(c));if("x"in c&&"y"in c&&"z"in c)return u(c);if("h"in c&&"s"in c&&"v"in c){a=(c.h+360)%360/60;f=c.v/100*255;c=c.s/100*f;const d=c*(1-Math.abs(a%2-1));switch(Math.floor(a)){case 0:a={r:c,g:d,b:0};break;case 1:a={r:d,g:c,b:0};break;
case 2:a={r:0,g:c,b:d};break;case 3:a={r:0,g:d,b:c};break;case 4:a={r:d,g:0,b:c};break;case 5:case 6:a={r:c,g:0,b:d};break;default:a={r:0,g:0,b:0}}a.r=Math.round(a.r+f-c);a.g=Math.round(a.g+f-c);a.b=Math.round(a.b+f-c);return a}return c}const b=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],e=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];p.toHSV=function(c){if("h"in c&&"s"in c&&"v"in c)return c;var f=g(c);c=f.r;const a=f.g,d=f.b;f=Math.max(c,a,d);const q=f-Math.min(c,
a,d);c=0===q?0:f===c?(a-d)/q%6:f===a?(d-c)/q+2:(c-a)/q+4;0>c&&(c+=6);return{h:60*c,s:100*(0===q?0:q/f),v:100/255*f}};p.toLAB=function(c){return"l"in c&&"a"in c&&"b"in c?c:n(B(g(c)))};p.toLCH=function(c){if(!("l"in c&&"c"in c&&"h"in c)){var f=n(B(g(c)));c=f.l;var a=f.a;const d=f.b;f=Math.sqrt(a*a+d*d);a=Math.atan2(d,a);a=0<a?a:a+2*Math.PI;c={l:c,c:f,h:a}}return c};p.toRGB=g;p.toXYZ=function(c){return"x"in c&&"y"in c&&"z"in c?c:B(g(c))};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},
"esri/geometry/support/TileClipper":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(p,l){p.GeometryType=void 0;(function(c){c[c.Unknown=0]="Unknown";c[c.Point=1]="Point";c[c.LineString=2]="LineString";c[c.Polygon=3]="Polygon"})(p.GeometryType||(p.GeometryType={}));let B=function(){function c(a,d){this.x=a;this.y=d}var f=c.prototype;f.clone=function(){return new c(this.x,this.y)};f.equals=function(a,d){return a===this.x&&d===this.y};f.isEqual=function(a){return a.x===
this.x&&a.y===this.y};f.setCoords=function(a,d){this.x=a;this.y=d};f.normalize=function(){var a=this.x;const d=this.y;a=Math.sqrt(a*a+d*d);this.x/=a;this.y/=a};f.rightPerpendicular=function(){const a=this.x;this.x=this.y;this.y=-a};f.move=function(a,d){this.x+=a;this.y+=d};f.assign=function(a){this.x=a.x;this.y=a.y};f.assignAdd=function(a,d){this.x=a.x+d.x;this.y=a.y+d.y};f.assignSub=function(a,d){this.x=a.x-d.x;this.y=a.y-d.y};f.rotate=function(a,d){const q=this.x,m=this.y;this.x=q*a-m*d;this.y=
q*d+m*a};f.scale=function(a){this.x*=a;this.y*=a};f.length=function(){const a=this.x,d=this.y;return Math.sqrt(a*a+d*d)};c.distance=function(a,d){const q=d.x-a.x;a=d.y-a.y;return Math.sqrt(q*q+a*a)};c.add=function(a,d){return new c(a.x+d.x,a.y+d.y)};c.sub=function(a,d){return new c(a.x-d.x,a.y-d.y)};return l._createClass(c)}(),u=l._createClass(function(c,f,a){this.ratio=c;this.x=f;this.y=a}),n=function(){function c(a,d,q,m=8,r=8){this._lines=[];this._starts=[];this.validateTessellation=!0;this._pixelRatio=
m;this._pixelMargin=r;this._tileSize=512*m;this._dz=a;this._yPos=d;this._xPos=q}var f=c.prototype;f.setPixelMargin=function(a){a!==this._pixelMargin&&(this._pixelMargin=a,this.setExtent(this._extent))};f.setExtent=function(a){this._extent=a;this._finalRatio=this._tileSize/a*(1<<this._dz);let d=this._pixelRatio*this._pixelMargin;d/=this._finalRatio;a>>=this._dz;d>a&&(d=a);this._margin=d;this._xmin=a*this._xPos-d;this._ymin=a*this._yPos-d;this._xmax=this._xmin+a+2*d;this._ymax=this._ymin+a+2*d};f.reset=
function(a){this._type=a;this._lines=[];this._starts=[];this._line=null;this._start=0};f.moveTo=function(a,d){this._pushLine();this._prevIsIn=this._isIn(a,d);this._moveTo(a,d,this._prevIsIn);this._prevPt=new B(a,d);this._firstPt=new B(a,d);this._dist=0};f.lineTo=function(a,d){const q=this._isIn(a,d),m=new B(a,d),r=B.distance(this._prevPt,m);if(q)if(this._prevIsIn)this._lineTo(a,d,!0);else{var v=this._prevPt;var w=m;a=this._intersect(w,v);this._start=this._dist+r*(1-this._r);this._lineTo(a.x,a.y,!0);
this._lineTo(w.x,w.y,!0)}else if(this._prevIsIn)w=this._prevPt,v=m,a=this._intersect(w,v),this._lineTo(a.x,a.y,!0),this._lineTo(v.x,v.y,!1);else{const C=this._prevPt;if(!(C.x<=this._xmin&&m.x<=this._xmin||C.x>=this._xmax&&m.x>=this._xmax||C.y<=this._ymin&&m.y<=this._ymin||C.y>=this._ymax&&m.y>=this._ymax)){a=[];if(C.x<this._xmin&&m.x>this._xmin||C.x>this._xmin&&m.x<this._xmin){d=(this._xmin-C.x)/(m.x-C.x);var D=C.y+d*(m.y-C.y);D<=this._ymin?w=!1:D>=this._ymax?w=!0:a.push(new u(d,this._xmin,D))}if(C.x<
this._xmax&&m.x>this._xmax||C.x>this._xmax&&m.x<this._xmax)d=(this._xmax-C.x)/(m.x-C.x),D=C.y+d*(m.y-C.y),D<=this._ymin?w=!1:D>=this._ymax?w=!0:a.push(new u(d,this._xmax,D));if(C.y<this._ymin&&m.y>this._ymin||C.y>this._ymin&&m.y<this._ymin)d=(this._ymin-C.y)/(m.y-C.y),D=C.x+d*(m.x-C.x),D<=this._xmin?v=!1:D>=this._xmax?v=!0:a.push(new u(d,D,this._ymin));if(C.y<this._ymax&&m.y>this._ymax||C.y>this._ymax&&m.y<this._ymax)d=(this._ymax-C.y)/(m.y-C.y),D=C.x+d*(m.x-C.x),D<=this._xmin?v=!1:D>=this._xmax?
v=!0:a.push(new u(d,D,this._ymax));if(0===a.length)v?w?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):w?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(1<a.length&&a[0].ratio>a[1].ratio)this._start=this._dist+r*a[1].ratio,this._lineTo(a[1].x,a[1].y,!0),this._lineTo(a[0].x,a[0].y,!0);else for(this._start=this._dist+r*a[0].ratio,v=0;v<a.length;v++)this._lineTo(a[v].x,a[v].y,!0)}this._lineTo(m.x,m.y,!1)}this._dist+=r;this._prevIsIn=
q;this._prevPt=m};f.close=function(){if(2<this._line.length){var a=this._firstPt,d=this._prevPt;a.x===d.x&&a.y===d.y||this.lineTo(a.x,a.y);a=this._line;for(d=a.length;4<=d;)if(a[0].x===a[1].x&&a[0].x===a[d-2].x||a[0].y===a[1].y&&a[0].y===a[d-2].y)a.pop(),a[0].x=a[d-2].x,a[0].y=a[d-2].y,--d;else break}};f.result=function(a=!0){this._pushLine();if(0===this._lines.length)return null;this._type===p.GeometryType.Polygon&&a&&b.simplify(this._tileSize,this._margin*this._finalRatio,this._lines);return this._lines};
f.resultWithStarts=function(){if(this._type!==p.GeometryType.LineString)throw Error("Only valid for lines");this._pushLine();const a=this._lines,d=a.length;if(0===d)return null;const q=[];for(let m=0;m<d;m++)q.push({line:a[m],start:this._starts[m]||0});return q};f._isIn=function(a,d){return a>=this._xmin&&a<=this._xmax&&d>=this._ymin&&d<=this._ymax};f._intersect=function(a,d){let q,m,r;if(d.x>=this._xmin&&d.x<=this._xmax)m=d.y<=this._ymin?this._ymin:this._ymax,r=(m-a.y)/(d.y-a.y),q=a.x+r*(d.x-a.x);
else if(d.y>=this._ymin&&d.y<=this._ymax)q=d.x<=this._xmin?this._xmin:this._xmax,r=(q-a.x)/(d.x-a.x),m=a.y+r*(d.y-a.y);else{m=d.y<=this._ymin?this._ymin:this._ymax;q=d.x<=this._xmin?this._xmin:this._xmax;const v=(q-a.x)/(d.x-a.x),w=(m-a.y)/(d.y-a.y);v<w?(r=v,m=a.y+v*(d.y-a.y)):(r=w,q=a.x+w*(d.x-a.x))}this._r=r;return new B(q,m)};f._pushLine=function(){this._line&&(this._type===p.GeometryType.Point?0<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===p.GeometryType.LineString?
1<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===p.GeometryType.Polygon&&3<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)));this._line=[];this._start=0};f._moveTo=function(a,d,q){this._type!==p.GeometryType.Polygon?q&&(a=Math.round((a-(this._xmin+this._margin))*this._finalRatio),d=Math.round((d-(this._ymin+this._margin))*this._finalRatio),this._line.push(new B(a,d))):(q||(a<this._xmin&&(a=this._xmin),a>this._xmax&&(a=
this._xmax),d<this._ymin&&(d=this._ymin),d>this._ymax&&(d=this._ymax)),a=Math.round((a-(this._xmin+this._margin))*this._finalRatio),d=Math.round((d-(this._ymin+this._margin))*this._finalRatio),this._line.push(new B(a,d)),this._isV=this._isH=!1)};f._lineTo=function(a,d,q){if(this._type!==p.GeometryType.Polygon)if(q){a=Math.round((a-(this._xmin+this._margin))*this._finalRatio);d=Math.round((d-(this._ymin+this._margin))*this._finalRatio);if(0<this._line.length&&(q=this._line[this._line.length-1],q.equals(a,
d)))return;this._line.push(new B(a,d))}else this._line&&0<this._line.length&&this._pushLine();else if(q||(a<this._xmin&&(a=this._xmin),a>this._xmax&&(a=this._xmax),d<this._ymin&&(d=this._ymin),d>this._ymax&&(d=this._ymax)),a=Math.round((a-(this._xmin+this._margin))*this._finalRatio),d=Math.round((d-(this._ymin+this._margin))*this._finalRatio),this._line&&0<this._line.length){q=this._line[this._line.length-1];const m=q.x===a,r=q.y===d;m&&r||(this._isH&&m?(q.x=a,q.y=d,q=this._line[this._line.length-
2],q.x===a&&q.y===d?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(q=this._line[this._line.length-2],this._isH=q.x===a,this._isV=q.y===d)):(this._isH=q.x===a,this._isV=q.y===d)):this._isV&&r?(q.x=a,q.y=d,q=this._line[this._line.length-2],q.x===a&&q.y===d?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(q=this._line[this._line.length-2],this._isH=q.x===a,this._isV=q.y===d)):(this._isH=q.x===a,this._isV=q.y===d)):(this._line.push(new B(a,d)),this._isH=m,this._isV=r))}else this._line.push(new B(a,
d))};return l._createClass(c)}(),h=function(){function c(){}var f=c.prototype;f.setExtent=function(a){this._ratio=4096===a?1:4096/a};f.reset=function(a){this._lines=[];this._line=null};f.moveTo=function(a,d){this._line&&this._lines.push(this._line);this._line=[];const q=this._ratio;this._line.push(new B(a*q,d*q))};f.lineTo=function(a,d){const q=this._ratio;this._line.push(new B(a*q,d*q))};f.close=function(){const a=this._line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};f.result=function(){this._line&&
this._lines.push(this._line);return 0===this._lines.length?null:this._lines};l._createClass(c,[{key:"validateTessellation",get:function(){return 1>this._ratio}}]);return c}();var g;(function(c){c[c.sideLeft=0]="sideLeft";c[c.sideRight=1]="sideRight";c[c.sideTop=2]="sideTop";c[c.sideBottom=3]="sideBottom"})(g||(g={}));let b=function(){function c(){}c.simplify=function(f,a,d){if(d){var q=-a,m=f+a,r=-a,v=f+a;f=[];a=[];var w=d.length;for(let D=0;D<w;++D){const C=d[D];if(!C||2>C.length)continue;let E=
C[0],F;const y=C.length;for(let z=1;z<y;++z)F=C[z],E.x===F.x&&(E.x<=q&&(E.y>F.y?(f.push(D),f.push(z),f.push(g.sideLeft),f.push(-1)):(a.push(D),a.push(z),a.push(g.sideLeft),a.push(-1))),E.x>=m&&(E.y<F.y?(f.push(D),f.push(z),f.push(g.sideRight),f.push(-1)):(a.push(D),a.push(z),a.push(g.sideRight),a.push(-1)))),E.y===F.y&&(E.y<=r&&(E.x<F.x?(f.push(D),f.push(z),f.push(g.sideTop),f.push(-1)):(a.push(D),a.push(z),a.push(g.sideTop),a.push(-1))),E.y>=v&&(E.x>F.x?(f.push(D),f.push(z),f.push(g.sideBottom),
f.push(-1)):(a.push(D),a.push(z),a.push(g.sideBottom),a.push(-1)))),E=F}0!==f.length&&0!==a.length&&(c.fillParent(d,a,f),c.fillParent(d,f,a),q=[],c.calcDeltas(q,a,f),c.calcDeltas(q,f,a),c.addDeltas(q,d))}};c.fillParent=function(f,a,d){const q=d.length,m=a.length;for(let C=0;C<m;C+=4){var r=a[C],v=a[C+1];const E=a[C+2],F=f[r][v-1];r=f[r][v];v=8092;let y=-1;for(let z=0;z<q;z+=4){if(d[z+2]!==E)continue;var w=d[z];const I=d[z+1];var D=f[w][I-1];w=f[w][I];switch(E){case g.sideLeft:case g.sideRight:e(F.y,
D.y,w.y)&&e(r.y,D.y,w.y)&&(D=Math.abs(w.y-D.y),D<v&&(v=D,y=z));break;case g.sideTop:case g.sideBottom:e(F.x,D.x,w.x)&&e(r.x,D.x,w.x)&&(D=Math.abs(w.x-D.x),D<v&&(v=D,y=z))}}a[C+3]=y}};c.calcDeltas=function(f,a,d){const q=a.length;for(let m=0;m<q;m+=4){const r=c.calcDelta(m,a,d,[]);f.push(a[m]);f.push(a[m+1]);f.push(a[m+2]);f.push(r)}};c.calcDelta=function(f,a,d,q){f=a[f+3];if(-1===f)return 0;const m=q.length;if(1<m&&q[m-2]===f)return 0;q.push(f);return c.calcDelta(f,d,a,q)+1};c.addDeltas=function(f,
a){const d=f.length;let q=0;for(var m=0;m<d;m+=4){var r=f[m+3];r>q&&(q=r)}for(m=0;m<d;m+=4){r=a[f[m]];const v=f[m+1],w=q-f[m+3];switch(f[m+2]){case g.sideLeft:r[v-1].x-=w;r[v].x-=w;1===v&&(r[r.length-1].x-=w);v===r.length-1&&(r[0].x-=w);break;case g.sideRight:r[v-1].x+=w;r[v].x+=w;1===v&&(r[r.length-1].x+=w);v===r.length-1&&(r[0].x+=w);break;case g.sideTop:r[v-1].y-=w;r[v].y-=w;1===v&&(r[r.length-1].y-=w);v===r.length-1&&(r[0].y-=w);break;case g.sideBottom:r[v-1].y+=w,r[v].y+=w,1===v&&(r[r.length-
1].y+=w),v===r.length-1&&(r[0].y+=w)}}};return l._createClass(c)}();const e=(c,f,a)=>c>=f&&c<=a||c>=a&&c<=f;p.Point=B;p.SimpleBuilder=h;p.TileClipper=n;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(p){function l(n,h,g,b){function e(r,v){var w;let D,C;D=r;for(w=0;8>w;w++){C=((a*D+f)*D+c)*D-r;if(Math.abs(C)<v)return D;var E=(3*a*D+2*f)*D+c;if(1E-6>Math.abs(E))break;D-=C/E}E=0;w=1;D=r;if(D<E)return E;if(D>w)return w;
for(;E<w;){C=((a*D+f)*D+c)*D;if(Math.abs(C-r)<v)break;r>C?E=D:w=D;D=.5*(w-E)+E}return D}const c=3*n,f=3*(g-n)-c,a=1-c-f,d=3*h,q=3*(b-h)-d,m=1-d-q;return function(r,v=1E-6){r=e(r,v);return((m*r+q)*r+d)*r}}const B=/^cubic-bezier\((.*)\)/,u={};u.ease=l(.25,.1,.25,1);u.linear=l(0,0,1,1);u.easeIn=u["ease-in"]=l(.42,0,1,1);u.easeOut=u["ease-out"]=l(0,0,.58,1);u.easeInOut=u["ease-in-out"]=l(.42,0,.58,1);p.easingFunctions=u;p.parse=function(n){let h=u[n]||null;!h&&(n=B.exec(n))&&(n=n[1].split(",").map(g=>
parseFloat(g.trim())),4!==n.length||n.some(g=>isNaN(g))||(h=l.apply(l,n)));return h};p.unitBezier=l;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["exports"],function(p){function l(b,e){b%=e;return 0<=b?b:b+e}const B=Number.POSITIVE_INFINITY,u=Math.PI,n=128/u,h=256/360,g=1/Math.LN2;p.C_2PI=2*u;p.C_DEG_TO_256=h;p.C_DEG_TO_RAD=u/180;p.C_INFINITY=B;p.C_PI=u;p.C_RAD_TO_256=n;p.between=function(b,e,c){return b>=e&&b<=
c||b>=c&&b<=e};p.degToByte=function(b){return l(b*h,256)};p.interpolate=function(b,e,c){return b*(1-c)+e*c};p.log2=function(b){return Math.log(b)*g};p.positiveMod=l;p.radToByte=function(b){return l(b*n,256)};p.sqr=function(b){return b*b};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports","../../../../../Color"],function(p,l){function B(m,r){return{kind:"array",itemType:m,n:r}}function u(m){if("array"===m.kind){const r=
u(m.itemType);return"number"===typeof m.n?`array<${r}, ${m.n}>`:"value"===m.itemType.kind?"array":`array<${r}>`}return m.kind}function n(m){if(null===m)return g;if("string"===typeof m)return e;if("boolean"===typeof m)return c;if("number"===typeof m)return b;if(m instanceof l)return f;if(Array.isArray(m)){let r;for(const v of m){const w=n(v);if(!r)r=w;else if(r!==w){r=d;break}}return B(r||d,m.length)}return"object"===typeof m?a:d}function h(m,r){if("array"===r.kind)return"array"===m.kind&&(0===m.n&&
"value"===m.itemType.kind||h(m.itemType,r.itemType))&&("number"!==typeof r.n||r.n===m.n);if("value"===r.kind)for(const v of q)if(h(m,v))return!0;return r.kind===m.kind}const g={kind:"null"},b={kind:"number"},e={kind:"string"},c={kind:"boolean"},f={kind:"color"},a={kind:"object"},d={kind:"value"},q=[g,b,e,c,f,a,B(d)];p.BooleanType=c;p.ColorType=f;p.NullType=g;p.NumberType=b;p.ObjectType=a;p.StringType=e;p.ValueType=d;p.arrayType=B;p.getType=n;p.matchType=h;p.typeToString=u;p.valueToString=function(m){if(null===
m)return"";const r=typeof m;return"string"===r?m:"number"===r||"boolean"===r?String(m):m instanceof l?m.toString():JSON.stringify(m)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../Color","../GeometryUtils","../expression/expression","../expression/types"],function(p,l,B,u,n){return function(){function h(b,e){this.isDataDriven=!1;this.interpolator=
null;switch(b.type){case "number":var c=!0;break;case "color":c=!0;break;case "array":c="number"===b.value;break;default:c=!1}null==e&&(e=b.default);if(Array.isArray(e)&&0<e.length&&u.ops[e[0]]){c={number:n.NumberType,color:n.ColorType,string:n.StringType,boolean:n.BooleanType,enum:n.StringType};try{var f="array"===b.type?n.arrayType(c[b.value]||n.ValueType,b.length):c[b.type];const a=u.createExpression(e,null,f);this.getValue=this._buildExpression(a,b);this.isDataDriven=!0;a instanceof u.Interpolate&&
a.input instanceof u.Zoom&&(this.interpolator=a)}catch(a){console.log(a.message),this.getValue=this._buildSimple(b.default)}}else{c&&"interval"===e.type&&(c=!1);if(f=e&&e.stops&&0<e.stops.length)for(const a of e.stops)a[1]=this._validate(a[1],b);if(this.isDataDriven=e?!!e.property:!1)if(void 0!==e.default&&(e.default=this._validate(e.default,b)),f)switch(e.type){case "identity":this.getValue=this._buildIdentity(e,b);break;case "categorical":this.getValue=this._buildCategorical(e,b);break;default:this.getValue=
c?this._buildInterpolate(e,b):this._buildInterval(e,b)}else this.getValue=this._buildIdentity(e,b);else f?this.getValue=c?this._buildZoomInterpolate(e):this._buildZoomInterval(e):(e=this._validate(e,b),this.getValue=this._buildSimple(e))}}var g=h.prototype;g._validate=function(b,e){if("number"===e.type){if(null!=e.minimum&&b<e.minimum)return e.minimum;if(null!=e.maximum&&b>e.maximum)return e.maximum}else"color"===e.type?b=h._parseColor(b):"enum"===e.type?"string"===typeof b&&(b=e.values.indexOf(b)):
"array"===e.type&&"enum"===e.value?b=b.map(c=>"string"===typeof c?e.values.indexOf(c):c):"string"===e.type&&(b=n.valueToString(b));return b};g._buildSimple=function(b){return()=>b};g._buildExpression=function(b,e){return(c,f)=>{try{const a=b.evaluate(f,c);return void 0===a?e.default:this._validate(a,e)}catch(a){return console.log(a.message),e.default}}};g._buildIdentity=function(b,e){return(c,f)=>{let a;f&&(a=f.values[b.property]);void 0!==a&&(a=this._validate(a,e));return null!=a?a:void 0!==b.default?
b.default:e.default}};g._buildCategorical=function(b,e){return(c,f)=>{let a;f&&(a=f.values[b.property]);a=this._categorical(a,b.stops);return void 0!==a?a:void 0!==b.default?b.default:e.default}};g._buildInterval=function(b,e){return(c,f)=>{let a;f&&(a=f.values[b.property]);return"number"===typeof a?this._interval(a,b.stops):void 0!==b.default?b.default:e.default}};g._buildInterpolate=function(b,e){return(c,f)=>{let a;f&&(a=f.values[b.property]);return"number"===typeof a?this._interpolate(a,b.stops,
b.base||1):void 0!==b.default?b.default:e.default}};g._buildZoomInterpolate=function(b){return e=>this._interpolate(e,b.stops,b.base||1)};g._buildZoomInterval=function(b){return e=>this._interval(e,b.stops)};g._categorical=function(b,e){const c=e.length;for(let f=0;f<c;f++)if(e[f][0]===b)return e[f][1]};g._interval=function(b,e){const c=e.length;let f=0;for(let a=0;a<c;a++)if(e[a][0]<=b)f=a;else break;return e[f][1]};g._interpolate=function(b,e,c){const f=e.length;for(let q=0;q<f;q++){const m=e[q];
if(m[0]<=b)var a=m;else{var d=m;break}}if(a&&d){e=d[0]-a[0];b-=a[0];c=1===c?b/e:(c**b-1)/(c**e-1);if(Array.isArray(a[1])){a=a[1];d=d[1];b=[];for(e=0;e<a.length;e++)b.push(B.interpolate(a[e],d[e],c));return b}return B.interpolate(a[1],d[1],c)}if(a)return a[1];if(d)return d[1]};h._isEmpty=function(b){for(const e in b)if(b.hasOwnProperty(e))return!1;return!0};h._parseColor=function(b){if(Array.isArray(b))return b;"string"===typeof b&&(b=new l(b));if(b instanceof l&&!this._isEmpty(b))return l.toUnitRGBA(b)};
return p._createClass(h)}()})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Error ../../../core/has ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../2d/engine/vectorTiles/SchemaHelper ../../2d/engine/vectorTiles/TileHandler3D ../../2d/engine/vectorTiles/VTLPainter3D ../../2d/engine/vectorTiles/style/StyleRepository ./LayerView3D ./TiledLayerView3D ../terrain/terrainUtils ../../layers/LayerView".split(" "),function(p,
l,B,u,n,h,g,b,e,c,f,a,d,q,m,r,v,w,D){function C(E){return F=>E.immediate.schedule(F)}e=function(E){function F(){var z=E.apply(this,arguments)||this;z._tileHandlerController=null;z.type="vector-tile-3d";z.levelShift=u("disable-feature:vtl-level-shift")?0:1;z.contentZoom=u("disable-feature:vtl-level-shift")?1:1.5;return z}p._inherits(F,E);var y=F.prototype;y.initialize=function(){if(null==this.layer.fullExtent)this.addResolvingPromise(Promise.reject(new B("vectortilelayerview:full-extent-undefined",
"This layer view's layer does not define a fullExtent.")));else{var {basemapTerrain:z,spatialReference:I,state:J,viewingMode:K}=this.view,S="local"===K&&!w.vtlAssumes256PixelSizeAsDefault(I)||w.test.force512VTL,M=this.layer.tileInfo.spatialReference.isGeographic;S=S?this.layer.tileInfo:this.layer.tileInfo.getOrCreateCompatible(256,M?1:2);S=this._getTileInfoSupportError(S,this.layer.fullExtent);if(null!=S)return this.addResolvingPromise(Promise.reject(S));S=g.whenOnce(()=>this.view?.basemapTerrain?.tilingSchemeLocked).then(()=>
{var P=z.tilingScheme,R=P.pixelSize;this.schemaHelper=new a.SchemaHelper(256===R?1:2,z.spatialReference?.isGeographic&&256===R?1:0,this.levelShift+(z.spatialReference?.isGeographic||256!==R?0:1));R=256===R?this.layer.tileInfo.getOrCreateCompatible(256,this.layer.tileInfo.spatialReference.isGeographic?1:2):this.view.spatialReference?.isGeographic?this.layer.tileInfo.getOrCreateCompatible(512,.5):this.layer.tileInfo;if(P=this._getTileInfoCompatibilityError(R,P))throw P;this.tileInfo=R});this._tileHandlerController=
new AbortController;M=this.view.resourceController;this._memCache=M.memoryController.newCache(`vtl-${this.layer.uid}`,P=>{P.release()});this.handles.add(g.watch(()=>this.view.qualitySettings.memoryLimit,P=>this._memCache.maxSize=Math.ceil(P/10*1048576),g.syncAndInitial));var O=new m(this.layer.currentStyleInfo.style);this._tileHandler=new d(this.layer,O,J.contentPixelRatio,this._memCache);var T=this._tileHandlerController.signal,N=C(M);M=this._tileHandler.start({signal:T,schedule:N});O=this._tileHandler.spriteMosaic;
O.then(P=>{!h.isAborted(T)&&this._tileHandler&&(this.painter=new q(P,this._tileHandler.glyphMosaic))});M.then(()=>this._tileHandlerController=null);this.updatingHandles.add(()=>({style:this.layer.currentStyleInfo.style,pixelRatio:this.view.state?.contentPixelRatio}),({style:P,pixelRatio:R})=>{this._tileHandlerController&&this._tileHandlerController.abort();this._tileHandlerController=new AbortController;this._memCache.clear();P=new m(P);const L=new d(this.layer,P,R,this._memCache);R=L.start({signal:this._tileHandlerController.signal,
schedule:N});P=L.spriteMosaic;R.then(()=>this._tileHandlerController=null);this.updatingHandles.addPromise(Promise.all([R,P]).then(([,U])=>{const X=this._tileHandler,Z=this.painter;this.painter=new q(U,L.glyphMosaic);this._tileHandler=L;this.emit("data-changed");X.destroy();Z&&Z.dispose()}))});S=Promise.all([S,M,O]);this.addResolvingPromise(S)}};y.destroy=function(){this.painter=n.disposeMaybe(this.painter);this._tileHandlerController=n.abortMaybe(this._tileHandlerController);this._tileHandler=n.destroyMaybe(this._tileHandler);
this._memCache=n.destroyMaybe(this._memCache)};y.fetchTile=async function(z,I,J,K){return this._tileHandler.getVectorTile(z,I,J,K)};p._createClass(F,[{key:"displayLevelRange",get:function(){var z=this.tileInfo.lods;z=this.levelRangeFromScaleRange(this.layer.minScale||z[0].scale,this.layer.maxScale||z[z.length-1].scale);this.layer.maxScale?z.maxLevel++:z.maxLevel+=this.levelShift;return z}},{key:"dataScaleRange",get:function(){const z=this.tileInfo.lods;return{minScale:z[0].scale,maxScale:z[z.length-
1].scale}}},{key:"dataLevelRange",get:function(){const {minScale:z,maxScale:I}=this.dataScaleRange,J=this.levelRangeFromScaleRange(z,I);1===J.minLevel&&256===this.tileInfo.size[0]&&(J.minLevel=0);J.maxLevel+=this.levelShift;return J}}]);return F}(v.TiledLayerView3D(r.LayerView3D(D)));l.__decorate([b.property()],e.prototype,"layer",void 0);l.__decorate([b.property()],e.prototype,"levelShift",void 0);l.__decorate([b.property()],e.prototype,"contentZoom",void 0);l.__decorate([b.property()],e.prototype,
"displayLevelRange",null);l.__decorate([b.property()],e.prototype,"tileInfo",void 0);l.__decorate([b.property()],e.prototype,"dataScaleRange",null);l.__decorate([b.property()],e.prototype,"dataLevelRange",null);l.__decorate([b.property()],e.prototype,"updatingProgressValue",void 0);return e=l.__decorate([f.subclass("esri.views.3d.layers.VectorTileLayerView3D")],e)});