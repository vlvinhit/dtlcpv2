// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Error ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../geometry/Extent ./DynamicLayerView3D ../../layers/WMSLayerView".split(" "),function(g,m,n,d,u,v,w,p,q,r,t){d=function(h){function e(){var b=h.apply(this,arguments)||this;b.type="wms-3d";return b}g._inherits(e,h);var f=e.prototype;f.initialize=
function(){this.layer.serviceSupportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new n("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view")));this.updatingHandles.add(()=>this.exportImageParameters?.version,()=>{this.updatingHandles.addPromise(this.refreshDebounced())})};f.createFetchPopupFeaturesQuery=function(b){var c=this.findExtentInfoAt(b),a=c.extent;a=
new q(a[0],a[1],a[2],a[3],this._spatialReference);c=c.imageSize;const k=c.width,l=a.width/k;return{extent:a,width:k,height:c.height,x:Math.round((b.x-a.xmin)/l),y:Math.round((a.ymax-b.y)/l)}};f.getFetchOptions=function(){return{timeExtent:this.timeExtent}};return g._createClass(e)}(t(r));return d=m.__decorate([p.subclass("esri.views.3d.layers.WMSLayerView3D")],d)});