// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/asyncUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ./LayerView3D ../../layers/LayerView".split(" "),function(q,k,f,r,l,m,t,n,g,u,c,v){c=function(p){function h(a){a=p.call(this,a)||this;a.type="line-of-sight-3d";a._analysisModule=null;return a}k._inherits(h,
p);var d=h.prototype;d.initialize=function(){this.handles.add(n.watch(()=>this.layer.analysis,a=>{this._destroyAnalysisView();null!=a&&this._createAnalysisView(a)},n.syncAndInitial),"analysis-view-handles")};d.destroy=function(){this.handles.remove("analysis-view-handles");this._destroyAnalysisView()};d.whenAnalysisView=async function(){if(null!=this.analysisView)return this.analysisView;if(null!=this._createAnalysisViewTask)return this._createAnalysisViewTask.promise;throw new l("layerview:no-analysisview-for-analysis",
"The analysis has not been set on the LineOfSightLayer of this layer view");};d.isUpdating=function(){return null!=this._createAnalysisViewTask||null!=this.analysisView&&this.analysisView.updating};d._createAnalysisView=function(a){const e=r.createTask(async b=>{this.analysisView=await this._createAnalysisViewPromise(a,b);this._createAnalysisViewTask===e&&(this._createAnalysisViewTask=null);return this.analysisView});this._createAnalysisViewTask=e};d._destroyAnalysisView=function(){this.analysisView=
m.destroyMaybe(this.analysisView);this._createAnalysisViewTask=m.abortMaybe(this._createAnalysisViewTask)};d._createAnalysisViewPromise=async function(a,e){var b=this._analysisModule;null==b&&(this._analysisModule=b=await this._loadAnalysisModule());b=new b.default({analysis:a,view:this.view,parent:this});await b.when();if(t.isAborted(e))throw b.destroy(),new l("layerview:no-analysisview-for-analysis","The analysis has not been added to the LineOfSightLayer of this layer view",{analysis:a});return b};
d._loadAnalysisModule=function(){return new Promise((a,e)=>q(["../analysis/LineOfSightAnalysisView3D"],b=>a(Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}))),e))};return k._createClass(h)}(c.LayerView3D(v));f.__decorate([g.property()],c.prototype,"type",void 0);f.__decorate([g.property()],c.prototype,"layer",void 0);f.__decorate([g.property()],c.prototype,"analysisView",void 0);f.__decorate([g.property()],c.prototype,"_createAnalysisViewTask",void 0);
return c=f.__decorate([u.subclass("esri.views.3d.layers.LineOfSightLayerView3D")],c)});