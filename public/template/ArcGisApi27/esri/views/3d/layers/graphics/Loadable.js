// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../core/promiseUtils"],function(a,g,h,k){let l=function(){function b(c){this.schedule=c;this._abortController=null;this._loadStatus=a.LoadStatus.LOADING;this.logger=this._loader=this._loadError=null}var e=b.prototype;e.destroy=function(){this.abortLoad()};e.load=function(c,f){if(this._loadStatus===a.LoadStatus.LOADED)return c&&c(),this._loader??Promise.resolve();if(this._loadStatus===a.LoadStatus.FAILED)return f&&
f(this._loadError),this._loader??Promise.resolve();null==this._loader&&(this._abortController=new AbortController,this._loader=this.doLoad(this._abortController.signal).then(()=>{this._abortController=null;this._loadStatus=a.LoadStatus.LOADED},d=>{this._loadError=d;this._abortController=null;this._loadStatus=a.LoadStatus.FAILED;!k.isAbortError(d)&&this.logger&&d.message&&this.logger.warn(d.message);throw d;}));this._loader.then(c,f).catch(()=>{});return this._loader};e.abortLoad=function(){null!=
this._abortController?this._abortController=h.abortMaybe(this._abortController):this._loadStatus===a.LoadStatus.LOADING&&(this._loadStatus=a.LoadStatus.FAILED);this._loader=null};g._createClass(b,[{key:"loadStatus",get:function(){return this._loadStatus}}]);return b}();a.LoadStatus=void 0;(function(b){b[b.LOADING=0]="LOADING";b[b.LOADED=1]="LOADED";b[b.FAILED=2]="FAILED"})(a.LoadStatus||(a.LoadStatus={}));a.Loadable=l;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});