// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../symbols/support/unitConversionUtils","./featureExpressionInfoUtils"],function(g,l,h,f){let m=function(){function d(){this._renderUnitOffset=this._meterUnitOffset=0;this._unit="meters";this._metersPerElevationInfoUnit=1;this.mode=this.centerPointInElevationSR=this._featureExpressionInfoContext=null}var c=d.prototype;c.reset=function(){this.mode=null;this._renderUnitOffset=this._meterUnitOffset=0;this._featureExpressionInfoContext=
null;this.unit="meters"};c.addOffsetRenderUnits=function(a){this._renderUnitOffset+=a};c.geometryZWithOffset=function(a,b){b=this.calculateOffsetRenderUnits(b);return null!=this.featureExpressionInfoContext?b:a+b};c.calculateOffsetRenderUnits=function(a){let b=this._meterUnitOffset;const e=this.featureExpressionInfoContext;null!=e&&(b+=f.execute(e)*this._metersPerElevationInfoUnit);return b/a.unitInMeters+this._renderUnitOffset};c.setFromElevationInfo=function(a){this.mode=a.mode;this.unit=h.supportsUnit(a.unit)?
a.unit:"meters";this.offsetElevationInfoUnits=a.offset??0};c.updateFeatureExpressionInfoContext=function(a,b,e){if(null==a)this._featureExpressionInfoContext=null;else{var k=a&&a.arcade;k&&null!=b&&null!=e?(this._featureExpressionInfoContext=f.clone(a),f.setContextFeature(this._featureExpressionInfoContext,f.createFeature(k.modules,b,e))):this._featureExpressionInfoContext=a}};d.fromElevationInfo=function(a){const b=new d;null!=a&&b.setFromElevationInfo(a);return b};l._createClass(d,[{key:"featureExpressionInfoContext",
get:function(){return this._featureExpressionInfoContext}},{key:"meterUnitOffset",get:function(){return this._meterUnitOffset}},{key:"unit",get:function(){return this._unit},set:function(a){this._unit=a;this._metersPerElevationInfoUnit=h.getMetersPerUnit(a)}},{key:"requiresSampledElevationInfo",get:function(){return"absolute-height"!==this.mode}},{key:"offsetMeters",set:function(a){this._meterUnitOffset=a;this._renderUnitOffset=0}},{key:"offsetElevationInfoUnits",set:function(a){this._meterUnitOffset=
a*this._metersPerElevationInfoUnit;this._renderUnitOffset=0}}]);return d}();g.ElevationContext=m;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});