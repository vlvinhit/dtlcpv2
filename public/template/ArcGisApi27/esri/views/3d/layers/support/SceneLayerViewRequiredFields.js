// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/AsyncUpdate ../../../../core/HandleOwner ../../../../core/Logger ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../../../../layers/support/fieldUtils".split(" "),function(b,m,d,n,p,q,f,v,w,x,r,k){async function l(h){const e=new Set;try{return await h(e),
Array.from(e).sort()}catch(a){return q.getLogger("esri.views.3d.layers.support.SceneLayerViewRequiredFields").error(a),null}}b.SceneLayerViewRequiredFields=function(h){function e(a){return h.call(this,a)||this}m._inherits(e,h);e.prototype.initialize=function(){this.handles.add([this.autoUpdateAsync("rendererFields",async()=>{const {fieldsIndex:a,renderer:c}=this.layer;return c?l(g=>c.collectRequiredFields(g,a)):null}),this.autoUpdateAsync("labelingFields",async()=>{const {layer:a}=this;return a.labelsVisible?
l(c=>k.collectLabelingFields(c,a)):null}),this.autoUpdateAsync("viewFilterFields",()=>{const {layer:a,filter:c}=this.layerView;return l(g=>k.collectFilterFields(g,a,c))})])};m._createClass(e,[{key:"layer",get:function(){return this.layerView.layer}},{key:"requiredFields",get:function(){const {layerView:{layer:{fieldsIndex:a},definitionExpressionFields:c},rendererFields:g,labelingFields:t,viewFilterFields:u}=this;return k.fixFields(a,[...(c??[]),...(g??[]),...(t??[]),...(u??[])])}}]);return e}(n.AsyncUpdateMixin(p.HandleOwner));
d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,"layerView",void 0);d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,"layer",null);d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,"requiredFields",null);d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,"rendererFields",void 0);d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,"labelingFields",void 0);d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,
"viewFilterFields",void 0);b.SceneLayerViewRequiredFields=d.__decorate([r.subclass("esri.views.3d.layers.support.SceneLayerViewRequiredFields")],b.SceneLayerViewRequiredFields);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});