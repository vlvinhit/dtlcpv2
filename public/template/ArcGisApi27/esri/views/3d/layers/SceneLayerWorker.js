// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/DoubleArray":function(){define(["exports","../../core/typedArrayUtil"],function(d,l){d.copyInto=function(v,z){for(let F=0;F<z.length;++F)v[F]=z[F];return v};d.doubleArrayFrom=function(v){return(l.isArray(v)?v.length:v.byteLength/8)<=l.NATIVE_ARRAY_MAX_SIZE?Array.from(v):new Float64Array(v)};d.doubleSubArray=function(v,z,F){return Array.isArray(v)?v.slice(z,z+F):v.subarray(z,z+F)};d.newDoubleArray=function(v,z=!1){return v<=l.NATIVE_ARRAY_MAX_SIZE?z?Array(v).fill(0):
Array(v):new Float64Array(v)};d.toFloat64Array=function(v){return Array.isArray(v)?new Float64Array(v):v};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/MeshGeoreferencedRelativeVertexSpace":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../chunks/vec3f64 ../Point".split(" "),
function(d,l,v,z,F,C,B,m,N,K,U,E){v=function(r){function w(D){D=r.call(this,D)||this;D.type="georeferenced-relative";D.isRelative=!0;D.isGeoreferenced=!0;D.origin=U.create();return D}d._inherits(w,r);var x=w.prototype;x.getOriginPoint=function(D){const [O,R,G]=this.origin;return new E({x:O,y:R,z:G,spatialReference:D})};x.setOriginFormPoint=function({x:D,y:O,z:R}){this.origin=U.fromValues(D,O,R??0)};return d._createClass(w)}(v.ClonableMixin(z.JSONSupport));l.__decorate([N.enumeration({georeferencedRelative:"georeferenced-relative"},
{readOnly:!0})],v.prototype,"type",void 0);l.__decorate([F.property({type:[Number],nonNullable:!0,json:{write:!0}})],v.prototype,"origin",void 0);return v=l.__decorate([K.subclass("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],v)})},"esri/core/Clonable":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./has ./lang ./Logger ./maybe ./accessorSupport/PropertyOrigin ./accessorSupport/utils ./accessorSupport/decorators/subclass".split(" "),
function(d,l,v,z,F,C,B,m,N,K,U){F=E=>{E=function(r){function w(){return r.apply(this,arguments)||this}l._inherits(w,r);w.prototype.clone=function(){var x=m.unwrapOrThrow(K.getProperties(this),"unable to clone instance of non-accessor class"),D=x.metadatas;const O=x.store,R={};x=new Map;for(var G in D){var P=D[G];const t=O?.originOf(G),M=P.clonable;if(P.readOnly||!1===M||t!==N.OriginId.USER&&t!==N.OriginId.DEFAULTS&&t!==N.OriginId.WEB_MAP&&t!==N.OriginId.WEB_SCENE)continue;P=this[G];let J=null;J="function"===
typeof M?M(P):"reference"===M?P:C.tryClone(P);if(null==P||null!=J)t===N.OriginId.DEFAULTS?x.set(G,J):R[G]=J}D=new (Object.getPrototypeOf(this).constructor)(R);if(x.size&&(G=K.getProperties(D)?.store))for(const [t,M]of x)G.set(t,M,N.OriginId.DEFAULTS);return D};return l._createClass(w)}(E);return E=v.__decorate([U.subclass("esri.core.Clonable")],E)};d.Clonable=function(E){function r(){return E.apply(this,arguments)||this}l._inherits(r,E);return l._createClass(r)}(F(z));d.Clonable=v.__decorate([U.subclass("esri.core.Clonable")],
d.Clonable);d.ClonableMixin=F;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(d,l,v){d.enumeration=function(z,F={}){z=z instanceof l.JSONMap?z:new l.JSONMap(z,F);z={type:F?.ignoreUnknown??!0?z.apiValues:String,json:{type:z.jsonValues,read:F?.readOnly?!1:{reader:z.read},write:{writer:z.write}}};void 0!==F?.readOnly&&(z.readOnly=!!F.readOnly);void 0!==F?.default&&(z.json.default=
F.default);void 0!==F?.name&&(z.json.name=F.name);void 0!==F?.nonNullable&&(z.nonNullable=F.nonNullable);return v.property(z)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/MeshGeoreferencedVertexSpace":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,l,v,z,F,C,B,m,N,K,U){v=function(E){function r(){var w=E.call(this,{})||this;w.type="georeferenced";w.isRelative=!1;w.isGeoreferenced=!0;return w}d._inherits(r,E);return d._createClass(r)}(v.ClonableMixin(z.JSONSupport));l.__decorate([K.enumeration({georeferenced:"georeferenced"},{readOnly:!0})],v.prototype,"type",void 0);return v=l.__decorate([U.subclass("esri.geometry.support.MeshGeoreferencedVertexSpace")],v)})},"esri/geometry/support/MeshLocalVertexSpace":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../chunks/vec3f64 ../Point".split(" "),
function(d,l,v,z,F,C,B,m,N,K,U,E){v=function(r){function w(D){D=r.call(this,D)||this;D.type="local";D.isRelative=!0;D.isGeoreferenced=!1;D.origin=U.create();return D}d._inherits(w,r);var x=w.prototype;x.getOriginPoint=function(D){const [O,R,G]=this.origin;return new E({x:O,y:R,z:G,spatialReference:D})};x.setOriginFormPoint=function({x:D,y:O,z:R}){this.origin=U.fromValues(D,O,R??0)};return d._createClass(w)}(v.ClonableMixin(z.JSONSupport));l.__decorate([N.enumeration({local:"local"},{readOnly:!0})],
v.prototype,"type",void 0);l.__decorate([F.property({type:[Number],nonNullable:!0,json:{write:!0}})],v.prototype,"origin",void 0);return v=l.__decorate([K.subclass("esri.geometry.support.MeshLocalVertexSpace")],v)})},"esri/chunks/vec32":function(){define(["exports","../geometry/support/buffer/math/common"],function(d,l){function v(r,w,x){z(r.typedBuffer,w.typedBuffer,x,r.typedBufferStride,w.typedBufferStride)}function z(r,w,x,D=3,O=D){if(r.length/D!==Math.ceil(w.length/O))return l.mathLogger.error("source and destination buffers need to have the same number of elements"),
r;const R=r.length/D,G=x[0],P=x[1],t=x[2],M=x[4],J=x[5],aa=x[6],da=x[8],sa=x[9],ia=x[10],ba=x[12],ta=x[13];x=x[14];let na=0,pa=0;for(let oa=0;oa<R;oa++){const ja=w[na],ka=w[na+1],T=w[na+2];r[pa]=G*ja+M*ka+da*T+ba;r[pa+1]=P*ja+J*ka+sa*T+ta;r[pa+2]=t*ja+aa*ka+ia*T+x;na+=O;pa+=D}return r}function F(r,w,x){C(r.typedBuffer,w.typedBuffer,x,r.typedBufferStride,w.typedBufferStride)}function C(r,w,x,D=3,O=D){if(r.length/D!==Math.ceil(w.length/O))l.mathLogger.error("source and destination buffers need to have the same number of elements");
else{var R=r.length/D,G=x[0],P=x[1],t=x[2],M=x[3],J=x[4],aa=x[5],da=x[6],sa=x[7];x=x[8];var ia=0,ba=0;for(let ta=0;ta<R;ta++){const na=w[ia],pa=w[ia+1],oa=w[ia+2];r[ba]=G*na+M*pa+da*oa;r[ba+1]=P*na+J*pa+sa*oa;r[ba+2]=t*na+aa*pa+x*oa;ia+=O;ba+=D}}}function B(r,w,x){m(r.typedBuffer,w,x,r.typedBufferStride)}function m(r,w,x,D=3){const O=Math.min(r.length/D,w.count),R=w.typedBuffer;w=w.typedBufferStride;let G=0,P=0;for(let t=0;t<O;t++)r[P]=x*R[G],r[P+1]=x*R[G+1],r[P+2]=x*R[G+2],G+=w,P+=D}function N(r,
w){K(r.typedBuffer,w.typedBuffer,r.typedBufferStride,w.typedBufferStride)}function K(r,w,x=3,D=x){const O=Math.min(r.length/x,w.length/D);let R=0,G=0;for(let t=0;t<O;t++){const M=w[R],J=w[R+1],aa=w[R+2];var P=M*M+J*J+aa*aa;0<P&&(P=1/Math.sqrt(P),r[G]=P*M,r[G+1]=P*J,r[G+2]=P*aa);R+=D;G+=x}}function U(r,w,x){const D=Math.min(r.count,w.count),O=r.typedBuffer;r=r.typedBufferStride;const R=w.typedBuffer;w=w.typedBufferStride;let G=0,P=0;for(let t=0;t<D;t++)O[P]=R[G]>>x,O[P+1]=R[G+1]>>x,O[P+2]=R[G+2]>>
x,G+=w,P+=r}const E=Object.freeze(Object.defineProperty({__proto__:null,normalize:K,normalizeView:N,scale:m,scaleView:B,shiftRight:U,transformMat3:C,transformMat3View:F,transformMat4:z,transformMat4View:v},Symbol.toStringTag,{value:"Module"}));d.normalize=K;d.normalizeView=N;d.scale=m;d.scaleView=B;d.shiftRight=U;d.transformMat3=C;d.transformMat3View=F;d.transformMat4=z;d.transformMat4View=v;d.vec3=E})},"esri/geometry/support/buffer/math/common":function(){define(["exports","../../../../core/Logger"],
function(d,l){l=l.getLogger("esri.views.3d.support.buffer.math");d.mathLogger=l;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/libs/i3s/enums":function(){define(["exports"],function(d){d.IndexType=void 0;(function(l){l[l.None=0]="None";l[l.Int16=1]="Int16";l[l.Int32=2]="Int32"})(d.IndexType||(d.IndexType={}));d.ModificationType=void 0;(function(l){l[l.Replace=0]="Replace";l[l.Outside=1]="Outside";l[l.Inside=2]="Inside";l[l.Finished=3]="Finished"})(d.ModificationType||(d.ModificationType=
{}));Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/libs/i3s/I3SModule":function(){define(["require","exports","../../assets"],function(d,l,v){function z(C){return v.getAssetUrl(`esri/libs/i3s/${C}`)}let F;l.get=function(){F||(F=(new Promise(C=>(new Promise((B,m)=>d(["../../chunks/i3s"],B,m))).then(B=>B.i3s).then(({default:B})=>{const m=B({locateFile:z,onRuntimeInitialized:()=>C(m)});delete m.then}))).catch(C=>{throw C;}));return F};Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/layers/i3s/I3SNode":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/sphere"],function(d,l,v){let z=l._createClass(function(m,N){this.id=m;this.mbs=N;this.renderMbs=v.fromValues(0,0,0,-1);this.elevationRange=null}),F=l._createClass(function(){this.min=Infinity;this.max=-Infinity;this.valid=!1});d.NodeFilterImpact=void 0;(function(m){m[m.Unmodified=0]="Unmodified";m[m.Culled=1]="Culled";m[m.NotChecked=2]="NotChecked"})(d.NodeFilterImpact||
(d.NodeFilterImpact={}));d.NodeIMModificationImpact=void 0;(function(m){m[m.Unmodified=0]="Unmodified";m[m.PotentiallyModified=1]="PotentiallyModified";m[m.Culled=2]="Culled";m[m.Unknown=3]="Unknown";m[m.NotChecked=4]="NotChecked"})(d.NodeIMModificationImpact||(d.NodeIMModificationImpact={}));let C=function(m){function N(K,U,E,r,w,x,D,O,R,G){K=m.call(this,K,E)||this;K.index=U;K.childCount=r;K.level=w;K.resources=x;K.version=D;K.lodMetric=O;K.maxError=R;K.numFeatures=G;K.failed=!1;K.cacheState=d.CacheState.Unknown;
K.vertexCount=0;K.memory=0;K.childrenLoaded=0;K.hasModifications=!1;K.imModificationImpact=d.NodeIMModificationImpact.NotChecked;return K}l._inherits(N,m);return l._createClass(N)}(z);d.CacheState=void 0;(function(m){m[m.Unknown=0]="Unknown";m[m.Uncached=1]="Uncached";m[m.Cached=2]="Cached"})(d.CacheState||(d.CacheState={}));d.LodMetric=void 0;(function(m){m[m.None=0]="None";m[m.MaxScreenThreshold=1]="MaxScreenThreshold";m[m.ScreenSpaceRelative=2]="ScreenSpaceRelative";m[m.RemovedFeatureDiameter=
3]="RemovedFeatureDiameter";m[m.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"})(d.LodMetric||(d.LodMetric={}));d.NodeState=void 0;(function(m){m[m.Hole=0]="Hole";m[m.Leaf=1]="Leaf"})(d.NodeState||(d.NodeState={}));let B=l._createClass(function(m,N,K,U){this.nodeHasLOD=m;this.isChosen=N;this.lodLevel=K;this.version=U});d.ElevationRange=F;d.Node=C;d.NodeBase=z;d.NodeTraversalState=B;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(d,l,v,z,F,C,B,m,N,K,U,E,r){function w(){return N.create()}function x(q,y=w()){return m.copy(y,q)}function D(q,y){return N.fromValues(q[0],q[1],q[2],y)}function O(q){return q}function R(q){q[0]=q[1]=q[2]=q[3]=0}function G(q,y){q[0]=q[1]=q[2]=0;q[3]=y;return q}function P(q){return q[3]}function t(q){return q}function M(q,y,L,ca){return N.fromValues(q,y,L,ca)}function J(q,y,L){q!==L&&C.copy(L,q);L[3]=q[3]+y;return L}function aa(q,y,L){v.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported");
return q===L?L:x(q,L)}function da(q,y,L){if(null==y)return!1;const {origin:ca,direction:ea}=y;var fa=qa;fa[0]=ca[0]-q[0];fa[1]=ca[1]-q[1];fa[2]=ca[2]-q[2];y=ea[0]*ea[0]+ea[1]*ea[1]+ea[2]*ea[2];if(0===y)return!1;const Ea=2*(ea[0]*fa[0]+ea[1]*fa[1]+ea[2]*fa[2]);q=Ea*Ea-4*y*(fa[0]*fa[0]+fa[1]*fa[1]+fa[2]*fa[2]-q[3]*q[3]);if(0>q)return!1;fa=Math.sqrt(q);q=(-Ea-fa)/(2*y);y=(-Ea+fa)/(2*y);if(0>q||y<q&&0<y)q=y;if(0>q)return!1;L&&(L[0]=ca[0]+ea[0]*q,L[1]=ca[1]+ea[1]*q,L[2]=ca[2]+ea[2]*q);return!0}function sa(q,
y){return da(q,y,null)}function ia(q,y,L){if(da(q,y,L))return L;q=ba(q,y,r.sv3d.get());C.add(L,y.origin,C.scale(r.sv3d.get(),y.direction,C.distance(y.origin,q)/C.length(y.direction)));return L}function ba(q,y,L){const ca=r.sv3d.get(),ea=r.sm4d.get();C.cross(ca,y.origin,y.direction);const fa=q[3];C.cross(L,ca,y.origin);C.scale(L,L,1/C.length(L)*fa);q=oa(q,y.origin);y=E.angle(y.origin,L);F.fromRotation(ea,y+q,ca);C.transformMat4(L,L,ea);return L}function ta(q,y,L){if(da(q,y,L))return L;U.closestPoint(y,
q,L);return na(q,L,L)}function na(q,y,L){y=C.subtract(r.sv3d.get(),y,q);y=C.scale(r.sv3d.get(),y,q[3]/C.length(y));return C.add(L,y,q)}function pa(q,y){y=C.subtract(r.sv3d.get(),y,q);y=C.squaredLength(y);return Math.sqrt(Math.abs(y-q[3]*q[3]))}function oa(q,y){y=C.subtract(r.sv3d.get(),y,q);y=C.length(y);q=q[3];return z.acosClamped(q/(q+Math.abs(q-y)))}function ja(q,y,L,ca){q=C.subtract(Ca,y,q);switch(L){case K.Axis.X:return L=z.cartesianToSpherical(q,Ca)[2],C.set(ca,-Math.sin(L),Math.cos(L),0);case K.Axis.Y:return q=
z.cartesianToSpherical(q,Ca),L=q[1],q=q[2],y=Math.sin(L),C.set(ca,-y*Math.cos(q),-y*Math.sin(q),Math.cos(L));case K.Axis.Z:return C.normalize(ca,q)}}function ka(q,y){y=C.subtract(Da,y,q);return C.length(y)-q[3]}function T(q,y,L,ca){const ea=ka(q,y);q=ja(q,y,K.Axis.Z,Da);L=C.scale(Da,q,L-ea);return C.add(ca,y,L)}function la(q,y){y=C.squaredDistance(q,y);q=q[3];return y<=q*q}function ra(q,y,L=w()){const ca=C.distance(q,y),ea=q[3],fa=y[3];if(ca+fa<ea)return m.copy(L,q),L;if(ca+ea<fa)return m.copy(L,
y),L;C.lerp(L,q,y,(ca+fa-ea)/(2*ca));L[3]=(ca+ea+fa)/2;return L}l=w();const qa=B.create(),Ca=B.create(),Da=B.create();B=w();const Fa=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:l,altitudeAt:ka,angleToSilhouette:oa,axisAt:ja,clear:R,closestPoint:ta,closestPointOnSilhouette:ba,containsPoint:la,copy:x,create:w,distanceToSilhouette:pa,elevate:J,fromCenterAndRadius:D,fromRadius:G,fromValues:M,getCenter:t,getRadius:P,intersectRay:da,intersectRayClosestSilhouette:ia,intersectsRay:sa,projectPoint:na,
setAltitudeAt:T,setExtent:aa,tmpSphere:B,union:ra,wrap:O},Symbol.toStringTag,{value:"Module"}));d.NullSphere=l;d.altitudeAt=ka;d.angleToSilhouette=oa;d.axisAt=ja;d.clear=R;d.closestPoint=ta;d.closestPointOnSilhouette=ba;d.containsPoint=la;d.copy=x;d.create=w;d.distanceToSilhouette=pa;d.elevate=J;d.fromCenterAndRadius=D;d.fromRadius=G;d.fromValues=M;d.getCenter=t;d.getRadius=P;d.intersectRay=da;d.intersectRayClosestSilhouette=ia;d.intersectsRay=sa;d.projectPoint=na;d.setAltitudeAt=T;d.setExtent=aa;
d.sphere=Fa;d.tmpSphere=B;d.union=ra;d.wrap=O})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(d,l,v){function z(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function F(a,b,c,e,f,h,k,p,g,n,u,A,I,H,V,S,Q){a[0]=b;a[1]=c;a[2]=e;a[3]=f;a[4]=h;a[5]=k;a[6]=p;a[7]=g;a[8]=n;a[9]=u;a[10]=A;a[11]=I;a[12]=H;a[13]=V;a[14]=S;a[15]=Q;return a}
function C(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function B(a,b){if(a===b){const c=b[1],e=b[2],f=b[3],h=b[6],k=b[7],p=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=e;a[9]=h;a[11]=b[14];a[12]=f;a[13]=k;a[14]=p}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];
return a}function m(a,b){N(a,b)||C(a);return a}function N(a,b){const c=b[0],e=b[1],f=b[2],h=b[3],k=b[4],p=b[5],g=b[6],n=b[7],u=b[8],A=b[9],I=b[10],H=b[11],V=b[12],S=b[13],Q=b[14];b=b[15];const ha=c*p-e*k,W=c*g-f*k,X=c*n-h*k,Y=e*g-f*p,Z=e*n-h*p,va=f*n-h*g,wa=u*S-A*V,xa=u*Q-I*V,ya=u*b-H*V,za=A*Q-I*S,Aa=A*b-H*S,Ba=I*b-H*Q;let ma=ha*Ba-W*Aa+X*za+Y*ya-Z*xa+va*wa;if(!ma)return null;ma=1/ma;a[0]=(p*Ba-g*Aa+n*za)*ma;a[1]=(f*Aa-e*Ba-h*za)*ma;a[2]=(S*va-Q*Z+b*Y)*ma;a[3]=(I*Z-A*va-H*Y)*ma;a[4]=(g*ya-k*Ba-n*
xa)*ma;a[5]=(c*Ba-f*ya+h*xa)*ma;a[6]=(Q*X-V*va-b*W)*ma;a[7]=(u*va-I*X+H*W)*ma;a[8]=(k*Aa-p*ya+n*wa)*ma;a[9]=(e*ya-c*Aa-h*wa)*ma;a[10]=(V*Z-S*X+b*ha)*ma;a[11]=(A*X-u*Z-H*ha)*ma;a[12]=(p*xa-k*za-g*wa)*ma;a[13]=(c*za-e*xa+f*wa)*ma;a[14]=(S*W-V*Y-Q*ha)*ma;a[15]=(u*Y-A*W+I*ha)*ma;return a}function K(a,b){const c=b[0],e=b[1],f=b[2],h=b[3],k=b[4],p=b[5],g=b[6],n=b[7],u=b[8],A=b[9],I=b[10],H=b[11],V=b[12],S=b[13],Q=b[14];b=b[15];a[0]=p*(I*b-H*Q)-A*(g*b-n*Q)+S*(g*H-n*I);a[1]=-(e*(I*b-H*Q)-A*(f*b-h*Q)+S*(f*
H-h*I));a[2]=e*(g*b-n*Q)-p*(f*b-h*Q)+S*(f*n-h*g);a[3]=-(e*(g*H-n*I)-p*(f*H-h*I)+A*(f*n-h*g));a[4]=-(k*(I*b-H*Q)-u*(g*b-n*Q)+V*(g*H-n*I));a[5]=c*(I*b-H*Q)-u*(f*b-h*Q)+V*(f*H-h*I);a[6]=-(c*(g*b-n*Q)-k*(f*b-h*Q)+V*(f*n-h*g));a[7]=c*(g*H-n*I)-k*(f*H-h*I)+u*(f*n-h*g);a[8]=k*(A*b-H*S)-u*(p*b-n*S)+V*(p*H-n*A);a[9]=-(c*(A*b-H*S)-u*(e*b-h*S)+V*(e*H-h*A));a[10]=c*(p*b-n*S)-k*(e*b-h*S)+V*(e*n-h*p);a[11]=-(c*(p*H-n*A)-k*(e*H-h*A)+u*(e*n-h*p));a[12]=-(k*(A*Q-I*S)-u*(p*Q-g*S)+V*(p*I-g*A));a[13]=c*(A*Q-I*S)-u*(e*
Q-f*S)+V*(e*I-f*A);a[14]=-(c*(p*Q-g*S)-k*(e*Q-f*S)+V*(e*g-f*p));a[15]=c*(p*I-g*A)-k*(e*I-f*A)+u*(e*g-f*p);return a}function U(a){const b=a[0],c=a[1],e=a[2],f=a[3],h=a[4],k=a[5],p=a[6],g=a[7],n=a[8],u=a[9],A=a[10],I=a[11],H=a[12],V=a[13],S=a[14];a=a[15];return(b*k-c*h)*(A*a-I*S)-(b*p-e*h)*(u*a-I*V)+(b*g-f*h)*(u*S-A*V)+(c*p-e*k)*(n*a-I*H)-(c*g-f*k)*(n*S-A*H)+(e*g-f*p)*(n*V-u*H)}function E(a,b,c){const e=b[0],f=b[1],h=b[2],k=b[3],p=b[4],g=b[5],n=b[6],u=b[7],A=b[8],I=b[9],H=b[10],V=b[11],S=b[12],Q=b[13],
ha=b[14];b=b[15];let W=c[0],X=c[1],Y=c[2],Z=c[3];a[0]=W*e+X*p+Y*A+Z*S;a[1]=W*f+X*g+Y*I+Z*Q;a[2]=W*h+X*n+Y*H+Z*ha;a[3]=W*k+X*u+Y*V+Z*b;W=c[4];X=c[5];Y=c[6];Z=c[7];a[4]=W*e+X*p+Y*A+Z*S;a[5]=W*f+X*g+Y*I+Z*Q;a[6]=W*h+X*n+Y*H+Z*ha;a[7]=W*k+X*u+Y*V+Z*b;W=c[8];X=c[9];Y=c[10];Z=c[11];a[8]=W*e+X*p+Y*A+Z*S;a[9]=W*f+X*g+Y*I+Z*Q;a[10]=W*h+X*n+Y*H+Z*ha;a[11]=W*k+X*u+Y*V+Z*b;W=c[12];X=c[13];Y=c[14];Z=c[15];a[12]=W*e+X*p+Y*A+Z*S;a[13]=W*f+X*g+Y*I+Z*Q;a[14]=W*h+X*n+Y*H+Z*ha;a[15]=W*k+X*u+Y*V+Z*b;return a}function r(a,
b,c){const e=c[0],f=c[1];c=c[2];if(b===a)a[12]=b[0]*e+b[4]*f+b[8]*c+b[12],a[13]=b[1]*e+b[5]*f+b[9]*c+b[13],a[14]=b[2]*e+b[6]*f+b[10]*c+b[14],a[15]=b[3]*e+b[7]*f+b[11]*c+b[15];else{const h=b[0],k=b[1],p=b[2],g=b[3],n=b[4],u=b[5],A=b[6],I=b[7],H=b[8],V=b[9],S=b[10],Q=b[11];a[0]=h;a[1]=k;a[2]=p;a[3]=g;a[4]=n;a[5]=u;a[6]=A;a[7]=I;a[8]=H;a[9]=V;a[10]=S;a[11]=Q;a[12]=h*e+n*f+H*c+b[12];a[13]=k*e+u*f+V*c+b[13];a[14]=p*e+A*f+S*c+b[14];a[15]=g*e+I*f+Q*c+b[15]}return a}function w(a,b,c){const e=c[0],f=c[1];
c=c[2];a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*f;a[5]=b[5]*f;a[6]=b[6]*f;a[7]=b[7]*f;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function x(a,b,c,e){let f=e[0],h=e[1];e=e[2];let k=Math.sqrt(f*f+h*h+e*e);var p=void 0,g=void 0;let n=void 0,u=void 0,A=void 0,I=void 0,H=void 0,V=void 0,S=void 0,Q=void 0,ha=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0;g=
p=void 0;if(k<v.getEpsilon())return null;k=1/k;f*=k;h*=k;e*=k;p=Math.sin(c);g=Math.cos(c);n=1-g;u=b[0];A=b[1];I=b[2];H=b[3];V=b[4];S=b[5];Q=b[6];ha=b[7];W=b[8];X=b[9];Y=b[10];Z=b[11];va=f*f*n+g;wa=h*f*n+e*p;xa=e*f*n-h*p;ya=f*h*n-e*p;za=h*h*n+g;Aa=e*h*n+f*p;Ba=f*e*n+h*p;p=h*e*n-f*p;g=e*e*n+g;a[0]=u*va+V*wa+W*xa;a[1]=A*va+S*wa+X*xa;a[2]=I*va+Q*wa+Y*xa;a[3]=H*va+ha*wa+Z*xa;a[4]=u*ya+V*za+W*Aa;a[5]=A*ya+S*za+X*Aa;a[6]=I*ya+Q*za+Y*Aa;a[7]=H*ya+ha*za+Z*Aa;a[8]=u*Ba+V*p+W*g;a[9]=A*Ba+S*p+X*g;a[10]=I*Ba+
Q*p+Y*g;a[11]=H*Ba+ha*p+Z*g;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}function D(a,b,c){const e=Math.sin(c);c=Math.cos(c);const f=b[4],h=b[5],k=b[6],p=b[7],g=b[8],n=b[9],u=b[10],A=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=f*c+g*e;a[5]=h*c+n*e;a[6]=k*c+u*e;a[7]=p*c+A*e;a[8]=g*c-f*e;a[9]=n*c-h*e;a[10]=u*c-k*e;a[11]=A*c-p*e;return a}function O(a,b,c){const e=Math.sin(c);c=Math.cos(c);const f=b[0],h=b[1],k=b[2],
p=b[3],g=b[8],n=b[9],u=b[10],A=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*c-g*e;a[1]=h*c-n*e;a[2]=k*c-u*e;a[3]=p*c-A*e;a[8]=f*e+g*c;a[9]=h*e+n*c;a[10]=k*e+u*c;a[11]=p*e+A*c;return a}function R(a,b,c){const e=Math.sin(c);c=Math.cos(c);const f=b[0],h=b[1],k=b[2],p=b[3],g=b[4],n=b[5],u=b[6],A=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*c+g*e;a[1]=h*c+n*e;a[2]=k*c+u*
e;a[3]=p*c+A*e;a[4]=g*c-f*e;a[5]=n*c-h*e;a[6]=u*c-k*e;a[7]=A*c-p*e;return a}function G(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}function P(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function t(a,b,c){if(0===b)return C(a);let e=c[0],f=c[1];c=c[2];let h=Math.sqrt(e*e+f*f+c*c),k=void 0,p=void 0,g=void 0;if(h<
v.getEpsilon())return null;h=1/h;e*=h;f*=h;c*=h;k=Math.sin(b);p=Math.cos(b);g=1-p;a[0]=e*e*g+p;a[1]=f*e*g+c*k;a[2]=c*e*g-f*k;a[3]=0;a[4]=e*f*g-c*k;a[5]=f*f*g+p;a[6]=c*f*g+e*k;a[7]=0;a[8]=e*c*g+f*k;a[9]=f*c*g-e*k;a[10]=c*c*g+p;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function M(a,b){const c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function J(a,b){const c=Math.sin(b);b=Math.cos(b);
a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function aa(a,b){const c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function da(a,b,c){var e=b[0],f=b[1],h=b[2],k=b[3],p=e+e,g=f+f;const n=h+h;b=e*p;const u=e*g;e*=n;const A=f*g;f*=n;h*=n;p*=k;g*=k;k*=n;a[0]=1-(A+h);a[1]=u+k;a[2]=e-g;a[3]=0;a[4]=u-k;a[5]=1-(b+h);
a[6]=f+p;a[7]=0;a[8]=e+g;a[9]=f-p;a[10]=1-(b+A);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function sa(a,b){const c=Ia,e=-b[0],f=-b[1],h=-b[2],k=b[3],p=b[4],g=b[5],n=b[6],u=b[7],A=e*e+f*f+h*h+k*k;0<A?(c[0]=2*(p*k+u*e+g*h-n*f)/A,c[1]=2*(g*k+u*f+n*e-p*h)/A,c[2]=2*(n*k+u*h+p*f-g*e)/A):(c[0]=2*(p*k+u*e+g*h-n*f),c[1]=2*(g*k+u*f+n*e-p*h),c[2]=2*(n*k+u*h+p*f-g*e));da(a,b,c);return a}function ia(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a}function ba(a,b){const c=b[0],e=b[1],f=b[2],h=b[4],
k=b[5],p=b[6],g=b[8],n=b[9];b=b[10];a[0]=Math.sqrt(c*c+e*e+f*f);a[1]=Math.sqrt(h*h+k*k+p*p);a[2]=Math.sqrt(g*g+n*n+b*b);return a}function ta(a,b){const c=b[0]+b[5]+b[10];let e=0;0<c?(e=2*Math.sqrt(c+1),a[3]=.25*e,a[0]=(b[6]-b[9])/e,a[1]=(b[8]-b[2])/e,a[2]=(b[1]-b[4])/e):b[0]>b[5]&&b[0]>b[10]?(e=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/e,a[0]=.25*e,a[1]=(b[1]+b[4])/e,a[2]=(b[8]+b[2])/e):b[5]>b[10]?(e=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/e,a[0]=(b[1]+b[4])/e,a[1]=.25*e,a[2]=(b[6]+
b[9])/e):(e=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/e,a[0]=(b[8]+b[2])/e,a[1]=(b[6]+b[9])/e,a[2]=.25*e);return a}function na(a,b,c,e){var f=b[0],h=b[1],k=b[2],p=b[3],g=f+f,n=h+h,u=k+k;b=f*g;const A=f*n;f*=u;const I=h*n;h*=u;k*=u;g*=p;n*=p;p*=u;u=e[0];const H=e[1];e=e[2];a[0]=(1-(I+k))*u;a[1]=(A+p)*u;a[2]=(f-n)*u;a[3]=0;a[4]=(A-p)*H;a[5]=(1-(b+k))*H;a[6]=(h+g)*H;a[7]=0;a[8]=(f+n)*e;a[9]=(h-g)*e;a[10]=(1-(b+I))*e;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function pa(a,b,c,e,
f){var h=b[0],k=b[1],p=b[2],g=b[3],n=h+h,u=k+k,A=p+p;b=h*n;var I=h*u,H=h*A;h=k*u;k*=A;var V=p*A;p=g*n;u*=g;const S=g*A;var Q=e[0],ha=e[1];A=e[2];e=f[0];g=f[1];f=f[2];n=(1-(h+V))*Q;const W=(I+S)*Q;Q*=H-u;I=(I-S)*ha;V=(1-(b+V))*ha;ha*=k+p;H=(H+u)*A;k=(k-p)*A;b=(1-(b+h))*A;a[0]=n;a[1]=W;a[2]=Q;a[3]=0;a[4]=I;a[5]=V;a[6]=ha;a[7]=0;a[8]=H;a[9]=k;a[10]=b;a[11]=0;a[12]=c[0]+e-(n*e+I*g+H*f);a[13]=c[1]+g-(W*e+V*g+k*f);a[14]=c[2]+f-(Q*e+ha*g+b*f);a[15]=1;return a}function oa(a,b){var c=b[0],e=b[1],f=b[2];b=
b[3];var h=c+c,k=e+e;const p=f+f;c*=h;const g=e*h;e*=k;const n=f*h,u=f*k;f*=p;h*=b;k*=b;b*=p;a[0]=1-e-f;a[1]=g+b;a[2]=n-k;a[3]=0;a[4]=g-b;a[5]=1-c-f;a[6]=u+h;a[7]=0;a[8]=n+k;a[9]=u-h;a[10]=1-c-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ja(a,b,c,e,f,h,k){const p=1/(c-b),g=1/(f-e),n=1/(h-k);a[0]=2*h*p;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*h*g;a[6]=0;a[7]=0;a[8]=(c+b)*p;a[9]=(f+e)*g;a[10]=(k+h)*n;a[11]=-1;a[12]=0;a[13]=0;a[14]=k*h*2*n;a[15]=0;return a}function ka(a,b,c,e,f){b=1/Math.tan(b/
2);let h=void 0;a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=f&&Infinity!==f?(h=1/(e-f),a[10]=(f+e)*h,a[14]=2*f*e*h):(a[10]=-1,a[14]=-2*e);return a}function T(a,b,c,e){const f=Math.tan(b.upDegrees*Math.PI/180),h=Math.tan(b.downDegrees*Math.PI/180),k=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);const p=2/(k+b),g=2/(f+h);a[0]=p;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=-((k-b)*p*.5);a[9]=(f-h)*
g*.5;a[10]=e/(c-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*c/(c-e);a[15]=0;return a}function la(a,b,c,e,f,h,k){const p=1/(b-c),g=1/(e-f),n=1/(h-k);a[0]=-2*p;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*n;a[11]=0;a[12]=(b+c)*p;a[13]=(f+e)*g;a[14]=(k+h)*n;a[15]=1;return a}function ra(a,b,c,e){const f=b[0],h=b[1];b=b[2];let k=f-c[0],p=h-c[1];c=b-c[2];var g=v.getEpsilon();if(Math.abs(k)<g&&Math.abs(p)<g&&Math.abs(c)<g)C(a);else{var n=1/Math.sqrt(k*k+p*p+c*c);k*=n;p*=n;c*=n;n=e[0];
var u=e[1];g=e[2];e=u*c-g*p;g=g*k-n*c;u=n*p-u*k;(n=Math.sqrt(e*e+g*g+u*u))?(n=1/n,e*=n,g*=n,u*=n):u=g=e=0;var A=p*u-c*g,I=c*e-k*u,H=k*g-p*e;(n=Math.sqrt(A*A+I*I+H*H))?(n=1/n,A*=n,I*=n,H*=n):H=I=A=0;a[0]=e;a[1]=A;a[2]=k;a[3]=0;a[4]=g;a[5]=I;a[6]=p;a[7]=0;a[8]=u;a[9]=H;a[10]=c;a[11]=0;a[12]=-(e*f+g*h+u*b);a[13]=-(A*f+I*h+H*b);a[14]=-(k*f+p*h+c*b);a[15]=1}}function qa(a,b,c,e){const f=b[0],h=b[1];b=b[2];var k=e[0];const p=e[1];var g=e[2];e=f-c[0];let n=h-c[1];c=b-c[2];let u=e*e+n*n+c*c;0<u&&(u=1/Math.sqrt(u),
e*=u,n*=u,c*=u);let A=p*c-g*n;g=g*e-k*c;k=k*n-p*e;u=A*A+g*g+k*k;0<u&&(u=1/Math.sqrt(u),A*=u,g*=u,k*=u);a[0]=A;a[1]=g;a[2]=k;a[3]=0;a[4]=n*k-c*g;a[5]=c*A-e*k;a[6]=e*g-n*A;a[7]=0;a[8]=e;a[9]=n;a[10]=c;a[11]=0;a[12]=f;a[13]=h;a[14]=b;a[15]=1;return a}function Ca(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function Da(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**
2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function Fa(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a}function q(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=
b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}function y(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a}function L(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;a[4]=b[4]+
c[4]*e;a[5]=b[5]+c[5]*e;a[6]=b[6]+c[6]*e;a[7]=b[7]+c[7]*e;a[8]=b[8]+c[8]*e;a[9]=b[9]+c[9]*e;a[10]=b[10]+c[10]*e;a[11]=b[11]+c[11]*e;a[12]=b[12]+c[12]*e;a[13]=b[13]+c[13]*e;a[14]=b[14]+c[14]*e;a[15]=b[15]+c[15]*e;return a}function ca(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function ea(a,b){if(a===b)return!0;const c=
a[0],e=a[1],f=a[2],h=a[3],k=a[4],p=a[5],g=a[6],n=a[7],u=a[8],A=a[9],I=a[10],H=a[11],V=a[12],S=a[13],Q=a[14];a=a[15];const ha=b[0],W=b[1],X=b[2],Y=b[3],Z=b[4],va=b[5],wa=b[6],xa=b[7],ya=b[8],za=b[9],Aa=b[10],Ba=b[11],ma=b[12],Ga=b[13],Ha=b[14];b=b[15];const ua=v.getEpsilon();return Math.abs(c-ha)<=ua*Math.max(1,Math.abs(c),Math.abs(ha))&&Math.abs(e-W)<=ua*Math.max(1,Math.abs(e),Math.abs(W))&&Math.abs(f-X)<=ua*Math.max(1,Math.abs(f),Math.abs(X))&&Math.abs(h-Y)<=ua*Math.max(1,Math.abs(h),Math.abs(Y))&&
Math.abs(k-Z)<=ua*Math.max(1,Math.abs(k),Math.abs(Z))&&Math.abs(p-va)<=ua*Math.max(1,Math.abs(p),Math.abs(va))&&Math.abs(g-wa)<=ua*Math.max(1,Math.abs(g),Math.abs(wa))&&Math.abs(n-xa)<=ua*Math.max(1,Math.abs(n),Math.abs(xa))&&Math.abs(u-ya)<=ua*Math.max(1,Math.abs(u),Math.abs(ya))&&Math.abs(A-za)<=ua*Math.max(1,Math.abs(A),Math.abs(za))&&Math.abs(I-Aa)<=ua*Math.max(1,Math.abs(I),Math.abs(Aa))&&Math.abs(H-Ba)<=ua*Math.max(1,Math.abs(H),Math.abs(Ba))&&Math.abs(V-ma)<=ua*Math.max(1,Math.abs(V),Math.abs(ma))&&
Math.abs(S-Ga)<=ua*Math.max(1,Math.abs(S),Math.abs(Ga))&&Math.abs(Q-Ha)<=ua*Math.max(1,Math.abs(Q),Math.abs(Ha))&&Math.abs(a-b)<=ua*Math.max(1,Math.abs(a),Math.abs(b))}function fa(a){const b=v.getEpsilon(),c=a[0],e=a[1],f=a[2],h=a[4],k=a[5],p=a[6],g=a[8],n=a[9];a=a[10];return Math.abs(1-(c*c+h*h+g*g))<=b&&Math.abs(1-(e*e+k*k+n*n))<=b&&Math.abs(1-(f*f+p*p+a*a))<=b}function Ea(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[8]&&0===a[9]&&1===a[10]}const Ia=l.create();l=Object.freeze(Object.defineProperty({__proto__:null,
add:Fa,adjoint:K,copy:z,determinant:U,equals:ea,exactEquals:ca,frob:Da,fromQuat:oa,fromQuat2:sa,fromRotation:t,fromRotationTranslation:da,fromRotationTranslationScale:na,fromRotationTranslationScaleOrigin:pa,fromScaling:P,fromTranslation:G,fromXRotation:M,fromYRotation:J,fromZRotation:aa,frustum:ja,getRotation:ta,getScaling:ba,getTranslation:ia,hasIdentityRotation:Ea,identity:C,invert:N,invertOrIdentity:m,isOrthoNormal:fa,lookAt:ra,mul:E,multiply:E,multiplyScalar:y,multiplyScalarAndAdd:L,ortho:la,
perspective:ka,perspectiveFromFieldOfView:T,rotate:x,rotateX:D,rotateY:O,rotateZ:R,scale:w,set:F,str:Ca,sub:q,subtract:q,targetTo:qa,translate:r,transpose:B},Symbol.toStringTag,{value:"Module"}));d.add=Fa;d.adjoint=K;d.copy=z;d.determinant=U;d.equals=ea;d.exactEquals=ca;d.frob=Da;d.fromQuat=oa;d.fromQuat2=sa;d.fromRotation=t;d.fromRotationTranslation=da;d.fromRotationTranslationScale=na;d.fromRotationTranslationScaleOrigin=pa;d.fromScaling=P;d.fromTranslation=G;d.fromXRotation=M;d.fromYRotation=J;
d.fromZRotation=aa;d.frustum=ja;d.getRotation=ta;d.getScaling=ba;d.getTranslation=ia;d.hasIdentityRotation=Ea;d.identity=C;d.invert=N;d.invertOrIdentity=m;d.isOrthoNormal=fa;d.lookAt=ra;d.mat4=l;d.mul=E;d.multiply=E;d.multiplyScalar=y;d.multiplyScalarAndAdd=L;d.ortho=la;d.perspective=ka;d.perspectiveFromFieldOfView=T;d.rotate=x;d.rotateX=D;d.rotateY=O;d.rotateZ=R;d.scale=w;d.set=F;d.str=Ca;d.sub=q;d.subtract=q;d.targetTo=qa;d.translate=r;d.transpose=B})},"esri/chunks/vec4f64":function(){define(["exports"],
function(d){function l(){return[0,0,0,0]}function v(P){return[P[0],P[1],P[2],P[3]]}function z(P,t,M,J){return[P,t,M,J]}function F(P){const t=l(),M=Math.min(4,P.length);for(let J=0;J<M;++J)t[J]=P[J];return t}function C(P,t){return new Float64Array(P,t,4)}function B(){return l()}function m(){return[1,1,1,1]}function N(){return[1,0,0,0]}function K(){return[0,1,0,0]}function U(){return[0,0,1,0]}function E(){return[0,0,0,1]}const r=l(),w=m(),x=N(),D=K(),O=U(),R=E(),G=Object.freeze(Object.defineProperty({__proto__:null,
ONES:w,UNIT_W:R,UNIT_X:x,UNIT_Y:D,UNIT_Z:O,ZEROS:r,clone:v,create:l,createView:C,fromArray:F,fromValues:z,ones:m,unitW:E,unitX:N,unitY:K,unitZ:U,zeros:B},Symbol.toStringTag,{value:"Module"}));d.ONES=w;d.UNIT_W=R;d.UNIT_X=x;d.UNIT_Y=D;d.UNIT_Z=O;d.ZEROS=r;d.clone=v;d.create=l;d.createView=C;d.fromArray=F;d.fromValues=z;d.ones=m;d.unitW=E;d.unitX=N;d.unitY=K;d.unitZ=U;d.vec4f64=G;d.zeros=B})},"esri/geometry/support/Axis":function(){define(["exports"],function(d){d.Axis=void 0;var l=d.Axis||(d.Axis=
{});l[l.X=0]="X";l[l.Y=1]="Y";l[l.Z=2]="Z";Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(d,l,v,z,F,C){function B(E){return E?m(F.clone(E.origin),F.clone(E.direction)):m(F.create(),F.create())}function m(E,r){return{origin:E,direction:r}}function N(E,r,w=B()){z.copy(w.origin,E);z.copy(w.direction,r);return w}
function K(E,r){E=z.cross(C.sv3d.get(),z.normalize(C.sv3d.get(),E.direction),z.subtract(C.sv3d.get(),r,E.origin));return z.dot(E,E)}const U=new v.ObjectStack(()=>B());d.closestPoint=function(E,r,w){r=z.dot(E.direction,z.subtract(w,r,E.origin));z.add(w,E.origin,z.scale(w,E.direction,r));return w};d.copy=function(E,r=B()){return N(E.origin,E.direction,r)};d.create=B;d.distance=function(E,r){return Math.sqrt(K(E,r))};d.distance2=K;d.equals=function(E,r){return l.equals(E.origin,r.origin)&&l.equals(E.direction,
r.direction)};d.fromPoints=function(E,r,w=B()){z.copy(w.origin,E);z.subtract(w.direction,r,E);return w};d.fromValues=N;d.wrap=function(E,r){const w=U.get();w.origin=E;w.direction=r;return w};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/ObjectStack":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./nextTick"],function(d,l,v){let z=function(){function F(B){this._allocator=B;this._items=[];this._itemsPtr=0;this._grow()}var C=F.prototype;C.get=function(){0===
this._itemsPtr&&v.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]};C._reset=function(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0};C._grow=function(){for(let B=0;B<Math.max(8,Math.min(this._items.length,1024));B++)this._items.push(this._allocator())};return l._createClass(F)}();d.ObjectStack=z;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(d,l){const v=l.VectorStack.createVec2f64(),z=l.VectorStack.createVec3f64(),F=l.VectorStack.createVec4f64(),C=l.VectorStack.createMat3f64(),B=l.VectorStack.createMat4f64();l=l.VectorStack.createQuatf64();d.sm3d=C;d.sm4d=B;d.sq4d=l;d.sv2d=v;d.sv3d=z;d.sv4d=F;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./ByteSizeUnit ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),
function(d,l,v,z,F,C,B,m,N,K){let U=function(){function r(x,D,O){this._itemByteSize=x;this._itemCreate=D;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(O/this._itemByteSize)}var w=r.prototype;w.get=function(){0===this._itemsPtr&&z.nextTick(()=>this._reset());const x=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=x;){const D=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let O=0;O<this._itemsPerBuffer;++O)this._items.push(this._itemCreate(D,
O*this._itemByteSize));this._buffers.push(D)}return this._items[this._itemsPtr++]};w._reset=function(){const x=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>x;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0};r.createVec2f64=function(x=E){return new r(16,m.createView,x)};r.createVec3f64=function(x=E){return new r(24,N.createView,x)};r.createVec4f64=function(x=E){return new r(32,K.createView,x)};r.createMat3f64=function(x=
E){return new r(72,F.createView,x)};r.createMat4f64=function(x=E){return new r(128,C.createView,x)};r.createQuatf64=function(x=E){return new r(32,B.createView,x)};l._createClass(r,[{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}]);return r}();const E=4*v.ByteSizeUnit.KILOBYTES;d.VectorStack=U;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(d){d.ByteSizeUnit=void 0;
var l=d.ByteSizeUnit||(d.ByteSizeUnit={});l[l.KILOBYTES=1024]="KILOBYTES";l[l.MEGABYTES=1048576]="MEGABYTES";l[l.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat3f64":function(){define(["exports"],function(d){function l(){return[1,0,0,0,1,0,0,0,1]}function v(B){return[B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],B[8]]}function z(B,m,N,K,U,E,r,w,x){return[B,m,N,K,U,E,r,w,x]}function F(B,m){return new Float64Array(B,m,9)}const C=Object.freeze(Object.defineProperty({__proto__:null,
clone:v,create:l,createView:F,fromValues:z},Symbol.toStringTag,{value:"Module"}));d.clone=v;d.create=l;d.createView=F;d.fromValues=z;d.mat3f64=C})},"esri/chunks/mat4f64":function(){define(["exports"],function(d){function l(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function v(m){return[m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]]}function z(m,N,K,U,E,r,w,x,D,O,R,G,P,t,M,J){return[m,N,K,U,E,r,w,x,D,O,R,G,P,t,M,J]}function F(m,N){return new Float64Array(m,N,
16)}const C=l(),B=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:C,clone:v,create:l,createView:F,fromValues:z},Symbol.toStringTag,{value:"Module"}));d.IDENTITY=C;d.clone=v;d.create=l;d.createView=F;d.fromValues=z;d.mat4f64=B})},"esri/chunks/quatf64":function(){define(["exports"],function(d){function l(){return[0,0,0,1]}function v(m){return[m[0],m[1],m[2],m[3]]}function z(m,N,K,U){return[m,N,K,U]}function F(m,N){return new Float64Array(m,N,4)}const C=l(),B=Object.freeze(Object.defineProperty({__proto__:null,
IDENTITY:C,clone:v,create:l,createView:F,fromValues:z},Symbol.toStringTag,{value:"Module"}));d.IDENTITY=C;d.clone=v;d.create=l;d.createView=F;d.fromValues=z;d.quatf64=B})},"esri/chunks/vec2f64":function(){define(["exports"],function(d){function l(){return[0,0]}function v(D){return[D[0],D[1]]}function z(D,O){return[D,O]}function F(D){const O=[0,0],R=Math.min(2,D.length);for(let G=0;G<R;++G)O[G]=D[G];return O}function C(D,O){return new Float64Array(D,O,2)}function B(){return[0,0]}function m(){return[1,
1]}function N(){return[1,0]}function K(){return[0,1]}const U=[0,0],E=[1,1],r=[1,0],w=[0,1],x=Object.freeze(Object.defineProperty({__proto__:null,ONES:E,UNIT_X:r,UNIT_Y:w,ZEROS:U,clone:v,create:l,createView:C,fromArray:F,fromValues:z,ones:m,unitX:N,unitY:K,zeros:B},Symbol.toStringTag,{value:"Module"}));d.ONES=E;d.UNIT_X=r;d.UNIT_Y=w;d.ZEROS=U;d.clone=v;d.create=l;d.createView=C;d.fromArray=F;d.fromValues=z;d.ones=m;d.unitX=N;d.unitY=K;d.vec2f64=x;d.zeros=B})},"esri/geometry/support/vector":function(){define(["exports",
"../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(d,l,v,z){const F=z.create(),C=z.create();d.angle=function(B,m){B=v.dot(B,m)/(v.length(B)*v.length(m));return-l.acosClamped(B)};d.angleAroundAxis=function(B,m,N){v.normalize(F,B);v.normalize(C,m);B=v.dot(F,C);B=l.acosClamped(B);m=v.cross(F,F,C);return 0>v.dot(m,N)?2*Math.PI-B:B};d.projectPoint=function(B,m,N){m=v.dot(B,m)/v.dot(B,B);return v.scale(N,B,m)};d.projectPointSignedLength=function(B,m){return v.dot(B,m)/v.length(B)};
Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require exports ../../../geometry/SpatialReference ../../../geometry/support/DoubleArray ../../../geometry/support/MeshGeoreferencedRelativeVertexSpace ../../../geometry/support/MeshGeoreferencedVertexSpace ../../../geometry/support/MeshLocalVertexSpace ../../../chunks/vec32 ../../../libs/i3s/enums ../../../libs/i3s/I3SModule ./i3s/I3SNode".split(" "),function(d,l,v,z,F,C,B,m,N,K,U){function E(t){const M=t.modifications,J=G._malloc(8*M.length),aa=new Float64Array(G.HEAPU8.buffer,J,M.length);
for(let da=0;da<M.length;++da)aa[da]=M[da];G.setModifications(t.context,J,M.length,t.isGeodetic);G._free(J)}function r(t,M){if(!G)return null;const {context:J,localOrigin:aa,globalTrafo:da,mbs:sa,obb:ia,elevationOffset:ba,geometryBuffer:ta,geometryDescriptor:na,indexToVertexProjector:pa,vertexToRenderProjector:oa}=t;var ja=G._malloc(ta.byteLength),ka=G._malloc(33*Float64Array.BYTES_PER_ELEMENT),T=new Uint8Array(G.HEAPU8.buffer,ja,ta.byteLength);T.set(new Uint8Array(ta));var la=new Float64Array(G.HEAPU8.buffer,
ka,33);D(la,aa);var ra=la.byteOffset+3*la.BYTES_PER_ELEMENT,qa=new Float64Array(la.buffer,ra);D(qa,da);ra+=16*la.BYTES_PER_ELEMENT;qa=new Float64Array(la.buffer,ra);D(qa,sa);ra+=4*la.BYTES_PER_ELEMENT;null!=ia&&(qa=new Float64Array(la.buffer,ra),D(qa,ia.center),ra+=3*la.BYTES_PER_ELEMENT,qa=new Float64Array(la.buffer,ra),D(qa,ia.halfSize),ra+=3*la.BYTES_PER_ELEMENT,qa=new Float64Array(la.buffer,ra),D(qa,ia.quaternion));la={isDraco:!1,isLegacy:!1,color:t.layouts.some(q=>q.some(y=>"color"===y.name)),
normal:t.needNormals&&t.layouts.some(q=>q.some(y=>"normalCompressed"===y.name)),uv0:t.layouts.some(q=>q.some(y=>"uv0"===y.name)),uvRegion:t.layouts.some(q=>q.some(y=>"uvRegion"===y.name)),featureIndex:na.featureIndex};T=G.process(J,!!t.obb,ja,T.byteLength,na,la,ka,ba,pa,oa,t.normalReferenceFrame);G._free(ka);G._free(ja);if(0<T.error.length)throw Error(`i3s.wasm: ${T.error}`);if(T.discarded)return null;ja=0<T.componentOffsets.length?T.componentOffsets.slice():null;ka=0<T.featureIds.length?T.featureIds.slice():
null;la=0<T.anchorIds.length?Array.from(T.anchorIds):null;ra=0<T.anchors.length?Array.from(T.anchors):null;qa=T.interleavedVertedData.slice().buffer;const Ca=T.indicesType===N.IndexType.Int16?(new Uint16Array(T.indices.buffer,T.indices.byteOffset,T.indices.byteLength/2)).slice():(new Uint32Array(T.indices.buffer,T.indices.byteOffset,T.indices.byteLength/4)).slice(),Da=T.positions.slice(),Fa=T.positionIndicesType===N.IndexType.Int16?(new Uint16Array(T.positionIndices.buffer,T.positionIndices.byteOffset,
T.positionIndices.byteLength/2)).slice():(new Uint32Array(T.positionIndices.buffer,T.positionIndices.byteOffset,T.positionIndices.byteLength/4)).slice();t={layout:t.layouts[0],interleavedVertexData:qa,indices:Ca,hasColors:T.hasColors,hasModifications:T.hasModifications,positionData:{data:Da,indices:Fa}};ka&&M.push(ka.buffer);ja&&M.push(ja.buffer);M.push(qa);M.push(Ca.buffer);M.push(Da.buffer);M.push(Fa.buffer);return{componentOffsets:ja,featureIds:ka,anchorIds:la,anchors:ra,transformedGeometry:t,
obb:T.obb}}function w(t){const {context:M,buffer:J}=t;t=G._malloc(J.byteLength);const aa=J.byteLength/Float64Array.BYTES_PER_ELEMENT,da=new Float64Array(G.HEAPU8.buffer,t,aa),sa=new Float64Array(J);da.set(sa);G.filterOBBs(M,t,aa);sa.set(da);G._free(t)}function x(t){G&&(G.destroy(t),G=null)}function D(t,M){for(let J=0;J<M.length;++J)t[J]=M[J]}function O(){if(G)return Promise.resolve();R||(R=K.get().then(t=>{G=t;R=null}));return R}let R,G;const P={transform:r,destroy:x};l.destroyContext=function(t){x(t)};
l.dracoDecompressPointCloudData=async function(t){await O();const M=[t.geometryBuffer];var {geometryBuffer:J}=t,aa=J.byteLength;t=G._malloc(aa);aa=new Uint8Array(G.HEAPU8.buffer,t,aa);aa.set(new Uint8Array(J));J=G.dracoDecompressPointCloudData(t,aa.byteLength);G._free(t);if(0<J.error.length)throw Error(`i3s.wasm: ${J.error}`);t=0<J.featureIds?.length?J.featureIds.slice():null;J=J.positions.slice();t&&M.push(t.buffer);M.push(J.buffer);return{result:{positions:J,featureIds:t},transferList:M}};l.filterObbsForModifications=
async function(t){await O();w(t);t={buffer:t.buffer};return{result:t,transferList:[t.buffer]}};l.filterObbsForModificationsSync=w;l.initialize=O;l.interpretObbModificationResults=function(t){return 0===t?U.NodeIMModificationImpact.Unmodified:1===t?U.NodeIMModificationImpact.PotentiallyModified:2===t?U.NodeIMModificationImpact.Culled:U.NodeIMModificationImpact.Unknown};l.process=async function(t){await O();const M=[t.geometryBuffer];return{result:r(t,M),transferList:M}};l.project=async function(t){const {localMatrix:M,
origin:J,positions:aa,vertexSpace:da,local:sa}=t;var ia=v.fromJSON(t.inSpatialReference);t=v.fromJSON(t.outSpatialReference);var ba={georeferenced:C,georeferencedRelative:F,local:B}[da.type].fromJSON(da);if("georeferenced"===ba.type){const {projectBuffer:oa,initializeProjection:ja}=await new Promise((ka,T)=>d(["../../../geometry/projection"],ka,T));await ja(ia,t);ba=new Float64Array(aa.length);oa(aa,ia,0,ba,t,0,ba.length/3)}else{const {project:oa}=await new Promise((ja,ka)=>d(["../../../geometry/support/meshUtils/georeference"],
ja,ka));ba=z.toFloat64Array(oa({positions:aa,transform:M?{localMatrix:M}:void 0,vertexSpace:ba,inSpatialReference:ia,outSpatialReference:t,local:sa}))}ia=ba.length;const [ta,na,pa]=J;for(t=0;t<ia;t+=3)ba[t]-=ta,ba[t+1]-=na,ba[t+2]-=pa;return{result:{projected:ba,original:aa},transferList:[ba.buffer,aa.buffer]}};l.setLegacySchema=async function(t){await O();G.setLegacySchema(t.context,t.jsonSchema)};l.setModifications=async function(t){await O();E(t)};l.setModificationsSync=E;l.test=P;l.transformNormals=
async function({normalMatrix:t,normals:M}){const J=new Float32Array(M.length);m.transformMat3(J,M,t);m.normalize(J,J);return{result:{transformed:J,original:M},transferList:[J.buffer,M.buffer]}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});