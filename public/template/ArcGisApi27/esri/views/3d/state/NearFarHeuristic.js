// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/mathUtils ../../../core/unitUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/ellipsoidUtils ../../../geometry/Extent ../../ViewingMode ../environment/atmosphereUtils".split(" "),function(q,r,p,w,n,t,u,x,y,z){function v(d,c,b,a){b=2/b;d/c>b?(a.far=d,a.near=a.far/c):(a.near=b,a.far=a.near*c);return a}let A=function(){function d(c,b){this._elevationProvider=c;this._referenceEllipsoid=u.getReferenceEllipsoid(b);
this._unitInMeters=w.getMetersPerUnitForSR(b,this._referenceEllipsoid.metersPerDegree)}d.prototype.compute=function(c,b,a,f,g){g||(g={near:0,far:0});var e=c[2]*this._unitInMeters,k=e;f=e-f;var l=this._elevationProvider?.visibleElevationBounds;l&&(e=0<=f?k-this._unitInMeters*l.min:this._unitInMeters*l.max-k);a=null!=a?a:new x({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0});k=Math.max(a.xmax-a.xmin,a.ymax-a.ymin,4*Math.max(a.xmax-a.xmin,a.ymax-a.ymin));n.subtract(h,b,c);m[0]=0<h[0]?a.xmax:a.xmin;m[1]=
0<h[1]?a.ymax:a.ymin;m[2]=0<h[2]?k/2:-k/2;n.subtract(m,m,c);n.normalize(h,h);c=1.1*n.dot(m,h)*this._unitInMeters;b=Math.sqrt(e*(e+2*this._referenceEllipsoid.radius));a=Math.max(a.xmax-a.xmin,a.ymax-a.ymin);l=1E-4*a*this._unitInMeters;e=p.clamp((e-l)/(.001*a*this._unitInMeters-l),0,1);e=Math.min(p.lerp(b,c,e**3),b)*Math.max(Math.log(Math.abs(f)),1);return v(Math.min(e,Math.max(34064E4,k))/this._unitInMeters,2E4,this._unitInMeters,g)};return r._createClass(d)}(),B=function(){function d(c){this._referenceEllipsoid=
u.getReferenceEllipsoid(c)}d.prototype.compute=function(c,b,a,f,g){g||(g={near:0,far:0});c=n.length(c);b=c-this._referenceEllipsoid.radius;b=Math.max(Math.abs(b-f),Math.abs(b));f=1.2*p.lerp(Math.sqrt(b*(b+2*(this._referenceEllipsoid.radius+Math.min(0,f)))),c+this._referenceEllipsoid.radius,z.computeInnerAltitudeFade(b));c=p.clamp(2E4-(Math.log(b)-7.983)/9.011*19E3,1E3,2E4);return v(f,c,1,g)};return r._createClass(d)}();const m=t.create(),h=t.create();q.createNearFarHeuristic=function(d,c,b){return d===
y.ViewingMode.Global?new B(b):new A(c,b)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})});