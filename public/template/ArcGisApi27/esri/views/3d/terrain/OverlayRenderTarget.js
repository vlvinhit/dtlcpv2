// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/has ../../../core/time ./interfaces ./OverlayFramebufferObject ../webgl-engine/core/shaderLibrary/ShaderOutput".split(" "),function(h,l,n,k,d,p,e){let c=l._createClass(function(g,f,a,b=!0){this.output=f;this.type=a;this.valid=!1;this.lastUsed=k.Milliseconds(Infinity);this.fbo=new p.OverlayFramebufferObject(g,b)}),r=function(){function g(a){this.renderTargets=[new c(a,e.ShaderOutput.Color,d.RenderTargetType.Color),new c(a,e.ShaderOutput.Color,
d.RenderTargetType.ColorNoRasterImage),new c(a,e.ShaderOutput.Highlight,d.RenderTargetType.Highlight,!1),new c(a,e.ShaderOutput.Normal,d.RenderTargetType.Water),new c(a,e.ShaderOutput.Color,d.RenderTargetType.Occluded)];n("enable-feature:objectAndLayerId-rendering")&&this.renderTargets.push(new c(a,e.ShaderOutput.ObjectAndLayerIdColor,d.RenderTargetType.ObjectAndLayerIdColor))}var f=g.prototype;f.getTarget=function(a){return this.renderTargets[a].fbo};f.dispose=function(){for(const a of this.renderTargets)a.fbo.dispose()};
f.disposeRenderTargetMemory=function(){for(const a of this.renderTargets)a.fbo.disposeRenderTargetMemory()};f.validateUsageForTarget=function(a,b,m){return a?(b.lastUsed=m,!1):m-b.lastUsed>q?(b.fbo.disposeRenderTargetMemory(),b.lastUsed=k.Milliseconds(Infinity),!1):Infinity>b.lastUsed};l._createClass(g,[{key:"gpuMemoryUsage",get:function(){return this.renderTargets.reduce((a,b)=>a+b.fbo.gpuMemoryUsage,0)}}]);return g}();const q=k.Milliseconds(1E3);h.OverlayRenderTarget=r;h.RenderTargetDescriptor=
c;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});