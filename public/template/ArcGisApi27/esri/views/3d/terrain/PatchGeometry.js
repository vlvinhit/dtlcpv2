// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec3 ../../../geometry/support/aaBoundingBox ../../../geometry/support/buffer/BufferPool ../support/buffer/InterleavedLayout ./terrainUtils ../webgl-engine/lib/Normals ../webgl-engine/lib/VertexAttribute".split(" "),function(g,n,r,t,u,v,w,p,l){function q(c,d,a,b){c.setValues(d,16384*a,16384*b)}let x=n._createClass(function(){this.vertexAttributes=this.indices=null;this.boundingBox=t.empty();this.numVerticesPerSide=this.indexCount=
0;this.uvRange=[0,0,1,1];this.outerEdges=[null,null,null,null];this.innerEdges=[null,null,null,null]}),B=function(){function c(a,b,e,f,h){this.attributes=a;this.localOrigin=b;this.index0=e;this.stride=f;this.count=h}var d=c.prototype;d.getVertexIndex=function(a){return this.getAttributeIndex(a)};d.getAttributeIndex=function(a){w.internalAssert(0<=a&&a<this.count);return this.index0+this.stride*a};d._getVertexRaw=function(a,b){this.attributes.position.getVec(a,b)};d.getVertexPos=function(a,b){this._getVertexRaw(this.getAttributeIndex(b),
a);r.add(a,a,this.localOrigin)};d.getNormal=function(a,b){const {typedBuffer:e,typedBufferStride:f}=this.attributes.normalCompressed;p.decompressNormal(a,e,this.getAttributeIndex(b),f)};d._setNormal=function(a,b,e,f){const {typedBuffer:h,typedBufferStride:k}=this.attributes.normalCompressed;p.compressNormal(h,a,b,e,f,k)};d._setUV=function(a,b,e){q(this.attributes.uv0,a,b,e)};d.setNormalFromValues=function(a,b,e,f){this._setNormal(this.getAttributeIndex(a),b,e,f)};d.setVertexFromValuesRawPositionUV=
function(a,b,e,f,h,k){a=this.getAttributeIndex(a);this.attributes.position.setValues(a,b,e,f);this._setUV(a,h,k)};d.setVertexFromValuesRawPositionUVNormal=function(a,b,e,f,h,k,y,z,A){a=this.getAttributeIndex(a);this.attributes.position.setValues(a,b,e,f);this._setUV(a,h,k);this._setNormal(a,y,z,A)};return n._createClass(c)}();const C=v.newLayout().vec3f(l.VertexAttribute.POSITION).vec2i16(l.VertexAttribute.UV0).vec2i16(l.VertexAttribute.NORMALCOMPRESSED,{glNormalized:!0}),m=new u.BufferPool(c=>C.createBuffer(c),
c=>c.count);g.EdgeDescriptor=B;g.PatchGeometry=x;g.acquireTerrainAttributes=function(c){return m.acquire(c)};g.clearCaches=function(){m.clear()};g.encodeUVInBuffer=q;g.minMaxBoundingBox=function(c,d,a,b){c<b[0]?b[0]=c:c>b[3]&&(b[3]=c);d<b[1]?b[1]=d:d>b[4]&&(b[4]=d);a<b[2]?b[2]=a:a>b[5]&&(b[5]=a)};g.releaseGeometry=function(c){m.release(c.vertexAttributes);c.vertexAttributes=null;c.indices=null};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});