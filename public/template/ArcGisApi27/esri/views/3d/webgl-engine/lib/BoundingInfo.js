// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/PooledArray ../../../../chunks/vec3 ../../../../chunks/vec3f64 ./Util".split(" "),function(x,A,B,u,q,r){let C=function(){function t(b,c,h,d){this.primitiveIndices=b;this._numIndexPerPrimitive=c;this.indices=h;this.position=d;this._children=void 0;r.assert(1<=b.length);r.assert(0===h.length%this._numIndexPerPrimitive);r.assert(h.length>=b.length*this._numIndexPerPrimitive);r.assert(3===d.size||4===d.size);const {data:a,size:k}=
d;var l=b.length;c=k*h[this._numIndexPerPrimitive*b[0]];m.clear();m.push(c);d=q.fromValues(a[c],a[c+1],a[c+2]);var f=q.clone(d);for(var e=0;e<l;++e){var n=this._numIndexPerPrimitive*b[e];for(let p=0;p<this._numIndexPerPrimitive;++p){c=k*h[n+p];m.push(c);let g=a[c];d[0]=Math.min(g,d[0]);f[0]=Math.max(g,f[0]);g=a[c+1];d[1]=Math.min(g,d[1]);f[1]=Math.max(g,f[1]);g=a[c+2];d[2]=Math.min(g,d[2]);f[2]=Math.max(g,f[2])}}this.bbMin=d;this.bbMax=f;b=u.lerp(q.create(),this.bbMin,this.bbMax,.5);this.radius=.5*
Math.max(Math.max(f[0]-d[0],f[1]-d[1]),f[2]-d[2]);h=this.radius*this.radius;for(d=0;d<m.length;++d)c=m.at(d),f=a[c]-b[0],l=a[c+1]-b[1],c=a[c+2]-b[2],e=f*f+l*l+c*c,e<=h||(e=Math.sqrt(e),n=.5*(e-this.radius),this.radius+=n,h=this.radius*this.radius,e=n/e,b[0]+=f*e,b[1]+=l*e,b[2]+=c*e);this.center=b;m.clear()}t.prototype.getChildren=function(){if(this._children||1>=u.squaredDistance(this.bbMin,this.bbMax))return this._children;var b=u.lerp(q.create(),this.bbMin,this.bbMax,.5),c=this.primitiveIndices.length;
const h=new Uint8Array(c),d=Array(8);for(var a=0;8>a;++a)d[a]=0;const {data:k,size:l}=this.position;for(a=0;a<c;++a){var f=0;const n=this._numIndexPerPrimitive*this.primitiveIndices[a];var e=l*this.indices[n];let p=k[e],g=k[e+1],v=k[e+2];for(let w=1;w<this._numIndexPerPrimitive;++w){e=l*this.indices[n+w];const y=k[e],z=k[e+1];e=k[e+2];y<p&&(p=y);z<g&&(g=z);e<v&&(v=e)}p<b[0]&&(f|=1);g<b[1]&&(f|=2);v<b[2]&&(f|=4);h[a]=f;++d[f]}b=0;for(a=0;8>a;++a)0<d[a]&&++b;if(!(2>b)){b=Array(8);for(a=0;8>a;++a)b[a]=
0<d[a]?new Uint32Array(d[a]):void 0;for(a=0;8>a;++a)d[a]=0;for(a=0;a<c;++a)f=h[a],b[f][d[f]++]=this.primitiveIndices[a];this._children=[];for(c=0;8>c;++c)void 0!==b[c]&&this._children.push(new t(b[c],this._numIndexPerPrimitive,this.indices,this.position));return this._children}};t.prune=function(){m.prune()};return A._createClass(t)}();const m=new B({deallocator:null});x.BoundingInfo=C;Object.defineProperty(x,Symbol.toStringTag,{value:"Module"})});