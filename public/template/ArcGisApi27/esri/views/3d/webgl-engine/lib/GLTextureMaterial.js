// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/promiseUtils ../core/shaderModules/interfaces ./basicInterfaces ./GLMaterial".split(" "),function(l,k,d,q,r,n,m){m=function(h){function e(b){var a=h.call(this,b)||this;a._numLoading=0;a._disposed=!1;a._textureRepository=b.textureRep;a._textureId=b.textureId;a._acquire(b.textureId,c=>a._texture=c);a._acquire(b.normalTextureId,c=>a._textureNormal=c);a._acquire(b.emissiveTextureId,c=>a._textureEmissive=
c);a._acquire(b.occlusionTextureId,c=>a._textureOcclusion=c);a._acquire(b.metallicRoughnessTextureId,c=>a._textureMetallicRoughness=c);return a}k._inherits(e,h);var f=e.prototype;f.dispose=function(){this._texture=d.releaseMaybe(this._texture);this._textureNormal=d.releaseMaybe(this._textureNormal);this._textureEmissive=d.releaseMaybe(this._textureEmissive);this._textureOcclusion=d.releaseMaybe(this._textureOcclusion);this._textureMetallicRoughness=d.releaseMaybe(this._textureMetallicRoughness);this._disposed=
!0};f.ensureResources=function(b){return 0===this._numLoading?n.ResourceState.LOADED:n.ResourceState.LOADING};f.updateTexture=function(b){if(null==this._texture||b!==this._texture.id)this._texture=d.releaseMaybe(this._texture),this._textureId=b,this._acquire(this._textureId,a=>this._texture=a)};f._acquire=function(b,a){null==b?a(null):(b=this._textureRepository.acquire(b),q.isPromiseLike(b)?(++this._numLoading,b.then(c=>{this._disposed?(d.releaseMaybe(c),a(null)):a(c)}).finally(()=>--this._numLoading)):
a(b))};k._createClass(e,[{key:"textureBindParameters",get:function(){return new p(null!=this._texture?this._texture.glTexture:null,null!=this._textureNormal?this._textureNormal.glTexture:null,null!=this._textureEmissive?this._textureEmissive.glTexture:null,null!=this._textureOcclusion?this._textureOcclusion.glTexture:null,null!=this._textureMetallicRoughness?this._textureMetallicRoughness.glTexture:null)}}]);return e}(m);let p=function(h){function e(f=null,b=null,a=null,c=null,t=null){var g=h.call(this)||
this;g.texture=f;g.textureNormal=b;g.textureEmissive=a;g.textureOcclusion=c;g.textureMetallicRoughness=t;return g}k._inherits(e,h);return k._createClass(e)}(r.NoParameters);l.GLTextureMaterial=m;l.GLTextureMaterialBindParameters=p;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});