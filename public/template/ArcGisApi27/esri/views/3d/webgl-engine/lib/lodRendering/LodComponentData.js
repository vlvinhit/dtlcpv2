// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../support/buffer/glUtil ../DefaultVertexAttributeLocations ../GLMaterials ../Intersector ../IntersectorInterfaces ../VertexArrayObject ./Intersector ../../../../webgl/BufferObject ../../../../webgl/enums".split(" "),function(q,t,u,v,w,x,d,y,z,A,B){let F=function(){function m(a,b){const k=a.renderContext.rctx;b=b.geometry;this._materialRepository=a.materialRepository;b.material.setParameters({instancedDoublePrecision:!0});a=b.material.createBufferWriter();
const e=a.vertexBufferLayout,l=a.elementCount(b),f=e.createBuffer(l);a.write(null,null,b,f,0);this.geometry=b;this.material=b.material;this.glMaterials=new w.GLMaterials(b.material,this._materialRepository);this.vertexBufferLayout=e;this.vbo=A.BufferObject.createVertex(k,B.Usage.STATIC_DRAW,f.buffer);this.vao=new y.VertexArrayObject(k,v.Default3D,{geometry:u.glLayout(e)},{geometry:this.vbo});this.vertexCount=l}var r=m.prototype;r.destroy=function(){this.glMaterials.destroy();this.vbo.dispose();this.vao.dispose()};
r.intersect=function(a,b,k,e,l,f,C,D){const E=this.geometry.id;this.material.intersect(this.geometry,a.transform.transform,a,k,e,(c,n,g,p,h)=>{0<=c&&(null==b||b(a.rayBegin,a.rayEnd,c))&&(g=new z.LodTarget(f.layerUid,f.graphicUid(l),E,g,C,D),(null==a.results.min.drapedLayerOrder||h>=a.results.min.drapedLayerOrder)&&(null==a.results.min.dist||c<a.results.min.dist)&&a.results.min.set(d.IntersectorType.LOD,g,c,n,a.transform.transform,h),a.options.store!==d.StoreResults.MIN&&(null==a.results.max.drapedLayerOrder||
h>=a.results.max.drapedLayerOrder)&&(null==a.results.max.dist||c>a.results.max.dist)&&a.results.max.set(d.IntersectorType.LOD,g,c,n,a.transform.transform,h),a.options.store===d.StoreResults.ALL&&(p=x.newIntersectorResult(a.results.min.ray),p.set(d.IntersectorType.LOD,g,c,n,a.transform.transform,h),a.results.all.push(p)))})};t._createClass(m,[{key:"boundingInfo",get:function(){return this.geometry.boundingInfo}},{key:"triangleCount",get:function(){return this.vertexCount/3}}]);return m}();q.LodComponentData=
F;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})});