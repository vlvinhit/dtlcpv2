// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../environment/ChapmanAtmosphereTechniqueConfiguration ./glUtil3D ../../../../chunks/AtmosphereCompositing.glsl ../shaders/AtmosphereCompositingTechnique ../../../../chunks/Compositing.glsl ../shaders/CompositingTechnique ../shaders/CompositingTechniqueConfiguration ../../../../chunks/HUDCompositing.glsl ../shaders/HUDCompositingTechnique ../../../../chunks/OITCompositing.glsl ../shaders/OITCompositingTechnique ../../../../chunks/OverlayCompositing.glsl ../shaders/OverlayCompositingTechnique ../../../webgl/enums ../../../webgl/Util".split(" "),
function(n,p,q,r,t,u,v,w,l,x,y,z,A,B,C,f,g){return function(){function m(b,a){this._rctx=b;this._techniqueRepository=a;this._configuration=new l.CompositingTechniqueConfiguration;this._atmosphereConfiguration=new q.ChapmanAtmosphereTechniqueConfiguration;this._passParameters=new v.CompositingPassParameters;this._atmosphereParameters=new t.AtmosphereCompositingPassParameters;this._oitParameters=new z.OITCompositingPassParameters;this._hudParameters=new x.HUDCompositingPassParameters;this._overlayParameters=
new B.OverlayCompositingPassParameters}var e=m.prototype;e.destroy=function(){this._vao=p.disposeMaybe(this._vao)};e.compositeOIT=function(b,a,c,d){this._oitParameters.colorTexture=a;this._oitParameters.alphaTexture=c;this._oitParameters.frontFaceTexture=d;a=this._rctx;c=this._techniqueRepository.acquire(A.OITCompositingTechnique);a.bindTechnique(c,this._oitParameters,b);b=this._ensureVAO();a.bindVAO(b);a.drawArrays(f.PrimitiveType.TRIANGLE_STRIP,0,g.vertexCount(b,"geometry"));c.release()};e.compositeHUD=
function(b,a){this._hudParameters.texture=a;a=this._rctx;const c=this._techniqueRepository.acquire(y.HUDCompositingTechnique);a.bindTechnique(c,this._hudParameters,b);b=this._ensureVAO();a.bindVAO(b);a.drawArrays(f.PrimitiveType.TRIANGLE_STRIP,0,g.vertexCount(b,"geometry"));c.release()};e.compositeOverlay=function(b,a,c,d){this._overlayParameters.texture=a;this._overlayParameters.opacity=c;this._overlayParameters.overlayIndex=d;a=this._rctx;c=this._techniqueRepository.acquire(C.OverlayCompositingTechnique);
a.bindTechnique(c,this._overlayParameters,b);b=this._ensureVAO();a.bindVAO(b);a.drawArrays(f.PrimitiveType.TRIANGLE_STRIP,0,g.vertexCount(b,"geometry"));c.release()};e.compositeAtmosphere=function(b,a,c,d,h){const k=this._rctx;this._atmosphereParameters.texture=a;this._atmosphereParameters.depthTexture=c;this._atmosphereParameters.scale=d;this._atmosphereConfiguration.haze=h;a=this._techniqueRepository.acquire(u.AtmosphereCompositingTechnique,this._atmosphereConfiguration);k.bindTechnique(a,this._atmosphereParameters,
b);b=this._ensureVAO();k.bindVAO(b);k.drawArrays(f.PrimitiveType.TRIANGLE_STRIP,0,g.vertexCount(b,"geometry"));a.release()};e.composite=function(b,a,c=l.AlphaMode.None,d=1){const h=this._rctx;this._configuration.alphaMode=c;this._configuration.hasOpacityFactor=1!==d;this._passParameters.texture=a;this._passParameters.opacity=d;a=this._techniqueRepository.acquire(w.CompositingTechnique,this._configuration);h.bindTechnique(a,this._passParameters,b);b=this._ensureVAO();h.bindVAO(b);h.drawArrays(f.PrimitiveType.TRIANGLE_STRIP,
0,g.vertexCount(b,"geometry"));a.release()};e._ensureVAO=function(){null==this._vao&&(this._vao=r.createQuadVAO(this._rctx));return this._vao};return n._createClass(m)}()});