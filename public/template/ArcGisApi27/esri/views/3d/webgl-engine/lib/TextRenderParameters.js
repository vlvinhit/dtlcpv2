// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../Color ../../../../core/fontUtils ../../../../core/Logger ../../../../core/screenUtils ../../../../chunks/vec4f64".split(" "),function(m,q,g,n,r,p,h){let x=function(){function e(a){this.definition=a;this.key=JSON.stringify(a);this.haloSize=Math.round(a.halo.size);this.textStyle=this._colorToRGBA(a.color);this.haloStyle=this._colorToRGB(a.halo.color);this.backgroundStyle=0!==a.background.color[3]?this._colorToRGBA(a.background.color):
null}var k=e.prototype;k.fontString=function(a){const b=this.definition.font;return`${b.style} ${b.weight} ${a}px ${b.family}, sans-serif`};k._colorToRGB=function(a){return`rgb(${a.slice(0,3).map(b=>Math.floor(255*b)).toString()})`};k._colorToRGBA=function(a){return`rgba(${a.slice(0,3).map(b=>Math.floor(255*b)).toString()},${a[3]})`};e.fromSymbol=async function(a,b){var f=g.toUnitRGBA(a?.material?.color)??h.ZEROS,c=null!=a.size?p.pt2px(a.size):12;const t=a.lineHeight,u=null!=a.background?g.toUnitRGBA(a.background.color):
h.ZEROS,v={family:a.font?.family??"sans-serif",decoration:a.font?.decoration??"none",weight:a.font?.weight??"normal",style:a.font?.style??"normal"};var d=a.halo;d=null!=d&&null!=d.color&&0<d.size?{size:p.pt2px(d.size),color:g.toUnitRGBA(d.color)}:{size:0,color:h.ZEROS};b=new e({color:f,size:c,background:{color:u,padding:null!=a.background?[.65*c,.5*c]:[0,0],borderRadius:null!=a.background?.375*c:0},lineSpacingFactor:t,font:v,halo:d,pixelRatio:b});if(a.font){f=!1;c=b.fontString(c);try{f=(await document.fonts.load(c)).some(l=>
!n.isCachedFontFace(l))}catch(l){r.getLogger("esri.views.3d.webgl-engine.lib.TextRenderParameters").warnOnce(`Failed to preload font '${c}'. Some text symbology may be rendered using the default browser font.`)}if(!f&&!w.has(a.font.family))try{await n.loadFont(a.font)}catch(l){}}return b};return q._createClass(e)}();const w=new Set("Arial;Times New Roman;Courier New;serif;sans-serif;monospace;cursive;fantasy;system-ui;ui-serif;ui-sans-serif;ui-monospace;ui-rounded;math;emoji;fangsong".split(";"));
m.TextRenderParameters=x;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});