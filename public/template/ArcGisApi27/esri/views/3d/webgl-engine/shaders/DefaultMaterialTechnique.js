// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../ViewingMode ../core/shaderLibrary/ShaderOutput ../core/shaderLibrary/attributes/NormalAttribute.glsl ../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl ../core/shaderLibrary/attributes/VertexNormal.glsl ../core/shaderLibrary/util/AlphaCutoff ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/basicInterfaces ../lib/DefaultVertexAttributeLocations ../lib/Material ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../lib/TransparencyPassType ../materials/pbrUtils ../../../../chunks/DefaultMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(z,m,g,h,A,B,u,C,v,n,D,E,p,k,F,G,q,H,r,w,I,J,x,l){let K=function(f){function d(){var a=f.apply(this,arguments)||this;a.isSchematic=!1;a.usePBR=!1;a.mrrFactors=h.fromArray(I.defaultAdvancedMRRFactors);a.hasVertexColors=!1;a.hasSymbolColors=!1;a.doubleSided=!1;a.doubleSidedType="normal";a.cullFace=k.CullFaceOptions.Back;a.isInstanced=!1;a.hasInstancedColor=!1;a.emissiveFactor=h.fromValues(0,0,0);a.instancedDoublePrecision=!1;a.normalType=C.NormalType.Attribute;a.receiveSSAO=!0;a.receiveShadows=
!0;a.castShadows=!0;a.shadowMappingEnabled=!1;a.ambient=h.fromValues(.2,.2,.2);a.diffuse=h.fromValues(.8,.8,.8);a.externalColor=A.fromValues(1,1,1,1);a.colorMixMode="multiply";a.opacity=1;a.layerOpacity=1;a.origin=h.create();a.hasSlicePlane=!1;a.hasSliceHighlight=!0;a.offsetTransparentBackfaces=!1;a.vvSize=null;a.vvColor=null;a.vvOpacity=null;a.vvSymbolAnchor=null;a.vvSymbolRotationMatrix=null;a.modelTransformation=null;a.transparent=!1;a.writeDepth=!0;a.customDepthTest=k.DepthTestFunction.Less;a.textureAlphaMode=
k.AlphaDiscardMode.Blend;a.textureAlphaCutoff=D.defaultMaskAlphaCutoff;a.textureAlphaPremultiplied=!1;a.hasOccludees=!1;a.renderOccluded=G.RenderOccludedFlag.Occlude;return a}g._inherits(d,f);return g._createClass(d)}(n.VertexNormalPassParameters);n=function(f){function d(){var a=f.apply(this,arguments)||this;a.origin=h.create();a.slicePlaneLocalOrigin=a.origin;return a}g._inherits(d,f);return g._createClass(d)}(n.VertexNormalDrawParameters);p=function(f){function d(){return f.apply(this,arguments)||
this}g._inherits(d,f);var a=d.prototype;a.initializeConfiguration=function(c,b){b.spherical=c.viewingMode===B.ViewingMode.Global;b.doublePrecisionRequiresObfuscation=c.rctx.driverTest.doublePrecisionRequiresObfuscation.result;b.textureCoordinateType=b.hasColorTexture||b.hasMetallicRoughnessTexture||b.hasEmissionTexture||b.hasOcclusionTexture||b.hasNormalTexture?v.TextureCoordinateAttributeType.Default:v.TextureCoordinateAttributeType.None;b.objectAndLayerIdColorInstanced=b.instanced};a.initializeProgram=
function(c){return this._initializeProgram(c,d.shader)};a._initializeProgram=function(c,b){return new H.Program(c.rctx,b.get().build(this.configuration),F.Default3D)};a._convertDepthTestFunction=function(c){return c===k.DepthTestFunction.Lequal?x.CompareFunction.LEQUAL:x.CompareFunction.LESS};a._makePipeline=function(c,b){const e=this.configuration,t=c===w.TransparencyPassType.NONE,y=c===w.TransparencyPassType.FrontFace;var L=l.makePipelineState,M=e.output!==u.ShaderOutput.Color&&e.output!==u.ShaderOutput.Alpha||
!e.transparent?null:t?q.blendingDefault:q.oitBlending(c);var N=e.cullFace!==k.CullFaceOptions.None?!0:e.hasSlicePlane?!1:!e.transparent&&!e.doubleSidedMode;return L.call(l,{blending:M,culling:N?l.cullingParams(e.cullFace):null,depthTest:{func:q.oitDepthTest(c,this._convertDepthTestFunction(e.customDepthTest))},depthWrite:t||y?e.writeDepth?l.defaultDepthWriteParams:null:null,colorWrite:l.defaultColorWriteParams,stencilWrite:e.hasOccludees?r.stencilWriteMaskOn:null,stencilTest:e.hasOccludees?b?r.stencilToolMaskBaseParams:
r.stencilBaseAllZerosParams:null,polygonOffset:t||y?null:q.getOITPolygonOffset(e.enableOffset)})};a.initializePipeline=function(){this._occludeePipelineState=this._makePipeline(this.configuration.transparencyPassType,!0);return this._makePipeline(this.configuration.transparencyPassType,!1)};a.getPipelineState=function(c,b){return b?this._occludeePipelineState:g._get(g._getPrototypeOf(d.prototype),"getPipelineState",this).call(this,c,b)};return g._createClass(d)}(p.ShaderTechnique);p.shader=new E.ReloadableShaderModule(J.DefaultMaterial,
()=>new Promise((f,d)=>z(["./DefaultMaterial.glsl"],f,d)));m.DefaultMaterialDrawParameters=n;m.DefaultMaterialPassParameters=K;m.DefaultMaterialTechnique=p;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});