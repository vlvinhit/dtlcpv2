// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/OrderIndependentTransparency ../lib/Program ../lib/RenderSlot ../lib/StencilUtils ../lib/TransparencyPassType ../lib/VertexAttribute ../../../../chunks/RibbonLine.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),function(y,p,h,r,z,k,f,A,t,b,u,c,B,v,d){const w=new Map([[c.VertexAttribute.POSITION,
0],[c.VertexAttribute.SUBDIVISIONFACTOR,1],[c.VertexAttribute.UV0,2],[c.VertexAttribute.AUXPOS1,3],[c.VertexAttribute.AUXPOS2,4],[c.VertexAttribute.COLOR,5],[c.VertexAttribute.COLORFEATUREATTRIBUTE,5],[c.VertexAttribute.SIZE,6],[c.VertexAttribute.SIZEFEATUREATTRIBUTE,6],[c.VertexAttribute.OPACITYFEATUREATTRIBUTE,7],[c.VertexAttribute.OBJECTANDLAYERIDCOLOR,8]]);k=function(l){function e(){return l.apply(this,arguments)||this}h._inherits(e,l);var m=e.prototype;m.initializeProgram=function(a){return new A.Program(a.rctx,
e.shader.get().build(this.configuration),w)};m._makePipelineState=function(a,n){const g=this.configuration,q=a===u.TransparencyPassType.NONE,C=a===u.TransparencyPassType.FrontFace;return d.makePipelineState({blending:g.output===r.ShaderOutput.Color||g.output===r.ShaderOutput.Alpha?q?f.blendingDefault:f.oitBlending(a):null,depthTest:{func:f.oitDepthTest(a)},depthWrite:q?g.writeDepth?d.defaultDepthWriteParams:null:f.oitDepthWrite(a),colorWrite:d.defaultColorWriteParams,stencilWrite:g.hasOccludees?b.stencilWriteMaskOn:
null,stencilTest:g.hasOccludees?n?b.stencilToolMaskBaseParams:b.stencilBaseAllZerosParams:null,polygonOffset:q||C?g.hasPolygonOffset?x:null:f.OITPolygonOffset})};m.initializePipeline=function(){var a=this.configuration;a.occluder&&(a=a.hasPolygonOffset?x:null,this._occluderPipelineTransparent=d.makePipelineState({blending:f.blendingDefault,polygonOffset:a,depthTest:b.depthCompareAlways,depthWrite:null,colorWrite:d.defaultColorWriteParams,stencilWrite:null,stencilTest:b.stencilToolTransparentOccluderParams}),
this._occluderPipelineOpaque=d.makePipelineState({blending:f.blendingDefault,polygonOffset:a,depthTest:b.depthCompareAlways,depthWrite:null,colorWrite:d.defaultColorWriteParams,stencilWrite:b.stencilWriteMaskOff,stencilTest:b.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=d.makePipelineState({blending:null,polygonOffset:a,depthTest:b.depthCompareLess,depthWrite:null,colorWrite:null,stencilWrite:b.stencilWriteMaskOn,stencilTest:b.stencilToolMaskBaseParams}));this._occludeePipelineState=
this._makePipelineState(this.configuration.transparencyPassType,!0);return this._makePipelineState(this.configuration.transparencyPassType,!1)};m.getPipelineState=function(a,n){return n?this._occludeePipelineState:this.configuration.occluder?a===t.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent:a===t.RenderSlot.OCCLUDER_MATERIAL?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:h._get(h._getPrototypeOf(e.prototype),"getPipelineState",this).call(this,a,n)};h._createClass(e,
[{key:"primitiveType",get:function(){return this.configuration.wireframe?v.PrimitiveType.LINES:v.PrimitiveType.TRIANGLE_STRIP}}]);return e}(k.ShaderTechnique);k.shader=new z.ReloadableShaderModule(B.RibbonLine,()=>new Promise((l,e)=>y(["./RibbonLine.glsl"],l,e)));const x={factor:0,units:-4};p.RibbonLineTechnique=k;p.vertexAttributeLocations=w;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});