// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/ShaderOutput ../core/shaderModules/interfaces ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../lib/DefaultVertexAttributeLocations ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../lib/TransparencyPassType ../materials/DefaultTechniqueConfiguration ../../../../chunks/ImageMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(z,m,h,d,n,u,b,p,e,x,A,q,B,v,r,C,D,y,l){u=function(f){function c(){return f.apply(this,arguments)||this}h._inherits(c,f);return h._createClass(c)}(u.NoParameters);p=function(f){function c(){return f.apply(this,arguments)||this}h._inherits(c,f);var a=c.prototype;a.initializeProgram=function(g){return new B.Program(g.rctx,c.shader.get().build(this.configuration),A.Default3D)};a._setPipelineState=function(g,t){const k=this.configuration,w=g===r.TransparencyPassType.NONE,E=g===r.TransparencyPassType.FrontFace;
return l.makePipelineState({blending:k.output!==n.ShaderOutput.Color&&k.output!==n.ShaderOutput.Alpha||!k.transparent?null:w?F:q.oitBlending(g),culling:l.cullingParams(k.cullFace),depthTest:{func:q.oitDepthTest(g)},depthWrite:w?k.writeDepth?l.defaultDepthWriteParams:null:q.oitDepthWrite(g),colorWrite:l.defaultColorWriteParams,stencilWrite:k.hasOccludees?v.stencilWriteMaskOn:null,stencilTest:k.hasOccludees?t?v.stencilToolMaskBaseParams:v.stencilBaseAllZerosParams:null,polygonOffset:w||E?null:q.getOITPolygonOffset(k.enableOffset)})};
a.initializePipeline=function(){this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0);return this._setPipelineState(this.configuration.transparencyPassType,!1)};a.getPipelineState=function(g,t){return t?this._occludeePipelineState:h._get(h._getPrototypeOf(c.prototype),"getPipelineState",this).call(this,g,t)};return h._createClass(c)}(p.ShaderTechnique);p.shader=new b.ReloadableShaderModule(D.ImageMaterial,()=>new Promise((f,c)=>z(["./ImageMaterial.glsl"],f,
c)));const F=l.simpleBlendingParams(y.BlendFactor.ONE,y.BlendFactor.ONE_MINUS_SRC_ALPHA);b=function(f){function c(){var a=f.apply(this,arguments)||this;a.output=n.ShaderOutput.Color;a.cullFace=x.CullFaceOptions.None;a.hasSlicePlane=!1;a.transparent=!1;a.enableOffset=!0;a.writeDepth=!0;a.hasOccludees=!1;a.transparencyPassType=r.TransparencyPassType.NONE;a.hasMultipassTerrain=!1;a.cullAboveGround=!1;return a}h._inherits(c,f);return h._createClass(c)}(C.DefaultTechniqueConfiguration);d.__decorate([e.parameter({count:n.ShaderOutput.COUNT})],
b.prototype,"output",void 0);d.__decorate([e.parameter({count:x.CullFaceOptions.COUNT})],b.prototype,"cullFace",void 0);d.__decorate([e.parameter()],b.prototype,"hasSlicePlane",void 0);d.__decorate([e.parameter()],b.prototype,"transparent",void 0);d.__decorate([e.parameter()],b.prototype,"enableOffset",void 0);d.__decorate([e.parameter()],b.prototype,"writeDepth",void 0);d.__decorate([e.parameter()],b.prototype,"hasOccludees",void 0);d.__decorate([e.parameter({count:r.TransparencyPassType.COUNT})],
b.prototype,"transparencyPassType",void 0);d.__decorate([e.parameter()],b.prototype,"hasMultipassTerrain",void 0);d.__decorate([e.parameter()],b.prototype,"cullAboveGround",void 0);m.ImageMaterialPassParameters=u;m.ImageMaterialTechnique=p;m.ImageMaterialTechniqueConfiguration=b;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});