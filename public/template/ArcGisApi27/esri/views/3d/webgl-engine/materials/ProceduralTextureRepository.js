// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/uid"],function(f,g,h){let m=function(){function d(a,b,c){this._createTexture=a;this._parametersKey=b;this._repository=new Map;this._orphanCache=c.newCache(`procedural-texture-repository:${h.generateUID()}`,k=>k.dispose())}var e=d.prototype;e.destroy=function(){for(const [,{texture:a}]of this._repository)a.dispose();this._repository.clear();this._orphanCache.destroy()};e.swap=function(a,b=null){a=this._acquire(a);this.release(b);
return a};e.release=function(a){if(null!=a){a=this._parametersKey(a);var b=this._repository.get(a);b&&(b.refCount--,0===b.refCount&&(this._repository.delete(a),{texture:b}=b,this._orphanCache.put(a,b,b.gpuMemoryUsage)))}};e._acquire=function(a){if(null==a)return null;const b=this._parametersKey(a);var c=this._repository.get(b);if(c)return c.refCount++,c.texture;a=this._orphanCache.pop(b)??this._createTexture(a);c=new l(a);this._repository.set(b,c);return a};return g._createClass(d)}(),l=g._createClass(function(d){this.texture=
d;this.refCount=1});f.ProceduralTextureRepository=m;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});