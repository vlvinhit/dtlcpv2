// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/VertexAttribute ../shaders/MeasurementArrowTechnique".split(" "),function(A,k,e,q,B,L,D,M,E,F,h,G){let P=function(g){function d(b){b=g.call(this,b,new H)||this;b._configuration=new G.MeasurementArrowTechniqueConfiguration;return b}
k._inherits(d,g);var a=d.prototype;a.getConfiguration=function(b,c){this._configuration.polygonOffsetEnabled=this.parameters.polygonOffset;this._configuration.transparent=this._transparent;this._configuration.transparencyPassType=c.transparencyPassType;return this._configuration};a.dispose=function(){};a.intersect=function(){};a.requiresSlot=function(b,c){return c===D.ShaderOutput.Color||c===D.ShaderOutput.Alpha?b===(this._transparent?F.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:F.RenderSlot.OPAQUE_MATERIAL):
!1};a.createGLMaterial=function(b){return new N(b)};a.createBufferWriter=function(){return new O};k._createClass(d,[{key:"_transparent",get:function(){const {parameters:b}=this;return 1>b.outlineColor[3]||1>b.stripeEvenColor[3]||1>b.stripeOddColor[3]}}]);return d}(E.Material),N=function(g){function d(){return g.apply(this,arguments)||this}k._inherits(d,g);d.prototype.beginSlot=function(a){return this.ensureTechnique(G.MeasurementArrowTechnique,a)};return k._createClass(d)}(M),H=function(g){function d(){var a=
g.apply(this,arguments)||this;a.width=32;a.outlineSize=.2;a.outlineColor=B.fromValues(1,.5,0,1);a.stripeEvenColor=B.fromValues(1,1,1,1);a.stripeOddColor=B.fromValues(1,.5,0,1);a.stripeLength=1;a.polygonOffset=!1;return a}k._inherits(d,g);return k._createClass(d)}(E.MaterialParameters);const Q=L.newLayout().vec3f(h.VertexAttribute.POSITION).vec3f(h.VertexAttribute.NORMAL).vec2f(h.VertexAttribute.UV0).f32(h.VertexAttribute.AUXPOS1),l=q.create(),r=q.create(),v=q.create(),m=q.create(),w=q.create();let O=
function(){function g(){this.vertexBufferLayout=Q}var d=g.prototype;d.elementCount=function(a){return 2*(a.indices.get(h.VertexAttribute.POSITION).length/2+1)};d.write=function(a,b,c,x,I){const n=c.vertexAttributes.get(h.VertexAttribute.POSITION).data,C=c.vertexAttributes.get(h.VertexAttribute.NORMAL).data,t=n.length/3;(c=c&&c.indices&&c.indices.get(h.VertexAttribute.POSITION))&&c.length!==2*(t-1)&&console.warn("MeasurementArrowMaterial does not support indices");const J=x.position,K=x.normal,y=x.uv0;
c=0;for(let p=0;p<t;++p){var f=3*p;e.set(l,n[f],n[f+1],n[f+2]);p<t-1&&(f=3*(p+1),e.set(r,n[f],n[f+1],n[f+2]),e.set(w,C[f],C[f+1],C[f+2]),e.normalize(w,w),e.subtract(v,r,l),e.normalize(v,v),e.cross(m,w,v),e.normalize(m,m));f=e.distance(l,r);a&&b&&(e.transformMat4(l,l,a),e.transformMat4(r,r,a),e.transformMat4(m,m,b));const u=I+2*p,z=u+1;J.setVec(u,l);J.setVec(z,l);K.setVec(u,m);K.setVec(z,m);y.set(u,0,c);y.set(u,1,-1);y.set(z,0,c);y.set(z,1,1);p<t-1&&(c+=f)}a=x.auxpos1;for(b=0;b<2*t;++b)a.set(I+b,c)};
return k._createClass(g)}();A.MeasurementArrowMaterial=P;A.Parameters=H;Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});