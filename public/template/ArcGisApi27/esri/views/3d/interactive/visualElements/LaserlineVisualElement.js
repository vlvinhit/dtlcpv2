// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/lineSegment ./VisualElement ../../support/LaserLineRenderer ../../../../chunks/Laserlines.glsl".split(" "),function(h,k,m,d,e,g,n,p){g=function(l){function f(a){var b=l.call(this,a.view)||this;b._angleCutoff=p.defaultAngleCutoff;b._style={};b._heightManifoldTarget=d.create();b._heightManifoldEnabled=!1;b._intersectsLine=e.create();b._intersectsLineEnabled=!1;
b._intersectsLineInfinite=!1;b._lineVerticalPlaneSegment=null;b._pathVerticalPlaneBuffers=null;b._pointDistanceLine=null;b.applyProps(a);return b}k._inherits(f,l);var c=f.prototype;c.createResources=function(){this._ensureRenderer()};c.destroyResources=function(){this._disposeRenderer()};c.updateVisibility=function(){this._syncRenderer();this._syncHeightManifold();this._syncIntersectsLine();this._syncPathVerticalPlane();this._syncLineVerticalPlane();this._syncPointDistance()};c._syncRenderer=function(){this.attached&&
this.visible&&(this._intersectsLineEnabled||this._heightManifoldEnabled||null!=this._pointDistanceLine||null!=this._pathVerticalPlaneBuffers)?this._ensureRenderer():this._disposeRenderer()};c._ensureRenderer=function(){null==this._renderer&&(this._renderer=new n.LaserLineRenderer({renderCoordsHelper:this.view.renderCoordsHelper},{contrastControlEnabled:!0}),this._renderer.viewingMode=this.view.state.viewingMode,this._syncStyle(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncIntersectsLineInfinite(),
this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this._renderer.renderSlots,this._renderer))};c._syncStyle=function(){null!=this._renderer&&(this._renderer.setParameters(this._style),null!=this._style.intersectsLineRadius&&(this._renderer.intersectsLineRadius=this._style.intersectsLineRadius))};c._syncAngleCutoff=function(){null!=this._renderer&&this._renderer.setParameters({angleCutoff:this._angleCutoff})};
c._syncHeightManifold=function(){null!=this._renderer&&(this._renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this._renderer.heightManifoldTarget=this._heightManifoldTarget))};c._syncIntersectsLine=function(){null!=this._renderer&&(this._renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this._renderer.intersectsLineSegment=this._intersectsLine))};c._syncIntersectsLineInfinite=function(){null!=
this._renderer&&(this._renderer.intersectsLineInfinite=this._intersectsLineInfinite)};c._syncPathVerticalPlane=function(){null!=this._renderer&&(this._renderer.pathVerticalPlaneEnabled=null!=this._pathVerticalPlaneBuffers&&this.visible,null!=this._pathVerticalPlaneBuffers&&(this._renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))};c._syncLineVerticalPlane=function(){null!=this._renderer&&(this._renderer.lineVerticalPlaneEnabled=null!=this._lineVerticalPlaneSegment&&this.visible,null!=
this._lineVerticalPlaneSegment&&(this._renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))};c._syncPointDistance=function(){if(null!=this._renderer){var a=this._pointDistanceLine,b=null!=a;this._renderer.pointDistanceEnabled=b&&null!=a.target&&this.visible;b&&(this._renderer.pointDistanceOrigin=a.origin,null!=a.target&&(this._renderer.pointDistanceTarget=a.target))}};c._disposeRenderer=function(){null!=this._renderer&&this.view._stage&&(this.view._stage.removeRenderPlugin(this._renderer),
this._renderer=null)};k._createClass(f,[{key:"testData",get:function(){return this._renderer}},{key:"angleCutoff",get:function(){return this._angleCutoff},set:function(a){this._angleCutoff!==a&&(this._angleCutoff=a,this._syncAngleCutoff())}},{key:"style",get:function(){return this._style},set:function(a){this._style=a;this._syncStyle()}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldEnabled?this._heightManifoldTarget:null},set:function(a){null!=a?(m.copy(this._heightManifoldTarget,
a),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1;this._syncRenderer();this._syncHeightManifold()}},{key:"intersectsWorldUpAtLocation",set:function(a){if(null==a)this.intersectsLine=null;else{var b=this.view.renderCoordsHelper.worldUpAtPosition(a,q);this.intersectsLine=e.fromValues(a,b);this.intersectsLineInfinite=!0}}},{key:"intersectsLine",get:function(){return this._intersectsLineEnabled?this._intersectsLine:null},set:function(a){null!=a?(e.copy(a,this._intersectsLine),this._intersectsLineEnabled=
!0):this._intersectsLineEnabled=!1;this._syncIntersectsLine();this._syncRenderer()}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(a){this._intersectsLineInfinite=a;this._syncIntersectsLineInfinite()}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(a){this._lineVerticalPlaneSegment=null!=a?e.copy(a):null;this._syncLineVerticalPlane();this._syncRenderer()}},{key:"pathVerticalPlane",get:function(){return this._pathVerticalPlaneBuffers},
set:function(a){this._pathVerticalPlaneBuffers=a;this._syncPathVerticalPlane();this._syncLineVerticalPlane();this._syncPointDistance();this._syncRenderer()}},{key:"pointDistanceLine",get:function(){return this._pointDistanceLine},set:function(a){this._pointDistanceLine=null!=a?{origin:d.clone(a.origin),target:a.target?d.clone(a.target):null}:null;this._syncPointDistance();this._syncRenderer()}}]);return f}(g.VisualElement);const q=d.create();h.LaserlineVisualElement=g;Object.defineProperty(h,Symbol.toStringTag,
{value:"Module"})});