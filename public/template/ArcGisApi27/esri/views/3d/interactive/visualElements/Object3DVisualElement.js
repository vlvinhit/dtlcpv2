// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/mat4 ../../../../chunks/mat4f64 ./VisualElement ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/UpdatePolicy ../../webgl-engine/lib/WebGLLayer".split(" "),function(g,h,l,m,f,n,p,q){f=function(k){function e(a){a=k.call(this,a.view)||this;a._resources=null;a._transform=m.create();return a}h._inherits(e,k);var d=e.prototype;d.recreate=function(){this.attached&&this.createResources()};d.recreateGeometry=function(){if(null!=
this._resources){var a=this._resources.object,b=this.view._stage;b.removeMany(a.geometries);a.removeAllGeometries();this.createGeometries(a);a.visible=this.visible;b.addMany(a.geometries)}};d.createResources=function(){this.destroyResources();const a=this.view._stage;if(a){var b=new q.WebGLLayer(a,{pickable:!1,updatePolicy:p.UpdatePolicy.SYNC}),c=new n.Object3D({castShadow:!1});c.transformation=this._transform;this.createExternalResources();this.createGeometries(c);a.addMany(c.geometries);this.forEachExternalMaterial(r=>
a.add(r));a.add(c);b.add(c);c.visible=this.visible;this._resources={layer:b,object:c}}};d.destroyResources=function(){const a=this.view._stage;null!=this._resources&&a&&(a.remove(this._resources.object),this._resources.layer.destroy(),this.forEachExternalMaterial(b=>{a.remove(b);b.dispose()}),a.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)};d.updateVisibility=function(a){null!=this._resources&&(this._resources.object.visible=
a)};h._createClass(e,[{key:"object",get:function(){return null!=this._resources?this._resources.object:null}},{key:"transform",get:function(){return this._transform},set:function(a){l.copy(this._transform,a);null!=this._resources&&(this._resources.object.transformation=this._transform)}}]);return e}(f.VisualElement);g.Object3DVisualElement=f;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});