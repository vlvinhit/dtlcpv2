// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ./Object3DVisualElement ../../layers/graphics/ElevationContext ../../support/renderInfoUtils/point ../../webgl-engine/lib/basicInterfaces ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/materials/ShadedColorMaterial".split(" "),function(l,m,u,v,f,n,h,w,x,p,q,y,r){h=function(t){function g(a){var b=t.call(this,
a)||this;b.view=null;b._renderOccluded=y.RenderOccludedFlag.OccludeAndTransparent;b._vertices=null;b._spatialReference=null;b._color=n.fromArray([1,127/255,0,1]);b._size=11;b._outlineColor=n.fromArray([0,0,0,.5]);b._outlineSize=1;b._elevationInfo=null;b.applyProps(a);return b}m._inherits(g,t);var c=g.prototype;c._updateMaterial=function(){this.attached&&this._vertexMaterial.setParameters(this._vertexMaterialParameters)};c._updateOutlineMaterial=function(){this.attached&&this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters)};
c._createRenderGeometries=function(){var a=this.vertices;if(null==a||0===a.length)return[];var b=x.geometryToRenderInfo(a,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,w.ElevationContext.fromElevationInfo(this.elevationInfo));a=[];const k=b.numVertices;b=b.position;for(let e=0;e<k;++e){var d=u.set(z,b[3*e],b[3*e+1],b[3*e+2]);const A=q.createSphereGeometry(this._vertexMaterial,.5,16,16,{offset:d});d=q.createSphereGeometry(this._vertexOutlineMaterial,.5,16,16,{offset:d});
a.push({vertexGeometry:A,vertexOutlineGeometry:d})}return a};c.createGeometries=function(a){const b=this._createRenderGeometries();for(const {vertexGeometry:k,vertexOutlineGeometry:d}of b)a.addGeometry(k),a.addGeometry(d)};c.createExternalResources=function(){this._vertexMaterial=new r.ShadedColorMaterial({...this._vertexMaterialParameters,writeDepth:!0,cullFace:p.CullFaceOptions.Back,screenSizeEnabled:!0});this._vertexOutlineMaterial=new r.ShadedColorMaterial({...this._vertexOutlineMaterialParameters,
transparent:!0,writeDepth:!0,cullFace:p.CullFaceOptions.Front,screenSizeEnabled:!0,shadingEnabled:!1})};c.destroyExternalResources=function(){this._vertexOutlineMaterial=this._vertexMaterial=null};c.forEachExternalMaterial=function(a){a(this._vertexMaterial);a(this._vertexOutlineMaterial)};m._createClass(g,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(a){a!==this._renderOccluded&&(this._renderOccluded=a,this._updateMaterial(),this._updateOutlineMaterial())}},{key:"vertices",
get:function(){return this._vertices},set:function(a){this._vertices=a;this.recreateGeometry()}},{key:"spatialReference",get:function(){return this._spatialReference},set:function(a){this._spatialReference=a;this.recreateGeometry()}},{key:"color",get:function(){return this._color},set:function(a){f.exactEquals(a,this._color)||(f.copy(this._color,a),this._updateMaterial())}},{key:"size",get:function(){return this._size},set:function(a){a!==this._size&&(this._size=a,this._updateMaterial())}},{key:"outlineColor",
get:function(){return this._outlineColor},set:function(a){f.exactEquals(a,this._outlineColor)||(f.copy(this._outlineColor,a),this._updateOutlineMaterial())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(a){a!==this._outlineSize&&(this._outlineSize=a,this._updateOutlineMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(a){this._elevationInfo=a;this.recreateGeometry()}},{key:"_vertexMaterialParameters",get:function(){return{color:this._color,
transparent:1>this._color[3],screenSizeScale:this.size,renderOccluded:this._renderOccluded}}},{key:"_vertexOutlineMaterialParameters",get:function(){return{color:this._outlineColor,transparent:1>this._outlineColor[3],screenSizeScale:this.size+2*this.outlineSize,renderOccluded:this._renderOccluded}}}]);return g}(h.Object3DVisualElement);const z=v.create();l.VerticesVisualElement=h;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});