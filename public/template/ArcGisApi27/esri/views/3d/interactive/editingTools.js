// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/3d/interactive/editingTools/draw/DrawGraphicTool3D":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../support/elevationInfoUtils ../../../../../symbols/support/ElevationInfo ../../SegmentLabels3D ../../SnappingVisualizer3D ../meshFastUpdateUtils ../settings ../../visualElements/ExtendedLineVisualElement ../../visualElements/OutlineVisualElement ../../visualElements/VerticesVisualElement ../../../layers/graphics/elevationAlignmentUtils ../../../layers/graphics/ElevationContext ../../../layers/graphics/GraphicState ../../../webgl-engine/lib/Material ../../../../draw/DrawGraphicTool ../../../../draw/DrawOperation ../../../../draw/drawSurfaces ../../../../support/colorUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G,z,A,K){a.DrawGraphicTool3D=function(L){function E(N){N=L.call(this,N)||this;N._activeVertexVisualElement=null;N._createGraphicState=null;N._outlineVisualElement=null;N._verticesVisualElement=null;N._verticalLineVisualElement=null;N.geometryType=null;N.type="draw-3d";return N}r._inherits(E,L);var M=E.prototype;M.initialize=function(){const {mode:N,offset:T}=this.elevationInfo;this.internalGraphicsLayer.elevationInfo=new u({mode:N,offset:T})};
M.normalizeCtorArgs=function(N){return N.elevationInfo?N:{...N,elevationInfo:B.getEffectiveElevationInfo(N.hasZ??!0)}};M.initializeGraphic=function(N){const {view:T}=this,Y=this._createGraphicState=new F.GraphicState({graphic:N});return x.handlesGroup([T.maskOccludee(N),T.trackGraphicState(Y),p.watch(()=>({element:this._outlineVisualElement,isDraped:Y.isDraped}),({element:U,isDraped:ja})=>{U&&(U.isDraped=ja)},p.syncAndInitial),this._setupLoadingIndicator(Y),...l.meshTransformFastUpdateHandles(Y)])};
M.makeDrawOperation=function(){const {geometryType:N}=this,T="circle"!==N&&"rectangle"!==N;return new z.DrawOperation({view:this.view,manipulators:this.manipulators,geometryType:G.geometryTypeToDrawOperationGeometryType(N),drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:new A.SceneDrawSurface(this.view,this.elevationInfo,[this.internalGraphicsLayer]),elevationDrawSurface:new A.ElevationDrawSurface(this.elevationInfo,this.defaultZ,this.view,
this.internalGraphicsLayer),hasM:!1,elevationInfo:this.elevationInfo,snappingManager:this.snappingManager,snappingVisualizer:new d.SnappingVisualizer3D,segmentLabels:T?new b.SegmentLabels3D:null,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions,isDraped:this._createGraphicState?this._createGraphicState.isDraped:"on-the-ground"===B.getEffectiveElevationMode(this.hasZ,this.elevationInfo)})};M.onActiveVertexChanged=function(N){const {view:T}=this,Y=h.getSettings(T);if(this._activeVertexVisualElement)return this._activeVertexVisualElement.vertices=
[N],this._updateVerticalLineVisualElement(N),null;const U=Y.manipulators,ja=U.vertex;this._activeVertexVisualElement=new q.VerticesVisualElement({view:T,spatialReference:T.spatialReference,vertices:[N],elevationInfo:this.internalGraphicsLayer.elevationInfo,color:K.unitRGBAFromColor(ja.color),size:ja.size,outlineColor:K.unitRGBAFromColor(ja.outlineColor),outlineSize:ja.outlineSize,renderOccluded:ja.renderOccluded,attached:!1});this._activeVertexVisualElement.color=K.unitRGBAFromColor(U.selected.color);
this._activeVertexVisualElement.attached=!0;N=Y.visualElements.zVerticalLine;this._verticalLineVisualElement=new t.ExtendedLineVisualElement({view:T,extensionType:N.extensionType,innerWidth:1,attached:!1,writeDepthEnabled:!1,renderOccluded:I.RenderOccludedFlag.OccludeAndTransparent});N.apply(this._verticalLineVisualElement);return x.makeHandle(()=>{this._activeVertexVisualElement=m.destroyMaybe(this._activeVertexVisualElement);this._verticalLineVisualElement=m.destroyMaybe(this._verticalLineVisualElement)})};
M._updateVerticalLineVisualElement=function(N){const T=this._verticalLineVisualElement;if(T){var {renderCoordsHelper:Y,elevationProvider:U}=this.view;c.set(H,N[0],N[1],N[2]);J.setFromElevationInfo(this.elevationInfo);H[2]=C.evaluateElevationAlignmentAtPoint(H,U,J,Y);Y.toRenderCoords(H,this.view.spatialReference,H)?(T.setStartEndFromWorldDownAtLocation(H),T.attached=!0):T.attached=!1}};M.onOutlineChanged=function(N){if(this._outlineVisualElement)return this._outlineVisualElement.geometry=N,null;const T=
this.internalGraphicsLayer.elevationInfo,{view:Y}=this,U=h.getSettings(Y);this._outlineVisualElement=new y.OutlineVisualElement({view:Y,geometry:N,elevationInfo:T,isDraped:this._createGraphicState?this._createGraphicState.isDraped:"on-the-ground"===B.getEffectiveElevationMode(this.hasZ,T),attached:!1});U.visualElements.lineGraphics.outline.apply(this._outlineVisualElement);U.visualElements.lineGraphics.shadowStyle.apply(this._outlineVisualElement);this._outlineVisualElement.attached=!0;this._outlineVisualElement.laserlineEnabled=
!0;return x.makeHandle(()=>{this._outlineVisualElement=m.destroyMaybe(this._outlineVisualElement)})};M.onRegularVerticesChanged=function(N){if(this._verticesVisualElement)return this._verticesVisualElement.vertices=N,null;const {view:T}=this,Y=h.getSettings(T).manipulators.vertex;this._verticesVisualElement=new q.VerticesVisualElement({view:T,spatialReference:T.spatialReference,vertices:N,elevationInfo:this.internalGraphicsLayer.elevationInfo,color:K.unitRGBAFromColor(Y.color),size:Y.size,outlineColor:K.unitRGBAFromColor(Y.outlineColor),
outlineSize:Y.outlineSize,renderOccluded:Y.renderOccluded,attached:!1});this._verticesVisualElement.attached=!0;return x.makeHandle(()=>{this._verticesVisualElement=m.destroyMaybe(this._verticesVisualElement)})};M._updateGraphicGeometry=function(N,T){if("mesh"===this.geometryType&&"point"===T?.type){const Y=this.geometryToPlace;Y&&Y.centerAt(T);Y&&N.geometry===Y?Y.vertexSpace.isGeoreferenced?N.notifyGeometryChanged():N.notifyMeshTransformChanged():N.geometry=Y}else r._get(r._getPrototypeOf(E.prototype),
"_updateGraphicGeometry",this).call(this,N,T)};M._setupLoadingIndicator=function(N){const {drawOperation:T}=this;if(!this.geometryToPlace)return T.loading=!1,null;T.loading=!0;const Y=x.makeHandle(()=>{T.loading=!1});let U=void 0;return x.handlesGroup([p.when(()=>N.displaying,()=>{U&&cancelAnimationFrame(U);U=requestAnimationFrame(()=>Y.remove())},{...p.syncAndInitial,once:!0}),x.makeHandle(()=>U&&cancelAnimationFrame(U)),Y])};return r._createClass(E)}(G.DrawGraphicTool);e.__decorate([n.property({constructOnly:!0})],
a.DrawGraphicTool3D.prototype,"elevationInfo",void 0);e.__decorate([n.property({constructOnly:!0})],a.DrawGraphicTool3D.prototype,"geometryType",void 0);e.__decorate([n.property()],a.DrawGraphicTool3D.prototype,"type",void 0);e.__decorate([n.property({constructOnly:!0})],a.DrawGraphicTool3D.prototype,"view",void 0);a.DrawGraphicTool3D=e.__decorate([v.subclass("esri.views.3d.interactive.editingTools.draw.DrawGraphicTool3D")],a.DrawGraphicTool3D);const J=new D.ElevationContext,H=w.create();Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/SegmentLabels3D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/screenUtils ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/Error ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec3f64 ../../interactive/SegmentLabels ../../interactive/support/viewUtils".split(" "),function(a,r,e,x,
m,p,n,k,f,g,v,c,w){a.SegmentLabels3D=function(u){function b(){return u.apply(this,arguments)||this}r._inherits(b,u);var d=b.prototype;d.getCameraOrExtent=function({view:l}){return l.state.camera};d.toScreenPointArray=function({view:l,elevationInfo:h,editGeometryOperations:t},y,q=x.createScreenPointArray()){({spatialReference:t}=t.data.coordinateHelper);w.vectorToRender(y,t,h,l,B);l.state.camera.projectToScreen(B,q);return q};return r._createClass(b)}(c.SegmentLabels);a.SegmentLabels3D=e.__decorate([g.subclass("esri.views.3d.interactive.SegmentLabels3D")],
a.SegmentLabels3D);const B=v.create();Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/SegmentLabels":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/analysisThemeUtils ../../core/asyncUtils ../../core/handleUtils ../../core/promiseUtils ../../core/quantityFormatUtils ../../core/reactiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ../../chunks/vec3 ../../geometry/support/coordsUtils ../../intl/messages ../../support/elevationInfoUtils ../../support/getDefaultUnitForView ../overlay/TextOverlayItem ../support/automaticLengthMeasurementUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F){const I={default:15,far:25};a.SegmentLabels=function(J){function H(E){E=J.call(this,E)||this;E.context=null;E.stagedVertex=null;E.visible=!0;E.edgeDistance="default";E._messagesUnits=null;E._labelInfos=[];E._nextLabelIndex=0;return E}r._inherits(H,J);var L=H.prototype;L.initialize=function(){const E=p.createTask(async M=>{const N=await y.fetchMessageBundle("esri/core/t9n/Units");k.throwIfAborted(M);this._messagesUnits=N});this.addHandles([g.watch(()=>
[null!=this.context&&this.getCameraOrExtent(this.context),this.visible,this._edgeDistancePixels,this.stagedVertex,this._messagesUnits],()=>this._update()),...["vertex-add","vertex-update","vertex-remove"].map(M=>g.on(()=>this.context?.editGeometryOperations,M,()=>this._update())),n.makeHandle(()=>E.abort())])};L.destroy=function(){for(this._nextLabelIndex=0;this._labelInfos.length;)this._destroyLabel(this._labelInfos.pop())};L._update=function(){this._nextLabelIndex=0;const E=this.context;if(null!=
E){var {components:M,geometry:N,coordinateHelper:T}=E.editGeometryOperations.data;if(N){var Y=M.length;for(let ra=0;ra<Y;++ra){const qa=[];M[ra].iterateVertices(ta=>{qa.push(T.toXYZ(ta.pos))});0===ra&&null!=this.stagedVertex&&qa.push(T.toXYZ(this.stagedVertex));if(2>qa.length)continue;var U=qa[0],ja=qa[qa.length-1];"polygon"===N.type&&2<qa.length&&!h.equals(U,ja)&&qa.push(U);ja=1===Y?!t.isClockwise(qa,!1,!1):!1;let pa=A,za=K;this.toScreenPointArray(E,U,pa);for(U=1;U<qa.length;++U){const ta=qa[U-1],
oa=qa[U];this.toScreenPointArray(E,oa,za);this._addLabel(E,ta,pa,oa,za,ja);[pa,za]=[za,pa]}}}}this._destroyUnusedLabels()};L._addLabel=function(E,M,N,T,Y,U){const {label:ja}=this._getOrCreateLabel(E);if(!this.visible||3025>d.squaredDistance(N,Y))ja.visible=!1;else{var ra=null!=E.graphicState?E.graphicState.isDraped?"on-the-ground":"absolute-height":q.getGeometryEffectiveElevationMode(E.editGeometryOperations.data.geometry,E.elevationInfo),{spatialReference:qa}=E.editGeometryOperations.data;M=F.autoDirectDistanceByElevationMode(M,
T,qa,ra);T=this._messagesUnits;E=C.getDefaultUnitForView(E.view);ja.text=null!=T&&null!=M?f.formatLength(T,M,E):"";ja.visible=!0;E=Y[0]-N[0];M=Y[1]-N[1];U?d.set(G,-M,E):d.set(G,M,-E);d.normalize(G,G);d.scale(G,G,this._edgeDistancePixels);d.lerp(z,N,Y,.5);d.add(z,z,G);ja.position=[z[0],z[1]];ja.anchor=Math.abs(G[0])>Math.abs(G[1])?0<G[0]?"left":"right":0>-G[1]?"top":"bottom"}};L._getOrCreateLabel=function(E){if(this._labelInfos.length>this._nextLabelIndex)return this._labelInfos[this._nextLabelIndex++];
const M=new D({anchor:"center",fontSize:10,textColor:m.getTextColor(),backgroundColor:m.getTextHaloColor(.6)});E.view.overlay?.items.add(M);E={label:M};this._labelInfos.push(E);this._nextLabelIndex=this._labelInfos.length;return E};L._destroyUnusedLabels=function(){for(;this._labelInfos.length>this._nextLabelIndex;)this._destroyLabel(this._labelInfos.pop())};L._destroyLabel=function({label:E}){this.context?.view.overlay?.items.remove(E);E.destroy()};r._createClass(H,[{key:"updating",get:function(){return null==
this._messagesUnits}},{key:"test",get:function(){return{labelContents:this._labelInfos.slice(0,this._nextLabelIndex).map(E=>E.label.text)}}},{key:"_edgeDistancePixels",get:function(){return I[this.edgeDistance]}}]);return H}(x);e.__decorate([c.property()],a.SegmentLabels.prototype,"context",void 0);e.__decorate([c.property()],a.SegmentLabels.prototype,"stagedVertex",void 0);e.__decorate([c.property()],a.SegmentLabels.prototype,"visible",void 0);e.__decorate([c.property()],a.SegmentLabels.prototype,
"edgeDistance",void 0);e.__decorate([c.property()],a.SegmentLabels.prototype,"updating",null);e.__decorate([c.property()],a.SegmentLabels.prototype,"_messagesUnits",void 0);e.__decorate([c.property()],a.SegmentLabels.prototype,"_edgeDistancePixels",null);a.SegmentLabels=e.__decorate([b.subclass("esri.views.interactive")],a.SegmentLabels);const G=l.create(),z=l.create(),A=v.createScreenPointArray(),K=v.createScreenPointArray();Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/analysisThemeUtils":function(){define(["exports",
"../Color","../config","../views/support/colorUtils"],function(a,r,e,x){function m(f){return 225<x.getColorLuminance(f,{ignoreAlpha:!0})?new r([0,0,0,f.a]):new r([255,255,255,f.a])}function p(f,g){f=new r(f);f.a*=g;return f}function n(f=1){return p(e.analysisTheme.accentColor,f)}function k(f=1){return p(e.analysisTheme.textColor,f)}a.getAccentColor=n;a.getContrastColor=function(f=1){return m(n(f))};a.getOpacity=function(f=1){return p(e.analysisTheme.accentColor,f).a};a.getTextColor=k;a.getTextHaloColor=
function(f=1){return m(k(f))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/colorUtils":function(){define(["exports","../../Color","../../core/colorUtils","../../chunks/vec4f64"],function(a,r,e,x){async function m(k){await k.whenReady();var f=k.basemapView?.baseLayerViews.map(b=>b.layer).toArray()??[];if(!f.length)return f=(f=getComputedStyle(k.container).backgroundColor)&&new r(f),k.get("background.color")||(f&&0!==f.a?f:null)||null;k=(await k.takeScreenshot({format:"png",
layers:f})).data.data;f=k.length;let g=0,v=0,c=0,w=0,B=0,u=0;for(let b=0;b<f;b+=4){const d=k[b],l=k[b+1],h=k[b+2],t=k[b+3],y=t/255;g+=d*d*y;v+=l*l*y;c+=h*h*y;B+=y;t&&(w+=t,u++)}g=Math.round(Math.sqrt(g/B));v=Math.round(Math.sqrt(v/B));c=Math.round(Math.sqrt(c/B));return new r([g,v,c,w/u/255])}function p(k){return n(k).isBright?"light":"dark"}function n(k){let {r:f,g,b:v,a:c}=k;1>c&&(f=Math.round(c*f+255*(1-c)),g=Math.round(c*g+255*(1-c)),v=Math.round(c*v+255*(1-c)));return new r({r:f,g,b:v})}a.darken=
function(k,f){var g=e.toLAB(k);g.l*=1-f;f=e.toRGB(g);g=k.clone();g.setColor(f);g.a=k.a;return g};a.desaturate=function(k,f){var g=e.toHSV(k);g.s*=f;f=e.toRGB(g);g=k.clone();g.setColor(f);g.a=k.a;return g};a.getBackgroundColor=m;a.getBackgroundColorTheme=async function(k){if(!k)return null;k=await m(k);return null!=k?p(k):null};a.getColorLuminance=function(k,f){const {r:g,g:v,b:c}=f?.ignoreAlpha?k:n(k);return.2126*g+.7152*v+.0722*c};a.getColorTheme=p;a.multiplyOpacity=function(k,f){k=k.clone();k.a*=
f;return k};a.unitRGBAFromColor=function(k){return x.fromArray(r.toUnitRGBA(k))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports"],function(a){function r(g,v){const c=[];let w,B;if(g[0].length!==v.length)throw Error("dimensions do not match");const u=g.length,b=g[0].length;let d=0;for(w=0;w<u;w++){for(B=d=0;B<b;B++)d+=g[w][B]*v[B];c.push(d)}return c}function e(g){g=[g.r/255,g.g/255,g.b/255].map(v=>.04045>=v?v/12.92:((v+.055)/1.055)**
2.4);g=r(k,g);return{x:100*g[0],y:100*g[1],z:100*g[2]}}function x(g){g=r(f,[g.x/100,g.y/100,g.z/100]).map(v=>Math.min(1,Math.max(.0031308>=v?12.92*v:1.055*v**(1/2.4)-.055,0)));return{r:Math.round(255*g[0]),g:Math.round(255*g[1]),b:Math.round(255*g[2])}}function m(g){g=[g.x/95.047,g.y/100,g.z/108.883].map(v=>v>(6/29)**3?v**(1/3):1/3*(29/6)**2*v+4/29);return{l:116*g[1]-16,a:500*(g[0]-g[1]),b:200*(g[1]-g[2])}}function p(g){const v=g.l;g=[(v+16)/116+g.a/500,(v+16)/116,(v+16)/116-g.b/200].map(c=>c>6/29?
c**3:3*(6/29)**2*(c-4/29));return{x:95.047*g[0],y:100*g[1],z:108.883*g[2]}}function n(g){if("r"in g&&"g"in g&&"b"in g)return g;if("l"in g&&"c"in g&&"h"in g){var v=g.c,c=g.h;return x(p({l:g.l,a:v*Math.cos(c),b:v*Math.sin(c)}))}if("l"in g&&"a"in g&&"b"in g)return x(p(g));if("x"in g&&"y"in g&&"z"in g)return x(g);if("h"in g&&"s"in g&&"v"in g){c=(g.h+360)%360/60;v=g.v/100*255;g=g.s/100*v;const w=g*(1-Math.abs(c%2-1));switch(Math.floor(c)){case 0:c={r:g,g:w,b:0};break;case 1:c={r:w,g,b:0};break;case 2:c=
{r:0,g,b:w};break;case 3:c={r:0,g:w,b:g};break;case 4:c={r:w,g:0,b:g};break;case 5:case 6:c={r:g,g:0,b:w};break;default:c={r:0,g:0,b:0}}c.r=Math.round(c.r+v-g);c.g=Math.round(c.g+v-g);c.b=Math.round(c.b+v-g);return c}return g}const k=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],f=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];a.toHSV=function(g){if("h"in g&&"s"in g&&"v"in g)return g;var v=n(g);g=v.r;const c=v.g,w=v.b;v=Math.max(g,c,w);const B=v-Math.min(g,c,w);
g=0===B?0:v===g?(c-w)/B%6:v===c?(w-g)/B+2:(g-c)/B+4;0>g&&(g+=6);return{h:60*g,s:100*(0===B?0:B/v),v:100/255*v}};a.toLAB=function(g){return"l"in g&&"a"in g&&"b"in g?g:m(e(n(g)))};a.toLCH=function(g){if(!("l"in g&&"c"in g&&"h"in g)){var v=m(e(n(g)));g=v.l;var c=v.a;const w=v.b;v=Math.sqrt(c*c+w*w);c=Math.atan2(w,c);c=0<c?c:c+2*Math.PI;g={l:g,c:v,h:c}}return g};a.toRGB=n;a.toXYZ=function(g){return"x"in g&&"y"in g&&"z"in g?g:e(n(g))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/quantityFormatUtils":function(){define(["exports",
"./quantityUtils","./unitFormatUtils"],function(a,r,e){function x(b,d,l,h=2,t="abbr"){return e.formatDecimal(b,r.toUnit(d,l).value,l,h,t)}function m(b,d,l,h=2,t="abbr"){return e.formatRelativeDecimal(b,r.toUnit(d,l).value,l,h,t)}function p(b,d,l=2,h="abbr"){return e.formatMetricLength(b,d.value,d.unit,l,h)}function n(b,d,l=2,h="abbr"){return e.formatMetricRelativeLength(b,d.value,d.unit,l,h)}function k(b,d,l=2,h="abbr"){return e.formatMetricVerticalLength(b,d.value,d.unit,l,h)}function f(b,d,l=2,
h="abbr"){return e.formatMetricRelativeVerticalLength(b,d.value,d.unit,l,h)}function g(b,d,l=2,h="abbr"){return e.formatMetricArea(b,d.value,d.unit,l,h)}function v(b,d,l=2,h="abbr"){return e.formatImperialLength(b,d.value,d.unit,l,h)}function c(b,d,l=2,h="abbr"){return e.formatImperialRelativeLength(b,d.value,d.unit,l,h)}function w(b,d,l=2,h="abbr"){return e.formatImperialVerticalLength(b,d.value,d.unit,l,h)}function B(b,d,l=2,h="abbr"){return e.formatImperialRelativeVerticalLength(b,d.value,d.unit,
l,h)}function u(b,d,l=2,h="abbr"){return e.formatImperialArea(b,d.value,d.unit,l,h)}a.formatAngle=function(b,d,l){return e.formatAngleDegrees(b.value,b.unit,b.rotationType,d,l)};a.formatArea=function(b,d,l,h=2,t="abbr"){switch(l){case "imperial":return u(b,d,h,t);case "metric":return g(b,d,h,t);default:return x(b,d,l,h,t)}};a.formatDMS=function(b){return e.formatDMS(b.value,b.unit)};a.formatDecimal=x;a.formatImperialArea=u;a.formatImperialLength=v;a.formatImperialRelativeLength=c;a.formatImperialRelativeVerticalLength=
B;a.formatImperialVerticalLength=w;a.formatLength=function(b,d,l,h,t="abbr"){h=h??2;switch(l){case "imperial":return v(b,d,h,t);case "metric":return p(b,d,h,t);default:return x(b,d,l,h,t)}};a.formatMetricArea=g;a.formatMetricLength=p;a.formatMetricRelativeLength=n;a.formatMetricRelativeVerticalLength=f;a.formatMetricVerticalLength=k;a.formatRelativeAngle=function(b,d,l){return e.formatRelativeAngleDegrees(b.value,b.unit,b.rotationType,d,l)};a.formatRelativeDecimal=m;a.formatRelativeLength=function(b,
d,l,h=2,t="abbr"){switch(l){case "imperial":return c(b,d,h,t);case "metric":return n(b,d,h,t);default:return m(b,d,l,h,t)}};a.formatRelativeVerticalLength=function(b,d,l,h=2,t="abbr"){switch(l){case "imperial":return B(b,d,h,t);case "metric":return f(b,d,h,t);default:return m(b,d,l,h,t)}};a.formatVerticalLength=function(b,d,l,h=2,t="abbr"){switch(l){case "imperial":return w(b,d,h,t);case "metric":return k(b,d,h,t);default:return x(b,d,l,h,t)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/core/quantityUtils":function(){define(["exports","./unitUtils"],function(a,r){function e(v,c){return{type:r.unitType(c),value:v,unit:c}}function x(v,c){return{type:r.unitType(c),value:v,unit:c}}function m(v,c){return{type:r.unitType(c),value:v,unit:c}}function p(v,c,w="arithmetic"){return{type:r.unitType(c),value:v,unit:c,rotationType:w}}function n(v,c){return e(r.convertUnit(v.value,v.unit,c),c)}const k=x(0,"meters"),f=m(0,"square-meters"),g=p(0,"radians");a.createAngle=p;a.createArea=m;a.createLength=
x;a.createQuantity=e;a.createVolume=function(v,c){return{type:r.unitType(c),value:v,unit:c}};a.isBaseUnit=function(v){return r.isBaseUnit(v.unit)};a.max=function(v,c){return null==v?c:null==c?v:v.value>r.convertUnit(c.value,c.unit,v.unit)?v:c};a.min=function(v,c){return null==v?c:null==c?v:v.value<r.convertUnit(c.value,c.unit,v.unit)?v:c};a.scale=function(v,c){return null==v?null:{...v,value:v.value*c}};a.toBaseUnit=function(v){return n(v,r.baseUnitForUnit(v.unit))};a.toUnit=n;a.zeroMeters=k;a.zeroRadians=
g;a.zeroSquareMeters=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/unitFormatUtils":function(){define("exports ./ByteSizeUnit ./Cyclical ./mathUtils ./string ./unitUtils ../intl/number".split(" "),function(a,r,e,x,m,p,n){function k(B,u,b){return B.units[u][b]}function f(B,u,b,d=2,l="abbr"){return`${n.formatNumber(u,{minimumFractionDigits:d,maximumFractionDigits:d,signDisplay:0<u?"never":"exceptZero"})} ${k(B,b,l)}`}function g(B,u,b,d=2,l="abbr"){return`${n.formatNumber(u,
{minimumFractionDigits:d,maximumFractionDigits:d,signDisplay:"exceptZero"})} ${k(B,b,l)}`}function v(B,u){const b=JSON.stringify(u);let d=c.get(b);d||(d=new Intl.NumberFormat("en-US",u),c.set(b,d));return/\-?\+?360/.test(d.format(B))?0:B}const c=new Map,w=["B","kB","MB","GB","TB"];a.formatAngleDegrees=function(B,u,b,d,l){l=l??2;var h=e.cyclicalDegrees,t=h.normalize;a:if(B=p.convertUnit(B,u,"degrees"),b===d)b=B;else{switch(d){case "arithmetic":b=-B+90;break a;case "geographic":b=-B-90;break a}b=void 0}h=
t.call(h,b,0,!0);l={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:l,minimumFractionDigits:l,signDisplay:0<h?"never":"exceptZero"};h=v(h,l);return n.formatNumber(h,l)};a.formatDMS=function(B,u,b=2){B=p.convertUnit(B,u,"degrees");u=B-Math.floor(B);B-=u;u*=60;let d=u-Math.floor(u);u-=d;d*=60;return`${B.toFixed()}\u00b0 ${u.toFixed()}' ${d.toFixed(b)}"`};a.formatDecimal=f;a.formatFileSize=function(B,u){let b=0===u?0:Math.floor(Math.log(u)/Math.log(r.ByteSizeUnit.KILOBYTES));b=
x.clamp(b,0,w.length-1);u=n.formatNumber(u/r.ByteSizeUnit.KILOBYTES**b,{maximumFractionDigits:2});return m.replace(B.units.bytes[w[b]],{fileSize:u})};a.formatImperialArea=function(B,u,b,d=2,l="abbr"){const h=p.preferredImperialAreaUnit(u,b);return f(B,p.convertUnit(u,b,h),h,d,l)};a.formatImperialLength=function(B,u,b,d=2,l="abbr"){const h=p.preferredImperialLengthUnit(u,b);return f(B,p.convertUnit(u,b,h),h,d,l)};a.formatImperialRelativeLength=function(B,u,b,d=2,l="abbr"){const h=p.preferredImperialLengthUnit(u,
b);return g(B,p.convertUnit(u,b,h),h,d,l)};a.formatImperialRelativeVerticalLength=function(B,u,b,d=2,l="abbr"){const h=p.preferredImperialVerticalLengthUnit(u,b);return g(B,p.convertUnit(u,b,h),h,d,l)};a.formatImperialVerticalLength=function(B,u,b,d=2,l="abbr"){const h=p.preferredImperialVerticalLengthUnit(u,b);return f(B,p.convertUnit(u,b,h),h,d,l)};a.formatMetricArea=function(B,u,b,d=2,l="abbr"){const h=p.preferredMetricAreaUnit(u,b);return f(B,p.convertUnit(u,b,h),h,d,l)};a.formatMetricLength=
function(B,u,b,d=2,l="abbr"){const h=p.preferredMetricLengthUnit(u,b);return f(B,p.convertUnit(u,b,h),h,d,l)};a.formatMetricRelativeLength=function(B,u,b,d=2,l="abbr"){const h=p.preferredMetricLengthUnit(u,b);return g(B,p.convertUnit(u,b,h),h,d,l)};a.formatMetricRelativeVerticalLength=function(B,u,b,d=2,l="abbr"){const h=p.preferredMetricVerticalLengthUnit(u,b);return g(B,p.convertUnit(u,b,h),h,d,l)};a.formatMetricVerticalLength=function(B,u,b,d=2,l="abbr"){const h=p.preferredMetricVerticalLengthUnit(u,
b);return f(B,p.convertUnit(u,b,h),h,d,l)};a.formatRelativeAngleDegrees=function(B,u,b,d,l){b!==d&&(B=-B);l=l??2;b={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:l,minimumFractionDigits:l,signDisplay:"exceptZero"};B=p.convertUnit(B,u,"degrees")%360;B=v(B,b);return n.formatNumber(B,b)};a.formatRelativeDecimal=g;a.unitName=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/support/getDefaultUnitForView":function(){define(["exports","../core/unitUtils","../portal/Portal"],
function(a,r,e){a.getDefaultUnitForView=function(x){if(null==x)return"metric";var m=x.map;m=(m&&"portalItem"in m?m.portalItem?.portal:null)??e.getDefault();switch(m.user?.units??m.units){case "metric":return"metric";case "english":return"imperial"}return r.getDefaultUnitSystem(x.spatialReference)??"metric"};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/overlay/TextOverlayItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/h ../../libs/maquette/projector".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c){const w={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};x=function(b){function d(h){h=
b.call(this,h)||this;h.x=0;h.y=0;h.text="-";h.fontSize=14;h.anchor="center";h.visible=!0;h.backgroundColor=new e([0,0,0,.6]);h.textColor=new e([255,255,255]);h._textShadowSize=1;return h}a._inherits(d,b);var l=d.prototype;l.render=function(){return v.h("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),color:this.textColor.toCss(!0),
padding:this._padding+"px",borderRadius:this._borderRadius+"px",textShadow:this._textShadow}},[this.text])};l.renderCanvas=function(h){if(this.visible){var t=h.font.replace(/^(.*?)px/,"");h.font=`${this.fontSize}px ${t}`;var y=this._padding,q=this._borderRadius,C=h.measureText(this.text).width,D=this.fontSize;t=B[this.anchor];h.textAlign="center";h.textBaseline="middle";C+=2*y;y=D+2*y;this._roundedRect(h,this.x+t.x*C,this.y+t.y*y,C,y,q);h.fillStyle=this.backgroundColor.toCss(!0);h.fill();q=this.x+
(t.x+.5)*C;t=this.y+(t.y+.5)*y;this._renderTextShadow(h,this.text,q,t);h.fillStyle=this.textColor.toCss(!0);h.fillText(this.text,q,t)}};l._renderTextShadow=function(h,t,y,q){h.lineJoin="miter";h.fillStyle=`rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1/u.length})`;const C=this._textShadowSize;for(const [D,F]of u)h.fillText(t,y+C*D,q+C*F)};l._roundedRect=function(h,t,y,q,C,D){h.beginPath();h.moveTo(t,y+D);h.arcTo(t,y,t+D,y,D);h.lineTo(t+q-D,y);h.arcTo(t+
q,y,t+q,y+D,D);h.lineTo(t+q,y+C-D);h.arcTo(t+q,y+C,t+q-D,y+C,D);h.lineTo(t+D,y+C);h.arcTo(t,y+C,t,y+C-D,D);h.closePath()};l._cssClasses=function(){const h={"esri-text-overlay-item":!0};let t;for(t in w)h[w[t]]=this.anchor===t;return h};a._createClass(d,[{key:"position",get:function(){return[this.x,this.y]},set:function(h){this._set("x",h[0]);this._set("y",h[1])}},{key:"_textShadowColor",get:function(){return this.backgroundColor}},{key:"_textShadow",get:function(){const h=this._textShadowColor.toCss(!1);
return`0 0 ${this._textShadowSize}px ${h}`}},{key:"_padding",get:function(){return.5*this.fontSize}},{key:"_borderRadius",get:function(){return this._padding}}]);return d}(x);r.__decorate([m.property()],x.prototype,"x",void 0);r.__decorate([m.property()],x.prototype,"y",void 0);r.__decorate([m.property()],x.prototype,"position",null);r.__decorate([m.property()],x.prototype,"text",void 0);r.__decorate([m.property()],x.prototype,"fontSize",void 0);r.__decorate([m.property()],x.prototype,"anchor",void 0);
r.__decorate([m.property()],x.prototype,"visible",void 0);r.__decorate([m.property()],x.prototype,"backgroundColor",void 0);r.__decorate([m.property()],x.prototype,"textColor",void 0);r.__decorate([m.property()],x.prototype,"_textShadowSize",void 0);r.__decorate([m.property()],x.prototype,"_textShadowColor",null);r.__decorate([m.property()],x.prototype,"_textShadow",null);r.__decorate([m.property()],x.prototype,"_padding",null);r.__decorate([m.property()],x.prototype,"_borderRadius",null);x=r.__decorate([f.subclass("esri.views.overlay.TextOverlayItem")],
x);const B={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,
y:0,textAlign:"right",textBaseline:"top"}},u=[];for(r=0;360>r;r+=22.5)u.push([Math.cos(Math.PI*r/180),Math.sin(Math.PI*r/180)]);return x})},"esri/libs/maquette/h":function(){define(["exports"],function(a){let r=(e,x,m)=>{for(let p=0,n=x.length;p<n;p++){let k=x[p];Array.isArray(k)?r(e,k,m):null!==k&&void 0!==k&&!1!==k&&("string"===typeof k&&(k={vnodeSelector:"",properties:void 0,children:void 0,text:k.toString(),domNode:null}),m.push(k))}};a.h=function(e,x,m){if(Array.isArray(x))m=x,x=void 0;else if(x&&
("string"===typeof x||x.hasOwnProperty("vnodeSelector"))||m&&("string"===typeof m||m.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");let p,n;m&&1===m.length&&"string"===typeof m[0]?p=m[0]:m&&(n=[],r(e,m,n),0===n.length&&(n=void 0));return{vnodeSelector:e,properties:x,children:n,text:""===p?void 0:p,domNode:null}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/automaticLengthMeasurementUtils":function(){define(["exports","./euclideanLengthMeasurementUtils",
"./geodesicLengthMeasurementUtils"],function(a,r,e){function x(m,p,n,k,...f){return"on-the-ground"===k?(m=p.apply(void 0,f),null!=m?m:n.apply(void 0,f)):m.apply(void 0,f)}a.autoDirectDistanceByElevationMode=function(m,p,n,k){return x(r.euclideanDirectDistance,e.geodesicDistance,r.euclideanHorizontalDistance,k,m,p,n)};a.autoDirectDistanceByElevationModeBetweenPoints=function(m,p,n){return x(r.euclideanDirectDistanceBetweenPoints,e.geodesicDistanceBetweenPoints,r.euclideanHorizontalDistanceBetweenPoints,
n,m,p)};a.autoDistanceBetweenPoints2D=function(m,p){return x(r.euclideanHorizontalDistanceBetweenPoints,e.geodesicDistanceBetweenPoints,r.euclideanHorizontalDistanceBetweenPoints,"on-the-ground",m,p)};a.autoHorizontalDistanceByElevationMode=function(m,p,n,k){return x(r.euclideanHorizontalDistance,e.geodesicDistance,r.euclideanHorizontalDistance,k,m,p,n)};a.autoHorizontalDistanceByElevationModeBetweenPoints=function(m,p,n){return x(r.euclideanHorizontalDistanceBetweenPoints,e.geodesicDistanceBetweenPoints,
r.euclideanHorizontalDistanceBetweenPoints,n,m,p)};a.autoLength2D=function(m){return x(r.euclideanLength,e.geodesicLength,r.euclideanHorizontalLength,"on-the-ground",m)};a.autoLengthByElevationMode=function(m,p){return x(r.euclideanLength,e.geodesicLength,r.euclideanHorizontalLength,p,m)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/euclideanLengthMeasurementUtils":function(){define("exports ../../core/quantityUtils ../../core/unitUtils ../../chunks/vec3 ../../chunks/vec3f64 ../../geometry/projection ../../geometry/support/spatialReferenceUtils ./measurementUtils".split(" "),
function(a,r,e,x,m,p,n,k){function f(q,C){const {hasZ:D,spatialReference:F}=q;var I=k.computeEuclideanMeasurementSR(F);let G=0;I=e.lengthUnitFromSpatialReference(I);if(null==I)return null;C=C===b.Direct?v:c;for(const A of q.paths)if(!(2>A.length)){q=A.length-1;for(let K=0;K<q;++K){var z=A[K];d[0]=z[0];d[1]=z[1];d[2]=D?z[2]:0;z=A[K+1];l[0]=z[0];l[1]=z[1];l[2]=D?z[2]:0;z=C(d,l,F);if(null==z)return null;G+=z.value}}return r.createLength(G,I)}function g(q,C,D){q=u(q,C,D);return null!=q?{direct:r.createLength(q.direct,
q.unit),horizontal:r.createLength(q.horizontal,q.unit),vertical:r.createLength(q.vertical,q.unit)}:null}function v(q,C,D){q=u(q,C,D,b.Direct);return null!=q?r.createLength(q.direct,q.unit):null}function c(q,C,D){q=u(q,C,D,b.Horizontal);return null!=q?r.createLength(q.horizontal,q.unit):null}function w(q,C,D){q=u(q,C,D,b.Vertical);return null!=q?r.createLength(q.verticalSigned,q.unit):null}function B(q,C){C=e.verticalLengthUnitFromSpatialReference(C);return null!=C?r.createLength(q[2],C):null}function u(q,
C,D,F){const I=k.computeEuclideanMeasurementSR(D),G=e.lengthUnitFromSpatialReference(I);if(null==G)return null;const z=C[2]-q[2];if(F===b.Vertical)return{verticalSigned:z,unit:G};if(!p.projectVectorToVector(q,D,h,I)||!p.projectVectorToVector(C,D,t,I))return null;if(F===b.Direct)return{direct:x.distance(t,h),unit:G};x.set(y,q[0],q[1],C[2]);if(!p.projectVectorToVector(y,D,y,I))return null;q=x.distance(y,t);return F===b.Horizontal?{horizontal:q,unit:G}:{direct:x.distance(t,h),horizontal:q,vertical:Math.abs(z),
unit:G}}var b;(function(q){q[q.Direct=0]="Direct";q[q.Horizontal=1]="Horizontal";q[q.Vertical=2]="Vertical"})(b||(b={}));const d=m.create(),l=m.create(),h=m.create(),t=m.create(),y=m.create();a.elevation=B;a.elevationOfPoint=function(q){d[0]=q.x;d[1]=q.y;d[2]=q.hasZ?q.z:0;return B(d,q.spatialReference)};a.euclideanDirectDistance=v;a.euclideanDirectDistanceBetweenPoints=function(q,C){const {spatialReference:D}=q;if(!n.equals(D,C.spatialReference))return null;d[0]=q.x;d[1]=q.y;d[2]=q.hasZ?q.z:0;l[0]=
C.x;l[1]=C.y;l[2]=C.hasZ?C.z:0;return v(d,l,D)};a.euclideanDistance=g;a.euclideanDistanceBetweenPoints=function(q,C){const {spatialReference:D}=q;if(!n.equals(D,C.spatialReference))return null;d[0]=q.x;d[1]=q.y;d[2]=q.hasZ?q.z:0;l[0]=C.x;l[1]=C.y;l[2]=C.hasZ?C.z:0;return g(d,l,D)};a.euclideanHorizontalDistance=c;a.euclideanHorizontalDistanceBetweenPoints=function(q,C){const {spatialReference:D}=q;if(!n.equals(D,C.spatialReference))return null;d[0]=q.x;d[1]=q.y;d[2]=q.hasZ?q.z:0;l[0]=C.x;l[1]=C.y;
l[2]=C.hasZ?C.z:0;return c(d,l,D)};a.euclideanHorizontalLength=function(q){return f(q,b.Horizontal)};a.euclideanLength=function(q){return f(q,b.Direct)};a.verticalDistance=function(q,C,D){q=u(q,C,D,b.Vertical);return null!=q?r.createLength(Math.abs(q.verticalSigned),q.unit):null};a.verticalSignedDistance=w;a.verticalSignedDistanceBetweenPoints=function(q,C){const {spatialReference:D}=q;if(!n.equals(D,C.spatialReference))return null;d[0]=q.x;d[1]=q.y;d[2]=q.hasZ?q.z:0;l[0]=C.x;l[1]=C.y;l[2]=C.hasZ?
C.z:0;return w(d,l,D)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/measurementUtils":function(){define(["exports","../../geometry/projection","../../geometry/spatialReferenceEllipsoidUtils"],function(a,r,e){a.computeEuclideanMeasurementSR=function(x){var m=e.getSphericalPCPF(x);m=m===e.SphericalECEFSpatialReference?e.WGS84ECEFSpatialReference:m;return r.canProjectWithoutEngine(x,m)?m:x};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geodesicLengthMeasurementUtils":function(){define("exports ../../core/quantityUtils ../../chunks/vec3f64 ../../geometry/geometryEngine ../../geometry/projection ../../geometry/support/geodesicUtils ../../geometry/support/spatialReferenceUtils ./geodesicMeasurementUtils".split(" "),
function(a,r,e,x,m,p,n,k){function f(y,q,C){return k.geodesicMeasure(C,g,v,c,y,q,C)}function g(y,q,C){return r.createLength(p.inverseGeodeticSolver(b,y,q,C).distance,"meters")}function v(y,q,C){return r.createLength(x.geodesicLength({type:"polyline",spatialReference:C,paths:[[[...y],[...q]]]},"meters"),"meters")}function c(y,q,C){return m.projectVectorToWGS84ComparableLonLat(y,C,h)&&m.projectVectorToWGS84ComparableLonLat(q,C,t)?r.createLength(p.inverseGeodeticSolver(b,h,t).distance,"meters"):null}
function w(y){return r.createLength(p.geodesicLengths([y],"meters")[0],"meters")}function B(y){return r.createLength(x.geodesicLength(y,"meters"),"meters")}function u(y){var q=[];if(!m.projectPolylineToWGS84ComparableLonLat(y,q))return null;y=0;for(const C of q){q=0;for(let D=1;D<C.length;++D)q+=p.inverseGeodeticSolver(b,C[D-1],C[D]).distance;y+=q}return r.createLength(y,"meters")}const b=new p.InverseGeodeticSolverResult,d=e.create(),l=e.create(),h=e.create(),t=e.create();a.geodesicDistance=f;a.geodesicDistanceBetweenPoints=
function(y,q){if(!n.equals(y.spatialReference,q.spatialReference))return null;const {spatialReference:C}=y;d[0]=y.x;d[1]=y.y;d[2]=y.hasZ?y.z:0;l[0]=q.x;l[1]=q.y;l[2]=q.hasZ?q.z:0;return f(d,l,C)};a.geodesicLength=function(y){const {spatialReference:q}=y;return k.geodesicMeasure(q,w,B,u,y)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ./spatialReferenceUtils ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v){function c(y){if(!y)return null;if(n.isGeographic(y)&&y.wkid){var q=p.spheroids[y.wkid];if(q)return q}return y.wkt&&((y=p.WKT_SPHEROID_REGEX.exec(y.wkt))&&2===y.length?(q=y[1].split(","),!q||3>q.length?y=null:(y=parseFloat(q[1]),q=parseFloat(q[2]),y=isNaN(y)||isNaN(q)?null:{a:y,f:0===q?0:1/q})):y=null,y)?y:null}function w(y){y=c(y??v.WGS84);if(null!=y&&"b"in y&&"eSq"in y&&"radius"in y)return y;const q=y.a*(1-y.f);return Object.assign(y,{b:q,eSq:1-(q/y.a)**2,radius:(2*
y.a+q)/3,densificationRatio:1E4/((2*y.a+q)/3)})}function B(y){return null!=y&&0>y?y+360:y}function u(y,q,C){const {a:D,eSq:F}=w(C);C=Math.sqrt(F);const I=Math.sin(q[1]*p.toRadians);q=D*q[0]*p.toRadians;C=0<F?D*(1-F)*(I/(1-F*I*I)-1/(2*C)*Math.log((1-C*I)/(1+C*I)))*.5:D*I;y[0]=q;y[1]=C;return y}function b(y){return null!==c(y)}function d(y,q){if("polyline"!==y.type&&"polygon"!==y.type)throw new x("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:C}=
y;if(!b(C))throw new x("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var D="polyline"===y.type?y.paths:y.rings;const F=[],I=[0,0],G=new t;for(const K of D){D=[];F.push(D);D.push([K[0][0],K[0][1]]);var z=K[0][0],A=K[0][1];let J,H;for(let L=0;L<K.length-1;L++){J=K[L+1][0];H=K[L+1][1];if(z===J&&A===H)continue;const E=[z,A];h(G,[z,A],[J,H],C);const {azimuth:M,distance:N}=G;z=N/q;if(1<z){for(A=1;A<=z-1;A++)l(I,E,M,A*q,C),D.push(I.slice(0));l(I,E,
M,(N+Math.floor(z-1)*q)/2,C);D.push(I.slice(0))}l(I,E,M,N,C);D.push(I.slice(0));z=I[0];A=I[1]}}return"polyline"===y.type?new k({paths:F,spatialReference:C}):new f({rings:F,spatialReference:C})}function l(y,q,C,D,F){const I=q[0]*p.toRadians;q=q[1]*p.toRadians;C=(C??0)*p.toRadians;const {a:G,b:z,f:A}=w(F);F=Math.sin(C);C=Math.cos(C);var K=(1-A)*Math.tan(q);q=1/Math.sqrt(1+K*K);const J=K*q,H=Math.atan2(K,C);K=q*F;const L=K*K;var E=1-L,M=E*(G*G-z*z)/(z*z);const N=1+M/16384*(4096+M*(-768+M*(320-175*M))),
T=M/1024*(256+M*(-128+M*(74-47*M)));M=D/(z*N);let Y=2*Math.PI,U,ja,ra,qa;for(;1E-12<Math.abs(M-Y);)ra=Math.cos(2*H+M),U=Math.sin(M),ja=Math.cos(M),qa=T*U*(ra+T/4*(ja*(-1+2*ra*ra)-T/6*ra*(-3+4*U*U)*(-3+4*ra*ra))),Y=M,M=D/(z*N)+qa;D=J*U-q*ja*C;E=A/16*E*(4+A*(4-3*E));D=Math.atan2(J*ja+q*U*C,(1-A)*Math.sqrt(L+D*D))/p.toRadians;y[0]=(I+(Math.atan2(U*F,q*ja-J*U*C)-(1-E)*A*K*(M+E*U*(ra+E*ja*(-1+2*ra*ra)))))/p.toRadians;y[1]=D;return y}function h(y,q,C,D){var F=q[0]*p.toRadians;q=q[1]*p.toRadians;var I=C[0]*
p.toRadians;C=C[1]*p.toRadians;const {a:G,b:z,f:A,radius:K}=w(D),J=I-F;var H=Math.atan((1-A)*Math.tan(q)),L=Math.atan((1-A)*Math.tan(C));D=Math.sin(H);H=Math.cos(H);const E=Math.sin(L);L=Math.cos(L);let M=1E3,N=J,T,Y,U;let ja,ra,qa;do{var pa=Math.sin(N);var za=Math.cos(N);U=Math.sqrt(L*pa*L*pa+(H*E-D*L*za)*(H*E-D*L*za));if(0===U)return y.distance=0,y.azimuth=void 0,y.reverseAzimuth=void 0,y;za=D*E+H*L*za;ja=Math.atan2(U,za);ra=H*L*pa/U;Y=1-ra*ra;pa=za-2*D*E/Y;isNaN(pa)&&(pa=0);qa=A/16*Y*(4+A*(4-3*
Y));T=N;N=J+(1-qa)*A*ra*(ja+qa*U*(pa+qa*za*(-1+2*pa*pa)))}while(1E-12<Math.abs(N-T)&&0<--M);if(0===M)return D=Math.acos(Math.sin(q)*Math.sin(C)+Math.cos(q)*Math.cos(C)*Math.cos(I-F))*K,F=I-F,y.azimuth=Math.atan2(Math.sin(F)*Math.cos(C),Math.cos(q)*Math.sin(C)-Math.sin(q)*Math.cos(C)*Math.cos(F))/p.toRadians,y.distance=D,y.reverseAzimuth=void 0,y;F=Y*(G*G-z*z)/(z*z);q=F/1024*(256+F*(-128+F*(74-47*F)));I=Math.atan2(H*Math.sin(N),H*E*Math.cos(N)-D*L);y.azimuth=Math.atan2(L*Math.sin(N),H*E-D*L*Math.cos(N))/
p.toRadians;y.distance=z*(1+F/16384*(4096+F*(-768+F*(320-175*F))))*(ja-q*U*(pa+q/4*(za*(-1+2*pa*pa)-q/6*pa*(-3+4*U*U)*(-3+4*pa*pa))));y.reverseAzimuth=I/p.toRadians;return y}let t=r._createClass(function(y=0,q,C){this.distance=y;this.azimuth=q;this.reverseAzimuth=C});a.InverseGeodeticSolverResult=t;a.directGeodeticSolver=l;a.geodesicAreas=function(y,q="square-meters"){if(y.some(I=>!b(I.spatialReference)))throw new x("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");
const C=[];for(var D=0;D<y.length;D++){var F=y[D];const {radius:I,densificationRatio:G}=w(F.spatialReference);C.push(d(F,I*G))}y=[];D=[0,0];F=[0,0];for(let I=0;I<C.length;I++){const {rings:G,spatialReference:z}=C[I];let A=0;for(let K=0;K<G.length;K++){const J=G[K];u(D,J[0],z);u(F,J[J.length-1],z);let H=F[0]*D[1]-D[0]*F[1];for(let L=0;L<J.length-1;L++)u(D,J[L+1],z),u(F,J[L],z),H+=F[0]*D[1]-D[0]*F[1];A+=H}A=m.convertUnit(A,"square-meters",q);y.push(A/-2)}return y};a.geodesicDensify=d;a.geodesicDistance=
function(y,q,C="meters"){if(!y||!q)throw new x("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!y.spatialReference||!q.spatialReference)throw new x("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!n.equals(y.spatialReference,q.spatialReference))throw new x("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const {spatialReference:D}=y;if(!b(D))throw new x("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");if(y.x===q.x&&y.y===q.y)return new t(0,0,0);const F=new t;h(F,[y.x,y.y],[q.x,q.y],D);F.distance=m.convertUnit(F.distance,"meters",C);F.azimuth=B(F.azimuth);F.reverseAzimuth=B(F.reverseAzimuth);return F};a.geodesicLengths=function(y,q="meters"){if(!y)throw new x("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(y.some(F=>!b(F.spatialReference)))throw new x("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");
const C=[];for(let F=0;F<y.length;F++){var D=y[F];const {spatialReference:I}=D;D="polyline"===D.type?D.paths:D.rings;let G=0;for(let z=0;z<D.length;z++){const A=D[z];let K=0;for(let J=1;J<A.length;J++){const H=A[J-1][0],L=A[J][0],E=A[J-1][1],M=A[J][1];if(E!==M||H!==L){const N=new t;h(N,[H,E],[L,M],I);K+=N.distance}}G+=K}G=m.convertUnit(G,"meters",q);C.push(G)}return C};a.inverseGeodeticSolver=h;a.isSupported=b;a.pointFromDistance=function(y,q,C){if(!y||null==q||null==C)throw new x("point-from-distance:missing-parameters",
"one or more input parameters are missing or undefined");if(0>C||360<C)throw new x("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!y.spatialReference)throw new x("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const {spatialReference:D}=y;if(!b(D))throw new x("geodesic-distance:not-supported","input geometry spatial reference is not supported");const F=[0,0];l(F,[y.x,y.y],
C,q,D);return new g({x:F[0],y:F[1],spatialReference:D})};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geodesicMeasurementUtils":function(){define(["exports","../../geometry/support/geodesicUtils","../../geometry/support/spatialReferenceUtils"],function(a,r,e){a.geodesicMeasure=function(x,m,p,n,...k){return e.isGeographic(x)&&r.isSupported(x)?m.apply(void 0,k):e.isWebMercator(x)?p.apply(void 0,k):n.apply(void 0,k)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/support/viewUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../layers/graphics/dehydratedFeatures ../../../support/elevationInfoUtils".split(" "),function(a,r,e,x,m,p,n){function k(b,d,l,h,t=m.create()){b=d.toXYZ(b);b[2]=n.getConvertedElevationFromVector(h,b,d.spatialReference,l)||0;h.renderCoordsHelper.toRenderCoords(b,d.spatialReference,t);return t}function f(b,d,l,h,t=m.create()){b=x.copy(c,
b);b[2]=n.getConvertedElevationFromVector(h,b,d,l)||0;h.renderCoordsHelper.toRenderCoords(b,d,t);return t}function g(b,d,l,h){if("2d"===h.type)return v.x=b[0],v.y=b[1],v.spatialReference=d,h.toScreen(v);f(b,d,l,h,c);h.state.camera.projectToScreen(c,u);return r.createScreenPoint(u[0],u[1])}const v=p.makeDehydratedPoint(0,0,0,null),c=m.create(),w=r.createRenderScreenPointArray3(),B=r.createRenderScreenPointArray3(),u=r.createScreenPointArray();a.anyMapPointToRender=k;a.anyMapPointToScreenPoint=function(b,
d,l,h){return g(d.toXYZ(b),d.spatialReference,l,h)};a.anyMapPointsToRenderWithEqualRelativeZ=function(b,d,l,h,t,y,q){if("absolute-height"===h.mode)k(b,l,h,t,y),k(d,l,h,t,q);else{b=l.toXYZ(b);d=l.toXYZ(d);var C=n.getConvertedElevationFromVector(t,b,l.spatialReference,h);h=n.getConvertedElevationFromVector(t,d,l.spatialReference,h);h=(null==C?h:null==h?C:Math.min(C,h))||0;b[2]=h;d[2]=h;t.renderCoordsHelper.toRenderCoords(b,l.spatialReference,y);t.renderCoordsHelper.toRenderCoords(d,l.spatialReference,
q)}};a.renderScreenSpaceTangent=function(b,d,l,h){l.projectToRenderScreen(b,w);l.projectToRenderScreen(d,B);e.subtract(h,B,w);e.normalize(h,h)};a.vectorToRender=f;a.vectorToScreenPoint=g;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/SnappingVisualizer3D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Color ../../../core/analysisThemeUtils ../../../core/has ../../../core/handleUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projection ../../../support/elevationInfoUtils ./visualElements/ExtendedLineVisualElement ./visualElements/ParallelLineVisualElement ./visualElements/PointVisualElement ./visualElements/RightAngleQuadVisualElement ../layers/interfaces ../webgl-engine/lib/Material ../../interactive/snapping/Settings ../../interactive/snapping/SnappingDomain ../../interactive/snapping/SnappingPoint ../../interactive/snapping/snappingUtils ../../interactive/snapping/SnappingVisualizer ../../interactive/snapping/hints/LineSnappingHint ../../interactive/support/viewUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C){function D(A){A=e.toUnitRGBA(x.getAccentColor());const K=[0,0,0,0];return{intersectionPointColor:K,intersectionPointOutlineColor:A,pointColor:K,pointOutlineColor:A,lineColor:A,lineOutlineColor:void 0,parallelSignColor:A,rightAngleColor:A,rightAngleColorDraped:e.toUnitRGBA(x.getAccentColor(.5)),rightAngleOutlineColor:A}}function F(A,K,J){K=G(K,J);return null==K?A:h.createSnappingPoint(A[0],A[1],K)}function I(A,K){return null!=G(A.domain,K)?K.selfSnappingZ.elevationInfo:
A.isDraped?g.onTheGroundElevationInfo:g.absoluteHeightElevationInfo}function G(A,{selfSnappingZ:K}){return A===l.SnappingDomain.SELF&&null!=K?K.value:null}function z(A,K,J,H,L,E=k.create()){L?f.projectVectorToVector(A,K,E,H.basemapTerrain.overlayManager.renderer.spatialReference):C.vectorToRender(A,K,J,H,E);return E}m=function(A){function K(){return A.apply(this,arguments)||this}r._inherits(K,A);var J=K.prototype;J.sortUniqueHints=function(H){return H.sort((L,E)=>(E instanceof q.LineSnappingHint?
E.length:0)-(L instanceof q.LineSnappingHint?L.length:0))};J.visualizeIntersectionPoint=function(H,L){const {spatialReference:E,view:M}=L;L=D();return p.destroyHandle(new w.PointVisualElement({view:M,primitive:"circle",geometry:h.snappingPointToDehydratedPoint(H.intersectionPoint,E),elevationInfo:H.isDraped?g.onTheGroundElevationInfo:g.absoluteHeightElevationInfo,size:20,outlineSize:2,color:L.intersectionPointColor,outlineColor:L.intersectionPointOutlineColor,pixelSnappingEnabled:!1}))};J.visualizePoint=
function(H,L){const {view:E,spatialReference:M}=L,N=D(),T=F(H.point,H.domain,L);return p.destroyHandle(new w.PointVisualElement({view:E,primitive:"circle",geometry:h.snappingPointToDehydratedPoint(T,M),elevationInfo:I(H,L),size:20,outlineSize:2,color:N.pointColor,outlineColor:N.pointOutlineColor,pixelSnappingEnabled:!1}))};J.visualizeLine=function(H,L){const {view:E,spatialReference:M}=L,N=D(),T=F(H.lineStart,H.domain,L),Y=F(H.lineEnd,H.domain,L);return p.destroyHandle(this._createLineSegmentHint(H.type,
T,Y,M,I(H,L),E,N,H.isDraped,H.fadeLeft,H.fadeRight))};J.visualizeParallelSign=function(H,L){const {view:E,spatialReference:M}=L;var N=D();const {isDraped:T}=H;var Y=I(H,L),U=F(H.lineStart,H.domain,L);H=F(H.lineEnd,H.domain,L);U=z(U,M,Y,E,T);Y=z(H,M,Y,E,T);Y=n.lerp(Y,U,Y,.5);N=new c.ParallelLineVisualElement({view:E,attached:!1,offset:d.defaults.parallelLineHintOffset,length:d.defaults.parallelLineHintLength,width:d.defaults.parallelLineHintWidth,color:N.parallelSignColor,location:Y,renderOccluded:T?
b.RenderOccludedFlag.OccludeAndTransparent:b.RenderOccludedFlag.Opaque,isDraped:T,renderGroup:u.DrapedRenderGroup.SnappingHint});N.setDirectionFromPoints(U,Y);N.attached=!0;return p.destroyHandle(N)};J.visualizeRightAngleQuad=function(H,L){const {view:E,spatialReference:M}=L,N=D();var T=I(H,L);const {isDraped:Y}=H;var U=F(H.previousVertex,H.domain,L),ja=F(H.centerVertex,H.domain,L);H=F(H.nextVertex,H.domain,L);U=z(U,M,T,E,Y);ja=z(ja,M,T,E,Y);T=z(H,M,T,E,Y);return p.destroyHandle(new B.RightAngleQuadVisualElement({view:E,
attached:!0,color:Y?N.rightAngleColorDraped:N.rightAngleColor,renderOccluded:Y?b.RenderOccludedFlag.OccludeAndTransparent:b.RenderOccludedFlag.Transparent,outlineRenderOccluded:Y?b.RenderOccludedFlag.OccludeAndTransparent:b.RenderOccludedFlag.Opaque,outlineColor:N.rightAngleOutlineColor,outlineSize:d.defaults.rightAngleHintOutlineSize,size:d.defaults.rightAngleHintSize,isDraped:Y,geometry:{previous:U,center:ja,next:T},renderGroup:u.DrapedRenderGroup.SnappingHint}))};J._createLineSegmentHint=function(H,
L,E,M,N,T,Y,U=!1,ja=!0,ra=!0){L=z(L,M,N,T,U);E=z(E,M,N,T,U);T=new v.ExtendedLineVisualElement({view:T,extensionType:v.ExtensionType.FADED,start:L,end:E,isDraped:U,color:Y.lineColor,renderOccluded:U?b.RenderOccludedFlag.OccludeAndTransparent:b.RenderOccludedFlag.Opaque,renderGroup:u.DrapedRenderGroup.SnappingHint});switch(H){case t.LineSegmentHintType.TARGET:T.width=d.defaults.lineHintWidthTarget;T.fadedExtensions={start:0,end:d.defaults.lineHintFadedExtensions};break;case t.LineSegmentHintType.REFERENCE_EXTENSION:T.width=
d.defaults.lineHintWidthReference;T.fadedExtensions={start:0,end:0};break;case t.LineSegmentHintType.REFERENCE:T.width=d.defaults.lineHintWidthReference,T.fadedExtensions={start:ja?d.defaults.lineHintFadedExtensions:0,end:ra?d.defaults.lineHintFadedExtensions:0}}T.attached=!0;return T};return r._createClass(K)}(y.SnappingVisualizer);a.SnappingVisualizer3D=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/ExtendedLineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../../../geometry/support/clipRay ../../../../geometry/support/frustum ../../../../geometry/support/lineSegment ../../../../geometry/support/ray ./EngineVisualElement ./LaserlineVisualElement ../../terrain/OverlayRenderer ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h){e=function(F){function I(z){var A=F.call(this,z)||this;A._ray=v.create();A._isWorldDown=!1;A._start=m.create();A._end=m.fromValues(1,0,0);A._width=1;A._color=n.fromValues(1,0,1,1);A._polygonOffset=!1;A._writeDepthEnabled=!0;A._innerWidth=0;A._innerColor=n.fromValues(1,1,1,1);A._stipplePattern=null;A._stippleOffColor=null;A._stipplePreferContinuous=!0;A._falloff=0;A._extensionType=a.ExtensionType.LINE;A._laserlineStyle=null;A._laserlineEnabled=!1;A._renderOccluded=
b.RenderOccludedFlag.OccludeAndTransparent;A._fadedExtensions=D;A._laserline=new w.LaserlineVisualElement({view:A.view});A.applyProps(z);return A}r._inherits(I,F);var G=I.prototype;G.destroy=function(){this._laserline.destroy();r._get(r._getPrototypeOf(I.prototype),"destroy",this).call(this)};G.createObject3DResourceFactory=function(z){return{view:z,createResources:A=>this._createObject3DResources(A),destroyResources:A=>this._destroyExternalResources(A),recreateGeometry:(A,K)=>this._recreateObject3DGeometry(A,
K),cameraChanged:()=>this._updateGeometry()}};G.createDrapedResourceFactory=function(z){return{view:z,createResources:()=>this._createDrapedResources(),destroyResources:A=>this._destroyExternalResources(A),recreateGeometry:A=>this._recreateDrapedGeometry(A)}};G.updateVisibility=function(z){r._get(r._getPrototypeOf(I.prototype),"updateVisibility",this).call(this,z);this._laserline.visible=z};G.onAttachedChange=function(){this._laserline.attached=this._laserlineAttached};G.setStartEndFromWorldDownAtLocation=
function(z){this._isWorldDown=!0;x.copy(this._start,z);this.view.renderCoordsHelper.worldUpAtPosition(z,this._end);x.subtract(this._end,z,this._end);v.fromPoints(this._start,this._end,this._ray);this._updateGeometry()};G._updateMaterial=function(){const {materialParameters:z}=this;this.object3dResources.resources?.material.setParameters(z);this.drapedResources.resources?.material.setParameters(z)};G._createObject3DResources=function(z){const A=new h.RibbonLineMaterial(this.materialParameters),K=[];
this._createObject3DGeometry(A,z,K);return{material:A,geometries:K,forEach:J=>{J(A);K.forEach(J)}}};G._destroyExternalResources=function(z){z.geometries=[];z.material.dispose()};G._recreateObject3DGeometry=function(z,A){z.geometries.length=0;this._createObject3DGeometry(z.material,A,z.geometries)};G._createObject3DGeometry=function(z,A,K){z=this._createGeometry(z);K.push(z);A.addGeometry(z);this._updateVerticesObject3D(A)};G._createDrapedResources=function(){const z=new h.RibbonLineMaterial(this.materialParameters),
A=this._createDrapedGeometry(z);return{material:z,geometries:[A]}};G._recreateDrapedGeometry=function(z){z.geometries=[this._createDrapedGeometry(z.material)]};G._createDrapedGeometry=function(z){z=this._createGeometry(z);this._updateVerticesDraped(z);return new d.RenderGeometry(z)};G._createGeometry=function(z){const A=this.extensionType===a.ExtensionType.FADED,K=A?[m.create(),m.create(),m.create(),m.create()]:[m.create(),m.create()];return u.createPolylineGeometry(z,K,null,A?[1,1,1,0,1,1,1,1,1,
1,1,1,1,1,1,0]:null)};G._updateGeometry=function(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const z=this.object3dResources.object;z&&this._updateVerticesObject3D(z)}};G._updateVerticesObject3D=function(z){const A=this._lineSegment;this._updateVertexAttributesObject3D(z,A);this._laserline.intersectsLine=A};G._updateVerticesDraped=function(z){this._updateVertexAttributesDraped(z,this._lineSegment)};G._updateLineSegmentFinite=function(z){return g.fromPoints(this._start,this._end,
z)};G._updateLineSegmentInfinite=function(z,A){var K=this.view.state.camera;k.fromRay(this._ray,t);switch(z){case a.ExtensionType.LINE:t.c0=-Number.MAX_VALUE;break;case a.ExtensionType.RAY:case a.ExtensionType.GROUND_RAY:var J=this._ray.origin;z=this.view.elevationProvider.getElevation(J[0],J[1],J[2],this.view.renderCoordsHelper.spatialReference,"ground")??0;J=this.view.renderCoordsHelper.getAltitude(J);this._isWorldDown&&J<z&&x.negate(t.ray.direction,t.ray.direction);this._extensionType===a.ExtensionType.GROUND_RAY&&
null!=z&&(t.c1=Math.abs(J-z))}if(!f.intersectClipRay(K.frustum,t))return this._updateLineSegmentFinite(A);K=k.getStart(t,y);z=k.getEnd(t,q);return g.fromPoints(K,z,A)};G._updateVertexAttributesObject3D=function(z,A){const K=z.geometries[0].getMutableAttribute(l.VertexAttribute.POSITION)?.data;if(K){var J=0;for(const H of this._lineVertices(A))K[J++]=H[0],K[J++]=H[1],K[J++]=H[2];z.geometryVertexAttrsUpdated(z.geometries[0])}};G._updateVertexAttributesDraped=function(z,A){const K=z.getMutableAttribute(l.VertexAttribute.POSITION)?.data;
if(K){var J=0;for(const H of this._lineVertices(A))K[J++]=H[0],K[J++]=H[1],K[J++]=B.DRAPED_Z;z.invalidateBoundingInfo()}};G._lineVertices=function*(z){this.extensionType===a.ExtensionType.FADED?(yield g.pointAt(z,-this.fadedExtensions.start,y),yield g.pointAt(z,0,y),yield g.pointAt(z,1,y),yield g.pointAt(z,1+this.fadedExtensions.end,y)):(yield g.pointAt(z,0,y),yield g.pointAt(z,1,y))};r._createClass(I,[{key:"start",get:function(){return this._start},set:function(z){this._isWorldDown=!1;x.exactEquals(this._start,
z)||(x.copy(this._start,z),v.fromPoints(this._start,this._end,this._ray),this._updateGeometry())}},{key:"end",get:function(){return this._end},set:function(z){this._isWorldDown=!1;x.exactEquals(this._end,z)||(x.copy(this._end,z),v.fromPoints(this._start,this._end,this._ray),this._updateGeometry())}},{key:"width",get:function(){return this._width},set:function(z){z!==this._width&&(this._width=z,this._updateMaterial())}},{key:"color",get:function(){return this._color},set:function(z){p.exactEquals(z,
this._color)||(p.copy(this._color,z),this._updateMaterial())}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(z){z!==this._polygonOffset&&(this._polygonOffset=z,this._updateMaterial())}},{key:"writeDepthEnabled",get:function(){return this._writeDepthEnabled},set:function(z){this._writeDepthEnabled!==z&&(this._writeDepthEnabled=z,this._updateMaterial())}},{key:"innerWidth",get:function(){return this._innerWidth},set:function(z){z!==this._innerWidth&&(this._innerWidth=
z,this._updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(z){p.exactEquals(z,this._innerColor)||(p.copy(this._innerColor,z),this._updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},set:function(z){const A=null!=z!==(null!=this._stipplePattern);this._stipplePattern=z;A?this.recreate():this._updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},set:function(z){null!=z&&null!=this._stippleOffColor&&
p.exactEquals(z,this._stippleOffColor)||(this._stippleOffColor=null!=z?n.clone(z):null,this._updateMaterial())}},{key:"stipplePreferContinuous",get:function(){return this._stipplePreferContinuous},set:function(z){z!==this._stipplePreferContinuous&&(this._stipplePreferContinuous=z,this._updateMaterial())}},{key:"falloff",get:function(){return this._falloff},set:function(z){z!==this._falloff&&(this._falloff=z,this._updateMaterial())}},{key:"extensionType",get:function(){return this._extensionType},
set:function(z){z!==this._extensionType&&(this._extensionType=z,this.recreateGeometry())}},{key:"_laserlineAttached",get:function(){return this._laserlineEnabled&&null!=this._laserlineStyle&&this.attached&&!this.isDraped}},{key:"laserlineStyle",get:function(){return this._laserlineStyle},set:function(z){this._laserlineStyle=z;this._laserline.attached=this._laserlineAttached;null!=z&&(this._laserline.style=z)}},{key:"laserlineEnabled",get:function(){return this._laserlineEnabled},set:function(z){this._laserlineEnabled!==
z&&(this._laserlineEnabled=z,this._laserline.attached=this._laserlineAttached)}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(z){z!==this._renderOccluded&&(this._renderOccluded=z,this._updateMaterial())}},{key:"_normalizedRenderOccluded",get:function(){return this.isDraped&&this._renderOccluded===b.RenderOccludedFlag.OccludeAndTransparentStencil?b.RenderOccludedFlag.OccludeAndTransparent:this._renderOccluded}},{key:"fadedExtensions",get:function(){return this._fadedExtensions},
set:function(z){this._fadedExtensions=z??D;this.recreateGeometry()}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,hasPolygonOffset:this._polygonOffset,renderOccluded:this._normalizedRenderOccluded,writeDepth:this._writeDepthEnabled}}},{key:"_lineSegment",get:function(){return this._extensionType===
a.ExtensionType.FADED?this._updateLineSegmentFinite(C):this._updateLineSegmentInfinite(this._extensionType,C)}}]);return I}(c.EngineVisualElement);const t=k.create(),y=m.create(),q=m.create(),C=g.create();a.ExtensionType=void 0;(function(F){F[F.LINE=0]="LINE";F[F.RAY=1]="RAY";F[F.GROUND_RAY=2]="GROUND_RAY";F[F.FADED=3]="FADED"})(a.ExtensionType||(a.ExtensionType={}));c=1/3;const D={start:c,end:c};a.ExtendedLineVisualElement=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/EngineVisualElement":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","./DrapedVisualElementResources","./VisualElement","./VisualElementResources"],function(a,r,e,x,m){x=function(p){function n({view:f,isDraped:g}){var v=p.call(this,f)||this;v._isDraped=!1;v.object3dResources=new m.VisualElementResources(v.createObject3DResourceFactory(f));v.drapedResources=new e.DrapedVisualElementResources(v.createDrapedResourceFactory(f));v.isDraped=g??!1;return v}r._inherits(n,p);var k=n.prototype;k.createResources=function(){this.object3dResources.attached=
!this._isDraped;this.drapedResources.attached=this._isDraped};k.destroyResources=function(){this.object3dResources.attached=!1;this.drapedResources.attached=!1};k.recreate=function(){this.object3dResources.recreate();this.drapedResources.recreate()};k.recreateGeometry=function(){this.object3dResources.recreateGeometry();this.drapedResources.recreateGeometry()};k.destroy=function(){this.object3dResources.destroy();this.drapedResources.destroy();r._get(r._getPrototypeOf(n.prototype),"destroy",this).call(this)};
k.updateVisibility=function(f){this.object3dResources.visible=f;this.drapedResources.visible=f};r._createClass(n,[{key:"isDraped",get:function(){return this._isDraped},set:function(f){f!==this._isDraped&&(this._isDraped=f,this.object3dResources.attached=this.attached&&!f,this.drapedResources.attached=this.attached&&f)}},{key:"renderGroup",get:function(){return this.drapedResources.renderGroup},set:function(f){this.drapedResources.renderGroup=f}}]);return n}(x.VisualElement);a.EngineVisualElement=
x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/DrapedVisualElementResources":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/Identifiable ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../../layers/interfaces ../../webgl-engine/lib/ModelDirtyTypes ../../webgl-engine/lib/UpdatePolicy".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w){n=function(){function u(d){this._resourceFactory=d;this._resources=null;this._visible=!0;this._attached=!1;this._renderGroup=v.DrapedRenderGroup.Outline}var b=u.prototype;b.destroy=function(){this._destroyResources()};b.recreate=function(){this.attached&&this._createResources()};b.recreateGeometry=function(){this._resourceFactory.recreateGeometry?null!=this._resources&&(this._ensureRenderGeometriesRemoved(),this._resourceFactory.recreateGeometry(this._resources.external),
this._syncGeometriesToRenderer()):this.recreate()};b._createOrDestroyResources=function(){this._attached?null==this._resources&&this._createResources():this._destroyResources()};b._createResources=function(){this._destroyResources();const d=this._resourceFactory.createResources(),l=new B({view:this._resourceFactory.view,renderGroup:this._renderGroup}),h=this._resourceFactory.view.basemapTerrain?.overlayManager;this._resources={layerView:new B({view:this._resourceFactory.view,renderGroup:this._renderGroup}),
external:d,geometriesAdded:!1};h&&(this._resources.drapeSourceRenderer=h.registerGeometryDrapeSource(l));this._syncGeometriesToRenderer()};b._destroyResources=function(){if(null!=this._resources){this._ensureRenderGeometriesRemoved();var d=this._resourceFactory.view.basemapTerrain?.overlayManager;d&&d.unregisterDrapeSource(this._resources.layerView);this._resourceFactory.destroyResources(this._resources.external);this._resources=null}};b._syncGeometriesToRenderer=function(){this._visible?this._ensureRenderGeometriesAdded():
this._ensureRenderGeometriesRemoved()};b._ensureRenderGeometriesRemoved=function(){null!=this._resources&&null!=this._resources.drapeSourceRenderer&&this._resources.geometriesAdded&&(this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries,c.DirtyOperation.UPDATE),this._resources.geometriesAdded=!1)};b._ensureRenderGeometriesAdded=function(){null==this._resources||null==this._resources.drapeSourceRenderer||this._resources.geometriesAdded||(this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries,
c.DirtyOperation.UPDATE),this._resources.geometriesAdded=!0)};r._createClass(u,[{key:"resources",get:function(){return null!=this._resources?this._resources.external:null}},{key:"visible",get:function(){return this._visible},set:function(d){d!==this._visible&&(this._visible=d,this._syncGeometriesToRenderer())}},{key:"attached",get:function(){return this._attached},set:function(d){d!==this._attached&&(this._attached=d,this._createOrDestroyResources())}},{key:"renderGroup",get:function(){return this._renderGroup},
set:function(d){this._renderGroup=d;const l=this._resources?.layerView;l&&(l.renderGroup=d)}}]);return u}();let B=function(u){function b(d){d=u.call(this,d)||this;d.drapeSourceType=v.DrapeSourceType.Features;d.updatePolicy=w.UpdatePolicy.SYNC;d.renderGroup=v.DrapedRenderGroup.Outline;return d}r._inherits(b,u);return r._createClass(b)}(m.IdentifiableMixin(x));e.__decorate([p.property({constructOnly:!0})],B.prototype,"view",void 0);e.__decorate([p.property({readOnly:!0})],B.prototype,"drapeSourceType",
void 0);e.__decorate([p.property()],B.prototype,"renderGroup",void 0);B=e.__decorate([g.subclass("DrapedVisualElementLayerView")],B);a.DrapedVisualElementResources=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/VisualElement":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/reactiveUtils"],function(a,r,e){let x=function(){function m(n){this._resourcesCreated=this._attached=!1;this._visible=!0;
this.view=n;this._handle=e.watch(()=>this.view.ready,k=>{this._resourcesCreated&&(k?this._createResources():this._destroyResources())})}var p=m.prototype;p.applyProps=function(n){let k=!1;for(const f in n)f in this?"attached"===f?k=n[f]:this[f]=n[f]:console.error("Cannot set unknown property",f);this.attached=k};p.destroy=function(){this.attached=!1;this._handle.remove()};p.onAttachedChange=function(n){};p._createResources=function(){this.createResources();this._resourcesCreated=!0;this.updateVisibility(this.visible)};
p._destroyResources=function(){this.destroyResources();this._resourcesCreated=!1};r._createClass(m,[{key:"attached",get:function(){return this._attached},set:function(n){n!==this._attached&&this.view._stage&&((this._attached=n)&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources(),this.onAttachedChange(n))}},{key:"visible",get:function(){return this._visible},set:function(n){n!==this._visible&&(this._visible=n,this.attached&&this.updateVisibility(n))}}]);
return m}();a.VisualElement=x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/VisualElementResources":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/reactiveUtils ../../webgl-engine/lib/ContentObjectType ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Texture ../../webgl-engine/lib/UpdatePolicy ../../webgl-engine/lib/WebGLLayer".split(" "),function(a,r,e,x,m,p,n,k){let f=function(){function g(c){this._resourceFactory=
c;this._resources=null;this._visible=!0;this._attached=!1}var v=g.prototype;v.destroy=function(){this._destroyResources()};v.recreate=function(){this.attached&&this._createResources()};v.recreateGeometry=function(){if(this._resourceFactory.recreateGeometry){var c=this._resourceFactory.view._stage;if(null!=this._resources&&c){var w=this._resources.object;this._resources.external.forEach(B=>{B.type!==x.ContentObjectType.Mesh&&B.type!==x.ContentObjectType.Line&&B.type!==x.ContentObjectType.Point||c.remove(B)});
w.removeAllGeometries();this._resourceFactory.recreateGeometry(this._resources.external,w,this._resources.layer);this._resources.external.forEach(B=>{B.type!==x.ContentObjectType.Mesh&&B.type!==x.ContentObjectType.Line&&B.type!==x.ContentObjectType.Point||c.add(B)})}}else this.recreate()};v._createOrDestroyResources=function(){this._attached?this._resources||this._createResources():this._destroyResources()};v._createResources=function(){this._destroyResources();var c=this._resourceFactory;const w=
c.view,B=w._stage;if(B){var u=new k.WebGLLayer(B,{pickable:!1,updatePolicy:n.UpdatePolicy.SYNC}),b=new m.Object3D({castShadow:!1}),d=c.createResources(b,u);d.forEach(h=>{B.add(h);h instanceof p.Texture&&B.loadImmediate(h)});B.add(b);u.add(b);var l=c.cameraChanged;c=l?e.watch(()=>w.state.camera,h=>l(h),e.initial):null;this._resources={layer:u,object:b,external:d,cameraHandle:c};this._syncVisible()}};v._destroyResources=function(){if(null!=this._resources){var c=this._resourceFactory.view._stage;c&&
(c.remove(this._resources.object),this._resources.layer.destroy(),this._resources.external.forEach(w=>c.remove(w)));this._resources.object.dispose();this._resources.cameraHandle?.remove();this._resourceFactory.destroyResources(this._resources.external);this._resources=null}};v._syncVisible=function(){null!=this._resources&&(this._resources.object.visible=this._visible)};r._createClass(g,[{key:"object",get:function(){return null!=this._resources?this._resources.object:null}},{key:"resources",get:function(){return null!=
this._resources?this._resources.external:null}},{key:"visible",get:function(){return this._visible},set:function(c){c!==this._visible&&(this._visible=c,this._syncVisible())}},{key:"attached",get:function(){return this._attached},set:function(c){c!==this._attached&&(this._attached=c,this._createOrDestroyResources())}}]);return g}();a.VisualElementResources=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/LaserlineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/lineSegment ./VisualElement ../../support/LaserLineRenderer ../../../../chunks/Laserlines.glsl".split(" "),
function(a,r,e,x,m,p,n,k){p=function(g){function v(w){var B=g.call(this,w.view)||this;B._angleCutoff=k.defaultAngleCutoff;B._style={};B._heightManifoldTarget=x.create();B._heightManifoldEnabled=!1;B._intersectsLine=m.create();B._intersectsLineEnabled=!1;B._intersectsLineInfinite=!1;B._lineVerticalPlaneSegment=null;B._pathVerticalPlaneBuffers=null;B._pointDistanceLine=null;B.applyProps(w);return B}r._inherits(v,g);var c=v.prototype;c.createResources=function(){this._ensureRenderer()};c.destroyResources=
function(){this._disposeRenderer()};c.updateVisibility=function(){this._syncRenderer();this._syncHeightManifold();this._syncIntersectsLine();this._syncPathVerticalPlane();this._syncLineVerticalPlane();this._syncPointDistance()};c._syncRenderer=function(){this.attached&&this.visible&&(this._intersectsLineEnabled||this._heightManifoldEnabled||null!=this._pointDistanceLine||null!=this._pathVerticalPlaneBuffers)?this._ensureRenderer():this._disposeRenderer()};c._ensureRenderer=function(){null==this._renderer&&
(this._renderer=new n.LaserLineRenderer({renderCoordsHelper:this.view.renderCoordsHelper},{contrastControlEnabled:!0}),this._renderer.viewingMode=this.view.state.viewingMode,this._syncStyle(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncIntersectsLineInfinite(),this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this._renderer.renderSlots,this._renderer))};c._syncStyle=function(){null!=
this._renderer&&(this._renderer.setParameters(this._style),null!=this._style.intersectsLineRadius&&(this._renderer.intersectsLineRadius=this._style.intersectsLineRadius))};c._syncAngleCutoff=function(){null!=this._renderer&&this._renderer.setParameters({angleCutoff:this._angleCutoff})};c._syncHeightManifold=function(){null!=this._renderer&&(this._renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this._renderer.heightManifoldTarget=this._heightManifoldTarget))};
c._syncIntersectsLine=function(){null!=this._renderer&&(this._renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this._renderer.intersectsLineSegment=this._intersectsLine))};c._syncIntersectsLineInfinite=function(){null!=this._renderer&&(this._renderer.intersectsLineInfinite=this._intersectsLineInfinite)};c._syncPathVerticalPlane=function(){null!=this._renderer&&(this._renderer.pathVerticalPlaneEnabled=null!=this._pathVerticalPlaneBuffers&&this.visible,
null!=this._pathVerticalPlaneBuffers&&(this._renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))};c._syncLineVerticalPlane=function(){null!=this._renderer&&(this._renderer.lineVerticalPlaneEnabled=null!=this._lineVerticalPlaneSegment&&this.visible,null!=this._lineVerticalPlaneSegment&&(this._renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))};c._syncPointDistance=function(){if(null!=this._renderer){var w=this._pointDistanceLine,B=null!=w;this._renderer.pointDistanceEnabled=
B&&null!=w.target&&this.visible;B&&(this._renderer.pointDistanceOrigin=w.origin,null!=w.target&&(this._renderer.pointDistanceTarget=w.target))}};c._disposeRenderer=function(){null!=this._renderer&&this.view._stage&&(this.view._stage.removeRenderPlugin(this._renderer),this._renderer=null)};r._createClass(v,[{key:"testData",get:function(){return this._renderer}},{key:"angleCutoff",get:function(){return this._angleCutoff},set:function(w){this._angleCutoff!==w&&(this._angleCutoff=w,this._syncAngleCutoff())}},
{key:"style",get:function(){return this._style},set:function(w){this._style=w;this._syncStyle()}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldEnabled?this._heightManifoldTarget:null},set:function(w){null!=w?(e.copy(this._heightManifoldTarget,w),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1;this._syncRenderer();this._syncHeightManifold()}},{key:"intersectsWorldUpAtLocation",set:function(w){if(null==w)this.intersectsLine=null;else{var B=this.view.renderCoordsHelper.worldUpAtPosition(w,
f);this.intersectsLine=m.fromValues(w,B);this.intersectsLineInfinite=!0}}},{key:"intersectsLine",get:function(){return this._intersectsLineEnabled?this._intersectsLine:null},set:function(w){null!=w?(m.copy(w,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1;this._syncIntersectsLine();this._syncRenderer()}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(w){this._intersectsLineInfinite=w;this._syncIntersectsLineInfinite()}},
{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(w){this._lineVerticalPlaneSegment=null!=w?m.copy(w):null;this._syncLineVerticalPlane();this._syncRenderer()}},{key:"pathVerticalPlane",get:function(){return this._pathVerticalPlaneBuffers},set:function(w){this._pathVerticalPlaneBuffers=w;this._syncPathVerticalPlane();this._syncLineVerticalPlane();this._syncPointDistance();this._syncRenderer()}},{key:"pointDistanceLine",get:function(){return this._pointDistanceLine},
set:function(w){this._pointDistanceLine=null!=w?{origin:x.clone(w.origin),target:w.target?x.clone(w.target):null}:null;this._syncPointDistance();this._syncRenderer()}}]);return v}(p.VisualElement);const f=x.create();a.LaserlineVisualElement=p;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/LaserLineRenderer":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec3 ../../../geometry/support/clipRay ../../../geometry/support/frustum ../../../geometry/support/lineSegment ../../../geometry/support/ray ../../ViewingMode ./LaserlinePathData ../webgl-engine/lib/glUtil3D ../webgl-engine/lib/RenderSlot ../webgl-engine/materials/internal/MaterialUtil ../webgl-engine/shaders/LaserlinePathTechnique ../webgl-engine/shaders/LaserlinePathTechniqueConfiguration ../webgl-engine/shaders/LaserlineTechnique ../webgl-engine/shaders/LaserlineTechniqueConfiguration ../../webgl/enums".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l){let h=function(){function y(C,D={contrastControlEnabled:!1}){this._config=D;this._technique=null;this._intersectsLineInfinite=this._intersectsLineEnabled=this._lineVerticalPlaneEnabled=this._pointDistanceEnabled=this._heightManifoldEnabled=!1;this._viewingMode=f.ViewingMode.Local;this._pathVerticalPlaneEnabled=!1;this._pathTechnique=this._pathVerticalPlaneData=null;this.canRender=!0;this._passParameters=w.copyParameters(C,new b.LaserlinePassParameters)}
var q=y.prototype;q.setParameters=function(C){w.updateParameters(this._passParameters,C)&&this._requestRender()};q.initializeRenderContext=function(C){this._context=C;this._quadVAO=v.createQuadVAO(C.renderContext.rctx);this._techniqueRepository=C.techniqueRepository;this._techniqueConfig=new d.LaserlineTechniqueConfiguration;C=new u.LaserlinePathTechniqueConfiguration;C.contrastControlEnabled=this._config.contrastControlEnabled;this._pathTechnique=this._techniqueRepository.acquire(B.LaserlinePathTechnique,
C)};q.uninitializeRenderContext=function(){this._quadVAO=e.disposeMaybe(this._quadVAO);this._technique=e.releaseMaybe(this._technique);this._pathVerticalPlaneData=e.disposeMaybe(this._pathVerticalPlaneData);this._pathTechnique=e.releaseMaybe(this._pathTechnique)};q.prepareTechnique=function(){return this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled?(this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled,this._techniqueConfig.lineVerticalPlaneEnabled=
this.lineVerticalPlaneEnabled,this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled,this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled,this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._techniqueConfig.spherical=this._viewingMode===f.ViewingMode.Global,this._technique=this._techniqueRepository.releaseAndAcquire(b.LaserlineTechnique,this._techniqueConfig,this._technique)):this._pathTechnique};q.render=function(C,D){(this.heightManifoldEnabled||
this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled)&&this._renderUnified(C,D);this.pathVerticalPlaneEnabled&&this._renderPath(C)};q._renderUnified=function(C,D){const F=C.rctx;this._updatePassParameters(C);F.bindTechnique(D,this._passParameters,C.bindParameters);F.bindVAO(this._quadVAO);F.drawArrays(l.PrimitiveType.TRIANGLE_STRIP,0,4)};q._renderPath=function(C){null!=this._pathVerticalPlaneData&&null!=this._pathTechnique&&(C.rctx.bindTechnique(this._pathTechnique,
{...this._passParameters,origin:this._pathVerticalPlaneData.origin},C.bindParameters),this._pathVerticalPlaneData.draw(C.rctx))};q._updatePassParameters=function(C){this._intersectsLineEnabled&&(C=C.bindParameters.camera,this._intersectsLineInfinite?(m.fromRay(k.wrap(this._passParameters.intersectsLineSegment.origin,this._passParameters.intersectsLineSegment.vector),t),t.c0=-Number.MAX_VALUE,p.intersectClipRay(C.frustum,t)&&(m.getStart(t,this._passParameters.lineStartWorld),m.getEnd(t,this._passParameters.lineEndWorld))):
(x.copy(this._passParameters.lineStartWorld,this._passParameters.intersectsLineSegment.origin),x.add(this._passParameters.lineEndWorld,this._passParameters.intersectsLineSegment.origin,this._passParameters.intersectsLineSegment.vector)))};q._requestRender=function(){this._context&&this._context.requestRender()};r._createClass(y,[{key:"renderSlots",get:function(){return[this._config.contrastControlEnabled?c.RenderSlot.LASERLINES_CONTRAST_CONTROL:c.RenderSlot.LASERLINES]}},{key:"needsLinearDepth",get:function(){return!0}},
{key:"heightManifoldEnabled",get:function(){return this._heightManifoldEnabled},set:function(C){this._heightManifoldEnabled!==C&&(this._heightManifoldEnabled=C,this._requestRender())}},{key:"heightManifoldTarget",get:function(){return this._passParameters.heightManifoldTarget},set:function(C){x.copy(this._passParameters.heightManifoldTarget,C);this._requestRender()}},{key:"pointDistanceEnabled",get:function(){return this._pointDistanceEnabled},set:function(C){C!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=
C,this._requestRender())}},{key:"pointDistanceTarget",get:function(){return this._passParameters.pointDistanceTarget},set:function(C){x.copy(this._passParameters.pointDistanceTarget,C);this._requestRender()}},{key:"pointDistanceOrigin",get:function(){return this._passParameters.pointDistanceOrigin},set:function(C){x.copy(this._passParameters.pointDistanceOrigin,C);this._requestRender()}},{key:"lineVerticalPlaneEnabled",get:function(){return this._lineVerticalPlaneEnabled},set:function(C){C!==this._lineVerticalPlaneEnabled&&
(this._lineVerticalPlaneEnabled=C,this._requestRender())}},{key:"lineVerticalPlaneSegment",get:function(){return this._passParameters.lineVerticalPlaneSegment},set:function(C){n.copy(C,this._passParameters.lineVerticalPlaneSegment);this._requestRender()}},{key:"intersectsLineEnabled",get:function(){return this._intersectsLineEnabled},set:function(C){C!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=C,this._requestRender())}},{key:"intersectsLineSegment",get:function(){return this._passParameters.intersectsLineSegment},
set:function(C){n.copy(C,this._passParameters.intersectsLineSegment);this._requestRender()}},{key:"intersectsLineRadius",get:function(){return this._passParameters.intersectsLineRadius},set:function(C){C!==this._passParameters.intersectsLineRadius&&(this._passParameters.intersectsLineRadius=C,this._requestRender())}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(C){C!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=C,this._requestRender())}},
{key:"viewingMode",get:function(){return this._viewingMode},set:function(C){C!==this._viewingMode&&(this._viewingMode=C,this._requestRender())}},{key:"pathVerticalPlaneEnabled",get:function(){return this._pathVerticalPlaneEnabled},set:function(C){C!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=C,null!=this._pathVerticalPlaneData&&this._requestRender())}},{key:"pathVerticalPlaneVertices",set:function(C){null==this._pathVerticalPlaneData&&(this._pathVerticalPlaneData=new g.LaserlinePathData(this._passParameters.renderCoordsHelper));
this._pathVerticalPlaneData.vertices=C;this.pathVerticalPlaneEnabled&&this._requestRender()}},{key:"pathVerticalPlaneBuffers",set:function(C){null==this._pathVerticalPlaneData&&(this._pathVerticalPlaneData=new g.LaserlinePathData(this._passParameters.renderCoordsHelper));this._pathVerticalPlaneData.buffers=C;this.pathVerticalPlaneEnabled&&this._requestRender()}}]);return y}();const t=m.create();a.LaserLineRenderer=h;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/LaserlinePathData":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/support/DoubleArray ./buffer/glUtil ./buffer/InterleavedLayout ../webgl-engine/lib/VertexArrayObject ../webgl-engine/lib/VertexAttribute ../webgl-engine/shaders/LaserlinePathTechnique ../../webgl/BufferObject ../../webgl/enums".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c){let w=function(){function d(h){this._renderCoordsHelper=h;this._buffers=null;this._origin=x.create();this._dirty=!1;this._count=0;this._vao=null}var l=d.prototype;l.draw=function(h){const t=this._ensureVAO(h);null!=t&&(h.bindVAO(t),h.drawArrays(c.PrimitiveType.TRIANGLES,0,this._count))};l.dispose=function(){null!=this._vao&&this._vao.dispose()};l._ensureVAO=function(h){if(null==this._buffers)return null;null==this._vao&&(this._vao=this._createVAO(h,this._buffers));
this._ensureVertexData(this._vao,this._buffers);return this._vao};l._createVAO=function(h,t){t=this._createDataBuffer(t);this._dirty=!1;return new k.VertexArrayObject(h,g.attributeLocations,{data:p.glLayout(b)},{data:v.BufferObject.createVertex(h,c.Usage.STATIC_DRAW,t)})};l._ensureVertexData=function(h,t){this._dirty&&(t=this._createDataBuffer(t),h.vertexBuffers.data?.setData(t),this._dirty=!1)};l._numberOfRenderVertices=function(h){return 6*(h.length/3-1)};l._createDataBuffer=function(h){var t=h.reduce((I,
G)=>I+this._numberOfRenderVertices(G),0);this._count=t;t=b.createBuffer(t);const y=this._origin;let q=0,C=0;for(const I of h){for(h=0;h<I.length;h+=3){var D=e.set(u,I[h],I[h+1],I[h+2]);0===h?C=this._renderCoordsHelper.getAltitude(D):this._renderCoordsHelper.setAltitude(D,C);var F=this._renderCoordsHelper.worldUpAtPosition(D,B);const G=q+2*h;D=e.subtract(u,D,y);if(h<I.length-3){t.up.setVec(G,F);t.up.setVec(G+3,F);t.up.setVec(G+5,F);for(let z=0;6>z;z++)t.start.setVec(G+z,D);t.extrude.setValues(G,0,
-1);t.extrude.setValues(G+1,1,-1);t.extrude.setValues(G+2,1,1);t.extrude.setValues(G+3,0,-1);t.extrude.setValues(G+4,1,1);t.extrude.setValues(G+5,0,1)}if(0<h)for(t.up.setVec(G-2,F),t.up.setVec(G-4,F),t.up.setVec(G-5,F),F=-6;0>F;F++)t.end.setVec(G+F,D)}q+=this._numberOfRenderVertices(I)}return t.buffer};r._createClass(d,[{key:"vertices",set:function(h){const t=m.newDoubleArray(3*h.length);let y=0;for(const q of h)t[y++]=q[0],t[y++]=q[1],t[y++]=q[2];this.buffers=[t]}},{key:"buffers",set:function(h){this._buffers=
h;if(0<this._buffers.length){h=this._buffers[0];const t=3*Math.floor(h.length/3/2);e.set(this._origin,h[t],h[t+1],h[t+2])}else e.set(this._origin,0,0,0);this._dirty=!0}},{key:"origin",get:function(){return this._origin}}]);return d}();const B=x.create(),u=x.create(),b=n.newLayout().vec3f(f.VertexAttribute.START).vec3f(f.VertexAttribute.END).vec3f(f.VertexAttribute.UP).vec2f(f.VertexAttribute.EXTRUDE);a.LaserlinePathData=w;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/LaserlinePathTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/Program ../lib/VertexAttribute ../../../../chunks/LaserlinePath.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(a,r,e,x,m,p,n,k,f,g){m=function(c){function w(){return c.apply(this,arguments)||this}e._inherits(w,c);var B=w.prototype;B.initializeProgram=function(u){return new p.Program(u.rctx,w.shader.get().build(this.configuration),v)};B.initializePipeline=function(){return g.makePipelineState({blending:g.simpleBlendingParams(f.BlendFactor.ONE,f.BlendFactor.ONE_MINUS_SRC_ALPHA),colorWrite:g.defaultColorWriteParams})};return e._createClass(w)}(m.ShaderTechnique);m.shader=new x.ReloadableShaderModule(k.LaserlinePath,
()=>new Promise((c,w)=>a(["./LaserlinePath.glsl"],c,w)));const v=new Map([[n.VertexAttribute.START,0],[n.VertexAttribute.END,1],[n.VertexAttribute.UP,2],[n.VertexAttribute.EXTRUDE,3]]);r.LaserlinePathTechnique=m;r.attributeLocations=v;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/LaserlinePath.glsl":function(){define("exports ./mat4 ./mat4f64 ./vec2 ./vec2f64 ../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl ../views/3d/webgl-engine/core/shaderModules/Float2PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/lib/VertexAttribute".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c){function w(b){const d=new v.ShaderBuilder;d.include(p.Laserline,b);const {vertex:l,fragment:h}=d;l.uniforms.add(new g.Matrix4PassUniform("modelView",(t,y)=>r.translate(u,y.camera.viewMatrix,t.origin)),new g.Matrix4PassUniform("proj",(t,y)=>y.camera.projectionMatrix),new k.FloatPassUniform("glowWidth",(t,y)=>t.glowWidth*y.camera.pixelRatio),new n.Float2PassUniform("pixelToNDC",(t,y)=>x.set(B,2/y.camera.fullViewport[2],2/y.camera.fullViewport[3])));d.attributes.add(c.VertexAttribute.START,
"vec3");d.attributes.add(c.VertexAttribute.END,"vec3");d.attributes.add(c.VertexAttribute.UP,"vec3");d.attributes.add(c.VertexAttribute.EXTRUDE,"vec2");d.varyings.add("uv","vec2");d.varyings.add("vViewStart","vec3");d.varyings.add("vViewEnd","vec3");d.varyings.add("vViewPlane","vec4");l.code.add(f.glsl`void main() {
vec3 pos = mix(start, end, extrude.x);
vec4 viewPos = modelView * vec4(pos, 1);
vec4 projPos = proj * viewPos;
vec2 ndcPos = projPos.xy / projPos.w;
vec3 viewUp = (modelView * vec4(extrude.y * up, 0)).xyz;
vec4 projPosUp = proj * vec4(viewPos.xyz + viewUp, 1);
vec2 projExtrudeDir = normalize(projPosUp.xy / projPosUp.w - ndcPos);
vec2 lxy = abs(sign(projExtrudeDir) - ndcPos);
ndcPos += length(lxy) * projExtrudeDir;
vec3 worldPlaneNormal = normalize(cross(up, normalize(end - start)));
vec3 viewPlaneNormal = (modelView * vec4(worldPlaneNormal, 0)).xyz;
vViewStart = (modelView * vec4(start, 1)).xyz;
vViewEnd = (modelView * vec4(end, 1)).xyz;
vViewPlane = vec4(viewPlaneNormal, -dot(viewPlaneNormal, vViewStart));
float xPaddingPixels = sign(dot(viewPlaneNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;
ndcPos.x += xPaddingPixels * pixelToNDC.x;
uv = ndcPos * 0.5 + 0.5;
gl_Position = vec4(ndcPos, 0, 1);
}`);h.uniforms.add(new k.FloatPassUniform("perScreenPixelRatio",(t,y)=>y.camera.perScreenPixelRatio));h.code.add(f.glsl`float planeDistancePixels(vec4 plane, vec3 pos, vec3 start, vec3 end) {
vec3 origin = mix(start, end, 0.5);
vec3 basis = end - origin;
vec3 posAtOrigin = pos - origin;
float x = dot(normalize(basis), posAtOrigin);
float y = dot(plane.xyz, posAtOrigin);
float dx = max(abs(x) - length(basis), 0.0);
float dy = y;
float dist = length(vec2(dx, dy));
float width = fwidth(y);
float maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;
float pixelDist = dist / min(width, maxPixelDistance);
return abs(pixelDist);
}
void main() {
vec3 pos;
vec3 normal;
float depthDiscontinuityAlpha;
if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
discard;
}
float distance = planeDistancePixels(vViewPlane, pos, vViewStart, vViewEnd);
vec4 color = laserlineProfile(distance);
float alpha = 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, vViewPlane.xyz)));
fragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);
}`);return d}const B=m.create(),u=e.create();e=Object.freeze(Object.defineProperty({__proto__:null,build:w},Symbol.toStringTag,{value:"Module"}));a.LaserlinePath=e;a.build=w})},"esri/views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl":function(){define("exports ./output/ReadLinearDepth.glsl ./util/CameraSpace.glsl ../shaderModules/Float2PassUniform ../shaderModules/Float3PassUniform ../shaderModules/FloatPassUniform ../shaderModules/interfaces ../shaderModules/Texture2DPassUniform".split(" "),
function(a,r,e,x,m,p,n,k){a.Laserline=function(f,g){const v=f.fragment;v.include(r.ReadLinearDepth);f.include(e.CameraSpace);v.uniforms.add(new p.FloatPassUniform("globalAlpha",c=>c.globalAlpha),new m.Float3PassUniform("glowColor",c=>c.glowColor),new p.FloatPassUniform("glowWidth",(c,w)=>c.glowWidth*w.camera.pixelRatio),new p.FloatPassUniform("glowFalloff",c=>c.glowFalloff),new m.Float3PassUniform("innerColor",c=>c.innerColor),new p.FloatPassUniform("innerWidth",(c,w)=>c.innerWidth*w.camera.pixelRatio),
new k.Texture2DPassUniform("depthMap",(c,w)=>w.linearDepthTexture),new x.Float2PassUniform("nearFar",(c,w)=>w.camera.nearFar),new k.Texture2DPassUniform("frameColor",(c,w)=>w.mainColorTexture));v.code.add(n.glsl`vec4 blendPremultiplied(vec4 source, vec4 dest) {
float oneMinusSourceAlpha = 1.0 - source.a;
return vec4(
source.rgb + dest.rgb * oneMinusSourceAlpha,
source.a + dest.a * oneMinusSourceAlpha
);
}`);v.code.add(n.glsl`vec4 premultipliedColor(vec3 rgb, float alpha) {
return vec4(rgb * alpha, alpha);
}`);v.code.add(n.glsl`vec4 laserlineProfile(float dist) {
if (dist > glowWidth) {
return vec4(0.0);
}
float innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));
float glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);
return blendPremultiplied(
premultipliedColor(innerColor, innerAlpha),
premultipliedColor(glowColor, glowAlpha)
);
}`);v.code.add(n.glsl`bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {
float depth = linearDepthFromTexture(depthMap, uv, nearFar);
if (-depth == nearFar[0]) {
return false;
}
pos = reconstructPosition(gl_FragCoord.xy, depth);
normal = normalize(cross(dFdx(pos), dFdy(pos)));
float ddepth = fwidth(depth);
depthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);
return true;
}`);g.contrastControlEnabled?(v.uniforms.add(new p.FloatPassUniform("globalAlphaContrastBoost",c=>null!=c.globalAlphaContrastBoost?c.globalAlphaContrastBoost:1)),v.code.add(n.glsl`float rgbToLuminance(vec3 color) {
return dot(vec3(0.2126, 0.7152, 0.0722), color);
}
vec4 laserlineOutput(vec4 color) {
float backgroundLuminance = rgbToLuminance(texture(frameColor, uv).rgb);
float alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);
return color * alpha;
}`)):v.code.add(n.glsl`vec4 laserlineOutput(vec4 color) {
return color * globalAlpha;
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/LaserlinePathTechniqueConfiguration":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../core/shaderTechnique/ShaderTechniqueConfiguration"],function(a,r,e,x){let m=function(p){function n(){var k=p.apply(this,arguments)||this;k.contrastControlEnabled=!1;return k}r._inherits(n,p);return r._createClass(n)}(x.ShaderTechniqueConfiguration);
e.__decorate([x.parameter()],m.prototype,"contrastControlEnabled",void 0);a.LaserlinePathTechniqueConfiguration=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/LaserlineTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../chunks/vec3f64 ../../../../geometry/support/lineSegment ../core/shaderModules/interfaces ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/DefaultVertexAttributeLocations ../lib/Program ../../../../chunks/Laserlines.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B){n=function(u){function b(){var d=u.apply(this,arguments)||this;d.innerColor=m.fromValues(1,1,1);d.innerWidth=1;d.glowColor=m.fromValues(1,.5,0);d.glowWidth=8;d.glowFalloff=8;d.globalAlpha=.75;d.globalAlphaContrastBoost=2;d.angleCutoff=x.deg2rad(6);d.pointDistanceOrigin=m.create();d.pointDistanceTarget=m.create();d.lineVerticalPlaneSegment=p.create();d.intersectsLineSegment=p.create();d.intersectsLineRadius=3;d.heightManifoldTarget=m.create();d.lineStartWorld=
m.create();d.lineEndWorld=m.create();return d}e._inherits(b,u);return e._createClass(b)}(n.NoParameters);f=function(u){function b(){return u.apply(this,arguments)||this}e._inherits(b,u);var d=b.prototype;d.initializeProgram=function(l){return new v.Program(l.rctx,b.shader.get().build(this.configuration),g.Default3D)};d.initializePipeline=function(){return B.makePipelineState({blending:B.simpleBlendingParams(w.BlendFactor.ONE,w.BlendFactor.ONE_MINUS_SRC_ALPHA),colorWrite:B.defaultColorWriteParams})};
return e._createClass(b)}(f.ShaderTechnique);f.shader=new k.ReloadableShaderModule(c.LaserlinesShader,()=>new Promise((u,b)=>a(["./Laserlines.glsl"],u,b)));r.LaserlinePassParameters=n;r.LaserlineTechnique=f;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/Laserlines.glsl":function(){define("exports ../core/mathUtils ./vec2 ./vec2f64 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/lineSegment ../geometry/support/plane ./sphere ../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl ../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl ../views/3d/webgl-engine/core/shaderModules/Float2PassUniform ../views/3d/webgl-engine/core/shaderModules/Float3PassUniform ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h){function t(H){const L=new h.ShaderBuilder;L.include(w.ScreenSpacePass);L.include(c.Laserline,H);const E=L.fragment;if(H.lineVerticalPlaneEnabled||H.heightManifoldEnabled)E.uniforms.add(new d.FloatPassUniform("maxPixelDistance",(M,N)=>H.heightManifoldEnabled?2*N.camera.computeScreenPixelSizeAt(M.heightManifoldTarget):2*N.camera.computeScreenPixelSizeAt(M.lineVerticalPlaneSegment.origin))),E.code.add(l.glsl`float planeDistancePixels(vec4 plane, vec3 pos) {
float dist = dot(plane.xyz, pos) + plane.w;
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}`),H.spherical?(E.uniforms.add(new b.Float4PassUniform("heightManifoldOrigin",(M,N)=>{m.transformMat4(F,M.heightManifoldTarget,N.camera.viewMatrix);m.transformMat4(z,[0,0,0],N.camera.viewMatrix);m.subtract(z,z,F);m.normalize(I,z);I[3]=m.length(z);return I}),new u.Float3PassUniform("globalOrigin",(M,N)=>m.transformMat4(F,[0,0,0],N.camera.viewMatrix)),new d.FloatPassUniform("cosSphericalAngleThreshold",(M,N)=>1-Math.max(2,m.distance(N.camera.eye,M.heightManifoldTarget)*N.camera.perRenderPixelRatio)/
m.length(M.heightManifoldTarget))),E.code.add(l.glsl`float globeDistancePixels(float posInGlobalOriginLength) {
float dist = abs(posInGlobalOriginLength - heightManifoldOrigin.w);
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}
float heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {
vec3 posInGlobalOriginNorm = normalize(globalOrigin - pos);
float cosAngle = dot(posInGlobalOriginNorm, heightManifoldOrigin.xyz);
vec3 posInGlobalOrigin = globalOrigin - pos;
float posInGlobalOriginLength = length(posInGlobalOrigin);
float sphericalDistance = globeDistancePixels(posInGlobalOriginLength);
float planarDistance = planeDistancePixels(heightPlane, pos);
return cosAngle < cosSphericalAngleThreshold ? sphericalDistance : planarDistance;
}`)):E.code.add(l.glsl`float heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {
return planeDistancePixels(heightPlane, pos);
}`);H.pointDistanceEnabled&&(E.uniforms.add(new d.FloatPassUniform("maxPixelDistance",(M,N)=>2*N.camera.computeScreenPixelSizeAt(M.pointDistanceTarget))),E.code.add(l.glsl`float sphereDistancePixels(vec4 sphere, vec3 pos) {
float dist = distance(sphere.xyz, pos) - sphere.w;
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}`));H.intersectsLineEnabled&&(E.uniforms.add(new d.FloatPassUniform("perScreenPixelRatio",(M,N)=>N.camera.perScreenPixelRatio)),E.code.add(l.glsl`float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {
float dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);
return abs(dist) - radius;
}`));(H.lineVerticalPlaneEnabled||H.intersectsLineEnabled)&&E.code.add(l.glsl`bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {
vec3 dir = end - start;
float t2 = dot(dir, pos - start);
float l2 = dot(dir, dir);
return t2 >= 0.0 && t2 <= l2;
}`);E.code.add(l.glsl`void main() {
vec3 pos;
vec3 normal;
float depthDiscontinuityAlpha;
if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
discard;
}
vec4 color = vec4(0, 0, 0, 0);`);if(H.heightManifoldEnabled){E.uniforms.add(new B.Float2PassUniform("angleCutoff",N=>y(N)),new b.Float4PassUniform("heightPlane",(N,T)=>q(N.heightManifoldTarget,N.renderCoordsHelper.worldUpAtPosition(N.heightManifoldTarget,F),T.camera.viewMatrix)));const M=H.spherical?l.glsl`normalize(globalOrigin - pos)`:l.glsl`heightPlane.xyz`;E.code.add(l.glsl`
    {
      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, ${M})));
      vec4 heightManifoldColor = laserlineProfile(heightManifoldDistancePixels(heightPlane, pos));
      color = max(color, heightManifoldColor * heightManifoldAlpha);
    }
    `)}H.pointDistanceEnabled&&(E.uniforms.add(new B.Float2PassUniform("angleCutoff",M=>y(M)),new b.Float4PassUniform("pointDistanceSphere",(M,N)=>{m.transformMat4(J,M.pointDistanceOrigin,N.camera.viewMatrix);J[3]=m.distance(M.pointDistanceOrigin,M.pointDistanceTarget);return J})),E.code.add(l.glsl`{
float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);
vec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);
float pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));
color = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);
}`));H.lineVerticalPlaneEnabled&&(E.uniforms.add(new B.Float2PassUniform("angleCutoff",M=>y(M)),new b.Float4PassUniform("lineVerticalPlane",(M,N)=>{var T=f.pointAt(M.lineVerticalPlaneSegment,.5,F);T=M.renderCoordsHelper.worldUpAtPosition(T,G);const Y=m.normalize(z,M.lineVerticalPlaneSegment.vector);T=m.cross(I,T,Y);m.normalize(T,T);return q(M.lineVerticalPlaneSegment.origin,T,N.camera.viewMatrix)}),new u.Float3PassUniform("lineVerticalStart",(M,N)=>{const T=m.copy(F,M.lineVerticalPlaneSegment.origin);
M.renderCoordsHelper.setAltitude(T,0);return m.transformMat4(T,T,N.camera.viewMatrix)}),new u.Float3PassUniform("lineVerticalEnd",(M,N)=>{const T=m.add(F,M.lineVerticalPlaneSegment.origin,M.lineVerticalPlaneSegment.vector);M.renderCoordsHelper.setAltitude(T,0);return m.transformMat4(T,T,N.camera.viewMatrix)})),E.code.add(l.glsl`{
if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {
float lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);
vec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);
float lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));
color = max(color, lineVerticalColor * lineVerticalAlpha);
}
}`));H.intersectsLineEnabled&&(E.uniforms.add(new B.Float2PassUniform("angleCutoff",M=>y(M)),new u.Float3PassUniform("intersectsLineStart",(M,N)=>m.transformMat4(F,M.lineStartWorld,N.camera.viewMatrix)),new u.Float3PassUniform("intersectsLineEnd",(M,N)=>m.transformMat4(F,M.lineEndWorld,N.camera.viewMatrix)),new u.Float3PassUniform("intersectsLineDirection",(M,N)=>{m.copy(I,M.intersectsLineSegment.vector);I[3]=0;return m.normalize(F,n.transformMat4(I,I,N.camera.viewMatrix))}),new d.FloatPassUniform("intersectsLineRadius",
M=>M.intersectsLineRadius)),E.code.add(l.glsl`{
if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {
float intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);
vec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);
float intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));
color = max(color, intersectsLineColor * intersectsLineAlpha);
}
}`));E.code.add(l.glsl`fragColor = laserlineOutput(color * depthDiscontinuityAlpha);
}`);return L}function y(H){return e.set(D,Math.cos(H.angleCutoff),Math.cos(Math.max(0,H.angleCutoff-r.deg2rad(2))))}function q(H,L,E){m.transformMat4(A,H,E);m.copy(I,L);I[3]=0;n.transformMat4(I,I,E);return g.fromPositionAndNormal(A,I,K)}const C=r.deg2rad(6),D=x.create(),F=p.create(),I=k.create(),G=p.create(),z=p.create(),A=p.create(),K=g.create(),J=v.create();x=Object.freeze(Object.defineProperty({__proto__:null,build:t,defaultAngleCutoff:C},Symbol.toStringTag,{value:"Module"}));a.LaserlinesShader=
x;a.build=t;a.defaultAngleCutoff=C})},"esri/views/3d/webgl-engine/shaders/LaserlineTechniqueConfiguration":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../core/shaderTechnique/ShaderTechniqueConfiguration","./LaserlinePathTechniqueConfiguration"],function(a,r,e,x,m){m=function(p){function n(){var k=p.apply(this,arguments)||this;k.heightManifoldEnabled=!1;k.pointDistanceEnabled=!1;k.lineVerticalPlaneEnabled=!1;k.intersectsLineEnabled=!1;
k.spherical=!1;return k}r._inherits(n,p);return r._createClass(n)}(m.LaserlinePathTechniqueConfiguration);e.__decorate([x.parameter()],m.prototype,"heightManifoldEnabled",void 0);e.__decorate([x.parameter()],m.prototype,"pointDistanceEnabled",void 0);e.__decorate([x.parameter()],m.prototype,"lineVerticalPlaneEnabled",void 0);e.__decorate([x.parameter()],m.prototype,"intersectsLineEnabled",void 0);e.__decorate([x.parameter()],m.prototype,"spherical",void 0);a.LaserlineTechniqueConfiguration=m;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/ParallelLineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/reactiveUtils ../../../../core/screenUtils ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../../../layers/graphics/dehydratedFeatures ./EngineVisualElement ../../terrain/OverlayRenderer ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l){c=function(I){function G(A){var K=I.call(this,A)||this;K._location=k.create();K._direction=k.fromValues(1,0,0);K._width=1;K._offset=1;K._length=18;K._color=g.fromValues(1,0,1,1);K._renderOccluded=u.RenderOccludedFlag.OccludeAndTransparent;K.applyProps(A);return K}r._inherits(G,I);var z=G.prototype;z.createObject3DResourceFactory=function(A){return{view:A,createResources:K=>this._createObject3DResources(K),destroyResources:K=>this._destroyObject3DResources(K),
recreateGeometry:(K,J)=>this._recreateObject3DGeometry(K,J),cameraChanged:()=>this._updateGeometry()}};z.createDrapedResourceFactory=function(A){return{view:A,createResources:()=>this._createDrapedResources(),destroyResources:K=>this._destroyDrapedResources(K),recreateGeometry:K=>this._recreateDrapedGeometry(K)}};z.setDirectionFromPoints=function(A,K){n.normalize(this._direction,n.subtract(this._direction,K,A));this._updateGeometry()};z._createObject3DResources=function(A){const K=new l.RibbonLineMaterial(this.materialParameters),
J=[];this._createObject3DGeometry(K,A,J);return{material:K,geometries:J,forEach:H=>{H(K);J.forEach(H)}}};z._destroyObject3DResources=function(A){A.geometries.length=0;A.material.dispose()};z._recreateObject3DGeometry=function(A,K){A.geometries.length=0;this._createObject3DGeometry(A.material,K,A.geometries)};z._createObject3DGeometry=function(A,K,J){const [H,L]=this._createGeometries(A);K.addGeometry(H);K.addGeometry(L);J.push(H);J.push(L);this._updateVerticesObject3D(K)};z._createDrapedResources=
function(){const A=new l.RibbonLineMaterial(this.materialParameters),K=e.watch(()=>this.view.state.contentPixelRatio,()=>{this.drapedResources.recreateGeometry()});return{material:A,geometries:this._createDrapedGeometry(A),pixelRatioHandle:K}};z._destroyDrapedResources=function(A){A.pixelRatioHandle.remove();A.geometries=[];A.material.dispose()};z._recreateDrapedGeometry=function(A){A.geometries=this._createDrapedGeometry(A.material)};z._createDrapedGeometry=function(A){A=this._createGeometries(A);
this._updateVerticesDraped(A);return A.map(K=>new b.RenderGeometry(K))};z._createGeometries=function(A){return[B.createPolylineGeometry(A,[k.create(),k.create()]),B.createPolylineGeometry(A,[k.create(),k.create()])]};z._updateMaterial=function(){const {materialParameters:A}=this;this.object3dResources.resources?.material.setParameters(A);this.drapedResources.resources?.material.setParameters(A)};z._updateGeometry=function(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const A=this.object3dResources.object;
A&&this._updateVerticesObject3D(A)}};z._updateVerticesObject3D=function(A){const K=this.view.state.camera;K.projectToScreen(this.location,C);n.add(h,this.location,this.direction);K.projectToScreen(h,D);m.normalize(D,m.subtract(D,D,C));this._updateVertexAttributesObject3D(K,A,0,C,D,1);this._updateVertexAttributesObject3D(K,A,1,C,D,-1)};z._updateVertexAttributesObject3D=function(A,K,J,H,L,E){J=K.geometries[J];const M=J.getMutableAttribute(d.VertexAttribute.POSITION)?.data;if(M){var {start:N,end:T}=
this._computeStartEnd(L,H,E,this.offset,this.width,this.length);A.unprojectFromScreen(x.castScreenPointArray(N),h);M[0]=h[0];M[1]=h[1];M[2]=h[2];A.unprojectFromScreen(x.castScreenPointArray(T),h);M[3]=h[0];M[4]=h[1];M[5]=h[2];K.geometryVertexAttrsUpdated(J)}};z._updateVerticesDraped=function(A){const {view:{basemapTerrain:{overlayManager:K},state:{contentPixelRatio:J}}}=this,{location:H,width:L,length:E,offset:M}=this;var N=F;N.spatialReference=K.renderer.spatialReference;N.x=H[0];N.y=H[1];var T=
K.overlayPixelSizeInMapUnits(N)*J;N=L*T;const Y=E*T;T*=M;this._updateVertexAttributesDraped(A[0],N,Y,T,-1);this._updateVertexAttributesDraped(A[1],N,Y,T,1)};z._updateVertexAttributesDraped=function(A,K,J,H,L){const E=A.getMutableAttribute(d.VertexAttribute.POSITION)?.data;if(E){var {location:M,direction:N}=this,{start:T,end:Y}=this._computeStartEnd(N,M,L,H,K,J);E[0]=T[0];E[1]=T[1];E[2]=w.DRAPED_Z;E[3]=Y[0];E[4]=Y[1];E[5]=w.DRAPED_Z;A.invalidateBoundingInfo()}};z._computeStartEnd=function(A,K,J,H,
L,E){J=m.scale(t,m.set(t,A[1]*J,A[0]*-J),H+L/2);K=m.add(y,m.add(y,m.add(y,K,m.scale(y,A,E/2)),J),J);A=m.add(q,K,m.scale(q,A,-E));return{start:K,end:A}};r._createClass(G,[{key:"location",get:function(){return this._location},set:function(A){n.exactEquals(this._location,A)||(n.copy(this._location,A),this._updateGeometry())}},{key:"direction",get:function(){return this._direction},set:function(A){n.exactEquals(this._direction,A)||(n.copy(this._direction,A),this._updateGeometry())}},{key:"width",get:function(){return this._width},
set:function(A){A!==this._width&&(this._width=A,this._updateMaterial())}},{key:"offset",get:function(){return this._offset},set:function(A){A!==this._offset&&(this._offset=A,this._updateGeometry())}},{key:"length",get:function(){return this._length},set:function(A){A!==this._length&&(this._length=A,this._updateGeometry())}},{key:"color",get:function(){return this._color},set:function(A){f.exactEquals(A,this._color)||(f.copy(this._color,A),this._updateMaterial())}},{key:"renderOccluded",get:function(){return this._renderOccluded},
set:function(A){A!==this._renderOccluded&&(this._renderOccluded=A,this._updateMaterial())}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}}]);return G}(c.EngineVisualElement);const h=k.create(),t=p.create(),y=p.create(),q=p.create(),C=x.createScreenPointArray(),D=x.createScreenPointArray(),F=v.makeDehydratedPoint(0,0,void 0,null);a.ParallelLineVisualElement=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/interactive/visualElements/PointVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/projection ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/vectorStacks ./VisualElementResources ../../layers/graphics/elevationAlignmentUtils ../../layers/graphics/ElevationContext ../../support/engineContent/sdfPrimitives ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/HUDMaterial".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d){let l=function(){function q(D){this._geometry=this.view=null;this._size=3;this._color=n.fromValues(1,0,1,1);this._pixelSnappingEnabled=!0;this._primitive="square";this._outlineSize=1;this._outlineColor=n.fromValues(1,1,1,1);this._elevationInfo=null;this._resources=new v.VisualElementResources({view:D.view,createResources:I=>this._createResources(I),destroyResources:I=>this._destroyResources(I),recreateGeometry:(I,G)=>{I.geometry=this._recreateGeometry(G,
I.material)}});let F=!0;for(const I in D)I in this?"attached"===I?F=D[I]??!1:this[I]=D[I]:console.error("Cannot set unknown property",I);this.attached=F}var C=q.prototype;C.destroy=function(){this._resources.destroy()};C._updateMaterial=function(){const D=this._resources.resources;null!=D&&D.material.setParameters(this._materialParameters(D.texture.id))};C._updateSizeAttribute=function(){var D=this._resources.resources;const F=this._resources.object;if(null!=D&&null!=F&&(D=D.geometry,null!=D)){D=
D.getMutableAttribute(b.VertexAttribute.SIZE).data;var I=this._geometrySize;D[0]=I;D[1]=I;F.geometryVertexAttrsUpdated(F.geometries[0])}};C._materialParameters=function(D){return{color:this._color,textureIsSignedDistanceField:!0,distanceFieldBoundingBox:t,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:D,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled}};C._recreateGeometry=function(D,
F){F=this._createRenderGeometry(F);null!=F&&D.addGeometry(F);return F};C._createResources=function(D){const F=B.createTexture(this._primitive,this._preferredTextureSize),I=new d.HUDMaterial(this._materialParameters(F.id));D=this._recreateGeometry(D,I);return{material:I,texture:F,geometry:D,forEach(G){G(F);G(I);null!=this.geometry&&G(this.geometry)}}};C._destroyResources=function(D){D.geometry=null;D.material.dispose();D.texture.dispose()};C.calculateMapBounds=function(D){if(null==this._resources.resources||
null==this._resources.resources.geometry)return!1;const F=this._resources.resources.geometry.vertexAttributes.get(b.VertexAttribute.POSITION);k.projectVectorToVector(F.data,this.view.renderCoordsHelper.spatialReference,y,this.view.spatialReference);f.expandWithBuffer(D,y);return!0};C._createRenderGeometry=function(D){var F=this.geometry;if(null==F)return null;const {renderCoordsHelper:I,elevationProvider:G}=this.view;var z=c.evaluateElevationAlignmentAtPoint(F,G,w.ElevationContext.fromElevationInfo(this.elevationInfo),
I);const A=x.set(g.sv3d.get(),F.x,F.y,z);z=g.sv3d.get();k.projectVectorToVector(A,F.spatialReference,z,I.spatialReference);F=this._geometrySize;return u.createPointGeometry(D,null,z,null,[F,F],[0,0,0,1])};r._createClass(q,[{key:"visible",get:function(){return this._resources.visible},set:function(D){this._resources.visible=D}},{key:"attached",get:function(){return this._resources.attached},set:function(D){this._resources.attached=D}},{key:"geometry",get:function(){return this._geometry},set:function(D){this._geometry=
D;this._resources.recreateGeometry()}},{key:"size",get:function(){return this._size},set:function(D){if(D!==this._size){const F=this._preferredTextureSize;this._size=D;F<this._preferredTextureSize?null!=this._resources&&this._resources.recreate():this._updateSizeAttribute()}}},{key:"color",get:function(){return this._color},set:function(D){p.exactEquals(D,this._color)||(p.copy(this._color,D),this._updateMaterial())}},{key:"pixelSnappingEnabled",get:function(){return this._pixelSnappingEnabled},set:function(D){this._pixelSnappingEnabled!==
D&&(this._pixelSnappingEnabled=D,this._updateMaterial())}},{key:"primitive",get:function(){return this._primitive},set:function(D){this._primitive!==D&&(this._primitive=D,null!=this._resources&&this._resources.recreate())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(D){D!==this._outlineSize&&(this._outlineSize=D,this._updateMaterial())}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(D){p.exactEquals(D,this._outlineColor)||(p.copy(this._outlineColor,
D),this._updateMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(D){this._elevationInfo=D;this._resources&&this._resources.recreateGeometry()}},{key:"_geometrySize",get:function(){return this._size/h}},{key:"_preferredTextureSize",get:function(){return e.clamp(e.nextHighestPowerOfTwo(2*this._geometrySize),16,128)}}]);return q}();const h=B.DEFAULT_SYMBOL_SIZE_RATIO,t=[h/2,h/2,1-h/2,1-h/2],y=m.create();a.PointVisualElement=l;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/interactive/visualElements/RightAngleQuadVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/reactiveUtils ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/support/vectorStacks ../../../../layers/graphics/dehydratedFeatures ./EngineVisualElement ../../terrain/OverlayRenderer ../../webgl-engine/lib/Attribute ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/ColorMaterial ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y){c=function(D){function F(G){var z=D.call(this,G)||this;z._maxSize=0;z._position=n.create();z._up=n.create();z._right=n.create();z._renderOccluded=d.RenderOccludedFlag.OccludeAndTransparent;z._color=f.fromValues(1,0,0,1);z._outlineColor=f.fromValues(0,0,0,1);z._outlineSize=0;z._size=32;z._outlineRenderOccluded=d.RenderOccludedFlag.Opaque;z.applyProps(G);return z}r._inherits(F,D);var I=F.prototype;I.createObject3DResourceFactory=function(G){return{view:G,
createResources:z=>this._createObject3DResources(z),destroyResources:z=>this._destroyObject3DResources(z),cameraChanged:()=>this._updateTransformObject3D()}};I.createDrapedResourceFactory=function(G){return{view:G,createResources:()=>this._createDrapedResources(),destroyResources:z=>this._destroyDrapedResources(z)}};I._createObject3DResources=function(G){const z=new t.ColorMaterial(this._quadMaterialParameters),A=0===this._outlineSize?void 0:new y.RibbonLineMaterial(this._outlineMaterialParameters);
this._createObject3DGeometries(G,z,A);return{quadMaterial:z,outlineMaterial:A,forEach:K=>{K(z);A&&K(A)}}};I._destroyObject3DResources=function(G){G.quadMaterial.dispose();G.outlineMaterial?.dispose()};I._createObject3DGeometries=function(G,z,A){if(!p.exactEquals(this._up,n.ZEROS)||!p.exactEquals(this._right,n.ZEROS)){z=this._createGeometries(z,A);for(const K of z)G.addGeometry(K);this._updateTransformObject3D(G)}};I._createDrapedResources=function(){const G=new t.ColorMaterial(this._quadMaterialParameters),
z=0===this._outlineSize?void 0:new y.RibbonLineMaterial(this._outlineMaterialParameters),A=this._createGeometries(G,z).map(J=>new l.RenderGeometry(J));this._setTransformDraped(A);const K=e.watch(()=>this.view.state.contentPixelRatio,()=>{this.drapedResources.recreateGeometry()});return{quadMaterial:G,outlineMaterial:z,geometries:A,pixelRatioHandle:K}};I._destroyDrapedResources=function(G){G.pixelRatioHandle.remove();G.geometries=[];G.outlineMaterial?.dispose();G.quadMaterial.dispose()};I._createGeometries=
function(G,z){const {up:A,right:K,corner:J}=this._getVertices();G=this._quadGeometryData(A,K,J,G);if(!z)return[G];z=b.createPolylineGeometry(z,[A,J,K]);return[G,z]};I._getVertices=function(){let G=this._up,z=this._right;const A=p.add(g.sv3d.get(),G,z);this.isDraped&&(G=p.copy(g.sv3d.get(),G),z=p.copy(g.sv3d.get(),z),G[2]=0,z[2]=0,A[2]=0);return{up:G,right:z,corner:A}};I._updateTransform=function(){this.isDraped?this.drapedResources.recreateGeometry():this._updateTransformObject3D()};I._updateTransformObject3D=
function(G=this.object3dResources.object){if(G){var z=this._size*this.view.state.camera.computeScreenPixelSizeAt(this._position);z=Math.min(this._maxSize,z);x.fromTranslation(q,this._position);x.scale(q,q,[z,z,z]);G.transformation=q}};I._setTransformDraped=function(G){if(0!==G.length){var {view:{basemapTerrain:{overlayManager:z},state:{contentPixelRatio:A}}}=this,{_position:K,_size:J}=this,H=p.copy(g.sv3d.get(),K);H[2]=w.DRAPED_Z;var L=C;L.spatialReference=z.renderer.spatialReference;L.x=H[0];L.y=
H[1];L=z.overlayPixelSizeInMapUnits(L)*A;L=Math.min(this._maxSize,J*L);x.fromTranslation(q,H);x.scale(q,q,[L,L,1]);for(const E of G)E.updateTransformation(M=>{x.copy(M,q)})}};I._quadGeometryData=function(G,z,A,K){return new u.Geometry(K,[[h.VertexAttribute.POSITION,new B.Attribute([0,0,0,...z,...G,...A],3,!0)]],[[h.VertexAttribute.POSITION,[0,1,2,1,2,3]]])};I._updateQuadMaterial=function(){this.object3dResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters);this.drapedResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters)};
I._updateOutlineMaterial=function(){this.object3dResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters);this.drapedResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters)};r._createClass(F,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(G){G!==this._renderOccluded&&(this._renderOccluded=G,this._updateQuadMaterial())}},{key:"color",get:function(){return this._color},set:function(G){k.copy(this._color,G);this._updateQuadMaterial()}},
{key:"outlineColor",get:function(){return this._outlineColor},set:function(G){k.copy(this._outlineColor,G);this._updateOutlineMaterial()}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(G){const z=0===this._outlineSize!==(0===G);this._outlineSize=G;z?this.recreateGeometry():this._updateOutlineMaterial()}},{key:"size",get:function(){return this._size},set:function(G){G!==this._size&&(this._size=G,this._updateTransform())}},{key:"outlineRenderOccluded",get:function(){return this._outlineRenderOccluded},
set:function(G){this._outlineRenderOccluded=G;this._updateOutlineMaterial()}},{key:"geometry",set:function({previous:G,center:z,next:A}){this._maxSize=Math.min(p.distance(z,G),p.distance(z,A))/3;p.normalize(this._up,p.subtract(this._up,G,z));p.normalize(this._right,p.subtract(this._right,A,z));p.copy(this._position,z);this.recreateGeometry()}},{key:"_quadMaterialParameters",get:function(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}},
{key:"_outlineMaterialParameters",get:function(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}}]);return F}(c.EngineVisualElement);const q=m.create(),C=v.makeDehydratedPoint(0,0,void 0,null);a.RightAngleQuadVisualElement=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,r,e,x,m,p,n){let k=function(f){function g(){var v=f.apply(this,arguments)||this;v.enabled=!0;return v}r._inherits(g,f);return r._createClass(g)}(m.JSONSupport);e.__decorate([p.property({type:Boolean})],k.prototype,"enabled",void 0);k=e.__decorate([n.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],k);m=function(f){function g(v){v=f.call(this,v)||this;v.lineSnapper=new k;v.parallelLineSnapper=new k;v.rightAngleSnapper=new k;v.rightAngleTriangleSnapper=new k;
v.shortLineThreshold=15;v.distance=5;v.pointThreshold=1E-6;v.intersectionParallelLineThreshold=1E-6;v.parallelLineThreshold=1E-6;v.verticalLineThreshold=.1;v.touchSensitivityMultiplier=1.5;v.pointOnLineThreshold=1E-6;v.orange=new x([255,127,0]);v.orangeTransparent=new x([255,127,0,.5]);v.lineHintWidthReference=3;v.lineHintWidthTarget=3;v.lineHintFadedExtensions=.3;v.parallelLineHintWidth=2;v.parallelLineHintLength=24;v.parallelLineHintOffset=1.5;v.rightAngleHintSize=24;v.rightAngleHintOutlineSize=
1.5;v.satisfiesConstraintScreenThreshold=1;return v}r._inherits(g,f);return r._createClass(g)}(m.JSONSupport);e.__decorate([p.property({type:k,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"lineSnapper",void 0);e.__decorate([p.property({type:k,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"parallelLineSnapper",void 0);e.__decorate([p.property({type:k,constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"rightAngleSnapper",void 0);e.__decorate([p.property({type:k,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],m.prototype,"rightAngleTriangleSnapper",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],m.prototype,"shortLineThreshold",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],m.prototype,"distance",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],m.prototype,"pointThreshold",void 0);
e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],m.prototype,"intersectionParallelLineThreshold",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],m.prototype,"parallelLineThreshold",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],m.prototype,"verticalLineThreshold",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],
m.prototype,"touchSensitivityMultiplier",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],m.prototype,"pointOnLineThreshold",void 0);e.__decorate([p.property({type:x,nonNullable:!0})],m.prototype,"orange",void 0);e.__decorate([p.property({type:x,nonNullable:!0})],m.prototype,"orangeTransparent",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"lineHintWidthReference",void 0);e.__decorate([p.property({type:Number,
nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"lineHintWidthTarget",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],m.prototype,"lineHintFadedExtensions",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],m.prototype,"parallelLineHintWidth",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],m.prototype,"parallelLineHintLength",
void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],m.prototype,"parallelLineHintOffset",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],m.prototype,"rightAngleHintSize",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],m.prototype,"rightAngleHintOutlineSize",void 0);e.__decorate([p.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],
m.prototype,"satisfiesConstraintScreenThreshold",void 0);m=e.__decorate([n.subclass("esri.views.interactive.snapping.Settings.Defaults")],m);e=new m;a.defaults=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingDomain":function(){define(["exports"],function(a){a.SnappingDomain=void 0;var r=a.SnappingDomain||(a.SnappingDomain={});r[r.FEATURE=1]="FEATURE";r[r.SELF=2]="SELF";r[r.ALL=3]="ALL";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/snapping/SnappingPoint":function(){define(["exports","../../../chunks/vec3f64","../../../layers/graphics/dehydratedFeatures","../../../support/elevationInfoUtils"],function(a,r,e,x){function m(n,k,f){if(null==n)return null;if(null==k)return r.fromValues(n.x,n.y,n.z??0);if("2d"===k.type)return r.fromValues(n.x,n.y,0);({elevationInfo:f}=f);k=x.getConvertedElevation(k,n,f,x.absoluteHeightElevationInfo)??0;return r.fromValues(n.x,n.y,k)}const p=e.makeDehydratedPoint(0,0,0,null);
a.anyMapPointToSnappingPoint=function(n,k,f){return null==n?null:m(f.coordinateHelper.vectorToDehydratedPoint(n,p),k,f)};a.asSnappingPoint=function(n){return n};a.cloneSnappingPoint=function(n){return r.clone(n)};a.createSnappingPoint=function(n,k,f){return r.fromValues(n,k,f)};a.pointToSnappingPoint=m;a.snappingPointToDehydratedPoint=function(n,k){return e.makeDehydratedPoint(n[0],n[1],n[2],k)};a.snappingPointToSnappingOutput=function(n,k,{z:f,m:g,spatialReference:v,elevationInfo:c}){if(null==f&&
null==g)return n=e.makeDehydratedPoint(n[0],n[1],void 0,v),null!=g&&(n.m=g,n.hasM=!0),n;if(null==k||"2d"===k.type)return n=e.makeDehydratedPoint(n[0],n[1],f,v),null!=g&&(n.m=g,n.hasM=!0),n;k=x.getConvertedElevationFromVector(k,n,v,x.absoluteHeightElevationInfo,c)??0;n=e.makeDehydratedPoint(n[0],n[1],k,v);null!=g&&(n.m=g,n.hasM=!0);return n};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/reactiveUtils ../../../chunks/vec3 ../../../layers/graphics/dehydratedFeatures ../../input/InputManager ../keybindings ./SnappingPoint".split(" "),
function(a,r,e,x,m,p,n){function k(f,g){const v=f.x-g.x;f=f.y-g.y;return v*v+f*f}a.LineSegmentHintType=void 0;(function(f){f[f.TARGET=0]="TARGET";f[f.REFERENCE=1]="REFERENCE";f[f.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(a.LineSegmentHintType||(a.LineSegmentHintType={}));a.editEdgeToSnappingEdge=function(f,g,v){return{left:n.anyMapPointToSnappingPoint(f.leftVertex.pos,g,v),right:n.anyMapPointToSnappingPoint(f.rightVertex.pos,g,v)}};a.makeFilter=function(f){return f.createQuery()};a.makeSnappingQuery=
function({point:f,distance:g,returnEdge:v,returnVertex:c,coordinateHelper:{spatialReference:w}},B,u){return{point:x.makeDehydratedPoint(f[0],f[1],f[2],w.toJSON()),mode:B,distance:g,returnEdge:v,returnVertex:c,query:null!=u?u.toJSON():{where:"1\x3d1"}}};a.objectEqual=function(f,g){const v=f.length===g.length&&f[0]===g[0]&&f[1]===g[1];switch(f.length){case 2:return v;case 3:return v&&f[2]===g[2];case 4:return v&&f[2]===g[2]&&f[3]===g[3]}return!1};a.screenDistance=function(f,g){return Math.sqrt(k(f,
g))};a.setupSnappingToggleHandles=function(f,g=()=>{}){const v=r.watch(()=>({view:f.view,snappingOptions:f.snappingOptions}),({view:c,snappingOptions:w})=>{const B=m.ViewEventPriorities.TOOL;f.removeHandles("snapping-toggle");c&&null!=w&&(c=[c.on("key-down",u=>{u.key!==p.SNAPPING_KEYS.toggle||u.repeat||(w.enabledToggled=!0,g())},B),c.on("key-up",u=>{u.key===p.SNAPPING_KEYS.toggle&&(w.enabledToggled=!1,g())},B),c.on("pointer-move",u=>{u=u.native.ctrlKey;w.enabledToggled!==u&&(w.enabledToggled=u,g())},
B)],f.addHandles(c,"snapping-toggle"))},r.syncAndInitial);f.addHandles(v)};a.sortCandidatesInPlace=function(f,g){g.sort((v,c)=>{v=e.squaredDistance(v.targetPoint,f);c=e.squaredDistance(c.targetPoint,f);return v-c})};a.squaredScreenDistance=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(a){a.SKETCH_KEYS={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",
vertexAdd:"f",pan:" "};a.SNAPPING_KEYS={toggle:"Control"};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingVisualizer":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/handleUtils ./hints/IntersectionSnappingHint ./hints/LineSnappingHint ./hints/ParallelSnappingHint ./hints/PointSnappingHint ./hints/RightAngleSnappingHint".split(" "),function(a,r,e,x,m,p,n,k){let f=function(){function g(){}var v=g.prototype;
v.draw=function(c,w){c=this._getUniqueHints(c);c=this.sortUniqueHints(c);const B=[];for(const u of c)u instanceof x.IntersectionSnappingHint&&B.push(this.visualizeIntersectionPoint(u,w)),u instanceof m.LineSnappingHint&&B.push(this.visualizeLine(u,w)),u instanceof p.ParallelSnappingHint&&B.push(this.visualizeParallelSign(u,w)),u instanceof k.RightAngleSnappingHint&&B.push(this.visualizeRightAngleQuad(u,w)),u instanceof n.PointSnappingHint&&B.push(this.visualizePoint(u,w));return e.handlesGroup(B)};
v.sortUniqueHints=function(c){return c};v._getUniqueHints=function(c){const w=[];for(const B of c){c=!0;for(const u of w)if(B.equals(u)){c=!1;break}c&&w.push(B)}return w};return r._createClass(g)}();a.SnappingVisualizer=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3","../SnappingDomain","./SnappingHint"],function(a,
r,e,x,m){m=function(p){function n(k,f,g=x.SnappingDomain.ALL){f=p.call(this,f,g)||this;f.intersectionPoint=k;return f}r._inherits(n,p);n.prototype.equals=function(k){return k instanceof n?e.exactEquals(this.intersectionPoint,k.intersectionPoint):!1};return r._createClass(n)}(m.SnappingHint);a.IntersectionSnappingHint=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],
function(a,r){r=r._createClass(function(e,x){this.isDraped=e;this.domain=x});a.SnappingHint=r;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../../../../chunks/vec3 ../SnappingDomain ./SnappingHint".split(" "),function(a,r,e,x,m,p,n){e=function(k){function f(g,v,c,w,B=p.SnappingDomain.ALL,u=!0,b=!0){w=k.call(this,
w,B)||this;w.type=g;w.lineStart=v;w.lineEnd=c;w.fadeLeft=u;w.fadeRight=b;return w}r._inherits(f,k);f.prototype.equals=function(g){return g instanceof f?this.type===g.type&&m.exactEquals(this.lineStart,g.lineStart)&&m.exactEquals(this.lineEnd,g.lineEnd)&&this.fadeLeft===g.fadeLeft&&this.fadeRight===g.fadeRight:!1};r._createClass(f,[{key:"length",get:function(){return m.distance(this.lineStart,this.lineEnd)}}]);return f}(n.SnappingHint);a.LineSnappingHint=e;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../../../../chunks/vec3 ../SnappingDomain ./SnappingHint".split(" "),function(a,r,e,x,m,p,n){e=function(k){function f(g,v,c,w=p.SnappingDomain.ALL){c=k.call(this,c,w)||this;c.lineStart=g;c.lineEnd=v;return c}r._inherits(f,k);f.prototype.equals=function(g){return g instanceof f?m.exactEquals(this.lineStart,
g.lineStart)&&m.exactEquals(this.lineEnd,g.lineEnd):!1};return r._createClass(f)}(n.SnappingHint);a.ParallelSnappingHint=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/PointSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3","./SnappingHint"],function(a,r,e,x){x=function(m){function p(n,k,f){k=m.call(this,k,f)||this;k.point=n;return k}r._inherits(p,m);p.prototype.equals=function(n){return n instanceof
p?e.exactEquals(this.point,n.point):!1};return r._createClass(p)}(x.SnappingHint);a.PointSnappingHint=x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../../../../chunks/vec3 ../SnappingDomain ./SnappingHint".split(" "),function(a,r,e,x,m,p,n){e=function(k){function f(g,v,c,w,B=p.SnappingDomain.ALL){w=k.call(this,
w,B)||this;w.previousVertex=g;w.centerVertex=v;w.nextVertex=c;return w}r._inherits(f,k);f.prototype.equals=function(g){return g instanceof f?m.exactEquals(this.previousVertex,g.previousVertex)&&m.exactEquals(this.centerVertex,g.centerVertex)&&m.exactEquals(this.nextVertex,g.nextVertex):!1};return r._createClass(f)}(n.SnappingHint);a.RightAngleSnappingHint=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/meshFastUpdateUtils":function(){define(["exports",
"../../../../core/handleUtils","../../../../core/reactiveUtils","../../../../layers/graphics/sources/interfaces"],function(a,r,e,x){function m(n){const {geometry:k}=n;"mesh"!==k?.type||k.vertexSpace.isGeoreferenced||n.notifyMeshTransformChanged({action:x.MeshTransformUpdateAction.EnableFastUpdates})}function p(n){const {geometry:k}=n;"mesh"!==k?.type||k.vertexSpace.isGeoreferenced||n.notifyMeshTransformChanged({action:x.MeshTransformUpdateAction.DisableFastUpdates})}a.meshTransformFastUpdateHandles=
function(n){const {graphic:k}=n;return[e.watch(()=>n.displaying,f=>{f?m(k):p(k)},{...e.syncAndInitial}),r.makeHandle(()=>p(k))]};a.tryDisableMeshTransformFastUpdates=p;a.tryEnableMeshTransformFastUpdates=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/settings":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../Color ../../../../core/analysisThemeUtils ../../../../core/memoize ../visualElements/ExtendedLineVisualElement ../../webgl-engine/lib/Material ../../webgl-engine/materials/lineStippleUtils ../../../support/colorUtils".split(" "),
function(a,r,e,x,m,p,n,k,f){function g(D,F){F&&Object.assign(D,F)}const v=m.memoize(D=>({accent:x.getAccentColor(),contrast:x.getContrastColor(),selected:new e([255,255,255]),selectedOutline:new e([255,255,255]),staged:new e([12,207,255]),outline:new e([0,0,0,.5])}));let c=r._createClass(function({theme:D,...F}){this.height=90;this.coneHeight=40;this.coneWidth=23;this.width=3;this.renderOccluded=n.RenderOccludedFlag.Opaque;this.color=v(D).accent;g(this,F)}),w=function(){function D({theme:F,...I}){this.size=
11;this.outlineSize=1;this.collisionPadding=9;F=v(F);this.color=F.accent;this.outlineColor=F.outline;this.renderOccluded=n.RenderOccludedFlag.Opaque;this.hoverOutlineColor=F.selectedOutline;g(this,I)}D.prototype.apply=function(F,I){const G=this[F];I.setParameters({color:f.unitRGBAFromColor(G),transparent:"color"===F?1>G.a:!0,renderOccluded:this.renderOccluded})};return r._createClass(D)}(),B=function(){function D({theme:F,...I}){this.size=40;this.height=.2;this.offset=.25;this.collisionPadding=2;
this.renderOccluded=n.RenderOccludedFlag.Transparent;this.minSquaredEdgeLength=900;F=v(F);this.color=f.multiplyOpacity(F.accent,.5);this.hoverColor=F.accent;g(this,I)}D.prototype.apply=function(F,I){F=this[F];I.setParameters({color:f.unitRGBAFromColor(F),transparent:1>F.a,renderOccluded:this.renderOccluded})};return r._createClass(D)}(),u=r._createClass(function({theme:D}){const F=v(D);this.vertex=new w({theme:D,color:F.accent,outlineColor:F.outline});this.edge=new w({theme:D,color:f.desaturate(f.multiplyOpacity(F.accent,
2/3),.5),outlineColor:f.multiplyOpacity(F.outline,.5),size:8,collisionPadding:8});this.selected=new w({theme:D,color:F.selected,outlineColor:F.outline});this.edgeOffset=new B({theme:D})}),b=function(){function D({theme:F,...I}){this.width=1.5;this.stipplePattern=k.createStipplePatternSimple(5);this.falloff=0;this.innerWidth=1.5;this.renderOccluded=n.RenderOccludedFlag.OccludeAndTransparent;F=v(F);this.color=F.selected;this.stippleOffColor=F.outline;this.innerColor=F.selected;g(this,I)}D.prototype.apply=
function(F){F.color=f.unitRGBAFromColor(this.color);F.width=this.width;F.stipplePattern=this.stipplePattern;F.stippleOffColor=f.unitRGBAFromColor(this.stippleOffColor);F.falloff=this.falloff;F.innerWidth=this.innerWidth;F.innerColor=f.unitRGBAFromColor(this.innerColor);F.renderOccluded=this.renderOccluded};return r._createClass(D)}(),d=function(){function D({theme:F,...I}){this.size=4;this.outlineSize=1;this.shape="square";F=v(F);this.color=F.selected;this.outlineColor=F.outline;g(this,I)}D.prototype.apply=
function(F){F.color=f.unitRGBAFromColor(this.color);F.size=this.size;F.outlineSize=this.outlineSize;F.outlineColor=f.unitRGBAFromColor(this.outlineColor);F.primitive=this.shape};return r._createClass(D)}(),l=function(){function D({theme:F,...I}){this.innerWidth=1;this.glowFalloff=this.glowWidth=8;this.globalAlpha=.3;this.globalAlphaContrastBoost=1.5;this.radius=3;F=v(F);this.innerColor=F.selected;this.heightFillColor=this.glowColor=F.accent;g(this,I)}D.prototype.apply=function(F,I=1){I={glowColor:e.toUnitRGB(this.glowColor),
glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:e.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*I,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in F?F.style=I:F.laserlineStyle=I};return r._createClass(D)}(),h=r._createClass(function({theme:D,...F}){const I=v(D);this.outline=new b({theme:D,color:I.outline,renderOccluded:n.RenderOccludedFlag.OccludeAndTransparentStencil,stippleOffColor:I.selected,
stipplePattern:k.createStipplePatternSimple(5),width:1.5,innerWidth:0});this.staged=new b({theme:D,color:I.selected,renderOccluded:n.RenderOccludedFlag.OccludeAndTransparentStencil,innerColor:I.staged,stippleOffColor:I.outline,stipplePattern:k.createStipplePatternSimple(5),width:1.5});this.shadowStyle=new l({theme:D,globalAlpha:.3,glowColor:I.accent,glowFalloff:8,glowWidth:8,innerColor:I.selected,innerWidth:1});g(this,F)}),t=r._createClass(function({theme:D,...F}){const I=v(D);this.outline=new d({theme:D,
color:I.selected,outlineColor:I.outline,outlineSize:1,shape:"circle",size:4});this.shadowStyle=new l({theme:D,globalAlpha:.3,glowColor:I.accent,glowFalloff:1.5,glowWidth:6,innerColor:I.selected,innerWidth:1,radius:2});g(this,F)}),y=function(D){function F({theme:I,...G}){I=D.call(this,{theme:I})||this;I.extensionType=p.ExtensionType.GROUND_RAY;g(r._assertThisInitialized(I),G);return I}r._inherits(F,D);return r._createClass(F)}(b),q=r._createClass(function({theme:D}){this.laserlineAlphaMultiplier=1.5;
this.heightPlaneAngleCutoff=20;const F=v(D);this.lineGraphics=new h({theme:D});this.pointGraphics=new t({theme:D});this.heightPlane=new l({theme:D,globalAlpha:.3,glowColor:F.accent,glowFalloff:8,glowWidth:8,innerColor:F.selected,innerWidth:1});this.heightBox=new l({theme:D,globalAlpha:.3,glowColor:F.accent,glowFalloff:8,glowWidth:8,innerColor:F.selected,innerWidth:0,heightFillColor:F.accent});this.zVerticalLine=new y({theme:D,color:f.multiplyOpacity(F.accent,.5),falloff:2,innerColor:f.multiplyOpacity(F.selected,
0),renderOccluded:n.RenderOccludedFlag.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:p.ExtensionType.GROUND_RAY})}),C=r._createClass(function(D){this.colors=v(D.theme);this.visualElements=new q(D);this.manipulators=new u(D);this.zManipulator=new c(D)});m=m.memoize(D=>new C({theme:D}));a.getSettings=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/memoize":function(){define(["exports"],function(a){a.memoize=function(r){let e,x=[],m,p=!1;return function(...n){var k;
if(k=p&&e===this)a:if(n.length!==x.length)k=!1;else{for(k=0;k<n.length;++k)if(n[k]!==x[k]){k=!1;break a}k=!0}if(k)return m;m=r.apply(this,n);e=this;x=n;p=!0;return m}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/OutlineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Evented ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../../../geometry/projection ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/DoubleArray ../../../../layers/graphics/dehydratedFeatures ../../../../support/elevationInfoUtils ../../../../symbols/support/ElevationInfo ./EngineVisualElement ./LaserlineVisualElement ../../layers/graphics/ElevationContext ../../support/engineContent/line ../../support/renderInfoUtils/line ../../webgl-engine/lib/Material ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q){B=function(F){function I(z){var A=F.call(this,z)||this;A._attachmentOrigin=v.makeDehydratedPoint(0,0,0,null);A._attachmentOriginDirty=!0;A.events=new e;A._geometry=null;A._width=1;A._color=n.fromValues(1,0,1,1);A._innerWidth=0;A._innerColor=n.fromValues(1,1,1,1);A._stipplePattern=null;A._stippleOffColor=null;A._falloff=0;A._elevationInfo=null;A._laserlineStyle=null;A._laserlineEnabled=!1;A._renderOccluded=h.RenderOccludedFlag.OccludeAndTransparentStencil;
A._attachmentOrigin.spatialReference=z.view.spatialReference;A._laserline=new u.LaserlineVisualElement({view:z.view});A.applyProps(z);A.attached=z.attached??!0;return A}r._inherits(I,F);var G=I.prototype;G.destroy=function(){this._laserline.destroy();r._get(r._getPrototypeOf(I.prototype),"destroy",this).call(this)};G.createObject3DResourceFactory=function(z){return{view:z,createResources:A=>this._createObject3DResources(A),destroyResources:A=>this._destroyExternalResources(A),recreateGeometry:(A,
K)=>{A.geometries.length=0;this._recreateGeometry(K,A.material,A.geometries)}}};G.createDrapedResourceFactory=function(z){return{view:z,createResources:()=>this._createDrapedResources(),destroyResources:A=>this._destroyExternalResources(A),recreateGeometry:A=>{A.geometries=this._createRenderGeometriesDraped(A.material);this._attachmentOriginChanged()}}};G.onAttachedChange=function(z){this._laserline.attached=this._laserlineAttached;z&&this._attachmentOriginChanged()};G._updateMaterial=function(){null!=
this.object3dResources.resources&&this.object3dResources.resources.material.setParameters(this._materialParameters);null!=this.drapedResources.resources&&this.drapedResources.resources.material.setParameters(this._materialParameters)};G._recreateGeometry=function(z,A,K){this._createRenderGeometries(A,K);for(const J of K)z.addGeometry(J);this._attachmentOriginChanged()};G._attachmentOriginChanged=function(){this._attachmentOriginDirty=!0;this.events.emit("attachment-origin-changed")};G._destroyExternalResources=
function(z){z.geometries=[];z.material.dispose()};G._createObject3DResources=function(z){const A=new q.RibbonLineMaterial(this._materialParameters),K=[];this._recreateGeometry(z,A,K);return{material:A,geometries:K,forEach:J=>{J(A);K.forEach(J)}}};G._createDrapedResources=function(){const z=new q.RibbonLineMaterial(this._materialParameters),A=this._createRenderGeometriesDraped(z);return{material:z,geometries:A}};G._createRenderGeometriesDraped=function(z){const {geometry:A,view:K}=this,J=K.basemapTerrain.spatialReference;
return null==A||null==J?[]:l.geometryToRenderInfoDraped(A,J).lines.map(({position:H})=>new t.RenderGeometry(d.createGeometry(z,{overlayInfo:{spatialReference:J,renderCoordsHelper:K.renderCoordsHelper},attributeData:{position:H},removeDuplicateStartEnd:this._isClosed})))};G.calculateMapBounds=function(z){if(null==this.object3dResources.resources)return!1;const A=this.view.renderCoordsHelper;for(const K of this.object3dResources.resources.geometries){const J=K.vertexAttributes.get(y.VertexAttribute.POSITION),
H=g.newDoubleArray(J.data.length);k.projectBuffer(J.data,A.spatialReference,0,H,this.view.spatialReference,0,J.data.length/3);f.expandWithBuffer(z,H)}return!0};G._createRenderGeometries=function(z,A){var K=this.geometry;if(null!=K){K=l.geometryToRenderInfo(K,this.view.elevationProvider,this.view.renderCoordsHelper,b.ElevationContext.fromElevationInfo(this.elevationInfo??new w({mode:c.getGeometryEffectiveElevationMode(K,null)})));var J=[];for(const {position:H,mapPositions:L}of K.lines)A.push(d.createGeometry(z,
{mapPositions:L,attributeData:{position:H},removeDuplicateStartEnd:this._isClosed})),J.push(H);this._laserline.pathVerticalPlane=J}};r._createClass(I,[{key:"_laserlineAttached",get:function(){return this.attached&&this.visible&&null!=this._laserlineStyle&&!this.isDraped&&this.laserlineEnabled}},{key:"geometry",get:function(){return this._geometry},set:function(z){this._geometry=z;this.recreateGeometry()}},{key:"width",get:function(){return this._width},set:function(z){z!==this._width&&(this._width=
z,this._updateMaterial())}},{key:"color",get:function(){return this._color},set:function(z){p.exactEquals(z,this._color)||(p.copy(this._color,z),this._updateMaterial())}},{key:"innerWidth",get:function(){return this._innerWidth},set:function(z){z!==this._innerWidth&&(this._innerWidth=z,this._updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(z){p.exactEquals(z,this._innerColor)||(p.copy(this._innerColor,z),this._updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},
set:function(z){const A=null!=z!==(null!=this._stipplePattern);this._stipplePattern=z;A?this.recreate():this._updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},set:function(z){z&&this._stippleOffColor&&p.exactEquals(z,this._stippleOffColor)||(this._stippleOffColor=z?n.clone(z):null,this._updateMaterial())}},{key:"falloff",get:function(){return this._falloff},set:function(z){z!==this._falloff&&(this._falloff=z,this._updateMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},
set:function(z){this._elevationInfo=z;this.recreateGeometry()}},{key:"laserlineStyle",get:function(){return this._laserlineStyle},set:function(z){this._laserlineStyle=z;this._laserline.attached=this._laserlineAttached;null!=z&&(this._laserline.style=z)}},{key:"laserlineEnabled",get:function(){return this._laserlineEnabled},set:function(z){this._laserlineEnabled!==z&&(this._laserlineEnabled=z,this._laserline.attached=this._laserlineAttached)}},{key:"renderOccluded",get:function(){return this._renderOccluded},
set:function(z){z!==this._renderOccluded&&(this._renderOccluded=z,this._updateMaterial())}},{key:"attachmentOrigin",get:function(){if(!this._attachmentOriginDirty)return this._attachmentOrigin;const z=this.object3dResources.resources?.geometries;if(!z||0===z.length)return null;x.set(D,0,0,0);let A=0;for(const K of z)K.computeAttachmentOrigin(C)&&(x.add(D,D,C),A++);if(0===A)return null;x.scale(D,D,1/A);this.view.renderCoordsHelper.fromRenderCoords(D,this._attachmentOrigin);this._attachmentOriginDirty=
!1;return this._attachmentOrigin}},{key:"_isClosed",get:function(){return null!=this.geometry&&"polygon"===this.geometry.type}},{key:"_materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:!1,isClosed:this._isClosed,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,join:"round",hasPolygonOffset:!0,renderOccluded:this._normalizedRenderOccluded}}},{key:"_normalizedRenderOccluded",
get:function(){return this.isDraped&&this._renderOccluded===h.RenderOccludedFlag.OccludeAndTransparentStencil?h.RenderOccludedFlag.OccludeAndTransparent:this._renderOccluded}}]);return I}(B.EngineVisualElement);const C=m.create(),D=m.create();a.OutlineVisualElement=B;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/VerticesVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ./Object3DVisualElement ../../layers/graphics/ElevationContext ../../support/renderInfoUtils/point ../../webgl-engine/lib/basicInterfaces ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/materials/ShadedColorMaterial".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w){n=function(u){function b(l){var h=u.call(this,l)||this;h.view=null;h._renderOccluded=c.RenderOccludedFlag.OccludeAndTransparent;h._vertices=null;h._spatialReference=null;h._color=p.fromArray([1,127/255,0,1]);h._size=11;h._outlineColor=p.fromArray([0,0,0,.5]);h._outlineSize=1;h._elevationInfo=null;h.applyProps(l);return h}r._inherits(b,u);var d=b.prototype;d._updateMaterial=function(){this.attached&&this._vertexMaterial.setParameters(this._vertexMaterialParameters)};
d._updateOutlineMaterial=function(){this.attached&&this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters)};d._createRenderGeometries=function(){var l=this.vertices;if(null==l||0===l.length)return[];var h=f.geometryToRenderInfo(l,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,k.ElevationContext.fromElevationInfo(this.elevationInfo));l=[];const t=h.numVertices;h=h.position;for(let q=0;q<t;++q){var y=e.set(B,h[3*q],h[3*q+1],h[3*q+2]);const C=
v.createSphereGeometry(this._vertexMaterial,.5,16,16,{offset:y});y=v.createSphereGeometry(this._vertexOutlineMaterial,.5,16,16,{offset:y});l.push({vertexGeometry:C,vertexOutlineGeometry:y})}return l};d.createGeometries=function(l){const h=this._createRenderGeometries();for(const {vertexGeometry:t,vertexOutlineGeometry:y}of h)l.addGeometry(t),l.addGeometry(y)};d.createExternalResources=function(){this._vertexMaterial=new w.ShadedColorMaterial({...this._vertexMaterialParameters,writeDepth:!0,cullFace:g.CullFaceOptions.Back,
screenSizeEnabled:!0});this._vertexOutlineMaterial=new w.ShadedColorMaterial({...this._vertexOutlineMaterialParameters,transparent:!0,writeDepth:!0,cullFace:g.CullFaceOptions.Front,screenSizeEnabled:!0,shadingEnabled:!1})};d.destroyExternalResources=function(){this._vertexOutlineMaterial=this._vertexMaterial=null};d.forEachExternalMaterial=function(l){l(this._vertexMaterial);l(this._vertexOutlineMaterial)};r._createClass(b,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(l){l!==
this._renderOccluded&&(this._renderOccluded=l,this._updateMaterial(),this._updateOutlineMaterial())}},{key:"vertices",get:function(){return this._vertices},set:function(l){this._vertices=l;this.recreateGeometry()}},{key:"spatialReference",get:function(){return this._spatialReference},set:function(l){this._spatialReference=l;this.recreateGeometry()}},{key:"color",get:function(){return this._color},set:function(l){m.exactEquals(l,this._color)||(m.copy(this._color,l),this._updateMaterial())}},{key:"size",
get:function(){return this._size},set:function(l){l!==this._size&&(this._size=l,this._updateMaterial())}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(l){m.exactEquals(l,this._outlineColor)||(m.copy(this._outlineColor,l),this._updateOutlineMaterial())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(l){l!==this._outlineSize&&(this._outlineSize=l,this._updateOutlineMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},
set:function(l){this._elevationInfo=l;this.recreateGeometry()}},{key:"_vertexMaterialParameters",get:function(){return{color:this._color,transparent:1>this._color[3],screenSizeScale:this.size,renderOccluded:this._renderOccluded}}},{key:"_vertexOutlineMaterialParameters",get:function(){return{color:this._outlineColor,transparent:1>this._outlineColor[3],screenSizeScale:this.size+2*this.outlineSize,renderOccluded:this._renderOccluded}}}]);return b}(n.Object3DVisualElement);const B=x.create();a.VerticesVisualElement=
n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/Object3DVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/mat4 ../../../../chunks/mat4f64 ./VisualElement ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/UpdatePolicy ../../webgl-engine/lib/WebGLLayer".split(" "),function(a,r,e,x,m,p,n,k){m=function(f){function g(c){c=f.call(this,c.view)||this;c._resources=null;c._transform=x.create();
return c}r._inherits(g,f);var v=g.prototype;v.recreate=function(){this.attached&&this.createResources()};v.recreateGeometry=function(){if(null!=this._resources){var c=this._resources.object,w=this.view._stage;w.removeMany(c.geometries);c.removeAllGeometries();this.createGeometries(c);c.visible=this.visible;w.addMany(c.geometries)}};v.createResources=function(){this.destroyResources();const c=this.view._stage;if(c){var w=new k.WebGLLayer(c,{pickable:!1,updatePolicy:n.UpdatePolicy.SYNC}),B=new p.Object3D({castShadow:!1});
B.transformation=this._transform;this.createExternalResources();this.createGeometries(B);c.addMany(B.geometries);this.forEachExternalMaterial(u=>c.add(u));c.add(B);w.add(B);B.visible=this.visible;this._resources={layer:w,object:B}}};v.destroyResources=function(){const c=this.view._stage;null!=this._resources&&c&&(c.remove(this._resources.object),this._resources.layer.destroy(),this.forEachExternalMaterial(w=>{c.remove(w);w.dispose()}),c.removeMany(this._resources.object.geometries),this._resources.object.dispose(),
this.destroyExternalResources(),this._resources=null)};v.updateVisibility=function(c){null!=this._resources&&(this._resources.object.visible=c)};r._createClass(g,[{key:"object",get:function(){return null!=this._resources?this._resources.object:null}},{key:"transform",get:function(){return this._transform},set:function(c){e.copy(this._transform,c);null!=this._resources&&(this._resources.object.transformation=this._transform)}}]);return g}(m.VisualElement);a.Object3DVisualElement=m;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/renderInfoUtils/point":function(){define(["exports","../../../../geometry/support/DoubleArray","../../layers/graphics/elevationAlignmentUtils"],function(a,r,e){a.geometryToRenderInfo=function(x,m,p,n,k){const f=r.newDoubleArray(3*x.length),g=r.newDoubleArray(f.length);x.forEach((v,c)=>{f[3*c]=v[0];f[3*c+1]=v[1];f[3*c+2]=2<v.length?v[2]:0});m=e.applyPerVertexElevationAlignment(f,m,0,g,0,f,0,f.length/3,p,n,k);return{numVertices:x.length,
position:f,mapPositions:g,projectionSuccess:null!=m,sampledElevation:m}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/ShadedColorMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/buffer/BufferView ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/basicInterfaces ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/Util ../lib/VertexAttribute ./internal/bufferWriterUtils ./internal/MaterialUtil ../shaders/ShadedColorMaterialTechnique".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l){let h=function(F){function I(z){z=F.call(this,z,new y)||this;z.supportsEdges=!0;z._configuration=new l.ShadedColorMaterialTechniqueConfiguration;z._vertexAttributeLocations=l.vertexAttributeLocations;return z}r._inherits(I,F);var G=I.prototype;G.getConfiguration=function(z,A){this._configuration.output=z;this._configuration.cullFace=this.parameters.cullFace;this._configuration.hasSlicePlane=this.parameters.hasSlicePlane;this._configuration.transparent=
this.parameters.transparent;this._configuration.writeDepth=this.parameters.writeDepth;this._configuration.screenSizeEnabled=this.parameters.screenSizeEnabled;this._configuration.shadingEnabled=this.parameters.shadingEnabled;this._configuration.transparencyPassType=A.transparencyPassType;this._configuration.hasMultipassTerrain=A.multipassTerrain.enabled;this._configuration.cullAboveGround=A.multipassTerrain.cullAboveGround;return this._configuration};G.intersect=function(z,A,K,J,H,L){if(this.parameters.screenSizeEnabled){const E=
z.vertexAttributes.get(u.VertexAttribute.OFFSET);d.intersectTriangleGeometry(z,K,J,H,{applyToVertex:(M,N,T,Y)=>{Y=e.set(C,E.data[3*Y],E.data[3*Y+1],E.data[3*Y+2]);M=e.set(D,M,N,T);e.scale(Y,Y,this.parameters.screenSizeScale*K.camera.computeRenderPixelSizeAt(Y));e.add(M,M,Y);return[M[0],M[1],M[2]]},applyToAabb:M=>{const N=p.center(M,C);return p.scale(M,this.parameters.screenSizeScale*K.camera.computeRenderPixelSizeAt(N))}},L)}else d.intersectTriangleGeometry(z,K,J,H,void 0,L)};G.requiresSlot=function(z,
A){return A===f.ShaderOutput.Highlight?z===w.RenderSlot.OPAQUE_MATERIAL:A===f.ShaderOutput.Color||A===f.ShaderOutput.Alpha||A===f.ShaderOutput.ObjectAndLayerIdColor?(A=w.RenderSlot.OPAQUE_MATERIAL,this.parameters.transparent&&(A=this.parameters.writeDepth?w.RenderSlot.TRANSPARENT_MATERIAL:w.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),z===A||z===w.RenderSlot.DRAPED_MATERIAL):!1};G.createGLMaterial=function(z){return new t(z)};G.createBufferWriter=function(){return new q(this.parameters.screenSizeEnabled)};
return r._createClass(I)}(c.Material),t=function(F){function I(){return F.apply(this,arguments)||this}r._inherits(I,F);I.prototype.beginSlot=function(G){return this.ensureTechnique(l.ShadedColorMaterialTechnique,G)};return r._createClass(I)}(v),y=function(F){function I(){var G=F.apply(this,arguments)||this;G.color=m.fromValues(1,1,1,1);G.shadingTint=m.fromValues(0,0,0,.25);G.shadingDirection=e.normalize(x.create(),[.5,-.5,-.5]);G.screenSizeScale=14;G.transparent=!1;G.writeDepth=!0;G.hasSlicePlane=
!1;G.cullFace=g.CullFaceOptions.None;G.screenSizeEnabled=!1;G.shadingEnabled=!0;return G}r._inherits(I,F);return r._createClass(I)}(c.MaterialParameters),q=function(){function F(G){this.screenSizeEnabled=G;G=k.newLayout().vec3f(u.VertexAttribute.POSITION).vec3f(u.VertexAttribute.NORMAL);this.screenSizeEnabled&&G.vec3f(u.VertexAttribute.OFFSET);this.vertexBufferLayout=G}var I=F.prototype;I.elementCount=function(G){return G.indices.get(u.VertexAttribute.POSITION).length};I.write=function(G,z,A,K,J){b.writeDefaultAttributes(A,
this.vertexBufferLayout,G,z,K,J);if(this.screenSizeEnabled)if(A.vertexAttributes.has(u.VertexAttribute.OFFSET))if(G=A.vertexAttributes.get(u.VertexAttribute.OFFSET),A=A.indices.get(u.VertexAttribute.OFFSET),B.assert(3===G.size),K=K.getField(u.VertexAttribute.OFFSET,n.BufferViewVec3f))b.writePosition(A,G.data,z,K,J);else throw Error("unable to acquire view for "+u.VertexAttribute.OFFSET);else throw Error(`${u.VertexAttribute.OFFSET} vertex attribute required for screenSizeEnabled ShadedColorMaterial`);
};return r._createClass(F)}();const C=x.create(),D=x.create();a.ShadedColorMaterial=h;a.ShadedColorMaterialParameters=y;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../lib/OrderIndependentTransparency ../lib/Program ../lib/TransparencyPassType ../lib/VertexAttribute ../materials/DefaultTechniqueConfiguration ../../../../chunks/ShadedColorMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d){n=function(h){function t(){return h.apply(this,arguments)||this}e._inherits(t,h);var y=t.prototype;y.initializeProgram=function(q){return new v.Program(q.rctx,t.shader.get().build(this.configuration),l)};y._setPipelineState=function(q){const C=this.configuration,D=q===c.TransparencyPassType.NONE,F=q===c.TransparencyPassType.FrontFace;return d.makePipelineState({blending:C.output!==m.ShaderOutput.Color&&C.output!==m.ShaderOutput.Alpha||!C.transparent?null:
D?g.blendingDefault:g.oitBlending(q),culling:d.cullingParams(C.cullFace),depthTest:{func:F?b.CompareFunction.LESS:C.shadingEnabled?b.CompareFunction.LEQUAL:b.CompareFunction.LESS},depthWrite:D?C.writeDepth?d.defaultDepthWriteParams:null:g.oitDepthWrite(q),colorWrite:d.defaultColorWriteParams,polygonOffset:D||F?null:g.OITPolygonOffset})};y.initializePipeline=function(){return this._setPipelineState(this.configuration.transparencyPassType)};return e._createClass(t)}(n.ShaderTechnique);n.shader=new p.ReloadableShaderModule(u.ShadedColorMaterialShader,
()=>new Promise((h,t)=>a(["./ShadedColorMaterial.glsl"],h,t)));p=function(h){function t(){var y=h.apply(this,arguments)||this;y.output=m.ShaderOutput.Color;y.cullFace=f.CullFaceOptions.None;y.transparencyPassType=c.TransparencyPassType.NONE;y.hasSlicePlane=!1;y.transparent=!1;y.writeDepth=!0;y.screenSizeEnabled=!0;y.shadingEnabled=!0;y.hasMultipassTerrain=!1;y.cullAboveGround=!1;return y}e._inherits(t,h);return e._createClass(t)}(B.DefaultTechniqueConfiguration);x.__decorate([k.parameter({count:m.ShaderOutput.COUNT})],
p.prototype,"output",void 0);x.__decorate([k.parameter({count:f.CullFaceOptions.COUNT})],p.prototype,"cullFace",void 0);x.__decorate([k.parameter({count:c.TransparencyPassType.COUNT})],p.prototype,"transparencyPassType",void 0);x.__decorate([k.parameter()],p.prototype,"hasSlicePlane",void 0);x.__decorate([k.parameter()],p.prototype,"transparent",void 0);x.__decorate([k.parameter()],p.prototype,"writeDepth",void 0);x.__decorate([k.parameter()],p.prototype,"screenSizeEnabled",void 0);x.__decorate([k.parameter()],
p.prototype,"shadingEnabled",void 0);x.__decorate([k.parameter()],p.prototype,"hasMultipassTerrain",void 0);x.__decorate([k.parameter()],p.prototype,"cullAboveGround",void 0);const l=new Map([[w.VertexAttribute.POSITION,0],[w.VertexAttribute.NORMAL,1],[w.VertexAttribute.OFFSET,2]]);r.ShadedColorMaterialTechnique=n;r.ShadedColorMaterialTechniqueConfiguration=p;r.vertexAttributeLocations=l;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/ShadedColorMaterial.glsl":function(){define("exports ./vec4f64 ../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/Float3PassUniform ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/lib/TransparencyPassType ../views/3d/webgl-engine/lib/VertexAttribute".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b){function d(h){const t=new B.ShaderBuilder,y=h.hasMultipassTerrain&&(h.output===x.ShaderOutput.Color||h.output===x.ShaderOutput.Alpha);t.include(p.Transform,h);t.include(e.ScreenSizeScaling,h);t.include(m.SliceDraw,h);const {vertex:q,fragment:C}=t;C.include(f.ColorConversion);g.addProjViewLocalOrigin(q,h);C.uniforms.add(new c.Float4PassUniform("uColor",D=>D.color));t.attributes.add(b.VertexAttribute.POSITION,"vec3");t.varyings.add("vWorldPosition","vec3");
y&&t.varyings.add("depth","float");h.screenSizeEnabled&&t.attributes.add(b.VertexAttribute.OFFSET,"vec3");h.shadingEnabled&&(g.addViewNormal(q),t.attributes.add(b.VertexAttribute.NORMAL,"vec3"),t.varyings.add("vViewNormal","vec3"));q.code.add(w.glsl`
    void main(void) {
      vWorldPosition = ${h.screenSizeEnabled?"screenSizeScaling(offset, position)":"position"};
  `);h.shadingEnabled&&q.code.add(w.glsl`vec3 worldNormal = normal;
vViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`);q.code.add(w.glsl`
    ${y?"depth \x3d (view * vec4(vWorldPosition, 1.0)).z;":""}
    gl_Position = transformPosition(proj, view, vWorldPosition);
  }
  `);y&&t.include(n.multipassTerrainTest,h);C.code.add(w.glsl`
    void main() {
      discardBySlice(vWorldPosition);
      ${y?"terrainDepthTest(gl_FragCoord, depth);":""}
    `);h.shadingEnabled?(C.uniforms.add(new v.Float3PassUniform("shadingDirection",D=>D.shadingDirection)),C.uniforms.add(new c.Float4PassUniform("shadedColor",D=>{{var F=D.shadingTint;D=D.color;const I=1-F[3],G=F[3]+D[3]*I;0===G?l[3]=G:(l[0]=(F[0]*F[3]+D[0]*D[3]*I)/G,l[1]=(F[1]*F[3]+D[1]*D[3]*I)/G,l[2]=(F[2]*F[3]+D[2]*D[3]*I)/G,l[3]=D[3]);F=l}return F})),C.code.add(w.glsl`vec3 viewNormalNorm = normalize(vViewNormal);
float shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);
vec4 finalColor = mix(uColor, shadedColor, shadingFactor);`)):C.code.add(w.glsl`vec4 finalColor = uColor;`);C.code.add(w.glsl`
      ${h.output===x.ShaderOutput.ObjectAndLayerIdColor?w.glsl`finalColor.a = 1.0;`:""}
      if (finalColor.a < ${w.glsl.float(k.symbolAlphaCutoff)}) {
        discard;
      }
      ${h.output===x.ShaderOutput.Alpha?w.glsl`fragColor = vec4(finalColor.a);`:""}

      ${h.output===x.ShaderOutput.Color?w.glsl`fragColor = highlightSlice(finalColor, vWorldPosition); ${h.transparencyPassType===u.TransparencyPassType.Color?"fragColor \x3d premultiplyAlpha(fragColor);":""}`:""}
    }
    `);return t}const l=r.create();r=Object.freeze(Object.defineProperty({__proto__:null,build:d},Symbol.toStringTag,{value:"Module"}));a.ShadedColorMaterialShader=r;a.build=d})},"esri/views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl":function(){define(["exports","./util/View.glsl","../shaderModules/FloatPassUniform","../shaderModules/interfaces"],function(a,r,e,x){a.ScreenSizeScaling=function(m,p){p.screenSizeEnabled&&(m=m.vertex,r.addCameraPosition(m,p),m.uniforms.add(new e.FloatPassUniform("perScreenPixelRatio",
(n,k)=>k.camera.perScreenPixelRatio),new e.FloatPassUniform("screenSizeScale",n=>n.screenSizeScale)),m.code.add(x.glsl`float computeRenderPixelSizeAt( vec3 pWorld ){
vec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);
float viewDirectionDistance = abs(dot(viewForward, pWorld - cameraPosition));
return viewDirectionDistance * perScreenPixelRatio;
}
vec3 screenSizeScaling(vec3 position, vec3 anchor){
return position * screenSizeScale * computeRenderPixelSizeAt(anchor) + anchor;
}`))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/GraphicState":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Evented ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass".split(" "),function(a,r,e,x,m,p,n,k,f){a.GraphicState=function(g){function v(c){c=
g.call(this,c)||this;c.tracking=!1;c.displaying=!1;c.isDraped=!1;return c}r._inherits(v,g);return r._createClass(v)}(x.EventedAccessor);e.__decorate([m.property({constructOnly:!0})],a.GraphicState.prototype,"graphic",void 0);e.__decorate([m.property()],a.GraphicState.prototype,"tracking",void 0);e.__decorate([m.property()],a.GraphicState.prototype,"displaying",void 0);e.__decorate([m.property()],a.GraphicState.prototype,"isDraped",void 0);a.GraphicState=e.__decorate([f.subclass("esri.views.3d.layers.graphics.GraphicState")],
a.GraphicState);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/DrawGraphicTool":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Evented ../../core/HandleOwner ../../core/handleUtils ../../core/maybe ../../core/quantityUtils ../../core/reactiveUtils ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/GraphicsLayer ../../support/elevationInfoUtils ./support/createUtils ./support/helpMessageUtils ./support/surfaceCoordinateSystems ../interactive/InteractiveToolBase ../interactive/sketch/SketchLabelOptions ../interactive/sketch/SketchTooltipOptions ../interactive/tooltip/DrawTooltipInfos ../interactive/tooltip/Tooltip ../support/automaticAreaMeasurementUtils ../support/automaticLengthMeasurementUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G,z){let A=r._createClass(function(){this.rectangle=this.circle=this.outline=this.full=this.activeVertex=this.regularVertices=null});a.DrawGraphicTool=function(J){function H(E){E=J.call(this,E)||this;E._graphic=null;E._createOperationGeometry=null;E.defaultZ=0;E.geometryType=null;E.hasZ=!0;E.labelOptions=new C;E.geometryToPlace=null;E.mode=null;E.snappingManager=null;E.snapToScene=!1;E.tooltip=null;E.tooltipOptions=new D;return E}r._inherits(H,
J);var L=H.prototype;L.initialize=function(){this.internalGraphicsLayer=new d({listMode:"hide",internal:!0});this.view.map.layers.add(this.internalGraphicsLayer);this.drawOperation=this.makeDrawOperation();this.handles.add([this.drawOperation.on("vertex-add",E=>this.onVertexAdd(E)),this.drawOperation.on("vertex-remove",E=>this.onVertexRemove(E)),this.drawOperation.on("vertex-update",E=>this.onVertexUpdate(E)),this.drawOperation.on("cursor-update",E=>this.onCursorUpdate(E)),this.drawOperation.on("complete",
E=>this.onComplete(E)),g.watch(()=>this.tooltipOptions.enabled,E=>{this.tooltip=E?new I.Tooltip({view:this.view,info:this._tooltipInfo}):k.destroyMaybe(this.tooltip)},g.syncAndInitial),g.watch(()=>this._tooltipInfo,E=>{null!=this.tooltip&&(this.tooltip.info=E)},g.syncAndInitial)]);this.finishToolCreation()};L.destroy=function(){this.drawOperation=k.destroyMaybe(this.drawOperation);this.tooltip=k.destroyMaybe(this.tooltip);this._destroyAllVisualisations();this.view.map.remove(this.internalGraphicsLayer);
this.internalGraphicsLayer=k.destroyMaybe(this.internalGraphicsLayer);this._set("view",null)};L.completeCreateOperation=function(){this.drawOperation.complete()};L.onInputEvent=function(E){this.drawOperation.onInputEvent(E)};L.redo=function(){this.drawOperation.redo()};L.reset=function(){};L.undo=function(){this.drawOperation.undo()};L._destroyAllVisualisations=function(){this.handles.remove(K.outline);this.handles.remove(K.regularVertices);this.handles.remove(K.activeVertex);this.handles.remove("create-operation-graphic")};
L._createOrUpdateGraphic=function(E){if(null!=this._graphic)return this._updateGraphicGeometry(this._graphic,E),this._graphic;const M=this._graphic=new x({...this.graphicProperties,symbol:this.graphicSymbol});this._updateGraphicGeometry(M,E);this.internalGraphicsLayer.add(M);this.handles.add(this.initializeGraphic(M));this.notifyChange("graphic");this.handles.add(n.makeHandle(()=>{this.internalGraphicsLayer.remove(M);k.destroyMaybe(M);this._graphic===M&&(this._graphic=null)}),"create-operation-graphic");
return M};L._updateGraphicGeometry=function(E,M){E.geometry=M};L._getCreateOperationGeometry=function(E={operationComplete:!1}){var {drawOperation:M}=this;if(null==M||0===M.numVertices)return null;const {coordinateHelper:N,view:T}=M;var Y=M.stagedVertex,U=M.committedVertices;M=U.slice();var ja=null!=Y;ja&&M.push(N.pointToArray(Y));var ra=ja?N.pointToArray(Y):U.splice(-1)[0];Y=M.length;ja=T.spatialReference;const qa="3d"===T.type&&"global"===T.viewingMode,pa=new A;switch(this.geometryType){case "point":case "mesh":pa.regularVertices=
U;pa.activeVertex=ra;pa.full=N.arrayToPoint(M[0]);break;case "multipoint":pa.regularVertices=U;pa.activeVertex=ra;0<Y&&(pa.full=h.createMultipoint(M,ja));break;case "polyline":pa.regularVertices=U;pa.activeVertex=ra;0<Y&&(pa.full=h.createPolyline([M],ja,qa));break;case "polygon":pa.regularVertices=U;pa.activeVertex=ra;0<Y&&(pa.full=h.createPolygon([M],ja,qa,!0));break;case "circle":0<Y&&(U=y.createViewAlignedCoordinateSystem(T,M[0]),1===Y&&E.operationComplete?(E=M[0],ra=U.makeMapPoint(E[0]+48*T.resolution,
E[1]),pa.circle=h.createCircle([E,ra],U,!0),pa.full=null!=pa.circle?pa.circle.geometry:null):2===Y&&(this.forceUniformSize?(pa.circle=h.createCircle(M,U,this.centered),pa.full=null!=pa.circle?pa.circle.geometry:null):(pa.rectangle=h.createEllipse(M,U,this.centered),pa.full=pa.rectangle.geometry)));break;case "rectangle":0<Y&&(U=y.createViewAlignedCoordinateSystem(T,M[0]),1===Y&&E.operationComplete?(E=M[0],ra=U.makeMapPoint(E[0]+48*T.resolution,E[1]),pa.rectangle=h.createSquare([E,ra],U,!0),pa.full=
pa.rectangle.geometry):2===Y&&(pa.rectangle=this.forceUniformSize?h.createSquare(M,U,this.centered):h.createRectangle(M,U,this.centered),pa.full=pa.rectangle.geometry));break;default:return null}switch(this.geometryType){case "polyline":pa.outline=1<Y?h.createPolyline([M],ja,qa):null;break;case "polygon":pa.outline=1<Y?h.createPolygon([M],ja,qa):null;break;case "circle":case "rectangle":pa.outline="polygon"===pa.full?.type?h.createPolygon(pa.full.rings,ja,qa):null}return pa};L.initializeGraphic=function(E){return null};
L.onComplete=function(E){this._updateGraphic();let M=null;if(this.drawOperation.isCompleted){const N=this._getCreateOperationGeometry({operationComplete:!0});null!=N&&(M=this._createOrUpdateGraphic(N.full).clone())}this._createOperationGeometry=null;this.emit("complete",{graphic:M,...E})};L.onCursorUpdate=function(E){this._updateGraphic();this.emit("cursor-update",E)};L.onDeactivate=function(){this.drawOperation.isCompleted||this.drawOperation.cancel()};L.onVertexAdd=function(E){this._updateGraphic();
this.emit("vertex-add",E)};L.onVertexRemove=function(E){this._updateGraphic();this.emit("vertex-remove",E)};L.onVertexUpdate=function(E){this._updateGraphic();this.emit("vertex-update",E)};L._updateGraphic=function(){const E=this._getCreateOperationGeometry();this._createOperationGeometry=E;null==E?this._destroyAllVisualisations():(null!=E.outline?this.handles.add(this.onOutlineChanged(E.outline),K.outline):this.handles.remove(K.outline),null!=E.regularVertices?this.handles.add(this.onRegularVerticesChanged(E.regularVertices),
K.regularVertices):this.handles.remove(K.regularVertices),null!=E.activeVertex?this.handles.add(this.onActiveVertexChanged(E.activeVertex),K.activeVertex):this.handles.remove(K.activeVertex),null!=E.full?this._createOrUpdateGraphic(E.full):this.handles.remove("create-operation-graphic"))};r._createClass(H,[{key:"_defaultElevation",get:function(){return f.createLength(this.defaultZ,"meters")}},{key:"canRedo",get:function(){return this.drawOperation.canRedo}},{key:"canUndo",get:function(){return this.drawOperation.canUndo}},
{key:"centered",set:function(E){this._set("centered",E);this._updateGraphic()}},{key:"enabled",set:function(E){this.drawOperation.interactive=E;this._set("enabled",E)}},{key:"forceUniformSize",set:function(E){this._set("forceUniformSize",E);this._updateGraphic()}},{key:"graphic",get:function(){return this._graphic}},{key:"graphicSymbol",set:function(E){this._set("graphicSymbol",E);null!=this._graphic&&(this._graphic.symbol=E)}},{key:"updating",get:function(){return this.drawOperation?.updating??!1}},
{key:"_tooltipInfo",get:function(){const {drawOperation:E}=this;if(!E)return null;switch(this.geometryType){case "point":return this._drawPointTooltipInfo;case "polyline":return this._drawPolylineTooltipInfo;case "polygon":return this._drawPolygonTooltipInfo;case "rectangle":return this._drawRectangleTooltipInfo;case "circle":return this._drawCircleTooltipInfo;case "mesh":return this._drawMeshTooltipInfo;default:return null}}},{key:"_drawPointTooltipInfo",get:function(){const {view:E,graphic:M}=this,
N=M?.geometry;return"point"!==N?.type||"2d"===E.type&&0===this.defaultZ?null:new F.DrawPointTooltipInfo({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,viewType:E.type,helpMessage:t.getDrawHelpMessage("point",N,E)})}},{key:"_drawPolylineTooltipInfo",get:function(){var E=this._createOperationGeometry;E=null!=E?E.full:null;if("polyline"!==E?.type)return null;const M=z.autoLengthByElevationMode(E,this._elevationMode),{view:N}=this;return new F.DrawPolylineTooltipInfo({tooltipOptions:this.tooltipOptions,
elevation:this._elevationTooltipDetail,totalLength:M??f.zeroMeters,viewType:N.type,helpMessage:t.getDrawHelpMessage("polyline",E,N)})}},{key:"_drawPolygonTooltipInfo",get:function(){var E=this._createOperationGeometry;E=null!=E?E.full:null;if("polygon"!==E?.type)return null;const M=G.autoAreaByElevationMode(E,this._elevationMode),{view:N}=this;return new F.DrawPolygonTooltipInfo({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,area:M??f.zeroSquareMeters,viewType:N.type,helpMessage:t.getDrawHelpMessage("polygon",
E,N)})}},{key:"_drawMeshTooltipInfo",get:function(){const {view:E,graphic:M}=this,N=M?.geometry;return"mesh"!==N?.type||"2d"===E.type&&0===this.defaultZ?null:new F.DrawMeshTooltipInfo({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,viewType:E.type,helpMessage:t.getDrawHelpMessage("mesh",N,E)})}},{key:"_drawRectangleTooltipInfo",get:function(){return null==this.drawOperation?null:new F.DrawRectangleTooltipInfo({tooltipOptions:this.tooltipOptions,xSize:this._xSize??f.zeroMeters,
ySize:this._ySize??f.zeroMeters,area:this._fullGeometryArea??f.zeroSquareMeters})}},{key:"_drawCircleTooltipInfo",get:function(){if(null==this.drawOperation)return null;const E=this.forceUniformSize;return new F.DrawCircleTooltipInfo({tooltipOptions:this.tooltipOptions,radius:E?this._circleRadius??f.zeroMeters:null,xSize:E?null:this._xSize??f.zeroMeters,ySize:E?null:this._ySize??f.zeroMeters,area:this._fullGeometryArea??f.zeroSquareMeters})}},{key:"_circleRadius",get:function(){const E=this._createOperationGeometry;
return null!=E&&null!=E.circle&&null!=E.circle.center&&null!=E.circle.edge?z.autoHorizontalDistanceByElevationModeBetweenPoints(E.circle.center,E.circle.edge,this._elevationMode):null}},{key:"_xSize",get:function(){var E=this._createOperationGeometry;if(null==E?.rectangle)return null;({midpoints:E}=E.rectangle);return null!=E?z.autoHorizontalDistanceByElevationModeBetweenPoints(E.left,E.right,this._elevationMode):null}},{key:"_ySize",get:function(){var E=this._createOperationGeometry;if(null==E?.rectangle)return null;
({midpoints:E}=E.rectangle);return null!=E?z.autoHorizontalDistanceByElevationModeBetweenPoints(E.top,E.bottom,this._elevationMode):null}},{key:"_fullGeometryArea",get:function(){var E=this._createOperationGeometry;E=null!=E?E.full:null;return"polygon"!==E?.type?null:G.autoAreaByElevationMode(E,this._elevationMode)}},{key:"_elevationTooltipDetail",get:function(){return{mode:this.drawOperation.elevationInfo.mode,...this._vertexTooltipElevation}}},{key:"_vertexTooltipElevation",get:function(){const {tooltipOptions:E,
view:M,drawOperation:N}=this;if(null==N)return this._defaultElevation;var T=N.stagedVertex??N.lastVertex;if(null==T||"2d"===M.type)return this._defaultElevation;T=(l.getConvertedElevation(M,T,N.elevationInfo,{mode:E.elevation.mode,offset:0})??0)*v.getMetersPerVerticalUnitForSR(T.spatialReference);return f.createLength(T,"meters")}},{key:"_elevationMode",get:function(){return this.drawOperation.isDraped?"on-the-ground":"absolute-height"}}]);return H}(p.HandleOwnerMixin(m.EventedMixin(q.InteractiveToolBase)));
e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_createOperationGeometry",void 0);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_defaultElevation",null);e.__decorate([c.property({value:!0})],a.DrawGraphicTool.prototype,"centered",null);e.__decorate([c.property({nonNullable:!0})],a.DrawGraphicTool.prototype,"defaultZ",void 0);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"drawOperation",void 0);e.__decorate([c.property({value:!0})],a.DrawGraphicTool.prototype,"enabled",
null);e.__decorate([c.property({value:!0})],a.DrawGraphicTool.prototype,"forceUniformSize",null);e.__decorate([c.property({constructOnly:!0})],a.DrawGraphicTool.prototype,"geometryType",void 0);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"graphic",null);e.__decorate([c.property({constructOnly:!0})],a.DrawGraphicTool.prototype,"graphicProperties",void 0);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"graphicSymbol",null);e.__decorate([c.property({constructOnly:!0})],a.DrawGraphicTool.prototype,
"hasZ",void 0);e.__decorate([c.property({constructOnly:!0,type:C})],a.DrawGraphicTool.prototype,"labelOptions",void 0);e.__decorate([c.property({constructOnly:!0})],a.DrawGraphicTool.prototype,"geometryToPlace",void 0);e.__decorate([c.property({constructOnly:!0})],a.DrawGraphicTool.prototype,"mode",void 0);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"snappingManager",void 0);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"snapToScene",void 0);e.__decorate([c.property()],a.DrawGraphicTool.prototype,
"tooltip",void 0);e.__decorate([c.property({constructOnly:!0,type:D})],a.DrawGraphicTool.prototype,"tooltipOptions",void 0);e.__decorate([c.property({readOnly:!0})],a.DrawGraphicTool.prototype,"type",void 0);e.__decorate([c.property({readOnly:!0})],a.DrawGraphicTool.prototype,"updating",null);e.__decorate([c.property({constructOnly:!0,nonNullable:!0})],a.DrawGraphicTool.prototype,"view",void 0);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_tooltipInfo",null);e.__decorate([c.property()],
a.DrawGraphicTool.prototype,"_drawPointTooltipInfo",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_drawPolylineTooltipInfo",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_drawPolygonTooltipInfo",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_drawMeshTooltipInfo",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_drawRectangleTooltipInfo",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_drawCircleTooltipInfo",null);e.__decorate([c.property()],
a.DrawGraphicTool.prototype,"_circleRadius",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_xSize",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_ySize",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_fullGeometryArea",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_elevationTooltipDetail",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,"_vertexTooltipElevation",null);e.__decorate([c.property()],a.DrawGraphicTool.prototype,
"_elevationMode",null);a.DrawGraphicTool=e.__decorate([b.subclass("esri.views.draw.DrawGraphicTool")],a.DrawGraphicTool);const K={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};a.CreateOperationGeometry=A;a.geometryTypeToDrawOperationGeometryType=function(J){switch(J){case "point":case "polyline":case "polygon":case "multipoint":return J;case "circle":case "rectangle":return"segment";case "mesh":return"point"}};Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),function(a,r,e,x,m,p,n,k,f,g,v,c,w){x=function(B){function u(d){d=
B.call(this,d)||this;d.elevationInfo=null;d.graphics=new c.GraphicsCollection;d.screenSizePerspectiveEnabled=!0;d.type="graphics";d.internal=!1;return d}a._inherits(u,B);var b=u.prototype;b.destroy=function(){this.removeAll();this.graphics.destroy()};b.add=function(d){this.graphics.add(d);return this};b.addMany=function(d){this.graphics.addMany(d);return this};b.removeAll=function(){this.graphics.removeAll();return this};b.remove=function(d){this.graphics.remove(d)};b.removeMany=function(d){this.graphics.removeMany(d)};
b.on=function(d,l){return a._get(a._getPrototypeOf(u.prototype),"on",this).call(this,d,l)};b.graphicChanged=function(d){this.emit("graphic-update",d)};return a._createClass(u)}(g.BlendLayer(v.ScaleRangeLayer(f)));r.__decorate([e.property({type:w})],x.prototype,"elevationInfo",void 0);r.__decorate([e.property(k.owningCollectionProperty(c.GraphicsCollection,"graphics"))],x.prototype,"graphics",void 0);r.__decorate([e.property({type:["show","hide"]})],x.prototype,"listMode",void 0);r.__decorate([e.property()],
x.prototype,"screenSizePerspectiveEnabled",void 0);r.__decorate([e.property({readOnly:!0})],x.prototype,"type",void 0);r.__decorate([e.property({constructOnly:!0})],x.prototype,"internal",void 0);return x=r.__decorate([n.subclass("esri.layers.GraphicsLayer")],x)})},"esri/views/draw/support/createUtils":function(){define("exports ../../../geometry ../../../core/arrayUtils ../../../core/lang ../../../core/unitUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Circle ../../../geometry/geometryEngine ../../../geometry/support/coordsUtils ../../../geometry/support/spatialReferenceUtils ./surfaceCoordinateSystems ../../../geometry/Point ../../../geometry/Multipoint ../../../geometry/Polyline ../../../geometry/Polygon".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b){function d(D,F){F=new w({x:D[0],y:D[1],spatialReference:F});2<D.length&&(F.z=D[2]);return F}function l(D,F,I,G=!0){D=x.clone(D);D.forEach(z=>{e.equals(z[0],z[z.length-1])&&1!==z.length||z.push(z[0])});D=new b({rings:D,spatialReference:F});D.rings.forEach(z=>{g.isClockwise(z,!1,!1)||z.reverse()});I&&g.unnormalizeGeometryOnDatelineCrossing(D);G&&D.isSelfIntersecting&&v.isValid(F)&&(D=f.simplify(D));return D}function h(D,F,I){const G=t(F[3],F[2],I),z=t(F[1],
F[2],I),A=t(F[0],F[1],I);F=t(F[0],F[3],I);return{geometry:D,midpoints:null!=G&&null!=z&&null!=A&&null!=F?{top:G,right:z,bottom:A,left:F}:null}}function t(D,F,I){q[0]=D.x;q[1]=D.y;q[2]=0;C[0]=F.x;C[1]=F.y;C[2]=0;p.lerp(q,q,C,.5);y.x=q[0];y.y=C[1];y.z=C[2];D=I.localToMap(y);return null!=D?d(D,I.spatialReference):null}const y=c.makeSurfacePoint(0,0,0),q=n.create(),C=n.create();a.createCircle=function(D,F,I,G){var z=F.mapToLocalMultiple(D),A=D=null;I?(D=z[0],A=z[1]):(D=z[0],I=z[1],A=Math.round(I.x-D.x),
I=Math.round(I.y-D.y),z=Math.max(Math.abs(A),Math.abs(I)),D=c.makeSurfacePoint(0<A?D.x+z/2:D.x-z/2,0<I?D.y+z/2:D.y-z/2),A=c.makeSurfacePoint(Math.abs(A)>Math.abs(I)?D.x-z/2:D.x,Math.abs(A)>Math.abs(I)?D.y:D.y-z/2));I=F.localToMap(D);z=F.localToMap(A);if(null==I||null==z)return null;F.doUnnormalization&&g.unnormalizeVerticesOnDatelineCrossing([[I,z]],F.spatialReference);I=d(I,F.spatialReference);z=d(z,F.spatialReference);const K=m.getMetersPerUnitForSR(F.spatialReference);var J=0;v.isValid(F.spatialReference)?
J=K*f.distance(I,z,null):(J=D.x-A.x,D=D.y-A.y,J=K*Math.sqrt(J*J+D*D)*(G||1));F=new k({center:I,radius:J,radiusUnit:"meters",spatialReference:F.spatialReference});return{geometry:l(F.rings,F.spatialReference,!1),center:I,edge:z}};a.createEllipse=function(D,F,I){function G(N){return c.makeSurfacePoint(J*Math.cos(N)+K.x,H*Math.sin(N)+K.y)}var z=F.mapToLocalMultiple(D);D=z[0];var A=z[1];z=Math.round(A.x-D.x);A=Math.round(A.y-D.y);const K=c.makeSurfacePoint(I?D.x:D.x+z/2,I?D.y:D.y+A/2),J=I?z:z/2,H=I?A:
A/2;I=[];D=2*Math.PI/60;for(z=0;60>z;z++)I.push(G(z*D));I.push(I[0]);const {spatialReference:L,doUnnormalization:E}=F;I=l([I.map(N=>F.localToMap(N)).filter(e.isSome)],L,E,!1);D=F.localToMap(G(Math.PI/2));z=F.localToMap(G(0));A=F.localToMap(G(-Math.PI/2));const M=F.localToMap(G(Math.PI));return{geometry:I,midpoints:null!=D&&null!=z&&null!=A&&null!=M?{top:d(D,L),right:d(z,L),bottom:d(A,L),left:d(M,L)}:null}};a.createMultipoint=function(D,F){return new B({points:D,spatialReference:F})};a.createPoint=
d;a.createPolygon=l;a.createPolyline=function(D,F,I){D=new u({paths:D,spatialReference:F});I&&g.unnormalizeGeometryOnDatelineCrossing(D);return D};a.createRectangle=function(D,F,I){var G=F.mapToLocalMultiple(D);1===G.length&&(D=G[0],G=[c.makeSurfacePoint(D.x-48,D.y+48),c.makeSurfacePoint(D.x+48,D.y-48),c.makeSurfacePoint(D.x+48,D.y-48),c.makeSurfacePoint(D.x-48,D.y+48)]);D=[];var z=G[0].x,A=G[0].y,K=G[1].x;G=G[1].y;if(I){I=Math.round(K-z);const J=Math.round(G-A);D.push(c.makeSurfacePoint(z-I,A-J),
c.makeSurfacePoint(K,A-J),c.makeSurfacePoint(K,G),c.makeSurfacePoint(z-I,G))}else D.push(c.makeSurfacePoint(z,A),c.makeSurfacePoint(K,A),c.makeSurfacePoint(K,G),c.makeSurfacePoint(z,G));I=l([D.map(J=>F.localToMap(J)).filter(e.isSome)],F.spatialReference,F.doUnnormalization,!0);return h(I,D,F)};a.createSquare=function(D,F,I){var G=F.mapToLocalMultiple(D);D=[];var z=G[0].x,A=G[0].y,K=Math.round(G[1].x-z);const J=Math.round(G[1].y-A);G=Math.max(Math.abs(K),Math.abs(J));I?(I=z+G,K=A+G,z-=G,A-=G,D.push(c.makeSurfacePoint(I,
A),c.makeSurfacePoint(z,A),c.makeSurfacePoint(z,K),c.makeSurfacePoint(I,K))):(I=0<K?z+G:z-G,G=0<J?A+G:A-G,D.push(c.makeSurfacePoint(z,A),c.makeSurfacePoint(I,A),c.makeSurfacePoint(I,G),c.makeSurfacePoint(z,G)));A=l([D.map(H=>F.localToMap(H)).filter(e.isSome)],F.spatialReference,F.doUnnormalization,!0);return h(A,D,F)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./ellipsoidUtils ./Point ./Polygon ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B){var u;m=u=function(b){function d(...h){h=b.call(this,...h)||this;h.center=null;h.geodesic=!1;h.numberOfPoints=60;h.radius=1E3;h.radiusUnit="meters";return h}a._inherits(d,b);var l=d.prototype;l.normalizeCtorArgs=function(h,t){if(!h||!h.center){if(h&&h.rings)return a._get(a._getPrototypeOf(d.prototype),"normalizeCtorArgs",this).call(this,h,t);h={center:h}}return{...a._get(a._getPrototypeOf(d.prototype),"normalizeCtorArgs",this).call(this),...h,...t}};l.initialize=
function(){var h=this.center;const t=this.numberOfPoints;this.hasZ=h?.hasZ??!1;if(0===this.rings.length&&h){var y=e.convertUnit(this.radius,this.radiusUnit,"meters"),q=h.spatialReference,C="geographic";if(q.isWebMercator)C="webMercator";else if(null!=(q.wkid&&B[q.wkid])||q.wkt&&0===q.wkt.indexOf("PROJCS"))C="projected";if(this.geodesic){let D;switch(C){case "webMercator":D=w.webMercatorToGeographic(h);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");
break;case "geographic":D=h}h=this._createGeodesicCircle(D,y,t);"webMercator"===C&&(h=w.geographicToWebMercator(h))}else{let D;"webMercator"===C||"projected"===C?D=y/this._convert2Meters(1,h.spatialReference):"geographic"===C&&(D=e.lengthToDegrees(y,"meters",f.getReferenceEllipsoid(h.spatialReference).radius));h=this._createPlanarCircle(h,D,t)}this.spatialReference=h.spatialReference;this.addRing(h.rings[0])}};l.clone=function(){const {center:h,numberOfPoints:t,radius:y,radiusUnit:q,geodesic:C}=this;
return new u({center:h?.clone(),numberOfPoints:t,radius:y,radiusUnit:q,geodesic:C})};l._createGeodesicCircle=function(h,t,y){let q=0;const C=[];for(;360>q;){const D=[0,0];c.directGeodeticSolver(D,[h.x,h.y],q,t);this.hasZ&&D.push(h.z);C.push(D);q+=360/y}C.push(C[0]);return new v(C)};l._createPlanarCircle=function(h,t,y){const q=[],C=2*Math.PI/y;for(let F=0;F<y;++F){var D=C*F;D=[h.x+Math.cos(-D)*t,h.y+Math.sin(-D)*t];this.hasZ&&D.push(h.z);q.push(D)}q.push(q[0]);return new v({spatialReference:h.spatialReference,
rings:[q]})};l._convert2Meters=function(h,t){if(t.wkid&&null!=B[t.wkid])t=B.values[B[t.wkid]];else{t=t.wkt;const y=t.lastIndexOf(",")+1,q=t.lastIndexOf("]]");t=parseFloat(t.substring(y,q))}return h*t};return a._createClass(d)}(v);r.__decorate([x.property({type:g})],m.prototype,"center",void 0);r.__decorate([x.property()],m.prototype,"geodesic",void 0);r.__decorate([x.property()],m.prototype,"numberOfPoints",void 0);r.__decorate([x.property()],m.prototype,"radius",void 0);r.__decorate([x.property()],
m.prototype,"radiusUnit",void 0);return m=u=r.__decorate([k.subclass("esri.geometry.Circle")],m)})},"esri/views/draw/support/surfaceCoordinateSystems":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/arrayUtils ../../../chunks/mat2d ../../../chunks/mat2df64 ../../../chunks/quat ../../../chunks/quatf64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/support/Axis ../../../geometry/Point".split(" "),function(a,r,e,x,m,p,n,k,f,g,v,c){function w(d,
l,h=null){return null!=h?[d,l,h]:[d,l]}function B(d,l,h=null){return null!=h?{x:d,y:l,z:h}:{x:d,y:l}}e=function(){function d(l){this.spatialReference=l}d.prototype.mapToLocalMultiple=function(l){return l.map(h=>this.mapToLocal(h)).filter(x.isSome)};r._createClass(d,[{key:"doUnnormalization",get:function(){return!1}}]);return d}();let u=function(d){function l(t,y,q=null){y=d.call(this,y)||this;y._defaultZ=q;y.transform=p.create();y.transformInv=p.create();y.transform=p.clone(t);m.invert(y.transformInv,
y.transform);return y}r._inherits(l,d);var h=l.prototype;h.makeMapPoint=function(t,y){return w(t,y,this._defaultZ)};h.mapToLocal=function(t){return B(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])};h.localToMap=function(t){return w(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this._defaultZ)};return r._createClass(l)}(e),
b=function(d){function l(t,y){var q=d.call(this,t.spatialReference)||this;q.view=t;q.defaultZ=null;q.pWS=g.create();q.tangentFrameUpWS=g.create();q.tangentFrameRightWS=g.create();q.tangentFrameForwardWS=g.create();q.localFrameRightWS=g.create();q.localFrameUpWS=g.create();q.worldToLocalTransform=k.create();q.localToWorldTransform=k.create();q.scale=1;q.scale=t.resolution;q.referenceMapPoint=y;q.defaultZ=y.hasZ?y.z:null;t=t.state.camera.viewRight;q.view.renderCoordsHelper.toRenderCoords(q.referenceMapPoint,
q.pWS);q.view.renderCoordsHelper.worldBasisAtPosition(q.pWS,v.Axis.X,q.tangentFrameRightWS);q.view.renderCoordsHelper.worldBasisAtPosition(q.pWS,v.Axis.Y,q.tangentFrameUpWS);q.view.renderCoordsHelper.worldBasisAtPosition(q.pWS,v.Axis.Z,q.tangentFrameForwardWS);y=g.create();f.scale(y,q.tangentFrameForwardWS,f.dot(t,q.tangentFrameForwardWS));f.subtract(q.localFrameRightWS,t,y);f.normalize(q.localFrameRightWS,q.localFrameRightWS);f.cross(q.localFrameUpWS,q.tangentFrameForwardWS,q.localFrameRightWS);
n.rotationTo(q.worldToLocalTransform,q.localFrameRightWS,q.tangentFrameRightWS);n.invert(q.localToWorldTransform,q.worldToLocalTransform);return q}r._inherits(l,d);var h=l.prototype;h.makeMapPoint=function(t,y){return w(t,y,this.defaultZ)};h.mapToLocal=function(t){const y=g.create();this.view.renderCoordsHelper.toRenderCoords(new c({x:t[0],y:t[1],spatialReference:this.spatialReference}),y);f.transformQuat(y,y,this.worldToLocalTransform);t=this.view.renderCoordsHelper.fromRenderCoords(y,this.view.spatialReference);
return null!=t?B(t.x/this.scale,t.y/this.scale):null};h.localToMap=function(t){const y=g.create();this.view.renderCoordsHelper.toRenderCoords(new c({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),y);f.transformQuat(y,y,this.localToWorldTransform);t=this.view.renderCoordsHelper.fromRenderCoords(y,this.view.spatialReference);return null!=t?w(t.x,t.y,this.defaultZ):null};r._createClass(l,[{key:"doUnnormalization",get:function(){return"global"===this.view.viewingMode}}]);return l}(e);
a.AffineCoordinateSystem=u;a.SceneViewCoordinateSystem=b;a.SurfaceCoordinateSystem=e;a.createViewAlignedCoordinateSystem=function(d,l){return"2d"===d.type?new u(d.state.transform,d.spatialReference,2<l.length?l[2]:null):"3d"===d.type?(l=2<l.length?new c({x:l[0],y:l[1],z:l[2],spatialReference:d.spatialReference}):new c({x:l[0],y:l[1],spatialReference:d.spatialReference}),new b(d,l)):null};a.makeMapPoint=w;a.makeSurfacePoint=B;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/support/helpMessageUtils":function(){define(["exports",
"../../../arcade/functions/centroid","../../../core/unitUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(a,r,e,x,m){const p=m.create();a.getDrawHelpMessage=function(n,k,f){switch(n){case "point":case "multipoint":return"point";case "polyline":return 2>(null!=k&&"polyline"===k.type&&k.paths.length?k.paths[0].length:0)?"polylineZeroVertices":"polylineOneVertex";case "polygon":return n=null!=k&&"polygon"===k.type&&k.rings.length?k.rings[0].length:0,3>n?"polylineZeroVertices":4>n?"polygonOneVertex":
"polygonTwoVertices";case "mesh":if("mesh"===k?.type&&"3d"===f?.type){({renderCoordsHelper:n}=f);({camera:f}=f.state);var {width:g,height:v,zmin:c,zmax:w,center:B,spatialReference:u}=k.extent;k=(w??0)-(c??0);var b=e.getMetersPerUnitForSR(u),d=r.getMetersPerVerticalUnitForSR(u),l=e.getMetersPerUnitForSR(n.spatialReference);k=Math.max(g*b,v*b,k*d)/l;x.set(p,B.x,B.y,B.z??0);n.toRenderCoords(p,u,p);n=k/f.computeScreenPixelSizeAt(p);n=n>1*f.width?"meshTooClose":20>n?"meshTooFar":"mesh"}else n=void 0;return n}};
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/centroid":function(){define(["exports","../../geometry/Point","../../geometry/support/intersectsBase"],function(a,r,e){function x(c,w,B){const u={x:0,y:0};w&&(u.z=0);B&&(u.m=0);let b=0;var d=c[0];for(let q=0;q<c.length;q++){const C=c[q];a:if(C.length!==d.length)var l=!1;else{for(l=0;l<C.length;l++)if(C[l]!==d[l]){l=!1;break a}l=!0}if(!1===l){l=m(d,C,w);var h=C,t=w,y=B;const D={x:(d[0]+h[0])/2,y:(d[1]+h[1])/2};t&&
(D.z=(d[2]+h[2])/2);t&&y?D.m=(d[3]+h[3])/2:y&&(D.m=(d[2]+h[2])/2);d=D;d.x*=l;d.y*=l;u.x+=d.x;u.y+=d.y;w&&(d.z*=l,u.z+=d.z);B&&(d.m*=l,u.m+=d.m);b+=l;d=C}}0<b?(u.x/=b,u.y/=b,w&&(u.z/=b),B&&(u.m/=b)):(u.x=c[0][0],u.y=c[0][1],w&&(u.z=c[0][2]),B&&w?u.m=c[0][3]:B&&(u.m=c[0][2]));return u}function m(c,w,B){const u=w[0]-c[0];c=w[1]-c[1];return B?(w=w[2]-w[2],Math.sqrt(u*u+c*c+w*w)):Math.sqrt(u*u+c*c)}function p(c,w,B=0){for(;c<B;)c+=w;for(B+=w;c>=B;)c-=w;return c}function n(c,w){return Math.atan2(w.y-c.y,
w.x-c.x)}function k(c,w,B){var u=c.x-w.x;c=c.y-w.y;var b=B.x-w.x;w=B.y-w.y;return Math.atan2(u*w-b*c,u*b+c*w)}const f=[];for(const c of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const w=c[0];for(let B=1;B<c.length;B++)f[c[B]]=w}const g=[];g[9002]=.3048;g[9003]=.3048006096012192;g[9095]=.3048007491;const v=[0,0];a.angle2D=function(c,w){return p(n(c,w),2*Math.PI)*(180/Math.PI)};a.angleBetween2D=function(c,w,B){return p(k(c,w,B),2*Math.PI)*(180/Math.PI)};
a.angleBetweenRad=k;a.angleRad=n;a.bearing2D=function(c,w){return p(Math.PI/2-n(c,w),2*Math.PI)*(180/Math.PI)};a.bearingBetween2D=function(c,w,B){return p(-1*k(c,w,B),2*Math.PI)*(180/Math.PI)};a.centroidMultiPoint=function(c){if(0===c.points.length)return null;var w=0;let B=0,u=0,b=0;for(let d=0;d<c.points.length;d++){const l=c.getPoint(d);!0===l.hasZ&&(u+=l.z);!0===l.hasM&&(b+=l.m);w+=l.x;B+=l.y;b+=l.m}w={x:w/c.points.length,y:B/c.points.length,spatialReference:null};w.spatialReference=c.spatialReference.toJSON();
!0===c.hasZ&&(w.z=u/c.points.length);!0===c.hasM&&(w.m=b/c.points.length);return new r(w)};a.centroidPolyline=function(c){const w={x:0,y:0,spatialReference:c.spatialReference.toJSON()},B={x:0,y:0,spatialReference:c.spatialReference.toJSON()};let u=0,b=0;for(let h=0;h<c.paths.length;h++)if(0!==c.paths[h].length){a:{var d=c.paths[h];var l=!0===c.hasZ;if(1>=d.length){d=0;break a}let t=0;for(let y=1;y<d.length;y++)t+=m(d[y-1],d[y],l);d=t}0===d?(d=x(c.paths[h],!0===c.hasZ,!0===c.hasM),w.x+=d.x,w.y+=d.y,
!0===c.hasZ&&(w.z+=d.z),!0===c.hasM&&(w.m+=d.m),++u):(l=x(c.paths[h],!0===c.hasZ,!0===c.hasM),B.x+=l.x*d,B.y+=l.y*d,!0===c.hasZ&&(B.z+=l.z*d),!0===c.hasM&&(B.m+=l.m*d),b+=d)}return 0<b?(B.x/=b,B.y/=b,!0===c.hasZ&&(B.z/=b),!0===c.hasM&&(B.m/=b),new r(B)):0<u?(w.x/=u,w.y/=u,!0===c.hasZ&&(B.z/=u),!0===c.hasM&&(w.m/=u),new r(w)):null};a.getMetersPerVerticalUnitForSR=function(c){return c.vcsWkid&&void 0!==f[c.vcsWkid]?g[f[c.vcsWkid]]:c.latestVcsWkid&&void 0!==f[c.latestVcsWkid]?g[f[c.latestVcsWkid]]:1};
a.pathsSelfIntersecting=function(c){for(let t=0;t<c.length;t++){const y=c[t];for(var w=0;w<y.length-1;w++){var B=y[w],u=y[w+1];for(var b=t+1;b<c.length;b++)for(var d=0;d<c[b].length-1;d++){var l=c[b][d],h=c[b][d+1];if(e.segmentIntersects(B,u,l,h,v)&&!(v[0]===B[0]&&v[1]===B[1]||v[0]===l[0]&&v[1]===l[1]||v[0]===u[0]&&v[1]===u[1]||v[0]===h[0]&&v[1]===h[1]))return!0}}w=y.length;if(!(3>w))for(B=0;B<=w-2;B++)for(u=y[B],b=y[B+1],d=B+2;d<=w-2;d++)if(l=y[d],h=y[d+1],e.segmentIntersects(u,b,l,h,v)&&!(v[0]===
u[0]&&v[1]===u[1]||v[0]===l[0]&&v[1]===l[1]||v[0]===b[0]&&v[1]===b[1]||v[0]===h[0]&&v[1]===h[1]))return!0}return!1};a.segmentLength3d=function(c,w,B){return Math.sqrt((c[0]-w[0])**2+(c[1]-w[1])**2+(void 0!==c[2]&&void 0!==w[2]?(c[2]*B-w[2]*B)**2:0))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/InteractiveToolBase":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Logger ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./interfaces ./ManipulatorCollection".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w){a.InteractiveToolBase=function(B){function u(d){d=B.call(this,d)||this;d.manipulators=new w.ManipulatorCollection;d.automaticManipulatorSelection=!0;d.hasGrabbedManipulators=!1;d.hasHoveredManipulators=!1;d.firstGrabbedManipulator=null;d.created=!1;d.removeIncompleteOnCancel=!0;d._editableFlags=new Map([[c.EditableFlag.MANAGER,!0],[c.EditableFlag.USER,!0]]);d._creationFinishedResolver=p.createResolver();return d}r._inherits(u,B);var b=u.prototype;b.destroy=function(){this.manipulators.destroy();
this._set("view",null)};b.onAdd=function(){this._syncVisible()};b.activate=function(){null==this.view?m.getLogger(this).error("Can't activate tool if view is not defined."):(this.view.focus(),this.onActivate())};b.deactivate=function(){this.onDeactivate()};b.handleInputEvent=function(d){this.onInputEvent(d)};b.handleInputEventAfter=function(d){this.onInputEventAfter(d)};b.setEditableFlag=function(d,l){this._editableFlags.set(d,l);this.manipulators.isToolEditable=this.internallyEditable;this._updateManipulatorAttachment();
d===c.EditableFlag.USER&&this.notifyChange("editable");this.onEditableChange();this.onManipulatorSelectionChanged()};b.getEditableFlag=function(d){return this._editableFlags.get(d)??!1};b.whenCreated=function(){return this._creationFinishedResolver.promise};b.onManipulatorSelectionChanged=function(){};b.onActivate=function(){};b.onDeactivate=function(){};b.onShow=function(){};b.onHide=function(){};b.onEditableChange=function(){};b.onInputEvent=function(d){};b.onInputEventAfter=function(d){};b.finishToolCreation=
function(){this.created||this._creationFinishedResolver.resolve(this);this._set("created",!0)};b._syncVisible=function(){this.initialized&&(this.visible?this._show():(this._hide(),this.active&&(this.view.activeTool=null)))};b._show=function(){this._updateManipulatorAttachment();this.onShow()};b._hide=function(){this._updateManipulatorAttachment();this.onHide()};b._updateManipulatorAttachment=function(){this.visible?this.manipulators.attach():this.manipulators.detach()};r._createClass(u,[{key:"active",
get:function(){return null!=this.view&&this.view.activeTool===this}},{key:"visible",set:function(d){this._get("visible")!==d&&(this._set("visible",d),this._syncVisible())}},{key:"editable",get:function(){return this.getEditableFlag(c.EditableFlag.USER)},set:function(d){this.setEditableFlag(c.EditableFlag.USER,d)}},{key:"updating",get:function(){return!1}},{key:"cursor",get:function(){return null}},{key:"hasFocusedManipulators",get:function(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}},
{key:"internallyEditable",get:function(){return this.getEditableFlag(c.EditableFlag.USER)&&this.getEditableFlag(c.EditableFlag.MANAGER)}}]);return u}(x);e.__decorate([n.property({constructOnly:!0})],a.InteractiveToolBase.prototype,"view",void 0);e.__decorate([n.property({readOnly:!0})],a.InteractiveToolBase.prototype,"active",null);e.__decorate([n.property({value:!0})],a.InteractiveToolBase.prototype,"visible",null);e.__decorate([n.property({value:!0})],a.InteractiveToolBase.prototype,"editable",
null);e.__decorate([n.property({readOnly:!0})],a.InteractiveToolBase.prototype,"manipulators",void 0);e.__decorate([n.property({readOnly:!0})],a.InteractiveToolBase.prototype,"updating",null);e.__decorate([n.property()],a.InteractiveToolBase.prototype,"cursor",null);e.__decorate([n.property({readOnly:!0})],a.InteractiveToolBase.prototype,"automaticManipulatorSelection",void 0);e.__decorate([n.property()],a.InteractiveToolBase.prototype,"hasFocusedManipulators",null);e.__decorate([n.property()],a.InteractiveToolBase.prototype,
"hasGrabbedManipulators",void 0);e.__decorate([n.property()],a.InteractiveToolBase.prototype,"hasHoveredManipulators",void 0);e.__decorate([n.property()],a.InteractiveToolBase.prototype,"firstGrabbedManipulator",void 0);e.__decorate([n.property({readOnly:!0})],a.InteractiveToolBase.prototype,"created",void 0);e.__decorate([n.property({readOnly:!0})],a.InteractiveToolBase.prototype,"removeIncompleteOnCancel",void 0);a.InteractiveToolBase=e.__decorate([v.subclass("esri.views.interactive.InteractiveToolBase")],
a.InteractiveToolBase);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/ManipulatorCollection":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/Collection"],function(a,r,e){a.ManipulatorVisibilityPredicate=void 0;(function(m){m[m.WhenToolEditable=0]="WhenToolEditable";m[m.WhenToolNotEditable=1]="WhenToolNotEditable";m[m.Always=2]="Always"})(a.ManipulatorVisibilityPredicate||(a.ManipulatorVisibilityPredicate={}));let x=function(){function m(){this._isToolEditable=
!0;this._manipulators=new e;this._resourceContexts={manipulator3D:{}};this._attached=!1}var p=m.prototype;p.add=function(n,k=a.ManipulatorVisibilityPredicate.WhenToolEditable){this.addMany([n],k)};p.addMany=function(n,k=a.ManipulatorVisibilityPredicate.WhenToolEditable){for(const f of n)n={manipulator:f,visibilityPredicate:k,attached:!1},this._manipulators.add(n),this._attached&&this._updateManipulatorAttachment(n)};p.remove=function(n){for(let k=0;k<this._manipulators.length;k++)if(this._manipulators.at(k).manipulator===
n){n=this._manipulators.splice(k,1)[0];this._detachManipulator(n);break}};p.removeAll=function(){this._manipulators.forEach(n=>{this._detachManipulator(n)});this._manipulators.removeAll()};p.attach=function(){this._manipulators.forEach(n=>{this._updateManipulatorAttachment(n)});this._attached=!0};p.detach=function(){this._manipulators.forEach(n=>{this._detachManipulator(n)});this._attached=!1};p.destroy=function(){this.detach();this._manipulators.forEach(({manipulator:n})=>{n.destroy&&n.destroy()});
this._manipulators.destroy();this._resourceContexts=null};p.on=function(n,k){return this._manipulators.on(n,f=>{k(f)})};p.forEach=function(n){for(const k of this._manipulators.items)n(k)};p.some=function(n){return this._manipulators.items.some(n)};p.toArray=function(){const n=[];this.forEach(k=>n.push(k.manipulator));return n};p.intersect=function(n,k){let f=null,g=Number.MAX_VALUE;this._manipulators.forEach(({manipulator:v,attached:c})=>{c&&v.interactive&&(c=v.intersectionDistance(n,k),null!=c&&
c<g&&(g=c,f=v))});return f};p._updateManipulatorAttachment=function(n){this._isManipulatorItemVisible(n)?this._attachManipulator(n):this._detachManipulator(n)};p._attachManipulator=function(n){n.attached||(n.manipulator.attach&&n.manipulator.attach(this._resourceContexts),n.attached=!0)};p._detachManipulator=function(n){if(n.attached){var k=n.manipulator;k.grabbing=!1;k.dragging=!1;k.hovering=!1;k.selected=!1;k.detach&&k.detach(this._resourceContexts);n.attached=!1}};p._isManipulatorItemVisible=function(n){return n.visibilityPredicate===
a.ManipulatorVisibilityPredicate.Always?!0:this._isToolEditable?n.visibilityPredicate===a.ManipulatorVisibilityPredicate.WhenToolEditable:n.visibilityPredicate===a.ManipulatorVisibilityPredicate.WhenToolNotEditable};r._createClass(m,[{key:"isToolEditable",set:function(n){this._isToolEditable=n}},{key:"length",get:function(){return this._manipulators.length}}]);return m}();a.ManipulatorCollection=x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/sketch/SketchLabelOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,r,e,x,m,p,n,k){e=function(f){function g(v){v=f.call(this,v)||this;v.enabled=!1;return v}a._inherits(g,f);return a._createClass(g)}(e);r.__decorate([x.property({type:Boolean,nonNullable:!0})],e.prototype,"enabled",void 0);return e=r.__decorate([k.subclass("esri.views.interactive.sketch.SketchLabelOptions")],e)})},"esri/views/interactive/sketch/SketchTooltipOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./SketchTooltipElevationOptions ./SketchTooltipVisibleElements".split(" "),
function(a,r,e,x,m,p,n,k,f,g){e=function(v){function c(w){w=v.call(this,w)||this;w.enabled=!1;w.elevation=new f.SketchTooltipElevationOptions;w.visibleElements=new g.SketchTooltipVisibleElements;w.visualVariables=null;return w}a._inherits(c,v);c.prototype.toJSON=function(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}};return a._createClass(c)}(e);r.__decorate([x.property({type:Boolean,nonNullable:!0})],e.prototype,"enabled",void 0);r.__decorate([x.property({type:f.SketchTooltipElevationOptions,
nonNullable:!0})],e.prototype,"elevation",void 0);r.__decorate([x.property({type:g.SketchTooltipVisibleElements,nonNullable:!0})],e.prototype,"visibleElements",void 0);r.__decorate([x.property()],e.prototype,"visualVariables",void 0);return e=r.__decorate([k.subclass("esri.widgets.Sketch.SketchTooltipOptions")],e)})},"esri/views/interactive/sketch/SketchTooltipElevationOptions":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,r,e,x,m,p,n,k,f){a.SketchTooltipElevationOptions=function(g){function v(c){c=g.call(this,c)||this;c.mode="absolute-height";return c}r._inherits(v,g);v.prototype.toJSON=function(){return{mode:this.mode}};return r._createClass(v)}(x);e.__decorate([m.property({type:String,nonNullable:!0})],a.SketchTooltipElevationOptions.prototype,"mode",void 0);a.SketchTooltipElevationOptions=e.__decorate([f.subclass("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],a.SketchTooltipElevationOptions);
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/sketch/SketchTooltipVisibleElements":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,r,e,x,m,p,n,k,f){a.SketchTooltipVisibleElements=function(g){function v(){var c=
g.apply(this,arguments)||this;c.distance=!0;c.elevation=!0;c.size=!0;c.scale=!0;c.rotation=!0;c.orientation=!0;c.totalLength=!0;c.area=!0;c.radius=!0;c.helpMessage=!1;return c}r._inherits(v,g);v.prototype.toJSON=function(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}};return r._createClass(v)}(x);e.__decorate([m.property({type:Boolean,nonNullable:!0})],a.SketchTooltipVisibleElements.prototype,
"distance",void 0);e.__decorate([m.property({type:Boolean,nonNullable:!0})],a.SketchTooltipVisibleElements.prototype,"elevation",void 0);e.__decorate([m.property({type:Boolean,nonNullable:!0})],a.SketchTooltipVisibleElements.prototype,"size",void 0);e.__decorate([m.property({type:Boolean,nonNullable:!0})],a.SketchTooltipVisibleElements.prototype,"scale",void 0);e.__decorate([m.property({type:Boolean,nonNullable:!0})],a.SketchTooltipVisibleElements.prototype,"rotation",void 0);e.__decorate([m.property({type:Boolean,
nonNullable:!0})],a.SketchTooltipVisibleElements.prototype,"orientation",void 0);e.__decorate([m.property({type:Boolean,nonNullable:!0})],a.SketchTooltipVisibleElements.prototype,"totalLength",void 0);e.__decorate([m.property({type:Boolean,nonNullable:!0})],a.SketchTooltipVisibleElements.prototype,"area",void 0);e.__decorate([m.property({type:Boolean,nonNullable:!0})],a.SketchTooltipVisibleElements.prototype,"radius",void 0);e.__decorate([m.property({type:Boolean,nonNullable:!0})],a.SketchTooltipVisibleElements.prototype,
"helpMessage",void 0);a.SketchTooltipVisibleElements=e.__decorate([f.subclass("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],a.SketchTooltipVisibleElements);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/DrawTooltipInfos":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/quantityUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ./SketchTooltipInfo".split(" "),
function(a,r,e,x,m,p,n){a.DrawPointTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type="draw-point";return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.DrawPointTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.DrawPointTooltipInfo.prototype,"elevation",void 0);e.__decorate([m.property()],a.DrawPointTooltipInfo.prototype,"viewType",void 0);e.__decorate([m.property()],a.DrawPointTooltipInfo.prototype,"helpMessage",
void 0);a.DrawPointTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.DrawPointTooltipInfo")],a.DrawPointTooltipInfo);a.DrawPolylineTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type="draw-polyline";g.totalLength=x.zeroMeters;return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.DrawPolylineTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.DrawPolylineTooltipInfo.prototype,"elevation",void 0);e.__decorate([m.property()],
a.DrawPolylineTooltipInfo.prototype,"totalLength",void 0);e.__decorate([m.property()],a.DrawPolylineTooltipInfo.prototype,"viewType",void 0);e.__decorate([m.property()],a.DrawPolylineTooltipInfo.prototype,"helpMessage",void 0);a.DrawPolylineTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],a.DrawPolylineTooltipInfo);a.DrawPolygonTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type="draw-polygon";g.area=x.zeroSquareMeters;return g}r._inherits(f,
k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.DrawPolygonTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.DrawPolygonTooltipInfo.prototype,"elevation",void 0);e.__decorate([m.property()],a.DrawPolygonTooltipInfo.prototype,"area",void 0);e.__decorate([m.property()],a.DrawPolygonTooltipInfo.prototype,"viewType",void 0);e.__decorate([m.property()],a.DrawPolygonTooltipInfo.prototype,"helpMessage",void 0);a.DrawPolygonTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],
a.DrawPolygonTooltipInfo);a.DrawMeshTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type="draw-mesh";return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.DrawMeshTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.DrawMeshTooltipInfo.prototype,"elevation",void 0);e.__decorate([m.property()],a.DrawMeshTooltipInfo.prototype,"viewType",void 0);e.__decorate([m.property()],a.DrawMeshTooltipInfo.prototype,"helpMessage",void 0);
a.DrawMeshTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.DrawMeshTooltipInfo")],a.DrawMeshTooltipInfo);a.DrawRectangleTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type="draw-rectangle";g.xSize=x.zeroMeters;g.ySize=x.zeroMeters;g.area=x.zeroSquareMeters;return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.DrawRectangleTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.DrawRectangleTooltipInfo.prototype,
"xSize",void 0);e.__decorate([m.property()],a.DrawRectangleTooltipInfo.prototype,"ySize",void 0);e.__decorate([m.property()],a.DrawRectangleTooltipInfo.prototype,"area",void 0);a.DrawRectangleTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],a.DrawRectangleTooltipInfo);a.DrawCircleTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type="draw-circle";g.radius=null;g.xSize=null;g.ySize=null;g.area=x.zeroSquareMeters;return g}r._inherits(f,k);
return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.DrawCircleTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.DrawCircleTooltipInfo.prototype,"radius",void 0);e.__decorate([m.property()],a.DrawCircleTooltipInfo.prototype,"xSize",void 0);e.__decorate([m.property()],a.DrawCircleTooltipInfo.prototype,"ySize",void 0);e.__decorate([m.property()],a.DrawCircleTooltipInfo.prototype,"area",void 0);a.DrawCircleTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],
a.DrawCircleTooltipInfo);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/SketchTooltipInfo":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,r,e,x,m,p,n,k,f){a.SketchTooltipInfo=
function(g){function v(c){c=g.call(this,c)||this;c.helpMessage=void 0;return c}r._inherits(v,g);return r._createClass(v)}(x);e.__decorate([m.property()],a.SketchTooltipInfo.prototype,"tooltipOptions",void 0);e.__decorate([m.property()],a.SketchTooltipInfo.prototype,"helpMessage",void 0);a.SketchTooltipInfo=e.__decorate([f.subclass("esri.views.interactive.tooltip.SketchTooltipInfo")],a.SketchTooltipInfo);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/Tooltip":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./css ./content/tooltipContentFactory ../../../widgets/support/widgetUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B){function u({container:l,contentWidget:h,screenPoint:t}){const {style:y}=l;null!=t&&null!=h?(y.display="block",l=B.isRTL(l),t=`translate(${Math.round(t.x)+d[0]*(l?-1:1)}px, ${Math.round(t.y)+d[1]}px)`,y.transform=l?`translate(-100%, 0) ${t}`:t):y.display="none"}var b=`${c.BASE}`;a.Tooltip=function(l){function h(y){y=l.call(this,y)||this;y.info=null;const q=document.createElement("div");q.classList.add(b);y._contentContainer=q;y._contentWidget=null;return y}r._inherits(h,
l);var t=h.prototype;t.initialize=function(){const y=this._contentContainer;this.addHandles([p.watch(()=>this.view.overlay?.surface,q=>{y.remove();q?.appendChild(y)},p.syncAndInitial),p.watch(()=>this.info,(q,C)=>{if(null!=this._contentWidget&&null!=q&&null!=C&&q.type===C.type)this._contentWidget.info=q;else if(this._contentWidget=m.destroyMaybe(this._contentWidget),q=w.tooltipContentFactory(this,q))this._contentWidget=q,q.container&&y.appendChild(q.container)},p.syncAndInitial),p.watch(()=>({container:this._contentContainer,
contentWidget:this._contentWidget,screenPoint:this._screenPoint}),u,p.syncAndInitial)])};t.destroy=function(){this._contentWidget=m.destroyMaybe(this._contentWidget);this._contentContainer.remove()};t.clear=function(){this.info=null};r._createClass(h,[{key:"_screenPoint",get:function(){const y=this.view.inputManager;return y?.multiTouchActive?null:y?.latestPointerLocation}},{key:"test",get:function(){return{contentContainer:this._contentContainer,visible:"none"!==this._contentContainer?.style.display}}}]);
return h}(x);e.__decorate([n.property({nonNullable:!0})],a.Tooltip.prototype,"view",void 0);e.__decorate([n.property()],a.Tooltip.prototype,"info",void 0);e.__decorate([n.property()],a.Tooltip.prototype,"_contentContainer",void 0);e.__decorate([n.property()],a.Tooltip.prototype,"_contentWidget",void 0);e.__decorate([n.property()],a.Tooltip.prototype,"_screenPoint",null);a.Tooltip=e.__decorate([v.subclass("esri.views.interactive.tooltip.Tooltip")],a.Tooltip);const d=[20,20];Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/css":function(){define(["exports"],function(a){a.BASE="esri-tooltip";a.CONTENT="esri-tooltip-content";a.HELP_MESSAGE="esri-tooltip-help-message";a.TABLE="esri-tooltip-table";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/tooltipContentFactory":function(){define("exports ./TooltipContentDrawCircle ./TooltipContentDrawMesh ./TooltipContentDrawPoint ./TooltipContentDrawPolygon ./TooltipContentDrawPolyline ./TooltipContentDrawRectangle ./TooltipContentExtentRotate ./TooltipContentExtentScale ./TooltipContentReshapeEdgeOffset ./TooltipContentTransformAbsolute ./TooltipContentTransformRotate ./TooltipContentTransformScale ./TooltipContentTranslateGraphic ./TooltipContentTranslateGraphicXY ./TooltipContentTranslateGraphicZ ./TooltipContentTranslateVertex ./TooltipContentTranslateVertexXY ./TooltipContentTranslateVertexZ".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h){a.tooltipContentFactory=function(t,y){if(null==y)return null;const q=document.createElement("div");switch(y.type){case "draw-point":return new x.TooltipContentDrawPoint({tooltip:t,info:y,container:q});case "draw-polygon":return new m.TooltipContentDrawPolygon({tooltip:t,info:y,container:q});case "draw-polyline":return new p.TooltipContentDrawPolyline({tooltip:t,info:y,container:q});case "draw-mesh":return new e.TooltipContentDrawMesh({tooltip:t,info:y,
container:q});case "draw-rectangle":return new n.TooltipContentDrawRectangle({tooltip:t,info:y,container:q});case "draw-circle":return new r.TooltipContentDrawCircle({tooltip:t,info:y,container:q});case "extent-rotate":return new k.TooltipContentExtentRotate({tooltip:t,info:y,container:q});case "extent-scale":return new f.TooltipContentExtentScale({tooltip:t,info:y,container:q});case "transform-absolute":return new v.TooltipContentTransformAbsolute({tooltip:t,info:y,container:q});case "transform-rotate":return new c.TooltipContentTransformRotate({tooltip:t,
info:y,container:q});case "transform-scale":return new w.TooltipContentTransformScale({tooltip:t,info:y,container:q});case "translate-graphic":return new B.TooltipContentTranslateGraphic({tooltip:t,info:y,container:q});case "translate-graphic-z":return new b.TooltipContentTranslateGraphicZ({tooltip:t,info:y,container:q});case "translate-graphic-xy":return new u.TooltipContentTranslateGraphicXY({tooltip:t,info:y,container:q});case "translate-vertex":return new d.TooltipContentTranslateVertex({tooltip:t,
info:y,container:q});case "translate-vertex-z":return new h.TooltipContentTranslateVertexZ({tooltip:t,info:y,container:q});case "translate-vertex-xy":return new l.TooltipContentTranslateVertexXY({tooltip:t,info:y,container:q});case "reshape-edge-offset":return new g.TooltipContentReshapeEdgeOffset({tooltip:t,info:y,container:q})}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawCircle":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../support/ValueByValue ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b){var d=`${g.CONTENT} ${`${g.CONTENT}--draw-rectangle`}`;a.TooltipContentDrawCircle=function(l){function h(){return l.apply(this,arguments)||this}r._inherits(h,l);h.prototype.render=function(){const {area:t,radius:y,xSize:q,ySize:C,tooltipOptions:D}=this.info,{visibleElements:F}=D,I=this._messagesTooltip.sketch;return b.tsx(c.TooltipContentWithHelpMessage,{className:d,helpMessage:this._getHelpMessage()},F.radius&&null!=y&&b.tsx(w.TooltipField,{title:I.radius,
value:this._formatLength(y)}),F.size&&null!=q&&null!=C&&b.tsx(w.TooltipField,{title:I.size,value:b.tsx(B.ValueByValue,{left:this._formatLength(q),right:this._formatLength(C)})}),F.area&&b.tsx(w.TooltipField,{title:I.area,value:this._formatArea(t)}))};return r._createClass(h)}(v.TooltipContent);a.TooltipContentDrawCircle=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],a.TooltipContentDrawCircle);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/tooltip/content/TooltipContent":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../intl ../../../../core/quantityFormatUtils ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../../../../support/getDefaultUnitForView ../../../../widgets/Widget ../../../../widgets/support/widgetUtils ../../../../widgets/support/decorators/messageBundle ../../../../intl/number".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){a.TooltipContent=function(b){function d(){return b.apply(this,arguments)||this}r._inherits(d,b);var l=d.prototype;l._getHelpMessage=function(h){const {info:t}=this,{tooltipOptions:y,helpMessage:q,viewType:C}=t;h=h??q;return y?.visibleElements?.helpMessage&&h?this._messagesTooltip?.sketch?.["3d"===C?"helpMessages3d":"helpMessages2d"]?.[h]:void 0};l._formatScale=function(h){return u.formatNumber(h,{style:"percent",maximumFractionDigits:0})};l._formatRelativeOrientation=
function(h){return u.formatNumber(h,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})};l._formatLength=function(h,t,y){return m.formatLength(this._messagesUnits,h,t??this._units.length,y)};l._formatRelativeLength=function(h){return m.formatRelativeLength(this._messagesUnits,h,this._units.length)};l._formatVerticalLength=function(h){return m.formatVerticalLength(this._messagesUnits,h,this._units.verticalLength)};l._formatRelativeVerticalLength=function(h){return m.formatRelativeVerticalLength(this._messagesUnits,
h,this._units.verticalLength)};l._formatTotalLength=function(h){return m.formatLength(this._messagesUnits,h,this._units.length)};l._formatArea=function(h){return m.formatArea(this._messagesUnits,h,this._units.area)};l._formatPercentage=function(h){return u.formatNumber(h.value,{style:"percent"})};r._createClass(d,[{key:"_units",get:function(){const h=v.getDefaultUnitForView(this.tooltip.view);return{length:h,verticalLength:h,area:h}}}]);return d}(c);e.__decorate([p.property()],a.TooltipContent.prototype,
"info",void 0);e.__decorate([p.property()],a.TooltipContent.prototype,"tooltip",void 0);e.__decorate([p.property()],a.TooltipContent.prototype,"_units",null);e.__decorate([B.messageBundle("esri/core/t9n/Units"),p.property()],a.TooltipContent.prototype,"_messagesUnits",void 0);e.__decorate([B.messageBundle("esri/views/interactive/tooltip/t9n/Tooltip"),p.property()],a.TooltipContent.prototype,"_messagesTooltip",void 0);a.TooltipContent=e.__decorate([g.subclass("esri.views.interactive.tooltip.content.TooltipContent")],
a.TooltipContent);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/support/TooltipContentWithHelpMessage":function(){define(["exports","../css","../../../../widgets/support/widgetUtils","../../../../widgets/support/jsxFactory"],function(a,r,e,x){a.TooltipContentWithHelpMessage=function({className:m,helpMessage:p},...n){n=n.filter(k=>!!k);return x.tsx("div",{class:e.classes(m,r.CONTENT)},0<n.length?x.tsx("div",{class:r.TABLE},...n):null,p?x.tsx("div",
{key:"help-message",class:r.HELP_MESSAGE},p):null)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/support/TooltipField":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ../../../../widgets/Widget ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c){const w=`${f.BASE}-field`;var B=`${w}__title`,u=`${w}__value`;a.TooltipField=function(b){function d(){return b.apply(this,arguments)||this}r._inherits(d,b);d.prototype.render=function(){return c.tsx("div",{class:w},c.tsx("div",{class:B},this.title),c.tsx("div",{class:u},this.value))};return r._createClass(d)}(g);e.__decorate([x.property()],a.TooltipField.prototype,"title",void 0);e.__decorate([x.property()],a.TooltipField.prototype,"value",void 0);a.TooltipField=
e.__decorate([k.subclass("esri.views.interactive.tooltip.support.TooltipField")],a.TooltipField);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/support/ValueByValue":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ../../../../widgets/Widget ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c){var w=`${f.BASE}-value-by-value`;a.ValueByValue=function(B){function u(){var b=B.apply(this,arguments)||this;b.divider="\u00d7";return b}r._inherits(u,B);u.prototype.render=function(){return c.tsx("div",{class:w},c.tsx("span",null,this.left),c.tsx("span",null,this.divider),c.tsx("span",null,this.right))};return r._createClass(u)}(g);e.__decorate([x.property()],a.ValueByValue.prototype,"left",void 0);e.__decorate([x.property()],a.ValueByValue.prototype,"divider",void 0);
e.__decorate([x.property()],a.ValueByValue.prototype,"right",void 0);a.ValueByValue=e.__decorate([k.subclass("esri.views.interactive.tooltip.support.ValueByValue")],a.ValueByValue);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawMesh":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT}--draw-mesh`;a.TooltipContentDrawMesh=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {elevation:h,tooltipOptions:t}=this.info,{visibleElements:y}=t,q=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},y.elevation&&u.tsx(w.TooltipField,{title:q.elevation,value:this._formatVerticalLength(h)}))};return r._createClass(l)}(v.TooltipContent);
a.TooltipContentDrawMesh=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],a.TooltipContentDrawMesh);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawPoint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT}--draw-point`;a.TooltipContentDrawPoint=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {elevation:h,tooltipOptions:t}=this.info,{visibleElements:y}=t,q=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},y.elevation&&u.tsx(w.TooltipField,{title:q.elevation,value:this._formatVerticalLength(h)}))};return r._createClass(l)}(v.TooltipContent);
a.TooltipContentDrawPoint=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],a.TooltipContentDrawPoint);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawPolygon":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--draw-polygon`}`;a.TooltipContentDrawPolygon=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {area:h,elevation:t,tooltipOptions:y,viewType:q}=this.info,{visibleElements:C}=y,D=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},C.elevation&&"2d"!==q&&u.tsx(w.TooltipField,{title:D.elevation,
value:this._formatVerticalLength(t)}),C.area&&u.tsx(w.TooltipField,{title:D.area,value:this._formatArea(h)}))};return r._createClass(l)}(v.TooltipContent);a.TooltipContentDrawPolygon=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],a.TooltipContentDrawPolygon);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawPolyline":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--draw-polyline`}`;a.TooltipContentDrawPolyline=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {elevation:h,totalLength:t,tooltipOptions:y,viewType:q}=this.info,{visibleElements:C}=y,D=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},C.elevation&&"2d"!==q&&u.tsx(w.TooltipField,{title:D.elevation,
value:this._formatVerticalLength(h)}),C.totalLength&&u.tsx(w.TooltipField,{title:D.totalLength,value:this._formatLength(t)}))};return r._createClass(l)}(v.TooltipContent);a.TooltipContentDrawPolyline=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],a.TooltipContentDrawPolyline);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawRectangle":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../support/ValueByValue ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b){var d=`${g.CONTENT} ${`${g.CONTENT}--draw-rectangle`}`;a.TooltipContentDrawRectangle=function(l){function h(){return l.apply(this,arguments)||this}r._inherits(h,l);h.prototype.render=function(){const {area:t,xSize:y,ySize:q,tooltipOptions:C}=this.info,{visibleElements:D}=C,F=this._messagesTooltip.sketch;return b.tsx(c.TooltipContentWithHelpMessage,{className:d,helpMessage:this._getHelpMessage()},D.size&&null!=y&&null!=q&&b.tsx(w.TooltipField,{title:F.size,
value:b.tsx(B.ValueByValue,{left:this._formatLength(y),right:this._formatLength(q)})}),D.area&&b.tsx(w.TooltipField,{title:F.area,value:this._formatArea(t)}))};return r._createClass(h)}(v.TooltipContent);a.TooltipContentDrawRectangle=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],a.TooltipContentDrawRectangle);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentExtentRotate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--extent-rotate`}`;a.TooltipContentExtentRotate=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {angle:h,tooltipOptions:t}=this.info,{visibleElements:y}=t,q=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},y.rotation&&u.tsx(w.TooltipField,{title:q.rotation,value:this._formatRelativeOrientation(h)}))};
return r._createClass(l)}(v.TooltipContent);a.TooltipContentExtentRotate=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],a.TooltipContentExtentRotate);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentExtentScale":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../support/ValueByValue ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b){var d=`${g.CONTENT} ${`${g.CONTENT}--extent-scale`}`;a.TooltipContentExtentScale=function(l){function h(){return l.apply(this,arguments)||this}r._inherits(h,l);h.prototype.render=function(){const t=this.info,{visibleElements:y}=t.tooltipOptions,q=this._messagesTooltip.sketch;return b.tsx(c.TooltipContentWithHelpMessage,{className:d,helpMessage:this._getHelpMessage()},y.size&&b.tsx(w.TooltipField,{title:q.size,value:b.tsx(B.ValueByValue,{left:this._formatLength(t.xSize),
right:this._formatLength(t.ySize)})}),y.scale&&b.tsx(w.TooltipField,{title:q.scale,value:b.tsx(B.ValueByValue,{left:this._formatScale(t.xScale),right:this._formatScale(t.yScale)})}))};return r._createClass(h)}(v.TooltipContent);a.TooltipContentExtentScale=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],a.TooltipContentExtentScale);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentReshapeEdgeOffset":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--reshape-edge-offset`}`;a.TooltipContentReshapeEdgeOffset=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {area:h,distance:t,totalLength:y,tooltipOptions:q}=this.info,{visibleElements:C}=q,D=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},C.distance&&u.tsx(w.TooltipField,{title:D.distance,
value:this._formatRelativeLength(t)}),C.area&&null!=h&&u.tsx(w.TooltipField,{title:D.area,value:this._formatArea(h)}),C.totalLength&&null!=y&&u.tsx(w.TooltipField,{title:D.totalLength,value:this._formatLength(y)}))};return r._createClass(l)}(v.TooltipContent);a.TooltipContentReshapeEdgeOffset=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],a.TooltipContentReshapeEdgeOffset);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTransformAbsolute":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/quantityFormatUtils ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b){var d=`${v.CONTENT} ${`${v.CONTENT}--transform-absolute`}`;a.TooltipContentTransformAbsolute=function(l){function h(){return l.apply(this,arguments)||this}r._inherits(h,l);h.prototype.render=function(){const {info:t}=this,{visibleElements:y}=t.tooltipOptions,q=this._messagesTooltip.sketch;return b.tsx(w.TooltipContentWithHelpMessage,{className:d,helpMessage:this._getHelpMessage()},y.orientation&&null!=t.orientation&&b.tsx(B.TooltipField,{key:"orientation",
title:q.orientation,value:x.formatAngle(t.orientation,t.rotationType,t.orientationPrecision)}),y.size&&null!=t.size&&b.tsx(B.TooltipField,{key:"size",title:q.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}))};return r._createClass(h)}(c.TooltipContent);a.TooltipContentTransformAbsolute=e.__decorate([g.subclass("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],a.TooltipContentTransformAbsolute);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/tooltip/content/TooltipContentTransformRotate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/quantityFormatUtils ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b){var d=`${v.CONTENT} ${`${v.CONTENT}--transform-rotate`}`;a.TooltipContentTransformRotate=function(l){function h(){return l.apply(this,arguments)||this}r._inherits(h,l);h.prototype.render=function(){const {info:t}=this,{visibleElements:y}=t.tooltipOptions,q=this._messagesTooltip.sketch;return b.tsx(w.TooltipContentWithHelpMessage,{className:d,helpMessage:this._getHelpMessage()},y.rotation&&null!=t.rotation&&b.tsx(B.TooltipField,{key:"rotation",title:q.rotation,
value:x.formatRelativeAngle(t.rotation,t.rotationType,t.rotationPrecision)}),y.orientation&&null!=t.orientation&&b.tsx(B.TooltipField,{key:"orientation",title:q.orientation,value:x.formatAngle(t.orientation,t.rotationType,t.orientationPrecision)}))};return r._createClass(h)}(c.TooltipContent);a.TooltipContentTransformRotate=e.__decorate([g.subclass("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],a.TooltipContentTransformRotate);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/tooltip/content/TooltipContentTransformScale":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--transform-scale`}`;a.TooltipContentTransformScale=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {info:h}=this,{visibleElements:t}=h.tooltipOptions,y=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},t.scale&&null!=h.scale&&u.tsx(w.TooltipField,{key:"scale",title:y.scale,value:this._formatPercentage(h.scale)}),
t.size&&null!=h.size&&u.tsx(w.TooltipField,{key:"size",title:y.size,value:this._formatLength(h.size,h.sizeUnit,h.sizePrecision)}))};return r._createClass(l)}(v.TooltipContent);a.TooltipContentTransformScale=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],a.TooltipContentTransformScale);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateGraphic":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--translate-graphic`}`;a.TooltipContentTranslateGraphic=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {info:h}=this,{visibleElements:t}=h.tooltipOptions,y=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},t.distance&&u.tsx(w.TooltipField,{title:y.distance,value:this._formatLength(h.distance)}))};
return r._createClass(l)}(v.TooltipContent);a.TooltipContentTranslateGraphic=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],a.TooltipContentTranslateGraphic);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateGraphicXY":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--translate-graphic-xy`}`;a.TooltipContentTranslateGraphicXY=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {info:h}=this,{visibleElements:t}=h.tooltipOptions,y=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},t.distance&&u.tsx(w.TooltipField,{title:y.distance,value:this._formatRelativeLength(h.distance)}))};
return r._createClass(l)}(v.TooltipContent);a.TooltipContentTranslateGraphicXY=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],a.TooltipContentTranslateGraphicXY);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateGraphicZ":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--translate-graphic-z`}`;a.TooltipContentTranslateGraphicZ=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {info:h}=this,{visibleElements:t}=h.tooltipOptions,y=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},t.distance&&u.tsx(w.TooltipField,{title:y.distance,value:this._formatRelativeVerticalLength(h.distance)}))};
return r._createClass(l)}(v.TooltipContent);a.TooltipContentTranslateGraphicZ=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],a.TooltipContentTranslateGraphicZ);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateVertex":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--translate-vertex`}`;a.TooltipContentTranslateVertex=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {distance:h,elevation:t,area:y,totalLength:q,tooltipOptions:C}=this.info,{visibleElements:D}=C,F=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},D.distance&&u.tsx(w.TooltipField,{title:F.distance,
value:this._formatLength(h)}),D.elevation&&null!=t&&u.tsx(w.TooltipField,{title:F.elevation,value:this._formatVerticalLength(t)}),D.area&&null!=y&&u.tsx(w.TooltipField,{title:F.area,value:this._formatArea(y)}),D.totalLength&&null!=q&&u.tsx(w.TooltipField,{title:F.totalLength,value:this._formatLength(q)}))};return r._createClass(l)}(v.TooltipContent);a.TooltipContentTranslateVertex=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],a.TooltipContentTranslateVertex);
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateVertexXY":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--translate-vertex`}`;a.TooltipContentTranslateVertexXY=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {area:h,distance:t,elevation:y,totalLength:q,tooltipOptions:C}=this.info,{visibleElements:D}=C,F=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},D.distance&&u.tsx(w.TooltipField,{title:F.distance,
value:this._formatRelativeLength(t)}),D.elevation&&null!=y&&u.tsx(w.TooltipField,{title:F.elevation,value:this._formatVerticalLength(y)}),D.area&&null!=h&&u.tsx(w.TooltipField,{title:F.area,value:this._formatArea(h)}),D.totalLength&&null!=q&&u.tsx(w.TooltipField,{title:F.totalLength,value:this._formatLength(q)}))};return r._createClass(l)}(v.TooltipContent);a.TooltipContentTranslateVertexXY=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],a.TooltipContentTranslateVertexXY);
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateVertexZ":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/Error ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){var b=`${g.CONTENT} ${`${g.CONTENT}--translate-vertex`}`;a.TooltipContentTranslateVertexZ=function(d){function l(){return d.apply(this,arguments)||this}r._inherits(l,d);l.prototype.render=function(){const {distance:h,elevation:t,tooltipOptions:y}=this.info,{visibleElements:q}=y,C=this._messagesTooltip.sketch;return u.tsx(c.TooltipContentWithHelpMessage,{className:b,helpMessage:this._getHelpMessage()},q.distance&&u.tsx(w.TooltipField,{title:C.distance,value:this._formatRelativeVerticalLength(h)}),
q.elevation&&null!=t&&u.tsx(w.TooltipField,{title:C.elevation,value:this._formatVerticalLength(t)}))};return r._createClass(l)}(v.TooltipContent);a.TooltipContentTranslateVertexZ=e.__decorate([f.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],a.TooltipContentTranslateVertexZ);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/automaticAreaMeasurementUtils":function(){define(["exports","./euclideanAreaMeasurementUtils","./geodesicAreaMeasurementUtils"],
function(a,r,e){function x(m,p,n=r.createEuclideanPlanarAreaCache()){return"on-the-ground"===p?(p=e.geodesicArea(m),null!=p?p:r.euclideanHorizontalPlanarArea(m,n)):r.euclideanPlanarArea(m,n)}a.autoArea2D=function(m,p=r.createEuclideanPlanarAreaCache()){return x(m,"on-the-ground",p)};a.autoAreaByElevationMode=x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/euclideanAreaMeasurementUtils":function(){define("exports ../../core/quantityUtils ../../core/unitUtils ../../chunks/earcut ../../chunks/vec3 ../../chunks/vec3f64 ../../geometry/projection ../../geometry/support/plane ../../geometry/support/triangle ./measurementUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g){function v(b,d,l=b.hasZ){const h=g.computeEuclideanMeasurementSR(b.spatialReference),t=e.areaUnitFromSpatialReference(h);if(null==t)return null;let y=0;for(const G of b.rings){var q=G.length;if(3>q)continue;const {positionsWorldCoords:z}=d;for(;z.length<q;)z.push(p.create());var C=B,D=m.set(u,0,0,0),F=1/q;for(let A=0;A<q;A++){var I=G[A];2>I.length?I=!1:(m.set(C,I[0],I[1],l?I[2]||0:0),I=!0);if(!I||!n.projectVectorToVector(C,b.spatialReference,z[A],h))return null;m.scaleAndAdd(D,
D,z[A],F)}C=k.fromPoints(z[0],z[1],D,k.wrap());if(0!==m.squaredLength(k.normal(C))){for(F=0;F<q;F++)k.projectPointLocal(C,D,z[F],z[F]);q=w(z);for(D=0;D<q.length;D+=3)y+=f.areaPoints2d(z[q[D]],z[q[D+1]],z[q[D+2]])}}return r.createArea(y,t)}function c(){return{positionsWorldCoords:[]}}function w(b){var d=x.earcut;const l=new Float64Array(2*b.length);for(let h=0;h<b.length;++h){const t=b[h],y=2*h;l[y]=t[0];l[y+1]=t[1]}return d.call(x,l,[],2)}const B=p.create(),u=p.create();a.computeEuclideanPlanarArea=
v;a.createEuclideanPlanarAreaCache=c;a.euclideanHorizontalPlanarArea=function(b,d=c()){return v(b,d,!1)};a.euclideanPlanarArea=function(b,d=c()){return v(b,d)};a.triangulate=w;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geodesicAreaMeasurementUtils":function(){define("exports ../../geometry ../../core/quantityUtils ../../geometry/geometryEngine ../../geometry/projection ../../geometry/support/geodesicUtils ./geodesicMeasurementUtils ../../geometry/SpatialReference".split(" "),
function(a,r,e,x,m,p,n,k){function f(c){return e.createArea(Math.abs(p.geodesicAreas([c],"square-meters")[0]),"square-meters")}function g(c){try{return e.createArea(Math.abs(x.geodesicArea(c,"square-meters")),"square-meters")}catch(w){return null}}function v(c){const w=[];return m.projectPolygonToWGS84ComparableLonLat(c,w)?e.createArea(Math.abs(p.geodesicAreas([{type:"polygon",rings:w,spatialReference:k.WGS84}],"square-meters")[0]),"square-meters"):null}a.geodesicArea=function(c){const {spatialReference:w}=
c;return n.geodesicMeasure(w,f,g,v,c)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/DrawOperation":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/HandleOwner ../../core/lang ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/diffUtils ../../layers/graphics/dehydratedFeatureComparison ../../support/elevationInfoUtils ../ViewingMode ./DrawingMode ./DrawManipulator ../interactive/coordinateHelper ../interactive/dragEventPipeline ../interactive/editGeometry/EditGeometry ../interactive/editGeometry/EditGeometryOperations ../interactive/sketch/SketchLabelOptions ../interactive/sketch/SketchTooltipOptions ../interactive/snapping/SnappingContext ../interactive/snapping/SnappingDragPipelineStep ../interactive/snapping/SnappingOperation ../interactive/snapping/snappingUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G,z,A){a.DrawOperation=function(K){function J(L){var E=K.call(this,L)||this;E._createOperationCompleted=!1;E._pointerDownStates=new Set;E._stagedScreenPoint=null;E._stagedPointerType=null;E.isDraped=!0;E.labelOptions=new D;E.tooltipOptions=new F;E.cursor=null;E.loading=!1;E.snapToSceneEnabled=null;E.lastVertex=null;null==L.elevationInfo&&(E.elevationInfo=b.getEffectiveElevationInfo(!!L.hasZ));return E}r._inherits(J,K);var H=J.prototype;
H.initialize=function(){const {geometryType:L,view:E}=this,M=E.spatialReference,N="viewingMode"in E.state?E.state.viewingMode:d.ViewingMode.Local,T="segment"===L||"multipoint"===L?"polyline":L;this.coordinateHelper=t.createCoordinateHelper(this.hasZ,this.hasM,M);this._editGeometryOperations=new C.EditGeometryOperations(new q.EditGeometry(T,this.coordinateHelper));this._snappingOperation=new z.SnappingOperation({view:E,constrainResult:ja=>null==ja?ja:this._getEffectiveDrawSurface()?.constrainZ(ja)});
this.addHandles([f.watch(()=>this.stagedVertex,ja=>{null!=ja&&this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(ja)}],operation:"apply",type:"vertex-update"})},{sync:!0,equals:(ja,ra)=>n.equalsMaybe(ja,ra,u.pointEquals)}),f.watch(()=>this.view.viewpoint,(ja,ra)=>{ja&&ra&&B.diff(ja,ra)&&this._onViewpointChange()})]);this._activeComponent=new q.Component(M,N);this._editGeometryOperations.data.components.push(this._activeComponent);
const Y=this.segmentLabels;null!=Y&&(Y.context={view:E,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles([f.watch(()=>this.labelOptions.enabled,ja=>{Y.visible=ja},f.syncAndInitial),this.on("cursor-update",()=>{const ja=this.stagedVertex;Y.stagedVertex=null!=ja?this.coordinateHelper.pointToVector(ja):null})]));this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],ja=>{const ra=
ja.vertices.map(pa=>({componentIndex:0,vertexIndex:pa.index,coordinates:this.coordinateHelper.vectorToArray(pa.pos)})),qa=ra.map(pa=>pa.coordinates);switch(ja.type){case "vertex-add":this.emit(ja.type,{...ja,added:qa,vertices:ra});break;case "vertex-update":this.emit(ja.type,{...ja,updated:qa,vertices:ra});break;case "vertex-remove":this.emit(ja.type,{...ja,removed:qa,vertices:ra})}ja=this._activeComponent.getLastVertex();ja=null!=ja?this.coordinateHelper.vectorToDehydratedPoint(ja.pos):null;null!=
ja&&null!=this.lastVertex&&u.pointEquals(this.lastVertex,ja)||(this.lastVertex=ja)}));const U=this._manipulator=new h.DrawManipulator({grabbableForEvent:ja=>"click"!==this.drawingMode?!0:"touch"===ja.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size});this.manipulators.add(U);U.grabbable="point"!==L;this.addHandles([this._createManipulatorDragPipeline(U),U.events.on("immediate-click",ja=>this._onImmediateClick(ja)),U.events.on("immediate-double-click",ja=>this._onImmediateDoubleClick(ja)),
f.watch(()=>({cursor:this.cursor,loading:this.loading}),({cursor:ja,loading:ra})=>{U.cursor=ra?"progress":ja},f.syncAndInitial)]);A.setupSnappingToggleHandles(this,()=>{const ja=this._getSnappingContext(this.view.inputManager.latestPointerType??"mouse");null!=this.snappingManager&&this.updatingHandles.addPromise(k.ignoreAbortErrors(this._snappingOperation.resnap(this.snappingManager,ja)))})};H.destroy=function(){n.destroyMaybe(this.segmentLabels);n.destroyMaybe(this._snappingOperation);this._editGeometryOperations=
n.destroyMaybe(this._editGeometryOperations)};H.cancel=function(){this.complete({aborted:!0})};H.commitStagedVertex=function(){this._snappingOperation.abort();if(null!=this.stagedVertex){const {stagedVertex:L}=this;this.stagedVertex=null;this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(L))}};H.complete=function(L){L=L&&L.aborted||!1;this._snappingOperation.abort();null!=this.snappingManager&&this.snappingManager.doneSnapping();"segment"===this.geometryType||"point"===
this.geometryType?this.commitStagedVertex():this.stagedVertex=null;this._createOperationCompleted=!("multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&2>this.numVertices||"polygon"===this.geometryType&&3>this.numVertices);(this.isCompleted||L)&&this.emit("complete",{vertices:this.vertices.map((E,M)=>({componentIndex:0,vertexIndex:M,coordinates:E})),aborted:L,type:"complete"})};H.onInputEvent=function(L){switch(L.type){case "pointer-down":this._pointerDownStates.add(L.pointerId);
break;case "pointer-up":this._pointerDownStates.delete(L.pointerId)}switch(L.type){case "pointer-move":return this._onPointerMove(L);case "hold":return this._onHold(L)}};H.redo=function(){this._editGeometryOperations.redo()};H.undo=function(){null!=this.snappingManager&&this.snappingManager.doneSnapping();this._editGeometryOperations.undo()};H._closeOnClickVertexIndex=function(L){const E=this._activeComponent;if("polygon"===this.geometryType&&2<E.vertices.length){if(this._vertexWithinPointerDistance(E.vertices[0].pos,
L))return 0;if(this._vertexWithinPointerDistance(E.vertices[E.vertices.length-1].pos,L))return E.vertices.length-1}return null};H._createManipulatorDragPipeline=function(L){switch(this.drawingMode){case "click":return this._createManipulatorDragPipelineClick(L);case "freehand":return this._createManipulatorDragPipelineFreehand(L);case "hybrid":return this._createManipulatorDragPipelineHybrid(L)}};H._createManipulatorDragPipelineClick=function(L){return y.createManipulatorDragEventPipeline(L,(E,M,
N,T)=>{const Y="touch"===T&&this._snappingEnabled;if(!this.isCompleted&&Y){var {snappingStep:U,cancelSnapping:ja}=G.createSnapDragEventPipelineStep({predicate:()=>Y,snappingManager:this.snappingManager,snappingContext:new I.SnappingContext({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:T,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles,useZ:!this._requiresScenePoint});N=N.next(ra=>{Y&&null!=this.snappingManager&&this.snappingManager.doneSnapping();
return ra}).next(ja);M.next(this._screenToMapDragEventStep()).next(ra=>{"start"===ra.action&&(this.stagedVertex=ra.mapStart,("segment"===this.geometryType||Y&&0===this.numVertices)&&this.commitStagedVertex());return ra}).next(y.sceneSnappingAtLocation(this.view,this.elevationInfo)).next(...U).next(ra=>{Y&&(this.stagedVertex=ra.mapEnd,"end"===ra.action&&this.commitStagedVertex());return ra}).next(ra=>{"end"!==ra.action||"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete();return ra})}})};
H._createManipulatorDragPipelineFreehand=function(L){return y.createManipulatorDragEventPipeline(L,(E,M)=>{this.isCompleted||M.next(this._screenToMapDragEventStep()).next(N=>{"start"===N.action&&(null==this.stagedVertex&&(this.stagedVertex=N.mapStart),"segment"===this.geometryType&&this.commitStagedVertex());return N}).next(N=>{switch(N.action){case "start":case "update":this.stagedVertex=N.mapEnd;"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case "end":this.complete()}return N})})};
H._createManipulatorDragPipelineHybrid=function(L){return y.createManipulatorDragEventPipeline(L,(E,M)=>{this.isCompleted||M.next(this._screenToMapDragEventStep()).next(N=>{"start"===N.action&&(null==this.stagedVertex&&(this.stagedVertex=N.mapStart),this.commitStagedVertex());return N}).next(N=>{switch(N.action){case "start":case "update":this.stagedVertex=N.mapEnd;"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case "end":"segment"!==this.geometryType&&
"point"!==this.geometryType||this.complete()}return N})})};H._getEffectiveDrawSurface=function(){if(null==this.elevationDrawSurface)return this.drawSurface;if(!this.coordinateHelper.hasZ())return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let L=this.defaultZ,E=!1;null!=this.elevationInfo&&"absolute-height"===this.elevationInfo.mode&&(E=!0);null!=this.snapToSceneEnabled&&(E=this.snapToSceneEnabled);null!=this.elevationInfo&&"on-the-ground"===this.elevationInfo.mode&&(E=!1);this._drawAtFixedElevation&&
(L=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),E=!1);if(E)return this.drawSurface;this.elevationDrawSurface.defaultZ=L;return this.elevationDrawSurface};H._mapToScreen=function(L){return this._getEffectiveDrawSurface()?.mapToScreen(L)};H._onHold=function(L){this._snappingOperation.abort();"click"===this.drawingMode&&"touch"===L.pointerType&&this._snappingEnabled&&(this.stagedVertex=L.mapPoint);L.stopPropagation()};H._onImmediateClick=function(L){if(!("mouse"===L.pointerType&&
2===L.button||this._manipulator.dragging)){var E=this._activeComponent;if(null!=this._closeOnClickVertexIndex(L.screenPoint))L.stopPropagation(),this.complete();else{var M=this._screenToMap(L.screenPoint);if(null!=M)switch(this.drawingMode){case "freehand":"point"===this.geometryType&&(null!=this.stagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(M)),this.complete());break;case "click":case "hybrid":this._snappingOperation.abort(),
null!=this.stagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(M)),("point"===this.geometryType||"segment"===this.geometryType&&2===E.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===E.vertices.length)&&this.complete()}L.stopPropagation()}}};H._onImmediateDoubleClick=function(L){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),L.stopPropagation())};H._onPointerMove=function(L){const E=
g.createScreenPoint(L.x,L.y);this._stagedScreenPoint=E;this._stagedPointerType=L.pointerType;const M=this._snappingOperation,N=this._manipulator;N.dragging||this._pointerDownStates.has(L.pointerId)||N.grabbing||!N.interactive?M.abort():(L.stopPropagation(),this._updateStagedVertexOnPointerMove(E,L.pointerType))};H._onViewpointChange=function(){const L=this._manipulator;!this._stagedScreenPoint||L.dragging||L.grabbing||!L.interactive?this._snappingOperation.abort():this._updateStagedVertexOnPointerMove(this._stagedScreenPoint,
this._stagedPointerType??"mouse")};H._updateStagedVertexOnPointerMove=function(L,E){const M=this._snappingOperation;var N=this._closeOnClickVertexIndex(L);if(null!=N)this._closeOnVertex(N),M.abort();else if(N=this._screenToMap(L),L=this._requiresScenePoint?this.drawSurface?.screenToMap(L):null,null==N)this.cursor=null,M.abort();else{this.cursor="crosshair";var T=this.snappingManager;null==T?(this.stagedVertex=N,M.abort()):(E=this._getSnappingContext(E),this.updatingHandles.addPromise(k.ignoreAbortErrors(M.snap({point:N,
scenePoint:L},T,E))))}};H._closeOnVertex=function(L){this.stagedVertex=null;L={componentIndex:0,vertexIndex:L,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[L].pos)};this.emit("cursor-update",{updated:null,vertices:[L],operation:"apply",type:"vertex-update"})};H._screenToMap=function(L){return this._getEffectiveDrawSurface()?.screenToMap(L)};H._screenToMapDragEventStep=function(){let L=null;return E=>{"start"===E.action&&(L=this._screenToMap(E.screenStart));if(null==
L)return null;const M=this._screenToMap(E.screenEnd);return null!=M?{...E,mapStart:L,mapEnd:M}:null}};H._vertexWithinPointerDistance=function(L,E){const M=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(L));null!=M?(L=M.x-E.x,E=M.y-E.y,E=25>=L*L+E*E):E=!1;return E};H._getSnappingContext=function(L){const E=this._drawAtFixedElevation?n.applySome(this.elevationDrawSurface,({defaultZ:M})=>M):null;return new I.SnappingContext({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,
pointer:L,visualizer:this.snappingVisualizer,selfSnappingZ:null!=E?{value:E,elevationInfo:this.elevationInfo}:null})};r._createClass(J,[{key:"_snappingEnabled",get:function(){return null!=this.snappingManager&&this.snappingManager.options.effectiveEnabled}},{key:"_requiresScenePoint",get:function(){const L=this._getEffectiveDrawSurface();return"3d"===this.view.type&&this.drawSurface!==L}},{key:"canRedo",get:function(){return this._editGeometryOperations.canRedo}},{key:"canUndo",get:function(){return this._editGeometryOperations.canUndo}},
{key:"committedVertices",get:function(){return this._activeComponent.vertices.map(L=>this.coordinateHelper.vectorToArray(L.pos))}},{key:"drawingMode",set:function(L){this._set("drawingMode",L??l.defaultDrawingMode)}},{key:"interactive",get:function(){return this._manipulator.interactive},set:function(L){this._manipulator.interactive=L}},{key:"isCompleted",get:function(){return this._createOperationCompleted}},{key:"numCommittedVertices",get:function(){return this._activeComponent.vertices.length}},
{key:"numVertices",get:function(){return null!=this.stagedVertex?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}},{key:"snappingOptions",get:function(){return null!=this.snappingManager?this.snappingManager.options:null}},{key:"stagedVertex",get:function(){return this._snappingOperation.stagedPoint},set:function(L){this._snappingOperation.stagedPoint=p.clone(L)}},{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"vertices",get:function(){const L=
this.committedVertices;null!=this.stagedVertex&&L.push(this.coordinateHelper.pointToArray(this.stagedVertex));return L}},{key:"_drawAtFixedElevation",get:function(){return("segment"===this.geometryType||"polygon"===this.geometryType)&&0<this.numCommittedVertices}}]);return J}(x.EventedMixin(m.HandleOwner));e.__decorate([v.property()],a.DrawOperation.prototype,"_snappingEnabled",null);e.__decorate([v.property()],a.DrawOperation.prototype,"defaultZ",void 0);e.__decorate([v.property()],a.DrawOperation.prototype,
"isDraped",void 0);e.__decorate([v.property({value:l.defaultDrawingMode})],a.DrawOperation.prototype,"drawingMode",null);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,"elevationDrawSurface",void 0);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,"elevationInfo",void 0);e.__decorate([v.property({constructOnly:!0,type:D})],a.DrawOperation.prototype,"labelOptions",void 0);e.__decorate([v.property({constructOnly:!0,type:F})],a.DrawOperation.prototype,
"tooltipOptions",void 0);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,"geometryType",void 0);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,"hasM",void 0);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,"hasZ",void 0);e.__decorate([v.property()],a.DrawOperation.prototype,"cursor",void 0);e.__decorate([v.property()],a.DrawOperation.prototype,"loading",void 0);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,
"manipulators",void 0);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,"drawSurface",void 0);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,"segmentLabels",void 0);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,"snappingManager",void 0);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,"snappingVisualizer",void 0);e.__decorate([v.property()],a.DrawOperation.prototype,"snapToSceneEnabled",void 0);e.__decorate([v.property()],
a.DrawOperation.prototype,"_snappingOperation",void 0);e.__decorate([v.property()],a.DrawOperation.prototype,"stagedVertex",null);e.__decorate([v.property()],a.DrawOperation.prototype,"lastVertex",void 0);e.__decorate([v.property()],a.DrawOperation.prototype,"updating",null);e.__decorate([v.property({constructOnly:!0})],a.DrawOperation.prototype,"view",void 0);a.DrawOperation=e.__decorate([w.subclass("esri.views.draw.DrawOperation")],a.DrawOperation);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/draw/DrawingMode":function(){define(["exports"],function(a){a.defaultDrawingMode="click";a.drawingModes=["freehand","hybrid","click"];Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/DrawManipulator":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/Evented"],function(a,r,e){let x=function(){function m({grabbableForEvent:n}){this.events=new e;this.interactive=!0;this.selectable=!1;this.cursor=null;this.grabbable=!0;this.grabbableForEvent=
n}var p=m.prototype;p.intersectionDistance=function(n,k){return 0};p.attach=function(){};p.detach=function(){};p.onElevationChange=function(){};p.onViewChange=function(){};return r._createClass(m)}();a.DrawManipulator=x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/coordinateHelper":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/vec2 ../../chunks/vec2f64 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ../../geometry/Point".split(" "),
function(a,r,e,x,m,p,n,k,f){var g;(function(B){B[B.Z=0]="Z";B[B.M=1]="M"})(g||(g={}));let v=function(){function B(b){this.spatialReference=b}var u=B.prototype;u.createVector=function(){return this._tag(x.create())};u.pointToVector=function(b){return this._tag(x.fromValues(b.x,b.y))};u.arrayToVector=function(b){return this._tag(x.fromValues(b[0],b[1]))};u.vectorToArray=function(b){return[b[0],b[1]]};u.pointToArray=function(b){return[b.x,b.y]};u.vectorToPoint=function(b,d=new f){d.x=b[0];d.y=b[1];d.z=
void 0;d.m=void 0;d.spatialReference=this.spatialReference;return d};u.arrayToPoint=function(b,d=new f){d.x=b[0];d.y=b[1];d.z=void 0;d.m=void 0;d.spatialReference=this.spatialReference;return d};u.vectorToDehydratedPoint=function(b,d={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){d.x=b[0];d.y=b[1];d.z=void 0;d.m=void 0;d.hasZ=!1;d.hasM=!1;d.spatialReference=this.spatialReference;return d};u.lerp=function(b,d,l,h){return e.lerp(h,b,d,l)};u.addDelta=
function(b,d,l){b[0]+=d;b[1]+=l};u.distance=function(b,d){return e.distance(b,d)};u.getZ=function(b,d){return d};u.hasZ=function(){return!1};u.getM=function(b,d){return d};u.hasM=function(){return!1};u.clone=function(b){return this._tag(x.fromArray(b))};u.copy=function(b,d){return e.copy(d,b)};u.fromXYZ=function(b){return this._tag(x.fromValues(b[0],b[1]))};u.toXYZ=function(b,d=p.create()){return m.set(d,b[0],b[1],0)};u.pointToXYZ=function(b,d=p.create()){return m.set(d,b.x,b.y,0)};u.equals=function(b,
d){return e.equals(b,d)};u._tag=function(b){return b};return r._createClass(B)}(),c=function(){function B(b,d){this._valueType=b;this.spatialReference=d}var u=B.prototype;u.createVector=function(){return this._tag(p.create())};u.pointToVector=function(b){return this._tag(p.fromValues(b.x,b.y,this._valueType===g.Z?b.z:b.m))};u.arrayToVector=function(b){return this._tag(p.fromValues(b[0],b[1],b[2]||0))};u.vectorToArray=function(b){return[b[0],b[1],b[2]]};u.pointToArray=function(b){return this._valueType===
g.Z?[b.x,b.y,b.z]:[b.x,b.y,b.m]};u.vectorToPoint=function(b,d=new f){d.x=b[0];d.y=b[1];d.z=this._valueType===g.Z?b[2]:void 0;d.m=this._valueType===g.M?b[2]:void 0;d.spatialReference=this.spatialReference;return d};u.arrayToPoint=function(b,d=new f){d.x=b[0];d.y=b[1];d.z=this._valueType===g.Z?b[2]:void 0;d.m=this._valueType===g.M?b[2]:void 0;d.spatialReference=this.spatialReference;return d};u.vectorToDehydratedPoint=function(b,d={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,
type:"point"}){const l=this._valueType===g.Z,h=this._valueType===g.M;d.x=b[0];d.y=b[1];d.z=l?b[2]:void 0;d.m=h?b[2]:void 0;d.hasZ=l;d.hasM=h;d.spatialReference=this.spatialReference;return d};u.lerp=function(b,d,l,h){return m.lerp(h,b,d,l)};u.addDelta=function(b,d,l,h){b[0]+=d;b[1]+=l;this._valueType===g.Z&&(b[2]+=h)};u.distance=function(b,d){return this._valueType===g.Z?m.distance(b,d):e.distance(b,d)};u.getZ=function(b,d){return this._valueType===g.Z?b[2]:d};u.hasZ=function(){return this._valueType===
g.Z};u.getM=function(b,d){return this._valueType===g.M?b[2]:d};u.hasM=function(){return this._valueType===g.M};u.clone=function(b){return this._tag(p.fromArray(b))};u.copy=function(b,d){return m.copy(d,b)};u.fromXYZ=function(b,d=0,l=0){return this._tag(p.fromValues(b[0],b[1],this._valueType===g.Z?2<b.length?b[2]:d:l))};u.toXYZ=function(b,d=p.create()){return m.set(d,b[0],b[1],this._valueType===g.Z?b[2]:0)};u.pointToXYZ=function(b,d=p.create()){return m.set(d,b.x,b.y,this._valueType===g.Z?b.z??0:0)};
u.equals=function(b,d){return m.equals(b,d)};u._tag=function(b){return b};return r._createClass(B)}(),w=function(){function B(b){this.spatialReference=b}var u=B.prototype;u.createVector=function(){return this._tag(k.create())};u.pointToVector=function(b){return this._tag(k.fromValues(b.x,b.y,b.z,b.m))};u.arrayToVector=function(b){return this._tag(k.fromValues(b[0],b[1],b[2]||0,b[3]||0))};u.vectorToArray=function(b){return[b[0],b[1],b[2],b[3]]};u.pointToArray=function(b){return[b.x,b.y,b.z,b.m]};u.vectorToPoint=
function(b,d=new f){d.x=b[0];d.y=b[1];d.z=b[2];d.m=b[3];d.spatialReference=this.spatialReference;return d};u.arrayToPoint=function(b,d=new f){d.x=b[0];d.y=b[1];d.z=b[2];d.m=b[3];d.spatialReference=this.spatialReference;return d};u.vectorToDehydratedPoint=function(b,d={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){d.x=b[0];d.y=b[1];d.z=b[2];d.m=b[3];d.hasZ=!0;d.hasM=!0;d.spatialReference=this.spatialReference;return d};u.lerp=function(b,d,l,h){return n.lerp(h,
b,d,l)};u.addDelta=function(b,d,l,h){b[0]+=d;b[1]+=l;b[2]+=h};u.distance=function(b,d){return m.distance(b,d)};u.getZ=function(b){return b[2]};u.hasZ=function(){return!0};u.getM=function(b){return b[3]};u.hasM=function(){return!0};u.clone=function(b){return this._tag(k.fromArray(b))};u.copy=function(b,d){return n.copy(d,b)};u.fromXYZ=function(b,d=0,l=0){return this._tag(k.fromValues(b[0],b[1],2<b.length?b[2]:d,l))};u.toXYZ=function(b,d=p.create()){return m.set(d,b[0],b[1],b[2])};u.pointToXYZ=function(b,
d=p.create()){return m.set(d,b.x,b.y,b.z??0)};u.equals=function(b,d){return n.equals(b,d)};u._tag=function(b){return b};return r._createClass(B)}();a.CoordinateHelper2D=v;a.CoordinateHelper3D=c;a.CoordinateHelper4D=w;a.createCoordinateHelper=function(B,u,b){return B&&u?new w(b):u?new c(g.M,b):B?new c(g.Z,b):new v(b)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/dragEventPipeline":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../core/arrayUtils ../../core/has ../../core/lang ../../core/mathUtils ../../core/screenUtils ../../chunks/vec3f64 ../../geometry/projection ../../layers/graphics/hydratedFeatures ../../layers/graphics/sources/interfaces ../../support/elevationInfoUtils ../ViewingMode ../draw/support/drawUtils ../../geometry/Point".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b){function d(A,K){let J=null,H=null;return L=>{if("cancel"===L.action)null!=H&&(H.execute({action:"cancel"}),H=J=null);else{var E={action:L.action,screenStart:L.start,screenEnd:L.screenPoint};"start"===L.action&&null==J&&(J=new z,H=new z,K(A,J,H,L.pointerType,E));null!=J&&J.execute(E);"end"===L.action&&null!=J&&(H=J=null)}}}function l(A,K){let J=null;return H=>{"start"===H.action&&(J=t(A,H.mapStart.spatialReference,K));if(null==J)return null;const L=H.mapEnd.x-
H.mapStart.x,E=H.mapEnd.y-H.mapStart.y,M=H.mapEnd.z-H.mapStart.z;J.move(L,E,M,H.action);return{...H,translationX:L,translationY:E,translationZ:M}}}function h(A,K){return null==A?null:A.spatialReference.equals(K)?A.clone():g.project(A,K)}function t(A,K,J){const H=A.geometry;K=v.hydratedSpatialReference(K);if(null==H)return null;if("mesh"===H.type)return y(A,H,K,J);const L=h(H,K),E=H.spatialReference;return null==L?null:{move:(M,N,T)=>{M=u.move(L.clone(),M,N,T);M.spatialReference.equals(E)?A.geometry=
M:A.geometry=g.project(M,E)}}}function y(A,K,J,H){if(K.vertexSpace.isRelative)return q(A,K,K.vertexSpace,J);if(!K.spatialReference.equals(J))return null;let L=0,E=0,M=0;return{move:(N,T,Y)=>{var U=N-L;const ja=T-E,ra=Y-M;if(U||ja||ra)U=new b(K.origin.x+U,K.origin.y+ja,(K.origin.z??0)+ra,K.origin.spatialReference),K.centerAt(U,{geographic:K.vertexSpace.isRelative?void 0:H===B.ViewingMode.Global}),A.notifyGeometryChanged(),L=N,E=T,M=Y}}}function q(A,K,J,H){const L=J.getOriginPoint(K.spatialReference),
E=h(L,H),M=K.spatialReference;return null==E?null:{move:(N,T,Y,U)=>{N=u.move(E.clone(),N,T,Y);N.spatialReference.equals(M)?J.setOriginFormPoint(N):(N=g.project(N,M),null!=N&&J.setOriginFormPoint(N));J.isGeoreferenced?A.notifyGeometryChanged():A.notifyMeshTransformChanged("end"===U?{action:c.MeshTransformUpdateAction.UpdateFastLocalOrigin}:{})}}}function C(A,K){const J=new Map;for(const H of K)J.set(H,p.clone(A[H]));return H=>{J.forEach((L,E)=>{A[E]=L});return H}}function D(A){return null!=A.geometry&&
"mesh"===A.geometry.type?F(A,A.geometry):C(A,["geometry"])}function F(A,K){const {vertexSpace:J}=K;if(J.isGeoreferenced){const E=K.vertexAttributes.clonePositional();return M=>{K.vertexAttributes=E;A.notifyGeometryChanged();return M}}const H=f.clone(J.origin),L=K.transform?.clone();return E=>{K.transform=L;K.vertexSpace.origin=H;A.notifyMeshTransformChanged();return E}}function I(A,K,J){const H=K.elevationProvider.getElevation(A.x,A.y,A.z??0,A.spatialReference,"scene")??0;A=v.clonePoint(A);A.z=H;
A.hasZ=!0;A.z=w.getZForElevationMode(A,K,J);return A}const G=()=>{};let z=function(){function A(){this.execute=G}A.prototype.next=function(K,J=new A){null!=K&&(this.execute=H=>{H=K(H);null!=H&&J.execute(H)});return J};return r._createClass(A)}();a.EventPipeline=z;a.addMapDelta=function(){let A=0,K=0,J=0;return H=>{"start"===H.action&&(A=H.mapStart.x,K=H.mapStart.y,J=H.mapStart.z);const L=H.mapEnd.x-A,E=H.mapEnd.y-K,M=H.mapEnd.z-J;A=H.mapEnd.x;K=H.mapEnd.y;J=H.mapEnd.z;return{...H,mapDeltaX:L,mapDeltaY:E,
mapDeltaZ:M,mapDeltaSpatialReference:H.mapStart.spatialReference}}};a.addScreenDelta=function(){let A=0,K=0;return J=>{"start"===J.action&&(A=J.screenStart.x,K=J.screenStart.y);const H=J.screenEnd.x-A,L=J.screenEnd.y-K;A=J.screenEnd.x;K=J.screenEnd.y;return{...J,screenDeltaX:H,screenDeltaY:L}}};a.constrainToMapAxis=function(A,K){const J=[A.x,A.y,A.z??0],H=[Math.cos(K),Math.sin(K)];A=Math.sqrt(H[0]*H[0]+H[1]*H[1]);if(0===A)return null;H[0]/=A;H[1]/=A;const L=E=>{const M=(E.x-J[0])*H[0]+(E.y-J[1])*
H[1];E.x=J[0]+M*H[0];E.y=J[1]+M*H[1]};return E=>{L(E.mapStart);L(E.mapEnd);return{...E,axis:H}}};a.createDragEventPipelineCallback=d;a.createManipulatorDragEventPipeline=function(A,K){return A.events.on("drag",d(A,K))};a.dragAtLocation=function(A,K){let J=null,H=0,L=0;return E=>{"start"===E.action&&(J=A.toScreen?.(K),null!=J&&(0>J.x||J.x>A.width||0>J.y||J.y>A.height?J=null:(H=E.screenStart.x-J.x,L=E.screenStart.y-J.y)));if(null==J)return null;var M=n.clamp(E.screenEnd.x-H,0,A.width);const N=n.clamp(E.screenEnd.y-
L,0,A.height);M=k.createScreenPoint(M,N);E.screenStart=J;E.screenEnd=M;return E}};a.dragGraphic=l;a.dragGraphicMany=function(A,K){const J=A.map(H=>l(H,K)).filter(x.isSome);return H=>{const L=H.mapEnd.x-H.mapStart.x,E=H.mapEnd.y-H.mapStart.y,M=H.mapEnd.z-H.mapStart.z;J.forEach(N=>N(H));return{...H,translationX:L,translationY:E,translationZ:M}}};a.resetGraphic=D;a.resetGraphicMany=function(A){const K=A.map(J=>D(J)).filter(J=>null!=J);return J=>{K.forEach(H=>H(J));return J}};a.resetProperties=C;a.sceneSnappingAtLocation=
function(A,K,J=[]){if("2d"===A.type)return L=>L;let H=null;return L=>{"start"===L.action&&(H=A.toMap(L.screenStart,{exclude:J}),null!=H&&(H.z=w.getZForElevationMode(H,A,K)));const E=A.toMap(L.screenEnd,{exclude:J});null!=E&&(E.z=w.getZForElevationMode(E,A,K));return{...L,scenePoints:null!=H&&null!=E?{sceneStart:H,sceneEnd:E}:null}}};a.sceneSnappingAtProjectedLocation=function(A,K){if("2d"===A.type)return H=>H;let J=null;return H=>{"start"===H.action&&(J=I(H.mapStart,A,K));const L=I(H.mapEnd,A,K);
return{...H,scenePoints:null!=J&&null!=L?{sceneStart:J,sceneEnd:L}:null}}};a.screenToMap=function(A,K=null,J){let H=null;const L=null==K||A.spatialReference?.equals(K)?M=>M:M=>null!=M?g.project(M,K):M,E={exclude:[],...J};return M=>{"start"===M.action&&(H=L(A.toMap(M.screenStart,E)));if(null==H)return null;const N=L(A.toMap(M.screenEnd,E));return null!=N?{...M,mapStart:H,mapEnd:N}:null}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/support/drawUtils":function(){define(["exports",
"../../../core/mathUtils","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/coordsUtils"],function(a,r,e,x,m){function p(f,g,v,c){null==c||f.hasZ||(c=void 0);if("point"===f.type)return f.x+=g,f.y+=v,f.hasZ&&null!=c&&(f.z+=c),f;if("multipoint"===f.type){var w=f.points;for(var B=0;B<w.length;B++)w[B]=n(w[B],g,v,c);return f}if("extent"===f.type)return f.xmin+=g,f.xmax+=g,f.ymin+=v,f.ymax+=v,null!=c&&(f.zmin??(f.zmin=0),f.zmin+=c,f.zmax??(f.zmax=
0),f.zmax+=c),f;w=m.geometryToCoordinates(f);B="polyline"===f.type?f.paths:f.rings;for(let u=0;u<w.length;u++){const b=w[u];for(let d=0;d<b.length;d++)b[d]=n(b[d],g,v,c)}"paths"in f?f.paths=B:f.rings=B;return f}function n(f,g,v,c){return k(f,f[0]+g,f[1]+v,null!=f[2]&&null!=c?f[2]+c:void 0)}function k(f,g,v,c){g=[g,v];2<f.length&&g.push(null!=c?c:f[2]);3<f.length&&g.push(f[3]);return g}a.cloneMove=function(f,g,v,c,w){f=f.clone();var B=c.resolution;if("point"===f.type)return w?p(f,g*B,-v*B):(w=c.state.transform,
c=c.state.inverseTransform,B=w[0]*f.x+w[2]*f.y+w[4],w=w[1]*f.x+w[3]*f.y+w[5],f.x=c[0]*(B+g)+c[2]*(w+v)+c[4],f.y=c[1]*(B+g)+c[3]*(w+v)+c[5]),f;if("multipoint"===f.type){if(w)p(f,g*B,-v*B);else{w=f.points;B=c.state.transform;c=c.state.inverseTransform;for(var u=0;u<w.length;u++){var b=w[u],d=B[0]*b[0]+B[2]*b[1]+B[4],l=B[1]*b[0]+B[3]*b[1]+B[5];w[u]=k(b,c[0]*(d+g)+c[2]*(l+v)+c[4],c[1]*(d+g)+c[3]*(l+v)+c[5],void 0)}}return f}if("extent"===f.type)return w?p(f,g*B,-v*B):(w=c.state.transform,c=c.state.inverseTransform,
B=w[0]*f.xmin+w[2]*f.ymin+w[4],u=w[1]*f.xmin+w[3]*f.ymin+w[5],b=w[0]*f.xmax+w[2]*f.ymax+w[4],w=w[1]*f.xmax+w[3]*f.ymax+w[5],f.xmin=c[0]*(B+g)+c[2]*(u+v)+c[4],f.ymin=c[1]*(B+g)+c[3]*(u+v)+c[5],f.xmax=c[0]*(b+g)+c[2]*(w+v)+c[4],f.ymax=c[1]*(b+g)+c[3]*(w+v)+c[5]),f;if(w)p(f,g*B,-v*B);else{w=m.geometryToCoordinates(f);B="polyline"===f.type?f.paths:f.rings;u=c.state.transform;c=c.state.inverseTransform;for(b=0;b<w.length;b++)for(d=w[b],l=0;l<d.length;l++){const h=d[l],t=u[0]*h[0]+u[2]*h[1]+u[4],y=u[1]*
h[0]+u[3]*h[1]+u[5];d[l]=k(h,c[0]*(t+g)+c[2]*(y+v)+c[4],c[1]*(t+g)+c[3]*(y+v)+c[5],void 0)}"paths"in f?f.paths=B:f.rings=B}return f};a.getRotationAngle=function(f,g,v,c=!1){f=Math.atan2(g.y-v.y,g.x-v.x)-Math.atan2(f.y-v.y,f.x-v.x);f=Math.atan2(Math.sin(f),Math.cos(f));return c?f:r.rad2deg(f)};a.getScaleRatio=function(f,g,v,c,w,B){return Math.sqrt((w-f)*(w-f)+(B-g)*(B-g))/Math.sqrt((v-f)*(v-f)+(c-g)*(c-g))};a.move=p;a.scale=function(f,g,v,c){if("point"===f.type){const {x:y,y:q}=f;var w=c?c[0]:y,B=
c?c[1]:q;f=f.clone();f.x=(y-w)*g+w;f.y=(q-B)*v+B;return f}if("multipoint"===f.type){w=m.geometryToCoordinates(f);B=e.create();const [y,q,C,D]=x.getRingsOrPathsBounds(B,[w]);w=c?c[0]:(y+C)/2;B=c?c[1]:(D+q)/2;f=f.clone();c=f.points;for(var u=0;u<c.length;u++){var b=c[u];const [F,I]=b;c[u]=k(b,(F-w)*g+w,(I-B)*v+B,void 0)}return f}if("extent"===f.type){const {xmin:y,xmax:q,ymin:C,ymax:D}=f;w=c?c[0]:(y+q)/2;B=c?c[1]:(D+C)/2;f=f.clone();f.xmin=(y-w)*g+w;f.ymax=(D-B)*v+B;f.xmax=(q-w)*g+w;f.ymin=(C-B)*v+
B;f.xmin>f.xmax&&(g=f.xmin,f.xmin=f.xmax,f.xmax=g);f.ymin>f.ymax&&(g=f.ymin,f.ymin=f.ymax,f.ymax=g);return f}w=m.geometryToCoordinates(f);B=e.create();const [d,l,h,t]=x.getRingsOrPathsBounds(B,w);B=c?c[0]:(d+h)/2;c=c?c[1]:(t+l)/2;f=f.clone();u="polyline"===f.type?f.paths:f.rings;for(b=0;b<w.length;b++){const y=w[b];for(let q=0;q<y.length;q++){const C=y[q],[D,F]=C;u[b][q]=k(C,(D-B)*g+B,(F-c)*v+c,void 0)}}"paths"in f?f.paths=u:f.rings=u;return f};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/editGeometry/EditGeometry":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Evented ../../../geometry/Polygon ../../../geometry/Polyline ../coordinateHelper ./unnormalizationHelper".split(" "),function(a,r,e,x,m,p,n,k){let f=function(){function c(w){this.component=w;this.rightEdge=this.leftEdge=null;this.type="vertex";this.index=null}r._createClass(c,[{key:"pos",get:function(){return this._pos},set:function(w){this._pos=
w;this.component.unnormalizeVertexPositions()}}]);return c}(),g=r._createClass(function(c,w,B){this.component=c;this.leftVertex=w;this.rightVertex=B;this.type="edge";w.rightEdge=this;B.leftEdge=this}),v=function(){function c(B,u){this._spatialReference=B;this._viewingMode=u;this.vertices=[];this.edges=[];this.index=null}var w=c.prototype;w.unnormalizeVertexPositions=function(){1>=this.vertices.length||k.unnormalize(this.vertices,k.getUnnormalizationInfo(this._spatialReference,this._viewingMode))};
w.updateVertexIndex=function(B,u){if(0!==this.vertices.length){var b=this.vertices[0],d=null;do d=B,d.index=u++,B=d.rightEdge?d.rightEdge.rightVertex:null;while(null!=B&&B!==b);d.leftEdge&&d!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(d),this.vertices.length-1)}};w.getFirstVertex=function(){return 0===this.vertices.length?null:this.vertices[0]};w.getLastVertex=function(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]};w.isClosed=function(){return 2<
this.vertices.length&&null!==this.vertices[0].leftEdge};w.swapVertices=function(B,u){const b=this.vertices[B];this.vertices[B]=this.vertices[u];this.vertices[u]=b};w.iterateVertices=function(B){if(0!==this.vertices.length){var u=this.vertices[0],b=u;do B(b,b.index),b=null!=b.rightEdge?b.rightEdge.rightVertex:null;while(b!==u&&null!=b)}};return r._createClass(c)}();x=function(c){function w(u,b){var d=c.call(this)||this;d.type=u;d.coordinateHelper=b;d._geometry=null;d._dirty=!0;d.components=[];return d}
r._inherits(w,c);var B=w.prototype;B.notifyChanges=function(u){this._dirty=!0;this.emit("change",u)};B._toPoint=function(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)};B._toPolyline=function(){const u=[],b=this.coordinateHelper.vectorToArray;for(const d of this.components){if(1>d.vertices.length)continue;const l=[];let h=d.vertices.find(y=>null==y.leftEdge);const t=h;do l.push(b(h.pos)),h=h.rightEdge?
h.rightEdge.rightVertex:null;while(h&&h!==t);u.push(l)}return new p({paths:u,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})};B._toPolygon=function(){const u=[],b=this.coordinateHelper.vectorToArray;for(const d of this.components){if(1>d.vertices.length)continue;const l=[],h=d.vertices[0];let t=h;const y=t;do l.push(b(t.pos)),t=null!=t.rightEdge?t.rightEdge.rightVertex:null;while(t&&t!==y);d.isClosed()&&l.push(b(h.pos));u.push(l)}return new m({rings:u,
spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})};w.fromGeometry=function(u,b){var d=u.spatialReference;const l=n.createCoordinateHelper(u.hasZ,u.hasM,d),h=new w(u.type,l);switch(u.type){case "polygon":u=u.rings;for(var t=0;t<u.length;++t){var y=u[t],q=new v(d,b);q.index=t;var C=2<y.length&&e.equals(y[0],y[y.length-1]),D=C?y.length-1:y.length;for(var F=0;F<D;++F){var I=l.arrayToVector(y[F]);const G=new f(q);q.vertices.push(G);G.pos=I;G.index=
F}y=q.vertices.length-1;for(D=0;D<y;++D)F=new g(q,q.vertices[D],q.vertices[D+1]),q.edges.push(F);C&&(C=new g(q,q.vertices[q.vertices.length-1],q.vertices[0]),q.edges.push(C));h.components.push(q)}break;case "polyline":u=u.paths;for(t=0;t<u.length;++t){C=u[t];q=new v(d,b);q.index=t;y=C.length;for(D=0;D<y;++D)F=l.arrayToVector(C[D]),I=new f(q),q.vertices.push(I),I.pos=F,I.index=D;C=q.vertices.length-1;for(y=0;y<C;++y)D=new g(q,q.vertices[y],q.vertices[y+1]),q.edges.push(D);h.components.push(q)}break;
case "point":b=new v(d,b),b.index=0,d=new f(b),d.index=0,d.pos=l.pointToVector(u),b.vertices.push(d),h.components.push(b)}return h};r._createClass(w,[{key:"geometry",get:function(){if(this._dirty){switch(this.type){case "point":this._geometry=this._toPoint();break;case "polyline":this._geometry=this._toPolyline();break;case "polygon":this._geometry=this._toPolygon()}this._dirty=!1}return this._geometry}},{key:"spatialReference",get:function(){return this.coordinateHelper.spatialReference}}]);return w}(x);
a.Component=v;a.Edge=g;a.EditGeometry=x;a.Vertex=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/unnormalizationHelper":function(){define(["exports","../../../geometry/support/spatialReferenceUtils","../../ViewingMode"],function(a,r,e){a.getUnnormalizationInfo=function(x,m){x=r.getInfo(x);return m===e.ViewingMode.Global&&x?{supported:!0,lowerBoundX:x.valid[0],upperBoundX:x.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}};a.unnormalize=
function(x,m){if(m.supported){var p=Infinity,n=-Infinity,k=m.upperBoundX-m.lowerBoundX;x.forEach(g=>{let v=g.pos[0];for(;v<m.lowerBoundX;)v+=k;for(;v>m.upperBoundX;)v-=k;p=Math.min(p,v);n=Math.max(n,v);g.pos[0]=v});var f=n-p;k-f<f&&x.forEach(g=>{0>g.pos[0]&&(g.pos[0]+=k)})}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/EditGeometryOperations":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Evented ./EditGeometry ./interfaces ./operations/AppendVertex ./operations/UpdateVertices ./operations/RemoveVertices ./operations/SplitEdge ./operations/SetVertexPosition ./operations/CloseComponent ./operations/MoveVertex ./operations/OffsetEdgeVertex ./operations/RotateVertex ./operations/ScaleVertex ./operations/UndoGroup".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b){e=function(d){function l(t){var y=d.call(this)||this;y.data=t;y._undoStack=[];y._redoStack=[];y._listener=y.data.on("change",q=>{q.addedVertices&&y.emit("vertex-add",{type:"vertex-add",vertices:q.addedVertices,operation:q.operation});q.removedVertices&&y.emit("vertex-remove",{type:"vertex-remove",vertices:q.removedVertices,operation:q.operation});q.updatedVertices&&y.emit("vertex-update",{type:"vertex-update",vertices:q.updatedVertices,operation:q.operation})});
return y}r._inherits(l,d);var h=l.prototype;h.destroy=function(){this._listener.remove()};h.splitEdge=function(t,y){return this._apply(new f.SplitEdge(this.data,t,y))};h.updateVertices=function(t,y,q=m.AccumulationBehaviour.ACCUMULATE_STEPS){return this._apply(new n.UpdateVertices(this.data,t,y),q)};h.moveVertices=function(t,y,q,C,D=m.AccumulationBehaviour.ACCUMULATE_STEPS){return this.updateVertices(t,new c.MoveVertex(this.data.coordinateHelper,y,q,C),D)};h.scaleVertices=function(t,y,q,C,D,F=m.AccumulationBehaviour.ACCUMULATE_STEPS,
I=n.AccumulationType.CUMULATIVE){return this.updateVertices(t,new u.ScaleVertex(y,q,C,D,I),F)};h.rotateVertices=function(t,y,q,C=m.AccumulationBehaviour.ACCUMULATE_STEPS,D=n.AccumulationType.CUMULATIVE){return this.updateVertices(t,new B.RotateVertex(y,q,D),C)};h.removeVertices=function(t){return this._apply(new k.RemoveVertices(this.data,t,this._minNumVerticesPerType))};h.appendVertex=function(t){return 0===this.data.components.length?null:this._apply(new p.AppendVertex(this.data,this.data.components[0],
t))};h.setVertexPosition=function(t,y){return this._apply(new g.SetVertexPosition(this.data,t,y))};h.offsetEdge=function(t,y,q,C=m.AccumulationBehaviour.ACCUMULATE_STEPS){return this.updateVertices([y.leftVertex,y.rightVertex],new w.OffsetEdgeVertex(this.data.coordinateHelper,t,y,q),C)};h.closeComponent=function(t){return this.data.components.includes(t)?this._apply(new v.CloseComponent(this.data,t)):null};h.canRemoveVertex=function(){return this.data.components[0].vertices.length>this._minNumVerticesPerType};
h.createUndoGroup=function(){const t=new b.UndoGroup;this._apply(t);return{remove(){return t.close()}}};h.undo=function(){if(0<this._undoStack.length){const t=this._undoStack.pop();t.undo();this._redoStack.push(t);return t}return null};h.redo=function(){if(0<this._redoStack.length){const t=this._redoStack.pop();t.apply();this._undoStack.push(t);return t}return null};h._apply=function(t,y=m.AccumulationBehaviour.ACCUMULATE_STEPS){y!==m.AccumulationBehaviour.NEW_STEP&&null!=this.lastOperation&&this.lastOperation.accumulate(t)||
(t.apply(),this._undoStack.push(t),this._redoStack=[]);return t};l.fromGeometry=function(t,y){return new l(x.EditGeometry.fromGeometry(t,y))};r._createClass(l,[{key:"canUndo",get:function(){return 0<this._undoStack.length}},{key:"canRedo",get:function(){return 0<this._redoStack.length}},{key:"lastOperation",get:function(){return 0<this._undoStack.length?this._undoStack[this._undoStack.length-1]:null}},{key:"_minNumVerticesPerType",get:function(){switch(this.data.type){case "point":return 1;case "polyline":return 2;
case "polygon":return 3;default:return 0}}}]);return l}(e);a.EditGeometryOperations=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/interfaces":function(){define(["exports"],function(a){a.AccumulationBehaviour=void 0;var r=a.AccumulationBehaviour||(a.AccumulationBehaviour={});r[r.NEW_STEP=0]="NEW_STEP";r[r.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/AppendVertex":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../EditGeometry"],function(a,r,e){let x=function(){function m(n,k,f){this._editGeometry=n;this._component=k;this._pos=f;this._right=this._left=this._originalEdge=this._addedVertex=null}var p=m.prototype;p.apply=function(){let n="redo";null==this._addedVertex&&(n="apply",this._addedVertex=new e.Vertex(this._component));const k=this._component.getLastVertex();if(null==k)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=
0;else{let f=null;k.rightEdge&&(this._originalEdge=k.rightEdge,f=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1));this._component.vertices.push(this._addedVertex);this._addedVertex.pos=this._pos;null==this._left&&(this._left=new e.Edge(this._component,k,this._addedVertex));this._component.edges.push(this._left);k.rightEdge=this._left;null!=this._originalEdge&&null!=f&&(null==this._right&&(this._right=new e.Edge(this._component,this._addedVertex,
f)),this._component.edges.push(this._right),f.leftEdge=this._right);this._component.updateVertexIndex(this._addedVertex,k.index+1)}this._editGeometry.notifyChanges({operation:n,addedVertices:[this._addedVertex]})};p.undo=function(){null!=this._addedVertex&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),null!=this._left&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),null!=this._right&&(this._component.edges.splice(this._component.edges.indexOf(this._right),
1),this._right.rightVertex.leftEdge=null),null!=this._originalEdge&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),null!=this._left?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))};p.accumulate=function(){return!1};
return r._createClass(m)}();a.AppendVertex=x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/UpdateVertices":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(a,r){let e=function(){function x(p,n,k){this._editGeometry=p;this._vertices=n;this.operation=k;this._undone=!1}var m=x.prototype;m.apply=function(){this._vertices.forEach(p=>this.operation.apply(p));this._editGeometry.components.forEach(p=>p.unnormalizeVertexPositions());
this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})};m.undo=function(){this._vertices.forEach(p=>this.operation.undo(p));this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices});this._undone=!0};m.canAccumulate=function(p){if(this._undone||p._vertices.length!==this._vertices.length)return!1;for(let n=0;n<p._vertices.length;++n)if(p._vertices[n]!==this._vertices[n])return!1;return this.operation.canAccumulate(p.operation)};
m.accumulate=function(p){return p instanceof x&&this.canAccumulate(p)?(this._vertices.forEach(n=>this.operation.accumulate(n,p.operation)),this.operation.accumulateParams(p.operation),this._editGeometry.components.forEach(n=>n.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0):!1};return r._createClass(x)}();a.AccumulationType=void 0;(function(x){x[x.CUMULATIVE=0]="CUMULATIVE";x[x.REPLACE=1]="REPLACE"})(a.AccumulationType||(a.AccumulationType=
{}));a.UpdateVertices=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/RemoveVertices":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../EditGeometry"],function(a,r,e){let x=function(){function m(n,k,f=0){this._editGeometry=n;this._vertices=k;this._minNumberOfVertices=f;this.removedVertices=null}var p=m.prototype;p.apply=function(){let n="redo";if(null==this.removedVertices){const k=this.removedVertices=
[];this._vertices.forEach(f=>{f=this._removeVertex(f);null!=f&&k.push(f)});n="apply"}else this.removedVertices.forEach(k=>{this._removeVertex(k.removedVertex)});this._editGeometry.notifyChanges({operation:n,removedVertices:this._vertices})};p.undo=function(){this.removedVertices?.forEach(n=>{this._undoRemoveVertex(n)});this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})};p.accumulate=function(){return!1};p._removeVertex=function(n){const k=n.component;if(k.vertices.length<=
this._minNumberOfVertices)return null;const f={removedVertex:n,createdEdge:null},g=n.leftEdge,v=n.rightEdge;k.vertices.splice(k.vertices.indexOf(n),1);g&&(k.edges.splice(k.edges.indexOf(g),1),g.leftVertex.rightEdge=null);v&&(k.edges.splice(k.edges.indexOf(v),1),v.rightVertex.leftEdge=null);0===n.index&&v&&0<this._vertices.length&&k.swapVertices(k.vertices.indexOf(v.rightVertex),0);g&&v&&(f.createdEdge=new e.Edge(k,g.leftVertex,v.rightVertex),k.edges.push(f.createdEdge));v&&k.updateVertexIndex(v.rightVertex,
v.rightVertex.index-1);return f};p._undoRemoveVertex=function(n){const k=n.removedVertex,f=n.removedVertex.component,g=k.leftEdge,v=k.rightEdge;n.createdEdge&&f.edges.splice(f.edges.indexOf(n.createdEdge),1);f.vertices.push(k);g&&(f.edges.push(g),g.leftVertex.rightEdge=g);v&&(f.edges.push(v),v.rightVertex.leftEdge=v);f.updateVertexIndex(k,k.index)};return r._createClass(m)}();a.RemoveVertices=x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/SplitEdge":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../EditGeometry"],function(a,r,e){let x=function(){function m(n,k,f){this._editGeometry=n;this._edge=k;this._t=f;this._right=this._left=this.createdVertex=null}var p=m.prototype;p.apply=function(){let n="redo";const k=this._edge,f=k.component,g=k.leftVertex,v=k.rightVertex;f.edges.splice(f.edges.indexOf(k),1);null==this.createdVertex&&(n="apply",this.createdVertex=new e.Vertex(k.component));f.vertices.push(this.createdVertex);this.createdVertex.pos=
this._editGeometry.coordinateHelper.lerp(k.leftVertex.pos,k.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector());null==this._left&&(this._left=new e.Edge(f,g,this.createdVertex));this._left.leftVertex.leftEdge?f.edges.push(this._left):f.edges.unshift(this._left);g.rightEdge=this._left;null==this._right&&(this._right=new e.Edge(f,this.createdVertex,v));f.edges.push(this._right);v.leftEdge=this._right;f.updateVertexIndex(this.createdVertex,g.index+1);this._editGeometry.notifyChanges({operation:n,
addedVertices:[this.createdVertex]})};p.undo=function(){if(null==this.createdVertex||null==this._left||null==this._right)return null;const n=this._edge,k=n.component,f=this.createdVertex.leftEdge?.leftVertex,g=this.createdVertex.rightEdge?.rightVertex;k.vertices.splice(k.vertices.indexOf(this.createdVertex),1);k.edges.splice(k.edges.indexOf(this._left),1);k.edges.splice(k.edges.indexOf(this._right),1);this._edge.leftVertex.leftEdge?k.edges.push(this._edge):k.edges.unshift(this._edge);f&&(f.rightEdge=
n);g&&(g.leftEdge=n);f&&k.updateVertexIndex(f,f.index);this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})};p.accumulate=function(){return!1};return r._createClass(m)}();a.SplitEdge=x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/SetVertexPosition":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(a,r){let e=function(){function x(p,n,k){this._editGeometry=p;this._vertex=
n;this._pos=k}var m=x.prototype;m.apply=function(){const p=null==this._originalPosition;p&&(this._originalPosition=this._vertex.pos);this._apply(p?"apply":"redo")};m.undo=function(){this._vertex.pos=this._originalPosition;this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})};m.accumulate=function(p){return p instanceof x&&p._vertex===this._vertex?(this._pos=p._pos,this._apply("apply"),!0):!1};m._apply=function(p){this._vertex.pos=this._pos;this._editGeometry.components.forEach(n=>
n.unnormalizeVertexPositions());this._editGeometry.notifyChanges({operation:p,updatedVertices:[this._vertex]})};return r._createClass(x)}();a.SetVertexPosition=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/CloseComponent":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/arrayUtils","../EditGeometry"],function(a,r,e,x){let m=function(){function p(k,f){this._editGeometry=k;this._component=
f;this._createdEdge=null}var n=p.prototype;n.apply=function(){let k="redo";if(null==this._createdEdge){k="apply";const f=this._component.getFirstVertex(),g=this._component.getLastVertex();if(this._component.isClosed()||3>this._component.vertices.length||null==f||null==g)return;this._createdEdge=new x.Edge(this._component,g,f)}this._createdEdge.leftVertex.rightEdge=this._createdEdge;this._createdEdge.rightVertex.leftEdge=this._createdEdge;this._component.edges.push(this._createdEdge);this._editGeometry.notifyChanges({operation:k})};
n.undo=function(){null!=this._createdEdge&&(e.remove(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))};n.accumulate=function(){return!1};return r._createClass(p)}();a.CloseComponent=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/MoveVertex":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],
function(a,r){let e=function(){function x(p,n,k,f){this._helper=p;this.dx=n;this.dy=k;this.dz=f}var m=x.prototype;m._move=function(p,n,k,f){this._helper.addDelta(p.pos,n,k,f)};m.apply=function(p){this._move(p,this.dx,this.dy,this.dz)};m.undo=function(p){this._move(p,-this.dx,-this.dy,-this.dz)};m.canAccumulate=function(p){return p instanceof x};m.accumulate=function(p,n){this._move(p,n.dx,n.dy,n.dz)};m.accumulateParams=function(p){this.dx+=p.dx;this.dy+=p.dy;this.dz+=p.dz};return r._createClass(x)}();
a.MoveVertex=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/OffsetEdgeVertex":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/plane ../../../../geometry/support/vector ../../../support/geometry2dUtils".split(" "),function(a,r,e,x,m,p,n,k,f,g){let v=function(){function B(b,
d,l,h=0,t=w.IMMEDIATE){this._helper=b;this._planeType=d;this._edge=l;this.distance=h;this._plane=k.create();this._offsetPlane=k.create();this._minDistance=-Infinity;this._maxDistance=Infinity;this._selectedArrow=1;t===w.IMMEDIATE&&this._initialize()}var u=B.prototype;u._initialize=function(){this._initializeNeighbors();this._initializePlane();this._initializeDistanceConstraints()};u._initializeNeighbors=function(){const b=this._toXYZ(this._edge.leftVertex.pos),d=this._toXYZ(this._edge.leftVertex.leftEdge?.leftVertex?.pos),
l=this._toXYZ(this._edge.rightVertex.pos),h=this._toXYZ(this._edge.rightVertex.rightEdge?.rightVertex?.pos);this._edgeDirection=p.direction(n.create(),b,l);this._left=this._computeNeighbor(b,d,this._edgeDirection);this._right=this._computeNeighbor(l,h,this._edgeDirection)};u._toXYZ=function(b){return null!=b?this._helper.toXYZ(b):null};u._pointToXYZ=function(b){return this._toXYZ(this._helper.pointToVector(b))};u._computeNeighbor=function(b,d,l){if(null==d)return{start:b,end:d,direction:n.fromValues(-l[1],
l[0],0),isOriginalDirection:!0};const h=p.direction(n.create(),b,d),t=!this._passesBisectingAngleThreshold(h,l);return{start:b,end:d,direction:t?this._bisectVectorsPerpendicular(l,h):h,isOriginalDirection:!t}};u._passesBisectingAngleThreshold=function(b,d){b=Math.abs(f.angle(d,b));return b>=c&&b<=Math.PI-c};u._bisectVectorsPerpendicular=function(b,d){b=0>p.dot(b,d)?b:p.negate(n.create(),b);const l=Math.abs(p.dot(b,d));if(!(.001>l||.999<l))return this._bisectDirection(b,d);d=p.cross(n.create(),b,[0,
0,1]);return p.normalize(d,d)};u._bisectDirection=function(b,d){b=p.add(n.create(),b,d);return p.normalize(b,b)};u._initializePlane=function(){const b=this._computeNormalDirection(this._left),d=this._computeNormalDirection(this._right);0>p.dot(b,d)&&p.negate(d,d);k.fromPositionAndNormal(this._left.start,this._bisectDirection(b,d),this._plane)};u._computeNormalDirection=function(b){b=p.cross(n.create(),b.direction,this._edgeDirection);p.normalize(b,b);b=p.cross(n.create(),this._edgeDirection,b);this._planeType===
a.PlaneType.XY&&(b[2]=0);return p.normalize(b,b)};u._initializeDistanceConstraints=function(){null==this._left.end||this.requiresSplitEdgeLeft||this._updateDistanceConstraint(k.signedDistance(this._plane,this._left.end));null==this._right.end||this.requiresSplitEdgeRight||this._updateDistanceConstraint(k.signedDistance(this._plane,this._right.end));this._updateIntersectDistanceConstraint(this._plane)};u._updateDistanceConstraint=function(b){0>=b&&(this._minDistance=Math.max(this._minDistance,b));
0<=b&&(this._maxDistance=Math.min(this._maxDistance,b))};u._updateIntersectDistanceConstraint=function(b){var d=k.normal(b);const l=this._edgeDirection;var h=p.add(n.create(),this._left.start,this._left.direction);const t=p.add(n.create(),this._right.start,this._right.direction);var y=this._pointInBasis2D(m.create(),d,l,this._left.start),q=this._pointInBasis2D(m.create(),d,l,h),C=this._pointInBasis2D(m.create(),d,l,this._right.start);d=this._pointInBasis2D(m.create(),d,l,t);[C]=g.intersectLineAndRay({start:q,
end:y,type:g.LineType.LINE},{start:d,end:C,type:g.LineType.LINE});C&&(y=x.subtract(m.create(),y,q),x.normalize(y,y),q=x.subtract(m.create(),C,q),q=x.dot(y,q),h=p.add(n.create(),h,p.scale(n.create(),this._left.direction,-q)),b=k.signedDistance(b,h),this._updateDistanceConstraint(b))};u._pointInBasis2D=function(b,d,l,h){b[0]=f.projectPointSignedLength(d,h);b[1]=f.projectPointSignedLength(l,h);return b};u._offset=function(b,d){Number.isFinite(this._minDistance)&&(d=Math.max(this._minDistance,d));Number.isFinite(this._maxDistance)&&
(d=Math.min(this._maxDistance,d));k.copy(this._offsetPlane,this._plane);this._offsetPlane[3]-=d;d=(h,t,y)=>null!=t&&k.intersectLine(this._offsetPlane,h,p.add(n.create(),h,t),y);const l=n.create();(b===this._edge.leftVertex?d(this._left.start,this._left.direction,l):d(this._right.start,this._right.direction,l))&&this._helper.copy(this._helper.fromXYZ(l,void 0,this._helper.getM(b.pos)),b.pos)};u.selectArrowFromStartPoint=function(b){this._selectedArrow=k.isPointInside(this.plane,this._pointToXYZ(b))?
1:-1};u.signedDistanceToPoint=function(b){return k.signedDistance(this.plane,this._pointToXYZ(b))};u.apply=function(b){this._offset(b,this.distance)};u.undo=function(b){this._offset(b,0)};u.canAccumulate=function(b){return b instanceof B&&this._edge.leftVertex.index===b._edge.leftVertex.index&&this._edge.rightVertex.index===b._edge.rightVertex.index&&this._edge.component===b._edge.component&&this._maybeEqualsVec3(this._left.direction,b._left.direction)&&this._maybeEqualsVec3(this._right.direction,
b._right.direction)&&p.equals(k.normal(this._plane),k.normal(b._plane))};u.accumulate=function(b,d){this._offset(b,this._plane[3]-d._plane[3]+d.distance)};u.accumulateParams=function(b){this.distance=b.distance-b._plane[3]+this._plane[3]};u.clone=function(){const b=new B(this._helper,this._planeType,this._edge,this.distance,w.DEFERRED);k.copy(b._plane,this._plane);k.copy(b._offsetPlane,this._offsetPlane);b._maxDistance=this._maxDistance;b._minDistance=this._minDistance;b._left=this._cloneNeighbor(this._left);
b._right=this._cloneNeighbor(this._right);b._edgeDirection=p.copy(n.create(),this._edgeDirection);return b};u._maybeEqualsVec3=function(b,d){return null==b&&null==d||null!=b&&null!=d&&p.equals(b,d)};u._cloneNeighbor=function({start:b,end:d,direction:l,isOriginalDirection:h}){return{start:p.copy(n.create(),b),end:null!=d?p.copy(n.create(),d):null,direction:p.copy(n.create(),l),isOriginalDirection:h}};r._createClass(B,[{key:"plane",get:function(){return this._plane}},{key:"requiresSplitEdgeLeft",get:function(){return!this._left.isOriginalDirection}},
{key:"requiresSplitEdgeRight",get:function(){return!this._right.isOriginalDirection}},{key:"edgeDirection",get:function(){return this._edgeDirection}},{key:"selectedArrow",get:function(){return this._selectedArrow}}]);return B}();const c=e.deg2rad(15);a.PlaneType=void 0;(function(B){B[B.XYZ=0]="XYZ";B[B.XY=1]="XY"})(a.PlaneType||(a.PlaneType={}));var w;(function(B){B[B.IMMEDIATE=0]="IMMEDIATE";B[B.DEFERRED=1]="DEFERRED"})(w||(w={}));a.OffsetEdgeVertex=v;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(a,r,e,x){function m(w,B){return w[0]*B[1]-w[1]*B[0]}function p(w,B,u){B=e.dot(u,B)/e.squaredLength(u);return e.scale(w,u,B)}function n(w,B,u,b,d=u){e.subtract(f,b,u);e.subtract(v,B,d);p(c,v,f);return e.add(w,d,c)}function k(w,B,u,b){e.subtract(f,B,u);B=b/e.length(f);return e.scaleAndAdd(w,u,f,B)}a.LineType=void 0;(function(w){w[w.RAY=0]=
"RAY";w[w.LINE=1]="LINE"})(a.LineType||(a.LineType={}));const f=x.create(),g=x.create(),v=x.create(),c=x.create();a.cross=m;a.intersectCircleAndPoint=function(w,B,u){k(v,u,w,B);return r.floatEqualAbsolute(v[0],u[0])&&r.floatEqualAbsolute(v[1],u[1])?[x.clone(u)]:[]};a.intersectLineAndPoint=function(w,B){n(v,B,w.start,w.end);return r.floatEqualAbsolute(v[0],B[0])&&r.floatEqualAbsolute(v[1],B[1])?[x.clone(B)]:[]};a.intersectLineAndRay=function(w,B){const u=w.start;var b=B.start,d=B.end;const l=e.subtract(f,
w.end,u);var h=e.subtract(g,d,b);d=m(l,h);if(1E-6>=Math.abs(d))return[];b=e.subtract(v,u,b);h=m(h,b)/d;d=m(l,b)/d;if(0<=h){if(0<=d||B.type===a.LineType.LINE)return[e.scaleAndAdd(c,u,l,h)]}else if(w.type===a.LineType.LINE&&(0<=d||B.type===a.LineType.LINE))return[e.scaleAndAdd(c,u,l,h)];return[]};a.intersectLineLikeAndCircle=function(w,B,u){const b=[],d=e.subtract(f,w.end,w.start);var l=e.subtract(g,w.start,B);B=e.squaredLength(d);const h=2*e.dot(d,l);u=e.squaredLength(l)-u*u;u=h*h-4*B*u;0===u?(B=-h/
(2*B),(w.type===a.LineType.LINE||0<=B)&&b.push(e.scaleAndAdd(c,w.start,d,B))):0<u&&(u=Math.sqrt(u),l=(-h+u)/(2*B),(w.type===a.LineType.LINE||0<=l)&&b.push(e.scaleAndAdd(c,w.start,d,l)),B=(-h-u)/(2*B),(w.type===a.LineType.LINE||0<=B)&&b.push(e.scaleAndAdd(v,w.start,d,B)));return b};a.pointToLineDistance=function(w,B,u){return Math.abs((B[0]-w[0])*(u[1]-w[1])-(B[1]-w[1])*(u[0]-w[0]))/e.distance(B,u)};a.projectPoint=p;a.projectPointToCircle=k;a.projectPointToLine=n;a.projectPointToRay=function(w,B,u,
b){e.subtract(f,b,u);e.subtract(v,B,u);B=e.dot(f,v)/e.squaredLength(f);return 0<B?e.scaleAndAdd(w,u,f,B):e.copy(w,u)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/RotateVertex":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/arrayUtils","../../../../chunks/vec2","./UpdateVertices"],function(a,r,e,x,m){let p=function(){function n(f,g,v=m.AccumulationType.CUMULATIVE){this.origin=f;this.angle=
g;this._accumulationType=v}var k=n.prototype;k._rotate=function(f,g){x.rotate(f.pos,f.pos,this.origin,g)};k.apply=function(f){this._rotate(f,this.angle)};k.undo=function(f){this._rotate(f,-this.angle)};k.canAccumulate=function(f){return f instanceof n&&e.equals(this.origin,f.origin)};k.accumulate=function(f,g){this._rotate(f,g._accumulationType===m.AccumulationType.REPLACE?g.angle-this.angle:g.angle)};k.accumulateParams=function(f){this.angle=f._accumulationType===m.AccumulationType.REPLACE?f.angle:
this.angle+f.angle};return r._createClass(n)}();a.RotateVertex=p;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/ScaleVertex":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/arrayUtils ../../../../chunks/vec2f64 ../../../../chunks/vec2 ./UpdateVertices".split(" "),function(a,r,e,x,m,p){let n=function(){function k(g,v,c,w,B=p.AccumulationType.CUMULATIVE){this.origin=g;this.axis1=v;this.factor1=
c;this.factor2=w;this._accumulationType=B;this.axis2=x.fromValues(v[1],-v[0])}var f=k.prototype;f._scale=function(g,v,c){m.projectAndScale(g.pos,g.pos,this.origin,this.axis1,v);m.projectAndScale(g.pos,g.pos,this.origin,this.axis2,c)};f.apply=function(g){this._scale(g,this.factor1,this.factor2)};f.undo=function(g){this._scale(g,1/this.factor1,1/this.factor2)};f.canAccumulate=function(g){return g instanceof k&&e.equals(this.origin,g.origin)&&e.equals(this.axis1,g.axis1)};f.accumulate=function(g,v){v._accumulationType===
p.AccumulationType.REPLACE?this._scale(g,v.factor1/this.factor1,v.factor2/this.factor2):this._scale(g,v.factor1,v.factor2)};f.accumulateParams=function(g){const v=g._accumulationType===p.AccumulationType.REPLACE;this.factor1=v?g.factor1:this.factor1*g.factor1;this.factor2=v?g.factor2:this.factor2*g.factor2};return r._createClass(k)}();a.ScaleVertex=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/UndoGroup":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers"],function(a,r){let e=function(){function x(){this._operations=[];this._closed=!1}var m=x.prototype;m.close=function(){this._closed=!0};m.apply=function(){for(const p of this._operations)p.apply()};m.undo=function(){for(let p=this._operations.length-1;0<=p;p--)this._operations[p].undo()};m.accumulate=function(p){if(this._closed)return!1;const n=this._operations.length?this._operations[this._operations.length-1]:null;n&&n.accumulate(p)||(this._operations.push(p),
p.apply());return!0};return r._createClass(x)}();a.UndoGroup=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingContext":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(a,r){let e=function(){function x(m){this.selfSnappingZ=this.visualizer=this.excludeFeature=this.vertexHandle=null;this.editGeometryOperations=m.editGeometryOperations;this.elevationInfo=m.elevationInfo;this.pointer=m.pointer;this.vertexHandle=
m.vertexHandle;this.excludeFeature=m.excludeFeature;this.visualizer=m.visualizer;this.selfSnappingZ=m.selfSnappingZ}r._createClass(x,[{key:"coordinateHelper",get:function(){return this.editGeometryOperations.data.coordinateHelper}},{key:"spatialReference",get:function(){return this.coordinateHelper.spatialReference}}]);return x}();a.SnappingContext=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingDragPipelineStep":function(){define("exports ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../layers/graphics/dehydratedFeatureComparison ../../../layers/graphics/hydratedFeatures ../../../support/elevationInfoUtils ../dragEventPipeline ./SnappingContext ../../support/Scheduler".split(" "),
function(a,r,e,x,m,p,n,k,f,g){function v(h,t,y){return e.debounce(async({frameTask:q,point:C,scenePoint:D,context:F,event:I,delta:G,getLastState:z},A)=>{const K=await q.schedule(()=>h.snap({point:C,scenePoint:D,context:F,signal:A}),A);K.valid&&(q=await q.schedule(()=>K.apply(),A),z=z(),null!=z.point&&C!==z.point&&(q=h.update({point:z.point,scenePoint:z.scenePoint,context:F})),null!=z.updatePoint&&m.pointEquals(q,z.updatePoint)||(b(I.mapEnd,q,G,t),y.execute(I)))})}function c(h){return"3d"===h.type?
h.resourceController.scheduler.registerTask(g.TaskPriority.SNAPPING):g.ImmediateTask}function w(h,t,y){return{context:new f.SnappingContext({editGeometryOperations:h.editGeometryOperations,elevationInfo:h.elevationInfo,pointer:h.pointer,vertexHandle:null!=t.info?t.info.handle:null,excludeFeature:h.excludeFeature,visualizer:h.visualizer}),originalPos:null!=t.snapOrigin?h.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,originalScenePos:null!=t.scenePoints?t.scenePoints.sceneStart:
null,frameTask:y}}function B(h,[t,y,q]){h=p.clonePoint(h);h.x+=t;h.y+=y;h.hasZ&&(h.z+=q);return h}function u(h,t){return[h.x-t.x,h.y-t.y,h.hasZ&&t.hasZ?h.z-t.z:0]}function b(h,t,[y,q,C],D){h.x=t.x+y;h.y=t.y+q;D&&h.hasZ&&t.hasZ&&(h.z=t.z+C)}function d(h,t){if(!h.hasZ())return null;var y=t.vertices;t=null;for(const q of y){y=h.getZ(q.pos);if(null!=t&&null!=y&&1E-6<Math.abs(y-t))return null;null==t&&(t=y)}return t}function l(h){return h}a.createSnapDragEventPipelineStep=function({predicate:h=()=>!0,
snappingManager:t,snappingContext:y,updatingHandles:q,useZ:C=!0}){const D=new k.EventPipeline;if(null==t)return{snappingStep:[l,D],cancelSnapping:l};let F=null,I=null,G,z=null;const A=()=>{F=r.abortMaybe(F);t.doneSnapping();null!=I&&I.frameTask.remove();I=null;G=r.removeMaybe(G);z=null},K=v(t,C,D);let J=null,H=null,L=null;return{snappingStep:[E=>{if(!h(E))return E;const {action:M}=E;if("start"===M){var {info:N}=E;const Y=c(t.view);I=w(y,E,Y);I.context.selfSnappingZ=null;C||null==N||(N=d(y.coordinateHelper,
N.handle.component),null!=N&&(I.context.selfSnappingZ={value:N,elevationInfo:y.elevationInfo??n.absoluteHeightElevationInfo}))}if(null!=I){const {context:Y,originalScenePos:U,originalPos:ja}=I,{mapEnd:ra,mapStart:qa,scenePoints:pa}=E,za=B(ja,u(ra,qa)),ta=u(qa,ja),oa={...E,action:"update"},ua=I.context;var T=null==U||null==pa?null:B(U,u(pa.sceneEnd,pa.sceneStart));L=N=t.update({point:za,scenePoint:T,context:Y});b(ra,N,ta,C);J=za;H=T;if("end"!==M){const {frameTask:V}=I;null==F&&(F=new AbortController);
z=ha=>{q.addPromise(e.ignoreAbortErrors(K({frameTask:V,event:oa,context:ua,point:za,scenePoint:T,delta:ta,getLastState:()=>({point:J,scenePoint:H,updatePoint:ha.forceUpdate?null:L})},F.signal)))};z({forceUpdate:!1});null==G&&(G=x.watch(()=>t.options.effectiveEnabled,()=>z?.({forceUpdate:!0})))}}"end"===M&&A();return E},D],cancelSnapping:E=>{A();return E}}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingOperation":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../support/Scheduler".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c){a.SnappingOperation=function(w){function B(b){var d=w.call(this,b)||this;d.constrainResult=l=>l;d._snapPoints=null;d._frameTask=null;d._abortController=null;d._stagedPoint=null;d._snap=p.debounce(async(l,h,t,y)=>{const q=d._frameTask;if(null!=q){var C=await q.schedule(()=>h.snap({...l,context:t,signal:y}),y);C.valid&&await q.schedule(()=>{d.stagedPoint=C.apply();l!==d._snapPoints&&null!=d._snapPoints&&(d.stagedPoint=h.update({...d._snapPoints,context:t}))},y)}});
return d}r._inherits(B,w);var u=B.prototype;u.initialize=function(){const b="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=null!=b?b.registerTask(c.TaskPriority.SNAPPING):c.ImmediateTask};u.destroy=function(){this._abortController=m.abortMaybe(this._abortController);this._frameTask=m.removeMaybe(this._frameTask)};u.update=function(b,d,l){this._snapPoints=b;const {point:h,scenePoint:t}=b;return this.stagedPoint=b=d.update({point:h,scenePoint:t,context:l})};u.snap=
async function(b,d,l){const {point:h,scenePoint:t}=b;this.stagedPoint=d.update({point:h,scenePoint:t,context:l});this._snapPoints=b;null==this._abortController&&(this._abortController=new AbortController);return this._snap(b,d,l,this._abortController.signal)};u.resnap=async function(b,d){null!=this._snapPoints&&await this.snap(this._snapPoints,b,d)};u.abort=function(){this._abortController=m.abortMaybe(this._abortController);this._snapPoints=null};r._createClass(B,[{key:"stagedPoint",get:function(){return this._stagedPoint},
set:function(b){this._stagedPoint=this.constrainResult(b)}}]);return B}(x);e.__decorate([n.property({constructOnly:!0})],a.SnappingOperation.prototype,"view",void 0);e.__decorate([n.property()],a.SnappingOperation.prototype,"stagedPoint",null);e.__decorate([n.property()],a.SnappingOperation.prototype,"constrainResult",void 0);e.__decorate([n.property()],a.SnappingOperation.prototype,"_stagedPoint",void 0);a.SnappingOperation=e.__decorate([v.subclass("esri.views.interactive.snapping.SnappingOperation")],
a.SnappingOperation);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/drawSurfaces":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/screenUtils ../../layers/graphics/dehydratedFeatures ../../layers/graphics/hydratedFeatures ../../support/elevationInfoUtils".split(" "),function(a,r,e,x,m,p){let n=function(){function g(c,w,B,u=null){this._elevationInfo=c;this.defaultZ=w;this._view=B;this._excludeGraphics=u}var v=g.prototype;v.screenToMap=
function(c){if(null!=this.defaultZ)return this._view.sceneIntersectionHelper.intersectElevationFromScreen(e.createScreenPointArray(c.x,c.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);c=this._view.sceneIntersectionHelper.intersectElevationFromScreen(e.createScreenPointArray(c.x,c.y),this._elevationInfo,0,this._excludeGraphics);null!=c&&(c.z=void 0);return c};v.mapToScreen=function(c){c=x.makeDehydratedPoint(c.x,c.y,p.getConvertedElevation(this._view,c,this._elevationInfo),c.spatialReference);
return this._view.toScreen(c)};v.constrainZ=function(c){const {defaultZ:w}=this;null!=w&&c.z!==w&&(c=m.clonePoint(c),c.z=w);return c};return r._createClass(g)}(),k=function(){function g(c,w,B=[]){this.view=c;this.elevationInfo=w;this.exclude=B}var v=g.prototype;v.screenToMap=function(c){c=this.view.toMap(c,{exclude:this.exclude});null!=c&&(c.z=p.getZForElevationMode(c,this.view,this.elevationInfo));return c};v.mapToScreen=function(c){let w=c;null!=this.elevationInfo&&(w=x.makeDehydratedPoint(c.x,
c.y,p.getConvertedElevation(this.view,c,this.elevationInfo),c.spatialReference));return this.view.toScreen(w)};v.constrainZ=function(c){return c};return r._createClass(g)}(),f=function(){function g(v,c=!1,w=0){this.view=v;this.hasZ=c;this.defaultZ=w;this.mapToScreen=B=>v.toScreen(B);this.screenToMap=c?B=>{B=v.toMap(B);B.z=w;return B}:B=>v.toMap(B)}g.prototype.constrainZ=function(v){const {defaultZ:c}=this;this.hasZ&&v.z!==c&&(v=m.clonePoint(v),v.z=c);return v};return r._createClass(g)}();a.ElevationDrawSurface=
n;a.MapDrawSurface=f;a.SceneDrawSurface=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/moveGraphic/GraphicMoveTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Collection ../../../../../core/Evented ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../layers/graphics/dehydratedFeatures ../../../../../support/elevationInfoUtils ../../manipulatorUtils ../../SnappingVisualizer3D ../isSupportedGraphicUtils ../manipulatorUtils ../meshFastUpdateUtils ../visualElementUtils ../manipulations/config ../manipulations/MoveManipulation ../manipulations/moveUtils ../manipulations/MoveXYGraphicManipulation ./isSupportedGraphic ../../visualElements/OutlineVisualElement ../../../layers/graphics/GraphicState ../../../../interactive/dragEventPipeline ../../../../interactive/InteractiveToolBase ../../../../interactive/editGeometry/EditGeometryOperations ../../../../interactive/sketch/SketchTooltipOptions ../../../../interactive/snapping/SnappingContext ../../../../interactive/snapping/SnappingDragPipelineStep ../../../../interactive/tooltip/Tooltip ../../../../interactive/tooltip/TranslateTooltipInfos ../../../../support/automaticLengthMeasurementUtils ../../../../support/euclideanLengthMeasurementUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G,z,A,K,J,H,L,E,M,N,T,Y,U,ja){let ra=r._createClass(function(ta){this.allGraphics=ta;this.type="graphic-move-start"}),qa=r._createClass(function(ta,oa,ua){this.dx=ta;this.dy=oa;this.allGraphics=ua;this.type="graphic-move"}),pa=r._createClass(function(ta){this.allGraphics=ta;this.type="graphic-move-stop"});a.GraphicMoveTool=function(ta){function oa(V){V=ta.call(this,V)||this;V._infos=new Map;V.graphics=new x;V.enableZ=!0;V.tooltipOptions=
new E;V.type="move-3d";V._moveManipulation=null;V._tooltip=null;return V}r._inherits(oa,ta);var ua=oa.prototype;ua.initialize=function(){const {view:V}=this;this.addHandles([this.graphics.on("change",da=>{da.removed.forEach(R=>this.removeHandles(R));this._updateGraphicInfos(da);this._setupFastTransformUpdates(da.added);this._refreshManipulators()}),g.watch(()=>this.tooltipOptions.enabled,da=>{this._tooltip=da?new T.Tooltip({view:V}):k.destroyMaybe(this._tooltip)},g.syncAndInitial)]);const ha=this.graphics.toArray();
this._updateGraphicInfos({added:ha,removed:[]});this._setupFastTransformUpdates(ha);this._refreshManipulators();this.finishToolCreation()};ua.destroy=function(){this._tooltip=k.destroyMaybe(this._tooltip);this._moveManipulation=k.destroyMaybe(this._moveManipulation);this.removeAllHandles();this._set("view",null)};ua.reset=function(){};ua._updateGraphicInfos=function({added:V,removed:ha}){for(const da of V){if(z.isSupportedGraphic(da)!==t.SupportedGraphicResult.SUPPORTED)continue;V=new za(da);const R=
this.view.trackGraphicState(V.state);this._infos.set(V.graphic,{info:V,handle:R})}for(const da of ha)this._infos.get(da)?.handle.remove(),this._infos.delete(da)};ua._setupFastTransformUpdates=function(V){for(const ha of V)({info:V}=this._infos.get(ha)),this.addHandles(q.meshTransformFastUpdateHandles(V.state),ha)};ua._refreshManipulators=function(){this.removeHandles("manipulators");this._moveManipulation=k.destroyMaybe(this._moveManipulation);this.manipulators.removeAll();if(0!==this._infos.size){var V=
Array.from(this._infos.values(),({info:ha})=>ha);this._createManipulators(V);this._createVisualElements(V);this._updateMoveManipulation(V)}};ua._createManipulators=function(V){for(const ha of V){const da=ha.state;ha.manipulationXY=new G.MoveXYGraphicManipulation({tool:this,view:this.view,graphicState:da});ha.manipulationXY.forEachManipulator(R=>this.addHandles([R.events.on("immediate-click",ca=>{this.emit("immediate-click",{...ca,graphic:da.graphic});ca.stopPropagation()}),R.events.on("grab-changed",
({action:ca})=>{const {tooltipOptions:sa,_tooltip:xa}=this;null!=xa&&("start"===ca?xa.info=new Y.TranslateGraphicTooltipInfo({tooltipOptions:sa}):xa.clear())})],"manipulators"));this.addHandles(ha.manipulationXY.createDragPipeline((R,ca,sa,xa)=>this._buildDragEventPipeline(V,F.ManipulationType.XY,R,ca,sa,xa)),"manipulators")}this._createMoveManipulation(V)};ua._createMoveManipulation=function(V){const ha=new F.MoveManipulation({tool:this,view:this.view,snapToScene:!1,xyAvailable:!0,xyAxisAvailable:!0,
zAvailable:!0,radius:1===V.length?F.MoveManipulation.radiusForSymbol(V[0].graphic.symbol):D.DISC_RADIUS});this._moveManipulation=ha;ha.elevationInfo={mode:"absolute-height",offset:0};ha.forEachManipulator(ca=>{this.addHandles(ca.events.on("immediate-click",sa=>{ha.zManipulation.hasManipulator(ca)||1!==this.graphics.length||this.emit("immediate-click",{...sa,graphic:this.graphics.at(0)});sa.stopPropagation()}),"manipulators")});var da=ca=>sa=>{this.addHandles(sa.events.on("focus-changed",({action:xa})=>
{const ma=this._tooltip;null!=ma&&("focus"===xa?this._updateMoveTooltip(V,ca):ma.clear())}),"manipulators")};this._moveManipulation.xyManipulation.forEachManipulator(da(F.ManipulationType.XY));this._moveManipulation.xyAxisManipulation.forEachManipulator(da(F.ManipulationType.XY_AXIS));this._moveManipulation.zManipulation.forEachManipulator(da(F.ManipulationType.Z));da=()=>this._updateMoveManipulation(V);for(const ca of V)this.addHandles([ca.state.on("changed",da),g.watch(()=>ca.state.displaying,da)],
"manipulators");const R=V[V.length-1];this.addHandles(R.state.on("changed",()=>this._updateMoveManipulationAngle(R)),"manipulators");this.addHandles(ha.createDragPipeline((ca,sa,xa,ma,Aa)=>this._buildDragEventPipeline(V,ca,sa,xa,ma,Aa),d.getGraphicEffectiveElevationInfo(R.graphic),R.graphic.geometry.spatialReference,R.graphic),"manipulators");this._updateMoveManipulationAngle(R)};ua._createVisualElements=function(V){for(const ha of V){const da=C.createVisualElements({view:this.view,graphic:ha.graphic,
forEachManipulator:R=>{ha.manipulationXY?.forEachManipulator(R);this._moveManipulation?.forEachManipulator(R)},onManipulatorsChanged:()=>n.makeHandle()});null!=da&&(ha.geometryRepresentation=da.visualElement,ha.geometryRepresentation instanceof A.OutlineVisualElement&&this.addHandles([ha.geometryRepresentation.events.on("attachment-origin-changed",()=>{ha.state.isDraped||this._updateMoveManipulation(V)}),g.watch(()=>ha.state.isDraped,()=>this._updateMoveManipulation(V))],"manipulators"),this.addHandles(da,
"manipulators"))}};ua._updateMoveManipulationAngle=function(V){this._moveManipulation&&(this._moveManipulation.angle=I.shapeOrientation(V.graphic.geometry))};ua._updateMoveManipulation=function(V){const ha=b.makeDehydratedPoint(0,0,0,this.view.spatialReference);let da=0,R=!1;const ca=this._moveManipulation;if(ca){for(const sa of V)if(sa.state.displaying&&(V=sa.state.graphic,this.enableZ&&y.canMoveZ(V)&&(R=!0),V=sa.geometryRepresentation instanceof A.OutlineVisualElement&&!sa.state.isDraped?sa.geometryRepresentation.attachmentOrigin:
l.getGraphicAttachmentOrigin(this.view,V),null!=V)){const {x:xa,y:ma,z:Aa}=V;ha.x+=xa;ha.y+=ma;Aa&&(ha.z??(ha.z=0),ha.z+=Aa);da++}0<da?(ha.x/=da,ha.y/=da,ha.z??(ha.z=0),ha.z/=da,ca.location=ha,ca.xyManipulation.available=!0,ca.xyAxisManipulation.available=!0,ca.zManipulation.available=R):ca.available=!1}};ua._buildDragEventPipeline=function(V,ha,da,R,ca,sa){const xa=[],ma=[];let Aa=null,O=null;const W=()=>{for(const fa of xa)fa.dragging=!1;xa.length=0;ma.length=0;O=Aa=null;this._moveManipulation&&
(this._moveManipulation.interactive=!0)};if(1===V.length&&ha===F.ManipulationType.XY){const fa=V[0].graphic;({steps:R,cancel:ca}=this._buildSnappingPipelineSteps(fa,d.getGraphicEffectiveElevationInfo(fa),R,ca,sa))}ca=ca.next(fa=>O?.(fa)).next(()=>{this.emit("graphic-move-stop",new pa(ma));this.destroyed||W();return null});R=R.next(fa=>{if("start"===fa.action){xa.length=0;ma.length=0;for(const aa of V)aa.dragging||!aa.manipulationXY?.hasManipulator(da)&&aa.manipulationXY?.grabbing||(xa.push(aa),ma.push(aa.graphic),
aa.dragging=!0);if(0!==ma.length&&(this._moveManipulation&&(this._moveManipulation.interactive=!1),Aa=J.dragGraphicMany(ma,this.view.state.viewingMode),O=J.resetGraphicMany(ma),this.emit("graphic-move-start",new ra(ma)),this.destroyed))return null}return 0!==ma.length?fa:null}).next(fa=>Aa?.(fa)).next(fa=>{this._updateMoveTooltip(V,ha,fa);return fa}).next(fa=>{switch(fa.action){case "start":case "update":if(fa.translationX||fa.translationY||fa.translationZ){const aa=this.view.toScreen(fa.mapStart);
fa=this.view.toScreen(fa.mapEnd);this.emit("graphic-move",new qa(fa.x-aa.x,fa.y-aa.y,ma))}break;case "end":this.emit("graphic-move-stop",new pa(ma)),this.destroyed||W()}return null});return{steps:R,cancel:ca}};ua._updateMoveTooltip=function(V,ha,da){const {tooltipOptions:R,_tooltip:ca}=this;if(null!=ca){ca.clear();var sa=0===V.length?"absolute-height":V[0].state.isDraped?"on-the-ground":"absolute-height";switch(ha){case F.ManipulationType.XY:ca.info=new Y.TranslateGraphicTooltipInfo({tooltipOptions:R});
this._updateMoveTooltipDistance(ca.info,da,(xa,ma)=>U.autoHorizontalDistanceByElevationModeBetweenPoints(xa,ma,sa));break;case F.ManipulationType.XY_AXIS:ca.info=new Y.TranslateGraphicXYTooltipInfo({tooltipOptions:R});this._updateMoveTooltipDistance(ca.info,da,(xa,ma)=>{xa=U.autoHorizontalDistanceByElevationModeBetweenPoints(xa,ma,sa);return f.scale(xa,I.axisConstrainedDragSign(da))});break;case F.ManipulationType.Z:ca.info=new Y.TranslateGraphicZTooltipInfo({tooltipOptions:R}),this._updateMoveTooltipDistance(ca.info,
da,ja.verticalSignedDistanceBetweenPoints)}}};ua._updateMoveTooltipDistance=function(V,ha,da){if(null!=ha&&"end"!==ha.action){const {mapStart:R,mapEnd:ca}=ha;ha=da(R,ca);V.distance=null!=ha?ha:f.zeroMeters}};ua._buildSnappingPipelineSteps=function(V,ha,da,R,ca){const sa=V.geometry;if(null==sa||"point"!==sa.type&&"mesh"!==sa.type)return{steps:da,cancel:R};const xa=("point"===sa.type?sa:sa.anchor).clone(),ma=new M.SnappingContext({elevationInfo:ha,pointer:ca,editGeometryOperations:L.EditGeometryOperations.fromGeometry(xa,
this.view.state.viewingMode),visualizer:new h.SnappingVisualizer3D,excludeFeature:V}),{snappingStep:Aa,cancelSnapping:O}=N.createSnapDragEventPipelineStep({snappingContext:ma,snappingManager:this.snappingManager,updatingHandles:this.updatingHandles});R=R.next(O);da=da.next(W=>{xa.z=d.getConvertedElevation(this.view,xa,d.getGraphicEffectiveElevationInfo(V),{mode:"absolute-height",offset:0});const fa=ma.coordinateHelper.pointToVector(xa);return{...W,snapOrigin:fa}}).next(...Aa);return{steps:da,cancel:R}};
r._createClass(oa,[{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"test",get:function(){return{tooltip:this._tooltip}}}]);return oa}(p.HandleOwnerMixin(m.EventedMixin(H.InteractiveToolBase)));e.__decorate([v.property({constructOnly:!0,nonNullable:!0})],a.GraphicMoveTool.prototype,"view",void 0);e.__decorate([v.property()],a.GraphicMoveTool.prototype,"graphics",void 0);e.__decorate([v.property({constructOnly:!0,nonNullable:!0})],a.GraphicMoveTool.prototype,"enableZ",void 0);
e.__decorate([v.property({constructOnly:!0,type:E})],a.GraphicMoveTool.prototype,"tooltipOptions",void 0);e.__decorate([v.property({constructOnly:!0})],a.GraphicMoveTool.prototype,"snappingManager",void 0);e.__decorate([v.property()],a.GraphicMoveTool.prototype,"type",void 0);e.__decorate([v.property()],a.GraphicMoveTool.prototype,"updating",null);a.GraphicMoveTool=e.__decorate([u.subclass("esri.views.3d.interactive.editingTools.graphicMove3D.GraphicMoveTool")],a.GraphicMoveTool);let za=function(){function ta(oa){this.manipulationXY=
this.geometryRepresentation=null;this.dragging=!1;this.state=new K.GraphicState({graphic:oa})}r._createClass(ta,[{key:"graphic",get:function(){return this.state.graphic}}]);return ta}();a.GraphicMoveEvent=qa;a.GraphicMoveStartEvent=ra;a.GraphicMoveStopEvent=pa;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/manipulatorUtils":function(){define("exports ../../../chunks/mat4 ../../../chunks/vec3 ../../../chunks/vec4f64 ../../../geometry/support/vectorStacks ../../../layers/graphics/hydratedFeatures ./Manipulator3D ./RenderObject ../layers/graphics/graphicUtils ../webgl-engine/lib/Attribute ../webgl-engine/lib/basicInterfaces ../webgl-engine/lib/Geometry ../webgl-engine/lib/GeometryUtil ../webgl-engine/lib/Material ../webgl-engine/lib/VertexAttribute ../webgl-engine/materials/ColorMaterial ../webgl-engine/materials/ImageMaterial ../webgl-engine/materials/NativeLineMaterial ../webgl-engine/materials/RibbonLineMaterial ../webgl-engine/materials/ShadedColorMaterial ../../interactive/interfaces".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y){function q(z,A=B.RenderOccludedFlag.OccludeAndTransparent,K=!0){const J=x.fromValues(z[0],z[1],z[2],3<z.length?z[3]:1);z=1>z[3];const H=!z;return K?new t.ShadedColorMaterial({color:J,transparent:z,writeDepth:H,cullFace:v.CullFaceOptions.Back,renderOccluded:A}):new b.ColorMaterial({color:J,transparent:z,writeDepth:H,cullFace:v.CullFaceOptions.Back,renderOccluded:A})}function C(z,A){const K=A.material??new d.ImageMaterial({transparent:!0,writeDepth:!1,
textureId:A.texture?.id,renderOccluded:B.RenderOccludedFlag.Opaque}),J=A.focusMultiplier??I.focusMultiplier,H=A.calloutLength??I.calloutLength,L=I.discRadius*(A.discScale??1),E=L*J,M=(U,ja)=>{const ra=[0,1,2,2,3,0];return new c.Geometry(ja,[[u.VertexAttribute.POSITION,new g.Attribute([H-U,-U,0,H+U,-U,0,H+U,U,0,H-U,U,0],3,!0)],[u.VertexAttribute.UV0,new g.Attribute([0,0,1,0,1,1,0,1],2,!0)]],[[u.VertexAttribute.POSITION,ra],[u.VertexAttribute.UV0,ra]])};var N=A.calloutWidth??I.calloutWidth,T=new (1<
N?h.RibbonLineMaterial:l.NativeLineMaterial)({width:N,color:A.calloutColor,renderOccluded:B.RenderOccludedFlag.OccludeAndTransparent});N=w.createPolylineGeometry(T,[[0,0,0],[H-L,0,0]]);T=w.createPolylineGeometry(T,[[0,0,0],[H-E,0,0]]);const Y=A.customStateMask??y.ManipulatorStateCustomFlags.None;z.collisionType={type:"disc",direction:[0,0,1],offset:[H,0,0]};z.focusMultiplier=J;z.metadata=A.metadata;z.radius=L;z.renderObjects=[new k.RenderObject(M(L,K),y.ManipulatorStateFlags.Unfocused|Y),new k.RenderObject(N,
y.ManipulatorStateFlags.Unfocused|Y),new k.RenderObject(M(E,K),y.ManipulatorStateFlags.Focused|Y),new k.RenderObject(T,y.ManipulatorStateFlags.Focused|Y)]}function D(z,A,K,J){z=e.normalize(m.sv3d.get(),z);A=e.normalize(m.sv3d.get(),A);const H=e.cross(m.sv3d.get(),z,A);J[0]=z[0];J[1]=z[1];J[2]=z[2];J[3]=0;J[4]=A[0];J[5]=A[1];J[6]=A[2];J[7]=0;J[8]=H[0];J[9]=H[1];J[10]=H[2];J[11]=0;J[12]=K[0];J[13]=K[1];J[14]=K[2];J[15]=1;return J}function F(z,A){const K=z.getViewForGraphic(A);return null!=K&&"computeAttachmentOrigin"in
K?K.computeAttachmentOrigin(A,z.spatialReference):null}const I=Object.freeze({calloutLength:40,calloutWidth:1,discRadius:27,focusMultiplier:1.1}),G=Object.freeze({autoScaleRenderObjects:!1,worldSized:!0});a.calculateInputRotationTransform=function(z,A,K,J){z=e.subtract(m.sv3d.get(),z,K);J=e.cross(m.sv3d.get(),J,z);K=D(z,J,K,m.sm4d.get());r.invert(K,K);A=e.transformMat4(m.sv3d.get(),A,K);return Math.atan2(A[1],A[0])};a.calculateTranslateRotateFromBases=D;a.createManipulatorMaterial=q;a.createManipulatorOutlineMaterial=
function(z,A=B.RenderOccludedFlag.OccludeAndTransparent){z=x.fromValues(z[0],z[1],z[2],4===z.length?z[3]:1);return new b.ColorMaterial({color:z,transparent:!0,writeDepth:!0,cullFace:v.CullFaceOptions.Front,renderOccluded:A})};a.createRotateManipulator=function(z,A){z=new n.Manipulator3D({view:z,autoScaleRenderObjects:!1,collisionPriority:1,metadata:A.metadata});C(z,A);return z};a.createSphereManipulator=function(z,A,K=y.ManipulatorStateCustomFlags.None){A=q(A);K=[new k.RenderObject(w.createSphereGeometry(A,
1,32,32),K)];return new n.Manipulator3D({view:z,renderObjects:K})};a.getGraphicAttachmentOrigin=F;a.placeAtGraphic=function(z,A,K){z=F(z,K);null!=z?A.elevationAlignedLocation=z:(K=K.geometry,null!=K&&(K="mesh"===K.type?K.anchor:f.computeCentroid(K),null!=K&&(A.location=p.hydrateGeometry(K))))};a.updateRotateManipulator=C;a.worldScaledManipulatorSettings=G;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/Manipulator3D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/compilerUtils ../../../core/Evented ../../../core/mathUtils ../../../core/maybe ../../../core/screenUtils ../../../core/accessorSupport/utils ../../../chunks/mat3 ../../../chunks/mat3f64 ../../../chunks/mat4 ../../../chunks/mat4f64 ../../../chunks/vec2 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/ellipsoidUtils ../../../geometry/projection ../../../geometry/support/aaBoundingRect ../../../geometry/support/lineSegment ../../../geometry/support/plane ../../../geometry/support/ray ../../../geometry/support/vectorStacks ../../../layers/graphics/hydratedFeatures ../support/ElevationProvider ../support/geometryUtils/ray ../webgl-engine/lib/Camera ../webgl-engine/lib/Object3D ../webgl-engine/lib/UpdatePolicy ../webgl-engine/lib/WebGLLayer ../../interactive/interfaces ../../../geometry/Point".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G,z,A,K,J,H){function L(ha){return 0!==ha[12]||0!==ha[13]||0!==ha[14]}e=function(){function ha(R){this.metadata=void 0;this._camera=new G.Camera;this._elevation={offset:0,override:null};this.collisionType={type:"point"};this.collisionPriority=0;this._renderObjects=[];this._available=this.autoScaleRenderObjects=!0;this._noDisplayCount=0;this._radius=10;this._worldSized=!1;this.focusMultiplier=2;this.touchMultiplier=2.5;this.worldOriented=
!1;this._modelTransform=w.create();this._worldFrame=null;this._renderLocation=b.create();this._renderLocationDirty=!0;this._location=new H({x:0,y:0,z:0});this._elevationAlignedLocation=new H;this.interactive=this._elevationAlignedLocationDirty=!0;this.selectable=!1;this.grabbable=!0;this.grabCursor=this.cursor=null;this._selected=this._hovering=this.dragging=this._grabbing=!1;this._state=J.ManipulatorStateCustomFlags.None;this._focused=!1;this.events=new m.EventEmitter;this._screenLocation={screenPointArray:k.createScreenPointArray(),
renderScreenPointArray:k.createRenderScreenPointArray3(),pixelSize:0};this._screenLocationDirty=!0;this._attached=this._engineResourcesAddedToStage=!1;this._location.spatialReference=R.view.spatialReference;Object.assign(this,R);(R=this.view.state?.camera)&&this._camera.copyFrom(R)}var da=ha.prototype;da.destroy=function(){this._applyObjectTransform=V;this._removeResourcesFromStage();this._camera=this.view=this._engineResources=null};da.disableDisplay=function(){this._noDisplayCount++;1===this._noDisplayCount&&
this._updateEngineObject();return{remove:f.once(()=>{this._noDisplayCount--;0===this._noDisplayCount&&this._updateEngineObject()})}};da._notifyLocationChanged=function(){this._elevationAlignedLocationDirty=this._screenLocationDirty=this._renderLocationDirty=!0;this._updateEngineObject();this.events.emit("location-update",{location:this._location})};da._updateElevationAlignedLocation=function(){const R=null!=this._elevation.override?this._elevation.override:this.location.z||0;this._elevationAlignedLocation.x=
this.location.x;this._elevationAlignedLocation.y=this.location.y;this._elevationAlignedLocation.z=R+this._elevation.offset;this._elevationAlignedLocation.spatialReference=D.hydratedSpatialReference(this.location.spatialReference);this._screenLocationDirty=this._renderLocationDirty=!0;this._elevationAlignedLocationDirty=!1};da.grabbableForEvent=function(){return!0};da.updateStateEnabled=function(R,ca){this.state=ca?this.state|R:this.state&~R};da._setFocused=function(R){R!==this._focused&&(this._focused=
R,this.events.emit("focus-changed",{action:!0===R?"focus":"unfocus"}))};da._ensureScreenLocation=function(){if(this._screenLocationDirty){this._screenLocation.pixelSize=this._camera.computeScreenPixelSizeAt(this.renderLocation);this._screenLocationDirty=!1;if(L(this._modelTransform)){var R=this._calculateModelTransformOffset(oa);R=u.add(R,R,this.renderLocation)}else R=this.renderLocation;this._camera.projectToRenderScreen(R,this._screenLocation.renderScreenPointArray);this._camera.renderToScreen(this._screenLocation.renderScreenPointArray,
this._screenLocation.screenPointArray)}};da.intersectionDistance=function(R,ca){if(!this.available)return null;R=k.screenPointObjectToArray(R,E);var sa=this._getCollisionRadius(ca);ca=-1*this.collisionPriority;switch(this.collisionType.type){case "point":if(B.squaredDistance(this.screenLocation.screenPointArray,R)<sa*sa)return this.screenLocation.renderScreenPointArray[2]+ca;break;case "line":var xa=this.collisionType.paths,ma=this._getWorldToScreenObjectScale();ma=this._calculateObjectTransform(ma,
U);sa*=this.screenLocation.pixelSize;R=I.fromScreen(this._camera,R,N);if(null==R)break;for(var Aa of xa)if(0!==Aa.length){xa=u.transformMat4(ra,Aa[0],ma);for(var O=1;O<Aa.length;O++){var W=u.transformMat4(qa,Aa[O],ma),fa=t.closestRayDistance2(t.fromPoints(xa,W,M),R);if(null!=fa&&fa<sa*sa)return ma=u.add(C.sv3d.get(),xa,W),u.scale(ma,ma,.5),R=k.castRenderScreenPointArray(C.sv3d.get()),this._camera.projectToRenderScreen(ma,R),R[2]+ca;u.copy(xa,W)}}break;case "disc":xa=this.collisionType.direction;ma=
this.collisionType.offset??b.ZEROS;Aa=this._getWorldToScreenObjectScale();O=this._calculateObjectTransform(Aa,U);Aa=sa*this.screenLocation.pixelSize;R=I.fromScreen(this._camera,R,N);if(null==R)break;sa=g.fromMat4(T,O);sa=u.transformMat3(za,xa,sa);ma=u.transformMat4(ta,ma,O);y.fromPositionAndNormal(ma,sa,ja);sa=pa;if(y.intersectRay(ja,R,sa)&&u.squaredDistance(sa,ma)<Aa*Aa)return this.screenLocation.renderScreenPointArray[2]+ca;break;case "ribbon":const {paths:aa,direction:Q}=this.collisionType;Aa=
this._getWorldToScreenObjectScale();Aa=this._calculateObjectTransform(Aa,U);sa*=this._camera.computeScreenPixelSizeAt(this.renderLocation);xa=I.fromScreen(this._camera,R,N);if(null==xa)break;R=g.fromMat4(T,Aa);R=u.transformMat3(za,Q,R);O=this._calculateModelTransformPosition(ta);y.fromPositionAndNormal(O,R,ja);R=pa;if(!y.intersectRay(ja,xa,R))break;for(ma of aa)if(0!==ma.length)for(xa=u.transformMat4(ra,ma[0],Aa),O=1;O<ma.length;O++){W=u.transformMat4(qa,ma[O],Aa);fa=t.distance2(t.fromPoints(xa,W,
M),R);if(null!=fa&&fa<sa*sa)return ma=u.add(C.sv3d.get(),xa,W),u.scale(ma,ma,.5),R=k.castRenderScreenPointArray(C.sv3d.get()),this._camera.projectToRenderScreen(ma,R),R[2]+ca;u.copy(xa,W)}break;default:x.neverReached(this.collisionType)}return null};da.attach=function(R={manipulator3D:{}}){const ca=this._stage;ca&&(R=R.manipulator3D,null==R.engineLayerId?(this._engineLayer=new K.WebGLLayer(ca,{pickable:!1,updatePolicy:A.UpdatePolicy.SYNC}),R.engineLayerId=this._engineLayer.id):ca?.getObject&&(this._engineLayer=
ca.getObject(R.engineLayerId)),R.engineLayerReferences=(R.engineLayerReferences||0)+1,this._materialIdReferences=R.materialIdReferences,null==this._materialIdReferences&&(this._materialIdReferences=new Map,R.materialIdReferences=this._materialIdReferences),this._camera.copyFrom(this.view.state.camera),this._attached=!0,this._updateEngineObject(),l.canProjectWithoutEngine(this._location.spatialReference,this.view.spatialReference)||(this.location=new H({x:0,y:0,z:0,spatialReference:this.view.spatialReference})))};
da.detach=function(R={manipulator3D:{}}){R=R.manipulator3D;R.engineLayerReferences--;const ca=0===R.engineLayerReferences;this._removeResourcesFromStage();ca&&(R.engineLayerId=null,n.destroyMaybe(this._engineLayer));this._materialIdReferences=this._engineLayer=this._engineResources=null;this._attached=!1};da.onViewChange=function(){this._camera.copyFrom(this.view.state.camera);this._screenLocationDirty=!0;this._updateEngineObject()};da.onElevationChange=function(R){l.projectPoint(this.location,ua,
R.spatialReference)&&h.containsPointObject(R.extent,ua)&&this._notifyLocationChanged()};da._evaluateElevationAlignment=function(){if(null!=this.elevationInfo){var R=null,ca=0,sa=this.elevationInfo.offset??0;switch(this.elevationInfo.mode){case "on-the-ground":R=F.getElevationAtPoint(this.view.elevationProvider,this.location,"ground")??0;break;case "relative-to-ground":ca=(F.getElevationAtPoint(this.view.elevationProvider,this.location,"ground")??0)+sa;break;case "relative-to-scene":ca=(F.getElevationAtPoint(this.view.elevationProvider,
this.location,"scene")??0)+sa;break;case "absolute-height":ca=sa}if(ca!==this._elevation.offset||R!==this._elevation.override)this._elevation.offset=ca,this._elevation.override=R}};da._updateEngineObject=function(){if(this._attached)if(this.available){var R=this._getWorldToScreenObjectScale(),ca=U;!0===this.autoScaleRenderObjects?(R*=this._getFocusedSize(this._radius,this.focused),this._calculateObjectTransform(R,ca)):this._calculateObjectTransform(R,ca);var {objectsByState:sa}=this._ensureEngineResources();
R=(this.focused?J.ManipulatorStateFlags.Focused:J.ManipulatorStateFlags.Unfocused)|(this.selected?J.ManipulatorStateFlags.Selected:J.ManipulatorStateFlags.Unselected);var xa=0<this._noDisplayCount;for(const {stateMask:ma,objects:Aa}of sa)if(xa)for(const O of Aa)O.visible=!1;else if(sa=(ma&J.ManipulatorStateCustomFlags.All)===J.ManipulatorStateCustomFlags.None||(this.state&ma)===(ma&J.ManipulatorStateCustomFlags.All),(ma&J.ManipulatorStateFlags.All)!==J.ManipulatorStateFlags.None&&(R&ma)!==(ma&J.ManipulatorStateFlags.All)||
!sa)for(const O of Aa)O.visible=!1;else for(const O of Aa)O.visible=!0,O.transformation=ca}else this._removeResourcesFromStage()};da._ensureEngineResources=function(){if(null==this._engineResources){const R=this._engineLayer,ca=[],sa=new Set;this.renderObjects.forEach(({geometry:{material:Aa}})=>{sa.has(Aa)||(ca.push(Aa),sa.add(Aa))});const xa=new Map;this._renderObjects.forEach(Aa=>{const O=new z.Object3D({castShadow:!1,geometries:[Aa.geometry]}),W=xa.get(Aa.stateMask)||[];W.push(O);xa.set(Aa.stateMask,
W)});const ma=[];xa.forEach((Aa,O)=>ma.push({stateMask:O,objects:Aa}));this._engineResources={objectsByState:ma,layer:R,materials:ca}}this._addResourcesToStage();return this._engineResources};da._addResourcesToStage=function(){const R=this._stage;if(!this._engineResourcesAddedToStage&&null!=this._engineResources&&R){var {objectsByState:ca,layer:sa,materials:xa}=this._engineResources;xa.forEach(ma=>{const Aa=this._materialIdReferences,O=Aa.get(ma.id)||0;0===O&&R.add(ma);Aa.set(ma.id,O+1)});ca.forEach(({objects:ma})=>
{sa.addMany(ma);R.addMany(ma)});this._engineResourcesAddedToStage=!0}};da._removeResourcesFromStage=function(){const R=this._stage;if(this._engineResourcesAddedToStage&&null!=this._engineResources&&R){var {objectsByState:ca,layer:sa,materials:xa}=this._engineResources;ca.forEach(({objects:ma})=>{sa.removeMany(ma);R.removeMany(ma)});xa.forEach(ma=>{const Aa=this._materialIdReferences,O=Aa.get(ma.id);1===O?(R.remove(ma),Aa.delete(ma.id)):Aa.set(ma.id,O-1)});this._engineResourcesAddedToStage=!1}};da._getCollisionRadius=
function(R){return this._getFocusedSize(this.radius,!0)*("touch"===R?this.touchMultiplier:1)};da._getFocusedSize=function(R,ca){return R*(ca?this.focusMultiplier:1)};da._getWorldToScreenObjectScale=function(){return this._worldSized?1:this.screenLocation.pixelSize};da._calculateModelTransformPosition=function(R){var ca=this._getWorldToScreenObjectScale();ca=this._calculateObjectTransform(ca,Y);return u.set(R,ca[12],ca[13],ca[14])};da._calculateModelTransformOffset=function(R){const ca=this._calculateModelTransformPosition(R);
return u.subtract(R,ca,this.renderLocation)};da._calculateObjectTransform=function(R,ca){c.set(ca,R,0,0,0,0,R,0,0,0,0,R,0,0,0,0,1);this._worldFrame&&c.multiply(ca,ca,this._worldFrame);c.multiply(ca,ca,this._modelTransform);ca[12]+=this.renderLocation[0];ca[13]+=this.renderLocation[1];ca[14]+=this.renderLocation[2];ca[15]=1;null!=this._applyObjectTransform&&this._applyObjectTransform(ca);return ca};r._createClass(ha,[{key:"_stage",get:function(){return this.view?._stage}},{key:"elevationInfo",get:function(){return this._elevationInfo},
set:function(R){this._elevationInfo=R;this._renderLocationDirty=this._elevationAlignedLocationDirty=!0;this._updateEngineObject()}},{key:"renderObjects",get:function(){return this._renderObjects},set:function(R){this._removeResourcesFromStage();this._engineResources=null;this._renderObjects=R.slice();this._updateEngineObject()}},{key:"available",get:function(){return this._available},set:function(R){R!==this._available&&(this._available=R,this._updateEngineObject())}},{key:"radius",get:function(){return this._radius},
set:function(R){R!==this._radius&&(this._radius=R,this._updateEngineObject())}},{key:"worldSized",get:function(){return this._worldSized},set:function(R){R!==this._worldSized&&(this._worldSized=R,this._updateEngineObject())}},{key:"modelTransform",get:function(){return this._modelTransform},set:function(R){L(R)&&(this._screenLocationDirty=!0);c.copy(this._modelTransform,R);this._updateEngineObject()}},{key:"renderLocation",get:function(){if(this._renderLocationDirty)if(this._renderLocationDirty=!1,
this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation,this._renderLocation),this.worldOriented){this._worldFrame||(this._worldFrame=w.create());a:{var R=this.view,ca=this._renderLocation,sa=this._worldFrame;switch(R.viewingMode){case "local":c.identity(sa);break a;case "global":R=d.getReferenceEllipsoid(R.renderCoordsHelper.spatialReference),l.sphericalPCPFtoLonLatElevation(ca,0,ra,0,R.radius),l.computeENUToSphericalPCPFLocalRotation(p.deg2rad(ra[0]),p.deg2rad(ra[1]),sa)}}}else this._worldFrame&&
(this._worldFrame=null);return this._renderLocation},set:function(R){this.view.renderCoordsHelper.fromRenderCoords(R,this._location);this.elevationAlignedLocation=this._location}},{key:"location",get:function(){return this._location},set:function(R){D.clonePoint(R,this._location);this._notifyLocationChanged()}},{key:"elevationAlignedLocation",get:function(){if(!this._elevationAlignedLocationDirty)return this._elevationAlignedLocation;this._evaluateElevationAlignment();this._updateElevationAlignedLocation();
return this._elevationAlignedLocation},set:function(R){D.clonePoint(R,this._location);this._evaluateElevationAlignment();this._location.z-=this._elevation.offset;this._updateElevationAlignedLocation();this._updateEngineObject();this.events.emit("location-update",{location:this._location})}},{key:"grabbing",get:function(){return this._grabbing},set:function(R){R!==this._grabbing&&(this._grabbing=R,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}},{key:"hovering",get:function(){return this._hovering},
set:function(R){R!==this._hovering&&(this._hovering=R,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}},{key:"selected",get:function(){return this._selected},set:function(R){R!==this._selected&&(this._selected=R,this._updateEngineObject(),this.events.emit("select-changed",{action:R?"select":"deselect"}))}},{key:"state",get:function(){return this._state},set:function(R){R!==this._state&&(this._state=R,this._updateEngineObject())}},{key:"focused",get:function(){return this._focused}},
{key:"screenLocation",get:function(){this._ensureScreenLocation();return this._screenLocation}},{key:"applyObjectTransform",get:function(){return this._applyObjectTransform},set:function(R){this._applyObjectTransform=R;this._screenLocationDirty=!0;this._updateEngineObject()}},{key:"attached",get:function(){return this._attached}},{key:"test",get:function(){let R=!1;if(null!=this._engineResources)for(const ca in this._engineResources.objectsByState){const sa=this._engineResources.objectsByState[ca];
for(const xa of sa.objects)if(xa.visible){R=!0;break}if(R)break}return{areAnyResourcesVisible:R}}}]);return ha}();const E=k.createScreenPointArray(),M=t.create(),N=q.create(),T=v.create(),Y=w.create(),U=w.create(),ja=y.create(),ra=b.create(),qa=b.create(),pa=b.create(),za=b.create(),ta=b.create(),oa=b.create(),ua=new H({x:0,y:0,z:0,spatialReference:null}),V=()=>{};a.Manipulator3D=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/RenderObject":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../interactive/interfaces"],function(a,r,e){r=r._createClass(function(x,m=e.ManipulatorStateFlags.None){this.geometry=x;this.stateMask=m});a.RenderObject=r;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/ImageMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../core/shaderLibrary/ShaderOutput ../lib/basicInterfaces ../lib/GLTextureMaterial ../lib/Material ../lib/OrderIndependentTransparency ../lib/RenderSlot ./DefaultBufferWriter ./DefaultLayouts ./TriangleMaterial ../shaders/ImageMaterialTechnique".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c){v=function(u){function b(l){l=u.call(this,l,new B)||this;l.supportsEdges=!0;l._configuration=new c.ImageMaterialTechniqueConfiguration;return l}r._inherits(b,u);var d=b.prototype;d.getConfiguration=function(l,h){this._configuration.output=l;this._configuration.cullFace=this.parameters.cullFace;this._configuration.hasSlicePlane=this.parameters.hasSlicePlane;this._configuration.transparent=this.parameters.transparent;this._configuration.writeDepth=this.parameters.writeDepth;
this._configuration.hasOccludees=this.parameters.hasOccludees;this._configuration.transparencyPassType=h.transparencyPassType;this._configuration.enableOffset=h.camera.relativeElevation<n.OITPolygonOffsetLimit;this._configuration.hasMultipassTerrain=h.multipassTerrain.enabled;this._configuration.cullAboveGround=h.multipassTerrain.cullAboveGround;return this._configuration};d.requiresSlot=function(l,h){return h===e.ShaderOutput.Color||h===e.ShaderOutput.Alpha||h===e.ShaderOutput.Highlight?l===k.RenderSlot.DRAPED_MATERIAL?
!0:h===e.ShaderOutput.Highlight?l===k.RenderSlot.OPAQUE_MATERIAL:l===(this.parameters.transparent?this.parameters.writeDepth?k.RenderSlot.TRANSPARENT_MATERIAL:k.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:k.RenderSlot.OPAQUE_MATERIAL):!1};d.createGLMaterial=function(l){return new w(l)};d.createBufferWriter=function(){return new f.DefaultBufferWriter(g.PositionUVLayout)};return r._createClass(b)}(v.TriangleMaterial);let w=function(u){function b(l){return u.call(this,{...l,...l.material.parameters})||
this}r._inherits(b,u);var d=b.prototype;d._updateParameters=function(l){this.updateTexture(this._material.parameters.textureId);this._material.setParameters(this.textureBindParameters);return this.ensureTechnique(c.ImageMaterialTechnique,l)};d._updateOccludeeState=function(l){l.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:l.hasOccludees}),this._updateParameters(l))};d.beginSlot=function(l){this._output!==e.ShaderOutput.Color&&this._output!==e.ShaderOutput.Alpha||
this._updateOccludeeState(l);return this._updateParameters(l)};return r._createClass(b)}(m.GLTextureMaterial),B=function(u){function b(){var d=u.apply(this,arguments)||this;d.transparent=!1;d.writeDepth=!0;d.hasSlicePlane=!1;d.cullFace=x.CullFaceOptions.None;d.hasOccludees=!1;d.opacity=1;d.textureId=null;d.initTextureTransparent=!0;return d}r._inherits(b,u);return r._createClass(b)}(p.MaterialParameters);a.ImageMaterial=v;a.Parameters=B;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/shaders/ImageMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/ShaderOutput ../core/shaderModules/interfaces ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../lib/DefaultVertexAttributeLocations ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../lib/TransparencyPassType ../materials/DefaultTechniqueConfiguration ../../../../chunks/ImageMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h){p=function(y){function q(){return y.apply(this,arguments)||this}e._inherits(q,y);return e._createClass(q)}(p.NoParameters);k=function(y){function q(){return y.apply(this,arguments)||this}e._inherits(q,y);var C=q.prototype;C.initializeProgram=function(D){return new w.Program(D.rctx,q.shader.get().build(this.configuration),v.Default3D)};C._setPipelineState=function(D,F){const I=this.configuration,G=D===u.TransparencyPassType.NONE,z=D===u.TransparencyPassType.FrontFace;
return h.makePipelineState({blending:I.output!==m.ShaderOutput.Color&&I.output!==m.ShaderOutput.Alpha||!I.transparent?null:G?t:c.oitBlending(D),culling:h.cullingParams(I.cullFace),depthTest:{func:c.oitDepthTest(D)},depthWrite:G?I.writeDepth?h.defaultDepthWriteParams:null:c.oitDepthWrite(D),colorWrite:h.defaultColorWriteParams,stencilWrite:I.hasOccludees?B.stencilWriteMaskOn:null,stencilTest:I.hasOccludees?F?B.stencilToolMaskBaseParams:B.stencilBaseAllZerosParams:null,polygonOffset:G||z?null:c.getOITPolygonOffset(I.enableOffset)})};
C.initializePipeline=function(){this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0);return this._setPipelineState(this.configuration.transparencyPassType,!1)};C.getPipelineState=function(D,F){return F?this._occludeePipelineState:e._get(e._getPrototypeOf(q.prototype),"getPipelineState",this).call(this,D,F)};return e._createClass(q)}(k.ShaderTechnique);k.shader=new n.ReloadableShaderModule(d.ImageMaterial,()=>new Promise((y,q)=>a(["./ImageMaterial.glsl"],y,
q)));const t=h.simpleBlendingParams(l.BlendFactor.ONE,l.BlendFactor.ONE_MINUS_SRC_ALPHA);n=function(y){function q(){var C=y.apply(this,arguments)||this;C.output=m.ShaderOutput.Color;C.cullFace=g.CullFaceOptions.None;C.hasSlicePlane=!1;C.transparent=!1;C.enableOffset=!0;C.writeDepth=!0;C.hasOccludees=!1;C.transparencyPassType=u.TransparencyPassType.NONE;C.hasMultipassTerrain=!1;C.cullAboveGround=!1;return C}e._inherits(q,y);return e._createClass(q)}(b.DefaultTechniqueConfiguration);x.__decorate([f.parameter({count:m.ShaderOutput.COUNT})],
n.prototype,"output",void 0);x.__decorate([f.parameter({count:g.CullFaceOptions.COUNT})],n.prototype,"cullFace",void 0);x.__decorate([f.parameter()],n.prototype,"hasSlicePlane",void 0);x.__decorate([f.parameter()],n.prototype,"transparent",void 0);x.__decorate([f.parameter()],n.prototype,"enableOffset",void 0);x.__decorate([f.parameter()],n.prototype,"writeDepth",void 0);x.__decorate([f.parameter()],n.prototype,"hasOccludees",void 0);x.__decorate([f.parameter({count:u.TransparencyPassType.COUNT})],
n.prototype,"transparencyPassType",void 0);x.__decorate([f.parameter()],n.prototype,"hasMultipassTerrain",void 0);x.__decorate([f.parameter()],n.prototype,"cullAboveGround",void 0);r.ImageMaterialPassParameters=p;r.ImageMaterialTechnique=k;r.ImageMaterialTechniqueConfiguration=n;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/ImageMaterial.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform ../views/3d/webgl-engine/lib/TransparencyPassType ../views/3d/webgl-engine/lib/VertexAttribute".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B){function u(d){const l=new v.ShaderBuilder,{vertex:h,fragment:t}=l;k.addProjViewLocalOrigin(h,d);l.include(x.Transform,d);l.attributes.add(B.VertexAttribute.POSITION,"vec3");l.attributes.add(B.VertexAttribute.UV0,"vec2");l.varyings.add("vpos","vec3");d.hasMultipassTerrain&&l.varyings.add("depth","float");h.code.add(g.glsl`
    void main(void) {
      vpos = position;
      ${d.hasMultipassTerrain?"depth \x3d (view * vec4(vpos, 1.0)).z;":""}
      vTexCoord = uv0;
      gl_Position = transformPosition(proj, view, vpos);
    }
  `);l.include(e.SliceDraw,d);l.include(m.multipassTerrainTest,d);t.uniforms.add(new c.Texture2DPassUniform("tex",y=>y.texture),new f.FloatPassUniform("opacity",y=>y.opacity));l.varyings.add("vTexCoord","vec2");d.output===r.ShaderOutput.Alpha?t.code.add(g.glsl`
    void main() {
      discardBySlice(vpos);
      ${d.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}

      float alpha = texture(tex, vTexCoord).a * opacity;
      if (alpha  < ${g.glsl.float(p.defaultMaskAlphaCutoff)}) {
        discard;
      }

      fragColor = vec4(alpha);
    }
    `):(t.include(n.ColorConversion),t.code.add(g.glsl`
    void main() {
      discardBySlice(vpos);
      ${d.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
      fragColor = texture(tex, vTexCoord) * opacity;

      if (fragColor.a < ${g.glsl.float(p.defaultMaskAlphaCutoff)}) {
        discard;
      }

      fragColor = highlightSlice(fragColor, vpos);
      ${d.transparencyPassType===w.TransparencyPassType.Color?"fragColor \x3d premultiplyAlpha(fragColor);":""}
    }
    `));return l}const b=Object.freeze(Object.defineProperty({__proto__:null,build:u},Symbol.toStringTag,{value:"Module"}));a.ImageMaterial=b;a.build=u})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(a,r){a.SupportedGraphicResult=void 0;(function(e){e[e.SUPPORTED=0]="SUPPORTED";e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING";e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING";e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED";
e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED";e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(a.SupportedGraphicResult||(a.SupportedGraphicResult={}));a.isSupportedGraphicResultMessage=function(e){switch(e){case a.SupportedGraphicResult.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case a.SupportedGraphicResult.GEOMETRY_MISSING:return"no geometry";case a.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case a.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";
case a.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulatorUtils":function(){define(["exports","../../../../support/elevationInfoUtils"],function(a,r){a.canMoveZ=function(e,x=r.getGraphicEffectiveElevationInfo(e)){return"on-the-ground"!==x.mode&&null!=e.geometry&&e.geometry.hasZ?!0:!1};a.disableDisplayOnGrab=function(e,x){let m=null;const p=
e.events.on("grab-changed",n=>{null!=m&&(m.remove(),m=null);"start"===n.action&&(m=e.disableDisplay());x&&x(n)});return{remove(){null!=m&&m.remove();p.remove()}}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/visualElementUtils":function(){define(["exports","./lineGraphicVisualElementUtils","./originGraphicVisualElementUtils"],function(a,r,e){a.createVisualElements=function(x){switch(x.graphic.geometry.type){case "point":case "mesh":return e.createVisualElements(x);
case "polygon":case "polyline":return r.createVisualElements(x);default:return null}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/lineGraphicVisualElementUtils":function(){define("exports ../../../../core/handleUtils ../../../../core/mathUtils ../../../../core/reactiveUtils ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../support/elevationInfoUtils ../Manipulator3D ./GrabbingState ./ManipulatorState ./ManipulatorType ./settings ../visualElements/ExtendedLineVisualElement ../visualElements/LaserlineVisualElement ../visualElements/OutlineVisualElement ../../layers/graphics/GraphicState ../../webgl-engine/lib/Material".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d){function l(C,D){const {view:F,graphic:I}=C,G=new u.OutlineVisualElement({view:F,geometry:y(I)?I.geometry:null,elevationInfo:n.getGraphicEffectiveElevationInfo(I),attached:!1});C=c.getSettings(F).visualElements.lineGraphics;C.shadowStyle.apply(G);C.outline.apply(G);const z=[x.watch(()=>D.displaying,()=>{G.attached=D.displaying}),x.watch(()=>D.isDraped,A=>{G.isDraped=A}),D.on("changed",()=>G.geometry=y(I)?I.geometry:null),r.destroyHandle(G)];G.attached=D.displaying;
return{visualElement:G,remove:()=>r.handlesGroup(z).remove()}}function h(C,D,F){const {graphic:I,view:G}=C,z=[];var A=n.getGraphicEffectiveElevationInfo(I);const K="on-the-ground"===A.mode||!A.offset&&"absolute-height"!==A.mode,J=new g.ManipulatorState,H=c.getSettings(G).visualElements,L=new w.ExtendedLineVisualElement({view:G,extensionType:H.zVerticalLine.extensionType,innerWidth:1,attached:!1,writeDepthEnabled:!1,renderOccluded:d.RenderOccludedFlag.OccludeAndTransparent});H.pointGraphics.shadowStyle.apply(L);
A=e.deg2rad(H.heightPlaneAngleCutoff);const E=new B.LaserlineVisualElement({view:G,attached:!1,angleCutoff:A});H.heightPlane.apply(E);let M=1,N=1;const T=()=>{J.update(C);if(F.displaying&&(!K||!F.isDraped&&y(I)&&I.geometry.hasZ)){D.laserlineEnabled=!0;var U=J.grabbingState&f.GrabbingState.XY?H.laserlineAlphaMultiplier:1;U!==M&&(M=U,H.lineGraphics.shadowStyle.apply(D,U),H.pointGraphics.shadowStyle.apply(L,U));U=J.grabbingState&f.GrabbingState.Z?H.laserlineAlphaMultiplier:1;U!==N&&(N=U,H.heightPlane.apply(E,
U));U=1===J.numSelected?J.firstSelected:1<J.numSelected&&null!=J.firstGrabbedXY?J.firstGrabbedXY:null;null!=U?(L.setStartEndFromWorldDownAtLocation(U.renderLocation),L.attached=!0):L.attached=!1;t(C,D,E,J)}else D.laserlineEnabled=!1,L.attached=!1,E.attached=!1};H.zVerticalLine.apply(L);z.push(F.on("changed",T),x.watch(()=>F.displaying,T),D.events.on("attachment-origin-changed",T),r.destroyHandle(L),r.destroyHandle(E));const Y=[];A=()=>{r.handlesGroup(Y).remove();Y.length=0;C.forEachManipulator(U=>
Y.push(U.events.on("grab-changed",T)));C.forEachManipulator(U=>Y.push(U.events.on("select-changed",T)));T()};A();z.push(C.onManipulatorsChanged(A),r.refHandle(()=>r.handlesGroup(Y)));return r.handlesGroup(z)}function t(C,D,F,I){if(0<I.numSelected){m.set(q,0,0,0);let G=0;C.forEachManipulator((z,A)=>{A===v.ManipulatorType.TRANSLATE_XY&&z.selected&&z instanceof k.Manipulator3D&&(m.add(q,q,z.renderLocation),G++)});0<G?(F.heightManifoldTarget=m.scale(q,q,1/G),F.attached=!0):F.attached=!1}else D=D.attachmentOrigin,
null!=D&&C.view.renderCoordsHelper.toRenderCoords(D,q)?(F.heightManifoldTarget=q,F.attached=!0):F.attached=!1}function y(C){return null!=C.geometry&&("polygon"===C.geometry.type||"polyline"===C.geometry.type)}const q=p.create();a.createVisualElements=function(C){const {view:D,graphic:F}=C,I=new b.GraphicState({graphic:F}),G=l(C,I);C=h(C,G.visualElement,I);const z=[G,C,D.maskOccludee(F),D.trackGraphicState(I)];return{visualElement:G.visualElement,remove:()=>r.handlesGroup(z).remove()}};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/GrabbingState":function(){define(["exports"],function(a){a.GrabbingState=void 0;var r=a.GrabbingState||(a.GrabbingState={});r[r.NONE=0]="NONE";r[r.ANY=1]="ANY";r[r.Z=2]="Z";r[r.XY=4]="XY";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/ManipulatorState":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../Manipulator3D","./GrabbingState",
"./ManipulatorType"],function(a,r,e,x,m){let p=function(){function n(){this.grabbingState=x.GrabbingState.NONE;this.firstSelected=this.zManipulator=null;this.numSelected=0;this.firstGrabbedXY=null}n.prototype.update=function(k){this.grabbingState=x.GrabbingState.NONE;this.zManipulator=null;this.numSelected=0;this.firstGrabbedXY=this.firstSelected=null;k.forEachManipulator((f,g)=>{g===m.ManipulatorType.TRANSLATE_Z&&(this.zManipulator=f);f instanceof e.Manipulator3D&&(f.selected&&(0===this.numSelected&&
(this.firstSelected=f),this.numSelected++),null==this.firstGrabbedXY&&f.grabbing&&g===m.ManipulatorType.TRANSLATE_XY&&(this.firstGrabbedXY=f));if(f.grabbing)switch(this.grabbingState|=x.GrabbingState.ANY,g){case m.ManipulatorType.TRANSLATE_Z:this.grabbingState|=x.GrabbingState.Z;break;case m.ManipulatorType.TRANSLATE_XY:this.grabbingState|=x.GrabbingState.XY}})};return r._createClass(n)}();a.ManipulatorState=p;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/ManipulatorType":function(){define(["exports"],
function(a){a.ManipulatorType=void 0;var r=a.ManipulatorType||(a.ManipulatorType={});r[r.TRANSLATE_Z=0]="TRANSLATE_Z";r[r.TRANSLATE_XY=1]="TRANSLATE_XY";r[r.SCALE=2]="SCALE";r[r.ROTATE=3]="ROTATE";r[r.SCALE_ROTATE=4]="SCALE_ROTATE";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/originGraphicVisualElementUtils":function(){define("exports ../../../../core/handleUtils ../../../../core/mathUtils ../../../../core/reactiveUtils ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/projection ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../support/elevationInfoUtils ./GrabbingState ./ManipulatorState ./settings ../visualElements/ExtendedLineVisualElement ../visualElements/LaserlineVisualElement ../visualElements/PointVisualElement ../../layers/graphics/elevationAlignmentUtils ../../layers/graphics/ElevationContext ../../layers/graphics/GraphicState ../../webgl-engine/lib/Material".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t){function y(A,K,J,H){const {view:L,graphic:E}=A,M=w.getSettings(L),N=new B.ExtendedLineVisualElement({view:L,extensionType:M.visualElements.zVerticalLine.extensionType,innerWidth:1,attached:!1,writeDepthEnabled:!1,renderOccluded:t.RenderOccludedFlag.OccludeAndTransparent});M.visualElements.zVerticalLine.apply(N);const T=new u.LaserlineVisualElement({view:L,intersectsLineInfinite:!0,attached:!1});M.visualElements.pointGraphics.shadowStyle.apply(T);var Y=
e.deg2rad(M.visualElements.heightPlaneAngleCutoff);const U=new u.LaserlineVisualElement({view:L,attached:!1,angleCutoff:Y});M.visualElements.heightPlane.apply(U);Y=g.getGraphicEffectiveElevationInfo(A.graphic);const ja=l.ElevationContext.fromElevationInfo(Y),ra="on-the-ground"===Y.mode||!Y.offset&&"absolute-height"!==Y.mode,qa=new c.ManipulatorState;let pa=1,za=1;const ta=()=>{qa.update(A);var oa=C(E),ua=ra&&(K.isDraped||null==oa||!oa.hasZ);let V=!0;if(ua||null==oa)V=!1;else{const ha=d.evaluateElevationAlignmentAtPoint(oa,
L.elevationProvider,ja,L.renderCoordsHelper);m.set(G,oa.x,oa.y,ha);n.projectVectorToVector(G,oa.spatialReference,G,L.renderCoordsHelper.spatialReference);N.setStartEndFromWorldDownAtLocation(G);T.intersectsWorldUpAtLocation=G}oa=qa.grabbingState&v.GrabbingState.Z?M.visualElements.laserlineAlphaMultiplier:1;oa!==pa&&(pa=oa,M.visualElements.heightPlane.apply(U,oa));oa=k.empty(z);!ua&&K.displaying&&H.calculateMapBounds(oa)&&n.projectVectorToVector(k.getMin(oa,G),L.spatialReference,G,L.renderCoordsHelper.spatialReference)?
(U.heightManifoldTarget=G,U.attached=!0):U.attached=!1;oa=qa.grabbingState&v.GrabbingState.XY?M.visualElements.laserlineAlphaMultiplier:1;oa!==za&&(za=oa,M.visualElements.pointGraphics.shadowStyle.apply(T,oa));ua=V&&K.displaying&&!ua;T.attached=ua;N.attached=ua};J.push(x.watch(()=>[K.displaying,K.isDraped],ta),K.on("changed",ta));A.forEachManipulator(oa=>{J.push(oa.events.on("grab-changed",ta))});J.push(r.destroyHandle(T));J.push(r.destroyHandle(N));J.push(r.destroyHandle(U));ta()}function q(A,K,
J){const {view:H,graphic:L}=A,E=new b.PointVisualElement({view:H,geometry:C(L),elevationInfo:g.getGraphicEffectiveElevationInfo(L),attached:!1});D(A,E,K,J);J.push(r.destroyHandle(E));return E}function C(A){A=A.geometry;return null==A?null:"point"===A.type?A:"mesh"===A.type?A.anchor.clone():null}function D(A,K,J,H){F(A,K,J,H);w.getSettings(A.view).visualElements.pointGraphics.outline.apply(K);H.push(x.watch(()=>J.displaying,()=>K.attached=J.displaying,x.initial))}function F(A,K,J,H){const {view:L,
graphic:E}=A;let M=null;const N=T=>{null!=M&&(M.remove(),M=null);J.isDraped&&null!=T&&(M=I(L,T,()=>{K.geometry=T}))};A=()=>{const T=C(E);N(T);K.geometry=T};H.push(J.on("changed",A),r.refHandle(()=>M));A()}function I(A,K,J){n.projectPointToVector(K,G,A.elevationProvider.spatialReference);const H=G[0],L=G[1];return A.elevationProvider.on("elevation-change",E=>{f.containsXY(E.extent,H,L)&&J()})}const G=p.create(),z=k.create();a.createVisualElements=function(A){const {view:K,graphic:J}=A,H=new h.GraphicState({graphic:J}),
L=[],E=q(A,H,L);y(A,H,L,E);L.push(K.trackGraphicState(H));return{visualElement:E,remove(){r.handlesGroup(L).remove()}}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/config":function(){define(["exports"],function(a){const r=Math.ceil(70/3*2),e=5*Math.PI/12,x=1*Math.PI/3;a.ALIGN_ARROWS_SCALE_THRESHOLD=1E6;a.DISC_COLLISION_RADIUS=80;a.DISC_HEIGHT=.02;a.DISC_RADIUS=70;a.DISC_RADIUS_SMALL=r;a.DISC_TRANSLATE_ARROW_OFFSET=100;a.DISC_TRANSLATE_ARROW_SIZE=
54;a.DRAG_THRESHOLD_PX=10;a.GEOMETRY_SEGMENTS=128;a.INDICATOR_THICKNESS=9;a.INNER_INDICATOR_RADIUS=190;a.OUTER_INDICATOR_RADIUS=213;a.RING_HEIGHT=.5;a.RING_INDICATOR_DELAY_MS=200;a.RING_RADIUS=160;a.RING_RESET_ANIMATION_SPEED_FACTOR=3;a.RING_THICKNESS=24;a.ROTATE_INDICATOR_ARC_LENGTH=e;a.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE=.2;a.ROTATE_INDICATOR_ARROW_TIP_LENGTH=60;a.ROTATE_INDICATOR_ARROW_TIP_RADIUS=23;a.ROTATE_INDICATOR_DIRECTION_BUFFER=.3;a.SCALE_INDICATOR_ARC_LENGTH=x;a.SCALE_INDICATOR_DIRECTION_BUFFER=
.2;a.SCALE_INDICATOR_OFFSET1=30;a.SCALE_INDICATOR_OFFSET2=53;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/MoveManipulation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/has ../../../../../core/reactiveUtils ../ManipulatorType ./config ./Manipulation ./MoveXYAxisManipulation ./MoveXYDiscManipulation ./MoveZManipulation".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c){f=function(w){function B(b){var d=w.call(this)||this;d._handles=new e;d._interactive=!0;const {tool:l,view:h,snapToScene:t,radius:y}=b;d._view=h;d.xyManipulation=new v.MoveXYDiscManipulation({tool:l,view:h,snapToScene:t,radius:y});d.xyAxisManipulation=new g.MoveXYAxisManipulation({tool:l,view:h,radius:y});d.zManipulation=new c.MoveZManipulation({tool:l,view:h,radius:y});d.xyManipulation.available=b.xyAvailable;d.xyAxisManipulation.available=b.xyAxisAvailable;d.zManipulation.available=
b.zAvailable;d._autoHideXYAxis();d.forEachManipulator(q=>d._handles.add(q.events.on("grab-changed",()=>d._updateManipulatorInteractivity())));return d}r._inherits(B,w);var u=B.prototype;u.destroy=function(){this._handles.destroy();this.xyManipulation.destroy();this.xyAxisManipulation.destroy();this.zManipulation.destroy()};u.createGraphicDragPipeline=function(b,d,l){return x.handlesGroup([this.xyManipulation.createGraphicDragPipeline((h,t,y,q,C)=>b(a.ManipulationType.XY,h,t,y,q,C),d,l),this.xyAxisManipulation.createGraphicDragPipeline((h,
t,y,q,C)=>b(a.ManipulationType.XY_AXIS,h,t,y,q,C),d,l),this.zManipulation.createGraphicDragPipeline((h,t,y,q,C)=>b(a.ManipulationType.Z,h,t,y,q,C),d,l)])};u.createDragPipeline=function(b,d,l,h){return x.handlesGroup([this.xyManipulation.createDragPipeline((t,y,q,C,D)=>b(a.ManipulationType.XY,t,y,q,C,D),d,l,h),this.xyAxisManipulation.createDragPipeline((t,y,q,C,D)=>b(a.ManipulationType.XY_AXIS,t,y,q,C,D),d,l,h),this.zManipulation.createDragPipeline((t,y,q,C,D)=>b(a.ManipulationType.Z,t,y,q,C,D),l)])};
u.forEachManipulator=function(b){this.xyManipulation.forEachManipulator(d=>b(d,n.ManipulatorType.TRANSLATE_XY));this.xyAxisManipulation.forEachManipulator(d=>b(d,n.ManipulatorType.TRANSLATE_XY));this.zManipulation.forEachManipulator(d=>b(d,n.ManipulatorType.TRANSLATE_Z))};u._autoHideXYAxis=function(){const b=this.xyAxisManipulation;var d=this.xyManipulation;if(!m("esri-mobile")){var l=[];d.forEachManipulator(h=>l.push(h));b.forEachManipulator(h=>l.push(h));d=()=>{const h=[];this._xyAxisVisible||b.forEachManipulator(t=>
h.push(t.disableDisplay()));this._handles.remove("disable-xy-axis-display");this._handles.add(h,"disable-xy-axis-display")};for(const h of l)this._handles.add(h.events.on("focus-changed",d));this._view.inputManager&&this._handles.add(p.when(()=>this._view.inputManager?.latestPointerType,d));d()}};u._updateManipulatorInteractivity=function(){const b=this.grabbing;this.forEachManipulator(d=>{d.interactive=!b&&this._interactive||d.grabbing})};B.radiusForSymbol=function(b){return(b=null!=b&&"point-3d"===
b.type&&b.symbolLayers)&&0<b.length&&b.some(d=>"icon"===d.type)?k.DISC_RADIUS_SMALL:k.DISC_RADIUS};r._createClass(B,[{key:"snapToScene",set:function(b){this.xyManipulation.snapToScene=b}},{key:"angle",set:function(b){this.xyAxisManipulation.angle=b}},{key:"interactive",set:function(b){this._interactive!==b&&(this._interactive=b,this._updateManipulatorInteractivity())}},{key:"radius",set:function(b){this.xyAxisManipulation.radius=b;this.xyManipulation.radius=b;this.zManipulation.radius=b}},{key:"displayScale",
set:function(b){this.xyManipulation.displayScale=b;this.xyAxisManipulation.displayScale=b}},{key:"_xyAxisVisible",get:function(){const b=this.xyManipulation.someManipulator(d=>d.focused)||this.xyAxisManipulation.someManipulator(d=>d.focused);return this._view.inputManager&&"touch"===this._view.inputManager.latestPointerType||b}}]);return B}(f.Manipulation);a.ManipulationType=void 0;(function(w){w[w.XY=0]="XY";w[w.XY_AXIS=1]="XY_AXIS";w[w.Z=2]="Z"})(a.ManipulationType||(a.ManipulationType={}));a.MoveManipulation=
f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/Manipulation":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../Manipulator3D"],function(a,r,e){let x=function(){function m(){this._available=!0}var p=m.prototype;p.hasManipulator=function(n){return this.someManipulator(k=>k===n)};p.someManipulator=function(n){let k=!1;this.forEachManipulator(f=>{!k&&n(f)&&(k=!0)});return k};p._forEachManipulator3D=
function(n){this.forEachManipulator((k,f)=>{k instanceof e.Manipulator3D&&n(k,f)})};r._createClass(m,[{key:"location",set:function(n){this._forEachManipulator3D(k=>k.location=n)}},{key:"elevationAlignedLocation",set:function(n){this._forEachManipulator3D(k=>k.elevationAlignedLocation=n)}},{key:"elevationInfo",set:function(n){this._forEachManipulator3D(k=>k.elevationInfo=n)}},{key:"renderLocation",get:function(){let n;this._forEachManipulator3D(k=>{n||(n=k.renderLocation)});return n}},{key:"available",
get:function(){return this._available},set:function(n){this._available=n;this._forEachManipulator3D(k=>k.available=n)}},{key:"hovering",get:function(){return this.someManipulator(n=>n.hovering)}},{key:"grabbing",get:function(){return this.someManipulator(n=>n.grabbing)}},{key:"dragging",get:function(){return this.someManipulator(n=>n.dragging)}}]);return m}();a.Manipulation=x;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/MoveXYAxisManipulation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/vectorStacks ../../../../../support/elevationInfoUtils ../../Manipulator3D ../../RenderObject ../dragEventPipeline3D ../ManipulatorType ../settings ./config ./Manipulation ./moveUtils ../../../webgl-engine/lib/basicInterfaces ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Material ../../../webgl-engine/materials/ColorMaterial ../../../../interactive/dragEventPipeline ../../../../interactive/interfaces".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G){t=function(z){function A(J){var H=z.call(this)||this;H._handles=new m;H._arrowManipulatorInfos=[];H._opaqueMaterial=H._createMaterial();H._transparentMaterial=H._createMaterial(.5);H._angle=0;H._scale=1;H._radius=h.DISC_RADIUS;H._updateAfterDrag=!1;H.events=new x;H._tool=J.tool;H._view=J.view;null!=J.radius&&(H._radius=J.radius);H._createManipulators();H.forEachManipulator(L=>H._tool.manipulators.add(L));return H}r._inherits(A,z);var K=
A.prototype;K.destroy=function(){this._handles=n.destroyMaybe(this._handles);this.forEachManipulator(J=>{this._tool.manipulators.remove(J);J.destroy()});this._view=this._tool=null;this._arrowManipulatorInfos.length=0};K.forEachManipulator=function(J){for(const {manipulator:H}of this._arrowManipulatorInfos)J(H,d.ManipulatorType.TRANSLATE_XY)};K.createGraphicDragPipeline=function(J,H,L){const E=H.graphic,M=w.getGraphicEffectiveElevationInfo(E),N=E.geometry.spatialReference;return y.createGraphicMoveDragPipeline(H,
L,T=>this.createDragPipeline((Y,U,ja,ra,qa)=>{({steps:U,cancel:ja}=J(Y,U,ja,ra,qa));return T(Y,U,ja)},M,N,E),this._view.state.viewingMode)};K.createDragPipeline=function(J,H,L,E){return p.handlesGroup(this._arrowManipulatorInfos.map(({manipulator:M},N)=>I.createManipulatorDragEventPipeline(M,(T,Y,U,ja,ra)=>{Y=Y.next(qa=>({...qa,manipulatorType:d.ManipulatorType.TRANSLATE_XY})).next(I.dragAtLocation(this._view,T.elevationAlignedLocation)).next(b.screenToMapXYAtLocation(this._view,T.elevationAlignedLocation,
H,L,E)).next(I.constrainToMapAxis(T.location,this.angle+(N+1)*Math.PI*.5)).next(I.addScreenDelta());J(T,Y,U,ja,ra)})))};K._updateManipulators=function(){for(let J=0;J<this._arrowManipulatorInfos.length;J++)this._updateArrowManipulator(this._arrowManipulatorInfos[J],J);this._updateManipulatorTransform()};K._updateArrowManipulator=function({manipulator:J,transform:H},L){var E=this._radius/h.DISC_RADIUS,M=h.DISC_TRANSLATE_ARROW_SIZE*E;const N=M*Math.sqrt(3)/2;M=C.createExtrudedTriangle(this._opaqueMaterial,
N,M/2,M/2,h.DISC_HEIGHT);C.transformInPlace(M,k.fromTranslation(c.sm4d.get(),g.set(c.sv3d.get(),0,-N/3,0)));J.renderObjects=[new u.RenderObject(M,G.ManipulatorStateFlags.Focused),new u.RenderObject(M.instantiate({material:this._transparentMaterial}),G.ManipulatorStateFlags.Unfocused)];J.radius=N/3*2.4;J=k.fromZRotation(c.sm4d.get(),L*Math.PI/2);E=k.fromTranslation(c.sm4d.get(),g.set(c.sv3d.get(),0,h.DISC_TRANSLATE_ARROW_OFFSET*E,0));k.multiply(H,J,E)};K._createManipulators=function(){for(let J=0;4>
J;J++){const H=this._createArrowManipulator(J);this._arrowManipulatorInfos.push(H)}this._updateManipulatorTransform()};K._updateManipulatorTransform=function(){var J=this.angle;J=k.fromRotation(c.sm4d.get(),J,v.fromValues(0,0,1));if(null!=J){var H=k.fromScaling(c.sm4d.get(),g.set(c.sv3d.get(),this.displayScale,this.displayScale,this.displayScale));J=k.multiply(c.sm4d.get(),H,J);for(const L of this._arrowManipulatorInfos)H=k.multiply(c.sm4d.get(),J,L.transform),L.manipulator.modelTransform=H}};K._createArrowManipulator=
function(J){const H=new B.Manipulator3D({view:this._view,autoScaleRenderObjects:!1,worldOriented:!0,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:v.fromValues(0,0,1)}}),L={manipulator:H,transform:f.create()};this._updateArrowManipulator(L,J);this._handles.add(H.events.on("drag",E=>{this._updateAfterDrag&&"end"===E.action&&!this.dragging&&(this._updateManipulatorTransform(),this._updateAfterDrag=!1)}));return L};K._createMaterial=function(J=1){var H=l.getSettings(this._view);
H=e.toUnitRGBA(H.colors.accent);H[3]*=J;return new F.ColorMaterial({color:H,transparent:1!==J,cullFace:q.CullFaceOptions.Back,renderOccluded:D.RenderOccludedFlag.Transparent})};r._createClass(A,[{key:"orthogonalAvailable",set:function(J){3<=this._arrowManipulatorInfos.length&&(this._arrowManipulatorInfos[1].manipulator.available=J,this._arrowManipulatorInfos[3].manipulator.available=J)}},{key:"angle",get:function(){return this._angle},set:function(J){this._angle=J;this.dragging?this._updateAfterDrag=
!0:this._updateManipulatorTransform()}},{key:"displayScale",get:function(){return this._scale},set:function(J){this._scale=J;this._updateManipulatorTransform()}},{key:"radius",get:function(){return this._radius},set:function(J){this._radius!==J&&(this._radius=J,this._updateManipulators())}},{key:"test",get:function(){return{arrowManipulators:this._arrowManipulatorInfos.map(({manipulator:J})=>J)}}}]);return A}(t.Manipulation);a.MoveXYAxisManipulation=t;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/interactive/editingTools/dragEventPipeline3D":function(){define("exports ../../../../core/screenUtils ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/projection ../../../../geometry/support/plane ../../../../geometry/support/ray ../../../../geometry/support/vector ../../../../geometry/support/vectorStacks ../../../../support/elevationInfoUtils ../../support/geometryUtils/ray ../../webgl-engine/lib/Intersector ../../webgl-engine/lib/IntersectorInterfaces ../../webgl-engine/lib/verticalOffsetUtils ../../../interactive/dragEventPipeline".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){function b(G,z){return d(G,()=>z)}function d(G,z){const A=x.create(),K=x.create();let J=!1;return H=>{const L=z(H);if("start"===H.action){var E=r.screenPointObjectToArray(H.screenStart,r.castScreenPointArray(f.sv2d.get()));E=v.fromScreen(G.state.camera,E,I);null!=E&&(J=p.intersectRay(L,E,A))}if(!J)return null;E=r.screenPointObjectToArray(H.screenEnd,r.castScreenPointArray(f.sv2d.get()));E=v.fromScreen(G.state.camera,E,I);return null==E?null:p.intersectRay(L,
E,K)?{...H,renderStart:A,renderEnd:K,plane:L,ray:E}:null}}function l(G,z,A=0,K=null,J=null){let H=null;return L=>{if("start"===L.action&&(H=G.sceneIntersectionHelper.intersectElevationFromScreen(r.createScreenPointArray(L.screenStart.x,L.screenStart.y),z,A,J),null!=H&&null!=K&&!m.projectPoint(H,H,K))||null==H)return null;const E=G.sceneIntersectionHelper.intersectElevationFromScreen(r.createScreenPointArray(L.screenEnd.x,L.screenEnd.y),z,A,J);return null!=E?null==K||m.projectPoint(E,E,K)?{...L,mapStart:H,
mapEnd:E}:null:null}}function h(G,z,A,K=null,J=null){z=g.getZForElevationMode(z,G,A);return l(G,A,z,K,J)}function t(G,z,A,K=null,J=null){return h(G,A,g.getGraphicEffectiveElevationInfo(z),K,J)}function y(G,z){const A=D,K=F,J=p.create();G.renderCoordsHelper.worldUpAtPosition(z,A);G=e.cross(J,A,e.subtract(K,z,G.state.camera.eye));e.cross(G,G,A);return p.fromPositionAndNormal(z,G,J)}function q(G,z){const A=x.create(),K=e.length(z);G.renderCoordsHelper.worldUpAtPosition(z,A);const J=x.create(),H=x.create(),
L=E=>{e.subtract(E,E,z);k.projectPoint(A,E,E);"global"===G.viewingMode&&e.length(E)*Math.sign(e.dot(A,E))<-K+.001&&e.subtract(E,e.scale(E,A,.001),z);e.add(E,E,z);return E};return E=>{E.renderStart=L(e.copy(J,E.renderStart));E.renderEnd=L(e.copy(H,E.renderEnd));return E}}function C(G,z){const A=G.renderCoordsHelper;return K=>{const J=A.fromRenderCoords(K.renderStart,z),H=A.fromRenderCoords(K.renderEnd,z);return null!=J&&null!=H?{...K,mapStart:J,mapEnd:H}:null}}a.SurfaceType=void 0;(function(G){G[G.GROUND=
0]="GROUND";G[G.OTHER=1]="OTHER"})(a.SurfaceType||(a.SurfaceType={}));const D=x.create(),F=x.create(),I=n.create();a.convertToMapCoordinates=C;a.hideManipulatorWhileDragging=function(G){let z=null;return A=>{switch(A.action){case "start":z=G.disableDisplay();break;case "end":case "cancel":null!=z&&(z.remove(),z=null)}return A}};a.projectToWorldUp=q;a.screenToMap3D=function(G,z=null){const A=c.newIntersector(G.state.viewingMode);A.options.selectionMode=!0;A.options.store=w.StoreResults.MIN;A.options.hud=
!1;const K=r.createScreenPointArray(),J={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},H=x.create(),L=z??G.spatialReference,E=N=>{G.map.ground&&1>G.map.ground.opacity?J.exclude.add(B.TERRAIN_ID):J.exclude.delete(B.TERRAIN_ID);G.sceneIntersectionHelper.intersectIntersectorScreen(r.screenPointObjectToArray(N,K),A,J);N=A.results.min;if(N.getIntersectionPoint(H))N=N.intersector===w.IntersectorType.TERRAIN?a.SurfaceType.GROUND:a.SurfaceType.OTHER;else if(A.results.ground.getIntersectionPoint(H))N=
a.SurfaceType.GROUND;else return null;return{location:G.renderCoordsHelper.fromRenderCoords(H,L),surfaceType:N}};let M;return N=>{if("start"===N.action){var T=E(N.screenStart);M=null!=T?T.location:null}if(null==M)return null;T=E(N.screenEnd);return null!=T&&null!=T.location?{...N,mapStart:M,mapEnd:T.location,surfaceType:T.surfaceType}:null}};a.screenToMapXYAtLocation=h;a.screenToMapXYForGraphic=function(G,z,A,K){G=z.toMap(G.screenStart,{include:[A]});return null!=G?t(z,A,G,K):null};a.screenToMapXYForGraphicAtLocation=
t;a.screenToRenderPlane=b;a.screenToRenderPlaneFromEvent=function(G){return d(G,z=>z.plane)};a.screenToZConstrained=function(G,z,A){let K=null;const J=new u.EventPipeline;J.next(b(G,y(G,z))).next(q(G,z)).next(C(G,A)).next(H=>{H.mapEnd.x=H.mapStart.x;H.mapEnd.y=H.mapStart.y;K=H});return H=>{K=null;J.execute(H);return K}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/moveUtils":function(){define(["exports","../../../../interactive/dragEventPipeline"],
function(a,r){a.axisConstrainedDragSign=function(e){if(null==e||null==e.axis)return 1;const {mapStart:x,mapEnd:m,axis:p}=e;e=[m.x-x.x,m.y-x.y];return 0<e[0]*p[0]+e[1]*p[1]?1:-1};a.createGraphicMoveDragPipeline=function(e,x,m,p){const n=e.graphic,k=(f,g)=>x({action:f,graphic:n,dxScreen:g.screenDeltaX,dyScreen:g.screenDeltaY});return m((f,g,v)=>{g.next(c=>{"start"===c.action&&k("start",c);return c}).next(r.dragGraphic(n,p)).next(c=>{switch(c.action){case "start":case "update":(c.translationX||c.translationY||
c.translationZ)&&k("update",c);break;case "end":k("end",c)}return c});v=v.next(r.resetGraphic(n)).next(c=>{k("end",{screenDeltaX:0,screenDeltaY:0});return c});return{steps:g,cancel:v}})};a.shapeOrientation=function(e){if(null==e||"polyline"!==e.type&&"polygon"!==e.type)return 0;var x=("polyline"===e.type?e.paths:e.rings)[0];if(!x||2>x.length)return 0;e=x[0];x=x[1];return Math.atan2(x[1]-e[1],x[0]-e[0])};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/MoveXYDiscManipulation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/vectorStacks ../../../../../support/elevationInfoUtils ../../Manipulator3D ../../RenderObject ../dragEventPipeline3D ../ManipulatorType ../settings ./config ./Manipulation ./moveUtils ../snapping/SnapToScene ../../../webgl-engine/lib/basicInterfaces ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Material ../../../webgl-engine/materials/ColorMaterial ../../../../interactive/dragEventPipeline ../../../../interactive/interfaces".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D){b=function(F){function I(z){var A=F.call(this)||this;A._snapToScene=new l.SnapToScene;A._discMaterial=A._createMaterial();A._discMaterialTransparent=A._createMaterial(.5);A._scale=1;A._radius=u.DISC_RADIUS;A._view=z.view;A._tool=z.tool;null!=z.snapToScene&&(A.snapToScene=z.snapToScene);null!=z.radius&&(A._radius=z.radius);A._createManipulator();A.forEachManipulator(K=>A._tool.manipulators.add(K));return A}r._inherits(I,F);var G=I.prototype;
G.destroy=function(){this.forEachManipulator(z=>{this._tool.manipulators.remove(z);z.destroy()});this._manipulator=this._view=this._tool=null};G.forEachManipulator=function(z){z(this._manipulator,w.ManipulatorType.TRANSLATE_XY)};G.createGraphicDragPipeline=function(z,A,K){const J=A.graphic,H=f.getGraphicEffectiveElevationInfo(J),L=J.geometry.spatialReference;return d.createGraphicMoveDragPipeline(A,K,E=>this.createDragPipeline((M,N,T,Y,U)=>{({steps:N,cancel:T}=z(M,N,T,Y,U));return E(M,N,T)},H,L,J),
this._view.state.viewingMode)};G.createDragPipeline=function(z,A,K,J){const H=this._view;return C.createManipulatorDragEventPipeline(this._manipulator,(L,E,M,N,T)=>{E=E.next(C.dragAtLocation(H,L.elevationAlignedLocation)).next(c.screenToMapXYAtLocation(H,L.elevationAlignedLocation,A,K,J)).next(...this._snapToScene.createDragEventPipelineStep(H,A)).next(Y=>({...Y,manipulatorType:w.ManipulatorType.TRANSLATE_XY})).next(C.addScreenDelta());z(L,E,M,N,T)})};G._updateManipulatorTransform=function(){const z=
x.fromScaling(k.sm4d.get(),p.set(k.sv3d.get(),this.displayScale,this.displayScale,this.displayScale));this._manipulator.modelTransform=z};G._createManipulator=function(){this._manipulator=new g.Manipulator3D({view:this._view,worldSized:!1,autoScaleRenderObjects:!1,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:n.fromValues(0,0,1)},worldOriented:!0});this._updateManipulator()};G._updateManipulator=function(){const z=t.createCylinderGeometry(this._discMaterial,u.DISC_HEIGHT,
1,u.GEOMETRY_SEGMENTS,n.fromValues(0,0,1),n.fromValues(0,0,0));z.transformation=x.fromScaling(m.create(),n.fromValues(this._radius,this._radius,this._radius));this._manipulator.renderObjects=[new v.RenderObject(z,D.ManipulatorStateFlags.Focused),new v.RenderObject(z.instantiate({material:this._discMaterialTransparent}),D.ManipulatorStateFlags.Unfocused)];this._manipulator.radius=this._radius/u.DISC_RADIUS*u.DISC_COLLISION_RADIUS};G._createMaterial=function(z=1){var A=B.getSettings(this._view);A=e.toUnitRGBA(A.colors.accent);
A[3]*=z;return new q.ColorMaterial({color:A,transparent:1!==z,cullFace:h.CullFaceOptions.Back,renderOccluded:y.RenderOccludedFlag.Transparent})};r._createClass(I,[{key:"displayScale",get:function(){return this._scale},set:function(z){this._scale=z;this._updateManipulatorTransform()}},{key:"snapToScene",get:function(){return this._snapToScene.enabled},set:function(z){this._snapToScene.enabled=z}},{key:"radius",get:function(){return this._radius},set:function(z){z!==this._radius&&(this._radius=z,this._updateManipulator())}},
{key:"test",get:function(){return{discManipulator:this._manipulator}}}]);return I}(b.Manipulation);a.MoveXYDiscManipulation=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/snapping/SnapToScene":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../support/elevationInfoUtils","../../../../interactive/dragEventPipeline"],function(a,r,e,x){let m=function(){function p(){this._next=this._lastDragEvent=this._elevationInfo=
this._view=null;this._enabled=!1}var n=p.prototype;n._snap=function(k){k=null!=this._view?this._view.toMap(k,{exclude:[]}):null;null!=k&&null!=this._view&&(k.z=e.getZForElevationMode(k,this._view,this._elevationInfo));return k};n.createDragEventPipelineStep=function(k,f){this._view=k;this._elevationInfo=f;this._lastDragEvent=null;this._next=k=new x.EventPipeline;return[g=>{this._lastDragEvent="end"!==g.action?{...g}:null;if(this._enabled){const v=this._snap(g.screenEnd);return null!=v?{action:g.action,
mapStart:g.mapStart,mapEnd:v,screenStart:g.screenStart,screenEnd:g.screenEnd}:null}return{action:g.action,mapStart:g.mapStart,mapEnd:g.mapEnd,screenStart:g.screenStart,screenEnd:g.screenEnd}},k]};r._createClass(p,[{key:"enabled",get:function(){return this._enabled},set:function(k){if(this._enabled!==k&&null!=this._lastDragEvent&&null!=this._next){const f=this._lastDragEvent.mapEnd,g=this._snap(this._lastDragEvent.screenEnd);null!=g&&this._next.execute({action:"update",mapStart:this._lastDragEvent.mapStart,
mapEnd:!0===k?g:f,screenStart:this._lastDragEvent.screenEnd,screenEnd:this._lastDragEvent.screenEnd})}this._enabled=k}}]);return p}();a.SnapToScene=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/MoveZManipulation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/Evented ../../../../../core/mathUtils ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../Manipulator3D ../../manipulatorUtils ../../RenderObject ../dragEventPipeline3D ../ManipulatorType ../settings ./config ./Manipulation ./moveUtils ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Material ../../../../interactive/dragEventPipeline ../../../../interactive/interfaces ../../../../support/colorUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C){d=function(z){function A(J){var H=z.call(this)||this;H._radius=b.DISC_RADIUS;H.events=new x;H._tool=J.tool;H._view=J.view;null!=J.radius&&(H._radius=J.radius);H._createManipulator();H.forEachManipulator(L=>H._tool.manipulators.add(L));return H}r._inherits(A,z);var K=A.prototype;K.destroy=function(){this._manipulator.applyObjectTransform=G;this.forEachManipulator(J=>{this._tool.manipulators.remove(J);J.destroy()})};K.forEachManipulator=function(J){J(this._manipulator,
B.ManipulatorType.TRANSLATE_Z)};K.createGraphicDragPipeline=function(J,H,L){const E=H.graphic.geometry.spatialReference;return l.createGraphicMoveDragPipeline(H,L,M=>this.createDragPipeline((N,T,Y,U,ja)=>{({steps:T,cancel:Y}=J(N,T,Y,U,ja));return M(N,T,Y)},E),this._view.state.viewingMode)};K.createDragPipeline=function(J,H){const L=this._view;return y.createManipulatorDragEventPipeline(this._manipulator,(E,M,N,T,Y)=>{M=M.next(U=>({...U,manipulatorType:B.ManipulatorType.TRANSLATE_Z})).next(w.screenToZConstrained(L,
E.renderLocation,H)).next(y.addScreenDelta());J(E,M,N,T,Y)})};K._updateManipulator=function(){var J=this._radius/b.DISC_RADIUS;const H=u.getSettings(this._view),L=H.zManipulator.height*J;var E=H.zManipulator.coneHeight*J;const M=H.zManipulator.coneWidth*J;J*=H.zManipulator.width;var N=[f.fromValues(0,0,0),f.fromValues(0,0,L)];const T=[f.fromValues(0,0,0),f.fromValues(0,0,L+E)],Y=(pa=>{const za=n.create();p.translate(za,za,[0,0,L]);p.rotateX(za,za,Math.PI/2);pa&&(pa=1+2*pa/M,p.scale(za,za,[pa,pa,pa]));
return za})(0);var U=(pa,za)=>{za=C.darken(H.zManipulator.color,za);za.a*=pa;return e.toUnitRGBA(za)};const ja=v.createManipulatorMaterial(U(1,.25),t.RenderOccludedFlag.Occlude),ra=v.createManipulatorMaterial(U(1,0),t.RenderOccludedFlag.Occlude),qa=v.createManipulatorMaterial(U(.7,0),H.zManipulator.renderOccluded);U=v.createManipulatorMaterial(U(.85,0),H.zManipulator.renderOccluded);N=h.createTubeGeometry(ja,N,J/2,16,!1);E=h.createConeGeometry(ja,E,M/2,16,!1);E.transformation=Y;this._manipulator.renderObjects=
[new c.RenderObject(E,q.ManipulatorStateFlags.Unfocused),new c.RenderObject(N,q.ManipulatorStateFlags.Unfocused),new c.RenderObject(E.instantiate({material:ra}),q.ManipulatorStateFlags.Focused),new c.RenderObject(N.instantiate({material:ra}),q.ManipulatorStateFlags.Focused),new c.RenderObject(E.instantiate({material:qa}),q.ManipulatorStateFlags.Unfocused),new c.RenderObject(N.instantiate({material:qa}),q.ManipulatorStateFlags.Unfocused),new c.RenderObject(E.instantiate({material:U}),q.ManipulatorStateFlags.Focused),
new c.RenderObject(N.instantiate({material:U}),q.ManipulatorStateFlags.Focused)];this._manipulator.radius=J/2+2;this._manipulator.collisionType={type:"line",paths:[T]}};K._createManipulator=function(){const J=this._view,H=u.getSettings(J),L=new g.Manipulator3D({view:J,autoScaleRenderObjects:!1,worldSized:!1,selectable:!1,cursor:"ns-resize",elevationInfo:this.elevationInfo,worldOriented:!0,collisionPriority:1.6});L.applyObjectTransform=E=>{var M=J.state.camera,N=D;J.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation,
N);const T=k.dist(M.eye,N),Y=M.computeRenderPixelSizeAtDist(T);var U=k.subtract(F,N,M.eye);k.normalize(U,U);var ja=I;J.renderCoordsHelper.worldUpAtPosition(D,ja);N=Math.abs(k.dot(U,ja));U=k.cross(F,U,ja);ja=k.cross(F,U,ja);N=m.clamp(N,.01,1);M=1-Math.sqrt(1-N*N)/N/M.fullWidth;N=this._radius/b.DISC_RADIUS*H.zManipulator.width;k.scale(ja,k.normalize(ja,ja),(1/M-1)*T+Y*N);E[12]-=F[0];E[13]-=F[1];E[14]-=F[2]};this._manipulator=L;this._updateManipulator()};r._createClass(A,[{key:"radius",get:function(){return this._radius},
set:function(J){J!==this._radius&&(this._radius=J,this._updateManipulator())}},{key:"test",get:function(){return{manipulator:this._manipulator}}}]);return A}(d.Manipulation);const D=f.create(),F=f.create(),I=f.create(),G=()=>{};a.MoveZManipulation=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/MoveXYGraphicManipulation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../dragEventPipeline3D ../ManipulatorType ./Manipulation ./moveUtils ../../../../interactive/dragEventPipeline ../../../../interactive/GraphicManipulator".split(" "),
function(a,r,e,x,m,p,n,k){m=function(f){function g(c){var w=f.call(this)||this;w._view=c.view;w._tool=c.tool;w._graphicState=c.graphicState;w._createManipulator();w.forEachManipulator(B=>w._tool.manipulators.add(B));return w}r._inherits(g,f);var v=g.prototype;v.destroy=function(){this.forEachManipulator(c=>{this._tool.manipulators.remove(c);c.destroy()});this._graphicState=this._manipulator=this._view=this._tool=null};v.forEachManipulator=function(c){c(this._manipulator,x.ManipulatorType.TRANSLATE_XY)};
v.createGraphicDragPipeline=function(c){return p.createGraphicMoveDragPipeline(this._graphicState,c,w=>this.createDragPipeline(w),this._view.state.viewingMode)};v.createDragPipeline=function(c){const w=this._view,B=this._graphicState.graphic,u=null!=B.geometry?B.geometry.spatialReference:null;return n.createManipulatorDragEventPipeline(this._manipulator,(b,d,l,h,t)=>{d=d.next(e.screenToMapXYForGraphic(t,w,B,u)).next(n.addMapDelta()).next(n.addScreenDelta());c(b,d,l,h,t)})};v._createManipulator=function(){this._manipulator=
new k.GraphicManipulator({graphic:this._graphicState.graphic,view:this._view,selectable:!0,cursor:"move"})};return r._createClass(g)}(m.Manipulation);a.MoveXYGraphicManipulation=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/GraphicManipulator":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Evented ../../core/reactiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec3 ../../chunks/vec3f64 ../../geometry/projection ../../support/elevationInfoUtils ../../symbols/support/defaults ../../symbols/support/ElevationInfo ./support/utils ../support/drapedUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y){a.GraphicManipulator=function(D){function F(G){G=D.call(this,G)||this;G.layer=null;G.interactive=!0;G.selectable=!1;G.grabbable=!0;G.dragging=!1;G.cursor=null;G.events=new m.EventEmitter;G._circleCollisionCache=null;G._graphicSymbolChangedHandle=null;G._originalSymbol=null;return G}r._inherits(F,D);var I=F.prototype;I.grabbableForEvent=function(){return!0};I.destroy=function(){this.detachSymbolChanged();this._resetGraphicSymbol();this._set("view",
null)};I.intersectionDistance=function(G){const z=this.graphic;if(!1===z.visible)return null;const A=z.geometry;if(null==A)return null;var K=this._get("focusedSymbol");K=null!=K?K:z.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,G,A,K):this._intersectDistance3D(this.view,G,z)};I.attach=function(){this.attachSymbolChanged();null!=this.layer&&this.layer.add(this.graphic)};I.detach=function(){this.detachSymbolChanged();this._resetGraphicSymbol();null!=this.layer&&this.layer.remove(this.graphic)};
I.attachSymbolChanged=function(){this.detachSymbolChanged();this._graphicSymbolChangedHandle=p.watch(()=>this.graphic?.symbol,G=>{null!=G&&G!==this.focusedSymbol&&G!==this._originalSymbol&&(this._originalSymbol=G,this._focused&&null!=this.focusedSymbol&&(this.graphic.symbol=this.focusedSymbol))},p.sync)};I.detachSymbolChanged=function(){null!=this._graphicSymbolChangedHandle&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)};I.onElevationChange=function(){};I.onViewChange=
function(){};I._updateGraphicSymbol=function(){this.graphic.symbol=this._focused&&null!=this.focusedSymbol?this.focusedSymbol:this._originalSymbol};I._resetGraphicSymbol=function(){this.graphic.symbol=this._originalSymbol};I._intersectDistance2D=function(G,z,A,K){K=K||l.getDefaultSymbol2D(A);if(null==K)return null;var J=this._circleCollisionCache;if("point"===A.type&&"cim"===K.type&&"CIMPointSymbol"===K.data.symbol?.type&&K.data.symbol.symbolLayers){const {offsetX:H,offsetY:L,size:E}=t.getSymbolInfo(K);
K=n.screenPointObjectToArray(z,C);J=E/2;G=G.toScreen(A);return w.squaredDistance(K,[G.x+H,G.y+L])<J*J?1:null}if("point"!==A.type||"simple-marker"!==K.type)return y.intersectsDrapedGeometry(z,A,G)?1:null;if(null==J||!J.originalPoint.equals(A)){const H=G.spatialReference;b.canProjectWithoutEngine(A.spatialReference,H)&&(J=b.project(A,H),this._circleCollisionCache=J={originalPoint:A.clone(),mapPoint:J,radiusPx:n.pt2px(K.size)})}if(null!=J){A=n.screenPointObjectToArray(z,C);G=G.toScreen?.(J.mapPoint);
if(!G)return null;J=J.radiusPx;z=G.x+n.pt2px(K.xoffset);K=G.y-n.pt2px(K.yoffset);return w.squaredDistance(A,[z,K])<J*J?1:null}return null};I._intersectDistance3D=function(G,z,A){return(z=G.toMap(z,{include:[A]}))&&b.projectPointToVector(z,q,G.renderSpatialReference)?B.distance(q,G.state.camera.eye):null};r._createClass(F,[{key:"graphic",set:function(G){this._circleCollisionCache=null;this._originalSymbol=G.symbol;this._set("graphic",G);this.attachSymbolChanged()}},{key:"elevationInfo",get:function(){var {layer:G}=
this.graphic;G=G&&"elevationInfo"in G?G.elevationInfo:null;const z=d.getGraphicEffectiveElevationMode(this.graphic);return new h({mode:z,offset:G?G.offset:0})}},{key:"focusedSymbol",set:function(G){G!==this._get("focusedSymbol")&&(this._set("focusedSymbol",G),this._updateGraphicSymbol(),this._circleCollisionCache=null)}},{key:"grabbing",set:function(G){G!==this._get("grabbing")&&(this._set("grabbing",G),this._updateGraphicSymbol())}},{key:"hovering",set:function(G){G!==this._get("hovering")&&(this._set("hovering",
G),this._updateGraphicSymbol())}},{key:"selected",set:function(G){G!==this._get("selected")&&(this._set("selected",G),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:G?"select":"deselect"}))}},{key:"_focused",get:function(){return this._get("hovering")||this._get("grabbing")}}]);return F}(x);e.__decorate([k.property({constructOnly:!0,nonNullable:!0})],a.GraphicManipulator.prototype,"graphic",null);e.__decorate([k.property()],a.GraphicManipulator.prototype,"elevationInfo",null);
e.__decorate([k.property({constructOnly:!0,nonNullable:!0})],a.GraphicManipulator.prototype,"view",void 0);e.__decorate([k.property({value:null})],a.GraphicManipulator.prototype,"focusedSymbol",null);e.__decorate([k.property({constructOnly:!0})],a.GraphicManipulator.prototype,"layer",void 0);e.__decorate([k.property()],a.GraphicManipulator.prototype,"interactive",void 0);e.__decorate([k.property()],a.GraphicManipulator.prototype,"selectable",void 0);e.__decorate([k.property()],a.GraphicManipulator.prototype,
"grabbable",void 0);e.__decorate([k.property({value:!1})],a.GraphicManipulator.prototype,"grabbing",null);e.__decorate([k.property()],a.GraphicManipulator.prototype,"dragging",void 0);e.__decorate([k.property()],a.GraphicManipulator.prototype,"hovering",null);e.__decorate([k.property({value:!1})],a.GraphicManipulator.prototype,"selected",null);e.__decorate([k.property()],a.GraphicManipulator.prototype,"cursor",void 0);a.GraphicManipulator=e.__decorate([c.subclass("esri.views.interactive.GraphicManipulator")],
a.GraphicManipulator);const q=u.create(),C=n.createScreenPointArray();Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/support/utils":function(){define(["exports","../../../core/screenUtils"],function(a,r){a.getSymbolInfo=function(e){let x=0,m=0,p=0;if(!e)return{offsetX:x,offsetY:m,size:p};"cim"===e.type&&e.data.symbol&&"symbolLayers"in e.data.symbol&&e.data.symbol.symbolLayers&&e.data.symbol.symbolLayers.map(n=>{"CIMVectorMarker"===n.type&&n.anchorPoint&&(Math.abs(n.anchorPoint.x)>
x&&(x=n.anchorPoint.x),Math.abs(n.anchorPoint.y)>m&&(m=n.anchorPoint.y),null!=n.size&&n.size>p&&(p=n.size))});x=r.pt2px(x);m=r.pt2px(m);p=r.pt2px(p);return{offsetX:x,offsetY:m,size:p}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/drapedUtils":function(){define(["exports","../../geometry","../../core/unitUtils","../../renderers/support/clickToleranceUtils","../../geometry/Extent"],function(a,r,e,x,m){function p(k,f,g,v=new m){let c=0;if("2d"===g.type)c=f*(g.resolution??
0);else if("3d"===g.type){var w=g.overlayPixelSizeInMapUnits(k),B=g.basemapSpatialReference;c=null==B||B.equals(g.spatialReference)?f*w:e.getMetersPerUnitForSR(B)/e.getMetersPerUnitForSR(g.spatialReference)}f=k.x-c;w=k.y-c;B=k.x+c;k=k.y+c;({spatialReference:g}=g);v.xmin=Math.min(f,B);v.ymin=Math.min(w,k);v.xmax=Math.max(f,B);v.ymax=Math.max(w,k);v.spatialReference=g;return v}const n=new m;a.createQueryGeometry=p;a.intersectsDrapedGeometry=function(k,f,g){k=g.toMap(k);if(null==k)return!1;const v=x.calculateTolerance();
return p(k,v,g,n).intersects(f)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/clickToleranceUtils":function(){define(["exports"],function(a){function r(m,p){return p?"xoffset"in p&&p.xoffset?Math.max(m,Math.abs(p.xoffset)):"yoffset"in p&&p.yoffset?Math.max(m,Math.abs(p.yoffset||0)):m:m}function e(m,p){if("number"===typeof m)return m;if(m&&m.stops&&m.stops.length){m=m.stops;let n=p=0;for(let k=0;k<m.length;k++){const f=m[k].size;"number"===typeof f&&(p+=f,
n++)}return p/n}return p}function x(m,p){if(!p)return m;p=p.filter(f=>"size"===f.type).map(f=>{const {maxSize:g,minSize:v}=f;return(e(g,m)+e(v,m))/2});let n=0;const k=p.length;if(0===k)return m;for(let f=0;f<k;f++)n+=p[f];return Math.max(Math.floor(n/k),m)}a.calculateTolerance=function(m){const p=m&&m.renderer;m="touch"===(m&&m.event&&m.event.pointerType)?9:6;if(!p)return m;m="visualVariables"in p?x(m,p.visualVariables):m;if("simple"===p.type)return r(m,p.symbol);if("unique-value"===p.type){let n=
m;p.uniqueValueInfos?.forEach(k=>{n=r(n,k.symbol)});return n}if("class-breaks"===p.type){let n=m;p.classBreakInfos.forEach(k=>{n=r(n,k.symbol)});return n}return m};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(a,r,e,x){a.isSupportedGraphic=function(m){if("graphics"!==m.layer?.type)return x.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;
if(null==m.geometry)return x.SupportedGraphicResult.GEOMETRY_MISSING;switch(m.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return x.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED;default:return x.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==e.getGraphicEffectiveElevationMode(m)&&e.hasGraphicFeatureExpressionInfo(m)?x.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:x.SupportedGraphicResult.SUPPORTED};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/TranslateTooltipInfos":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/quantityUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ./SketchTooltipInfo".split(" "),function(a,r,e,x,m,p,n){a.TranslateGraphicTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type="translate-graphic";g.distance=x.zeroMeters;
return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.TranslateGraphicTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.TranslateGraphicTooltipInfo.prototype,"distance",void 0);a.TranslateGraphicTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.TranslateGraphicTooltipInfo")],a.TranslateGraphicTooltipInfo);a.TranslateGraphicZTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type="translate-graphic-z";
g.distance=x.zeroMeters;return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.TranslateGraphicZTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.TranslateGraphicZTooltipInfo.prototype,"distance",void 0);a.TranslateGraphicZTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.TranslateGraphicZTooltipInfo")],a.TranslateGraphicZTooltipInfo);a.TranslateGraphicXYTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;
g.type="translate-graphic-xy";g.distance=x.zeroMeters;return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.TranslateGraphicXYTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.TranslateGraphicXYTooltipInfo.prototype,"distance",void 0);a.TranslateGraphicXYTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.TranslateGraphicXYTooltipInfo")],a.TranslateGraphicXYTooltipInfo);a.TranslateVertexTooltipInfo=function(k){function f(g){g=
k.call(this,g)||this;g.type="translate-vertex";g.distance=x.zeroMeters;g.elevation=null;g.area=null;g.totalLength=null;return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.TranslateVertexTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.TranslateVertexTooltipInfo.prototype,"distance",void 0);e.__decorate([m.property()],a.TranslateVertexTooltipInfo.prototype,"elevation",void 0);e.__decorate([m.property()],a.TranslateVertexTooltipInfo.prototype,
"area",void 0);e.__decorate([m.property()],a.TranslateVertexTooltipInfo.prototype,"totalLength",void 0);a.TranslateVertexTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.TranslateVertexTooltipInfo")],a.TranslateVertexTooltipInfo);a.TranslateVertexZTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type="translate-vertex-z";g.distance=x.zeroMeters;g.elevation=null;return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.TranslateVertexZTooltipInfo.prototype,
"type",void 0);e.__decorate([m.property()],a.TranslateVertexZTooltipInfo.prototype,"distance",void 0);e.__decorate([m.property()],a.TranslateVertexZTooltipInfo.prototype,"elevation",void 0);a.TranslateVertexZTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.TranslateVertexZTooltipInfo")],a.TranslateVertexZTooltipInfo);a.TranslateVertexXYTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type="translate-vertex-xy";g.distance=x.zeroMeters;g.elevation=null;g.area=null;
g.totalLength=null;return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.TranslateVertexXYTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.TranslateVertexXYTooltipInfo.prototype,"distance",void 0);e.__decorate([m.property()],a.TranslateVertexXYTooltipInfo.prototype,"elevation",void 0);e.__decorate([m.property()],a.TranslateVertexXYTooltipInfo.prototype,"area",void 0);e.__decorate([m.property()],a.TranslateVertexXYTooltipInfo.prototype,
"totalLength",void 0);a.TranslateVertexXYTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.TranslateVertexXYTooltipInfo")],a.TranslateVertexXYTooltipInfo);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/GraphicReshapeTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../isSupportedGraphicUtils ./isSupportedGraphic ./ReshapeOperation ../../../../interactive/InteractiveToolBase ../../../../interactive/sketch/SketchLabelOptions ../../../../interactive/sketch/SketchTooltipOptions".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l){a.GraphicReshapeTool=function(h){function t(q){q=h.call(this,q)||this;q._handles=new m;q._internalGeometryUpdate=!1;q.enableZShape=!0;q.enableZVertex=!0;q.enableMoveGraphic=!0;q.enableMidpoints=!0;q.enableEdgeOffset=!1;q.type="reshape-3d";q.labelOptions=new d;q.tooltipOptions=new l;q.snappingManager=null;q.automaticManipulatorSelection=!1;return q}r._inherits(t,h);var y=t.prototype;y.initialize=function(){const q=this._reshapeOperation=new u.ReshapeOperation({tool:this});
this.addHandles([q.on("reshape",C=>{"reshape"===C.type&&this._onReshapeGeometryChanged();this.emit("reshape",C)}),q.on("move",C=>{"move"===C.type&&this._onReshapeGeometryChanged();this.emit("move",C)}),q.on("vertex-add",C=>{this._onReshapeGeometryChanged();this.emit("vertex-add",C)}),q.on("vertex-remove",C=>{this._onReshapeGeometryChanged();this.emit("vertex-remove",C)}),q.on("immediate-click",C=>this.emit("immediate-click",C)),this.view.on("pointer-down",["Shift"],C=>C.stopPropagation()),n.watch(()=>
this.graphic,()=>this._updateGraphic(),n.syncAndInitial)]);this.finishToolCreation()};y.destroy=function(){this._handles=p.destroyMaybe(this._handles);this._reshapeOperation=p.destroyMaybe(this._reshapeOperation)};y._updateGeometry=function(){const q=B.geometryOfSupportedGraphic(this.graphic);this._reshapeOperation.inputGeometry=null!=q?q.clone():null};y._updateGraphic=function(){this._handles.remove("onGraphicGeometryChange");this._updateGeometry();if(B.isSupportedGraphic(this.graphic)===w.SupportedGraphicResult.SUPPORTED){var q=
n.watch(()=>this.graphic?.geometry,()=>{!1===this._internalGeometryUpdate&&this._updateGeometry()},n.sync);this._handles.add(q,"onGraphicGeometryChange")}};y.onManipulatorSelectionChanged=function(){if(this._reshapeOperation)this._reshapeOperation.onManipulatorSelectionChanged()};y._updateGeometryInternally=function(q){this._internalGeometryUpdate=!0;const {graphic:C}=this,{geometry:D}=C;"mesh"===D?.type&&"point"===q.type?(C.geometry=D.centerAt(q),C.notifyGeometryChanged()):C.geometry=q;this._internalGeometryUpdate=
!1};y._onReshapeGeometryChanged=function(){const {outputGeometry:q}=this._reshapeOperation;null!=this.graphic&&q&&this._updateGeometryInternally(q.clone())};y.undo=function(){null!=this.snappingManager&&this.snappingManager.doneSnapping();const q=this._reshapeOperation.undo(),{outputGeometry:C}=this._reshapeOperation;q&&C&&this._updateGeometryInternally(C.clone())};y.redo=function(){null!=this.snappingManager&&this.snappingManager.doneSnapping();const q=this._reshapeOperation.redo(),{outputGeometry:C}=
this._reshapeOperation;q&&C&&this._updateGeometryInternally(C.clone())};y.onInputEvent=function(q){"key-down"!==q.type||"Delete"!==q.key&&"Backspace"!==q.key||this._reshapeOperation.removeSelectedVertices()};y.reset=function(){};r._createClass(t,[{key:"updating",get:function(){return this._reshapeOperation?.updating??!1}},{key:"canUndo",get:function(){return this._reshapeOperation.canUndo??!1}},{key:"canRedo",get:function(){return this._reshapeOperation.canRedo??!1}},{key:"test",get:function(){return{snappingManager:this.snappingManager,
reshapeOperation:this._reshapeOperation}}}]);return t}(x.EventedMixin(b.InteractiveToolBase));e.__decorate([k.property()],a.GraphicReshapeTool.prototype,"_reshapeOperation",void 0);e.__decorate([k.property({constructOnly:!0,nonNullable:!0})],a.GraphicReshapeTool.prototype,"view",void 0);e.__decorate([k.property({constructOnly:!0})],a.GraphicReshapeTool.prototype,"graphic",void 0);e.__decorate([k.property({constructOnly:!0,nonNullable:!0})],a.GraphicReshapeTool.prototype,"enableZShape",void 0);e.__decorate([k.property({constructOnly:!0,
nonNullable:!0})],a.GraphicReshapeTool.prototype,"enableZVertex",void 0);e.__decorate([k.property({constructOnly:!0,nonNullable:!0})],a.GraphicReshapeTool.prototype,"enableMoveGraphic",void 0);e.__decorate([k.property({constructOnly:!0,nonNullable:!0})],a.GraphicReshapeTool.prototype,"enableMidpoints",void 0);e.__decorate([k.property({constructOnly:!0,nonNullable:!0})],a.GraphicReshapeTool.prototype,"enableEdgeOffset",void 0);e.__decorate([k.property()],a.GraphicReshapeTool.prototype,"type",void 0);
e.__decorate([k.property({constructOnly:!0,type:d})],a.GraphicReshapeTool.prototype,"labelOptions",void 0);e.__decorate([k.property({constructOnly:!0,type:l})],a.GraphicReshapeTool.prototype,"tooltipOptions",void 0);e.__decorate([k.property({constructOnly:!0})],a.GraphicReshapeTool.prototype,"snappingManager",void 0);e.__decorate([k.property()],a.GraphicReshapeTool.prototype,"updating",null);e.__decorate([k.property()],a.GraphicReshapeTool.prototype,"automaticManipulatorSelection",void 0);a.GraphicReshapeTool=
e.__decorate([c.subclass("esri.views.3d.interactive.editingTools.graphicReshape3D.GraphicReshapeTool")],a.GraphicReshapeTool);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(a,r,e,x){function m(p){if("graphics"!==p.layer?.type)return{result:x.SupportedGraphicResult.GRAPHICS_LAYER_MISSING,
geometry:null};const {geometry:n}=p;if(null==n)return{result:x.SupportedGraphicResult.GEOMETRY_MISSING,geometry:null};if("on-the-ground"!==e.getGraphicEffectiveElevationMode(p)&&e.hasGraphicFeatureExpressionInfo(p))return{result:x.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED,geometry:null};const k=n.type;return"point"!==k&&"mesh"!==k&&"polyline"!==k&&("polygon"!==k||p.geometry instanceof r)?{result:x.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:x.SupportedGraphicResult.SUPPORTED,
geometry:n}}a.geometryOfSupportedGraphic=function(p){return m(p).geometry};a.isSupportedGraphic=function(p){return m(p).result};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/ReshapeOperation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../geometry ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/Evented ../../../../../core/HandleOwner ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../../../../../core/unitUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/Polyline ../../../../../geometry/support/coordsUtils ../../../../../geometry/support/plane ../../../../../geometry/support/vectorStacks ../../../../../layers/graphics/dehydratedFeatures ../../../../../support/elevationInfoUtils ../../../../../symbols/support/utils ../../Manipulator3D ../../manipulatorUtils ../../RenderObject ../../SegmentLabels3D ../../SnappingVisualizer3D ../dragEventPipeline3D ../ManipulatorType ../manipulatorUtils ../settings ../visualElementUtils ../manipulations/config ../manipulations/MoveManipulation ../manipulations/moveUtils ../manipulations/MoveXYGraphicManipulation ./edgeOffsetUtils ../../visualElements/OutlineVisualElement ../../../layers/graphics/GraphicState ../../../webgl-engine/lib/GeometryUtil ../../../../input/IViewEvents ../../../../interactive/dragEventPipeline ../../../../interactive/interfaces ../../../../interactive/editGeometry/EditGeometryOperations ../../../../interactive/editGeometry/interfaces ../../../../interactive/snapping/SnappingContext ../../../../interactive/snapping/SnappingDragPipelineStep ../../../../interactive/tooltip/ReshapeTooltipInfos ../../../../interactive/tooltip/Tooltip ../../../../interactive/tooltip/TranslateTooltipInfos ../../../../support/automaticAreaMeasurementUtils ../../../../support/automaticLengthMeasurementUtils ../../../../support/colorUtils ../../../../support/euclideanLengthMeasurementUtils ../../../../support/geodesicLengthMeasurementUtils ../../../../../geometry/SpatialReference".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G,z,A,K,J,H,L,E,M,N,T,Y,U,ja,ra,qa,pa,za,ta,oa,ua,V,ha,da,R,ca,sa,xa,ma,Aa,O,W,fa,aa,Q){a.ReshapeOperation=function(Ba){function Ca(P){var S=Ba.call(this,P)||this;S._selectedIndex=0;S._manipulatorHandles=new f;S._manipulatorInfos=[];S._numGrabbing=0;S._numDragging=0;S._reshapeEventState=na.NONE;S._recreatingManipulators=!1;S.outputGeometry=null;S._vertexLaserLineVisualElement=null;P=N.getSettings(P.tool.view).manipulators;var X=P.vertex;
S._vertexManipulatorMaterial=A.createManipulatorMaterial(W.unitRGBAFromColor(X.color),X.renderOccluded);S._vertexManipulatorOutlineMaterial=A.createManipulatorOutlineMaterial(W.unitRGBAFromColor(X.outlineColor),X.renderOccluded);S._vertexManipulatorHoverOutlineMaterial=A.createManipulatorOutlineMaterial(W.unitRGBAFromColor(X.hoverOutlineColor),X.renderOccluded);X=P.edge;S._edgeManipulatorMaterial=A.createManipulatorMaterial(W.unitRGBAFromColor(X.color),X.renderOccluded);S._edgeManipulatorOutlineMaterial=
A.createManipulatorOutlineMaterial(W.unitRGBAFromColor(X.outlineColor),X.renderOccluded);X=P.edgeOffset;S._edgeOffsetManipulatorMaterial=A.createManipulatorMaterial(W.unitRGBAFromColor(X.color),X.renderOccluded,!1);S._edgeOffsetManipulatorHoverMaterial=A.createManipulatorMaterial(W.unitRGBAFromColor(X.hoverColor),X.renderOccluded,!1);P=P.selected;S._selectedManipulatorMaterial=A.createManipulatorMaterial(W.unitRGBAFromColor(P.color),P.renderOccluded);S._selectedManipulatorOutlineMaterial=A.createManipulatorOutlineMaterial(W.unitRGBAFromColor(P.outlineColor),
P.renderOccluded);S._selectedManipulatorHoverOutlineMaterial=A.createManipulatorOutlineMaterial(W.unitRGBAFromColor(P.hoverOutlineColor),P.renderOccluded);return S}r._inherits(Ca,Ba);var wa=Ca.prototype;wa.initialize=function(){const {graphic:P,view:S}=this,X=this._graphicState=new za.GraphicState({graphic:P});this._tooltip=new xa.Tooltip({view:S});this.addHandles([w.watch(()=>X.displaying,ba=>{for(const ia of this._manipulatorInfos)ia.manipulator.available=ba}),w.watch(()=>({labels:this._segmentLabels,
enabled:this._labelOptions.enabled,edgeOffsetEnabled:this.enableEdgeOffset}),({labels:ba,enabled:ia,edgeOffsetEnabled:la})=>{null!=ba&&(ba.visible=ia,ba.edgeDistance=la?"far":"default")},w.initial),w.when(()=>!this._tooltipOptions.enabled,()=>this._tooltip.clear(),w.initial),this.view.trackGraphicState(X)])};wa.destroy=function(){this._segmentLabels=v.destroyMaybe(this._segmentLabels);this._tooltip=v.destroyMaybe(this._tooltip);this._removeManipulators()};wa.removeSelectedVertices=function(){const P=
this._manipulatorInfos.filter(S=>S.manipulator.selected&&"vertex"===S.type);this._removeVertices(P)};wa.onManipulatorSelectionChanged=function(){this.emit("manipulators-changed")};wa._removeManipulators=function(){this._manipulatorHandles.removeAll();this._moveManipulation=v.destroyMaybe(this._moveManipulation);this._graphicMoveManipulation=v.destroyMaybe(this._graphicMoveManipulation);this.manipulators.removeAll();this._manipulatorInfos=[];this._numDragging=this._numGrabbing=0};wa._createManipulators=
function(P){if(null!=this._editGeometryOperations){var S=I.getGraphicEffectiveElevationInfo(this.graphic);for(const X of this._editGeometryOperations.data.components){const ba=P?.byComponentIndex.get(X.index);for(const ia of X.vertices){const la=ba?.has(ia.index);this._createVertexOrEdgeManipulator(ia,S,la)}for(const ia of X.edges)this._createVertexOrEdgeManipulator(ia,S)}this._createGraphicMoveManipulation();this._createMoveManipulation(S);this._createVisualElements()}};wa.redo=function(){if(null==
this._editGeometryOperations)return null;const P=this._editGeometryOperations.redo();null!=P&&(this.outputGeometry=this._editGeometryOperations.data.geometry,this._recreateManipulators());return P};wa.undo=function(){if(null==this._editGeometryOperations)return null;this.emit("undo");const P=this._editGeometryOperations.undo();null!=P&&(this.outputGeometry=this._editGeometryOperations.data.geometry,this._recreateManipulators());return P};wa._recreateManipulators=function(){this._recreatingManipulators||
(this._recreatingManipulators=!0,this._removeManipulators(),this._tooltip.clear(),this._createManipulators(),this._recreatingManipulators=!1)};wa._recreateEditGeometryAndManipulators=function(P){const S={byComponentIndex:new Map};if(null!=P&&null!=this.inputGeometry&&q.hasCompatibleTopology(P,this.inputGeometry))for(const X of this._manipulatorInfos)if("vertex"===X.type&&X.manipulator.selected){const {index:ba,component:{index:ia}}=X.handle,{byComponentIndex:la}=S,va=la.get(ia)||new Set;va.add(ba);
la.set(ia,va)}this._recreatingManipulators=!0;this._removeManipulators();this._tooltip.clear();this._editGeometryOperations=v.destroyMaybe(this._editGeometryOperations);this._segmentLabels=v.destroyMaybe(this._segmentLabels);null!=P&&(this._editGeometryOperations=ha.EditGeometryOperations.fromGeometry("mesh"===P.type?P.anchor:P,this.view.state.viewingMode),this._createManipulators(S),this._segmentLabels=new J.SegmentLabels3D({context:{view:this.view,editGeometryOperations:this._editGeometryOperations,
elevationInfo:I.getGraphicEffectiveElevationInfo(this.graphic),labelOptions:this._labelOptions,graphic:this.graphic,graphicState:this._graphicState},visible:this._labelOptions.enabled}));this._recreatingManipulators=!1};wa._perGraphicManipulatorDragAction=function(P,S){if("end"===S.action)return S;let X=0;const ba=[],ia=this._manipulatorInfos.some(la=>"vertex"===la.type&&la.manipulator.selected);P=P===ya.SELECTED_OR_ALL&&ia;for(const la of this._manipulatorInfos)"vertex"===la.type&&(la.manipulator.grabbing||
P&&!la.manipulator.selected||ba.push(la),X++);if(0===ba.length)return S;this._moveVertices(ba,S);if(ba.length===X){this._updateEventState(na.MOVING);if(this.destroyed)return S;this.emit("move",{type:"move",dx:S.screenDeltaX,dy:S.screenDeltaY,mover:this.graphic})}else{this._updateEventState(na.RESHAPING);if(this.destroyed)return S;this.emit("reshape",{type:"reshape",mover:this.graphic})}return S};wa._isMultiVertexSelection=function(){return 1<this._manipulatorInfos.reduce((P,S)=>"vertex"===S.type&&
S.manipulator.selected?P+1:P,0)};wa._perVertexManipulatorDragAction=function(P){this._updateEventState(na.RESHAPING);if(!this.destroyed){var {mapDeltaX:S,mapDeltaY:X,mapDeltaZ:ba}=P;if(S||X||ba){var ia=[];for(const la of this._manipulatorInfos)"vertex"===la.type&&(la.manipulator.selected&&!la.manipulator.grabbing||la===P.info)&&ia.push(la);this._moveVertices(ia,P,da.AccumulationBehaviour.ACCUMULATE_STEPS);this.emit("reshape",{type:"reshape",mover:this.graphic})}}};wa._updateEventState=function(P){if(P===
this._reshapeEventState)return!1;switch(P){case na.NONE:if(0!==this._numGrabbing||0!==this._numDragging)return!1;switch(this._reshapeEventState){case na.MOVING:this.emit("move",{type:"move-stop",dx:0,dy:0,mover:this.graphic});break;case na.RESHAPING:this.emit("reshape",{type:"reshape-stop",mover:this.graphic})}break;case na.MOVING:switch(this._reshapeEventState){case na.NONE:this.emit("move",{type:"move-start",dx:0,dy:0,mover:this.graphic});break;case na.RESHAPING:this.emit("reshape",{type:"reshape-stop",
mover:this.graphic}),this.destroyed||this.emit("move",{type:"move-start",dx:0,dy:0,mover:this.graphic})}break;case na.RESHAPING:switch(this._reshapeEventState){case na.NONE:this.emit("reshape",{type:"reshape-start",mover:this.graphic});break;case na.MOVING:this.emit("move",{type:"move-stop",dx:0,dy:0,mover:this.graphic}),this.destroyed||this.emit("reshape",{type:"reshape-start",mover:this.graphic})}}if(this.destroyed)return!1;const S=this._reshapeEventState!==P;this._reshapeEventState=P;return S};
wa._createGraphicMoveManipulation=function(){const {tool:P,view:S}=this;this._graphicMoveManipulation=new ra.MoveXYGraphicManipulation({tool:P,view:S,graphicState:this._graphicState});if(this.enableMoveGraphic){let X=null;this._manipulatorHandles.add(this._graphicMoveManipulation.createDragPipeline((ba,ia,la)=>{ia.next(va=>this._trackNumDragging(va)).next(va=>{"start"===va.action&&(X=this._editGeometryOperations.createUndoGroup());return va}).next(va=>this._perGraphicManipulatorDragAction(ya.ALL,
va)).next(va=>{this._updateTranslateGraphicTooltip(U.ManipulationType.XY,va);return va}).next(va=>{"end"===va.action&&(this._tooltip.clear(),X=v.removeMaybe(X))});la.next(()=>this._onDragCancel(!0,()=>X=v.removeMaybe(X)))}));this._graphicMoveManipulation.forEachManipulator(ba=>this._manipulatorHandles.add(this._watchAndUpdateGrabState(ba,!1)))}else this._graphicMoveManipulation.forEachManipulator(X=>{X.grabbable=!1;X.cursor=null});this._graphicMoveManipulation.forEachManipulator(X=>this._manipulatorHandles.add(X.events.on("immediate-click",
ba=>{this._manipulatorInfos.some(ia=>ia.manipulator.selected)?this._clearSelection():this.emit("immediate-click",{...ba,graphic:this.graphic});ba.stopPropagation()})))};wa._createMoveManipulation=function(P){const {graphic:S,handles:X,tool:ba,view:ia}=this,la=this._graphicState;this._moveManipulation=new U.MoveManipulation({tool:ba,view:ia,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:this.enableZShape&&M.canMoveZ(S),snapToScene:!1,radius:U.MoveManipulation.radiusForSymbol(S.symbol)});this._moveManipulation.forEachManipulator(Da=>
X.add([Da.events.on("immediate-click",Ea=>{this._moveManipulation.zManipulation.hasManipulator(Da)||this._manipulatorInfos.some(Fa=>Fa.manipulator.selected)||this.emit("immediate-click",{...Ea,graphic:S});Ea.stopPropagation()}),this._watchAndUpdateGrabState(Da,!1)]));const va=Da=>Ea=>{X.add(Ea.events.on("focus-changed",({action:Fa})=>{"focus"===Fa&&this._tooltipOptions.enabled?this._updateTranslateTooltip(Da):this._tooltip.clear()}))};this._moveManipulation.xyManipulation.forEachManipulator(va(U.ManipulationType.XY));
this._moveManipulation.xyAxisManipulation.forEachManipulator(va(U.ManipulationType.XY_AXIS));this._moveManipulation.zManipulation.forEachManipulator(va(U.ManipulationType.Z));this._moveManipulation.elevationInfo={mode:"absolute-height",offset:0};X.add([this._moveManipulation.createDragPipeline((Da,Ea,Fa,Ia,Ja)=>{const {snappingStep:La,cancelSnapping:Ka}=ca.createSnapDragEventPipelineStep({predicate:Ga=>!!Ga.info,snappingManager:ba.snappingManager,snappingContext:new R.SnappingContext({editGeometryOperations:this._editGeometryOperations,
elevationInfo:P,pointer:Ja,excludeFeature:S,visualizer:new H.SnappingVisualizer3D}),updatingHandles:this.updatingHandles,useZ:!1});Ia=Ia.next(Ga=>{this._onDragCancel();return Ga}).next(Ka);Fa=Fa.next(Ga=>this._trackNumDragging(Ga)).next(Ga=>{const Ha=this._manipulatorInfos.filter(Ma=>"vertex"===Ma.type&&Ma.manipulator.selected);return Ga.manipulatorType===E.ManipulatorType.TRANSLATE_XY&&1===Ha.length?{...Ga,info:Ha[0],snapOrigin:Ha[0].handle.pos}:Ga}).next(ua.sceneSnappingAtLocation(this.view,P,S)).next(...La).next(ua.addMapDelta()).next(Ga=>
this._perGraphicManipulatorDragAction(ya.SELECTED_OR_ALL,Ga)).next(Ga=>{this._updateTranslateTooltip(Da,Ga);return Ga});return{steps:Fa,cancel:Ia}},P,S.geometry.spatialReference,S),w.watch(()=>la.displaying,()=>this._updateMoveManipulationPosition(),w.initial),la.on("changed",()=>{this._recreatingManipulators||this._updateMoveManipulationPosition()}),w.watch(()=>la.isDraped,Da=>{this._updateMoveManipulationPosition();Da?X.add(this.view.elevationProvider.on("elevation-change",()=>this._updateMoveManipulationPosition()),
"align-move-manipulation"):X.remove("align-move-manipulation")},w.initial)])};wa._createVisualElements=function(){const {graphic:P,view:S}=this,X=T.createVisualElements({view:S,graphic:P,forEachManipulator:ba=>{if(!this.destroyed&&!this._recreatingManipulators){this._graphicMoveManipulation.forEachManipulator(ba);this._moveManipulation.forEachManipulator(ba);for(const ia of this._manipulatorInfos)ba(ia.manipulator,E.ManipulatorType.TRANSLATE_XY)}},onManipulatorsChanged:ba=>this.on("manipulators-changed",
ba)});null!=X&&(this._outlineVisualElement=X.visualElement instanceof pa.OutlineVisualElement?X.visualElement:null);null!=this._outlineVisualElement&&this._manipulatorHandles.add(this._outlineVisualElement.events.on("attachment-origin-changed",()=>{this._graphicState.isDraped||this._updateMoveManipulationPosition()}));this._manipulatorHandles.add(X)};wa._createEdgeOffsetManipulator=function(P,S=I.getGraphicEffectiveElevationInfo(this.graphic)){var X=N.getSettings(this.view).manipulators.edgeOffset,
ba=X.size/2,ia=ba+X.collisionPadding;ba/=ia;const la=ba*Math.sqrt(3)/2;null==this._edgeOffsetManipulatorGeometryInside&&(this._edgeOffsetManipulatorGeometryInside=ta.createExtrudedTriangle(this._edgeOffsetManipulatorMaterial,la,ba/2,ba/2,X.height,X.offset));null==this._edgeOffsetManipulatorGeometryOutside&&(this._edgeOffsetManipulatorGeometryOutside=ta.createExtrudedTriangle(this._edgeOffsetManipulatorMaterial,-la,ba/2,ba/2,X.height,-X.offset));ba=[new K.RenderObject(this._edgeOffsetManipulatorGeometryInside.instantiate(),
V.ManipulatorStateFlags.Unfocused),new K.RenderObject(this._edgeOffsetManipulatorGeometryInside.instantiate({material:this._edgeOffsetManipulatorHoverMaterial}),V.ManipulatorStateFlags.Focused),new K.RenderObject(this._edgeOffsetManipulatorGeometryOutside.instantiate(),V.ManipulatorStateFlags.Unfocused),new K.RenderObject(this._edgeOffsetManipulatorGeometryOutside.instantiate({material:this._edgeOffsetManipulatorHoverMaterial}),V.ManipulatorStateFlags.Focused)];ia=new z.Manipulator3D({view:this.view,
renderObjects:ba,elevationInfo:"on-the-ground"!==S.mode||G.isVolumetricSymbol(this.graphic.symbol)?{mode:"absolute-height",offset:0}:S,worldOriented:!1,focusMultiplier:1,radius:ia,available:!(!this.graphic.visible||!this.graphic.layer?.visible),collisionType:{type:"disc",direction:t.fromValues(0,0,1)},collisionPriority:1,metadata:{deleting:!1}});ba=new z.Manipulator3D({view:this.view,worldSized:!0,worldOriented:!1,available:!(!this.graphic.visible||!this.graphic.layer?.visible),collisionPriority:-10,
cursor:this.enableMoveGraphic?"move":"default",metadata:{deleting:!1}});const va={manipulator:ia,handle:P,locationUpdateHandle:null,type:"edge",selectedIndex:0,edgeManipulator:ba,elevationInfo:S,visibilityHandle:null};this._autoHideEdgeOffsetManipulator(va,X.minSquaredEdgeLength);this._updateEdgeOffsetManipulator(va);P=[];for(var Da of[va.handle.leftVertex,va.handle.rightVertex])X=this._getManipulatorInfoFromHandle(Da),null!=X&&P.push(X.manipulator.events.on("location-update",()=>this._updateEdgeOffsetManipulator(va)));
va.locationUpdateHandle=g.handlesGroup(P);this._manipulatorHandles.add(va.locationUpdateHandle,ia);this._manipulatorHandles.add([this._watchAndUpdateGrabState(ia,!0),this._watchAndUpdateGrabState(ba,!0)],ia);this._manipulatorHandles.add(ua.createManipulatorDragEventPipeline(ia,this._createEdgeOffsetPipeline(va,S)),ia);this._manipulatorHandles.add(ua.createManipulatorDragEventPipeline(ba,(Ea,Fa,Ia,Ja)=>{if("touch"===Ja)this._createEdgeOffsetPipeline(va,S)(Ea,Fa,Ia);else if(this.enableMoveGraphic){Ja=
this.graphic;const La=null!=Ja.geometry?Ja.geometry.spatialReference:null;Fa.next(Ka=>this._trackNumDragging(Ka)).next(ua.dragAtLocation(this.view,Ea.elevationAlignedLocation)).next(L.screenToMapXYAtLocation(this.view,Ea.elevationAlignedLocation,S,La,Ja)).next(ua.addScreenDelta()).next(ua.addMapDelta()).next(Ka=>this._perGraphicManipulatorDragAction(ya.ALL,Ka)).next(Ka=>{this._updateTranslateGraphicTooltip(U.ManipulationType.XY,Ka);return Ka}).next(Ka=>{"end"===Ka.action&&this._tooltip.clear()});
Ia.next(()=>this._onDragCancel(!Ea.metadata.deleting))}}),ia);Da=Ea=>{this._manipulatorInfos.some(Fa=>Fa.manipulator.selected)?this._clearSelection():this.emit("immediate-click",{...Ea,graphic:this.graphic});Ea.stopPropagation()};this._manipulatorHandles.add([ia.events.on("immediate-click",Da),ba.events.on("immediate-click",Da),ia.events.on("focus-changed",({action:Ea})=>{const Fa=this._tooltipOptions;"focus"===Ea&&Fa.enabled?(Ea=this._tooltip.info=new sa.ReshapeEdgeOffsetTooltipInfo({tooltipOptions:Fa}),
this._updateTooltipAreaOrTotalLength(Ea)):this._tooltip.clear()})],ia);this._manipulatorInfos.push(va);this.manipulators.add(ia);this.manipulators.add(ba);this.emit("manipulators-changed");return va};wa._autoHideEdgeOffsetManipulator=function(P,S){const X=P.manipulator,ba=P.edgeManipulator,ia=()=>{P.visibilityHandle=v.removeMaybe(P.visibilityHandle);var la=this._getManipulatorInfoFromHandle(P.handle.leftVertex);const va=this._getManipulatorInfoFromHandle(P.handle.rightVertex);la=null!=la&&null!=va&&
qa.screenEdgeLengthSquared(la.manipulator.renderLocation,va.manipulator.renderLocation,this.view.state.camera)<S;if(!X.focused&&!ba.focused||la)X.grabbable=!la,ba.grabbable=!la,P.visibilityHandle=g.handlesGroup([X.disableDisplay(),{remove:()=>{X.grabbable=!0;ba.grabbable=this.enableMoveGraphic}}])};this._manipulatorHandles.add([X.events.on("focus-changed",ia),ba.events.on("focus-changed",ia),{remove:()=>{v.removeMaybe(P.visibilityHandle);ba.metadata.deleting=!0;this.manipulators.remove(ba)}}],X);
ia()};wa._updateEdgeOffsetManipulator=function(P){this._updateManipulatorPosition(P);var {coordinateHelper:S}=this._editGeometryOperations.data;S=qa.createEdgeOffsetIntersectionPlane(this.view,P.manipulator.elevationAlignedLocation,qa.createEdgeOffsetOperation(S,P.handle,P.manipulator.elevationInfo));var X=this._getManipulatorInfoFromHandle(P.handle.leftVertex),ba=this._getManipulatorInfoFromHandle(P.handle.rightVertex);null!=X&&null!=ba&&(X=X.manipulator.renderLocation,ba=ba.manipulator.renderLocation,
S=null!=S?qa.edgeOffsetRotationMatrix(S,X,ba):l.IDENTITY,P.manipulator.modelTransform=S,P.edgeManipulator.elevationAlignedLocation=P.manipulator.elevationAlignedLocation,P.edgeManipulator.modelTransform=S,S=h.length(h.subtract(ka,X,ba))/2,P.edgeManipulator.collisionType={type:"line",paths:[[[-S,0,0],[S,0,0]]]})};wa._createEdgeOffsetPipeline=function(P,S){return(X,ba,ia)=>{this._clearSelection();const {step:la,cleanup:va}=this._initializeEdgeOffset(P,S);ba.next(Da=>this._trackNumDragging(Da)).next(ua.dragAtLocation(this.view,
X.elevationAlignedLocation)).next(la).next(L.screenToRenderPlaneFromEvent(this.view)).next(L.convertToMapCoordinates(this.view,this._editGeometryOperations.data.spatialReference)).next(ua.addMapDelta()).next(this._applyComputeEdgeOffsetDistanceStep()).next(this._applyEdgeOffsetStep(P)).next(this._showEdgeOffsetTooltip()).next(Da=>{"end"===Da.action&&va()});ia.next(()=>{X.metadata.deleting||(va(),this._onDragCancel())})}};wa._initializeEdgeOffset=function(P,S){var {view:X}=this;const ba=this._editGeometryOperations,
ia=qa.createEdgeOffsetOperation(ba.data.coordinateHelper,P.handle,S);S=ba.createUndoGroup();const la=qa.createEdgeOffsetIntersectionPlane(X,P.manipulator.elevationAlignedLocation,ia);if(ia.requiresSplitEdgeLeft){var va=this._getManipulatorInfoFromHandle(P.handle.leftVertex.leftEdge);null!=va&&this._splitEdgeManipulator(va,1)}ia.requiresSplitEdgeRight&&(va=this._getManipulatorInfoFromHandle(P.handle.rightVertex.rightEdge),null!=va&&this._splitEdgeManipulator(va,0));const Da=()=>new y({paths:[[P.handle.leftVertex.pos,
P.handle.rightVertex.pos]],spatialReference:ba.data.spatialReference});va=N.getSettings(X);const Ea=new pa.OutlineVisualElement({view:X,isDraped:this._graphicState.isDraped,geometry:Da(),elevationInfo:P.elevationInfo,width:va.visualElements.lineGraphics.outline.width,color:W.unitRGBAFromColor(va.colors.accent),attached:!0});let Fa;const Ia=()=>{this._cleanEdgeOffsetCollapsedEdges(P);Fa=v.removeMaybe(Fa)};X=this.on("undo",Ia);Fa=g.handlesGroup([g.destroyHandle(Ea),w.watch(()=>this._graphicState.isDraped,
Ja=>Ea.isDraped=Ja),this._graphicState.on("changed",()=>Ea.geometry=Da()),S,X]);return{step:Ja=>null==ia||null==la?(Ia(),null):{...Ja,operation:ia,plane:la},cleanup:Ia}};wa._applyEdgeOffsetStep=function(P){return S=>{if(this.destroyed||null==S.operation)return S;this._updateEventState(na.RESHAPING);const {mapDeltaX:X,mapDeltaY:ba,mapDeltaZ:ia}=S;if(X||ba||ia)this._offsetEdge(P,S),this.emit("reshape",{type:"reshape",mover:this.graphic});return S}};wa._applyComputeEdgeOffsetDistanceStep=function(){return P=>
{const {operation:S,mapEnd:X}=P;if(null==S||null==X)return P;"start"===P.action&&S.selectArrowFromStartPoint(X);return{...P,signedDistance:S.signedDistanceToPoint(X)}}};wa._showEdgeOffsetTooltip=function(){return P=>{const {mapEnd:S,signedDistance:X,operation:ba}=P;var ia=this._tooltip,la=this._tooltipOptions;if(!la.enabled||null==X)return ia.clear(),P;let va=ia.info;if(null==va||"reshape-edge-offset"!==va.type)va=ia.info=new sa.ReshapeEdgeOffsetTooltipInfo({tooltipOptions:la});var {coordinateHelper:Da}=
this._editGeometryOperations.data;ia=va;if("end"===P.action)la=c.zeroMeters;else a:{la=X*ba.selectedArrow;var Ea=ba.plane;if(this._graphicState.isDraped){const Fa=Da.toXYZ(Da.pointToVector(S));Ea=C.projectPoint(Ea,Fa,D.sv3d.get());Da=aa.geodesicDistance(Ea,Fa,Da.spatialReference);if(null!=Da){la=c.createLength(Da.value*Math.sign(la),Da.unit);break a}}la=c.createLength(la*B.getMetersPerUnitForSR(S.spatialReference),"meters")}ia.distance=la;this._updateTooltipAreaOrTotalLength(va);return P}};wa._cleanEdgeOffsetCollapsedEdges=
function(P){var S=P.handle.leftVertex.leftEdge?.leftVertex,X=P.handle.leftVertex;const ba=P.handle.rightVertex.rightEdge?.rightVertex,ia=P.handle.rightVertex,la=this._editGeometryOperations.data.coordinateHelper;P=[];S&&1E-6>la.distance(S.pos,X.pos)&&(S=this._getManipulatorInfoFromHandle(X),null!=S&&P.push(S));if(1E-6>la.distance(X.pos,ia.pos)||ba&&1E-6>la.distance(ba.pos,ia.pos))X=this._getManipulatorInfoFromHandle(ia),null!=X&&P.push(X);P.length&&this._removeVertices(P)};wa._computeVertexManipulatorSizeAndOutline=
function(P){const S=P.size/2,X=S+P.collisionPadding;return{size:S/X,outlineSize:(S+P.outlineSize)/X}};wa._createVertexOrEdgeManipulator=function(P,S=I.getGraphicEffectiveElevationInfo(this.graphic),X=!1){const {view:ba}=this;var ia=N.getSettings(ba);if("edge"===P.type){if(this.enableEdgeOffset)return this._createEdgeOffsetManipulator(P,S);if(!this.enableMidpoints)return null}if(null==this._vertexManipulatorGeometry||null==this._vertexManipulatorOutlineGeometry){const {size:Ea,outlineSize:Fa}=this._computeVertexManipulatorSizeAndOutline(ia.manipulators.vertex);
this._vertexManipulatorGeometry=ta.createSphereGeometry(this._vertexManipulatorMaterial,Ea,16,16);this._vertexManipulatorOutlineGeometry=ta.createSphereGeometry(this._vertexManipulatorOutlineMaterial,Fa,16,16)}if(null==this._edgeManipulatorGeometry||null==this._edgeManipulatorOutlineGeometry){const {size:Ea,outlineSize:Fa}=this._computeVertexManipulatorSizeAndOutline(ia.manipulators.edge);this._edgeManipulatorGeometry=ta.createSphereGeometry(this._edgeManipulatorMaterial,Ea,16,16);this._edgeManipulatorOutlineGeometry=
ta.createSphereGeometry(this._edgeManipulatorOutlineMaterial,Fa,16,16)}({geometry:ia}=this.graphic);ia=ia?.type;ia="point"===ia||"mesh"===ia?[]:[new K.RenderObject(this._vertexManipulatorGeometry.instantiate(),ea.Vertex|V.ManipulatorStateFlags.Unselected),new K.RenderObject(this._vertexManipulatorOutlineGeometry.instantiate(),ea.Vertex|V.ManipulatorStateFlags.Unfocused|V.ManipulatorStateFlags.Unselected),new K.RenderObject(this._vertexManipulatorOutlineGeometry.instantiate({material:this._vertexManipulatorHoverOutlineMaterial}),
ea.Vertex|V.ManipulatorStateFlags.Focused|V.ManipulatorStateFlags.Unselected),new K.RenderObject(this._vertexManipulatorGeometry.instantiate({material:this._selectedManipulatorMaterial}),V.ManipulatorStateFlags.Selected),new K.RenderObject(this._vertexManipulatorOutlineGeometry.instantiate({material:this._selectedManipulatorOutlineMaterial}),V.ManipulatorStateFlags.Selected|V.ManipulatorStateFlags.Unfocused),new K.RenderObject(this._vertexManipulatorOutlineGeometry.instantiate({material:this._selectedManipulatorHoverOutlineMaterial}),
V.ManipulatorStateFlags.Selected|V.ManipulatorStateFlags.Focused)];this.enableMidpoints&&ia.push(new K.RenderObject(this._edgeManipulatorGeometry.instantiate({material:this._vertexManipulatorMaterial}),ea.Edge|V.ManipulatorStateFlags.Focused|V.ManipulatorStateFlags.Unselected),new K.RenderObject(this._edgeManipulatorOutlineGeometry.instantiate({material:this._vertexManipulatorHoverOutlineMaterial}),ea.Edge|V.ManipulatorStateFlags.Focused|V.ManipulatorStateFlags.Unselected),new K.RenderObject(this._edgeManipulatorGeometry.instantiate(),
ea.Edge|V.ManipulatorStateFlags.Unfocused|V.ManipulatorStateFlags.Unselected),new K.RenderObject(this._edgeManipulatorOutlineGeometry.instantiate(),ea.Edge|V.ManipulatorStateFlags.Unfocused|V.ManipulatorStateFlags.Unselected));const la=new z.Manipulator3D({view:ba,renderObjects:ia,elevationInfo:S,focusMultiplier:1,touchMultiplier:1,available:!(!this.graphic.visible||!this.graphic.layer?.visible),metadata:{deleting:!1}});la.selected=X;this._setTypeSpecificManipulatorSettings(la,P,S);const va="edge"===
P.type?{manipulator:la,handle:P,locationUpdateHandle:null,type:"edge",selectedIndex:0}:{manipulator:la,handle:P,type:"vertex",selectedIndex:0};this._manipulatorInfos.push(va);this.manipulators.add(la);this._updateManipulatorPosition(va);if("edge"===va.type){P=[];for(var Da of[va.handle.leftVertex,va.handle.rightVertex])X=this._getManipulatorInfoFromHandle(Da),null!=X&&P.push(X.manipulator.events.on("location-update",()=>this._updateManipulatorPosition(va)));va.locationUpdateHandle=g.handlesGroup(P);
this._manipulatorHandles.add(va.locationUpdateHandle,la)}this._manipulatorHandles.add(this._watchAndUpdateGrabState(la,!0),la);Da=ua.createManipulatorDragEventPipeline(la,(Ea,Fa,Ia,Ja)=>{let La=null;const {snappingStep:Ka,cancelSnapping:Ga}=ca.createSnapDragEventPipelineStep({predicate:()=>!this._isMultiVertexSelection(),snappingManager:this.tool.snappingManager,snappingContext:new R.SnappingContext({editGeometryOperations:this._editGeometryOperations,elevationInfo:S,pointer:Ja,excludeFeature:this.graphic,
visualizer:new H.SnappingVisualizer3D}),updatingHandles:this.updatingHandles,useZ:!1});Ia=Ia.next(Ha=>{this._onDragCancel(!Ea.metadata.deleting,()=>La=v.removeMaybe(La));return Ha}).next(Ga);Fa.next(Ha=>this._trackNumDragging(Ha)).next(Ha=>{"start"===Ha.action&&(La=this._editGeometryOperations.createUndoGroup());if("edge"===va.type){const Ma=this._splitEdgeManipulator(va);return{...Ha,info:Ma,snapOrigin:Ma.handle.pos}}return{...Ha,info:va,snapOrigin:va.handle.pos}}).next(ua.dragAtLocation(this.view,
Ea.elevationAlignedLocation)).next(L.screenToMapXYForGraphicAtLocation(this.view,this.graphic,Ea.elevationAlignedLocation,Ea.location.spatialReference,this.graphic)).next(ua.sceneSnappingAtLocation(this.view,S,this.graphic)).next(...Ka).next(ua.addMapDelta()).next(Ha=>{this._perVertexManipulatorDragAction(Ha);"end"===Ha.action&&(La=v.removeMaybe(La));this._updateTranslateVertexTooltip(Ea,U.ManipulationType.XY,Ha)})});this._manipulatorHandles.add([Da,la.events.on("immediate-click",Ea=>this._manipulatorClickCallback(Ea,
va)),la.events.on("select-changed",()=>{va.selectedIndex=++this._selectedIndex;this._updateMoveManipulationPosition()}),la.events.on("focus-changed",({action:Ea})=>{"focus"===Ea&&"edge"!==va.type?this._updateTranslateVertexTooltip(la,U.ManipulationType.XY):this._tooltip.clear()})],la);this.emit("manipulators-changed");return va};wa._trackNumDragging=function(P){switch(P.action){case "start":this._numDragging++;break;case "end":this._numDragging--}return P};wa._onDragCancel=function(P=!0,S){this._numDragging--;
P&&(this.undo(),this.outputGeometry=null!=this._editGeometryOperations?this._editGeometryOperations.data.geometry:null);null!=this.tool.snappingManager&&this.tool.snappingManager.doneSnapping();this._tooltip.clear();switch(this._reshapeEventState){case na.MOVING:this.emit("move",{type:"move",dx:0,dy:0,mover:this.graphic});break;case na.RESHAPING:this.emit("reshape",{type:"reshape",mover:this.graphic})}S&&S();this.destroyed||this._updateEventState(na.NONE)};wa._setTypeSpecificManipulatorSettings=function(P,
S,X){const {graphic:ba,view:ia}=this,la=N.getSettings(ia);switch(S.type){case "vertex":P.state=ea.Vertex;P.selectable=!0;P.cursor="move";P.collisionPriority=2;const {size:va,collisionPadding:Da}=la.manipulators.vertex;P.radius=va/2+Da;P.elevationInfo=X;({geometry:S}=ba);S=S?.type;P.interactive=null!=S&&"point"!==S&&"mesh"!==S;break;case "edge":P.state=ea.Edge;P.selectable=!1;P.cursor="copy";P.collisionPriority=-1;const {size:Ea,collisionPadding:Fa}=la.manipulators.edge;P.radius=Ea/2+Fa;P.elevationInfo=
"on-the-ground"!==X.mode||G.isVolumetricSymbol(ba.symbol)?{mode:"absolute-height",offset:0}:X}};wa._watchAndUpdateGrabState=function(P,S){return P.events.on("grab-changed",X=>this._onGrabStateChanged(P,S,X.action,X.pointerType))};wa._onGrabStateChanged=function(P,S,X,ba="mouse"){if(!this._recreatingManipulators){if("start"===X)S&&this._updateSelection(P),this._numGrabbing++;else if(this._numGrabbing--,this._updateEventState(na.NONE),this.destroyed)return;this._moveManipulation.interactive=!this._numGrabbing;
if("touch"!==ba||this.enableEdgeOffset)this._manipulatorInfos.forEach(ia=>{const {manipulator:la}=ia;var {geometry:va}=this.graphic;va=va?.type;la.interactive=la.grabbing||!this._numGrabbing&&null!=va&&"point"!==va&&"mesh"!==va;"edgeManipulator"in ia&&(ia.edgeManipulator.interactive=ia.edgeManipulator.grabbing||!this._numGrabbing)}),this._graphicMoveManipulation.forEachManipulator(ia=>{ia.interactive=ia.grabbing||!this._numGrabbing})}};wa._clearSelection=function(){for(const P of this._manipulatorInfos)P.manipulator.grabbing||
(P.manipulator.selected=!1)};wa._updateSelection=function(P){P.grabbing&&!P.selected&&P.selectable&&(this._clearSelection(),P.selected=!0,this.emit("manipulators-changed"))};wa._removeManipulator=function(P){null!=P&&(P.manipulator.metadata.deleting=!0,this.manipulators.remove(P.manipulator),this._manipulatorHandles.remove(P.manipulator),m.removeUnordered(this._manipulatorInfos,P),this.emit("manipulators-changed"))};wa._getManipulatorInfoFromHandle=function(P){if(P)for(const S of this._manipulatorInfos)if(P===
S.handle)return S;return null};wa._updateManipulatorPosition=function(P){if(null!=P){var S=this._editGeometryOperations;if("vertex"===P.type)P.manipulator.location=S.data.coordinateHelper.vectorToDehydratedPoint(P.handle.pos,Z),P.manipulator.grabbing&&null!=this._vertexLaserLineVisualElement&&(this._vertexLaserLineVisualElement.visualElement.intersectsWorldUpAtLocation=P.manipulator.renderLocation);else if("edge"===P.type){var X=this._getManipulatorInfoFromHandle(P.handle.leftVertex),ba=this._getManipulatorInfoFromHandle(P.handle.rightVertex);
null!=X&&null!=ba&&(X=X.manipulator,ba=ba.manipulator,null!=P.manipulator.elevationInfo&&"on-the-ground"===P.manipulator.elevationInfo.mode?(X=X.location,ba=ba.location,P.manipulator.location=F.makeDehydratedPoint(X.x+.5*(ba.x-X.x),X.y+.5*(ba.y-X.y),X.hasZ&&ba.hasZ?0:void 0,S.data.spatialReference)):(h.lerp(ka,X.renderLocation,ba.renderLocation,.5),P.manipulator.renderLocation=ka))}}};wa._splitEdgeManipulator=function(P,S=.5){var X=this._editGeometryOperations;S=X.splitEdge(P.handle,S).createdVertex;
P.locationUpdateHandle=v.removeMaybe(P.locationUpdateHandle);var ba=I.getGraphicEffectiveElevationInfo(this.graphic);let ia;this.enableEdgeOffset?(this._removeManipulator(P),ia=this._createVertexOrEdgeManipulator(S)):(ia=P,ia.handle=S,ia.type="vertex",this._setTypeSpecificManipulatorSettings(P.manipulator,P.handle,ba));S.leftEdge&&this._createVertexOrEdgeManipulator(S.leftEdge);S.rightEdge&&this._createVertexOrEdgeManipulator(S.rightEdge);this.outputGeometry=X.data.geometry;this._updateManipulatorPosition(ia);
this.enableEdgeOffset||this._updateTranslateVertexTooltip(ia.manipulator,U.ManipulationType.XY);this._updateSelection(P.manipulator);P=this._updateEventState(na.RESHAPING);ba=X.data.coordinateHelper.vectorToArray(ia.handle.pos);X=X.data.components.indexOf(S.component);this.emit("vertex-add",{type:"vertex-add",vertices:[{coordinates:ba,componentIndex:X,vertexIndex:S.index}],added:ba});P&&this._updateEventState(na.NONE);return ia};wa._updateMoveManipulationPosition=function(){const P=h.set(ka,0,0,0);
let S=0,X=!1;var ba=null;let ia=null;for(var la of this._manipulatorInfos)if("vertex"===la.type)if(la.manipulator.selected)if(S++,h.add(P,P,la.manipulator.renderLocation),null==ba||la.selectedIndex>ba.selectedIndex)ia=ba,ba=la;else{if(null==ia||la.selectedIndex>ia.selectedIndex)ia=la}else X=!0;if(0===S)ba=this._graphicState.displaying&&this.enableMoveGraphic,this._moveManipulation.xyManipulation.available=ba,this._moveManipulation.xyAxisManipulation.available=ba,this._moveManipulation.xyAxisManipulation.orthogonalAvailable=
ba,this._moveManipulation.zManipulation.available=ba&&this.enableZShape&&M.canMoveZ(this.graphic),this._moveManipulation.angle=ja.shapeOrientation(this.graphic.geometry),this._moveManipulation.radius=U.MoveManipulation.radiusForSymbol(this.graphic.symbol);else{la=this._graphicState.displaying;this._moveManipulation.xyManipulation.available=la;this._moveManipulation.xyAxisManipulation.available=la;this._moveManipulation.zManipulation.available=la&&this.enableZVertex&&M.canMoveZ(this.graphic);this._moveManipulation.xyAxisManipulation.orthogonalAvailable=
la&&1!==S;la=0;if(null!=ba){const va=ba.handle.pos,Da=null!=ia?ia.handle.pos:ba.handle.leftEdge&&ba.handle.leftEdge.leftVertex?ba.handle.leftEdge.leftVertex.pos:null;ba=null==ia&&ba.handle.rightEdge&&ba.handle.rightEdge.rightVertex?ba.handle.rightEdge.rightVertex.pos:null;Da&&ba?this._moveManipulation.xyAxisManipulation.available=!1:Da?la=Math.atan2(va[1]-Da[1],va[0]-Da[0])+Math.PI/2:ba&&(la=Math.atan2(ba[1]-va[1],ba[0]-va[0])+Math.PI/2)}this._moveManipulation.angle=la;this._moveManipulation.radius=
Y.DISC_RADIUS_SMALL}0!==S&&X?(h.scale(P,P,1/S),Z.spatialReference=this._editGeometryOperations.data.spatialReference,Z.hasZ=!0,this.view.renderCoordsHelper.fromRenderCoords(P,Z),this._moveManipulation.elevationAlignedLocation=Z):null==this._outlineVisualElement||this._graphicState.isDraped||null==this._outlineVisualElement.attachmentOrigin?A.placeAtGraphic(this.view,this._moveManipulation,this.graphic):this._moveManipulation.elevationAlignedLocation=this._outlineVisualElement.attachmentOrigin};wa._removeVertices=
function(P){var S=[];const X=this._editGeometryOperations;for(var ba of P)"vertex"===ba.type&&X.canRemoveVertex()&&(S.push(ba.handle),this._removeManipulator(ba),this._removeManipulator(this._getManipulatorInfoFromHandle(ba.handle.leftEdge)),this._removeManipulator(this._getManipulatorInfoFromHandle(ba.handle.rightEdge)),(P=X.removeVertices([ba.handle]).removedVertices?.[0].createdEdge)&&this._createVertexOrEdgeManipulator(P));if(0<S.length&&(S=S.map(ia=>{const la=X.data.components.indexOf(ia.component);
return{coordinates:X.data.coordinateHelper.vectorToArray(ia.pos),componentIndex:la,vertexIndex:ia.index}}),this.outputGeometry=X.data.geometry,ba=this._updateEventState(na.RESHAPING),!this.destroyed&&(this.emit("vertex-remove",{type:"vertex-remove",removed:S.map(ia=>ia.coordinates),vertices:S}),!this.destroyed))){if(ba&&(this._updateEventState(na.NONE),this.destroyed))return;this._updateMoveManipulationPosition()}};wa._moveVertices=function(P,S,X="start"===S.action?da.AccumulationBehaviour.NEW_STEP:
da.AccumulationBehaviour.ACCUMULATE_STEPS){const ba=this._editGeometryOperations;ba.moveVertices(P.map(ia=>ia.handle),S.mapDeltaX,S.mapDeltaY,S.mapDeltaZ,X);this.outputGeometry=ba.data.geometry;for(const ia of P)this._updateManipulatorPosition(ia)};wa._offsetEdge=function(P,S){if(null!=S.operation&&null!=S.signedDistance){var X=this._editGeometryOperations,ba=S.operation.clone();ba.distance=S.signedDistance;X.updateVertices([P.handle.leftVertex,P.handle.rightVertex],ba);this.outputGeometry=X.data.geometry;
this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(P.handle.leftVertex));this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(P.handle.rightVertex))}};wa._manipulatorClickCallback=function(P,S){P.shiftKey||this._clearSelection();"vertex"===S.type&&(S.manipulator.selected=!S.manipulator.selected,P.button===oa.MouseButton.Right&&this._removeVertices([S]));"edge"===S.type&&P.button===oa.MouseButton.Left&&this._splitEdgeManipulator(S);P.stopPropagation()};wa._updateTranslateTooltip=
function(P,S){const X=this._manipulatorInfos.filter(ba=>"vertex"===ba.type&&ba.manipulator.selected);1===X.length?this._updateTranslateVertexTooltip(X[0].manipulator,P,S):this._updateTranslateGraphicTooltip(P,S)};wa._updateTranslateGraphicTooltip=function(P,S){const X=this._tooltipOptions;if(X.enabled){var ba=this._graphicState.isDraped?"on-the-ground":"absolute-height";switch(P){case U.ManipulationType.XY:this._tooltip.info=new ma.TranslateGraphicTooltipInfo({tooltipOptions:X});this._updateTranslateTooltipDistance(this._tooltip.info,
S,(ia,la)=>O.autoHorizontalDistanceByElevationModeBetweenPoints(ia,la,ba));break;case U.ManipulationType.XY_AXIS:this._tooltip.info=new ma.TranslateGraphicXYTooltipInfo({tooltipOptions:X});this._updateTranslateTooltipDistance(this._tooltip.info,S,(ia,la)=>{ia=O.autoHorizontalDistanceByElevationModeBetweenPoints(ia,la,ba);return c.scale(ia,ja.axisConstrainedDragSign(S))});break;case U.ManipulationType.Z:this._tooltip.info=new ma.TranslateGraphicZTooltipInfo({tooltipOptions:X}),this._updateTranslateTooltipDistance(this._tooltip.info,
S,fa.verticalSignedDistanceBetweenPoints)}}};wa._updateTranslateVertexTooltip=function(P,S,X){const ba=this._tooltipOptions;if(ba.enabled){var ia=this._graphicState.isDraped?"on-the-ground":"absolute-height";switch(S){case U.ManipulationType.XY:var la=new ma.TranslateVertexTooltipInfo({tooltipOptions:ba});this._updateTranslateTooltipDistance(la,X,(va,Da)=>O.autoHorizontalDistanceByElevationModeBetweenPoints(va,Da,ia));this._updateTooltipAreaOrTotalLength(la);break;case U.ManipulationType.XY_AXIS:la=
new ma.TranslateVertexXYTooltipInfo({tooltipOptions:ba});this._updateTranslateTooltipDistance(la,X,(va,Da)=>{va=O.autoHorizontalDistanceByElevationModeBetweenPoints(va,Da,ia);return c.scale(va,ja.axisConstrainedDragSign(X))});this._updateTooltipAreaOrTotalLength(la);break;case U.ManipulationType.Z:la=new ma.TranslateVertexZTooltipInfo({tooltipOptions:ba}),this._updateTranslateTooltipDistance(la,X,fa.verticalSignedDistanceBetweenPoints)}P=fa.elevationOfPoint(P.elevationAlignedLocation);null!=P&&(la.elevation=
{mode:"absolute-height",...P});this._tooltip.info=la}};wa._updateTranslateTooltipDistance=function(P,S,X){if(null!=S&&"end"!==S.action){const {mapStart:ba,mapEnd:ia}=S;S=X(ba,ia);P.distance=null!=S?S:c.zeroMeters}};wa._updateTooltipAreaOrTotalLength=function(P){const {geometry:S}=this.graphic;if(null!=S){var X=this._graphicState.isDraped?"on-the-ground":"absolute-height";P.area="polygon"===S.type?Aa.autoAreaByElevationMode(S,X):null;P.totalLength="polyline"===S.type?O.autoLengthByElevationMode(S,
X):null}};r._createClass(Ca,[{key:"inputGeometry",get:function(){return null!=this._editGeometryOperations?this._editGeometryOperations.data.geometry:null},set:function(P){this._recreateEditGeometryAndManipulators(P)}},{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"manipulators",get:function(){return this.tool.manipulators}},{key:"view",get:function(){return this.tool.view}},{key:"graphic",get:function(){return this.tool.graphic}},{key:"enableZShape",get:function(){return this.tool.enableZShape}},
{key:"enableZVertex",get:function(){return this.tool.enableZVertex}},{key:"enableMoveGraphic",get:function(){return this.tool.enableMoveGraphic}},{key:"enableMidpoints",get:function(){return this.tool.enableMidpoints}},{key:"enableEdgeOffset",get:function(){return this.tool.enableEdgeOffset}},{key:"_labelOptions",get:function(){return this.tool.labelOptions}},{key:"_tooltipOptions",get:function(){return this.tool.tooltipOptions}},{key:"canRedo",get:function(){return null!=this._editGeometryOperations&&
this._editGeometryOperations.canRedo}},{key:"canUndo",get:function(){return null!=this._editGeometryOperations&&this._editGeometryOperations.canUndo}},{key:"test",get:function(){return{segmentLabels:this._segmentLabels,tooltip:this._tooltip}}}]);return Ca}(n.EventedMixin(k.HandleOwner));e.__decorate([u.property()],a.ReshapeOperation.prototype,"_editGeometryOperations",void 0);e.__decorate([u.property()],a.ReshapeOperation.prototype,"_segmentLabels",void 0);e.__decorate([u.property({constructOnly:!0})],
a.ReshapeOperation.prototype,"tool",void 0);e.__decorate([u.property()],a.ReshapeOperation.prototype,"_tooltip",void 0);e.__decorate([u.property()],a.ReshapeOperation.prototype,"inputGeometry",null);e.__decorate([u.property()],a.ReshapeOperation.prototype,"outputGeometry",void 0);e.__decorate([u.property({readOnly:!0})],a.ReshapeOperation.prototype,"updating",null);e.__decorate([u.property()],a.ReshapeOperation.prototype,"manipulators",null);e.__decorate([u.property()],a.ReshapeOperation.prototype,
"view",null);e.__decorate([u.property()],a.ReshapeOperation.prototype,"graphic",null);e.__decorate([u.property()],a.ReshapeOperation.prototype,"enableZShape",null);e.__decorate([u.property()],a.ReshapeOperation.prototype,"enableZVertex",null);e.__decorate([u.property()],a.ReshapeOperation.prototype,"enableMoveGraphic",null);e.__decorate([u.property()],a.ReshapeOperation.prototype,"enableMidpoints",null);e.__decorate([u.property()],a.ReshapeOperation.prototype,"enableEdgeOffset",null);e.__decorate([u.property()],
a.ReshapeOperation.prototype,"_labelOptions",null);e.__decorate([u.property()],a.ReshapeOperation.prototype,"_tooltipOptions",null);a.ReshapeOperation=e.__decorate([d.subclass("esri.views.3d.interactive.editingTools.reshapeGraphic.ReshapeOperation")],a.ReshapeOperation);const Z=F.makeDehydratedPoint(0,0,void 0,Q.WGS84),ka=t.create();var ea;(function(Ba){Ba.Vertex=V.ManipulatorStateCustomFlags.Custom1;Ba.Edge=V.ManipulatorStateCustomFlags.Custom2})(ea||(ea={}));var na;(function(Ba){Ba[Ba.NONE=0]="NONE";
Ba[Ba.MOVING=1]="MOVING";Ba[Ba.RESHAPING=2]="RESHAPING"})(na||(na={}));var ya;(function(Ba){Ba[Ba.ALL=0]="ALL";Ba[Ba.SELECTED_OR_ALL=1]="SELECTED_OR_ALL"})(ya||(ya={}));Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/edgeOffsetUtils":function(){define("exports ../../../../../core/screenUtils ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/plane ../../../../../layers/graphics/dehydratedFeatures ../../../../interactive/editGeometry/operations/OffsetEdgeVertex".split(" "),
function(a,r,e,x,m,p,n,k){function f(g,v,c){c=n.makeDehydratedPoint(v.x+c[0],v.y+c[1],v.z+c[2],v.spatialReference);const w=m.create(),B=m.create();return g.renderCoordsHelper.toRenderCoords(v,w)&&g.renderCoordsHelper.toRenderCoords(c,B)?x.direction(B,w,B):null}a.createEdgeOffsetIntersectionPlane=function(g,v,c){const w=m.create();if(!g.renderCoordsHelper.toRenderCoords(v,w))return null;var B=f(g,v,p.normal(c.plane));g=f(g,v,c.edgeDirection);if(null==B||null==g)return null;B=x.cross(m.create(),B,g);
return p.fromPositionAndNormal(w,B,p.create())};a.createEdgeOffsetOperation=function(g,v,c){return new k.OffsetEdgeVertex(g,"on-the-ground"===c.mode?k.PlaneType.XY:k.PlaneType.XYZ,v,0)};a.edgeOffsetRotationMatrix=function(g,v,c){g=p.normal(g);v=x.direction(m.create(),v,c);c=x.cross(m.create(),v,g);g=x.cross(m.create(),v,c);return e.fromValues(v[0],v[1],v[2],0,c[0],c[1],c[2],0,g[0],g[1],g[2],0,0,0,0,1)};a.screenEdgeLengthSquared=function(g,v,c){g=c.projectToRenderScreen(g,r.createRenderScreenPointArray3());
v=c.projectToRenderScreen(v,r.createRenderScreenPointArray3());return null!=g&&null!=v?x.squaredLength(x.subtract(g,g,v)):0};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/ReshapeTooltipInfos":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/quantityUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./SketchTooltipInfo".split(" "),
function(a,r,e,x,m,p,n,k,f,g){a.ReshapeEdgeOffsetTooltipInfo=function(v){function c(w){w=v.call(this,w)||this;w.type="reshape-edge-offset";w.distance=x.zeroMeters;w.area=null;w.totalLength=null;return w}r._inherits(c,v);return r._createClass(c)}(g.SketchTooltipInfo);e.__decorate([m.property()],a.ReshapeEdgeOffsetTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.ReshapeEdgeOffsetTooltipInfo.prototype,"distance",void 0);e.__decorate([m.property()],a.ReshapeEdgeOffsetTooltipInfo.prototype,
"area",void 0);e.__decorate([m.property()],a.ReshapeEdgeOffsetTooltipInfo.prototype,"totalLength",void 0);a.ReshapeEdgeOffsetTooltipInfo=e.__decorate([f.subclass("esri.views.interactive.tooltip.ReshapeEdgeOffsetTooltipInfo")],a.ReshapeEdgeOffsetTooltipInfo);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/GraphicTransformTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/Point ../../../../../support/elevationInfoUtils ../../../../ViewingMode ../../Manipulator3D ../../manipulatorUtils ../../SnappingVisualizer3D ../manipulatorUtils ../meshFastUpdateUtils ../visualElementUtils ../manipulations/config ../manipulations/MoveManipulation ../manipulations/moveUtils ./GraphicScaleRotateTransform ./ScaleRotateMeshAdapter ./ScaleRotateObjectSymbol3DAdapter ./undoRecords ../../../layers/graphics/GraphicState ../../../../interactive/dragEventPipeline ../../../../interactive/InteractiveToolBase ../../../../interactive/editGeometry/EditGeometryOperations ../../../../interactive/sketch/SketchTooltipOptions ../../../../interactive/snapping/SnappingContext ../../../../interactive/snapping/SnappingDragPipelineStep ../../../../interactive/tooltip/Tooltip ../../../../interactive/tooltip/TranslateTooltipInfos ../../../../support/automaticLengthMeasurementUtils ../../../../support/euclideanLengthMeasurementUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G,z,A,K,J,H,L,E,M,N,T,Y,U,ja,ra){a.GraphicTransformTool=function(qa){function pa(ta){ta=qa.call(this,ta)||this;ta.enableZ=!0;ta.enableRotation=!0;ta.enableScaling=!0;ta.tooltipOptions=new M;ta.type="transform-3d";ta._scaleRotate=null;ta._tooltip=null;return ta}r._inherits(pa,qa);var za=pa.prototype;za.initialize=function(){const {graphic:ta,view:oa}=this;this.graphicState=new J.GraphicState({graphic:ta});this.addHandles(f.watch(()=>this.tooltipOptions.enabled,
da=>{this._tooltip=da?new Y.Tooltip({view:oa}):n.destroyMaybe(this._tooltip)},f.syncAndInitial));this._moveManipulation=new F.MoveManipulation({tool:this,view:oa,snapToScene:this.snapToScene,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:this.enableZ&&y.canMoveZ(ta),radius:F.MoveManipulation.radiusForSymbol(ta.symbol)});this._moveManipulation.forEachManipulator(da=>this.handles.add(da.events.on("immediate-click",R=>{this.emit("immediate-click",{...R,graphic:ta});R.stopPropagation()})));const ua=da=>
R=>{this.handles.add(R.events.on("focus-changed",({action:ca})=>{const sa=this._tooltip;null!=sa&&("focus"===ca?this._updateMoveTooltip(da):sa.clear())}))};this._moveManipulation.xyManipulation.forEachManipulator(ua(F.ManipulationType.XY));this._moveManipulation.xyAxisManipulation.forEachManipulator(ua(F.ManipulationType.XY_AXIS));this._moveManipulation.zManipulation.forEachManipulator(ua(F.ManipulationType.Z));const V=b.getGraphicEffectiveElevationInfo(ta);this._moveManipulation.elevationInfo=V;
this.addHandles(q.meshTransformFastUpdateHandles(this.graphicState));const {geometry:ha}=ta;this._moveManipulation.createGraphicDragPipeline((da,R,ca,sa,xa)=>{if(null!=ha&&da===F.ManipulationType.XY){const {snappingStep:ma,cancelSnapping:Aa}=T.createSnapDragEventPipelineStep({snappingContext:new N.SnappingContext({elevationInfo:V,pointer:xa,editGeometryOperations:E.EditGeometryOperations.fromGeometry(new u({spatialReference:ha.spatialReference}),oa.state.viewingMode),visualizer:new t.SnappingVisualizer3D,
excludeFeature:ta}),snappingManager:this.snappingManager,updatingHandles:this.updatingHandles,useZ:!1});sa=sa.next(Aa);ca=ca.next(H.sceneSnappingAtProjectedLocation(this.view,V)).next(...ma)}ca=ca.next(ma=>{this._updateMoveTooltip(da,ma);return ma});return{steps:ca,cancel:sa}},this.graphicState,da=>{const {action:R,graphic:ca,dxScreen:sa,dyScreen:xa}=da;da={graphic:ca,dxScreen:sa,dyScreen:xa};switch(R){case "start":this.emit("graphic-translate-start",da);this.emit("record-undo",{record:this._createGeometryUndoRecord()});
break;case "update":this.emit("graphic-translate",da);break;case "end":this.emit("graphic-translate-stop",da)}});this._moveManipulation.angle=null!=this._scaleRotate?this._scaleRotate.angle:0;this._scaleRotateAdapter=this._createScaleRotateAdapter();this.handles.add(f.watch(()=>this._scaleRotateAdapter.angle,()=>this._updateMoveAngle()));if(this.enableScaling||this.enableRotation)this._scaleRotate=new G.GraphicScaleRotateTransform({tool:this,mode:this.enableScaling&&this.enableRotation?null:this.enableScaling?
"scale":"rotate",adapter:this._scaleRotateAdapter,tooltipOptions:this.tooltipOptions}),this.handles.add(this._scaleRotate.events.on("scale-changed",()=>this._onScaleChanged()));this.handles.add([C.createVisualElements({view:this.view,graphic:this.graphic,forEachManipulator:da=>this._forEachManipulator(da),onManipulatorsChanged:()=>p.makeHandle()}),this.graphicState.on("changed",()=>this._onGeometryChanged()),this._hideManipulatorsForGraphicState(),f.watch(()=>oa.scale,()=>this._updateMoveAngle())]);
this.handles.add(this.view.trackGraphicState(this.graphicState));this._onGeometryChanged();this._updateMoveAngle();this._forEachManipulator(da=>{da instanceof l.Manipulator3D&&this.handles.add(da.events.on("grab-changed",()=>this._updateManipulatorsInteractive()))});this.finishToolCreation()};za.destroy=function(){this._tooltip=n.destroyMaybe(this._tooltip);this._moveManipulation.destroy();this._scaleRotate=n.destroyMaybe(this._scaleRotate);this._scaleRotateAdapter=n.destroyMaybe(this._scaleRotateAdapter);
this._set("view",null);this._set("graphic",null)};za._updateManipulatorsInteractive=function(){null!=this._scaleRotate&&(this._scaleRotate.interactive=!this._moveManipulation.grabbing,this._moveManipulation.interactive=!this._scaleRotate.grabbing)};za._createScaleRotateAdapter=function(){return null!=this.graphic.geometry&&"mesh"===this.graphic.geometry.type?new z.ScaleRotateMeshAdapter({graphic:this.graphic,geometry:this.graphic.geometry,viewingMode:this.view.state.viewingMode}):new A.ScaleRotateObjectSymbol3DAdapter({graphic:this.graphic,
sizeFilter:ta=>this._enforceNonZeroSize(ta),findLayerView:()=>this.view.allLayerViews.find(ta=>ta.layer===this.graphic.layer),sizeAxis:this.tooltipOptions?.visualVariables?.size?.axis??null})};za._forEachManipulator=function(ta){this._moveManipulation?.forEachManipulator(ta);this._scaleRotate?.forEachManipulator(ta)};za._hideManipulatorsForGraphicState=function(){return f.watch(()=>this.graphicState.displaying,ta=>{this._forEachManipulator(oa=>oa.available=ta);this._moveManipulation.zManipulation.available=
ta&&this.enableZ&&y.canMoveZ(this.graphic)})};za._createGeometryUndoRecord=function(){return K.createGraphicGeometryUndoRecord(this.graphic)};za.reset=function(){};za.onHide=function(){this._scaleRotate?.cancelActiveAnimation()};za._onScaleChanged=function(){null!=this._scaleRotate&&(this._moveManipulation.displayScale=this._scaleRotate.getScale())};za._updateMoveAngle=function(){this._moveManipulation.angle=this.view.state.viewingMode===d.ViewingMode.Local||this.view.scale<D.ALIGN_ARROWS_SCALE_THRESHOLD?
this._scaleRotateAdapter.angle:0};za._onGeometryChanged=function(){h.placeAtGraphic(this.view,this,this.graphic)};za._enforceNonZeroSize=function(ta){return ta||this.view.state.camera.computeRenderPixelSizeAt(this._moveManipulation.renderLocation)};za._updateMoveTooltip=function(ta,oa){const {tooltipOptions:ua,_tooltip:V}=this;if(null!=V){V.clear();var ha=this.graphicState.isDraped?"on-the-ground":"absolute-height";switch(ta){case F.ManipulationType.XY:V.info=new U.TranslateGraphicTooltipInfo({tooltipOptions:ua});
this._updateMoveTooltipDistance(V.info,oa,(da,R)=>ja.autoHorizontalDistanceByElevationModeBetweenPoints(da,R,ha));break;case F.ManipulationType.XY_AXIS:V.info=new U.TranslateGraphicXYTooltipInfo({tooltipOptions:ua});this._updateMoveTooltipDistance(V.info,oa,(da,R)=>{da=ja.autoHorizontalDistanceByElevationModeBetweenPoints(da,R,ha);return k.scale(da,I.axisConstrainedDragSign(oa))});break;case F.ManipulationType.Z:V.info=new U.TranslateGraphicZTooltipInfo({tooltipOptions:ua}),this._updateMoveTooltipDistance(V.info,
oa,ra.verticalSignedDistanceBetweenPoints)}}};za._updateMoveTooltipDistance=function(ta,oa,ua){if(null!=oa&&"end"!==oa.action){const {mapStart:V,mapEnd:ha}=oa;oa=ua(V,ha);ta.distance=null!=oa?oa:k.zeroMeters}};r._createClass(pa,[{key:"snapToScene",set:function(ta){this._moveManipulation&&(this._moveManipulation.snapToScene=ta);this._set("snapToScene",ta)}},{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"location",set:function(ta){this._moveManipulation.location=ta;this._scaleRotate&&
(this._scaleRotate.location=ta)}},{key:"elevationAlignedLocation",set:function(ta){this._moveManipulation.elevationAlignedLocation=ta;this._scaleRotate&&(this._scaleRotate.elevationAlignedLocation=ta)}},{key:"test",get:function(){return{discManipulator:this._moveManipulation.xyManipulation.test.discManipulator,zManipulator:this._moveManipulation.zManipulation.test.manipulator,ringManipulator:null!=this._scaleRotate?this._scaleRotate.test.ringManipulator:null,arrowManipulators:this._moveManipulation.xyAxisManipulation.test.arrowManipulators,
setRingIndicatorDelayMs:ta=>null!=this._scaleRotate?this._scaleRotate.test.setRingIndicatorDelayMs(ta):null,scaleRotateAdapter:this._scaleRotateAdapter,scaleRotateTransform:this._scaleRotate,tooltip:this._tooltip}}}]);return pa}(m.HandleOwnerMixin(x.EventedMixin(L.InteractiveToolBase)));e.__decorate([g.property({constructOnly:!0,nonNullable:!0})],a.GraphicTransformTool.prototype,"view",void 0);e.__decorate([g.property({constructOnly:!0,nonNullable:!0})],a.GraphicTransformTool.prototype,"graphic",
void 0);e.__decorate([g.property({constructOnly:!0,nonNullable:!0})],a.GraphicTransformTool.prototype,"enableZ",void 0);e.__decorate([g.property()],a.GraphicTransformTool.prototype,"enableRotation",void 0);e.__decorate([g.property()],a.GraphicTransformTool.prototype,"enableScaling",void 0);e.__decorate([g.property({constructOnly:!0,type:M})],a.GraphicTransformTool.prototype,"tooltipOptions",void 0);e.__decorate([g.property()],a.GraphicTransformTool.prototype,"graphicState",void 0);e.__decorate([g.property({value:!1})],
a.GraphicTransformTool.prototype,"snapToScene",null);e.__decorate([g.property({constructOnly:!0})],a.GraphicTransformTool.prototype,"snappingManager",void 0);e.__decorate([g.property({readOnly:!0})],a.GraphicTransformTool.prototype,"type",void 0);e.__decorate([g.property({readOnly:!0})],a.GraphicTransformTool.prototype,"updating",null);a.GraphicTransformTool=e.__decorate([B.subclass("esri.views.3d.interactive.editingTools.graphicTransform3D.GraphicTransformTool")],a.GraphicTransformTool);Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/GraphicScaleRotateTransform":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Cyclical ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../../../../../core/scheduling ../../../../../core/screenUtils ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/plane ../../../../../geometry/support/ray ../../../../../geometry/support/vectorStacks ../../../../../support/elevationInfoUtils ../../Manipulator3D ../../manipulatorUtils ../../RenderObject ../dragEventPipeline3D ../ManipulatorType ../settings ../manipulations/config ../../../webgl-engine/lib/basicInterfaces ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Material ../../../webgl-engine/materials/ColorMaterial ../../../../interactive/dragEventPipeline ../../../../interactive/interfaces ../../../../interactive/tooltip/Tooltip ../../../../interactive/tooltip/TransformTooltipInfos ../../../../support/colorUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G,z,A,K,J,H,L,E,M){function N(oa,ua){var V=B.subtract(l.sv3d.get(),ua.renderStart,oa.origin);oa=B.subtract(l.sv3d.get(),ua.renderEnd,oa.origin);V=B.length(V);oa=B.length(oa);return 0===V?0:oa/V}function T(oa,ua,V,ha){const {renderStart:da,renderEnd:R}=oa;var ca=Y(da,ha,l.sv3d.get());oa=Y(R,ha,l.sv3d.get());if(B.squaredDistance(ca,oa)<I.DRAG_THRESHOLD_PX*I.DRAG_THRESHOLD_PX)return null;const sa=B.subtract(l.sv3d.get(),da,V);ua=B.cross(l.sv3d.get(),
sa,b.normal(ua));ua=B.add(l.sv3d.get(),da,ua);V=Y(V,ha,l.sv3d.get());ha=Y(ua,ha,l.sv3d.get());ua=B.subtract(l.sv3d.get(),ha,ca);ha=B.subtract(l.sv3d.get(),ca,V);ca=d.wrap(ca,ua);ha=d.wrap(V,ha);return d.distance2(ca,oa)<d.distance2(ha,oa)?"rotate":"scale"}function Y(oa,ua,V){ua.projectToScreen(oa,ta);return B.set(V,ta[0],ta[1],0)}function U(oa,ua){let V=null,ha=1;const da=()=>ha;return{start:()=>{ha=oa.getScale();V=oa.getScale;oa.getScale=da;ua()},update:R=>{ha+=((ha+1)/2-ha)*Math.min(R*I.RING_RESET_ANIMATION_SPEED_FACTOR,
1);ua();return.01>Math.abs(ha-1)?za.STOP:za.CONTINUE},destroy:()=>{V&&(oa.getScale=V);ua()}}}function ja(oa,ua,V){let ha=0,da=null;const R=()=>!1;return{start:()=>{da=oa.getFocused;oa.getFocused=R;ha=0;ua()},update:ca=>{ha+=ca;return!da?.()||ha>=V.delayMs?za.STOP:za.CONTINUE},destroy:()=>{da&&(oa.getFocused=da);ua()}}}function ra(oa){switch(oa){case "integer":case "long":return 0;default:return null}}var qa;(function(oa){oa.ScaleIn=H.ManipulatorStateCustomFlags.Custom2;oa.ScaleOut=H.ManipulatorStateCustomFlags.Custom3;
oa.RotateLeft=H.ManipulatorStateCustomFlags.Custom4;oa.RotateRight=H.ManipulatorStateCustomFlags.Custom5;oa.Unlocked=H.ManipulatorStateCustomFlags.Custom7;oa.DelayedFocused=H.ManipulatorStateCustomFlags.Custom8;oa.TouchInput=H.ManipulatorStateCustomFlags.Custom12})(qa||(qa={}));let pa=function(){function oa({adapter:V,tooltipOptions:ha,mode:da,tool:R}){this._mode=null;this._handles=new m;this._activeAnimation=this._scaleRotateDragData=null;this._ringIndicatorDelayMs=I.RING_INDICATOR_DELAY_MS;this.events=
new x;this.getFocused=()=>this._ringManipulator.focused;this.getScale=()=>"scale"===this._scaleRotateDragData?.mode?this._adapter.scale:1;this.tool=R;this._mode=da;this._adapter=V;this._tooltipOptions=ha;this._tooltip=new L.Tooltip({view:R.view});this._createManipulator();this._updateDragState();this._updateManipulatorTransform();this._handles.add(f.when(()=>!this._tooltipOptions.enabled,()=>this._tooltip.clear(),f.initial))}var ua=oa.prototype;ua.destroy=function(){this._activeAnimation?.frameTask.remove();
this._activeAnimation=null;this._handles=n.destroyMaybe(this._handles);this.tool.manipulators.remove(this._ringManipulator);this._ringManipulator=null;this._tooltip=n.destroyMaybe(this._tooltip)};ua.startAnimation=function(V){this.cancelActiveAnimation();V.start();const ha=g.addFrameTask({update:({deltaTime:da})=>{V.update(da)&&this.cancelActiveAnimation()}});this._activeAnimation={...V,frameTask:ha}};ua.cancelActiveAnimation=function(){this._activeAnimation?.frameTask.remove();this._activeAnimation=
n.destroyMaybe(this._activeAnimation)};ua.forEachManipulator=function(V){V(this._ringManipulator,D.ManipulatorType.SCALE_ROTATE)};ua._createManipulator=function(){const V=this._createRingManipulator();this._ringManipulator=V;this.tool.manipulators.add(V);const ha=this.tool.graphicState.graphic,da=J.createManipulatorDragEventPipeline(V,(R,ca,sa)=>{this._scaleRotateDragData=null;const xa=this._adapter.startInteraction(),ma={mode:"none",origin:u.clone(R.renderLocation),initialAngle:this._adapter.angle,
angle:0,angleDir:0,scaleDir:0};this._scaleRotateDragData=ma;this._updateDragState();const Aa=l.sv3d.get();this.tool.view.renderCoordsHelper.worldUpAtPosition(R.renderLocation,Aa);ca.next(C.screenToRenderPlane(this.tool.view,b.fromPositionAndNormal(R.renderLocation,Aa,b.create()))).next(O=>{var W=b.normal(O.plane);W=y.calculateInputRotationTransform(O.renderStart,O.renderEnd,ma.origin,W);var fa=e.cyclicalPI.shortestSignedDiff(ma.angle,W);ma.angleDir=p.clamp(ma.angleDir+fa,-I.ROTATE_INDICATOR_DIRECTION_BUFFER,
I.ROTATE_INDICATOR_DIRECTION_BUFFER);ma.angle=W;fa=N(ma,O);ma.scaleDir=p.clamp(ma.scaleDir+(fa-this._adapter.scale),-I.SCALE_INDICATOR_DIRECTION_BUFFER,I.SCALE_INDICATOR_DIRECTION_BUFFER);this._onScaleChanged();if("none"===ma.mode){const aa=this._mode||T(O,O.plane,ma.origin,this.tool.view.state.camera);if(null!=aa){switch(aa){case "rotate":this.tool.emit("graphic-rotate-start",{graphic:ha,angle:0});this.tool.emit("record-undo",{record:this._adapter.createUndoRecord()});break;case "scale":this.tool.emit("graphic-scale-start",
{graphic:ha,xScale:1,yScale:1}),this.tool.emit("record-undo",{record:this._adapter.createUndoRecord()})}ma.mode=aa}}switch(ma.mode){case "rotate":xa.state.angle=ma.initialAngle+W;break;case "scale":xa.state.scale=fa,this._onScaleChanged()}this._updateDragState();this._updateManipulatorTransform();switch(O.action){case "start":case "update":switch(ma.mode){case "rotate":this.tool.emit("graphic-rotate",{graphic:ha,angle:p.rad2deg(ma.angle)});break;case "scale":this.tool.emit("graphic-scale",{graphic:ha,
xScale:fa,yScale:fa})}break;case "end":switch(ma.mode){case "rotate":this.tool.emit("graphic-rotate-stop",{graphic:ha,angle:p.rad2deg(ma.angle)});break;case "scale":this.tool.emit("graphic-scale-stop",{graphic:ha,xScale:fa,yScale:fa})}}"end"===O.action&&(this.startAnimation(U(this,()=>this._onScaleChanged())),this._scaleRotateDragData=null,this._updateDragState(),xa.done());return O}).next(this._updateTooltipPipelineStep(ma));sa.next(()=>{xa.cancel();if(null!=this._scaleRotateDragData){switch(this._scaleRotateDragData.mode){case "rotate":this.tool.emit("graphic-rotate-stop",
{graphic:ha,angle:0});break;case "scale":this.tool.emit("graphic-scale-stop",{graphic:ha,xScale:1,yScale:1})}this.startAnimation(U(this,()=>this._onScaleChanged()));this._scaleRotateDragData=null;this._updateDragState()}this._updateFocusTooltip()})});this._handles.add([da,V.events.on("focus-changed",R=>{"focus"===R.action?this.startAnimation(ja(this,()=>this._updateDelayedFocusedState(),{delayMs:this._ringIndicatorDelayMs})):this._updateDelayedFocusedState()}),V.events.on("immediate-click",R=>{R.stopPropagation()}),
f.watch(()=>this.tool.graphicState?.displaying,R=>this._ringManipulator.available=R,f.initial)])};ua._updateTooltipPipelineStep=function(V){return ha=>{const da=this._tooltipOptions;if(!da.enabled)return ha;if("end"===ha.action)return this._updateFocusTooltip(),ha;const R=this._tooltip;var ca=this._tooltipOptions.visualVariables;switch(V.mode){case "scale":const {size:sa,scale:xa}=this._adapter;ca=ca?.size;R.info=new E.TransformScaleTooltipInfo({tooltipOptions:da,scale:{value:xa},size:null!=sa?k.createLength(sa,
"meters"):void 0,sizePrecision:ra(ca?.valueType),sizeUnit:ca?.unit});break;case "rotate":const {orientationClockwise:ma,relativeAngleClockwise:Aa}=this._adapter;ca=ca?.rotation;const O=ra(ca?.valueType);R.info=new E.TransformRotateTooltipInfo({tooltipOptions:da,rotation:null!=Aa?k.createAngle(Aa,"radians","geographic"):void 0,rotationPrecision:O,rotationType:ca?.rotationType??"geographic",orientation:null!=ma?k.createAngle(ma,"radians","geographic"):void 0,orientationPrecision:O})}return ha}};ua._updateFocusTooltip=
function(){if(this._tooltipOptions.enabled)if(this.getFocused()){var V=this._tooltipOptions.visualVariables;const ha=V?.rotation;V=V?.size;const da=this._mode,{size:R,orientationClockwise:ca}=this._adapter,sa=null!=R&&(null==da||"scale"===da);this._tooltip.info=new E.TransformAbsoluteTooltipInfo({tooltipOptions:this._tooltipOptions,orientation:null==ca||null!=da&&"rotate"!==da?void 0:k.createAngle(ca,"radians","geographic"),orientationPrecision:ra(ha?.valueType),rotationType:ha?.rotationType??"geographic",
size:sa?k.createLength(R,"meters"):void 0,sizeUnit:V?.unit,sizePrecision:ra(V?.valueType)})}else this._tooltip.clear()};ua._onScaleChanged=function(){this.events.emit("scale-changed");this._updateManipulatorTransform()};ua._updateDelayedFocusedState=function(){this._ringManipulator.updateStateEnabled(qa.DelayedFocused,this.getFocused());this._updateFocusTooltip()};ua._updateDragState=function(){this._ringManipulator.updateStateEnabled(qa.Unlocked,!(null!=this._scaleRotateDragData&&"none"!==this._scaleRotateDragData?.mode));
if(null!=this._scaleRotateDragData)switch(this._scaleRotateDragData.mode){case "rotate":this._ringManipulator.updateStateEnabled(qa.ScaleIn|qa.ScaleOut,!1);this._ringManipulator.updateStateEnabled(qa.RotateLeft,0>this._scaleRotateDragData.angleDir);this._ringManipulator.updateStateEnabled(qa.RotateRight,0<=this._scaleRotateDragData.angleDir);break;case "scale":this._ringManipulator.updateStateEnabled(qa.RotateLeft|qa.RotateRight,!1),this._ringManipulator.updateStateEnabled(qa.ScaleIn,0>this._scaleRotateDragData.scaleDir),
this._ringManipulator.updateStateEnabled(qa.ScaleOut,0<=this._scaleRotateDragData.scaleDir)}else this._ringManipulator.updateStateEnabled(qa.ScaleIn|qa.ScaleOut|qa.RotateLeft|qa.RotateRight,!1)};ua._updateManipulatorTransform=function(){const V=c.fromRotation(l.sm4d.get(),this._adapter.angle,u.fromValues(0,0,1));if(null!=V){var ha=this.getScale();ha=c.fromScaling(l.sm4d.get(),B.set(l.sv3d.get(),ha,ha,ha));this._ringManipulator.modelTransform=c.multiply(l.sm4d.get(),ha,V)}};ua._createRingManipulator=
function(){var V=(ea,na,ya)=>{const Ba=[],Ca=Math.ceil(I.GEOMETRY_SEGMENTS*(na-ea)/(2*Math.PI));for(let wa=0;wa<Ca+1;wa++){const P=ea+wa*(na-ea)/Ca;Ba.push(u.fromValues(ya*Math.cos(P),ya*Math.sin(P),0))}return Ba};const ha=this._createMaterial(1);var da=(ea,na,ya=ha)=>z.createPathExtrusionGeometry(ya,[[-na/2,0],[na/2,0],[na/2,I.RING_HEIGHT/2],[-na/2,I.RING_HEIGHT/2]],ea,[],[],!1),R=V(0,2*Math.PI,I.RING_RADIUS),ca=da(R,I.RING_THICKNESS),sa=[],xa=[];const ma=[];for(var Aa=0;2>Aa;Aa++){var O=Aa*Math.PI-
Math.PI/4,W=Math.PI/2-I.ROTATE_INDICATOR_ARC_LENGTH,fa=O+W;O=O+Math.PI/2-W;W=V(fa,O,I.INNER_INDICATOR_RADIUS);var aa=da(W,I.INDICATOR_THICKNESS);ma.push(W);ma.push(V(fa,O,I.OUTER_INDICATOR_RADIUS-I.RING_THICKNESS/2));sa.push(aa);xa.push(aa.instantiate());for(aa=0;2>aa;aa++){var Q=0===aa,Z=w.create();if(Q){c.scale(Z,Z,[1,-1,1]);c.rotate(Z,Z,-fa,[0,0,1]);var ka=Math.round(I.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE*(W.length-1));Z[12]=W[ka][0];Z[13]=W[ka][1];Z[14]=W[ka][2]}else c.rotate(Z,Z,O,[0,
0,1]),ka=Math.round((1-I.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE)*(W.length-1)),Z[12]=W[ka][0],Z[13]=W[ka][1],Z[14]=W[ka][2];ka=z.createExtrudedTriangle(ha,I.ROTATE_INDICATOR_ARROW_TIP_LENGTH,0,I.ROTATE_INDICATOR_ARROW_TIP_RADIUS,I.RING_HEIGHT);z.transformInPlace(ka,Z);(Q?sa:xa).push(ka)}}Aa=[];for(fa=0;2>fa;fa++)O=fa*Math.PI-Math.PI/4,W=Math.PI/2-I.SCALE_INDICATOR_ARC_LENGTH,O=V(O+W,O+Math.PI/2-W,I.OUTER_INDICATOR_RADIUS),Aa.push(da(O,I.INDICATOR_THICKNESS));Q=this._createMaterial(.66);fa=this._createMaterial(.5);
W=this._createMaterial(.33);O=V(0,2*Math.PI,I.RING_RADIUS+I.SCALE_INDICATOR_OFFSET1);aa=V(0,2*Math.PI,I.RING_RADIUS+I.SCALE_INDICATOR_OFFSET2);O=da(O,I.INDICATOR_THICKNESS,Q);aa=da(aa,I.INDICATOR_THICKNESS,W);Z=V(0,2*Math.PI,I.RING_RADIUS-I.SCALE_INDICATOR_OFFSET1);V=V(0,2*Math.PI,I.RING_RADIUS-I.SCALE_INDICATOR_OFFSET2);Q=da(Z,I.INDICATOR_THICKNESS,Q);da=da(V,I.INDICATOR_THICKNESS,W);ca=[new q.RenderObject(ca,qa.DelayedFocused),new q.RenderObject(ca.instantiate({material:fa}),H.ManipulatorStateFlags.None)];
this._mode&&"scale"!==this._mode||(ca=ca.concat([...Aa.map(ea=>new q.RenderObject(ea,qa.DelayedFocused|qa.Unlocked)),new q.RenderObject(O,qa.DelayedFocused|qa.ScaleIn),new q.RenderObject(aa,qa.DelayedFocused|qa.ScaleIn),new q.RenderObject(Q,qa.DelayedFocused|qa.ScaleOut),new q.RenderObject(da,qa.DelayedFocused|qa.ScaleOut)]));this._mode&&"rotate"!==this._mode||(ca=ca.concat([...xa.map(ea=>new q.RenderObject(ea.instantiate(),qa.DelayedFocused|qa.Unlocked)),...sa.map(ea=>new q.RenderObject(ea,qa.DelayedFocused|
qa.RotateLeft)),...xa.map(ea=>new q.RenderObject(ea,qa.DelayedFocused|qa.RotateRight))]));R=[R,...ma];return new t.Manipulator3D({view:this.tool.view,renderObjects:ca,autoScaleRenderObjects:!1,worldOriented:!0,radius:I.RING_THICKNESS,focusMultiplier:1,touchMultiplier:1.5,elevationInfo:h.getGraphicEffectiveElevationInfo(this.tool.graphicState.graphic),collisionType:{type:"ribbon",paths:R,direction:u.fromValues(0,0,1)}})};ua._createMaterial=function(V){const ha=F.getSettings(this.tool.view).colors.accent.clone();
ha.a=V;return new K.ColorMaterial({color:M.unitRGBAFromColor(ha),transparent:1!==V,cullFace:G.CullFaceOptions.Back,renderOccluded:A.RenderOccludedFlag.Transparent})};r._createClass(oa,[{key:"angle",get:function(){return this._adapter.angle}},{key:"scale",get:function(){return this._adapter.scale}},{key:"location",set:function(V){this._ringManipulator.location=V}},{key:"elevationAlignedLocation",set:function(V){this._ringManipulator.elevationAlignedLocation=V}},{key:"grabbing",get:function(){return this._ringManipulator.grabbing}},
{key:"interactive",set:function(V){this._ringManipulator.interactive=V}},{key:"test",get:function(){return{ringManipulator:this._ringManipulator,setRingIndicatorDelayMs:V=>this._ringIndicatorDelayMs=V,tooltip:this._tooltip}}}]);return oa}();var za;(function(oa){oa[oa.CONTINUE=0]="CONTINUE";oa[oa.STOP=1]="STOP"})(za||(za={}));const ta=v.createScreenPointArray();a.GraphicScaleRotateTransform=pa;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/TransformTooltipInfos":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./SketchTooltipInfo".split(" "),
function(a,r,e,x,m,p,n,k,f){a.TransformRotateTooltipInfo=function(g){function v(c){c=g.call(this,c)||this;c.type="transform-rotate";c.rotation=null;c.rotationPrecision=null;c.orientation=null;c.orientationPrecision=null;c.rotationType="geographic";return c}r._inherits(v,g);return r._createClass(v)}(f.SketchTooltipInfo);e.__decorate([x.property()],a.TransformRotateTooltipInfo.prototype,"type",void 0);e.__decorate([x.property()],a.TransformRotateTooltipInfo.prototype,"rotation",void 0);e.__decorate([x.property()],
a.TransformRotateTooltipInfo.prototype,"rotationPrecision",void 0);e.__decorate([x.property()],a.TransformRotateTooltipInfo.prototype,"orientation",void 0);e.__decorate([x.property()],a.TransformRotateTooltipInfo.prototype,"orientationPrecision",void 0);e.__decorate([x.property()],a.TransformRotateTooltipInfo.prototype,"rotationType",void 0);a.TransformRotateTooltipInfo=e.__decorate([k.subclass("esri.views.interactive.tooltip.TransformRotateTooltipInfo")],a.TransformRotateTooltipInfo);a.TransformScaleTooltipInfo=
function(g){function v(c){c=g.call(this,c)||this;c.type="transform-scale";c.size=null;c.sizeUnit=null;c.sizePrecision=null;return c}r._inherits(v,g);return r._createClass(v)}(f.SketchTooltipInfo);e.__decorate([x.property()],a.TransformScaleTooltipInfo.prototype,"type",void 0);e.__decorate([x.property()],a.TransformScaleTooltipInfo.prototype,"scale",void 0);e.__decorate([x.property()],a.TransformScaleTooltipInfo.prototype,"size",void 0);e.__decorate([x.property()],a.TransformScaleTooltipInfo.prototype,
"sizeUnit",void 0);e.__decorate([x.property()],a.TransformScaleTooltipInfo.prototype,"sizePrecision",void 0);a.TransformScaleTooltipInfo=e.__decorate([k.subclass("esri.views.interactive.tooltip.TransformScaleTooltipInfo")],a.TransformScaleTooltipInfo);a.TransformAbsoluteTooltipInfo=function(g){function v(c){c=g.call(this,c)||this;c.type="transform-absolute";c.orientation=null;c.orientationPrecision=null;c.rotationType="geographic";c.size=null;c.sizePrecision=null;c.sizeUnit=null;return c}r._inherits(v,
g);return r._createClass(v)}(f.SketchTooltipInfo);e.__decorate([x.property()],a.TransformAbsoluteTooltipInfo.prototype,"type",void 0);e.__decorate([x.property()],a.TransformAbsoluteTooltipInfo.prototype,"orientation",void 0);e.__decorate([x.property()],a.TransformAbsoluteTooltipInfo.prototype,"orientationPrecision",void 0);e.__decorate([x.property()],a.TransformAbsoluteTooltipInfo.prototype,"rotationType",void 0);e.__decorate([x.property()],a.TransformAbsoluteTooltipInfo.prototype,"size",void 0);
e.__decorate([x.property()],a.TransformAbsoluteTooltipInfo.prototype,"sizePrecision",void 0);e.__decorate([x.property()],a.TransformAbsoluteTooltipInfo.prototype,"sizeUnit",void 0);a.TransformAbsoluteTooltipInfo=e.__decorate([k.subclass("esri.views.interactive.tooltip.TransformAbsoluteTooltipInfo")],a.TransformAbsoluteTooltipInfo);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/ScaleRotateMeshAdapter":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/mathUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/vec3 ../../../../../geometry/support/axisAngleDegrees ../../../../../geometry/support/MeshTransform ../../../../ViewingMode ./undoRecords".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d){a.ScaleRotateMeshAdapter=function(t){function y(C){C=t.call(this,C)||this;C._interactionState=null;return C}r._inherits(y,t);var q=y.prototype;q.initialize=function(){this.addHandles([n.when(()=>{const C=this._interactionState;return C&&C.angle!==C.previousAngle?{interactionState:C,angle:C.state.angle}:null},({interactionState:C})=>{this._updateMeshRotation(C)},n.sync),n.when(()=>{const C=this._interactionState;return C&&C.scale!==C.previousScale?{interactionState:C,
scale:C.state.scale}:null},({interactionState:C})=>{this._updateMeshSize(C)},n.sync)])};q.startInteraction=function(){const C=new l({angle:this.angle});this._interactionState=C;const D=()=>{this._interactionState=null};return{state:C,done:D,cancel:()=>{C.cancel();D()}}};q.createUndoRecord=function(){return d.createGraphicGeometryUndoRecord(this.graphic)};q._updateMeshRotation=function(C){const {angle:D,previousAngle:F}=C;C.previousAngle=D;var {geometry:I}=this;const {vertexSpace:G}=I;C=p.rad2deg(D-
F);G.isGeoreferenced?(this.geometry.rotate(0,0,C,{origin:this.geometry.anchor,geographic:!G.isRelative&&this.viewingMode===b.ViewingMode.Global}),this.graphic.notifyGeometryChanged()):(I.transform??(I.transform=new u),{transform:I}=I,C=B.composeAxes(0,0,C,h),I.rotation=B.compose(I.rotation,C,I.rotation),this.graphic.notifyMeshTransformChanged())};q._updateMeshSize=function(C){const {scale:D,previousScale:F}=C;C.previousScale=D;var {geometry:I}=this;const {vertexSpace:G}=I;C=D/F;G.isGeoreferenced?
(this.geometry.scale(C,{origin:this.geometry.anchor,geographic:!G.isRelative&&this.viewingMode===b.ViewingMode.Global}),this.graphic.notifyGeometryChanged()):(I.transform??(I.transform=new u),{transform:I}=I,I.scale=w.scale(I.scale,I.scale,C),this.graphic.notifyMeshTransformChanged())};r._createClass(y,[{key:"initialAngle",get:function(){return this._interactionState?.initialAngle??0}},{key:"angle",get:function(){const C=this.geometry.transform;if(null==C)return this._interactionState?.angle??0;const D=
B.axis(C.rotation)[2];return.999999<Math.abs(D)?p.deg2rad(B.angle(C.rotation))*Math.sign(D):0}},{key:"angleClockwise",get:function(){return-this.angle}},{key:"relativeAngle",get:function(){return this.angle-this.initialAngle}},{key:"relativeAngleClockwise",get:function(){return-this.relativeAngle}},{key:"scale",get:function(){return this._interactionState?.scale??1}}]);return y}(m.HandleOwner);e.__decorate([k.property({constructOnly:!0})],a.ScaleRotateMeshAdapter.prototype,"graphic",void 0);e.__decorate([k.property({constructOnly:!0})],
a.ScaleRotateMeshAdapter.prototype,"geometry",void 0);e.__decorate([k.property({constructOnly:!0})],a.ScaleRotateMeshAdapter.prototype,"viewingMode",void 0);e.__decorate([k.property()],a.ScaleRotateMeshAdapter.prototype,"initialAngle",null);e.__decorate([k.property()],a.ScaleRotateMeshAdapter.prototype,"angle",null);e.__decorate([k.property()],a.ScaleRotateMeshAdapter.prototype,"angleClockwise",null);e.__decorate([k.property()],a.ScaleRotateMeshAdapter.prototype,"relativeAngle",null);e.__decorate([k.property()],
a.ScaleRotateMeshAdapter.prototype,"relativeAngleClockwise",null);e.__decorate([k.property()],a.ScaleRotateMeshAdapter.prototype,"scale",null);e.__decorate([k.property()],a.ScaleRotateMeshAdapter.prototype,"_interactionState",void 0);a.ScaleRotateMeshAdapter=e.__decorate([c.subclass("esri.views.3d.interactive.editingTools.transformGraphic.ScaleRotateMeshAdapter")],a.ScaleRotateMeshAdapter);let l=function(t){function y(q){var C=t.call(this,q)||this;C.angle=0;C.initialAngle=0;C.previousAngle=0;C.previousScale=
1;C.scale=1;C.initialAngle=q.angle;C.previousAngle=q.angle;return C}r._inherits(y,t);y.prototype.cancel=function(){this.angle=this.initialAngle;this.scale=1};r._createClass(y,[{key:"state",get:function(){const {angle:q,scale:C}=this;return{angle:q,scale:C}}}]);return y}(x);e.__decorate([k.property()],l.prototype,"angle",void 0);e.__decorate([k.property()],l.prototype,"initialAngle",void 0);e.__decorate([k.property()],l.prototype,"previousAngle",void 0);e.__decorate([k.property()],l.prototype,"previousScale",
void 0);e.__decorate([k.property()],l.prototype,"scale",void 0);e.__decorate([k.property()],l.prototype,"state",null);l=e.__decorate([c.subclass("InteractionState")],l);const h=B.create();Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/undoRecords":function(){define(["exports","../../../../../chunks/vec3f64"],function(a,r){function e(p){let n=p.geometry,k=null;return{undo(f){k=f.geometry;f.geometry=n},redo(f){n=f.geometry;f.geometry=
k}}}function x(p,n,k){let f=n?.clone(),g=r.clone(k.origin),v=null,c=null;return{undo:w=>{v=p.transform?.clone();c=r.clone(k.origin);p.transform=f;p.vertexSpace.origin=g;w.notifyMeshTransformChanged()},redo:w=>{f=p.transform?.clone();g=r.clone(k.origin);p.transform=v;p.vertexSpace.origin=c;w.notifyMeshTransformChanged()}}}function m(p){let n=p.vertexAttributes.clonePositional(),k;return{undo:f=>{k=p.vertexAttributes.clonePositional();p.vertexAttributes=n;f.notifyGeometryChanged()},redo:f=>{n=p.vertexAttributes.clonePositional();
p.vertexAttributes=k;f.notifyGeometryChanged()}}}a.createGraphicGeometryUndoRecord=function(p){null!=p.geometry&&"mesh"===p.geometry.type?(p=p.geometry,p=p.vertexSpace.isRelative?x(p,p.transform,p.vertexSpace):m(p)):p=e(p);return p};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/ScaleRotateObjectSymbol3DAdapter":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/mathUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c){function w(b){return-p.deg2rad(b)}a.ScaleRotateObjectSymbol3DAdapter=function(b){function d(h){h=b.call(this,h)||this;h.sizeAxis=null;h._interactionState=null;return h}r._inherits(d,b);var l=d.prototype;l.initialize=function(){this.addHandles(n.when(()=>null!=this._interactionState?this._interactionState.state:null,h=>{this._updateSymbol(h)},n.sync))};l.startInteraction=function(){const h=this._graphicSymbol,t=this.findLayerView();if(null!=this._interactionState||
null==h||null==t)return B;var y=h.symbolLayers.map(D=>"object"===D.type?t.getSymbolLayerSize(h,D):null).toArray();const q=h.clone();this._interactionState=y=new u({originalSymbol:q,angle:this.angle,initialSizes:y});const C=()=>{this._interactionState=null};return{state:y,done:C,cancel:()=>{this._graphicSymbol=q;C()}}};l.createUndoRecord=function(){let h=this.graphic.symbol,t=null;return{undo:y=>{t=y.symbol;y.symbol=h},redo:y=>{h=y.symbol;y.symbol=t}}};l._updateSymbol=function({scale:h,angle:t,originalSymbol:y,
initialSizes:q}){var C=this._graphicSymbol;if(null!=C&&"point-3d"===C.type){C=C.clone();var D=-p.rad2deg(t-this.initialAngle),F=!1;this._forEachObjectSymbolLayerPair(y,C,(I,G,z)=>{I=(I.heading??0)+D;G.heading!==I&&(G.heading=I,F=!0);z=q[z];null!=z&&"width"in z&&(z.width=this.sizeFilter(z.width),z.height=this.sizeFilter(z.height),z.depth=this.sizeFilter(z.depth),I=z.width*h,G.width!==I&&(G.width=I,F=!0),I=z.depth*h,G.depth!==I&&(G.depth=I,F=!0),z=z.height*h,G.height!==z&&(G.height=z,F=!0))});F&&(this._graphicSymbol=
C)}};l._forEachObjectSymbolLayerPair=function(h,t,y){h.symbolLayers.forEach((q,C)=>{const D=t.symbolLayers.at(C);"object"===q.type&&"object"===D.type&&y(q,D,C)})};r._createClass(d,[{key:"initialAngle",get:function(){return this._interactionState?.initialAngle??0}},{key:"angle",get:function(){return null!=this._interactionState?this._interactionState.angle:null!=this._orientationReferenceSymbolLayer?w(this._orientationReferenceSymbolLayer.heading??0):0}},{key:"angleClockwise",get:function(){return-this.angle}},
{key:"orientation",get:function(){return this.angle}},{key:"orientationClockwise",get:function(){return this.angleClockwise}},{key:"relativeAngle",get:function(){return this.angle-this.initialAngle}},{key:"relativeAngleClockwise",get:function(){return-this.relativeAngle}},{key:"scale",get:function(){return this._interactionState?.scale??1}},{key:"size",get:function(){const h=this._sizeReferenceSymbolLayer;if(null==h)return null;var t=this.findLayerView(),y=this._graphicSymbol;if(null==t||null==y||
"point-3d"!==y.type)return null;t=t.getSymbolLayerSize(y,h);if("size"in t&&null!=t.size)return t.size;y=this.sizeAxis;return"width"in t&&null!=t.width&&(null==y||"width"===y||"all"===y||"width-and-depth"===y)?t.width:"depth"in t&&null!=h.depth&&(null==y||"depth"===y||"all"===y||"width-and-depth"===y)?t.depth:"height"in t&&null!=h.height&&(null==y||"height"===y||"all"===y)?t.height:null}},{key:"_sizeReferenceSymbolLayer",get:function(){const h=this._graphicSymbol;return null==h||0===h.symbolLayers.length?
null:h.symbolLayers.find(t=>"object"===t.type)}},{key:"_orientationReferenceSymbolLayer",get:function(){const h=this._graphicSymbol;return null==h||0===h.symbolLayers.length?null:h.symbolLayers.find(t=>"object"===t.type&&null!=t.heading)}},{key:"_graphicSymbol",get:function(){return null!=this.graphic&&null!=this.graphic.symbol&&"point-3d"===this.graphic.symbol.type?this.graphic.symbol:null},set:function(h){this.graphic.symbol=h}}]);return d}(m.HandleOwner);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,
"initialAngle",null);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,"angle",null);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,"angleClockwise",null);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,"orientation",null);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,"orientationClockwise",null);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,"relativeAngle",null);e.__decorate([k.property()],
a.ScaleRotateObjectSymbol3DAdapter.prototype,"relativeAngleClockwise",null);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,"scale",null);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,"size",null);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,"sizeAxis",void 0);e.__decorate([k.property({constructOnly:!0})],a.ScaleRotateObjectSymbol3DAdapter.prototype,"graphic",void 0);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,
"_interactionState",void 0);e.__decorate([k.property({constructOnly:!0})],a.ScaleRotateObjectSymbol3DAdapter.prototype,"findLayerView",void 0);e.__decorate([k.property({constructOnly:!0})],a.ScaleRotateObjectSymbol3DAdapter.prototype,"sizeFilter",void 0);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,"_sizeReferenceSymbolLayer",null);e.__decorate([k.property()],a.ScaleRotateObjectSymbol3DAdapter.prototype,"_orientationReferenceSymbolLayer",null);e.__decorate([k.property()],
a.ScaleRotateObjectSymbol3DAdapter.prototype,"_graphicSymbol",null);a.ScaleRotateObjectSymbol3DAdapter=e.__decorate([c.subclass("esri.views.3d.interactive.editingTools.transformGraphic.ScaleRotateObjectSymbol3DAdapter")],a.ScaleRotateObjectSymbol3DAdapter);const B={state:{angle:0,scale:0},done:()=>{},cancel:()=>{}};let u=function(b){function d(l){var h=b.call(this,l)||this;h.angle=0;h.initialAngle=0;h.scale=1;h.initialAngle=l.angle;return h}r._inherits(d,b);r._createClass(d,[{key:"state",get:function(){const {originalSymbol:l,
angle:h,initialAngle:t,scale:y,initialSizes:q}=this;return{originalSymbol:l,angle:h,initialAngle:t,scale:y,initialSizes:q}}}]);return d}(x);e.__decorate([k.property()],u.prototype,"originalSymbol",void 0);e.__decorate([k.property()],u.prototype,"angle",void 0);e.__decorate([k.property()],u.prototype,"initialAngle",void 0);e.__decorate([k.property()],u.prototype,"initialSizes",void 0);e.__decorate([k.property()],u.prototype,"scale",void 0);e.__decorate([k.property()],u.prototype,"state",null);u=e.__decorate([c.subclass("InteractionState")],
u);a.headingToAngle=w;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/ExtentTransformTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/mathUtils ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../../../../../core/screenUtils ../../../../../core/unitUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/mat4 ../../../../../chunks/vec2 ../../../../../chunks/vec2f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/aaBoundingRect ../../../../../chunks/boundedPlane ../../../../../geometry/support/plane ../../../../../geometry/support/ray ../../../../../geometry/support/vectorStacks ../../../../../support/elevationInfoUtils ../../../analysis/Slice/sliceToolUtils ../../../analysis/Slice/images/Factory ../../Manipulator3D ../../manipulatorUtils ../dragEventPipeline3D ../ManipulatorType ../manipulatorUtils ../settings ../visualElementUtils ../manipulations/MoveManipulation ../manipulations/MoveXYGraphicManipulation ./PreserveAspectRatio ../../visualElements/OutlineVisualElement ../../../layers/graphics/elevationAlignmentUtils ../../../layers/graphics/ElevationContext ../../../layers/graphics/GraphicState ../../../support/geometryUtils/ray ../../../../interactive/dragEventPipeline ../../../../interactive/InteractiveToolBase ../../../../interactive/editGeometry/EditGeometryOperations ../../../../interactive/editGeometry/interfaces ../../../../interactive/editGeometry/operations/UpdateVertices ../../../../interactive/editGeometry/support/editPlaneUtils ../../../../interactive/sketch/SketchTooltipOptions ../../../../interactive/tooltip/ExtentTooltipInfos ../../../../interactive/tooltip/Tooltip ../../../../interactive/tooltip/TranslateTooltipInfos ../../../../support/automaticLengthMeasurementUtils ../../../../support/colorUtils ../../../../support/euclideanLengthMeasurementUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G,z,A,K,J,H,L,E,M,N,T,Y,U,ja,ra,qa,pa,za,ta,oa,ua,V,ha,da,R,ca,sa,xa,ma,Aa,O){a.ExtentTransformTool=function(W){function fa(Q){Q=W.call(this,Q)||this;Q.enableZ=!0;Q.enableRotation=!0;Q.enableScaling=!0;Q.tooltipOptions=new R;Q._preserveAspectRatio=new U.PreserveAspectRatio;Q.grabbing=!1;Q.inputState=null;Q.type="transform-3d";Q._handles=new m;Q._attachmentOrigin=null;Q._outlineVisualElement=null;Q._mapBounds=C.create();Q._mapBoundsStart=
C.create();Q._zmax=0;Q._sizeStart=null;Q._displayBounds=C.create();Q._displayBoundsStart=C.create();Q._displayBoundsMarginStart=0;Q._resizeHandles=[{direction:[1,0]},{direction:[1,1]},{direction:[0,1]},{direction:[-1,1]},{direction:[-1,0]},{direction:[-1,-1]},{direction:[0,-1]},{direction:[1,-1]}];Q._moveXYTooltipInfo=null;Q._moveZTooltipInfo=null;Q._rotateTooltipInfo=null;Q._scaleTooltipInfo=null;Q._startAngle=0;Q._endAngle=0;Q._startScale=h.create();Q._endScale=h.create();return Q}r._inherits(fa,
W);var aa=fa.prototype;aa.initialize=function(){const {view:Q,graphic:Z,manipulators:ka,_handles:ea}=this,na=M.getSettings(Q).colors,ya=this._graphicState=new pa.GraphicState({graphic:Z});this._editGeometryOperations=ua.EditGeometryOperations.fromGeometry(Z.geometry,Q.state.viewingMode);this._graphicMoveManipulation=new Y.MoveXYGraphicManipulation({tool:this,view:Q,graphicState:ya});this._moveZManipulator=z.createShiftManipulator(Q,{offsetMode:z.OffsetMode.CENTER_ON_CALLOUT,calloutColor:na.accent,
color:na.contrast,outlineColor:na.accent});this._moveZManipulator.state|=z.IsShiftEdgeOnScreenFlag;ea.add([this._createMoveXYGraphicDragPipeline(),f.watch(()=>this.enableZ,()=>this._updateManipulatorAvailability(this._moveZManipulator,L.ManipulatorType.TRANSLATE_Z)),this._createMoveZDragPipeline()]);ka.add(this._moveZManipulator);this._resizeManipulators=this._resizeHandles.map(wa=>{const P=z.createResizeManipulator(Q,wa,{color:na.accent});ea.add([f.watch(()=>this.enableScaling,()=>this._updateManipulatorAvailability(P,
L.ManipulatorType.SCALE)),P.events.on("grab-changed",S=>this._onResizeGrab(S)),this._createResizeDragPipeline(P,wa)]);return P});ka.addMany(this._resizeManipulators);var Ba=!this.view._stage?.renderView.renderingContext.driverTest.svgPremultipliesAlpha.result;this._rotateManipulatorTexture=A.getRotateHeadingTexture(Q.toolViewManager.textures,{accentColor:Aa.multiplyOpacity(na.accent,.5),contrastColor:na.contrast,preMultiplyAlpha:Ba});this._rotateManipulator=J.createRotateManipulator(Q,{calloutColor:Aa.unitRGBAFromColor(na.accent),
texture:this._rotateManipulatorTexture.texture});ea.add([f.watch(()=>this.enableRotation,()=>this._updateManipulatorAvailability(this._rotateManipulator,L.ManipulatorType.ROTATE)),this._rotateManipulator.events.on("grab-changed",wa=>{this._onRotateGrab(wa)}),this._createRotateDragPipeline(this._rotateManipulator)]);ka.add(this._rotateManipulator);this._calculateMapBounds();this._updateDisplayBounds();Ba=N.createVisualElements({view:Q,graphic:Z,forEachManipulator:wa=>this._forEachManipulator(wa),onManipulatorsChanged:()=>
p.makeHandle()});null!=Ba&&(this._outlineVisualElement=Ba.visualElement instanceof ja.OutlineVisualElement?Ba.visualElement:null);null!=this._outlineVisualElement&&ea.add(this._outlineVisualElement.events.on("attachment-origin-changed",()=>this._updateDisplayBounds()));ea.add(Ba);ea.add([ya.on("changed",()=>this._onGeometryChanged()),f.watch(()=>ya.displaying,()=>this._updateAllManipulatorAvailability()),f.watch(()=>ya.isDraped,()=>this._graphicDrapedChanged(),f.initial),Q.trackGraphicState(ya)]);
const Ca=Q.pointsOfInterest;ea.add(f.watch(()=>Ca?.centerOnSurfaceFrequent.location,()=>this._updateDisplayBounds()));this._forEachManipulator(wa=>{ea.add(wa.events.on("grab-changed",()=>{this.grabbing=wa.grabbing;this._updateAllManipulatorAvailability()}))});this._forEachManipulator((wa,P)=>{ea.add(wa.events.on("immediate-click",S=>{P===L.ManipulatorType.TRANSLATE_XY&&this.emit("immediate-click",{...S,graphic:Z});S.stopPropagation()}))});this._onGeometryChanged();this._updateAllManipulatorAvailability();
this._initializeTooltip();this.finishToolCreation()};aa.destroy=function(){this._displayBounds=this._mapBounds=null;this._rotateManipulatorTexture.release();this._handles.destroy();this._graphicMoveManipulation.destroy();this._editGeometryOperations.destroy();this._tooltip.destroy();this._set("view",null);this._set("graphic",null)};aa._initializeTooltip=function(){const {_handles:Q,view:Z}=this,ka=this._tooltip=new sa.Tooltip({view:Z}),ea=()=>{ka.info=this._getUpdatedTooltipInfo()};Q.add([this.on("graphic-translate-start",
ea),this.on("graphic-translate",ea),this.on("graphic-translate-stop",()=>{this._moveZTooltipInfo=this._moveXYTooltipInfo=null;this._tooltip.clear()}),this.on("graphic-rotate-start",na=>{this._startAngle=na.angle;ea()}),this.on("graphic-rotate",na=>{this._endAngle=na.angle;ea()}),this.on("graphic-rotate-stop",()=>{this._endAngle=this._startAngle=0;ea()}),this.on("graphic-scale-start",na=>{l.set(this._startScale,na.xScale,na.yScale);l.set(this._endScale,na.xScale,na.yScale);ea()}),this.on("graphic-scale",
na=>{l.set(this._endScale,na.xScale,na.yScale);ea()}),this.on("graphic-scale-stop",()=>{l.set(this._startScale,0,0);l.set(this._endScale,0,0);ea()})]);this._forEachManipulator(na=>{Q.add([na.events.on("focus-changed",ea),na.events.on("grab-changed",ea),na.events.on("drag",ya=>{"cancel"===ya.action?this._tooltip.clear():ea()})])})};aa._getUpdatedTooltipInfo=function(){return this.tooltipOptions.enabled?this._graphicMoveManipulation.grabbing||this._graphicMoveManipulation.dragging?this._computeMoveXYTooltipInfo():
this._moveZManipulator.focused?this._computeMoveZTooltipInfo():this._rotateManipulator.focused?this._computeRotateTooltipInfo():this._resizeManipulators.some(Q=>Q.focused)?this._computeScaleTooltipInfo():null:null};aa._computeMoveXYTooltipInfo=function(){return this._moveXYTooltipInfo??(this._moveXYTooltipInfo=new xa.TranslateGraphicTooltipInfo({tooltipOptions:this.tooltipOptions}))};aa._computeMoveZTooltipInfo=function(){const Q=this._moveZTooltipInfo??(this._moveZTooltipInfo=new xa.TranslateGraphicZTooltipInfo({tooltipOptions:this.tooltipOptions}));
var Z=this._moveUnit;if(this._moveZManipulator.dragging){Z=O.verticalSignedDistance(this._mapBoundsStart.origin,this._mapBounds.origin,this.view.spatialReference);if(null==Z)return null;Q.distance=Z}else Q.distance=k.createLength(0,Z);return Q};aa._computeRotateTooltipInfo=function(){const Q=this._rotateTooltipInfo??(this._rotateTooltipInfo=new ca.ExtentRotateTooltipInfo({tooltipOptions:this.tooltipOptions}));Q.angle=this._startAngle-this._endAngle;return Q};aa._computeScaleTooltipInfo=function(){var Q=
this.graphic.geometry;if(null==Q)return null;const Z=this._scaleTooltipInfo??(this._scaleTooltipInfo=new ca.ExtentScaleTooltipInfo({tooltipOptions:this.tooltipOptions}));Q=da.mapPlaneAutoHorizontalSizeByElevationMode(this._mapBounds,this._zmax,Q.spatialReference,this._graphicState.isDraped);if(null==Q)return null;Z.xSize=Q[0];Z.ySize=Q[1];null!=this._sizeStart&&this._resizeManipulators.some(ka=>ka.dragging)?(Z.xScale=Q[0].value/this._sizeStart[0].value,Z.yScale=Q[1].value/this._sizeStart[1].value):
(Z.xScale=1,Z.yScale=1);return Z};aa._graphicDrapedChanged=function(){this._handles.remove("draped-elevation-changes");this._updateDisplayBounds();this._graphicState.isDraped&&this._handles.add(this.view.elevationProvider.on("elevation-change",Q=>{null!=this._attachmentOrigin&&q.containsXY(Q.extent,this._attachmentOrigin.x,this._attachmentOrigin.y)&&this._updateDisplayBounds()}),"draped-elevation-changes")};aa._updateAllManipulatorAvailability=function(){this._forEachManipulator((Q,Z)=>this._updateManipulatorAvailability(Q,
Z))};aa._updateManipulatorAvailability=function(Q,Z){const ka=this.grabbing&&!Q.grabbing;Q.interactive=!ka;if(Q instanceof K.Manipulator3D){const ea=this._graphicState.displaying,na=this.enableZ&&E.canMoveZ(this.graphic);switch(Z){case L.ManipulatorType.ROTATE:Q.available=ea&&this.enableRotation;break;case L.ManipulatorType.SCALE:Q.available=ea&&(this.enableScaling||this.enableRotation||na);Q.interactive=!ka&&this.enableScaling;Q.state=this.enableScaling?z.resizeNormal:z.resizeOutlineOnly;break;case L.ManipulatorType.TRANSLATE_Z:Q.available=
ea&&na;break;default:Q.available=ea}}};aa._forEachManipulator=function(Q){this._graphicMoveManipulation.forEachManipulator(Q);this._resizeManipulators.forEach(Z=>Q(Z,L.ManipulatorType.SCALE));Q(this._rotateManipulator,L.ManipulatorType.ROTATE);Q(this._moveZManipulator,L.ManipulatorType.TRANSLATE_Z)};aa.reset=function(){};aa._onGeometryChanged=function(){this._updateDisplayBounds()};aa._calculateMapBounds=function(){var Q=this.graphic.geometry;const Z=this._editGeometryOperations.data;var ka=Z.components[0].edges[0];
ka=l.subtract(I.sv2d.get(),ka.leftVertex.pos,ka.rightVertex.pos);l.normalize(ka,ka);var ea=J.getGraphicAttachmentOrigin(this.view,this.graphic)??Q.extent?.center;ea=ea?80*this.view.pixelSizeAt(ea):0;const na=this.view.spatialReference;Q=Q.spatialReference;na.equals(Q)||(ea*=v.getMetersPerUnitForSR(na)/v.getMetersPerUnitForSR(Q));da.calculateOrientedBounds(ka,Z,ea,this._mapBounds);this._updateZMax()};aa._updateZMax=function(){var Q=this._editGeometryOperations.data;if(Q.geometry.hasZ){var Z=Q.coordinateHelper,
ka=Number.NEGATIVE_INFINITY;for(const ea of Q.components)for(const na of ea.vertices)Q=Z.getZ(na.pos)??0,ka=Math.max(Q,ka);this._zmax=ka}else this._zmax=0};aa._updateDisplayBounds=function(){const {geometry:Q}=this.graphic;if(null!=Q){var {extent:Z}=Q;if(Z){var ka=null==this._outlineVisualElement||this._graphicState.isDraped||null==this._outlineVisualElement.attachmentOrigin?J.getGraphicAttachmentOrigin(this.view,this.graphic):this._outlineVisualElement.attachmentOrigin;this._attachmentOrigin=ka??
Z.center;Z=null!=ka?ka.z:ra.evaluateElevationAlignmentAtPoint(this._mapBounds.origin,this.view.elevationProvider,qa.ElevationContext.fromElevationInfo(G.getGraphicEffectiveElevationInfo(this.graphic)),this.view.renderCoordsHelper);ka=C.copy(this._mapBounds);ka.origin[2]=Z??0;da.mapPlaneToRenderPlane(ka,this.view.renderCoordsHelper,Q.spatialReference,this._displayBoundsMargin,this._displayBounds);this._updateManipulators()}}};aa._createMoveXYGraphicDragPipeline=function(){return this._graphicMoveManipulation.createDragPipeline((Q,
Z,ka)=>this._applyGraphicMoveSteps(Z,ka,T.ManipulationType.XY))};aa._createMoveZDragPipeline=function(){const Q=this.view,Z=this._editGeometryOperations.data.spatialReference;return ta.createManipulatorDragEventPipeline(this._moveZManipulator,(ka,ea,na)=>{ka=y.clone(ka.renderLocation);ea=ea.next(H.screenToZConstrained(Q,ka,Z)).next(ta.addScreenDelta());this._applyGraphicMoveSteps(ea,na,T.ManipulationType.Z)})};aa._applyGraphicMoveSteps=function(Q,Z,ka){Q=Q.next(ea=>{"start"===ea.action&&(this.inputState=
{type:"move"},this._updateOperationStartProperties(),this.emit("graphic-translate-start",{graphic:this.graphic,dxScreen:ea.screenDeltaX,dyScreen:ea.screenDeltaY}));return ea}).next(ta.addMapDelta()).next(this._moveDragUpdateGeometry()).next(ea=>{const na={graphic:this.graphic,dxScreen:ea.screenDeltaX,dyScreen:ea.screenDeltaY};switch(ea.action){case "start":case "update":(ea.mapEnd.x-ea.mapStart.x||ea.mapEnd.y-ea.mapStart.y||(ea.mapEnd.z??0)-(ea.mapStart.z??0))&&this.emit("graphic-translate",na);break;
case "end":this.inputState=null,this.emit("graphic-translate-stop",na)}return ea}).next(ea=>this._updateMoveTooltip(ea,ka));Z.next(()=>{null!=this.inputState&&this.emit("graphic-translate-stop",{graphic:this.graphic,dxScreen:0,dyScreen:0});this._cancel()});return Q};aa._updateOperationStartProperties=function(){C.copy(this._displayBounds,this._displayBoundsStart);C.copy(this._mapBounds,this._mapBoundsStart);this._sizeStart=null==this.graphic.geometry?null:da.mapPlaneAutoHorizontalSizeByElevationMode(this._mapBoundsStart,
this._zmax,this.graphic.geometry.spatialReference,this._graphicState.isDraped)};aa._moveDragUpdateGeometry=function(){return Q=>{if(null==this.inputState||"move"!==this.inputState.type)return Q;var Z=[];for(const ka of this._editGeometryOperations.data.components)Z.push(...ka.vertices);Z=this._editGeometryOperations.moveVertices(Z,Q.mapDeltaX,Q.mapDeltaY,Q.mapDeltaZ,"start"===Q.action?V.AccumulationBehaviour.NEW_STEP:V.AccumulationBehaviour.ACCUMULATE_STEPS);da.apply(Z,this._mapBounds);this.graphic.geometry=
this._editGeometryOperations.data.geometry;return Q}};aa._updateMoveTooltip=function(Q,Z){if(Z===T.ManipulationType.XY||Z===T.ManipulationType.XY_AXIS)Z=ma.autoHorizontalDistanceByElevationModeBetweenPoints(Q.mapStart,Q.mapEnd,this._graphicState.isDraped?"on-the-ground":"absolute-height"),null!=Z&&null!=this._moveXYTooltipInfo&&(this._moveXYTooltipInfo.distance=Z);return Q};aa._onResizeGrab=function({action:Q,screenPoint:Z}){"start"===Q&&Z&&(Q=this._calculatePickRay(Z),D.intersectRay(this._displayBounds.plane,
Q,I.sv3d.get())&&(this._updateOperationStartProperties(),this._displayBoundsMarginStart=this._displayBoundsMargin,this.inputState={type:"resize"}))};aa._createResizeDragPipeline=function(Q,Z){return ta.createManipulatorDragEventPipeline(Q,(ka,ea,na)=>{null!=this.inputState&&(ea.next(ya=>{"start"===ya.action&&this.emit("graphic-scale-start",{graphic:this.graphic,xScale:1,yScale:1});return ya}).next(H.screenToRenderPlane(this.view,this._displayBoundsStart.plane)).next(ya=>({...ya,handle:Z})).next(this._resizeDragRenderPlaneToFactors()).next(...this._preserveAspectRatio.createDragEventPipelineStep()).next(this._resizeDragUpdateGeometry()).next(ya=>
{const Ba={graphic:this.graphic,xScale:ya.factor1,yScale:ya.factor2};switch(ya.action){case "start":case "update":this.emit("graphic-scale",Ba);break;case "end":this.inputState=null,this.emit("graphic-scale-stop",Ba)}return ya}),na.next(()=>{null!=this.inputState&&this.emit("graphic-scale-stop",{graphic:this.graphic,xScale:1,yScale:1});this._cancel()}))})};aa._resizeDragRenderPlaneToFactors=function(){return Q=>{const Z=this._displayBoundsStart,ka=Q.handle.direction,ea=this._displayBoundsMargin,na=
this._displayBoundsMarginStart;var ya=t.copy(I.sv3d.get(),Z.origin);t.scaleAndAdd(ya,ya,Z.basis1,-ka[0]);t.scaleAndAdd(ya,ya,Z.basis2,-ka[1]);const Ba=t.subtract(I.sv3d.get(),Q.renderEnd,ya),Ca=t.subtract(I.sv3d.get(),Q.renderStart,ya),wa=z.isDiagonalResizeHandle(Q.handle);ya=z.calculateDiagonalResizeHandleScale(Z);const P=z.calculateDiagonalResizeHandleScale(this._displayBounds)/ya;ya=(S,X)=>{if(0===S)return 1;let ba=t.length(X),ia=.5*S*t.dot(X,Ba)/ba;const la=0>ia?-1:1;wa&&(S=ba-.5*S*t.dot(X,Ca)/
ba,ia+=S*la*P);S=ba<1.5*na?1:1E-6;ba=Math.max(ba-na,1E-6);0<la&&(ia-=ea);return la*Math.max(ia/ba*la,S)};return{...Q,factor1:ya(ka[0],Z.basis1),factor2:ya(ka[1],Z.basis2)}}};aa._resizeDragUpdateGeometry=function(){return Q=>{var Z=t.copy(y.create(),this._mapBoundsStart.origin);t.scaleAndAdd(Z,Z,this._mapBoundsStart.basis1,-Q.handle.direction[0]);t.scaleAndAdd(Z,Z,this._mapBoundsStart.basis2,-Q.handle.direction[1]);const ka=l.set(h.create(),this._mapBoundsStart.basis1[0],this._mapBoundsStart.basis1[1]);
l.normalize(ka,ka);const ea=[];for(const na of this._editGeometryOperations.data.components)ea.push(...na.vertices);Z=this._editGeometryOperations.scaleVertices(ea,Z,ka,Q.factor1,Q.factor2,"start"===Q.action?V.AccumulationBehaviour.NEW_STEP:V.AccumulationBehaviour.ACCUMULATE_STEPS,ha.AccumulationType.REPLACE);C.copy(this._mapBoundsStart,this._mapBounds);da.apply(Z,this._mapBounds);this.graphic.geometry=this._editGeometryOperations.data.geometry;return Q}};aa._onRotateGrab=function({action:Q,screenPoint:Z}){"start"===
Q&&Z&&(Q=z.createRotatePlane(this._displayBounds,this.view.renderCoordsHelper,z.RotationAxis.HEADING,D.create()),Z=this._calculatePickRay(Z),D.intersectRay(Q,Z,I.sv3d.get())&&(this._updateOperationStartProperties(),this.inputState={type:"rotate",rotatePlane:Q}))};aa._createRotateDragPipeline=function(Q){return ta.createManipulatorDragEventPipeline(Q,(Z,ka,ea)=>{Z=this.inputState;null!=Z&&(ka.next(na=>{"start"===na.action&&this.emit("graphic-rotate-start",{graphic:this.graphic,angle:0});return na}).next(H.screenToRenderPlane(this.view,
Z.rotatePlane)).next(this._rotateDragRenderPlaneToRotate(Z)).next(this._rotateDragUpdateGeometry()).next(na=>{const ya={graphic:this.graphic,angle:n.rad2deg(na.rotateAngle)};switch(na.action){case "start":case "update":this.emit("graphic-rotate",ya);break;case "end":this.inputState=null,this.emit("graphic-rotate-stop",ya)}return na}),ea.next(()=>{null!=this.inputState&&this.emit("graphic-rotate-stop",{graphic:this.graphic,angle:0});this._cancel()}))})};aa._rotateDragRenderPlaneToRotate=function(Q){return Z=>
{const ka=D.normal(Q.rotatePlane),ea=J.calculateInputRotationTransform(Z.renderStart,Z.renderEnd,this._displayBounds.origin,ka);return{...Z,rotateAxis:ka,rotateAngle:ea}}};aa._rotateDragUpdateGeometry=function(){return Q=>{var Z=t.copy(y.create(),this._mapBoundsStart.origin);const ka=[];for(const ea of this._editGeometryOperations.data.components)ka.push(...ea.vertices);Z=this._editGeometryOperations.rotateVertices(ka,Z,Q.rotateAngle,"start"===Q.action?V.AccumulationBehaviour.NEW_STEP:V.AccumulationBehaviour.ACCUMULATE_STEPS,
ha.AccumulationType.REPLACE);C.copy(this._mapBoundsStart,this._mapBounds);da.apply(Z,this._mapBounds);this.graphic.geometry=this._editGeometryOperations.data.geometry;return Q}};aa._calculatePickRay=function(Q){const Z=F.create();Q=g.screenPointObjectToArray(Q);za.fromScreen(this.view.state.camera,Q,Z);t.normalize(Z.direction,Z.direction);return Z};aa._updateManipulators=function(){if(this.visible){var Q=z.calculateBoundedPlaneTranslateRotate(this._displayBounds,I.sm4d.get());z.updateRotateHeadingHandle(this._rotateManipulator,
Q,this._displayBounds,this.view.renderCoordsHelper);this._updateZMoveHandle(this._moveZManipulator,Q);this._resizeManipulators.forEach((Z,ka)=>{z.updateResizeHandle(Z,this._resizeHandles[ka],Q,this._displayBounds)})}};aa._updateZMoveHandle=function(Q,Z){var ka=this._displayBounds;ka=t.subtract(I.sv3d.get(),ka.origin,ka.basis1);const ea=I.sm4d.get();d.rotateZ(ea,Z,2*Math.PI/2);ea[12]=0;ea[13]=0;ea[14]=0;Q.modelTransform=ea;Q.renderLocation=ka};aa._cancel=function(){const Q=this._editGeometryOperations.lastOperation;
null!=Q&&(this._editGeometryOperations.undo(),this.graphic.geometry=this._editGeometryOperations.data.geometry,da.unapply(Q,this._mapBounds),this._updateDisplayBounds(),this.inputState=null)};aa.undo=function(){if(null!=this.inputState)this.view.activeTool=null;else if(this.canUndo){const Q=this._editGeometryOperations.undo();this.graphic.geometry=this._editGeometryOperations.data.geometry;da.unapply(Q,this._mapBounds);this._updateDisplayBounds()}};aa.redo=function(){if(this.canRedo){const Q=this._editGeometryOperations.redo();
this.graphic.geometry=this._editGeometryOperations.data.geometry;da.apply(Q,this._mapBounds);this._updateDisplayBounds()}};r._createClass(fa,[{key:"preserveAspectRatio",get:function(){return this._preserveAspectRatio.enabled},set:function(Q){this._preserveAspectRatio.enabled=Q;this._set("preserveAspectRatio",Q)}},{key:"_moveUnit",get:function(){return v.lengthUnitFromSpatialReference(this.view.spatialReference)??"meters"}},{key:"_displayBoundsMargin",get:function(){var Q=this.view.pointsOfInterest;
return(Q=Q?Q.centerOnSurfaceFrequent.location:this._editGeometryOperations.data.geometry.extent?.center)?10*this.view.pixelSizeAt(Q):0}},{key:"canUndo",get:function(){return this._editGeometryOperations.canUndo}},{key:"canRedo",get:function(){return this._editGeometryOperations.canRedo}},{key:"test",get:function(){return{resizeManipulators:this._resizeManipulators,rotateManipulator:this._rotateManipulator,moveZManipulator:this._moveZManipulator,tooltip:this._tooltip}}}]);return fa}(x.EventedMixin(oa.InteractiveToolBase));
e.__decorate([c.property({constructOnly:!0,nonNullable:!0})],a.ExtentTransformTool.prototype,"view",void 0);e.__decorate([c.property({constructOnly:!0,nonNullable:!0})],a.ExtentTransformTool.prototype,"graphic",void 0);e.__decorate([c.property({constructOnly:!0,nonNullable:!0})],a.ExtentTransformTool.prototype,"enableZ",void 0);e.__decorate([c.property()],a.ExtentTransformTool.prototype,"enableRotation",void 0);e.__decorate([c.property()],a.ExtentTransformTool.prototype,"enableScaling",void 0);e.__decorate([c.property({constructOnly:!0,
type:R})],a.ExtentTransformTool.prototype,"tooltipOptions",void 0);e.__decorate([c.property()],a.ExtentTransformTool.prototype,"preserveAspectRatio",null);e.__decorate([c.property()],a.ExtentTransformTool.prototype,"grabbing",void 0);e.__decorate([c.property()],a.ExtentTransformTool.prototype,"inputState",void 0);e.__decorate([c.property({readOnly:!0})],a.ExtentTransformTool.prototype,"type",void 0);e.__decorate([c.property()],a.ExtentTransformTool.prototype,"_moveUnit",null);a.ExtentTransformTool=
e.__decorate([b.subclass("esri.views.3d.interactive.editingTools.graphicTransform3D.ExtentTransformTool")],a.ExtentTransformTool);a.EPSILON=1E-6;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/analysis/Slice/sliceToolUtils":function(){define("exports ../../../../Color ../../../../geometry ../../../../analysis/SlicePlane ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/screenUtils ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/quat ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/projection ../../../../geometry/support/Axis ../../../../chunks/boundedPlane ../../../../geometry/support/plane ../../../../geometry/support/ray ../../../../geometry/support/vector ../../../../geometry/support/vectorStacks ./settings ./sliceToolConfig ../support/projectionUtils ../../interactive/Manipulator3D ../../interactive/manipulatorUtils ../../interactive/RenderObject ../../interactive/visualElements/LineVisualElement ../../interactive/visualElements/SlicePlaneVisualElement ../../support/RenderCoordsHelper ../../support/geometryUtils/ray ../../webgl-engine/lib/basicInterfaces ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/materials/ColorMaterial ../../webgl-engine/materials/NativeLineMaterial ../../webgl-engine/materials/RibbonLineMaterial ../../../interactive/interfaces ../../../../geometry/Extent".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u,b,d,l,h,t,y,q,C,D,F,I,G,z,A,K,J,H,L,E,M,N,T,Y){function U(O,W,fa,aa,Q,Z){const ka=c.dot(O,W),ea=t.sv3d.get(),na=t.sv3d.get();switch(aa===a.SliceOrientation.HORIZONTAL_OR_VERTICAL?Math.abs(ka)>q.VERTICAL_DOT_THRESHOLD?a.SliceOrientation.HORIZONTAL:a.SliceOrientation.VERTICAL:aa){case a.SliceOrientation.VERTICAL:c.cross(ea,Math.abs(ka)<=q.SMALL_ANGLE_DOT_THRESHOLD?O:fa.viewUp,W);c.copy(na,W);break;case a.SliceOrientation.HORIZONTAL:c.cross(ea,fa.viewUp,W);c.cross(na,
W,ea);break;case a.SliceOrientation.TILTED:c.cross(ea,Math.abs(ka)<=q.SMALL_ANGLE_DOT_THRESHOLD?W:fa.viewUp,O),c.cross(na,O,ea)}O=c.cross(t.sv3d.get(),ea,na);0<c.dot(O,fa.viewForward)&&c.scale(na,na,-1);c.normalize(Q,ea);c.normalize(Z,na)}function ja(O,W,fa){var aa=W.worldUpAtPosition(O.origin,t.sv3d.get());W=O.basis1;aa=h.angleAroundAxis(aa,O.basis2,O.basis1)+xa;return b.rotate(O,Math.round(aa/xa)*xa-aa,W,fa)}function ra(O,W){switch(W){case da.POSITIVE_X:return{basis:O.basis1,direction:1,position:c.add(t.sv3d.get(),
O.origin,O.basis1),edge:W};case da.POSITIVE_Y:return{basis:O.basis2,direction:1,position:c.add(t.sv3d.get(),O.origin,O.basis2),edge:W};case da.NEGATIVE_X:return{basis:O.basis1,direction:-1,position:c.subtract(t.sv3d.get(),O.origin,O.basis1),edge:W};case da.NEGATIVE_Y:return{basis:O.basis2,direction:-1,position:c.subtract(t.sv3d.get(),O.origin,O.basis2),edge:W}}}function qa(O,W,fa){const aa=fa.projectToRenderScreen(c.add(t.sv3d.get(),O,W),k.castRenderScreenPointArray3(t.sv3d.get()));O=fa.projectToRenderScreen(c.subtract(t.sv3d.get(),
O,W),k.castRenderScreenPointArray3(t.sv3d.get()));return c.squaredLength(c.subtract(aa,aa,O))}function pa(O){const W=c.length(O.basis1);O=c.length(O.basis2);return q.RESIZE_HANDLE_EDGE_PADDING_FRAC*Math.min(W,O)}function za(O){return 0!==O.direction[0]&&0!==O.direction[1]}function ta(O,W,fa,aa){const Q=r.blendColors(aa.color,aa.outlineColor,.4),Z=r.blendColors(aa.color,aa.outlineColor,.14),ka=new E.ColorMaterial({color:r.toUnitRGBA(aa.color),cullFace:J.CullFaceOptions.Back,renderOccluded:L.RenderOccludedFlag.Opaque}),
ea=new E.ColorMaterial({color:r.toUnitRGBA(Q),cullFace:J.CullFaceOptions.Back,renderOccluded:L.RenderOccludedFlag.Opaque}),na=new E.ColorMaterial({color:r.toUnitRGBA(Z),cullFace:J.CullFaceOptions.Back,renderOccluded:L.RenderOccludedFlag.Opaque}),ya=new E.ColorMaterial({color:r.toUnitRGBA(aa.outlineColor),transparent:!0,writeDepth:!1,cullFace:J.CullFaceOptions.Front,renderOccluded:L.RenderOccludedFlag.Transparent});aa=Ba=>{const Ca=O.slice(0);var wa=c.subtract(t.sv3d.get(),Ca[0],Ca[1]);c.normalize(wa,
wa);var P=c.subtract(t.sv3d.get(),Ca[Ca.length-1],Ca[Ca.length-2]);c.normalize(P,P);if(0<W){var S=c.scale(w.create(),P,-W);Ca[Ca.length-1]=c.add(S,S,Ca[Ca.length-1]);S=c.scale(w.create(),wa,-W);Ca[0]=c.add(S,S,Ca[0])}S=Ba?q.SHIFT_RESTART_TIP_FOCUS_MULTIPLIER:1;var X=q.SHIFT_RESTART_TIP_LENGTH*S;const ba=q.SHIFT_RESTART_TIP_RADIUS*S;S=f.identity(t.sm4d.get());if(0<W){var ia=X/4,la=c.set(t.sv3d.get(),0,ia,0);ia=1+W/ia;f.translate(S,S,la);f.scale(S,S,c.set(t.sv3d.get(),ia,ia,ia));f.translate(S,S,c.scale(la,
la,-1/ia))}ia=f.identity(g.create());la=w.fromValues(0,1,0);P=f.fromQuat(g.create(),v.rotationTo(t.sq4d.get(),la,P));P[12]=Ca[Ca.length-1][0];P[13]=Ca[Ca.length-1][1];P[14]=Ca[Ca.length-1][2];f.multiply(P,P,S);Ba=q.SHIFT_RESTART_TUBE_RADIUS*(Ba?q.SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER:1)+W;var va=fa?ya:na;const Da=[];for(let Ea=0;12>Ea;Ea++){const Fa=Ea/12*2*Math.PI;Da.push([Math.cos(Fa)*Ba,Math.sin(Fa)*Ba])}Ba=H.createPathExtrusionGeometry(va,Da,Ca,[],[],!1);Ba.transformation=ia;Ba=[Ba];ia=H.createConeGeometry(fa?
ya:ka,X,ba,24,!1,!1,!0);ia.transformation=P;Ba.push(ia);X=H.createConeGeometry(fa?ya:ea,X,ba,24,!1,!0,!1);X.transformation=P;Ba.push(X);wa=f.fromQuat(g.create(),v.rotationTo(t.sq4d.get(),la,wa));wa[12]=Ca[0][0];wa[13]=Ca[0][1];wa[14]=Ca[0][2];f.multiply(wa,wa,S);Ba.push(ia.instantiate({transformation:wa}));Ba.push(X.instantiate({transformation:wa}));return Ba};return{normal:aa(!1),focused:aa(!0)}}function oa(O,W){const fa=c.subtract(w.create(),O[O.length-1],O[O.length-2]);c.normalize(fa,fa);c.scale(fa,
fa,q.SHIFT_RESTART_TIP_LENGTH);c.add(fa,fa,O[O.length-1]);return W?(W=c.subtract(w.create(),O[0],O[1]),c.normalize(W,W),c.scale(W,W,q.SHIFT_RESTART_TIP_LENGTH),c.add(W,W,O[0]),[W,...O,fa]):[...O,fa]}function ua(O,W,fa,aa,Q,Z,ka=b.create()){if(!Z.toRenderCoords(O,ka.origin))return p.getLogger("esri.views.3d.analysis.Slice.sliceToolUtils").error(`Failed to project slice plane position, projection from ${O.spatialReference.wkid} is not supported`),null;Z.worldBasisAtPosition(ka.origin,u.Axis.X,ka.basis1);
Z.worldBasisAtPosition(ka.origin,u.Axis.Y,ka.basis2);d.fromVectorsAndPoint(ka.basis2,ka.basis1,ka.origin,ka.plane);b.rotate(ka,-n.deg2rad(W),b.normal(ka),ka);b.rotate(ka,n.deg2rad(fa),ka.basis1,ka);c.scale(ka.basis1,ka.basis1,aa/2);c.scale(ka.basis2,ka.basis2,Q/2);b.updateUnboundedPlane(ka);return ka}function V(O,W){if(null==O||null==O.position)return null;const fa=C.applyProjectionAndElevationAlignment(O.position,W.spatialReference,W.elevationProvider);if(null==fa)return null;W=A.RenderCoordsHelper.renderUnitScaleFactor(O.position.spatialReference,
W.spatialReference);return{position:fa,heading:O.heading,tilt:O.tilt,renderWidth:O.width*W,renderHeight:O.height*W}}function ha(O,W,fa,aa=b.create()){if(null==O)return null;O=ua(O.position,O.heading,O.tilt,O.renderWidth,O.renderHeight,W.renderCoordsHelper,aa);fa.tiltEnabled||null==O||ja(O,W.renderCoordsHelper,O);return O}var da;(function(O){O[O.POSITIVE_X=0]="POSITIVE_X";O[O.POSITIVE_Y=1]="POSITIVE_Y";O[O.NEGATIVE_X=2]="NEGATIVE_X";O[O.NEGATIVE_Y=3]="NEGATIVE_Y"})(da||(da={}));const R=T.ManipulatorStateCustomFlags.Custom1;
a.RotationAxis=void 0;(function(O){O[O.HEADING=1]="HEADING";O[O.TILT=2]="TILT"})(a.RotationAxis||(a.RotationAxis={}));a.SliceOrientation=void 0;(function(O){O[O.HORIZONTAL_OR_VERTICAL=0]="HORIZONTAL_OR_VERTICAL";O[O.HORIZONTAL=1]="HORIZONTAL";O[O.VERTICAL=2]="VERTICAL";O[O.TILTED=3]="TILTED"})(a.SliceOrientation||(a.SliceOrientation={}));const ca=T.ManipulatorStateCustomFlags.Custom2,sa=l.create(),xa=Math.PI/2,ma=T.ManipulatorStateCustomFlags.Custom1,Aa=T.ManipulatorStateCustomFlags.Custom2;a.OffsetMode=
void 0;(function(O){O[O.CENTER_ON_CALLOUT=0]="CENTER_ON_CALLOUT";O[O.CENTER_ON_ARROW=1]="CENTER_ON_ARROW"})(a.OffsetMode||(a.OffsetMode={}));a.DidPointerMoveRecentlyFlag=R;a.IsShiftEdgeOnScreenFlag=ca;a.addArrowTips=oa;a.calculateBoundedPlaneTranslateRotate=function(O,W){return F.calculateTranslateRotateFromBases(O.basis1,O.basis2,O.origin,W)};a.calculateDiagonalResizeHandleScale=function(O){return pa(O)};a.calculatePlaneHalfSize=function(O,W){return q.INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION*Math.min(W.width,
W.height)*W.computeRenderPixelSizeAt(O)};a.calculateResizeHandlePadding=pa;a.calculateScreenSpaceBasisLength2=qa;a.createGridVisualElement=function(O){return new z.SlicePlaneVisualElement({view:O,attached:!1,backgroundColor:r.toUnitRGBA(y.settings.plane.color),gridColor:r.toUnitRGBA(y.settings.plane.gridColor),gridWidth:4,renderOccluded:L.RenderOccludedFlag.OccludeAndTransparent})};a.createOutlineVisualElement=function(O){return new G.LineVisualElement({view:O,attached:!1,color:r.toUnitRGBA(y.settings.plane.outlineColor),
width:q.PLANE_OUTLINE_WIDTH,renderOccluded:L.RenderOccludedFlag.OccludeAndTransparent,geometry:[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]]]})};a.createPlane=function(O,W,fa,aa,Q,Z,ka,ea){ka=ka.worldUpAtPosition(O,t.sv3d.get());U(W,ka,Q,Z,ea.basis1,ea.basis2);c.scale(ea.basis1,ea.basis1,fa);c.scale(ea.basis2,ea.basis2,aa);c.copy(ea.origin,O);d.fromVectorsAndPoint(ea.basis2,ea.basis1,ea.origin,ea.plane);return ea};a.createResizeManipulator=function(O,W,fa){const aa=(W=za(W))?[w.fromValues(1,0,
0),w.fromValues(0,0,0),w.fromValues(0,1,0)]:[w.fromValues(1,0,0),w.fromValues(-1,0,0)],Q=r.toUnitRGBA(fa.color);fa=ya=>new N.RibbonLineMaterial({color:Q,width:ya,renderOccluded:L.RenderOccludedFlag.OccludeAndTransparent});const Z=()=>new M.NativeLineMaterial({color:Q,renderOccluded:L.RenderOccludedFlag.OccludeAndTransparent}),ka=W?q.RESIZE_HANDLE_CORNER_WIDTH:q.RESIZE_HANDLE_EDGE_WIDTH,ea=ka*q.DISPLAY_FOCUS_MULTIPLIER,na=q.RESIZE_HANDLE_EDGE_WIDTH;fa=[new I.RenderObject(H.createPolylineGeometry(1<
ka?fa(ka):Z(),aa),T.ManipulatorStateFlags.Unfocused|ma),new I.RenderObject(H.createPolylineGeometry(1<ea?fa(ea):Z(),aa),T.ManipulatorStateFlags.Focused|ma),new I.RenderObject(H.createPolylineGeometry(1<na?fa(na):Z(),aa),Aa)];O=new D.Manipulator3D({view:O,renderObjects:fa,collisionType:{type:"line",paths:[aa]},radius:W?q.RESIZE_HANDLE_CORNER_INPUT_RADIUS:q.RESIZE_HANDLE_EDGE_INPUT_RADIUS,...F.worldScaledManipulatorSettings});O.state=ma;return O};a.createRotateManipulator=function(O,W){O=F.createRotateManipulator(O,
{calloutColor:r.toUnitRGBA(y.settings.callouts.color),customStateMask:R,texture:W});O.state=R;return O};a.createRotatePlane=function(O,W,fa,aa){W=W.worldUpAtPosition(O.origin,t.sv3d.get());const Q=t.sv3d.get();switch(fa){case a.RotationAxis.HEADING:c.copy(Q,W);break;case a.RotationAxis.TILT:c.copy(Q,O.basis1)}return d.fromPositionAndNormal(O.origin,Q,aa)};a.createShiftManipulator=function(O,W){var fa=W.offsetMode===a.OffsetMode.CENTER_ON_CALLOUT?q.SHIFT_RESTART_OFFSET_DISTANCE:0,aa=[w.fromValues(fa,
0,-q.SHIFT_RESTART_ARROW_LENGTH/2),w.fromValues(fa,0,q.SHIFT_RESTART_ARROW_LENGTH/2)];const Q=oa(aa,!0),Z=ta(aa,0,!1,W);aa=ta(aa,q.SHIFT_RESTART_ARROW_OUTLINE_WIDTH,!0,W);const ka=new M.NativeLineMaterial({color:r.toUnitRGBA(W.calloutColor),renderOccluded:L.RenderOccludedFlag.OccludeAndTransparent});W=H.createPolylineGeometry(ka,[[fa,0,0],[fa-q.SHIFT_RESTART_OFFSET_DISTANCE,0,0]]);fa=H.createPolylineGeometry(ka,[[fa,0,0],[fa-q.SHIFT_RESTART_OFFSET_DISTANCE,0,0]]);return new D.Manipulator3D({view:O,
renderObjects:[...Z.normal.map(ea=>new I.RenderObject(ea,T.ManipulatorStateFlags.Unfocused|R)),...aa.normal.map(ea=>new I.RenderObject(ea,T.ManipulatorStateFlags.Unfocused|R)),new I.RenderObject(W,T.ManipulatorStateFlags.Unfocused|R|ca),...Z.focused.map(ea=>new I.RenderObject(ea,T.ManipulatorStateFlags.Focused|R)),...aa.focused.map(ea=>new I.RenderObject(ea,T.ManipulatorStateFlags.Focused|R)),new I.RenderObject(fa,T.ManipulatorStateFlags.Focused|R|ca)],autoScaleRenderObjects:!1,collisionType:{type:"line",
paths:[Q]},collisionPriority:1,radius:q.SHIFT_RESTART_TIP_RADIUS,state:R})};a.createShiftPlane=function(O,W,fa,aa){fa=c.cross(t.sv3d.get(),W,fa);c.cross(fa,fa,W);return d.fromPositionAndNormal(O,fa,aa)};a.forceHorizontalOrVertical=ja;a.isDiagonalResizeHandle=za;a.isIBuildingSceneLayerView3D=function(O){return null!=("building-scene-3d"===O.type?O:null)};a.normalToBases=U;a.planeToExtent=function(O,W,fa){if(null==O)return null;const aa=O.origin,Q=t.sv3d.get(),Z=t.sv3d.get(),ka=t.sv3d.get(),ea=t.sv3d.get();
c.add(Q,aa,O.basis1);c.add(Q,Q,O.basis2);c.add(Z,aa,O.basis1);c.sub(Z,Z,O.basis2);c.sub(ka,aa,O.basis1);c.sub(ka,ka,O.basis2);c.sub(ea,aa,O.basis1);c.add(ea,ea,O.basis2);let na,ya,Ba,Ca,wa,P;for(const S of[Q,Z,ka,ea]){O=W.fromRenderCoords(S,S,fa);if(null==O)return null;na=null==na?O[0]:Math.min(na,O[0]);ya=null==ya?O[0]:Math.max(ya,O[0]);Ba=null==Ba?O[1]:Math.min(Ba,O[1]);Ca=null==Ca?O[1]:Math.max(Ca,O[1]);wa=null==wa?O[2]:Math.min(wa,O[2]);P=null==P?O[2]:Math.max(P,O[2])}return new Y({xmin:na,xmax:ya,
ymin:Ba,ymax:Ca,zmin:wa,zmax:P,spatialReference:fa})};a.planeToShape=function(O,W,fa,aa=new x){if(null==O)return null;const {renderCoordsHelper:Q}=W;var Z=Q.fromRenderCoords(O.origin,W.spatialReference);if(null==Z)return null;Z=B.tryProjectWithZConversion(Z,fa);if(null==Z)return null;aa.position=Z;Z=2*c.length(O.basis1);const ka=2*c.length(O.basis2);W=A.RenderCoordsHelper.renderUnitScaleFactor(W.spatialReference,fa);aa.width=Z*W;aa.height=ka*W;W=Q.worldUpAtPosition(O.origin,t.sv3d.get());aa.tilt=
n.rad2deg(h.angleAroundAxis(W,O.basis2,O.basis1)+xa);aa.heading=Q.headingAtPosition(O.origin,O.basis1)-90;return aa};a.projectAndElevationAlignShape=V;a.projectedShapeToPlane=ha;a.resizeNormal=ma;a.resizeOutlineOnly=Aa;a.resizePlane=function(O,W,fa,aa,Q,Z){const ka=c.copy(t.sv3d.get(),Q.origin);c.add(ka,ka,c.scale(t.sv3d.get(),Q.basis1,0>O.direction[0]?1:-1));c.add(ka,ka,c.scale(t.sv3d.get(),Q.basis2,0>O.direction[1]?1:-1));var ea=c.length(Q.basis1);const na=c.length(Q.basis2);fa=c.subtract(t.sv3d.get(),
fa,ka);var ya=c.subtract(t.sv3d.get(),W,ka);let Ba=0;W=0;if(za(O)){var Ca=pa(Q);const wa=pa(Z);Ba=ea-.5*O.direction[0]*c.dot(Q.basis1,ya)/ea;W=na-.5*O.direction[1]*c.dot(Q.basis2,ya)/na;ya=wa/Ca;Ba*=ya;W*=ya}ya=.5*O.direction[0]*c.dot(Q.basis1,fa)/ea;Ca=.5*O.direction[1]*c.dot(Q.basis2,fa)/na;fa=Ba+ya;W+=Ca;ea=c.scale(t.sv3d.get(),Q.basis1,fa/ea);Q=c.scale(t.sv3d.get(),Q.basis2,W/na);(0>=fa||qa(Z.origin,ea,aa)<=q.PLANE_MIN_BASIS_SCREEN_LEN2)&&c.copy(ea,Z.basis1);(0>=W||qa(Z.origin,Q,aa)<=q.PLANE_MIN_BASIS_SCREEN_LEN2)&&
c.copy(Q,Z.basis2);aa=c.copy(t.sv3d.get(),ka);c.add(aa,aa,c.scale(t.sv3d.get(),ea,0>O.direction[0]?-1:1));c.add(aa,aa,c.scale(t.sv3d.get(),Q,0>O.direction[1]?-1:1));return b.fromValues(aa,ea,Q,Z)};a.shapeToPlane=function(O,W,fa,aa=b.create()){O=V(O,W);return null==O?null:ha(O,W,fa,aa)};a.updateResizeHandle=function(O,W,fa,aa){var Q=c.length(aa.basis1);const Z=c.length(aa.basis2),ka=pa(aa),ea=pa(aa),na=c.set(t.sv3d.get(),0,0,0);c.add(na,c.scale(t.sv3d.get(),aa.basis1,W.direction[0]),c.scale(t.sv3d.get(),
aa.basis2,W.direction[1]));c.add(na,aa.origin,na);aa=0;let ya=1;za(W)?(1===W.direction[0]&&-1===W.direction[1]?aa=xa:1===W.direction[0]&&1===W.direction[1]?aa=Math.PI:-1===W.direction[0]&&1===W.direction[1]&&(aa=3*Math.PI/2),ya=ea):(W=0!==W.direction[0]?1:2,aa=1===W?xa:0,ya=(1===W?Z:Q)-ka);Q=f.fromZRotation(t.sm4d.get(),aa);f.scale(Q,Q,c.set(t.sv3d.get(),ya,ya,ya));f.multiply(Q,fa,Q);Q[12]=0;Q[13]=0;Q[14]=0;O.modelTransform=Q;O.renderLocation=na};a.updateRotateHeadingHandle=function(O,W,fa,aa){aa=
aa.worldUpAtPosition(fa.origin,t.sv3d.get());const Q=ra(fa,da.POSITIVE_X),Z=f.fromZRotation(t.sm4d.get(),Q.edge*Math.PI/2);f.rotateX(Z,Z,-(h.angleAroundAxis(aa,fa.basis2,fa.basis1)+xa));f.multiply(Z,W,Z);Z[12]=0;Z[13]=0;Z[14]=0;O.modelTransform=Z;O.renderLocation=Q.position};a.updateRotateTiltHandle=function(O,W,fa){fa=ra(fa,da.POSITIVE_Y);const aa=f.fromZRotation(t.sm4d.get(),fa.edge*Math.PI/2);f.rotateX(aa,aa,xa);f.multiply(aa,W,aa);aa[12]=0;aa[13]=0;aa[14]=0;O.modelTransform=aa;O.renderLocation=
fa.position};a.updateShiftRestartHandle=function(O,W,fa,aa){var Q=ra(fa,da.NEGATIVE_X);const Z=t.sm4d.get();f.rotateZ(Z,W,Q.edge*Math.PI/2);W=c.normalize(t.sv3d.get(),Q.basis);W=c.scale(t.sv3d.get(),W,Q.direction*aa.computeScreenPixelSizeAt(Q.position)*q.SHIFT_RESTART_OFFSET_DISTANCE);c.add(W,W,Q.position);Q=aa.projectToRenderScreen(W,k.castRenderScreenPointArray3(t.sv3d.get()));const [ka,ea,na,ya]=aa.viewport;var Ba=Math.min(na,ya)/16;let Ca=!0;Q[0]<ka+Ba?(Q[0]=ka+Ba,Ca=!1):Q[0]>ka+na-Ba&&(Q[0]=
ka+na-Ba,Ca=!1);Q[1]<ea+Ba?(Q[1]=ea+Ba,Ca=!1):Q[1]>ea+ya-Ba&&(Q[1]=ea+ya-Ba,Ca=!1);Ba=Ca;K.fromRender(aa,Q,sa);c.normalize(sa.direction,sa.direction);aa=t.sv3d.get();!Ba&&b.intersectRay(fa,sa,aa)&&(W=aa);Z[12]=0;Z[13]=0;Z[14]=0;O.modelTransform=Z;O.renderLocation=w.clone(W);O.state=Ba?O.state|ca:O.state&~ca};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/analysis/SlicePlane":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../geometry ../core/Clonable ../core/Cyclical ../core/JSONSupport ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/persistable ../geometry/Point".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c,w,B,u){e=function(b){function d(l){l=b.call(this,l)||this;l.type="plane";l.position=null;l.heading=0;l.tilt=0;l.width=10;l.height=10;return l}a._inherits(d,b);d.prototype.equals=function(l){return this.heading===l.heading&&this.tilt===l.tilt&&n.equalsMaybe(this.position,l.position)&&this.width===l.width&&this.height===l.height};return a._createClass(d)}(x.ClonableMixin(p.JSONSupport));r.__decorate([k.property({readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",
void 0);r.__decorate([k.property({type:u}),B.persistable()],e.prototype,"position",void 0);r.__decorate([k.property({type:Number,nonNullable:!0,range:{min:0,max:360}}),B.persistable(),f.cast(b=>m.cyclicalDegrees.normalize(w.ensureNumber(b),0,!0))],e.prototype,"heading",void 0);r.__decorate([k.property({type:Number,nonNullable:!0,range:{min:0,max:360}}),B.persistable(),f.cast(b=>m.cyclicalDegrees.normalize(w.ensureNumber(b),0,!0))],e.prototype,"tilt",void 0);r.__decorate([k.property({type:Number,nonNullable:!0}),
B.persistable()],e.prototype,"width",void 0);r.__decorate([k.property({type:Number,nonNullable:!0}),B.persistable()],e.prototype,"height",void 0);return e=r.__decorate([c.subclass("esri.analysis.SlicePlane")],e)})},"esri/views/3d/analysis/Slice/settings":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../Color","../../../../core/analysisThemeUtils"],function(a,r,e,x){let m=r._createClass(function(){this.color=x.getAccentColor()}),p=r._createClass(function(){this.color=
new e([0,0,0,.04]);this.gridColor=x.getAccentColor(.5);this.outlineColor=x.getAccentColor(.7)}),n=r._createClass(function(){this.color=x.getAccentColor()}),k=r._createClass(function(){this.color=x.getAccentColor(.5);this.contrastColor=x.getContrastColor()}),f=r._createClass(function(){this.color=x.getContrastColor();this.outlineColor=x.getAccentColor()}),g=r._createClass(function(){this.callouts=new m;this.plane=new p;this.resizeManipulators=new n;this.rotateManipulators=new k;this.shiftManipulator=
new f});a.settings=new g;a.reloadSettings=function(){a.settings=new g};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/analysis/Slice/sliceToolConfig":function(){define(["exports","../../../../core/has","../../../../core/mathUtils"],function(a,r,e){r=r("mac")?"Meta":"Control";const x=Math.cos(e.deg2rad(45));e=Math.cos(e.deg2rad(5));a.DISPLAY_FOCUS_MULTIPLIER=2;a.INITIAL_DEPTH_OFFSET_FRAC=.02;a.INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION=.4;a.PLANE_MIN_BASIS_SCREEN_LEN2=
1600;a.PLANE_OUTLINE_WIDTH=1;a.PLANE_PREVIEW_OUTLINE_WIDTH=2;a.POINTER_MOVE_TIMER_MS=2500;a.PREVIEW_FADE_DOT_THRESHOLD=.95;a.PREVIEW_FADE_DURATION_SECONDS=.3;a.RESIZE_HANDLE_CORNER_INPUT_RADIUS=6;a.RESIZE_HANDLE_CORNER_WIDTH=4;a.RESIZE_HANDLE_EDGE_INPUT_RADIUS=4;a.RESIZE_HANDLE_EDGE_PADDING_FRAC=.3;a.RESIZE_HANDLE_EDGE_WIDTH=1;a.SHIFT_RESTART_ARROW_LENGTH=48;a.SHIFT_RESTART_ARROW_OUTLINE_WIDTH=2.25;a.SHIFT_RESTART_OFFSET_DISTANCE=40;a.SHIFT_RESTART_TIP_FOCUS_MULTIPLIER=1.15;a.SHIFT_RESTART_TIP_LENGTH=
22.5;a.SHIFT_RESTART_TIP_RADIUS=11;a.SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER=1.15;a.SHIFT_RESTART_TUBE_RADIUS=3;a.SMALL_ANGLE_DOT_THRESHOLD=e;a.VERTICAL_DOT_THRESHOLD=x;a.forceHorizontalModifier=r;a.forceVerticalModifier="Shift";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/analysis/support/projectionUtils":function(){define(["exports","../../../../geometry/projection","../../support/ElevationProvider"],function(a,r,e){a.applyProjectionAndElevationAlignment=function(x,
m,p,n=!1){x=r.tryProjectWithZConversion(x,m);if(null==x)return null;x.hasZ&&!n||null==p||(x.z=e.getElevationAtPoint(p,x)??0);return x};a.logFailedGeometryProjectionError=function(x,m,p){p.warnOnce(`Failed to project analysis geometry (id: '${x.id}'), projection from spatial reference `+`(wkid: '${m.wkid}') to view spatial reference is not supported. `+"Projection may be possible after calling projection.load().")};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/LineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ./Object3DVisualElement ../../support/engineContent/line ../../webgl-engine/lib/Material ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v){k=function(w){function B(b,d){var l=w.call(this,b)||this;l._hasExternalMaterial=!1;l._hasExternalMaterial=null!=d;l._material=null!=d?d:new v.RibbonLineMaterial({width:1,color:n.fromValues(1,0,1,1),stippleOffColor:null,stipplePattern:null,stipplePreferContinuous:!0,isClosed:!1,falloff:0,innerColor:null,innerWidth:1,hasPolygonOffset:!1,renderOccluded:g.RenderOccludedFlag.OccludeAndTransparent,writeDepth:!0});l.applyProps(b);return l}r._inherits(B,w);var u=B.prototype;
u.setGeometryFromRenderSpacePoint=function(b,d=1E3){this.geometry=[[[b[0]-d,b[1],b[2]],[b[0]+d,b[1],b[2]]],[[b[0],b[1]-d,b[2]],[b[0],b[1]+d,b[2]]],[[b[0],b[1],b[2]-d],[b[0],b[1],b[2]+d]]]};u.setGeometryFromExtent=function(b){const d=this.view.spatialReference,l=p.create(),h=p.create(),t=[];m.set(l,b[0],b[1],100);this.view.renderCoordsHelper.toRenderCoords(l,d,h);t.push([h[0],h[1],h[2]]);m.set(l,b[2],b[1],100);this.view.renderCoordsHelper.toRenderCoords(l,d,h);t.push([h[0],h[1],h[2]]);m.set(l,b[2],
b[3],100);this.view.renderCoordsHelper.toRenderCoords(l,d,h);t.push([h[0],h[1],h[2]]);m.set(l,b[0],b[3],100);this.view.renderCoordsHelper.toRenderCoords(l,d,h);t.push([h[0],h[1],h[2]]);m.set(l,b[0],b[1],100);this.view.renderCoordsHelper.toRenderCoords(l,d,h);t.push([h[0],h[1],h[2]]);m.set(l,b[0],b[1],100);this.view.renderCoordsHelper.toRenderCoords(l,d,h);t.push([h[0],h[1],h[2]]);this.geometry=[t]};u.setGeometryFromFrustum=function(b){const d=[];b.lines.forEach(l=>{d.push([l.origin[0],l.origin[1],
l.origin[2]]);d.push([l.endpoint[0],l.endpoint[1],l.endpoint[2]])});this.geometry=[d]};u.setGeometryFromBoundedPlane=function(b){const d=[],l=b.origin,h=b.basis1;b=b.basis2;const t=p.create(),y=p.create(),q=p.create(),C=p.create();t[0]=l[0]-.5*h[0]-.5*b[0];t[1]=l[1]-.5*h[1]-.5*b[1];t[2]=l[2]-.5*h[2]-.5*b[2];y[0]=l[0]-.5*h[0]+.5*b[0];y[1]=l[1]-.5*h[1]+.5*b[1];y[2]=l[2]-.5*h[2]+.5*b[2];q[0]=l[0]+.5*h[0]+.5*b[0];q[1]=l[1]+.5*h[1]+.5*b[1];q[2]=l[2]+.5*h[2]+.5*b[2];C[0]=l[0]+.5*h[0]-.5*b[0];C[1]=l[1]+
.5*h[1]-.5*b[1];C[2]=l[2]+.5*h[2]-.5*b[2];d.push([t[0],t[1],t[2]]);d.push([y[0],y[1],y[2]]);d.push([q[0],q[1],q[2]]);d.push([C[0],C[1],C[2]]);d.push([t[0],t[1],t[2]]);this.geometry=[d]};u.setGeometryFromSegment=function(b){const d=b.endRenderSpace;this.transform=e.fromTranslation(c,d);({points:b}=b.createRenderGeometry(d,this.view.renderCoordsHelper));this.geometry=[b]};u.setGeometryFromSegments=function(b,d=p.ZEROS){this.transform=e.fromTranslation(c,d);this.geometry=b.map(l=>l.createRenderGeometry(d,
this.view.renderCoordsHelper).points)};u.getTransformedGeometry=function(){return null==this._geometry?null:this._geometry.map(b=>b.map(d=>m.transformMat4(p.create(),d,this.transform)))};u.createExternalResources=function(){};u.destroyExternalResources=function(){};u.createGeometries=function(b){for(const d of f.lineStripsToParameters(this.geometry)){const l=f.createGeometry(this._material,d);b.addGeometry(l)}};u.forEachExternalMaterial=function(b){this._hasExternalMaterial||b(this._material)};r._createClass(B,
[{key:"renderOccluded",get:function(){return this._material.parameters.renderOccluded},set:function(b){this._material.setParameters({renderOccluded:b})}},{key:"geometry",get:function(){return this._geometry},set:function(b){this._geometry=b;this.recreateGeometry()}},{key:"width",get:function(){return this._material.parameters.width},set:function(b){this._material.setParameters({width:b})}},{key:"color",get:function(){return this._material.parameters.color},set:function(b){const d=1===b[3];this._material.setParameters({color:n.clone(b),
writeDepth:d})}},{key:"innerWidth",get:function(){return this._material.parameters.innerWidth},set:function(b){this._material.setParameters({innerWidth:b})}},{key:"innerColor",get:function(){return this._material.parameters.innerColor},set:function(b){this._material.setParameters({innerColor:null!=b?n.clone(b):null})}},{key:"stipplePattern",get:function(){return this._material.parameters.stipplePattern},set:function(b){null!=this._material&&this._material.setParameters({stipplePattern:b})}},{key:"stippleOffColor",
get:function(){return this._material.parameters.stippleOffColor},set:function(b){this._material.setParameters({stippleOffColor:null!=b?n.clone(b):null})}},{key:"stipplePreferContinuous",get:function(){return this._material.parameters.stipplePreferContinuous},set:function(b){this._material.setParameters({stipplePreferContinuous:b})}},{key:"falloff",get:function(){return this._material.parameters.falloff},set:function(b){this._material.setParameters({falloff:b})}},{key:"polygonOffset",get:function(){return this._material.parameters.hasPolygonOffset},
set:function(b){this._material.setParameters({hasPolygonOffset:b})}}]);return B}(k.Object3DVisualElement);const c=x.create();a.LineVisualElement=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/SlicePlaneVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec4 ../../../../chunks/vec4f64 ./Object3DVisualElement ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/materials/SlicePlaneMaterial".split(" "),
function(a,r,e,x,m,p,n,k){m=function(f){function g(c){var w=f.call(this,c)||this;w._material=null;w._renderOccluded=n.RenderOccludedFlag.OccludeAndTransparent;w._gridWidth=1;w._gridColor=x.fromValues(1,0,0,1);w._backgroundColor=x.fromValues(1,0,0,1);w.applyProps(c);return w}r._inherits(g,f);var v=g.prototype;v.createExternalResources=function(){this._material=new k.SlicePlaneMaterial(this._materialParameters)};v.destroyExternalResources=function(){this._material=null};v.forEachExternalMaterial=function(c){null!=
this._material&&c(this._material)};v.createGeometries=function(c){if(null!=this._material){const w=p.createSquareGeometry(this._material);c.addGeometry(w)}};v._updateMaterial=function(){null!=this._material&&this._material.setParameters(this._materialParameters)};r._createClass(g,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(c){c!==this._renderOccluded&&(this._renderOccluded=c,this._updateMaterial())}},{key:"gridWidth",get:function(){return this._gridWidth},set:function(c){this._gridWidth!==
c&&(this._gridWidth=c,this._updateMaterial())}},{key:"gridColor",get:function(){return this._gridColor},set:function(c){e.copy(this._gridColor,c);this._updateMaterial()}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(c){e.copy(this._backgroundColor,c);this._updateMaterial()}},{key:"_materialParameters",get:function(){return{backgroundColor:this._backgroundColor,gridWidth:this._gridWidth,gridColor:this._gridColor,renderOccluded:this._renderOccluded}}}]);return g}(m.Object3DVisualElement);
a.SlicePlaneVisualElement=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/SlicePlaneMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ./DefaultBufferWriter ./DefaultLayouts ./TriangleMaterial ../shaders/SlicePlaneMaterialTechnique".split(" "),function(a,r,e,x,m,p,n,k,f,g,v){g=
function(B){function u(d){d=B.call(this,d,new w)||this;d._configuration=new x.ShaderTechniqueConfiguration;return d}r._inherits(u,B);var b=u.prototype;b.createBufferWriter=function(){return new k.DefaultBufferWriter(f.PositionUVLayout)};b.requiresSlot=function(d,l){return l===e.ShaderOutput.Color&&d===n.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL};b.createGLMaterial=function(d){return new c(d)};b.getConfiguration=function(){return this._configuration};return r._createClass(u)}(g.TriangleMaterial);
let c=function(B){function u(b){b=B.call(this,b)||this;b.ensureTechnique(v.SlicePlaneMaterialTechnique,null);return b}r._inherits(u,B);u.prototype.beginSlot=function(){return this.technique};return r._createClass(u)}(m),w=function(B){function u(){var b=B.apply(this,arguments)||this;b.renderOccluded=p.RenderOccludedFlag.Occlude;return b}r._inherits(u,B);return r._createClass(u)}(v.SlicePlaneMaterialPassParameters);a.Parameters=w;a.SlicePlaneMaterial=g;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/shaders/SlicePlaneMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec4f64 ../core/shaderModules/interfaces ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/DefaultVertexAttributeLocations ../lib/Program ../../../../chunks/SlicePlaneMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),function(a,r,e,x,m,p,n,k,f,g,v,c){m=function(w){function B(){var u=
w.apply(this,arguments)||this;u.backgroundColor=x.fromValues(1,0,0,.5);u.gridColor=x.fromValues(0,1,0,.5);u.gridWidth=4;return u}e._inherits(B,w);return e._createClass(B)}(m.NoParameters);n=function(w){function B(){return w.apply(this,arguments)||this}e._inherits(B,w);var u=B.prototype;u.initializeProgram=function(b){return new f.Program(b.rctx,B.shader.get().build(this.configuration),k.Default3D)};u.initializePipeline=function(){return c.makePipelineState({blending:c.separateBlendingParams(v.BlendFactor.ONE,
v.BlendFactor.ONE,v.BlendFactor.ONE_MINUS_SRC_ALPHA,v.BlendFactor.ONE_MINUS_SRC_ALPHA),depthTest:{func:v.CompareFunction.LESS},colorWrite:c.defaultColorWriteParams})};return e._createClass(B)}(n.ShaderTechnique);n.shader=new p.ReloadableShaderModule(g.SlicePlaneMaterial,()=>new Promise((w,B)=>a(["./SlicePlaneMaterial.glsl"],w,B)));r.SlicePlaneMaterialPassParameters=m;r.SlicePlaneMaterialTechnique=n;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/SlicePlaneMaterial.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/lib/VertexAttribute".split(" "),
function(a,r,e,x,m,p,n){function k(g){const v=new p.ShaderBuilder,{vertex:c,fragment:w,attributes:B,varyings:u}=v;r.addProjViewLocalOrigin(c,g);B.add(n.VertexAttribute.POSITION,"vec3");B.add(n.VertexAttribute.UV0,"vec2");u.add("vUV","vec2");c.code.add(m.glsl`void main(void) {
vUV = uv0;
gl_Position = proj * view * vec4(position, 1.0);
}`);w.uniforms.add(new e.Float4PassUniform("backgroundColor",b=>b.backgroundColor),new e.Float4PassUniform("gridColor",b=>b.gridColor),new x.FloatPassUniform("gridWidth",b=>b.gridWidth));w.code.add(m.glsl`void main() {
const float LINE_WIDTH = 1.0;
vec2 uvScaled = vUV * gridWidth;
vec2 gridUV = (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));
vec2 grid = (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);
grid.x *= step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);
grid.y *= step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);
float gridFade = max(grid.x, grid.y);
float gridAlpha = gridColor.a * gridFade;
fragColor =
vec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +
vec4(gridColor.rgb, 1.0) * gridAlpha;
}`);return v}const f=Object.freeze(Object.defineProperty({__proto__:null,build:k},Symbol.toStringTag,{value:"Module"}));a.SlicePlaneMaterial=f;a.build=k})},"esri/views/3d/analysis/Slice/images/Factory":function(){define(["exports","./generateTextures","./heading-rotate-svg","./tilt-rotate-svg","../../../webgl-engine/lib/Texture"],function(a,r,e,x,m){a.getRotateHeadingTexture=function(p,n){const {accentColor:k,contrastColor:f,preMultiplyAlpha:g}=n;return p.fromData(`heading-rotate:[accent:${k},contrast:${f},size:${64}]`,
()=>new m.Texture(r.generateStyledTexture(e,{accentColor:k,contrastColor:f,size:64}),{mipmap:!0,preMultiplyAlpha:g}))};a.getTiltRotateTexture=function(p,n){const {accentColor:k,contrastColor:f,preMultiplyAlpha:g}=n;return p.fromData(`tilt-rotate:[accent:${k},contrast:${f},size:${64}]`,()=>new m.Texture(r.generateStyledTexture(x,{accentColor:k,contrastColor:f,size:64}),{mipmap:!0,preMultiplyAlpha:g}))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/analysis/Slice/images/generateTextures":function(){define(["exports"],
function(a){function r(e,{accentColor:x,contrastColor:m}){const p=x.toHex();x=x.a;const n=m.toHex();m=m.a;const k=e.getElementsByTagNameNS("http://www.w3.org/2000/svg","style").namedItem("theme-style");k&&(k.innerHTML=`\n      .contrast-fill { fill: ${n}; fill-opacity: ${m}; }\n      .contrast-stroke { stroke: ${n}; stroke-opacity: ${m};  }\n      .accent-fill { fill: ${p}; fill-opacity: ${x}; }\n      .accent-stroke { stroke: ${p}; stroke-opacity:  ${x}; }`);return e}a.generateStyledTexture=function(e,
x){e=e.split(",")[1];e=atob(e);e=(new DOMParser).parseFromString(e,"image/svg+xml");e=r(e,x);e=(new XMLSerializer).serializeToString(e);e=`data:image/svg+xml;base64,${btoa(e)}`;x=x.size;x=new Image(x,x);x.src=e;return x};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/analysis/Slice/images/heading-rotate-svg":function(){define(function(){return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NnoiIGNsYXNzPSJhY2NlbnQtZmlsbCIvPjxwYXRoIHN0cm9rZS13aWR0aD0iNC45OSIgZD0iTTIwLjA1IDQwLjg2YTE1LjA1IDE1LjA1IDAgMCAwIDE3LjE0LTEuNSAxNS4wNSAxNS4wNSAwIDAgMCA0LjQ3LTE2LjY1IDE1LjA1IDE1LjA1IDAgMCAwLTIyLjcyLTcuMTUgMTUuMDUgMTUuMDUgMCAwIDAtNS41IDcuMTUiIGNsYXNzPSJjb250cmFzdC1zdHJva2UiLz48cGF0aCBkPSJtMTAuOTcgMzUuNTcgNS4zOCAxMi4wNyA3Ljc5LTEzLjQ3LTEzLjE3IDEuNHoiIGNsYXNzPSJjb250cmFzdC1maWxsIi8+PC9zdmc+"})},
"esri/views/3d/analysis/Slice/images/tilt-rotate-svg":function(){define(function(){return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxjaXJjbGUgY3g9IjM5LjQ3OCIgY3k9IjMuMDc4IiByPSIyOCIgY2xhc3M9ImFjY2VudC1maWxsIiB0cmFuc2Zvcm09InJvdGF0ZSg0MC41NDIpIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI1IiBkPSJtNy4wNzQgMzAuMDUzIDI5LjM5NyAxMS45ODUtMy42NzMtMzMuNDkzIiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSIyLjk5NiIgZD0iTTI0LjUwNCAyMy4yMDdhMTEuOTgyIDExLjk4MiAwIDAgMC05LjggNy41MDciIGNsYXNzPSJjb250cmFzdC1zdHJva2UgY29udHJhc3QtZmlsbCIvPjxwYXRoIGQ9Im0yOS44MTggMjIuODA4LTYuMTg0IDQuNi0uNTQxLTguMzY0eiIgY2xhc3M9ImNvbnRyYXN0LWZpbGwiLz48L3N2Zz4\x3d"})},
"esri/views/3d/interactive/editingTools/transformGraphic/PreserveAspectRatio":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../analysis/Slice/sliceToolUtils","../../../../interactive/dragEventPipeline"],function(a,r,e,x){let m=function(){function p(){this._next=this._lastDragEvent=null;this._enabled=!1}var n=p.prototype;n.createDragEventPipelineStep=function(){this._lastDragEvent=null;const k=new x.EventPipeline;this._next=k;return[f=>{this._lastDragEvent="end"!==
f.action?{...f}:null;this._enabled&&this._adjustScaleFactors(f);return f},k]};n._adjustScaleFactors=function(k){const f=e.isDiagonalResizeHandle(k.handle)?Math.max(Math.abs(k.factor1),Math.abs(k.factor2)):0===k.handle.direction[0]?Math.abs(k.factor2):Math.abs(k.factor1);k.factor1=0>k.factor1?-f:f;k.factor2=0>k.factor2?-f:f};r._createClass(p,[{key:"enabled",get:function(){return this._enabled},set:function(k){if(this._enabled!==k&&null!=this._lastDragEvent&&null!=this._next){const f={...this._lastDragEvent,
action:"update"};k&&this._adjustScaleFactors(f);this._next.execute(f)}this._enabled=k}},{key:"test",get:function(){return{_adjustScaleFactors:k=>this._adjustScaleFactors(k)}}}]);return p}();a.PreserveAspectRatio=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/support/editPlaneUtils":function(){define("exports ../../../../core/quantityUtils ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/boundedPlane ../../../../geometry/support/vectorStacks ../operations/MoveVertex ../operations/RotateVertex ../operations/ScaleVertex ../operations/UpdateVertices ../../../support/automaticLengthMeasurementUtils".split(" "),
function(a,r,e,x,m,p,n,k,f,g,v,c){function w(d,l,h){if(d instanceof v.UpdateVertices){if(d.operation instanceof k.MoveVertex)return B(d.operation,l,h),!0;if(d.operation instanceof f.RotateVertex)return u(d.operation,l,h),!0;if(d.operation instanceof g.ScaleVertex)return b(d.operation,l,h),!0}return!1}function B(d,l,h=!1){h=h?-1:1;d=m.fromValues(h*d.dx,h*d.dy,h*d.dz);x.add(l.origin,l.origin,d)}function u(d,l,h=!1){d=h?-d.angle:d.angle;x.rotateZ(l.basis1,l.basis1,m.ZEROS,d);x.rotateZ(l.basis2,l.basis2,
m.ZEROS,d)}function b(d,l,h=!1){const t=h?1/d.factor1:d.factor1;h=h?1/d.factor2:d.factor2;x.scale(l.basis1,l.basis1,t);x.scale(l.basis2,l.basis2,h);e.projectAndScale(l.origin,l.origin,d.origin,d.axis1,t);e.projectAndScale(l.origin,l.origin,d.origin,d.axis2,h)}a.apply=function(d,l){return w(d,l,!1)};a.calculateOrientedBounds=function(d,l,h,t){t||(t=p.create());const y=e.set(n.sv2d.get(),d[1],-d[0]),q=e.set(n.sv2d.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),C=e.set(n.sv2d.get(),Number.NEGATIVE_INFINITY,
Number.NEGATIVE_INFINITY),D=n.sv2d.get();l.components.forEach(F=>F.vertices.forEach(I=>{I=I.pos;e.set(D,e.dot(d,I),e.dot(y,I));e.min(q,q,D);e.max(C,C,D)}));l=e.set(n.sv2d.get(),1E-6>C[0]-q[0]?h/2:0,1E-6>C[1]-q[1]?h/2:0);e.subtract(q,q,l);e.add(C,C,l);e.scale(t.basis1,d,(C[0]-q[0])/2);e.scale(t.basis2,y,(C[1]-q[1])/2);e.set(t.origin,q[0]*d[0]+q[1]*y[0],q[0]*d[1]+q[1]*y[1]);e.add(t.origin,t.origin,t.basis1);e.add(t.origin,t.origin,t.basis2);return t};a.mapPlaneAutoHorizontalSizeByElevationMode=function(d,
l,h,t){const y=n.sv3d.get();x.subtract(y,x.subtract(y,d.origin,d.basis1),d.basis2);const q=n.sv3d.get();x.scaleAndAdd(q,y,d.basis1,2);const C=n.sv3d.get();x.scaleAndAdd(C,q,d.basis2,2);const D=n.sv3d.get();x.scaleAndAdd(D,y,d.basis2,2);y[2]=q[2]=C[2]=D[2]=l;l=t?"on-the-ground":"absolute-height";d=r.max(c.autoHorizontalDistanceByElevationMode(y,q,h,l),c.autoHorizontalDistanceByElevationMode(D,C,h,l));h=r.max(c.autoHorizontalDistanceByElevationMode(q,C,h,l),c.autoHorizontalDistanceByElevationMode(y,
D,h,l));return null==h||null==d?null:[d,h]};a.mapPlaneToRenderPlane=function(d,l,h,t=0,y){y||(y=p.create());l.toRenderCoords(d.origin,h,y.origin);var q=n.sv3d.get();x.add(q,d.origin,d.basis1);x.add(q,q,d.basis2);l.toRenderCoords(q,h,q);var C=n.sv3d.get();x.add(C,d.origin,d.basis1);x.subtract(C,C,d.basis2);l.toRenderCoords(C,h,C);const D=n.sv3d.get();x.subtract(D,d.origin,d.basis1);x.subtract(D,D,d.basis2);l.toRenderCoords(D,h,D);const F=n.sv3d.get();x.subtract(F,d.origin,d.basis1);x.add(F,F,d.basis2);
l.toRenderCoords(F,h,F);d=x.lerp(n.sv3d.get(),q,C,.5);x.subtract(d,d,y.origin);l=x.lerp(n.sv3d.get(),D,F,.5);x.subtract(l,y.origin,l);x.lerp(y.basis1,d,l,.5);q=x.lerp(n.sv3d.get(),F,q,.5);x.subtract(q,q,y.origin);C=x.lerp(n.sv3d.get(),C,D,.5);x.subtract(C,y.origin,C);x.lerp(y.basis2,q,C,.5);C=x.cross(n.sv3d.get(),y.basis1,y.basis2);C=x.cross(C,C,y.basis1);x.normalize(C,C);x.scale(y.basis2,C,x.dot(y.basis2,C));x.scale(y.basis1,y.basis1,1+t/x.length(y.basis1));x.scale(y.basis2,y.basis2,1+t/x.length(y.basis2));
p.updateUnboundedPlane(y);return y};a.unapply=function(d,l){return w(d,l,!0)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/ExtentTooltipInfos":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/quantityUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ./SketchTooltipInfo".split(" "),function(a,r,e,x,m,p,n){a.ExtentRotateTooltipInfo=function(k){function f(g){g=
k.call(this,g)||this;g.type="extent-rotate";g.angle=0;return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.ExtentRotateTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.ExtentRotateTooltipInfo.prototype,"angle",void 0);a.ExtentRotateTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.ExtentRotateTooltipInfo")],a.ExtentRotateTooltipInfo);a.ExtentScaleTooltipInfo=function(k){function f(g){g=k.call(this,g)||this;g.type=
"extent-scale";g.xScale=0;g.yScale=0;g.xSize=x.zeroMeters;g.ySize=x.zeroMeters;return g}r._inherits(f,k);return r._createClass(f)}(n.SketchTooltipInfo);e.__decorate([m.property()],a.ExtentScaleTooltipInfo.prototype,"type",void 0);e.__decorate([m.property()],a.ExtentScaleTooltipInfo.prototype,"xScale",void 0);e.__decorate([m.property()],a.ExtentScaleTooltipInfo.prototype,"yScale",void 0);e.__decorate([m.property()],a.ExtentScaleTooltipInfo.prototype,"xSize",void 0);e.__decorate([m.property()],a.ExtentScaleTooltipInfo.prototype,
"ySize",void 0);a.ExtentScaleTooltipInfo=e.__decorate([p.subclass("esri.views.interactive.tooltip.ExtentScaleTooltipInfo")],a.ExtentScaleTooltipInfo);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ./editingTools/draw/DrawGraphicTool3D ./editingTools/moveGraphic/GraphicMoveTool ./editingTools/reshapeGraphic/GraphicReshapeTool ./editingTools/transformGraphic/GraphicTransformTool ./editingTools/transformGraphic/ExtentTransformTool".split(" "),function(a,r,e,x,m,p){Object.defineProperty(a,"DrawGraphicTool3D",{enumerable:!0,get:()=>r.DrawGraphicTool3D});Object.defineProperty(a,"GraphicMoveTool",{enumerable:!0,get:()=>e.GraphicMoveTool});Object.defineProperty(a,"GraphicReshapeTool",
{enumerable:!0,get:()=>x.GraphicReshapeTool});Object.defineProperty(a,"GraphicTransformTool",{enumerable:!0,get:()=>m.GraphicTransformTool});Object.defineProperty(a,"ExtentTransformTool",{enumerable:!0,get:()=>p.ExtentTransformTool});Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});