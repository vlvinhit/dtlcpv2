// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/mathUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass".split(" "),function(f,v,d,A,B,w,x,e,D,E,F,y){function z(r){return-w.deg2rad(r)}
f.ScaleRotateObjectSymbol3DAdapter=function(r){function p(a){a=r.call(this,a)||this;a.sizeAxis=null;a._interactionState=null;return a}v._inherits(p,r);var k=p.prototype;k.initialize=function(){this.addHandles(x.when(()=>null!=this._interactionState?this._interactionState.state:null,a=>{this._updateSymbol(a)},x.sync))};k.startInteraction=function(){const a=this._graphicSymbol,c=this.findLayerView();if(null!=this._interactionState||null==a||null==c)return C;var b=a.symbolLayers.map(t=>"object"===t.type?
c.getSymbolLayerSize(a,t):null).toArray();const m=a.clone();this._interactionState=b=new n({originalSymbol:m,angle:this.angle,initialSizes:b});const h=()=>{this._interactionState=null};return{state:b,done:h,cancel:()=>{this._graphicSymbol=m;h()}}};k.createUndoRecord=function(){let a=this.graphic.symbol,c=null;return{undo:b=>{c=b.symbol;b.symbol=a},redo:b=>{a=b.symbol;b.symbol=c}}};k._updateSymbol=function({scale:a,angle:c,originalSymbol:b,initialSizes:m}){var h=this._graphicSymbol;if(null!=h&&"point-3d"===
h.type){h=h.clone();var t=-w.rad2deg(c-this.initialAngle),u=!1;this._forEachObjectSymbolLayerPair(b,h,(l,q,g)=>{l=(l.heading??0)+t;q.heading!==l&&(q.heading=l,u=!0);g=m[g];null!=g&&"width"in g&&(g.width=this.sizeFilter(g.width),g.height=this.sizeFilter(g.height),g.depth=this.sizeFilter(g.depth),l=g.width*a,q.width!==l&&(q.width=l,u=!0),l=g.depth*a,q.depth!==l&&(q.depth=l,u=!0),g=g.height*a,q.height!==g&&(q.height=g,u=!0))});u&&(this._graphicSymbol=h)}};k._forEachObjectSymbolLayerPair=function(a,c,
b){a.symbolLayers.forEach((m,h)=>{const t=c.symbolLayers.at(h);"object"===m.type&&"object"===t.type&&b(m,t,h)})};v._createClass(p,[{key:"initialAngle",get:function(){return this._interactionState?.initialAngle??0}},{key:"angle",get:function(){return null!=this._interactionState?this._interactionState.angle:null!=this._orientationReferenceSymbolLayer?z(this._orientationReferenceSymbolLayer.heading??0):0}},{key:"angleClockwise",get:function(){return-this.angle}},{key:"orientation",get:function(){return this.angle}},
{key:"orientationClockwise",get:function(){return this.angleClockwise}},{key:"relativeAngle",get:function(){return this.angle-this.initialAngle}},{key:"relativeAngleClockwise",get:function(){return-this.relativeAngle}},{key:"scale",get:function(){return this._interactionState?.scale??1}},{key:"size",get:function(){const a=this._sizeReferenceSymbolLayer;if(null==a)return null;var c=this.findLayerView(),b=this._graphicSymbol;if(null==c||null==b||"point-3d"!==b.type)return null;c=c.getSymbolLayerSize(b,
a);if("size"in c&&null!=c.size)return c.size;b=this.sizeAxis;return"width"in c&&null!=c.width&&(null==b||"width"===b||"all"===b||"width-and-depth"===b)?c.width:"depth"in c&&null!=a.depth&&(null==b||"depth"===b||"all"===b||"width-and-depth"===b)?c.depth:"height"in c&&null!=a.height&&(null==b||"height"===b||"all"===b)?c.height:null}},{key:"_sizeReferenceSymbolLayer",get:function(){const a=this._graphicSymbol;return null==a||0===a.symbolLayers.length?null:a.symbolLayers.find(c=>"object"===c.type)}},
{key:"_orientationReferenceSymbolLayer",get:function(){const a=this._graphicSymbol;return null==a||0===a.symbolLayers.length?null:a.symbolLayers.find(c=>"object"===c.type&&null!=c.heading)}},{key:"_graphicSymbol",get:function(){return null!=this.graphic&&null!=this.graphic.symbol&&"point-3d"===this.graphic.symbol.type?this.graphic.symbol:null},set:function(a){this.graphic.symbol=a}}]);return p}(B.HandleOwner);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"initialAngle",
null);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"angle",null);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"angleClockwise",null);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"orientation",null);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"orientationClockwise",null);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"relativeAngle",null);d.__decorate([e.property()],
f.ScaleRotateObjectSymbol3DAdapter.prototype,"relativeAngleClockwise",null);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"scale",null);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"size",null);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"sizeAxis",void 0);d.__decorate([e.property({constructOnly:!0})],f.ScaleRotateObjectSymbol3DAdapter.prototype,"graphic",void 0);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,
"_interactionState",void 0);d.__decorate([e.property({constructOnly:!0})],f.ScaleRotateObjectSymbol3DAdapter.prototype,"findLayerView",void 0);d.__decorate([e.property({constructOnly:!0})],f.ScaleRotateObjectSymbol3DAdapter.prototype,"sizeFilter",void 0);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"_sizeReferenceSymbolLayer",null);d.__decorate([e.property()],f.ScaleRotateObjectSymbol3DAdapter.prototype,"_orientationReferenceSymbolLayer",null);d.__decorate([e.property()],
f.ScaleRotateObjectSymbol3DAdapter.prototype,"_graphicSymbol",null);f.ScaleRotateObjectSymbol3DAdapter=d.__decorate([y.subclass("esri.views.3d.interactive.editingTools.transformGraphic.ScaleRotateObjectSymbol3DAdapter")],f.ScaleRotateObjectSymbol3DAdapter);const C={state:{angle:0,scale:0},done:()=>{},cancel:()=>{}};let n=function(r){function p(k){var a=r.call(this,k)||this;a.angle=0;a.initialAngle=0;a.scale=1;a.initialAngle=k.angle;return a}v._inherits(p,r);v._createClass(p,[{key:"state",get:function(){const {originalSymbol:k,
angle:a,initialAngle:c,scale:b,initialSizes:m}=this;return{originalSymbol:k,angle:a,initialAngle:c,scale:b,initialSizes:m}}}]);return p}(A);d.__decorate([e.property()],n.prototype,"originalSymbol",void 0);d.__decorate([e.property()],n.prototype,"angle",void 0);d.__decorate([e.property()],n.prototype,"initialAngle",void 0);d.__decorate([e.property()],n.prototype,"initialSizes",void 0);d.__decorate([e.property()],n.prototype,"scale",void 0);d.__decorate([e.property()],n.prototype,"state",null);n=d.__decorate([y.subclass("InteractionState")],
n);f.headingToAngle=z;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});