// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../support/elevationInfoUtils","../../../../interactive/dragEventPipeline"],function(e,h,k,l){let m=function(){function c(){this._next=this._lastDragEvent=this._elevationInfo=this._view=null;this._enabled=!1}var f=c.prototype;f._snap=function(b){b=null!=this._view?this._view.toMap(b,{exclude:[]}):null;null!=b&&null!=this._view&&(b.z=k.getZForElevationMode(b,this._view,this._elevationInfo));return b};f.createDragEventPipelineStep=
function(b,d){this._view=b;this._elevationInfo=d;this._lastDragEvent=null;this._next=b=new l.EventPipeline;return[a=>{this._lastDragEvent="end"!==a.action?{...a}:null;if(this._enabled){const g=this._snap(a.screenEnd);return null!=g?{action:a.action,mapStart:a.mapStart,mapEnd:g,screenStart:a.screenStart,screenEnd:a.screenEnd}:null}return{action:a.action,mapStart:a.mapStart,mapEnd:a.mapEnd,screenStart:a.screenStart,screenEnd:a.screenEnd}},b]};h._createClass(c,[{key:"enabled",get:function(){return this._enabled},
set:function(b){if(this._enabled!==b&&null!=this._lastDragEvent&&null!=this._next){const d=this._lastDragEvent.mapEnd,a=this._snap(this._lastDragEvent.screenEnd);null!=a&&this._next.execute({action:"update",mapStart:this._lastDragEvent.mapStart,mapEnd:!0===b?a:d,screenStart:this._lastDragEvent.screenEnd,screenEnd:this._lastDragEvent.screenEnd})}this._enabled=b}}]);return c}();e.SnapToScene=m;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});