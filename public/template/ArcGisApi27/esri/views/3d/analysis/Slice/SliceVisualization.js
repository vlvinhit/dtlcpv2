// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../Color ../../../../core/Accessor ../../../../core/Handles ../../../../core/maybe ../../../../core/reactiveUtils ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../../../../chunks/mat4 ../../../../chunks/vec3 ../../../../chunks/vec4f64 ../../../../geometry/support/vectorStacks ./settings ./sliceToolConfig ./sliceToolUtils ../../webgl-engine/materials/lineStippleUtils".split(" "),
function(c,q,d,h,w,x,r,f,e,D,E,F,y,t,k,z,l,m,u,n,A){c.SliceVisualization=function(v){function p(a){a=v.call(this,a)||this;a._handles=new x;a._gridVisualElement=null;a._outlineVisualElement=null;a.showGrid=!1;a.preview=!0;return a}q._inherits(p,v);var g=p.prototype;g.initialize=function(){const a=this.analysisViewData;if(null==a)throw Error("expected internal object to be valid");this._gridVisualElement=n.createGridVisualElement(this.view);this._outlineVisualElement=n.createOutlineVisualElement(this.view);
this._handles.add([f.watch(()=>({visible:null!=a.plane&&this.analysisViewData.visible,active:this.analysisViewData.active,preview:this.preview,showGrid:this.showGrid}),b=>this._updateMaterials(b),f.syncAndInitial),f.watch(()=>a.plane,b=>this._updatePlane(b),f.syncAndInitial)],"internal")};g.destroy=function(){this._handles.destroy();this._gridVisualElement=r.destroyMaybe(this._gridVisualElement);this._outlineVisualElement=r.destroyMaybe(this._outlineVisualElement);this.set("view",null)};g._updatePlane=
function(a){if(null!=a){this._gridVisualElement.attached=!0;this._outlineVisualElement.attached=!0;var b=k.set(l.sv3d.get(),k.length(a.basis1),k.length(a.basis2),1);b=t.fromScaling(l.sm4d.get(),b);a=n.calculateBoundedPlaneTranslateRotate(a,l.sm4d.get());a=t.multiply(b,a,b);this._outlineVisualElement.transform=a;this._gridVisualElement.transform=a}};g._updateMaterials=function({visible:a,active:b,preview:B,showGrid:C}){this._outlineVisualElement.color=h.toUnitRGBA(m.settings.plane.outlineColor);this._outlineVisualElement.width=
B?u.PLANE_PREVIEW_OUTLINE_WIDTH:u.PLANE_OUTLINE_WIDTH;this._outlineVisualElement.stipplePattern=b?null:A.createStipplePatternSimple(5);this._gridVisualElement.backgroundColor=h.toUnitRGBA(m.settings.plane.color);this._gridVisualElement.gridColor=C?h.toUnitRGBA(m.settings.plane.gridColor):z.ZEROS;this._gridVisualElement.visible=a;this._outlineVisualElement.visible=a};return q._createClass(p)}(w);d.__decorate([e.property()],c.SliceVisualization.prototype,"view",void 0);d.__decorate([e.property()],c.SliceVisualization.prototype,
"analysis",void 0);d.__decorate([e.property()],c.SliceVisualization.prototype,"analysisViewData",void 0);d.__decorate([e.property()],c.SliceVisualization.prototype,"showGrid",void 0);d.__decorate([e.property()],c.SliceVisualization.prototype,"preview",void 0);c.SliceVisualization=d.__decorate([y.subclass("esri.views.3d.analysis.Slice.SliceVisualization")],c.SliceVisualization);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});