// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(d,b,M,P,G){let E=function(){function L(){this._emitter=new L.EventEmitter(this)}var C=L.prototype;C.emit=function(p,m){return this._emitter.emit(p,m)};C.on=function(p,m){return this._emitter.on(p,m)};C.once=function(p,m){return this._emitter.once(p,m)};C.hasEventListener=function(p){return this._emitter.hasEventListener(p)};
return d._createClass(L)}();(function(L){let C=function(){function m(v=null){this._target=v;this._listenersMap=null}var r=m.prototype;r.clear=function(){this._listenersMap?.clear();this._listenersMap=null};r.destroy=function(){this.clear()};r.emit=function(v,t){v=this._listenersMap&&this._listenersMap.get(v);if(!v)return!1;const w=this._target||this;[...v].forEach(c=>{c.call(w,t)});return 0<v.length};r.on=function(v,t){if(Array.isArray(v)){var w=v.map(c=>this.on(c,t));return P.handlesGroup(w)}if(v.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);w=this._listenersMap.get(v)||[];w.push(t);this._listenersMap.set(v,w);return{remove:()=>{const c=this._listenersMap&&this._listenersMap.get(v)||[],h=c.indexOf(t);0<=h&&c.splice(h,1)}}};r.once=function(v,t){const w=this.on(v,c=>{w.remove();t.call(null,c)});return w};r.hasEventListener=function(v){v=this._listenersMap&&this._listenersMap.get(v);return null!=v&&0<v.length};return d._createClass(m)}();L.EventEmitter=C;L.EventedMixin=m=>{m=function(r){function v(){var w=
r.apply(this,arguments)||this;w._emitter=new C;return w}d._inherits(v,r);var t=v.prototype;t.destroy=function(){this._emitter.clear()};t.emit=function(w,c){return this._emitter.emit(w,c)};t.on=function(w,c){return this._emitter.on(w,c)};t.once=function(w,c){return this._emitter.once(w,c)};t.hasEventListener=function(w){return this._emitter.hasEventListener(w)};return d._createClass(v)}(m);return m=b.__decorate([G.subclass("esri.core.Evented")],m)};let p=function(m){function r(){var t=m.apply(this,
arguments)||this;t._emitter=new E.EventEmitter(d._assertThisInitialized(t));return t}d._inherits(r,m);var v=r.prototype;v.destroy=function(){this._emitter.clear()};v.emit=function(t,w){return this._emitter.emit(t,w)};v.on=function(t,w){return this._emitter.on(t,w)};v.once=function(t,w){return this._emitter.once(t,w)};v.hasEventListener=function(t){return this._emitter.hasEventListener(t)};return d._createClass(r)}(M);p=b.__decorate([G.subclass("esri.core.Evented")],p);L.EventedAccessor=p})(E||(E=
{}));return E})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(d,b,M,P,G,E,L){function C(t,w,c={}){return p(t,w,c,r)}function p(t,w,c={},h){let B=null;const O=c.once?(x,z)=>{h(x)&&(P.removeMaybe(B),w(x,z))}:(x,z)=>{h(x)&&w(x,z)};B=E.watchTracked(t,O,c.sync,c.equals);c.initial&&(t=t(),O(t,t));return B}function m(t,w,c){if(G.isAborted(c))return Promise.reject(G.createAbortError());
const h=t();if(w?.(h))return Promise.resolve(h);let B=null;return new Promise((O,x)=>{B=M.handlesGroup([G.onAbort(c,()=>{B=P.removeMaybe(B);x(G.createAbortError())}),p(t,z=>{B=P.removeMaybe(B);O(z)},{sync:!1,once:!0},w??r)])})}function r(t){return!0}function v(t){return!!t}d.autorun=L.autorun;d.initial={initial:!0};d.on=function(t,w,c,h={}){function B(){x&&z&&(z.remove(),h.onListenerRemove?.(x),z=x=null)}function O(N){h.once&&h.once&&P.removeMaybe(I);c(N)}let x=null,z=null,I=null;const W=C(t,(N,l)=>
{B();b.isEventTarget(N)&&(x=N,z=b.on(N,w,O),h.onListenerAdd?.(N))},{sync:h.sync,initial:!0});return I=M.makeHandle(()=>{W.remove();B()})};d.once=function(t,w){return m(t,null,w)};d.pausable=function(t,w,c={}){let h=!1;const B=C(t,(O,x)=>{h||w(O,x)},c);return{remove(){B.remove()},pause(){h=!0},resume(){h=!1}}};d.sync={sync:!0};d.syncAndInitial={sync:!0,initial:!0};d.watch=C;d.when=function(t,w,c={}){return p(t,w,c,v)};d.whenOnce=function(t,w){return m(t,v,w)};Object.defineProperty(d,Symbol.toStringTag,
{value:"Module"})})},"esri/core/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../Accessor ../Handles ../handleUtils ../reactiveUtils ../scheduling ../accessorSupport/decorators/property ../accessorSupport/decorators/subclass".split(" "),function(d,b,M,P,G,E,L,C,p,m){d.WatchUpdatingTracking=function(r){function v(){var w=r.apply(this,arguments)||this;w.updating=!1;w._handleId=0;w._handles=new G;w._scheduleHandleId=0;w._pendingPromises=
new Set;return w}b._inherits(v,r);var t=v.prototype;t.destroy=function(){this.removeAll();this._handles.destroy()};t.add=function(w,c,h={}){return this._installWatch(w,c,h,L.watch)};t.addWhen=function(w,c,h={}){return this._installWatch(w,c,h,L.when)};t.addOnCollectionChange=function(w,c,{initial:h=!1,final:B=!1}={}){const O=++this._handleId;this._handles.add([L.on(w,"after-changes",this._createSyncUpdatingCallback(),L.sync),L.on(w,"change",c,{onListenerAdd:h?x=>c({added:x.toArray(),removed:[]}):
void 0,onListenerRemove:B?x=>c({added:[],removed:x.toArray()}):void 0})],O);return E.makeHandle(()=>this._handles.remove(O))};t.addPromise=function(w){if(null==w)return w;const c=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(w)&&(0!==this._pendingPromises.size||this._handles.has(-42)||this._set("updating",!1))}},c);this._pendingPromises.add(w);this._set("updating",!0);const h=()=>this._handles.remove(c);w.then(h,h);return w};t.removeAll=function(){this._pendingPromises.clear();
this._handles.removeAll();this._set("updating",!1)};t._installWatch=function(w,c,h={},B){const O=++this._handleId;h.sync||this._installSyncUpdatingWatch(w,O);w=B(w,c,h);this._handles.add(w,O);return E.makeHandle(()=>this._handles.remove(O))};t._installSyncUpdatingWatch=function(w,c){const h=this._createSyncUpdatingCallback();w=L.watch(w,h,{sync:!0,equals:()=>!1});this._handles.add(w,c);return w};t._createSyncUpdatingCallback=function(){return()=>{this._handles.remove(-42);++this._scheduleHandleId;
const w=this._scheduleHandleId;this._get("updating")||this._set("updating",!0);this._handles.add(C.schedule(()=>{w===this._scheduleHandleId&&(this._set("updating",0<this._pendingPromises.size),this._handles.remove(-42))}),-42)}};return b._createClass(v)}(P);M.__decorate([p.property({readOnly:!0})],d.WatchUpdatingTracking.prototype,"updating",void 0);d.WatchUpdatingTracking=M.__decorate([m.subclass("esri.core.support.WatchUpdatingTracking")],d.WatchUpdatingTracking);Object.defineProperty(d,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),function(d,b,M,P,G,E,L,C,p,m){const r=G.create();return function(){function v(w){this.geometryInfo=w;this._boundsStore=new C.BoundsStore;
this._featuresById=new Map;this._markedIds=new Set;this.events=new M;this.featureAdapter=p.optimizedFeatureQueryEngineAdapter}var t=v.prototype;t.getFullExtent=function(w){if(null==this.fullBounds)return null;const [c,h,B,O]=this.fullBounds;return{xmin:c,ymin:h,xmax:B,ymax:O,spatialReference:m.cleanFromGeometryEngine(w)}};t.add=function(w){this._add(w);this._emitChanged()};t.addMany=function(w){for(const c of w)this._add(c);this._emitChanged()};t.clear=function(){this._featuresById.clear();this._boundsStore.clear();
this._emitChanged()};t.removeById=function(w){w=this._featuresById.get(w);if(!w)return null;this._remove(w);this._emitChanged();return w};t.removeManyById=function(w){this._boundsStore.invalidateIndex();for(const c of w)(w=this._featuresById.get(c))&&this._remove(w);this._emitChanged()};t.forEachBounds=function(w,c){for(const h of w)(w=this._boundsStore.get(h.objectId))&&c(G.fromRect(r,w))};t.getFeature=function(w){return this._featuresById.get(w)};t.has=function(w){return this._featuresById.has(w)};
t.forEach=function(w){this._featuresById.forEach(c=>w(c))};t.forEachInBounds=function(w,c){this._boundsStore.forEachInBounds(w,h=>{c(this._featuresById.get(h))})};t.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};t.sweep=function(){let w=!1;this._featuresById.forEach((c,h)=>{this._markedIds.has(h)||(w=!0,this._remove(c))});this._markedIds.clear();w&&this._emitChanged()};t._emitChanged=function(){this.events.emit("changed",void 0)};t._add=function(w){if(w){var c=
w.objectId;if(null==c)P.getLogger("esri.layers.graphics.data.FeatureStore").error(new b("featurestore:invalid-feature","feature id is missing",{feature:w}));else{var h=this._featuresById.get(c);this._markedIds.add(c);if(h){w.displayId=h.displayId;var B=this._boundsStore.get(c);this._boundsStore.delete(c)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(w);null!=w.geometry&&w.geometry.coords&&w.geometry.coords.length?(B=L.getBoundsOptimizedGeometry(null!=B?B:E.create(),w.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),null!=B&&this._boundsStore.set(c,B)):this._boundsStore.set(c,null);this._featuresById.set(c,w)}}};t._remove=function(w){if(null!=this.onFeatureRemove)this.onFeatureRemove(w);const c=w.objectId;this._markedIds.delete(c);this._boundsStore.delete(c);this._featuresById.delete(c);return w};d._createClass(v,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let w=0;this._featuresById.forEach(c=>{null!=c.geometry&&c.geometry.coords&&(w+=c.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:w/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return v}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],
function(d,b,M){function P(c=t){return[c[0],c[1],c[2],c[3],c[4],c[5]]}function G(c,h,B,O,x,z,I=P()){I[0]=c;I[1]=h;I[2]=B;I[3]=O;I[4]=x;I[5]=z;return I}function E(c){return c[0]>=c[3]?0:c[3]-c[0]}function L(c){return c[1]>=c[4]?0:c[4]-c[1]}function C(c){return c[2]>=c[5]?0:c[5]-c[2]}function p(c,h){return Math.max(h[0],c[0])<=Math.min(h[3],c[3])&&Math.max(h[1],c[1])<=Math.min(h[4],c[4])&&Math.max(h[2],c[2])<=Math.min(h[5],c[5])}function m(c,h){c[0]=h[0];c[1]=h[1];c[2]=h[2];c[3]=h[3];c[4]=h[4];c[5]=
h[5];return c}function r(c){return 6===c.length}const v=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],t=[0,0,0,0,0,0],w=P();d.NEGATIVE_INFINITY=v;d.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];d.ZERO=t;d.allFinite=function(c){for(let h=0;6>h;h++)if(!isFinite(c[h]))return!1;return!0};d.center=function(c,h=[0,0,0]){h[0]=c[0]+E(c)/2;h[1]=c[1]+L(c)/2;h[2]=c[2]+C(c)/2;return h};d.contains=function(c,h){return h[0]>=c[0]&&h[1]>=c[1]&&h[2]>=c[2]&&h[3]<=c[3]&&
h[4]<=c[4]&&h[5]<=c[5]};d.containsPoint=function(c,h){return h[0]>=c[0]&&h[1]>=c[1]&&h[2]>=c[2]&&h[0]<=c[3]&&h[1]<=c[4]&&h[2]<=c[5]};d.containsPointWithMargin=function(c,h,B){return h[0]>=c[0]-B&&h[1]>=c[1]-B&&h[2]>=c[2]-B&&h[0]<=c[3]+B&&h[1]<=c[4]+B&&h[2]<=c[5]+B};d.create=P;d.depth=L;d.diameter=function(c){const h=E(c),B=C(c);c=L(c);return Math.sqrt(h*h+B*B+c*c)};d.empty=function(c){return c?m(c,v):P(v)};d.equals=function(c,h,B){if(null==c||null==h)return c===h;if(!r(c)||!r(h))return!1;if(B)for(let O=
0;O<c.length;O++){if(!B(c[O],h[O]))return!1}else for(B=0;B<c.length;B++)if(c[B]!==h[B])return!1;return!0};d.expandWithAABB=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[2]=Math.min(c[2],h[2]);c[3]=Math.max(c[3],h[3]);c[4]=Math.max(c[4],h[4]);c[5]=Math.max(c[5],h[5])};d.expandWithBuffer=function(c,h,B=0,O=h.length/3){let x=c[0],z=c[1],I=c[2],W=c[3],N=c[4],l=c[5];for(let y=0;y<O;y++)x=Math.min(x,h[B+3*y]),z=Math.min(z,h[B+3*y+1]),I=Math.min(I,h[B+3*y+2]),W=Math.max(W,h[B+3*y]),N=
Math.max(N,h[B+3*y+1]),l=Math.max(l,h[B+3*y+2]);c[0]=x;c[1]=z;c[2]=I;c[3]=W;c[4]=N;c[5]=l};d.expandWithNestedArray=function(c,h,B){const O=h.length;let x=c[0],z=c[1],I=c[2],W=c[3],N=c[4],l=c[5];if(B)for(B=0;B<O;B++){var y=h[B];x=Math.min(x,y[0]);z=Math.min(z,y[1]);I=Math.min(I,y[2]);W=Math.max(W,y[0]);N=Math.max(N,y[1]);l=Math.max(l,y[2])}else for(B=0;B<O;B++)y=h[B],x=Math.min(x,y[0]),z=Math.min(z,y[1]),W=Math.max(W,y[0]),N=Math.max(N,y[1]);c[0]=x;c[1]=z;c[2]=I;c[3]=W;c[4]=N;c[5]=l};d.expandWithOffset=
function(c,h,B,O){c[0]=Math.min(c[0],c[0]+h);c[3]=Math.max(c[3],c[3]+h);c[1]=Math.min(c[1],c[1]+B);c[4]=Math.max(c[4],c[4]+B);c[2]=Math.min(c[2],c[2]+O);c[5]=Math.max(c[5],c[5]+O)};d.expandWithRect=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[3]=Math.max(c[3],h[2]);c[4]=Math.max(c[4],h[3])};d.expandWithVec3=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[2]=Math.min(c[2],h[2]);c[3]=Math.max(c[3],h[0]);c[4]=Math.max(c[4],h[1]);c[5]=Math.max(c[5],h[2])};d.fromExtent=
function(c,h=P()){h[0]=c.xmin;h[1]=c.ymin;h[2]=c.hasZ?c.zmin:-Infinity;h[3]=c.xmax;h[4]=c.ymax;h[5]=c.hasZ?c.zmax:Infinity;return h};d.fromMinMax=function(c,h,B=P()){B[0]=c[0];B[1]=c[1];B[2]=c[2];B[3]=h[0];B[4]=h[1];B[5]=h[2];return B};d.fromRect=function(c,h){c[0]=h[0];c[1]=h[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=h[2];c[4]=h[3];c[5]=Number.POSITIVE_INFINITY;return c};d.fromRectValues=function(c,h,B,O,x){c[0]=h;c[1]=B;c[2]=Number.NEGATIVE_INFINITY;c[3]=O;c[4]=x;c[5]=Number.POSITIVE_INFINITY;return c};
d.fromValues=G;d.getMax=function(c,h){h[0]=c[3];h[1]=c[4];h[2]=c[5];return h};d.getMin=function(c,h){h[0]=c[0];h[1]=c[1];h[2]=c[2];return h};d.height=C;d.intersects=p;d.intersectsClippingArea=function(c,h){return null==h?!0:p(c,h)};d.is=r;d.isPoint=function(c){return 0===E(c)&&0===L(c)&&0===C(c)};d.maximumDimension=function(c){return Math.max(E(c),C(c),L(c))};d.offset=function(c,h,B,O,x=c){x[0]=c[0]+h;x[1]=c[1]+B;x[2]=c[2]+O;x[3]=c[3]+h;x[4]=c[4]+B;x[5]=c[5]+O;return x};d.scale=function(c,h,B=c){const O=
c[0]+E(c)/2,x=c[1]+L(c)/2,z=c[2]+C(c)/2;B[0]=O+(c[0]-O)*h;B[1]=x+(c[1]-x)*h;B[2]=z+(c[2]-z)*h;B[3]=O+(c[3]-O)*h;B[4]=x+(c[4]-x)*h;B[5]=z+(c[5]-z)*h;return B};d.set=m;d.setMax=function(c,h,B=c){B[3]=h[0];B[4]=h[1];B[5]=h[2];B!==c&&(B[0]=c[0],B[1]=c[1],B[2]=c[2]);return c};d.setMin=function(c,h,B=c){B[0]=h[0];B[1]=h[1];B[2]=h[2];B!==c&&(B[3]=c[3],B[4]=c[4],B[5]=c[5]);return B};d.size=function(c,h=[0,0,0]){h[0]=E(c);h[1]=L(c);h[2]=C(c);return h};d.toExtent=function(c,h){return isFinite(c[2])||isFinite(c[5])?
new b({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:h}):new b({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],spatialReference:h})};d.toRect=function(c,h){h||(h=M.create());h[0]=c[0];h[1]=c[1];h[2]=c[3];h[3]=c[4];return h};d.width=E;d.wrap=function(c,h,B,O,x,z){return G(c,h,B,O,x,z,w)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(d,b,M,P,G,E,L,C,p,m){function r(A,S){return A?S?4:3:S?3:2}function v(A,S,Z,aa){if(A){if(Z)return S&&aa?D:db;if(S&&aa)return f}else if(S&&aa)return db;return jb}function t({scale:A,translate:S},Z){return Math.round((Z-S[0])/A[0])}function w({scale:A,translate:S},Z){return Math.round((S[1]-Z)/A[1])}function c({scale:A,translate:S},Z,aa){return Z*A[aa]+S[aa]}function h(A){A=A.coords;return{x:A[0],y:A[1]}}function B(A,S){A.coords[0]=S.x;A.coords[1]=S.y;return A}function O(A){A=A.coords;return{x:A[0],
y:A[1],z:A[2]}}function x(A,S){A.coords[0]=S.x;A.coords[1]=S.y;A.coords[2]=S.z;return A}function z(A){A=A.coords;return{x:A[0],y:A[1],m:A[2]}}function I(A,S){A.coords[0]=S.x;A.coords[1]=S.y;A.coords[2]=S.m;return A}function W(A){A=A.coords;return{x:A[0],y:A[1],z:A[2],m:A[3]}}function N(A,S){A.coords[0]=S.x;A.coords[1]=S.y;A.coords[2]=S.z;A.coords[3]=S.m;return A}function l(A,S){return A&&S?N:A?x:S?I:B}function y(A,S,Z,aa,ia){Z=l(Z,aa);for(const {geometry:na,attributes:pa}of S)S=null!=na?Z(new m,na):
null,A.push(new C.OptimizedFeature(S,pa,null,ia?pa[ia]:void 0));return A}function q(A,S,Z,aa){for(const {geometry:ia,attributes:na}of S)A.push({attributes:na,geometry:null!=ia?n(ia,Z,aa):null});return A}function n(A,S,Z){if(null==A)return null;const aa=r(S,Z),ia=[];for(let na=0;na<A.coords.length;na+=aa){const pa=[];for(let sa=0;sa<aa;sa++)pa.push(A.coords[na+sa]);ia.push(pa)}return S?Z?{points:ia,hasZ:S,hasM:Z}:{points:ia,hasZ:S}:Z?{points:ia,hasM:Z}:{points:ia}}function g(A,S,Z,aa,ia){Z=r(Z,aa);
for(const {geometry:na,attributes:pa}of S)S=null!=na?K(new m,na,Z):null,A.push(new C.OptimizedFeature(S,pa,null,ia?pa[ia]:void 0));return A}function K(A,S,Z=r(S.hasZ,S.hasM)){A.lengths[0]=S.points.length;const aa=A.coords;let ia=0;for(const na of S.points)for(S=0;S<Z;S++)aa[ia++]=na[S];return A}function X(A,S,Z){if(!A)return null;const aa=r(S,Z),{coords:ia,lengths:na}=A;A=[];let pa=0;for(const sa of na){const va=[];for(let Da=0;Da<sa;Da++){const za=[];for(let ya=0;ya<aa;ya++)za.push(ia[pa++]);va.push(za)}A.push(va)}return S?
Z?{paths:A,hasZ:S,hasM:Z}:{paths:A,hasZ:S}:Z?{paths:A,hasM:Z}:{paths:A}}function T(A,S,Z,aa,ia){Z=r(Z,aa);for(const {geometry:na,attributes:pa}of S)S=null!=na?V(new m,na,Z):null,A.push(new C.OptimizedFeature(S,pa,null,ia?pa[ia]:void 0));return A}function V(A,S,Z=r(S.hasZ,S.hasM)){const {lengths:aa,coords:ia}=A;let na=0;for(const pa of S.paths){for(const sa of pa)for(S=0;S<Z;S++)ia[na++]=sa[S];aa.push(pa.length)}return A}function F(A,S,Z){if(!A)return null;const aa=r(S,Z),{coords:ia,lengths:na}=A;
A=[];let pa=0;for(const sa of na){const va=[];for(let Da=0;Da<sa;Da++){const za=[];for(let ya=0;ya<aa;ya++)za.push(ia[pa++]);va.push(za)}A.push(va)}return S?Z?{rings:A,hasZ:S,hasM:Z}:{rings:A,hasZ:S}:Z?{rings:A,hasM:Z}:{rings:A}}function J(A,S,Z,aa,ia){for(const {geometry:na,centroid:pa,attributes:sa}of S){S=null!=na?ba(new m,na,Z,aa):null;const va=ia?sa[ia]:void 0;null!=pa?A.push(new C.OptimizedFeature(S,sa,B(new m,pa),va)):A.push(new C.OptimizedFeature(S,sa,null,va))}return A}function ba(A,S,Z=
S.hasZ,aa=S.hasM){return ka(A,S.rings,Z,aa)}function ka(A,S,Z,aa){Z=r(Z,aa);const {lengths:ia,coords:na}=A;aa=0;Sa(A);for(const pa of S){for(const sa of pa)for(S=0;S<Z;S++)na[aa++]=sa[S];ia.push(pa.length)}return A}function ta(A,S,Z,aa,ia,na){Va(A);if(!Z){for(const pa of S)A.push(new C.OptimizedFeature(null,pa.attributes,null,na?pa.attributes[na]:void 0));return A}switch(Z){case "esriGeometryPoint":return y(A,S,aa,ia,na);case "esriGeometryMultipoint":return g(A,S,aa,ia,na);case "esriGeometryPolyline":return T(A,
S,aa,ia,na);case "esriGeometryPolygon":return J(A,S,aa,ia,na);default:eb.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${Z}'`)),Va(A)}return A}function Ba(A,S,Z,aa){A=A&&("coords"in A?A:A.geometry);if(null==A)return null;switch(S){case "esriGeometryPoint":return S=h,Z&&aa?S=W:Z?S=O:aa&&(S=z),S(A);case "esriGeometryMultipoint":return n(A,Z,aa);case "esriGeometryPolyline":return X(A,Z,aa);case "esriGeometryPolygon":return F(A,Z,aa);default:return eb.error("convertToGeometry:unknown-geometry",
new b(`Unable to parse unknown geometry type '${S}'`)),null}}function Ea(A,S,Z,aa,ia){Va(A);if(null==Z){for(const pa of S)A.push({attributes:pa.attributes});return A}switch(Z){case "esriGeometryPoint":Z=h;aa&&ia?Z=W:aa?Z=O:ia&&(Z=z);for(var na of S){const {geometry:pa,attributes:sa}=na;aa=null!=pa?Z(pa):null;A.push({attributes:sa,geometry:aa})}break;case "esriGeometryMultipoint":return q(A,S,aa,ia);case "esriGeometryPolyline":for(const {geometry:pa,attributes:sa}of S)A.push({attributes:sa,geometry:null!=
pa?X(pa,aa,ia):null});break;case "esriGeometryPolygon":for(const {geometry:pa,attributes:sa,centroid:va}of S)na=null!=pa?F(pa,aa,ia):null,null!=va?(S=h(va),A.push({attributes:sa,centroid:S,geometry:na})):A.push({attributes:sa,geometry:na});break;default:eb.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${Z}'`))}return A}function Fa(A,S,Z,aa,ia,na,pa=Z,sa=aa){Sa(A);if(null==S||!S.coords.length)return null;ia=kb[ia];const {coords:va,lengths:Da}=S;S=r(Z,aa);
const za=r(Z&&pa,aa&&sa);Z=v(Z,aa,pa,sa);if(!Da.length)return Z(A.coords,va,0,0,t(na,va[0]),w(na,va[1])),Sa(A,S,0),A;let ya,Qa=0,Ka,Oa=0;for(const Pa of Da){if(Pa<ia)continue;let Ja=0;Ka=Oa;sa=aa=t(na,va[Qa]);ya=pa=w(na,va[Qa+1]);Z(A.coords,va,Ka,Qa,sa,ya);Ja++;Qa+=S;Ka+=za;for(let Ra=1;Ra<Pa;Ra++,Qa+=S)if(sa=t(na,va[Qa]),ya=w(na,va[Qa+1]),sa!==aa||ya!==pa)Z(A.coords,va,Ka,Qa,sa-aa,ya-pa),Ka+=za,Ja++,aa=sa,pa=ya;Ja>=ia&&(A.lengths.push(Ja),Oa=Ka)}Va(A.coords,Oa);return A.coords.length?A:null}function Ma(A,
S,Z,aa,ia,na,pa){let sa=aa,va=0;for(let za=na+Z;za<pa;za+=Z){var Da=S[za];const ya=S[za+1],Qa=S[pa],Ka=S[pa+1];let Oa=S[na],Pa=S[na+1],Ja=Qa-Oa,Ra=Ka-Pa;if(0!==Ja||0!==Ra){const Wa=((Da-Oa)*Ja+(ya-Pa)*Ra)/(Ja*Ja+Ra*Ra);1<Wa?(Oa=Qa,Pa=Ka):0<Wa&&(Oa+=Ja*Wa,Pa+=Ra*Wa)}Ja=Da-Oa;Ra=ya-Pa;Da=Ja*Ja+Ra*Ra;Da>sa&&(va=za,sa=Da)}sa>aa&&(va-na>Z&&Ma(A,S,Z,aa,ia,na,va),ia(A,S,A.length,va,S[va],S[va+1]),pa-va>Z&&Ma(A,S,Z,aa,ia,va,pa))}function Ha(A,S,Z,aa,ia){const {coords:na,lengths:pa}=S;Z=r(Z,aa);if(!na.length)return A!==
S&&Sa(A),A;P.assertIsSome(ia);const {originPosition:sa,scale:va,translate:Da}=ia;ia=ea;ia.originPosition=sa;aa=ia.scale;aa[0]=va[0]??1;aa[1]=-(va[1]??1);aa[2]=va[2]??1;aa[3]=va[3]??1;var za=ia.translate;za[0]=Da[0]??0;za[1]=Da[1]??0;za[2]=Da[2]??0;za[3]=Da[3]??0;if(!pa.length){for(aa=0;aa<Z;++aa)A.coords[aa]=c(ia,na[aa],aa);A!==S&&Sa(A,Z,0);return A}za=0;for(let Qa=0;Qa<pa.length;Qa++){const Ka=pa[Qa];A.lengths[Qa]=Ka;for(var ya=0;ya<Z;++ya)A.coords[za+ya]=c(ia,na[za+ya],ya);ya=A.coords[za];let Oa=
A.coords[za+1];za+=Z;for(let Pa=1;Pa<Ka;Pa++,za+=Z){ya+=na[za]*aa[0];Oa+=na[za+1]*aa[1];A.coords[za]=ya;A.coords[za+1]=Oa;for(let Ja=2;Ja<Z;++Ja)A.coords[za+Ja]=c(ia,na[za+Ja],Ja)}}A!==S&&Sa(A,na.length,pa.length);return A}function Ua(A,S,Z,aa){let ia=0,na=A[aa*S],pa=A[aa*(S+1)];for(let sa=1;sa<Z;sa++){const va=na+A[aa*(S+sa)],Da=pa+A[aa*(S+sa)+1],za=(va-na)*(Da+pa);na=va;pa=Da;ia+=za}return.5*ia}function Sa(A,S=0,Z=0){Va(A.lengths,Z);Va(A.coords,S)}function Va(A,S=0){A.length!==S&&(A.length=S)}const eb=
M.getLogger("esri.layers.graphics.featureConversionUtils"),kb={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},jb=(A,S,Z,aa,ia,na)=>{A[Z]=ia;A[Z+1]=na},db=(A,S,Z,aa,ia,na)=>{A[Z]=ia;A[Z+1]=na;A[Z+2]=S[aa+2]},f=(A,S,Z,aa,ia,na)=>{A[Z]=ia;A[Z+1]=na;A[Z+2]=S[aa+3]},D=(A,S,Z,aa,ia,na)=>{A[Z]=ia;A[Z+1]=na;A[Z+2]=S[aa+2];A[Z+3]=S[aa+3]},ha=[],Q=[],ea={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};d.convertFromFeature=function(A,
S,Z,aa,ia){ha[0]=A;[A]=ta(Q,ha,S,Z,aa,ia);Va(ha);Va(Q);return A};d.convertFromFeatureSet=function(A,S){const Z=new p,{hasM:aa,hasZ:ia,features:na,objectIdFieldName:pa,spatialReference:sa,geometryType:va,exceededTransferLimit:Da,transform:za,fields:ya}=A;ya&&(Z.fields=ya);Z.geometryType=va??null;Z.objectIdFieldName=pa??S??null;Z.spatialReference=sa??null;if(!Z.objectIdFieldName)return eb.error(new b("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),Z;na&&ta(Z.features,
na,va,ia,aa,Z.objectIdFieldName);Da&&(Z.exceededTransferLimit=Da);aa&&(Z.hasM=aa);ia&&(Z.hasZ=ia);za&&(Z.transform=za);return Z};d.convertFromFeatures=ta;d.convertFromGeometry=function(A,S,Z){if(null==A)return null;const aa=new m;"hasZ"in A&&null==S&&(S=A.hasZ);"hasM"in A&&null==Z&&(Z=A.hasM);if(L.isPoint(A))return l(null!=S?S:null!=A.z,null!=Z?Z:null!=A.m)(aa,A);if(L.isPolygon(A))return ba(aa,A,S,Z);if(L.isPolyline(A))return V(aa,A,r(S,Z));if(L.isMultipoint(A))return K(aa,A,r(S,Z));eb.error("convertFromGeometry:unknown-geometry",
new b(`Unable to parse unknown geometry type '${A}'`))};d.convertFromGraphics=function(A,S,Z,aa,ia,na){const pa=A.length;switch(Z){case "esriGeometryPoint":y(A,S,aa,ia,na);break;case "esriGeometryMultipoint":g(A,S,aa,ia,na);break;case "esriGeometryPolyline":T(A,S,aa,ia,na);break;case "esriGeometryPolygon":J(A,S,aa,ia,na);break;default:eb.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${Z}'`))}for(aa=0;aa<S.length;aa++)A[aa+pa].geometryType=Z,A[aa+pa].insertAfter=
S[aa].insertAfter,A[aa+pa].groupId=S[aa].groupId;return A};d.convertFromMultipoint=K;d.convertFromMultipointFeatures=g;d.convertFromNestedArray=ka;d.convertFromPoint=function(A,S,Z=l(null!=S.z,null!=S.m)){return Z(A,S)};d.convertFromPointFeatures=y;d.convertFromPolygon=ba;d.convertFromPolyline=V;d.convertFromPolylineFeatures=T;d.convertToFeature=function(A,S,Z,aa){Q[0]=A;Ea(ha,Q,S,Z,aa);A=ha[0];Va(ha);Va(Q);return A};d.convertToFeatureSet=function(A){const {objectIdFieldName:S,spatialReference:Z,
transform:aa,fields:ia,hasM:na,hasZ:pa,features:sa,geometryType:va,exceededTransferLimit:Da,uniqueIdField:za,queryGeometry:ya,queryGeometryType:Qa}=A;A=Ea([],sa,va,pa,na);const Ka=Ba(ya,Qa,!1,!1);A={features:A,fields:ia,geometryType:va,objectIdFieldName:S,spatialReference:Z,uniqueIdField:za,queryGeometry:Ka};aa&&(A.transform=aa);Da&&(A.exceededTransferLimit=Da);na&&(A.hasM=na);pa&&(A.hasZ=pa);return A};d.convertToFeatures=Ea;d.convertToGeometry=Ba;d.convertToMultipoint=n;d.convertToMultipointFeatures=
q;d.convertToPoint=function(A,S,Z){return A?S?Z?W(A):O(A):Z?z(A):h(A):null};d.convertToPolygon=F;d.convertToPolyline=X;d.deltaDecodeGeometry=function(A,S){if(null==A)return null;const Z=A.clone(),aa=A.coords;A=A.lengths;let ia=0;for(let sa=0;sa<A.length;sa++){const va=A[sa];var na=aa[S*ia],pa=aa[S*ia+1];for(let Da=1;Da<va;Da++)na+=aa[S*(ia+Da)],pa+=aa[S*(ia+Da)+1],Z.coords[S*(ia+Da)]=na,Z.coords[S*(ia+Da)+1]=pa;ia+=va}return Z};d.deltaEncodeGeometry=function(A,S){const Z=A.clone(),aa=A.coords;A=A.lengths;
let ia=0;for(let pa=0;pa<A.length;pa++){const sa=A[pa];let va=aa[S*ia];var na=aa[S*ia+1];for(let Da=1;Da<sa;Da++){const za=aa[S*(ia+Da)],ya=aa[S*(ia+Da)+1];na=ya-na;Z.coords[S*(ia+Da)]=za-va;Z.coords[S*(ia+Da)+1]=na;va=za;na=ya}ia+=sa}return Z};d.generalizeOptimizedGeometry=function(A,S,Z,aa,ia,na,pa=Z,sa=aa){Sa(A);if(!S||!S.coords.length)return null;ia=kb[ia];const {coords:va,lengths:Da}=S;S=r(Z,aa);const za=r(Z&&pa,aa&&sa);Z=v(Z,aa,pa,sa);if(!Da.length)return Z(A.coords,va,0,0,va[0],va[1]),Sa(A,
S,0),A;aa=0;na*=na;for(const ya of Da){if(ya<ia){aa+=ya*S;continue}pa=A.coords.length/za;sa=aa;const Qa=aa+(ya-1)*S;Z(A.coords,va,A.coords.length,sa,va[sa],va[sa+1]);Ma(A.coords,va,S,na,Z,sa,Qa);Z(A.coords,va,A.coords.length,Qa,va[Qa],va[Qa+1]);sa=A.coords.length/za-pa;sa>=ia?A.lengths.push(sa):Va(A.coords,pa*za);aa+=ya*S}return A.coords.length?A:null};d.getBoundsOptimizedGeometry=function(A,S,Z,aa){if(null==S||!S.coords||!S.coords.length)return null;Z=r(Z,aa);let ia=aa=Number.POSITIVE_INFINITY,na=
Number.NEGATIVE_INFINITY,pa=Number.NEGATIVE_INFINITY;if(S&&S.coords){S=S.coords;for(let sa=0;sa<S.length;sa+=Z){const va=S[sa],Da=S[sa+1];aa=Math.min(aa,va);na=Math.max(na,va);ia=Math.min(ia,Da);pa=Math.max(pa,Da)}}G.is(A)?G.fromRectValues(A,aa,ia,na,pa):E.fromValues(aa,ia,na,pa,A);return A};d.getQuantizedArea=function(A,S){const {coords:Z,lengths:aa}=A;let ia=A=0;for(let na=0;na<aa.length;na++){const pa=aa[na];ia+=Ua(Z,A,pa,S);A+=pa}return Math.abs(ia)};d.getQuantizedBoundsOptimizedGeometry=function(A,
S,Z,aa){Z=r(Z,aa);const {lengths:ia,coords:na}=S;aa=S=Number.POSITIVE_INFINITY;let pa=Number.NEGATIVE_INFINITY,sa=Number.NEGATIVE_INFINITY,va=0;for(const Da of ia){let za=na[va],ya=na[va+1];S=Math.min(za,S);aa=Math.min(ya,aa);pa=Math.max(za,pa);sa=Math.max(ya,sa);va+=Z;for(let Qa=1;Qa<Da;Qa++,va+=Z){const Ka=na[va],Oa=na[va+1];za+=Ka;ya+=Oa;0>Ka&&(S=Math.min(S,za));0<Ka&&(pa=Math.max(pa,za));0>Oa?aa=Math.min(aa,ya):0<Oa&&(sa=Math.max(sa,ya))}}A[0]=S;A[1]=aa;A[2]=pa;A[3]=sa;return A};d.getSignedQuantizedRingArea=
Ua;d.quantizeOptimizedFeatureSet=function(A,S){const {geometryType:Z,features:aa,hasM:ia,hasZ:na}=S;if(!A)return S;for(let pa=0;pa<aa.length;pa++){const sa=aa[pa],va=sa.weakClone();va.geometry=new m;Fa(va.geometry,sa.geometry,ia,na,Z,A);sa.centroid&&(va.centroid=new m,Fa(va.centroid,sa.centroid,ia,na,"esriGeometryPoint",A));aa[pa]=va}S.transform=A;return S};d.quantizeOptimizedGeometry=Fa;d.quantizeX=t;d.quantizeY=w;d.removeCollinearVectices=function(A,S,Z,aa,ia){if(!S||!S.coords||!S.coords.length)return null;
Z=kb[Z];const {coords:na,lengths:pa}=S;S=v(aa,ia,aa,ia);aa=r(aa,ia);let sa=ia=0,va=0,Da=0;for(const Qa of pa){sa=Da;S(A.coords,na,sa,ia,na[ia],na[ia+1]);ia+=aa;var za=na[ia];let Ka=na[ia+1],Oa=za,Pa=Ka;var ya=Ka/za;sa+=aa;S(A.coords,na,sa,ia,Oa,Pa);ia+=aa;for(let Ja=2;Ja<Qa;Ja++){za=na[ia];Ka=na[ia+1];const Ra=Ka/za,Wa=ya===Ra||!isFinite(ya)&&!isFinite(Ra);ya=Wa&&isFinite(Ra)?0<=ya&&0<=Ra||0>=ya&&0>=Ra:0<=Pa&&0<=Ka||0>=Pa&&0>=Ka;Wa&&ya?(Oa+=za,Pa+=Ka):(Oa=za,Pa=Ka,sa+=aa);S(A.coords,na,sa,ia,Oa,Pa);
ia+=aa;ya=Ra}sa+=aa;za=(sa-Da)/aa;za>=Z&&(A.lengths[va]=za,Da=sa,va++)}A.coords.length>Da&&(A.coords.length=Da);A.lengths.length>va&&(A.lengths.length=va);return A.coords.length&&A.lengths.length?A:null};d.removeZMValues=function(A,S,Z,aa,ia,na){Sa(A);A.lengths.push(...S.lengths);if(Z===ia&&aa===na)for(var pa=0;pa<S.coords.length;pa++)A.coords.push(S.coords[pa]);else for(pa=r(Z,aa),Z=v(Z,aa,ia,na),S=S.coords,aa=0;aa<S.length;aa+=pa)Z(A.coords,S,A.coords.length,aa,S[aa],S[aa+1]);return A};d.unquantizeOptimizedFeatureSet=
function(A){const {transform:S,features:Z,hasM:aa,hasZ:ia}=A;if(!S)return A;for(const na of Z)null!=na.geometry&&Ha(na.geometry,na.geometry,aa,ia,S),null!=na.centroid&&Ha(na.centroid,na.centroid,aa,ia,S);A.transform=null;return A};d.unquantizeOptimizedGeometry=Ha;d.unquantizeValue=c;d.unquantizeX=function(A,S){return c(A,S,0)};d.unquantizeY=function(A,S){return c(A,-S,1)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers"],function(d,b){let M=function(){function G(E=null,L={},C,p){this.geometry=E;this.attributes=L;this.centroid=C;this.objectId=p;this.geohashY=this.geohashX=this.displayId=0}G.prototype.weakClone=function(){const E=new G(this.geometry,this.attributes,this.centroid,this.objectId);E.displayId=this.displayId;E.geohashX=this.geohashX;E.geohashY=this.geohashY;return E};return b._createClass(G)}(),P=function(G){function E(){return G.apply(this,arguments)||this}b._inherits(E,
G);return b._createClass(E)}(M);d.OptimizedFeature=M;d.OptimizedFeatureWithGeometry=P;d.hasGeometry=function(G){return!(null==G.geometry||!G.geometry.coords||!G.geometry.coords.length)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(d){return function(){function b(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=
this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}b.prototype.weakClone=function(){const M=new b;M.objectIdFieldName=this.objectIdFieldName;M.globalIdFieldName=this.globalIdFieldName;M.geohashFieldName=this.geohashFieldName;M.geometryProperties=this.geometryProperties;M.geometryType=this.geometryType;M.spatialReference=this.spatialReference;M.hasZ=this.hasZ;
M.hasM=this.hasM;M.features=this.features;M.fields=this.fields;M.transform=this.transform;M.exceededTransferLimit=this.exceededTransferLimit;M.uniqueIdField=this.uniqueIdField;M.queryGeometry=this.queryGeometry;M.queryGeometryType=this.queryGeometryType;return M};return d._createClass(b)}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(d){return function(){function b(P=[],G=[],E=!1){this.lengths=P??[];this.coords=G??[];this.hasIndeterminateRingOrder=
E}b.fromRect=function(P){const [G,E,L,C]=P;P=L-G;const p=C-E;return new b([5],[G,E,P,0,0,p,-P,0,0,-p])};var M=b.prototype;M.forEachVertex=function(P){let G=0;this.lengths.length||P(this.coords[0],this.coords[1]);for(let E=0;E<this.lengths.length;E++){const L=this.lengths[E];for(let C=0;C<L;C++)P(this.coords[2*(C+G)],this.coords[2*(C+G)+1]);G+=L}};M.clone=function(P){return P?(P.set(this.coords),new b(this.lengths.slice(),P,this.hasIndeterminateRingOrder)):new b(this.lengths.slice(),this.coords.slice(),
this.hasIndeterminateRingOrder)};d._createClass(b,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((P,G)=>P+G)}}]);return b}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(d,b,M,P,G){function E(p,
m,r){L.minX=m[0];L.minY=m[1];L.maxX=m[2];L.maxY=m[3];p.search(L,r)}const L={minX:0,minY:0,maxX:0,maxY:0};let C=function(){function p(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new P.PooledRBush(9,M("esri-csp-restrictions")?r=>({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const r=Array(this._idByBounds.size);let v=0;this._idByBounds.forEach((t,w)=>{r[v++]=w});this._indexInvalid=
!1;this._index.clear();this._index.load(r)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(r=>this._idByBounds.has(r))))),this._boundsToLoad.length=0)}}var m=p.prototype;m.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};m.delete=function(r){const v=this._boundsById.get(r);this._boundsById.delete(r);v&&(this._idByBounds.delete(v),this._indexInvalid||this._index.remove(v))};
m.forEachInBounds=function(r,v){this._loadIndex();E(this._index,r,t=>v(this._idByBounds.get(t)))};m.get=function(r){return this._boundsById.get(r)};m.has=function(r){return this._boundsById.has(r)};m.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};m.set=function(r,v){if(!this._indexInvalid){const t=this._boundsById.get(r);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(r,v);v&&(this._idByBounds.set(v,r),this._indexInvalid||
(this._boundsToLoad.push(v),5E4<this._boundsToLoad.length&&this._loadIndex()))};b._createClass(p,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const r=G.empty();for(const v of this._boundsById.values())v&&(r[0]=Math.min(v[0],r[0]),r[1]=Math.min(v[1],r[1]),r[2]=Math.max(v[2],r[2]),r[3]=Math.max(v[3],r[3]));return r}},{key:"valid",get:function(){return!this._indexInvalid}}]);return p}();d.BoundsStore=C;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(d,b,M,P,G,E){function L(y,q){C(y,0,y.children.length,q,y)}function C(y,q,n,g,K){K||(K=new N([]));K.minX=Infinity;K.minY=Infinity;K.maxX=-Infinity;K.maxY=-Infinity;for(let X=q,T;X<n;X++)T=y.children[X],p(K,y.leaf?g(T):T);return K}function p(y,q){y.minX=Math.min(y.minX,q.minX);y.minY=Math.min(y.minY,q.minY);y.maxX=Math.max(y.maxX,q.maxX);y.maxY=Math.max(y.maxY,q.maxY)}function m(y,q){return y.minX-q.minX}function r(y,q){return y.minY-q.minY}function v(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}
function t(y){return y.maxX-y.minX+(y.maxY-y.minY)}function w(y,q){return y.minX<=q.minX&&y.minY<=q.minY&&q.maxX<=y.maxX&&q.maxY<=y.maxY}function c(y,q){return q.minX<=y.maxX&&q.minY<=y.maxY&&q.maxX>=y.minX&&q.maxY>=y.minY}function h(y,q,n,g,K){for(q=[q,n];q.length;){n=P.assumeNonNull(q.pop());const X=P.assumeNonNull(q.pop());if(n-X<=g)continue;const T=X+Math.ceil((n-X)/g/2)*g;E.quickselect(y,T,X,n,K);q.push(X,T,T,n)}}let B=function(){function y(n=9,g){this._compareMinX=m;this._compareMinY=r;this._toBBox=
K=>K;this._maxEntries=Math.max(4,n||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));g&&("function"===typeof g?this._toBBox=g:this._initFormat(g));this.clear()}var q=y.prototype;q.destroy=function(){this.clear();O.prune();x.prune();z.prune();I.prune()};q.all=function(n){this._all(this._data,n)};q.search=function(n,g){let K=this._data;const X=this._toBBox;if(c(n,K))for(O.clear();K;){for(let T=0,V=K.children.length;T<V;T++){const F=K.children[T],J=K.leaf?X(F):F;c(n,J)&&(K.leaf?g(F):w(n,
J)?this._all(F,g):O.push(F))}K=O.pop()}};q.collides=function(n){let g=this._data;const K=this._toBBox;if(!c(n,g))return!1;for(O.clear();g;){for(let X=0,T=g.children.length;X<T;X++){const V=g.children[X],F=g.leaf?K(V):V;if(c(n,F)){if(g.leaf||w(n,F))return!0;O.push(V)}}g=O.pop()}return!1};q.load=function(n){if(!n.length)return this;if(n.length<this._minEntries){for(let g=0,K=n.length;g<K;g++)this.insert(n[g]);return this}n=this._build(n.slice(0,n.length),0,n.length-1,0);if(this._data.children.length)if(this._data.height===
n.height)this._splitRoot(this._data,n);else{if(this._data.height<n.height){const g=this._data;this._data=n;n=g}this._insert(n,this._data.height-n.height-1,!0)}else this._data=n;return this};q.insert=function(n){n&&this._insert(n,this._data.height-1);return this};q.clear=function(){this._data=new N([]);return this};q.remove=function(n){if(!n)return this;let g=this._data,K=null,X=0,T=!1,V;const F=this._toBBox(n);z.clear();for(I.clear();g||0<z.length;){g||(g=P.assumeNonNull(z.pop()),K=z.data[z.length-
1],X=I.pop()??0,T=!0);if(g.leaf&&(V=M.indexOf(g.children,n,g.children.length,g.indexHint),-1!==V)){g.children.splice(V,1);z.push(g);this._condense(z);break}T||g.leaf||!w(g,F)?K?(X++,g=K.children[X],T=!1):g=null:(z.push(g),I.push(X),X=0,K=g,g=g.children[0])}return this};q.toJSON=function(){return this._data};q.fromJSON=function(n){this._data=n;return this};q._all=function(n,g){for(x.clear();n;){if(!0===n.leaf)for(const K of n.children)g(K);else x.pushArray(n.children);n=x.pop()??null}};q._build=function(n,
g,K,X){var T=K-g+1,V=this._maxEntries;if(T<=V)return n=new N(n.slice(g,K+1)),L(n,this._toBBox),n;X||(X=Math.ceil(Math.log(T)/Math.log(V)),V=Math.ceil(T/V**(X-1)));const F=new l([]);F.height=X;T=Math.ceil(T/V);V=T*Math.ceil(Math.sqrt(V));for(h(n,g,K,V,this._compareMinX);g<=K;g+=V){const J=Math.min(g+V-1,K);h(n,g,J,T,this._compareMinY);for(let ba=g;ba<=J;ba+=T)F.children.push(this._build(n,ba,Math.min(ba+T-1,J),X-1))}L(F,this._toBBox);return F};q._chooseSubtree=function(n,g,K,X){for(;;){X.push(g);if(!0===
g.leaf||X.length-1===K)break;let T=Infinity,V=Infinity,F=void 0;for(let J=0,ba=g.children.length;J<ba;J++){const ka=g.children[J],ta=v(ka),Ba=(Math.max(ka.maxX,n.maxX)-Math.min(ka.minX,n.minX))*(Math.max(ka.maxY,n.maxY)-Math.min(ka.minY,n.minY))-ta;Ba<V?(V=Ba,T=ta<T?ta:T,F=ka):Ba===V&&ta<T&&(T=ta,F=ka)}g=F||g.children[0]}return g};q._insert=function(n,g,K){var X=this._toBBox;K=K?n:X(n);z.clear();X=this._chooseSubtree(K,this._data,g,z);X.children.push(n);for(p(X,K);0<=g;)if(z.data[g].children.length>
this._maxEntries)this._split(z,g),g--;else break;this._adjustParentBBoxes(K,z,g)};q._split=function(n,g){const K=n.data[g];var X=K.children.length;const T=this._minEntries;this._chooseSplitAxis(K,T,X);(X=this._chooseSplitIndex(K,T,X))?(X=K.children.splice(X,K.children.length-X),X=K.leaf?new N(X):new l(X),X.height=K.height,L(K,this._toBBox),L(X,this._toBBox),g?n.data[g-1].children.push(X):this._splitRoot(K,X)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};q._splitRoot=
function(n,g){this._data=new l([n,g]);this._data.height=n.height+1;L(this._data,this._toBBox)};q._chooseSplitIndex=function(n,g,K){let X,T,V=void 0;X=T=Infinity;for(let J=g;J<=K-g;J++){var F=C(n,0,J,this._toBBox);const ba=C(n,J,K,this._toBBox),ka=Math.max(0,Math.min(F.maxX,ba.maxX)-Math.max(F.minX,ba.minX))*Math.max(0,Math.min(F.maxY,ba.maxY)-Math.max(F.minY,ba.minY));F=v(F)+v(ba);ka<X?(X=ka,V=J,T=F<T?F:T):ka===X&&F<T&&(T=F,V=J)}return V};q._chooseSplitAxis=function(n,g,K){const X=n.leaf?this._compareMinX:
m,T=n.leaf?this._compareMinY:r,V=this._allDistMargin(n,g,K,X);g=this._allDistMargin(n,g,K,T);V<g&&n.children.sort(X)};q._allDistMargin=function(n,g,K,X){n.children.sort(X);X=this._toBBox;var T=C(n,0,g,X);const V=C(n,K-g,K,X);let F=t(T)+t(V);for(let J=g;J<K-g;J++){const ba=n.children[J];p(T,n.leaf?X(ba):ba);F+=t(T)}for(K=K-g-1;K>=g;K--)T=n.children[K],p(V,n.leaf?X(T):T),F+=t(V);return F};q._adjustParentBBoxes=function(n,g,K){for(;0<=K;K--)p(g.data[K],n)};q._condense=function(n){for(let g=n.length-
1;0<=g;g--){const K=n.data[g];if(0===K.children.length)if(0<g){const X=n.data[g-1],T=X.children;T.splice(M.indexOf(T,K,T.length,X.indexHint),1)}else this.clear();else L(K,this._toBBox)}};q._initFormat=function(n){const g=["return a"," - b",";"];this._compareMinX=new Function("a","b",g.join(n[0]));this._compareMinY=new Function("a","b",g.join(n[1]));this._toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")};return b._createClass(y)}();const O=new G,
x=new G,z=new G,I=new G({deallocator:void 0});G=b._createClass(function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity});let W=function(y){function q(){var n=y.apply(this,arguments)||this;n.height=1;n.indexHint=new M.PositionHint;return n}b._inherits(q,y);return b._createClass(q)}(G),N=function(y){function q(n){var g=y.call(this)||this;g.children=n;g.leaf=!0;return g}b._inherits(q,y);return b._createClass(q)}(W),l=function(y){function q(n){var g=y.call(this)||this;g.children=n;g.leaf=
!1;return g}b._inherits(q,y);return b._createClass(q)}(W);d.BBox=G;d.PooledRBush=B;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(d,b){var M={exports:{}};M.exports;(function(P){(function(G){G=G();void 0!==G&&(P.exports=G)})(function(){function G(C,p,m,r,v){for(;r>m;){if(600<r-m){var t=r-m+1,w=p-m+1,c=Math.log(t),h=.5*Math.exp(2*c/3);c=.5*Math.sqrt(c*h*(t-h)/t)*(0>w-t/2?-1:1);G(C,p,Math.max(m,Math.floor(p-
w*h/t+c)),Math.min(r,Math.floor(p+(t-w)*h/t+c)),v)}t=C[p];w=m;h=r;E(C,m,p);for(0<v(C[r],t)&&E(C,m,r);w<h;){E(C,w,h);w++;for(h--;0>v(C[w],t);)w++;for(;0<v(C[h],t);)h--}0===v(C[m],t)?E(C,m,h):(h++,E(C,h,r));h<=p&&(m=h+1);p<=h&&(r=h-1)}}function E(C,p,m){var r=C[p];C[p]=C[m];C[m]=r}function L(C,p){return C<p?-1:C>p?1:0}return function(C,p,m,r,v){G(C,p,m||0,r||C.length-1,v||L)}})})(M);b=b.getDefaultExportFromCjs(M.exports);d.quickselect=b})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports",
"../centroid","../OptimizedFeature","../OptimizedGeometry"],function(d,b,M,P){d.optimizedFeatureQueryEngineAdapter={getObjectId(G){return G.objectId},getAttributes(G){return G.attributes},getAttribute(G,E){return G.attributes[E]},cloneWithGeometry(G,E){return new M.OptimizedFeature(E,G.attributes,null,G.objectId)},getGeometry(G){return G.geometry},getCentroid(G,E){null==G.centroid&&(G.centroid=b.getCentroidOptimizedGeometry(new P,G.geometry,E.hasZ,E.hasM));return G.centroid}};Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(d){function b(P,G,E,L,C,p,m=1){p=C?p?4:3:p?3:2;let r=E,v=E+p,t=0,w=0,c=E=0,h=0;for(let B=0,O=L-1;B<O;B++,r+=p,v+=p){L=G[r];const x=G[r+1],z=G[r+2],I=G[v],W=G[v+1],N=G[v+2];let l=L*W-I*x;c+=l;t+=(L+I)*l;w+=(x+W)*l;C&&(l=L*N-I*z,E+=(z+N)*l,h+=l);L<P[0]&&(P[0]=L);L>P[1]&&(P[1]=L);x<P[2]&&(P[2]=x);x>P[3]&&(P[3]=x);C&&(z<P[4]&&(P[4]=z),z>P[5]&&(P[5]=z))}0<c*m&&(c*=-1);0<h*m&&(h*=-1);if(!c)return null;
P=[t,w,.5*c];C&&(P[3]=E,P[4]=.5*h);return P}function M(P,G,E,L,C){C=L?C?4:3:C?3:2;let p=G,m=G+C,r=0,v=0,t=0,w=0;for(let O=0,x=E-1;O<x;O++,p+=C,m+=C){var c=P[p];const z=P[p+1],I=P[p+2],W=P[m],N=P[m+1],l=P[m+2];if(L){var h=W-c;var B=N-z;const y=l-I;h=Math.sqrt(h*h+B*B+y*y)}else h=W-c,B=N-z,h=Math.sqrt(h*h+B*B);h&&(r+=h,L?(c=[c+.5*(W-c),z+.5*(N-z),I+.5*(l-I)],v+=h*c[0],t+=h*c[1],w+=h*c[2]):(c=[c+.5*(W-c),z+.5*(N-z)],v+=h*c[0],t+=h*c[1]))}return 0<r?L?[v/r,t/r,w/r]:[v/r,t/r]:0<E?L?[P[G],P[G+1],P[G+2]]:
[P[G],P[G+1]]:null}d.getCentroidOptimizedGeometry=function(P,G,E,L,C){if(null==G||!G.lengths.length)return null;const p="upperLeft"===C?.originPosition?-1:1;P.lengths.length&&(P.lengths.length=0);P.coords.length&&(P.coords.length=0);C=P.coords;const m=[],r=E?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],
{lengths:v,coords:t}=G,w=E?L?4:3:L?3:2;let c=0;for(var h of v){const B=b(r,t,c,h,E,L,p);B&&m.push(B);c+=h*w}m.sort((B,O)=>{let x=p*B[2]-p*O[2];0===x&&E&&(x=B[4]-O[4]);return x});m.length&&(h=6*m[0][2],C[0]=m[0][0]/h,C[1]=m[0][1]/h,E&&(h=6*m[0][4],C[2]=0!==h?m[0][3]/h:0),C[0]<r[0]||C[0]>r[1]||C[1]<r[2]||C[1]>r[3]||E&&(C[2]<r[4]||C[2]>r[5]))&&(C.length=0);if(!C.length)if(G=G.lengths[0]?M(t,0,v[0],E,L):null)C[0]=G[0],C[1]=G[1],E&&2<G.length&&(C[2]=G[2]);else return null;return P};d.lineCentroid=M;Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(d,b,M,P,G,E,L,C,p,m,r,v){async function t(l,y,q){if(!l)return null;
var {where:n}=l;l.where=n=n&&n.trim();if(!n||/^1 *= *1$/.test(n)||y&&y===n)l.where=null;if(!l.geometry)return l;y=await c(l);l.distance=0;l.units=null;"esriSpatialRelEnvelopeIntersects"===l.spatialRel&&({spatialReference:n}=l.geometry,y=E.getGeometryExtent(y),y.spatialReference=n);if(y){await v.checkProjectionSupport(y.spatialReference,q);n=y.spatialReference;y=w(y,q)&&L.isExtent(y)?{spatialReference:n,rings:[[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]]]}:y;n=
(await C.normalizeCentralMeridian(L.fromJSON(y)))[0];if(null==n)throw O;const g="quantizationParameters"in l&&l.quantizationParameters?.tolerance||"maxAllowableOffset"in l&&l.maxAllowableOffset||0;y=g&&w(y,q)?{densificationStep:8*g}:void 0;n=n.toJSON();y=await v.project(n,n.spatialReference,q,y);if(!y)throw O;y.spatialReference=q;l.geometry=y}return l}function w(l,y){if(!l)return!1;const q=l.spatialReference;return(L.isExtent(l)||L.isPolygon(l)||L.isPolyline(l))&&!p.equals(q,y)&&!G.canProjectWithoutEngine(q,
y)}async function c(l){const {distance:y,units:q}=l,n=l.geometry;if(null==y||"vertexAttributes"in n)return n;var g=n.spatialReference;l=q?B.fromJSON(q):P.getUnitString(g);g=g&&(p.isGeographic(g)||p.isWebMercator(g))?n:await v.checkProjectionSupport(g,p.WGS84).then(()=>v.project(n,p.WGS84));return(await h())(g.spatialReference,g,y,l)}async function h(){return(await new Promise((l,y)=>d(["../../../geometry/geometryEngineJSON"],l,y))).geodesicBuffer}const B=new M.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),O=Object.freeze({}),x=new r,z=new r,I=new r,W={esriGeometryPoint:m.convertToPoint,esriGeometryPolyline:m.convertToPolyline,esriGeometryPolygon:m.convertToPolygon,esriGeometryMultipoint:m.convertToMultipoint},N=(l,y)=>"_geVersion"!==l?y:void 0;b.QUERY_ENGINE_EMPTY_RESULT=O;b.cleanFromGeometryEngine=function(l){return l&&"_geVersion"in l?JSON.parse(JSON.stringify(l,
N)):l};b.getGeometry=function(l,y,q,n,g,K,X=y,T=q){const V=y&&X,F=q&&T;n=null!=n?"coords"in n?n:n.geometry:null;if(null==n)return null;if(g)return y=m.generalizeOptimizedGeometry(z,n,y,q,l,g,X,T),K&&(y=m.quantizeOptimizedGeometry(I,y,V,F,l,K)),W[l]?.(y,V,F)??null;if(K)return K=m.quantizeOptimizedGeometry(I,n,y,q,l,K,X,T),W[l]?.(K,V,F)??null;m.removeZMValues(x,n,y,q,X,T);return W[l]?.(x,V,F)??null};b.normalizeQuery=async function(l,y,q){const {outFields:n,orderByFields:g,groupByFieldsForStatistics:K,
outStatistics:X}=l;if(n)for(var T=0;T<n.length;T++)n[T]=n[T].trim();if(g)for(T=0;T<g.length;T++)g[T]=g[T].trim();if(K)for(T=0;T<K.length;T++)K[T]=K[T].trim();if(X)for(T=0;T<X.length;T++)X[T].onStatisticField&&(X[T].onStatisticField=X[T].onStatisticField.trim());l.geometry&&!l.outSR&&(l.outSR=l.geometry.spatialReference);return t(l,y,q)};b.normalizeQueryLike=t;b.transformCentroid=function(l,y,q,n=l.hasZ,g=l.hasM){if(null==y)return null;const K=l.hasZ&&n,X=l.hasM&&g;return q?(l=m.quantizeOptimizedGeometry(I,
y,l.hasZ,l.hasM,"esriGeometryPoint",q,n,g),m.convertToPoint(l,K,X)):m.convertToPoint(y,K,X)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t,w,c,h,B,O,x,z,I,W,N,l,y,q){function n(){return!!hb&&h.isLoaded()}function g(Y){null==e&&(e=Promise.all([h.load(),(new Promise((ja,ca)=>d(["../chunks/geometryEngineBase"],ja,ca))).then(ja=>ja.geometryEngineBase),new Promise((ja,ca)=>d(["./geometryAdapters/hydrated"],ja,ca))]));return e.then(([,ja,{hydratedAdapter:ca}])=>{E.throwIfAborted(Y);lb=ca;hb=ja.default;hb._enableProjection(h.pe);Ob.notify()})}function K(Y,ja,ca=null,oa=null){return Array.isArray(Y)?0===Y.length?
[]:X(lb,Y,Y[0].spatialReference,ja,ca,oa):X(lb,[Y],Y.spatialReference,ja,ca,oa)[0]}function X(Y,ja,ca,oa,Ca=null,Aa=null){if(null==ca||null==oa)return ja;if(J(ca,oa,Ca))return ja.map(La=>ba(La,ca,oa));if(null==Ca){const La=N.cacheKey(ca,oa);void 0!==fb[La]?Ca=fb[La]:(Ca=V(ca,oa,void 0),null==Ca&&(Ca=new N),fb[La]=Ca)}if(null==hb||null==Y)throw new Jb;return null!=Aa?hb._project(Y,ja,ca,oa,Ca,Aa):hb._project(Y,ja,ca,oa,Ca)}function T(Y,ja){if(!n())for(const ca of Y)if(null!=ca&&!l.equals(ca.spatialReference,
ja)&&l.isValid(ca.spatialReference)&&l.isValid(ja)&&!J(ca.spatialReference,ja))return C.trackAccess(Ob),{pending:g(),geometries:null};return{pending:null,geometries:Y.map(ca=>null==ca?null:l.equals(ca.spatialReference,ja)?ca:l.isValid(ca.spatialReference)&&l.isValid(ja)?F(ca,ja):null)}}function V(Y,ja,ca=null){if(null==Y||null==ja)return null;if(null==hb||null==lb)throw new Jb;Y=hb._getTransformation(lb,Y,ja,ca,ca?.spatialReference);return null!==Y?N.fromGE(Y):null}function F(Y,ja){try{const ca=K(Y,
ja);if(null==ca)return null;"xmin"in Y&&"xmin"in ca&&(ca.zmin=Y.zmin,ca.zmax=Y.zmax);const oa=q.getGeometryZScaler(ca.type,Y.spatialReference,ja);null!=oa&&oa(ca);return ca}catch(ca){if(!(ca instanceof Jb))throw ca;return null}}function J(Y,ja,ca){return ca?!1:l.equals(Y,ja)?!0:l.isValid(Y)&&l.isValid(ja)&&!!Wa(Y,ja,Zb)}function ba(Y,ja,ca){return Y?"x"in Y?ka(Y,ja,new B,ca,0):"xmin"in Y?Fa(Y,ja,new w,ca,0):"rings"in Y?Ea(Y,ja,new O,ca,0):"paths"in Y?Ba(Y,ja,new x,ca,0):"points"in Y?ta(Y,ja,new c,
ca,0):null:null}function ka(Y,ja,ca,oa,Ca){Ya[0]=Y.x;Ya[1]=Y.y;const Aa=Y.z;Ya[2]=void 0!==Aa?Aa:Ca;if(!Sa(Ya,ja,0,Ya,oa,0,1))return null;ca.x=Ya[0];ca.y=Ya[1];ca.spatialReference=oa;void 0===Aa?(ca.z=void 0,ca.hasZ=!1):(ca.z=Ya[2],ca.hasZ=!0);void 0===Y.m?(ca.m=void 0,ca.hasM=!1):(ca.m=Y.m,ca.hasM=!0);return ca}function ta(Y,ja,ca,oa,Ca){const {points:Aa,hasZ:La,hasM:Ta}=Y;Y=[];const nb=Aa.length,ob=[];for(var mb of Aa)ob.push(mb[0],mb[1],La?mb[2]:Ca);if(!Sa(ob,ja,0,ob,oa,0,nb))return null;for(ja=
0;ja<nb;++ja){Ca=3*ja;mb=ob[Ca];const wb=ob[Ca+1];La&&Ta?Y.push([mb,wb,ob[Ca+2],Aa[ja][3]]):La?Y.push([mb,wb,ob[Ca+2]]):Ta?Y.push([mb,wb,Aa[ja][2]]):Y.push([mb,wb])}ca.points=Y;ca.spatialReference=oa;ca.hasZ=La;ca.hasM=Ta;return ca}function Ba(Y,ja,ca,oa,Ca){const {paths:Aa,hasZ:La,hasM:Ta}=Y;Y=[];if(!Va(Aa,La??!1,Ta??!1,ja,Y,oa,Ca))return null;ca.paths=Y;ca.spatialReference=oa;ca.hasZ=La;ca.hasM=Ta;return ca}function Ea(Y,ja,ca,oa,Ca){const {rings:Aa,hasZ:La,hasM:Ta}=Y;Y=[];if(!Va(Aa,La??!1,Ta??
!1,ja,Y,oa,Ca))return null;ca.rings=Y;ca.spatialReference=oa;ca.hasZ=La;ca.hasM=Ta;return ca}function Fa(Y,ja,ca,oa,Ca){const {xmin:Aa,ymin:La,xmax:Ta,ymax:nb,hasZ:ob,hasM:mb}=Y;if(!Ma(Aa,La,ob?Y.zmin:Ca,ja,Ya,oa))return null;ca.xmin=Ya[0];ca.ymin=Ya[1];ob&&(ca.zmin=Ya[2]);if(!Ma(Ta,nb,ob?Y.zmax:Ca,ja,Ya,oa))return null;ca.xmax=Ya[0];ca.ymax=Ya[1];ob&&(ca.zmax=Ya[2]);mb&&(ca.mmin=Y.mmin,ca.mmax=Y.mmax);ca.spatialReference=oa;return ca}function Ma(Y,ja,ca,oa,Ca,Aa){ib[0]=Y;ib[1]=ja;ib[2]=ca;return Sa(ib,
oa,0,Ca,Aa,0,1)}function Ha(Y,ja,ca,oa){if(null==ja||null==oa||2>Y.length)return!1;2===Y.length&&(ib[0]=Y[0],ib[1]=Y[1],ib[2]=0,Y=ib);return Sa(Y,ja,0,ca,oa,0,1)}function Ua(Y,ja,ca){if(null==ja)return!1;ja=db(ja,Sb);ja=yb[ja][la.WGS84_COMPARABLE_LON_LAT];if(null==ja)return!1;ja(Y,0,ib,0);ca!==ib&&(ca[0]=ib[0],ca[1]=ib[1],2<ca.length&&(ca[2]=ib[2]));return!0}function Sa(Y,ja,ca,oa,Ca,Aa,La=1){ja=Wa(ja,Ca,Zb);if(null==ja)return!1;if(ja===f){if(Y===oa&&ca===Aa)return!0;La=ca+3*La;for(let Ta=ca,nb=Aa;Ta<
La;Ta++,nb++)oa[nb]=Y[Ta];return!0}La=ca+3*La;for(let Ta=ca,nb=Aa;Ta<La;Ta+=3,nb+=3)ja(Y,Ta,oa,nb);return!0}function Va(Y,ja,ca,oa,Ca,Aa,La=0){const Ta=[];for(const nb of Y)for(const ob of nb)Ta.push(ob[0],ob[1],ja?ob[2]:La);if(!Sa(Ta,oa,0,Ta,Aa,0,Ta.length/3))return!1;oa=0;Ca.length=0;for(const nb of Y){Y=[];for(const ob of nb)ja&&ca?Y.push([Ta[oa++],Ta[oa++],Ta[oa++],ob[3]]):ja?Y.push([Ta[oa++],Ta[oa++],Ta[oa++]]):(ca?Y.push([Ta[oa++],Ta[oa++],ob[2]]):Y.push([Ta[oa++],Ta[oa++]]),oa++);Ca.push(Y)}return!0}
function eb(Y,ja,ca,oa){ja=oa+ja;if(ja<oa/2||ca>ja)return Number.MAX_VALUE;Y=Math.abs(Db*Y)+Math.asin(ca/ja);return Y>=Math.PI/2?Number.MAX_VALUE:ca/Math.cos(Y)}function kb(Y,ja,ca){const oa=Math.sin(Y);Y=Math.cos(Y);const Ca=Math.sin(ja);ja=Math.cos(ja);ca[0]=-oa;ca[4]=-Ca*Y;ca[8]=ja*Y;ca[12]=0;ca[1]=Y;ca[5]=-Ca*oa;ca[9]=ja*oa;ca[13]=0;ca[2]=0;ca[6]=ja;ca[10]=Ca;ca[14]=0;ca[3]=0;ca[7]=0;ca[11]=0;ca[15]=1;return ca}function jb(Y,ja,ca){kb(Y,ja,ca);m.transpose(ca,ca);return ca}function db(Y,ja){if(!Y)return la.UNKNOWN;
if(ja.spatialReference===Y)return ja.spatialReferenceId;ja.spatialReference=Y;"metersPerUnit"in ja&&(ja.metersPerUnit=L.getMetersPerUnitForSR(Y,1));return Y.wkt===t.SphericalECEFSpatialReferenceLike.wkt?ja.spatialReferenceId=la.SPHERICAL_ECEF:l.isWGS84(Y)?ja.spatialReferenceId=la.WGS84:l.isWebMercator(Y)?ja.spatialReferenceId=la.WEB_MERCATOR:l.isPlateCarree(Y)?ja.spatialReferenceId=la.PLATE_CARREE:Y.wkt===t.WGS84ECEFSpatialReferenceLike.wkt?ja.spatialReferenceId=la.WGS84_ECEF:Y.wkid===y.SupportedGCSWkids.CGCS2000?
ja.spatialReferenceId=la.CGCS2000:Y.wkt===t.SphericalPCPFMarsLike.wkt?ja.spatialReferenceId=la.SPHERICAL_MARS_PCPF:Y.wkt===t.SphericalPCPFMoonLike.wkt?ja.spatialReferenceId=la.SPHERICAL_MOON_PCPF:l.isMars(Y)?ja.spatialReferenceId=la.GCSMARS2000:l.isMoon(Y)?ja.spatialReferenceId=la.GCSMOON2000:ja.spatialReferenceId=la.UNKNOWN}function f(Y,ja,ca,oa){Y!==ca&&(ca[oa++]=Y[ja++],ca[oa++]=Y[ja++],ca[oa]=Y[ja])}function D(Y,ja,ca,oa){ca[oa++]=Pb*(Y[ja++]/I.earth.radius);ca[oa++]=Pb*(Math.PI/2-2*Math.atan(Math.exp(-Y[ja++]/
I.earth.radius)));ca[oa]=Y[ja]}function ha(Y,ja,ca,oa){D(Y,ja,ca,oa);sa(ca,oa,ca,oa)}function Q(Y,ja,ca,oa){D(Y,ja,ca,oa);Oa(ca,oa,ca,oa)}function ea(Y,ja,ca,oa,Ca){var Aa=.4999999*Math.PI;Aa=G.clamp(Db*Y[ja+1],-Aa,Aa);Aa=Math.sin(Aa);ca[oa++]=Db*Y[ja]*Ca.radius;ca[oa++]=Ca.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));ca[oa]=Y[ja+2]}function A(Y,ja,ca,oa){ea(Y,ja,ca,oa,I.earth)}function S(Y,ja,ca,oa){ca[oa]=Y[ja]*gc;ca[oa+1]=Y[ja+1]*gc;ca[oa+2]=Y[ja+2]}function Z(Y,ja,ca,oa){ca[oa]=Y[ja]*Tb;ca[oa+1]=
Y[ja+1]*Tb;ca[oa+2]=Y[ja+2]}function aa(Y,ja,ca,oa){D(Y,ja,ca,oa);S(ca,oa,ca,oa)}function ia(Y,ja,ca,oa,Ca){Ca+=Y[ja+2];const Aa=Db*Y[ja+1];Y=Db*Y[ja];ja=Math.cos(Aa);ca[oa++]=Math.cos(Y)*ja*Ca;ca[oa++]=Math.sin(Y)*ja*Ca;ca[oa]=Math.sin(Aa)*Ca}function na(Y,ja,ca,oa){ia(Y,ja,ca,oa,I.moon.radius)}function pa(Y,ja,ca,oa){ia(Y,ja,ca,oa,I.mars.radius)}function sa(Y,ja,ca,oa){ia(Y,ja,ca,oa,I.earth.radius)}function va(Y,ja,ca,oa,Ca){var Aa=Y[ja];const La=Y[ja+1];ja=Y[ja+2];Y=Math.sqrt(Aa*Aa+La*La+ja*ja);
ja=G.asinClamped(ja/(0===Y?1:Y));Aa=Math.atan2(La,Aa);ca[oa++]=Pb*Aa;ca[oa++]=Pb*ja;ca[oa]=Y-Ca}function Da(Y,ja,ca,oa){va(Y,ja,ca,oa,I.moon.radius)}function za(Y,ja,ca,oa){va(Y,ja,ca,oa,I.mars.radius)}function ya(Y,ja,ca,oa){va(Y,ja,ca,oa,I.earth.radius)}function Qa(Y,ja,ca,oa){ya(Y,ja,ca,oa);A(ca,oa,ca,oa)}function Ka(Y,ja,ca,oa){ya(Y,ja,ca,oa);Oa(ca,oa,ca,oa)}function Oa(Y,ja,ca,oa){var Ca=I.earth;const Aa=Db*Y[ja];var La=Db*Y[ja+1];Y=Y[ja+2];ja=Math.sin(La);La=Math.cos(La);const Ta=Ca.radius/
Math.sqrt(1-Ca.eccentricitySquared*ja*ja);ca[oa++]=(Ta+Y)*La*Math.cos(Aa);ca[oa++]=(Ta+Y)*La*Math.sin(Aa);ca[oa++]=(Ta*(1-Ca.eccentricitySquared)+Y)*ja}function Pa(Y,ja,ca,oa){var Ca=W.earthEllipsoidConstants,Aa=Y[ja],La=Y[ja+1];Y=Y[ja+2];let Ta;ja=Math.abs(Y);var nb=Aa*Aa+La*La;var ob=Math.sqrt(nb);var mb=nb+Y*Y;var wb=Math.sqrt(mb);Aa=Math.atan2(La,Aa);var Gb=Y*Y/mb;mb=nb/mb;La=Ca.a2/wb;nb=Ca.a3-Ca.a4/wb;.3<mb?(Gb=ja/wb*(1+mb*(Ca.a1+La+Gb*nb)/wb),wb=Math.asin(Gb),La=Gb*Gb,mb=Math.sqrt(1-La)):(mb=
ob/wb*(1-Gb*(Ca.a5-La-mb*nb)/wb),wb=Math.acos(mb),La=1-mb*mb,Gb=Math.sqrt(La));Ta=1-I.earth.eccentricitySquared*La;La=I.earth.radius/Math.sqrt(Ta);Ca=Ca.a6*La;La=ob-La*mb;nb=ja-Ca*Gb;ja=mb*La+Gb*nb;ob=mb*nb-Gb*La;Ca=ob/(Ca/Ta+ja);wb+=Ca;0>Y&&(wb=-wb);ca[oa++]=Pb*Aa;ca[oa++]=Pb*wb;ca[oa]=ja+ob*Ca/2}function Ja(Y,ja,ca,oa){Pa(Y,ja,ca,oa);sa(ca,oa,ca,oa)}function Ra(Y,ja,ca,oa){Pa(Y,ja,ca,oa);A(ca,oa,ca,oa)}function Wa(Y,ja,ca=ub()){return null==Y||null==ja?null:ua(Y,ja,ca).projector}function ua(Y,ja,
ca){if(null==Y||null==ja||ca.source.spatialReference===Y&&ca.dest.spatialReference===ja)return ca;const oa=db(Y,ca.source),Ca=db(ja,ca.dest);oa===la.UNKNOWN&&Ca===la.UNKNOWN?l.equals(Y,ja)?ca.projector=f:ca.projector=null:ca.projector=yb[oa][Ca];return ca}function ub(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:f}}let hb=null,lb=null,e=null,fb={};const Ob=new p.SimpleObservable;
let Jb=function(Y){function ja(){return Y.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}M._inherits(ja,Y);return M._createClass(ja)}(P);var la;(function(Y){Y[Y.UNKNOWN=0]="UNKNOWN";Y[Y.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";Y[Y.WGS84=2]="WGS84";Y[Y.WEB_MERCATOR=3]="WEB_MERCATOR";Y[Y.WGS84_ECEF=4]="WGS84_ECEF";Y[Y.CGCS2000=5]="CGCS2000";Y[Y.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";Y[Y.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";Y[Y.GCSMARS2000=
8]="GCSMARS2000";Y[Y.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";Y[Y.GCSMOON2000=10]="GCSMOON2000";Y[Y.LON_LAT=11]="LON_LAT";Y[Y.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const gc=I.earth.radius*Math.PI/180,Tb=180/(I.earth.radius*Math.PI),yb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:f,[la.WGS84_COMPARABLE_LON_LAT]:f,[la.SPHERICAL_ECEF]:sa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:A,[la.PLATE_CARREE]:S,
[la.WGS84]:f,[la.WGS84_ECEF]:Oa},[la.CGCS2000]:{[la.CGCS2000]:f,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:f,[la.WGS84_COMPARABLE_LON_LAT]:f,[la.SPHERICAL_ECEF]:sa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:S,[la.WGS84]:null,[la.WGS84_ECEF]:Oa},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:f,[la.GCSMOON2000]:null,[la.LON_LAT]:f,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:pa,
[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:f,[la.LON_LAT]:f,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:na,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,
[la.GCSMOON2000]:null,[la.LON_LAT]:D,[la.WGS84_COMPARABLE_LON_LAT]:D,[la.SPHERICAL_ECEF]:ha,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:f,[la.PLATE_CARREE]:aa,[la.WGS84]:D,[la.WGS84_ECEF]:Q},[la.WGS84_ECEF]:{[la.CGCS2000]:Pa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Pa,[la.WGS84_COMPARABLE_LON_LAT]:Pa,[la.SPHERICAL_ECEF]:Ja,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Ra,[la.PLATE_CARREE]:function(Y,
ja,ca,oa){Pa(Y,ja,ca,oa);S(ca,oa,ca,oa)},[la.WGS84]:Pa,[la.WGS84_ECEF]:f},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:ya,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:ya,[la.WGS84_COMPARABLE_LON_LAT]:ya,[la.SPHERICAL_ECEF]:f,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Qa,[la.PLATE_CARREE]:function(Y,ja,ca,oa){ya(Y,ja,ca,oa);S(ca,oa,ca,oa)},[la.WGS84]:ya,[la.WGS84_ECEF]:Ka},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:za,[la.GCSMOON2000]:null,
[la.LON_LAT]:za,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:f,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Da,[la.LON_LAT]:Da,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:f,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,
[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:f,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:f,[la.GCSMARS2000]:f,[la.GCSMOON2000]:f,[la.LON_LAT]:f,[la.WGS84_COMPARABLE_LON_LAT]:f,[la.SPHERICAL_ECEF]:sa,[la.SPHERICAL_MARS_PCPF]:pa,
[la.SPHERICAL_MOON_PCPF]:na,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:A,[la.PLATE_CARREE]:S,[la.WGS84]:f,[la.WGS84_ECEF]:Oa},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:f,[la.WGS84_COMPARABLE_LON_LAT]:f,[la.SPHERICAL_ECEF]:sa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:S,[la.WGS84]:f,[la.WGS84_ECEF]:Oa},[la.PLATE_CARREE]:{[la.CGCS2000]:Z,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,
[la.LON_LAT]:Z,[la.WGS84_COMPARABLE_LON_LAT]:Z,[la.SPHERICAL_ECEF]:function(Y,ja,ca,oa){Z(Y,ja,ca,oa);sa(ca,oa,ca,oa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(Y,ja,ca,oa){Z(Y,ja,ca,oa);A(ca,oa,ca,oa)},[la.PLATE_CARREE]:f,[la.WGS84]:Z,[la.WGS84_ECEF]:function(Y,ja,ca,oa){Z(Y,ja,ca,oa);Oa(ca,oa,ca,oa)}}},Sb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Ub={spatialReference:null,spatialReferenceId:la.UNKNOWN},Zb=ub(),hc=ub(),Db=
G.deg2rad(1),Pb=G.rad2deg(1),ib=v.create(),Fb=v.create(),Qb=v.create(),Ya=v.create(),Hb=v.create();b.canProjectToWGS84ComparableLonLat=function(Y){if(null==Y)return!1;Y=db(Y,Sb);return!!yb[Y][la.WGS84_COMPARABLE_LON_LAT]};b.canProjectWithoutEngine=J;b.computeENUToSphericalPCPFLocalRotation=kb;b.computeSphericalPCPFToENULocalRotation=jb;b.computeTranslationToOriginAndRotation=function(Y,ja,ca,oa){if(null==Y||null==oa)return!1;var Ca=db(Y,Sb),Aa=db(oa,Ub);if(Ca===Aa&&Aa!==la.SPHERICAL_ECEF&&Aa!==la.SPHERICAL_MARS_PCPF&&
Aa!==la.SPHERICAL_MOON_PCPF&&(Ca!==la.UNKNOWN||l.equals(Y,oa)))return m.fromTranslation(ca,ja),!0;if(Aa===la.SPHERICAL_ECEF||Aa===la.SPHERICAL_MARS_PCPF||Aa===la.SPHERICAL_MOON_PCPF){Ca=yb[Ca][la.LON_LAT];Aa=yb[la.LON_LAT][Aa];if(null==Ca||null==Aa)return!1;Ca(ja,0,Fb,0);Aa(Fb,0,Qb,0);kb(Db*Fb[0],Db*Fb[1],ca);ca[12]=Qb[0];ca[13]=Qb[1];ca[14]=Qb[2];return!0}if((Aa===la.WEB_MERCATOR||Aa===la.PLATE_CARREE)&&(Ca===la.WGS84||Ca===la.CGCS2000&&Aa===la.PLATE_CARREE||Ca===la.SPHERICAL_ECEF||Ca===la.WEB_MERCATOR)){Y=
yb[Ca][la.LON_LAT];Aa=yb[la.LON_LAT][Aa];if(null==Y||null==Aa)return!1;Y(ja,0,Fb,0);Aa(Fb,0,Qb,0);Ca===la.SPHERICAL_ECEF?jb(Db*Fb[0],Db*Fb[1],ca):m.identity(ca);ca[12]=Qb[0];ca[13]=Qb[1];ca[14]=Qb[2];return!0}return!1};b.getProjectorName=function(Y,ja){switch(Wa(Y,ja,Zb)){case f:return"copy3";case sa:return"wgs84ToSphericalECEF";case A:return"wgs84ToWebMercator";case S:return"wgs84ToPlateCarree";case Oa:return"wgs84ToWGS84ECEF";case D:return"webMercatorToWGS84";case ha:return"webMercatorToSphericalECEF";
case Q:return"webMercatorToWGS84ECEF";case aa:return"webMercatorToPlateCarree";case Pa:return"wgs84ECEFToWGS84";case Ja:return"wgs84ECEFToSphericalECEF";case Ra:return"wgs84ECEFToWebMercator";case ya:return"sphericalECEFToWGS84";case Qa:return"sphericalECEFToWebMercator";case za:return"sphericalMarsPCPFToMars2000";case Da:return"sphericalMoonPCPFToMoon2000";case Ka:return"sphericalECEFToWGS84ECEF";case pa:return"mars2000ToSphericalPCPF";case na:return"moon2000ToSphericalPCPF";default:return null}};
b.getTransformation=V;b.getTransformations=function(Y,ja,ca=null){if(null==hb||null==lb)throw new Jb;Y=hb._getTransformationBySuitability(lb,Y,ja,ca,ca?.spatialReference);if(null!==Y){ja=[];for(const oa of Y)ja.push(N.fromGE(oa));return ja}return[]};b.initializeProjection=async function(Y,ja,ca,oa){if(n())return E.waitTick(oa);if(Array.isArray(Y))for(const {source:Ca,dest:Aa,geographicTransformation:La}of Y){if(!J(Ca,Aa,La))return g(oa)}else if(!J(Y,ja,ca))return g(oa);return E.waitTick(oa)};b.isLoaded=
n;b.load=g;b.localLinearScaleFactors=function(Y,ja,ca,oa){if(null==ja||null==oa)return!1;const Ca=db(ja,Sb);var Aa=db(oa,Ub);if(Ca===Aa&&Ca!==la.UNKNOWN||l.equals(ja,oa))return ca[0]=1,ca[1]=1,ca[2]=1,!0;if(Ca===la.SPHERICAL_ECEF){ja=r.length(Y);Y=ja/Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]);ja/=I.earth.radius;if(Aa===la.WEB_MERCATOR)return ca[0]=Y*ja,ca[1]=Y*ja,ca[2]=1,!0;if(Aa===la.WGS84||Aa===la.CGCS2000)return Aa=Tb,ca[0]=Aa*Y*ja,ca[1]=Aa*ja,ca[2]=1,!0}else if(Ca===la.PLATE_CARREE){if(Aa===la.WGS84||Aa===
la.CGCS2000)return ca[0]=Tb,ca[1]=Tb,ca[2]=1,!0;if(Aa===la.WEB_MERCATOR)return Aa=Y[1]/I.earth.radius,ca[0]=1,ca[1]=1/Math.cos(Aa),ca[2]=1,!0}return!1};b.lonLatToSphericalPCPF=function(Y,ja,ca,oa){const Ca=Math.cos(ca);Y[0]=Math.cos(ja)*Ca*oa;Y[1]=Math.sin(ja)*Ca*oa;Y[2]=Math.sin(ca)*oa};b.lonLatToWebMercatorComparable=ea;b.project=K;b.projectBoundingRect=function(Y,ja,ca,oa){if(null==Y)return!1;if(l.equals(ja,oa))return z.copy(ca,Y),!0;ib[0]=Y[0];ib[1]=Y[1];ib[2]=0;if(!Sa(ib,ja,0,ib,oa,0,1))return!1;
ca[0]=ib[0];ca[1]=ib[1];ib[0]=Y[2];ib[1]=Y[3];ib[2]=0;if(!Sa(ib,ja,0,ib,oa,0,1))return!1;ca[2]=ib[0];ca[3]=ib[1];return!0};b.projectBoundingSphere=function(Y,ja,ca,oa){if(null==ja||null==oa)return!1;ja=ua(ja,oa,hc);if(ja.projector===f)return ca[0]=Y[0],ca[1]=Y[1],ca[2]=Y[2],ca[3]=Y[3],!0;if(null==ja.projector)return!1;const {source:Ca,dest:Aa}=ja;if(Aa.spatialReferenceId===la.WEB_MERCATOR){ja=yb[Ca.spatialReferenceId][la.WGS84];if(null==ja)return!1;ja(Y,0,Fb,0);A(Fb,0,ca,0);ca[3]=eb(Fb[1],Y[2],Y[3],
I.earth.radius);return!0}if(Ca.spatialReferenceId!==la.WGS84&&Ca.spatialReferenceId!==la.CGCS2000||Aa.spatialReferenceId!==la.PLATE_CARREE)ja.projector(Y,0,ca,0),ca[3]=Y[3]*(Ca.metersPerUnit??1)/(Aa.metersPerUnit??1);else{oa=yb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let La=Y[3];null!=yb[Ca.spatialReferenceId][la.SPHERICAL_ECEF]&&null!=oa&&(La=eb(Y[1],Y[2],Y[3],I.earth.radius));ja.projector(Y,0,ca,0);ca[3]=La}return!0};b.projectBuffer=Sa;b.projectDirection=function(Y,ja,ca,oa,Ca){r.copy(Ya,Y);r.add(Hb,
Y,ja);Ha(Ya,ca,Ya,Ca);Ha(Hb,ca,Hb,Ca);r.subtract(oa,Hb,Ya);r.normalize(oa,oa)};b.projectExtent=function(Y,ja,ca=ja.spatialReference,oa=0){return null!=Y.spatialReference&&null!=ca&&null!=Fa(Y,Y.spatialReference,ja,ca,oa)};b.projectMany=X;b.projectMultipoint=function(Y,ja,ca=ja.spatialReference,oa=0){return null!=Y.spatialReference&&null!=ca&&null!=ta(Y,Y.spatialReference,ja,ca,oa)};b.projectOrLoad=function(Y,ja){Y=T([Y],ja);return null!=Y.pending?{pending:Y.pending,geometry:null}:null!=Y.geometries?
{pending:null,geometry:Y.geometries[0]}:{pending:null,geometry:null}};b.projectOrLoadMany=T;b.projectPoint=function(Y,ja,ca=ja.spatialReference,oa=0){return null!=ca&&null!=Y.spatialReference&&null!=ka(Y,Y.spatialReference,ja,ca,oa)};b.projectPointToVector=function(Y,ja,ca,oa=0){Ya[0]=Y.x;Ya[1]=Y.y;const Ca=Y.z;Ya[2]=void 0!==Ca?Ca:oa;return Sa(Ya,Y.spatialReference,0,ja,ca,0,1)};b.projectPointToWGS84ComparableLonLat=function(Y,ja){Ya[0]=Y.x;Ya[1]=Y.y;const ca=Y.z;Ya[2]=void 0!==ca?ca:0;return Ua(Ya,
Y.spatialReference,ja)};b.projectPolygon=function(Y,ja,ca=ja.spatialReference,oa=0){return null!=Y.spatialReference&&null!=ca&&null!=Ea(Y,Y.spatialReference,ja,ca,oa)};b.projectPolygonToWGS84ComparableLonLat=function({hasZ:Y,spatialReference:ja,rings:ca},oa,Ca=0){ja=db(ja,Sb);ja=yb[ja][la.WGS84_COMPARABLE_LON_LAT];if(null==ja)return!1;Y=Y?Aa=>Aa:Aa=>r.set(Ya,Aa[0],Aa[1],Ca);for(const Aa of ca){ca=[];for(const La of Aa){const Ta=[0,0,Ca];ja(Y(La),0,Ta,0);ca.push(Ta)}oa.push(ca)}return!0};b.projectPolyline=
function(Y,ja,ca=ja.spatialReference,oa=0){return null!=Y.spatialReference&&null!=ca&&null!=Ba(Y,Y.spatialReference,ja,ca,oa)};b.projectPolylineToWGS84ComparableLonLat=function({hasZ:Y,spatialReference:ja,paths:ca},oa,Ca=0){ja=db(ja,Sb);ja=yb[ja][la.WGS84_COMPARABLE_LON_LAT];if(null==ja)return!1;Y=Y?Aa=>Aa:Aa=>r.set(Ya,Aa[0],Aa[1],Ca);for(const Aa of ca){ca=[];for(const La of Aa){const Ta=[0,0,Ca];ja(Y(La),0,Ta,0);ca.push(Ta)}oa.push(ca)}return!0};b.projectVectorToDehydratedPoint=function(Y,ja,ca){return Sa(Y,
ja,0,Ya,ca.spatialReference,0,1)?(ca.x=Ya[0],ca.y=Ya[1],ca.z=Ya[2],ca):null};b.projectVectorToPoint=function(Y,ja,ca){if(null==ja||null==ca)return null;const oa=new B({spatialReference:ca});return Sa(Y,ja,0,Ya,ca,0,1)?(oa.x=Ya[0],oa.y=Ya[1],oa.z=Ya[2],oa):null};b.projectVectorToVector=Ha;b.projectVectorToWGS84ComparableLonLat=function(Y,ja,ca){return Ua(Y,ja,ca)};b.projectWithoutEngine=ba;b.projectXYZToVector=Ma;b.sphericalPCPFtoLonLatElevation=va;b.test={get loadPromise(){return e}};b.tryProjectWithZConversion=
F;b.unload=function(){e=lb=hb=null;fb={}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(d,b,M){M=function(P){function G(){return P.apply(this,arguments)||this}b._inherits(G,P);G.prototype.notify=function(){var E=this._observers;if(E&&0<E.length){E=E.slice();for(const L of E)L.onInvalidated(),L.onCommitted()}};return b._createClass(G)}(M.ObservableBase);
d.SimpleObservable=M;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(d,b,M){function P(f,D){f[0]=D[0];f[1]=D[1];f[2]=D[2];f[3]=D[3];f[4]=D[4];f[5]=D[5];f[6]=D[6];f[7]=D[7];f[8]=D[8];f[9]=D[9];f[10]=D[10];f[11]=D[11];f[12]=D[12];f[13]=D[13];f[14]=D[14];f[15]=D[15];return f}function G(f,D,ha,Q,ea,A,S,Z,aa,ia,na,pa,sa,va,Da,za,ya){f[0]=D;f[1]=ha;f[2]=Q;f[3]=ea;f[4]=A;f[5]=S;f[6]=Z;f[7]=aa;f[8]=ia;f[9]=na;
f[10]=pa;f[11]=sa;f[12]=va;f[13]=Da;f[14]=za;f[15]=ya;return f}function E(f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function L(f,D){if(f===D){const ha=D[1],Q=D[2],ea=D[3],A=D[6],S=D[7],Z=D[11];f[1]=D[4];f[2]=D[8];f[3]=D[12];f[4]=ha;f[6]=D[9];f[7]=D[13];f[8]=Q;f[9]=A;f[11]=D[14];f[12]=ea;f[13]=S;f[14]=Z}else f[0]=D[0],f[1]=D[4],f[2]=D[8],f[3]=D[12],f[4]=D[1],f[5]=D[5],f[6]=D[9],f[7]=D[13],f[8]=D[2],f[9]=D[6],f[10]=
D[10],f[11]=D[14],f[12]=D[3],f[13]=D[7],f[14]=D[11],f[15]=D[15];return f}function C(f,D){p(f,D)||E(f);return f}function p(f,D){const ha=D[0],Q=D[1],ea=D[2],A=D[3],S=D[4],Z=D[5],aa=D[6],ia=D[7],na=D[8],pa=D[9],sa=D[10],va=D[11],Da=D[12],za=D[13],ya=D[14];D=D[15];const Qa=ha*Z-Q*S,Ka=ha*aa-ea*S,Oa=ha*ia-A*S,Pa=Q*aa-ea*Z,Ja=Q*ia-A*Z,Ra=ea*ia-A*aa,Wa=na*za-pa*Da,ua=na*ya-sa*Da,ub=na*D-va*Da,hb=pa*ya-sa*za,lb=pa*D-va*za,e=sa*D-va*ya;let fb=Qa*e-Ka*lb+Oa*hb+Pa*ub-Ja*ua+Ra*Wa;if(!fb)return null;fb=1/fb;
f[0]=(Z*e-aa*lb+ia*hb)*fb;f[1]=(ea*lb-Q*e-A*hb)*fb;f[2]=(za*Ra-ya*Ja+D*Pa)*fb;f[3]=(sa*Ja-pa*Ra-va*Pa)*fb;f[4]=(aa*ub-S*e-ia*ua)*fb;f[5]=(ha*e-ea*ub+A*ua)*fb;f[6]=(ya*Oa-Da*Ra-D*Ka)*fb;f[7]=(na*Ra-sa*Oa+va*Ka)*fb;f[8]=(S*lb-Z*ub+ia*Wa)*fb;f[9]=(Q*ub-ha*lb-A*Wa)*fb;f[10]=(Da*Ja-za*Oa+D*Qa)*fb;f[11]=(pa*Oa-na*Ja-va*Qa)*fb;f[12]=(Z*ua-S*hb-aa*Wa)*fb;f[13]=(ha*hb-Q*ua+ea*Wa)*fb;f[14]=(za*Ka-Da*Pa-ya*Qa)*fb;f[15]=(na*Pa-pa*Ka+sa*Qa)*fb;return f}function m(f,D){const ha=D[0],Q=D[1],ea=D[2],A=D[3],S=D[4],
Z=D[5],aa=D[6],ia=D[7],na=D[8],pa=D[9],sa=D[10],va=D[11],Da=D[12],za=D[13],ya=D[14];D=D[15];f[0]=Z*(sa*D-va*ya)-pa*(aa*D-ia*ya)+za*(aa*va-ia*sa);f[1]=-(Q*(sa*D-va*ya)-pa*(ea*D-A*ya)+za*(ea*va-A*sa));f[2]=Q*(aa*D-ia*ya)-Z*(ea*D-A*ya)+za*(ea*ia-A*aa);f[3]=-(Q*(aa*va-ia*sa)-Z*(ea*va-A*sa)+pa*(ea*ia-A*aa));f[4]=-(S*(sa*D-va*ya)-na*(aa*D-ia*ya)+Da*(aa*va-ia*sa));f[5]=ha*(sa*D-va*ya)-na*(ea*D-A*ya)+Da*(ea*va-A*sa);f[6]=-(ha*(aa*D-ia*ya)-S*(ea*D-A*ya)+Da*(ea*ia-A*aa));f[7]=ha*(aa*va-ia*sa)-S*(ea*va-A*sa)+
na*(ea*ia-A*aa);f[8]=S*(pa*D-va*za)-na*(Z*D-ia*za)+Da*(Z*va-ia*pa);f[9]=-(ha*(pa*D-va*za)-na*(Q*D-A*za)+Da*(Q*va-A*pa));f[10]=ha*(Z*D-ia*za)-S*(Q*D-A*za)+Da*(Q*ia-A*Z);f[11]=-(ha*(Z*va-ia*pa)-S*(Q*va-A*pa)+na*(Q*ia-A*Z));f[12]=-(S*(pa*ya-sa*za)-na*(Z*ya-aa*za)+Da*(Z*sa-aa*pa));f[13]=ha*(pa*ya-sa*za)-na*(Q*ya-ea*za)+Da*(Q*sa-ea*pa);f[14]=-(ha*(Z*ya-aa*za)-S*(Q*ya-ea*za)+Da*(Q*aa-ea*Z));f[15]=ha*(Z*sa-aa*pa)-S*(Q*sa-ea*pa)+na*(Q*aa-ea*Z);return f}function r(f){const D=f[0],ha=f[1],Q=f[2],ea=f[3],A=
f[4],S=f[5],Z=f[6],aa=f[7],ia=f[8],na=f[9],pa=f[10],sa=f[11],va=f[12],Da=f[13],za=f[14];f=f[15];return(D*S-ha*A)*(pa*f-sa*za)-(D*Z-Q*A)*(na*f-sa*Da)+(D*aa-ea*A)*(na*za-pa*Da)+(ha*Z-Q*S)*(ia*f-sa*va)-(ha*aa-ea*S)*(ia*za-pa*va)+(Q*aa-ea*Z)*(ia*Da-na*va)}function v(f,D,ha){const Q=D[0],ea=D[1],A=D[2],S=D[3],Z=D[4],aa=D[5],ia=D[6],na=D[7],pa=D[8],sa=D[9],va=D[10],Da=D[11],za=D[12],ya=D[13],Qa=D[14];D=D[15];let Ka=ha[0],Oa=ha[1],Pa=ha[2],Ja=ha[3];f[0]=Ka*Q+Oa*Z+Pa*pa+Ja*za;f[1]=Ka*ea+Oa*aa+Pa*sa+Ja*ya;
f[2]=Ka*A+Oa*ia+Pa*va+Ja*Qa;f[3]=Ka*S+Oa*na+Pa*Da+Ja*D;Ka=ha[4];Oa=ha[5];Pa=ha[6];Ja=ha[7];f[4]=Ka*Q+Oa*Z+Pa*pa+Ja*za;f[5]=Ka*ea+Oa*aa+Pa*sa+Ja*ya;f[6]=Ka*A+Oa*ia+Pa*va+Ja*Qa;f[7]=Ka*S+Oa*na+Pa*Da+Ja*D;Ka=ha[8];Oa=ha[9];Pa=ha[10];Ja=ha[11];f[8]=Ka*Q+Oa*Z+Pa*pa+Ja*za;f[9]=Ka*ea+Oa*aa+Pa*sa+Ja*ya;f[10]=Ka*A+Oa*ia+Pa*va+Ja*Qa;f[11]=Ka*S+Oa*na+Pa*Da+Ja*D;Ka=ha[12];Oa=ha[13];Pa=ha[14];Ja=ha[15];f[12]=Ka*Q+Oa*Z+Pa*pa+Ja*za;f[13]=Ka*ea+Oa*aa+Pa*sa+Ja*ya;f[14]=Ka*A+Oa*ia+Pa*va+Ja*Qa;f[15]=Ka*S+Oa*na+Pa*Da+
Ja*D;return f}function t(f,D,ha){const Q=ha[0],ea=ha[1];ha=ha[2];if(D===f)f[12]=D[0]*Q+D[4]*ea+D[8]*ha+D[12],f[13]=D[1]*Q+D[5]*ea+D[9]*ha+D[13],f[14]=D[2]*Q+D[6]*ea+D[10]*ha+D[14],f[15]=D[3]*Q+D[7]*ea+D[11]*ha+D[15];else{const A=D[0],S=D[1],Z=D[2],aa=D[3],ia=D[4],na=D[5],pa=D[6],sa=D[7],va=D[8],Da=D[9],za=D[10],ya=D[11];f[0]=A;f[1]=S;f[2]=Z;f[3]=aa;f[4]=ia;f[5]=na;f[6]=pa;f[7]=sa;f[8]=va;f[9]=Da;f[10]=za;f[11]=ya;f[12]=A*Q+ia*ea+va*ha+D[12];f[13]=S*Q+na*ea+Da*ha+D[13];f[14]=Z*Q+pa*ea+za*ha+D[14];
f[15]=aa*Q+sa*ea+ya*ha+D[15]}return f}function w(f,D,ha){const Q=ha[0],ea=ha[1];ha=ha[2];f[0]=D[0]*Q;f[1]=D[1]*Q;f[2]=D[2]*Q;f[3]=D[3]*Q;f[4]=D[4]*ea;f[5]=D[5]*ea;f[6]=D[6]*ea;f[7]=D[7]*ea;f[8]=D[8]*ha;f[9]=D[9]*ha;f[10]=D[10]*ha;f[11]=D[11]*ha;f[12]=D[12];f[13]=D[13];f[14]=D[14];f[15]=D[15];return f}function c(f,D,ha,Q){let ea=Q[0],A=Q[1];Q=Q[2];let S=Math.sqrt(ea*ea+A*A+Q*Q);var Z=void 0,aa=void 0;let ia=void 0,na=void 0,pa=void 0,sa=void 0,va=void 0,Da=void 0,za=void 0,ya=void 0,Qa=void 0,Ka=void 0,
Oa=void 0,Pa=void 0,Ja=void 0,Ra=void 0,Wa=void 0,ua=void 0,ub=void 0,hb=void 0,lb=void 0,e=void 0;aa=Z=void 0;if(S<M.getEpsilon())return null;S=1/S;ea*=S;A*=S;Q*=S;Z=Math.sin(ha);aa=Math.cos(ha);ia=1-aa;na=D[0];pa=D[1];sa=D[2];va=D[3];Da=D[4];za=D[5];ya=D[6];Qa=D[7];Ka=D[8];Oa=D[9];Pa=D[10];Ja=D[11];Ra=ea*ea*ia+aa;Wa=A*ea*ia+Q*Z;ua=Q*ea*ia-A*Z;ub=ea*A*ia-Q*Z;hb=A*A*ia+aa;lb=Q*A*ia+ea*Z;e=ea*Q*ia+A*Z;Z=A*Q*ia-ea*Z;aa=Q*Q*ia+aa;f[0]=na*Ra+Da*Wa+Ka*ua;f[1]=pa*Ra+za*Wa+Oa*ua;f[2]=sa*Ra+ya*Wa+Pa*ua;f[3]=
va*Ra+Qa*Wa+Ja*ua;f[4]=na*ub+Da*hb+Ka*lb;f[5]=pa*ub+za*hb+Oa*lb;f[6]=sa*ub+ya*hb+Pa*lb;f[7]=va*ub+Qa*hb+Ja*lb;f[8]=na*e+Da*Z+Ka*aa;f[9]=pa*e+za*Z+Oa*aa;f[10]=sa*e+ya*Z+Pa*aa;f[11]=va*e+Qa*Z+Ja*aa;D!==f&&(f[12]=D[12],f[13]=D[13],f[14]=D[14],f[15]=D[15]);return f}function h(f,D,ha){const Q=Math.sin(ha);ha=Math.cos(ha);const ea=D[4],A=D[5],S=D[6],Z=D[7],aa=D[8],ia=D[9],na=D[10],pa=D[11];D!==f&&(f[0]=D[0],f[1]=D[1],f[2]=D[2],f[3]=D[3],f[12]=D[12],f[13]=D[13],f[14]=D[14],f[15]=D[15]);f[4]=ea*ha+aa*Q;f[5]=
A*ha+ia*Q;f[6]=S*ha+na*Q;f[7]=Z*ha+pa*Q;f[8]=aa*ha-ea*Q;f[9]=ia*ha-A*Q;f[10]=na*ha-S*Q;f[11]=pa*ha-Z*Q;return f}function B(f,D,ha){const Q=Math.sin(ha);ha=Math.cos(ha);const ea=D[0],A=D[1],S=D[2],Z=D[3],aa=D[8],ia=D[9],na=D[10],pa=D[11];D!==f&&(f[4]=D[4],f[5]=D[5],f[6]=D[6],f[7]=D[7],f[12]=D[12],f[13]=D[13],f[14]=D[14],f[15]=D[15]);f[0]=ea*ha-aa*Q;f[1]=A*ha-ia*Q;f[2]=S*ha-na*Q;f[3]=Z*ha-pa*Q;f[8]=ea*Q+aa*ha;f[9]=A*Q+ia*ha;f[10]=S*Q+na*ha;f[11]=Z*Q+pa*ha;return f}function O(f,D,ha){const Q=Math.sin(ha);
ha=Math.cos(ha);const ea=D[0],A=D[1],S=D[2],Z=D[3],aa=D[4],ia=D[5],na=D[6],pa=D[7];D!==f&&(f[8]=D[8],f[9]=D[9],f[10]=D[10],f[11]=D[11],f[12]=D[12],f[13]=D[13],f[14]=D[14],f[15]=D[15]);f[0]=ea*ha+aa*Q;f[1]=A*ha+ia*Q;f[2]=S*ha+na*Q;f[3]=Z*ha+pa*Q;f[4]=aa*ha-ea*Q;f[5]=ia*ha-A*Q;f[6]=na*ha-S*Q;f[7]=pa*ha-Z*Q;return f}function x(f,D){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=D[0];f[13]=D[1];f[14]=D[2];f[15]=1;return f}function z(f,D){f[0]=D[0];f[1]=0;f[2]=
0;f[3]=0;f[4]=0;f[5]=D[1];f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=D[2];f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function I(f,D,ha){if(0===D)return E(f);let Q=ha[0],ea=ha[1];ha=ha[2];let A=Math.sqrt(Q*Q+ea*ea+ha*ha),S=void 0,Z=void 0,aa=void 0;if(A<M.getEpsilon())return null;A=1/A;Q*=A;ea*=A;ha*=A;S=Math.sin(D);Z=Math.cos(D);aa=1-Z;f[0]=Q*Q*aa+Z;f[1]=ea*Q*aa+ha*S;f[2]=ha*Q*aa-ea*S;f[3]=0;f[4]=Q*ea*aa-ha*S;f[5]=ea*ea*aa+Z;f[6]=ha*ea*aa+Q*S;f[7]=0;f[8]=Q*ha*aa+ea*S;f[9]=ea*ha*aa-Q*S;f[10]=ha*ha*aa+
Z;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function W(f,D){const ha=Math.sin(D);D=Math.cos(D);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=D;f[6]=ha;f[7]=0;f[8]=0;f[9]=-ha;f[10]=D;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function N(f,D){const ha=Math.sin(D);D=Math.cos(D);f[0]=D;f[1]=0;f[2]=-ha;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=ha;f[9]=0;f[10]=D;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function l(f,D){const ha=Math.sin(D);D=Math.cos(D);f[0]=D;f[1]=ha;f[2]=0;f[3]=0;f[4]=-ha;
f[5]=D;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function y(f,D,ha){var Q=D[0],ea=D[1],A=D[2],S=D[3],Z=Q+Q,aa=ea+ea;const ia=A+A;D=Q*Z;const na=Q*aa;Q*=ia;const pa=ea*aa;ea*=ia;A*=ia;Z*=S;aa*=S;S*=ia;f[0]=1-(pa+A);f[1]=na+S;f[2]=Q-aa;f[3]=0;f[4]=na-S;f[5]=1-(D+A);f[6]=ea+Z;f[7]=0;f[8]=Q+aa;f[9]=ea-Z;f[10]=1-(D+pa);f[11]=0;f[12]=ha[0];f[13]=ha[1];f[14]=ha[2];f[15]=1;return f}function q(f,D){const ha=db,Q=-D[0],ea=-D[1],A=-D[2],S=D[3],Z=D[4],aa=D[5],ia=D[6],
na=D[7],pa=Q*Q+ea*ea+A*A+S*S;0<pa?(ha[0]=2*(Z*S+na*Q+aa*A-ia*ea)/pa,ha[1]=2*(aa*S+na*ea+ia*Q-Z*A)/pa,ha[2]=2*(ia*S+na*A+Z*ea-aa*Q)/pa):(ha[0]=2*(Z*S+na*Q+aa*A-ia*ea),ha[1]=2*(aa*S+na*ea+ia*Q-Z*A),ha[2]=2*(ia*S+na*A+Z*ea-aa*Q));y(f,D,ha);return f}function n(f,D){f[0]=D[12];f[1]=D[13];f[2]=D[14];return f}function g(f,D){const ha=D[0],Q=D[1],ea=D[2],A=D[4],S=D[5],Z=D[6],aa=D[8],ia=D[9];D=D[10];f[0]=Math.sqrt(ha*ha+Q*Q+ea*ea);f[1]=Math.sqrt(A*A+S*S+Z*Z);f[2]=Math.sqrt(aa*aa+ia*ia+D*D);return f}function K(f,
D){const ha=D[0]+D[5]+D[10];let Q=0;0<ha?(Q=2*Math.sqrt(ha+1),f[3]=.25*Q,f[0]=(D[6]-D[9])/Q,f[1]=(D[8]-D[2])/Q,f[2]=(D[1]-D[4])/Q):D[0]>D[5]&&D[0]>D[10]?(Q=2*Math.sqrt(1+D[0]-D[5]-D[10]),f[3]=(D[6]-D[9])/Q,f[0]=.25*Q,f[1]=(D[1]+D[4])/Q,f[2]=(D[8]+D[2])/Q):D[5]>D[10]?(Q=2*Math.sqrt(1+D[5]-D[0]-D[10]),f[3]=(D[8]-D[2])/Q,f[0]=(D[1]+D[4])/Q,f[1]=.25*Q,f[2]=(D[6]+D[9])/Q):(Q=2*Math.sqrt(1+D[10]-D[0]-D[5]),f[3]=(D[1]-D[4])/Q,f[0]=(D[8]+D[2])/Q,f[1]=(D[6]+D[9])/Q,f[2]=.25*Q);return f}function X(f,D,ha,Q){var ea=
D[0],A=D[1],S=D[2],Z=D[3],aa=ea+ea,ia=A+A,na=S+S;D=ea*aa;const pa=ea*ia;ea*=na;const sa=A*ia;A*=na;S*=na;aa*=Z;ia*=Z;Z*=na;na=Q[0];const va=Q[1];Q=Q[2];f[0]=(1-(sa+S))*na;f[1]=(pa+Z)*na;f[2]=(ea-ia)*na;f[3]=0;f[4]=(pa-Z)*va;f[5]=(1-(D+S))*va;f[6]=(A+aa)*va;f[7]=0;f[8]=(ea+ia)*Q;f[9]=(A-aa)*Q;f[10]=(1-(D+sa))*Q;f[11]=0;f[12]=ha[0];f[13]=ha[1];f[14]=ha[2];f[15]=1;return f}function T(f,D,ha,Q,ea){var A=D[0],S=D[1],Z=D[2],aa=D[3],ia=A+A,na=S+S,pa=Z+Z;D=A*ia;var sa=A*na,va=A*pa;A=S*na;S*=pa;var Da=Z*pa;
Z=aa*ia;na*=aa;const za=aa*pa;var ya=Q[0],Qa=Q[1];pa=Q[2];Q=ea[0];aa=ea[1];ea=ea[2];ia=(1-(A+Da))*ya;const Ka=(sa+za)*ya;ya*=va-na;sa=(sa-za)*Qa;Da=(1-(D+Da))*Qa;Qa*=S+Z;va=(va+na)*pa;S=(S-Z)*pa;D=(1-(D+A))*pa;f[0]=ia;f[1]=Ka;f[2]=ya;f[3]=0;f[4]=sa;f[5]=Da;f[6]=Qa;f[7]=0;f[8]=va;f[9]=S;f[10]=D;f[11]=0;f[12]=ha[0]+Q-(ia*Q+sa*aa+va*ea);f[13]=ha[1]+aa-(Ka*Q+Da*aa+S*ea);f[14]=ha[2]+ea-(ya*Q+Qa*aa+D*ea);f[15]=1;return f}function V(f,D){var ha=D[0],Q=D[1],ea=D[2];D=D[3];var A=ha+ha,S=Q+Q;const Z=ea+ea;
ha*=A;const aa=Q*A;Q*=S;const ia=ea*A,na=ea*S;ea*=Z;A*=D;S*=D;D*=Z;f[0]=1-Q-ea;f[1]=aa+D;f[2]=ia-S;f[3]=0;f[4]=aa-D;f[5]=1-ha-ea;f[6]=na+A;f[7]=0;f[8]=ia+S;f[9]=na-A;f[10]=1-ha-Q;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function F(f,D,ha,Q,ea,A,S){const Z=1/(ha-D),aa=1/(ea-Q),ia=1/(A-S);f[0]=2*A*Z;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*A*aa;f[6]=0;f[7]=0;f[8]=(ha+D)*Z;f[9]=(ea+Q)*aa;f[10]=(S+A)*ia;f[11]=-1;f[12]=0;f[13]=0;f[14]=S*A*2*ia;f[15]=0;return f}function J(f,D,ha,Q,ea){D=1/Math.tan(D/
2);let A=void 0;f[0]=D/ha;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=D;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[11]=-1;f[12]=0;f[13]=0;f[15]=0;null!=ea&&Infinity!==ea?(A=1/(Q-ea),f[10]=(ea+Q)*A,f[14]=2*ea*Q*A):(f[10]=-1,f[14]=-2*Q);return f}function ba(f,D,ha,Q){const ea=Math.tan(D.upDegrees*Math.PI/180),A=Math.tan(D.downDegrees*Math.PI/180),S=Math.tan(D.leftDegrees*Math.PI/180);D=Math.tan(D.rightDegrees*Math.PI/180);const Z=2/(S+D),aa=2/(ea+A);f[0]=Z;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=aa;f[6]=0;f[7]=0;f[8]=-((S-D)*Z*.5);
f[9]=(ea-A)*aa*.5;f[10]=Q/(ha-Q);f[11]=-1;f[12]=0;f[13]=0;f[14]=Q*ha/(ha-Q);f[15]=0;return f}function ka(f,D,ha,Q,ea,A,S){const Z=1/(D-ha),aa=1/(Q-ea),ia=1/(A-S);f[0]=-2*Z;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=-2*aa;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=2*ia;f[11]=0;f[12]=(D+ha)*Z;f[13]=(ea+Q)*aa;f[14]=(S+A)*ia;f[15]=1;return f}function ta(f,D,ha,Q){const ea=D[0],A=D[1];D=D[2];let S=ea-ha[0],Z=A-ha[1];ha=D-ha[2];var aa=M.getEpsilon();if(Math.abs(S)<aa&&Math.abs(Z)<aa&&Math.abs(ha)<aa)E(f);else{var ia=1/Math.sqrt(S*
S+Z*Z+ha*ha);S*=ia;Z*=ia;ha*=ia;ia=Q[0];var na=Q[1];aa=Q[2];Q=na*ha-aa*Z;aa=aa*S-ia*ha;na=ia*Z-na*S;(ia=Math.sqrt(Q*Q+aa*aa+na*na))?(ia=1/ia,Q*=ia,aa*=ia,na*=ia):na=aa=Q=0;var pa=Z*na-ha*aa,sa=ha*Q-S*na,va=S*aa-Z*Q;(ia=Math.sqrt(pa*pa+sa*sa+va*va))?(ia=1/ia,pa*=ia,sa*=ia,va*=ia):va=sa=pa=0;f[0]=Q;f[1]=pa;f[2]=S;f[3]=0;f[4]=aa;f[5]=sa;f[6]=Z;f[7]=0;f[8]=na;f[9]=va;f[10]=ha;f[11]=0;f[12]=-(Q*ea+aa*A+na*D);f[13]=-(pa*ea+sa*A+va*D);f[14]=-(S*ea+Z*A+ha*D);f[15]=1}}function Ba(f,D,ha,Q){const ea=D[0],A=
D[1];D=D[2];var S=Q[0];const Z=Q[1];var aa=Q[2];Q=ea-ha[0];let ia=A-ha[1];ha=D-ha[2];let na=Q*Q+ia*ia+ha*ha;0<na&&(na=1/Math.sqrt(na),Q*=na,ia*=na,ha*=na);let pa=Z*ha-aa*ia;aa=aa*Q-S*ha;S=S*ia-Z*Q;na=pa*pa+aa*aa+S*S;0<na&&(na=1/Math.sqrt(na),pa*=na,aa*=na,S*=na);f[0]=pa;f[1]=aa;f[2]=S;f[3]=0;f[4]=ia*S-ha*aa;f[5]=ha*pa-Q*S;f[6]=Q*aa-ia*pa;f[7]=0;f[8]=Q;f[9]=ia;f[10]=ha;f[11]=0;f[12]=ea;f[13]=A;f[14]=D;f[15]=1;return f}function Ea(f){return"mat4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+
", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"}function Fa(f){return Math.sqrt(f[0]**2+f[1]**2+f[2]**2+f[3]**2+f[4]**2+f[5]**2+f[6]**2+f[7]**2+f[8]**2+f[9]**2+f[10]**2+f[11]**2+f[12]**2+f[13]**2+f[14]**2+f[15]**2)}function Ma(f,D,ha){f[0]=D[0]+ha[0];f[1]=D[1]+ha[1];f[2]=D[2]+ha[2];f[3]=D[3]+ha[3];f[4]=D[4]+ha[4];f[5]=D[5]+ha[5];f[6]=D[6]+ha[6];f[7]=D[7]+ha[7];f[8]=D[8]+ha[8];f[9]=D[9]+ha[9];f[10]=D[10]+ha[10];f[11]=D[11]+ha[11];f[12]=
D[12]+ha[12];f[13]=D[13]+ha[13];f[14]=D[14]+ha[14];f[15]=D[15]+ha[15];return f}function Ha(f,D,ha){f[0]=D[0]-ha[0];f[1]=D[1]-ha[1];f[2]=D[2]-ha[2];f[3]=D[3]-ha[3];f[4]=D[4]-ha[4];f[5]=D[5]-ha[5];f[6]=D[6]-ha[6];f[7]=D[7]-ha[7];f[8]=D[8]-ha[8];f[9]=D[9]-ha[9];f[10]=D[10]-ha[10];f[11]=D[11]-ha[11];f[12]=D[12]-ha[12];f[13]=D[13]-ha[13];f[14]=D[14]-ha[14];f[15]=D[15]-ha[15];return f}function Ua(f,D,ha){f[0]=D[0]*ha;f[1]=D[1]*ha;f[2]=D[2]*ha;f[3]=D[3]*ha;f[4]=D[4]*ha;f[5]=D[5]*ha;f[6]=D[6]*ha;f[7]=D[7]*
ha;f[8]=D[8]*ha;f[9]=D[9]*ha;f[10]=D[10]*ha;f[11]=D[11]*ha;f[12]=D[12]*ha;f[13]=D[13]*ha;f[14]=D[14]*ha;f[15]=D[15]*ha;return f}function Sa(f,D,ha,Q){f[0]=D[0]+ha[0]*Q;f[1]=D[1]+ha[1]*Q;f[2]=D[2]+ha[2]*Q;f[3]=D[3]+ha[3]*Q;f[4]=D[4]+ha[4]*Q;f[5]=D[5]+ha[5]*Q;f[6]=D[6]+ha[6]*Q;f[7]=D[7]+ha[7]*Q;f[8]=D[8]+ha[8]*Q;f[9]=D[9]+ha[9]*Q;f[10]=D[10]+ha[10]*Q;f[11]=D[11]+ha[11]*Q;f[12]=D[12]+ha[12]*Q;f[13]=D[13]+ha[13]*Q;f[14]=D[14]+ha[14]*Q;f[15]=D[15]+ha[15]*Q;return f}function Va(f,D){return f[0]===D[0]&&
f[1]===D[1]&&f[2]===D[2]&&f[3]===D[3]&&f[4]===D[4]&&f[5]===D[5]&&f[6]===D[6]&&f[7]===D[7]&&f[8]===D[8]&&f[9]===D[9]&&f[10]===D[10]&&f[11]===D[11]&&f[12]===D[12]&&f[13]===D[13]&&f[14]===D[14]&&f[15]===D[15]}function eb(f,D){if(f===D)return!0;const ha=f[0],Q=f[1],ea=f[2],A=f[3],S=f[4],Z=f[5],aa=f[6],ia=f[7],na=f[8],pa=f[9],sa=f[10],va=f[11],Da=f[12],za=f[13],ya=f[14];f=f[15];const Qa=D[0],Ka=D[1],Oa=D[2],Pa=D[3],Ja=D[4],Ra=D[5],Wa=D[6],ua=D[7],ub=D[8],hb=D[9],lb=D[10],e=D[11],fb=D[12],Ob=D[13],Jb=D[14];
D=D[15];const la=M.getEpsilon();return Math.abs(ha-Qa)<=la*Math.max(1,Math.abs(ha),Math.abs(Qa))&&Math.abs(Q-Ka)<=la*Math.max(1,Math.abs(Q),Math.abs(Ka))&&Math.abs(ea-Oa)<=la*Math.max(1,Math.abs(ea),Math.abs(Oa))&&Math.abs(A-Pa)<=la*Math.max(1,Math.abs(A),Math.abs(Pa))&&Math.abs(S-Ja)<=la*Math.max(1,Math.abs(S),Math.abs(Ja))&&Math.abs(Z-Ra)<=la*Math.max(1,Math.abs(Z),Math.abs(Ra))&&Math.abs(aa-Wa)<=la*Math.max(1,Math.abs(aa),Math.abs(Wa))&&Math.abs(ia-ua)<=la*Math.max(1,Math.abs(ia),Math.abs(ua))&&
Math.abs(na-ub)<=la*Math.max(1,Math.abs(na),Math.abs(ub))&&Math.abs(pa-hb)<=la*Math.max(1,Math.abs(pa),Math.abs(hb))&&Math.abs(sa-lb)<=la*Math.max(1,Math.abs(sa),Math.abs(lb))&&Math.abs(va-e)<=la*Math.max(1,Math.abs(va),Math.abs(e))&&Math.abs(Da-fb)<=la*Math.max(1,Math.abs(Da),Math.abs(fb))&&Math.abs(za-Ob)<=la*Math.max(1,Math.abs(za),Math.abs(Ob))&&Math.abs(ya-Jb)<=la*Math.max(1,Math.abs(ya),Math.abs(Jb))&&Math.abs(f-D)<=la*Math.max(1,Math.abs(f),Math.abs(D))}function kb(f){const D=M.getEpsilon(),
ha=f[0],Q=f[1],ea=f[2],A=f[4],S=f[5],Z=f[6],aa=f[8],ia=f[9];f=f[10];return Math.abs(1-(ha*ha+A*A+aa*aa))<=D&&Math.abs(1-(Q*Q+S*S+ia*ia))<=D&&Math.abs(1-(ea*ea+Z*Z+f*f))<=D}function jb(f){return 1===f[0]&&0===f[1]&&0===f[2]&&0===f[4]&&1===f[5]&&0===f[6]&&0===f[8]&&0===f[9]&&1===f[10]}const db=b.create();b=Object.freeze(Object.defineProperty({__proto__:null,add:Ma,adjoint:m,copy:P,determinant:r,equals:eb,exactEquals:Va,frob:Fa,fromQuat:V,fromQuat2:q,fromRotation:I,fromRotationTranslation:y,fromRotationTranslationScale:X,
fromRotationTranslationScaleOrigin:T,fromScaling:z,fromTranslation:x,fromXRotation:W,fromYRotation:N,fromZRotation:l,frustum:F,getRotation:K,getScaling:g,getTranslation:n,hasIdentityRotation:jb,identity:E,invert:p,invertOrIdentity:C,isOrthoNormal:kb,lookAt:ta,mul:v,multiply:v,multiplyScalar:Ua,multiplyScalarAndAdd:Sa,ortho:ka,perspective:J,perspectiveFromFieldOfView:ba,rotate:c,rotateX:h,rotateY:B,rotateZ:O,scale:w,set:G,str:Ea,sub:Ha,subtract:Ha,targetTo:Ba,translate:t,transpose:L},Symbol.toStringTag,
{value:"Module"}));d.add=Ma;d.adjoint=m;d.copy=P;d.determinant=r;d.equals=eb;d.exactEquals=Va;d.frob=Fa;d.fromQuat=V;d.fromQuat2=q;d.fromRotation=I;d.fromRotationTranslation=y;d.fromRotationTranslationScale=X;d.fromRotationTranslationScaleOrigin=T;d.fromScaling=z;d.fromTranslation=x;d.fromXRotation=W;d.fromYRotation=N;d.fromZRotation=l;d.frustum=F;d.getRotation=K;d.getScaling=g;d.getTranslation=n;d.hasIdentityRotation=jb;d.identity=E;d.invert=p;d.invertOrIdentity=C;d.isOrthoNormal=kb;d.lookAt=ta;
d.mat4=b;d.mul=v;d.multiply=v;d.multiplyScalar=Ua;d.multiplyScalarAndAdd=Sa;d.ortho=ka;d.perspective=J;d.perspectiveFromFieldOfView=ba;d.rotate=c;d.rotateX=h;d.rotateY=B;d.rotateZ=O;d.scale=w;d.set=G;d.str=Ea;d.sub=Ha;d.subtract=Ha;d.targetTo=Ba;d.translate=t;d.transpose=L})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(d,b,M,P,G){function E(){return!!b._pe}function L(){return!!G("esri-wasm")}function C(){return w?w:w=(new Promise((h,
B)=>d(["./pe-wasm"],h,B))).then(h=>h.peWasm).then(({default:h})=>h({locateFile:B=>P.getAssetUrl(`esri/geometry/support/${B}`)})).then(h=>{p(h)})}function p(h){function B(z,I,W){z[I]=W(z[I])}b._pe=h;b.PeDefs.init();b.PeGTlistExtended.init();b.PeNotationMgrs.init();b.PeNotationUtm.init();b.PePCSInfo.init();b.PeGCSExtent=function(z){function I(){return z.apply(this,arguments)||this}M._inherits(I,z);I.prototype.destroy=function(){b._pe.destroy(this)};return M._createClass(I)}(b._pe.PeGCSExtent);h=[b._pe.PeDatum,
b._pe.PeGeogcs,b._pe.PeGeogtran,b._pe.PeObject,b._pe.PeParameter,b._pe.PePrimem,b._pe.PeProjcs,b._pe.PeSpheroid,b._pe.PeUnit];for(var O of h)B(O.prototype,"getName",z=>function(){return z.call(this,Array(b.PeDefs.PE_NAME_MAX))});for(const z of[b._pe.PeGeogtran,b._pe.PeProjcs])B(z.prototype,"getParameters",I=>function(){const W=Array(b.PeDefs.PE_PARM_MAX);let N=I.call(this);for(let l=0;l<W.length;l++){const y=b._pe.getValue(N,"*");W[l]=y?b._pe.wrapPointer(y,b._pe.PeParameter):null;N+=Int32Array.BYTES_PER_ELEMENT}return W});
B(b._pe.PeHorizon.prototype,"getCoord",z=>function(){const I=this.getSize();if(!I)return null;const W=[],N=z.call(this);t(W,I,N);return W});B(b._pe.PeGTlistExtendedEntry.prototype,"getEntries",z=>{const I=b._pe._pe_getPeGTlistExtendedGTsSize();return function(){let W=null;var N=z.call(this);if(!b._pe.compare(N,b._pe.NULL)){W=[N];const l=this.getSteps();if(1<l){N=b._pe.getPointer(N);for(let y=1;y<l;y++)W.push(b._pe.wrapPointer(N+I*y,b._pe.PeGTlistExtendedGTs))}}return W}});const x=b._pe._pe_getPeHorizonSize();
O=z=>function(){let I=this._cache;I||(this._cache=I=new Map);if(I.has(z))return I.get(z);let W=null;var N=z.call(this);if(!b._pe.compare(N,b._pe.NULL)){W=[N];const l=N.getNump();if(1<l){N=b._pe.getPointer(N);for(let y=1;y<l;y++)W.push(b._pe.wrapPointer(N+x*y,b._pe.PeHorizon))}}I.set(z,W);return W};B(b._pe.PeProjcs.prototype,"horizonGcsGenerate",O);B(b._pe.PeProjcs.prototype,"horizonPcsGenerate",O);b._pe.PeObject.prototype.toString=function(z=b.PeDefs.PE_STR_OPTS_NONE){b._pe.ensureCache.prepare();
const I=b._pe.getPointer(this),W=b._pe.ensureInt8(Array(b.PeDefs.PE_BUFFER_MAX));return b._pe.UTF8ToString(b._pe._pe_object_to_string_ext(I,z,W))}}function m(h){if(h){var B=b._pe.getClass(h);B&&(B=b._pe.getCache(B))&&(h=b._pe.getPointer(h))&&delete B[h]}}function r(h,B){const O=[];B=Array(B);for(let x=0;x<h;x++)O.push(b._pe.ensureInt8(B));return O}function v(h){let B;Array.isArray(h[0])?(B=[],h.forEach(O=>{B.push(O[0],O[1])})):B=h;return B}function t(h,B,O,x=!1){if(x)for(x=0;x<2*B;x++)h[x]=b._pe.getValue(O+
x*Float64Array.BYTES_PER_ELEMENT,"double");else{x=0===h.length;for(let z=0;z<B;z++)x&&(h[z]=Array(2)),h[z][0]=b._pe.getValue(O,"double"),h[z][1]=b._pe.getValue(O+Float64Array.BYTES_PER_ELEMENT,"double"),O+=2*Float64Array.BYTES_PER_ELEMENT}}let w;b._pe=null;b.PeCSTransformations=void 0;(function(h){function B(z,I,W){b._pe.ensureCache.prepare();var N=v(W);const l=W===N;N=b._pe.ensureFloat64(N);(z=b._pe._pe_geog_to_proj(b._pe.getPointer(z),I,N))&&t(W,I,N,l);return z}function O(z,I,W){return x(z,I,W,
0)}function x(z,I,W,N){b._pe.ensureCache.prepare();var l=v(W);const y=W===l;l=b._pe.ensureFloat64(l);(z=b._pe._pe_proj_to_geog_center(b._pe.getPointer(z),I,l,N))&&t(W,I,l,y);return z}h.geogToProj=B;h.projGeog=function(z,I,W,N){switch(N){case b.PeDefs.PE_TRANSFORM_P_TO_G:return O(z,I,W);case b.PeDefs.PE_TRANSFORM_G_TO_P:return B(z,I,W)}return 0};h.projToGeog=O;h.projToGeogCenter=x})(b.PeCSTransformations||(b.PeCSTransformations={}));b.PeDefs=void 0;(function(h){h.init=function(){h.PE_BUFFER_MAX=b._pe.PeDefs.prototype.PE_BUFFER_MAX;
h.PE_NAME_MAX=b._pe.PeDefs.prototype.PE_NAME_MAX;h.PE_MGRS_MAX=b._pe.PeDefs.prototype.PE_MGRS_MAX;h.PE_USNG_MAX=b._pe.PeDefs.prototype.PE_USNG_MAX;h.PE_DD_MAX=b._pe.PeDefs.prototype.PE_DD_MAX;h.PE_DDM_MAX=b._pe.PeDefs.prototype.PE_DDM_MAX;h.PE_DMS_MAX=b._pe.PeDefs.prototype.PE_DMS_MAX;h.PE_UTM_MAX=b._pe.PeDefs.prototype.PE_UTM_MAX;h.PE_PARM_MAX=b._pe.PeDefs.prototype.PE_PARM_MAX;h.PE_TYPE_NONE=b._pe.PeDefs.prototype.PE_TYPE_NONE;h.PE_TYPE_GEOGCS=b._pe.PeDefs.prototype.PE_TYPE_GEOGCS;h.PE_TYPE_PROJCS=
b._pe.PeDefs.prototype.PE_TYPE_PROJCS;h.PE_TYPE_GEOGTRAN=b._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;h.PE_TYPE_COORDSYS=b._pe.PeDefs.prototype.PE_TYPE_COORDSYS;h.PE_TYPE_UNIT=b._pe.PeDefs.prototype.PE_TYPE_UNIT;h.PE_TYPE_LINUNIT=b._pe.PeDefs.prototype.PE_TYPE_LINUNIT;h.PE_STR_OPTS_NONE=b._pe.PeDefs.prototype.PE_STR_OPTS_NONE;h.PE_STR_AUTH_NONE=b._pe.PeDefs.prototype.PE_STR_AUTH_NONE;h.PE_STR_AUTH_TOP=b._pe.PeDefs.prototype.PE_STR_AUTH_TOP;h.PE_STR_NAME_CANON=b._pe.PeDefs.prototype.PE_STR_NAME_CANON;h.PE_PARM_X0=
b._pe.PeDefs.prototype.PE_PARM_X0;h.PE_PARM_ND=b._pe.PeDefs.prototype.PE_PARM_ND;h.PE_TRANSFORM_1_TO_2=b._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;h.PE_TRANSFORM_2_TO_1=b._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;h.PE_TRANSFORM_P_TO_G=b._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;h.PE_TRANSFORM_G_TO_P=b._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;h.PE_HORIZON_RECT=b._pe.PeDefs.prototype.PE_HORIZON_RECT;h.PE_HORIZON_POLY=b._pe.PeDefs.prototype.PE_HORIZON_POLY;h.PE_HORIZON_LINE=b._pe.PeDefs.prototype.PE_HORIZON_LINE;
h.PE_HORIZON_DELTA=b._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(b.PeDefs||(b.PeDefs={}));b.PeFactory=void 0;(function(h){function B(I,W){let N=null,l=O[I];l||(l={},O[I]=l);l.hasOwnProperty(String(W))?N=l[W]:(I=b._pe.PeFactory.prototype.factoryByType(I,W),b._pe.compare(I,b._pe.NULL)||(N=I,l[W]=N));return N=z(N)}const O={},x={},z=I=>{if(I){const W=I.getType();switch(W){case b.PeDefs.PE_TYPE_GEOGCS:I=b._pe.castObject(I,b._pe.PeGeogcs);break;case b.PeDefs.PE_TYPE_PROJCS:I=b._pe.castObject(I,b._pe.PeProjcs);
break;case b.PeDefs.PE_TYPE_GEOGTRAN:I=b._pe.castObject(I,b._pe.PeGeogtran);break;default:W&b.PeDefs.PE_TYPE_UNIT&&(I=b._pe.castObject(I,b._pe.PeUnit))}}return I};h.initialize=function(){b._pe.PeFactory.prototype.initialize(null)};h.coordsys=function(I){return B(b.PeDefs.PE_TYPE_COORDSYS,I)};h.factoryByType=B;h.fromString=function(I,W){let N=null,l=x[I];l||(l={},x[I]=l);l.hasOwnProperty(W)?N=l[W]:(I=b._pe.PeFactory.prototype.fromString(I,W),b._pe.compare(I,b._pe.NULL)||(N=I,l[W]=N));return N=z(N)};
h.geogcs=function(I){return B(b.PeDefs.PE_TYPE_GEOGCS,I)};h.geogtran=function(I){return B(b.PeDefs.PE_TYPE_GEOGTRAN,I)};h.getCode=function(I){return b._pe.PeFactory.prototype.getCode(I)};h.projcs=function(I){return B(b.PeDefs.PE_TYPE_PROJCS,I)};h.unit=function(I){return B(b.PeDefs.PE_TYPE_UNIT,I)}})(b.PeFactory||(b.PeFactory={}));b.PeGCSExtent=null;b.PeGTlistExtended=void 0;(function(h){let B;h.init=function(){h.PE_GTLIST_OPTS_COMMON=b._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;B=b._pe._pe_getPeGTlistExtendedEntrySize()};
h.getGTlist=function(O,x,z,I,W,N){let l=null;const y=new b._pe.PeInteger(N);try{const q=b._pe.PeGTlistExtended.prototype.getGTlist(O,x,z,I,W,y);if(N=y.val)if(l=[q],1<N){const n=b._pe.getPointer(q);for(O=1;O<N;O++)l.push(b._pe.wrapPointer(n+B*O,b._pe.PeGTlistExtendedEntry))}}finally{b._pe.destroy(y)}return l}})(b.PeGTlistExtended||(b.PeGTlistExtended={}));b.PeGTlistExtendedEntry=void 0;(function(h){h.destroy=function(B){if(B&&B.length){for(const O of B)m(O),O.getEntries().forEach(x=>{m(x);x=x.getGeogtran();
m(x);x.getParameters().forEach(m);[x.getGeogcs1(),x.getGeogcs2()].forEach(z=>{m(z);const I=z.getDatum();m(I);m(I.getSpheroid());m(z.getPrimem());m(z.getUnit())})});b._pe.PeGTlistExtendedEntry.prototype.Delete(B[0])}}})(b.PeGTlistExtendedEntry||(b.PeGTlistExtendedEntry={}));b.PeGTTransformations=void 0;(function(h){h.geogToGeog=function(B,O,x,z,I){b._pe.ensureCache.prepare();var W=v(x);const N=x===W;W=b._pe.ensureFloat64(W);let l=0;z&&(l=b._pe.ensureFloat64(z));(B=b._pe._pe_geog_to_geog(b._pe.getPointer(B),
O,W,l,I))&&t(x,O,W,N);return B}})(b.PeGTTransformations||(b.PeGTTransformations={}));b.PeNotationDms=void 0;(function(h){const B=(x,z,I,W,N,l)=>{b._pe.ensureCache.prepare();switch(x){case "dd":var y=b._pe._pe_geog_to_dd;var q=b.PeDefs.PE_DD_MAX;break;case "ddm":y=b._pe._pe_geog_to_ddm;q=b.PeDefs.PE_DDM_MAX;break;case "dms":y=b._pe._pe_geog_to_dms,q=b.PeDefs.PE_DMS_MAX}x=0;z&&(x=b._pe.getPointer(z));z=v(W);z=b._pe.ensureFloat64(z);q=r(I,q);W=b._pe.ensureInt32(q);if(N=y(x,I,z,N,W))for(y=0;y<I;y++)l[y]=
b._pe.UTF8ToString(q[y]);return N},O=(x,z,I,W,N)=>{b._pe.ensureCache.prepare();switch(x){case "dd":var l=b._pe._pe_dd_to_geog;break;case "ddm":l=b._pe._pe_ddm_to_geog;break;case "dms":l=b._pe._pe_dms_to_geog}x=0;z&&(x=b._pe.getPointer(z));z=W.map(y=>b._pe.ensureString(y));W=b._pe.ensureInt32(z);z=b._pe.ensureFloat64(Array(2*I));(l=l(x,I,W,z))&&t(N,I,z);return l};h.geogToDms=function(x,z,I,W,N){return B("dms",x,z,I,W,N)};h.dmsToGeog=function(x,z,I,W){return O("dms",x,z,I,W)};h.geogToDdm=function(x,
z,I,W,N){return B("ddm",x,z,I,W,N)};h.ddmToGeog=function(x,z,I,W){return O("ddm",x,z,I,W)};h.geogToDd=function(x,z,I,W,N){return B("dd",x,z,I,W,N)};h.ddToGeog=function(x,z,I,W){return O("dd",x,z,I,W)}})(b.PeNotationDms||(b.PeNotationDms={}));b.PeNotationMgrs=void 0;(function(h){h.init=function(){h.PE_MGRS_STYLE_NEW=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;h.PE_MGRS_STYLE_OLD=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;h.PE_MGRS_STYLE_AUTO=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
h.PE_MGRS_180_ZONE_1_PLUS=b._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;h.PE_MGRS_ADD_SPACES=b._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};h.geogToMgrsExtended=function(B,O,x,z,I,W,N){b._pe.ensureCache.prepare();let l=0;B&&(l=b._pe.getPointer(B));B=v(x);x=b._pe.ensureFloat64(B);B=r(O,b.PeDefs.PE_MGRS_MAX);const y=b._pe.ensureInt32(B);if(z=b._pe._pe_geog_to_mgrs_extended(l,O,x,z,I,W,y))for(I=0;I<O;I++)N[I]=b._pe.UTF8ToString(B[I]);return z};h.mgrsToGeogExtended=function(B,O,x,z,I){b._pe.ensureCache.prepare();
let W=0;B&&(W=b._pe.getPointer(B));B=x.map(N=>b._pe.ensureString(N));x=b._pe.ensureInt32(B);B=b._pe.ensureFloat64(Array(2*O));(z=b._pe._pe_mgrs_to_geog_extended(W,O,x,z,B))&&t(I,O,B);return z}})(b.PeNotationMgrs||(b.PeNotationMgrs={}));b.PeNotationUsng=void 0;(function(h){h.geogToUsng=function(B,O,x,z,I,W,N){b._pe.ensureCache.prepare();let l=0;B&&(l=b._pe.getPointer(B));B=v(x);x=b._pe.ensureFloat64(B);B=r(O,b.PeDefs.PE_MGRS_MAX);const y=b._pe.ensureInt32(B);if(z=b._pe._pe_geog_to_usng(l,O,x,z,I,W,
y))for(I=0;I<O;I++)N[I]=b._pe.UTF8ToString(B[I]);return z};h.usngToGeog=function(B,O,x,z){b._pe.ensureCache.prepare();var I=0;B&&(I=b._pe.getPointer(B));B=x.map(W=>b._pe.ensureString(W));x=b._pe.ensureInt32(B);B=b._pe.ensureFloat64(Array(2*O));(I=b._pe._pe_usng_to_geog(I,O,x,B))&&t(z,O,B);return I}})(b.PeNotationUsng||(b.PeNotationUsng={}));b.PeNotationUtm=void 0;(function(h){h.init=function(){h.PE_UTM_OPTS_NONE=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;h.PE_UTM_OPTS_ADD_SPACES=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
h.PE_UTM_OPTS_NS=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};h.geogToUtm=function(B,O,x,z,I){b._pe.ensureCache.prepare();var W=0;B&&(W=b._pe.getPointer(B));B=v(x);x=b._pe.ensureFloat64(B);B=r(O,b.PeDefs.PE_UTM_MAX);const N=b._pe.ensureInt32(B);if(z=b._pe._pe_geog_to_utm(W,O,x,z,N))for(W=0;W<O;W++)I[W]=b._pe.UTF8ToString(B[W]);return z};h.utmToGeog=function(B,O,x,z,I){b._pe.ensureCache.prepare();let W=0;B&&(W=b._pe.getPointer(B));B=x.map(N=>b._pe.ensureString(N));x=b._pe.ensureInt32(B);B=b._pe.ensureFloat64(Array(2*
O));(z=b._pe._pe_utm_to_geog(W,O,x,z,B))&&t(I,O,B);return z}})(b.PeNotationUtm||(b.PeNotationUtm={}));b.PePCSInfo=void 0;(function(h){const B=new Map;h.init=function(){h.PE_PCSINFO_OPTION_NONE=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;h.PE_PCSINFO_OPTION_DOMAIN=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;h.PE_POLE_OUTSIDE_BOUNDARY=b._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;h.PE_POLE_POINT=b._pe.PePCSInfo.prototype.PE_POLE_POINT};h.generate=function(O,x=h.PE_PCSINFO_OPTION_DOMAIN){let z=
null,I=null;B.has(O)&&(I=B.get(O),I[x]&&(z=I[x]));z||(z=b._pe.PePCSInfo.prototype.generate(O,x),I||(I=[],B.set(O,I)),I[x]=z);return z}})(b.PePCSInfo||(b.PePCSInfo={}));b.PeVersion=void 0;(function(h){h.versionString=function(){return b._pe.PeVersion.prototype.version_string()}})(b.PeVersion||(b.PeVersion={}));const c=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return b.PeCSTransformations},get PeDefs(){return b.PeDefs},get PeFactory(){return b.PeFactory},get PeGCSExtent(){return b.PeGCSExtent},
get PeGTTransformations(){return b.PeGTTransformations},get PeGTlistExtended(){return b.PeGTlistExtended},get PeGTlistExtendedEntry(){return b.PeGTlistExtendedEntry},get PeNotationDms(){return b.PeNotationDms},get PeNotationMgrs(){return b.PeNotationMgrs},get PeNotationUsng(){return b.PeNotationUsng},get PeNotationUtm(){return b.PeNotationUtm},get PePCSInfo(){return b.PePCSInfo},get PeVersion(){return b.PeVersion},_init:p,get _pe(){return b._pe},isLoaded:E,isSupported:L,load:C},Symbol.toStringTag,
{value:"Module"}));b._init=p;b.isLoaded=E;b.isSupported=L;b.load=C;b.pe=c})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(d,b){const M=Math.PI/180;var P=b.earth.radius;const G=b.earth.eccentricitySquared;P={a1:P*G,a2:P*G*P*G,a3:P*G*G/2,a4:P*G*P*G*2.5,a5:P*G+P*G*G/2,a6:1-G};b={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:b.earth.radius,f:b.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,
f:0},104903:{a:b.moon.radius,f:b.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:b.mars.radius,f:b.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,
f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:b.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};d.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;d.earthEllipsoidConstants=P;d.spheroids=b;d.toRadians=M;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers","./GeographicTransformationStep"],function(d,b){return function(){function M(G){this.steps=
[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(G&&G.steps)for(const E of G.steps)E instanceof b?this.steps.push(E):this.steps.push(new b({wkid:E.wkid,wkt:E.wkt,isInverse:E.isInverse}))}M.cacheKey=function(G,E){return[void 0!==G.wkid&&null!==G.wkid?G.wkid.toString():"-1",void 0!==G.wkt&&null!==G.wkt?G.wkt.toString():"",void 0!==E.wkid&&null!==E.wkid?E.wkid.toString():"-1",void 0!==E.wkt&&null!==E.wkt?E.wkt.toString():""].join()};M.fromGE=function(G){const E=new M;let L="";for(const C of G.steps)G=
b.fromGE(C),E.steps.push(G),L+=G.uid.toString()+",";E._cachedProjection={};E._gtlistentry=null;E._chain=L;return E};var P=M.prototype;P.getInverse=function(){const G=new M;G.steps=[];for(let E=this.steps.length-1;0<=E;E--)G.steps.push(this.steps[E].getInverse());return G};P.getGTListEntry=function(){let G="";for(const E of this.steps)G+=E.uid.toString()+",";G!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=G);return this._gtlistentry};P.assignCachedGe=function(G,E,L){this._cachedProjection[M.cacheKey(G,
E)]=L};P.getCachedGeTransformation=function(G,E){let L="";for(const C of this.steps)L+=C.uid.toString()+",";L!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=L);G=this._cachedProjection[M.cacheKey(G,E)];return void 0===G?null:G};return d._createClass(M)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(d){let b=0;return function(){function M(P){this.uid=b++;P?(this._wkt=null!=P.wkt?P.wkt:null,
this._wkid=null!=P.wkid?P.wkid:-1,this._isInverse=null!=P.isInverse?!0===P.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}M.fromGE=function(P){const G=new M;G._wkt=P.wkt;G._wkid=P.wkid;G._isInverse=P.isInverse;return G};M.prototype.getInverse=function(){const P=new M;P._wkt=this.wkt;P._wkid=this._wkid;P._isInverse=!this.isInverse;return P};d._createClass(M,[{key:"wkt",get:function(){return this._wkt},set:function(P){this._wkt=P;this.uid=b++}},{key:"wkid",get:function(){return this._wkid},
set:function(P){this._wkid=P;this.uid=b++}},{key:"isInverse",get:function(){return this._isInverse},set:function(P){this._isInverse=P;this.uid=b++}}]);return M}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/unitUtils","./spatialReferenceUtils"],function(d,b,M){d.getGeometryZScaler=function(P,G,E){if(null==G||null==E||E.vcsWkid||M.equals(G,E))return null;G=b.getMetersPerVerticalUnitForSR(G);E=b.getMetersPerVerticalUnitForSR(E);const L=G/E;if(1===L)return null;switch(P){case "point":case "esriGeometryPoint":return C=>
{C&&null!=C.z&&(C.z*=L)};case "polyline":case "esriGeometryPolyline":return C=>{if(C)for(const p of C.paths)for(const m of p)2<m.length&&(m[2]*=L)};case "polygon":case "esriGeometryPolygon":return C=>{if(C)for(const p of C.rings)for(const m of p)2<m.length&&(m[2]*=L)};case "multipoint":case "esriGeometryMultipoint":return C=>{if(C)for(const p of C.points)2<p.length&&(p[2]*=L)};case "extent":case "esriGeometryEnvelope":return C=>{C&&null!=C.zmin&&null!=C.zmax&&(C.zmin*=L,C.zmax*=L)};default:return null}};
Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(d,b,M,P,G,E,L,C,p,m,r){function v(x){const z=[];let I=0,W=0;for(let N=0;N<x.length;N++){const l=x[N];let y=null;for(let q=0;q<l.length;q++)y=l[q],
z.push(y),0===q?W=I=y[0]:(I=Math.min(I,y[0]),W=Math.max(W,y[0]));y&&z.push([(I+W)/2,0])}return z}function t(x,z){if(!(x instanceof E||x instanceof G))throw O.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new M("straightLineDensify: the input geometry is neither polyline nor polygon");var I=L.getGeometryParts(x);const W=[];for(const l of I){I=[];W.push(I);I.push([l[0][0],l[0][1]]);for(let y=0;y<l.length-1;y++){const q=l[y][0],n=l[y][1],g=l[y+1][0],K=l[y+1][1];var N=
Math.sqrt((g-q)*(g-q)+(K-n)*(K-n));const X=(K-n)/N,T=(g-q)/N,V=N/z;if(1<V){for(let F=1;F<=V-1;F++){const J=F*z;I.push([T*J+q,X*J+n])}N=(N+Math.floor(V-1)*z)/2;I.push([T*N+q,X*N+n])}I.push([g,K])}}return"polygon"===x.type?new G({rings:W,spatialReference:x.spatialReference}):new E({paths:W,spatialReference:x.spatialReference})}function w(x,z,I){z&&(x=t(x,1E6),x=p.webMercatorToGeographic(x,!0));I&&(x=L.updatePolyGeometry(x,I));return x}function c(x,z,I){if(Array.isArray(x)){var W=x[0];W>z?(I=L.offsetMagnitude(W,
z),x[0]=W+-2*I*z):W<I&&(z=L.offsetMagnitude(W,I),x[0]=W+-2*z*I)}else W=x.x,W>z?(I=L.offsetMagnitude(W,z),x=x.clone().offset(-2*I*z,0)):W<I&&(z=L.offsetMagnitude(W,I),x=x.clone().offset(-2*z*I,0));return x}function h(x,z){let I=-1;for(let W=0;W<z.cutIndexes.length;W++){const N=z.cutIndexes[W],l=z.geometries[W],y=L.getGeometryParts(l);for(let q=0;q<y.length;q++){const n=y[q];n.some(g=>{if(180>g[0])return!0;g=0;for(var K=0;K<n.length;K++){var X=n[K][0];g=X>g?X:g}g=Number(g.toFixed(9));g=-360*L.offsetMagnitude(g,
180);for(K=0;K<n.length;K++)X=l.getPoint(q,K),l.setPoint(q,K,X.clone().offset(g,0));return!0})}if(N===I)if("polygon"===x[0].type)for(const q of L.getGeometryParts(l))x[N]=x[N].addRing(q);else{if("polyline"===x[0].type)for(const q of L.getGeometryParts(l))x[N]=x[N].addPath(q)}else I=N,x[N]=l}return x}async function B(x,z,I){if(!Array.isArray(x))return B([x],z);z&&"string"!==typeof z&&O.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var W="string"===typeof z?
z:z?.url??b.geometryServiceUrl;let N,l,y;let q=0;var n=[];z=[];for(var g of x)if(null==g)z.push(g);else{if(!K){var K=g.spatialReference;var X=C.getInfo(K);var T=(N=K.isWebMercator)?102100:4326;l=L.cutParams[T].maxX;y=L.cutParams[T].minX;var V=L.cutParams[T].plus180Line;T=L.cutParams[T].minus180Line}if(X)if("mesh"===g.type)z.push(g);else if("point"===g.type)z.push(c(g.clone(),l,y));else if("multipoint"===g.type){var F=g.clone();F.points=F.points.map(J=>c(J,l,y));z.push(F)}else if("extent"===g.type)F=
g.clone()._normalize(!1,!1,X),z.push(F.rings?new G(F):F);else if(g.extent){F=g.extent;const J=2*L.offsetMagnitude(F.xmin,y)*l;let ba=0===J?g.clone():L.updatePolyGeometry(g.clone(),J);F.offset(J,0);F.intersects(V)&&F.xmax!==l?(q=F.xmax>q?F.xmax:q,ba=w(ba,N),n.push(ba),z.push("cut")):F.intersects(T)&&F.xmin!==y?(q=2*F.xmax*l>q?2*F.xmax*l:q,ba=w(ba,N,360),n.push(ba),z.push("cut")):z.push(ba)}else z.push(g.clone());else z.push(g)}K=L.offsetMagnitude(q,l);X=-90;V=K;for(g=new E;0<K;)T=-180+360*K,g.addPath([[T,
X],[T,-1*X]]),X*=-1,K--;if(0<n.length&&0<V){K=await m.cut(W,n,g,I);K=h(n,K);X=[];n=[];for(V=0;V<z.length;V++)g=z[V],"cut"!==g?n.push(g):(g=K.shift(),T=x[V],null!=T&&"polygon"===T.type&&T.rings&&1<T.rings.length&&g.rings.length>=T.rings.length?(X.push(g),n.push("simplify")):n.push(N?p.geographicToWebMercator(g):g));if(!X.length)return n;z=await r.simplify(W,X,I);x=[];for(I=0;I<n.length;I++)W=n[I],"simplify"!==W?x.push(W):x.push(N?p.geographicToWebMercator(z.shift()):z.shift());return x}x=[];for(I=
0;I<z.length;I++)W=z[I],"cut"!==W?x.push(W):(W=n.shift(),x.push(!0===N?p.geographicToWebMercator(W):W));return x}const O=P.getLogger("esri.geometry.support.normalizeUtils");d.getDenormalizedExtent=function(x){if(!x)return null;const z=x.extent;if(!z)return null;var I=x.spatialReference&&C.getInfo(x.spatialReference);if(!I)return z;const [W,N]=I.valid;({width:I}=z);let {xmin:l,xmax:y}=z;[l,y]=[y,l];if("extent"===x.type||0===I||I<=N||I>2*N||l<W||y>N)return z;let q;switch(x.type){case "polygon":if(1<
x.rings.length)q=v(x.rings);else return z;break;case "polyline":if(1<x.paths.length)q=v(x.paths);else return z;break;case "multipoint":q=x.points}x=z.clone();for(let n=0;n<q.length;n++){let g=q[n][0];0>g?(g+=N,y=Math.max(g,y)):(g-=N,l=Math.min(g,l))}x.xmin=l;x.xmax=y;return x.width<I?(x.xmin-=N,x.xmax-=N,x):z};d.normalizeCentralMeridian=B;d.normalizeMapX=function(x,z){if(z=C.getInfo(z)){const [I,W]=z.valid;z=W-I;if(x<I)for(;x<I;)x+=z;if(x>W)for(;x>W;)x-=z}return x};d.straightLineDensify=t;Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(d,b,M,P){function G(E){return P.isPolygon(E)?E.rings:E.paths}b={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new b({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:M.WebMercator}),minus180Line:new b({paths:[[[-2.0037508342788905E7,
-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:M.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new b({paths:[[[180,-180],[180,180]]],spatialReference:M.WGS84}),minus180Line:new b({paths:[[[-180,-180],[-180,180]]],spatialReference:M.WGS84})}};d.cutParams=b;d.getGeometryParts=G;d.offsetMagnitude=function(E,L){return Math.ceil((E-L)/(2*L))};d.updatePolyGeometry=function(E,L){const C=G(E);for(const p of C)for(const m of p)m[0]+=L;return E};Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(d,b,M,P,G){d.cut=async function(E,L,C,p){E=G.parseUrl(E);const m=L[0].spatialReference;L={...p,query:{...E.query,f:"json",sr:JSON.stringify(m),target:JSON.stringify({geometryType:P.getJsonType(L[0]),geometries:L}),cutter:JSON.stringify(C)}};L=await M(E.path+"/cut",L);const {cutIndexes:r,geometries:v=[]}=L.data;
return{cutIndexes:r,geometries:v.map(t=>{t=P.fromJSON(t);t.spatialReference=m;return t})}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(d,b,M,P,G,E){function L(C,p,m){const r={};for(const t in C)if("declaredClass"!==t){var v=C[t];if(null!=v&&"function"!==typeof v)if(Array.isArray(v)){r[t]=[];for(let w=0;w<v.length;w++)r[t][w]=L(v[w])}else"object"===
typeof v?v.toJSON?(v=v.toJSON(m&&m[t]),r[t]=p?v:JSON.stringify(v)):r[t]=p?v:JSON.stringify(v):r[t]=v}return r}d.asValidOptions=function(C,p){return p?{...p,query:{...(C??{}),...p.query}}:{query:C}};d.encode=L;d.getToken=function(C,p){return C?E.supportsApiKey(C)&&(p||b.apiKey)?p||b.apiKey:M.id?.findCredential(C)?.token:null};d.parseUrl=function(C){return"string"===typeof C?G.urlToObject(C):P.clone(C)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports",
"../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(d,b,M,P,G){d.simplify=async function(E,L,C){const p="string"===typeof E?M.urlToObject(E):E;E=L[0].spatialReference;const m=P.getJsonType(L[0]);L={...C,query:{...p.query,f:"json",sr:E.wkid??JSON.stringify(E),geometries:JSON.stringify(G.encodeGeometries(L))}};({data:L}=await b(p.path+"/simplify",L));return G.decodeGeometries(L.geometries,m,E)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(d,b){d.decodeGeometries=function(M,P,G){const E=b.getGeometryType(P);return M.map(L=>{L=E.fromJSON(L);L.spatialReference=G;return L})};d.encodeGeometries=function(M){return{geometryType:b.getJsonType(M[0]),geometries:M.map(P=>P.toJSON())}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(d,b,M,P,G,E,L){function C(c,h){if(!h)return null;if("x"in h){var B={x:0,y:0};[B.x,B.y]=c(h.x,h.y,r);null!=h.z&&(B.z=h.z);null!=h.m&&(B.m=h.m);return B}return"xmin"in h?(B={xmin:0,ymin:0,xmax:0,ymax:0},[B.xmin,B.ymin]=c(h.xmin,h.ymin,r),[B.xmax,B.ymax]=c(h.xmax,h.ymax,r),h.hasZ&&(B.zmin=h.zmin,B.zmax=h.zmax,B.hasZ=!0),h.hasM&&(B.mmin=h.mmin,B.mmax=h.mmax,B.hasM=!0),B):"rings"in h?{rings:p(h.rings,c),hasM:h.hasM,hasZ:h.hasZ}:"paths"in h?{paths:p(h.paths,c),hasM:h.hasM,hasZ:h.hasZ}:"points"in
h?{points:m(h.points,c),hasM:h.hasM,hasZ:h.hasZ}:null}function p(c,h){const B=[];for(const O of c)B.push(m(O,h));return B}function m(c,h){const B=[];for(const O of c)c=h(O[0],O[1],[0,0]),B.push(c),2<O.length&&c.push(O[2]),3<O.length&&c.push(O[3]);return B}const r=[0,0],v=C.bind(null,L.lngLatToXY),t=C.bind(null,L.xyToLngLat),w=new (function(){function c(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var h=c.prototype;h.push=async function(B,O,x){if(!(B&&B.length&&O&&x)||E.equals(O,
x))return B;const z={geometries:B,inSpatialReference:O,outSpatialReference:x,resolve:null};this._jobs.push(z);return new Promise(I=>{z.resolve=I;null===this._timer&&(this._timer=setTimeout(this._process,10))})};h._process=function(){this._timer=null;const B=this._jobs.shift();if(B){var {geometries:O,inSpatialReference:x,outSpatialReference:z,resolve:I}=B;L.canProject(x,z)?E.isWebMercator(z)?I(O.map(v)):I(O.map(t)):I(P.projectMany(G.jsonAdapter,O,x,z,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}};return b._createClass(c)}());d.checkProjectionSupport=async function(c,h){c&&h&&(c=Array.isArray(c)?c.map(B=>null!=B.geometry?B.geometry.spatialReference:null).filter(M.isSome):[c],await P.initializeProjection(c.map(B=>({source:B,dest:h}))))};d.project=function(c,h,B,O){if(!c)return c;B||(B=h,h=c.spatialReference);return E.isValid(h)&&E.isValid(B)&&!E.equals(h,B)?L.canProject(h,B)?(c=E.isWebMercator(B)?v(c):t(c),c.spatialReference=B,c):P.projectMany(G.jsonAdapter,[c],h,B,null,O)[0]:c};d.projectMany=
function(c,h,B){return w.push(c,h,B)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(d,b){let M=b._createClass(function(C,p,m){this.x=C;this.y=p;this.spatialReference=m;this.m=this.z=void 0}),P=b._createClass(function(C,p,m,r){this.rings=C;this.spatialReference=p;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);r&&(this.hasM=r)}),G=b._createClass(function(C,p,m,r){this.paths=
C;this.spatialReference=p;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);r&&(this.hasM=r)}),E=b._createClass(function(C,p,m,r){this.points=C;this.spatialReference=p;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);r&&(this.hasM=r)}),L=b._createClass(function(C,p,m,r,v){this.xmin=C;this.ymin=p;this.xmax=m;this.ymax=r;this.spatialReference=v;this.mmax=this.mmin=this.zmax=this.zmin=void 0});d.jsonAdapter={convertToGEGeometry:function(C,p){return null==p?null:C.convertJSONToGeometry(p)},exportPoint:function(C,
p,m){m=new M(C.getPointX(p),C.getPointY(p),m);const r=C.hasZ(p),v=C.hasM(p);r&&(m.z=C.getPointZ(p));v&&(m.m=C.getPointM(p));return m},exportPolygon:function(C,p,m){return new P(C.exportPaths(p),m,C.hasZ(p),C.hasM(p))},exportPolyline:function(C,p,m){return new G(C.exportPaths(p),m,C.hasZ(p),C.hasM(p))},exportMultipoint:function(C,p,m){return new E(C.exportPoints(p),m,C.hasZ(p),C.hasM(p))},exportExtent:function(C,p,m){var r=C.hasZ(p);const v=C.hasM(p);m=new L(C.getXMin(p),C.getYMin(p),C.getXMax(p),
C.getYMax(p),m);r&&(r=C.getZExtent(p),m.zmin=r.vmin,m.zmax=r.vmax);v&&(C=C.getMExtent(p),m.mmin=C.vmin,m.mmax=C.vmax);return m}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t,w,c,h,B,O,x,z,I,W,N,l,y,q){function n(V){return null!=V&&V.every(F=>"exceedslimit"!==F.statisticType)}let g=b._createClass(function(V,F=null,J,ba,ka){this.attributes=V;this.geometry=J;this.centroid=ba;this.filterFlags=ka;this.groupId=-1;this.displayId=F});const K=new L.MemCacheStorage(2E6);let X=0,T=function(){function V(J){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:x.queryCapabilities};this.geometryType=J.geometryType;this.hasM=!!J.hasM;
this.hasZ=!!J.hasZ;this.objectIdField=J.objectIdField;this.spatialReference=J.spatialReference;this.definitionExpression=J.definitionExpression;this.featureStore=J.featureStore;this.aggregateAdapter=J.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=J.timeInfo;J.cacheSpatialQueries&&(this._geometryQueryCache=new L.MemCache(X++ +"$$",K));this.fieldsIndex=new l(J.fields);J.scheduler&&J.priority&&(this._frameTask=J.scheduler.registerTask(J.priority))}
var F=V.prototype;F.destroy=function(){this._frameTask=E.removeMaybe(this._frameTask);this.clearCache();E.destroyMaybe(this._geometryQueryCache);this._changeHandle=E.removeMaybe(this._changeHandle);E.destroyMaybe(this.fieldsIndex)};F.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};F.executeQuery=async function(J,ba){try{return(await this._executeQuery(J,{},ba)).createQueryResponse()}catch(ka){if(ka!==N.QUERY_ENGINE_EMPTY_RESULT)throw ka;
return(new z.QueryEngineResult([],J,this)).createQueryResponse()}};F.executeQueryForCount=async function(J={},ba){try{return(await this._executeQuery(J,{returnGeometry:!1,returnCentroid:!1,outSR:null},ba)).createQueryResponseForCount()}catch(ka){if(ka!==N.QUERY_ENGINE_EMPTY_RESULT)throw ka;return 0}};F.executeQueryForExtent=async function(J,ba){const ka=J.outSR;try{const ta=await this._executeQuery(J,{returnGeometry:!0,returnCentroid:!1,outSR:null},ba),Ba=ta.size;if(!Ba)return{count:0,extent:null};
const Ea=await this._getBounds(ta.items,ta.spatialReference,ka||this.spatialReference);return{count:Ba,extent:Ea}}catch(ta){if(ta===N.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ta;}};F.executeQueryForIds=async function(J,ba){return this.executeQueryForIdSet(J,ba).then(ka=>Array.from(ka))};F.executeQueryForIdSet=async function(J,ba){try{const ka=await this._executeQuery(J,{returnGeometry:!0,returnCentroid:!1,outSR:null},ba),ta=ka.items,Ba=new Set;await this._reschedule(()=>{for(const Ea of ta)Ba.add(ka.featureAdapter.getObjectId(Ea))},
ba);return Ba}catch(ka){if(ka===N.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ka;}};F.executeQueryForSnapping=async function(J,ba){const {point:ka,distance:ta,returnEdge:Ba,returnVertex:Ea}=J;if(!Ba&&!Ea)return{candidates:[]};const Fa=await this._reschedule(()=>this._checkQuerySupport(J.query),ba),Ma=!c.equals(ka.spatialReference,this.spatialReference);Ma&&await O.checkProjectionSupport(ka.spatialReference,this.spatialReference);var Ha="number"===typeof ta?ta:ta.x,Ua="number"===typeof ta?ta:ta.y;
Ha={xmin:ka.x-Ha,xmax:ka.x+Ha,ymin:ka.y-Ua,ymax:ka.y+Ua,spatialReference:ka.spatialReference};Ha=Ma?O.project(Ha,this.spatialReference):Ha;if(!Ha)return{candidates:[]};Ua=(await w.normalizeCentralMeridian(t.fromJSON(ka),null,{signal:ba}))[0];const Sa=(await w.normalizeCentralMeridian(t.fromJSON(Ha),null,{signal:ba}))[0];if(null==Ua||null==Sa)return{candidates:[]};const Va=new z.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Sa.toJSON())),ba),Fa,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Va),ba);await this._reschedule(()=>this._executeTimeQuery(Va),ba);await this._reschedule(()=>this._executeAttributesQuery(Va),ba);ba=Ua.toJSON();ba=Ma?O.project(ba,this.spatialReference):ba;return Va.createSnappingResponse({...J,point:ba,distance:Ma?Math.max(Ha.xmax-Ha.xmin,Ha.ymax-Ha.ymin)/2:ta},ka.spatialReference)};F.executeQueryForLatestObservations=async function(J,ba){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new P("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:J,timeInfo:this.timeInfo});try{const ka=await this._executeQuery(J,{},ba);await this._reschedule(()=>this._filterLatest(ka),ba);return ka.createQueryResponse()}catch(ka){if(ka!==N.QUERY_ENGINE_EMPTY_RESULT)throw ka;return(new z.QueryEngineResult([],J,this)).createQueryResponse()}};F.executeQueryForSummaryStatistics=async function(J={},ba,ka){const {field:ta,normalizationField:Ba,valueExpression:Ea}=ba;return(await this._getQueryEngineResultForStats(J,{field:ta,normalizationField:Ba,valueExpression:Ea},
ka)).createSummaryStatisticsResponse(ba)};F.executeQueryForUniqueValues=async function(J={},ba,ka){const {field:ta,field2:Ba,field3:Ea,valueExpression:Fa}=ba;return(await this._getQueryEngineResultForStats(J,{field:ta,field2:Ba,field3:Ea,valueExpression:Fa},ka)).createUniqueValuesResponse(ba)};F.executeQueryForClassBreaks=async function(J={},ba,ka){const {field:ta,normalizationField:Ba,valueExpression:Ea}=ba;return(await this._getQueryEngineResultForStats(J,{field:ta,normalizationField:Ba,valueExpression:Ea},
ka)).createClassBreaksResponse(ba)};F.executeQueryForHistogram=async function(J={},ba,ka){const {field:ta,normalizationField:Ba,valueExpression:Ea}=ba;return(await this._getQueryEngineResultForStats(J,{field:ta,normalizationField:Ba,valueExpression:Ea},ka)).createHistogramResponse(ba)};F.fetchRecomputedExtents=async function(J){const [ba,ka]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):
this._getBounds(await this._getAllFeatures(),this.spatialReference,this.spatialReference),null!=this._timeExtentPromise?this._timeExtentPromise:this._timeExtentPromise=W.getTimeExtent(this.timeInfo,this.featureStore)]);C.throwIfAborted(J);return{fullExtent:ba,timeExtent:ka}};F._getBounds=async function(J,ba,ka){const ta=m.set(m.create(),m.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(J,Ba=>m.expandWithAABB(ta,Ba));J={xmin:ta[0],ymin:ta[1],xmax:ta[3],ymax:ta[4],spatialReference:N.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(ta[2])&&isFinite(ta[5])&&(J.zmin=ta[2],J.zmax=ta[5]);ba=O.project(J,ba,ka);ba.spatialReference=N.cleanFromGeometryEngine(ka);0===ba.xmax-ba.xmin&&(ka=p.getMetersPerUnitForSR(ba.spatialReference),ba.xmin-=ka,ba.xmax+=ka);0===ba.ymax-ba.ymin&&(ka=p.getMetersPerUnitForSR(ba.spatialReference),ba.ymin-=ka,ba.ymax+=ka);this.hasZ&&null!=ba.zmin&&null!=ba.zmax&&0===ba.zmax-ba.zmin&&(ka=p.getMetersPerUnitForSR(ba.spatialReference),ba.zmin-=ka,ba.zmax+=ka);return ba};F._schedule=async function(J,
ba){return null!=this._frameTask?this._frameTask.schedule(J,ba):J(q.noBudget)};F._reschedule=async function(J,ba){return null!=this._frameTask?this._frameTask.reschedule(J,ba):J(q.noBudget)};F._getAllFeaturesQueryEngineResult=async function(J){return new z.QueryEngineResult(await this._getAllFeatures(),J,this)};F._getAllFeatures=async function(){if(null==this._allFeaturesPromise){const ka=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(ta=>ka.push(ta))})().then(()=>ka)}const J=
this._allFeaturesPromise,ba=await J;return J===this._allFeaturesPromise?ba.slice():this._getAllFeatures()};F._executeQuery=async function(J,ba,ka){J=G.clone(J);J=await this._schedule(()=>N.normalizeQuery(J,this.definitionExpression,this.spatialReference),ka);J=await this._reschedule(()=>this._checkQuerySupport(J),ka);J={...J,...ba};const ta=await this._reschedule(()=>this._executeSceneFilterQuery(J,ka),ka),Ba=await this._reschedule(()=>this._executeGeometryQuery(J,ta,ka),ka);await this._reschedule(()=>
this._executeAggregateIdsQuery(Ba),ka);await this._reschedule(()=>this._executeObjectIdsQuery(Ba),ka);await this._reschedule(()=>this._executeTimeQuery(Ba),ka);await this._reschedule(()=>this._executeAttributesQuery(Ba),ka);return Ba};F._executeSceneFilterQuery=async function(J,ba){if(null==J.sceneFilter)return null;const {outSR:ka,returnGeometry:ta,returnCentroid:Ba}=J;var Ea=this.featureStore.featureSpatialReference,Fa=J.sceneFilter.geometry;const Ma=null==Ea||c.equals(Ea,Fa.spatialReference)?Fa:
O.project(Fa,Ea);if(!Ma)return null;Ea=ta||Ba;Ea=c.isValid(ka)&&!c.equals(this.spatialReference,ka)&&Ea?async Va=>this._project(Va,ka):Va=>Va;const Ha=this.featureAdapter;Fa=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ma)),ba);if("disjoint"===J.sceneFilter.spatialRelationship){if(!Fa.length)return null;const Va=new Set;for(var Ua of Fa)Va.add(Ha.getObjectId(Ua));const eb=await this._reschedule(()=>this._getAllFeatures(),ba);Ua=await this._reschedule(async()=>{const kb=await I.getSpatialQueryOperator("esriSpatialRelDisjoint",
Ma,this.geometryType,this.hasZ,this.hasM),jb=await this._runSpatialFilter(eb,db=>!Va.has(Ha.getObjectId(db))||kb(Ha.getGeometry(db)),ba);return new z.QueryEngineResult(jb,J,this)},ba);return Ea(Ua)}if(!Fa.length)return new z.QueryEngineResult([],J,this);if(this._canExecuteSinglePass(Ma,J))return Ea(new z.QueryEngineResult(Fa,J,this));const Sa=await I.getSpatialQueryOperator("esriSpatialRelContains",Ma,this.geometryType,this.hasZ,this.hasM);Ua=await this._runSpatialFilter(Fa,Va=>Sa(Ha.getGeometry(Va)),
ba);return Ea(new z.QueryEngineResult(Ua,J,this))};F._executeGeometryQuery=async function(J,ba,ka){if(null!=ba&&0===ba.items.length)return ba;J=null!=ba?ba.query:J;const {geometry:ta,outSR:Ba,spatialRel:Ea,returnGeometry:Fa,returnCentroid:Ma}=J;var Ha=this.featureStore.featureSpatialReference;const Ua=!ta||null==Ha||c.equals(Ha,ta.spatialReference)?ta:O.project(ta,Ha),Sa=Fa||Ma,Va=c.isValid(Ba)&&!c.equals(this.spatialReference,Ba),eb=this._geometryQueryCache&&null==ba?Va&&Sa?JSON.stringify({originalFilterGeometry:ta,
spatialRelationship:Ea,outSpatialReference:Ba}):JSON.stringify({originalFilterGeometry:ta,spatialRelationship:Ea}):null;Ha=eb?this._geometryQueryCache.get(eb):null;if(null!=Ha)return new z.QueryEngineResult(Ha,J,this);Ha=async D=>{Va&&Sa&&await this._project(D,Ba);eb&&this._geometryQueryCache.put(eb,D.items,D.items.length+1);return D};if(!Ua)return Ha(null!=ba?ba:await this._getAllFeaturesQueryEngineResult(J));const kb=this.featureAdapter;let jb=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ta)),
ka);if("esriSpatialRelDisjoint"===Ea){if(!jb.length)return Ha(null!=ba?ba:await this._getAllFeaturesQueryEngineResult(J));const D=new Set;for(var db of jb)D.add(kb.getObjectId(db));const ha=null!=ba?ba.items:await this._reschedule(()=>this._getAllFeatures(),ka);db=await this._reschedule(async()=>{const Q=await I.getSpatialQueryOperator(Ea,Ua,this.geometryType,this.hasZ,this.hasM),ea=await this._runSpatialFilter(ha,A=>!D.has(kb.getObjectId(A))||Q(kb.getGeometry(A)),ka);return new z.QueryEngineResult(ea,
J,this)},ka);return Ha(db)}if(null!=ba){const D=new M.PositionHint;jb=jb.filter(ha=>0<=M.indexOf(ba.items,ha,ba.items.length,D))}if(!jb.length)return Ha=new z.QueryEngineResult([],J,this),eb&&this._geometryQueryCache.put(eb,Ha.items,1),Ha;if(this._canExecuteSinglePass(Ua,J))return Ha(new z.QueryEngineResult(jb,J,this));const f=await I.getSpatialQueryOperator(Ea,Ua,this.geometryType,this.hasZ,this.hasM);db=await this._runSpatialFilter(jb,D=>f(kb.getGeometry(D)),ka);return Ha(new z.QueryEngineResult(db,
J,this))};F._executeAggregateIdsQuery=function(J){if(0!==J.items.length&&J.query.aggregateIds&&J.query.aggregateIds.length&&null!=this.aggregateAdapter){var ba=new Set;for(const ta of J.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ta).forEach(Ba=>ba.add(Ba));var ka=this.featureAdapter.getObjectId;J.items=J.items.filter(ta=>ba.has(ka(ta)))}};F._executeObjectIdsQuery=function(J){if(0!==J.items.length&&J.query.objectIds&&J.query.objectIds.length){var ba=new Set(J.query.objectIds),ka=
this.featureAdapter.getObjectId;J.items=J.items.filter(ta=>ba.has(ka(ta)))}};F._executeTimeQuery=function(J){if(0!==J.items.length){var ba=W.getTimeOperator(this.timeInfo,J.query.timeExtent,this.featureAdapter);null!=ba&&(J.items=J.items.filter(ba))}};F._executeAttributesQuery=function(J){if(0!==J.items.length){var ba=B.getWhereClause(J.query.where,this.fieldsIndex);if(ba){if(!ba.isStandardized)throw new TypeError("Where clause is not standardized");J.items=J.items.filter(ka=>ba.testFeature(ka,this.featureAdapter))}}};
F._runSpatialFilter=async function(J,ba,ka){if(!ba)return J;if(null==this._frameTask)return J.filter(Fa=>ba(Fa));let ta=0;const Ba=[],Ea=async Fa=>{for(;ta<J.length;){const Ma=J[ta++];ba(Ma)&&(Ba.push(Ma),Fa.madeProgress());Fa.done&&await this._reschedule(Ha=>Ea(Ha),ka)}};return this._reschedule(Fa=>Ea(Fa),ka).then(()=>Ba)};F._filterLatest=function(J){const {trackIdField:ba,startTimeField:ka,endTimeField:ta}=this.timeInfo,Ba=ta||ka,Ea=new Map,Fa=this.featureAdapter.getAttribute;for(const Ma of J.items){const Ha=
Fa(Ma,ba),Ua=Fa(Ma,Ba),Sa=Ea.get(Ha);(!Sa||Ua>Fa(Sa,Ba))&&Ea.set(Ha,Ma)}J.items=Array.from(Ea.values())};F._canExecuteSinglePass=function(J,ba){({spatialRel:ba}=ba);return I.canQueryWithRBush(J)&&("esriSpatialRelEnvelopeIntersects"===ba||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===ba||"esriSpatialRelContains"===ba||"esriSpatialRelWithin"===ba))};F._project=async function(J,ba){if(!ba||c.equals(this.spatialReference,ba))return J;const ka=this.featureAdapter;ba=await O.projectMany(J.items.map(ta=>
N.getGeometry(this.geometryType,this.hasZ,this.hasM,ka.getGeometry(ta))),this.spatialReference,ba);J.items=ba.map((ta,Ba)=>ka.cloneWithGeometry(J.items[Ba],h.convertFromGeometry(ta,this.hasZ,this.hasM)));return J};F._getQueryBBoxes=function(J){if(I.canQueryWithRBush(J)){if(t.isExtent(J))return[r.fromValues(J.xmin,J.ymin,J.xmax,J.ymax)];if(t.isPolygon(J))return J.rings.map(ba=>r.fromValues(Math.min(ba[0][0],ba[2][0]),Math.min(ba[0][1],ba[2][1]),Math.max(ba[0][0],ba[2][0]),Math.max(ba[0][1],ba[2][1])))}return[v.getBoundsXY(r.create(),
J)]};F._searchFeatures=async function(J){const ba=new Set;await Promise.all(J.map(ka=>this.featureStore.forEachInBounds(ka,ta=>ba.add(ta))));J=Array.from(ba.values());ba.clear();return J};F._checkStatisticsSupport=async function(J,ba){if(0>(J.distance??0)||null!=J.geometryPrecision||J.multipatchOption||J.pixelSize||J.relationParam||J.text||J.outStatistics||J.groupByFieldsForStatistics||J.having||J.orderByFields)throw new P("feature-store:unsupported-query","Unsupported query options",{query:J});this._checkAttributesQuerySupport(J);
return Promise.all([this._checkStatisticsParamsSupport(ba,J),I.checkSpatialQuerySupport(J,this.geometryType,this.spatialReference),O.checkProjectionSupport(this.spatialReference,J.outSR)]).then(()=>J)};F._checkStatisticsParamsSupport=async function(J,ba){var ka=[];J.valueExpression&&({arcadeUtils:ka}=await y.loadArcade(),ka=ka.extractFieldNames(J.valueExpression));J.field&&ka.push(J.field);J.field2&&ka.push(J.field2);J.field3&&ka.push(J.field3);J.normalizationField&&ka.push(J.normalizationField);
if(!ka.length&&!J.valueExpression)throw new P("feature-store:unsupported-query","field or valueExpression is required",{params:J});B.validateFields(this.fieldsIndex,ka,{errorMessage:"Cannot calculate statistics for missing fields",query:ba});B.validateFieldTypes(this.fieldsIndex,ka,{expressionName:"statistics",query:ba})};F._checkQuerySupport=async function(J){if(0>(J.distance??0)||null!=J.geometryPrecision||J.multipatchOption||J.pixelSize||J.relationParam||J.text)throw new P("feature-store:unsupported-query",
"Unsupported query options",{query:J});this._checkAttributesQuerySupport(J);this._checkStatisticsQuerySupport(J);return Promise.all([I.checkSpatialQuerySupport(J,this.geometryType,this.spatialReference),O.checkProjectionSupport(this.spatialReference,J.outSR)]).then(()=>J)};F._checkAttributesQuerySupport=function(J){const {outFields:ba,orderByFields:ka,returnDistinctValues:ta,outStatistics:Ba}=J,Ea=Ba?Ba.map(Fa=>Fa.outStatisticFieldName&&Fa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ka&&
0<ka.length){const Fa=ka.map(Ma=>{const Ha=Ma.toLowerCase();return Ha.includes(" asc")?Ha.split(" asc")[0]:Ha.includes(" desc")?Ha.split(" desc")[0]:Ma}).filter(Ma=>!Ea.includes(Ma));B.validateFields(this.fieldsIndex,Fa,{expressionName:"orderByFields",query:J})}if(ba&&0<ba.length)B.validateFields(this.fieldsIndex,ba,{expressionName:"outFields",query:J});else if(ta)throw new P("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:J});B.validateWhere(this.fieldsIndex,
J.where,J)};F._checkStatisticsQuerySupport=function(J){const {outStatistics:ba,groupByFieldsForStatistics:ka,having:ta}=J;var Ba=ka&&ka.length,Ea=ba&&ba.length;if(ta){if(!Ba||!Ea)throw new P("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:J});B.validateHaving(this.fieldsIndex,ta,ba,J)}if(Ea&&n(ba)){Ea=ba.map(Fa=>Fa.onStatisticField).filter(Boolean);B.validateFields(this.fieldsIndex,Ea,{expressionName:"onStatisticFields",query:J});
Ba&&B.validateFields(this.fieldsIndex,ka,{expressionName:"groupByFieldsForStatistics",query:J});Ba=new Set([...B.validNumericTypesKebabDict.jsonValues,...B.validDateTypesKebabDict.jsonValues]);Ea=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...B.validNumericTypesKebabDict.apiValues,...B.validDateTypesKebabDict.apiValues]);for(const Fa of ba){const {onStatisticField:Ma,statisticType:Ha}=Fa;if(("percentile_disc"===Ha||"percentile_cont"===Ha)&&"statisticParameters"in Fa){const {statisticParameters:Ua}=
Fa;if(!Ua)throw new P("feature-store:unsupported-query","statisticParameters should be set for percentile type",{definition:Fa,query:J});}else if("count"!==Ha&&"min"!==Ha&&"max"!==Ha&&Ma&&B.hasInvalidFieldType(Ma,this.fieldsIndex,Ba))throw new P("feature-store:unsupported-query",`outStatistics with '${Ha}' statistic type, only supports ${Ea} field types`,{definition:Fa,query:J});}}};F._getQueryEngineResultForStats=async function(J,ba,ka){J=G.clone(J);try{J=await this._schedule(()=>N.normalizeQuery(J,
this.definitionExpression,this.spatialReference),ka);J=await this._reschedule(()=>this._checkStatisticsSupport(J,ba),ka);const ta=await this._reschedule(()=>this._executeSceneFilterQuery(J,ka),ka),Ba=await this._reschedule(()=>this._executeGeometryQuery(J,ta,ka),ka);await this._reschedule(()=>this._executeAggregateIdsQuery(Ba),ka);await this._reschedule(()=>this._executeObjectIdsQuery(Ba),ka);await this._reschedule(()=>this._executeTimeQuery(Ba),ka);await this._reschedule(()=>this._executeAttributesQuery(Ba),
ka);return Ba}catch(ta){if(ta!==N.QUERY_ENGINE_EMPTY_RESULT)throw ta;return new z.QueryEngineResult([],J,this)}};b._createClass(V,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return V}();d.Feature=g;d.QueryEngine=T;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(d,b,M){d.RemoveMode=void 0;(function(L){L[L.ALL=0]="ALL";L[L.SOME=1]="SOME"})(d.RemoveMode||
(d.RemoveMode={}));let P=function(){function L(p,m,r){this.name=p;this._storage=m;this.id=`${E++}:`;this.maxSize=this.size=0;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}var C=L.prototype;C.destroy=function(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null};C.resetHitRate=function(){this._hit=this._miss=0};C.put=function(p,
m,r,v=0){this._storage.put(this,p,m,r,v)};C.get=function(p){p=this._storage.get(this,p);void 0===p?++this._miss:++this._hit;return p};C.pop=function(p){p=this._storage.pop(this,p);void 0===p?++this._miss:++this._hit;return p};C.updateSize=function(p,m,r){this._storage.updateSize(this,p,m,r)};C.clear=function(){this._storage.clear(this)};C.clearAll=function(){this._storage.clearAll()};C.resetStats=function(){this._storage.resetStats()};b._createClass(L,[{key:"hitRate",get:function(){return this._hit/
(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},{key:"performanceInfo",get:function(){return this._storage.performanceInfo}}]);return L}(),G=function(){function L(p=10485760){this._maxSize=p;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new M;this._users=new M}var C=L.prototype;C.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};C.register=function(p){this._users.push(p)};C.deregister=function(p){this._users.removeUnordered(p)};
C.registerRemoveFunc=function(p,m){this._removeFuncs.push([p,m])};C.deregisterRemoveFunc=function(p){this._removeFuncs.filterInPlace(m=>m[0]!==p)};C.put=function(p,m,r,v,t){m=p.id+m;const w=this._db.get(m);w&&(this._size-=w.size,p.size-=w.size,this._db.delete(m),w.entry!==r&&this._notifyRemove(m,w.entry,d.RemoveMode.ALL));v>this._maxSize?this._notifyRemove(m,r,d.RemoveMode.ALL):void 0===r?console.warn("Refusing to cache undefined entry "):!v||0>v?console.warn("Refusing to cache entry with invalid size "+
v):(t=1+Math.max(t,-3)- -3,this._db.set(m,{entry:r,size:v,lifetime:t,lives:t}),this._size+=v,p.size+=v,this._checkSizeLimits())};C.updateSize=function(p,m,r,v){m=p.id+m;const t=this._db.get(m);if(t&&t.entry===r){this._size-=t.size;for(p.size-=t.size;v>this._maxSize;)if(v=this._notifyRemove(m,r,d.RemoveMode.SOME),!(null!=v&&0<v)){this._db.delete(m);return}t.size=v;this._size+=v;p.size+=v;this._checkSizeLimits()}};C.pop=function(p,m){m=p.id+m;const r=this._db.get(m);if(r)return this._size-=r.size,p.size-=
r.size,this._db.delete(m),++this._hit,r.entry;++this._miss};C.get=function(p,m){m=p.id+m;p=this._db.get(m);if(void 0===p)++this._miss;else return this._db.delete(m),p.lives=p.lifetime,this._db.set(m,p),++this._hit,p.entry};C.resetStats=function(){this._hit=this._miss=0;this._users.forAll(p=>p.resetHitRate())};C.clear=function(p){const m=p.id;this._db.forEach((r,v)=>{v.startsWith(m)&&(this._size-=r.size,this._db.delete(v),this._notifyRemove(v,r.entry,d.RemoveMode.ALL))});p.size=0};C.clearAll=function(){this._db.forEach((p,
m)=>this._notifyRemove(m,p.entry,d.RemoveMode.ALL));this._users.forEach(p=>p.size=0);this._size=0;this._db.clear()};C._getHitRate=function(){return this._hit/(this._hit+this._miss)};C._notifyRemove=function(p,m,r){let v;this._removeFuncs.some(t=>p.startsWith(t[0])?(t=t[1](m,r),"number"===typeof t&&(v=t),!0):!1);return v};C._checkSizeLimits=function(){if(this._size>this._maxSize)for(const [p,m]of this._db)if(this._purgeItem(p,m),this._size<=.9*this.maxSize)return;this._users.forEach(p=>{if(0<p.maxSize&&
p.size>p.maxSize)for(const [m,r]of this._db)if(m.startsWith(p.id)&&(this._purgeItem(m,r,p),p.size<=.9*p.maxSize))break})};C._purgeItem=function(p,m,r=this._users.find(v=>p.startsWith(v.id))){this._db.delete(p);if(1>=m.lives){this._size-=m.size;r&&(r.size-=m.size);const v=this._notifyRemove(p,m.entry,d.RemoveMode.SOME);null!=v&&0<v&&(this._size+=v,r&&(r.size+=v),m.lives=m.lifetime,m.size=v,this._db.set(p,m))}else--m.lives,this._db.set(p,m)};b._createClass(L,[{key:"size",get:function(){return this._size}},
{key:"maxSize",get:function(){return this._maxSize},set:function(p){this._maxSize=Math.max(p,0);this._checkSizeLimits()}},{key:"performanceInfo",get:function(){const p={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},m={},r=[];this._db.forEach((w,c)=>{const h=w.lifetime;r[h]=(r[h]||0)+w.size;this._users.forAll(B=>{const {id:O,name:x}=B;c.startsWith(O)&&(m[x]=(m[x]||0)+w.size)})});const v=
{};this._users.forAll(w=>{const c=w.name;"hitRate"in w&&"number"===typeof w.hitRate&&!isNaN(w.hitRate)&&0<w.hitRate?(m[c]=m[c]||0,v[c]=Math.round(100*w.hitRate)+"%"):v[c]="0%"});var t=Object.keys(m);t.sort((w,c)=>m[c]-m[w]);t.forEach(w=>p[w]=Math.round(m[w]/2**20)+"MB / "+v[w]);for(t=r.length-1;0<=t;--t){const w=r[t];w&&(p["Priority "+(t+-3-1)]=Math.round(w/this._size*100)+"%")}return p}}]);return L}(),E=0;d.MIN_PRIORITY=-3;d.MemCache=P;d.MemCacheStorage=G;Object.defineProperty(d,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/jsonMap","../../../core/sql/WhereClauseCache"],function(d,b,M,P){function G(B,O,x={}){O=E(B,O);if(!O)throw new b("feature-store:unsupported-query","invalid SQL expression",{expression:B});const z=x.expressionName||"expression";if(x.validateStandardized&&!O.isStandardized)throw new b("feature-store:unsupported-query",`${z} is not standard`,{expression:B});if(x.validateAggregate&&
!O.isAggregate)throw new b("feature-store:unsupported-query",`${z} does not contain a valid aggregate function`,{expression:B});return O.fieldNames}function E(B,O){return B?v.get(B,O):null}function L(B,O,x={}){x.errorMessage||(x.errorMessage=x.expressionName?`${x.expressionName} contains invalid fields`:"Fields are invalid");p(B,O,(z,I)=>I.has(z),x)}function C(B,O,x={}){x.errorMessage||(x.errorMessage=x.expressionName?`${x.expressionName} only supports ${h} field types`:`Only ${h} field types are supported`);
p(B,O,(z,I)=>!r(z,I),x)}function p(B,O,x,z={}){const I=z.verifyExpression??!0,W=[];for(const N of O)if(O=x(N,B),"*"!==N&&!O)if(I){O=m(N);try{const l=G(O,B,{validateStandardized:!0});p(B,l,x,z)}catch(l){O=l?.details;if(O?.expression)throw l;O?.invalidFields?W.push(...O.invalidFields):W.push(N)}}else W.push(N);if(W.length)throw new b("feature-store:unsupported-query",z.errorMessage,{invalidFields:W,query:z.query});}function m(B){return B.split(" as ")[0]}function r(B,O,x=c){return(B=O.get(B))?!x.has(B.type):
!1}const v=new P.WhereClauseCache(50,500);P=new M.JSONMap({esriFieldTypeString:"string"});const t=new M.JSONMap({esriFieldTypeOID:"oid",esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long"}),w=new M.JSONMap({esriFieldTypeDate:"date"});M=new M.JSONMap({esriFieldTypeGUID:"guid",esriFieldTypeGlobalId:"global-id"});const c=new Set([...t.jsonValues,...w.jsonValues,...P.jsonValues,...M.jsonValues]),h=
(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...t.apiValues,...w.apiValues,...P.apiValues,...M.apiValues]);d.getAliasFromFieldName=function(B){return B.split(" as ")[1]};d.getExpressionFromFieldName=m;d.getWhereClause=E;d.hasInvalidFieldType=r;d.validDateTypesKebabDict=w;d.validGuidTypesKebabDict=M;d.validNumericTypesKebabDict=t;d.validStringTypesKebabDict=P;d.validateFieldTypes=C;d.validateFields=L;d.validateHaving=function(B,O,x,z){if(!O)return!0;const I=G(O,B,{validateAggregate:!0,
expressionName:"having"});L(B,I,{expressionName:"having",query:z});C(B,I,{expressionName:"having",query:z});if(!v.get(O,B)?.getExpressions().every(W=>{const {aggregateType:N,field:l}=W,y=B.get(l)?.name;return x.some(q=>{const {onStatisticField:n,statisticType:g}=q;return B.get(n)?.name===y&&g.toLowerCase().trim()===N})}))throw new b("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:O});return!0};d.validateWhere=function(B,O,x){if(!O)return!0;O=G(O,
B,{validateStandardized:!0,expressionName:"where clause"});L(B,O,{expressionName:"where clause",query:x});C(B,O,{expressionName:"where clause",query:x});return!0};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../LRUCache","./WhereClause"],function(d,b,M,P){let G=function(){function E(L,C){this._cache=new M.LRUCache(L);this._invalidCache=new M.LRUCache(C)}E.prototype.get=function(L,
C){const p=`${C.uid}:${L}`,m=this._cache.get(p);if(m)return m;if(void 0!==this._invalidCache.get(p))return null;try{const r=P.WhereClause.create(L,C);this._cache.put(p,r);return r}catch{return this._invalidCache.put(p,null),null}};return b._createClass(E)}();d.WhereClauseCache=G;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./MemCache"],function(d,b,M){let P=function(){function G(L,C){this._storage=
new M.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=L;this._storage.register(this);C&&this._storage.registerRemoveFunc("",C)}var E=G.prototype;E.destroy=function(){this._storage.deregister(this);this._storage.destroy()};E.put=function(L,C,p=1){this._storage.put(this,L,C,p,1)};E.pop=function(L){return this._storage.pop(this,L)};E.get=function(L){return this._storage.get(this,L)};E.clear=function(){this._storage.clearAll()};E.resetHitRate=function(){};b._createClass(G,[{key:"maxSize",
get:function(){return this._storage.maxSize},set:function(L){this._storage.maxSize=L}}]);return G}();d.LRUCache=P;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(d,b,M,P,G,E){function L(T,V){T+="";return T.length>=V?T:Array(V-T.length+1).join("0")+T}function C(T,V,F="0",J="0",ba="0",ka="0",ta="",Ba="0",
Ea="0"){return"+"===ta||"-"===ta?(T=`${L(parseInt(T,10),4)}-${L(parseInt(V,10),2)}-${L(parseInt(F,10),2)}`,V="",10>parseFloat(ka)&&(V="0"),J=`${L(parseInt(J,10),2)}:${L(parseInt(ba,10),2)}:${V+parseFloat(ka).toString()}`,ta=`${ta}${L(parseInt(Ba,10),2)}:${L(parseInt(Ea,10),2)}`,new Date(T+"T"+J+ta)):new Date(parseInt(T,10),parseInt(V,10)-1,parseInt(F,10),parseInt(J,10),parseInt(ba,10),parseFloat(ka))}function p(T){let V=W.exec(T);if(null!==V){const [,F,J,ba,ka,ta,Ba]=V;return C(F,J,ba,ka,ta,Ba)}V=
N.exec(T);if(null!==V){const [,F,J,ba,ka,ta,Ba,Ea,Fa,Ma]=V;return C(F,J,ba,ka,ta,Ba,Ea,Fa,Ma)}V=l.exec(T);if(null!==V){const [,F,J,ba,ka,ta,Ba,Ea,Fa]=V;return C(F,J,ba,ka,ta,"0",Ba,Ea,Fa)}V=y.exec(T);if(null!==V){const [,F,J,ba,ka,ta]=V;return C(F,J,ba,ka,ta)}V=I.exec(T);if(null!==V){const [,F,J,ba]=V;return C(F,J,ba)}throw Error("SQL Invalid Timestamp");}function m(T){const V=I.exec(T);if(null===V)try{return p(T)}catch{throw Error("SQL Invalid Date");}const [,F,J,ba]=V;return new Date(parseInt(F,
10),parseInt(J,10)-1,parseInt(ba,10))}function r(T){return Array.isArray(T)?T:[T]}function v(T){return null!==T?!0!==T:null}function t(T,V){return null!=T&&null!=V?!0===T&&!0===V:!1===T||!1===V?!1:null}function w(T,V){return null!=T&&null!=V?!0===T||!0===V:!0===T||!0===V?!0:null}function c(T,V){if(null==T)return null;let F=!1;for(const J of V)if(null==J)F=null;else if(T===J){F=!0;break}return F}function h(T,V,F){if(null==T)return null;let J="",ba=K.Normal;for(let ka=0;ka<V.length;ka++){const ta=V.charAt(ka);
switch(ba){case K.Normal:ta===F?ba=K.Escaped:J="-[]/{}()*+?.\\^$|".includes(ta)?J+("\\"+ta):"%"===ta?J+".*":"_"===ta?J+".":J+ta;break;case K.Escaped:J="-[]/{}()*+?.\\^$|".includes(ta)?J+("\\"+ta):J+ta,ba=K.Normal}}return(new RegExp("^"+J+"$","m")).test(T)}function B(T){return T instanceof Date?T.valueOf():T}function O(T,V,F){if(null==V||null==F)return null;V=B(V);F=B(F);switch(T){case "\x3c\x3e":return V!==F;case "\x3d":return V===F;case "\x3e":return V>F;case "\x3c":return V<F;case "\x3e\x3d":return V>=
F;case "\x3c\x3d":return V<=F}}function x(T,V,F){if("||"===T)return G.evaluateFunction("concat",[V,F]);if(V instanceof G.SqlInterval)if(F instanceof Date)switch(T){case "+":return new Date(V.valueInMilliseconds()+F.getTime());case "-":return V.valueInMilliseconds()-F.getTime();case "*":return V.valueInMilliseconds()*F.getTime();case "/":return V.valueInMilliseconds()/F.getTime()}else if(F instanceof G.SqlInterval)switch(T){case "+":return G.SqlInterval.createFromMilliseconds(V.valueInMilliseconds()+
F.valueInMilliseconds());case "-":return G.SqlInterval.createFromMilliseconds(V.valueInMilliseconds()-F.valueInMilliseconds());case "*":return V.valueInMilliseconds()*F.valueInMilliseconds();case "/":return V.valueInMilliseconds()/F.valueInMilliseconds()}else V=V.valueInMilliseconds();else if(F instanceof G.SqlInterval)if(V instanceof Date)switch(T){case "+":return new Date(F.valueInMilliseconds()+V.getTime());case "-":return new Date(V.getTime()-F.valueInMilliseconds());case "*":return V.getTime()*
F.valueInMilliseconds();case "/":return V.getTime()/F.valueInMilliseconds()}else F=F.valueInMilliseconds();else if(V instanceof Date&&"number"===typeof F)switch(F*=864E5,V=V.getTime(),T){case "+":return new Date(V+F);case "-":return new Date(V-F);case "*":return new Date(V*F);case "/":return new Date(V/F)}else if(F instanceof Date&&"number"===typeof V)switch(V*=864E5,F=F.getTime(),T){case "+":return new Date(V+F);case "-":return new Date(V-F);case "*":return new Date(V*F);case "/":return new Date(V/
F)}switch(T){case "+":return V+F;case "-":return V-F;case "*":return V*F;case "/":return V/F}}function z(T,V,F,J){T=J.getAttribute(T,V);return null!=T&&1===F[V]?new Date(T):T}const I=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,W=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,N=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,l=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,
q=new Set(["current_timestamp","current_date","current_time"]);let n=function(){function T(){}T.makeBool=function(V){return!0===V};T.featureValue=function(V,F,J,ba){return z(V,F,J,ba)};T.equalsNull=function(V){return null===V};T.applyLike=function(V,F,J){return h(V,F,J)};T.ensureArray=function(V){return r(V)};T.applyIn=function(V,F){return c(V,F)};T.currentDate=function(){const V=new Date;V.setHours(0,0,0,0);return V};T.makeSqlInterval=function(V,F,J){return G.SqlInterval.createFromValueAndQualifer(V,
F,J)};T.convertInterval=function(V){return V instanceof G.SqlInterval?V.valueInMilliseconds():V};T.currentTimestamp=function(){return new Date};T.compare=function(V,F,J){return O(V,F,J)};T.calculate=function(V,F,J){return x(V,F,J)};T.makeComparable=function(V){return B(V)};T.evaluateFunction=function(V,F){return G.evaluateFunction(V,F)};T.lookup=function(V,F){V=F[V];return void 0===V?null:V};T.between=function(V,F){return null==V||null==F[0]||null==F[1]?null:V>=F[0]&&V<=F[1]};T.notbetween=function(V,
F){return null==V||null==F[0]||null==F[1]?null:V<F[0]||V>F[1]};T.ternaryNot=function(V){return v(V)};T.ternaryAnd=function(V,F){return t(V,F)};T.ternaryOr=function(V,F){return w(V,F)};return b._createClass(T)}(),g=function(){function T(F,J){this.fieldsIndex=J;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=E.WhereGrammar.parse(F);const {isStandardized:ba,isAggregate:ka,referencedFieldNames:ta}=this._extractExpressionInfo(J);this._referencedFieldNames=ta;this.isStandardized=
ba;this.isAggregate=ka}T.create=function(F,J){return new T(F,J)};var V=T.prototype;V.testSet=function(F,J=X){const ba={};for(const ka of this.fieldNames)ba[ka]=F.map(ta=>J.getAttribute(ta,ka));return!!this._evaluateNode(this.parseTree,{attributes:ba},X)};V.calculateValue=function(F,J=X){F=this._evaluateNode(this.parseTree,F,J);return F instanceof G.SqlInterval?F.valueInMilliseconds()/864E5:F};V.calculateValueCompiled=function(F,J=X){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(F,
this.parameters,J,this._datefields);if(M("esri-csp-restrictions"))return this.calculateValue(F,J);this._compileMe();return this.parseTree._compiledVersion(F,this.parameters,J,this._datefields)};V.testFeature=function(F,J=X){return!!this._evaluateNode(this.parseTree,F,J)};V.testFeatureCompiled=function(F,J=X){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(F,this.parameters,J,this._datefields);if(M("esri-csp-restrictions"))return this.testFeature(F,J);this._compileMe();
return!!this.parseTree._compiledVersion(F,this.parameters,J,this._datefields)};V.getFunctions=function(){const F=new Set;this._visitAll(this.parseTree,J=>{"function"===J.type&&F.add(J.name.toLowerCase())});return Array.from(F)};V.getExpressions=function(){const F=new Map;this._visitAll(this.parseTree,J=>{if("function"===J.type){const ba=J.name.toLowerCase();J=J.args.value[0];if("column-reference"===J.type){J=J.column;const ka=`${ba}-${J}`;F.has(ka)||F.set(ka,{aggregateType:ba,field:J})}}});return[...F.values()]};
V.getVariables=function(){const F=new Set;this._visitAll(this.parseTree,J=>{"parameter"===J.type&&F.add(J.value.toLowerCase())});return Array.from(F)};V._compileMe=function(){const F="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",F)).bind(n)};V._extractExpressionInfo=function(F){const J=[],ba=new Set;let ka=!0,ta=!0;this._visitAll(this.parseTree,Ba=>{switch(Ba.type){case "column-reference":const Ea=
F?.get(Ba.column);let Fa,Ma;Ea?Fa=Ma=Ea.name??"":(Ma=Ba.column,Fa=Ma.toLowerCase());Ea&&Ea.name&&("date"===Ea.type||"esriFieldTypeDate"===Ea.type)&&(this._datefields[Ea.name]=1);ba.has(Fa)||(ba.add(Fa),J.push(Ma));Ba.column=Ma;break;case "function":const {name:Ha,args:Ua}=Ba;Ba=Ua.value.length;ka&&(ka=G.isStandardized(Ha,Ba));ta&&(ta=P.isAggregate(Ha,Ba))}});return{referencedFieldNames:Array.from(J),isStandardized:ka,isAggregate:ta}};V._visitAll=function(F,J){if(null!=F)switch(J(F),F.type){case "when-clause":this._visitAll(F.operand,
J);this._visitAll(F.value,J);break;case "case-expression":for(const ba of F.clauses)this._visitAll(ba,J);"simple"===F.format&&this._visitAll(F.operand,J);null!==F.else&&this._visitAll(F.else,J);break;case "expression-list":for(const ba of F.value)this._visitAll(ba,J);break;case "unary-expression":this._visitAll(F.expr,J);break;case "binary-expression":this._visitAll(F.left,J);this._visitAll(F.right,J);break;case "function":this._visitAll(F.args,J)}};V.evaluateNodeToJavaScript=function(F){switch(F.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(F.value)+", "+JSON.stringify(F.qualifier)+","+JSON.stringify(F.op)+")";case "case-expression":var J="";if("simple"===F.format){var ba="this.makeComparable("+this.evaluateNodeToJavaScript(F.operand)+")";J="( ";for(let ka=0;ka<F.clauses.length;ka++)J+=" ("+ba+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(F.clauses[ka].operand)+")) ? ("+this.evaluateNodeToJavaScript(F.clauses[ka].value)+") : "}else for(J="( ",ba=0;ba<F.clauses.length;ba++)J+=" this.makeBool("+
this.evaluateNodeToJavaScript(F.clauses[ba].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(F.clauses[ba].value)+") : ";J=null!==F.else?J+this.evaluateNodeToJavaScript(F.else):J+"null";return J+" )";case "parameter":return"this.lookup("+JSON.stringify(F.value.toLowerCase())+",lookups)";case "expression-list":J="[";for(ba of F.value)"["!==J&&(J+=","),J+=this.evaluateNodeToJavaScript(ba);return J+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(F.expr)+
")";case "binary-expression":switch(F.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+" )";case "IS":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(F.left)+")";case "ISNOT":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(F.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(F.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(F.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(F.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(F.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+","+JSON.stringify(F.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+","+JSON.stringify(F.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(F.operator)+","+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(F.operator)+","+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")"}throw Error("Not Supported Operator "+F.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(F.value);case "date":return"(new Date("+m(F.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+p(F.value).getTime().toString()+"))";case "current-time":return"date"===F.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(F.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(F.name)+","+this.evaluateNodeToJavaScript(F.args)+")"}throw Error("Unsupported sql syntax "+F.type);};V._evaluateNode=function(F,J,ba){switch(F.type){case "interval":return J=
this._evaluateNode(F.value,J,ba),G.SqlInterval.createFromValueAndQualifer(J,F.qualifier,F.op);case "case-expression":if("simple"===F.format){var ka=B(this._evaluateNode(F.operand,J,ba));for(var ta=0;ta<F.clauses.length;ta++)if(ka===B(this._evaluateNode(F.clauses[ta].operand,J,ba)))return this._evaluateNode(F.clauses[ta].value,J,ba)}else for(ka=0;ka<F.clauses.length;ka++)if(!0===this._evaluateNode(F.clauses[ka].operand,J,ba))return this._evaluateNode(F.clauses[ka].value,J,ba);return null!==F.else?
this._evaluateNode(F.else,J,ba):null;case "parameter":return this.parameters[F.value.toLowerCase()];case "expression-list":ka=[];for(ta of F.value)ka.push(this._evaluateNode(ta,J,ba));return ka;case "unary-expression":return v(this._evaluateNode(F.expr,J,ba));case "binary-expression":switch(F.operator){case "AND":return t(this._evaluateNode(F.left,J,ba),this._evaluateNode(F.right,J,ba));case "OR":return w(this._evaluateNode(F.left,J,ba),this._evaluateNode(F.right,J,ba));case "IS":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(F.left,J,ba);case "ISNOT":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(F.left,J,ba);case "IN":return ka=r(this._evaluateNode(F.right,J,ba)),c(this._evaluateNode(F.left,J,ba),ka);case "NOT IN":return ka=r(this._evaluateNode(F.right,J,ba)),v(c(this._evaluateNode(F.left,J,ba),ka));case "BETWEEN":return ka=this._evaluateNode(F.left,J,ba),F=this._evaluateNode(F.right,J,ba),null==ka||null==F[0]||null==F[1]?null:ka>=B(F[0])&&
ka<=B(F[1]);case "NOTBETWEEN":return ka=this._evaluateNode(F.left,J,ba),F=this._evaluateNode(F.right,J,ba),null==ka||null==F[0]||null==F[1]?null:ka<B(F[0])||ka>B(F[1]);case "LIKE":return h(this._evaluateNode(F.left,J,ba),this._evaluateNode(F.right,J,ba),F.escape);case "NOT LIKE":return v(h(this._evaluateNode(F.left,J,ba),this._evaluateNode(F.right,J,ba),F.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return O(F.operator,this._evaluateNode(F.left,J,ba),
this._evaluateNode(F.right,J,ba));case "-":case "+":case "*":case "/":case "||":return x(F.operator,this._evaluateNode(F.left,J,ba),this._evaluateNode(F.right,J,ba))}case "null":case "boolean":case "string":case "number":return F.value;case "date":return m(F.value);case "timestamp":return p(F.value);case "current-time":return J=new Date,"date"===F.mode&&J.setHours(0,0,0,0),J;case "column-reference":return z(J,F.column,this._datefields,ba);case "data-type":return F.value;case "function":return J=this._evaluateNode(F.args,
J,ba),this.isAggregate?P.aggregateFunction(F.name,J):G.evaluateFunction(F.name,J)}throw Error("Unsupported sql syntax "+F.type);};b._createClass(T,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,F=>{"current-time"===F.type?this._hasDateFunctions=!0:"function"===F.type&&(this._hasDateFunctions=this._hasDateFunctions||q.has(F.name.toLowerCase()))});
return this._hasDateFunctions}}]);return T}();var K;(function(T){T[T.Normal=0]="Normal";T[T.Escaped=1]="Escaped"})(K||(K={}));const X={getAttribute(T,V){return(T&&"object"===typeof T.attributes?T.attributes:T)[V]}};d.WhereClause=g;d.defaultAttributeAdapter=X;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(d){function b(G){let E=0;for(let L=0;L<G.length;L++)E+=G[L];return E/G.length}function M(G){const E=b(G),
L=G.length;let C=0;for(const p of G)C+=(p-E)**2;return 1<L?C/(L-1):0}const P={min:{minParams:1,maxParams:1,evaluate:G=>null==G[0]?null:Math.min.apply(Math,G[0])},max:{minParams:1,maxParams:1,evaluate:G=>null==G[0]?null:Math.max.apply(Math,G[0])},avg:{minParams:1,maxParams:1,evaluate:G=>null==G[0]?null:b(G[0])},sum:{minParams:1,maxParams:1,evaluate:G=>{if(null==G[0])G=null;else{G=G[0];let E=0;for(let L=0;L<G.length;L++)E+=G[L];G=E}return G}},stddev:{minParams:1,maxParams:1,evaluate:G=>null==G[0]?null:
Math.sqrt(M(G[0]))},count:{minParams:1,maxParams:1,evaluate:G=>null==G[0]?null:G[0].length},var:{minParams:1,maxParams:1,evaluate:G=>null==G[0]?null:M(G[0])}};d.aggregateFunction=function(G,E){const L=P[G.toLowerCase()];if(null==L)throw Error("Function Not Recognised");if(E.length<L.minParams||E.length>L.maxParams)throw Error(`Invalid Parameter count for call to ${G.toUpperCase()}`);return L.evaluate(E)};d.isAggregate=function(G,E){G=P[G.toLowerCase()];return null!=G&&E>=G.minParams&&E<=G.maxParams};
Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(d,b,M,P,G){function E(m){m=new Date(m.getTime());m.setHours(0,0,0,0);return m}function L(m,r){if(m instanceof Date)return r?E(m):m;if("string"===typeof m||m instanceof String)if(m=G.DateTime.fromSQL(m),m.isValid)return r?E(m.toJSDate()):
m.toJSDate();throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);}let C=function(){function m(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}m._fixDefaults=function(r){if(null!==r.precision||null!==r.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};m._parseSecondsComponent=function(r,v){v.includes(".")?(v=v.split("."),r.second=parseFloat(v[0]),r.millis=parseInt(v[1],10)):r.second=parseFloat(v)};m.createFromMilliseconds=
function(r){const v=new m;v.second=r/1E3;return v};m.createFromValueAndQualifer=function(r,v,t){let w=null;const c=new m;c.op="-"===t?"-":"+";if("interval-period"===v.type){m._fixDefaults(v);t=RegExp("^[0-9]{1,}$");if("year"===v.period||"month"===v.period)throw Error("Year-Month Intervals not supported");if("second"===v.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(r))m._parseSecondsComponent(c,r);else throw Error("Illegal Interval");else if(t.test(r))c[v.period]=parseFloat(r);else throw Error("Illegal Interval");
}else{m._fixDefaults(v.start);m._fixDefaults(v.end);if("year"===v.start.period||"month"===v.start.period)throw Error("Year-Month Intervals not supported");if("year"===v.end.period||"month"===v.end.period)throw Error("Year-Month Intervals not supported");switch(v.start.period){case "day":switch(v.end.period){case "hour":w=RegExp("^[0-9]{1,} [0-9]{1,}$");if(w.test(r))c[v.start.period]=parseFloat(r.split(" ")[0]),c[v.end.period]=parseFloat(r.split(" ")[1]);else throw Error("Illegal Interval");break;
case "minute":w=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(w.test(r))c[v.start.period]=parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),c.hour=parseFloat(r[0]),c.minute=parseFloat(r[1]);else throw Error("Illegal Interval");break;case "second":w=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(w.test(r))c[v.start.period]=parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),c.hour=parseFloat(r[0]),c.minute=parseFloat(r[1]),m._parseSecondsComponent(c,r[2]);
else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(v.end.period){case "minute":w=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(w.test(r))c.hour=parseFloat(r.split(":")[0]),c.minute=parseFloat(r.split(":")[1]);else throw Error("Illegal Interval");break;case "second":w=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(w.test(r))r=r.split(":"),c.hour=parseFloat(r[0]),c.minute=parseFloat(r[1]),m._parseSecondsComponent(c,r[2]);else throw Error("Illegal Interval");
break;default:throw Error("Invalid Interval.");}break;case "minute":switch(v.end.period){case "second":w=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(w.test(r))r=r.split(":"),c.minute=parseFloat(r[0]),m._parseSecondsComponent(c,r[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return c};m.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+
36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return b._createClass(m)}();const p={extract:{minParams:2,maxParams:2,evaluate:([m,r])=>{if(null==r)return null;if(r instanceof Date)switch(m.toUpperCase()){case "SECOND":return r.getSeconds();case "MINUTE":return r.getMinutes();case "HOUR":return r.getHours();case "DAY":return r.getDate();case "MONTH":return r.getMonth()+1;case "YEAR":return r.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,
maxParams:3,evaluate:m=>{if(2===m.length){const [r,v]=m;return null==r||null==v?null:r.toString().substring(v-1)}if(3===m.length){const [r,v,t]=m;return null==r||null==v||null==t?null:0>=t?"":r.toString().substring(v-1,v+t-1)}}},position:{minParams:2,maxParams:2,evaluate:([m,r])=>null==m||null==r?null:r.indexOf(m)+1},trim:{minParams:2,maxParams:3,evaluate:m=>{var r=3===m.length,v=r?m[1]:" ";r=r?m[2]:m[1];if(null==v||null==r)return null;v=`(${P.escapeRegExpString(v)})`;switch(m[0]){case "BOTH":return r.replaceAll(new RegExp(`^${v}*|${v}*$`,
"g"),"");case "LEADING":return r.replaceAll(new RegExp(`^${v}*`,"g"),"");case "TRAILING":return r.replaceAll(new RegExp(`${v}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.abs(m[0])},ceiling:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.ceil(m[0])},floor:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.floor(m[0])},log:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.log(m[0])},log10:{minParams:1,
maxParams:1,evaluate:m=>null==m[0]?null:Math.log(m[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.sin(m[0])},cos:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.cos(m[0])},tan:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.tan(m[0])},asin:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.asin(m[0])},acos:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.acos(m[0])},atan:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.atan(m[0])},
sign:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:0<m[0]?1:0>m[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:m=>null==m[0]||null==m[1]?null:m[0]**m[1]},mod:{minParams:2,maxParams:2,evaluate:m=>null==m[0]||null==m[1]?null:m[0]%m[1]},round:{minParams:1,maxParams:2,evaluate:m=>{const r=m[0];m=2===m.length?10**m[1]:1;return null==r?null:Math.round(r*m)/m}},truncate:{minParams:1,maxParams:2,evaluate:m=>null==m[0]?null:1===m.length?parseInt(m[0].toFixed(0),10):parseFloat(m[0].toFixed(m[1]))},
char_length:{minParams:1,maxParams:1,evaluate:m=>"string"===typeof m[0]||m[0]instanceof String?m[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:m=>{let r="";for(let v=0;v<m.length;v++){if(null==m[v])return null;r+=m[v].toString()}return r}},lower:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:m[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:m[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:m=>{for(const r of m)if(null!==
r)return r;return null}},cosh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.cosh(m[0])},sinh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.sinh(m[0])},tanh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.tanh(m[0])},nullif:{minParams:2,maxParams:2,evaluate:m=>{const r=m[0];m=m[1];return(r instanceof Date?r.valueOf():r)===(m instanceof Date?m.valueOf():m)?null:r}},cast:{minParams:2,maxParams:2,evaluate:m=>{var r=m[0];m=m[1];if(null===r)return null;switch(m.type){case "integer":r=
parseInt(r,10);if(isNaN(r))throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);return r;case "smallint":r=parseInt(r,10);if(isNaN(r))throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);if(32767<r||-32767>r)throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);return r;case "float":case "real":r=parseFloat(r);if(isNaN(r))throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);return r;case "date":return L(r,!0);case "timestamp":return L(r,!1);case "varchar":r=r.toString();if(r.length>m.size)throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);
return r;default:throw new M.SqlError(M.SqlErrorCodes.InvalidDataType);}}}};d.SqlInterval=C;d.evaluateFunction=function(m,r){const v=p[m.toLowerCase()];if(null==v)throw Error("Function Not Recognised");if(r.length<v.minParams||r.length>v.maxParams)throw Error(`Invalid Parameter count for call to ${m.toUpperCase()}`);return v.evaluate(r)};d.isStandardized=function(m,r){m=p[m.toLowerCase()];return null!=m&&r>=m.minParams&&r<=m.maxParams};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(d,b,M){d.SqlErrorCodes=void 0;(function(C){C.InvalidFunctionParameters="InvalidFunctionParameters";C.UnsupportedSqlFunction="UnsupportedSqlFunction";C.UnsupportedOperator="UnsupportedOperator";C.UnsupportedSyntax="UnsupportedSyntax";C.UnsupportedIsRhs="UnsupportedIsRhs";C.UnsupportedIsLhs="UnsupportedIsLhs";C.InvalidDataType="InvalidDataType";C.CannotCastValue=
"CannotCastValue";C.MissingStatisticParameters="MissingStatisticParameters"})(d.SqlErrorCodes||(d.SqlErrorCodes={}));const P={[d.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[d.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[d.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[d.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[d.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",
[d.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[d.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[d.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[d.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let G=function(C){function p(m,r){m=C.call(this,M.doSubstitutions(P[m],r))||this;m.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(m),
p);return m}b._inherits(p,C);return b._createClass(p)}(b._wrapNativeSuper(Error));d.FeatureSetErrorCodes=void 0;(function(C){C.NeverReach="NeverReach";C.NotImplemented="NotImplemented";C.Cancelled="Cancelled";C.InvalidStatResponse="InvalidStatResponse";C.InvalidRequest="InvalidRequest";C.RequestFailed="RequestFailed";C.MissingFeatures="MissingFeatures";C.AggregationFieldNotFound="AggregationFieldNotFound";C.DataElementsNotFound="DataElementsNotFound"})(d.FeatureSetErrorCodes||(d.FeatureSetErrorCodes=
{}));const E={[d.FeatureSetErrorCodes.Cancelled]:"Cancelled",[d.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[d.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[d.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[d.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[d.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[d.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[d.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",
[d.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let L=function(C){function p(m,r){m=C.call(this,M.doSubstitutions(E[m],r))||this;m.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(m),p);return m}b._inherits(p,C);return b._createClass(p)}(b._wrapNativeSuper(Error));d.FeatureSetError=L;d.FeatureSetErrorMessages=E;d.SqlError=G;d.SqlErrorMessages=P;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(d,b){function M(t){return t&&t.loc?`Line : ${t.loc.start?.line}, ${t.loc.start?.column}: `:""}function P(t,w){try{if(!w)return t;for(const c in w){let h=w[c];h||(h="");t=t.replace("{"+c+"}",w[c])}}catch(c){}return t}d.ExecutionErrorCodes=void 0;(function(t){t.AsyncNotEnabled="AsyncNotEnabled";t.ModulesNotSupported="ModulesNotSupported";t.CircularModules="CircularModules";t.NeverReach="NeverReach";
t.UnsupportedHashType="UnsupportedHashType";t.InvalidParameter="InvalidParameter";t.UnexpectedToken="UnexpectedToken";t.Unrecognised="Unrecognised";t.UnrecognisedType="UnrecognisedType";t.MaximumCallDepth="MaximumCallDepth";t.BooleanConditionRequired="BooleanConditionRequired";t.TypeNotAllowedInFeature="TypeNotAllowedInFeature";t.KeyMustBeString="KeyMustBeString";t.WrongNumberOfParameters="WrongNumberOfParameters";t.CallNonFunction="CallNonFunction";t.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";
t.NoFunctionInDictionary="NoFunctionInDictionary";t.NoFunctionInArray="NoFunctionInArray";t.AssignModuleFunction="AssignModuleFunction";t.LogicExpressionOrAnd="LogicExpressionOrAnd";t.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";t.FunctionNotFound="FunctionNotFound";t.InvalidMemberAccessKey="InvalidMemberAccessKey";t.UnsupportedUnaryOperator="UnsupportUnaryOperator";t.InvalidIdentifier="InvalidIdentifier";t.MemberOfNull="MemberOfNull";t.UnsupportedOperator="UnsupportedOperator";t.Cancelled=
"Cancelled";t.ModuleAccessorMustBeString="ModuleAccessorMustBeString";t.ModuleExportNotFound="ModuleExportNotFound";t.Immutable="Immutable";t.OutOfBounds="OutOfBounds";t.IllegalResult="IllegalResult";t.FieldNotFound="FieldNotFound";t.PortalRequired="PortalRequired";t.LogicError="LogicError";t.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";t.KeyAccessorMustBeString="KeyAccessorMustBeString";t.WrongSpatialReference="WrongSpatialReference"})(d.ExecutionErrorCodes||(d.ExecutionErrorCodes={}));const G=
{[d.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[d.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[d.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[d.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[d.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[d.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",
[d.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[d.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[d.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[d.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[d.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[d.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[d.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",
[d.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[d.ExecutionErrorCodes.PortalRequired]:"Portal is required",[d.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[d.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[d.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[d.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[d.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
[d.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[d.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[d.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[d.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[d.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[d.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[d.ExecutionErrorCodes.Immutable]:"Object is immutable",
[d.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[d.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[d.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[d.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[d.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[d.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[d.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[d.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[d.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[d.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[d.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[d.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let E=function(t){function w(...c){return t.call(this,...c)||this}b._inherits(w,t);return b._createClass(w)}(b._wrapNativeSuper(Error)),L=function(t){function w(c,
h){c=t.call(this,M(h)+c.message,{cause:c})||this;c.loc=null;Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(c),w);h&&h.loc&&(c.loc=h.loc);return c}b._inherits(w,t);return b._createClass(w)}(E),C=function(t){function w(c,h,B,O){c=t.call(this,"Execution error - "+M(B)+P(G[h],O))||this;c.loc=null;c.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(c),w);B&&B.loc&&(c.loc=B.loc);return c}b._inherits(w,
t);return b._createClass(w)}(b._wrapNativeSuper(Error)),p=function(t){function w(c,h,B,O){c=t.call(this,"Compilation error - "+M(B)+P(G[h],O))||this;c.loc=null;c.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(c),w);B&&B.loc&&(c.loc=B.loc);return c}b._inherits(w,t);return b._createClass(w)}(b._wrapNativeSuper(Error)),m=function(t){function w(){var c=t.call(this,"Uncompilable code structures")||this;c.declaredRootClass=
"esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(c),w);return c}b._inherits(w,t);return b._createClass(w)}(b._wrapNativeSuper(Error));d.ModuleErrorCodes=void 0;(function(t){t.UnrecognisedUri="UnrecognisedUri";t.UnsupportedUriProtocol="UnsupportedUriProtocol"})(d.ModuleErrorCodes||(d.ModuleErrorCodes={}));const r={[d.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[d.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};
let v=function(t){function w(c,h){c=t.call(this,P(r[c],h))||this;c.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(c),w);return c}b._inherits(w,t);return b._createClass(w)}(b._wrapNativeSuper(Error));d.ArcadeCompilationError=p;d.ArcadeExecutionError=C;d.ArcadeUncompilableError=m;d.ErrorWithCause=E;d.ExecutionErrorMessages=G;d.LocatableArcadeExecutionError=L;d.ModuleError=v;d.ModuleErrorMessages=r;d.doSubstitutions=P;d.ensureArcadeExecutionError=
function(t,w,c){return"esri.arcade.arcadeexecutionerror"===c.declaredRootClass||"esri.arcade.arcadecompilationerror"===c.declaredRootClass?null===c.loc&&w&&w.loc?new L(c,{cause:c}):c:w&&w.loc?new L(c,{cause:c}):c};d.parsingValidationMessage=function(t,w,c){return"Parsing error - "+M(t)+P(G[w],c)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(d){function b(a,u={}){const U=JSON.stringify([a,u]);let fa=gd[U];fa||(fa=new Intl.ListFormat(a,
u),gd[U]=fa);return fa}function M(a,u={}){const U=JSON.stringify([a,u]);let fa=Gc[U];fa||(fa=new Intl.DateTimeFormat(a,u),Gc[U]=fa);return fa}function P(a,u={}){const U=JSON.stringify([a,u]);let fa=Hc[U];fa||(fa=new Intl.NumberFormat(a,u),Hc[U]=fa);return fa}function G(a,u={}){const {base:U,...fa}=u,ma=JSON.stringify([a,fa]);let qa=Ic[ma];qa||(qa=new Intl.RelativeTimeFormat(a,u),Ic[ma]=qa);return qa}function E(a){const u=[];for(let U=1;12>=U;U++){const fa=Za.utc(2016,U,1);u.push(a(fa))}return u}function L(a){const u=
[];for(let U=1;7>=U;U++){const fa=Za.utc(2016,11,13+U);u.push(a(fa))}return u}function C(a,u,U,fa,ma){a=a.listingMode(U);return"error"===a?null:"en"===a?fa(u):ma(u)}function p(a,u){if(m(a)||null===a)return u;if(a instanceof ic)return a;if("string"===typeof a){const U=a.toLowerCase();return"default"===U?u:"local"===U||"system"===U?mc.instance:"utc"===U||"gmt"===U?Eb.utcInstance:Eb.parseSpecifier(U)||Vb.create(a)}return r(a)?Eb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:
new me(a)}function m(a){return"undefined"===typeof a}function r(a){return"number"===typeof a}function v(a){return"number"===typeof a&&0===a%1}function t(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function w(a,u,U){if(0!==a.length)return a.reduce((fa,ma)=>{ma=[u(ma),ma];return fa?U(fa[0],ma[0])===fa[0]?fa:ma:ma},null)[1]}function c(a,u){return u.reduce((U,fa)=>{U[fa]=a[fa];return U},{})}function h(a,u){return Object.prototype.hasOwnProperty.call(a,u)}function B(a,
u,U){return v(a)&&a>=u&&a<=U}function O(a,u=2){return 0>a?"-"+(""+-a).padStart(u,"0"):(""+a).padStart(u,"0")}function x(a){if(!m(a)&&null!==a&&""!==a)return parseInt(a,10)}function z(a){if(!m(a)&&null!==a&&""!==a)return parseFloat(a)}function I(a){if(!m(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function W(a,u,U=!1){u=10**u;return(U?Math.trunc:Math.round)(a*u)/u}function N(a){return 0===a%4&&(0!==a%100||0===a%400)}function l(a,u){var U=u-1;U=U-12*Math.floor(U/12)+1;return 2===
U?N(a+(u-U)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][U-1]}function y(a){let u=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(u=new Date(u),u.setUTCFullYear(a.year,a.month-1,a.day));return+u}function q(a){var u=a-1;u=(u+Math.floor(u/4)-Math.floor(u/100)+Math.floor(u/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===u?53:52}function n(a){return 99<a?a:a>xb.twoDigitCutoffYear?1900+a:2E3+a}function g(a,u,U,fa=null){a=
new Date(a);const ma={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};fa&&(ma.timeZone=fa);return(u=(new Intl.DateTimeFormat(U,{timeZoneName:u,...ma})).formatToParts(a).find(qa=>"timezonename"===qa.type.toLowerCase()))?u.value:null}function K(a,u){a=parseInt(a,10);Number.isNaN(a)&&(a=0);u=parseInt(u,10)||0;u=0>a||Object.is(a,-0)?-u:u;return 60*a+u}function X(a){const u=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(u))throw new Aa(`Invalid unit value ${a}`);
return u}function T(a,u){const U={};for(const fa in a)if(h(a,fa)){const ma=a[fa];void 0!==ma&&null!==ma&&(U[u(fa)]=X(ma))}return U}function V(a,u){const U=Math.trunc(Math.abs(a/60)),fa=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(u){case "short":return`${a}${O(U,2)}:${O(fa,2)}`;case "narrow":return`${a}${U}${0<fa?`:${fa}`:""}`;case "techie":return`${a}${O(U,2)}${O(fa,2)}`;default:throw new RangeError(`Value format ${u} is out of range for property format`);}}function F(a){return c(a,["hour","minute",
"second","millisecond"])}function J(a){switch(a){case "narrow":return[...ne];case "short":return[...Jc];case "long":return[...oe];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function ba(a){switch(a){case "narrow":return[...pe];case "short":return[...hd];case "long":return[...Kc];case "numeric":return"1234567".split("");default:return null}}function ka(a){switch(a){case "narrow":return[...qe];
case "short":return[...re];case "long":return[...se];default:return null}}function ta(a,u,U="always",fa=!1){const ma={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var qa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===U&&qa)switch(U="days"===a,u){case 1:return U?"tomorrow":`next ${ma[a][0]}`;case -1:return U?"yesterday":`last ${ma[a][0]}`;case 0:return U?
"today":`this ${ma[a][0]}`}U=Object.is(u,-0)||0>u;u=Math.abs(u);qa=1===u;const xa=ma[a];a=fa?qa?xa[1]:xa[2]||xa[1]:qa?ma[a][0]:a;return U?`${u} ${a} ago`:`in ${u} ${a}`}function Ba(a,u){let U="";for(const fa of a)U=fa.literal?U+fa.val:U+u(fa.val);return U}function Ea(...a){a=a.reduce((u,U)=>u+U.source,"");return RegExp(`^${a}$`)}function Fa(...a){return u=>a.reduce(([U,fa,ma],qa)=>{const [xa,Ga,Na]=qa(u,ma);return[{...U,...xa},Ga||fa,Na]},[{},null,1]).slice(0,2)}function Ma(a,...u){if(null==a)return[null,
null];for(const [U,fa]of u)if(u=U.exec(a))return fa(u);return[null,null]}function Ha(...a){return(u,U)=>{const fa={};let ma;for(ma=0;ma<a.length;ma++)fa[a[ma]]=x(u[U+ma]);return[fa,null,U+ma]}}function Ua(a,u,U){a=a[u];return m(a)?U:x(a)}function Sa(a,u){return[{hours:Ua(a,u,0),minutes:Ua(a,u+1,0),seconds:Ua(a,u+2,0),milliseconds:I(a[u+3])},null,u+4]}function Va(a,u){const U=!a[u]&&!a[u+1];a=K(a[u+1],a[u+2]);return[{},U?null:Eb.instance(a),u+3]}function eb(a,u){return[{},a[u]?Vb.create(a[u]):null,
u+1]}function kb(a){const [u,U,fa,ma,qa,xa,Ga,Na,$a]=a,k="-"===u[0];a=Na&&"-"===Na[0];const ab=(Xa,zb=!1)=>void 0!==Xa&&(zb||Xa&&k)?-Xa:Xa;return[{years:ab(z(U)),months:ab(z(fa)),weeks:ab(z(ma)),days:ab(z(qa)),hours:ab(z(xa)),minutes:ab(z(Ga)),seconds:ab(z(Na),"-0"===Na),milliseconds:ab(I($a),a)}]}function jb(a,u,U,fa,ma,qa,xa){u={year:2===u.length?n(x(u)):x(u),month:Jc.indexOf(U)+1,day:x(fa),hour:x(ma),minute:x(qa)};xa&&(u.second=x(xa));a&&(u.weekday=3<a.length?Kc.indexOf(a)+1:hd.indexOf(a)+1);return u}
function db(a){const [,u,U,fa,ma,qa,xa,Ga,Na,$a,k,ab]=a;a=jb(u,ma,fa,U,qa,xa,Ga);let Xa;Xa=Na?te[Na]:$a?0:K(k,ab);return[a,new Eb(Xa)]}function f(a){const [,u,U,fa,ma,qa,xa,Ga]=a;return[jb(u,ma,fa,U,qa,xa,Ga),Eb.utcInstance]}function D(a){const [,u,U,fa,ma,qa,xa,Ga]=a;return[jb(u,Ga,U,fa,ma,qa,xa),Eb.utcInstance]}function ha(a,u,U=!1){a={values:U?u.values:{...a.values,...(u.values||{})},loc:a.loc.clone(u.loc),conversionAccuracy:u.conversionAccuracy||a.conversionAccuracy,matrix:u.matrix||a.matrix};
return new gb(a)}function Q(a,u,U,fa,ma){a=a[ma][U];var qa=u[U]/a;qa=Math.sign(qa)!==Math.sign(fa[ma])&&0!==fa[ma]&&1>=Math.abs(qa)?0>qa?Math.floor(qa):Math.ceil(qa):Math.trunc(qa);fa[ma]+=qa;u[U]-=qa*a}function ea(a,u){ue.reduce((U,fa)=>{if(m(u[fa]))return U;U&&Q(a,u,U,u,fa);return fa},null)}function A(a,u){a=u.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(gb.fromMillis(a).as("days"))}function S(a,u,U){const fa=[["years",
(Na,$a)=>$a.year-Na.year],["quarters",(Na,$a)=>$a.quarter-Na.quarter+4*($a.year-Na.year)],["months",(Na,$a)=>$a.month-Na.month+12*($a.year-Na.year)],["weeks",(Na,$a)=>{Na=A(Na,$a);return(Na-Na%7)/7}],["days",A]],ma={},qa=a;let xa,Ga;for(const [Na,$a]of fa)0<=U.indexOf(Na)&&(xa=Na,ma[Na]=$a(a,u),Ga=qa.plus(ma),Ga>u?(ma[Na]--,a=qa.plus(ma)):a=Ga);return[a,ma,Ga,xa]}function Z(a,u,U,fa){let [ma,qa,xa,Ga]=S(a,u,U);a=u-ma;U=U.filter(Na=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Na));0===
U.length&&(xa<u&&(xa=ma.plus({[Ga]:1})),xa!==ma&&(qa[Ga]=(qa[Ga]||0)+a/(xa-ma)));u=gb.fromObject(qa,fa);return 0<U.length?gb.fromMillis(a,fa).shiftTo(...U).plus(u):u}function aa({numberingSystem:a},u=""){return new RegExp(`${Lc[a||"latn"]}${u}`)}function ia(a,u=U=>U){return{regex:a,deser:([U])=>{{let fa=parseInt(U,10);if(isNaN(fa)){fa="";for(let ma=0;ma<U.length;ma++){const qa=U.charCodeAt(ma);if(-1!==U[ma].search(Lc.hanidec))fa+=ve.indexOf(U[ma]);else for(const xa in id){const [Ga,Na]=id[xa];qa>=
Ga&&qa<=Na&&(fa+=qa-Ga)}}U=parseInt(fa,10)}else U=fa}return u(U)}}}function na(a){return a.replace(/\./g,"\\.?").replace(Mc,jd)}function pa(a,u){return null===a?null:{regex:RegExp(a.map(na).join("|")),deser:([U])=>a.findIndex(fa=>U.replace(/\./g,"").replace(Mc," ").toLowerCase()===fa.replace(/\./g,"").replace(Mc," ").toLowerCase())+u}}function sa(a,u){return{regex:a,deser:([,U,fa])=>K(U,fa),groups:u}}function va(a){return{regex:a,deser:([u])=>u}}function Da(a,u){const U=aa(u),fa=aa(u,"{2}"),ma=aa(u,
"{3}"),qa=aa(u,"{4}"),xa=aa(u,"{6}"),Ga=aa(u,"{1,2}"),Na=aa(u,"{1,3}"),$a=aa(u,"{1,6}"),k=aa(u,"{1,9}"),ab=aa(u,"{2,4}"),Xa=aa(u,"{4,6}"),zb=Wb=>({regex:RegExp(Wb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([H])=>H,literal:!0}),ra=(Wb=>{if(a.literal)return zb(Wb);switch(Wb.val){case "G":return pa(u.eras("short",!1),0);case "GG":return pa(u.eras("long",!1),0);case "y":return ia($a);case "yy":return ia(ab,n);case "yyyy":return ia(qa);case "yyyyy":return ia(Xa);case "yyyyyy":return ia(xa);
case "M":return ia(Ga);case "MM":return ia(fa);case "MMM":return pa(u.months("short",!0,!1),1);case "MMMM":return pa(u.months("long",!0,!1),1);case "L":return ia(Ga);case "LL":return ia(fa);case "LLL":return pa(u.months("short",!1,!1),1);case "LLLL":return pa(u.months("long",!1,!1),1);case "d":return ia(Ga);case "dd":return ia(fa);case "o":return ia(Na);case "ooo":return ia(ma);case "HH":return ia(fa);case "H":return ia(Ga);case "hh":return ia(fa);case "h":return ia(Ga);case "mm":return ia(fa);case "m":return ia(Ga);
case "q":return ia(Ga);case "qq":return ia(fa);case "s":return ia(Ga);case "ss":return ia(fa);case "S":return ia(Na);case "SSS":return ia(ma);case "u":return va(k);case "uu":return va(Ga);case "uuu":return ia(U);case "a":return pa(u.meridiems(),0);case "kkkk":return ia(qa);case "kk":return ia(ab,n);case "W":return ia(Ga);case "WW":return ia(fa);case "E":case "c":return ia(U);case "EEE":return pa(u.weekdays("short",!1,!1),1);case "EEEE":return pa(u.weekdays("long",!1,!1),1);case "ccc":return pa(u.weekdays("short",
!0,!1),1);case "cccc":return pa(u.weekdays("long",!0,!1),1);case "Z":case "ZZ":return sa(new RegExp(`([+-]${Ga.source})(?::(${fa.source}))?`),2);case "ZZZ":return sa(new RegExp(`([+-]${Ga.source})(${fa.source})?`),2);case "z":return va(/[a-z_+-/]{1,256}?/i);case " ":return va(/[^\S\n\r]/);default:return zb(Wb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ra.token=a;return ra}function za(a){return[`^${a.map(u=>u.regex).reduce((u,U)=>`${u}(${U.source})`,"")}$`,a]}function ya(a,
u,U){if(a=a.match(u)){u={};let fa=1;for(const ma in U)if(h(U,ma)){const qa=U[ma],xa=qa.groups?qa.groups+1:1;!qa.literal&&qa.token&&(u[qa.token.val[0]]=qa.deser(a.slice(fa,fa+xa)));fa+=xa}return[a,u]}return[a,{}]}function Qa(a){const u=ma=>{switch(ma){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";
case "k":return"weekYear";case "q":return"quarter";default:return null}};let U=null,fa;m(a.z)||(U=Vb.create(a.z));m(a.Z)||(U||(U=new Eb(a.Z)),fa=a.Z);m(a.q)||(a.M=3*(a.q-1)+1);m(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);m(a.u)||(a.S=I(a.u));return[Object.keys(a).reduce((ma,qa)=>{const xa=u(qa);xa&&(ma[xa]=a[qa]);return ma},{}),U,fa]}function Ka(a,u){return Array.prototype.concat(...a.map(U=>{if(!U.literal){var fa=Ab.macroTokenToFormatOpts(U.val);fa=Pa(fa,
u);U=null==fa||fa.includes(void 0)?U:fa}return U}))}function Oa(a,u,U){U=Ka(Ab.parseFormat(U),a);var fa=U.map(Xa=>Da(Xa,a));const ma=fa.find(Xa=>Xa.invalidReason);if(ma)return{input:u,tokens:U,invalidReason:ma.invalidReason};const [qa,xa]=za(fa);fa=RegExp(qa,"i");const [Ga,Na]=ya(u,fa,xa),[$a,k,ab]=Na?Qa(Na):[null,null,void 0];if(h(Na,"a")&&h(Na,"H"))throw new oa("Can't include meridiem when specifying 24-hour format");return{input:u,tokens:U,regex:fa,rawMatches:Ga,matches:Na,result:$a,zone:k,specificOffset:ab}}
function Pa(a,u){if(!a)return null;u=Ab.create(u,a);var U=u.formatDateTimeParts;Nc||(Nc=Za.fromMillis(1555555555555));return U.call(u,Nc).map(fa=>{{const {type:qa,value:xa}=fa;if("literal"===qa)fa=/^\s+$/.test(xa),fa={literal:!fa,val:fa?" ":xa};else{fa=a[qa];var ma=we[qa];"object"===typeof ma&&(ma=ma[fa]);fa=ma?{literal:!1,val:ma}:void 0}}return fa})}function Ja(a,u){return new Rb("unit out of range",`you specified ${u} (of type ${typeof u}) as a ${a}, which is invalid`)}function Ra(a,u,U){u=new Date(Date.UTC(a,
u-1,U));100>a&&0<=a&&u.setUTCFullYear(u.getUTCFullYear()-1900);a=u.getUTCDay();return 0===a?7:a}function Wa(a,u){a=N(a)?Oc:Pc;const U=a.findIndex(fa=>fa<u);return{month:U+1,day:u-a[U]}}function ua(a){const {year:u,month:U,day:fa}=a;var ma=fa+(N(u)?Oc:Pc)[U-1];const qa=Ra(u,U,fa);ma=Math.floor((ma-qa+10)/7);let xa;1>ma?(xa=u-1,ma=q(xa)):ma>q(u)?(xa=u+1,ma=1):xa=u;return{weekYear:xa,weekNumber:ma,weekday:qa,...F(a)}}function ub(a){const {weekYear:u,weekNumber:U,weekday:fa}=a;var ma=Ra(u,1,4),qa=N(u)?
366:365;ma=7*U+fa-ma-3;1>ma?(qa=u-1,ma+=N(qa)?366:365):ma>qa?(qa=u+1,ma-=N(u)?366:365):qa=u;const {month:xa,day:Ga}=Wa(qa,ma);return{year:qa,month:xa,day:Ga,...F(a)}}function hb(a){const {year:u,month:U,day:fa}=a;var ma=fa+(N(u)?Oc:Pc)[U-1];return{year:u,ordinal:ma,...F(a)}}function lb(a){const {year:u,ordinal:U}=a,{month:fa,day:ma}=Wa(u,U);return{year:u,month:fa,day:ma,...F(a)}}function e(a){const u=v(a.year),U=B(a.month,1,12),fa=B(a.day,1,l(a.year,a.month));return u?U?fa?!1:Ja("day",a.day):Ja("month",
a.month):Ja("year",a.year)}function fb(a){const {hour:u,minute:U,second:fa,millisecond:ma}=a;a=B(u,0,23)||24===u&&0===U&&0===fa&&0===ma;const qa=B(U,0,59),xa=B(fa,0,59),Ga=B(ma,0,999);return a?qa?xa?Ga?!1:Ja("millisecond",ma):Ja("second",fa):Ja("minute",U):Ja("hour",u)}function Ob(a){return new Rb("unsupported zone",`the zone "${a.name}" is not supported`)}function Jb(a){null===a.weekData&&(a.weekData=ua(a.c));return a.weekData}function la(a,u){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};
return new Za({...a,...u,old:a})}function gc(a,u,U){let fa=a-6E4*u;const ma=U.offset(fa);if(u===ma)return[fa,u];fa-=6E4*(ma-u);u=U.offset(fa);return ma===u?[fa,ma]:[a-6E4*Math.min(ma,u),Math.max(ma,u)]}function Tb(a,u){a=new Date(a+6E4*u);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function yb(a,u,U){return gc(y(a),u,U)}function Sb(a,u){const U=a.o;var fa=a.c.year+
Math.trunc(u.years);const ma=a.c.month+Math.trunc(u.months)+3*Math.trunc(u.quarters);fa={...a.c,year:fa,month:ma,day:Math.min(a.c.day,l(fa,ma))+Math.trunc(u.days)+7*Math.trunc(u.weeks)};u=gb.fromObject({years:u.years-Math.trunc(u.years),quarters:u.quarters-Math.trunc(u.quarters),months:u.months-Math.trunc(u.months),weeks:u.weeks-Math.trunc(u.weeks),days:u.days-Math.trunc(u.days),hours:u.hours,minutes:u.minutes,seconds:u.seconds,milliseconds:u.milliseconds}).as("milliseconds");fa=y(fa);let [qa,xa]=
gc(fa,U,a.zone);0!==u&&(qa+=u,xa=a.zone.offset(qa));return{ts:qa,o:xa}}function Ub(a,u,U,fa,ma,qa){const {setZone:xa,zone:Ga}=U;return a&&0!==Object.keys(a).length||u?(a=Za.fromObject(a,{...U,zone:u||Ga,specificOffset:qa}),xa?a:a.setZone(Ga)):Za.invalid(new Rb("unparsable",`the input "${ma}" can't be parsed as ${fa}`))}function Zb(a,u,U=!0){return a.isValid?Ab.create(rb.create("en-US"),{allowZ:U,forceSimple:!0}).formatDateTimeFromString(a,u):null}function hc(a,u){const U=9999<a.c.year||0>a.c.year;
let fa="";U&&0<=a.c.year&&(fa+="+");fa+=O(a.c.year,U?6:4);u?(fa=fa+"-"+O(a.c.month),fa=fa+"-"+O(a.c.day)):(fa+=O(a.c.month),fa+=O(a.c.day));return fa}function Db(a,u,U,fa,ma,qa){let xa=O(a.c.hour);u?(xa=xa+":"+O(a.c.minute),0===a.c.second&&U||(xa+=":")):xa+=O(a.c.minute);0===a.c.second&&U||(xa+=O(a.c.second),0===a.c.millisecond&&fa||(xa=xa+"."+O(a.c.millisecond,3)));ma&&(a.isOffsetFixed&&0===a.offset&&!qa?xa+="Z":0>a.o?(xa=xa+"-"+O(Math.trunc(-a.o/60)),xa=xa+":"+O(Math.trunc(-a.o%60))):(xa=xa+"+"+
O(Math.trunc(a.o/60)),xa=xa+":"+O(Math.trunc(a.o%60))));qa&&(xa+="["+a.zone.ianaName+"]");return xa}function Pb(a){const u={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",
weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!u)throw new Ca(a);return u}function ib(a,u){const U=p(u.zone,xb.defaultZone);u=rb.fromObject(u);const fa=xb.now();var ma;if(m(a.year))a=fa;else{for(const qa of kd)m(a[qa])&&(a[qa]=ld[qa]);if(ma=e(a)||fb(a))return Za.invalid(ma);ma=U.offset(fa);[a,ma]=yb(a,ma,U)}return new Za({ts:a,zone:U,loc:u,o:ma})}function Fb(a,u,U){const fa=m(U.round)?!0:U.round,ma=(xa,Ga)=>{xa=W(xa,fa||U.calendary?0:2,!0);return u.loc.clone(U).relFormatter(U).format(xa,
Ga)},qa=xa=>U.calendary?u.hasSame(a,xa)?0:u.startOf(xa).diff(a.startOf(xa),xa).get(xa):u.diff(a,xa).get(xa);if(U.unit)return ma(qa(U.unit),U.unit);for(const xa of U.units){const Ga=qa(xa);if(1<=Math.abs(Ga))return ma(Ga,xa)}return ma(a>u?-0:0,U.units[U.units.length-1])}function Qb(a){let u={};0<a.length&&"object"===typeof a[a.length-1]?(u=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[u,a]}function Ya(a){if(Za.isDateTime(a))return a;if(a&&a.valueOf&&r(a.valueOf()))return Za.fromJSDate(a);
if(a&&"object"===typeof a)return Za.fromObject(a);throw new Aa(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Hb extends Error{}class Y extends Hb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class ja extends Hb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class ca extends Hb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class oa extends Hb{}class Ca extends Hb{constructor(a){super(`Invalid unit ${a}`)}}class Aa extends Hb{}class La extends Hb{constructor(){super("Zone is an abstract class")}}
const Ta={year:"numeric",month:"numeric",day:"numeric"},nb={year:"numeric",month:"short",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},wb={year:"numeric",month:"long",day:"numeric",weekday:"long"},Gb={hour:"numeric",minute:"numeric"},md={hour:"numeric",minute:"numeric",second:"numeric"},nd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},od={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
pd={hour:"numeric",minute:"numeric",hourCycle:"h23"},qd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},rd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},sd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},td={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},vd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},wd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xe={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},yd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},zd={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Ad={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class ic{get type(){throw new La;}get name(){throw new La;}get ianaName(){return this.name}get isUniversal(){throw new La;}offsetName(a,u){throw new La;}formatOffset(a,u){throw new La;}offset(a){throw new La;}equals(a){throw new La;}get isValid(){throw new La;}}let Qc=null;class mc extends ic{static get instance(){null===
Qc&&(Qc=new mc);return Qc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:u,locale:U}){return g(a,u,U)}formatOffset(a,u){return V(this.offset(a),u)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let nc={};const ye={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let oc={};class Vb extends ic{static create(a){oc[a]||(oc[a]=new Vb(a));return oc[a]}static resetCache(){oc=
{};nc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(u){return!1}}constructor(a){super();this.zoneName=a;this.valid=Vb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:u,locale:U}){return g(a,u,U,this.name)}formatOffset(a,u){return V(this.offset(a),u)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var u=this.name;
nc[u]||(nc[u]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:u,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));u=nc[u];if(u.formatToParts){u=u.formatToParts(a);var U=[];for(let k=0;k<u.length;k++){const {type:ab,value:Xa}=u[k],zb=ye[ab];"era"===ab?U[zb]=Xa:m(zb)||(U[zb]=parseInt(Xa,10))}u=U}else{u=u.format(a).replace(/\u200E/g,"");u=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(u);const [,k,ab,Xa,zb,ra,Wb,H]=u;u=[Xa,k,ab,zb,
ra,Wb,H]}let [fa,ma,qa,xa,Ga,Na,$a]=u;"BC"===xa&&(fa=-Math.abs(fa)+1);u=y({year:fa,month:ma,day:qa,hour:24===Ga?0:Ga,minute:Na,second:$a,millisecond:0});a=+a;U=a%1E3;return(u-(a-(0<=U?U:1E3+U)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let gd={},Gc={},Hc={},Ic={},pc=null;class ze{constructor(a,u,U){this.padTo=U.padTo||0;this.floor=U.floor||!1;const {padTo:fa,floor:ma,...qa}=U;if(!u||0<Object.keys(qa).length)u={useGrouping:!1,...U},0<U.padTo&&(u.minimumIntegerDigits=
U.padTo),this.inf=P(a,u)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):W(a,3);return O(a,this.padTo)}}class Ae{constructor(a,u,U){this.opts=U;U=this.originalZone=void 0;this.opts.timeZone?this.dt=a:"fixed"===a.zone.type?(U=a.offset/60*-1,U=0<=U?`Etc/GMT+${U}`:`Etc/GMT${U}`,0!==a.offset&&Vb.create(U).valid?this.dt=a:(U="UTC",this.dt=0===a.offset?a:a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone)):"system"===a.zone.type?this.dt=
a:"iana"===a.zone.type?(this.dt=a,U=a.zone.name):(U="UTC",this.dt=a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone);a={...this.opts};a.timeZone=a.timeZone||U;this.dtf=M(u,a)}format(){return this.originalZone?this.formatToParts().map(({value:a})=>a).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const a=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?a.map(u=>{if("timeZoneName"===u.type){const U=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,
format:this.opts.timeZoneName});return{...u,value:U}}return u}):a}resolvedOptions(){return this.dtf.resolvedOptions()}}class Be{constructor(a,u,U){this.opts={style:"long",...U};!u&&t()&&(this.rtf=G(a,U))}format(a,u){return this.rtf?this.rtf.format(a,u):ta(u,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,u){return this.rtf?this.rtf.formatToParts(a,u):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,u,U,fa=!1){a=
a||xb.defaultLocale;var ma;(ma=a)||(fa?fa="en-US":(pc||(pc=(new Intl.DateTimeFormat).resolvedOptions().locale),fa=pc),ma=fa);return new rb(ma,u||xb.defaultNumberingSystem,U||xb.defaultOutputCalendar,a)}static resetCache(){pc=null;Gc={};Hc={};Ic={}}static fromObject({locale:a,numberingSystem:u,outputCalendar:U}={}){return rb.create(a,u,U)}constructor(a,u,U,fa){var ma=a.indexOf("-x-");-1!==ma&&(a=a.substring(0,ma));ma=a.indexOf("-u-");if(-1===ma)var qa=[a];else{try{qa=M(a).resolvedOptions();var xa=
a}catch(Xa){xa=a.substring(0,ma),qa=M(xa).resolvedOptions()}const {numberingSystem:k,calendar:ab}=qa;qa=[xa,k,ab]}const [Ga,Na,$a]=qa;this.locale=Ga;this.numberingSystem=u||Na||null;this.outputCalendar=U||$a||null;u=this.locale;U=this.numberingSystem;if((qa=this.outputCalendar)||U)u.includes("-u-")||(u+="-u"),qa&&(u+=`-ca-${qa}`),U&&(u+=`-nu-${U}`);this.intl=u;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=
fa;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),u=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);
return a&&u?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,u=!1,U=!0){return C(this,a,U,J,()=>{const fa=u?{month:a,day:"numeric"}:{month:a},ma=u?"format":"standalone";this.monthsCache[ma][a]||(this.monthsCache[ma][a]=
E(qa=>this.extract(qa,fa,"month")));return this.monthsCache[ma][a]})}weekdays(a,u=!1,U=!0){return C(this,a,U,ba,()=>{const fa=u?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ma=u?"format":"standalone";this.weekdaysCache[ma][a]||(this.weekdaysCache[ma][a]=L(qa=>this.extract(qa,fa,"weekday")));return this.weekdaysCache[ma][a]})}meridiems(a=!0){return C(this,void 0,a,()=>Bd,()=>{if(!this.meridiemCache){const u={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Za.utc(2016,11,13,
9),Za.utc(2016,11,13,19)].map(U=>this.extract(U,u,"dayperiod"))}return this.meridiemCache})}eras(a,u=!0){return C(this,a,u,ka,()=>{const U={era:a};this.eraCache[a]||(this.eraCache[a]=[Za.utc(-40,1,1),Za.utc(2017,1,1)].map(fa=>this.extract(fa,U,"era")));return this.eraCache[a]})}extract(a,u,U){return(a=this.dtFormatter(a,u).formatToParts().find(fa=>fa.type.toLowerCase()===U))?a.value:null}numberFormatter(a={}){return new ze(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,u={}){return new Ae(a,
this.intl,u)}relFormatter(a={}){return new Be(this.intl,this.isEnglish(),a)}listFormatter(a={}){return b(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Rc=null;class Eb extends ic{static get utcInstance(){null===Rc&&(Rc=new Eb(0));return Rc}static instance(a){return 0===
a?Eb.utcInstance:new Eb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Eb(K(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${V(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${V(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,u){return V(this.fixed,u)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===
a.type&&a.fixed===this.fixed}get isValid(){return!0}}class me extends ic{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Sc=()=>Date.now(),Cd="system",Dd=null,Ed=null,Tc=null,Fd=60,Gd;class xb{static get now(){return Sc}static set now(a){Sc=a}static set defaultZone(a){Cd=a}static get defaultZone(){return p(Cd,
mc.instance)}static get defaultLocale(){return Dd}static set defaultLocale(a){Dd=a}static get defaultNumberingSystem(){return Ed}static set defaultNumberingSystem(a){Ed=a}static get defaultOutputCalendar(){return Tc}static set defaultOutputCalendar(a){Tc=a}static get twoDigitCutoffYear(){return Fd}static set twoDigitCutoffYear(a){Fd=a%100}static get throwOnInvalid(){return Gd}static set throwOnInvalid(a){Gd=a}static resetCaches(){rb.resetCache();Vb.resetCache()}}const oe="January February March April May June July August September October November December".split(" "),
Jc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ne="JFMAMJJASOND".split(""),Kc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),hd="Mon Tue Wed Thu Fri Sat Sun".split(" "),pe="MTWTFSS".split(""),Bd=["AM","PM"],se=["Before Christ","Anno Domini"],re=["BC","AD"],qe=["B","A"],Uc={D:Ta,DD:nb,DDD:mb,DDDD:wb,t:Gb,tt:md,ttt:nd,tttt:od,T:pd,TT:qd,TTT:rd,TTTT:sd,f:td,ff:vd,fff:xd,ffff:zd,F:ud,FF:wd,FFF:yd,FFFF:Ad};class Ab{static create(a,u={}){return new Ab(a,u)}static parseFormat(a){let u=
null,U="",fa=!1;const ma=[];for(let qa=0;qa<a.length;qa++){const xa=a.charAt(qa);"'"===xa?(0<U.length&&ma.push({literal:fa||/^\s+$/.test(U),val:U}),u=null,U="",fa=!fa):fa?U+=xa:xa===u?U+=xa:(0<U.length&&ma.push({literal:/^\s+$/.test(U),val:U}),u=U=xa)}0<U.length&&ma.push({literal:fa||/^\s+$/.test(U),val:U});return ma}static macroTokenToFormatOpts(a){return Uc[a]}constructor(a,u){this.opts=u;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,u){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());
return this.systemLoc.dtFormatter(a,{...this.opts,...u}).format()}formatDateTime(a,u={}){return this.loc.dtFormatter(a,{...this.opts,...u}).format()}formatDateTimeParts(a,u={}){return this.loc.dtFormatter(a,{...this.opts,...u}).formatToParts()}formatInterval(a,u={}){return this.loc.dtFormatter(a.start,{...this.opts,...u}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,u={}){return this.loc.dtFormatter(a,{...this.opts,...u}).resolvedOptions()}num(a,u=0){if(this.opts.forceSimple)return O(a,
u);const U={...this.opts};0<u&&(U.padTo=u);return this.loc.numberFormatter(U).format(a)}formatDateTimeFromString(a,u){const U="en"===this.loc.listingMode(),fa=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ma=(k,ab)=>this.loc.extract(a,k,ab),qa=k=>a.isOffsetFixed&&0===a.offset&&k.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,k.format):"",xa=(k,ab)=>U?J(k)[a.month-1]:ma(ab?{month:k}:{month:k,day:"numeric"},"month"),Ga=(k,ab)=>U?ba(k)[a.weekday-1]:ma(ab?{weekday:k}:{weekday:k,month:"long",
day:"numeric"},"weekday"),Na=k=>{const ab=Ab.macroTokenToFormatOpts(k);return ab?this.formatWithSystemDefault(a,ab):k},$a=k=>U?ka(k)[0>a.year?0:1]:ma({era:k},"era");return Ba(Ab.parseFormat(u),k=>{switch(k){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);
case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return qa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return qa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return qa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,
{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return U?Bd[12>a.hour?0:1]:ma({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return fa?ma({day:"numeric"},"day"):this.num(a.day);case "dd":return fa?ma({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ga("short",!0);case "cccc":return Ga("long",!0);case "ccccc":return Ga("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ga("short",!1);case "EEEE":return Ga("long",
!1);case "EEEEE":return Ga("narrow",!1);case "L":return fa?ma({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return fa?ma({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return xa("short",!0);case "LLLL":return xa("long",!0);case "LLLLL":return xa("narrow",!0);case "M":return fa?ma({month:"numeric"},"month"):this.num(a.month);case "MM":return fa?ma({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return xa("short",!1);case "MMMM":return xa("long",
!1);case "MMMMM":return xa("narrow",!1);case "y":return fa?ma({year:"numeric"},"year"):this.num(a.year);case "yy":return fa?ma({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return fa?ma({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return fa?ma({year:"numeric"},"year"):this.num(a.year,6);case "G":return $a("short");case "GG":return $a("long");case "GGGGG":return $a("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,
4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Na(k)}})}formatDurationFromString(a,u){const U=ma=>{switch(ma[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";
case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};u=Ab.parseFormat(u);const fa=u.reduce((ma,{literal:qa,val:xa})=>qa?ma:ma.concat(xa),[]);a=a.shiftTo(...fa.map(U).filter(ma=>ma));return Ba(u,(ma=>qa=>{const xa=U(qa);return xa?this.num(ma.get(xa),qa.length):qa})(a))}}class Rb{constructor(a,u){this.reason=a;this.explanation=u}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Id=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Vc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jd=RegExp(`${Vc.source}${`(?:${Id.source}?(?:\\[(${Hd.source})\\])?)?`}`),Wc=RegExp(`(?:T${Jd.source})?`),Ce=Ha("weekYear","weekNumber","weekDay"),Kd=Ha("year","ordinal"),Ld=RegExp(`${Vc.source} ?(?:${Id.source}|(${Hd.source}))?`),Md=RegExp(`(?: ${Ld.source})?`),Nd=RegExp(`^T?${Vc.source}$`),De=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
te={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ge=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
He=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Ie=Ea(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Wc),Je=Ea(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Wc),Ke=Ea(/(\d{4})-?(\d{3})/,Wc),Le=Ea(Jd),Od=Fa(function(a,u){return[{year:Ua(a,u),month:Ua(a,u+1,1),day:Ua(a,u+2,1)},null,u+3]},Sa,Va,eb),Me=Fa(Ce,Sa,Va,eb),Ne=Fa(Kd,Sa,Va,eb),Oe=Fa(Sa,Va,eb),Pe=Fa(Sa),Qe=Ea(/(\d{4})-(\d\d)-(\d\d)/,Md),Re=Ea(Ld),Se=Fa(Sa,Va,eb),Pd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Pd},Ue={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Pd},bc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ue=bc.slice(0).reverse();
class gb{constructor(a){const u="longterm"===a.conversionAccuracy||!1;let U=u?Ue:Te;a.matrix&&(U=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=u?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=U;this.isLuxonDuration=!0}static fromMillis(a,u){return gb.fromObject({milliseconds:a},u)}static fromObject(a,u={}){if(null==a||"object"!==typeof a)throw new Aa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new gb({values:T(a,
gb.normalizeUnit),loc:rb.fromObject(u),conversionAccuracy:u.conversionAccuracy,matrix:u.matrix})}static fromDurationLike(a){if(r(a))return gb.fromMillis(a);if(gb.isDuration(a))return a;if("object"===typeof a)return gb.fromObject(a);throw new Aa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,u){const [U]=Ma(a,[De,kb]);return U?gb.fromObject(U,u):gb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,u){const [U]=Ma(a,[Nd,Pe]);return U?
gb.fromObject(U,u):gb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,u=null){if(!a)throw new Aa("need to specify a reason the Duration is invalid");a=a instanceof Rb?a:new Rb(a,u);if(xb.throwOnInvalid)throw new ca(a);return new gb({invalid:a})}static normalizeUnit(a){const u={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!u)throw new Ca(a);return u}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,u={}){u={...u,floor:!1!==u.round&&!1!==u.floor};return this.isValid?Ab.create(this.loc,u).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const u=bc.map(U=>{const fa=this.values[U];return m(fa)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:U.slice(0,-1)}).format(fa)}).filter(U=>U);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(u)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=W(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var u=this.toMillis();if(0>u||864E5<=u)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
u=this.shiftTo("hours","minutes","seconds","milliseconds");let U="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===u.seconds&&0===u.milliseconds||(U+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===u.milliseconds||(U+=".SSS"));u=u.toFormat(U);a.includePrefix&&(u="T"+u);return u}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);const u=
{};for(const U of bc)if(h(a.values,U)||h(this.values,U))u[U]=a.get(U)+this.get(U);return ha(this,{values:u},!0)}minus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const u={};for(const U of Object.keys(this.values))u[U]=X(a(this.values[U],U));return ha(this,{values:u},!0)}get(a){return this[gb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...T(a,gb.normalizeUnit)};return ha(this,{values:a})}reconfigure({locale:a,
numberingSystem:u,conversionAccuracy:U,matrix:fa}={}){a={loc:this.loc.clone({locale:a,numberingSystem:u}),matrix:fa,conversionAccuracy:U};return ha(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();ea(this.matrix,a);return ha(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const u={};for(const [U,fa]of Object.entries(a))0!==fa&&(u[U]=fa);return ha(this,{values:u},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(qa=>gb.normalizeUnit(qa));const u={},U={},fa=this.toObject();let ma;for(const qa of bc)if(0<=a.indexOf(qa)){ma=qa;let xa=0;for(const Na in U)xa+=this.matrix[Na][qa]*U[Na],U[Na]=0;r(fa[qa])&&(xa+=fa[qa]);const Ga=Math.trunc(xa);u[qa]=Ga;U[qa]=(1E3*xa-1E3*Ga)/1E3;for(const Na in fa)bc.indexOf(Na)>bc.indexOf(qa)&&Q(this.matrix,fa,Na,u,qa)}else r(fa[qa])&&(U[qa]=fa[qa]);for(const qa in U)0!==U[qa]&&(u[ma]+=qa===ma?U[qa]:U[qa]/this.matrix[ma][qa]);return ha(this,{values:u},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const u of Object.keys(this.values))a[u]=0===this.values[u]?0:-this.values[u];return ha(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const fa of bc){var u=this.values[fa];var U=a.values[fa];u=void 0===u||0===u?void 0===U||0===U:u===U;if(!u)return!1}return!0}}class vb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,u=null){if(!a)throw new Aa("need to specify a reason the Interval is invalid");a=a instanceof Rb?a:new Rb(a,u);if(xb.throwOnInvalid)throw new ja(a);return new vb({invalid:a})}static fromDateTimes(a,
u){a=Ya(a);u=Ya(u);var U=a&&a.isValid?u&&u.isValid?u<a?vb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${u.toISO()}`):null:vb.invalid("missing or invalid end"):vb.invalid("missing or invalid start");return null==U?new vb({start:a,end:u}):U}static after(a,u){u=gb.fromDurationLike(u);a=Ya(a);return vb.fromDateTimes(a,a.plus(u))}static before(a,u){u=gb.fromDurationLike(u);a=Ya(a);return vb.fromDateTimes(a.minus(u),a)}static fromISO(a,
u){const [U,fa]=(a||"").split("/",2);if(U&&fa){let xa;try{var ma=Za.fromISO(U,u);xa=ma.isValid}catch(Na){xa=!1}let Ga;try{var qa=Za.fromISO(fa,u);Ga=qa.isValid}catch(Na){Ga=!1}if(xa&&Ga)return vb.fromDateTimes(ma,qa);if(xa){if(qa=gb.fromISO(fa,u),qa.isValid)return vb.after(ma,qa)}else if(Ga&&(ma=gb.fromISO(U,u),ma.isValid))return vb.before(qa,ma)}return vb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const u=this.start.startOf(a),U=this.end.startOf(a);return Math.floor(U.diff(u,a).get(a))+(U.valueOf()!==this.end.valueOf())}hasSame(a){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:u}={}){return this.isValid?vb.fromDateTimes(a||this.s,u||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Ya).filter(qa=>this.contains(qa)).sort();const u=[];let {s:U}=this,fa=0;for(;U<this.e;){var ma=a[fa]||this.e;ma=+ma>+this.e?
this.e:ma;u.push(vb.fromDateTimes(U,ma));U=ma;fa+=1}return u}splitBy(a){a=gb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:u}=this,U=1;const fa=[];for(;u<this.e;){var ma=this.start.plus(a.mapUnits(qa=>qa*U));ma=+ma>+this.e?this.e:ma;fa.push(vb.fromDateTimes(u,ma));u=ma;U+=1}return fa}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:
!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const u=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return u>=a?null:vb.fromDateTimes(u,a)}union(a){return this.isValid?vb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [u,U]=a.sort((fa,ma)=>fa.s-ma.s).reduce(([fa,ma],qa)=>
ma?ma.overlaps(qa)||ma.abutsStart(qa)?[fa,ma.union(qa)]:[fa.concat([ma]),qa]:[fa,qa],[[],null]);U&&u.push(U);return u}static xor(a){let u=null,U=0;const fa=[];a=a.map(ma=>[{time:ma.s,type:"s"},{time:ma.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ma,qa)=>ma.time-qa.time);for(const ma of a)U+="s"===ma.type?1:-1,1===U?u=ma.time:(u&&+u!==+ma.time&&fa.push(vb.fromDateTimes(u,ma.time)),u=null);return vb.merge(fa)}difference(...a){return vb.xor([this].concat(a)).map(u=>this.intersection(u)).filter(u=>
u&&!u.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Ta,u={}){return this.isValid?Ab.create(this.s.loc.clone(u),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,
{separator:u=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${u}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,u){return this.isValid?this.e.diff(this.s,a,u):gb.invalid(this.invalidReason)}mapEndpoints(a){return vb.fromDateTimes(a(this.s),a(this.e))}}class kc{static hasDST(a=xb.defaultZone){const u=Za.now().setZone(a).set({month:12});return!a.isUniversal&&u.offset!==u.set({month:6}).offset}static isValidIANAZone(a){return Vb.isValidZone(a)}static normalizeZone(a){return p(a,xb.defaultZone)}static months(a=
"long",{locale:u=null,numberingSystem:U=null,locObj:fa=null,outputCalendar:ma="gregory"}={}){return(fa||rb.create(u,U,ma)).months(a)}static monthsFormat(a="long",{locale:u=null,numberingSystem:U=null,locObj:fa=null,outputCalendar:ma="gregory"}={}){return(fa||rb.create(u,U,ma)).months(a,!0)}static weekdays(a="long",{locale:u=null,numberingSystem:U=null,locObj:fa=null}={}){return(fa||rb.create(u,U,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:u=null,numberingSystem:U=null,locObj:fa=null}=
{}){return(fa||rb.create(u,U,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:u=null}={}){return rb.create(u,null,"gregory").eras(a)}static features(){return{relative:t()}}}const Lc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},id={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ve=Lc.hanidec.replace(/[\[|\]]/g,"").split(""),jd=`[ ${String.fromCharCode(160)}]`,Mc=new RegExp(jd,"g"),we={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nc=null;const Pc=[0,31,59,90,120,151,181,212,243,273,304,334],Oc=[0,31,60,91,121,152,182,213,244,274,305,335],ld={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},We={ordinal:1,hour:0,minute:0,second:0,millisecond:0},kd="year month day hour minute second millisecond".split(" "),Xe="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ye="year ordinal hour minute second millisecond".split(" ");
class Za{constructor(a){const u=a.zone||xb.defaultZone;let U=a.invalid||(Number.isNaN(a.ts)?new Rb("invalid input"):null)||(u.isValid?null:Ob(u));this.ts=m(a.ts)?xb.now():a.ts;let fa=null;var ma=null;U||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(u)?[fa,ma]=[a.old.c,a.old.o]:(ma=u.offset(this.ts),fa=Tb(this.ts,ma),fa=(U=Number.isNaN(fa.year)?new Rb("invalid input"):null)?null:fa,ma=U?null:ma));this._zone=u;this.loc=a.loc||rb.create();this.invalid=U;this.weekData=null;this.c=fa;this.o=ma;this.isLuxonDateTime=
!0}static now(){return new Za({})}static local(){const [a,u]=Qb(arguments),[U,fa,ma,qa,xa,Ga,Na]=u;return ib({year:U,month:fa,day:ma,hour:qa,minute:xa,second:Ga,millisecond:Na},a)}static utc(){const [a,u]=Qb(arguments),[U,fa,ma,qa,xa,Ga,Na]=u;a.zone=Eb.utcInstance;return ib({year:U,month:fa,day:ma,hour:qa,minute:xa,second:Ga,millisecond:Na},a)}static fromJSDate(a,u={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Za.invalid("invalid input");const U=
p(u.zone,xb.defaultZone);return U.isValid?new Za({ts:a,zone:U,loc:rb.fromObject(u)}):Za.invalid(Ob(U))}static fromMillis(a,u={}){if(r(a))return-864E13>a||864E13<a?Za.invalid("Timestamp out of range"):new Za({ts:a,zone:p(u.zone,xb.defaultZone),loc:rb.fromObject(u)});throw new Aa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,u={}){if(r(a))return new Za({ts:1E3*a,zone:p(u.zone,xb.defaultZone),loc:rb.fromObject(u)});throw new Aa("fromSeconds requires a numerical input");
}static fromObject(a,u={}){a=a||{};var U=p(u.zone,xb.defaultZone);if(!U.isValid)return Za.invalid(Ob(U));var fa=xb.now();const ma=m(u.specificOffset)?U.offset(fa):u.specificOffset,qa=T(a,Pb);var xa=!m(qa.ordinal),Ga=!m(qa.year),Na=!m(qa.month)||!m(qa.day);Ga=Ga||Na;var $a=qa.weekYear||qa.weekNumber;u=rb.fromObject(u);if((Ga||xa)&&$a)throw new oa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Na&&xa)throw new oa("Can't mix ordinal dates with month/day");Na=$a||qa.weekday&&
!Ga;let k=Tb(fa,ma);Na?(fa=Xe,$a=Ve,k=ua(k)):xa?(fa=Ye,$a=We,k=hb(k)):(fa=kd,$a=ld);let ab=!1;for(var Xa of fa)m(qa[Xa])?qa[Xa]=ab?$a[Xa]:k[Xa]:ab=!0;Na?(Xa=v(qa.weekYear),fa=B(qa.weekNumber,1,q(qa.weekYear)),$a=B(qa.weekday,1,7),Xa=Xa?fa?$a?!1:Ja("weekday",qa.weekday):Ja("week",qa.week):Ja("weekYear",qa.weekYear)):xa?(Xa=v(qa.year),fa=B(qa.ordinal,1,N(qa.year)?366:365),Xa=Xa?fa?!1:Ja("ordinal",qa.ordinal):Ja("year",qa.year)):Xa=e(qa);if(Xa=Xa||fb(qa))return Za.invalid(Xa);xa=Na?ub(qa):xa?lb(qa):
qa;const [zb,ra]=yb(xa,ma,U);U=new Za({ts:zb,zone:U,o:ra,loc:u});return qa.weekday&&Ga&&a.weekday!==U.weekday?Za.invalid("mismatched weekday",`you can't specify both a weekday of ${qa.weekday} and a date of ${U.toISO()}`):U}static fromISO(a,u={}){const [U,fa]=Ma(a,[Ie,Od],[Je,Me],[Ke,Ne],[Le,Oe]);return Ub(U,fa,u,"ISO 8601",a)}static fromRFC2822(a,u={}){const [U,fa]=Ma(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Ee,db]);return Ub(U,fa,u,"RFC 2822",a)}static fromHTTP(a,u={}){const [U,
fa]=Ma(a,[Fe,f],[Ge,f],[He,D]);return Ub(U,fa,u,"HTTP",u)}static fromFormat(a,u,U={}){if(m(a)||m(u))throw new Aa("fromFormat requires an input string and a format");const {locale:fa=null,numberingSystem:ma=null}=U,qa=rb.fromOpts({locale:fa,numberingSystem:ma,defaultToEN:!0}),{result:xa,zone:Ga,specificOffset:Na,invalidReason:$a}=Oa(qa,a,u),[k,ab,Xa,zb]=[xa,Ga,Na,$a];return zb?Za.invalid(zb):Ub(k,ab,U,`format ${u}`,a,Xa)}static fromString(a,u,U={}){return Za.fromFormat(a,u,U)}static fromSQL(a,u={}){const [U,
fa]=Ma(a,[Qe,Od],[Re,Se]);return Ub(U,fa,u,"SQL",a)}static invalid(a,u=null){if(!a)throw new Aa("need to specify a reason the DateTime is invalid");a=a instanceof Rb?a:new Rb(a,u);if(xb.throwOnInvalid)throw new Y(a);return new Za({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,u={}){return(a=Pa(a,rb.fromObject(u)))?a.map(U=>U?U.val:null).join(""):null}static expandFormat(a,u={}){return Ka(Ab.parseFormat(a),rb.fromObject(u)).map(U=>U.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Jb(this).weekYear:NaN}get weekNumber(){return this.isValid?Jb(this).weekNumber:NaN}get weekday(){return this.isValid?Jb(this).weekday:
NaN}get ordinal(){return this.isValid?hb(this.c).ordinal:NaN}get monthShort(){return this.isValid?kc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?kc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?kc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?kc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return N(this.year)}get daysInMonth(){return l(this.year,this.month)}get daysInYear(){return this.isValid?
N(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?q(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:u,numberingSystem:U,calendar:fa}=Ab.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:u,numberingSystem:U,outputCalendar:fa}}toUTC(a=0,u={}){return this.setZone(Eb.instance(a),u)}toLocal(){return this.setZone(xb.defaultZone)}setZone(a,{keepLocalTime:u=!1,keepCalendarTime:U=!1}={}){a=p(a,xb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let fa=
this.ts;if(u||U)u=a.offset(this.ts),U=this.toObject(),[fa]=yb(U,u,a);return la(this,{ts:fa,zone:a})}return Za.invalid(Ob(a))}reconfigure({locale:a,numberingSystem:u,outputCalendar:U}={}){a=this.loc.clone({locale:a,numberingSystem:u,outputCalendar:U});return la(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=T(a,Pb);var u=!m(a.weekYear)||!m(a.weekNumber)||!m(a.weekday);const U=!m(a.ordinal),fa=!m(a.year),ma=!m(a.month)||!m(a.day),qa=a.weekYear||
a.weekNumber;if((fa||ma||U)&&qa)throw new oa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&U)throw new oa("Can't mix ordinal dates with month/day");u?u=ub({...ua(this.c),...a}):m(a.ordinal)?(u={...this.toObject(),...a},m(a.day)&&(u.day=Math.min(l(u.year,u.month),u.day))):u=lb({...hb(this.c),...a});const [xa,Ga]=yb(u,this.o,this.zone);return la(this,{ts:xa,o:Ga})}plus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);return la(this,Sb(this,a))}minus(a){if(!this.isValid)return this;
a=gb.fromDurationLike(a).negate();return la(this,Sb(this,a))}startOf(a){if(!this.isValid)return this;const u={};a=gb.normalizeUnit(a);switch(a){case "years":u.month=1;case "quarters":case "months":u.day=1;case "weeks":case "days":u.hour=0;case "hours":u.minute=0;case "minutes":u.second=0;case "seconds":u.millisecond=0}"weeks"===a&&(u.weekday=1);"quarters"===a&&(u.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(u)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
u={}){return this.isValid?Ab.create(this.loc.redefaultToEN(u)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Ta,u={}){return this.isValid?Ab.create(this.loc.clone(u),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ab.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:u=!1,suppressMilliseconds:U=!1,includeOffset:fa=!0,extendedZone:ma=!1}={}){if(!this.isValid)return null;a="extended"===a;let qa=
hc(this,a);return qa=qa+"T"+Db(this,a,u,U,fa,ma)}toISODate({format:a="extended"}={}){return this.isValid?hc(this,"extended"===a):null}toISOWeekDate(){return Zb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:u=!1,includeOffset:U=!0,includePrefix:fa=!1,extendedZone:ma=!1,format:qa="extended"}={}){return this.isValid?(fa?"T":"")+Db(this,"extended"===qa,u,a,U,ma):null}toRFC2822(){return Zb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Zb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
hc(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:u=!1,includeOffsetSpace:U=!0}={}){let fa="HH:mm:ss.SSS";if(u||a)U&&(fa+=" "),u?fa+="z":a&&(fa+="ZZ");return Zb(this,fa,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const u={...this.c};a.includeConfig&&(u.outputCalendar=this.outputCalendar,u.numberingSystem=this.loc.numberingSystem,u.locale=this.loc.locale);return u}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,u="milliseconds",U={}){if(!this.isValid||!a.isValid)return gb.invalid("created by diffing an invalid DateTime");U={locale:this.locale,numberingSystem:this.numberingSystem,...U};
const fa=(Array.isArray(u)?u:[u]).map(gb.normalizeUnit);u=a.valueOf()>this.valueOf();a=Z(u?this:a,u?a:this,fa,U);return u?a.negate():a}diffNow(a="milliseconds",u={}){return this.diff(Za.now(),a,u)}until(a){return this.isValid?vb.fromDateTimes(this,a):this}hasSame(a,u){if(!this.isValid)return!1;const U=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(u)<=U&&U<=a.endOf(u)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const u=a.base||Za.fromObject({},{zone:this.zone}),U=a.padding?this<u?-a.padding:a.padding:0;let fa="years months days hours minutes seconds".split(" "),ma=a.unit;Array.isArray(a.unit)&&(fa=a.unit,ma=void 0);return Fb(u,this.plus(U),{...a,numeric:"always",units:fa,unit:ma})}toRelativeCalendar(a={}){return this.isValid?Fb(a.base||Za.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Za.isDateTime))throw new Aa("min requires all arguments be DateTimes");
return w(a,u=>u.valueOf(),Math.min)}static max(...a){if(!a.every(Za.isDateTime))throw new Aa("max requires all arguments be DateTimes");return w(a,u=>u.valueOf(),Math.max)}static fromFormatExplain(a,u,U={}){const {locale:fa=null,numberingSystem:ma=null}=U;U=rb.fromOpts({locale:fa,numberingSystem:ma,defaultToEN:!0});return Oa(U,a,u)}static fromStringExplain(a,u,U={}){return Za.fromFormatExplain(a,u,U)}static get DATE_SHORT(){return Ta}static get DATE_MED(){return nb}static get DATE_MED_WITH_WEEKDAY(){return ob}static get DATE_FULL(){return mb}static get DATE_HUGE(){return wb}static get TIME_SIMPLE(){return Gb}static get TIME_WITH_SECONDS(){return md}static get TIME_WITH_SHORT_OFFSET(){return nd}static get TIME_WITH_LONG_OFFSET(){return od}static get TIME_24_SIMPLE(){return pd}static get TIME_24_WITH_SECONDS(){return qd}static get TIME_24_WITH_SHORT_OFFSET(){return rd}static get TIME_24_WITH_LONG_OFFSET(){return sd}static get DATETIME_SHORT(){return td}static get DATETIME_SHORT_WITH_SECONDS(){return ud}static get DATETIME_MED(){return vd}static get DATETIME_MED_WITH_SECONDS(){return wd}static get DATETIME_MED_WITH_WEEKDAY(){return xe}static get DATETIME_FULL(){return xd}static get DATETIME_FULL_WITH_SECONDS(){return yd}static get DATETIME_HUGE(){return zd}static get DATETIME_HUGE_WITH_SECONDS(){return Ad}}
d.DateTime=Za;d.Duration=gb;d.FixedOffsetZone=Eb;d.IANAZone=Vb;d.Info=kc;d.Interval=vb;d.SystemZone=mc;d.Zone=ic})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(d,b,M){var P={exports:{}};P.exports;(function(E){(function(L,C){E.exports&&(E.exports=C())})(M.commonjsGlobal,function(){function L(p,m,r,v){p=Error.call(this,p);Object.setPrototypeOf&&Object.setPrototypeOf(p,L.prototype);p.expected=m;p.found=r;
p.location=v;p.name="SyntaxError";return p}function C(p,m,r){r=r||" ";if(p.length>m)return p;m-=p.length;r+=r.repeat(m);return p+r.slice(0,m)}(function(p,m){function r(){this.constructor=p}r.prototype=m.prototype;p.prototype=new r})(L,Error);L.prototype.format=function(p){var m="Error: "+this.message;if(this.location){var r=null,v;for(v=0;v<p.length;v++)if(p[v].source===this.location.source){r=p[v].text.split(/\r\n|\n|\r/g);break}p=this.location.start;v=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(p):p;var t=this.location.source+":"+v.line+":"+v.column;if(r){var w=this.location.end,c=C("",v.line.toString().length," ");r=r[p.line-1];w=(p.line===w.line?w.column:r.length+1)-p.column||1;m+="\n --\x3e "+t+"\n"+c+" |\n"+v.line+" | "+r+"\n"+c+" | "+C("",p.column-1," ")+C("",w,"^")}else m+="\n at "+t}return m};L.buildMessage=function(p,m){function r(h){return h.charCodeAt(0).toString(16).toUpperCase()}function v(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(B){return"\\x0"+r(B)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(B){return"\\x"+r(B)})}function t(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(B){return"\\x0"+r(B)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(B){return"\\x"+r(B)})}function w(h){return c[h.type](h)}
var c={literal:function(h){return'"'+v(h.text)+'"'},class:function(h){var B=h.parts.map(function(O){return Array.isArray(O)?t(O[0])+"-"+t(O[1]):t(O)});return"["+(h.inverted?"^":"")+B.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(h){return h.description}};return"Expected "+function(h){h=h.map(w);var B,O;h.sort();if(0<h.length){for(O=B=1;B<h.length;B++)h[B-1]!==h[B]&&(h[O]=h[B],O++);h.length=O}switch(h.length){case 1:return h[0];case 2:return h[0]+
" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}(p)+" but "+(m?'"'+v(m)+'"':"end of input")+" found."};return{SyntaxError:L,parse:function(p,m){function r(H,R){return{type:"literal",text:H,ignoreCase:R}}function v(H,R,da){return{type:"class",parts:H,inverted:R,ignoreCase:da}}function t(H){var R=ab[H],da;if(!R){for(da=H-1;!ab[da];)da--;R=ab[da];for(R={line:R.line,column:R.column};da<H;)10===p.charCodeAt(da)?(R.line++,R.column=1):R.column++,da++;ab[H]=R}return R}function w(H,
R,da){var wa=t(H),Ia=t(R);H={source:fb,start:{offset:H,line:wa.line,column:wa.column},end:{offset:R,line:Ia.line,column:Ia.column}};da&&fb&&"function"===typeof fb.offset&&(H.start=fb.offset(H.start),H.end=fb.offset(H.end));return H}function c(H){k<Xa||(k>Xa&&(Xa=k,zb=[]),zb.push(H))}function h(){var H=k;ua();var R=O();R!==e?(ua(),H=R):(k=H,H=e);return H}function B(){var H=k;var R=O();if(R!==e){H=[];var da=k;var wa=ua();var Ia=Ja();if(Ia!==e){var bb=ua();var cb=O();cb!==e?da=wa=[wa,Ia,bb,cb]:(k=da,
da=e)}else k=da,da=e;for(;da!==e;)H.push(da),da=k,wa=ua(),Ia=Ja(),Ia!==e?(bb=ua(),cb=O(),cb!==e?da=wa=[wa,Ia,bb,cb]:(k=da,da=e)):(k=da,da=e);da={type:"expression-list"};R=[R];for(wa=0;wa<H.length;wa++)R.push(H[wa][3]);da.value=R;H=da}else k=H,H=e;return H}function O(){var H=k;var R=x();if(R!==e){H=[];var da=k;var wa=ua();var Ia=ea();if(Ia!==e){var bb=ua();var cb=x();cb!==e?da=wa=[wa,Ia,bb,cb]:(k=da,da=e)}else k=da,da=e;for(;da!==e;)H.push(da),da=k,wa=ua(),Ia=ea(),Ia!==e?(bb=ua(),cb=x(),cb!==e?da=
wa=[wa,Ia,bb,cb]:(k=da,da=e)):(k=da,da=e);H=lb(R,H)}else k=H,H=e;return H}function x(){var H=k;var R=z();if(R!==e){H=[];var da=k;var wa=ua();var Ia=Q();if(Ia!==e){var bb=ua();var cb=z();cb!==e?da=wa=[wa,Ia,bb,cb]:(k=da,da=e)}else k=da,da=e;for(;da!==e;)H.push(da),da=k,wa=ua(),Ia=Q(),Ia!==e?(bb=ua(),cb=z(),cb!==e?da=wa=[wa,Ia,bb,cb]:(k=da,da=e)):(k=da,da=e);H=lb(R,H)}else k=H,H=e;return H}function z(){var H=k;var R=ha();if(R===e){R=k;if(33===p.charCodeAt(k)){var da=la;k++}else da=e,0===ra&&c(ne);if(da!==
e){var wa=k;ra++;if(61===p.charCodeAt(k)){var Ia=gc;k++}else Ia=e,0===ra&&c(Kc);ra--;Ia===e?wa=void 0:(k=wa,wa=e);wa!==e?R=da=[da,wa]:(k=R,R=e)}else k=R,R=e}R!==e?(da=ua(),wa=z(),wa!==e?H={type:"unary-expression",operator:"NOT",expr:wa}:(k=H,H=e)):(k=H,H=e);if(H===e){R=k;H=l();if(H!==e){ua();R=[];da=k;wa=ua();Ia=I();if(Ia!==e){var bb=ua();var cb=l();cb!==e?da=wa=[wa,Ia,bb,cb]:(k=da,da=e)}else k=da,da=e;if(da!==e)for(;da!==e;)R.push(da),da=k,wa=ua(),Ia=I(),Ia!==e?(bb=ua(),cb=l(),cb!==e?da=wa=[wa,Ia,
bb,cb]:(k=da,da=e)):(k=da,da=e);else R=e;R!==e&&(R={type:"arithmetic",tail:R});R===e&&(R=k,da=N(),da!==e?(ua(),wa=Ra(),wa!==e?(ua(),wa=B(),wa!==e?(ua(),Ia=Wa(),Ia!==e?R={op:da,right:wa}:(k=R,R=e)):(k=R,R=e)):(k=R,R=e)):(k=R,R=e),R===e&&(R=k,da=N(),da!==e?(ua(),wa=Ra(),wa!==e?(ua(),wa=Wa(),wa!==e?R={op:da,right:{type:"expression-list",value:[]}}:(k=R,R=e)):(k=R,R=e)):(k=R,R=e),R===e&&(R=k,da=N(),da!==e?(ua(),wa=F(),wa!==e?R={op:da,right:wa}:(k=R,R=e)):(k=R,R=e))),R===e&&(R=k,Ia=ha(),Ia!==e?(ua(),da=
A(),da!==e?(ua(),wa=l(),wa!==e?(ua(),bb=Q(),bb!==e?(ua(),Ia=l(),Ia!==e?R={op:"NOT"+da,right:{type:"expression-list",value:[wa,Ia]}}:(k=R,R=e)):(k=R,R=e)):(k=R,R=e)):(k=R,R=e)):(k=R,R=e),R===e&&(R=k,Ia=A(),Ia!==e?(ua(),da=l(),da!==e?(ua(),wa=Q(),wa!==e?(ua(),bb=l(),bb!==e?R={op:Ia,right:{type:"expression-list",value:[da,bb]}}:(k=R,R=e)):(k=R,R=e)):(k=R,R=e)):(k=R,R=e)),R===e&&(R=k,da=f(),da!==e?(ua(),wa=ha(),wa!==e?(ua(),wa=l(),wa!==e?R={op:da+"NOT",right:wa}:(k=R,R=e)):(k=R,R=e)):(k=R,R=e),R===e&&
(R=k,da=f(),da!==e?(ua(),wa=l(),wa!==e?R={op:da,right:wa}:(k=R,R=e)):(k=R,R=e)),R===e&&(R=k,da=W(),da!==e?(ua(),wa=Ea(),wa!==e?(ua(),Ia=k,p.substr(k,6).toLowerCase()===ob?(bb=p.substr(k,6),k+=6):(bb=e,0===ra&&c(Od)),bb!==e?(bb=k,ra++,cb=T(),ra--,cb===e?bb=void 0:(k=bb,bb=e),bb!==e?Ia="ESCAPE":(k=Ia,Ia=e)):(k=Ia,Ia=e),Ia!==e?(ua(),Ia=Fa(),Ia!==e?R={op:da,right:wa,escape:Ia.value}:(k=R,R=e)):(k=R,R=e)):(k=R,R=e)):(k=R,R=e),R===e&&(R=k,da=W(),da!==e?(ua(),wa=Ea(),wa!==e?R={op:da,right:wa,escape:""}:
(k=R,R=e)):(k=R,R=e))))));R===e&&(R=null);""==R||void 0==R||null==R?R=H:(da=null,R=da="arithmetic"==R.type?lb(H,R.tail):hb(R.op,H,R.right,R.escape))}else k=R,R=e;H=R}return H}function I(){if(p.substr(k,2)===Tb){var H=Tb;k+=2}else H=e,0===ra&&c(hd);H===e&&(62===p.charCodeAt(k)?(H=yb,k++):(H=e,0===ra&&c(pe)),H===e&&(p.substr(k,2)===Sb?(H=Sb,k+=2):(H=e,0===ra&&c(Bd)),H===e&&(p.substr(k,2)===Ub?(H=Ub,k+=2):(H=e,0===ra&&c(se)),H===e&&(60===p.charCodeAt(k)?(H=Zb,k++):(H=e,0===ra&&c(re)),H===e&&(61===p.charCodeAt(k)?
(H=gc,k++):(H=e,0===ra&&c(Kc)),H===e&&(p.substr(k,2)===hc?(H=hc,k+=2):(H=e,0===ra&&c(qe))))))));return H}function W(){var H=H=k;var R=ha();if(R!==e){var da=ua();var wa=D();wa!==e?H=R=[R,da,wa]:(k=H,H=e)}else k=H,H=e;H!==e&&(H=H[0]+" "+H[2]);H===e&&(H=D());return H}function N(){var H=H=k;var R=ha();if(R!==e){var da=ua();var wa=db();wa!==e?H=R=[R,da,wa]:(k=H,H=e)}else k=H,H=e;H!==e&&(H=H[0]+" "+H[2]);H===e&&(H=db());return H}function l(){var H=k;var R=q();if(R!==e){H=[];var da=k;var wa=ua();var Ia=
y();if(Ia!==e){var bb=ua();var cb=q();cb!==e?da=wa=[wa,Ia,bb,cb]:(k=da,da=e)}else k=da,da=e;for(;da!==e;)H.push(da),da=k,wa=ua(),Ia=y(),Ia!==e?(bb=ua(),cb=q(),cb!==e?da=wa=[wa,Ia,bb,cb]:(k=da,da=e)):(k=da,da=e);H=lb(R,H)}else k=H,H=e;return H}function y(){if(43===p.charCodeAt(k)){var H=Db;k++}else H=e,0===ra&&c(Uc);H===e&&(45===p.charCodeAt(k)?(H=Pb,k++):(H=e,0===ra&&c(Ab)),H===e&&(p.substr(k,2)===ib?(H=ib,k+=2):(H=e,0===ra&&c(Rb))));return H}function q(){var H=k;var R=g();if(R!==e){H=[];var da=k;
var wa=ua();var Ia=n();if(Ia!==e){var bb=ua();var cb=g();cb!==e?da=wa=[wa,Ia,bb,cb]:(k=da,da=e)}else k=da,da=e;for(;da!==e;)H.push(da),da=k,wa=ua(),Ia=n(),Ia!==e?(bb=ua(),cb=g(),cb!==e?da=wa=[wa,Ia,bb,cb]:(k=da,da=e)):(k=da,da=e);H=lb(R,H)}else k=H,H=e;return H}function n(){if(42===p.charCodeAt(k)){var H=Fb;k++}else H=e,0===ra&&c(Hd);H===e&&(47===p.charCodeAt(k)?(H=Qb,k++):(H=e,0===ra&&c(Id)));return H}function g(){var H=Fa();if(H===e){var R=k;var da=k;var wa=Sa();if(wa!==e){var Ia=Va();if(Ia!==e){var bb=
eb();bb!==e?da=parseFloat(wa+Ia+bb):(k=da,da=e)}else k=da,da=e}else k=da,da=e;da===e&&(da=k,wa=Sa(),wa!==e?(Ia=Va(),Ia!==e?da=parseFloat(wa+Ia):(k=da,da=e)):(k=da,da=e),da===e&&(da=k,wa=Sa(),wa!==e?(Ia=eb(),Ia!==e?da=parseFloat(wa+Ia):(k=da,da=e)):(k=da,da=e),da===e&&(da=k,wa=Sa(),wa!==e&&(wa=parseFloat(wa)),da=wa)));var cb=da;if(cb!==e){var Qd=k;ra++;var Lf=X();ra--;Lf===e?Qd=void 0:(k=Qd,Qd=e);Qd!==e?R={type:"number",value:cb}:(k=R,R=e)}else k=R,R=e;H=R;if(H===e){var Xc=k;var qc=k;if(p.substr(k,
4).toLowerCase()===Ca){var Rd=p.substr(k,4);k+=4}else Rd=e,0===ra&&c(He);if(Rd!==e){var Yc=k;ra++;var Mf=T();ra--;Mf===e?Yc=void 0:(k=Yc,Yc=e);Yc!==e?qc=Rd=[Rd,Yc]:(k=qc,qc=e)}else k=qc,qc=e;var lc=qc;lc!==e&&(lc={type:"boolean",value:!0});Xc=lc;if(Xc===e){Xc=k;var rc=k;if(p.substr(k,5).toLowerCase()===Aa){var Sd=p.substr(k,5);k+=5}else Sd=e,0===ra&&c(Ie);if(Sd!==e){var Zc=k;ra++;var Nf=T();ra--;Nf===e?Zc=void 0:(k=Zc,Zc=e);Zc!==e?rc=Sd=[Sd,Zc]:(k=rc,rc=e)}else k=rc,rc=e;lc=rc;lc!==e&&(lc={type:"boolean",
value:!1});Xc=lc}H=Xc;if(H===e){var sc=k;if(p.substr(k,4).toLowerCase()===oa){var Td=p.substr(k,4);k+=4}else Td=e,0===ra&&c(Ge);if(Td!==e){var $c=k;ra++;var Of=T();ra--;Of===e?$c=void 0:(k=$c,$c=e);$c!==e?sc=Td=[Td,$c]:(k=sc,sc=e)}else k=sc,sc=e;var Ze=sc;Ze!==e&&(Ze={type:"null",value:null});H=Ze;if(H===e){var tc=k;if(ia()!==e){ua();var lf=Ea();lf!==e?tc={type:"date",value:lf.value}:(k=tc,tc=e)}else k=tc,tc=e;H=tc;if(H===e){var uc=k;if(aa()!==e){ua();var mf=Ea();mf!==e?uc={type:"timestamp",value:mf.value}:
(k=uc,uc=e)}else k=uc,uc=e;H=uc;if(H===e){var Bb=k;var $e=na();if($e!==e){ua();if(45===p.charCodeAt(k)){var cc=Pb;k++}else cc=e,0===ra&&c(Ab);cc===e&&(43===p.charCodeAt(k)?(cc=Db,k++):(cc=e,0===ra&&c(Uc)));if(cc!==e){ua();var ad=Ea();if(ad!==e){ua();var nf=ba();nf!==e?Bb={type:"interval",value:ad,qualifier:nf,op:cc}:(k=Bb,Bb=e)}else k=Bb,Bb=e}else k=Bb,Bb=e}else k=Bb,Bb=e;Bb===e&&(Bb=k,$e=na(),$e!==e?(ua(),cc=Ea(),cc!==e?(ua(),ad=ba(),ad!==e?Bb={type:"interval",value:cc,qualifier:ad,op:""}:(k=Bb,
Bb=e)):(k=Bb,Bb=e)):(k=Bb,Bb=e));H=Bb}}}}}}var pb=H;if(pb===e){var Kb=k;var vc=k;if(p.substr(k,7).toLowerCase()===qd){var of=p.substr(k,7);k+=7}else of=e,0===ra&&c(Pd);if(of!==e){var Ud=k;ra++;var Pf=T();ra--;Pf===e?Ud=void 0:(k=Ud,Ud=e);Ud!==e?vc="EXTRACT":(k=vc,vc=e)}else k=vc,vc=e;if(vc!==e){ua();var Qf=Ra();if(Qf!==e){ua();var Xb=pa();Xb===e&&(Xb=sa(),Xb===e&&(Xb=va(),Xb===e&&(Xb=Da(),Xb===e&&(Xb=za(),Xb===e&&(Xb=ya())))));var pf=Xb;if(pf!==e){ua();var Rf=S();if(Rf!==e){ua();var qf=O();if(qf!==
e){ua();var Sf=Wa();Sf!==e?Kb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(k=Kb,Kb=e)}else k=Kb,Kb=e}else k=Kb,Kb=e}else k=Kb,Kb=e}else k=Kb,Kb=e}else k=Kb,Kb=e;pb=Kb;if(pb===e){var Lb=k;var wc=k;if(p.substr(k,9).toLowerCase()===pd){var rf=p.substr(k,9);k+=9}else rf=e,0===ra&&c(Se);if(rf!==e){var Vd=k;ra++;var Tf=T();ra--;Tf===e?Vd=void 0:(k=Vd,Vd=e);Vd!==e?wc="SUBSTRING":(k=wc,wc=e)}else k=wc,wc=e;if(wc!==e){ua();var Uf=Ra();if(Uf!==e){ua();
var af=O();if(af!==e){ua();var Vf=S();if(Vf!==e){ua();var bf=O();if(bf!==e){ua();var dc=k;var xc=k;if(p.substr(k,3).toLowerCase()===od){var sf=p.substr(k,3);k+=3}else sf=e,0===ra&&c(Re);if(sf!==e){var Wd=k;ra++;var Wf=T();ra--;Wf===e?Wd=void 0:(k=Wd,Wd=e);Wd!==e?xc="FOR":(k=xc,xc=e)}else k=xc,xc=e;var bd=xc;if(bd!==e){var Xf=ua();var tf=O();if(tf!==e){var Yf=ua();dc=bd=[bd,Xf,tf,Yf]}else k=dc,dc=e}else k=dc,dc=e;dc===e&&(dc=null);bd=Wa();bd!==e?Lb={type:"function",name:"substring",args:{type:"expression-list",
value:dc?[af,bf,dc[2]]:[af,bf]}}:(k=Lb,Lb=e)}else k=Lb,Lb=e}else k=Lb,Lb=e}else k=Lb,Lb=e}else k=Lb,Lb=e}else k=Lb,Lb=e;pb=Lb;if(pb===e){var sb=k;var cf=Z();if(cf!==e){ua();var df=Ra();if(df!==e){ua();var ec=J();ec===e&&(ec=null);ua();var cd=O();if(cd!==e){ua();var ef=S();if(ef!==e){ua();var uf=O();if(uf!==e){ua();var Zf=Wa();Zf!==e?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ec?"BOTH":ec},cd,uf]}}:(k=sb,sb=e)}else k=sb,sb=e}else k=sb,sb=e}else k=
sb,sb=e}else k=sb,sb=e}else k=sb,sb=e;sb===e&&(sb=k,cf=Z(),cf!==e?(ua(),df=Ra(),df!==e?(ua(),ec=J(),ec===e&&(ec=null),ua(),cd=O(),cd!==e?(ua(),ef=Wa(),ef!==e?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ec?"BOTH":ec},cd]}}:(k=sb,sb=e)):(k=sb,sb=e)):(k=sb,sb=e)):(k=sb,sb=e));pb=sb;if(pb===e){var Mb=k;var yc=k;if(p.substr(k,8).toLowerCase()===sd){var vf=p.substr(k,8);k+=8}else vf=e,0===ra&&c(Ue);if(vf!==e){var Xd=k;ra++;var $f=T();ra--;$f===e?Xd=void 0:
(k=Xd,Xd=e);Xd!==e?yc="POSITION":(k=yc,yc=e)}else k=yc,yc=e;if(yc!==e){ua();var ag=Ra();if(ag!==e){ua();var wf=O();if(wf!==e){ua();var bg=db();if(bg!==e){ua();var xf=O();if(xf!==e){ua();var cg=Wa();cg!==e?Mb={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(k=Mb,Mb=e)}else k=Mb,Mb=e}else k=Mb,Mb=e}else k=Mb,Mb=e}else k=Mb,Mb=e}else k=Mb,Mb=e;pb=Mb;if(pb===e){var Nb=k;var zc=k;if(p.substr(k,4).toLowerCase()===xd){var yf=p.substr(k,4);k+=4}else yf=e,0===ra&&c(Lc);if(yf!==
e){var Yd=k;ra++;var dg=T();ra--;dg===e?Yd=void 0:(k=Yd,Yd=e);Yd!==e?zc="CAST":(k=zc,zc=e)}else k=zc,zc=e;if(zc!==e){ua();var eg=Ra();if(eg!==e){ua();var zf=O();if(zf!==e){ua();var Ac=k;if(p.substr(k,2).toLowerCase()===yd){var Af=p.substr(k,2);k+=2}else Af=e,0===ra&&c(id);if(Af!==e){var Zd=k;ra++;var fg=T();ra--;fg===e?Zd=void 0:(k=Zd,Zd=e);Zd!==e?Ac="AS":(k=Ac,Ac=e)}else k=Ac,Ac=e;var gg=Ac;if(gg!==e){ua();var qb=k;var Bc=k;if(p.substr(k,7).toLowerCase()===zd){var Bf=p.substr(k,7);k+=7}else Bf=e,
0===ra&&c(ve);if(Bf!==e){var $d=k;ra++;var hg=T();ra--;hg===e?$d=void 0:(k=$d,$d=e);$d!==e?Bc="INTEGER":(k=Bc,Bc=e)}else k=Bc,Bc=e;var tb=Bc;tb!==e&&(tb={type:"data-type",value:{type:"integer"}});qb=tb;if(qb===e){qb=k;var Cc=k;if(p.substr(k,8).toLowerCase()===Ad){var Cf=p.substr(k,8);k+=8}else Cf=e,0===ra&&c(jd);if(Cf!==e){var ae=k;ra++;var ig=T();ra--;ig===e?ae=void 0:(k=ae,ae=e);ae!==e?Cc="SMALLINT":(k=Cc,Cc=e)}else k=Cc,Cc=e;tb=Cc;tb!==e&&(tb={type:"data-type",value:{type:"smallint"}});qb=tb;if(qb===
e){qb=k;var Dc=k;if(p.substr(k,5).toLowerCase()===ic){var Df=p.substr(k,5);k+=5}else Df=e,0===ra&&c(Mc);if(Df!==e){var be=k;ra++;var jg=T();ra--;jg===e?be=void 0:(k=be,be=e);be!==e?Dc="FLOAT":(k=Dc,Dc=e)}else k=Dc,Dc=e;tb=Dc;tb!==e&&(tb={type:"data-type",value:{type:"float"}});qb=tb;if(qb===e){qb=k;var Ec=k;if(p.substr(k,4).toLowerCase()===Qc){var Ef=p.substr(k,4);k+=4}else Ef=e,0===ra&&c(we);if(Ef!==e){var ce=k;ra++;var kg=T();ra--;kg===e?ce=void 0:(k=ce,ce=e);ce!==e?Ec="REAL":(k=Ec,Ec=e)}else k=
Ec,Ec=e;tb=Ec;tb!==e&&(tb={type:"data-type",value:{type:"real"}});qb=tb;if(qb===e&&(qb=k,tb=ia(),tb!==e&&(tb={type:"data-type",value:{type:"date"}}),qb=tb,qb===e&&(qb=k,tb=aa(),tb!==e&&(tb={type:"data-type",value:{type:"timestamp"}}),qb=tb,qb===e))){qb=k;var Fc=k;if(p.substr(k,7).toLowerCase()===mc){var Ff=p.substr(k,7);k+=7}else Ff=e,0===ra&&c(Nc);if(Ff!==e){var de=k;ra++;var lg=T();ra--;lg===e?de=void 0:(k=de,de=e);de!==e?Fc="VARCHAR":(k=Fc,Fc=e)}else k=Fc,Fc=e;tb=Fc;if(tb!==e){ua();var mg=Ra();
if(mg!==e){ua();var Gf=kb();if(Gf!==e){ua();var ng=Wa();ng!==e?qb={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(k=qb,qb=e)}else k=qb,qb=e}else k=qb,qb=e}else k=qb,qb=e}}}}var Hf=qb;if(Hf!==e){ua();var og=Wa();og!==e?Nb={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(k=Nb,Nb=e)}else k=Nb,Nb=e}else k=Nb,Nb=e}else k=Nb,Nb=e}else k=Nb,Nb=e}else k=Nb,Nb=e;pb=Nb;if(pb===e){var jc=k;var ee;var Yb=k;Yb=ee=K();if(Yb===e)if(Yb=k,96===p.charCodeAt(k)?(ee=Sc,k++):(ee=
e,0===ra&&c(Na)),ee!==e){var fe=[];if(Jc.test(p.charAt(k))){var fc=p.charAt(k);k++}else fc=e,0===ra&&c($a);if(fc!==e)for(;fc!==e;)fe.push(fc),Jc.test(p.charAt(k))?(fc=p.charAt(k),k++):(fc=e,0===ra&&c($a));else fe=e;fe!==e?(96===p.charCodeAt(k)?(fc=Sc,k++):(fc=e,0===ra&&c(Na)),fc!==e?Yb=fe.join(""):(k=Yb,Yb=e)):(k=Yb,Yb=e)}else k=Yb,Yb=e;var If=Yb;if(If!==e){ua();var pg=Ra();if(pg!==e){ua();var ge=B();ge===e&&(ge=null);ua();var qg=Wa();qg!==e?jc={type:"function",name:If,args:ge?ge:{type:"expression-list",
value:[]}}:(k=jc,jc=e)}else k=jc,jc=e}else k=jc,jc=e;pb=jc;if(pb===e){var $b;var Cb=k;var ff=Qa();if(ff!==e){ua();var dd=O();if(dd!==e){ua();var ed=[];for($b=Ha();$b!==e;)ed.push($b),$b=Ha();$b=ua();var he=Ka();he!==e?Cb={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:null}:(k=Cb,Cb=e)}else k=Cb,Cb=e}else k=Cb,Cb=e;if(Cb===e)if(Cb=k,ff=Qa(),ff!==e)if(ua(),dd=O(),dd!==e){ua();ed=[];for($b=Ha();$b!==e;)ed.push($b),$b=Ha();$b=ua();he=Ua();if(he!==e){ua();var rg=Ka();rg!==e?Cb={type:"case-expression",
format:"simple",operand:dd,clauses:ed,else:he.value}:(k=Cb,Cb=e)}else k=Cb,Cb=e}else k=Cb,Cb=e;else k=Cb,Cb=e;var gf=Cb;if(gf===e){var ac;var Ib=k;var hf=Qa();if(hf!==e){ua();var fd=[];for(ac=Ma();ac!==e;)fd.push(ac),ac=Ma();ac=ua();var ie=Ka();ie!==e?Ib={type:"case-expression",format:"searched",clauses:fd,else:null}:(k=Ib,Ib=e)}else k=Ib,Ib=e;if(Ib===e)if(Ib=k,hf=Qa(),hf!==e){ua();fd=[];for(ac=Ma();ac!==e;)fd.push(ac),ac=Ma();ac=ua();ie=Ua();if(ie!==e){ua();var sg=Ka();sg!==e?Ib={type:"case-expression",
format:"searched",clauses:fd,else:ie.value}:(k=Ib,Ib=e)}else k=Ib,Ib=e}else k=Ib,Ib=e;gf=Ib}pb=gf;if(pb===e){var je;var ke=k;var Jf=X();if(Jf!==e){var Kf=[];for(je=V();je!==e;)Kf.push(je),je=V();ke=Jf+Kf.join("")}else k=ke,ke=e;var le=ke;if(le!==e){var jf=le;le=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}pb=le;if(pb===e&&(pb=F(),pb===e)){pb=k;var tg=Ra();if(tg!==e){ua();
var kf=O();if(kf!==e){ua();var ug=Wa();ug!==e?(kf.paren=!0,pb=kf):(k=pb,pb=e)}else k=pb,pb=e}else k=pb,pb=e}}}}}}}}}return pb}function K(){var H;var R=k;var da=X();if(da!==e){R=[];for(H=T();H!==e;)R.push(H),H=T();R=da+R.join("")}else k=R,R=e;return R}function X(){if(Cd.test(p.charAt(k))){var H=p.charAt(k);k++}else H=e,0===ra&&c(Vc);return H}function T(){if(Dd.test(p.charAt(k))){var H=p.charAt(k);k++}else H=e,0===ra&&c(Jd);return H}function V(){if(Ed.test(p.charAt(k))){var H=p.charAt(k);k++}else H=
e,0===ra&&c(Wc);return H}function F(){var H=k;if(64===p.charCodeAt(k)){var R=Ya;k++}else R=e,0===ra&&c(Ce);if(R!==e){var da=K();da!==e?H=R=[R,da]:(k=H,H=e)}else k=H,H=e;H!==e&&(H={type:"parameter",value:H[1]});return H}function J(){var H=k;if(p.substr(k,7).toLowerCase()===vd){var R=p.substr(k,7);k+=7}else R=e,0===ra&&c(gb);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="LEADING":(k=H,H=e)}else k=H,H=e;H===e&&(H=k,p.substr(k,8).toLowerCase()===wd?(R=p.substr(k,8),k+=8):(R=e,0===
ra&&c(vb)),R!==e?(R=k,ra++,da=T(),ra--,da===e?R=void 0:(k=R,R=e),R!==e?H="TRAILING":(k=H,H=e)):(k=H,H=e),H===e&&(H=k,p.substr(k,4).toLowerCase()===xe?(R=p.substr(k,4),k+=4):(R=e,0===ra&&c(kc)),R!==e?(R=k,ra++,da=T(),ra--,da===e?R=void 0:(k=R,R=e),R!==e?H="BOTH":(k=H,H=e)):(k=H,H=e)));return H}function ba(){var H=k;var R=k;var da=ka();if(da!==e){ua();var wa=Ra();if(wa!==e)if(ua(),wa=Ba(),wa!==e){ua();var Ia=Wa();Ia!==e?R={type:"interval-period",period:da.value,precision:wa,secondary:null}:(k=R,R=e)}else k=
R,R=e;else k=R,R=e}else k=R,R=e;R===e&&(R=k,da=ka(),da!==e&&(da={type:"interval-period",period:da.value,precision:null,secondary:null}),R=da);if(R!==e)if(ua(),da=k,p.substr(k,2).toLowerCase()===nc?(wa=p.substr(k,2),k+=2):(wa=e,0===ra&&c(Pc)),wa!==e?(wa=k,ra++,Ia=T(),ra--,Ia===e?wa=void 0:(k=wa,wa=e),wa!==e?da="TO":(k=da,da=e)):(k=da,da=e),da!==e){ua();da=k;wa=ka();wa!==e&&(wa={type:"interval-period",period:wa.value,precision:null,secondary:null});da=wa;if(da===e){da=k;wa=ya();if(wa!==e)if(ua(),wa=
Ra(),wa!==e)if(ua(),wa=Ba(),wa!==e)if(ua(),Ia=Ja(),Ia!==e)if(ua(),Ia=ta(),Ia!==e){ua();var bb=Wa();bb!==e?da={type:"interval-period",period:"second",precision:wa,secondary:Ia}:(k=da,da=e)}else k=da,da=e;else k=da,da=e;else k=da,da=e;else k=da,da=e;else k=da,da=e;da===e&&(da=k,wa=ya(),wa!==e?(ua(),wa=Ra(),wa!==e?(ua(),wa=Ba(),wa!==e?(ua(),Ia=Wa(),Ia!==e?da={type:"interval-period",period:"second",precision:wa,secondary:null}:(k=da,da=e)):(k=da,da=e)):(k=da,da=e)):(k=da,da=e),da===e&&(da=k,wa=ya(),wa!==
e&&(wa={type:"interval-period",period:"second",precision:null,secondary:null}),da=wa))}da!==e?H={type:"interval-qualifier",start:R,end:da}:(k=H,H=e)}else k=H,H=e;else k=H,H=e;H===e&&(H=k,da=ka(),da!==e?(ua(),R=Ra(),R!==e?(ua(),R=ta(),R!==e?(ua(),wa=Wa(),wa!==e?H={type:"interval-period",period:da.value,precision:R,secondary:null}:(k=H,H=e)):(k=H,H=e)):(k=H,H=e)):(k=H,H=e),H===e&&(H=k,da=ka(),da!==e&&(da={type:"interval-period",period:da.value,precision:null,secondary:null}),H=da,H===e&&(H=k,da=ya(),
da!==e?(ua(),R=Ra(),R!==e?(ua(),R=Ba(),R!==e?(ua(),wa=Ja(),wa!==e?(ua(),da=ta(),da!==e?(ua(),wa=Wa(),wa!==e?H={type:"interval-period",period:"second",precision:R,secondary:da}:(k=H,H=e)):(k=H,H=e)):(k=H,H=e)):(k=H,H=e)):(k=H,H=e)):(k=H,H=e),H===e&&(H=k,da=ya(),da!==e?(ua(),R=Ra(),R!==e?(ua(),R=ta(),R!==e?(ua(),wa=Wa(),wa!==e?H={type:"interval-period",period:"second",precision:R,secondary:null}:(k=H,H=e)):(k=H,H=e)):(k=H,H=e)):(k=H,H=e),H===e&&(H=k,da=ya(),da!==e&&(da={type:"interval-period",period:"second",
precision:null,secondary:null}),H=da)))));return H}function ka(){var H=k;H=va();H!==e&&(H={type:"string",value:"day"});H===e&&(H=k,H=Da(),H!==e&&(H={type:"string",value:"hour"}),H===e&&(H=k,H=za(),H!==e&&(H={type:"string",value:"minute"}),H===e&&(H=k,H=sa(),H!==e&&(H={type:"string",value:"month"}),H===e&&(H=k,H=pa(),H!==e&&(H={type:"string",value:"year"})))));return H}function ta(){var H=kb();H!==e&&(H=parseFloat(H));return H}function Ba(){var H=kb();H!==e&&(H=parseFloat(H));return H}function Ea(){var H=
Fa();H===e&&(H=F());return H}function Fa(){var H=k;if(39===p.charCodeAt(k)){var R=Hb;k++}else R=e,0===ra&&c(Kd);R===e&&(p.substr(k,2)===Y?(R=Y,k+=2):(R=e,0===ra&&c(Ld)));if(R!==e){R=[];var da=k;p.substr(k,2)===ja?(da=ja,k+=2):(da=e,0===ra&&c(Md));da!==e&&(da="'");da===e&&(Tc.test(p.charAt(k))?(da=p.charAt(k),k++):(da=e,0===ra&&c(Nd)));for(;da!==e;)R.push(da),da=k,p.substr(k,2)===ja?(da=ja,k+=2):(da=e,0===ra&&c(Md)),da!==e&&(da="'"),da===e&&(Tc.test(p.charAt(k))?(da=p.charAt(k),k++):(da=e,0===ra&&
c(Nd)));39===p.charCodeAt(k)?(da=Hb,k++):(da=e,0===ra&&c(Kd));da!==e?H={type:"string",value:R.join("")}:(k=H,H=e)}else k=H,H=e;return H}function Ma(){var H=k;if(Oa()!==e){ua();var R=O();if(R!==e){ua();var da=Pa();da!==e?(ua(),da=O(),da!==e?H={type:"when-clause",operand:R,value:da}:(k=H,H=e)):(k=H,H=e)}else k=H,H=e}else k=H,H=e;return H}function Ha(){var H=k;if(Oa()!==e){ua();var R=O();if(R!==e){ua();var da=Pa();da!==e?(ua(),da=O(),da!==e?H={type:"when-clause",operand:R,value:da}:(k=H,H=e)):(k=H,H=
e)}else k=H,H=e}else k=H,H=e;return H}function Ua(){var H=k;var R=k;if(p.substr(k,4).toLowerCase()===rb){var da=p.substr(k,4);k+=4}else da=e,0===ra&&c(fa);if(da!==e){da=k;ra++;var wa=T();ra--;wa===e?da=void 0:(k=da,da=e);da!==e?R="ELSE":(k=R,R=e)}else k=R,R=e;R!==e?(ua(),R=O(),R!==e?H={type:"else-clause",value:R}:(k=H,H=e)):(k=H,H=e);return H}function Sa(){var H=kb();if(H===e){H=k;if(45===p.charCodeAt(k)){var R=Pb;k++}else R=e,0===ra&&c(Ab);R===e&&(43===p.charCodeAt(k)?(R=Db,k++):(R=e,0===ra&&c(Uc)));
if(R!==e){var da=kb();da!==e?H=R[0]+da:(k=H,H=e)}else k=H,H=e}return H}function Va(){var H=k;if(46===p.charCodeAt(k)){var R=ca;k++}else R=e,0===ra&&c(De);R!==e?(H=kb(),H===e&&(H=null),H="."+(null!=H?H:"")):(k=H,H=e);return H}function eb(){var H;var R=H=k;if(Gd.test(p.charAt(k))){var da=p.charAt(k);k++}else da=e,0===ra&&c(Ee);da!==e?(xb.test(p.charAt(k))?(R=p.charAt(k),k++):(R=e,0===ra&&c(Fe)),R===e&&(R=null),R="e"+(null===R?"":R)):(k=R,R=e);R!==e?(da=kb(),da!==e?H=R+da:(k=H,H=e)):(k=H,H=e);return H}
function kb(){var H=[];var R=jb();if(R!==e)for(;R!==e;)H.push(R),R=jb();else H=e;H!==e&&(H=H.join(""));return H}function jb(){if(Fd.test(p.charAt(k))){var H=p.charAt(k);k++}else H=e,0===ra&&c(te);return H}function db(){var H=k;if(p.substr(k,2).toLowerCase()===La){var R=p.substr(k,2);k+=2}else R=e,0===ra&&c(Je);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="IN":(k=H,H=e)}else k=H,H=e;return H}function f(){var H=k;if(p.substr(k,2).toLowerCase()===Ta){var R=p.substr(k,2);k+=2}else R=
e,0===ra&&c(Ke);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="IS":(k=H,H=e)}else k=H,H=e;return H}function D(){var H=k;if(p.substr(k,4).toLowerCase()===nb){var R=p.substr(k,4);k+=4}else R=e,0===ra&&c(Le);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="LIKE":(k=H,H=e)}else k=H,H=e;return H}function ha(){var H=k;if(p.substr(k,3).toLowerCase()===mb){var R=p.substr(k,3);k+=3}else R=e,0===ra&&c(Me);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=
e);R!==e?H="NOT":(k=H,H=e)}else k=H,H=e;return H}function Q(){var H=k;if(p.substr(k,3).toLowerCase()===wb){var R=p.substr(k,3);k+=3}else R=e,0===ra&&c(Ne);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="AND":(k=H,H=e)}else k=H,H=e;return H}function ea(){var H=k;if(p.substr(k,2).toLowerCase()===Gb){var R=p.substr(k,2);k+=2}else R=e,0===ra&&c(Oe);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="OR":(k=H,H=e)}else k=H,H=e;return H}function A(){var H=k;if(p.substr(k,
7).toLowerCase()===md){var R=p.substr(k,7);k+=7}else R=e,0===ra&&c(Pe);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="BETWEEN":(k=H,H=e)}else k=H,H=e;return H}function S(){var H=k;if(p.substr(k,4).toLowerCase()===nd){var R=p.substr(k,4);k+=4}else R=e,0===ra&&c(Qe);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="FROM":(k=H,H=e)}else k=H,H=e;return H}function Z(){var H=k;if(p.substr(k,4).toLowerCase()===rd){var R=p.substr(k,4);k+=4}else R=e,0===ra&&c(Te);
if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="TRIM":(k=H,H=e)}else k=H,H=e;return H}function aa(){var H=k;if(p.substr(k,9).toLowerCase()===td){var R=p.substr(k,9);k+=9}else R=e,0===ra&&c(bc);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="TIMESTAMP":(k=H,H=e)}else k=H,H=e;return H}function ia(){var H=k;if(p.substr(k,4).toLowerCase()===ud){var R=p.substr(k,4);k+=4}else R=e,0===ra&&c(ue);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?
H="DATE":(k=H,H=e)}else k=H,H=e;return H}function na(){var H=k;if(p.substr(k,8).toLowerCase()===ye){var R=p.substr(k,8);k+=8}else R=e,0===ra&&c(Oc);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="INTERVAL":(k=H,H=e)}else k=H,H=e;return H}function pa(){var H=k;if(p.substr(k,4).toLowerCase()===oc){var R=p.substr(k,4);k+=4}else R=e,0===ra&&c(ld);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="YEAR":(k=H,H=e)}else k=H,H=e;return H}function sa(){var H=k;if(p.substr(k,
5).toLowerCase()===Vb){var R=p.substr(k,5);k+=5}else R=e,0===ra&&c(Ve);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="MONTH":(k=H,H=e)}else k=H,H=e;return H}function va(){var H=k;if(p.substr(k,3).toLowerCase()===gd){var R=p.substr(k,3);k+=3}else R=e,0===ra&&c(We);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="DAY":(k=H,H=e)}else k=H,H=e;return H}function Da(){var H=k;if(p.substr(k,4).toLowerCase()===Gc){var R=p.substr(k,4);k+=4}else R=e,0===ra&&c(kd);
if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="HOUR":(k=H,H=e)}else k=H,H=e;return H}function za(){var H=k;if(p.substr(k,6).toLowerCase()===Hc){var R=p.substr(k,6);k+=6}else R=e,0===ra&&c(Xe);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="MINUTE":(k=H,H=e)}else k=H,H=e;return H}function ya(){var H=k;if(p.substr(k,6).toLowerCase()===Ic){var R=p.substr(k,6);k+=6}else R=e,0===ra&&c(Ye);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H=
"SECOND":(k=H,H=e)}else k=H,H=e;return H}function Qa(){var H=k;if(p.substr(k,4).toLowerCase()===pc){var R=p.substr(k,4);k+=4}else R=e,0===ra&&c(Za);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="CASE":(k=H,H=e)}else k=H,H=e;return H}function Ka(){var H=k;if(p.substr(k,3).toLowerCase()===ze){var R=p.substr(k,3);k+=3}else R=e,0===ra&&c(a);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="END":(k=H,H=e)}else k=H,H=e;return H}function Oa(){var H=k;if(p.substr(k,
4).toLowerCase()===Ae){var R=p.substr(k,4);k+=4}else R=e,0===ra&&c(u);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="WHEN":(k=H,H=e)}else k=H,H=e;return H}function Pa(){var H=k;if(p.substr(k,4).toLowerCase()===Be){var R=p.substr(k,4);k+=4}else R=e,0===ra&&c(U);if(R!==e){R=k;ra++;var da=T();ra--;da===e?R=void 0:(k=R,R=e);R!==e?H="THEN":(k=H,H=e)}else k=H,H=e;return H}function Ja(){if(44===p.charCodeAt(k)){var H=Rc;k++}else H=e,0===ra&&c(ma);return H}function Ra(){if(40===p.charCodeAt(k)){var H=
Eb;k++}else H=e,0===ra&&c(qa);return H}function Wa(){if(41===p.charCodeAt(k)){var H=me;k++}else H=e,0===ra&&c(xa);return H}function ua(){var H;var R=[];for(H=ub();H!==e;)R.push(H),H=ub();return R}function ub(){if(oe.test(p.charAt(k))){var H=p.charAt(k);k++}else H=e,0===ra&&c(Ga);return H}function hb(H,R,da,wa){H={type:"binary-expression",operator:H,left:R,right:da};void 0!==wa&&(H.escape=wa);return H}function lb(H,R){for(var da=0;da<R.length;da++)H=hb(R[da][1],H,R[da][3]);return H}m=void 0!==m?m:
{};var e={},fb=m.grammarSource,Ob={start:h},Jb=h,la="!",gc="\x3d",Tb="\x3e\x3d",yb="\x3e",Sb="\x3c\x3d",Ub="\x3c\x3e",Zb="\x3c",hc="!\x3d",Db="+",Pb="-",ib="||",Fb="*",Qb="/",Ya="@",Hb="'",Y="N'",ja="''",ca=".",oa="null",Ca="true",Aa="false",La="in",Ta="is",nb="like",ob="escape",mb="not",wb="and",Gb="or",md="between",nd="from",od="for",pd="substring",qd="extract",rd="trim",sd="position",td="timestamp",ud="date",vd="leading",wd="trailing",xe="both",xd="cast",yd="as",zd="integer",Ad="smallint",ic="float",
Qc="real",mc="varchar",nc="to",ye="interval",oc="year",Vb="month",gd="day",Gc="hour",Hc="minute",Ic="second",pc="case",ze="end",Ae="when",Be="then",rb="else",Rc=",",Eb="(",me=")",Sc="`",Cd=/^[A-Za-z_\x80-\uFFFF]/,Dd=/^[A-Za-z0-9_]/,Ed=/^[A-Za-z0-9_.\x80-\uFFFF]/,Tc=/^[^']/,Fd=/^[0-9]/,Gd=/^[eE]/,xb=/^[+\-]/,oe=/^[ \t\n\r]/,Jc=/^[^`]/,ne=r("!",!1),Kc=r("\x3d",!1),hd=r("\x3e\x3d",!1),pe=r("\x3e",!1),Bd=r("\x3c\x3d",!1),se=r("\x3c\x3e",!1),re=r("\x3c",!1),qe=r("!\x3d",!1),Uc=r("+",!1),Ab=r("-",!1),Rb=
r("||",!1),Hd=r("*",!1),Id=r("/",!1),Vc=v([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Jd=v([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Wc=v([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Ce=r("@",!1),Kd=r("'",!1),Ld=r("N'",!1),Md=r("''",!1),Nd=v(["'"],!0,!1),De=r(".",!1),te=v([["0","9"]],!1,!1),Ee=v(["e","E"],!1,!1),Fe=v(["+","-"],!1,!1),Ge=r("NULL",!0),He=r("TRUE",!0),Ie=r("FALSE",!0),Je=r("IN",!0),Ke=r("IS",!0),Le=r("LIKE",!0),Od=r("ESCAPE",!0),Me=r("NOT",!0),Ne=r("AND",
!0),Oe=r("OR",!0),Pe=r("BETWEEN",!0),Qe=r("FROM",!0),Re=r("FOR",!0),Se=r("SUBSTRING",!0),Pd=r("EXTRACT",!0),Te=r("TRIM",!0),Ue=r("POSITION",!0),bc=r("TIMESTAMP",!0),ue=r("DATE",!0),gb=r("LEADING",!0),vb=r("TRAILING",!0),kc=r("BOTH",!0),Lc=r("CAST",!0),id=r("AS",!0),ve=r("INTEGER",!0),jd=r("SMALLINT",!0),Mc=r("FLOAT",!0),we=r("REAL",!0),Nc=r("VARCHAR",!0),Pc=r("TO",!0),Oc=r("INTERVAL",!0),ld=r("YEAR",!0),Ve=r("MONTH",!0),We=r("DAY",!0),kd=r("HOUR",!0),Xe=r("MINUTE",!0),Ye=r("SECOND",!0),Za=r("CASE",
!0),a=r("END",!0),u=r("WHEN",!0),U=r("THEN",!0),fa=r("ELSE",!0),ma=r(",",!1),qa=r("(",!1),xa=r(")",!1),Ga=v([" ","\t","\n","\r"],!1,!1),Na=r("`",!1),$a=v(["`"],!0,!1),k=0,ab=[{line:1,column:1}],Xa=0,zb=[],ra=0;if("startRule"in m){if(!(m.startRule in Ob))throw Error("Can't start parsing from rule \""+m.startRule+'".');Jb=Ob[m.startRule]}var Wb=Jb();if(Wb!==e&&k===p.length)return Wb;Wb!==e&&k<p.length&&c({type:"end"});throw function(H,R,da){return new L(L.buildMessage(H,R),H,R,da)}(zb,Xa<p.length?p.charAt(Xa):
null,Xa<p.length?w(Xa,Xa+1):w(Xa,Xa));}}})})(P);var G=P.exports;P=function(){function E(){}E.parse=function(L){return G.parse(L)};return b._createClass(E)}();d.WhereGrammar=P;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(d){d.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,
convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,
supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t){function w(O,x,z,I){const W=I.x-z.x;I=I.y-z.y;x=Math.min(1,Math.max(0,((x.x-z.x)*W+(x.y-z.y)*I)/(W*W+I*I)));O.x=z.x+W*x;O.y=z.y+I*x}function c(O,x){return O?x?4:3:x?3:2}let h=function(){function O(z,I,W){this.items=z;this.query=I;this.geometryType=W.geometryType;this.hasM=W.hasM;this.hasZ=W.hasZ;this.fieldsIndex=W.fieldsIndex;this.objectIdField=W.objectIdField;this.spatialReference=W.spatialReference;this.featureAdapter=W.featureAdapter}var x=O.prototype;x.createQueryResponseForCount=
function(){const z=new C(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return z.countDistinctValues(this.items);const {groupByFieldsForStatistics:I,having:W,outStatistics:N}=this.query;if(!I?.length)return 1;const l=new Map,y=new Map,q=new Set;for(const K of N){var {statisticType:n}=K;n="exceedslimit"!==n?K.onStatisticField:void 0;if(!y.has(n)){var g=[];for(const X of I){const T=this._getAttributeValues(z,X,l);g.push(T)}y.set(n,this._calculateUniqueValues(g,z.returnDistinctValues))}n=
y.get(n);for(const X in n){const {data:T,items:V}=n[X];g=T.join(",");W&&!z.validateItems(V,W)||q.add(g)}}return q.size};x.createQueryResponse=async function(){let z;z=this.query.outStatistics?this.query.outStatistics.some(I=>"exceedslimit"===I.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const I=this.query.geometry;L.isValid(this.query.outSR)&&!L.equals(I.spatialReference,
this.query.outSR)?z.queryGeometry=r.cleanFromGeometryEngine({spatialReference:this.query.outSR,...p.project(I,I.spatialReference,this.query.outSR)}):z.queryGeometry=r.cleanFromGeometryEngine({spatialReference:this.query.outSR,...I})}return z};x.createSnappingResponse=function(z,I){const W=this.featureAdapter,N=c(this.hasZ,this.hasM),{point:l,mode:y}=z,q="number"===typeof z.distance?z.distance:z.distance.x,n="number"===typeof z.distance?z.distance:z.distance.y,g={candidates:[]},K="esriGeometryPolygon"===
this.geometryType;I=this._getPointCreator(y,this.spatialReference,I);const X=new B(null,0),T=new B(null,0),V={x:0,y:0,z:0};for(const Ea of this.items){var F=W.getGeometry(Ea);if(null==F)continue;const {coords:Fa,lengths:Ma}=F;X.coords=Fa;T.coords=Fa;if(z.returnEdge){F=0;for(var J=0;J<Ma.length;J++){var ba=Ma[J];for(var ka=0;ka<ba;ka++,F+=N){var ta=X;ta.coordsIndex=F;if(ka!==ba-1){const Ha=T;Ha.coordsIndex=F+N;const Ua=V;w(V,l,ta,Ha);var Ba=(l.x-Ua.x)/q;const Sa=(l.y-Ua.y)/n;Ba=Ba*Ba+Sa*Sa;1>=Ba&&
g.candidates.push(m.makeEdgeCandidate(W.getObjectId(Ea),I(Ua),Math.sqrt(Ba),I(ta),I(Ha)))}}}}if(z.returnVertex)for(F=K?Fa.length-N:Fa.length,J=0;J<F;J+=N)ba=X,ba.coordsIndex=J,ka=(l.x-ba.x)/q,ta=(l.y-ba.y)/n,ka=ka*ka+ta*ta,1>=ka&&g.candidates.push(m.makeVertexCandidate(W.getObjectId(Ea),I(ba),Math.sqrt(ka)))}g.candidates.sort((Ea,Fa)=>Ea.distance-Fa.distance);return g};x._getPointCreator=function(z,I,W){const N=null==W||L.equals(I,W)?y=>y:y=>p.project(y,I,W),{hasZ:l}=this;return"3d"===z?l?({x:y,y:q,
z:n})=>N({x:y,y:q,z:n}):({x:y,y:q})=>N({x:y,y:q,z:0}):({x:y,y:q})=>N({x:y,y:q})};x.createSummaryStatisticsResponse=async function(z){const {field:I,valueExpression:W,normalizationField:N,normalizationType:l,normalizationTotal:y,minValue:q,maxValue:n,scale:g}=z;z=this.fieldsIndex.isDateField(I);var K=await this._getDataValues({field:I,valueExpression:W,normalizationField:N,normalizationType:l,normalizationTotal:y,scale:g});const X=t.isNullCountSupported({normalizationType:l,normalizationField:N,minValue:q,
maxValue:n}),T=this.fieldsIndex.get(I),V={value:.5,fieldType:T?.type};K=v.isStringField(T)?t.calculateStringStatistics({values:K,supportsNullCount:X,percentileParams:V}):t.calculateStatistics({values:K,minValue:q,maxValue:n,useSampleStdDev:!l,supportsNullCount:X,percentileParams:V});return t.processSummaryStatisticsResult(K,z)};x.createUniqueValuesResponse=async function(z){const {field:I,valueExpression:W,domains:N,returnAllCodedValues:l,scale:y}=z;var q=await this._getDataValues({field:I,field2:z.field2,
field3:z.field3,fieldDelimiter:z.fieldDelimiter,valueExpression:W,scale:y});q=t.calculateUniqueValuesCount(q);return t.createUVResult(q,N,l,z.fieldDelimiter)};x.createClassBreaksResponse=async function(z){const {field:I,valueExpression:W,normalizationField:N,normalizationType:l,normalizationTotal:y,classificationMethod:q,standardDeviationInterval:n,minValue:g,maxValue:K,numClasses:X,scale:T}=z;z=await this._getDataValues({field:I,valueExpression:W,normalizationField:N,normalizationType:l,normalizationTotal:y,
scale:T});z=t.calculateClassBreaks(z,{field:I,normalizationField:N,normalizationType:l,normalizationTotal:y,classificationMethod:q,standardDeviationInterval:n,minValue:g,maxValue:K,numClasses:X});return t.resolveCBResult(z,q)};x.createHistogramResponse=async function(z){const {field:I,valueExpression:W,normalizationField:N,normalizationType:l,normalizationTotal:y,classificationMethod:q,standardDeviationInterval:n,minValue:g,maxValue:K,numBins:X,scale:T}=z;z=await this._getDataValues({field:I,valueExpression:W,
normalizationField:N,normalizationType:l,normalizationTotal:y,scale:T});return t.calculateHistogram(z,{field:I,normalizationField:N,normalizationType:l,normalizationTotal:y,classificationMethod:q,standardDeviationInterval:n,minValue:g,maxValue:K,numBins:X})};x._sortFeatures=function(z,I,W){if(1<z.length&&I&&I.length)for(const N of I.reverse()){I=N.split(" ");const l=I[0],y=this.fieldsIndex.get(l);I=I[1]?"desc"===I[1].toLowerCase():!1;const q=t.getAttributeComparator(y?.type,I);z.sort((n,g)=>{n=W(n,
l,y);g=W(g,l,y);return q(n,g)})}};x._createFeatureQueryResponse=function(z){const I=this.items,{geometryType:W,hasM:N,hasZ:l,objectIdField:y,spatialReference:q}=this,{outFields:n,outSR:g,quantizationParameters:K,resultRecordCount:X,resultOffset:T,returnZ:V,returnM:F}=z,J=null!=X?I.length>(T||0)+X:!1,ba=n&&(n.includes("*")?[...this.fieldsIndex.fields]:n.map(ka=>this.fieldsIndex.get(ka)));return{exceededTransferLimit:J,features:this._createFeatures(z,I),fields:ba,geometryType:W,hasM:N&&F,hasZ:l&&V,
objectIdFieldName:y,spatialReference:r.cleanFromGeometryEngine(g||q),transform:K&&E.toQuantizationTransform(K)||null}};x._createFeatures=function(z,I){const W=new C(z,this.featureAdapter,this.fieldsIndex),{hasM:N,hasZ:l}=this,{orderByFields:y,quantizationParameters:q,returnGeometry:n,returnCentroid:g,maxAllowableOffset:K,resultOffset:X,resultRecordCount:T,returnZ:V=!1,returnM:F=!1}=z,J=l&&V,ba=N&&F;z=[];var ka=0;I=[...I];this._sortFeatures(I,y,(Ea,Fa,Ma)=>W.getFieldValue(Ea,Fa,Ma));if(n||g){var ta=
E.toQuantizationTransform(q)??void 0;if(n&&!g)for(var Ba of I)z[ka++]={attributes:W.getAttributes(Ba),geometry:r.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ba),K,ta,J,ba)};else if(!n&&g)for(const Ea of I)z[ka++]={attributes:W.getAttributes(Ea),centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(Ea,this),ta)};else for(const Ea of I)z[ka++]={attributes:W.getAttributes(Ea),centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(Ea,this),
ta),geometry:r.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ea),K,ta,J,ba)}}else for(ta of I)(Ba=W.getAttributes(ta))&&(z[ka++]={attributes:Ba});ka=X||0;null!=T&&(z=z.slice(ka,Math.min(z.length,ka+T)));return z};x._createExceedsLimitQueryResponse=function(z){var I=!1;let W=Number.POSITIVE_INFINITY,N=Number.POSITIVE_INFINITY;I=Number.POSITIVE_INFINITY;for(const l of z.outStatistics??[])if("exceedslimit"===l.statisticType){W=null!=l.maxPointCount?l.maxPointCount:
Number.POSITIVE_INFINITY;N=null!=l.maxRecordCount?l.maxRecordCount:Number.POSITIVE_INFINITY;I=null!=l.maxVertexCount?l.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)I=this.items.length>W;else if(this.items.length>N)I=!0;else{z=c(this.hasZ,this.hasM);const l=this.featureAdapter;I=this.items.reduce((y,q)=>{q=l.getGeometry(q);return y+(null!=q&&q.coords.length||0)},0)/z>I}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",
domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(I)}}]}};x._createStatisticsQueryResponse=async function(z){var I={attributes:{}};const W=[],N=new Map,l=new Map,y=new Map,q=new Map,n=new C(z,this.featureAdapter,this.fieldsIndex);var g=z.outStatistics;const {groupByFieldsForStatistics:K,having:X,orderByFields:T}=z;z=K&&K.length;const V=!!z,F=V?K[0]:null,J=V&&!this.fieldsIndex.get(F);for(const Ea of g??[]){const {outStatisticFieldName:Fa,statisticType:Ma}=Ea;g=Ea;var ba="exceedslimit"!==
Ma?Ea.onStatisticField:void 0;const Ha="percentile_disc"===Ma||"percentile_cont"===Ma,Ua="EnvelopeAggregate"===Ma||"CentroidAggregate"===Ma||"ConvexHullAggregate"===Ma,Sa=V&&1===z&&(ba===F||J)&&"count"===Ma;if(V){if(!y.has(ba)){var ka=[];for(const Va of K){var ta=this._getAttributeValues(n,Va,N);ka.push(ta)}y.set(ba,this._calculateUniqueValues(ka,Ua?!1:n.returnDistinctValues))}ka=y.get(ba);for(const Va in ka){const {count:eb,data:kb,items:jb,itemPositions:db}=ka[Va];ta=kb.join(",");if(!X||n.validateItems(jb,
X)){const f=q.get(ta)||{attributes:{}};if(Ua){f.aggregateGeometries||(f.aggregateGeometries={});const {aggregateGeometries:ha,outStatisticFieldName:Q}=await this._getAggregateGeometry(g,jb);f.aggregateGeometries[Q]=ha}else{var Ba=null;if(Sa)Ba=eb;else{const ha=this._getAttributeValues(n,ba,N);Ba=db.map(Q=>ha[Q]);Ba=Ha&&"statisticParameters"in g?this._getPercentileValue(g,Ba):this._getStatisticValue(g,Ba,null,n.returnDistinctValues)}f.attributes[Fa]=Ba}let D=0;K.forEach((ha,Q)=>f.attributes[this.fieldsIndex.get(ha)?
ha:`EXPR_${++D}`]=kb[Q]);q.set(ta,f)}}}else if(Ua){I.aggregateGeometries||(I.aggregateGeometries={});const {aggregateGeometries:Va,outStatisticFieldName:eb}=await this._getAggregateGeometry(g,this.items);I.aggregateGeometries[eb]=Va}else ba=this._getAttributeValues(n,ba,N),I.attributes[Fa]=Ha&&"statisticParameters"in g?this._getPercentileValue(g,ba):this._getStatisticValue(g,ba,l,n.returnDistinctValues);W.push({name:Fa,alias:Fa,type:"esriFieldTypeDouble"})}I=V?Array.from(q.values()):[I];this._sortFeatures(I,
T,(Ea,Fa)=>Ea.attributes[Fa]);return{fields:W,features:I}};x._getAggregateGeometry=async function(z,I){const {convexHull:W,union:N}=await new Promise((V,F)=>d(["../../../geometry/geometryEngineJSON"],V,F)),{statisticType:l,outStatisticFieldName:y}=z,{featureAdapter:q,spatialReference:n,geometryType:g,hasZ:K,hasM:X}=this;I=I.map(V=>r.getGeometry(g,K,X,q.getGeometry(V)));const T=W(n,I,!0)[0];z={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===l?(I=T?G.getPolygonExtent(T):G.getGeometryExtent(N(n,
I)),z.aggregateGeometries={...I,spatialReference:n},z.outStatisticFieldName=y||"extent"):"CentroidAggregate"===l?(I=T?P.polygonCentroid(T):P.extentCentroid(G.getGeometryExtent(N(n,I))),z.aggregateGeometries={x:I[0],y:I[1],spatialReference:n},z.outStatisticFieldName=y||"centroid"):"ConvexHullAggregate"===l&&(z.aggregateGeometries=T,z.outStatisticFieldName=y||"convexHull");return z};x._getStatisticValue=function(z,I,W,N){const {onStatisticField:l,statisticType:y}=z;z=null;z=W?.has(l)?W.get(l):v.isStringField(this.fieldsIndex.get(l))?
t.calculateStringStatistics({values:I,returnDistinct:N}):t.calculateStatistics({values:N?[...(new Set(I))]:I,minValue:null,maxValue:null,useSampleStdDev:!0});W&&W.set(l,z);return z["var"===y?"variance":y]};x._getPercentileValue=function(z,I){const {onStatisticField:W,statisticParameters:N,statisticType:l}=z,{value:y,orderBy:q}=N;z=this.fieldsIndex.get(W);return t.calculatePercentile(I,{value:y,orderBy:q,fieldType:z?.type,isDiscrete:"percentile_disc"===l})};x._getAttributeValues=function(z,I,W){if(W.has(I))return W.get(I);
const N=this.fieldsIndex.get(I),l=this.items.map(y=>z.getFieldValue(y,I,N));W.set(I,l);return l};x._calculateUniqueValues=function(z,I){const W={},N=this.items,l=N.length;for(let y=0;y<l;y++){const q=N[y],n=[];for(const K of z)n.push(K[y]);const g=n.join(",");null==W[g]?W[g]={count:1,data:n,items:[q],itemPositions:[y]}:(I||W[g].count++,W[g].items.push(q),W[g].itemPositions.push(y))}return W};x._getDataValues=async function(z){const I=new C(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:W,
scale:N}=z,l=W?{viewingMode:"map",scale:N,spatialReference:this.query.outSR||this.spatialReference}:null;return W?I.getExpressionValues(this.items,W,l,{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM}):I.getDataValues(this.items,{field:z.field,field2:z.field2,field3:z.field3,fieldDelimiter:z.fieldDelimiter,normalizationField:z.normalizationField,normalizationType:z.normalizationType,normalizationTotal:z.normalizationTotal})};M._createClass(O,[{key:"size",get:function(){return this.items.length}}]);
return O}(),B=function(){function O(x,z){this.coords=x;this.coordsIndex=z}M._createClass(O,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return O}();b.QueryEngineResult=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(d,b){function M({scale:q,
translate:n},g){return Math.round((g-n[0])/q[0])}function P({scale:q,translate:n},g){return Math.round((n[1]-g)/q[1])}function G(q,n,g){const K=[];let X,T,V,F;for(let J=0;J<g.length;J++){const ba=g[J];if(0<J){if(V=M(q,ba[0]),F=P(q,ba[1]),V!==X||F!==T)K.push(n(ba,V-X,F-T)),X=V,T=F}else X=M(q,ba[0]),T=P(q,ba[1]),K.push(n(ba,X,T))}return 0<K.length?K:null}function E(q,n,g,K){return G(q,g?K?y:l:K?l:N,n)}function L(q,n,g,K){const X=[];g=g?K?y:l:K?l:N;for(K=0;K<n.length;K++){const T=G(q,g,n[K]);T&&3<=T.length&&
X.push(T)}return X.length?X:null}function C(q,n,g,K){const X=[];g=g?K?y:l:K?l:N;for(K=0;K<n.length;K++){const T=G(q,g,n[K]);T&&2<=T.length&&X.push(T)}return X.length?X:null}function p({scale:q,translate:n},g){return g*q[0]+n[0]}function m({scale:q,translate:n},g){return n[1]-g*q[1]}function r(q,n,g){const K=Array(g.length);if(!g.length)return K;const [X,T]=q.scale;let V=p(q,g[0][0]);q=m(q,g[0][1]);K[0]=n(g[0],V,q);for(let F=1;F<g.length;F++){const J=g[F];V+=J[0]*X;q-=J[1]*T;K[F]=n(J,V,q)}return K}
function v(q,n,g){const K=Array(g.length);for(let X=0;X<g.length;X++)K[X]=r(q,n,g[X]);return K}function t(q,n,g,K){return r(q,g?K?y:l:K?l:N,n)}function w(q,n,g,K){return v(q,g?K?y:l:K?l:N,n)}function c(q,n,g,K){return v(q,g?K?y:l:K?l:N,n)}function h(q,n,g){let [K,X]=g[0],T=Math.min(K,n[0]),V=Math.min(X,n[1]),F=Math.max(K,n[2]);n=Math.max(X,n[3]);for(let J=1;J<g.length;J++){const [ba,ka]=g[J];K+=ba;X+=ka;0>ba&&(T=Math.min(T,K));0<ba&&(F=Math.max(F,K));0>ka?V=Math.min(V,X):0<ka&&(n=Math.max(n,X))}q[0]=
T;q[1]=V;q[2]=F;q[3]=n;return q}function B(q,n){if(!n.length)return null;q[0]=q[1]=Number.POSITIVE_INFINITY;q[2]=q[3]=Number.NEGATIVE_INFINITY;for(let g=0;g<n.length;g++)h(q,q,n[g]);return q}function O(q,n,g,K,X){n.xmin=M(q,g.xmin);n.ymin=P(q,g.ymin);n.xmax=M(q,g.xmax);n.ymax=P(q,g.ymax);n!==g&&(K&&(n.zmin=g.zmin,n.zmax=g.zmax),X&&(n.mmin=g.mmin,n.mmax=g.mmax));return n}function x(q,n,g,K,X){n.points=E(q,g.points,K,X)??[];return n}function z(q,n,g,K,X){n.x=M(q,g.x);n.y=P(q,g.y);n!==g&&(K&&(n.z=g.z),
X&&(n.m=g.m));return n}function I(q,n,g,K,X){q=L(q,g.rings,K,X);if(!q)return null;n.rings=q;return n}function W(q,n,g,K,X){q=C(q,g.paths,K,X);if(!q)return null;n.paths=q;return n}const N=(q,n,g)=>[n,g],l=(q,n,g)=>[n,g,q[2]],y=(q,n,g)=>[n,g,q[2],q[3]];d.equals=function(q,n){if(q===n||null==q&&null==n)return!0;if(null==q||null==n)return!1;let g,K,X,T;q&&"upperLeft"===q.originPosition?(g=q.translate[0],K=q.translate[1],q=q.scale[0]):(g=null!=q.extent?q.extent.xmin:0,K=null!=q.extent?q.extent.ymax:0,
q=q.tolerance);n&&"upperLeft"===n.originPosition?(X=n.translate[0],T=n.translate[1],n=n.scale[0]):(X=null!=n.extent?n.extent.xmin:0,T=null!=n.extent?n.extent.ymax:0,n=n.tolerance);return g===X&&K===T&&q===n};d.getQuantizedBoundsCoordsArray=h;d.getQuantizedBoundsCoordsArrayArray=B;d.getQuantizedBoundsPaths=function(q){return B([0,0,0,0],q)};d.getQuantizedBoundsPoints=function(q){const n=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return h(n,
n,q)};d.getQuantizedBoundsRings=function(q){return B([0,0,0,0],q)};d.quantizeBounds=function(q,n,g){n[0]=M(q,g[0]);n[3]=P(q,g[1]);n[2]=M(q,g[2]);n[1]=P(q,g[3]);return n};d.quantizeExtent=O;d.quantizeGeometry=function(q,n){return q&&n?b.isPoint(n)?z(q,{},n,!1,!1):b.isPolyline(n)?W(q,{},n,!1,!1):b.isPolygon(n)?I(q,{},n,!1,!1):b.isMultipoint(n)?x(q,{},n,!1,!1):b.isExtent(n)?O(q,{},n,!1,!1):null:null};d.quantizeMultipoint=x;d.quantizePaths=C;d.quantizePoint=z;d.quantizePoints=E;d.quantizePolygon=I;d.quantizePolyline=
W;d.quantizeRings=L;d.quantizeX=M;d.quantizeY=P;d.toQuantizationTransform=function(q){return q?{originPosition:"upper-left"===q.originPosition?"upperLeft":"lower-left"===q.originPosition?"lowerLeft":q.originPosition,scale:q.tolerance?[q.tolerance,q.tolerance]:[1,1],translate:null!=q.extent?[q.extent.xmin,q.extent.ymax]:[0,0]}:null};d.unquantizeBounds=function(q,n,g){return g?(n[0]=p(q,g[0]),n[1]=m(q,g[3]),n[2]=p(q,g[2]),n[3]=m(q,g[1]),n):[p(q,n[0]),m(q,n[3]),p(q,n[2]),m(q,n[1])]};d.unquantizeCoordsArray=
r;d.unquantizeCoordsArrayArray=v;d.unquantizeExtent=function(q,n,g,K,X){n.xmin=p(q,g.xmin);n.ymin=m(q,g.ymin);n.xmax=p(q,g.xmax);n.ymax=m(q,g.ymax);n!==g&&(K&&(n.zmin=g.zmin,n.zmax=g.zmax),X&&(n.mmin=g.mmin,n.mmax=g.mmax));return n};d.unquantizeMultipoint=function(q,n,g,K,X){null!=g&&(n.points=t(q,g.points,K,X));return n};d.unquantizePaths=w;d.unquantizePoint=function(q,n,g,K,X){if(null==g)return n;n.x=p(q,g.x);n.y=m(q,g.y);n!==g&&(K&&(n.z=g.z),X&&(n.m=g.m));return n};d.unquantizePoints=t;d.unquantizePolygon=
function(q,n,g,K,X){null!=g&&(n.rings=c(q,g.rings,K,X));return n};d.unquantizePolyline=function(q,n,g,K,X){null!=g&&(n.paths=w(q,g.paths,K,X));return n};d.unquantizeRings=c;d.unquantizeX=p;d.unquantizeY=m;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers","./attributeSupport","./utils","../../../statistics/utils","../../../support/arcadeOnDemand"],function(d,b,M,P,G){return function(){function E(C,
p,m){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=C.returnDistinctValues??!1;this.fieldsIndex=m;this.featureAdapter=p;if((p=C.outFields)&&!p.includes("*")){this.outFields=p;C=0;for(const v of p){var r=b.getExpressionFromFieldName(v);r=(p=this.fieldsIndex.get(r))?null:b.getWhereClause(r,m);p=p?p.name:b.getAliasFromFieldName(v)||`FIELD_EXP_${C++}`;this._fieldDataCache.set(v,{alias:p,clause:r})}}}var L=E.prototype;L.countDistinctValues=function(C){if(!this.returnDistinctValues)return C.length;
C.forEach(p=>this.getAttributes(p));return this._returnDistinctMap.size};L.getAttributes=function(C){C=this._processAttributesForOutFields(C);return this._processAttributesForDistinctValues(C)};L.getFieldValue=function(C,p,m){const r=m?m.name:p;let v=null;this._fieldDataCache.has(r)?v=this._fieldDataCache.get(r)?.clause:m||(v=b.getWhereClause(p,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:v}));return m?this.featureAdapter.getAttribute(C,r):v?.calculateValue(C,this.featureAdapter)};
L.getDataValues=function(C,p){const m=p.normalizationType,r=p.normalizationTotal;return C.map(v=>{let t=p.field&&this.getFieldValue(v,p.field,this.fieldsIndex.get(p.field));p.field2&&(t=`${P.processNullValue(t)}${p.fieldDelimiter}${P.processNullValue(this.getFieldValue(v,p.field2,this.fieldsIndex.get(p.field2)))}`,p.field3&&(t=`${t}${p.fieldDelimiter}${P.processNullValue(this.getFieldValue(v,p.field3,this.fieldsIndex.get(p.field3)))}`));m&&Number.isFinite(t)&&(v="field"===m&&p.normalizationField?
this.getFieldValue(v,p.normalizationField,this.fieldsIndex.get(p.normalizationField)):null,t=P.getNormalizedValue(t,m,v,r));return t})};L.getExpressionValues=async function(C,p,m,r){const {arcadeUtils:v}=await G.loadArcade(),t=v.hasGeometryOperations(p);t&&await v.enableGeometryOperations();const w=v.createFunction(p),c=m&&v.getViewInfo(m),h={fields:this.fieldsIndex.fields};return C.map(B=>{B={attributes:this.featureAdapter.getAttributes(B),layer:h,geometry:t?{...M.getGeometry(r.geometryType,r.hasZ,
r.hasM,this.featureAdapter.getGeometry(B)),spatialReference:m?.spatialReference}:null};B=v.createExecContext(B,c);return v.executeFunction(w,B)})};L.validateItem=function(C,p){this._fieldDataCache.has(p)||this._fieldDataCache.set(p,{alias:p,clause:b.getWhereClause(p,this.fieldsIndex)});return this._fieldDataCache.get(p)?.clause?.testFeature(C,this.featureAdapter)??!1};L.validateItems=function(C,p){this._fieldDataCache.has(p)||this._fieldDataCache.set(p,{alias:p,clause:b.getWhereClause(p,this.fieldsIndex)});
return this._fieldDataCache.get(p)?.clause?.testSet(C,this.featureAdapter)??!1};L._processAttributesForOutFields=function(C){const p=this.outFields;if(!p||!p.length)return this.featureAdapter.getAttributes(C);const m={};for(const r of p){const {alias:v,clause:t}=this._fieldDataCache.get(r);m[v]=t?t.calculateValue(C,this.featureAdapter):this.featureAdapter.getAttribute(C,v)}return m};L._processAttributesForDistinctValues=function(C){if(null==C||!this.returnDistinctValues)return C;var p=this.outFields,
m=[];if(p)for(const v of p){var {alias:r}=this._fieldDataCache.get(v);m.push(C[r])}else for(r in C)m.push(C[r]);p=`${(p||["*"]).join(",")}=${m.join(",")}`;m=this._returnDistinctMap.get(p)||0;this._returnDistinctMap.set(p,++m);return 1<m?null:C};return d._createClass(E)}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(d,b,M){function P(N){return null==N||"string"===typeof N&&!N?"\x3cNull\x3e":N}function G(N){const l=
null!=N.minValue||null!=N.maxValue,y=!!N.sqlExpression&&N.supportsSQLExpression;return!(null!=N.normalizationField||null!=N.normalizationType)&&!l&&!y}function E(N){const {values:l,useSampleStdDev:y,supportsNullCount:q}=N;var n=Number.POSITIVE_INFINITY;let g=Number.NEGATIVE_INFINITY,K=null,X=null;var T=null;let V=null,F=0;const J=null==N.minValue?-Infinity:N.minValue,ba=null==N.maxValue?Infinity:N.maxValue;for(const ka of l)Number.isFinite(ka)?ka>=J&&ka<=ba&&(K=null===K?ka:K+ka,n=Math.min(n,ka),g=
Math.max(g,ka),F++):"string"===typeof ka&&F++;if(F&&null!=K){X=K/F;T=0;for(const ka of l)Number.isFinite(ka)&&ka>=J&&ka<=ba&&(T+=(ka-X)**2);V=y?1<F?T/(F-1):0:0<F?T/F:0;T=Math.sqrt(V)}else g=n=null;n={avg:X,count:F,max:g,min:n,stddev:T,sum:K,variance:V};q&&(n.nullcount=l.length-F);N.percentileParams&&(n.median=L(l,N.percentileParams));return n}function L(N,l){const {fieldType:y,value:q,orderBy:n,isDiscrete:g}=l,K=C(y,"desc"===n);N=[...N].filter(F=>null!=F).sort((F,J)=>K(F,J));if(0===N.length)return null;
if(0>=q)return N[0];if(1<=q)return N[N.length-1];var X=(N.length-1)*q,T=Math.floor(X);l=T+1;X%=1;T=N[T];const V=N[l];return l>=N.length||g||"string"===typeof T||"string"===typeof V?T:T*(1-X)+V*X}function C(N,l){const y=l?1:-1,q=r(l),n=m(l);if(!N||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...I].includes(N))return(g,K)=>"number"===typeof g&&"number"===typeof K?q(g,K):"string"===typeof g&&"string"===typeof K?n(g,K):y;if("esriFieldTypeDate"===N)return(g,K)=>
{g=(new Date(g)).getTime();K=(new Date(K)).getTime();return isNaN(g)||isNaN(K)?y:q(g,K)};if(I.has(N))return(g,K)=>q(g,K);if("esriFieldTypeString"===N)return(g,K)=>n(g,K);if("esriFieldTypeGUID"===N||"esriFieldTypeGlobalID"===N){const g=m(l);return(K,X)=>g(v(K),v(X))}return l?(g,K)=>1:(g,K)=>-1}function p(N,l,y){if(y){if(null==N)return null==l?0:1;if(null==l)return-1}else{if(null==N)return null==l?0:-1;if(null==l)return 1}return null}function m(N){return N?(l,y)=>{const q=p(l,y,!0);if(null!=q)return q;
l=l.toUpperCase();y=y.toUpperCase();return l>y?-1:l<y?1:0}:(l,y)=>{const q=p(l,y,!1);if(null!=q)return q;l=l.toUpperCase();y=y.toUpperCase();return l<y?-1:l>y?1:0}}function r(N){return N?(l,y)=>{const q=p(l,y,!0);return null!=q?q:y-l}:(l,y)=>{const q=p(l,y,!1);return null!=q?q:l-y}}function v(N){return N.substr(24,12)+N.substr(19,4)+N.substr(16,2)+N.substr(14,2)+N.substr(11,2)+N.substr(9,2)+N.substr(6,2)+N.substr(4,2)+N.substr(2,2)+N.substr(0,2)}function t(N){return"coded-value"!==N?.type?[]:N.codedValues.map(l=>
l.code)}function w(N,l){const y=h({field:l.field,normalizationType:l.normalizationType,normalizationField:l.normalizationField,classificationMethod:l.classificationMethod,standardDeviationInterval:l.standardDeviationInterval,breakCount:l.numClasses||5});N=c(N,l.minValue,l.maxValue);return M.createGenerateRendererClassBreaks({definition:y,values:N,normalizationTotal:l.normalizationTotal})}function c(N,l,y){const q=null==l?-Infinity:l,n=null==y?Infinity:y;return N.filter(g=>Number.isFinite(g)&&g>=q&&
g<=n)}function h(N){const {breakCount:l,field:y,normalizationField:q,normalizationType:n}=N,g=N.classificationMethod||"equal-interval";return new b({breakCount:l,classificationField:y,classificationMethod:g,normalizationField:"field"===n?q:void 0,normalizationType:n,standardDeviationInterval:"standard-deviation"===g?N.standardDeviationInterval||1:void 0})}function B(N,l){const {field:y,classificationMethod:q,standardDeviationInterval:n,normalizationType:g,normalizationField:K,normalizationTotal:X,
minValue:T,maxValue:V}=l,F=l.numBins||10;let J=l=null,ba=null;q&&"equal-interval"!==q||g?({classBreaks:N}=w(N,{field:y,normalizationType:g,normalizationField:K,normalizationTotal:X,classificationMethod:q,standardDeviationInterval:n,minValue:T,maxValue:V,numClasses:F}),l=N[0].minValue,J=N[N.length-1].maxValue,ba=N.map(ka=>[ka.minValue,ka.maxValue])):(null!=T&&null!=V?(l=T,J=V):(N=E({values:N,minValue:T,maxValue:V,useSampleStdDev:!g,supportsNullCount:G({normalizationType:g,normalizationField:K,minValue:T,
maxValue:V})}),l=N.min??null,J=N.max??null),ba=x(l??0,J??0,F));return{min:l,max:J,intervals:ba}}function O(N,l){let y=-1;for(let q=N.length-1;0<=q;q--)if(l>=N[q][0]){y=q;break}return y}function x(N,l,y){const q=(l-N)/y,n=[];let g;for(let K=1;K<=y;K++)g=N+q,g=Number(g.toFixed(16)),n.push([N,K===y?l:g]),N=g;return n}const z=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,I=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),W="min max avg stddev count sum variance nullcount median".split(" ");
d.calculateClassBreaks=w;d.calculateHistogram=function(N,l){var y=B(N,l);if(null==y.min&&null==y.max)return{bins:[],minValue:y.min,maxValue:y.max,normalizationTotal:l.normalizationTotal};const q=y.intervals,n=y.min??0;y=y.max??0;const g=q.map((K,X)=>({minValue:q[X][0],maxValue:q[X][1],count:0}));for(const K of N)null!=K&&K>=n&&K<=y&&(N=O(q,K),-1<N&&g[N].count++);return{bins:g,minValue:n,maxValue:y,normalizationTotal:l.normalizationTotal}};d.calculatePercentile=L;d.calculateStatistics=E;d.calculateStringStatistics=
function(N){const l=N.returnDistinct?[...(new Set(N.values))]:N.values;var y=l.filter(n=>null!=n).sort();const q=y.length;y={count:q,min:y[0],max:y[q-1]};N.supportsNullCount&&(y.nullcount=l.length-q);N.percentileParams&&(y.median=L(l,N.percentileParams));return y};d.calculateUniqueValuesCount=function(N){const l={};for(let y of N){if(null==y||"string"===typeof y&&""===y.trim())y=null;null==l[y]?l[y]={count:1,data:y}:l[y].count++}return{count:l}};d.createClassBreaksDefinition=h;d.createUVResult=function(N,
l,y,q){N=N.count;const n=[];if(y&&l){y=[];var g=t(l[0]);for(const K of g)if(l[1]){g=t(l[1]);for(const X of g)if(l[2]){g=t(l[2]);for(const T of g)y.push(`${P(K)}${q}${P(X)}${q}${P(T)}`)}else y.push(`${P(K)}${q}${P(X)}`)}else y.push(K);for(const K of y)N.hasOwnProperty(K)||(N[K]={data:K,count:0})}for(const K in N)l=N[K],n.push({value:l.data,count:l.count,label:l.label});return{uniqueValueInfos:n}};d.getAttributeComparator=C;d.getEqualIntervalBins=x;d.getNormalizedValue=function(N,l,y,q){let n=null;
switch(l){case "log":0!==N&&(n=Math.log(N)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(q)&&0!==q&&(n=N/q*100);break;case "field":Number.isFinite(y)&&0!==y&&(n=N/y);break;case "natural-log":0<N&&(n=Math.log(N));break;case "square-root":0<N&&(n=N**.5)}return n};d.isNullCountSupported=G;d.processNullValue=P;d.processSummaryStatisticsResult=function(N,l){let y;for(y in N)W.includes(y)&&(Number.isFinite(N[y])||(N[y]=null));if(!l)return N;["avg","stddev","variance"].forEach(q=>{null!=N[q]&&
(N[q]=Math.ceil(N[q]??0))});return N};d.resolveCBResult=function(N,l){let y=N.classBreaks;const q=y[0]?.minValue,n=y[y.length-1]?.maxValue,g="standard-deviation"===l;y=y.map(K=>{const X=K.label;K={minValue:K.minValue,maxValue:K.maxValue,label:X};if(g&&X){const T=X.match(z)?.map(V=>+V.trim())??[];2===T.length?(K.minStdDev=T[0],K.maxStdDev=T[1],0>T[0]&&0<T[1]&&(K.hasAvg=!0)):1===T.length&&(X.includes("\x3c")?(K.minStdDev=null,K.maxStdDev=T[0]):X.includes("\x3e")&&(K.minStdDev=T[0],K.maxStdDev=null))}return K});
return{minValue:q,maxValue:n,classBreakInfos:y,normalizationTotal:N.normalizationTotal}};d.statisticTypes=W;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,b,M,P,G,E,L,C,p,m){E=new M.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});M=new M.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});P=function(r){function v(t){t=r.call(this,t)||this;t.type="class-breaks-definition";t.breakCount=
null;t.classificationField=null;t.classificationMethod=null;t.normalizationField=null;t.normalizationType=null;return t}d._inherits(v,r);d._createClass(v,[{key:"standardDeviationInterval",set:function(t){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",t)}},{key:"definedInterval",set:function(t){"defined-interval"===this.classificationMethod&&this._set("definedInterval",t)}}]);return v}(P.JSONSupport);b.__decorate([p.enumeration({classBreaksDef:"class-breaks-definition"})],
P.prototype,"type",void 0);b.__decorate([G.property({json:{write:!0}})],P.prototype,"breakCount",void 0);b.__decorate([G.property({json:{write:!0}})],P.prototype,"classificationField",void 0);b.__decorate([G.property({type:String,json:{read:E.read,write:E.write}})],P.prototype,"classificationMethod",void 0);b.__decorate([G.property({json:{write:!0}})],P.prototype,"normalizationField",void 0);b.__decorate([G.property({json:{read:M.read,write:M.write}})],P.prototype,"normalizationType",void 0);b.__decorate([G.property({value:null,
json:{write:!0}})],P.prototype,"standardDeviationInterval",null);b.__decorate([G.property({value:null,json:{write:!0}})],P.prototype,"definedInterval",null);return P=b.__decorate([m.subclass("esri.rest.support.ClassBreaksDefinition")],P)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(d,b,M){d.enumeration=function(P,G={}){P=P instanceof b.JSONMap?P:new b.JSONMap(P,G);P={type:G?.ignoreUnknown??!0?P.apiValues:String,json:{type:P.jsonValues,
read:G?.readOnly?!1:{reader:P.read},write:{writer:P.write}}};void 0!==G?.readOnly&&(P.readOnly=!!G.readOnly);void 0!==G?.default&&(P.json.default=G.default);void 0!==G?.name&&(P.json.name=G.name);void 0!==G?.nonNullable&&(P.nonNullable=G.nonNullable);return M.property(P)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(d,b){function M(t){var w=t.definition;const {classificationMethod:c,
normalizationType:h,definedInterval:B}=w;w=w.breakCount??1;const O=[];var x=t.values;if(0===x.length)return[];x=x.sort((y,q)=>y-q);var z=x[0],I=x[x.length-1];if("equal-interval"===c)if(x.length>=w){x=(I-z)/w;t=z;for(var W=1;W<w;W++){var N=Number((z+W*x).toFixed(6));O.push({minValue:t,maxValue:N,label:P(t,N,h)});t=N}O.push({minValue:t,maxValue:I,label:P(t,I,h)})}else x.forEach(y=>{O.push({minValue:y,maxValue:y,label:P(y,y,h)})});else if("natural-breaks"===c){x=G(x);t=E(x.uniqueValues,t.valueFrequency||
x.valueFrequency,w);for(W=1;W<w;W++)x.uniqueValues.length>W&&(N=Number(x.uniqueValues[t[W]].toFixed(6)),O.push({minValue:z,maxValue:N,label:P(z,N,h)}),z=N);O.push({minValue:z,maxValue:I,label:P(z,I,h)})}else if("quantile"===c)if(x.length>=w&&z!==I){t=Math.ceil(x.length/w);W=0;for(N=1;N<w;N++){var l=t+W-1;l>x.length&&(l=x.length-1);0>l&&(l=0);O.push({minValue:z,maxValue:x[l],label:P(z,x[l],h)});z=x[l];W+=t;t=Math.ceil((x.length-W)/(w-N))}O.push({minValue:z,maxValue:I,label:P(z,I,h)})}else for(w=-1,
I=0;I<x.length;I++)z=x[I],z!==w&&(w=z,O.push({minValue:w,maxValue:z,label:P(w,z,h)}),w=z);else if("standard-deviation"===c)if(t=p(x),W=m(x,t),0===W)O.push({minValue:x[0],maxValue:x[0],label:P(x[0],x[0],h)});else{x=C(z,I,w,t,W)*W;W=0;for(N=w;1<=N;N--)l=Number((t-(N-.5)*x).toFixed(6)),O.push({minValue:z,maxValue:l,label:P(z,l,h)}),z=l,W++;N=Number((t+.5*x).toFixed(6));O.push({minValue:z,maxValue:N,label:P(z,N,h)});z=N;W++;for(l=1;l<=w;l++)N=W===2*w?I:Number((t+(l+.5)*x).toFixed(6)),O.push({minValue:z,
maxValue:N,label:P(z,N,h)}),z=N,W++}else if("defined-interval"===c){if(!B)return O;w=x[0];I=x[x.length-1];x=Math.ceil((I-w)/B);z=w;for(t=1;t<x;t++)W=Number((w+t*B).toFixed(6)),O.push({minValue:z,maxValue:W,label:P(z,W,h)}),z=W;O.push({minValue:z,maxValue:I,label:P(z,I,h)})}return O}function P(t,w,c){let h=null;return h=t===w?c&&"percent-of-total"===c?t+"%":t.toString():c&&"percent-of-total"===c?t+"% - "+w+"%":t+" - "+w}function G(t){const w=[],c=[];let h=Number.MIN_VALUE,B=1,O=-1;for(let x=0;x<t.length;x++){const z=
t[x];z===h?(B++,c[O]=B):null!==z&&(w.push(z),h=z,B=1,c.push(B),O++)}return{uniqueValues:w,valueFrequency:c}}function E(t,w,c){var h=t.length;const B=[];c>h&&(c=h);for(var O=0;O<c;O++)B.push(Math.round(O*h/c-1));B.push(h-1);O=L(B,t,w,c);h=O.mean;O=O.sdcm;var x=c,z=0,I=0;let W=0,N=0,l=!0;for(let q=0;2>q&&l;q++){0===q&&(l=!1);for(var y=0;y<x-1;y++)for(;B[y+1]+1!==B[y+2];)if(B[y+1]+=1,z=r(y,B,t,w),W=z.sbMean,z=z.sbSdcm,I=r(y+1,B,t,w),N=I.sbMean,I=I.sbSdcm,z+I<O[y]+O[y+1])O[y]=z,O[y+1]=I,h[y]=W,h[y+1]=
N,l=!0;else{--B[y+1];break}for(y=x-1;0<y;y--)for(;B[y]!==B[y-1]+1;)if(--B[y],z=r(y-1,B,t,w),W=z.sbMean,z=z.sbSdcm,I=r(y,B,t,w),N=I.sbMean,I=I.sbSdcm,z+I<O[y-1]+O[y])O[y-1]=z,O[y]=I,h[y-1]=W,h[y]=N,l=!0;else{B[y]+=1;break}}l&&(O=L(B,t,w,c));return B}function L(t,w,c,h){let B=[];var O=[],x=[];let z=0;const I=[],W=[];for(var N=0;N<h;N++){var l=r(N,t,w,c);I.push(l.sbMean);W.push(l.sbSdcm);z+=W[N]}l=z;for(N=!0;N||z<l;){N=!1;B=[];for(O=0;O<h;O++)B.push(t[O]);for(x=0;x<h;x++)for(l=t[x]+1;l<=t[x+1];l++)if(O=
w[l],0<x&&l!==t[x+1]&&Math.abs(O-I[x])>Math.abs(O-I[x-1]))t[x]=l;else if(x<h-1&&t[x]!==l-1&&Math.abs(O-I[x])>Math.abs(O-I[x+1])){t[x+1]=l-1;break}l=z;z=0;O=[];x=[];for(let y=0;y<h;y++){O.push(I[y]);x.push(W[y]);const q=r(y,t,w,c);I[y]=q.sbMean;W[y]=q.sbSdcm;z+=W[y]}}if(z>l){for(w=0;w<h;w++)t[w]=B[w],I[w]=O[w],W[w]=x[w];z=l}return{mean:I,sdcm:W}}function C(t,w,c,h,B){t=Math.max(h-t,w-h)/B/c;return 1<=t?1:.5<=t?.5:.25}function p(t){let w=0;for(let c=0;c<t.length;c++)w+=t[c];return w/=t.length}function m(t,
w){let c=0;for(let h=0;h<t.length;h++){const B=t[h];c+=(B-w)*(B-w)}c/=t.length;return Math.sqrt(c)}function r(t,w,c,h){var B=0,O=0;for(var x=w[t]+1;x<=w[t+1];x++){const z=h[x];B+=c[x]*z;O+=z}0>=O&&v.warn("Exception in Natural Breaks calculation");B/=O;O=0;for(x=w[t]+1;x<=w[t+1];x++)O+=h[x]*(c[x]-B)**2;return{sbMean:B,sbSdcm:O}}const v=b.getLogger("esri.rest.support.generateRendererUtils");d.createGenerateRendererClassBreaks=function(t){const {normalizationTotal:w}=t;return{classBreaks:M(t),normalizationTotal:w}};
d.createGenerateRendererUniqueValues=function(t){t=G(t);const w=[],c=t.uniqueValues.length;for(let h=0;h<c;h++){const B=t.uniqueValues[h];w.push({value:B,count:t.valueFrequency[h],label:B.toString()})}return{uniqueValues:w}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../geometry/SpatialReference".split(" "),function(d,b,M,P,G,E,L){function C(){m||
(m=(async()=>{const v=await new Promise((t,w)=>d(["./arcadeUtils"],t,w));return{arcade:v.arcade,arcadeUtils:v,Dictionary:v.Dictionary,Feature:v.arcadeFeature}})());return m}const p=E.getLogger("esri.support.arcadeOnDemand");let m;P=(v,t,w)=>r.create(v,t,w,null,["$feature","$view"],[]);let r=function(){function v(w,c,h,B,O,x,z){this.services=null;this.script=w;this.evaluate=B;this.fields=Array.isArray(x)?x:x.fields;this._syntaxTree=h;this._arcade=c;this._arcadeFeature=O;this._spatialReference=z;this._referencesGeometry=
c.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}v.create=async function(w,c,h,B,O,x){const {arcade:z,Feature:I,Dictionary:W}=await C(),N=L.fromJSON(c);let l;try{l=z.parseScript(w,x)}catch(X){return p.error(new G("arcade-bad-expression","Failed to parse arcade script",{script:w,error:X})),null}O=O.reduce((X,T)=>({...X,[T]:null}),{});let y=null;null!=B&&(y=new W(B),y.immutable=!0,O.$config=null);x=(B=z.scriptUsesGeometryEngine(l))&&
z.enableGeometrySupport();const q=z.scriptUsesFeatureSet(l)&&z.enableFeatureSetSupport(),n=(c=z.scriptIsAsync(l))&&z.enableAsyncSupport();O={vars:O,spatialReference:N,useAsync:!!n};await Promise.all([x,q,n]);x=new Set;await z.loadDependentModules(x,l,null,c,B);const g=new W;g.immutable=!1;g.setField("scale",0);const K=z.compileScript(l,O);return new v(w,z,l,(X,T)=>{"$view"in X&&X.$view&&(g.setField("scale","object"===typeof X.$view&&"scale"in X.$view?X.$view.scale:void 0),X.$view=g);y&&(X.$config=
y);return K({vars:X,spatialReference:N,services:T})},new I,h,N)};var t=v.prototype;t.repurposeFeature=function(w){w.geometry&&!w.geometry.spatialReference&&(w.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(w.geometry,w.attributes,{fields:this.fields});return this._arcadeFeature};t.referencesGeometry=function(){return this._referencesGeometry};t.referencesScale=function(){return this._referencesScale};return M._createClass(v)}();b.ArcadeExpression=
r;b.createDictionaryExpression=(v,t,w,c)=>r.create(v,t,w,c,["$feature","$view"],[]);b.createLabelExpression=(v,t,w)=>r.create(v,t,w,null,["$feature"],[]);b.createRendererExpression=P;b.createVVExpression=P;b.loadArcade=C;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(d){d.makeEdgeCandidate=function(b,M,P,G,E,L=!1){return{objectId:b,target:M,distance:P,type:"edge",start:G,end:E,draped:L}};d.makeVertexCandidate=
function(b,M,P){return{objectId:b,target:M,distance:P,type:"vertex"}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(d,b,M,P,G,E){function L(Q,ea,A){if(Q)for(const S of Q)(Q=(Q=P.getDeepValue(S,ea))&&"function"!==typeof Q&&A.get(Q))&&P.setDeepValue(S,Q.name,ea)}function C(Q,ea){if(!Q||!ea)return[];Ea.clear();p(Ea,Q,
ea);return Array.from(Ea).sort()}function p(Q,ea,A){if(A)if(ea?.fields?.length)if(A.includes("*"))for(const {name:S}of ea.fields)Q.add(S);else for(const S of A)m(Q,ea,S);else if(A.includes("*"))Q.clear(),Q.add("*");else for(const S of A)null!=S&&Q.add(S)}function m(Q,ea,A){"string"===typeof A&&(ea?(ea=ea.get(A))&&Q.add(ea.name):Q.add(A))}async function r(Q,ea,A){if(A){var {arcadeUtils:S}=await E.loadArcade();A=S.extractFieldNames(A,ea?.fields?.map(Z=>Z.name));for(const Z of A)m(Q,ea,Z)}}async function v(Q,
ea,A){if(A&&"1\x3d1"!==A){var {WhereClause:S}=await new Promise((Z,aa)=>d(["../../core/sql/WhereClause"],Z,aa));S=S.create(A,ea);if(!S.isStandardized)throw new M("fieldUtils:collectFilterFields","Where clause is not standardized",{where:A});p(Q,ea,S.fieldNames)}}function t(Q,ea){for(const A of Q)if(A&&A.valueType&&A.valueType===ea)return A.name;return null}async function w(Q,ea){if(ea){var A=ea.elevationInfo?.featureExpressionInfo;if(A)return A.collectRequiredFields(Q,ea.fieldsIndex)}}async function c(Q,
ea,A){const S=[];A?.expressionInfos&&S.push(...A.expressionInfos.map(Z=>r(Q,ea.fieldsIndex,Z.expression)));A=A?.content;if(Array.isArray(A))for(const Z of A)"expression"===Z.type&&Z.expressionInfo&&S.push(r(Q,ea.fieldsIndex,Z.expressionInfo.expression));await Promise.all(S)}async function h(Q,ea,A){ea&&A&&(A.valueExpression?await r(Q,ea.fieldsIndex,A.valueExpression):A.field&&m(Q,ea.fieldsIndex,A.field))}function B(Q){if(!Q)return[];const ea=Q.geometryFieldsInfo;return ea?C(Q.fieldsIndex,[ea.shapeAreaField,
ea.shapeLengthField]):[]}function O(Q){const ea=new Set;z(Q).forEach(A=>ea.add(A));B(Q).forEach(A=>ea.add(A.toLowerCase()));if(Q=Q&&"infoFor3D"in Q?Q.infoFor3D:void 0)Object.values(Q.assetMapFieldRoles).forEach(A=>ea.add(A.toLowerCase())),Object.values(Q.transformFieldRoles).forEach(A=>ea.add(A.toLowerCase()));return Array.from(ea)}function x(Q){if(!Q)return[];Q="editFieldsInfo"in Q&&Q.editFieldsInfo;if(!Q)return[];const {creationDateField:ea,creatorField:A,editDateField:S,editorField:Z}=Q;return[ea,
A,S,Z].filter(Boolean)}function z(Q){return x(Q).map(ea=>ea.toLowerCase())}async function I(Q,ea){const {labelingInfo:A,fieldsIndex:S}=ea;A&&A.length&&await Promise.all(A.map(Z=>W(Q,S,Z)))}async function W(Q,ea,A){if(A){var S=A.getLabelExpression();A=A.where;"arcade"===S.type?await r(Q,ea,S.expression):(S=S.expression.match(/{[^}]*}/g))&&S.forEach(Z=>{m(Q,ea,Z.slice(1,-1))});await v(Q,ea,A)}}function N(Q){return"number"===typeof Q&&!isNaN(Q)&&isFinite(Q)}function l(Q){return null===Q||N(Q)}function y(Q){return null===
Q||Ua(Q)}function q(Q){return null!=Q&&"string"===typeof Q}function n(Q){return null===Q||q(Q)}function g(){return!0}function K(Q,ea){let A;switch(Q.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":A=Q.nullable?y:Ua;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":A=Q.nullable?l:N;break;case "string":case "esriFieldTypeString":A=Q.nullable?
n:q;break;default:A=g}return 1===arguments.length?A:A(ea)}function X(Q){return null!=Q&&Va.has(Q.type)}function T(Q,ea){return null==Q||Q.nullable&&null===ea?null:X(Q)&&!V(Q.type,Number(ea))?b.NumericRangeValidationError.OUT_OF_RANGE:K(Q,ea)?Q.domain?G.validateDomainValue(Q.domain,ea):null:b.TypeValidationError.INVALID_TYPE}function V(Q,ea){Q="string"===typeof Q?F(Q):Q;if(!Q)return!1;const A=Q.min,S=Q.max;return Q.isInteger?Ua(ea)&&ea>=A&&ea<=S:ea>=A&&ea<=S}function F(Q){switch(Q){case "esriFieldTypeSmallInteger":case "small-integer":return jb;
case "esriFieldTypeInteger":case "integer":return db;case "esriFieldTypeBigInteger":case "big-integer":return f;case "esriFieldTypeSingle":case "single":return D;case "esriFieldTypeDouble":case "double":return ha}}function J(Q,ea,A){if(!ea||!ea.attributes||!Q){if(null!=A)for(var S of Q??[])A.add(S);return!0}ea=ea.attributes;S=!1;for(const Z of Q)if(!(Z in ea))if(S=!0,null!=A)A.add(Z);else break;return S}const ba=/^([0-9_])/,ka=/[^a-z0-9_\u0080-\uffff]+/gi,ta="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
Ba=["field","normalizationField"],Ea=new Set,Fa=["oid","global-id","guid"],Ma=["oid","global-id"],Ha=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],Ua=(()=>"isInteger"in Number?Number.isInteger:Q=>"number"===typeof Q&&isFinite(Q)&&Math.floor(Q)===Q)(),Sa=["integer","small-integer","single","double"],Va=new Set([...Sa,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"]),eb=["date","date-only","time-only","timestamp-offset"],kb=new Set([...eb,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);b.NumericRangeValidationError=void 0;(b.NumericRangeValidationError||(b.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";b.TypeValidationError=void 0;(b.TypeValidationError||(b.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const jb=
{min:-32768,max:32767,isInteger:!0},db={min:-2147483648,max:2147483647,isInteger:!0},f={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},D={min:-3.4E38,max:1.2E38,isInteger:!1},ha={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};b.bigIntegerRange=f;b.collectArcadeFieldNames=r;b.collectElevationFields=w;b.collectFeatureReductionFields=async function(Q,ea,A){if(ea&&A&&"fields"in A){var S=[];S.push(c(Q,ea,A.popupTemplate));A.fields&&S.push(...A.fields.map(async Z=>{Z.onStatisticExpression?
r(Q,ea.fieldsIndex,Z.onStatisticExpression.expression):Q.add(Z.onStatisticField)}));await Promise.all(S)}};b.collectField=m;b.collectFields=p;b.collectFilterFields=async function(Q,ea,A){ea&&(ea.timeInfo&&null!=A&&A.timeExtent&&p(Q,ea.fieldsIndex,[ea.timeInfo.startField,ea.timeInfo.endField]),ea.floorInfo&&p(Q,ea.fieldsIndex,[ea.floorInfo.floorField]),null!=A&&null!=A.where&&await v(Q,ea.fieldsIndex,A.where))};b.collectLabelingFields=I;b.collectOrderByInfos=async function(Q,ea,A){ea&&A&&await Promise.all(A.map(S=>
h(Q,ea,S)))};b.collectPopupTemplateFields=c;b.dateTypes=eb;b.doubleRange=ha;b.featureHasFields=function(Q,ea){return!J(Q,ea,null)};b.fixFields=C;b.fixRendererFields=function(Q,ea){if(null!=Q&&null!=ea)for(const A of Array.isArray(Q)?Q:[Q])if(L(ta,A,ea),"visualVariables"in A&&A.visualVariables)for(const S of A.visualVariables)L(Ba,S,ea)};b.fixTimeInfoFields=function(Q,ea){if(null!=Q&&ea?.fields?.length)if("startField"in Q){var A=ea.get(Q.startField);ea=ea.get(Q.endField);Q.startField=A?.name??null;
Q.endField=ea?.name??null}else A=ea.get(Q.startTimeField),ea=ea.get(Q.endTimeField),Q.startTimeField=A?.name??null,Q.endTimeField=ea?.name??null};b.getDisplayFieldName=function({displayField:Q,fields:ea}){if(Q)return Q;if(!ea||!ea.length)return null;if(!(Q=t(ea,"name-or-title")||t(ea,"unique-identifier")||t(ea,"type-or-category")))a:{for(const A of ea)if(A&&A.name&&(ea=A.name.toLowerCase(),ea.includes("name")||ea.includes("title"))){Q=A.name;break a}Q=null}return Q};b.getEditTrackingFields=x;b.getElevationFields=
async function(Q){if(!Q)return[];const ea=new Set;await w(ea,Q);return Array.from(ea).sort()};b.getExpressionFields=async function(Q,ea){const A=new Set;for(const S of ea)await r(A,Q.fieldsIndex,S);return Array.from(A).sort()};b.getFeatureEditFields=function(Q){return Q?C(Q.fieldsIndex,x(Q)):[]};b.getFeatureGeometryFields=B;b.getFieldDefaultValue=function(Q){const ea=Q.defaultValue;if(void 0!==ea&&K(Q,ea))return ea;if(Q.nullable)return null};b.getFieldRange=function(Q){const ea=G.getDomainRange(Q.domain);
if(ea)return ea;if(X(Q))return F(Q.type)};b.getLabelingFields=async function(Q){if(!Q)return[];const ea=new Set;await I(ea,Q);return Array.from(ea).sort()};b.getLowerCaseDefaultHiddenFields=O;b.getLowerCaseEditTrackingFields=z;b.getNumericTypeForValue=function(Q){if(!N(Q))return null;if(Ua(Q)){if(Q>=jb.min&&Q<=jb.max)return"esriFieldTypeSmallInteger";if(Q>=db.min&&Q<=db.max)return"esriFieldTypeInteger"}return Q>=D.min&&Q<=D.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};b.getTimeFields=async function(Q){if(!Q)return[];
const ea="timeInfo"in Q&&Q.timeInfo;return ea?C(Q.fieldsIndex,[Q.trackIdField,ea.startField,ea.endField]):[]};b.integerRange=db;b.isDateField=function(Q){return null!=Q&&kb.has(Q.type)};b.isFieldEditable=function(Q,ea){return Q.editable&&!Fa.includes(Q.type)&&!z(ea).includes(Q.name?.toLowerCase()??"")};b.isFieldVisibleByDefault=function(Q,ea){const A=Q.name?.toLowerCase()??"";return!(null!=ea?.objectIdField&&A===ea.objectIdField.toLowerCase())&&!(null!=ea?.globalIdField&&A===ea.globalIdField.toLowerCase())&&
!O(ea).includes(A)&&!Ma.includes(Q.type)&&!Ha.some(S=>S.test(A))};b.isNumberInRange=V;b.isNumericField=X;b.isRasterPixelValueField=function(Q){return Q?["raster.itempixelvalue","raster.servicepixelvalue"].some(ea=>Q.toLowerCase().startsWith(ea)):!1};b.isStringField=function(Q){return null!=Q&&("string"===Q.type||"esriFieldTypeString"===Q.type)};b.isValidFieldValue=function(Q,ea){return null===T(Q,ea)};b.isValueMatchingFieldType=K;b.normalizeFieldName=function(Q){return null==Q?null:Q.trim().replaceAll(ka,
"_").replace(ba,"F$1")||null};b.numericTypes=Sa;b.packFields=function(Q,ea,A=1){if(!ea||!Q)return[];if(ea.includes("*"))return["*"];ea=C(Q,ea);return ea.length/Q.fields.length>=A?["*"]:ea};b.populateMissingFields=J;b.rendererFields=ta;b.sanitizeNullFieldValue=function(Q){return null==Q||"number"===typeof Q&&isNaN(Q)?null:Q};b.singleRange=D;b.smallIntegerRange=jb;b.unpackFieldNames=function(Q,ea){return null==ea||null==Q?[]:ea.includes("*")?(Q.fields??[]).map(A=>A.name):ea};b.validateFieldValue=T;
b.validationErrorToString=function(Q,ea,A){switch(Q){case G.DomainValidationError.INVALID_CODED_VALUE:return`Value ${A} is not in the coded domain - field: ${ea.name}, domain: ${JSON.stringify(ea.domain)}`;case G.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${A} is out of the range of valid values - field: ${ea.name}, domain: ${JSON.stringify(ea.domain)}`;case b.TypeValidationError.INVALID_TYPE:return`Value ${A} is not a valid value for the field type - field: ${ea.name}, type: ${ea.type}, nullable: ${ea.nullable}`;
case b.NumericRangeValidationError.OUT_OF_RANGE:const {min:S,max:Z}=F(ea.type);return`Value ${A} is out of range for the number type - field: ${ea.name}, type: ${ea.type}, value range is ${S} to ${Z}`}};b.visualVariableFields=Ba;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(d){d.DomainValidationError=void 0;(function(b){b.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";b.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(d.DomainValidationError||(d.DomainValidationError={}));d.getDomainRange=function(b){if(b&&"range"===b.type)return{min:"range"in b?b.range[0]:b.minValue,max:"range"in b?b.range[1]:b.maxValue}};d.validateDomainValue=function(b,M){switch(b.type){case "range":const P="range"in b?b.range[0]:b.minValue;b="range"in b?b.range[1]:b.maxValue;if(null!=P&&+M<P||null!=b&&+M>b)return d.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==b.codedValues||
b.codedValues.every(G=>null==G||G.code!==M))return d.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==b.codedValues||b.codedValues.every(G=>null==G||G.code!==M))return d.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v){function t(){return new Promise((O,x)=>d(["../../../geometry/geometryEngineJSON"],O,x))}const w={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var c={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},h={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},B={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};b.canQueryWithRBush=
function(O){if(E.isExtent(O))return!0;if(E.isPolygon(O)){for(const x of O.rings)if(5!==x.length||x[0][0]!==x[1][0]||x[0][0]!==x[4][0]||x[2][0]!==x[3][0]||x[0][1]!==x[3][1]||x[0][1]!==x[4][1]||x[1][1]!==x[2][1])return!1;return!0}return!1};b.checkSpatialQuerySupport=async function(O,x,z){const {spatialRel:I,geometry:W}=O;if(W){if(null==I||!0!==c[I])throw new M("feature-store:unsupported-query","Unsupported query spatial relationship",{query:O});if(L.isValid(W.spatialReference)&&L.isValid(z)){if(null==
W||!0!==h[E.getJsonType(W)])throw new M("feature-store:unsupported-query","Unsupported query geometry type",{query:O});if(null==x||!0!==B[x])throw new M("feature-store:unsupported-query","Unsupported layer geometry type",{query:O});if(O.outSR)return r.checkProjectionSupport(O.geometry&&O.geometry.spatialReference,O.outSR)}}};b.getSpatialQueryOperator=function(O,x,z,I,W){if(E.isPolygon(x)&&"esriGeometryPoint"===z&&("esriSpatialRelIntersects"===O||"esriSpatialRelContains"===O)){const N=p.convertFromPolygon(new m,
x,!1,!1);return Promise.resolve(l=>C.polygonContainsPoint(N,!1,!1,l))}if(E.isPolygon(x)&&"esriGeometryMultipoint"===z){const N=p.convertFromPolygon(new m,x,!1,!1);if("esriSpatialRelContains"===O)return Promise.resolve(l=>C.polygonContainsMultipoint(N,!1,!1,l,I,W))}if(E.isExtent(x)&&"esriGeometryPoint"===z&&("esriSpatialRelIntersects"===O||"esriSpatialRelContains"===O))return Promise.resolve(N=>P.extentContainsPoint(x,v.getGeometry(z,I,W,N)));if(E.isExtent(x)&&"esriGeometryMultipoint"===z&&"esriSpatialRelContains"===
O)return Promise.resolve(N=>P.extentContainsMultipoint(x,v.getGeometry(z,I,W,N)));if(E.isExtent(x)&&"esriSpatialRelIntersects"===O){const N=G.getExtentIntersector(z);return Promise.resolve(l=>N(x,v.getGeometry(z,I,W,l)))}return t().then(N=>{const l=N[w[O]].bind(null,x.spatialReference,x);return y=>l(v.getGeometry(z,I,W,y))})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(d,b){d.extentIntersectsExtent=
b.extentIntersectsExtent;d.extentIntersectsMultipoint=b.extentIntersectsMultipoint;d.extentIntersectsPoint=b.extentIntersectsPoint;d.extentIntersectsPolygon=b.extentIntersectsPolygon;d.extentIntersectsPolyline=b.extentIntersectsPolyline;d.extentIntersectsRings=b.extentIntersectsRings;d.getFeatureExtentIntersector=b.getFeatureExtentIntersector;d.isSelfIntersecting=b.isSelfIntersecting;d.segmentIntersects=b.segmentIntersects;d.getExtentIntersector=function(M){return"mesh"===M?b.extentIntersectsExtent:
b.getFeatureExtentIntersector(M)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(d){function b(M,P,G,E,L){if(!M)return!1;P=P?G?4:3:G?3:2;const {coords:C,lengths:p}=M;G=!1;M=0;for(const r of p){var m=M;for(let v=M,t=M+r*P;v<t;v+=P){m=v+P;m===t&&(m=M);const w=C[v],c=C[v+1],h=C[m];m=C[m+1];(c<L&&m>=L||m<L&&c>=L)&&w+(L-c)/(m-c)*(h-w)<E&&(G=!G)}M+=r*P}return G}d.polygonContainsCoords=b;d.polygonContainsMultipoint=function(M,
P,G,E,L,C){L=L?C?4:3:C?3:2;const {coords:p,lengths:m}=E;if(!m)return!1;for(let r=0,v=0;r<m.length;r++,v+=L)if(!b(M,P,G,p[v],p[v+1]))return!1;return!0};d.polygonContainsPoint=function(M,P,G,E){return b(M,P,G,E.coords[0],E.coords[1])};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(d){function b(G,E,L,C,p){if(null!=C&&null!=p)return m=>{const r=G.getAttribute(m,E);m=G.getAttribute(m,L);return(null==r||r<=
p)&&(null==m||m>=C)};if(null!=C)return m=>{m=G.getAttribute(m,L);return null==m||m>=C};if(null!=p)return m=>{m=G.getAttribute(m,E);return null==m||m<=p}}function M(G,E,L,C){if(null!=L&&null!=C&&L===C)return p=>G.getAttribute(p,E)===L;if(null!=L&&null!=C)return p=>{p=G.getAttribute(p,E);return p>=L&&p<=C};if(null!=L)return p=>G.getAttribute(p,E)>=L;if(null!=C)return p=>G.getAttribute(p,E)<=C}function P(){return()=>!1}d.getTimeExtent=async function(G,E){if(!G)return null;const L=E.featureAdapter,{startTimeField:C,
endTimeField:p}=G;let m=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;if(C&&p)await E.forEach(v=>{const t=L.getAttribute(v,C);v=L.getAttribute(v,p);null==t||isNaN(t)||(m=Math.min(m,t));null==v||isNaN(v)||(r=Math.max(r,v))});else{const v=C||p;await E.forEach(t=>{t=L.getAttribute(t,v);null==t||isNaN(t)||(m=Math.min(m,t),r=Math.max(r,t))})}return{start:m,end:r}};d.getTimeOperator=function(G,E,L){if(!E||!G)return null;const {startTimeField:C,endTimeField:p}=G;if(!C&&!p)return null;const {start:m,
end:r}=E;return null===m&&null===r?null:void 0===m&&void 0===r?P():C&&p?b(L,C,p,m,r):M(L,C||p,m,r)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(d,b){function M(G){return"oid"===G.type||"esriFieldTypeOID"===G.type}function P(G){return"global-id"===G.type||"esriFieldTypeGlobalID"===G.type}return function(){function G(L=[]){this.fields=[];this._fieldsMap=new Map;
this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(L){this.fields=L;var C=[];for(const p of L){L=p?.name;const m=b.normalizeFieldName(p?.name)?.toLowerCase()??"";if(L&&m){const r=L.trim().toLowerCase();this._fieldsMap.set(L,p);this._fieldsMap.set(r,p);this._normalizedFieldsMap.set(m,p);C.push(r);"date"===p.type||"esriFieldTypeDate"===p.type||"date-only"===p.type||"esriFieldTypeDateOnly"===
p.type||"timestamp-offset"===p.type||"esriFieldTypeTimestampOffset"===p.type?(this.dateFields.push(p),this._dateFieldsSet.add(p)):b.isNumericField(p)&&(this._numericFieldsSet.add(p),this.numericFields.push(p));M(p)||P(p)||(p.editable=null==p.editable||!!p.editable,p.nullable=null==p.nullable||!!p.nullable)}}C.sort();this.uid=C.join(",")}}var E=G.prototype;E.destroy=function(){this._fieldsMap.clear()};E.has=function(L){return null!=this.get(L)};E.get=function(L){if(L){var C=this._fieldsMap.get(L);
if(C)return C;(C=this._fieldsMap.get(L.trim().toLowerCase())??this._normalizedFieldsMap.get(b.normalizeFieldName(L)?.toLowerCase()??""))&&this._fieldsMap.set(L,C);return C}};E.isDateField=function(L){return this._dateFieldsSet.has(this.get(L))};E.isNumericField=function(L){return this._numericFieldsSet.has(this.get(L))};E.normalizeFieldName=function(L){if(L=this.get(L))return L.name??void 0};d._createClass(G,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const L of this.fields)M(L)||
P(L)||L.nullable||void 0!==b.getFieldDefaultValue(L)||this._requiredFields.push(L)}return this._requiredFields}}]);return G}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t,w,c){function h(q){return B.has(q)?B.get(q):"number"===typeof q?q:1}d.Task=void 0;(function(q){q[q.YIELD=1]="YIELD"})(d.Task||(d.Task={}));d.TaskPriority=void 0;(function(q){q.RESOURCE_CONTROLLER_IMMEDIATE="immediate";q.RESOURCE_CONTROLLER="schedule";q.SLIDE="slide";q.STREAM_DATA_LOADER="stream loader";q.ELEVATION_QUERY="elevation query";q.TERRAIN_SURFACE="terrain";q.SURFACE_GEOMETRY_UPDATES="surface geometry updates";q.LOD_RENDERER="LoD renderer";q.GRAPHICS_CORE=
"Graphics3D";q.I3S_CONTROLLER="I3S";q.POINT_CLOUD_LAYER="point cloud";q.FEATURE_TILE_FETCHER="feature fetcher";q.OVERLAY="overlay";q.STAGE="stage";q.GRAPHICS_DECONFLICTOR="graphics deconflictor";q.FILTER_VISIBILITY="Graphics3D filter visibility";q.SCALE_VISIBILITY="Graphics3D scale visibility";q.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";q.POINT_OF_INTEREST_FREQUENT="POI frequent";q.POINT_OF_INTEREST_INFREQUENT="POI infrequent";q.LABELER="labeler";q.FEATURE_QUERY_ENGINE="feature query";q.FEATURE_TILE_TREE=
"feature tile tree";q.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";q.ELEVATION_ALIGNMENT="elevation alignment";q.TEXT_TEXTURE_ATLAS="text texture atlas";q.TEXTURE_UNLOAD="texture unload";q.LINE_OF_SIGHT_TOOL="line of sight tool";q.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";q.ELEVATION_PROFILE="elevation profile";q.SNAPPING="snapping";q.SHADOW_ACCUMULATOR="shadow accumulator";q.CLOUDS_GENERATOR="clouds generator";q[q.NONE=0]="NONE";q[q.TEST_PRIO=1]="TEST_PRIO"})(d.TaskPriority||
(d.TaskPriority={}));const B=new Map([[d.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[d.TaskPriority.RESOURCE_CONTROLLER,4],[d.TaskPriority.SLIDE,0],[d.TaskPriority.STREAM_DATA_LOADER,0],[d.TaskPriority.ELEVATION_QUERY,0],[d.TaskPriority.TERRAIN_SURFACE,1],[d.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[d.TaskPriority.LOD_RENDERER,2],[d.TaskPriority.GRAPHICS_CORE,2],[d.TaskPriority.I3S_CONTROLLER,2],[d.TaskPriority.POINT_CLOUD_LAYER,2],[d.TaskPriority.FEATURE_TILE_FETCHER,2],[d.TaskPriority.OVERLAY,
4],[d.TaskPriority.STAGE,4],[d.TaskPriority.GRAPHICS_DECONFLICTOR,4],[d.TaskPriority.FILTER_VISIBILITY,4],[d.TaskPriority.SCALE_VISIBILITY,4],[d.TaskPriority.FRUSTUM_VISIBILITY,4],[d.TaskPriority.CLOUDS_GENERATOR,4],[d.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[d.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[d.TaskPriority.LABELER,8],[d.TaskPriority.FEATURE_QUERY_ENGINE,8],[d.TaskPriority.FEATURE_TILE_TREE,16],[d.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[d.TaskPriority.ELEVATION_ALIGNMENT,12],[d.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[d.TaskPriority.TEXTURE_UNLOAD,12],[d.TaskPriority.LINE_OF_SIGHT_TOOL,16],[d.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[d.TaskPriority.SNAPPING,0],[d.TaskPriority.SHADOW_ACCUMULATOR,30]]),O=v.Milliseconds(6.5),x=v.Milliseconds(1),z=v.Milliseconds(30),I=v.Milliseconds(1E3/30),W=v.Milliseconds(100);var N;(function(q){let n=function(){function X(){this._updating=r.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new L("total"),tasks:new Map};this._frameTaskTimes=
new Map;this._budget=new K;this._state=c.RenderState.INTERACTING;this._tasks=new C;this._runQueue=new C;this._load=0;this._idleStateCallbacks=new C;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=m.watch(()=>w.SCHEDULER_LOG_SLOW_TASKS,F=>this._debug=F,m.initial);for(const F of Object.keys(d.TaskPriority))this.performanceInfo.tasks.set(d.TaskPriority[F],new L(d.TaskPriority[F]));const V=this;this._test={FRAME_SAFETY_BUDGET:O,INTERACTING_BUDGET:I,IDLE_BUDGET:W,get availableBudget(){return V._budget.budget},
usedBudget:0,getBudget:()=>V._budget,setBudget:F=>V._budget=F,updateTask:F=>this._updateTask(F),getState:F=>this._getState(F),getRuntime:F=>this._getRuntime(F),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var T=X.prototype;T._updatingChanged=function(){this._updating.value=this._tasks.some(V=>V.needsUpdate)};T.destroy=function(){this._tasks.toArray().forEach(V=>V.remove());this._tasks.clear();E.removeMaybe(this._debugHandle);this._microTaskQueued=
!1;this._updatingChanged()};T.taskRunningChanged=function(V){this._updatingChanged();V&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};T.registerTask=function(V,F){const J=h(V);F=new g(this,V,F,J);this._tasks.push(F);this._updatingChanged();this.performanceInfo.tasks.has(V)||this.performanceInfo.tasks.set(V,new L(V));return F};T.registerIdleStateCallbacks=
function(V,F){const J={idleBegin:V,idleEnd:F};this._idleStateCallbacks.push(J);this.state===c.RenderState.IDLE&&this._idleUpdatesStartFired&&J.idleBegin();const ba=this;return{remove:()=>this._removeIdleStateCallbacks(J),set idleBegin(ka){ba._idleUpdatesStartFired&&(J.idleEnd(),ba._state===c.RenderState.IDLE&&ka());J.idleBegin=ka},set idleEnd(ka){J.idleEnd=ka}}};T.updateBudget=function(V){this._test.usedBudget=0;++this._frameNumber;let F=O,J=V.frameDuration,ba=x;switch(this.state){case c.RenderState.IDLE:F=
v.Milliseconds(0);J=v.Milliseconds(Math.max(W,V.frameDuration));ba=z;break;case c.RenderState.INTERACTING:J=v.Milliseconds(Math.max(I,V.frameDuration))}J=v.Milliseconds(J-V.elapsedFrameTime-F);if(this.state!==c.RenderState.IDLE&&J<x&&!this._forceTask)return this._forceTask=!0,!1;J=v.Milliseconds(Math.max(J,ba));this._budget.reset(J,this.state);this._updateLoad();return this._schedule()};T.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case c.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(V=>V.idleBegin()));this._runIdle();break;case c.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};T.stopFrame=function(){this._budget.reset(v.Milliseconds(0),this._state);this._budget.madeProgress()};T._removeIdleStateCallbacks=function(V){this._idleUpdatesStartFired&&V.idleEnd();this._idleStateCallbacks.removeUnordered(V)};T.removeTask=function(V){this._tasks.removeUnordered(V);
this._runQueue.removeUnordered(V);this._updatingChanged()};T._updateTask=function(V){this._tasks.forAll(F=>{F.name===V&&F.setPriority(V)})};T._getState=function(V){if(this._runQueue.some(J=>J.name===V))return d.TaskState.SCHEDULED;let F=d.TaskState.IDLE;this._tasks.forAll(J=>{J.name===V&&J.needsUpdate&&(1>=J.schedulePriority?F=d.TaskState.READY:F!==d.TaskState.READY&&(F=d.TaskState.WAITING))});return F};T._getRuntime=function(V){let F=0;this._tasks.forAll(J=>{J.name===V&&(F+=J.runtime)});return F};
T._resetRuntimes=function(){this._tasks.forAll(V=>V.runtime=0)};T._getRunning=function(){const V=new Map;this._tasks.forAll(J=>{J.needsUpdate&&V.set(J.name,(V.get(J.name)||0)+1)});if(0===V.size)return null;let F="";V.forEach((J,ba)=>{F=1<J?F+` ${J}x ${ba}`:F+` ${ba}`});return F};T._runIdle=function(){this._run()};T._runInteracting=function(){this._run()};T._runAnimating=function(){this._run()};T._updateLoad=function(){const V=this._tasks.reduce((F,J)=>J.needsUpdate?++F:F,0);this._load=.9*this._load+
V*(1-.9)};T._schedule=function(){this._runQueue.filterInPlace(V=>{if(V.needsUpdate)return!0;V.schedulePriority=V.basePriority;return!1});for(this._tasks.forAll(V=>{0===V.basePriority&&V.needsUpdate&&!this._runQueue.includes(V)&&V.blockFrame!==this._frameNumber&&this._runQueue.unshift(V)});0===this._runQueue.length;){let V=!1;this._tasks.forAll(F=>{if(F.needsUpdate&&0!==F.schedulePriority&&0!==F.basePriority&&F.blockFrame!==this._frameNumber)switch(V=!0,F.schedulePriority){case 1:F.schedulePriority=
0;this._runQueue.push(F);break;default:--F.schedulePriority}});if(!V)return this._updatingChanged(),!1}this._updatingChanged();return!0};T._run=function(){const V=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var F=this._budget.now();const J=this._runQueue.pop();this._budget.resetProgress();try{J.task.runTask(this._budget)===d.Task.YIELD&&(J.blockFrame=this._frameNumber)}catch(ba){G.getLogger("esri.views.support.Scheduler").error(`Exception in task "${J.name}"`,
ba)}!this._budget.hasProgressed&&J.blockFrame!==this._frameNumber&&J.needsUpdate&&(J.blockFrame=this._frameNumber);J.schedulePriority=J.basePriority;F=this._budget.now()-F;J.runtime+=F;this._frameTaskTimes.set(J.priority,this._frameTaskTimes.get(J.priority)+F);this._debug&&F>2*this._budget.budget&&console.log("Task",J.name,"used",F,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-V);return}}while(this._schedule());
this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-V)};T._startFrameTaskTimes=function(){for(const V of Object.keys(d.TaskPriority))this._frameTaskTimes.set(d.TaskPriority[V],0)};T._recordFrameTaskTimes=function(V){this._frameTaskTimes.forEach((F,J)=>this.performanceInfo.tasks.get(J).record(F));this.performanceInfo.total.record(V)};b._createClass(X,[{key:"updating",get:function(){return this._updating.value}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},
set:function(V){this._state!==V&&(this._state=V,this.state!==c.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(F=>F.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return X}();q.Scheduler=n;let g=function(){function X(V,F,J,ba){this._scheduler=V;this.name=F;this._basePriority=ba;this.runtime=this.blockFrame=0;this._queue=new t.PromiseQueue;this._handles=new M;this.schedulePriority=this._basePriority;this._task=r.signal(null!=
J?J:this._queue);this._handles.add(m.when(()=>this.task.running,ka=>V.taskRunningChanged(ka)))}var T=X.prototype;T.remove=function(){this.processQueue(l);this._scheduler.removeTask(this);this.schedule=y.schedule;this.reschedule=y.reschedule;this._handles.destroy()};T.setPriority=function(V){this.name=V;V=h(V);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=V;this._basePriority=V};T.schedule=function(V,F,J){return this._queue.push(V,F,J)};T.reschedule=function(V,F,J){return this._queue.unshift(V,
F,J)};T.processQueue=function(V){this._queue.runTask(V)};b._createClass(X,[{key:"task",get:function(){return this._task.value}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(V){this.setPriority(V)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return X}(),K=function(){function X(){this._begin="undefined"!==typeof performance?performance.now():
0;this._budget=0;this._state=c.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var T=X.prototype;T.run=function(V){if(this.done)return!1;!0===V()&&this.madeProgress();return!0};T.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};T.reset=function(V,F){this._begin=this.now();this._budget=V;this._state=F;this.resetProgress()};T.now=function(){return performance.now()};T.resetProgress=function(){this._done=this._progressed=!1};b._createClass(X,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(V){this._enabled=V}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return X}();q.Budget=K})(N||(N={}));d.TaskState=void 0;
(function(q){q.SCHEDULED="s";q.READY="r";q.WAITING="w";q.IDLE="i"})(d.TaskState||(d.TaskState={}));const l=(()=>{const q=new N.Budget;q.enabled=!1;return q})(),y=new (function(){function q(){}var n=q.prototype;n.remove=function(){};n.processQueue=function(){};n.schedule=function(g,K,X){try{if(p.isAborted(K)){const T=p.createAbortError();return X?Promise.resolve(X(T)):Promise.reject(T)}return p.when(g(l))}catch(T){return Promise.reject(T)}};n.reschedule=function(g,K,X){return this.schedule(g,K,X)};
return b._createClass(q)}());d.ImmediateTask=y;d.getTaskPriority=h;d.newScheduler=function(){return new N.Scheduler};d.noBudget=l;d.taskPriorities=B;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(d,b,M,P,G){let E=function(){function L(C,p){this._observable=new G.SimpleObservable;this._value=C;this._equalityFunction=
p}L.prototype.mutate=function(C){C(this._value);this._observable.notify()};b._createClass(L,[{key:"value",get:function(){P.trackAccess(this._observable);return this._value},set:function(C){this._equalityFunction(C,this._value)||(this._value=C,this._observable.notify())}}]);return L}();d.signal=function(L,C=M.equalsShallow){return new E(L,C)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../../core/promiseUtils","../../core/signal"],function(d,b,M,P){let G=function(){function L(){this._tasks=[];this._running=P.signal(!1)}var C=L.prototype;C.destroy=function(){this.cancelAll()};C.runTask=function(p){for(;!p.done&&this._process(p);)p.madeProgress()};C.push=function(p,m,r){this._running.value=!0;return new Promise((v,t)=>this._tasks.push(new E(v,t,p,m,r)))};C.unshift=function(p,m,r){this._running.value=!0;return new Promise((v,t)=>this._tasks.unshift(new E(v,t,p,m,r)))};C._process=
function(p){if(0===this._tasks.length)return!1;const m=this._tasks.shift();try{const r=M.isAborted(m.signal);if(r&&!m.abortCallback)m.reject(M.createAbortError());else{const v=r?m.abortCallback?.(M.createAbortError()):m.callback(p);M.isPromiseLike(v)?v.then(m.resolve,m.reject):m.resolve(v)}}catch(r){m.reject(r)}this._running.value=0<this._tasks.length;return!0};C.cancelAll=function(){const p=M.createAbortError();for(const m of this._tasks)if(m.abortCallback){const r=m.abortCallback(p);m.resolve(r)}else m.reject(p);
this._tasks.length=0;this._running.value=!1};b._createClass(L,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.value}}]);return L}(),E=b._createClass(function(L,C,p,m,r){this.resolve=L;this.reject=C;this.callback=p;this.signal=m;this.abortCallback=r});d.PromiseQueue=G;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,b,M,P,G,E,L,C){M=function(p){function m(){var r=p.apply(this,arguments)||this;r.SCHEDULER_LOG_SLOW_TASKS=!1;r.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return r}d._inherits(m,p);return d._createClass(m)}(M);b.__decorate([P.property()],M.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);b.__decorate([P.property()],M.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);M=b.__decorate([C.subclass("esri.views.support.DebugFlags")],M);return new M})},"esri/views/support/RenderState":function(){define(["exports"],
function(d){d.RenderState=void 0;var b=d.RenderState||(d.RenderState={});b[b.ANIMATING=0]="ANIMATING";b[b.INTERACTING=1]="INTERACTING";b[b.IDLE=2]="IDLE";Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t,w,c,h,B,O,x){var z;M=new M.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});P=z=function(I){function W(l){l=I.call(this,l)||this;l.dpi=96;l.format=null;l.origin=null;l.size=null;l.spatialReference=null;return l}d._inherits(W,I);W.create=function(l={}){const {resolutionFactor:y=
1,scales:q,size:n=256,spatialReference:g=w.WebMercator,numLODs:K=24}=l;if(!h.isValid(g)){l=[];if(q)for(var X=0;X<q.length;X++){var T=q[X];l.push(new O({level:X,scale:T,resolution:T}))}else for(X=5E-4,T=K-1;0<=T;T--)l.unshift(new O({level:T,scale:X,resolution:X})),X*=2;return new z({dpi:96,lods:l,origin:new t(0,0,g),size:[n,n],spatialReference:g})}X=h.getInfo(g);l=l.origin?new t({x:l.origin.x,y:l.origin.y,spatialReference:g}):X?new t({x:X.origin[0],y:X.origin[1],spatialReference:g}):new t({x:0,y:0,
spatialReference:g});X=1/(39.37*G.getMetersPerUnitForSR(g)*96);T=[];if(q)for(var V=0;V<q.length;V++){var F=q[V];T.push(new O({level:V,scale:F,resolution:F*X}))}else{var J=h.isGeographic(g)?512/n*5.916575275917094E8:256/n*5.91657527591555E8;V=Math.ceil(K/y);T.push(new O({level:0,scale:J,resolution:J*X}));for(F=1;F<V;F++)J/=2**y,T.push(new O({level:F,scale:J,resolution:J*X}))}return new z({dpi:96,lods:T,origin:l,size:[n,n],spatialReference:g})};var N=W.prototype;N.readOrigin=function(l,y){return t.fromJSON({spatialReference:y.spatialReference,
...l})};N.readSize=function(l,y){return[y.cols,y.rows]};N.writeSize=function(l,y){y.cols=l[0];y.rows=l[1]};N.zoomToScale=function(l){const y=this.scales;if(0>=l)return y[0];if(l>=y.length-1)return y[y.length-1];const q=Math.floor(l);return y[q]/(y[q]/y[q+1])**(l-q)};N.scaleToZoom=function(l){const y=this.scales,q=y.length-1;let n=0;for(;n<q;n++){const g=y[n],K=y[n+1];if(g<=l)break;if(K===l)return n+1;if(g>l&&K<l)return n+Math.log(g/l)/Math.log(g/K)}return n};N.snapScale=function(l,y=.95){l=this.scaleToZoom(l);
return l%Math.floor(l)>=y?this.zoomToScale(Math.ceil(l)):this.zoomToScale(Math.floor(l))};N.tileAt=function(l,y,q,n){var g=this.lodAt(l);if(!g)return null;let K;if("number"===typeof y)K=y,y=q;else{if(h.equals(y.spatialReference,this.spatialReference))K=y.x,y=y.y;else{n=B.project(y,this.spatialReference);if(null==n)return null;K=n.x;y=n.y}n=q}q=g.resolution*this.size[0];g=g.resolution*this.size[1];n||(n=new x.TileKey(null,0,0,0,c.create()));n.level=l;n.row=Math.floor((this.origin.y-y)/g+.001);n.col=
Math.floor((K-this.origin.x)/q+.001);this.updateTileInfo(n);return n};N.updateTileInfo=function(l,y=z.ExtrapolateOptions.NONE){var q=this.lodAt(l.level);q||y!==z.ExtrapolateOptions.POWER_OF_TWO||(y=this.lods[this.lods.length-1],y.level<l.level&&(q=y));if(q){var n=l.level-q.level;y=q.resolution*this.size[0]/2**n;q=q.resolution*this.size[1]/2**n;l.id=`${l.level}/${l.row}/${l.col}`;l.extent||(l.extent=c.create());l.extent[0]=this.origin.x+l.col*y;l.extent[1]=this.origin.y-(l.row+1)*q;l.extent[2]=l.extent[0]+
y;l.extent[3]=l.extent[1]+q}};N.upsampleTile=function(l){const y=this._upsampleLevels[l.level];if(!y||-1===y.parentLevel)return!1;l.level=y.parentLevel;l.row=Math.floor(l.row/y.factor+.001);l.col=Math.floor(l.col/y.factor+.001);this.updateTileInfo(l);return!0};N.getTileBounds=function(l,y){var q=this.lodAt(y.level);if(null==q)return null;var {resolution:n}=q;q=n*this.size[0];n*=this.size[1];l[0]=this.origin.x+y.col*q;l[1]=this.origin.y-(y.row+1)*n;l[2]=l[0]+q;l[3]=l[1]+n;return l};N.lodAt=function(l){return this._levelToLOD?.[l]??
null};N.clone=function(){return z.fromJSON(this.write({}))};N.getOrCreateCompatible=function(l,y){if(256===this.size[0]&&256===this.size[1])return 256===l?this:null;const q=[],n=this.lods.length;for(let g=0;g<n;g++){const K=this.lods[g];q.push(new O({level:K.level,scale:K.scale,resolution:K.resolution*y}))}return new z({size:[l,l],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:q})};N._initializeUpsampleLevels=
function(){const l=this.lods;this._upsampleLevels=[];let y=null;for(let q=0;q<l.length;q++){const n=l[q];this._upsampleLevels[n.level]={parentLevel:y?y.level:-1,factor:y?y.resolution/n.resolution:0};y=n}};d._createClass(W,[{key:"isWrappable",get:function(){const {spatialReference:l,origin:y}=this;if(l&&y){const q=h.getInfo(l);return l.isWrappable&&!!q&&Math.abs(q.origin[0]-y.x)<=q.dx}return!1}},{key:"lods",set:function(l){const y=[],q=this._levelToLOD={};l&&l.forEach(n=>{y.push(n.scale);q[n.level]=
n});this._set("scales",y);this._set("lods",l);this._initializeUpsampleLevels()}}]);return W}(P.JSONSupport);b.__decorate([E.property({type:Number,json:{write:!0}})],P.prototype,"compressionQuality",void 0);b.__decorate([E.property({type:Number,json:{write:!0}})],P.prototype,"dpi",void 0);b.__decorate([E.property({type:String,json:{read:M.read,write:M.write,origins:{"web-scene":{read:!1,write:!1}}}})],P.prototype,"format",void 0);b.__decorate([E.property({readOnly:!0})],P.prototype,"isWrappable",null);
b.__decorate([E.property({type:t,json:{write:!0}})],P.prototype,"origin",void 0);b.__decorate([m.reader("origin")],P.prototype,"readOrigin",null);b.__decorate([E.property({type:[O],value:null,json:{write:!0}})],P.prototype,"lods",null);b.__decorate([E.property({readOnly:!0})],P.prototype,"scales",void 0);b.__decorate([E.property({cast:I=>Array.isArray(I)?I:"number"===typeof I?[I,I]:[256,256]})],P.prototype,"size",void 0);b.__decorate([m.reader("size",["rows","cols"])],P.prototype,"readSize",null);
b.__decorate([v.writer("size",{cols:{type:L.Integer},rows:{type:L.Integer}})],P.prototype,"writeSize",null);b.__decorate([E.property({type:w,json:{write:!0}})],P.prototype,"spatialReference",void 0);P=z=b.__decorate([r.subclass("esri.layers.support.TileInfo")],P);(function(I){I=I.ExtrapolateOptions||(I.ExtrapolateOptions={});I[I.NONE=0]="NONE";I[I.POWER_OF_TWO=1]="POWER_OF_TWO"})(P||(P={}));return P})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,b,M,P,G,E,L,C){var p;M=p=function(m){function r(v){v=m.call(this,v)||this;v.cols=null;v.level=0;v.levelValue=null;v.origin=null;v.resolution=0;v.rows=null;v.scale=0;return v}d._inherits(r,m);r.prototype.clone=function(){return new p({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return d._createClass(r)}(M.JSONSupport);b.__decorate([P.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,
write:!1}}}})],M.prototype,"cols",void 0);b.__decorate([P.property({type:G.Integer,json:{write:!0}})],M.prototype,"level",void 0);b.__decorate([P.property({type:String,json:{write:!0}})],M.prototype,"levelValue",void 0);b.__decorate([P.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],M.prototype,"origin",void 0);b.__decorate([P.property({type:Number,json:{write:!0}})],M.prototype,"resolution",void 0);b.__decorate([P.property({json:{write:!0,
origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],M.prototype,"rows",void 0);b.__decorate([P.property({type:Number,json:{write:!0}})],M.prototype,"scale",void 0);return M=p=b.__decorate([C.subclass("esri.layers.support.LOD")],M)})},"esri/layers/support/TileKey":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(d,b){b=b._createClass(function(M,P,G,E,L){this.id=M;this.level=P;this.row=G;this.col=E;this.extent=L});d.TileKey=b;Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./FullTextSearch ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t,w,c,h,B,O,x,z){var I;const W=new G.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});G=new G.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});E=I=function(N){function l(q){q=N.call(this,q)||this;q.aggregateIds=null;q.cacheHint=void 0;q.compactGeometryEnabled=!1;q.datumTransformation=null;q.defaultSpatialReferenceEnabled=!1;q.distance=void 0;q.dynamicDataSource=void 0;q.formatOf3DObjects=null;q.fullText=null;q.gdbVersion=null;q.geometry=null;q.geometryPrecision=void 0;q.groupByFieldsForStatistics=
null;q.having=null;q.historicMoment=null;q.maxAllowableOffset=void 0;q.maxRecordCountFactor=1;q.multipatchOption=null;q.num=void 0;q.objectIds=null;q.orderByFields=null;q.outFields=null;q.outSpatialReference=null;q.outStatistics=null;q.parameterValues=null;q.pixelSize=null;q.quantizationParameters=null;q.rangeValues=null;q.relationParameter=null;q.resultType=null;q.returnCentroid=!1;q.returnDistinctValues=!1;q.returnExceededLimitFeatures=!0;q.returnGeometry=!1;q.returnQueryGeometry=!1;q.returnM=void 0;
q.returnZ=void 0;q.sourceSpatialReference=null;q.spatialRelationship="intersects";q.start=void 0;q.sqlFormat=null;q.text=null;q.timeExtent=null;q.timeReferenceUnknownClient=!1;q.units=null;q.where=null;return q}d._inherits(l,N);l.from=function(q){return t.ensureClass(I,q)};var y=l.prototype;y.castDatumTransformation=function(q){return"number"===typeof q||"object"===typeof q?q:null};y.writeHistoricMoment=function(q,n){n.historicMoment=q&&q.getTime()};y.writeParameterValues=function(q,n){if(q){const g=
{};for(const K in q){const X=q[K];Array.isArray(X)?g[K]=X.map(T=>T instanceof Date?T.getTime():T):g[K]=X instanceof Date?X.getTime():X}n.parameterValues=g}};y.writeStart=function(q,n){n.resultOffset=this.start;n.resultRecordCount=this.num||10;n.where="1\x3d1"};y.writeWhere=function(q,n){n.where=q||"1\x3d1"};y.clone=function(){return new I(L.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,
defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:null!=this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))};return d._createClass(l)}(E.JSONSupport);
E.MAX_MAX_RECORD_COUNT_FACTOR=5;b.__decorate([C.property({json:{write:!0}})],E.prototype,"aggregateIds",void 0);b.__decorate([C.property({type:Boolean,json:{write:!0}})],E.prototype,"cacheHint",void 0);b.__decorate([C.property({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"compactGeometryEnabled",void 0);b.__decorate([C.property({json:{write:!0}})],E.prototype,"datumTransformation",void 0);b.__decorate([p.cast("datumTransformation")],E.prototype,"castDatumTransformation",null);b.__decorate([C.property({type:Boolean,
json:{default:!1,write:!0}})],E.prototype,"defaultSpatialReferenceEnabled",void 0);b.__decorate([C.property({type:Number,json:{write:{overridePolicy(N){return{enabled:0<N}}}}})],E.prototype,"distance",void 0);b.__decorate([C.property({type:c.DataLayerSource,json:{write:!0}})],E.prototype,"dynamicDataSource",void 0);b.__decorate([C.property({type:String,json:{write:!0}})],E.prototype,"formatOf3DObjects",void 0);b.__decorate([C.property({type:[h],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=
this.fullText&&0<this.fullText.length}}}}})],E.prototype,"fullText",void 0);b.__decorate([C.property({type:String,json:{write:!0}})],E.prototype,"gdbVersion",void 0);b.__decorate([C.property({types:M.geometryTypes,json:{read:w.fromJSON,write:!0}})],E.prototype,"geometry",void 0);b.__decorate([C.property({type:Number,json:{write:!0}})],E.prototype,"geometryPrecision",void 0);b.__decorate([C.property({type:[String],json:{write:!0}})],E.prototype,"groupByFieldsForStatistics",void 0);b.__decorate([C.property({type:String,
json:{write:!0}})],E.prototype,"having",void 0);b.__decorate([C.property({type:Date})],E.prototype,"historicMoment",void 0);b.__decorate([v.writer("historicMoment")],E.prototype,"writeHistoricMoment",null);b.__decorate([C.property({type:Number,json:{write:!0}})],E.prototype,"maxAllowableOffset",void 0);b.__decorate([C.property({type:Number,cast(N){return 1>N?1:N>I.MAX_MAX_RECORD_COUNT_FACTOR?I.MAX_MAX_RECORD_COUNT_FACTOR:N},json:{write:{overridePolicy(N){return{enabled:1<N}}}}})],E.prototype,"maxRecordCountFactor",
void 0);b.__decorate([C.property({type:["xyFootprint"],json:{write:!0}})],E.prototype,"multipatchOption",void 0);b.__decorate([C.property({type:Number,json:{read:{source:"resultRecordCount"}}})],E.prototype,"num",void 0);b.__decorate([C.property({json:{write:!0}})],E.prototype,"objectIds",void 0);b.__decorate([C.property({type:[String],json:{write:!0}})],E.prototype,"orderByFields",void 0);b.__decorate([C.property({type:[String],json:{write:!0}})],E.prototype,"outFields",void 0);b.__decorate([C.property({type:x,
json:{name:"outSR",write:!0}})],E.prototype,"outSpatialReference",void 0);b.__decorate([C.property({type:[O],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.outStatistics&&0<this.outStatistics.length}}}}})],E.prototype,"outStatistics",void 0);b.__decorate([C.property({json:{write:!0}})],E.prototype,"parameterValues",void 0);b.__decorate([v.writer("parameterValues")],E.prototype,"writeParameterValues",null);b.__decorate([C.property({type:z,json:{write:!0}})],E.prototype,"pixelSize",
void 0);b.__decorate([C.property({type:B,json:{write:!0}})],E.prototype,"quantizationParameters",void 0);b.__decorate([C.property({type:[Object],json:{write:!0}})],E.prototype,"rangeValues",void 0);b.__decorate([C.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],E.prototype,"relationParameter",void 0);b.__decorate([C.property({type:String,json:{write:!0}})],E.prototype,"resultType",
void 0);b.__decorate([C.property({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnCentroid",void 0);b.__decorate([C.property({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnDistinctValues",void 0);b.__decorate([C.property({type:Boolean,json:{default:!0,write:!0}})],E.prototype,"returnExceededLimitFeatures",void 0);b.__decorate([C.property({type:Boolean,json:{write:!0}})],E.prototype,"returnGeometry",void 0);b.__decorate([C.property({type:Boolean,json:{default:!1,write:!0}})],
E.prototype,"returnQueryGeometry",void 0);b.__decorate([C.property({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnM",void 0);b.__decorate([C.property({type:Boolean,json:{write:{overridePolicy(N){return{enabled:N}}}}})],E.prototype,"returnZ",void 0);b.__decorate([C.property({type:x,json:{write:!0}})],E.prototype,"sourceSpatialReference",void 0);b.__decorate([m.enumeration(W,{ignoreUnknown:!1,name:"spatialRel"})],E.prototype,"spatialRelationship",void 0);b.__decorate([C.property({type:Number,
json:{read:{source:"resultOffset"}}})],E.prototype,"start",void 0);b.__decorate([v.writer("start"),v.writer("num")],E.prototype,"writeStart",null);b.__decorate([C.property({type:String,json:{write:!0}})],E.prototype,"sqlFormat",void 0);b.__decorate([C.property({type:String,json:{write:!0}})],E.prototype,"text",void 0);b.__decorate([C.property({type:P,json:{write:!0}})],E.prototype,"timeExtent",void 0);b.__decorate([C.property({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"timeReferenceUnknownClient",
void 0);b.__decorate([m.enumeration(G,{ignoreUnknown:!1}),C.property({json:{write:{overridePolicy(N){return{enabled:!!N&&null!=this.distance&&0<this.distance}}}}})],E.prototype,"units",void 0);b.__decorate([C.property({type:String,json:{write:{overridePolicy(N){return{enabled:null!=N||null!=this.start&&0<this.start}}}}})],E.prototype,"where",void 0);b.__decorate([v.writer("where")],E.prototype,"writeWhere",null);return E=I=b.__decorate([r.subclass("esri.rest.support.Query")],E)})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/arrayUtils ./core/has ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v){var t;M=t=function(h){function B(x){x=h.call(this,x)||this;x.end=null;x.start=null;return x}d._inherits(B,h);var O=B.prototype;O.readEnd=function(x,z){return null!=z.end?new Date(z.end):null};O.writeEnd=function(x,z){z.end=x?x.getTime():null};O.readStart=function(x,z){return null!=z.start?new Date(z.start):null};O.writeStart=function(x,z){z.start=x?x.getTime():null};O.clone=function(){return new t({end:this.end,start:this.start})};O.equals=function(x){if(!x)return!1;
const z=null!=this.start?this.start.getTime():this.start,I=null!=this.end?this.end.getTime():this.end,W=null!=x.start?x.start.getTime():x.start;x=null!=x.end?x.end.getTime():x.end;return z===W&&I===x};O.expandTo=function(x){if(this.isEmpty||this.isAllTime)return this.clone();const z=P.applySome(this.start,W=>G.truncateDate(W,x)),I=P.applySome(this.end,W=>{const N=G.truncateDate(W,x);return W.getTime()===N.getTime()?N:G.offsetDate(N,1,x)});return new t({start:z,end:I})};O.intersection=function(x){if(!x)return this.clone();
if(this.isEmpty||x.isEmpty)return t.empty;if(this.isAllTime)return x.clone();if(x.isAllTime)return this.clone();var z=this.start?.getTime()??-Infinity;const I=this.end?.getTime()??Infinity,W=x.start?.getTime()??-Infinity;x=x.end?.getTime()??Infinity;let N,l;W>=z&&W<=I?N=W:z>=W&&z<=x&&(N=z);I>=W&&I<=x?l=I:x>=z&&x<=I&&(l=x);return null==N||null==l||isNaN(N)||isNaN(l)?t.empty:(z=new t,z.start=-Infinity===N?null:new Date(N),z.end=Infinity===l?null:new Date(l),z)};O.offset=function(x,z){if(this.isEmpty||
this.isAllTime)return this.clone();const I=new t,{start:W,end:N}=this;null!=W&&(I.start=G.offsetDate(W,x,z));null!=N&&(I.end=G.offsetDate(N,x,z));return I};O.union=function(x){if(!x||x.isEmpty)return this.clone();if(this.isEmpty)return x.clone();if(this.isAllTime||x.isAllTime)return w.clone();const z=null!=this.start&&null!=x.start?new Date(Math.min(this.start.getTime(),x.start.getTime())):null;x=null!=this.end&&null!=x.end?new Date(Math.max(this.end.getTime(),x.end.getTime())):null;return new t({start:z,
end:x})};d._createClass(B,[{key:"isAllTime",get:function(){return this.equals(t.allTime)}},{key:"isEmpty",get:function(){return this.equals(t.empty)}}],[{key:"allTime",get:function(){return w}},{key:"empty",get:function(){return c}}]);return B}(M.JSONSupport);b.__decorate([E.property({type:Date,json:{write:{allowNull:!0}}})],M.prototype,"end",void 0);b.__decorate([m.reader("end")],M.prototype,"readEnd",null);b.__decorate([v.writer("end")],M.prototype,"writeEnd",null);b.__decorate([E.property({readOnly:!0,
json:{read:!1}})],M.prototype,"isAllTime",null);b.__decorate([E.property({readOnly:!0,json:{read:!1}})],M.prototype,"isEmpty",null);b.__decorate([E.property({type:Date,json:{write:{allowNull:!0}}})],M.prototype,"start",void 0);b.__decorate([m.reader("start")],M.prototype,"readStart",null);b.__decorate([v.writer("start")],M.prototype,"writeStart",null);M=t=b.__decorate([r.subclass("esri.TimeExtent")],M);const w=new M,c=new M({start:void 0,end:void 0});return M})},"esri/core/timeUtils":function(){define(["exports",
"./has"],function(d,b){function M(E,L,C){return 0===E?0:E*P[L]/P[C]}const P={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},G={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",
setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};d.convertTime=M;d.isValidDate=function(E){return E instanceof Date&&!isNaN(E.getTime())};d.makeUTCTime=function(E,L,C="milliseconds"){L=new Date(M(L,C,"milliseconds"));
L.setUTCFullYear(E.getUTCFullYear(),E.getUTCMonth(),E.getUTCDate());return L};d.offsetDate=function(E,L,C){E=new Date(E.getTime());if(L&&C){const {getter:m,setter:r,multiplier:v}=G[C];if("months"===C){C=E.getFullYear();var p=E.getMonth()+L;C=new Date(C,p+1,1);C.setDate(0);C=C.getDate();E.getDate()>C&&E.setDate(C)}E[r](E[m]()+L*v)}return E};d.offsetDateUTC=function(E,L,C="milliseconds"){E=E.getTime();L=M(L,C,"milliseconds");return new Date(E+L)};d.resetUTCDate=function(E,L){E=new Date(E.getTime());
E.setUTCFullYear(L.getFullYear(),L.getMonth(),L.getDate());return E};d.timeSinceUTCMidnight=function(E,L="milliseconds"){const C=M(E.getUTCHours(),"hours","milliseconds"),p=M(E.getUTCMinutes(),"minutes","milliseconds"),m=M(E.getUTCSeconds(),"seconds","milliseconds");E=E.getUTCMilliseconds();return M(C+p+m+E,"milliseconds",L)};d.truncateDate=function(E,L){switch(L){case "milliseconds":return new Date(E.getTime());case "seconds":return new Date(E.getFullYear(),E.getMonth(),E.getDate(),E.getHours(),
E.getMinutes(),E.getSeconds());case "minutes":return new Date(E.getFullYear(),E.getMonth(),E.getDate(),E.getHours(),E.getMinutes());case "hours":return new Date(E.getFullYear(),E.getMonth(),E.getDate(),E.getHours());case "days":return new Date(E.getFullYear(),E.getMonth(),E.getDate());case "weeks":return new Date(E.getFullYear(),E.getMonth(),E.getDate()-E.getDay());case "months":return new Date(E.getFullYear(),E.getMonth(),1);case "years":return new Date(E.getFullYear(),0,1);case "decades":return new Date(E.getFullYear()-
E.getFullYear()%10,0,1);case "centuries":return new Date(E.getFullYear()-E.getFullYear()%100,0,1);default:return new Date}};d.truncateLocalTime=function(E){const L=new Date(0);L.setHours(0);L.setMinutes(0);L.setSeconds(0);L.setMilliseconds(0);L.setFullYear(E.getUTCFullYear(),E.getUTCMonth(),E.getUTCDate());return L};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t,w,c,h,B){function O(){W||(W=v.createTypeReader({types:x()}));return W}function x(){N||(N={key:"type",base:null,typeMap:{"data-layer":d.DataLayerSource,"map-layer":w.MapLayerSource}});return N}var z,I;P=P.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});d.JoinTableDataSource=z=function(l){function y(n){n=l.call(this,n)||this;n.type="join-table";return n}b._inherits(y,l);var q=y.prototype;q.readLeftTableSource=function(n,g,K){return O()(n,
g,K)};q.castLeftTableSource=function(n){return r.ensureOneOfType(x(),n)};q.readRightTableSource=function(n,g,K){return O()(n,g,K)};q.castRightTableSource=function(n){return r.ensureOneOfType(x(),n)};q.clone=function(){const {leftTableKey:n,rightTableKey:g,leftTableSource:K,rightTableSource:X,joinType:T}=this,V={leftTableKey:n,rightTableKey:g,leftTableSource:K?.clone()??void 0,rightTableSource:X?.clone()??void 0,joinType:T};return new z(V)};return b._createClass(y)}(G.JSONSupport);M.__decorate([C.enumeration({joinTable:"join-table"})],
d.JoinTableDataSource.prototype,"type",void 0);M.__decorate([E.property({type:String,json:{write:!0}})],d.JoinTableDataSource.prototype,"leftTableKey",void 0);M.__decorate([E.property({type:String,json:{write:!0}})],d.JoinTableDataSource.prototype,"rightTableKey",void 0);M.__decorate([E.property({json:{write:!0}})],d.JoinTableDataSource.prototype,"leftTableSource",void 0);M.__decorate([p.reader("leftTableSource")],d.JoinTableDataSource.prototype,"readLeftTableSource",null);M.__decorate([L.cast("leftTableSource")],
d.JoinTableDataSource.prototype,"castLeftTableSource",null);M.__decorate([E.property({json:{write:!0}})],d.JoinTableDataSource.prototype,"rightTableSource",void 0);M.__decorate([p.reader("rightTableSource")],d.JoinTableDataSource.prototype,"readRightTableSource",null);M.__decorate([L.cast("rightTableSource")],d.JoinTableDataSource.prototype,"castRightTableSource",null);M.__decorate([C.enumeration(P)],d.JoinTableDataSource.prototype,"joinType",void 0);d.JoinTableDataSource=z=M.__decorate([m.subclass("esri.layers.support.source.JoinTableDataSource")],
d.JoinTableDataSource);let W=null,N=null;L={key:"type",base:null,typeMap:{"join-table":d.JoinTableDataSource,"query-table":c.QueryTableDataSource,raster:h.RasterDataSource,table:B.TableDataSource}};d.DataLayerSource=I=function(l){function y(q){q=l.call(this,q)||this;q.type="data-layer";return q}b._inherits(y,l);y.prototype.clone=function(){const {fields:q,dataSource:n}=this;return new I({fields:q,dataSource:n})};return b._createClass(y)}(G.JSONSupport);M.__decorate([C.enumeration({dataLayer:"data-layer"})],
d.DataLayerSource.prototype,"type",void 0);M.__decorate([E.property({type:[t],json:{write:!0}})],d.DataLayerSource.prototype,"fields",void 0);M.__decorate([E.property({types:L,json:{write:!0}})],d.DataLayerSource.prototype,"dataSource",void 0);d.DataLayerSource=I=M.__decorate([m.subclass("esri.layers.support.source.DataLayerSource")],d.DataLayerSource);d.DataLayerSource.from=r.ensureType(d.DataLayerSource);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t){var w;const c=new M.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});M=w=function(h){function B(x){x=h.call(this,x)||this;
x.alias=null;x.defaultValue=void 0;x.description=null;x.domain=null;x.editable=!0;x.length=-1;x.name=null;x.nullable=!0;x.type=null;x.valueType=null;x.visible=!0;return x}d._inherits(B,h);var O=B.prototype;O.readDescription=function(x,{description:z}){x=null;try{x=z?JSON.parse(z):null}catch(I){}return x?.value??null};O.readValueType=function(x,{description:z}){x=null;try{x=z?JSON.parse(z):null}catch(I){}return x?c.fromJSON(x.fieldValueType):null};O.clone=function(){return new w({alias:this.alias,
defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})};return d._createClass(B)}(P.JSONSupport);b.__decorate([G.property({type:String,json:{write:!0}})],M.prototype,"alias",void 0);b.__decorate([G.property({type:[String,Number],json:{write:{allowNull:!0}}})],M.prototype,"defaultValue",void 0);b.__decorate([G.property()],
M.prototype,"description",void 0);b.__decorate([m.reader("description")],M.prototype,"readDescription",null);b.__decorate([G.property({types:v.types,json:{read:{reader:v.fromJSON},write:!0}})],M.prototype,"domain",void 0);b.__decorate([G.property({type:Boolean,json:{write:!0}})],M.prototype,"editable",void 0);b.__decorate([G.property({type:E.Integer,json:{write:!0}})],M.prototype,"length",void 0);b.__decorate([G.property({type:String,json:{write:!0}})],M.prototype,"name",void 0);b.__decorate([G.property({type:Boolean,
json:{write:!0}})],M.prototype,"nullable",void 0);b.__decorate([p.enumeration(t.kebabDict)],M.prototype,"type",void 0);b.__decorate([G.property()],M.prototype,"valueType",void 0);b.__decorate([m.reader("valueType",["description"])],M.prototype,"readValueType",null);b.__decorate([G.property({type:Boolean,json:{read:!1}})],M.prototype,"visible",void 0);return M=w=b.__decorate([r.subclass("esri.layers.support.Field")],M)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(d,b,M,P,G,E){b={key:"type",base:P,typeMap:{range:E,"coded-value":M,inherited:G}};d.CodedValueDomain=M;d.DomainBase=P;d.InheritedDomain=G;d.RangeDomain=E;d.fromJSON=function(L){if(!L||!L.type)return null;switch(L.type){case "range":return E.fromJSON(L);case "codedValue":return M.fromJSON(L);case "inherited":return G.fromJSON(L)}return null};d.types=b;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(d,b,M,P,G,E,L,C,p){var m;G=m=function(r){function v(w){w=r.call(this,w)||this;w.codedValues=null;w.type="coded-value";return w}d._inherits(v,r);var t=v.prototype;t.getName=function(w){let c=null;if(this.codedValues){const h=String(w);this.codedValues.some(B=>{String(B.code)===h&&(c=B.name);return!!c})}return c};t.clone=function(){return new m({codedValues:M.clone(this.codedValues),name:this.name})};return d._createClass(v)}(p);b.__decorate([P.property({type:[C.CodedValue],json:{write:!0}})],
G.prototype,"codedValues",void 0);b.__decorate([E.enumeration({codedValue:"coded-value"})],G.prototype,"type",void 0);return G=m=b.__decorate([L.subclass("esri.layers.support.CodedValueDomain")],G)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,b,M,P,G,E,L,C,p){var m;d.CodedValue=m=function(r){function v(t){t=r.call(this,t)||this;t.name=null;t.code=null;return t}b._inherits(v,r);v.prototype.clone=function(){return new m({name:this.name,code:this.code})};return b._createClass(v)}(P.JSONSupport);M.__decorate([G.property({type:String,json:{write:!0}})],d.CodedValue.prototype,"name",void 0);M.__decorate([G.property({type:[String,Number],json:{write:!0}})],d.CodedValue.prototype,"code",void 0);d.CodedValue=m=M.__decorate([p.subclass("esri.layers.support.CodedValue")],
d.CodedValue);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(d,b,M,P,G,E,L,C,p,m){M=new M.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});P=function(r){function v(t){t=r.call(this,t)||this;t.name=null;t.type=null;return t}d._inherits(v,r);return d._createClass(v)}(P.JSONSupport);b.__decorate([G.property({type:String,json:{write:!0}})],P.prototype,"name",void 0);b.__decorate([p.enumeration(M)],P.prototype,"type",void 0);return P=b.__decorate([m.subclass("esri.layers.support.Domain")],P)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(d,b,M,P,G,E,L,C,p,m){var r;M=r=function(v){function t(w){w=v.call(this,w)||this;w.type="inherited";return w}d._inherits(t,v);t.prototype.clone=function(){return new r};return d._createClass(t)}(m);b.__decorate([C.enumeration({inherited:"inherited"})],M.prototype,"type",void 0);return M=r=b.__decorate([p.subclass("esri.layers.support.InheritedDomain")],M)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(d,b,M,P,G,E,L,C,p){var m;P=m=function(r){function v(t){t=r.call(this,t)||this;t.maxValue=null;t.minValue=null;t.type="range";return t}d._inherits(v,r);v.prototype.clone=function(){return new m({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return d._createClass(v)}(p);b.__decorate([M.property({type:Number,json:{type:[Number],read:{source:"range",reader(r,v){return v.range&&v.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},
target:"range",writer(r,v,t){v[t]=[this.minValue||0,r]}}}})],P.prototype,"maxValue",void 0);b.__decorate([M.property({type:Number,json:{type:[Number],read:{source:"range",reader(r,v){return v.range&&v.range[0]}},write:{target:"range",writer(r,v,t){v[t]=[r,this.maxValue||0]}}}})],P.prototype,"minValue",void 0);b.__decorate([L.enumeration({range:"range"})],P.prototype,"type",void 0);return P=m=b.__decorate([C.subclass("esri.layers.support.RangeDomain")],P)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(d,b){b=new b.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",
esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});d.kebabDict=b;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,b,M,P,G,E,L,C,p,m){var r;d.MapLayerSource=r=function(v){function t(w){w=v.call(this,w)||this;w.type="map-layer";return w}b._inherits(t,v);t.prototype.clone=function(){const {mapLayerId:w,gdbVersion:c}=this;return new r({mapLayerId:w,gdbVersion:c})};return b._createClass(t)}(P.JSONSupport);M.__decorate([p.enumeration({mapLayer:"map-layer"})],d.MapLayerSource.prototype,"type",void 0);M.__decorate([G.property({type:E.Integer,json:{write:!0}})],d.MapLayerSource.prototype,"mapLayerId",void 0);
M.__decorate([G.property({type:String,json:{write:!0}})],d.MapLayerSource.prototype,"gdbVersion",void 0);d.MapLayerSource=r=M.__decorate([m.subclass("esri.layers.support.source.MapLayerSource")],d.MapLayerSource);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t){var w;d.QueryTableDataSource=w=function(c){function h(B){B=c.call(this,B)||this;B.type="query-table";return B}b._inherits(h,c);h.prototype.clone=function(){const {workspaceId:B,query:O,oidFields:x,spatialReference:z,geometryType:I}=this,W={workspaceId:B,query:O,oidFields:x,spatialReference:z?.clone()??void 0,geometryType:I};return new w(W)};return b._createClass(h)}(G.JSONSupport);M.__decorate([m.enumeration({queryTable:"query-table"})],d.QueryTableDataSource.prototype,
"type",void 0);M.__decorate([E.property({type:String,json:{write:!0}})],d.QueryTableDataSource.prototype,"workspaceId",void 0);M.__decorate([E.property({type:String,json:{write:!0}})],d.QueryTableDataSource.prototype,"query",void 0);M.__decorate([E.property({type:String,json:{write:!0}})],d.QueryTableDataSource.prototype,"oidFields",void 0);M.__decorate([E.property({type:v,json:{write:!0}})],d.QueryTableDataSource.prototype,"spatialReference",void 0);M.__decorate([m.enumeration(t.featureGeometryTypeKebabDictionary)],
d.QueryTableDataSource.prototype,"geometryType",void 0);d.QueryTableDataSource=w=M.__decorate([r.subclass("esri.layers.support.source.QueryTableDataSource")],d.QueryTableDataSource);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,b,M,P,G,E,L,C,p,m){var r;d.RasterDataSource=r=function(v){function t(w){w=v.call(this,w)||this;w.type="raster";return w}b._inherits(t,v);t.prototype.clone=function(){const {workspaceId:w,dataSourceName:c}=this;return new r({workspaceId:w,dataSourceName:c})};return b._createClass(t)}(P.JSONSupport);M.__decorate([p.enumeration({raster:"raster"})],d.RasterDataSource.prototype,"type",void 0);M.__decorate([G.property({type:String,json:{write:!0}})],d.RasterDataSource.prototype,"dataSourceName",
void 0);M.__decorate([G.property({type:String,json:{write:!0}})],d.RasterDataSource.prototype,"workspaceId",void 0);d.RasterDataSource=r=M.__decorate([m.subclass("esri.layers.support.source.RasterDataSource")],d.RasterDataSource);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,b,M,P,G,E,L,C,p,m){var r;d.TableDataSource=r=function(v){function t(w){w=v.call(this,w)||this;w.type="table";return w}b._inherits(t,v);t.prototype.clone=function(){const {workspaceId:w,gdbVersion:c,dataSourceName:h}=this;return new r({workspaceId:w,gdbVersion:c,dataSourceName:h})};return b._createClass(t)}(P.JSONSupport);M.__decorate([p.enumeration({table:"table"})],d.TableDataSource.prototype,"type",void 0);M.__decorate([G.property({type:String,json:{write:!0}})],d.TableDataSource.prototype,
"workspaceId",void 0);M.__decorate([G.property({type:String,json:{write:!0}})],d.TableDataSource.prototype,"gdbVersion",void 0);M.__decorate([G.property({type:String,json:{write:!0}})],d.TableDataSource.prototype,"dataSourceName",void 0);d.TableDataSource=r=M.__decorate([m.subclass("esri.layers.support.source.TableDataSource")],d.TableDataSource);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FullTextSearch":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,b,M,P,G,E,L,C,p){M=function(m){function r(v){v=m.call(this,v)||this;v.onFields=null;v.operator=null;v.searchTerm=null;v.searchType=null;return v}d._inherits(r,m);return d._createClass(r)}(M.ClonableMixin(P.JSONSupport));b.__decorate([G.property({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.onFields&&0<this.onFields.length}}}}})],M.prototype,"onFields",void 0);b.__decorate([G.property({type:String,json:{write:!0}})],M.prototype,"operator",void 0);b.__decorate([G.property({type:String,
json:{write:!0}})],M.prototype,"searchTerm",void 0);b.__decorate([G.property({type:String,json:{write:!0}})],M.prototype,"searchType",void 0);return M=b.__decorate([p.subclass("esri.rest.support.FullTextSearch")],M)})},"esri/core/Clonable":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./has ./lang ./Logger ./maybe ./accessorSupport/PropertyOrigin ./accessorSupport/utils ./accessorSupport/decorators/subclass".split(" "),function(d,b,M,P,G,E,L,C,p,m,r){G=
v=>{v=function(t){function w(){return t.apply(this,arguments)||this}b._inherits(w,t);w.prototype.clone=function(){var c=C.unwrapOrThrow(m.getProperties(this),"unable to clone instance of non-accessor class"),h=c.metadatas;const B=c.store,O={};c=new Map;for(var x in h){var z=h[x];const I=B?.originOf(x),W=z.clonable;if(z.readOnly||!1===W||I!==p.OriginId.USER&&I!==p.OriginId.DEFAULTS&&I!==p.OriginId.WEB_MAP&&I!==p.OriginId.WEB_SCENE)continue;z=this[x];let N=null;N="function"===typeof W?W(z):"reference"===
W?z:E.tryClone(z);if(null==z||null!=N)I===p.OriginId.DEFAULTS?c.set(x,N):O[x]=N}h=new (Object.getPrototypeOf(this).constructor)(O);if(c.size&&(x=m.getProperties(h)?.store))for(const [I,W]of c)x.set(I,W,p.OriginId.DEFAULTS);return h};return b._createClass(w)}(v);return v=M.__decorate([r.subclass("esri.core.Clonable")],v)};d.Clonable=function(v){function t(){return v.apply(this,arguments)||this}b._inherits(t,v);return b._createClass(t)}(G(P));d.Clonable=M.__decorate([r.subclass("esri.core.Clonable")],
d.Clonable);d.ClonableMixin=G;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),function(d,b,M,P,G,E,L,C,p,m){var r;M=new P.JSONMap({upperLeft:"upper-left",
lowerLeft:"lower-left"});G=r=function(v){function t(w){w=v.call(this,w)||this;w.extent=null;w.mode="view";w.originPosition="upper-left";w.tolerance=1;return w}d._inherits(t,v);t.prototype.clone=function(){return new r(E.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return d._createClass(t)}(G.JSONSupport);b.__decorate([L.property({type:m,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],G.prototype,"extent",void 0);b.__decorate([L.property({type:["view",
"edit"],json:{write:!0}})],G.prototype,"mode",void 0);b.__decorate([L.property({type:String,json:{read:M.read,write:M.write}})],G.prototype,"originPosition",void 0);b.__decorate([L.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],G.prototype,"tolerance",void 0);return G=r=b.__decorate([p.subclass("esri.rest.support.QuantizationParameters")],G)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(d,b,M,P,G,E,L,C,p){var m;M=new M.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});P=m=function(r){function v(w){w=r.call(this,w)||this;w.maxPointCount=void 0;w.maxRecordCount=void 0;w.maxVertexCount=void 0;w.onStatisticField=
null;w.outStatisticFieldName=null;w.statisticType=null;w.statisticParameters=null;return w}d._inherits(v,r);var t=v.prototype;t.writeStatisticParameters=function(w,c){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)c.statisticParameters=G.clone(w)};t.clone=function(){return new m({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,
statisticType:this.statisticType,statisticParameters:G.clone(this.statisticParameters)})};return d._createClass(v)}(P.JSONSupport);b.__decorate([E.property({type:Number,json:{write:!0}})],P.prototype,"maxPointCount",void 0);b.__decorate([E.property({type:Number,json:{write:!0}})],P.prototype,"maxRecordCount",void 0);b.__decorate([E.property({type:Number,json:{write:!0}})],P.prototype,"maxVertexCount",void 0);b.__decorate([E.property({type:String,json:{write:!0}})],P.prototype,"onStatisticField",void 0);
b.__decorate([E.property({type:String,json:{write:!0}})],P.prototype,"outStatisticFieldName",void 0);b.__decorate([E.property({type:String,json:{read:{source:"statisticType",reader:M.read},write:{target:"statisticType",writer:M.write}}})],P.prototype,"statisticType",void 0);b.__decorate([E.property({type:Object})],P.prototype,"statisticParameters",void 0);b.__decorate([p.writer("statisticParameters")],P.prototype,"writeStatisticParameters",null);return P=m=b.__decorate([C.subclass("esri.rest.support.StatisticDefinition")],
P)})},"esri/symbols/support/ElevationInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./FeatureExpressionInfo ./unitConversionUtils".split(" "),function(d,
b,M,P,G,E,L,C,p,m,r,v,t,w){var c;L=M.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"});M=new M.JSONMap({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});P=c=function(h){function B(x){x=h.call(this,x)||this;x.offset=null;return x}d._inherits(B,h);var O=B.prototype;O.readFeatureExpressionInfo=function(x,z){if(null!=x)return x;if(z.featureExpression&&0===z.featureExpression.value)return{expression:"0"}};
O.writeFeatureExpressionInfo=function(x,z,I,W){z[I]=x.write({},W);"0"===x.expression&&(z.featureExpression={value:0})};O.write=function(x,z){return this.offset||this.mode||this.featureExpressionInfo||this.unit?d._get(d._getPrototypeOf(B.prototype),"write",this).call(this,x,z):null};O.clone=function(){return new c({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};O.equals=function(x){return this.mode===x.mode&&
this.offset===x.offset&&this.unit===x.unit&&G.equalsMaybe(this.featureExpressionInfo,x.featureExpressionInfo)};d._createClass(B,[{key:"mode",get:function(){const {offset:x,featureExpressionInfo:z}=this;return this._isOverridden("mode")?this._get("mode"):null!=x||z?"relative-to-ground":"on-the-ground"},set:function(x){this._override("mode",x)}},{key:"unit",set:function(x){this._set("unit",x)}}]);return B}(P.JSONSupport);b.__decorate([E.property({type:t,json:{write:!0}})],P.prototype,"featureExpressionInfo",
void 0);b.__decorate([m.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],P.prototype,"readFeatureExpressionInfo",null);b.__decorate([v.writer("featureExpressionInfo",{featureExpressionInfo:{type:t},"featureExpression.value":{type:[0]}})],P.prototype,"writeFeatureExpressionInfo",null);b.__decorate([E.property({type:L.apiValues,nonNullable:!0,json:{type:L.jsonValues,read:L.read,write:{writer:L.write,isRequired:!0}}})],P.prototype,"mode",null);b.__decorate([E.property({type:Number,
json:{write:!0}})],P.prototype,"offset",void 0);b.__decorate([E.property({type:w.supportedUnits,json:{type:String,read:M.read,write:M.write}})],P.prototype,"unit",null);return P=c=b.__decorate([r.subclass("esri.layers.support.ElevationInfo")],P)})},"esri/symbols/support/FeatureExpressionInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldUtils".split(" "),
function(d,b,M,P,G,E,L,C,p){var m;M=m=function(r){function v(w){return r.call(this,w)||this}d._inherits(v,r);var t=v.prototype;t.collectRequiredFields=async function(w,c){return p.collectArcadeFieldNames(w,c,this.expression)};t.clone=function(){return new m({expression:this.expression,title:this.title})};t.equals=function(w){return this.expression===w.expression&&this.title===w.title};return d._createClass(v)}(M.JSONSupport);b.__decorate([P.property({type:String,json:{write:!0}})],M.prototype,"expression",
void 0);b.__decorate([P.property({type:String,json:{write:!0}})],M.prototype,"title",void 0);return M=m=b.__decorate([C.subclass("esri.layers.support.FeatureExpressionInfo")],M)})},"esri/symbols/support/unitConversionUtils":function(){define(["exports","../../renderers/support/lengthUtils"],function(d,b){const M=function(){const P=Object.keys(b.meterIn);P.sort();return P}();d.getMetersPerUnit=function(P){return 1/(b.meterIn[P]||1)};d.supportedUnits=M;d.supportsUnit=function(P){return!!P&&null!=b.meterIn[P]};
Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../core/unitUtils","../../geometry/support/Ellipsoid"],function(d,b,M){b={unknown:1,inches:b.convertUnit(1,"meters","inches"),feet:b.convertUnit(1,"meters","feet"),"us-feet":b.convertUnit(1,"meters","us-feet"),yards:b.convertUnit(1,"meters","yards"),miles:b.convertUnit(1,"meters","miles"),"nautical-miles":b.convertUnit(1,"meters","nautical-miles"),millimeters:b.convertUnit(1,
"meters","millimeters"),centimeters:b.convertUnit(1,"meters","centimeters"),decimeters:b.convertUnit(1,"meters","decimeters"),meters:b.convertUnit(1,"meters","meters"),kilometers:b.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/b.lengthToDegrees(1,"meters",M.earth.radius)};d.meterIn=b;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/LRUCache ../../../../core/MapUtils ../../../../core/promiseUtils ../../../../core/unitUtils ../../../../symbols/support/unitConversionUtils".split(" "),
function(d,b,M,P,G,E,L,C){function p(w,{x:c,y:h,z:B}){return`${w}-${c}-${h}-${B??0}}`}function m(){return[]}let r=function(){function w(){}var c=w.prototype;c.alignCandidates=async function(h,B){return h};c.notifyElevationSourceChange=function(){};return b._createClass(w)}(),v=function(){function w(h,B,O){this._elevationInfo=h;this._alignPointsInFeatures=B;this.spatialReference=O;this._alignmentsCache=new P.LRUCache(1024);this._cacheVersion=0;this._metersPerVerticalUnit=L.getMetersPerVerticalUnitForSR(O)}
var c=w.prototype;c.alignCandidates=async function(h,B){const O=this._elevationInfo;return null==O||"absolute-height"!==O.mode||O.featureExpressionInfo?this._alignComputedElevationCandidates(h,B):(this._alignAbsoluteElevationCandidates(h,O),h)};c.notifyElevationSourceChange=function(){this._alignmentsCache.clear();this._cacheVersion++};c._alignAbsoluteElevationCandidates=function(h,B){const {offset:O,unit:x}=B;if(null!=O){B=C.getMetersPerUnit(x??"meters")/this._metersPerVerticalUnit;B*=O;for(const z of h)switch(z.type){case "edge":z.start.z+=
B;z.end.z+=B;continue;case "vertex":z.target.z+=B}}};c._alignComputedElevationCandidates=async function(h,B){var O=new Map;for(const l of h)G.getOrCreateMapValue(O,l.objectId,m).push(l);const [x,z,I]=this._prepareQuery(O);O=await this._alignPointsInFeatures(x,B);E.throwIfAborted(B);if(I!==this._cacheVersion)return this._alignComputedElevationCandidates(h,B);this._applyCacheAndResponse(x,O,z);const {drapedObjectIds:W,failedObjectIds:N}=O;B=[];for(const l of h)({objectId:h}=l),W.has(h)&&"edge"===l.type&&
(l.draped=!0),N.has(h)||B.push(l);return B};c._prepareQuery=function(h){const B=[],O=[];for(const [x,z]of h){h=[];for(const I of z)this._addToQueriesOrCachedResult(x,I.target,h,O),"edge"===I.type&&(this._addToQueriesOrCachedResult(x,I.start,h,O),this._addToQueriesOrCachedResult(x,I.end,h,O));0!==h.length&&B.push({objectId:x,points:h})}return[B,O,this._cacheVersion]};c._addToQueriesOrCachedResult=function(h,B,O,x){h=p(h,B);h=this._alignmentsCache.get(h);null!=h?x.push(new t(B,h)):O.push(B)};c._applyCacheAndResponse=
function(h,{elevations:B,drapedObjectIds:O,failedObjectIds:x},z){for(var I of z)I.apply();z=0;I=this._alignmentsCache;for(const {objectId:W,points:N}of h)if(x.has(W))z+=N.length;else{h=!O.has(W);for(const l of N){const y=p(W,l),q=B[z++];l.z=q;h&&I.put(y,q,1)}}};return b._createClass(w)}(),t=function(){function w(c,h){this.point=c;this.z=h}w.prototype.apply=function(){this.point.z=this.z};return b._createClass(w)}();d.getSnappingCandidateElevationAligner=function(w=!1,c){if(w){const {elevationInfo:h,
alignPointsInFeatures:B,spatialReference:O}=c;return new v(h,B,O)}return new r};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/snappingCandidateElevationFilter":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has"],function(d,b,M){function P(m){return 1>=m.distance}function G(m,r,{x:v,y:t,z:w}){const {start:c,end:h,target:B}=m;if(!m.draped){const z=h.x-c.x;var O=h.y-c.y,x=h.z-c.z;const I=
Math.min(1,Math.max(0,((r.x-c.x)*z+(r.y-c.y)*O+x*(r.z-c.z))/(z*z+O*O+x*x)));O=c.y+O*I;x=c.z+x*I;B.x=c.x+z*I;B.y=O;B.z=x}v=(r.x-B.x)/v;t=(r.y-B.y)/t;r=(r.z-B.z)/w;m.distance=Math.sqrt(v*v+t*t+r*r)}function E(m,r,{x:v,y:t,z:w}){const {target:c}=m;v=(r.x-c.x)/v;t=(r.y-c.y)/t;r=(r.z-c.z)/w;m.distance=Math.sqrt(v*v+t*t+r*r)}function L(m,r){return m.distance-r.distance}let C=function(){function m(){}var r=m.prototype;r.filter=function(v,t){return t};r.notifyElevationSourceChange=function(){};return b._createClass(m)}(),
p=function(){function m(){}var r=m.prototype;r.filter=function(v,t){const {point:w,distance:c}=v;({z:v}=w);if(null==v||0===t.length)return t;v="number"===typeof c?{x:c,y:c,z:c}:c;t=this._updateCandidatesTo3D(t,w,v).filter(P);t.sort(L);return t};r._updateCandidatesTo3D=function(v,t,w){for(const c of v)switch(c.type){case "edge":G(c,t,w);continue;case "vertex":E(c,t,w)}return v};return b._createClass(m)}();d.getSnappingCandidateElevationFilter=function(m=!1){return m?new p:new C};Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/symbologySnappingCandidates":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/lang ../../../../core/LRUCache ../../../../core/promiseUtils ../../../../core/string".split(" "),function(d,b,M,P,G,E,L){function C(r){switch(r.type){case "vertex":const {objectId:v,target:t}=r;return L.numericHash(`${v}-vertex-${t.x}-${t.y}-${t.z??0}`).toString();case "edge":const {objectId:w,
start:c,end:h}=r;return L.numericHash(`${w}-edge-${c.x}-${c.y}-${c.z??0}-to-${h.x}-${h.y}-${h.z??0}`).toString();default:return""}}let p=function(){function r(){}var v=r.prototype;v.fetch=async function(){return[]};v.notifySymbologyChange=function(){};return b._createClass(r)}(),m=function(){function r(t){this._getSymbologyCandidates=t;this._candidatesCache=new G.LRUCache(1024);this._cacheVersion=0}var v=r.prototype;v.fetch=async function(t,w){if(0===t.length)return[];const c=[],h=[],B=this._candidatesCache;
for(var O of t){var x=C(O),z=B.get(x);if(z)for(var I of z)h.push(P.clone(I));else c.push(O),B.put(x,[],1)}if(0===c.length)return h;O=this._cacheVersion;const {candidates:W,sourceCandidateIndices:N}=await this._getSymbologyCandidates(c,w);E.throwIfAborted(w);if(O!==this._cacheVersion)return this.fetch(t,w);t=[];({length:w}=W);for(O=0;O<w;++O)x=W[O],z=C(c[N[O]]),I=B.get(z),I.push(x),B.put(z,I,I.length),t.push(P.clone(x));return h.concat(t)};v.notifySymbologyChange=function(){this._candidatesCache.clear();
this._cacheVersion++};return b._createClass(r)}();d.getSymbologySnappingCandidatesFetcher=function(r=!1,v){return r?new m(v):new p};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/AsyncSequence ../../../../../core/asyncUtils ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/support/arcgisLayerUrl ../../../../../rest/query/operations/pbfOptimizedFeatureSet ../../../../../rest/query/operations/query ../../../../../rest/support/Query ./PendingFeatureTile".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t,w,c,h,B,O,x,z,I,W,N){d.FeatureServiceTiledFetcher=function(l){function y(n){n=l.call(this,n)||this;n.tilesOfInterest=[];n.availability=0;n._pendingTiles=new Map;n._pendingEdits=new G.AsyncSequence;n._pendingEditsAbortController=new AbortController;return n}b._inherits(y,l);var q=y.prototype;q.initialize=function(){this._initializeFetchExtent();this.updatingHandles.add(()=>this._configuration,()=>this.refresh());this.updatingHandles.add(()=>this.tilesOfInterest,(n,
g)=>{P.equals(n,g,({id:K},{id:X})=>K===X)||this._process()},r.sync)};q.destroy=function(){this._pendingTiles.forEach(n=>this._deletePendingTile(n));this._pendingTiles.clear();this.store.destroy();this.tilesOfInterest.length=0;this._pendingEditsAbortController.abort();this._pendingEditsAbortController=null};q.refresh=function(){this.store.refresh();this._pendingTiles.forEach(n=>this._deletePendingTile(n));this._process()};q.applyEdits=function(n){this._pendingEdits.push(n,async g=>{if(0!==g.addedFeatures.length||
0!==g.updatedFeatures.length||0!==g.deletedFeatures.length){for(const [,K]of this._pendingTiles)K.reset();g={...g,deletedFeatures:g.deletedFeatures.map(({objectId:K,globalId:X})=>K&&-1!==K?K:this._lookupObjectIdByGlobalId(X))};await this.updatingHandles.addPromise(this.store.processEdits(g,(K,X)=>this._queryFeaturesById(K,X),this._pendingEditsAbortController.signal));this._processPendingTiles()}})};q._initializeFetchExtent=function(){if(this.capabilities.query.supportsExtent&&x.isHostedAgolService(this.url)){var n=
E.createTask(async g=>{try{const K=await I.executeQueryForExtent(this.url,new W({where:"1\x3d1",outSpatialReference:this.spatialReference,cacheHint:this.capabilities.query.supportsCacheHint??void 0}),{query:this._configuration.customParameters,signal:g});this.store.extent=h.fromJSON(K.data?.extent)}catch(K){m.throwIfAbortError(K),p.getLogger(this).warn("Failed to fetch data extent",K)}});this.updatingHandles.addPromise(n.promise.then(()=>this._process()));this.handles.add(C.makeHandle(()=>n.abort()))}};
q._process=function(){this._markTilesNotAlive();this._createPendingTiles();this._deletePendingTiles();this._processPendingTiles()};q._markTilesNotAlive=function(){for(const [,n]of this._pendingTiles)n.alive=!1};q._createPendingTiles=function(){var n=this._collectMissingTilesInfo();this._setAvailability(null==n?1:n.coveredArea/n.fullArea);if(null!=n)for(const {data:g,resolution:K}of n.missingTiles)(n=this._pendingTiles.get(g.id))?(n.resolution=K,n.alive=!0):this._createPendingTile(g,K)};q._collectMissingTilesInfo=
function(){let n=null;for(let g=this.tilesOfInterest.length-1;0<=g;g--){const K=this.store.process(this.tilesOfInterest[g],(X,T)=>this._verifyTileComplexity(X,T));null==n?n=K:n.prepend(K)}return n};q._deletePendingTiles=function(){for(const [,n]of this._pendingTiles)n.alive||this._deletePendingTile(n)};q._processPendingTiles=function(){const n={fetchCount:(g,K)=>this._fetchCount(g,K),fetchFeatures:(g,K,X)=>this._fetchFeatures(g,K,X),finish:(g,K)=>this._finishPendingTile(g,K),resume:()=>this._processPendingTiles()};
if(this._ensureFetchAllCounts(n))for(const [,g]of this._pendingTiles)this._verifyTileComplexity(this.store.getFeatureCount(g.data),g.resolution)&&this.updatingHandles.addPromise(g.process(n))};q._verifyTileComplexity=function(n,g){return this._verifyVertexComplexity(n)&&this._verifyFeatureDensity(n,g)};q._verifyVertexComplexity=function(n){return 1E6>n*this._minimumVerticesPerFeature};q._verifyFeatureDensity=function(n,g){if(null==this.tileInfo)return!1;g*=this.tileSize;return 1>25/(g*g)*n};q._ensureFetchAllCounts=
function(n){let g=!0;for(const [,K]of this._pendingTiles)K.state.type<N.StateType.FETCHED_COUNT&&this.updatingHandles.addPromise(K.process(n)),K.state.type<=N.StateType.FETCH_COUNT&&(g=!1);return g};q._finishPendingTile=function(n,g){this.store.add(n.data,g);this._deletePendingTile(n);this._updateAvailability()};q._updateAvailability=function(){const n=this._collectMissingTilesInfo();this._setAvailability(null==n?1:n.coveredArea/n.fullArea)};q._setAvailability=function(n){this._set("availability",
n)};q._createPendingTile=function(n,g){g=new N.PendingFeatureTile(n,g);this._pendingTiles.set(n.id,g);return g};q._deletePendingTile=function(n){n.reset();this._pendingTiles.delete(n.data.id)};q._fetchCount=async function(n,g){return this.store.fetchCount(n.data,this.url,this._createCountQuery(n),{query:this.customParameters,timeout:6E5,signal:g})};q._fetchFeatures=async function(n,g,K){let X=0;const T=[];let V=0,F=g;for(;;){const J=this._createFeaturesQuery(n),ba=this._setPagingParameters(J,X,F),
{features:ka,exceededTransferLimit:ta}=await this._queryFeatures(J,K);ba&&(X+=J.num);V+=ka.length;for(const Ba of ka)T.push(Ba);F=g-V;if(!ba||!ta||0>=F)return T}};q._filterProperties=function(n){return null==n?{where:"1\x3d1",gdbVersion:void 0,timeExtent:void 0}:{where:n.where||"1\x3d1",timeExtent:n.timeExtent,gdbVersion:n.gdbVersion}};q._lookupObjectIdByGlobalId=function(n){const g=this.globalIdField,K=this.objectIdField;if(null==g)throw Error("Expected globalIdField to be defined");let X=null;this.store.featureStore.forEach(T=>
{n===T.attributes[g]&&(X=T.objectId??T.attributes[K])});if(null==X)throw Error(`Expected to find a feature with globalId ${n}`);return X};q._queryFeaturesById=function(n,g){const K=this._createFeaturesQuery();K.objectIds=n;return this._queryFeatures(K,g)};q._queryFeatures=function(n,g){return this.capabilities.query.supportsFormatPBF?this._queryFeaturesPBF(n,g):this._queryFeaturesJSON(n,g)};q._queryFeaturesPBF=async function(n,g){const {sourceSpatialReference:K}=this;({data:n}=await I.executeQueryPBF(this.url,
n,new z.OptimizedFeatureSetParserContext({sourceSpatialReference:K}),{query:this._configuration.customParameters,timeout:6E5,signal:g}));return O.unquantizeOptimizedFeatureSet(n)};q._queryFeaturesJSON=async function(n,g){const {sourceSpatialReference:K}=this;({data:n}=await I.executeQuery(this.url,n,K,{query:this._configuration.customParameters,timeout:6E5,signal:g}));return O.convertFromFeatureSet(n,this.objectIdField)};q._createCountQuery=function(n){n=this._createBaseQuery(n);this.capabilities.query.supportsCacheHint&&
(n.cacheHint=!0);return n};q._createFeaturesQuery=function(n=null){const g=this._createBaseQuery(n);g.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField];g.returnGeometry=!0;null!=n&&(this.capabilities.query.supportsResultType?g.resultType="tile":this.capabilities.query.supportsCacheHint&&(g.cacheHint=!0));return g};q._createBaseQuery=function(n){n=new W({returnZ:this.hasZ,returnM:!1,geometry:null!=this.tileInfo&&null!=n?B.toExtent(n.data.extent,this.tileInfo.spatialReference):
void 0});const g=this._configuration.filter;null!=g&&(n.where=g.where,n.gdbVersion=g.gdbVersion,n.timeExtent=g.timeExtent);n.outSpatialReference=this.spatialReference;return n};q._setPagingParameters=function(n,g,K){if(!this.capabilities.query.supportsPagination)return!1;const {supportsMaxRecordCountFactor:X,supportsCacheHint:T,tileMaxRecordCount:V,maxRecordCount:F,supportsResultType:J}=this.capabilities.query,ba=X?W.MAX_MAX_RECORD_COUNT_FACTOR:1,ka=ba*((J||T)&&V?V:F||2E3);n.start=g;X?(n.maxRecordCountFactor=
Math.min(ba,Math.ceil(K/ka)),n.num=Math.min(K,n.maxRecordCountFactor*ka)):n.num=Math.min(K,ka);return!0};b._createClass(y,[{key:"_minimumVerticesPerFeature",get:function(){switch(this.store?.featureStore.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":return 1;case "esriGeometryPolygon":return 4;case "esriGeometryPolyline":return 2}}},{key:"filter",set:function(n){const g=this._get("filter");n=this._filterProperties(n);JSON.stringify(g)!==JSON.stringify(n)&&this._set("filter",
n)}},{key:"customParameters",set:function(n){const g=this._get("customParameters");JSON.stringify(g)!==JSON.stringify(n)&&this._set("customParameters",n)}},{key:"_configuration",get:function(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}},{key:"tileInfo",set:function(n){const g=this._get("tileInfo");g===n||null!=n&&null!=g&&JSON.stringify(n)===JSON.stringify(g)||(this._set("tileInfo",n),this.store.tileInfo=n)}},{key:"tileSize",set:function(n){this._get("tileSize")!==
n&&this._set("tileSize",n)}},{key:"updating",get:function(){return this.updatingExcludingEdits||this._pendingEdits.updating}},{key:"updatingExcludingEdits",get:function(){return this.updatingHandles.updating}},{key:"hasZ",get:function(){return this.store.featureStore.hasZ}},{key:"debugInfo",get:function(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this._pendingTiles.values()).map(n=>n.debugInfo),storedTiles:this.store.debugInfo}}}]);
return y}(L.HandleOwner);M.__decorate([v.property({constructOnly:!0})],d.FeatureServiceTiledFetcher.prototype,"url",void 0);M.__decorate([v.property({constructOnly:!0})],d.FeatureServiceTiledFetcher.prototype,"objectIdField",void 0);M.__decorate([v.property({constructOnly:!0})],d.FeatureServiceTiledFetcher.prototype,"globalIdField",void 0);M.__decorate([v.property({constructOnly:!0})],d.FeatureServiceTiledFetcher.prototype,"capabilities",void 0);M.__decorate([v.property({constructOnly:!0})],d.FeatureServiceTiledFetcher.prototype,
"sourceSpatialReference",void 0);M.__decorate([v.property({constructOnly:!0})],d.FeatureServiceTiledFetcher.prototype,"spatialReference",void 0);M.__decorate([v.property({constructOnly:!0})],d.FeatureServiceTiledFetcher.prototype,"store",void 0);M.__decorate([v.property({readOnly:!0})],d.FeatureServiceTiledFetcher.prototype,"_minimumVerticesPerFeature",null);M.__decorate([v.property()],d.FeatureServiceTiledFetcher.prototype,"filter",null);M.__decorate([v.property()],d.FeatureServiceTiledFetcher.prototype,
"customParameters",null);M.__decorate([v.property({readOnly:!0})],d.FeatureServiceTiledFetcher.prototype,"_configuration",null);M.__decorate([v.property()],d.FeatureServiceTiledFetcher.prototype,"tileInfo",null);M.__decorate([v.property()],d.FeatureServiceTiledFetcher.prototype,"tileSize",null);M.__decorate([v.property()],d.FeatureServiceTiledFetcher.prototype,"tilesOfInterest",void 0);M.__decorate([v.property({readOnly:!0})],d.FeatureServiceTiledFetcher.prototype,"updating",null);M.__decorate([v.property({readOnly:!0})],
d.FeatureServiceTiledFetcher.prototype,"updatingExcludingEdits",null);M.__decorate([v.property({readOnly:!0})],d.FeatureServiceTiledFetcher.prototype,"availability",void 0);M.__decorate([v.property()],d.FeatureServiceTiledFetcher.prototype,"hasZ",null);d.FeatureServiceTiledFetcher=M.__decorate([c.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],d.FeatureServiceTiledFetcher);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/AsyncSequence":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(d,b,M,P,G,E){d.AsyncSequence=function(L){function C(){var m=L.apply(this,arguments)||this;m.updating=!1;m._pending=[];return m}b._inherits(C,L);var p=C.prototype;p.push=function(m,r){this._pending.push({promise:m,callback:r});1===this._pending.length&&this._process()};p._process=function(){if(this._pending.length){this.updating=!0;var m=this._pending[0];m.promise.then(r=>m.callback(r)).catch(()=>{}).then(()=>{this._pending.shift();this._process()})}else this.updating=!1};return b._createClass(C)}(P);
M.__decorate([G.property()],d.AsyncSequence.prototype,"updating",void 0);d.AsyncSequence=M.__decorate([E.subclass("esri.core.AsyncSequence")],d.AsyncSequence);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(d,b,M,P,G,E,L,C){function p(w){return{ok:!0,
value:w}}function m(w){return{ok:!1,error:w}}function r(w){return null!=w&&!0===w.ok?w.value:null}function v(w){return null!=w&&!1===w.ok?w.error:null}let t=function(w){function c(B,O){var x=w.call(this,{})||this;x._result=null;x._abortHandle=null;x.abort=()=>{x._abortController=G.abortMaybe(x._abortController)};x.remove=x.abort;x._abortController=new AbortController;const {signal:z}=x._abortController;x.promise=B(z);x.promise.then(I=>{x._result=p(I);x._cleanup()},I=>{x._result=m(I);x._cleanup()});
x._abortHandle=E.onAbort(O,x.abort);return x}b._inherits(c,w);var h=c.prototype;h.normalizeCtorArgs=function(){return{}};h.destroy=function(){this.abort()};h._cleanup=function(){this._abortHandle=G.removeMaybe(this._abortHandle);this._abortController=null};b._createClass(c,[{key:"value",get:function(){return r(this._result)}},{key:"error",get:function(){return v(this._result)}},{key:"finished",get:function(){return null!=this._result}}]);return c}(P);M.__decorate([L.property()],t.prototype,"value",
null);M.__decorate([L.property()],t.prototype,"error",null);M.__decorate([L.property()],t.prototype,"finished",null);M.__decorate([L.property()],t.prototype,"promise",void 0);M.__decorate([L.property()],t.prototype,"_result",void 0);t=M.__decorate([C.subclass("esri.core.asyncUtils.ReactiveTask")],t);d.assertResult=function(w){if(!0===w.ok)return w.value;throw w.error;};d.createTask=function(w,c){return new t(w,c)};d.forEach=function(w,c,h){return E.eachAlways(w.map((B,O)=>c.apply(h,[B,O])))};d.makeResultError=
m;d.makeResultOk=p;d.map=async function(w,c,h){return(await E.eachAlways(w.map((B,O)=>c.apply(h,[B,O])))).map(B=>B.value)};d.result=async function(w){if(null==w)return{ok:!1,error:Error("no promise provided")};try{return p(await w)}catch(c){return m(c)}};d.resultError=v;d.resultOrAbort=async function(w){try{return p(await w)}catch(c){return E.throwIfAbortError(c),m(c)}};d.resultValue=r;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./support/WatchUpdatingTracking".split(" "),
function(d,b,M,P,G,E,L,C){const p=m=>{m=function(r){function v(){var t=r.apply(this,arguments)||this;t._handles=new G;t._updatingHandles=new C.WatchUpdatingTracking;return t}b._inherits(v,r);v.prototype.destroy=function(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())};b._createClass(v,[{key:"handles",get:function(){return this._handles}},{key:"updatingHandles",get:function(){return this._updatingHandles}}]);return v}(m);M.__decorate([E.property({readOnly:!0})],m.prototype,
"handles",null);M.__decorate([E.property({readOnly:!0})],m.prototype,"updatingHandles",null);return m=M.__decorate([L.subclass("esri.core.HandleOwner")],m)};d.HandleOwner=function(m){function r(){return m.apply(this,arguments)||this}b._inherits(r,m);return b._createClass(r)}(p(P));d.HandleOwner=M.__decorate([L.subclass("esri.core.HandleOwner")],d.HandleOwner);d.HandleOwnerMixin=p;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports",
"../../core/urlUtils","../../chunks/persistableUrlUtils"],function(d,b,M){function P(v){if(null==v)return null;v=b.urlToObject(v);v=v.path.match(p)||v.path.match(m);if(!v)return null;const [,t,w,c,h]=v;v=w.indexOf("/");return{title:E(-1!==v?w.slice(v+1):w),serverType:L[c.toLowerCase()],sublayer:null!=h&&""!==h?parseInt(h,10):null,url:{path:t}}}function G(v){return(v=b.urlToObject(v).path.match(r))?{serviceUrl:v[1],sublayerId:Number(v[2])}:null}function E(v){v=v.replaceAll(/\s*[/_]+\s*/g," ");return v[0].toUpperCase()+
v.slice(1)}const L={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},C=Object.values(L),p=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${C.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),m=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${C.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),r=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;d.cleanTitle=E;d.isArcGISUrl=
function(v){return!!p.test(v)};d.isHostedAgolService=function(v){if(!v)return!1;v=v.toLowerCase();const t=v.includes(".arcgis.com/");v=v.includes("//services")||v.includes("//tiles")||v.includes("//features");return t&&v};d.isServerOrServicesAGOLUrl=function(v){if(!v)return!1;v=(new b.Url(b.makeAbsolute(v))).authority?.toLowerCase();return"server.arcgisonline.com"===v||"services.arcgisonline.com"===v};d.isWmsServer=function(v){if(!v)return!1;var t=v.toLowerCase();v=t.includes("/services/");const w=
t.includes("/mapserver/wmsserver"),c=t.includes("/imageserver/wmsserver");t=t.includes("/wmsserver");return v&&(w||c||t)};d.parse=P;d.parseNonStandardSublayerUrl=G;d.sanitizeUrl=function(v,t){return v?b.removeTrailingSlash(b.removeQueryParameters(v,t)):v};d.sanitizeUrlWithLayerId=function(v){let {url:t}=v;if(!t)return{url:t};t=b.removeQueryParameters(t,v.logger);const w=b.urlToObject(t),c=P(w.path);let h=void 0;null!=c?(null!=c.sublayer&&null==v.layer.layerId&&(h=c.sublayer),t=c.url.path):v.nonStandardUrlAllowed&&
(v=G(w.path),null!=v&&(t=v.serviceUrl,h=v.sublayerId));return{url:b.removeTrailingSlash(t),layerId:h}};d.serverTypes=C;d.titleFromUrlAndName=function(v,t){const w=[];v&&(v=P(v),null!=v&&v.title&&w.push(v.title));t&&(t=E(t),w.push(t));if(2===w.length){if(w[0].toLowerCase().includes(w[1].toLowerCase()))return w[0];if(w[1].toLowerCase().includes(w[0].toLowerCase()))return w[1]}return w.join(" - ")};d.writeUrlWithLayerId=function(v,t,w,c,h){M.write(t,c,"url",h);c.url&&null!=v.layerId&&(c.url=b.join(c.url,
w,v.layerId.toString()))};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/urlUtils"],function(d,b){function M(w,c){var h=c&&c.url&&c.url.path;w&&h&&(w=b.makeAbsolute(w,h,{preserveProtocolRelative:!0}),c.portalItem&&c.readResourcePaths&&(h=b.makeRelative(w,c.portalItem.itemUrl),null!=h&&v.test(h)&&c.readResourcePaths.push(c.portalItem.resourceFromPath(h).path)));return m(w,c&&c.portal)}function P(w,c,h=d.MarkKeep.YES){if(null==
w)return w;!b.isAbsolute(w)&&c&&c.blockedRelativeUrls&&c.blockedRelativeUrls.push(w);let B=b.makeAbsolute(w);if(c){var O=c.verifyItemRelativeUrls&&c.verifyItemRelativeUrls.rootPath||c.url&&c.url.path;if(O){O=m(O,c.portal);const x=m(B,c.portal);B=b.makeRelative(x,O,O);null!=B&&B!==x&&B!==w&&c.verifyItemRelativeUrls&&c.verifyItemRelativeUrls.writtenUrls.push(B)}}B=p(B,c?.portal);b.isAbsolute(B)&&(B=b.normalize(B));c?.resources&&c?.portalItem&&!b.isAbsolute(B)&&!b.isDataProtocol(B)&&h===d.MarkKeep.YES&&
c.resources.toKeep.push({resource:c.portalItem.resourceFromPath(B),compress:!1});return B}function G(w,c,h){return M(w,h)}function E(w,c,h,B){w=P(w,B);void 0!==w&&(c[h]=w)}function L(w){return(w?.match(r)??null)?.[1]??null}function C(w){w=w?.match(r)??null;if(null==w)return null;w=w[2];const c=w.lastIndexOf("/");if(-1===c){const {path:O,extension:x}=b.splitPathExtension(w);return{prefix:null,filename:O,extension:x}}const {path:h,extension:B}=b.splitPathExtension(w.slice(c+1));return{prefix:w.slice(0,
c),filename:h,extension:B}}function p(w,c){return c&&!c.isPortal&&c.urlKey&&c.customBaseUrl?b.changeDomain(w,`${c.urlKey}.${c.customBaseUrl}`,c.portalHostname):w}function m(w,c){if(!c||c.isPortal||!c.urlKey||!c.customBaseUrl)return w;const h=`${c.urlKey}.${c.customBaseUrl}`,B=b.getAppUrl();return b.hasSameOrigin(B,`${B.scheme}://${h}`)?b.changeDomain(w,c.portalHostname,h):b.changeDomain(w,h,c.portalHostname)}const r=/\/items\/([^\/]+)\/resources\/(.*)/,v=/^\.\/resources\//;d.MarkKeep=void 0;(function(w){w[w.YES=
0]="YES";w[w.NO=1]="NO"})(d.MarkKeep||(d.MarkKeep={}));const t=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return d.MarkKeep},ensureMainOnlineDomain:p,fromJSON:M,itemIdFromResourceUrl:L,prefixAndFilenameFromResourceUrl:C,read:G,toJSON:P,write:E},Symbol.toStringTag,{value:"Module"}));d.ensureMainOnlineDomain=p;d.fromJSON=M;d.itemIdFromResourceUrl=L;d.persistableUrlUtils=t;d.prefixAndFilenameFromResourceUrl=C;d.read=G;d.toJSON=P;d.write=E})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(d,b,M,P,G,E,L){const C=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let p=function(){function m(v){this._options=v;this.geometryTypes=C;this._vertexDimension=this._coordinatePtr=0}var r=m.prototype;r.createFeatureResult=function(){return new E};r.prepareFeatures=function(v){this._vertexDimension=2;v.hasZ&&this._vertexDimension++;v.hasM&&this._vertexDimension++};r.finishFeatureResult=function(v){if(v&&v.features&&v.hasZ&&this._options.sourceSpatialReference&&
v.spatialReference&&!P.equals(v.spatialReference,this._options.sourceSpatialReference)&&!v.spatialReference.vcsWkid){var t=M.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference),w=M.getMetersPerVerticalUnitForSR(v.spatialReference);t/=w;if(1!==t)for(const c of v.features)if(G.hasGeometry(c))for(v=c.geometry.coords,w=2;w<v.length;w+=3)v[w]*=t}};r.addFeature=function(v,t){v.features.push(t)};r.createFeature=function(){return new G.OptimizedFeature};r.createSpatialReference=function(){return{wkid:0}};
r.createGeometry=function(){return new L};r.addField=function(v,t){v.fields.push(t)};r.allocateCoordinates=function(v){v.coords.length=v.lengths.reduce((t,w)=>t+w,0)*this._vertexDimension;this._coordinatePtr=0};r.addCoordinate=function(v,t){v.coords[this._coordinatePtr++]=t};r.addCoordinatePoint=function(v,t){v.coords.push(t)};r.addLength=function(v,t){v.lengths.push(t)};r.addQueryGeometry=function(v,t){v.queryGeometry=t.queryGeometry;v.queryGeometryType=t.queryGeometryType};r.createPointGeometry=
function(){return new L};return b._createClass(m)}();d.OPTIMIZED_GEOMETRY_TYPES=C;d.OptimizedFeatureSetParserContext=p;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/query":function(){define("exports ../../../request ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../operations/urlUtils ./pbfQueryUtils ./queryZScale".split(" "),function(d,b,M,P,G,E,L,C){function p(t,w){if(w&&"extent"===t.type)return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;
if(w&&"point"===t.type)return`${t.x},${t.y}`;t=t.toJSON();delete t.spatialReference;return JSON.stringify(t)}function m(t,w){const c=t.geometry,h=t.toJSON();delete h.compactGeometryEnabled;delete h.defaultSpatialReferenceEnabled;let B,O,x;null!=c&&(O=c.spatialReference,x=c.spatialReference.wkid||JSON.stringify(c.spatialReference),h.geometryType=P.getJsonType(c),h.geometry=p(c,t.compactGeometryEnabled),h.inSR=x);h.groupByFieldsForStatistics&&(h.groupByFieldsForStatistics=h.groupByFieldsForStatistics.join(","));
h.objectIds&&(h.objectIds=h.objectIds.join(","));h.orderByFields&&(h.orderByFields=h.orderByFields.join(","));!h.outFields||!h.returnDistinctValues&&(w?.returnCountOnly||w?.returnExtentOnly||w?.returnIdsOnly)?delete h.outFields:h.outFields.includes("*")?h.outFields="*":h.outFields=h.outFields.join(",");h.outSR?(h.outSR=h.outSR.wkid||JSON.stringify(h.outSR),B=t.outSpatialReference):c&&(h.returnGeometry||h.returnCentroid)&&(h.outSR=h.inSR,B=O);h.returnGeometry&&delete h.returnGeometry;h.outStatistics&&
(h.outStatistics=JSON.stringify(h.outStatistics));h.fullText&&(h.fullText=JSON.stringify(h.fullText));h.pixelSize&&(h.pixelSize=JSON.stringify(h.pixelSize));h.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&null!=O&&null!=t.quantizationParameters&&null!=t.quantizationParameters.extent&&O.equals(t.quantizationParameters.extent.spatialReference)&&delete h.quantizationParameters.extent.spatialReference,h.quantizationParameters=JSON.stringify(h.quantizationParameters));h.parameterValues&&(h.parameterValues=
JSON.stringify(h.parameterValues));h.rangeValues&&(h.rangeValues=JSON.stringify(h.rangeValues));h.dynamicDataSource&&(h.layer=JSON.stringify({source:h.dynamicDataSource}),delete h.dynamicDataSource);if(h.timeExtent){const {start:z,end:I}=h.timeExtent;if(null!=z||null!=I)h.time=z===I?z:`${null==z?"null":z},${null==I?"null":I}`;delete h.timeExtent}t.defaultSpatialReferenceEnabled&&null!=O&&null!=B&&O.equals(B)&&(h.defaultSR=h.inSR,delete h.inSR,delete h.outSR);return h}function r(t,w,c){return v(t,
w,"pbf",c)}async function v(t,w,c,h={},B={}){t="string"===typeof t?M.urlToObject(t):t;var O=w.geometry?[w.geometry]:[];h.responseType="pbf"===c?"array-buffer":"json";O=(O=await G.normalizeCentralMeridian(O,null,h))&&O[0];null!=O&&(w=w.clone(),w.geometry=O);c=E.mapParameters({...t.query,f:c,...B,...m(w,B)});return b(M.join(t.path,null==w.formatOf3DObjects||B.returnCountOnly||B.returnExtentOnly||B.returnIdsOnly?"query":"query3d"),{...h,query:{...c,...h.query}})}d.encodeGeometry=p;d.executeQuery=async function(t,
w,c,h){t=null!=w.timeExtent&&w.timeExtent.isEmpty?{data:{features:[]}}:await v(t,w,"json",h);C.applyFeatureSetZUnitScaling(w,c,t.data);return t};d.executeQueryForCount=function(t,w,c){return null!=w.timeExtent&&w.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):v(t,w,"json",c,{returnIdsOnly:!0,returnCountOnly:!0})};d.executeQueryForExtent=async function(t,w,c){if(null!=w.timeExtent&&w.timeExtent.isEmpty)return{data:{count:0,extent:null}};t=await v(t,w,"json",c,{returnExtentOnly:!0,returnCountOnly:!0});
w=t.data;if(w.hasOwnProperty("extent"))return t;if(w.features)throw Error("Layer does not support extent calculation.");if(w.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return t};d.executeQueryForIds=function(t,w,c){return null!=w.timeExtent&&w.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):v(t,w,"json",c,{returnIdsOnly:!0})};d.executeQueryPBF=async function(t,w,c,h){if(null!=w.timeExtent&&w.timeExtent.isEmpty)return{data:c.createFeatureResult()};t=
await r(t,w,h);t.data=L.parsePBFFeatureQuery(t.data,c);return t};d.executeQueryPBFBuffer=r;d.queryToQueryStringParameters=m;d.runQuery=v;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/operations/urlUtils":function(){define(["exports"],function(d){function b(M){const P={};for(const G in M){if("declaredClass"===G)continue;const E=M[G];if(null!=E&&"function"!==typeof E)if(Array.isArray(E)){P[G]=[];for(let L=0;L<E.length;L++)P[G][L]=b(E[L])}else"object"===typeof E?E.toJSON&&
(P[G]=JSON.stringify(E)):P[G]=E}return P}d.mapParameters=b;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(d,b){d.parsePBFFeatureQuery=function(M,P){var G=b.parseFeatureQuery(M,P);M=G.queryResult.featureResult;P=G.queryResult.queryGeometry;G=G.queryResult.queryGeometryType;if(M&&M.features&&M.features.length&&M.objectIdFieldName){const E=M.objectIdFieldName;for(const L of M.features)L.attributes&&
(L.objectId=L.attributes[E])}M&&(M.queryGeometry=P,M.queryGeometryType=G);return M};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define(["exports","../../../core/Error","../../../core/pbf","../../../layers/graphics/OptimizedGeometry","./pbfOptimizedFeatureSet"],function(d,b,M,P,G){function E(l){return l>=I.length?null:I[l]}function L(l,y,q){l=l.asUnsafe();for(q=y.createPointGeometry(q);l.next();)switch(l.tag()){case 3:var n=
l.getUInt32();n=l.pos()+n;let g=0;for(;l.pos()<n;)y.addCoordinatePoint(q,l.getSInt64(),g++);break;default:l.skip()}return q}function C(l,y,q){l=l.asUnsafe();const n=y.createGeometry(q);for(q=2+(q.hasZ?1:0)+(q.hasM?1:0);l.next();)switch(l.tag()){case 2:var g=l.getUInt32();g=l.pos()+g;for(var K=0;l.pos()<g;)y.addLength(n,l.getUInt32(),K++);break;case 3:g=l.getUInt32();g=l.pos()+g;K=0;for(y.allocateCoordinates(n);l.pos()<g;)y.addCoordinate(n,l.getSInt64(),K),K++,K===q&&(K=0);break;default:l.skip()}return n}
function p(l){l=l.asUnsafe();const y=new P;let q="esriGeometryPoint";for(;l.next();)switch(l.tag()){case 2:var n=l.getUInt32();for(n=l.pos()+n;l.pos()<n;)y.lengths.push(l.getUInt32());break;case 3:n=l.getUInt32();for(n=l.pos()+n;l.pos()<n;)y.coords.push(l.getSInt64());break;case 1:q=G.OPTIMIZED_GEOMETRY_TYPES[l.getEnum()];break;default:l.skip()}return{queryGeometry:y,queryGeometryType:q}}function m(l){for(l=l.asUnsafe();l.next();)switch(l.tag()){case 1:return l.getString();case 2:return l.getFloat();
case 3:return l.getDouble();case 4:return l.getSInt32();case 5:return l.getUInt32();case 6:return l.getInt64();case 7:return l.getUInt64();case 8:return l.getSInt64();case 9:return l.getBool();default:return l.skip(),null}return null}function r(l){l=l.asUnsafe();const y={type:E(0)};for(;l.next();)switch(l.tag()){case 1:y.name=l.getString();break;case 2:y.type=E(l.getEnum());break;case 3:y.alias=l.getString();break;case 4:var q=l.getEnum();q=q>=W.length?null:W[q];y.sqlType=q;break;case 5:l.skip();
break;case 6:y.defaultValue=l.getString();break;default:l.skip()}return y}function v(l){const y={};for(l=l.asUnsafe();l.next();)switch(l.tag()){case 1:y.name=l.getString();break;case 2:y.isSystemMaintained=l.getBool();break;default:l.skip()}return y}function t(l,y,q,n){const g=y.createFeature(q);let K=0;for(;l.next();)switch(l.tag()){case 1:const X=n[K++].name;g.attributes[X]=l.processMessage(m);break;case 2:g.geometry=l.processMessageWithArgs(C,y,q);break;case 4:g.centroid=l.processMessageWithArgs(L,
y,q);break;default:l.skip()}return g}function w(l){const y=[1,1,1,1];for(l=l.asUnsafe();l.next();)switch(l.tag()){case 1:y[0]=l.getDouble();break;case 2:y[1]=l.getDouble();break;case 4:y[2]=l.getDouble();break;case 3:y[3]=l.getDouble();break;default:l.skip()}return y}function c(l){const y=[0,0,0,0];for(l=l.asUnsafe();l.next();)switch(l.tag()){case 1:y[0]=l.getDouble();break;case 2:y[1]=l.getDouble();break;case 4:y[2]=l.getDouble();break;case 3:y[3]=l.getDouble();break;default:l.skip()}return y}function h(l){const y=
{originPosition:0>=N.length?null:N[0]};for(l=l.asUnsafe();l.next();)switch(l.tag()){case 1:var q=l.getEnum();y.originPosition=q>=N.length?null:N[q];break;case 2:y.scale=l.processMessage(w);break;case 3:y.translate=l.processMessage(c);break;default:l.skip()}return y}function B(l){const y={};for(l=l.asUnsafe();l.next();)switch(l.tag()){case 1:y.shapeAreaFieldName=l.getString();break;case 2:y.shapeLengthFieldName=l.getString();break;case 3:y.units=l.getString();break;default:l.skip()}return y}function O(l,
y){for(y=y.createSpatialReference();l.next();)switch(l.tag()){case 1:y.wkid=l.getUInt32();break;case 5:y.wkt=l.getString();break;case 2:y.latestWkid=l.getUInt32();break;case 3:y.vcsWkid=l.getUInt32();break;case 4:y.latestVcsWkid=l.getUInt32();break;default:l.skip()}return y}function x(l,y){const q=y.createFeatureResult();l=l.asUnsafe();q.geometryType=0>=y.geometryTypes.length?null:y.geometryTypes[0];let n=!1;for(;l.next();)switch(l.tag()){case 1:q.objectIdFieldName=l.getString();break;case 3:q.globalIdFieldName=
l.getString();break;case 4:q.geohashFieldName=l.getString();break;case 5:q.geometryProperties=l.processMessage(B);break;case 7:var g=l.getEnum();q.geometryType=g>=y.geometryTypes.length?null:y.geometryTypes[g];break;case 8:q.spatialReference=l.processMessageWithArgs(O,y);break;case 10:q.hasZ=l.getBool();break;case 11:q.hasM=l.getBool();break;case 12:q.transform=l.processMessage(h);break;case 9:g=l.getBool();q.exceededTransferLimit=g;break;case 13:y.addField(q,l.processMessage(r));break;case 15:n||
(y.prepareFeatures(q),n=!0);y.addFeature(q,l.processMessageWithArgs(t,y,q,q.fields));break;case 2:q.uniqueIdField=l.processMessage(v);break;default:l.skip()}y.finishFeatureResult(q);return q}function z(l,y){const q={};let n=null;for(;l.next();)switch(l.tag()){case 4:n=l.processMessageWithArgs(p);break;case 1:q.featureResult=l.processMessageWithArgs(x,y);break;default:l.skip()}null!=n&&q.featureResult&&y.addQueryGeometry(q,n);return q}const I="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML esriFieldTypeBigInteger esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "),
W="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),N=["upperLeft","lowerLeft"];d.parseFeatureQuery=function(l,y){try{const q=new M(new Uint8Array(l),new DataView(l));
for(l={};q.next();)switch(q.tag()){case 2:l.queryResult=q.processMessageWithArgs(z,y);break;default:q.skip()}return l}catch(q){throw new b("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:q});}};d.parseField=r;d.parseFieldType=E;d.parseTransform=h;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","../../../geometry/support/zscale"],function(d,b){d.applyFeatureSetZUnitScaling=function(M,P,G){if(G&&
G.features&&G.hasZ&&(M=b.getGeometryZScaler(G.geometryType,P,M.outSpatialReference),null!=M))for(const E of G.features)M(E.geometry)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/asyncUtils","../../../../../geometry/support/aaBoundingRect"],function(d,b,M,P){let G=function(){function L(p,m){this.data=
p;this.resolution=m;this.state={type:d.StateType.CREATED};this.alive=!0}var C=L.prototype;C.process=function(p){switch(this.state.type){case d.StateType.CREATED:return this.state=this._gotoFetchCount(this.state,p),this.state.task.promise.then(p.resume,p.resume);case d.StateType.FETCHED_COUNT:return this.state=this._gotoFetchFeatures(this.state,p),this.state.task.promise.then(p.resume,p.resume);case d.StateType.FETCHED_FEATURES:this.state=this._goToDone(this.state,p)}return null};C._gotoFetchCount=
function(p,m){return{type:d.StateType.FETCH_COUNT,previous:p,task:M.createTask(async r=>{r=await M.resultOrAbort(m.fetchCount(this,r));this.state.type===d.StateType.FETCH_COUNT&&(this.state=this._gotoFetchedCount(this.state,r.ok?r.value:Infinity))})}};C._gotoFetchedCount=function(p,m){return{type:d.StateType.FETCHED_COUNT,featureCount:m,previous:p}};C._gotoFetchFeatures=function(p,m){return{type:d.StateType.FETCH_FEATURES,previous:p,task:M.createTask(async r=>{r=await M.resultOrAbort(m.fetchFeatures(this,
p.featureCount,r));this.state.type===d.StateType.FETCH_FEATURES&&(this.state=this._gotoFetchedFeatures(this.state,r.ok?r.value:[]))})}};C._gotoFetchedFeatures=function(p,m){return{type:d.StateType.FETCHED_FEATURES,previous:p,features:m}};C._goToDone=function(p,m){m.finish(this,p.features);return{type:d.StateType.DONE,previous:p}};C.reset=function(){const p=this.state;this.state={type:d.StateType.CREATED};switch(p.type){case d.StateType.FETCH_COUNT:case d.StateType.FETCH_FEATURES:p.task.abort()}};
C.intersects=function(p){if(null==p||!this.data.extent)return!0;P.fromExtent(p,E);return P.intersects(this.data.extent,E)};b._createClass(L,[{key:"debugInfo",get:function(){return{data:this.data,featureCount:this._featureCount,state:this._stateToString}}},{key:"_featureCount",get:function(){switch(this.state.type){case d.StateType.CREATED:case d.StateType.FETCH_COUNT:return 0;case d.StateType.FETCHED_COUNT:return this.state.featureCount;case d.StateType.FETCH_FEATURES:return this.state.previous.featureCount;
case d.StateType.FETCHED_FEATURES:return this.state.features.length;case d.StateType.DONE:return this.state.previous.features.length}}},{key:"_stateToString",get:function(){switch(this.state.type){case d.StateType.CREATED:return"created";case d.StateType.FETCH_COUNT:return"fetch-count";case d.StateType.FETCHED_COUNT:return"fetched-count";case d.StateType.FETCH_FEATURES:return"fetch-features";case d.StateType.FETCHED_FEATURES:return"fetched-features";case d.StateType.DONE:return"done"}}}]);return L}();
d.StateType=void 0;(function(L){L[L.CREATED=0]="CREATED";L[L.FETCH_COUNT=1]="FETCH_COUNT";L[L.FETCHED_COUNT=2]="FETCHED_COUNT";L[L.FETCH_FEATURES=3]="FETCH_FEATURES";L[L.FETCHED_FEATURES=4]="FETCHED_FEATURES";L[L.DONE=5]="DONE"})(d.StateType||(d.StateType={}));const E=P.create();d.PendingFeatureTile=G;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/byteSizeEstimations ../../../../../core/ByteSizeUnit ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/BoundsStore ../../../../../layers/support/TileInfo ../../../../../layers/support/TileKey ../../../../../rest/query/operations/query ./FeatureServiceTileCache".split(" "),
function(d,b,M,P,G,E,L,C,p,m,r,v,t,w,c,h,B,O){function x(y){return y.reduce((q,n)=>{var g=n.geometry;if(null==g)g=0;else{var K=G.estimateFixedArraySize(g.lengths,4);g=32+G.estimateFixedArraySize(g.coords,8)+K}n=32+g+G.estimateAttributesObjectSize(n.attributes);return q+n},0)}d.FeatureServiceTileStore=function(y){function q(g){g=y.call(this,g)||this;g.tileInfo=null;g.extent=null;g.maximumByteSize=10*E.ByteSizeUnit.MEGABYTES;g._tileBounds=new w.BoundsStore;g._tiles=new O.FeatureServiceTileCache;g._refCounts=
new Map;g._tileFeatureCounts=new Map;g._tmpBoundingRect=v.create();return g}b._inherits(q,y);var n=q.prototype;n.add=function(g,K){const X=[];for(const T of K)this._referenceFeature(T.objectId)===l.ADDED&&X.push(T);this._addTileStorage(g,new Set(K.map(T=>T.objectId)),x(K));this.featureStore.addMany(X);this._tiles.applyByteSizeLimit(this.maximumByteSize,T=>this._removeTileStorage(T))};n.destroy=function(){this.clear();this._tileFeatureCounts.clear()};n.clear=function(){this.featureStore.clear();this._tileBounds.clear();
this._tiles.clear();this._refCounts.clear()};n.refresh=function(){this.clear();this._tileFeatureCounts.clear()};n.processEdits=function(g,K,X){this._processEditsDelete(g.deletedFeatures.concat(g.updatedFeatures));return this._processEditsRefetch(g.addedFeatures.concat(g.updatedFeatures),K,X)};n._addTileStorage=function(g,K,X){const T=g.id;this._tiles.set(T,new z(g,K,X));this._tileBounds.set(T,g.extent);this._tileFeatureCounts.set(T,K.size)};n._remove=function({id:g}){(g=this._tiles.get(g))&&this._removeTileStorage(g)};
n._removeTileStorage=function(g){const K=[];for(const X of g.objectIds)this._unreferenceFeature(X)===l.REMOVED&&K.push(X);this.featureStore.removeManyById(K);g=g.data.id;this._tiles.delete(g);this._tileBounds.delete(g)};n._processEditsDelete=function(g){this.featureStore.removeManyById(g);for(const [,K]of this._tiles){for(const X of g)K.objectIds.delete(X);this._tileFeatureCounts.set(K.data.id,K.objectIds.size)}for(const K of g)this._refCounts.delete(K)};n._processEditsRefetch=async function(g,K,
X){g=(await K(g,X)).features;const {hasZ:T,hasM:V}=this.featureStore;for(const F of g)g=t.getBoundsOptimizedGeometry(this._tmpBoundingRect,F.geometry,T,V),null!=g&&this._tileBounds.forEachInBounds(g,J=>{J=this._tiles.get(J);this.featureStore.add(F);const ba=F.objectId;J.objectIds.has(ba)||(J.objectIds.add(ba),this._referenceFeature(ba),this._tileFeatureCounts.set(J.data.id,J.objectIds.size))})};n.process=function(g,K=()=>!0){if(null==this.tileInfo||!g.extent||null!=this.extent&&!v.intersects(v.fromExtent(this.extent,
this._tmpBoundingRect),g.extent)||this._tiles.has(g.id))return new W(g);const X=this._createTileTree(g,this.tileInfo);this._simplify(X,K,null,0,1);return this._collectMissingTiles(g,X,this.tileInfo)};n.getFeatureCount=function(g){return this._tileFeatureCounts.get(g.id)??0};n.fetchCount=async function(g,K,X,T){const V=this._tileFeatureCounts.get(g.id);if(null!=V)return V;K=await B.executeQueryForCount(K,X,T);this._tileFeatureCounts.set(g.id,K.data.count);return K.data.count};n._createTileTree=function(g,
K){const X=new I(g.level,g.row,g.col);K.updateTileInfo(X,c.ExtrapolateOptions.POWER_OF_TWO);this._tileBounds.forEachInBounds(g.extent,T=>{(T=this._tiles.get(T)?.data)&&this._tilesAreRelated(g,T)&&this._populateChildren(X,T,K,this._tileFeatureCounts.get(T.id)||0)});return X};n._tilesAreRelated=function(g,K){if(!g||!K)return!1;if(g.level===K.level)return g.row===K.row&&g.col===K.col;const X=g.level<K.level,T=X?g:K;g=X?K:g;K=1<<g.level-T.level;return Math.floor(g.row/K)===T.row&&Math.floor(g.col/K)===
T.col};n._populateChildren=function(g,K,X,T){var V=K.level-g.level-1;if(0>V)g.isLeaf=!0;else{var F=K.row>>V,J=K.col>>V;V=(F-(g.row<<1)<<1)+(J-(g.col<<1));var ba=g.children[V];null!=ba?this._populateChildren(ba,K,X,T):(F=new I(g.level+1,F,J),X.updateTileInfo(F,c.ExtrapolateOptions.POWER_OF_TWO),g.children[V]=F,this._populateChildren(F,K,X,T))}};n._simplify=function(g,K,X,T,V){const F=V*V;if(g.isLeaf)return K(this.getFeatureCount(g),V)?0:(this._remove(g),null!=X&&(X.children[T]=null),F);V/=2;const J=
V*V;let ba=0;for(let ka=0;ka<g.children.length;ka++){const ta=g.children[ka];ba+=null!=ta?this._simplify(ta,K,g,ka,V):J}0===ba?this._mergeChildren(g):.18751>1-ba/F&&(this._purge(g),null!=X&&(X.children[T]=null),ba=F);return ba};n._mergeChildren=function(g){const K=new Set;let X=0;this._forEachLeaf(g,T=>{const V=this._tiles.get(T.id);if(V){X+=V.byteSize;for(const F of V.objectIds)K.has(F)||(K.add(F),this._referenceFeature(F));this._remove(T)}});this._addTileStorage(g,K,X);g.isLeaf=!0;g.children[0]=
g.children[1]=g.children[2]=g.children[3]=null;this._tileFeatureCounts.set(g.id,K.size)};n._forEachLeaf=function(g,K){for(const X of g.children)null!=X&&(X.isLeaf?K(X):this._forEachLeaf(X,K))};n._purge=function(g){if(null!=g)if(g.isLeaf)this._remove(g);else for(let K=0;K<g.children.length;K++)this._purge(g.children[K]),g.children[K]=null};n._collectMissingTiles=function(g,K,X){g=new N(X,g,this.extent);this._collectMissingTilesRecurse(K,g,1);return g.info};n._collectMissingTilesRecurse=function(g,
K,X){if(!g.isLeaf)if(g.hasChildren){X/=2;for(let T=0;T<g.children.length;T++){const V=g.children[T];null==V?K.addMissing(g.level+1,(g.row<<1)+((T&2)>>1),(g.col<<1)+(T&1),X):this._collectMissingTilesRecurse(V,K,X)}}else K.addMissing(g.level,g.row,g.col,X)};n._referenceFeature=function(g){const K=(this._refCounts.get(g)||0)+1;this._refCounts.set(g,K);return 1===K?l.ADDED:l.UNCHANGED};n._unreferenceFeature=function(g){const K=(this._refCounts.get(g)||0)-1;if(0===K)return this._refCounts.delete(g),l.REMOVED;
0<K&&this._refCounts.set(g,K);return l.UNCHANGED};b._createClass(q,[{key:"debugInfo",get:function(){return Array.from(this._tiles.values()).map(({data:g})=>({data:g,featureCount:this._tileFeatureCounts.get(g.id)||0}))}},{key:"test",get:function(){return{tiles:Array.from(this._tiles.values()).map(g=>`${g.data.id}:[${Array.from(g.objectIds)}]`),featureReferences:Array.from(this._refCounts.keys()).map(g=>`${g}:${this._refCounts.get(g)}`)}}}]);return q}(P);M.__decorate([L.property({constructOnly:!0})],
d.FeatureServiceTileStore.prototype,"featureStore",void 0);M.__decorate([L.property()],d.FeatureServiceTileStore.prototype,"tileInfo",void 0);M.__decorate([L.property()],d.FeatureServiceTileStore.prototype,"extent",void 0);M.__decorate([L.property()],d.FeatureServiceTileStore.prototype,"maximumByteSize",void 0);d.FeatureServiceTileStore=M.__decorate([r.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],d.FeatureServiceTileStore);let z=b._createClass(function(y,
q,n){this.data=y;this.objectIds=q;this.byteSize=n}),I=function(){function y(q,n,g){this.level=q;this.row=n;this.col=g;this.isLeaf=!1;this.extent=null;this.children=[null,null,null,null]}b._createClass(y,[{key:"hasChildren",get:function(){return!this.isLeaf&&(null!=this.children[0]||null!=this.children[1]||null!=this.children[2]||null!=this.children[3])}}]);return y}(),W=function(){function y(q,n=[]){this.missingTiles=n;this.coveredArea=this.fullArea=0;this.coveredArea=this.fullArea=v.area(q.extent)}
y.prototype.prepend=function(q){this.missingTiles=q.missingTiles.concat(this.missingTiles);this.coveredArea+=q.coveredArea;this.fullArea+=q.fullArea};return b._createClass(y)}(),N=function(){function y(q,n,g){this._tileInfo=q;this._extent=null;this.info=new W(n);null!=g&&(this._extent=v.fromExtent(g))}y.prototype.addMissing=function(q,n,g,K){q=new h.TileKey(null,q,n,g);this._tileInfo.updateTileInfo(q,c.ExtrapolateOptions.POWER_OF_TWO);null==q.extent||null!=this._extent&&!v.intersects(this._extent,
q.extent)||(this.info.missingTiles.push({data:q,resolution:K}),this.info.coveredArea-=v.area(q.extent))};return b._createClass(y)}();var l;(function(y){y[y.ADDED=0]="ADDED";y[y.REMOVED=1]="REMOVED";y[y.UNCHANGED=2]="UNCHANGED"})(l||(l={}));d.ProcessResult=W;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(d){function b(G){return 32+G.length}function M(G){if(!G)return 0;if(Array.isArray(G)){var E=G.length;if(0===
E||"number"===typeof G[0])G=32+8*E;else{var L=32;for(let C=0;C<E;C++)L+=P(G[C]);G=L}return G}L=32;for(E in G)G.hasOwnProperty(E)&&(L+=P(G[E]));return L}function P(G){switch(typeof G){case "object":return M(G);case "string":return b(G);case "number":return 16;case "boolean":return 4;default:return 8}}d.estimateAttributesObjectSize=function(G){if(!G)return 0;let E=32;for(const L in G)if(G.hasOwnProperty(L)){const C=G[L];switch(typeof C){case "string":E+=b(C);break;case "number":E+=16;break;case "boolean":E+=
4}}return E};d.estimateFixedArraySize=function(G,E){return 32+G.length*E};d.estimateNestedObjectSize=M;d.estimateNumberByteSize=function(G){return 16};d.estimateStringByteSize=b;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(d){d.ByteSizeUnit=void 0;var b=d.ByteSizeUnit||(d.ByteSizeUnit={});b[b.KILOBYTES=1024]="KILOBYTES";b[b.MEGABYTES=1048576]="MEGABYTES";b[b.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(d,b){let M=function(P){function G(){this._store=new Map;this._byteSize=0}var E=G.prototype;E.set=function(L,C){this.delete(L);this._store.set(L,C);this._byteSize+=C.byteSize};E.delete=function(L){const C=this._store.get(L);return this._store.delete(L)?(null!=C&&(this._byteSize-=
C.byteSize),!0):!1};E.get=function(L){this._used(L);return this._store.get(L)};E.has=function(L){this._used(L);return this._store.has(L)};E.clear=function(){this._store.clear()};E.applyByteSizeLimit=function(L,C){for(const [p,m]of this._store){if(this._byteSize<=L)break;this.delete(p);C(m)}};E.values=function(){return this._store.values()};E[P]=function(){return this._store[Symbol.iterator]()};E._used=function(L){const C=this._store.get(L);C&&(this._store.delete(L),this._store.set(L,C))};return b._createClass(G)}(Symbol.iterator);
d.FeatureServiceTileCache=M;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/support/WatchUpdatingTracking ../../../../../geometry/SpatialReference ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/TileInfo ../../../../../rest/support/Query ../../../../../symbols/support/ElevationInfo ../snappingCandidateElevationAlignment ../snappingCandidateElevationFilter ../symbologySnappingCandidates ./FeatureServiceTiledFetcher ./FeatureServiceTileStore".split(" "),function(d,
b,M,P,G,E,L,C,p,m,r,v,t,w,c,h,B,O,x,z,I,W,N){M=function(y){function q(){var g=y.apply(this,arguments)||this;g._isInitializing=!0;g.remoteClient=null;g._whenSetup=G.createResolver();g._elevationAligner=x.getSnappingCandidateElevationAligner();g._elevationFilter=z.getSnappingCandidateElevationFilter();g._symbologyCandidatesFetcher=I.getSymbologySnappingCandidatesFetcher();g._handles=new P;g._updatingHandles=new v.WatchUpdatingTracking;g._editsUpdatingHandles=new v.WatchUpdatingTracking;g._pendingApplyEdits=
new Map;g._alignPointsInFeatures=async(K,X)=>{K=await g.remoteClient.invoke("alignElevation",{points:K},{signal:X});G.throwIfAborted(X);return K};g._getSymbologyCandidates=async(K,X)=>{K={candidates:K,spatialReference:g._spatialReference.toJSON()};K=await g.remoteClient.invoke("getSymbologyCandidates",K,{signal:X});G.throwIfAborted(X);return K};return g}d._inherits(q,y);var n=q.prototype;n.destroy=function(){this._featureFetcher?.destroy();this._queryEngine?.destroy();this._featureStore?.clear();
this._handles?.destroy()};n.setup=async function(g){if(this.destroyed)return{result:{}};const {geometryType:K,objectIdField:X,timeInfo:T,fields:V}=g.serviceInfo;var {hasZ:F}=g;const J=t.fromJSON(g.spatialReference);this._spatialReference=J;this._featureStore=new w({...g.serviceInfo,hasZ:F,hasM:!1});this._queryEngine=new c.QueryEngine({spatialReference:g.spatialReference,featureStore:this._featureStore,geometryType:K,fields:V,hasZ:F,hasM:!1,objectIdField:X,timeInfo:T});this._featureFetcher=new W.FeatureServiceTiledFetcher({store:new N.FeatureServiceTileStore({featureStore:this._featureStore}),
url:g.serviceInfo.url,objectIdField:g.serviceInfo.objectIdField,globalIdField:g.serviceInfo.globalIdField,capabilities:g.serviceInfo.capabilities,spatialReference:J,sourceSpatialReference:t.fromJSON(g.serviceInfo.spatialReference)});F="3d"===g.configuration.viewType;this._elevationAligner=x.getSnappingCandidateElevationAligner(F,{elevationInfo:null!=g.elevationInfo?O.fromJSON(g.elevationInfo):null,alignPointsInFeatures:this._alignPointsInFeatures,spatialReference:J});this._elevationFilter=z.getSnappingCandidateElevationFilter(F);
this._handles.add([E.watch(()=>this._featureFetcher.availability,ba=>this.emit("notify-availability",{availability:ba}),E.sync),E.watch(()=>this.updating,()=>this._notifyUpdating())]);this._whenSetup.resolve();this._isInitializing=!1;return this.configure(g.configuration)};n.configure=async function(g){await this._updatingHandles.addPromise(this._whenSetup.promise);this._updateFeatureFetcherConfiguration(g);return{result:{}}};n.fetchCandidates=async function(g,K){await this._whenSetup.promise;G.throwIfAborted(K);
g={point:g.point,mode:g.mode,distance:g.distance,returnEdge:g.returnEdge,returnVertex:g.returnVertex,query:null!=g.filter?g.filter:{where:"1\x3d1"}};K=null!=K?K.signal:null;var X=await this._queryEngine.executeQueryForSnapping(g,K);G.throwIfAborted(K);X=await this._elevationAligner.alignCandidates(X.candidates,K);G.throwIfAborted(K);const T=await this._symbologyCandidatesFetcher.fetch(X,K);G.throwIfAborted(K);K=0===T.length?X:X.concat(T);return{result:{candidates:this._elevationFilter.filter(g,K)}}};
n.updateTiles=async function(g,K){await this._updatingHandles.addPromise(this._whenSetup.promise);G.throwIfAborted(K);this._featureFetcher.tileSize=g.tileSize;this._featureFetcher.tilesOfInterest=g.tiles;this._featureFetcher.tileInfo=null!=g.tileInfo?h.fromJSON(g.tileInfo):null;return l};n.refresh=async function(g,K){await this._updatingHandles.addPromise(this._whenSetup.promise);G.throwIfAborted(K);this._featureFetcher.refresh();return l};n.whenNotUpdating=async function(g,K){await this._updatingHandles.addPromise(this._whenSetup.promise);
G.throwIfAborted(K);await E.whenOnce(()=>!this.updatingExcludingEdits,K);G.throwIfAborted(K);return l};n.getDebugInfo=async function(g,K){G.throwIfAborted(K);return{result:this._featureFetcher.debugInfo}};n.beginApplyEdits=async function(g,K){this._updatingHandles.addPromise(this._whenSetup.promise);G.throwIfAborted(K);K=G.createResolver();this._pendingApplyEdits.set(g.id,K);this._featureFetcher.applyEdits(K.promise);this._editsUpdatingHandles.addPromise(K.promise);return l};n.endApplyEdits=async function(g,
K){const X=this._pendingApplyEdits.get(g.id);X&&X.resolve(g.edits);G.throwIfAborted(K);return l};n.notifyElevationSourceChange=async function(g,K){this._elevationAligner.notifyElevationSourceChange();return l};n.notifySymbologyChange=async function(g,K){this._symbologyCandidatesFetcher.notifySymbologyChange();return l};n.setSymbologySnappingSupported=async function(g){this._symbologyCandidatesFetcher=I.getSymbologySnappingCandidatesFetcher(g,this._getSymbologyCandidates);return l};n._updateFeatureFetcherConfiguration=
function(g){this._featureFetcher.filter=null!=g.filter?B.fromJSON(g.filter):null;this._featureFetcher.customParameters=g.customParameters};n._notifyUpdating=function(){this.emit("notify-updating",{updating:this.updating})};d._createClass(q,[{key:"updating",get:function(){return this.updatingExcludingEdits||this._editsUpdatingHandles.updating||this._featureFetcher.updating}},{key:"updatingExcludingEdits",get:function(){return this._featureFetcher.updatingExcludingEdits||this._isInitializing||this._updatingHandles.updating}}]);
return q}(M.EventedAccessor);b.__decorate([L.property({readOnly:!0})],M.prototype,"updating",null);b.__decorate([L.property({readOnly:!0})],M.prototype,"updatingExcludingEdits",null);b.__decorate([L.property()],M.prototype,"_isInitializing",void 0);M=b.__decorate([r.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],M);const l={result:{}};return M});