// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/arrayUtils ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ./I3SSnappingSource".split(" "),function(c,k,f,n,p,q,g,u,v,r,l){c.SceneLayerSnappingSource=function(m){function h(a){a=m.call(this,a)||this;a.availability=1;
a._i3sSources=[];return a}k._inherits(h,m);var e=h.prototype;e.destroy=function(){this._i3sSources.forEach(a=>a.destroy());this._i3sSources.length=0};e.initialize=function(){const {view:a}=this,b=this.layerSource.layer;this._i3sSources="building-scene"===b.type?this._getBuildingSceneI3SSources(a,b):[this._getSceneLayerI3SSource(a,b)]};e.fetchCandidates=async function(a,b){const d=await Promise.all(this._i3sSources.map(t=>t.fetchCandidates(a,b)));q.throwIfAborted(b);return d.flat()};e.refresh=function(){this._i3sSources.forEach(a=>
a.refresh())};e._getBuildingSceneI3SSources=function(a,b){return b.allSublayers.toArray().map(d=>"building-component"===d.type?new l.I3SSnappingSource({getLayerView:async()=>(await a.whenLayerView(b)).whenSublayerView(d),view:a}):null).filter(p.isSome)};e._getSceneLayerI3SSource=function(a,b){return new l.I3SSnappingSource({getLayerView:async()=>{const d=await a.whenLayerView(b);return"scene-layer-graphics-3d"===d.type?void 0:d},view:a})};k._createClass(h,[{key:"updating",get:function(){return this._i3sSources.some(a=>
a.updating)}}]);return h}(n);f.__decorate([g.property({constructOnly:!0})],c.SceneLayerSnappingSource.prototype,"layerSource",void 0);f.__decorate([g.property({constructOnly:!0})],c.SceneLayerSnappingSource.prototype,"view",void 0);f.__decorate([g.property({readOnly:!0})],c.SceneLayerSnappingSource.prototype,"updating",null);f.__decorate([g.property({readOnly:!0})],c.SceneLayerSnappingSource.prototype,"availability",void 0);c.SceneLayerSnappingSource=f.__decorate([r.subclass("esri.views.interactive.snapping.featureSources.SceneLayerSnappingSource")],
c.SceneLayerSnappingSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});