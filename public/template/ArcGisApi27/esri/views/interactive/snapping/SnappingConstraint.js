// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2 ../../../chunks/vec2f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ./SnappingPoint ../../support/geometry3dUtils ../../support/geometry2dUtils".split(" "),function(l,k,z,C,p,A,m,h,H){function I(c,a){let d=[];if(u(c)){var {point:b}=c;q(a)?d=h.intersectLineAndPoint(a.lineLike,b):v(a)?d=h.intersectVerticalCylinderAndPoint(a.center,a.radius,b):r(a)?d=h.intersectVerticalPlaneAndPoint(a.planeLike,b):t(a)&&(d=w(a,c))}else if(q(c))({lineLike:b}=
c),u(a)?d=h.intersectLineAndPoint(b,a.point):q(a)?d=h.intersectLineLike(b,a.lineLike):v(a)?d=h.intersectLineLikeAndVerticalCylinder(b,a.center,a.radius):r(a)?d=h.intersectVerticalPlaneAndLineLike(a.planeLike,b):t(a)&&(d=w(a,c));else if(v(c)){const {center:e,radius:g}=c;if(q(a))d=h.intersectLineLikeAndVerticalCylinder(a.lineLike,e,g);else if(u(a))d=h.intersectVerticalCylinderAndPoint(e,g,a.point);else{if(r(a))return h.intersectVerticalPlaneAndVerticalCylinder(a.planeLike,e,g).map(f=>new x(f,c,a));
t(a)&&(d=w(a,c))}}else if(r(c)){({planeLike:b}=c);if(r(a))return h.intersectVerticalPlane(b,a.planeLike).map(e=>new x(e,c,a));if(u(a))d=h.intersectVerticalPlaneAndPoint(b,a.point);else if(q(a))d=h.intersectVerticalPlaneAndLineLike(b,a.lineLike);else{if(v(a))return h.intersectVerticalPlaneAndVerticalCylinder(b,a.center,a.radius).map(e=>new x(e,c,a));t(a)&&(d=w(a,c))}}else t(c)&&(d=w(c,a));return J(d,c,a)}function w(c,a){const {planeLike:d,getZ:b}=c,e=[];if(u(a))c.addIfOnTheGround(e,h.intersectVerticalPlaneAndPoint(d,
a.point));else if(q(a))c.addIfOnTheGround(e,h.intersectVerticalPlaneAndLineLike(d,a.lineLike));else if(v(a))for(const [g,f]of h.intersectVerticalPlaneAndVerticalCylinder(d,a.center,a.radius))c=b(g,f,0),null!=c&&e.push(A.fromValues(g,f,c));else if(r(a)||t(a))for(const [g,f]of h.intersectVerticalPlane(d,a.planeLike))c=b(g,f,0)??0,e.push(A.fromValues(g,f,c));return e}function J(c,a,d){return c.map(b=>new D(m.asSnappingPoint(b),a,d))}function u(c){return c instanceof E}function q(c){return c instanceof
B}function v(c){return c instanceof F}function r(c){return c instanceof y}function t(c){return c instanceof G}let n=function(){function c(){}c.prototype.intersect=function(a){return I(this,a)};return k._createClass(c)}(),E=function(c){function a(b){var e=c.call(this)||this;e.point=b;return e}k._inherits(a,c);var d=a.prototype;d.equals=function(b){return u(b)&&p.exactEquals(this.point,b.point)};d.closestTo=function(){return m.cloneSnappingPoint(this.point)};return k._createClass(a)}(n),B=function(c){function a(b,
e,g){var f=c.call(this)||this;f.start=b;f.end=e;f.type=g;f.lineLike={start:f.start,end:f.end,type:f.type};return f}k._inherits(a,c);var d=a.prototype;d.equals=function(b){return q(b)&&this.type===b.type&&p.exactEquals(this.start,b.start)&&p.exactEquals(this.end,b.end)};d.closestTo=function(b){b=h.projectPointToLineLike(b,this.lineLike);return m.asSnappingPoint(b)};return k._createClass(a)}(n),K=function(c){function a(d,b){return c.call(this,d,b,H.LineType.LINE)||this}k._inherits(a,c);return k._createClass(a)}(B),
D=function(c){function a(b,e,g){var f=c.call(this)||this;f.intersection=b;f.first=e;f.second=g;return f}k._inherits(a,c);var d=a.prototype;d.equals=function(b){return b instanceof a&&this.first.equals(b.first)&&this.second.equals(b.second)};d.closestTo=function(){return m.cloneSnappingPoint(this.intersection)};return k._createClass(a)}(n),x=function(c){function a(b,e,g){var f=c.call(this)||this;f.basePoint=b;f.first=e;f.second=g;return f}k._inherits(a,c);var d=a.prototype;d.equals=function(b){return b instanceof
a&&this.first.equals(b.first)&&this.second.equals(b.second)};d.closestTo=function(b){const e=this.basePoint;return m.asSnappingPoint(A.fromValues(e[0],e[1],b[2]))};return k._createClass(a)}(n),F=function(c){function a(b,e){var g=c.call(this)||this;g.center=b;g.radius=e;return g}k._inherits(a,c);var d=a.prototype;d.equals=function(b){return v(b)&&this.center[0]===b.center[0]&&this.center[1]===b.center[1]&&this.radius===b.radius};d.closestTo=function(b){b=h.projectPointToVerticalCylinder(b,this.center,
this.radius);return m.asSnappingPoint(b)};return k._createClass(a)}(n),y=function(c){function a(b,e,g){var f=c.call(this)||this;f.start=b;f.end=e;f.type=g;f.planeLike={start:b,end:e,type:g};return f}k._inherits(a,c);var d=a.prototype;d.equals=function(b){return r(b)&&this.type===b.type&&p.exactEquals(this.start,b.start)&&p.exactEquals(this.end,b.end)};d.closestTo=function(b){return m.asSnappingPoint(h.projectPointToVerticalPlane(b,this.planeLike))};d.closestEndTo=function(b){const {start:e,end:g}=
this;return 0<Math.sign(z.dot(z.subtract(L,g,e),z.subtract(M,b,e)))?g:e};return k._createClass(a)}(n),N=function(c){function a(d,b){return c.call(this,d,b,h.VerticalPlaneType.HALF_PLANE)||this}k._inherits(a,c);return k._createClass(a)}(y),O=function(c){function a(d,b){return c.call(this,d,b,h.VerticalPlaneType.PLANE)||this}k._inherits(a,c);return k._createClass(a)}(y),G=function(c){function a(b,e,g){var f=c.call(this)||this;f.start=b;f.end=e;f.getZ=g;f.planeLike={start:b,end:e,type:h.VerticalPlaneType.PLANE};
return f}k._inherits(a,c);var d=a.prototype;d.equals=function(b){return t(b)&&p.exactEquals(this.start,b.start)&&p.exactEquals(this.end,b.end)&&this.getZ===b.getZ};d.closestTo=function(b){const e=h.projectPointToVerticalPlane(b,this.planeLike);e[2]=this.getZ(b[0],b[1],b[2])??0;return m.asSnappingPoint(e)};d.addIfOnTheGround=function(b,e){for(const g of e)e=this.getZ(g[0],g[1],g[2])??0,Math.abs(g[2]-e)<h.epsilon&&(g[2]=e,b.push(g))};return k._createClass(a)}(n);const L=C.create(),M=C.create();l.DrapedLineConstraint=
G;l.IntersectionConstraint=D;l.LineConstraint=K;l.LineLikeConstraint=B;l.PointConstraint=E;l.SnappingConstraint=n;l.VerticalCylinderConstraint=F;l.VerticalHalfPlaneConstraint=N;l.VerticalLineIntersectionConstraint=x;l.VerticalPlaneConstraint=O;l.VerticalPlaneLikeConstraint=y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});