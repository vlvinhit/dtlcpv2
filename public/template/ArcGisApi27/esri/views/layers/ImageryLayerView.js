// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../layers/support/commonProperties ../../rest/support/Query ./support/popupUtils".split(" "),function(e,d,n,f,C,D,E,u,p,v,w,x){return a=>{a=function(q){function g(){var b=q.apply(this,arguments)||this;b.view=null;return b}
e._inherits(g,q);var r=g.prototype;r.fetchPopupFeatures=async function(b,m){const {layer:h}=this;if(!b)throw new n("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:h});var {popupEnabled:c}=h;const k=x.getFetchPopupTemplate(h,m);if(!c||null==k)throw new n("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:c,popupTemplate:k});const y=await k.getRequiredFields();c=new w;c.timeExtent=this.timeExtent;c.geometry=b;c.outFields=
y;c.outSpatialReference=b.spatialReference;const {resolution:l,spatialReference:t}=this.view;b="2d"===this.view.type?new p(l,l,t):new p(.5*l,.5*l,t);const {returnTopmostRaster:z,showNoDataRecords:A}=k.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1};return h.queryVisibleRasters(c,{returnDomainValues:!0,returnTopmostRaster:z,pixelSize:b,showNoDataRecords:A,signal:null!=m?m.signal:null}).then(B=>B)};r.canResume=function(){return!e._get(e._getPrototypeOf(g.prototype),"canResume",this).call(this)||
this.timeExtent?.isEmpty?!1:!0};return e._createClass(g)}(a);d.__decorate([f.property()],a.prototype,"layer",void 0);d.__decorate([f.property()],a.prototype,"suspended",void 0);d.__decorate([f.property(v.combinedViewLayerTimeExtentProperty)],a.prototype,"timeExtent",void 0);d.__decorate([f.property()],a.prototype,"view",void 0);return a=d.__decorate([u.subclass("esri.views.layers.ImageryLayerView")],a)}});