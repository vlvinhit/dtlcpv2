// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./Manipulation ../../../../interactive/dragEventPipeline ../../../../interactive/GraphicManipulator ../../../../interactive/editGeometry/interfaces ../../../../interactive/support/utils".split(" "),function(q,r,t,u,C,v,D){let I=function(w){function k(b){var c=w.call(this)||this;c._view=b.view;c._tool=b.tool;c._graphic=b.graphic;c._manipulator=c._createManipulator();c.forEachManipulator(f=>c._tool.manipulators.add(f));return c}r._inherits(k,
w);var g=k.prototype;g.destroy=function(){this.forEachManipulator(b=>{this._tool.manipulators.remove(b);b.destroy()});this._graphic=this._manipulator=this._view=this._tool=null};g.forEachManipulator=function(b){b(this._manipulator,t.ManipulatorType.TRANSLATE_XY)};g.createDragPipeline=function(b,c){let f=null,e=null,l=0,m=0,n=0;const {offsetX:x,offsetY:y,size:z}=D.getSymbolInfo(this._graphic.symbol);return u.createManipulatorDragEventPipeline(this._manipulator,(J,E)=>{E.next(a=>{if("start"===a.action){const d=
b();f=d.editGeometryOperations;e=d.constraints}return a}).next(u.screenToMap(this._view)).next(a=>{const {x:d,y:h,z:A}=a.mapEnd;if(e&&(d+x<e.xmin||h+y-z<e.ymin||d+x>e.xmax||h+y-z>e.ymax))return a;"start"===a.action&&(l=a.mapStart.x,m=a.mapStart.y,n=a.mapStart.z);var p=d-l;const F=h-m,G=A-n;l=d;m=h;n=A;const B=[];for(const H of f.data.components)B.push(...H.vertices);p=f.moveVertices(B,p,F,G,"start"===a.action?v.AccumulationBehaviour.NEW_STEP:v.AccumulationBehaviour.ACCUMULATE_STEPS);c(a,p);return a})})};
g._createManipulator=function(){return new C.GraphicManipulator({view:this._view,graphic:this._graphic,selectable:!0,cursor:"move"})};return r._createClass(k)}(t.Manipulation);q.DragManipulation=I;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})});