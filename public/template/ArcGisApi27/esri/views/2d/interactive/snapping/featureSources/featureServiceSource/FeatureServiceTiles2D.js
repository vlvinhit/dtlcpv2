// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../chunks/tslib.es6 ../../../../../../core/Accessor ../../../../../../core/reactiveUtils ../../../../../../core/accessorSupport/decorators/property ../../../../../../core/accessorSupport/ensureType ../../../../../../core/arrayUtils ../../../../../../core/has ../../../../../../core/accessorSupport/decorators/subclass ../../../../../../layers/support/TileKey ../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils ../../../../../support/layerViewUtils".split(" "),
function(a,m,b,t,n,d,A,B,C,u,v,p,w){a.FeatureServiceTiles2D=function(q){function f(c){c=q.call(this,c)||this;c.pointOfInterest=null;return c}m._inherits(f,q);var r=f.prototype;r._scaleEnabled=function(){return w.scaleBoundsPredicate(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)};r.initialize=function(){this.addHandles(n.watch(()=>this.view?.state?.viewpoint,()=>this.notifyChange("tilesCoveringView"),n.sync))};m._createClass(f,[{key:"tiles",get:function(){const c=this.tilesCoveringView,
e=null!=this.pointOfInterest?this.pointOfInterest:this.view.center;c.sort((k,g)=>p.distanceToTile(e,k)-p.distanceToTile(e,g));return c}},{key:"tilesCoveringView",get:function(){if(!(this.view.ready&&this.view.featuresTilingScheme&&this.view.state&&null!=this.tileInfo&&this._scaleEnabled))return[];const {spans:c,lodInfo:e}=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),{level:k}=e,g=[];for(const {row:x,colFrom:y,colTo:z}of c)for(let l=y;l<=z;l++){var h=e.normalizeCol(l);h=new v.TileKey(null,
k,x,h);this.tileInfo.updateTileInfo(h);g.push(h)}return g}},{key:"tileInfo",get:function(){return this.view.featuresTilingScheme?.tileInfo??null}},{key:"tileSize",get:function(){return null!=this.tileInfo?this.tileInfo.size[0]:256}}]);return f}(t);b.__decorate([d.property({readOnly:!0})],a.FeatureServiceTiles2D.prototype,"tiles",null);b.__decorate([d.property({readOnly:!0})],a.FeatureServiceTiles2D.prototype,"_scaleEnabled",null);b.__decorate([d.property({readOnly:!0})],a.FeatureServiceTiles2D.prototype,
"tilesCoveringView",null);b.__decorate([d.property({readOnly:!0})],a.FeatureServiceTiles2D.prototype,"tileInfo",null);b.__decorate([d.property({readOnly:!0})],a.FeatureServiceTiles2D.prototype,"tileSize",null);b.__decorate([d.property({constructOnly:!0})],a.FeatureServiceTiles2D.prototype,"view",void 0);b.__decorate([d.property({constructOnly:!0})],a.FeatureServiceTiles2D.prototype,"layer",void 0);b.__decorate([d.property()],a.FeatureServiceTiles2D.prototype,"pointOfInterest",void 0);a.FeatureServiceTiles2D=
b.__decorate([u.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D")],a.FeatureServiceTiles2D);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});