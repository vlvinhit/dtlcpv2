// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["../../../../chunks/_rollupPluginBabelHelpers","./enums","./shaders/MaterialPrograms"],function(p,f,m){const q=({rendererInfo:e,drawPhase:d},a,b)=>`${a.getVariationHash()}-${(d===f.WGLDrawPhase.HITTEST||d===f.WGLDrawPhase.LABEL_ALPHA?1:0)|(d===f.WGLDrawPhase.HIGHLIGHT?2:0)}-${e.getVariationHash()}-${null!=b&&b.join(".")}`,r=(e,d,a,b={})=>{b={...b};d={...d.getVariation()};var c={...e.rendererInfo.getVariation()},g=e.drawPhase;b={...b,...d,...c,highlight:e.drawPhase===f.WGLDrawPhase.HIGHLIGHT,
id:g===f.WGLDrawPhase.HITTEST||g===f.WGLDrawPhase.LABEL_ALPHA};if(null!=a)for(const h of a)b[h]=!0;return b};return function(){function e(a){this._rctx=a;this._programByKey=new Map}var d=e.prototype;d.dispose=function(){this._programByKey.forEach(a=>a.dispose());this._programByKey.clear()};d.getProgram=function(a,b=[]){const c=a.vsPath+"."+a.fsPath+JSON.stringify(b);if(this._programByKey.has(c))return this._programByKey.get(c);b={...b.map(k=>"string"===typeof k?{name:k,value:!0}:k).reduce((k,n)=>
({...k,[n.name]:n.value}),{})};const {vsPath:g,fsPath:h,attributes:l}=a;a=m.createProgramTemplate(g,h,l,b);a=this._rctx.programCache.acquire(a.shaders.vertexShader,a.shaders.fragmentShader,a.attributes);if(!a)throw Error("Unable to get program for key: ${key}");this._programByKey.set(c,a);return a};d.getMaterialProgram=function(a,b,c,g,h){const l=q(a,b,h);if(this._programByKey.has(l))return this._programByKey.get(l);a=r(a,b,h,{ignoresSamplerPrecision:a.context.driverTest.ignoresSamplerPrecision.result});
c=m.createProgramTemplate(c,c,g,a);c=this._rctx.programCache.acquire(c.shaders.vertexShader,c.shaders.fragmentShader,c.attributes);if(!c)throw Error("Unable to get program for key: ${key}");this._programByKey.set(l,c);return c};return p._createClass(e)}()});