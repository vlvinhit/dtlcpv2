// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../../../chunks/_rollupPluginBabelHelpers ../definitions ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey ../techniques/utils ../../../../webgl/enums".split(" "),function(u,h,p,A,B,C,D,b){return function(v){function r(){return v.apply(this,arguments)||this}u._inherits(r,v);var n=r.prototype;n.dispose=function(){};n.getGeometryType=function(){return p.WGLGeometryType.FILL};n.supportsSymbology=function(f){return f!==p.WGLSymbologyType.DOT_DENSITY};n.drawGeometry=function(f,
k,g,a){const {context:l,painter:q,rendererInfo:w,requiredLevel:E,passOptions:x,requestRender:y,allowDelayedRender:F}=f;var d=C.FillMaterialKey.load(g.materialKey),c=D.getTechniqueFromMaterialKey(d.data);const t=null!=x&&"hittest"===x.type;var e=q.materialManager;if(null==(c=c.programSpec)){c={geometry:[{location:0,name:"a_pos",count:2,type:b.DataType.SHORT},{location:1,name:"a_id",count:3,type:b.DataType.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:b.DataType.UNSIGNED_BYTE},{location:3,
name:"a_color",count:4,type:b.DataType.UNSIGNED_BYTE,normalized:!0},{location:4,name:"a_aux1",count:4,type:b.DataType.UNSIGNED_SHORT},{location:5,name:"a_aux2",count:4,type:b.DataType.SHORT},{location:6,name:"a_aux3",count:4,type:b.DataType.UNSIGNED_BYTE},{location:7,name:"a_zoomRange",count:2,type:b.DataType.UNSIGNED_SHORT}]};switch(d.symbologyType){case p.WGLSymbologyType.SIMPLE:case p.WGLSymbologyType.OUTLINE_FILL_SIMPLE:c.geometry.splice(7,1),c.geometry.splice(4,1)}c={shader:"materials/fill",
vertexLayout:c}}const {shader:G,vertexLayout:H,hittestAttributes:I}=c;c=b.PrimitiveType.TRIANGLES;var m=A.createProgramDescriptor(d.data,H);t&&(m=this._getTriangleDesc(g.materialKey,m,I),c=b.PrimitiveType.POINTS);const {attributes:z,bufferLayouts:J}=m;a=e.getMaterialProgram(f,d,G,z,a);if(F&&null!=y&&!a.compiled)y();else{l.useProgram(a);this._setSharedUniforms(a,f,k);var {row:K,col:L}=k.key;e=L*h.TILE_SIZE;m=K*h.TILE_SIZE;a.setUniform2f("u_tileOffset",e%h.MAX_REPRESENTABLE_INT,m%h.MAX_REPRESENTABLE_INT);
a.setUniform2f("u_maxIntNumOfCrossing",Math.floor(e/h.MAX_REPRESENTABLE_INT),Math.floor(m/h.MAX_REPRESENTABLE_INT));d.textureBinding&&(q.textureManager.bindTextures(l,a,d),a.setUniform1f("u_zoomFactor",1/2**(E-k.key.level)));e=1/f.pixelRatio;a.setUniform1f("u_blur",e);a.setUniform1f("u_antialiasing",e);this._setSizeVVUniforms(d,a,w,k);this._setColorAndOpacityVVUniforms(d,a,w);d=g.target.getVAO(l,J,z,t);e=g.indexCount;g=g.indexFrom*Uint32Array.BYTES_PER_ELEMENT;t&&(e/=3,g/=3);l.bindVAO(d);this._drawFills(f,
k,a,c,e,g)}};n._drawFills=function(f,k,g,a,l,q){f.context.drawElements(a,l,b.DataType.UNSIGNED_INT,q)};return u._createClass(r)}(B)});