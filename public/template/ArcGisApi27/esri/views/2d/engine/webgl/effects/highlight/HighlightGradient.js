// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Logger ../../definitions ./parameters ../../../../../webgl/enums ../../../../../webgl/Texture ../../../../../webgl/TextureDescriptor".split(" "),function(u,v,w,f,x,y,z){function A(g,a){a.fillColor[0]=g.color.r/255;a.fillColor[1]=g.color.g/255;a.fillColor[2]=g.color.b/255;a.fillColor[3]=g.color.a;g.haloColor?(a.outlineColor[0]=g.haloColor.r/255,a.outlineColor[1]=g.haloColor.g/255,a.outlineColor[2]=g.haloColor.b/255,a.outlineColor[3]=
g.haloColor.a):(a.outlineColor[0]=a.fillColor[0],a.outlineColor[1]=a.fillColor[1],a.outlineColor[2]=a.fillColor[2],a.outlineColor[3]=a.fillColor[3]);a.fillColor[3]*=g.fillOpacity;a.outlineColor[3]*=g.haloOpacity;a.fillColor[0]*=a.fillColor[3];a.fillColor[1]*=a.fillColor[3];a.fillColor[2]*=a.fillColor[3];a.outlineColor[0]*=a.outlineColor[3];a.outlineColor[1]*=a.outlineColor[3];a.outlineColor[2]*=a.outlineColor[3];a.outlineWidth=f.HIGHLIGHT_SIZING.outlineWidth;a.outerHaloWidth=f.HIGHLIGHT_SIZING.outerHaloWidth;
a.innerHaloWidth=f.HIGHLIGHT_SIZING.innerHaloWidth;a.outlinePosition=f.HIGHLIGHT_SIZING.outlinePosition}const q=v.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient"),B=[0,0,0,0];return function(){function g(){this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:f.HIGHLIGHT_SIZING.outlinePosition,outlineWidth:f.HIGHLIGHT_SIZING.outlineWidth,innerHaloWidth:f.HIGHLIGHT_SIZING.innerHaloWidth,outerHaloWidth:f.HIGHLIGHT_SIZING.outerHaloWidth};
this._shadeTexChanged=!0;this._texelData=new Uint8Array(4*f.SHADE_TEXTURE_SIZE);this._minMaxDistance=[0,0]}var a=g.prototype;a.setHighlightOptions=function(h){function n(c,p,l){d[0]=(1-l)*c[0]+l*p[0];d[1]=(1-l)*c[1]+l*p[1];d[2]=(1-l)*c[2]+l*p[2];d[3]=(1-l)*c[3]+l*p[3]}const b=this._convertedHighlightOptions;A(h,b);h=b.outlinePosition-b.outlineWidth/2-b.outerHaloWidth;const t=b.outlinePosition-b.outlineWidth/2,r=b.outlinePosition+b.outlineWidth/2,m=b.outlinePosition+b.outlineWidth/2+b.innerHaloWidth;
var e=Math.sqrt(Math.PI/2)*f.SIGMA,k=Math.abs(h)>e?Math.round(10*(Math.abs(h)-e))/10:0;e=Math.abs(m)>e?Math.round(10*(Math.abs(m)-e))/10:0;k&&!e?q.error("The outer rim of the highlight is "+k+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!k&&e?q.error("The inner rim of the highlight is "+e+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):
k&&e&&q.error("The highlight is "+Math.max(k,e)+"px away from the edge of the feature; consider reducing some width values.");const d=[void 0,void 0,void 0,void 0];({_texelData:e}=this);for(let c=0;c<f.SHADE_TEXTURE_SIZE;++c)k=h+c/(f.SHADE_TEXTURE_SIZE-1)*(m-h),k<h?(d[4*c]=0,d[4*c+1]=0,d[4*c+2]=0,d[4*c+3]=0):k<t?n(B,b.outlineColor,(k-h)/(t-h)):k<r?[d[0],d[1],d[2],d[3]]=b.outlineColor:k<m?n(b.outlineColor,b.fillColor,(k-r)/(m-r)):[d[4*c],d[4*c+1],d[4*c+2],d[4*c+3]]=b.fillColor,e[4*c]=255*d[0],e[4*
c+1]=255*d[1],e[4*c+2]=255*d[2],e[4*c+3]=255*d[3];this._minMaxDistance[0]=h;this._minMaxDistance[1]=m;this._shadeTexChanged=!0};a.applyHighlightOptions=function(h,n){if(!this._shadeTex){const b=new z.TextureDescriptor;b.wrapMode=x.TextureWrapMode.CLAMP_TO_EDGE;b.width=f.SHADE_TEXTURE_SIZE;b.height=1;this._shadeTex=new y.Texture(h,b)}this._shadeTexChanged&&(this._shadeTex.updateData(0,0,0,f.SHADE_TEXTURE_SIZE,1,this._texelData),this._shadeTexChanged=!1);h.bindTexture(this._shadeTex,w.TEXTURE_BINDING_HIGHLIGHT_1);
n.setUniform2fv("u_minMaxDistance",this._minMaxDistance)};a.destroy=function(){this._shadeTex?.dispose();this._shadeTex=null};return u._createClass(g)}()});