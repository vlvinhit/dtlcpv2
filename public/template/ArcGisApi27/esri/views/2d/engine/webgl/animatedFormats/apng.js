// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/index3","../../../../../core/promiseUtils","../../../../../core/time"],function(g,m,n,p){function k(b){const c=new Uint8Array(b);return!q.some((d,e)=>d!==c[e])}const q=[137,80,78,71,13,10,26,10];g.isAnimatedPNG=function(b){if(!k(b))return!1;const c=new DataView(b);b=new Uint8Array(b);let d=8,e;do{const f=c.getUint32(d);e=String.fromCharCode.apply(String,Array.prototype.slice.call(b.subarray(d+4,d+8)));if("acTL"===e)return!0;d+=12+f}while("IEND"!==e&&d<b.length);
return!1};g.isPNG=k;g.parseApng=async function(b,c){b=m.parseApng3rdParty(b);if(b instanceof Error)throw b;await b.createImages();n.throwIfAborted(c);const {frames:d,width:e,height:f}=b;c=document.createElement("canvas");c.width=e;c.height=f;c=c.getContext("2d",{willReadFrequently:!0});const l=[];b=[];for(const a of d){b.push(p.Milliseconds(a.delay||100));var h=a.imageElement;c.globalCompositeOperation=0===a.blendOp?"copy":"source-over";const r=2===a.disposeOp?c.getImageData(a.left,a.top,a.width,
a.height):void 0;c.drawImage(h,a.left,a.top);h=c.getImageData(0,0,e,f);l.push(h);0!==a.disposeOp&&(1===a.disposeOp?c.clearRect(a.left,a.top,a.width,a.height):2===a.disposeOp&&c.putImageData(r,a.left,a.top))}return{frameDurations:b,getFrame:a=>l[a],width:e,height:f}};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});