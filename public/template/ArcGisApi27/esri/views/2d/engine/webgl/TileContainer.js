// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ./enums ./WGLContainer ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil".split(" "),function(d,h,g,k,l,m){const n=(e,b)=>0!==e.key.level-b.key.level?e.key.level-b.key.level:0!==e.key.row-b.key.row?e.key.row-b.key.row:e.key.col-b.key.col;return function(e){function b(a){var c=e.call(this)||this;c._tileInfoView=a;return c}d._inherits(b,e);var f=b.prototype;f.renderChildren=function(a){this.sortChildren(n);this.setStencilReference(a);
d._get(d._getPrototypeOf(b.prototype),"renderChildren",this).call(this,a)};f.createRenderParams=function(a){const {state:c}=a;a=d._get(d._getPrototypeOf(b.prototype),"createRenderParams",this).call(this,a);a.requiredLevel=this._tileInfoView.getClosestInfoForScale(c.scale).level;a.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(c.scale);return a};f.prepareRenderPasses=function(a){const c=d._get(d._getPrototypeOf(b.prototype),"prepareRenderPasses",this).call(this,a);c.push(a.registerRenderPass({name:"stencil",
brushes:[m],drawPhase:g.WGLDrawPhase.DEBUG|g.WGLDrawPhase.MAP|g.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()}));h("esri-tiles-debug")&&c.push(a.registerRenderPass({name:"tileInfo",brushes:[l],drawPhase:g.WGLDrawPhase.DEBUG,target:()=>this.children}));return c};f.getStencilTarget=function(){return this.children};f.setStencilReference=function(a){a=1;for(const c of this.children)c.stencilRef=a++};d._createClass(b,[{key:"requiresDedicatedFBO",get:function(){return!1}}]);return b}(k)});