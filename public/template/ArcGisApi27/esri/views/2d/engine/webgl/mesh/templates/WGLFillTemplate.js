// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./util ./WGLBaseFillTemplate ./WGLMeshTemplate".split(" "),function(A,w,B,a,D,q,E,x,F,G){return function(C){function r(b,d,e,g,t,n,h,k,f,p,c,m,u,y,z,v){var l=C.call(this)||this;l._effects=y||void 0;b=E.FillMaterialKey.load(b);d&&(b.sdf=d.sdf,b.pattern=!0,b.textureBinding=d.textureBinding);l.fillColor=e;l.tl=g;l.br=
t;l.aux21=q.i1616to32(n,h);l.aux22=q.i1616to32(k,f);l.aux3=q.i8888to32(p,c,m,0);l._bitset=u;l._minMaxZoom=q.i1616to32(Math.round(z*a.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(v*a.MIN_MAX_ZOOM_PRECISION_FACTOR));l._materialKey=b.data;return l}A._inherits(r,C);r.fromCIMFill=function(b,d,e){var g=b.color;g=g&&B.premultiplyAlphaRGBA(g)||0;const t=b.materialKey,[n,h]=x.getMinMaxZoom(b.scaleInfo,e);e=(b.colorLocked?a.BITSET_GENERIC_LOCK_COLOR:0)|(b.applyRandomOffset?a.BITSET_FILL_RANDOM_PATTERN_OFFSET:
0)|(b.sampleAlphaOnly?a.BITSET_GENERIC_CONSIDER_ALPHA_ONLY:0)|(b.hasUnresolvedReplacementColor?a.BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR:0);if(!d)return new r(t,null,g,0,0,0,0,0,0,0,0,0,e,b.effects,n,h);const {rect:k,width:f,height:p}=d;var c=b.scaleX||1,m=k.x+a.SPRITE_PADDING;const u=k.y+a.SPRITE_PADDING;var y=m+f;const z=u+p;var v=w.pt2px(b.height);c*=v;"CIMHatchFill"===b.cim.type&&(c*=f/p);0>=v&&(v=z-u);v<a.MAX_SIZE_FOR_U16_COMPRESSION&&(v*=a.COMPRESSION_FACTOR_FOR_U16,e|=a.BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR);
v=Math.round(v);0>=c&&(c=y-m);c<a.MAX_SIZE_FOR_U16_COMPRESSION&&(c*=a.COMPRESSION_FACTOR_FOR_U16,e|=a.BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR);c=Math.round(c);const l=w.pt2px(b.offsetX||0),H=w.pt2px(-b.offsetY||0);m=q.i1616to32(m,u);y=q.i1616to32(y,z);return new r(t,d,g,m,y,c,v,l,H,a.COMPRESSION_FACTOR_FOR_U16,a.COMPRESSION_FACTOR_FOR_U16,D.degToByte(b.angle),e,b.effects,n,h)};r.fromSimpleFill=function(b,d,e=!1){var {color:g}=b;g=g&&"esriSFSNull"!==b.style&&B.premultiplyAlphaRGBAArray(g)||
0;e=e?a.BITSET_GENERIC_LOCK_COLOR:0;const t=b.materialKey;if(d){const {rect:p,width:c,height:m,pixelRatio:u}=d;var n=p.x+a.SPRITE_PADDING,h=p.y+a.SPRITE_PADDING,k=n+c,f=h+m;n=q.i1616to32(n,h);k=q.i1616to32(k,f);f=c/u;f<a.MAX_SIZE_FOR_U16_COMPRESSION&&(f*=a.COMPRESSION_FACTOR_FOR_U16,e|=a.BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR);f=Math.round(f);h=m/u;h<a.MAX_SIZE_FOR_U16_COMPRESSION&&(h*=a.COMPRESSION_FACTOR_FOR_U16,e|=a.BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR);h=Math.round(h);d=new r(t,
d,g,n,k,f,h,0,0,a.COMPRESSION_FACTOR_FOR_U16,a.COMPRESSION_FACTOR_FOR_U16,0,e,null,x.DEFAULT_MIN_ZOOM,x.DEFAULT_MAX_ZOOM)}else d=new r(t,null,g,0,0,0,0,0,0,0,0,0,e,null,x.DEFAULT_MIN_ZOOM,x.DEFAULT_MAX_ZOOM);d._maybeAddLineTemplate(b);return d};r.fromPictureFill=function(b,d,e=!1){const g=a.PICTURE_FILL_COLOR,{rect:t,width:n,height:h}=d;var k=t.x+a.SPRITE_PADDING,f=t.y+a.SPRITE_PADDING,p=k+n,c=f+h;k=q.i1616to32(k,f);p=q.i1616to32(p,c);e=e?a.BITSET_GENERIC_LOCK_COLOR:0;c=w.pt2px(b.width);c<a.MAX_SIZE_FOR_U16_COMPRESSION&&
(c*=a.COMPRESSION_FACTOR_FOR_U16,e|=a.BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR);c=Math.round(c);f=w.pt2px(b.height);f<a.MAX_SIZE_FOR_U16_COMPRESSION&&(f*=a.COMPRESSION_FACTOR_FOR_U16,e|=a.BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR);f=Math.round(f);const m=w.pt2px(b.xoffset),u=w.pt2px(-b.yoffset);d=new r(b.materialKey,d,g,k,p,c,f,m,u,a.COMPRESSION_FACTOR_FOR_U16*b.xscale,a.COMPRESSION_FACTOR_FOR_U16*b.yscale,0,e,null,x.DEFAULT_MIN_ZOOM,x.DEFAULT_MAX_ZOOM);d._maybeAddLineTemplate(b);return d};
return A._createClass(r)}(F(G))});