// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../VertexStream ../../../../../webgl/enums ../../../../../webgl/Texture ../../../../../webgl/TextureDescriptor".split(" "),function(h,n,p,q,f,r,t){let x=function(){function k(){this._layerFBOTexture=null;this._size=[0,0];this._programDesc={vsPath:"post-processing/pp",fsPath:"post-processing/filterEffect",attributes:new Map([["a_position",0]])}}var g=k.prototype;g.dispose=function(){this._layerFBOTexture=
p.disposeMaybe(this._layerFBOTexture)};g.draw=function(b,a,c){const {width:d,height:l}=a;this._createOrResizeResources(b,d,l);const {context:e,painter:u}=b,{materialManager:v}=u,w=this._programDesc;b=this._quad;c=c.colorMatrix;b.bind();const m=this._layerFBOTexture;e.bindFramebuffer(a);a.copyToTexture(0,0,d,l,0,0,m);e.setBlendingEnabled(!1);e.setStencilTestEnabled(!1);a=v.getProgram(w);e.useProgram(a);e.bindTexture(m,2);a.setUniformMatrix4fv("u_coefficients",c);a.setUniform1i("u_colorTexture",2);
b.draw();e.setBlendingEnabled(!0);e.setBlendFunction(f.BlendFactor.ONE,f.BlendFactor.ONE_MINUS_SRC_ALPHA);e.setStencilTestEnabled(!0);b.unbind()};g._createOrResizeResources=function(b,a,c){({context:b}=b);if(!this._layerFBOTexture||this._size[0]!==a||this._size[1]!==c){this._size[0]=a;this._size[1]=c;if(this._layerFBOTexture)this._layerFBOTexture.resize(a,c);else{const d=new t.TextureDescriptor;d.internalFormat=f.PixelFormat.RGBA;d.wrapMode=f.TextureWrapMode.CLAMP_TO_EDGE;d.width=a;d.height=c;this._layerFBOTexture=
new r.Texture(b,d)}this._quad||(this._quad=new q(b,[-1,-1,1,-1,-1,1,1,1]))}};return n._createClass(k)}();h.Colorize=x;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});