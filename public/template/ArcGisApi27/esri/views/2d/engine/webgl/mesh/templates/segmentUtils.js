// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../chunks/_rollupPluginBabelHelpers","./util"],function(u,L,y){function E(c){return c.length-1}function F(c){let e=0;for(let a=0;a<E(c);a++)e+=K(c,a);return e}function K(c,e,a=1){const [b,d]=c[e+1];return Math.sqrt(b*b+d*d)*a}function G(c,e,a,b,d){if(!(a<e)){var k=b.clone().seek(a/2);null!=k&&(c(k.clone(),a,d),a=(a-e)/2,k=k.seek(e/2),G(c,e,a,b,d+1),G(c,e,a,k,d+1))}}let H=function(){function c(a,b,d,k,f){this._segments=a;this._index=b;this._distance=d;this._xStart=
k;this._yStart=f;this._done=!1}c.create=function(a){return new c(a,0,0,a[0][0],a[0][1])};var e=c.prototype;e.clone=function(){return new c(this._segments,this._index,this._distance,this.xStart,this.yStart)};e.equals=function(a){return this._index===a._index||a._index===this._index-1&&(0===this._distance||1===a._distance)||a._index===this._index+1&&(1===this._distance||0===a._distance)};e.leq=function(a){return this._index<a._index||this._index===a._index&&this._distance<=a._distance};e.geq=function(a){return this._index>
a._index||this._index===a._index&&this._distance>=a._distance};e.hasPrev=function(){return 0<=this._index-1};e.hasNext=function(){return this._index+1<E(this._segments)};e.next=function(){if(!this.hasNext())return null;this._xStart+=this.dx;this._yStart+=this.dy;this._distance=0;this._index+=1;return this};e.prev=function(){if(!this.hasPrev())return this._done=!0,null;--this._index;this._xStart-=this.dx;this._yStart-=this.dy;this._distance=1;return this};e._seekBackwards=function(a,b){var d=this.backwardLength;
if(a<=d)return this._distance=(d-a)/this.length,this;for(d=this.backwardLength;this.prev();){if(d+this.length>a)return this._seekBackwards(a-d);d+=this.length}this._distance=0;return b?this:null};e.seek=function(a,b=!1){if(0>a)return this._seekBackwards(Math.abs(a),b);if(a<=this.remainingLength)return this._distance=(this.backwardLength+a)/this.length,this;let d=this.remainingLength;for(;this.next();){if(d+this.length>a)return this.seek(a-d,b);d+=this.length}this._distance=1;return b?this:null};L._createClass(c,
[{key:"_segment",get:function(){return this._segments[this._index+1]}},{key:"angle",get:function(){const a=this.dy;let b=Math.acos((0*a+-1*-this.dx)/(1*this.length));0<a&&(b=2*Math.PI-b);return b}},{key:"xStart",get:function(){return this._xStart}},{key:"yStart",get:function(){return this._yStart}},{key:"x",get:function(){return this.xStart+this.distance*this.dx}},{key:"y",get:function(){return this.yStart+this.distance*this.dy}},{key:"dx",get:function(){return this._segment[0]}},{key:"dy",get:function(){return this._segment[1]}},
{key:"xMidpoint",get:function(){return this.xStart+.5*this.dx}},{key:"yMidpoint",get:function(){return this.yStart+.5*this.dy}},{key:"xEnd",get:function(){return this.xStart+this.dx}},{key:"yEnd",get:function(){return this.yStart+this.dy}},{key:"length",get:function(){const {dx:a,dy:b}=this;return Math.sqrt(a*a+b*b)}},{key:"remainingLength",get:function(){return this.length*(1-this._distance)}},{key:"backwardLength",get:function(){return this.length*this._distance}},{key:"distance",get:function(){return this._distance}},
{key:"done",get:function(){return this._done}}]);return c}();u.SegmentCursor=H;u.pathDivide=function(c,e,a,b=!0){const d=F(c);c=H.create(c);const k=d/2;if(b){b=Math.floor(Math.max((d-e)/2,0)/e);c.seek(k-b*e);for(let f=-b;f<=b;f++)512>c.x&&0<=c.x&&512>c.y&&0<=c.y&&a(c.clone(),f,k+f*e,d),c.seek(e)}else c.seek(k),a(c.clone(),0,k+0*e,d)};u.pathLength=F;u.pathSubdivide=function(c,e,a){G(a,e,F(c),H.create(c),0)};u.segmentAt=function(c,e){return c[e+1]};u.segmentCount=E;u.segmentLength=K;u.smoothPaths=function(c,
e){for(let C=0;C<c.length;C++){let w=c[C];a:{var a=w,b=e;if(0>=b)break a;const m=a.length;if(3>m)break a;const g=[];var d=0;g.push(0);for(var k=1;k<m;k++)d+=y.dist(a[k],a[k-1]),g.push(d);b=Math.min(b,.2*d);d=[];d.push(a[0][0]);d.push(a[0][1]);k=a[m-1][0];const I=a[m-1][1];var f=y.sub([0,0],a[0],a[1]);y.normalize(f);a[0][0]+=b*f[0];a[0][1]+=b*f[1];y.sub(f,a[m-1],a[m-2]);y.normalize(f);a[m-1][0]+=b*f[0];a[m-1][1]+=b*f[1];for(f=1;f<m;f++)g[f]+=b;g[m-1]+=b;f=.5*b;for(let n=1;n<m-1;n++){let x=0,J=0,D=
0;for(var h=n-1;0<=h&&!(g[h+1]<g[n]-f);h--){var q=f+g[h+1]-g[n],p=g[h+1]-g[h],l=g[n]-g[h]<f?1:q/p;if(1E-6>Math.abs(l))break;var t=l*l,z=l*q-.5*t*p,v=l*p/b,r=a[h+1],A=a[h][0]-r[0],B=a[h][1]-r[1];x+=v/z*(r[0]*l*q+.5*t*(q*A-p*r[0])-t*l*p*A/3);J+=v/z*(r[1]*l*q+.5*t*(q*B-p*r[1])-t*l*p*B/3);D+=v}for(h=n+1;h<m&&!(g[h-1]>g[n]+f);h++){q=f-g[h-1]+g[n];p=g[h]-g[h-1];l=g[h]-g[n]<f?1:q/p;if(1E-6>Math.abs(l))break;t=l*l;z=l*q-.5*t*p;v=l*p/b;r=a[h-1];A=a[h][0]-r[0];B=a[h][1]-r[1];x+=v/z*(r[0]*l*q+.5*t*(q*A-p*r[0])-
t*l*p*A/3);J+=v/z*(r[1]*l*q+.5*t*(q*B-p*r[1])-t*l*p*B/3);D+=v}d.push(x/D);d.push(J/D)}d.push(k);d.push(I);for(let n=0,x=0;n<m;n++)a[n][0]=d[x++],a[n][1]=d[x++]}a=[];a.push(w[0]);for(b=1;b<w.length;b++){const [m,g]=w[b-1],[I,n]=w[b];a.push([Math.round(I-m),Math.round(n-g)])}w=c[C]=a}return c};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});