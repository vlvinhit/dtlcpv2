// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/time","../../../../../geometry/support/meshUtils/exporters/gltf/imageutils","../../../../../chunks/index4"],function(k,n,p,l){function m(b){const f=new Uint8Array(b);return!q.some((d,e)=>d!==f[e])}const q=[71,73,70];k.isAnimatedGIF=function(b){function f(){g++;c+=8;const a=e.getUint8(c++);c+=a&128?3*2**((a&7)+1):0;c++;d()}function d(){let a;for(;a=e.getUint8(c++);)c+=a}if(!m(b))return!1;const e=new DataView(b);b=e.getUint8(10);let c=13+(b&128?3*2**((b&7)+1):
0),g=0;for(b=!1;!b;){switch(e.getUint8(c++)){case 33:a:{switch(e.getUint8(c++)){case 249:c++;c+=4;d();break;case 1:g++;c++;c+=12;d();break;case 254:d();break;case 255:c++;c+=8;c+=3;d();break;default:var h=!1;break a}h=!0}if(!h)return!1;break;case 44:f();break;case 59:b=!0;break;default:return!1}if(1<g)return!0}return!1};k.isGIF=m;k.parseGif=async function(b,f){b=l.parseGIF_1(b);var d=l.decompressFrames_1(b,!0);const {width:e,height:c}=b.lsd;b=document.createElement("canvas");b.width=e;b.height=c;
b=b.getContext("2d",{willReadFrequently:!0});const g=[];f=[];for(const a of d){f.push(n.Milliseconds(a.delay||100));d=new ImageData(a.patch,a.dims.width,a.dims.height);var h=p.imageTypeToCanvas(d);d=3===a.disposalType?b.getImageData(a.dims.left,a.dims.top,a.dims.width,a.dims.height):void 0;b.drawImage(h,a.dims.left,a.dims.top);h=b.getImageData(0,0,e,c);g.push(h);1!==a.disposalType&&(2===a.disposalType?b.clearRect(a.dims.left,a.dims.top,a.dims.width,a.dims.height):3===a.disposalType&&b.putImageData(d,
a.dims.left,a.dims.top))}return{frameDurations:f,getFrame:a=>g[a],width:e,height:c}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});