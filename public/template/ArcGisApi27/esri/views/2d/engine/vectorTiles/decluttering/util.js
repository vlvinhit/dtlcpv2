// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../enums","./core"],function(q,u,v,w){let x=function(){function g(b,a,h){this._rows=Math.ceil(a/h);this._columns=Math.ceil(b/h);this._cellSize=h;this.cells=Array(this._rows);for(b=0;b<this._rows;b++)for(this.cells[b]=Array(this._columns),a=0;a<this._columns;a++)this.cells[b][a]=[]}var d=g.prototype;d.getCell=function(b,a){a=Math.min(Math.max(Math.floor(a/this._cellSize),0),this._rows-1);b=Math.min(Math.max(Math.floor(b/this._cellSize),
0),this._columns-1);return this.cells[a]&&this.cells[a][b]||null};d.getCellSpan=function(b,a,h,l){return[Math.min(Math.max(Math.floor(b/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(a/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(h/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(l/this._cellSize),0),this.rows-1)]};u._createClass(g,[{key:"cellSize",get:function(){return this._cellSize}},{key:"columns",get:function(){return this._columns}},{key:"rows",
get:function(){return this._rows}}]);return g}();q.GridIndex=x;q.deserializeSymbols=function(g,d,b,a,h,l){const f=d[a++];for(let t=0;t<f;t++){const k=new w.VTLSymbol(l);k.xTile=d[a++];k.yTile=d[a++];k.hash=d[a++];k.priority=d[a++];var c=d[a++];for(var e=0;e<c;e++){const m=d[a++],n=d[a++],p=d[a++],r=d[a++],y=!!d[a++],z=d[a++],A=b[a++],B=b[a++],C=d[a++],D=d[a++];k.colliders.push({xTile:m,yTile:n,dxPixels:p,dyPixels:r,hard:y,partIndex:z,width:C,height:D,minLod:A,maxLod:B})}c=g[a++];for(e=0;e<c;e++)k.textVertexRanges.push([g[a++],
g[a++]]);c=g[a++];for(e=0;e<c;e++)k.iconVertexRanges.push([g[a++],g[a++]]);h.push(k)}return a};q.tileCoordChange=function(g,d,b,a,h,l){b-=h;if(0<=b)return(d>>b)+(a-(l<<b))*(g>>b);b=-b;return d-(l-(a<<b))*(g>>b)<<b};q.writeOpacityToBuffers=function(g,d,b){for(const [t,k]of g.symbols){{var a=g,h=d,l=b,f=k;const m=a.layerData.get(t);if(m.type===v.BucketType.SYMBOL){for(const n of f){f=n.unique;var c=void 0;if(n.selectedForRendering){var e=f.parts[0];c=e.startOpacity;e=e.targetOpacity;a.allSymbolsFadingOut=
a.allSymbolsFadingOut&&0===e;c=l?Math.floor(127*c)|e<<7:e?255:0;c|=c<<24|c<<16|c<<8}else c=0;for(const [p,r]of n.iconVertexRanges)for(e=p;e<p+r;e+=4)m.iconOpacity[e/4]=c;n.selectedForRendering?(c=f.parts[1],f=c.startOpacity,c=c.targetOpacity,a.allSymbolsFadingOut=a.allSymbolsFadingOut&&0===c,f=l?Math.floor(127*f)|c<<7:c?255:0,c=f<<24|f<<16|f<<8|f):c=0;for(const [p,r]of n.textVertexRanges)for(f=p;f<p+r;f+=4)m.textOpacity[f/4]=c}m.lastOpacityUpdate=h;m.opacityChanged=!0}}}};Object.defineProperty(q,
Symbol.toStringTag,{value:"Module"})});