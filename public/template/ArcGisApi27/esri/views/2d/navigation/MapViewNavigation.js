// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Viewpoint ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../geometry/Point ../viewpointUtils ./ZoomBox ./actions/Pan ./actions/Pinch ./actions/Rotate".split(" "),function(z,g,e,B,p,h,I,J,K,C,D,l,E,F,G,H){const r=new e({targetGeometry:new D}),
t=[0,0];e=function(A){function u(a){a=A.call(this,a)||this;a._endTimer=null;a._lastEventTimestamp=null;a.animationManager=null;a.interacting=!1;return a}z._inherits(u,A);var c=u.prototype;c.initialize=function(){this.pan=new F({navigation:this});this.rotate=new H({navigation:this});this.pinch=new G({navigation:this});this.zoomBox=new E({view:this.view,navigation:this})};c.destroy=function(){this.pan=p.destroyMaybe(this.pan);this.rotate=p.destroyMaybe(this.rotate);this.pinch=p.destroyMaybe(this.pinch);
this.zoomBox=p.destroyMaybe(this.zoomBox);this.animationManager=null};c.begin=function(){this._set("interacting",!0)};c.end=function(){this._lastEventTimestamp=performance.now();this._startTimer(250)};c.zoom=async function(a,b=this._getDefaultAnchor()){this.stop();this.begin();if(this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return 1>a?this.zoomIn(b):this.zoomOut(b);this.setViewpoint(b,a,0,[0,0])};c.zoomIn=async function(a){var b=this.view;b=b.constraints.snapToNextScale(b.scale);
return this._zoomToScale(b,a)};c.zoomOut=async function(a){var b=this.view;b=b.constraints.snapToPreviousScale(b.scale);return this._zoomToScale(b,a)};c.setViewpoint=function(a,b,d,f){this.begin();this.view.stateManager.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,a,b,d,f);this.end()};c.setViewpointImmediate=function(a,b=0,d=[0,0],f=this._getDefaultAnchor()){this.view.stateManager.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,f,a,b,d)};c.continousRotateClockwise=
function(){const a=this.get("view.viewpoint");this.animationManager?.animateContinous(a,b=>{l.rotateBy(b,b,-1)})};c.continousRotateCounterclockwise=function(){const a=this.get("view.viewpoint");this.animationManager?.animateContinous(a,b=>{l.rotateBy(b,b,1)})};c.resetRotation=function(){this.view.rotation=0};c.continousPanLeft=function(){this._continuousPan([-10,0])};c.continousPanRight=function(){this._continuousPan([10,0])};c.continousPanUp=function(){this._continuousPan([0,10])};c.continousPanDown=
function(){this._continuousPan([0,-10])};c.stop=function(){this.pan.stopMomentumNavigation();this.animationManager?.stop();this.end();null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))};c._continuousPan=function(a){const b=this.view.viewpoint;this.animationManager?.animateContinous(b,d=>{l.translateBy(d,d,a);this.view.constraints.constrainByGeometry(d)})};c._startTimer=function(a){return null!==this._endTimer?this._endTimer:this._endTimer=setTimeout(()=>
{this._endTimer=null;const b=performance.now()-(this._lastEventTimestamp??0);250>b?this._endTimer=this._startTimer(b):this._set("interacting",!1)},a)};c._getDefaultAnchor=function(){const {size:a,padding:{left:b,right:d,top:f,bottom:k}}=this.view;t[0]=.5*(a[0]-d+b);t[1]=.5*(a[1]-k+f);return t};c._zoomToScale=async function(a,b=this._getDefaultAnchor()){const {view:d}=this,{constraints:f,scale:k,viewpoint:m,size:v,padding:w}=d,n=f.canZoomInTo(a),x=f.canZoomOutTo(a);if(!(a<k&&!n||a>k&&!x))return l.padAndScaleAndRotateBy(r,
m,a/k,0,b,v,w),f.constrainByGeometry(r),d.goTo(r,{animate:!0})};c._scaleRotateTranslateViewpoint=function(a,b,d,f,k){var {view:m}=this;const {size:v,padding:w,constraints:n,scale:x,viewpoint:y}=m;var q=x*d;m=n.canZoomInTo(q);q=n.canZoomOutTo(q);if(1>d&&!m||1<d&&!q)d=1;l.translateBy(y,y,k);l.padAndScaleAndRotateBy(a,y,d,f,b,v,w);return n.constrainByGeometry(a)};return z._createClass(u)}(B);g.__decorate([h.property()],e.prototype,"animationManager",void 0);g.__decorate([h.property({type:Boolean,readOnly:!0})],
e.prototype,"interacting",void 0);g.__decorate([h.property()],e.prototype,"pan",void 0);g.__decorate([h.property()],e.prototype,"pinch",void 0);g.__decorate([h.property()],e.prototype,"rotate",void 0);g.__decorate([h.property()],e.prototype,"view",void 0);g.__decorate([h.property()],e.prototype,"zoomBox",void 0);return e=g.__decorate([C.subclass("esri.views.2d.navigation.MapViewNavigation")],e)});