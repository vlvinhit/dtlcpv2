// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["../../../../chunks/_rollupPluginBabelHelpers","../../ViewState","../../engine/Container","../../engine/webgl/enums"],function(f,n,p,q){return function(k){function g(a){var b=k.call(this)||this;b.layerView=a;b._childrenRenderParameters={context:null,pixelRatio:1,state:new n,stationary:!0,painter:null};b._name=b.constructor.name;b.requestRender=b.requestRender.bind(f._assertThisInitialized(b));return b}f._inherits(g,k);var l=g.prototype;l.doRender=function(a){if(a.drawPhase===q.WGLDrawPhase.MAP){var b=
window.devicePixelRatio,{stationary:r,context:d,painter:h,profiler:m}=a,e=this._childrenRenderParameters;e.context=d.gl;e.state.copy(a.state);e.state.pixelRatio=b;e.stationary=r;e.painter=h;a=this.createRenderParams(a);h.beforeRenderLayer(a,this.clips?255:0,a.globalOpacity);m.recordContainerStart(this._name);b=d.getBoundFramebufferObject();var c=d.getViewport();d.resetState();d.bindFramebuffer(b);d.setViewport(c.x,c.y,c.width,c.height);this.layerView._renderTarget.framebuffer=b.glName;this.layerView._renderTarget.viewport[0]=
c.x;this.layerView._renderTarget.viewport[1]=c.y;this.layerView._renderTarget.viewport[2]=c.width;this.layerView._renderTarget.viewport[3]=c.height;this.layerView.render(e);d.enforceState();h.compositeLayer(a,a.globalOpacity);m.recordContainerEnd()}};l.createRenderParams=function(a){return{...a,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:a.globalOpacity*this.opacity,inFadeTransition:this.inFadeTransition}};return f._createClass(g)}(p.Container)});