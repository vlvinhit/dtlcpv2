// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./support/WatchUpdatingTracking".split(" "),function(l,h,D,B,y,v,C,t){const q=k=>{k=function(e){function b(){var c=e.apply(this,arguments)||this;c._handles=new y;c._updatingHandles=new t.WatchUpdatingTracking;return c}h._inherits(b,e);b.prototype.destroy=function(){this.destroyed||
(this._handles.destroy(),this._updatingHandles.destroy())};h._createClass(b,[{key:"handles",get:function(){return this._handles}},{key:"updatingHandles",get:function(){return this._updatingHandles}}]);return b}(k);D.__decorate([v.property({readOnly:!0})],k.prototype,"handles",null);D.__decorate([v.property({readOnly:!0})],k.prototype,"updatingHandles",null);return k=D.__decorate([C.subclass("esri.core.HandleOwner")],k)};l.HandleOwner=function(k){function e(){return k.apply(this,arguments)||this}h._inherits(e,
k);return h._createClass(e)}(q(B));l.HandleOwner=D.__decorate([C.subclass("esri.core.HandleOwner")],l.HandleOwner);l.HandleOwnerMixin=q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../Accessor ../Handles ../handleUtils ../reactiveUtils ../scheduling ../accessorSupport/decorators/property ../accessorSupport/decorators/subclass".split(" "),function(l,
h,D,B,y,v,C,t,q,k){l.WatchUpdatingTracking=function(e){function b(){var f=e.apply(this,arguments)||this;f.updating=!1;f._handleId=0;f._handles=new y;f._scheduleHandleId=0;f._pendingPromises=new Set;return f}h._inherits(b,e);var c=b.prototype;c.destroy=function(){this.removeAll();this._handles.destroy()};c.add=function(f,a,d={}){return this._installWatch(f,a,d,C.watch)};c.addWhen=function(f,a,d={}){return this._installWatch(f,a,d,C.when)};c.addOnCollectionChange=function(f,a,{initial:d=!1,final:n=
!1}={}){const r=++this._handleId;this._handles.add([C.on(f,"after-changes",this._createSyncUpdatingCallback(),C.sync),C.on(f,"change",a,{onListenerAdd:d?p=>a({added:p.toArray(),removed:[]}):void 0,onListenerRemove:n?p=>a({added:[],removed:p.toArray()}):void 0})],r);return v.makeHandle(()=>this._handles.remove(r))};c.addPromise=function(f){if(null==f)return f;const a=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(f)&&(0!==this._pendingPromises.size||this._handles.has(-42)||
this._set("updating",!1))}},a);this._pendingPromises.add(f);this._set("updating",!0);const d=()=>this._handles.remove(a);f.then(d,d);return f};c.removeAll=function(){this._pendingPromises.clear();this._handles.removeAll();this._set("updating",!1)};c._installWatch=function(f,a,d={},n){const r=++this._handleId;d.sync||this._installSyncUpdatingWatch(f,r);f=n(f,a,d);this._handles.add(f,r);return v.makeHandle(()=>this._handles.remove(r))};c._installSyncUpdatingWatch=function(f,a){const d=this._createSyncUpdatingCallback();
f=C.watch(f,d,{sync:!0,equals:()=>!1});this._handles.add(f,a);return f};c._createSyncUpdatingCallback=function(){return()=>{this._handles.remove(-42);++this._scheduleHandleId;const f=this._scheduleHandleId;this._get("updating")||this._set("updating",!0);this._handles.add(t.schedule(()=>{f===this._scheduleHandleId&&(this._set("updating",0<this._pendingPromises.size),this._handles.remove(-42))}),-42)}};return h._createClass(b)}(B);D.__decorate([q.property({readOnly:!0})],l.WatchUpdatingTracking.prototype,
"updating",void 0);l.WatchUpdatingTracking=D.__decorate([k.subclass("esri.core.support.WatchUpdatingTracking")],l.WatchUpdatingTracking);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(l,h,D,B,y,v,C){function t(c,f,a={}){return q(c,f,a,e)}function q(c,f,a={},d){let n=null;const r=a.once?(p,g)=>{d(p)&&(B.removeMaybe(n),
f(p,g))}:(p,g)=>{d(p)&&f(p,g)};n=v.watchTracked(c,r,a.sync,a.equals);a.initial&&(c=c(),r(c,c));return n}function k(c,f,a){if(y.isAborted(a))return Promise.reject(y.createAbortError());const d=c();if(f?.(d))return Promise.resolve(d);let n=null;return new Promise((r,p)=>{n=D.handlesGroup([y.onAbort(a,()=>{n=B.removeMaybe(n);p(y.createAbortError())}),q(c,g=>{n=B.removeMaybe(n);r(g)},{sync:!1,once:!0},f??e)])})}function e(c){return!0}function b(c){return!!c}l.autorun=C.autorun;l.initial={initial:!0};
l.on=function(c,f,a,d={}){function n(){p&&g&&(g.remove(),d.onListenerRemove?.(p),g=p=null)}function r(w){d.once&&d.once&&B.removeMaybe(u);a(w)}let p=null,g=null,u=null;const x=t(c,(w,m)=>{n();h.isEventTarget(w)&&(p=w,g=h.on(w,f,r),d.onListenerAdd?.(w))},{sync:d.sync,initial:!0});return u=D.makeHandle(()=>{x.remove();n()})};l.once=function(c,f){return k(c,null,f)};l.pausable=function(c,f,a={}){let d=!1;const n=t(c,(r,p)=>{d||f(r,p)},a);return{remove(){n.remove()},pause(){d=!0},resume(){d=!1}}};l.sync=
{sync:!0};l.syncAndInitial={sync:!0,initial:!0};l.watch=t;l.when=function(c,f,a={}){return q(c,f,a,b)};l.whenOnce=function(c,f){return k(c,b,f)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p){var g;D=new D.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});B=g=function(u){function x(m){m=u.call(this,m)||this;m.dpi=96;m.format=null;m.origin=null;m.size=null;m.spatialReference=null;return m}l._inherits(x,u);x.create=function(m={}){const {resolutionFactor:z=
1,scales:A,size:H=256,spatialReference:E=f.WebMercator,numLODs:F=24}=m;if(!d.isValid(E)){m=[];if(A)for(var J=0;J<A.length;J++){var L=A[J];m.push(new r({level:J,scale:L,resolution:L}))}else for(J=5E-4,L=F-1;0<=L;L--)m.unshift(new r({level:L,scale:J,resolution:J})),J*=2;return new g({dpi:96,lods:m,origin:new c(0,0,E),size:[H,H],spatialReference:E})}J=d.getInfo(E);m=m.origin?new c({x:m.origin.x,y:m.origin.y,spatialReference:E}):J?new c({x:J.origin[0],y:J.origin[1],spatialReference:E}):new c({x:0,y:0,
spatialReference:E});J=1/(39.37*y.getMetersPerUnitForSR(E)*96);L=[];if(A)for(var I=0;I<A.length;I++){var G=A[I];L.push(new r({level:I,scale:G,resolution:G*J}))}else{var K=d.isGeographic(E)?512/H*5.916575275917094E8:256/H*5.91657527591555E8;I=Math.ceil(F/z);L.push(new r({level:0,scale:K,resolution:K*J}));for(G=1;G<I;G++)K/=2**z,L.push(new r({level:G,scale:K,resolution:K*J}))}return new g({dpi:96,lods:L,origin:m,size:[H,H],spatialReference:E})};var w=x.prototype;w.readOrigin=function(m,z){return c.fromJSON({spatialReference:z.spatialReference,
...m})};w.readSize=function(m,z){return[z.cols,z.rows]};w.writeSize=function(m,z){z.cols=m[0];z.rows=m[1]};w.zoomToScale=function(m){const z=this.scales;if(0>=m)return z[0];if(m>=z.length-1)return z[z.length-1];const A=Math.floor(m);return z[A]/(z[A]/z[A+1])**(m-A)};w.scaleToZoom=function(m){const z=this.scales,A=z.length-1;let H=0;for(;H<A;H++){const E=z[H],F=z[H+1];if(E<=m)break;if(F===m)return H+1;if(E>m&&F<m)return H+Math.log(E/m)/Math.log(E/F)}return H};w.snapScale=function(m,z=.95){m=this.scaleToZoom(m);
return m%Math.floor(m)>=z?this.zoomToScale(Math.ceil(m)):this.zoomToScale(Math.floor(m))};w.tileAt=function(m,z,A,H){var E=this.lodAt(m);if(!E)return null;let F;if("number"===typeof z)F=z,z=A;else{if(d.equals(z.spatialReference,this.spatialReference))F=z.x,z=z.y;else{H=n.project(z,this.spatialReference);if(null==H)return null;F=H.x;z=H.y}H=A}A=E.resolution*this.size[0];E=E.resolution*this.size[1];H||(H=new p.TileKey(null,0,0,0,a.create()));H.level=m;H.row=Math.floor((this.origin.y-z)/E+.001);H.col=
Math.floor((F-this.origin.x)/A+.001);this.updateTileInfo(H);return H};w.updateTileInfo=function(m,z=g.ExtrapolateOptions.NONE){var A=this.lodAt(m.level);A||z!==g.ExtrapolateOptions.POWER_OF_TWO||(z=this.lods[this.lods.length-1],z.level<m.level&&(A=z));if(A){var H=m.level-A.level;z=A.resolution*this.size[0]/2**H;A=A.resolution*this.size[1]/2**H;m.id=`${m.level}/${m.row}/${m.col}`;m.extent||(m.extent=a.create());m.extent[0]=this.origin.x+m.col*z;m.extent[1]=this.origin.y-(m.row+1)*A;m.extent[2]=m.extent[0]+
z;m.extent[3]=m.extent[1]+A}};w.upsampleTile=function(m){const z=this._upsampleLevels[m.level];if(!z||-1===z.parentLevel)return!1;m.level=z.parentLevel;m.row=Math.floor(m.row/z.factor+.001);m.col=Math.floor(m.col/z.factor+.001);this.updateTileInfo(m);return!0};w.getTileBounds=function(m,z){var A=this.lodAt(z.level);if(null==A)return null;var {resolution:H}=A;A=H*this.size[0];H*=this.size[1];m[0]=this.origin.x+z.col*A;m[1]=this.origin.y-(z.row+1)*H;m[2]=m[0]+A;m[3]=m[1]+H;return m};w.lodAt=function(m){return this._levelToLOD?.[m]??
null};w.clone=function(){return g.fromJSON(this.write({}))};w.getOrCreateCompatible=function(m,z){if(256===this.size[0]&&256===this.size[1])return 256===m?this:null;const A=[],H=this.lods.length;for(let E=0;E<H;E++){const F=this.lods[E];A.push(new r({level:F.level,scale:F.scale,resolution:F.resolution*z}))}return new g({size:[m,m],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:A})};w._initializeUpsampleLevels=
function(){const m=this.lods;this._upsampleLevels=[];let z=null;for(let A=0;A<m.length;A++){const H=m[A];this._upsampleLevels[H.level]={parentLevel:z?z.level:-1,factor:z?z.resolution/H.resolution:0};z=H}};l._createClass(x,[{key:"isWrappable",get:function(){const {spatialReference:m,origin:z}=this;if(m&&z){const A=d.getInfo(m);return m.isWrappable&&!!A&&Math.abs(A.origin[0]-z.x)<=A.dx}return!1}},{key:"lods",set:function(m){const z=[],A=this._levelToLOD={};m&&m.forEach(H=>{z.push(H.scale);A[H.level]=
H});this._set("scales",z);this._set("lods",m);this._initializeUpsampleLevels()}}]);return x}(B.JSONSupport);h.__decorate([v.property({type:Number,json:{write:!0}})],B.prototype,"compressionQuality",void 0);h.__decorate([v.property({type:Number,json:{write:!0}})],B.prototype,"dpi",void 0);h.__decorate([v.property({type:String,json:{read:D.read,write:D.write,origins:{"web-scene":{read:!1,write:!1}}}})],B.prototype,"format",void 0);h.__decorate([v.property({readOnly:!0})],B.prototype,"isWrappable",null);
h.__decorate([v.property({type:c,json:{write:!0}})],B.prototype,"origin",void 0);h.__decorate([k.reader("origin")],B.prototype,"readOrigin",null);h.__decorate([v.property({type:[r],value:null,json:{write:!0}})],B.prototype,"lods",null);h.__decorate([v.property({readOnly:!0})],B.prototype,"scales",void 0);h.__decorate([v.property({cast:u=>Array.isArray(u)?u:"number"===typeof u?[u,u]:[256,256]})],B.prototype,"size",void 0);h.__decorate([k.reader("size",["rows","cols"])],B.prototype,"readSize",null);
h.__decorate([b.writer("size",{cols:{type:C.Integer},rows:{type:C.Integer}})],B.prototype,"writeSize",null);h.__decorate([v.property({type:f,json:{write:!0}})],B.prototype,"spatialReference",void 0);B=g=h.__decorate([e.subclass("esri.layers.support.TileInfo")],B);(function(u){u=u.ExtrapolateOptions||(u.ExtrapolateOptions={});u[u.NONE=0]="NONE";u[u.POWER_OF_TWO=1]="POWER_OF_TWO"})(B||(B={}));return B})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t){var q;D=q=function(k){function e(b){b=k.call(this,b)||this;b.cols=null;b.level=0;b.levelValue=null;b.origin=null;b.resolution=0;b.rows=null;b.scale=0;return b}l._inherits(e,k);e.prototype.clone=function(){return new q({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return l._createClass(e)}(D.JSONSupport);h.__decorate([B.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,
write:!1}}}})],D.prototype,"cols",void 0);h.__decorate([B.property({type:y.Integer,json:{write:!0}})],D.prototype,"level",void 0);h.__decorate([B.property({type:String,json:{write:!0}})],D.prototype,"levelValue",void 0);h.__decorate([B.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],D.prototype,"origin",void 0);h.__decorate([B.property({type:Number,json:{write:!0}})],D.prototype,"resolution",void 0);h.__decorate([B.property({json:{write:!0,
origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],D.prototype,"rows",void 0);h.__decorate([B.property({type:Number,json:{write:!0}})],D.prototype,"scale",void 0);return D=q=h.__decorate([t.subclass("esri.layers.support.LOD")],D)})},"esri/layers/support/TileKey":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(l,h){h=h._createClass(function(D,B,y,v,C){this.id=D;this.level=B;this.row=y;this.col=v;this.extent=C});l.TileKey=h;Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/processors":function(){define(["require","exports"],function(l,h){const D=B=>Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));h.loadProcessorModule=function(B){return"heatmap"===B?new Promise((y,v)=>l(["./processors/HeatmapProcessor"],C=>y(D(C)),v)):new Promise((y,v)=>l(["./processors/SymbolProcessor"],C=>y(D(C)),v))};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/layers/features/controllers/FeatureController2D":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/HandleOwner ../../../../../core/has ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/FieldsIndex ../FeatureStore2D ../sources/createSource ../support/AttributeStore ../support/BinStore ../support/ClusterStore ../support/ComputedAttributeStorage ../support/FeatureSetReaderJSON ../support/UpdateToken ../../../../support/QueueProcessor".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x,w){function m(A){if(!C.isAbortError(A)&&"worker:port-closed"!==A.name)throw A;}function z(A){return"feature"===A.type&&"snapshot"===A.mode}B=function(A){function H(){var F=A.apply(this,arguments)||this;F._storage=new g.ComputedAttributeStorage;F._markedIdsBufId=F._storage.createBitset();F._lastCleanup=performance.now();F._cleanupNeeded=!1;F._invalidated=!1;F._tileToResolver=new Map;F._didEdit=!1;F._updateVersion=1;F.tileStore=null;F.config=null;
F.processor=null;F.remoteClient=null;F.service=null;return F}l._inherits(H,A);var E=H.prototype;E.initialize=function(){this._initStores();this._initSource();this._updateQueue=new w.QueueProcessor({concurrency:"stream"===this._source.type?1:4,process:(F,J)=>this._onTileMessage(F,{signal:J})});this.addHandles([this.tileStore.on("update",this.onTileUpdate.bind(this)),t.when(()=>!this.updating,()=>this.onIdle())])};E._initSource=function(){this._source=d.createSource(this.service,this.spatialReference,
this.tileStore.tileScheme,(F,J)=>{this._invalidated=!0;return this._patchTile(F,J)},()=>this._updateQueue&&50>this._updateQueue.length,this.featureStore);this._proxyEvents()};E._setStreamClientProperty=function(F,J){this.remoteClient.invoke("setProperty",{propertyName:F,value:J}).catch(m)};E._proxyEvents=function(){if("stream"===this._source.type){const F=this._source.events,J=this._source;this.addHandles([t.watch(()=>J.connectionStatus,L=>this._setStreamClientProperty("pipelineConnectionStatus",
L),{initial:!0}),t.watch(()=>J.errorString,L=>this._setStreamClientProperty("pipelineErrorString",L),{initial:!0}),F.on("data-received",L=>this.remoteClient.invoke("emitEvent",{name:"data-received",event:{attributes:L.attributes,centroid:L.centroid,geometry:L.geometry}}).catch(m)),F.on("message-received",L=>this.remoteClient.invoke("emitEvent",{name:"message-received",event:L}).catch(m)),F.on("updateRate",L=>this.remoteClient.invoke("emitEvent",{name:"update-rate",event:{...L}}).catch(m))])}};E._initAttributeStore=
function(F){this.attributeStore||(this.attributeStore=new n({type:"remote",initialize:(J,L)=>C.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.attributeView.initialize",J,{signal:L}).catch(m)),update:(J,L)=>C.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.attributeView.requestUpdate",J,{signal:L}).catch(m)),render:J=>C.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.requestRender",void 0,{signal:J}).catch(m))},F))};E._initStores=function(){this.featureStore=
new a.FeatureStore2D({geometryInfo:{geometryType:this.service.geometryType,hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields},this._storage,"snapshot"===this.service.type?"snapshot":"on-demand")};E._initQueryEngine=function(F){const J=this;this.featureQueryEngine?.destroy();this.featureQueryEngine=new c.QueryEngine({definitionExpression:F.schema.source.definitionExpression??void 0,fields:this.service.fields,geometryType:this.service.geometryType,
objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,featureStore:this.featureStore,aggregateAdapter:{getFeatureObjectIds(L){return null==J.aggregateStore?[]:J.aggregateStore.getFeatureDisplayIdsForAggregate(L).map(I=>J.getObjectId(I))}},timeInfo:this.service.timeInfo})};E._initAggregateQueryEngine=function(F,J){this.aggregateQueryEngine?.destroy();null!=F&&(J=J.targets.aggregate.params.fields.slice(),this.aggregateQueryEngine=
new c.QueryEngine({definitionExpression:void 0,fields:J,geometryType:F.geometryInfo.geometryType,objectIdField:F.objectIdField,hasM:F.geometryInfo.hasM,hasZ:F.geometryInfo.hasZ,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!1,featureStore:F,aggregateAdapter:{getFeatureObjectIds(L){return[]}}}))};E.destroy=function(){this._updateQueue.destroy();this._source.destroy();this.featureQueryEngine?.destroy();this.aggregateQueryEngine?.destroy();this.attributeStore?.destroy();for(const F of this.tileStore.tiles)this._source.unsubscribe(F);
clearInterval(this._checkUpdating)};E.isUpdating=function(){var F=this._source.updatingHandles.updating;const J=!this.attributeStore||this.attributeStore.updatingHandles.updating,L=F||J||this.updatingHandles.updating;if(y("esri-2d-log-updating")){F=`Updating FeatureController2D: ${L}\n`+`  -> updatingSource ${F}\n`;for(const I of this._source.subscriptions)F+=`     ${I.tile.id} ${I.isDone}\n`;F=F+`  -> updatingAttributeStore ${J}\n`+`  -> updatingHandles ${this.updatingHandles.updating} (queue: ${this._updateQueue.length})\n`;
console.log(F)}return L};E.updateCustomParameters=function(F){"stream"===this._source.type&&this._source.updateCustomParameters(F)};E.enableEvent=function(F){this._source.enableEvent(F.name,F.value)};E.pause=function(){this._updateQueue.pause();this._updateQueue.clear()};E.resume=function(){this._updateQueue.resume()};E.pauseStream=function(){"stream"===this._source.type&&this._source.pauseStream()};E.resumeStream=function(){"stream"===this._source.type&&this._source.resumeStream()};E.sendMessageToSocket=
function(F){"stream"===this._source.type&&this._source.sendMessageToSocket(F)};E.sendMessageToClient=function(F){"stream"===this._source.type&&this._source.sendMessageToClient(F)};E._initAggregateStore=function(F){F=F.schema.targets?.aggregate?.type;if(v.applySome(this.config,J=>J.schema.targets?.aggregate?.type)!==F&&(null!=this.aggregateStore&&(this.removeHandles("valueRangesChanged"),this.aggregateStore.destroy(),this.aggregateStore=null),F)){switch(F){case "cluster":this.aggregateStore=new p.ClusterStore({geometryInfo:{geometryType:"esriGeometryPoint",
hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields},this.spatialReference,this._storage,this.service);this.addHandles(this.aggregateStore.events.on("valueRangesChanged",J=>{this.remoteClient.invoke("emitEvent",{name:"valueRangesChanged",event:{valueRanges:J.valueRanges}}).catch(m)}),"valueRangesChanged");break;case "bin":this.aggregateStore=new r.BinStore({geometryInfo:{geometryType:"esriGeometryPolygon",hasM:!1,hasZ:!1},spatialReference:this.spatialReference,
fieldsIndex:this.fieldsIndex,fields:this.service.fields},this.spatialReference,this._storage,this.service)}this.aggregateStore.onTileUpdate({added:this.tileStore.tiles,removed:[]})}};E.update=async function(F,J){this._updateVersion++;y("esri-2d-update-debug")&&console.debug(`FeatureController2D::update: Token version ${this._updateVersion}`);this._initQueryEngine(J);this._initAttributeStore(J);this.pause();await Promise.all([this._source.update(F,J.schema.source),this.featureStore.updateSchema(F,
J.schema.targets.feature),this.attributeStore.update(F,J),this.attributeStore.updateFilters(F,J,this)]);this._initAggregateStore(J);null!=this.aggregateStore&&await this.aggregateStore.updateSchema(F,J.schema.targets.aggregate);this._initAggregateQueryEngine(this.aggregateStore,J.schema);y("esri-2d-update-debug")&&F.describe();this._set("config",J)};E.applyUpdate=async function(F){F.version=this._updateVersion;y("esri-2d-update-debug")&&console.debug(`FeatureController2D::applyUpdate: Token version ${F.version}`);
F.mesh&&this.clearTiles();this._updateQueue.resume();await this._source.applyUpdate(F);y("esri-2d-update-debug")&&console.debug("FeatureController2D::applyUpdate Waiting for source update to finish");this.notifyChange("updating");await t.whenOnce(()=>!this.updating);y("esri-2d-update-debug")&&console.debug("FeatureController2D::applyUpdate Source update finsihed");null!=this.aggregateStore&&(await C.after(10),y("esri-2d-update-debug")&&console.debug("FeatureController2D::applyUpdate Waiting for aggregate idle call"),
await t.whenOnce(()=>!this.updating),y("esri-2d-update-debug")&&console.debug("FeatureController2D::applyUpdate Aggregate idle called"));y("esri-2d-update-debug")&&console.debug("FeatureController2D::applyUpdate Update finished")};E.onEdits=async function({edits:F}){y("esri-2d-update-debug")&&console.debug("Applying Edit:",F);this._didEdit=!0;try{const J=F.removed.map(I=>I.objectId&&-1!==I.objectId?I.objectId:this._lookupObjectIdByGlobalId(I.globalId)),L=F.addOrModified.map(({objectId:I})=>I);this.featureStore.invalidate();
await this._source.edit(L,J);this.clearTiles();this.notifyChange("updating");null!=this.aggregateStore&&this.aggregateStore.clear();await this._source.resend();await t.whenOnce(()=>!this.updating)}catch(J){}};E.refresh=async function(F){if(!F.dataChanged)return F=x.UpdateToken.empty(),F.storage.filters=!0,this.applyUpdate(F);this.featureStore.invalidate();this.clearTiles();this._source.refresh(this._updateVersion,F);this._cleanupNeeded=!0;this.notifyChange("updating");await t.whenOnce(()=>!this.updating)};
E.clearTiles=function(){for(const F of this.tileStore.tiles)this.processor.onTileClear(F,!1)};E.onTileUpdate=function(F){if(null!=this.aggregateStore)this.aggregateStore.onTileUpdate(F);for(const J of F.added)this._source.subscribe(J,this._updateVersion),this._level=J.level;for(const J of F.removed)this._source.unsubscribe(J),this._cleanupNeeded=!0,this._tileToResolver.has(J.id)&&(this._tileToResolver.get(J.id).resolve(),this._tileToResolver.delete(J.id));this.notifyChange("updating")};E.onIdle=async function(){this._invalidated&&
(this._invalidated=!1,null==this.aggregateStore&&"heatmap"!==this.processor.type||await this._repushCurrentLevelTiles());this._markAndSweep()};E.querySummaryStatistics=async function({query:F,params:J}){return this.featureQueryEngine.executeQueryForSummaryStatistics(F,J)};E.queryAggregateSummaryStatistics=async function({query:F,params:J}){return this.aggregateQueryEngine.executeQueryForSummaryStatistics(this._normalizeAggregateQuery(F),J)};E.queryUniqueValues=async function({query:F,params:J}){return this.featureQueryEngine.executeQueryForUniqueValues(F,
J)};E.queryAggregateUniqueValues=async function({query:F,params:J}){return this.aggregateQueryEngine.executeQueryForUniqueValues(this._normalizeAggregateQuery(F),J)};E.queryClassBreaks=async function({query:F,params:J}){return this.featureQueryEngine.executeQueryForClassBreaks(F,J)};E.queryAggregateClassBreaks=async function({query:F,params:J}){return this.aggregateQueryEngine.executeQueryForClassBreaks(this._normalizeAggregateQuery(F),J)};E.queryHistogram=async function({query:F,params:J}){return this.featureQueryEngine.executeQueryForHistogram(F,
J)};E.queryAggregateHistogram=async function({query:F,params:J}){return this.aggregateQueryEngine.executeQueryForHistogram(this._normalizeAggregateQuery(F),J)};E.queryExtent=function(F){return this.featureQueryEngine.executeQueryForExtent(F)};E.queryAggregates=function(F){return this.aggregateQueryEngine.executeQuery(this._normalizeAggregateQuery(F))};E.queryAggregateCount=function(F){return this.aggregateQueryEngine.executeQueryForCount(this._normalizeAggregateQuery(F))};E.queryAggregateIds=function(F){return this.aggregateQueryEngine.executeQueryForIds(this._normalizeAggregateQuery(F))};
E.queryFeatures=function(F){return this.featureQueryEngine.executeQuery(F)};E.queryVisibleFeatures=async function(F){F=await this.featureQueryEngine.executeQuery(F);const J=F.objectIdFieldName;F.features=F.features.filter(L=>{L=this.getDisplayId(L.attributes[J]);return v.applySome(L,I=>this.attributeStore.isVisible(I))});return F};E.queryFeatureCount=function(F){return this.featureQueryEngine.executeQueryForCount(F)};E.queryLatestObservations=function(F){return this.featureQueryEngine.executeQueryForLatestObservations(F)};
E.queryObjectIds=function(F){return this.featureQueryEngine.executeQueryForIds(F)};E.queryStatistics=async function(){return this.featureStore.storeStatistics};E.getObjectId=function(F){return this.featureStore.lookupObjectId(F,this._storage)};E.getDisplayId=function(F){if(null!=this.aggregateStore){const J=this.aggregateStore.getDisplayId(F);return null==J?(F=this.featureStore.lookupDisplayId(F),this.aggregateStore.getDisplayIdForReferenceId(F)):J}return this.featureStore.lookupDisplayId(F)};E.getFeatures=
function(F){const J=[],L=[];for(const I of F)F=null!=this.aggregateStore?this.getAggregate(I):null,null!=F?null!=F.attributes.referenceId?(F=this.getFeature(F.attributes.referenceId),null!=F&&J.push(F)):L.push(F):(F=this.getFeature(I),null!=F&&J.push(F));return{features:J,aggregates:L}};E.getFeature=function(F){F=this.featureStore.lookupFeatureByDisplayId(F,this._storage);if(null==F)return null;var J=F.readHydratedGeometry();J=b.convertToGeometry(J,F.geometryType,F.hasZ,F.hasM);return{attributes:F.readAttributes(),
geometry:J}};E.getAggregate=function(F){return null==this.aggregateStore?null:this.aggregateStore.getAggregate(F)};E.getAggregates=function(){return null==this.aggregateStore?[]:this.aggregateStore.getAggregates()};E.setHighlight=async function(F){const J=F.map(L=>this.getDisplayId(L)).filter(D.isSome);return this.attributeStore.setHighlight(F,J)};E._normalizeAggregateQuery=function(F){const J=F.objectIds??[];for(const L of F.aggregateIds??[])J.push(L);F.objectIds=J;F.aggregateIds=[];return F};E._lookupObjectIdByGlobalId=
function(F){const J=this.service.globalIdField;if(null==J)throw Error("Expected globalIdField to be defined");let L=null;this.featureStore.forEach(I=>{F===I.readAttribute(J)&&(L=I.getObjectId())});if(null==L)throw Error(`Expected to find a feature with globalId ${F}`);return L};E._repushCurrentLevelTiles=async function(){var F=this.tileStore.tiles.filter(J=>J.level===this._level);F.map(async J=>this._patchTile({type:"append",id:J.key.id,clear:!0,addOrUpdate:null,end:!1}));F=F.map(async J=>this._patchTile({type:"append",
id:J.key.id,addOrUpdate:u.FeatureSetReaderJSON.fromOptimizedFeatures([],this.service),remove:[],end:!0,isRepush:!0,status:x.UpdateToken.empty()}));await Promise.all(F)};E._maybeForceCleanup=function(){5E3<performance.now()-this._lastCleanup&&this._markAndSweep()};E._patchTile=function(F,J){F=this._updateQueue.push(F,J).catch(L=>{});return this.updatingHandles.addPromise(F)};E._onTileMessage=async function(F,J){C.throwIfAborted(J);if(y("esri-2d-update-debug")){var L=v.applySome(F.addOrUpdate,K=>K.hasFeatures);
console.debug(F.id,`FeatureController:onTileMessage: [clear:${F.clear}, end:${F.end}, features: ${L}]`)}if(L=this.tileStore.get(F.id)){if(F.clear)return this.processor.onTileClear(L,F.end);var I=F.status;this._cleanupNeeded=!0;var G=[];for(const K of F.remove??[]){const P=this.featureStore.lookupDisplayId(K);P&&G.push(P)}F.remove=G;try{if(null==F.addOrUpdate)this.processor.onTileMessage(L,{...F,addOrUpdate:null},null!=this.aggregateStore,J).catch(C.throwIfNotAbortError);else{F.addOrUpdate.setArcadeSpatialReference(this.spatialReference);
this.featureStore.hasInstance(F.addOrUpdate.instance)&&I.targets.feature||(I.targets.feature=!0,this.featureStore.onTileData(L,F));I.storage.data&&I.storage.filters||(I.storage.data=!0,I.storage.filters=!0,this.attributeStore.onTileData(L,F),"stream"===this._source.type||this._didEdit?(await this.attributeStore.sendUpdates(),C.throwIfAborted(J)):this.attributeStore.sendUpdates());if(null!=this.aggregateStore&&!I.targets.aggregate){I.targets.aggregate=!0;const K=z(this._source)&&this._source.loading,
P=!z(this._source)||K||F.end;this.aggregateStore.onTileData(L,F,this._storage,this.attributeStore,P);if(!P)return;I.mesh||(this.attributeStore.onTileData(L,F),await this.attributeStore.sendUpdates())}I.mesh||(I.mesh=!0,await this.processor.onTileMessage(L,F,null!=this.aggregateStore&&"cluster"===this.aggregateStore.type,J),C.throwIfAborted(J));this._maybeForceCleanup()}}catch(K){C.throwIfNotAbortError(K)}}};E._mark=function(F,J,L){const I=this._storage.getInstanceId(F);F&&(J.add((4294901760&I)>>>
16),L.set(F))};E._markAndSweep=function(){this._lastCleanup=performance.now();if(!("feature"===this._source.type&&"snapshot"===this._source.mode||"stream"!==this._source.type&&!this._cleanupNeeded)){this._cleanupNeeded=!1;var F=this._storage.getBitset(this._markedIdsBufId),J=new Set;F.clear();for(const I of this.tileStore.tiles)for(const G of this._source.readers(I.id)){const K=G.getCursor();for(;K.next();){var L=K.getDisplayId();L||(L=K.getObjectId(),L=this.featureStore.lookupDisplayId(L));this._mark(L,
J,F)}}"symbol"===this.processor.type&&this.processor.forEachBufferId(I=>{this._mark(I,J,F)});this._updateQueue.forEach(I=>{for(const G of I.remove??[])I=this.featureStore.lookupDisplayId(G),this._mark(I,J,F)});null!=this.aggregateStore&&(this.aggregateStore.sweepFeatures(F,this.featureStore),"sweepAggregates"in this.aggregateStore&&this.aggregateStore.sweepAggregates(this._storage,this.attributeStore,this._level));this.featureStore.sweepFeatures(F,this._storage,this.attributeStore);this.featureStore.sweepFeatureSets(J)}};
l._createClass(H,[{key:"fieldsIndex",get:function(){return new f(this.service.fields)}},{key:"spatialReference",get:function(){return this.tileStore.tileScheme.spatialReference}},{key:"updating",get:function(){return this.isUpdating()}}]);return H}(B.HandleOwner);h.__decorate([q.property({constructOnly:!0})],B.prototype,"tileStore",void 0);h.__decorate([q.property()],B.prototype,"config",void 0);h.__decorate([q.property({readOnly:!0})],B.prototype,"fieldsIndex",null);h.__decorate([q.property()],B.prototype,
"processor",void 0);h.__decorate([q.property({constructOnly:!0})],B.prototype,"remoteClient",void 0);h.__decorate([q.property({constructOnly:!0})],B.prototype,"service",void 0);h.__decorate([q.property()],B.prototype,"spatialReference",null);h.__decorate([q.property()],B.prototype,"updating",null);return B=h.__decorate([e.subclass("esri.views.2d.layers.features.controllers.FeatureController2D")],B)})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(l,h,D,B,y,v,C,t,q,k){function e(X,fa){return X?fa?4:3:fa?3:2}function b(X,fa,ja,ma){if(X){if(ja)return fa&&ma?V:Da;if(fa&&ma)return N}else if(fa&&ma)return Da;return Ca}function c({scale:X,translate:fa},ja){return Math.round((ja-fa[0])/X[0])}function f({scale:X,translate:fa},ja){return Math.round((fa[1]-ja)/X[1])}function a({scale:X,translate:fa},ja,ma){return ja*X[ma]+fa[ma]}function d(X){X=X.coords;return{x:X[0],y:X[1]}}function n(X,fa){X.coords[0]=fa.x;X.coords[1]=fa.y;return X}function r(X){X=
X.coords;return{x:X[0],y:X[1],z:X[2]}}function p(X,fa){X.coords[0]=fa.x;X.coords[1]=fa.y;X.coords[2]=fa.z;return X}function g(X){X=X.coords;return{x:X[0],y:X[1],m:X[2]}}function u(X,fa){X.coords[0]=fa.x;X.coords[1]=fa.y;X.coords[2]=fa.m;return X}function x(X){X=X.coords;return{x:X[0],y:X[1],z:X[2],m:X[3]}}function w(X,fa){X.coords[0]=fa.x;X.coords[1]=fa.y;X.coords[2]=fa.z;X.coords[3]=fa.m;return X}function m(X,fa){return X&&fa?w:X?p:fa?u:n}function z(X,fa,ja,ma,ra){ja=m(ja,ma);for(const {geometry:va,
attributes:za}of fa)fa=null!=va?ja(new k,va):null,X.push(new t.OptimizedFeature(fa,za,null,ra?za[ra]:void 0));return X}function A(X,fa,ja,ma){for(const {geometry:ra,attributes:va}of fa)X.push({attributes:va,geometry:null!=ra?H(ra,ja,ma):null});return X}function H(X,fa,ja){if(null==X)return null;const ma=e(fa,ja),ra=[];for(let va=0;va<X.coords.length;va+=ma){const za=[];for(let Ea=0;Ea<ma;Ea++)za.push(X.coords[va+Ea]);ra.push(za)}return fa?ja?{points:ra,hasZ:fa,hasM:ja}:{points:ra,hasZ:fa}:ja?{points:ra,
hasM:ja}:{points:ra}}function E(X,fa,ja,ma,ra){ja=e(ja,ma);for(const {geometry:va,attributes:za}of fa)fa=null!=va?F(new k,va,ja):null,X.push(new t.OptimizedFeature(fa,za,null,ra?za[ra]:void 0));return X}function F(X,fa,ja=e(fa.hasZ,fa.hasM)){X.lengths[0]=fa.points.length;const ma=X.coords;let ra=0;for(const va of fa.points)for(fa=0;fa<ja;fa++)ma[ra++]=va[fa];return X}function J(X,fa,ja){if(!X)return null;const ma=e(fa,ja),{coords:ra,lengths:va}=X;X=[];let za=0;for(const Ea of va){const Ga=[];for(let Na=
0;Na<Ea;Na++){const Ka=[];for(let La=0;La<ma;La++)Ka.push(ra[za++]);Ga.push(Ka)}X.push(Ga)}return fa?ja?{paths:X,hasZ:fa,hasM:ja}:{paths:X,hasZ:fa}:ja?{paths:X,hasM:ja}:{paths:X}}function L(X,fa,ja,ma,ra){ja=e(ja,ma);for(const {geometry:va,attributes:za}of fa)fa=null!=va?I(new k,va,ja):null,X.push(new t.OptimizedFeature(fa,za,null,ra?za[ra]:void 0));return X}function I(X,fa,ja=e(fa.hasZ,fa.hasM)){const {lengths:ma,coords:ra}=X;let va=0;for(const za of fa.paths){for(const Ea of za)for(fa=0;fa<ja;fa++)ra[va++]=
Ea[fa];ma.push(za.length)}return X}function G(X,fa,ja){if(!X)return null;const ma=e(fa,ja),{coords:ra,lengths:va}=X;X=[];let za=0;for(const Ea of va){const Ga=[];for(let Na=0;Na<Ea;Na++){const Ka=[];for(let La=0;La<ma;La++)Ka.push(ra[za++]);Ga.push(Ka)}X.push(Ga)}return fa?ja?{rings:X,hasZ:fa,hasM:ja}:{rings:X,hasZ:fa}:ja?{rings:X,hasM:ja}:{rings:X}}function K(X,fa,ja,ma,ra){for(const {geometry:va,centroid:za,attributes:Ea}of fa){fa=null!=va?P(new k,va,ja,ma):null;const Ga=ra?Ea[ra]:void 0;null!=
za?X.push(new t.OptimizedFeature(fa,Ea,n(new k,za),Ga)):X.push(new t.OptimizedFeature(fa,Ea,null,Ga))}return X}function P(X,fa,ja=fa.hasZ,ma=fa.hasM){return Y(X,fa.rings,ja,ma)}function Y(X,fa,ja,ma){ja=e(ja,ma);const {lengths:ra,coords:va}=X;ma=0;ca(X);for(const za of fa){for(const Ea of za)for(fa=0;fa<ja;fa++)va[ma++]=Ea[fa];ra.push(za.length)}return X}function ea(X,fa,ja,ma,ra,va){qa(X);if(!ja){for(const za of fa)X.push(new t.OptimizedFeature(null,za.attributes,null,va?za.attributes[va]:void 0));
return X}switch(ja){case "esriGeometryPoint":return z(X,fa,ma,ra,va);case "esriGeometryMultipoint":return E(X,fa,ma,ra,va);case "esriGeometryPolyline":return L(X,fa,ma,ra,va);case "esriGeometryPolygon":return K(X,fa,ma,ra,va);default:ya.error("convertToFeatureSet:unknown-geometry",new h(`Unable to parse unknown geometry type '${ja}'`)),qa(X)}return X}function aa(X,fa,ja,ma){X=X&&("coords"in X?X:X.geometry);if(null==X)return null;switch(fa){case "esriGeometryPoint":return fa=d,ja&&ma?fa=x:ja?fa=r:
ma&&(fa=g),fa(X);case "esriGeometryMultipoint":return H(X,ja,ma);case "esriGeometryPolyline":return J(X,ja,ma);case "esriGeometryPolygon":return G(X,ja,ma);default:return ya.error("convertToGeometry:unknown-geometry",new h(`Unable to parse unknown geometry type '${fa}'`)),null}}function T(X,fa,ja,ma,ra){qa(X);if(null==ja){for(const za of fa)X.push({attributes:za.attributes});return X}switch(ja){case "esriGeometryPoint":ja=d;ma&&ra?ja=x:ma?ja=r:ra&&(ja=g);for(var va of fa){const {geometry:za,attributes:Ea}=
va;ma=null!=za?ja(za):null;X.push({attributes:Ea,geometry:ma})}break;case "esriGeometryMultipoint":return A(X,fa,ma,ra);case "esriGeometryPolyline":for(const {geometry:za,attributes:Ea}of fa)X.push({attributes:Ea,geometry:null!=za?J(za,ma,ra):null});break;case "esriGeometryPolygon":for(const {geometry:za,attributes:Ea,centroid:Ga}of fa)va=null!=za?G(za,ma,ra):null,null!=Ga?(fa=d(Ga),X.push({attributes:Ea,centroid:fa,geometry:va})):X.push({attributes:Ea,geometry:va});break;default:ya.error("convertToFeatureSet:unknown-geometry",
new h(`Unable to parse unknown geometry type '${ja}'`))}return X}function R(X,fa,ja,ma,ra,va,za=ja,Ea=ma){ca(X);if(null==fa||!fa.coords.length)return null;ra=xa[ra];const {coords:Ga,lengths:Na}=fa;fa=e(ja,ma);const Ka=e(ja&&za,ma&&Ea);ja=b(ja,ma,za,Ea);if(!Na.length)return ja(X.coords,Ga,0,0,c(va,Ga[0]),f(va,Ga[1])),ca(X,fa,0),X;let La,Va=0,Ra,Ua=0;for(const Xa of Na){if(Xa<ra)continue;let Sa=0;Ra=Ua;Ea=ma=c(va,Ga[Va]);La=za=f(va,Ga[Va+1]);ja(X.coords,Ga,Ra,Va,Ea,La);Sa++;Va+=fa;Ra+=Ka;for(let $a=
1;$a<Xa;$a++,Va+=fa)if(Ea=c(va,Ga[Va]),La=f(va,Ga[Va+1]),Ea!==ma||La!==za)ja(X.coords,Ga,Ra,Va,Ea-ma,La-za),Ra+=Ka,Sa++,ma=Ea,za=La;Sa>=ra&&(X.lengths.push(Sa),Ua=Ra)}qa(X.coords,Ua);return X.coords.length?X:null}function W(X,fa,ja,ma,ra,va,za){let Ea=ma,Ga=0;for(let Ka=va+ja;Ka<za;Ka+=ja){var Na=fa[Ka];const La=fa[Ka+1],Va=fa[za],Ra=fa[za+1];let Ua=fa[va],Xa=fa[va+1],Sa=Va-Ua,$a=Ra-Xa;if(0!==Sa||0!==$a){const bb=((Na-Ua)*Sa+(La-Xa)*$a)/(Sa*Sa+$a*$a);1<bb?(Ua=Va,Xa=Ra):0<bb&&(Ua+=Sa*bb,Xa+=$a*bb)}Sa=
Na-Ua;$a=La-Xa;Na=Sa*Sa+$a*$a;Na>Ea&&(Ga=Ka,Ea=Na)}Ea>ma&&(Ga-va>ja&&W(X,fa,ja,ma,ra,va,Ga),ra(X,fa,X.length,Ga,fa[Ga],fa[Ga+1]),za-Ga>ja&&W(X,fa,ja,ma,ra,Ga,za))}function S(X,fa,ja,ma,ra){const {coords:va,lengths:za}=fa;ja=e(ja,ma);if(!va.length)return X!==fa&&ca(X),X;B.assertIsSome(ra);const {originPosition:Ea,scale:Ga,translate:Na}=ra;ra=na;ra.originPosition=Ea;ma=ra.scale;ma[0]=Ga[0]??1;ma[1]=-(Ga[1]??1);ma[2]=Ga[2]??1;ma[3]=Ga[3]??1;var Ka=ra.translate;Ka[0]=Na[0]??0;Ka[1]=Na[1]??0;Ka[2]=Na[2]??
0;Ka[3]=Na[3]??0;if(!za.length){for(ma=0;ma<ja;++ma)X.coords[ma]=a(ra,va[ma],ma);X!==fa&&ca(X,ja,0);return X}Ka=0;for(let Va=0;Va<za.length;Va++){const Ra=za[Va];X.lengths[Va]=Ra;for(var La=0;La<ja;++La)X.coords[Ka+La]=a(ra,va[Ka+La],La);La=X.coords[Ka];let Ua=X.coords[Ka+1];Ka+=ja;for(let Xa=1;Xa<Ra;Xa++,Ka+=ja){La+=va[Ka]*ma[0];Ua+=va[Ka+1]*ma[1];X.coords[Ka]=La;X.coords[Ka+1]=Ua;for(let Sa=2;Sa<ja;++Sa)X.coords[Ka+Sa]=a(ra,va[Ka+Sa],Sa)}}X!==fa&&ca(X,va.length,za.length);return X}function Z(X,
fa,ja,ma){let ra=0,va=X[ma*fa],za=X[ma*(fa+1)];for(let Ea=1;Ea<ja;Ea++){const Ga=va+X[ma*(fa+Ea)],Na=za+X[ma*(fa+Ea)+1],Ka=(Ga-va)*(Na+za);va=Ga;za=Na;ra+=Ka}return.5*ra}function ca(X,fa=0,ja=0){qa(X.lengths,ja);qa(X.coords,fa)}function qa(X,fa=0){X.length!==fa&&(X.length=fa)}const ya=D.getLogger("esri.layers.graphics.featureConversionUtils"),xa={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},Ca=(X,fa,ja,ma,ra,va)=>{X[ja]=ra;X[ja+
1]=va},Da=(X,fa,ja,ma,ra,va)=>{X[ja]=ra;X[ja+1]=va;X[ja+2]=fa[ma+2]},N=(X,fa,ja,ma,ra,va)=>{X[ja]=ra;X[ja+1]=va;X[ja+2]=fa[ma+3]},V=(X,fa,ja,ma,ra,va)=>{X[ja]=ra;X[ja+1]=va;X[ja+2]=fa[ma+2];X[ja+3]=fa[ma+3]},ka=[],da=[],na={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};l.convertFromFeature=function(X,fa,ja,ma,ra){ka[0]=X;[X]=ea(da,ka,fa,ja,ma,ra);qa(ka);qa(da);return X};l.convertFromFeatureSet=function(X,fa){const ja=new q,{hasM:ma,hasZ:ra,features:va,objectIdFieldName:za,spatialReference:Ea,
geometryType:Ga,exceededTransferLimit:Na,transform:Ka,fields:La}=X;La&&(ja.fields=La);ja.geometryType=Ga??null;ja.objectIdFieldName=za??fa??null;ja.spatialReference=Ea??null;if(!ja.objectIdFieldName)return ya.error(new h("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),ja;va&&ea(ja.features,va,Ga,ra,ma,ja.objectIdFieldName);Na&&(ja.exceededTransferLimit=Na);ma&&(ja.hasM=ma);ra&&(ja.hasZ=ra);Ka&&(ja.transform=Ka);return ja};l.convertFromFeatures=ea;l.convertFromGeometry=
function(X,fa,ja){if(null==X)return null;const ma=new k;"hasZ"in X&&null==fa&&(fa=X.hasZ);"hasM"in X&&null==ja&&(ja=X.hasM);if(C.isPoint(X))return m(null!=fa?fa:null!=X.z,null!=ja?ja:null!=X.m)(ma,X);if(C.isPolygon(X))return P(ma,X,fa,ja);if(C.isPolyline(X))return I(ma,X,e(fa,ja));if(C.isMultipoint(X))return F(ma,X,e(fa,ja));ya.error("convertFromGeometry:unknown-geometry",new h(`Unable to parse unknown geometry type '${X}'`))};l.convertFromGraphics=function(X,fa,ja,ma,ra,va){const za=X.length;switch(ja){case "esriGeometryPoint":z(X,
fa,ma,ra,va);break;case "esriGeometryMultipoint":E(X,fa,ma,ra,va);break;case "esriGeometryPolyline":L(X,fa,ma,ra,va);break;case "esriGeometryPolygon":K(X,fa,ma,ra,va);break;default:ya.error("convertToFeatureSet:unknown-geometry",new h(`Unable to parse unknown geometry type '${ja}'`))}for(ma=0;ma<fa.length;ma++)X[ma+za].geometryType=ja,X[ma+za].insertAfter=fa[ma].insertAfter,X[ma+za].groupId=fa[ma].groupId;return X};l.convertFromMultipoint=F;l.convertFromMultipointFeatures=E;l.convertFromNestedArray=
Y;l.convertFromPoint=function(X,fa,ja=m(null!=fa.z,null!=fa.m)){return ja(X,fa)};l.convertFromPointFeatures=z;l.convertFromPolygon=P;l.convertFromPolyline=I;l.convertFromPolylineFeatures=L;l.convertToFeature=function(X,fa,ja,ma){da[0]=X;T(ka,da,fa,ja,ma);X=ka[0];qa(ka);qa(da);return X};l.convertToFeatureSet=function(X){const {objectIdFieldName:fa,spatialReference:ja,transform:ma,fields:ra,hasM:va,hasZ:za,features:Ea,geometryType:Ga,exceededTransferLimit:Na,uniqueIdField:Ka,queryGeometry:La,queryGeometryType:Va}=
X;X=T([],Ea,Ga,za,va);const Ra=aa(La,Va,!1,!1);X={features:X,fields:ra,geometryType:Ga,objectIdFieldName:fa,spatialReference:ja,uniqueIdField:Ka,queryGeometry:Ra};ma&&(X.transform=ma);Na&&(X.exceededTransferLimit=Na);va&&(X.hasM=va);za&&(X.hasZ=za);return X};l.convertToFeatures=T;l.convertToGeometry=aa;l.convertToMultipoint=H;l.convertToMultipointFeatures=A;l.convertToPoint=function(X,fa,ja){return X?fa?ja?x(X):r(X):ja?g(X):d(X):null};l.convertToPolygon=G;l.convertToPolyline=J;l.deltaDecodeGeometry=
function(X,fa){if(null==X)return null;const ja=X.clone(),ma=X.coords;X=X.lengths;let ra=0;for(let Ea=0;Ea<X.length;Ea++){const Ga=X[Ea];var va=ma[fa*ra],za=ma[fa*ra+1];for(let Na=1;Na<Ga;Na++)va+=ma[fa*(ra+Na)],za+=ma[fa*(ra+Na)+1],ja.coords[fa*(ra+Na)]=va,ja.coords[fa*(ra+Na)+1]=za;ra+=Ga}return ja};l.deltaEncodeGeometry=function(X,fa){const ja=X.clone(),ma=X.coords;X=X.lengths;let ra=0;for(let za=0;za<X.length;za++){const Ea=X[za];let Ga=ma[fa*ra];var va=ma[fa*ra+1];for(let Na=1;Na<Ea;Na++){const Ka=
ma[fa*(ra+Na)],La=ma[fa*(ra+Na)+1];va=La-va;ja.coords[fa*(ra+Na)]=Ka-Ga;ja.coords[fa*(ra+Na)+1]=va;Ga=Ka;va=La}ra+=Ea}return ja};l.generalizeOptimizedGeometry=function(X,fa,ja,ma,ra,va,za=ja,Ea=ma){ca(X);if(!fa||!fa.coords.length)return null;ra=xa[ra];const {coords:Ga,lengths:Na}=fa;fa=e(ja,ma);const Ka=e(ja&&za,ma&&Ea);ja=b(ja,ma,za,Ea);if(!Na.length)return ja(X.coords,Ga,0,0,Ga[0],Ga[1]),ca(X,fa,0),X;ma=0;va*=va;for(const La of Na){if(La<ra){ma+=La*fa;continue}za=X.coords.length/Ka;Ea=ma;const Va=
ma+(La-1)*fa;ja(X.coords,Ga,X.coords.length,Ea,Ga[Ea],Ga[Ea+1]);W(X.coords,Ga,fa,va,ja,Ea,Va);ja(X.coords,Ga,X.coords.length,Va,Ga[Va],Ga[Va+1]);Ea=X.coords.length/Ka-za;Ea>=ra?X.lengths.push(Ea):qa(X.coords,za*Ka);ma+=La*fa}return X.coords.length?X:null};l.getBoundsOptimizedGeometry=function(X,fa,ja,ma){if(null==fa||!fa.coords||!fa.coords.length)return null;ja=e(ja,ma);let ra=ma=Number.POSITIVE_INFINITY,va=Number.NEGATIVE_INFINITY,za=Number.NEGATIVE_INFINITY;if(fa&&fa.coords){fa=fa.coords;for(let Ea=
0;Ea<fa.length;Ea+=ja){const Ga=fa[Ea],Na=fa[Ea+1];ma=Math.min(ma,Ga);va=Math.max(va,Ga);ra=Math.min(ra,Na);za=Math.max(za,Na)}}y.is(X)?y.fromRectValues(X,ma,ra,va,za):v.fromValues(ma,ra,va,za,X);return X};l.getQuantizedArea=function(X,fa){const {coords:ja,lengths:ma}=X;let ra=X=0;for(let va=0;va<ma.length;va++){const za=ma[va];ra+=Z(ja,X,za,fa);X+=za}return Math.abs(ra)};l.getQuantizedBoundsOptimizedGeometry=function(X,fa,ja,ma){ja=e(ja,ma);const {lengths:ra,coords:va}=fa;ma=fa=Number.POSITIVE_INFINITY;
let za=Number.NEGATIVE_INFINITY,Ea=Number.NEGATIVE_INFINITY,Ga=0;for(const Na of ra){let Ka=va[Ga],La=va[Ga+1];fa=Math.min(Ka,fa);ma=Math.min(La,ma);za=Math.max(Ka,za);Ea=Math.max(La,Ea);Ga+=ja;for(let Va=1;Va<Na;Va++,Ga+=ja){const Ra=va[Ga],Ua=va[Ga+1];Ka+=Ra;La+=Ua;0>Ra&&(fa=Math.min(fa,Ka));0<Ra&&(za=Math.max(za,Ka));0>Ua?ma=Math.min(ma,La):0<Ua&&(Ea=Math.max(Ea,La))}}X[0]=fa;X[1]=ma;X[2]=za;X[3]=Ea;return X};l.getSignedQuantizedRingArea=Z;l.quantizeOptimizedFeatureSet=function(X,fa){const {geometryType:ja,
features:ma,hasM:ra,hasZ:va}=fa;if(!X)return fa;for(let za=0;za<ma.length;za++){const Ea=ma[za],Ga=Ea.weakClone();Ga.geometry=new k;R(Ga.geometry,Ea.geometry,ra,va,ja,X);Ea.centroid&&(Ga.centroid=new k,R(Ga.centroid,Ea.centroid,ra,va,"esriGeometryPoint",X));ma[za]=Ga}fa.transform=X;return fa};l.quantizeOptimizedGeometry=R;l.quantizeX=c;l.quantizeY=f;l.removeCollinearVectices=function(X,fa,ja,ma,ra){if(!fa||!fa.coords||!fa.coords.length)return null;ja=xa[ja];const {coords:va,lengths:za}=fa;fa=b(ma,
ra,ma,ra);ma=e(ma,ra);let Ea=ra=0,Ga=0,Na=0;for(const Va of za){Ea=Na;fa(X.coords,va,Ea,ra,va[ra],va[ra+1]);ra+=ma;var Ka=va[ra];let Ra=va[ra+1],Ua=Ka,Xa=Ra;var La=Ra/Ka;Ea+=ma;fa(X.coords,va,Ea,ra,Ua,Xa);ra+=ma;for(let Sa=2;Sa<Va;Sa++){Ka=va[ra];Ra=va[ra+1];const $a=Ra/Ka,bb=La===$a||!isFinite(La)&&!isFinite($a);La=bb&&isFinite($a)?0<=La&&0<=$a||0>=La&&0>=$a:0<=Xa&&0<=Ra||0>=Xa&&0>=Ra;bb&&La?(Ua+=Ka,Xa+=Ra):(Ua=Ka,Xa=Ra,Ea+=ma);fa(X.coords,va,Ea,ra,Ua,Xa);ra+=ma;La=$a}Ea+=ma;Ka=(Ea-Na)/ma;Ka>=ja&&
(X.lengths[Ga]=Ka,Na=Ea,Ga++)}X.coords.length>Na&&(X.coords.length=Na);X.lengths.length>Ga&&(X.lengths.length=Ga);return X.coords.length&&X.lengths.length?X:null};l.removeZMValues=function(X,fa,ja,ma,ra,va){ca(X);X.lengths.push(...fa.lengths);if(ja===ra&&ma===va)for(var za=0;za<fa.coords.length;za++)X.coords.push(fa.coords[za]);else for(za=e(ja,ma),ja=b(ja,ma,ra,va),fa=fa.coords,ma=0;ma<fa.length;ma+=za)ja(X.coords,fa,X.coords.length,ma,fa[ma],fa[ma+1]);return X};l.unquantizeOptimizedFeatureSet=function(X){const {transform:fa,
features:ja,hasM:ma,hasZ:ra}=X;if(!fa)return X;for(const va of ja)null!=va.geometry&&S(va.geometry,va.geometry,ma,ra,fa),null!=va.centroid&&S(va.centroid,va.centroid,ma,ra,fa);X.transform=null;return X};l.unquantizeOptimizedGeometry=S;l.unquantizeValue=a;l.unquantizeX=function(X,fa){return a(X,fa,0)};l.unquantizeY=function(X,fa){return a(X,-fa,1)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],
function(l,h,D){function B(a=c){return[a[0],a[1],a[2],a[3],a[4],a[5]]}function y(a,d,n,r,p,g,u=B()){u[0]=a;u[1]=d;u[2]=n;u[3]=r;u[4]=p;u[5]=g;return u}function v(a){return a[0]>=a[3]?0:a[3]-a[0]}function C(a){return a[1]>=a[4]?0:a[4]-a[1]}function t(a){return a[2]>=a[5]?0:a[5]-a[2]}function q(a,d){return Math.max(d[0],a[0])<=Math.min(d[3],a[3])&&Math.max(d[1],a[1])<=Math.min(d[4],a[4])&&Math.max(d[2],a[2])<=Math.min(d[5],a[5])}function k(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=
d[5];return a}function e(a){return 6===a.length}const b=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],c=[0,0,0,0,0,0],f=B();l.NEGATIVE_INFINITY=b;l.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];l.ZERO=c;l.allFinite=function(a){for(let d=0;6>d;d++)if(!isFinite(a[d]))return!1;return!0};l.center=function(a,d=[0,0,0]){d[0]=a[0]+v(a)/2;d[1]=a[1]+C(a)/2;d[2]=a[2]+t(a)/2;return d};l.contains=function(a,d){return d[0]>=a[0]&&d[1]>=a[1]&&d[2]>=a[2]&&d[3]<=a[3]&&
d[4]<=a[4]&&d[5]<=a[5]};l.containsPoint=function(a,d){return d[0]>=a[0]&&d[1]>=a[1]&&d[2]>=a[2]&&d[0]<=a[3]&&d[1]<=a[4]&&d[2]<=a[5]};l.containsPointWithMargin=function(a,d,n){return d[0]>=a[0]-n&&d[1]>=a[1]-n&&d[2]>=a[2]-n&&d[0]<=a[3]+n&&d[1]<=a[4]+n&&d[2]<=a[5]+n};l.create=B;l.depth=C;l.diameter=function(a){const d=v(a),n=t(a);a=C(a);return Math.sqrt(d*d+n*n+a*a)};l.empty=function(a){return a?k(a,b):B(b)};l.equals=function(a,d,n){if(null==a||null==d)return a===d;if(!e(a)||!e(d))return!1;if(n)for(let r=
0;r<a.length;r++){if(!n(a[r],d[r]))return!1}else for(n=0;n<a.length;n++)if(a[n]!==d[n])return!1;return!0};l.expandWithAABB=function(a,d){a[0]=Math.min(a[0],d[0]);a[1]=Math.min(a[1],d[1]);a[2]=Math.min(a[2],d[2]);a[3]=Math.max(a[3],d[3]);a[4]=Math.max(a[4],d[4]);a[5]=Math.max(a[5],d[5])};l.expandWithBuffer=function(a,d,n=0,r=d.length/3){let p=a[0],g=a[1],u=a[2],x=a[3],w=a[4],m=a[5];for(let z=0;z<r;z++)p=Math.min(p,d[n+3*z]),g=Math.min(g,d[n+3*z+1]),u=Math.min(u,d[n+3*z+2]),x=Math.max(x,d[n+3*z]),w=
Math.max(w,d[n+3*z+1]),m=Math.max(m,d[n+3*z+2]);a[0]=p;a[1]=g;a[2]=u;a[3]=x;a[4]=w;a[5]=m};l.expandWithNestedArray=function(a,d,n){const r=d.length;let p=a[0],g=a[1],u=a[2],x=a[3],w=a[4],m=a[5];if(n)for(n=0;n<r;n++){var z=d[n];p=Math.min(p,z[0]);g=Math.min(g,z[1]);u=Math.min(u,z[2]);x=Math.max(x,z[0]);w=Math.max(w,z[1]);m=Math.max(m,z[2])}else for(n=0;n<r;n++)z=d[n],p=Math.min(p,z[0]),g=Math.min(g,z[1]),x=Math.max(x,z[0]),w=Math.max(w,z[1]);a[0]=p;a[1]=g;a[2]=u;a[3]=x;a[4]=w;a[5]=m};l.expandWithOffset=
function(a,d,n,r){a[0]=Math.min(a[0],a[0]+d);a[3]=Math.max(a[3],a[3]+d);a[1]=Math.min(a[1],a[1]+n);a[4]=Math.max(a[4],a[4]+n);a[2]=Math.min(a[2],a[2]+r);a[5]=Math.max(a[5],a[5]+r)};l.expandWithRect=function(a,d){a[0]=Math.min(a[0],d[0]);a[1]=Math.min(a[1],d[1]);a[3]=Math.max(a[3],d[2]);a[4]=Math.max(a[4],d[3])};l.expandWithVec3=function(a,d){a[0]=Math.min(a[0],d[0]);a[1]=Math.min(a[1],d[1]);a[2]=Math.min(a[2],d[2]);a[3]=Math.max(a[3],d[0]);a[4]=Math.max(a[4],d[1]);a[5]=Math.max(a[5],d[2])};l.fromExtent=
function(a,d=B()){d[0]=a.xmin;d[1]=a.ymin;d[2]=a.hasZ?a.zmin:-Infinity;d[3]=a.xmax;d[4]=a.ymax;d[5]=a.hasZ?a.zmax:Infinity;return d};l.fromMinMax=function(a,d,n=B()){n[0]=a[0];n[1]=a[1];n[2]=a[2];n[3]=d[0];n[4]=d[1];n[5]=d[2];return n};l.fromRect=function(a,d){a[0]=d[0];a[1]=d[1];a[2]=Number.NEGATIVE_INFINITY;a[3]=d[2];a[4]=d[3];a[5]=Number.POSITIVE_INFINITY;return a};l.fromRectValues=function(a,d,n,r,p){a[0]=d;a[1]=n;a[2]=Number.NEGATIVE_INFINITY;a[3]=r;a[4]=p;a[5]=Number.POSITIVE_INFINITY;return a};
l.fromValues=y;l.getMax=function(a,d){d[0]=a[3];d[1]=a[4];d[2]=a[5];return d};l.getMin=function(a,d){d[0]=a[0];d[1]=a[1];d[2]=a[2];return d};l.height=t;l.intersects=q;l.intersectsClippingArea=function(a,d){return null==d?!0:q(a,d)};l.is=e;l.isPoint=function(a){return 0===v(a)&&0===C(a)&&0===t(a)};l.maximumDimension=function(a){return Math.max(v(a),t(a),C(a))};l.offset=function(a,d,n,r,p=a){p[0]=a[0]+d;p[1]=a[1]+n;p[2]=a[2]+r;p[3]=a[3]+d;p[4]=a[4]+n;p[5]=a[5]+r;return p};l.scale=function(a,d,n=a){const r=
a[0]+v(a)/2,p=a[1]+C(a)/2,g=a[2]+t(a)/2;n[0]=r+(a[0]-r)*d;n[1]=p+(a[1]-p)*d;n[2]=g+(a[2]-g)*d;n[3]=r+(a[3]-r)*d;n[4]=p+(a[4]-p)*d;n[5]=g+(a[5]-g)*d;return n};l.set=k;l.setMax=function(a,d,n=a){n[3]=d[0];n[4]=d[1];n[5]=d[2];n!==a&&(n[0]=a[0],n[1]=a[1],n[2]=a[2]);return a};l.setMin=function(a,d,n=a){n[0]=d[0];n[1]=d[1];n[2]=d[2];n!==a&&(n[3]=a[3],n[4]=a[4],n[5]=a[5]);return n};l.size=function(a,d=[0,0,0]){d[0]=v(a);d[1]=C(a);d[2]=t(a);return d};l.toExtent=function(a,d){return isFinite(a[2])||isFinite(a[5])?
new h({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:d}):new h({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:d})};l.toRect=function(a,d){d||(d=D.create());d[0]=a[0];d[1]=a[1];d[2]=a[3];d[3]=a[4];return d};l.width=v;l.wrap=function(a,d,n,r,p,g){return y(a,d,n,r,p,g,f)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(l,h){let D=
function(){function y(v=null,C={},t,q){this.geometry=v;this.attributes=C;this.centroid=t;this.objectId=q;this.geohashY=this.geohashX=this.displayId=0}y.prototype.weakClone=function(){const v=new y(this.geometry,this.attributes,this.centroid,this.objectId);v.displayId=this.displayId;v.geohashX=this.geohashX;v.geohashY=this.geohashY;return v};return h._createClass(y)}(),B=function(y){function v(){return y.apply(this,arguments)||this}h._inherits(v,y);return h._createClass(v)}(D);l.OptimizedFeature=D;
l.OptimizedFeatureWithGeometry=B;l.hasGeometry=function(y){return!(null==y.geometry||!y.geometry.coords||!y.geometry.coords.length)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function h(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=
!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}h.prototype.weakClone=function(){const D=new h;D.objectIdFieldName=this.objectIdFieldName;D.globalIdFieldName=this.globalIdFieldName;D.geohashFieldName=this.geohashFieldName;D.geometryProperties=this.geometryProperties;D.geometryType=this.geometryType;D.spatialReference=this.spatialReference;D.hasZ=this.hasZ;D.hasM=this.hasM;D.features=this.features;
D.fields=this.fields;D.transform=this.transform;D.exceededTransferLimit=this.exceededTransferLimit;D.uniqueIdField=this.uniqueIdField;D.queryGeometry=this.queryGeometry;D.queryGeometryType=this.queryGeometryType;return D};return l._createClass(h)}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function h(B=[],y=[],v=!1){this.lengths=B??[];this.coords=y??[];this.hasIndeterminateRingOrder=v}h.fromRect=function(B){const [y,
v,C,t]=B;B=C-y;const q=t-v;return new h([5],[y,v,B,0,0,q,-B,0,0,-q])};var D=h.prototype;D.forEachVertex=function(B){let y=0;this.lengths.length||B(this.coords[0],this.coords[1]);for(let v=0;v<this.lengths.length;v++){const C=this.lengths[v];for(let t=0;t<C;t++)B(this.coords[2*(t+y)],this.coords[2*(t+y)+1]);y+=C}};D.clone=function(B){return B?(B.set(this.coords),new h(this.lengths.slice(),B,this.hasIndeterminateRingOrder)):new h(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};
l._createClass(h,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((B,y)=>B+y)}}]);return h}()})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x,w,m,z,A){function H(I){return null!=I&&I.every(G=>"exceedslimit"!==G.statisticType)}let E=h._createClass(function(I,G=null,K,P,Y){this.attributes=I;this.geometry=K;this.centroid=P;this.filterFlags=Y;this.groupId=-1;this.displayId=G});const F=new C.MemCacheStorage(2E6);let J=0,L=function(){function I(K){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:p.queryCapabilities};this.geometryType=K.geometryType;this.hasM=!!K.hasM;
this.hasZ=!!K.hasZ;this.objectIdField=K.objectIdField;this.spatialReference=K.spatialReference;this.definitionExpression=K.definitionExpression;this.featureStore=K.featureStore;this.aggregateAdapter=K.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=K.timeInfo;K.cacheSpatialQueries&&(this._geometryQueryCache=new C.MemCache(J++ +"$$",F));this.fieldsIndex=new m(K.fields);K.scheduler&&K.priority&&(this._frameTask=K.scheduler.registerTask(K.priority))}
var G=I.prototype;G.destroy=function(){this._frameTask=v.removeMaybe(this._frameTask);this.clearCache();v.destroyMaybe(this._geometryQueryCache);this._changeHandle=v.removeMaybe(this._changeHandle);v.destroyMaybe(this.fieldsIndex)};G.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};G.executeQuery=async function(K,P){try{return(await this._executeQuery(K,{},P)).createQueryResponse()}catch(Y){if(Y!==w.QUERY_ENGINE_EMPTY_RESULT)throw Y;return(new g.QueryEngineResult([],
K,this)).createQueryResponse()}};G.executeQueryForCount=async function(K={},P){try{return(await this._executeQuery(K,{returnGeometry:!1,returnCentroid:!1,outSR:null},P)).createQueryResponseForCount()}catch(Y){if(Y!==w.QUERY_ENGINE_EMPTY_RESULT)throw Y;return 0}};G.executeQueryForExtent=async function(K,P){const Y=K.outSR;try{const ea=await this._executeQuery(K,{returnGeometry:!0,returnCentroid:!1,outSR:null},P),aa=ea.size;if(!aa)return{count:0,extent:null};const T=await this._getBounds(ea.items,ea.spatialReference,
Y||this.spatialReference);return{count:aa,extent:T}}catch(ea){if(ea===w.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ea;}};G.executeQueryForIds=async function(K,P){return this.executeQueryForIdSet(K,P).then(Y=>Array.from(Y))};G.executeQueryForIdSet=async function(K,P){try{const Y=await this._executeQuery(K,{returnGeometry:!0,returnCentroid:!1,outSR:null},P),ea=Y.items,aa=new Set;await this._reschedule(()=>{for(const T of ea)aa.add(Y.featureAdapter.getObjectId(T))},P);return aa}catch(Y){if(Y===
w.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw Y;}};G.executeQueryForSnapping=async function(K,P){const {point:Y,distance:ea,returnEdge:aa,returnVertex:T}=K;if(!aa&&!T)return{candidates:[]};const R=await this._reschedule(()=>this._checkQuerySupport(K.query),P),W=!a.equals(Y.spatialReference,this.spatialReference);W&&await r.checkProjectionSupport(Y.spatialReference,this.spatialReference);var S="number"===typeof ea?ea:ea.x,Z="number"===typeof ea?ea:ea.y;S={xmin:Y.x-S,xmax:Y.x+S,ymin:Y.y-Z,ymax:Y.y+
Z,spatialReference:Y.spatialReference};S=W?r.project(S,this.spatialReference):S;if(!S)return{candidates:[]};Z=(await f.normalizeCentralMeridian(c.fromJSON(Y),null,{signal:P}))[0];const ca=(await f.normalizeCentralMeridian(c.fromJSON(S),null,{signal:P}))[0];if(null==Z||null==ca)return{candidates:[]};const qa=new g.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ca.toJSON())),P),R,this);await this._reschedule(()=>this._executeObjectIdsQuery(qa),P);await this._reschedule(()=>
this._executeTimeQuery(qa),P);await this._reschedule(()=>this._executeAttributesQuery(qa),P);P=Z.toJSON();P=W?r.project(P,this.spatialReference):P;return qa.createSnappingResponse({...K,point:P,distance:W?Math.max(S.xmax-S.xmin,S.ymax-S.ymin)/2:ea},Y.spatialReference)};G.executeQueryForLatestObservations=async function(K,P){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new B("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:K,timeInfo:this.timeInfo});try{const Y=
await this._executeQuery(K,{},P);await this._reschedule(()=>this._filterLatest(Y),P);return Y.createQueryResponse()}catch(Y){if(Y!==w.QUERY_ENGINE_EMPTY_RESULT)throw Y;return(new g.QueryEngineResult([],K,this)).createQueryResponse()}};G.executeQueryForSummaryStatistics=async function(K={},P,Y){const {field:ea,normalizationField:aa,valueExpression:T}=P;return(await this._getQueryEngineResultForStats(K,{field:ea,normalizationField:aa,valueExpression:T},Y)).createSummaryStatisticsResponse(P)};G.executeQueryForUniqueValues=
async function(K={},P,Y){const {field:ea,field2:aa,field3:T,valueExpression:R}=P;return(await this._getQueryEngineResultForStats(K,{field:ea,field2:aa,field3:T,valueExpression:R},Y)).createUniqueValuesResponse(P)};G.executeQueryForClassBreaks=async function(K={},P,Y){const {field:ea,normalizationField:aa,valueExpression:T}=P;return(await this._getQueryEngineResultForStats(K,{field:ea,normalizationField:aa,valueExpression:T},Y)).createClassBreaksResponse(P)};G.executeQueryForHistogram=async function(K=
{},P,Y){const {field:ea,normalizationField:aa,valueExpression:T}=P;return(await this._getQueryEngineResultForStats(K,{field:ea,normalizationField:aa,valueExpression:T},Y)).createHistogramResponse(P)};G.fetchRecomputedExtents=async function(K){const [P,Y]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),this.spatialReference,this.spatialReference),
null!=this._timeExtentPromise?this._timeExtentPromise:this._timeExtentPromise=x.getTimeExtent(this.timeInfo,this.featureStore)]);t.throwIfAborted(K);return{fullExtent:P,timeExtent:Y}};G._getBounds=async function(K,P,Y){const ea=k.set(k.create(),k.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(K,aa=>k.expandWithAABB(ea,aa));K={xmin:ea[0],ymin:ea[1],xmax:ea[3],ymax:ea[4],spatialReference:w.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(ea[2])&&isFinite(ea[5])&&(K.zmin=
ea[2],K.zmax=ea[5]);P=r.project(K,P,Y);P.spatialReference=w.cleanFromGeometryEngine(Y);0===P.xmax-P.xmin&&(Y=q.getMetersPerUnitForSR(P.spatialReference),P.xmin-=Y,P.xmax+=Y);0===P.ymax-P.ymin&&(Y=q.getMetersPerUnitForSR(P.spatialReference),P.ymin-=Y,P.ymax+=Y);this.hasZ&&null!=P.zmin&&null!=P.zmax&&0===P.zmax-P.zmin&&(Y=q.getMetersPerUnitForSR(P.spatialReference),P.zmin-=Y,P.zmax+=Y);return P};G._schedule=async function(K,P){return null!=this._frameTask?this._frameTask.schedule(K,P):K(A.noBudget)};
G._reschedule=async function(K,P){return null!=this._frameTask?this._frameTask.reschedule(K,P):K(A.noBudget)};G._getAllFeaturesQueryEngineResult=async function(K){return new g.QueryEngineResult(await this._getAllFeatures(),K,this)};G._getAllFeatures=async function(){if(null==this._allFeaturesPromise){const Y=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(ea=>Y.push(ea))})().then(()=>Y)}const K=this._allFeaturesPromise,P=await K;return K===this._allFeaturesPromise?P.slice():
this._getAllFeatures()};G._executeQuery=async function(K,P,Y){K=y.clone(K);K=await this._schedule(()=>w.normalizeQuery(K,this.definitionExpression,this.spatialReference),Y);K=await this._reschedule(()=>this._checkQuerySupport(K),Y);K={...K,...P};const ea=await this._reschedule(()=>this._executeSceneFilterQuery(K,Y),Y),aa=await this._reschedule(()=>this._executeGeometryQuery(K,ea,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(aa),Y);await this._reschedule(()=>this._executeObjectIdsQuery(aa),
Y);await this._reschedule(()=>this._executeTimeQuery(aa),Y);await this._reschedule(()=>this._executeAttributesQuery(aa),Y);return aa};G._executeSceneFilterQuery=async function(K,P){if(null==K.sceneFilter)return null;const {outSR:Y,returnGeometry:ea,returnCentroid:aa}=K;var T=this.featureStore.featureSpatialReference,R=K.sceneFilter.geometry;const W=null==T||a.equals(T,R.spatialReference)?R:r.project(R,T);if(!W)return null;T=ea||aa;T=a.isValid(Y)&&!a.equals(this.spatialReference,Y)&&T?async qa=>this._project(qa,
Y):qa=>qa;const S=this.featureAdapter;R=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(W)),P);if("disjoint"===K.sceneFilter.spatialRelationship){if(!R.length)return null;const qa=new Set;for(var Z of R)qa.add(S.getObjectId(Z));const ya=await this._reschedule(()=>this._getAllFeatures(),P);Z=await this._reschedule(async()=>{const xa=await u.getSpatialQueryOperator("esriSpatialRelDisjoint",W,this.geometryType,this.hasZ,this.hasM),Ca=await this._runSpatialFilter(ya,Da=>!qa.has(S.getObjectId(Da))||
xa(S.getGeometry(Da)),P);return new g.QueryEngineResult(Ca,K,this)},P);return T(Z)}if(!R.length)return new g.QueryEngineResult([],K,this);if(this._canExecuteSinglePass(W,K))return T(new g.QueryEngineResult(R,K,this));const ca=await u.getSpatialQueryOperator("esriSpatialRelContains",W,this.geometryType,this.hasZ,this.hasM);Z=await this._runSpatialFilter(R,qa=>ca(S.getGeometry(qa)),P);return T(new g.QueryEngineResult(Z,K,this))};G._executeGeometryQuery=async function(K,P,Y){if(null!=P&&0===P.items.length)return P;
K=null!=P?P.query:K;const {geometry:ea,outSR:aa,spatialRel:T,returnGeometry:R,returnCentroid:W}=K;var S=this.featureStore.featureSpatialReference;const Z=!ea||null==S||a.equals(S,ea.spatialReference)?ea:r.project(ea,S),ca=R||W,qa=a.isValid(aa)&&!a.equals(this.spatialReference,aa),ya=this._geometryQueryCache&&null==P?qa&&ca?JSON.stringify({originalFilterGeometry:ea,spatialRelationship:T,outSpatialReference:aa}):JSON.stringify({originalFilterGeometry:ea,spatialRelationship:T}):null;S=ya?this._geometryQueryCache.get(ya):
null;if(null!=S)return new g.QueryEngineResult(S,K,this);S=async V=>{qa&&ca&&await this._project(V,aa);ya&&this._geometryQueryCache.put(ya,V.items,V.items.length+1);return V};if(!Z)return S(null!=P?P:await this._getAllFeaturesQueryEngineResult(K));const xa=this.featureAdapter;let Ca=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ea)),Y);if("esriSpatialRelDisjoint"===T){if(!Ca.length)return S(null!=P?P:await this._getAllFeaturesQueryEngineResult(K));const V=new Set;for(var Da of Ca)V.add(xa.getObjectId(Da));
const ka=null!=P?P.items:await this._reschedule(()=>this._getAllFeatures(),Y);Da=await this._reschedule(async()=>{const da=await u.getSpatialQueryOperator(T,Z,this.geometryType,this.hasZ,this.hasM),na=await this._runSpatialFilter(ka,X=>!V.has(xa.getObjectId(X))||da(xa.getGeometry(X)),Y);return new g.QueryEngineResult(na,K,this)},Y);return S(Da)}if(null!=P){const V=new D.PositionHint;Ca=Ca.filter(ka=>0<=D.indexOf(P.items,ka,P.items.length,V))}if(!Ca.length)return S=new g.QueryEngineResult([],K,this),
ya&&this._geometryQueryCache.put(ya,S.items,1),S;if(this._canExecuteSinglePass(Z,K))return S(new g.QueryEngineResult(Ca,K,this));const N=await u.getSpatialQueryOperator(T,Z,this.geometryType,this.hasZ,this.hasM);Da=await this._runSpatialFilter(Ca,V=>N(xa.getGeometry(V)),Y);return S(new g.QueryEngineResult(Da,K,this))};G._executeAggregateIdsQuery=function(K){if(0!==K.items.length&&K.query.aggregateIds&&K.query.aggregateIds.length&&null!=this.aggregateAdapter){var P=new Set;for(const ea of K.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ea).forEach(aa=>
P.add(aa));var Y=this.featureAdapter.getObjectId;K.items=K.items.filter(ea=>P.has(Y(ea)))}};G._executeObjectIdsQuery=function(K){if(0!==K.items.length&&K.query.objectIds&&K.query.objectIds.length){var P=new Set(K.query.objectIds),Y=this.featureAdapter.getObjectId;K.items=K.items.filter(ea=>P.has(Y(ea)))}};G._executeTimeQuery=function(K){if(0!==K.items.length){var P=x.getTimeOperator(this.timeInfo,K.query.timeExtent,this.featureAdapter);null!=P&&(K.items=K.items.filter(P))}};G._executeAttributesQuery=
function(K){if(0!==K.items.length){var P=n.getWhereClause(K.query.where,this.fieldsIndex);if(P){if(!P.isStandardized)throw new TypeError("Where clause is not standardized");K.items=K.items.filter(Y=>P.testFeature(Y,this.featureAdapter))}}};G._runSpatialFilter=async function(K,P,Y){if(!P)return K;if(null==this._frameTask)return K.filter(R=>P(R));let ea=0;const aa=[],T=async R=>{for(;ea<K.length;){const W=K[ea++];P(W)&&(aa.push(W),R.madeProgress());R.done&&await this._reschedule(S=>T(S),Y)}};return this._reschedule(R=>
T(R),Y).then(()=>aa)};G._filterLatest=function(K){const {trackIdField:P,startTimeField:Y,endTimeField:ea}=this.timeInfo,aa=ea||Y,T=new Map,R=this.featureAdapter.getAttribute;for(const W of K.items){const S=R(W,P),Z=R(W,aa),ca=T.get(S);(!ca||Z>R(ca,aa))&&T.set(S,W)}K.items=Array.from(T.values())};G._canExecuteSinglePass=function(K,P){({spatialRel:P}=P);return u.canQueryWithRBush(K)&&("esriSpatialRelEnvelopeIntersects"===P||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===P||"esriSpatialRelContains"===
P||"esriSpatialRelWithin"===P))};G._project=async function(K,P){if(!P||a.equals(this.spatialReference,P))return K;const Y=this.featureAdapter;P=await r.projectMany(K.items.map(ea=>w.getGeometry(this.geometryType,this.hasZ,this.hasM,Y.getGeometry(ea))),this.spatialReference,P);K.items=P.map((ea,aa)=>Y.cloneWithGeometry(K.items[aa],d.convertFromGeometry(ea,this.hasZ,this.hasM)));return K};G._getQueryBBoxes=function(K){if(u.canQueryWithRBush(K)){if(c.isExtent(K))return[e.fromValues(K.xmin,K.ymin,K.xmax,
K.ymax)];if(c.isPolygon(K))return K.rings.map(P=>e.fromValues(Math.min(P[0][0],P[2][0]),Math.min(P[0][1],P[2][1]),Math.max(P[0][0],P[2][0]),Math.max(P[0][1],P[2][1])))}return[b.getBoundsXY(e.create(),K)]};G._searchFeatures=async function(K){const P=new Set;await Promise.all(K.map(Y=>this.featureStore.forEachInBounds(Y,ea=>P.add(ea))));K=Array.from(P.values());P.clear();return K};G._checkStatisticsSupport=async function(K,P){if(0>(K.distance??0)||null!=K.geometryPrecision||K.multipatchOption||K.pixelSize||
K.relationParam||K.text||K.outStatistics||K.groupByFieldsForStatistics||K.having||K.orderByFields)throw new B("feature-store:unsupported-query","Unsupported query options",{query:K});this._checkAttributesQuerySupport(K);return Promise.all([this._checkStatisticsParamsSupport(P,K),u.checkSpatialQuerySupport(K,this.geometryType,this.spatialReference),r.checkProjectionSupport(this.spatialReference,K.outSR)]).then(()=>K)};G._checkStatisticsParamsSupport=async function(K,P){var Y=[];K.valueExpression&&
({arcadeUtils:Y}=await z.loadArcade(),Y=Y.extractFieldNames(K.valueExpression));K.field&&Y.push(K.field);K.field2&&Y.push(K.field2);K.field3&&Y.push(K.field3);K.normalizationField&&Y.push(K.normalizationField);if(!Y.length&&!K.valueExpression)throw new B("feature-store:unsupported-query","field or valueExpression is required",{params:K});n.validateFields(this.fieldsIndex,Y,{errorMessage:"Cannot calculate statistics for missing fields",query:P});n.validateFieldTypes(this.fieldsIndex,Y,{expressionName:"statistics",
query:P})};G._checkQuerySupport=async function(K){if(0>(K.distance??0)||null!=K.geometryPrecision||K.multipatchOption||K.pixelSize||K.relationParam||K.text)throw new B("feature-store:unsupported-query","Unsupported query options",{query:K});this._checkAttributesQuerySupport(K);this._checkStatisticsQuerySupport(K);return Promise.all([u.checkSpatialQuerySupport(K,this.geometryType,this.spatialReference),r.checkProjectionSupport(this.spatialReference,K.outSR)]).then(()=>K)};G._checkAttributesQuerySupport=
function(K){const {outFields:P,orderByFields:Y,returnDistinctValues:ea,outStatistics:aa}=K,T=aa?aa.map(R=>R.outStatisticFieldName&&R.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(Y&&0<Y.length){const R=Y.map(W=>{const S=W.toLowerCase();return S.includes(" asc")?S.split(" asc")[0]:S.includes(" desc")?S.split(" desc")[0]:W}).filter(W=>!T.includes(W));n.validateFields(this.fieldsIndex,R,{expressionName:"orderByFields",query:K})}if(P&&0<P.length)n.validateFields(this.fieldsIndex,P,{expressionName:"outFields",
query:K});else if(ea)throw new B("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:K});n.validateWhere(this.fieldsIndex,K.where,K)};G._checkStatisticsQuerySupport=function(K){const {outStatistics:P,groupByFieldsForStatistics:Y,having:ea}=K;var aa=Y&&Y.length,T=P&&P.length;if(ea){if(!aa||!T)throw new B("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:K});n.validateHaving(this.fieldsIndex,
ea,P,K)}if(T&&H(P)){T=P.map(R=>R.onStatisticField).filter(Boolean);n.validateFields(this.fieldsIndex,T,{expressionName:"onStatisticFields",query:K});aa&&n.validateFields(this.fieldsIndex,Y,{expressionName:"groupByFieldsForStatistics",query:K});aa=new Set([...n.validNumericTypesKebabDict.jsonValues,...n.validDateTypesKebabDict.jsonValues]);T=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...n.validNumericTypesKebabDict.apiValues,...n.validDateTypesKebabDict.apiValues]);for(const R of P){const {onStatisticField:W,
statisticType:S}=R;if(("percentile_disc"===S||"percentile_cont"===S)&&"statisticParameters"in R){const {statisticParameters:Z}=R;if(!Z)throw new B("feature-store:unsupported-query","statisticParameters should be set for percentile type",{definition:R,query:K});}else if("count"!==S&&"min"!==S&&"max"!==S&&W&&n.hasInvalidFieldType(W,this.fieldsIndex,aa))throw new B("feature-store:unsupported-query",`outStatistics with '${S}' statistic type, only supports ${T} field types`,{definition:R,query:K});}}};
G._getQueryEngineResultForStats=async function(K,P,Y){K=y.clone(K);try{K=await this._schedule(()=>w.normalizeQuery(K,this.definitionExpression,this.spatialReference),Y);K=await this._reschedule(()=>this._checkStatisticsSupport(K,P),Y);const ea=await this._reschedule(()=>this._executeSceneFilterQuery(K,Y),Y),aa=await this._reschedule(()=>this._executeGeometryQuery(K,ea,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(aa),Y);await this._reschedule(()=>this._executeObjectIdsQuery(aa),
Y);await this._reschedule(()=>this._executeTimeQuery(aa),Y);await this._reschedule(()=>this._executeAttributesQuery(aa),Y);return aa}catch(ea){if(ea!==w.QUERY_ENGINE_EMPTY_RESULT)throw ea;return new g.QueryEngineResult([],K,this)}};h._createClass(I,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return I}();l.Feature=E;l.QueryEngine=L;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"./PooledArray"],function(l,h,D){l.RemoveMode=void 0;(function(C){C[C.ALL=0]="ALL";C[C.SOME=1]="SOME"})(l.RemoveMode||(l.RemoveMode={}));let B=function(){function C(q,k,e){this.name=q;this._storage=k;this.id=`${v++}:`;this.maxSize=this.size=0;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);e&&(this._storage.registerRemoveFunc(this.id,e),this._removeFunc=!0)}var t=C.prototype;t.destroy=function(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);
this._storage.deregister(this);this._storage=null};t.resetHitRate=function(){this._hit=this._miss=0};t.put=function(q,k,e,b=0){this._storage.put(this,q,k,e,b)};t.get=function(q){q=this._storage.get(this,q);void 0===q?++this._miss:++this._hit;return q};t.pop=function(q){q=this._storage.pop(this,q);void 0===q?++this._miss:++this._hit;return q};t.updateSize=function(q,k,e){this._storage.updateSize(this,q,k,e)};t.clear=function(){this._storage.clear(this)};t.clearAll=function(){this._storage.clearAll()};
t.resetStats=function(){this._storage.resetStats()};h._createClass(C,[{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},{key:"performanceInfo",get:function(){return this._storage.performanceInfo}}]);return C}(),y=function(){function C(q=10485760){this._maxSize=q;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new D;this._users=new D}var t=C.prototype;t.destroy=function(){this.clearAll();this._removeFuncs.clear();
this._users.clear();this._db=null};t.register=function(q){this._users.push(q)};t.deregister=function(q){this._users.removeUnordered(q)};t.registerRemoveFunc=function(q,k){this._removeFuncs.push([q,k])};t.deregisterRemoveFunc=function(q){this._removeFuncs.filterInPlace(k=>k[0]!==q)};t.put=function(q,k,e,b,c){k=q.id+k;const f=this._db.get(k);f&&(this._size-=f.size,q.size-=f.size,this._db.delete(k),f.entry!==e&&this._notifyRemove(k,f.entry,l.RemoveMode.ALL));b>this._maxSize?this._notifyRemove(k,e,l.RemoveMode.ALL):
void 0===e?console.warn("Refusing to cache undefined entry "):!b||0>b?console.warn("Refusing to cache entry with invalid size "+b):(c=1+Math.max(c,-3)- -3,this._db.set(k,{entry:e,size:b,lifetime:c,lives:c}),this._size+=b,q.size+=b,this._checkSizeLimits())};t.updateSize=function(q,k,e,b){k=q.id+k;const c=this._db.get(k);if(c&&c.entry===e){this._size-=c.size;for(q.size-=c.size;b>this._maxSize;)if(b=this._notifyRemove(k,e,l.RemoveMode.SOME),!(null!=b&&0<b)){this._db.delete(k);return}c.size=b;this._size+=
b;q.size+=b;this._checkSizeLimits()}};t.pop=function(q,k){k=q.id+k;const e=this._db.get(k);if(e)return this._size-=e.size,q.size-=e.size,this._db.delete(k),++this._hit,e.entry;++this._miss};t.get=function(q,k){k=q.id+k;q=this._db.get(k);if(void 0===q)++this._miss;else return this._db.delete(k),q.lives=q.lifetime,this._db.set(k,q),++this._hit,q.entry};t.resetStats=function(){this._hit=this._miss=0;this._users.forAll(q=>q.resetHitRate())};t.clear=function(q){const k=q.id;this._db.forEach((e,b)=>{b.startsWith(k)&&
(this._size-=e.size,this._db.delete(b),this._notifyRemove(b,e.entry,l.RemoveMode.ALL))});q.size=0};t.clearAll=function(){this._db.forEach((q,k)=>this._notifyRemove(k,q.entry,l.RemoveMode.ALL));this._users.forEach(q=>q.size=0);this._size=0;this._db.clear()};t._getHitRate=function(){return this._hit/(this._hit+this._miss)};t._notifyRemove=function(q,k,e){let b;this._removeFuncs.some(c=>q.startsWith(c[0])?(c=c[1](k,e),"number"===typeof c&&(b=c),!0):!1);return b};t._checkSizeLimits=function(){if(this._size>
this._maxSize)for(const [q,k]of this._db)if(this._purgeItem(q,k),this._size<=.9*this.maxSize)return;this._users.forEach(q=>{if(0<q.maxSize&&q.size>q.maxSize)for(const [k,e]of this._db)if(k.startsWith(q.id)&&(this._purgeItem(k,e,q),q.size<=.9*q.maxSize))break})};t._purgeItem=function(q,k,e=this._users.find(b=>q.startsWith(b.id))){this._db.delete(q);if(1>=k.lives){this._size-=k.size;e&&(e.size-=k.size);const b=this._notifyRemove(q,k.entry,l.RemoveMode.SOME);null!=b&&0<b&&(this._size+=b,e&&(e.size+=
b),k.lives=k.lifetime,k.size=b,this._db.set(q,k))}else--k.lives,this._db.set(q,k)};h._createClass(C,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(q){this._maxSize=Math.max(q,0);this._checkSizeLimits()}},{key:"performanceInfo",get:function(){const q={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},k={},e=[];this._db.forEach((f,
a)=>{const d=f.lifetime;e[d]=(e[d]||0)+f.size;this._users.forAll(n=>{const {id:r,name:p}=n;a.startsWith(r)&&(k[p]=(k[p]||0)+f.size)})});const b={};this._users.forAll(f=>{const a=f.name;"hitRate"in f&&"number"===typeof f.hitRate&&!isNaN(f.hitRate)&&0<f.hitRate?(k[a]=k[a]||0,b[a]=Math.round(100*f.hitRate)+"%"):b[a]="0%"});var c=Object.keys(k);c.sort((f,a)=>k[a]-k[f]);c.forEach(f=>q[f]=Math.round(k[f]/2**20)+"MB / "+b[f]);for(c=e.length-1;0<=c;--c){const f=e[c];f&&(q["Priority "+(c+-3-1)]=Math.round(f/
this._size*100)+"%")}return q}}]);return C}(),v=0;l.MIN_PRIORITY=-3;l.MemCache=B;l.MemCacheStorage=y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(l,h,D,B,y,v,C,t,q,k,e){function b(p){const g=
[];let u=0,x=0;for(let w=0;w<p.length;w++){const m=p[w];let z=null;for(let A=0;A<m.length;A++)z=m[A],g.push(z),0===A?x=u=z[0]:(u=Math.min(u,z[0]),x=Math.max(x,z[0]));z&&g.push([(u+x)/2,0])}return g}function c(p,g){if(!(p instanceof v||p instanceof y))throw r.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new D("straightLineDensify: the input geometry is neither polyline nor polygon");var u=C.getGeometryParts(p);const x=[];for(const m of u){u=[];x.push(u);u.push([m[0][0],
m[0][1]]);for(let z=0;z<m.length-1;z++){const A=m[z][0],H=m[z][1],E=m[z+1][0],F=m[z+1][1];var w=Math.sqrt((E-A)*(E-A)+(F-H)*(F-H));const J=(F-H)/w,L=(E-A)/w,I=w/g;if(1<I){for(let G=1;G<=I-1;G++){const K=G*g;u.push([L*K+A,J*K+H])}w=(w+Math.floor(I-1)*g)/2;u.push([L*w+A,J*w+H])}u.push([E,F])}}return"polygon"===p.type?new y({rings:x,spatialReference:p.spatialReference}):new v({paths:x,spatialReference:p.spatialReference})}function f(p,g,u){g&&(p=c(p,1E6),p=q.webMercatorToGeographic(p,!0));u&&(p=C.updatePolyGeometry(p,
u));return p}function a(p,g,u){if(Array.isArray(p)){var x=p[0];x>g?(u=C.offsetMagnitude(x,g),p[0]=x+-2*u*g):x<u&&(g=C.offsetMagnitude(x,u),p[0]=x+-2*g*u)}else x=p.x,x>g?(u=C.offsetMagnitude(x,g),p=p.clone().offset(-2*u*g,0)):x<u&&(g=C.offsetMagnitude(x,u),p=p.clone().offset(-2*g*u,0));return p}function d(p,g){let u=-1;for(let x=0;x<g.cutIndexes.length;x++){const w=g.cutIndexes[x],m=g.geometries[x],z=C.getGeometryParts(m);for(let A=0;A<z.length;A++){const H=z[A];H.some(E=>{if(180>E[0])return!0;E=0;
for(var F=0;F<H.length;F++){var J=H[F][0];E=J>E?J:E}E=Number(E.toFixed(9));E=-360*C.offsetMagnitude(E,180);for(F=0;F<H.length;F++)J=m.getPoint(A,F),m.setPoint(A,F,J.clone().offset(E,0));return!0})}if(w===u)if("polygon"===p[0].type)for(const A of C.getGeometryParts(m))p[w]=p[w].addRing(A);else{if("polyline"===p[0].type)for(const A of C.getGeometryParts(m))p[w]=p[w].addPath(A)}else u=w,p[w]=m}return p}async function n(p,g,u){if(!Array.isArray(p))return n([p],g);g&&"string"!==typeof g&&r.warn("normalizeCentralMeridian()",
"The url object is deprecated, use the url string instead");var x="string"===typeof g?g:g?.url??h.geometryServiceUrl;let w,m,z;let A=0;var H=[];g=[];for(var E of p)if(null==E)g.push(E);else{if(!F){var F=E.spatialReference;var J=t.getInfo(F);var L=(w=F.isWebMercator)?102100:4326;m=C.cutParams[L].maxX;z=C.cutParams[L].minX;var I=C.cutParams[L].plus180Line;L=C.cutParams[L].minus180Line}if(J)if("mesh"===E.type)g.push(E);else if("point"===E.type)g.push(a(E.clone(),m,z));else if("multipoint"===E.type){var G=
E.clone();G.points=G.points.map(K=>a(K,m,z));g.push(G)}else if("extent"===E.type)G=E.clone()._normalize(!1,!1,J),g.push(G.rings?new y(G):G);else if(E.extent){G=E.extent;const K=2*C.offsetMagnitude(G.xmin,z)*m;let P=0===K?E.clone():C.updatePolyGeometry(E.clone(),K);G.offset(K,0);G.intersects(I)&&G.xmax!==m?(A=G.xmax>A?G.xmax:A,P=f(P,w),H.push(P),g.push("cut")):G.intersects(L)&&G.xmin!==z?(A=2*G.xmax*m>A?2*G.xmax*m:A,P=f(P,w,360),H.push(P),g.push("cut")):g.push(P)}else g.push(E.clone());else g.push(E)}F=
C.offsetMagnitude(A,m);J=-90;I=F;for(E=new v;0<F;)L=-180+360*F,E.addPath([[L,J],[L,-1*J]]),J*=-1,F--;if(0<H.length&&0<I){F=await k.cut(x,H,E,u);F=d(H,F);J=[];H=[];for(I=0;I<g.length;I++)E=g[I],"cut"!==E?H.push(E):(E=F.shift(),L=p[I],null!=L&&"polygon"===L.type&&L.rings&&1<L.rings.length&&E.rings.length>=L.rings.length?(J.push(E),H.push("simplify")):H.push(w?q.geographicToWebMercator(E):E));if(!J.length)return H;g=await e.simplify(x,J,u);p=[];for(u=0;u<H.length;u++)x=H[u],"simplify"!==x?p.push(x):
p.push(w?q.geographicToWebMercator(g.shift()):g.shift());return p}p=[];for(u=0;u<g.length;u++)x=g[u],"cut"!==x?p.push(x):(x=H.shift(),p.push(!0===w?q.geographicToWebMercator(x):x));return p}const r=B.getLogger("esri.geometry.support.normalizeUtils");l.getDenormalizedExtent=function(p){if(!p)return null;const g=p.extent;if(!g)return null;var u=p.spatialReference&&t.getInfo(p.spatialReference);if(!u)return g;const [x,w]=u.valid;({width:u}=g);let {xmin:m,xmax:z}=g;[m,z]=[z,m];if("extent"===p.type||0===
u||u<=w||u>2*w||m<x||z>w)return g;let A;switch(p.type){case "polygon":if(1<p.rings.length)A=b(p.rings);else return g;break;case "polyline":if(1<p.paths.length)A=b(p.paths);else return g;break;case "multipoint":A=p.points}p=g.clone();for(let H=0;H<A.length;H++){let E=A[H][0];0>E?(E+=w,z=Math.max(E,z)):(E-=w,m=Math.min(E,m))}p.xmin=m;p.xmax=z;return p.width<u?(p.xmin-=w,p.xmax-=w,p):g};l.normalizeCentralMeridian=n;l.normalizeMapX=function(p,g){if(g=t.getInfo(g)){const [u,x]=g.valid;g=x-u;if(p<u)for(;p<
u;)p+=g;if(p>x)for(;p>x;)p-=g}return p};l.straightLineDensify=c;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(l,h,D,B){function y(v){return B.isPolygon(v)?v.rings:v.paths}h={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new h({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],
spatialReference:D.WebMercator}),minus180Line:new h({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:D.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new h({paths:[[[180,-180],[180,180]]],spatialReference:D.WGS84}),minus180Line:new h({paths:[[[-180,-180],[-180,180]]],spatialReference:D.WGS84})}};l.cutParams=h;l.getGeometryParts=y;l.offsetMagnitude=function(v,C){return Math.ceil((v-C)/(2*C))};l.updatePolyGeometry=function(v,
C){const t=y(v);for(const q of t)for(const k of q)k[0]+=C;return v};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(l,h,D,B,y){l.cut=async function(v,C,t,q){v=y.parseUrl(v);const k=C[0].spatialReference;C={...q,query:{...v.query,f:"json",sr:JSON.stringify(k),target:JSON.stringify({geometryType:B.getJsonType(C[0]),geometries:C}),cutter:JSON.stringify(t)}};
C=await D(v.path+"/cut",C);const {cutIndexes:e,geometries:b=[]}=C.data;return{cutIndexes:e,geometries:b.map(c=>{c=B.fromJSON(c);c.spatialReference=k;return c})}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(l,h,D,B,y,v){function C(t,q,k){const e={};for(const c in t)if("declaredClass"!==c){var b=t[c];if(null!=b&&"function"!==typeof b)if(Array.isArray(b)){e[c]=
[];for(let f=0;f<b.length;f++)e[c][f]=C(b[f])}else"object"===typeof b?b.toJSON?(b=b.toJSON(k&&k[c]),e[c]=q?b:JSON.stringify(b)):e[c]=q?b:JSON.stringify(b):e[c]=b}return e}l.asValidOptions=function(t,q){return q?{...q,query:{...(t??{}),...q.query}}:{query:t}};l.encode=C;l.getToken=function(t,q){return t?v.supportsApiKey(t)&&(q||h.apiKey)?q||h.apiKey:D.id?.findCredential(t)?.token:null};l.parseUrl=function(t){return"string"===typeof t?y.urlToObject(t):B.clone(t)};Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports","../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(l,h,D,B,y){l.simplify=async function(v,C,t){const q="string"===typeof v?D.urlToObject(v):v;v=C[0].spatialReference;const k=B.getJsonType(C[0]);C={...t,query:{...q.query,f:"json",sr:v.wkid??JSON.stringify(v),geometries:JSON.stringify(y.encodeGeometries(C))}};({data:C}=await h(q.path+"/simplify",C));return y.decodeGeometries(C.geometries,
k,v)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(l,h){l.decodeGeometries=function(D,B,y){const v=h.getGeometryType(B);return D.map(C=>{C=v.fromJSON(C);C.spatialReference=y;return C})};l.encodeGeometries=function(D){return{geometryType:h.getJsonType(D[0]),geometries:D.map(B=>B.toJSON())}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/jsonMap","../../../core/sql/WhereClauseCache"],function(l,h,D,B){function y(n,r,p={}){r=v(n,r);if(!r)throw new h("feature-store:unsupported-query","invalid SQL expression",{expression:n});const g=p.expressionName||"expression";if(p.validateStandardized&&!r.isStandardized)throw new h("feature-store:unsupported-query",`${g} is not standard`,{expression:n});if(p.validateAggregate&&!r.isAggregate)throw new h("feature-store:unsupported-query",`${g} does not contain a valid aggregate function`,
{expression:n});return r.fieldNames}function v(n,r){return n?b.get(n,r):null}function C(n,r,p={}){p.errorMessage||(p.errorMessage=p.expressionName?`${p.expressionName} contains invalid fields`:"Fields are invalid");q(n,r,(g,u)=>u.has(g),p)}function t(n,r,p={}){p.errorMessage||(p.errorMessage=p.expressionName?`${p.expressionName} only supports ${d} field types`:`Only ${d} field types are supported`);q(n,r,(g,u)=>!e(g,u),p)}function q(n,r,p,g={}){const u=g.verifyExpression??!0,x=[];for(const w of r)if(r=
p(w,n),"*"!==w&&!r)if(u){r=k(w);try{const m=y(r,n,{validateStandardized:!0});q(n,m,p,g)}catch(m){r=m?.details;if(r?.expression)throw m;r?.invalidFields?x.push(...r.invalidFields):x.push(w)}}else x.push(w);if(x.length)throw new h("feature-store:unsupported-query",g.errorMessage,{invalidFields:x,query:g.query});}function k(n){return n.split(" as ")[0]}function e(n,r,p=a){return(n=r.get(n))?!p.has(n.type):!1}const b=new B.WhereClauseCache(50,500);B=new D.JSONMap({esriFieldTypeString:"string"});const c=
new D.JSONMap({esriFieldTypeOID:"oid",esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long"}),f=new D.JSONMap({esriFieldTypeDate:"date"});D=new D.JSONMap({esriFieldTypeGUID:"guid",esriFieldTypeGlobalId:"global-id"});const a=new Set([...c.jsonValues,...f.jsonValues,...B.jsonValues,...D.jsonValues]),d=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...c.apiValues,...f.apiValues,...B.apiValues,
...D.apiValues]);l.getAliasFromFieldName=function(n){return n.split(" as ")[1]};l.getExpressionFromFieldName=k;l.getWhereClause=v;l.hasInvalidFieldType=e;l.validDateTypesKebabDict=f;l.validGuidTypesKebabDict=D;l.validNumericTypesKebabDict=c;l.validStringTypesKebabDict=B;l.validateFieldTypes=t;l.validateFields=C;l.validateHaving=function(n,r,p,g){if(!r)return!0;const u=y(r,n,{validateAggregate:!0,expressionName:"having"});C(n,u,{expressionName:"having",query:g});t(n,u,{expressionName:"having",query:g});
if(!b.get(r,n)?.getExpressions().every(x=>{const {aggregateType:w,field:m}=x,z=n.get(m)?.name;return p.some(A=>{const {onStatisticField:H,statisticType:E}=A;return n.get(H)?.name===z&&E.toLowerCase().trim()===w})}))throw new h("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:r});return!0};l.validateWhere=function(n,r,p){if(!r)return!0;r=y(r,n,{validateStandardized:!0,expressionName:"where clause"});C(n,r,{expressionName:"where clause",query:p});
t(n,r,{expressionName:"where clause",query:p});return!0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../LRUCache","./WhereClause"],function(l,h,D,B){let y=function(){function v(C,t){this._cache=new D.LRUCache(C);this._invalidCache=new D.LRUCache(t)}v.prototype.get=function(C,t){const q=`${t.uid}:${C}`,k=this._cache.get(q);if(k)return k;if(void 0!==this._invalidCache.get(q))return null;
try{const e=B.WhereClause.create(C,t);this._cache.put(q,e);return e}catch{return this._invalidCache.put(q,null),null}};return h._createClass(v)}();l.WhereClauseCache=y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./MemCache"],function(l,h,D){let B=function(){function y(C,t){this._storage=new D.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=C;this._storage.register(this);
t&&this._storage.registerRemoveFunc("",t)}var v=y.prototype;v.destroy=function(){this._storage.deregister(this);this._storage.destroy()};v.put=function(C,t,q=1){this._storage.put(this,C,t,q,1)};v.pop=function(C){return this._storage.pop(this,C)};v.get=function(C){return this._storage.get(this,C)};v.clear=function(){this._storage.clearAll()};v.resetHitRate=function(){};h._createClass(y,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(C){this._storage.maxSize=C}}]);return y}();
l.LRUCache=B;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(l,h,D,B,y,v){function C(L,I){L+="";return L.length>=I?L:Array(I-L.length+1).join("0")+L}function t(L,I,G="0",K="0",P="0",Y="0",ea="",aa="0",T="0"){return"+"===ea||"-"===ea?(L=`${C(parseInt(L,10),4)}-${C(parseInt(I,10),2)}-${C(parseInt(G,10),2)}`,
I="",10>parseFloat(Y)&&(I="0"),K=`${C(parseInt(K,10),2)}:${C(parseInt(P,10),2)}:${I+parseFloat(Y).toString()}`,ea=`${ea}${C(parseInt(aa,10),2)}:${C(parseInt(T,10),2)}`,new Date(L+"T"+K+ea)):new Date(parseInt(L,10),parseInt(I,10)-1,parseInt(G,10),parseInt(K,10),parseInt(P,10),parseFloat(Y))}function q(L){let I=x.exec(L);if(null!==I){const [,G,K,P,Y,ea,aa]=I;return t(G,K,P,Y,ea,aa)}I=w.exec(L);if(null!==I){const [,G,K,P,Y,ea,aa,T,R,W]=I;return t(G,K,P,Y,ea,aa,T,R,W)}I=m.exec(L);if(null!==I){const [,
G,K,P,Y,ea,aa,T,R]=I;return t(G,K,P,Y,ea,"0",aa,T,R)}I=z.exec(L);if(null!==I){const [,G,K,P,Y,ea]=I;return t(G,K,P,Y,ea)}I=u.exec(L);if(null!==I){const [,G,K,P]=I;return t(G,K,P)}throw Error("SQL Invalid Timestamp");}function k(L){const I=u.exec(L);if(null===I)try{return q(L)}catch{throw Error("SQL Invalid Date");}const [,G,K,P]=I;return new Date(parseInt(G,10),parseInt(K,10)-1,parseInt(P,10))}function e(L){return Array.isArray(L)?L:[L]}function b(L){return null!==L?!0!==L:null}function c(L,I){return null!=
L&&null!=I?!0===L&&!0===I:!1===L||!1===I?!1:null}function f(L,I){return null!=L&&null!=I?!0===L||!0===I:!0===L||!0===I?!0:null}function a(L,I){if(null==L)return null;let G=!1;for(const K of I)if(null==K)G=null;else if(L===K){G=!0;break}return G}function d(L,I,G){if(null==L)return null;let K="",P=F.Normal;for(let Y=0;Y<I.length;Y++){const ea=I.charAt(Y);switch(P){case F.Normal:ea===G?P=F.Escaped:K="-[]/{}()*+?.\\^$|".includes(ea)?K+("\\"+ea):"%"===ea?K+".*":"_"===ea?K+".":K+ea;break;case F.Escaped:K=
"-[]/{}()*+?.\\^$|".includes(ea)?K+("\\"+ea):K+ea,P=F.Normal}}return(new RegExp("^"+K+"$","m")).test(L)}function n(L){return L instanceof Date?L.valueOf():L}function r(L,I,G){if(null==I||null==G)return null;I=n(I);G=n(G);switch(L){case "\x3c\x3e":return I!==G;case "\x3d":return I===G;case "\x3e":return I>G;case "\x3c":return I<G;case "\x3e\x3d":return I>=G;case "\x3c\x3d":return I<=G}}function p(L,I,G){if("||"===L)return y.evaluateFunction("concat",[I,G]);if(I instanceof y.SqlInterval)if(G instanceof
Date)switch(L){case "+":return new Date(I.valueInMilliseconds()+G.getTime());case "-":return I.valueInMilliseconds()-G.getTime();case "*":return I.valueInMilliseconds()*G.getTime();case "/":return I.valueInMilliseconds()/G.getTime()}else if(G instanceof y.SqlInterval)switch(L){case "+":return y.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()+G.valueInMilliseconds());case "-":return y.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()-G.valueInMilliseconds());case "*":return I.valueInMilliseconds()*
G.valueInMilliseconds();case "/":return I.valueInMilliseconds()/G.valueInMilliseconds()}else I=I.valueInMilliseconds();else if(G instanceof y.SqlInterval)if(I instanceof Date)switch(L){case "+":return new Date(G.valueInMilliseconds()+I.getTime());case "-":return new Date(I.getTime()-G.valueInMilliseconds());case "*":return I.getTime()*G.valueInMilliseconds();case "/":return I.getTime()/G.valueInMilliseconds()}else G=G.valueInMilliseconds();else if(I instanceof Date&&"number"===typeof G)switch(G*=
864E5,I=I.getTime(),L){case "+":return new Date(I+G);case "-":return new Date(I-G);case "*":return new Date(I*G);case "/":return new Date(I/G)}else if(G instanceof Date&&"number"===typeof I)switch(I*=864E5,G=G.getTime(),L){case "+":return new Date(I+G);case "-":return new Date(I-G);case "*":return new Date(I*G);case "/":return new Date(I/G)}switch(L){case "+":return I+G;case "-":return I-G;case "*":return I*G;case "/":return I/G}}function g(L,I,G,K){L=K.getAttribute(L,I);return null!=L&&1===G[I]?
new Date(L):L}const u=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,x=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,m=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,A=new Set(["current_timestamp","current_date","current_time"]);let H=function(){function L(){}L.makeBool=function(I){return!0===I};L.featureValue=
function(I,G,K,P){return g(I,G,K,P)};L.equalsNull=function(I){return null===I};L.applyLike=function(I,G,K){return d(I,G,K)};L.ensureArray=function(I){return e(I)};L.applyIn=function(I,G){return a(I,G)};L.currentDate=function(){const I=new Date;I.setHours(0,0,0,0);return I};L.makeSqlInterval=function(I,G,K){return y.SqlInterval.createFromValueAndQualifer(I,G,K)};L.convertInterval=function(I){return I instanceof y.SqlInterval?I.valueInMilliseconds():I};L.currentTimestamp=function(){return new Date};
L.compare=function(I,G,K){return r(I,G,K)};L.calculate=function(I,G,K){return p(I,G,K)};L.makeComparable=function(I){return n(I)};L.evaluateFunction=function(I,G){return y.evaluateFunction(I,G)};L.lookup=function(I,G){I=G[I];return void 0===I?null:I};L.between=function(I,G){return null==I||null==G[0]||null==G[1]?null:I>=G[0]&&I<=G[1]};L.notbetween=function(I,G){return null==I||null==G[0]||null==G[1]?null:I<G[0]||I>G[1]};L.ternaryNot=function(I){return b(I)};L.ternaryAnd=function(I,G){return c(I,G)};
L.ternaryOr=function(I,G){return f(I,G)};return h._createClass(L)}(),E=function(){function L(G,K){this.fieldsIndex=K;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=v.WhereGrammar.parse(G);const {isStandardized:P,isAggregate:Y,referencedFieldNames:ea}=this._extractExpressionInfo(K);this._referencedFieldNames=ea;this.isStandardized=P;this.isAggregate=Y}L.create=function(G,K){return new L(G,K)};var I=L.prototype;I.testSet=function(G,K=J){const P={};for(const Y of this.fieldNames)P[Y]=
G.map(ea=>K.getAttribute(ea,Y));return!!this._evaluateNode(this.parseTree,{attributes:P},J)};I.calculateValue=function(G,K=J){G=this._evaluateNode(this.parseTree,G,K);return G instanceof y.SqlInterval?G.valueInMilliseconds()/864E5:G};I.calculateValueCompiled=function(G,K=J){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(G,this.parameters,K,this._datefields);if(D("esri-csp-restrictions"))return this.calculateValue(G,K);this._compileMe();return this.parseTree._compiledVersion(G,
this.parameters,K,this._datefields)};I.testFeature=function(G,K=J){return!!this._evaluateNode(this.parseTree,G,K)};I.testFeatureCompiled=function(G,K=J){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(G,this.parameters,K,this._datefields);if(D("esri-csp-restrictions"))return this.testFeature(G,K);this._compileMe();return!!this.parseTree._compiledVersion(G,this.parameters,K,this._datefields)};I.getFunctions=function(){const G=new Set;this._visitAll(this.parseTree,K=>
{"function"===K.type&&G.add(K.name.toLowerCase())});return Array.from(G)};I.getExpressions=function(){const G=new Map;this._visitAll(this.parseTree,K=>{if("function"===K.type){const P=K.name.toLowerCase();K=K.args.value[0];if("column-reference"===K.type){K=K.column;const Y=`${P}-${K}`;G.has(Y)||G.set(Y,{aggregateType:P,field:K})}}});return[...G.values()]};I.getVariables=function(){const G=new Set;this._visitAll(this.parseTree,K=>{"parameter"===K.type&&G.add(K.value.toLowerCase())});return Array.from(G)};
I._compileMe=function(){const G="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",G)).bind(H)};I._extractExpressionInfo=function(G){const K=[],P=new Set;let Y=!0,ea=!0;this._visitAll(this.parseTree,aa=>{switch(aa.type){case "column-reference":const T=G?.get(aa.column);let R,W;T?R=W=T.name??"":(W=aa.column,R=W.toLowerCase());T&&T.name&&("date"===T.type||"esriFieldTypeDate"===
T.type)&&(this._datefields[T.name]=1);P.has(R)||(P.add(R),K.push(W));aa.column=W;break;case "function":const {name:S,args:Z}=aa;aa=Z.value.length;Y&&(Y=y.isStandardized(S,aa));ea&&(ea=B.isAggregate(S,aa))}});return{referencedFieldNames:Array.from(K),isStandardized:Y,isAggregate:ea}};I._visitAll=function(G,K){if(null!=G)switch(K(G),G.type){case "when-clause":this._visitAll(G.operand,K);this._visitAll(G.value,K);break;case "case-expression":for(const P of G.clauses)this._visitAll(P,K);"simple"===G.format&&
this._visitAll(G.operand,K);null!==G.else&&this._visitAll(G.else,K);break;case "expression-list":for(const P of G.value)this._visitAll(P,K);break;case "unary-expression":this._visitAll(G.expr,K);break;case "binary-expression":this._visitAll(G.left,K);this._visitAll(G.right,K);break;case "function":this._visitAll(G.args,K)}};I.evaluateNodeToJavaScript=function(G){switch(G.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(G.value)+", "+JSON.stringify(G.qualifier)+","+
JSON.stringify(G.op)+")";case "case-expression":var K="";if("simple"===G.format){var P="this.makeComparable("+this.evaluateNodeToJavaScript(G.operand)+")";K="( ";for(let Y=0;Y<G.clauses.length;Y++)K+=" ("+P+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(G.clauses[Y].operand)+")) ? ("+this.evaluateNodeToJavaScript(G.clauses[Y].value)+") : "}else for(K="( ",P=0;P<G.clauses.length;P++)K+=" this.makeBool("+this.evaluateNodeToJavaScript(G.clauses[P].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(G.clauses[P].value)+") : ";K=null!==G.else?K+this.evaluateNodeToJavaScript(G.else):K+"null";return K+" )";case "parameter":return"this.lookup("+JSON.stringify(G.value.toLowerCase())+",lookups)";case "expression-list":K="[";for(P of G.value)"["!==K&&(K+=","),K+=this.evaluateNodeToJavaScript(P);return K+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(G.expr)+")";case "binary-expression":switch(G.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+" )";case "IS":if("null"!==G.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(G.left)+")";case "ISNOT":if("null"!==G.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(G.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(G.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(G.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(G.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(G.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+","+JSON.stringify(G.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+","+JSON.stringify(G.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(G.operator)+","+this.evaluateNodeToJavaScript(G.left)+","+
this.evaluateNodeToJavaScript(G.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(G.operator)+","+this.evaluateNodeToJavaScript(G.left)+","+this.evaluateNodeToJavaScript(G.right)+")"}throw Error("Not Supported Operator "+G.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(G.value);case "date":return"(new Date("+k(G.value).getTime().toString()+"))";case "timestamp":return"(new Date("+q(G.value).getTime().toString()+
"))";case "current-time":return"date"===G.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(G.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(G.name)+","+this.evaluateNodeToJavaScript(G.args)+")"}throw Error("Unsupported sql syntax "+G.type);};I._evaluateNode=function(G,K,P){switch(G.type){case "interval":return K=this._evaluateNode(G.value,K,P),y.SqlInterval.createFromValueAndQualifer(K,
G.qualifier,G.op);case "case-expression":if("simple"===G.format){var Y=n(this._evaluateNode(G.operand,K,P));for(var ea=0;ea<G.clauses.length;ea++)if(Y===n(this._evaluateNode(G.clauses[ea].operand,K,P)))return this._evaluateNode(G.clauses[ea].value,K,P)}else for(Y=0;Y<G.clauses.length;Y++)if(!0===this._evaluateNode(G.clauses[Y].operand,K,P))return this._evaluateNode(G.clauses[Y].value,K,P);return null!==G.else?this._evaluateNode(G.else,K,P):null;case "parameter":return this.parameters[G.value.toLowerCase()];
case "expression-list":Y=[];for(ea of G.value)Y.push(this._evaluateNode(ea,K,P));return Y;case "unary-expression":return b(this._evaluateNode(G.expr,K,P));case "binary-expression":switch(G.operator){case "AND":return c(this._evaluateNode(G.left,K,P),this._evaluateNode(G.right,K,P));case "OR":return f(this._evaluateNode(G.left,K,P),this._evaluateNode(G.right,K,P));case "IS":if("null"!==G.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(G.left,K,P);case "ISNOT":if("null"!==
G.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(G.left,K,P);case "IN":return Y=e(this._evaluateNode(G.right,K,P)),a(this._evaluateNode(G.left,K,P),Y);case "NOT IN":return Y=e(this._evaluateNode(G.right,K,P)),b(a(this._evaluateNode(G.left,K,P),Y));case "BETWEEN":return Y=this._evaluateNode(G.left,K,P),G=this._evaluateNode(G.right,K,P),null==Y||null==G[0]||null==G[1]?null:Y>=n(G[0])&&Y<=n(G[1]);case "NOTBETWEEN":return Y=this._evaluateNode(G.left,K,P),G=this._evaluateNode(G.right,
K,P),null==Y||null==G[0]||null==G[1]?null:Y<n(G[0])||Y>n(G[1]);case "LIKE":return d(this._evaluateNode(G.left,K,P),this._evaluateNode(G.right,K,P),G.escape);case "NOT LIKE":return b(d(this._evaluateNode(G.left,K,P),this._evaluateNode(G.right,K,P),G.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return r(G.operator,this._evaluateNode(G.left,K,P),this._evaluateNode(G.right,K,P));case "-":case "+":case "*":case "/":case "||":return p(G.operator,this._evaluateNode(G.left,
K,P),this._evaluateNode(G.right,K,P))}case "null":case "boolean":case "string":case "number":return G.value;case "date":return k(G.value);case "timestamp":return q(G.value);case "current-time":return K=new Date,"date"===G.mode&&K.setHours(0,0,0,0),K;case "column-reference":return g(K,G.column,this._datefields,P);case "data-type":return G.value;case "function":return K=this._evaluateNode(G.args,K,P),this.isAggregate?B.aggregateFunction(G.name,K):y.evaluateFunction(G.name,K)}throw Error("Unsupported sql syntax "+
G.type);};h._createClass(L,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,G=>{"current-time"===G.type?this._hasDateFunctions=!0:"function"===G.type&&(this._hasDateFunctions=this._hasDateFunctions||A.has(G.name.toLowerCase()))});return this._hasDateFunctions}}]);return L}();var F;(function(L){L[L.Normal=0]="Normal";L[L.Escaped=
1]="Escaped"})(F||(F={}));const J={getAttribute(L,I){return(L&&"object"===typeof L.attributes?L.attributes:L)[I]}};l.WhereClause=E;l.defaultAttributeAdapter=J;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(l){function h(y){let v=0;for(let C=0;C<y.length;C++)v+=y[C];return v/y.length}function D(y){const v=h(y),C=y.length;let t=0;for(const q of y)t+=(q-v)**2;return 1<C?t/(C-1):0}const B={min:{minParams:1,maxParams:1,
evaluate:y=>null==y[0]?null:Math.min.apply(Math,y[0])},max:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.max.apply(Math,y[0])},avg:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:h(y[0])},sum:{minParams:1,maxParams:1,evaluate:y=>{if(null==y[0])y=null;else{y=y[0];let v=0;for(let C=0;C<y.length;C++)v+=y[C];y=v}return y}},stddev:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.sqrt(D(y[0]))},count:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:y[0].length},var:{minParams:1,
maxParams:1,evaluate:y=>null==y[0]?null:D(y[0])}};l.aggregateFunction=function(y,v){const C=B[y.toLowerCase()];if(null==C)throw Error("Function Not Recognised");if(v.length<C.minParams||v.length>C.maxParams)throw Error(`Invalid Parameter count for call to ${y.toUpperCase()}`);return C.evaluate(v)};l.isAggregate=function(y,v){y=B[y.toLowerCase()];return null!=y&&v>=y.minParams&&v<=y.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(l,h,D,B,y){function v(k){k=new Date(k.getTime());k.setHours(0,0,0,0);return k}function C(k,e){if(k instanceof Date)return e?v(k):k;if("string"===typeof k||k instanceof String)if(k=y.DateTime.fromSQL(k),k.isValid)return e?v(k.toJSDate()):k.toJSDate();throw new D.SqlError(D.SqlErrorCodes.CannotCastValue);}let t=function(){function k(){this.op="+";this.millis=this.minute=
this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(e){if(null!==e.precision||null!==e.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k._parseSecondsComponent=function(e,b){b.includes(".")?(b=b.split("."),e.second=parseFloat(b[0]),e.millis=parseInt(b[1],10)):e.second=parseFloat(b)};k.createFromMilliseconds=function(e){const b=new k;b.second=e/1E3;return b};k.createFromValueAndQualifer=function(e,b,c){let f=null;const a=new k;a.op="-"===
c?"-":"+";if("interval-period"===b.type){k._fixDefaults(b);c=RegExp("^[0-9]{1,}$");if("year"===b.period||"month"===b.period)throw Error("Year-Month Intervals not supported");if("second"===b.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(e))k._parseSecondsComponent(a,e);else throw Error("Illegal Interval");else if(c.test(e))a[b.period]=parseFloat(e);else throw Error("Illegal Interval");}else{k._fixDefaults(b.start);k._fixDefaults(b.end);if("year"===b.start.period||"month"===b.start.period)throw Error("Year-Month Intervals not supported");
if("year"===b.end.period||"month"===b.end.period)throw Error("Year-Month Intervals not supported");switch(b.start.period){case "day":switch(b.end.period){case "hour":f=RegExp("^[0-9]{1,} [0-9]{1,}$");if(f.test(e))a[b.start.period]=parseFloat(e.split(" ")[0]),a[b.end.period]=parseFloat(e.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":f=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(f.test(e))a[b.start.period]=parseFloat(e.split(" ")[0]),e=e.split(" ")[1].split(":"),a.hour=parseFloat(e[0]),
a.minute=parseFloat(e[1]);else throw Error("Illegal Interval");break;case "second":f=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(e))a[b.start.period]=parseFloat(e.split(" ")[0]),e=e.split(" ")[1].split(":"),a.hour=parseFloat(e[0]),a.minute=parseFloat(e[1]),k._parseSecondsComponent(a,e[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(b.end.period){case "minute":f=RegExp("^[0-9]{1,}:[0-9]{1,}$");
if(f.test(e))a.hour=parseFloat(e.split(":")[0]),a.minute=parseFloat(e.split(":")[1]);else throw Error("Illegal Interval");break;case "second":f=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(e))e=e.split(":"),a.hour=parseFloat(e[0]),a.minute=parseFloat(e[1]),k._parseSecondsComponent(a,e[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(b.end.period){case "second":f=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");
if(f.test(e))e=e.split(":"),a.minute=parseFloat(e[0]),k._parseSecondsComponent(a,e[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return a};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return h._createClass(k)}();const q={extract:{minParams:2,maxParams:2,evaluate:([k,
e])=>{if(null==e)return null;if(e instanceof Date)switch(k.toUpperCase()){case "SECOND":return e.getSeconds();case "MINUTE":return e.getMinutes();case "HOUR":return e.getHours();case "DAY":return e.getDate();case "MONTH":return e.getMonth()+1;case "YEAR":return e.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:k=>{if(2===k.length){const [e,b]=k;return null==e||null==b?null:e.toString().substring(b-1)}if(3===k.length){const [e,b,c]=
k;return null==e||null==b||null==c?null:0>=c?"":e.toString().substring(b-1,b+c-1)}}},position:{minParams:2,maxParams:2,evaluate:([k,e])=>null==k||null==e?null:e.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var e=3===k.length,b=e?k[1]:" ";e=e?k[2]:k[1];if(null==b||null==e)return null;b=`(${B.escapeRegExpString(b)})`;switch(k[0]){case "BOTH":return e.replaceAll(new RegExp(`^${b}*|${b}*$`,"g"),"");case "LEADING":return e.replaceAll(new RegExp(`^${b}*`,"g"),"");case "TRAILING":return e.replaceAll(new RegExp(`${b}*$`,
"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?
null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,
evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const e=k[0];k=2===k.length?10**k[1]:1;return null==e?null:Math.round(e*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},
concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let e="";for(let b=0;b<k.length;b++){if(null==k[b])return null;e+=k[b].toString()}return e}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:k=>{for(const e of k)if(null!==e)return e;return null}},cosh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cosh(k[0])},
sinh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sinh(k[0])},tanh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tanh(k[0])},nullif:{minParams:2,maxParams:2,evaluate:k=>{const e=k[0];k=k[1];return(e instanceof Date?e.valueOf():e)===(k instanceof Date?k.valueOf():k)?null:e}},cast:{minParams:2,maxParams:2,evaluate:k=>{var e=k[0];k=k[1];if(null===e)return null;switch(k.type){case "integer":e=parseInt(e,10);if(isNaN(e))throw new D.SqlError(D.SqlErrorCodes.CannotCastValue);return e;
case "smallint":e=parseInt(e,10);if(isNaN(e))throw new D.SqlError(D.SqlErrorCodes.CannotCastValue);if(32767<e||-32767>e)throw new D.SqlError(D.SqlErrorCodes.CannotCastValue);return e;case "float":case "real":e=parseFloat(e);if(isNaN(e))throw new D.SqlError(D.SqlErrorCodes.CannotCastValue);return e;case "date":return C(e,!0);case "timestamp":return C(e,!1);case "varchar":e=e.toString();if(e.length>k.size)throw new D.SqlError(D.SqlErrorCodes.CannotCastValue);return e;default:throw new D.SqlError(D.SqlErrorCodes.InvalidDataType);
}}}};l.SqlInterval=t;l.evaluateFunction=function(k,e){const b=q[k.toLowerCase()];if(null==b)throw Error("Function Not Recognised");if(e.length<b.minParams||e.length>b.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return b.evaluate(e)};l.isStandardized=function(k,e){k=q[k.toLowerCase()];return null!=k&&e>=k.minParams&&e<=k.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(l,h,D){l.SqlErrorCodes=void 0;(function(t){t.InvalidFunctionParameters="InvalidFunctionParameters";t.UnsupportedSqlFunction="UnsupportedSqlFunction";t.UnsupportedOperator="UnsupportedOperator";t.UnsupportedSyntax="UnsupportedSyntax";t.UnsupportedIsRhs="UnsupportedIsRhs";t.UnsupportedIsLhs="UnsupportedIsLhs";t.InvalidDataType="InvalidDataType";t.CannotCastValue="CannotCastValue";t.MissingStatisticParameters="MissingStatisticParameters"})(l.SqlErrorCodes||
(l.SqlErrorCodes={}));const B={[l.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[l.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[l.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[l.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[l.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[l.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",
[l.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[l.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[l.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let y=function(t){function q(k,e){k=t.call(this,D.doSubstitutions(B[k],e))||this;k.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(h._assertThisInitialized(k),q);return k}h._inherits(q,t);return h._createClass(q)}(h._wrapNativeSuper(Error));
l.FeatureSetErrorCodes=void 0;(function(t){t.NeverReach="NeverReach";t.NotImplemented="NotImplemented";t.Cancelled="Cancelled";t.InvalidStatResponse="InvalidStatResponse";t.InvalidRequest="InvalidRequest";t.RequestFailed="RequestFailed";t.MissingFeatures="MissingFeatures";t.AggregationFieldNotFound="AggregationFieldNotFound";t.DataElementsNotFound="DataElementsNotFound"})(l.FeatureSetErrorCodes||(l.FeatureSetErrorCodes={}));const v={[l.FeatureSetErrorCodes.Cancelled]:"Cancelled",[l.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",
[l.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[l.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[l.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[l.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[l.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[l.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[l.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let C=function(t){function q(k,
e){k=t.call(this,D.doSubstitutions(v[k],e))||this;k.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(h._assertThisInitialized(k),q);return k}h._inherits(q,t);return h._createClass(q)}(h._wrapNativeSuper(Error));l.FeatureSetError=C;l.FeatureSetErrorMessages=v;l.SqlError=y;l.SqlErrorMessages=B;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],
function(l,h){function D(c){return c&&c.loc?`Line : ${c.loc.start?.line}, ${c.loc.start?.column}: `:""}function B(c,f){try{if(!f)return c;for(const a in f){let d=f[a];d||(d="");c=c.replace("{"+a+"}",f[a])}}catch(a){}return c}l.ExecutionErrorCodes=void 0;(function(c){c.AsyncNotEnabled="AsyncNotEnabled";c.ModulesNotSupported="ModulesNotSupported";c.CircularModules="CircularModules";c.NeverReach="NeverReach";c.UnsupportedHashType="UnsupportedHashType";c.InvalidParameter="InvalidParameter";c.UnexpectedToken=
"UnexpectedToken";c.Unrecognised="Unrecognised";c.UnrecognisedType="UnrecognisedType";c.MaximumCallDepth="MaximumCallDepth";c.BooleanConditionRequired="BooleanConditionRequired";c.TypeNotAllowedInFeature="TypeNotAllowedInFeature";c.KeyMustBeString="KeyMustBeString";c.WrongNumberOfParameters="WrongNumberOfParameters";c.CallNonFunction="CallNonFunction";c.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";c.NoFunctionInDictionary="NoFunctionInDictionary";c.NoFunctionInArray="NoFunctionInArray";
c.AssignModuleFunction="AssignModuleFunction";c.LogicExpressionOrAnd="LogicExpressionOrAnd";c.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";c.FunctionNotFound="FunctionNotFound";c.InvalidMemberAccessKey="InvalidMemberAccessKey";c.UnsupportedUnaryOperator="UnsupportUnaryOperator";c.InvalidIdentifier="InvalidIdentifier";c.MemberOfNull="MemberOfNull";c.UnsupportedOperator="UnsupportedOperator";c.Cancelled="Cancelled";c.ModuleAccessorMustBeString="ModuleAccessorMustBeString";c.ModuleExportNotFound=
"ModuleExportNotFound";c.Immutable="Immutable";c.OutOfBounds="OutOfBounds";c.IllegalResult="IllegalResult";c.FieldNotFound="FieldNotFound";c.PortalRequired="PortalRequired";c.LogicError="LogicError";c.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";c.KeyAccessorMustBeString="KeyAccessorMustBeString";c.WrongSpatialReference="WrongSpatialReference"})(l.ExecutionErrorCodes||(l.ExecutionErrorCodes={}));const y={[l.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",
[l.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[l.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[l.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[l.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[l.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[l.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[l.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[l.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[l.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[l.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[l.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[l.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[l.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[l.ExecutionErrorCodes.PortalRequired]:"Portal is required",[l.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[l.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[l.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[l.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[l.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[l.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[l.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[l.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[l.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[l.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[l.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[l.ExecutionErrorCodes.Immutable]:"Object is immutable",[l.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[l.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",
[l.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[l.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[l.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[l.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[l.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[l.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[l.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",
[l.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[l.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[l.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let v=function(c){function f(...a){return c.call(this,...a)||this}h._inherits(f,c);return h._createClass(f)}(h._wrapNativeSuper(Error)),C=function(c){function f(a,d){a=c.call(this,D(d)+a.message,{cause:a})||this;a.loc=null;Error.captureStackTrace&&
Error.captureStackTrace(h._assertThisInitialized(a),f);d&&d.loc&&(a.loc=d.loc);return a}h._inherits(f,c);return h._createClass(f)}(v),t=function(c){function f(a,d,n,r){a=c.call(this,"Execution error - "+D(n)+B(y[d],r))||this;a.loc=null;a.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(h._assertThisInitialized(a),f);n&&n.loc&&(a.loc=n.loc);return a}h._inherits(f,c);return h._createClass(f)}(h._wrapNativeSuper(Error)),q=function(c){function f(a,
d,n,r){a=c.call(this,"Compilation error - "+D(n)+B(y[d],r))||this;a.loc=null;a.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(h._assertThisInitialized(a),f);n&&n.loc&&(a.loc=n.loc);return a}h._inherits(f,c);return h._createClass(f)}(h._wrapNativeSuper(Error)),k=function(c){function f(){var a=c.call(this,"Uncompilable code structures")||this;a.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(h._assertThisInitialized(a),
f);return a}h._inherits(f,c);return h._createClass(f)}(h._wrapNativeSuper(Error));l.ModuleErrorCodes=void 0;(function(c){c.UnrecognisedUri="UnrecognisedUri";c.UnsupportedUriProtocol="UnsupportedUriProtocol"})(l.ModuleErrorCodes||(l.ModuleErrorCodes={}));const e={[l.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[l.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let b=function(c){function f(a,d){a=c.call(this,B(e[a],d))||this;a.declaredRootClass="esri.arcade.arcademoduleerror";
Error.captureStackTrace&&Error.captureStackTrace(h._assertThisInitialized(a),f);return a}h._inherits(f,c);return h._createClass(f)}(h._wrapNativeSuper(Error));l.ArcadeCompilationError=q;l.ArcadeExecutionError=t;l.ArcadeUncompilableError=k;l.ErrorWithCause=v;l.ExecutionErrorMessages=y;l.LocatableArcadeExecutionError=C;l.ModuleError=b;l.ModuleErrorMessages=e;l.doSubstitutions=B;l.ensureArcadeExecutionError=function(c,f,a){return"esri.arcade.arcadeexecutionerror"===a.declaredRootClass||"esri.arcade.arcadecompilationerror"===
a.declaredRootClass?null===a.loc&&f&&f.loc?new C(a,{cause:a}):a:f&&f.loc?new C(a,{cause:a}):a};l.parsingValidationMessage=function(c,f,a){return"Parsing error - "+D(c)+B(y[f],a)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(l){function h(M,U={}){const ia=JSON.stringify([M,U]);let sa=Zc[ia];sa||(sa=new Intl.ListFormat(M,U),Zc[ia]=sa);return sa}function D(M,U={}){const ia=JSON.stringify([M,U]);let sa=nc[ia];sa||(sa=new Intl.DateTimeFormat(M,
U),nc[ia]=sa);return sa}function B(M,U={}){const ia=JSON.stringify([M,U]);let sa=od[ia];sa||(sa=new Intl.NumberFormat(M,U),od[ia]=sa);return sa}function y(M,U={}){const {base:ia,...sa}=U,wa=JSON.stringify([M,sa]);let Ba=Ob[wa];Ba||(Ba=new Intl.RelativeTimeFormat(M,U),Ob[wa]=Ba);return Ba}function v(M){const U=[];for(let ia=1;12>=ia;ia++){const sa=Za.utc(2016,ia,1);U.push(M(sa))}return U}function C(M){const U=[];for(let ia=1;7>=ia;ia++){const sa=Za.utc(2016,11,13+ia);U.push(M(sa))}return U}function t(M,
U,ia,sa,wa){M=M.listingMode(ia);return"error"===M?null:"en"===M?sa(U):wa(U)}function q(M,U){if(k(M)||null===M)return U;if(M instanceof ec)return M;if("string"===typeof M){const ia=M.toLowerCase();return"default"===ia?U:"local"===ia||"system"===ia?Cc.instance:"utc"===ia||"gmt"===ia?Cb.utcInstance:Cb.parseSpecifier(ia)||Rb.create(M)}return e(M)?Cb.instance(M):"object"===typeof M&&M.offset&&"number"===typeof M.offset?M:new pd(M)}function k(M){return"undefined"===typeof M}function e(M){return"number"===
typeof M}function b(M){return"number"===typeof M&&0===M%1}function c(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(M){return!1}}function f(M,U,ia){if(0!==M.length)return M.reduce((sa,wa)=>{wa=[U(wa),wa];return sa?ia(sa[0],wa[0])===sa[0]?sa:wa:wa},null)[1]}function a(M,U){return U.reduce((ia,sa)=>{ia[sa]=M[sa];return ia},{})}function d(M,U){return Object.prototype.hasOwnProperty.call(M,U)}function n(M,U,ia){return b(M)&&M>=U&&M<=ia}function r(M,U=2){return 0>M?"-"+(""+-M).padStart(U,
"0"):(""+M).padStart(U,"0")}function p(M){if(!k(M)&&null!==M&&""!==M)return parseInt(M,10)}function g(M){if(!k(M)&&null!==M&&""!==M)return parseFloat(M)}function u(M){if(!k(M)&&null!==M&&""!==M)return M=1E3*parseFloat("0."+M),Math.floor(M)}function x(M,U,ia=!1){U=10**U;return(ia?Math.trunc:Math.round)(M*U)/U}function w(M){return 0===M%4&&(0!==M%100||0===M%400)}function m(M,U){var ia=U-1;ia=ia-12*Math.floor(ia/12)+1;return 2===ia?w(M+(U-ia)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][ia-1]}function z(M){let U=
Date.UTC(M.year,M.month-1,M.day,M.hour,M.minute,M.second,M.millisecond);100>M.year&&0<=M.year&&(U=new Date(U),U.setUTCFullYear(M.year,M.month-1,M.day));return+U}function A(M){var U=M-1;U=(U+Math.floor(U/4)-Math.floor(U/100)+Math.floor(U/400))%7;return 4===(M+Math.floor(M/4)-Math.floor(M/100)+Math.floor(M/400))%7||3===U?53:52}function H(M){return 99<M?M:M>qb.twoDigitCutoffYear?1900+M:2E3+M}function E(M,U,ia,sa=null){M=new Date(M);const wa={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",
hour:"2-digit",minute:"2-digit"};sa&&(wa.timeZone=sa);return(U=(new Intl.DateTimeFormat(ia,{timeZoneName:U,...wa})).formatToParts(M).find(Ba=>"timezonename"===Ba.type.toLowerCase()))?U.value:null}function F(M,U){M=parseInt(M,10);Number.isNaN(M)&&(M=0);U=parseInt(U,10)||0;U=0>M||Object.is(M,-0)?-U:U;return 60*M+U}function J(M){const U=Number(M);if("boolean"===typeof M||""===M||Number.isNaN(U))throw new Ma(`Invalid unit value ${M}`);return U}function L(M,U){const ia={};for(const sa in M)if(d(M,sa)){const wa=
M[sa];void 0!==wa&&null!==wa&&(ia[U(sa)]=J(wa))}return ia}function I(M,U){const ia=Math.trunc(Math.abs(M/60)),sa=Math.trunc(Math.abs(M%60));M=0<=M?"+":"-";switch(U){case "short":return`${M}${r(ia,2)}:${r(sa,2)}`;case "narrow":return`${M}${ia}${0<sa?`:${sa}`:""}`;case "techie":return`${M}${r(ia,2)}${r(sa,2)}`;default:throw new RangeError(`Value format ${U} is out of range for property format`);}}function G(M){return a(M,["hour","minute","second","millisecond"])}function K(M){switch(M){case "narrow":return[...pe];
case "short":return[...$c];case "long":return[...ad];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function P(M){switch(M){case "narrow":return[...oc];case "short":return[...Dc];case "long":return[...qd];case "numeric":return"1234567".split("");default:return null}}function Y(M){switch(M){case "narrow":return[...Hd];case "short":return[...Id];case "long":return[...fc];default:return null}}function ea(M,
U,ia="always",sa=!1){const wa={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var Ba=-1===["hours","minutes","seconds"].indexOf(M);if("auto"===ia&&Ba)switch(ia="days"===M,U){case 1:return ia?"tomorrow":`next ${wa[M][0]}`;case -1:return ia?"yesterday":`last ${wa[M][0]}`;case 0:return ia?"today":`this ${wa[M][0]}`}ia=Object.is(U,-0)||0>U;U=Math.abs(U);Ba=
1===U;const Ja=wa[M];M=sa?Ba?Ja[1]:Ja[2]||Ja[1]:Ba?wa[M][0]:M;return ia?`${U} ${M} ago`:`in ${U} ${M}`}function aa(M,U){let ia="";for(const sa of M)ia=sa.literal?ia+sa.val:ia+U(sa.val);return ia}function T(...M){M=M.reduce((U,ia)=>U+ia.source,"");return RegExp(`^${M}$`)}function R(...M){return U=>M.reduce(([ia,sa,wa],Ba)=>{const [Ja,Pa,Wa]=Ba(U,wa);return[{...ia,...Ja},Pa||sa,Wa]},[{},null,1]).slice(0,2)}function W(M,...U){if(null==M)return[null,null];for(const [ia,sa]of U)if(U=ia.exec(M))return sa(U);
return[null,null]}function S(...M){return(U,ia)=>{const sa={};let wa;for(wa=0;wa<M.length;wa++)sa[M[wa]]=p(U[ia+wa]);return[sa,null,ia+wa]}}function Z(M,U,ia){M=M[U];return k(M)?ia:p(M)}function ca(M,U){return[{hours:Z(M,U,0),minutes:Z(M,U+1,0),seconds:Z(M,U+2,0),milliseconds:u(M[U+3])},null,U+4]}function qa(M,U){const ia=!M[U]&&!M[U+1];M=F(M[U+1],M[U+2]);return[{},ia?null:Cb.instance(M),U+3]}function ya(M,U){return[{},M[U]?Rb.create(M[U]):null,U+1]}function xa(M){const [U,ia,sa,wa,Ba,Ja,Pa,Wa,fb]=
M,Q="-"===U[0];M=Wa&&"-"===Wa[0];const gb=(cb,Gb=!1)=>void 0!==cb&&(Gb||cb&&Q)?-cb:cb;return[{years:gb(g(ia)),months:gb(g(sa)),weeks:gb(g(wa)),days:gb(g(Ba)),hours:gb(g(Ja)),minutes:gb(g(Pa)),seconds:gb(g(Wa),"-0"===Wa),milliseconds:gb(u(fb),M)}]}function Ca(M,U,ia,sa,wa,Ba,Ja){U={year:2===U.length?H(p(U)):p(U),month:$c.indexOf(ia)+1,day:p(sa),hour:p(wa),minute:p(Ba)};Ja&&(U.second=p(Ja));M&&(U.weekday=3<M.length?qd.indexOf(M)+1:Dc.indexOf(M)+1);return U}function Da(M){const [,U,ia,sa,wa,Ba,Ja,Pa,
Wa,fb,Q,gb]=M;M=Ca(U,wa,sa,ia,Ba,Ja,Pa);let cb;cb=Wa?qe[Wa]:fb?0:F(Q,gb);return[M,new Cb(cb)]}function N(M){const [,U,ia,sa,wa,Ba,Ja,Pa]=M;return[Ca(U,wa,sa,ia,Ba,Ja,Pa),Cb.utcInstance]}function V(M){const [,U,ia,sa,wa,Ba,Ja,Pa]=M;return[Ca(U,Pa,ia,sa,wa,Ba,Ja),Cb.utcInstance]}function ka(M,U,ia=!1){M={values:ia?U.values:{...M.values,...(U.values||{})},loc:M.loc.clone(U.loc),conversionAccuracy:U.conversionAccuracy||M.conversionAccuracy,matrix:U.matrix||M.matrix};return new jb(M)}function da(M,U,ia,
sa,wa){M=M[wa][ia];var Ba=U[ia]/M;Ba=Math.sign(Ba)!==Math.sign(sa[wa])&&0!==sa[wa]&&1>=Math.abs(Ba)?0>Ba?Math.floor(Ba):Math.ceil(Ba):Math.trunc(Ba);sa[wa]+=Ba;U[ia]-=Ba*M}function na(M,U){Jd.reduce((ia,sa)=>{if(k(U[sa]))return ia;ia&&da(M,U,ia,U,sa);return sa},null)}function X(M,U){M=U.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-M.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(jb.fromMillis(M).as("days"))}function fa(M,U,ia){const sa=[["years",(Wa,fb)=>fb.year-Wa.year],
["quarters",(Wa,fb)=>fb.quarter-Wa.quarter+4*(fb.year-Wa.year)],["months",(Wa,fb)=>fb.month-Wa.month+12*(fb.year-Wa.year)],["weeks",(Wa,fb)=>{Wa=X(Wa,fb);return(Wa-Wa%7)/7}],["days",X]],wa={},Ba=M;let Ja,Pa;for(const [Wa,fb]of sa)0<=ia.indexOf(Wa)&&(Ja=Wa,wa[Wa]=fb(M,U),Pa=Ba.plus(wa),Pa>U?(wa[Wa]--,M=Ba.plus(wa)):M=Pa);return[M,wa,Pa,Ja]}function ja(M,U,ia,sa){let [wa,Ba,Ja,Pa]=fa(M,U,ia);M=U-wa;ia=ia.filter(Wa=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Wa));0===ia.length&&(Ja<U&&(Ja=
wa.plus({[Pa]:1})),Ja!==wa&&(Ba[Pa]=(Ba[Pa]||0)+M/(Ja-wa)));U=jb.fromObject(Ba,sa);return 0<ia.length?jb.fromMillis(M,sa).shiftTo(...ia).plus(U):U}function ma({numberingSystem:M},U=""){return new RegExp(`${rd[M||"latn"]}${U}`)}function ra(M,U=ia=>ia){return{regex:M,deser:([ia])=>{{let sa=parseInt(ia,10);if(isNaN(sa)){sa="";for(let wa=0;wa<ia.length;wa++){const Ba=ia.charCodeAt(wa);if(-1!==ia[wa].search(rd.hanidec))sa+=sd.indexOf(ia[wa]);else for(const Ja in Kd){const [Pa,Wa]=Kd[Ja];Ba>=Pa&&Ba<=Wa&&
(sa+=Ba-Pa)}}ia=parseInt(sa,10)}else ia=sa}return U(ia)}}}function va(M){return M.replace(/\./g,"\\.?").replace(tc,gc)}function za(M,U){return null===M?null:{regex:RegExp(M.map(va).join("|")),deser:([ia])=>M.findIndex(sa=>ia.replace(/\./g,"").replace(tc," ").toLowerCase()===sa.replace(/\./g,"").replace(tc," ").toLowerCase())+U}}function Ea(M,U){return{regex:M,deser:([,ia,sa])=>F(ia,sa),groups:U}}function Ga(M){return{regex:M,deser:([U])=>U}}function Na(M,U){const ia=ma(U),sa=ma(U,"{2}"),wa=ma(U,"{3}"),
Ba=ma(U,"{4}"),Ja=ma(U,"{6}"),Pa=ma(U,"{1,2}"),Wa=ma(U,"{1,3}"),fb=ma(U,"{1,6}"),Q=ma(U,"{1,9}"),gb=ma(U,"{2,4}"),cb=ma(U,"{4,6}"),Gb=uc=>({regex:RegExp(uc.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([ba])=>ba,literal:!0}),Fa=(uc=>{if(M.literal)return Gb(uc);switch(uc.val){case "G":return za(U.eras("short",!1),0);case "GG":return za(U.eras("long",!1),0);case "y":return ra(fb);case "yy":return ra(gb,H);case "yyyy":return ra(Ba);case "yyyyy":return ra(cb);case "yyyyyy":return ra(Ja);
case "M":return ra(Pa);case "MM":return ra(sa);case "MMM":return za(U.months("short",!0,!1),1);case "MMMM":return za(U.months("long",!0,!1),1);case "L":return ra(Pa);case "LL":return ra(sa);case "LLL":return za(U.months("short",!1,!1),1);case "LLLL":return za(U.months("long",!1,!1),1);case "d":return ra(Pa);case "dd":return ra(sa);case "o":return ra(Wa);case "ooo":return ra(wa);case "HH":return ra(sa);case "H":return ra(Pa);case "hh":return ra(sa);case "h":return ra(Pa);case "mm":return ra(sa);case "m":return ra(Pa);
case "q":return ra(Pa);case "qq":return ra(sa);case "s":return ra(Pa);case "ss":return ra(sa);case "S":return ra(Wa);case "SSS":return ra(wa);case "u":return Ga(Q);case "uu":return Ga(Pa);case "uuu":return ra(ia);case "a":return za(U.meridiems(),0);case "kkkk":return ra(Ba);case "kk":return ra(gb,H);case "W":return ra(Pa);case "WW":return ra(sa);case "E":case "c":return ra(ia);case "EEE":return za(U.weekdays("short",!1,!1),1);case "EEEE":return za(U.weekdays("long",!1,!1),1);case "ccc":return za(U.weekdays("short",
!0,!1),1);case "cccc":return za(U.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Ea(new RegExp(`([+-]${Pa.source})(?::(${sa.source}))?`),2);case "ZZZ":return Ea(new RegExp(`([+-]${Pa.source})(${sa.source})?`),2);case "z":return Ga(/[a-z_+-/]{1,256}?/i);case " ":return Ga(/[^\S\n\r]/);default:return Gb(uc)}})(M)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};Fa.token=M;return Fa}function Ka(M){return[`^${M.map(U=>U.regex).reduce((U,ia)=>`${U}(${ia.source})`,"")}$`,M]}function La(M,
U,ia){if(M=M.match(U)){U={};let sa=1;for(const wa in ia)if(d(ia,wa)){const Ba=ia[wa],Ja=Ba.groups?Ba.groups+1:1;!Ba.literal&&Ba.token&&(U[Ba.token.val[0]]=Ba.deser(M.slice(sa,sa+Ja)));sa+=Ja}return[M,U]}return[M,{}]}function Va(M){const U=wa=>{switch(wa){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";
case "k":return"weekYear";case "q":return"quarter";default:return null}};let ia=null,sa;k(M.z)||(ia=Rb.create(M.z));k(M.Z)||(ia||(ia=new Cb(M.Z)),sa=M.Z);k(M.q)||(M.M=3*(M.q-1)+1);k(M.h)||(12>M.h&&1===M.a?M.h+=12:12===M.h&&0===M.a&&(M.h=0));0===M.G&&M.y&&(M.y=-M.y);k(M.u)||(M.S=u(M.u));return[Object.keys(M).reduce((wa,Ba)=>{const Ja=U(Ba);Ja&&(wa[Ja]=M[Ba]);return wa},{}),ia,sa]}function Ra(M,U){return Array.prototype.concat(...M.map(ia=>{if(!ia.literal){var sa=Fb.macroTokenToFormatOpts(ia.val);sa=
Xa(sa,U);ia=null==sa||sa.includes(void 0)?ia:sa}return ia}))}function Ua(M,U,ia){ia=Ra(Fb.parseFormat(ia),M);var sa=ia.map(cb=>Na(cb,M));const wa=sa.find(cb=>cb.invalidReason);if(wa)return{input:U,tokens:ia,invalidReason:wa.invalidReason};const [Ba,Ja]=Ka(sa);sa=RegExp(Ba,"i");const [Pa,Wa]=La(U,sa,Ja),[fb,Q,gb]=Wa?Va(Wa):[null,null,void 0];if(d(Wa,"a")&&d(Wa,"H"))throw new Aa("Can't include meridiem when specifying 24-hour format");return{input:U,tokens:ia,regex:sa,rawMatches:Pa,matches:Wa,result:fb,
zone:Q,specificOffset:gb}}function Xa(M,U){if(!M)return null;U=Fb.create(U,M);var ia=U.formatDateTimeParts;Mc||(Mc=Za.fromMillis(1555555555555));return ia.call(U,Mc).map(sa=>{{const {type:Ba,value:Ja}=sa;if("literal"===Ba)sa=/^\s+$/.test(Ja),sa={literal:!sa,val:sa?" ":Ja};else{sa=M[Ba];var wa=vc[Ba];"object"===typeof wa&&(wa=wa[sa]);sa=wa?{literal:!1,val:wa}:void 0}}return sa})}function Sa(M,U){return new Kb("unit out of range",`you specified ${U} (of type ${typeof U}) as a ${M}, which is invalid`)}
function $a(M,U,ia){U=new Date(Date.UTC(M,U-1,ia));100>M&&0<=M&&U.setUTCFullYear(U.getUTCFullYear()-1900);M=U.getUTCDay();return 0===M?7:M}function bb(M,U){M=w(M)?td:bd;const ia=M.findIndex(sa=>sa<U);return{month:ia+1,day:U-M[ia]}}function Ha(M){const {year:U,month:ia,day:sa}=M;var wa=sa+(w(U)?td:bd)[ia-1];const Ba=$a(U,ia,sa);wa=Math.floor((wa-Ba+10)/7);let Ja;1>wa?(Ja=U-1,wa=A(Ja)):wa>A(U)?(Ja=U+1,wa=1):Ja=U;return{weekYear:Ja,weekNumber:wa,weekday:Ba,...G(M)}}function vb(M){const {weekYear:U,weekNumber:ia,
weekday:sa}=M;var wa=$a(U,1,4),Ba=w(U)?366:365;wa=7*ia+sa-wa-3;1>wa?(Ba=U-1,wa+=w(Ba)?366:365):wa>Ba?(Ba=U+1,wa-=w(U)?366:365):Ba=U;const {month:Ja,day:Pa}=bb(Ba,wa);return{year:Ba,month:Ja,day:Pa,...G(M)}}function lb(M){const {year:U,month:ia,day:sa}=M;var wa=sa+(w(U)?td:bd)[ia-1];return{year:U,ordinal:wa,...G(M)}}function mb(M){const {year:U,ordinal:ia}=M,{month:sa,day:wa}=bb(U,ia);return{year:U,month:sa,day:wa,...G(M)}}function O(M){const U=b(M.year),ia=n(M.month,1,12),sa=n(M.day,1,m(M.year,M.month));
return U?ia?sa?!1:Sa("day",M.day):Sa("month",M.month):Sa("year",M.year)}function eb(M){const {hour:U,minute:ia,second:sa,millisecond:wa}=M;M=n(U,0,23)||24===U&&0===ia&&0===sa&&0===wa;const Ba=n(ia,0,59),Ja=n(sa,0,59),Pa=n(wa,0,999);return M?Ba?Ja?Pa?!1:Sa("millisecond",wa):Sa("second",sa):Sa("minute",ia):Sa("hour",U)}function Lb(M){return new Kb("unsupported zone",`the zone "${M.name}" is not supported`)}function yb(M){null===M.weekData&&(M.weekData=Ha(M.c));return M.weekData}function ua(M,U){M={ts:M.ts,
zone:M.zone,c:M.c,o:M.o,loc:M.loc,invalid:M.invalid};return new Za({...M,...U,old:M})}function Hb(M,U,ia){let sa=M-6E4*U;const wa=ia.offset(sa);if(U===wa)return[sa,U];sa-=6E4*(wa-U);U=ia.offset(sa);return wa===U?[sa,wa]:[M-6E4*Math.min(wa,U),Math.max(wa,U)]}function Sb(M,U){M=new Date(M+6E4*U);return{year:M.getUTCFullYear(),month:M.getUTCMonth()+1,day:M.getUTCDate(),hour:M.getUTCHours(),minute:M.getUTCMinutes(),second:M.getUTCSeconds(),millisecond:M.getUTCMilliseconds()}}function Ab(M,U,ia){return Hb(z(M),
U,ia)}function Pb(M,U){const ia=M.o;var sa=M.c.year+Math.trunc(U.years);const wa=M.c.month+Math.trunc(U.months)+3*Math.trunc(U.quarters);sa={...M.c,year:sa,month:wa,day:Math.min(M.c.day,m(sa,wa))+Math.trunc(U.days)+7*Math.trunc(U.weeks)};U=jb.fromObject({years:U.years-Math.trunc(U.years),quarters:U.quarters-Math.trunc(U.quarters),months:U.months-Math.trunc(U.months),weeks:U.weeks-Math.trunc(U.weeks),days:U.days-Math.trunc(U.days),hours:U.hours,minutes:U.minutes,seconds:U.seconds,milliseconds:U.milliseconds}).as("milliseconds");
sa=z(sa);let [Ba,Ja]=Hb(sa,ia,M.zone);0!==U&&(Ba+=U,Ja=M.zone.offset(Ba));return{ts:Ba,o:Ja}}function Vb(M,U,ia,sa,wa,Ba){const {setZone:Ja,zone:Pa}=ia;return M&&0!==Object.keys(M).length||U?(M=Za.fromObject(M,{...ia,zone:U||Pa,specificOffset:Ba}),Ja?M:M.setZone(Pa)):Za.invalid(new Kb("unparsable",`the input "${wa}" can't be parsed as ${sa}`))}function hc(M,U,ia=!0){return M.isValid?Fb.create(sb.create("en-US"),{allowZ:ia,forceSimple:!0}).formatDateTimeFromString(M,U):null}function pc(M,U){const ia=
9999<M.c.year||0>M.c.year;let sa="";ia&&0<=M.c.year&&(sa+="+");sa+=r(M.c.year,ia?6:4);U?(sa=sa+"-"+r(M.c.month),sa=sa+"-"+r(M.c.day)):(sa+=r(M.c.month),sa+=r(M.c.day));return sa}function Db(M,U,ia,sa,wa,Ba){let Ja=r(M.c.hour);U?(Ja=Ja+":"+r(M.c.minute),0===M.c.second&&ia||(Ja+=":")):Ja+=r(M.c.minute);0===M.c.second&&ia||(Ja+=r(M.c.second),0===M.c.millisecond&&sa||(Ja=Ja+"."+r(M.c.millisecond,3)));wa&&(M.isOffsetFixed&&0===M.offset&&!Ba?Ja+="Z":0>M.o?(Ja=Ja+"-"+r(Math.trunc(-M.o/60)),Ja=Ja+":"+r(Math.trunc(-M.o%
60))):(Ja=Ja+"+"+r(Math.trunc(M.o/60)),Ja=Ja+":"+r(Math.trunc(M.o%60))));Ba&&(Ja+="["+M.zone.ianaName+"]");return Ja}function Tb(M){const U={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",
weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[M.toLowerCase()];if(!U)throw new Oa(M);return U}function kb(M,U){const ia=q(U.zone,qb.defaultZone);U=sb.fromObject(U);const sa=qb.now();var wa;if(k(M.year))M=sa;else{for(const Ba of Ld)k(M[Ba])&&(M[Ba]=Md[Ba]);if(wa=O(M)||eb(M))return Za.invalid(wa);wa=ia.offset(sa);[M,wa]=Ab(M,wa,ia)}return new Za({ts:M,zone:ia,loc:U,o:wa})}function Bb(M,U,ia){const sa=k(ia.round)?!0:ia.round,wa=(Ja,Pa)=>{Ja=x(Ja,sa||ia.calendary?0:2,!0);return U.loc.clone(ia).relFormatter(ia).format(Ja,
Pa)},Ba=Ja=>ia.calendary?U.hasSame(M,Ja)?0:U.startOf(Ja).diff(M.startOf(Ja),Ja).get(Ja):U.diff(M,Ja).get(Ja);if(ia.unit)return wa(Ba(ia.unit),ia.unit);for(const Ja of ia.units){const Pa=Ba(Ja);if(1<=Math.abs(Pa))return wa(Pa,Ja)}return wa(M>U?-0:0,ia.units[ia.units.length-1])}function Ub(M){let U={};0<M.length&&"object"===typeof M[M.length-1]?(U=M[M.length-1],M=Array.from(M).slice(0,M.length-1)):M=Array.from(M);return[U,M]}function Ya(M){if(Za.isDateTime(M))return M;if(M&&M.valueOf&&e(M.valueOf()))return Za.fromJSDate(M);
if(M&&"object"===typeof M)return Za.fromObject(M);throw new Ma(`Unknown datetime argument: ${M}, of type ${typeof M}`);}class Eb extends Error{}class la extends Eb{constructor(M){super(`Invalid DateTime: ${M.toMessage()}`)}}class ta extends Eb{constructor(M){super(`Invalid Interval: ${M.toMessage()}`)}}class oa extends Eb{constructor(M){super(`Invalid Duration: ${M.toMessage()}`)}}class Aa extends Eb{}class Oa extends Eb{constructor(M){super(`Invalid unit ${M}`)}}class Ma extends Eb{}class Ta extends Eb{constructor(){super("Zone is an abstract class")}}
const ab={year:"numeric",month:"numeric",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric"},pb={year:"numeric",month:"short",day:"numeric",weekday:"short"},nb={year:"numeric",month:"long",day:"numeric"},zb={year:"numeric",month:"long",day:"numeric",weekday:"long"},Mb={hour:"numeric",minute:"numeric"},qc={hour:"numeric",minute:"numeric",second:"numeric"},cd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},rc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
Wb={hour:"numeric",minute:"numeric",hourCycle:"h23"},ud={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},wc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},vd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},xc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},Ec={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},dd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},Fc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Nd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Gc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Od={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},ed={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Nc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class ec{get type(){throw new Ta;}get name(){throw new Ta;}get ianaName(){return this.name}get isUniversal(){throw new Ta;}offsetName(M,U){throw new Ta;}formatOffset(M,U){throw new Ta;}offset(M){throw new Ta;}equals(M){throw new Ta;}get isValid(){throw new Ta;}}let yc=null;class Cc extends ec{static get instance(){null===
yc&&(yc=new Cc);return yc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(M,{format:U,locale:ia}){return E(M,U,ia)}formatOffset(M,U){return I(this.offset(M),U)}offset(M){return-(new Date(M)).getTimezoneOffset()}equals(M){return"system"===M.type}get isValid(){return!0}}let fd={};const gd={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let $b={};class Rb extends ec{static create(M){$b[M]||($b[M]=new Rb(M));return $b[M]}static resetCache(){$b=
{};fd={}}static isValidSpecifier(M){return this.isValidZone(M)}static isValidZone(M){if(!M)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:M})).format(),!0}catch(U){return!1}}constructor(M){super();this.zoneName=M;this.valid=Rb.isValidZone(M)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(M,{format:U,locale:ia}){return E(M,U,ia,this.name)}formatOffset(M,U){return I(this.offset(M),U)}offset(M){M=new Date(M);if(isNaN(M))return NaN;var U=this.name;
fd[U]||(fd[U]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:U,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));U=fd[U];if(U.formatToParts){U=U.formatToParts(M);var ia=[];for(let Q=0;Q<U.length;Q++){const {type:gb,value:cb}=U[Q],Gb=gd[gb];"era"===gb?ia[Gb]=cb:k(Gb)||(ia[Gb]=parseInt(cb,10))}U=ia}else{U=U.format(M).replace(/\u200E/g,"");U=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(U);const [,Q,gb,cb,Gb,Fa,uc,ba]=U;U=[cb,Q,
gb,Gb,Fa,uc,ba]}let [sa,wa,Ba,Ja,Pa,Wa,fb]=U;"BC"===Ja&&(sa=-Math.abs(sa)+1);U=z({year:sa,month:wa,day:Ba,hour:24===Pa?0:Pa,minute:Wa,second:fb,millisecond:0});M=+M;ia=M%1E3;return(U-(M-(0<=ia?ia:1E3+ia)))/6E4}equals(M){return"iana"===M.type&&M.name===this.name}get isValid(){return this.valid}}let Zc={},nc={},od={},Ob={},Xb=null;class wd{constructor(M,U,ia){this.padTo=ia.padTo||0;this.floor=ia.floor||!1;const {padTo:sa,floor:wa,...Ba}=ia;if(!U||0<Object.keys(Ba).length)U={useGrouping:!1,...ia},0<
ia.padTo&&(U.minimumIntegerDigits=ia.padTo),this.inf=B(M,U)}format(M){if(this.inf)return this.inf.format(this.floor?Math.floor(M):M);M=this.floor?Math.floor(M):x(M,3);return r(M,this.padTo)}}class xd{constructor(M,U,ia){this.opts=ia;ia=this.originalZone=void 0;this.opts.timeZone?this.dt=M:"fixed"===M.zone.type?(ia=M.offset/60*-1,ia=0<=ia?`Etc/GMT+${ia}`:`Etc/GMT${ia}`,0!==M.offset&&Rb.create(ia).valid?this.dt=M:(ia="UTC",this.dt=0===M.offset?M:M.setZone("UTC").plus({minutes:M.offset}),this.originalZone=
M.zone)):"system"===M.zone.type?this.dt=M:"iana"===M.zone.type?(this.dt=M,ia=M.zone.name):(ia="UTC",this.dt=M.setZone("UTC").plus({minutes:M.offset}),this.originalZone=M.zone);M={...this.opts};M.timeZone=M.timeZone||ia;this.dtf=D(U,M)}format(){return this.originalZone?this.formatToParts().map(({value:M})=>M).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const M=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?M.map(U=>{if("timeZoneName"===U.type){const ia=this.originalZone.offsetName(this.dt.ts,
{locale:this.dt.locale,format:this.opts.timeZoneName});return{...U,value:ia}}return U}):M}resolvedOptions(){return this.dtf.resolvedOptions()}}class hd{constructor(M,U,ia){this.opts={style:"long",...ia};!U&&c()&&(this.rtf=y(M,ia))}format(M,U){return this.rtf?this.rtf.format(M,U):ea(U,M,this.opts.numeric,"long"!==this.opts.style)}formatToParts(M,U){return this.rtf?this.rtf.formatToParts(M,U):[]}}class sb{static fromOpts(M){return sb.create(M.locale,M.numberingSystem,M.outputCalendar,M.defaultToEN)}static create(M,
U,ia,sa=!1){M=M||qb.defaultLocale;var wa;(wa=M)||(sa?sa="en-US":(Xb||(Xb=(new Intl.DateTimeFormat).resolvedOptions().locale),sa=Xb),wa=sa);return new sb(wa,U||qb.defaultNumberingSystem,ia||qb.defaultOutputCalendar,M)}static resetCache(){Xb=null;nc={};od={};Ob={}}static fromObject({locale:M,numberingSystem:U,outputCalendar:ia}={}){return sb.create(M,U,ia)}constructor(M,U,ia,sa){var wa=M.indexOf("-x-");-1!==wa&&(M=M.substring(0,wa));wa=M.indexOf("-u-");if(-1===wa)var Ba=[M];else{try{Ba=D(M).resolvedOptions();
var Ja=M}catch(cb){Ja=M.substring(0,wa),Ba=D(Ja).resolvedOptions()}const {numberingSystem:Q,calendar:gb}=Ba;Ba=[Ja,Q,gb]}const [Pa,Wa,fb]=Ba;this.locale=Pa;this.numberingSystem=U||Wa||null;this.outputCalendar=ia||fb||null;U=this.locale;ia=this.numberingSystem;if((Ba=this.outputCalendar)||ia)U.includes("-u-")||(U+="-u"),Ba&&(U+=`-ca-${Ba}`),ia&&(U+=`-nu-${ia}`);this.intl=U;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache=
{};this.specifiedLocale=sa;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var M=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=M}return this.fastNumbersCached}listingMode(){const M=this.isEnglish(),U=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||
"gregory"===this.outputCalendar);return M&&U?"en":"intl"}clone(M){return M&&0!==Object.getOwnPropertyNames(M).length?sb.create(M.locale||this.specifiedLocale,M.numberingSystem||this.numberingSystem,M.outputCalendar||this.outputCalendar,M.defaultToEN||!1):this}redefaultToEN(M={}){return this.clone({...M,defaultToEN:!0})}redefaultToSystem(M={}){return this.clone({...M,defaultToEN:!1})}months(M,U=!1,ia=!0){return t(this,M,ia,K,()=>{const sa=U?{month:M,day:"numeric"}:{month:M},wa=U?"format":"standalone";
this.monthsCache[wa][M]||(this.monthsCache[wa][M]=v(Ba=>this.extract(Ba,sa,"month")));return this.monthsCache[wa][M]})}weekdays(M,U=!1,ia=!0){return t(this,M,ia,P,()=>{const sa=U?{weekday:M,year:"numeric",month:"long",day:"numeric"}:{weekday:M},wa=U?"format":"standalone";this.weekdaysCache[wa][M]||(this.weekdaysCache[wa][M]=C(Ba=>this.extract(Ba,sa,"weekday")));return this.weekdaysCache[wa][M]})}meridiems(M=!0){return t(this,void 0,M,()=>ic,()=>{if(!this.meridiemCache){const U={hour:"numeric",hourCycle:"h12"};
this.meridiemCache=[Za.utc(2016,11,13,9),Za.utc(2016,11,13,19)].map(ia=>this.extract(ia,U,"dayperiod"))}return this.meridiemCache})}eras(M,U=!0){return t(this,M,U,Y,()=>{const ia={era:M};this.eraCache[M]||(this.eraCache[M]=[Za.utc(-40,1,1),Za.utc(2017,1,1)].map(sa=>this.extract(sa,ia,"era")));return this.eraCache[M]})}extract(M,U,ia){return(M=this.dtFormatter(M,U).formatToParts().find(sa=>sa.type.toLowerCase()===ia))?M.value:null}numberFormatter(M={}){return new wd(this.intl,M.forceSimple||this.fastNumbers,
M)}dtFormatter(M,U={}){return new xd(M,this.intl,U)}relFormatter(M={}){return new hd(this.intl,this.isEnglish(),M)}listFormatter(M={}){return h(this.intl,M)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(M){return this.locale===M.locale&&this.numberingSystem===M.numberingSystem&&this.outputCalendar===M.outputCalendar}}let jc=null;class Cb extends ec{static get utcInstance(){null===
jc&&(jc=new Cb(0));return jc}static instance(M){return 0===M?Cb.utcInstance:new Cb(M)}static parseSpecifier(M){return M&&(M=M.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Cb(F(M[1],M[2])):null}constructor(M){super();this.fixed=M}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${I(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${I(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(M,U){return I(this.fixed,U)}get isUniversal(){return!0}offset(){return this.fixed}equals(M){return"fixed"===
M.type&&M.fixed===this.fixed}get isValid(){return!0}}class pd extends ec{constructor(M){super();this.zoneName=M}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Hc=()=>Date.now(),Pd="system",sc=null,Oc=null,Pc=null,kc=60,id;class qb{static get now(){return Hc}static set now(M){Hc=M}static set defaultZone(M){Pd=M}static get defaultZone(){return q(Pd,
Cc.instance)}static get defaultLocale(){return sc}static set defaultLocale(M){sc=M}static get defaultNumberingSystem(){return Oc}static set defaultNumberingSystem(M){Oc=M}static get defaultOutputCalendar(){return Pc}static set defaultOutputCalendar(M){Pc=M}static get twoDigitCutoffYear(){return kc}static set twoDigitCutoffYear(M){kc=M%100}static get throwOnInvalid(){return id}static set throwOnInvalid(M){id=M}static resetCaches(){sb.resetCache();Rb.resetCache()}}const ad="January February March April May June July August September October November December".split(" "),
$c="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),pe="JFMAMJJASOND".split(""),qd="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Dc="Mon Tue Wed Thu Fri Sat Sun".split(" "),oc="MTWTFSS".split(""),ic=["AM","PM"],fc=["Before Christ","Anno Domini"],Id=["BC","AD"],Hd=["B","A"],yd={D:ab,DD:ob,DDD:nb,DDDD:zb,t:Mb,tt:qc,ttt:cd,tttt:rc,T:Wb,TT:ud,TTT:wc,TTTT:vd,f:xc,ff:dd,fff:Gc,ffff:ed,F:Ec,FF:Fc,FFF:Od,FFFF:Nc};class Fb{static create(M,U={}){return new Fb(M,U)}static parseFormat(M){let U=
null,ia="",sa=!1;const wa=[];for(let Ba=0;Ba<M.length;Ba++){const Ja=M.charAt(Ba);"'"===Ja?(0<ia.length&&wa.push({literal:sa||/^\s+$/.test(ia),val:ia}),U=null,ia="",sa=!sa):sa?ia+=Ja:Ja===U?ia+=Ja:(0<ia.length&&wa.push({literal:/^\s+$/.test(ia),val:ia}),U=ia=Ja)}0<ia.length&&wa.push({literal:sa||/^\s+$/.test(ia),val:ia});return wa}static macroTokenToFormatOpts(M){return yd[M]}constructor(M,U){this.opts=U;this.loc=M;this.systemLoc=null}formatWithSystemDefault(M,U){null===this.systemLoc&&(this.systemLoc=
this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(M,{...this.opts,...U}).format()}formatDateTime(M,U={}){return this.loc.dtFormatter(M,{...this.opts,...U}).format()}formatDateTimeParts(M,U={}){return this.loc.dtFormatter(M,{...this.opts,...U}).formatToParts()}formatInterval(M,U={}){return this.loc.dtFormatter(M.start,{...this.opts,...U}).dtf.formatRange(M.start.toJSDate(),M.end.toJSDate())}resolvedOptions(M,U={}){return this.loc.dtFormatter(M,{...this.opts,...U}).resolvedOptions()}num(M,
U=0){if(this.opts.forceSimple)return r(M,U);const ia={...this.opts};0<U&&(ia.padTo=U);return this.loc.numberFormatter(ia).format(M)}formatDateTimeFromString(M,U){const ia="en"===this.loc.listingMode(),sa=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,wa=(Q,gb)=>this.loc.extract(M,Q,gb),Ba=Q=>M.isOffsetFixed&&0===M.offset&&Q.allowZ?"Z":M.isValid?M.zone.formatOffset(M.ts,Q.format):"",Ja=(Q,gb)=>ia?K(Q)[M.month-1]:wa(gb?{month:Q}:{month:Q,day:"numeric"},"month"),Pa=(Q,gb)=>ia?P(Q)[M.weekday-
1]:wa(gb?{weekday:Q}:{weekday:Q,month:"long",day:"numeric"},"weekday"),Wa=Q=>{const gb=Fb.macroTokenToFormatOpts(Q);return gb?this.formatWithSystemDefault(M,gb):Q},fb=Q=>ia?Y(Q)[0>M.year?0:1]:wa({era:Q},"era");return aa(Fb.parseFormat(U),Q=>{switch(Q){case "S":return this.num(M.millisecond);case "u":case "SSS":return this.num(M.millisecond,3);case "s":return this.num(M.second);case "ss":return this.num(M.second,2);case "uu":return this.num(Math.floor(M.millisecond/10),2);case "uuu":return this.num(Math.floor(M.millisecond/
100));case "m":return this.num(M.minute);case "mm":return this.num(M.minute,2);case "h":return this.num(0===M.hour%12?12:M.hour%12);case "hh":return this.num(0===M.hour%12?12:M.hour%12,2);case "H":return this.num(M.hour);case "HH":return this.num(M.hour,2);case "Z":return Ba({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return Ba({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return Ba({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return M.zone.offsetName(M.ts,{format:"short",
locale:this.loc.locale});case "ZZZZZ":return M.zone.offsetName(M.ts,{format:"long",locale:this.loc.locale});case "z":return M.zoneName;case "a":return ia?ic[12>M.hour?0:1]:wa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return sa?wa({day:"numeric"},"day"):this.num(M.day);case "dd":return sa?wa({day:"2-digit"},"day"):this.num(M.day,2);case "c":return this.num(M.weekday);case "ccc":return Pa("short",!0);case "cccc":return Pa("long",!0);case "ccccc":return Pa("narrow",!0);case "E":return this.num(M.weekday);
case "EEE":return Pa("short",!1);case "EEEE":return Pa("long",!1);case "EEEEE":return Pa("narrow",!1);case "L":return sa?wa({month:"numeric",day:"numeric"},"month"):this.num(M.month);case "LL":return sa?wa({month:"2-digit",day:"numeric"},"month"):this.num(M.month,2);case "LLL":return Ja("short",!0);case "LLLL":return Ja("long",!0);case "LLLLL":return Ja("narrow",!0);case "M":return sa?wa({month:"numeric"},"month"):this.num(M.month);case "MM":return sa?wa({month:"2-digit"},"month"):this.num(M.month,
2);case "MMM":return Ja("short",!1);case "MMMM":return Ja("long",!1);case "MMMMM":return Ja("narrow",!1);case "y":return sa?wa({year:"numeric"},"year"):this.num(M.year);case "yy":return sa?wa({year:"2-digit"},"year"):this.num(M.year.toString().slice(-2),2);case "yyyy":return sa?wa({year:"numeric"},"year"):this.num(M.year,4);case "yyyyyy":return sa?wa({year:"numeric"},"year"):this.num(M.year,6);case "G":return fb("short");case "GG":return fb("long");case "GGGGG":return fb("narrow");case "kk":return this.num(M.weekYear.toString().slice(-2),
2);case "kkkk":return this.num(M.weekYear,4);case "W":return this.num(M.weekNumber);case "WW":return this.num(M.weekNumber,2);case "o":return this.num(M.ordinal);case "ooo":return this.num(M.ordinal,3);case "q":return this.num(M.quarter);case "qq":return this.num(M.quarter,2);case "X":return this.num(Math.floor(M.ts/1E3));case "x":return this.num(M.ts);default:return Wa(Q)}})}formatDurationFromString(M,U){const ia=wa=>{switch(wa[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";
case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};U=Fb.parseFormat(U);const sa=U.reduce((wa,{literal:Ba,val:Ja})=>Ba?wa:wa.concat(Ja),[]);M=M.shiftTo(...sa.map(ia).filter(wa=>wa));return aa(U,(wa=>Ba=>{const Ja=ia(Ba);return Ja?this.num(wa.get(Ja),Ba.length):Ba})(M))}}class Kb{constructor(M,U){this.reason=M;this.explanation=U}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const lc=
/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Nb=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Qb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Qc=RegExp(`${Qb.source}${`(?:${Nb.source}?(?:\\[(${lc.source})\\])?)?`}`),jd=RegExp(`(?:T${Qc.source})?`),Rc=S("weekYear","weekNumber","weekDay"),Qd=S("year","ordinal"),Rd=RegExp(`${Qb.source} ?(?:${Nb.source}|(${lc.source}))?`),zd=RegExp(`(?: ${Rd.source})?`),Ad=RegExp(`^T?${Qb.source}$`),Sd=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
qe={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Td=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,re=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ud=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
Vd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Sc=T(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,jd),kd=T(/(\d{4})-?W(\d\d)(?:-?(\d))?/,jd),zc=T(/(\d{4})-?(\d{3})/,jd),Wd=T(Qc),Bd=R(function(M,U){return[{year:Z(M,U),month:Z(M,U+1,1),day:Z(M,U+2,1)},null,U+3]},ca,qa,ya),Xd=R(Rc,ca,qa,ya),ld=R(Qd,ca,qa,ya),Yd=R(ca,qa,ya),Cd=R(ca),mc=T(/(\d{4})-(\d\d)-(\d\d)/,zd),Ic=T(Rd),Tc=R(ca,qa,ya),Uc={weeks:{days:7,hours:168,minutes:10080,
seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Dd={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},
...Uc},Ed={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Uc},Yb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Jd=Yb.slice(0).reverse();class jb{constructor(M){const U=
"longterm"===M.conversionAccuracy||!1;let ia=U?Ed:Dd;M.matrix&&(ia=M.matrix);this.values=M.values;this.loc=M.loc||sb.create();this.conversionAccuracy=U?"longterm":"casual";this.invalid=M.invalid||null;this.matrix=ia;this.isLuxonDuration=!0}static fromMillis(M,U){return jb.fromObject({milliseconds:M},U)}static fromObject(M,U={}){if(null==M||"object"!==typeof M)throw new Ma(`Duration.fromObject: argument expected to be an object, got ${null===M?"null":typeof M}`);return new jb({values:L(M,jb.normalizeUnit),
loc:sb.fromObject(U),conversionAccuracy:U.conversionAccuracy,matrix:U.matrix})}static fromDurationLike(M){if(e(M))return jb.fromMillis(M);if(jb.isDuration(M))return M;if("object"===typeof M)return jb.fromObject(M);throw new Ma(`Unknown duration argument ${M} of type ${typeof M}`);}static fromISO(M,U){const [ia]=W(M,[Sd,xa]);return ia?jb.fromObject(ia,U):jb.invalid("unparsable",`the input "${M}" can't be parsed as ISO 8601`)}static fromISOTime(M,U){const [ia]=W(M,[Ad,Cd]);return ia?jb.fromObject(ia,
U):jb.invalid("unparsable",`the input "${M}" can't be parsed as ISO 8601`)}static invalid(M,U=null){if(!M)throw new Ma("need to specify a reason the Duration is invalid");M=M instanceof Kb?M:new Kb(M,U);if(qb.throwOnInvalid)throw new oa(M);return new jb({invalid:M})}static normalizeUnit(M){const U={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",
second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[M?M.toLowerCase():M];if(!U)throw new Oa(M);return U}static isDuration(M){return M&&M.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(M,U={}){U={...U,floor:!1!==U.round&&!1!==U.floor};return this.isValid?Fb.create(this.loc,U).formatDurationFromString(this,M):"Invalid Duration"}toHuman(M={}){const U=Yb.map(ia=>
{const sa=this.values[ia];return k(sa)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...M,unit:ia.slice(0,-1)}).format(sa)}).filter(ia=>ia);return this.loc.listFormatter({type:"conjunction",style:M.listStyle||"narrow",...M}).format(U)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let M="P";0!==this.years&&(M+=this.years+"Y");if(0!==this.months||0!==this.quarters)M+=this.months+3*this.quarters+"M";0!==this.weeks&&(M+=this.weeks+"W");0!==this.days&&
(M+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)M+="T";0!==this.hours&&(M+=this.hours+"H");0!==this.minutes&&(M+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)M+=x(this.seconds+this.milliseconds/1E3,3)+"S";"P"===M&&(M+="T0S");return M}toISOTime(M={}){if(!this.isValid)return null;var U=this.toMillis();if(0>U||864E5<=U)return null;M={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...M};U=this.shiftTo("hours",
"minutes","seconds","milliseconds");let ia="basic"===M.format?"hhmm":"hh:mm";M.suppressSeconds&&0===U.seconds&&0===U.milliseconds||(ia+="basic"===M.format?"ss":":ss",M.suppressMilliseconds&&0===U.milliseconds||(ia+=".SSS"));U=U.toFormat(ia);M.includePrefix&&(U="T"+U);return U}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(M){if(!this.isValid)return this;M=jb.fromDurationLike(M);const U={};for(const ia of Yb)if(d(M.values,
ia)||d(this.values,ia))U[ia]=M.get(ia)+this.get(ia);return ka(this,{values:U},!0)}minus(M){if(!this.isValid)return this;M=jb.fromDurationLike(M);return this.plus(M.negate())}mapUnits(M){if(!this.isValid)return this;const U={};for(const ia of Object.keys(this.values))U[ia]=J(M(this.values[ia],ia));return ka(this,{values:U},!0)}get(M){return this[jb.normalizeUnit(M)]}set(M){if(!this.isValid)return this;M={...this.values,...L(M,jb.normalizeUnit)};return ka(this,{values:M})}reconfigure({locale:M,numberingSystem:U,
conversionAccuracy:ia,matrix:sa}={}){M={loc:this.loc.clone({locale:M,numberingSystem:U}),matrix:sa,conversionAccuracy:ia};return ka(this,M)}as(M){return this.isValid?this.shiftTo(M).get(M):NaN}normalize(){if(!this.isValid)return this;const M=this.toObject();na(this.matrix,M);return ka(this,{values:M},!0)}rescale(){if(!this.isValid)return this;var M=this.normalize().shiftToAll().toObject();const U={};for(const [ia,sa]of Object.entries(M))0!==sa&&(U[ia]=sa);return ka(this,{values:U},!0)}shiftTo(...M){if(!this.isValid||
0===M.length)return this;M=M.map(Ba=>jb.normalizeUnit(Ba));const U={},ia={},sa=this.toObject();let wa;for(const Ba of Yb)if(0<=M.indexOf(Ba)){wa=Ba;let Ja=0;for(const Wa in ia)Ja+=this.matrix[Wa][Ba]*ia[Wa],ia[Wa]=0;e(sa[Ba])&&(Ja+=sa[Ba]);const Pa=Math.trunc(Ja);U[Ba]=Pa;ia[Ba]=(1E3*Ja-1E3*Pa)/1E3;for(const Wa in sa)Yb.indexOf(Wa)>Yb.indexOf(Ba)&&da(this.matrix,sa,Wa,U,Ba)}else e(sa[Ba])&&(ia[Ba]=sa[Ba]);for(const Ba in ia)0!==ia[Ba]&&(U[wa]+=Ba===wa?ia[Ba]:ia[Ba]/this.matrix[wa][Ba]);return ka(this,
{values:U},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const M={};for(const U of Object.keys(this.values))M[U]=0===this.values[U]?0:-this.values[U];return ka(this,{values:M},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(M){if(!this.isValid||!M.isValid||!this.loc.equals(M.loc))return!1;for(const sa of Yb){var U=this.values[sa];var ia=M.values[sa];U=void 0===U||0===U?void 0===ia||0===ia:U===ia;if(!U)return!1}return!0}}class rb{constructor(M){this.s=M.start;this.e=M.end;this.invalid=M.invalid||null;this.isLuxonInterval=!0}static invalid(M,U=null){if(!M)throw new Ma("need to specify a reason the Interval is invalid");M=M instanceof Kb?M:new Kb(M,U);if(qb.throwOnInvalid)throw new ta(M);return new rb({invalid:M})}static fromDateTimes(M,
U){M=Ya(M);U=Ya(U);var ia=M&&M.isValid?U&&U.isValid?U<M?rb.invalid("end before start",`The end of an interval must be after its start, but you had start=${M.toISO()} and end=${U.toISO()}`):null:rb.invalid("missing or invalid end"):rb.invalid("missing or invalid start");return null==ia?new rb({start:M,end:U}):ia}static after(M,U){U=jb.fromDurationLike(U);M=Ya(M);return rb.fromDateTimes(M,M.plus(U))}static before(M,U){U=jb.fromDurationLike(U);M=Ya(M);return rb.fromDateTimes(M.minus(U),M)}static fromISO(M,
U){const [ia,sa]=(M||"").split("/",2);if(ia&&sa){let Ja;try{var wa=Za.fromISO(ia,U);Ja=wa.isValid}catch(Wa){Ja=!1}let Pa;try{var Ba=Za.fromISO(sa,U);Pa=Ba.isValid}catch(Wa){Pa=!1}if(Ja&&Pa)return rb.fromDateTimes(wa,Ba);if(Ja){if(Ba=jb.fromISO(sa,U),Ba.isValid)return rb.after(wa,Ba)}else if(Pa&&(wa=jb.fromISO(ia,U),wa.isValid))return rb.before(Ba,wa)}return rb.invalid("unparsable",`the input "${M}" can't be parsed as ISO 8601`)}static isInterval(M){return M&&M.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(M="milliseconds"){return this.isValid?this.toDuration(...[M]).get(M):NaN}count(M="milliseconds"){if(!this.isValid)return NaN;const U=this.start.startOf(M),ia=this.end.startOf(M);return Math.floor(ia.diff(U,M).get(M))+(ia.valueOf()!==this.end.valueOf())}hasSame(M){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,M):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(M){return this.isValid?this.s>M:!1}isBefore(M){return this.isValid?this.e<=M:!1}contains(M){return this.isValid?this.s<=M&&this.e>M:!1}set({start:M,end:U}={}){return this.isValid?rb.fromDateTimes(M||this.s,U||this.e):this}splitAt(...M){if(!this.isValid)return[];M=M.map(Ya).filter(Ba=>this.contains(Ba)).sort();const U=[];let {s:ia}=this,sa=0;for(;ia<this.e;){var wa=M[sa]||this.e;wa=+wa>
+this.e?this.e:wa;U.push(rb.fromDateTimes(ia,wa));ia=wa;sa+=1}return U}splitBy(M){M=jb.fromDurationLike(M);if(!this.isValid||!M.isValid||0===M.as("milliseconds"))return[];let {s:U}=this,ia=1;const sa=[];for(;U<this.e;){var wa=this.start.plus(M.mapUnits(Ba=>Ba*ia));wa=+wa>+this.e?this.e:wa;sa.push(rb.fromDateTimes(U,wa));U=wa;ia+=1}return sa}divideEqually(M){return this.isValid?this.splitBy(this.length()/M).slice(0,M):[]}overlaps(M){return this.e>M.s&&this.s<M.e}abutsStart(M){return this.isValid?+this.e===
+M.s:!1}abutsEnd(M){return this.isValid?+M.e===+this.s:!1}engulfs(M){return this.isValid?this.s<=M.s&&this.e>=M.e:!1}equals(M){return this.isValid&&M.isValid?this.s.equals(M.s)&&this.e.equals(M.e):!1}intersection(M){if(!this.isValid)return this;const U=this.s>M.s?this.s:M.s;M=this.e<M.e?this.e:M.e;return U>=M?null:rb.fromDateTimes(U,M)}union(M){return this.isValid?rb.fromDateTimes(this.s<M.s?this.s:M.s,this.e>M.e?this.e:M.e):this}static merge(M){const [U,ia]=M.sort((sa,wa)=>sa.s-wa.s).reduce(([sa,
wa],Ba)=>wa?wa.overlaps(Ba)||wa.abutsStart(Ba)?[sa,wa.union(Ba)]:[sa.concat([wa]),Ba]:[sa,Ba],[[],null]);ia&&U.push(ia);return U}static xor(M){let U=null,ia=0;const sa=[];M=M.map(wa=>[{time:wa.s,type:"s"},{time:wa.e,type:"e"}]);M=Array.prototype.concat(...M).sort((wa,Ba)=>wa.time-Ba.time);for(const wa of M)ia+="s"===wa.type?1:-1,1===ia?U=wa.time:(U&&+U!==+wa.time&&sa.push(rb.fromDateTimes(U,wa.time)),U=null);return rb.merge(sa)}difference(...M){return rb.xor([this].concat(M)).map(U=>this.intersection(U)).filter(U=>
U&&!U.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(M=ab,U={}){return this.isValid?Fb.create(this.s.loc.clone(U),M).formatInterval(this):"Invalid Interval"}toISO(M){return this.isValid?`${this.s.toISO(M)}/${this.e.toISO(M)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(M){return this.isValid?`${this.s.toISOTime(M)}/${this.e.toISOTime(M)}`:"Invalid Interval"}toFormat(M,
{separator:U=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(M)}${U}${this.e.toFormat(M)}`:"Invalid Interval"}toDuration(M,U){return this.isValid?this.e.diff(this.s,M,U):jb.invalid(this.invalidReason)}mapEndpoints(M){return rb.fromDateTimes(M(this.s),M(this.e))}}class Jc{static hasDST(M=qb.defaultZone){const U=Za.now().setZone(M).set({month:12});return!M.isUniversal&&U.offset!==U.set({month:6}).offset}static isValidIANAZone(M){return Rb.isValidZone(M)}static normalizeZone(M){return q(M,qb.defaultZone)}static months(M=
"long",{locale:U=null,numberingSystem:ia=null,locObj:sa=null,outputCalendar:wa="gregory"}={}){return(sa||sb.create(U,ia,wa)).months(M)}static monthsFormat(M="long",{locale:U=null,numberingSystem:ia=null,locObj:sa=null,outputCalendar:wa="gregory"}={}){return(sa||sb.create(U,ia,wa)).months(M,!0)}static weekdays(M="long",{locale:U=null,numberingSystem:ia=null,locObj:sa=null}={}){return(sa||sb.create(U,ia,null)).weekdays(M)}static weekdaysFormat(M="long",{locale:U=null,numberingSystem:ia=null,locObj:sa=
null}={}){return(sa||sb.create(U,ia,null)).weekdays(M,!0)}static meridiems({locale:M=null}={}){return sb.create(M).meridiems()}static eras(M="short",{locale:U=null}={}){return sb.create(U,null,"gregory").eras(M)}static features(){return{relative:c()}}}const rd={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Kd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},sd=rd.hanidec.replace(/[\[|\]]/g,"").split(""),gc=`[ ${String.fromCharCode(160)}]`,tc=new RegExp(gc,"g"),vc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Mc=null;const bd=[0,31,59,90,120,151,181,212,243,273,304,334],td=[0,31,60,91,121,152,182,213,244,274,305,335],Md={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},md={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Fd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Ld="year month day hour minute second millisecond".split(" "),Zd="weekYear weekNumber weekday hour minute second millisecond".split(" "),db="year ordinal hour minute second millisecond".split(" ");
class Za{constructor(M){const U=M.zone||qb.defaultZone;let ia=M.invalid||(Number.isNaN(M.ts)?new Kb("invalid input"):null)||(U.isValid?null:Lb(U));this.ts=k(M.ts)?qb.now():M.ts;let sa=null;var wa=null;ia||(M.old&&M.old.ts===this.ts&&M.old.zone.equals(U)?[sa,wa]=[M.old.c,M.old.o]:(wa=U.offset(this.ts),sa=Sb(this.ts,wa),sa=(ia=Number.isNaN(sa.year)?new Kb("invalid input"):null)?null:sa,wa=ia?null:wa));this._zone=U;this.loc=M.loc||sb.create();this.invalid=ia;this.weekData=null;this.c=sa;this.o=wa;this.isLuxonDateTime=
!0}static now(){return new Za({})}static local(){const [M,U]=Ub(arguments),[ia,sa,wa,Ba,Ja,Pa,Wa]=U;return kb({year:ia,month:sa,day:wa,hour:Ba,minute:Ja,second:Pa,millisecond:Wa},M)}static utc(){const [M,U]=Ub(arguments),[ia,sa,wa,Ba,Ja,Pa,Wa]=U;M.zone=Cb.utcInstance;return kb({year:ia,month:sa,day:wa,hour:Ba,minute:Ja,second:Pa,millisecond:Wa},M)}static fromJSDate(M,U={}){M="[object Date]"===Object.prototype.toString.call(M)?M.valueOf():NaN;if(Number.isNaN(M))return Za.invalid("invalid input");const ia=
q(U.zone,qb.defaultZone);return ia.isValid?new Za({ts:M,zone:ia,loc:sb.fromObject(U)}):Za.invalid(Lb(ia))}static fromMillis(M,U={}){if(e(M))return-864E13>M||864E13<M?Za.invalid("Timestamp out of range"):new Za({ts:M,zone:q(U.zone,qb.defaultZone),loc:sb.fromObject(U)});throw new Ma(`fromMillis requires a numerical input, but received a ${typeof M} with value ${M}`);}static fromSeconds(M,U={}){if(e(M))return new Za({ts:1E3*M,zone:q(U.zone,qb.defaultZone),loc:sb.fromObject(U)});throw new Ma("fromSeconds requires a numerical input");
}static fromObject(M,U={}){M=M||{};var ia=q(U.zone,qb.defaultZone);if(!ia.isValid)return Za.invalid(Lb(ia));var sa=qb.now();const wa=k(U.specificOffset)?ia.offset(sa):U.specificOffset,Ba=L(M,Tb);var Ja=!k(Ba.ordinal),Pa=!k(Ba.year),Wa=!k(Ba.month)||!k(Ba.day);Pa=Pa||Wa;var fb=Ba.weekYear||Ba.weekNumber;U=sb.fromObject(U);if((Pa||Ja)&&fb)throw new Aa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Wa&&Ja)throw new Aa("Can't mix ordinal dates with month/day");Wa=fb||Ba.weekday&&
!Pa;let Q=Sb(sa,wa);Wa?(sa=Zd,fb=md,Q=Ha(Q)):Ja?(sa=db,fb=Fd,Q=lb(Q)):(sa=Ld,fb=Md);let gb=!1;for(var cb of sa)k(Ba[cb])?Ba[cb]=gb?fb[cb]:Q[cb]:gb=!0;Wa?(cb=b(Ba.weekYear),sa=n(Ba.weekNumber,1,A(Ba.weekYear)),fb=n(Ba.weekday,1,7),cb=cb?sa?fb?!1:Sa("weekday",Ba.weekday):Sa("week",Ba.week):Sa("weekYear",Ba.weekYear)):Ja?(cb=b(Ba.year),sa=n(Ba.ordinal,1,w(Ba.year)?366:365),cb=cb?sa?!1:Sa("ordinal",Ba.ordinal):Sa("year",Ba.year)):cb=O(Ba);if(cb=cb||eb(Ba))return Za.invalid(cb);Ja=Wa?vb(Ba):Ja?mb(Ba):
Ba;const [Gb,Fa]=Ab(Ja,wa,ia);ia=new Za({ts:Gb,zone:ia,o:Fa,loc:U});return Ba.weekday&&Pa&&M.weekday!==ia.weekday?Za.invalid("mismatched weekday",`you can't specify both a weekday of ${Ba.weekday} and a date of ${ia.toISO()}`):ia}static fromISO(M,U={}){const [ia,sa]=W(M,[Sc,Bd],[kd,Xd],[zc,ld],[Wd,Yd]);return Vb(ia,sa,U,"ISO 8601",M)}static fromRFC2822(M,U={}){const [ia,sa]=W(M.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Td,Da]);return Vb(ia,sa,U,"RFC 2822",M)}static fromHTTP(M,
U={}){const [ia,sa]=W(M,[re,N],[Ud,N],[Vd,V]);return Vb(ia,sa,U,"HTTP",U)}static fromFormat(M,U,ia={}){if(k(M)||k(U))throw new Ma("fromFormat requires an input string and a format");const {locale:sa=null,numberingSystem:wa=null}=ia,Ba=sb.fromOpts({locale:sa,numberingSystem:wa,defaultToEN:!0}),{result:Ja,zone:Pa,specificOffset:Wa,invalidReason:fb}=Ua(Ba,M,U),[Q,gb,cb,Gb]=[Ja,Pa,Wa,fb];return Gb?Za.invalid(Gb):Vb(Q,gb,ia,`format ${U}`,M,cb)}static fromString(M,U,ia={}){return Za.fromFormat(M,U,ia)}static fromSQL(M,
U={}){const [ia,sa]=W(M,[mc,Bd],[Ic,Tc]);return Vb(ia,sa,U,"SQL",M)}static invalid(M,U=null){if(!M)throw new Ma("need to specify a reason the DateTime is invalid");M=M instanceof Kb?M:new Kb(M,U);if(qb.throwOnInvalid)throw new la(M);return new Za({invalid:M})}static isDateTime(M){return M&&M.isLuxonDateTime||!1}static parseFormatForOpts(M,U={}){return(M=Xa(M,sb.fromObject(U)))?M.map(ia=>ia?ia.val:null).join(""):null}static expandFormat(M,U={}){return Ra(Fb.parseFormat(M),sb.fromObject(U)).map(ia=>
ia.val).join("")}get(M){return this[M]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?
this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?yb(this).weekYear:NaN}get weekNumber(){return this.isValid?yb(this).weekNumber:NaN}get weekday(){return this.isValid?
yb(this).weekday:NaN}get ordinal(){return this.isValid?lb(this.c).ordinal:NaN}get monthShort(){return this.isValid?Jc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Jc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Jc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Jc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return w(this.year)}get daysInMonth(){return m(this.year,this.month)}get daysInYear(){return this.isValid?
w(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?A(this.weekYear):NaN}resolvedLocaleOptions(M={}){const {locale:U,numberingSystem:ia,calendar:sa}=Fb.create(this.loc.clone(M),M).resolvedOptions(this);return{locale:U,numberingSystem:ia,outputCalendar:sa}}toUTC(M=0,U={}){return this.setZone(Cb.instance(M),U)}toLocal(){return this.setZone(qb.defaultZone)}setZone(M,{keepLocalTime:U=!1,keepCalendarTime:ia=!1}={}){M=q(M,qb.defaultZone);if(M.equals(this.zone))return this;if(M.isValid){let sa=
this.ts;if(U||ia)U=M.offset(this.ts),ia=this.toObject(),[sa]=Ab(ia,U,M);return ua(this,{ts:sa,zone:M})}return Za.invalid(Lb(M))}reconfigure({locale:M,numberingSystem:U,outputCalendar:ia}={}){M=this.loc.clone({locale:M,numberingSystem:U,outputCalendar:ia});return ua(this,{loc:M})}setLocale(M){return this.reconfigure({locale:M})}set(M){if(!this.isValid)return this;M=L(M,Tb);var U=!k(M.weekYear)||!k(M.weekNumber)||!k(M.weekday);const ia=!k(M.ordinal),sa=!k(M.year),wa=!k(M.month)||!k(M.day),Ba=M.weekYear||
M.weekNumber;if((sa||wa||ia)&&Ba)throw new Aa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(wa&&ia)throw new Aa("Can't mix ordinal dates with month/day");U?U=vb({...Ha(this.c),...M}):k(M.ordinal)?(U={...this.toObject(),...M},k(M.day)&&(U.day=Math.min(m(U.year,U.month),U.day))):U=mb({...lb(this.c),...M});const [Ja,Pa]=Ab(U,this.o,this.zone);return ua(this,{ts:Ja,o:Pa})}plus(M){if(!this.isValid)return this;M=jb.fromDurationLike(M);return ua(this,Pb(this,M))}minus(M){if(!this.isValid)return this;
M=jb.fromDurationLike(M).negate();return ua(this,Pb(this,M))}startOf(M){if(!this.isValid)return this;const U={};M=jb.normalizeUnit(M);switch(M){case "years":U.month=1;case "quarters":case "months":U.day=1;case "weeks":case "days":U.hour=0;case "hours":U.minute=0;case "minutes":U.second=0;case "seconds":U.millisecond=0}"weeks"===M&&(U.weekday=1);"quarters"===M&&(U.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(U)}endOf(M){return this.isValid?this.plus({[M]:1}).startOf(M).minus(1):this}toFormat(M,
U={}){return this.isValid?Fb.create(this.loc.redefaultToEN(U)).formatDateTimeFromString(this,M):"Invalid DateTime"}toLocaleString(M=ab,U={}){return this.isValid?Fb.create(this.loc.clone(U),M).formatDateTime(this):"Invalid DateTime"}toLocaleParts(M={}){return this.isValid?Fb.create(this.loc.clone(M),M).formatDateTimeParts(this):[]}toISO({format:M="extended",suppressSeconds:U=!1,suppressMilliseconds:ia=!1,includeOffset:sa=!0,extendedZone:wa=!1}={}){if(!this.isValid)return null;M="extended"===M;let Ba=
pc(this,M);return Ba=Ba+"T"+Db(this,M,U,ia,sa,wa)}toISODate({format:M="extended"}={}){return this.isValid?pc(this,"extended"===M):null}toISOWeekDate(){return hc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:M=!1,suppressSeconds:U=!1,includeOffset:ia=!0,includePrefix:sa=!1,extendedZone:wa=!1,format:Ba="extended"}={}){return this.isValid?(sa?"T":"")+Db(this,"extended"===Ba,U,M,ia,wa):null}toRFC2822(){return hc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return hc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
pc(this,!0):null}toSQLTime({includeOffset:M=!0,includeZone:U=!1,includeOffsetSpace:ia=!0}={}){let sa="HH:mm:ss.SSS";if(U||M)ia&&(sa+=" "),U?sa+="z":M&&(sa+="ZZ");return hc(this,sa,!0)}toSQL(M={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(M)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(M={}){if(!this.isValid)return{};const U={...this.c};M.includeConfig&&(U.outputCalendar=this.outputCalendar,U.numberingSystem=this.loc.numberingSystem,U.locale=this.loc.locale);return U}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(M,U="milliseconds",ia={}){if(!this.isValid||!M.isValid)return jb.invalid("created by diffing an invalid DateTime");ia={locale:this.locale,numberingSystem:this.numberingSystem,...ia};
const sa=(Array.isArray(U)?U:[U]).map(jb.normalizeUnit);U=M.valueOf()>this.valueOf();M=ja(U?this:M,U?M:this,sa,ia);return U?M.negate():M}diffNow(M="milliseconds",U={}){return this.diff(Za.now(),M,U)}until(M){return this.isValid?rb.fromDateTimes(this,M):this}hasSame(M,U){if(!this.isValid)return!1;const ia=M.valueOf();M=this.setZone(M.zone,{keepLocalTime:!0});return M.startOf(U)<=ia&&ia<=M.endOf(U)}equals(M){return this.isValid&&M.isValid&&this.valueOf()===M.valueOf()&&this.zone.equals(M.zone)&&this.loc.equals(M.loc)}toRelative(M=
{}){if(!this.isValid)return null;const U=M.base||Za.fromObject({},{zone:this.zone}),ia=M.padding?this<U?-M.padding:M.padding:0;let sa="years months days hours minutes seconds".split(" "),wa=M.unit;Array.isArray(M.unit)&&(sa=M.unit,wa=void 0);return Bb(U,this.plus(ia),{...M,numeric:"always",units:sa,unit:wa})}toRelativeCalendar(M={}){return this.isValid?Bb(M.base||Za.fromObject({},{zone:this.zone}),this,{...M,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...M){if(!M.every(Za.isDateTime))throw new Ma("min requires all arguments be DateTimes");
return f(M,U=>U.valueOf(),Math.min)}static max(...M){if(!M.every(Za.isDateTime))throw new Ma("max requires all arguments be DateTimes");return f(M,U=>U.valueOf(),Math.max)}static fromFormatExplain(M,U,ia={}){const {locale:sa=null,numberingSystem:wa=null}=ia;ia=sb.fromOpts({locale:sa,numberingSystem:wa,defaultToEN:!0});return Ua(ia,M,U)}static fromStringExplain(M,U,ia={}){return Za.fromFormatExplain(M,U,ia)}static get DATE_SHORT(){return ab}static get DATE_MED(){return ob}static get DATE_MED_WITH_WEEKDAY(){return pb}static get DATE_FULL(){return nb}static get DATE_HUGE(){return zb}static get TIME_SIMPLE(){return Mb}static get TIME_WITH_SECONDS(){return qc}static get TIME_WITH_SHORT_OFFSET(){return cd}static get TIME_WITH_LONG_OFFSET(){return rc}static get TIME_24_SIMPLE(){return Wb}static get TIME_24_WITH_SECONDS(){return ud}static get TIME_24_WITH_SHORT_OFFSET(){return wc}static get TIME_24_WITH_LONG_OFFSET(){return vd}static get DATETIME_SHORT(){return xc}static get DATETIME_SHORT_WITH_SECONDS(){return Ec}static get DATETIME_MED(){return dd}static get DATETIME_MED_WITH_SECONDS(){return Fc}static get DATETIME_MED_WITH_WEEKDAY(){return Nd}static get DATETIME_FULL(){return Gc}static get DATETIME_FULL_WITH_SECONDS(){return Od}static get DATETIME_HUGE(){return ed}static get DATETIME_HUGE_WITH_SECONDS(){return Nc}}
l.DateTime=Za;l.Duration=jb;l.FixedOffsetZone=Cb;l.IANAZone=Rb;l.Info=Jc;l.Interval=rb;l.SystemZone=Cc;l.Zone=ec})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(l,h,D){var B={exports:{}};B.exports;(function(v){(function(C,t){v.exports&&(v.exports=t())})(D.commonjsGlobal,function(){function C(q,k,e,b){q=Error.call(this,q);Object.setPrototypeOf&&Object.setPrototypeOf(q,C.prototype);q.expected=k;q.found=e;
q.location=b;q.name="SyntaxError";return q}function t(q,k,e){e=e||" ";if(q.length>k)return q;k-=q.length;e+=e.repeat(k);return q+e.slice(0,k)}(function(q,k){function e(){this.constructor=q}e.prototype=k.prototype;q.prototype=new e})(C,Error);C.prototype.format=function(q){var k="Error: "+this.message;if(this.location){var e=null,b;for(b=0;b<q.length;b++)if(q[b].source===this.location.source){e=q[b].text.split(/\r\n|\n|\r/g);break}q=this.location.start;b=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(q):q;var c=this.location.source+":"+b.line+":"+b.column;if(e){var f=this.location.end,a=t("",b.line.toString().length," ");e=e[q.line-1];f=(q.line===f.line?f.column:e.length+1)-q.column||1;k+="\n --\x3e "+c+"\n"+a+" |\n"+b.line+" | "+e+"\n"+a+" | "+t("",q.column-1," ")+t("",f,"^")}else k+="\n at "+c}return k};C.buildMessage=function(q,k){function e(d){return d.charCodeAt(0).toString(16).toUpperCase()}function b(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(n){return"\\x0"+e(n)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(n){return"\\x"+e(n)})}function c(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(n){return"\\x0"+e(n)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(n){return"\\x"+e(n)})}function f(d){return a[d.type](d)}
var a={literal:function(d){return'"'+b(d.text)+'"'},class:function(d){var n=d.parts.map(function(r){return Array.isArray(r)?c(r[0])+"-"+c(r[1]):c(r)});return"["+(d.inverted?"^":"")+n.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(d){return d.description}};return"Expected "+function(d){d=d.map(f);var n,r;d.sort();if(0<d.length){for(r=n=1;n<d.length;n++)d[n-1]!==d[n]&&(d[r]=d[n],r++);d.length=r}switch(d.length){case 1:return d[0];case 2:return d[0]+
" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}(q)+" but "+(k?'"'+b(k)+'"':"end of input")+" found."};return{SyntaxError:C,parse:function(q,k){function e(ba,ha){return{type:"literal",text:ba,ignoreCase:ha}}function b(ba,ha,pa){return{type:"class",parts:ba,inverted:ha,ignoreCase:pa}}function c(ba){var ha=gb[ba],pa;if(!ha){for(pa=ba-1;!gb[pa];)pa--;ha=gb[pa];for(ha={line:ha.line,column:ha.column};pa<ba;)10===q.charCodeAt(pa)?(ha.line++,ha.column=1):ha.column++,pa++;gb[ba]=
ha}return ha}function f(ba,ha,pa){var Ia=c(ba),Qa=c(ha);ba={source:eb,start:{offset:ba,line:Ia.line,column:Ia.column},end:{offset:ha,line:Qa.line,column:Qa.column}};pa&&eb&&"function"===typeof eb.offset&&(ba.start=eb.offset(ba.start),ba.end=eb.offset(ba.end));return ba}function a(ba){Q<cb||(Q>cb&&(cb=Q,Gb=[]),Gb.push(ba))}function d(){var ba=Q;Ha();var ha=r();ha!==O?(Ha(),ba=ha):(Q=ba,ba=O);return ba}function n(){var ba=Q;var ha=r();if(ha!==O){ba=[];var pa=Q;var Ia=Ha();var Qa=Sa();if(Qa!==O){var hb=
Ha();var ib=r();ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)}else Q=pa,pa=O;for(;pa!==O;)ba.push(pa),pa=Q,Ia=Ha(),Qa=Sa(),Qa!==O?(hb=Ha(),ib=r(),ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)):(Q=pa,pa=O);pa={type:"expression-list"};ha=[ha];for(Ia=0;Ia<ba.length;Ia++)ha.push(ba[Ia][3]);pa.value=ha;ba=pa}else Q=ba,ba=O;return ba}function r(){var ba=Q;var ha=p();if(ha!==O){ba=[];var pa=Q;var Ia=Ha();var Qa=na();if(Qa!==O){var hb=Ha();var ib=p();ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)}else Q=pa,pa=O;for(;pa!==O;)ba.push(pa),
pa=Q,Ia=Ha(),Qa=na(),Qa!==O?(hb=Ha(),ib=p(),ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)):(Q=pa,pa=O);ba=mb(ha,ba)}else Q=ba,ba=O;return ba}function p(){var ba=Q;var ha=g();if(ha!==O){ba=[];var pa=Q;var Ia=Ha();var Qa=da();if(Qa!==O){var hb=Ha();var ib=g();ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)}else Q=pa,pa=O;for(;pa!==O;)ba.push(pa),pa=Q,Ia=Ha(),Qa=da(),Qa!==O?(hb=Ha(),ib=g(),ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)):(Q=pa,pa=O);ba=mb(ha,ba)}else Q=ba,ba=O;return ba}function g(){var ba=Q;var ha=ka();if(ha===
O){ha=Q;if(33===q.charCodeAt(Q)){var pa=ua;Q++}else pa=O,0===Fa&&a(pe);if(pa!==O){var Ia=Q;Fa++;if(61===q.charCodeAt(Q)){var Qa=Hb;Q++}else Qa=O,0===Fa&&a(qd);Fa--;Qa===O?Ia=void 0:(Q=Ia,Ia=O);Ia!==O?ha=pa=[pa,Ia]:(Q=ha,ha=O)}else Q=ha,ha=O}ha!==O?(pa=Ha(),Ia=g(),Ia!==O?ba={type:"unary-expression",operator:"NOT",expr:Ia}:(Q=ba,ba=O)):(Q=ba,ba=O);if(ba===O){ha=Q;ba=m();if(ba!==O){Ha();ha=[];pa=Q;Ia=Ha();Qa=u();if(Qa!==O){var hb=Ha();var ib=m();ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)}else Q=pa,pa=O;
if(pa!==O)for(;pa!==O;)ha.push(pa),pa=Q,Ia=Ha(),Qa=u(),Qa!==O?(hb=Ha(),ib=m(),ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)):(Q=pa,pa=O);else ha=O;ha!==O&&(ha={type:"arithmetic",tail:ha});ha===O&&(ha=Q,pa=w(),pa!==O?(Ha(),Ia=$a(),Ia!==O?(Ha(),Ia=n(),Ia!==O?(Ha(),Qa=bb(),Qa!==O?ha={op:pa,right:Ia}:(Q=ha,ha=O)):(Q=ha,ha=O)):(Q=ha,ha=O)):(Q=ha,ha=O),ha===O&&(ha=Q,pa=w(),pa!==O?(Ha(),Ia=$a(),Ia!==O?(Ha(),Ia=bb(),Ia!==O?ha={op:pa,right:{type:"expression-list",value:[]}}:(Q=ha,ha=O)):(Q=ha,ha=O)):(Q=ha,ha=O),
ha===O&&(ha=Q,pa=w(),pa!==O?(Ha(),Ia=G(),Ia!==O?ha={op:pa,right:Ia}:(Q=ha,ha=O)):(Q=ha,ha=O))),ha===O&&(ha=Q,Qa=ka(),Qa!==O?(Ha(),pa=X(),pa!==O?(Ha(),Ia=m(),Ia!==O?(Ha(),hb=da(),hb!==O?(Ha(),Qa=m(),Qa!==O?ha={op:"NOT"+pa,right:{type:"expression-list",value:[Ia,Qa]}}:(Q=ha,ha=O)):(Q=ha,ha=O)):(Q=ha,ha=O)):(Q=ha,ha=O)):(Q=ha,ha=O),ha===O&&(ha=Q,Qa=X(),Qa!==O?(Ha(),pa=m(),pa!==O?(Ha(),Ia=da(),Ia!==O?(Ha(),hb=m(),hb!==O?ha={op:Qa,right:{type:"expression-list",value:[pa,hb]}}:(Q=ha,ha=O)):(Q=ha,ha=O)):
(Q=ha,ha=O)):(Q=ha,ha=O)),ha===O&&(ha=Q,pa=N(),pa!==O?(Ha(),Ia=ka(),Ia!==O?(Ha(),Ia=m(),Ia!==O?ha={op:pa+"NOT",right:Ia}:(Q=ha,ha=O)):(Q=ha,ha=O)):(Q=ha,ha=O),ha===O&&(ha=Q,pa=N(),pa!==O?(Ha(),Ia=m(),Ia!==O?ha={op:pa,right:Ia}:(Q=ha,ha=O)):(Q=ha,ha=O)),ha===O&&(ha=Q,pa=x(),pa!==O?(Ha(),Ia=T(),Ia!==O?(Ha(),Qa=Q,q.substr(Q,6).toLowerCase()===pb?(hb=q.substr(Q,6),Q+=6):(hb=O,0===Fa&&a(Bd)),hb!==O?(hb=Q,Fa++,ib=L(),Fa--,ib===O?hb=void 0:(Q=hb,hb=O),hb!==O?Qa="ESCAPE":(Q=Qa,Qa=O)):(Q=Qa,Qa=O),Qa!==O?(Ha(),
Qa=R(),Qa!==O?ha={op:pa,right:Ia,escape:Qa.value}:(Q=ha,ha=O)):(Q=ha,ha=O)):(Q=ha,ha=O)):(Q=ha,ha=O),ha===O&&(ha=Q,pa=x(),pa!==O?(Ha(),Ia=T(),Ia!==O?ha={op:pa,right:Ia,escape:""}:(Q=ha,ha=O)):(Q=ha,ha=O))))));ha===O&&(ha=null);""==ha||void 0==ha||null==ha?ha=ba:(pa=null,ha=pa="arithmetic"==ha.type?mb(ba,ha.tail):lb(ha.op,ba,ha.right,ha.escape))}else Q=ha,ha=O;ba=ha}return ba}function u(){if(q.substr(Q,2)===Sb){var ba=Sb;Q+=2}else ba=O,0===Fa&&a(Dc);ba===O&&(62===q.charCodeAt(Q)?(ba=Ab,Q++):(ba=O,
0===Fa&&a(oc)),ba===O&&(q.substr(Q,2)===Pb?(ba=Pb,Q+=2):(ba=O,0===Fa&&a(ic)),ba===O&&(q.substr(Q,2)===Vb?(ba=Vb,Q+=2):(ba=O,0===Fa&&a(fc)),ba===O&&(60===q.charCodeAt(Q)?(ba=hc,Q++):(ba=O,0===Fa&&a(Id)),ba===O&&(61===q.charCodeAt(Q)?(ba=Hb,Q++):(ba=O,0===Fa&&a(qd)),ba===O&&(q.substr(Q,2)===pc?(ba=pc,Q+=2):(ba=O,0===Fa&&a(Hd))))))));return ba}function x(){var ba=ba=Q;var ha=ka();if(ha!==O){var pa=Ha();var Ia=V();Ia!==O?ba=ha=[ha,pa,Ia]:(Q=ba,ba=O)}else Q=ba,ba=O;ba!==O&&(ba=ba[0]+" "+ba[2]);ba===O&&
(ba=V());return ba}function w(){var ba=ba=Q;var ha=ka();if(ha!==O){var pa=Ha();var Ia=Da();Ia!==O?ba=ha=[ha,pa,Ia]:(Q=ba,ba=O)}else Q=ba,ba=O;ba!==O&&(ba=ba[0]+" "+ba[2]);ba===O&&(ba=Da());return ba}function m(){var ba=Q;var ha=A();if(ha!==O){ba=[];var pa=Q;var Ia=Ha();var Qa=z();if(Qa!==O){var hb=Ha();var ib=A();ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)}else Q=pa,pa=O;for(;pa!==O;)ba.push(pa),pa=Q,Ia=Ha(),Qa=z(),Qa!==O?(hb=Ha(),ib=A(),ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)):(Q=pa,pa=O);ba=mb(ha,ba)}else Q=
ba,ba=O;return ba}function z(){if(43===q.charCodeAt(Q)){var ba=Db;Q++}else ba=O,0===Fa&&a(yd);ba===O&&(45===q.charCodeAt(Q)?(ba=Tb,Q++):(ba=O,0===Fa&&a(Fb)),ba===O&&(q.substr(Q,2)===kb?(ba=kb,Q+=2):(ba=O,0===Fa&&a(Kb))));return ba}function A(){var ba=Q;var ha=E();if(ha!==O){ba=[];var pa=Q;var Ia=Ha();var Qa=H();if(Qa!==O){var hb=Ha();var ib=E();ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,pa=O)}else Q=pa,pa=O;for(;pa!==O;)ba.push(pa),pa=Q,Ia=Ha(),Qa=H(),Qa!==O?(hb=Ha(),ib=E(),ib!==O?pa=Ia=[Ia,Qa,hb,ib]:(Q=pa,
pa=O)):(Q=pa,pa=O);ba=mb(ha,ba)}else Q=ba,ba=O;return ba}function H(){if(42===q.charCodeAt(Q)){var ba=Bb;Q++}else ba=O,0===Fa&&a(lc);ba===O&&(47===q.charCodeAt(Q)?(ba=Ub,Q++):(ba=O,0===Fa&&a(Nb)));return ba}function E(){var ba=R();if(ba===O){var ha=Q;var pa=Q;var Ia=ca();if(Ia!==O){var Qa=qa();if(Qa!==O){var hb=ya();hb!==O?pa=parseFloat(Ia+Qa+hb):(Q=pa,pa=O)}else Q=pa,pa=O}else Q=pa,pa=O;pa===O&&(pa=Q,Ia=ca(),Ia!==O?(Qa=qa(),Qa!==O?pa=parseFloat(Ia+Qa):(Q=pa,pa=O)):(Q=pa,pa=O),pa===O&&(pa=Q,Ia=ca(),
Ia!==O?(Qa=ya(),Qa!==O?pa=parseFloat(Ia+Qa):(Q=pa,pa=O)):(Q=pa,pa=O),pa===O&&(pa=Q,Ia=ca(),Ia!==O&&(Ia=parseFloat(Ia)),pa=Ia)));var ib=pa;if(ib!==O){var Ce=Q;Fa++;var Lf=J();Fa--;Lf===O?Ce=void 0:(Q=Ce,Ce=O);Ce!==O?ha={type:"number",value:ib}:(Q=ha,ha=O)}else Q=ha,ha=O;ba=ha;if(ba===O){var se=Q;var $d=Q;if(q.substr(Q,4).toLowerCase()===Oa){var De=q.substr(Q,4);Q+=4}else De=O,0===Fa&&a(Vd);if(De!==O){var te=Q;Fa++;var Mf=L();Fa--;Mf===O?te=void 0:(Q=te,te=O);te!==O?$d=De=[De,te]:(Q=$d,$d=O)}else Q=
$d,$d=O;var Gd=$d;Gd!==O&&(Gd={type:"boolean",value:!0});se=Gd;if(se===O){se=Q;var ae=Q;if(q.substr(Q,5).toLowerCase()===Ma){var Ee=q.substr(Q,5);Q+=5}else Ee=O,0===Fa&&a(Sc);if(Ee!==O){var ue=Q;Fa++;var Nf=L();Fa--;Nf===O?ue=void 0:(Q=ue,ue=O);ue!==O?ae=Ee=[Ee,ue]:(Q=ae,ae=O)}else Q=ae,ae=O;Gd=ae;Gd!==O&&(Gd={type:"boolean",value:!1});se=Gd}ba=se;if(ba===O){var be=Q;if(q.substr(Q,4).toLowerCase()===Aa){var Fe=q.substr(Q,4);Q+=4}else Fe=O,0===Fa&&a(Ud);if(Fe!==O){var ve=Q;Fa++;var Of=L();Fa--;Of===
O?ve=void 0:(Q=ve,ve=O);ve!==O?be=Fe=[Fe,ve]:(Q=be,be=O)}else Q=be,be=O;var Ze=be;Ze!==O&&(Ze={type:"null",value:null});ba=Ze;if(ba===O){var ce=Q;if(ra()!==O){Ha();var lf=T();lf!==O?ce={type:"date",value:lf.value}:(Q=ce,ce=O)}else Q=ce,ce=O;ba=ce;if(ba===O){var de=Q;if(ma()!==O){Ha();var mf=T();mf!==O?de={type:"timestamp",value:mf.value}:(Q=de,de=O)}else Q=de,de=O;ba=de;if(ba===O){var Ib=Q;var $e=va();if($e!==O){Ha();if(45===q.charCodeAt(Q)){var Vc=Tb;Q++}else Vc=O,0===Fa&&a(Fb);Vc===O&&(43===q.charCodeAt(Q)?
(Vc=Db,Q++):(Vc=O,0===Fa&&a(yd)));if(Vc!==O){Ha();var we=T();if(we!==O){Ha();var nf=P();nf!==O?Ib={type:"interval",value:we,qualifier:nf,op:Vc}:(Q=Ib,Ib=O)}else Q=Ib,Ib=O}else Q=Ib,Ib=O}else Q=Ib,Ib=O;Ib===O&&(Ib=Q,$e=va(),$e!==O?(Ha(),Vc=T(),Vc!==O?(Ha(),we=P(),we!==O?Ib={type:"interval",value:Vc,qualifier:we,op:""}:(Q=Ib,Ib=O)):(Q=Ib,Ib=O)):(Q=Ib,Ib=O));ba=Ib}}}}}}var tb=ba;if(tb===O){var ac=Q;var ee=Q;if(q.substr(Q,7).toLowerCase()===ud){var of=q.substr(Q,7);Q+=7}else of=O,0===Fa&&a(Uc);if(of!==
O){var Ge=Q;Fa++;var Pf=L();Fa--;Pf===O?Ge=void 0:(Q=Ge,Ge=O);Ge!==O?ee="EXTRACT":(Q=ee,ee=O)}else Q=ee,ee=O;if(ee!==O){Ha();var Qf=$a();if(Qf!==O){Ha();var Ac=za();Ac===O&&(Ac=Ea(),Ac===O&&(Ac=Ga(),Ac===O&&(Ac=Na(),Ac===O&&(Ac=Ka(),Ac===O&&(Ac=La())))));var pf=Ac;if(pf!==O){Ha();var Rf=fa();if(Rf!==O){Ha();var qf=r();if(qf!==O){Ha();var Sf=bb();Sf!==O?ac={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(Q=ac,ac=O)}else Q=ac,ac=O}else Q=ac,ac=O}else Q=
ac,ac=O}else Q=ac,ac=O}else Q=ac,ac=O;tb=ac;if(tb===O){var bc=Q;var fe=Q;if(q.substr(Q,9).toLowerCase()===Wb){var rf=q.substr(Q,9);Q+=9}else rf=O,0===Fa&&a(Tc);if(rf!==O){var He=Q;Fa++;var Tf=L();Fa--;Tf===O?He=void 0:(Q=He,He=O);He!==O?fe="SUBSTRING":(Q=fe,fe=O)}else Q=fe,fe=O;if(fe!==O){Ha();var Uf=$a();if(Uf!==O){Ha();var af=r();if(af!==O){Ha();var Vf=fa();if(Vf!==O){Ha();var bf=r();if(bf!==O){Ha();var Wc=Q;var ge=Q;if(q.substr(Q,3).toLowerCase()===rc){var sf=q.substr(Q,3);Q+=3}else sf=O,0===Fa&&
a(Ic);if(sf!==O){var Ie=Q;Fa++;var Wf=L();Fa--;Wf===O?Ie=void 0:(Q=Ie,Ie=O);Ie!==O?ge="FOR":(Q=ge,ge=O)}else Q=ge,ge=O;var xe=ge;if(xe!==O){var Xf=Ha();var tf=r();if(tf!==O){var Yf=Ha();Wc=xe=[xe,Xf,tf,Yf]}else Q=Wc,Wc=O}else Q=Wc,Wc=O;Wc===O&&(Wc=null);xe=bb();xe!==O?bc={type:"function",name:"substring",args:{type:"expression-list",value:Wc?[af,bf,Wc[2]]:[af,bf]}}:(Q=bc,bc=O)}else Q=bc,bc=O}else Q=bc,bc=O}else Q=bc,bc=O}else Q=bc,bc=O}else Q=bc,bc=O;tb=bc;if(tb===O){var wb=Q;var cf=ja();if(cf!==
O){Ha();var df=$a();if(df!==O){Ha();var Xc=K();Xc===O&&(Xc=null);Ha();var ye=r();if(ye!==O){Ha();var ef=fa();if(ef!==O){Ha();var uf=r();if(uf!==O){Ha();var Zf=bb();Zf!==O?wb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Xc?"BOTH":Xc},ye,uf]}}:(Q=wb,wb=O)}else Q=wb,wb=O}else Q=wb,wb=O}else Q=wb,wb=O}else Q=wb,wb=O}else Q=wb,wb=O;wb===O&&(wb=Q,cf=ja(),cf!==O?(Ha(),df=$a(),df!==O?(Ha(),Xc=K(),Xc===O&&(Xc=null),Ha(),ye=r(),ye!==O?(Ha(),ef=bb(),ef!==O?wb={type:"function",
name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Xc?"BOTH":Xc},ye]}}:(Q=wb,wb=O)):(Q=wb,wb=O)):(Q=wb,wb=O)):(Q=wb,wb=O));tb=wb;if(tb===O){var cc=Q;var he=Q;if(q.substr(Q,8).toLowerCase()===vd){var vf=q.substr(Q,8);Q+=8}else vf=O,0===Fa&&a(Ed);if(vf!==O){var Je=Q;Fa++;var $f=L();Fa--;$f===O?Je=void 0:(Q=Je,Je=O);Je!==O?he="POSITION":(Q=he,he=O)}else Q=he,he=O;if(he!==O){Ha();var ag=$a();if(ag!==O){Ha();var wf=r();if(wf!==O){Ha();var bg=Da();if(bg!==O){Ha();var xf=r();if(xf!==
O){Ha();var cg=bb();cg!==O?cc={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(Q=cc,cc=O)}else Q=cc,cc=O}else Q=cc,cc=O}else Q=cc,cc=O}else Q=cc,cc=O}else Q=cc,cc=O;tb=cc;if(tb===O){var dc=Q;var ie=Q;if(q.substr(Q,4).toLowerCase()===Gc){var yf=q.substr(Q,4);Q+=4}else yf=O,0===Fa&&a(rd);if(yf!==O){var Ke=Q;Fa++;var dg=L();Fa--;dg===O?Ke=void 0:(Q=Ke,Ke=O);Ke!==O?ie="CAST":(Q=ie,ie=O)}else Q=ie,ie=O;if(ie!==O){Ha();var eg=$a();if(eg!==O){Ha();var zf=r();if(zf!==O){Ha();
var je=Q;if(q.substr(Q,2).toLowerCase()===Od){var Af=q.substr(Q,2);Q+=2}else Af=O,0===Fa&&a(Kd);if(Af!==O){var Le=Q;Fa++;var fg=L();Fa--;fg===O?Le=void 0:(Q=Le,Le=O);Le!==O?je="AS":(Q=je,je=O)}else Q=je,je=O;var gg=je;if(gg!==O){Ha();var ub=Q;var ke=Q;if(q.substr(Q,7).toLowerCase()===ed){var Bf=q.substr(Q,7);Q+=7}else Bf=O,0===Fa&&a(sd);if(Bf!==O){var Me=Q;Fa++;var hg=L();Fa--;hg===O?Me=void 0:(Q=Me,Me=O);Me!==O?ke="INTEGER":(Q=ke,ke=O)}else Q=ke,ke=O;var xb=ke;xb!==O&&(xb={type:"data-type",value:{type:"integer"}});
ub=xb;if(ub===O){ub=Q;var le=Q;if(q.substr(Q,8).toLowerCase()===Nc){var Cf=q.substr(Q,8);Q+=8}else Cf=O,0===Fa&&a(gc);if(Cf!==O){var Ne=Q;Fa++;var ig=L();Fa--;ig===O?Ne=void 0:(Q=Ne,Ne=O);Ne!==O?le="SMALLINT":(Q=le,le=O)}else Q=le,le=O;xb=le;xb!==O&&(xb={type:"data-type",value:{type:"smallint"}});ub=xb;if(ub===O){ub=Q;var me=Q;if(q.substr(Q,5).toLowerCase()===ec){var Df=q.substr(Q,5);Q+=5}else Df=O,0===Fa&&a(tc);if(Df!==O){var Oe=Q;Fa++;var jg=L();Fa--;jg===O?Oe=void 0:(Q=Oe,Oe=O);Oe!==O?me="FLOAT":
(Q=me,me=O)}else Q=me,me=O;xb=me;xb!==O&&(xb={type:"data-type",value:{type:"float"}});ub=xb;if(ub===O){ub=Q;var ne=Q;if(q.substr(Q,4).toLowerCase()===yc){var Ef=q.substr(Q,4);Q+=4}else Ef=O,0===Fa&&a(vc);if(Ef!==O){var Pe=Q;Fa++;var kg=L();Fa--;kg===O?Pe=void 0:(Q=Pe,Pe=O);Pe!==O?ne="REAL":(Q=ne,ne=O)}else Q=ne,ne=O;xb=ne;xb!==O&&(xb={type:"data-type",value:{type:"real"}});ub=xb;if(ub===O&&(ub=Q,xb=ra(),xb!==O&&(xb={type:"data-type",value:{type:"date"}}),ub=xb,ub===O&&(ub=Q,xb=ma(),xb!==O&&(xb={type:"data-type",
value:{type:"timestamp"}}),ub=xb,ub===O))){ub=Q;var oe=Q;if(q.substr(Q,7).toLowerCase()===Cc){var Ff=q.substr(Q,7);Q+=7}else Ff=O,0===Fa&&a(Mc);if(Ff!==O){var Qe=Q;Fa++;var lg=L();Fa--;lg===O?Qe=void 0:(Q=Qe,Qe=O);Qe!==O?oe="VARCHAR":(Q=oe,oe=O)}else Q=oe,oe=O;xb=oe;if(xb!==O){Ha();var mg=$a();if(mg!==O){Ha();var Gf=xa();if(Gf!==O){Ha();var ng=bb();ng!==O?ub={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(Q=ub,ub=O)}else Q=ub,ub=O}else Q=ub,ub=O}else Q=ub,ub=O}}}}var Hf=ub;if(Hf!==O){Ha();
var og=bb();og!==O?dc={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(Q=dc,dc=O)}else Q=dc,dc=O}else Q=dc,dc=O}else Q=dc,dc=O}else Q=dc,dc=O}else Q=dc,dc=O;tb=dc;if(tb===O){var nd=Q;var Re;var Bc=Q;Bc=Re=F();if(Bc===O)if(Bc=Q,96===q.charCodeAt(Q)?(Re=Hc,Q++):(Re=O,0===Fa&&a(Wa)),Re!==O){var Se=[];if($c.test(q.charAt(Q))){var Yc=q.charAt(Q);Q++}else Yc=O,0===Fa&&a(fb);if(Yc!==O)for(;Yc!==O;)Se.push(Yc),$c.test(q.charAt(Q))?(Yc=q.charAt(Q),Q++):(Yc=O,0===Fa&&a(fb));else Se=
O;Se!==O?(96===q.charCodeAt(Q)?(Yc=Hc,Q++):(Yc=O,0===Fa&&a(Wa)),Yc!==O?Bc=Se.join(""):(Q=Bc,Bc=O)):(Q=Bc,Bc=O)}else Q=Bc,Bc=O;var If=Bc;if(If!==O){Ha();var pg=$a();if(pg!==O){Ha();var Te=n();Te===O&&(Te=null);Ha();var qg=bb();qg!==O?nd={type:"function",name:If,args:Te?Te:{type:"expression-list",value:[]}}:(Q=nd,nd=O)}else Q=nd,nd=O}else Q=nd,nd=O;tb=nd;if(tb===O){var Kc;var Jb=Q;var ff=Va();if(ff!==O){Ha();var ze=r();if(ze!==O){Ha();var Ae=[];for(Kc=S();Kc!==O;)Ae.push(Kc),Kc=S();Kc=Ha();var Ue=Ra();
Ue!==O?Jb={type:"case-expression",format:"simple",operand:ze,clauses:Ae,else:null}:(Q=Jb,Jb=O)}else Q=Jb,Jb=O}else Q=Jb,Jb=O;if(Jb===O)if(Jb=Q,ff=Va(),ff!==O)if(Ha(),ze=r(),ze!==O){Ha();Ae=[];for(Kc=S();Kc!==O;)Ae.push(Kc),Kc=S();Kc=Ha();Ue=Z();if(Ue!==O){Ha();var rg=Ra();rg!==O?Jb={type:"case-expression",format:"simple",operand:ze,clauses:Ae,else:Ue.value}:(Q=Jb,Jb=O)}else Q=Jb,Jb=O}else Q=Jb,Jb=O;else Q=Jb,Jb=O;var gf=Jb;if(gf===O){var Lc;var Zb=Q;var hf=Va();if(hf!==O){Ha();var Be=[];for(Lc=W();Lc!==
O;)Be.push(Lc),Lc=W();Lc=Ha();var Ve=Ra();Ve!==O?Zb={type:"case-expression",format:"searched",clauses:Be,else:null}:(Q=Zb,Zb=O)}else Q=Zb,Zb=O;if(Zb===O)if(Zb=Q,hf=Va(),hf!==O){Ha();Be=[];for(Lc=W();Lc!==O;)Be.push(Lc),Lc=W();Lc=Ha();Ve=Z();if(Ve!==O){Ha();var sg=Ra();sg!==O?Zb={type:"case-expression",format:"searched",clauses:Be,else:Ve.value}:(Q=Zb,Zb=O)}else Q=Zb,Zb=O}else Q=Zb,Zb=O;gf=Zb}tb=gf;if(tb===O){var We;var Xe=Q;var Jf=J();if(Jf!==O){var Kf=[];for(We=I();We!==O;)Kf.push(We),We=I();Xe=
Jf+Kf.join("")}else Q=Xe,Xe=O;var Ye=Xe;if(Ye!==O){var jf=Ye;Ye=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}tb=Ye;if(tb===O&&(tb=G(),tb===O)){tb=Q;var tg=$a();if(tg!==O){Ha();var kf=r();if(kf!==O){Ha();var ug=bb();ug!==O?(kf.paren=!0,tb=kf):(Q=tb,tb=O)}else Q=tb,tb=O}else Q=tb,tb=O}}}}}}}}}return tb}function F(){var ba;var ha=Q;var pa=J();if(pa!==O){ha=[];for(ba=L();ba!==
O;)ha.push(ba),ba=L();ha=pa+ha.join("")}else Q=ha,ha=O;return ha}function J(){if(Pd.test(q.charAt(Q))){var ba=q.charAt(Q);Q++}else ba=O,0===Fa&&a(Qb);return ba}function L(){if(sc.test(q.charAt(Q))){var ba=q.charAt(Q);Q++}else ba=O,0===Fa&&a(Qc);return ba}function I(){if(Oc.test(q.charAt(Q))){var ba=q.charAt(Q);Q++}else ba=O,0===Fa&&a(jd);return ba}function G(){var ba=Q;if(64===q.charCodeAt(Q)){var ha=Ya;Q++}else ha=O,0===Fa&&a(Rc);if(ha!==O){var pa=F();pa!==O?ba=ha=[ha,pa]:(Q=ba,ba=O)}else Q=ba,ba=
O;ba!==O&&(ba={type:"parameter",value:ba[1]});return ba}function K(){var ba=Q;if(q.substr(Q,7).toLowerCase()===dd){var ha=q.substr(Q,7);Q+=7}else ha=O,0===Fa&&a(jb);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="LEADING":(Q=ba,ba=O)}else Q=ba,ba=O;ba===O&&(ba=Q,q.substr(Q,8).toLowerCase()===Fc?(ha=q.substr(Q,8),Q+=8):(ha=O,0===Fa&&a(rb)),ha!==O?(ha=Q,Fa++,pa=L(),Fa--,pa===O?ha=void 0:(Q=ha,ha=O),ha!==O?ba="TRAILING":(Q=ba,ba=O)):(Q=ba,ba=O),ba===O&&(ba=Q,q.substr(Q,4).toLowerCase()===
Nd?(ha=q.substr(Q,4),Q+=4):(ha=O,0===Fa&&a(Jc)),ha!==O?(ha=Q,Fa++,pa=L(),Fa--,pa===O?ha=void 0:(Q=ha,ha=O),ha!==O?ba="BOTH":(Q=ba,ba=O)):(Q=ba,ba=O)));return ba}function P(){var ba=Q;var ha=Q;var pa=Y();if(pa!==O){Ha();var Ia=$a();if(Ia!==O)if(Ha(),Ia=aa(),Ia!==O){Ha();var Qa=bb();Qa!==O?ha={type:"interval-period",period:pa.value,precision:Ia,secondary:null}:(Q=ha,ha=O)}else Q=ha,ha=O;else Q=ha,ha=O}else Q=ha,ha=O;ha===O&&(ha=Q,pa=Y(),pa!==O&&(pa={type:"interval-period",period:pa.value,precision:null,
secondary:null}),ha=pa);if(ha!==O)if(Ha(),pa=Q,q.substr(Q,2).toLowerCase()===fd?(Ia=q.substr(Q,2),Q+=2):(Ia=O,0===Fa&&a(bd)),Ia!==O?(Ia=Q,Fa++,Qa=L(),Fa--,Qa===O?Ia=void 0:(Q=Ia,Ia=O),Ia!==O?pa="TO":(Q=pa,pa=O)):(Q=pa,pa=O),pa!==O){Ha();pa=Q;Ia=Y();Ia!==O&&(Ia={type:"interval-period",period:Ia.value,precision:null,secondary:null});pa=Ia;if(pa===O){pa=Q;Ia=La();if(Ia!==O)if(Ha(),Ia=$a(),Ia!==O)if(Ha(),Ia=aa(),Ia!==O)if(Ha(),Qa=Sa(),Qa!==O)if(Ha(),Qa=ea(),Qa!==O){Ha();var hb=bb();hb!==O?pa={type:"interval-period",
period:"second",precision:Ia,secondary:Qa}:(Q=pa,pa=O)}else Q=pa,pa=O;else Q=pa,pa=O;else Q=pa,pa=O;else Q=pa,pa=O;else Q=pa,pa=O;pa===O&&(pa=Q,Ia=La(),Ia!==O?(Ha(),Ia=$a(),Ia!==O?(Ha(),Ia=aa(),Ia!==O?(Ha(),Qa=bb(),Qa!==O?pa={type:"interval-period",period:"second",precision:Ia,secondary:null}:(Q=pa,pa=O)):(Q=pa,pa=O)):(Q=pa,pa=O)):(Q=pa,pa=O),pa===O&&(pa=Q,Ia=La(),Ia!==O&&(Ia={type:"interval-period",period:"second",precision:null,secondary:null}),pa=Ia))}pa!==O?ba={type:"interval-qualifier",start:ha,
end:pa}:(Q=ba,ba=O)}else Q=ba,ba=O;else Q=ba,ba=O;ba===O&&(ba=Q,pa=Y(),pa!==O?(Ha(),ha=$a(),ha!==O?(Ha(),ha=ea(),ha!==O?(Ha(),Ia=bb(),Ia!==O?ba={type:"interval-period",period:pa.value,precision:ha,secondary:null}:(Q=ba,ba=O)):(Q=ba,ba=O)):(Q=ba,ba=O)):(Q=ba,ba=O),ba===O&&(ba=Q,pa=Y(),pa!==O&&(pa={type:"interval-period",period:pa.value,precision:null,secondary:null}),ba=pa,ba===O&&(ba=Q,pa=La(),pa!==O?(Ha(),ha=$a(),ha!==O?(Ha(),ha=aa(),ha!==O?(Ha(),Ia=Sa(),Ia!==O?(Ha(),pa=ea(),pa!==O?(Ha(),Ia=bb(),
Ia!==O?ba={type:"interval-period",period:"second",precision:ha,secondary:pa}:(Q=ba,ba=O)):(Q=ba,ba=O)):(Q=ba,ba=O)):(Q=ba,ba=O)):(Q=ba,ba=O)):(Q=ba,ba=O),ba===O&&(ba=Q,pa=La(),pa!==O?(Ha(),ha=$a(),ha!==O?(Ha(),ha=ea(),ha!==O?(Ha(),Ia=bb(),Ia!==O?ba={type:"interval-period",period:"second",precision:ha,secondary:null}:(Q=ba,ba=O)):(Q=ba,ba=O)):(Q=ba,ba=O)):(Q=ba,ba=O),ba===O&&(ba=Q,pa=La(),pa!==O&&(pa={type:"interval-period",period:"second",precision:null,secondary:null}),ba=pa)))));return ba}function Y(){var ba=
Q;ba=Ga();ba!==O&&(ba={type:"string",value:"day"});ba===O&&(ba=Q,ba=Na(),ba!==O&&(ba={type:"string",value:"hour"}),ba===O&&(ba=Q,ba=Ka(),ba!==O&&(ba={type:"string",value:"minute"}),ba===O&&(ba=Q,ba=Ea(),ba!==O&&(ba={type:"string",value:"month"}),ba===O&&(ba=Q,ba=za(),ba!==O&&(ba={type:"string",value:"year"})))));return ba}function ea(){var ba=xa();ba!==O&&(ba=parseFloat(ba));return ba}function aa(){var ba=xa();ba!==O&&(ba=parseFloat(ba));return ba}function T(){var ba=R();ba===O&&(ba=G());return ba}
function R(){var ba=Q;if(39===q.charCodeAt(Q)){var ha=Eb;Q++}else ha=O,0===Fa&&a(Qd);ha===O&&(q.substr(Q,2)===la?(ha=la,Q+=2):(ha=O,0===Fa&&a(Rd)));if(ha!==O){ha=[];var pa=Q;q.substr(Q,2)===ta?(pa=ta,Q+=2):(pa=O,0===Fa&&a(zd));pa!==O&&(pa="'");pa===O&&(Pc.test(q.charAt(Q))?(pa=q.charAt(Q),Q++):(pa=O,0===Fa&&a(Ad)));for(;pa!==O;)ha.push(pa),pa=Q,q.substr(Q,2)===ta?(pa=ta,Q+=2):(pa=O,0===Fa&&a(zd)),pa!==O&&(pa="'"),pa===O&&(Pc.test(q.charAt(Q))?(pa=q.charAt(Q),Q++):(pa=O,0===Fa&&a(Ad)));39===q.charCodeAt(Q)?
(pa=Eb,Q++):(pa=O,0===Fa&&a(Qd));pa!==O?ba={type:"string",value:ha.join("")}:(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function W(){var ba=Q;if(Ua()!==O){Ha();var ha=r();if(ha!==O){Ha();var pa=Xa();pa!==O?(Ha(),pa=r(),pa!==O?ba={type:"when-clause",operand:ha,value:pa}:(Q=ba,ba=O)):(Q=ba,ba=O)}else Q=ba,ba=O}else Q=ba,ba=O;return ba}function S(){var ba=Q;if(Ua()!==O){Ha();var ha=r();if(ha!==O){Ha();var pa=Xa();pa!==O?(Ha(),pa=r(),pa!==O?ba={type:"when-clause",operand:ha,value:pa}:(Q=ba,ba=O)):(Q=ba,ba=
O)}else Q=ba,ba=O}else Q=ba,ba=O;return ba}function Z(){var ba=Q;var ha=Q;if(q.substr(Q,4).toLowerCase()===sb){var pa=q.substr(Q,4);Q+=4}else pa=O,0===Fa&&a(sa);if(pa!==O){pa=Q;Fa++;var Ia=L();Fa--;Ia===O?pa=void 0:(Q=pa,pa=O);pa!==O?ha="ELSE":(Q=ha,ha=O)}else Q=ha,ha=O;ha!==O?(Ha(),ha=r(),ha!==O?ba={type:"else-clause",value:ha}:(Q=ba,ba=O)):(Q=ba,ba=O);return ba}function ca(){var ba=xa();if(ba===O){ba=Q;if(45===q.charCodeAt(Q)){var ha=Tb;Q++}else ha=O,0===Fa&&a(Fb);ha===O&&(43===q.charCodeAt(Q)?
(ha=Db,Q++):(ha=O,0===Fa&&a(yd)));if(ha!==O){var pa=xa();pa!==O?ba=ha[0]+pa:(Q=ba,ba=O)}else Q=ba,ba=O}return ba}function qa(){var ba=Q;if(46===q.charCodeAt(Q)){var ha=oa;Q++}else ha=O,0===Fa&&a(Sd);ha!==O?(ba=xa(),ba===O&&(ba=null),ba="."+(null!=ba?ba:"")):(Q=ba,ba=O);return ba}function ya(){var ba;var ha=ba=Q;if(id.test(q.charAt(Q))){var pa=q.charAt(Q);Q++}else pa=O,0===Fa&&a(Td);pa!==O?(qb.test(q.charAt(Q))?(ha=q.charAt(Q),Q++):(ha=O,0===Fa&&a(re)),ha===O&&(ha=null),ha="e"+(null===ha?"":ha)):(Q=
ha,ha=O);ha!==O?(pa=xa(),pa!==O?ba=ha+pa:(Q=ba,ba=O)):(Q=ba,ba=O);return ba}function xa(){var ba=[];var ha=Ca();if(ha!==O)for(;ha!==O;)ba.push(ha),ha=Ca();else ba=O;ba!==O&&(ba=ba.join(""));return ba}function Ca(){if(kc.test(q.charAt(Q))){var ba=q.charAt(Q);Q++}else ba=O,0===Fa&&a(qe);return ba}function Da(){var ba=Q;if(q.substr(Q,2).toLowerCase()===Ta){var ha=q.substr(Q,2);Q+=2}else ha=O,0===Fa&&a(kd);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="IN":(Q=ba,ba=O)}else Q=
ba,ba=O;return ba}function N(){var ba=Q;if(q.substr(Q,2).toLowerCase()===ab){var ha=q.substr(Q,2);Q+=2}else ha=O,0===Fa&&a(zc);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="IS":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function V(){var ba=Q;if(q.substr(Q,4).toLowerCase()===ob){var ha=q.substr(Q,4);Q+=4}else ha=O,0===Fa&&a(Wd);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="LIKE":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function ka(){var ba=Q;if(q.substr(Q,
3).toLowerCase()===nb){var ha=q.substr(Q,3);Q+=3}else ha=O,0===Fa&&a(Xd);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="NOT":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function da(){var ba=Q;if(q.substr(Q,3).toLowerCase()===zb){var ha=q.substr(Q,3);Q+=3}else ha=O,0===Fa&&a(ld);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="AND":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function na(){var ba=Q;if(q.substr(Q,2).toLowerCase()===Mb){var ha=q.substr(Q,2);
Q+=2}else ha=O,0===Fa&&a(Yd);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="OR":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function X(){var ba=Q;if(q.substr(Q,7).toLowerCase()===qc){var ha=q.substr(Q,7);Q+=7}else ha=O,0===Fa&&a(Cd);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="BETWEEN":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function fa(){var ba=Q;if(q.substr(Q,4).toLowerCase()===cd){var ha=q.substr(Q,4);Q+=4}else ha=O,0===Fa&&a(mc);if(ha!==O){ha=
Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="FROM":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function ja(){var ba=Q;if(q.substr(Q,4).toLowerCase()===wc){var ha=q.substr(Q,4);Q+=4}else ha=O,0===Fa&&a(Dd);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="TRIM":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function ma(){var ba=Q;if(q.substr(Q,9).toLowerCase()===xc){var ha=q.substr(Q,9);Q+=9}else ha=O,0===Fa&&a(Yb);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=
ha,ha=O);ha!==O?ba="TIMESTAMP":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function ra(){var ba=Q;if(q.substr(Q,4).toLowerCase()===Ec){var ha=q.substr(Q,4);Q+=4}else ha=O,0===Fa&&a(Jd);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="DATE":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function va(){var ba=Q;if(q.substr(Q,8).toLowerCase()===gd){var ha=q.substr(Q,8);Q+=8}else ha=O,0===Fa&&a(td);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="INTERVAL":(Q=ba,
ba=O)}else Q=ba,ba=O;return ba}function za(){var ba=Q;if(q.substr(Q,4).toLowerCase()===$b){var ha=q.substr(Q,4);Q+=4}else ha=O,0===Fa&&a(Md);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="YEAR":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function Ea(){var ba=Q;if(q.substr(Q,5).toLowerCase()===Rb){var ha=q.substr(Q,5);Q+=5}else ha=O,0===Fa&&a(md);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="MONTH":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function Ga(){var ba=
Q;if(q.substr(Q,3).toLowerCase()===Zc){var ha=q.substr(Q,3);Q+=3}else ha=O,0===Fa&&a(Fd);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="DAY":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function Na(){var ba=Q;if(q.substr(Q,4).toLowerCase()===nc){var ha=q.substr(Q,4);Q+=4}else ha=O,0===Fa&&a(Ld);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="HOUR":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function Ka(){var ba=Q;if(q.substr(Q,6).toLowerCase()===od){var ha=
q.substr(Q,6);Q+=6}else ha=O,0===Fa&&a(Zd);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="MINUTE":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function La(){var ba=Q;if(q.substr(Q,6).toLowerCase()===Ob){var ha=q.substr(Q,6);Q+=6}else ha=O,0===Fa&&a(db);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="SECOND":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function Va(){var ba=Q;if(q.substr(Q,4).toLowerCase()===Xb){var ha=q.substr(Q,4);Q+=4}else ha=O,0===Fa&&
a(Za);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="CASE":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function Ra(){var ba=Q;if(q.substr(Q,3).toLowerCase()===wd){var ha=q.substr(Q,3);Q+=3}else ha=O,0===Fa&&a(M);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="END":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function Ua(){var ba=Q;if(q.substr(Q,4).toLowerCase()===xd){var ha=q.substr(Q,4);Q+=4}else ha=O,0===Fa&&a(U);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===
O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="WHEN":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function Xa(){var ba=Q;if(q.substr(Q,4).toLowerCase()===hd){var ha=q.substr(Q,4);Q+=4}else ha=O,0===Fa&&a(ia);if(ha!==O){ha=Q;Fa++;var pa=L();Fa--;pa===O?ha=void 0:(Q=ha,ha=O);ha!==O?ba="THEN":(Q=ba,ba=O)}else Q=ba,ba=O;return ba}function Sa(){if(44===q.charCodeAt(Q)){var ba=jc;Q++}else ba=O,0===Fa&&a(wa);return ba}function $a(){if(40===q.charCodeAt(Q)){var ba=Cb;Q++}else ba=O,0===Fa&&a(Ba);return ba}function bb(){if(41===
q.charCodeAt(Q)){var ba=pd;Q++}else ba=O,0===Fa&&a(Ja);return ba}function Ha(){var ba;var ha=[];for(ba=vb();ba!==O;)ha.push(ba),ba=vb();return ha}function vb(){if(ad.test(q.charAt(Q))){var ba=q.charAt(Q);Q++}else ba=O,0===Fa&&a(Pa);return ba}function lb(ba,ha,pa,Ia){ba={type:"binary-expression",operator:ba,left:ha,right:pa};void 0!==Ia&&(ba.escape=Ia);return ba}function mb(ba,ha){for(var pa=0;pa<ha.length;pa++)ba=lb(ha[pa][1],ba,ha[pa][3]);return ba}k=void 0!==k?k:{};var O={},eb=k.grammarSource,Lb=
{start:d},yb=d,ua="!",Hb="\x3d",Sb="\x3e\x3d",Ab="\x3e",Pb="\x3c\x3d",Vb="\x3c\x3e",hc="\x3c",pc="!\x3d",Db="+",Tb="-",kb="||",Bb="*",Ub="/",Ya="@",Eb="'",la="N'",ta="''",oa=".",Aa="null",Oa="true",Ma="false",Ta="in",ab="is",ob="like",pb="escape",nb="not",zb="and",Mb="or",qc="between",cd="from",rc="for",Wb="substring",ud="extract",wc="trim",vd="position",xc="timestamp",Ec="date",dd="leading",Fc="trailing",Nd="both",Gc="cast",Od="as",ed="integer",Nc="smallint",ec="float",yc="real",Cc="varchar",fd=
"to",gd="interval",$b="year",Rb="month",Zc="day",nc="hour",od="minute",Ob="second",Xb="case",wd="end",xd="when",hd="then",sb="else",jc=",",Cb="(",pd=")",Hc="`",Pd=/^[A-Za-z_\x80-\uFFFF]/,sc=/^[A-Za-z0-9_]/,Oc=/^[A-Za-z0-9_.\x80-\uFFFF]/,Pc=/^[^']/,kc=/^[0-9]/,id=/^[eE]/,qb=/^[+\-]/,ad=/^[ \t\n\r]/,$c=/^[^`]/,pe=e("!",!1),qd=e("\x3d",!1),Dc=e("\x3e\x3d",!1),oc=e("\x3e",!1),ic=e("\x3c\x3d",!1),fc=e("\x3c\x3e",!1),Id=e("\x3c",!1),Hd=e("!\x3d",!1),yd=e("+",!1),Fb=e("-",!1),Kb=e("||",!1),lc=e("*",!1),
Nb=e("/",!1),Qb=b([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Qc=b([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),jd=b([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Rc=e("@",!1),Qd=e("'",!1),Rd=e("N'",!1),zd=e("''",!1),Ad=b(["'"],!0,!1),Sd=e(".",!1),qe=b([["0","9"]],!1,!1),Td=b(["e","E"],!1,!1),re=b(["+","-"],!1,!1),Ud=e("NULL",!0),Vd=e("TRUE",!0),Sc=e("FALSE",!0),kd=e("IN",!0),zc=e("IS",!0),Wd=e("LIKE",!0),Bd=e("ESCAPE",!0),Xd=e("NOT",!0),ld=e("AND",!0),Yd=e("OR",!0),Cd=
e("BETWEEN",!0),mc=e("FROM",!0),Ic=e("FOR",!0),Tc=e("SUBSTRING",!0),Uc=e("EXTRACT",!0),Dd=e("TRIM",!0),Ed=e("POSITION",!0),Yb=e("TIMESTAMP",!0),Jd=e("DATE",!0),jb=e("LEADING",!0),rb=e("TRAILING",!0),Jc=e("BOTH",!0),rd=e("CAST",!0),Kd=e("AS",!0),sd=e("INTEGER",!0),gc=e("SMALLINT",!0),tc=e("FLOAT",!0),vc=e("REAL",!0),Mc=e("VARCHAR",!0),bd=e("TO",!0),td=e("INTERVAL",!0),Md=e("YEAR",!0),md=e("MONTH",!0),Fd=e("DAY",!0),Ld=e("HOUR",!0),Zd=e("MINUTE",!0),db=e("SECOND",!0),Za=e("CASE",!0),M=e("END",!0),U=
e("WHEN",!0),ia=e("THEN",!0),sa=e("ELSE",!0),wa=e(",",!1),Ba=e("(",!1),Ja=e(")",!1),Pa=b([" ","\t","\n","\r"],!1,!1),Wa=e("`",!1),fb=b(["`"],!0,!1),Q=0,gb=[{line:1,column:1}],cb=0,Gb=[],Fa=0;if("startRule"in k){if(!(k.startRule in Lb))throw Error("Can't start parsing from rule \""+k.startRule+'".');yb=Lb[k.startRule]}var uc=yb();if(uc!==O&&Q===q.length)return uc;uc!==O&&Q<q.length&&a({type:"end"});throw function(ba,ha,pa){return new C(C.buildMessage(ba,ha),ba,ha,pa)}(Gb,cb<q.length?q.charAt(cb):null,
cb<q.length?f(cb,cb+1):f(cb,cb));}}})})(B);var y=B.exports;B=function(){function v(){}v.parse=function(C){return y.parse(C)};return h._createClass(v)}();l.WhereGrammar=B;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(l,h,D,B,y,v,C){function t(a,d){if(!d)return null;if("x"in d){var n={x:0,y:0};[n.x,n.y]=a(d.x,d.y,e);null!=d.z&&(n.z=d.z);null!=d.m&&(n.m=d.m);return n}return"xmin"in d?(n={xmin:0,ymin:0,xmax:0,ymax:0},[n.xmin,n.ymin]=a(d.xmin,d.ymin,e),[n.xmax,n.ymax]=a(d.xmax,d.ymax,e),d.hasZ&&(n.zmin=d.zmin,n.zmax=d.zmax,n.hasZ=!0),d.hasM&&(n.mmin=d.mmin,n.mmax=d.mmax,n.hasM=!0),n):"rings"in d?{rings:q(d.rings,a),hasM:d.hasM,hasZ:d.hasZ}:"paths"in d?{paths:q(d.paths,a),hasM:d.hasM,hasZ:d.hasZ}:"points"in
d?{points:k(d.points,a),hasM:d.hasM,hasZ:d.hasZ}:null}function q(a,d){const n=[];for(const r of a)n.push(k(r,d));return n}function k(a,d){const n=[];for(const r of a)a=d(r[0],r[1],[0,0]),n.push(a),2<r.length&&a.push(r[2]),3<r.length&&a.push(r[3]);return n}const e=[0,0],b=t.bind(null,C.lngLatToXY),c=t.bind(null,C.xyToLngLat),f=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var d=a.prototype;d.push=async function(n,r,p){if(!(n&&n.length&&r&&p)||v.equals(r,
p))return n;const g={geometries:n,inSpatialReference:r,outSpatialReference:p,resolve:null};this._jobs.push(g);return new Promise(u=>{g.resolve=u;null===this._timer&&(this._timer=setTimeout(this._process,10))})};d._process=function(){this._timer=null;const n=this._jobs.shift();if(n){var {geometries:r,inSpatialReference:p,outSpatialReference:g,resolve:u}=n;C.canProject(p,g)?v.isWebMercator(g)?u(r.map(b)):u(r.map(c)):u(B.projectMany(y.jsonAdapter,r,p,g,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}};return h._createClass(a)}());l.checkProjectionSupport=async function(a,d){a&&d&&(a=Array.isArray(a)?a.map(n=>null!=n.geometry?n.geometry.spatialReference:null).filter(D.isSome):[a],await B.initializeProjection(a.map(n=>({source:n,dest:d}))))};l.project=function(a,d,n,r){if(!a)return a;n||(n=d,d=a.spatialReference);return v.isValid(d)&&v.isValid(n)&&!v.equals(d,n)?C.canProject(d,n)?(a=v.isWebMercator(n)?b(a):c(a),a.spatialReference=n,a):B.projectMany(y.jsonAdapter,[a],d,n,null,r)[0]:a};l.projectMany=
function(a,d,n){return f.push(a,d,n)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x,w,m,z,A){function H(){return!!lb&&d.isLoaded()}function E(la){null==O&&(O=Promise.all([d.load(),(new Promise((ta,oa)=>l(["../chunks/geometryEngineBase"],ta,oa))).then(ta=>ta.geometryEngineBase),new Promise((ta,oa)=>l(["./geometryAdapters/hydrated"],ta,oa))]));return O.then(([,ta,{hydratedAdapter:oa}])=>{v.throwIfAborted(la);mb=oa;lb=ta.default;lb._enableProjection(d.pe);Lb.notify()})}function F(la,ta,oa=null,Aa=null){return Array.isArray(la)?0===
la.length?[]:J(mb,la,la[0].spatialReference,ta,oa,Aa):J(mb,[la],la.spatialReference,ta,oa,Aa)[0]}function J(la,ta,oa,Aa,Oa=null,Ma=null){if(null==oa||null==Aa)return ta;if(K(oa,Aa,Oa))return ta.map(Ta=>P(Ta,oa,Aa));if(null==Oa){const Ta=w.cacheKey(oa,Aa);void 0!==eb[Ta]?Oa=eb[Ta]:(Oa=I(oa,Aa,void 0),null==Oa&&(Oa=new w),eb[Ta]=Oa)}if(null==lb||null==la)throw new yb;return null!=Ma?lb._project(la,ta,oa,Aa,Oa,Ma):lb._project(la,ta,oa,Aa,Oa)}function L(la,ta){if(!H())for(const oa of la)if(null!=oa&&
!m.equals(oa.spatialReference,ta)&&m.isValid(oa.spatialReference)&&m.isValid(ta)&&!K(oa.spatialReference,ta))return t.trackAccess(Lb),{pending:E(),geometries:null};return{pending:null,geometries:la.map(oa=>null==oa?null:m.equals(oa.spatialReference,ta)?oa:m.isValid(oa.spatialReference)&&m.isValid(ta)?G(oa,ta):null)}}function I(la,ta,oa=null){if(null==la||null==ta)return null;if(null==lb||null==mb)throw new yb;la=lb._getTransformation(mb,la,ta,oa,oa?.spatialReference);return null!==la?w.fromGE(la):
null}function G(la,ta){try{const oa=F(la,ta);if(null==oa)return null;"xmin"in la&&"xmin"in oa&&(oa.zmin=la.zmin,oa.zmax=la.zmax);const Aa=A.getGeometryZScaler(oa.type,la.spatialReference,ta);null!=Aa&&Aa(oa);return oa}catch(oa){if(!(oa instanceof yb))throw oa;return null}}function K(la,ta,oa){return oa?!1:m.equals(la,ta)?!0:m.isValid(la)&&m.isValid(ta)&&!!bb(la,ta,hc)}function P(la,ta,oa){return la?"x"in la?Y(la,ta,new n,oa,0):"xmin"in la?R(la,ta,new f,oa,0):"rings"in la?T(la,ta,new r,oa,0):"paths"in
la?aa(la,ta,new p,oa,0):"points"in la?ea(la,ta,new a,oa,0):null:null}function Y(la,ta,oa,Aa,Oa){Ya[0]=la.x;Ya[1]=la.y;const Ma=la.z;Ya[2]=void 0!==Ma?Ma:Oa;if(!ca(Ya,ta,0,Ya,Aa,0,1))return null;oa.x=Ya[0];oa.y=Ya[1];oa.spatialReference=Aa;void 0===Ma?(oa.z=void 0,oa.hasZ=!1):(oa.z=Ya[2],oa.hasZ=!0);void 0===la.m?(oa.m=void 0,oa.hasM=!1):(oa.m=la.m,oa.hasM=!0);return oa}function ea(la,ta,oa,Aa,Oa){const {points:Ma,hasZ:Ta,hasM:ab}=la;la=[];const ob=Ma.length,pb=[];for(var nb of Ma)pb.push(nb[0],nb[1],
Ta?nb[2]:Oa);if(!ca(pb,ta,0,pb,Aa,0,ob))return null;for(ta=0;ta<ob;++ta){Oa=3*ta;nb=pb[Oa];const zb=pb[Oa+1];Ta&&ab?la.push([nb,zb,pb[Oa+2],Ma[ta][3]]):Ta?la.push([nb,zb,pb[Oa+2]]):ab?la.push([nb,zb,Ma[ta][2]]):la.push([nb,zb])}oa.points=la;oa.spatialReference=Aa;oa.hasZ=Ta;oa.hasM=ab;return oa}function aa(la,ta,oa,Aa,Oa){const {paths:Ma,hasZ:Ta,hasM:ab}=la;la=[];if(!qa(Ma,Ta??!1,ab??!1,ta,la,Aa,Oa))return null;oa.paths=la;oa.spatialReference=Aa;oa.hasZ=Ta;oa.hasM=ab;return oa}function T(la,ta,oa,
Aa,Oa){const {rings:Ma,hasZ:Ta,hasM:ab}=la;la=[];if(!qa(Ma,Ta??!1,ab??!1,ta,la,Aa,Oa))return null;oa.rings=la;oa.spatialReference=Aa;oa.hasZ=Ta;oa.hasM=ab;return oa}function R(la,ta,oa,Aa,Oa){const {xmin:Ma,ymin:Ta,xmax:ab,ymax:ob,hasZ:pb,hasM:nb}=la;if(!W(Ma,Ta,pb?la.zmin:Oa,ta,Ya,Aa))return null;oa.xmin=Ya[0];oa.ymin=Ya[1];pb&&(oa.zmin=Ya[2]);if(!W(ab,ob,pb?la.zmax:Oa,ta,Ya,Aa))return null;oa.xmax=Ya[0];oa.ymax=Ya[1];pb&&(oa.zmax=Ya[2]);nb&&(oa.mmin=la.mmin,oa.mmax=la.mmax);oa.spatialReference=
Aa;return oa}function W(la,ta,oa,Aa,Oa,Ma){kb[0]=la;kb[1]=ta;kb[2]=oa;return ca(kb,Aa,0,Oa,Ma,0,1)}function S(la,ta,oa,Aa){if(null==ta||null==Aa||2>la.length)return!1;2===la.length&&(kb[0]=la[0],kb[1]=la[1],kb[2]=0,la=kb);return ca(la,ta,0,oa,Aa,0,1)}function Z(la,ta,oa){if(null==ta)return!1;ta=Da(ta,Pb);ta=Ab[ta][ua.WGS84_COMPARABLE_LON_LAT];if(null==ta)return!1;ta(la,0,kb,0);oa!==kb&&(oa[0]=kb[0],oa[1]=kb[1],2<oa.length&&(oa[2]=kb[2]));return!0}function ca(la,ta,oa,Aa,Oa,Ma,Ta=1){ta=bb(ta,Oa,hc);
if(null==ta)return!1;if(ta===N){if(la===Aa&&oa===Ma)return!0;Ta=oa+3*Ta;for(let ab=oa,ob=Ma;ab<Ta;ab++,ob++)Aa[ob]=la[ab];return!0}Ta=oa+3*Ta;for(let ab=oa,ob=Ma;ab<Ta;ab+=3,ob+=3)ta(la,ab,Aa,ob);return!0}function qa(la,ta,oa,Aa,Oa,Ma,Ta=0){const ab=[];for(const ob of la)for(const pb of ob)ab.push(pb[0],pb[1],ta?pb[2]:Ta);if(!ca(ab,Aa,0,ab,Ma,0,ab.length/3))return!1;Aa=0;Oa.length=0;for(const ob of la){la=[];for(const pb of ob)ta&&oa?la.push([ab[Aa++],ab[Aa++],ab[Aa++],pb[3]]):ta?la.push([ab[Aa++],
ab[Aa++],ab[Aa++]]):(oa?la.push([ab[Aa++],ab[Aa++],pb[2]]):la.push([ab[Aa++],ab[Aa++]]),Aa++);Oa.push(la)}return!0}function ya(la,ta,oa,Aa){ta=Aa+ta;if(ta<Aa/2||oa>ta)return Number.MAX_VALUE;la=Math.abs(Db*la)+Math.asin(oa/ta);return la>=Math.PI/2?Number.MAX_VALUE:oa/Math.cos(la)}function xa(la,ta,oa){const Aa=Math.sin(la);la=Math.cos(la);const Oa=Math.sin(ta);ta=Math.cos(ta);oa[0]=-Aa;oa[4]=-Oa*la;oa[8]=ta*la;oa[12]=0;oa[1]=la;oa[5]=-Oa*Aa;oa[9]=ta*Aa;oa[13]=0;oa[2]=0;oa[6]=ta;oa[10]=Oa;oa[14]=0;
oa[3]=0;oa[7]=0;oa[11]=0;oa[15]=1;return oa}function Ca(la,ta,oa){xa(la,ta,oa);k.transpose(oa,oa);return oa}function Da(la,ta){if(!la)return ua.UNKNOWN;if(ta.spatialReference===la)return ta.spatialReferenceId;ta.spatialReference=la;"metersPerUnit"in ta&&(ta.metersPerUnit=C.getMetersPerUnitForSR(la,1));return la.wkt===c.SphericalECEFSpatialReferenceLike.wkt?ta.spatialReferenceId=ua.SPHERICAL_ECEF:m.isWGS84(la)?ta.spatialReferenceId=ua.WGS84:m.isWebMercator(la)?ta.spatialReferenceId=ua.WEB_MERCATOR:
m.isPlateCarree(la)?ta.spatialReferenceId=ua.PLATE_CARREE:la.wkt===c.WGS84ECEFSpatialReferenceLike.wkt?ta.spatialReferenceId=ua.WGS84_ECEF:la.wkid===z.SupportedGCSWkids.CGCS2000?ta.spatialReferenceId=ua.CGCS2000:la.wkt===c.SphericalPCPFMarsLike.wkt?ta.spatialReferenceId=ua.SPHERICAL_MARS_PCPF:la.wkt===c.SphericalPCPFMoonLike.wkt?ta.spatialReferenceId=ua.SPHERICAL_MOON_PCPF:m.isMars(la)?ta.spatialReferenceId=ua.GCSMARS2000:m.isMoon(la)?ta.spatialReferenceId=ua.GCSMOON2000:ta.spatialReferenceId=ua.UNKNOWN}
function N(la,ta,oa,Aa){la!==oa&&(oa[Aa++]=la[ta++],oa[Aa++]=la[ta++],oa[Aa]=la[ta])}function V(la,ta,oa,Aa){oa[Aa++]=Tb*(la[ta++]/u.earth.radius);oa[Aa++]=Tb*(Math.PI/2-2*Math.atan(Math.exp(-la[ta++]/u.earth.radius)));oa[Aa]=la[ta]}function ka(la,ta,oa,Aa){V(la,ta,oa,Aa);Ea(oa,Aa,oa,Aa)}function da(la,ta,oa,Aa){V(la,ta,oa,Aa);Ua(oa,Aa,oa,Aa)}function na(la,ta,oa,Aa,Oa){var Ma=.4999999*Math.PI;Ma=y.clamp(Db*la[ta+1],-Ma,Ma);Ma=Math.sin(Ma);oa[Aa++]=Db*la[ta]*Oa.radius;oa[Aa++]=Oa.halfSemiMajorAxis*
Math.log((1+Ma)/(1-Ma));oa[Aa]=la[ta+2]}function X(la,ta,oa,Aa){na(la,ta,oa,Aa,u.earth)}function fa(la,ta,oa,Aa){oa[Aa]=la[ta]*Hb;oa[Aa+1]=la[ta+1]*Hb;oa[Aa+2]=la[ta+2]}function ja(la,ta,oa,Aa){oa[Aa]=la[ta]*Sb;oa[Aa+1]=la[ta+1]*Sb;oa[Aa+2]=la[ta+2]}function ma(la,ta,oa,Aa){V(la,ta,oa,Aa);fa(oa,Aa,oa,Aa)}function ra(la,ta,oa,Aa,Oa){Oa+=la[ta+2];const Ma=Db*la[ta+1];la=Db*la[ta];ta=Math.cos(Ma);oa[Aa++]=Math.cos(la)*ta*Oa;oa[Aa++]=Math.sin(la)*ta*Oa;oa[Aa]=Math.sin(Ma)*Oa}function va(la,ta,oa,Aa){ra(la,
ta,oa,Aa,u.moon.radius)}function za(la,ta,oa,Aa){ra(la,ta,oa,Aa,u.mars.radius)}function Ea(la,ta,oa,Aa){ra(la,ta,oa,Aa,u.earth.radius)}function Ga(la,ta,oa,Aa,Oa){var Ma=la[ta];const Ta=la[ta+1];ta=la[ta+2];la=Math.sqrt(Ma*Ma+Ta*Ta+ta*ta);ta=y.asinClamped(ta/(0===la?1:la));Ma=Math.atan2(Ta,Ma);oa[Aa++]=Tb*Ma;oa[Aa++]=Tb*ta;oa[Aa]=la-Oa}function Na(la,ta,oa,Aa){Ga(la,ta,oa,Aa,u.moon.radius)}function Ka(la,ta,oa,Aa){Ga(la,ta,oa,Aa,u.mars.radius)}function La(la,ta,oa,Aa){Ga(la,ta,oa,Aa,u.earth.radius)}
function Va(la,ta,oa,Aa){La(la,ta,oa,Aa);X(oa,Aa,oa,Aa)}function Ra(la,ta,oa,Aa){La(la,ta,oa,Aa);Ua(oa,Aa,oa,Aa)}function Ua(la,ta,oa,Aa){var Oa=u.earth;const Ma=Db*la[ta];var Ta=Db*la[ta+1];la=la[ta+2];ta=Math.sin(Ta);Ta=Math.cos(Ta);const ab=Oa.radius/Math.sqrt(1-Oa.eccentricitySquared*ta*ta);oa[Aa++]=(ab+la)*Ta*Math.cos(Ma);oa[Aa++]=(ab+la)*Ta*Math.sin(Ma);oa[Aa++]=(ab*(1-Oa.eccentricitySquared)+la)*ta}function Xa(la,ta,oa,Aa){var Oa=x.earthEllipsoidConstants,Ma=la[ta],Ta=la[ta+1];la=la[ta+2];
let ab;ta=Math.abs(la);var ob=Ma*Ma+Ta*Ta;var pb=Math.sqrt(ob);var nb=ob+la*la;var zb=Math.sqrt(nb);Ma=Math.atan2(Ta,Ma);var Mb=la*la/nb;nb=ob/nb;Ta=Oa.a2/zb;ob=Oa.a3-Oa.a4/zb;.3<nb?(Mb=ta/zb*(1+nb*(Oa.a1+Ta+Mb*ob)/zb),zb=Math.asin(Mb),Ta=Mb*Mb,nb=Math.sqrt(1-Ta)):(nb=pb/zb*(1-Mb*(Oa.a5-Ta-nb*ob)/zb),zb=Math.acos(nb),Ta=1-nb*nb,Mb=Math.sqrt(Ta));ab=1-u.earth.eccentricitySquared*Ta;Ta=u.earth.radius/Math.sqrt(ab);Oa=Oa.a6*Ta;Ta=pb-Ta*nb;ob=ta-Oa*Mb;ta=nb*Ta+Mb*ob;pb=nb*ob-Mb*Ta;Oa=pb/(Oa/ab+ta);zb+=
Oa;0>la&&(zb=-zb);oa[Aa++]=Tb*Ma;oa[Aa++]=Tb*zb;oa[Aa]=ta+pb*Oa/2}function Sa(la,ta,oa,Aa){Xa(la,ta,oa,Aa);Ea(oa,Aa,oa,Aa)}function $a(la,ta,oa,Aa){Xa(la,ta,oa,Aa);X(oa,Aa,oa,Aa)}function bb(la,ta,oa=vb()){return null==la||null==ta?null:Ha(la,ta,oa).projector}function Ha(la,ta,oa){if(null==la||null==ta||oa.source.spatialReference===la&&oa.dest.spatialReference===ta)return oa;const Aa=Da(la,oa.source),Oa=Da(ta,oa.dest);Aa===ua.UNKNOWN&&Oa===ua.UNKNOWN?m.equals(la,ta)?oa.projector=N:oa.projector=null:
oa.projector=Ab[Aa][Oa];return oa}function vb(){return{source:{spatialReference:null,spatialReferenceId:ua.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ua.UNKNOWN,metersPerUnit:1},projector:N}}let lb=null,mb=null,O=null,eb={};const Lb=new q.SimpleObservable;let yb=function(la){function ta(){return la.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}D._inherits(ta,la);return D._createClass(ta)}(B);var ua;(function(la){la[la.UNKNOWN=
0]="UNKNOWN";la[la.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";la[la.WGS84=2]="WGS84";la[la.WEB_MERCATOR=3]="WEB_MERCATOR";la[la.WGS84_ECEF=4]="WGS84_ECEF";la[la.CGCS2000=5]="CGCS2000";la[la.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";la[la.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";la[la.GCSMARS2000=8]="GCSMARS2000";la[la.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";la[la.GCSMOON2000=10]="GCSMOON2000";la[la.LON_LAT=11]="LON_LAT";la[la.PLATE_CARREE=12]="PLATE_CARREE"})(ua||(ua={}));const Hb=u.earth.radius*
Math.PI/180,Sb=180/(u.earth.radius*Math.PI),Ab={[ua.WGS84]:{[ua.CGCS2000]:null,[ua.GCSMARS2000]:null,[ua.GCSMOON2000]:null,[ua.LON_LAT]:N,[ua.WGS84_COMPARABLE_LON_LAT]:N,[ua.SPHERICAL_ECEF]:Ea,[ua.SPHERICAL_MARS_PCPF]:null,[ua.SPHERICAL_MOON_PCPF]:null,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:X,[ua.PLATE_CARREE]:fa,[ua.WGS84]:N,[ua.WGS84_ECEF]:Ua},[ua.CGCS2000]:{[ua.CGCS2000]:N,[ua.GCSMARS2000]:null,[ua.GCSMOON2000]:null,[ua.LON_LAT]:N,[ua.WGS84_COMPARABLE_LON_LAT]:N,[ua.SPHERICAL_ECEF]:Ea,[ua.SPHERICAL_MARS_PCPF]:null,
[ua.SPHERICAL_MOON_PCPF]:null,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:null,[ua.PLATE_CARREE]:fa,[ua.WGS84]:null,[ua.WGS84_ECEF]:Ua},[ua.GCSMARS2000]:{[ua.CGCS2000]:null,[ua.GCSMARS2000]:N,[ua.GCSMOON2000]:null,[ua.LON_LAT]:N,[ua.WGS84_COMPARABLE_LON_LAT]:null,[ua.SPHERICAL_ECEF]:null,[ua.SPHERICAL_MARS_PCPF]:za,[ua.SPHERICAL_MOON_PCPF]:null,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:null,[ua.PLATE_CARREE]:null,[ua.WGS84]:null,[ua.WGS84_ECEF]:null},[ua.GCSMOON2000]:{[ua.CGCS2000]:null,[ua.GCSMARS2000]:null,[ua.GCSMOON2000]:N,
[ua.LON_LAT]:N,[ua.WGS84_COMPARABLE_LON_LAT]:null,[ua.SPHERICAL_ECEF]:null,[ua.SPHERICAL_MARS_PCPF]:null,[ua.SPHERICAL_MOON_PCPF]:va,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:null,[ua.PLATE_CARREE]:null,[ua.WGS84]:null,[ua.WGS84_ECEF]:null},[ua.WEB_MERCATOR]:{[ua.CGCS2000]:null,[ua.GCSMARS2000]:null,[ua.GCSMOON2000]:null,[ua.LON_LAT]:V,[ua.WGS84_COMPARABLE_LON_LAT]:V,[ua.SPHERICAL_ECEF]:ka,[ua.SPHERICAL_MARS_PCPF]:null,[ua.SPHERICAL_MOON_PCPF]:null,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:N,[ua.PLATE_CARREE]:ma,
[ua.WGS84]:V,[ua.WGS84_ECEF]:da},[ua.WGS84_ECEF]:{[ua.CGCS2000]:Xa,[ua.GCSMARS2000]:null,[ua.GCSMOON2000]:null,[ua.LON_LAT]:Xa,[ua.WGS84_COMPARABLE_LON_LAT]:Xa,[ua.SPHERICAL_ECEF]:Sa,[ua.SPHERICAL_MARS_PCPF]:null,[ua.SPHERICAL_MOON_PCPF]:null,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:$a,[ua.PLATE_CARREE]:function(la,ta,oa,Aa){Xa(la,ta,oa,Aa);fa(oa,Aa,oa,Aa)},[ua.WGS84]:Xa,[ua.WGS84_ECEF]:N},[ua.SPHERICAL_ECEF]:{[ua.CGCS2000]:La,[ua.GCSMARS2000]:null,[ua.GCSMOON2000]:null,[ua.LON_LAT]:La,[ua.WGS84_COMPARABLE_LON_LAT]:La,
[ua.SPHERICAL_ECEF]:N,[ua.SPHERICAL_MARS_PCPF]:null,[ua.SPHERICAL_MOON_PCPF]:null,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:Va,[ua.PLATE_CARREE]:function(la,ta,oa,Aa){La(la,ta,oa,Aa);fa(oa,Aa,oa,Aa)},[ua.WGS84]:La,[ua.WGS84_ECEF]:Ra},[ua.SPHERICAL_MARS_PCPF]:{[ua.CGCS2000]:null,[ua.GCSMARS2000]:Ka,[ua.GCSMOON2000]:null,[ua.LON_LAT]:Ka,[ua.WGS84_COMPARABLE_LON_LAT]:null,[ua.SPHERICAL_ECEF]:null,[ua.SPHERICAL_MARS_PCPF]:N,[ua.SPHERICAL_MOON_PCPF]:null,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:null,[ua.PLATE_CARREE]:null,
[ua.WGS84]:null,[ua.WGS84_ECEF]:null},[ua.SPHERICAL_MOON_PCPF]:{[ua.CGCS2000]:null,[ua.GCSMARS2000]:null,[ua.GCSMOON2000]:Na,[ua.LON_LAT]:Na,[ua.WGS84_COMPARABLE_LON_LAT]:null,[ua.SPHERICAL_ECEF]:null,[ua.SPHERICAL_MARS_PCPF]:null,[ua.SPHERICAL_MOON_PCPF]:N,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:null,[ua.PLATE_CARREE]:null,[ua.WGS84]:null,[ua.WGS84_ECEF]:null},[ua.UNKNOWN]:{[ua.CGCS2000]:null,[ua.GCSMARS2000]:null,[ua.GCSMOON2000]:null,[ua.LON_LAT]:null,[ua.WGS84_COMPARABLE_LON_LAT]:null,[ua.SPHERICAL_ECEF]:null,
[ua.SPHERICAL_MARS_PCPF]:null,[ua.SPHERICAL_MOON_PCPF]:null,[ua.UNKNOWN]:N,[ua.WEB_MERCATOR]:null,[ua.PLATE_CARREE]:null,[ua.WGS84]:null,[ua.WGS84_ECEF]:null},[ua.LON_LAT]:{[ua.CGCS2000]:N,[ua.GCSMARS2000]:N,[ua.GCSMOON2000]:N,[ua.LON_LAT]:N,[ua.WGS84_COMPARABLE_LON_LAT]:N,[ua.SPHERICAL_ECEF]:Ea,[ua.SPHERICAL_MARS_PCPF]:za,[ua.SPHERICAL_MOON_PCPF]:va,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:X,[ua.PLATE_CARREE]:fa,[ua.WGS84]:N,[ua.WGS84_ECEF]:Ua},[ua.WGS84_COMPARABLE_LON_LAT]:{[ua.CGCS2000]:null,[ua.GCSMARS2000]:null,
[ua.GCSMOON2000]:null,[ua.LON_LAT]:N,[ua.WGS84_COMPARABLE_LON_LAT]:N,[ua.SPHERICAL_ECEF]:Ea,[ua.SPHERICAL_MARS_PCPF]:null,[ua.SPHERICAL_MOON_PCPF]:null,[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:null,[ua.PLATE_CARREE]:fa,[ua.WGS84]:N,[ua.WGS84_ECEF]:Ua},[ua.PLATE_CARREE]:{[ua.CGCS2000]:ja,[ua.GCSMARS2000]:null,[ua.GCSMOON2000]:null,[ua.LON_LAT]:ja,[ua.WGS84_COMPARABLE_LON_LAT]:ja,[ua.SPHERICAL_ECEF]:function(la,ta,oa,Aa){ja(la,ta,oa,Aa);Ea(oa,Aa,oa,Aa)},[ua.SPHERICAL_MARS_PCPF]:null,[ua.SPHERICAL_MOON_PCPF]:null,
[ua.UNKNOWN]:null,[ua.WEB_MERCATOR]:function(la,ta,oa,Aa){ja(la,ta,oa,Aa);X(oa,Aa,oa,Aa)},[ua.PLATE_CARREE]:N,[ua.WGS84]:ja,[ua.WGS84_ECEF]:function(la,ta,oa,Aa){ja(la,ta,oa,Aa);Ua(oa,Aa,oa,Aa)}}},Pb={spatialReference:null,spatialReferenceId:ua.UNKNOWN},Vb={spatialReference:null,spatialReferenceId:ua.UNKNOWN},hc=vb(),pc=vb(),Db=y.deg2rad(1),Tb=y.rad2deg(1),kb=b.create(),Bb=b.create(),Ub=b.create(),Ya=b.create(),Eb=b.create();h.canProjectToWGS84ComparableLonLat=function(la){if(null==la)return!1;la=
Da(la,Pb);return!!Ab[la][ua.WGS84_COMPARABLE_LON_LAT]};h.canProjectWithoutEngine=K;h.computeENUToSphericalPCPFLocalRotation=xa;h.computeSphericalPCPFToENULocalRotation=Ca;h.computeTranslationToOriginAndRotation=function(la,ta,oa,Aa){if(null==la||null==Aa)return!1;var Oa=Da(la,Pb),Ma=Da(Aa,Vb);if(Oa===Ma&&Ma!==ua.SPHERICAL_ECEF&&Ma!==ua.SPHERICAL_MARS_PCPF&&Ma!==ua.SPHERICAL_MOON_PCPF&&(Oa!==ua.UNKNOWN||m.equals(la,Aa)))return k.fromTranslation(oa,ta),!0;if(Ma===ua.SPHERICAL_ECEF||Ma===ua.SPHERICAL_MARS_PCPF||
Ma===ua.SPHERICAL_MOON_PCPF){Oa=Ab[Oa][ua.LON_LAT];Ma=Ab[ua.LON_LAT][Ma];if(null==Oa||null==Ma)return!1;Oa(ta,0,Bb,0);Ma(Bb,0,Ub,0);xa(Db*Bb[0],Db*Bb[1],oa);oa[12]=Ub[0];oa[13]=Ub[1];oa[14]=Ub[2];return!0}if((Ma===ua.WEB_MERCATOR||Ma===ua.PLATE_CARREE)&&(Oa===ua.WGS84||Oa===ua.CGCS2000&&Ma===ua.PLATE_CARREE||Oa===ua.SPHERICAL_ECEF||Oa===ua.WEB_MERCATOR)){la=Ab[Oa][ua.LON_LAT];Ma=Ab[ua.LON_LAT][Ma];if(null==la||null==Ma)return!1;la(ta,0,Bb,0);Ma(Bb,0,Ub,0);Oa===ua.SPHERICAL_ECEF?Ca(Db*Bb[0],Db*Bb[1],
oa):k.identity(oa);oa[12]=Ub[0];oa[13]=Ub[1];oa[14]=Ub[2];return!0}return!1};h.getProjectorName=function(la,ta){switch(bb(la,ta,hc)){case N:return"copy3";case Ea:return"wgs84ToSphericalECEF";case X:return"wgs84ToWebMercator";case fa:return"wgs84ToPlateCarree";case Ua:return"wgs84ToWGS84ECEF";case V:return"webMercatorToWGS84";case ka:return"webMercatorToSphericalECEF";case da:return"webMercatorToWGS84ECEF";case ma:return"webMercatorToPlateCarree";case Xa:return"wgs84ECEFToWGS84";case Sa:return"wgs84ECEFToSphericalECEF";
case $a:return"wgs84ECEFToWebMercator";case La:return"sphericalECEFToWGS84";case Va:return"sphericalECEFToWebMercator";case Ka:return"sphericalMarsPCPFToMars2000";case Na:return"sphericalMoonPCPFToMoon2000";case Ra:return"sphericalECEFToWGS84ECEF";case za:return"mars2000ToSphericalPCPF";case va:return"moon2000ToSphericalPCPF";default:return null}};h.getTransformation=I;h.getTransformations=function(la,ta,oa=null){if(null==lb||null==mb)throw new yb;la=lb._getTransformationBySuitability(mb,la,ta,oa,
oa?.spatialReference);if(null!==la){ta=[];for(const Aa of la)ta.push(w.fromGE(Aa));return ta}return[]};h.initializeProjection=async function(la,ta,oa,Aa){if(H())return v.waitTick(Aa);if(Array.isArray(la))for(const {source:Oa,dest:Ma,geographicTransformation:Ta}of la){if(!K(Oa,Ma,Ta))return E(Aa)}else if(!K(la,ta,oa))return E(Aa);return v.waitTick(Aa)};h.isLoaded=H;h.load=E;h.localLinearScaleFactors=function(la,ta,oa,Aa){if(null==ta||null==Aa)return!1;const Oa=Da(ta,Pb);var Ma=Da(Aa,Vb);if(Oa===Ma&&
Oa!==ua.UNKNOWN||m.equals(ta,Aa))return oa[0]=1,oa[1]=1,oa[2]=1,!0;if(Oa===ua.SPHERICAL_ECEF){ta=e.length(la);la=ta/Math.sqrt(la[0]*la[0]+la[1]*la[1]);ta/=u.earth.radius;if(Ma===ua.WEB_MERCATOR)return oa[0]=la*ta,oa[1]=la*ta,oa[2]=1,!0;if(Ma===ua.WGS84||Ma===ua.CGCS2000)return Ma=Sb,oa[0]=Ma*la*ta,oa[1]=Ma*ta,oa[2]=1,!0}else if(Oa===ua.PLATE_CARREE){if(Ma===ua.WGS84||Ma===ua.CGCS2000)return oa[0]=Sb,oa[1]=Sb,oa[2]=1,!0;if(Ma===ua.WEB_MERCATOR)return Ma=la[1]/u.earth.radius,oa[0]=1,oa[1]=1/Math.cos(Ma),
oa[2]=1,!0}return!1};h.lonLatToSphericalPCPF=function(la,ta,oa,Aa){const Oa=Math.cos(oa);la[0]=Math.cos(ta)*Oa*Aa;la[1]=Math.sin(ta)*Oa*Aa;la[2]=Math.sin(oa)*Aa};h.lonLatToWebMercatorComparable=na;h.project=F;h.projectBoundingRect=function(la,ta,oa,Aa){if(null==la)return!1;if(m.equals(ta,Aa))return g.copy(oa,la),!0;kb[0]=la[0];kb[1]=la[1];kb[2]=0;if(!ca(kb,ta,0,kb,Aa,0,1))return!1;oa[0]=kb[0];oa[1]=kb[1];kb[0]=la[2];kb[1]=la[3];kb[2]=0;if(!ca(kb,ta,0,kb,Aa,0,1))return!1;oa[2]=kb[0];oa[3]=kb[1];return!0};
h.projectBoundingSphere=function(la,ta,oa,Aa){if(null==ta||null==Aa)return!1;ta=Ha(ta,Aa,pc);if(ta.projector===N)return oa[0]=la[0],oa[1]=la[1],oa[2]=la[2],oa[3]=la[3],!0;if(null==ta.projector)return!1;const {source:Oa,dest:Ma}=ta;if(Ma.spatialReferenceId===ua.WEB_MERCATOR){ta=Ab[Oa.spatialReferenceId][ua.WGS84];if(null==ta)return!1;ta(la,0,Bb,0);X(Bb,0,oa,0);oa[3]=ya(Bb[1],la[2],la[3],u.earth.radius);return!0}if(Oa.spatialReferenceId!==ua.WGS84&&Oa.spatialReferenceId!==ua.CGCS2000||Ma.spatialReferenceId!==
ua.PLATE_CARREE)ta.projector(la,0,oa,0),oa[3]=la[3]*(Oa.metersPerUnit??1)/(Ma.metersPerUnit??1);else{Aa=Ab[ua.SPHERICAL_ECEF][ua.PLATE_CARREE];let Ta=la[3];null!=Ab[Oa.spatialReferenceId][ua.SPHERICAL_ECEF]&&null!=Aa&&(Ta=ya(la[1],la[2],la[3],u.earth.radius));ta.projector(la,0,oa,0);oa[3]=Ta}return!0};h.projectBuffer=ca;h.projectDirection=function(la,ta,oa,Aa,Oa){e.copy(Ya,la);e.add(Eb,la,ta);S(Ya,oa,Ya,Oa);S(Eb,oa,Eb,Oa);e.subtract(Aa,Eb,Ya);e.normalize(Aa,Aa)};h.projectExtent=function(la,ta,oa=
ta.spatialReference,Aa=0){return null!=la.spatialReference&&null!=oa&&null!=R(la,la.spatialReference,ta,oa,Aa)};h.projectMany=J;h.projectMultipoint=function(la,ta,oa=ta.spatialReference,Aa=0){return null!=la.spatialReference&&null!=oa&&null!=ea(la,la.spatialReference,ta,oa,Aa)};h.projectOrLoad=function(la,ta){la=L([la],ta);return null!=la.pending?{pending:la.pending,geometry:null}:null!=la.geometries?{pending:null,geometry:la.geometries[0]}:{pending:null,geometry:null}};h.projectOrLoadMany=L;h.projectPoint=
function(la,ta,oa=ta.spatialReference,Aa=0){return null!=oa&&null!=la.spatialReference&&null!=Y(la,la.spatialReference,ta,oa,Aa)};h.projectPointToVector=function(la,ta,oa,Aa=0){Ya[0]=la.x;Ya[1]=la.y;const Oa=la.z;Ya[2]=void 0!==Oa?Oa:Aa;return ca(Ya,la.spatialReference,0,ta,oa,0,1)};h.projectPointToWGS84ComparableLonLat=function(la,ta){Ya[0]=la.x;Ya[1]=la.y;const oa=la.z;Ya[2]=void 0!==oa?oa:0;return Z(Ya,la.spatialReference,ta)};h.projectPolygon=function(la,ta,oa=ta.spatialReference,Aa=0){return null!=
la.spatialReference&&null!=oa&&null!=T(la,la.spatialReference,ta,oa,Aa)};h.projectPolygonToWGS84ComparableLonLat=function({hasZ:la,spatialReference:ta,rings:oa},Aa,Oa=0){ta=Da(ta,Pb);ta=Ab[ta][ua.WGS84_COMPARABLE_LON_LAT];if(null==ta)return!1;la=la?Ma=>Ma:Ma=>e.set(Ya,Ma[0],Ma[1],Oa);for(const Ma of oa){oa=[];for(const Ta of Ma){const ab=[0,0,Oa];ta(la(Ta),0,ab,0);oa.push(ab)}Aa.push(oa)}return!0};h.projectPolyline=function(la,ta,oa=ta.spatialReference,Aa=0){return null!=la.spatialReference&&null!=
oa&&null!=aa(la,la.spatialReference,ta,oa,Aa)};h.projectPolylineToWGS84ComparableLonLat=function({hasZ:la,spatialReference:ta,paths:oa},Aa,Oa=0){ta=Da(ta,Pb);ta=Ab[ta][ua.WGS84_COMPARABLE_LON_LAT];if(null==ta)return!1;la=la?Ma=>Ma:Ma=>e.set(Ya,Ma[0],Ma[1],Oa);for(const Ma of oa){oa=[];for(const Ta of Ma){const ab=[0,0,Oa];ta(la(Ta),0,ab,0);oa.push(ab)}Aa.push(oa)}return!0};h.projectVectorToDehydratedPoint=function(la,ta,oa){return ca(la,ta,0,Ya,oa.spatialReference,0,1)?(oa.x=Ya[0],oa.y=Ya[1],oa.z=
Ya[2],oa):null};h.projectVectorToPoint=function(la,ta,oa){if(null==ta||null==oa)return null;const Aa=new n({spatialReference:oa});return ca(la,ta,0,Ya,oa,0,1)?(Aa.x=Ya[0],Aa.y=Ya[1],Aa.z=Ya[2],Aa):null};h.projectVectorToVector=S;h.projectVectorToWGS84ComparableLonLat=function(la,ta,oa){return Z(la,ta,oa)};h.projectWithoutEngine=P;h.projectXYZToVector=W;h.sphericalPCPFtoLonLatElevation=Ga;h.test={get loadPromise(){return O}};h.tryProjectWithZConversion=G;h.unload=function(){O=mb=lb=null;eb={}};Object.defineProperty(h,
Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(l,h,D){D=function(B){function y(){return B.apply(this,arguments)||this}h._inherits(y,B);y.prototype.notify=function(){var v=this._observers;if(v&&0<v.length){v=v.slice();for(const C of v)C.onInvalidated(),C.onCommitted()}};return h._createClass(y)}(D.ObservableBase);l.SimpleObservable=D;Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(l,h,D){function B(N,V){N[0]=V[0];N[1]=V[1];N[2]=V[2];N[3]=V[3];N[4]=V[4];N[5]=V[5];N[6]=V[6];N[7]=V[7];N[8]=V[8];N[9]=V[9];N[10]=V[10];N[11]=V[11];N[12]=V[12];N[13]=V[13];N[14]=V[14];N[15]=V[15];return N}function y(N,V,ka,da,na,X,fa,ja,ma,ra,va,za,Ea,Ga,Na,Ka,La){N[0]=V;N[1]=ka;N[2]=da;N[3]=na;N[4]=X;N[5]=fa;N[6]=ja;N[7]=ma;N[8]=ra;N[9]=va;N[10]=za;N[11]=Ea;N[12]=Ga;N[13]=Na;N[14]=
Ka;N[15]=La;return N}function v(N){N[0]=1;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=1;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=1;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function C(N,V){if(N===V){const ka=V[1],da=V[2],na=V[3],X=V[6],fa=V[7],ja=V[11];N[1]=V[4];N[2]=V[8];N[3]=V[12];N[4]=ka;N[6]=V[9];N[7]=V[13];N[8]=da;N[9]=X;N[11]=V[14];N[12]=na;N[13]=fa;N[14]=ja}else N[0]=V[0],N[1]=V[4],N[2]=V[8],N[3]=V[12],N[4]=V[1],N[5]=V[5],N[6]=V[9],N[7]=V[13],N[8]=V[2],N[9]=V[6],N[10]=V[10],N[11]=V[14],N[12]=V[3],N[13]=
V[7],N[14]=V[11],N[15]=V[15];return N}function t(N,V){q(N,V)||v(N);return N}function q(N,V){const ka=V[0],da=V[1],na=V[2],X=V[3],fa=V[4],ja=V[5],ma=V[6],ra=V[7],va=V[8],za=V[9],Ea=V[10],Ga=V[11],Na=V[12],Ka=V[13],La=V[14];V=V[15];const Va=ka*ja-da*fa,Ra=ka*ma-na*fa,Ua=ka*ra-X*fa,Xa=da*ma-na*ja,Sa=da*ra-X*ja,$a=na*ra-X*ma,bb=va*Ka-za*Na,Ha=va*La-Ea*Na,vb=va*V-Ga*Na,lb=za*La-Ea*Ka,mb=za*V-Ga*Ka,O=Ea*V-Ga*La;let eb=Va*O-Ra*mb+Ua*lb+Xa*vb-Sa*Ha+$a*bb;if(!eb)return null;eb=1/eb;N[0]=(ja*O-ma*mb+ra*lb)*
eb;N[1]=(na*mb-da*O-X*lb)*eb;N[2]=(Ka*$a-La*Sa+V*Xa)*eb;N[3]=(Ea*Sa-za*$a-Ga*Xa)*eb;N[4]=(ma*vb-fa*O-ra*Ha)*eb;N[5]=(ka*O-na*vb+X*Ha)*eb;N[6]=(La*Ua-Na*$a-V*Ra)*eb;N[7]=(va*$a-Ea*Ua+Ga*Ra)*eb;N[8]=(fa*mb-ja*vb+ra*bb)*eb;N[9]=(da*vb-ka*mb-X*bb)*eb;N[10]=(Na*Sa-Ka*Ua+V*Va)*eb;N[11]=(za*Ua-va*Sa-Ga*Va)*eb;N[12]=(ja*Ha-fa*lb-ma*bb)*eb;N[13]=(ka*lb-da*Ha+na*bb)*eb;N[14]=(Ka*Ra-Na*Xa-La*Va)*eb;N[15]=(va*Xa-za*Ra+Ea*Va)*eb;return N}function k(N,V){const ka=V[0],da=V[1],na=V[2],X=V[3],fa=V[4],ja=V[5],ma=
V[6],ra=V[7],va=V[8],za=V[9],Ea=V[10],Ga=V[11],Na=V[12],Ka=V[13],La=V[14];V=V[15];N[0]=ja*(Ea*V-Ga*La)-za*(ma*V-ra*La)+Ka*(ma*Ga-ra*Ea);N[1]=-(da*(Ea*V-Ga*La)-za*(na*V-X*La)+Ka*(na*Ga-X*Ea));N[2]=da*(ma*V-ra*La)-ja*(na*V-X*La)+Ka*(na*ra-X*ma);N[3]=-(da*(ma*Ga-ra*Ea)-ja*(na*Ga-X*Ea)+za*(na*ra-X*ma));N[4]=-(fa*(Ea*V-Ga*La)-va*(ma*V-ra*La)+Na*(ma*Ga-ra*Ea));N[5]=ka*(Ea*V-Ga*La)-va*(na*V-X*La)+Na*(na*Ga-X*Ea);N[6]=-(ka*(ma*V-ra*La)-fa*(na*V-X*La)+Na*(na*ra-X*ma));N[7]=ka*(ma*Ga-ra*Ea)-fa*(na*Ga-X*Ea)+
va*(na*ra-X*ma);N[8]=fa*(za*V-Ga*Ka)-va*(ja*V-ra*Ka)+Na*(ja*Ga-ra*za);N[9]=-(ka*(za*V-Ga*Ka)-va*(da*V-X*Ka)+Na*(da*Ga-X*za));N[10]=ka*(ja*V-ra*Ka)-fa*(da*V-X*Ka)+Na*(da*ra-X*ja);N[11]=-(ka*(ja*Ga-ra*za)-fa*(da*Ga-X*za)+va*(da*ra-X*ja));N[12]=-(fa*(za*La-Ea*Ka)-va*(ja*La-ma*Ka)+Na*(ja*Ea-ma*za));N[13]=ka*(za*La-Ea*Ka)-va*(da*La-na*Ka)+Na*(da*Ea-na*za);N[14]=-(ka*(ja*La-ma*Ka)-fa*(da*La-na*Ka)+Na*(da*ma-na*ja));N[15]=ka*(ja*Ea-ma*za)-fa*(da*Ea-na*za)+va*(da*ma-na*ja);return N}function e(N){const V=
N[0],ka=N[1],da=N[2],na=N[3],X=N[4],fa=N[5],ja=N[6],ma=N[7],ra=N[8],va=N[9],za=N[10],Ea=N[11],Ga=N[12],Na=N[13],Ka=N[14];N=N[15];return(V*fa-ka*X)*(za*N-Ea*Ka)-(V*ja-da*X)*(va*N-Ea*Na)+(V*ma-na*X)*(va*Ka-za*Na)+(ka*ja-da*fa)*(ra*N-Ea*Ga)-(ka*ma-na*fa)*(ra*Ka-za*Ga)+(da*ma-na*ja)*(ra*Na-va*Ga)}function b(N,V,ka){const da=V[0],na=V[1],X=V[2],fa=V[3],ja=V[4],ma=V[5],ra=V[6],va=V[7],za=V[8],Ea=V[9],Ga=V[10],Na=V[11],Ka=V[12],La=V[13],Va=V[14];V=V[15];let Ra=ka[0],Ua=ka[1],Xa=ka[2],Sa=ka[3];N[0]=Ra*da+
Ua*ja+Xa*za+Sa*Ka;N[1]=Ra*na+Ua*ma+Xa*Ea+Sa*La;N[2]=Ra*X+Ua*ra+Xa*Ga+Sa*Va;N[3]=Ra*fa+Ua*va+Xa*Na+Sa*V;Ra=ka[4];Ua=ka[5];Xa=ka[6];Sa=ka[7];N[4]=Ra*da+Ua*ja+Xa*za+Sa*Ka;N[5]=Ra*na+Ua*ma+Xa*Ea+Sa*La;N[6]=Ra*X+Ua*ra+Xa*Ga+Sa*Va;N[7]=Ra*fa+Ua*va+Xa*Na+Sa*V;Ra=ka[8];Ua=ka[9];Xa=ka[10];Sa=ka[11];N[8]=Ra*da+Ua*ja+Xa*za+Sa*Ka;N[9]=Ra*na+Ua*ma+Xa*Ea+Sa*La;N[10]=Ra*X+Ua*ra+Xa*Ga+Sa*Va;N[11]=Ra*fa+Ua*va+Xa*Na+Sa*V;Ra=ka[12];Ua=ka[13];Xa=ka[14];Sa=ka[15];N[12]=Ra*da+Ua*ja+Xa*za+Sa*Ka;N[13]=Ra*na+Ua*ma+Xa*Ea+
Sa*La;N[14]=Ra*X+Ua*ra+Xa*Ga+Sa*Va;N[15]=Ra*fa+Ua*va+Xa*Na+Sa*V;return N}function c(N,V,ka){const da=ka[0],na=ka[1];ka=ka[2];if(V===N)N[12]=V[0]*da+V[4]*na+V[8]*ka+V[12],N[13]=V[1]*da+V[5]*na+V[9]*ka+V[13],N[14]=V[2]*da+V[6]*na+V[10]*ka+V[14],N[15]=V[3]*da+V[7]*na+V[11]*ka+V[15];else{const X=V[0],fa=V[1],ja=V[2],ma=V[3],ra=V[4],va=V[5],za=V[6],Ea=V[7],Ga=V[8],Na=V[9],Ka=V[10],La=V[11];N[0]=X;N[1]=fa;N[2]=ja;N[3]=ma;N[4]=ra;N[5]=va;N[6]=za;N[7]=Ea;N[8]=Ga;N[9]=Na;N[10]=Ka;N[11]=La;N[12]=X*da+ra*na+
Ga*ka+V[12];N[13]=fa*da+va*na+Na*ka+V[13];N[14]=ja*da+za*na+Ka*ka+V[14];N[15]=ma*da+Ea*na+La*ka+V[15]}return N}function f(N,V,ka){const da=ka[0],na=ka[1];ka=ka[2];N[0]=V[0]*da;N[1]=V[1]*da;N[2]=V[2]*da;N[3]=V[3]*da;N[4]=V[4]*na;N[5]=V[5]*na;N[6]=V[6]*na;N[7]=V[7]*na;N[8]=V[8]*ka;N[9]=V[9]*ka;N[10]=V[10]*ka;N[11]=V[11]*ka;N[12]=V[12];N[13]=V[13];N[14]=V[14];N[15]=V[15];return N}function a(N,V,ka,da){let na=da[0],X=da[1];da=da[2];let fa=Math.sqrt(na*na+X*X+da*da);var ja=void 0,ma=void 0;let ra=void 0,
va=void 0,za=void 0,Ea=void 0,Ga=void 0,Na=void 0,Ka=void 0,La=void 0,Va=void 0,Ra=void 0,Ua=void 0,Xa=void 0,Sa=void 0,$a=void 0,bb=void 0,Ha=void 0,vb=void 0,lb=void 0,mb=void 0,O=void 0;ma=ja=void 0;if(fa<D.getEpsilon())return null;fa=1/fa;na*=fa;X*=fa;da*=fa;ja=Math.sin(ka);ma=Math.cos(ka);ra=1-ma;va=V[0];za=V[1];Ea=V[2];Ga=V[3];Na=V[4];Ka=V[5];La=V[6];Va=V[7];Ra=V[8];Ua=V[9];Xa=V[10];Sa=V[11];$a=na*na*ra+ma;bb=X*na*ra+da*ja;Ha=da*na*ra-X*ja;vb=na*X*ra-da*ja;lb=X*X*ra+ma;mb=da*X*ra+na*ja;O=na*
da*ra+X*ja;ja=X*da*ra-na*ja;ma=da*da*ra+ma;N[0]=va*$a+Na*bb+Ra*Ha;N[1]=za*$a+Ka*bb+Ua*Ha;N[2]=Ea*$a+La*bb+Xa*Ha;N[3]=Ga*$a+Va*bb+Sa*Ha;N[4]=va*vb+Na*lb+Ra*mb;N[5]=za*vb+Ka*lb+Ua*mb;N[6]=Ea*vb+La*lb+Xa*mb;N[7]=Ga*vb+Va*lb+Sa*mb;N[8]=va*O+Na*ja+Ra*ma;N[9]=za*O+Ka*ja+Ua*ma;N[10]=Ea*O+La*ja+Xa*ma;N[11]=Ga*O+Va*ja+Sa*ma;V!==N&&(N[12]=V[12],N[13]=V[13],N[14]=V[14],N[15]=V[15]);return N}function d(N,V,ka){const da=Math.sin(ka);ka=Math.cos(ka);const na=V[4],X=V[5],fa=V[6],ja=V[7],ma=V[8],ra=V[9],va=V[10],
za=V[11];V!==N&&(N[0]=V[0],N[1]=V[1],N[2]=V[2],N[3]=V[3],N[12]=V[12],N[13]=V[13],N[14]=V[14],N[15]=V[15]);N[4]=na*ka+ma*da;N[5]=X*ka+ra*da;N[6]=fa*ka+va*da;N[7]=ja*ka+za*da;N[8]=ma*ka-na*da;N[9]=ra*ka-X*da;N[10]=va*ka-fa*da;N[11]=za*ka-ja*da;return N}function n(N,V,ka){const da=Math.sin(ka);ka=Math.cos(ka);const na=V[0],X=V[1],fa=V[2],ja=V[3],ma=V[8],ra=V[9],va=V[10],za=V[11];V!==N&&(N[4]=V[4],N[5]=V[5],N[6]=V[6],N[7]=V[7],N[12]=V[12],N[13]=V[13],N[14]=V[14],N[15]=V[15]);N[0]=na*ka-ma*da;N[1]=X*ka-
ra*da;N[2]=fa*ka-va*da;N[3]=ja*ka-za*da;N[8]=na*da+ma*ka;N[9]=X*da+ra*ka;N[10]=fa*da+va*ka;N[11]=ja*da+za*ka;return N}function r(N,V,ka){const da=Math.sin(ka);ka=Math.cos(ka);const na=V[0],X=V[1],fa=V[2],ja=V[3],ma=V[4],ra=V[5],va=V[6],za=V[7];V!==N&&(N[8]=V[8],N[9]=V[9],N[10]=V[10],N[11]=V[11],N[12]=V[12],N[13]=V[13],N[14]=V[14],N[15]=V[15]);N[0]=na*ka+ma*da;N[1]=X*ka+ra*da;N[2]=fa*ka+va*da;N[3]=ja*ka+za*da;N[4]=ma*ka-na*da;N[5]=ra*ka-X*da;N[6]=va*ka-fa*da;N[7]=za*ka-ja*da;return N}function p(N,
V){N[0]=1;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=1;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=1;N[11]=0;N[12]=V[0];N[13]=V[1];N[14]=V[2];N[15]=1;return N}function g(N,V){N[0]=V[0];N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=V[1];N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=V[2];N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function u(N,V,ka){if(0===V)return v(N);let da=ka[0],na=ka[1];ka=ka[2];let X=Math.sqrt(da*da+na*na+ka*ka),fa=void 0,ja=void 0,ma=void 0;if(X<D.getEpsilon())return null;X=1/X;da*=X;na*=X;ka*=X;fa=Math.sin(V);ja=
Math.cos(V);ma=1-ja;N[0]=da*da*ma+ja;N[1]=na*da*ma+ka*fa;N[2]=ka*da*ma-na*fa;N[3]=0;N[4]=da*na*ma-ka*fa;N[5]=na*na*ma+ja;N[6]=ka*na*ma+da*fa;N[7]=0;N[8]=da*ka*ma+na*fa;N[9]=na*ka*ma-da*fa;N[10]=ka*ka*ma+ja;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function x(N,V){const ka=Math.sin(V);V=Math.cos(V);N[0]=1;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=V;N[6]=ka;N[7]=0;N[8]=0;N[9]=-ka;N[10]=V;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function w(N,V){const ka=Math.sin(V);V=Math.cos(V);N[0]=V;N[1]=0;
N[2]=-ka;N[3]=0;N[4]=0;N[5]=1;N[6]=0;N[7]=0;N[8]=ka;N[9]=0;N[10]=V;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function m(N,V){const ka=Math.sin(V);V=Math.cos(V);N[0]=V;N[1]=ka;N[2]=0;N[3]=0;N[4]=-ka;N[5]=V;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=1;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function z(N,V,ka){var da=V[0],na=V[1],X=V[2],fa=V[3],ja=da+da,ma=na+na;const ra=X+X;V=da*ja;const va=da*ma;da*=ra;const za=na*ma;na*=ra;X*=ra;ja*=fa;ma*=fa;fa*=ra;N[0]=1-(za+X);N[1]=va+fa;N[2]=da-ma;N[3]=
0;N[4]=va-fa;N[5]=1-(V+X);N[6]=na+ja;N[7]=0;N[8]=da+ma;N[9]=na-ja;N[10]=1-(V+za);N[11]=0;N[12]=ka[0];N[13]=ka[1];N[14]=ka[2];N[15]=1;return N}function A(N,V){const ka=Da,da=-V[0],na=-V[1],X=-V[2],fa=V[3],ja=V[4],ma=V[5],ra=V[6],va=V[7],za=da*da+na*na+X*X+fa*fa;0<za?(ka[0]=2*(ja*fa+va*da+ma*X-ra*na)/za,ka[1]=2*(ma*fa+va*na+ra*da-ja*X)/za,ka[2]=2*(ra*fa+va*X+ja*na-ma*da)/za):(ka[0]=2*(ja*fa+va*da+ma*X-ra*na),ka[1]=2*(ma*fa+va*na+ra*da-ja*X),ka[2]=2*(ra*fa+va*X+ja*na-ma*da));z(N,V,ka);return N}function H(N,
V){N[0]=V[12];N[1]=V[13];N[2]=V[14];return N}function E(N,V){const ka=V[0],da=V[1],na=V[2],X=V[4],fa=V[5],ja=V[6],ma=V[8],ra=V[9];V=V[10];N[0]=Math.sqrt(ka*ka+da*da+na*na);N[1]=Math.sqrt(X*X+fa*fa+ja*ja);N[2]=Math.sqrt(ma*ma+ra*ra+V*V);return N}function F(N,V){const ka=V[0]+V[5]+V[10];let da=0;0<ka?(da=2*Math.sqrt(ka+1),N[3]=.25*da,N[0]=(V[6]-V[9])/da,N[1]=(V[8]-V[2])/da,N[2]=(V[1]-V[4])/da):V[0]>V[5]&&V[0]>V[10]?(da=2*Math.sqrt(1+V[0]-V[5]-V[10]),N[3]=(V[6]-V[9])/da,N[0]=.25*da,N[1]=(V[1]+V[4])/
da,N[2]=(V[8]+V[2])/da):V[5]>V[10]?(da=2*Math.sqrt(1+V[5]-V[0]-V[10]),N[3]=(V[8]-V[2])/da,N[0]=(V[1]+V[4])/da,N[1]=.25*da,N[2]=(V[6]+V[9])/da):(da=2*Math.sqrt(1+V[10]-V[0]-V[5]),N[3]=(V[1]-V[4])/da,N[0]=(V[8]+V[2])/da,N[1]=(V[6]+V[9])/da,N[2]=.25*da);return N}function J(N,V,ka,da){var na=V[0],X=V[1],fa=V[2],ja=V[3],ma=na+na,ra=X+X,va=fa+fa;V=na*ma;const za=na*ra;na*=va;const Ea=X*ra;X*=va;fa*=va;ma*=ja;ra*=ja;ja*=va;va=da[0];const Ga=da[1];da=da[2];N[0]=(1-(Ea+fa))*va;N[1]=(za+ja)*va;N[2]=(na-ra)*
va;N[3]=0;N[4]=(za-ja)*Ga;N[5]=(1-(V+fa))*Ga;N[6]=(X+ma)*Ga;N[7]=0;N[8]=(na+ra)*da;N[9]=(X-ma)*da;N[10]=(1-(V+Ea))*da;N[11]=0;N[12]=ka[0];N[13]=ka[1];N[14]=ka[2];N[15]=1;return N}function L(N,V,ka,da,na){var X=V[0],fa=V[1],ja=V[2],ma=V[3],ra=X+X,va=fa+fa,za=ja+ja;V=X*ra;var Ea=X*va,Ga=X*za;X=fa*va;fa*=za;var Na=ja*za;ja=ma*ra;va*=ma;const Ka=ma*za;var La=da[0],Va=da[1];za=da[2];da=na[0];ma=na[1];na=na[2];ra=(1-(X+Na))*La;const Ra=(Ea+Ka)*La;La*=Ga-va;Ea=(Ea-Ka)*Va;Na=(1-(V+Na))*Va;Va*=fa+ja;Ga=(Ga+
va)*za;fa=(fa-ja)*za;V=(1-(V+X))*za;N[0]=ra;N[1]=Ra;N[2]=La;N[3]=0;N[4]=Ea;N[5]=Na;N[6]=Va;N[7]=0;N[8]=Ga;N[9]=fa;N[10]=V;N[11]=0;N[12]=ka[0]+da-(ra*da+Ea*ma+Ga*na);N[13]=ka[1]+ma-(Ra*da+Na*ma+fa*na);N[14]=ka[2]+na-(La*da+Va*ma+V*na);N[15]=1;return N}function I(N,V){var ka=V[0],da=V[1],na=V[2];V=V[3];var X=ka+ka,fa=da+da;const ja=na+na;ka*=X;const ma=da*X;da*=fa;const ra=na*X,va=na*fa;na*=ja;X*=V;fa*=V;V*=ja;N[0]=1-da-na;N[1]=ma+V;N[2]=ra-fa;N[3]=0;N[4]=ma-V;N[5]=1-ka-na;N[6]=va+X;N[7]=0;N[8]=ra+
fa;N[9]=va-X;N[10]=1-ka-da;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function G(N,V,ka,da,na,X,fa){const ja=1/(ka-V),ma=1/(na-da),ra=1/(X-fa);N[0]=2*X*ja;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=2*X*ma;N[6]=0;N[7]=0;N[8]=(ka+V)*ja;N[9]=(na+da)*ma;N[10]=(fa+X)*ra;N[11]=-1;N[12]=0;N[13]=0;N[14]=fa*X*2*ra;N[15]=0;return N}function K(N,V,ka,da,na){V=1/Math.tan(V/2);let X=void 0;N[0]=V/ka;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=V;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[11]=-1;N[12]=0;N[13]=0;N[15]=0;null!=na&&Infinity!==
na?(X=1/(da-na),N[10]=(na+da)*X,N[14]=2*na*da*X):(N[10]=-1,N[14]=-2*da);return N}function P(N,V,ka,da){const na=Math.tan(V.upDegrees*Math.PI/180),X=Math.tan(V.downDegrees*Math.PI/180),fa=Math.tan(V.leftDegrees*Math.PI/180);V=Math.tan(V.rightDegrees*Math.PI/180);const ja=2/(fa+V),ma=2/(na+X);N[0]=ja;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=ma;N[6]=0;N[7]=0;N[8]=-((fa-V)*ja*.5);N[9]=(na-X)*ma*.5;N[10]=da/(ka-da);N[11]=-1;N[12]=0;N[13]=0;N[14]=da*ka/(ka-da);N[15]=0;return N}function Y(N,V,ka,da,na,X,fa){const ja=
1/(V-ka),ma=1/(da-na),ra=1/(X-fa);N[0]=-2*ja;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=-2*ma;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=2*ra;N[11]=0;N[12]=(V+ka)*ja;N[13]=(na+da)*ma;N[14]=(fa+X)*ra;N[15]=1;return N}function ea(N,V,ka,da){const na=V[0],X=V[1];V=V[2];let fa=na-ka[0],ja=X-ka[1];ka=V-ka[2];var ma=D.getEpsilon();if(Math.abs(fa)<ma&&Math.abs(ja)<ma&&Math.abs(ka)<ma)v(N);else{var ra=1/Math.sqrt(fa*fa+ja*ja+ka*ka);fa*=ra;ja*=ra;ka*=ra;ra=da[0];var va=da[1];ma=da[2];da=va*ka-ma*ja;ma=ma*fa-ra*ka;va=ra*ja-va*
fa;(ra=Math.sqrt(da*da+ma*ma+va*va))?(ra=1/ra,da*=ra,ma*=ra,va*=ra):va=ma=da=0;var za=ja*va-ka*ma,Ea=ka*da-fa*va,Ga=fa*ma-ja*da;(ra=Math.sqrt(za*za+Ea*Ea+Ga*Ga))?(ra=1/ra,za*=ra,Ea*=ra,Ga*=ra):Ga=Ea=za=0;N[0]=da;N[1]=za;N[2]=fa;N[3]=0;N[4]=ma;N[5]=Ea;N[6]=ja;N[7]=0;N[8]=va;N[9]=Ga;N[10]=ka;N[11]=0;N[12]=-(da*na+ma*X+va*V);N[13]=-(za*na+Ea*X+Ga*V);N[14]=-(fa*na+ja*X+ka*V);N[15]=1}}function aa(N,V,ka,da){const na=V[0],X=V[1];V=V[2];var fa=da[0];const ja=da[1];var ma=da[2];da=na-ka[0];let ra=X-ka[1];
ka=V-ka[2];let va=da*da+ra*ra+ka*ka;0<va&&(va=1/Math.sqrt(va),da*=va,ra*=va,ka*=va);let za=ja*ka-ma*ra;ma=ma*da-fa*ka;fa=fa*ra-ja*da;va=za*za+ma*ma+fa*fa;0<va&&(va=1/Math.sqrt(va),za*=va,ma*=va,fa*=va);N[0]=za;N[1]=ma;N[2]=fa;N[3]=0;N[4]=ra*fa-ka*ma;N[5]=ka*za-da*fa;N[6]=da*ma-ra*za;N[7]=0;N[8]=da;N[9]=ra;N[10]=ka;N[11]=0;N[12]=na;N[13]=X;N[14]=V;N[15]=1;return N}function T(N){return"mat4("+N[0]+", "+N[1]+", "+N[2]+", "+N[3]+", "+N[4]+", "+N[5]+", "+N[6]+", "+N[7]+", "+N[8]+", "+N[9]+", "+N[10]+", "+
N[11]+", "+N[12]+", "+N[13]+", "+N[14]+", "+N[15]+")"}function R(N){return Math.sqrt(N[0]**2+N[1]**2+N[2]**2+N[3]**2+N[4]**2+N[5]**2+N[6]**2+N[7]**2+N[8]**2+N[9]**2+N[10]**2+N[11]**2+N[12]**2+N[13]**2+N[14]**2+N[15]**2)}function W(N,V,ka){N[0]=V[0]+ka[0];N[1]=V[1]+ka[1];N[2]=V[2]+ka[2];N[3]=V[3]+ka[3];N[4]=V[4]+ka[4];N[5]=V[5]+ka[5];N[6]=V[6]+ka[6];N[7]=V[7]+ka[7];N[8]=V[8]+ka[8];N[9]=V[9]+ka[9];N[10]=V[10]+ka[10];N[11]=V[11]+ka[11];N[12]=V[12]+ka[12];N[13]=V[13]+ka[13];N[14]=V[14]+ka[14];N[15]=V[15]+
ka[15];return N}function S(N,V,ka){N[0]=V[0]-ka[0];N[1]=V[1]-ka[1];N[2]=V[2]-ka[2];N[3]=V[3]-ka[3];N[4]=V[4]-ka[4];N[5]=V[5]-ka[5];N[6]=V[6]-ka[6];N[7]=V[7]-ka[7];N[8]=V[8]-ka[8];N[9]=V[9]-ka[9];N[10]=V[10]-ka[10];N[11]=V[11]-ka[11];N[12]=V[12]-ka[12];N[13]=V[13]-ka[13];N[14]=V[14]-ka[14];N[15]=V[15]-ka[15];return N}function Z(N,V,ka){N[0]=V[0]*ka;N[1]=V[1]*ka;N[2]=V[2]*ka;N[3]=V[3]*ka;N[4]=V[4]*ka;N[5]=V[5]*ka;N[6]=V[6]*ka;N[7]=V[7]*ka;N[8]=V[8]*ka;N[9]=V[9]*ka;N[10]=V[10]*ka;N[11]=V[11]*ka;N[12]=
V[12]*ka;N[13]=V[13]*ka;N[14]=V[14]*ka;N[15]=V[15]*ka;return N}function ca(N,V,ka,da){N[0]=V[0]+ka[0]*da;N[1]=V[1]+ka[1]*da;N[2]=V[2]+ka[2]*da;N[3]=V[3]+ka[3]*da;N[4]=V[4]+ka[4]*da;N[5]=V[5]+ka[5]*da;N[6]=V[6]+ka[6]*da;N[7]=V[7]+ka[7]*da;N[8]=V[8]+ka[8]*da;N[9]=V[9]+ka[9]*da;N[10]=V[10]+ka[10]*da;N[11]=V[11]+ka[11]*da;N[12]=V[12]+ka[12]*da;N[13]=V[13]+ka[13]*da;N[14]=V[14]+ka[14]*da;N[15]=V[15]+ka[15]*da;return N}function qa(N,V){return N[0]===V[0]&&N[1]===V[1]&&N[2]===V[2]&&N[3]===V[3]&&N[4]===V[4]&&
N[5]===V[5]&&N[6]===V[6]&&N[7]===V[7]&&N[8]===V[8]&&N[9]===V[9]&&N[10]===V[10]&&N[11]===V[11]&&N[12]===V[12]&&N[13]===V[13]&&N[14]===V[14]&&N[15]===V[15]}function ya(N,V){if(N===V)return!0;const ka=N[0],da=N[1],na=N[2],X=N[3],fa=N[4],ja=N[5],ma=N[6],ra=N[7],va=N[8],za=N[9],Ea=N[10],Ga=N[11],Na=N[12],Ka=N[13],La=N[14];N=N[15];const Va=V[0],Ra=V[1],Ua=V[2],Xa=V[3],Sa=V[4],$a=V[5],bb=V[6],Ha=V[7],vb=V[8],lb=V[9],mb=V[10],O=V[11],eb=V[12],Lb=V[13],yb=V[14];V=V[15];const ua=D.getEpsilon();return Math.abs(ka-
Va)<=ua*Math.max(1,Math.abs(ka),Math.abs(Va))&&Math.abs(da-Ra)<=ua*Math.max(1,Math.abs(da),Math.abs(Ra))&&Math.abs(na-Ua)<=ua*Math.max(1,Math.abs(na),Math.abs(Ua))&&Math.abs(X-Xa)<=ua*Math.max(1,Math.abs(X),Math.abs(Xa))&&Math.abs(fa-Sa)<=ua*Math.max(1,Math.abs(fa),Math.abs(Sa))&&Math.abs(ja-$a)<=ua*Math.max(1,Math.abs(ja),Math.abs($a))&&Math.abs(ma-bb)<=ua*Math.max(1,Math.abs(ma),Math.abs(bb))&&Math.abs(ra-Ha)<=ua*Math.max(1,Math.abs(ra),Math.abs(Ha))&&Math.abs(va-vb)<=ua*Math.max(1,Math.abs(va),
Math.abs(vb))&&Math.abs(za-lb)<=ua*Math.max(1,Math.abs(za),Math.abs(lb))&&Math.abs(Ea-mb)<=ua*Math.max(1,Math.abs(Ea),Math.abs(mb))&&Math.abs(Ga-O)<=ua*Math.max(1,Math.abs(Ga),Math.abs(O))&&Math.abs(Na-eb)<=ua*Math.max(1,Math.abs(Na),Math.abs(eb))&&Math.abs(Ka-Lb)<=ua*Math.max(1,Math.abs(Ka),Math.abs(Lb))&&Math.abs(La-yb)<=ua*Math.max(1,Math.abs(La),Math.abs(yb))&&Math.abs(N-V)<=ua*Math.max(1,Math.abs(N),Math.abs(V))}function xa(N){const V=D.getEpsilon(),ka=N[0],da=N[1],na=N[2],X=N[4],fa=N[5],ja=
N[6],ma=N[8],ra=N[9];N=N[10];return Math.abs(1-(ka*ka+X*X+ma*ma))<=V&&Math.abs(1-(da*da+fa*fa+ra*ra))<=V&&Math.abs(1-(na*na+ja*ja+N*N))<=V}function Ca(N){return 1===N[0]&&0===N[1]&&0===N[2]&&0===N[4]&&1===N[5]&&0===N[6]&&0===N[8]&&0===N[9]&&1===N[10]}const Da=h.create();h=Object.freeze(Object.defineProperty({__proto__:null,add:W,adjoint:k,copy:B,determinant:e,equals:ya,exactEquals:qa,frob:R,fromQuat:I,fromQuat2:A,fromRotation:u,fromRotationTranslation:z,fromRotationTranslationScale:J,fromRotationTranslationScaleOrigin:L,
fromScaling:g,fromTranslation:p,fromXRotation:x,fromYRotation:w,fromZRotation:m,frustum:G,getRotation:F,getScaling:E,getTranslation:H,hasIdentityRotation:Ca,identity:v,invert:q,invertOrIdentity:t,isOrthoNormal:xa,lookAt:ea,mul:b,multiply:b,multiplyScalar:Z,multiplyScalarAndAdd:ca,ortho:Y,perspective:K,perspectiveFromFieldOfView:P,rotate:a,rotateX:d,rotateY:n,rotateZ:r,scale:f,set:y,str:T,sub:S,subtract:S,targetTo:aa,translate:c,transpose:C},Symbol.toStringTag,{value:"Module"}));l.add=W;l.adjoint=
k;l.copy=B;l.determinant=e;l.equals=ya;l.exactEquals=qa;l.frob=R;l.fromQuat=I;l.fromQuat2=A;l.fromRotation=u;l.fromRotationTranslation=z;l.fromRotationTranslationScale=J;l.fromRotationTranslationScaleOrigin=L;l.fromScaling=g;l.fromTranslation=p;l.fromXRotation=x;l.fromYRotation=w;l.fromZRotation=m;l.frustum=G;l.getRotation=F;l.getScaling=E;l.getTranslation=H;l.hasIdentityRotation=Ca;l.identity=v;l.invert=q;l.invertOrIdentity=t;l.isOrthoNormal=xa;l.lookAt=ea;l.mat4=h;l.mul=b;l.multiply=b;l.multiplyScalar=
Z;l.multiplyScalarAndAdd=ca;l.ortho=Y;l.perspective=K;l.perspectiveFromFieldOfView=P;l.rotate=a;l.rotateX=d;l.rotateY=n;l.rotateZ=r;l.scale=f;l.set=y;l.str=T;l.sub=S;l.subtract=S;l.targetTo=aa;l.translate=c;l.transpose=C})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(l,h,D,B,y){function v(){return!!h._pe}function C(){return!!y("esri-wasm")}function t(){return f?f:f=(new Promise((d,n)=>l(["./pe-wasm"],d,n))).then(d=>d.peWasm).then(({default:d})=>
d({locateFile:n=>B.getAssetUrl(`esri/geometry/support/${n}`)})).then(d=>{q(d)})}function q(d){function n(g,u,x){g[u]=x(g[u])}h._pe=d;h.PeDefs.init();h.PeGTlistExtended.init();h.PeNotationMgrs.init();h.PeNotationUtm.init();h.PePCSInfo.init();h.PeGCSExtent=function(g){function u(){return g.apply(this,arguments)||this}D._inherits(u,g);u.prototype.destroy=function(){h._pe.destroy(this)};return D._createClass(u)}(h._pe.PeGCSExtent);d=[h._pe.PeDatum,h._pe.PeGeogcs,h._pe.PeGeogtran,h._pe.PeObject,h._pe.PeParameter,
h._pe.PePrimem,h._pe.PeProjcs,h._pe.PeSpheroid,h._pe.PeUnit];for(var r of d)n(r.prototype,"getName",g=>function(){return g.call(this,Array(h.PeDefs.PE_NAME_MAX))});for(const g of[h._pe.PeGeogtran,h._pe.PeProjcs])n(g.prototype,"getParameters",u=>function(){const x=Array(h.PeDefs.PE_PARM_MAX);let w=u.call(this);for(let m=0;m<x.length;m++){const z=h._pe.getValue(w,"*");x[m]=z?h._pe.wrapPointer(z,h._pe.PeParameter):null;w+=Int32Array.BYTES_PER_ELEMENT}return x});n(h._pe.PeHorizon.prototype,"getCoord",
g=>function(){const u=this.getSize();if(!u)return null;const x=[],w=g.call(this);c(x,u,w);return x});n(h._pe.PeGTlistExtendedEntry.prototype,"getEntries",g=>{const u=h._pe._pe_getPeGTlistExtendedGTsSize();return function(){let x=null;var w=g.call(this);if(!h._pe.compare(w,h._pe.NULL)){x=[w];const m=this.getSteps();if(1<m){w=h._pe.getPointer(w);for(let z=1;z<m;z++)x.push(h._pe.wrapPointer(w+u*z,h._pe.PeGTlistExtendedGTs))}}return x}});const p=h._pe._pe_getPeHorizonSize();r=g=>function(){let u=this._cache;
u||(this._cache=u=new Map);if(u.has(g))return u.get(g);let x=null;var w=g.call(this);if(!h._pe.compare(w,h._pe.NULL)){x=[w];const m=w.getNump();if(1<m){w=h._pe.getPointer(w);for(let z=1;z<m;z++)x.push(h._pe.wrapPointer(w+p*z,h._pe.PeHorizon))}}u.set(g,x);return x};n(h._pe.PeProjcs.prototype,"horizonGcsGenerate",r);n(h._pe.PeProjcs.prototype,"horizonPcsGenerate",r);h._pe.PeObject.prototype.toString=function(g=h.PeDefs.PE_STR_OPTS_NONE){h._pe.ensureCache.prepare();const u=h._pe.getPointer(this),x=h._pe.ensureInt8(Array(h.PeDefs.PE_BUFFER_MAX));
return h._pe.UTF8ToString(h._pe._pe_object_to_string_ext(u,g,x))}}function k(d){if(d){var n=h._pe.getClass(d);n&&(n=h._pe.getCache(n))&&(d=h._pe.getPointer(d))&&delete n[d]}}function e(d,n){const r=[];n=Array(n);for(let p=0;p<d;p++)r.push(h._pe.ensureInt8(n));return r}function b(d){let n;Array.isArray(d[0])?(n=[],d.forEach(r=>{n.push(r[0],r[1])})):n=d;return n}function c(d,n,r,p=!1){if(p)for(p=0;p<2*n;p++)d[p]=h._pe.getValue(r+p*Float64Array.BYTES_PER_ELEMENT,"double");else{p=0===d.length;for(let g=
0;g<n;g++)p&&(d[g]=Array(2)),d[g][0]=h._pe.getValue(r,"double"),d[g][1]=h._pe.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}let f;h._pe=null;h.PeCSTransformations=void 0;(function(d){function n(g,u,x){h._pe.ensureCache.prepare();var w=b(x);const m=x===w;w=h._pe.ensureFloat64(w);(g=h._pe._pe_geog_to_proj(h._pe.getPointer(g),u,w))&&c(x,u,w,m);return g}function r(g,u,x){return p(g,u,x,0)}function p(g,u,x,w){h._pe.ensureCache.prepare();var m=b(x);const z=x===
m;m=h._pe.ensureFloat64(m);(g=h._pe._pe_proj_to_geog_center(h._pe.getPointer(g),u,m,w))&&c(x,u,m,z);return g}d.geogToProj=n;d.projGeog=function(g,u,x,w){switch(w){case h.PeDefs.PE_TRANSFORM_P_TO_G:return r(g,u,x);case h.PeDefs.PE_TRANSFORM_G_TO_P:return n(g,u,x)}return 0};d.projToGeog=r;d.projToGeogCenter=p})(h.PeCSTransformations||(h.PeCSTransformations={}));h.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=h._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=h._pe.PeDefs.prototype.PE_NAME_MAX;
d.PE_MGRS_MAX=h._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=h._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=h._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=h._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=h._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=h._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=h._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=h._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=h._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=h._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=
h._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=h._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=h._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=h._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=h._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=h._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=h._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=h._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=h._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=
h._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=h._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=h._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=h._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=h._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=h._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=h._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=h._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=h._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(h.PeDefs||
(h.PeDefs={}));h.PeFactory=void 0;(function(d){function n(u,x){let w=null,m=r[u];m||(m={},r[u]=m);m.hasOwnProperty(String(x))?w=m[x]:(u=h._pe.PeFactory.prototype.factoryByType(u,x),h._pe.compare(u,h._pe.NULL)||(w=u,m[x]=w));return w=g(w)}const r={},p={},g=u=>{if(u){const x=u.getType();switch(x){case h.PeDefs.PE_TYPE_GEOGCS:u=h._pe.castObject(u,h._pe.PeGeogcs);break;case h.PeDefs.PE_TYPE_PROJCS:u=h._pe.castObject(u,h._pe.PeProjcs);break;case h.PeDefs.PE_TYPE_GEOGTRAN:u=h._pe.castObject(u,h._pe.PeGeogtran);
break;default:x&h.PeDefs.PE_TYPE_UNIT&&(u=h._pe.castObject(u,h._pe.PeUnit))}}return u};d.initialize=function(){h._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(u){return n(h.PeDefs.PE_TYPE_COORDSYS,u)};d.factoryByType=n;d.fromString=function(u,x){let w=null,m=p[u];m||(m={},p[u]=m);m.hasOwnProperty(x)?w=m[x]:(u=h._pe.PeFactory.prototype.fromString(u,x),h._pe.compare(u,h._pe.NULL)||(w=u,m[x]=w));return w=g(w)};d.geogcs=function(u){return n(h.PeDefs.PE_TYPE_GEOGCS,u)};d.geogtran=function(u){return n(h.PeDefs.PE_TYPE_GEOGTRAN,
u)};d.getCode=function(u){return h._pe.PeFactory.prototype.getCode(u)};d.projcs=function(u){return n(h.PeDefs.PE_TYPE_PROJCS,u)};d.unit=function(u){return n(h.PeDefs.PE_TYPE_UNIT,u)}})(h.PeFactory||(h.PeFactory={}));h.PeGCSExtent=null;h.PeGTlistExtended=void 0;(function(d){let n;d.init=function(){d.PE_GTLIST_OPTS_COMMON=h._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;n=h._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(r,p,g,u,x,w){let m=null;const z=new h._pe.PeInteger(w);try{const A=
h._pe.PeGTlistExtended.prototype.getGTlist(r,p,g,u,x,z);if(w=z.val)if(m=[A],1<w){const H=h._pe.getPointer(A);for(r=1;r<w;r++)m.push(h._pe.wrapPointer(H+n*r,h._pe.PeGTlistExtendedEntry))}}finally{h._pe.destroy(z)}return m}})(h.PeGTlistExtended||(h.PeGTlistExtended={}));h.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(n){if(n&&n.length){for(const r of n)k(r),r.getEntries().forEach(p=>{k(p);p=p.getGeogtran();k(p);p.getParameters().forEach(k);[p.getGeogcs1(),p.getGeogcs2()].forEach(g=>{k(g);
const u=g.getDatum();k(u);k(u.getSpheroid());k(g.getPrimem());k(g.getUnit())})});h._pe.PeGTlistExtendedEntry.prototype.Delete(n[0])}}})(h.PeGTlistExtendedEntry||(h.PeGTlistExtendedEntry={}));h.PeGTTransformations=void 0;(function(d){d.geogToGeog=function(n,r,p,g,u){h._pe.ensureCache.prepare();var x=b(p);const w=p===x;x=h._pe.ensureFloat64(x);let m=0;g&&(m=h._pe.ensureFloat64(g));(n=h._pe._pe_geog_to_geog(h._pe.getPointer(n),r,x,m,u))&&c(p,r,x,w);return n}})(h.PeGTTransformations||(h.PeGTTransformations=
{}));h.PeNotationDms=void 0;(function(d){const n=(p,g,u,x,w,m)=>{h._pe.ensureCache.prepare();switch(p){case "dd":var z=h._pe._pe_geog_to_dd;var A=h.PeDefs.PE_DD_MAX;break;case "ddm":z=h._pe._pe_geog_to_ddm;A=h.PeDefs.PE_DDM_MAX;break;case "dms":z=h._pe._pe_geog_to_dms,A=h.PeDefs.PE_DMS_MAX}p=0;g&&(p=h._pe.getPointer(g));g=b(x);g=h._pe.ensureFloat64(g);A=e(u,A);x=h._pe.ensureInt32(A);if(w=z(p,u,g,w,x))for(z=0;z<u;z++)m[z]=h._pe.UTF8ToString(A[z]);return w},r=(p,g,u,x,w)=>{h._pe.ensureCache.prepare();
switch(p){case "dd":var m=h._pe._pe_dd_to_geog;break;case "ddm":m=h._pe._pe_ddm_to_geog;break;case "dms":m=h._pe._pe_dms_to_geog}p=0;g&&(p=h._pe.getPointer(g));g=x.map(z=>h._pe.ensureString(z));x=h._pe.ensureInt32(g);g=h._pe.ensureFloat64(Array(2*u));(m=m(p,u,x,g))&&c(w,u,g);return m};d.geogToDms=function(p,g,u,x,w){return n("dms",p,g,u,x,w)};d.dmsToGeog=function(p,g,u,x){return r("dms",p,g,u,x)};d.geogToDdm=function(p,g,u,x,w){return n("ddm",p,g,u,x,w)};d.ddmToGeog=function(p,g,u,x){return r("ddm",
p,g,u,x)};d.geogToDd=function(p,g,u,x,w){return n("dd",p,g,u,x,w)};d.ddToGeog=function(p,g,u,x){return r("dd",p,g,u,x)}})(h.PeNotationDms||(h.PeNotationDms={}));h.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=h._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=h._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=h._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=h._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
d.PE_MGRS_ADD_SPACES=h._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geogToMgrsExtended=function(n,r,p,g,u,x,w){h._pe.ensureCache.prepare();let m=0;n&&(m=h._pe.getPointer(n));n=b(p);p=h._pe.ensureFloat64(n);n=e(r,h.PeDefs.PE_MGRS_MAX);const z=h._pe.ensureInt32(n);if(g=h._pe._pe_geog_to_mgrs_extended(m,r,p,g,u,x,z))for(u=0;u<r;u++)w[u]=h._pe.UTF8ToString(n[u]);return g};d.mgrsToGeogExtended=function(n,r,p,g,u){h._pe.ensureCache.prepare();let x=0;n&&(x=h._pe.getPointer(n));n=p.map(w=>h._pe.ensureString(w));
p=h._pe.ensureInt32(n);n=h._pe.ensureFloat64(Array(2*r));(g=h._pe._pe_mgrs_to_geog_extended(x,r,p,g,n))&&c(u,r,n);return g}})(h.PeNotationMgrs||(h.PeNotationMgrs={}));h.PeNotationUsng=void 0;(function(d){d.geogToUsng=function(n,r,p,g,u,x,w){h._pe.ensureCache.prepare();let m=0;n&&(m=h._pe.getPointer(n));n=b(p);p=h._pe.ensureFloat64(n);n=e(r,h.PeDefs.PE_MGRS_MAX);const z=h._pe.ensureInt32(n);if(g=h._pe._pe_geog_to_usng(m,r,p,g,u,x,z))for(u=0;u<r;u++)w[u]=h._pe.UTF8ToString(n[u]);return g};d.usngToGeog=
function(n,r,p,g){h._pe.ensureCache.prepare();var u=0;n&&(u=h._pe.getPointer(n));n=p.map(x=>h._pe.ensureString(x));p=h._pe.ensureInt32(n);n=h._pe.ensureFloat64(Array(2*r));(u=h._pe._pe_usng_to_geog(u,r,p,n))&&c(g,r,n);return u}})(h.PeNotationUsng||(h.PeNotationUsng={}));h.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=h._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=h._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=h._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
d.geogToUtm=function(n,r,p,g,u){h._pe.ensureCache.prepare();var x=0;n&&(x=h._pe.getPointer(n));n=b(p);p=h._pe.ensureFloat64(n);n=e(r,h.PeDefs.PE_UTM_MAX);const w=h._pe.ensureInt32(n);if(g=h._pe._pe_geog_to_utm(x,r,p,g,w))for(x=0;x<r;x++)u[x]=h._pe.UTF8ToString(n[x]);return g};d.utmToGeog=function(n,r,p,g,u){h._pe.ensureCache.prepare();let x=0;n&&(x=h._pe.getPointer(n));n=p.map(w=>h._pe.ensureString(w));p=h._pe.ensureInt32(n);n=h._pe.ensureFloat64(Array(2*r));(g=h._pe._pe_utm_to_geog(x,r,p,g,n))&&
c(u,r,n);return g}})(h.PeNotationUtm||(h.PeNotationUtm={}));h.PePCSInfo=void 0;(function(d){const n=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=h._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=h._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=h._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=h._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(r,p=d.PE_PCSINFO_OPTION_DOMAIN){let g=null,u=null;n.has(r)&&(u=n.get(r),
u[p]&&(g=u[p]));g||(g=h._pe.PePCSInfo.prototype.generate(r,p),u||(u=[],n.set(r,u)),u[p]=g);return g}})(h.PePCSInfo||(h.PePCSInfo={}));h.PeVersion=void 0;(function(d){d.versionString=function(){return h._pe.PeVersion.prototype.version_string()}})(h.PeVersion||(h.PeVersion={}));const a=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return h.PeCSTransformations},get PeDefs(){return h.PeDefs},get PeFactory(){return h.PeFactory},get PeGCSExtent(){return h.PeGCSExtent},get PeGTTransformations(){return h.PeGTTransformations},
get PeGTlistExtended(){return h.PeGTlistExtended},get PeGTlistExtendedEntry(){return h.PeGTlistExtendedEntry},get PeNotationDms(){return h.PeNotationDms},get PeNotationMgrs(){return h.PeNotationMgrs},get PeNotationUsng(){return h.PeNotationUsng},get PeNotationUtm(){return h.PeNotationUtm},get PePCSInfo(){return h.PePCSInfo},get PeVersion(){return h.PeVersion},_init:q,get _pe(){return h._pe},isLoaded:v,isSupported:C,load:t},Symbol.toStringTag,{value:"Module"}));h._init=q;h.isLoaded=v;h.isSupported=
C;h.load=t;h.pe=a})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(l,h){const D=Math.PI/180;var B=h.earth.radius;const y=h.earth.eccentricitySquared;B={a1:B*y,a2:B*y*B*y,a3:B*y*y/2,a4:B*y*B*y*2.5,a5:B*y+B*y*y/2,a6:1-y};h={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:h.earth.radius,f:h.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:h.moon.radius,f:h.moon.flattening},104904:{a:3393400,
f:.005207166853303471},104905:{a:h.mars.radius,f:h.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},
104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,
f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:h.mars.radius,
f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};l.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;l.earthEllipsoidConstants=B;l.spheroids=h;l.toRadians=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers","./GeographicTransformationStep"],function(l,h){return function(){function D(y){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;
if(y&&y.steps)for(const v of y.steps)v instanceof h?this.steps.push(v):this.steps.push(new h({wkid:v.wkid,wkt:v.wkt,isInverse:v.isInverse}))}D.cacheKey=function(y,v){return[void 0!==y.wkid&&null!==y.wkid?y.wkid.toString():"-1",void 0!==y.wkt&&null!==y.wkt?y.wkt.toString():"",void 0!==v.wkid&&null!==v.wkid?v.wkid.toString():"-1",void 0!==v.wkt&&null!==v.wkt?v.wkt.toString():""].join()};D.fromGE=function(y){const v=new D;let C="";for(const t of y.steps)y=h.fromGE(t),v.steps.push(y),C+=y.uid.toString()+
",";v._cachedProjection={};v._gtlistentry=null;v._chain=C;return v};var B=D.prototype;B.getInverse=function(){const y=new D;y.steps=[];for(let v=this.steps.length-1;0<=v;v--)y.steps.push(this.steps[v].getInverse());return y};B.getGTListEntry=function(){let y="";for(const v of this.steps)y+=v.uid.toString()+",";y!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=y);return this._gtlistentry};B.assignCachedGe=function(y,v,C){this._cachedProjection[D.cacheKey(y,v)]=C};B.getCachedGeTransformation=
function(y,v){let C="";for(const t of this.steps)C+=t.uid.toString()+",";C!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=C);y=this._cachedProjection[D.cacheKey(y,v)];return void 0===y?null:y};return l._createClass(D)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){let h=0;return function(){function D(B){this.uid=h++;B?(this._wkt=null!=B.wkt?B.wkt:null,this._wkid=null!=B.wkid?B.wkid:-1,
this._isInverse=null!=B.isInverse?!0===B.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}D.fromGE=function(B){const y=new D;y._wkt=B.wkt;y._wkid=B.wkid;y._isInverse=B.isInverse;return y};D.prototype.getInverse=function(){const B=new D;B._wkt=this.wkt;B._wkid=this._wkid;B._isInverse=!this.isInverse;return B};l._createClass(D,[{key:"wkt",get:function(){return this._wkt},set:function(B){this._wkt=B;this.uid=h++}},{key:"wkid",get:function(){return this._wkid},set:function(B){this._wkid=
B;this.uid=h++}},{key:"isInverse",get:function(){return this._isInverse},set:function(B){this._isInverse=B;this.uid=h++}}]);return D}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/unitUtils","./spatialReferenceUtils"],function(l,h,D){l.getGeometryZScaler=function(B,y,v){if(null==y||null==v||v.vcsWkid||D.equals(y,v))return null;y=h.getMetersPerVerticalUnitForSR(y);v=h.getMetersPerVerticalUnitForSR(v);const C=y/v;if(1===C)return null;switch(B){case "point":case "esriGeometryPoint":return t=>
{t&&null!=t.z&&(t.z*=C)};case "polyline":case "esriGeometryPolyline":return t=>{if(t)for(const q of t.paths)for(const k of q)2<k.length&&(k[2]*=C)};case "polygon":case "esriGeometryPolygon":return t=>{if(t)for(const q of t.rings)for(const k of q)2<k.length&&(k[2]*=C)};case "multipoint":case "esriGeometryMultipoint":return t=>{if(t)for(const q of t.points)2<q.length&&(q[2]*=C)};case "extent":case "esriGeometryEnvelope":return t=>{t&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=C,t.zmax*=C)};default:return null}};
Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(l,h){let D=h._createClass(function(t,q,k){this.x=t;this.y=q;this.spatialReference=k;this.m=this.z=void 0}),B=h._createClass(function(t,q,k,e){this.rings=t;this.spatialReference=q;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);e&&(this.hasM=e)}),y=h._createClass(function(t,q,k,e){this.paths=t;this.spatialReference=q;this.hasM=
this.hasZ=void 0;k&&(this.hasZ=k);e&&(this.hasM=e)}),v=h._createClass(function(t,q,k,e){this.points=t;this.spatialReference=q;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);e&&(this.hasM=e)}),C=h._createClass(function(t,q,k,e,b){this.xmin=t;this.ymin=q;this.xmax=k;this.ymax=e;this.spatialReference=b;this.mmax=this.mmin=this.zmax=this.zmin=void 0});l.jsonAdapter={convertToGEGeometry:function(t,q){return null==q?null:t.convertJSONToGeometry(q)},exportPoint:function(t,q,k){k=new D(t.getPointX(q),t.getPointY(q),
k);const e=t.hasZ(q),b=t.hasM(q);e&&(k.z=t.getPointZ(q));b&&(k.m=t.getPointM(q));return k},exportPolygon:function(t,q,k){return new B(t.exportPaths(q),k,t.hasZ(q),t.hasM(q))},exportPolyline:function(t,q,k){return new y(t.exportPaths(q),k,t.hasZ(q),t.hasM(q))},exportMultipoint:function(t,q,k){return new v(t.exportPoints(q),k,t.hasZ(q),t.hasM(q))},exportExtent:function(t,q,k){var e=t.hasZ(q);const b=t.hasM(q);k=new C(t.getXMin(q),t.getYMin(q),t.getXMax(q),t.getYMax(q),k);e&&(e=t.getZExtent(q),k.zmin=
e.vmin,k.zmax=e.vmax);b&&(t=t.getMExtent(q),k.mmin=t.vmin,k.mmax=t.vmax);return k}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(l){l.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,
supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,
supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c){function f(r,p,g,u){const x=u.x-g.x;u=u.y-g.y;p=Math.min(1,Math.max(0,((p.x-g.x)*x+(p.y-g.y)*u)/(x*x+u*u)));r.x=g.x+x*p;r.y=g.y+u*p}function a(r,p){return r?p?4:3:p?3:2}let d=function(){function r(g,u,x){this.items=g;this.query=u;this.geometryType=x.geometryType;this.hasM=x.hasM;this.hasZ=x.hasZ;this.fieldsIndex=x.fieldsIndex;this.objectIdField=x.objectIdField;this.spatialReference=x.spatialReference;this.featureAdapter=x.featureAdapter}var p=r.prototype;p.createQueryResponseForCount=
function(){const g=new t(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return g.countDistinctValues(this.items);const {groupByFieldsForStatistics:u,having:x,outStatistics:w}=this.query;if(!u?.length)return 1;const m=new Map,z=new Map,A=new Set;for(const F of w){var {statisticType:H}=F;H="exceedslimit"!==H?F.onStatisticField:void 0;if(!z.has(H)){var E=[];for(const J of u){const L=this._getAttributeValues(g,J,m);E.push(L)}z.set(H,this._calculateUniqueValues(E,g.returnDistinctValues))}H=
z.get(H);for(const J in H){const {data:L,items:I}=H[J];E=L.join(",");x&&!g.validateItems(I,x)||A.add(E)}}return A.size};p.createQueryResponse=async function(){let g;g=this.query.outStatistics?this.query.outStatistics.some(u=>"exceedslimit"===u.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const u=this.query.geometry;C.isValid(this.query.outSR)&&!C.equals(u.spatialReference,
this.query.outSR)?g.queryGeometry=e.cleanFromGeometryEngine({spatialReference:this.query.outSR,...q.project(u,u.spatialReference,this.query.outSR)}):g.queryGeometry=e.cleanFromGeometryEngine({spatialReference:this.query.outSR,...u})}return g};p.createSnappingResponse=function(g,u){const x=this.featureAdapter,w=a(this.hasZ,this.hasM),{point:m,mode:z}=g,A="number"===typeof g.distance?g.distance:g.distance.x,H="number"===typeof g.distance?g.distance:g.distance.y,E={candidates:[]},F="esriGeometryPolygon"===
this.geometryType;u=this._getPointCreator(z,this.spatialReference,u);const J=new n(null,0),L=new n(null,0),I={x:0,y:0,z:0};for(const T of this.items){var G=x.getGeometry(T);if(null==G)continue;const {coords:R,lengths:W}=G;J.coords=R;L.coords=R;if(g.returnEdge){G=0;for(var K=0;K<W.length;K++){var P=W[K];for(var Y=0;Y<P;Y++,G+=w){var ea=J;ea.coordsIndex=G;if(Y!==P-1){const S=L;S.coordsIndex=G+w;const Z=I;f(I,m,ea,S);var aa=(m.x-Z.x)/A;const ca=(m.y-Z.y)/H;aa=aa*aa+ca*ca;1>=aa&&E.candidates.push(k.makeEdgeCandidate(x.getObjectId(T),
u(Z),Math.sqrt(aa),u(ea),u(S)))}}}}if(g.returnVertex)for(G=F?R.length-w:R.length,K=0;K<G;K+=w)P=J,P.coordsIndex=K,Y=(m.x-P.x)/A,ea=(m.y-P.y)/H,Y=Y*Y+ea*ea,1>=Y&&E.candidates.push(k.makeVertexCandidate(x.getObjectId(T),u(P),Math.sqrt(Y)))}E.candidates.sort((T,R)=>T.distance-R.distance);return E};p._getPointCreator=function(g,u,x){const w=null==x||C.equals(u,x)?z=>z:z=>q.project(z,u,x),{hasZ:m}=this;return"3d"===g?m?({x:z,y:A,z:H})=>w({x:z,y:A,z:H}):({x:z,y:A})=>w({x:z,y:A,z:0}):({x:z,y:A})=>w({x:z,
y:A})};p.createSummaryStatisticsResponse=async function(g){const {field:u,valueExpression:x,normalizationField:w,normalizationType:m,normalizationTotal:z,minValue:A,maxValue:H,scale:E}=g;g=this.fieldsIndex.isDateField(u);var F=await this._getDataValues({field:u,valueExpression:x,normalizationField:w,normalizationType:m,normalizationTotal:z,scale:E});const J=c.isNullCountSupported({normalizationType:m,normalizationField:w,minValue:A,maxValue:H}),L=this.fieldsIndex.get(u),I={value:.5,fieldType:L?.type};
F=b.isStringField(L)?c.calculateStringStatistics({values:F,supportsNullCount:J,percentileParams:I}):c.calculateStatistics({values:F,minValue:A,maxValue:H,useSampleStdDev:!m,supportsNullCount:J,percentileParams:I});return c.processSummaryStatisticsResult(F,g)};p.createUniqueValuesResponse=async function(g){const {field:u,valueExpression:x,domains:w,returnAllCodedValues:m,scale:z}=g;var A=await this._getDataValues({field:u,field2:g.field2,field3:g.field3,fieldDelimiter:g.fieldDelimiter,valueExpression:x,
scale:z});A=c.calculateUniqueValuesCount(A);return c.createUVResult(A,w,m,g.fieldDelimiter)};p.createClassBreaksResponse=async function(g){const {field:u,valueExpression:x,normalizationField:w,normalizationType:m,normalizationTotal:z,classificationMethod:A,standardDeviationInterval:H,minValue:E,maxValue:F,numClasses:J,scale:L}=g;g=await this._getDataValues({field:u,valueExpression:x,normalizationField:w,normalizationType:m,normalizationTotal:z,scale:L});g=c.calculateClassBreaks(g,{field:u,normalizationField:w,
normalizationType:m,normalizationTotal:z,classificationMethod:A,standardDeviationInterval:H,minValue:E,maxValue:F,numClasses:J});return c.resolveCBResult(g,A)};p.createHistogramResponse=async function(g){const {field:u,valueExpression:x,normalizationField:w,normalizationType:m,normalizationTotal:z,classificationMethod:A,standardDeviationInterval:H,minValue:E,maxValue:F,numBins:J,scale:L}=g;g=await this._getDataValues({field:u,valueExpression:x,normalizationField:w,normalizationType:m,normalizationTotal:z,
scale:L});return c.calculateHistogram(g,{field:u,normalizationField:w,normalizationType:m,normalizationTotal:z,classificationMethod:A,standardDeviationInterval:H,minValue:E,maxValue:F,numBins:J})};p._sortFeatures=function(g,u,x){if(1<g.length&&u&&u.length)for(const w of u.reverse()){u=w.split(" ");const m=u[0],z=this.fieldsIndex.get(m);u=u[1]?"desc"===u[1].toLowerCase():!1;const A=c.getAttributeComparator(z?.type,u);g.sort((H,E)=>{H=x(H,m,z);E=x(E,m,z);return A(H,E)})}};p._createFeatureQueryResponse=
function(g){const u=this.items,{geometryType:x,hasM:w,hasZ:m,objectIdField:z,spatialReference:A}=this,{outFields:H,outSR:E,quantizationParameters:F,resultRecordCount:J,resultOffset:L,returnZ:I,returnM:G}=g,K=null!=J?u.length>(L||0)+J:!1,P=H&&(H.includes("*")?[...this.fieldsIndex.fields]:H.map(Y=>this.fieldsIndex.get(Y)));return{exceededTransferLimit:K,features:this._createFeatures(g,u),fields:P,geometryType:x,hasM:w&&G,hasZ:m&&I,objectIdFieldName:z,spatialReference:e.cleanFromGeometryEngine(E||A),
transform:F&&v.toQuantizationTransform(F)||null}};p._createFeatures=function(g,u){const x=new t(g,this.featureAdapter,this.fieldsIndex),{hasM:w,hasZ:m}=this,{orderByFields:z,quantizationParameters:A,returnGeometry:H,returnCentroid:E,maxAllowableOffset:F,resultOffset:J,resultRecordCount:L,returnZ:I=!1,returnM:G=!1}=g,K=m&&I,P=w&&G;g=[];var Y=0;u=[...u];this._sortFeatures(u,z,(T,R,W)=>x.getFieldValue(T,R,W));if(H||E){var ea=v.toQuantizationTransform(A)??void 0;if(H&&!E)for(var aa of u)g[Y++]={attributes:x.getAttributes(aa),
geometry:e.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(aa),F,ea,K,P)};else if(!H&&E)for(const T of u)g[Y++]={attributes:x.getAttributes(T),centroid:e.transformCentroid(this,this.featureAdapter.getCentroid(T,this),ea)};else for(const T of u)g[Y++]={attributes:x.getAttributes(T),centroid:e.transformCentroid(this,this.featureAdapter.getCentroid(T,this),ea),geometry:e.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(T),F,ea,K,P)}}else for(ea of u)(aa=
x.getAttributes(ea))&&(g[Y++]={attributes:aa});Y=J||0;null!=L&&(g=g.slice(Y,Math.min(g.length,Y+L)));return g};p._createExceedsLimitQueryResponse=function(g){var u=!1;let x=Number.POSITIVE_INFINITY,w=Number.POSITIVE_INFINITY;u=Number.POSITIVE_INFINITY;for(const m of g.outStatistics??[])if("exceedslimit"===m.statisticType){x=null!=m.maxPointCount?m.maxPointCount:Number.POSITIVE_INFINITY;w=null!=m.maxRecordCount?m.maxRecordCount:Number.POSITIVE_INFINITY;u=null!=m.maxVertexCount?m.maxVertexCount:Number.POSITIVE_INFINITY;
break}if("esriGeometryPoint"===this.geometryType)u=this.items.length>x;else if(this.items.length>w)u=!0;else{g=a(this.hasZ,this.hasM);const m=this.featureAdapter;u=this.items.reduce((z,A)=>{A=m.getGeometry(A);return z+(null!=A&&A.coords.length||0)},0)/g>u}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(u)}}]}};p._createStatisticsQueryResponse=async function(g){var u=
{attributes:{}};const x=[],w=new Map,m=new Map,z=new Map,A=new Map,H=new t(g,this.featureAdapter,this.fieldsIndex);var E=g.outStatistics;const {groupByFieldsForStatistics:F,having:J,orderByFields:L}=g;g=F&&F.length;const I=!!g,G=I?F[0]:null,K=I&&!this.fieldsIndex.get(G);for(const T of E??[]){const {outStatisticFieldName:R,statisticType:W}=T;E=T;var P="exceedslimit"!==W?T.onStatisticField:void 0;const S="percentile_disc"===W||"percentile_cont"===W,Z="EnvelopeAggregate"===W||"CentroidAggregate"===W||
"ConvexHullAggregate"===W,ca=I&&1===g&&(P===G||K)&&"count"===W;if(I){if(!z.has(P)){var Y=[];for(const qa of F){var ea=this._getAttributeValues(H,qa,w);Y.push(ea)}z.set(P,this._calculateUniqueValues(Y,Z?!1:H.returnDistinctValues))}Y=z.get(P);for(const qa in Y){const {count:ya,data:xa,items:Ca,itemPositions:Da}=Y[qa];ea=xa.join(",");if(!J||H.validateItems(Ca,J)){const N=A.get(ea)||{attributes:{}};if(Z){N.aggregateGeometries||(N.aggregateGeometries={});const {aggregateGeometries:ka,outStatisticFieldName:da}=
await this._getAggregateGeometry(E,Ca);N.aggregateGeometries[da]=ka}else{var aa=null;if(ca)aa=ya;else{const ka=this._getAttributeValues(H,P,w);aa=Da.map(da=>ka[da]);aa=S&&"statisticParameters"in E?this._getPercentileValue(E,aa):this._getStatisticValue(E,aa,null,H.returnDistinctValues)}N.attributes[R]=aa}let V=0;F.forEach((ka,da)=>N.attributes[this.fieldsIndex.get(ka)?ka:`EXPR_${++V}`]=xa[da]);A.set(ea,N)}}}else if(Z){u.aggregateGeometries||(u.aggregateGeometries={});const {aggregateGeometries:qa,
outStatisticFieldName:ya}=await this._getAggregateGeometry(E,this.items);u.aggregateGeometries[ya]=qa}else P=this._getAttributeValues(H,P,w),u.attributes[R]=S&&"statisticParameters"in E?this._getPercentileValue(E,P):this._getStatisticValue(E,P,m,H.returnDistinctValues);x.push({name:R,alias:R,type:"esriFieldTypeDouble"})}u=I?Array.from(A.values()):[u];this._sortFeatures(u,L,(T,R)=>T.attributes[R]);return{fields:x,features:u}};p._getAggregateGeometry=async function(g,u){const {convexHull:x,union:w}=
await new Promise((I,G)=>l(["../../../geometry/geometryEngineJSON"],I,G)),{statisticType:m,outStatisticFieldName:z}=g,{featureAdapter:A,spatialReference:H,geometryType:E,hasZ:F,hasM:J}=this;u=u.map(I=>e.getGeometry(E,F,J,A.getGeometry(I)));const L=x(H,u,!0)[0];g={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===m?(u=L?y.getPolygonExtent(L):y.getGeometryExtent(w(H,u)),g.aggregateGeometries={...u,spatialReference:H},g.outStatisticFieldName=z||"extent"):"CentroidAggregate"===
m?(u=L?B.polygonCentroid(L):B.extentCentroid(y.getGeometryExtent(w(H,u))),g.aggregateGeometries={x:u[0],y:u[1],spatialReference:H},g.outStatisticFieldName=z||"centroid"):"ConvexHullAggregate"===m&&(g.aggregateGeometries=L,g.outStatisticFieldName=z||"convexHull");return g};p._getStatisticValue=function(g,u,x,w){const {onStatisticField:m,statisticType:z}=g;g=null;g=x?.has(m)?x.get(m):b.isStringField(this.fieldsIndex.get(m))?c.calculateStringStatistics({values:u,returnDistinct:w}):c.calculateStatistics({values:w?
[...(new Set(u))]:u,minValue:null,maxValue:null,useSampleStdDev:!0});x&&x.set(m,g);return g["var"===z?"variance":z]};p._getPercentileValue=function(g,u){const {onStatisticField:x,statisticParameters:w,statisticType:m}=g,{value:z,orderBy:A}=w;g=this.fieldsIndex.get(x);return c.calculatePercentile(u,{value:z,orderBy:A,fieldType:g?.type,isDiscrete:"percentile_disc"===m})};p._getAttributeValues=function(g,u,x){if(x.has(u))return x.get(u);const w=this.fieldsIndex.get(u),m=this.items.map(z=>g.getFieldValue(z,
u,w));x.set(u,m);return m};p._calculateUniqueValues=function(g,u){const x={},w=this.items,m=w.length;for(let z=0;z<m;z++){const A=w[z],H=[];for(const F of g)H.push(F[z]);const E=H.join(",");null==x[E]?x[E]={count:1,data:H,items:[A],itemPositions:[z]}:(u||x[E].count++,x[E].items.push(A),x[E].itemPositions.push(z))}return x};p._getDataValues=async function(g){const u=new t(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:x,scale:w}=g,m=x?{viewingMode:"map",scale:w,spatialReference:this.query.outSR||
this.spatialReference}:null;return x?u.getExpressionValues(this.items,x,m,{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM}):u.getDataValues(this.items,{field:g.field,field2:g.field2,field3:g.field3,fieldDelimiter:g.fieldDelimiter,normalizationField:g.normalizationField,normalizationType:g.normalizationType,normalizationTotal:g.normalizationTotal})};D._createClass(r,[{key:"size",get:function(){return this.items.length}}]);return r}(),n=function(){function r(p,g){this.coords=p;this.coordsIndex=
g}D._createClass(r,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return r}();h.QueryEngineResult=d;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(l,h){function D({scale:A,translate:H},E){return Math.round((E-H[0])/A[0])}function B({scale:A,
translate:H},E){return Math.round((H[1]-E)/A[1])}function y(A,H,E){const F=[];let J,L,I,G;for(let K=0;K<E.length;K++){const P=E[K];if(0<K){if(I=D(A,P[0]),G=B(A,P[1]),I!==J||G!==L)F.push(H(P,I-J,G-L)),J=I,L=G}else J=D(A,P[0]),L=B(A,P[1]),F.push(H(P,J,L))}return 0<F.length?F:null}function v(A,H,E,F){return y(A,E?F?z:m:F?m:w,H)}function C(A,H,E,F){const J=[];E=E?F?z:m:F?m:w;for(F=0;F<H.length;F++){const L=y(A,E,H[F]);L&&3<=L.length&&J.push(L)}return J.length?J:null}function t(A,H,E,F){const J=[];E=E?
F?z:m:F?m:w;for(F=0;F<H.length;F++){const L=y(A,E,H[F]);L&&2<=L.length&&J.push(L)}return J.length?J:null}function q({scale:A,translate:H},E){return E*A[0]+H[0]}function k({scale:A,translate:H},E){return H[1]-E*A[1]}function e(A,H,E){const F=Array(E.length);if(!E.length)return F;const [J,L]=A.scale;let I=q(A,E[0][0]);A=k(A,E[0][1]);F[0]=H(E[0],I,A);for(let G=1;G<E.length;G++){const K=E[G];I+=K[0]*J;A-=K[1]*L;F[G]=H(K,I,A)}return F}function b(A,H,E){const F=Array(E.length);for(let J=0;J<E.length;J++)F[J]=
e(A,H,E[J]);return F}function c(A,H,E,F){return e(A,E?F?z:m:F?m:w,H)}function f(A,H,E,F){return b(A,E?F?z:m:F?m:w,H)}function a(A,H,E,F){return b(A,E?F?z:m:F?m:w,H)}function d(A,H,E){let [F,J]=E[0],L=Math.min(F,H[0]),I=Math.min(J,H[1]),G=Math.max(F,H[2]);H=Math.max(J,H[3]);for(let K=1;K<E.length;K++){const [P,Y]=E[K];F+=P;J+=Y;0>P&&(L=Math.min(L,F));0<P&&(G=Math.max(G,F));0>Y?I=Math.min(I,J):0<Y&&(H=Math.max(H,J))}A[0]=L;A[1]=I;A[2]=G;A[3]=H;return A}function n(A,H){if(!H.length)return null;A[0]=
A[1]=Number.POSITIVE_INFINITY;A[2]=A[3]=Number.NEGATIVE_INFINITY;for(let E=0;E<H.length;E++)d(A,A,H[E]);return A}function r(A,H,E,F,J){H.xmin=D(A,E.xmin);H.ymin=B(A,E.ymin);H.xmax=D(A,E.xmax);H.ymax=B(A,E.ymax);H!==E&&(F&&(H.zmin=E.zmin,H.zmax=E.zmax),J&&(H.mmin=E.mmin,H.mmax=E.mmax));return H}function p(A,H,E,F,J){H.points=v(A,E.points,F,J)??[];return H}function g(A,H,E,F,J){H.x=D(A,E.x);H.y=B(A,E.y);H!==E&&(F&&(H.z=E.z),J&&(H.m=E.m));return H}function u(A,H,E,F,J){A=C(A,E.rings,F,J);if(!A)return null;
H.rings=A;return H}function x(A,H,E,F,J){A=t(A,E.paths,F,J);if(!A)return null;H.paths=A;return H}const w=(A,H,E)=>[H,E],m=(A,H,E)=>[H,E,A[2]],z=(A,H,E)=>[H,E,A[2],A[3]];l.equals=function(A,H){if(A===H||null==A&&null==H)return!0;if(null==A||null==H)return!1;let E,F,J,L;A&&"upperLeft"===A.originPosition?(E=A.translate[0],F=A.translate[1],A=A.scale[0]):(E=null!=A.extent?A.extent.xmin:0,F=null!=A.extent?A.extent.ymax:0,A=A.tolerance);H&&"upperLeft"===H.originPosition?(J=H.translate[0],L=H.translate[1],
H=H.scale[0]):(J=null!=H.extent?H.extent.xmin:0,L=null!=H.extent?H.extent.ymax:0,H=H.tolerance);return E===J&&F===L&&A===H};l.getQuantizedBoundsCoordsArray=d;l.getQuantizedBoundsCoordsArrayArray=n;l.getQuantizedBoundsPaths=function(A){return n([0,0,0,0],A)};l.getQuantizedBoundsPoints=function(A){const H=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return d(H,H,A)};l.getQuantizedBoundsRings=function(A){return n([0,0,0,0],A)};l.quantizeBounds=
function(A,H,E){H[0]=D(A,E[0]);H[3]=B(A,E[1]);H[2]=D(A,E[2]);H[1]=B(A,E[3]);return H};l.quantizeExtent=r;l.quantizeGeometry=function(A,H){return A&&H?h.isPoint(H)?g(A,{},H,!1,!1):h.isPolyline(H)?x(A,{},H,!1,!1):h.isPolygon(H)?u(A,{},H,!1,!1):h.isMultipoint(H)?p(A,{},H,!1,!1):h.isExtent(H)?r(A,{},H,!1,!1):null:null};l.quantizeMultipoint=p;l.quantizePaths=t;l.quantizePoint=g;l.quantizePoints=v;l.quantizePolygon=u;l.quantizePolyline=x;l.quantizeRings=C;l.quantizeX=D;l.quantizeY=B;l.toQuantizationTransform=
function(A){return A?{originPosition:"upper-left"===A.originPosition?"upperLeft":"lower-left"===A.originPosition?"lowerLeft":A.originPosition,scale:A.tolerance?[A.tolerance,A.tolerance]:[1,1],translate:null!=A.extent?[A.extent.xmin,A.extent.ymax]:[0,0]}:null};l.unquantizeBounds=function(A,H,E){return E?(H[0]=q(A,E[0]),H[1]=k(A,E[3]),H[2]=q(A,E[2]),H[3]=k(A,E[1]),H):[q(A,H[0]),k(A,H[3]),q(A,H[2]),k(A,H[1])]};l.unquantizeCoordsArray=e;l.unquantizeCoordsArrayArray=b;l.unquantizeExtent=function(A,H,E,
F,J){H.xmin=q(A,E.xmin);H.ymin=k(A,E.ymin);H.xmax=q(A,E.xmax);H.ymax=k(A,E.ymax);H!==E&&(F&&(H.zmin=E.zmin,H.zmax=E.zmax),J&&(H.mmin=E.mmin,H.mmax=E.mmax));return H};l.unquantizeMultipoint=function(A,H,E,F,J){null!=E&&(H.points=c(A,E.points,F,J));return H};l.unquantizePaths=f;l.unquantizePoint=function(A,H,E,F,J){if(null==E)return H;H.x=q(A,E.x);H.y=k(A,E.y);H!==E&&(F&&(H.z=E.z),J&&(H.m=E.m));return H};l.unquantizePoints=c;l.unquantizePolygon=function(A,H,E,F,J){null!=E&&(H.rings=a(A,E.rings,F,J));
return H};l.unquantizePolyline=function(A,H,E,F,J){null!=E&&(H.paths=f(A,E.paths,F,J));return H};l.unquantizeRings=a;l.unquantizeX=q;l.unquantizeY=k;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers","./attributeSupport","./utils","../../../statistics/utils","../../../support/arcadeOnDemand"],function(l,h,D,B,y){return function(){function v(t,q,k){this._fieldDataCache=new Map;
this._returnDistinctMap=new Map;this.returnDistinctValues=t.returnDistinctValues??!1;this.fieldsIndex=k;this.featureAdapter=q;if((q=t.outFields)&&!q.includes("*")){this.outFields=q;t=0;for(const b of q){var e=h.getExpressionFromFieldName(b);e=(q=this.fieldsIndex.get(e))?null:h.getWhereClause(e,k);q=q?q.name:h.getAliasFromFieldName(b)||`FIELD_EXP_${t++}`;this._fieldDataCache.set(b,{alias:q,clause:e})}}}var C=v.prototype;C.countDistinctValues=function(t){if(!this.returnDistinctValues)return t.length;
t.forEach(q=>this.getAttributes(q));return this._returnDistinctMap.size};C.getAttributes=function(t){t=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(t)};C.getFieldValue=function(t,q,k){const e=k?k.name:q;let b=null;this._fieldDataCache.has(e)?b=this._fieldDataCache.get(e)?.clause:k||(b=h.getWhereClause(q,this.fieldsIndex),this._fieldDataCache.set(e,{alias:e,clause:b}));return k?this.featureAdapter.getAttribute(t,e):b?.calculateValue(t,this.featureAdapter)};
C.getDataValues=function(t,q){const k=q.normalizationType,e=q.normalizationTotal;return t.map(b=>{let c=q.field&&this.getFieldValue(b,q.field,this.fieldsIndex.get(q.field));q.field2&&(c=`${B.processNullValue(c)}${q.fieldDelimiter}${B.processNullValue(this.getFieldValue(b,q.field2,this.fieldsIndex.get(q.field2)))}`,q.field3&&(c=`${c}${q.fieldDelimiter}${B.processNullValue(this.getFieldValue(b,q.field3,this.fieldsIndex.get(q.field3)))}`));k&&Number.isFinite(c)&&(b="field"===k&&q.normalizationField?
this.getFieldValue(b,q.normalizationField,this.fieldsIndex.get(q.normalizationField)):null,c=B.getNormalizedValue(c,k,b,e));return c})};C.getExpressionValues=async function(t,q,k,e){const {arcadeUtils:b}=await y.loadArcade(),c=b.hasGeometryOperations(q);c&&await b.enableGeometryOperations();const f=b.createFunction(q),a=k&&b.getViewInfo(k),d={fields:this.fieldsIndex.fields};return t.map(n=>{n={attributes:this.featureAdapter.getAttributes(n),layer:d,geometry:c?{...D.getGeometry(e.geometryType,e.hasZ,
e.hasM,this.featureAdapter.getGeometry(n)),spatialReference:k?.spatialReference}:null};n=b.createExecContext(n,a);return b.executeFunction(f,n)})};C.validateItem=function(t,q){this._fieldDataCache.has(q)||this._fieldDataCache.set(q,{alias:q,clause:h.getWhereClause(q,this.fieldsIndex)});return this._fieldDataCache.get(q)?.clause?.testFeature(t,this.featureAdapter)??!1};C.validateItems=function(t,q){this._fieldDataCache.has(q)||this._fieldDataCache.set(q,{alias:q,clause:h.getWhereClause(q,this.fieldsIndex)});
return this._fieldDataCache.get(q)?.clause?.testSet(t,this.featureAdapter)??!1};C._processAttributesForOutFields=function(t){const q=this.outFields;if(!q||!q.length)return this.featureAdapter.getAttributes(t);const k={};for(const e of q){const {alias:b,clause:c}=this._fieldDataCache.get(e);k[b]=c?c.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,b)}return k};C._processAttributesForDistinctValues=function(t){if(null==t||!this.returnDistinctValues)return t;var q=this.outFields,
k=[];if(q)for(const b of q){var {alias:e}=this._fieldDataCache.get(b);k.push(t[e])}else for(e in t)k.push(t[e]);q=`${(q||["*"]).join(",")}=${k.join(",")}`;k=this._returnDistinctMap.get(q)||0;this._returnDistinctMap.set(q,++k);return 1<k?null:t};return l._createClass(v)}()})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){async function c(m,z,A){if(!m)return null;var {where:H}=m;m.where=H=H&&H.trim();if(!H||/^1 *= *1$/.test(H)||z&&z===H)m.where=null;if(!m.geometry)return m;z=await a(m);m.distance=0;m.units=null;"esriSpatialRelEnvelopeIntersects"===m.spatialRel&&({spatialReference:H}=m.geometry,z=v.getGeometryExtent(z),z.spatialReference=H);if(z){await b.checkProjectionSupport(z.spatialReference,A);H=z.spatialReference;z=f(z,A)&&C.isExtent(z)?{spatialReference:H,rings:[[[z.xmin,z.ymin],
[z.xmin,z.ymax],[z.xmax,z.ymax],[z.xmax,z.ymin],[z.xmin,z.ymin]]]}:z;H=(await t.normalizeCentralMeridian(C.fromJSON(z)))[0];if(null==H)throw r;const E="quantizationParameters"in m&&m.quantizationParameters?.tolerance||"maxAllowableOffset"in m&&m.maxAllowableOffset||0;z=E&&f(z,A)?{densificationStep:8*E}:void 0;H=H.toJSON();z=await b.project(H,H.spatialReference,A,z);if(!z)throw r;z.spatialReference=A;m.geometry=z}return m}function f(m,z){if(!m)return!1;const A=m.spatialReference;return(C.isExtent(m)||
C.isPolygon(m)||C.isPolyline(m))&&!q.equals(A,z)&&!y.canProjectWithoutEngine(A,z)}async function a(m){const {distance:z,units:A}=m,H=m.geometry;if(null==z||"vertexAttributes"in H)return H;var E=H.spatialReference;m=A?n.fromJSON(A):B.getUnitString(E);E=E&&(q.isGeographic(E)||q.isWebMercator(E))?H:await b.checkProjectionSupport(E,q.WGS84).then(()=>b.project(H,q.WGS84));return(await d())(E.spatialReference,E,z,m)}async function d(){return(await new Promise((m,z)=>l(["../../../geometry/geometryEngineJSON"],
m,z))).geodesicBuffer}const n=new D.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),r=Object.freeze({}),p=new e,g=new e,u=new e,x={esriGeometryPoint:k.convertToPoint,esriGeometryPolyline:k.convertToPolyline,esriGeometryPolygon:k.convertToPolygon,esriGeometryMultipoint:k.convertToMultipoint},w=(m,z)=>"_geVersion"!==m?z:void 0;h.QUERY_ENGINE_EMPTY_RESULT=
r;h.cleanFromGeometryEngine=function(m){return m&&"_geVersion"in m?JSON.parse(JSON.stringify(m,w)):m};h.getGeometry=function(m,z,A,H,E,F,J=z,L=A){const I=z&&J,G=A&&L;H=null!=H?"coords"in H?H:H.geometry:null;if(null==H)return null;if(E)return z=k.generalizeOptimizedGeometry(g,H,z,A,m,E,J,L),F&&(z=k.quantizeOptimizedGeometry(u,z,I,G,m,F)),x[m]?.(z,I,G)??null;if(F)return F=k.quantizeOptimizedGeometry(u,H,z,A,m,F,J,L),x[m]?.(F,I,G)??null;k.removeZMValues(p,H,z,A,J,L);return x[m]?.(p,I,G)??null};h.normalizeQuery=
async function(m,z,A){const {outFields:H,orderByFields:E,groupByFieldsForStatistics:F,outStatistics:J}=m;if(H)for(var L=0;L<H.length;L++)H[L]=H[L].trim();if(E)for(L=0;L<E.length;L++)E[L]=E[L].trim();if(F)for(L=0;L<F.length;L++)F[L]=F[L].trim();if(J)for(L=0;L<J.length;L++)J[L].onStatisticField&&(J[L].onStatisticField=J[L].onStatisticField.trim());m.geometry&&!m.outSR&&(m.outSR=m.geometry.spatialReference);return c(m,z,A)};h.normalizeQueryLike=c;h.transformCentroid=function(m,z,A,H=m.hasZ,E=m.hasM){if(null==
z)return null;const F=m.hasZ&&H,J=m.hasM&&E;return A?(m=k.quantizeOptimizedGeometry(u,z,m.hasZ,m.hasM,"esriGeometryPoint",A,H,E),k.convertToPoint(m,F,J)):k.convertToPoint(z,F,J)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(l,h,D){function B(w){return null==w||"string"===typeof w&&!w?"\x3cNull\x3e":w}function y(w){const m=null!=w.minValue||
null!=w.maxValue,z=!!w.sqlExpression&&w.supportsSQLExpression;return!(null!=w.normalizationField||null!=w.normalizationType)&&!m&&!z}function v(w){const {values:m,useSampleStdDev:z,supportsNullCount:A}=w;var H=Number.POSITIVE_INFINITY;let E=Number.NEGATIVE_INFINITY,F=null,J=null;var L=null;let I=null,G=0;const K=null==w.minValue?-Infinity:w.minValue,P=null==w.maxValue?Infinity:w.maxValue;for(const Y of m)Number.isFinite(Y)?Y>=K&&Y<=P&&(F=null===F?Y:F+Y,H=Math.min(H,Y),E=Math.max(E,Y),G++):"string"===
typeof Y&&G++;if(G&&null!=F){J=F/G;L=0;for(const Y of m)Number.isFinite(Y)&&Y>=K&&Y<=P&&(L+=(Y-J)**2);I=z?1<G?L/(G-1):0:0<G?L/G:0;L=Math.sqrt(I)}else E=H=null;H={avg:J,count:G,max:E,min:H,stddev:L,sum:F,variance:I};A&&(H.nullcount=m.length-G);w.percentileParams&&(H.median=C(m,w.percentileParams));return H}function C(w,m){const {fieldType:z,value:A,orderBy:H,isDiscrete:E}=m,F=t(z,"desc"===H);w=[...w].filter(G=>null!=G).sort((G,K)=>F(G,K));if(0===w.length)return null;if(0>=A)return w[0];if(1<=A)return w[w.length-
1];var J=(w.length-1)*A,L=Math.floor(J);m=L+1;J%=1;L=w[L];const I=w[m];return m>=w.length||E||"string"===typeof L||"string"===typeof I?L:L*(1-J)+I*J}function t(w,m){const z=m?1:-1,A=e(m),H=k(m);if(!w||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...u].includes(w))return(E,F)=>"number"===typeof E&&"number"===typeof F?A(E,F):"string"===typeof E&&"string"===typeof F?H(E,F):z;if("esriFieldTypeDate"===w)return(E,F)=>{E=(new Date(E)).getTime();F=(new Date(F)).getTime();
return isNaN(E)||isNaN(F)?z:A(E,F)};if(u.has(w))return(E,F)=>A(E,F);if("esriFieldTypeString"===w)return(E,F)=>H(E,F);if("esriFieldTypeGUID"===w||"esriFieldTypeGlobalID"===w){const E=k(m);return(F,J)=>E(b(F),b(J))}return m?(E,F)=>1:(E,F)=>-1}function q(w,m,z){if(z){if(null==w)return null==m?0:1;if(null==m)return-1}else{if(null==w)return null==m?0:-1;if(null==m)return 1}return null}function k(w){return w?(m,z)=>{const A=q(m,z,!0);if(null!=A)return A;m=m.toUpperCase();z=z.toUpperCase();return m>z?-1:
m<z?1:0}:(m,z)=>{const A=q(m,z,!1);if(null!=A)return A;m=m.toUpperCase();z=z.toUpperCase();return m<z?-1:m>z?1:0}}function e(w){return w?(m,z)=>{const A=q(m,z,!0);return null!=A?A:z-m}:(m,z)=>{const A=q(m,z,!1);return null!=A?A:m-z}}function b(w){return w.substr(24,12)+w.substr(19,4)+w.substr(16,2)+w.substr(14,2)+w.substr(11,2)+w.substr(9,2)+w.substr(6,2)+w.substr(4,2)+w.substr(2,2)+w.substr(0,2)}function c(w){return"coded-value"!==w?.type?[]:w.codedValues.map(m=>m.code)}function f(w,m){const z=d({field:m.field,
normalizationType:m.normalizationType,normalizationField:m.normalizationField,classificationMethod:m.classificationMethod,standardDeviationInterval:m.standardDeviationInterval,breakCount:m.numClasses||5});w=a(w,m.minValue,m.maxValue);return D.createGenerateRendererClassBreaks({definition:z,values:w,normalizationTotal:m.normalizationTotal})}function a(w,m,z){const A=null==m?-Infinity:m,H=null==z?Infinity:z;return w.filter(E=>Number.isFinite(E)&&E>=A&&E<=H)}function d(w){const {breakCount:m,field:z,
normalizationField:A,normalizationType:H}=w,E=w.classificationMethod||"equal-interval";return new h({breakCount:m,classificationField:z,classificationMethod:E,normalizationField:"field"===H?A:void 0,normalizationType:H,standardDeviationInterval:"standard-deviation"===E?w.standardDeviationInterval||1:void 0})}function n(w,m){const {field:z,classificationMethod:A,standardDeviationInterval:H,normalizationType:E,normalizationField:F,normalizationTotal:J,minValue:L,maxValue:I}=m,G=m.numBins||10;let K=
m=null,P=null;A&&"equal-interval"!==A||E?({classBreaks:w}=f(w,{field:z,normalizationType:E,normalizationField:F,normalizationTotal:J,classificationMethod:A,standardDeviationInterval:H,minValue:L,maxValue:I,numClasses:G}),m=w[0].minValue,K=w[w.length-1].maxValue,P=w.map(Y=>[Y.minValue,Y.maxValue])):(null!=L&&null!=I?(m=L,K=I):(w=v({values:w,minValue:L,maxValue:I,useSampleStdDev:!E,supportsNullCount:y({normalizationType:E,normalizationField:F,minValue:L,maxValue:I})}),m=w.min??null,K=w.max??null),P=
p(m??0,K??0,G));return{min:m,max:K,intervals:P}}function r(w,m){let z=-1;for(let A=w.length-1;0<=A;A--)if(m>=w[A][0]){z=A;break}return z}function p(w,m,z){const A=(m-w)/z,H=[];let E;for(let F=1;F<=z;F++)E=w+A,E=Number(E.toFixed(16)),H.push([w,F===z?m:E]),w=E;return H}const g=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,u=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),x="min max avg stddev count sum variance nullcount median".split(" ");l.calculateClassBreaks=
f;l.calculateHistogram=function(w,m){var z=n(w,m);if(null==z.min&&null==z.max)return{bins:[],minValue:z.min,maxValue:z.max,normalizationTotal:m.normalizationTotal};const A=z.intervals,H=z.min??0;z=z.max??0;const E=A.map((F,J)=>({minValue:A[J][0],maxValue:A[J][1],count:0}));for(const F of w)null!=F&&F>=H&&F<=z&&(w=r(A,F),-1<w&&E[w].count++);return{bins:E,minValue:H,maxValue:z,normalizationTotal:m.normalizationTotal}};l.calculatePercentile=C;l.calculateStatistics=v;l.calculateStringStatistics=function(w){const m=
w.returnDistinct?[...(new Set(w.values))]:w.values;var z=m.filter(H=>null!=H).sort();const A=z.length;z={count:A,min:z[0],max:z[A-1]};w.supportsNullCount&&(z.nullcount=m.length-A);w.percentileParams&&(z.median=C(m,w.percentileParams));return z};l.calculateUniqueValuesCount=function(w){const m={};for(let z of w){if(null==z||"string"===typeof z&&""===z.trim())z=null;null==m[z]?m[z]={count:1,data:z}:m[z].count++}return{count:m}};l.createClassBreaksDefinition=d;l.createUVResult=function(w,m,z,A){w=w.count;
const H=[];if(z&&m){z=[];var E=c(m[0]);for(const F of E)if(m[1]){E=c(m[1]);for(const J of E)if(m[2]){E=c(m[2]);for(const L of E)z.push(`${B(F)}${A}${B(J)}${A}${B(L)}`)}else z.push(`${B(F)}${A}${B(J)}`)}else z.push(F);for(const F of z)w.hasOwnProperty(F)||(w[F]={data:F,count:0})}for(const F in w)m=w[F],H.push({value:m.data,count:m.count,label:m.label});return{uniqueValueInfos:H}};l.getAttributeComparator=t;l.getEqualIntervalBins=p;l.getNormalizedValue=function(w,m,z,A){let H=null;switch(m){case "log":0!==
w&&(H=Math.log(w)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(A)&&0!==A&&(H=w/A*100);break;case "field":Number.isFinite(z)&&0!==z&&(H=w/z);break;case "natural-log":0<w&&(H=Math.log(w));break;case "square-root":0<w&&(H=w**.5)}return H};l.isNullCountSupported=y;l.processNullValue=B;l.processSummaryStatisticsResult=function(w,m){let z;for(z in w)x.includes(z)&&(Number.isFinite(w[z])||(w[z]=null));if(!m)return w;["avg","stddev","variance"].forEach(A=>{null!=w[A]&&(w[A]=Math.ceil(w[A]??
0))});return w};l.resolveCBResult=function(w,m){let z=w.classBreaks;const A=z[0]?.minValue,H=z[z.length-1]?.maxValue,E="standard-deviation"===m;z=z.map(F=>{const J=F.label;F={minValue:F.minValue,maxValue:F.maxValue,label:J};if(E&&J){const L=J.match(g)?.map(I=>+I.trim())??[];2===L.length?(F.minStdDev=L[0],F.maxStdDev=L[1],0>L[0]&&0<L[1]&&(F.hasAvg=!0)):1===L.length&&(J.includes("\x3c")?(F.minStdDev=null,F.maxStdDev=L[0]):J.includes("\x3e")&&(F.minStdDev=L[0],F.maxStdDev=null))}return F});return{minValue:A,
maxValue:H,classBreakInfos:z,normalizationTotal:w.normalizationTotal}};l.statisticTypes=x;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t,q,k){v=new D.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});D=new D.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});B=function(e){function b(c){c=e.call(this,c)||this;c.type="class-breaks-definition";c.breakCount=
null;c.classificationField=null;c.classificationMethod=null;c.normalizationField=null;c.normalizationType=null;return c}l._inherits(b,e);l._createClass(b,[{key:"standardDeviationInterval",set:function(c){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",c)}},{key:"definedInterval",set:function(c){"defined-interval"===this.classificationMethod&&this._set("definedInterval",c)}}]);return b}(B.JSONSupport);h.__decorate([q.enumeration({classBreaksDef:"class-breaks-definition"})],
B.prototype,"type",void 0);h.__decorate([y.property({json:{write:!0}})],B.prototype,"breakCount",void 0);h.__decorate([y.property({json:{write:!0}})],B.prototype,"classificationField",void 0);h.__decorate([y.property({type:String,json:{read:v.read,write:v.write}})],B.prototype,"classificationMethod",void 0);h.__decorate([y.property({json:{write:!0}})],B.prototype,"normalizationField",void 0);h.__decorate([y.property({json:{read:D.read,write:D.write}})],B.prototype,"normalizationType",void 0);h.__decorate([y.property({value:null,
json:{write:!0}})],B.prototype,"standardDeviationInterval",null);h.__decorate([y.property({value:null,json:{write:!0}})],B.prototype,"definedInterval",null);return B=h.__decorate([k.subclass("esri.rest.support.ClassBreaksDefinition")],B)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(l,h,D){l.enumeration=function(B,y={}){B=B instanceof h.JSONMap?B:new h.JSONMap(B,y);B={type:y?.ignoreUnknown??!0?B.apiValues:String,json:{type:B.jsonValues,
read:y?.readOnly?!1:{reader:B.read},write:{writer:B.write}}};void 0!==y?.readOnly&&(B.readOnly=!!y.readOnly);void 0!==y?.default&&(B.json.default=y.default);void 0!==y?.name&&(B.json.name=y.name);void 0!==y?.nonNullable&&(B.nonNullable=y.nonNullable);return D.property(B)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(l,h){function D(c){var f=c.definition;const {classificationMethod:a,
normalizationType:d,definedInterval:n}=f;f=f.breakCount??1;const r=[];var p=c.values;if(0===p.length)return[];p=p.sort((z,A)=>z-A);var g=p[0],u=p[p.length-1];if("equal-interval"===a)if(p.length>=f){p=(u-g)/f;c=g;for(var x=1;x<f;x++){var w=Number((g+x*p).toFixed(6));r.push({minValue:c,maxValue:w,label:B(c,w,d)});c=w}r.push({minValue:c,maxValue:u,label:B(c,u,d)})}else p.forEach(z=>{r.push({minValue:z,maxValue:z,label:B(z,z,d)})});else if("natural-breaks"===a){p=y(p);c=v(p.uniqueValues,c.valueFrequency||
p.valueFrequency,f);for(x=1;x<f;x++)p.uniqueValues.length>x&&(w=Number(p.uniqueValues[c[x]].toFixed(6)),r.push({minValue:g,maxValue:w,label:B(g,w,d)}),g=w);r.push({minValue:g,maxValue:u,label:B(g,u,d)})}else if("quantile"===a)if(p.length>=f&&g!==u){c=Math.ceil(p.length/f);x=0;for(w=1;w<f;w++){var m=c+x-1;m>p.length&&(m=p.length-1);0>m&&(m=0);r.push({minValue:g,maxValue:p[m],label:B(g,p[m],d)});g=p[m];x+=c;c=Math.ceil((p.length-x)/(f-w))}r.push({minValue:g,maxValue:u,label:B(g,u,d)})}else for(f=-1,
u=0;u<p.length;u++)g=p[u],g!==f&&(f=g,r.push({minValue:f,maxValue:g,label:B(f,g,d)}),f=g);else if("standard-deviation"===a)if(c=q(p),x=k(p,c),0===x)r.push({minValue:p[0],maxValue:p[0],label:B(p[0],p[0],d)});else{p=t(g,u,f,c,x)*x;x=0;for(w=f;1<=w;w--)m=Number((c-(w-.5)*p).toFixed(6)),r.push({minValue:g,maxValue:m,label:B(g,m,d)}),g=m,x++;w=Number((c+.5*p).toFixed(6));r.push({minValue:g,maxValue:w,label:B(g,w,d)});g=w;x++;for(m=1;m<=f;m++)w=x===2*f?u:Number((c+(m+.5)*p).toFixed(6)),r.push({minValue:g,
maxValue:w,label:B(g,w,d)}),g=w,x++}else if("defined-interval"===a){if(!n)return r;f=p[0];u=p[p.length-1];p=Math.ceil((u-f)/n);g=f;for(c=1;c<p;c++)x=Number((f+c*n).toFixed(6)),r.push({minValue:g,maxValue:x,label:B(g,x,d)}),g=x;r.push({minValue:g,maxValue:u,label:B(g,u,d)})}return r}function B(c,f,a){let d=null;return d=c===f?a&&"percent-of-total"===a?c+"%":c.toString():a&&"percent-of-total"===a?c+"% - "+f+"%":c+" - "+f}function y(c){const f=[],a=[];let d=Number.MIN_VALUE,n=1,r=-1;for(let p=0;p<c.length;p++){const g=
c[p];g===d?(n++,a[r]=n):null!==g&&(f.push(g),d=g,n=1,a.push(n),r++)}return{uniqueValues:f,valueFrequency:a}}function v(c,f,a){var d=c.length;const n=[];a>d&&(a=d);for(var r=0;r<a;r++)n.push(Math.round(r*d/a-1));n.push(d-1);r=C(n,c,f,a);d=r.mean;r=r.sdcm;var p=a,g=0,u=0;let x=0,w=0,m=!0;for(let A=0;2>A&&m;A++){0===A&&(m=!1);for(var z=0;z<p-1;z++)for(;n[z+1]+1!==n[z+2];)if(n[z+1]+=1,g=e(z,n,c,f),x=g.sbMean,g=g.sbSdcm,u=e(z+1,n,c,f),w=u.sbMean,u=u.sbSdcm,g+u<r[z]+r[z+1])r[z]=g,r[z+1]=u,d[z]=x,d[z+1]=
w,m=!0;else{--n[z+1];break}for(z=p-1;0<z;z--)for(;n[z]!==n[z-1]+1;)if(--n[z],g=e(z-1,n,c,f),x=g.sbMean,g=g.sbSdcm,u=e(z,n,c,f),w=u.sbMean,u=u.sbSdcm,g+u<r[z-1]+r[z])r[z-1]=g,r[z]=u,d[z-1]=x,d[z]=w,m=!0;else{n[z]+=1;break}}m&&(r=C(n,c,f,a));return n}function C(c,f,a,d){let n=[];var r=[],p=[];let g=0;const u=[],x=[];for(var w=0;w<d;w++){var m=e(w,c,f,a);u.push(m.sbMean);x.push(m.sbSdcm);g+=x[w]}m=g;for(w=!0;w||g<m;){w=!1;n=[];for(r=0;r<d;r++)n.push(c[r]);for(p=0;p<d;p++)for(m=c[p]+1;m<=c[p+1];m++)if(r=
f[m],0<p&&m!==c[p+1]&&Math.abs(r-u[p])>Math.abs(r-u[p-1]))c[p]=m;else if(p<d-1&&c[p]!==m-1&&Math.abs(r-u[p])>Math.abs(r-u[p+1])){c[p+1]=m-1;break}m=g;g=0;r=[];p=[];for(let z=0;z<d;z++){r.push(u[z]);p.push(x[z]);const A=e(z,c,f,a);u[z]=A.sbMean;x[z]=A.sbSdcm;g+=x[z]}}if(g>m){for(f=0;f<d;f++)c[f]=n[f],u[f]=r[f],x[f]=p[f];g=m}return{mean:u,sdcm:x}}function t(c,f,a,d,n){c=Math.max(d-c,f-d)/n/a;return 1<=c?1:.5<=c?.5:.25}function q(c){let f=0;for(let a=0;a<c.length;a++)f+=c[a];return f/=c.length}function k(c,
f){let a=0;for(let d=0;d<c.length;d++){const n=c[d];a+=(n-f)*(n-f)}a/=c.length;return Math.sqrt(a)}function e(c,f,a,d){var n=0,r=0;for(var p=f[c]+1;p<=f[c+1];p++){const g=d[p];n+=a[p]*g;r+=g}0>=r&&b.warn("Exception in Natural Breaks calculation");n/=r;r=0;for(p=f[c]+1;p<=f[c+1];p++)r+=d[p]*(a[p]-n)**2;return{sbMean:n,sbSdcm:r}}const b=h.getLogger("esri.rest.support.generateRendererUtils");l.createGenerateRendererClassBreaks=function(c){const {normalizationTotal:f}=c;return{classBreaks:D(c),normalizationTotal:f}};
l.createGenerateRendererUniqueValues=function(c){c=y(c);const f=[],a=c.uniqueValues.length;for(let d=0;d<a;d++){const n=c.uniqueValues[d];f.push({value:n,count:c.valueFrequency[d],label:n.toString()})}return{uniqueValues:f}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../geometry/SpatialReference".split(" "),function(l,h,D,B,y,v,C){function t(){k||
(k=(async()=>{const b=await new Promise((c,f)=>l(["./arcadeUtils"],c,f));return{arcade:b.arcade,arcadeUtils:b,Dictionary:b.Dictionary,Feature:b.arcadeFeature}})());return k}const q=v.getLogger("esri.support.arcadeOnDemand");let k;B=(b,c,f)=>e.create(b,c,f,null,["$feature","$view"],[]);let e=function(){function b(f,a,d,n,r,p,g){this.services=null;this.script=f;this.evaluate=n;this.fields=Array.isArray(p)?p:p.fields;this._syntaxTree=d;this._arcade=a;this._arcadeFeature=r;this._spatialReference=g;this._referencesGeometry=
a.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}b.create=async function(f,a,d,n,r,p){const {arcade:g,Feature:u,Dictionary:x}=await t(),w=C.fromJSON(a);let m;try{m=g.parseScript(f,p)}catch(J){return q.error(new y("arcade-bad-expression","Failed to parse arcade script",{script:f,error:J})),null}r=r.reduce((J,L)=>({...J,[L]:null}),{});let z=null;null!=n&&(z=new x(n),z.immutable=!0,r.$config=null);p=(n=g.scriptUsesGeometryEngine(m))&&
g.enableGeometrySupport();const A=g.scriptUsesFeatureSet(m)&&g.enableFeatureSetSupport(),H=(a=g.scriptIsAsync(m))&&g.enableAsyncSupport();r={vars:r,spatialReference:w,useAsync:!!H};await Promise.all([p,A,H]);p=new Set;await g.loadDependentModules(p,m,null,a,n);const E=new x;E.immutable=!1;E.setField("scale",0);const F=g.compileScript(m,r);return new b(f,g,m,(J,L)=>{"$view"in J&&J.$view&&(E.setField("scale","object"===typeof J.$view&&"scale"in J.$view?J.$view.scale:void 0),J.$view=E);z&&(J.$config=
z);return F({vars:J,spatialReference:w,services:L})},new u,d,w)};var c=b.prototype;c.repurposeFeature=function(f){f.geometry&&!f.geometry.spatialReference&&(f.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(f.geometry,f.attributes,{fields:this.fields});return this._arcadeFeature};c.referencesGeometry=function(){return this._referencesGeometry};c.referencesScale=function(){return this._referencesScale};return D._createClass(b)}();h.ArcadeExpression=
e;h.createDictionaryExpression=(b,c,f,a)=>e.create(b,c,f,a,["$feature","$view"],[]);h.createLabelExpression=(b,c,f)=>e.create(b,c,f,null,["$feature"],[]);h.createRendererExpression=B;h.createVVExpression=B;h.loadArcade=t;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(l){l.makeEdgeCandidate=function(h,D,B,y,v,C=!1){return{objectId:h,target:D,distance:B,type:"edge",start:y,end:v,draped:C}};l.makeVertexCandidate=
function(h,D,B){return{objectId:h,target:D,distance:B,type:"vertex"}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(l,h,D,B,y,v){function C(da,na,X){if(da)for(const fa of da)(da=(da=B.getDeepValue(fa,na))&&"function"!==typeof da&&X.get(da))&&B.setDeepValue(fa,da.name,na)}function t(da,na){if(!da||!na)return[];T.clear();
q(T,da,na);return Array.from(T).sort()}function q(da,na,X){if(X)if(na?.fields?.length)if(X.includes("*"))for(const {name:fa}of na.fields)da.add(fa);else for(const fa of X)k(da,na,fa);else if(X.includes("*"))da.clear(),da.add("*");else for(const fa of X)null!=fa&&da.add(fa)}function k(da,na,X){"string"===typeof X&&(na?(na=na.get(X))&&da.add(na.name):da.add(X))}async function e(da,na,X){if(X){var {arcadeUtils:fa}=await v.loadArcade();X=fa.extractFieldNames(X,na?.fields?.map(ja=>ja.name));for(const ja of X)k(da,
na,ja)}}async function b(da,na,X){if(X&&"1\x3d1"!==X){var {WhereClause:fa}=await new Promise((ja,ma)=>l(["../../core/sql/WhereClause"],ja,ma));fa=fa.create(X,na);if(!fa.isStandardized)throw new D("fieldUtils:collectFilterFields","Where clause is not standardized",{where:X});q(da,na,fa.fieldNames)}}function c(da,na){for(const X of da)if(X&&X.valueType&&X.valueType===na)return X.name;return null}async function f(da,na){if(na){var X=na.elevationInfo?.featureExpressionInfo;if(X)return X.collectRequiredFields(da,
na.fieldsIndex)}}async function a(da,na,X){const fa=[];X?.expressionInfos&&fa.push(...X.expressionInfos.map(ja=>e(da,na.fieldsIndex,ja.expression)));X=X?.content;if(Array.isArray(X))for(const ja of X)"expression"===ja.type&&ja.expressionInfo&&fa.push(e(da,na.fieldsIndex,ja.expressionInfo.expression));await Promise.all(fa)}async function d(da,na,X){na&&X&&(X.valueExpression?await e(da,na.fieldsIndex,X.valueExpression):X.field&&k(da,na.fieldsIndex,X.field))}function n(da){if(!da)return[];const na=da.geometryFieldsInfo;
return na?t(da.fieldsIndex,[na.shapeAreaField,na.shapeLengthField]):[]}function r(da){const na=new Set;g(da).forEach(X=>na.add(X));n(da).forEach(X=>na.add(X.toLowerCase()));if(da=da&&"infoFor3D"in da?da.infoFor3D:void 0)Object.values(da.assetMapFieldRoles).forEach(X=>na.add(X.toLowerCase())),Object.values(da.transformFieldRoles).forEach(X=>na.add(X.toLowerCase()));return Array.from(na)}function p(da){if(!da)return[];da="editFieldsInfo"in da&&da.editFieldsInfo;if(!da)return[];const {creationDateField:na,
creatorField:X,editDateField:fa,editorField:ja}=da;return[na,X,fa,ja].filter(Boolean)}function g(da){return p(da).map(na=>na.toLowerCase())}async function u(da,na){const {labelingInfo:X,fieldsIndex:fa}=na;X&&X.length&&await Promise.all(X.map(ja=>x(da,fa,ja)))}async function x(da,na,X){if(X){var fa=X.getLabelExpression();X=X.where;"arcade"===fa.type?await e(da,na,fa.expression):(fa=fa.expression.match(/{[^}]*}/g))&&fa.forEach(ja=>{k(da,na,ja.slice(1,-1))});await b(da,na,X)}}function w(da){return"number"===
typeof da&&!isNaN(da)&&isFinite(da)}function m(da){return null===da||w(da)}function z(da){return null===da||Z(da)}function A(da){return null!=da&&"string"===typeof da}function H(da){return null===da||A(da)}function E(){return!0}function F(da,na){let X;switch(da.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":X=da.nullable?z:Z;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":X=
da.nullable?m:w;break;case "string":case "esriFieldTypeString":X=da.nullable?H:A;break;default:X=E}return 1===arguments.length?X:X(na)}function J(da){return null!=da&&qa.has(da.type)}function L(da,na){return null==da||da.nullable&&null===na?null:J(da)&&!I(da.type,Number(na))?h.NumericRangeValidationError.OUT_OF_RANGE:F(da,na)?da.domain?y.validateDomainValue(da.domain,na):null:h.TypeValidationError.INVALID_TYPE}function I(da,na){da="string"===typeof da?G(da):da;if(!da)return!1;const X=da.min,fa=da.max;
return da.isInteger?Z(na)&&na>=X&&na<=fa:na>=X&&na<=fa}function G(da){switch(da){case "esriFieldTypeSmallInteger":case "small-integer":return Ca;case "esriFieldTypeInteger":case "integer":return Da;case "esriFieldTypeBigInteger":case "big-integer":return N;case "esriFieldTypeSingle":case "single":return V;case "esriFieldTypeDouble":case "double":return ka}}function K(da,na,X){if(!na||!na.attributes||!da){if(null!=X)for(var fa of da??[])X.add(fa);return!0}na=na.attributes;fa=!1;for(const ja of da)if(!(ja in
na))if(fa=!0,null!=X)X.add(ja);else break;return fa}const P=/^([0-9_])/,Y=/[^a-z0-9_\u0080-\uffff]+/gi,ea="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),aa=["field","normalizationField"],T=new Set,R=["oid","global-id","guid"],W=["oid","global-id"],S=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,
/shape/i,/perimeter/i,/objectid/i,/_i$/i],Z=(()=>"isInteger"in Number?Number.isInteger:da=>"number"===typeof da&&isFinite(da)&&Math.floor(da)===da)(),ca=["integer","small-integer","single","double"],qa=new Set([...ca,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),ya=["date","date-only","time-only","timestamp-offset"],xa=new Set([...ya,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);h.NumericRangeValidationError=
void 0;(h.NumericRangeValidationError||(h.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";h.TypeValidationError=void 0;(h.TypeValidationError||(h.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const Ca={min:-32768,max:32767,isInteger:!0},Da={min:-2147483648,max:2147483647,isInteger:!0},N={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},V={min:-3.4E38,max:1.2E38,isInteger:!1},ka={min:-Number.MAX_VALUE,
max:Number.MAX_VALUE,isInteger:!1};h.bigIntegerRange=N;h.collectArcadeFieldNames=e;h.collectElevationFields=f;h.collectFeatureReductionFields=async function(da,na,X){if(na&&X&&"fields"in X){var fa=[];fa.push(a(da,na,X.popupTemplate));X.fields&&fa.push(...X.fields.map(async ja=>{ja.onStatisticExpression?e(da,na.fieldsIndex,ja.onStatisticExpression.expression):da.add(ja.onStatisticField)}));await Promise.all(fa)}};h.collectField=k;h.collectFields=q;h.collectFilterFields=async function(da,na,X){na&&
(na.timeInfo&&null!=X&&X.timeExtent&&q(da,na.fieldsIndex,[na.timeInfo.startField,na.timeInfo.endField]),na.floorInfo&&q(da,na.fieldsIndex,[na.floorInfo.floorField]),null!=X&&null!=X.where&&await b(da,na.fieldsIndex,X.where))};h.collectLabelingFields=u;h.collectOrderByInfos=async function(da,na,X){na&&X&&await Promise.all(X.map(fa=>d(da,na,fa)))};h.collectPopupTemplateFields=a;h.dateTypes=ya;h.doubleRange=ka;h.featureHasFields=function(da,na){return!K(da,na,null)};h.fixFields=t;h.fixRendererFields=
function(da,na){if(null!=da&&null!=na)for(const X of Array.isArray(da)?da:[da])if(C(ea,X,na),"visualVariables"in X&&X.visualVariables)for(const fa of X.visualVariables)C(aa,fa,na)};h.fixTimeInfoFields=function(da,na){if(null!=da&&na?.fields?.length)if("startField"in da){var X=na.get(da.startField);na=na.get(da.endField);da.startField=X?.name??null;da.endField=na?.name??null}else X=na.get(da.startTimeField),na=na.get(da.endTimeField),da.startTimeField=X?.name??null,da.endTimeField=na?.name??null};
h.getDisplayFieldName=function({displayField:da,fields:na}){if(da)return da;if(!na||!na.length)return null;if(!(da=c(na,"name-or-title")||c(na,"unique-identifier")||c(na,"type-or-category")))a:{for(const X of na)if(X&&X.name&&(na=X.name.toLowerCase(),na.includes("name")||na.includes("title"))){da=X.name;break a}da=null}return da};h.getEditTrackingFields=p;h.getElevationFields=async function(da){if(!da)return[];const na=new Set;await f(na,da);return Array.from(na).sort()};h.getExpressionFields=async function(da,
na){const X=new Set;for(const fa of na)await e(X,da.fieldsIndex,fa);return Array.from(X).sort()};h.getFeatureEditFields=function(da){return da?t(da.fieldsIndex,p(da)):[]};h.getFeatureGeometryFields=n;h.getFieldDefaultValue=function(da){const na=da.defaultValue;if(void 0!==na&&F(da,na))return na;if(da.nullable)return null};h.getFieldRange=function(da){const na=y.getDomainRange(da.domain);if(na)return na;if(J(da))return G(da.type)};h.getLabelingFields=async function(da){if(!da)return[];const na=new Set;
await u(na,da);return Array.from(na).sort()};h.getLowerCaseDefaultHiddenFields=r;h.getLowerCaseEditTrackingFields=g;h.getNumericTypeForValue=function(da){if(!w(da))return null;if(Z(da)){if(da>=Ca.min&&da<=Ca.max)return"esriFieldTypeSmallInteger";if(da>=Da.min&&da<=Da.max)return"esriFieldTypeInteger"}return da>=V.min&&da<=V.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};h.getTimeFields=async function(da){if(!da)return[];const na="timeInfo"in da&&da.timeInfo;return na?t(da.fieldsIndex,[da.trackIdField,
na.startField,na.endField]):[]};h.integerRange=Da;h.isDateField=function(da){return null!=da&&xa.has(da.type)};h.isFieldEditable=function(da,na){return da.editable&&!R.includes(da.type)&&!g(na).includes(da.name?.toLowerCase()??"")};h.isFieldVisibleByDefault=function(da,na){const X=da.name?.toLowerCase()??"";return!(null!=na?.objectIdField&&X===na.objectIdField.toLowerCase())&&!(null!=na?.globalIdField&&X===na.globalIdField.toLowerCase())&&!r(na).includes(X)&&!W.includes(da.type)&&!S.some(fa=>fa.test(X))};
h.isNumberInRange=I;h.isNumericField=J;h.isRasterPixelValueField=function(da){return da?["raster.itempixelvalue","raster.servicepixelvalue"].some(na=>da.toLowerCase().startsWith(na)):!1};h.isStringField=function(da){return null!=da&&("string"===da.type||"esriFieldTypeString"===da.type)};h.isValidFieldValue=function(da,na){return null===L(da,na)};h.isValueMatchingFieldType=F;h.normalizeFieldName=function(da){return null==da?null:da.trim().replaceAll(Y,"_").replace(P,"F$1")||null};h.numericTypes=ca;
h.packFields=function(da,na,X=1){if(!na||!da)return[];if(na.includes("*"))return["*"];na=t(da,na);return na.length/da.fields.length>=X?["*"]:na};h.populateMissingFields=K;h.rendererFields=ea;h.sanitizeNullFieldValue=function(da){return null==da||"number"===typeof da&&isNaN(da)?null:da};h.singleRange=V;h.smallIntegerRange=Ca;h.unpackFieldNames=function(da,na){return null==na||null==da?[]:na.includes("*")?(da.fields??[]).map(X=>X.name):na};h.validateFieldValue=L;h.validationErrorToString=function(da,
na,X){switch(da){case y.DomainValidationError.INVALID_CODED_VALUE:return`Value ${X} is not in the coded domain - field: ${na.name}, domain: ${JSON.stringify(na.domain)}`;case y.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${X} is out of the range of valid values - field: ${na.name}, domain: ${JSON.stringify(na.domain)}`;case h.TypeValidationError.INVALID_TYPE:return`Value ${X} is not a valid value for the field type - field: ${na.name}, type: ${na.type}, nullable: ${na.nullable}`;case h.NumericRangeValidationError.OUT_OF_RANGE:const {min:fa,
max:ja}=G(na.type);return`Value ${X} is out of range for the number type - field: ${na.name}, type: ${na.type}, value range is ${fa} to ${ja}`}};h.visualVariableFields=aa;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(l){l.DomainValidationError=void 0;(function(h){h.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";h.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(l.DomainValidationError||
(l.DomainValidationError={}));l.getDomainRange=function(h){if(h&&"range"===h.type)return{min:"range"in h?h.range[0]:h.minValue,max:"range"in h?h.range[1]:h.maxValue}};l.validateDomainValue=function(h,D){switch(h.type){case "range":const B="range"in h?h.range[0]:h.minValue;h="range"in h?h.range[1]:h.maxValue;if(null!=B&&+D<B||null!=h&&+D>h)return l.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==h.codedValues||h.codedValues.every(y=>null==y||y.code!==D))return l.DomainValidationError.INVALID_CODED_VALUE;
break;case "codedValue":if(null==h.codedValues||h.codedValues.every(y=>null==y||y.code!==D))return l.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){function c(){return new Promise((r,p)=>l(["../../../geometry/geometryEngineJSON"],r,p))}const f={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var a={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},d={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},n={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};h.canQueryWithRBush=
function(r){if(v.isExtent(r))return!0;if(v.isPolygon(r)){for(const p of r.rings)if(5!==p.length||p[0][0]!==p[1][0]||p[0][0]!==p[4][0]||p[2][0]!==p[3][0]||p[0][1]!==p[3][1]||p[0][1]!==p[4][1]||p[1][1]!==p[2][1])return!1;return!0}return!1};h.checkSpatialQuerySupport=async function(r,p,g){const {spatialRel:u,geometry:x}=r;if(x){if(null==u||!0!==a[u])throw new D("feature-store:unsupported-query","Unsupported query spatial relationship",{query:r});if(C.isValid(x.spatialReference)&&C.isValid(g)){if(null==
x||!0!==d[v.getJsonType(x)])throw new D("feature-store:unsupported-query","Unsupported query geometry type",{query:r});if(null==p||!0!==n[p])throw new D("feature-store:unsupported-query","Unsupported layer geometry type",{query:r});if(r.outSR)return e.checkProjectionSupport(r.geometry&&r.geometry.spatialReference,r.outSR)}}};h.getSpatialQueryOperator=function(r,p,g,u,x){if(v.isPolygon(p)&&"esriGeometryPoint"===g&&("esriSpatialRelIntersects"===r||"esriSpatialRelContains"===r)){const w=q.convertFromPolygon(new k,
p,!1,!1);return Promise.resolve(m=>t.polygonContainsPoint(w,!1,!1,m))}if(v.isPolygon(p)&&"esriGeometryMultipoint"===g){const w=q.convertFromPolygon(new k,p,!1,!1);if("esriSpatialRelContains"===r)return Promise.resolve(m=>t.polygonContainsMultipoint(w,!1,!1,m,u,x))}if(v.isExtent(p)&&"esriGeometryPoint"===g&&("esriSpatialRelIntersects"===r||"esriSpatialRelContains"===r))return Promise.resolve(w=>B.extentContainsPoint(p,b.getGeometry(g,u,x,w)));if(v.isExtent(p)&&"esriGeometryMultipoint"===g&&"esriSpatialRelContains"===
r)return Promise.resolve(w=>B.extentContainsMultipoint(p,b.getGeometry(g,u,x,w)));if(v.isExtent(p)&&"esriSpatialRelIntersects"===r){const w=y.getExtentIntersector(g);return Promise.resolve(m=>w(p,b.getGeometry(g,u,x,m)))}return c().then(w=>{const m=w[f[r]].bind(null,p.spatialReference,p);return z=>m(b.getGeometry(g,u,x,z))})};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(l,h){l.extentIntersectsExtent=
h.extentIntersectsExtent;l.extentIntersectsMultipoint=h.extentIntersectsMultipoint;l.extentIntersectsPoint=h.extentIntersectsPoint;l.extentIntersectsPolygon=h.extentIntersectsPolygon;l.extentIntersectsPolyline=h.extentIntersectsPolyline;l.extentIntersectsRings=h.extentIntersectsRings;l.getFeatureExtentIntersector=h.getFeatureExtentIntersector;l.isSelfIntersecting=h.isSelfIntersecting;l.segmentIntersects=h.segmentIntersects;l.getExtentIntersector=function(D){return"mesh"===D?h.extentIntersectsExtent:
h.getFeatureExtentIntersector(D)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(l){function h(D,B,y,v,C){if(!D)return!1;B=B?y?4:3:y?3:2;const {coords:t,lengths:q}=D;y=!1;D=0;for(const e of q){var k=D;for(let b=D,c=D+e*B;b<c;b+=B){k=b+B;k===c&&(k=D);const f=t[b],a=t[b+1],d=t[k];k=t[k+1];(a<C&&k>=C||k<C&&a>=C)&&f+(C-a)/(k-a)*(d-f)<v&&(y=!y)}D+=e*B}return y}l.polygonContainsCoords=h;l.polygonContainsMultipoint=function(D,
B,y,v,C,t){C=C?t?4:3:t?3:2;const {coords:q,lengths:k}=v;if(!k)return!1;for(let e=0,b=0;e<k.length;e++,b+=C)if(!h(D,B,y,q[b],q[b+1]))return!1;return!0};l.polygonContainsPoint=function(D,B,y,v){return h(D,B,y,v.coords[0],v.coords[1])};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(l){function h(y,v,C,t,q){if(null!=t&&null!=q)return k=>{const e=y.getAttribute(k,v);k=y.getAttribute(k,C);return(null==e||e<=
q)&&(null==k||k>=t)};if(null!=t)return k=>{k=y.getAttribute(k,C);return null==k||k>=t};if(null!=q)return k=>{k=y.getAttribute(k,v);return null==k||k<=q}}function D(y,v,C,t){if(null!=C&&null!=t&&C===t)return q=>y.getAttribute(q,v)===C;if(null!=C&&null!=t)return q=>{q=y.getAttribute(q,v);return q>=C&&q<=t};if(null!=C)return q=>y.getAttribute(q,v)>=C;if(null!=t)return q=>y.getAttribute(q,v)<=t}function B(){return()=>!1}l.getTimeExtent=async function(y,v){if(!y)return null;const C=v.featureAdapter,{startTimeField:t,
endTimeField:q}=y;let k=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY;if(t&&q)await v.forEach(b=>{const c=C.getAttribute(b,t);b=C.getAttribute(b,q);null==c||isNaN(c)||(k=Math.min(k,c));null==b||isNaN(b)||(e=Math.max(e,b))});else{const b=t||q;await v.forEach(c=>{c=C.getAttribute(c,b);null==c||isNaN(c)||(k=Math.min(k,c),e=Math.max(e,c))})}return{start:k,end:e}};l.getTimeOperator=function(y,v,C){if(!v||!y)return null;const {startTimeField:t,endTimeField:q}=y;if(!t&&!q)return null;const {start:k,
end:e}=v;return null===k&&null===e?null:void 0===k&&void 0===e?B():t&&q?h(C,t,q,k,e):D(C,t||q,k,e)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(l,h){function D(y){return"oid"===y.type||"esriFieldTypeOID"===y.type}function B(y){return"global-id"===y.type||"esriFieldTypeGlobalID"===y.type}return function(){function y(C=[]){this.fields=[];this._fieldsMap=new Map;
this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(C){this.fields=C;var t=[];for(const q of C){C=q?.name;const k=h.normalizeFieldName(q?.name)?.toLowerCase()??"";if(C&&k){const e=C.trim().toLowerCase();this._fieldsMap.set(C,q);this._fieldsMap.set(e,q);this._normalizedFieldsMap.set(k,q);t.push(e);"date"===q.type||"esriFieldTypeDate"===q.type||"date-only"===q.type||"esriFieldTypeDateOnly"===
q.type||"timestamp-offset"===q.type||"esriFieldTypeTimestampOffset"===q.type?(this.dateFields.push(q),this._dateFieldsSet.add(q)):h.isNumericField(q)&&(this._numericFieldsSet.add(q),this.numericFields.push(q));D(q)||B(q)||(q.editable=null==q.editable||!!q.editable,q.nullable=null==q.nullable||!!q.nullable)}}t.sort();this.uid=t.join(",")}}var v=y.prototype;v.destroy=function(){this._fieldsMap.clear()};v.has=function(C){return null!=this.get(C)};v.get=function(C){if(C){var t=this._fieldsMap.get(C);
if(t)return t;(t=this._fieldsMap.get(C.trim().toLowerCase())??this._normalizedFieldsMap.get(h.normalizeFieldName(C)?.toLowerCase()??""))&&this._fieldsMap.set(C,t);return t}};v.isDateField=function(C){return this._dateFieldsSet.has(this.get(C))};v.isNumericField=function(C){return this._numericFieldsSet.has(this.get(C))};v.normalizeFieldName=function(C){if(C=this.get(C))return C.name??void 0};l._createClass(y,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const C of this.fields)D(C)||
B(C)||C.nullable||void 0!==h.getFieldDefaultValue(C)||this._requiredFields.push(C)}return this._requiredFields}}]);return y}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a){function d(A){return n.has(A)?n.get(A):"number"===typeof A?A:1}l.Task=void 0;(function(A){A[A.YIELD=1]="YIELD"})(l.Task||(l.Task={}));l.TaskPriority=void 0;(function(A){A.RESOURCE_CONTROLLER_IMMEDIATE="immediate";A.RESOURCE_CONTROLLER="schedule";A.SLIDE="slide";A.STREAM_DATA_LOADER="stream loader";A.ELEVATION_QUERY="elevation query";A.TERRAIN_SURFACE="terrain";A.SURFACE_GEOMETRY_UPDATES="surface geometry updates";A.LOD_RENDERER="LoD renderer";A.GRAPHICS_CORE=
"Graphics3D";A.I3S_CONTROLLER="I3S";A.POINT_CLOUD_LAYER="point cloud";A.FEATURE_TILE_FETCHER="feature fetcher";A.OVERLAY="overlay";A.STAGE="stage";A.GRAPHICS_DECONFLICTOR="graphics deconflictor";A.FILTER_VISIBILITY="Graphics3D filter visibility";A.SCALE_VISIBILITY="Graphics3D scale visibility";A.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";A.POINT_OF_INTEREST_FREQUENT="POI frequent";A.POINT_OF_INTEREST_INFREQUENT="POI infrequent";A.LABELER="labeler";A.FEATURE_QUERY_ENGINE="feature query";A.FEATURE_TILE_TREE=
"feature tile tree";A.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";A.ELEVATION_ALIGNMENT="elevation alignment";A.TEXT_TEXTURE_ATLAS="text texture atlas";A.TEXTURE_UNLOAD="texture unload";A.LINE_OF_SIGHT_TOOL="line of sight tool";A.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";A.ELEVATION_PROFILE="elevation profile";A.SNAPPING="snapping";A.SHADOW_ACCUMULATOR="shadow accumulator";A.CLOUDS_GENERATOR="clouds generator";A[A.NONE=0]="NONE";A[A.TEST_PRIO=1]="TEST_PRIO"})(l.TaskPriority||
(l.TaskPriority={}));const n=new Map([[l.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[l.TaskPriority.RESOURCE_CONTROLLER,4],[l.TaskPriority.SLIDE,0],[l.TaskPriority.STREAM_DATA_LOADER,0],[l.TaskPriority.ELEVATION_QUERY,0],[l.TaskPriority.TERRAIN_SURFACE,1],[l.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[l.TaskPriority.LOD_RENDERER,2],[l.TaskPriority.GRAPHICS_CORE,2],[l.TaskPriority.I3S_CONTROLLER,2],[l.TaskPriority.POINT_CLOUD_LAYER,2],[l.TaskPriority.FEATURE_TILE_FETCHER,2],[l.TaskPriority.OVERLAY,
4],[l.TaskPriority.STAGE,4],[l.TaskPriority.GRAPHICS_DECONFLICTOR,4],[l.TaskPriority.FILTER_VISIBILITY,4],[l.TaskPriority.SCALE_VISIBILITY,4],[l.TaskPriority.FRUSTUM_VISIBILITY,4],[l.TaskPriority.CLOUDS_GENERATOR,4],[l.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[l.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[l.TaskPriority.LABELER,8],[l.TaskPriority.FEATURE_QUERY_ENGINE,8],[l.TaskPriority.FEATURE_TILE_TREE,16],[l.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[l.TaskPriority.ELEVATION_ALIGNMENT,12],[l.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[l.TaskPriority.TEXTURE_UNLOAD,12],[l.TaskPriority.LINE_OF_SIGHT_TOOL,16],[l.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[l.TaskPriority.SNAPPING,0],[l.TaskPriority.SHADOW_ACCUMULATOR,30]]),r=b.Milliseconds(6.5),p=b.Milliseconds(1),g=b.Milliseconds(30),u=b.Milliseconds(1E3/30),x=b.Milliseconds(100);var w;(function(A){let H=function(){function J(){this._updating=e.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new C("total"),tasks:new Map};this._frameTaskTimes=
new Map;this._budget=new F;this._state=a.RenderState.INTERACTING;this._tasks=new t;this._runQueue=new t;this._load=0;this._idleStateCallbacks=new t;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=k.watch(()=>f.SCHEDULER_LOG_SLOW_TASKS,G=>this._debug=G,k.initial);for(const G of Object.keys(l.TaskPriority))this.performanceInfo.tasks.set(l.TaskPriority[G],new C(l.TaskPriority[G]));const I=this;this._test={FRAME_SAFETY_BUDGET:r,INTERACTING_BUDGET:u,IDLE_BUDGET:x,get availableBudget(){return I._budget.budget},
usedBudget:0,getBudget:()=>I._budget,setBudget:G=>I._budget=G,updateTask:G=>this._updateTask(G),getState:G=>this._getState(G),getRuntime:G=>this._getRuntime(G),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var L=J.prototype;L._updatingChanged=function(){this._updating.value=this._tasks.some(I=>I.needsUpdate)};L.destroy=function(){this._tasks.toArray().forEach(I=>I.remove());this._tasks.clear();v.removeMaybe(this._debugHandle);this._microTaskQueued=
!1;this._updatingChanged()};L.taskRunningChanged=function(I){this._updatingChanged();I&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};L.registerTask=function(I,G){const K=d(I);G=new E(this,I,G,K);this._tasks.push(G);this._updatingChanged();this.performanceInfo.tasks.has(I)||this.performanceInfo.tasks.set(I,new C(I));return G};L.registerIdleStateCallbacks=
function(I,G){const K={idleBegin:I,idleEnd:G};this._idleStateCallbacks.push(K);this.state===a.RenderState.IDLE&&this._idleUpdatesStartFired&&K.idleBegin();const P=this;return{remove:()=>this._removeIdleStateCallbacks(K),set idleBegin(Y){P._idleUpdatesStartFired&&(K.idleEnd(),P._state===a.RenderState.IDLE&&Y());K.idleBegin=Y},set idleEnd(Y){K.idleEnd=Y}}};L.updateBudget=function(I){this._test.usedBudget=0;++this._frameNumber;let G=r,K=I.frameDuration,P=p;switch(this.state){case a.RenderState.IDLE:G=
b.Milliseconds(0);K=b.Milliseconds(Math.max(x,I.frameDuration));P=g;break;case a.RenderState.INTERACTING:K=b.Milliseconds(Math.max(u,I.frameDuration))}K=b.Milliseconds(K-I.elapsedFrameTime-G);if(this.state!==a.RenderState.IDLE&&K<p&&!this._forceTask)return this._forceTask=!0,!1;K=b.Milliseconds(Math.max(K,P));this._budget.reset(K,this.state);this._updateLoad();return this._schedule()};L.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case a.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(I=>I.idleBegin()));this._runIdle();break;case a.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};L.stopFrame=function(){this._budget.reset(b.Milliseconds(0),this._state);this._budget.madeProgress()};L._removeIdleStateCallbacks=function(I){this._idleUpdatesStartFired&&I.idleEnd();this._idleStateCallbacks.removeUnordered(I)};L.removeTask=function(I){this._tasks.removeUnordered(I);
this._runQueue.removeUnordered(I);this._updatingChanged()};L._updateTask=function(I){this._tasks.forAll(G=>{G.name===I&&G.setPriority(I)})};L._getState=function(I){if(this._runQueue.some(K=>K.name===I))return l.TaskState.SCHEDULED;let G=l.TaskState.IDLE;this._tasks.forAll(K=>{K.name===I&&K.needsUpdate&&(1>=K.schedulePriority?G=l.TaskState.READY:G!==l.TaskState.READY&&(G=l.TaskState.WAITING))});return G};L._getRuntime=function(I){let G=0;this._tasks.forAll(K=>{K.name===I&&(G+=K.runtime)});return G};
L._resetRuntimes=function(){this._tasks.forAll(I=>I.runtime=0)};L._getRunning=function(){const I=new Map;this._tasks.forAll(K=>{K.needsUpdate&&I.set(K.name,(I.get(K.name)||0)+1)});if(0===I.size)return null;let G="";I.forEach((K,P)=>{G=1<K?G+` ${K}x ${P}`:G+` ${P}`});return G};L._runIdle=function(){this._run()};L._runInteracting=function(){this._run()};L._runAnimating=function(){this._run()};L._updateLoad=function(){const I=this._tasks.reduce((G,K)=>K.needsUpdate?++G:G,0);this._load=.9*this._load+
I*(1-.9)};L._schedule=function(){this._runQueue.filterInPlace(I=>{if(I.needsUpdate)return!0;I.schedulePriority=I.basePriority;return!1});for(this._tasks.forAll(I=>{0===I.basePriority&&I.needsUpdate&&!this._runQueue.includes(I)&&I.blockFrame!==this._frameNumber&&this._runQueue.unshift(I)});0===this._runQueue.length;){let I=!1;this._tasks.forAll(G=>{if(G.needsUpdate&&0!==G.schedulePriority&&0!==G.basePriority&&G.blockFrame!==this._frameNumber)switch(I=!0,G.schedulePriority){case 1:G.schedulePriority=
0;this._runQueue.push(G);break;default:--G.schedulePriority}});if(!I)return this._updatingChanged(),!1}this._updatingChanged();return!0};L._run=function(){const I=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var G=this._budget.now();const K=this._runQueue.pop();this._budget.resetProgress();try{K.task.runTask(this._budget)===l.Task.YIELD&&(K.blockFrame=this._frameNumber)}catch(P){y.getLogger("esri.views.support.Scheduler").error(`Exception in task "${K.name}"`,P)}!this._budget.hasProgressed&&
K.blockFrame!==this._frameNumber&&K.needsUpdate&&(K.blockFrame=this._frameNumber);K.schedulePriority=K.basePriority;G=this._budget.now()-G;K.runtime+=G;this._frameTaskTimes.set(K.priority,this._frameTaskTimes.get(K.priority)+G);this._debug&&G>2*this._budget.budget&&console.log("Task",K.name,"used",G,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-I);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
I)};L._startFrameTaskTimes=function(){for(const I of Object.keys(l.TaskPriority))this._frameTaskTimes.set(l.TaskPriority[I],0)};L._recordFrameTaskTimes=function(I){this._frameTaskTimes.forEach((G,K)=>this.performanceInfo.tasks.get(K).record(G));this.performanceInfo.total.record(I)};h._createClass(J,[{key:"updating",get:function(){return this._updating.value}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(I){this._state!==I&&(this._state=
I,this.state!==a.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(G=>G.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return J}();A.Scheduler=H;let E=function(){function J(I,G,K,P){this._scheduler=I;this.name=G;this._basePriority=P;this.runtime=this.blockFrame=0;this._queue=new c.PromiseQueue;this._handles=new D;this.schedulePriority=this._basePriority;this._task=e.signal(null!=K?K:this._queue);this._handles.add(k.when(()=>
this.task.running,Y=>I.taskRunningChanged(Y)))}var L=J.prototype;L.remove=function(){this.processQueue(m);this._scheduler.removeTask(this);this.schedule=z.schedule;this.reschedule=z.reschedule;this._handles.destroy()};L.setPriority=function(I){this.name=I;I=d(I);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=I;this._basePriority=I};L.schedule=function(I,G,K){return this._queue.push(I,G,K)};L.reschedule=function(I,G,K){return this._queue.unshift(I,G,K)};L.processQueue=function(I){this._queue.runTask(I)};
h._createClass(J,[{key:"task",get:function(){return this._task.value}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(I){this.setPriority(I)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return J}(),F=function(){function J(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=a.RenderState.IDLE;
this._progressed=this._done=!1;this._enabled=!0}var L=J.prototype;L.run=function(I){if(this.done)return!1;!0===I()&&this.madeProgress();return!0};L.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};L.reset=function(I,G){this._begin=this.now();this._budget=I;this._state=G;this.resetProgress()};L.now=function(){return performance.now()};L.resetProgress=function(){this._done=this._progressed=!1};h._createClass(J,[{key:"done",get:function(){return this._done}},
{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(I){this._enabled=I}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return J}();A.Budget=F})(w||(w={}));l.TaskState=void 0;(function(A){A.SCHEDULED="s";A.READY="r";A.WAITING=
"w";A.IDLE="i"})(l.TaskState||(l.TaskState={}));const m=(()=>{const A=new w.Budget;A.enabled=!1;return A})(),z=new (function(){function A(){}var H=A.prototype;H.remove=function(){};H.processQueue=function(){};H.schedule=function(E,F,J){try{if(q.isAborted(F)){const L=q.createAbortError();return J?Promise.resolve(J(L)):Promise.reject(L)}return q.when(E(m))}catch(L){return Promise.reject(L)}};H.reschedule=function(E,F,J){return this.schedule(E,F,J)};return h._createClass(A)}());l.ImmediateTask=z;l.getTaskPriority=
d;l.newScheduler=function(){return new w.Scheduler};l.noBudget=m;l.taskPriorities=n;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(l,h,D,B,y){let v=function(){function C(t,q){this._observable=new y.SimpleObservable;this._value=t;this._equalityFunction=q}C.prototype.mutate=function(t){t(this._value);this._observable.notify()};
h._createClass(C,[{key:"value",get:function(){B.trackAccess(this._observable);return this._value},set:function(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}}]);return C}();l.signal=function(C,t=D.equalsShallow){return new v(C,t)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/signal"],function(l,h,D,B){let y=
function(){function C(){this._tasks=[];this._running=B.signal(!1)}var t=C.prototype;t.destroy=function(){this.cancelAll()};t.runTask=function(q){for(;!q.done&&this._process(q);)q.madeProgress()};t.push=function(q,k,e){this._running.value=!0;return new Promise((b,c)=>this._tasks.push(new v(b,c,q,k,e)))};t.unshift=function(q,k,e){this._running.value=!0;return new Promise((b,c)=>this._tasks.unshift(new v(b,c,q,k,e)))};t._process=function(q){if(0===this._tasks.length)return!1;const k=this._tasks.shift();
try{const e=D.isAborted(k.signal);if(e&&!k.abortCallback)k.reject(D.createAbortError());else{const b=e?k.abortCallback?.(D.createAbortError()):k.callback(q);D.isPromiseLike(b)?b.then(k.resolve,k.reject):k.resolve(b)}}catch(e){k.reject(e)}this._running.value=0<this._tasks.length;return!0};t.cancelAll=function(){const q=D.createAbortError();for(const k of this._tasks)if(k.abortCallback){const e=k.abortCallback(q);k.resolve(e)}else k.reject(q);this._tasks.length=0;this._running.value=!1};h._createClass(C,
[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.value}}]);return C}(),v=h._createClass(function(C,t,q,k,e){this.resolve=C;this.reject=t;this.callback=q;this.signal=k;this.abortCallback=e});l.PromiseQueue=y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t){D=function(q){function k(){var e=q.apply(this,arguments)||this;e.SCHEDULER_LOG_SLOW_TASKS=!1;e.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return e}l._inherits(k,q);return l._createClass(k)}(D);h.__decorate([B.property()],D.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);h.__decorate([B.property()],D.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);D=h.__decorate([t.subclass("esri.views.support.DebugFlags")],D);return new D})},"esri/views/support/RenderState":function(){define(["exports"],
function(l){l.RenderState=void 0;var h=l.RenderState||(l.RenderState={});h[h.ANIMATING=0]="ANIMATING";h[h.INTERACTING=1]="INTERACTING";h[h.IDLE=2]="IDLE";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/FeatureStore2D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/CircularArray ../../../../core/Evented ../../../../core/has ../../../../chunks/rbush ../../../../geometry/support/aaBoundingBox ./Store2D ./support/FeatureSetReaderPBFIndirect".split(" "),
function(l,h,D,B,y,v,C,t,q){const k=C.create(),e={getObjectId(b){return b.getObjectId()},getAttributes(b){return b.readAttributes()},getAttribute(b,c){return b.readAttribute(c)},cloneWithGeometry(b,c){return b},getGeometry(b){return b.readHydratedGeometry()},getCentroid(b,c){return b.readCentroid()}};y=function(b){function c(a,d,n){var r=b.call(this,a,d)||this;r.featureAdapter=e;r.events=new B;r._featureSetsByInstance=new Map;r._objectIdToDisplayId=new Map;r._spatialIndexInvalid=!0;r._indexSearchCache=
new D(50);r._index=v.rbush(9,p=>({minX:r._storage.getXMin(p),minY:r._storage.getYMin(p),maxX:r._storage.getXMax(p),maxY:r._storage.getYMax(p)}));r.mode=n;return r}h._inherits(c,b);var f=c.prototype;f.hasInstance=function(a){return this._featureSetsByInstance.has(a)};f.onTileData=function(a,d){if(null==d.addOrUpdate)return d;d.addOrUpdate.attachStorage(this._storage);if("snapshot"===this.mode){for(var n=d.addOrUpdate.getCursor();n.next();){const r=n.getDisplayId();this.setComputedAttributes(this._storage,
n,r,a.scale)}return d}this._featureSetsByInstance.set(d.addOrUpdate.instance,d.addOrUpdate);for(n=d.addOrUpdate.getCursor();n.next();)this._insertFeature(n,a.scale);this._spatialIndexInvalid=!0;this.events.emit("changed");return d};f.search=function(a){this._rebuildIndex();const d=a.id;var n=this._indexSearchCache.find(g=>g.tileId===d);if(null!=n)return n.readers;n=new Map;a=this._searchIndex(a.bounds);const r=[];for(const g of a){var p=this._storage.getInstanceId(g);a=(4294901760&p)>>>16;p&=65535;
n.has(a)||n.set(a,[]);n.get(a).push(p)}n.forEach((g,u)=>{u=this._featureSetsByInstance.get(u);r.push(q.FeatureSetReaderIndirect.from(u,g))});this._indexSearchCache.enqueue({tileId:d,readers:r});return r};f.insert=function(a){const d=a.getCursor(),n=this._storage;for(;d.next();){var r=d.getIndex();r|=d.instance<<16;const p=d.getObjectId(),g=this._objectIdToDisplayId.get(p)??this._storage.createDisplayId();d.setDisplayId(g);n.setInstanceId(g,r);this._objectIdToDisplayId.set(p,g)}this._featureSetsByInstance.set(a.instance,
a);this._spatialIndexInvalid=!0};f.remove=function(a){const d=this._objectIdToDisplayId.get(a);if(d){var n=this._storage.getInstanceId(d),r=65535&n;n=(4294901760&n)>>>16;var p=this._featureSetsByInstance.get(n);this._objectIdToDisplayId.delete(a);this._storage.releaseDisplayId(d);p.removeAtIndex(r);p.isEmpty&&this._featureSetsByInstance.delete(n);this._spatialIndexInvalid=!0}};f.forEach=function(a){this._objectIdToDisplayId.forEach(d=>{d=this._storage.getInstanceId(d);d=this._lookupFeature(d);a(d)})};
f.forEachUnsafe=function(a){this._objectIdToDisplayId.forEach(d=>{var n=this._storage.getInstanceId(d);d=65535&n;n=this._getFeatureSet((4294901760&n)>>>16);n.setIndex(d);a(n)})};f.forEachInBounds=function(a,d){a=this._searchIndex(a);for(const n of a)a=this.lookupFeatureByDisplayId(n,this._storage),d(a)};f.forEachBounds=function(a,d){this._rebuildIndex();for(const n of a)n.readGeometry()&&(a=n.getDisplayId(),C.fromRectValues(k,this._storage.getXMin(a),this._storage.getYMin(a),this._storage.getXMax(a),
this._storage.getYMax(a)),d(k))};f.sweepFeatures=function(a,d,n){this._spatialIndexInvalid=!0;this._objectIdToDisplayId.forEach((r,p)=>{a.has(r)||(d.releaseDisplayId(r),n&&n.unsetAttributeData(r),this._objectIdToDisplayId.delete(p))});this.events.emit("changed")};f.sweepFeatureSets=function(a){this._spatialIndexInvalid=!0;this._featureSetsByInstance.forEach((d,n)=>{a.has(n)||this._featureSetsByInstance.delete(n)})};f.lookupObjectId=function(a,d){a=this.lookupFeatureByDisplayId(a,d);return null==a?
null:a.getObjectId()};f.lookupDisplayId=function(a){return this._objectIdToDisplayId.get(a)};f.lookupFeatureByDisplayId=function(a,d){a=d.getInstanceId(a);return this._lookupFeature(a)};f.lookupByDisplayIdUnsafe=function(a){var d=this._storage.getInstanceId(a);a=65535&d;d=this._getFeatureSet((4294901760&d)>>>16);if(!d)return null;d.setIndex(a);return d};f._insertFeature=function(a,d){const n=this._storage,r=a.getObjectId();var p=a.getIndex();p|=a.instance<<16;n.getInstanceId(a.getDisplayId());let g=
this._objectIdToDisplayId.get(r);g||(g=n.createDisplayId(),this._objectIdToDisplayId.set(r,g),this._spatialIndexInvalid=!0);a.setDisplayId(g);n.setInstanceId(g,p);this.setComputedAttributes(n,a,g,d)};f._searchIndex=function(a){this._rebuildIndex();return this._index.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]})};f._rebuildIndex=function(){if(this._spatialIndexInvalid){var a=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(d=>{for(d=d.getCursor();d.next();){const n=d.getDisplayId();
this._storage.setBounds(n,d)&&a.push(n)}}):this._objectIdToDisplayId.forEach(d=>{const n=this._storage.getInstanceId(d);this._storage.setBounds(d,this._lookupFeature(n))&&a.push(d)});this._index.clear();this._index.load(a);this._indexSearchCache.clear();this._spatialIndexInvalid=!1}};f._lookupFeature=function(a){var d=this._getFeatureSet((4294901760&a)>>>16);if(d)return d=d.getCursor(),d.setIndex(65535&a),d};f._getFeatureSet=function(a){return this._featureSetsByInstance.get(a)};h._createClass(c,
[{key:"storeStatistics",get:function(){let a=0,d=0,n=0;this.forEach(r=>{if(r=r.readGeometry())d+=r.isPoint?1:r.lengths.reduce((p,g)=>p+g,0),n+=r.isPoint?1:r.lengths.length,a+=1});return{featureCount:a,vertexCount:d,ringCount:n}}}]);return c}(t.Store2D);l.FeatureStore2D=y;l.featureAdapter=e;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/CircularArray":function(){define(["../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function h(B){this._start=this.size=
0;this.maxSize=B;this._buffer=Array(B)}var D=h.prototype;D.enqueue=function(B){if(this.size===this.maxSize){const y=this._buffer[this._start];this._buffer[this._start]=B;this._start=(this._start+1)%this.maxSize;return y}this._buffer[(this._start+this.size++)%this.maxSize]=B;return null};D.dequeue=function(){if(0===this.size)return null;const B=this._buffer[this._start];this._buffer[this._start]=null;this.size--;this._start=(this._start+1)%this.maxSize;return B};D.peek=function(){return 0===this.size?
null:this._buffer[this._start]};D.find=function(B){if(0===this.size)return null;for(const y of this._buffer)if(null!=y&&B(y))return y;return null};D.clear=function(B){let y=this.dequeue();for(;null!=y;)B&&B(y),y=this.dequeue()};l._createClass(h,[{key:"entries",get:function(){return this._buffer}}]);return h}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(l,h,D,B,
y){let v=function(){function C(){this._emitter=new C.EventEmitter(this)}var t=C.prototype;t.emit=function(q,k){return this._emitter.emit(q,k)};t.on=function(q,k){return this._emitter.on(q,k)};t.once=function(q,k){return this._emitter.once(q,k)};t.hasEventListener=function(q){return this._emitter.hasEventListener(q)};return l._createClass(C)}();(function(C){let t=function(){function k(b=null){this._target=b;this._listenersMap=null}var e=k.prototype;e.clear=function(){this._listenersMap?.clear();this._listenersMap=
null};e.destroy=function(){this.clear()};e.emit=function(b,c){b=this._listenersMap&&this._listenersMap.get(b);if(!b)return!1;const f=this._target||this;[...b].forEach(a=>{a.call(f,c)});return 0<b.length};e.on=function(b,c){if(Array.isArray(b)){var f=b.map(a=>this.on(a,c));return B.handlesGroup(f)}if(b.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);f=this._listenersMap.get(b)||[];f.push(c);
this._listenersMap.set(b,f);return{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(b)||[],d=a.indexOf(c);0<=d&&a.splice(d,1)}}};e.once=function(b,c){const f=this.on(b,a=>{f.remove();c.call(null,a)});return f};e.hasEventListener=function(b){b=this._listenersMap&&this._listenersMap.get(b);return null!=b&&0<b.length};return l._createClass(k)}();C.EventEmitter=t;C.EventedMixin=k=>{k=function(e){function b(){var f=e.apply(this,arguments)||this;f._emitter=new t;return f}l._inherits(b,e);
var c=b.prototype;c.destroy=function(){this._emitter.clear()};c.emit=function(f,a){return this._emitter.emit(f,a)};c.on=function(f,a){return this._emitter.on(f,a)};c.once=function(f,a){return this._emitter.once(f,a)};c.hasEventListener=function(f){return this._emitter.hasEventListener(f)};return l._createClass(b)}(k);return k=h.__decorate([y.subclass("esri.core.Evented")],k)};let q=function(k){function e(){var c=k.apply(this,arguments)||this;c._emitter=new v.EventEmitter(l._assertThisInitialized(c));
return c}l._inherits(e,k);var b=e.prototype;b.destroy=function(){this._emitter.clear()};b.emit=function(c,f){return this._emitter.emit(c,f)};b.on=function(c,f){return this._emitter.on(c,f)};b.once=function(c,f){return this._emitter.once(c,f)};b.hasEventListener=function(c){return this._emitter.hasEventListener(c)};return l._createClass(e)}(D);q=h.__decorate([y.subclass("esri.core.Evented")],q);C.EventedAccessor=q})(v||(v={}));return v})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],
function(l,h){function D(a,d){if(!(this instanceof D))return new D(a,d);this._maxEntries=Math.max(4,a||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));d&&("function"===typeof d?this.toBBox=d:this._initFormat(d));this.clear()}function B(a,d){y(a,0,a.children.length,d,a)}function y(a,d,n,r,p){p||(p=c(null));p.minX=Infinity;p.minY=Infinity;p.maxX=-Infinity;p.maxY=-Infinity;for(var g;d<n;d++)g=a.children[d],v(p,a.leaf?r(g):g);return p}function v(a,d){a.minX=Math.min(a.minX,d.minX);a.minY=
Math.min(a.minY,d.minY);a.maxX=Math.max(a.maxX,d.maxX);a.maxY=Math.max(a.maxY,d.maxY);return a}function C(a,d){return a.minX-d.minX}function t(a,d){return a.minY-d.minY}function q(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function k(a){return a.maxX-a.minX+(a.maxY-a.minY)}function e(a,d){return a.minX<=d.minX&&a.minY<=d.minY&&d.maxX<=a.maxX&&d.maxY<=a.maxY}function b(a,d){return d.minX<=a.maxX&&d.minY<=a.maxY&&d.maxX>=a.minX&&d.maxY>=a.minY}function c(a){return{children:a,height:1,leaf:!0,minX:Infinity,
minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function f(a,d,n,r,p){for(var g=[d,n],u;g.length;)n=g.pop(),d=g.pop(),n-d<=r||(u=d+Math.ceil((n-d)/r/2)*r,h.quickselect(a,u,d,n,p),g.push(d,u,u,n))}D.prototype={all:function(){return this._all(this.data,[])},search:function(a){var d=this.data,n=[],r=this.toBBox;if(!b(a,d))return n;for(var p=[],g,u,x,w;d;){g=0;for(u=d.children.length;g<u;g++)x=d.children[g],w=d.leaf?r(x):x,b(a,w)&&(d.leaf?n.push(x):e(a,w)?this._all(x,n):p.push(x));d=p.pop()}return n},collides:function(a){var d=
this.data,n=this.toBBox;if(!b(a,d))return!1;for(var r=[],p,g,u,x;d;){p=0;for(g=d.children.length;p<g;p++)if(u=d.children[p],x=d.leaf?n(u):u,b(a,x)){if(d.leaf||e(a,x))return!0;r.push(u)}d=r.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var d=0,n=a.length;d<n;d++)this.insert(a[d]);return this}a=this._build(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(d=this.data,
this.data=a,a=d),this._insert(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this._insert(a,this.data.height-1);return this},clear:function(){this.data=c([]);return this},remove:function(a,d){if(!a)return this;for(var n=this.data,r=this.toBBox(a),p=[],g=[],u,x,w,m;n||p.length;){n||(n=p.pop(),x=p[p.length-1],u=g.pop(),m=!0);if(n.leaf){a:{w=a;var z=n.children,A=d;if(A){for(var H=0;H<z.length;H++)if(A(w,z[H])){w=H;break a}w=-1}else w=z.indexOf(w)}if(-1!==w){n.children.splice(w,
1);p.push(n);this._condense(p);break}}m||n.leaf||!e(n,r)?x?(u++,n=x.children[u],m=!1):n=null:(p.push(n),g.push(u),u=0,x=n,n=n.children[0])}return this},toBBox:function(a){return a},compareMinX:C,compareMinY:t,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,d){for(var n=[];a;)a.leaf?d.push.apply(d,a.children):n.push.apply(n,a.children),a=n.pop();return d},_build:function(a,d,n,r){var p=n-d+1,g=this._maxEntries;if(p<=g){var u=c(a.slice(d,n+1));B(u,this.toBBox);
return u}r||(r=Math.ceil(Math.log(p)/Math.log(g)),g=Math.ceil(p/Math.pow(g,r-1)));u=c([]);u.leaf=!1;u.height=r;p=Math.ceil(p/g);g=p*Math.ceil(Math.sqrt(g));var x;for(f(a,d,n,g,this.compareMinX);d<=n;d+=g){var w=Math.min(d+g-1,n);f(a,d,w,p,this.compareMinY);for(x=d;x<=w;x+=p){var m=Math.min(x+p-1,w);u.children.push(this._build(a,x,m,r-1))}}B(u,this.toBBox);return u},_chooseSubtree:function(a,d,n,r){for(var p,g,u,x,w,m,z,A;;){r.push(d);if(d.leaf||r.length-1===n)break;z=A=Infinity;p=0;for(g=d.children.length;p<
g;p++)u=d.children[p],w=q(u),m=(Math.max(u.maxX,a.maxX)-Math.min(u.minX,a.minX))*(Math.max(u.maxY,a.maxY)-Math.min(u.minY,a.minY))-w,m<A?(A=m,z=w<z?w:z,x=u):m===A&&w<z&&(z=w,x=u);d=x||d.children[0]}return d},_insert:function(a,d,n){var r=this.toBBox;n=n?a:r(a);r=[];var p=this._chooseSubtree(n,this.data,d,r);p.children.push(a);for(v(p,n);0<=d;)if(r[d].children.length>this._maxEntries)this._split(r,d),d--;else break;this._adjustParentBBoxes(n,r,d)},_split:function(a,d){var n=a[d],r=n.children.length,
p=this._minEntries;this._chooseSplitAxis(n,p,r);r=this._chooseSplitIndex(n,p,r);r=c(n.children.splice(r,n.children.length-r));r.height=n.height;r.leaf=n.leaf;B(n,this.toBBox);B(r,this.toBBox);d?a[d-1].children.push(r):this._splitRoot(n,r)},_splitRoot:function(a,d){this.data=c([a,d]);this.data.height=a.height+1;this.data.leaf=!1;B(this.data,this.toBBox)},_chooseSplitIndex:function(a,d,n){var r,p;var g=p=Infinity;for(r=d;r<=n-d;r++){var u=y(a,0,r,this.toBBox);var x=y(a,r,n,this.toBBox);var w=Math.max(0,
Math.min(u.maxX,x.maxX)-Math.max(u.minX,x.minX))*Math.max(0,Math.min(u.maxY,x.maxY)-Math.max(u.minY,x.minY));u=q(u)+q(x);if(w<g){g=w;var m=r;p=u<p?u:p}else w===g&&u<p&&(p=u,m=r)}return m},_chooseSplitAxis:function(a,d,n){var r=a.leaf?this.compareMinX:C,p=a.leaf?this.compareMinY:t,g=this._allDistMargin(a,d,n,r);d=this._allDistMargin(a,d,n,p);g<d&&a.children.sort(r)},_allDistMargin:function(a,d,n,r){a.children.sort(r);r=this.toBBox;var p=y(a,0,d,r),g=y(a,n-d,n,r),u=k(p)+k(g),x;for(x=d;x<n-d;x++){var w=
a.children[x];v(p,a.leaf?r(w):w);u+=k(p)}for(x=n-d-1;x>=d;x--)w=a.children[x],v(g,a.leaf?r(w):w),u+=k(g);return u},_adjustParentBBoxes:function(a,d,n){for(;0<=n;n--)v(d[n],a)},_condense:function(a){for(var d=a.length-1,n;0<=d;d--)0===a[d].children.length?0<d?(n=a[d-1].children,n.splice(n.indexOf(a[d]),1)):this.clear():B(a[d],this.toBBox)},_initFormat:function(a){var d=["return a"," - b",";"];this.compareMinX=new Function("a","b",d.join(a[0]));this.compareMinY=new Function("a","b",d.join(a[1]));this.toBBox=
new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};l.rbush=D})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(l,h){var D={exports:{}};D.exports;(function(B){(function(y){y=y();void 0!==y&&(B.exports=y)})(function(){function y(t,q,k,e,b){for(;e>k;){if(600<e-k){var c=e-k+1,f=q-k+1,a=Math.log(c),d=.5*Math.exp(2*a/3);a=.5*Math.sqrt(a*d*(c-d)/c)*(0>f-c/2?-1:1);y(t,q,Math.max(k,Math.floor(q-f*d/c+a)),Math.min(e,Math.floor(q+
(c-f)*d/c+a)),b)}c=t[q];f=k;d=e;v(t,k,q);for(0<b(t[e],c)&&v(t,k,e);f<d;){v(t,f,d);f++;for(d--;0>b(t[f],c);)f++;for(;0<b(t[d],c);)d--}0===b(t[k],c)?v(t,k,d):(d++,v(t,d,e));d<=q&&(k=d+1);q<=d&&(e=d-1)}}function v(t,q,k){var e=t[q];t[q]=t[k];t[k]=e}function C(t,q){return t<q?-1:t>q?1:0}return function(t,q,k,e,b){y(t,q,k||0,e||t.length-1,b||C)}})})(D);h=h.getDefaultExportFromCjs(D.exports);l.quickselect=h})},"esri/views/2d/layers/features/Store2D":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/accessorSupport/diffUtils ../../../../support/arcadeOnDemand ../../arcade/callExpressionWithCursor".split(" "),
function(l,h,D,B,y,v,C){let t=function(){function q(e,b){this._canCacheExpressionValue=!1;this._sourceInfo=e;this._storage=b;this._bitsets={computed:b.getBitset(b.createBitset())}}var k=q.prototype;k.invalidate=function(){this._bitsets.computed.clear()};k.updateSchema=async function(e,b){var c=y.diff(this._schema,b);if((this._schema=b)&&null!=c&&y.hasDiff(c,"attributes")){B("esri-2d-update-debug")&&console.debug("Applying Update - Store:",c);this._bitsets.computed.clear();e.targets[b.name]=!0;e=b.attributes;
b=[];c=[];for(const f in e){const a=e[f];switch(a.type){case "expression":b.push(this._createArcadeComputedField(a));break;case "label-expression":b.push(this._createLabelArcadeComputedField(a));break;case "statistic":c.push(a)}}this._computedFields=await Promise.all(b);this._canCacheExpressionValue=!this._computedFields.some(f=>"expression"===f.type&&null!=f.expression&&f.expression.referencesScale());this._statisticFields=c}};k.setComputedAttributes=function(e,b,c,f){var a=this._bitsets.computed;
if(!this._canCacheExpressionValue||!a.has(c)){a.set(c);for(const d of this._computedFields)switch(a=this._evaluateField(b,d,f),d.resultType){case "numeric":e.setComputedNumericAtIndex(c,d.fieldIndex,a);break;case "string":e.setComputedStringAtIndex(c,d.fieldIndex,a)}}};k._createArcadeComputedField=async function(e){return{...e,expression:await v.createRendererExpression(e.valueExpression,this._sourceInfo.spatialReference,this._sourceInfo.fieldsIndex)}};k._createLabelArcadeComputedField=async function(e){var b=
this._sourceInfo.spatialReference;const c=this._sourceInfo.fieldsIndex,{createLabelFunction:f}=await new Promise((a,d)=>l(["../../../../layers/support/labelFormatUtils"],a,d));b=await f(e.label,c,b);return{...e,builder:b}};k._evaluateField=function(e,b,c){switch(b.type){case "label-expression":return e=e.readArcadeFeature(),b.builder.evaluate(e)||"";case "expression":return{expression:b}=b,C(b,e,{$view:{scale:c}})}};D._createClass(q,[{key:"storage",get:function(){return this._storage}}]);return q}();
h.Store2D=t;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/diffUtils":function(){define(["exports","../Accessor","../Collection","./utils"],function(l,h,D,B){function y(c){return c instanceof D?Object.keys(c.items):c instanceof h?B.getProperties(c).keys():c?Object.keys(c):[]}function v(c,f){return c instanceof D?c.items[f]:c[f]}function C(c,f){return Array.isArray(c)&&Array.isArray(f)?c.length!==f.length:!1}function t(c){return c?c.declaredClass:null}function q(c,
f){const a=c.diff;if(a&&"function"===typeof a)return a(c,f);const d=y(c),n=y(f);if(0!==d.length||0!==n.length){if(!d.length||!n.length||C(c,f))return{type:"complete",oldValue:c,newValue:f};var r=n.filter(u=>!d.includes(u)),p=d.filter(u=>!n.includes(u));p=d.filter(u=>n.includes(u)&&v(c,u)!==v(f,u)).concat(r,p).sort();if((r=t(c))&&b.includes(r)&&p.length)return{type:"complete",oldValue:c,newValue:f};var g;r=c instanceof h&&f instanceof h;for(const u of p){p=v(c,u);const x=v(f,u);if((r||"function"!==
typeof p&&"function"!==typeof x)&&p!==x&&(null!=p||null!=x)){if(a&&a[u]&&"function"===typeof a[u])p=a[u]?.(p,x);else if(p instanceof Date&&x instanceof Date){if(p.getTime()===x.getTime())continue;p={type:"complete",oldValue:p,newValue:x}}else p="object"===typeof p&&"object"===typeof x&&t(p)===t(x)?q(p,x):{type:"complete",oldValue:p,newValue:x};null!=p&&(null!=g?g.diff[u]=p:g={type:"partial",diff:{[u]:p}})}}return g}}function k(c,f){if(null==c)return!1;f=f.split(".");for(const a of f){if("complete"===
c.type)break;if("partial"===c.type){if(c=c.diff[a],!c)return!1}else return!1}return!0}function e(c){if(null==c)return!0;switch(c.type){case "complete":return!1;case "collection":for(const f of c.added)if(!e(f))return!1;for(const f of c.removed)if(!e(f))return!1;for(const f of c.changed)if(!e(f))return!1;return!0;case "partial":for(const f in c.diff)if(!e(c.diff[f]))return!1;return!0}}const b=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];
l.diff=function(c,f){if("function"!==typeof c&&"function"!==typeof f&&(null!=c||null!=f))return null==c||null==f||"object"===typeof c&&"object"===typeof f&&t(c)!==t(f)?{type:"complete",oldValue:c,newValue:f}:q(c,f)};l.hasDiff=k;l.hasDiffAny=function(c,f){for(const a of f)if(k(c,a))return!0;return!1};l.isEmpty=e;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./ObservableChangesType ./scheduling ./accessorSupport/ensureType ./accessorSupport/tracking ./accessorSupport/decorators/property ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking/SimpleObservable".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a){function d(F){return F?F instanceof E?F.toArray():F.length?Array.prototype.slice.apply(F):[]:[]}function n(F){if(F&&F.length)return F[0]}function r(F,J,L,I){J&&J.forEach((G,K,P)=>{F.push(G);r(F,L.call(I,G,K,P),L,I)})}var p;let g=function(){function F(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var J=F.prototype;J.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};J.reset=function(L){this.defaultPrevented=
!1;this.item=L};return l._createClass(F)}();const u=new C(g,void 0,F=>{F.item=null;F.target=null;F.defaultPrevented=!1;F.cancellable=!1}),x=()=>{},w=new Set,m=new Set,z=new Set,A=new Map;let H=0,E=p=function(F,J){function L(G){G=F.call(this,G)||this;G._chgListeners=[];G._notifications=null;G._timer=null;G._observable=new a.SimpleObservable;G.length=0;G._items=[];Object.defineProperty(l._assertThisInitialized(G),"uid",{value:H++});return G}l._inherits(L,F);L.isCollection=function(G){return null!=G&&
G instanceof p};var I=L.prototype;I.normalizeCtorArgs=function(G){return G?Array.isArray(G)||G instanceof p?{items:G}:G:{}};I.destroy=function(){this._removeAllRaw()};I[J]=function*(){yield*this.items};I.hasEventListener=function(G){return"change"===G?0<this._chgListeners.length:this._emitter.hasEventListener(G)};I.on=function(G,K){if("change"===G){const P=this._chgListeners,Y={removed:!1,callback:K};P.push(Y);this._notifications&&this._notifications.push({listeners:P.slice(),items:this._items.slice(),
changes:[]});return{remove(){this.remove=x;Y.removed=!0;P.splice(P.indexOf(Y),1)}}}return this._emitter.on(G,K)};I.once=function(G,K){const P=this.on(G,K);return{remove(){P.remove()}}};I.add=function(G,K){e.trackAccess(this._observable);if(this._emitBeforeChanges(t.ObservableChangesType.ADD))return this;K=this.getNextIndex(K??null);this._splice(K,0,[G]);this._emitAfterChanges(t.ObservableChangesType.ADD);return this};I.addMany=function(G,K=this._items.length){e.trackAccess(this._observable);if(!G||
!G.length||this._emitBeforeChanges(t.ObservableChangesType.ADD))return this;K=this.getNextIndex(K);this._splice(K,0,d(G));this._emitAfterChanges(t.ObservableChangesType.ADD);return this};I.at=function(G){e.trackAccess(this._observable);G=Math.trunc(G)||0;0>G&&(G+=this.length);if(!(0>G||G>=this.length))return this._items[G]};I.removeAll=function(){e.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(t.ObservableChangesType.REMOVE))return[];const G=this._removeAllRaw();this._emitAfterChanges(t.ObservableChangesType.REMOVE);
return G};I._removeAllRaw=function(){return 0===this.length?[]:this._splice(0,this.length)||[]};I.clone=function(){e.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(y.clone)})};I.concat=function(...G){e.trackAccess(this._observable);G=G.map(d);return this._createNewInstance({items:this._items.concat(...G)})};I.drain=function(G,K){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(t.ObservableChangesType.REMOVE)){var P=v.assumeNonNull(this._splice(0,
this.length)),Y=P.length;for(let ea=0;ea<Y;ea++)G.call(K,P[ea],ea,P);this._emitAfterChanges(t.ObservableChangesType.REMOVE)}};I.every=function(G,K){e.trackAccess(this._observable);return this._items.every(G,K)};I.filter=function(G,K){e.trackAccess(this._observable);let P;P=2===arguments.length?this._items.filter(G,K):this._items.filter(G);return this._createNewInstance({items:P})};I.find=function(G,K){e.trackAccess(this._observable);return this._items.find(G,K)};I.findIndex=function(G,K){e.trackAccess(this._observable);
return this._items.findIndex(G,K)};I.flatten=function(G,K){e.trackAccess(this._observable);const P=[];r(P,this,G,K);return new p(P)};I.forEach=function(G,K){e.trackAccess(this._observable);return this._items.forEach(G,K)};I.getItemAt=function(G){e.trackAccess(this._observable);return this._items[G]};I.getNextIndex=function(G){e.trackAccess(this._observable);const K=this.length;G=null==G?K:G;0>G?G=0:G>K&&(G=K);return G};I.includes=function(G,K=0){e.trackAccess(this._observable);return this._items.includes(G,
K)};I.indexOf=function(G,K=0){e.trackAccess(this._observable);return this._items.indexOf(G,K)};I.join=function(G=","){e.trackAccess(this._observable);return this._items.join(G)};I.lastIndexOf=function(G,K=this.length-1){e.trackAccess(this._observable);return this._items.lastIndexOf(G,K)};I.map=function(G,K){e.trackAccess(this._observable);G=this._items.map(G,K);return new p({items:G})};I.reorder=function(G,K=this.length-1){e.trackAccess(this._observable);const P=this.indexOf(G);if(-1!==P){0>K?K=0:
K>=this.length&&(K=this.length-1);if(P!==K){if(this._emitBeforeChanges(t.ObservableChangesType.MOVE))return G;this._splice(P,1);this._splice(K,0,[G]);this._emitAfterChanges(t.ObservableChangesType.MOVE)}return G}};I.pop=function(){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(t.ObservableChangesType.REMOVE)){var G=n(this._splice(this.length-1,1));this._emitAfterChanges(t.ObservableChangesType.REMOVE);return G}};I.push=function(...G){e.trackAccess(this._observable);if(this._emitBeforeChanges(t.ObservableChangesType.ADD))return this.length;
this._splice(this.length,0,G);this._emitAfterChanges(t.ObservableChangesType.ADD);return this.length};I.reduce=function(G,K){e.trackAccess(this._observable);const P=this._items;return 2===arguments.length?P.reduce(G,K):P.reduce(G)};I.reduceRight=function(G,K){e.trackAccess(this._observable);const P=this._items;return 2===arguments.length?P.reduceRight(G,K):P.reduceRight(G)};I.remove=function(G){e.trackAccess(this._observable);return this.removeAt(this.indexOf(G))};I.removeAt=function(G){e.trackAccess(this._observable);
if(!(0>G||G>=this.length||this._emitBeforeChanges(t.ObservableChangesType.REMOVE)))return G=n(this._splice(G,1)),this._emitAfterChanges(t.ObservableChangesType.REMOVE),G};I.removeMany=function(G){e.trackAccess(this._observable);if(!G||!G.length||this._emitBeforeChanges(t.ObservableChangesType.REMOVE))return[];G=G instanceof p?G.toArray():G;const K=this._items,P=[],Y=G.length;for(let R=0;R<Y;R++){var ea=K.indexOf(G[R]);if(-1<ea){var aa=R+1,T=ea+1;const W=Math.min(G.length-aa,K.length-T);let S=0;for(;S<
W&&G[aa+S]===K[T+S];)S++;aa=1+S;(ea=this._splice(ea,aa))&&0<ea.length&&P.push.apply(P,ea);R+=aa-1}}this._emitAfterChanges(t.ObservableChangesType.REMOVE);return P};I.reverse=function(){e.trackAccess(this._observable);if(this._emitBeforeChanges(t.ObservableChangesType.MOVE))return this;const G=this._splice(0,this.length);G&&(G.reverse(),this._splice(0,0,G));this._emitAfterChanges(t.ObservableChangesType.MOVE);return this};I.shift=function(){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(t.ObservableChangesType.REMOVE)){var G=
n(this._splice(0,1));this._emitAfterChanges(t.ObservableChangesType.REMOVE);return G}};I.slice=function(G=0,K=this.length){e.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(G,K)})};I.some=function(G,K){e.trackAccess(this._observable);return this._items.some(G,K)};I.sort=function(G){e.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(t.ObservableChangesType.MOVE))return this;const K=v.assumeNonNull(this._splice(0,this.length));arguments.length?
K.sort(G):K.sort();this._splice(0,0,K);this._emitAfterChanges(t.ObservableChangesType.MOVE);return this};I.splice=function(G,K,...P){e.trackAccess(this._observable);const Y=(K?t.ObservableChangesType.REMOVE:0)|(P.length?t.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(Y))return[];G=this._splice(G,K,P)||[];this._emitAfterChanges(Y);return G};I.toArray=function(){e.trackAccess(this._observable);return this._items.slice()};I.toJSON=function(){e.trackAccess(this._observable);return this.toArray()};
I.toLocaleString=function(){e.trackAccess(this._observable);return this._items.toLocaleString()};I.toString=function(){e.trackAccess(this._observable);return this._items.toString()};I.unshift=function(...G){e.trackAccess(this._observable);if(!G.length||this._emitBeforeChanges(t.ObservableChangesType.ADD))return this.length;this._splice(0,0,G);this._emitAfterChanges(t.ObservableChangesType.ADD);return this.length};I._createNewInstance=function(G){return new this.constructor(G)};I._splice=function(G,
K,P){const Y=this._items;var ea=this.itemType;let aa=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=q.schedule(()=>this._dispatchChange()));if(K){aa=Y.splice(G,K);if(this.hasEventListener("before-remove")){var T=u.acquire();T.target=this;T.cancellable=!0;for(let S=0,Z=aa.length;S<Z;S++)K=aa[S],T.reset(K),this.emit("before-remove",T),T.defaultPrevented&&
(aa.splice(S,1),Y.splice(G,0,K),G+=1,--S,--Z);u.release(T)}this.length=this._items.length;if(this.hasEventListener("after-remove")){K=u.acquire();K.target=this;K.cancellable=!1;T=aa.length;for(let S=0;S<T;S++)K.reset(aa[S]),this.emit("after-remove",K);u.release(K)}}if(P&&P.length){if(ea){K=[];for(var R of P)P=ea.ensureType(R),null==P&&null!=R||K.push(P);P=K}ea=this.hasEventListener("before-add");R=this.hasEventListener("after-add");K=G===this.length;if(ea||R){var W=u.acquire();W.target=this;W.cancellable=
!0;T=u.acquire();T.target=this;T.cancellable=!1;for(const S of P)ea?(W.reset(S),this.emit("before-add",W),W.defaultPrevented||(K?Y.push(S):Y.splice(G++,0,S),this._set("length",Y.length),R&&(T.reset(S),this.emit("after-add",T)))):(K?Y.push(S):Y.splice(G++,0,S),this._set("length",Y.length),T.reset(S),this.emit("after-add",T));u.release(T);u.release(W)}else{if(K)for(W of P)Y.push(W);else Y.splice(G,0,...P);this._set("length",Y.length)}}(P&&P.length||aa&&aa.length)&&this._notifyChangeEvent(P,aa);return aa};
I._emitBeforeChanges=function(G){let K=!1;if(this.hasEventListener("before-changes")){const P=u.acquire();P.target=this;P.cancellable=!0;P.type=G;this.emit("before-changes",P);K=P.defaultPrevented;u.release(P)}return K};I._emitAfterChanges=function(G){if(this.hasEventListener("after-changes")){const K=u.acquire();K.target=this;K.cancellable=!1;K.type=G;this.emit("after-changes",K);u.release(K)}this._observable.notify()};I._notifyChangeEvent=function(G,K){this.hasEventListener("change")&&this._notifications&&
this._notifications[this._notifications.length-1].changes.push({added:G,removed:K})};I._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var G=this._notifications;this._notifications=null;for(const K of G){G=K.changes;w.clear();m.clear();z.clear();for(const {added:R,removed:W}of G){if(R)if(0===z.size&&0===m.size)for(const S of R)w.add(S);else for(const S of R)m.has(S)?(z.add(S),m.delete(S)):z.has(S)||w.add(S);if(W)if(0===z.size&&0===w.size)for(const S of W)m.add(S);
else for(const S of W)w.has(S)?w.delete(S):(z.delete(S),m.add(S))}const P=D.acquire();w.forEach(R=>{P.push(R)});const Y=D.acquire();m.forEach(R=>{Y.push(R)});const ea=this._items,aa=K.items,T=D.acquire();z.forEach(R=>{aa.indexOf(R)!==ea.indexOf(R)&&T.push(R)});if(K.listeners&&(P.length||Y.length||T.length)){G={target:this,added:P,removed:Y,moved:T};const R=K.listeners.length;for(let W=0;W<R;W++){const S=K.listeners[W];S.removed||S.callback.call(this,G)}}D.release(P);D.release(Y);D.release(T)}w.clear();
m.clear();z.clear()}};l._createClass(L,[{key:"items",get:function(){e.trackAccess(this._observable);return this._items},set:function(G){this._emitBeforeChanges(t.ObservableChangesType.ADD)||(this._splice(0,this.length,d(G)),this._emitAfterChanges(t.ObservableChangesType.ADD))}}]);return L}(B.EventedAccessor,Symbol.iterator);E.ofType=F=>{if(!F)return p;if(A.has(F))return A.get(F);let J=null;if("function"===typeof F)J=F.prototype.declaredClass;else if(F.base)J=F.base.prototype.declaredClass;else for(var L in F.typeMap){const I=
F.typeMap[L].prototype.declaredClass;J=J?J+` | ${I}`:I}L=function(I){function G(){return I.apply(this,arguments)||this}l._inherits(G,I);return l._createClass(G)}(p);h.__decorate([c.shared({Type:F,ensureType:"function"===typeof F?k.ensureType(F):k.ensureOneOfType(F)})],L.prototype,"itemType",void 0);L=h.__decorate([f.subclass(`esri.core.Collection<${J}>`)],L);A.set(F,L);return L};h.__decorate([b.property()],E.prototype,"length",void 0);h.__decorate([b.property()],E.prototype,"items",null);return E=
p=h.__decorate([f.subclass("esri.core.Collection")],E)})},"esri/core/ObservableChangesType":function(){define(["exports"],function(l){l.ObservableChangesType=void 0;var h=l.ObservableChangesType||(l.ObservableChangesType={});h[h.ADD=1]="ADD";h[h.REMOVE=2]="REMOVE";h[h.MOVE=4]="MOVE";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],function(l){l.shared=function(h){return(D,B)=>{D[B]=h}};Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/arcade/callExpressionWithCursor":function(){define(["../../../core/Logger"],function(l){return function(h,D,B){if(null==h)return null;D=D.readArcadeFeature();try{return h.evaluate({...B,$feature:D},h.services)}catch(y){return l.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",y),null}}})},"esri/views/2d/layers/features/support/FeatureSetReaderPBFIndirect":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers",
"./FeatureSetReader"],function(l,h,D){let B=function(y){function v(t,q){var k=y.call(this,D.FeatureSetReader.createInstance(),t.fullSchema())||this;k._currentIndex=-1;k._reader=t;k._indices=q;return k}h._inherits(v,y);v.from=function(t,q){return new v(t.copy(),q)};var C=v.prototype;C.getSize=function(){return this._indices.length};C.getCursor=function(){return this.copy()};C.copy=function(){const t=new v(this._reader.copy(),this._indices);t._currentIndex=this._currentIndex;return t};C.next=function(){for(;this._nextIndex()&&
!this._reader._getExists(););return this._currentIndex<this._indices.length};C._nextIndex=function(){return++this._currentIndex<this._indices.length?(this._reader.setIndex(this._indices[this._currentIndex]),!0):!1};C.setArcadeSpatialReference=function(t){this._reader.setArcadeSpatialReference(t)};C.attachStorage=function(t){this._reader.attachStorage(t)};C.getStorage=function(){return this._reader.getStorage()};C.getComputedNumeric=function(t){return this._reader.getComputedNumericAtIndex(0)};C.setComputedNumeric=
function(t,q){return this._reader.setComputedNumericAtIndex(q,0)};C.getComputedString=function(t){return this._reader.getComputedStringAtIndex(0)};C.setComputedString=function(t,q){return this._reader.setComputedStringAtIndex(0,q)};C.getComputedNumericAtIndex=function(t){return this._reader.getComputedNumericAtIndex(t)};C.setComputedNumericAtIndex=function(t,q){this._reader.setComputedNumericAtIndex(t,q)};C.getComputedStringAtIndex=function(t){return this._reader.getComputedStringAtIndex(t)};C.setComputedStringAtIndex=
function(t,q){return this._reader.setComputedStringAtIndex(t,q)};C.transform=function(t,q,k,e){const b=this.copy();b._reader=this._reader.transform(t,q,k,e);return b};C.readAttribute=function(t,q=!1){return this._reader.readAttribute(t,q)};C.readAttributes=function(){return this._reader.readAttributes()};C.joinAttributes=function(t){return this._reader.joinAttributes(t)};C.readArcadeFeature=function(){return this._reader.readArcadeFeature()};C.geometry=function(){return this._reader.geometry()};C.field=
function(t){return this.readAttribute(t,!0)};C.hasField=function(t){return this._reader.hasField(t)};C.setField=function(t,q){return this._reader.setField(t,q)};C.keys=function(){return this._reader.keys()};C.castToText=function(t=!1){return this._reader.castToText(t)};C.getQuantizationTransform=function(){return this._reader.getQuantizationTransform()};C.getAttributeHash=function(){return this._reader.getAttributeHash()};C.getObjectId=function(){return this._reader.getObjectId()};C.getDisplayId=
function(){return this._reader.getDisplayId()};C.setDisplayId=function(t){return this._reader.setDisplayId(t)};C.getGroupId=function(){return this._reader.getGroupId()};C.setGroupId=function(t){return this._reader.setGroupId(t)};C.getXHydrated=function(){return this._reader.getXHydrated()};C.getYHydrated=function(){return this._reader.getYHydrated()};C.getX=function(){return this._reader.getX()};C.getY=function(){return this._reader.getY()};C.setIndex=function(t){return this._reader.setIndex(t)};
C.getIndex=function(){return this._reader.getIndex()};C.readLegacyFeature=function(){return this._reader.readLegacyFeature()};C.readOptimizedFeature=function(){return this._reader.readOptimizedFeature()};C.readLegacyPointGeometry=function(){return this._reader.readLegacyPointGeometry()};C.readLegacyGeometry=function(){return this._reader.readLegacyGeometry()};C.readLegacyCentroid=function(){return this._reader.readLegacyCentroid()};C.readGeometryArea=function(){return this._reader.readGeometryArea()};
C.readUnquantizedGeometry=function(){return this._reader.readUnquantizedGeometry()};C.readHydratedGeometry=function(){return this._reader.readHydratedGeometry()};C.readGeometry=function(){return this._reader.readGeometry()};C.readCentroid=function(){return this._reader.readCentroid()};C._readAttribute=function(t,q){throw Error("Error: Should not be called. Underlying _reader should be used instead");};C._readAttributes=function(){throw Error("Error: Should not be called. Underlying _reader should be used instead");
};h._createClass(v,[{key:"fields",get:function(){return this._reader.fields}},{key:"hasNext",get:function(){return this._currentIndex+1<this._indices.length}},{key:"geometryType",get:function(){return this._reader.geometryType}},{key:"hasFeatures",get:function(){return this._reader.hasFeatures}},{key:"exceededTransferLimit",get:function(){return this._reader.exceededTransferLimit}},{key:"hasZ",get:function(){return this._reader.hasZ}},{key:"hasM",get:function(){return this._reader.hasM}}]);return v}(D.FeatureSetReader);
l.FeatureSetReaderIndirect=B;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/FeatureSetReader":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry ../../../../../arcade/ArcadeDate ../../../../../arcade/arcadeTimeUtils ../../../../../core/has ../../../../../core/maybe ../../../../../layers/graphics/centroid ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedGeometry ./StaticBitSet ../../../../../geometry/support/jsonUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){let c=0;D=v("featurelayer-simplify-thresholds")??[.5,.5,.5,.5];const f=D[0],a=D[1],d=D[2],n=D[3];D=v("featurelayer-simplify-payload-size-factors")??[1,2,4];const r=D[0],p=D[1],g=D[2],u=v("featurelayer-simplify-mobile-factor")??2,x=v("esri-mobile");v=function(){function w(z,A){this.type="FeatureSetReader";this.arcadeDeclaredClass="esri.arcade.Feature";this.seen=!1;this._ty=this._tx=this.instance=0;this._sy=this._sx=1;this._deleted=null;this._joined=[];this._objectIdToIndex=
null;this._level=0;this.contextTimeReference=this._datetimeMetadata=null;this.instance=z;this._layerSchema=A}w.createInstance=function(){c++;return c=65535<c?0:c};var m=w.prototype;m.getAreaSimplificationThreshold=function(z,A){let H=1;const E=x?u:1;4E6<A?H=g*E:1E6<A?H=p*E:5E5<A?H=r*E:1E5<A&&(H=E);A=0;4E3<z?A=n*H:2E3<z?A=d*H:100<z?A=a:15<z&&(A=f);z=8;4>this._level?z=1:5>this._level?z=2:6>this._level&&(z=4);return A*z};m.createQuantizedExtrudedQuad=function(z,A){return new k([5],[z-1,A,1,-1,1,1,-1,
1,-1,-1])};m.parseTimestampOffset=function(z){return z};m.setArcadeSpatialReference=function(z){this._arcadeSpatialReference=z};m.attachStorage=function(z){this._storage=z};m.getQuantizationTransform=function(){throw Error("Unable to find transform for featureSet");};m.getStorage=function(){return this._storage};m.getComputedNumeric=function(z){return this.getComputedNumericAtIndex(0)};m.setComputedNumeric=function(z,A){return this.setComputedNumericAtIndex(A,0)};m.getComputedString=function(z){return this.getComputedStringAtIndex(0)};
m.setComputedString=function(z,A){return this.setComputedStringAtIndex(0,A)};m.getComputedNumericAtIndex=function(z){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),z)};m.setComputedNumericAtIndex=function(z,A){this._storage.setComputedNumericAtIndex(this.getDisplayId(),z,A)};m.getComputedStringAtIndex=function(z){return this._storage.getComputedStringAtIndex(this.getDisplayId(),z)};m.setComputedStringAtIndex=function(z,A){return this._storage.setComputedStringAtIndex(this.getDisplayId(),
z,A)};m.transform=function(z,A,H,E){const F=this.copy();F._tx+=z;F._ty+=A;F._sx*=H;F._sy*=E;return F};m.readAttribute=function(z,A=!1){var H=this._readAttribute(z,A);if(void 0!==H)return H;for(const E of this._joined)if(E.setIndex(this.getIndex()),H=E._readAttribute(z,A),void 0!==H)return H};m.readAttributes=function(){const z=this._readAttributes();for(const A of this._joined){A.setIndex(this.getIndex());const H=A._readAttributes();for(const E of Object.keys(H))z[E]=H[E]}return z};m.joinAttributes=
function(z){this._joined.push(z)};m.readArcadeFeature=function(){return this};m.hasField=function(z){return this.fields.has(z)};m.geometry=function(){var z=this.readHydratedGeometry();z=q.convertToGeometry(z,this.geometryType,this.hasZ,this.hasM);if(z=b.fromJSON(z))z.spatialReference=this._arcadeSpatialReference;return z};m.autocastArcadeDate=function(z,A){return A&&A instanceof Date?this.isUnknownDateTimeField(z)?B.ArcadeDate.unknownDateJSToArcadeDate(A):B.ArcadeDate.dateJSAndZoneToArcadeDate(A,
this.contextTimeReference?.timeZone??"system"):A};m.isUnknownDateTimeField=function(z){return"unknown"===this.dateTimeReferenceFieldIndex?.fieldTimeZone(z)};m.fieldSourceTimeZone=function(z){return this.dateTimeReferenceFieldIndex?.fieldTimeZone(z)??""};m.field=function(z){if(this.hasField(z))return this.autocastArcadeDate(z,this.readAttribute(z,!0));for(var A of this._joined)if(A.setIndex(this.getIndex()),A.hasField(z))return A=A._readAttribute(z,!0),this.autocastArcadeDate(z,A);throw Error(`Field ${z} does not exist`);
};m.setField=function(z,A){throw Error("Unable to update feature attribute values, feature is readonly");};m.keys=function(){return this.fields.fields.map(z=>z.name)};m.castToText=function(z=!1){if(!z)return JSON.stringify(this.readLegacyFeature());z=this.readLegacyFeature();if(!z)return JSON.stringify(null);z={geometry:z.geometry,attributes:{...(z.attributes??{})}};for(const A in z.attributes){const H=z.attributes[A];H instanceof Date&&(z.attributes[A]=H.getTime())}return JSON.stringify(z)};m.gdbVersion=
function(){return null};m.fullSchema=function(){return this._layerSchema};m.castAsJson=function(z=null){return{attributes:this._readAttributes(),geometry:!0===z?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null}};m.castAsJsonAsync=function(z,A=null){return Promise.resolve(this.castAsJson(A))};m.removeIds=function(z){if(null==this._objectIdToIndex){var A=new Map;const H=this.getCursor();for(;H.next();){const E=C.unwrapOrThrow(H.getObjectId());A.set(E,H.getIndex())}this._objectIdToIndex=
A}A=this._objectIdToIndex;for(const H of z)A.has(H)&&this.removeAtIndex(A.get(H))};m.removeAtIndex=function(z){null==this._deleted&&(this._deleted=e.StaticBitSet.create(this.getSize()));this._deleted.set(z)};m.readGeometryForDisplay=function(){return this.readUnquantizedGeometry(!0)};m.readLegacyGeometryForDisplay=function(){return this.readLegacyGeometry(!0)};m.features=function*(){const z=this.getCursor();for(;z.next();)yield z.readOptimizedFeature()};m._getExists=function(){return null==this._deleted||
!this._deleted.has(this.getIndex())};m._computeCentroid=function(){if("esriGeometryPolygon"!==this.geometryType)return null;const z=this.readUnquantizedGeometry();if(!z||z.hasIndeterminateRingOrder)return null;const A=this.getQuantizationTransform()??null;return t.getCentroidOptimizedGeometry(new k,z,this.hasM,this.hasZ,A)};m.copyInto=function(z){z.seen=this.seen;z._storage=this._storage;z._arcadeSpatialReference=this._arcadeSpatialReference;z._joined=this._joined;z._tx=this._tx;z._ty=this._ty;z._sx=
this._sx;z._sy=this._sy;z._deleted=this._deleted;z._objectIdToIndex=this._objectIdToIndex};h._createClass(w,[{key:"isEmpty",get:function(){return null!=this._deleted&&this._deleted.countSet()===this.getSize()}},{key:"level",set:function(z){this._level=z}},{key:"dateTimeReferenceFieldIndex",get:function(){return this._datetimeMetadata?this._datetimeMetadata:this._datetimeMetadata=y.DateTimeReferenceFieldIndex.create(this._layerSchema.fields,this._layerSchema)}},{key:"layerPreferredTimeZone",get:function(){return this.dateTimeReferenceFieldIndex?.layerPreferredTimeZone??
""}}]);return w}();l.FeatureSetReader=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./executionError","../chunks/datetime"],function(l,h,D,B){function y(k){if(k instanceof B.Zone)return k;if("system"===k.toLowerCase())return"system";if("utc"===k.toLowerCase())return"utc";if("unknown"===k.toLowerCase())return v.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(k)){const e=B.FixedOffsetZone.parseSpecifier("UTC"+
(k.startsWith("+")||k.startsWith("-")?"":"+")+k);if(e)return e}k=B.IANAZone.create(k);if(!k.isValid)throw new t(l.ArcadeDateErrorCodes.TimeZoneNotRecognised);return k}let v=h._createClass(function(){});v.instance=new B.IANAZone("Etc/UTC");l.ArcadeDateErrorCodes=void 0;(l.ArcadeDateErrorCodes||(l.ArcadeDateErrorCodes={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const C={[l.ArcadeDateErrorCodes.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};let t=function(k){function e(b,
c){b=k.call(this,D.doSubstitutions(C[b],c))||this;b.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(h._assertThisInitialized(b),e);return b}h._inherits(e,k);return h._createClass(e)}(h._wrapNativeSuper(Error)),q=function(){function k(b){this._date=b;this.declaredRootClass="esri.arcade.arcadedate"}k.fromParts=function(b=0,c=1,f=1,a=0,d=0,n=0,r=0,p){if(isNaN(b)||isNaN(c)||isNaN(f)||isNaN(a)||isNaN(d)||isNaN(n)||isNaN(r))return null;let g=0;var u=
B.DateTime.local(b,c).daysInMonth;1>f&&(g=f-1,f=1);f>u&&(g=f-u,f=u);u=0;12<c?(u=c-12,c=12):1>c&&(u=c-1,c=1);let x=0;59<d?(x=d-59,d=59):0>d&&(x=d,d=0);let w=0;59<n?(w=n-59,n=59):0>n&&(w=n,n=0);let m=0;999<r?(m=r-999,r=999):0>r&&(m=r,r=0);b=B.DateTime.fromObject({day:f,year:b,month:c,hour:a,minute:d,second:n,millisecond:r},{zone:y(p)});0!==u&&(b=b.plus({months:u}));0!==g&&(b=b.plus({days:g}));0!==x&&(b=b.plus({minutes:x}));0!==w&&(b=b.plus({seconds:w}));0!==m&&(b=b.plus({milliseconds:m}));return new k(b)};
k.arcadeDateAndZoneToArcadeDate=function(b,c){const f=y(c);return b.isUnknownTimeZone||f===v.instance?k.fromParts(b.year,b.monthJS+1,b.day,b.hour,b.minute,b.second,b.millisecond,f):new k(b._date.setZone(c))};k.dateJSToArcadeDate=function(b){return new k(B.DateTime.fromJSDate(b,{zone:"system"}))};k.dateJSAndZoneToArcadeDate=function(b,c="system"){return new k(B.DateTime.fromJSDate(b,{zone:c}))};k.unknownEpochToArcadeDate=function(b){return new k(B.DateTime.fromMillis(b,{zone:v.instance}))};k.unknownDateJSToArcadeDate=
function(b){return new k(B.DateTime.fromMillis(b.getTime(),{zone:v.instance}))};k.epochToArcadeDate=function(b,c="system"){return new k(B.DateTime.fromMillis(b,{zone:c}))};k.dateTimeToArcadeDate=function(b){return new k(b)};var e=k.prototype;e.clone=function(){return new k(this._date)};e.changeTimeZone=function(b){b=y(b);return k.dateTimeToArcadeDate(this._date.setZone(b))};k.dateTimeAndZoneToArcadeDate=function(b,c){c=y(c);return b.zone===v.instance||c===v.instance?k.fromParts(b.year,b.month,b.day,
b.hour,b.minute,b.second,b.millisecond,c):new k(b.setZone(c))};k.nowToArcadeDate=function(b){return new k(B.DateTime.fromJSDate(new Date,{zone:b}))};k.nowUTCToArcadeDate=function(){return new k(B.DateTime.utc())};e.equals=function(b){return this.isSystem&&b.isSystem?this.toNumber()===b.toNumber():this.isUnknownTimeZone!==b.isUnknownTimeZone?!1:this._date.equals(b._date)};e.stringify=function(){return JSON.stringify(this.toJSDate())};e.plus=function(b){return new k(this._date.plus(b))};e.diff=function(b,
c="milliseconds"){return this._date.diff(b._date,c)[c]};e.toISOString=function(b){return b?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})};e.toFormat=function(b,c){return this._date.toFormat(b,c)};e.toJSDate=function(){return this._date.toJSDate()};e.toSQLString=function(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"};e.toDateTime=function(){return this._date};e.toNumber=function(){return this._date.toMillis()};
e.getTime=function(){return this._date.toMillis()};e.toUTC=function(){return new k(this._date.toUTC())};e.toLocal=function(){return new k(this._date.toLocal())};e.toString=function(){return this.toISOString(!0)};h._createClass(k,[{key:"isSystem",get:function(){return"system"===this.timeZone||this.timeZone===k.systemTimeZoneCanonicalName}},{key:"isUnknownTimeZone",get:function(){return this._date.zone===v.instance}},{key:"isValid",get:function(){return this._date.isValid}},{key:"hour",get:function(){return this._date.hour}},
{key:"second",get:function(){return this._date.second}},{key:"day",get:function(){return this._date.day}},{key:"dayOfWeekISO",get:function(){return this._date.weekday}},{key:"dayOfWeekJS",get:function(){let b=this._date.weekday;6<b&&(b=0);return b}},{key:"millisecond",get:function(){return this._date.millisecond}},{key:"monthISO",get:function(){return this._date.month}},{key:"weekISO",get:function(){return this._date.weekNumber}},{key:"yearISO",get:function(){return this._date.weekYear}},{key:"monthJS",
get:function(){return this._date.month-1}},{key:"year",get:function(){return this._date.year}},{key:"minute",get:function(){return this._date.minute}},{key:"zone",get:function(){return this._date.zone}},{key:"timeZoneOffset",get:function(){return this.isUnknownTimeZone?0:this._date.offset}},{key:"timeZone",get:function(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const b=this.zone;return"fixed"===b.type?0===b.fixed?"utc":b.formatOffset(0,"short"):b.name}}],
[{key:"systemTimeZoneCanonicalName",get:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}}]);return k}();l.ArcadeDate=q;l.ArcadeDateError=t;l.ArcadeDateErrorMessages=C;l.UnknownTimeZone=v;l.createDateTimeZone=y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/arcadeTimeUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./ArcadeDate ../layers/support/FieldsIndex ../time/TimeReference ../chunks/datetime ../time/timeReferenceUtils".split(" "),
function(l,h,D,B,y,v,C){function t(k){return k?.timeZoneIANA?k?.timeZoneIANA:k?.timeZone?C.convertLegacyTimeZone(k,""):""}let q=function(){function k(){this.dateTimeReferenceMetaData=null;this._fieldTimeZoneIndex={};this._ianaLayerDateFields=this._ianaEditFields=this._ianaTimeInfo=this._ianaPreferred=this._fieldIndex=null}k.create=function(b,c){const f=new k;f.dateTimeReferenceMetaData=c;f._fieldIndex=b instanceof B?b:new B(b);return f};k.createFromLayer=function(b){if(!b)return null;if(!b.fieldsIndex)return!b.declaredClass&&
b.fields?k.create(b.fields,b):null;const c=new k;c._fieldIndex=b.fieldsIndex;c.dateTimeReferenceMetaData={timeInfo:b?.timeInfo?.toJSON()??null,editFieldsInfo:b?.editFieldsInfo?.toJSON()??null,dateFieldsTimeReference:b?.dateFieldsTimeReference?.toJSON()??null,preferredTimeReference:b?.preferredTimeReference?.toJSON()??null,datesInUnknownTimezone:!0===b?.datesInUnknownTimezone};return c};var e=k.prototype;e.fieldTimeZone=function(b){b=this._fieldIndex?.get(b);if(!b||"date"!==b.type&&"esriFieldTypeDate"!==
b.type)return null;var c=this._fieldTimeZoneIndex[b.name];if(void 0!==c)return c;c=[{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.creationDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.editDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},
{field:this.dateTimeReferenceMetaData?.timeInfo?.startTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.endTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone}];for(var f of c)if(f.field===b.name)return f=this.convertToIANA(f.timeReference,f.isunknown),
this._fieldTimeZoneIndex[b.name]=f;f=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,this.dateTimeReferenceMetaData?.datesInUnknownTimezone);return this._fieldTimeZoneIndex[b.name]=f};e.convertToIANA=function(b,c){return c?"unknown":t(b)};h._createClass(k,[{key:"layerPreferredTimeZone",get:function(){if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";return this._ianaPreferred=this.convertToIANA(this.dateTimeReferenceMetaData?.preferredTimeReference,
!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}},{key:"layerTimeInfoTimeZone",get:function(){if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";return this._ianaTimeInfo=this.convertToIANA(this.dateTimeReferenceMetaData?.timeInfo?.timeReference,!1)}},{key:"layerEditFieldsTimeZone",get:function(){if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";return this._ianaEditFields=this.convertToIANA(this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,
this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}},{key:"layerDateFieldsTimeZone",get:function(){if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;this._ianaLayerDateFields="";return this._ianaLayerDateFields=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}}]);return k}();l.DateTimeReferenceFieldIndex=q;l.convertTimeReference=function(k){if(!k)return null;k instanceof y&&(k=t(k.toJSON()));
if(k instanceof v.Zone)return k;if("unknown"===k.toLowerCase())return D.UnknownTimeZone.instance;if("system"===k.toLowerCase())return v.SystemZone.instance;if("utc"===k.toLowerCase())return v.FixedOffsetZone.utcInstance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(k)){const e=v.FixedOffsetZone.parseSpecifier("UTC"+(k.startsWith("+")||k.startsWith("-")?"":"+")+k);if(e)return e}k=v.IANAZone.create(k);if(!k.isValid)throw new D.ArcadeDateError(D.ArcadeDateErrorCodes.TimeZoneNotRecognised);return k};l.convertToIANA=
t;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/time/TimeReference":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./timeReferenceUtils".split(" "),function(l,h,D,B,y,v,C,t,q,
k,e,b){D=function(c){function f(d){d=c.call(this,d)||this;d.legacy=null;d.timeZone="system";return d}l._inherits(f,c);var a=f.prototype;a.readLegacy=function(d,n){const {timeZone:r,respectsDaylightSaving:p}=n;return{timeZone:r,respectsDaylightSaving:p}};a.readTimeZone=function(d,n){return"timeZoneIANA"in n?n.timeZoneIANA:b.convertLegacyTimeZone(n)};a.writeTimeZone=function(d,n){n.timeZoneIANA=d};a.equals=function(d){return null==d||null==this.timeZone||null==d.timeZone?!1:this.timeZone===d.timeZone};
return l._createClass(f)}(D.ClonableMixin(B.JSONSupport));h.__decorate([y.property()],D.prototype,"legacy",void 0);h.__decorate([q.reader("legacy",["timeZone"])],D.prototype,"readLegacy",null);h.__decorate([y.property({type:String,nonNullable:!0})],D.prototype,"timeZone",void 0);h.__decorate([q.reader("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],D.prototype,"readTimeZone",null);h.__decorate([e.writer("timeZone")],D.prototype,"writeTimeZone",null);return D=h.__decorate([k.subclass("esri.time.TimeReference")],
D)})},"esri/core/Clonable":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./has ./lang ./Logger ./maybe ./accessorSupport/PropertyOrigin ./accessorSupport/utils ./accessorSupport/decorators/subclass".split(" "),function(l,h,D,B,y,v,C,t,q,k,e){y=b=>{b=function(c){function f(){return c.apply(this,arguments)||this}h._inherits(f,c);f.prototype.clone=function(){var a=t.unwrapOrThrow(k.getProperties(this),"unable to clone instance of non-accessor class"),d=
a.metadatas;const n=a.store,r={};a=new Map;for(var p in d){var g=d[p];const u=n?.originOf(p),x=g.clonable;if(g.readOnly||!1===x||u!==q.OriginId.USER&&u!==q.OriginId.DEFAULTS&&u!==q.OriginId.WEB_MAP&&u!==q.OriginId.WEB_SCENE)continue;g=this[p];let w=null;w="function"===typeof x?x(g):"reference"===x?g:v.tryClone(g);if(null==g||null!=w)u===q.OriginId.DEFAULTS?a.set(p,w):r[p]=w}d=new (Object.getPrototypeOf(this).constructor)(r);if(a.size&&(p=k.getProperties(d)?.store))for(const [u,x]of a)p.set(u,x,q.OriginId.DEFAULTS);
return d};return h._createClass(f)}(b);return b=D.__decorate([e.subclass("esri.core.Clonable")],b)};l.Clonable=function(b){function c(){return b.apply(this,arguments)||this}h._inherits(c,b);return h._createClass(c)}(y(B));l.Clonable=D.__decorate([e.subclass("esri.core.Clonable")],l.Clonable);l.ClonableMixin=y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/time/timeReferenceUtils":function(){define(["exports","./legacyTimeZoneMap","../chunks/datetime"],function(l,h,D){l.convertLegacyTimeZone=
function(B,y="system"){if(!B||!h.legacyTimeZoneMap.has(B.timeZone))return y;y=h.legacyTimeZoneMap.get(B.timeZone);if(B.timeZone.startsWith("UTC")||B.respectsDaylightSaving)return y;B=D.DateTime.local().setZone(y);B=Math.min(B.set({month:1,day:1}).offset,B.set({month:5}).offset);B=0===B?"Etc/UTC":`Etc/GMT${D.FixedOffsetZone.instance(-B).formatOffset(0,"narrow")}`;return B};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/time/legacyTimeZoneMap":function(){define(["exports"],function(l){const h=
new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time",
"America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time",
"Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time",
"Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time",
"Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time",
"Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time",
"Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time",
"Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time",
"Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time",
"Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time",
"Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],
["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],
["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);
l.legacyTimeZoneMap=h;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(l){function h(B,y,v,C,t,q,k=1){q=t?q?4:3:q?3:2;let e=v,b=v+q,c=0,f=0,a=v=0,d=0;for(let n=0,r=C-1;n<r;n++,e+=q,b+=q){C=y[e];const p=y[e+1],g=y[e+2],u=y[b],x=y[b+1],w=y[b+2];let m=C*x-u*p;a+=m;c+=(C+u)*m;f+=(p+x)*m;t&&(m=C*w-u*g,v+=(g+w)*m,d+=m);C<B[0]&&(B[0]=C);C>B[1]&&(B[1]=C);p<B[2]&&(B[2]=p);p>B[3]&&(B[3]=p);t&&(g<B[4]&&(B[4]=g),g>B[5]&&(B[5]=
g))}0<a*k&&(a*=-1);0<d*k&&(d*=-1);if(!a)return null;B=[c,f,.5*a];t&&(B[3]=v,B[4]=.5*d);return B}function D(B,y,v,C,t){t=C?t?4:3:t?3:2;let q=y,k=y+t,e=0,b=0,c=0,f=0;for(let r=0,p=v-1;r<p;r++,q+=t,k+=t){var a=B[q];const g=B[q+1],u=B[q+2],x=B[k],w=B[k+1],m=B[k+2];if(C){var d=x-a;var n=w-g;const z=m-u;d=Math.sqrt(d*d+n*n+z*z)}else d=x-a,n=w-g,d=Math.sqrt(d*d+n*n);d&&(e+=d,C?(a=[a+.5*(x-a),g+.5*(w-g),u+.5*(m-u)],b+=d*a[0],c+=d*a[1],f+=d*a[2]):(a=[a+.5*(x-a),g+.5*(w-g)],b+=d*a[0],c+=d*a[1]))}return 0<e?
C?[b/e,c/e,f/e]:[b/e,c/e]:0<v?C?[B[y],B[y+1],B[y+2]]:[B[y],B[y+1]]:null}l.getCentroidOptimizedGeometry=function(B,y,v,C,t){if(null==y||!y.lengths.length)return null;const q="upperLeft"===t?.originPosition?-1:1;B.lengths.length&&(B.lengths.length=0);B.coords.length&&(B.coords.length=0);t=B.coords;const k=[],e=v?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:b,coords:c}=y,f=v?C?4:3:C?3:2;let a=0;for(var d of b){const n=h(e,c,a,d,v,C,q);n&&k.push(n);a+=d*f}k.sort((n,r)=>{let p=q*n[2]-q*r[2];0===p&&v&&(p=n[4]-r[4]);return p});k.length&&(d=6*k[0][2],t[0]=k[0][0]/d,t[1]=k[0][1]/d,v&&(d=6*k[0][4],t[2]=0!==d?k[0][3]/d:0),t[0]<e[0]||t[0]>e[1]||t[1]<e[2]||t[1]>e[3]||v&&(t[2]<e[4]||t[2]>e[5]))&&(t.length=0);if(!t.length)if(y=y.lengths[0]?D(c,0,b[0],v,C):null)t[0]=y[0],t[1]=y[1],v&&2<y.length&&(t[2]=y[2]);
else return null;return B};l.lineCentroid=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/StaticBitSet":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(l,h){let D=function(){function B(v,C){this._mask=0;this._buf=v;this._mask=C}B.fromBuffer=function(v,C){return new B(v,C)};B.create=function(v,C=4294967295){v=new Uint32Array(Math.ceil(v/32));return new B(v,C)};var y=B.prototype;y._getIndex=function(v){return Math.floor(v/
32)};y.has=function(v){v&=this._mask;return!!(this._buf[this._getIndex(v)]&1<<v%32)};y.hasRange=function(v,C){for(;v%32&&v!==C;){if(this.has(v))return!0;v++}for(;C%32&&v!==C;){if(this.has(v))return!0;C--}if(v===C)return!1;for(v/=32;v!==C/32;v++)if(this._buf[v])return!0;return!1};y.set=function(v){v&=this._mask;const C=this._getIndex(v);this._buf[C]|=1<<v%32};y.setRange=function(v,C){for(;v%32&&v!==C;)this.set(v++);for(;C%32&&v!==C;)this.set(C--);if(v!==C)for(v/=32;v!==C/32;v++)this._buf[v]=4294967295};
y.unset=function(v){v&=this._mask;const C=this._getIndex(v);this._buf[C]&=4294967295^1<<v%32};y.resize=function(v){const C=this._buf;v=new Uint32Array(Math.ceil(v/32));v.set(C);this._buf=v};y.or=function(v){for(let C=0;C<this._buf.length;C++)this._buf[C]|=v._buf[C];return this};y.and=function(v){for(let C=0;C<this._buf.length;C++)this._buf[C]&=v._buf[C];return this};y.xor=function(v){for(let C=0;C<this._buf.length;C++)this._buf[C]^=v._buf[C];return this};y.ior=function(v){for(let C=0;C<this._buf.length;C++)this._buf[C]|=
~v._buf[C];return this};y.iand=function(v){for(let C=0;C<this._buf.length;C++)this._buf[C]&=~v._buf[C];return this};y.ixor=function(v){for(let C=0;C<this._buf.length;C++)this._buf[C]^=~v._buf[C];return this};y.any=function(){for(let v=0;v<this._buf.length;v++)if(this._buf[v])return!0;return!1};y.copy=function(v){for(let C=0;C<this._buf.length;C++)this._buf[C]=v._buf[C];return this};y.clone=function(){return new B(this._buf.slice(),this._mask)};y.clear=function(){for(let v=0;v<this._buf.length;v++)this._buf[v]=
0};y.forEachSet=function(v){for(let C=0;C<this._buf.length;C++){let t=this._buf[C],q=32*C;if(t)for(;t;)t&1&&v(q),t>>>=1,q++}};y.countSet=function(){let v=0;this.forEachSet(C=>{v++});return v};return h._createClass(B)}();l.StaticBitSet=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/sources/createSource":function(){define("exports ../../../../../layers/support/arcgisLayerUrl ./DrillDownFeatureSource ./PagedFeatureSource ./SnapshotFeatureSource ./StreamSource".split(" "),
function(l,h,D,B,y,v){l.createSource=function(C,t,q,k,e,b){a:{switch(C.type){case "snapshot":C={type:"feature",origin:"snapshot",featureCount:C.featureCount??0,serviceInfo:C,onMessage:k,outSR:t,tileInfoView:q,canAcceptRequest:e,store:b};break a;case "stream":C={type:"stream",serviceInfo:C,onMessage:k,outSR:t,canAcceptRequest:e};break a;case "memory":case "on-demand":b=C.source;b=Array.isArray(b)?"local":"path"in b&&h.isHostedAgolService(b.path)?"hosted":"unknown";C={type:"feature",serviceInfo:C,onMessage:k,
outSR:t,origin:b,tileInfoView:q,canAcceptRequest:e};break a}C=void 0}switch(C.type){case "feature":switch(C.origin){case "hosted":case "local":return new B.PagedFeatureSource(C);case "snapshot":return new y.SnapshotFeatureSource(C);default:case "unknown":return new D.DrillDownFeatureSource(C)}case "stream":return new v.StreamSource(C)}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],
function(l,h,D){function B(b){if(null==b)return null;b=h.urlToObject(b);b=b.path.match(q)||b.path.match(k);if(!b)return null;const [,c,f,a,d]=b;b=f.indexOf("/");return{title:v(-1!==b?f.slice(b+1):f),serverType:C[a.toLowerCase()],sublayer:null!=d&&""!==d?parseInt(d,10):null,url:{path:c}}}function y(b){return(b=h.urlToObject(b).path.match(e))?{serviceUrl:b[1],sublayerId:Number(b[2])}:null}function v(b){b=b.replaceAll(/\s*[/_]+\s*/g," ");return b[0].toUpperCase()+b.slice(1)}const C={mapserver:"MapServer",
imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},t=Object.values(C),q=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${t.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),k=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${t.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;l.cleanTitle=v;l.isArcGISUrl=function(b){return!!q.test(b)};l.isHostedAgolService=
function(b){if(!b)return!1;b=b.toLowerCase();const c=b.includes(".arcgis.com/");b=b.includes("//services")||b.includes("//tiles")||b.includes("//features");return c&&b};l.isServerOrServicesAGOLUrl=function(b){if(!b)return!1;b=(new h.Url(h.makeAbsolute(b))).authority?.toLowerCase();return"server.arcgisonline.com"===b||"services.arcgisonline.com"===b};l.isWmsServer=function(b){if(!b)return!1;var c=b.toLowerCase();b=c.includes("/services/");const f=c.includes("/mapserver/wmsserver"),a=c.includes("/imageserver/wmsserver");
c=c.includes("/wmsserver");return b&&(f||a||c)};l.parse=B;l.parseNonStandardSublayerUrl=y;l.sanitizeUrl=function(b,c){return b?h.removeTrailingSlash(h.removeQueryParameters(b,c)):b};l.sanitizeUrlWithLayerId=function(b){let {url:c}=b;if(!c)return{url:c};c=h.removeQueryParameters(c,b.logger);const f=h.urlToObject(c),a=B(f.path);let d=void 0;null!=a?(null!=a.sublayer&&null==b.layer.layerId&&(d=a.sublayer),c=a.url.path):b.nonStandardUrlAllowed&&(b=y(f.path),null!=b&&(c=b.serviceUrl,d=b.sublayerId));return{url:h.removeTrailingSlash(c),
layerId:d}};l.serverTypes=t;l.titleFromUrlAndName=function(b,c){const f=[];b&&(b=B(b),null!=b&&b.title&&f.push(b.title));c&&(c=v(c),f.push(c));if(2===f.length){if(f[0].toLowerCase().includes(f[1].toLowerCase()))return f[0];if(f[1].toLowerCase().includes(f[0].toLowerCase()))return f[1]}return f.join(" - ")};l.writeUrlWithLayerId=function(b,c,f,a,d){D.write(c,a,"url",d);a.url&&null!=b.layerId&&(a.url=h.join(a.url,f,b.layerId.toString()))};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/urlUtils"],function(l,h){function D(f,a){var d=a&&a.url&&a.url.path;f&&d&&(f=h.makeAbsolute(f,d,{preserveProtocolRelative:!0}),a.portalItem&&a.readResourcePaths&&(d=h.makeRelative(f,a.portalItem.itemUrl),null!=d&&b.test(d)&&a.readResourcePaths.push(a.portalItem.resourceFromPath(d).path)));return k(f,a&&a.portal)}function B(f,a,d=l.MarkKeep.YES){if(null==f)return f;!h.isAbsolute(f)&&a&&a.blockedRelativeUrls&&a.blockedRelativeUrls.push(f);
let n=h.makeAbsolute(f);if(a){var r=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;if(r){r=k(r,a.portal);const p=k(n,a.portal);n=h.makeRelative(p,r,r);null!=n&&n!==p&&n!==f&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(n)}}n=q(n,a?.portal);h.isAbsolute(n)&&(n=h.normalize(n));a?.resources&&a?.portalItem&&!h.isAbsolute(n)&&!h.isDataProtocol(n)&&d===l.MarkKeep.YES&&a.resources.toKeep.push({resource:a.portalItem.resourceFromPath(n),compress:!1});
return n}function y(f,a,d){return D(f,d)}function v(f,a,d,n){f=B(f,n);void 0!==f&&(a[d]=f)}function C(f){return(f?.match(e)??null)?.[1]??null}function t(f){f=f?.match(e)??null;if(null==f)return null;f=f[2];const a=f.lastIndexOf("/");if(-1===a){const {path:r,extension:p}=h.splitPathExtension(f);return{prefix:null,filename:r,extension:p}}const {path:d,extension:n}=h.splitPathExtension(f.slice(a+1));return{prefix:f.slice(0,a),filename:d,extension:n}}function q(f,a){return a&&!a.isPortal&&a.urlKey&&a.customBaseUrl?
h.changeDomain(f,`${a.urlKey}.${a.customBaseUrl}`,a.portalHostname):f}function k(f,a){if(!a||a.isPortal||!a.urlKey||!a.customBaseUrl)return f;const d=`${a.urlKey}.${a.customBaseUrl}`,n=h.getAppUrl();return h.hasSameOrigin(n,`${n.scheme}://${d}`)?h.changeDomain(f,a.portalHostname,d):h.changeDomain(f,d,a.portalHostname)}const e=/\/items\/([^\/]+)\/resources\/(.*)/,b=/^\.\/resources\//;l.MarkKeep=void 0;(function(f){f[f.YES=0]="YES";f[f.NO=1]="NO"})(l.MarkKeep||(l.MarkKeep={}));const c=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return l.MarkKeep},ensureMainOnlineDomain:q,fromJSON:D,itemIdFromResourceUrl:C,prefixAndFilenameFromResourceUrl:t,read:y,toJSON:B,write:v},Symbol.toStringTag,{value:"Module"}));l.ensureMainOnlineDomain=q;l.fromJSON=D;l.itemIdFromResourceUrl=C;l.persistableUrlUtils=c;l.prefixAndFilenameFromResourceUrl=t;l.read=y;l.toJSON=B;l.write=v})},"esri/views/2d/layers/features/sources/DrillDownFeatureSource":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/has",
"../../../../../core/promiseUtils","./BaseFeatureSource"],function(l,h,D,B,y){var v=(D=D("esri-mobile"))?1:4,C=D?1:3;y=function(t){function q(k){return t.call(this,k)||this}h._inherits(q,t);q.prototype._fetchDataTile=async function(k){const e=this._serviceInfo.capabilities.query.supportsMaxRecordCountFactor,b=this._subscriptions.get(k.key.id),c=b.signal,f=k.getQuantizationParameters();let a=0;const d=async(n,r)=>{const p=this._queryInfo,g=this.createTileQuery(n,{maxRecordCountFactor:e?C:void 0,returnExceededLimitFeatures:!1,
quantizationParameters:f});a++;try{const x=await this.enqueueQuery({tile:k,query:g,signal:c,depth:r});a--;B.throwIfAborted(c);if(x)if(p!==this._queryInfo)d(n,r);else if(x.exceededTransferLimit&&r<v)for(const w of n.createChildTiles())d(w,r+1);else{var u={id:k.id,addOrUpdate:x,end:0===a,type:"append"};b.add({query:g,message:u});this._onMessage(u)}}catch(x){B.isAbortError(x)||(n={id:k.id,addOrUpdate:null,end:!0,type:"append"},b.add({query:g,message:n}),this._onMessage(n))}};d(k,0)};return h._createClass(q)}(y.BaseFeatureSource);
l.DrillDownFeatureSource=y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/sources/BaseFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../request ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/promiseUtils ../controllers/support/sourceAdapters ./DataTileSource ../../../../support/QueueProcessor".split(" "),function(l,h,D,B,y,v,C,t,q,k){q=function(e){function b(f){var a=
e.call(this,f)||this;a.type="feature";a.mode="on-demand";a._adapter=t.createSourceAdapter(f.serviceInfo);a._queue=new k.QueueProcessor({concurrency:8,process:async d=>{C.throwIfAborted(d);if(null!=d.tile){var n=d.tile.key.id,{signal:r}=d;n=y("esri-tiles-debug")?{tile:n.replaceAll("/","."),depth:d.depth}:void 0;r=await a._adapter.executeQuery(d.query,{signal:r,query:{...n,...a._schema?.customParameters}});r.level=d.tile.key.level;return r}return a._adapter.executeQuery(d.query,{...d,query:a._schema?.customParameters})}});
a._patchQueue=new k.QueueProcessor({concurrency:8,process:async d=>{C.throwIfAborted(d);if(null!=d.tile){var n=d.tile.key.id,{signal:r}=d;n=y("esri-tiles-debug")?{tile:n.replaceAll("/","."),depth:d.depth}:void 0;r=await a._adapter.executeQuery(d.query,{signal:r,query:{...n,...a._schema?.customParameters}});r.level=d.tile.key.level;return r}return a._adapter.executeQuery(d.query,{...d,query:a._schema?.customParameters})}});return a}h._inherits(b,e);var c=b.prototype;c.destroy=function(){h._get(h._getPrototypeOf(b.prototype),
"destroy",this).call(this);this._adapter.destroy();this._queue.destroy();this._patchQueue.destroy()};c.enqueueQuery=function(f,a){return this.updatingHandles.addPromise(this._queue.push(f,a))};c.enqueuePatchQuery=function(f,a){return this.updatingHandles.addPromise(this._patchQueue.push(f,a))};c.enableEvent=function(f,a){};c.subscribe=function(f,a){h._get(h._getPrototypeOf(b.prototype),"subscribe",this).call(this,f,a);this._fetchDataTile(f).catch(d=>{C.isAbortError(d)||v.getLogger("esri.views.2d.layers.features.sources.BaseFeatureSource").error(new B("mapview-query-error",
"Encountered error when fetching tile",{tile:f,error:d}))})};c.unsubscribe=function(f){h._get(h._getPrototypeOf(b.prototype),"unsubscribe",this).call(this,f)};c.readers=function(f){return this._subscriptions.get(f).readers()};c.query=async function(f,a={}){return this._adapter.executeQuery(f,{...a,query:{...(a.query??{}),...this._schema?.customParameters}})};c.queryLastEditDate=async function(){const f=this._serviceInfo.source;return(await D(f.path,{query:{...f.query,f:"json"},responseType:"json"})).data.editingInfo.lastEditDate};
c.createTileQuery=function(f,a={}){const d=this._serviceInfo.geometryType,n=this.createQuery(a);n.quantizationParameters=a.quantizationParameters??f.getQuantizationParameters();n.resultType="tile";n.geometry=f.extent;if(this._serviceInfo.capabilities.query.supportsQuantization)"esriGeometryPolyline"===d&&(n.maxAllowableOffset=f.resolution*y("feature-polyline-generalization-factor"));else if("esriGeometryPolyline"===d||"esriGeometryPolygon"===d)n.maxAllowableOffset=f.resolution,"esriGeometryPolyline"===
d&&(n.maxAllowableOffset*=y("feature-polyline-generalization-factor"));f=this._serviceInfo.capabilities.query;n.defaultSpatialReferenceEnabled=f.supportsDefaultSpatialReference;n.compactGeometryEnabled=f.supportsCompactGeometry;return n};c._executePatchQuery=async function(f,a,d,n){a=a.clone();a.outFields=[this._serviceInfo.objectIdField,...d];a.returnCentroid=!1;a.returnGeometry=!1;return await this.enqueuePatchQuery({tile:f,query:a,signal:n.signal,depth:null!=a.start?a.start/8E3:0})};c._resend=
async function(f,a){const {query:d,message:n}=f,r=null!=d.outFields?d.outFields:[];f=this._queryInfo.outFields;const p=f.filter(g=>!r.includes(g));if(null==n.addOrUpdate)this._onMessage({...n,type:"append"});else if(p.length)try{const g=this._subscriptions.get(n.id).tile,u=await this._executePatchQuery(g,d,p,a);C.throwIfAborted(a);d.outFields=f;n.addOrUpdate.joinAttributes(u);this._onMessage({...n,end:n.end,type:"append"})}catch(g){}else this._onMessage({...n,type:"append"})};c._resendSubscription=
async function(f){y("esri-2d-update-debug")&&console.debug(f.tile.id,"Resend Subscription");if(f.empty)return this._onMessage({id:f.tile.id,addOrUpdate:null,end:!1,type:"append"});const a=f.signal;for(const d of f.requests.done)await this._resend(d,{signal:a});if(null!=f.edits)return this._onMessage(f.edits)};c.resend=async function(){const f=Array.from(this._subscriptions.values());await Promise.all(f.map(a=>this._resendSubscription(a)))};h._createClass(b,[{key:"maxRecordCountFactor",get:function(){const {query:f}=
this._serviceInfo.capabilities;return f.supportsMaxRecordCountFactor?4:null}},{key:"maxPageSize",get:function(){const {query:f}=this._serviceInfo.capabilities;return(f.maxRecordCount??8E3)*(this.maxRecordCountFactor??1)}},{key:"pageSize",get:function(){return Math.min(8E3,this.maxPageSize)}}]);return b}(q.DataTileSource);l.BaseFeatureSource=q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/controllers/support/sourceAdapters":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../../../../../core/workers/Connection ../../../../../../geometry/support/quantizationUtils ../../../../../../layers/graphics/featureConversionUtils ../../../../../../layers/ogc/ogcFeatureUtils ../../../../../../rest/query/operations/query ../../support/FeatureSetReaderJSON ../../support/FeatureSetReaderPBF".split(" "),
function(l,h,D,B,y,v,C,t,q,k){async function e(n){const r=new B;await r.open(n,{});return r}let b=function(){function n(r){this.service=r}n.prototype.destroy=function(){};return h._createClass(n)}(),c=function(n){function r(g){var u=n.call(this,g)||this;u._portsOpen=e(g.source).then(x=>u.client=x);return u}h._inherits(r,n);var p=r.prototype;p.destroy=function(){this.client.close();this.client=null};p.executeQuery=async function(g,u){await this._portsOpen;g=await this.client.invoke("queryFeatures",
g.toJSON(),u);return q.FeatureSetReaderJSON.fromFeatureSet(g,this.service)};return h._createClass(r)}(b),f=function(n){function r(){return n.apply(this,arguments)||this}h._inherits(r,n);r.prototype.executeQuery=async function(p,g){({data:g}=await t.executeQueryPBFBuffer(this.service.source,p,g));return k.FeatureSetReaderPBF.fromBuffer(g,this.service,!p.quantizationParameters)};return h._createClass(r)}(b),a=function(n){function r(){return n.apply(this,arguments)||this}h._inherits(r,n);r.prototype.executeQuery=
async function(p,g){const {source:u,capabilities:x,spatialReference:w,objectIdField:m,geometryType:z}=this.service;if(null!=p.quantizationParameters&&!x.query.supportsQuantization){const A=p.clone();p=y.toQuantizationTransform(A.quantizationParameters);A.quantizationParameters=null;({data:g}=await t.executeQuery(u,A,w,g));g=v.convertFromFeatureSet(g,m);v.quantizeOptimizedFeatureSet(p,g);return q.FeatureSetReaderJSON.fromOptimizedFeatureSet(g,this.service)}({data:p}=await t.executeQuery(u,p,this.service.spatialReference,
g));"esriGeometryPoint"===z&&(p.features=p.features?.filter(A=>null!=A.geometry?(A=A.geometry,Number.isFinite(A.x)&&Number.isFinite(A.y)):!0));return q.FeatureSetReaderJSON.fromFeatureSet(p,this.service)};return h._createClass(r)}(b),d=function(n){function r(){return n.apply(this,arguments)||this}h._inherits(r,n);r.prototype.executeQuery=async function(p,g){var {capabilities:u}=this.service;if(p.quantizationParameters&&!u.query.supportsQuantization){const x=p.clone();u=y.toQuantizationTransform(x.quantizationParameters);
x.quantizationParameters=null;p=await C.queryOptimizedFeatureSet(this.service.source,p,g);v.quantizeOptimizedFeatureSet(u,p);return q.FeatureSetReaderJSON.fromOptimizedFeatureSet(p,this.service)}p=await C.queryOptimizedFeatureSet(this.service.source,p,g);return q.FeatureSetReaderJSON.fromOptimizedFeatureSet(p,this.service)};return h._createClass(r)}(b);l.SourceAdapter=b;l.createSourceAdapter=function(n){const {capabilities:r}=n;return"ogc-source"===n.source?.type?new d(n):Array.isArray(n.source)?
new c(n):r.query.supportsFormatPBF&&D("featurelayer-pbf")?new f(n):new a(n)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/workers/Connection":function(){define("../../chunks/_rollupPluginBabelHelpers ../handleUtils ../Logger ../promiseUtils ../Queue ./RemoteClient".split(" "),function(l,h,D,B,y,v){return function(){function C(){this._inUseClients=[];this._clients=[];this._clientPromises=[];this._ongoingJobsQueue=new y}var t=C.prototype;t.destroy=function(){this.close()};
t.open=function(q,k){return new Promise((e,b)=>{let c=!0;const f=a=>{B.throwIfAborted(k.signal);c&&(c=!1,a())};this._clients.length=q.length;this._clientPromises.length=q.length;this._inUseClients.length=q.length;for(let a=0;a<q.length;++a){const d=q[a];B.isPromiseLike(d)?this._clientPromises[a]=d.then(n=>{this._clients[a]=new v(n,k,()=>this._ongoingJobsQueue.pop()??null);f(e);return this._clients[a]},()=>{f(b);return null}):(this._clients[a]=new v(d,k,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[a]=
Promise.resolve(this._clients[a]),f(e))}})};t.broadcast=function(q,k,e){const b=Array(this._clientPromises.length);for(let c=0;c<this._clientPromises.length;++c)b[c]=this._clientPromises[c].then(f=>f?.invoke(q,k,e));return b};t.close=function(){let q;for(;q=this._ongoingJobsQueue.pop();)q.resolver.reject(B.createAbortError(`Worker closing, aborting job calling '${q.methodName}'`));for(const k of this._clientPromises)k.then(e=>e?.close());this._clients.length=0;this._clientPromises.length=0;this._inUseClients.length=
0};t.invoke=function(q,k,e){let b;Array.isArray(e)?(D.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),b={transferList:e}):b=e;e=B.createResolver();this._ongoingJobsQueue.push({methodName:q,data:k,invokeOptions:b,resolver:e});for(q=0;q<this._clientPromises.length;q++)(k=this._clients[q])?k.jobAdded():this._clientPromises[q].then(c=>c?.jobAdded());return e.promise};t.on=function(q,k){return Promise.all(this._clientPromises).then(()=>
h.handlesGroup(this._clients.map(e=>e.on(q,k))))};t.openPorts=function(){return new Promise(q=>{const k=Array(this._clientPromises.length);let e=k.length;for(let b=0;b<this._clientPromises.length;++b)this._clientPromises[b].then(c=>{c&&(k[b]=c.openPort());0===--e&&q(k)})})};l._createClass(C,[{key:"closed",get:function(){return!this._clients||!this._clients.length}},{key:"test",get:function(){return{numClients:this._clients.length}}}]);return C}()})},"esri/core/Queue":function(){define(["../chunks/_rollupPluginBabelHelpers",
"./maybe","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(l,h,D,B){return function(y){function v(t=q=>q.values().next().value){this._peeker=t;this._observable=new B.SimpleObservable;this._items=new Set}var C=v.prototype;C.clear=function(){0!==this.length&&(this._items.clear(),this._observable.notify())};C.last=function(){if(0!==this.length){for(var t of this._items);return t}};C.peek=function(){if(0!==this.length)return this._peeker(this._items)};C.push=function(t){this.contains(t)||
(this._items.add(t),this._observable.notify())};C.contains=function(t){D.trackAccess(this._observable);return this._items.has(t)};C.pop=function(){if(0!==this.length){var t=this.peek();this._items.delete(h.assumeNonNull(t));this._observable.notify();return t}};C.popLast=function(){if(0!==this.length){var t=this.last();this._items.delete(h.assumeNonNull(t));this._observable.notify();return t}};C.remove=function(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())};C.filter=function(t){const q=
this.length;this._items.forEach(k=>{t(k)||this._items.delete(k)});q!==this._items.size&&this._observable.notify();return this};C[y]=function*(){D.trackAccess(this._observable);yield*this._items};l._createClass(v,[{key:"length",get:function(){D.trackAccess(this._observable);return this._items.size}}]);return v}(Symbol.iterator)})},"esri/layers/ogc/ogcFeatureUtils":function(){define("exports ../../geometry ../../request ../../core/Error ../../core/Logger ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../graphics/featureConversionUtils ../graphics/OptimizedFeatureSet ../graphics/sources/geojson/geojson ../graphics/sources/support/clientSideDefaults ../support/FieldsIndex ../support/fieldType ../../geometry/SpatialReference".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f){async function a(w,m,z){const {collection:A,layerDefinition:H,maxRecordCount:E,queryParameters:{apiKey:F,customParameters:J},spatialReference:L,supportedCrs:I}=w;({links:w}=A);var G=u(w,"items","application/geo+json")||u(w,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(null==G)throw new B("ogc-feature-layer:missing-items-page","Missing items url");const {geometry:K,num:P,start:Y,timeExtent:ea,where:aa}=m;if(m.objectIds)throw new B("ogc-feature-layer:query-by-objectids-not-supported",
"Queries with objectids are not supported");w=f.fromJSON(L);m=m.outSpatialReference??w;w=m.isWGS84?null:d(m,I);var T=p(K,I);const R=r(ea);({data:G}=await D(G.href,{...z,query:{...J,...T,crs:w,datetime:R,query:null!=aa&&aa&&"1\x3d1"!==aa?aa:null,limit:P??(null!=Y&&void 0!==Y?10:E),startindex:Y,token:F},headers:{accept:"application/geo+json"}}));z=!1;G.links&&(z=!!G.links.find(xa=>"next"===xa.rel));!z&&Number.isInteger(G.numberMatched)&&Number.isInteger(G.numberReturned)&&(z=G.numberReturned<G.numberMatched);
const {fields:W,geometryType:S,hasZ:Z,objectIdField:ca}=H;G=k.createOptimizedFeatures(G,{geometryType:S,hasZ:Z,objectIdField:ca});if(!w&&m.isWebMercator)for(var qa of G)null!=qa.geometry&&null!=S&&(T=t.convertToGeometry(qa.geometry,S,Z,!1),T.spatialReference=f.WGS84,qa.geometry=t.convertFromGeometry(C.project(T,m)));for(var ya of G)ya.objectId=ya.attributes[ca];qa=w||!w&&m.isWebMercator?m.toJSON():v.WGS84;ya=new q;ya.exceededTransferLimit=z;ya.features=G;ya.fields=W;ya.geometryType=S;ya.hasZ=Z;ya.objectIdFieldName=
ca;ya.spatialReference=qa;return ya}function d(w,m){const {isWebMercator:z,wkid:A}=w;return A?(w=z?m[3857]??m[102100]??m[102113]??m[900913]:m[w.wkid])?`${"http://www.opengis.net/def/crs/"}${w}`:null:null}function n(w){if(null==w)return"";const {xmin:m,ymin:z,xmax:A,ymax:H}=w;return`${m},${z},${A},${H}`}function r(w){if(null==w)return null;const {start:m,end:z}=w;return`${null!=m?m.toISOString():".."}/${null!=z?z.toISOString():".."}`}function p(w,m){if(null==w||"extent"!==w.type)return null;const {spatialReference:z}=
w;if(!z||z.isWGS84)return{bbox:n(w)};m=d(z,m);return null!=m?{bbox:n(w),"bbox-crs":m}:z.isWebMercator?{bbox:n(C.project(w,f.WGS84))}:null}function g(w){w=w.extent?.spatial;if(!w)return null;var m=w.bbox[0],z=4===m.length;w=m[0];const A=m[1],H=z?void 0:m[2],E=z?m[2]:m[3],F=z?m[3]:m[4];m=z?void 0:m[5];z=f.WGS84.toJSON();return{xmin:w,ymin:A,xmax:E,ymax:F,zmin:H,zmax:m,spatialReference:z}}function u(w,m,z){return w.find(A=>A.rel===m&&A.type===z)||w.find(A=>A.rel===m&&!A.type)}const x=y.getLogger("esri.layers.graphics.sources.ogcfeature");
l.crsDefault="http://www.opengis.net/def/crs/OGC/1.3/CRS84";l.crsPrefix="http://www.opengis.net/def/crs/";l.getCollectionDefinition=async function(w,m,z={},A=5){var {links:H}=w;H=u(H,"items","application/geo+json")||u(H,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(null==H)throw new B("ogc-feature-layer:missing-items-page","Missing items url");({data:z}=await D(H.href,{signal:z.signal,query:{limit:A,...z.customParameters,token:z.apiKey},headers:{accept:"application/geo+json"}}));
await k.validateGeoJSON(z);const E=k.inferLayerProperties(z,{geometryType:m.geometryType});z=m.fields||E.fields||[];A=null!=m.hasZ?m.hasZ:E.hasZ;H=E.geometryType;const F=m.objectIdField||E.objectIdFieldName||"OBJECTID";m=m.timeInfo;var J=z.find(({name:I})=>I===F);if(J)J.editable=!1,J.nullable=!1;else{if(!E.objectIdFieldType)throw new B("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");z.unshift({name:F,alias:F,type:"number"===E.objectIdFieldType?
"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}F!==E.objectIdFieldName&&(J=z.find(({name:I})=>I===E.objectIdFieldName))&&(J.type="esriFieldTypeInteger");z===E.fields&&0<E.unknownFields.length&&x.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:E.unknownFields}});for(var L of z){null==L.name&&(L.name=L.alias);null==L.alias&&(L.alias=L.name);"esriFieldTypeOID"!==L.type&&"esriFieldTypeGlobalID"!==
L.type&&(L.editable=null==L.editable||!!L.editable,L.nullable=null==L.nullable||!!L.nullable);if(!L.name)throw new B("ogc-feature-layer:invalid-field-name","field name is missing",{field:L});if(!c.kebabDict.jsonValues.includes(L.type))throw new B("ogc-feature-layer:invalid-field-type",`invalid type for field "${L.name}"`,{field:L});}m&&(L=new b(z),m.startTimeField&&((J=L.get(m.startTimeField))?(m.startTimeField=J.name,J.type="esriFieldTypeDate"):m.startTimeField=null),m.endTimeField&&((J=L.get(m.endTimeField))?
(m.endTimeField=J.name,J.type="esriFieldTypeDate"):m.endTimeField=null),m.trackIdField&&((L=L.get(m.trackIdField))?m.trackIdField=L.name:(m.trackIdField=null,x.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:m}}))),m.startTimeField||m.endTimeField||(x.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:m}}),m=null));L=H?e.createDrawingInfo(H):null;w=g(w);return{drawingInfo:L,
extent:w,geometryType:H,fields:z,hasZ:!!A,objectIdField:F,timeInfo:m}};l.getServerCollections=async function(w,m={}){({links:w}=w);w=u(w,"data","application/json")||u(w,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if(null==w)throw new B("ogc-feature-layer:missing-collections-page","Missing collections url");const {apiKey:z,customParameters:A,signal:H}=m;({data:m}=await D(w.href,{signal:H,headers:{accept:"application/json"},query:{...A,token:z}}));return m};l.getServerConformance=
async function(w,m={}){({links:w}=w);w=u(w,"conformance","application/json")||u(w,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if(null==w)throw new B("ogc-feature-layer:missing-conformance-page","Missing conformance url");const {apiKey:z,customParameters:A,signal:H}=m;({data:m}=await D(w.href,{signal:H,headers:{accept:"application/json"},query:{...A,token:z}}));return m};l.getServerLandingPage=async function(w,m={}){const {apiKey:z,customParameters:A,signal:H}=m;({data:w}=
await D(w,{signal:H,headers:{accept:"application/json"},query:{...A,token:z}}));return w};l.getServerOpenApi=async function(w,m={}){w=u(w.links,"service-desc","application/vnd.oai.openapi+json;version\x3d3.0");if(null==w)return x.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const {apiKey:z,customParameters:A,signal:H}=m;({data:m}=await D(w.href,{signal:H,headers:{accept:"application/vnd.oai.openapi+json;version\x3d3.0"},query:{...A,
token:z}}));return m};l.getSpatialReferenceWkid=function(w){w=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(w)?.groups;if(!w)return null;const {authority:m,code:z}=w;switch(m.toLowerCase()){case "ogc":switch(z.toLowerCase()){case "crs27":return f.GCS_NAD_1927.wkid;case "crs83":return 4269;case "crs84":case "crs84h":return f.WGS84.wkid;default:return null}case "esri":case "epsg":return w=Number.parseInt(z,10),Number.isNaN(w)?null:w;default:return null}};
l.queryFeatureSetJSON=async function(w,m,z){w=await a(w,m,z);return t.convertToFeatureSet(w)};l.queryOptimizedFeatureSet=a;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(l,h,D,B,y){function*v(p){switch(p.type){case "Feature":yield p;break;case "FeatureCollection":for(const g of p.features)g&&
(yield g)}}function*C(p){if(p)switch(p.type){case "Point":yield p.coordinates;break;case "LineString":case "MultiPoint":yield*p.coordinates;break;case "MultiLineString":case "Polygon":for(const g of p.coordinates)yield*g;break;case "MultiPolygon":for(const g of p.coordinates)for(const u of g)yield*u}}function*t(p,g={}){const {geometryType:u,objectIdField:x}=g;for(const w of p){const {geometry:m,properties:z,id:A}=w;if(m&&r[m.type]!==u)continue;p=z||{};let H=void 0;x&&(H=p[x],null==A||H||(p[x]=H=A));
yield new D.OptimizedFeature(m?b(new B,m,g):null,p,null,H??void 0)}}function q(p){for(const g of p)if(2<g.length)return!0;return!1}function k(p){let g=0;for(let u=0;u<p.length;u++){const x=p[u],w=p[(u+1)%p.length];g+=x[0]*w[1]-w[0]*x[1]}return 0>=g}function e(p){const g=p[0],u=p[p.length-1];g[0]===u[0]&&g[1]===u[1]&&g[2]===u[2]||p.push(g);return p}function b(p,g,u){switch(g.type){case "LineString":return a(p,g.coordinates,u),p;case "MultiLineString":for(const w of g.coordinates)a(p,w,u);return p;
case "MultiPoint":return a(p,g.coordinates,u),p;case "MultiPolygon":for(var x of g.coordinates)for(c(p,x[0],u),g=1;g<x.length;g++)f(p,x[g],u);return p;case "Point":return n(p,g.coordinates,u),p;case "Polygon":x=g.coordinates;c(p,x[0],u);for(g=1;g<x.length;g++)f(p,x[g],u);return p}}function c(p,g,u){g=e(g);k(g)?a(p,g,u):d(p,g,u)}function f(p,g,u){g=e(g);k(g)?d(p,g,u):a(p,g,u)}function a(p,g,u){for(const x of g)n(p,x,u);p.lengths.push(g.length)}function d(p,g,u){for(let x=g.length-1;0<=x;x--)n(p,g[x],
u);p.lengths.push(g.length)}function n(p,g,u){const [x,w,m]=g;p.coords.push(x,w);u.hasZ&&p.coords.push(m||0)}const r={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};l.createOptimizedFeatures=function(p,g){return Array.from(t(v(p),g))};l.getGeometryType=function(p){return r[p]};l.inferLayerProperties=function(p,g={}){const u=[];var x=new Set;const w=
new Set;var m=!1;let z=null,A=!1,H=void 0;({geometryType:g=null}=g);var E=!1;for(const F of v(p)){const {geometry:J,properties:L,id:I}=F;if(J&&(g||(g=r[J.type]),r[J.type]!==g))continue;m||(m=C(J),m=q(m));!A&&(A=null!=I)&&(H=typeof I,L&&(z=Object.keys(L).filter(G=>L[G]===I)));L&&z&&A&&null!=I&&(1<z.length?z=z.filter(G=>L[G]===I):1===z.length&&(z=L[z[0]]===I?z:[]));if(!E&&L){p=!0;for(const G in L){if(x.has(G))continue;E=L[G];if(null==E){p=!1;w.add(G);continue}a:switch(typeof E){case "string":E="esriFieldTypeString";
break a;case "number":E="esriFieldTypeDouble";break a;default:E="unknown"}if("unknown"===E){w.add(G);continue}w.delete(G);x.add(G);const K=y.normalizeFieldName(G);K&&u.push({name:K,alias:G,type:E})}E=p}}if(x=y.normalizeFieldName(1===z?.length&&z[0]||null)??void 0)for(const F of u)if(F.name===x&&y.isNumericField(F)){F.type="esriFieldTypeOID";break}return{fields:u,geometryType:g,hasZ:m,objectIdFieldName:x,objectIdFieldType:H,unknownFields:Array.from(w)}};l.validateGeoJSON=function(p){if(!p)throw new h("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==p.type&&"FeatureCollection"!==p.type)throw new h("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:p});({crs:p}=p);if(p){var g="string"===typeof p?p:"name"===p.type?p.properties.name:"EPSG"===p.type?p.properties.code:null,u=RegExp(".*(CRS84H?|4326)$","i");if(!g||!u.test(g))throw new h("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:p});}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(l,h,D,B,y){const v=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let C=1;l.createCapabilities=function(t,q){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,
supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:q,supportsDelete:q,supportsEditing:q,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:q,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:B.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:q,
supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}};l.createDefaultAttributesFunction=function(t,q){if(h("esri-csp-restrictions"))return()=>({[q]:null,...t});try{let k=`this.${q} = null;`;for(const b in t){const c=v.test(b)?`.${b}`:`["${b}"]`;k+=`this${c} = ${JSON.stringify(t[b])};`}const e=
(new Function(`\n      return class AttributesClass$${C++} {\n        constructor() {\n          ${k};\n        }\n      }\n    `))();return()=>new e}catch(k){return()=>({[q]:null,...t})}};l.createDefaultTemplate=function(t={}){return[{name:"New Feature",description:"",prototype:{attributes:D.clone(t)}}]};l.createDrawingInfo=function(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?y.defaultPointSymbolJSON:"esriGeometryPolyline"===t?y.defaultPolylineSymbolJSON:
y.defaultPolygonSymbolJSON}}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(l){const h=[252,146,31,255],D={type:"esriSMS",style:"esriSMSCircle",size:6,color:h,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},B={type:"esriSLS",style:"esriSLSSolid",width:.75,color:h};l.defaultColor=h;l.defaultOutlineColor=[153,153,153,255];l.defaultPointSymbolJSON=D;l.defaultPolygonSymbolJSON=
{type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};l.defaultPolylineSymbolJSON=B;l.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};l.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,
size:10.5};l.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};l.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(l,h){h=new h.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",
esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});l.kebabDict=h;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/query/operations/query":function(){define("exports ../../../request ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../operations/urlUtils ./pbfQueryUtils ./queryZScale".split(" "),function(l,h,D,B,y,v,C,t){function q(c,f){if(f&&"extent"===c.type)return`${c.xmin},${c.ymin},${c.xmax},${c.ymax}`;if(f&&"point"===c.type)return`${c.x},${c.y}`;c=c.toJSON();delete c.spatialReference;return JSON.stringify(c)}function k(c,f){const a=c.geometry,
d=c.toJSON();delete d.compactGeometryEnabled;delete d.defaultSpatialReferenceEnabled;let n,r,p;null!=a&&(r=a.spatialReference,p=a.spatialReference.wkid||JSON.stringify(a.spatialReference),d.geometryType=B.getJsonType(a),d.geometry=q(a,c.compactGeometryEnabled),d.inSR=p);d.groupByFieldsForStatistics&&(d.groupByFieldsForStatistics=d.groupByFieldsForStatistics.join(","));d.objectIds&&(d.objectIds=d.objectIds.join(","));d.orderByFields&&(d.orderByFields=d.orderByFields.join(","));!d.outFields||!d.returnDistinctValues&&
(f?.returnCountOnly||f?.returnExtentOnly||f?.returnIdsOnly)?delete d.outFields:d.outFields.includes("*")?d.outFields="*":d.outFields=d.outFields.join(",");d.outSR?(d.outSR=d.outSR.wkid||JSON.stringify(d.outSR),n=c.outSpatialReference):a&&(d.returnGeometry||d.returnCentroid)&&(d.outSR=d.inSR,n=r);d.returnGeometry&&delete d.returnGeometry;d.outStatistics&&(d.outStatistics=JSON.stringify(d.outStatistics));d.fullText&&(d.fullText=JSON.stringify(d.fullText));d.pixelSize&&(d.pixelSize=JSON.stringify(d.pixelSize));
d.quantizationParameters&&(c.defaultSpatialReferenceEnabled&&null!=r&&null!=c.quantizationParameters&&null!=c.quantizationParameters.extent&&r.equals(c.quantizationParameters.extent.spatialReference)&&delete d.quantizationParameters.extent.spatialReference,d.quantizationParameters=JSON.stringify(d.quantizationParameters));d.parameterValues&&(d.parameterValues=JSON.stringify(d.parameterValues));d.rangeValues&&(d.rangeValues=JSON.stringify(d.rangeValues));d.dynamicDataSource&&(d.layer=JSON.stringify({source:d.dynamicDataSource}),
delete d.dynamicDataSource);if(d.timeExtent){const {start:g,end:u}=d.timeExtent;if(null!=g||null!=u)d.time=g===u?g:`${null==g?"null":g},${null==u?"null":u}`;delete d.timeExtent}c.defaultSpatialReferenceEnabled&&null!=r&&null!=n&&r.equals(n)&&(d.defaultSR=d.inSR,delete d.inSR,delete d.outSR);return d}function e(c,f,a){return b(c,f,"pbf",a)}async function b(c,f,a,d={},n={}){c="string"===typeof c?D.urlToObject(c):c;var r=f.geometry?[f.geometry]:[];d.responseType="pbf"===a?"array-buffer":"json";r=(r=
await y.normalizeCentralMeridian(r,null,d))&&r[0];null!=r&&(f=f.clone(),f.geometry=r);a=v.mapParameters({...c.query,f:a,...n,...k(f,n)});return h(D.join(c.path,null==f.formatOf3DObjects||n.returnCountOnly||n.returnExtentOnly||n.returnIdsOnly?"query":"query3d"),{...d,query:{...a,...d.query}})}l.encodeGeometry=q;l.executeQuery=async function(c,f,a,d){c=null!=f.timeExtent&&f.timeExtent.isEmpty?{data:{features:[]}}:await b(c,f,"json",d);t.applyFeatureSetZUnitScaling(f,a,c.data);return c};l.executeQueryForCount=
function(c,f,a){return null!=f.timeExtent&&f.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):b(c,f,"json",a,{returnIdsOnly:!0,returnCountOnly:!0})};l.executeQueryForExtent=async function(c,f,a){if(null!=f.timeExtent&&f.timeExtent.isEmpty)return{data:{count:0,extent:null}};c=await b(c,f,"json",a,{returnExtentOnly:!0,returnCountOnly:!0});f=c.data;if(f.hasOwnProperty("extent"))return c;if(f.features)throw Error("Layer does not support extent calculation.");if(f.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");
return c};l.executeQueryForIds=function(c,f,a){return null!=f.timeExtent&&f.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):b(c,f,"json",a,{returnIdsOnly:!0})};l.executeQueryPBF=async function(c,f,a,d){if(null!=f.timeExtent&&f.timeExtent.isEmpty)return{data:a.createFeatureResult()};c=await e(c,f,d);c.data=C.parsePBFFeatureQuery(c.data,a);return c};l.executeQueryPBFBuffer=e;l.queryToQueryStringParameters=k;l.runQuery=b;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/operations/urlUtils":function(){define(["exports"],
function(l){function h(D){const B={};for(const y in D){if("declaredClass"===y)continue;const v=D[y];if(null!=v&&"function"!==typeof v)if(Array.isArray(v)){B[y]=[];for(let C=0;C<v.length;C++)B[y][C]=h(v[C])}else"object"===typeof v?v.toJSON&&(B[y]=JSON.stringify(v)):B[y]=v}return B}l.mapParameters=h;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(l,h){l.parsePBFFeatureQuery=
function(D,B){var y=h.parseFeatureQuery(D,B);D=y.queryResult.featureResult;B=y.queryResult.queryGeometry;y=y.queryResult.queryGeometryType;if(D&&D.features&&D.features.length&&D.objectIdFieldName){const v=D.objectIdFieldName;for(const C of D.features)C.attributes&&(C.objectId=C.attributes[v])}D&&(D.queryGeometry=B,D.queryGeometryType=y);return D};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define(["exports","../../../core/Error",
"../../../core/pbf","../../../layers/graphics/OptimizedGeometry","./pbfOptimizedFeatureSet"],function(l,h,D,B,y){function v(m){return m>=u.length?null:u[m]}function C(m,z,A){m=m.asUnsafe();for(A=z.createPointGeometry(A);m.next();)switch(m.tag()){case 3:var H=m.getUInt32();H=m.pos()+H;let E=0;for(;m.pos()<H;)z.addCoordinatePoint(A,m.getSInt64(),E++);break;default:m.skip()}return A}function t(m,z,A){m=m.asUnsafe();const H=z.createGeometry(A);for(A=2+(A.hasZ?1:0)+(A.hasM?1:0);m.next();)switch(m.tag()){case 2:var E=
m.getUInt32();E=m.pos()+E;for(var F=0;m.pos()<E;)z.addLength(H,m.getUInt32(),F++);break;case 3:E=m.getUInt32();E=m.pos()+E;F=0;for(z.allocateCoordinates(H);m.pos()<E;)z.addCoordinate(H,m.getSInt64(),F),F++,F===A&&(F=0);break;default:m.skip()}return H}function q(m){m=m.asUnsafe();const z=new B;let A="esriGeometryPoint";for(;m.next();)switch(m.tag()){case 2:var H=m.getUInt32();for(H=m.pos()+H;m.pos()<H;)z.lengths.push(m.getUInt32());break;case 3:H=m.getUInt32();for(H=m.pos()+H;m.pos()<H;)z.coords.push(m.getSInt64());
break;case 1:A=y.OPTIMIZED_GEOMETRY_TYPES[m.getEnum()];break;default:m.skip()}return{queryGeometry:z,queryGeometryType:A}}function k(m){for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:return m.getString();case 2:return m.getFloat();case 3:return m.getDouble();case 4:return m.getSInt32();case 5:return m.getUInt32();case 6:return m.getInt64();case 7:return m.getUInt64();case 8:return m.getSInt64();case 9:return m.getBool();default:return m.skip(),null}return null}function e(m){m=m.asUnsafe();const z=
{type:v(0)};for(;m.next();)switch(m.tag()){case 1:z.name=m.getString();break;case 2:z.type=v(m.getEnum());break;case 3:z.alias=m.getString();break;case 4:var A=m.getEnum();A=A>=x.length?null:x[A];z.sqlType=A;break;case 5:m.skip();break;case 6:z.defaultValue=m.getString();break;default:m.skip()}return z}function b(m){const z={};for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:z.name=m.getString();break;case 2:z.isSystemMaintained=m.getBool();break;default:m.skip()}return z}function c(m,z,A,H){const E=
z.createFeature(A);let F=0;for(;m.next();)switch(m.tag()){case 1:const J=H[F++].name;E.attributes[J]=m.processMessage(k);break;case 2:E.geometry=m.processMessageWithArgs(t,z,A);break;case 4:E.centroid=m.processMessageWithArgs(C,z,A);break;default:m.skip()}return E}function f(m){const z=[1,1,1,1];for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:z[0]=m.getDouble();break;case 2:z[1]=m.getDouble();break;case 4:z[2]=m.getDouble();break;case 3:z[3]=m.getDouble();break;default:m.skip()}return z}function a(m){const z=
[0,0,0,0];for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:z[0]=m.getDouble();break;case 2:z[1]=m.getDouble();break;case 4:z[2]=m.getDouble();break;case 3:z[3]=m.getDouble();break;default:m.skip()}return z}function d(m){const z={originPosition:0>=w.length?null:w[0]};for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:var A=m.getEnum();z.originPosition=A>=w.length?null:w[A];break;case 2:z.scale=m.processMessage(f);break;case 3:z.translate=m.processMessage(a);break;default:m.skip()}return z}function n(m){const z=
{};for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:z.shapeAreaFieldName=m.getString();break;case 2:z.shapeLengthFieldName=m.getString();break;case 3:z.units=m.getString();break;default:m.skip()}return z}function r(m,z){for(z=z.createSpatialReference();m.next();)switch(m.tag()){case 1:z.wkid=m.getUInt32();break;case 5:z.wkt=m.getString();break;case 2:z.latestWkid=m.getUInt32();break;case 3:z.vcsWkid=m.getUInt32();break;case 4:z.latestVcsWkid=m.getUInt32();break;default:m.skip()}return z}function p(m,
z){const A=z.createFeatureResult();m=m.asUnsafe();A.geometryType=0>=z.geometryTypes.length?null:z.geometryTypes[0];let H=!1;for(;m.next();)switch(m.tag()){case 1:A.objectIdFieldName=m.getString();break;case 3:A.globalIdFieldName=m.getString();break;case 4:A.geohashFieldName=m.getString();break;case 5:A.geometryProperties=m.processMessage(n);break;case 7:var E=m.getEnum();A.geometryType=E>=z.geometryTypes.length?null:z.geometryTypes[E];break;case 8:A.spatialReference=m.processMessageWithArgs(r,z);
break;case 10:A.hasZ=m.getBool();break;case 11:A.hasM=m.getBool();break;case 12:A.transform=m.processMessage(d);break;case 9:E=m.getBool();A.exceededTransferLimit=E;break;case 13:z.addField(A,m.processMessage(e));break;case 15:H||(z.prepareFeatures(A),H=!0);z.addFeature(A,m.processMessageWithArgs(c,z,A,A.fields));break;case 2:A.uniqueIdField=m.processMessage(b);break;default:m.skip()}z.finishFeatureResult(A);return A}function g(m,z){const A={};let H=null;for(;m.next();)switch(m.tag()){case 4:H=m.processMessageWithArgs(q);
break;case 1:A.featureResult=m.processMessageWithArgs(p,z);break;default:m.skip()}null!=H&&A.featureResult&&z.addQueryGeometry(A,H);return A}const u="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML esriFieldTypeBigInteger esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "),
x="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),w=["upperLeft","lowerLeft"];l.parseFeatureQuery=function(m,z){try{const A=new D(new Uint8Array(m),new DataView(m));
for(m={};A.next();)switch(A.tag()){case 2:m.queryResult=A.processMessageWithArgs(g,z);break;default:A.skip()}return m}catch(A){throw new h("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:A});}};l.parseField=e;l.parseFieldType=v;l.parseTransform=d;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(l,h,D,B,y,v,C){const t=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let q=function(){function k(b){this._options=b;this.geometryTypes=t;this._vertexDimension=this._coordinatePtr=0}var e=k.prototype;e.createFeatureResult=function(){return new v};e.prepareFeatures=function(b){this._vertexDimension=2;b.hasZ&&this._vertexDimension++;b.hasM&&this._vertexDimension++};e.finishFeatureResult=function(b){if(b&&b.features&&b.hasZ&&this._options.sourceSpatialReference&&
b.spatialReference&&!B.equals(b.spatialReference,this._options.sourceSpatialReference)&&!b.spatialReference.vcsWkid){var c=D.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference),f=D.getMetersPerVerticalUnitForSR(b.spatialReference);c/=f;if(1!==c)for(const a of b.features)if(y.hasGeometry(a))for(b=a.geometry.coords,f=2;f<b.length;f+=3)b[f]*=c}};e.addFeature=function(b,c){b.features.push(c)};e.createFeature=function(){return new y.OptimizedFeature};e.createSpatialReference=function(){return{wkid:0}};
e.createGeometry=function(){return new C};e.addField=function(b,c){b.fields.push(c)};e.allocateCoordinates=function(b){b.coords.length=b.lengths.reduce((c,f)=>c+f,0)*this._vertexDimension;this._coordinatePtr=0};e.addCoordinate=function(b,c){b.coords[this._coordinatePtr++]=c};e.addCoordinatePoint=function(b,c){b.coords.push(c)};e.addLength=function(b,c){b.lengths.push(c)};e.addQueryGeometry=function(b,c){b.queryGeometry=c.queryGeometry;b.queryGeometryType=c.queryGeometryType};e.createPointGeometry=
function(){return new C};return h._createClass(k)}();l.OPTIMIZED_GEOMETRY_TYPES=t;l.OptimizedFeatureSetParserContext=q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","../../../geometry/support/zscale"],function(l,h){l.applyFeatureSetZUnitScaling=function(D,B,y){if(y&&y.features&&y.hasZ&&(D=h.getGeometryZScaler(y.geometryType,B,D.outSpatialReference),null!=D))for(const v of y.features)D(v.geometry)};Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/FeatureSetReaderJSON":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/support/FieldsIndex ./FeatureSetReader".split(" "),function(l,h,D,B,y,v){function C({coords:q,lengths:k}){let e=0;for(const b of k){for(k=1;k<b;k++)q[2*(e+k)]+=q[2*(e+k)-2],q[2*(e+k)+1]+=q[2*(e+k)-1];e+=
b}}let t=function(q){function k(b,c,f){b=q.call(this,b,f)||this;b._exceededTransferLimit=!1;b._featureIndex=-1;b._fieldsIndex=null;b._geometryType=f?.geometryType;b._features=c;return b}h._inherits(k,q);k.fromFeatures=function(b,c){const {objectIdField:f,geometryType:a}=c,d=D.convertFromFeatures([],b,a,!1,!1,f);for(let n=0;n<d.length;n++)d[n].displayId=b[n].displayId;return k.fromOptimizedFeatures(d,c)};k.fromFeatureSet=function(b,c){b=D.convertFromFeatureSet(b,c.objectIdField);return k.fromOptimizedFeatureSet(b,
c)};k.fromOptimizedFeatureSet=function(b,c){var {features:f}=b;f=k.fromOptimizedFeatures(f,c);f._exceededTransferLimit=b.exceededTransferLimit;f._transform=b.transform;f._fieldsIndex=new y(c.fields);return f};k.fromOptimizedFeatures=function(b,c,f){const a=v.FeatureSetReader.createInstance();b=new k(a,b,c);b._fieldsIndex=new y(c.fields);b._transform=f;return b};var e=k.prototype;e.removeIds=function(b){const c=new Set(b);this._features=this._features.filter(f=>!(null!=f.objectId&&c.has(f.objectId)))};
e.append=function(b){for(const c of b)this._features.push(c)};e.getSize=function(){return this._features.length};e.getCursor=function(){return this.copy()};e.getQuantizationTransform=function(){return this._transform};e.getAttributeHash=function(){let b="";for(const c in this._current.attributes)b+=this._current.attributes[c];return b};e.getIndex=function(){return this._featureIndex};e.setIndex=function(b){this._featureIndex=b};e.getObjectId=function(){return this._current?.objectId};e.getDisplayId=
function(){return this._current.displayId};e.setDisplayId=function(b){this._current.displayId=b};e.getGroupId=function(){return this._current.groupId};e.setGroupId=function(b){this._current.groupId=b};e.copy=function(){const b=new k(this.instance,this._features,this.fullSchema());this.copyInto(b);return b};e.next=function(){for(;++this._featureIndex<this._features.length&&!this._getExists(););return this._featureIndex<this._features.length};e.readLegacyFeature=function(){return D.convertToFeature(this._current,
this.geometryType,this.hasZ,this.hasM)};e.readOptimizedFeature=function(){return this._current};e.readLegacyPointGeometry=function(){return this.readGeometry()?{x:this.getX(),y:this.getY()}:null};e.readLegacyGeometry=function(){const b=this.readUnquantizedGeometry();return D.convertToGeometry(b,this.geometryType,this.hasZ,this.hasM)};e.readLegacyCentroid=function(){const b=this.readCentroid();return null==b?null:{x:b.coords[0]*this._sx+this._tx,y:b.coords[1]*this._sy+this._ty}};e.readGeometryArea=
function(){return B.hasGeometry(this._current)?D.getQuantizedArea(this._current.geometry,2):0};e.readUnquantizedGeometry=function(){var b=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!b)return b;b=b.clone();C(b);return b};e.readHydratedGeometry=function(){var b=this._current.geometry;if(null==b)return null;b=b.clone();null!=this._transform&&D.unquantizeOptimizedGeometry(b,b,this.hasZ,this.hasM,this._transform);return b};e.getXHydrated=function(){if(!B.hasGeometry(this._current))return 0;
const b=this._current.geometry.coords[0],c=this.getQuantizationTransform();return null==c?b:b*c.scale[0]+c.translate[0]};e.getYHydrated=function(){if(!B.hasGeometry(this._current))return 0;const b=this._current.geometry.coords[1],c=this.getQuantizationTransform();return null==c?b:c.translate[1]-b*c.scale[1]};e.getX=function(){return B.hasGeometry(this._current)?this._current.geometry.coords[0]*this._sx+this._tx:0};e.getY=function(){return B.hasGeometry(this._current)?this._current.geometry.coords[1]*
this._sy+this._ty:0};e.readGeometry=function(){if(!B.hasGeometry(this._current)){if(null!=this._current.centroid){const [f,a]=this._current.centroid.coords;return this.createQuantizedExtrudedQuad(f,a)}return null}const b=this._current.geometry.clone();if(b.isPoint)return b.coords[0]=b.coords[0]*this._sx+this._tx,b.coords[1]=b.coords[1]*this._sy+this._ty,b;let c=0;for(const f of b.lengths)b.coords[2*c]=b.coords[2*c]*this._sx+this._tx,b.coords[2*c+1]=b.coords[2*c+1]*this._sy+this._ty,c+=f;return b};
e.readCentroid=function(){return B.hasGeometry(this._current)?this._computeCentroid():this._current.centroid};e._readAttribute=function(b,c){var f=this._fieldsIndex.get(b);if(f){f=this._current.attributes[f.name];if(null==f)return f;"esriFieldTypeTimestampOffset"===this.fields.get(b)?.type&&(f=this.parseTimestampOffset(f));return c&&this.fields.isDateField(b)?new Date(f):f}};e.copyInto=function(b){h._get(h._getPrototypeOf(k.prototype),"copyInto",this).call(this,b);b._featureIndex=this._featureIndex;
b._transform=this._transform;b._fieldsIndex=this._fieldsIndex};e._readAttributes=function(){return this._current.attributes};h._createClass(k,[{key:"fields",get:function(){return this._fieldsIndex}},{key:"_current",get:function(){return this._features[this._featureIndex]}},{key:"geometryType",get:function(){return this._geometryType}},{key:"hasFeatures",get:function(){return!!this._features.length}},{key:"hasNext",get:function(){return this._featureIndex+1<this._features.length}},{key:"exceededTransferLimit",
get:function(){return this._exceededTransferLimit}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}}]);return k}(v.FeatureSetReader);l.FeatureSetReaderJSON=t;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/FeatureSetReaderPBF":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/pbf ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ./FeatureSetReader ./FeatureSetReaderPBFHeader".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){function b(n){if(n<=a.small.delta.length)return a.small;if(n<=a.large.delta.length)return a.large;a.large.delta=new Int32Array(Math.round(1.25*n));a.large.decoded=new Int32Array(Math.round(1.25*n));return a.large}function c(n){var r=n.getLength();for(r=n.pos()+r;n.pos()<r&&n.next();)switch(n.tag()){case 1:return n.getString();case 2:return n.getFloat();case 3:return n.getDouble();case 4:return n.getSInt32();case 5:return n.getUInt32();case 6:return n.getInt64();case 7:return n.getUInt64();
case 8:return n.getSInt64();case 9:return n.getBool();default:return n.skip(),null}return null}function f(n,r,p,g){return 0===n*g-p*r&&0<n*p+r*g}const a={small:{delta:new Int32Array(128),decoded:new Int32Array(128)},large:{delta:new Int32Array(128E3),decoded:new Int32Array(128E3)}};let d=function(n){function r(g,u,x,w){g=n.call(this,g,w)||this;g._hasNext=!1;g._isPoints=!1;g._featureIndex=-1;g._featureOffset=0;g._cache={area:0,unquantGeometry:void 0,geometry:void 0,centroid:void 0,legacyFeature:void 0,
optFeature:void 0};g._geometryType=w.geometryType;g._reader=u;g._header=x;g._hasNext=x.hasFeatures;g._isPoints="esriGeometryPoint"===w.geometryType;return g}h._inherits(r,n);r.fromBuffer=function(g,u,x=!1){var w=u.geometryType;a:{try{const A=new v(new Uint8Array(g),new DataView(g));for(;A.next();)switch(A.tag()){case 2:b:{for(var m=A.getMessage();m.next();)switch(m.tag()){case 1:var z=m.getMessage();break b;default:m.skip()}z=null}break a;default:A.skip()}}catch(A){g=new D("query:parsing-pbf","Error while parsing FeatureSet PBF payload",
{error:A}),B.getLogger("esri.view.2d.layers.features.support.FeatureSetReaderPBF").error(g)}z=null}g=z;x=e.parseHeader(g,"esriGeometryPoint"===w,x);w=k.FeatureSetReader.createInstance();return new r(w,g,x,u)};var p=r.prototype;p.getSize=function(){return this._size};p.getQuantizationTransform=function(){return this._header.transform};p.getCursor=function(){return this.copy()};p.getIndex=function(){return this._featureIndex};p.setIndex=function(g){this._cache.area=0;this._cache.unquantGeometry=void 0;
this._cache.geometry=void 0;this._cache.centroid=void 0;this._cache.legacyFeature=void 0;this._cache.optFeature=void 0;this._featureIndex=g};p.getAttributeHash=function(){let g="";for(const u of this._header.fields.fields)g+=this._readAttributeAtIndex(u.index)+".";return g};p.getObjectId=function(){return this._readAttributeAtIndex(this._header.objectIdFieldIndex)};p.getDisplayId=function(){return this._header.displayIds[this._featureIndex]};p.setDisplayId=function(g){this._header.displayIds[this._featureIndex]=
g};p.getGroupId=function(){return this._header.groupIds[this._featureIndex]};p.setGroupId=function(g){this._header.groupIds[this._featureIndex]=g};p.readLegacyFeature=function(){if(void 0===this._cache.legacyFeature){var g=this.readCentroid();g={attributes:this.readAttributes(),geometry:this._isPoints?this.readLegacyPointGeometry():this.readLegacyGeometry(),centroid:(g&&{x:g.coords[0],y:g.coords[1]})??null};return this._cache.legacyFeature=g}return this._cache.legacyFeature};p.readOptimizedFeature=
function(){if(void 0===this._cache.optFeature){const g=new t.OptimizedFeature(this.readGeometry(),this.readAttributes(),this.readCentroid());g.objectId=this.getObjectId();g.displayId=this.getDisplayId();return this._cache.optFeature=g}return this._cache.optFeature};p.getXHydrated=function(){const g=this._header.centroid[2*this._featureIndex],u=this.getQuantizationTransform();return null==u?g:g*u.scale[0]+u.translate[0]};p.getYHydrated=function(){const g=this._header.centroid[2*this._featureIndex+
1],u=this.getQuantizationTransform();return null==u?g:u.translate[1]-g*u.scale[1]};p.getX=function(){return this._header.centroid[2*this._featureIndex]*this._sx+this._tx};p.getY=function(){return this._header.centroid[2*this._featureIndex+1]*this._sy+this._ty};p.readLegacyPointGeometry=function(){const g=this.getX(),u=this.getY();return{x:g,y:u}};p.readLegacyGeometry=function(g){g=this.readUnquantizedGeometry(g);return C.convertToGeometry(g,this.geometryType,!1,!1)};p.readLegacyCentroid=function(){const g=
this.readCentroid();if(!g)return null;const [u,x]=g.coords;return{x:u,y:x}};p.readGeometryArea=function(){this._cache.area||this.readGeometry(!0);return this._cache.area};p.readUnquantizedGeometry=function(g=!1){if(void 0===this._cache.unquantGeometry){g=this.readGeometry(g);if(!g)return this._cache.unquantGeometry=void 0,null;var u=b(g.coords.length).decoded;g=g.clone(u);u=g.coords;let x=0;for(const w of g.lengths){for(let m=1;m<w;m++){const z=2*(x+m),A=2*(x+m-1);u[z]+=u[A];u[z+1]+=u[A+1]}x+=w}return this._cache.unquantGeometry=
g}return this._cache.unquantGeometry};p.readHydratedGeometry=function(){if(this._isPoints){if(268435455===this._header.centroid[2*this._featureIndex])return null;var g=this.getXHydrated(),u=this.getYHydrated();return new q([],[g,u])}g=this.readGeometry();if(!g)return null;g=g.clone();u=this.getQuantizationTransform();null!=u&&C.unquantizeOptimizedGeometry(g,g,this.hasZ,this.hasM,u);return g};p.readGeometry=function(g=!1){if(void 0===this._cache.geometry){var u=null;if(this._isPoints){if(268435455===
this._header.centroid[2*this._featureIndex])return null;g=this.getX();u=this.getY();u=new q([],[g,u])}else{const x=this._header.offsets.geometry[this._featureIndex],w=this._reader;if(0===x){g=this._readServerCentroid();if(!g)return null;const [m,z]=g.coords;return this.createQuantizedExtrudedQuad(m,z)}w.move(x);try{if(u=g?this._parseGeometryForDisplay(w):this._parseGeometry(w),null===u){const m=this._readServerCentroid();if(!m)return null;const [z,A]=m.coords;return this.createQuantizedExtrudedQuad(z,
A)}}catch(m){return console.error("Failed to parse geometry!",m),null}}return this._cache.geometry=u}return this._cache.geometry};p.readCentroid=function(){if(void 0===this._cache.centroid){let g=void 0;(g=this._computeCentroid())||(g=this._readServerCentroid());this._cache.centroid=g??void 0;return g??null}return this._cache.centroid};p.copy=function(){var g=this._reader.clone();g=new r(this.instance,g,this._header,this.fullSchema());this.copyInto(g);return g};p.next=function(){this._cache.area=
0;this._cache.unquantGeometry=void 0;this._cache.geometry=void 0;this._cache.centroid=void 0;this._cache.legacyFeature=void 0;for(this._cache.optFeature=void 0;++this._featureIndex<this._size&&!this._getExists(););return this._featureIndex<this._size};p._readAttribute=function(g,u){const x=this._header.fields.get(g);if(null!=x){var w=this._readAttributeAtIndex(x.index);"esriFieldTypeTimestampOffset"===this.fields.get(g)?.type&&(w=this.parseTimestampOffset(w));g=this._header.fields.isDateField(x.name);
return u&&null!=w?g?new Date(w):w:w}};p._readAttributes=function(){const g={};for(const u of this._header.fields.fields)g[u.name]=this._readAttributeAtIndex(u.index);return g};p.copyInto=function(g){h._get(h._getPrototypeOf(r.prototype),"copyInto",this).call(this,g);g._featureIndex=this._featureIndex;g._featureOffset=this._featureOffset;g._hasNext=this._hasNext};p._readAttributeAtIndex=function(g){const u=this._reader;u.move(this._header.offsets.attributes[this._featureIndex*this._header.fieldCount+
g]);return c(u)};p._readServerCentroid=function(){const g=this._header.centroid[2*this._featureIndex]+this._tx;return 268435455===g?null:new q([],[g,this._header.centroid[2*this._featureIndex+1]+this._ty])};p._parseGeometry=function(g){g=g.asUnsafe();var u=g.getLength();u=g.pos()+u;const x=[],w=[];for(;g.pos()<u&&g.next();)switch(g.tag()){case 2:var m=g.getUInt32();for(m=g.pos()+m;g.pos()<m;)w.push(g.getUInt32());break;case 3:m=g.getUInt32();m=g.pos()+m;x.push(g.getSInt32()+this._tx);x.push(g.getSInt32()+
this._ty);this.hasZ&&g.getSInt32();for(this.hasM&&g.getSInt32();g.pos()<m;)x.push(g.getSInt32()),x.push(g.getSInt32()),this.hasZ&&g.getSInt32(),this.hasM&&g.getSInt32();break;default:g.skip()}return new q(w,x)};p._parseGeometryForDisplay=function(g){g=g.asUnsafe();var u=g.getLength();const x=g.pos()+u,w=[];u=[];let m=0,z=0;var A=null;let H=0;const E="esriGeometryPolygon"===this.geometryType;for(;g.pos()<x&&g.next();)switch(g.tag()){case 2:A=g.getUInt32();for(A=g.pos()+A;g.pos()<A;){var F=g.getUInt32();
w.push(F);m+=F}A=b(2*m).delta;break;case 3:g.getUInt32();F=2+(this.hasZ?1:0)+(this.hasM?1:0);y.assertIsSome(A);for(var J of w)if(z+F*J>A.length)for(var L=0;L<J;L++)g.getSInt32(),g.getSInt32(),this.hasZ&&g.getSInt32(),this.hasM&&g.getSInt32();else if(E){L=this.getAreaSimplificationThreshold(J,this._header.vertexCount);var I=2,G=1,K=g.getSInt32(),P=g.getSInt32();A[z++]=K;A[z++]=P;this.hasZ&&g.getSInt32();this.hasM&&g.getSInt32();var Y=g.getSInt32(),ea=g.getSInt32();this.hasZ&&g.getSInt32();for(this.hasM&&
g.getSInt32();I<J;){var aa=g.getSInt32();let T=g.getSInt32();this.hasZ&&g.getSInt32();this.hasM&&g.getSInt32();const R=K+Y,W=P+ea,S=R+aa,Z=W+T;.5*Math.abs(K*W+R*Z+S*P-K*Z-R*P-S*W)>=L?(H+=-.5*(R-K)*(W+P),1<G&&f(A[z-2],A[z-1],Y,ea)?(A[z-2]+=Y,A[z-1]+=ea):(A[z++]=Y,A[z++]=ea,G++),K=R,P=W):(aa+=Y,T+=ea);Y=aa;ea=T;I++}3>G?z-=2*G:(H+=-.5*(K+Y-K)*(P+ea+P),f(A[z-2],A[z-1],Y,ea)?(A[z-2]+=Y,A[z-1]+=ea,u.push(G)):(A[z++]=Y,A[z++]=ea,u.push(++G)))}else{L=0;I=g.getSInt32();G=g.getSInt32();this.hasZ&&g.getSInt32();
this.hasM&&g.getSInt32();A[z++]=I;A[z++]=G;L+=1;for(K=1;K<J;K++)P=g.getSInt32(),Y=g.getSInt32(),ea=I+P,aa=G+Y,H+=-.5*(ea-I)*(aa+G),this.hasZ&&g.getSInt32(),this.hasM&&g.getSInt32(),2<K&&f(A[z-2],A[z-1],P,Y)?(A[z-2]+=P,A[z-1]+=Y):(A[z++]=P,A[z++]=Y,L+=1),I=ea,G=aa;u.push(L)}break;default:g.skip()}this._cache.area=H;if(!u.length)return null;if(this._tx||this._ty){J=0;y.assertIsSome(A);for(const T of u)A[2*J]+=this._tx,A[2*J+1]+=this._ty,J+=T}return new q(u,A)};h._createClass(r,[{key:"fields",get:function(){return this._header.fields}},
{key:"geometryType",get:function(){return this._geometryType}},{key:"_size",get:function(){return this._header.featureCount}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}},{key:"stride",get:function(){return 2+(this.hasZ?1:0)+(this.hasM?1:0)}},{key:"hasFeatures",get:function(){return this._header.hasFeatures}},{key:"hasNext",get:function(){return this._hasNext}},{key:"exceededTransferLimit",get:function(){return this._header.exceededTransferLimit}}]);return r}(k.FeatureSetReader);
l.FeatureSetReaderPBF=d;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/FeatureSetReaderPBFHeader":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../../../../../layers/support/FieldsIndex","../../../../../rest/query/operations/pbfFeatureServiceParser"],function(l,h,D,B,y){let v=h._createClass(function(){this.exceededTransferLimit=this.hasFeatures=!1;this.vertexCount=this.objectIdFieldIndex=
this.featureCount=this.fieldCount=0;this.offsets={attributes:[],geometry:[]};this.centroid=[]});l.FeatureSetHeader=v;l.parseHeader=function(C,t,q=!1){C=C.asUnsafe();const k=C.pos(),e=new v;let b=0,c=0,f=null,a=null,d=null,n=!1;const r=[];for(;C.next();)switch(C.tag()){case 1:f=C.getString();break;case 3:a=C.getString();break;case 12:d=C.processMessage(y.parseTransform);break;case 9:e.exceededTransferLimit=C.getBool();if(e.exceededTransferLimit){e.offsets.geometry=q?new Float64Array(8E3):new Int32Array(8E3);
e.centroid=q?new Float64Array(16E3):new Int32Array(16E3);for(var p=0;p<e.centroid.length;p++)e.centroid[p]=268435455}break;case 13:p=C.processMessage(y.parseField);p.index=b++;r.push(p);break;case 15:p=C.getLength();p=C.pos()+p;if(!e.exceededTransferLimit){var g=e.centroid;e.offsets.geometry.push(0);g.push(268435455);g.push(268435455)}!n&&e.exceededTransferLimit&&(n=!0,e.offsets.attributes=q?new Float64Array(8E3*b):new Uint32Array(8E3*b));for(g=c*b;C.pos()<p&&C.next();)switch(C.tag()){case 1:n?e.offsets.attributes[g++]=
C.pos():e.offsets.attributes.push(C.pos());var u=C.getLength();C.skipLen(u);break;case 2:if(t)for(u=C.getLength(),u=C.pos()+u;C.pos()<u&&C.next();)switch(C.tag()){case 3:C.getUInt32();var x=C.getSInt64(),w=C.getSInt64();e.centroid[2*c]=x;e.centroid[2*c+1]=w;break;default:C.skip()}else e.offsets.geometry[c]=C.pos(),u=C.getLength(),e.vertexCount+=u,C.skipLen(u);break;case 4:u=C.getLength();for(u=C.pos()+u;C.pos()<u&&C.next();)switch(C.tag()){case 3:C.getUInt32();x=C.getSInt64();w=C.getSInt64();e.centroid[2*
c]=x;e.centroid[2*c+1]=w;break;default:C.skip()}break;default:C.skip()}c++;e.hasFeatures=!0;break;default:C.skip()}t=f||a;if(!t)throw new D("FeatureSet has no objectId or globalId field name");e.fields=new B(r);e.featureCount=c;e.fieldCount=b;e.objectIdFieldIndex=e.fields.get(t)?.index;e.transform=d;e.displayIds=new Uint32Array(e.featureCount);e.groupIds=new Uint16Array(e.featureCount);C.move(k);return e};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/sources/DataTileSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../TimeExtent ../../../../../core/Evented ../../../../../core/has ../../../../../core/promiseUtils ../../../../../core/accessorSupport/diffUtils ../../../../../core/support/WatchUpdatingTracking ../../../../../rest/support/Query ./DataTileSubscription ../support/UpdateToken".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){function b(f,a){const d=new Set;f&&f.forEach(n=>d.add(n));a&&a.forEach(n=>d.add(n));return d.has("*")?["*"]:Array.from(d)}let c=function(){function f(d){this.updatingHandles=new t.WatchUpdatingTracking;this.events=new B;this._resolver=v.createResolver();this._didEdit=!1;this._subscriptions=new Map;this._outSR=d.outSR;this._serviceInfo=d.serviceInfo;this._onTileUpdateMessage=d.onMessage}var a=f.prototype;a.destroy=function(){for(const d of this._subscriptions.values())d.abort();
this.updatingHandles.destroy()};a._onMessage=async function(d){const n=this._subscriptions.get(d.id);if(n)return d={...d,remove:d.remove??[],status:d.status??e.UpdateToken.empty()},v.ignoreAbortErrors(this._onTileUpdateMessage(d,n.options))};a.update=function(d,n){var r=n.fields.length;n.outFields=b(this._schema?.outFields,n.outFields);n.outFields=n.outFields.length>=.75*r?["*"]:n.outFields;n.outFields.sort();if(r=C.diff(this._schema,n)){y("esri-2d-update-debug")&&console.debug("Applying Update - Source:",
r);var p={returnCentroid:"esriGeometryPolygon"===this._serviceInfo.geometryType,returnGeometry:!0,timeReferenceUnknownClient:"stream"!==this._serviceInfo.type&&this._serviceInfo.timeReferenceUnknownClient,outFields:n.outFields,outSpatialReference:this._outSR,orderByFields:["orderByFields"in this._serviceInfo&&this._serviceInfo.orderByFields?this._serviceInfo.orderByFields:this._serviceInfo.objectIdField+" ASC"],where:n.definitionExpression||"1\x3d1",gdbVersion:n.gdbVersion,historicMoment:n.historicMoment,
timeExtent:n.timeExtent?D.fromJSON(n.timeExtent):null},g=this._schema&&C.hasDiff(r,"outFields");this._schema&&C.hasDiffAny(r,["timeExtent","definitionExpression","gdbVersion","historicMoment","customParameters"])&&(d.why.mesh.push("Layer filter and/or custom parameters changed"),d.why.source.push("Layer filter and/or custom parameters changed"),d.mesh=!0,d.source=!0,d.queryFilter=!0);g&&(d.why.source.push("Layer required fields changed"),d.source=!0);C.diff(p,this._queryInfo)&&(this._queryInfo=p);
this._schema=n;this._resolver.resolve()}};a.whenInitialized=function(){return this._resolver.promise};a.applyUpdate=async function(d){d.queryFilter||d.source&&this._didEdit?(this.refresh(d.version),this._didEdit=!1):(this._subscriptions.forEach(n=>n.applyUpdate(d)),await this.resend())};a.refresh=function(d,n){for(const r of this._tiles())this.unsubscribe(r),this.subscribe(r,d)};a.subscribe=function(d,n){n=new k.DataTileSubscription(d,n);this._subscriptions.set(d.id,n);this.updatingHandles.addPromise(n.done)};
a.unsubscribe=function(d){const n=this.getSubscription(d.id);null!=n&&n.abort();this._subscriptions.delete(d.id)};a.createQuery=function(d={}){return new q({...this._queryInfo,historicMoment:this._queryInfo.historicMoment?new Date(this._queryInfo.historicMoment):null,...d})};a.getSubscription=function(d){return this._subscriptions.has(d)?this._subscriptions.get(d):null};a.queryLastEditDate=async function(){throw Error("Service does not support query type");};a.query=async function(d,n){throw Error("Service does not support query");
};a._tiles=function*(){const d=Array.from(this._subscriptions.values());for(const n of d)yield n.tile};a.edit=async function(d,n){var r=Array.from(this._subscriptions.values());const p=r.map(({tile:g})=>g);for(const g of r)g.removeIds(n);d.length&&(r=p.map(g=>{const u=this.createTileQuery(g);u.objectIds=d;return{tile:g,query:u}}).map(async({tile:g,query:u})=>({tile:g,result:await this.query(u,{query:{tile:y("esri-tiles-debug")?g.id.replaceAll("/","."):void 0}}),query:u})),r=(await v.eachAlwaysValues(r)).map(async({tile:g,
result:u})=>{(u.hasFeatures||n.length||d.length)&&(g=this._subscriptions.get(g.key.id))&&g.edit(u,d)}),await v.eachAlways(r));this._didEdit=!0};h._createClass(f,[{key:"subscriptions",get:function(){return this._subscriptions.values()}}]);return f}();l.DataTileSource=c;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/arrayUtils ./core/has ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){var c;D=c=function(d){function n(p){p=d.call(this,p)||this;p.end=null;p.start=null;return p}l._inherits(n,d);var r=n.prototype;r.readEnd=function(p,g){return null!=g.end?new Date(g.end):null};r.writeEnd=function(p,g){g.end=p?p.getTime():null};r.readStart=function(p,g){return null!=g.start?new Date(g.start):null};r.writeStart=function(p,g){g.start=p?p.getTime():null};r.clone=function(){return new c({end:this.end,start:this.start})};r.equals=function(p){if(!p)return!1;
const g=null!=this.start?this.start.getTime():this.start,u=null!=this.end?this.end.getTime():this.end,x=null!=p.start?p.start.getTime():p.start;p=null!=p.end?p.end.getTime():p.end;return g===x&&u===p};r.expandTo=function(p){if(this.isEmpty||this.isAllTime)return this.clone();const g=B.applySome(this.start,x=>y.truncateDate(x,p)),u=B.applySome(this.end,x=>{const w=y.truncateDate(x,p);return x.getTime()===w.getTime()?w:y.offsetDate(w,1,p)});return new c({start:g,end:u})};r.intersection=function(p){if(!p)return this.clone();
if(this.isEmpty||p.isEmpty)return c.empty;if(this.isAllTime)return p.clone();if(p.isAllTime)return this.clone();var g=this.start?.getTime()??-Infinity;const u=this.end?.getTime()??Infinity,x=p.start?.getTime()??-Infinity;p=p.end?.getTime()??Infinity;let w,m;x>=g&&x<=u?w=x:g>=x&&g<=p&&(w=g);u>=x&&u<=p?m=u:p>=g&&p<=u&&(m=p);return null==w||null==m||isNaN(w)||isNaN(m)?c.empty:(g=new c,g.start=-Infinity===w?null:new Date(w),g.end=Infinity===m?null:new Date(m),g)};r.offset=function(p,g){if(this.isEmpty||
this.isAllTime)return this.clone();const u=new c,{start:x,end:w}=this;null!=x&&(u.start=y.offsetDate(x,p,g));null!=w&&(u.end=y.offsetDate(w,p,g));return u};r.union=function(p){if(!p||p.isEmpty)return this.clone();if(this.isEmpty)return p.clone();if(this.isAllTime||p.isAllTime)return f.clone();const g=null!=this.start&&null!=p.start?new Date(Math.min(this.start.getTime(),p.start.getTime())):null;p=null!=this.end&&null!=p.end?new Date(Math.max(this.end.getTime(),p.end.getTime())):null;return new c({start:g,
end:p})};l._createClass(n,[{key:"isAllTime",get:function(){return this.equals(c.allTime)}},{key:"isEmpty",get:function(){return this.equals(c.empty)}}],[{key:"allTime",get:function(){return f}},{key:"empty",get:function(){return a}}]);return n}(D.JSONSupport);h.__decorate([v.property({type:Date,json:{write:{allowNull:!0}}})],D.prototype,"end",void 0);h.__decorate([k.reader("end")],D.prototype,"readEnd",null);h.__decorate([b.writer("end")],D.prototype,"writeEnd",null);h.__decorate([v.property({readOnly:!0,
json:{read:!1}})],D.prototype,"isAllTime",null);h.__decorate([v.property({readOnly:!0,json:{read:!1}})],D.prototype,"isEmpty",null);h.__decorate([v.property({type:Date,json:{write:{allowNull:!0}}})],D.prototype,"start",void 0);h.__decorate([k.reader("start")],D.prototype,"readStart",null);h.__decorate([b.writer("start")],D.prototype,"writeStart",null);D=c=h.__decorate([e.subclass("esri.TimeExtent")],D);const f=new D,a=new D({start:void 0,end:void 0});return D})},"esri/core/timeUtils":function(){define(["exports",
"./has"],function(l,h){function D(v,C,t){return 0===v?0:v*B[C]/B[t]}const B={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},y={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",
setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};l.convertTime=D;l.isValidDate=function(v){return v instanceof Date&&!isNaN(v.getTime())};l.makeUTCTime=function(v,C,t="milliseconds"){C=new Date(D(C,t,"milliseconds"));
C.setUTCFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate());return C};l.offsetDate=function(v,C,t){v=new Date(v.getTime());if(C&&t){const {getter:k,setter:e,multiplier:b}=y[t];if("months"===t){t=v.getFullYear();var q=v.getMonth()+C;t=new Date(t,q+1,1);t.setDate(0);t=t.getDate();v.getDate()>t&&v.setDate(t)}v[e](v[k]()+C*b)}return v};l.offsetDateUTC=function(v,C,t="milliseconds"){v=v.getTime();C=D(C,t,"milliseconds");return new Date(v+C)};l.resetUTCDate=function(v,C){v=new Date(v.getTime());
v.setUTCFullYear(C.getFullYear(),C.getMonth(),C.getDate());return v};l.timeSinceUTCMidnight=function(v,C="milliseconds"){const t=D(v.getUTCHours(),"hours","milliseconds"),q=D(v.getUTCMinutes(),"minutes","milliseconds"),k=D(v.getUTCSeconds(),"seconds","milliseconds");v=v.getUTCMilliseconds();return D(t+q+k+v,"milliseconds",C)};l.truncateDate=function(v,C){switch(C){case "milliseconds":return new Date(v.getTime());case "seconds":return new Date(v.getFullYear(),v.getMonth(),v.getDate(),v.getHours(),
v.getMinutes(),v.getSeconds());case "minutes":return new Date(v.getFullYear(),v.getMonth(),v.getDate(),v.getHours(),v.getMinutes());case "hours":return new Date(v.getFullYear(),v.getMonth(),v.getDate(),v.getHours());case "days":return new Date(v.getFullYear(),v.getMonth(),v.getDate());case "weeks":return new Date(v.getFullYear(),v.getMonth(),v.getDate()-v.getDay());case "months":return new Date(v.getFullYear(),v.getMonth(),1);case "years":return new Date(v.getFullYear(),0,1);case "decades":return new Date(v.getFullYear()-
v.getFullYear()%10,0,1);case "centuries":return new Date(v.getFullYear()-v.getFullYear()%100,0,1);default:return new Date}};l.truncateLocalTime=function(v){const C=new Date(0);C.setHours(0);C.setMinutes(0);C.setSeconds(0);C.setMilliseconds(0);C.setFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate());return C};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./FullTextSearch ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g){var u;const x=new y.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});y=new y.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});v=u=function(w){function m(A){A=w.call(this,A)||this;A.aggregateIds=null;A.cacheHint=void 0;A.compactGeometryEnabled=!1;A.datumTransformation=null;A.defaultSpatialReferenceEnabled=!1;A.distance=void 0;A.dynamicDataSource=void 0;A.formatOf3DObjects=null;A.fullText=null;A.gdbVersion=null;A.geometry=null;A.geometryPrecision=void 0;A.groupByFieldsForStatistics=
null;A.having=null;A.historicMoment=null;A.maxAllowableOffset=void 0;A.maxRecordCountFactor=1;A.multipatchOption=null;A.num=void 0;A.objectIds=null;A.orderByFields=null;A.outFields=null;A.outSpatialReference=null;A.outStatistics=null;A.parameterValues=null;A.pixelSize=null;A.quantizationParameters=null;A.rangeValues=null;A.relationParameter=null;A.resultType=null;A.returnCentroid=!1;A.returnDistinctValues=!1;A.returnExceededLimitFeatures=!0;A.returnGeometry=!1;A.returnQueryGeometry=!1;A.returnM=void 0;
A.returnZ=void 0;A.sourceSpatialReference=null;A.spatialRelationship="intersects";A.start=void 0;A.sqlFormat=null;A.text=null;A.timeExtent=null;A.timeReferenceUnknownClient=!1;A.units=null;A.where=null;return A}l._inherits(m,w);m.from=function(A){return c.ensureClass(u,A)};var z=m.prototype;z.castDatumTransformation=function(A){return"number"===typeof A||"object"===typeof A?A:null};z.writeHistoricMoment=function(A,H){H.historicMoment=A&&A.getTime()};z.writeParameterValues=function(A,H){if(A){const E=
{};for(const F in A){const J=A[F];Array.isArray(J)?E[F]=J.map(L=>L instanceof Date?L.getTime():L):E[F]=J instanceof Date?J.getTime():J}H.parameterValues=E}};z.writeStart=function(A,H){H.resultOffset=this.start;H.resultRecordCount=this.num||10;H.where="1\x3d1"};z.writeWhere=function(A,H){H.where=A||"1\x3d1"};z.clone=function(){return new u(C.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,
defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:null!=this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))};return l._createClass(m)}(v.JSONSupport);
v.MAX_MAX_RECORD_COUNT_FACTOR=5;h.__decorate([t.property({json:{write:!0}})],v.prototype,"aggregateIds",void 0);h.__decorate([t.property({type:Boolean,json:{write:!0}})],v.prototype,"cacheHint",void 0);h.__decorate([t.property({type:Boolean,json:{default:!1,write:!0}})],v.prototype,"compactGeometryEnabled",void 0);h.__decorate([t.property({json:{write:!0}})],v.prototype,"datumTransformation",void 0);h.__decorate([q.cast("datumTransformation")],v.prototype,"castDatumTransformation",null);h.__decorate([t.property({type:Boolean,
json:{default:!1,write:!0}})],v.prototype,"defaultSpatialReferenceEnabled",void 0);h.__decorate([t.property({type:Number,json:{write:{overridePolicy(w){return{enabled:0<w}}}}})],v.prototype,"distance",void 0);h.__decorate([t.property({type:a.DataLayerSource,json:{write:!0}})],v.prototype,"dynamicDataSource",void 0);h.__decorate([t.property({type:String,json:{write:!0}})],v.prototype,"formatOf3DObjects",void 0);h.__decorate([t.property({type:[d],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=
this.fullText&&0<this.fullText.length}}}}})],v.prototype,"fullText",void 0);h.__decorate([t.property({type:String,json:{write:!0}})],v.prototype,"gdbVersion",void 0);h.__decorate([t.property({types:D.geometryTypes,json:{read:f.fromJSON,write:!0}})],v.prototype,"geometry",void 0);h.__decorate([t.property({type:Number,json:{write:!0}})],v.prototype,"geometryPrecision",void 0);h.__decorate([t.property({type:[String],json:{write:!0}})],v.prototype,"groupByFieldsForStatistics",void 0);h.__decorate([t.property({type:String,
json:{write:!0}})],v.prototype,"having",void 0);h.__decorate([t.property({type:Date})],v.prototype,"historicMoment",void 0);h.__decorate([b.writer("historicMoment")],v.prototype,"writeHistoricMoment",null);h.__decorate([t.property({type:Number,json:{write:!0}})],v.prototype,"maxAllowableOffset",void 0);h.__decorate([t.property({type:Number,cast(w){return 1>w?1:w>u.MAX_MAX_RECORD_COUNT_FACTOR?u.MAX_MAX_RECORD_COUNT_FACTOR:w},json:{write:{overridePolicy(w){return{enabled:1<w}}}}})],v.prototype,"maxRecordCountFactor",
void 0);h.__decorate([t.property({type:["xyFootprint"],json:{write:!0}})],v.prototype,"multipatchOption",void 0);h.__decorate([t.property({type:Number,json:{read:{source:"resultRecordCount"}}})],v.prototype,"num",void 0);h.__decorate([t.property({json:{write:!0}})],v.prototype,"objectIds",void 0);h.__decorate([t.property({type:[String],json:{write:!0}})],v.prototype,"orderByFields",void 0);h.__decorate([t.property({type:[String],json:{write:!0}})],v.prototype,"outFields",void 0);h.__decorate([t.property({type:p,
json:{name:"outSR",write:!0}})],v.prototype,"outSpatialReference",void 0);h.__decorate([t.property({type:[r],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.outStatistics&&0<this.outStatistics.length}}}}})],v.prototype,"outStatistics",void 0);h.__decorate([t.property({json:{write:!0}})],v.prototype,"parameterValues",void 0);h.__decorate([b.writer("parameterValues")],v.prototype,"writeParameterValues",null);h.__decorate([t.property({type:g,json:{write:!0}})],v.prototype,"pixelSize",
void 0);h.__decorate([t.property({type:n,json:{write:!0}})],v.prototype,"quantizationParameters",void 0);h.__decorate([t.property({type:[Object],json:{write:!0}})],v.prototype,"rangeValues",void 0);h.__decorate([t.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],v.prototype,"relationParameter",void 0);h.__decorate([t.property({type:String,json:{write:!0}})],v.prototype,"resultType",
void 0);h.__decorate([t.property({type:Boolean,json:{default:!1,write:!0}})],v.prototype,"returnCentroid",void 0);h.__decorate([t.property({type:Boolean,json:{default:!1,write:!0}})],v.prototype,"returnDistinctValues",void 0);h.__decorate([t.property({type:Boolean,json:{default:!0,write:!0}})],v.prototype,"returnExceededLimitFeatures",void 0);h.__decorate([t.property({type:Boolean,json:{write:!0}})],v.prototype,"returnGeometry",void 0);h.__decorate([t.property({type:Boolean,json:{default:!1,write:!0}})],
v.prototype,"returnQueryGeometry",void 0);h.__decorate([t.property({type:Boolean,json:{default:!1,write:!0}})],v.prototype,"returnM",void 0);h.__decorate([t.property({type:Boolean,json:{write:{overridePolicy(w){return{enabled:w}}}}})],v.prototype,"returnZ",void 0);h.__decorate([t.property({type:p,json:{write:!0}})],v.prototype,"sourceSpatialReference",void 0);h.__decorate([k.enumeration(x,{ignoreUnknown:!1,name:"spatialRel"})],v.prototype,"spatialRelationship",void 0);h.__decorate([t.property({type:Number,
json:{read:{source:"resultOffset"}}})],v.prototype,"start",void 0);h.__decorate([b.writer("start"),b.writer("num")],v.prototype,"writeStart",null);h.__decorate([t.property({type:String,json:{write:!0}})],v.prototype,"sqlFormat",void 0);h.__decorate([t.property({type:String,json:{write:!0}})],v.prototype,"text",void 0);h.__decorate([t.property({type:B,json:{write:!0}})],v.prototype,"timeExtent",void 0);h.__decorate([t.property({type:Boolean,json:{default:!1,write:!0}})],v.prototype,"timeReferenceUnknownClient",
void 0);h.__decorate([k.enumeration(y,{ignoreUnknown:!1}),t.property({json:{write:{overridePolicy(w){return{enabled:!!w&&null!=this.distance&&0<this.distance}}}}})],v.prototype,"units",void 0);h.__decorate([t.property({type:String,json:{write:{overridePolicy(w){return{enabled:null!=w||null!=this.start&&0<this.start}}}}})],v.prototype,"where",void 0);h.__decorate([b.writer("where")],v.prototype,"writeWhere",null);return v=u=h.__decorate([e.subclass("esri.rest.support.Query")],v)})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n){function r(){x||(x=b.createTypeReader({types:p()}));return x}function p(){w||(w={key:"type",base:null,typeMap:{"data-layer":l.DataLayerSource,"map-layer":f.MapLayerSource}});return w}var g,u;B=B.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});l.JoinTableDataSource=g=function(m){function z(H){H=m.call(this,H)||this;H.type="join-table";return H}h._inherits(z,m);var A=z.prototype;A.readLeftTableSource=function(H,E,F){return r()(H,
E,F)};A.castLeftTableSource=function(H){return e.ensureOneOfType(p(),H)};A.readRightTableSource=function(H,E,F){return r()(H,E,F)};A.castRightTableSource=function(H){return e.ensureOneOfType(p(),H)};A.clone=function(){const {leftTableKey:H,rightTableKey:E,leftTableSource:F,rightTableSource:J,joinType:L}=this,I={leftTableKey:H,rightTableKey:E,leftTableSource:F?.clone()??void 0,rightTableSource:J?.clone()??void 0,joinType:L};return new g(I)};return h._createClass(z)}(y.JSONSupport);D.__decorate([t.enumeration({joinTable:"join-table"})],
l.JoinTableDataSource.prototype,"type",void 0);D.__decorate([v.property({type:String,json:{write:!0}})],l.JoinTableDataSource.prototype,"leftTableKey",void 0);D.__decorate([v.property({type:String,json:{write:!0}})],l.JoinTableDataSource.prototype,"rightTableKey",void 0);D.__decorate([v.property({json:{write:!0}})],l.JoinTableDataSource.prototype,"leftTableSource",void 0);D.__decorate([q.reader("leftTableSource")],l.JoinTableDataSource.prototype,"readLeftTableSource",null);D.__decorate([C.cast("leftTableSource")],
l.JoinTableDataSource.prototype,"castLeftTableSource",null);D.__decorate([v.property({json:{write:!0}})],l.JoinTableDataSource.prototype,"rightTableSource",void 0);D.__decorate([q.reader("rightTableSource")],l.JoinTableDataSource.prototype,"readRightTableSource",null);D.__decorate([C.cast("rightTableSource")],l.JoinTableDataSource.prototype,"castRightTableSource",null);D.__decorate([t.enumeration(B)],l.JoinTableDataSource.prototype,"joinType",void 0);l.JoinTableDataSource=g=D.__decorate([k.subclass("esri.layers.support.source.JoinTableDataSource")],
l.JoinTableDataSource);let x=null,w=null;C={key:"type",base:null,typeMap:{"join-table":l.JoinTableDataSource,"query-table":a.QueryTableDataSource,raster:d.RasterDataSource,table:n.TableDataSource}};l.DataLayerSource=u=function(m){function z(A){A=m.call(this,A)||this;A.type="data-layer";return A}h._inherits(z,m);z.prototype.clone=function(){const {fields:A,dataSource:H}=this;return new u({fields:A,dataSource:H})};return h._createClass(z)}(y.JSONSupport);D.__decorate([t.enumeration({dataLayer:"data-layer"})],
l.DataLayerSource.prototype,"type",void 0);D.__decorate([v.property({type:[c],json:{write:!0}})],l.DataLayerSource.prototype,"fields",void 0);D.__decorate([v.property({types:C,json:{write:!0}})],l.DataLayerSource.prototype,"dataSource",void 0);l.DataLayerSource=u=D.__decorate([k.subclass("esri.layers.support.source.DataLayerSource")],l.DataLayerSource);l.DataLayerSource.from=e.ensureType(l.DataLayerSource);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c){var f;const a=new D.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});D=f=function(d){function n(p){p=d.call(this,p)||this;
p.alias=null;p.defaultValue=void 0;p.description=null;p.domain=null;p.editable=!0;p.length=-1;p.name=null;p.nullable=!0;p.type=null;p.valueType=null;p.visible=!0;return p}l._inherits(n,d);var r=n.prototype;r.readDescription=function(p,{description:g}){p=null;try{p=g?JSON.parse(g):null}catch(u){}return p?.value??null};r.readValueType=function(p,{description:g}){p=null;try{p=g?JSON.parse(g):null}catch(u){}return p?a.fromJSON(p.fieldValueType):null};r.clone=function(){return new f({alias:this.alias,
defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})};return l._createClass(n)}(B.JSONSupport);h.__decorate([y.property({type:String,json:{write:!0}})],D.prototype,"alias",void 0);h.__decorate([y.property({type:[String,Number],json:{write:{allowNull:!0}}})],D.prototype,"defaultValue",void 0);h.__decorate([y.property()],
D.prototype,"description",void 0);h.__decorate([k.reader("description")],D.prototype,"readDescription",null);h.__decorate([y.property({types:b.types,json:{read:{reader:b.fromJSON},write:!0}})],D.prototype,"domain",void 0);h.__decorate([y.property({type:Boolean,json:{write:!0}})],D.prototype,"editable",void 0);h.__decorate([y.property({type:v.Integer,json:{write:!0}})],D.prototype,"length",void 0);h.__decorate([y.property({type:String,json:{write:!0}})],D.prototype,"name",void 0);h.__decorate([y.property({type:Boolean,
json:{write:!0}})],D.prototype,"nullable",void 0);h.__decorate([q.enumeration(c.kebabDict)],D.prototype,"type",void 0);h.__decorate([y.property()],D.prototype,"valueType",void 0);h.__decorate([k.reader("valueType",["description"])],D.prototype,"readValueType",null);h.__decorate([y.property({type:Boolean,json:{read:!1}})],D.prototype,"visible",void 0);return D=f=h.__decorate([e.subclass("esri.layers.support.Field")],D)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(l,h,D,B,y,v){h={key:"type",base:B,typeMap:{range:v,"coded-value":D,inherited:y}};l.CodedValueDomain=D;l.DomainBase=B;l.InheritedDomain=y;l.RangeDomain=v;l.fromJSON=function(C){if(!C||!C.type)return null;switch(C.type){case "range":return v.fromJSON(C);case "codedValue":return D.fromJSON(C);case "inherited":return y.fromJSON(C)}return null};l.types=h;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(l,h,D,B,y,v,C,t,q){var k;y=k=function(e){function b(f){f=e.call(this,f)||this;f.codedValues=null;f.type="coded-value";return f}l._inherits(b,e);var c=b.prototype;c.getName=function(f){let a=null;if(this.codedValues){const d=String(f);this.codedValues.some(n=>{String(n.code)===d&&(a=n.name);return!!a})}return a};c.clone=function(){return new k({codedValues:D.clone(this.codedValues),name:this.name})};return l._createClass(b)}(q);h.__decorate([B.property({type:[t.CodedValue],json:{write:!0}})],
y.prototype,"codedValues",void 0);h.__decorate([v.enumeration({codedValue:"coded-value"})],y.prototype,"type",void 0);return y=k=h.__decorate([C.subclass("esri.layers.support.CodedValueDomain")],y)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t,q){var k;l.CodedValue=k=function(e){function b(c){c=e.call(this,c)||this;c.name=null;c.code=null;return c}h._inherits(b,e);b.prototype.clone=function(){return new k({name:this.name,code:this.code})};return h._createClass(b)}(B.JSONSupport);D.__decorate([y.property({type:String,json:{write:!0}})],l.CodedValue.prototype,"name",void 0);D.__decorate([y.property({type:[String,Number],json:{write:!0}})],l.CodedValue.prototype,"code",void 0);l.CodedValue=k=D.__decorate([q.subclass("esri.layers.support.CodedValue")],
l.CodedValue);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(l,h,D,B,y,v,C,t,q,k){D=new D.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});B=function(e){function b(c){c=e.call(this,c)||this;c.name=null;c.type=null;return c}l._inherits(b,e);return l._createClass(b)}(B.JSONSupport);h.__decorate([y.property({type:String,json:{write:!0}})],B.prototype,"name",void 0);h.__decorate([q.enumeration(D)],B.prototype,"type",void 0);return B=h.__decorate([k.subclass("esri.layers.support.Domain")],B)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;D=e=function(b){function c(f){f=b.call(this,f)||this;f.type="inherited";return f}l._inherits(c,b);c.prototype.clone=function(){return new e};return l._createClass(c)}(k);h.__decorate([t.enumeration({inherited:"inherited"})],D.prototype,"type",void 0);return D=e=h.__decorate([q.subclass("esri.layers.support.InheritedDomain")],D)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(l,h,D,B,y,v,C,t,q){var k;B=k=function(e){function b(c){c=e.call(this,c)||this;c.maxValue=null;c.minValue=null;c.type="range";return c}l._inherits(b,e);b.prototype.clone=function(){return new k({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return l._createClass(b)}(q);h.__decorate([D.property({type:Number,json:{type:[Number],read:{source:"range",reader(e,b){return b.range&&b.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},
target:"range",writer(e,b,c){b[c]=[this.minValue||0,e]}}}})],B.prototype,"maxValue",void 0);h.__decorate([D.property({type:Number,json:{type:[Number],read:{source:"range",reader(e,b){return b.range&&b.range[0]}},write:{target:"range",writer(e,b,c){b[c]=[e,this.maxValue||0]}}}})],B.prototype,"minValue",void 0);h.__decorate([C.enumeration({range:"range"})],B.prototype,"type",void 0);return B=k=h.__decorate([t.subclass("esri.layers.support.RangeDomain")],B)})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;l.MapLayerSource=e=function(b){function c(f){f=b.call(this,f)||this;f.type="map-layer";return f}h._inherits(c,b);c.prototype.clone=function(){const {mapLayerId:f,gdbVersion:a}=this;return new e({mapLayerId:f,gdbVersion:a})};return h._createClass(c)}(B.JSONSupport);D.__decorate([q.enumeration({mapLayer:"map-layer"})],l.MapLayerSource.prototype,"type",void 0);D.__decorate([y.property({type:v.Integer,json:{write:!0}})],l.MapLayerSource.prototype,"mapLayerId",void 0);
D.__decorate([y.property({type:String,json:{write:!0}})],l.MapLayerSource.prototype,"gdbVersion",void 0);l.MapLayerSource=e=D.__decorate([k.subclass("esri.layers.support.source.MapLayerSource")],l.MapLayerSource);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c){var f;l.QueryTableDataSource=f=function(a){function d(n){n=a.call(this,n)||this;n.type="query-table";return n}h._inherits(d,a);d.prototype.clone=function(){const {workspaceId:n,query:r,oidFields:p,spatialReference:g,geometryType:u}=this,x={workspaceId:n,query:r,oidFields:p,spatialReference:g?.clone()??void 0,geometryType:u};return new f(x)};return h._createClass(d)}(y.JSONSupport);D.__decorate([k.enumeration({queryTable:"query-table"})],l.QueryTableDataSource.prototype,
"type",void 0);D.__decorate([v.property({type:String,json:{write:!0}})],l.QueryTableDataSource.prototype,"workspaceId",void 0);D.__decorate([v.property({type:String,json:{write:!0}})],l.QueryTableDataSource.prototype,"query",void 0);D.__decorate([v.property({type:String,json:{write:!0}})],l.QueryTableDataSource.prototype,"oidFields",void 0);D.__decorate([v.property({type:b,json:{write:!0}})],l.QueryTableDataSource.prototype,"spatialReference",void 0);D.__decorate([k.enumeration(c.featureGeometryTypeKebabDictionary)],
l.QueryTableDataSource.prototype,"geometryType",void 0);l.QueryTableDataSource=f=D.__decorate([e.subclass("esri.layers.support.source.QueryTableDataSource")],l.QueryTableDataSource);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;l.RasterDataSource=e=function(b){function c(f){f=b.call(this,f)||this;f.type="raster";return f}h._inherits(c,b);c.prototype.clone=function(){const {workspaceId:f,dataSourceName:a}=this;return new e({workspaceId:f,dataSourceName:a})};return h._createClass(c)}(B.JSONSupport);D.__decorate([q.enumeration({raster:"raster"})],l.RasterDataSource.prototype,"type",void 0);D.__decorate([y.property({type:String,json:{write:!0}})],l.RasterDataSource.prototype,"dataSourceName",
void 0);D.__decorate([y.property({type:String,json:{write:!0}})],l.RasterDataSource.prototype,"workspaceId",void 0);l.RasterDataSource=e=D.__decorate([k.subclass("esri.layers.support.source.RasterDataSource")],l.RasterDataSource);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;l.TableDataSource=e=function(b){function c(f){f=b.call(this,f)||this;f.type="table";return f}h._inherits(c,b);c.prototype.clone=function(){const {workspaceId:f,gdbVersion:a,dataSourceName:d}=this;return new e({workspaceId:f,gdbVersion:a,dataSourceName:d})};return h._createClass(c)}(B.JSONSupport);D.__decorate([q.enumeration({table:"table"})],l.TableDataSource.prototype,"type",void 0);D.__decorate([y.property({type:String,json:{write:!0}})],l.TableDataSource.prototype,
"workspaceId",void 0);D.__decorate([y.property({type:String,json:{write:!0}})],l.TableDataSource.prototype,"gdbVersion",void 0);D.__decorate([y.property({type:String,json:{write:!0}})],l.TableDataSource.prototype,"dataSourceName",void 0);l.TableDataSource=e=D.__decorate([k.subclass("esri.layers.support.source.TableDataSource")],l.TableDataSource);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FullTextSearch":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t,q){D=function(k){function e(b){b=k.call(this,b)||this;b.onFields=null;b.operator=null;b.searchTerm=null;b.searchType=null;return b}l._inherits(e,k);return l._createClass(e)}(D.ClonableMixin(B.JSONSupport));h.__decorate([y.property({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.onFields&&0<this.onFields.length}}}}})],D.prototype,"onFields",void 0);h.__decorate([y.property({type:String,json:{write:!0}})],D.prototype,"operator",void 0);h.__decorate([y.property({type:String,
json:{write:!0}})],D.prototype,"searchTerm",void 0);h.__decorate([y.property({type:String,json:{write:!0}})],D.prototype,"searchType",void 0);return D=h.__decorate([q.subclass("esri.rest.support.FullTextSearch")],D)})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;D=new B.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});y=e=function(b){function c(f){f=b.call(this,f)||this;f.extent=null;f.mode="view";f.originPosition="upper-left";f.tolerance=1;return f}l._inherits(c,b);c.prototype.clone=function(){return new e(v.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return l._createClass(c)}(y.JSONSupport);h.__decorate([C.property({type:k,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],y.prototype,"extent",void 0);h.__decorate([C.property({type:["view","edit"],json:{write:!0}})],y.prototype,"mode",void 0);h.__decorate([C.property({type:String,json:{read:D.read,write:D.write}})],y.prototype,"originPosition",void 0);h.__decorate([C.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],y.prototype,"tolerance",void 0);return y=e=h.__decorate([q.subclass("esri.rest.support.QuantizationParameters")],y)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(l,h,D,B,y,v,C,t,q){var k;D=new D.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});B=k=function(e){function b(f){f=e.call(this,f)||this;f.maxPointCount=void 0;f.maxRecordCount=void 0;f.maxVertexCount=void 0;f.onStatisticField=
null;f.outStatisticFieldName=null;f.statisticType=null;f.statisticParameters=null;return f}l._inherits(b,e);var c=b.prototype;c.writeStatisticParameters=function(f,a){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)a.statisticParameters=y.clone(f)};c.clone=function(){return new k({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,
statisticType:this.statisticType,statisticParameters:y.clone(this.statisticParameters)})};return l._createClass(b)}(B.JSONSupport);h.__decorate([v.property({type:Number,json:{write:!0}})],B.prototype,"maxPointCount",void 0);h.__decorate([v.property({type:Number,json:{write:!0}})],B.prototype,"maxRecordCount",void 0);h.__decorate([v.property({type:Number,json:{write:!0}})],B.prototype,"maxVertexCount",void 0);h.__decorate([v.property({type:String,json:{write:!0}})],B.prototype,"onStatisticField",void 0);
h.__decorate([v.property({type:String,json:{write:!0}})],B.prototype,"outStatisticFieldName",void 0);h.__decorate([v.property({type:String,json:{read:{source:"statisticType",reader:D.read},write:{target:"statisticType",writer:D.write}}})],B.prototype,"statisticType",void 0);h.__decorate([v.property({type:Object})],B.prototype,"statisticParameters",void 0);h.__decorate([q.writer("statisticParameters")],B.prototype,"writeStatisticParameters",null);return B=k=h.__decorate([t.subclass("esri.rest.support.StatisticDefinition")],
B)})},"esri/views/2d/layers/features/sources/DataTileSubscription":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/arrayUtils ../../../../../core/CircularArray ../../../../../core/has ../../../../../core/promiseUtils ../support/FeatureSetReaderJSON ../support/UpdateToken".split(" "),function(l,h,D,B,y,v,C,t){let q=function(){function k(b,c){this.requests={done:[],stream:new B(10)};this._edits=null;this._abortController=new AbortController;this._version=
0;this._resolver=v.createResolver();this.didSend=this._isDone=!1;this.tile=b;this._version=c}var e=k.prototype;e.resolve=function(){this._isDone=!0;this._resolver.resolve()};e.clear=function(){this.requests.done=[]};e.applyUpdate=function(b){this.requests.done.forEach(c=>c.message.status.unset(b));this._version=b.version;null!=this._edits&&this._edits.status.unset(b)};e.add=function(b){b.message.status=b.message.status??t.UpdateToken.empty();b.message.status.version=this._version;y("esri-2d-update-debug")&&
console.debug(this.tile.id,"DataTileSubscription:add",this._version);b.message.end&&(this.requests.done.forEach(c=>{null!=c.message&&c.message.end&&(c.message.end=!1)}),this._resolver.resolve(),this._isDone=!0);this.requests.done.push(b)};e.edit=function(b,c){const f=b.getQuantizationTransform(),a=b.fullSchema(),d=Array.from(b.features()).filter(D.isSome),n=d.map(r=>r.objectId);c=[...c,...n];this.removeIds(c);this._invalidate();null==this._edits?this._edits={type:"append",addOrUpdate:C.FeatureSetReaderJSON.fromOptimizedFeatures(d,
a,f),id:this.tile.id,status:t.UpdateToken.empty(),end:!0}:(this.requests.done.forEach(r=>r.message.end=!1),this._edits.addOrUpdate.append(b.features()))};e.readers=function*(){for(const {message:b}of this.requests.done)null!=b.addOrUpdate&&(yield b.addOrUpdate);null!=this._edits&&null!=this._edits.addOrUpdate&&(yield this._edits.addOrUpdate)};e._invalidate=function(){for(const b of this.requests.done)b.message.status=t.UpdateToken.empty();null!=this._edits&&(this._edits.status=t.UpdateToken.empty())};
e.removeIds=function(b){this._invalidate();for(const {message:c}of this.requests.done){const f=c.addOrUpdate;null!=f&&(f.removeIds(b),f.isEmpty&&(y("esri-2d-update-debug")&&console.debug("Removing FeatureSetReader"),c.addOrUpdate=null))}null!=this._edits&&null!=this._edits.addOrUpdate&&this._edits.addOrUpdate.removeIds(b);this.requests.done=this.requests.done.filter(c=>c.message.addOrUpdate||c.message.end)};e.abort=function(){this._abortController.abort();this._resolver.reject()};h._createClass(k,
[{key:"signal",get:function(){return this._abortController.signal}},{key:"options",get:function(){return{signal:this._abortController.signal}}},{key:"empty",get:function(){return!this.requests.done.length&&null==this.edits}},{key:"edits",get:function(){return this._edits}},{key:"done",get:function(){return this._resolver.promise}},{key:"isDone",get:function(){return this._isDone}}]);return k}();l.DataTileSubscription=q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/UpdateToken":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers"],function(l,h){let D=function(){function B(){this.version=0;this.source=!1;this.targets={feature:!1,aggregate:!1};this.storage={filters:!1,data:!1};this.queryFilter=this.mesh=!1;this.why={mesh:[],source:[]}}B.create=function(v){const C=new B;let t;for(t in v){const q=v[t];if("object"===typeof q)for(const k in q){const e=k;C[t][e]=q[e]}C[t]=q}return C};B.empty=function(){return B.create({})};B.all=function(){return B.create({source:!0,targets:{feature:!0,
aggregate:!0},storage:{filters:!0,data:!0},mesh:!0})};var y=B.prototype;y.unset=function(v){this.version=v.version;v.source&&(this.source=!1);v.targets.feature&&(this.targets.feature=!1);v.targets.aggregate&&(this.targets.aggregate=!1);v.storage.filters&&(this.storage.filters=!1);v.storage.data&&(this.storage.data=!1);v.mesh&&(this.mesh=!1);v.queryFilter&&(this.queryFilter=!1)};y.any=function(){return this.source||this.mesh||this.storage.filters||this.storage.data||this.targets.feature||this.targets.aggregate||
this.queryFilter};y.describe=function(){let v=0,C="";if(this.mesh){v+=20;C+="-\x3e (20) Mesh needs update\n";for(const t of this.why.mesh)C+=`    + ${t}\n`}if(this.source){v+=10;C+="-\x3e (10) The source needs update\n";for(const t of this.why.source)C+=`    + ${t}\n`}this.targets.feature&&(v+=5,C+="-\x3e (5) Feature target parameters changed\n");this.storage.filters&&(v+=5,C+="-\x3e (5) Feature filter parameters changed\n");this.targets.aggregate&&(v+=4,C+="-\x3e (4) Aggregate target parameters changed\n");
this.storage.data&&(v+=1,C+="-\x3e (1) Texture storage parameters changed");console.debug(`Applying ${5>v?"Fastest":10>v?"Fast":15>v?"Moderate":20>v?"Slow":"Very Slow"} update of cost ${v}/45 `);console.debug(C)};y.toJSON=function(){return{queryFilter:this.queryFilter,source:this.source,targets:this.targets,storage:this.storage,mesh:this.mesh}};return h._createClass(B)}();l.UpdateToken=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),
function(l,h,D,B,y,v){let C=h._createClass(function(q,k){this.item=q;this.controller=k;this.promise=null}),t=function(){function q(e){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;e.concurrency&&(this.concurrency=e.concurrency);this._queue=new y(e.peeker);this.process=e.process;const b=e.scheduler;e.priority&&b&&(this._task=b.registerTask(e.priority,this))}var k=q.prototype;k.destroy=function(){this.clear();
this._schedule=D.removeMaybe(this._schedule);this._task=D.removeMaybe(this._task)};k.abort=function(e){(e=this._controllers.get(e))&&e.abort()};k.clear=function(){this._queue.clear();const e=[];this._controllers.forEach(b=>e.push(b));this._controllers.clear();e.forEach(b=>b.abort());this._processingItems.clear();this._cancelNext()};k.forEach=function(e){this._deferreds.forEach((b,c)=>e(c))};k.get=function(e){return(e=this._deferreds.get(e))?e.promise:void 0};k.isOngoing=function(e){return this._processingItems.has(e)};
k.has=function(e){return this._deferreds.has(e)};k.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};k.push=function(e,b){const c=this.get(e);if(c)return c;const f=new AbortController;let a=null;b&&(a=B.onAbort(b,()=>f.abort()));const d=()=>{n.remove();null!=a&&a.remove();this._deferreds.delete(e);this._controllers.delete(e);this._queue.remove(e);this._processingItems.delete(e);this._scheduleNext()},n=B.onAbortOrThrow(f.signal,()=>{const p=this._processingItems.get(e);p&&p.controller.abort();
d();r.reject(B.createAbortError())}),r=B.createResolver();this._deferreds.set(e,r);this._controllers.set(e,f);r.promise.then(d,d);this._queue.push(e);this._scheduleNext();return r.promise};k.last=function(){return this._queue.last()};k.peek=function(){return this._queue.peek()};k.popLast=function(){return this._queue.popLast()};k.reset=function(){const e=[];this._processingItems.forEach(b=>e.push(b));this._processingItems.clear();for(const b of e)this._queue.push(b.item),b.controller.abort();this._scheduleNext()};
k.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};k.takeAll=function(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());this.clear();return e};k.runTask=function(e){for(;!e.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()};k._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=v.schedule(()=>{this._schedule=null;this._next()}))};k._next=function(){for(;0<
this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};k._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};k._processResult=function(e,b){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(b))};k._processError=function(e,b){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(b))};k._canProcessFulfillment=function(e){return this._deferreds.get(e.item)&&
this._processingItems.get(e.item)===e?!0:!1};k._process=function(e){if(null!=e){var b=new AbortController,c=new C(e,b);this._processingItems.set(e,c);try{var f=this.process(e,b.signal)}catch(a){this._processError(c,a)}B.isPromiseLike(f)?(c.promise=f,f.then(a=>this._processResult(c,a),a=>this._processError(c,a))):this._processResult(c,f)}};h._createClass(q,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&
this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:e=>this.runTask(e)}}}]);return q}();l.QueueProcessor=t;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/sources/PagedFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/Logger ../../../../../core/promiseUtils ./BaseFeatureSource".split(" "),function(l,h,D,B,y,v){v=function(C){function t(k){return C.call(this,
k)||this}h._inherits(t,C);var q=t.prototype;q._fetchDataTile=async function(k){const e=this._subscriptions.get(k.key.id);let b=!1,c=0,f=0;const a=(r,p)=>{f--;y.throwIfAborted(e);const g=k.id,u=r.reader;r=r.query;u.exceededTransferLimit?(p={id:g,addOrUpdate:u,end:b&&0===f,type:"append"},e.add({message:p,query:r}),this._onMessage(p)):(b=!0,p={id:g,addOrUpdate:u,end:0===f,type:"append"},e.add({message:p,query:r}),this._onMessage(p))};let d=0,n=0;for(;!b&&20>n++;){let r;for(let p=0;p<d+1;p++){const g=
c++;f++;r=this._fetchDataTilePage(k,g,e).then(u=>u&&a(u,g)).catch(u=>{b=!0;if(!y.isAbortError(u)){B.getLogger("esri.views.2d.layers.features.sources.PagedFeatureSource").error(new D("mapview-query-error","Encountered error when fetching tile",{tile:k,error:u}));u={id:k.id,addOrUpdate:null,end:b,type:"append"};var x={start:this.pageSize*c,num:this.pageSize,returnExceededLimitFeatures:!0,quantizationParameters:k.getQuantizationParameters()};null!=this.maxRecordCountFactor&&(x.maxRecordCountFactor=this.maxRecordCountFactor);
x=this.createTileQuery(k,x);e.add({message:u,query:x});this._onMessage(u)}})}await r;y.throwIfAborted(e);d=Math.min(d+2,6)}};q._fetchDataTilePage=async function(k,e,b){y.throwIfAborted(b);const c=this._queryInfo;var f={start:this.pageSize*e,num:this.pageSize,returnExceededLimitFeatures:!0,quantizationParameters:k.getQuantizationParameters()};null!=this.maxRecordCountFactor&&(f.maxRecordCountFactor=this.maxRecordCountFactor);f=this.createTileQuery(k,f);try{const a=await this.enqueueQuery({tile:k,query:f,
signal:b.signal,depth:e});y.throwIfAborted(b);return a?c!==this._queryInfo?this._fetchDataTilePage(k,e,b):{reader:a,query:f}:null}catch(a){return y.throwIfNotAbortError(a),null}};return h._createClass(t)}(v.BaseFeatureSource);l.PagedFeatureSource=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/sources/SnapshotFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/RandomLCG ../../../../../core/accessorSupport/decorators/subclass ./BaseFeatureSource ../support/FeatureSetReaderPBFIndirect ../support/UpdateToken".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){function c(a,d,n){var r=a.getXHydrated();a=a.getYHydrated();r=d.getColumnForX(r);r=Math.floor(d.normalizeCol(r));d=Math.floor(d.getRowForY(a));return`${n}/${d}/${r}`}function f(a,d){if(null==a)return null;d=d.transform;const n=a.getQuantizationTransform();if(null==n){const [A,H]=d.scale,[E,F]=d.translate;return a.transform(-E/A,F/H,1/A,1/-H)}const [r,p]=n.scale,[g,u]=n.translate,[x,w]=d.scale,[m,z]=d.translate;return a.transform((g-m)/x,(-u+z)/w,r/x,p/w)}l.SnapshotFeatureSource=
function(a){function d(r){var p=a.call(this,r)||this;p.mode="snapshot";p._loading=!0;p._controller=new AbortController;p._downloadPromise=null;p._didSendEnd=!1;p._queries=[];p._invalidated=!1;p._hasAggregates=!1;p._random=new t(1E3);p._store=r.store;p._markedIdsBufId=p._store.storage.createBitset();return p}h._inherits(d,a);var n=d.prototype;n.destroy=function(){h._get(h._getPrototypeOf(d.prototype),"destroy",this).call(this);this._controller.abort()};n.update=function(r,p){h._get(h._getPrototypeOf(d.prototype),
"update",this).call(this,r,p);null==this._featureCount&&(this._featureCount=p.initialFeatureCount);null!=p.changedFeatureCount&&(this._featureCount=p.changedFeatureCount);this._hasAggregates=!!r.targets?.aggregate};n.resend=async function(r=!1){await this._downloadPromise;this._invalidated||r?(r=v.unwrapOrThrow(this._featureCount,"Expected featureCount to be defined"),this._invalidated=!1,this._subscriptions.forEach(p=>p.clear()),this._downloadPromise=this._download(r),await this._downloadPromise):
(r=this._queries.map(({query:p,reader:g})=>this._sendPatchQuery(p,g)),await Promise.all(r),this._subscriptions.forEach(p=>{p.requests.done.forEach(g=>this._onMessage(g.message))}))};n.refresh=async function(r,p){p&&(this._featureCount=p.featureCount);await this.resend(!0)};n._sendPatchQuery=async function(r,p){const g=null!=r.outFields?r.outFields:[],u=this._queryInfo.outFields,x=u.filter(z=>!g.includes(z));if(x.length){var w=r.clone(),m=this._signal;w.returnGeometry=!1;w.returnCentroid=!1;w.outFields=
x;r.outFields=u;r=await this.enqueueQuery({query:w,depth:0,signal:m});C.throwIfAborted({signal:m});p.joinAttributes(r)}};n._fetchDataTile=async function(r){if(!this._downloadPromise){var p=v.unwrapOrThrow(this._featureCount,"Expected featureCount to be defined");this._downloadPromise=this._download(p)}var g=this._store.search(r);p=this._subscriptions.get(r.key.id);const u=g.length-1;for(let w=0;w<u;w++){var x=f(g[w],r);x={type:"append",id:r.id,addOrUpdate:x,end:!1,status:b.UpdateToken.empty()};p.add({query:null,
message:x});this._hasAggregates||await C.after(1);this._onMessage(x)}g=f(0<=u?g[u]:null,r);r={type:"append",id:r.id,addOrUpdate:g,end:this._didSendEnd,status:b.UpdateToken.empty()};p.add({query:null,message:r});this._onMessage(r)};n._download=async function(r){try{await this.whenInitialized();const p=this._store.storage.getBitset(this._markedIdsBufId),g=new Set;p.clear();const u=Array.from({length:Math.ceil(r/this.pageSize)},(x,w)=>w).sort((x,w)=>this._random.getInt()-this._random.getInt()).map(x=>
this._downloadPage(x,p,g));await Promise.all(u);this._store.sweepFeatures(p,this._store.storage);this._store.sweepFeatureSets(g)}catch(p){y.getLogger("esri.views.2d.layers.features.sources.SnapshotFeatureSource").error("mapview-snapshot-source","Encountered and error when downloading feature snapshot",p)}this._sendEnd();this._loading=!1};n._downloadPage=async function(r,p,g){var u=this.pageSize;u={start:r*u,num:u,cacheHint:!0};null!=this.maxRecordCountFactor&&(u.maxRecordCountFactor=this.maxRecordCountFactor);
u=this.createQuery(u);const x=this._signal;r=await this.enqueueQuery({query:u,depth:r,signal:x});C.throwIfAborted({signal:x});this._queries.push({query:u,reader:r});this._store.insert(r);g.add(r.instance);for(g=r.getCursor();g.next();)p.set(g.getDisplayId());this._send(r)};n._send=function(r){if(this._subscriptions.size){var p=null,g=new Map,u=new Set,x=new Map;this._subscriptions.forEach(m=>{var z=m.tile;g.set(z.key.id,null);p=z.tileInfoView;u.add(z.level);const {row:A,col:H}=z.key;z=`${z.level}/${A}/${H}`;
const E=x.get(z)??[];E.push(m);x.set(z,E)});for(const m of u){const z=p.getLODInfoAt(m),A=r.getCursor();for(;A.next();){var w=c(A,z,m);const H=A.getIndex();if(x.has(w))for(const E of x.get(w)){w=E.tile.id;let F=g.get(w);null==F&&(F=[],g.set(w,F));F.push(H)}}}g.forEach((m,z)=>{if(null!=m){const A=this._subscriptions.get(z);m=f(e.FeatureSetReaderIndirect.from(r,m),A.tile);z={type:"append",id:z,addOrUpdate:m,end:!1,status:b.UpdateToken.empty()};A.add({query:null,message:z});this._onMessage(z)}})}};n._sendEnd=
function(){this._subscriptions.forEach(r=>{const p={type:"append",id:r.tile.id,addOrUpdate:null,end:!0,status:b.UpdateToken.empty()};r.add({query:null,message:p});this._onMessage(p)});this._didSendEnd=!0};h._createClass(d,[{key:"loading",get:function(){return this._loading}},{key:"_signal",get:function(){return this._controller.signal}}]);return d}(k.BaseFeatureSource);l.SnapshotFeatureSource=D.__decorate([q.subclass("esri.view.2d.layers.features.sources.SnapshotFeatureSource")],l.SnapshotFeatureSource);
Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/sources/StreamSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/handleUtils ../../../../../core/has ../../../../../chunks/rbush ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/data/StreamFeatureManager ../../../../../layers/graphics/sources/connections/createConnection ./DataTileSource ./StreamConnectionState ../support/FeatureSetReaderJSON ../support/UpdateToken".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c){function f(r,p){const g=r.weakClone();if(null!=r.geometry){const u=v.quantizeX(p,r.geometry.coords[0]);r=v.quantizeY(p,r.geometry.coords[1]);g.geometry=new C([],[u,r])}return g}function a(r){switch(r){case "esriGeometryPoint":return f;default:return(p,g)=>{const u=p.weakClone(),x=new C;p=v.quantizeOptimizedGeometry(x,p.geometry,!1,!1,r,g,!1,!1);u.geometry=p;return u}}}function d(r){switch(r){case "esriGeometryPoint":return p=>null!=p.geometry?{minX:p.geometry.coords[0],
minY:p.geometry.coords[1],maxX:p.geometry.coords[0],maxY:p.geometry.coords[1]}:{minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};default:return p=>{let g=Infinity,u=Infinity,x=-Infinity,w=-Infinity;null!=p.geometry&&p.geometry.forEachVertex((m,z)=>{g=Math.min(g,m);u=Math.min(u,z);x=Math.max(x,m);w=Math.max(w,z)});return{minX:g,minY:u,maxX:x,maxY:w}}}}let n=function(){function r(g,u){this.onUpdate=g;this._geometryType=u;this._objectIdToFeature=new Map;this._index=null}var p=r.prototype;p.add=
function(g){this._objectIdToFeature.set(g.objectId,g);this._index=null};p.get=function(g){return this._objectIdToFeature.has(g)?this._objectIdToFeature.get(g):null};p.forEach=function(g){this._objectIdToFeature.forEach(g)};p.search=function(g){if(!this._index){var u=this._features;const x=y.rbush(9,d(this._geometryType));x.load(u);this._index=x}return this._index.search({minX:g.bounds[0],minY:g.bounds[1],maxX:g.bounds[2],maxY:g.bounds[3]})};p.clear=function(){this._index=null;this._objectIdToFeature.clear()};
p.removeById=function(g){const u=this._objectIdToFeature.get(g);return u?(this._objectIdToFeature.delete(g),this._index=null,u):null};p.update=function(g,u){this.onUpdate(g,u)};h._createClass(r,[{key:"_features",get:function(){const g=[];this._objectIdToFeature.forEach(u=>g.push(u));return g}},{key:"size",get:function(){return this._objectIdToFeature.size}}]);return r}();B=function(r){function p(u){var x=r.call(this,u)||this;x.type="stream";x._updateIntervalId=0;x._level=0;x._isPaused=!1;x._updateInfo=
{websocket:0,client:0};x._inUpdate=!1;var {outSR:w}=u;const {geometryType:m,objectIdField:z,timeInfo:A,purgeOptions:H,source:E,spatialReference:F,serviceFilter:J,maxReconnectionAttempts:L,maxReconnectionInterval:I,updateInterval:G,customParameters:K,enabledEventTypes:P}=u.serviceInfo,Y=new n(x._onUpdate.bind(h._assertThisInitialized(x)),m),ea=new t.StreamFeatureManager(Y,z,A,H);w=q.createConnection(E,F,w,m,J,L,I,K??{});x._connectionState=new e.StreamConnectionState({connection:w});x._store=Y;x._manager=
ea;x._connection=w;x._quantize=a(m);x._enabledEventTypes=new Set(P);x._handlesGroup=D.handlesGroup([x._connection.on("data-received",aa=>x._onFeature(aa)),x._connection.on("message-received",aa=>x._onWebSocketMessage(aa))]);x._initUpdateInterval=()=>{let aa=performance.now();x._updateIntervalId=setInterval(()=>{var T=performance.now(),R=T-aa;2500<R&&(aa=T,T=Math.round(x._updateInfo.client/(R/1E3)),R=Math.round(x._updateInfo.websocket/(R/1E3)),x._updateInfo.client=0,x._updateInfo.websocket=0,x.events.emit("updateRate",
{client:T,websocket:R}));u.canAcceptRequest()&&!x._inUpdate&&x._manager.checkForUpdates()},G)};x._isPaused=u.serviceInfo.isPaused;x._isPaused||x._initUpdateInterval();return x}h._inherits(p,r);var g=p.prototype;g.destroy=function(){h._get(h._getPrototypeOf(p.prototype),"destroy",this).call(this);this._clearUpdateInterval();this._connection.destroy();this._handlesGroup?.remove()};g._fetchDataTile=function(){};g.updateCustomParameters=function(u){this._connection.updateCustomParameters(u)};g.pauseStream=
function(){this._isPaused||(this._isPaused=!0,this._clearUpdateInterval())};g.resumeStream=function(){this._isPaused&&(this._isPaused=!1,this._initUpdateInterval())};g.sendMessageToSocket=function(u){this._connection.sendMessageToSocket(u)};g.sendMessageToClient=function(u){this._isPaused&&"type"in u&&"clear"===u.type?(this._store.clear(),this._subscriptions.forEach((x,w)=>{x.didSend&&x.tile.level===this._level&&this._onMessage({type:"append",id:w,addOrUpdate:null,clear:!0,end:!0})})):this._connection.sendMessageToClient(u)};
g.enableEvent=function(u,x){x?this._enabledEventTypes.add(u):this._enabledEventTypes.delete(u)};g.subscribe=function(u,x){h._get(h._getPrototypeOf(p.prototype),"subscribe",this).call(this,u,x);x=this._subscriptions.get(u.id);x.resolve();this._level=u.level;const w=this._getTileFeatures(u);this._onMessage({type:"append",id:u.key.id,addOrUpdate:w,end:!0});x.didSend=!0};g.unsubscribe=function(u){h._get(h._getPrototypeOf(p.prototype),"unsubscribe",this).call(this,u)};g.readers=function*(u){u=this._subscriptions.get(u);
({tile:u}=u);yield this._getTileFeatures(u)};g.createTileQuery=function(u){throw Error("Service does not support tile  queries");};g.resend=async function(){this._subscriptions.forEach(u=>{({tile:u}=u);u={type:"append",id:u.id,addOrUpdate:this._getTileFeatures(u),end:!0};this._onMessage(u)})};g._getTileFeatures=function(u){const x=this._store.search(u).map(w=>this._quantize(w,u.transform));return b.FeatureSetReaderJSON.fromOptimizedFeatures(x,this._serviceInfo,u.transform)};g._onWebSocketMessage=
function(u){this._enabledEventTypes.has("message-received")&&this.events.emit("message-received",u);if("type"in u)switch(u.type){case "delete":if(u.objectIds)for(const x of u.objectIds)this._manager.removeById(x);if(u.trackIds)for(const x of u.trackIds)this._manager.removeByTrackId(x);break;case "clear":this._store.forEach(x=>this._manager.removeById(x.objectId))}};g._onFeature=function(u){this._updateInfo.websocket++;try{this._enabledEventTypes.has("data-received")&&this.events.emit("data-received",
u);const x=v.convertFromFeature(u,this._serviceInfo.geometryType,!1,!1,this._serviceInfo.objectIdField);this._manager.add(x)}catch(x){}};g._clearUpdateInterval=function(){clearInterval(this._updateIntervalId);this._updateIntervalId=0};g._onUpdate=async function(u,x){this._inUpdate=!0;try{null!=u&&(this._updateInfo.client+=u.length);this._subscriptions.forEach((m,z)=>{m.didSend&&m.tile.level===this._level&&this._onMessage({type:"append",id:z,addOrUpdate:null,clear:!0,end:!1})});const w=[];this._subscriptions.forEach((m,
z)=>{if(m.didSend&&m.tile.level===this._level){var A=this._getTileFeatures(m.tile);z={type:"append",id:z,addOrUpdate:A,remove:[],end:!1,status:c.UpdateToken.empty()};m.requests.stream.enqueue(z);w.push(this._onMessage(z))}});await Promise.all(w);this._subscriptions.forEach((m,z)=>{m.didSend&&m.tile.level===this._level&&this._onMessage({type:"append",id:z,addOrUpdate:null,end:!0})})}catch{}this._inUpdate=!1};h._createClass(p,[{key:"connectionStatus",get:function(){return this._connectionState.connectionStatus}},
{key:"errorString",get:function(){return this._connectionState.errorString}}]);return p}(k.DataTileSource);l.StreamSource=B;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/StreamFeatureManager":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/CircularArray","../../../core/mathUtils"],function(l,h,D,B){let y=function(){function v(t,q,k,e,b=128){this._trackIdToObservations=new Map;this._idCounter=0;this._lastPurge=performance.now();
this._addOrUpdated=new Map;this._removed=[];this._maxAge=0;this._timeInfo=k;this._purgeOptions=e;this.store=t;this.objectIdField=q;this.purgeInterval=b;this._useGeneratedIds="__esri_stream_id__"===this.objectIdField}var C=v.prototype;C.removeById=function(t){this._removed.push(t)};C.removeByTrackId=function(t){if(t=this._trackIdToObservations.get(t))for(const q of t.entries)this._removed.push(q)};C.add=function(t){if(this._useGeneratedIds){var q=this._nextId();t.attributes[this.objectIdField]=q;t.objectId=
q}else t.objectId=t.attributes[this.objectIdField];q=t.objectId;this._addOrUpdated.set(q,t);this._maxAge=Math.max(this._maxAge,t.attributes[this._timeInfo.startTimeField]);if(this._timeInfo.trackIdField){t=t.attributes[this._timeInfo.trackIdField];if(!this._trackIdToObservations.has(t)){const k=B.clamp(null!=this._purgeOptions&&null!=this._purgeOptions.maxObservations?this._purgeOptions.maxObservations:1E3,0,1E3);this._trackIdToObservations.set(t,new D(k))}q=this._trackIdToObservations.get(t)?.enqueue(q);
null!=q&&(this._addOrUpdated.has(q)?this._addOrUpdated.delete(q):this._removed.push(q))}else null==this._trackIdLessObservations&&(this._trackIdLessObservations=new D(1E5)),this._trackIdLessObservations.enqueue(q)};C.checkForUpdates=function(){const t=this._getToAdd();var q=this._getToRemove();const k=performance.now();k-this._lastPurge>=this.purgeInterval&&(this._purge(k),this._lastPurge=k);const e=[];if(null!=q)for(var b of q){const c=this.store.removeById(b);null!=c&&e.push(c)}b=[];if(null!=t){q=
new Set(q??[]);for(const c of t)q.has(c.objectId)||(c.attributes.__esri_timestamp__=k,this.store.add(c),b.push(c))}(b.length||e?.length)&&this.store.update(b,e)};C._getToAdd=function(){if(!this._addOrUpdated.size)return null;const t=Array(this._addOrUpdated.size);let q=0;this._addOrUpdated.forEach(k=>t[q++]=k);this._addOrUpdated.clear();return t};C._getToRemove=function(){const t=this._removed;if(!this._removed.length)return null;this._removed=[];return t};C._nextId=function(){const t=this._idCounter;
this._idCounter=(this._idCounter+1)%4294967294+1;return t};C._purge=function(t){const q=this._purgeOptions;null!=q&&(this._purgeSomeByDisplayCount(q),this._purgeByAge(q),this._purgeByAgeReceived(t,q),this._purgeTracks())};C._purgeSomeByDisplayCount=function(t){if(t.displayCount){var q=this.store.size;if(q>t.displayCount){if(this._timeInfo.trackIdField)for(const k of this._trackIdToObservations.values())if(q>t.displayCount&&k.size){const e=k.dequeue();this._removed.push(e);q--}if(null!=this._trackIdLessObservations)for(t=
q-t.displayCount;0<t--;)q=this._trackIdLessObservations.dequeue(),null!=q&&this._removed.push(q)}}};C._purgeByAge=function(t){const q=this._timeInfo?.startTimeField;if(t.age&&q){var k=this._maxAge-6E4*t.age;this.store.forEach(e=>{e.attributes[q]<k&&this._removed.push(e.objectId)})}};C._purgeByAgeReceived=function(t,q){if(q.ageReceived){var k=t-6E4*q.ageReceived;this.store.forEach(e=>{e.attributes.__esri_timestamp__<k&&this._removed.push(e.objectId)})}};C._purgeTracks=function(){this._trackIdToObservations.forEach((t,
q)=>{0===t.size&&this._trackIdToObservations.delete(q)})};return h._createClass(v)}();l.DEFAULT_STREAM_ID_FIELD="__esri_stream_id__";l.ESRI_TIMESTAMP="__esri_timestamp__";l.StreamFeatureManager=y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/connections/createConnection":function(){define(["exports","./GeoEventConnection","./WebSocketConnection","../../../support/ClientSideConnection"],function(l,h,D,B){l.createConnection=function(y,v,C,t,q,k,e,b){v=
{source:y,sourceSpatialReference:v,spatialReference:C,geometryType:t,filter:q,maxReconnectionAttempts:k,maxReconnectionInterval:e,customParameters:b};return y?y.path.startsWith("wss://")||y.path.startsWith("ws://")?new D.WebSocketConnection(v):new h(v):new B.ClientSideConnection(v)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/connections/GeoEventConnection":function(){define("require ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../geometry ../../../../request ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ./WebSocketConnection ../../../../rest/query/operations/query ../../../../rest/support/Query ../../../../geometry/support/jsonUtils ../../../../geometry/SpatialReference".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r){const p={maxQueryDepth:5,maxRecordCountFactor:3};B=function(g){function u(w){w=g.call(this,{...p,...w})||this;w._buddyServicesQuery=null;w._relatedFeatures=null;return w}h._inherits(u,g);var x=u.prototype;x._open=async function(){var w=await this._fetchServiceDefinition(this._config.source);w.timeInfo.trackIdField||C.getLogger(this).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");
w=this._fetchWebSocketUrl(w.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices());await this._buddyServicesQuery;await this._tryCreateWebSocket(w);const {filter:m,outFields:z}=this._config;this.destroyed||this._setFilter(m,z)};x._onMessage=function(w){if("attributes"in w){let m;try{m=this._enrich(w),null!=this._featureZScaler&&this._featureZScaler(m.geometry)}catch(z){C.getLogger(this).error(new v("geoevent-connection","Failed to parse message",
z));return}this.onFeature(m)}else this.onMessage(w)};x._fetchServiceDefinition=async function(w){return this._serviceDefinition=w=(await y(w.path,{query:{f:"json",...this._config.customParameters},responseType:"json"})).data};x._fetchWebSocketUrl=function(w,m){const {urls:z,token:A}=w[0];w=this._inferWebSocketBaseUrl(z);return q.addQueryParameters(`${w}/subscribe`,{outSR:""+m.wkid,token:A})};x._inferWebSocketBaseUrl=function(w){if(1===w.length)return w[0];for(const m of w)if(m.includes("wss"))return m;
C.getLogger(this).error(new v("geoevent-connection","Unable to infer WebSocket url",w));return null};x._setFilter=async function(w,m){const z=this._websocket;if(null!=z&&(null!=w||null!=m)){w=JSON.stringify({filter:this._serializeFilter(w,m)});var A=!1,H=t.createResolver();z.onmessage=E=>{E=JSON.parse(E.data);E.filter&&(E.error&&(C.getLogger(this).error(new v("geoevent-connection","Failed to set service filter",E.error)),this._set("errorString",`Could not set service filter - ${E.error}`),H.reject(E.error)),
this._setWebSocketJSONParseHandler(z),A=!0,H.resolve())};z.send(w);setTimeout(()=>{A||(this.destroyed||this._websocket!==z||C.getLogger(this).error(new v("geoevent-connection","Server timed out when setting filter")),H.reject())},1E4);return H.promise}};x._serializeFilter=function(w,m){const z={};if(null==w&&null==m)return z;if(null!=w&&w.geometry)try{const A=n.fromJSON(w.geometry);if("extent"!==A.type)throw new v(`Expected extent but found type ${A.type}`);z.geometry=JSON.stringify(A.shiftCentralMeridian())}catch(A){C.getLogger(this).error(new v("geoevent-connection",
"Encountered an error when setting connection geometryDefinition",A))}null!=w&&w.where&&"1 \x3d 1"!==w.where&&"1\x3d1"!==w.where&&(z.where=w.where);null!=m&&(z.outFields=m.join(","));return z};x._enrich=function(w){if(!this._relatedFeatures)return w;const m=this._relatedFeatures.get(w.attributes[this._serviceDefinition.relatedFeatures.joinField]);if(!m)return C.getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",w),w;const {attributes:z,geometry:A}=
m;for(const H in z)w.attributes[H]=z[H];A&&(w.geometry=A);w.geometry||w.centroid||C.getLogger(this).error(new v("geoevent-connection","Found malformed feature - no geometry found",w));return w};x._queryBuddyServices=async function(){try{const {relatedFeatures:w,keepLatestArchive:m}=this._serviceDefinition,z=this._queryRelatedFeatures(w),A=this._queryArchive(m);await z;const H=await A;if(H)for(const E of H.features)this.onFeature(this._enrich(E))}catch(w){C.getLogger(this).error(new v("geoevent-connection",
"Encountered an error when querying buddy services",{error:w}))}};x._queryRelatedFeatures=async function(w){w&&(w=await this._queryBuddy(w.featuresUrl),this._addRelatedFeatures(w))};x._queryArchive=async function(w){if(w)return this._queryBuddy(w.featuresUrl)};x._queryBuddy=async function(w){const m=new (await new Promise((L,I)=>l(["../../../FeatureLayer"],G=>L(Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}))),I))).default({url:w});var {capabilities:z}=
await m.load();const A=z.query.supportsMaxRecordCountFactor,H=z.query.supportsPagination;z=z.query.supportsCentroid;const E=this._config.maxRecordCountFactor;var F=m.capabilities.query.maxRecordCount;F=A?F*E:F;const J=new d;J.outFields=this._config.outFields??["*"];J.where=this._config.filter?.where??"1\x3d1";J.returnGeometry=!0;J.returnExceededLimitFeatures=!0;J.outSpatialReference=r.fromJSON(this._config.spatialReference);z&&(J.returnCentroid=!0);A&&(J.maxRecordCountFactor=E);if(H)return J.num=
F,m.destroy(),this._queryPages(w,J);w=await a.executeQuery(w,J,this._config.sourceSpatialReference);m.destroy();return w.data};x._queryPages=async function(w,m,z=[],A=0){m.start=null!=m.num?A*m.num:null;const {data:H}=await a.executeQuery(w,m,this._config.sourceSpatialReference);if(H.exceededTransferLimit&&A<(this._config.maxQueryDepth??0))return H.features.forEach(E=>z.push(E)),this._queryPages(w,m,z,A+1);z.forEach(E=>H.features.push(E));return H};x._addRelatedFeatures=function(w){const m=new Map;
w=w.features;const z=this._serviceDefinition.relatedFeatures.joinField;for(const A of w)m.set(A.attributes[z],A);this._relatedFeatures=m};return h._createClass(u)}(f.WebSocketConnection);return B=D.__decorate([c.subclass("esri.layers.graphics.sources.connections.GeoEventConnection")],B)})},"esri/layers/graphics/sources/connections/WebSocketConnection":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../../../../geometry/support/zscale ../../../support/StreamConnection".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f){var a;(function(d){d[d.CONNECTING=0]="CONNECTING";d[d.OPEN=1]="OPEN";d[d.CLOSING=2]="CLOSING";d[d.CLOSED=3]="CLOSED"})(a||(a={}));l.WebSocketConnection=function(d){function n(p){var g=d.call(this)||this;g._outstandingMessages=[];g.errorString=null;const {geometryType:u,spatialReference:x,sourceSpatialReference:w}=p;g._config=p;g._featureZScaler=c.getGeometryZScaler(u,w,x);g._open();return g}h._inherits(n,d);var r=n.prototype;r._open=async function(){await this._tryCreateWebSocket();
this.destroyed||await this._handshake()};r.destroy=function(){h._get(h._getPrototypeOf(n.prototype),"destroy",this).call(this);null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close());this._websocket=null};r.sendMessageToSocket=function(p){null==this._websocket?this._outstandingMessages.push(p):this._websocket.send(JSON.stringify(p))};r.sendMessageToClient=function(p){this._onMessage(p)};r.updateCustomParameters=
function(p){this._config.customParameters=p;null!=this._websocket&&this._websocket.close()};r._tryCreateWebSocket=async function(p=this._config.source.path,g=1E3,u=0){try{if(!this.destroyed){var x=C.addQueryParameters(p,this._config.customParameters??{});this._websocket=await this._createWebSocket(x);this.notifyChange("connectionStatus")}}catch(w){if(x=g/1E3,this._config.maxReconnectionAttempts&&u>=this._config.maxReconnectionAttempts)y.getLogger(this).error(new B("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),
this.destroy();else return y.getLogger(this).error(new B("websocket-connection",`Failed to connect. Attempting to reconnect in ${x}s`,w)),await v.after(g),this._tryCreateWebSocket(p,Math.min(1.5*g,1E3*this._config.maxReconnectionInterval),u+1)}};r._setWebSocketJSONParseHandler=function(p){p.onmessage=g=>{try{const u=JSON.parse(g.data);this._onMessage(u)}catch(u){y.getLogger(this).error(new B("websocket-connection","Failed to parse message, invalid JSON",{error:u}))}}};r._createWebSocket=function(p){return new Promise((g,
u)=>{const x=new WebSocket(p);x.onopen=()=>{x.onopen=null;this.destroyed?(x.onclose=null,x.close()):(x.onclose=w=>this._onClose(w),x.onerror=w=>this._onError(w),this._setWebSocketJSONParseHandler(x),g(x))};x.onclose=w=>{x.onopen=x.onclose=null;u(w)}})};r._handshake=async function(p=1E4){const g=this._websocket;if(null!=g){var u=v.createResolver(),x=g.onmessage,{filter:w,outFields:m,spatialReference:z}=this._config;u.timeout(p);g.onmessage=A=>{let H=null;try{H=JSON.parse(A.data)}catch(E){}H&&"object"===
typeof H||(y.getLogger(this).error(new B("websocket-connection","Protocol violation. Handshake failed - malformed message",A.data)),u.reject(),this.destroy());H.spatialReference?.wkid!==z?.wkid&&(y.getLogger(this).error(new B("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${z.wkid}`,A.data)),u.reject(),this.destroy());"json"!==H.format&&(y.getLogger(this).error(new B("websocket-connection","Protocol violation. Handshake failed - format is not set",A.data)),u.reject(),
this.destroy());w&&H.filter!==w&&y.getLogger(this).error(new B("websocket-connection","Tried to set filter, but server doesn't support it"));m&&H.outFields!==m&&y.getLogger(this).error(new B("websocket-connection","Tried to set outFields, but server doesn't support it"));g.onmessage=x;for(const E of this._outstandingMessages)g.send(JSON.stringify(E));this._outstandingMessages=[];u.resolve()};g.send(JSON.stringify({filter:w,outFields:m,format:"json",spatialReference:{wkid:z.wkid}}));return u.promise}};
r._onMessage=function(p){this.onMessage(p);if("type"in p)switch(p.type){case "features":case "featureResult":for(const g of p.features)null!=this._featureZScaler&&this._featureZScaler(g.geometry),this.onFeature(g)}};r._onError=function(p){this._set("errorString","Encountered an error over WebSocket connection");y.getLogger(this).error("websocket-connection","Encountered an error over WebSocket connection")};r._onClose=function(p){this._websocket=null;this.notifyChange("connectionStatus");1E3!==p.code&&
y.getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${p.code}`);this.destroyed||this._open()};h._createClass(n,[{key:"connectionStatus",get:function(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case a.CONNECTING:case a.OPEN:return"connected";case a.CLOSING:case a.CLOSED:return"disconnected"}}}]);return n}(f);D.__decorate([t.property()],l.WebSocketConnection.prototype,"connectionStatus",null);D.__decorate([t.property()],
l.WebSocketConnection.prototype,"errorString",void 0);l.WebSocketConnection=D.__decorate([b.subclass("esri.layers.graphics.sources.connections.WebSocketConnection")],l.WebSocketConnection);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/StreamConnection":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Evented ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t,q){B=function(k){function e(){return k.apply(this,arguments)||this}l._inherits(e,k);var b=e.prototype;b.destroy=function(){this.emit("destroy")};b.onFeature=function(c){this.emit("data-received",c)};b.onMessage=function(c){this.emit("message-received",c)};l._createClass(e,[{key:"connectionError",get:function(){return this.errorString?new D("stream-connection",this.errorString):null}}]);return e}(B.EventedAccessor);h.__decorate([y.property({readOnly:!0})],B.prototype,"connectionError",
null);return B=h.__decorate([q.subclass("esri.layers.support.StreamConnection")],B)})},"esri/layers/support/ClientSideConnection":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/zscale ./StreamConnection".split(" "),function(l,h,D,B,y,v,C,t,q,k){l.ClientSideConnection=
function(e){function b(f){var a=e.call(this)||this;a.connectionStatus="connected";a.errorString=null;const {geometryType:d,spatialReference:n,sourceSpatialReference:r}=f;a._featureZScaler=q.getGeometryZScaler(d,r,n);return a}h._inherits(b,e);var c=b.prototype;c.updateCustomParameters=function(f){};c.sendMessageToSocket=function(f){};c.sendMessageToClient=function(f){if("type"in f)switch(f.type){case "features":case "featureResult":for(const a of f.features)null!=this._featureZScaler&&this._featureZScaler(a.geometry),
this.onFeature(a)}this.onMessage(f)};return h._createClass(b)}(k);D.__decorate([B.property()],l.ClientSideConnection.prototype,"connectionStatus",void 0);D.__decorate([B.property()],l.ClientSideConnection.prototype,"errorString",void 0);l.ClientSideConnection=D.__decorate([t.subclass("esri.layers.support.ClientSideConnection")],l.ClientSideConnection);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/sources/StreamConnectionState":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v){l.StreamConnectionState=function(C){function t(q){return C.call(this,q)||this}h._inherits(t,C);h._createClass(t,[{key:"connectionStatus",get:function(){return this.connection?.connectionStatus}},{key:"errorString",get:function(){return this.connection?.errorString}}]);return t}(B);D.__decorate([y.property()],l.StreamConnectionState.prototype,"connection",void 0);D.__decorate([y.property()],l.StreamConnectionState.prototype,"connectionStatus",null);D.__decorate([y.property()],
l.StreamConnectionState.prototype,"errorString",null);l.StreamConnectionState=D.__decorate([v.subclass("esri.views.2d.layers.features.sources.StreamConnectionState")],l.StreamConnectionState);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/AttributeStore":function(){define("require ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/diffUtils ../../../../../core/support/WatchUpdatingTracking ../../../../../layers/support/FieldsIndex ../../../engine/webgl/definitions ../../../engine/webgl/DisplayId ../../../engine/webgl/Utils ../../../engine/webgl/util/debug ../tileRenderers/support/visualVariablesUtils ../../../../webgl/enums".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n){function r(m,z){return A=>z(m(A))}const p=y.getLogger("esri.views.layers.2d.features.support.AttributeStore"),g=a.createDebugLogger(a.DEBUG_ATTR_UPDATES,p);var u=B("esri-shared-array-buffer"),x=B("esri-atomics");let w=function(){function m(A,H,E,F){this.size=0;this.texelSize=4;this.dirtyEnd=this.dirtyStart=0;const {pixelType:J,layout:L,textureOnly:I}=F;this.textureOnly=I||!1;this.pixelType=J;this._ctype=H;this.layout=L;this._resetRange();this._shared=A;
this.size=E;I||(this.data=this._initData(J,E,A,H))}var z=m.prototype;z.unsetComponentAllTexels=function(A,H){const E=this.data;for(let F=0;F<this.size*this.size;F++)E[F*this.texelSize+A]&=~H;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};z.setComponentAllTexels=function(A,H){const E=this.data;for(let F=0;F<this.size*this.size;F++)E[F*this.texelSize+A]|=255&H;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};z.setComponent=function(A,H,E){const F=this.data;for(const J of E)F[J*this.texelSize+
A]|=H,this.dirtyStart=Math.min(this.dirtyStart,J),this.dirtyEnd=Math.max(this.dirtyEnd,J)};z.setComponentTexel=function(A,H,E){this.data[E*this.texelSize+A]|=H;this.dirtyStart=Math.min(this.dirtyStart,E);this.dirtyEnd=Math.max(this.dirtyEnd,E)};z.unsetComponentTexel=function(A,H,E){this.data[E*this.texelSize+A]&=~H;this.dirtyStart=Math.min(this.dirtyStart,E);this.dirtyEnd=Math.max(this.dirtyEnd,E)};z.getData=function(A,H){A=c.getDisplayIdTexel(A);return this.data[A*this.texelSize+H]};z.setData=function(A,
H,E){A=c.getDisplayIdTexel(A);0===(this.layout&1<<H)?p.error("mapview-attributes-store","Tried to set a value for a texel's readonly component"):null!=this.data&&(this.data[A*this.texelSize+H]=E,this.dirtyStart=Math.min(this.dirtyStart,A),this.dirtyEnd=Math.max(this.dirtyEnd,A))};z.lock=function(){this.pixelType===n.PixelType.UNSIGNED_BYTE&&this._shared&&x&&"local"!==this._ctype&&Atomics.store(this.data,0,1)};z.unlock=function(){this.pixelType===n.PixelType.UNSIGNED_BYTE&&this._shared&&x&&"local"!==
this._ctype&&Atomics.store(this.data,0,0)};z.expand=function(A){this.size=A;this.textureOnly||(A=this._initData(this.pixelType,A,this._shared,this._ctype),A.set(this.data),this.data=A)};z.toMessage=function(){const A=this.dirtyStart,H=this.dirtyEnd;var E=this.texelSize;if(A>H)return null;this._resetRange();const F=this.pixelType,J=this.layout,L=this.data;E=!this._shared&&"local"!==this._ctype&&L.slice(A*E,(H+1)*E)||null;return{start:A,end:H,data:E,pixelType:F,layout:J}};z._initData=function(A,H,E,
F){E=E&&"local"!==F?SharedArrayBuffer:ArrayBuffer;A=f.getPixelArrayCtor(A);H=new A(new E(H*H*4*A.BYTES_PER_ELEMENT));for(A=0;A<H.length;A+=4)H[A+1]=255;return H};z._resetRange=function(){this.dirtyStart=2147483647;this.dirtyEnd=0};h._createClass(m,[{key:"buffer",get:function(){return C.applySome(this.data,A=>A.buffer)}}]);return m}();return function(){function m(A,H){this._client=A;this.config=H;this.updatingHandles=new k.WatchUpdatingTracking;this._blocks=[];this._filters=Array(b.MAX_FILTERS);this._attributeComputeInfo=
null;this._targetType=0;this._abortController=new AbortController;this._hasScaleExpr=!1;this._size=32;this._currUpdate=this._nextUpdate=null;this._idsToHighlight=new Set;A=H.supportsTextureFloat?n.PixelType.FLOAT:n.PixelType.UNSIGNED_BYTE;g(`Creating AttributeStore ${u?"with":"without"} shared memory`);this._blockDescriptors=[{pixelType:n.PixelType.UNSIGNED_BYTE,layout:1},{pixelType:n.PixelType.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:n.PixelType.UNSIGNED_BYTE,layout:15,textureOnly:!0},
{pixelType:A,layout:15},{pixelType:A,layout:15},{pixelType:A,layout:15},{pixelType:A,layout:15}];this._blocks=this._blockDescriptors.map(()=>null)}var z=m.prototype;z.destroy=function(){this._abortController.abort();this.updatingHandles.destroy()};z.isUpdating=function(){const A=this.updatingHandles.updating||!!this._nextUpdate;B("esri-2d-log-updating")&&console.log(`Updating AttributeStore: ${A}\n  -> updatingHandles ${this.updatingHandles.updating} (currUpdate: ${!!this._currUpdate})\n  -> nextUpdate: ${!!this._nextUpdate}\n`);
return A};z.update=function(A,H){this.config=H;H=H.schema.processors[0].storage;const E=q.diff(this._schema,H);if(A.targets.feature||A.targets.aggregate)A.storage.data=!0;if(E&&(B("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",E),A.storage.data=!0,this._schema=H,this._attributeComputeInfo=null,null!=H)){switch(H.target){case "feature":this._targetType=c.DISPLAY_ID_TYPE_FEATURE;break;case "aggregate":this._targetType=c.DISPLAY_ID_TYPE_AGGREGATE}if("subtype"===H.type){this._attributeComputeInfo=
{isSubtype:!0,subtypeField:H.subtypeField,map:new Map};for(const F in H.mapping)if(A=H.mapping[F],null!=A&&null!=A.vvMapping)for(const J of A.vvMapping)this._bindAttribute(J,parseInt(F,10))}else{this._attributeComputeInfo={isSubtype:!1,map:new Map};if(null!=H.vvMapping)for(const F of H.vvMapping)this._bindAttribute(F);if(null!=H.attributeMapping)for(const F of H.attributeMapping)this._bindAttribute(F)}}};z.onTileData=function(A,H){if(null!=H.addOrUpdate)for(A=H.addOrUpdate.getCursor();A.next();)H=
A.getDisplayId(),this.setAttributeData(H,A)};z.setHighlight=async function(A,H){const E=this._getBlock(0);H=H.map(F=>c.getDisplayIdTexel(F));E.lock();E.unsetComponentAllTexels(0,1);E.setComponent(0,1,H);E.unlock();this._idsToHighlight.clear();for(const F of A)this._idsToHighlight.add(F);await this.sendUpdates()};z.updateFilters=async function(A,H,E){B("esri-2d-update-debug")&&console.debug("AttributeStore::updateFilters");const {service:F,spatialReference:J}=E;({filters:H}=H);H=H.map((L,I)=>this._updateFilter(L,
I,F,J));H=(await Promise.all(H)).some(L=>L);B("esri-2d-update-debug")&&console.debug("AttributeStore::updateFilters - finsihed");H&&(A.storage.filters=!0,B("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))};z.setData=function(A,H,E,F){const J=c.getDisplayIdTexel(A);this._ensureSizeForTexel(J);this._getBlock(H).setData(A,E,F)};z.getData=function(A,H,E){return this._getBlock(H).getData(A,E)};z.getHighlightFlag=function(A){return this._idsToHighlight.has(A)?
b.HIGHLIGHT_FLAG:0};z.unsetAttributeData=function(A){A=c.getDisplayIdTexel(A);this._getBlock(0).setData(A,0,0)};z.setAttributeData=function(A,H){const E=c.getDisplayIdTexel(A);this._ensureSizeForTexel(E);this._getBlock(0).setData(E,0,this.getFilterFlags(H));if(this._targetType===c.getDisplayIdType(A)){A=this._attributeComputeInfo;var F=this.config.supportsTextureFloat?1:2,J=null;A&&(J=A.isSubtype?A.map.get(H.readAttribute(A.subtypeField)):A.map)&&J.size&&J.forEach((L,I)=>{const G=I*F%4;I=this._getBlock(Math.floor(I*
F/4)+b.ATTRIBUTE_DATA_VV);L=L(H);if(this.config.supportsTextureFloat)I.setData(E,G,L);else if(L===b.NAN_MAGIC_NUMBER)I.setData(E,G,255),I.setData(E,G+1,255);else{L=v.clamp(Math.round(L),-32767,32766)+32768;const K=(L&65280)>>8;I.setData(E,G,L&255);I.setData(E,G+1,K)}})}};z.sendUpdates=function(){B("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate");if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=t.createResolver(),this.updatingHandles.addPromise(this._nextUpdate.promise),
this._nextUpdate.promise;const A={blocks:this._blocks.map(H=>null!=H?H.toMessage():null)};return this._currUpdate=this._createResources().then(()=>{var H=()=>{this._currUpdate=null;if(this._nextUpdate){const E=this._nextUpdate;this._nextUpdate=null;this.sendUpdates().then(()=>E.resolve())}else B("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate::No additional updates queued")};B("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate::client.update");H=this.updatingHandles.addPromise(this._client.update(A,
this._signal).then(H).catch(H));this._client.render(this._signal);return H}).catch(H=>{if(t.isAbortError(H))return this._createResourcesPromise=null,this._createResources();p.error(new D("mapview-attribute-store","Encountered an error during client update",H))})};z._ensureSizeForTexel=function(A){for(;A>=this._size*this._size&&!this._expand(););};z._bindAttribute=function(A,H){function E(){const {normalizationField:K}=A;return K?P=>{const Y=P.readAttribute(K);return Y?P.readAttribute(A.field)/Y:null}:
P=>P.readAttribute(A.field)}function F(){A.normalizationField&&p.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported.");return K=>K.getComputedNumericAtIndex(A.fieldIndex)}let J;if(null!=A.fieldIndex)J=F();else if(A.field)J=E();else return;const {valueRepresentation:L}=A;L&&(J=r(J,K=>d.getVisualVariableSizeValueRepresentationRatio(K,L)));const I=K=>null===K||isNaN(K)||Infinity===K||-Infinity===K?b.NAN_MAGIC_NUMBER:K,G=this._attributeComputeInfo;
if(G.isSubtype){const K=G.map.get(H)??new Map;K.set(A.binding,r(J,I));G.map.set(H,K)}else G.map.set(A.binding,r(J,I))};z._createResources=function(){if(null!=this._createResourcesPromise)return this._createResourcesPromise;this._getBlock(b.ATTRIBUTE_DATA_ANIMATION);this._getBlock(b.ATTRIBUTE_DATA_GPGPU);g("Initializing AttributeStore");var A={shared:u&&"local"!==this._client.type,size:this._size,blocks:C.mapMany(this._blocks,H=>({textureOnly:H.textureOnly,buffer:H.buffer,pixelType:H.pixelType}))};
this._createResourcesPromise=A=this._client.initialize(A,this._signal).catch(H=>{t.isAbortError(H)?this._createResourcesPromise=null:p.error(new D("mapview-attribute-store","Encountered an error during client initialization",H))});A.then(()=>null==this._createResourcesPromise?this._createResources():void 0);return A};z._getBlock=function(A){var H=this._blocks[A];if(null!=H)return H;g(`Initializing AttributeBlock at index ${A}`);H=new w(u,this._client.type,this._size,this._blockDescriptors[A]);this._blocks[A]=
H;this._createResourcesPromise=null;return H};z._expand=function(){if(this._size<this.config.maxTextureSize){const A=this._size<<=1;g("Expanding block size to",A,this._blocks);C.forEachSome(this._blocks,H=>H.expand(A));this._createResourcesPromise=null;this._size=A;return 0}p.error(new D("mapview-limitations","Maximum number of onscreen features exceeded."));return-1};z._updateFilter=async function(A,H,E,F){const J=this._filters[H];if(!J&&!A||(null!=J&&J.hash)===JSON.stringify(A))return!1;if(null==
A){if(!J)return!1;A=1<<H+1;E=this._getBlock(0);this._filters[H]=null;E.setComponentAllTexels(0,A);this.sendUpdates();return!0}await (await this._getFilter(H,E)).update(A,F);return!0};z._getFilter=async function(A,H){var E=this._filters[A];if(null!=E)return E;({default:E}=await new Promise((F,J)=>l(["./FeatureFilter"],L=>F(Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}))),J)));H=new E({geometryType:H.geometryType,hasM:!1,hasZ:!1,timeInfo:H.timeInfo,
fieldsIndex:new e(H.fields)});return this._filters[A]=H};z.isVisible=function(A){return!!(this._getBlock(0).getData(A,0)&2)};z.getFilterFlags=function(A){let H=0;var E=c.getDisplayIdFilterMask(A.getDisplayId());for(let J=0;J<this._filters.length;J++){var F=this._filters[J];F=!(E&1<<J)||null==F||F.check(A);H|=(F?1:0)<<J}E=0;this._idsToHighlight.size&&(A=A.getObjectId(),E=this.getHighlightFlag(A));return H<<1|E};h._createClass(m,[{key:"hasScaleExpr",get:function(){return this._hasScaleExpr}},{key:"_signal",
get:function(){return this._abortController.signal}},{key:"hasHighlight",get:function(){return 0<this._idsToHighlight.size}}]);return m}()})},"esri/views/2d/engine/webgl/DisplayId":function(){define(["exports"],function(l){l.AGGREGATE_VALID_FILTERS_MASK=254;l.DISPLAY_ID_TEXEL_MASK=8388607;l.DISPLAY_ID_TYPE_AGGREGATE=1;l.DISPLAY_ID_TYPE_FEATURE=0;l.DISPLAY_ID_TYPE_MASK=8388608;l.NONAGGREGATE_VALID_FILTERS_MASK=255;l.createDisplayId=function(h,D){return((D?8388608:0)|h)>>>0};l.getDisplayIdFilterMask=
h=>1===(h&8388608)>>>23?254:255;l.getDisplayIdTexel=h=>h&8388607;l.getDisplayIdType=h=>(h&8388608)>>>23;l.isAggregateId=function(h){return 1===(h&8388608)>>>23};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/Utils":function(){define("exports ../../../../core/Error ../../../../core/Logger ../../../../symbols/cim/enums ./enums ../../../webgl/enums ../../../webgl/VertexElementDescriptor".split(" "),function(l,h,D,B,y,v,C){function t(I){const G={};for(const K of I)G[K.name]=
K.strideInBytes;return G}function q(I){switch(I){case y.WGLGeometryType.MARKER:return x;case y.WGLGeometryType.FILL:return w;case y.WGLGeometryType.LINE:return m;case y.WGLGeometryType.TEXT:return z;case y.WGLGeometryType.LABEL:return A}}function k(I){switch(I%4){case 0:case 2:return 4;case 1:case 3:return 1}}function e(I){switch(I){case v.DataType.BYTE:case v.DataType.UNSIGNED_BYTE:return 1;case v.DataType.SHORT:case v.DataType.UNSIGNED_SHORT:return 2;case v.DataType.FLOAT:case v.DataType.INT:case v.DataType.UNSIGNED_INT:return 4}}
function b(I){const G={};for(const K in I){let P=0;G[K]=I[K].map(Y=>{const ea=new C.VertexElementDescriptor(Y.name,Y.count,Y.type,P,0,Y.normalized||!1);P+=Y.count*e(Y.type);return ea});G[K]?.forEach(Y=>Y.stride=P)}return G}const c=D.getLogger("esri.views.2d.engine.webgl.Utils"),f=t([{name:"geometry",strideInBytes:36}]),a=t([{name:"geometry",strideInBytes:12}]),d=t([{name:"geometry",strideInBytes:36}]),n=t([{name:"geometry",strideInBytes:24}]),r=t([{name:"geometry",strideInBytes:12}]),p=t([{name:"geometry",
strideInBytes:40}]),g=t([{name:"geometry",strideInBytes:36}]),u=t([{name:"geometry",strideInBytes:36}]),x=["geometry"],w=["geometry"],m=["geometry"],z=["geometry"],A=["geometry"];D={geometry:v.Usage.STATIC_DRAW};const H=new Map,E=I=>null!=I&&I.startsWith("data:image/gif"),F=I=>null!=I&&I.startsWith("data:image/png"),J=I=>{if(!I)return!1;I=I.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(I)&&/[\dz]$/i.test(I)&&4<I.length?!0:!1},L=I=>"fill"===I.type&&"CIMMarkerPlacementInsidePolygon"===
I?.cim?.markerPlacement?.type;l.C_VBO_INFO=D;l.allocateTypedArrayBuffer=function(I,G){switch(G%4){case 0:case 2:return new Uint32Array(Math.floor(I*G/4));case 1:case 3:return new Uint8Array(I*G)}};l.allocateTypedArrayBufferwithData=function(I,G){switch(G%4){case 0:case 2:return new Uint32Array(I);case 1:case 3:return new Uint8Array(I)}};l.charCodes=function(I){const G=[];for(let K=0;K<I.length;K++)G.push(I.charCodeAt(K));return G};l.copyMeshData=function(I,G,K,P,Y,ea,aa){for(const W in ea){var T=
ea[W].stride,R=k(T);const S=ea[W].data,Z=K[W].data;if(null==S||null==Z)continue;const ca=T*Y.vertexCount/R,qa=T*I/R;T=T*Y.vertexFrom/R;for(R=0;R<ca;++R)Z[R+qa]=S[R+T]}if(null!=aa&&null!=P)for(K=Y.indexCount,ea=0;ea<K;++ea)P[ea+G]=aa[ea+Y.indexFrom]-Y.vertexFrom+I};l.createGeometryData=function(I,G){const K=[];for(let P=0;5>P;++P){const Y=q(P),ea={};for(const aa of Y)ea[aa]={data:G(P,aa)};K.push({data:I(P),buffers:ea})}return K};l.createProgramDescriptor=(I,G)=>{if(!H.has(I)){const Y=b(G);var K=Y;
var P={};for(const ea in K){const aa=K[ea];P[ea]=aa?.length?aa[0].stride:0}K=P;P=new Map;for(const ea in G)for(const aa of G[ea])P.set(aa.name,aa.location);H.set(I,{strides:K,bufferLayouts:Y,attributes:P})}return H.get(I)};l.forEachGeometryType=function(I){I(y.WGLGeometryType.FILL);I(y.WGLGeometryType.LINE);I(y.WGLGeometryType.MARKER);I(y.WGLGeometryType.TEXT);I(y.WGLGeometryType.LABEL)};l.getBytes=e;l.getCapType=function(I){switch(I){case "butt":return B.CapType.BUTT;case "round":return B.CapType.ROUND;
case "square":return B.CapType.SQUARE;default:return c.error(new h("mapview-invalid-type",`Cap type ${I} is not a valid option. Defaulting to round`)),B.CapType.ROUND}};l.getJoinType=function(I){switch(I){case "miter":return B.JoinType.MITER;case "bevel":return B.JoinType.BEVEL;case "round":return B.JoinType.ROUND;default:return c.error(new h("mapview-invalid-type",`Join type ${I} is not a valid option. Defaulting to round`)),B.JoinType.ROUND}};l.getNamedBuffers=q;l.getPMSResourceSize=function(I){const G=
"width"in I&&I.width||"size"in I&&I.size||0;return"maxVVSize"in I&&I.maxVVSize||G};l.getPixelArrayCtor=function(I){switch(I){case v.PixelType.UNSIGNED_BYTE:return Uint8Array;case v.PixelType.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case v.PixelType.FLOAT:return Float32Array;default:c.error(new h("webgl-utils",`Unable to handle type ${I}`))}};l.getPixelBytes=function(I){switch(I){case v.PixelType.UNSIGNED_BYTE:return 1;case v.PixelType.UNSIGNED_SHORT_4_4_4_4:return 2;case v.PixelType.FLOAT:return 4;
default:c.error(new h("webgl-utils",`Unable to handle type ${I}`))}};l.getStrides=function(I,G){switch(I){case y.WGLGeometryType.MARKER:switch(G){case y.WGLSymbologyType.HEATMAP:return a;default:return f}case y.WGLGeometryType.FILL:switch(G){case y.WGLSymbologyType.DOT_DENSITY:return r;case y.WGLSymbologyType.SIMPLE:case y.WGLSymbologyType.OUTLINE_FILL_SIMPLE:return n;default:return d}case y.WGLGeometryType.LINE:return p;case y.WGLGeometryType.TEXT:return g;case y.WGLGeometryType.LABEL:return u}};
l.getUrl=I=>"imageData"in I&&I.imageData&&"contentType"in I&&I.contentType?`data:${I.contentType};base64,${I.imageData}`:"url"in I?I.url:null;l.getVVType=function(I){switch(I){case "opacity":return y.VVType.OPACITY;case "color":return y.VVType.COLOR;case "rotation":return y.VVType.ROTATION;case "size":return y.VVType.SIZE;default:return c.error(`Cannot interpret unknown vv: ${I}`),null}};l.is3D=I=>I.type&&I.type.toLowerCase().includes("3d");l.isDefined=function(I){return null!=I};l.isGIF=I=>"url"in
I&&I.url&&(I.url.includes(".gif")||E(I.url))||"contentType"in I&&"image/gif"===I.contentType||"imageData"in I&&E(I.imageData);l.isGIFDataUri=E;l.isImageResource=I=>"url"in I&&I.url||"imageData"in I&&I.imageData;l.isMarkerPlacementInsidePolygon=L;l.isNumber=function(I){return"number"===typeof I};l.isPNG=I=>"url"in I&&I.url&&(I.url.includes(".png")||F(I.url))||"contentType"in I&&"image/png"===I.contentType||"imageData"in I&&F(I.imageData);l.isPNGDataUri=F;l.isSVGImage=I=>I.includes("data:image/svg+xml");
l.isSVGResource=I=>"path"in I&&J(I.path);l.isSimple=function(I){switch(I.type){case "line":return"CIMSolidStroke"===I.cim.type&&!I.dashTemplate;case "fill":return"CIMSolidFill"===I.cim.type;case "esriSFS":return"esriSFSSolid"===I.style||"esriSFSNull"===I.style;case "esriSLS":return"esriSLSSolid"===I.style||"esriSLSNull"===I.style;default:return!1}};l.isValidSVG=J;l.shouldRepeat=function(I){switch("cim"in I?I.cim.type:I.type){case "esriSMS":case "esriPMS":case "CIMPointSymbol":return!1;case "CIMVectorMarker":case "CIMCharacterMarker":case "CIMPictureMarker":return L(I);
default:return!0}};l.strideToPackingFactor=k;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(l){l.WGLGeometryType=void 0;(function(h){h[h.FILL=0]="FILL";h[h.LINE=1]="LINE";h[h.MARKER=2]="MARKER";h[h.TEXT=3]="TEXT";h[h.LABEL=4]="LABEL"})(l.WGLGeometryType||(l.WGLGeometryType={}));l.WGLDrawPhase=void 0;(function(h){h[h.NONE=0]="NONE";h[h.MAP=1]="MAP";h[h.LABEL=2]="LABEL";h[h.LABEL_ALPHA=4]="LABEL_ALPHA";h[h.HITTEST=
8]="HITTEST";h[h.HIGHLIGHT=16]="HIGHLIGHT";h[h.CLIP=32]="CLIP";h[h.DEBUG=64]="DEBUG";h[h.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(l.WGLDrawPhase||(l.WGLDrawPhase={}));l.VVType=void 0;(function(h){h[h.SIZE=0]="SIZE";h[h.COLOR=1]="COLOR";h[h.OPACITY=2]="OPACITY";h[h.ROTATION=3]="ROTATION"})(l.VVType||(l.VVType={}));l.WGLVVFlag=void 0;(function(h){h[h.NONE=0]="NONE";h[h.OPACITY=1]="OPACITY";h[h.COLOR=2]="COLOR";h[h.ROTATION=4]="ROTATION";h[h.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";h[h.SIZE_SCALE_STOPS=
16]="SIZE_SCALE_STOPS";h[h.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";h[h.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(l.WGLVVFlag||(l.WGLVVFlag={}));l.WGLVVTarget=void 0;(function(h){h[h.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";h[h.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";h[h.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";h[h.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(l.WGLVVTarget||(l.WGLVVTarget={}));l.MosaicType=void 0;(function(h){h[h.SPRITE=0]="SPRITE";h[h.GLYPH=1]=
"GLYPH"})(l.MosaicType||(l.MosaicType={}));l.WGLSymbologyType=void 0;(function(h){h[h.DEFAULT=0]="DEFAULT";h[h.SIMPLE=1]="SIMPLE";h[h.DOT_DENSITY=2]="DOT_DENSITY";h[h.OUTLINE_FILL=3]="OUTLINE_FILL";h[h.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE";h[h.HEATMAP=5]="HEATMAP";h[h.PIE_CHART=6]="PIE_CHART"})(l.WGLSymbologyType||(l.WGLSymbologyType={}));Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/util/debug":function(){define(["exports"],function(l){l.DEBUG_ATTR_UPDATES=
!1;l.createDebugLogger=(h,D)=>h&&((...B)=>D.warn("DEBUG:",...B))||(()=>null);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":function(){define("exports ../../../../../../core/screenUtils ../../../../engine/webgl/color ../../../../engine/webgl/definitions ../../../../engine/webgl/enums ../../../../engine/webgl/visualVariablesUtils".split(" "),function(l,h,D,B,y,v){function C(f){return{value:f.value,size:h.toPt(f.size)}}
function t(f){return(f??[]).map(a=>C(a))}function q(f){return"string"===typeof f||"number"===typeof f?h.toPt(f):{type:"size",expression:f.expression,stops:t(f.stops)}}function k(f){const a={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"===typeof f.field)if(f.stops){if(8<f.stops.length)return null;f=f.stops;for(var d=0;8>d;++d){const n=f[Math.min(d,f.length-1)];a.values[d]=n.value;a.opacities[d]=n.opacity}}else return null;else if(f.stops&&0<=f.stops.length)for(f=f.stops&&0<=f.stops.length?
f.stops[0].opacity:0,d=0;8>d;d++)a.values[d]=Infinity,a.opacities[d]=f;else return null;return a}function e(f,a,d){f[4*a]=d.r/255;f[4*a+1]=d.g/255;f[4*a+2]=d.b/255;f[4*a+3]=d.a}function b(f){if(null==f||f.normalizationField)return null;const a={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"===typeof f.field)if(f.stops){if(8<f.stops.length)return null;a.field=f.field;f=f.stops;for(var d=0;8>d;++d){const n=f[Math.min(d,f.length-
1)];a.values[d]=n.value;e(a.colors,d,n.color)}}else return null;else if(f.stops&&0<=f.stops.length)for(f=f.stops&&0<=f.stops.length&&f.stops[0].color,d=0;8>d;d++)a.values[d]=Infinity,e(a.colors,d,f);else return null;for(f=0;32>f;f+=4)D.premultiplyAlpha(a.colors,f,!0);return a}const c=f=>{const a=[],d=[];f=t(f);const n=f.length;for(let r=0;6>r;r++){const p=f[Math.min(r,n-1)];a.push(p.value);d.push(null==p.size?B.NAN_MAGIC_NUMBER:h.pt2px(p.size))}return{values:new Float32Array(a),sizes:new Float32Array(d)}};
l.convertColorVariable=b;l.convertVisualVariables=function(f){const a=f&&0<f.length?{}:null,d=a?{}:null;if(!a||!d)return{vvFields:a,vvRanges:d};for(const n of f)if(n.field&&(a[n.type]=n.field),"size"===n.type)switch(d.size||(d.size={}),f=n,v.getTypeOfSizeVisualVariable(f)){case y.WGLVVFlag.SIZE_MINMAX_VALUE:d.size.minMaxValue={minDataValue:f.minDataValue,maxDataValue:f.maxDataValue,minSize:q(f.minSize),maxSize:q(f.maxSize)};break;case y.WGLVVFlag.SIZE_SCALE_STOPS:d.size.scaleStops={stops:t(f.stops)};
break;case y.WGLVVFlag.SIZE_FIELD_STOPS:if(f.levels){const r={};for(const p in f.levels)r[p]=c(f.levels[p]);d.size.fieldStops={type:"level-dependent",levels:r}}else d.size.fieldStops={type:"static",...c(f.stops)};break;case y.WGLVVFlag.SIZE_UNIT_VALUE:d.size.unitValue={unit:f.valueUnit,valueRepresentation:f.valueRepresentation??void 0}}else"color"===n.type?d.color=b(n):"opacity"===n.type?d.opacity=k(n):"rotation"===n.type&&(d.rotation={type:n.rotationType});return{vvFields:a,vvRanges:d}};l.getVisualVariableSizeValueRepresentationRatio=
function(f,a){if(!f||!a)return f;switch(a){case "radius":case "distance":return 2*f;case "area":return Math.sqrt(f)}return f};l.normalizeSizeElement=q;l.normalizeSizeStops=t;l.stopToSizeStop=C;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(l){function h(B){return B?72*B/96:0}const D=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;l.castRenderScreenPointArray=function(B){return B};l.castRenderScreenPointArray3=function(B){return B};
l.castScreenPointArray=function(B){return B};l.createRenderScreenPoint=function(B=0,y=0){return{x:B,y}};l.createRenderScreenPointArray=function(B=0,y=0){return[B,y]};l.createRenderScreenPointArray3=function(B=0,y=0,v=0){return[B,y,v]};l.createScreenPoint=function(B=0,y=0){return{x:B,y}};l.createScreenPointArray=function(B=0,y=0){return[B,y]};l.pt2px=function(B){return B?B/72*96:0};l.px2pt=h;l.screenPointArrayToObject=function(B,y){return y?(y.x=B[0],y.y=B[1],y):{x:B[0],y:B[1]}};l.screenPointObjectToArray=
function(B,y){return y?(y[0]=B.x,y[1]=B.y,2<y.length&&(y[2]=0),y):[B.x,B.y]};l.toPt=function(B){if("string"===typeof B){var y=B.match(D);if(y){var v=Number(y[1]);y=y[3]&&y[3].toLowerCase();B="-"===B.charAt(0);v="px"===y?h(v):v;return B?-v:v}console.warn("screenUtils.toPt: input not recognized!");return null}return B};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/color":function(){define(["exports","./number"],function(l,h){l.premultiplyAlpha=function(D,
B=0,y=!1){const v=D[B+3];D[B]*=v;D[B+1]*=v;D[B+2]*=v;y||(D[B+3]*=255);return D};l.premultiplyAlphaRGBA=function(D){if(!D)return 0;const {r:B,g:y,b:v,a:C}=D;return h.i8888to32(B*C,y*C,v*C,255*C)};l.premultiplyAlphaRGBAArray=function(D){if(!D)return 0;const [B,y,v,C]=D;return h.i8888to32(C/255*B,C/255*y,C/255*v,C)};l.writeColor=function(D,B,y=0){if(null==B)D[y]=0,D[y+1]=0,D[y+2]=0,D[y+3]=0;else{var {r:v,g:C,b:t,a:q}=B;D[y]=v*q/255;D[y+1]=C*q/255;D[y+2]=t*q/255;D[y+3]=q}};Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/views/2d/engine/webgl/number":function(){define(["exports"],function(l){function h(y,v,C){return Math.round(Math.max(Math.min(y,C),v))}const D=new Float32Array(1),B=new Uint32Array(D.buffer);l.i16=function(y){return h(y,-32768,32767)};l.i1616to32=function(y,v){return 65535&y|v<<16};l.i32=function(y){return h(y,-2147483648,2147483647)};l.i8=function(y){return h(y,-128,127)};l.i8816to32=function(y,v,C){return y&255|(v&255)<<8|C<<16};l.i8888to32=function(y,v,C,t){return y&
255|(v&255)<<8|(C&255)<<16|t<<24};l.numTo32=function(y){return y|0};l.toFloat32=function(y){B[0]=y;return D[0]};l.toUint32=function(y){D[0]=y;return B[0]};l.u16=function(y){return h(y,0,65535)};l.u32=function(y){return h(y,0,4294967295)};l.u32to4Xu8=function(y){return[y&255,(y&65280)>>>8,(y&16711680)>>>16,(y&4278190080)>>>24]};l.u4u4to8=function(y,v){return 15&y|(15&v)<<4};l.u8=function(y){return h(y,0,255)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define(["exports",
"../../../../core/Error","../../../../core/Logger","./enums","./Utils"],function(l,h,D,B,y){l.getTypeOfSizeVisualVariable=function(v){if(y.isNumber(v.minDataValue)&&y.isNumber(v.maxDataValue)&&null!=v.minSize&&null!=v.maxSize)return B.WGLVVFlag.SIZE_MINMAX_VALUE;if((v.expression&&"view.scale"===v.expression||v.valueExpression&&"$view.scale"===v.valueExpression)&&Array.isArray(v.stops))return B.WGLVVFlag.SIZE_SCALE_STOPS;if((null!=v.field||v.expression&&"view.scale"!==v.expression||v.valueExpression&&
"$view.scale"!==v.valueExpression)&&(Array.isArray(v.stops)||"levels"in v&&v.levels))return B.WGLVVFlag.SIZE_FIELD_STOPS;if((null!=v.field||v.expression&&"view.scale"!==v.expression||v.valueExpression&&"$view.scale"!==v.valueExpression)&&null!=v.valueUnit)return B.WGLVVFlag.SIZE_UNIT_VALUE;D.getLogger("esri.views.2d.engine.webgl").error(new h("mapview-bad-type","Found invalid size VisualVariable",v));return B.WGLVVFlag.NONE};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/BinStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry ../../../../../core/Evented ../../../../../core/has ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/accessorSupport/diffUtils ../../../../../geohash/GeohashTree ../../../../../geohash/geohashUtils ../../../../../geometry/support/aaBoundingBox ../../../../../geometry/support/Ellipsoid ../../../../../geometry/support/spatialReferenceUtils ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/data/projectionSupport ../../../engine/webgl/DisplayId ../FeatureStore2D ../Store2D ./FeatureSetReaderJSON ../../../../../geometry/SpatialReference ../../../../../geometry/Polygon ../../../../../geometry/Extent".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x,w,m){const z=v.getLogger("esri.view.2d.layers.features.support.BinStore"),A=e.create();D=function(H){function E(J,L,I,G){var K=H.call(this,J,I)||this;K.type="bin";K.events=new B;K.objectIdField="aggregateId";K.featureAdapter=p.featureAdapter;K._geohashLevel=5;K._geohashBuf=[];K._serviceInfo=G;K.geometryInfo=J.geometryInfo;K._spatialReference=L;K._projectionSupportCheck=n.checkProjectionSupport(L,x.WGS84);K._bitsets.geohash=I.getBitset(I.createBitset());
K._bitsets.inserted=I.getBitset(I.createBitset());return K}h._inherits(E,H);var F=E.prototype;F.destroy=function(){this._tree&&this._tree.destroy()};F.updateSchema=async function(J,L){const I=this._schema;try{await h._get(h._getPrototypeOf(E.prototype),"updateSchema",this).call(this,J,L),await this._projectionSupportCheck}catch(K){}this._fields=this._schema.params.fields;const G=t.diff(I,L);if(L&&(null!=G||J.source||J.storage.filters)){if(t.hasDiff(G,"params.fields")||t.hasDiff(G,"params")||!this._tree||
J.source)this._tree&&this._tree.destroy(),this._tree=new q.GeohashTree(this._statisticFields,this._serviceInfo),this._tree.onRelease=K=>K.displayId&&this._storage.releaseDisplayId(K.displayId),this._geohashLevel=this._schema.params.fixedBinLevel,this._rebuildTree(),y("esri-2d-update-debug")&&z.info("Aggregate mesh needs update due to tree changing");y("esri-2d-update-debug")&&z.info("Aggregate mesh needs update due to tree changing");J.targets[L.name]=!0;J.mesh=!1}else I&&(J.mesh=!0)};F.clear=function(){this._rebuildTree()};
F.sweepFeatures=function(J,L){this._bitsets.inserted.forEachSet(I=>{J.has(I)||(I=L.lookupByDisplayIdUnsafe(I),this._remove(I))})};F.sweepAggregates=function(J,L,I){};F.onTileData=function(J,L,I,G,K=!0){if(!this._schema||null==L.addOrUpdate)return L;this.events.emit("changed");var P=this._getTransforms(J,this._spatialReference);const Y=L.addOrUpdate.getCursor();for(;Y.next();)this._update(Y,G);if(L.status.mesh||!K)return L;G=[];this._getBinsForTile(G,J,P,I);L.addOrUpdate=u.FeatureSetReaderJSON.fromOptimizedFeatures(G,
{fields:this.fields,geometryType:"esriGeometryPolygon",objectIdField:this.objectIdField});L.addOrUpdate.attachStorage(I);L.end=!0;L.isRepush||(L.clear=!0);for(P=L.addOrUpdate.getCursor();P.next();)G=P.getDisplayId(),this._bitsets.computed.unset(G),this.setComputedAttributes(I,P,G,J.scale);return L};F.forEachBin=function(J){this._tree.forEach(J)};F.forEach=function(J){this._tree.forEach(L=>{L.depth===this._geohashLevel&&(L=this._toFeatureJSON(L),L=u.FeatureSetReaderJSON.fromFeatures([L],{objectIdField:this.objectIdField,
globalIdField:null,geometryType:this.geometryInfo.geometryType,fields:this.fields}).getCursor(),L.next(),J(L))})};F.forEachInBounds=function(J,L){};F.forEachBounds=function(J,L){const {hasM:I,hasZ:G}=this.geometryInfo;for(const K of J)J=f.getBoundsOptimizedGeometry(A,K.readGeometry(),G,I),null!=J&&L(J)};F.onTileUpdate=function(J){};F.getAggregate=function(J){const L=r.createDisplayId(J,!0);J=this._tree.findIf(I=>I.displayId===L);return C.applySome(J,I=>this._toFeatureJSON(I))};F.getAggregates=function(){return this._tree.findAllIf(J=>
J.depth===this._geohashLevel).map(this._toFeatureJSON.bind(this))};F.getDisplayId=function(J){const L=this._tree.findIf(I=>I.id===J);return C.applySome(L,I=>I.displayId)};F.getFeatureDisplayIdsForAggregate=function(J){const L=this._tree.findIf(I=>I.id===J);return null!=L?Array.from(L.displayIds):[]};F.getDisplayIdForReferenceId=function(J){const L=this._tree.findIf(I=>1===I.displayIds.size&&I.displayIds.has(J));return C.applySome(L,I=>I.displayId)};F._toFeatureJSON=function(J){const L=this._spatialReference;
return{displayId:J.displayId,attributes:J.getAttributes(),geometry:f.convertToGeometry(J.getGeometry(L),"esriGeometryPolygon",!1,!1),centroid:null}};F._rebuildTree=function(){this._bitsets.computed.clear();this._bitsets.inserted.clear();this._tree&&this._tree.clear()};F._remove=function(J){const L=J.getDisplayId(),I=J.getXHydrated(),G=J.getYHydrated(),K=this._geohashBuf[2*L],P=this._geohashBuf[2*L+1];this._bitsets.inserted.has(L)&&(this._bitsets.inserted.unset(L),this._tree.removeCursor(J,I,G,K,P,
this._geohashLevel))};F._update=function(J,L){const I=J.getDisplayId(),G=this._bitsets.inserted;L=L.isVisible(I);var K=G.has(I);L!==K&&(L?(L=J.getXHydrated(),K=J.getYHydrated(),this._setGeohash(I,L,K)&&(this._tree.insertCursor(J,I,L,K,this._geohashBuf[2*I],this._geohashBuf[2*I+1],this._geohashLevel),G.set(I))):this._remove(J))};F._setGeohash=function(J,L,I){if(this._bitsets.geohash.has(J))return!0;const G=this._geohashBuf;if(this._spatialReference.isWebMercator)L=L/b.earth.radius*57.29577951308232,
k.setGeohashBuf(G,J,57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-I/b.earth.radius))),L-360*Math.floor((L+180)/360),12);else{I=n.project({x:L,y:I},this._spatialReference,x.WGS84);if(!I)return!1;k.setGeohashBuf(G,J,I.y,I.x,12)}this._bitsets.geohash.set(J);return!0};F._getBinsForTile=function(J,L,I,G){try{var K=this._getGeohashBounds(L);const P=this._tree.getBins(K);for(const Y of P){Y.displayId||(Y.displayId=G.createDisplayId(!0));K=null;const ea=Y.getGeometry(this._spatialReference,I.tile);ea||
(K=Y.getGeometryCentroid(this._spatialReference,I.tile));const aa=new a.OptimizedFeature(ea,Y.getAttributes(),K);aa.objectId=Y.id;aa.displayId=Y.displayId;J.push(aa)}}catch(P){z.error("Unable to get bins for tile",L.key.id)}};F._getGeohash=function(J,L,I){const G={geohashX:0,geohashY:0};k.setGeohashXY(G,L,J,I);return G};F._getGeohashBounds=function(J){const L=this._getGeohashLevel(J.key.level),I=[J.extent.xmin,J.extent.ymin,J.extent.xmax,J.extent.ymax];var G=w.fromExtent(m.fromBounds(I,this._spatialReference));
J=n.project(G,this._spatialReference,x.WGS84,{densificationStep:64*J.resolution});J=f.convertFromPolygon(new d,J,!1,!1);var K=J.coords.filter((Y,ea)=>!(ea%2)),P=J.coords.filter((Y,ea)=>ea%2);J=Math.min(...K);G=Math.min(...P);K=Math.max(...K);P=Math.max(...P);J=this._getGeohash(J,G,L);G=this._getGeohash(K,P,L);return{bounds:I,geohashBounds:{xLL:J.geohashX,yLL:J.geohashY,xTR:G.geohashX,yTR:G.geohashY},level:L}};F._getGeohashLevel=function(J){return this._schema.params.fixedBinLevel};F._getTransforms=
function(J,L){const I={originPosition:"upperLeft",scale:[J.resolution,J.resolution],translate:[J.bounds[0],J.bounds[3]]};L=c.getInfo(L);if(!L)return{tile:I,left:null,right:null};const [G,K]=L.valid;return{tile:I,left:{...I,translate:[K,J.bounds[3]]},right:{...I,translate:[G-K+J.bounds[0],J.bounds[3]]}}};h._createClass(E,[{key:"featureSpatialReference",get:function(){return this._spatialReference}},{key:"fields",get:function(){return this._fields}}]);return E}(g.Store2D);l.BinStore=D;Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/geohash/GeohashTree":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../core/CircularArray ./geohashUtils ../geometry/SpatialReference ../layers/graphics/featureConversionUtils ../layers/graphics/OptimizedGeometry ../layers/graphics/data/projectionSupport ../views/2d/layers/features/support/FeatureSetReaderJSON".split(" "),function(l,h,D,B,y,v,C,t,q){let k=function(){function b(f=[],a,d=8096){this.onRelease=n=>{};this._nodes=0;this._root=
new e(this,0,0,0);this._statisticFields=f;this._pool=d?new D(8096):null;this._serviceInfo=a}var c=b.prototype;c.destroy=function(){this.clear()};c._acquire=function(f,a,d){this._nodes++;let n=null;null!=this._pool&&(n=this._pool.dequeue());null!=n?n.realloc(f,a,d):n=new e(this,f,a,d);return n};c._release=function(f){this.onRelease(f);this._nodes--;null!=this._pool&&this._pool.enqueue(f)};c.dropLevels=function(f){this.forEach(a=>{if(a.depth>=f)for(let d=0;d<a.children.length;d++){const n=a.children[d];
n&&this._release(n)}});this.forEach(a=>{if(a.depth>=f)for(let d=0;d<a.children.length;d++)a.children[d]=null})};c.clear=function(){this.forEach(f=>this._release(f));this._root=new e(this,0,0,0)};c.insert=function(f,a,d=0){const n=q.FeatureSetReaderJSON.fromOptimizedFeatures([f],this._serviceInfo).getCursor();n.next();const r=n.readGeometry();if(r){var [p,g]=r.coords;this.insertCursor(n,f.displayId,p,g,f.geohashX,f.geohashY,a,d)}};c.insertCursor=function(f,a,d,n,r,p,g,u=0){let x=this._root,w=0,m=0,
z=0;for(;null!==x;){x.depth>=u&&(x.count+=1,x.xTotal+=d,x.yTotal+=n,x.xGeohashTotal+=r,x.yGeohashTotal+=p,x.referenceId=a,this._updateStatisticsCursor(f,x,1));if(w>=g){x.add(a);break}var A=Math.ceil((w+1)/2),H=Math.floor((w+1)/2);const F=1-w%2;var E=30-(3*A+2*H);A=30-(2*A+3*H);E=(r&7*F+3*(1-F)<<E)>>E;A=(p&3*F+7*(1-F)<<A)>>A;H=E+A*(8*F+4*(1-F));const J=2*F+3*(1-F);m=m<<3*F+2*(1-F)|E;z=z<<J|A;null==x.children[H]&&(x.children[H]=this._acquire(m,z,w+1));w+=1;x=x.children[H]}};c.remove=function(f,a){const d=
q.FeatureSetReaderJSON.fromOptimizedFeatures([f],this._serviceInfo).getCursor();d.next();const n=d.readGeometry();if(n){var [r,p]=n.coords;this.removeCursor(d,r,p,f.geohashX,f.geohashY,a)}};c.removeCursor=function(f,a,d,n,r,p){let g=this._root,u=0;for(;null!==g;){--g.count;g.xTotal-=a;g.yTotal-=d;g.xGeohashTotal-=n;g.yGeohashTotal-=r;this._updateStatisticsCursor(f,g,-1);if(u>=p){g.remove(f.getDisplayId());break}var x=Math.ceil((u+1)/2);const z=Math.floor((u+1)/2);var w=1-u%2,m=30-(3*x+2*z);x=30-(2*
x+3*z);w=((n&7*w+3*(1-w)<<m)>>m)+((r&3*w+7*(1-w)<<x)>>x)*(8*w+4*(1-w));m=g.children[w];1===m?.count&&(this._release(m),g.children[w]=null);u+=1;g=m}};c.forEach=function(f){let a=this._root;for(;null!==a;){const d=this._linkChildren(a)||a.next;f(a);a=d}};c.find=function(f,a,d){return this._root.find(f,a,d,0,0,0)};c.findIf=function(f){let a=null;this.forEach(d=>{f(d)&&(a=d)});return a};c.findAllIf=function(f){const a=[];this.forEach(d=>{f(d)&&a.push(d)});return a};c.findSingleOccupancyNode=function(f,
a,d,n,r){let p=this._root;for(;null!==p;){var g=p.depth,u=p.xNode,x=p.yNode;const E=1-g%2;var w=p.xGeohashTotal/p.count,m=p.yGeohashTotal/p.count;if(1===p.count&&f<w&&w<=d&&a<m&&m<=n)return p;if(g>=r)p=p.next;else{m=Math.ceil((g+1)/2);g=Math.floor((g+1)/2);w=30-(3*m+2*g);var z=30-(2*m+3*g),A=~((1<<w)-1),H=~((1<<z)-1);u<<=3*E+2*(1-E);x<<=2*E+3*(1-E);g=Math.max(u,(f&A)>>w);m=Math.max(x,(a&H)>>z);w=Math.min(u+8*E+4*(1-E),(d&A)>>w);z=Math.min(x+4*E+8*(1-E),(n&H)>>z);for(A=H=null;m<=z;m++)for(let F=g;F<=
w;F++){const J=p.children[F-u+(m-x)*(8*E+4*(1-E))];J&&(H||(H=J,H.next=p.next),A&&(A.next=J),A=J,J.next=p.next)}p=H||p.next}}return null};c.getRegionDisplayIds=function(f){let a=this._root;const {bounds:d,geohashBounds:n,level:r}=f,[p,g,u,x]=d,w=[];for(;null!==a;){f=a.depth;var m=a.xNode,z=a.yNode;if(f>=r)f=a.xTotal/a.count,m=a.yTotal/a.count,f>=p&&f<=u&&m>=g&&m<=x&&a.displayIds.forEach(I=>w.push(I)),a=a.next;else{var A=Math.ceil((f+1)/2),H=Math.floor((f+1)/2);f=1-f%2;var E=30-(3*A+2*H),F=30-(2*A+
3*H),J=~((1<<E)-1),L=~((1<<F)-1);m<<=3*f+2*(1-f);z<<=2*f+3*(1-f);A=Math.max(m,(n.xLL&J)>>E);H=Math.max(z,(n.yLL&L)>>F);E=Math.min(m+8*f+4*(1-f),(n.xTR&J)>>E);F=Math.min(z+4*f+8*(1-f),(n.yTR&L)>>F);for(J=L=null;H<=F;H++)for(let I=A;I<=E;I++){const G=a.children[I-m+(H-z)*(8*f+4*(1-f))];G&&(L||(L=G,L.next=a.next),J&&(J.next=G),J=G,G.next=a.next)}a=L||a.next}}return w};c.getRegionStatistics=function(f){var a=this._root;let d=0,n=0,r=0;const p={},{bounds:g,geohashBounds:u,level:x}=f,[w,m,z,A]=g;for(f=
0;null!==a;){var H=a.depth,E=a.xNode,F=a.yNode;if(H>=x)H=a.xTotal/a.count,E=a.yTotal/a.count,H>w&&H<=z&&E>m&&E<=A&&(d+=a.count,n+=a.xTotal,r+=a.yTotal,1===a.count&&(f=a.referenceId),this._aggregateStatistics(p,a.statistics)),a=a.next;else{var J=Math.ceil((H+1)/2),L=Math.floor((H+1)/2);H=1-H%2;var I=30-(3*J+2*L),G=30-(2*J+3*L),K=~((1<<I)-1),P=~((1<<G)-1);E<<=3*H+2*(1-H);F<<=2*H+3*(1-H);J=Math.max(E,(u.xLL&K)>>I);L=Math.max(F,(u.yLL&P)>>G);I=Math.min(E+8*H+4*(1-H),(u.xTR&K)>>I);G=Math.min(F+4*H+8*(1-
H),(u.yTR&P)>>G);K=P=null;for(let Y=L;Y<=G;Y++)for(let ea=J;ea<=I;ea++){const aa=a.children[ea-E+(Y-F)*(8*H+4*(1-H))];if(aa)if(Y!==L&&Y!==G&&ea!==J&&ea!==I){const T=aa.xTotal/aa.count,R=aa.yTotal/aa.count;T>w&&T<=z&&R>m&&R<=A&&(d+=aa.count,n+=aa.xTotal,r+=aa.yTotal,1===aa.count&&(f=aa.referenceId),this._aggregateStatistics(p,aa.statistics))}else P||(P=aa,P.next=a.next),K&&(K.next=aa),K=aa,aa.next=a.next}a=P||a.next}}a=this.normalizeStatistics(p,d);return{count:d,attributes:a,xTotal:n,yTotal:r,referenceId:f}};
c.getBins=function(f){const a=[],{geohashBounds:d,level:n}=f;for(f=this._root;null!==f;){var r=f.depth,p=f.xNode,g=f.yNode;if(r>=n)a.push(f),f=f.next;else{var u=Math.ceil((r+1)/2),x=Math.floor((r+1)/2);r=1-r%2;var w=30-(3*u+2*x),m=30-(2*u+3*x),z=~((1<<w)-1),A=~((1<<m)-1);p<<=3*r+2*(1-r);g<<=2*r+3*(1-r);u=Math.max(p,(d.xLL&z)>>w);x=Math.max(g,(d.yLL&A)>>m);w=Math.min(p+8*r+4*(1-r),(d.xTR&z)>>w);m=Math.min(g+4*r+8*(1-r),(d.yTR&A)>>m);for(z=A=null;x<=m;x++)for(let H=u;H<=w;H++){const E=f.children[H-
p+(x-g)*(8*r+4*(1-r))];E&&(A||(A=E,A.next=f.next),z&&(z.next=E),z=E,E.next=f.next)}f=A||f.next}}return a};c._linkChildren=function(f){let a=null,d=null;for(let n=0;n<=f.children.length;n++){const r=f.children[n];r&&(a||(a=r,a.next=f.next),d&&(d.next=r),d=r,r.next=f.next)}return a};c._updateStatisticsCursor=function(f,a,d){for(const p of this._statisticFields){const g=p.name,u=p.inField?f.readAttribute(p.inField):f.getComputedNumericAtIndex(p.inFieldIndex);switch(p.statisticType){case "min":if(isNaN(u))break;
if(!a.statistics[g]){a.statistics[g]={value:u};break}a.statistics[g].value=Math.min(a.statistics[g].value,u);break;case "max":if(isNaN(u))break;if(!a.statistics[g]){a.statistics[g]={value:u};break}a.statistics[g].value=Math.max(a.statistics[g].value,u);break;case "sum":case "avg":a.statistics[g]||(a.statistics[g]={value:0,nanCount:0});var n=a.statistics[g].value,r=a.statistics[g].nanCount??0;null==u||isNaN(u)?a.statistics[g].nanCount=r+d:a.statistics[g].value=n+d*u;break;case "avg_angle":a.statistics[g]||
(a.statistics[g]={x:0,y:0,nanCount:0});n=a.statistics[g].x;r=a.statistics[g].y;const x=a.statistics[g].nanCount??0,w=Math.PI/180;null==u||isNaN(u)?a.statistics[g].nanCount=x+d:(a.statistics[g].x=n+d*Math.cos(u*w),a.statistics[g].y=r+d*Math.sin(u*w));break;case "mode":a.statistics[g]||(a.statistics[g]={}),a.statistics[g][u]=(a.statistics[g][u]||0)+d}}};c._aggregateStatistics=function(f,a){for(const d of this._statisticFields){const n=d.name;switch(d.statisticType){case "min":if(!f[n]){f[n]={value:a[n].value};
break}f[n].value=Math.min(f[n].value,a[n].value);break;case "max":if(!f[n]){f[n]={value:a[n].value};break}f[n].value=Math.max(f[n].value,a[n].value);break;case "sum":case "avg":case "avg_angle":case "mode":f[n]||(f[n]={});for(const r in a[n])f[n][r]=(f[n][r]||0)+a[n][r]}}};c.normalizeStatistics=function(f,a){const d={};for(const r of this._statisticFields){const p=r.name;switch(r.statisticType){case "min":case "max":var n=f[p];if(!a||!n)break;d[p]=n.value;break;case "count":if(!a)break;d[p]=a;break;
case "sum":if(!a)break;const {value:g,nanCount:u}=f[p];if(!(a-u))break;d[p]=g;break;case "avg":if(!a)break;const {value:x,nanCount:w}=f[p];if(!(a-w))break;d[p]=x/(a-w);break;case "avg_angle":if(!a)break;const {x:m,y:z,nanCount:A}=f[p];if(!(a-A))break;d[p]=180/Math.PI*Math.atan2(z/(a-A),m/(a-A));break;case "mode":n=f[p];let H=0,E=0,F=null;for(const J in n){const L=n[J];L===H?E+=1:L>H&&(H=L,E=1,F=J)}d[p]="null"===F||1<E?null:F}}return d};h._createClass(b,[{key:"count",get:function(){return this._root.count}},
{key:"size",get:function(){return this._nodes}},{key:"poolSize",get:function(){return this._pool?.size??0}},{key:"depth",get:function(){let f=0;this.forEach(a=>f=Math.max(f,a.depth));return f}}]);return b}(),e=function(){function b(f,a,d,n){this.yTotal=this.xTotal=this.count=0;this.statistics={};this.referenceId=this.displayId=0;this.displayIds=new Set;this.next=null;this.yGeohashTotal=this.xGeohashTotal=this.yNode=this.xNode=this.depth=0;this._tree=f;this.children=Array(32);for(f=0;f<this.children.length;f++)this.children[f]=
null;this.xNode=a;this.yNode=d;this.depth=n}var c=b.prototype;c.realloc=function(f,a,d){for(let n=0;n<this.children.length;n++)this.children[n]=null;this.xNode=f;this.yNode=a;this.depth=d;this.next=null;this.count=this.yTotal=this.xTotal=this.referenceId=this.displayId=this.yGeohashTotal=this.xGeohashTotal=0;this.statistics={};this.displayIds.clear();return this};c.add=function(f){this.displayIds.add(f)};c.remove=function(f){this.displayIds.delete(f)};c.getAttributes=function(){const f=this._tree.normalizeStatistics(this.statistics,
this.count);f.referenceId=null;f.aggregateId=this.id;f.aggregateCount=this.count;return f};c.getGeometry=function(f,a){const d=this.getLngLatBounds(),[n,r,p,g]=d;f=t.project({rings:[[[n,r],[n,g],[p,g],[p,r],[n,r]]]},y.WGS84,f);f=v.convertFromPolygon(new C,f,!1,!1);return null!=a?v.quantizeOptimizedGeometry(new C,f,!1,!1,"esriGeometryPolygon",a,!1,!1):f};c.getGeometryCentroid=function(f,a){const d=this.getLngLatBounds(),[n,r,p,g]=d;f=t.project({x:(n+p)/2,y:(r+g)/2},y.WGS84,f);f=v.convertFromPoint(new C,
f);return null!=a?v.quantizeOptimizedGeometry(new C,f,!1,!1,"esriGeometryPoint",a,!1,!1):f};c.getLngLatBounds=function(){var f=this.depth;const a=Math.ceil(f/2);f=Math.floor(f/2);return B.decodeGeohashXY({geohashX:this.xNode<<30-(3*a+2*f),geohashY:this.yNode<<30-(2*a+3*f)},this.depth)};c.find=function(f,a,d,n,r,p){if(n>=d)return this;var g=1-n%2;const u=3*g+2*(1-g),x=2*g+3*(1-g),w=30-r-u,m=30-p-x;g=this.children[((f&7*g+3*(1-g)<<w)>>w)+((a&3*g+7*(1-g)<<m)>>m)*(8*g+4*(1-g))];return null==g?null:g.find(f,
a,d,n+1,r+u,p+x)};h._createClass(b,[{key:"id",get:function(){return`${this.xNode}.${this.yNode}`}}]);return b}();l.GeohashNode=e;l.GeohashTree=k;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geohash/geohashUtils":function(){define(["exports"],function(l){function h(e){return 57>=e?e-48:104>=e?e-88:107>=e?e-89:110>=e?e-90:e-91}function D(e,b,c){e[0]=b;e[1]=c;return e}function B(e,b){const c=(e[0]+e[1])/2,f=!b;e[0]=f*e[0]+b*c;e[1]=f*c+b*e[1]}function y(e,b){b=b>(e[0]+e[1])/2;
B(e,b);return b}function v(e,b){return b?1&e|(4&e)>>1|(16&e)>>2:(2&e)>>1|(8&e)>>2}function C(e,b){return b?(2&e)>>1|(8&e)>>2:1&e|(4&e)>>1|(16&e)>>2}function t(e,b,c){var f=!((e.length-1)%2);const a=e.substring(0,e.length-1);var d=h(e.charCodeAt(e.length-1)),n=0,r=0;let p=0;var g=0;f?(n=8,r=4,p=1&d|(4&d)>>1|(16&d)>>2,g=(2&d)>>1|(8&d)>>2):(n=4,r=8,g=1&d|(4&d)>>1|(16&d)>>2,p=(2&d)>>1|(8&d)>>2);b=p+b;d=g+c;c=Math.floor(b/n);g=Math.floor(d/r);n=b-c*n;r=d-g*r;f="0123456789bcdefghjkmnpqrstuvwxyz"[f?n&1|
(r&1)<<1|(n&2)<<1|(r&2)<<2|(n&4)<<2:r&1|(n&1)<<1|(r&2)<<1|(n&2)<<2|(r&4)<<2];return 1<e.length&&(c||g)?t(a,c,g)+f:a+f}const q=new Float64Array(2),k=new Float64Array(2);l.convertGeohash32ToXY=function(e,b){let c=e=0,f=30,a=30;for(let r=0;r<b.length;r++){var d=b.charCodeAt(r),n=h(d);d=0===r%2;const p=v(n,d);n=C(n,d);f-=d?3:2;a-=d?2:3;e|=p<<f;c|=n<<a}return{geohashX:e,geohashY:c}};l.decodeBase32Char=h;l.decodeGeohash=function(e,b){const c=D(q,-90,90),f=D(k,-180,180);for(let d=0;d<b.length;d++){var a=
b.charCodeAt(d);a=h(a);0===d%2?(B(f,!!(16&a)),B(f,!!(4&a)),B(f,!!(1&a)),B(c,!!(8&a)),B(c,!!(2&a))):(B(c,!!(16&a)),B(c,!!(4&a)),B(c,!!(1&a)),B(f,!!(8&a)),B(f,!!(2&a)))}e[0]=(c[0]+c[1])/2;e[1]=(f[0]+f[1])/2;return e};l.decodeGeohashXY=function(e,b){let c=-90,f=90,a=-180,d=180;for(let x=0;x<b;x++){var n=Math.ceil((x+1)/2),r=Math.floor((x+1)/2),p=1-x%2,g=30-(3*n+2*r),u=30-(2*n+3*r);r=3*p+2*(1-p);n=2*p+3*(1-p);g=(7*p+3*(1-p)<<g&e.geohashX)>>g;p=(3*p+7*(1-p)<<u&e.geohashY)>>u;for(--r;0<=r;r--){u=(a+d)/
2;const w=g&1<<r?1:0;a=(1-w)*a+w*u;d=(1-w)*u+w*d}for(--n;0<=n;n--)g=(c+f)/2,r=p&1<<n?1:0,c=(1-r)*c+r*g,f=(1-r)*g+r*f}return[a,c,d,f]};l.encodeBase32Char=function(e){return"0123456789bcdefghjkmnpqrstuvwxyz"[e]};l.encodeGeohash=function(e,b,c){let f="";const a=D(q,-90,90),d=D(k,-180,180);for(let n=0;n<c;n++){let r=0;n%2?(r|=y(a,e)<<4,r|=y(d,b)<<3,r|=y(a,e)<<2,r|=y(d,b)<<1,r|=y(a,e)<<0):(r|=y(d,b)<<4,r|=y(a,e)<<3,r|=y(d,b)<<2,r|=y(a,e)<<1,r|=y(d,b)<<0);f+="0123456789bcdefghjkmnpqrstuvwxyz"[r]}return f};
l.getRelativeGeohash=t;l.setGeohashBuf=function(e,b,c,f,a){a%2&&(a+=1);let d=0,n=0,r=-90,p=90,g=-180,u=180;for(let z=0;z<a/2;z++){for(var x=0;5>x;x++){var w=(g+u)/2,m=f>w?1:0;d|=m<<29-(x+5*z);g=(1-m)*g+m*w;u=(1-m)*w+m*u}for(x=0;5>x;x++)w=(r+p)/2,m=c>w?1:0,n|=m<<29-(x+5*z),r=(1-m)*r+m*w,p=(1-m)*w+m*p}e[2*b]=d;e[2*b+1]=n};l.setGeohashXY=function(e,b,c,f){f%2&&(f+=1);let a=0,d=0,n=-90,r=90,p=-180,g=180;for(let m=0;m<f/2;m++){for(var u=0;5>u;u++){var x=(p+g)/2,w=c>x?1:0;a|=w<<29-(u+5*m);p=(1-w)*p+w*x;
g=(1-w)*x+w*g}for(u=0;5>u;u++)x=(n+r)/2,w=b>x?1:0,d|=w<<29-(u+5*m),n=(1-w)*n+w*x,r=(1-w)*x+w*r}e.geohashX=a;e.geohashY=d};l.unpackXBits=v;l.unpackYBits=C;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/ClusterStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry ../../../../../core/Evented ../../../../../core/has ../../../../../core/maybe ../../../../../core/accessorSupport/diffUtils ../../../../../geohash/GeohashTree ../../../../../geohash/geohashUtils ../../../../../geometry/support/aaBoundingBox ../../../../../geometry/support/Ellipsoid ../../../../../geometry/support/spatialReferenceUtils ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/data/projectionSupport ../../../engine/webgl/definitions ../../../engine/webgl/DisplayId ../FeatureStore2D ../Store2D ./FeatureSetReaderJSON ../../../../../geometry/SpatialReference ../../../../../geometry/Polygon ../../../../../geometry/Extent".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x,w,m){const z=k.create();let A=function(H){function E(J,L,I,G,K){L=new a([],[L,I]);J=H.call(this,L,G,null,J)||this;J.geohashBoundsInfo=K;return J}h._inherits(E,H);E.create=function(J,L,I,G,K,P,Y,ea){L=new E(L,I,G,P,Y);L.displayId=J.createDisplayId(!0);L.referenceId=ea;L.tileLevel=K;return L};var F=E.prototype;F.update=function(J,L,I,G,K,P){this.geometry.coords[0]=J;this.geometry.coords[1]=L;this.tileLevel=I;this.attributes=G;this.geohashBoundsInfo=
K;this.referenceId=null;this.referenceId=P;return this};F.toJSON=function(){return{attributes:{...this.attributes,aggregateId:this.objectId,referenceId:1===this.attributes.cluster_count?this.referenceId:null},geometry:{x:this.geometry.coords[0],y:this.geometry.coords[1]}}};h._createClass(E,[{key:"count",get:function(){return this.attributes.cluster_count}}]);return E}(f.OptimizedFeatureWithGeometry);D=function(H){function E(J,L,I,G){var K=H.call(this,J,I)||this;K.type="cluster";K.events=new B;K.objectIdField=
"aggregateId";K.featureAdapter=p.featureAdapter;K._geohashLevel=0;K._tileLevel=0;K._aggregateValueRanges={};K._aggregateValueRangesChanged=!1;K._geohashBuf=[];K._clusters=new Map;K._tiles=new Map;K._serviceInfo=G;K.geometryInfo=J.geometryInfo;K._spatialReference=L;K._projectionSupportCheck=d.checkProjectionSupport(L,x.WGS84);K._bitsets.geohash=I.getBitset(I.createBitset());K._bitsets.inserted=I.getBitset(I.createBitset());return K}h._inherits(E,H);var F=E.prototype;F.destroy=function(){this._tree.destroy()};
F.updateSchema=async function(J,L){const I=this._schema;try{await h._get(h._getPrototypeOf(E.prototype),"updateSchema",this).call(this,J,L),await this._projectionSupportCheck}catch(K){}this._fields=[...this._schema.params.fields,{name:"referenceId",alias:"referenceId",type:"esriFieldTypeInteger"}];this._fields.some(K=>"cluster_count"===K.name)||this._fields.push({name:"cluster_count",alias:"cluster_count",type:"esriFieldTypeInteger"});const G=C.diff(I,L);if(L&&(null!=G||J.source||J.storage.filters)){if(C.hasDiff(G,
"params.fields")||!this._tree||J.source)this._tree&&this._tree.destroy(),this._tree=new t.GeohashTree(this._statisticFields,this._serviceInfo),this._rebuildTree(),y("esri-2d-update-debug")&&console.debug("Aggregate mesh needs update due to tree changing");y("esri-2d-update-debug")&&console.debug("Applying Update - ClusterStore:",G);J.targets[L.name]=!0;J.mesh=!1;this._aggregateValueRanges={}}else I&&(J.mesh=!0)};F.clear=function(){this._rebuildTree()};F.sweepFeatures=function(J,L){this._bitsets.inserted.forEachSet(I=>
{J.has(I)||(I=L.lookupByDisplayIdUnsafe(I),this._remove(I))})};F.sweepAggregates=function(J,L,I){this._clusters.forEach((G,K)=>{G&&G.tileLevel!==I&&(J.releaseDisplayId(G.displayId),L.unsetAttributeData(G.displayId),this._clusters.delete(K))})};F.onTileData=function(J,L,I,G,K=!0){if(!this._schema||null==L.addOrUpdate)return L;this.events.emit("changed");var P=this._getTransforms(J,this._spatialReference);const Y=L.addOrUpdate.getCursor();for(;Y.next();)this._update(Y,G);if(L.status.mesh||!K)return L;
G=[];this._getClustersForTile(G,J,this._schema.params.clusterRadius,I,P);L.addOrUpdate=u.FeatureSetReaderJSON.fromOptimizedFeatures(G,{fields:this.fields,geometryType:"esriGeometryPoint",objectIdField:this.objectIdField});L.addOrUpdate.attachStorage(I);L.clear=!0;L.end=!0;for(P=L.addOrUpdate.getCursor();P.next();)G=P.getDisplayId(),this._bitsets.computed.unset(G),this.setComputedAttributes(I,P,G,J.scale);this._aggregateValueRangesChanged&&L.end&&(this.events.emit("valueRangesChanged",{valueRanges:this._aggregateValueRanges}),
this._aggregateValueRangesChanged=!1);return L};F.onTileUpdate=function({added:J,removed:L}){J.length&&(this._tileLevel=J=J[0].level,this._setGeohashLevel(J));if(this._schema){var I=this._schema.params.clusterRadius;L.forEach(G=>{this._tiles.delete(G.key.id);this._markTileClustersForDeletion(G,I)})}};F.getAggregate=function(J){for(const L of this._clusters.values())if((L?.displayId&r.DISPLAY_ID_TEXEL_MASK)===(J&r.DISPLAY_ID_TEXEL_MASK))return L.toJSON();return null};F.getAggregates=function(){const J=
[];for(const L of this._clusters.values())L?.tileLevel===this._tileLevel&&J.push(L.toJSON());return J};F.getDisplayId=function(J){return(J=this._clusters.get(J))?J.displayId:null};F.getFeatureDisplayIdsForAggregate=function(J){return(J=this._clusters.get(J))?this._tree.getRegionDisplayIds(J.geohashBoundsInfo):[]};F.getDisplayIdForReferenceId=function(J){for(const L of this._clusters.values())if(L?.referenceId===J)return L.displayId;return null};F.getAggregateValueRanges=function(){return this._aggregateValueRanges};
F.forEach=function(J){this._clusters.forEach(L=>{L&&(L=L.toJSON(),L=u.FeatureSetReaderJSON.fromFeatures([L],{objectIdField:this.objectIdField,globalIdField:null,geometryType:this.geometryInfo.geometryType,fields:this.fields}).getCursor(),L.next(),J(L))})};F.forEachInBounds=function(J,L){};F.forEachBounds=function(J,L){const {hasM:I,hasZ:G}=this.geometryInfo;for(const K of J)J=c.getBoundsOptimizedGeometry(z,K.readGeometry(),G,I),null!=J&&L(J)};F.size=function(){let J=0;this.forEach(L=>J++);return J};
F._rebuildTree=function(){this._bitsets.computed.clear();this._bitsets.inserted.clear();this._tree&&this._tree.clear()};F._remove=function(J){const L=J.getDisplayId(),I=J.getXHydrated(),G=J.getYHydrated(),K=this._geohashBuf[2*L],P=this._geohashBuf[2*L+1];this._bitsets.inserted.has(L)&&(this._bitsets.inserted.unset(L),this._tree.removeCursor(J,I,G,K,P,this._geohashLevel))};F._update=function(J,L){const I=J.getDisplayId(),G=this._bitsets.inserted;L=L.isVisible(I);var K=G.has(I);L!==K&&(L?(L=J.getXHydrated(),
K=J.getYHydrated(),this._setGeohash(I,L,K)&&(this._tree.insertCursor(J,I,L,K,this._geohashBuf[2*I],this._geohashBuf[2*I+1],this._geohashLevel),G.set(I))):this._remove(J))};F._setGeohash=function(J,L,I){if(this._bitsets.geohash.has(J))return!0;const G=this._geohashBuf;if(this._spatialReference.isWebMercator)L=L/e.earth.radius*57.29577951308232,q.setGeohashBuf(G,J,57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-I/e.earth.radius))),L-360*Math.floor((L+180)/360),12);else{I=d.project({x:L,y:I},this._spatialReference,
x.WGS84);if(!I)return!1;q.setGeohashBuf(G,J,I.y,I.x,12)}this._bitsets.geohash.set(J);return!0};F._getClustersForTile=function(J,L,I,G,K,P=!0){var Y=2*I;I=Math.ceil(2**L.key.level*n.TILE_SIZE/Y)+1;var ea=Math.ceil(this._schema.params.clusterPixelBuffer/Y)+0,aa=Math.ceil(n.TILE_SIZE/Y);const {row:T,col:R}=L.key;var W=Math.floor(R*n.TILE_SIZE/Y)-ea;Y=Math.floor(T*n.TILE_SIZE/Y)-ea;const S=W+aa+2*ea;ea=Y+aa+2*ea;for(aa=L.tileInfoView.getLODInfoAt(L.key.level);W<=S;W++)for(let qa=Y;qa<=ea;qa++){var Z=
W;aa.wrap&&(Z=0>W?W+I:W%I);const ya=aa.wrap&&0>W,xa=aa.wrap&&W%I!==W;Z=this._lookupCluster(G,aa,L.key.level,Z,qa,L);if(null!=Z){var ca=v.applySome(K,Ca=>ya?Ca.left:xa?Ca.right:Ca.tile);if((!P||null!=ca)&&Z.count&&null!=ca&&P){const Ca=Z.geometry.clone();let Da=Z.attributes;Ca.coords[0]=c.quantizeX(ca,Ca.coords[0]);Ca.coords[1]=c.quantizeY(ca,Ca.coords[1]);1===Z.count&&null!=Z.referenceId&&(Da={...Z.attributes,referenceId:Z.referenceId});ca=new f.OptimizedFeature(Ca,Da);ca.displayId=Z.displayId;J.push(ca)}}}};
F._getGeohashLevel=function(J){return Math.min(Math.ceil(J/2+2),12)};F._setGeohashLevel=function(J){J=this._getGeohashLevel(J);J=1*(Math.floor(J/1)+1)-1;this._geohashLevel!==J&&(this._geohashLevel=J,this._rebuildTree(),this._bitsets.geohash.clear())};F._getTransforms=function(J,L){const I={originPosition:"upperLeft",scale:[J.resolution,J.resolution],translate:[J.bounds[0],J.bounds[3]]};L=b.getInfo(L);if(!L)return{tile:I,left:null,right:null};const [G,K]=L.valid;return{tile:I,left:{...I,translate:[K,
J.bounds[3]]},right:{...I,translate:[G-K+J.bounds[0],J.bounds[3]]}}};F._getClusterId=function(J,L,I){return(J&15)<<28|(L&16383)<<14|I&16383};F._markForDeletion=function(J,L,I){J=this._getClusterId(J,L,I);this._clusters.delete(J)};F._getClusterBounds=function(J,L,I){var G=this._schema.params.clusterRadius,K=2*G;L=I%2?L*K:L*K-G;const P=I*K;G=L+K;I=2**J.level*n.TILE_SIZE;J.wrap&&0>L&&(L=0);J.wrap&&G>I&&(G=I);I=P/n.TILE_SIZE;G/=n.TILE_SIZE;K=(P-K)/n.TILE_SIZE;L=J.getXForColumn(L/n.TILE_SIZE);I=J.getYForRow(I);
G=J.getXForColumn(G);J=J.getYForRow(K);return[L,I,G,J]};F._getGeohash=function(J,L,I){const G={geohashX:0,geohashY:0};q.setGeohashXY(G,L,J,I);return G};F._getGeohashBounds=function(J,L){const I=this._getGeohashLevel(J.key.level);if(this._spatialReference.isWebMercator){const [aa,T,R,W]=L;var G=T,K=R,P=W,Y=J=L=0,ea=0;L=aa/e.earth.radius*57.29577951308232;L-=360*Math.floor((L+180)/360);J=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-G/e.earth.radius)));Y=K/e.earth.radius*57.29577951308232;Y-=360*
Math.floor((Y+180)/360);ea=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-P/e.earth.radius)));P={geohashX:0,geohashY:0};G={geohashX:0,geohashY:0};q.setGeohashXY(P,J,L,I);q.setGeohashXY(G,ea,Y,I);return{bounds:[aa,T,R,W],geohashBounds:{xLL:P.geohashX,yLL:P.geohashY,xTR:G.geohashX,yTR:G.geohashY},level:I}}P=w.fromExtent(m.fromBounds(L,this._spatialReference));J=d.project(P,this._spatialReference,x.WGS84,{densificationStep:64*J.resolution});if(!J)return null;J=c.convertFromPolygon(new a,J,!1,!1);
Y=J.coords.filter((aa,T)=>!(T%2));ea=J.coords.filter((aa,T)=>T%2);J=Math.min(...Y);P=Math.min(...ea);Y=Math.max(...Y);ea=Math.max(...ea);J=this._getGeohash(J,P,I);P=this._getGeohash(Y,ea,I);return{bounds:L,geohashBounds:{xLL:J.geohashX,yLL:J.geohashY,xTR:P.geohashX,yTR:P.geohashY},level:I}};F._lookupCluster=function(J,L,I,G,K,P){const Y=this._getClusterId(I,G,K),ea=this._clusters.get(Y);L=this._getClusterBounds(L,G,K);P=this._getGeohashBounds(P,L);if(null==P)return null;var aa=this._tree.getRegionStatistics(P);
const {count:T,xTotal:R,yTotal:W,referenceId:S}=aa;G=T?R/T:0;K=T?W/T:0;if(0===T)return this._clusters.set(Y,null),null;aa={cluster_count:T,...aa.attributes};J=null!=ea?ea.update(G,K,I,aa,P,S):A.create(J,Y,G,K,I,aa,P,S);if(0===T){const [Z,ca,qa,ya]=L;J.geometry.coords[0]=(Z+qa)/2;J.geometry.coords[1]=(ca+ya)/2}this._clusters.set(Y,J);this._updateAggregateValueRangeForCluster(J,J.tileLevel);return J};F._updateAggregateValueRangeForCluster=function(J,L){const I=this._aggregateValueRanges[L]||{minValue:Infinity,
maxValue:0},G=I.minValue,K=I.maxValue;I.minValue=Math.min(G,J.count);I.maxValue=Math.max(K,J.count);this._aggregateValueRanges[L]=I;if(G!==I.minValue||K!==I.maxValue)this._aggregateValueRangesChanged=!0};F._markTileClustersForDeletion=function(J,L){var I=2*L;L=Math.ceil(n.TILE_SIZE/I);const {row:G,col:K}=J.key,P=Math.floor(K*n.TILE_SIZE/I);I=Math.floor(G*n.TILE_SIZE/I);for(let Y=P;Y<P+L;Y++)for(let ea=I;ea<I+L;ea++)this._markForDeletion(J.key.level,Y,ea)};h._createClass(E,[{key:"featureSpatialReference",
get:function(){return this._spatialReference}},{key:"fields",get:function(){return this._fields}}]);return E}(g.Store2D);l.ClusterInfo=A;l.ClusterStore=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/ComputedAttributeStorage":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../engine/webgl/DisplayId","./DisplayIdGenerator","./StaticBitSet"],function(l,h,D,B,y){function v(t,q,k){if(!(t.length>q))for(;t.length<=
q;)t.push(k)}let C=function(){function t(){this._numerics=[];this._strings=[];this._idGenerator=new B.DisplayIdGenerator;this._allocatedSize=256;this._bitsets=[];this._instanceIds=[];this._bounds=[]}var q=t.prototype;q.createBitset=function(){const k=this._bitsets.length;this._bitsets.push(y.StaticBitSet.create(this._allocatedSize,D.DISPLAY_ID_TEXEL_MASK));return k+1};q.getBitset=function(k){return this._bitsets[k-1]};q._expand=function(){this._allocatedSize<<=1;for(const k of this._bitsets)k.resize(this._allocatedSize)};
q._ensureNumeric=function(k,e){this._numerics[k]||(this._numerics[k]=[]);v(this._numerics[k],e,0)};q._ensureInstanceId=function(k){v(this._instanceIds,k,0)};q._ensureString=function(k,e){this._strings[k]||(this._strings[k]=[]);v(this._strings[k],e,null)};q.createDisplayId=function(k=!1){const e=this._idGenerator.createId();e>this._allocatedSize&&this._expand();return D.createDisplayId(e,k)};q.releaseDisplayId=function(k){for(const e of this._bitsets)e.unset(k);return this._idGenerator.releaseId(k&
D.DISPLAY_ID_TEXEL_MASK)};q.getComputedNumeric=function(k,e){return this.getComputedNumericAtIndex(k&D.DISPLAY_ID_TEXEL_MASK,0)};q.setComputedNumeric=function(k,e,b){return this.setComputedNumericAtIndex(k&D.DISPLAY_ID_TEXEL_MASK,b,0)};q.getComputedString=function(k,e){return this.getComputedStringAtIndex(k&D.DISPLAY_ID_TEXEL_MASK,0)};q.setComputedString=function(k,e,b){return this.setComputedStringAtIndex(k&D.DISPLAY_ID_TEXEL_MASK,0,b)};q.getComputedNumericAtIndex=function(k,e){k&=D.DISPLAY_ID_TEXEL_MASK;
this._ensureNumeric(e,k);return this._numerics[e][k]};q.setComputedNumericAtIndex=function(k,e,b){k&=D.DISPLAY_ID_TEXEL_MASK;this._ensureNumeric(e,k);this._numerics[e][k]=b};q.getInstanceId=function(k){k&=D.DISPLAY_ID_TEXEL_MASK;this._ensureInstanceId(k);return this._instanceIds[k]};q.setInstanceId=function(k,e){k&=D.DISPLAY_ID_TEXEL_MASK;this._ensureInstanceId(k);this._instanceIds[k]=e};q.getComputedStringAtIndex=function(k,e){k&=D.DISPLAY_ID_TEXEL_MASK;this._ensureString(e,k);return this._strings[e][k]};
q.setComputedStringAtIndex=function(k,e,b){k&=D.DISPLAY_ID_TEXEL_MASK;this._ensureString(e,k);this._strings[e][k]=b};q.getXMin=function(k){return this._bounds[4*(k&D.DISPLAY_ID_TEXEL_MASK)]};q.getYMin=function(k){return this._bounds[4*(k&D.DISPLAY_ID_TEXEL_MASK)+1]};q.getXMax=function(k){return this._bounds[4*(k&D.DISPLAY_ID_TEXEL_MASK)+2]};q.getYMax=function(k){return this._bounds[4*(k&D.DISPLAY_ID_TEXEL_MASK)+3]};q.setBounds=function(k,e){e=e.readHydratedGeometry();if(!e||!e.coords.length)return!1;
let b=Infinity,c=Infinity,f=-Infinity,a=-Infinity;e.forEachVertex((d,n)=>{b=Math.min(b,d);c=Math.min(c,n);f=Math.max(f,d);a=Math.max(a,n)});k&=D.DISPLAY_ID_TEXEL_MASK;v(this._bounds,4*k+4,0);this._bounds[4*k]=b;this._bounds[4*k+1]=c;this._bounds[4*k+2]=f;this._bounds[4*k+3]=a;return!0};return h._createClass(t)}();l.ComputedAttributeStorage=C;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/DisplayIdGenerator":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers",
"../../../engine/webgl/DisplayId"],function(l,h,D){let B=function(){function y(){this._freeIds=[];this._idCounter=1}var v=y.prototype;v.createId=function(C=!1){return D.createDisplayId(this._getFreeId(),C)};v.releaseId=function(C){this._freeIds.push(C)};v._getFreeId=function(){return this._freeIds.length?this._freeIds.pop():this._idCounter++};return h._createClass(y)}();l.DisplayIdGenerator=B;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(l,h,D,B,y,v,C){const t={added:[],removed:[]},q=new Set,k=new C(0,0,0,0);return function(e){function b(f){var a=e.call(this)||this;a._tiles=new Map;a._index=B.rbush(9,D("esri-csp-restrictions")?d=>({minX:d.bounds[0],minY:d.bounds[1],maxX:d.bounds[2],maxY:d.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);a.tiles=[];a.tileScheme=f;return a}l._inherits(b,e);var c=b.prototype;c.destroy=function(){this.clear()};c.clear=function(){this.tiles.length=0;this._tiles.clear();this._index.clear()};
c.has=function(f){return this._tiles.has(f)};c.get=function(f){return this._tiles.get(f)};c.boundsIntersections=function(f){return this._index.search({minX:f[0],minY:f[1],maxX:f[2],maxY:f[3]})};c.updateTiles=function(f){const a={added:[],removed:[]};for(const d of f.added)if(!this.has(d)){const n=new y.Tile(this.tileScheme,d);this._tiles.set(d,n);this._index.insert(n);a.added.push(n)}for(const d of f.removed)this.has(d)&&(f=this.get(d),this._tiles.delete(d),this._index.remove(f),a.removed.push(f));
this.tiles.length=0;this._tiles.forEach(d=>this.tiles.push(d));(a.added.length||a.removed.length)&&this.emit("update",a)};c.setViewState=function(f){if(f=this.tileScheme.getTileCoverage(f,0)){var {spans:a,lodInfo:d}=f,{level:n}=d;if(0<a.length)for(const {row:p,colFrom:g,colTo:u}of a)for(var r=g;r<=u;r++){const x=k.set(n,p,d.normalizeCol(r),d.getWorldForColumn(r)).id;q.add(x);if(!this.has(x)){const w=new y.Tile(this.tileScheme,x);this._tiles.set(x,w);this._index.insert(w);this.tiles.push(w);t.added.push(w)}}for(n=
this.tiles.length-1;0<=n;n--)r=this.tiles[n],q.has(r.id)||(this._tiles.delete(r.id),this.tiles.splice(n,1),this._index.remove(r),t.removed.push(r));(t.added.length||t.removed.length)&&this.emit("update",t);v.pool.release(f);q.clear();t.added.length=0;t.removed.length=0}};return l._createClass(b)}(h)})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(l,h,D,B,y,v,C){let t=function(){function q(e,b){this.key=new C(0,0,0,0);this.bounds=y.create();this.objectIds=new Set;this.key.set(b);b=e.getLODInfoAt(this.key);this.tileInfoView=e;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=b.resolution;this.scale=b.scale;this.level=b.level}var k=q.prototype;k.createChildTiles=function(){const e=this.key.getChildKeys(),b=D.acquire();for(let c=0;c<e.length;c++)b[c]=new q(this.tileInfoView,e[c]);return b};k.getQuantizationParameters=
function(){return v.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};h._createClass(q,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return B.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return q}();l.Tile=t;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(l,h){let D=function(){function B(v,C,t,q){this.set(v,C,t,q)}B.getId=function(v,C,t,q){return"object"===typeof v?`${v.level}/${v.row}/${v.col}/${v.world}`:`${v}/${C}/${t}/${q}`};var y=B.prototype;y.acquire=function(v,C,t,q){this.set(v,
C,t,q)};y.contains=function(v){const C=v.level-this.level;return 0<=C&&this.row===v.row>>C&&this.col===v.col>>C&&this.world===v.world};y.equals=function(v){return this.level===v.level&&this.row===v.row&&this.col===v.col&&this.world===v.world};y.clone=function(){return new B(this)};y.release=function(){this.world=this.col=this.row=this.level=0};y.set=function(v,C,t,q){if(null==v)this.world=this.col=this.row=this.level=0;else if("object"===typeof v)this.level=v.level||0,this.row=v.row||0,this.col=v.col||
0,this.world=v.world||0;else if("string"===typeof v){const [k,e,b,c]=v.split("/");this.level=parseFloat(k);this.row=parseFloat(e);this.col=parseFloat(b);this.world=parseFloat(c)}else this.level=+v,this.row=+C,this.col=+t,this.world=+q||0;return this};y.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};y.getParentKey=function(){return 0>=this.level?null:new B(this.level-1,this.row>>1,this.col>>1,this.world)};y.getChildKeys=function(){const v=this.level+1,C=this.row<<
1,t=this.col<<1,q=this.world;return[new B(v,C,t,q),new B(v,C,t+1,q),new B(v,C+1,t,q),new B(v,C+1,t+1,q)]};y.compareRowMajor=function(v){return this.row<v.row?-1:this.row>v.row?1:this.col<v.col?-1:this.col>v.col?1:0};l._createClass(B,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(v){this.set(v)}},{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return B}();D.pool=new h(D,null,null,25,
50);return D})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(l,h){let D=function(){function B(){this.spans=[]}var y=B.prototype;y.acquire=function(v){this.lodInfo=v};y.release=function(){this.lodInfo=null;this.spans.length=0};y.forEach=function(v,C){const {spans:t,lodInfo:q}=this,{level:k}=q;if(0!==t.length)for(const {row:e,colFrom:b,colTo:c}of t)for(let f=b;f<=c;f++)v.call(C,k,e,q.normalizeCol(f),q.getWorldForColumn(f))};
return l._createClass(B)}();D.pool=new h(D);return D})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(l,h,D,B,y,v){const C=new y("0/0/0/0");let t=function(){function k(b,c,f,a,d,n,r,p){this.x=b;this.ymin=c;this.ymax=f;this.invM=a;this.leftAdjust=d;this.rightAdjust=n;this.leftBound=r;this.rightBound=p}k.create=function(b,c){b[1]>c[1]&&
([b,c]=[c,b]);const [f,a]=b,[d,n]=c;b=d-f;c=n-a;c=0!==c?b/c:0;const r=(Math.ceil(a)-a)*c,p=(Math.floor(a)-a)*c;return new k(f,Math.floor(a),Math.ceil(n),c,0>b?r:p,0>b?p:r,0>b?d:f,0>b?f:d)};var e=k.prototype;e.incrRow=function(){this.x+=this.invM};e.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};e.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return l._createClass(k)}();const q=[[0,0],[0,0],[0,0],[0,0]];return function(){function k(b,
c=null,f=b.lods[0].level,a=b.lods[b.lods.length-1].level){this.tileInfo=b;this.fullExtent=c;this.scales=[];this._infoByScale={};this._infoByLevel={};const d=b.lods.filter(r=>r.level>=f&&r.level<=a);this.minScale=d[0].scale;this.maxScale=d[d.length-1].scale;const n=this._lodInfos=d.map(r=>D.create(b,r,c));d.forEach((r,p)=>{this._infoByLevel[r.level]=n[p];this._infoByScale[r.scale]=n[p];this.scales[p]=r.scale},this);this._wrap=b.isWrappable}var e=k.prototype;e.getLODInfoAt=function(b){return this._infoByLevel["number"===
typeof b?b:b.level]};e.getTileBounds=function(b,c,f=!1){C.set(c);return(c=this._infoByLevel[C.level])?c.getTileBounds(b,C,f):b};e.getTileCoords=function(b,c,f=!1){C.set(c);return(c=this._infoByLevel[C.level])?c.getTileCoords(b,C,f):b};e.getTileCoverage=function(b,c=192,f=!0,a="closest"){if(!f&&(b.scale>this.minScale||b.scale<this.maxScale))return null;f="closest"===a?this.getClosestInfoForScale(b.scale):this.getSmallestInfoForScale(b.scale);a=B.pool.acquire(f);const d=this._wrap;var n=Infinity;let r=
-Infinity;const p=a.spans;q[0][0]=q[0][1]=q[1][1]=q[3][0]=-c;q[1][0]=q[2][0]=b.size[0]+c;q[2][1]=q[3][1]=b.size[1]+c;for(g of q)b.toMap(g,g),g[0]=f.getColumnForX(g[0]),g[1]=f.getRowForY(g[1]);b=[];var g=3;for(c=0;4>c;c++)q[c][1]===q[g][1]?g=c:(g=t.create(q[c],q[g]),n=Math.min(g.ymin,n),r=Math.max(g.ymax,r),void 0===b[g.ymin]&&(b[g.ymin]=[]),b[g.ymin].push(g),g=c);if(null==n||null==r||100<r-n)return null;for(c=[];n<r;){null!=b[n]&&(c=c.concat(b[n]));g=Infinity;var u=-Infinity;for(var x=c.length-1;0<=
x;x--){var w=c[x];g=Math.min(g,w.getLeftCol());u=Math.max(u,w.getRightCol())}g=Math.floor(g);u=Math.floor(u);if(n>=f.first[1]&&n<=f.last[1])if(d)if(f.size[0]<f.worldSize[0])for(x=Math.floor(u/f.worldSize[0]),w=Math.floor(g/f.worldSize[0]);w<=x;w++)p.push(new v(n,Math.max(f.getFirstColumnForWorld(w),g),Math.min(f.getLastColumnForWorld(w),u)));else p.push(new v(n,g,u));else g>f.last[0]||u<f.first[0]||(g=Math.max(g,f.first[0]),u=Math.min(u,f.last[0]),p.push(new v(n,g,u)));n+=1;for(g=c.length-1;0<=g;g--)u=
c[g],u.ymax>=n?u.incrRow():c.splice(g,1)}return a};e.getTileParentId=function(b){C.set(b);b=this._lodInfos.indexOf(this._infoByLevel[C.level])-1;if(0>b)return null;this._getTileIdAtLOD(C,this._lodInfos[b],C);return C.id};e.getTileResolution=function(b){return(b=this._infoByLevel["object"===typeof b?b.level:b])?b.resolution:-1};e.getTileScale=function(b){return(b=this._infoByLevel[b.level])?b.scale:-1};e.intersects=function(b,c){C.set(c);c=this._infoByLevel[C.level];const f=b.lodInfo;if(f.resolution>
c.resolution){this._getTileIdAtLOD(C,f,C);var a=f.denormalizeCol(C.col,C.world);for(var d of b.spans)if(d.row===C.row&&d.colFrom<=a&&d.colTo>=a)return!0}if(f.resolution<c.resolution){const [r,p,g,u]=b.spans.reduce((x,w)=>{x[0]=Math.min(x[0],w.row);x[1]=Math.max(x[1],w.row);x[2]=Math.min(x[2],w.colFrom);x[3]=Math.max(x[3],w.colTo);return x},[Infinity,-Infinity,Infinity,-Infinity]);a=c.denormalizeCol(C.col,C.world);b=f.getColumnForX(c.getXForColumn(a));d=f.getRowForY(c.getYForRow(C.row));a=f.getColumnForX(c.getXForColumn(a+
1))-1;c=f.getRowForY(c.getYForRow(C.row+1))-1;return!(b>u||a<g||d>p||c<r)}const n=f.denormalizeCol(C.col,C.world);return b.spans.some(r=>r.row===C.row&&r.colFrom<=n&&r.colTo>=n)};e.normalizeBounds=function(b,c,f){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];this._wrap&&(c=h.getInfo(this.tileInfo.spatialReference),f=-f*(c.valid[1]-c.valid[0]),b[0]+=f,b[2]+=f);return b};e.getSmallestInfoForScale=function(b){const c=this.scales;if(this._infoByScale[b])return this._infoByScale[b];if(b>c[0])return this._infoByScale[c[0]];
for(let f=1;f<c.length-1;f++)if(b>c[f]+1E-6)return this._infoByScale[c[f-1]];return this._infoByScale[c[c.length-1]]};e.getClosestInfoForScale=function(b){const c=this.scales;if(this._infoByScale[b])return this._infoByScale[b];b=c.reduce((f,a)=>Math.abs(a-b)<Math.abs(f-b)?a:f,c[0]);return this._infoByScale[b]};e.scaleToLevel=function(b){const c=this.scales;if(this._infoByScale[b])return this._infoByScale[b].level;for(let f=c.length-1;0<=f;f--)if(b<c[f])return f===c.length-1?this._infoByScale[c[c.length-
1]].level:this._infoByScale[c[f]].level+(c[f]-b)/(c[f]-c[f+1]);return this._infoByScale[c[0]].level};e.scaleToZoom=function(b){return this.tileInfo.scaleToZoom(b)};e._getTileIdAtLOD=function(b,c,f){const a=this._infoByLevel[f.level];b.set(f);if(c.resolution<a.resolution)return null;if(c.resolution===a.resolution)return b;b.level=c.level;b.col=Math.floor(f.col*a.resolution/c.resolution+.01);b.row=Math.floor(f.row*a.resolution/c.resolution+.01);return b};l._createClass(k,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);
return k}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(l,h,D){function B(v,C,t){v[0]=C;v[1]=t;return v}const y=new D("0/0/0/0");return function(){function v(t,q,k,e,b,c,f,a,d,n,r,p){this.level=t;this.resolution=q;this.scale=k;this.origin=e;this.first=b;this.last=c;this.size=f;this.norm=a;this.worldStart=d;this.worldEnd=n;this.worldSize=r;this.wrap=p}v.create=function(t,q,k=
null){var e=h.getInfo(t.spatialReference);const b=q.origin||[t.origin.x,t.origin.y],c=[t.size[0]*q.resolution,t.size[1]*q.resolution],f=[-Infinity,-Infinity],a=[Infinity,Infinity],d=[Infinity,Infinity];null!=k&&(B(f,Math.max(0,Math.floor((k.xmin-b[0])/c[0])),Math.max(0,Math.floor((b[1]-k.ymax)/c[1]))),B(a,Math.max(0,Math.floor((k.xmax-b[0])/c[0])),Math.max(0,Math.floor((b[1]-k.ymin)/c[1]))),B(d,a[0]-f[0]+1,a[1]-f[1]+1));const {cols:n,rows:r}=q;!k&&n&&r&&(B(f,n[0],r[0]),B(a,n[1],r[1]),B(d,n[1]-n[0]+
1,r[1]-r[0]+1));let p;t.isWrappable?(t=[Math.ceil(Math.round((e.valid[1]-e.valid[0])/q.resolution)/t.size[0]),d[1]],e=[Math.floor((e.origin[0]-b[0])/c[0]),f[1]],k=[t[0]+e[0]-1,a[1]],p=!0):(e=f,k=a,t=d,p=!1);return new v(q.level,q.resolution,q.scale,b,f,a,d,c,e,k,t,p)};var C=v.prototype;C.normalizeCol=function(t){if(!this.wrap)return t;const q=this.worldSize[0];return 0>t?q-1-Math.abs((t+1)%q):t%q};C.denormalizeCol=function(t,q){return this.wrap?this.worldSize[0]*q+t:t};C.getWorldForColumn=function(t){return this.wrap?
Math.floor(t/this.worldSize[0]):0};C.getFirstColumnForWorld=function(t){return t*this.worldSize[0]+this.first[0]};C.getLastColumnForWorld=function(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1};C.getColumnForX=function(t){return(t-this.origin[0])/this.norm[0]};C.getXForColumn=function(t){return this.origin[0]+t*this.norm[0]};C.getRowForY=function(t){return(this.origin[1]-t)/this.norm[1]};C.getYForRow=function(t){return this.origin[1]-t*this.norm[1]};C.getTileBounds=function(t,q,k=!1){y.set(q);
var e=k?y.col:this.denormalizeCol(y.col,y.world),b=y.row;q=this.getXForColumn(e);k=this.getYForRow(b+1);e=this.getXForColumn(e+1);b=this.getYForRow(b);t[0]=q;t[1]=k;t[2]=e;t[3]=b;return t};C.getTileCoords=function(t,q,k=!1){y.set(q);q=k?y.col:this.denormalizeCol(y.col,y.world);Array.isArray(t)?B(t,this.getXForColumn(q),this.getYForRow(y.row)):(t.x=this.getXForColumn(q),t.y=this.getYForRow(y.row));return t};return l._createClass(v)}()})},"esri/views/2d/tiling/TileSpan":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],
function(l){return l._createClass(function(h,D,B){this.row=h;this.colFrom=D;this.colTo=B})})},"esri/views/2d/layers/features/processors/SymbolProcessor":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/BidiText ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/accessorSupport/diffUtils ../../../../../geometry/SpatialReference ../../../engine/webgl/DisplayId ../../../engine/webgl/enums ../../../engine/webgl/mesh/MeshData ../../../engine/webgl/mesh/factories/WGLMeshFactory ../../../engine/webgl/mesh/templates/WGLTemplateStore ../../../engine/webgl/util/Matcher ../textUtils ./BaseProcessor ../support/ResourceManagerProxy".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x){function w(z,A){return(!z.minScale||z.minScale>=A)&&(!z.maxScale||z.maxScale<=A)}function m(z){z=z.message;const A={message:{data:{},tileKey:z.tileKey,tileKeyOrigin:z.tileKeyOrigin,version:z.version},transferList:[]};for(const F in z.data){const J=F;var H=z.data[J];A.message.data[J]=null;if(null!=H){var E=H.stride;const L=H.indices.slice(0),I=H.vertices.slice(0),G=H.records.slice(0);H=C.applySome(H.metrics,K=>K.slice(0));E={stride:E,indices:L,
vertices:I,records:G,metrics:H};A.transferList.push(L,I,G);A.message.data[J]=E}}return A}B=function(z){function A(){var E=z.apply(this,arguments)||this;E.type="symbol";E._matchers={feature:null,aggregate:null};E._bufferData=new Map;E._bufferIds=new Map;return E}l._inherits(A,z);var H=A.prototype;H.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))]);this._resourceManagerProxy=new x(this.remoteClient)};H.destroy=function(){this._resourceManagerProxy.destroy()};
H.forEachBufferId=function(E){this._bufferIds.forEach(F=>{F.forEach(E)})};H.update=async function(E,F){F=F.schema.processors[0];if("symbol"===F.type){var J=b.diff(this._schema,F);if(b.hasDiff(J,"mesh")||b.hasDiff(J,"target"))E.mesh=!0,E.why?.mesh.push("Symbology changed"),this._schema=F,this._factory=this._createFactory(F),this._factory.update(F,this.tileStore.tileScheme.tileInfo)}};H.onTileMessage=function(E,F,J,L){t.throwIfAborted(L);return this._onTileData(E,F,J,L)};H.onTileClear=function(E,F){F=
{clear:!0,end:F};this._bufferData.delete(E.key.id);this._bufferIds.delete(E.key.id);return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:E.id,data:F})};H.onTileError=function(E,F,J){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:E.id,error:F},{signal:J.signal})};H.onTileUpdate=function(E){for(const F of E.removed)this._bufferData.has(F.key.id)&&this._bufferData.delete(F.key.id),this._bufferIds.has(F.key.id)&&this._bufferIds.delete(F.key.id);for(const F of E.added)this._bufferData.forEach(J=>
{for(const L of J)L.message.tileKey===F.id&&this._updateTileMesh("append",F,m(L),[],!1,!1,null)})};H._addBufferData=function(E,F){this._bufferData.has(E)||this._bufferData.set(E,[]);this._bufferData.get(E)?.push(m(F))};H._createFactory=function(E){const {geometryType:F,objectIdField:J,fields:L}=this.service,I=c.fromJSON(this.spatialReference),G={geometryType:F,fields:L,spatialReference:I},K=new r.WGLTemplateStore((ea,aa)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",ea,aa),this.tileStore.tileScheme.tileInfo),
{matcher:P,aggregateMatcher:Y}=E.mesh;this._store=K;this._matchers.feature=p.createMatcher(P,K,G,this._resourceManagerProxy);this._matchers.aggregate=C.applySome(Y,ea=>p.createMatcher(ea,K,G,this._resourceManagerProxy));return new n.WGLMeshFactory(F,J,K)};H._onTileData=async function(E,F,J,L){t.throwIfAborted(L);const {type:I,addOrUpdate:G,remove:K,clear:P,end:Y}=F;var ea=!!this._schema.mesh.sortKey;if(!G)return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:E.id,data:{type:I,addOrUpdate:null,
remove:K,clear:P,end:Y,sort:ea}},L);J=this._processFeatures(E,G,J,L,F.status?.version);try{var aa=await J;if(null==aa)return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:E.id,data:{type:I,addOrUpdate:null,remove:K,clear:P,end:Y,sort:ea}},L);ea=[];for(const T of aa){aa=!1;const R=T.message.bufferIds,W=E.key.id,S=T.message.tileKey;if(W!==S&&null!=R){if(!this.tileStore.get(S)){this._addBufferData(W,T);ea.push(T);continue}let Z=this._bufferIds.get(S);Z||(Z=new Set,this._bufferIds.set(S,
Z));const ca=Array.from(R);for(const qa of ca)if(Z.has(qa)){aa=!0;break}else Z.add(qa)}aa||(this._addBufferData(W,T),ea.push(T))}await Promise.all(ea.map(T=>{const R=E.key.id===T.message.tileKey;return this._updateTileMesh(I,E,T,R?F.remove:[],R&&F.end,!!F.clear,L.signal)}))}catch(T){this._handleError(E,T,L)}};H._updateTileMesh=async function(E,F,J,L,I,G,K){const P=J.message.tileKey,Y=!!this._schema.mesh.sortKey;P!==F.key.id&&(I=!1);F=C.applySome(J,ea=>ea.message);J=C.applySome(J,ea=>ea.transferList)||
[];E={type:E,addOrUpdate:F,remove:L,clear:G,end:I,sort:Y};K={transferList:J||[],signal:K};t.throwIfAborted(K);return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:P,data:E},K)};H._processFeatures=async function(E,F,J,L,I){if(null==F||!F.hasFeatures)return null;const G={transform:E.transform,hasZ:!1,hasM:!1},K=this._factory,P={viewingMode:"",scale:E.scale},Y=await this._matchers.feature,ea=await this._matchers.aggregate;t.throwIfAborted(L);const aa=this._getLabelInfos(E,F);await K.analyze(F.getCursor(),
this._resourceManagerProxy,Y,ea,G,P);t.throwIfAborted(L);return this._writeFeatureSet(E,F,G,aa,K,J,I)};H._writeFeatureSet=function(E,F,J,L,I,G,K){const P=F.getSize(),Y=this._schema.mesh.matcher.symbologyType;G=new d.MeshData(E.key.id,{features:P,records:P,metrics:0},Y,G,Y!==a.WGLSymbologyType.HEATMAP,K);K={viewingMode:"",scale:E.scale};for(F=F.getCursor();F.next();)try{const ea=F.getDisplayId(),aa=null!=L?L.get(ea):null;I.writeCursor(G,F,J,K,E.level,aa,this._resourceManagerProxy)}catch(ea){}return G.serialize(E.tileInfoView.tileInfo.isWrappable)};
H._handleError=function(E,F,J){return t.isAbortError(F)?Promise.resolve():this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:E.id,error:F.message},{signal:J.signal})};H._getLabelingSchemaForScale=function(E){var F=this._schema.mesh.labels;if(null==F)return null;if("subtype"===F.type){const J={type:"subtype",classes:{}};let L=!1;for(const I in F.classes){const G=F.classes[I].filter(K=>w(K,E.scale));L=L||!!G.length;J.classes[I]=G}return L?J:null}F=F.classes.filter(J=>w(J,E.scale));return F.length?
{type:"simple",classes:F}:null};H._getLabels=function(E,F){if("subtype"===F.type){const J=C.unwrapOrThrow(this.service.subtypeField,"Expected to find subtype Field");E=E.readAttribute(J);return null==E?[]:F.classes[E]??[]}return F.classes};H._getLabelInfos=function(E,F){E=this._getLabelingSchemaForScale(E);if(null==E)return null;const J=new Map;for(F=F.getCursor();F.next();){const I=F.getDisplayId(),G=[],K=f.isAggregateId(I),P=K&&1!==F.readAttribute("cluster_count")?"aggregate":"feature";var L=this._getLabels(F,
E);for(const Y of L){if(Y.target!==P)continue;L=F.getStorage();L=K&&"feature"===P?L.getComputedStringAtIndex(F.readAttribute("referenceId"),Y.fieldIndex):L.getComputedStringAtIndex(I,Y.fieldIndex);if(!L)continue;L=D.bidiText(L.toString());const ea=L[1];this._store.getMosaicItem(Y.symbol,g.codepoints(L[0])).then(aa=>{G[Y.index]={glyphs:aa.glyphMosaicItems??[],rtl:ea,index:Y.index}})}J.set(I,G)}return J};l._createClass(A,[{key:"supportsTileUpdates",get:function(){return!0}}]);return A}(u);return B=
h.__decorate([e.subclass("esri.views.2d.layers.features.processors.SymbolProcessor")],B)})},"esri/core/BidiText":function(){define(["exports","./BidiEngine"],function(l,h){const D=new h;l.bidiText=function(B){if(null==B)return["",!1];if(!D.hasBidiChar(B))return[B,!1];let y;y="rtl"===D.checkContextual(B)?"IDNNN":"ICNNN";return[D.bidiTransform(B,y,"VLYSN"),!0]};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/mesh/MeshData":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../tiling/PagedTileQueue ../../../tiling/TileInfoView ../../../tiling/TileKey ../../../tiling/TileQueue ../../../tiling/TileStrategy ../definitions ../DisplayId ../enums ../Utils ./VertexDataWriter ../../../layers/features/support/tileUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c){function f(d){switch(d){case 1:case 8:case 32:return-1;case 2:case 64:return 0;case 4:case 16:case 128:return 1}}function a(d){switch(d){case 1:case 2:case 4:return-1;case 8:case 16:return 0;case 32:case 64:case 128:return 1}}D=function(){function d(r,p,g,u,x,w=0){this.hasRecords=this._hasAggregate=!1;this._data={self:new Map,neighbors:[]};this._version=0;this._current={geometryType:0,writer:null,overlaps:0,start:0,insertAfter:0,sortKey:0,id:0,materialKey:0,indexStart:0,
vertStart:0,isDotDensity:!1,bufferingEnabled:!1,metricBoxLenPointer:0};this.hint=p;this.tileKey=r;this._hasAggregate=u;this._pixelBufferEnabled=x;this._version=w;this._symbologyType=g}var n=d.prototype;n.serialize=function(r){const p=[];p.push(this._serializeTileVertexData(this.tileKey,this.tileKey,this._data.self));this._data.neighbors.forEach((g,u)=>{var x=1<<u;u=f(x);x=a(x);u=c.getPow2NeighborKey(new y(this.tileKey),u,x,r);u=this._serializeTileVertexData(this.tileKey,u.id,g.vertexData);u.message.bufferIds=
g.displayIds;p.push(u)});return p};n._serializeTileVertexData=function(r,p,g){const u=[];g={[k.WGLGeometryType.MARKER]:g.get(k.WGLGeometryType.MARKER)?.serialize(u),[k.WGLGeometryType.FILL]:g.get(k.WGLGeometryType.FILL)?.serialize(u),[k.WGLGeometryType.LINE]:g.get(k.WGLGeometryType.LINE)?.serialize(u),[k.WGLGeometryType.TEXT]:g.get(k.WGLGeometryType.TEXT)?.serialize(u),[k.WGLGeometryType.LABEL]:g.get(k.WGLGeometryType.LABEL)?.serialize(u)};return{message:{tileKeyOrigin:r,tileKey:p,data:g,version:this._version},
transferList:u}};n.featureStart=function(r,p){this._current.insertAfter=r;this._current.sortKey=p};n.featureEnd=function(){};n.recordStart=function(r,p,g,u){this._current.writer=this._getVertexWriter(g);this._current.overlaps=0;this._current.indexStart=this._current.writer.indexCount;this._current.vertStart=this._current.writer.vertexCount;this._current.bufferingEnabled=u;this._current.id=r;this._current.materialKey=p;this._current.geometryType=g;this._current.isDotDensity=!1;this._current.writer.recordStart()};
n.recordCount=function(){return this._current.writer.recordCount};n.vertexCount=function(){return this._current.writer.vertexCount};n.indexCount=function(){return this._current.writer.indexCount};n.vertexEnsureSize=function(r){this._current.writer.vertexEnsureSize(r)};n.indexEnsureSize=function(r){this._current.writer.indexEnsureSize(r)};n.vertexBounds=function(r,p,g,u){this._current.bufferingEnabled&&this._addOverlap(r,p,g,u)};n.vertexWrite=function(r){this._current.writer.writeVertex(r)};n.vertexWriteF32=
function(r){this._current.writer.writeVertexF32(r)};n.vertexEnd=function(){};n.vertexWriter=function(){return this._current.writer.vertexWriter};n.indexWrite=function(r){this._current.writer.writeIndex(r)};n.indexWriter=function(){return this._current.writer.indexWriter};n.metricWriter=function(){return this._current.writer.metricWriter};n.metricStart=function(r,p,g,u,x,w,m,z){this._current.writer=this._getVertexWriter(k.WGLGeometryType.LABEL);const A=this._current.writer.metricWriter;A.push(q.getDisplayIdTexel(r));
A.push(p);A.push(g);A.push(u);A.push(x);A.push(w);A.push(m);A.push(z);A.push(255);this._current.metricBoxLenPointer=A.push(0)};n.metricEnd=function(){const r=this._current.writer.metricWriter;0===r.getValue(this._current.metricBoxLenPointer)&&r.seek(r.length-10)};n.metricBoxWrite=function(r,p,g,u){const x=this._current.writer.metricWriter;x.incr(this._current.metricBoxLenPointer);x.push(0);x.push(0);x.push(r);x.push(p);x.push(g);x.push(u)};n.recordEnd=function(){var r=this._current.vertStart,p=this._current.writer.vertexCount-
r;if(!p)return!1;this.hasRecords=!0;var g=this._current.indexStart;this._current.writer.recordEnd(this._current.id,this._current.materialKey,this._current.insertAfter,g,this._current.writer.indexCount-g,r,p,this._current.sortKey);if(!this._pixelBufferEnabled||this._hasAggregate||0===this._current.overlaps||this._current.geometryType===k.WGLGeometryType.LABEL)return!0;r=this._current.writer;for(p=0;8>p;p++){var u=1<<p;if(this._current.overlaps&u){this._data.neighbors[p]||(this._data.neighbors[p]={vertexData:new Map,
displayIds:new Set});g=this._data.neighbors[p];var x=this._current.geometryType;if(!g.vertexData.has(x)){var w=e.getStrides(x,this._symbologyType).geometry;w=new b.VertexDataWriter(x,w,t.PATCH_PIXEL_BUFFER_ALLOC_SIZE);g.vertexData.set(x,w)}x=g.vertexData.get(this._current.geometryType);w=4096*-f(u);u=4096*-a(u);x?.copyLastFrom(r,w,u);g.displayIds.add(this._current.id)}}return!0};n._addOverlap=function(r,p,g,u){this._current.overlaps|=255^((r<0+g?148:r>=t.TILE_SIZE-g?41:189)|(p<0+u?224:p>=t.TILE_SIZE-
u?7:231))};n._getVertexWriter=function(r){if(!this._data.self.has(r)){const p=this._data.self,g=e.getStrides(r,this._symbologyType).geometry;p.set(r,new b.VertexDataWriter(r,g,this.hint.records))}return this._data.self.get(r)};h._createClass(d,[{key:"hasAggregates",get:function(){return this._hasAggregate}},{key:"hasPixelBufferEnabled",get:function(){return this._pixelBufferEnabled}}]);return d}();l.MeshData=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){function b(n,r){n.length=0;r.forEach(p=>n.push(p));return n}const c=new Set,f=[],a=new Map,d=[0,0];D=function(n){function r(g){g=n.call(this,g)||this;g._keyToItem=new Map;g.concurrency=6;g.strategy="scale-first";g.tileInfoView=null;return g}l._inherits(r,n);var p=r.prototype;p.initialize=function(){const {concurrency:g,process:u}=this;this._queue=new e.QueueProcessor({concurrency:g,process:(x,w)=>{x=this._keyToItem.get(x);return u(x,{signal:w})},peeker:x=>x.values().next().value})};
p.destroy=function(){this.clear();this._queue=B.destroyMaybe(this._queue)};p.abort=function(g){this._queue.abort("string"===typeof g?g:g.id)};p.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};p.has=function(g){return"string"===typeof g?this._keyToItem.has(g):this._keyToItem.has(g.id)};p.isOngoing=function(g){g="string"===typeof g?g:g.id;return this.has(g)&&this._queue.isOngoing(g)};p.pause=function(){this._queue.pause()};p.push=function(g,u){const x=g.key.id+
"-"+u;if(this.has(x))return this.get(x);u=this._queue.push(x);const w=()=>{this._keyToItem.delete(x);this.notifyChange("updating")};this._keyToItem.set(x,g);u.then(w,w);this.notifyChange("updating");return u};p.reset=function(){this._queue.reset();this.notifyChange("updating")};p.resume=function(){this._queue.resume()};p._peekByScaleFirst=function(g){if(!this.state)return g.values().next().value;const u=this.tileInfoView;let x=Number.NEGATIVE_INFINITY,w=Number.POSITIVE_INFINITY;g.forEach(E=>{E=this._keyToItem.get(E);
const F=this.tileInfoView.getTileScale(E.key);a.has(F)||(a.set(F,[]),x=Math.max(F,x),w=Math.min(F,w));a.get(F).push(E.key);c.add(F)});let m=this.state.scale;a.has(m)||(b(f,c),f.sort((E,F)=>E-F),m=f.reduce((E,F)=>Math.abs(F-m)<Math.abs(E-m)?F:E,f[0]));m=Math.min(m,x);m=Math.max(m,w);g=a.get(m);const z=u.getClosestInfoForScale(m),A=z.getColumnForX(this.state.center[0]),H=z.getRowForY(this.state.center[1]);g.sort((E,F)=>{const J=z.denormalizeCol(E.col,E.world),L=z.denormalizeCol(F.col,F.world);return Math.sqrt((A-
J)*(A-J)+(H-E.row)*(H-E.row))-Math.sqrt((A-L)*(A-L)+(H-F.row)*(H-F.row))});c.clear();a.clear();return g[0].id};p._peekByCenterFirst=function(g){if(!this.state)return g.values().next().value;const u=this.tileInfoView,x=this.state.center;let w=Number.POSITIVE_INFINITY,m;g.forEach(z=>{z=this._keyToItem.get(z);u.getTileCoords(d,z.key);const A=k.distance(d,x);A<w&&(w=A,m=z.key)});return m.id};l._createClass(r,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},
{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return r}(D);h.__decorate([y.property({constructOnly:!0})],D.prototype,"concurrency",void 0);h.__decorate([y.property({constructOnly:!0})],D.prototype,"process",void 0);h.__decorate([y.property()],D.prototype,"state",void 0);h.__decorate([y.property({constructOnly:!0})],D.prototype,"strategy",void 0);h.__decorate([y.property({constructOnly:!0})],D.prototype,"tileInfoView",void 0);h.__decorate([y.property({readOnly:!0})],
D.prototype,"updating",null);return D=h.__decorate([q.subclass("esri.views.2d.tiling.PagedTileQueue")],D)})},"esri/chunks/vec2":function(){define(["exports","./common"],function(l,h){function D(aa,T){aa[0]=T[0];aa[1]=T[1];return aa}function B(aa,T,R){aa[0]=T;aa[1]=R;return aa}function y(aa,T,R){aa[0]=T[0]+R[0];aa[1]=T[1]+R[1];return aa}function v(aa,T,R){aa[0]=T[0]-R[0];aa[1]=T[1]-R[1];return aa}function C(aa,T,R){aa[0]=T[0]*R[0];aa[1]=T[1]*R[1];return aa}function t(aa,T,R){aa[0]=T[0]/R[0];aa[1]=
T[1]/R[1];return aa}function q(aa,T){aa[0]=Math.ceil(T[0]);aa[1]=Math.ceil(T[1]);return aa}function k(aa,T){aa[0]=Math.floor(T[0]);aa[1]=Math.floor(T[1]);return aa}function e(aa,T,R){aa[0]=Math.min(T[0],R[0]);aa[1]=Math.min(T[1],R[1]);return aa}function b(aa,T,R){aa[0]=Math.max(T[0],R[0]);aa[1]=Math.max(T[1],R[1]);return aa}function c(aa,T){aa[0]=Math.round(T[0]);aa[1]=Math.round(T[1]);return aa}function f(aa,T,R){aa[0]=T[0]*R;aa[1]=T[1]*R;return aa}function a(aa,T,R,W){aa[0]=T[0]+R[0]*W;aa[1]=T[1]+
R[1]*W;return aa}function d(aa,T){const R=T[0]-aa[0];aa=T[1]-aa[1];return Math.sqrt(R*R+aa*aa)}function n(aa,T){const R=T[0]-aa[0];aa=T[1]-aa[1];return R*R+aa*aa}function r(aa){const T=aa[0];aa=aa[1];return Math.sqrt(T*T+aa*aa)}function p(aa){const T=aa[0];aa=aa[1];return T*T+aa*aa}function g(aa,T){aa[0]=-T[0];aa[1]=-T[1];return aa}function u(aa,T){aa[0]=1/T[0];aa[1]=1/T[1];return aa}function x(aa,T){var R=T[0];const W=T[1];R=R*R+W*W;0<R&&(R=1/Math.sqrt(R),aa[0]=T[0]*R,aa[1]=T[1]*R);return aa}function w(aa,
T){return aa[0]*T[0]+aa[1]*T[1]}function m(aa,T,R){T=T[0]*R[1]-T[1]*R[0];aa[0]=aa[1]=0;aa[2]=T;return aa}function z(aa,T,R,W){const S=T[0];T=T[1];aa[0]=S+W*(R[0]-S);aa[1]=T+W*(R[1]-T);return aa}function A(aa,T){T=T||1;const R=2*h.RANDOM()*Math.PI;aa[0]=Math.cos(R)*T;aa[1]=Math.sin(R)*T;return aa}function H(aa,T,R){const W=T[0];T=T[1];aa[0]=R[0]*W+R[2]*T;aa[1]=R[1]*W+R[3]*T;return aa}function E(aa,T,R){const W=T[0];T=T[1];aa[0]=R[0]*W+R[2]*T+R[4];aa[1]=R[1]*W+R[3]*T+R[5];return aa}function F(aa,T,
R){const W=T[0];T=T[1];aa[0]=R[0]*W+R[3]*T+R[6];aa[1]=R[1]*W+R[4]*T+R[7];return aa}function J(aa,T,R){const W=T[0];T=T[1];aa[0]=R[0]*W+R[4]*T+R[12];aa[1]=R[1]*W+R[5]*T+R[13];return aa}function L(aa,T,R,W){const S=T[0]-R[0];T=T[1]-R[1];const Z=Math.sin(W);W=Math.cos(W);aa[0]=S*W-T*Z+R[0];aa[1]=S*Z+T*W+R[1];return aa}function I(aa,T){var R=aa[0];aa=aa[1];const W=T[0];T=T[1];let S=R*R+aa*aa;0<S&&(S=1/Math.sqrt(S));let Z=W*W+T*T;0<Z&&(Z=1/Math.sqrt(Z));R=(R*W+aa*T)*S*Z;return 1<R?0:-1>R?Math.PI:Math.acos(R)}
function G(aa){return"vec2("+aa[0]+", "+aa[1]+")"}function K(aa,T){return aa[0]===T[0]&&aa[1]===T[1]}function P(aa,T){const R=aa[0];aa=aa[1];const W=T[0];T=T[1];const S=h.getEpsilon();return Math.abs(R-W)<=S*Math.max(1,Math.abs(R),Math.abs(W))&&Math.abs(aa-T)<=S*Math.max(1,Math.abs(aa),Math.abs(T))}function Y(aa,T,R,W,S){let Z=T[0]-R[0];R=T[1]-R[1];S=(W[0]*Z+W[1]*R)*(S-1);Z=W[0]*S;R=W[1]*S;aa[0]=T[0]+Z;aa[1]=T[1]+R;return aa}const ea=Object.freeze(Object.defineProperty({__proto__:null,add:y,angle:I,
ceil:q,copy:D,cross:m,dist:d,distance:d,div:t,divide:t,dot:w,equals:P,exactEquals:K,floor:k,inverse:u,len:r,length:r,lerp:z,max:b,min:e,mul:C,multiply:C,negate:g,normalize:x,projectAndScale:Y,random:A,rotate:L,round:c,scale:f,scaleAndAdd:a,set:B,sqrDist:n,sqrLen:p,squaredDistance:n,squaredLength:p,str:G,sub:v,subtract:v,transformMat2:H,transformMat2d:E,transformMat3:F,transformMat4:J},Symbol.toStringTag,{value:"Module"}));l.add=y;l.angle=I;l.ceil=q;l.copy=D;l.cross=m;l.dist=d;l.distance=d;l.div=t;
l.divide=t;l.dot=w;l.equals=P;l.exactEquals=K;l.floor=k;l.inverse=u;l.len=r;l.length=r;l.lerp=z;l.max=b;l.min=e;l.mul=C;l.multiply=C;l.negate=g;l.normalize=x;l.projectAndScale=Y;l.random=A;l.rotate=L;l.round=c;l.scale=f;l.scaleAndAdd=a;l.set=B;l.sqrDist=n;l.sqrLen=p;l.squaredDistance=n;l.squaredLength=p;l.str=G;l.sub=v;l.subtract=v;l.transformMat2=H;l.transformMat2d=E;l.transformMat3=F;l.transformMat4=J;l.vec2=ea})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){function b(n,r){n.length=0;r.forEach(p=>n.push(p));return n}const c=new Set,f=[],a=new Map,d=[0,0];D=function(n){function r(g){g=n.call(this,g)||this;g._keyToItem=new Map;g.concurrency=6;g.strategy="scale-first";g.tileInfoView=null;return g}l._inherits(r,n);var p=r.prototype;p.initialize=function(){const {concurrency:g,process:u,strategy:x}=this;this._queue=new e.QueueProcessor({concurrency:g,process:(w,m)=>{w=this._keyToItem.get(w);return u(w,{signal:m})},peeker:"scale-first"===
x?w=>this._peekByScaleFirst(w):w=>this._peekByCenterFirst(w)})};p.destroy=function(){this.clear();this._queue=B.destroyMaybe(this._queue)};p.abort=function(g){this._queue.abort("string"===typeof g?g:g.id)};p.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};p.has=function(g){return"string"===typeof g?this._keyToItem.has(g):this._keyToItem.has(g.id)};p.isOngoing=function(g){g="string"===typeof g?g:g.id;return this.has(g)&&this._queue.isOngoing(g)};p.pause=
function(){this._queue.pause()};p.push=function(g){const u=g.key.id;if(this._queue.has(u))return this._queue.get(u);const x=this._queue.push(u),w=()=>{this._keyToItem.delete(u);this.notifyChange("updating")};this._keyToItem.set(u,g);x.then(w,w);this.notifyChange("updating");return x};p.reset=function(){this._queue.reset()};p.resume=function(){this._queue.resume()};p._peekByScaleFirst=function(g){if(!this.state)return g.values().next().value;const u=this.tileInfoView;let x=Number.NEGATIVE_INFINITY,
w=Number.POSITIVE_INFINITY;g.forEach(E=>{E=this._keyToItem.get(E);const F=this.tileInfoView.getTileScale(E.key);a.has(F)||(a.set(F,[]),x=Math.max(F,x),w=Math.min(F,w));a.get(F).push(E.key);c.add(F)});let m=this.state.scale;a.has(m)||(b(f,c),f.sort((E,F)=>E-F),m=f.reduce((E,F)=>Math.abs(F-m)<Math.abs(E-m)?F:E,f[0]));m=Math.min(m,x);m=Math.max(m,w);g=a.get(m);const z=u.getClosestInfoForScale(m),A=z.getColumnForX(this.state.center[0]),H=z.getRowForY(this.state.center[1]);g.sort((E,F)=>{const J=z.denormalizeCol(E.col,
E.world),L=z.denormalizeCol(F.col,F.world);return Math.sqrt((A-J)*(A-J)+(H-E.row)*(H-E.row))-Math.sqrt((A-L)*(A-L)+(H-F.row)*(H-F.row))});c.clear();a.clear();return g[0].id};p._peekByCenterFirst=function(g){if(!this.state)return g.values().next().value;const u=this.tileInfoView,x=this.state.center;let w=Number.POSITIVE_INFINITY,m;g.forEach(z=>{z=this._keyToItem.get(z);u.getTileCoords(d,z.key);const A=k.distance(d,x);A<w&&(w=A,m=z.key)});return m.id};l._createClass(r,[{key:"length",get:function(){return this._queue?
this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return r}(D);h.__decorate([y.property({constructOnly:!0})],D.prototype,"concurrency",void 0);h.__decorate([y.property({constructOnly:!0})],D.prototype,"process",void 0);h.__decorate([y.property()],D.prototype,"state",void 0);h.__decorate([y.property({constructOnly:!0})],D.prototype,"strategy",void 0);h.__decorate([y.property({constructOnly:!0})],
D.prototype,"tileInfoView",void 0);h.__decorate([y.property({readOnly:!0})],D.prototype,"updating",null);return D=h.__decorate([q.subclass("esri.views.2d.tiling.TileQueue")],D)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(l,h,D,B,y){const v=new y(0,0,0,0),C=new Map,t=[],q=[];return function(){function k(b){this._previousScale=Number.POSITIVE_INFINITY;
this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=b.acquireTile;this.releaseTile=b.releaseTile;this.tileInfoView=b.tileInfoView;null!=b.resampling&&(this.resampling=b.resampling);b.cachePolicy&&(this.cachePolicy=b.cachePolicy);b.coveragePolicy&&(this.coveragePolicy=b.coveragePolicy);null!=b.buffer&&(this.buffer=b.buffer);b.cacheSize&&(this._tileCache=new D(b.cacheSize,this.tileInfoView,c=>{this.releaseTile(c)}))}
var e=k.prototype;e.destroy=function(){this.tileIndex.clear()};e.update=function(b){const {resampling:c,tileIndex:f}=this,{scale:a,center:d,resolution:n}=b.state,{minScale:r,maxScale:p}=this.tileInfoView,g=!b.stationary&&a>this._previousScale;this._previousScale=a;if(!c&&(a>r||a<p))this.tiles.length=0,this.clear();else if(b=this.tileInfoView.getTileCoverage(b.state,this.buffer,this.resampling,this.coveragePolicy)){var {spans:u,lodInfo:x}=b,{level:w}=x;this.tiles.length=0;f.forEach(H=>H.visible=!0);
var m=0,z=0;if(0<u.length)for(const {row:H,colFrom:E,colTo:F}of u)for(var A=E;A<=F;A++){m++;const J=v.set(w,H,x.normalizeCol(A),x.getWorldForColumn(A)).id;let L=f.get(J);if(L)L.isReady?(C.set(J,L),z++):g||this._addParentTile(J,C);else{if(this._tileCache?.has(J)){if(L=this._tileCache.pop(J),this.tileIndex.set(J,L),L.isReady){C.set(J,L);z++;continue}}else L=this.acquireTile(v),this.tileIndex.set(J,L);g||this._addParentTile(J,C)}}m=z===m;for(const [H,E]of f)C.has(H)||(v.set(H),z=this.tileInfoView.intersects(b,
v),A="purge"===this.cachePolicy?v.level!==w:v.level>w,!z||!g&&m?!A&&z||t.push(E):E.isReady?A&&"purge"===this.cachePolicy&&this._hasReadyAncestor(v,w)?t.push(E):q.push(E):A&&t.push(E));for(const H of q)H.isReady&&C.set(H.key.id,H);for(const H of t)this._tileCache?this._tileCache.add(H):this.releaseTile(H),f.delete(H.key.id);for(const H of C.values())this.tiles.push(H);for(const H of f.values())C.has(H.key.id)||(H.visible=!1);this._tileCache?.prune(w,d,n);B.pool.release(b);q.length=0;t.length=0;C.clear()}else this.tiles.length=
0,this.clear()};e.clear=function(){const {tileIndex:b}=this;for(const c of b.values())this.releaseTile(c);b.clear()};e.refresh=function(b){for(const c of this.tileIndex.values())this.tiles.includes(c)?b(c):t.push(c);for(const c of t)this.releaseTile(c),this.tileIndex.delete(c.key.id);this._tileCache?.clear()};e.updateCacheSize=function(b){this._tileCache&&(this._tileCache.maxSize=b)};e._addParentTile=function(b,c){let f=null;for(;;){b=this.tileInfoView.getTileParentId(b);if(!b)break;if(this.tileIndex.has(b)){if(f=
this.tileIndex.get(b),f?.isReady){c.has(f.key.id)||c.set(f.key.id,f);break}}else if(this._tileCache?.has(b)&&(f=this._tileCache.pop(b),this.tileIndex.set(b,f),f?.isReady)){c.has(f.key.id)||c.set(f.key.id,f);break}}};e._hasReadyAncestor=function(b,c){const f=h.create();this.tileInfoView.getTileBounds(f,b,!0);for(const a of this.tileIndex.values())if(a.isReady&&a.key.level>=c&&a.key.level<b.level){const d=h.create();this.tileInfoView.getTileBounds(d,a.key,!0);if(h.contains(d,f))return!0}return!1};return l._createClass(k)}()})},
"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/vec2"],function(l,h){return function(){function D(y,v,C){this.maxSize=y;this._tileInfoView=v;this._removedFunc=C;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var B=D.prototype;B.clear=function(){this._tilePerId.clear();this._tileKeysPerLevel=[]};B.has=function(y){return this._tilePerId.has(y)};B.get=function(y){return this._tilePerId.get(y)};B.pop=function(y){const v=this._tilePerId.get(y);
if(v){var C=this._tileKeysPerLevel[v.key.level];this._tilePerId["delete"](y);for(let t=0;t<C.length;t++)if(C[t].id===y){C.splice(t,1);break}v.visible=!0;return v}};B.add=function(y){y.visible=!1;const v=y.key,C=v.id;this._tilePerId.has(C)||(this._tilePerId.set(C,y),y=v.level,this._tileKeysPerLevel[y]||(this._tileKeysPerLevel[y]=[]),this._tileKeysPerLevel[y].push(v))};B.prune=function(y,v,C){let t=this._tilePerId.size;if(!(t<=this.maxSize)){for(var q=this._tileKeysPerLevel.length-1;t>this.maxSize&&
0<=q;)q!==y&&(t=this._pruneAroundCenterTile(t,v,C,q)),q--;t>this.maxSize&&(t=this._pruneAroundCenterTile(t,v,C,y))}};B._pruneAroundCenterTile=function(y,v,C,t){t=this._tileKeysPerLevel[t];if(!t||0===t.length)return y;const {size:q,origin:k}=this._tileInfoView.tileInfo,e=C*q[0],b=C*q[1],c=[0,0],f=[0,0];for(t.sort((a,d)=>{c[0]=k.x+e*(a.col+.5);c[1]=k.y-b*(a.row+.5);f[0]=k.x+e*(d.col+.5);f[1]=k.y-b*(d.row+.5);return h.squaredDistance(c,v)-h.squaredDistance(f,v)});0<t.length&&(C=t.pop(),this._removeTile(C.id),
y--,y!==this.maxSize););return y};B._removeTile=function(y){const v=this._tilePerId.get(y);this._removedFunc&&v&&this._removedFunc(v);this._tilePerId["delete"](y)};return l._createClass(D)}()})},"esri/views/2d/engine/webgl/mesh/VertexDataWriter":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../definitions","./heuristics","../util/Writer"],function(l,h,D,B,y){let v=function(){function C(q,k,e){this._start={index:0,vertex:0};e=B.getMeshSizeHint(q,k,e);k/=4;this.geometryType=
q;this._records=new y(Int32Array,e.recordBytes);this._indices=new y(Uint32Array,e.indexBytes);this._vertices=new y(Uint32Array,e.vertexBytes);this._metrics=new y(Float32Array,0);this._strideInt=k}var t=C.prototype;t.serialize=function(q){const k=this._records.buffer(),e=this._indices.buffer(),b=this._vertices.buffer(),c=this._metrics.length?this._metrics.buffer():null,f=4*this._strideInt;q.push(k,e,b);return{stride:f,records:k,indices:e,vertices:b,metrics:c}};t.vertexEnsureSize=function(q){this._vertices.ensureSize(q)};
t.indexEnsureSize=function(q){this._indices.ensureSize(q)};t.recordStart=function(){this._start.index=this._indices.length;this._start.vertex=this._vertices.length};t.recordEnd=function(q,k,e,b,c,f,a,d){this._records.push(q);this._records.push(k??0);this._records.push(e);this._records.push(b);this._records.push(c);this._records.push(f);this._records.push(a);this._records.writeF32(d)};t.writeIndex=function(q){this._indices.push(q)};t.writeVertex=function(q){this._vertices.push(q)};t.writeVertexF32=
function(q){this._vertices.writeF32(q)};t.copyLastFrom=function(q,k,e){var b=q._records.length-D.DISPLAY_RECORD_INT_PER_ELEMENT;const c=q._records.getValue(b),f=q._records.getValue(b+1),a=q._records.getValue(b+2),d=q._records.getValue(b+4),n=q._records.getValue(b+6);b=q._records.getValue(b+7);const r=this._vertices.length;var p=(q._start.vertex-this._vertices.length)/this._strideInt;const g=this._indices.length,u=this.vertexCount;for(var x=q._start.index;x!==q._indices.length;x++){const w=q._indices.getValue(x);
this._indices.push(w-p)}for(p=q._start.vertex;p!==q._vertices.length;p++)x=q._vertices.getValue(p),this._vertices.push(x);for(q=r;q<=this._vertices.length;q+=this._strideInt)this._vertices.i1616Add(q,k,e);this._records.push(c);this._records.push(f);this._records.push(a);this._records.push(g);this._records.push(d);this._records.push(u);this._records.push(n);this._records.push(b)};h._createClass(C,[{key:"strideInt",get:function(){return this._strideInt}},{key:"recordCount",get:function(){return this._records.length/
D.DISPLAY_RECORD_INT_PER_ELEMENT}},{key:"vertexCount",get:function(){return this._vertices.length/this._strideInt}},{key:"indexCount",get:function(){return this._indices.length}},{key:"indexWriter",get:function(){return this._indices}},{key:"vertexWriter",get:function(){return this._vertices}},{key:"metricWriter",get:function(){return this._metrics}}]);return C}();l.VertexDataWriter=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/mesh/heuristics":function(){define(["exports",
"../definitions","../enums"],function(l,h,D){const B=new Map;B.set(D.WGLGeometryType.MARKER,{multiplier:1,indicesPerRecord:6,verticesPerRecord:4});B.set(D.WGLGeometryType.LINE,{multiplier:1,indicesPerRecord:24,verticesPerRecord:8});B.set(D.WGLGeometryType.FILL,{multiplier:1,indicesPerRecord:10,verticesPerRecord:10});B.set(D.WGLGeometryType.TEXT,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});B.set(D.WGLGeometryType.LABEL,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});l.getMeshSizeHint=
function(y,v,C){const {indicesPerRecord:t,multiplier:q,verticesPerRecord:k}=B.get(y);return{recordBytes:C*h.DISPLAY_RECORD_INT_PER_ELEMENT*Uint32Array.BYTES_PER_ELEMENT,indexBytes:q*t*C*Uint32Array.BYTES_PER_ELEMENT,vertexBytes:q*k*C*v}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function h(B,y){this._pos=0;y=y?this._roundToNearest(y,B.BYTES_PER_ELEMENT):
40;this._array=new ArrayBuffer(y);this._buffer=new B(this._array);this._ctor=B;this._i16View=new Int16Array(this._array)}var D=h.prototype;D._roundToNearest=function(B,y){B=Math.round(B);return 1===y?B:B+(y-B%y)};D._ensureSize=function(B){if(this._pos+B>=this._buffer.length){B=this._roundToNearest(1.25*(this._array.byteLength+B*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT);B=new ArrayBuffer(B);const y=new this._ctor(B);y.set(this._buffer,0);this._array=B;this._buffer=y;this._i16View=
new Int16Array(this._array)}};D.ensureSize=function(B){this._ensureSize(B)};D.writeF32=function(B){this._ensureSize(1);const y=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=B;this._pos++;return y};D.push=function(B){this._ensureSize(1);const y=this._pos;this._buffer[this._pos++]=B;return y};D.writeFixed=function(B){this._buffer[this._pos++]=B};D.setValue=function(B,y){this._buffer[B]=y};D.i1616Add=function(B,y,v){this._i16View[2*B]+=y;this._i16View[2*B+1]+=v};D.getValue=function(B){return this._buffer[B]};
D.incr=function(B){if(this._buffer.length<B)throw Error("Increment index overflows the target buffer");this._buffer[B]++};D.decr=function(B){this._buffer[B]--};D.writeRegion=function(B){this._ensureSize(B.length);const y=this._pos;this._buffer.set(B,this._pos);this._pos+=B.length;return y};D.writeManyFrom=function(B,y,v){for(this._ensureSize(v-y);y!==v;y++)this.writeFixed(B._buffer[y])};D.buffer=function(){const B=this._array.slice(0,4*this._pos);this.destroy();return B};D.toArray=function(){return[...this._buffer]};
D.seek=function(B){this._pos=B};D.destroy=function(){this._buffer=this._array=null};l._createClass(h,[{key:"length",get:function(){return this._pos}}]);return h}()})},"esri/views/2d/layers/features/support/tileUtils":function(){define(["exports"],function(l){l.getPow2NeighborKey=function(h,D,B,y){h=h.clone();const v=1<<h.level;D=h.col+D;B=h.row+B;y&&0>D?(h.col=D+v,--h.world):D>=v?(h.col=D-v,h.world+=1):h.col=D;h.row=B;return h};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../../../../../core/promiseUtils ../../../../../../geometry/libtess ../../DisplayId ../templates/WGLLabelTemplate ../templates/WGLMarkerTemplate ../templates/WGLTemplateStore".split(" "),
function(l,h,D,B,y,v,C,t,q){D=function(){function k(b,c,f){this._loadPromise=y.loadLibtess();this._geometryType=b;this._idField=c;this._templateStore=f}var e=k.prototype;e.update=function(b,c){null!=b.mesh.labels&&(this._labelTemplates=this._createLabelTemplates(b.mesh.labels,c));this._schema=b};e._createLabelTemplates=function(b,c){const f=new Map;if("simple"===b.type){for(var a of b.classes)b=C.fromLabelClass(a,c),f.set(a.index,b);return f}for(const d in b.classes){a=b.classes[d];for(const n of a)a=
C.fromLabelClass(n,c),f.set(n.index,a)}return f};e.analyze=async function(b,c,f,a,d,n,r){if(!B.isAborted(r)){var p;"dictionary"===f?.type&&(p=await f.analyze(this._idField,b.copy(),c,d,n,r));for(c=0;b.next();){var g=null;g=p?p[c++]:null!=a&&v.isAggregateId(b.getDisplayId())&&1!==b.readAttribute("cluster_count")?a.match(this._idField,b,this._geometryType,d,n):f.match(this._idField,b,this._geometryType,d,n);b.setGroupId(g);if(q.isDynamicId(g)){g=this._templateStore.getDynamicTemplateGroup(g).templates;
for(const u of g)u&&u.analyze&&u.analyze(this._templateStore,b,d,n)}}await this._loadPromise;return this._templateStore.finalize(r)}};e.analyzeGraphics=async function(b,c,f,a,d,n){if(!B.isAborted(n)){b=b.getCursor();for(f&&await f.analyze(this._idField,b.copy(),c,a,d,n);b.next();){c=b.getGroupId();if(null==c||-1===c)c=f?.match(this._idField,b,b.geometryType,a,d),b.setGroupId(c);if(q.isDynamicId(c)){const r=this._templateStore.getDynamicTemplateGroup(c).templates;for(const p of r)p&&p.analyze&&p.analyze(this._templateStore,
b,a,d)}b.setGroupId(c)}await this._loadPromise;return this._templateStore.finalize(n)}};e.writeGraphic=function(b,c,f,a){const d=c.getGroupId(),n=c.getDisplayId(),r=this._templateStore.getTemplateGroup(d);b.featureStart(c.insertAfter,0);if(null!=n){if(q.isDynamicId(d))for(const p of r.templates)p&&p.bindFeature(c,null,null);if(r){for(const p of r.templates)p&&p.write(b,c,f,a);b.featureEnd()}}};e.writeCursor=function(b,c,f,a,d,n,r){const p=c.getGroupId(),g=c.getDisplayId();var u=this._templateStore.getTemplateGroup(p);
const x=u.templates;u=this._getSortKeyValue(c,u);b.featureStart(0,u);if(null!=g&&x){if(q.isDynamicId(p))for(const w of x)w.bindFeature(c,f,a);for(const w of x)w.write(b,c,d,r);null!=n&&b.hasRecords&&(f=n&&this._findLabelRef(x),this._writeLabels(b,c,n,f,d,r));b.featureEnd()}};e._getSortKeyValue=function(b,c){const f=this._schema.mesh.sortKey;if(null==f)return 0;let a=0;a=!0===f.byRenderer&&null!=c.sortKey?c.sortKey:null!=f.fieldIndex?b.getComputedNumericAtIndex(f.fieldIndex):null!=f.field?b.readAttribute(f.field):
b.readAttribute(this._idField);a*="asc"===f.order?1:-1;return null==a||isNaN(a)?0:a};e._findLabelRef=function(b){for(const c of b)if(c instanceof t)return c;return null};e._writeLabels=function(b,c,f,a,d,n){for(const r of f)if(null!=r&&r){const {glyphs:p,rtl:g,index:u}=r;if(f=this._labelTemplates.get(u))f.setZoomLevel(d),f.bindReferenceTemplate(a),f.bindTextInfo(p,g),f.write(b,c,null,n)}};h._createClass(k,[{key:"templates",get:function(){return this._templateStore}}]);return k}();l.WGLMeshFactory=
D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../symbols/cim/enums ../../alignmentUtils ../../color ../../definitions ../../enums ../../number ../../materialKey/MaterialKey ./segmentUtils ./WGLTextTemplate".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d){const n=D.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),r=(g,u="mapview-labeling")=>n.error(new h(u,g)),p=function(g){const u=new Map;return x=>{u.has(x)||u.set(x,g(x));return u.get(x)}}(g=>{let u=0;if(0===g)return Infinity;for(;!(g%2);)u++,g/=2;return u});return function(g){function u(w,m,z,A){var H=g.call(this,w,z.font?.size,z.haloSize||0,z.font?.size,z.color&&k.premultiplyAlphaRGBAArray(z.color)||0,z.haloColor&&k.premultiplyAlphaRGBAArray(z.haloColor)||
0,z.horizontalAlignment,z.verticalAlignment,q.isMapAligned(m.labelPlacement)?t.Alignment.MAP:t.Alignment.SCREEN,z.font?.decoration,!1,z.angle||0,z.xoffset,z.yoffset,z.lineWidth,z.lineHeight,null,null,!1,null,null,z.backgroundColor&&k.premultiplyAlphaRGBAArray(z.backgroundColor),z.borderLineColor&&k.premultiplyAlphaRGBAArray(z.borderLineColor),z.borderLineSize)||this;H._outLineLabelAngle=0;H._refPlacementPadding=0;H._refPlacementDirX=0;H._refPlacementDirY=0;H._refOffsetX=0;H._refOffsetY=0;H._zoomLevel=
0;H.geometryType=b.WGLGeometryType.LABEL;H._allowOverrun=m.allowOverrun??!1;H._repeatLabel=m.repeatLabel??!0;H._labelPosition=m.labelPosition??"curved";var E=!!m.minScale&&A.scaleToZoom(m.minScale)||0;E=B.clamp(E,0,25.5);A=!!m.maxScale&&A.scaleToZoom(m.maxScale)||255;A=B.clamp(A,0,25.5);const [F,J]=q.getAlignmentFromPlacement(m.labelPlacement);H._xAlignD=F;H._yAlignD=J;H._minZoom=E;H._maxZoom=A;H._minBackgroundZoom=E;H._maxBackgroundZoom=A;H._refPlacementPadding=y.pt2px(z.haloSize)+e.TEXT_PLACEMENT_PADDING;
H._repeatLabelDistance=m.repeatLabelDistance?y.pt2px(m.repeatLabelDistance):128;w=f.LabelMaterialKey.load(w);w.sdf=!0;H._materialKey=w.data;return H}l._inherits(u,g);u.fromLabelClass=function(w,m){if("esriServerLinePlacementCenterAlong"===w.labelPlacement){const z=w.symbol;z.xoffset=0;z.yoffset=0;z.angle=0;z.font.decoration="none"}return new u(w.materialKey,w,w.symbol,m)};var x=u.prototype;x.setZoomLevel=function(w){this._zoomLevel=w};x.bindReferenceTemplate=function(w){let m=q.getXDirection(this._xAlignD),
z=q.getYDirection(this._yAlignD);this._refOffsetY=this._refOffsetX=0;if(null==w)this._refSymbolAndPlacementOffset=c.i8888to32(0,0,Math.floor(127*m+127),Math.floor(127*z+127));else{if("circle"===w.boundsType&&(m||z)){var A=Math.sqrt(m*m+z*z);m/=A;z/=A}A=Math.max(w.height,w.width);this._refSymbolAndPlacementOffset=c.i8888to32(4*this._refPlacementPadding,A,Math.floor(127*m+127),Math.floor(127*z+127));this._referenceSize=A;this._refPlacementDirX=m;this._refPlacementDirY=z;this._refOffsetX=w.xOffset;this._refOffsetY=
w.yOffset}};x._write=function(w,m){if(null!=this._shapingInfo){var z=this._shapingInfo,A=m.getDisplayId(),H="esriGeometryPolygon"===m.geometryType?m.readLegacyCentroid():m.readLegacyGeometry();if(H)switch(this._current={out:w,inId:A,inShaping:z,zoomLevel:this._zoomLevel},"esriGeometryPolyline"===m.geometryType&&"curved"===this._labelPosition&&(this._borderLineColor||this._backgroundColor)&&n.warnOnce("TextSymbol properties 'borderLineColor', 'borderLineSize', and 'backgroundColor' are not supported in curved labels"),
m.geometryType){case "esriGeometryPolyline":this._placeLineLabels(H);break;case "esriGeometryPoint":case "esriGeometryPolygon":this._placePointLabels(H);break;default:r(`Geometry of type ${m.geometryType} is not supported`)}}};x._isVisible=function(w,m){const z=Math.floor(10*this._current.zoomLevel);return Math.floor(10*w)<=z&&z<=Math.floor(10*m)};x._placePointLabels=function(w){const {out:m,inId:z,inShaping:A}=this._current;this._writeGlyphs(m,z,w,A)};x._placeLineLabels=function(w){w=a.smoothPaths(w.paths,
this._current.inShaping.bounds.width);const m=this._placeSubdivGlyphs.bind(this),z=(this._shapedBox.width+this._repeatLabelDistance)/2;for(const A of w)a.pathDivide(A,z,m,this._repeatLabel)};x._placeSubdivGlyphs=function(w,m,z,A){var H=p(m),E=this._shapedBox.width/2,F=Math.sqrt(this._repeatLabelDistance)/2;z=Math.min(z,A-z);E=this._current.inShaping.isMultiline?25:Math.log2(z/(F+E/2));H=Math.max(this._minZoom,this._current.zoomLevel+1-(0===m?E:Math.min(H,E)));E=this._current.zoomLevel-H;F=this._shapedBox.width/
2*2**E;this._current.inShaping.isMultiline?0===m&&this._placeStraight(w,H):this._allowOverrun&&0>E?this._placeStraightAlong(w,this._minZoom):"parallel"===this._labelPosition?this._placeStraightAlong(w,H):"curved"===this._labelPosition&&this._placeCurved(w,H,F)};x._placeStraight=function(w,m){const {out:z,inId:A,inShaping:H}=this._current,E=Math.ceil((180/Math.PI*w.angle+180)%360);this._outLineLabelAngle=Math.round(254/360*Math.ceil(180/Math.PI*w.angle%360));this._writeGlyphs(z,A,w,H,m);this._outLineLabelAngle=
Math.round(254/360*E);this._writeGlyphs(z,A,w,H,m)};x._placeCurved=function(w,m,z){const {out:A,inId:H}=this._current;A.metricStart(H,m,w.x,w.y,0,0,0,0);const E=w.clone(),F=(180/Math.PI*w.angle+180)%360;this._outLineLabelAngle=Math.round(180/Math.PI*w.angle%360*(254/360));this._placeFirst(E,m,1);this._placeBack(w,E,m,z,1);this._placeForward(w,E,m,z,1);this._outLineLabelAngle=Math.round(254/360*F);this._placeFirst(E,m,0);this._placeBack(w,E,m,z,0);this._placeForward(w,E,m,z,0);A.metricEnd()};x._placeStraightAlong=
function(w,m){const {out:z,inId:A,inShaping:H}=this._current;z.metricStart(A,m,w.x,w.y,0,0,0,0);const E=w.clone(),F=180/Math.PI*w.angle%360,J=(180/Math.PI*w.angle+180)%360;var L=0<H.glyphs.length&&(this._borderLineColor||this._backgroundColor);this._maxBackgroundZoom=25;this._minBackgroundZoom=Math.max(m,0);if(L){L=f.LabelMaterialKey.load(this._materialKey);L.textureBinding=H.glyphs[0].textureBinding;const I=v.fromRotation(C.create(),-w.angle),[G,K]=H.shapeBackground(I);this._outLineLabelAngle=Math.round(254/
360*F);z.recordStart(A,L.data,this.geometryType,!0);this._writeBackgroundGeometry(z,A,w,G,K);z.recordEnd();this._outLineLabelAngle=Math.round(254/360*J);z.recordStart(A,L.data,this.geometryType,!0);this._writeBackgroundGeometry(z,A,w,G,K);z.recordEnd()}this._outLineLabelAngle=Math.round(254/360*F);this._placeFirst(E,m,1,!0);this._outLineLabelAngle=Math.round(254/360*J);this._placeFirst(E,m,0,!0);z.metricEnd()};x._placeBack=function(w,m,z,A,H){const E=w.clone();for(w=w.backwardLength+0;E.prev()&&!(w>=
A);)this._placeOnSegment(E,m,w,z,-1,H),w+=E.length+0};x._placeForward=function(w,m,z,A,H){const E=w.clone();for(w=w.remainingLength+0;E.next()&&!(w>=A);)this._placeOnSegment(E,m,w,z,1,H),w+=E.length+0};x._placeFirst=function(w,m,z,A=!1){const H=this._current.inShaping;var E=H.glyphs;const F=this._current.zoomLevel,{out:J,inId:L}=this._current;for(const I of E)E=I.x>H.bounds.x?z:1-z,E=Math.max(0,F+Math.log2(Math.abs(I.x+I.width/2-H.bounds.x)/(E*w.remainingLength+(1-E)*w.backwardLength))),E=Math.max(m,
A?0:E),I.maxZoom=25,I.angle=w.angle+(1-z)*Math.PI,I.minZoom=E,this._writeGlyph(J,L,w.x,w.y,I),z&&this._isVisible(I.minZoom,I.maxZoom)&&(E=I.bounds,J.metricBoxWrite(E.center[0],E.center[1],E.width,E.height))};x._placeOnSegment=function(w,m,z,A,H,E){var F=this._current.inShaping.glyphs;const {out:J,inId:L}=this._current,I=this._current.inShaping,G=this._current.zoomLevel;var K=w.x+w.dx/w.length*-H*z,P=w.y+w.dy/w.length*-H*z;for(const ea of F)if((F=ea.x>I.bounds.x?E:1-E)&&1===H||!F&&-1===H){var Y=Math.abs(ea.x+
ea.width/2-I.bounds.x);F=Math.max(0,G+Math.log2(Y/z)-.1);Y=Math.max(A,G+Math.log2(Y/(z+w.length+0)));0!==F&&(ea.angle=w.angle+(1-E)*Math.PI,ea.minZoom=Y,ea.maxZoom=F,this._writeGlyph(J,L,K,P,ea),E&&this._isVisible(ea.minZoom,ea.maxZoom)&&(F=ea.bounds,J.metricBoxWrite(F.center[0]+(w.x-m.x),F.center[1]+(w.y-m.y),F.width,F.height)))}};x._writeGlyphs=function(w,m,z,A,H=this._minZoom){if(!(0>z.x||512<=z.x||0>z.y||512<=z.y)){if(0<A.glyphs.length&&(this._borderLineColor||this._backgroundColor)){var E=f.LabelMaterialKey.load(this._materialKey);
E.textureBinding=A.glyphs[0].textureBinding;w.recordStart(m,E.data,this.geometryType,!0);this._writeBackgroundGeometry(w,m,z,A.bounds,A.background);w.recordEnd()}E=z.x+this._refOffsetX;z=z.y-this._refOffsetY;for(const F of A.glyphs)F.minZoom=H,F.maxZoom=this._maxZoom,this._writeGlyph(w,m,E,z,F);A=A.boundsT;w.metricStart(m,H,E,z,this._refPlacementDirX,this._refPlacementDirY,this._referenceSize,this._materialKey);w.metricBoxWrite(A.center[0],A.center[1],A.width,A.height);w.metricEnd()}};x._writeVertexCommon=
function(w,m,z,A){const H=this._color,E=this._haloColor,F=c.i8888to32(0,0,this._size,this._haloSize);A=c.i8888to32(Math.floor(10*Math.max(A.minZoom,this._minZoom)),Math.floor(10*Math.min(A.maxZoom,this._maxZoom)),this._outLineLabelAngle,0);w.vertexWrite(z);w.vertexWrite(m);w.vertexWrite(H);w.vertexWrite(E);w.vertexWrite(F);w.vertexWrite(this._refSymbolAndPlacementOffset);w.vertexWrite(A)};x._writeBackgroundVertex=function(w,m,z,A,H,E){const F=c.i8888to32(0,0,this._size,this._haloSize),J=c.i8888to32(0,
0,0,0),L=c.i8888to32(Math.floor(10*this._minBackgroundZoom),Math.floor(10*this._maxBackgroundZoom),this._outLineLabelAngle,1);w.vertexWrite(z);w.vertexWrite(m);w.vertexWrite(A);w.vertexWrite(J);w.vertexWrite(F);w.vertexWrite(this._refSymbolAndPlacementOffset);w.vertexWrite(L);w.vertexWrite(H);w.vertexWrite(E);w.vertexEnd()};l._createClass(u,[{key:"_shapedBox",get:function(){return this._shapingInfo.bounds}}]);return u}(d)})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(l,
h){function D(m,z){m[0]=z[0];m[1]=z[1];m[2]=z[2];m[3]=z[3];m[4]=z[4];m[5]=z[5];return m}function B(m){m[0]=1;m[1]=0;m[2]=0;m[3]=1;m[4]=0;m[5]=0;return m}function y(m,z,A,H,E,F,J){m[0]=z;m[1]=A;m[2]=H;m[3]=E;m[4]=F;m[5]=J;return m}function v(m,z){const A=z[0],H=z[1],E=z[2],F=z[3],J=z[4];z=z[5];let L=A*F-H*E;if(!L)return null;L=1/L;m[0]=F*L;m[1]=-H*L;m[2]=-E*L;m[3]=A*L;m[4]=(E*z-F*J)*L;m[5]=(H*J-A*z)*L;return m}function C(m){return m[0]*m[3]-m[1]*m[2]}function t(m,z,A){const H=z[0],E=z[1],F=z[2],J=
z[3],L=z[4];z=z[5];const I=A[0],G=A[1],K=A[2],P=A[3],Y=A[4];A=A[5];m[0]=H*I+F*G;m[1]=E*I+J*G;m[2]=H*K+F*P;m[3]=E*K+J*P;m[4]=H*Y+F*A+L;m[5]=E*Y+J*A+z;return m}function q(m,z,A){const H=z[0],E=z[1],F=z[2],J=z[3],L=z[4];z=z[5];const I=Math.sin(A);A=Math.cos(A);m[0]=H*A+F*I;m[1]=E*A+J*I;m[2]=H*-I+F*A;m[3]=E*-I+J*A;m[4]=L;m[5]=z;return m}function k(m,z,A){const H=z[1],E=z[2],F=z[3],J=z[4],L=z[5],I=A[0];A=A[1];m[0]=z[0]*I;m[1]=H*I;m[2]=E*A;m[3]=F*A;m[4]=J;m[5]=L;return m}function e(m,z,A){const H=z[0],
E=z[1],F=z[2],J=z[3],L=z[4];z=z[5];const I=A[0];A=A[1];m[0]=H;m[1]=E;m[2]=F;m[3]=J;m[4]=H*I+F*A+L;m[5]=E*I+J*A+z;return m}function b(m,z){const A=Math.sin(z);z=Math.cos(z);m[0]=z;m[1]=A;m[2]=-A;m[3]=z;m[4]=0;m[5]=0;return m}function c(m,z){m[0]=z[0];m[1]=0;m[2]=0;m[3]=z[1];m[4]=0;m[5]=0;return m}function f(m,z){m[0]=1;m[1]=0;m[2]=0;m[3]=1;m[4]=z[0];m[5]=z[1];return m}function a(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"}function d(m){return Math.sqrt(m[0]**2+m[1]**
2+m[2]**2+m[3]**2+m[4]**2+m[5]**2+1)}function n(m,z,A){m[0]=z[0]+A[0];m[1]=z[1]+A[1];m[2]=z[2]+A[2];m[3]=z[3]+A[3];m[4]=z[4]+A[4];m[5]=z[5]+A[5];return m}function r(m,z,A){m[0]=z[0]-A[0];m[1]=z[1]-A[1];m[2]=z[2]-A[2];m[3]=z[3]-A[3];m[4]=z[4]-A[4];m[5]=z[5]-A[5];return m}function p(m,z,A){m[0]=z[0]*A;m[1]=z[1]*A;m[2]=z[2]*A;m[3]=z[3]*A;m[4]=z[4]*A;m[5]=z[5]*A;return m}function g(m,z,A,H){m[0]=z[0]+A[0]*H;m[1]=z[1]+A[1]*H;m[2]=z[2]+A[2]*H;m[3]=z[3]+A[3]*H;m[4]=z[4]+A[4]*H;m[5]=z[5]+A[5]*H;return m}
function u(m,z){return m[0]===z[0]&&m[1]===z[1]&&m[2]===z[2]&&m[3]===z[3]&&m[4]===z[4]&&m[5]===z[5]}function x(m,z){const A=m[0],H=m[1],E=m[2],F=m[3],J=m[4];m=m[5];const L=z[0],I=z[1],G=z[2],K=z[3],P=z[4];z=z[5];const Y=h.getEpsilon();return Math.abs(A-L)<=Y*Math.max(1,Math.abs(A),Math.abs(L))&&Math.abs(H-I)<=Y*Math.max(1,Math.abs(H),Math.abs(I))&&Math.abs(E-G)<=Y*Math.max(1,Math.abs(E),Math.abs(G))&&Math.abs(F-K)<=Y*Math.max(1,Math.abs(F),Math.abs(K))&&Math.abs(J-P)<=Y*Math.max(1,Math.abs(J),Math.abs(P))&&
Math.abs(m-z)<=Y*Math.max(1,Math.abs(m),Math.abs(z))}const w=Object.freeze(Object.defineProperty({__proto__:null,add:n,copy:D,determinant:C,equals:x,exactEquals:u,frob:d,fromRotation:b,fromScaling:c,fromTranslation:f,identity:B,invert:v,mul:t,multiply:t,multiplyScalar:p,multiplyScalarAndAdd:g,rotate:q,scale:k,set:y,str:a,sub:r,subtract:r,translate:e},Symbol.toStringTag,{value:"Module"}));l.add=n;l.copy=D;l.determinant=C;l.equals=x;l.exactEquals=u;l.frob=d;l.fromRotation=b;l.fromScaling=c;l.fromTranslation=
f;l.identity=B;l.invert=v;l.mat2d=w;l.mul=t;l.multiply=t;l.multiplyScalar=p;l.multiplyScalarAndAdd=g;l.rotate=q;l.scale=k;l.set=y;l.str=a;l.sub=r;l.subtract=r;l.translate=e})},"esri/chunks/mat2df32":function(){define(["exports"],function(l){function h(){const q=new Float32Array(6);q[0]=1;q[3]=1;return q}function D(q){const k=new Float32Array(6);k[0]=q[0];k[1]=q[1];k[2]=q[2];k[3]=q[3];k[4]=q[4];k[5]=q[5];return k}function B(q,k,e,b,c,f){const a=new Float32Array(6);a[0]=q;a[1]=k;a[2]=e;a[3]=b;a[4]=
c;a[5]=f;return a}function y(q,k){return new Float32Array(q,k,6)}function v(q,k,e,b){const c=k[b];k=k[b+1];q[b]=e[0]*c+e[2]*k+e[4];q[b+1]=e[1]*c+e[3]*k+e[5]}function C(q,k,e,b=0,c=0,f=2){for(c=c||k.length/f;b<c;b++)v(q,k,e,b*f)}const t=Object.freeze(Object.defineProperty({__proto__:null,clone:D,create:h,createView:y,fromValues:B,transform:v,transformMany:C},Symbol.toStringTag,{value:"Module"}));l.clone=D;l.create=h;l.createView=y;l.fromValues=B;l.mat2df32=t;l.transform=v;l.transformMany=C})},"esri/views/2d/engine/webgl/alignmentUtils":function(){define(["exports"],
function(l){l.HAlign=void 0;(function(h){h[h.Left=-1]="Left";h[h.Center=0]="Center";h[h.Right=1]="Right"})(l.HAlign||(l.HAlign={}));l.VAlign=void 0;(function(h){h[h.Top=1]="Top";h[h.Center=0]="Center";h[h.Bottom=-1]="Bottom";h[h.Baseline=2]="Baseline"})(l.VAlign||(l.VAlign={}));l.getAlignmentFromPlacement=function(h){switch(h){case "above-left":case "esriServerPointLabelPlacementAboveLeft":return[l.HAlign.Right,l.VAlign.Bottom];case "above-center":case "above-along":case "esriServerPointLabelPlacementAboveCenter":case "esriServerLinePlacementAboveAlong":return[l.HAlign.Center,
l.VAlign.Bottom];case "above-right":case "esriServerPointLabelPlacementAboveRight":return[l.HAlign.Left,l.VAlign.Bottom];case "center-left":case "esriServerPointLabelPlacementCenterLeft":return[l.HAlign.Right,l.VAlign.Center];case "center-center":case "center-along":case "esriServerPointLabelPlacementCenterCenter":case "esriServerLinePlacementCenterAlong":return[l.HAlign.Center,l.VAlign.Center];case "center-right":case "esriServerPointLabelPlacementCenterRight":return[l.HAlign.Left,l.VAlign.Center];
case "below-left":case "esriServerPointLabelPlacementBelowLeft":return[l.HAlign.Right,l.VAlign.Top];case "below-center":case "below-along":case "esriServerPointLabelPlacementBelowCenter":case "esriServerLinePlacementBelowAlong":return[l.HAlign.Center,l.VAlign.Top];case "below-right":case "esriServerPointLabelPlacementBelowRight":return[l.HAlign.Left,l.VAlign.Top];case "always-horizontal":case "esriServerPolygonPlacementAlwaysHorizontal":return[l.HAlign.Center,l.VAlign.Center];default:return console.debug(`Found invalid placement type ${h}`),
[l.HAlign.Center,l.VAlign.Center]}};l.getJustification=function(h){switch(h){case "left":return l.HAlign.Left;case "right":return l.HAlign.Right;case "center":return l.HAlign.Center}};l.getXAnchorDirection=function(h){switch(h){case "left":return l.HAlign.Left;case "right":return l.HAlign.Right;case "center":return l.HAlign.Center}};l.getXDirection=function(h){switch(h){case l.HAlign.Right:return-1;case l.HAlign.Center:return 0;case l.HAlign.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${h}`),
0}};l.getYAnchorDirection=function(h){switch(h){case "top":return l.VAlign.Top;case "middle":return l.VAlign.Center;case "baseline":return l.VAlign.Baseline;case "bottom":return l.VAlign.Bottom}};l.getYDirection=function(h){switch(h){case l.VAlign.Top:return 1;case l.VAlign.Center:return 0;case l.VAlign.Bottom:case l.VAlign.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${h}`),0}};l.isMapAligned=function(h){switch(h){case "above-along":case "below-along":case "center-along":case "esriServerLinePlacementAboveAlong":case "esriServerLinePlacementBelowAlong":case "esriServerLinePlacementCenterAlong":return!0;
default:return!1}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/materialKey/MaterialKey":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../alignmentUtils","../enums"],function(l,h,D,B,y){function v(p){return p===y.WGLSymbologyType.SIMPLE||p===y.WGLSymbologyType.OUTLINE_FILL_SIMPLE}function C(p){return p===y.WGLSymbologyType.OUTLINE_FILL||p===y.WGLSymbologyType.OUTLINE_FILL_SIMPLE}const t=Object.keys(y.WGLSymbologyType).filter(p=>
"number"===typeof y.WGLSymbologyType[p]).reduce((p,g)=>({...p,[g]:y.WGLSymbologyType[g]}),{});let q=function(){function p(u){this._data=0;this._data=u}p.load=function(u){const x=this.shared;x.data=u;return x};var g=p.prototype;g.setBit=function(u,x){u=1<<u;this._data=x?this._data|u:this._data&~u};g.bit=function(u){return(this._data&1<<u)>>u};g.setBits=function(u,x,w){for(let m=x,z=0;m<w;m++,z++)this.setBit(m,0!==(u&1<<z))};g.bits=function(u,x){let w=0;for(let m=u,z=0;m<x;m++,z++)w|=this.bit(m)<<z;
return w};g.hasVV=function(){return!1};g.setVV=function(u,x){};g.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:y.WGLSymbologyType[this.symbologyType],options:t,namespace:"SYMBOLOGY_TYPE"}}};g.getVariationHash=function(){return this._data&~(7&this.textureBinding)};h._createClass(p,[{key:"data",get:function(){return this._data},set:function(u){this._data=u??0}},{key:"geometryType",get:function(){return this.bits(8,11)},set:function(u){this.setBits(u,
8,11)}},{key:"mapAligned",get:function(){return!!this.bit(20)},set:function(u){this.setBit(20,u)}},{key:"sdf",get:function(){return!!this.bit(11)},set:function(u){this.setBit(11,u??!1)}},{key:"pattern",get:function(){return!!this.bit(12)},set:function(u){this.setBit(12,u)}},{key:"textureBinding",get:function(){return this.bits(0,8)},set:function(u){this.setBits(u,0,8)}},{key:"symbologyType",get:function(){return this.bits(21,26)},set:function(u){this.setBits(u,21,26)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case y.WGLGeometryType.FILL:return"fill";
case y.WGLGeometryType.MARKER:return"marker";case y.WGLGeometryType.LINE:return"line";case y.WGLGeometryType.TEXT:return"text";case y.WGLGeometryType.LABEL:return"label";default:throw new D(`Unable to handle unknown geometryType: ${this.geometryType}`);}}}]);return p}();q.shared=new q(0);const k=p=>function(g){function u(){return g.apply(this,arguments)||this}h._inherits(u,g);var x=u.prototype;x.hasSizeVV=function(){return this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue};
x.hasVV=function(){return h._get(h._getPrototypeOf(u.prototype),"hasVV",this).call(this)||this.hasSizeVV()};x.setVV=function(w,m){h._get(h._getPrototypeOf(u.prototype),"setVV",this).call(this,w,m);{var z=this.geometryType;const A=y.WGLVVFlag.SIZE_FIELD_STOPS|y.WGLVVFlag.SIZE_MINMAX_VALUE|y.WGLVVFlag.SIZE_SCALE_STOPS|y.WGLVVFlag.SIZE_UNIT_VALUE,H=(w&(y.WGLVVTarget.FIELD_TARGETS_OUTLINE|y.WGLVVTarget.MINMAX_TARGETS_OUTLINE|y.WGLVVTarget.SCALE_TARGETS_OUTLINE|y.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;
m=z===y.WGLGeometryType.LINE&&m.isOutline||z===y.WGLGeometryType.FILL&&C(m.symbologyType)?A&H:A&~H}w&=m;this.vvSizeMinMaxValue=!!(w&y.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(w&y.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=!!(w&y.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=!!(w&y.WGLVVFlag.SIZE_SCALE_STOPS)};h._createClass(u,[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(16)},set:function(w){this.setBit(16,w)}},{key:"vvSizeScaleStops",get:function(){return 0!==
this.bit(17)},set:function(w){this.setBit(17,w)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(18)},set:function(w){this.setBit(18,w)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(19)},set:function(w){this.setBit(19,w)}}]);return u}(p),e=p=>function(g){function u(){return g.apply(this,arguments)||this}h._inherits(u,g);var x=u.prototype;x.hasVV=function(){return h._get(h._getPrototypeOf(u.prototype),"hasVV",this).call(this)||this.vvRotation};x.setVV=function(w,m){h._get(h._getPrototypeOf(u.prototype),
"setVV",this).call(this,w,m);this.vvRotation=!m.isOutline&&!!(w&y.WGLVVFlag.ROTATION)};h._createClass(u,[{key:"vvRotation",get:function(){return 0!==this.bit(15)},set:function(w){this.setBit(15,w)}}]);return u}(p),b=p=>function(g){function u(){return g.apply(this,arguments)||this}h._inherits(u,g);var x=u.prototype;x.hasVV=function(){return h._get(h._getPrototypeOf(u.prototype),"hasVV",this).call(this)||this.vvColor};x.setVV=function(w,m){h._get(h._getPrototypeOf(u.prototype),"setVV",this).call(this,
w,m);this.vvColor=!m.isOutline&&!!(w&y.WGLVVFlag.COLOR)};h._createClass(u,[{key:"vvColor",get:function(){return 0!==this.bit(13)},set:function(w){this.setBit(13,w)}}]);return u}(p),c=p=>function(g){function u(){return g.apply(this,arguments)||this}h._inherits(u,g);var x=u.prototype;x.hasVV=function(){return h._get(h._getPrototypeOf(u.prototype),"hasVV",this).call(this)||this.vvOpacity};x.setVV=function(w,m){h._get(h._getPrototypeOf(u.prototype),"setVV",this).call(this,w,m);this.vvOpacity=!m.isOutline&&
!!(w&y.WGLVVFlag.OPACITY)};h._createClass(u,[{key:"vvOpacity",get:function(){return 0!==this.bit(14)},set:function(w){this.setBit(14,w)}}]);return u}(p);let f=function(p){function g(){return p.apply(this,arguments)||this}h._inherits(g,p);g.load=function(u){const x=this.shared;x.data=u;return x};g.from=function(u){const {symbologyType:x,vvFlags:w}=u,m=this.load(0);m.geometryType=y.WGLGeometryType.FILL;m.symbologyType=x;x!==y.WGLSymbologyType.DOT_DENSITY&&m.setVV(w,u);return m.data};g.prototype.getVariation=
function(){return{...h._get(h._getPrototypeOf(g.prototype),"getVariation",this).call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return h._createClass(g)}(b(c(k(q))));f.shared=new f(0);let a=function(p){function g(){return p.apply(this,arguments)||this}h._inherits(g,p);g.load=function(u){const x=this.shared;x.data=u;return x};g.from=
function(u){const {symbologyType:x,vvFlags:w}=u,m=this.load(0);m.geometryType=y.WGLGeometryType.MARKER;m.symbologyType=x;x!==y.WGLSymbologyType.HEATMAP&&m.setVV(w,u);return m.data};g.prototype.getVariation=function(){return{...h._get(h._getPrototypeOf(g.prototype),"getVariation",this).call(this),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};
return h._createClass(g)}(b(c(e(k(q)))));a.shared=new a(0);let d=function(p){function g(){return p.apply(this,arguments)||this}h._inherits(g,p);g.load=function(u){const x=this.shared;x.data=u;return x};g.from=function(u){const x=this.load(0);x.geometryType=y.WGLGeometryType.LINE;x.symbologyType=u.symbologyType;x.setVV(u.vvFlags,u);return x.data};g.prototype.getVariation=function(){return{...h._get(h._getPrototypeOf(g.prototype),"getVariation",this).call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,
vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return h._createClass(g)}(b(c(k(q))));d.shared=new d(0);let n=function(p){function g(){return p.apply(this,arguments)||this}h._inherits(g,p);g.load=function(u){const x=this.shared;x.data=u;return x};g.from=function(u){const x=this.load(0);x.geometryType=y.WGLGeometryType.TEXT;x.symbologyType=u.symbologyType;x.setVV(u.vvFlags,u);return x.data};
g.prototype.getVariation=function(){return{...h._get(h._getPrototypeOf(g.prototype),"getVariation",this).call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return h._createClass(g)}(b(c(e(k(q)))));n.shared=new n(0);let r=function(p){function g(){return p.apply(this,arguments)||this}h._inherits(g,p);g.load=function(u){const x=
this.shared;x.data=u;return x};g.from=function(u){const x=this.load(0);x.geometryType=y.WGLGeometryType.LABEL;x.symbologyType=u.symbologyType;x.setVV(u.vvFlags,u);x.mapAligned=B.isMapAligned(u.placement);return x.data};g.prototype.getVariation=function(){return{...h._get(h._getPrototypeOf(g.prototype),"getVariation",this).call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return h._createClass(g)}(k(q));
r.shared=new r(0);l.FillMaterialKey=f;l.LabelMaterialKey=r;l.LineMaterialKey=d;l.MarkerMaterialKey=a;l.MaterialKeyBase=q;l.TextMaterialKey=n;l.createMaterialKey=function(p,g){switch(p){case y.WGLGeometryType.FILL:return f.from(g);case y.WGLGeometryType.LINE:return d.from(g);case y.WGLGeometryType.MARKER:return a.from(g);case y.WGLGeometryType.TEXT:return n.from(g);case y.WGLGeometryType.LABEL:return r.from(g);default:throw Error(`Unable to createMaterialKey for unknown geometryType ${p}`);}};l.hasOutlineFillSymbology=
function(p){return C(p.symbologyType)};l.hasSimpleSymbology=function(p){return v(p.symbologyType)};l.hydrateMaterialKey=function(p){switch(q.load(p).geometryType){case y.WGLGeometryType.MARKER:return new a(p);case y.WGLGeometryType.FILL:return new f(p);case y.WGLGeometryType.LINE:return new d(p);case y.WGLGeometryType.TEXT:return new n(p);case y.WGLGeometryType.LABEL:return new r(p)}};l.isOutlineFillSymbology=C;l.isSimpleSymbology=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/webgl/mesh/templates/segmentUtils":function(){define(["exports","../../../../../../chunks/_rollupPluginBabelHelpers","./util"],function(l,h,D){function B(q){return q.length-1}function y(q){let k=0;for(let e=0;e<B(q);e++)k+=v(q,e);return k}function v(q,k,e=1){const [b,c]=q[k+1];return Math.sqrt(b*b+c*c)*e}function C(q,k,e,b,c){if(!(e<k)){var f=b.clone().seek(e/2);null!=f&&(q(f.clone(),e,c),e=(e-k)/2,f=f.seek(k/2),C(q,k,e,b,c+1),C(q,k,e,f,c+1))}}let t=function(){function q(e,b,
c,f,a){this._segments=e;this._index=b;this._distance=c;this._xStart=f;this._yStart=a;this._done=!1}q.create=function(e){return new q(e,0,0,e[0][0],e[0][1])};var k=q.prototype;k.clone=function(){return new q(this._segments,this._index,this._distance,this.xStart,this.yStart)};k.equals=function(e){return this._index===e._index||e._index===this._index-1&&(0===this._distance||1===e._distance)||e._index===this._index+1&&(1===this._distance||0===e._distance)};k.leq=function(e){return this._index<e._index||
this._index===e._index&&this._distance<=e._distance};k.geq=function(e){return this._index>e._index||this._index===e._index&&this._distance>=e._distance};k.hasPrev=function(){return 0<=this._index-1};k.hasNext=function(){return this._index+1<B(this._segments)};k.next=function(){if(!this.hasNext())return null;this._xStart+=this.dx;this._yStart+=this.dy;this._distance=0;this._index+=1;return this};k.prev=function(){if(!this.hasPrev())return this._done=!0,null;--this._index;this._xStart-=this.dx;this._yStart-=
this.dy;this._distance=1;return this};k._seekBackwards=function(e,b){var c=this.backwardLength;if(e<=c)return this._distance=(c-e)/this.length,this;for(c=this.backwardLength;this.prev();){if(c+this.length>e)return this._seekBackwards(e-c);c+=this.length}this._distance=0;return b?this:null};k.seek=function(e,b=!1){if(0>e)return this._seekBackwards(Math.abs(e),b);if(e<=this.remainingLength)return this._distance=(this.backwardLength+e)/this.length,this;let c=this.remainingLength;for(;this.next();){if(c+
this.length>e)return this.seek(e-c,b);c+=this.length}this._distance=1;return b?this:null};h._createClass(q,[{key:"_segment",get:function(){return this._segments[this._index+1]}},{key:"angle",get:function(){const e=this.dy;let b=Math.acos((0*e+-1*-this.dx)/(1*this.length));0<e&&(b=2*Math.PI-b);return b}},{key:"xStart",get:function(){return this._xStart}},{key:"yStart",get:function(){return this._yStart}},{key:"x",get:function(){return this.xStart+this.distance*this.dx}},{key:"y",get:function(){return this.yStart+
this.distance*this.dy}},{key:"dx",get:function(){return this._segment[0]}},{key:"dy",get:function(){return this._segment[1]}},{key:"xMidpoint",get:function(){return this.xStart+.5*this.dx}},{key:"yMidpoint",get:function(){return this.yStart+.5*this.dy}},{key:"xEnd",get:function(){return this.xStart+this.dx}},{key:"yEnd",get:function(){return this.yStart+this.dy}},{key:"length",get:function(){const {dx:e,dy:b}=this;return Math.sqrt(e*e+b*b)}},{key:"remainingLength",get:function(){return this.length*
(1-this._distance)}},{key:"backwardLength",get:function(){return this.length*this._distance}},{key:"distance",get:function(){return this._distance}},{key:"done",get:function(){return this._done}}]);return q}();l.SegmentCursor=t;l.pathDivide=function(q,k,e,b=!0){const c=y(q);q=t.create(q);const f=c/2;if(b){b=Math.floor(Math.max((c-k)/2,0)/k);q.seek(f-b*k);for(let a=-b;a<=b;a++)512>q.x&&0<=q.x&&512>q.y&&0<=q.y&&e(q.clone(),a,f+a*k,c),q.seek(k)}else q.seek(f),e(q.clone(),0,f+0*k,c)};l.pathLength=y;l.pathSubdivide=
function(q,k,e){C(e,k,y(q),t.create(q),0)};l.segmentAt=function(q,k){return q[k+1]};l.segmentCount=B;l.segmentLength=v;l.smoothPaths=function(q,k){for(let A=0;A<q.length;A++){let H=q[A];a:{var e=H,b=k;if(0>=b)break a;const E=e.length;if(3>E)break a;const F=[];var c=0;F.push(0);for(var f=1;f<E;f++)c+=D.dist(e[f],e[f-1]),F.push(c);b=Math.min(b,.2*c);c=[];c.push(e[0][0]);c.push(e[0][1]);f=e[E-1][0];const J=e[E-1][1];var a=D.sub([0,0],e[0],e[1]);D.normalize(a);e[0][0]+=b*a[0];e[0][1]+=b*a[1];D.sub(a,
e[E-1],e[E-2]);D.normalize(a);e[E-1][0]+=b*a[0];e[E-1][1]+=b*a[1];for(a=1;a<E;a++)F[a]+=b;F[E-1]+=b;a=.5*b;for(let L=1;L<E-1;L++){let I=0,G=0,K=0;for(var d=L-1;0<=d&&!(F[d+1]<F[L]-a);d--){var n=a+F[d+1]-F[L],r=F[d+1]-F[d],p=F[L]-F[d]<a?1:n/r;if(1E-6>Math.abs(p))break;var g=p*p,u=p*n-.5*g*r,x=p*r/b,w=e[d+1],m=e[d][0]-w[0],z=e[d][1]-w[1];I+=x/u*(w[0]*p*n+.5*g*(n*m-r*w[0])-g*p*r*m/3);G+=x/u*(w[1]*p*n+.5*g*(n*z-r*w[1])-g*p*r*z/3);K+=x}for(d=L+1;d<E&&!(F[d-1]>F[L]+a);d++){n=a-F[d-1]+F[L];r=F[d]-F[d-1];
p=F[d]-F[L]<a?1:n/r;if(1E-6>Math.abs(p))break;g=p*p;u=p*n-.5*g*r;x=p*r/b;w=e[d-1];m=e[d][0]-w[0];z=e[d][1]-w[1];I+=x/u*(w[0]*p*n+.5*g*(n*m-r*w[0])-g*p*r*m/3);G+=x/u*(w[1]*p*n+.5*g*(n*z-r*w[1])-g*p*r*z/3);K+=x}c.push(I/K);c.push(G/K)}c.push(f);c.push(J);for(let L=0,I=0;L<E;L++)e[L][0]=c[I++],e[L][1]=c[I++]}e=[];e.push(H[0]);for(b=1;b<H.length;b++){const [E,F]=H[b-1],[J,L]=H[b];e.push([Math.round(J-E),Math.round(L-F)])}H=q[A]=e}return q};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/webgl/mesh/templates/util":function(){define(["exports"],function(l){function h(D,B){return Math.sqrt(D*D+B*B)}l.DEFAULT_MAX_ZOOM=100;l.DEFAULT_MIN_ZOOM=0;l.dist=function(D,B){return h(D[0]-B[0],D[1]-B[1])};l.getLimitCosine=function(D=2){return 1/Math.max(D,1)};l.getMinMaxZoom=function(D,B){const y=!!D?.minScale&&B.scaleToZoom(D.minScale)||0;D=!!D?.maxScale&&B.scaleToZoom(D.maxScale)||100;return[y,D]};l.isExtent=function(D){return void 0!==D.xmin&&void 0!==D.ymin&&void 0!==D.xmax&&
void 0!==D.ymax};l.isMultipoint=function(D){return void 0!==D.points};l.isPoint=function(D){return void 0!==D.x&&void 0!==D.y};l.isPolygon=function(D){return void 0!==D.rings};l.isPolyline=function(D){return void 0!==D.paths};l.len=h;l.normalize=function(D){const B=h(D[0],D[1]);D[0]/=B;D[1]/=B};l.sub=function(D,B,y){D[0]=B[0]-y[0];D[1]=B[1]-y[1];return D};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/BidiText ../../../../../../core/screenUtils ../../../../../../symbols/cim/enums ../../alignmentUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseTextTemplate ./WGLMeshTemplate".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){return function(c){function f(a,d,n,r,p,g,u,x,w,m,z,A,H,E,F,J,L,I,G,K,P,Y,ea,aa){var T=c.call(this)||this;T._xOffset=D.pt2px(H);T._yOffset=D.pt2px(E);T._decoration=m||"none";T._backgroundColor=Y;T._borderLineColor=ea;T._borderLineSize=aa;T._color=p;T._haloColor=g;T._haloSize=Math.min(Math.floor(5*D.pt2px(D.toPt(n))),127);T._size=Math.min(Math.round(D.pt2px(d)),127);d=Math.min(Math.round(D.pt2px(r||d)),127);T._referenceSize=Math.round(Math.sqrt(256*d));T._scale=T._size/
C.GLYPH_SIZE;T._angle=A;T._justify=y.getJustification(u||"center");T._xAlignD=y.getXAnchorDirection(u||"center");T._yAlignD=y.getYAnchorDirection(x||"baseline");T._baseline="baseline"===(x||"baseline");T._bitset=(w===B.Alignment.MAP?1:0)|(z?1:0)<<1;a=q.MaterialKeyBase.load(a);a.sdf=!0;T._materialKey=a.data;T._lineWidth=D.pt2px(F)||512;T._lineHeight=J||1;T._textPlacement=L;T._effects=I;T._isCIM=G??!1;T._minMaxZoom=t.i1616to32(Math.round(K*C.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(P*C.MIN_MAX_ZOOM_PRECISION_FACTOR));
return T}l._inherits(f,c);f.fromText=function(a,d){const n=a.font?.size,r=new f(a.materialKey,n,a.haloSize||0,n,a.color&&v.premultiplyAlphaRGBAArray(a.color)||0,a.haloColor&&v.premultiplyAlphaRGBAArray(a.haloColor)||0,a.horizontalAlignment,a.verticalAlignment,B.Alignment.SCREEN,a.font?.decoration,!1,a.angle||0,a.xoffset||0,a.yoffset||0,a.lineWidth||0,a.lineHeight||0,null,null,!1,k.DEFAULT_MIN_ZOOM,k.DEFAULT_MAX_ZOOM,a.backgroundColor&&v.premultiplyAlphaRGBAArray(a.backgroundColor),a.borderLineColor&&
v.premultiplyAlphaRGBAArray(a.borderLineColor),a.borderLineSize),[,p]=h.bidiText(a.text);r.bindTextInfo(d??[],p);r._vertexBoundsScale=a.maxVVSize&&n?a.maxVVSize/n:1;return r};f.fromCIMText=function(a,d,n){var r=a.scaleFactor||1;const p=a.size*a.sizeRatio*r,[g,u]=k.getMinMaxZoom(a.scaleInfo,n);n=new f(a.materialKey,p,a.outlineSize*a.sizeRatio,a.referenceSize,v.premultiplyAlphaRGBA(a.color),v.premultiplyAlphaRGBA(a.outlineColor),a.horizontalAlignment,a.verticalAlignment,a.alignment,a.decoration,a.colorLocked??
!1,a.angle,a.offsetX*a.sizeRatio*r,a.offsetY*a.sizeRatio*r,512,1,a.markerPlacement,a.effects,!0,g,u,a.backgroundColor?v.premultiplyAlphaRGBA(a.backgroundColor):void 0,a.borderLineColor?v.premultiplyAlphaRGBA(a.borderLineColor):void 0,a.borderLineWidth);[,r]=h.bidiText(a.text);n.bindTextInfo(d,r);n._vertexBoundsScale=a.maxVVSize?a.maxVVSize/p:1;return n};return l._createClass(f)}(e(b))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../../../../../geometry/GeometryCursor ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper ../../definitions ../../enums ../../number ../../materialKey/MaterialKey ./shapingUtils".split(" "),
function(l,h,D,B,y,v,C,t,q){const k=C.i1616to32(4,4),e=C.i1616to32(16,4),b=C.i1616to32(4,2),c=C.i1616to32(4,6),f=[b,b,c,c],a=[b,c,b,c],d=[c,c,k,k],n=[k,k,c,c],r=[c,k,c,k],p=[k,c,k,c];return g=>function(u){function x(...m){m=u.call(this,...m)||this;m._isCIM=!1;m._vertexBoundsScale=1;m.geometryType=v.WGLGeometryType.TEXT;m._aux=C.i8888to32(0,0,m._referenceSize,m._bitset);return m}l._inherits(x,u);var w=x.prototype;w.bindTextInfo=function(m,z){this._shapingInfo=m&&m.length?q.shapeGlyphs(m,z,{scale:this._scale,
angle:this._angle,xOffset:this._xOffset,yOffset:this._yOffset,hAlign:this._xAlignD,vAlign:this._yAlignD,maxLineWidth:Math.max(32,Math.min(this._lineWidth,512)),lineHeight:y.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(this._lineHeight,4)),decoration:this._decoration,isCIM:this._isCIM,hasBackground:!!this._backgroundColor,borderLineSize:this._borderLineSize}):null};w._write=function(m,z,A,H){const E=z.getDisplayId();this._writeGeometry(m,z,E,A,H)};w._writeGeometry=function(m,z,A,H,E){const F=this._shapingInfo;
if(null!=F){if(this._textPlacement)return this._writePlacedText(m,A,F,H,z,E);z=E?E.asOptimized():"esriGeometryPolygon"===z.geometryType?z.readCentroid():z.readGeometryForDisplay();if(null!=z){if(z.isPoint){const [J,L]=z.coords;return!m.hasAggregates&&m.hasPixelBufferEnabled&&(0>J||512<=J||0>L||512<=L)?void 0:this._writeGlyphs(m,A,{x:J,y:L},F)}z.forEachVertex((J,L)=>this._writeGlyphs(m,A,{x:J,y:L},F))}}};w._writePlacedText=function(m,z,A,H,E,F){var J=this._textPlacement;if(E=F||D.GeometryCursor.fromFeatureSetReaderCIM(E))if(H=
B.CIMMarkerPlacementHelper.getPlacement(E,-1,J,h.pt2px(1),m.tileKey,H.geometryEngine)){J=A.bounds;J=Math.sqrt(J.height*J.height+J.width*J.width);for(var L;L=H.next();)E=L.tx,F=-L.ty,0<=E+J&&512>E-J&&0<=F+J&&512>F-J&&(L=-L.getAngle(),A.setRotation(L),this._writeGlyphs(m,z,{x:E,y:F},A),A.setRotation(-L))}};w._writeGlyphs=function(m,z,A,H){const E=t.MaterialKeyBase.load(this._materialKey),F=C.i1616to32(Math.round(8*A.x),Math.round(8*A.y)),J=this._vertexBoundsScale,{bounds:L,background:I,glyphs:G}=H;
0<G.length&&(this._borderLineColor||this._backgroundColor)&&(E.textureBinding=G[0].textureBinding,m.recordStart(z,E.data,this.geometryType,!0),this._writeBackgroundGeometry(m,z,A,L,I),m.recordEnd());const K=2*Math.max(L.width,L.height);for(const P of H.glyphs)E.textureBinding=P.textureBinding,m.recordStart(z,E.data,this.geometryType,!0),m.vertexBounds(A.x+L.x+this._xOffset,A.y+L.y-this._yOffset,K*J,K*J),this._writeVertices(m,z,F,P),m.recordEnd()};w._writeGlyph=function(m,z,A,H,E){var F=t.MaterialKeyBase.load(this._materialKey);
const J=C.i1616to32(Math.round(8*A),Math.round(8*H));F.textureBinding=E.textureBinding;m.recordStart(z,F.data,this.geometryType,!0);F=E.bounds;const L=this._vertexBoundsScale;m.vertexBounds(A+F.x*L,H+F.y*L,F.width*L,F.height*L);this._writeVertices(m,z,J,E);m.recordEnd()};w._writeVertices=function(m,z,A,H){const E=m.vertexCount();this._writeVertexCommon(m,z,A,H);m.vertexWrite(H.offsets.upperLeft);m.vertexWrite(H.texcoords.upperLeft);m.vertexEnd();this._writeVertexCommon(m,z,A,H);m.vertexWrite(H.offsets.upperRight);
m.vertexWrite(H.texcoords.upperRight);m.vertexEnd();this._writeVertexCommon(m,z,A,H);m.vertexWrite(H.offsets.lowerLeft);m.vertexWrite(H.texcoords.lowerLeft);m.vertexEnd();this._writeVertexCommon(m,z,A,H);m.vertexWrite(H.offsets.lowerRight);m.vertexWrite(H.texcoords.lowerRight);m.vertexEnd();m.indexWrite(E+0);m.indexWrite(E+1);m.indexWrite(E+2);m.indexWrite(E+1);m.indexWrite(E+3);m.indexWrite(E+2)};w._writeVertexCommon=function(m,z,A,H){H=this._color;const E=this._haloColor,F=C.i8888to32(0,0,this._referenceSize,
this._bitset),J=C.i8888to32(0,0,this._size,this._haloSize);m.vertexWrite(A);m.vertexWrite(z);m.vertexWrite(H);m.vertexWrite(E);m.vertexWrite(J);m.vertexWrite(F);m.vertexWrite(this._minMaxZoom)};w._writeBackgroundVertex=function(m,z,A,H,E,F){const J=C.i8888to32(0,1,this._referenceSize,this._bitset),L=C.i8888to32(0,0,this._size,this._haloSize),I=C.i8888to32(0,0,0,0);m.vertexWrite(A);m.vertexWrite(z);m.vertexWrite(H);m.vertexWrite(I);m.vertexWrite(L);m.vertexWrite(J);m.vertexWrite(this._minMaxZoom);
m.vertexWrite(E);m.vertexWrite(F);m.vertexEnd()};w._writeBackgroundQuad=function(m,z,A,H,E,F){const J=m.vertexCount();this._writeBackgroundVertex(m,z,A,H,E.upperLeft,F[0]);this._writeBackgroundVertex(m,z,A,H,E.upperRight,F[1]);this._writeBackgroundVertex(m,z,A,H,E.lowerLeft,F[2]);this._writeBackgroundVertex(m,z,A,H,E.lowerRight,F[3]);m.indexWrite(J+0);m.indexWrite(J+1);m.indexWrite(J+2);m.indexWrite(J+1);m.indexWrite(J+3);m.indexWrite(J+2)};w._writeBackgroundGeometry=function(m,z,A,H,E){const F=C.i1616to32(Math.round(8*
A.x),Math.round(8*A.y)),{x:J,y:L,width:I,height:G}=H;H=2*Math.max(I,G);m.vertexBounds(A.x+J+this._xOffset,A.y+L-this._yOffset,H*this._vertexBoundsScale,H*this._vertexBoundsScale);this._backgroundColor&&this._writeBackgroundQuad(m,z,F,this._backgroundColor,E.main,[e,e,e,e]);if(this._borderLineColor||this._backgroundColor){const [K,P,Y,ea,aa]=this._borderLineColor&&this._borderLineSize&&0<this._borderLineSize?[f,f,a,a,this._borderLineColor]:[d,n,r,p,this._backgroundColor];this._writeBackgroundQuad(m,
z,F,aa,E.top,K);this._writeBackgroundQuad(m,z,F,aa,E.bot,P);this._writeBackgroundQuad(m,z,F,aa,E.left,Y);this._writeBackgroundQuad(m,z,F,aa,E.right,ea)}};return l._createClass(x)}(g)})},"esri/geometry/GeometryCursor":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../core/lang ./geometryCursorCollectUtils ./support/jsonUtils ../layers/graphics/OptimizedGeometry".split(" "),function(l,h,D,B,y,v){function C(c){if(y.isPolygon(c))c=[c.rings,"esriGeometryPolygon"];else if(y.isPolyline(c))c=
[c.paths,"esriGeometryPolyline"];else if(y.isMultipoint(c))c=[[c.points],"esriGeometryMultipoint"];else if(y.isExtent(c))c=[[[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]]],"esriGeometryEnvelope"];else if(y.isPoint(c)){const f=[c.x,c.y];c.z&&f.push(c.z);c.m&&f.push(c.m);c=[[[f]],"esriGeometryPoint"]}else c=[[],"esriGeometryPolyline"];return c}let t=function(){function c(){}c.fromOptimized=function(a,d,n=!1,r=!1){return(new q).initialize(a,d,n,r,1)};c.fromJSON=function(a,
d=!1,n=!1){const [r,p]=C(a);return(new k).initialize(r,p,d,n,1)};c.fromOptimizedCIM=function(a,d,n=!1,r=!1){return(new e).initialize(a,d,n,r,1)};c.fromJSONCIM=function(a,d=!1,n=!1){const [r,p]=C(a);return(new b).initialize(r,p,d,n,1)};c.fromFeatureSetReader=function(a){const d=a.readGeometryForDisplay();a=a.geometryType;return d&&a?this.fromOptimized(d,a):null};c.fromFeatureSetReaderCIM=function(a){const d=a.readGeometryForDisplay();a=a.geometryType;return d&&a?this.fromOptimizedCIM(d,a):null};c.createEmptyOptimized=
function(a,d=!1,n=!1){return(new q).initialize(new v,a,d,n,1)};c.createEmptyJSON=function(a,d=!1,n=!1){return(new k).initialize([],a,d,n,1)};c.createEmptyOptimizedCIM=function(a,d=!1,n=!1){return(new e).initialize(new v,a,d,n,1)};c.createEmptyJSONCIM=function(a,d=!1,n=!1){return(new b).initialize([],a,d,n,1)};var f=c.prototype;f.asJSON=function(){const a=B.collectMultipath(this);return"esriGeometryEnvelope"===this.geometryType?{xmin:a[0][0][0],ymin:a[0][0][1],xmax:a[0][2][0],ymax:a[0][2][1]}:"esriGeometryMultipoint"===
this.geometryType?{points:a.flat()}:"esriGeometryPoint"===this.geometryType?{x:a[0][0][0],y:a[0][0][1]}:"esriGeometryPolygon"===this.geometryType?{rings:a}:{paths:a}};f.invertY=function(){this.yFactor*=-1};return h._createClass(c)}(),q=function(c){function f(){var d=c.apply(this,arguments)||this;d._end=-1;return d}h._inherits(f,c);var a=f.prototype;a.initialize=function(d,n,r,p,g){this.hasZ=r;this.hasM=p;this.geometryType=n;this._stride=2+Number(r)+Number(p);this._geometry=d;this._pathIndex=-1;this._pathOffset=
0;this._pointOffset=-this._stride;this._end=-1;this.yFactor=g;return this};a.reset=function(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)};a.seekPathStart=function(){this._pointOffset=this._pathOffset-this._stride};a.seekPathEnd=function(){this._pointOffset=this._end};a.seekInPath=function(d){d=this._pathOffset+d*this._stride;return 0<=d&&d<this._end?(this._pointOffset=d,!0):!1};a.nextPoint=function(){return(this._pointOffset+=this._stride)<this._end};a.prevPoint=
function(){return(this._pointOffset-=this._stride)>=this._pathOffset};a.nextPath=function(){0<=this._pathIndex&&(this._pathOffset+=this._stride*(this._geometry.isPoint?1:this._geometry.lengths[this._pathIndex]));this._pointOffset=this._pathOffset-this._stride;this._end=this._pointOffset+this._stride+this._stride*(this._geometry.isPoint?1:this._geometry.lengths[this._pathIndex+1]);return++this._pathIndex<this.numPaths};a.pathLength=function(){const d=this._end,n=this._stride,r=this._geometry.coords;
let p=0;for(let g=this._pathOffset+n;g<d;g+=n){const u=r[g]-r[g-n],x=r[g+1]-r[g-n+1];p+=Math.sqrt(u*u+x*x)}return p};a.startPath=function(){this._geometry.lengths.push(0)};a.pushPath=function(d){this.startPath();this.pushPoints(d)};a.pushPoint=function(d){for(let n=0;n<this._stride;++n)this._geometry.coords.push(d[n]);this._geometry.lengths[this.numPaths-1]++};a.pushXY=function(d,n){this._geometry.coords.push(d,n);this._geometry.lengths[this.numPaths-1]++};a.pushPoints=function(d){for(const n of d)for(let r=
0;r<this._stride;++r)this._geometry.coords.push(n[r]);this._geometry.lengths[this.numPaths-1]+=d.length};a.asOptimized=function(){const d=this._geometry.clone();if(1!==this.yFactor)for(let n=1;n<d.coords.length;n+=this._stride)d.coords[n]*=this.yFactor;"esriGeometryPoint"===this.geometryType&&(d.lengths.length=0);return d};a.isClosed=function(){const d=this._geometry.coords,n=this._pathOffset,r=this._end-this._stride;for(let p=0;p<this._stride;p++)if(d[n+p]!==d[r+p])return!1;return!0};a.clone=function(){return(new f).initialize(this._geometry.clone(),
this.geometryType,this.hasZ,this.hasM,this.yFactor)};h._createClass(f,[{key:"numPoints",get:function(){const {lengths:d}=this._geometry;return 0>this._pathIndex||this._pathIndex>d.length-1?0:d[this._pathIndex]}},{key:"numPaths",get:function(){return this._geometry.lengths.length}},{key:"x",get:function(){return this._geometry.coords[this._pointOffset]},set:function(d){this._geometry.coords[this._pointOffset]=d}},{key:"y",get:function(){return this.yFactor*this._geometry.coords[this._pointOffset+1]},
set:function(d){this._geometry.coords[this._pointOffset+1]=this.yFactor*d}},{key:"z",get:function(){return this._geometry.coords[this._pointOffset+2]},set:function(d){this._geometry.coords[this._pointOffset+2]=d}},{key:"m",get:function(){return this._geometry.coords[this._pointOffset+(this.hasZ?3:2)]},set:function(d){this._geometry.coords[this._pointOffset+3]=d}},{key:"pathIndex",get:function(){return this._pathIndex}},{key:"pointIndex",get:function(){return this._pointOffset/this._stride}}]);return f}(t),
k=function(c){function f(){return c.apply(this,arguments)||this}h._inherits(f,c);var a=f.prototype;a.initialize=function(d,n,r,p,g){this._paths=d;this.geometryType=n;this.hasZ=r;this.hasM=p;this._pathIndex=this._pointIndex=-1;this.yFactor=g;this._mIdx=this.hasZ?3:2;return this};a.reset=function(){this._pathIndex=this._pointIndex=-1};a.seekPathStart=function(){this._pointIndex=-1};a.seekPathEnd=function(){this._pointIndex=this._currentPath.length};a.seekInPath=function(d){return 0<=d&&d<this._currentPath.length?
(this._pointIndex=d,this._currentPoint=this._currentPath[this._pointIndex],!0):!1};a.nextPoint=function(){this._currentPoint=this._currentPath[++this._pointIndex];return this._pointIndex<this._currentPath.length};a.prevPoint=function(){this._currentPoint=this._currentPath[--this._pointIndex];return 0<=this._pointIndex};a.nextPath=function(){this._pointIndex=-1;this._currentPath=this._paths[++this._pathIndex];return this._pathIndex<this.numPaths};a.pathLength=function(){const d=this._currentPath.length,
n=this._currentPath;let r=0;for(let g=1;g<d;g++){var p=n[g-1];const u=n[g],x=u[0]-p[0];p=u[1]-p[1];r+=Math.sqrt(x*x+p*p)}return r};a.startPath=function(){this._paths.push([])};a.pushPath=function(d){this._paths.push(d)};a.pushPoint=function(d){this._paths[this.pathIndex].push(d)};a.pushXY=function(d,n){this._paths[this.pathIndex].push([d,n])};a.pushPoints=function(d){this._paths[this.pathIndex].push(...d)};a.asOptimized=function(){const d=new v;if("esriGeometryPoint"===this.geometryType)d.coords.push(...this._paths[0][0]),
d.lengths.length=0;else for(const n of this._paths){for(const r of n)d.coords.push(r[0]),d.coords.push(r[1]*this.yFactor),this.hasZ&&d.coords.push(r[2]),this.hasM&&d.coords.push(r[this._mIdx]);d.lengths.push(n.length)}return d};a.isClosed=function(){const d=this._currentPath[0],n=this._currentPath[this._currentPath.length-1];for(let r=0;r<d.length;r++)if(d[r]!==n[r])return!1;return!0};a.clone=function(){return(new f).initialize(D.clone(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)};
h._createClass(f,[{key:"numPoints",get:function(){return 0>this._pathIndex||this._pathIndex>this.numPaths-1?-1:this._paths[this._pathIndex].length}},{key:"numPaths",get:function(){return this._paths.length}},{key:"x",get:function(){return this._currentPoint[0]},set:function(d){this._currentPoint[0]=d}},{key:"y",get:function(){return this.yFactor*this._currentPoint[1]},set:function(d){this._currentPoint[1]=this.yFactor*d}},{key:"z",get:function(){return this._currentPoint[2]},set:function(d){this._currentPoint[2]=
d}},{key:"m",get:function(){return this._currentPoint[this._mIdx]},set:function(d){this._currentPoint[this._mIdx]=d}},{key:"pathIndex",get:function(){return this._pathIndex}},{key:"pointIndex",get:function(){return this._pointIndex}}]);return f}(t),e=function(c){function f(){return c.apply(this,arguments)||this}h._inherits(f,c);var a=f.prototype;a.initialize=function(d,n,r,p,g){h._get(h._getPrototypeOf(f.prototype),"initialize",this).call(this,d,n,r,p,g);this._controlPoints||(this._controlPoints=
this._controlPoints=Array(this.numPaths).fill(void 0).map(u=>new Set));return this};a.startPath=function(){h._get(h._getPrototypeOf(f.prototype),"startPath",this).call(this);this._controlPoints.push(new Set)};a.clone=function(){const d=(new f).initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);d._controlPoints=this._controlPoints;return d};a.setControlPoint=function(){this._controlPoints[this.pathIndex].add(this.pointIndex)};a.getControlPoint=function(){return this._controlPoints[this.pathIndex].has(this.pointIndex)};
a.setControlPointAt=function(d){this._controlPoints[this.pathIndex].add(d)};a.getControlPointAt=function(d){return this._controlPoints[this.pathIndex].has(d)};return h._createClass(f)}(q),b=function(c){function f(){return c.apply(this,arguments)||this}h._inherits(f,c);var a=f.prototype;a.initialize=function(d,n,r,p,g){return h._get(h._getPrototypeOf(f.prototype),"initialize",this).call(this,d,n,r,p,g)};a.clone=function(){return(new f).initialize(D.clone(this._paths),this.geometryType,this.hasZ,this.hasM,
1)};a.setControlPoint=function(){this._paths[this.pathIndex][this.pointIndex][4]=1};a.getControlPoint=function(){return 1===this._paths[this.pathIndex][this.pointIndex][4]};a.setControlPointAt=function(d){this._paths[this.pathIndex][d][4]=1};a.getControlPointAt=function(d){return 1===this._paths[this.pathIndex][d][4]};return h._createClass(f)}(k);l.GeometryCursor=t;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/placements/CIMMarkerPlacementHelper":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../CIMOperators"],function(l,h,D){let B=function(){function y(){}y.getPlacement=function(v,C,t,q,k,e){const b=D.getPlacementOperator(t);if(!b)return null;-1===C&&v.invertY();return b.execute(v,t,q,k,e)};return h._createClass(y)}();l.CIMMarkerPlacementHelper=B;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/CIMOperators":function(){define("exports ./effects/EffectAddControlPoints ./effects/EffectArrow ./effects/EffectBuffer ./effects/EffectControlMeasureLine ./effects/EffectCut ./effects/EffectDashes ./effects/EffectDonut ./effects/EffectJog ./effects/EffectMove ./effects/EffectOffset ./effects/EffectReverse ./effects/EffectRotate ./effects/EffectScale ./effects/EffectWave ./placements/PlacementAlongLineSameSize ./placements/PlacementAtExtremities ./placements/PlacementAtRatioPositions ./placements/PlacementInsidePolygon ./placements/PlacementOnLine ./placements/PlacementOnVertices ./placements/PlacementPolygonCenter".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x){l.getEffectOperator=function(w){if(!w)return null;switch(w.type){case "CIMGeometricEffectAddControlPoints":return h.EffectAddControlPoints.local();case "CIMGeometricEffectArrow":return D.EffectArrow.local();case "CIMGeometricEffectBuffer":return B.EffectBuffer.local();case "CIMGeometricEffectControlMeasureLine":return y.EffectControlMeasureLine.local();case "CIMGeometricEffectCut":return v.EffectCut.local();case "CIMGeometricEffectDashes":return C.EffectDashes.local();
case "CIMGeometricEffectDonut":return t.EffectDonut.local();case "CIMGeometricEffectJog":return q.EffectJog.local();case "CIMGeometricEffectMove":return k.EffectMove.local();case "CIMGeometricEffectOffset":return e.EffectOffset.local();case "CIMGeometricEffectReverse":return b.EffectReverse.local();case "CIMGeometricEffectRotate":return c.EffectRotate.local();case "CIMGeometricEffectScale":return f.EffectScale.local();case "CIMGeometricEffectWave":return a.EffectWave.local()}return null};l.getPlacementOperator=
function(w){if(!w)return null;switch(w.type){case "CIMMarkerPlacementAlongLineSameSize":return d.PlacementAlongLineSameSize.local();case "CIMMarkerPlacementAtExtremities":return n.PlacementAtExtremities.local();case "CIMMarkerPlacementAtRatioPositions":return r.PlacementAtRatioPositions.local();case "CIMMarkerPlacementInsidePolygon":return p.PlacementInsidePolygon.local();case "CIMMarkerPlacementOnLine":return g.PlacementOnLine.local();case "CIMMarkerPlacementOnVertices":return u.PlacementOnVertices.local();
case "CIMMarkerPlacementPolygonCenter":return x.PlacementPolygonCenter.local()}return null};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectAddControlPoints":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(l,h){let D=function(){function y(){}y.local=function(){null===y.instance&&(y.instance=new y);return y.instance};y.prototype.execute=function(v,C,t,q,k){return new B(v,C,t)};return h._createClass(y)}();D.instance=
null;let B=function(){function y(C,t,q){this._inputGeometries=C;this._angleTolerance=void 0!==t.angleTolerance?t.angleTolerance:120;this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}var v=y.prototype;v.next=function(){let C=this._inputGeometries.next();for(;C;){if("esriGeometryPolygon"===C.geometryType)this._isClosed=!0;else if("esriGeometryPolyline"===C.geometryType)this._isClosed=!1;else if("esriGeometryEnvelope"===C.geometryType){if(this._maxCosAngle)return C;this._isClosed=
!0}else{C=this._inputGeometries.next();continue}for(;C.nextPath();)this._processPath(C);C.reset();return C}return null};v._processPath=function(C){if(C.nextPoint()){const t=C.x,q=C.y;let k=t,e=q,b=C.numPoints,c=0,f=0,a=0,d=0,n=0,r=0;this._isClosed&&++b;for(let p=1;C.nextPoint()||p<b;++p){let g,u;this._isClosed&&p===b-1?(g=t,u=q):(g=C.x,u=C.y);const x=g-k,w=u-e,m=Math.sqrt(x*x+w*w);1<p&&0<m&&0<a&&(c*x+f*w)/m/a<=this._maxCosAngle&&C.setControlPointAt(p-1);1===p&&(d=x,n=w,r=m);0<m&&(k=g,e=u,c=x,f=w,
a=m)}this._isClosed&&0<a&&0<r&&(c*d+f*n)/r/a<=this._maxCosAngle&&C.setControlPointAt(0)}};return h._createClass(y)}();l.EffectAddControlPoints=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectArrow":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/GeometryCursor ../../../geometry/geometryCursorCollectUtils ../CIMCursor ../CurveHelper ../enums".split(" "),function(l,h,D,B,y,v,C){const t=C.GeometricEffectArrowType.OpenEnded;
let q=function(){function e(){}e.local=function(){null===e.instance&&(e.instance=new e);return e.instance};e.prototype.execute=function(b,c,f,a,d){return new k(b,c,f)};return h._createClass(e)}();q.instance=null;let k=function(e){function b(f,a,d){f=e.call(this,f,!1,!0)||this;f._curveHelper=new v.CurveHelper;f._width=(void 0!==a.width?a.width:5)*d;f._arrowType=void 0!==a.geometricEffectArrowType?a.geometricEffectArrowType:void 0!==a.arrowType?a.arrowType:t;f._offsetFlattenError=v.PIXEL_TOLERANCE*
d;return f}h._inherits(b,e);var c=b.prototype;c.processPath=function(f){const a=D.GeometryCursor.createEmptyOptimizedCIM(f.geometryType);switch(this._arrowType){default:this._constructSimpleArrow(a,f,!0);break;case C.GeometricEffectArrowType.Block:this._constructSimpleArrow(a,f,!1);break;case C.GeometricEffectArrowType.Crossed:this._constructCrossedArrow(a,f)}return a};c._constructSimpleArrow=function(f,a,d){var n=a.pathLength(),r=this._width;n<2*r&&(r=n/2);var p=this._curveHelper.getSubCurve(a,0,
n-r);if(p&&p.nextPath()&&(p.seekPathStart(),n=r/2,!this._curveHelper.isEmpty(p)&&(p=B.collectPath(p),r=this._constructOffset(p,-n)))&&(p=this._constructOffset(p,n))){var g=this._constructArrowBasePoint(r,-n/2);g&&(n=this._constructArrowBasePoint(p,n/2))&&(a.seekInPath(a.numPoints-1),a=[a.x,a.y],f.pushPath(p),f.nextPath(),f.nextPoint(),f.setControlPoint(),f.pushPoint(n),f.nextPoint(),f.setControlPoint(),f.pushPoint(a),f.nextPoint(),f.setControlPoint(),f.pushPoint(g),f.nextPoint(),f.setControlPoint(),
f.pushPoints(r.reverse()),f.setControlPoint(),d||(f.setControlPointAt(0),f.setControlPointAt(f.numPoints-1),f.pushPoint(p[0])),f.reset())}};c._constructCrossedArrow=function(f,a){var d=a.pathLength(),n=this._width;d<3.732050807568877*n&&(n=d/3.732050807568877);a.seekPathStart();var r=this._curveHelper.getSubCurve(a,0,d-2.732050807568877*n);if(r){r.nextPath();var p=n/2;if(!this._curveHelper.isEmpty(r)){var g=B.collectPath(r);if(r=this._constructOffset(g,p))if(g=this._constructOffset(g,-p))if(d=this._curveHelper.getSubCurve(a,
0,d-n))if(d.nextPath(),!this._curveHelper.isEmpty(d)&&(d=B.collectPath(d),n=this._constructOffset(d,p))){var u=this._constructOffset(d,-p);if(u&&(d=n[n.length-1],n=this._constructArrowBasePoint(n,p/2))){var x=u[u.length-1];if(p=this._constructArrowBasePoint(u,-p/2))a.seekInPath(a.numPoints-1),a=[a.x,a.y],f.pushPath(r),f.nextPath(),f.nextPoint(),f.setControlPoint(),f.pushPoint(x),f.nextPoint(),f.setControlPoint(),f.pushPoint(p),f.nextPoint(),f.setControlPoint(),f.pushPoint(a),f.nextPoint(),f.setControlPoint(),
f.pushPoint(n),f.nextPoint(),f.setControlPoint(),f.pushPoint(d),f.nextPoint(),f.setControlPoint(),f.pushPoints(g.reverse()),f.nextPoint(),f.setControlPoint(),f.reset()}}}}};c._constructOffset=function(f,a){return this._curveHelper.offset(f,a,C.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError)};c._constructArrowBasePoint=function(f,a){if(!f||2>f.length)return null;var d=f[f.length-2];f=f[f.length-1];d=[f[0]-d[0],f[1]-d[1]];this._curveHelper.normalize(d);return[f[0]+d[1]*a,f[1]-d[0]*a]};
return h._createClass(b)}(y.PathEffectCursor);l.EffectArrow=q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/CIMCursor":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./CIMPlacements"],function(l,h,D){let B=function(){function v(C,t=!0,q=!0,k=0){this.isClosed=!1;this.geometryCursor=null;this.geometryCursor=!t&&"esriGeometryPolygon"===C.geometryType||!q&&"esriGeometryPolyline"===C.geometryType?null:C;this.geomUnitsPerPoint=k;this.iteratePath=
!1;this.internalPlacement=new D.Placement}v.prototype.next=function(){if(!this.geometryCursor)return null;for(;this.iteratePath||this.geometryCursor.nextPath();){this.geometryCursor.seekPathStart();const C=this.processPath(this.geometryCursor);if(C)return C}return this.geometryCursor=null};return h._createClass(v)}(),y=function(){function v(C,t,q,k=0){this.isClosed=!1;this.inputGeometries=C;this.acceptPolygon=t;this.acceptPolyline=q;this.geomUnitsPerPoint=k;this.iteratePath=!1;this.multiPathCursor=
null}v.prototype.next=function(){for(;;){if(!this.multiPathCursor){for(var C=this.inputGeometries.next();C&&!(this.isClosed=this.acceptPolygon&&"esriGeometryPolygon"===C.geometryType||"esriGeometryEnvelope"===C.geometryType,this.multiPathCursor=C);)C=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();)if(this.multiPathCursor.seekPathStart(),C=this.processPath(this.multiPathCursor))return C;this.multiPathCursor=null}};return h._createClass(v)}();
l.PathEffectCursor=y;l.PathTransformationCursor=B;l.getId=function(v){return v[4]};l.setId=function(v,C){v[4]=C};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/CIMPlacements":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(l,h){let D=function(){function y(){this.setIdentity()}var v=y.prototype;v.getAngle=function(){if(null==this.rz||0===this.rz&&1!==this.rzCos&&0!==this.rzSin)this.rz=Math.atan2(this.rzSin,this.rzCos);return this.rz};
v.setIdentity=function(){this.tz=this.ty=this.tx=0;this.s=1;this.rz=this.ry=this.rx=0;this.rzCos=1;this.rzSin=0};v.setTranslate=function(C,t){this.tx=C;this.ty=t};v.setTranslateZ=function(C){this.tz=C};v.setRotateCS=function(C,t){this.rz=void 0;this.rzCos=C;this.rzSin=t};v.setRotate=function(C){this.rz=C;this.rzSin=this.rzCos=void 0};v.setRotateY=function(C){this.ry=C};v.setScale=function(C){this.s=C};v.setMeasure=function(C){this.m=C};return h._createClass(y)}(),B=function(){function y(){}y.prototype.next=
function(){return null};return h._createClass(y)}();l.EmptyPlacementCursor=B;l.Placement=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/CurveHelper":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../geometry/GeometryCursor","./enums"],function(l,h,D,B){let y=function(){function v(t,q){}var C=v.prototype;C.isEmpty=function(t){if(!t.nextPoint())return!0;let q,k,e,b;q=t.x;for(k=t.y;t.nextPoint();q=k,k=b)if(e=t.x,b=t.y,e!==q||b!==k)return t.seekPathStart(),
!1;t.seekPathStart();return!0};C.normalize=function(t){const q=Math.sqrt(t[0]*t[0]+t[1]*t[1]);0!==q&&(t[0]/=q,t[1]/=q)};C.getLength=function(t,q,k,e){t=k-t;q=e-q;return Math.sqrt(t*t+q*q)};C.getSegLength=function(t){const [[q,k],[e,b]]=t;return this.getLength(q,k,e,b)};C.getCoord2D=function(t,q,k,e,b){return[t+(k-t)*b,q+(e-q)*b]};C.getSegCoord2D=function(t,q){const [[k,e],[b,c]]=t;return this.getCoord2D(k,e,b,c,q)};C.getAngle=function(t,q,k,e,b){return Math.atan2(e-q,k-t)};C.getAngleCS=function(t,
q,k,e,b){t=k-t;q=e-q;e=Math.sqrt(t*t+q*q);return 0<e?[t/e,q/e]:[1,0]};C.getSegAngleCS=function(t,q){const [[k,e],[b,c]]=t;return this.getAngleCS(k,e,b,c,q)};C.cut=function(t,q,k,e,b,c){b=0>=b?[t,q]:this.getCoord2D(t,q,k,e,b);t=1<=c?[k,e]:this.getCoord2D(t,q,k,e,c);return[b,t]};C.getSubCurve=function(t,q,k){const e=D.GeometryCursor.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(e,t,q,k)?e:null};C.appendSubCurve=function(t,q,k,e){t.startPath();q.seekPathStart();let b=0;var c=
!0;if(!q.nextPoint())return!1;var f=q.x;let a=q.y;for(;q.nextPoint();){const d=this.getLength(f,a,q.x,q.y);if(0!==d){if(c){if(b+d>k){const n=(k-b)/d;let r=1;c=!1;b+d>=e&&(r=(e-b)/d,c=!0);(f=this.cut(f,a,q.x,q.y,n,r))&&t.pushPoints(f);if(c)break;c=!1}}else{if(b+d>e){(q=this.cut(f,a,q.x,q.y,0,(e-b)/d))&&t.pushPoint(q[1]);break}t.pushXY(q.x,q.y)}b+=d}f=q.x;a=q.y}return!0};C.getCIMPointAlong=function(t,q){if(!t.nextPoint())return null;let k=0,e,b,c,f;e=t.x;for(b=t.y;t.nextPoint();e=c,b=f){c=t.x;f=t.y;
const a=this.getLength(e,b,c,f);if(0!==a){if(k+a>q)return this.getCoord2D(e,b,c,f,(q-k)/a);k+=a}}return null};C.offset=function(t,q,k,e,b){if(!t||2>t.length)return null;var c=0,f=t[c++];for(b=c;c<t.length;){var a=t[c];if(a[0]!==f[0]||a[1]!==f[1])c!==b&&(t[b]=t[c]),f=t[b++];c++}(c=t[0][0]===t[b-1][0]&&t[0][1]===t[b-1][1])&&--b;if(b<(c?3:2))return null;a=[];f=c?t[b-1]:null;let d=t[0];for(let u=0;u<b;u++){const x=u===b-1?c?t[0]:null:t[u+1];if(f)if(x){var n=[x[0]-d[0],x[1]-d[1]];this.normalize(n);var r=
[d[0]-f[0],d[1]-f[1]];this.normalize(r);var p=r[0]*n[1]-r[1]*n[0],g=r[0]*n[0]+r[1]*n[1];if(0===p&&1===g){d=x;continue}if(0<=p===0>=q)1>g&&(n=[n[0]-r[0],n[1]-r[1]],this.normalize(n),r=Math.sqrt((1+g)/2),r>1/e&&(r=-Math.abs(q)/r,a.push([d[0]-n[0]*r,d[1]-n[1]*r])));else switch(k){case B.GeometricEffectOffsetMethod.Mitered:if(f=Math.sqrt((1+g)/2),0<f&&1/f<e){n=[n[0]-r[0],n[1]-r[1]];this.normalize(n);r=Math.abs(q)/f;a.push([d[0]-n[0]*r,d[1]-n[1]*r]);break}case B.GeometricEffectOffsetMethod.Bevelled:a.push([d[0]+
r[1]*q,d[1]-r[0]*q]);a.push([d[0]+n[1]*q,d[1]-n[0]*q]);break;case B.GeometricEffectOffsetMethod.Rounded:if(1>g){a.push([d[0]+r[1]*q,d[1]-r[0]*q]);f=Math.floor(2.5*(1-g));if(0<f){p=g=1/f;for(let w=1;w<f;w++,p+=g){const m=[r[1]*(1-p)+n[1]*p,-r[0]*(1-p)-n[0]*p];this.normalize(m);a.push([d[0]+m[0]*q,d[1]+m[1]*q])}}a.push([d[0]+n[1]*q,d[1]-n[0]*q])}break;default:0>p?(a.push([d[0]+(r[1]+r[0])*q,d[1]+(r[1]-r[0])*q]),a.push([d[0]+(n[1]-n[0])*q,d[1]-(n[0]+n[1])*q])):(f=Math.sqrt((1+Math.abs(g))/2),n=[n[0]-
r[0],n[1]-r[1]],this.normalize(n),r=q/f,a.push([d[0]-n[0]*r,d[1]-n[1]*r]))}}else n=[d[0]-f[0],d[1]-f[1]],this.normalize(n),a.push([d[0]+n[1]*q,d[1]-n[0]*q]);else n=[x[0]-d[0],x[1]-d[1]],this.normalize(n),a.push([d[0]+n[1]*q,d[1]-n[0]*q]);f=d;d=x}if(a.length<(c?3:2))return null;c&&a.push([a[0][0],a[0][1]]);return a};return h._createClass(v)}();l.CurveHelper=y;l.PIXEL_TOLERANCE=.03;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectBuffer":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../geometry/GeometryCursor ../../../geometry/geometryCursorCollectUtils ../CIMEffects ../CurveHelper ../enums ../../../geometry/SpatialReference".split(" "),
function(l,h,D,B,y,v,C,t,q){D=function(){function e(){}e.local=function(){null===e.instance&&(e.instance=new e);return e.instance};e.prototype.execute=function(b,c,f,a,d,n){return new k(b,c,f,a,d,n)};return h._createClass(e)}();D.instance=null;let k=function(){function e(b,c,f,a,d,n){this._inputGeometries=b;this._tileKey=a;this._geometryEngine=d;this._curveHelper=new C.CurveHelper;this._size=(void 0!==c.size?c.size:1)*f;this._maxInflateSize=n*f;this._offsetFlattenError=C.PIXEL_TOLERANCE*f}e.prototype.next=
function(){for(var b;b=this._inputGeometries.next();){if(0===this._size)return b;if("esriGeometryEnvelope"===b.geometryType)if(0<this._size){var c=B.GeometryCursor.createEmptyOptimizedCIM(b.geometryType),f=y.collectMultipath(b)[0];if(f=this._curveHelper.offset(f,this._size,t.GeometricEffectOffsetMethod.Rounded,4,this._offsetFlattenError))return c.pushPath(f),c}else if(0>this._size&&(c=b.asJSON(),0<Math.min(c.xmax-c.xmin,c.ymax-c.ymin)+2*this._size))return B.GeometryCursor.fromJSONCIM({xmin:c.xmin-
this._size,xmax:c.xmax+this._size,ymin:c.ymin-this._size,ymax:c.ymax+this._size});c=this._geometryEngine;if(null==c)break;if(b=this._tileKey?v.clipCursorToTileExtent(b,this._maxInflateSize):b)return(b=c.buffer(q.WebMercator,b.asJSON(),this._size,1))?B.GeometryCursor.fromJSONCIM(b):null}return null};return h._createClass(e)}();l.EffectBuffer=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/CIMEffects":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../../geometry/GeometryCursor","../../geometry/support/TileClipper"],function(l,h,D,B){let y,v=function(){function C(t){this._geometry=t}C.prototype.next=function(){const t=this._geometry;this._geometry=null;return t};return h._createClass(C)}();l.SimpleEffectCursor=v;l.clipCursorToTileExtent=function(C,t){y||(y=new B.TileClipper(0,0,0,1));var q="esriGeometryPolygon"===C.geometryType;const k=q?3:2;y.reset(q?B.GeometryType.Polygon:B.GeometryType.LineString);y.setPixelMargin(t+1);y.setExtent(512);
let e;for(;C.nextPath();)if(!(C.numPoints<k)){C.nextPoint();t=C.x;e=-C.y;for(y.moveTo(t,e);C.nextPoint();)t=C.x,e=-C.y,y.lineTo(t,e);q&&y.close()}if(q=y.result(!1)){C=D.GeometryCursor.createEmptyOptimizedCIM(C.geometryType);for(const b of q){C.startPath();for(const c of b)C.pushXY(c.x,-c.y)}C.reset();return C}return null};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectControlMeasureLine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/GeometryCursor ../../../geometry/geometryCursorCollectUtils ../CIMCursor ../enums".split(" "),
function(l,h,D,B,y,v){let C=function(){function q(){}q.local=function(){null===q.instance&&(q.instance=new q);return q.instance};q.prototype.execute=function(k,e,b,c,f){return new t(k,e,b)};return h._createClass(q)}();C.instance=null;let t=function(){function q(e,b,c){this._defaultPointSize=20;this._inputGeometries=e;this._geomUnitsPerPoint=c;this._rule=b.rule??v.GeometricEffectControlMeasureLineRule.FullGeometry;this._defaultSize=this._defaultPointSize*c}var k=q.prototype;k.next=function(){for(var e;e=
this._inputGeometries.next();)if((e=this._processGeom(B.collectMultipath(e)))&&e.length)return D.GeometryCursor.fromJSONCIM({paths:e});return null};k._clone=function(e){return[e[0],e[1]]};k._mid=function(e,b){return[(e[0]+b[0])/2,(e[1]+b[1])/2]};k._mix=function(e,b,c,f){return[e[0]*b+c[0]*f,e[1]*b+c[1]*f]};k._add=function(e,b){return[e[0]+b[0],e[1]+b[1]]};k._add2=function(e,b,c){return[e[0]+b,e[1]+c]};k._sub=function(e,b){return[e[0]-b[0],e[1]-b[1]]};k._dist=function(e,b){return Math.sqrt((e[0]-b[0])*
(e[0]-b[0])+(e[1]-b[1])*(e[1]-b[1]))};k._norm=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])};k._normalize=function(e,b=1){b/=this._norm(e);e[0]*=b;e[1]*=b};k._leftPerpendicular=function(e){const b=e[0];e[0]=-e[1];e[1]=b};k._leftPerp=function(e){return[-e[1],e[0]]};k._rightPerpendicular=function(e){const b=-e[0];e[0]=e[1];e[1]=b};k._rightPerp=function(e){return[e[1],-e[0]]};k._dotProduct=function(e,b){return e[0]*b[0]+e[1]*b[1]};k._crossProduct=function(e,b){return e[0]*b[1]-e[1]*b[0]};k._rotateDirect=
function(e,b,c){const f=e[0]*c+e[1]*b;e[0]=e[0]*b-e[1]*c;e[1]=f};k._makeCtrlPt=function(e){e=[e[0],e[1]];y.setId(e,1);return e};k._addAngledTicks=function(e,b,c,f){const a=this._sub(c,b);this._normalize(a);var d=this._crossProduct(a,this._sub(f,b));f=0<d?this._rightPerp(a):this._leftPerp(a);d=Math.abs(d)/2;const n=[];n.push([b[0]+(f[0]-a[0])*d,b[1]+(f[1]-a[1])*d]);n.push(b);n.push(c);n.push([c[0]+(f[0]+a[0])*d,c[1]+(f[1]+a[1])*d]);e.push(n)};k._addBezier2=function(e,b,c,f,a){if(0===a--)e.push(f);
else{var d=this._mid(b,c);c=this._mid(c,f);var n=this._mid(d,c);this._addBezier2(e,b,d,n,a);this._addBezier2(e,n,c,f,a)}};k._addBezier3=function(e,b,c,f,a,d){if(0===d--)e.push(a);else{var n=this._mid(b,c),r=this._mid(c,f);f=this._mid(f,a);c=this._mid(n,r);r=this._mid(r,f);var p=this._mid(c,r);this._addBezier3(e,b,n,c,p,d);this._addBezier3(e,p,r,f,a,d)}};k._add90DegArc=function(e,b,c,f,a){f=a??0<this._crossProduct(this._sub(c,b),this._sub(f,b));a=this._mid(b,c);const d=this._sub(a,b);f?this._leftPerpendicular(d):
this._rightPerpendicular(d);a[0]+=d[0];a[1]+=d[1];this._addBezier3(e,b,this._mix(b,.33333,a,.66667),this._mix(c,.33333,a,.66667),c,4)};k._addArrow=function(e,b,c){var f=b[0],a=b[1],d=b[b.length-1],n=this._sub(f,a);this._normalize(n);const r=this._crossProduct(n,this._sub(d,a));a=.5*r;var p=this._leftPerp(n);const g=[d[0]-p[0]*r,d[1]-p[1]*r];var u=b.length-1;d=[];d.push(c?[-p[0],-p[1]]:p);var x=[-n[0],-n[1]];for(c=1;c<u-1;c++){n=this._sub(b[c+1],b[c]);this._normalize(n);var w=this._dotProduct(n,x);
p=this._crossProduct(n,x);w=Math.sqrt((1+w)/2);x=this._sub(n,x);this._normalize(x);x[0]/=w;x[1]/=w;d.push(0>p?[-x[0],-x[1]]:x);x=n}d.push(this._rightPerp(x));for(u=d.length-1;0<u;u--)e.push([b[u][0]+d[u][0]*a,b[u][1]+d[u][1]*a]);e.push([g[0]+d[0][0]*a,g[1]+d[0][1]*a]);e.push([g[0]+d[0][0]*r,g[1]+d[0][1]*r]);e.push(f);e.push([g[0]-d[0][0]*r,g[1]-d[0][1]*r]);e.push([g[0]-d[0][0]*a,g[1]-d[0][1]*a]);for(f=1;f<d.length;f++)e.push([b[f][0]-d[f][0]*a,b[f][1]-d[f][1]*a])};k._cp2=function(e,b,c){return 2<=
e.length?e[1]:this._add2(e[0],b*this._defaultSize,c*this._defaultSize)};k._cp3=function(e,b,c,f){if(3<=e.length)return e[2];c=this._mix(e[0],1-c,b,c);e=this._sub(b,e[0]);this._normalize(e);this._rightPerpendicular(e);return[c[0]+e[0]*f*this._defaultSize,c[1]+e[1]*f*this._defaultSize]};k._arrowPath=function(e){if(2<e.length)return e;const b=e[0];e=this._cp2(e,-4,0);const c=this._sub(b,e);this._normalize(c);const f=this._rightPerp(c);return[b,e,[b[0]+(f[0]-c[0])*this._defaultSize,b[1]+(f[1]-c[1])*this._defaultSize]]};
k._arrowLastSeg=function(e){var b=e[0];const c=this._cp2(e,-4,0);if(3<=e.length)b=e[e.length-1];else{e=this._sub(b,c);this._normalize(e);const f=this._rightPerp(e);b=[b[0]+(f[0]-e[0])*this._defaultSize,b[1]+(f[1]-e[1])*this._defaultSize]}return[c,b]};k._processGeom=function(e){if(!e)return null;const b=[];for(const c of e){if(!c||0===c.length)continue;const f=c.length;let a=c[0];switch(this._rule){case v.GeometricEffectControlMeasureLineRule.PerpendicularFromFirstSegment:const d=this._cp2(c,0,-1),
n=this._cp3(c,d,.5,4),r=[];r.push(n);r.push(this._mid(a,d));b.push(r);break;case v.GeometricEffectControlMeasureLineRule.ReversedFirstSegment:const p=this._cp2(c,0,-1);b.push([p,a]);break;case v.GeometricEffectControlMeasureLineRule.PerpendicularToSecondSegment:const g=this._cp2(c,-4,1),u=this._cp3(c,g,.882353,-1.94),x=[];x.push(this._mid(g,u));x.push(a);b.push(x);break;case v.GeometricEffectControlMeasureLineRule.SecondSegmentWithTicks:const w=this._cp2(c,-4,1),m=this._cp3(c,w,.882353,-1.94),z=this._sub(m,
w);let A;A=0<this._crossProduct(z,this._sub(a,w))?this._rightPerp(A):this._leftPerp(z);const H=[];H.push([w[0]+(A[0]-z[0])/3,w[1]+(A[1]-z[1])/3]);H.push(w);H.push(m);H.push([m[0]+(A[0]+z[0])/3,m[1]+(A[1]+z[1])/3]);b.push(H);break;case v.GeometricEffectControlMeasureLineRule.DoublePerpendicular:const E=this._cp2(c,0,-1),F=this._cp3(c,E,.5,3),J=this._mid(a,E),L=this._sub(J,F);this._normalize(L);const I=this._crossProduct(L,this._sub(a,F));this._leftPerpendicular(L);const G=[];G.push(a);G.push([F[0]+
L[0]*I,F[1]+L[1]*I]);b.push(G);const K=[];K.push([F[0]-L[0]*I,F[1]-L[1]*I]);K.push(E);b.push(K);break;case v.GeometricEffectControlMeasureLineRule.OppositeToFirstSegment:const P=this._cp2(c,0,-1),Y=this._cp3(c,P,.5,3),ea=this._mid(a,P),aa=this._sub(ea,Y);this._normalize(aa);const T=this._crossProduct(aa,this._sub(a,Y));this._leftPerpendicular(aa);const R=[];R.push([Y[0]+aa[0]*T,Y[1]+aa[1]*T]);R.push([Y[0]-aa[0]*T,Y[1]-aa[1]*T]);b.push(R);break;case v.GeometricEffectControlMeasureLineRule.TriplePerpendicular:const W=
this._cp2(c,0,-1),S=this._cp3(c,W,.5,4),Z=this._mid(a,W),ca=this._sub(Z,S);this._normalize(ca);const qa=this._crossProduct(ca,this._sub(a,S));this._leftPerpendicular(ca);const ya=[];ya.push([S[0]+ca[0]*qa*.8,S[1]+ca[1]*qa*.8]);ya.push([Z[0]+.8*(a[0]-Z[0]),Z[1]+.8*(a[1]-Z[1])]);b.push(ya);b.push([S,Z]);const xa=[];xa.push([S[0]-ca[0]*qa*.8,S[1]-ca[1]*qa*.8]);xa.push([Z[0]+.8*(W[0]-Z[0]),Z[1]+.8*(W[1]-Z[1])]);b.push(xa);break;case v.GeometricEffectControlMeasureLineRule.HalfCircleFirstSegment:const Ca=
this._cp2(c,0,-1),Da=this._cp3(c,Ca,.5,4),N=this._mid(a,Ca);let V=this._sub(Ca,a);const ka=Math.cos(Math.PI/18),da=Math.sin(Math.PI/18),na=Math.sqrt((1+ka)/2),X=Math.sqrt((1-ka)/2),fa=[];let ja;0<this._crossProduct(V,this._sub(Da,a))?(fa.push(a),V=this._sub(a,N),ja=Ca):(fa.push(Ca),V=this._sub(Ca,N),ja=a);this._rotateDirect(V,na,X);V[0]/=na;V[1]/=na;for(let db=1;18>=db;db++)fa.push(this._add(N,V)),this._rotateDirect(V,ka,da);fa.push(ja);b.push(fa);break;case v.GeometricEffectControlMeasureLineRule.HalfCircleSecondSegment:const ma=
this._cp2(c,0,-1),ra=this._cp3(c,ma,1,-1);let va=this._sub(a,ma);this._normalize(va);const za=this._crossProduct(va,this._sub(ra,ma))/2;this._leftPerpendicular(va);const Ea=[ma[0]+va[0]*za,ma[1]+va[1]*za];va=this._sub(ma,Ea);const Ga=Math.cos(Math.PI/18);let Na=Math.sin(Math.PI/18);0<za&&(Na=-Na);const Ka=[ma];for(let db=1;18>=db;db++)this._rotateDirect(va,Ga,Na),Ka.push(this._add(Ea,va));b.push(Ka);break;case v.GeometricEffectControlMeasureLineRule.HalfCircleExtended:const La=this._cp2(c,0,-2),Va=
this._cp3(c,La,1,-1);let Ra;if(4<=f)Ra=c[3];else{const db=this._sub(a,La);Ra=this._add(Va,db)}const Ua=this._dist(La,Va)/2/.75,Xa=this._sub(La,a);this._normalize(Xa,Ua);const Sa=this._sub(Va,Ra);this._normalize(Sa,Ua);b.push([Ra,Va]);const $a=[this._clone(Va)];this._addBezier3($a,Va,this._add(Va,Sa),this._add(La,Xa),La,4);$a.push(a);b.push($a);break;case v.GeometricEffectControlMeasureLineRule.OpenCircle:const bb=this._cp2(c,-2,0),Ha=this._sub(bb,a),vb=Math.cos(Math.PI/18),lb=-Math.sin(Math.PI/18),
mb=[bb];for(let db=1;33>=db;db++)this._rotateDirect(Ha,vb,lb),mb.push(this._add(a,Ha));b.push(mb);break;case v.GeometricEffectControlMeasureLineRule.CoverageEdgesWithTicks:const O=this._cp2(c,0,-1);let eb;if(3<=f)eb=c[2];else{const db=this._sub(O,a),Za=this._leftPerp(db);eb=[a[0]+Za[0]-.25*db[0],a[1]+Za[1]-.25*db[1]]}let Lb;if(4<=f)Lb=c[3];else{const db=this._mid(a,O),Za=this._sub(a,O);this._normalize(Za);this._leftPerpendicular(Za);const M=this._crossProduct(Za,this._sub(eb,db));this._rightPerpendicular(Za);
Lb=[eb[0]+Za[0]*M*2,eb[1]+Za[1]*M*2]}const yb=this._sub(O,a);let ua,Hb;ua=0<this._crossProduct(yb,this._sub(eb,a))?this._rightPerp(yb):this._leftPerp(yb);Hb=[];Hb.push(eb);Hb.push(a);Hb.push([a[0]+(ua[0]-yb[0])/3,a[1]+(ua[1]-yb[1])/3]);b.push(Hb);ua=0<this._crossProduct(yb,this._sub(Lb,O))?this._rightPerp(ua):this._leftPerp(yb);Hb=[];Hb.push([O[0]+(ua[0]+yb[0])/3,O[1]+(ua[1]+yb[1])/3]);Hb.push(O);Hb.push(Lb);b.push(Hb);break;case v.GeometricEffectControlMeasureLineRule.GapExtentWithDoubleTicks:const Sb=
this._cp2(c,0,2),Ab=this._cp3(c,Sb,0,1);let Pb;if(4<=f)Pb=c[3];else{const db=this._sub(Sb,a);Pb=this._add(Ab,db)}this._addAngledTicks(b,a,Sb,this._mid(Ab,Pb));this._addAngledTicks(b,Ab,Pb,this._mid(a,Sb));break;case v.GeometricEffectControlMeasureLineRule.GapExtentMidline:const Vb=this._cp2(c,2,0),hc=this._cp3(c,Vb,0,1);let pc;if(4<=f)pc=c[3];else{const db=this._sub(Vb,a);pc=this._add(hc,db)}const Db=[];Db.push(this._mid(a,hc));Db.push(this._mid(Vb,pc));b.push(Db);break;case v.GeometricEffectControlMeasureLineRule.Chevron:const Tb=
this._cp2(c,-1,-1);let kb;if(3<=f)kb=c[2];else{const db=this._sub(Tb,a);this._leftPerpendicular(db);kb=this._add(a,db)}b.push([Tb,this._makeCtrlPt(a),kb]);break;case v.GeometricEffectControlMeasureLineRule.PerpendicularWithArc:const Bb=this._cp2(c,0,-2),Ub=this._cp3(c,Bb,.5,-1);let Ya=this._sub(Bb,a);const Eb=this._norm(Ya);Ya[0]/=Eb;Ya[1]/=Eb;const la=this._crossProduct(Ya,this._sub(Ub,a));let ta=this._dotProduct(Ya,this._sub(Ub,a));ta<.05*Eb?ta=.05*Eb:ta>.95*Eb&&(ta=.95*Eb);const oa=[a[0]+Ya[0]*
ta,a[1]+Ya[1]*ta];this._leftPerpendicular(Ya);let Aa=[];Aa.push([oa[0]-Ya[0]*la,oa[1]-Ya[1]*la]);Aa.push([oa[0]+Ya[0]*la,oa[1]+Ya[1]*la]);b.push(Aa);const Oa=[Bb[0]+Ya[0]*la,Bb[1]+Ya[1]*la];Ya=this._sub(Bb,Oa);const Ma=Math.cos(Math.PI/18);let Ta=Math.sin(Math.PI/18);0>la&&(Ta=-Ta);Aa=[a,Bb];for(let db=1;9>=db;db++)this._rotateDirect(Ya,Ma,Ta),Aa.push(this._add(Oa,Ya));b.push(Aa);break;case v.GeometricEffectControlMeasureLineRule.ClosedHalfCircle:const ab=this._cp2(c,2,0),ob=this._mid(a,ab),pb=this._sub(ab,
ob),nb=Math.cos(Math.PI/18),zb=Math.sin(Math.PI/18),Mb=[a,ab];for(let db=1;18>=db;db++)this._rotateDirect(pb,nb,zb),Mb.push(this._add(ob,pb));b.push(Mb);break;case v.GeometricEffectControlMeasureLineRule.TripleParallelExtended:const qc=this._cp2(c,0,-2),cd=this._cp3(c,qc,1,-2),rc=this._mid(a,qc),Wb=this._sub(cd,qc);this._normalize(Wb);const ud=Math.abs(this._crossProduct(Wb,this._sub(rc,qc)))/2,wc=this._dist(qc,cd),vd=[qc,a];vd.push([a[0]+Wb[0]*wc*.5,a[1]+Wb[1]*wc*.5]);b.push(vd);const xc=[];xc.push([rc[0]-
Wb[0]*ud,rc[1]-Wb[1]*ud]);xc.push([rc[0]+Wb[0]*wc*.375,rc[1]+Wb[1]*wc*.375]);y.setId(xc[xc.length-1],1);xc.push([rc[0]+Wb[0]*wc*.75,rc[1]+Wb[1]*wc*.75]);b.push(xc);b.push([qc,cd]);break;case v.GeometricEffectControlMeasureLineRule.ParallelWithTicks:const Ec=this._cp2(c,3,0),dd=this._cp3(c,Ec,.5,-1),Fc=this._sub(dd,Ec);this._normalize(Fc);const Nd=this._crossProduct(Fc,this._sub(dd,a));this._leftPerpendicular(Fc);this._addAngledTicks(b,a,Ec,dd);this._addAngledTicks(b,this._mix(a,1,Fc,Nd),this._mix(Ec,
1,Fc,Nd),this._mid(a,Ec));break;case v.GeometricEffectControlMeasureLineRule.Parallel:const Gc=this._cp2(c,3,0),Od=this._cp3(c,Gc,.5,-1),ed=this._sub(Gc,a);this._normalize(ed);const Nc=this._leftPerp(ed),ec=this._crossProduct(ed,this._sub(Od,a));let yc=[a,Gc];b.push(yc);yc=[];yc.push([a[0]+Nc[0]*ec,a[1]+Nc[1]*ec]);yc.push([Gc[0]+Nc[0]*ec,Gc[1]+Nc[1]*ec]);b.push(yc);break;case v.GeometricEffectControlMeasureLineRule.PerpendicularToFirstSegment:const Cc=this._cp2(c,3,0),fd=this._cp3(c,Cc,.5,-1),gd=
this._mid(a,Cc),$b=this._sub(Cc,a);this._normalize($b);const Rb=this._crossProduct($b,this._sub(fd,a));this._leftPerpendicular($b);const Zc=[];Zc.push([gd[0]-$b[0]*Rb*.25,gd[1]-$b[1]*Rb*.25]);Zc.push([gd[0]+$b[0]*Rb*1.25,gd[1]+$b[1]*Rb*1.25]);b.push(Zc);break;case v.GeometricEffectControlMeasureLineRule.ParallelOffset:const nc=this._cp2(c,3,0),od=this._cp3(c,nc,.5,-1),Ob=this._sub(nc,a);this._normalize(Ob);const Xb=this._crossProduct(Ob,this._sub(od,a));this._leftPerpendicular(Ob);const wd=[];wd.push([a[0]-
Ob[0]*Xb,a[1]-Ob[1]*Xb]);wd.push([nc[0]-Ob[0]*Xb,nc[1]-Ob[1]*Xb]);b.push(wd);const xd=[];xd.push([a[0]+Ob[0]*Xb,a[1]+Ob[1]*Xb]);xd.push([nc[0]+Ob[0]*Xb,nc[1]+Ob[1]*Xb]);b.push(xd);break;case v.GeometricEffectControlMeasureLineRule.OffsetOpposite:const hd=this._cp2(c,3,0),sb=this._cp3(c,hd,.5,-1),jc=this._sub(hd,a);this._normalize(jc);const Cb=this._crossProduct(jc,this._sub(sb,a));this._leftPerpendicular(jc);const pd=[];pd.push([a[0]-jc[0]*Cb,a[1]-jc[1]*Cb]);pd.push([hd[0]-jc[0]*Cb,hd[1]-jc[1]*Cb]);
b.push(pd);break;case v.GeometricEffectControlMeasureLineRule.OffsetSame:const Hc=this._cp2(c,3,0),Pd=this._cp3(c,Hc,.5,-1),sc=this._sub(Hc,a);this._normalize(sc);const Oc=this._crossProduct(sc,this._sub(Pd,a));this._leftPerpendicular(sc);const Pc=[];Pc.push([a[0]+sc[0]*Oc,a[1]+sc[1]*Oc]);Pc.push([Hc[0]+sc[0]*Oc,Hc[1]+sc[1]*Oc]);b.push(Pc);break;case v.GeometricEffectControlMeasureLineRule.CircleWithArc:let kc=this._cp2(c,3,0);const id=this._cp3(c,kc,.5,-1);let qb,ad;if(4<=f)qb=c[3],ad=0<this._crossProduct(this._sub(qb,
kc),this._sub(id,kc));else{qb=kc;ad=0<this._crossProduct(this._sub(qb,a),this._sub(id,a));const db=24*this._geomUnitsPerPoint,Za=this._sub(qb,a);this._normalize(Za,db);const M=Math.sqrt(2)/2;this._rotateDirect(Za,M,ad?M:-M);kc=this._add(a,Za)}const $c=this._sub(kc,a),pe=Math.cos(Math.PI/18),qd=Math.sin(Math.PI/18),Dc=[kc];for(let db=1;36>=db;db++)this._rotateDirect($c,pe,qd),Dc.push(this._add(a,$c));this._add90DegArc(Dc,kc,qb,id,ad);y.setId(Dc[Dc.length-8],1);b.push(Dc);break;case v.GeometricEffectControlMeasureLineRule.DoubleJog:let oc=
this._cp2(c,-3,1),ic;ic=3<=f?c[2]:this._add(a,this._sub(a,oc));let fc;if(4<=f)fc=c[3];else{const db=a;a=oc;fc=ic;const Za=this._dist(a,db),M=this._dist(fc,db);let U=30*this._geomUnitsPerPoint;.5*Za<U&&(U=.5*Za);.5*M<U&&(U=.5*M);oc=this._mix(a,U/Za,db,(Za-U)/Za);ic=this._mix(fc,U/M,db,(M-U)/M)}const Id=this._mid(a,oc),Hd=this._mid(fc,ic),yd=this._dist(a,oc),Fb=this._dist(ic,fc);let Kb=Math.min(yd,Fb)/8;Kb=Math.min(Kb,24*this._geomUnitsPerPoint);const lc=Math.cos(Math.PI/4);let Nb=this._sub(a,oc);this._normalize(Nb,
Kb);0<this._crossProduct(Nb,this._sub(fc,oc))?this._rotateDirect(Nb,lc,-lc):this._rotateDirect(Nb,lc,lc);let Qb=[];Qb.push(oc);Qb.push(this._add(Id,Nb));Qb.push(this._sub(Id,Nb));Qb.push(a);b.push(Qb);Nb=this._sub(fc,ic);this._normalize(Nb,Kb);0>this._crossProduct(Nb,this._sub(a,ic))?this._rotateDirect(Nb,lc,lc):this._rotateDirect(Nb,lc,-lc);Qb=[];Qb.push(ic);Qb.push(this._add(Hd,Nb));Qb.push(this._sub(Hd,Nb));Qb.push(fc);b.push(Qb);break;case v.GeometricEffectControlMeasureLineRule.PerpendicularOffset:const Qc=
this._cp2(c,-4,1),jd=this._cp3(c,Qc,.882353,-1.94),Rc=this._sub(jd,Qc);0<this._crossProduct(Rc,this._sub(a,Qc))?this._rightPerpendicular(Rc):this._leftPerpendicular(Rc);const Qd=[Rc[0]/8,Rc[1]/8],Rd=this._sub(this._mid(Qc,jd),Qd);b.push([Rd,a]);break;case v.GeometricEffectControlMeasureLineRule.LineExcludingLastSegment:const zd=this._arrowPath(c),Ad=[];let Sd=zd.length-2;for(;Sd--;)Ad.push(zd[Sd]);b.push(Ad);break;case v.GeometricEffectControlMeasureLineRule.MultivertexArrow:const qe=this._arrowPath(c),
Td=[];this._addArrow(Td,qe,!1);b.push(Td);break;case v.GeometricEffectControlMeasureLineRule.CrossedArrow:const re=this._arrowPath(c),Ud=[];this._addArrow(Ud,re,!0);b.push(Ud);break;case v.GeometricEffectControlMeasureLineRule.ChevronArrow:const [Vd,Sc]=this._arrowLastSeg(c),kd=10*this._geomUnitsPerPoint,zc=this._sub(a,Vd);this._normalize(zc);const Wd=this._crossProduct(zc,this._sub(Sc,Vd)),Bd=this._leftPerp(zc),Xd=[Sc[0]-Bd[0]*Wd*2,Sc[1]-Bd[1]*Wd*2],ld=[];ld.push([Sc[0]+zc[0]*kd,Sc[1]+zc[1]*kd]);
ld.push(a);ld.push([Xd[0]+zc[0]*kd,Xd[1]+zc[1]*kd]);b.push(ld);break;case v.GeometricEffectControlMeasureLineRule.ChevronArrowOffset:const [Yd,Cd]=this._arrowLastSeg(c),mc=this._sub(a,Yd);this._normalize(mc);const Ic=this._crossProduct(mc,this._sub(Cd,Yd));this._leftPerpendicular(mc);const Tc=[Cd[0]-mc[0]*Ic,Cd[1]-mc[1]*Ic],Uc=[];Uc.push([Tc[0]+mc[0]*Ic*.5,Tc[1]+mc[1]*Ic*.5]);Uc.push(this._mid(Tc,a));Uc.push([Tc[0]-mc[0]*Ic*.5,Tc[1]-mc[1]*Ic*.5]);b.push(Uc);break;case v.GeometricEffectControlMeasureLineRule.PartialFirstSegment:const [Dd,
Ed]=this._arrowLastSeg(c),Yb=this._sub(a,Dd);this._normalize(Yb);const Jd=this._crossProduct(Yb,this._sub(Ed,Dd));this._leftPerpendicular(Yb);b.push([Dd,[Ed[0]-Yb[0]*Jd,Ed[1]-Yb[1]*Jd]]);break;case v.GeometricEffectControlMeasureLineRule.Arch:const jb=this._cp2(c,0,-1),rb=this._cp3(c,jb,.5,1),Jc=this._sub(a,jb),rd=this._mix(rb,1,Jc,.55),Kd=this._mix(rb,1,Jc,-.55),sd=[a];this._addBezier2(sd,a,rd,rb,4);this._addBezier2(sd,rb,Kd,jb,4);b.push(sd);break;case v.GeometricEffectControlMeasureLineRule.CurvedParallelTicks:const gc=
this._cp2(c,-4,1),tc=this._cp3(c,gc,.882353,-1.94),vc=this._sub(tc,gc);0<this._crossProduct(vc,this._sub(a,gc))?this._rightPerpendicular(vc):this._leftPerpendicular(vc);const Mc=[vc[0]/8,vc[1]/8],bd=this._sub(this._mid(gc,tc),Mc),td=this._sub(this._mix(gc,.75,tc,.25),Mc),Md=this._sub(this._mix(gc,.25,tc,.75),Mc),md=[gc];this._addBezier2(md,gc,td,bd,3);this._addBezier2(md,bd,Md,tc,3);b.push(md);for(let db=0;8>db;db++){const Za=md[2*db+1],M=[this._clone(Za)];M.push(this._add(Za,[vc[0]/4,vc[1]/4]));
b.push(M)}break;case v.GeometricEffectControlMeasureLineRule.Arc90Degrees:const Fd=this._cp2(c,0,-1),Ld=this._cp3(c,Fd,.5,1),Zd=[Fd];this._add90DegArc(Zd,Fd,a,Ld);b.push(Zd);break;default:b.push(c)}}return b};return h._createClass(q)}();l.EffectControlMeasureLine=C;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectCut":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../geometry/GeometryCursor","../CIMCursor","../CurveHelper"],
function(l,h,D,B,y){let v=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(q,k,e,b,c){return new C(q,k,e)};return h._createClass(t)}();v.instance=null;let C=function(t){function q(k,e,b){k=t.call(this,k,!0,!0)||this;k._curveHelper=new y.CurveHelper;k._beginCut=(void 0!==e.beginCut?e.beginCut:1)*b;k._endCut=(void 0!==e.endCut?e.endCut:1)*b;k._middleCut=(void 0!==e.middleCut?e.middleCut:0)*b;k._invert=void 0!==e.invert?
e.invert:!1;0>k._beginCut&&(k._beginCut=0);0>k._endCut&&(k._endCut=0);0>k._middleCut&&(k._middleCut=0);return k}h._inherits(q,t);q.prototype.processPath=function(k){const {_beginCut:e,_endCut:b,_middleCut:c}=this,f=k.pathLength(),a=D.GeometryCursor.createEmptyOptimizedCIM("esriGeometryPolyline");if(!this._invert)if(0===e&&0===b&&0===c)for(a.startPath();k.nextPoint();)a.pushXY(k.x,k.y);else e+b+c<f&&(0===c?this._curveHelper.appendSubCurve(a,k,e,f-b):(this._curveHelper.appendSubCurve(a,k,e,.5*(f-c)),
this._curveHelper.appendSubCurve(a,k,.5*(f+c),f-b)));else if(0!==e||0!==b||0!==c)if(e+b+c>=f)for(a.startPath();k.nextPoint();)a.pushXY(k.x,k.y);else this._curveHelper.appendSubCurve(a,k,0,e),this._curveHelper.appendSubCurve(a,k,.5*(f-c),.5*(f+c)),this._curveHelper.appendSubCurve(a,k,f-b,b);return 0===a.numPaths?null:a};return h._createClass(q)}(B.PathEffectCursor);l.EffectCut=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectDashes":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/GeometryCursor ../../../geometry/geometryCursorCollectUtils ../CIMCursor ../enums ../GeometryWalker".split(" "),
function(l,h,D,B,y,v,C){let t=function(){function k(){}k.local=function(){null===k.instance&&(k.instance=new k);return k.instance};k.prototype.execute=function(e,b,c,f,a){return new q(e,b,c)};return h._createClass(k)}();t.instance=null;let q=function(k){function e(b,c,f){b=k.call(this,b,!0,!0)||this;b._firstCurve=null;b._walker=new C.GeometryWalker;b._walker.updateTolerance(f);b._endings=c.lineDashEnding;b._customDashPos=-(c.offsetAlongLine??0)*f;b._offsetAtEnd=(c.customEndingOffset??0)*f;b._pattern=
new C.DashPattern;b._pattern.init(c.dashTemplate,!0);b._pattern.scale(f);return b}h._inherits(e,k);e.prototype.processPath=function(b){if(0===this._pattern.length())return this.iteratePath=!1,b=B.collectPath(b),D.GeometryCursor.fromJSONCIM({paths:[b]});if(!this.iteratePath){var c=!0;switch(this._endings){default:this._pattern.extPtGap=0;break;case v.LineDashEnding.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case v.LineDashEnding.FullGap:this.isClosed||(this._pattern.extPtGap=
.5*this._pattern.lastValue());break;case v.LineDashEnding.NoConstraint:this.isClosed||(c=!1);break;case v.LineDashEnding.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var f=b.pathLength();if(this._pattern.isEmpty()||f<.1*this._pattern.length()||!this._walker.init(b,this._pattern,c))return b=B.collectPath(b),D.GeometryCursor.fromJSONCIM({paths:[b]})}if(this.iteratePath)b=this._pattern.nextValue();else{switch(this._endings){default:c=.5*this._pattern.firstValue();break;case v.LineDashEnding.HalfGap:c=
.5*-this._pattern.lastValue();break;case v.LineDashEnding.FullGap:c=-this._pattern.lastValue();break;case v.LineDashEnding.FullPattern:c=0;break;case v.LineDashEnding.NoConstraint:case v.LineDashEnding.Custom:c=-this._customDashPos}b=c/this._pattern.length();b-=Math.floor(b);c=b*this._pattern.length();this._pattern.reset();b=this._pattern.nextValue();for(f=!1;c>=b;)c-=b,b=this._pattern.nextValue(),f=!f;b-=c;f?(this._walker.nextPosition(b),b=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=
this._walker.nextCurve(b),b=this._pattern.nextValue(),this._walker.nextPosition(b),b=this._pattern.nextValue())}if(c=this._walker.nextCurve(b))if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)c.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else b=this._pattern.nextValue(),!this._walker.nextPosition(b)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(c=this._firstCurve,this._firstCurve=
null)):this.iteratePath=!0;else this.iteratePath=!1,c=this._firstCurve,this._firstCurve=null;c?.reset();return c};return h._createClass(e)}(y.PathEffectCursor);l.EffectDashes=t;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/GeometryWalker":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../geometry/GeometryCursor","./CurveHelper"],function(l,h,D,B){let y=function(){function q(){this._values=[];this._currentValue=this._length=this.ctrlPtGap=
this.extPtGap=0}var k=q.prototype;k.isEmpty=function(){return 0===this._values.length};k.size=function(){return this._values.length};k.init=function(e,b,c=!0){this._setEmpty();if(!e||0===e.length)return!1;for(let f=0;f<e.length;f++){let a=Math.abs(e[f]);c&&1E-7>a&&(a=1E-7);this._values.push(a);this._length+=a}b&&e.length&1&&(this._length*=2);if(0===this._length)return!1;this.ctrlPtGap=this.extPtGap=0;this._currentValue=-1;return!0};k.scale=function(e){const b=this._values?this._values.length:0;for(let c=
0;c<b;++c)this._values[c]*=e;this._length*=e;this.extPtGap*=e;this.ctrlPtGap*=e};k.addValue=function(e){this._length+=e;this._values.push(e)};k.firstValue=function(){return this._values[0]};k.lastValue=function(){return this._values[this._values.length-1]};k.nextValue=function(){this._currentValue++;this._currentValue===this._values.length&&(this._currentValue=0);return this._values[this._currentValue]};k.reset=function(){this._currentValue=-1};k.length=function(){return this._length};k._setEmpty=
function(){this.extPtGap=this.ctrlPtGap=this._length=0;this._currentValue=-1;this._values.length=0};return h._createClass(q)}(),v=h._createClass(function(){this.pt=null;this.sa=this.ca=0});l.EndType=void 0;(function(q){q[q.FAIL=0]="FAIL";q[q.END=1]="END";q[q.CONTINUE=2]="CONTINUE"})(l.EndType||(l.EndType={}));let C=function(){function q(){this.reset()}var k=q.prototype;k.reset=function(){this.segment=null;this.abscissa=this.segmentLength=0;this.isPartEnd=this.isPathEnd=!1};k.isValid=function(){return null!==
this.segment};k.copyTo=function(e){e.segment=this.segment;e.segmentLength=this.segmentLength;e.abscissa=this.abscissa;e.isPathEnd=this.isPathEnd;e.isPartEnd=this.isPartEnd};return h._createClass(q)}(),t=function(q){function k(b=0,c=!1){b=q.call(this,b,c)||this;b._tolerance=B.PIXEL_TOLERANCE;b._currentPosition=new C;return b}h._inherits(k,q);var e=k.prototype;e.updateTolerance=function(b){this._tolerance=B.PIXEL_TOLERANCE*b};e.init=function(b,c,f=!0){f?(this._patternLength=c.length(),this._partExtPtGap=
c.extPtGap,this._partCtrlPtGap=c.ctrlPtGap):this._partCtrlPtGap=this._partExtPtGap=this._patternLength=0;this._currentPosition.reset();this._partSegCount=0;this._pathCursor=b;this._seg=-1;return this._setPosAtNextPart()};e.curPositionIsValid=function(){return this._currentPosition.isValid()};e.nextPosition=function(b,c=l.EndType.FAIL){const f=new C;if(!this._nextPosition(b,f,null,c))return!1;f.copyTo(this._currentPosition);return!0};e.curPointAndAngle=function(b){b.pt=this._getPoint(this._currentPosition);
const [c,f]=this._getAngleCS(this._currentPosition);b.ca=c;b.sa=f};e.nextPointAndAngle=function(b,c,f=l.EndType.FAIL){const a=new C;if(!this._nextPosition(b,a,null,f))return!1;a.copyTo(this._currentPosition);c.pt=this._getPoint(a);const [d,n]=this._getAngleCS(a);c.ca=d;c.sa=n;return!0};e.nextCurve=function(b){if(0===b)return null;const c=D.GeometryCursor.createEmptyOptimizedCIM("esriGeometryPolyline");c.startPath();c.nextPath();const f=new C;if(!this._nextPosition(b,f,c,l.EndType.END))return null;
f.copyTo(this._currentPosition);return c};e.isPathEnd=function(){return this._currentPosition.isPathEnd};e.getPathEnd=function(){return this._currentPosition.segment[1]};e.getPt=function(b){this._pathCursor.seekInPath(b);return[this._pathCursor.x,this._pathCursor.y]};e.getSeg=function(b){const c=this.getPt(b);b=this.getPt(b+1);return[c,b]};e._nextPosition=function(b,c,f,a){if(this._currentPosition.isPathEnd)return!1;var d=this._currentPosition.abscissa;0<this._currentPosition.segmentLength&&(d/=this._currentPosition.segmentLength);
for(this._currentPosition.copyTo(c);c.abscissa+b*this._partLengthRatio>c.segmentLength+this._tolerance;)if(f&&(0===f.numPoints&&(0===d?(d=c.segment[0],f.pushXY(d[0],d[1])):f.pushPoint(this.getSegCoord2D(c.segment,d))),d=c.segment[1],f.pushXY(d[0],d[1])),d=0,b-=(c.segmentLength-c.abscissa)/this._partLengthRatio,this._partSegCount)c.segment=this._nextSegment(),c.segmentLength=this.getSegLength(c.segment),c.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart()){if(a===l.EndType.FAIL)return!1;
c.segmentLength=this.getSegLength(c.segment);c.isPartEnd=!0;a===l.EndType.END?(c.abscissa=c.segmentLength,c.isPathEnd=!0):c.abscissa=c.segmentLength+b;return!0}this._currentPosition.copyTo(c)}c.abscissa+=b*this._partLengthRatio;f&&(0===f.numPoints&&(0===d?f.pushPoint(c.segment[0]):f.pushPoint(this.getSegCoord2D(c.segment,d))),b=c.abscissa/c.segmentLength,1===b?f.pushPoint(c.segment[1]):f.pushPoint(this.getSegCoord2D(c.segment,b)));!this._partSegCount&&Math.abs(c.abscissa-c.segmentLength)<this._tolerance&&
(c.isPathEnd=this._partIsLast,c.isPartEnd=!0);return!0};e._getPoint=function(b){return this.getSegCoord2D(this._currentPosition.segment,0>=b.segmentLength?0:b.abscissa/b.segmentLength)};e._getAngleCS=function(b){return this.getSegAngleCS(this._currentPosition.segment,0>=b.segmentLength?0:b.abscissa/b.segmentLength)};e._setPosAtNextPart=function(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;this._partLength=0;this._partIsLast=
!0;for(this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}for(var b=this._partSegCount;b;)this._previousSegment(),--b;this._currentPosition.segment=this._nextSegment();this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment);this._currentPosition.abscissa=0;this._currentPosition.isPathEnd=
this._currentPosition.isPartEnd=!1;--this._partSegCount;b=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(b);b=b+this._partSegCount+1;b>=this._pathCursor.numPoints&&(b=0);this._ctrlPtEnd=this._pathCursor.getControlPointAt(b);if(0<this._patternLength){b=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap;const c=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let f=Math.round((this._partLength-(b+c))/this._patternLength);0>=f&&(f=0<b+c?0:1);this._partLengthRatio=
this._partLength/(b+c+f*this._patternLength);.01>this._partLengthRatio&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0};e._hasNextSegment=function(){return this._seg<this._pathCursor.numPoints-2};e._previousSegment=function(){return this.getSeg(--this._seg)};e._nextSegment=function(){return this.getSeg(++this._seg)};e._getStartPointIndex=function(){return this._seg};e._getEndPointIndex=function(){return this._seg+1};return h._createClass(k)}(B.CurveHelper);l.DashPattern=y;l.GeometryWalker=
t;l.Pos=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectDonut":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../geometry/GeometryCursor ../CIMEffects ../enums ../../../geometry/SpatialReference".split(" "),function(l,h,D,B,y,v,C){D=function(){function q(){}q.local=function(){null===q.instance&&(q.instance=new q);return q.instance};q.prototype.execute=function(k,e,b,c,f,a){return new t(k,e,b,c,f,a)};return h._createClass(q)}();
D.instance=null;let t=function(){function q(k,e,b,c,f,a){this._inputGeometries=k;this._tileKey=c;this._geometryEngine=f;this._maxInflateSize=a*b;this._width=(void 0!==e.width?e.width:2)*b;this._option=e.option}q.prototype.next=function(){for(var k;k=this._inputGeometries.next();){if("esriGeometryEnvelope"===k.geometryType&&0<this._width){var e=k.asJSON();return 0>Math.min(e.xmax-e.xmin,e.ymax-e.ymin)-2*this._width?k:B.GeometryCursor.fromJSONCIM({paths:[[[e.xmin+this._width,e.ymin+this._width],[e.xmax-
this._width,e.ymin+this._width],[e.xmax-this._width,e.ymax-this._width],[e.xmin+this._width,e.ymax-this._width],[e.xmin+this._width,e.ymin+this._width]],[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}if("esriGeometryPolygon"===k.geometryType){if(0===this._width)return k.clone();var b=this._geometryEngine;if(null==b)break;if(k=this._tileKey?y.clipCursorToTileExtent(k,this._maxInflateSize):k.clone()){if(b=b.buffer(C.WebMercator,k.asJSON(),-this._width,1))for(e of b.rings)e&&
k.pushPath(e.reverse());return k}}}return null};return h._createClass(q)}();l.EffectDonut=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectJog":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../geometry/GeometryCursor","../CIMCursor","../CurveHelper"],function(l,h,D,B,y){let v=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(q,k,e,b,c){return new C(q,
k,e)};return h._createClass(t)}();v.instance=null;let C=function(t){function q(k,e,b){k=t.call(this,k,!1,!0)||this;k._curveHelper=new y.CurveHelper;k._length=(void 0!==e.length?e.length:20)*b;k._angle=void 0!==e.angle?e.angle:225;k._position=void 0!==e.position?e.position:50;0>k._length&&(k._length=-k._length);20>k._position&&(k._position=20);80<k._position&&(k._position=80);k._mirror=!1;return k}h._inherits(q,t);q.prototype.processPath=function(k){const e=D.GeometryCursor.createEmptyOptimizedCIM("esriGeometryPolyline");
if(this._curveHelper.isEmpty(k))return null;k.seekInPath(0);const b=k.x,c=k.y;k.seekInPath(k.numPoints-1);const f=k.x;k=k.y;this._curveHelper.normalize([f-b,k-c]);const a=b+(f-b)*this._position/100,d=c+(k-c)*this._position/100,n=Math.cos((90-this._angle)/180*Math.PI);let r=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(r=-r);this._mirror=!this._mirror;e.pushPath([[b,c],[a-this._length/2*n,d-this._length/2*r],[a+this._length/2*n,d+this._length/2*r],[f,k]]);return e};return h._createClass(q)}(B.PathEffectCursor);
l.EffectJog=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectMove":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(l,h){let D=function(){function y(){}y.local=function(){null===y.instance&&(y.instance=new y);return y.instance};y.prototype.execute=function(v,C,t,q,k){return new B(v,C,t)};return h._createClass(y)}();D.instance=null;let B=function(){function y(C,t,q){this._inputGeometries=C;this._offsetX=void 0!==t.offsetX?
t.offsetX*q:0;this._offsetY=void 0!==t.offsetY?t.offsetY*q:0}var v=y.prototype;v.next=function(){let C=this._inputGeometries.next();for(;C;){if(0<C.numPaths)return this._move(C.clone(),this._offsetX,this._offsetY);C=this._inputGeometries.next()}return null};v._move=function(C,t,q){for(;C.nextPath();)for(;C.nextPoint();)C.x+=t,C.y+=q;C.reset();return C};return h._createClass(y)}();l.EffectMove=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectOffset":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../geometry/GeometryCursor ../../../geometry/geometryCursorCollectUtils ../../../geometry/support/jsonUtils ../CIMEffects ../CurveHelper ../enums ../../../geometry/SpatialReference".split(" "),
function(l,h,D,B,y,v,C,t,q,k){D=function(){function b(){}b.local=function(){null===b.instance&&(b.instance=new b);return b.instance};b.prototype.execute=function(c,f,a,d,n,r){return new e(c,f,a,d,n,r)};return h._createClass(b)}();D.instance=null;let e=function(){function b(c,f,a,d,n,r){this._inputGeometries=c;this._tileKey=d;this._geometryEngine=n;this._curveHelper=new t.CurveHelper;this._offset=(f.offset??1)*a;this._method=f.method;this._maxInflateSize=r*a;this._option=f.option;this._offsetFlattenError=
t.PIXEL_TOLERANCE*a}b.prototype.next=function(){for(var c;c=this._inputGeometries.next();){if(0===this._offset)return c.clone();if("esriGeometryEnvelope"===c.geometryType){if(this._method===q.GeometricEffectOffsetMethod.Rounded&&0<this._offset){var f=y.collectPath(c);if(f=this._curveHelper.offset(f,-this._offset,this._method,4,this._offsetFlattenError))return c=B.GeometryCursor.createEmptyOptimizedCIM(c.geometryType),c.pushPath(f),c;break}f=c.asJSON();if(v.isExtent(f)&&0<Math.min(f.xmax-f.xmin,f.ymax-
f.ymin)+2*this._offset)return B.GeometryCursor.fromJSONCIM({xmin:f.xmin-this._offset,xmax:f.xmax+this._offset,ymin:f.ymin-this._offset,ymax:f.ymax+this._offset})}f=this._geometryEngine;if(null!=f&&(c=this._tileKey?C.clipCursorToTileExtent(c,this._maxInflateSize):c.clone()))return(c=f.offset(k.WebMercator,c.asJSON(),-this._offset,1,this._method,4,this._offsetFlattenError))?B.GeometryCursor.fromJSONCIM(c):null}return null};return h._createClass(b)}();l.EffectOffset=D;Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/symbols/cim/effects/EffectReverse":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(l,h){let D=function(){function y(){}y.local=function(){null===y.instance&&(y.instance=new y);return y.instance};y.prototype.execute=function(v,C,t,q,k){return new B(v,C,t)};return h._createClass(y)}();D.instance=null;let B=function(){function y(v,C,t){this._inputGeometries=v;this._reverse=void 0!==C.reverse?C.reverse:!0}y.prototype.next=function(){for(var v=
this._inputGeometries.next();v;){if(!this._reverse)return v;if("esriGeometryPolyline"===v.geometryType){for(v=v.clone();v.nextPath();)for(let C=0;C<v.numPoints/2;C++){v.seekInPath(C);const t=v.x,q=v.y;v.seekInPath(v.numPoints-C-1);const k=v.x,e=v.y;v.x=t;v.y=q;v.seekInPath(C);v.x=k;v.y=e}v.reset();return v}v=this._inputGeometries.next()}return null};return h._createClass(y)}();l.EffectReverse=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectRotate":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../geometry/support/boundsUtils"],function(l,h,D){let B=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(C,t,q,k,e){return new y(C,t,q)};return h._createClass(v)}();B.instance=null;let y=function(){function v(t,q,k){this._inputGeometries=t;this._rotateAngle=void 0!==q.angle?q.angle*Math.PI/180:0}var C=v.prototype;C.next=function(){let t=this._inputGeometries.next();for(;t;){if(0===
this._rotateAngle||"esriGeometryPoint"===t.geometryType)return t;if(0<t.numPaths){var q=D.getCursorBoundsXY(t);const k=(q[2]+q[0])/2;q=(q[3]+q[1])/2;t.reset();return this._rotate(t.clone(),k,q)}t=this._inputGeometries.next()}return null};C._rotate=function(t,q,k){const e=Math.cos(this._rotateAngle),b=Math.sin(this._rotateAngle);for(;t.nextPath();)for(;t.nextPoint();){const c=t.x-q,f=t.y-k;t.x=q+c*e-f*b;t.y=k+c*b+f*e}t.reset();return t};return h._createClass(v)}();l.EffectRotate=B;Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectScale":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../geometry/support/boundsUtils"],function(l,h,D){let B=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(C,t,q,k,e){return new y(C,t,q)};return h._createClass(v)}();B.instance=null;let y=function(){function v(t,q,k){this._inputGeometries=t;this._xFactor=void 0!==
q.XScaleFactor?q.XScaleFactor:1.15;this._yFactor=void 0!==q.YScaleFactor?q.YScaleFactor:1.15}var C=v.prototype;C.next=function(){const t=this._inputGeometries.next();if(t){if(1===this._xFactor&&1===this._yFactor||"esriGeometryPoint"===t.geometryType)return t;if(0<t.numPaths){var q=D.getCursorBoundsXY(t);const k=(q[2]+q[0])/2;q=(q[3]+q[1])/2;t.reset();return this._scaleCursor(t.clone(),k,q)}}return null};C._scaleCursor=function(t,q,k){for(;t.nextPath();)for(;t.nextPoint();)t.x=q+(t.x-q)*this._xFactor,
t.y=k+(t.y-k)*this._yFactor;t.reset();return t};return h._createClass(v)}();l.EffectScale=B;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/effects/EffectWave":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../geometry/GeometryCursor","../enums","../GeometryWalker"],function(l,h,D,B,y){let v=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(q,k,e,b,c){return new C(q,
k,e)};return h._createClass(t)}();v.instance=null;let C=function(){function t(k,e,b){this._inputGeometries=k;this._height=(void 0!==e.amplitude?e.amplitude:2)*b;this._period=(void 0!==e.period?e.period:3)*b;this._style=e.waveform;0>=this._height&&(this._height=Math.abs(this._height));0>=this._period&&(this._period=Math.abs(this._period));this._pattern=new y.DashPattern;this._pattern.addValue(this._period);this._pattern.addValue(this._period);this._walker=new y.GeometryWalker;this._walker.updateTolerance(b)}
var q=t.prototype;q.next=function(){for(var k=this._inputGeometries.next();k;){if(0===this._height||0===this._period||(k=this._processGeom(k)))return k;k=this._inputGeometries.next()}return null};q._processGeom=function(k){const e=D.GeometryCursor.createEmptyOptimizedCIM(k.geometryType);for(;k.nextPath();){e.startPath();const b=k.pathLength();if(this._walker.init(k,this._pattern))switch(this._style){default:this._constructCurve(e,b,!1);break;case B.GeometricEffectWaveform.Square:this._constructSquare(e,
b);break;case B.GeometricEffectWaveform.Triangle:this._constructTriangle(e,b);break;case B.GeometricEffectWaveform.Random:this._constructCurve(e,b,!0)}else for(;k.nextPoint();)e.pushXY(k.x,k.y)}return e};q._constructCurve=function(k,e,b){var c=Math.round(e/this._period);0===c&&(c=1);const f=this._period/16,a=1/(16*c+1);e=2*Math.PI*e/(e/c);c=2*Math.PI*Math.random();const d=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=.75-Math.random()/2,p=.75-Math.random()/2,g=new y.Pos;this._walker.curPointAndAngle(g);
k.pushPoint(g.pt);let u=0;for(;;)if(this._walker.nextPointAndAngle(f,g)){const x=u;u+=a;let w;if(b){const m=this._height/2*(1+.3*Math.sin(r*e*x+c));w=m*Math.sin(e*x+d);w+=m*Math.sin(p*e*x+n);w/=2}else w=.5*this._height*Math.sin(.5*e*x);k.pushXY(g.pt[0]-w*g.sa,g.pt[1]+w*g.ca)}else{k.pushPoint(this._walker.getPathEnd());break}};q._constructSquare=function(k,e){Math.round(e/this._period);for(e=!0;;){let b=!1;if(this._walker.curPositionIsValid()){const c=new y.Pos;this._walker.curPointAndAngle(c);const f=
new y.Pos;if(this._walker.nextPointAndAngle(this._period,f)){const a=new y.Pos;this._walker.nextPointAndAngle(this._period,a)&&(e?(k.pushPoint(c.pt),e=!1):k.pushPoint(c.pt),k.pushXY(c.pt[0]-this._height/2*c.sa,c.pt[1]+this._height/2*c.ca),k.pushXY(f.pt[0]-this._height/2*f.sa,f.pt[1]+this._height/2*f.ca),k.pushXY(f.pt[0]+this._height/2*f.sa,f.pt[1]-this._height/2*f.ca),k.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),b=!0)}}if(!b){k.pushPoint(this._walker.getPathEnd());break}}};q._constructTriangle=
function(k,e){Math.round(e/this._period);for(e=!0;;){let b=!1;if(this._walker.curPositionIsValid()){const c=new y.Pos;this._walker.curPointAndAngle(c);const f=new y.Pos;if(this._walker.nextPointAndAngle(this._period/2,f)){const a=new y.Pos;this._walker.nextPointAndAngle(this._period,a)&&(this._walker.nextPosition(this._period/2)&&(e?(k.pushPoint(c.pt),e=!1):k.pushPoint(c.pt),k.pushXY(f.pt[0]-this._height/2*f.sa,f.pt[1]+this._height/2*f.ca),k.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/
2*a.ca)),b=!0)}}if(!b){k.pushPoint(this._walker.getPathEnd());break}}};return h._createClass(t)}();l.EffectWave=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/placements/PlacementAlongLineSameSize":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../enums","../GeometryWalker"],function(l,h,D,B,y){let v=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=
function(q,k,e,b,c){return new C(q,k,e)};return h._createClass(t)}();v.instance=null;let C=function(t){function q(e,b,c){e=t.call(this,e)||this;e._geometryWalker=new y.GeometryWalker;e._geometryWalker.updateTolerance(c);e._angleToLine=b.angleToLine??!0;e._offset=(b.offset?b.offset:0)*c;e._originalEndings=b.endings;e._offsetAtEnd=(b.customEndingOffset?b.customEndingOffset:0)*c;e._position=-(b.offsetAlongLine?b.offsetAlongLine:0)*c;e._pattern=new y.DashPattern;e._pattern.init(b.placementTemplate,!1);
e._pattern.scale(c);e._endings=e._originalEndings;return e}h._inherits(q,t);var k=q.prototype;k.processPath=function(e){if(this._pattern.isEmpty())return null;if(this.iteratePath)var b=this._pattern.nextValue();else{this._endings=this._originalEndings===B.PlacementEndings.WithFullGap&&this.isClosed?B.PlacementEndings.WithMarkers:this._originalEndings;this._pattern.extPtGap=0;let c=!0;switch(this._endings){case B.PlacementEndings.NoConstraint:b=-this._position;b=this._adjustPosition(b);c=!1;break;
default:b=-this._pattern.lastValue()/2;break;case B.PlacementEndings.WithFullGap:b=-this._pattern.lastValue();this._pattern.extPtGap=this._pattern.lastValue();break;case B.PlacementEndings.WithMarkers:b=0;break;case B.PlacementEndings.Custom:b=-this._position,b=this._adjustPosition(b),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(e,this._pattern,c))return null;this._pattern.reset();for(e=0;b>e;)b-=e,e=this._pattern.nextValue();b=e-b;this.iteratePath=!0}e=new y.Pos;if(!this._geometryWalker.nextPointAndAngle(b,
e)||this._endings===B.PlacementEndings.WithFullGap&&this._geometryWalker.isPathEnd())return this.iteratePath=!1,null;if(this._endings===B.PlacementEndings.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed))return null;this.internalPlacement.setTranslate(e.pt[0]-this._offset*e.sa,e.pt[1]+this._offset*e.ca);this._angleToLine&&this.internalPlacement.setRotateCS(e.ca,e.sa);return this.internalPlacement};k._adjustPosition=function(e){e/=this._pattern.length();e-=Math.floor(e);
return e*this._pattern.length()};return h._createClass(q)}(D.PathTransformationCursor);l.PlacementAlongLineSameSize=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/placements/PlacementAtExtremities":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../enums"],function(l,h,D,B,y){let v=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(q,
k,e,b,c){return new C(q,k,e)};return h._createClass(t)}();v.instance=null;let C=function(t){function q(e,b,c){e=t.call(this,e,!1,!0)||this;e._curveHelper=new B.CurveHelper;e._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;e._offset=void 0!==b.offset?b.offset*c:0;e._type=b.extremityPlacement;e._position=void 0!==b.offsetAlongLine?b.offsetAlongLine*c:0;e._beginProcessed=!1;return e}h._inherits(q,t);var k=q.prototype;k.processPath=function(e){let b;switch(this._type){default:this._beginProcessed?
(b=this._atExtremities(e,this._position,!1),this.iteratePath=this._beginProcessed=!1):(b=this._atExtremities(e,this._position,!0),this.iteratePath=this._beginProcessed=!0);break;case y.ExtremityPlacement.JustBegin:b=this._atExtremities(e,this._position,!0);break;case y.ExtremityPlacement.JustEnd:b=this._atExtremities(e,this._position,!1);case y.ExtremityPlacement.None:}return b};k._atExtremities=function(e,b,c){c||e.seekPathEnd();if(c?e.nextPoint():e.prevPoint()){let f=0,[a,d]=[0,0],[n,r]=[e.x,e.y];
for(;c?e.nextPoint():e.prevPoint();){a=n;d=r;n=e.x;r=e.y;const p=this._curveHelper.getLength(a,d,n,r);if(f+p>b){e=(b-f)/p;const [g,u]=this._curveHelper.getAngleCS(a,d,n,r,e);e=this._curveHelper.getCoord2D(a,d,n,r,e);this.internalPlacement.setTranslate(e[0]-this._offset*u,e[1]+this._offset*g);this._angleToLine&&this.internalPlacement.setRotateCS(-g,-u);return this.internalPlacement}f+=p}}return null};return h._createClass(q)}(D.PathTransformationCursor);l.PlacementAtExtremities=v;Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/placements/PlacementAtRatioPositions":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../GeometryWalker"],function(l,h,D,B){let y=function(){function C(){}C.local=function(){null===C.instance&&(C.instance=new C);return C.instance};C.prototype.execute=function(t,q,k,e,b){return new v(t,q,k)};return h._createClass(C)}();y.instance=null;let v=function(C){function t(q,k,e){q=C.call(this,q)||this;q._walker=
new B.GeometryWalker;q._walker.updateTolerance(e);q._angleToLine=void 0!==k.angleToLine?k.angleToLine:!0;q._offset=void 0!==k.offset?k.offset*e:0;q._beginGap=void 0!==k.beginPosition?k.beginPosition*e:0;q._endGap=void 0!==k.endPosition?k.endPosition*e:0;q._flipFirst=void 0!==k.flipFirst?k.flipFirst:!0;q._pattern=new B.DashPattern;q._pattern.init(k.positionArray,!1,!1);q._subPathLen=0;q._posCount=q._pattern.size();q._isFirst=!0;q._prevPos=0;return q}h._inherits(t,C);t.prototype.processPath=function(q){if(this._pattern.isEmpty())return null;
if(this.iteratePath){q=this._pattern.nextValue()*this._subPathLen;var k=this._beginGap+q;q=k-this._prevPos;this._prevPos=k}else{this._posCount=this._pattern.size();this._isFirst=!0;this._prevPos=0;this._subPathLen=q.pathLength()-this._beginGap-this._endGap;if(0>this._subPathLen)return this.iteratePath=!1,null;if(!this._walker.init(q,this._pattern,!1))return null;this._pattern.reset();q=this._pattern.nextValue()*this._subPathLen;k=this._beginGap+q;q=k-this._prevPos;this._prevPos=k;this.iteratePath=
!0}k=new B.Pos;if(!this._walker.nextPointAndAngle(q,k,B.EndType.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(k.pt[0]-this._offset*k.sa,k.pt[1]+this._offset*k.ca);q=this._isFirst&&this._flipFirst;let e;this._angleToLine?(e=k.ca,k=k.sa):(e=1,k=0);q&&(e=-e,k=-k);this.internalPlacement.setRotateCS(e,k);this._isFirst=!1;this._posCount--;0===this._posCount&&(this.iteratePath=!1);return this.internalPlacement};return h._createClass(t)}(D.PathTransformationCursor);l.PlacementAtRatioPositions=
y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/placements/PlacementInsidePolygon":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/RandomLCG","../CIMPlacements","../enums"],function(l,h,D,B,y){let v=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(q,k,e,b,c){return new C(q,k,e,b,c)};return h._createClass(t)}();v.instance=null;let C=function(){function t(k,
e,b,c,f){this._currentY=this._currentX=this._yMax=this._yMin=this._xMax=this._xMin=0;this._accelerationMap=null;this._testInsidePolygon=!1;this._verticalSubdivision=!0;this._stepX=Math.abs(e.stepX??16)*b;this._stepY=Math.abs(e.stepY??16)*b;this._stepX=Math.round(128*this._stepX)/128;this._stepY=Math.round(128*this._stepY)/128;if(0!==this._stepX&&0!==this._stepY){this._gridType=e.gridType??y.PlacementGridType.Fixed;if(this._gridType===y.PlacementGridType.Random)this._randomLCG=new D(1*(e.seed??13)),
this._randomness=(e.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._offsetY=this._offsetX=this._sinAngle=0,this._buildRandomValues();else{this._randomness=0;this._gridAngle=e.gridAngle??0;this._shiftOddRows=e.shiftOddRows??!1;this._offsetX=(e.offsetX??0)*b;this._offsetY=(e.offsetY??0)*b;this._cosAngle=Math.cos(this._gridAngle/180*Math.PI);this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI);if(this._stepX)if(0>this._offsetX)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=
this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(0>this._offsetY)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginY=this._graphicOriginX=0;if(null!=c){const [a,d,n,r]=c.split("/");e=parseFloat(a);b=parseFloat(d);c=parseFloat(n);this._graphicOriginX=512*-(parseFloat(r)*2**e+c);this._graphicOriginY=512*b;this._testInsidePolygon=!0}this._internalPlacement=
new B.Placement;this._calculateMinMax(k);this._geometryCursor=k}}var q=t.prototype;q.next=function(){return this._geometryCursor?this._nextInside():null};q._buildRandomValues=function(){if(!t._randValues){t._randValues=[];for(let k=0;24>k;k++)for(let e=0;24>e;e++)t._randValues.push(this._randomLCG.getFloat()),t._randValues.push(this._randomLCG.getFloat())}};q._calculateMinMax=function(k){this._yMax=this._yMin=this._xMax=this._xMin=0;let e,b,c,f,a,d,n,r;e=b=n=a=Number.MAX_VALUE;c=f=r=d=-Number.MAX_VALUE;
var p=1!==this._cosAngle;for(k.reset();k.nextPath();)for(;k.nextPoint();){var g=k.x;var u=k.y;var x=g-this._graphicOriginX-this._offsetX;var w=u-this._graphicOriginY-this._offsetY;if(p){var m=this._cosAngle*x-this._sinAngle*w;x=this._sinAngle*x+this._cosAngle*w}else m=x,x=w;e=Math.min(e,m);c=Math.max(c,m);b=Math.min(b,x);f=Math.max(f,x);a=Math.min(a,u);d=Math.max(d,u);n=Math.min(n,g);r=Math.max(r,g)}a=a!==Number.MAX_VALUE?a:-512-this._stepY;d=d!==-Number.MAX_VALUE?d:this._stepY;n=n!==Number.MAX_VALUE?
n:-this._stepX;r=r!==-Number.MAX_VALUE?r:512+this._stepX;this._polygonMin=(this._verticalSubdivision=d-a>=r-n)?a:n;if(this._testInsidePolygon){m=0-this._graphicOriginX-this._offsetX-this._stepX;u=512-this._graphicOriginX-this._offsetX+this._stepX;g=-512-this._graphicOriginY-this._offsetY-this._stepY;x=0-this._graphicOriginY-this._offsetY+this._stepY;if(p){p=[[m,g],[m,x],[u,g],[u,x]];m=g=Number.MAX_VALUE;u=x=-Number.MAX_VALUE;for(const z of p)p=this._cosAngle*z[0]-this._sinAngle*z[1],w=this._sinAngle*
z[0]+this._cosAngle*z[1],m=Math.min(m,p),u=Math.max(u,p),g=Math.min(g,w),x=Math.max(x,w)}e=e!==Number.MAX_VALUE?Math.max(e,m):m;b=b!==Number.MAX_VALUE?Math.max(b,g):g;c=c!==-Number.MAX_VALUE?Math.min(c,u):u;f=f!==-Number.MAX_VALUE?Math.min(f,x):x}this._xMin=Math.round(e/this._stepX);this._xMax=Math.round(c/this._stepX);this._yMin=Math.round(b/this._stepY);this._yMax=Math.round(f/this._stepY);this._currentX=this._xMax+1;this._currentY=this._yMin-1;this._buildAccelerationMap(k,n,r,a,d)};q._buildAccelerationMap=
function(k,e,b,c,f){k.reset();const a=new Map,d=this._verticalSubdivision;b=d?f-c:b-e;f=Math.ceil(b/10);if(!(1>=f)){b=Math.floor(b/f);f++;this._delta=b;var n,r;if(d){f=-512-this._stepY;var p=this._stepY;var g=c}else f=-this._stepX,p=512+this._stepX,g=e;for(;k.nextPath();)if(!(2>k.numPoints)&&k.nextPoint()){var u=k.x;for(n=k.y;k.nextPoint();u=e,n=c){e=k.x;c=k.y;if(d){if(n===c||n<f&&c<f||n>p&&c>p)continue;var x=Math.min(n,c);var w=Math.max(n,c)}else{if(u===e||u<f&&e<f||u>p&&e>p)continue;x=Math.min(u,
e);w=Math.max(u,e)}for(;x<w;){var m=r=Math.floor((x-g)/b),z=u,A=n,H=e,E=c,F=a;let J=F.get(m);J||(J=[],F.set(m,J));J.push([[z,A],[H,E]]);x+=b}x=Math.floor((w-g)/b);x>r&&(w=e,m=c,z=a,A=z.get(x),A||(A=[],z.set(x,A)),A.push([[u,n],[w,m]]))}}this._accelerationMap=a}};q._nextInside=function(){for(;;){if(this._currentX>this._xMax){this._currentY++;if(this._currentY>this._yMax)return null;this._currentX=this._xMin;this._shiftOddRows&&this._currentY%2&&this._currentX--}var k=this._currentX*this._stepX+this._offsetX;
this._shiftOddRows&&this._currentY%2&&(k+=.5*this._stepX);const e=this._currentY*this._stepY+this._offsetY;this._currentX++;let b;if(this._gridType===y.PlacementGridType.Random){const c=(this._currentX%24+24)%24,f=(this._currentY%24+24)%24;b=this._graphicOriginX+k+this._stepX*this._randomness*(.5-t._randValues[24*f+c])*2/3;k=this._graphicOriginY+e+this._stepY*this._randomness*(.5-t._randValues[24*f+c+1])*2/3}else b=this._graphicOriginX+this._cosAngle*k+this._sinAngle*e,k=this._graphicOriginY-this._sinAngle*
k+this._cosAngle*e;if(!this._testInsidePolygon||this._isInsidePolygon(b,k,this._geometryCursor))return this._internalPlacement.setTranslate(b,k),this._internalPlacement}};q._isInsidePolygon=function(k,e,b){if(null==this._accelerationMap){var c=0,f;let n;k+=1E-6;e+=1E-6;for(b.reset();b.nextPath();)if(b.nextPoint()){var a=b.x;for(f=b.y;b.nextPoint();a=d,f=n){var d=b.x;n=b.y;f>e!==n>e&&(0<(d-a)*(e-f)-(n-f)*(k-a)?c++:c--)}}return 0!==c}k+=1E-6;e+=1E-6;b=this._verticalSubdivision;f=this._accelerationMap.get(Math.floor(((b?
e:k)-this._polygonMin)/this._delta));if(!f)return!1;a=0;for(c of f){f=c[0];d=c[1];if(b){if(f[1]>e===d[1]>e)continue;f=(d[0]-f[0])*(e-f[1])-(d[1]-f[1])*(k-f[0])}else{if(f[0]>k===d[0]>k)continue;f=(d[1]-f[1])*(k-f[0])-(d[0]-f[0])*(e-f[1])}0<f?a++:a--}return 0!==a};return h._createClass(t)}();l.PlacementInsidePolygon=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/placements/PlacementOnLine":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../CIMCursor","../CurveHelper","../enums"],function(l,h,D,B,y){let v=function(){function t(){}t.local=function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(q,k,e,b,c){return new C(q,k,e)};return h._createClass(t)}();v.instance=null;let C=function(t){function q(e,b,c){e=t.call(this,e)||this;e._curveHelper=new B.CurveHelper;e._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;e._offset=void 0!==b.offset?b.offset*c:0;e._relativeTo=b.relativeTo;e._position=
void 0!==b.startPointOffset?b.startPointOffset*c:0;e._epsilon=.001*c;return e}h._inherits(q,t);var k=q.prototype;k.processPath=function(e){var b=this._position;if(this._relativeTo===y.PlacementOnLineRelativeTo.SegmentMidpoint){this.iteratePath||(this.iteratePath=!0);if(e.nextPoint()){let [c,f]=[e.x,e.y],[a,d]=[0,0];for(;e.nextPoint();){a=e.x;d=e.y;b=this._curveHelper.getLength(c,f,a,d);if(b<this._epsilon){c=a;f=d;continue}e=.5+this._position/b;const [n,r]=this._curveHelper.getAngleCS(c,f,a,d,e);e=
this._curveHelper.getCoord2D(c,f,a,d,e);this.internalPlacement.setTranslate(e[0]-this._offset*r,e[1]+this._offset*n);this._angleToLine&&this.internalPlacement.setRotateCS(n,r);return this.internalPlacement}}this.iteratePath=!1;return null}return this.onLine(e,b,this._relativeTo===y.PlacementOnLineRelativeTo.LineEnd)};k.onLine=function(e,b,c){let f=!1;switch(this._relativeTo){default:e.seekPathStart();b=e.pathLength()/2+b;break;case y.PlacementOnLineRelativeTo.LineBeginning:break;case y.PlacementOnLineRelativeTo.LineEnd:f=
!0}c?e.seekPathEnd():e.seekPathStart();let a=0;if(c?e.prevPoint():e.nextPoint()){let [d,n]=[e.x,e.y],[r,p]=[0,0];for(;c?e.prevPoint():e.nextPoint();){r=e.x;p=e.y;const g=this._curveHelper.getLength(d,n,r,p);if(a+g>b){e=(b-a)/g;const [u,x]=this._curveHelper.getAngleCS(d,n,r,p,e);e=this._curveHelper.getCoord2D(d,n,r,p,e);c=f?-this._offset:this._offset;this.internalPlacement.setTranslate(e[0]-c*x,e[1]+c*u);this._angleToLine&&(f?this.internalPlacement.setRotateCS(-u,-x):this.internalPlacement.setRotateCS(u,
x));return this.internalPlacement}d=r;n=p;a+=g}}return null};return h._createClass(q)}(D.PathTransformationCursor);l.PlacementOnLine=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/placements/PlacementOnVertices":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(l,h,D,B){function y(t,q){const k=Math.PI;for(;Math.abs(q-t)>k+2E-15;)q=q-t>k?q-2*k:q+2*k;return(t+q)/2}let v=function(){function t(){}t.local=
function(){null===t.instance&&(t.instance=new t);return t.instance};t.prototype.execute=function(q,k,e,b,c){return new C(q,k,e)};return h._createClass(t)}();v.instance=null;let C=function(t){function q(e,b,c){e=t.call(this,e)||this;e._curveHelper=new B.CurveHelper;e._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;e._offset=void 0!==b.offset?b.offset*c:0;e._endPoints=void 0!==b.placeOnEndPoints?b.placeOnEndPoints:!0;e._controlPoints=void 0!==b.placeOnControlPoints?b.placeOnControlPoints:!0;e._regularVertices=
void 0!==b.placeOnRegularVertices?b.placeOnRegularVertices:!0;e._tags=[];e._tagIterator=0;return e}h._inherits(q,t);var k=q.prototype;k.processPath=function(e){this.iteratePath||(this._preparePath(e),this.iteratePath=!0);if(this._tagIterator>=this._tags.length)return this._tagIterator=this._tags.length=0,this.iteratePath=!1,null;e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);let b=e[0],c=e[1];if(0!==this._offset){const f=Math.cos(e[2]);b-=this._offset*Math.sin(e[2]);
c+=this._offset*f}this.internalPlacement.setTranslate(b,c);this._tagIterator++;return this.internalPlacement};k._preparePath=function(e){this._tagIterator=this._tags.length=0;e.seekPathStart();const b=e.isClosed();let c=0,f=!1,a=0,d=0;e.seekPathStart();if(e.nextPoint()){let n=e.x,r=e.y,p=e.getControlPoint(),g=!0,u=e.nextPoint();for(;u;){const x=e.x,w=e.y,m=e.getControlPoint();if(this._angleToLine||0!==this._offset)a=this._curveHelper.getAngle(n,r,x,w,0);g?(g=!1,b?(c=a,f=p):(this._endPoints||this._controlPoints&&
p)&&this._tags.push([n,r,a])):p?this._controlPoints&&this._tags.push([n,r,y(d,a)]):this._regularVertices&&this._tags.push([n,r,y(d,a)]);if(this._angleToLine||0!==this._offset)d=this._curveHelper.getAngle(n,r,x,w,1);(u=e.nextPoint())||(b?m||f?this._controlPoints&&this._tags.push([x,w,y(d,c)]):this._regularVertices&&this._tags.push([x,w,y(d,c)]):(this._endPoints||this._controlPoints&&m)&&this._tags.push([x,w,d]));n=x;r=w;p=m}}this._tagIterator=0};return h._createClass(q)}(D.PathTransformationCursor);
l.PlacementOnVertices=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/placements/PlacementPolygonCenter":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/has ../../../geometry/support/boundsUtils ../../../geometry/support/centroid ../../../geometry/support/labelPoint ../CIMPlacements ../enums".split(" "),function(l,h,D,B,y,v,C,t){let q=function(){function e(){}e.local=function(){null===e.instance&&(e.instance=new e);return e.instance};
e.prototype.execute=function(b,c,f,a,d){return new k(b,c,f)};return h._createClass(e)}();q.instance=null;let k=function(){function e(c,f,a){this._geometryCursor=c;this._offsetX=void 0!==f.offsetX?f.offsetX*a:0;this._offsetY=void 0!==f.offsetY?f.offsetY*a:0;this._method=void 0!==f.method?f.method:t.PlacementPolygonCenterMethod.OnPolygon;this._internalPlacement=new C.Placement}var b=e.prototype;b.next=function(){const c=this._geometryCursor;this._geometryCursor=null;return c?this._polygonCenter(c):
null};b._polygonCenter=function(c){let f=!1;switch(this._method){case t.PlacementPolygonCenterMethod.CenterOfMass:if(c=y.weightedAreaCentroid(c))this._internalPlacement.setTranslate(c[0]+this._offsetX,c[1]+this._offsetY),f=!0;break;case t.PlacementPolygonCenterMethod.BoundingBoxCenter:if(c=B.getCursorBoundsXY(c))this._internalPlacement.setTranslate((c[2]+c[0])/2+this._offsetX,(c[3]+c[1])/2+this._offsetY),f=!0;break;default:c=D("polylabel-placement-enabled")?v.getPolylabelPoint(c):v.labelPointAdapter(c),
null!==c&&(this._internalPlacement.setTranslate(c[0]+this._offsetX,c[1]+this._offsetY),f=!0)}return f?this._internalPlacement:null};return h._createClass(e)}();l.PlacementPolygonCenter=q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/labelPoint":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/PriorityQueue ../geometryCursorCollectUtils ./aaBoundingRect ./boundsUtils ./centroid ./coordsUtils ./intersectsBase".split(" "),function(l,
h,D,B,y,v,C,t,q){function k(r){var {rings:p}=r;if(!p||0===p.length)return null;var g=v.getBoundsXY(y.create(),r);if(!g)return null;var u=8.8818E-14*(Math.abs(g[0])+Math.abs(g[2])+Math.abs(g[1])+Math.abs(g[3])+1),x=0,w=0;for(var m=0;m<p.length;m++){var z=t.getRingArea(p[m]);z>w&&(w=z,x=m)}if(Math.abs(w)<=2*u*u)return w=v.getPointsBounds(y.create(),p[x]),[(w[0]+w[2])/2,(w[1]+w[3])/2];var A=C.ringCentroid(p[x],!1,y.create());if(null===A)return null;if(1===p.length&&4>p[0].length)return A;w=[[NaN,NaN],
[NaN,NaN],[NaN,NaN],[NaN,NaN]];m=[NaN,NaN,NaN,NaN];z=[NaN,NaN,NaN,NaN];var H=!1,E=b(A,r,!0);0===E.distance&&(H=!0,w[0][0]=A[0],w[0][1]=A[1],E=b(A,r,!1));m[0]=E.distance;z[0]=0;var F=[NaN,NaN],J=!1;let L=.25,I=-1;p=v.getPointsBounds(y.create(),p[x]);x=NaN;do if(x=NaN,E=p[0],w[1]=c(r,E+(p[2]-E)*L,u,g),isNaN(w[1][0])||isNaN(w[1][1])||(E=b(w[1],r,!1),x=E.distance),!isNaN(x)&&x>u&&e(w[1],r))J=!0,m[1]=x,z[1]=a(w[1],A);else if(!isNaN(x)&&x>I&&(I=x,F[0]=w[1][0],F[1]=w[1][1]),L-=.01,.1>L)if(0<=I)J=!0,m[1]=
I,w[1][0]=F[0],w[1][1]=F[1],z[1]=a(w[1],A);else break;while(!J);J=!1;L=.5;I=-1;let G=.01,K=1;do if(x=NaN,E=p[0],w[2]=c(r,E+(p[2]-E)*L,u,g),isNaN(w[2][0])||isNaN(w[2][1])||(E=b(w[2],r,!1),x=E.distance),!isNaN(x)&&x>u&&e(w[2],r))J=!0,m[2]=x,z[2]=a(w[2],A);else if(!isNaN(x)&&x>I)I=x,F[0]=w[2][0],F[1]=w[2][1];else if(x>I&&(I=x,F[0]=w[2][0],F[1]=w[2][1]),L=.5+G*K,G+=.01,K*=-1,.3>L||.7<L)if(0<=I)J=!0,m[2]=I,w[2][0]=F[0],w[2][1]=F[1],z[2]=a(w[2],A);else break;while(!J);J=!1;L=.75;I=-1;do if(x=NaN,E=p[0],
w[3]=c(r,E+(p[2]-E)*L,u,g),isNaN(w[3][0])||isNaN(w[3][1])||(E=b(w[3],r,!1),x=E.distance),!isNaN(x)&&x>u&&e(w[3],r))J=!0,m[3]=x,z[3]=a(w[3],A);else if(x>I&&(I=x,F[0]=w[3][0],F[1]=w[3][1]),L+=.01,.9<L)if(0<=I)J=!0,m[3]=I,w[3][0]=F[0],w[3][1]=F[1],z[3]=a(w[3],A);else break;while(!J);r=[0,1,2,3];g=H?0:1;for(H=g;4>H;H++)for(A=g;3>A;A++)F=z[A],J=z[A+1],0<d(F,J)&&(u=r[A],r[A]=r[A+1],r[A+1]=u,z[A]=J,z[A+1]=F);z=g;for(H=u=0;4>g;g++){switch(g){case 0:H=2*m[r[g]];break;case 1:H=1.66666666*m[r[g]];break;case 2:H=
1.33333333*m[r[g]];break;case 3:H=m[r[g]]}H>u&&(u=H,z=r[g])}return w[z]}function e(r,p){var {rings:g}=p;p=0;for(const u of g){g=u.length;for(let x=1;x<g;++x){const w=u[x-1],m=u[x];w[1]>r[1]!==m[1]>r[1]&&(0<(m[0]-w[0])*(r[1]-w[1])-(m[1]-w[1])*(r[0]-w[0])?p++:p--)}}return 0!==p}function b(r,p,g){if(g&&e(r,p))return{coord:r,distance:0};g=Infinity;let u=0,x=0;const w=[0,0];({rings:p}=p);for(const m of p)if(!(2>m.length))for(p=0;p<m.length-1;p++){t.projectPointOnLine(w,r,m,p);const z=a(r,w);z<g&&(g=z,
u=w[0],x=w[1])}return{coord:[u,x],distance:Math.sqrt(g)}}function c(r,p,g,u){g=[p,0];let x=Infinity,w=Infinity,m=!1,z=!1;p=[[p,u[1]-1],[p,u[3]+1]];u=[0,0];const A=[0,0],H=[0,0],E=[[0,0],[0,0]],F=y.create();({rings:r}=r);for(const G of r)if(!(2>G.length))for(r=1;r<G.length;r++){E[0][0]=G[r-1][0];E[0][1]=G[r-1][1];E[1][0]=G[r][0];E[1][1]=G[r][1];a:{var J=F;var L=E;if(2>L.length){J=null;break a}J||(J=y.create());const [K,P]=L[0],[Y,ea]=L[1];J[0]=Math.min(K,Y);J[1]=Math.min(P,ea);J[2]=Math.max(K,Y);J[3]=
Math.max(P,ea)}if(null!==J){A[0]=p[0][0];A[1]=p[0][1];H[0]=p[1][0];H[1]=p[1][1];a:{J=F;L=A;var I=H;let K=f(L,J),P=f(I,J);const Y=J[0],ea=J[1],aa=J[2],T=J[3];if(K&P){J=0;break a}if(!(K|P)){J=4;break a}const R=(K?1:0)|(P?2:0);do{const W=I[0]-L[0],S=I[1]-L[1];if(W>S)K&3?(K&1?(L[1]+=S*(Y-L[0])/W,L[0]=Y):(L[1]+=S*(aa-L[0])/W,L[0]=aa),K=f(L,J)):P&3?(P&1?(I[1]+=S*(Y-I[0])/W,I[0]=Y):(I[1]+=S*(aa-I[0])/W,I[0]=aa),P=f(I,J)):K?(K&4?(L[0]+=W*(ea-L[1])/S,L[1]=ea):(L[0]+=W*(T-L[1])/S,L[1]=T),K=f(L,J)):(P&4?(I[0]+=
W*(ea-I[1])/S,I[1]=ea):(I[0]+=W*(T-I[1])/S,I[1]=T),P=f(I,J));else if(K&12?(K&4?(L[0]+=W*(ea-L[1])/S,L[1]=ea):(L[0]+=W*(T-L[1])/S,L[1]=T),K=f(L,J)):P&12?(P&4?(I[0]+=W*(ea-I[1])/S,I[1]=ea):(I[0]+=W*(T-I[1])/S,I[1]=T),P=f(I,J)):K?(K&1?(L[1]+=S*(Y-L[0])/W,L[0]=Y):(L[1]+=S*(aa-L[0])/W,L[0]=aa),K=f(L,J)):(P&1?(I[1]+=S*(Y-I[0])/W,I[0]=Y):(I[1]+=S*(aa-I[0])/W,I[0]=aa),P=f(I,J)),K&P){J=0;break a}}while(K|P);J=R}0!==J&&q.segmentIntersects(p[0],p[1],E[0],E[1],u)&&(J=u[1],x>w?J<x&&(x=J,m=!0):J<w&&(w=J,z=!0))}}m&&
z?g[1]=(x+w)/2:g[0]=g[1]=NaN;return g}function f(r,p){return(r[0]<p[0]?1:0)|(r[0]>p[2]?1:0)<<1|(r[1]<p[1]?1:0)<<2|(r[1]>p[3]?1:0)<<3}function a(r,p){return(r[0]-p[0])*(r[0]-p[0])+(r[1]-p[1])*(r[1]-p[1])}function d(r,p){if(r<p)return-1;if(r>p)return 1;if(r===p)return 0;r=isNaN(r);p=isNaN(p);return r<p?-1:r>p?1:0}let n=h._createClass(function(r,p,g,u){this.x=r;this.y=p;this.cellSize=g;this.distancefromCellCenter=t.distanceFromPointToPolygon(r,p,u);this.maxDistanceToPolygon=this.distancefromCellCenter+
this.cellSize*Math.SQRT2});l.getLabelPoint=k;l.getPolylabelPoint=function(r){if(!r.nextPath()||!r.numPoints)return null;var p=v.currPathBounds(r),g=p[2]-p[0],u=p[3]-p[1];if(0===g||0===u)return[p[0]+g/2,p[1]+u/2];const x=Math.max(Math.min(g,u)/100,1),w=new D((A,H)=>H.maxDistanceToPolygon-A.maxDistanceToPolygon);u=Math.min(g,u);g=u/2;let m=0,z=0;for(m=p[0];m<p[2];m+=u)for(z=p[1];z<p[3];z+=u)w.enqueue(new n(m+g,z+g,g,r));p=C.ringsCentroidCursor(r);if(null===p)return null;for(p=new n(p[0],p[1],0,r);0<
w.size;)u=w.dequeue(),u.distancefromCellCenter>p.distancefromCellCenter&&(p=u),u.maxDistanceToPolygon-p.distancefromCellCenter<=x||(g=u.cellSize/2,w.enqueue(new n(u.x-g,u.y-g,g,r)),w.enqueue(new n(u.x+g,u.y-g,g,r)),w.enqueue(new n(u.x-g,u.y+g,g,r)),w.enqueue(new n(u.x+g,u.y+g,g,r)));return[p.x,p.y]};l.labelPointAdapter=function(r){r={rings:B.collectMultipath(r)};return k(r)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/PriorityQueue":function(){define(["../chunks/_rollupPluginBabelHelpers"],
function(l){const h=(D,B)=>D<B?-1:D>B?1:0;return function(){function D(y=h){this._data=[];this._compare=y}var B=D.prototype;B.enqueue=function(y){if(null!=y){var {_data:v,_compare:C}=this;v.push(y);y=v.length-1>>>0;for(var t=v[y];0<y;){const q=y-1>>1,k=v[q];if(0>=C(k,t))v[q]=t,v[y]=k,y=q;else break}}};B.dequeue=function(){const {_data:y,_compare:v}=this,C=y[0];var t=y.pop();if(0===y.length)return C;y[0]=t;t=0;const q=y.length,k=y[0];let e;let b=null;for(;;){var c=2*t+1;const f=2*t+2;b=null;c<q&&(e=
y[c],0<v(e,k)&&(b=c));f<q&&(c=y[f],null===b&&0>=v(c,k)||null!==b&&0>=v(c,e))&&(b=f);if(null===b)break;y[t]=y[b];y[b]=k;t=b}return C};l._createClass(D,[{key:"size",get:function(){return this._data.length}}]);return D}()})},"esri/views/2d/engine/webgl/mesh/templates/shapingUtils":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2 ../../../../../../chunks/vec2f32 ../../alignmentUtils ../../number ../../Rect ../../collisions/BoundingBox".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){function b(n,r){n.forEach(p=>v.transformMat2d(p,p,r));return{upperLeft:q.i1616to32(8*n[0][0],8*n[0][1]),upperRight:q.i1616to32(8*n[1][0],8*n[1][1]),lowerLeft:q.i1616to32(8*n[2][0],8*n[2][1]),lowerRight:q.i1616to32(8*n[3][0],8*n[3][1])}}const c=Math.PI/180;let f=function(){function n(p,g,u,x){this._rotationT=y.create();this.minZoom=this._yBounds=this._xBounds=0;this.maxZoom=255;this._bounds=null;const w=u.rect,m=new Float32Array(8);p*=x;g*=x;const z=u.code?w.width*x:
u.metrics.width,A=u.code?w.height*x:u.metrics.height;this.width=z;this.height=A;m[0]=p;m[1]=g;m[2]=p+z;m[3]=g;m[4]=p;m[5]=g+A;m[6]=p+z;m[7]=g+A;this._data=m;this._setTextureCoords(w);this._scale=x;this._mosaic=u;this.x=p;this.y=g;this.maxOffset=Math.max(p+z,g+A)}var r=n.prototype;r.setTransform=function(p){this._transform=p;this._offsets=null};r._setOffsets=function(p){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});const g=this._offsets,u=new Float32Array(8),x=
B.multiply(y.create(),this._rotationT,this._transform);y.transformMany(u,p,x);g.upperLeft=q.i1616to32(8*u[0],8*u[1]);g.upperRight=q.i1616to32(8*u[2],8*u[3]);g.lowerLeft=q.i1616to32(8*u[4],8*u[5]);g.lowerRight=q.i1616to32(8*u[6],8*u[7])};r._setTextureCoords=function({x:p,y:g,width:u,height:x}){this._texcoords={upperLeft:q.i1616to32(p,g),upperRight:q.i1616to32(p+u,g),lowerLeft:q.i1616to32(p,g+x),lowerRight:q.i1616to32(p+u,g+x)}};h._createClass(n,[{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",
get:function(){return this._angle},set:function(p){this._angle=p;B.fromRotation(this._rotationT,-p);this._setOffsets(this._data)}},{key:"xTopLeft",get:function(){return this._data[0]}},{key:"yTopLeft",get:function(){return this._data[1]}},{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",
get:function(){this._offsets||this._setOffsets(this._data);return this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},{key:"bounds",get:function(){if(!this._bounds){const {height:w,width:m}=this._mosaic.metrics;var p=m*this._scale,g=Math.abs(w)*this._scale,u=new Float32Array(8);u[0]=this.x;u[1]=this.y;u[2]=this.x+p;u[3]=this.y;u[4]=this.x;u[5]=this.y+g;u[6]=this.x+p;u[7]=this.y+g;p=B.multiply(y.create(),this._rotationT,
this._transform);y.transformMany(u,u,p);g=p=Infinity;let z=0;var x=0;for(let A=0;4>A;A++){const H=u[2*A],E=u[2*A+1];p=Math.min(p,H);g=Math.min(g,E);z=Math.max(z,H);x=Math.max(x,E)}u=z-p;x-=g;this._bounds=new e(p+u/2,g+x/2,u,x)}return this._bounds}}]);return n}(),a=function(){function n(p,g,u){this._rotation=0;this._decorate(p,g,u);this.glyphs=p;this.bounds=this._createBounds(p);this.isMultiline=1<g.length;this._hasRotation=0!==u.angle;this._transform=this._createGlyphTransform(this.bounds,u);if((this._borderLineSize=
u.borderLineSize)||u.hasBackground)[this.bounds,this.background]=this.shapeBackground(this._transform);for(const x of p)x.setTransform(this._transform)}var r=n.prototype;r.setRotation=function(p){if(0!==p||0!==this._rotation){this._rotation=p;var g=this._transform;p=B.fromRotation(y.create(),p);B.multiply(g,p,g);for(const u of this.glyphs)u.setTransform(this._transform)}};r._decorate=function(p,g,u){if(u.decoration&&"none"!==u.decoration&&p.length){var x=u.scale;u="underline"===u.decoration?30:20;
var w=p[0].textureBinding;for(const H of g){const E=H.startX*x,F=H.startY*x;g=p;var m=g.push;var z=(H.width+H.glyphWidthEnd)*x;var A=w;z={code:0,page:0,sdf:!0,rect:new k(0,0,11,8),textureBinding:A,metrics:{advance:0,height:4,width:z,left:0,top:0}};m.call(g,new f(E,F+u*x,z,1))}}};r.shapeBackground=function(p){const g=(1.5+D.pt2px(this._borderLineSize||0))/2;var u=this._borderLineSize?g:0;const {xmin:x,ymin:w,xmax:m,ymax:z,x:A,y:H,width:E,height:F}=this.bounds,J=[x-8,w-8],L=[m+8,w-8],I=[x-8,z+8],G=
[m+8,z+8],K=b([[J[0]-g,J[1]-g],[L[0]+g,L[1]-g],[J[0]+u,J[1]+u],[L[0]-u,L[1]+u]],p),P=b([[I[0]+u,I[1]-u],[G[0]-u,G[1]-u],[I[0]-g,I[1]+g],[G[0]+g,G[1]+g]],p),Y=b([[J[0]-g,J[1]-g],[J[0]+u,J[1]+u],[I[0]-g,I[1]+g],[I[0]+u,I[1]-u]],p);u=b([[L[0]-u,L[1]+u],[L[0]+g,L[1]-g],[G[0]-u,G[1]-u],[G[0]+g,G[1]+g]],p);p={main:b([J,L,I,G],p),top:K,bot:P,left:Y,right:u};return[new e(A,H,E+2*g,F+2*g),p]};r._createBounds=function(p){let g=Infinity,u=Infinity,x=0;var w=0;for(const m of p)g=Math.min(g,m.xTopLeft),u=Math.min(u,
m.yTopLeft),x=Math.max(x,m.xBottomRight),w=Math.max(w,m.yBottomRight);p=x-g;w-=u;return new e(g+p/2,u+w/2,p,w)};r._createGlyphTransform=function(p,g){const u=c*g.angle,x=y.create(),w=C.create();B.translate(x,x,v.set(w,g.xOffset,-g.yOffset));g.isCIM?B.rotate(x,x,u):(B.translate(x,x,v.set(w,p.x,p.y)),B.rotate(x,x,u),B.translate(x,x,v.set(w,-p.x,-p.y)));return x};h._createClass(n,[{key:"boundsT",get:function(){var p=this.bounds;const g=v.set(C.create(),p.x,p.y);v.transformMat2d(g,g,this._transform);
return this._hasRotation?(p=Math.max(p.width,p.height),new e(g[0],g[1],p,p)):new e(g[0],g[1],p.width,p.height)}}]);return n}(),d=h._createClass(function(n,r,p,g,u,x){this.startY=this.startX=this.glyphWidthEnd=0;this.start=Math.max(0,Math.min(r,p));this.end=Math.max(0,Math.max(r,p));this.end<n.length&&(this.glyphWidthEnd=n[this.end].metrics.width);this.width=g;this.yMin=u;this.yMax=x});l.ShapedGlyph=f;l.ShapingInfo=a;l.shapeGlyphs=function(n,r,p){const g=p.scale,u=[],x=[];var w=1/p.scale*p.maxLineWidth;
var m=r?n.length-1:0,z=r?-1:n.length;r=r?-1:1;var A=m,H=0,E=0;let F=A,J=F,L=0,I=Infinity,G=0;for(;A!==z;){const {code:ea,metrics:aa}=n[A];var K=Math.abs(aa.top);10!==ea&&32!==ea&&(I=Math.min(I,K),G=Math.max(G,K+aa.height));10===ea?(A!==m&&(x.push(new d(n,F,A-r,H,I,G)),I=Infinity,G=0),H=0,F=A+r,J=A+r,E=0):32===ea?(J=A+r,E=0,L=aa.advance,H+=aa.advance):(H>w&&(J!==F?(K=J-2*r,H-=L,x.push(new d(n,F,K,H-E,I,G)),I=Infinity,G=0,F=J,H=E):(x.push(new d(n,F,A-r,H,I,G)),I=Infinity,G=0,J=F=A,H=0)),H+=aa.advance,
E+=aa.advance);A+=r}w=new d(n,F,A-r,H,I,G);0<=w.start&&w.end<n.length&&x.push(w);for(w=0;w<x.length;w++);m=x[0].yMin;w=x[x.length-1].yMax+p.lineHeight*(x.length-1)+("underline"===p.decoration?4:0)-m;const {vAlign:P,hAlign:Y}=p;z=P===t.VAlign.Baseline?1:0;w=(1-z)*-m+w/2*(z?0:P-1)+-26*(z?1:0);for(m=0;m<x.length;m++){const {start:ea,end:aa,width:T}=x[m];z=T/2*(Y+1)*-1-3;r=m*p.lineHeight+w-3;x[m].startX=z;x[m].startY=r;for(A=ea;A<=aa;A++)H=n[A],10!==H.code&&(E=new f(z+H.metrics.left,r-H.metrics.top,H,
g),z+=H.metrics.advance,u.push(E))}return new a(u,x,p)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec2f32":function(){define(["exports"],function(l){function h(){return new Float32Array(2)}function D(a){const d=new Float32Array(2);d[0]=a[0];d[1]=a[1];return d}function B(a,d){const n=new Float32Array(2);n[0]=a;n[1]=d;return n}function y(a,d){return new Float32Array(a,d,2)}function v(){return h()}function C(){return B(1,1)}function t(){return B(1,0)}function q(){return B(0,
1)}const k=h(),e=C(),b=t(),c=q(),f=Object.freeze(Object.defineProperty({__proto__:null,ONES:e,UNIT_X:b,UNIT_Y:c,ZEROS:k,clone:D,create:h,createView:y,fromValues:B,ones:C,unitX:t,unitY:q,zeros:v},Symbol.toStringTag,{value:"Module"}));l.ONES=e;l.UNIT_X=b;l.UNIT_Y=c;l.ZEROS=k;l.clone=D;l.create=h;l.createView=y;l.fromValues=B;l.ones=C;l.unitX=t;l.unitY=q;l.vec2f32=f;l.zeros=v})},"esri/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/vec2f32"],
function(l,h){return function(){function D(y,v,C,t){this.center=h.fromValues(y,v);this.centerT=h.create();this.halfWidth=C/2;this.halfHeight=t/2;this.width=C;this.height=t}var B=D.prototype;B.clone=function(){return new D(this.x,this.y,this.width,this.height)};B.serialize=function(y){y.writeF32(this.center[0]);y.writeF32(this.center[1]);y.push(this.width);y.push(this.height);return y};B.findCollisionDelta=function(y,v=4){return Math.log2(Math.min((y.halfWidth+this.halfWidth+v)/Math.abs(y.centerT[0]-
this.centerT[0]),(y.halfHeight+this.halfHeight+v)/Math.abs(y.centerT[1]-this.centerT[1])))};B.extend=function(y){const v=Math.min(this.xmin,y.xmin),C=Math.min(this.ymin,y.ymin),t=Math.max(this.xmax,y.xmax)-v;y=Math.max(this.ymax,y.ymax)-C;this.width=t;this.height=y;this.halfWidth=t/2;this.halfHeight=y/2;this.x=v+t/2;this.y=C+y/2};D.deserialize=function(y){const v=y.readF32(),C=y.readF32(),t=y.readInt32();y=y.readInt32();return new D(v,C,t,y)};l._createClass(D,[{key:"x",get:function(){return this.center[0]},
set:function(y){this.center[0]=y}},{key:"y",get:function(){return this.center[1]},set:function(y){this.center[1]=y}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",
get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+this.halfHeight}}]);return D}()})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../geometry/GeometryCursor","../../../../../../symbols/cim/effects/CIMEffectHelper"],function(l,h,D){return function(){function B(){this._materialKey=null}var y=B.prototype;y.bindFeature=function(v,C,t){};y.write=function(v,C,t,q){if(this._effects&&
0<this._effects.length){if(t=h.GeometryCursor.fromFeatureSetReaderCIM(C)){t.invertY();const k=D.CIMEffectHelper.executeEffects(this._effects,t,v.tileKey,q.geometryEngine);for(;t=k.next();)t.invertY(),this._write(v,C,q,t)}}else this._write(v,C,q)};y._write=function(v,C,t,q){};return l._createClass(B)}()})},"esri/symbols/cim/effects/CIMEffectHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/GeometryCursor ../../../geometry/geometryCursorCollectUtils ../CIMEffects ../CIMOperators ../CIMSymbolHelper".split(" "),
function(l,h,D,B,y,v,C){const t=96/72;let q=function(){function k(){}k.executeEffects=function(e,b,c,f){const a=C.getEffectsInflateSize(e);b=new y.SimpleEffectCursor(b);for(const d of e)(e=v.getEffectOperator(d))&&(b=e.execute(b,d,t,c,f,a));return b};k.applyEffects=function(e,b,c){if(!e)return b;var f=C.getEffectsInflateSize(e);b=new y.SimpleEffectCursor(D.GeometryCursor.fromJSONCIM(b));for(var a of e)(e=v.getEffectOperator(a))&&(b=e.execute(b,a,1,null,c,f));f=[];for(a=null;c=b.next();)f.push(...B.collectMultipath(c)),
a=c.geometryType;return 0===f.length||null===a?null:"esriGeometryPolygon"===a?{rings:f}:{paths:f}};return h._createClass(k)}();l.CIMEffectHelper=q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/CIMSymbolHelper":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/BidiText ../../core/lang ../../core/Logger ../../core/RandomLCG ../../core/screenUtils ../../geometry/support/aaBoundingRect ../../geometry/support/boundsUtils ../../support/arcadeOnDemand ./CIMPlacements ./CIMSymbolDrawHelper ./enums ./utils ../../views/2d/arcade/callExpressionWithFeature ../../views/2d/engine/vectorTiles/GeometryUtils ../../views/2d/engine/webgl/definitions ../../views/2d/engine/webgl/mesh/templates/shapingUtils ../Font".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u){function x(W,S,Z){switch(S.type){case "CIMSymbolReference":return x(W,S.symbol,Z);case "CIMPointSymbol":null==Z&&(Z={x:0,y:0});W.drawSymbol(S,Z);break;case "CIMLineSymbol":null==Z&&(Z={paths:[[[0,0],[10,0]]]});W.drawSymbol(S,Z);break;case "CIMPolygonSymbol":null==Z&&(Z={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]});W.drawSymbol(S,Z);break;case "CIMTextSymbol":W.drawSymbol(S,{x:0,y:0});break;case "CIMVectorMarker":Z=new c.Placement,W.drawMarker(S,
Z)}return W.envelope()}function w(W){if(!W)return 0;switch(W.type){case "CIMMarkerPlacementAlongLineSameSize":return Math.abs(W.offset);case "CIMMarkerPlacementAlongLineRandomSize":return Math.abs(W.offset);case "CIMMarkerPlacementAtExtremities":return Math.abs(W.offset);case "CIMMarkerPlacementAtMeasuredUnits":return Math.abs(W.offset);case "CIMMarkerPlacementAtRatioPositions":return Math.abs(W.offset);case "CIMMarkerPlacementInsidePolygon":return 0;case "CIMMarkerPlacementOnLine":return Math.abs(W.offset);
case "CIMMarkerPlacementOnVertices":return Math.abs(W.offset);case "CIMMarkerPlacementPolygonCenter":return 0;default:return 0}}function m(W){if(!W)return 0;switch(W.type){case "CIMGeometricEffectArrow":return Math.abs(.5*W.width);case "CIMGeometricEffectBuffer":return Math.abs(W.size);case "CIMGeometricEffectExtension":return Math.abs(W.length);case "CIMGeometricEffectJog":return Math.abs(.5*W.length);case "CIMGeometricEffectMove":return Math.max(Math.abs(d.getValue(W.offsetX)),Math.abs(d.getValue(W.offsetY)));
case "CIMGeometricEffectOffset":return Math.abs(W.offset);case "CIMGeometricEffectOffsetTangent":return Math.abs(W.offset);case "CIMGeometricEffectRadial":return Math.abs(W.length);case "CIMGeometricEffectRegularPolygon":return Math.abs(W.radius);case "CIMGeometricEffectRotate":return 0;case "CIMGeometricEffectScale":return 0;case "CIMGeometricEffectTaperedPolygon":return.5*Math.max(Math.abs(W.fromWidth),Math.abs(W.toWidth));case "CIMGeometricEffectWave":return Math.abs(W.amplitude);case "CIMGeometricEffectDonut":return Math.abs(W.width);
default:return 0}}function z(W){if(!W)return 0;let S=0;for(const Z of W)S+=m(Z);return S}function A(W,S,Z){W.effects&&null==S.geometryEngine&&(S.geometryEnginePromise?Z.push(S.geometryEnginePromise):d.isGeometryEngineRequired(W.effects)&&(S.geometryEnginePromise=d.importGeometryEngine(),Z.push(S.geometryEnginePromise),S.geometryEnginePromise.then(ca=>S.geometryEngine=ca)))}function H(W){if(!W)return null;let S=null;const {cap:Z,color:ca,join:qa,miterLimit:ya,style:xa,width:Ca}=W;"solid"!==xa&&"none"!==
xa&&"esriSLSSolid"!==xa&&"esriSLSNull"!==xa&&(S=[{type:"CIMGeometricEffectDashes",dashTemplate:T(xa,Z),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);return{type:"CIMSolidStroke",color:"esriSLSNull"!==xa&&"none"!==xa?aa(ca):[0,0,0,0],capStyle:K(Z),joinStyle:P(qa),miterLimit:ya,width:Ca,effects:S}}const E=Math.PI,F=E/2,J=Math.PI/180,L=96/72,I=C.getLogger("esri.symbols.cim.CIMSymbolHelper");B=function(){function W(){}var S=W.prototype;S.getSymbolInflateSize=function(Z,ca,qa,ya,xa){Z||
(Z=[0,0,0,0]);return ca?this._getInflateSize(Z,ca,qa,ya,xa):Z};W.safeSize=function(Z){const ca=Math.max(Math.abs(Z[0]),Math.abs(Z[2]));Z=Math.max(Math.abs(Z[1]),Math.abs(Z[3]));return Math.sqrt(ca*ca+Z*Z)};S._vectorMarkerBounds=function(Z,ca,qa,ya){let xa=!0;const Ca=k.create();if(ca&&ca.markerGraphics)for(const Da of ca.markerGraphics)ca=[0,0,0,0],Da.geometry&&(e.getBoundsXY(Ca,Da.geometry),ca[0]=0,ca[1]=0,ca[2]=0,ca[3]=0,this.getSymbolInflateSize(ca,Da.symbol,qa,0,ya),Ca[0]+=ca[0],Ca[1]+=ca[1],
Ca[2]+=ca[2],Ca[3]+=ca[3],xa?(Z[0]=Ca[0],Z[1]=Ca[1],Z[2]=Ca[2],Z[3]=Ca[3],xa=!1):(Z[0]=Math.min(Z[0],Ca[0]),Z[1]=Math.min(Z[1],Ca[1]),Z[2]=Math.max(Z[2],Ca[2]),Z[3]=Math.max(Z[3],Ca[3])));return Z};S._getInflateSize=function(Z,ca,qa,ya,xa){return void 0!==ca.symbolLayers?(Z=this._getLayersInflateSize(Z,ca.symbolLayers,qa,ya,xa),ca=z(ca.effects),0<ca&&(Z[0]-=ca,Z[1]-=ca,Z[2]+=ca,Z[3]+=ca),Z):this._getTextInflatedSize(Z,ca,xa)};S._getLayersInflateSize=function(Z,ca,qa,ya,xa){let Ca=!0;if(!ca)return Z;
for(const na of ca)if(na){ca=[0,0,0,0];switch(na.type){case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":var Da=na,N=Da.width;null!=N&&(N=Da.capStyle===a.LineCapStyle.Square||Da.joinStyle===a.LineJoinStyle.Miter?N/1.4142135623730951:N/2,ca[0]=-N,ca[1]=-N,ca[2]=N,ca[3]=N);break;case "CIMCharacterMarker":case "CIMVectorMarker":case "CIMPictureMarker":Da=na;if("CIMVectorMarker"===na.type){if(N=na,ca=this._vectorMarkerBounds(ca,N,qa,xa),N.frame){var V=(N.frame.xmin+N.frame.xmax)/
2,ka=(N.frame.ymin+N.frame.ymax)/2;ca[0]-=V;ca[1]-=ka;ca[2]-=V;ca[3]-=ka;null!=N.size&&(N=N.size/(N.frame.ymax-N.frame.ymin),ca[0]*=N,ca[1]*=N,ca[2]*=N,ca[3]*=N)}}else"CIMPictureMarker"===na.type?(N=na,ka=qa.getResource(N.url),V=1,null!=ka&&ka.height&&(V=ka.width/ka.height),null!=Da.size&&(ca=Da.size/2,N=Da.size*V*N.scaleX/2,ca=[-N,-ca,N,ca])):null!=Da.size&&(ca=Da.size/2,ca=[-ca,-ca,ca,ca]);Da.anchorPoint&&("Absolute"===Da.anchorPointUnits?(N=Da.anchorPoint.x,V=Da.anchorPoint.y):(N=Da.anchorPoint.x*
(ca[2]-ca[0]),V=Da.anchorPoint.y*(ca[3]-ca[1])),ca[0]-=N,ca[1]-=V,ca[2]-=N,ca[3]-=V);N=d.getValue(Da.rotation);Da.rotateClockwise&&(N=-N);ya&&(N-=ya);N&&(V=J*N,N=Math.cos(V),V=Math.sin(V),ka=k.create([r.C_INFINITY,r.C_INFINITY,-r.C_INFINITY,-r.C_INFINITY]),k.expandPointInPlace(ka,[ca[0]*N-ca[1]*V,ca[0]*V+ca[1]*N]),k.expandPointInPlace(ka,[ca[0]*N-ca[3]*V,ca[0]*V+ca[3]*N]),k.expandPointInPlace(ka,[ca[2]*N-ca[1]*V,ca[2]*V+ca[1]*N]),k.expandPointInPlace(ka,[ca[2]*N-ca[3]*V,ca[2]*V+ca[3]*N]),ca=ka);N=
d.getValue(Da.offsetX);V=d.getValue(Da.offsetY);if(ya){var da=J*ya;ka=Math.cos(da);da=Math.sin(da);const X=N*da+V*ka;N=N*ka-V*da;V=X}ca[0]+=N;ca[1]+=V;ca[2]+=N;ca[3]+=V;Da=w(Da.markerPlacement);0<Da&&(ca[0]-=Da,ca[1]-=Da,ca[2]+=Da,ca[3]+=Da)}Da=z(na.effects);0<Da&&(ca[0]-=Da,ca[1]-=Da,ca[2]+=Da,ca[3]+=Da);Ca?(Z[0]=ca[0],Z[1]=ca[1],Z[2]=ca[2],Z[3]=ca[3],Ca=!1):(Z[0]=Math.min(Z[0],ca[0]),Z[1]=Math.min(Z[1],ca[1]),Z[2]=Math.max(Z[2],ca[2]),Z[3]=Math.max(Z[3],ca[3]))}return Z};S._getTextInflatedSize=
function(Z,ca,qa){const ya=ca.height??f.DEFAULT_TEXT_HEIGHT;Z[0]=-ya/2;Z[1]=-ya/2;Z[2]=ya/2;Z[3]=ya/2;if(!qa)return Z;qa=qa.get(ca);if(!qa)return Z;const {text:xa,mosaicItem:Ca}=qa;if(!Ca?.glyphMosaicItems?.length)return Z;const {lineGapType:Da,lineGap:N}=ca;qa=Da?f.lineGapType2LineHeight(Da,N??0,ya):0;const V=y.bidiText(xa)[1],ka="CIMBackgroundCallout"===ca.callout?.type;ca=g.shapeGlyphs(Ca.glyphMosaicItems,V,{scale:ya/p.GLYPH_SIZE,angle:d.getValue(ca.angle),xOffset:d.getValue(ca.offsetX),yOffset:d.getValue(ca.offsetY),
hAlign:f.horizontalAlignment2HAlign(ca.horizontalAlignment),vAlign:f.verticalAlignment2VAlign(ca.verticalAlignment),maxLineWidth:512,lineHeight:p.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(qa||1,4)),decoration:ca.font.decoration||"none",isCIM:!0,hasBackground:ka}).boundsT;Z[0]=ca.x-ca.halfWidth;Z[1]=-ca.y-ca.halfHeight;Z[2]=ca.x+ca.halfWidth;Z[3]=-ca.y+ca.halfHeight;return Z};return h._createClass(W)}();let G=function(){function W(){}W.getEnvelope=function(S,Z,ca){if(!S)return null;ca=new f.EnvDrawHelper(ca);
if(Array.isArray(S)){let qa;for(const ya of S)qa?qa.union(x(ca,ya,Z)):qa=x(ca,ya,Z);return qa}return x(ca,S,Z)};W.getTextureAnchor=function(S,Z){S=this.getEnvelope(S,null,Z);if(!S)return[0,0,0];Z=S.height*L+2;return[-((S.x+.5*S.width)*L)/(S.width*L+2),-((S.y+.5*S.height)*L)/Z,Z]};W.rasterize=function(S,Z,ca,qa,ya=!0){var xa=ca||this.getEnvelope(Z,null,qa);if(!xa)return[null,0,0,0,0];const Ca=(xa.x+.5*xa.width)*L,Da=(xa.y+.5*xa.height)*L;S.width=xa.width*L;S.height=xa.height*L;ca||(S.width+=2,S.height+=
2);ca=S.getContext("2d");xa=f.Transformation.createScale(L,-L);xa.translate(.5*S.width-Ca,.5*S.height+Da);qa=new f.CanvasDrawHelper(ca,qa,xa);switch(Z.type){case "CIMPointSymbol":qa.drawSymbol(Z,{type:"point",x:0,y:0});break;case "CIMVectorMarker":xa=new c.Placement,qa.drawMarker(Z,xa)}Z=ca.getImageData(0,0,S.width,S.height);Z=new Uint8Array(Z.data);if(ya)for(qa=0;qa<Z.length;qa+=4)ya=Z[qa+3]/255,Z[qa]*=ya,Z[qa+1]*=ya,Z[qa+2]*=ya;return[Z,S.width,S.height,-Ca/S.width,-Da/S.height]};W.fromTextSymbol=
function(S){const {angle:Z,color:ca,font:qa,haloColor:ya,haloSize:xa,horizontalAlignment:Ca,kerning:Da,text:N,verticalAlignment:V,xoffset:ka,yoffset:da,backgroundColor:na,borderLineColor:X,borderLineSize:fa}=S;let ja,ma,ra;if(qa){var va=qa.family;var za=qa.style;var Ea=qa.weight;ja=qa.size;ma=qa.decoration}S=!1;N&&(S=y.bidiText(N)[1]);if(na||fa)ra={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:aa(na)},{type:"CIMSolidStroke",
color:aa(X),width:fa}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null};var Ga=a.BlockProgression.BTT,Na=a.FontEffects.Normal,Ka=a.FontEncoding.Unicode;va=va||"Arial";b:{if(Ea)switch(Ea.toLowerCase()){case "bold":case "bolder":Ea="bold";break b}Ea=""}b:{if(za)switch(za.toLowerCase()){case "italic":case "oblique":za="italic";break b}za=""}Ea=Ea&&za?`${Ea}-${za}`:`${Ea}${za}`;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",
dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMTextSymbol",angle:Z,blockProgression:Ga,depth3D:1,extrapolateBaselines:!0,fontEffects:Na,fontEncoding:Ka,fontFamilyName:va,fontStyleName:Ea,fontType:a.FontType.Unspecified,haloSize:xa,height:ja,hinting:a.GlyphHinting.Default,horizontalAlignment:Y(Ca??"center"),kerning:Da,letterWidth:100,ligatures:!0,lineGapType:"Multiple",
offsetX:d.getValue(ka),offsetY:d.getValue(da),strikethrough:"line-through"===ma,underline:"underline"===ma,symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:aa(ca)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:aa(ya)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:S?a.TextReadingDirection.RTL:a.TextReadingDirection.LTR,verticalAlignment:ea(V??"baseline"),verticalGlyphOrientation:a.VerticalGlyphOrientation.Right,
wordSpacing:100,billboardMode3D:a.BillBoardMode.FaceNearPlane,callout:ra},textString:N}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}};W.fromPictureFillSymbol=function(S){const {height:Z,outline:ca,width:qa,xoffset:ya,xscale:xa,yoffset:Ca,yscale:Da}=S,N=[],V={type:"CIMPolygonSymbol",symbolLayers:N};if(ca){var ka=H(ca);ka&&N.push(ka)}ka=S.url;"esriPFS"===S.type&&S.imageData&&(ka=S.imageData);S="angle"in S?S.angle??0:0;N.push({type:"CIMPictureFill",invertBackfaceTexture:!1,
scaleX:1,textureFilter:a.TextureFilter.Picture,tintColor:null,url:ka,height:(Z??0)*(Da||1),width:(qa??0)*(xa||1),offsetX:d.getValue(ya),offsetY:d.getValue(Ca),rotation:d.getValue(-S),colorSubstitutions:null});return V};W.fromSimpleFillSymbol=function(S){const {color:Z,style:ca,outline:qa}=S;S=[];const ya={type:"CIMPolygonSymbol",symbolLayers:S};if(qa){var xa=H(qa);xa&&S.push(xa)}if(ca&&"solid"!==ca&&"none"!==ca&&"esriSFSSolid"!==ca&&"esriSFSNull"!==ca){xa={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",
color:aa(Z),capStyle:a.LineCapStyle.Butt,joinStyle:a.LineJoinStyle.Miter,width:.75}]};let Ca=0;const Da=q.px2pt("vertical"===ca||"horizontal"===ca||"cross"===ca||"esriSFSCross"===ca||"esriSFSVertical"===ca||"esriSFSHorizontal"===ca?8:10);switch(ca){case "vertical":case "esriSFSVertical":Ca=90;break;case "forward-diagonal":case "esriSFSForwardDiagonal":Ca=-45;break;case "backward-diagonal":case "esriSFSBackwardDiagonal":Ca=45;break;case "cross":case "esriSFSCross":Ca=0;break;case "diagonal-cross":case "esriSFSDiagonalCross":Ca=
-45}S.push({type:"CIMHatchFill",lineSymbol:xa,offsetX:0,offsetY:0,rotation:Ca,separation:Da});"cross"===ca||"esriSFSCross"===ca?S.push({type:"CIMHatchFill",lineSymbol:v.clone(xa),offsetX:0,offsetY:0,rotation:90,separation:Da}):("diagonal-cross"===ca||"esriSFSDiagonalCross"===ca)&&S.push({type:"CIMHatchFill",lineSymbol:v.clone(xa),offsetX:0,offsetY:0,rotation:45,separation:Da})}else!ca||"solid"!==ca&&"esriSFSSolid"!==ca||S.push({type:"CIMSolidFill",enable:!0,color:aa(Z)});return ya};W.fromSimpleLineSymbol=
function(S){const {cap:Z,color:ca,join:qa,marker:ya,miterLimit:xa,style:Ca,width:Da}=S;S=null;"solid"!==Ca&&"none"!==Ca&&"esriSLSSolid"!==Ca&&"esriSLSNull"!==Ca&&(S=[{type:"CIMGeometricEffectDashes",dashTemplate:T(Ca,Z),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const N=[];if(ya){let V;switch(ya.placement){case "begin-end":V=a.ExtremityPlacement.Both;break;case "begin":V=a.ExtremityPlacement.JustBegin;break;case "end":V=a.ExtremityPlacement.JustEnd;break;default:V=a.ExtremityPlacement.None}const ka=
W.fromSimpleMarker(ya,Da,ca).symbolLayers[0];ka.markerPlacement={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:V,offsetAlongLine:0};N.push(ka)}N.push({type:"CIMSolidStroke",color:"none"!==Ca&&"esriSLSNull"!==Ca?aa(ca):[0,0,0,0],capStyle:K(Z),joinStyle:P(qa),miterLimit:xa,width:Da,effects:S});return{type:"CIMLineSymbol",symbolLayers:N}};W.fromPictureMarker=function(S){const {angle:Z,height:ca,width:qa,xoffset:ya,yoffset:xa}=S;let Ca=S.url;"esriPMS"===S.type&&S.imageData&&
(Ca=S.imageData);return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:a.TextureFilter.Picture,tintColor:null,url:Ca,size:ca,width:qa,offsetX:d.getValue(ya),offsetY:d.getValue(xa),rotation:d.getValue(-Z)}]}};W.fromSimpleMarker=function(S,Z,ca){var {style:qa}=S;ca=S.color??ca;if("path"===qa){Z=[];"outline"in S&&S.outline&&(qa=S.outline,Z.push({type:"CIMSolidStroke",enable:!0,width:q.pt2px(Math.round(q.px2pt(qa.width))),color:aa(qa.color)}));
Z.push({type:"CIMSolidFill",enable:!0,color:aa(ca),path:S.path});const [Da,N]=R("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:d.getValue(-S.angle),size:d.getValue(S.size||6),offsetX:d.getValue(S.xoffset),offsetY:d.getValue(S.yoffset),frame:Da,markerGraphics:[{type:"CIMMarkerGraphic",geometry:N,symbol:{type:"CIMPolygonSymbol",symbolLayers:Z}}]}]}}const [ya,xa]=R(qa);if(xa&&ya){qa=[];if("outline"in S&&S.outline){var Ca=S.outline;qa.push({type:"CIMSolidStroke",
enable:!0,width:null!=Ca.width&&.667<Ca.width?q.pt2px(Math.round(q.px2pt(Ca.width))):Ca.width,color:aa(Ca.color)})}else!Z||"line-marker"!==S.type||"cross"!==S.style&&"x"!==S.style||qa.push({type:"CIMSolidStroke",enable:!0,width:Z,color:aa(ca)});qa.push({type:"CIMSolidFill",enable:!0,color:aa(ca)});ca={type:"CIMPolygonSymbol",symbolLayers:qa};Ca={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:d.getValue(-S.angle),size:d.getValue(S.size||6*Z),offsetX:d.getValue(S.xoffset),
offsetY:d.getValue(S.yoffset),frame:ya,markerGraphics:[{type:"CIMMarkerGraphic",geometry:xa,symbol:ca}]}]}}return Ca};W.fromCIMHatchFill=function(S,Z){const ca=Z*(S.separation??f.DEFAULT_HATCH_FILL_SEPARATION),qa=ca/2;S=v.clone(S.lineSymbol);S.symbolLayers?.forEach(xa=>{switch(xa.type){case "CIMSolidStroke":null!=xa.width&&(xa.width*=Z);xa.effects?.forEach(Ca=>{"CIMGeometricEffectDashes"===Ca.type&&(Ca.dashTemplate=Ca.dashTemplate.map(Da=>Da*Z))});break;case "CIMVectorMarker":null!=xa.size&&(xa.size*=
Z),xa=xa.markerPlacement,null!=xa&&"placementTemplate"in xa&&(xa.placementTemplate=xa.placementTemplate.map(Ca=>Ca*Z))}});for(var ya=this._getLineSymbolPeriod(S)||4;4>ya;)ya*=2;ya/=2;return{type:"CIMVectorMarker",frame:{xmin:-ya,xmax:ya,ymin:-qa,ymax:qa},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-ya,0],[ya,0]]]},symbol:S}],size:ca}};W.fetchResources=function(S,Z,ca){if(S&&Z)switch(S.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(S=S.symbolLayers)for(const qa of S)switch(A(qa,
Z,ca),qa.type){case "CIMPictureFill":case "CIMHatchFill":case "CIMGradientFill":case "CIMPictureStroke":case "CIMGradientStroke":case "CIMCharacterMarker":case "CIMPictureMarker":"url"in qa&&qa.url&&ca.push(Z.fetchResource(qa.url,null));break;case "CIMVectorMarker":if(S=qa.markerGraphics)for(const ya of S)ya&&(S=ya.symbol)&&W.fetchResources(S,Z,ca)}}};W.fetchFonts=function(S,Z,ca){if(S&&Z)if("symbolLayers"in S&&S.symbolLayers)for(const xa of S.symbolLayers){if("CIMVectorMarker"===xa.type&&xa.markerGraphics)for(const Ca of xa.markerGraphics)Ca?.symbol&&
W.fetchFonts(Ca.symbol,Z,ca)}else if("CIMTextSymbol"===S.type){const {fontFamilyName:xa,fontStyleName:Ca}=S;if(xa&&"calcitewebcoreicons"!==xa.toLowerCase()){var {style:qa,weight:ya}=d.fromCIMFontStyle(Ca);S=d.fromCIMFontDecoration(S);S=new u({family:xa,style:qa,weight:ya,decoration:S});ca.push(Z.loadFont(S).catch(()=>{I.error(`Unsupported font ${xa} in CIM symbol`)}))}}};W._getLineSymbolPeriod=function(S){if(S){const Z=this._getEffectsRepeat(S.effects);if(Z)return Z;if(S.symbolLayers)for(const ca of S.symbolLayers)if(ca){if(S=
this._getEffectsRepeat(ca.effects))return S;switch(ca.type){case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":case "CIMObjectMarker3D":case "CIMglTFMarker3D":if(S=this._getPlacementRepeat(ca.markerPlacement))return S}}}return 0};W._getEffectsRepeat=function(S){if(S)for(var Z of S)if(Z)switch(Z.type){case "CIMGeometricEffectDashes":if((S=Z.dashTemplate)&&S.length){Z=0;for(const ca of S)Z+=ca;S.length&1&&(Z*=2);return Z}break;case "CIMGeometricEffectWave":return Z.period;default:I.error(`unsupported geometric effect type ${Z.type}`)}return 0};
W._getPlacementRepeat=function(S){if(S)switch(S.type){case "CIMMarkerPlacementAlongLineSameSize":case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineVariableSize":if((S=S.placementTemplate)&&S.length){let Z=0;for(const ca of S)Z+=+ca;S.length&1&&(Z*=2);return Z}}return 0};W.fromCIMInsidePolygon=function(S){var Z=S.markerPlacement;const ca={...S,markerPlacement:null,anchorPoint:null};S=Math.abs(Z.stepX);const qa=Math.abs(Z.stepY);var ya=(Z.randomness??100)/100;let xa,Ca;if("Random"===
Z.gridType){var Da=q.px2pt(p.RANDOM_INSIDE_POLYGON_TEXTURE_SIZE);const N=Math.max(Math.floor(Da/S),1),V=Math.max(Math.floor(Da/qa),1);Da=N*S/2;xa=V*qa/2;Ca=2*xa;Z=new t(Z.seed);const ka=ya*S/1.5,da=ya*qa/1.5;ya=[];for(let na=0;na<N;na++)for(let X=0;X<V;X++){const fa=na*S-Da+ka*(.5-Z.getFloat()),ja=X*qa-xa+da*(.5-Z.getFloat());ya.push({x:fa,y:ja});0===na&&ya.push({x:fa+2*Da,y:ja});0===X&&ya.push({x:fa,y:ja+2*xa})}}else!0===Z.shiftOddRows?(Da=S/2,xa=qa,Ca=2*qa,ya=[{x:-Da,y:0},{x:Da,y:0},{x:0,y:xa},
{x:0,y:-xa}]):(Da=S/2,xa=qa/2,Ca=qa,ya=[{x:-S,y:0},{x:0,y:-qa},{x:-S,y:-qa},{x:0,y:0},{x:S,y:0},{x:0,y:qa},{x:S,y:qa},{x:-S,y:qa},{x:S,y:-qa}]);S=ya.map(N=>({type:"CIMMarkerGraphic",geometry:N,symbol:{type:"CIMPointSymbol",symbolLayers:[ca]}}));return{type:"CIMVectorMarker",frame:{xmin:-Da,xmax:Da,ymin:-xa,ymax:xa},markerGraphics:S,size:Ca}};W.getSize=function(S){if(S)switch(S.type){case "CIMTextSymbol":return S.height;case "CIMPointSymbol":var Z=0;if(S.symbolLayers)for(var ca of S.symbolLayers)if(ca)switch(ca.type){case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":case "CIMObjectMarker3D":case "CIMglTFMarker3D":S=
ca.size,null!=S&&S>Z&&(Z=S)}return Z;case "CIMLineSymbol":case "CIMPolygonSymbol":ca=0;if(S.symbolLayers)for(Z of S.symbolLayers)if(Z)switch(Z.type){case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":S=Z.width;null!=S&&S>ca&&(ca=S);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":case "CIMObjectMarker3D":case "CIMglTFMarker3D":Z.markerPlacement&&d.isCIMMarkerStrokePlacement(Z.markerPlacement)&&(S=Z.size,null!=S&&S>ca&&(ca=S))}return ca}};W.getMarkerScaleRatio=
function(S){if(S)switch(S.type){case "CIMVectorMarker":if(!1!==S.scaleSymbolsProportionally&&S.frame&&null!=S.size)return S.size/(S.frame.ymax-S.frame.ymin)}return 1};return h._createClass(W)}();C=function(){function W(){}W.findApplicableOverrides=function(S,Z,ca){if(S&&Z){if(S.primitiveName){let qa=!1;for(const ya of ca)if(ya.primitiveName===S.primitiveName){qa=!0;break}if(!qa)for(const ya of Z)ya.primitiveName===S.primitiveName&&ca.push(ya)}switch(S.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(S.effects)for(const qa of S.effects)W.findApplicableOverrides(qa,
Z,ca);if(S.symbolLayers)for(const qa of S.symbolLayers)W.findApplicableOverrides(qa,Z,ca);break;case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":case "CIMSolidFill":case "CIMPictureFill":case "CIMHatchFill":case "CIMGradientFill":case "CIMVectorMarker":case "CIMCharacterMarker":case "CIMPictureMarker":if(S.effects)for(const qa of S.effects)W.findApplicableOverrides(qa,Z,ca);S.markerPlacement&&W.findApplicableOverrides(S.markerPlacement,Z,ca);if("CIMVectorMarker"===S.type){if(S.markerGraphics)for(const qa of S.markerGraphics)W.findApplicableOverrides(qa,
Z,ca),W.findApplicableOverrides(qa.symbol,Z,ca)}else"CIMCharacterMarker"===S.type?W.findApplicableOverrides(S.symbol,Z,ca):"CIMHatchFill"===S.type?W.findApplicableOverrides(S.lineSymbol,Z,ca):"CIMPictureMarker"===S.type&&W.findApplicableOverrides(S.animatedSymbolProperties,Z,ca)}}};W.findEffectOverrides=function(S,Z,ca){if(Z&&S){var qa=S.length;for(let ya=0;ya<qa;ya++){const xa=S[ya]?.primitiveName;if(xa){let Ca=!1;for(const Da of ca)if(Da.primitiveName===xa){Ca=!0;break}if(!Ca)for(const Da of Z)Da.primitiveName===
xa&&ca.push(Da)}}}};W.resolveSymbolOverrides=async function(S,Z,ca,qa,ya,xa,Ca){if(!S||!S.symbol)return null;let {symbol:Da,primitiveOverrides:N}=S;S=!!N;if(!S&&!qa)return Da;Da=v.clone(Da);let V=!0;Z||(Z={attributes:{}},V=!1);S&&(V||(N=N.filter(ka=>!ka.valueExpressionInfo?.expression.includes("$feature"))),Ca||(N=N.filter(ka=>!ka.valueExpressionInfo?.expression.includes("$view"))),0<N.length&&(S=d.attributesToFields(Z.attributes),await W.evaluateOverrides(N,Z,{spatialReference:ca,fields:S,geometryType:ya},
xa,Ca)),W.applyOverrides(Da,N));qa&&W.applyDictionaryTextOverrides(Da,Z,qa);return Da};W.evaluateOverrides=async function(S,Z,ca,qa,ya){if(Z){var xa;for(const Ca of S)(S=Ca.valueExpressionInfo)&&ca&&ca.geometryType&&(xa||(xa=[]),Ca.value=void 0,S=b.createRendererExpression(S.expression,ca.spatialReference,ca.fields).then(Da=>{Ca.value=n(Da,Z,{$view:ya},ca.geometryType,qa)}),xa.push(S));void 0!==xa&&0<xa.length&&await Promise.all(xa)}};W.applyDictionaryTextOverrides=function(S,Z,ca,qa="Normal"){if(S&&
S.type)switch(S.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":case "CIMTextSymbol":var ya=S.symbolLayers;if(!ya)break;for(var xa of ya)xa&&"CIMVectorMarker"===xa.type&&W.applyDictionaryTextOverrides(xa,Z,ca,"CIMTextSymbol"===S.type?S.textCase:qa);break;case "CIMVectorMarker":S=S.markerGraphics;if(!S)break;for(ya of S)ya&&W.applyDictionaryTextOverrides(ya,Z,ca);break;case "CIMMarkerGraphic":(xa=S.textString)&&xa.includes("[")&&(ca=d.analyzeTextParts(xa,ca),S.textString=d.assignTextValuesFromFeature(Z,
ca,qa))}};W.applyOverrides=function(S,Z,ca,qa){if(S.primitiveName)for(const xa of Z)if(xa.primitiveName===S.primitiveName){var ya=(ya=xa.propertyName)?ya.charAt(0).toLowerCase()+ya.substr(1):ya;qa&&qa.push({cim:S,nocapPropertyName:ya,value:S[ya]});xa.expression&&(xa.value=W.toValue(xa.propertyName,xa.expression));if(ca){let Ca=!1;for(const Da of ca)Da.primitiveName===S.primitiveName&&(Ca=!0);Ca||ca.push(xa)}null!=xa.value&&(S[ya]=xa.value)}switch(S.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(S.effects)for(const xa of S.effects)W.applyOverrides(xa,
Z,ca,qa);if(S.symbolLayers)for(const xa of S.symbolLayers)W.applyOverrides(xa,Z,ca,qa);break;case "CIMSolidStroke":case "CIMSolidFill":case "CIMVectorMarker":if(S.effects)for(const xa of S.effects)W.applyOverrides(xa,Z,ca,qa);if("CIMVectorMarker"===S.type&&S.markerGraphics)for(const xa of S.markerGraphics)W.applyOverrides(xa,Z,ca,qa),W.applyOverrides(xa.symbol,Z,ca,qa)}};W.restoreOverrides=function(S){for(const Z of S)Z.cim[Z.nocapPropertyName]=Z.value};W.buildOverrideKey=function(S){let Z="";for(const ca of S)void 0!==
ca.value&&(Z+=`${ca.primitiveName}${ca.propertyName}${JSON.stringify(ca.value)}`);return Z};W.toValue=function(S,Z){return"DashTemplate"===S?Z.split(" ").map(ca=>Number(ca)):"Color"===S?(S=(new D(Z)).toRgba(),S[3]*=255,S):Z};return h._createClass(W)}();const K=W=>{if(!W)return a.LineCapStyle.Butt;switch(W){case "butt":return a.LineCapStyle.Butt;case "square":return a.LineCapStyle.Square;case "round":return a.LineCapStyle.Round}},P=W=>{if(!W)return a.LineJoinStyle.Miter;switch(W){case "miter":return a.LineJoinStyle.Miter;
case "round":return a.LineJoinStyle.Round;case "bevel":return a.LineJoinStyle.Bevel}},Y=W=>{if(null==W)return"Center";switch(W){case "left":return"Left";case "right":return"Right";case "center":return"Center"}},ea=W=>{if(null==W)return"Center";switch(W){case "baseline":return"Baseline";case "top":return"Top";case "middle":return"Center";case "bottom":return"Bottom"}},aa=W=>{if(!W)return[0,0,0,0];const {r:S,g:Z,b:ca,a:qa}=W;return[S,Z,ca,255*qa]},T=(W,S)=>{S="butt"===S;switch(W){case "dash":case "esriSLSDash":return S?
[4,3]:[3,4];case "dash-dot":case "esriSLSDashDot":return S?[4,3,1,3]:[3,4,0,4];case "dot":case "esriSLSDot":return S?[1,3]:[0,4];case "long-dash":case "esriSLSLongDash":return S?[8,3]:[7,4];case "long-dash-dot":case "esriSLSLongDashDot":return S?[8,3,1,3]:[7,4,0,4];case "long-dash-dot-dot":case "esriSLSDashDotDot":return S?[8,3,1,3,1,3]:[7,4,0,4,0,4];case "short-dash":case "esriSLSShortDash":return S?[4,1]:[3,2];case "short-dash-dot":case "esriSLSShortDashDot":return S?[4,1,1,1]:[3,2,0,2];case "short-dash-dot-dot":case "esriSLSShortDashDotDot":return S?
[4,1,1,1,1,1]:[3,2,0,2,0,2];case "short-dot":case "esriSLSShortDot":return S?[1,1]:[0,2];case "solid":case "esriSLSSolid":case "none":return I.error("Unexpected: style does not require rasterization"),[0,0];default:return I.error(`Tried to rasterize SLS, but found an unexpected style: ${W}!`),[0,0]}},R=W=>{if("circle"===W||"esriSMSCircle"===W){var S=Math.acos(.995);W=Math.ceil(E/S/4);0===W&&(W=1);S=F/W;W*=4;var Z=[];Z.push([50,0]);for(let ca=1;ca<W;ca++)Z.push([50*Math.cos(ca*S),-50*Math.sin(ca*S)]);
Z.push([50,0]);S={rings:[Z]};Z={xmin:-50,ymin:-50,xmax:50,ymax:50}}else"cross"===W||"esriSMSCross"===W?(S={rings:[[[0,50],[0,0],[50,0],[50,-0],[0,-0],[0,-50],[-0,-50],[-0,-0],[-50,-0],[-50,0],[-0,0],[-0,50],[0,50]]]},Z={xmin:-50,ymin:-50,xmax:50,ymax:50}):"diamond"===W||"esriSMSDiamond"===W?(S={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},Z={xmin:-50,ymin:-50,xmax:50,ymax:50}):"square"===W||"esriSMSSquare"===W?(S={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},Z={xmin:-50,ymin:-50,xmax:50,
ymax:50}):"x"===W||"esriSMSX"===W?(S={rings:[[[0,0],[50,50],[50,50],[0,0],[50,-50],[50,-50],[0,-0],[-50,-50],[-50,-50],[-0,0],[-50,50],[-50,50],[0,0]]]},Z={xmin:-50,ymin:-50,xmax:50,ymax:50}):"triangle"===W||"esriSMSTriangle"===W?(W=2/3*100,Z=W-100,S={rings:[[[-57.735026918962575,Z],[0,W],[57.735026918962575,Z],[-57.735026918962575,Z]]]},Z={xmin:-57.735026918962575,ymin:Z,xmax:57.735026918962575,ymax:W}):"arrow"===W&&(S={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},Z={xmin:-50,
ymin:-50,xmax:50,ymax:50});return[Z,S]};l.CIMSymbolHelper=G;l.CIMSymbolInflatedSizeHelper=B;l.OverrideHelper=C;l.getEffectsInflateSize=z;l.slsDashToTemplateArray=T;l.symbolToCIM=function(W){if(!W||!W.type)return null;let S;switch(W.type){case "cim":return W.data;case "web-style":return W;case "simple-marker":W=G.fromSimpleMarker(W);if(!W)return null;S=W;break;case "picture-marker":S=G.fromPictureMarker(W);break;case "simple-line":S=G.fromSimpleLineSymbol(W);break;case "simple-fill":S=G.fromSimpleFillSymbol(W);
break;case "picture-fill":S=G.fromPictureFillSymbol(W);break;case "text":S=G.fromTextSymbol(W)}return{type:"CIMSymbolReference",symbol:S}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols":function(){define("exports ./core/accessorSupport/ensureType ./core/accessorSupport/extensions/serializableProperty/reader ./symbols/CIMSymbol ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WaterSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./chunks/LineCallout3DBorder".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x,w,m,z,A,H,E,F,J,L,I){const G={base:m,key:"type",typeMap:{"simple-fill":u,"picture-fill":n,"picture-marker":r,"simple-line":x,"simple-marker":w,text:H,"label-3d":k,"line-3d":e,"mesh-3d":f,"point-3d":p,"polygon-3d":g,"web-style":J,cim:B},errorContext:"symbol"},K={base:m,key:"type",typeMap:{"picture-marker":r,"simple-marker":w,text:H,"web-style":J,cim:B},errorContext:"symbol"};D=D.createTypeReader({types:G});const P={base:m,key:"type",typeMap:{"simple-fill":u,
"picture-fill":n,"picture-marker":r,"simple-line":x,"simple-marker":w,text:H,"line-3d":e,"mesh-3d":f,"point-3d":p,"polygon-3d":g,"web-style":J,cim:B},errorContext:"symbol"},Y={base:m,key:"type",typeMap:{text:H,"label-3d":k},errorContext:"symbol"},ea={base:m,key:"type",typeMap:{"label-3d":k,"line-3d":e,"mesh-3d":f,"point-3d":p,"polygon-3d":g,"web-style":J},errorContext:"symbol"},aa={base:m,key:"type",typeMap:{"line-3d":e,"mesh-3d":f,"point-3d":p,"polygon-3d":g,"web-style":J,cim:B},errorContext:"symbol"},
T={base:m,key:"type",typeMap:{"label-3d":k},errorContext:"symbol"};h=h.ensureOneOfType(G);l.CIMSymbol=B;l.ExtrudeSymbol3DLayer=y;l.BaseFillSymbol=v;l.FillSymbol3DLayer=C;l.Font=t;l.IconSymbol3DLayer=q;l.LabelSymbol3D=k;l.LineSymbol3D=e;l.LineSymbol3DLayer=b;l.BaseMarkerSymbol=c;l.MeshSymbol3D=f;l.ObjectSymbol3DLayer=a;l.PathSymbol3DLayer=d;l.PictureFillSymbol=n;l.PictureMarkerSymbol=r;l.PointSymbol3D=p;l.PolygonSymbol3D=g;l.SimpleFillSymbol=u;l.SimpleLineSymbol=x;l.SimpleMarkerSymbol=w;l.BaseSymbol=
m;l.BaseSymbol3D=z;l.BaseSymbol3DLayer=A;l.TextSymbol=H;l.TextSymbol3DLayer=E;l.WaterSymbol3DLayer=F;l.WebStyleSymbol=J;l.LineCallout3D=L;l.LineCallout3DBorder=I.LineCallout3DBorder;l.ensureType=h;l.isSymbol=function(R){return R instanceof m};l.isSymbol2D=function(R){if(!R)return!1;switch(R.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":case "cim":return!0;default:return!1}};l.isSymbol3D=function(R){if(!R)return!1;switch(R.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;
default:return!1}};l.readSymbol=D;l.symbolTypes=G;l.symbolTypes3D=ea;l.symbolTypesCluster=K;l.symbolTypesLabel=Y;l.symbolTypesLabel3D=T;l.symbolTypesRenderer=P;l.symbolTypesRenderer3D=aa;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/CIMSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/string ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../layers/support/fieldUtils ./Symbol".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){var c;v=c=function(f){function a(n){n=f.call(this,n)||this;n.data=null;n.type="cim";return n}l._inherits(a,f);var d=a.prototype;d.readData=function(n,r){return r};d.writeData=function(n,r){Object.assign(r,n)};d.collectRequiredFields=async function(n,r){if("CIMSymbolReference"===this.data?.type){var p=this.data.primitiveOverrides;p&&(p=p.map(g=>e.collectArcadeFieldNames(n,r,g.valueExpressionInfo.expression)),await Promise.all(p))}};d.clone=function(){return new c({data:D.clone(this.data)})};
d.hash=function(){return B.numericHash(JSON.stringify(this.data)).toString()};return l._createClass(a)}(b);h.__decorate([y.property({json:{write:!1}})],v.prototype,"color",void 0);h.__decorate([y.property({json:{write:!0}})],v.prototype,"data",void 0);h.__decorate([t.reader("data",["symbol"])],v.prototype,"readData",null);h.__decorate([k.writer("data",{})],v.prototype,"writeData",null);h.__decorate([C.enumeration({CIMSymbolReference:"cim"},{readOnly:!0})],v.prototype,"type",void 0);return v=c=h.__decorate([q.subclass("esri.symbols.CIMSymbol")],
v)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),function(l,h,D,B,y,v,C,t,q,k,e){B=new B.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",
esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let b=0;y=function(c){function f(d){d=c.call(this,d)||this;d.id=`sym${b++}`;d.type=null;d.color=new D([0,0,0,1]);return d}l._inherits(f,c);var a=f.prototype;a.readColor=function(d){return d&&null!=d[0]?[d[0],d[1],d[2],d[3]/255]:d};a.collectRequiredFields=async function(d,n){};a.hash=
function(){return JSON.stringify(this.toJSON())};a.clone=function(){};return l._createClass(f)}(y.JSONSupport);h.__decorate([v.property({type:B.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:B.write}}})],y.prototype,"type",void 0);h.__decorate([v.property({type:D,json:{write:{allowNull:!0}}})],y.prototype,"color",void 0);h.__decorate([k.reader("color")],y.prototype,"readColor",null);return y=h.__decorate([e.subclass("esri.symbols.Symbol")],y)})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./edges/utils ./support/Symbol3DMaterial".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){var b;B=b=function(c){function f(a){a=c.call(this,a)||this;a.type="extrude";a.size=1;a.material=null;a.castShadows=!0;a.edges=null;return a}l._inherits(f,c);f.prototype.clone=function(){return new b({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:null!=this.material?this.material.clone():null,castShadows:this.castShadows,size:this.size})};return l._createClass(f)}(q);h.__decorate([C.enumeration({Extrude:"extrude"},{readOnly:!0})],B.prototype,"type",
void 0);h.__decorate([D.property({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],B.prototype,"size",void 0);h.__decorate([D.property({type:e.Symbol3DMaterial,json:{write:!0}})],B.prototype,"material",void 0);h.__decorate([D.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],B.prototype,"castShadows",void 0);h.__decorate([D.property(k.symbol3dEdgesProperty)],B.prototype,"edges",void 0);return B=b=h.__decorate([t.subclass("esri.symbols.ExtrudeSymbol3DLayer")],
B)})},"esri/symbols/Symbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),function(l,h,D,B,y,v,C,t,q){D=function(k){function e(b){b=k.call(this,b)||this;b.enabled=!0;b.type=null;b.ignoreDrivers=!1;return b}l._inherits(e,k);e.prototype.writeEnabled=
function(b,c,f){b||(c[f]=b)};return l._createClass(e)}(D.JSONSupport);h.__decorate([B.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],D.prototype,"enabled",void 0);h.__decorate([q.writer("enabled")],D.prototype,"writeEnabled",null);h.__decorate([B.property({type:"icon object line path fill water extrude text".split(" "),readOnly:!0})],D.prototype,"type",void 0);return D=h.__decorate([t.subclass("esri.symbols.Symbol3DLayer")],D)})},"esri/symbols/edges/utils":function(){define(["exports",
"./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(l,h,D,B){l.symbol3dEdgesProperty={types:{key:"type",base:h,typeMap:{solid:B,sketch:D}},json:{write:!0}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/edges/Edges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/materialUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k){B=function(e){function b(f){f=e.call(this,f)||this;f.color=new D([0,0,0,1]);f.extensionLength=0;f.size=v.px2pt(1);return f}l._inherits(b,e);var c=b.prototype;c.clone=function(){};c.cloneProperties=function(){return{color:y.clone(this.color),size:this.size,extensionLength:this.extensionLength}};return l._createClass(b)}(B.JSONSupport);h.__decorate([C.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],B.prototype,"type",void 0);h.__decorate([C.property(k.colorAndTransparencyProperty)],
B.prototype,"color",void 0);h.__decorate([C.property({...k.screenSizeProperty,json:{write:{overridePolicy(e){return{enabled:!!e}}}}})],B.prototype,"extensionLength",void 0);h.__decorate([C.property(k.screenSizeProperty)],B.prototype,"size",void 0);return B=h.__decorate([q.subclass("esri.symbols.edges.Edges3D")],B)})},"esri/symbols/support/materialUtils":function(){define(["exports","../../Color","../../core/screenUtils","../../core/accessorSupport/ensureType","../../webdoc/support/opacityUtils"],
function(l,h,D,B,y){D={type:Number,cast:D.toPt,json:{write:!0}};l.colorAndTransparencyProperty={type:h,json:{type:[B.Integer],default:null,read:{source:["color","transparency"],reader:function(v,C){v=null!=C.transparency?y.transparencyToOpacity(C.transparency):1;return(C=C.color)&&Array.isArray(C)?new h([C[0]||0,C[1]||0,C[2]||0,v]):null}},write:{target:{color:{type:[B.Integer]},transparency:{type:B.Integer}},writer:function(v,C){C.color=v.toJSON().slice(0,3);v=y.opacityToTransparency(v.a);0!==v&&
(C.transparency=v)}}}};l.screenSizeProperty=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/opacityUtils":function(){define(["exports","../../core/accessorSupport/ensureType"],function(l,h){l.opacityToTransparency=function(D){D=h.ensureInteger(100*(1-D));return Math.max(0,Math.min(D,100))};l.transparencyToOpacity=function(D){return Math.max(0,Math.min(1-D/100,1))};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/edges/SketchEdges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Edges3D".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;D=e=function(b){function c(f){f=b.call(this,f)||this;f.type="sketch";return f}l._inherits(c,b);c.prototype.clone=function(){return new e(this.cloneProperties())};return l._createClass(c)}(k);h.__decorate([t.enumeration({sketch:"sketch"},{readOnly:!0})],D.prototype,"type",void 0);return D=e=h.__decorate([q.subclass("esri.symbols.edges.SketchEdges3D")],D)})},"esri/symbols/edges/SolidEdges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Edges3D".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;D=e=function(b){function c(f){f=b.call(this,f)||this;f.type="solid";return f}l._inherits(c,b);c.prototype.clone=function(){return new e(this.cloneProperties())};return l._createClass(c)}(k);h.__decorate([t.enumeration({solid:"solid"},{readOnly:!0})],D.prototype,"type",void 0);return D=e=h.__decorate([q.subclass("esri.symbols.support.SolidEdges3D")],D)})},"esri/symbols/support/Symbol3DMaterial":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;l.Symbol3DMaterial=e=function(b){function c(f){f=b.call(this,f)||this;f.color=null;return f}h._inherits(c,b);c.prototype.clone=function(){const f={color:null!=this.color?this.color.clone():null};return new e(f)};return h._createClass(c)}(B.JSONSupport);D.__decorate([y.property(k.colorAndTransparencyProperty)],l.Symbol3DMaterial.prototype,"color",void 0);l.Symbol3DMaterial=e=D.__decorate([q.subclass("esri.symbols.support.Symbol3DMaterial")],l.Symbol3DMaterial);Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/symbols/FillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./SimpleLineSymbol ./Symbol".split(" "),function(l,h,D,B,y,v,C,t,q){B=function(k){function e(b){b=k.call(this,b)||this;b.outline=null;b.type=null;return b}l._inherits(e,k);e.prototype.hash=function(){return`${this.type}.${this.outline&&
this.outline.hash()}`};return l._createClass(e)}(q);h.__decorate([D.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":t}},json:{default:null,write:!0}})],B.prototype,"outline",void 0);h.__decorate([D.property({type:["simple-fill","picture-fill"],readOnly:!0})],B.prototype,"type",void 0);return B=h.__decorate([C.subclass("esri.symbols.FillSymbol")],B)})},"esri/symbols/SimpleLineSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./LineSymbol ./LineSymbolMarker".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){var b;D=new D.JSONMap({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});k=b=function(c){function f(...d){d=c.call(this,...d)||this;d.type="simple-line";
d.style="solid";d.cap="round";d.join="round";d.marker=null;d.miterLimit=2;return d}l._inherits(f,c);var a=f.prototype;a.normalizeCtorArgs=function(d,n,r,p,g,u){if(d&&"string"!==typeof d)return d;const x={};null!=d&&(x.style=d);null!=n&&(x.color=n);null!=r&&(x.width=y.toPt(r));null!=p&&(x.cap=p);null!=g&&(x.join=g);null!=u&&(x.miterLimit=y.toPt(u));return x};a.clone=function(){return new b({color:B.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,
marker:this.marker?.clone()})};a.hash=function(){return`${l._get(l._getPrototypeOf(f.prototype),"hash",this).call(this)}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`};return l._createClass(f)}(k);h.__decorate([t.enumeration({esriSLS:"simple-line"},{readOnly:!0})],k.prototype,"type",void 0);h.__decorate([v.property({type:D.apiValues,json:{read:D.read,write:D.write}})],k.prototype,"style",void 0);h.__decorate([v.property({type:["butt","round",
"square"],json:{write:{overridePolicy:(c,f,a)=>({enabled:"round"!==c&&(null==a||null==a.origin)})}}})],k.prototype,"cap",void 0);h.__decorate([v.property({type:["miter","round","bevel"],json:{write:{overridePolicy:(c,f,a)=>({enabled:"round"!==c&&(null==a||null==a.origin)})}}})],k.prototype,"join",void 0);h.__decorate([v.property({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":e}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"marker",void 0);h.__decorate([v.property({type:Number,
json:{read:!1,write:!1}})],k.prototype,"miterLimit",void 0);return k=b=h.__decorate([q.subclass("esri.symbols.SimpleLineSymbol")],k)})},"esri/symbols/LineSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol".split(" "),function(l,h,D,B,y,v,C,
t,q,k){y=function(e){function b(c){c=e.call(this,c)||this;c.type="simple-line";c.width=.75;return c}l._inherits(b,e);b.prototype.hash=function(){return`${this.type}.${this.width}`};return l._createClass(b)}(k);h.__decorate([t.enumeration({esriSLS:"simple-line"},{readOnly:!0})],y.prototype,"type",void 0);h.__decorate([B.property({type:Number,cast:D.toPt,json:{write:!0}})],y.prototype,"width",void 0);return y=h.__decorate([q.subclass("esri.symbols.LineSymbol")],y)})},"esri/symbols/LineSymbolMarker":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/lineMarkers".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){var c;B=c=function(f){function a(n){n=f.call(this,n)||this;n.placement="begin-end";n.type="line-marker";n.style="arrow";return n}l._inherits(a,f);var d=a.prototype;d.writeStyle=function(n,r,p,g){r[p]="web-map"===g?.origin?"arrow":n};d.readColor=function(n){return n&&null!=n[0]?[n[0],n[1],n[2],n[3]/255]:n};d.writeColor=function(n,r,p,g){"web-map"!==g?.origin&&(r[p]=n)};d.clone=function(){return new c({color:y.clone(this.color),placement:this.placement,style:this.style})};
d.hash=function(){return`${this.placement}.${this.color?.hash()}.${this.style}`};l._createClass(a,[{key:"color",set:function(n){this._set("color",n)}}]);return a}(B.JSONSupport);h.__decorate([v.property({type:["begin","end","begin-end"],json:{write:!0}})],B.prototype,"placement",void 0);h.__decorate([t.enumeration({"line-marker":"line-marker"},{readOnly:!0}),v.property({json:{origins:{"web-map":{write:!1}}}})],B.prototype,"type",void 0);h.__decorate([v.property({type:b.lineMarkerStyles})],B.prototype,
"style",void 0);h.__decorate([e.writer("style")],B.prototype,"writeStyle",null);h.__decorate([v.property({type:D,value:null,json:{write:{allowNull:!0}}})],B.prototype,"color",null);h.__decorate([q.reader("color")],B.prototype,"readColor",null);h.__decorate([e.writer("color")],B.prototype,"writeColor",null);return B=c=h.__decorate([k.subclass("esri.symbols.LineSymbolMarker")],B)})},"esri/symbols/support/lineMarkers":function(){define(["exports"],function(l){l.lineMarkerPlacements=["begin","end","begin-end"];
l.lineMarkerStyles="arrow circle square diamond cross x".split(" ");Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/FillSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./edges/utils ./patterns/LineStylePattern3D ./patterns/StylePattern3D ./patterns/utils ./support/colors ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d){var n;B=n=function(r){function p(g){g=r.call(this,g)||this;g.type="fill";g.material=null;g.pattern=null;g.castShadows=!0;g.outline=null;g.edges=null;return g}l._inherits(p,r);p.prototype.clone=function(){const g={edges:null!=this.edges?this.edges.clone():null,enabled:this.enabled,material:null!=this.material?this.material.clone():null,pattern:null!=this.pattern?this.pattern.clone():null,castShadows:this.castShadows,outline:null!=this.outline?this.outline.clone():
null};return new n(g)};p.fromSimpleFillSymbol=function(g){const u=g.outline&&g.outline.style&&"inside-frame"!==g.outline.style&&"solid"!==g.outline.style?new e({style:g.outline.style}):null,x={size:g.outline?.width??0,color:(g.outline?.color??f.white).clone(),pattern:u};u&&g.outline?.cap&&(x.patternCap=g.outline.cap);return new n({material:new a.Symbol3DFillMaterial({color:(g.color??f.transparentWhite).clone()}),pattern:g.style&&"solid"!==g.style?new b({style:g.style}):null,outline:x})};return l._createClass(p)}(q);
h.__decorate([C.enumeration({Fill:"fill"},{readOnly:!0})],B.prototype,"type",void 0);h.__decorate([D.property({type:a.Symbol3DFillMaterial,json:{write:!0}})],B.prototype,"material",void 0);h.__decorate([D.property(c.symbol3dPatternProperty)],B.prototype,"pattern",void 0);h.__decorate([D.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],B.prototype,"castShadows",void 0);h.__decorate([D.property({type:d.Symbol3DOutline,json:{write:!0}})],B.prototype,"outline",void 0);h.__decorate([D.property(k.symbol3dEdgesProperty)],
B.prototype,"edges",void 0);return B=n=h.__decorate([t.subclass("esri.symbols.FillSymbol3DLayer")],B)})},"esri/symbols/patterns/LineStylePattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./LinePattern3D ./lineStyles".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){var b;D=D.strict()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});k=b=function(c){function f(a){a=c.call(this,a)||this;a.type="style";a.style="solid";return a}l._inherits(f,c);f.prototype.clone=function(){return new b({style:this.style})};
return l._createClass(f)}(k);h.__decorate([B.property({type:["style"]})],k.prototype,"type",void 0);h.__decorate([t.enumeration(D),B.property({type:e.lineStyles})],k.prototype,"style",void 0);return k=b=h.__decorate([q.subclass("esri.symbols.patterns.LineStylePattern3D")],k)})},"esri/symbols/patterns/LinePattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t){D=function(q){function k(e){return q.call(this,e)||this}l._inherits(k,q);k.prototype.clone=function(){};return l._createClass(k)}(D.JSONSupport);h.__decorate([B.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],D.prototype,"type",void 0);return D=h.__decorate([t.subclass("esri.symbols.patterns.LinePattern3D")],D)})},"esri/symbols/patterns/lineStyles":function(){define(["exports"],function(l){l.lineStyles="dash dash-dot dot long-dash long-dash-dot long-dash-dot-dot none short-dash short-dash-dot short-dash-dot-dot short-dot solid".split(" ");
Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/patterns/StylePattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./Pattern3D ./styles".split(" "),function(l,h,D,B,y,v,C,t,q){var k;B=k=function(e){function b(c){c=e.call(this,c)||this;c.type="style";c.style="solid";
return c}l._inherits(b,e);b.prototype.clone=function(){return new k({style:this.style})};return l._createClass(b)}(t);h.__decorate([D.property({type:["style"]})],B.prototype,"type",void 0);h.__decorate([D.property({type:q,json:{read:!0,write:!0}})],B.prototype,"style",void 0);return B=k=h.__decorate([C.subclass("esri.symbols.patterns.StylePattern3D")],B)})},"esri/symbols/patterns/Pattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t){D=function(q){function k(e){return q.call(this,e)||this}l._inherits(k,q);k.prototype.clone=function(){};return l._createClass(k)}(D.JSONSupport);h.__decorate([B.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],D.prototype,"type",void 0);return D=h.__decorate([t.subclass("esri.symbols.patterns.Pattern3D")],D)})},"esri/symbols/patterns/styles":function(){define(function(){return"backward-diagonal cross diagonal-cross forward-diagonal horizontal none solid vertical".split(" ")})},
"esri/symbols/patterns/utils":function(){define(["exports","./LinePattern3D","./LineStylePattern3D","./Pattern3D","./StylePattern3D"],function(l,h,D,B,y){B={types:{key:"type",base:B,typeMap:{style:y}},json:{write:!0}};l.symbol3dLinePatternProperty={types:{key:"type",base:h,typeMap:{style:D}},json:{write:!0}};l.symbol3dPatternProperty=B;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/colors":function(){define(["exports","../../Color"],function(l,h){const D=new h("white"),
B=new h("black");h=new h([255,255,255,0]);l.black=B;l.isBlack=function(y){return 0===y.r&&0===y.g&&0===y.b};l.transparentWhite=h;l.white=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Symbol3DMaterial".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){var b;l.Symbol3DFillMaterial=b=function(c){function f(a){a=c.call(this,a)||this;a.colorMixMode=null;return a}h._inherits(f,c);f.prototype.clone=function(){const a={color:null!=this.color?this.color.clone():null,colorMixMode:this.colorMixMode};return new b(a)};return h._createClass(f)}(e.Symbol3DMaterial);D.__decorate([q.enumeration({multiply:"multiply",replace:"replace",tint:"tint"})],l.Symbol3DFillMaterial.prototype,"colorMixMode",void 0);l.Symbol3DFillMaterial=b=
D.__decorate([k.subclass("esri.symbols.support.Symbol3DFillMaterial")],l.Symbol3DFillMaterial);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DOutline":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../patterns/utils ./materialUtils ./symbolLayerUtils3D".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f){var a;l.Symbol3DOutline=a=function(d){function n(r){r=d.call(this,r)||this;r.color=new B([0,0,0,1]);r.size=v.px2pt(1);r.pattern=null;r.patternCap="butt";return r}h._inherits(n,d);n.prototype.clone=function(){const r={color:null!=this.color?this.color.clone():null,size:this.size,pattern:null!=this.pattern?this.pattern.clone():null,patternCap:this.patternCap};return new a(r)};return h._createClass(n)}(y.JSONSupport);D.__decorate([C.property(c.colorAndTransparencyProperty)],
l.Symbol3DOutline.prototype,"color",void 0);D.__decorate([C.property(c.screenSizeProperty)],l.Symbol3DOutline.prototype,"size",void 0);D.__decorate([C.property(b.symbol3dLinePatternProperty)],l.Symbol3DOutline.prototype,"pattern",void 0);D.__decorate([C.property({type:f.lineCaps,json:{default:"butt",write:{overridePolicy(){return{enabled:null!=this.pattern}}}}})],l.Symbol3DOutline.prototype,"patternCap",void 0);l.Symbol3DOutline=a=D.__decorate([e.subclass("esri.symbols.support.Symbol3DOutline")],
l.Symbol3DOutline);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/symbolLayerUtils3D":function(){define(["exports","../../core/has","../../chunks/vec3f64","../../geometry/support/aaBoundingBox"],function(l,h,D,B){const y=B.fromValues(-.5,-.5,-.5,.5,.5,.5),v=B.fromValues(-.5,-.5,0,.5,.5,1),C=B.fromValues(-.5,-.5,0,.5,.5,.5);h=["butt","square","round"];B=[...h,"none"];l.OBJECT_SYMBOL_LAYER_BOUNDING_BOX_TETRAHEDRON=C;l.OBJECT_SYMBOL_LAYER_BOUNDING_BOX_UNIT_CUBE=
y;l.OBJECT_SYMBOL_LAYER_BOUNDING_BOX_UNIT_CYLINDER=v;l.lineCaps=h;l.lineJoins=["miter","bevel","round"];l.objectSymbolLayerPrimitiveBoundingBox=function(t){switch(t){case "sphere":case "cube":case "diamond":return y;case "cylinder":case "cone":case "inverted-cone":return v;case "tetrahedron":return C}};l.objectSymbolLayerSizeWithResourceSize=function(t,{isPrimitive:q,width:k,depth:e,height:b}){q=q?10:1;if(null==k&&null==b&&null==e)return[q*t[0],q*t[1],q*t[2]];k=D.fromValues(k,e,b);let c;for(e=0;3>
e;e++)if(b=k[e],null!=b){c=b/t[e];break}for(e=0;3>e;e++)null==k[e]&&(k[e]=t[e]*c);return k};l.pathCaps=B;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/Font":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./support/textUtils".split(" "),function(l,
h,D,B,y,v,C,t,q,k){var e;D=e=function(b){function c(a){a=b.call(this,a)||this;a.decoration="none";a.family="sans-serif";a.size=9;a.style="normal";a.weight="normal";return a}l._inherits(c,b);var f=c.prototype;f.castSize=function(a){return B.toPt(a)};f.clone=function(){return new e({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};f.hash=function(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`};return l._createClass(c)}(D.JSONSupport);
h.__decorate([y.property({type:k.fontDecorations,json:{default:"none",write:!0}})],D.prototype,"decoration",void 0);h.__decorate([y.property({type:String,json:{write:!0}})],D.prototype,"family",void 0);h.__decorate([y.property({type:Number,json:{write:{overridePolicy(b,c,f){return{enabled:!f||!f.textSymbol3D}}}}})],D.prototype,"size",void 0);h.__decorate([v.cast("size")],D.prototype,"castSize",null);h.__decorate([y.property({type:k.fontStyles,json:{default:"normal",write:!0}})],D.prototype,"style",
void 0);h.__decorate([y.property({type:k.fontWeights,json:{default:"normal",write:!0}})],D.prototype,"weight",void 0);return D=e=h.__decorate([q.subclass("esri.symbols.Font")],D)})},"esri/symbols/support/textUtils":function(){define(["exports","../../core/mathUtils","../../core/accessorSupport/ensureType"],function(l,h,D){const B={type:Number,cast:q=>{q=D.ensureNumber(q);return 0===q?1:h.clamp(q,.1,4)},nonNullable:!0},y=["left","right","center"],v=["baseline","top","middle","bottom"],C={type:y,nonNullable:!0},
t={type:v,nonNullable:!0};l.BACKGROUND_PADDING=8;l.fontDecorations=["none","underline","line-through"];l.fontStyles=["normal","italic","oblique"];l.fontWeights=["normal","lighter","bold","bolder"];l.horizontalAlignmentProperty=C;l.horizontalAlignments=y;l.lineHeightProperty=B;l.verticalAlignmentProperty=t;l.verticalAlignments=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/IconSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/colors ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DAnchorPosition2D ./support/Symbol3DIconOutline ./support/Symbol3DMaterial".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n){function r(x){const w="width"in x?x.width:x.size,m="height"in x?x.height:x.size,z=p(x.xoffset);x=p(x.yoffset);return(z||x)&&w&&m?{x:-z/w,y:x/m}:null}function p(x){return isFinite(x)?x:0}var g;v=g=function(x){function w(m){m=x.call(this,m)||this;m.material=null;m.resource=null;m.type="icon";m.size=12;m.anchor="center";m.anchorPosition=null;m.outline=null;return m}l._inherits(w,x);w.prototype.clone=function(){return new g({anchor:this.anchor,anchorPosition:this.anchorPosition&&
this.anchorPosition.clone(),enabled:this.enabled,material:null!=this.material?this.material.clone():null,outline:null!=this.outline?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})};w.fromSimpleMarkerSymbol=function(m){const z=m.color||b.white,A=r(m),H=m.outline&&0<m.outline.width?{size:m.outline.width,color:(m.outline.color||b.white).clone()}:null;var E=g,F=m.size;{m=m.style;const J=u[m];J?m=J:(D.getLogger("esri.symbols.IconSymbol3DLayer").warn(`${m} cannot be mapped to Icon symbol. Fallback to "circle"`),
m="circle")}return new E({size:F,resource:{primitive:m},material:{color:z},outline:H,anchor:A?"relative":void 0,anchorPosition:A})};w.fromPictureMarkerSymbol=function(m){const z=!m.color||b.isBlack(m.color)?b.white:m.color,A=r(m);return new g({size:m.width<=m.height?m.height:m.width,resource:{href:m.url},material:{color:z.clone()},anchor:A?"relative":void 0,anchorPosition:A})};w.fromCIMSymbol=function(m){return new g({resource:{href:B.makeData({mediaType:"application/json",data:JSON.stringify(m.data)})}})};
return l._createClass(w)}(e);h.__decorate([y.property({type:n.Symbol3DMaterial,json:{write:!0}})],v.prototype,"material",void 0);h.__decorate([y.property({type:c.IconSymbol3DLayerResource,json:{write:!0}})],v.prototype,"resource",void 0);h.__decorate([q.enumeration({Icon:"icon"},{readOnly:!0})],v.prototype,"type",void 0);h.__decorate([y.property(f.screenSizeProperty)],v.prototype,"size",void 0);h.__decorate([q.enumeration({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",
topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),y.property({json:{default:"center"}})],v.prototype,"anchor",void 0);h.__decorate([y.property({type:a.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:x=>new a.Symbol3DAnchorPosition2D({x:x[0],y:x[1]})},write:{writer:(x,w)=>{w.anchorPosition=[x.x,x.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],v.prototype,"anchorPosition",void 0);h.__decorate([y.property({type:d.Symbol3DIconOutline,
json:{write:!0}})],v.prototype,"outline",void 0);v=g=h.__decorate([k.subclass("esri.symbols.IconSymbol3DLayer")],v);const u={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return v})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../chunks/persistableUrlUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a){var d;B=B.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});l.IconSymbol3DLayerResource=d=function(n){function r(g){return n.call(this,g)||this}h._inherits(r,n);var p=r.prototype;p.readHref=function(g,u,x){return g?a.fromJSON(g,x):u.dataURI};p.writeHref=function(g,u,x,w){g&&(v.isDataProtocol(g)?u.dataURI=g:(u.href=a.toJSON(g,w),v.isAbsolute(u.href)&&(u.href=v.normalize(u.href))))};p.clone=function(){return new d({href:this.href,
primitive:this.primitive})};return h._createClass(r)}(y.JSONSupport);D.__decorate([C.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],l.IconSymbol3DLayerResource.prototype,"href",void 0);D.__decorate([b.reader("href")],l.IconSymbol3DLayerResource.prototype,"readHref",null);D.__decorate([f.writer("href",{href:{type:String},dataURI:{type:String}})],l.IconSymbol3DLayerResource.prototype,"writeHref",null);D.__decorate([e.enumeration(B)],l.IconSymbol3DLayerResource.prototype,"primitive",
void 0);l.IconSymbol3DLayerResource=d=D.__decorate([c.subclass("esri.symbols.support.IconSymbol3DLayerResource")],l.IconSymbol3DLayerResource);l.defaultPrimitive="circle";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t,q){var k;l.Symbol3DAnchorPosition2D=k=function(e){function b(){var c=e.apply(this,arguments)||this;c.x=0;c.y=0;return c}h._inherits(b,e);b.prototype.clone=function(){return new k({x:this.x,y:this.y})};return h._createClass(b)}(B);D.__decorate([y.property({type:Number})],l.Symbol3DAnchorPosition2D.prototype,"x",void 0);D.__decorate([y.property({type:Number})],l.Symbol3DAnchorPosition2D.prototype,"y",void 0);l.Symbol3DAnchorPosition2D=k=D.__decorate([q.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],
l.Symbol3DAnchorPosition2D);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DIconOutline":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),function(l,h,D,B,y,v,C,
t,q,k,e,b){var c;l.Symbol3DIconOutline=c=function(f){function a(d){d=f.call(this,d)||this;d.color=new B([0,0,0,1]);d.size=v.px2pt(1);return d}h._inherits(a,f);a.prototype.clone=function(){const d={color:null!=this.color?this.color.clone():null,size:this.size};return new c(d)};return h._createClass(a)}(y.JSONSupport);D.__decorate([C.property(b.colorAndTransparencyProperty)],l.Symbol3DIconOutline.prototype,"color",void 0);D.__decorate([C.property(b.screenSizeProperty)],l.Symbol3DIconOutline.prototype,
"size",void 0);l.Symbol3DIconOutline=c=D.__decorate([e.subclass("esri.symbols.support.Symbol3DIconOutline")],l.Symbol3DIconOutline);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/LabelSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){var c;const f=D.ofType({base:null,key:"type",typeMap:{text:k}});D=c=function(a){function d(r){r=a.call(this,r)||this;r.verticalOffset=null;r.callout=null;r.styleOrigin=null;r.symbolLayers=new f;r.type="label-3d";return r}l._inherits(d,a);var n=d.prototype;n.supportsCallout=function(){return!0};n.hasVisibleCallout=function(){return e.hasVisibleCallout(this)};n.hasVisibleVerticalOffset=function(){return e.hasVisibleVerticalOffset(this)};n.clone=function(){return new c({styleOrigin:B.clone(this.styleOrigin),
symbolLayers:B.clone(this.symbolLayers),thumbnail:B.clone(this.thumbnail),callout:B.clone(this.callout),verticalOffset:B.clone(this.verticalOffset)})};d.fromTextSymbol=function(r){return new c({symbolLayers:[k.fromTextSymbol(r)]})};return l._createClass(d)}(q);h.__decorate([y.property({type:b,json:{write:!0}})],D.prototype,"verticalOffset",void 0);h.__decorate([y.property(e.calloutProperty)],D.prototype,"callout",void 0);h.__decorate([y.property({json:{read:!1,write:!1}})],D.prototype,"styleOrigin",
void 0);h.__decorate([y.property({type:f})],D.prototype,"symbolLayers",void 0);h.__decorate([C.enumeration({LabelSymbol3D:"label-3d"},{readOnly:!0})],D.prototype,"type",void 0);return D=c=h.__decorate([t.subclass("esri.symbols.LabelSymbol3D")],D)})},"esri/symbols/Symbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../portal/Portal ../chunks/persistableUrlUtils ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x,w,m,z,A,H,E){const F={icon:p,object:u,line:g,path:x,fill:r,extrude:n,text:z,water:A};k=D.ofType({base:m,key:"type",typeMap:F,errorContext:"symbol-layer"});w=function(J){function L(G){G=J.call(this,G)||this;G.styleOrigin=null;G.thumbnail=null;G.type=null;const K=G.__accessor__&&G.__accessor__.metadatas&&G.__accessor__.metadatas.symbolLayers;G._set("symbolLayers",new (K&&K.type||D));return G}l._inherits(L,J);var I=L.prototype;I.readStyleOrigin=function(G,
K,P){if(G.styleUrl&&G.name)return K=d.fromJSON(G.styleUrl,P),new H({styleUrl:K,name:G.name});if(G.styleName&&G.name)return new H({portal:P&&P.portal||a.getDefault(),styleName:G.styleName,name:G.name});P&&P.messages&&P.messages.push(new C("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:P,definition:G}))};I.writeStyleOrigin=function(G,K,P,Y){G.styleUrl&&G.name?(P=d.toJSON(G.styleUrl,Y),v.isAbsolute(P)&&(P=v.normalize(P)),K.styleOrigin=
{styleUrl:P,name:G.name}):G.styleName&&G.name&&(G.portal&&Y&&Y.portal&&!v.hasSamePortal(G.portal.restUrl,Y.portal.restUrl)?Y&&Y.messages&&Y.messages.push(new C("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):K.styleOrigin={styleName:G.styleName,name:G.name})};I.normalizeCtorArgs=function(G){return G instanceof m||G&&F[G.type]?{symbolLayers:[G]}:Array.isArray(G)?{symbolLayers:G}:G};l._createClass(L,
[{key:"color",get:function(){return null},set:function(G){this.constructed&&y.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}},{key:"symbolLayers",set:function(G){B.referenceSetter(G,this._get("symbolLayers"))}}]);return L}(w);h.__decorate([t.property({json:{read:!1,write:!1}})],w.prototype,"color",null);h.__decorate([t.property({type:k,nonNullable:!0,json:{write:!0}}),q.cast(B.castForReferenceSetter)],
w.prototype,"symbolLayers",null);h.__decorate([t.property({type:H})],w.prototype,"styleOrigin",void 0);h.__decorate([b.reader("styleOrigin")],w.prototype,"readStyleOrigin",null);h.__decorate([f.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],w.prototype,"writeStyleOrigin",null);h.__decorate([t.property({type:E.Thumbnail,json:{read:!1}})],w.prototype,"thumbnail",void 0);h.__decorate([t.property({type:["point-3d","line-3d",
"polygon-3d","mesh-3d","label-3d"],readOnly:!0})],w.prototype,"type",void 0);return w=h.__decorate([c.subclass("esri.symbols.Symbol3D")],w)})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(l,h){l.castForReferenceSetter=function(D){return D};l.referenceSetter=function(D,B,y=h){B||(B=new y);if(B===D)return B;B.removeAll();D&&(Array.isArray(D)||"items"in D&&Array.isArray(D.items))?B.addMany(D):D&&B.add(D);return B};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/portal/Portal":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x,w,m){function z(L){const I=y.id;return()=>{const G=L.deref();G&&I.findCredential(G.restUrl)&&G.signIn().catch(()=>{})}}const A=L=>Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}));var H;let E;const F={PortalGroup:()=>new Promise((L,I)=>l(["./PortalGroup"],G=>L(A(G)),I)),PortalItem:()=>new Promise((L,I)=>l(["./PortalItem"],G=>L(A(G)),I)),PortalUser:()=>new Promise((L,I)=>l(["./PortalUser"],G=>L(A(G)),
I))};t=H=function(L){function I(K){K=L.call(this,K)||this;K._esriIdCredentialCreateHandle=null;K.access=null;K.allSSL=!1;K.authMode="auto";K.authorizedCrossOriginDomains=null;K.basemapGalleryGroupQuery=null;K.basemapGalleryGroupQuery3D=null;K.bingKey=null;K.canListApps=!1;K.canListData=!1;K.canListPreProvisionedItems=!1;K.canProvisionDirectPurchase=!1;K.canSearchPublic=!0;K.canShareBingPublic=!1;K.canSharePublic=!1;K.canSignInArcGIS=!1;K.canSignInIDP=!1;K.colorSetsGroupQuery=null;K.commentsEnabled=
!1;K.created=null;K.culture=null;K.customBaseUrl=null;K.defaultBasemap=null;K.defaultDevBasemap=null;K.defaultExtent=null;K.defaultVectorBasemap=null;K.description=null;K.devBasemapGalleryGroupQuery=null;K.eueiEnabled=null;K.featuredGroups=null;K.featuredItemsGroupQuery=null;K.galleryTemplatesGroupQuery=null;K.livingAtlasGroupQuery=null;K.hasCategorySchema=!1;K.helperServices=null;K.homePageFeaturedContent=null;K.homePageFeaturedContentCount=null;K.httpPort=null;K.httpsPort=null;K.id=null;K.ipCntryCode=
null;K.isPortal=!1;K.isReadOnly=!1;K.layerTemplatesGroupQuery=null;K.maxTokenExpirationMinutes=null;K.modified=null;K.name=null;K.portalHostname=null;K.portalMode=null;K.portalProperties=null;K.region=null;K.rotatorPanels=null;K.showHomePageDescription=!1;K.sourceJSON=null;K.supportsHostedServices=!1;K.symbolSetsGroupQuery=null;K.templatesGroupQuery=null;K.units=null;K.url=B.portalUrl;K.urlKey=null;K.user=null;K.use3dBasemaps=!0;K.useStandardizedQuery=!1;K.useVectorBasemaps=!1;K.vectorBasemapGalleryGroupQuery=
null;return K}h._inherits(I,L);var G=I.prototype;G.normalizeCtorArgs=function(K){return"string"===typeof K?{url:K}:K};G.destroy=function(){J.unregister(this);this.defaultBasemap=k.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=k.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=k.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=k.removeMaybe(this._esriIdCredentialCreateHandle)};G.readAuthorizedCrossOriginDomains=function(K){if(K)for(const P of K)B.request.trustedServers.includes(P)||
B.request.trustedServers.push(P);return K};G.readDefaultBasemap=function(K){return this._readBasemap(K)};G.readDefaultDevBasemap=function(K){return this._readBasemap(K)};G.readDefaultVectorBasemap=function(K){return this._readBasemap(K)};G.readUrlKey=function(K){return K?K.toLowerCase():K};G.readUser=function(K){let P=null;K&&(P=w.fromJSON(K),P.portal=this);return P};G.load=function(K){const P=(new Promise((Y,ea)=>l(["../Basemap"],aa=>Y(A(aa)),ea))).then(({default:Y})=>{e.throwIfAborted(K);E=Y}).then(()=>
this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,K)).then(Y=>{if(y.id){const ea=y.id;this.credential=ea.findCredential(this.restUrl);this.credential||this.authMode!==H.AUTH_MODE_AUTO||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=ea.on("credential-create",z(new WeakRef(this))),J.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=Y;this.read(Y)});this.addResolvingPromise(P);return Promise.resolve(this)};G.createElevationLayers=
async function(){await this.load();const K=this._getHelperService("defaultElevationLayers"),P=(await new Promise((Y,ea)=>l(["../layers/ElevationLayer"],aa=>Y(A(aa)),ea))).default;return K?K.map(Y=>new P({id:Y.id,url:Y.url})):[]};G.fetchBasemaps=async function(K,P){const Y=await this._fetchBasemaps(K,P);!0===P?.include3d&&!1!==this.use3dBasemaps&&(K=await this._fetchBasemaps3D(K,P),Y.unshift(...K));return Y};G.fetchCategorySchema=function(K){return this.hasCategorySchema?this.request(this.restUrl+
"/portals/self/categorySchema",K).then(P=>P.categorySchema):e.isAborted(K)?Promise.reject(e.createAbortError()):Promise.resolve([])};G.fetchFeaturedGroups=function(K){const P=this.featuredGroups,Y=new u;Y.num=100;Y.sortField="title";if(P&&P.length){const ea=[];for(const aa of P)ea.push(`(title:"${aa.title}" AND owner:${aa.owner})`);Y.query=ea.join(" OR ");return this.queryGroups(Y,K).then(aa=>aa.results)}return e.isAborted(K)?Promise.reject(e.createAbortError()):Promise.resolve([])};G.fetchRegions=
function(K){const P=this.user?.culture||this.culture||p.getLocale();return this.request(this.restUrl+"/portals/regions",{...K,query:{culture:P}})};G.fetchSettings=function(K){const P=this.user?.culture||this.culture||p.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...K,query:{culture:P}})};I.getDefault=function(){return g.ensureDefaultPortalInstance(()=>new H)};G.queryGroups=function(K,P){return this.queryPortal("/community/groups",K,"PortalGroup",P)};G.queryItems=function(K,
P){return this.queryPortal("/search",K,"PortalItem",P)};G.queryUsers=function(K,P){K.sortField||(K.sortField="username");return this.queryPortal("/community/users",K,"PortalUser",P)};G.fetchSelf=function(K=this.authMode,P=!1,Y){const ea=this.restUrl+"/portals/self";K={authMode:K,query:{culture:p.getLocale().toLowerCase()},...Y};"auto"===K.authMode&&(K.authMode="no-prompt");P&&(K.query.default=!0);return this.request(ea,K)};G.queryPortal=function(K,P,Y,ea){const aa=c.ensureType(u,P),T=R=>this.request(this.restUrl+
K,{...aa.toRequestOptions(this),...ea}).then(W=>{const S=aa.clone();S.start=W.nextStart;return new x({nextQueryParams:S,queryParams:aa,total:W.total,results:H._resultsToTypedArray(R,{portal:this},W,ea)})}).then(W=>Promise.all(W.results.map(S=>"function"===typeof S.when?S.when():W)).then(()=>W,S=>{e.throwIfAbortError(S);return W}));return Y&&F[Y]?F[Y]().then(({default:R})=>{e.throwIfAborted(ea);return T(R)}):T()};G.signIn=function(){if(this.authMode===H.AUTH_MODE_ANONYMOUS)return Promise.reject(new C("portal:invalid-auth-mode",
`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const K=P=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return P||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=P;return this.fetchSelf("immediate")});if(this.user&&this.credential===P)return null;this.credential=P;return this.fetchSelf("immediate")}).then(Y=>
{Y&&(this.sourceJSON=Y,this.read(Y))});return y.id?y.id.getCredential(this.restUrl).then(P=>K(P)):K(this.credential)};G.normalizeUrl=function(K){const P=this.credential&&this.credential.token;return this._normalizeSSL(P?K+(K.includes("?")?"\x26":"?")+"token\x3d"+P:K)};G.requestToTypedArray=function(K,P,Y){return this.request(K,P).then(ea=>{const aa=H._resultsToTypedArray(Y,{portal:this},ea);return Promise.all(aa.map(T=>"function"===typeof T.when?T.when():ea)).then(()=>aa,()=>aa)})};G.request=function(K,
P={}){const Y={f:"json",...P.query},{authMode:ea=this.authMode===H.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:aa=null,cacheBust:T=!1,method:R="auto",responseType:W="json",signal:S}=P;P={authMode:ea,body:aa,cacheBust:T,method:R,query:Y,responseType:W,timeout:0,signal:S};return v(this._normalizeSSL(K),P).then(Z=>Z.data)};G.toJSON=function(){throw new C("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};I.fromJSON=function(K){if(!K)return null;if(K.declaredClass)throw Error("JSON object is already hydrated");
return new H({sourceJSON:K})};G._getHelperService=function(K){const P=this.helperServices&&this.helperServices[K];if(!P)throw new C("portal:service-not-found",`The \`helperServices\` do not include an entry named "${K}"`);return P};G._fetchBasemaps=async function(K,P){const Y=new u;Y.query=K||(B.apiKey&&m.supportsApiKey(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);Y.disableExtraQuery=!0;K=await this.queryGroups(Y,
P);if(!K.total)return[];K=K.results[0];Y.num=100;Y.query='type:"Web Map" -type:"Web Application"';Y.sortField=K.sortField||"name";Y.sortOrder=K.sortOrder||"desc";P=await K.queryItems(Y,P);return P.total?P.results.filter(ea=>"Web Map"===ea.type).map(ea=>new E({portalItem:ea})):[]};G._fetchBasemaps3D=async function(K,P){K=K||this.basemapGalleryGroupQuery3D;if(!K)return[];K=new u({query:K,disableExtraQuery:!0});var Y=await this.queryGroups(K,P);if(!Y.total)return[];Y=Y.results[0];K.num=100;K.query='type:"Web Scene"';
K.sortField=Y.sortField||"name";K.sortOrder=Y.sortOrder||"desc";P=await Y.queryItems(K,P);return P.total?P.results.filter(ea=>"Web Scene"===ea.type).map(ea=>new E({portalItem:ea})):[]};G._normalizeSSL=function(K){return K.replace(/^http:/i,"https:").replace(":7080",":7443")};G._readBasemap=function(K){return K?(K=E.fromJSON(K),K.portalItem={portal:this},K):null};I._resultsToTypedArray=function(K,P,Y,ea){let aa=[];if(Y){const T=null!=ea?ea.signal:null;aa=Y.listings||Y.notifications||Y.userInvitations||
Y.tags||Y.items||Y.groups||Y.comments||Y.provisions||Y.results||Y.relatedItems||Y;if(K||P)aa=aa.map(R=>{R=Object.assign(K?K.fromJSON(R):R,P);"function"===typeof R.load&&R.load(T);return R})}else aa=[];return aa};h._createClass(I,[{key:"extraQuery",get:function(){const K=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!K?` AND orgid:${this.id}`:null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"itemPageUrl",get:function(){return this.url?`${this.url}/home/item.html`:
null}},{key:"restUrl",get:function(){let K=this.url;if(K){const P=K.indexOf("/sharing");K=0<P?K.substring(0,P):this.url.replace(/\/+$/,"");K+="/sharing/rest"}return K}},{key:"thumbnailUrl",get:function(){const K=this.restUrl,P=this.thumbnail;return K&&P?this._normalizeSSL(K+"/portals/self/resources/"+P):null}}]);return I}(t.JSONSupportMixin(q));t.AUTH_MODE_ANONYMOUS="anonymous";t.AUTH_MODE_AUTO="auto";t.AUTH_MODE_IMMEDIATE="immediate";D.__decorate([b.property()],t.prototype,"access",void 0);D.__decorate([b.property()],
t.prototype,"allSSL",void 0);D.__decorate([b.property()],t.prototype,"authMode",void 0);D.__decorate([b.property()],t.prototype,"authorizedCrossOriginDomains",void 0);D.__decorate([d.reader("authorizedCrossOriginDomains")],t.prototype,"readAuthorizedCrossOriginDomains",null);D.__decorate([b.property()],t.prototype,"basemapGalleryGroupQuery",void 0);D.__decorate([b.property({json:{name:"3DBasemapGalleryGroupQuery"}})],t.prototype,"basemapGalleryGroupQuery3D",void 0);D.__decorate([b.property()],t.prototype,
"bingKey",void 0);D.__decorate([b.property()],t.prototype,"canListApps",void 0);D.__decorate([b.property()],t.prototype,"canListData",void 0);D.__decorate([b.property()],t.prototype,"canListPreProvisionedItems",void 0);D.__decorate([b.property()],t.prototype,"canProvisionDirectPurchase",void 0);D.__decorate([b.property()],t.prototype,"canSearchPublic",void 0);D.__decorate([b.property()],t.prototype,"canShareBingPublic",void 0);D.__decorate([b.property()],t.prototype,"canSharePublic",void 0);D.__decorate([b.property()],
t.prototype,"canSignInArcGIS",void 0);D.__decorate([b.property()],t.prototype,"canSignInIDP",void 0);D.__decorate([b.property()],t.prototype,"colorSetsGroupQuery",void 0);D.__decorate([b.property()],t.prototype,"commentsEnabled",void 0);D.__decorate([b.property({type:Date})],t.prototype,"created",void 0);D.__decorate([b.property()],t.prototype,"credential",void 0);D.__decorate([b.property()],t.prototype,"culture",void 0);D.__decorate([b.property()],t.prototype,"currentVersion",void 0);D.__decorate([b.property()],
t.prototype,"customBaseUrl",void 0);D.__decorate([b.property()],t.prototype,"defaultBasemap",void 0);D.__decorate([d.reader("defaultBasemap")],t.prototype,"readDefaultBasemap",null);D.__decorate([b.property()],t.prototype,"defaultDevBasemap",void 0);D.__decorate([d.reader("defaultDevBasemap")],t.prototype,"readDefaultDevBasemap",null);D.__decorate([b.property({type:r})],t.prototype,"defaultExtent",void 0);D.__decorate([b.property()],t.prototype,"defaultVectorBasemap",void 0);D.__decorate([d.reader("defaultVectorBasemap")],
t.prototype,"readDefaultVectorBasemap",null);D.__decorate([b.property()],t.prototype,"description",void 0);D.__decorate([b.property()],t.prototype,"devBasemapGalleryGroupQuery",void 0);D.__decorate([b.property()],t.prototype,"eueiEnabled",void 0);D.__decorate([b.property({readOnly:!0})],t.prototype,"extraQuery",null);D.__decorate([b.property()],t.prototype,"featuredGroups",void 0);D.__decorate([b.property()],t.prototype,"featuredItemsGroupQuery",void 0);D.__decorate([b.property()],t.prototype,"galleryTemplatesGroupQuery",
void 0);D.__decorate([b.property()],t.prototype,"livingAtlasGroupQuery",void 0);D.__decorate([b.property()],t.prototype,"hasCategorySchema",void 0);D.__decorate([b.property()],t.prototype,"helpBase",void 0);D.__decorate([b.property()],t.prototype,"helperServices",void 0);D.__decorate([b.property()],t.prototype,"helpMap",void 0);D.__decorate([b.property()],t.prototype,"homePageFeaturedContent",void 0);D.__decorate([b.property()],t.prototype,"homePageFeaturedContentCount",void 0);D.__decorate([b.property()],
t.prototype,"httpPort",void 0);D.__decorate([b.property()],t.prototype,"httpsPort",void 0);D.__decorate([b.property()],t.prototype,"id",void 0);D.__decorate([b.property()],t.prototype,"ipCntryCode",void 0);D.__decorate([b.property({readOnly:!0})],t.prototype,"isOrganization",null);D.__decorate([b.property()],t.prototype,"isPortal",void 0);D.__decorate([b.property()],t.prototype,"isReadOnly",void 0);D.__decorate([b.property({readOnly:!0})],t.prototype,"itemPageUrl",null);D.__decorate([b.property()],
t.prototype,"layerTemplatesGroupQuery",void 0);D.__decorate([b.property()],t.prototype,"maxTokenExpirationMinutes",void 0);D.__decorate([b.property({type:Date})],t.prototype,"modified",void 0);D.__decorate([b.property()],t.prototype,"name",void 0);D.__decorate([b.property()],t.prototype,"portalHostname",void 0);D.__decorate([b.property()],t.prototype,"portalMode",void 0);D.__decorate([b.property()],t.prototype,"portalProperties",void 0);D.__decorate([b.property()],t.prototype,"region",void 0);D.__decorate([b.property({readOnly:!0})],
t.prototype,"restUrl",null);D.__decorate([b.property()],t.prototype,"rotatorPanels",void 0);D.__decorate([b.property()],t.prototype,"showHomePageDescription",void 0);D.__decorate([b.property()],t.prototype,"sourceJSON",void 0);D.__decorate([b.property()],t.prototype,"staticImagesUrl",void 0);D.__decorate([b.property({json:{name:"2DStylesGroupQuery"}})],t.prototype,"stylesGroupQuery2d",void 0);D.__decorate([b.property({json:{name:"stylesGroupQuery"}})],t.prototype,"stylesGroupQuery3d",void 0);D.__decorate([b.property()],
t.prototype,"supportsHostedServices",void 0);D.__decorate([b.property()],t.prototype,"symbolSetsGroupQuery",void 0);D.__decorate([b.property()],t.prototype,"templatesGroupQuery",void 0);D.__decorate([b.property()],t.prototype,"thumbnail",void 0);D.__decorate([b.property({readOnly:!0})],t.prototype,"thumbnailUrl",null);D.__decorate([b.property()],t.prototype,"units",void 0);D.__decorate([b.property()],t.prototype,"url",void 0);D.__decorate([b.property()],t.prototype,"urlKey",void 0);D.__decorate([d.reader("urlKey")],
t.prototype,"readUrlKey",null);D.__decorate([b.property()],t.prototype,"user",void 0);D.__decorate([d.reader("user")],t.prototype,"readUser",null);D.__decorate([b.property()],t.prototype,"use3dBasemaps",void 0);D.__decorate([b.property()],t.prototype,"useStandardizedQuery",void 0);D.__decorate([b.property()],t.prototype,"useVectorBasemaps",void 0);D.__decorate([b.property()],t.prototype,"vectorBasemapGalleryGroupQuery",void 0);D=t=H=D.__decorate([n.subclass("esri.portal.Portal")],t);const J=new FinalizationRegistry(L=>
{L.remove()});return D})},"esri/core/Loadable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(l,h,D,B,y,v,C,t,q){const k=e=>{e=function(b){function c(...a){var d=b.call(this,...a)||this;d._loadController=null;d.loadError=null;d.loadStatus="not-loaded";d._set("loadWarnings",[]);d.addResolvingPromise(new Promise(n=>{const r=d.load.bind(l._assertThisInitialized(d));
d.load=p=>{const g=new Promise((u,x)=>{const w=v.onAbortOrThrow(p,x);d.destroyed&&x(new D("load:instance-destroyed",`Instance of '${d.declaredClass||d.constructor.name}' is already destroyed`,{instance:l._assertThisInitialized(d)}));d.when(u,x).finally(()=>{w&&w.remove()})});if("not-loaded"===d.loadStatus){d._set("loadStatus","loading");const u=d._loadController=new AbortController;r({signal:u.signal});v.onAbort(u.signal,()=>{d._promiseProps.abort()})}n();return g}}));d.when(()=>{d._set("loadStatus",
"loaded");d._loadController=null},n=>{d._set("loadStatus","failed");d._set("loadError",n);d._loadController=null});return d}l._inherits(c,b);var f=c.prototype;f.destroy=function(){this._loadController=B.abortMaybe(this._loadController);this._set("loadError",null);this._set("loadWarnings",[])};f.load=function(){return null};f.cancelLoad=function(){if(this.isFulfilled())return this;this._set("loadError",new D("load:cancelled","Cancelled"));this._loadController?.abort();return this};l._createClass(c,
[{key:"loaded",get:function(){return"loaded"===this.loadStatus}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}}]);return c}(e);h.__decorate([t.property({readOnly:!0})],e.prototype,"loaded",null);h.__decorate([t.property({readOnly:!0})],e.prototype,"loadError",void 0);h.__decorate([t.property({clonable:!1})],e.prototype,"loadStatus",void 0);h.__decorate([t.property({type:[C],readOnly:!0})],e.prototype,"loadWarnings",null);return e=h.__decorate([q.subclass("esri.core.Loadable")],
e)};y=function(e){function b(){return e.apply(this,arguments)||this}l._inherits(b,e);return l._createClass(b)}(k(y.EsriPromise));y=h.__decorate([q.subclass("esri.core.Loadable")],y);(function(e){e.LoadableMixin=k;e.isLoadable=function(b){return!(!b||!b.load)}})(y||(y={}));return y})},"esri/core/Promise":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/subclass".split(" "),function(l,h,D,B,y,v,C){var t;
(function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"})(t||(t={}));let q=function(){function e(){this._resolver=v.createResolver();this._status=t.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=t.RESOLVED;this._cleanUp()},()=>{this._status=t.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}var b=e.prototype;b.destroy=function(){this._cleanUp()};b.addResolvingPromise=function(c){this._resolvingPromises.push(c);this._tryResolve()};
b.isResolved=function(){return this._status===t.RESOLVED};b.isRejected=function(){return this._status===t.REJECTED};b.isFulfilled=function(){return this._status!==t.PENDING};b.abort=function(){this._resolver.reject(v.createAbortError())};b._cleanUp=function(){this._resolvingPromises=this._allPromise=null};b._tryResolve=function(){if(!this.isFulfilled()){var c=v.createResolver(),f=[...this._resolvingPromises,y.assumeNonNull(c.promise)],a=this._allPromise=Promise.all(f);a.then(()=>{this.isFulfilled()||
this._allPromise!==a||this._resolver.resolve()},d=>{this.isFulfilled()||this._allPromise!==a||v.isAbortError(d)||this._resolver.reject(d)});c.resolve()}};return h._createClass(e)}();const k=e=>{e=function(b){function c(...a){a=b.call(this,...a)||this;a._promiseProps=new q;a.addResolvingPromise(Promise.resolve());return a}h._inherits(c,b);var f=c.prototype;f.destroy=function(){this._promiseProps?.destroy()};f.isResolved=function(){return this._promiseProps.isResolved()};f.isRejected=function(){return this._promiseProps.isRejected()};
f.isFulfilled=function(){return this._promiseProps.isFulfilled()};f.when=function(a,d){return this._promiseProps.promise.then(()=>this).then(a,d)};f.catch=function(a){return this.when(null,a)};f.addResolvingPromise=function(a){a&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in a?a.when():a)};return h._createClass(c)}(e);return e=D.__decorate([C.subclass("esri.core.Promise")],e)};l.EsriPromise=function(e){function b(){return e.apply(this,arguments)||this}
h._inherits(b,e);return h._createClass(b)}(k(B));l.EsriPromise=D.__decorate([C.subclass("esri.core.Promise")],l.EsriPromise);l.EsriPromiseMixin=k;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/intl/locale":function(){define(["exports"],function(l){function h(){return t??globalThis.navigator?.language??"en"}function D(){void 0===C&&(C=h());return C}function B(b=D()){return/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(b)?.[1].toLowerCase()}function y(){const b=v??h();C!==b&&(C=b,[...e].forEach(c=>
{c.call(null,b)}),[...k].forEach(c=>{c.call(null,b)}))}let v=void 0,C=void 0;const t=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,q={he:!0,ar:!0},k=[],e=[];globalThis.addEventListener?.("languagechange",y);l.beforeLocaleChange=function(b){e.push(b);return{remove(){k.splice(e.indexOf(b),1)}}};l.getDefaultLocale=h;l.getLanguage=B;l.getLocale=D;l.onLocaleChange=function(b){k.push(b);return{remove(){k.splice(k.indexOf(b),1)}}};l.prefersRTL=function(b=D()){b=B(b);return void 0!==b&&(q[b]||
!1)};l.setLocale=function(b){v=b||void 0;y()};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/portal/portalDefault":function(){define(["exports"],function(l){let h;l.clearDefaultPortalInstance=function(){h=void 0};l.ensureDefaultPortalInstance=function(D){if(!h||h.destroyed)h=D();return h};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalQueryParams":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){var b;const c=new B.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});D=b=function(f){function a(n){n=f.call(this,n)||this;n.categories=null;n.disableExtraQuery=!1;n.extent=null;n.filter=null;n.num=10;n.query=null;n.sortField=null;n.start=1;return n}l._inherits(a,f);var d=a.prototype;d.clone=function(){return new b({categories:this.categories?y.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,
extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};d.toRequestOptions=function(n,r){let p=[];this.categories&&(p=this.categories.map(x=>Array.isArray(x)?JSON.stringify(x):x));let g="";if(this.extent){var u=e.project(this.extent,k.WGS84);null!=u&&(g=`${u.xmin},${u.ymin},${u.xmax},${u.ymax}`)}u=this.query;!this.disableExtraQuery&&n.extraQuery&&(u="("+u+")"+n.extraQuery);n={categories:p,bbox:g,
q:u,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(n.sortField=this.sortField.split(",").map(x=>c.toJSON(x.trim())).join(","),n.sortOrder=this.sortOrder);return{query:{...r,...n}}};l._createClass(a,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(n){"asc"!==n&&"desc"!==n||this._set("sortOrder",n)}}]);return a}(D);h.__decorate([v.property()],D.prototype,"categories",void 0);h.__decorate([v.property()],D.prototype,
"disableExtraQuery",void 0);h.__decorate([v.property({type:q})],D.prototype,"extent",void 0);h.__decorate([v.property()],D.prototype,"filter",void 0);h.__decorate([v.property()],D.prototype,"num",void 0);h.__decorate([v.property()],D.prototype,"query",void 0);h.__decorate([v.property()],D.prototype,"sortField",void 0);h.__decorate([v.property()],D.prototype,"sortOrder",null);h.__decorate([v.property()],D.prototype,"start",void 0);return D=b=h.__decorate([t.subclass("esri.portal.PortalQueryParams")],
D)})},"esri/portal/PortalQueryResult":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(l,h,D,B,y,v,C,t){D=function(q){function k(e){e=q.call(this,e)||this;e.nextQueryParams=null;e.queryParams=null;e.results=null;e.total=null;return e}l._inherits(k,q);return l._createClass(k)}(D);h.__decorate([B.property()],
D.prototype,"nextQueryParams",void 0);h.__decorate([B.property()],D.prototype,"queryParams",void 0);h.__decorate([B.property()],D.prototype,"results",void 0);h.__decorate([B.property()],D.prototype,"total",void 0);return D=h.__decorate([t.subclass("esri.portal.PortalQueryResult")],D)})},"esri/portal/PortalUser":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){var c;y=c=function(f){function a(...n){n=f.call(this,...n)||this;n.access=null;n.created=null;n.culture=null;n.description=null;n.email=null;n.fullName=null;n.modified=null;n.orgId=null;n.portal=null;n.preferredView=null;n.privileges=null;n.region=null;n.role=null;n.roleId=null;n.sourceJSON=null;n.units=null;n.username=null;n.userType=null;return n}h._inherits(a,f);var d=a.prototype;d.addItem=function(n){const r=n&&n.item;var p=n&&n.data;n=n&&n.folder;const g={method:"post"};
r&&(g.query=r.createPostQuery(),null!=p&&("string"===typeof p?g.query.text=p:"object"===typeof p&&(g.query.text=JSON.stringify(p))));p=this.userContentUrl;n&&(p+="/"+("string"===typeof n?n:n.id));return this.portal.request(p+"/addItem",g).then(u=>{r.id=u.id;r.portal=this.portal;return r.loaded?r.reload():r.load()})};d.deleteItem=function(n){let r=this.userContentUrl;n.ownerFolder&&(r+="/"+n.ownerFolder);return this.portal.request(r+`/items/${n.id}/delete`,{method:"post"}).then(()=>{n.id=null;n.portal=
null})};d.deleteItems=function(n){const r=this.userContentUrl+"/deleteItems";var p=n.map(g=>g.id);return p.length?(p={method:"post",query:{items:p.join(",")}},this.portal.request(r,p).then(()=>{n.forEach(g=>{g.id=null;g.portal=null})})):Promise.resolve(void 0)};d.fetchFolders=function(){return this.portal.request(this.userContentUrl??"",{query:{num:1}}).then(n=>n&&n.folders?n.folders.map(r=>{r=e.fromJSON(r);r.portal=this.portal;return r}):[])};d.fetchGroups=function(){return this.portal.request(this.url??
"").then(n=>n&&n.groups?n.groups.map(r=>{r=b.fromJSON(r);r.portal=this.portal;return r}):[])};d.fetchItems=function(n){const r=n??{};let p=this.userContentUrl??"";r.folder&&(p+="/"+r.folder.id);let g;return(new Promise((u,x)=>l(["./PortalItem"],w=>u(Object.freeze(Object.defineProperty({__proto__:null,default:w},Symbol.toStringTag,{value:"Module"}))),x))).then(({default:u})=>{g=u;return this.portal.request(p,{query:{folders:!1,num:r.num||10,start:r.start||1,sortField:r.sortField||"created",sortOrder:r.sortOrder||
"asc"}})}).then(u=>{let x;return u&&u.items?(x=u.items.map(w=>{w=g.fromJSON(w);w.portal=this.portal;return w}),Promise.all(x.map(w=>w.load())).catch(w=>w).then(()=>({items:x,nextStart:u.nextStart,total:u.total}))):{items:[],nextStart:-1,total:0}})};d.fetchTags=function(){return this.portal.request(this.url+"/tags").then(n=>n.tags)};d.getThumbnailUrl=function(n){let r=this.thumbnailUrl;r&&n&&(r+=`&w=${n}`);return r};d.queryFavorites=function(n){return this.favGroupId?(this._favGroup||(this._favGroup=
new b({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(n)):Promise.reject(new B("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};d.toJSON=function(){throw new B("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};a.fromJSON=function(n){if(!n)return null;if(n.declaredClass)throw Error("JSON object is already hydrated");const r=new c;r.sourceJSON=n;r.read(n);return r};h._createClass(a,[{key:"thumbnailUrl",get:function(){const n=
this.url,r=this.thumbnail;return n&&r?this.portal.normalizeUrl(`${n}/info/${r}?f=json`):null}},{key:"userContentUrl",get:function(){const n=this.get("portal.restUrl");return n?`${n}/content/users/${this.username}`:null}},{key:"url",get:function(){const n=this.get("portal.restUrl");return n?`${n}/community/users/${this.username}`:null}}]);return a}(y.JSONSupport);D.__decorate([v.property()],y.prototype,"access",void 0);D.__decorate([v.property({type:Date})],y.prototype,"created",void 0);D.__decorate([v.property()],
y.prototype,"culture",void 0);D.__decorate([v.property()],y.prototype,"description",void 0);D.__decorate([v.property()],y.prototype,"email",void 0);D.__decorate([v.property()],y.prototype,"favGroupId",void 0);D.__decorate([v.property()],y.prototype,"fullName",void 0);D.__decorate([v.property({type:Date})],y.prototype,"modified",void 0);D.__decorate([v.property()],y.prototype,"orgId",void 0);D.__decorate([v.property()],y.prototype,"portal",void 0);D.__decorate([v.property()],y.prototype,"preferredView",
void 0);D.__decorate([v.property()],y.prototype,"privileges",void 0);D.__decorate([v.property()],y.prototype,"region",void 0);D.__decorate([v.property()],y.prototype,"role",void 0);D.__decorate([v.property()],y.prototype,"roleId",void 0);D.__decorate([v.property()],y.prototype,"sourceJSON",void 0);D.__decorate([v.property()],y.prototype,"thumbnail",void 0);D.__decorate([v.property({readOnly:!0})],y.prototype,"thumbnailUrl",null);D.__decorate([v.property()],y.prototype,"units",void 0);D.__decorate([v.property({readOnly:!0})],
y.prototype,"userContentUrl",null);D.__decorate([v.property({readOnly:!0})],y.prototype,"url",null);D.__decorate([v.property()],y.prototype,"username",void 0);D.__decorate([v.property()],y.prototype,"userType",void 0);return y=c=D.__decorate([k.subclass("esri.portal.PortalUser")],y)})},"esri/portal/PortalFolder":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t,q){B=function(k){function e(b){b=k.call(this,b)||this;b.created=null;b.id=null;b.portal=null;b.title=null;b.username=null;return b}l._inherits(e,k);e.prototype.toJSON=function(){throw new D("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};l._createClass(e,[{key:"url",get:function(){const b=this.get("portal.restUrl");return b?`${b}/content/users/${this.username}/${this.id}`:null}}]);return e}(B.JSONSupport);h.__decorate([y.property({type:Date})],
B.prototype,"created",void 0);h.__decorate([y.property()],B.prototype,"id",void 0);h.__decorate([y.property()],B.prototype,"portal",void 0);h.__decorate([y.property()],B.prototype,"title",void 0);h.__decorate([y.property({readOnly:!0})],B.prototype,"url",null);h.__decorate([y.property()],B.prototype,"username",void 0);return B=h.__decorate([q.subclass("esri.portal.PortalFolder")],B)})},"esri/portal/PortalGroup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){B=function(b){function c(a){a=b.call(this,a)||this;a.access=null;a.created=null;a.description=null;a.id=null;a.isInvitationOnly=!1;a.modified=null;a.owner=null;a.portal=null;a.snippet=null;a.sortField=null;a.sortOrder=null;a.tags=null;a.title=null;return a}l._inherits(c,b);var f=c.prototype;f.fetchCategorySchema=function(a){return y.unwrapOrThrow(this.portal).request(this.url+"/categorySchema",a).then(d=>{d=d.categorySchema||[];return d.some(n=>"contentCategorySetsGroupQuery.LivingAtlas"===
n.source)?this._fetchCategorySchemaSet("LivingAtlas",a):d})};f.fetchMembers=function(a){return y.unwrapOrThrow(this.portal).request(this.url+"/users",a)};f.getThumbnailUrl=function(a){let d=this.thumbnailUrl;d&&a&&(d+=`&w=${a}`);return d};f.toJSON=function(){throw new D("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};f.queryItems=function(a,d){a=C.ensureType(e,a);const n=y.unwrapOrThrow(this.portal);if(5<parseFloat(n.currentVersion))return a=a||new e,n.queryPortal(`/content/groups/${this.id}/search`,
a,"PortalItem",d);a=a?a.clone():new e;a.query="group:"+this.id+(a.query?" "+a.query:"");return n.queryItems(a,d)};f._fetchCategorySchemaSet=function(a,d){const n=y.unwrapOrThrow(this.portal);return n.fetchSelf(n.authMode,!0,d).then(r=>{if(r=r.contentCategorySetsGroupQuery){const p=new e;p.disableExtraQuery=!0;p.num=1;p.query=r;return n.queryGroups(p,d)}throw new D("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(r=>{if(r.total){r=r.results[0];const p=new e;
p.num=1;p.query=`typekeywords:"${a}"`;return r.queryItems(p,d)}throw new D("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(r=>r.total?r.results[0].fetchData("json",d).then(p=>(p=p&&p.categorySchema)&&p.length?p:[]):[])};l._createClass(c,[{key:"thumbnailUrl",get:function(){const a=this.url,d=this.thumbnail;return a&&d&&this.portal?this.portal?.normalizeUrl(`${a}/info/${d}?f=json`):null}},{key:"url",get:function(){const a=this.get("portal.restUrl");return a?
a+"/community/groups/"+this.id:null}}]);return c}(B.JSONSupport);h.__decorate([v.property()],B.prototype,"access",void 0);h.__decorate([v.property({type:Date})],B.prototype,"created",void 0);h.__decorate([v.property()],B.prototype,"description",void 0);h.__decorate([v.property()],B.prototype,"id",void 0);h.__decorate([v.property()],B.prototype,"isInvitationOnly",void 0);h.__decorate([v.property({type:Date})],B.prototype,"modified",void 0);h.__decorate([v.property()],B.prototype,"owner",void 0);h.__decorate([v.property()],
B.prototype,"portal",void 0);h.__decorate([v.property()],B.prototype,"snippet",void 0);h.__decorate([v.property()],B.prototype,"sortField",void 0);h.__decorate([v.property()],B.prototype,"sortOrder",void 0);h.__decorate([v.property()],B.prototype,"tags",void 0);h.__decorate([v.property()],B.prototype,"thumbnail",void 0);h.__decorate([v.property({readOnly:!0})],B.prototype,"thumbnailUrl",null);h.__decorate([v.property()],B.prototype,"title",void 0);h.__decorate([v.property({readOnly:!0})],B.prototype,
"url",null);return B=h.__decorate([k.subclass("esri.portal.PortalGroup")],B)})},"esri/symbols/LineSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./LineStyleMarker3D ./Symbol3DLayer ./patterns/LineStylePattern3D ./patterns/utils ./support/colors ./support/materialUtils ./support/Symbol3DMaterial ./support/symbolLayerUtils3D".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n){var r;y=r=function(p){function g(u){u=p.call(this,u)||this;u.material=null;u.type="line";u.join="miter";u.cap="butt";u.size=D.px2pt(1);u.pattern=null;u.marker=null;return u}l._inherits(g,p);g.prototype.clone=function(){const u={enabled:this.enabled,material:null!=this.material?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:null!=this.pattern?this.pattern.clone():null,marker:null!=this.marker?this.marker.clone():null};return new r(u)};
g.fromSimpleLineSymbol=function(u){u={enabled:!0,size:u.width??D.px2pt(1),cap:u.cap||"butt",join:u.join||"miter",pattern:u.style&&"inside-frame"!==u.style?new b({style:u.style}):null,material:new d.Symbol3DMaterial({color:(u.color||f.white).clone()}),marker:u.marker?new k({placement:u.marker.placement,style:u.marker.style,color:u.marker.color?.clone()??null}):null};return new r(u)};return l._createClass(g)}(e);h.__decorate([B.property({type:d.Symbol3DMaterial,json:{write:!0}})],y.prototype,"material",
void 0);h.__decorate([t.enumeration({Line:"line"},{readOnly:!0})],y.prototype,"type",void 0);h.__decorate([B.property({type:n.lineJoins,json:{write:!0,default:"miter"}})],y.prototype,"join",void 0);h.__decorate([B.property({type:n.lineCaps,json:{write:!0,default:"butt"}})],y.prototype,"cap",void 0);h.__decorate([B.property(a.screenSizeProperty)],y.prototype,"size",void 0);h.__decorate([B.property(c.symbol3dLinePatternProperty)],y.prototype,"pattern",void 0);h.__decorate([B.property({types:{key:"type",
base:k,typeMap:{style:k}},json:{write:!0}})],y.prototype,"marker",void 0);return y=r=h.__decorate([q.subclass("esri.symbols.LineSymbol3DLayer")],y)})},"esri/symbols/LineStyleMarker3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./support/lineMarkers".split(" "),function(l,
h,D,B,y,v,C,t,q,k,e){B=function(b){function c(f){f=b.call(this,f)||this;f.type="style";f.placement="begin-end";f.style="arrow";f.color=null;return f}l._inherits(c,b);c.prototype.equals=function(f){return null!=f&&f.placement===this.placement&&f.style===this.style&&(null==this.color&&null==f.color||null!=this.color&&null!=f.color&&this.color.toJSON()===f.color.toJSON())};return l._createClass(c)}(B.ClonableMixin(y.JSONSupport));h.__decorate([v.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],
B.prototype,"type",void 0);h.__decorate([v.property({type:e.lineMarkerPlacements,json:{default:"begin-end",write:!0}})],B.prototype,"placement",void 0);h.__decorate([v.property({type:e.lineMarkerStyles,json:{default:"arrow",write:!0}})],B.prototype,"style",void 0);h.__decorate([v.property({type:D,json:{type:[C.Integer],default:null,write:!0}})],B.prototype,"color",void 0);return B=h.__decorate([k.subclass("esri.symbols.LineStyleMarker3D")],B)})},"esri/symbols/ObjectSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition3D ./support/Symbol3DMaterial".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){var c;B=c=function(f){function a(d){d=f.call(this,d)||this;d.material=null;d.castShadows=!0;d.resource=null;d.type="object";d.width=void 0;d.height=void 0;d.depth=void 0;d.anchor=void 0;d.anchorPosition=void 0;d.heading=void 0;d.tilt=void 0;d.roll=void 0;return d}l._inherits(a,f);a.prototype.clone=function(){return new c({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,
enabled:this.enabled,height:this.height,material:null!=this.material?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})};l._createClass(a,[{key:"isPrimitive",get:function(){return!this.resource||"string"!==typeof this.resource.href}}]);return a}(q);h.__decorate([D.property({type:b.Symbol3DMaterial,json:{write:!0}})],B.prototype,"material",void 0);h.__decorate([D.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],
B.prototype,"castShadows",void 0);h.__decorate([D.property({type:k.ObjectSymbol3DLayerResource,json:{write:!0}})],B.prototype,"resource",void 0);h.__decorate([C.enumeration({Object:"object"},{readOnly:!0})],B.prototype,"type",void 0);h.__decorate([D.property({type:Number,json:{write:!0}})],B.prototype,"width",void 0);h.__decorate([D.property({type:Number,json:{write:!0}})],B.prototype,"height",void 0);h.__decorate([D.property({type:Number,json:{write:!0}})],B.prototype,"depth",void 0);h.__decorate([C.enumeration({center:"center",
top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),D.property({json:{default:"origin"}})],B.prototype,"anchor",void 0);h.__decorate([D.property({type:e.Symbol3DAnchorPosition3D,json:{type:[Number],read:{reader:f=>new e.Symbol3DAnchorPosition3D({x:f[0],y:f[1],z:f[2]})},write:{writer:(f,a)=>{a.anchorPosition=[f.x,f.y,f.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],B.prototype,"anchorPosition",void 0);h.__decorate([D.property({type:Number,json:{write:!0}})],B.prototype,
"heading",void 0);h.__decorate([D.property({type:Number,json:{write:!0}})],B.prototype,"tilt",void 0);h.__decorate([D.property({type:Number,json:{write:!0}})],B.prototype,"roll",void 0);h.__decorate([D.property({readOnly:!0})],B.prototype,"isPrimitive",null);return B=c=h.__decorate([t.subclass("esri.symbols.ObjectSymbol3DLayer")],B)})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../chunks/persistableUrlUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){var c;B=B.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});l.ObjectSymbol3DLayerResource=c=function(f){function a(){return f.apply(this,arguments)||this}h._inherits(a,f);a.prototype.clone=function(){return new c({href:this.href,primitive:this.primitive})};return h._createClass(a)}(y.JSONSupport);D.__decorate([v.property({type:String,json:{read:b.read,write:b.write}})],
l.ObjectSymbol3DLayerResource.prototype,"href",void 0);D.__decorate([k.enumeration(B)],l.ObjectSymbol3DLayerResource.prototype,"primitive",void 0);l.ObjectSymbol3DLayerResource=c=D.__decorate([e.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],l.ObjectSymbol3DLayerResource);l.defaultPrimitive="sphere";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t,q){var k;l.Symbol3DAnchorPosition3D=k=function(e){function b(){var c=e.apply(this,arguments)||this;c.x=0;c.y=0;c.z=0;return c}h._inherits(b,e);b.prototype.clone=function(){return new k({x:this.x,y:this.y,z:this.z})};return h._createClass(b)}(B);D.__decorate([y.property({type:Number})],l.Symbol3DAnchorPosition3D.prototype,"x",void 0);D.__decorate([y.property({type:Number})],l.Symbol3DAnchorPosition3D.prototype,"y",void 0);D.__decorate([y.property({type:Number})],l.Symbol3DAnchorPosition3D.prototype,
"z",void 0);l.Symbol3DAnchorPosition3D=k=D.__decorate([q.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],l.Symbol3DAnchorPosition3D);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/PathSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/Symbol3DMaterial ./support/symbolLayerUtils3D".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){var c;B=c=function(f){function a(n){n=f.call(this,n)||this;n.material=null;n.castShadows=!0;n.type="path";n.profile="circle";n.join="miter";n.cap="butt";n.width=void 0;n.height=void 0;n.anchor="center";n.profileRotation="all";return n}l._inherits(a,f);var d=a.prototype;d.readWidth=function(n,r){return null!=n?n:null==r.height&&null!=r.size?r.size:void 0};d.readHeight=function(n,r){return null!=n?n:null==r.width&&null!=r.size?r.size:void 0};d.clone=function(){return new c({enabled:this.enabled,
material:null!=this.material?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})};return l._createClass(a)}(k);h.__decorate([D.property({type:e.Symbol3DMaterial,json:{write:!0}})],B.prototype,"material",void 0);h.__decorate([D.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],B.prototype,"castShadows",void 0);h.__decorate([C.enumeration({Path:"path"},
{readOnly:!0})],B.prototype,"type",void 0);h.__decorate([D.property({type:["circle","quad"],json:{write:!0,default:"circle"}})],B.prototype,"profile",void 0);h.__decorate([D.property({type:b.lineJoins,json:{write:!0,default:"miter"}})],B.prototype,"join",void 0);h.__decorate([D.property({type:b.pathCaps,json:{write:!0,default:"butt"}})],B.prototype,"cap",void 0);h.__decorate([D.property({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],B.prototype,"width",void 0);
h.__decorate([t.reader("width",["width","size","height"])],B.prototype,"readWidth",null);h.__decorate([D.property({type:Number,json:{write:!0}})],B.prototype,"height",void 0);h.__decorate([t.reader("height",["height","size","width"])],B.prototype,"readHeight",null);h.__decorate([D.property({type:["center","bottom","top"],json:{write:!0,default:"center"}})],B.prototype,"anchor",void 0);h.__decorate([D.property({type:["heading","all"],json:{write:!0,default:"all"}})],B.prototype,"profileRotation",void 0);
return B=c=h.__decorate([q.subclass("esri.symbols.PathSymbol3DLayer")],B)})},"esri/symbols/TextSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo ./support/Symbol3DMaterial ./support/Symbol3DTextBackground ./support/textUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a){var d;y=d=function(n){function r(g){g=n.call(this,g)||this;g._userSize=void 0;g.halo=null;g.horizontalAlignment="center";g.lineHeight=1;g.material=null;g.background=null;g.text=null;g.type="text";g.verticalAlignment="baseline";return g}l._inherits(r,n);var p=r.prototype;p.writeFont=function(g,u,x,w){u.font=g.write({},{...w,textSymbol3D:!0});delete u.font.size};p.clone=function(){const g=new d({enabled:this.enabled,font:this.font&&D.clone(this.font),halo:this.halo&&
D.clone(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:null!=this.material?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:D.clone(this.background)});g._userSize=this._userSize;return g};r.fromTextSymbol=function(g){var u=d,x=null!=g.font?g.font.clone():new q;var w=g.haloColor;var m=g.haloSize;w=w&&null!=m&&0<m?new b.Symbol3DHalo({color:D.clone(w),size:m}):null;return new u({font:x,halo:w,horizontalAlignment:g.horizontalAlignment,
lineHeight:g.lineHeight,material:g.color?new c.Symbol3DMaterial({color:g.color.clone()}):null,text:g.text,verticalAlignment:g.verticalAlignment,background:g.backgroundColor?new f.Symbol3DTextBackground({color:g.backgroundColor.clone()}):null})};l._createClass(r,[{key:"font",get:function(){return this._get("font")||null},set:function(g){null!=g&&null!=this._userSize&&(g.size=this._userSize);this._set("font",g)}},{key:"size",get:function(){return null!=this._userSize?this._userSize:null!=this.font&&
null!=this.font.size?this.font.size:9},set:function(g){this._userSize=g;null!=this.font&&(this.font.size=this._userSize);this.notifyChange("size")}}]);return r}(k);h.__decorate([B.property({type:q,json:{write:!0}})],y.prototype,"font",null);h.__decorate([t.writer("font")],y.prototype,"writeFont",null);h.__decorate([B.property({type:b.Symbol3DHalo,json:{write:!0}})],y.prototype,"halo",void 0);h.__decorate([B.property({...a.horizontalAlignmentProperty,json:{default:"center",write:!0}})],y.prototype,
"horizontalAlignment",void 0);h.__decorate([B.property({...a.lineHeightProperty,json:{default:1,write:!0}})],y.prototype,"lineHeight",void 0);h.__decorate([B.property({type:c.Symbol3DMaterial,json:{write:!0}})],y.prototype,"material",void 0);h.__decorate([B.property({type:f.Symbol3DTextBackground,json:{write:!0}})],y.prototype,"background",void 0);h.__decorate([B.property(e.screenSizeProperty)],y.prototype,"size",null);h.__decorate([B.property({type:String,json:{write:!0}})],y.prototype,"text",void 0);
h.__decorate([v.enumeration({Text:"text"},{readOnly:!0})],y.prototype,"type",void 0);h.__decorate([B.property({...a.verticalAlignmentProperty,json:{default:"baseline",write:!0}})],y.prototype,"verticalAlignment",void 0);return y=d=h.__decorate([C.subclass("esri.symbols.TextSymbol3DLayer")],y)})},"esri/symbols/support/Symbol3DHalo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;l.Symbol3DHalo=e=function(b){function c(){var f=b.apply(this,arguments)||this;f.color=new B([0,0,0,1]);f.size=0;return f}h._inherits(c,b);c.prototype.clone=function(){const f={color:v.clone(this.color),size:this.size};return new e(f)};return h._createClass(c)}(y.JSONSupport);D.__decorate([C.property(k.colorAndTransparencyProperty)],l.Symbol3DHalo.prototype,"color",void 0);D.__decorate([C.property(k.screenSizeProperty)],l.Symbol3DHalo.prototype,"size",void 0);l.Symbol3DHalo=
e=D.__decorate([q.subclass("esri.symbols.support.Symbol3DHalo")],l.Symbol3DHalo);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DTextBackground":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){l.Symbol3DTextBackground=function(b){function c(f){f=b.call(this,f)||this;f.color=null;return f}h._inherits(c,b);return h._createClass(c)}(B.ClonableMixin(y.JSONSupport));D.__decorate([v.property(e.colorAndTransparencyProperty)],l.Symbol3DTextBackground.prototype,"color",void 0);l.Symbol3DTextBackground=D.__decorate([k.subclass("esri.symbols.support.Symbol3DTextBackground")],l.Symbol3DTextBackground);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/WaterSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer".split(" "),
function(l,h,D,B,y,v,C,t,q){var k;q=k=function(b){function c(f){f=b.call(this,f)||this;f.color=e.clone();f.type="water";f.waterbodySize="medium";f.waveDirection=null;f.waveStrength="moderate";return f}l._inherits(c,b);c.prototype.clone=function(){return new k({color:B.clone(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})};return l._createClass(c)}(q);h.__decorate([y.property({type:D,nonNullable:!0,json:{type:[v.Integer],write:(b,c,f)=>
c[f]=b.toArray(D.AlphaMode.UNLESS_OPAQUE),default:()=>e.clone(),defaultEquals:b=>b.toCss(!0)===e.toCss(!0)}})],q.prototype,"color",void 0);h.__decorate([C.enumeration({Water:"water"},{readOnly:!0})],q.prototype,"type",void 0);h.__decorate([y.property({type:["small","medium","large"],json:{write:!0,default:"medium"}})],q.prototype,"waterbodySize",void 0);h.__decorate([y.property({type:Number,json:{write:!0,default:null}})],q.prototype,"waveDirection",void 0);h.__decorate([y.property({type:["calm",
"rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],q.prototype,"waveStrength",void 0);q=k=h.__decorate([t.subclass("esri.symbols.WaterSymbol3DLayer")],q);const e=new D([0,119,190]);return q})},"esri/symbols/support/StyleOrigin":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../portal/Portal".split(" "),
function(l,h,D,B,y,v,C,t,q){var k;D=k=function(e){function b(c){c=e.call(this,c)||this;c.name=null;c.styleUrl=null;c.styleName=null;c.portal=null;return c}l._inherits(b,e);b.prototype.clone=function(){return new k({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};return l._createClass(b)}(D);h.__decorate([B.property({type:String})],D.prototype,"name",void 0);h.__decorate([B.property({type:String})],D.prototype,"styleUrl",void 0);h.__decorate([B.property({type:String})],
D.prototype,"styleName",void 0);h.__decorate([B.property({type:q})],D.prototype,"portal",void 0);return D=k=h.__decorate([t.subclass("esri.symbols.support.StyleOrigin")],D)})},"esri/symbols/support/Thumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(l,
h,D,B,y,v,C,t,q){var k;l.Thumbnail=k=function(e){function b(){var c=e.apply(this,arguments)||this;c.url="";return c}h._inherits(b,e);b.prototype.clone=function(){return new k({url:this.url})};return h._createClass(b)}(B);D.__decorate([y.property({type:String})],l.Thumbnail.prototype,"url",void 0);l.Thumbnail=k=D.__decorate([q.subclass("esri.symbols.support.Thumbnail")],l.Thumbnail);Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/callouts/calloutUtils":function(){define(["exports",
"./Callout3D","./LineCallout3D"],function(l,h,D){function B(y){if(!y)return!1;y=y.verticalOffset;return!y||0>=y.screenLength||null!=y.maxWorldLength&&0>=y.maxWorldLength?!1:!0}l.calloutProperty={types:{key:"type",base:h,typeMap:{line:D}},json:{write:!0}};l.hasCalloutSupport=function(y){return"point-3d"===y.type||"label-3d"===y.type};l.hasVisibleCallout=function(y){if(!y||!y.supportsCallout||!y.supportsCallout())return!1;const v=y.callout;return v&&v.visible?B(y)?!0:!1:!1};l.hasVisibleVerticalOffset=
B;l.textSymbolLayerSupportsVerticalOffset=function(y){return"center"===y.horizontalAlignment};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/callouts/Callout3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(l,h,D,B,y,v,C,t){D=
function(q){function k(e){e=q.call(this,e)||this;e.visible=!0;return e}l._inherits(k,q);k.prototype.clone=function(){};return l._createClass(k)}(D.JSONSupport);h.__decorate([B.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],D.prototype,"type",void 0);h.__decorate([B.property({readOnly:!0})],D.prototype,"visible",void 0);return D=h.__decorate([t.subclass("esri.symbols.callouts.Callout3D")],D)})},"esri/symbols/callouts/LineCallout3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Callout3D ../../chunks/LineCallout3DBorder ../support/materialUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){var c;C=c=function(f){function a(d){d=f.call(this,d)||this;d.type="line";d.color=new D([0,0,0,1]);d.size=y.px2pt(1);d.border=null;return d}l._inherits(a,f);a.prototype.clone=function(){return new c({color:B.clone(this.color),size:this.size,border:B.clone(this.border)})};l._createClass(a,[{key:"visible",get:function(){return 0<this.size&&null!=this.color&&0<this.color.a}}]);return a}(k);h.__decorate([t.enumeration({line:"line"},{readOnly:!0})],C.prototype,"type",void 0);
h.__decorate([v.property(b.colorAndTransparencyProperty)],C.prototype,"color",void 0);h.__decorate([v.property(b.screenSizeProperty)],C.prototype,"size",void 0);h.__decorate([v.property({type:e.LineCallout3DBorder$1,json:{write:!0}})],C.prototype,"border",void 0);h.__decorate([v.property({readOnly:!0})],C.prototype,"visible",null);return C=c=h.__decorate([q.subclass("esri.symbols.callouts.LineCallout3D")],C)})},"esri/chunks/LineCallout3DBorder":function(){define("exports ./_rollupPluginBabelHelpers ./tslib.es6 ../Color ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../symbols/support/materialUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;y=e=function(b){function c(){var f=b.apply(this,arguments)||this;f.color=new B("white");return f}h._inherits(c,b);c.prototype.clone=function(){return new e({color:v.clone(this.color)})};return h._createClass(c)}(y.JSONSupport);D.__decorate([C.property(k.colorAndTransparencyProperty)],y.prototype,"color",void 0);D=y=e=D.__decorate([q.subclass("esri.symbols.callouts.LineCallout3DBorder")],y);C=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,
{value:"Module"}));l.LineCallout3DBorder=C;l.LineCallout3DBorder$1=D})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),function(l,h,D,B,y,v,C,t,q){var k;D=k=function(e){function b(c){c=e.call(this,c)||
this;c.screenLength=0;c.minWorldLength=0;c.maxWorldLength=null;return c}l._inherits(b,e);b.prototype.clone=function(){return new k({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};return l._createClass(b)}(D.JSONSupport);h.__decorate([B.property(q.screenSizeProperty)],D.prototype,"screenLength",void 0);h.__decorate([B.property({type:Number,nonNullable:!0,json:{write:!0,default:0}})],D.prototype,"minWorldLength",void 0);h.__decorate([B.property({type:Number,
json:{write:!0}})],D.prototype,"maxWorldLength",void 0);return D=k=h.__decorate([t.subclass("esri.symbols.support.Symbol3DVerticalOffset")],D)})},"esri/symbols/LineSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){var b;const c=D.ofType({base:null,key:"type",typeMap:{line:q,path:k}});D=D.ofType({base:null,key:"type",typeMap:{line:q,path:k}});e=b=function(f){function a(d){d=f.call(this,d)||this;d.symbolLayers=new c;d.type="line-3d";return d}l._inherits(a,f);a.prototype.clone=function(){return new b({styleOrigin:B.clone(this.styleOrigin),symbolLayers:B.clone(this.symbolLayers),thumbnail:B.clone(this.thumbnail)})};a.fromSimpleLineSymbol=function(d){return new b({symbolLayers:[q.fromSimpleLineSymbol(d)]})};
return l._createClass(a)}(e);h.__decorate([y.property({type:c,json:{type:D}})],e.prototype,"symbolLayers",void 0);h.__decorate([C.enumeration({LineSymbol3D:"line-3d"},{readOnly:!0})],e.prototype,"type",void 0);return e=b=h.__decorate([t.subclass("esri.symbols.LineSymbol3D")],e)})},"esri/symbols/MarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Symbol".split(" "),
function(l,h,D,B,y,v,C,t,q){y=function(k){function e(b){b=k.call(this,b)||this;b.angle=0;b.type=null;b.xoffset=0;b.yoffset=0;b.size=9;return b}l._inherits(e,k);e.prototype.hash=function(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`};return l._createClass(e)}(q);h.__decorate([B.property({type:Number,json:{read:k=>k&&-1*k,write:(k,e)=>e.angle=k&&-1*k}})],y.prototype,"angle",void 0);h.__decorate([B.property({type:["simple-marker","picture-marker"],readOnly:!0})],y.prototype,
"type",void 0);h.__decorate([B.property({type:Number,cast:D.toPt,json:{write:!0}})],y.prototype,"xoffset",void 0);h.__decorate([B.property({type:Number,cast:D.toPt,json:{write:!0}})],y.prototype,"yoffset",void 0);h.__decorate([B.property({type:Number,cast:k=>"auto"===k?k:D.toPt(k),json:{write:!0}})],y.prototype,"size",void 0);return y=h.__decorate([t.subclass("esri.symbols.MarkerSymbol")],y)})},"esri/symbols/MeshSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol3DLayer ./Symbol3D".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;const b=D.ofType({base:null,key:"type",typeMap:{fill:q}});D=e=function(c){function f(a){a=c.call(this,a)||this;a.symbolLayers=new b;a.type="mesh-3d";return a}l._inherits(f,c);f.prototype.clone=function(){return new e({styleOrigin:B.clone(this.styleOrigin),symbolLayers:B.clone(this.symbolLayers),thumbnail:B.clone(this.thumbnail)})};f.fromSimpleFillSymbol=function(a){return new e({symbolLayers:[q.fromSimpleFillSymbol(a)]})};return l._createClass(f)}(k);h.__decorate([y.property({type:b})],
D.prototype,"symbolLayers",void 0);h.__decorate([C.enumeration({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],D.prototype,"type",void 0);return D=e=h.__decorate([t.subclass("esri.symbols.MeshSymbol3D")],D)})},"esri/symbols/PictureFillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol ./support/urlUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k){var e;v=e=function(b){function c(...a){a=b.call(this,...a)||this;a.type="picture-fill";a.url=null;a.xscale=1;a.yscale=1;a.width=12;a.height=12;a.xoffset=0;a.yoffset=0;a.source=null;return a}l._inherits(c,b);var f=c.prototype;f.normalizeCtorArgs=function(a,d,n,r){if(a&&"string"!==typeof a&&null==a.imageData)return a;const p={};a&&(p.url=a);d&&(p.outline=d);null!=n&&(p.width=B.toPt(n));null!=r&&(p.height=B.toPt(r));return p};f.clone=function(){const a=new e({color:D.clone(this.color),
height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});a._set("source",D.clone(this.source));return a};f.hash=function(){return`${l._get(l._getPrototypeOf(c.prototype),"hash",this).call(this)}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`};return l._createClass(c)}(q);h.__decorate([C.enumeration({esriPFS:"picture-fill"},
{readOnly:!0})],v.prototype,"type",void 0);h.__decorate([y.property(k.urlPropertyDefinition)],v.prototype,"url",void 0);h.__decorate([y.property({type:Number,json:{write:!0}})],v.prototype,"xscale",void 0);h.__decorate([y.property({type:Number,json:{write:!0}})],v.prototype,"yscale",void 0);h.__decorate([y.property({type:Number,cast:B.toPt,json:{write:!0}})],v.prototype,"width",void 0);h.__decorate([y.property({type:Number,cast:B.toPt,json:{write:!0}})],v.prototype,"height",void 0);h.__decorate([y.property({type:Number,
cast:B.toPt,json:{write:!0}})],v.prototype,"xoffset",void 0);h.__decorate([y.property({type:Number,cast:B.toPt,json:{write:!0}})],v.prototype,"yoffset",void 0);h.__decorate([y.property(k.sourcePropertyDefinition)],v.prototype,"source",void 0);return v=e=h.__decorate([t.subclass("esri.symbols.PictureFillSymbol")],v)})},"esri/symbols/support/urlUtils":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(l,h,D){function B(t,q,k){return q.imageData?h.makeData({mediaType:q.contentType||
"image/png",isBase64:!0,data:q.imageData}):y(q.url,k)}function y(t,q){return null==q||"service"!==q.origin&&"portal-item"!==q.origin||"feature"!==q.layer?.type&&"stream"!==q.layer?.type||h.isAbsolute(t)||!q?.layer?.parsedUrl?D.fromJSON(t,q):h.join(q.layer.parsedUrl.path,"images",t)}function v(t,q,k,e){if(h.isDataProtocol(t)){if(t=h.dataComponents(t))q.contentType=t.mediaType,q.imageData=t.data,k&&k.imageData===q.imageData&&k.url&&D.write(k.url,q,"url",e)}else D.write(t,q,"url",e)}const C={json:{read:{source:["imageData",
"url"],reader:B},write:{writer(t,q,k,e){v(t,q,this.source,e)}}}};l.read=y;l.readImageDataOrUrl=B;l.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,q,k){t={};q.imageData&&(t.imageData=q.imageData);q.contentType&&(t.contentType=q.contentType);q.url&&(t.url=y(q.url,k));return t}}}};l.urlPropertyDefinition=C;l.writeImageDataAndUrl=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/PictureMarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./MarkerSymbol ./support/urlUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){var b;v=b=function(c){function f(...d){d=c.call(this,...d)||this;d.color=null;d.type="picture-marker";d.url=null;d.source=null;d.height=12;d.width=12;d.size=null;return d}l._inherits(f,c);var a=f.prototype;a.normalizeCtorArgs=function(d,n,r){if(d&&"string"!==typeof d&&null==d.imageData)return d;const p={};d&&(p.url=d);null!=n&&(p.width=B.toPt(n));null!=r&&(p.height=B.toPt(r));return p};a.readHeight=function(d,n){return n.size||d};a.readWidth=function(d,n){return n.size||
d};a.clone=function(){const d=new b({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});d._set("source",D.clone(this.source));return d};a.hash=function(){return`${l._get(l._getPrototypeOf(f.prototype),"hash",this).call(this)}.${this.height}.${this.url}.${this.width}`};return l._createClass(f)}(k);h.__decorate([y.property({json:{write:!1}})],v.prototype,"color",void 0);h.__decorate([C.enumeration({esriPMS:"picture-marker"},{readOnly:!0})],
v.prototype,"type",void 0);h.__decorate([y.property(e.urlPropertyDefinition)],v.prototype,"url",void 0);h.__decorate([y.property(e.sourcePropertyDefinition)],v.prototype,"source",void 0);h.__decorate([y.property({type:Number,cast:B.toPt,json:{write:!0}})],v.prototype,"height",void 0);h.__decorate([t.reader("height",["height","size"])],v.prototype,"readHeight",null);h.__decorate([y.property({type:Number,cast:B.toPt,json:{write:!0}})],v.prototype,"width",void 0);h.__decorate([y.property({json:{write:!1}})],
v.prototype,"size",void 0);return v=b=h.__decorate([q.subclass("esri.symbols.PictureMarkerSymbol")],v)})},"esri/symbols/PointSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f){var a;const d=D.ofType({base:null,key:"type",typeMap:{icon:q,object:k,text:b}});D=a=function(n){function r(g){g=n.call(this,g)||this;g.verticalOffset=null;g.callout=null;g.symbolLayers=new d;g.type="point-3d";return g}l._inherits(r,n);var p=r.prototype;p.supportsCallout=function(){if(1>(this.symbolLayers?this.symbolLayers.length:0))return!1;for(const g of this.symbolLayers.items)switch(g.type){case "icon":case "text":case "object":continue;default:return!1}return!0};
p.hasVisibleCallout=function(){return c.hasVisibleCallout(this)};p.hasVisibleVerticalOffset=function(){return c.hasVisibleVerticalOffset(this)};p.clone=function(){return new a({verticalOffset:B.clone(this.verticalOffset),callout:B.clone(this.callout),styleOrigin:B.clone(this.styleOrigin),symbolLayers:B.clone(this.symbolLayers),thumbnail:B.clone(this.thumbnail)})};r.fromSimpleMarkerSymbol=function(g){return new a({symbolLayers:[q.fromSimpleMarkerSymbol(g)]})};r.fromPictureMarkerSymbol=function(g){return new a({symbolLayers:[q.fromPictureMarkerSymbol(g)]})};
r.fromCIMSymbol=function(g){return"CIMPointSymbol"!==g.data?.symbol?.type?null:g.data.symbol?.callout?new a({symbolLayers:[q.fromCIMSymbol(g)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new a({symbolLayers:[q.fromCIMSymbol(g)]})};r.fromTextSymbol=function(g){return new a({symbolLayers:[b.fromTextSymbol(g)]})};return l._createClass(r)}(e);h.__decorate([y.property({type:f,json:{write:!0}})],D.prototype,"verticalOffset",void 0);h.__decorate([y.property(c.calloutProperty)],
D.prototype,"callout",void 0);h.__decorate([y.property({type:d,json:{origins:{"web-scene":{write:!0}}}})],D.prototype,"symbolLayers",void 0);h.__decorate([C.enumeration({PointSymbol3D:"point-3d"},{readOnly:!0})],D.prototype,"type",void 0);return D=a=h.__decorate([t.subclass("esri.symbols.PointSymbol3D")],D)})},"esri/symbols/PolygonSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./WaterSymbol3DLayer".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d){var n;const r=D.ofType({base:null,key:"type",typeMap:{extrude:q,fill:k,icon:e,line:b,object:c,text:a,water:d}});D=n=function(p){function g(u){u=p.call(this,u)||this;u.symbolLayers=new r;u.type="polygon-3d";return u}l._inherits(g,p);g.prototype.clone=function(){return new n({styleOrigin:B.clone(this.styleOrigin),symbolLayers:B.clone(this.symbolLayers),thumbnail:B.clone(this.thumbnail)})};g.fromJSON=function(u){const x=new n;x.read(u);if(2===x.symbolLayers.length&&
"fill"===x.symbolLayers.at(0).type&&"line"===x.symbolLayers.at(1).type){const w=x.symbolLayers.at(0),m=x.symbolLayers.at(1);!m.enabled||u.symbolLayers&&u.symbolLayers[1]&&!1===u.symbolLayers[1].enable||(w.outline={size:m.size,color:null!=m.material?m.material.color:null});x.symbolLayers.removeAt(1)}return x};g.fromSimpleFillSymbol=function(u){return new n({symbolLayers:[k.fromSimpleFillSymbol(u)]})};return l._createClass(g)}(f);h.__decorate([y.property({type:r,json:{write:!0}})],D.prototype,"symbolLayers",
void 0);h.__decorate([C.enumeration({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],D.prototype,"type",void 0);return D=n=h.__decorate([t.subclass("esri.symbols.PolygonSymbol3D")],D)})},"esri/symbols/SimpleFillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol ./SimpleLineSymbol".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e){var b;B=new B.JSONMap({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});k=b=function(c){function f(...d){d=c.call(this,...d)||this;d.color=new D([0,0,0,.25]);d.outline=new e;d.type="simple-fill";d.style="solid";return d}l._inherits(f,c);var a=f.prototype;a.normalizeCtorArgs=
function(d,n,r){if(d&&"string"!==typeof d)return d;const p={};d&&(p.style=d);n&&(p.outline=n);r&&(p.color=r);return p};a.clone=function(){return new b({color:y.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})};a.hash=function(){return`${l._get(l._getPrototypeOf(f.prototype),"hash",this).call(this)}${this.style}.${this.color&&this.color.hash()}`};return l._createClass(f)}(k);h.__decorate([v.property()],k.prototype,"color",void 0);h.__decorate([v.property()],k.prototype,
"outline",void 0);h.__decorate([t.enumeration({esriSFS:"simple-fill"},{readOnly:!0})],k.prototype,"type",void 0);h.__decorate([v.property({type:B.apiValues,json:{read:B.read,write:B.write}})],k.prototype,"style",void 0);return k=b=h.__decorate([q.subclass("esri.symbols.SimpleFillSymbol")],k)})},"esri/symbols/SimpleMarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c){var f;B=new B.JSONMap({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});b=f=function(a){function d(...r){r=a.call(this,...r)||this;r.color=new D([255,255,255,.25]);r.type="simple-marker";r.size=12;r.style="circle";r.outline=new c;return r}l._inherits(d,a);var n=d.prototype;n.normalizeCtorArgs=function(r,p,g,u){if(r&&"string"!==typeof r)return r;const x={};r&&
(x.style=r);null!=p&&(x.size=v.toPt(p));g&&(x.outline=g);u&&(x.color=u);return x};n.writeColor=function(r,p){r&&"x"!==this.style&&"cross"!==this.style&&(p.color=r.toJSON());null===r&&(p.color=null)};n.clone=function(){return new f({angle:this.angle,color:y.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})};n.hash=function(){return`${l._get(l._getPrototypeOf(d.prototype),"hash",this).call(this)}.${this.color&&
this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`};l._createClass(d,[{key:"path",set:function(r){this.style="path";this._set("path",r)}}]);return d}(b);h.__decorate([C.property()],b.prototype,"color",void 0);h.__decorate([e.writer("color")],b.prototype,"writeColor",null);h.__decorate([q.enumeration({esriSMS:"simple-marker"},{readOnly:!0})],b.prototype,"type",void 0);h.__decorate([C.property()],b.prototype,"size",void 0);h.__decorate([C.property({type:B.apiValues,json:{read:B.read,
write:B.write}})],b.prototype,"style",void 0);h.__decorate([C.property({type:String,json:{write:!0}})],b.prototype,"path",null);h.__decorate([C.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":c}},json:{default:null,write:!0}})],b.prototype,"outline",void 0);return b=f=h.__decorate([k.subclass("esri.symbols.SimpleMarkerSymbol")],b)})},"esri/symbols/TextSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Font ./Symbol ./support/textUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c){var f;b=f=function(a){function d(...r){r=a.call(this,...r)||this;r.backgroundColor=null;r.borderLineColor=null;r.borderLineSize=null;r.font=new e;r.horizontalAlignment="center";r.kerning=!0;r.haloColor=null;r.haloSize=null;r.rightToLeft=null;r.rotated=!1;r.text="";r.type="text";r.verticalAlignment="baseline";r.xoffset=0;r.yoffset=0;r.angle=0;r.width=null;r.lineWidth=192;r.lineHeight=1;return r}l._inherits(d,a);var n=d.prototype;n.normalizeCtorArgs=function(r,p,
g){if(r&&"string"!==typeof r)return r;const u={};r&&(u.text=r);p&&(u.font=p);g&&(u.color=g);return u};n.writeLineWidth=function(r,p,g,u){u&&"string"!==typeof u||(p[g]=r)};n.castLineWidth=function(r){return y.toPt(r)};n.writeLineHeight=function(r,p,g,u){u&&"string"!==typeof u||(p[g]=r)};n.clone=function(){return new f({angle:this.angle,backgroundColor:B.clone(this.backgroundColor),borderLineColor:B.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:B.clone(this.color),font:this.font&&
this.font.clone(),haloColor:B.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};n.hash=function(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&
this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`};return l._createClass(d)}(b);h.__decorate([v.property({type:D,json:{write:!0}})],b.prototype,"backgroundColor",void 0);h.__decorate([v.property({type:D,json:{write:!0}})],b.prototype,"borderLineColor",void 0);
h.__decorate([v.property({type:Number,json:{write:!0},cast:y.toPt})],b.prototype,"borderLineSize",void 0);h.__decorate([v.property({type:e,json:{write:!0}})],b.prototype,"font",void 0);h.__decorate([v.property({...c.horizontalAlignmentProperty,json:{write:!0}})],b.prototype,"horizontalAlignment",void 0);h.__decorate([v.property({type:Boolean,json:{write:!0}})],b.prototype,"kerning",void 0);h.__decorate([v.property({type:D,json:{write:!0}})],b.prototype,"haloColor",void 0);h.__decorate([v.property({type:Number,
cast:y.toPt,json:{write:!0}})],b.prototype,"haloSize",void 0);h.__decorate([v.property({type:Boolean,json:{write:!0}})],b.prototype,"rightToLeft",void 0);h.__decorate([v.property({type:Boolean,json:{write:!0}})],b.prototype,"rotated",void 0);h.__decorate([v.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);h.__decorate([t.enumeration({esriTS:"text"},{readOnly:!0})],b.prototype,"type",void 0);h.__decorate([v.property({...c.verticalAlignmentProperty,json:{write:!0}})],b.prototype,
"verticalAlignment",void 0);h.__decorate([v.property({type:Number,cast:y.toPt,json:{write:!0}})],b.prototype,"xoffset",void 0);h.__decorate([v.property({type:Number,cast:y.toPt,json:{write:!0}})],b.prototype,"yoffset",void 0);h.__decorate([v.property({type:Number,json:{read:a=>a&&-1*a,write:(a,d)=>d.angle=a&&-1*a}})],b.prototype,"angle",void 0);h.__decorate([v.property({type:Number,json:{write:!0}})],b.prototype,"width",void 0);h.__decorate([v.property({type:Number})],b.prototype,"lineWidth",void 0);
h.__decorate([k.writer("lineWidth")],b.prototype,"writeLineWidth",null);h.__decorate([C.cast("lineWidth")],b.prototype,"castLineWidth",null);h.__decorate([v.property(c.lineHeightProperty)],b.prototype,"lineHeight",void 0);h.__decorate([k.writer("lineHeight")],b.prototype,"writeLineHeight",null);return b=f=h.__decorate([q.subclass("esri.symbols.TextSymbol")],b)})},"esri/symbols/WebStyleSymbol":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../portal/Portal ../chunks/persistableUrlUtils ./Symbol ./support/Thumbnail".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a){var d;C=d=function(n){function r(g){g=n.call(this,g)||this;g.styleName=null;g.portal=null;g.styleUrl=null;g.thumbnail=null;g.name=null;g.type="web-style";return g}h._inherits(r,n);var p=r.prototype;p.read=function(g,u){this.portal=u?.portal;h._get(h._getPrototypeOf(r.prototype),"read",this).call(this,g,u)};p.clone=function(){return new d({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};p.fetchSymbol=function(g){return this._fetchSymbol("webRef",
g)};p.fetchCIMSymbol=function(g){return this._fetchSymbol("cimRef",g)};p._fetchSymbol=async function(g,u){const x=null!=u?u.cache:null,w=x?this._fetchCacheKey:null;if(null!=x){var m=w&&x.get(w);if(m)return m.clone()}({resolveWebStyleSymbol:m}=await new Promise((z,A)=>l(["./support/webStyleSymbolUtils"],z,A)));y.throwIfAborted(u);u=m(this,{portal:this.portal},g,u);u.catch(z=>{B.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",z)});u=await u;if(!("webRef"===g&&"point-3d"===
u.type||"cimRef"===g&&"cim"===u.type))return null;null!=x&&x.set(w,u.clone());return u};h._createClass(r,[{key:"_fetchCacheKey",get:function(){const g=null!=this.portal?this.portal:b.getDefault();return`${this.styleName}:${this.styleUrl}:${this.name}:${g.user?g.user.username:null}:${g.url}`}}]);return r}(f);D.__decorate([v.property({json:{write:!1}})],C.prototype,"color",void 0);D.__decorate([v.property({type:String,json:{write:!0}})],C.prototype,"styleName",void 0);D.__decorate([v.property({type:b,
json:{write:!1}})],C.prototype,"portal",void 0);D.__decorate([v.property({type:String,json:{read:c.read,write:c.write}})],C.prototype,"styleUrl",void 0);D.__decorate([v.property({type:a.Thumbnail,json:{read:!1}})],C.prototype,"thumbnail",void 0);D.__decorate([v.property({type:String,json:{write:!0}})],C.prototype,"name",void 0);D.__decorate([k.enumeration({styleSymbolReference:"web-style"},{readOnly:!0})],C.prototype,"type",void 0);D.__decorate([v.property()],C.prototype,"_fetchCacheKey",null);return C=
d=D.__decorate([e.subclass("esri.symbols.WebStyleSymbol")],C)})},"esri/symbols/cim/CIMSymbolDrawHelper":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/BidiText ../../core/fontUtils ../../core/lang ../../core/Logger ../../core/ObjectPool ../../core/screenUtils ../../geometry/GeometryCursor ../../geometry/support/aaBoundingRect ../../geometry/support/boundsUtils ../../geometry/support/centroid ../../geometry/support/jsonUtils ./CIMEffects ./CIMImageColorSubstitutionHelper ./CIMOperators ./CIMPlacements ./enums ./imageUtils ./Rect ./TextRasterizer ./utils ../../views/2d/engine/webgl/alignmentUtils ../../views/2d/engine/webgl/definitions ../../views/2d/engine/webgl/mesh/templates/shapingUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g,u,x,w,m,z){function A(ea,aa=1){const T=x.fromCIMFontDecoration(ea);var R=x.fromCIMFontStyle(ea.fontStyleName);const W=ea.fontFamilyName??B.DEFAULT_FONT_FAMILY,{weight:S,style:Z}=R;R=aa*(ea.height||5);const ca=x.fromCIMHorizontalAlignment(ea.horizontalAlignment),qa=x.fromCIMVerticalAlignment(ea.verticalAlignment),ya=x.getFillColor(ea),xa=x.getFillColor(ea.haloSymbol);aa=xa?aa*(ea.haloSize|0):0;var Ca="CIMBackgroundCallout"===ea.callout?.type?ea.callout.backgroundSymbol:
null;ea=x.getFillColor(Ca);const Da=x.getStrokeWidth(Ca);Ca=x.getStrokeColor(Ca);return{color:ya,size:R,horizontalAlignment:ca,verticalAlignment:qa,font:{family:W,style:x.getFontStyle(Z),weight:x.getFontWeight(S),decoration:T},halo:{size:aa||0,color:xa,style:Z},backgroundColor:ea,borderLine:null!=Da&&null!=Ca?{size:Da,color:Ca}:null,pixelRatio:1,premultiplyColors:!0}}const H=Math.PI/180,E=v.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");let F=function(){function ea(T){this._t=T}ea.createIdentity=
function(){return new ea([1,0,0,0,1,0])};var aa=ea.prototype;aa.clone=function(){return new ea(this._t.slice())};aa.transform=function(T){const R=this._t;return[R[0]*T[0]+R[1]*T[1]+R[2],R[3]*T[0]+R[4]*T[1]+R[5]]};ea.createScale=function(T,R){return new ea([T,0,0,0,R,0])};aa.scale=function(T,R){const W=this._t;W[0]*=T;W[1]*=T;W[2]*=T;W[3]*=R;W[4]*=R;W[5]*=R;return this};aa.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};ea.createTranslate=function(T,R){return new ea([0,
0,T,0,0,R])};aa.translate=function(T,R){const W=this._t;W[2]+=T;W[5]+=R;return this};ea.createRotate=function(T){const R=Math.cos(T);T=Math.sin(T);return new ea([R,-T,0,T,R,0])};aa.rotate=function(T){return ea.multiply(this,ea.createRotate(T),this)};aa.angle=function(){const T=this._t[0],R=this._t[3],W=Math.sqrt(T*T+R*R);return[T/W,R/W]};ea.multiply=function(T,R,W){T=T._t;R=R._t;const S=T[1]*R[0]+T[4]*R[1],Z=T[2]*R[0]+T[5]*R[1]+R[2],ca=T[0]*R[3]+T[3]*R[4],qa=T[1]*R[3]+T[4]*R[4],ya=T[2]*R[3]+T[5]*
R[4]+R[5],xa=W._t;xa[0]=T[0]*R[0]+T[3]*R[1];xa[1]=S;xa[2]=Z;xa[3]=ca;xa[4]=qa;xa[5]=ya;return W};aa.invert=function(){const T=this._t;let R=T[0]*T[4]-T[1]*T[3];if(0===R)return new ea([0,0,0,0,0,0]);R=1/R;return new ea([T[4]*R,-T[1]*R,(T[1]*T[5]-T[2]*T[4])*R,-T[3]*R,T[0]*R,(T[2]*T[3]-T[0]*T[5])*R])};return h._createClass(ea)}();v=function(){function ea(T,R){this._resourceManager=T;this._transfos=[];this._sizeTransfos=[];this._geomUnitsPerPoint=1;this._placementPool=new C(n.Placement,void 0,void 0,
100);this._earlyReturn=!1;this._mapRotation=0;this._transfos.push(R||F.createIdentity());this._sizeTransfos.push(R?R.scaleRatio():1)}var aa=ea.prototype;aa.setTransform=function(T,R){this._transfos=[T||F.createIdentity()];this._sizeTransfos=[R||(T?T.scaleRatio():1)]};aa.setGeomUnitsPerPoint=function(T){this._geomUnitsPerPoint=T};aa.transformPt=function(T){return this._transfos[this._transfos.length-1].transform(T)};aa.transformSize=function(T){return T*this._sizeTransfos[this._sizeTransfos.length-
1]};aa.reverseTransformPt=function(T){return this._transfos[this._transfos.length-1].invert().transform(T)};aa.reverseTransformSize=function(T){return T/this._sizeTransfos[this._sizeTransfos.length-1]};aa.getTransformAngle=function(){return this._transfos[this._transfos.length-1].angle()};aa.geomUnitsPerPoint=function(){return this.isEmbedded()?1:this._geomUnitsPerPoint};aa.isEmbedded=function(){return 1<this._transfos.length};aa.back=function(){return this._transfos[this._transfos.length-1]};aa.push=
function(T,R){R=R?T.scaleRatio():1;F.multiply(T,this.back(),T);this._transfos.push(T);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*R)};aa.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};aa.drawSymbol=function(T,R,W){if(T)switch(T.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(T,R);break;case "CIMTextSymbol":this.drawTextSymbol(T,R,W)}};aa.drawMultiLayerSymbol=function(T,R){if(T&&R){var W=T.symbolLayers;
if(W)if((T=T.effects)&&0<T.length){if(R=this.executeEffects(T,R))for(T=R.next();T;)this.drawSymbolLayers(W,T.asJSON()),T=R.next()}else this.drawSymbolLayers(W,R)}};aa.executeEffects=function(T,R){const W=this._resourceManager.geometryEngine;R=new f.SimpleEffectCursor(q.GeometryCursor.fromJSONCIM(R));for(const S of T)(T=d.getEffectOperator(S))&&(R=T.execute(R,S,this.geomUnitsPerPoint(),null,W));return R};aa.drawSymbolLayers=function(T,R){let W=T.length;for(;W--;){const Z=T[W];if(Z&&!1!==Z.enable){var S=
Z.effects;if(S&&0<S.length){if(S=this.executeEffects(S,R)){let ca=null;for(;(ca=S.next())&&(this.drawSymbolLayer(Z,ca.asJSON()),!this._earlyReturn););}}else this.drawSymbolLayer(Z,R);if(this._earlyReturn)break}}};aa.drawSymbolLayer=function(T,R){switch(T.type){case "CIMSolidFill":this.drawSolidFill(R,T.color);break;case "CIMHatchFill":this.drawHatchFill(R,T);break;case "CIMPictureFill":this.drawPictureFill(R,T);break;case "CIMGradientFill":this.drawGradientFill(R,T);break;case "CIMSolidStroke":this.drawSolidStroke(R,
T.color,T.width,T.capStyle,T.joinStyle,T.miterLimit);break;case "CIMPictureStroke":this.drawPictureStroke(R,T);break;case "CIMGradientStroke":this.drawGradientStroke(R,T);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":this.drawMarkerLayer(T,R)}};aa.drawHatchFill=function(T,R){const W=this._buildHatchPolyline(R,T,this.geomUnitsPerPoint());W&&(this.pushClipPath(T),this.drawMultiLayerSymbol(R.lineSymbol,W),this.popClipPath())};aa.drawPictureFill=function(T,R){};aa.drawGradientFill=
function(T,R){};aa.drawPictureStroke=function(T,R){};aa.drawGradientStroke=function(T,R){};aa.drawMarkerLayer=function(T,R){var W=T.markerPlacement;if(W){var S=d.getPlacementOperator(W);if(S){var Z="CIMMarkerPlacementInsidePolygon"===W.type||"CIMMarkerPlacementPolygonCenter"===W.type&&W.clipAtBoundary;Z&&this.pushClipPath(R);if(R=S.execute(q.GeometryCursor.fromJSONCIM(R),W,this.geomUnitsPerPoint(),null,this._resourceManager.geometryEngine))for(W=null;(W=R.next())&&(this.drawMarker(T,W),!this._earlyReturn););
Z&&this.popClipPath()}}else{Z=this._placementPool.acquire();if(c.isPoint(R))Z.tx=R.x,Z.ty=R.y,this.drawMarker(T,Z);else if(c.isPolygon(R)){if(R=b.polygonCentroid(R))[Z.tx,Z.ty]=R,this.drawMarker(T,Z)}else for(S of R.points)if(Z.tx=S[0],Z.ty=S[1],this.drawMarker(T,Z),this._earlyReturn)break;this._placementPool.release(Z)}};aa.drawMarker=function(T,R){switch(T.type){case "CIMCharacterMarker":case "CIMPictureMarker":this.drawPictureMarker(T,R);break;case "CIMVectorMarker":this.drawVectorMarker(T,R)}};
aa.drawPictureMarker=function(T,R){if(T){var W=this._resourceManager.getResource(T.url),S=x.getValue(T.size,10);if(!(null==W||0>=S)){var Z=W.width;W=W.height;if(Z&&W){W=Z/W;var ca=x.getValue(T.scaleX,1);Z=F.createIdentity();var qa=T.anchorPoint;if(qa){var ya=qa.x;qa=qa.y;"Absolute"!==T.anchorPointUnits&&(ya*=S*W*ca,qa*=S);Z.translate(-ya,-qa)}W=x.getValue(T.rotation);T.rotateClockwise&&(W=-W);this._mapRotation&&(W+=this._mapRotation);W&&Z.rotate(W*H);W=x.getValue(T.offsetX);ca=x.getValue(T.offsetY);
if(W||ca){if(this._mapRotation){qa=H*this._mapRotation;ya=Math.cos(qa);qa=Math.sin(qa);const xa=W*qa+ca*ya;W=W*ya-ca*qa;ca=xa}Z.translate(W,ca)}W=this.geomUnitsPerPoint();1!==W&&Z.scale(W,W);(W=R.getAngle())&&Z.rotate(W);Z.translate(R.tx,R.ty);this.push(Z,!1);this.drawImage(T,S);this.pop()}}}};aa.drawVectorMarker=function(T,R){if(T){var W=T.markerGraphics;if(W){var S=x.getValue(T.size,10),Z=T.frame,ca=Z?Z.ymax-Z.ymin:0;ca=S&&ca?S/ca:1;S=F.createIdentity();Z&&S.translate(.5*-(Z.xmax+Z.xmin),.5*-(Z.ymax+
Z.ymin));var qa=T.anchorPoint;if(qa){var ya=qa.x;qa=qa.y;"Absolute"!==T.anchorPointUnits?Z&&(ya*=Z.xmax-Z.xmin,qa*=Z.ymax-Z.ymin):(ya/=ca,qa/=ca);S.translate(-ya,-qa)}1!==ca&&S.scale(ca,ca);Z=x.getValue(T.rotation);T.rotateClockwise&&(Z=-Z);this._mapRotation&&(Z+=this._mapRotation);Z&&S.rotate(Z*H);Z=x.getValue(T.offsetX);ca=x.getValue(T.offsetY);if(Z||ca){if(this._mapRotation){qa=H*this._mapRotation;ya=Math.cos(qa);qa=Math.sin(qa);const xa=Z*qa+ca*ya;Z=Z*ya-ca*qa;ca=xa}S.translate(Z,ca)}Z=this.geomUnitsPerPoint();
1!==Z&&S.scale(Z,Z);(Z=R.getAngle())&&S.rotate(Z);S.translate(R.tx,R.ty);this.push(S,T.scaleSymbolsProportionally);for(const xa of W)if(xa&&xa.symbol&&xa.geometry||E.error("Invalid marker graphic",xa),this.drawSymbol(xa.symbol,xa.geometry,xa.textString),this._earlyReturn)break;this.pop()}}};aa.drawTextSymbol=function(T,R,W){if(T&&c.isPoint(R)&&!(0>=x.getValue(T.height,10))){var S=F.createIdentity(),Z=x.getValue(T.angle);(Z=-Z)&&S.rotate(Z*H);Z=x.getValue(T.offsetX);var ca=x.getValue(T.offsetY);(Z||
ca)&&S.translate(Z,ca);Z=this.geomUnitsPerPoint();1!==Z&&S.scale(Z,Z);S.translate(R.x,R.y);this.push(S,!1);this.drawText(T,W);this.pop()}};aa._buildHatchPolyline=function(T,R,W){var S=x.getValue(T.separation,4)*W,Z=x.getValue(T.rotation);if(0===S)return null;0>S&&(S=-S);for(var ca=0,qa=.5*S;ca>qa;)ca-=S;for(;ca<-qa;)ca+=S;ca=k.create();e.getBoundsXY(ca,R);ca[0]-=qa;ca[1]-=qa;ca[2]+=qa;ca[3]+=qa;for(var ya=[[ca[0],ca[1]],[ca[0],ca[3]],[ca[2],ca[3]],[ca[2],ca[1]]];180<Z;)Z-=180;for(;0>Z;)Z+=180;qa=
Math.cos(Z*H);var xa=Math.sin(Z*H);Z=-S*xa;R=S*qa;ca=x.getValue(T.offsetX)*W;T=x.getValue(T.offsetY)*W;ca=ca*xa-T*qa;let Ca;var Da=T=Number.MAX_VALUE;Ca=W=-Number.MAX_VALUE;for(var N of ya){var V=N[0];const ka=N[1];ya=qa*V+xa*ka;V=-xa*V+qa*ka;Da=Math.min(Da,ya);T=Math.min(T,V);Ca=Math.max(Ca,ya);W=Math.max(W,V)}T=Math.floor(T/S)*S;N=qa*Da-xa*T-Z*ca/S;ya=xa*Da+qa*T-R*ca/S;Da=qa*Ca-xa*T-Z*ca/S;ca=xa*Ca+qa*T-R*ca/S;S=1+Math.round((W-T)/S);qa=[];for(xa=0;xa<S;xa++)N+=Z,ya+=R,Da+=Z,ca+=R,qa.push([[N,ya],
[Da,ca]]);return{paths:qa}};return h._createClass(ea)}();let J=function(ea){function aa(R,W){R=ea.call(this,R,W)||this;R.reset();return R}h._inherits(aa,ea);var T=aa.prototype;T.reset=function(){this._xmin=this._ymin=Infinity;this._xmax=this._ymax=-Infinity;this._clipCount=0};T.envelope=function(){return new g(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};T.bounds=function(){return k.fromValues(this._xmin,this._ymin,this._xmax,this._ymax)};T.drawSolidFill=function(R){!R||0<this._clipCount||
(c.isPolygon(R)?this._processPath(R.rings,0):c.isPolyline(R)?this._processPath(R.paths,0):c.isExtent(R)?(R=G(R))&&this._processPath(R.rings,0):console.error("drawSolidFill Unexpected geometry type!"))};T.drawSolidStroke=function(R,W,S){!R||0<this._clipCount||(W=.5*this.transformSize(x.getValue(S,4)),c.isPolygon(R)?this._processPath(R.rings,W):c.isPolyline(R)?this._processPath(R.paths,W):c.isExtent(R)?(R=G(R))&&this._processPath(R.rings,W):console.error("drawSolidStroke unexpected geometry type!"))};
T.drawMarkerLayer=function(R,W){c.isPolygon(W)&&R.markerPlacement&&("CIMMarkerPlacementInsidePolygon"===R.markerPlacement.type||"CIMMarkerPlacementPolygonCenter"===R.markerPlacement.type&&R.markerPlacement.clipAtBoundary)?this._processPath(W.rings,0):h._get(h._getPrototypeOf(aa.prototype),"drawMarkerLayer",this).call(this,R,W)};T.drawHatchFill=function(R,W){this.drawSolidFill(R)};T.drawPictureFill=function(R,W){this.drawSolidFill(R)};T.drawGradientFill=function(R,W){this.drawSolidFill(R)};T.drawPictureStroke=
function(R,W){this.drawSolidStroke(R,null,W.width)};T.drawGradientStroke=function(R,W){this.drawSolidStroke(R,null,W.width)};T.pushClipPath=function(R){this.drawSolidFill(R);this._clipCount++};T.popClipPath=function(){this._clipCount--};T.drawImage=function(R,W){var {url:S}=R;R=x.getValue(R.scaleX,1);let Z=R*W,ca=W;S=this._resourceManager.getResource(S);W||null==S||(Z=R*S.width,ca=S.height);this._merge(this.transformPt([-Z/2,-ca/2]),0);this._merge(this.transformPt([-Z/2,ca/2]),0);this._merge(this.transformPt([Z/
2,-ca/2]),0);this._merge(this.transformPt([Z/2,ca/2]),0)};T.drawText=function(R,W){if(W&&0!==W.length){this._textRasterizer||(this._textRasterizer=new u);var S=A(R),[Z,ca]=this._textRasterizer.computeTextSize(W,S);W=0;switch(R.horizontalAlignment){case "Left":W=Z/2;break;case "Right":W=-Z/2}S=0;switch(R.verticalAlignment){case "Bottom":S=ca/2;break;case "Top":S=-ca/2;break;case "Baseline":S=ca/6}this._merge(this.transformPt([-Z/2+W,-ca/2+S]),0);this._merge(this.transformPt([-Z/2+W,ca/2+S]),0);this._merge(this.transformPt([Z/
2+W,-ca/2+S]),0);this._merge(this.transformPt([Z/2+W,ca/2+S]),0)}};T._processPath=function(R,W){if(R)for(const S of R)if(R=S?S.length:0,1<R){this._merge(this.transformPt(S[0]),W);for(let Z=1;Z<R;Z++)this._merge(this.transformPt(S[Z]),W)}};T._merge=function(R,W){R[0]-W<this._xmin&&(this._xmin=R[0]-W);R[0]+W>this._xmax&&(this._xmax=R[0]+W);R[1]-W<this._ymin&&(this._ymin=R[1]-W);R[1]+W>this._ymax&&(this._ymax=R[1]+W)};return h._createClass(aa)}(v),L=function(ea){function aa(){var R=ea.apply(this,arguments)||
this;R._searchPoint=[0,0];R._searchDistPoint=0;R._textInfo=null;return R}h._inherits(aa,ea);var T=aa.prototype;T.hitTest=function(R,W,S,Z,ca,qa){qa*=t.pt2px(1);this.setTransform();this.setGeomUnitsPerPoint(qa);this._searchPoint=[(R[0]+R[2])/2,(R[1]+R[3])/2];this._searchDistPoint=(R[2]-R[0])/2/qa;this._textInfo=Z;this._mapRotation=W&&("CIMPointSymbol"===W.type&&"Map"!==W.angleAlignment||"CIMTextSymbol"===W.type)?ca:0;this._earlyReturn=!1;this.drawSymbol(W,S);return this._earlyReturn};T.drawSolidFill=
function(R,W){this._hitTestFill(R)};T.drawHatchFill=function(R,W){this._hitTestFill(R)};T.drawPictureFill=function(R,W){this._hitTestFill(R)};T.drawGradientFill=function(R,W){this._hitTestFill(R)};T.drawSolidStroke=function(R,W,S,Z,ca,qa){this._hitTestStroke(R,S)};T.drawPictureStroke=function(R,W){this._hitTestStroke(R,W.width)};T.drawGradientStroke=function(R,W){this._hitTestStroke(R,W.width)};T.drawMarkerLayer=function(R,W){R.markerPlacement&&("CIMMarkerPlacementInsidePolygon"===R.markerPlacement.type||
"CIMMarkerPlacementPolygonCenter"===R.markerPlacement.type&&R.markerPlacement.clipAtBoundary)?this._hitTestFill(W):h._get(h._getPrototypeOf(aa.prototype),"drawMarkerLayer",this).call(this,R,W)};T.pushClipPath=function(R){};T.popClipPath=function(){};T.drawImage=function(R,W){var {url:S}=R;R=x.getValue(R.scaleX,1);S=this._resourceManager.getResource(S);if(null!=S&&0!==S.height&&0!==W){W*=this.geomUnitsPerPoint();R=S.width/S.height*R*W;S=this.reverseTransformPt(this._searchPoint);var Z=this._searchDistPoint;
Math.abs(S[0])<R/2+Z&&Math.abs(S[1])<W/2+Z&&(this._earlyReturn=!0)}};T.drawText=function(R,W){if(W=this._textInfo)if(W=W.get(R)){var {text:S,mosaicItem:Z}=W;if(Z?.glyphMosaicItems?.length){W=x.getValue(R.height,10);var {lineGapType:ca,lineGap:qa}=R,ya=ca?Y(ca,x.getValue(qa),W):0,xa=D.bidiText(S)[1],Ca="CIMBackgroundCallout"===R.callout?.type;R=z.shapeGlyphs(Z.glyphMosaicItems,xa,{scale:W/m.GLYPH_SIZE,angle:0,xOffset:0,yOffset:0,hAlign:K(R.horizontalAlignment),vAlign:P(R.verticalAlignment),maxLineWidth:512,
lineHeight:m.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(ya||1,4)),decoration:R.font.decoration||"none",isCIM:!0,hasBackground:Ca});ya=this.reverseTransformPt(this._searchPoint);W=ya[0];ya=ya[1];for(const Da of R.glyphs)if(W>Da.xTopLeft&&W<Da.xBottomRight&&ya>-Da.yBottomRight&&ya<-Da.yTopLeft){this._earlyReturn=!0;break}}}};T._hitTestFill=function(R){let W=null;if(c.isExtent(R))W=[[[R.xmin,R.ymin],[R.xmin,R.ymax],[R.xmax,R.ymax],[R.xmax,R.ymin],[R.xmin,R.ymin]]];else if(c.isPolygon(R))W=R.rings;
else if(c.isPolyline(R))W=R.paths;else return;R=this.reverseTransformPt(this._searchPoint);this._pointInPolygon(R,W)&&(this._earlyReturn=!0);if(!this._earlyReturn){const S=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(R,W,S)&&(this._earlyReturn=!0)}};T._hitTestStroke=function(R,W){let S=null;if(c.isExtent(R))S=[[[R.xmin,R.ymin],[R.xmin,R.ymax],[R.xmax,R.ymax],[R.xmax,R.ymin],[R.xmin,R.ymin]]];else if(c.isPolygon(R))S=R.rings;else if(c.isPolyline(R))S=R.paths;
else return;R=this.reverseTransformPt(this._searchPoint);W=x.getValue(W,4)*this.geomUnitsPerPoint();const Z=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(R,S,W/2+Z)&&(this._earlyReturn=!0)};T._pointInPolygon=function(R,W){let S=0;for(const Z of W){W=Z.length;for(let ca=1;ca<W;ca++){const qa=Z[ca-1],ya=Z[ca];qa[1]>R[1]!==ya[1]>R[1]&&(0<(ya[0]-qa[0])*(R[1]-qa[1])-(ya[1]-qa[1])*(R[0]-qa[0])?S++:S--)}}return 0!==S};T._nearLine=function(R,W,S){for(const ca of W){W=
ca.length;for(let qa=1;qa<W;qa++){var Z=ca[qa-1];const ya=ca[qa];let xa=(ya[0]-Z[0])*(ya[0]-Z[0])+(ya[1]-Z[1])*(ya[1]-Z[1]);if(0!==xa&&(xa=Math.sqrt(xa),Math.abs(((ya[0]-Z[0])*(R[1]-Z[1])-(ya[1]-Z[1])*(R[0]-Z[0]))/xa)<S&&(Z=((ya[0]-Z[0])*(R[0]-Z[0])+(ya[1]-Z[1])*(R[1]-Z[1]))/xa,Z>-S&&Z<xa+S)))return!0}}return!1};return h._createClass(aa)}(v),I=function(ea){function aa(R,W,S,Z){W=ea.call(this,W,S)||this;W._applyAdditionalRenderProps=Z;W._colorSubstitutionHelper=new a;W._ctx=R;return W}h._inherits(aa,
ea);var T=aa.prototype;T.drawSolidFill=function(R,W){if(R){if(c.isPolygon(R))this._buildPath(R.rings,!0);else if(c.isPolyline(R))this._buildPath(R.paths,!0);else if(c.isExtent(R))this._buildPath(G(R).rings,!0);else if(c.isMultipoint(R))console.log("CanvasDrawHelper.drawSolidFill - No implementation!");else return;R=this._ctx;R.fillStyle="string"===typeof W?W:"rgba("+Math.round(W[0])+","+Math.round(W[1])+","+Math.round(W[2])+","+(W[3]??255)/255+")";R.fill("evenodd")}};T.drawSolidStroke=function(R,
W,S,Z,ca,qa){if(R&&W&&0!==S){if(c.isPolygon(R))this._buildPath(R.rings,!0);else if(c.isPolyline(R))this._buildPath(R.paths,!1);else if(c.isExtent(R))this._buildPath(G(R).rings,!0);else{console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");return}R=this._ctx;R.strokeStyle="string"===typeof W?W:"rgba("+Math.round(W[0])+","+Math.round(W[1])+","+Math.round(W[2])+","+(W[3]??255)/255+")";R.lineWidth=Math.max(this.transformSize(S),.5);this._setCapStyle(Z);this._setJoinStyle(ca);R.miterLimit=
qa;R.stroke()}};T.pushClipPath=function(R){this._ctx.save();if(c.isPolygon(R))this._buildPath(R.rings,!0);else if(c.isPolyline(R))this._buildPath(R.paths,!0);else if(c.isExtent(R))this._buildPath(G(R).rings,!0);else return;this._ctx.clip("evenodd")};T.popClipPath=function(){this._ctx.restore()};T.drawImage=function(R,W){const {colorSubstitutions:S,url:Z,tintColor:ca}=R;R=x.getValue(R.scaleX,1);var qa=this._resourceManager.getResource(Z);if(null!=qa){var ya=qa.width/qa.height*W,xa=W;W||(ya=qa.width,
xa=qa.height);var Ca=x.isSVGImage(Z)||"src"in qa&&x.isSVGImage(qa.src);W="getFrame"in qa?p.getFirstFrame(qa):qa;S&&(W=this._colorSubstitutionHelper.applyColorSubstituition(W,S));this._applyAdditionalRenderProps&&!Ca&&ca&&(W=this._colorSubstitutionHelper.tintImageData(W,ca));qa=this.transformPt([0,0]);var [Da,N]=this.getTransformAngle();Ca=this.transformSize(1);var V=this._ctx;V.save();V.setTransform({m11:R*Ca*Da,m12:R*Ca*N,m21:-Ca*N,m22:Ca*Da,m41:qa[0],m42:qa[1]});V.drawImage(W,-ya/2,-xa/2,ya,xa);
V.restore()}};T.drawText=function(R,W){if(W&&0!==W.length&&(this._textRasterizer||(this._textRasterizer=new u),R=A(R),R.size*=this.transformSize(t.px2pt(1)),W=this._textRasterizer.rasterizeText(W,R))){var {size:S,anchorX:Z,anchorY:ca,canvas:qa}=W;W=S[0]*(Z+.5);R=S[1]*(ca-.5);var ya=this._ctx,xa=this.transformPt([0,0]),[Ca,Da]=this.getTransformAngle();ya.save();ya.setTransform({m11:1*Ca,m12:1*Da,m21:-1*Da,m22:1*Ca,m41:xa[0]-1*W,m42:xa[1]+1*R});ya.drawImage(qa,0,0);ya.restore()}};T.drawPictureFill=
function(R,W){if(R){var {colorSubstitutions:S,height:Z,offsetX:ca,offsetY:qa,rotation:ya,scaleX:xa,tintColor:Ca,url:Da}=W;W=this._resourceManager.getResource(Da);if(null!=W){if(c.isPolygon(R))this._buildPath(R.rings,!0);else if(c.isPolyline(R))this._buildPath(R.paths,!0);else if(c.isExtent(R))this._buildPath(G(R).rings,!0);else if(c.isMultipoint(R))console.log("CanvasDrawHelper.drawPictureFill - No implementation!");else return;R=this._ctx;var N=x.isSVGImage(Da)||"src"in W&&x.isSVGImage(W.src),V=
"getFrame"in W?p.getFirstFrame(W):W;S&&(V=this._colorSubstitutionHelper.applyColorSubstituition(V,S));if(this._applyAdditionalRenderProps){if(N||Ca&&(V=this._colorSubstitutionHelper.tintImageData(V,Ca)),N=R.createPattern(V,"repeat"),V=this.transformSize(1),ya||(ya=0),ca=ca?V*ca:0,qa=qa?V*qa:0,Z&&(Z*=V),V=Z?Z/W.height:1,W=xa&&Z?xa*Z/W.width:1,0!==ya||1!==V||1!==W||0!==ca||0!==qa){const ka=new DOMMatrix;ka.rotateSelf(0,0,-ya).translateSelf(ca,qa).scaleSelf(W,V,1);N.setTransform(ka)}}else N=R.createPattern(V,
"repeat");R.save();R.fillStyle=N;R.fill("evenodd");R.restore()}}};T.drawPictureStroke=function(R,W){if(R){var {colorSubstitutions:S,capStyle:Z,joinStyle:ca,miterLimit:qa,tintColor:ya,url:xa,width:Ca}=W;W=this._resourceManager.getResource(xa);if(null!=W){if(c.isPolygon(R))var Da=R.rings;else if(c.isPolyline(R))Da=R.paths;else if(c.isExtent(R))Da=G(R).rings;else{c.isMultipoint(R)&&console.log("CanvasDrawHelper.drawPictureStroke - No implementation!");return}Ca||(Ca=W.width);R=x.isSVGImage(xa)||"src"in
W&&x.isSVGImage(W.src);var N="getFrame"in W?p.getFirstFrame(W):W;S&&(N=this._colorSubstitutionHelper.applyColorSubstituition(N,S));this._applyAdditionalRenderProps&&(R||ya&&(N=this._colorSubstitutionHelper.tintImageData(N,ya)));W=Math.max(this.transformSize(t.pt2px(Ca)),.5);R=W/N.width;var V=this._ctx;N=V.createPattern(N,"repeat-y");V.save();this._setCapStyle(Z);this._setJoinStyle(ca);void 0!==qa&&(V.miterLimit=qa);V.lineWidth=W;var ka;for(let ja of Da){ja=y.clone(ja);var da=ka=void 0,na=void 0;let ma=
da=void 0;Da=ja;for(var X=Da[0],fa=1;fa<Da.length;)ma=Da[fa][0]-X[0],da=Da[fa][1]-X[1],da=0!==ma?da/ma:Math.PI/2,void 0!==na&&1E-4>=da-na?(Da.splice(fa-1,1),X=ka):(ka=X,X=Da[fa],fa++),na=da;if(ja&&!(1>=ja.length))for(Da=this.transformPt(ja[0]),na=1;na<ja.length;na++)ka=this.transformPt(ja[na]),X=180/Math.PI*Math.atan2(ka[1]-Da[1],ka[0]-Da[0]),fa=new DOMMatrix,fa.translateSelf(0,Da[1]-W/2).scaleSelf(R,R,1).rotateSelf(0,0,90-X),N.setTransform(fa),V.strokeStyle=N,V.beginPath(),V.moveTo(Da[0],Da[1]),
V.lineTo(ka[0],ka[1]),V.stroke(),Da=ka}V.restore()}}};T._buildPath=function(R,W){const S=this._ctx;S.beginPath();if(R)for(const Z of R)if(R=Z?Z.length:0,1<R){let ca=this.transformPt(Z[0]);S.moveTo(ca[0],ca[1]);for(let qa=1;qa<R;qa++)ca=this.transformPt(Z[qa]),S.lineTo(ca[0],ca[1]);W&&S.closePath()}};T._setCapStyle=function(R){switch(R){case r.LineCapStyle.Butt:this._ctx.lineCap="butt";break;case r.LineCapStyle.Round:this._ctx.lineCap="round";break;case r.LineCapStyle.Square:this._ctx.lineCap="square"}};
T._setJoinStyle=function(R){switch(R){case r.LineJoinStyle.Bevel:this._ctx.lineJoin="bevel";break;case r.LineJoinStyle.Round:this._ctx.lineJoin="round";break;case r.LineJoinStyle.Miter:this._ctx.lineJoin="miter"}};return h._createClass(aa)}(v);const G=ea=>ea?{spatialReference:ea.spatialReference,rings:[[[ea.xmin,ea.ymin],[ea.xmin,ea.ymax],[ea.xmax,ea.ymax],[ea.xmax,ea.ymin],[ea.xmin,ea.ymin]]]}:null,K=ea=>{switch(ea){case "Left":return w.HAlign.Left;case "Right":return w.HAlign.Right;case "Center":return w.HAlign.Center;
case "Justify":return E.warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),w.HAlign.Center}},P=ea=>{switch(ea){case "Top":return w.VAlign.Top;case "Center":return w.VAlign.Center;case "Bottom":return w.VAlign.Bottom;case "Baseline":return w.VAlign.Baseline}},Y=(ea,aa,T)=>{switch(ea){case "ExtraLeading":return 1+aa/T;case "Multiple":return aa;case "Exact":return aa/T}};l.CIMSymbolDrawHelper=v;l.C_DEG_TO_RAD=H;l.CanvasDrawHelper=I;l.DEFAULT_HATCH_FILL_SEPARATION=
4;l.DEFAULT_MARKER_SIZE=10;l.DEFAULT_PICTURE_FILL_HEIGHT=10;l.DEFAULT_STROKE_WIDTH=4;l.DEFAULT_TEXT_HALO_SIZE=1;l.DEFAULT_TEXT_HEIGHT=10;l.EnvDrawHelper=J;l.HittestDrawHelper=L;l.Transformation=F;l.horizontalAlignment2HAlign=K;l.lineGapType2LineHeight=Y;l.verticalAlignment2VAlign=P;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/fontUtils":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../config"],function(l,h,D){function B(q){if(!q)return"arial-unicode-ms";
q=q.toLowerCase().split(" ").join("-");switch(q){case "serif":return"noto-serif";case "sans-serif":return"arial-unicode-ms";case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";default:return q}}function y(q){a:{if(q.weight)switch(q.weight.toLowerCase()){case "bold":case "bolder":var k="-bold";break a}k=""}a:{if(q.style)switch(q.style.toLowerCase()){case "italic":case "oblique":var e="-italic";break a}e=""}k+=e;return B(q.family)+(0<k.length?k:
"-regular")}const v=new Map,C=new Set;let t=h._createClass(function(q,k){this.fontFace=q;this.promise=k});l.DEFAULT_FONT_FAMILY="arial-unicode-ms";l.clearFonts=function(){const q=document.fonts;v.forEach(k=>{q.delete(k.fontFace)});v.clear();C.clear()};l.getFontFamily=B;l.getFullyQualifiedFontName=y;l.isCachedFontFace=function(q){return C.has(q)};l.loadFont=async function(q){const k=y(q),e=v.get(k);if(e)return e.promise;const b=new FontFace(q.family,`url('${D.fontsUrl}/woff2/${k}.${"woff2"}') format('${"woff2"}')`,
{style:q.style,weight:q.weight}),c=document.fonts;if(c.has(b)&&"loading"===b.status)return b.loaded;q=b.load().then(()=>{c.add(b);return b});v.set(k,new t(b,q));C.add(b);return q};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/CIMImageColorSubstitutionHelper":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function h(){}var D=h.prototype;D.applyColorSubstituition=function(B,y){if(!y)return B;this._rasterizationCanvas||(this._rasterizationCanvas=
document.createElement("canvas"));const {width:v,height:C}=B,t=this._rasterizationCanvas,q=t.getContext("2d");B!==t&&(t.width=v,t.height=C,q.drawImage(B,0,0,v,C));B=q.getImageData(0,0,v,C).data;if(y)for(var k of y)if(k&&k.oldColor&&4===k.oldColor.length&&k.newColor&&4===k.newColor.length){const [e,b,c,f]=k.oldColor,[a,d,n,r]=k.newColor;if(e!==a||b!==d||c!==n||f!==r)for(y=0;y<B.length;y+=4)e===B[y]&&b===B[y+1]&&c===B[y+2]&&f===B[y+3]&&(B[y]=a,B[y+1]=d,B[y+2]=n,B[y+3]=r)}k=new ImageData(B,v,C);q.putImageData(k,
0,0);return t};D.tintImageData=function(B,y){if(!y||4>y.length)return B;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const {width:v,height:C}=B,t=this._rasterizationCanvas,q=t.getContext("2d");B!==t&&(t.width=v,t.height=C,q.drawImage(B,0,0,v,C));B=q.getImageData(0,0,v,C);B=new Uint8Array(B.data);y=[y[0]/255,y[1]/255,y[2]/255,y[3]/255];for(let k=0;k<B.length;k+=4)B[k]*=y[0],B[k+1]*=y[1],B[k+2]*=y[2],B[k+3]*=y[3];y=new ImageData(new Uint8ClampedArray(B.buffer),
v,C);q.putImageData(y,0,0);return t};return l._createClass(h)}()})},"esri/symbols/cim/imageUtils":function(){define(["exports"],function(l){l.getFirstFrame=function(h){const D=h.getFrame(0);if(D instanceof HTMLImageElement||D instanceof HTMLCanvasElement)return D;const B=document.createElement("canvas");B.width=h.width;B.height=h.height;h=B.getContext("2d");D instanceof ImageData?h.putImageData(D,0,0):h.drawImage(D,0,0);return B};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/Rect":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(l){return function(){function h(D=0,B=0,y=0,v=0){this.x=D;this.y=B;this.width=y;this.height=v}h.prototype.union=function(D){this.x=Math.min(this.x,D.x);this.y=Math.min(this.y,D.y);this.width=Math.max(this.width,D.width);this.height=Math.max(this.height,D.height)};l._createClass(h,[{key:"isEmpty",get:function(){return 0>=this.width||0>=this.height}}]);return h}()})},"esri/symbols/cim/TextRasterizer":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/screenUtils","../support/textUtils"],
function(l,h,D){function B(y){return`rgba(${y.slice(0,3).toString()},${y[3]})`}return function(){function y(C){C&&(this._textRasterizationCanvas=C)}var v=y.prototype;v.rasterizeText=function(C,t){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const q=this._textRasterizationCanvas;var k=q.getContext("2d");this._setFontProperties(k,t);this._parameters=t;this._textLines=C.split(/\r?\n/);this._lineHeight=this._computeLineHeight();const {decoration:e,weight:b}=
t.font;this._lineThroughWidthOffset=e&&"line-through"===e?.1*this._lineHeight:0;var c=(C=null!=t.backgroundColor||null!=t.borderLine)?D.BACKGROUND_PADDING:0,f=this._computeTextWidth(k,t)+2*c,a=this._lineHeight*this._textLines.length+2*c;q.width=f+2*this._lineThroughWidthOffset;q.height=a;if(0===q.width||0===q.height)return q.width=q.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:q};this._renderedLineHeight=Math.round(this._lineHeight*t.pixelRatio);
this._renderedHaloSize=h.pt2px(t.halo.size)*t.pixelRatio;this._renderedWidth=f*t.pixelRatio;this._renderedHeight=a*t.pixelRatio;this._lineThroughWidthOffset*=t.pixelRatio;f=t.halo&&t.halo.color?t.halo.color:[0,0,0,0];this._fillStyle=B(t.color??[0,0,0,0]);this._haloStyle=`rgb(${f.slice(0,3).toString()})`;f=this._renderedLineHeight;var d=this._renderedHaloSize;k.save();k.clearRect(0,0,q.width,q.height);this._setFontProperties(k,t);a=c*t.pixelRatio;c=k.textAlign;var n=this._renderedWidth-2*a;c=("center"===
c?.5*n:"right"===c?n:0)+d+a;a=d+a;d=0<d;n=this._lineThroughWidthOffset;let r=0;if(C){k.save();C=t.backgroundColor??[0,0,0,0];const g=t.borderLine?.color??[0,0,0,0],u=2*h.pt2px(t.borderLine?.size??0);k.fillStyle=B(C);k.strokeStyle=B(g);k.lineWidth=u;k.fillRect(0,0,q.width,q.height);k.strokeRect(0,0,q.width,q.height);k.restore()}d&&this._renderHalo(k,c,a,n,r,t);r+=a;n+=c;for(var p of this._textLines)d&&(k.globalCompositeOperation="destination-out",k.fillStyle="rgb(0, 0, 0)",k.fillText(p,n,r),k.globalCompositeOperation=
"source-over"),k.fillStyle=this._fillStyle,k.fillText(p,n,r),e&&"none"!==e&&this._renderDecoration(k,n,r,e,b),r+=f;k.restore();p=this._renderedWidth+2*this._lineThroughWidthOffset;C=this._renderedHeight;k=k.getImageData(0,0,p,C);k=new Uint8Array(k.data);if(t.premultiplyColors)for(c=0;c<k.length;c+=4)f=k[c+3]/255,k[c]*=f,k[c+1]*=f,k[c+2]*=f;switch(t.horizontalAlignment){case "left":f=-.5;break;case "right":f=.5;break;default:f=0}switch(t.verticalAlignment){case "bottom":t=-.5;break;case "top":t=.5;
break;default:t=0}return{size:[p,C],image:new Uint32Array(k.buffer),sdf:!1,simplePattern:!1,anchorX:f,anchorY:t,canvas:q}};v._renderHalo=function(C,t,q,k,e,b){const c=this._renderedWidth,f=this._renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas"));this._haloRasterizationCanvas.width=c;this._haloRasterizationCanvas.height=f;const a=this._haloRasterizationCanvas,d=a.getContext("2d");d.clearRect(0,0,c,f);this._setFontProperties(d,b);const {decoration:n,
weight:r}=b.font;d.fillStyle=this._haloStyle;d.strokeStyle=this._haloStyle;d.lineJoin="round";this._renderHaloNative(d,t,q,n,r);C.globalAlpha=this._parameters.halo.color[3];C.drawImage(a,0,0,c,f,k,e,c,f);C.globalAlpha=1};v._renderHaloNative=function(C,t,q,k,e){const b=this._renderedLineHeight,c=this._renderedHaloSize;for(const f of this._textLines){const a=2*c;for(let d=0;5>d;d++){const n=(.6+.1*d)*a;C.lineWidth=n;C.strokeText(f,t,q);k&&"none"!==k&&this._renderDecoration(C,t,q,k,e,n)}q+=b}};v._setFontProperties=
function(C,t){var q=t.font;q=`${q.style} ${q.weight} ${h.pt2px(Math.max(t.size,.5)*t.pixelRatio).toFixed(1)}px ${q.family}, sans-serif`;C.font=q;C.textBaseline="top";switch(t.horizontalAlignment){case "left":t="left";break;case "right":t="right";break;case "center":t="center";break;default:t="left"}C.textAlign=t};v.computeTextSize=function(C,t){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const q=this._textRasterizationCanvas;var k=q.getContext("2d");
this._setFontProperties(k,t);this._parameters=t;this._textLines=C.split(/\r?\n/);this._lineHeight=this._computeLineHeight();C=this._computeTextWidth(k,t);k=this._lineHeight*this._textLines.length;q.width=C;q.height=k;return[C*t.pixelRatio,k*t.pixelRatio]};v._computeTextWidth=function(C,t){let q=0;for(const k of this._textLines)q=Math.max(q,C.measureText(k).width);t=t.font;if("italic"===t.style||"oblique"===t.style||"string"===typeof t.weight&&("bold"===t.weight||"bolder"===t.weight)||"number"===typeof t.weight&&
600<t.weight)q+=.3*C.measureText("w").width;q+=2*h.pt2px(this._parameters.halo.size);return Math.round(q)};v._computeLineHeight=function(){let C=1.275*this._parameters.size;const t=this._parameters.font.decoration;t&&"underline"===t&&(C*=1.3);return Math.round(C+2*h.pt2px(this._parameters.halo.size))};v._renderDecoration=function(C,t,q,k,e,b){const c=.9*this._lineHeight;switch(C.textAlign){case "center":t-=this._renderedWidth/2;break;case "right":t-=this._renderedWidth}const f=C.textBaseline;if("underline"===
k)switch(f){case "top":q+=c;break;case "middle":q+=c/2}else if("line-through"===k)switch(f){case "top":q+=c/1.5;break;case "middle":q+=c/3}k=b?1.5*b:Math.ceil(c*("bold"===e?.06:"bolder"===e?.09:.04));C.save();C.beginPath();C.strokeStyle=C.fillStyle;C.lineWidth=k;C.moveTo(t-this._lineThroughWidthOffset,q);C.lineTo(t+this._renderedWidth+2*this._lineThroughWidthOffset,q);C.stroke();C.restore()};return l._createClass(y)}()})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(l,
h){function D(b){return"function"===typeof b}function B(b){let c=b.length;for(;c--;)if(!" /-,\n".includes(b.charAt(c)))return!1;return!0}function y(b,c){const f=[];var a=0;let d=-1;do d=b.indexOf("[",a),d>=a&&(d>a&&(a=b.substr(a,d-a),f.push([a,null,B(a)])),a=d+1,d=b.indexOf("]",a),d>=a&&(d>a&&(a=b.substr(a,d-a),(a=c[a])&&f.push([null,a,!1])),a=d+1));while(-1!==d);a<b.length-1&&(b=b.substr(a),f.push([b,null,B(b)]));return f}function v(b,c,f){let a="",d=null;for(const n of c){const [r,p,g]=n;if(r)g?
d=r:(d&&(a+=d,d=null),a+=r);else if(c=b.attributes[p])d&&(a+=d,d=null),a+=c}return C(a,f)}function C(b,c){"string"!==typeof b&&(b=String(b));switch(c){case "LowerCase":return b.toLowerCase();case "Allcaps":return b.toUpperCase();default:return b}}function t(b){return b?{r:b[0],g:b[1],b:b[2],a:b[3]/255}:{r:0,g:0,b:0,a:0}}function q(b){if(!b)return null;switch(b.type){case "CIMPolygonSymbol":if(b.symbolLayers)for(const c of b.symbolLayers)if(b=q(c),null!=b)return b;break;case "CIMTextSymbol":return q(b.symbol);
case "CIMSolidFill":return b.color}}function k(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b=b.symbolLayers)for(const c of b)if(b=k(c),null!=b)return b;break;case "CIMTextSymbol":return k(b.symbol);case "CIMSolidStroke":return b.color}}function e(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers)for(const c of b.symbolLayers)if(b=e(c),void 0!==b)return b;break;case "CIMTextSymbol":return e(b.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return b.width}}
h.adjustTextCase=C;h.analyzeTextParts=y;h.assignTextValuesFromFeature=v;h.attributesToFields=function(b){return(b?Object.keys(b):[]).map(c=>({name:c,alias:c,type:"string"===typeof b[c]?"esriFieldTypeString":"esriFieldTypeDouble"}))};h.colorToArray=function(b){return[b.r,b.g,b.b,b.a]};h.createLabelOverrideFunction=function(b,c,f){const a=y(c,b);return d=>v(d,a,f)};h.evaluateValueOrFunction=function(b,c,f,a){return D(b)?b(c,f,a):b};h.fromCIMColor=t;h.fromCIMFontDecoration=function(b){return b.underline?
"underline":b.strikethrough?"line-through":"none"};h.fromCIMFontStyle=function(b){let c="normal",f="normal";b&&(b=b.toLowerCase(),b.includes("italic")?c="italic":b.includes("oblique")&&(c="oblique"),b.includes("bold")?f="bold":b.includes("light")&&(f="lighter"));return{style:c,weight:f}};h.fromCIMHorizontalAlignment=function(b){switch(b){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"center"}};h.fromCIMVerticalAlignment=function(b){switch(b){default:return"top";
case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}};h.getFillColor=q;h.getFontStyle=function(b){if(!b)return"normal";switch(b.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};h.getFontWeight=function(b){if(!b)return"normal";switch(b.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";default:return"normal"}};h.getStrokeColor=k;h.getStrokeWidth=e;h.getTintColor=
b=>b.tintColor?t(b.tintColor):{r:255,g:255,b:255,a:1};h.getValue=(b,c=0)=>null==b||isNaN(b)?c:b;h.importGeometryEngine=function(){return new Promise((b,c)=>l(["../../geometry/geometryEngineJSON"],b,c))};h.isCIMFill=function(b){return null!=b&&("CIMGradientFill"===b.type||"CIMHatchFill"===b.type||"CIMPictureFill"===b.type||"CIMSolidFill"===b.type||"CIMWaterFill"===b.type)};h.isCIMMarker=function(b){return"CIMVectorMarker"===b.type||"CIMPictureMarker"===b.type||"CIMBarChartMarker"===b.type||"CIMCharacterMarker"===
b.type||"CIMPieChartMarker"===b.type||"CIMStackedBarChartMarker"===b.type};h.isCIMMarkerStrokePlacement=function(b){return null!=b&&("CIMMarkerPlacementAlongLineRandomSize"===b.type||"CIMMarkerPlacementAlongLineSameSize"===b.type||"CIMMarkerPlacementAlongLineVariableSize"===b.type||"CIMMarkerPlacementAtExtremities"===b.type||"CIMMarkerPlacementAtMeasuredUnits"===b.type||"CIMMarkerPlacementAtRatioPositions"===b.type||"CIMMarkerPlacementOnLine"===b.type||"CIMMarkerPlacementOnVertices"===b.type)};h.isCIMStroke=
function(b){return"CIMGradientStroke"===b.type||"CIMPictureStroke"===b.type||"CIMSolidStroke"===b.type};h.isFeatureValueFn=D;h.isGeometryEngineRequired=b=>{if(!b)return!1;for(const c of b)switch(c.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":case "CIMGeometricEffectDonut":return!0}return!1};h.isSVGImage=b=>b.includes("data:image/svg+xml");h.mapCIMSymbolToGeometryType=function(b){if(!b)return null;switch(b.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";
case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}};h.resampleHermite=function(b,c,f,a,d,n,r=!0){const p=c/d;f/=n;const g=Math.ceil(p/2),u=Math.ceil(f/2);for(let m=0;m<n;m++)for(let z=0;z<d;z++){const A=4*(z+(r?n-m-1:m)*d);var x=0;let H=0,E=0,F=0,J=0,L=0,I=0;const G=(m+.5)*f;for(let K=Math.floor(m*f);K<(m+1)*f;K++){var w=Math.abs(G-(K+.5))/u;const P=(z+.5)*p;w*=w;for(let Y=Math.floor(z*p);Y<(z+1)*p;Y++){let ea=Math.abs(P-(Y+.5))/
g;x=Math.sqrt(w+ea*ea);-1<=x&&1>=x&&(x=2*x*x*x-3*x*x+1,0<x&&(ea=4*(Y+K*c),I+=x*b[ea+3],E+=x,255>b[ea+3]&&(x=x*b[ea+3]/250),F+=x*b[ea],J+=x*b[ea+1],L+=x*b[ea+2],H+=x))}}a[A]=F/H;a[A+1]=J/H;a[A+2]=L/H;a[A+3]=I/E}};h.toCIMSymbolJSON=function(b){return b.data?.symbol??null};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/arcade/callExpressionWithFeature":function(){define(["../../../core/Error","../../../core/Logger","../../../geometry/support/quantizationUtils"],function(l,
h,D){function B(v){const C={};switch(v){case "esriGeometryPoint":return(t,q,k,e)=>D.unquantizePoint(q,C,t,k,e);case "esriGeometryPolygon":return(t,q,k,e)=>D.unquantizePolygon(q,C,t,k,e);case "esriGeometryPolyline":return(t,q,k,e)=>D.unquantizePolyline(q,C,t,k,e);case "esriGeometryMultipoint":return(t,q,k,e)=>D.unquantizeMultipoint(q,C,t,k,e);default:return h.getLogger("esri.views.2d.support.arcadeOnDemand").error(new l("mapview-arcade",`Unable to handle geometryType: ${v}`)),t=>t}}const y=new Map;
return function(v,C,t,q,k){if(null==v)return null;if(v.referencesGeometry()&&k){const {transform:e,hasZ:b,hasM:c}=k;y.has(q)||y.set(q,B(q));q=y.get(q)(C.geometry,e,b,c);C={...C,geometry:q}}C=v.repurposeFeature(C);try{return v.evaluate({...t,$feature:C},v.services)}catch(e){return h.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}}})},"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../../../../../symbols/cim/enums ../../color ../../definitions ../../enums ../../number ../../materialKey/MaterialKey ./util ./WGLBaseMarkerTemplate ./WGLMeshTemplate".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c){return function(f){function a(d,n,r,p,g,u,x,w,m,z,A,H,E,F,J,L,I,G,K,P,Y,ea,aa,T){var R=f.call(this)||this;R.angle=p;R.height=x;R.width=u;R.xOffset=n*K;R.yOffset=r*K;R._markerPlacement=P||void 0;R._effects=Y||void 0;R._anchorX=L;R._anchorY=I;R._minMaxZoom=q.i1616to32(Math.round(ea*C.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(aa*C.MIN_MAX_ZOOM_PRECISION_FACTOR));n=(F===y.Alignment.MAP?C.BITSET_MARKER_ALIGNMENT_MAP:C.BITSET_MARKER_ALIGNMENT_SCREEN)|(A?C.BITSET_GENERIC_LOCK_COLOR:
0)|(E?C.BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE:0)|(H?C.BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY:0);r=J&&J.sdf;d=k.MarkerMaterialKey.load(d);d.sdf=r;d.pattern=!0;d.textureBinding=J.textureBinding;R._materialKey=d.data;R._fillColor=g;R._outlineColor=m;R._sizeOutlineWidth=q.i8888to32(Math.round(Math.min(Math.sqrt(128*u),255)),Math.round(Math.min(Math.sqrt(128*x),255)),Math.round(Math.min(Math.sqrt(128*z),255)),Math.round(Math.min(Math.sqrt(128*w),255)));d.symbologyType===t.WGLSymbologyType.PIE_CHART?
(R._computedWidth=u*G*K,R._computedHeight=x*G*K,R._texUpperLeft=q.i1616to32(0,1),R._texUpperRight=q.i1616to32(1,1),R._texBottomLeft=q.i1616to32(0,0),R._texBottomRight=q.i1616to32(1,0)):R._computeSize(u,x,G,z,K,J,d.hasSizeVV(),T);R._bitestAndDistRatio=q.i1616to32(n,Math.round(64*G));g=B.create();u=D.create();R._applyTransformation(u,g);return R}l._inherits(a,f);a.fromCIMMarker=function(d,n,r){const p=d.size,g=(n&&n.width||1)/(n&&n.height||1)*d.scaleX;var u=d.scaleSymbolsProportionally&&d.frameHeight?
p/d.frameHeight:1;const x=v.premultiplyAlphaRGBA(d.color),w=v.premultiplyAlphaRGBA(d.outlineColor),m=h.pt2px(p),z=m*g,A=h.pt2px(d.offsetX||0),H=h.pt2px(d.offsetY||0);u*=h.pt2px(d.outlineWidth||0);const E=d.alignment||y.Alignment.SCREEN,F=h.pt2px(d.referenceSize),[J,L]=e.getMinMaxZoom(d.scaleInfo,r);r=d.rotation||0;d.rotateClockwise||(r=-r);let I=0,G=0;const K=d.anchorPoint;K&&(d.isAbsoluteAnchorPoint?p&&(I=K.x/(p*g),G=K.y/p):(I=K.x,G=K.y));n=new a(d.materialKey,A,H,r,x,z,m,F,w,u,d.colorLocked,d.scaleSymbolsProportionally,
!1,E,n,I,G,d.sizeRatio,d.scaleFactor??1,d.markerPlacement,d.effects,J,L,!0);n._vertexBoundsScaleX=d.maxVVSize?d.maxVVSize/z:1;n._vertexBoundsScaleY=d.maxVVSize?d.maxVVSize/m:1;return n};a.fromPictureMarker=function(d,n){const r=Math.round(h.pt2px(d.width)),p=Math.round(h.pt2px(d.height)),g=C.PICTURE_FILL_COLOR,u=Math.round(h.pt2px(d.xoffset||0)),x=Math.round(h.pt2px(d.yoffset||0));n=new a(d.materialKey,u,x,d.angle,g,r,p,p,0,0,!1,!1,!1,y.Alignment.SCREEN,n,0,0,1,1,null,null,e.DEFAULT_MIN_ZOOM,e.DEFAULT_MAX_ZOOM,
!1);n._vertexBoundsScaleX=d.maxVVSize?d.maxVVSize/d.width:1;n._vertexBoundsScaleY=d.maxVVSize?d.maxVVSize/d.height:1;return n};a.fromSimpleMarker=function(d,n){const r=d.style,p=v.premultiplyAlphaRGBAArray(d.color),g=Math.round(h.pt2px(d.size));let u=g;"esriSMSTriangle"===r&&(u*=n.height/n.width);const x=Math.round(h.pt2px(d.xoffset||0)),w=Math.round(h.pt2px(d.yoffset||0));var m=d.outline;const z=(m?.color&&v.premultiplyAlphaRGBAArray(m.color))|0;m=(m?.width&&Math.round(h.pt2px(m.width)))|0;n=new a(d.materialKey,
x,w,d.angle??0,p,g,u,u,z,m,!1,!1,"esriSMSCross"===r||"esriSMSX"===r,y.Alignment.SCREEN,n,0,0,2,1,null,null,e.DEFAULT_MIN_ZOOM,e.DEFAULT_MAX_ZOOM,!1);n.boundsType="esriSMSCircle"===r?"circle":"square";n._vertexBoundsScaleX=d.maxVVSize?d.maxVVSize/d.size:1;n._vertexBoundsScaleY=d.maxVVSize?d.maxVVSize/d.size:1;return n};a.fromLineSymbolMarker=function(d,n){const r=v.premultiplyAlphaRGBAArray(d.color),p=Math.round(h.pt2px(6*d.lineWidth)),g="cross"===d.style||"x"===d.style;switch(d.placement){case "begin-end":var u=
y.ExtremityPlacement.Both;break;case "begin":u=y.ExtremityPlacement.JustBegin;break;case "end":u=y.ExtremityPlacement.JustEnd;break;default:u=y.ExtremityPlacement.None}u={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:u,offsetAlongLine:0};n=new a(d.materialKey,0,0,0,r,p,p,p/6,r,g?Math.round(h.pt2px(d.lineWidth)):0,!1,!1,g,y.Alignment.MAP,n,0,0,2,1,u,null,e.DEFAULT_MIN_ZOOM,e.DEFAULT_MAX_ZOOM,!1);n.boundsType="circle"===d.style?"circle":"square";return n};return l._createClass(a)}(b(c))})},
"esri/views/2d/engine/webgl/mesh/templates/WGLBaseMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2 ../../../../../../chunks/vec2f32 ../../../../../../geometry/GeometryCursor ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper ../../definitions ../../enums ../../number ../../materialKey/MaterialKey".split(" "),function(l,
h,D,B,y,v,C,t,q,k,e,b){const c=3.14159265359/180;return f=>function(a){function d(...r){r=a.call(this,...r)||this;r.angle=0;r.xOffset=0;r.yOffset=0;r.width=0;r.height=0;r.boundsType="square";r._anchorX=0;r._anchorY=0;r._computedWidth=0;r._computedHeight=0;r._allowBorrowing=!0;r._vertexBoundsScaleX=1;r._vertexBoundsScaleY=1;r.geometryType=k.WGLGeometryType.MARKER;return r}l._inherits(d,a);var n=d.prototype;n._write=function(r,p,g,u){const x=p.getDisplayId();r.recordStart(x,this._materialKey,this.geometryType,
!0);this._writeGeometry(r,p,x,g,u);r.recordEnd()};n._writeGeometry=function(r,p,g,u,x){if(null!=this._markerPlacement)return this._writePlacedMarkers(r,p,u,x);this._allowBorrowing=!0;if(!x&&"esriGeometryPoint"===p.geometryType)return u=p.getX(),p=p.getY(),!r.hasAggregates&&r.hasPixelBufferEnabled&&(0>u||513<=u||0>p||513<=p)?void 0:this._writeVertices(r,g,this._getPos(u,p),u,p);p=x?x.asOptimized():"esriGeometryPolygon"===p.geometryType?p.readCentroid():p.readGeometryForDisplay();if(null!=p){if(p.isPoint){const [w,
m]=p.coords;return!r.hasAggregates&&r.hasPixelBufferEnabled&&(0>w||512<=w||0>m||512<=m)?void 0:this._writeVertices(r,g,this._getPos(w,m),w,m)}p.forEachVertex((w,m)=>{const z=2*q.TILE_SIZE;w<-z||w>=z||m<-z||m>=z||this._writeVertices(r,g,this._getPos(w,m),w,m)})}};n._writePlacedMarkers=function(r,p,g,u){if(u=u||C.GeometryCursor.fromFeatureSetReaderCIM(p))if(g=t.CIMMarkerPlacementHelper.getPlacement(u,-1,this._markerPlacement,h.pt2px(1),r.tileKey,g.geometryEngine)){this._allowBorrowing="esriGeometryPolygon"!==
p.geometryType;p=p.getDisplayId();u=v.create();for(var x=B.create(),w=g.next();null!=w;){const m=w.tx,z=-w.ty;-128<=m&&640>=m&&-128<=z&&640>=z&&(this._applyTransformation(x,u,-w.getAngle()/c),this._writeVertices(r,p,this._getPos(m,z),m,z));w=g.next()}}};n._writeVertices=function(r,p,g,u,x){const w=b.MarkerMaterialKey.load(this._materialKey);switch(w.symbologyType){case k.WGLSymbologyType.HEATMAP:return this._writeHeatmapVertices(r,p,g);default:return this._writeMarkerVertices(r,p,w,g,u,x)}};n._writeMarkerVertices=
function(r,p,g,u,x,w){var m=g.vvRotation;g=r.vertexCount();let z=this._computedWidth*this._vertexBoundsScaleX;var A=this._computedHeight*this._vertexBoundsScaleY;this.angle&&(z=A=Math.max(z,A));m&&(m=Math.max(this.xOffset,this.yOffset),z+=m,A+=m);this._allowBorrowing&&r.vertexBounds(x+this.xOffset,w-this.yOffset,z,A);r.vertexWrite(u);r.vertexWrite(this._offsetUpperLeft);r.vertexWrite(this._texUpperLeft);r.vertexWrite(this._bitestAndDistRatio);r.vertexWrite(p);r.vertexWrite(this._fillColor);r.vertexWrite(this._outlineColor);
r.vertexWrite(this._sizeOutlineWidth);r.vertexWrite(this._minMaxZoom);r.vertexEnd();r.vertexWrite(u);r.vertexWrite(this._offsetUpperRight);r.vertexWrite(this._texUpperRight);r.vertexWrite(this._bitestAndDistRatio);r.vertexWrite(p);r.vertexWrite(this._fillColor);r.vertexWrite(this._outlineColor);r.vertexWrite(this._sizeOutlineWidth);r.vertexWrite(this._minMaxZoom);r.vertexEnd();r.vertexWrite(u);r.vertexWrite(this._offsetBottomLeft);r.vertexWrite(this._texBottomLeft);r.vertexWrite(this._bitestAndDistRatio);
r.vertexWrite(p);r.vertexWrite(this._fillColor);r.vertexWrite(this._outlineColor);r.vertexWrite(this._sizeOutlineWidth);r.vertexWrite(this._minMaxZoom);r.vertexEnd();r.vertexWrite(u);r.vertexWrite(this._offsetBottomRight);r.vertexWrite(this._texBottomRight);r.vertexWrite(this._bitestAndDistRatio);r.vertexWrite(p);r.vertexWrite(this._fillColor);r.vertexWrite(this._outlineColor);r.vertexWrite(this._sizeOutlineWidth);r.vertexWrite(this._minMaxZoom);r.vertexEnd();this._writeIndices(r,g)};n._writeHeatmapVertices=
function(r,p,g){const u=r.vertexCount();r.vertexWrite(g);r.vertexWrite(this._offsetUpperLeft);r.vertexWrite(p);r.vertexEnd();r.vertexWrite(g);r.vertexWrite(this._offsetUpperRight);r.vertexWrite(p);r.vertexEnd();r.vertexWrite(g);r.vertexWrite(this._offsetBottomLeft);r.vertexWrite(p);r.vertexEnd();r.vertexWrite(g);r.vertexWrite(this._offsetBottomRight);r.vertexWrite(p);r.vertexEnd();this._writeIndices(r,u)};n._writeIndices=function(r,p){r.indexWrite(p+0);r.indexWrite(p+1);r.indexWrite(p+2);r.indexWrite(p+
1);r.indexWrite(p+3);r.indexWrite(p+2)};n._applyTransformation=function(r,p,g=0){g?D.fromRotation(r,c*g):D.identity(r);D.translate(r,r,v.fromValues(this.xOffset,-this.yOffset));this.angle&&D.rotate(r,r,c*this.angle);g=this._computedWidth;const u=this._computedHeight,x=-(.5+this._anchorX)*g,w=-(.5-this._anchorY)*u;y.set(p,x,w);y.transformMat2d(p,p,r);this._offsetUpperLeft=e.i1616to32(16*p[0],16*p[1]);y.set(p,x+g,w);y.transformMat2d(p,p,r);this._offsetUpperRight=e.i1616to32(16*p[0],16*p[1]);y.set(p,
x,w+u);y.transformMat2d(p,p,r);this._offsetBottomLeft=e.i1616to32(16*p[0],16*p[1]);y.set(p,x+g,w+u);y.transformMat2d(p,p,r);this._offsetBottomRight=e.i1616to32(16*p[0],16*p[1])};n._computeSize=function(r,p,g,u,x,w,m,z){const A=r*g;g*=p;w.sdf&&!m?(u+=2,r=Math.min((z&&r>p?A:r)+u,A),p=Math.min(p+u,g)):(r=A,p=g);z=q.SDF_TEXTURE_SIZE/Math.max(A,g);m=.5*(A-r)*z;var H=.5*(g-p)*z;z=w.rect.x+q.SPRITE_PADDING+m;u=w.rect.y+q.SPRITE_PADDING+H;m=z+w.width-2*m;w=u+w.height-2*H;H=Math.floor(z);const E=Math.floor(u),
F=Math.ceil(m),J=Math.ceil(w);r*=(F-H)/(m-z);p*=(J-E)/(w-u);this._texUpperLeft=e.i1616to32(H,E);this._texUpperRight=e.i1616to32(F,E);this._texBottomLeft=e.i1616to32(H,J);this._texBottomRight=e.i1616to32(F,J);this._anchorX*=A/r;this._anchorY*=g/p;this._computedWidth=r*x;this._computedHeight=p*x};n._getPos=function(r,p){return e.i1616to32(Math.round(8*r),Math.round(8*p))};return l._createClass(d)}(f)})},"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/promiseUtils ../../../../../../symbols/support/defaultsJSON ../../enums ../../materialKey/MaterialKey ./WGLDynamicFillTemplate ./WGLDynamicLineTemplate ./WGLDynamicMarkerTemplate ./WGLDynamicTextTemplate ./WGLFillTemplate ./WGLLineTemplate ./WGLMarkerTemplate ./WGLTextTemplate ../../util/Lock ../../util/Result ../../../../layers/features/textUtils ../../../../layers/support/cimSymbolUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p,g){function u(E,F){const J=E.length;E.push(null);F.then(L=>E[J]=L);return E}function x(E){return null!=E&&!!(E&1)}const w=B.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),m={sortKey:null,templates:[]};B={isOutline:!1,placement:null,symbologyType:C.WGLSymbologyType.DEFAULT,vvFlags:0};const z={...v.errorPointSymbolJSON,hash:JSON.stringify(v.errorPointSymbolJSON),materialKey:t.createMaterialKey(C.WGLGeometryType.MARKER,B)},A={...v.errorPolylineSymbolJSON,
hash:JSON.stringify(v.errorPolylineSymbolJSON),materialKey:t.createMaterialKey(C.WGLGeometryType.LINE,B)},H={...v.errorPolygonSymbolJSON,hash:JSON.stringify(v.errorPolygonSymbolJSON),materialKey:t.createMaterialKey(C.WGLGeometryType.FILL,B)};v=function(){function E(J,L){this._templateIdCounter=this._idCounter=1;this._idToTemplateGroup=new Map;this._symbolToTemplate=new Map;this._fetchQueue=[];this._idToResolver=new Map;this._cimTemplateCache=new Map;this._cimAnalyses=[];this._lock=new n.Lock;this._fetchResource=
J;this._tileInfo=L}var F=E.prototype;F.createTemplateGroup=function(J,L,I=null){this._initErrorTemplates();const G=J.hash;var K=this._symbolToTemplate.get(G);if(null!=K)return K;K=[];I={sortKey:I,templates:K};L&&this._createMeshTemplates(K,L,!0);this._createMeshTemplates(K,J,!1);L=this._createGroupId;if(K="expanded-cim"===J.type)a:{if(J.layers)for(const P of J.layers)if("function"===typeof P.materialHash){K=!0;break a}K=!1}J=L.call(this,K);this._idToTemplateGroup.set(J,I);this._symbolToTemplate.set(G,
J);return J};F.getTemplateGroup=function(J){return this._idToTemplateGroup.get(J)??m};F.getDynamicTemplateGroup=function(J){if(!this._idToTemplateGroup.has(J))return m;x(J)||w.error("mapview-template-store",`Id ${J} does not refer to a dynamic template`);return this._idToTemplateGroup.get(J)};F.getMosaicItem=function(J,L){const I=this._createTemplateId(),G=new Promise(K=>this._idToResolver.set(I,K));this._fetchQueue.push({symbol:J,id:I,glyphIds:L});return G};F.finalize=function(J){return this._fetchQueue.length||
this._lock.isHeld()?n.withLock(this._lock,this._fetchAllQueuedResources.bind(this),J):Promise.resolve()};F._initErrorTemplates=function(){this._errorTemplates||(this._errorTemplates={fill:this._createMeshTemplates([],H,!1),marker:this._createMeshTemplates([],z,!1),line:this._createMeshTemplates([],A,!1)})};F._fetchAllQueuedResources=function(J){if(!this._fetchQueue.length)return Promise.resolve();const L=this._fetchQueue,I=this._cimAnalyses;this._fetchQueue=[];this._cimAnalyses=[];return Promise.all(I).then(()=>
this._fetchResource(L,J).then(G=>{for(const {id:K,mosaicItem:P}of G)this._idToResolver.get(K)(P),this._idToResolver.delete(K)})).catch(G=>{y.isAbortError(G)?this._fetchQueue=this._fetchQueue.concat(L):"worker:port-closed"!==G.name&&w.error(new D("mapview-template-store","Unable to fetch requested texture resources",G))})};F._createGroupId=function(J){return this._idCounter++<<1|(J?1:0)};F._createTemplateId=function(){return this._templateIdCounter++};F._createSMS=async function(J){const {spriteMosaicItem:L}=
await this.getMosaicItem(J);return r.ok(L,w)?a.fromSimpleMarker(J,L):this._markerError};F._createPMS=async function(J){const {spriteMosaicItem:L}=await this.getMosaicItem(J);return r.ok(L,w)?a.fromPictureMarker(J,L):this._markerError};F._createSFS=async function(J,L){const {spriteMosaicItem:I}=await this.getMosaicItem(J);return r.ok(I,w)?c.fromSimpleFill(J,I,L):this._fillError};F._createPFS=async function(J,L){const {spriteMosaicItem:I}=await this.getMosaicItem(J);return r.ok(I,w)?c.fromPictureFill(J,
I,L):this._fillError};F._createSLS=async function(J,L){({spriteMosaicItem:L}=await this.getMosaicItem(J));return r.ok(L,w)?f.fromSimpleLine(J,L):this._lineError};F._createLMS=async function(J){const {spriteMosaicItem:L}=await this.getMosaicItem(J);return r.ok(L,w)?a.fromLineSymbolMarker(J,L):this._markerError};F._createTS=async function(J){const {glyphMosaicItems:L}=await this.getMosaicItem(J);return d.fromText(J,L??[])};F._createCIMText=async function(J){const {glyphMosaicItems:L}=await this.getMosaicItem(g.cimLayerToRasterizationInfo(J),
p.codepoints(J.text));return r.ok(L,w)?d.fromCIMText(J,L,this._tileInfo):this._textError};F._createCIMFill=async function(J){const {spriteMosaicItem:L}=await this.getMosaicItem(g.cimLayerToRasterizationInfo(J));return r.ok(L,w)?c.fromCIMFill(J,L,this._tileInfo):this._fillError};F._createCIMLine=async function(J){const {spriteMosaicItem:L}=await this.getMosaicItem(g.cimLayerToRasterizationInfo(J));return r.ok(L,w)?f.fromCIMLine(J,L,this._tileInfo):this._lineError};F._createCIMMarker=async function(J){const {spriteMosaicItem:L}=
await this.getMosaicItem(g.cimLayerToRasterizationInfo(J));return r.ok(L,w)?a.fromCIMMarker(J,L,this._tileInfo):this._markerError};F._createCIM=async function(J){const L=J.templateHash;let I=this._cimTemplateCache.get(L);if(null!=I)return I;switch(J.type){case "marker":I=await this._createCIMMarker(J);break;case "line":I=await this._createCIMLine(J);break;case "fill":I=await this._createCIMFill(J);break;case "text":I=await this._createCIMText(J)}this._cimTemplateCache.set(L,I);return I};F._createDynamicCIM=
async function(J){const L=J.templateHash;let I=this._cimTemplateCache.get(L);if(null!=I)return I;switch(J.type){case "marker":I=e.fromCIMMarker(J,this._tileInfo);break;case "line":I=k.fromCIMLine(J,this._tileInfo);break;case "fill":I=q.fromCIMFill(J,this._tileInfo);break;case "text":I=b.fromCIMText(J,this._tileInfo)}this._cimTemplateCache.set(L,I);return I};F._createPrimitiveMeshTemplates=function(J,L,I){switch(L.type){case "esriSMS":return u(J,this._createSMS(L));case "esriPMS":return u(J,this._createPMS(L));
case "esriSFS":return u(J,this._createSFS(L,I));case "line-marker":return u(J,this._createLMS(L));case "esriPFS":return u(J,this._createPFS(L,I));case "esriSLS":return u(J,this._createSLS(L,!1));case "esriTS":return u(J,this._createTS(L));default:return w.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),J}};F._createMeshTemplates=function(J,L,I){if(L.type.includes("3d"))return w.error("3D symbols are not supported with MapView"),J;if("expanded-cim"===L.type){for(const G of L.layers)"function"===
typeof G.materialHash?u(J,this._createDynamicCIM(G)):u(J,this._createCIM(G));return J}if("composite-symbol"===L.type){for(const G of L.layers)this._createPrimitiveMeshTemplates(J,G,I);return J}return"cim"===L.type||"label"===L.type||"web-style"===L.type?J:this._createPrimitiveMeshTemplates(J,L,I)};h._createClass(E,[{key:"_markerError",get:function(){return this._errorTemplates.marker[0]}},{key:"_fillError",get:function(){return this._errorTemplates.fill[0]}},{key:"_lineError",get:function(){return this._errorTemplates.line[0]}},
{key:"_textError",get:function(){return this._errorTemplates.line[0]}}]);return E}();l.WGLTemplateStore=v;l.errorPointSchema2D=z;l.errorPolygonSchema2D=H;l.errorPolylineSchema2D=A;l.isDynamicId=x;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../../../../../symbols/cim/utils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./util ./WGLBaseFillTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b){return function(c){function f(a,d,n){var r=c.call(this,a)||this;r._minMaxZoom=C.i1616to32(Math.round(d*y.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(n*y.MIN_MAX_ZOOM_PRECISION_FACTOR));D.isFeatureValueFn(a.color)?r._dynamicPropertyMap.set("fillColor",(m,z,A)=>(m=a.color(m,z,A))&&B.premultiplyAlphaRGBA(m)||0):(d=a.color,r.fillColor=d&&B.premultiplyAlphaRGBA(d)||0);const p="CIMMarkerPlacementInsidePolygon"===a.cim.placement?.type&&a.cim.placement.shiftOddRows?2:1,g=a.height;
D.isFeatureValueFn(g)?r._dynamicPropertyMap.set("_height",(m,z,A)=>g(m,z,A)*p):r._height=(g||0)*p;const u=a.offsetX;D.isFeatureValueFn(u)?r._dynamicPropertyMap.set("_offsetX",(m,z,A)=>h.pt2px(u(m,z,A))):r._offsetX=h.pt2px(u||0);const x=a.offsetY;D.isFeatureValueFn(x)?r._dynamicPropertyMap.set("_offsetY",(m,z,A)=>h.pt2px(-x(m,z,A))):r._offsetY=h.pt2px(-x||0);d=a.scaleX;D.isFeatureValueFn(d)?r._dynamicPropertyMap.set("_scaleX",d):r._scaleX=d||1;const w=a.angle;D.isFeatureValueFn(w)?r._dynamicPropertyMap.set("_angle",
(m,z,A)=>v.degToByte(w(m,z,A))):r._angle=v.degToByte(w)||0;null!=a.effects&&(d=a.effects,D.isFeatureValueFn(d)?r._dynamicPropertyMap.set("_effects",d):r._effects=d);r._cimFillLayer=a;r._bitset=(a.colorLocked?y.BITSET_GENERIC_LOCK_COLOR:0)|(a.applyRandomOffset?y.BITSET_FILL_RANDOM_PATTERN_OFFSET:0)|(a.sampleAlphaOnly?y.BITSET_GENERIC_CONSIDER_ALPHA_ONLY:0)|(a.hasUnresolvedReplacementColor?y.BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR:0);r._fillMaterialKey=a.materialKey;return r}l._inherits(f,c);f.fromCIMFill=
function(a,d){const [n,r]=q.getMinMaxZoom(a.scaleInfo,d);return new f(a,n,r)};f.prototype.bindFeature=function(a,d,n){const r=a.readLegacyFeature();this._dynamicPropertyMap.forEach((u,x)=>{this[x]=u(r,d,n)});a=t.FillMaterialKey.load(this._fillMaterialKey);var p=this._materialCache,g=this._cimFillLayer.materialHash;g=g(r,d,n);g=p.get(g);p=null;g&&b.ok(g.spriteMosaicItem)&&(p=g.spriteMosaicItem);if(p){const {rect:u,width:x,height:w}=p;g=u.x+y.SPRITE_PADDING;const m=u.y+y.SPRITE_PADDING,z=g+x,A=m+w;
let H=h.pt2px(this._height);0>=H&&(H=A-m);H<y.MAX_SIZE_FOR_U16_COMPRESSION&&(H*=y.COMPRESSION_FACTOR_FOR_U16,this._bitset|=y.BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR);H=Math.round(H);let E=h.pt2px(this._height/w*x);0>=E&&(E=z-g);E<y.MAX_SIZE_FOR_U16_COMPRESSION&&(E*=y.COMPRESSION_FACTOR_FOR_U16,this._bitset|=y.BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR);E=Math.round(E);const F=this._scaleX;this.tl=C.i1616to32(g,m);this.br=C.i1616to32(z,A);this.aux21=C.i1616to32(E,H);this.aux22=C.i1616to32(this._offsetX,
this._offsetY);this.aux3=C.i8888to32(F*y.COMPRESSION_FACTOR_FOR_U16,1*y.COMPRESSION_FACTOR_FOR_U16,this._angle,0);a.sdf=p.sdf;a.pattern=!0;a.textureBinding=p.textureBinding}else this.aux3=this.aux22=this.aux21=this.br=this.tl=0,a.sdf=!1,a.pattern=!1,a.textureBinding=0;this._materialKey=a.data};return l._createClass(f)}(k(e))})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["exports"],function(l){function h(v,C){v%=C;return 0<=v?v:v+C}const D=128/Math.PI,B=256/360,y=1/Math.LN2;l.between=
function(v,C,t){return v>=C&&v<=t||v>=t&&v<=C};l.degToByte=function(v){return h(v*B,256)};l.interpolate=function(v,C,t){return v*(1-t)+C*t};l.log2=function(v){return Math.log(v)*y};l.positiveMod=h;l.radToByte=function(v){return h(v*D,256)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../enums ../../number ../../Utils ../../materialKey/MaterialKey ./templateUtils ./WGLLineTemplate".split(" "),
function(l,h,D,B,y,v,C){return t=>function(q){function k(...b){b=q.call(this,...b)||this;b.forceLibtess=!1;b._bitset=0;b._lineTemplate=null;b.geometryType=h.WGLGeometryType.FILL;return b}l._inherits(k,q);var e=k.prototype;e._maybeAddLineTemplate=function(b){this._lineTemplate=C.fromFillOutline(b)};e._write=function(b,c,f,a){f="esriGeometryPoint"===c.geometryType;const d=y.FillMaterialKey.load(this._materialKey);b.recordStart(c.getDisplayId(),this._materialKey,this.geometryType,f);this._writeGeometry(b,
c,d,a,f);y.hasOutlineFillSymbology(d)&&null!=this._lineTemplate&&this._lineTemplate.writeGeometry(b,c,a,f);b.recordEnd()};e._writeGeometry=function(b,c,f,a,d){a=this._getGeometry(c,a,d);null!=a&&(d=[],100<a.maxLength||this.forceLibtess||!v.triangulate(d,a)?(a=v.triangulateLibtess(a),this._writeVertices(b,c,a,[a.length/2],f)):d.length&&this._writeVertices(b,c,a.coords,a.lengths,f,d))};e._writeVertex=function(b,c,f,a,d,n){const r=D.i1616to32(1*a,1*d);b.vertexBounds(a,d,0,0);b.vertexWrite(r);b.vertexWrite(c);
f.symbologyType===h.WGLSymbologyType.DOT_DENSITY?b.vertexWriteF32(1/Math.abs(n.readGeometryArea())):(b.vertexWrite(this.fillColor),c=y.hasSimpleSymbology(f),c||(b.vertexWrite(this.tl),b.vertexWrite(this.br)),b.vertexWrite(this.aux21),b.vertexWrite(this.aux22),b.vertexWrite(this.aux3),c||b.vertexWrite(this._minMaxZoom))};e._writeVertices=function(b,c,f,a,d,n){var r=c.getDisplayId();r|=this._bitset<<24;var p=a.reduce((u,x)=>u+x);const g=B.getStrides(d.geometryType,d.symbologyType).geometry/4;a=b.vertexCount();
b.vertexEnsureSize(g*p);p=0;if(n)for(const u of n)this._writeVertex(b,r,d,f[2*u],f[2*u+1],c),p++;else for(n=0;n<f.length;n+=2)this._writeVertex(b,r,d,Math.round(f[n]),Math.round(f[n+1]),c),p++;b.indexEnsureSize(p);for(c=0;c<p;c++)b.indexWrite(c+a)};e._getGeometry=function(b,c,f){return(b=c?.asOptimized()||b.readGeometryForDisplay())?v.clipMarshall(b,f?256:8):null};return l._createClass(k)}(t)})},"esri/views/2d/engine/webgl/mesh/templates/templateUtils":function(){define("exports ../../../../../../chunks/earcut ../../../../../../geometry/libtess ../../../../../../geometry/support/TileClipper ../../../../../../layers/graphics/OptimizedGeometry ../../definitions ../bufcut".split(" "),
function(l,h,D,B,y,v,C){function t(b,c,f){let a=0;for(let d=1;d<f;d++)a+=(b[2*(c+d)]-b[2*(c+d-1)])*(b[2*(c+d)+1]+b[2*(c+d-1)+1]);return a}function q(b,c,f,a,d){let n=0;for(;f<a;f+=3){const r=2*(b[f]-d),p=2*(b[f+1]-d),g=2*(b[f+2]-d);n+=Math.abs((c[r]-c[g])*(c[p+1]-c[r+1])-(c[r]-c[p])*(c[g+1]-c[r+1]))}return n}const k=new B.TileClipper(0,0,0,1,0),e=new B.TileClipper(0,0,0,1,0);k.setExtent(v.TILE_SIZE);e.setExtent(v.TILE_SIZE);l.area=t;l.clipLinesMarshall=function(b,c){e.setPixelMargin(c);const f=-c;
c=v.TILE_SIZE+c;let a=[];var d=!1;if(!b.nextPath())return null;let n=!0;for(;n;){b.seekPathStart();const r=[];if(!b.numPoints)return null;e.reset(B.GeometryType.LineString);b.nextPoint();let p=b.x,g=b.y;if(d)e.moveTo(p,g);else{if(p<f||p>c||g<f||g>c){d=!0;continue}r.push({x:p,y:g})}let u=!1;for(;b.nextPoint();)if(p=b.x,g=b.y,d)e.lineTo(p,g);else{if(p<f||p>c||g<f||g>c){u=!0;break}r.push({x:p,y:g})}if(u)d=!0;else{if(d){if(d=e.resultWithStarts())for(const x of d)a.push(x)}else a.push({line:r,start:0});
n=b.nextPath();d=!1}}a=a.filter(r=>1<r.line.length);return 0===a.length?null:a};l.clipMarshall=function(b,c){if(null==b)return null;a:{var f=v.TILE_SIZE+128;var a=0;for(var d=0;d<b.lengths.length;d++){var n=b.lengths[d];for(var r=0;r<n;r++){const p=b.coords[2*(r+a)],g=b.coords[2*(r+a)+1];if(-128>p||p>f||-128>g||g>f){f=!0;break a}}a+=n}f=!1}if(!f)return b;k.setPixelMargin(c);k.reset(B.GeometryType.Polygon);c=0;for(f=0;f<b.lengths.length;f++){a=b.lengths[f];d=b.coords[2*(0+c)];n=b.coords[2*(0+c)+1];
k.moveTo(d,n);for(r=1;r<a;r++)d=b.coords[2*(r+c)],n=b.coords[2*(r+c)+1],k.lineTo(d,n);k.close();c+=a}f=k.result(!1);if(!f)return null;b=[];c=[];for(const p of f){f=0;for(const g of p)c.push(g.x),c.push(g.y),f++;b.push(f)}return new y(b,c)};l.triangleAreaArray=q;l.triangulate=function(b,c){const {coords:f,lengths:a,hasIndeterminateRingOrder:d}=c;if(d)return!1;c=0;for(var n=0;n<a.length;){let g=n,u=a[n];n=t(f,c,u);for(var r=[];++g<a.length;){var p=a[g];const x=t(f,c+u,p);if(!(0<x))break;n+=x;r.push(c+
u);u+=p}p=b.length;C.bufcut(b,f,c,c+u,r,2,0);r=q(b,f,p,b.length,0);n=Math.abs(n);if(1E-5<Math.abs((r-n)/Math.max(1E-7,n)))return b.length=0,!1;n=g;c+=u}return!0};l.triangulateEarcut=function(b,c,f){const {coords:a,lengths:d,hasIndeterminateRingOrder:n}=c;if(n)return!1;let r=0;for(var p=0;p<d.length;){let u=p,x=d[p];for(p=[];++u<d.length;){var g=d[u];if(!(0<t(a,r+x,g)))break;p.push(r+x-r);x+=g}g=c.coords.slice(2*r,2*(r+x));p=h.earcut(g,p,2);for(const w of p)b.push(w+f+r);p=u;r+=x}return!0};l.triangulateLibtess=
function(b){const {coords:c,lengths:f}=b;({buffer:b}=D.triangulate(c,f));return b};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/mesh/bufcut":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(l,h){function D(x,w,m,z,A,H,E){let F;m=0;for(let J=z,L=A-H;J<A;J+=H)m+=(x[L+w*H]-x[J+w*H])*(x[J+1+w*H]+x[L+1+w*H]),L=J;if(E===0<m)for(;z<A;z+=H)F=C(z+w*H,x[z+w*H],x[z+1+w*H],F);else for(A-=H;A>=z;A-=H)F=C(A+w*H,x[A+w*H],x[A+
1+w*H],F);F&&d(F,F.next)&&(t(F),F=F.next);return F}function B(x,w=x){if(!x)return x;let m;do if(m=!1,x.steiner||!d(x,x.next)&&0!==e(x.prev,x,x.next))x=x.next;else{t(x);x=w=x.prev;if(x===x.next)break;m=!0}while(m||x!==w);return w}function y(x,w,m,z,A,H,E,F){if(x){!F&&H&&(x=k(x,z,A,H));for(var J=x;x.prev!==x.next;){var L=x.prev,I=x.next;if(H)var G=v(x,z,A,H);else a:{G=x;var K=G.prev,P=G;const Y=G.next;if(0<=e(K,P,Y)){G=!1;break a}let ea=G.next.next;const aa=ea;let T=0;for(;ea!==G.prev&&(0===T||ea!==
aa);){T++;if(c(K.x,K.y,P.x,P.y,Y.x,Y.y,ea.x,ea.y)&&0<=e(ea.prev,ea,ea.next)){G=!1;break a}ea=ea.next}G=!0}if(G)w.push(L.index/m+E),w.push(x.index/m+E),w.push(I.index/m+E),t(x),J=x=I.next;else if(x=I,x===J){if(!F)y(B(x),w,m,z,A,H,E,1);else if(1===F){F=w;J=m;L=E;I=x;do G=I.prev,K=I.next.next,!d(G,K)&&b(G,I,I.next,K)&&f(G,K)&&f(K,G)&&(F.push(G.index/J+L),F.push(I.index/J+L),F.push(K.index/J+L),t(I),t(I.next),I=x=K),I=I.next;while(I!==x);x=I;y(x,w,m,z,A,H,E,2)}else if(2===F)a:{F=x;do{for(J=F.next.next;J!==
F.prev;){if(L=F.index!==J.index){G=G=G=void 0;L=F;I=J;if(G=L.next.index!==I.index&&L.prev.index!==I.index){b:{G=L;do{if(G.index!==L.index&&G.next.index!==L.index&&G.index!==I.index&&G.next.index!==I.index&&b(G,G.next,L,I)){G=!0;break b}G=G.next}while(G!==L);G=!1}G=!G}if(G=G&&f(L,I)&&f(I,L)){G=L;K=!1;P=(L.x+I.x)/2;I=(L.y+I.y)/2;do G.y>I!==G.next.y>I&&G.next.y!==G.y&&P<(G.next.x-G.x)*(I-G.y)/(G.next.y-G.y)+G.x&&(K=!K),G=G.next;while(G!==L);G=K}L=G}if(L){x=r(F,J);F=B(F,F.next);x=B(x,x.next);y(F,w,m,
z,A,H,E,0);y(x,w,m,z,A,H,E,0);break a}J=J.next}F=F.next}while(F!==x)}break}}}}function v(x,w,m,z){const A=x.prev,H=x.next;if(0<=e(A,x,H))return!1;const E=A.x>x.x?A.x>H.x?A.x:H.x:x.x>H.x?x.x:H.x,F=A.y>x.y?A.y>H.y?A.y:H.y:x.y>H.y?x.y:H.y,J=a(A.x<x.x?A.x<H.x?A.x:H.x:x.x<H.x?x.x:H.x,A.y<x.y?A.y<H.y?A.y:H.y:x.y<H.y?x.y:H.y,w,m,z);w=a(E,F,w,m,z);m=x.prevZ;for(z=x.nextZ;m&&m.z>=J&&z&&z.z<=w;){if(m!==x.prev&&m!==x.next&&c(A.x,A.y,x.x,x.y,H.x,H.y,m.x,m.y)&&0<=e(m.prev,m,m.next))return!1;m=m.prevZ;if(z!==x.prev&&
z!==x.next&&c(A.x,A.y,x.x,x.y,H.x,H.y,z.x,z.y)&&0<=e(z.prev,z,z.next))return!1;z=z.nextZ}for(;m&&m.z>=J;){if(m!==x.prev&&m!==x.next&&c(A.x,A.y,x.x,x.y,H.x,H.y,m.x,m.y)&&0<=e(m.prev,m,m.next))return!1;m=m.prevZ}for(;z&&z.z<=w;){if(z!==x.prev&&z!==x.next&&c(A.x,A.y,x.x,x.y,H.x,H.y,z.x,z.y)&&0<=e(z.prev,z,z.next))return!1;z=z.nextZ}return!0}function C(x,w,m,z){x=p.create(x,w,m);z?(x.next=z.next,x.prev=z,z.next.prev=x,z.next=x):(x.prev=x,x.next=x);return x}function t(x){x.next.prev=x.prev;x.prev.next=
x.next;x.prevZ&&(x.prevZ.nextZ=x.nextZ);x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function q(x,w){let m=w;const z=x.x,A=x.y;let H=-Infinity,E;do{if(A<=m.y&&A>=m.next.y&&m.next.y!==m.y){var F=m.x+(A-m.y)*(m.next.x-m.x)/(m.next.y-m.y);if(F<=z&&F>H){H=F;if(F===z){if(A===m.y)return m;if(A===m.next.y)return m.next}E=m.x<m.next.x?m:m.next}}m=m.next}while(m!==w);if(!E)return null;if(z===H)return E.prev;w=E;F=E.x;const J=E.y;let L=Infinity,I;for(m=E.next;m!==w;)z>=m.x&&m.x>=F&&z!==m.x&&c(A<J?z:H,A,F,J,A<J?H:z,A,m.x,
m.y)&&(I=Math.abs(A-m.y)/(z-m.x),(I<L||I===L&&m.x>E.x)&&f(m,x)&&(E=m,L=I)),m=m.next;return E}function k(x,w,m,z){for(var A;A!==x;A=A.next){A=A||x;null===A.z&&(A.z=a(A.x,A.y,w,m,z));if(A.prev.next!==A||A.next.prev!==A)return A.prev.next=A,A.next.prev=A,k(x,w,m,z);A.prevZ=A.prev;A.nextZ=A.next}x.prevZ.nextZ=null;x.prevZ=null;a:for(m=1;;){z=x;w=x=null;let H=0;for(;z;){H++;A=z;let E=0;for(;E<m&&A;E++)A=A.nextZ;let F=m;for(;0<E||0<F&&A;){let J;0===E?(J=A,A=A.nextZ,F--):0!==F&&A?z.z<=A.z?(J=z,z=z.nextZ,
E--):(J=A,A=A.nextZ,F--):(J=z,z=z.nextZ,E--);w?w.nextZ=J:x=J;J.prevZ=w;w=J}z=A}w.nextZ=null;m*=2;if(2>H)break a}return x}function e(x,w,m){return(w.y-x.y)*(m.x-w.x)-(w.x-x.x)*(m.y-w.y)}function b(x,w,m,z){return d(x,w)&&d(m,z)||d(x,z)&&d(m,w)?!0:0<e(x,w,m)!==0<e(x,w,z)&&0<e(m,z,x)!==0<e(m,z,w)}function c(x,w,m,z,A,H,E,F){return 0<=(A-E)*(w-F)-(x-E)*(H-F)&&0<=(x-E)*(z-F)-(m-E)*(w-F)&&0<=(m-E)*(H-F)-(A-E)*(z-F)}function f(x,w){return 0>e(x.prev,x,x.next)?0<=e(x,w,x.next)&&0<=e(x,x.prev,w):0>e(x,w,x.prev)||
0>e(x,x.next,w)}function a(x,w,m,z,A){x=32767*(x-m)*A;w=32767*(w-z)*A;x=(x|x<<8)&16711935;x=(x|x<<4)&252645135;x=(x|x<<2)&858993459;w=(w|w<<8)&16711935;w=(w|w<<4)&252645135;w=(w|w<<2)&858993459;return(x|x<<1)&1431655765|((w|w<<1)&1431655765)<<1}function d(x,w){return x.x===w.x&&x.y===w.y}function n(x,w){return x.x-w.x}function r(x,w){const m=p.create(x.index,x.x,x.y),z=p.create(w.index,w.x,w.y),A=x.next,H=w.prev;x.next=w;w.prev=x;m.next=A;A.prev=m;z.next=m;m.prev=z;H.next=z;z.prev=H;return z}let p=
function(){function x(){this.y=this.x=this.index=0;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}x.create=function(w,m,z){const A=u<g.length?g[u++]:new x;A.index=w;A.x=m;A.y=z;A.prev=null;A.next=null;A.z=null;A.prevZ=null;A.nextZ=null;A.steiner=!1;return A};return h._createClass(x)}();const g=[];let u=0;for(let x=0;8096>x;x++)g.push(new p);l.bufcut=function(x,w,m,z,A,H,E){u=0;var F=(z-m)*H,J=A&&A.length;const L=J?(A[0]-m)*H:F;var I=D(w,m,z,0,L,H,!0);if(I&&I.next!==I.prev){var G;
if(J){const aa=[];for(let T=0,R=A.length;T<R;T++){const W=D(w,m,z,A[T]*H,T<R-1?A[T+1]*H:z*H,H,!1);W===W.next&&(W.steiner=!0);J=aa;var K=J.push;let S=W,Z=W;do{if(S.x<Z.x||S.x===Z.x&&S.y<Z.y)Z=S;S=S.next}while(S!==W);K.call(J,Z)}aa.sort(n);for(var P of aa)if(z=P,A=q(z,I))z=r(A,z),B(z,z.next),I=B(A,A.next)}if(F>80*H){var Y=F=w[m*H];var ea=G=w[1+m*H];for(P=H;P<L;P+=H)z=w[P+m*H],A=w[P+1+m*H],Y=Math.min(Y,z),ea=Math.min(ea,A),F=Math.max(F,z),G=Math.max(G,A);G=Math.max(F-Y,G-ea);G=0!==G?1/G:0}y(I,x,H,Y,
ea,G,E,0)}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../symbols/cim/enums ../../color ../../definitions ../../number ../../Utils ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLMeshTemplate".split(" "),function(l,h,D,B,y,v,C,t,q,k,e,b){return function(c){function f(a,
d,n,r,p,g,u,x,w,m,z,A,H,E,F,J,L,I,G,K){var P=c.call(this)||this;a=q.LineMaterialKey.load(a);d&&(a.sdf=d.sdf,a.pattern=!0,a.textureBinding=d.textureBinding);P._capType=r;P._joinType=p;P._miterLimitCosine=k.getLimitCosine(g);P.tessellationProperties._fillColor=u;P.tessellationProperties._tl=x;P.tessellationProperties._br=w;P._hasPattern=m;P._isDashed=z;P._zOrder=L;P._effects=I||null;P._minMaxZoom=C.i1616to32(Math.round(G*v.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(K*v.MIN_MAX_ZOOM_PRECISION_FACTOR));
P._materialKey=a.data;P.tessellationProperties._bitset=(H?v.BITSET_GENERIC_LOCK_COLOR:0)|(E?v.BITSET_TYPE_FILL_OUTLINE:0)|(A?v.BITSET_LINE_SCALE_DASH:0)|(F?v.BITSET_GENERIC_CONSIDER_ALPHA_ONLY:0);P.tessellationProperties._halfWidth=.5*n;P.tessellationProperties._halfReferenceWidth=.5*J;P.tessellationProperties.offset=0;P._initializeTessellator(!1);return P}l._inherits(f,c);f.fromCIMLine=function(a,d,n){var r=a.color,p=a.scaleFactor||1;const g=!!a.dashTemplate;let u=a.cap;g&&u===B.CapType.ROUND&&(u=
B.CapType.SQUARE);const x=a.join;p*=D.pt2px(a.width);const w=D.pt2px(a.referenceWidth),m=D.pt2px(a.miterLimit);r=r&&y.premultiplyAlphaRGBA(r)||0;const [z,A]=k.getMinMaxZoom(a.scaleInfo,n);if(!d)return new f(a.materialKey,d,p,u,x,m,r,0,0,!1,g,a.scaleDash??!1,a.colorLocked??!1,!1,a.sampleAlphaOnly,w,a.zOrder,a.effects,z,A);const {rect:H,width:E,height:F}=d;var J=H.x+v.SPRITE_PADDING;const L=H.y+v.SPRITE_PADDING;n=J+E;const I=L+F;J=C.i1616to32(J,L);n=C.i1616to32(n,I);return new f(a.materialKey,d,p,u,
x,m,r,J,n,!0,g,a.scaleDash??!1,a.colorLocked??!1,!1,a.sampleAlphaOnly,w,a.zOrder,a.effects,z,A)};f.fromFillOutline=function(a){const d=q.FillMaterialKey.load(a.materialKey);return q.hasOutlineFillSymbology(d)&&a.outline&&"esriSLSSolid"===a.outline?.style?f.fromSimpleLine({hash:"",materialKey:a.materialKey,...a.outline},null,!0):null};f.fromSimpleLine=function(a,d,n=!1){var {color:r}=a;const p="esriSLSSolid"!==a.style&&"esriSLSNull"!==a.style,g=t.getCapType(a.cap||"round"),u=t.getJoinType(a.join||
"round");r=r&&"esriSLSNull"!==a.style&&y.premultiplyAlphaRGBAArray(r)||0;"esriSLSNull"===a.style&&(r=0);const x=D.pt2px(a.width),w=a.miterLimit;if(!d)return new f(a.materialKey,d,x,g,u,w,r,0,0,!1,p,!0,!1,n,!1,x,0,null,k.DEFAULT_MIN_ZOOM,k.DEFAULT_MAX_ZOOM);const {rect:m,width:z,height:A}=d;var H=m.x+v.SPRITE_PADDING;const E=m.y+v.SPRITE_PADDING;var F=H+z;const J=E+A;H=C.i1616to32(H,E);F=C.i1616to32(F,J);return new f(a.materialKey,d,x,g,u,w,r,H,F,!0,p,!0,!1,n,!1,x,0,null,k.DEFAULT_MIN_ZOOM,k.DEFAULT_MAX_ZOOM)};
f.fromPictureLineSymbol=function(a,d,n,r){h.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate").error("PictureLineSymbol support does not exist!");return null};return l._createClass(f)}(e(b))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../geometry/GeometryCursor ../../definitions ../../enums ../../number ../../TurboLine ../../materialKey/MaterialKey ./templateUtils".split(" "),function(l,
h,D,B,y,v,C,t){const q=(b,c,f)=>(a,d,n,r,p,g,u,x,w,m,z)=>{n=y.i1616to32(z,Math.ceil(16*b._halfWidth));u=y.i8888to32(Math.round(16*u),Math.round(16*x),Math.round(16*w),Math.round(16*m));p=y.i8888to32(16*p,16*g,0,b._bitset);g=b.out;g.vertexBounds(a,d,c,f);g.vertexWrite(y.i1616to32(8*a,8*d));g.vertexWrite(b.id);g.vertexWrite(b._fillColor);g.vertexWrite(u);g.vertexWrite(n);g.vertexWrite(b._tl);g.vertexWrite(b._br);g.vertexWrite(p);g.vertexWrite(y.i1616to32(Math.ceil(16*b._halfReferenceWidth),0));g.vertexWrite(b.minMaxZoom);
g.vertexEnd();return b.offset+b.vertexCount++},k=(b,c,f)=>(a,d,n,r,p,g,u,x,w,m,z)=>{n=y.i1616to32(16*b._halfWidth,16*b._halfReferenceWidth);u=y.i8888to32(16*u+128,16*x+128,16*w+128,16*m+128);x=b.out;w=b._bitset<<24|b.id;x.vertexBounds(a,d,c,f);x.vertexWrite(y.i1616to32(8*a,8*d));x.vertexWrite(w);x.vertexWrite(b._fillColor);a=C.hasSimpleSymbology(b.key);a||(x.vertexWrite(0),x.vertexWrite(0));x.vertexWrite(0);x.vertexWrite(n);x.vertexWrite(u);a||x.vertexWrite(b.minMaxZoom);x.vertexEnd();return b.offset+
b.vertexCount++},e=b=>(c,f,a)=>{const d=b.out;d.indexWrite(c);d.indexWrite(f);d.indexWrite(a);b.indexCount+=3};return b=>function(c){function f(...d){d=c.call(this,...d)||this;d.tessellationProperties={};d._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0};d.geometryType=B.WGLGeometryType.LINE;return d}l._inherits(f,c);var a=f.prototype;a.writeGeometry=function(d,n,r,p){this._writeGeometry(d,n,r,p)};a._initializeTessellator=function(d){var n=C.LineMaterialKey.load(this._materialKey),r=
C.FillMaterialKey.load(this._materialKey),p=this._tessellationOptions;n=n.vvSizeFieldStops||n.vvSizeMinMaxValue||n.vvSizeScaleStops||n.vvSizeUnitValue;d=this.tessellationProperties._halfWidth<D.THIN_LINE_HALF_WIDTH_THRESHOLD&&!d&&!n;this.tessellationProperties.minMaxZoom=this._minMaxZoom;p.wrapDistance=65535;p.textured=this._isDashed||this._hasPattern;p.offset=this.tessellationProperties.offset;p.halfWidth=this.tessellationProperties._halfWidth;p=d?0:1;r=C.hasOutlineFillSymbology(r)?k:q;this._lineTessellator=
new v.LineTessellation(r(this.tessellationProperties,p,p),e(this.tessellationProperties),d)};a._write=function(d,n,r,p){r="esriGeometryPoint"===n.geometryType;d.recordStart(n.getDisplayId(),this._materialKey,this.geometryType,r);this._writeGeometry(d,n,p,r);d.recordEnd()};a._writeGeometry=function(d,n,r,p){if(r=r||h.GeometryCursor.fromFeatureSetReaderCIM(n))p=this._getLines(r,p),null!=p&&this._writeVertices(d,n,p)};a._getLines=function(d,n){return t.clipLinesMarshall(d,n?256:16)};a._writeVertices=
function(d,n,r){const p=n.getDisplayId(),g=d.vertexCount(),u=this.tessellationProperties;n=this._tessellationOptions;u.out=d;u.id=p;u.indexCount=0;u.vertexCount=0;u.offset=g;n.capType=this._capType;n.joinType=this._joinType;d=C.FillMaterialKey.load(this._materialKey);this.tessellationProperties.key=C.hasOutlineFillSymbology(d)?d:C.LineMaterialKey.load(this._materialKey);for(const {line:x,start:w}of r)n.initialDistance=w%65535,this._lineTessellator.tessellate(x,n)};return l._createClass(f)}(b)})},
"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate":function(){define(["../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/Logger","../../../../../../symbols/cim/cimAnalyzer","../../../../../../symbols/cim/utils","./WGLMeshTemplate"],function(l,h,D,B,y){const v=h.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate");return function(C){function t(q){var k=C.call(this)||this;k._ongoingMaterialRequestMap=new Map;k._materialCache=new Map;k._dynamicPropertyMap=
new Map;k._cimLayer=q;return k}l._inherits(t,C);t.prototype.analyze=async function(q,k,e,b,c){if(c&&0===c.length)return null;const f=c&&0<c.length,a=k.readLegacyFeature();k=k.getObjectId();const d=this._materialCache;var n=this._cimLayer.materialHash;if(!n)return v.error("A Dynamic mesh template must have a material hash value or function!"),null;const r="function"===typeof n?n(a,e,b,k):n;n=d.get(r);if(null!=n||(n=this._ongoingMaterialRequestMap.get(r)))return n;n=this._cimLayer;const p=D.analyzeCIMResource(n.cim,
this._cimLayer.materialOverrides);p.mosaicHash=r;const {type:g,url:u}=n;k={cim:p,type:g,mosaicHash:r,url:u,size:null,dashTemplate:null,text:null,fontName:null,objectId:k,animatedSymbolProperties:null};switch(g){case "marker":k.size=B.evaluateValueOrFunction(n.size,a,e,b);k.animatedSymbolProperties=B.evaluateValueOrFunction(n.animatedSymbolProperties,a,e,b);break;case "line":k.dashTemplate=n.dashTemplate;break;case "text":k.text=B.evaluateValueOrFunction(n.text,a,e,b),k.fontName=B.evaluateValueOrFunction(n.fontName,
a,e,b)}q=q.getMosaicItem(k,c).then(x=>{f||(this._ongoingMaterialRequestMap.delete(r),d.set(r,x));return x}).catch(x=>{this._ongoingMaterialRequestMap.delete(r);v.error(".analyze()",x.message);return null});f||this._ongoingMaterialRequestMap.set(r,q);return q};return l._createClass(t)}(y)})},"esri/symbols/cim/cimAnalyzer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../core/fontUtils ../../core/lang ../../core/Logger ../../core/screenUtils ../../core/string ../../support/arcadeOnDemand ./CIMSymbolDrawHelper ./CIMSymbolHelper ./enums ./quantizeTime ./SDFHelper ./utils ./effects/CIMEffectHelper ../../views/2d/arcade/callExpressionWithFeature ../../views/2d/engine/webgl/definitions ../../views/2d/engine/webgl/grouping".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d,n,r,p){function g(A){switch(A){case "Butt":return b.CapType.BUTT;case "Square":return b.CapType.SQUARE;default:return b.CapType.ROUND}}function u(A){switch(A){case "Bevel":return b.JoinType.BEVEL;case "Miter":return b.JoinType.MITER;default:return b.JoinType.ROUND}}function x(A){return A&&0===A.indexOf("Level_")&&(A=parseInt(A.substr(6),10),!isNaN(A))?A:0}function w(A){if(!A||0===A.length)return null;A=(new D(A)).toRgba();return{r:A[0],g:A[1],b:A[2],a:A[3]}}
function m(A){return A?A.charAt(0).toLowerCase()+A.substr(1):A}const z=v.getLogger("esri.symbols.cim.cimAnalyzer");v=function(){function A(E,F){this._cimLayers=[];this._poMap={};this._primitiveOverrides=[];this._resourceManager=E;this._info=F}var H=A.prototype;H.analyzeSymbolReference=async function(E,F,J){this._cimLayers=J??[];if(!E)return this._cimLayers;if(E.primitiveOverrides){this._primitiveOverrides=E.primitiveOverrides;this._poMap={};J=[];const I=this._info;for(const G of this._primitiveOverrides){var L=
G.valueExpressionInfo;L&&I?(L=q.createRendererExpression(L.expression,I.spatialReference,I.fields).then(K=>{null!=K&&this._setPoMap(G.primitiveName,G.propertyName,K)}),J.push(L)):null!=G.value&&this._setPoMap(G.primitiveName,G.propertyName,G.value);0<J.length&&await Promise.all(J)}}E=E.symbol;J=[];e.CIMSymbolHelper.fetchResources(E,this._resourceManager,J);0<J.length&&await Promise.all(J);this._analyzeSymbol(E,F);return this._cimLayers};H._analyzeSymbol=function(E,F){switch(E?.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this._analyzeMultiLayerSymbol(E,
F,1,0,0,0)}};H._analyzeMultiLayerSymbol=function(E,F,J,L,I,G){const K=E?.symbolLayers;if(K){var P=E.effects,Y=b.Alignment.SCREEN,ea=e.CIMSymbolHelper.getSize(E)??0;"CIMPointSymbol"===E.type&&"Map"===E.angleAlignment&&(Y=b.Alignment.MAP);for(var aa="CIMPolygonSymbol"===E.type,T=K.length;T--;){const W=K[T];if(!W||!1===W.enable)continue;let S;P&&P.length&&(S=[...P]);var R=W.effects;R&&R.length&&(P?S.push(...R):S=[...R]);R=[];e.OverrideHelper.findEffectOverrides(S,this._primitiveOverrides,R);R=0<R.length?
this._createEffectsOverrideFunction(S,R):S;e.OverrideHelper.findApplicableOverrides(W,this._primitiveOverrides,[]);switch(W.type){case "CIMSolidFill":this._analyzeSolidFill(W,R);break;case "CIMPictureFill":this._analyzePictureFill(W,R);break;case "CIMHatchFill":this._analyzeHatchFill(W,R);break;case "CIMGradientFill":this._analyzeGradientFill(W,R);break;case "CIMSolidStroke":this._analyzeSolidStroke(W,R,aa,ea);break;case "CIMPictureStroke":this._analyzePictureStroke(W,R,aa,ea);break;case "CIMGradientStroke":this._analyzeGradientStroke(W,
R,aa,ea);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":"CIMLineSymbol"===E.type&&(Y=(Y=W.markerPlacement)&&Y.angleToLine?b.Alignment.MAP:b.Alignment.SCREEN);const Z=[],ca=W.primitiveName;ca&&Z.push(ca);this._analyzeMarker(W,R,null,Z,Y,ea,1,F,J,L,I,G);break;default:z.error("Cannot analyze CIM layer",W.type)}}}};H._analyzeSolidFill=function(E,F){const J=E.primitiveName,L=a.fromCIMColor(E.color),[I,G]=this._analyzePrimitiveOverrides(J,F,null,null),K=t.numericHash(JSON.stringify(E)+
G).toString();this._cimLayers.push({type:"fill",templateHash:K,materialHash:I?()=>K:K,cim:E,materialOverrides:null,colorLocked:!!E.colorLocked,color:this._createOverrideFunction(J,"Color",L,w),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:F,applyRandomOffset:!1,sampleAlphaOnly:!0})};H._analyzePictureFill=function(E,F){const J=E.primitiveName,L=a.getTintColor(E),[I,G]=this._analyzePrimitiveOverrides(J,F,null,null),K=t.numericHash(JSON.stringify(E)+G).toString(),P=t.numericHash(`${E.url}${JSON.stringify(E.colorSubstitutions)}`).toString(),
Y=a.getValue(E.height,k.DEFAULT_PICTURE_FILL_HEIGHT);let ea=a.getValue(E.scaleX,1);if("width"in E&&"number"===typeof E.width){const aa=E.width;let T=1;const R=this._resourceManager.getResource(E.url);null!=R&&(T=R.width/R.height);ea/=Y/aa*T}this._cimLayers.push({type:"fill",templateHash:K,materialHash:I?()=>P:P,cim:E,materialOverrides:null,colorLocked:!!E.colorLocked,effects:F,color:this._createOverrideFunction(J,"TintColor",L,w),height:this._createOverrideFunction(J,"Height",Y),scaleX:this._createOverrideFunction(J,
"ScaleX",ea),angle:this._createOverrideFunction(J,"Rotation",a.getValue(E.rotation)),offsetX:this._createOverrideFunction(J,"OffsetX",a.getValue(E.offsetX)),offsetY:this._createOverrideFunction(J,"OffsetY",a.getValue(E.offsetY)),url:E.url,applyRandomOffset:!1,sampleAlphaOnly:!1})};H._analyzeHatchFill=function(E,F){const J=E.primitiveName,L=this._analyzeMaterialOverrides(J,["Rotation","OffsetX","OffsetY"]);let [I,G]=this._analyzePrimitiveOverrides(J,F,null,null);const K=t.numericHash(JSON.stringify(E)+
G).toString(),P=t.numericHash(`${E.separation}${JSON.stringify(E.lineSymbol)}`).toString();let Y={r:255,g:255,b:255,a:1};var ea=!1;const aa=E.lineSymbol?.symbolLayers?.find(T=>"CIMSolidStroke"===T.type&&null!=this._poMap[T.primitiveName]?.Color);aa&&(Y=a.fromCIMColor(aa.color),Y=this._createOverrideFunction(aa.primitiveName,"Color",Y,w),ea="function"===typeof Y,I=I||ea,ea=null!=aa.color||ea);this._cimLayers.push({type:"fill",templateHash:K,materialHash:I&&L?this._createMaterialHashFunction(P,L):P,
cim:E,materialOverrides:L,colorLocked:!!E.colorLocked,effects:F,color:Y,height:this._createOverrideFunction(J,"Separation",a.getValue(E.separation,k.DEFAULT_HATCH_FILL_SEPARATION)),scaleX:1,angle:this._createOverrideFunction(J,"Rotation",a.getValue(E.rotation)),offsetX:this._createOverrideFunction(J,"OffsetX",a.getValue(E.offsetX)),offsetY:this._createOverrideFunction(J,"OffsetY",a.getValue(E.offsetY)),applyRandomOffset:!1,sampleAlphaOnly:!0,hasUnresolvedReplacementColor:!ea})};H._analyzeGradientFill=
function(E,F){const [J,L]=this._analyzePrimitiveOverrides(E.primitiveName,F,null,null),I=t.numericHash(JSON.stringify(E)+L).toString();this._cimLayers.push({type:"fill",templateHash:I,materialHash:J?()=>I:I,cim:E,materialOverrides:null,colorLocked:!!E.colorLocked,effects:F,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,applyRandomOffset:!1,sampleAlphaOnly:!1})};H._analyzeSolidStroke=function(E,F,J,L){const I=E.primitiveName,G=a.fromCIMColor(E.color),K=a.getValue(E.width,
k.DEFAULT_STROKE_WIDTH),P=g(E.capStyle),Y=u(E.joinStyle),ea=E.miterLimit,[aa,T]=this._analyzePrimitiveOverrides(I,F,null,null),R=t.numericHash(JSON.stringify(E)+T).toString();let W;if(F&&F instanceof Array&&0<F.length){const Z=F[F.length-1];if("CIMGeometricEffectDashes"===Z.type&&"NoConstraint"===Z.lineDashEnding&&null===Z.offsetAlongLine){F=[...F];var S=F.pop();W=S.dashTemplate;S=S.scaleDash}}this._cimLayers.push({type:"line",templateHash:R,materialHash:aa?()=>R:R,cim:E,materialOverrides:null,isOutline:J,
colorLocked:!!E.colorLocked,effects:F,color:this._createOverrideFunction(I,"Color",G,w),width:this._createOverrideFunction(I,"Width",K),cap:this._createOverrideFunction(I,"CapStyle",P),join:this._createOverrideFunction(I,"JoinStyle",Y),miterLimit:ea&&this._createOverrideFunction(I,"MiterLimit",ea),referenceWidth:L,zOrder:x(E.name),dashTemplate:W,scaleDash:S,sampleAlphaOnly:!0})};H._analyzePictureStroke=function(E,F,J,L){const I=t.numericHash(`${E.url}${JSON.stringify(E.colorSubstitutions)}`).toString(),
G=E.primitiveName,K=a.getTintColor(E),P=a.getValue(E.width,k.DEFAULT_STROKE_WIDTH),Y=g(E.capStyle),ea=u(E.joinStyle),aa=E.miterLimit,[T,R]=this._analyzePrimitiveOverrides(G,F,null,null),W=t.numericHash(JSON.stringify(E)+R).toString();this._cimLayers.push({type:"line",templateHash:W,materialHash:T?()=>I:I,cim:E,materialOverrides:null,isOutline:J,colorLocked:!!E.colorLocked,effects:F,color:this._createOverrideFunction(G,"TintColor",K,w),width:this._createOverrideFunction(G,"Width",P),cap:this._createOverrideFunction(G,
"CapStyle",Y),join:this._createOverrideFunction(G,"JoinStyle",ea),miterLimit:aa&&this._createOverrideFunction(G,"MiterLimit",aa),referenceWidth:L,zOrder:x(E.name),dashTemplate:null,scaleDash:!1,url:E.url,sampleAlphaOnly:!1})};H._analyzeGradientStroke=function(E,F,J,L){const I=E.primitiveName,G=a.getValue(E.width,k.DEFAULT_STROKE_WIDTH),K=g(E.capStyle),P=u(E.joinStyle),Y=E.miterLimit,[ea,aa]=this._analyzePrimitiveOverrides(I,F,null,null),T=t.numericHash(JSON.stringify(E)+aa).toString();this._cimLayers.push({type:"line",
templateHash:T,materialHash:ea?()=>T:T,cim:E,materialOverrides:null,isOutline:J,colorLocked:!!E.colorLocked,effects:F,color:{r:128,g:128,b:128,a:1},width:this._createOverrideFunction(I,"Width",G),cap:this._createOverrideFunction(I,"CapStyle",K),join:this._createOverrideFunction(I,"JoinStyle",P),miterLimit:Y&&this._createOverrideFunction(I,"MiterLimit",Y),referenceWidth:L,zOrder:x(E.name),dashTemplate:null,scaleDash:!1,sampleAlphaOnly:!1})};H._analyzeMarker=function(E,F,J,L,I,G,K,P,Y,ea,aa,T,R=!1){if(!this._analyzeMarkerInsidePolygon(E,
F)){Y=a.getValue(E.size,k.DEFAULT_MARKER_SIZE);var W=a.getValue(E.rotation),S=a.getValue(E.offsetX),Z=a.getValue(E.offsetY);Y=this._createOverrideFunction(E.primitiveName,"Size",Y);W=this._createOverrideFunction(E.primitiveName,"Rotation",W);S=this._createOverrideFunction(E.primitiveName,"OffsetX",S);Z=this._createOverrideFunction(E.primitiveName,"OffsetY",Z);Y=this._transformSize(Y,K);W=this._transformRotation(W,!!E.rotateClockwise,ea);aa=this._transformOffsetX(S,Z,ea,K,aa);ea=this._transformOffsetY(S,
Z,ea,K,T);S=aa;Z=ea;switch(E.type){case "CIMPictureMarker":this._analyzePictureMarker(E,F,J,L,I,G,Y,W,S,Z,E.colorLocked||R);break;case "CIMVectorMarker":this._analyzeVectorMarker(E,F,J,L,I,G,K,P,Y,W,S,Z,E.colorLocked||R)}}};H._analyzeMarkerInsidePolygon=function(E,F){const {markerPlacement:J,type:L}=E;if(!J||"CIMMarkerPlacementInsidePolygon"!==J.type)return!1;if("CIMVectorMarker"===L||"CIMPictureMarker"===L){var I=E.primitiveName;if(I&&([I]=this._analyzePrimitiveOverrides([I],F,null,null),I))return!1;
if(I=J.primitiveName)if([I]=this._analyzePrimitiveOverrides([I],F,null,null),I)return!1;if("CIMVectorMarker"===L){if({markerGraphics:I}=E,I)for(var G of I)if({symbol:I}=G,"CIMPolygonSymbol"===I?.type&&I.symbolLayers){({symbolLayers:I}=I);for(var K of I)if("CIMSolidStroke"===K.type)return!1}}else if({animatedSymbolProperties:G}=E,G)return!1}var P=Math.abs(J.stepX),Y=Math.abs(J.stepY);if(0===P||0===Y)return!0;const ea=["Rotation","OffsetX","OffsetY"];G=this._primitiveOverrides.filter(R=>R.primitiveName!==
E.primitiveName||!ea.includes(R.propertyName));K="url"in E&&"string"===typeof E.url?E.url:void 0;I=t.numericHash(JSON.stringify(E)).toString();let aa=null;if("Random"===J.gridType){var T=C.px2pt(r.RANDOM_INSIDE_POLYGON_TEXTURE_SIZE);const R=Math.max(Math.floor(T/P),1),W=Math.max(Math.floor(T/Y),1);T=Y*W;aa=S=>S?S*W:0;P=R*P/T}else J.shiftOddRows?(T=2*Y,aa=R=>R?2*R:0,P=P/Y*.5):(T=Y,aa=null,P/=Y);Y=a.getTintColor(E);this._cimLayers.push({type:"fill",templateHash:I,materialHash:I,cim:E,materialOverrides:G,
colorLocked:!!E.colorLocked,effects:F,color:Y,height:this._createOverrideFunction(J.primitiveName,"StepY",T,aa),scaleX:P,angle:J.gridAngle,offsetX:a.getValue(J.offsetX),offsetY:a.getValue(J.offsetY),url:K,applyRandomOffset:"Random"===J.gridType,sampleAlphaOnly:!K,hasUnresolvedReplacementColor:!0});return!0};H._analyzePictureMarker=function(E,F,J,L,I,G,K,P,Y,ea,aa){let T=a.getValue(E.scaleX,1);const R=a.getTintColor(E),W=t.numericHash(`${E.url}${JSON.stringify(E.colorSubstitutions)}${JSON.stringify(E.animatedSymbolProperties)}`).toString();
J||(J=this._createMarkerPlacementOverrideFunction(E.markerPlacement));const S=this._createAnimatedSymbolPropertiesOverrideFunction(E.animatedSymbolProperties),[Z,ca]=this._analyzePrimitiveOverrides(L,F,J,S);L=t.numericHash(JSON.stringify(E)+ca).toString();const qa=E.anchorPoint??{x:0,y:0};if("width"in E&&"number"===typeof E.width){const xa=E.width;let Ca=1;var ya=this._resourceManager.getResource(E.url);null!=ya&&(Ca=ya.width/ya.height);ya=a.getValue(E.size);T/=ya/xa*Ca}this._cimLayers.push({type:"marker",
templateHash:L,materialHash:E.animatedSymbolProperties&&!0===E.animatedSymbolProperties.randomizeStartTime?(xa,Ca,Da,N)=>{Da=p.getMaterialGroup(N??0);xa=null!=S?a.evaluateValueOrFunction(S,xa,Ca):null;return W+`-MATERIALGROUP(${Da})`+`-ASP(${JSON.stringify(xa)})`}:Z?(xa,Ca)=>{xa=null!=S?a.evaluateValueOrFunction(S,xa,Ca):null;return W+`-ASP(${JSON.stringify(xa)})`}:W,cim:E,materialOverrides:null,colorLocked:!!E.colorLocked||!!aa,effects:F,scaleSymbolsProportionally:!1,alignment:I,size:K,scaleX:this._createOverrideFunction(E.primitiveName,
"ScaleX",T),rotation:P,offsetX:Y,offsetY:ea,color:this._createOverrideFunction(E.primitiveName,"TintColor",R,w),anchorPoint:{x:qa.x,y:qa.y},isAbsoluteAnchorPoint:"Relative"!==E.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:!1,referenceSize:G,sizeRatio:1,markerPlacement:J,url:E.url,animatedSymbolProperties:S})};H._analyzeVectorMarker=function(E,F,J,L,I,G,K,P,Y,ea,aa,T,R){var W=E.markerGraphics;if(W){var S=E.frame,Z=0,ca=1;E.scaleSymbolsProportionally&&
S&&(Z=S.ymax-S.ymin,ca=this._transformSize(Y,1/Z));ca=this._transformSize(ca,K);J||(J=this._createMarkerPlacementOverrideFunction(E.markerPlacement));for(const xa of W)if(xa&&(K=xa.symbol)){(W=xa.primitiveName)&&L.push(W);var qa=aa,ya=T;if(("CIMPointSymbol"===K.type||"CIMTextSymbol"===K.type)&&S){let Ca=ya=0;qa=xa.geometry;"x"in qa&&"y"in qa&&(ya+=qa.x-.5*(S.xmin+S.xmax),Ca+=qa.y-.5*(S.ymin+S.ymax));if(qa=E.anchorPoint)"Absolute"===E.anchorPointUnits?(ya-=qa.x,Ca-=qa.y):S&&(ya-=(S.xmax-S.xmin)*qa.x,
Ca-=(S.ymax-S.ymin)*qa.y);qa=this._transformOffsetX(ya,Ca,ea,ca,aa);ya=this._transformOffsetY(ya,Ca,ea,ca,T)}switch(K.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":P?this._analyzeMultiLayerGraphicNonSDF(E,F,J,null,xa,L,I,G,Z,!!R||!!E.colorLocked):this._analyzeMultiLayerGraphic(E,F,J,null,xa,L,I,G,Z,ca,Y,ea,qa,ya,!!R||!!E.colorLocked);break;case "CIMTextSymbol":this._analyzeTextGraphic(E,F,J,xa,L,I,G,Z,ca,Y,ea,qa,ya,R)}W&&L.pop()}}};H._analyzeMultiLayerGraphic=function(E,
F,J,L,I,G,K,P,Y,ea,aa,T,R,W,S){var Z=I.symbol;const ca=Z.symbolLayers;if(ca){var qa=ca.length;if(ca&&2===ca.length&&ca[0].enable&&ca[1].enable&&"CIMSolidStroke"===ca[0].type&&"CIMSolidFill"===ca[1].type&&!ca[0].effects&&!ca[1].effects)this._analyzeCompositeMarkerGraphic(E,F,J,L,I,ca,G,K,P,Y,aa,T,R,W,!!S||!!E.colorLocked);else{var ya=this._resourceManager.geometryEngine;if(Z=d.CIMEffectHelper.applyEffects(Z.effects,I.geometry,ya))for(;qa--;){const ka=ca[qa];if(!ka||!1===ka.enable)continue;const da=
ka.primitiveName;da&&G.push(da);switch(ka.type){case "CIMSolidFill":case "CIMSolidStroke":var xa=d.CIMEffectHelper.applyEffects(ka.effects,Z,ya),Ca=f.getExtent(xa);if(!Ca)continue;const na="Relative"!==E.anchorPointUnits,[X,fa,ja]=f.getSDFMetrics(Ca,E.frame,E.size,E.anchorPoint,na);var Da="CIMSolidFill"===ka.type;xa={type:"sdf",geom:xa,asFill:Da};Ca=ka.path;const ma=Da?a.fromCIMColor(a.getFillColor(ka)):a.fromCIMColor(a.getStrokeColor(ka)),ra=Da?{r:0,g:0,b:0,a:0}:a.fromCIMColor(a.getStrokeColor(ka)),
va=a.getStrokeWidth(ka)??0;if(!Da&&!va)break;var N=I.primitiveName;let za=null;!Da||ka.colorLocked||S||(za=this._createOverrideFunction(N,"FillColor",ma,w));Da=null;ka.colorLocked||S||(Da=this._createOverrideFunction(N,"StrokeColor",ra,w));N=this._createOverrideFunction(N,"StrokeWidth",va);let Ea=!1;var V="";for(const Ka of this._primitiveOverrides)G.includes(Ka.primitiveName)&&(null!=Ka.value?V+=`-${Ka.primitiveName}-${Ka.propertyName}-${JSON.stringify(Ka.value)}`:Ka.valueExpressionInfo&&(Ea=!0));
if(null!=F&&"function"===typeof F||null!=J&&"function"===typeof J)Ea=!0;if(a.isFeatureValueFn(aa)||a.isFeatureValueFn(T)||a.isFeatureValueFn(R)||a.isFeatureValueFn(W))Ea=!0;const Ga=JSON.stringify({...E,markerGraphics:null}),Na=t.numericHash(JSON.stringify(xa)+Ca).toString();V=t.numericHash(JSON.stringify(I)+JSON.stringify(ka)+Ga+V).toString();this._cimLayers.push({type:"marker",templateHash:V,materialHash:Ea?()=>Na:Na,cim:xa,materialOverrides:null,colorLocked:!!ka.colorLocked||!!S,effects:F,scaleSymbolsProportionally:!!E.scaleSymbolsProportionally,
alignment:K,anchorPoint:{x:fa,y:ja},isAbsoluteAnchorPoint:na,size:aa,rotation:T,offsetX:R,offsetY:W,scaleX:1,frameHeight:Y,rotateClockwise:!1,referenceSize:P,sizeRatio:X,color:a.isFeatureValueFn(za)?za:this._createOverrideFunction(da,"Color",ma,w),outlineColor:a.isFeatureValueFn(Da)?Da:this._createOverrideFunction(da,"Color",ra,w),outlineWidth:a.isFeatureValueFn(N)?N:this._createOverrideFunction(da,"Width",va),markerPlacement:J,animatedSymbolProperties:L,path:Ca});break;case "CIMVectorMarker":ka.markerPlacement?
this._analyzeMultiLayerGraphicNonSDF(E,F,J,L,I,G,K,P,Y,!!S||!!ka.colorLocked):this._analyzeMarker(ka,F,J,G,K,P,ea,!1,aa,T,R,W,!!S||!!E.colorLocked);break;default:this._analyzeMultiLayerGraphicNonSDF(E,F,J,L,I,G,K,P,Y,!!S||!!E.colorLocked)}da&&G.pop()}}}};H._analyzeTextGraphic=function(E,F,J,L,I,G,K,P,Y,ea,aa,T,R,W){e.OverrideHelper.findApplicableOverrides(L,this._primitiveOverrides,[]);P=L.geometry;if("x"in P&&"y"in P){P=L.symbol;ea=a.fromCIMFontDecoration(P);var S=a.fromCIMFontStyle(P.fontStyleName),
Z=B.getFontFamily(P.fontFamilyName);P.font={family:Z,decoration:ea,...S};var ca=a.getValue(P.height,k.DEFAULT_TEXT_HEIGHT),qa=a.getValue(P.angle),ya=a.getValue(P.offsetX),xa=a.getValue(P.offsetY);ca=this._transformSize(ca,Y);qa=this._transformRotation(qa,!1,aa);T=this._transformOffsetX(ya,xa,aa,Y,T);xa=this._transformOffsetY(ya,xa,aa,Y,R);ya=T;aa=a.fromCIMColor(a.getFillColor(P));R=a.fromCIMColor(a.getStrokeColor(P));T=a.getStrokeWidth(P)??0;T||(R=a.fromCIMColor(a.getFillColor(P.haloSymbol)),T=a.getValue(P.haloSize));
T=this._transformSize(T,Y);var Ca=Y=null,Da=0;if(P.callout&&"CIMBackgroundCallout"===P.callout.type){var N=P.callout;if(N.backgroundSymbol&&(N=N.backgroundSymbol.symbolLayers))for(const X of N)"CIMSolidFill"===X.type?Y=a.fromCIMColor(X.color):"CIMSolidStroke"===X.type&&(Ca=a.fromCIMColor(X.color),Da=a.getValue(X.width,k.DEFAULT_STROKE_WIDTH))}var [V,ka]=this._analyzePrimitiveOverrides(I,F,J,null);I=JSON.stringify(E.effects)+Number(E.colorLocked||W).toString()+JSON.stringify(E.anchorPoint)+E.anchorPointUnits+
JSON.stringify(E.markerPlacement)+E.size.toString();I=t.numericHash(JSON.stringify(L)+I+ka).toString();var da=this._createOverrideFunction(L.primitiveName,"TextString",L.textString??"",a.adjustTextCase,P.textCase);if(null!=da){({fontStyleName:L}=P);var na=Z+(L?"-"+L.toLowerCase():"-regular");"string"===typeof da&&da.includes("[")&&P.fieldMap&&(da=a.createLabelOverrideFunction(P.fieldMap,da,P.textCase));this._cimLayers.push({type:"text",templateHash:I,materialHash:V||"function"===typeof da||/\[(.*?)\]/.test(da)?
(X,fa,ja)=>na+"-"+a.evaluateValueOrFunction(da,X,fa,ja):na+"-"+t.numericHash(da),cim:P,materialOverrides:null,colorLocked:!!E.colorLocked||!!W,effects:F,alignment:G,anchorPoint:{x:0,y:0},isAbsoluteAnchorPoint:"Relative"!==E.anchorPointUnits,fontName:na,decoration:ea,weight:S.weight,style:S.style,size:ca,angle:qa,offsetX:ya,offsetY:xa,horizontalAlignment:a.fromCIMHorizontalAlignment(P.horizontalAlignment),verticalAlignment:a.fromCIMVerticalAlignment(P.verticalAlignment),text:da,color:aa,outlineColor:R,
outlineSize:T,backgroundColor:Y,borderLineColor:Ca,borderLineWidth:Da,referenceSize:K,sizeRatio:1,markerPlacement:J})}}};H._analyzeMultiLayerGraphicNonSDF=function(E,F,J,L,I,G,K,P,Y,ea){I=this._buildSimpleMarker(E,I);const aa=E.primitiveName,T=this._analyzeMaterialOverrides(aa,["Rotation","OffsetX","OffsetY"]);var [,R]=this._analyzePrimitiveOverrides(G,null,null,null);const [W,S,Z]=e.CIMSymbolHelper.getTextureAnchor(I,this._resourceManager);G=a.getValue(E.rotation);const ca=a.getValue(E.offsetX),
qa=a.getValue(E.offsetY);R=t.numericHash(JSON.stringify(I)+R).toString();this._cimLayers.push({type:"marker",templateHash:R,materialHash:(T&&0<T.length||null!=F&&"function"===typeof F)&&T?this._createMaterialHashFunction(R,T):R,cim:I,materialOverrides:T,colorLocked:!!E.colorLocked||!!ea,effects:F,scaleSymbolsProportionally:!!E.scaleSymbolsProportionally,alignment:K,anchorPoint:{x:W,y:S},isAbsoluteAnchorPoint:!1,size:a.getValue(E.size,k.DEFAULT_MARKER_SIZE),rotation:this._createOverrideFunction(aa,
"Rotation",G),offsetX:this._createOverrideFunction(aa,"OffsetX",ca),offsetY:this._createOverrideFunction(aa,"OffsetY",qa),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:Y,rotateClockwise:!!E.rotateClockwise,referenceSize:P,sizeRatio:Z/C.pt2px(E.size),markerPlacement:J,animatedSymbolProperties:L,avoidSDFRasterization:!0})};H._buildSimpleMarker=function(E,F){return{type:E.type,enable:!0,name:E.name,colorLocked:E.colorLocked,primitiveName:E.primitiveName,
anchorPoint:E.anchorPoint,anchorPointUnits:E.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:E.rotateClockwise,rotation:0,size:E.size,billboardMode3D:E.billboardMode3D,depth3D:E.depth3D,frame:E.frame,markerGraphics:[F],scaleSymbolsProportionally:E.scaleSymbolsProportionally,respectFrame:E.respectFrame,clippingPath:E.clippingPath}};H._analyzeCompositeMarkerGraphic=function(E,F,J,L,I,G,K,P,Y,ea,aa,T,R,W,S){var Z=I.geometry;const ca=G[0],qa=G[1];var ya=f.getExtent(Z);if(ya){G="Relative"!==E.anchorPointUnits;
var [xa,Ca,Da]=f.getSDFMetrics(ya,E.frame,E.size,E.anchorPoint,G);Z={type:"sdf",geom:Z,asFill:!0};ya=qa.path;var N=qa.primitiveName,V=ca.primitiveName,ka=a.fromCIMColor(qa.color),da=a.fromCIMColor(ca.color),na=a.getValue(ca.width,k.DEFAULT_STROKE_WIDTH),X=I.primitiveName,fa=null;qa.colorLocked||S||(fa=this._createOverrideFunction(X,"FillColor",ka,w));var ja=null;ca.colorLocked||S||(ja=this._createOverrideFunction(X,"StrokeColor",da,w));X=this._createOverrideFunction(X,"StrokeWidth",na);var ma=!1,
ra="";for(const za of this._primitiveOverrides)if(za.primitiveName===N||za.primitiveName===V||K.includes(za.primitiveName))null!=za.value?ra+=`-${za.primitiveName}-${za.propertyName}-${JSON.stringify(za.value)}`:za.valueExpressionInfo&&(ma=!0);null!=J&&"function"===typeof J&&(ma=!0);if(a.isFeatureValueFn(aa)||a.isFeatureValueFn(T)||a.isFeatureValueFn(R)||a.isFeatureValueFn(W))ma=!0;K=JSON.stringify({...E,markerGraphics:null});var va=t.numericHash(JSON.stringify(Z)+ya).toString();I=t.numericHash(JSON.stringify(I)+
JSON.stringify(qa)+JSON.stringify(ca)+K+ra).toString();this._cimLayers.push({type:"marker",templateHash:I,materialHash:ma?()=>va:va,cim:Z,materialOverrides:null,colorLocked:!!S,effects:F,scaleSymbolsProportionally:!!E.scaleSymbolsProportionally,alignment:P,anchorPoint:{x:Ca,y:Da},isAbsoluteAnchorPoint:G,size:aa,rotation:T,offsetX:R,offsetY:W,scaleX:1,frameHeight:ea,rotateClockwise:!1,referenceSize:Y,sizeRatio:xa,color:a.isFeatureValueFn(fa)?fa:this._createOverrideFunction(N,"Color",ka,w),outlineColor:a.isFeatureValueFn(ja)?
ja:this._createOverrideFunction(V,"Color",da,w),outlineWidth:a.isFeatureValueFn(X)?X:this._createOverrideFunction(V,"Width",na),markerPlacement:J,path:ya,animatedSymbolProperties:L})}};H._createMaterialHashFunction=function(E,F){const J=this._info?.geometryType;if(J){const L=this._poMap;for(const I of F)if(I.valueExpressionInfo){const G=L[I.primitiveName]&&L[I.primitiveName][I.propertyName];G instanceof q.ArcadeExpression&&(I.fn=(K,P,Y)=>n(G,K,{$view:Y},J,P))}}return(L,I,G)=>{for(const K of F)K.fn&&
(K.value=K.fn(L,I,G));return t.numericHash(E+e.OverrideHelper.buildOverrideKey(F)).toString()}};H._setPoMap=function(E,F,J){let L;this._poMap[E]?L=this._poMap[E]:(L={},this._poMap[E]=L);L[F]=J};H._createOverrideFunction=function(E,F,J,L,I){if(null==E)return J;E=this._poMap[E];if(null==E)return J;const G=E[F];if("string"===typeof G||"number"===typeof G||G instanceof Array)return L?L.call(null,G,I):G;const K=this._info?.geometryType;return null!=G&&G instanceof q.ArcadeExpression&&null!=K?(P,Y,ea)=>
{P=n(G,P,{$view:ea},K,Y);null!==P&&L&&(P=L.call(null,P,I));return null!==P?P:J}:J};H._createEffectsOverrideFunction=function(E,F){const J=this._poMap,L=this._info?.geometryType;for(const I of F)if(I.valueExpressionInfo&&L){const G=J[I.primitiveName]&&J[I.primitiveName][I.propertyName];G instanceof q.ArcadeExpression&&(I.fn=(K,P,Y)=>n(G,K,{$view:Y},L,P))}return(I,G,K)=>{for(var P of F)P.fn&&(P.value=P.fn(I,G,K));I=[];for(let Y of E){if(G=Y?.primitiveName){K=!1;for(const ea of F)ea.primitiveName===
G&&(P=m(ea.propertyName),null!=ea.value&&ea.value!==Y[P]&&(K||(Y=y.clone(Y),K=!0),Y[P]=ea.value))}I.push(Y)}return I}};H._createMarkerPlacementOverrideFunction=function(E){const F=[];e.OverrideHelper.findApplicableOverrides(E,this._primitiveOverrides,F);if(null==E||0===F.length)return E;const J=this._poMap,L=this._info?.geometryType;for(const I of F)if(I.valueExpressionInfo&&L){const G=J[I.primitiveName]&&J[I.primitiveName][I.propertyName];G instanceof q.ArcadeExpression&&(I.fn=(K,P,Y)=>n(G,K,{$view:Y},
L,P))}return(I,G,K)=>{for(const P of F)P.fn&&(P.value=P.fn(I,G,K));I=y.clone(E);G=E.primitiveName;for(const P of F)P.primitiveName===G&&(K=m(P.propertyName),null!=P.value&&P.value!==I[K]&&(I[K]=P.value));return I}};H._createAnimatedSymbolPropertiesOverrideFunction=function(E){const F=[];e.OverrideHelper.findApplicableOverrides(E,this._primitiveOverrides,F);if(null==E||0===F.length)return E;const J=this._info?.geometryType;if(J){const L=this._poMap;for(const I of F)if(I.valueExpressionInfo){const G=
L[I.primitiveName]&&L[I.primitiveName][I.propertyName];G instanceof q.ArcadeExpression&&(I.fn=(K,P,Y)=>n(G,K,{$view:Y},J,P))}}return(L,I,G)=>{for(var K of F)K.fn&&(K.value=K.fn(L,I,G));L=y.clone(E);I=E.primitiveName;for(const P of F)P.primitiveName===I&&(G=m(P.propertyName),null!=P.value&&(K=c.quantizeIfNeeded(P.value,P.propertyName),K!==L[G]&&(L[G]=K)));return L}};H._analyzePrimitiveOverrides=function(E,F,J,L){let I=!1,G="";"string"===typeof E&&(E=[E]);for(const K of this._primitiveOverrides)E?.includes(K.primitiveName)&&
(null!=K.value?G+=`-${K.primitiveName}-${K.propertyName}-${JSON.stringify(K.value)}`:K.valueExpressionInfo&&(I=!0));null!=F&&"function"===typeof F&&(I=!0);null!=J&&"function"===typeof J&&(I=!0);null!=L&&"function"===typeof L&&(I=!0);return[I,G]};H._analyzeMaterialOverrides=function(E,F){return this._primitiveOverrides.filter(J=>J.primitiveName!==E||!F.includes(J.propertyName))};H._transformSize=function(E,F){return a.isFeatureValueFn(E)||a.isFeatureValueFn(F)?(J,L,I)=>{const G=a.isFeatureValueFn(E)?
E(J,L,I):E;J=a.isFeatureValueFn(F)?F(J,L,I):F;return G*J}:E*F};H._transformRotation=function(E,F,J){return a.isFeatureValueFn(E)||a.isFeatureValueFn(J)?(L,I,G)=>{const K=a.isFeatureValueFn(E)?E(L,I,G):E;L=a.isFeatureValueFn(J)?J(L,I,G):J;return F?L-K:L+K}:F?J-E:J+E};H._transformOffsetX=function(E,F,J,L,I){if(!(a.isFeatureValueFn(E)||a.isFeatureValueFn(F)||a.isFeatureValueFn(J)||a.isFeatureValueFn(L)||a.isFeatureValueFn(I))){const G=J*Math.PI/180;return G?(Math.cos(G)*E-Math.sin(G)*F)*L+I:E*L+I}return(G,
K,P)=>{var Y=a.isFeatureValueFn(J)?J(G,K,P):J;const ea=a.isFeatureValueFn(L)?L(G,K,P):L,aa=a.isFeatureValueFn(E)?E(G,K,P):E,T=a.isFeatureValueFn(I)?I(G,K,P):I;if(Y){Y*=Math.PI/180;const R=Math.cos(Y);Y=Math.sin(Y);G=a.isFeatureValueFn(F)?F(G,K,P):F;return(R*aa-Y*G)*ea+T}return aa*ea+T}};H._transformOffsetY=function(E,F,J,L,I){if(!(a.isFeatureValueFn(E)||a.isFeatureValueFn(F)||a.isFeatureValueFn(J)||a.isFeatureValueFn(L)||a.isFeatureValueFn(I))){const G=J*Math.PI/180;return G?(Math.sin(G)*E+Math.cos(G)*
F)*L+I:F*L+I}return(G,K,P)=>{var Y=a.isFeatureValueFn(J)?J(G,K,P):J;const ea=a.isFeatureValueFn(L)?L(G,K,P):L,aa=a.isFeatureValueFn(F)?F(G,K,P):F,T=a.isFeatureValueFn(I)?I(G,K,P):I;if(Y){Y*=Math.PI/180;const R=Math.cos(Y);Y=Math.sin(Y);G=a.isFeatureValueFn(E)?E(G,K,P):E;return(Y*G+R*aa)*ea+T}return aa*ea+T}};return h._createClass(A)}();l.CIMAnalyzer=v;l.analyzeCIMResource=function(A,H){if(!H||0===H.length)return A;A=y.clone(A);e.OverrideHelper.applyOverrides(A,H);return A};Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/quantizeTime":function(){define(["exports"],function(l){const h=new Set(["StartTimeOffset","Duration","RepeatDelay"]);l.quantizeIfNeeded=function(D,B){return h.has(B)?.05*Math.max(Math.round(D/.05),1):D};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/SDFHelper":function(){define(["exports","../../core/floatRGBA","../../geometry/support/jsonUtils","./Rect","../../views/2d/engine/webgl/definitions"],function(l,
h,D,B,y){function v(t){if(!t)return null;switch(t.type){case "CIMPointSymbol":t=t.symbolLayers;if(!t||1!==t.length)break;return v(t[0]);case "CIMVectorMarker":t=t.markerGraphics;if(!t||1!==t.length)break;var q=t[0];if(!q)break;t=q.geometry;if(!t)break;q=q.symbol;if(!q||"CIMPolygonSymbol"!==q.type&&"CIMLineSymbol"!==q.type||q.symbolLayers?.some(k=>!!k.effects))break;return{geom:t,asFill:"CIMPolygonSymbol"===q.type};case "sdf":return{geom:t.geom,asFill:t.asFill}}return null}function C(t){let q=Infinity,
k=-Infinity,e=Infinity,b=-Infinity;for(const c of t)for(const f of c)f[0]<q&&(q=f[0]),f[0]>k&&(k=f[0]),f[1]<e&&(e=f[1]),f[1]>b&&(b=f[1]);return[q,e,k,b]}l.buildSDF=function(t){var q=t.geom;var k=q?q.rings?q.rings:q.paths?q.paths:void 0!==q.xmin&&void 0!==q.ymin&&void 0!==q.xmax&&void 0!==q.ymax?[[[q.xmin,q.ymin],[q.xmin,q.ymax],[q.xmax,q.ymax],[q.xmax,q.ymin],[q.xmin,q.ymin]]]:null:null;q=Infinity;var e=-Infinity;var b=Infinity;var c=-Infinity;for(var f of k)for(var a of f)a[0]<q&&(q=a[0]),a[0]>e&&
(e=a[0]),a[1]<b&&(b=a[1]),a[1]>c&&(c=a[1]);b=new B(q,b,e-q,c-b);f=y.SPRITE_PADDING;q=Math.floor(.5*(64-f));c=(128-2*(q+f))/Math.max(b.width,b.height);f=Math.round(b.width*c)+2*q;a=Math.round(b.height*c)+2*q;e=[];for(var d of k)if(d&&1<d.length){k=[];for(var n of d){let [E,F]=n;E-=b.x;F-=b.y;E*=c;F*=c;E+=q-.5;F+=q-.5;t.asFill?k.push([E,F]):k.push([Math.round(E),Math.round(F)])}if(t.asFill){var r=k.length-1;k[0][0]===k[r][0]&&k[0][1]===k[r][1]||k.push(k[0])}e.push(k)}n=f*a;d=Array(n);k=q*q+1;for(b=
0;b<n;++b)d[b]=k;for(var p of e)for(k=p.length,b=1;b<k;++b){c=p[b-1];r=p[b];var g=void 0,u=void 0;c[0]<r[0]?(g=c[0],u=r[0]):(g=r[0],u=c[0]);var x=void 0,w=void 0;c[1]<r[1]?(x=c[1],w=r[1]):(x=r[1],w=c[1]);var m=Math.floor(g)-q;u=Math.floor(u)+q;x=Math.floor(x)-q;w=Math.floor(w)+q;0>m&&(m=0);u>f&&(u=f);0>x&&(x=0);w>a&&(w=a);g=r[0]-c[0];const E=r[1]-c[1],F=g*g+E*E;for(;m<u;m++)for(let J=x;J<w;J++){var z=(m-c[0])*g+(J-c[1])*E,A=void 0;0>z?(A=c[0],z=c[1]):z>F?(A=r[0],z=r[1]):(z/=F,A=c[0]+z*g,z=c[1]+z*
E);A=(m-A)*(m-A)+(J-z)*(J-z);z=(a-J-1)*f+m;A<d[z]&&(d[z]=A)}}for(p=0;p<n;++p)d[p]=Math.sqrt(d[p]);if(t.asFill)for(var H of e)for(t=H.length,p=1;p<t;++p)for(e=H[p-1],n=H[p],e[0]<n[0]?(k=e[0],b=n[0]):(k=n[0],b=e[0]),e[1]<n[1]?(r=e[1],c=n[1]):(r=n[1],c=e[1]),k=Math.floor(k),b=Math.floor(b)+1,r=Math.floor(r),c=Math.floor(c)+1,k<q&&(k=q),b>f-q&&(b=f-q),r<q&&(r=q),c>a-q&&(c=a-q);r<c;++r)if(e[1]>r!==n[1]>r){u=(a-r-1)*f;for(x=k;x<b;++x)x<(n[0]-e[0])*(r-e[1])/(n[1]-e[1])+e[0]&&(d[u+x]=-d[u+x]);for(x=q;x<k;++x)d[u+
x]=-d[u+x]}H=2*q;q=d.length;t=new Uint8Array(4*q);for(p=0;p<q;++p)h.packFloatRGBA(.5-d[p]/H,t,4*p);return[t,f,a]};l.getExtent=function(t){return t?t.rings?C(t.rings):t.paths?C(t.paths):D.isExtent(t)?[t.xmin,t.ymin,t.xmax,t.ymax]:null:null};l.getSDFInfo=v;l.getSDFMetrics=function(t,q,k,e,b){const [c,f,a,d]=t;if(a<c||d<f)return[0,0,0];var n=a-c,r=d-f,p=y.SPRITE_PADDING;t=Math.floor(.5*(64-p));p=(128-2*(t+p))/Math.max(n,r);const g=Math.round(n*p),u=Math.round(r*p)+2*t;r=1;q&&(r=u/p/(q.ymax-q.ymin));
let x=0,w=0;n=1;e&&(b?q&&k&&0<q.ymax-q.ymin&&(n=(q.xmax-q.xmin)/(q.ymax-q.ymin),x=e.x/(k*n),w=e.y/k):(x=e.x,w=e.y));q&&(x=.5*(q.xmax+q.xmin)+x*(q.xmax-q.xmin),w=.5*(q.ymax+q.ymin)+w*(q.ymax-q.ymin));x=(x-c)*p+t;w=(w-f)*p+t;q=x/(g+2*t)-.5;e=w/u-.5;b&&k&&(q*=k*n,e*=k);return[r,q,e]};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/floatRGBA":function(){define(["exports","./mathUtils"],function(l,h){function D(C,t=0){let q=0;for(let k=0;4>k;k++)q+=C[t+k]*y[k];return q}const B=
[1,256,65536,16777216],y=[1/256,1/65536,1/16777216,1/4294967296],v=D(new Uint8ClampedArray([255,255,255,255]));l.packFloatRGBA=function(C,t,q=0){C=h.clamp(C,0,v);for(let b=0;4>b;b++){var k=Math,e=C*B[b];t[q+b]=k.floor.call(k,256*(e-Math.floor(e)))}};l.unpackFloatRGBA=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/grouping":function(){define(["exports","../../../../core/string"],function(l,h){function D(B,y){if("string"===typeof B)B=h.numericHash(B+`-seed(${y})`);
else{let v=12;B^=y;do B=107*(B>>8^B)+v|0;while(0!==--v)}return(1+B/-2147483648)/2}l.getMaterialGroup=function(B){return Math.floor(10*D(B,53290320))};l.getRandomValue=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/util/Result":function(){define(["exports","../../../../../core/Error"],function(l,h){l.ok=function(D,B){return D&&"name"in D?(B&&B.error(new h(D.name,D.message,D.details)),!1):!0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../../../../../symbols/cim/utils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),function(l,h,D,B,y,v,C,t,q,k,e){return function(b){function c(f,a,d){var n=b.call(this,f)||this;n._minMaxZoom=v.i1616to32(Math.round(a*y.MIN_MAX_ZOOM_PRECISION_FACTOR),
Math.round(d*y.MIN_MAX_ZOOM_PRECISION_FACTOR));n._cimLineLayer=f;let r=0;D.isFeatureValueFn(f.width)||(r=.5*h.pt2px(f.width));n._dynamicPropertyMap.set("_halfWidth",(u,x,w)=>D.isFeatureValueFn(f.width)?.5*h.pt2px(f.width(u,x,w)):r);D.isFeatureValueFn(f.cap)?n._dynamicPropertyMap.set("_capType",f.cap):n._capType=f.cap;D.isFeatureValueFn(f.join)?n._dynamicPropertyMap.set("_joinType",f.join):n._joinType=f.join;const p=f.color;D.isFeatureValueFn(p)?n._dynamicPropertyMap.set("_fillColor",(u,x,w)=>B.premultiplyAlphaRGBA(p(u,
x,w))):n._fillColor=p&&B.premultiplyAlphaRGBA(p)||0;const g=f.miterLimit;D.isFeatureValueFn(g)?n._dynamicPropertyMap.set("_miterLimitCosine",(u,x,w)=>t.getLimitCosine(g(u,x,w))):n._miterLimitCosine=t.getLimitCosine(g);null!=f.effects&&(a=f.effects,D.isFeatureValueFn(a)?n._dynamicPropertyMap.set("_effects",a):n._effects=a);n._scaleFactor=f.scaleFactor||1;n._isDashed=null!=f.dashTemplate;n.tessellationProperties._bitset=(f.colorLocked?y.BITSET_GENERIC_LOCK_COLOR:0)|(f.scaleDash?y.BITSET_LINE_SCALE_DASH:
0)|(f.sampleAlphaOnly?y.BITSET_GENERIC_CONSIDER_ALPHA_ONLY:0);n._materialKey=f.materialKey;n._initializeTessellator(!0);return n}l._inherits(c,b);c.fromCIMLine=function(f,a){const [d,n]=t.getMinMaxZoom(f.scaleInfo,a);return new c(f,d,n)};c.prototype.bindFeature=function(f,a,d){const n=f.readLegacyFeature();this._dynamicPropertyMap.forEach((p,g)=>{this[g]=p(n,a,d)});this._halfWidth*=this._scaleFactor;f=this._materialCache;var r=this._cimLineLayer.materialHash;r=r(n,a,d);r=f.get(r);f=null;r&&e.ok(r.spriteMosaicItem)&&
(f=r.spriteMosaicItem);if(f){this._hasPattern=!0;const {rect:p,width:g,height:u}=f;r=p.x+y.SPRITE_PADDING;const x=p.y+y.SPRITE_PADDING,w=r+g,m=x+u;this.tessellationProperties._tl=v.i1616to32(r,x);this.tessellationProperties._br=v.i1616to32(w,m)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=this._fillColor;this.tessellationProperties._halfWidth=this._halfWidth;this.tessellationProperties.offset=0;this.tessellationProperties._halfReferenceWidth=
this.tessellationProperties._halfWidth;r=C.LineMaterialKey.load(this._materialKey);f&&(r.sdf=f.sdf,r.pattern=!0,r.textureBinding=f.textureBinding);this._materialKey=r.data};return l._createClass(c)}(q(k))})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../../../../../symbols/cim/enums ../../../../../../symbols/cim/utils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseMarkerTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f,a,d){const n=v.create(),r=y.create();return function(p){function g(u,x,w){var m=p.call(this,u)||this;m._cimMarkerLayer=u;m._minMaxZoom=e.i1616to32(Math.round(x*k.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(w*k.MIN_MAX_ZOOM_PRECISION_FACTOR));const z=u.color;t.isFeatureValueFn(z)?m._dynamicPropertyMap.set("_fillColor",(L,I,G)=>q.premultiplyAlphaRGBA(z(L,I,G))):m._fillColor=q.premultiplyAlphaRGBA(z);const A=u.outlineColor;t.isFeatureValueFn(A)?m._dynamicPropertyMap.set("_outlineColor",
(L,I,G)=>q.premultiplyAlphaRGBA(A(L,I,G))):m._outlineColor=q.premultiplyAlphaRGBA(A);const H=u.size;t.isFeatureValueFn(H)?m._dynamicPropertyMap.set("_size",(L,I,G)=>B.pt2px(H(L,I,G))):m._size=B.pt2px(H)||0;x=u.scaleX;t.isFeatureValueFn(x)?m._dynamicPropertyMap.set("_scaleX",x):m._scaleX=x;const E=u.offsetX;t.isFeatureValueFn(E)?m._dynamicPropertyMap.set("xOffset",(L,I,G)=>B.pt2px(E(L,I,G))):m.xOffset=B.pt2px(E)||0;const F=u.offsetY;t.isFeatureValueFn(F)?m._dynamicPropertyMap.set("yOffset",(L,I,G)=>
B.pt2px(F(L,I,G))):m.yOffset=B.pt2px(F)||0;const J=u.outlineWidth;t.isFeatureValueFn(J)?m._dynamicPropertyMap.set("_outlineWidth",(L,I,G)=>B.pt2px(J(L,I,G))):m._outlineWidth=B.pt2px(J)||0;x=u.rotation;t.isFeatureValueFn(x)?m._dynamicPropertyMap.set("_angle",x):m._angle=x||0;null!=u.effects&&(x=u.effects,t.isFeatureValueFn(x)?m._dynamicPropertyMap.set("_effects",x):m._effects=x);null!=u.markerPlacement&&(x=u.markerPlacement,t.isFeatureValueFn(x)?m._dynamicPropertyMap.set("_markerPlacement",x):m._markerPlacement=
x);m._scaleFactor=u.scaleFactor??1;m._bitSet=(u.alignment===C.Alignment.MAP?k.BITSET_MARKER_ALIGNMENT_MAP:k.BITSET_MARKER_ALIGNMENT_SCREEN)|(u.colorLocked?k.BITSET_GENERIC_LOCK_COLOR:0)|(u.scaleSymbolsProportionally?k.BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY:0);m._materialKey=u.materialKey;return m}l._inherits(g,p);g.fromCIMMarker=function(u,x){const [w,m]=c.getMinMaxZoom(u.scaleInfo,x);return new g(u,w,m)};g.prototype.bindFeature=function(u,x,w){const m=u.readLegacyFeature();u=u.getObjectId();
this._dynamicPropertyMap.forEach((aa,T)=>{this[T]=aa(m,x,w)});var z=this._cimMarkerLayer.materialHash;u="function"===typeof z?z(m,x,w,u):z;if((u=this._materialCache.get(u))&&d.ok(u.spriteMosaicItem)&&u.spriteMosaicItem){u=u.spriteMosaicItem;z=this._cimMarkerLayer.sizeRatio;var A=u.width/u.height*this._scaleX,H=b.MarkerMaterialKey.load(this._materialKey);H.sdf=u.sdf;H.pattern=!0;H.textureBinding=u.textureBinding;this._materialKey=H.data;var E=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,
F=this._size,J=F*A,L=this.xOffset,I=this.yOffset;this.xOffset*=this._scaleFactor;this.yOffset*=this._scaleFactor;var G=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/B.pt2px(this._cimMarkerLayer.frameHeight):1;G*=this._outlineWidth;var K=B.pt2px(this._cimMarkerLayer.referenceSize),P=0,Y=0,ea=this._cimMarkerLayer.anchorPoint;ea&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(P=B.pt2px(ea.x)/(this._size*A),Y=B.pt2px(ea.y)/this._size):(P=ea.x,Y=
ea.y));this._anchorX=P;this._anchorY=Y;this._sizeOutlineWidth=e.i8888to32(Math.round(Math.min(Math.sqrt(128*J),255)),Math.round(Math.min(Math.sqrt(128*F),255)),Math.round(Math.min(Math.sqrt(128*G),255)),Math.round(Math.min(Math.sqrt(128*K),255)));this.angle=E;this._bitestAndDistRatio=e.i1616to32(this._bitSet,Math.round(64*z));this._computeSize(J,F,z,G,this._scaleFactor,u,H.hasSizeVV(),!0);this._applyTransformation(r,n);this.xOffset=L;this.yOffset=I}else D.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate").error(new h("mapview-cim",
"Encountered an error when binding feature"))};return l._createClass(g)}(f(a))})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../../../../../symbols/cim/enums ../../../../../../symbols/cim/utils ../../alignmentUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseTextTemplate ./WGLDynamicMeshTemplate ../../../../layers/features/textUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c){return function(f){function a(n,r,p){var g=f.call(this,n)||this;g._horizontalAlignment="center";g._verticalAlignment="middle";g._textToGlyphs=new Map;g._minMaxZoom=t.i1616to32(Math.round(r*C.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(p*C.MIN_MAX_ZOOM_PRECISION_FACTOR));r=n.scaleFactor||1;g._cimTextLayer=n;const u=n.color;B.isFeatureValueFn(u)?g._dynamicPropertyMap.set("_color",(A,H,E)=>v.premultiplyAlphaRGBA(u(A,H,E))):g._color=v.premultiplyAlphaRGBA(u);const x=
n.outlineColor;B.isFeatureValueFn(x)?g._dynamicPropertyMap.set("_haloColor",(A,H,E)=>v.premultiplyAlphaRGBA(x(A,H,E))):g._haloColor=v.premultiplyAlphaRGBA(x);let w;B.isFeatureValueFn(n.size)||(w=Math.min(Math.round(h.pt2px(n.size*n.sizeRatio)),127));g._dynamicPropertyMap.set("_size",(A,H,E)=>B.isFeatureValueFn(n.size)?Math.min(Math.round(h.pt2px(n.size(A,H,E)*n.sizeRatio)),127):w);B.isFeatureValueFn(n.outlineSize)?g._dynamicPropertyMap.set("_haloSize",(A,H,E)=>Math.min(Math.floor(5*h.pt2px(n.outlineSize(A,
H,E)*n.sizeRatio)),127)):g._haloSize=Math.min(Math.floor(5*h.pt2px(n.outlineSize*n.sizeRatio)),127);let m;B.isFeatureValueFn(n.offsetX)||(m=Math.round(h.pt2px(n.offsetX*n.sizeRatio)));g._dynamicPropertyMap.set("_xOffset",(A,H,E)=>B.isFeatureValueFn(n.offsetX)?Math.round(h.pt2px(n.offsetX(A,H,E)*n.sizeRatio)):m);let z;B.isFeatureValueFn(n.offsetY)||(z=Math.round(h.pt2px(n.offsetY*n.sizeRatio)));g._dynamicPropertyMap.set("_yOffset",(A,H,E)=>B.isFeatureValueFn(n.offsetY)?Math.round(h.pt2px(n.offsetY(A,
H,E)*n.sizeRatio)):z);B.isFeatureValueFn(n.angle)?g._dynamicPropertyMap.set("_angle",n.angle):g._angle=n.angle;B.isFeatureValueFn(n.horizontalAlignment)?g._dynamicPropertyMap.set("_horizontalAlignment",n.horizontalAlignment):g._horizontalAlignment=n.horizontalAlignment;B.isFeatureValueFn(n.verticalAlignment)?g._dynamicPropertyMap.set("_verticalAlignment",n.verticalAlignment):g._verticalAlignment=n.verticalAlignment;null!=n.effects&&(p=n.effects,B.isFeatureValueFn(p)?g._dynamicPropertyMap.set("_effects",
p):g._effects=p);null!=n.markerPlacement&&(p=n.markerPlacement,B.isFeatureValueFn(p)?g._dynamicPropertyMap.set("_markerPlacement",p):g._textPlacement=p);B.isFeatureValueFn(n.text)?g._dynamicPropertyMap.set("_text",n.text):g._text=n.text;g._backgroundColor=n.backgroundColor&&v.premultiplyAlphaRGBA(n.backgroundColor);g._borderLineColor=n.borderLineColor&&v.premultiplyAlphaRGBA(n.borderLineColor);g._borderLineSize=n.borderLineWidth;g._scaleFactor=r;r=Math.min(Math.round(h.pt2px(n.referenceSize*n.sizeRatio)),
127);g._referenceSize=Math.round(Math.sqrt(256*r));g._materialKey=n.materialKey;r=q.TextMaterialKey.load(g._materialKey);r.sdf=!0;g._bitset=(n.alignment===D.Alignment.MAP?1:0)|(n.colorLocked?1:0)<<1;g._materialKey=r.data;g._decoration="none";g._lineHeight=1;g._lineWidth=512;g._isCIM=!0;return g}l._inherits(a,f);a.fromCIMText=function(n,r){const [p,g]=k.getMinMaxZoom(n.scaleInfo,r);return new a(n,p,g)};var d=a.prototype;d.analyze=async function(n,r,p,g){var u=r.readLegacyFeature();var x=this._cimTextLayer;
u="string"===typeof x.text?x.text:"function"===typeof x.text?x.text(u,p,g)??"":"";(n=await l._get(l._getPrototypeOf(a.prototype),"analyze",this).call(this,n,r,p,g,c.codepoints(u)))&&n.glyphMosaicItems&&this._textToGlyphs.set(u,n.glyphMosaicItems);return n};d.bindFeature=function(n,r,p){const g=n.readLegacyFeature();this._dynamicPropertyMap.forEach((u,x)=>{this[x]=u(g,r,p)});this._text&&0!==this._text.length?(this._size*=this._scaleFactor,this._scale=this._size/C.GLYPH_SIZE,this._xOffset*=this._scaleFactor,
this._yOffset*=this._scaleFactor,this._xAlignD=y.getXAnchorDirection(this._horizontalAlignment??"center"),this._yAlignD=y.getYAnchorDirection(this._verticalAlignment??"baseline"),n=this._textToGlyphs.get(this._text)??[],this.bindTextInfo(n,!1)):this._shapingInfo=null};return l._createClass(a)}(e(b))})},"esri/views/2d/layers/features/textUtils":function(){define(["exports"],function(l){l.codepoints=function(h){if(null==h)return[];const D=Array(h.length);for(let B=0;B<h.length;B++)D[B]=h.charCodeAt(B);
return D};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./util ./WGLBaseFillTemplate ./WGLMeshTemplate".split(" "),function(l,h,D,B,y,v,C,t,q,k){return function(e){function b(c,f,a,d,n,r,p,g,u,x,w,m,z,A,H,E){var F=e.call(this)||
this;F._effects=A||void 0;c=C.FillMaterialKey.load(c);f&&(c.sdf=f.sdf,c.pattern=!0,c.textureBinding=f.textureBinding);F.fillColor=a;F.tl=d;F.br=n;F.aux21=v.i1616to32(r,p);F.aux22=v.i1616to32(g,u);F.aux3=v.i8888to32(x,w,m,0);F._bitset=z;F._minMaxZoom=v.i1616to32(Math.round(H*B.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(E*B.MIN_MAX_ZOOM_PRECISION_FACTOR));F._materialKey=c.data;return F}l._inherits(b,e);b.fromCIMFill=function(c,f,a){var d=c.color;d=d&&D.premultiplyAlphaRGBA(d)||0;const n=c.materialKey,
[r,p]=t.getMinMaxZoom(c.scaleInfo,a);a=(c.colorLocked?B.BITSET_GENERIC_LOCK_COLOR:0)|(c.applyRandomOffset?B.BITSET_FILL_RANDOM_PATTERN_OFFSET:0)|(c.sampleAlphaOnly?B.BITSET_GENERIC_CONSIDER_ALPHA_ONLY:0)|(c.hasUnresolvedReplacementColor?B.BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR:0);if(!f)return new b(n,null,d,0,0,0,0,0,0,0,0,0,a,c.effects,r,p);const {rect:g,width:u,height:x}=f;var w=c.scaleX||1,m=g.x+B.SPRITE_PADDING;const z=g.y+B.SPRITE_PADDING;var A=m+u;const H=z+x;var E=h.pt2px(c.height);w*=
E;"CIMHatchFill"===c.cim.type&&(w*=u/x);0>=E&&(E=H-z);E<B.MAX_SIZE_FOR_U16_COMPRESSION&&(E*=B.COMPRESSION_FACTOR_FOR_U16,a|=B.BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR);E=Math.round(E);0>=w&&(w=A-m);w<B.MAX_SIZE_FOR_U16_COMPRESSION&&(w*=B.COMPRESSION_FACTOR_FOR_U16,a|=B.BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR);w=Math.round(w);const F=h.pt2px(c.offsetX||0),J=h.pt2px(-c.offsetY||0);m=v.i1616to32(m,z);A=v.i1616to32(A,H);return new b(n,f,d,m,A,w,E,F,J,B.COMPRESSION_FACTOR_FOR_U16,B.COMPRESSION_FACTOR_FOR_U16,
y.degToByte(c.angle),a,c.effects,r,p)};b.fromSimpleFill=function(c,f,a=!1){var {color:d}=c;d=d&&"esriSFSNull"!==c.style&&D.premultiplyAlphaRGBAArray(d)||0;a=a?B.BITSET_GENERIC_LOCK_COLOR:0;const n=c.materialKey;if(f){const {rect:x,width:w,height:m,pixelRatio:z}=f;var r=x.x+B.SPRITE_PADDING,p=x.y+B.SPRITE_PADDING,g=r+w,u=p+m;r=v.i1616to32(r,p);g=v.i1616to32(g,u);u=w/z;u<B.MAX_SIZE_FOR_U16_COMPRESSION&&(u*=B.COMPRESSION_FACTOR_FOR_U16,a|=B.BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR);u=Math.round(u);
p=m/z;p<B.MAX_SIZE_FOR_U16_COMPRESSION&&(p*=B.COMPRESSION_FACTOR_FOR_U16,a|=B.BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR);p=Math.round(p);f=new b(n,f,d,r,g,u,p,0,0,B.COMPRESSION_FACTOR_FOR_U16,B.COMPRESSION_FACTOR_FOR_U16,0,a,null,t.DEFAULT_MIN_ZOOM,t.DEFAULT_MAX_ZOOM)}else f=new b(n,null,d,0,0,0,0,0,0,0,0,0,a,null,t.DEFAULT_MIN_ZOOM,t.DEFAULT_MAX_ZOOM);f._maybeAddLineTemplate(c);return f};b.fromPictureFill=function(c,f,a=!1){const d=B.PICTURE_FILL_COLOR,{rect:n,width:r,height:p}=f;var g=n.x+
B.SPRITE_PADDING,u=n.y+B.SPRITE_PADDING,x=g+r,w=u+p;g=v.i1616to32(g,u);x=v.i1616to32(x,w);a=a?B.BITSET_GENERIC_LOCK_COLOR:0;w=h.pt2px(c.width);w<B.MAX_SIZE_FOR_U16_COMPRESSION&&(w*=B.COMPRESSION_FACTOR_FOR_U16,a|=B.BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR);w=Math.round(w);u=h.pt2px(c.height);u<B.MAX_SIZE_FOR_U16_COMPRESSION&&(u*=B.COMPRESSION_FACTOR_FOR_U16,a|=B.BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR);u=Math.round(u);const m=h.pt2px(c.xoffset),z=h.pt2px(-c.yoffset);f=new b(c.materialKey,
f,d,g,x,w,u,m,z,B.COMPRESSION_FACTOR_FOR_U16*c.xscale,B.COMPRESSION_FACTOR_FOR_U16*c.yscale,0,a,null,t.DEFAULT_MIN_ZOOM,t.DEFAULT_MAX_ZOOM);f._maybeAddLineTemplate(c);return f};return l._createClass(b)}(q(k))})},"esri/views/2d/engine/webgl/util/Lock":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/promiseUtils"],function(l,h,D){let B=function(){function y(){this._resolver=null}var v=y.prototype;v.isHeld=function(){return!!this._resolver};v.acquire=
async function(){this._resolver?(await this._resolver.promise,await this.acquire()):this._resolver=D.createResolver()};v.release=function(){const C=this._resolver;this._resolver=null;C?.resolve()};return h._createClass(y)}();l.Lock=B;l.withLock=async function(y,v,C){try{await y.acquire(),await v(C),y.release()}catch(t){throw y.release(),t;}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/support/cimSymbolUtils":function(){define(["exports","../../../../symbols/cim/cimAnalyzer",
"../../../../symbols/cim/ExpandedCIM","./webStyleUtils"],function(l,h,D,B){const y=async(v,C,t)=>{C=new h.CIMAnalyzer(t,C);return new D.ExpandedCIM(await C.analyzeSymbolReference(v.data,!1),v.data,v.rendererKey,v.maxVVSize)};l.cimLayerToRasterizationInfo=function(v){if(!v)return null;const {avoidSDFRasterization:C,type:t,cim:q,url:k,materialHash:e,maxVVSize:b}=v,c={cim:q,type:t,mosaicHash:e,url:k,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null,avoidSDFRasterization:C};
switch(t){case "marker":b&&"size"in q&&(q.size=Math.max(b,q.size));c.size=v.size;c.path=v.path;c.animatedSymbolProperties=v.animatedSymbolProperties;break;case "line":c.dashTemplate=v.dashTemplate;break;case "text":c.text=v.text,c.fontName=v.fontName}return c};l.expandSymbol=async function(v,C,t,q){return v?"cim"===v.type?y(v,C,t):"web-style"===v.type?(v={type:"cim",data:await B.fetchCIMSymbolReference(v,null,q)??void 0,rendererKey:v.rendererKey,maxVVSize:v.maxVVSize},y(v,C,t)):v:null};Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/ExpandedCIM":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../views/2d/engine/webgl/enums","../../views/2d/engine/webgl/materialKey/MaterialKey"],function(l,h,D,B){const y={marker:D.WGLGeometryType.MARKER,fill:D.WGLGeometryType.FILL,line:D.WGLGeometryType.LINE,text:D.WGLGeometryType.TEXT};let v=function(){function C(t,q,k,e){const b={minScale:q?.minScale,maxScale:q?.maxScale};var c=b.minScale||b.maxScale?b.minScale+
"-"+b.maxScale:"";this.layers=t;this.data=q;this.hash=this._createHash()+c;this.rendererKey=k;q={isOutline:!1,placement:null,symbologyType:D.WGLSymbologyType.DEFAULT,vvFlags:k};for(const f of t)t=y[f.type],q.isOutline="line"===f.type&&f.isOutline,f.materialKey=B.createMaterialKey(t,q),f.maxVVSize=e,f.scaleInfo=b,f.templateHash+=c}C.prototype._createHash=function(){let t="";for(const q of this.layers)t+=q.templateHash;return t};h._createClass(C,[{key:"type",get:function(){return"expanded-cim"}}]);
return C}();l.ExpandedCIM=v;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/support/webStyleUtils":function(){define("exports ../../../../core/devEnvironmentUtils ../../../../core/Error ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../portal/Portal ../../../../chunks/persistableUrlUtils ../../../../symbols/support/styleUtils ../../../../symbols/support/webStyleSymbolUtils".split(" "),function(l,h,D,B,y,v,C,t,q){async function k(b,c){b=t.Style2DUrlTemplate.replaceAll(/\{SymbolName\}/gi,
b.name);try{const f=await t.requestJSON(b,c);return t.makeCIMSymbolRef(f.data)}catch(f){return B.throwIfAbortError(f),null}}async function e(b,c,f,a){f={portal:f&&null!=f.portal?f.portal:v.getDefault(),url:y.urlToObject(b.baseUrl),origin:"portal-item"};b=q.getStyleItemFromStyle(c,b.data);if(!b)throw new D("symbolstyleutils:symbol-name-not-found",`The symbol name '${c}' could not be found`,{symbolName:c});c=C.fromJSON(t.symbolUrlFromStyleItem(b,"cimRef"),f);h.isDevEnvironment()&&(c=h.adjustStaticAGOUrl(c));
try{const d=await t.requestJSON(c,a);return t.makeCIMSymbolRef(d.data)}catch(d){return B.throwIfAbortError(d),null}}l.fetchCIMSymbolReference=async function(b,c,f){if(!b.name)throw new D("style-symbol-reference-name-missing","Missing name in style symbol reference");if(b.styleName&&"Esri2DPointSymbolsStyle"===b.styleName)return k(b,f);try{const a=await t.fetchStyle(b,c,f);return e(a,b.name,c,f)}catch(a){return B.throwIfAbortError(a),null}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/core/devEnvironmentUtils":function(){define(["exports"],function(l){const h=/^devext.arcgis.com$/,D=/^qaext.arcgis.com$/,B=/^[\w-]*\.mapsdevext.arcgis.com$/,y=/^[\w-]*\.mapsqa.arcgis.com$/,v=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,h,D,/^jsapps.esri.com$/,B,y];l.adjustStaticAGOUrl=function(C,t){return C?(t=t||globalThis.location.hostname)?null!=t.match(h)||null!=t.match(B)?C.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(D)||null!=t.match(y)?C.replace("static.arcgis.com",
"staticqa.arcgis.com"):C:C:C};l.isDevEnvironment=function(C){C=C||globalThis.location.hostname;return v.some(t=>null!=C?.match(t))};l.isTelemetryDevEnvironment=function(C){C=C||globalThis.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(v).some(t=>null!=C?.match(t))};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/styleUtils":function(){define("exports ../../request ../../core/Error ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ../../support/featureFlags".split(" "),
function(l,h,D,B,y,v,C,t){async function q(c,f){try{return{data:(await b(c,f)).data,baseUrl:y.removeFile(c),styleUrl:c}}catch(a){return B.throwIfAbortError(a),null}}function k(c,f,a){f=null!=f.portal?f.portal:v.getDefault();let d;const n=`${f.url} - ${f.user&&f.user.username} - ${c}`;l.cachedStyles[n]||(l.cachedStyles[n]=e(c,f,a).then(r=>{d=r;return r.fetchData()}).then(r=>({data:r,baseUrl:d.itemUrl??"",styleName:c})));return l.cachedStyles[n]}function e(c,f,a){return f.load(a).then(()=>{const d=
new C({disableExtraQuery:!0,query:`owner:${"esri_en"} AND type:${"Style"} AND typekeywords:"${c}"`});return f.queryItems(d,a)}).then(({results:d})=>{let n=null;const r=c.toLowerCase();if(d&&Array.isArray(d))for(const p of d)if(p.typeKeywords?.some(g=>g.toLowerCase()===r)&&"Style"===p.type&&"esri_en"===p.owner){n=p;break}if(!n)throw new D("symbolstyleutils:style-not-found",`The style '${c}' could not be found`,{styleName:c});return n.load(a)})}function b(c,f){f={responseType:"json",query:{f:"json"},
...f};return h(y.normalize(c),f)}l.cachedStyles={};l.Style2DUrlTemplate="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f\x3djson";l.cleanupStyleUtilsCache=function(){l.cachedStyles&&(l.cachedStyles={})};l.fetchStyle=function(c,f,a){return c&&null!=c.styleUrl?q(c.styleUrl,a):c&&null!=c.styleName?k(c.styleName,f,a):Promise.reject(new D("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))};
l.makeCIMSymbolRef=function(c){return null===c||"CIMSymbolReference"===c.type?c:{type:"CIMSymbolReference",symbol:c}};l.requestJSON=b;l.symbolUrlFromStyleItem=function(c,f,a=["gltf"]){if("cimRef"===f)return c.cimRef;if(c.formatInfos&&!t.enableWebStyleForceWOSR())for(const d of a)if(f=c.formatInfos.find(n=>n.type===d))return f.href;return c.webRef};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/support/featureFlags":function(){define(["exports","../core/has"],function(l,h){const D=
()=>h.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),B=()=>h.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),y=()=>h.add("enable-i3s-patching",!0,!0,!0),v=()=>h.add("enable-i3s-patching",!1,!0,!0),C=(t="i3s-patching")=>{v();B();h.add("enable-feature:SceneLayer-editing",!0,!0,!0);switch(t){case "feature-layer-view":D();break;case "i3s-patching":y()}};C("i3s-patching");l.direct3DObjectFeatureLayerDisplayEnabled=()=>!!h("enable-feature:direct-3d-object-feature-layer-display");
l.disableDirect3DObjectFeatureLayerDisplay=B;l.disableI3SPatching=v;l.disableIDBCache=()=>h.add("disable-feature:idb-cache",!0,!0,!0);l.disableSceneLayerEditing=()=>{v();B();h.add("enable-feature:SceneLayer-editing",!1,!0,!0)};l.enableDirect3DObjectFeatureLayerDisplay=D;l.enableI3SPatching=y;l.enableSceneLayerEditing=C;l.enableWebStyleForceWOSR=()=>!!h("enable-feature:force-wosr");l.i3sPatchingEnabled=()=>!!h("enable-i3s-patching");l.sceneLayerEditingEnabled=()=>!!h("enable-feature:SceneLayer-editing");
Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/webStyleSymbolUtils":function(){define("exports ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/maybe ../../core/urlUtils ../../portal/Portal ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./styleUtils ./Thumbnail".split(" "),function(l,h,D,B,y,v,C,t,q,k,e,b){function c(d,n){return n.items.find(r=>r.name===d)}function f(d,n,r,p,g,u){const x=r&&null!=r.portal?r.portal:C.getDefault(),
w={portal:x,url:v.urlToObject(d.baseUrl),origin:"portal-item"},m=c(n,d.data);if(!m)return Promise.reject(new B("symbolstyleutils:symbol-name-not-found",`The symbol name '${n}' could not be found`,{symbolName:n}));g=t.fromJSON(g(m,p),w);let z=m.thumbnail?.href??null;const A=m.thumbnail&&m.thumbnail.imageData;D.isDevEnvironment()&&(g=D.adjustStaticAGOUrl(g)??"",z=D.adjustStaticAGOUrl(z));const H={portal:x,url:v.urlToObject(v.removeFile(g)),origin:"portal-item"};return e.requestJSON(g,u).then(E=>{E=
"cimRef"===p?e.makeCIMSymbolRef(E.data):E.data;if((E=q.fromJSON(E,H))&&h.isSymbol3D(E)){if(z){const F=t.fromJSON(z,w);E.thumbnail=new b.Thumbnail({url:F})}else A&&(E.thumbnail=new b.Thumbnail({url:`data:image/png;base64,${A}`}));d.styleUrl?E.styleOrigin=new k({portal:r.portal,styleUrl:d.styleUrl,name:n}):d.styleName&&(E.styleOrigin=new k({portal:r.portal,styleName:d.styleName,name:n}))}return E})}function a(d,n,r){const p=e.Style2DUrlTemplate.replaceAll(/\{SymbolName\}/gi,d),g=null!=n.portal?n.portal:
C.getDefault();return e.requestJSON(p,r).then(u=>{u=e.makeCIMSymbolRef(u.data);return q.fromJSON(u,{portal:g,url:v.urlToObject(v.removeFile(p)),origin:"portal-item"})})}l.fetchSymbolFromStyle=f;l.getStyleItemFromStyle=c;l.resolveWebStyleSymbol=function(d,n,r,p){const g=d.name;return null==g?Promise.reject(new B("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):d.styleName&&"Esri2DPointSymbolsStyle"===d.styleName?a(g,n,p):e.fetchStyle(d,n,p).then(u=>
f(y.unwrapOrThrow(u),g,n,r,e.symbolUrlFromStyleItem,p))};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/jsonUtils":function(){define("exports ../../symbols ../../core/Error ../../layers/support/layerUtils ../Symbol3D ./symbolConversion ../WebStyleSymbol".split(" "),function(l,h,D,B,y,v,C){function t(q,k,e){if(null==q)return null;const {context:b,isLabelSymbol:c}=e;var f=b?.origin;e=b?.messages;if("web-scene"===f&&!(q instanceof y||q instanceof C)){f=v.to3D(q,
{retainCIM:!0,hasLabelingContext:c});if(null!=f.symbol)return f.symbol.write(k,b);e?.push(new D("symbol:unsupported",`Symbols of type '${q.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:q,context:b,error:f.error}));return null}return("web-map"===f||"portal-item"===f&&!B.isSceneServiceLayer(b?.layer))&&(q instanceof y||q instanceof C)?(e?.push(new D("symbol:unsupported",`Symbols of type '${q.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,
{symbol:q,context:b})),null):q.write(k,b)}l.fromJSON=function(q,k){return h.readSymbol(q,null,k)};l.write=function(q,k,e,b){q=t(q,{},{context:b,isLabelSymbol:!1});null!=q&&(k[e]=q)};l.writeLabelSymbol=function(q,k,e,b){q=t(q,{},{context:b,isLabelSymbol:!0});null!=q&&(k[e]=q)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(l,h,D){function B(v){return"scene"===v?.type}function y(v){v=
v?.type;return"imagery-tile"===v||"tile"===v||"open-street-map"===v||"vector-tile"===v||"web-tile"===v||"wmts"===v}l.getEffectiveEditingEnabled=function(v){a:if("editingEnabled"in v)switch(v.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var C=!0;break a;default:C=!1}else C=!1;return C?"effectiveEditingEnabled"in v?v.effectiveEditingEnabled:v.editingEnabled:!1};l.getEffectiveLayerCapabilities=function(v){a:if("capabilities"in
v)switch(v.type){case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":case "wfs":var C=!0;break a;default:C=!1}else C=!1;return C?"effectiveCapabilities"in v?v.effectiveCapabilities:v.capabilities:null};l.getOwningPortalUrl=async function(v,C){var t=h.id?.findServerInfo(v);if(null!=t?.currentVersion)return t.owningSystemUrl||null;t=v.toLowerCase().indexOf("/rest/services");
if(-1===t)return null;v=`${v.substring(0,t)}/rest/info`;({data:C}=await D(v,{query:{f:"json"},responseType:"json",signal:null!=C?C.signal:null}));return C?.owningSystemUrl||null};l.getTileMaxtrixSetFromActiveLayer=function(v){if(v.activeLayer){const C=v.activeLayer.tileMatrixSet;if(C)return C;if(v=v.activeLayer.tileMatrixSets)return v}return null};l.isBaseLayer=function(v){return null!=v&&null!=v.parent&&"declaredClass"in v.parent&&"esri.Basemap"===v.parent.declaredClass&&v.parent.baseLayers.includes(v)};
l.isBasemap3DSupportedLayer=function(v){return y(v)||B(v)};l.isBasemapSupportedTiledLayer=y;l.isFeatureCollectionLayer=function(v){return"feature"===v?.type&&!v.url&&"memory"===v.source?.type};l.isFeatureLayer=function(v){return null!=v&&"object"===typeof v&&"type"in v&&"feature"===v.type};l.isFeatureServiceLayer=function(v){return"feature"===v?.type&&"feature-layer"===v.source?.type};l.isGroupLayer=function(v){return null!=v&&"type"in v&&"group"===v.type};l.isImageryTileLayer=function(v){return"imagery-tile"===
v?.type};l.isLayerWithFeatureLayerSource=function(v){return("feature"===v?.type||"subtype-group"===v?.type)&&"feature-layer"===v.source?.type};l.isSceneLayer=B;l.isSceneServiceLayer=function(v){v=v?.type;return"building-scene"===v||"integrated-mesh"===v||"point-cloud"===v||"scene"===v};l.isTable=function(v){return null!=v&&"object"===typeof v&&"isTable"in v&&!!v.isTable};l.isTiledLayer=function(v){v=v?.type;return"base-tile"===v||"tile"===v||"elevation"===v||"imagery-tile"===v||"base-elevation"===
v||"open-street-map"===v||"wcs"===v||"web-tile"===v||"wmts"===v||"vector-tile"===v};l.isVoxelLayer=function(v){return"voxel"===v?.type};l.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};l.serializeLayerDefinitions=function(v){const C=/[:;]/,t=[];let q=!1;if(v&&(v.forEach((k,e)=>{t.push([e,k]);!q&&C.test(k)&&(q=!0)}),0<t.length)){if(q){const k={};t.forEach(e=>{k[e[0]]=e[1]});
v=JSON.stringify(k)}else{const k=[];t.forEach(e=>{k.push(e[0]+":"+e[1])});v=k.join(";")}return v}return null};l.serializeTimeOptions=function(v){if(v){var C=[];v.forEach((t,q)=>{C.push('"'+q+'":'+JSON.stringify(t))});if(C.length)return"{"+C.join(",")+"}"}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/symbolConversion":function(){define("exports ../../symbols ../../core/Error ../WebStyleSymbol ../PointSymbol3D ../SimpleLineSymbol ../LineSymbol3D ../SimpleMarkerSymbol ../PictureMarkerSymbol ../SimpleFillSymbol ../MeshSymbol3D ../PolygonSymbol3D ../TextSymbol ../LabelSymbol3D".split(" "),
function(l,h,D,B,y,v,C,t,q,k,e,b,c,f){const a={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};l.defaultTo3DOptions=a;l.to3D=function(d,n=a){if(!d)return{symbol:null};const {retainId:r=a.retainId,ignoreDrivers:p=a.ignoreDrivers,hasLabelingContext:g=a.hasLabelingContext,retainCIM:u=a.retainCIM}=n;let x=null;if(h.isSymbol3D(d)||d instanceof B)x=d.clone();else if("cim"===d.type){n=d.data?.symbol?.type;if("CIMPointSymbol"!==n)return{error:new D("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${n||
"unknown"}' is unsupported in 3D`,{symbol:d})};x=u?d.clone():y.fromCIMSymbol(d)}else if(d instanceof v)x=C.fromSimpleLineSymbol(d);else if(d instanceof t)x=y.fromSimpleMarkerSymbol(d);else if(d instanceof q)x=y.fromPictureMarkerSymbol(d);else if(d instanceof k)x=n.geometryType&&"mesh"===n.geometryType?e.fromSimpleFillSymbol(d):b.fromSimpleFillSymbol(d);else if(d instanceof c)x=g?f.fromTextSymbol(d):y.fromTextSymbol(d);else return{error:new D("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${d.type||
d.declaredClass}' is unsupported in 3D`,{symbol:d})};r&&x&&"cim"!==x.type&&(x.id=d.id);p&&h.isSymbol3D(x)&&x.symbolLayers.forEach(w=>w.ignoreDrivers=!0);return{symbol:x}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/util/Matcher":function(){define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/arrayUtils ../../../../../core/Error ../../../../../core/Logger ../../../../../core/LRUCache ../../../../../support/arcadeOnDemand ../../../arcade/callExpressionWithFeature ../../../layers/support/cimSymbolUtils".split(" "),
function(l,h,D,B,y,v,C,t,q,k){async function e(u,x,w,m){switch(u.type){case "simple":case "heatmap":return a.fromBasicRenderer(u,x,w,m);case "map":return r.fromUVRenderer(u,x,w,m);case "interval":return n.fromCBRenderer(u,x,w,m);case "dictionary":return g.fromDictionaryRenderer(u,x,w,m);case "pie-chart":return d.fromPieChartRenderer(u,x,w,m);case "subtype":return d.fromSubtypes(u,x,w,m)}}async function b(u,x){const w=u||1;if("number"===typeof w)return(z,A,H)=>w;const m=await t.createRendererExpression(w,
x.spatialReference,x.fields);return(z,A,H)=>q(m,z,{$view:H},x.geometryType,A)||1}async function c(){p||(p=new Promise((u,x)=>l(["../../../layers/features/createSymbolSchema"],u,x)));return p}const f=v.getLogger("esri/views/2d/engine/webgl/util/Matcher");let a=function(){function u(){this.type="feature";this._defaultResult=null}u.fromBasicRenderer=async function(w,m,z,A){const H=new u;w.symbol&&(w=await k.expandSymbol(w.symbol,z,A),m=m.createTemplateGroup(w,null),H.setDefault(m));return H};u.fromPieChartRenderer=
async function(w,m,z,A){const H=new u;if(w.markerSymbol){const E=await k.expandSymbol(w.markerSymbol,z,A);let F;w.fillSymbol&&(F=await k.expandSymbol(w.fillSymbol,z,A));w=m.createTemplateGroup(E,F);H.setDefault(w)}return H};var x=u.prototype;x.size=function(){return 1};x.getDefault=function(){return this._defaultResult};x.setDefault=function(w){this._defaultResult=w};x.match=function(w,m,z,A,H){return this.getDefault()};x.analyze=async function(w,m,z,A,H,E){return null};return D._createClass(u)}(),
d=function(u){function x(w,m){var z=u.call(this)||this;z._subMatchers=w;z._subtypeField=m;return z}D._inherits(x,u);x.fromSubtypes=async function(w,m,z,A){const H=new Map,E=[];for(const F in w.renderers){const J=parseInt(F,10),L=e(w.renderers[F],m,z,A).then(I=>H.set(J,I));E.push(L)}await Promise.all(E);return new x(H,w.subtypeField)};x.prototype.match=function(w,m,z,A,H){var E=m.readAttribute(this._subtypeField);return(E=this._subMatchers.get(E))?E.match(w,m,z,A,H):null};return D._createClass(x)}(a),
n=function(u){function x(m,z,A,H){var E=u.call(this)||this;E.type="interval";E._intervals=[];E._isMaxInclusive=z;E._fieldIndex=H;E._field=m;E._normalizationInfo=A;return E}D._inherits(x,u);x.fromCBRenderer=async function(m,z,A,H){const {isMaxInclusive:E,normalizationField:F,normalizationTotal:J,normalizationType:L}=m,I=new x(m.field,E,{normalizationField:F,normalizationTotal:J,normalizationType:L},m.fieldIndex),G=await k.expandSymbol(m.backgroundFillSymbol,A,H);await Promise.all(m.intervals.map(async K=>
{var P=await k.expandSymbol(K.symbol,A,H);P=await z.createTemplateGroup(P,G);I.add({min:K.min,max:K.max},P)}));if(m=await k.expandSymbol(m.defaultSymbol,A,H))m=await z.createTemplateGroup(m,G),I.setDefault(m);return I};var w=x.prototype;w.add=function(m,z){this._intervals.push({interval:m,result:z});this._intervals.sort((A,H)=>A.interval.min-H.interval.min)};w.size=function(){return D._get(D._getPrototypeOf(x.prototype),"size",this).call(this)+this._intervals.length};w.match=function(m,z,A,H,E){if(null==
this._fieldIndex&&!this._field)return this.getDefault();m=null!=this._fieldIndex?z.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(z);if(null===m||void 0===m||isNaN(m)||Infinity===m||-Infinity===m)return this.getDefault();for(z=0;z<this._intervals.length;z++){const {interval:F,result:J}=this._intervals[z];A=this._isMaxInclusive?m<=F.max:m<F.max;if(m>=F.min&&A)return J}return this.getDefault()};w._needsNormalization=function(){const m=this._normalizationInfo;return m&&(m.normalizationField||
m.normalizationTotal||m.normalizationType)};w._getValueFromField=function(m){const z=m.readAttribute(this._field);if(!this._needsNormalization()||null==z)return z;const {normalizationField:A,normalizationTotal:H,normalizationType:E}=this._normalizationInfo;m=m.readAttribute(A)??1;if(E)switch(E){case "esriNormalizeByField":return(m||void 0)&&z/m;case "esriNormalizeByLog":return Math.log(z)*Math.LOG10E;case "esriNormalizeByPercentOfTotal":return z/H*100;default:f.error(`Found unknown normalization type: ${E}`)}else f.error("Normalization is required, but no type was set!")};
return D._createClass(x)}(a),r=function(u){function x(m,z,A){var H=u.call(this)||this;H.type="map";H._nullResult=null;H._resultsMap=new Map;H._fields=[];H._fieldsIndex=A;H._fields=m;H._seperator=z||"";return H}D._inherits(x,u);x.fromUVRenderer=async function(m,z,A,H){const E=m.fieldDelimiter,F=[m.field];m.field2&&F.push(m.field2);m.field3&&F.push(m.field3);const J=await k.expandSymbol(m.backgroundFillSymbol,A,H),L=new x(F,E,m.fieldIndex);await Promise.all(m.map.map(async(I,G)=>{const K=await k.expandSymbol(I.symbol,
A,H);G=await z.createTemplateGroup(K,J,G+1);"\x3cNull\x3e"===I.value?L.setNullResult(G):L.add(I.value,G)}));if(m=await k.expandSymbol(m.defaultSymbol,A,H))m=await z.createTemplateGroup(m,J,Number.MAX_SAFE_INTEGER),L.setDefault(m);return L};var w=x.prototype;w.setNullResult=function(m){this._nullResult=m};w.add=function(m,z){this._resultsMap.set(m.toString(),z)};w.size=function(){return D._get(D._getPrototypeOf(x.prototype),"size",this).call(this)+this._resultsMap.size};w.match=function(m,z,A,H,E){if(null==
this._fieldsIndex&&!this._fields)return this.getDefault();m=null!=this._fieldsIndex?z.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(z);if(null!==this._nullResult&&(null==m||""===m||"\x3cNull\x3e"===m))return this._nullResult;if(null==m)return this.getDefault();m=m.toString();return this._resultsMap.has(m)?this._resultsMap.get(m):this.getDefault()};w._getValueFromFields=function(m){const z=[];for(const A of this._fields){const H=m.readAttribute(A);null==H||""===H?z.push("\x3cNull\x3e"):
z.push(H)}return z.join(this._seperator)};return D._createClass(x)}(a),p,g=function(u){function x(m,z,A,H,E,F){var J=u.call(this)||this;J.type="dictionary";J._groupIdCache=new C.LRUCache(100);J._loader=m;J._fieldMap=m.fieldMap;J._symbolFields=m.getSymbolFields();J._templates=z;J._info=A;J._scaleFn=H;J._schemaUtilsModule=E;J._symbolOptions=F;return J}D._inherits(x,u);x.fromDictionaryRenderer=async function(m,z,A,H){const [{DictionaryLoader:E},F]=await Promise.all([new Promise((L,I)=>l(["../../../../../renderers/support/DictionaryLoader"],
L,I)),c()]);H=new E(m.url,m.config,m.fieldMap);await H.fetchResources({spatialReference:A.spatialReference,fields:A.fields});const J=await b(m.scaleExpression,A);return new x(H,z,A,J,F,m.symbolOptions)};var w=x.prototype;w._analyzeFeature=async function(m,z,A,H,E){m=m.readLegacyFeature();const F=this._scaleFn(m,A,H);A=this._attributeHash(m)+"-"+F;const J=this._groupIdCache.get(A);if(J)return J;H=await this._loader.getSymbolAsync(m,{...H,spatialReference:this._info.spatialReference,abortOptions:E,
fields:this._info.fields});H=this._schemaUtilsModule.createSymbolSchema(H,this._symbolOptions);z=k.expandSymbol(H,this._info,z,E).then(L=>{if("expanded-cim"!==L?.type)return f.error(new y("mapview-bad-type",`Found unexpected type ${L?.type} in dictionary response`)),null;L.hash+="-"+F;for(const I of L.layers)I.scaleFactor=F,I.templateHash+="-"+F;return this._templates.createTemplateGroup(L,null)});this._groupIdCache.put(A,z,1);return z};w.analyze=async function(m,z,A,H,E,F){m=z.getCursor();for(z=
[];m.next();)z.push(this._analyzeFeature(m,A,H,E,F));return Promise.all(z).then(J=>J.filter(B.isSome))};w.match=function(m,z,A,H,E){return null};w._attributeHash=function(m){let z="";for(const A of this._symbolFields){const H=this._fieldMap?.[A];H&&(z+=m.attributes[H]+"-")}return z};return D._createClass(x)}(a);h.DictionaryMatcher=g;h.FeatureMatcher=a;h.IntervalMatcher=n;h.MapMatcher=r;h.SubtypeMatcher=d;h.createMatcher=e;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/processors/BaseProcessor":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass".split(" "),
function(l,h,D,B,y,v,C,t){D=function(q){function k(){return q.apply(this,arguments)||this}l._inherits(k,q);var e=k.prototype;e.initialize=function(){};e.destroy=function(){};l._createClass(k,[{key:"supportsTileUpdates",get:function(){return!1}},{key:"spatialReference",get:function(){const b=this.get("tileStore.tileScheme.spatialReference");return b&&b.toJSON()||null}}]);return k}(D.HandleOwner);h.__decorate([B.property({readOnly:!0})],D.prototype,"supportsTileUpdates",null);h.__decorate([B.property({constructOnly:!0})],
D.prototype,"remoteClient",void 0);h.__decorate([B.property({constructOnly:!0})],D.prototype,"service",void 0);h.__decorate([B.property()],D.prototype,"spatialReference",null);h.__decorate([B.property({constructOnly:!0})],D.prototype,"tileInfo",void 0);h.__decorate([B.property({constructOnly:!0})],D.prototype,"tileStore",void 0);return D=h.__decorate([t.subclass("esri.views.2d.layers.features.processors.BaseProcessor")],D)})},"esri/views/2d/layers/features/support/ResourceManagerProxy":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../core/promiseUtils"],function(l,h){return function(){function D(y){this._remoteClient=y;this._resourceMap=new Map;this._inFlightResourceMap=new Map;this.geometryEnginePromise=this.geometryEngine=null}var B=D.prototype;B.destroy=function(){};B.fetchResource=async function(y,v){const C=this._resourceMap;var t=C.get(y);if(t||(t=this._inFlightResourceMap.get(y)))return t;try{t=this._remoteClient.invoke("tileRenderer.fetchResource",{url:y},{...v}),this._inFlightResourceMap.set(y,t),t.then(q=>
{this._inFlightResourceMap.delete(y);C.set(y,q);return q})}catch(q){return h.isAbortError(q)?null:{width:0,height:0}}return t};B.getResource=function(y){return this._resourceMap.get(y)??null};B.loadFont=function(y){return Promise.resolve(null)};return l._createClass(D)}()})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/HandleOwner ../../../../core/has ../../../../core/reactiveUtils ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/accessorSupport/decorators/subclass ../../../../geometry/support/spatialReferenceUtils ../../../../layers/support/TileInfo ./processors ./controllers/FeatureController2D ./support/TileStore ./support/UpdateToken ../../tiling/TileInfoView".split(" "),function(l,
h,D,B,y,v,C,t,q,k,e,b,c,f,a,d){D=function(n){function r(){var g=n.apply(this,arguments)||this;g.controller=null;g.processor=null;g.remoteClient=null;g.tileStore=null;g.service=null;g.viewState=null;g._paused=!1;g._pendingTileUpdates=[];return g}l._inherits(r,n);var p=r.prototype;p.initialize=function(){this.handles.add(y.watch(()=>this.updating,g=>{this.remoteClient.invoke("setUpdating",g).catch(u=>{})}))};p.destroy=function(){this.stop();this.controller?.destroy();this.processor?.destroy();this.controller=
this.processor=this.tileStore=this.remoteClient=null};p.stop=function(){this._paused=!0;Array.isArray(this.service?.source)&&(this.service.source.forEach(g=>g.close()),this.service.source.length=0);this.tileStore?.updateTiles({added:[],removed:this.tileStore.tiles.map(g=>g.id)});this.tileStore?.destroy();this.tileStore=null;this._pendingTileUpdates.length=0};p.startup=async function({service:g,config:u,tileInfo:x,tiles:w}){this._paused=!0;Array.isArray(this.service?.source)&&(this.service.source.forEach(m=>
m.close()),this.service.source.length=0);this.service=g;this.tileStore&&k.equals(this.tileStore.tileScheme.spatialReference,x.spatialReference)||(g=new d(e.fromJSON(x)),w.added.length=w.removed.length=0,this.tileStore?.updateTiles({added:[],removed:this.tileStore.tiles.map(m=>m.id)}),this.tileStore?.destroy(),this.tileStore=new f(g),this._pendingTileUpdates.length=0);await this._createProcessorAndController(u);await this.update({config:u});this.controller.resume();this.tileStore.clear();this.tileStore.updateTiles(w);
for(this._paused=!1;this._pendingTileUpdates.length;)this.tileStore.updateTiles(this._pendingTileUpdates.pop())};p.updateTiles=async function(g){this._paused?this._pendingTileUpdates.push(g):this.tileStore?.updateTiles(g)};p.update=async function({config:g}){const u=a.UpdateToken.empty();await Promise.all([this.processor.update(u,g),this.controller.update(u,g)]);return u.toJSON()};p.applyUpdate=async function(g){return this.controller.applyUpdate(a.UpdateToken.create(g))};p._createProcessorAndController=
async function(g){await Promise.all([this._handleControllerConfig(g),this._handleProcessorConfig(g)]);this.controller.processor=this.processor};p._handleControllerConfig=async function(g){return this._createController(this.service,g)};p._handleProcessorConfig=async function(g){return this._createProcessor(this.service,g)};p._createController=async function(g,u){this.controller&&this.controller.destroy();const {tileStore:x,remoteClient:w}=this;return this.controller=g=new c({service:g,tileStore:x,
remoteClient:w})};p._createProcessor=async function(g,u){const x=(await b.loadProcessorModule(u.schema.processors[0].type)).default,{remoteClient:w,tileStore:m}=this;g=new x({service:g,config:u,tileStore:m,remoteClient:w});this.processor&&this.processor.destroy();return this.processor=g};l._createClass(r,[{key:"updating",get:function(){return!this.controller||this.controller.updating}}]);return r}(D.HandleOwner);h.__decorate([v.property()],D.prototype,"controller",void 0);h.__decorate([v.property()],
D.prototype,"processor",void 0);h.__decorate([v.property()],D.prototype,"updating",null);h.__decorate([v.property()],D.prototype,"viewState",void 0);return D=h.__decorate([q.subclass("esri.views.2d.layers.features.Pipeline")],D)});