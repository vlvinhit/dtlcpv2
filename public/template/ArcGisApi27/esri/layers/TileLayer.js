// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../support/TileInfo ../support/TileInfoTilemapCache ../support/TilemapCache ../../geometry/SpatialReference".split(" "),function(u,
m,d,g,p,r,x,C,y,N,z,L,E,V){u.ArcGISCachedService=v=>{v=function(W){function Y(){var B=W.apply(this,arguments)||this;B.copyright=null;B.minScale=0;B.maxScale=0;B.spatialReference=null;B.tileInfo=null;B.tilemapCache=null;return B}m._inherits(Y,W);var P=Y.prototype;P.destroy=function(){this.tilemapCache?.destroy?.()};P.readMinScale=function(B,I){return null!=I.minLOD&&null!=I.maxLOD?B:0};P.readMaxScale=function(B,I){return null!=I.minLOD&&null!=I.maxLOD?B:0};P.readTilemapCache=function(B,I,t){B=I.capabilities?.includes("Tilemap");
let {minLOD:G,maxLOD:F,minScale:e,maxScale:c}=I;if(null==G&&null==F&&0!==e&&0!==c){e=e?Math.round(1E4*e)/1E4:Math.round(1E4*I.tileInfo.lods[0].scale)/1E4;c=c?Math.round(1E4*c)/1E4:Math.round(1E4*I.tileInfo.lods[I.tileInfo.lods.length-1].scale)/1E4;for(var a of I.tileInfo.lods){const f=Math.round(1E4*a.scale)/1E4;G=f>=e?a.level:G;F=f>=c?a.level:F}}return B?new E.TilemapCache({layer:this,minLOD:G,maxLOD:F}):I.tileInfo?(a=new z,a.read(I.tileInfo,t),new L(a,G,F)):null};m._createClass(Y,[{key:"supportsBlankTile",
get:function(){return 10.2<=this.version}}]);return Y}(v);d.__decorate([p.property({json:{read:{source:"copyrightText"}}})],v.prototype,"copyright",void 0);d.__decorate([p.property()],v.prototype,"minScale",void 0);d.__decorate([y.reader("service","minScale")],v.prototype,"readMinScale",null);d.__decorate([p.property()],v.prototype,"maxScale",void 0);d.__decorate([y.reader("service","maxScale")],v.prototype,"readMaxScale",null);d.__decorate([p.property({type:V})],v.prototype,"spatialReference",void 0);
d.__decorate([p.property({readOnly:!0})],v.prototype,"supportsBlankTile",null);d.__decorate([p.property({type:z})],v.prototype,"tileInfo",void 0);d.__decorate([p.property()],v.prototype,"tilemapCache",void 0);d.__decorate([y.reader("service","tilemapCache",["capabilities","tileInfo"])],v.prototype,"readTilemapCache",null);d.__decorate([p.property()],v.prototype,"version",void 0);return v=d.__decorate([N.subclass("esri.layers.mixins.ArcGISCachedService")],v)};Object.defineProperty(u,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(u,m,d,g,p,r,x,C,y,N,z,L,E,V,v,W,Y,P,B){var I;d=new d.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});g=I=function(t){function G(e){e=t.call(this,e)||this;e.dpi=96;e.format=null;e.origin=null;e.size=null;e.spatialReference=null;return e}u._inherits(G,t);G.create=function(e={}){const {resolutionFactor:c=
1,scales:a,size:f=256,spatialReference:l=V.WebMercator,numLODs:k=24}=e;if(!W.isValid(l)){e=[];if(a)for(var w=0;w<a.length;w++){var D=a[w];e.push(new P({level:w,scale:D,resolution:D}))}else for(w=5E-4,D=k-1;0<=D;D--)e.unshift(new P({level:D,scale:w,resolution:w})),w*=2;return new I({dpi:96,lods:e,origin:new E(0,0,l),size:[f,f],spatialReference:l})}w=W.getInfo(l);e=e.origin?new E({x:e.origin.x,y:e.origin.y,spatialReference:l}):w?new E({x:w.origin[0],y:w.origin[1],spatialReference:l}):new E({x:0,y:0,
spatialReference:l});w=1/(39.37*p.getMetersPerUnitForSR(l)*96);D=[];if(a)for(var T=0;T<a.length;T++){var M=a[T];D.push(new P({level:T,scale:M,resolution:M*w}))}else{var O=W.isGeographic(l)?512/f*5.916575275917094E8:256/f*5.91657527591555E8;T=Math.ceil(k/c);D.push(new P({level:0,scale:O,resolution:O*w}));for(M=1;M<T;M++)O/=2**c,D.push(new P({level:M,scale:O,resolution:O*w}))}return new I({dpi:96,lods:D,origin:e,size:[f,f],spatialReference:l})};var F=G.prototype;F.readOrigin=function(e,c){return E.fromJSON({spatialReference:c.spatialReference,
...e})};F.readSize=function(e,c){return[c.cols,c.rows]};F.writeSize=function(e,c){c.cols=e[0];c.rows=e[1]};F.zoomToScale=function(e){const c=this.scales;if(0>=e)return c[0];if(e>=c.length-1)return c[c.length-1];const a=Math.floor(e);return c[a]/(c[a]/c[a+1])**(e-a)};F.scaleToZoom=function(e){const c=this.scales,a=c.length-1;let f=0;for(;f<a;f++){const l=c[f],k=c[f+1];if(l<=e)break;if(k===e)return f+1;if(l>e&&k<e)return f+Math.log(l/e)/Math.log(l/k)}return f};F.snapScale=function(e,c=.95){e=this.scaleToZoom(e);
return e%Math.floor(e)>=c?this.zoomToScale(Math.ceil(e)):this.zoomToScale(Math.floor(e))};F.tileAt=function(e,c,a,f){var l=this.lodAt(e);if(!l)return null;let k;if("number"===typeof c)k=c,c=a;else{if(W.equals(c.spatialReference,this.spatialReference))k=c.x,c=c.y;else{f=Y.project(c,this.spatialReference);if(null==f)return null;k=f.x;c=f.y}f=a}a=l.resolution*this.size[0];l=l.resolution*this.size[1];f||(f=new B.TileKey(null,0,0,0,v.create()));f.level=e;f.row=Math.floor((this.origin.y-c)/l+.001);f.col=
Math.floor((k-this.origin.x)/a+.001);this.updateTileInfo(f);return f};F.updateTileInfo=function(e,c=I.ExtrapolateOptions.NONE){var a=this.lodAt(e.level);a||c!==I.ExtrapolateOptions.POWER_OF_TWO||(c=this.lods[this.lods.length-1],c.level<e.level&&(a=c));if(a){var f=e.level-a.level;c=a.resolution*this.size[0]/2**f;a=a.resolution*this.size[1]/2**f;e.id=`${e.level}/${e.row}/${e.col}`;e.extent||(e.extent=v.create());e.extent[0]=this.origin.x+e.col*c;e.extent[1]=this.origin.y-(e.row+1)*a;e.extent[2]=e.extent[0]+
c;e.extent[3]=e.extent[1]+a}};F.upsampleTile=function(e){const c=this._upsampleLevels[e.level];if(!c||-1===c.parentLevel)return!1;e.level=c.parentLevel;e.row=Math.floor(e.row/c.factor+.001);e.col=Math.floor(e.col/c.factor+.001);this.updateTileInfo(e);return!0};F.getTileBounds=function(e,c){var a=this.lodAt(c.level);if(null==a)return null;var {resolution:f}=a;a=f*this.size[0];f*=this.size[1];e[0]=this.origin.x+c.col*a;e[1]=this.origin.y-(c.row+1)*f;e[2]=e[0]+a;e[3]=e[1]+f;return e};F.lodAt=function(e){return this._levelToLOD?.[e]??
null};F.clone=function(){return I.fromJSON(this.write({}))};F.getOrCreateCompatible=function(e,c){if(256===this.size[0]&&256===this.size[1])return 256===e?this:null;const a=[],f=this.lods.length;for(let l=0;l<f;l++){const k=this.lods[l];a.push(new P({level:k.level,scale:k.scale,resolution:k.resolution*c}))}return new I({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:a})};F._initializeUpsampleLevels=
function(){const e=this.lods;this._upsampleLevels=[];let c=null;for(let a=0;a<e.length;a++){const f=e[a];this._upsampleLevels[f.level]={parentLevel:c?c.level:-1,factor:c?c.resolution/f.resolution:0};c=f}};u._createClass(G,[{key:"isWrappable",get:function(){const {spatialReference:e,origin:c}=this;if(e&&c){const a=W.getInfo(e);return e.isWrappable&&!!a&&Math.abs(a.origin[0]-c.x)<=a.dx}return!1}},{key:"lods",set:function(e){const c=[],a=this._levelToLOD={};e&&e.forEach(f=>{c.push(f.scale);a[f.level]=
f});this._set("scales",c);this._set("lods",e);this._initializeUpsampleLevels()}}]);return G}(g.JSONSupport);m.__decorate([r.property({type:Number,json:{write:!0}})],g.prototype,"compressionQuality",void 0);m.__decorate([r.property({type:Number,json:{write:!0}})],g.prototype,"dpi",void 0);m.__decorate([r.property({type:String,json:{read:d.read,write:d.write,origins:{"web-scene":{read:!1,write:!1}}}})],g.prototype,"format",void 0);m.__decorate([r.property({readOnly:!0})],g.prototype,"isWrappable",null);
m.__decorate([r.property({type:E,json:{write:!0}})],g.prototype,"origin",void 0);m.__decorate([N.reader("origin")],g.prototype,"readOrigin",null);m.__decorate([r.property({type:[P],value:null,json:{write:!0}})],g.prototype,"lods",null);m.__decorate([r.property({readOnly:!0})],g.prototype,"scales",void 0);m.__decorate([r.property({cast:t=>Array.isArray(t)?t:"number"===typeof t?[t,t]:[256,256]})],g.prototype,"size",void 0);m.__decorate([N.reader("size",["rows","cols"])],g.prototype,"readSize",null);
m.__decorate([L.writer("size",{cols:{type:x.Integer},rows:{type:x.Integer}})],g.prototype,"writeSize",null);m.__decorate([r.property({type:V,json:{write:!0}})],g.prototype,"spatialReference",void 0);g=I=m.__decorate([z.subclass("esri.layers.support.TileInfo")],g);(function(t){t=t.ExtrapolateOptions||(t.ExtrapolateOptions={});t[t.NONE=0]="NONE";t[t.POWER_OF_TWO=1]="POWER_OF_TWO"})(g||(g={}));return g})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(u,m,d,g,p,r,x,C){var y;d=y=function(N){function z(L){L=N.call(this,L)||this;L.cols=null;L.level=0;L.levelValue=null;L.origin=null;L.resolution=0;L.rows=null;L.scale=0;return L}u._inherits(z,N);z.prototype.clone=function(){return new y({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return u._createClass(z)}(d.JSONSupport);m.__decorate([g.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,
write:!1}}}})],d.prototype,"cols",void 0);m.__decorate([g.property({type:p.Integer,json:{write:!0}})],d.prototype,"level",void 0);m.__decorate([g.property({type:String,json:{write:!0}})],d.prototype,"levelValue",void 0);m.__decorate([g.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],d.prototype,"origin",void 0);m.__decorate([g.property({type:Number,json:{write:!0}})],d.prototype,"resolution",void 0);m.__decorate([g.property({json:{write:!0,
origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],d.prototype,"rows",void 0);m.__decorate([g.property({type:Number,json:{write:!0}})],d.prototype,"scale",void 0);return d=y=m.__decorate([C.subclass("esri.layers.support.LOD")],d)})},"esri/layers/support/TileKey":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(u,m){m=m._createClass(function(d,g,p,r,x){this.id=d;this.level=g;this.row=p;this.col=r;this.extent=x});u.TileKey=m;Object.defineProperty(u,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfoTilemapCache":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/promiseUtils"],function(u,m,d){return function(){function g(r,x=0,C=r.lods[r.lods.length-1].level){this.tileInfo=r;this.minLOD=x;this.maxLOD=C;r.lodAt(x)||(this.minLOD=r.lods[0].level);r.lodAt(C)||(this.maxLOD=r.lods[r.lods.length-1].level)}var p=g.prototype;p.getAvailability=function(r,x,C){const y=this.tileInfo?.lodAt(r);return!y||
r<this.minLOD||r>this.maxLOD?"unavailable":y.cols&&y.rows?C>=y.cols[0]&&C<=y.cols[1]&&x>=y.rows[0]&&x<=y.rows[1]?"unknown":"unavailable":"unknown"};p.fetchAvailability=async function(r,x,C,y){await d.waitTick(y);y=this.getAvailability(r,x,C);if("unavailable"===y)throw new m("tile-map:tile-unavailable","Tile is not available",{level:r,row:x,col:C});return y};p.fetchAvailabilityUpsample=async function(r,x,C,y,N){await d.waitTick(N);y.level=r;y.row=x;y.col=C;const z=this.tileInfo;z.updateTileInfo(y);
return this.fetchAvailability(r,x,C,N).catch(L=>{if(d.isAbortError(L))throw L;if(z.upsampleTile(y))return this.fetchAvailabilityUpsample(y.level,y.row,y.col,y,N);throw L;})};u._createClass(g,[{key:"effectiveMinLOD",get:function(){return this.minLOD??this.tileInfo.lods[0].level}},{key:"effectiveMaxLOD",get:function(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}}]);return g}()})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/ByteSizeUnit ../../core/Error ../../core/handleUtils ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./TileKey ./Tilemap".split(" "),
function(u,m,d,g,p,r,x,C,y,N,z,L,E,V,v,W,Y,P,B,I,t){var G;u.TilemapCache=G=function(F){function e(a){a=F.call(this,a)||this;a._pendingTilemapRequests={};a.request=g;a.size=32;a._prefetchingEnabled=!0;return a}m._inherits(e,F);var c=e.prototype;c.initialize=function(){this._tilemapCache=new y.LRUCache(2*r.ByteSizeUnit.MEGABYTES);this.addHandles([L.watch(()=>{const {layer:a}=this;return[a?.parsedUrl,a?.tileServers,a?.apiKey,a?.customParameters]},()=>this._initializeTilemapDefinition(),L.initial)])};
c.fetchTilemap=function(a,f,l,k){if(!this.layer.tileInfo.lodAt(a)||a<this.effectiveMinLOD||a>this.effectiveMaxLOD)return Promise.reject(new x("tilemap-cache:level-unavailable",`Level ${a} is unavailable in the service`));const w=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,f,l,w))return Promise.resolve(a);const D=k&&k.signal;k={...k,signal:null};return new Promise((T,M)=>{z.onAbort(D,()=>M(z.createAbortError()));const O=t.tilemapDefinitionId(w);let H=this._pendingTilemapRequests[O];if(!H){H=
t.Tilemap.fromDefinition(w,k).then(R=>{this._tilemapCache.put(O,R,R.byteSize);return R});const ca=()=>delete this._pendingTilemapRequests[O];this._pendingTilemapRequests[O]=H;H.then(ca,ca)}H.then(T,M)})};c.getAvailability=function(a,f,l){return!this.layer.tileInfo.lodAt(a)||a<this.effectiveMinLOD||a>this.effectiveMaxLOD?"unavailable":(a=this._tilemapFromCache(a,f,l,this._tmpTilemapDefinition))?a.getAvailability(f,l):"unknown"};c.fetchAvailability=function(a,f,l,k){return!this.layer.tileInfo.lodAt(a)||
a<this.effectiveMinLOD||a>this.effectiveMaxLOD?Promise.reject(new x("tile-map:tile-unavailable","Tile is not available",{level:a,row:f,col:l})):this.fetchTilemap(a,f,l,k).catch(w=>w).then(w=>{if(w instanceof t.Tilemap){w=w.getAvailability(f,l);if("unavailable"===w)throw new x("tile-map:tile-unavailable","Tile is not available",{level:a,row:f,col:l});return w}if(z.isAbortError(w))throw w;return"unknown"})};c.fetchAvailabilityUpsample=function(a,f,l,k,w){k.level=a;k.row=f;k.col=l;const D=this.layer.tileInfo;
D.updateTileInfo(k);const T=this.fetchAvailability(a,f,l,w).catch(M=>{if(z.isAbortError(M))throw M;if(D.upsampleTile(k))return this.fetchAvailabilityUpsample(k.level,k.row,k.col,k,w);throw M;});this._fetchAvailabilityUpsamplePrefetch(k.id,a,f,l,w,T);return T};c._fetchAvailabilityUpsamplePrefetch=async function(a,f,l,k,w,D){if(this._prefetchingEnabled&&null!=a){var T=`prefetch-${a}`;if(!this.hasHandles(T)){var M=new AbortController;D.then(()=>M.abort(),()=>M.abort());var O=!1;D=C.makeHandle(()=>{O||
(O=!0,M.abort())});this.addHandles(D,T);await E.waitTicks(10,M.signal).catch(()=>{});O||(O=!0,this.removeHandles(T));if(!z.isAborted(M))for(a=new I.TileKey(a,f,l,k),w={...w,signal:M.signal},f=this.layer.tileInfo,l=0;G._prefetches.length<G._maxPrefetch&&f.upsampleTile(a);++l){const H=this.fetchAvailability(a.level,a.row,a.col,w);G._prefetches.push(H);k=()=>{G._prefetches.removeUnordered(H)};H.then(k,k)}}}};c._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var {parsedUrl:a,apiKey:f,
customParameters:l}=this.layer;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:a.path,query:V.objectToQuery({...a.query,...l,token:f??a.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}};c._tilemapFromCache=function(a,f,l,k){k.level=a;k.row=f-f%this.size;k.col=l-l%this.size;a=t.tilemapDefinitionId(k);return this._tilemapCache.get(a)};m._createClass(e,[{key:"effectiveMinLOD",get:function(){return this.minLOD??
this.layer.tileInfo.lods[0].level}},{key:"effectiveMaxLOD",get:function(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}},{key:"test",get:function(){const a=this;return{get prefetchingEnabled(){return a._prefetchingEnabled},set prefetchingEnabled(f){a._prefetchingEnabled=f},hasTilemap(f,l,k){return!!a._tilemapFromCache(f,l,k,a._tmpTilemapDefinition)}}}}]);return e}(p);u.TilemapCache._maxPrefetch=4;u.TilemapCache._prefetches=new N({initialSize:G._maxPrefetch});
d.__decorate([v.property({constructOnly:!0})],u.TilemapCache.prototype,"layer",void 0);d.__decorate([v.property({constructOnly:!0})],u.TilemapCache.prototype,"minLOD",void 0);d.__decorate([v.property({constructOnly:!0})],u.TilemapCache.prototype,"maxLOD",void 0);d.__decorate([v.property({constructOnly:!0})],u.TilemapCache.prototype,"request",void 0);d.__decorate([v.property({constructOnly:!0})],u.TilemapCache.prototype,"size",void 0);u.TilemapCache=G=d.__decorate([B.subclass("esri.layers.support.TilemapCache")],
u.TilemapCache);Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(u){u.ByteSizeUnit=void 0;var m=u.ByteSizeUnit||(u.ByteSizeUnit={});m[m.KILOBYTES=1024]="KILOBYTES";m[m.MEGABYTES=1048576]="MEGABYTES";m[m.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Tilemap":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/arrayUtils ../../core/Error ../../core/lang ../../core/typedArrayUtil ../../geometry/support/UintArray".split(" "),
function(u,m,d,g,p,r,x,C){function y(z){if(z.service.tileServers?.length){var L=z.service.tileServers;L=`${L&&L.length?L[z.row%L.length]:z.service.url}/tilemap/${z.level}/${z.row}/${z.col}/${z.width}/${z.height}`}else L=`${z.service.url}/tilemap/${z.level}/${z.row}/${z.col}/${z.width}/${z.height}`;(z=z.service.query)&&(L=`${L}?${z}`);return L}let N=function(){function z(E){this._validateJSON(E);const {location:V,data:v}=E;this.location=Object.freeze(r.clone(V));let W=E=!0;const Y=C.newUintArray(Math.ceil(this.location.width*
this.location.height/32));let P=0;for(let B=0;B<v.length;B++){const I=B%32;v[B]?(W=!1,Y[P]|=1<<I):E=!1;31===I&&++P}W?(this._availability="unavailable",this.byteSize=40):E?(this._availability="available",this.byteSize=40):(this._availability=Y,this.byteSize=40+x.estimateSize(Y))}var L=z.prototype;L.getAvailability=function(E,V){if("unavailable"===this._availability||"available"===this._availability)return this._availability;E=(E-this.location.top)*this.location.width+(V-this.location.left);V=E>>5;
const v=this._availability;return 0>V||V>v.length?"unknown":v[V]&1<<E%32?"available":"unavailable"};z.fromDefinition=function(E,V){const v=E.service.request||d,{row:W,col:Y,width:P,height:B}=E,I={query:{f:"json"}};V=V?{...I,...V}:I;return v(y(E),V).then(t=>t.data).catch(t=>{if(t&&t.details&&422===t.details.httpStatus)return{location:{top:W,left:Y,width:P,height:B},valid:!0,data:g.constant(P*B,0)};throw t;}).then(t=>{if(t.location&&(t.location.top!==W||t.location.left!==Y||t.location.width!==P||t.location.height!==
B))throw new p("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:W,left:Y,width:P,height:B}});return z.fromJSON(t)})};z.fromJSON=function(E){return Object.freeze(new z(E))};L._validateJSON=function(E){if(!E||!E.location)throw new p("tilemap:missing-location","Location missing from tilemap response");if(!1===E.valid)throw new p("tilemap:invalid","Tilemap response was marked as invalid");if(!E.data)throw new p("tilemap:missing-data","Data missing from tilemap response");
if(!Array.isArray(E.data))throw new p("tilemap:data-mismatch","Data must be an array of numbers");if(E.data.length!==E.location.width*E.location.height)throw new p("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return m._createClass(z)}();u.Tilemap=N;u.tilemapDefinitionId=function(z){return`${z.level}/${z.row}/${z.col}/${z.width}/${z.height}`};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/UintArray":function(){define(["exports",
"../../core/typedArrayUtil"],function(u,m){u.newUintArray=function(d,g=!1){return d<=m.NATIVE_ARRAY_MAX_SIZE?g?Array(d).fill(0):Array(d):new Uint32Array(d)};u.uintArrayFrom=function(d){return(m.isArray(d)?d.length:d.byteLength/8)<=m.NATIVE_ARRAY_MAX_SIZE?Array.from(d):new Uint32Array(d)};u.uintSubArray=function(d,g,p){return Array.isArray(d)?d.slice(g,g+p):d.subarray(g,g+p)};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/ArcGISMapService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/MapUtils ../../core/promiseUtils ../../core/urlUtils ../../core/Version ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/PropertyOrigin ../../geometry/Extent ../../geometry/SpatialReference ../support/arcgisLayerUrl ../support/commonProperties ../../portal/support/portalItemUtils".split(" "),
function(u,m,d,g,p,r,x,C,y,N,z,L,E,V,v,W,Y,P,B,I){u.ArcGISMapService=t=>{t=function(G){function F(){var c=G.apply(this,arguments)||this;c.capabilities=void 0;c.copyright=null;c.fullExtent=null;c.legendEnabled=!0;c.spatialReference=null;c.version=void 0;c._allLayersAndTablesMap=null;return c}m._inherits(F,G);var e=F.prototype;e.readCapabilities=function(c,a){var f=a.capabilities&&a.capabilities.split(",").map(R=>R.toLowerCase().trim());if(!f)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,
supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var l=this.type;c="tile"!==l&&!!a.supportsDynamicLayers;const k=f.includes("query"),w=f.includes("map"),D=!!a.exportTilesAllowed,T=f.includes("tilemap");f=f.includes("data");const M="tile"!==l&&(!a.tileInfo||c),O="tile"!==l&&(!a.tileInfo||c);l="tile"!==l;var H=a.cimVersion&&C.Version.parse(a.cimVersion);const ca=H?.since(1,4)??!1;H=H?.since(2,0)??!1;return{operations:{supportsExportMap:w,supportsExportTiles:D,
supportsIdentify:k,supportsQuery:f,supportsTileMap:T},exportMap:w?{supportsArcadeExpressionForLabeling:ca,supportsSublayersChanges:l,supportsDynamicLayers:c,supportsSublayerVisibility:M,supportsSublayerDefinitionExpression:O,supportsCIMSymbols:H}:null,exportTiles:D?{maxExportTilesCount:+a.maxExportTilesCount}:null}};e.readVersion=function(c,a){(c=a.currentVersion)||(c=a.hasOwnProperty("capabilities")||a.hasOwnProperty("tables")?10:a.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3);return c};
e.fetchRelatedService=async function(c){var a=this.portalItem;if(!a||!I.isHostedLayer(a))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=a.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},c).then(f=>f.find(l=>"Feature Service"===l.type)??null,()=>null));a=await this._relatedFeatureServicePromise;r.throwIfAborted(c);return a?{itemId:a.id,url:a.url}:null};e.fetchSublayerInfo=async function(c,a){const {source:f}=c;if(this?.portalItem&&"tile"===
this.type&&"map-layer"===f?.type&&I.isHostedLayer(this.portalItem)&&c.originIdOf("url")<v.OriginId.SERVICE){var l=await this.fetchRelatedService(a);l&&(c.url=x.join(l.url,f.mapLayerId.toString()),c.layerItemId=l.itemId)}({url:l}=c);let k;if("data-layer"===f.type)k=(await g(l,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...a})).data;else if(l&&c.originIdOf("url")>v.OriginId.SERVICE)try{k=(await this._fetchAllLayersAndTablesFromService(l)).get(f.mapLayerId)}catch{}else{c=
c.id;"map-layer"===f?.type&&(c=f.mapLayerId);try{k=(await this.fetchAllLayersAndTables(a)).get(c)}catch{}}return k};e.fetchAllLayersAndTables=async function(c){return this._fetchAllLayersAndTablesFromService(this.parsedUrl?.path,c)};e._fetchAllLayersAndTablesFromService=async function(c,a){await this.load(a);this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map);const f=P.parse(c);c=await p.getOrCreateMapValue(this._allLayersAndTablesMap,f?.url.path,()=>g(x.join(f?.url.path,"/layers"),
{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(l=>{const k=new Map;for(const w of l.data.layers)k.set(w.id,w);return{result:k}},l=>({error:l})));r.throwIfAborted(a);if("result"in c)return c.result;throw c.error;};return m._createClass(F)}(t);d.__decorate([y.property({readOnly:!0})],t.prototype,"capabilities",void 0);d.__decorate([E.reader("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],
t.prototype,"readCapabilities",null);d.__decorate([y.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0);d.__decorate([y.property({type:W})],t.prototype,"fullExtent",void 0);d.__decorate([y.property(B.id)],t.prototype,"id",void 0);d.__decorate([y.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0);d.__decorate([y.property(B.popupEnabled)],t.prototype,"popupEnabled",
void 0);d.__decorate([y.property({type:Y})],t.prototype,"spatialReference",void 0);d.__decorate([y.property({readOnly:!0})],t.prototype,"version",void 0);d.__decorate([E.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null);return t=d.__decorate([V.subclass("esri.layers.mixins.ArcGISMapService")],t)};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/SublayersOwner":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/CollectionFlattener ../../core/Error ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/utils ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/PropertyOrigin ../support/Sublayer ../support/sublayerUtils".split(" "),
function(u,m,d,g,p,r,x,C,y,N,z,L,E,V,v,W,Y){function P(G,F){const e=[],c={};if(!G)return e;G.forEach(a=>{const f=new W;f.read(a,F);c[f.id]=f;null!=a.parentLayerId&&-1!==a.parentLayerId?(a=c[a.parentLayerId],a.sublayers||(a.sublayers=[]),a.sublayers.unshift(f)):e.unshift(f)});return e}function B(G,F){G&&G.forEach(e=>{F(e);e.sublayers&&e.sublayers.length&&B(e.sublayers,F)})}const I=x.getLogger("esri.layers.TileLayer"),t=g.ofType(W);u.SublayersOwner=G=>{G=function(F){function e(...a){var f=F.call(this,
...a)||this;f.allSublayers=new p({getCollections:()=>[f.sublayers],getChildrenFunction(l){return l.sublayers}});f.sublayersSourceJSON={[v.OriginId.SERVICE]:{},[v.OriginId.PORTAL_ITEM]:{},[v.OriginId.WEB_SCENE]:{},[v.OriginId.WEB_MAP]:{}};f.addHandles(C.watch(()=>f.sublayers,(l,k)=>f._handleSublayersChange(l,k),C.sync));return f}m._inherits(e,F);var c=e.prototype;c.destroy=function(){this.allSublayers.destroy()};c.readSublayers=function(a,f){if(f&&a){var {sublayersSourceJSON:l}=this,k=v.nameToId(f.origin);
if(!(k<v.OriginId.SERVICE||(l[k]={context:f,visibleLayers:a.visibleLayers||l[k].visibleLayers,layers:a.layers||l[k].layers},k>v.OriginId.SERVICE))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var {sublayers:w,origin:D}=this.createSublayersForOrigin("web-document");a=E.getProperties(this);a.setDefaultOrigin(D);this._set("sublayers",new t(w));a.setDefaultOrigin("user")}}};c.findSublayerById=function(a){return this.allSublayers.find(f=>f.id===a)};c.createServiceSublayers=
function(){return this.createSublayersForOrigin("service").sublayers};c.createSublayersForOrigin=function(a){const f="web-document"===a?v.nameToId("web-map"):v.nameToId(a);let l=v.OriginId.SERVICE;a=this.sublayersSourceJSON[v.OriginId.SERVICE].layers;let k=this.sublayersSourceJSON[v.OriginId.SERVICE].context,w=null;var D=[v.OriginId.PORTAL_ITEM,v.OriginId.WEB_SCENE,v.OriginId.WEB_MAP].filter(R=>R<=f);for(var T of D)D=this.sublayersSourceJSON[T],Y.isSublayerOverhaul(D.layers)&&(l=T,a=D.layers,k=D.context,
D.visibleLayers&&(w={visibleLayers:D.visibleLayers,context:D.context}));T=[v.OriginId.PORTAL_ITEM,v.OriginId.WEB_SCENE,v.OriginId.WEB_MAP].filter(R=>R>l&&R<=f);let M=null;for(var O of T){const {layers:R,visibleLayers:ha,context:Z}=this.sublayersSourceJSON[O];R&&(M={layers:R,context:Z});ha&&(w={visibleLayers:ha,context:Z})}O=P(a,k);const H=new Map,ca=new Set;if(M)for(const R of M.layers)H.set(R.id,R);if(w?.visibleLayers)for(const R of w.visibleLayers)ca.add(R);B(O,R=>{M&&R.read(H.get(R.id),M.context);
w&&R.read({defaultVisibility:ca.has(R.id)},w.context)});return{origin:v.idToName(l),sublayers:new t({items:O})}};c.read=function(a,f){m._get(m._getPrototypeOf(e.prototype),"read",this).call(this,a,f);this.readSublayers(a,f)};c._handleSublayersChange=function(a,f){f&&(f.forEach(l=>{l.parent=null;l.layer=null}),this.removeHandles("sublayers-owner"));a&&(a.forEach(l=>{l.parent=this;l.layer=this}),this.addHandles([a.on("after-add",({item:l})=>{l.parent=this;l.layer=this}),a.on("after-remove",({item:l})=>
{l.parent=null;l.layer=null})],"sublayers-owner"),"tile"===this.type&&this.addHandles(a.on("before-changes",l=>{I.error(new r("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this}));l.preventDefault()}),"sublayers-owner"))};return m._createClass(e)}(G);d.__decorate([y.property({readOnly:!0})],G.prototype,"allSublayers",void 0);d.__decorate([y.property({readOnly:!0,type:g.ofType(W)})],G.prototype,"serviceSublayers",void 0);d.__decorate([y.property({value:null,
type:t,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],G.prototype,"sublayers",void 0);d.__decorate([y.property({readOnly:!0})],G.prototype,"sublayersSourceJSON",void 0);return G=d.__decorate([V.subclass("esri.layers.mixins.SublayersOwner")],G)};u.forEachSublayer=B;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Sublayer":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../PopupTemplate ../../renderers/ClassBreaksRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/PieChartRenderer ../../renderers/Renderer ../../renderers/SimpleRenderer ../../renderers/UniqueValueRenderer ../../renderers/support/jsonUtils ../../renderers/support/types ../../request ../../symbols ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/has ../../core/Identifiable ../../core/lang ../../core/Loadable ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/sql ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../core/accessorSupport/PropertyOrigin ../../core/accessorSupport/utils ../graphics/sources/support/QueryTask ./FeatureType ./Field ./FieldsIndex ./LabelClass ./labelingInfo ./LayerFloorInfo ./serviceCapabilitiesUtils ./source/DataLayerSource ./source/MapLayerSource ../../rest/support/AttachmentQuery ../../rest/support/Query ../../support/popupUtils ../../geometry/Extent ../../geometry/support/typeUtils".split(" "),
function(u,m,d,g,p,r,x,C,y,N,z,L,E,V,v,W,Y,P,B,I,t,G,F,e,c,a,f,l,k,w,D,T,M,O,H,ca,R,ha,Z,q,K,S,X,aa,ka,ea,sa,ta,ua,va,na){function oa(U){return null!=U&&"esriSMS"===U.type}function pa(U,ba,A){U=this.originIdOf(ba)>=H.nameToId(A.origin);return{ignoreOrigin:!0,allowNull:U,enabled:A?"map-image"===A.layer?.type&&(A.writeSublayerStructure||U):!1}}function qa(U,ba,A){return{enabled:A?"tile"===A.layer?.type&&(A.origin&&this.originIdOf(ba)>=H.nameToId(A.origin)||this._isOverridden(ba)):!1}}function fa(U,
ba,A){return{ignoreOrigin:!0,enabled:A&&A.writeSublayerStructure||!1}}function la(U,ba,A){return{ignoreOrigin:!0,enabled:A?A.writeSublayerStructure||this.originIdOf(ba)>=H.nameToId(A.origin):!1}}var ma;let wa=0;const ia=new Set;ia.add("layer");ia.add("parent");ia.add("loaded");ia.add("loadStatus");ia.add("loadError");ia.add("loadWarnings");g=ma=function(U){function ba(b){b=U.call(this,b)||this;b.capabilities=void 0;b.fields=null;b.fullExtent=null;b.geometryType=null;b.globalIdField=null;b.legendEnabled=
!0;b.objectIdField=null;b.parent=null;b.popupEnabled=!0;b.popupTemplate=null;b.sourceJSON=null;b.title=null;b.typeIdField=null;b.types=null;b._lastParsedUrl=null;return b}m._inherits(ba,U);var A=ba.prototype;A.load=async function(b){this.addResolvingPromise((async()=>{const {layer:h,url:n}=this;if(!h&&!n)throw new B("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const J=h?await h.fetchSublayerInfo(this,b):(await W(n,{responseType:"json",query:{f:"json"},
...b})).data;J&&(this.sourceJSON=J,this.read({layerDefinition:J},{origin:"service"}))})());return this};A.readCapabilities=function(b,h){h=h.layerDefinition||h;const {operations:{supportsQuery:n,supportsQueryAttachments:J},query:{supportsFormatPBF:Q},data:{supportsAttachment:da}}=aa.getFeatureLayerCapabilities(h,this.url);return{exportMap:{supportsModification:!!h.canModifyLayer},operations:{supportsQuery:n,supportsQueryAttachments:J},data:{supportsAttachment:da},query:{supportsFormatPBF:Q}}};A.readGlobalIdFieldFromService=
function(b,h){h=h.layerDefinition||h;if(h.globalIdField)return h.globalIdField;if(h.fields)for(const n of h.fields)if("esriFieldTypeGlobalID"===n.type)return n.name};A.writeLabelingInfo=function(b,h,n,J){b&&b.length&&(h.layerDefinition={drawingInfo:{labelingInfo:b.map(Q=>Q.write({},J))}})};A.readMinScale=function(b,h){return h.minScale||h.layerDefinition&&h.layerDefinition.minScale||0};A.readMaxScale=function(b,h){return h.maxScale||h.layerDefinition&&h.layerDefinition.maxScale||0};A.readObjectIdFieldFromService=
function(b,h){h=h.layerDefinition||h;if(h.objectIdField)return h.objectIdField;if(h.fields)for(const n of h.fields)if("esriFieldTypeOID"===n.type)return n.name};A.readOpacity=function(b,h){b=h.layerDefinition;return 1-.01*((null!=b?.transparency?b.transparency:b?.drawingInfo?.transparency)??0)};A.writeOpacity=function(b,h,n,J){h.layerDefinition={drawingInfo:{transparency:100-100*b}}};A.writeParent=function(b,h){h.parentLayerId=this.parent&&this.parent!==this.layer?O.ensureInteger(this.parent.id):
-1};A.castSublayers=function(b){return O.ensureType(P.ofType(ma),b)};A.writeSublayers=function(b,h,n){this.sublayers?.length&&(h[n]=this.sublayers.map(J=>J.id).toArray().reverse())};A.readTypeIdField=function(b,h){h=h.layerDefinition||h;let n=h.typeIdField;n&&h.fields&&(n=n.toLowerCase(),b=h.fields.find(J=>J.name.toLowerCase()===n))&&(n=b.name);return n};A.writeVisible=function(b,h,n,J){h[n]=this.getAtOrigin("defaultVisibility","service")||b};A.clone=function(){const {store:b}=ca.getProperties(this),
h=new ma;ca.getProperties(h).store=b.clone(ia);this.commitProperty("url");h._lastParsedUrl=this._lastParsedUrl;return h};A.createPopupTemplate=function(b){return ua.createPopupTemplate(this,b)};A.createQuery=function(){return new ta({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};A.createFeatureLayer=async function(){if(this.hasOwnProperty("sublayers"))return null;const {layer:b}=this,h=b?.parsedUrl,n=new (await new Promise((J,Q)=>u(["../FeatureLayer"],da=>J(Object.freeze(Object.defineProperty({__proto__:null,
default:da},Symbol.toStringTag,{value:"Module"}))),Q))).default({url:h?.path});h&&this.source&&("map-layer"===this.source.type?n.layerId=this.source.mapLayerId:n.dynamicDataSource=this.source);null!=b?.refreshInterval&&(n.refreshInterval=b.refreshInterval);this.definitionExpression&&(n.definitionExpression=this.definitionExpression);this.floorInfo&&(n.floorInfo=F.clone(this.floorInfo));this.originIdOf("labelingInfo")>H.OriginId.SERVICE&&(n.labelingInfo=F.clone(this.labelingInfo));this.originIdOf("labelsVisible")>
H.OriginId.DEFAULTS&&(n.labelsVisible=this.labelsVisible);this.originIdOf("legendEnabled")>H.OriginId.DEFAULTS&&(n.legendEnabled=this.legendEnabled);this.originIdOf("visible")>H.OriginId.DEFAULTS&&(n.visible=this.visible);this.originIdOf("minScale")>H.OriginId.DEFAULTS&&(n.minScale=this.minScale);this.originIdOf("maxScale")>H.OriginId.DEFAULTS&&(n.maxScale=this.maxScale);this.originIdOf("opacity")>H.OriginId.DEFAULTS&&(n.opacity=this.opacity);this.originIdOf("popupTemplate")>H.OriginId.DEFAULTS&&
(n.popupTemplate=F.clone(this.popupTemplate));this.originIdOf("renderer")>H.OriginId.SERVICE&&(n.renderer=F.clone(this.renderer));"data-layer"===this.source?.type&&(n.dynamicDataSource=this.source.clone());this.originIdOf("title")>H.OriginId.DEFAULTS&&(n.title=this.title);"map-image"===b?.type&&b.originIdOf("customParameters")>H.OriginId.DEFAULTS&&(n.customParameters=b.customParameters);"tile"===b?.type&&b.originIdOf("customParameters")>H.OriginId.DEFAULTS&&(n.customParameters=b.customParameters);
return n};A.getField=function(b){return this.fieldsIndex.get(b)};A.getFeatureType=function(b){const {typeIdField:h,types:n}=this;if(!h||!b)return null;const J=b.attributes?b.attributes[h]:void 0;if(null==J)return null;let Q=null;n?.some(da=>{const {id:ja}=da;if(null==ja)return!1;ja.toString()===J.toString()&&(Q=da);return!!Q});return Q};A.getFieldDomain=function(b,h){return(h=this.getFeatureType(h&&h.feature))&&(h=h.domains&&h.domains[b])&&"inherited"!==h.type?h:this._getLayerDomain(b)};A.queryAttachments=
async function(b,h){await this.load();b=sa.from(b);const n=this.capabilities;if(!n?.data?.supportsAttachment)throw new B("queryAttachments:not-supported","this layer doesn't support attachments");const {attachmentTypes:J,objectIds:Q,globalIds:da,num:ja,size:xa,start:ya,where:ra}=b;if(!n?.operations?.supportsQueryAttachments&&(0<J?.length||0<da?.length||0<xa?.length||ja||ya||ra))throw new B("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",
b);if(!(Q?.length||da?.length||ra))throw new B("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",b);return this.queryTask.executeAttachmentQuery(b,h)};A.queryFeatures=async function(b=this.createQuery(),h){await this.load();if(!this.capabilities.operations.supportsQuery)throw new B("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new B("queryFeatures:not-supported","this layer has no url.");b=await this.queryTask.execute(b,
{...h,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(b?.features)for(const n of b.features)n.sourceLayer=this;return b};A.toExportImageJSON=function(b){const h={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}};b=f.sqlAnd(b,this.definitionExpression);null!=b&&(h.definitionExpression=b);const n=["renderer","labelingInfo","opacity","labelsVisible"].reduce((J,Q)=>{J[Q]=this.originIdOf(Q);return J},{});if(Object.keys(n).some(J=>n[J]>H.OriginId.SERVICE)){b=
h.drawingInfo={};n.renderer>H.OriginId.SERVICE&&(b.renderer=this.renderer?this.renderer.toJSON():null);n.labelsVisible>H.OriginId.SERVICE&&(b.showLabels=this.labelsVisible);if(this.labelsVisible&&n.labelingInfo>H.OriginId.SERVICE){!this.loaded&&this.labelingInfo.some(Q=>!Q.labelPlacement)&&c.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' `+"and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.",
{sublayer:this});let J=this.labelingInfo;null!=this.geometryType&&(J=S.validateLabelingInfo(this.labelingInfo,na.featureGeometryTypeKebabDictionary.toJSON(this.geometryType)));b.labelingInfo=J.filter(Q=>Q.labelPlacement).map(Q=>Q.toJSON({origin:"service",layer:this.layer}));b.showLabels=!0}n.opacity>H.OriginId.SERVICE&&(b.transparency=100-100*this.opacity);this._assignDefaultSymbolColors(b.renderer)}return h};A._assignDefaultSymbolColors=function(b){this._forEachSimpleMarkerSymbols(b,h=>{h.color||
"esriSMSX"!==h.style&&"esriSMSCross"!==h.style||(h.color=h.outline&&h.outline.color?h.outline.color:[0,0,0,0])})};A._forEachSimpleMarkerSymbols=function(b,h){if(b){const n=("uniqueValueInfos"in b?b.uniqueValueInfos:"classBreakInfos"in b?b.classBreakInfos:null)??[];for(const J of n)oa(J.symbol)&&h(J.symbol);"symbol"in b&&oa(b.symbol)&&h(b.symbol);"defaultSymbol"in b&&oa(b.defaultSymbol)&&h(b.defaultSymbol)}};A._setAndNotifyLayer=function(b,h){const n=this.layer,J=this._get(b);let Q,da;switch(b){case "definitionExpression":case "floorInfo":Q=
"supportsSublayerDefinitionExpression";break;case "minScale":case "maxScale":case "visible":Q="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":Q="supportsDynamicLayers",da="supportsModification"}const ja=ca.getProperties(this).getDefaultOrigin();if("service"!==ja){if(Q&&!1===this.layer?.capabilities?.exportMap?.[Q]){this._logLockedError(b,`capability not available 'layer.capabilities.exportMap.${Q}'`);return}if(da&&!1===this.capabilities?.exportMap[da]){this._logLockedError(b,
`capability not available 'capabilities.exportMap.${da}'`);return}}"source"===b&&"not-loaded"!==this.loadStatus?this._logLockedError(b,"'source' can't be changed after calling sublayer.load()"):(this._set(b,h),"service"!==ja&&J!==h&&n&&n.emit&&n.emit("sublayer-update",{propertyName:b,target:this}))};A._handleSublayersChange=function(b,h){h&&(h.forEach(n=>{n.parent=null;n.layer=null}),this.handles.removeAll());b&&(b.forEach(n=>{n.parent=this;n.layer=this.layer}),this.handles.add([b.on("after-add",
({item:n})=>{n.parent=this;n.layer=this.layer}),b.on("after-remove",({item:n})=>{n.parent=null;n.layer=null}),b.on("before-changes",n=>{const J=this.layer?.capabilities?.exportMap?.supportsSublayersChanges;null==J||J||(c.getLogger(this).error(new B("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),n.preventDefault())})]))};A._logLockedError=function(b,h){const {layer:n,declaredClass:J}=this;c.getLogger(J).error(new B("sublayer:locked",
`Property '${String(b)}' can't be changed on Sublayer from the layer '${n?.id}'`,{reason:h,sublayer:this,layer:n}))};A._getLayerDomain=function(b){return(b=this.fieldsIndex.get(b))?b.domain:null};m._createClass(ba,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"definitionExpression",set:function(b){this._setAndNotifyLayer("definitionExpression",b)}},{key:"effectiveScaleRange",get:function(){const {minScale:b,maxScale:h}=this;return{minScale:b,maxScale:h}}},{key:"fieldsIndex",
get:function(){return new q(this.fields||[])}},{key:"floorInfo",set:function(b){this._setAndNotifyLayer("floorInfo",b)}},{key:"id",get:function(){const b=this._get("id");return null==b?wa++:b},set:function(b){this._get("id")!==b&&(!1===this.layer?.capabilities?.exportMap?.supportsDynamicLayers?this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"):this._set("id",b))}},{key:"labelingInfo",set:function(b){this._setAndNotifyLayer("labelingInfo",b)}},
{key:"labelsVisible",set:function(b){this._setAndNotifyLayer("labelsVisible",b)}},{key:"layer",set:function(b){this._set("layer",b);this.sublayers&&this.sublayers.forEach(h=>h.layer=b)}},{key:"listMode",set:function(b){this._set("listMode",b)}},{key:"minScale",set:function(b){this._setAndNotifyLayer("minScale",b)}},{key:"maxScale",set:function(b){this._setAndNotifyLayer("maxScale",b)}},{key:"opacity",set:function(b){this._setAndNotifyLayer("opacity",b)}},{key:"queryTask",get:function(){if(!this.layer)return null;
const {spatialReference:b}=this.layer,h="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:n,fieldsIndex:J}=this,Q=t("featurelayer-pbf")&&n?.query.supportsFormatPBF;return new R({url:this.url,pbfSupported:Q,fieldsIndex:J,gdbVersion:h,sourceSpatialReference:b,queryAttachmentsSupported:n?.operations?.supportsQueryAttachments??!1})}},{key:"renderer",set:function(b){if(b)for(const h of b.getSymbols())if(Y.isSymbol3D(h)){c.getLogger(this).warn("Sublayer renderer should use 2D symbols");
break}this._setAndNotifyLayer("renderer",b)}},{key:"source",get:function(){return this._get("source")||new ea.MapLayerSource({mapLayerId:this.id})},set:function(b){this._setAndNotifyLayer("source",b)}},{key:"sublayers",set:function(b){this._handleSublayersChange(b,this._get("sublayers"));this._set("sublayers",b)}},{key:"url",get:function(){const b=this.layer?.parsedUrl??this._lastParsedUrl;var h=this.source;if(!b)return null;this._lastParsedUrl=b;if("map-layer"===h?.type)return`${b.path}/${h.mapLayerId}`;
h={layer:JSON.stringify({source:this.source})};return`${b.path}/dynamicLayer?${l.objectToQuery(h)}`},set:function(b){this._overrideIfSome("url",b)}},{key:"visible",set:function(b){this._setAndNotifyLayer("visible",b)}}]);return ba}(I.HandleOwnerMixin(a.MultiOriginJSONMixin(G.IdentifiableMixin(e))));g.test={isMapImageLayerOverridePolicy:U=>U===fa||U===pa,isTileImageLayerOverridePolicy:U=>U===qa};d.__decorate([k.property({readOnly:!0})],g.prototype,"capabilities",void 0);d.__decorate([D.reader("service",
"capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],g.prototype,"readCapabilities",null);d.__decorate([k.property()],g.prototype,"defaultPopupTemplate",null);d.__decorate([k.property({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:pa}}})],g.prototype,"definitionExpression",null);d.__decorate([k.property({readOnly:!0})],g.prototype,"effectiveScaleRange",null);d.__decorate([k.property({type:[Z],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],
g.prototype,"fields",void 0);d.__decorate([k.property({readOnly:!0})],g.prototype,"fieldsIndex",null);d.__decorate([k.property({type:X,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:pa},origins:{"web-scene":{read:!1,write:!1}}}})],g.prototype,"floorInfo",null);d.__decorate([k.property({type:va,json:{read:{source:"layerDefinition.extent"}}})],g.prototype,"fullExtent",void 0);d.__decorate([k.property({type:na.featureGeometryTypeKebabDictionary.apiValues,
json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:na.featureGeometryTypeKebabDictionary.read}}}}})],g.prototype,"geometryType",void 0);d.__decorate([k.property({type:String})],g.prototype,"globalIdField",void 0);d.__decorate([D.reader("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],g.prototype,"readGlobalIdFieldFromService",null);d.__decorate([k.property({type:O.Integer,json:{write:{ignoreOrigin:!0}}})],g.prototype,"id",null);d.__decorate([k.property({value:null,
type:[K],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:fa}}})],g.prototype,"labelingInfo",null);d.__decorate([M.writer("labelingInfo")],g.prototype,"writeLabelingInfo",null);d.__decorate([k.property({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:fa}}})],g.prototype,"labelsVisible",null);d.__decorate([k.property({value:null})],
g.prototype,"layer",null);d.__decorate([k.property({type:String,json:{write:{overridePolicy:qa}}})],g.prototype,"layerItemId",void 0);d.__decorate([k.property({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:la}}})],g.prototype,"legendEnabled",void 0);d.__decorate([k.property({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],g.prototype,"listMode",
null);d.__decorate([k.property({type:Number,value:0,json:{write:{overridePolicy:fa}}})],g.prototype,"minScale",null);d.__decorate([D.reader("minScale",["minScale","layerDefinition.minScale"])],g.prototype,"readMinScale",null);d.__decorate([k.property({type:Number,value:0,json:{write:{overridePolicy:fa}}})],g.prototype,"maxScale",null);d.__decorate([D.reader("maxScale",["maxScale","layerDefinition.maxScale"])],g.prototype,"readMaxScale",null);d.__decorate([k.property({type:String})],g.prototype,"objectIdField",
void 0);d.__decorate([D.reader("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],g.prototype,"readObjectIdFieldFromService",null);d.__decorate([k.property({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:fa}}})],g.prototype,"opacity",null);d.__decorate([D.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],g.prototype,"readOpacity",null);d.__decorate([M.writer("opacity")],
g.prototype,"writeOpacity",null);d.__decorate([k.property({json:{type:O.Integer,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:fa}}})],g.prototype,"parent",void 0);d.__decorate([M.writer("parent")],g.prototype,"writeParent",null);d.__decorate([k.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(U,ba){return!ba.disablePopup}},write:{target:"disablePopup",overridePolicy:la,writer(U,ba,A){ba[A]=!U}}}})],g.prototype,"popupEnabled",void 0);d.__decorate([k.property({type:p,
json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:la}}})],g.prototype,"popupTemplate",void 0);d.__decorate([k.property({readOnly:!0})],g.prototype,"queryTask",null);d.__decorate([k.property({types:v.rendererTypes,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:fa},origins:{"web-scene":{types:v.webSceneRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:fa}}}}})],g.prototype,"renderer",null);d.__decorate([k.property({types:{key:"type",
base:null,typeMap:{"data-layer":ka.DataLayerSource,"map-layer":ea.MapLayerSource}},cast(U){if(U){if("mapLayerId"in U)return O.ensureClass(ea.MapLayerSource,U);if("dataSource"in U)return O.ensureClass(ka.DataLayerSource,U)}return U},json:{name:"layerDefinition.source",write:{overridePolicy:fa}}})],g.prototype,"source",null);d.__decorate([k.property()],g.prototype,"sourceJSON",void 0);d.__decorate([k.property({value:null,json:{type:[O.Integer],write:{target:"subLayerIds",allowNull:!0,overridePolicy:fa}}})],
g.prototype,"sublayers",null);d.__decorate([w.cast("sublayers")],g.prototype,"castSublayers",null);d.__decorate([M.writer("sublayers")],g.prototype,"writeSublayers",null);d.__decorate([k.property({type:String,json:{name:"name",write:{overridePolicy:la}}})],g.prototype,"title",void 0);d.__decorate([k.property({type:String})],g.prototype,"typeIdField",void 0);d.__decorate([D.reader("typeIdField",["layerDefinition.typeIdField"])],g.prototype,"readTypeIdField",null);d.__decorate([k.property({type:[ha],
json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],g.prototype,"types",void 0);d.__decorate([k.property({type:String,json:{name:"layerUrl",write:{overridePolicy:qa}}})],g.prototype,"url",null);d.__decorate([k.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:fa}}})],g.prototype,"visible",null);d.__decorate([M.writer("visible")],g.prototype,"writeVisible",null);return g=ma=d.__decorate([T.subclass("esri.layers.support.Sublayer")],
g)})},"esri/layers/support/sublayerUtils":function(){define(["exports","../../core/accessorSupport/PropertyOrigin"],function(u,m){function d(g,p){if(!g||!g.length||null==p)return!0;p=p.slice().reverse().flatten(({sublayers:C})=>C&&C.toArray().reverse()).map(C=>C.id).toArray();if(g.length>p.length)return!1;let r=0;const x=p.length;for(const {id:C}of g){for(;r<x&&p[r]!==C;)r++;if(r>=x)return!1}return!0}u.isExportDynamic=function(g,p,r){return g.some(x=>{const C=x.source;return!(!C||"map-layer"===C.type&&
C.mapLayerId===x.id&&(null==C.gdbVersion||C.gdbVersion===r))||x.originIdOf("renderer")>m.OriginId.SERVICE||x.originIdOf("labelingInfo")>m.OriginId.SERVICE||x.originIdOf("opacity")>m.OriginId.SERVICE||x.originIdOf("labelsVisible")>m.OriginId.SERVICE})?!0:!d(g,p)};u.isSublayerOverhaul=function(g){return!!g&&g.some(p=>null!=p.minScale||p.layerDefinition&&null!=p.layerDefinition.minScale)};u.shouldWriteSublayerStructure=function(g,p,r){return p.flatten(({sublayers:x})=>x).length!==g.length||g.some(x=>
x.originIdOf("minScale")>r||x.originIdOf("maxScale")>r||x.originIdOf("renderer")>r||x.originIdOf("labelingInfo")>r||x.originIdOf("opacity")>r||x.originIdOf("labelsVisible")>r||x.originIdOf("source")>r)?!0:!d(g,p)};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageBitmapUtils":function(){define(["exports","../../core/Error","../../core/promiseUtils"],function(u,m,d){u.createBitmap=async function(g,p,r){let x;try{x=await createImageBitmap(g)}catch(C){throw new m("request:server",
`Unable to load ${p}`,{url:p,error:C});}d.throwIfAborted(r);return x};u.createTileBitmap=async function(g,p,r,x,C){let y;try{y=await createImageBitmap(g)}catch(N){throw new m("request:server",`Unable to load tile ${p}/${r}/${x}`,{error:N,level:p,row:r,col:x});}d.throwIfAborted(C);return y};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Error ../core/HandleOwner ../core/loadAll ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISMapService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/SublayersOwner ./support/arcgisLayerUrl ./support/commonProperties ./support/imageBitmapUtils ./support/Sublayer".split(" "),function(u,
m,d,g,p,r,x,C,y,N,z,L,E,V,v,W,Y,P,B,I,t,G,F,e,c,a,f,l,k,w,D,T,M){var O;const H="Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Elevation/World_Hillshade_Dark Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" ");
p=O=function(R){function ha(...q){q=R.call(this,...q)||this;q.listMode="show";q.isReference=null;q.operationalLayerType="ArcGISTiledMapServiceLayer";q.resampling=!0;q.sourceJSON=null;q.spatialReference=null;q.path=null;q.sublayers=null;q.type="tile";q.url=null;return q}u._inherits(ha,R);var Z=ha.prototype;Z.normalizeCtorArgs=function(q,K){return"string"===typeof q?{url:q,...K}:q};Z.load=function(q){const K=null!=q?q.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},
q).catch(C.throwIfAbortError).then(()=>this._fetchService(K)));return Promise.resolve(this)};Z.readSpatialReference=function(q,K){return(q=q||K.tileInfo&&K.tileInfo.spatialReference)&&Y.fromJSON(q)};Z.writeSublayers=function(q,K,S,X){if(this.loaded&&q){q=q.slice().reverse().flatten(({sublayers:ea})=>ea&&ea.toArray().reverse()).toArray();var aa=[],ka={writeSublayerStructure:!1,...X};q.forEach(ea=>{ea=ea.write({},ka);aa.push(ea)});aa.some(ea=>1<Object.keys(ea).length)&&(K.layers=aa)}};Z.castTileServers=
function(q){return Array.isArray(q)?q.map(K=>y.urlToObject(K).path):null};Z.fetchTile=function(q,K,S,X={}){({signal:X}=X);q=this.getTileUrl(q,K,S);return d(q,{responseType:"image",signal:X,query:{...this.refreshParameters}}).then(aa=>aa.data)};Z.fetchImageBitmapTile=async function(q,K,S,X={}){const {signal:aa}=X;if(this.fetchTile!==O.prototype.fetchTile)return X=await this.fetchTile(q,K,S,X),T.createTileBitmap(X,q,K,S,aa);X=this.getTileUrl(q,K,S);({data:X}=await d(X,{responseType:"blob",signal:aa,
query:{...this.refreshParameters}}));return T.createTileBitmap(X,q,K,S,aa)};Z.getTileUrl=function(q,K,S){const X=y.objectToQuery({...this.parsedUrl?.query,blankTile:!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile?!1:null,...this.customParameters,token:this.apiKey}),aa=this.tileServers;return`${aa&&aa.length?aa[K%aa.length]:this.parsedUrl?.path}/tile/${q}/${K}/${S}${X?"?"+X:""}`};Z.loadAll=function(){return r.loadAll(this,q=>{q(this.allSublayers)})};Z._fetchService=function(q){return(new Promise((K,
S)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new g("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");K({data:this.sourceJSON})}else{if(!this.parsedUrl)throw new g("tile-layer:undefined-url","layer's url is not defined");var X=w.parse(this.parsedUrl.path);if(null!=X&&"ImageServer"===X.serverType)throw new g("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");d(this.parsedUrl.path,
{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:q}).then(K,S)}})).then(K=>{let S=this.url;K.ssl&&(S=this.url=S.replace(/^http:/i,"https:"));this.sourceJSON=K.data;this.read(K.data,{origin:"service",url:this.parsedUrl});if(10.1===this.version&&!w.isHostedAgolService(S))return this._fetchServerVersion(S,q).then(X=>{this.read({currentVersion:X})}).catch(()=>{})})};Z._fetchServerVersion=function(q,K){if(!w.isArcGISUrl(q))return Promise.reject();
q=q.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return d(q,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:K}).then(S=>{if(S.data&&S.data.currentVersion)return S.data.currentVersion;throw new g("tile-layer:version-not-available");})};Z._getMapName=function(q){return(q=q.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))?q[2]:void 0};Z._getDefaultAttribution=
function(q){if(null==q)return null;let K;q=q.toLowerCase();for(let S=0,X=H.length;S<X;S++)if(K=H[S],K.toLowerCase().includes(q))return y.makeAbsolute("//static.arcgis.com/attribution/"+K);return null};Z._getDefaultTileServers=function(q){if(null==q)return[];const K=-1!==q.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),S=-1!==q.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return K||S?[q,q.replace(K?/server\.arcgisonline/i:/services\.arcgisonline/i,K?"services.arcgisonline":"server.arcgisonline")]:
[]};u._createClass(ha,[{key:"attributionDataUrl",get:function(){const q=this.parsedUrl?.path.toLowerCase();return q?this._getDefaultAttribution(this._getMapName(q)):null}},{key:"tileServers",get:function(){return this._getDefaultTileServers(this.parsedUrl?.path)}},{key:"hasOverriddenFetchTile",get:function(){return!this.fetchTile[ca]}}]);return ha}(F.BlendLayer(l.ScaleRangeLayer(k.SublayersOwner(I.ArcGISCachedService(t.ArcGISMapService(c.OperationalLayer(a.PortalLayer(G.ArcGISService(x.MultiOriginJSONMixin(p.HandleOwnerMixin(f.RefreshableLayer(B.APIKeyMixin(e.CustomParametersMixin(P))))))))))))));
m.__decorate([N.property({readOnly:!0})],p.prototype,"attributionDataUrl",null);m.__decorate([N.property({type:["show","hide","hide-children"]})],p.prototype,"listMode",void 0);m.__decorate([N.property({json:{read:!0,write:!0}})],p.prototype,"blendMode",void 0);m.__decorate([N.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],p.prototype,"isReference",void 0);m.__decorate([N.property({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],p.prototype,"operationalLayerType",
void 0);m.__decorate([N.property({type:Boolean})],p.prototype,"resampling",void 0);m.__decorate([N.property()],p.prototype,"sourceJSON",void 0);m.__decorate([N.property({type:Y})],p.prototype,"spatialReference",void 0);m.__decorate([V.reader("spatialReference",["spatialReference","tileInfo"])],p.prototype,"readSpatialReference",null);m.__decorate([N.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],p.prototype,"path",void 0);m.__decorate([N.property({readOnly:!0})],
p.prototype,"sublayers",void 0);m.__decorate([W.writer("sublayers",{layers:{type:[M]}})],p.prototype,"writeSublayers",null);m.__decorate([N.property({json:{read:!1,write:!1}})],p.prototype,"popupEnabled",void 0);m.__decorate([N.property()],p.prototype,"tileServers",null);m.__decorate([z.cast("tileServers")],p.prototype,"castTileServers",null);m.__decorate([N.property({readOnly:!0,json:{read:!1}})],p.prototype,"type",void 0);m.__decorate([N.property(D.url)],p.prototype,"url",void 0);p=O=m.__decorate([v.subclass("esri.layers.TileLayer")],
p);const ca=Symbol("default-fetch-tile");p.prototype.fetchTile[ca]=!0;return p});