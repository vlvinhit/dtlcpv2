// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(l,f,ka,ca,R,ha,T,L){function h(K){return{ok:!0,value:K}}function m(K){return{ok:!1,error:K}}function k(K){return null!=K&&!0===K.ok?K.value:null}function H(K){return null!=K&&!1===K.ok?K.error:null}let A=function(K){function e(z,O){var C=K.call(this,
{})||this;C._result=null;C._abortHandle=null;C.abort=()=>{C._abortController=R.abortMaybe(C._abortController)};C.remove=C.abort;C._abortController=new AbortController;const {signal:u}=C._abortController;C.promise=z(u);C.promise.then(J=>{C._result=h(J);C._cleanup()},J=>{C._result=m(J);C._cleanup()});C._abortHandle=ha.onAbort(O,C.abort);return C}f._inherits(e,K);var n=e.prototype;n.normalizeCtorArgs=function(){return{}};n.destroy=function(){this.abort()};n._cleanup=function(){this._abortHandle=R.removeMaybe(this._abortHandle);
this._abortController=null};f._createClass(e,[{key:"value",get:function(){return k(this._result)}},{key:"error",get:function(){return H(this._result)}},{key:"finished",get:function(){return null!=this._result}}]);return e}(ca);ka.__decorate([T.property()],A.prototype,"value",null);ka.__decorate([T.property()],A.prototype,"error",null);ka.__decorate([T.property()],A.prototype,"finished",null);ka.__decorate([T.property()],A.prototype,"promise",void 0);ka.__decorate([T.property()],A.prototype,"_result",
void 0);A=ka.__decorate([L.subclass("esri.core.asyncUtils.ReactiveTask")],A);l.assertResult=function(K){if(!0===K.ok)return K.value;throw K.error;};l.createTask=function(K,e){return new A(K,e)};l.forEach=function(K,e,n){return ha.eachAlways(K.map((z,O)=>e.apply(n,[z,O])))};l.makeResultError=m;l.makeResultOk=h;l.map=async function(K,e,n){return(await ha.eachAlways(K.map((z,O)=>e.apply(n,[z,O])))).map(z=>z.value)};l.result=async function(K){if(null==K)return{ok:!1,error:Error("no promise provided")};
try{return h(await K)}catch(e){return m(e)}};l.resultError=H;l.resultOrAbort=async function(K){try{return h(await K)}catch(e){return ha.throwIfAbortError(e),m(e)}};l.resultValue=k;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(l,f,ka,ca,R,ha,T,L,h,m,k,H,A,K,e,n,z,O,C,u,J,Q,D,w,y,x){function B(){return!!hb&&n.isLoaded()}function E(S){null==b&&(b=Promise.all([n.load(),(new Promise((ia,X)=>l(["../chunks/geometryEngineBase"],ia,X))).then(ia=>ia.geometryEngineBase),new Promise((ia,X)=>l(["./geometryAdapters/hydrated"],ia,X))]));return b.then(([,ia,{hydratedAdapter:X}])=>{ha.throwIfAborted(S);jb=X;hb=ia.default;hb._enableProjection(n.pe);Ob.notify()})}function U(S,ia,X=null,oa=null){return Array.isArray(S)?0===S.length?
[]:Y(jb,S,S[0].spatialReference,ia,X,oa):Y(jb,[S],S.spatialReference,ia,X,oa)[0]}function Y(S,ia,X,oa,Da=null,Ba=null){if(null==X||null==oa)return ia;if(v(X,oa,Da))return ia.map(La=>Z(La,X,oa));if(null==Da){const La=D.cacheKey(X,oa);void 0!==fb[La]?Da=fb[La]:(Da=P(X,oa,void 0),null==Da&&(Da=new D),fb[La]=Da)}if(null==hb||null==S)throw new Jb;return null!=Ba?hb._project(S,ia,X,oa,Da,Ba):hb._project(S,ia,X,oa,Da)}function M(S,ia){if(!B())for(const X of S)if(null!=X&&!w.equals(X.spatialReference,ia)&&
w.isValid(X.spatialReference)&&w.isValid(ia)&&!v(X.spatialReference,ia))return L.trackAccess(Ob),{pending:E(),geometries:null};return{pending:null,geometries:S.map(X=>null==X?null:w.equals(X.spatialReference,ia)?X:w.isValid(X.spatialReference)&&w.isValid(ia)?r(X,ia):null)}}function P(S,ia,X=null){if(null==S||null==ia)return null;if(null==hb||null==jb)throw new Jb;S=hb._getTransformation(jb,S,ia,X,X?.spatialReference);return null!==S?D.fromGE(S):null}function r(S,ia){try{const X=U(S,ia);if(null==X)return null;
"xmin"in S&&"xmin"in X&&(X.zmin=S.zmin,X.zmax=S.zmax);const oa=x.getGeometryZScaler(X.type,S.spatialReference,ia);null!=oa&&oa(X);return X}catch(X){if(!(X instanceof Jb))throw X;return null}}function v(S,ia,X){return X?!1:w.equals(S,ia)?!0:w.isValid(S)&&w.isValid(ia)&&!!Wa(S,ia,Zb)}function Z(S,ia,X){return S?"x"in S?ja(S,ia,new z,X,0):"xmin"in S?Ga(S,ia,new K,X,0):"rings"in S?Ca(S,ia,new O,X,0):"paths"in S?xa(S,ia,new C,X,0):"points"in S?ta(S,ia,new e,X,0):null:null}function ja(S,ia,X,oa,Da){Ya[0]=
S.x;Ya[1]=S.y;const Ba=S.z;Ya[2]=void 0!==Ba?Ba:Da;if(!Sa(Ya,ia,0,Ya,oa,0,1))return null;X.x=Ya[0];X.y=Ya[1];X.spatialReference=oa;void 0===Ba?(X.z=void 0,X.hasZ=!1):(X.z=Ya[2],X.hasZ=!0);void 0===S.m?(X.m=void 0,X.hasM=!1):(X.m=S.m,X.hasM=!0);return X}function ta(S,ia,X,oa,Da){const {points:Ba,hasZ:La,hasM:Ua}=S;S=[];const nb=Ba.length,ob=[];for(var mb of Ba)ob.push(mb[0],mb[1],La?mb[2]:Da);if(!Sa(ob,ia,0,ob,oa,0,nb))return null;for(ia=0;ia<nb;++ia){Da=3*ia;mb=ob[Da];const wb=ob[Da+1];La&&Ua?S.push([mb,
wb,ob[Da+2],Ba[ia][3]]):La?S.push([mb,wb,ob[Da+2]]):Ua?S.push([mb,wb,Ba[ia][2]]):S.push([mb,wb])}X.points=S;X.spatialReference=oa;X.hasZ=La;X.hasM=Ua;return X}function xa(S,ia,X,oa,Da){const {paths:Ba,hasZ:La,hasM:Ua}=S;S=[];if(!Va(Ba,La??!1,Ua??!1,ia,S,oa,Da))return null;X.paths=S;X.spatialReference=oa;X.hasZ=La;X.hasM=Ua;return X}function Ca(S,ia,X,oa,Da){const {rings:Ba,hasZ:La,hasM:Ua}=S;S=[];if(!Va(Ba,La??!1,Ua??!1,ia,S,oa,Da))return null;X.rings=S;X.spatialReference=oa;X.hasZ=La;X.hasM=Ua;return X}
function Ga(S,ia,X,oa,Da){const {xmin:Ba,ymin:La,xmax:Ua,ymax:nb,hasZ:ob,hasM:mb}=S;if(!Ha(Ba,La,ob?S.zmin:Da,ia,Ya,oa))return null;X.xmin=Ya[0];X.ymin=Ya[1];ob&&(X.zmin=Ya[2]);if(!Ha(Ua,nb,ob?S.zmax:Da,ia,Ya,oa))return null;X.xmax=Ya[0];X.ymax=Ya[1];ob&&(X.zmax=Ya[2]);mb&&(X.mmin=S.mmin,X.mmax=S.mmax);X.spatialReference=oa;return X}function Ha(S,ia,X,oa,Da,Ba){ib[0]=S;ib[1]=ia;ib[2]=X;return Sa(ib,oa,0,Da,Ba,0,1)}function Fa(S,ia,X,oa){if(null==ia||null==oa||2>S.length)return!1;2===S.length&&(ib[0]=
S[0],ib[1]=S[1],ib[2]=0,S=ib);return Sa(S,ia,0,X,oa,0,1)}function Oa(S,ia,X){if(null==ia)return!1;ia=db(ia,Sb);ia=yb[ia][la.WGS84_COMPARABLE_LON_LAT];if(null==ia)return!1;ia(S,0,ib,0);X!==ib&&(X[0]=ib[0],X[1]=ib[1],2<X.length&&(X[2]=ib[2]));return!0}function Sa(S,ia,X,oa,Da,Ba,La=1){ia=Wa(ia,Da,Zb);if(null==ia)return!1;if(ia===c){if(S===oa&&X===Ba)return!0;La=X+3*La;for(let Ua=X,nb=Ba;Ua<La;Ua++,nb++)oa[nb]=S[Ua];return!0}La=X+3*La;for(let Ua=X,nb=Ba;Ua<La;Ua+=3,nb+=3)ia(S,Ua,oa,nb);return!0}function Va(S,
ia,X,oa,Da,Ba,La=0){const Ua=[];for(const nb of S)for(const ob of nb)Ua.push(ob[0],ob[1],ia?ob[2]:La);if(!Sa(Ua,oa,0,Ua,Ba,0,Ua.length/3))return!1;oa=0;Da.length=0;for(const nb of S){S=[];for(const ob of nb)ia&&X?S.push([Ua[oa++],Ua[oa++],Ua[oa++],ob[3]]):ia?S.push([Ua[oa++],Ua[oa++],Ua[oa++]]):(X?S.push([Ua[oa++],Ua[oa++],ob[2]]):S.push([Ua[oa++],Ua[oa++]]),oa++);Da.push(S)}return!0}function eb(S,ia,X,oa){ia=oa+ia;if(ia<oa/2||X>ia)return Number.MAX_VALUE;S=Math.abs(Db*S)+Math.asin(X/ia);return S>=
Math.PI/2?Number.MAX_VALUE:X/Math.cos(S)}function kb(S,ia,X){const oa=Math.sin(S);S=Math.cos(S);const Da=Math.sin(ia);ia=Math.cos(ia);X[0]=-oa;X[4]=-Da*S;X[8]=ia*S;X[12]=0;X[1]=S;X[5]=-Da*oa;X[9]=ia*oa;X[13]=0;X[2]=0;X[6]=ia;X[10]=Da;X[14]=0;X[3]=0;X[7]=0;X[11]=0;X[15]=1;return X}function lb(S,ia,X){kb(S,ia,X);m.transpose(X,X);return X}function db(S,ia){if(!S)return la.UNKNOWN;if(ia.spatialReference===S)return ia.spatialReferenceId;ia.spatialReference=S;"metersPerUnit"in ia&&(ia.metersPerUnit=T.getMetersPerUnitForSR(S,
1));return S.wkt===A.SphericalECEFSpatialReferenceLike.wkt?ia.spatialReferenceId=la.SPHERICAL_ECEF:w.isWGS84(S)?ia.spatialReferenceId=la.WGS84:w.isWebMercator(S)?ia.spatialReferenceId=la.WEB_MERCATOR:w.isPlateCarree(S)?ia.spatialReferenceId=la.PLATE_CARREE:S.wkt===A.WGS84ECEFSpatialReferenceLike.wkt?ia.spatialReferenceId=la.WGS84_ECEF:S.wkid===y.SupportedGCSWkids.CGCS2000?ia.spatialReferenceId=la.CGCS2000:S.wkt===A.SphericalPCPFMarsLike.wkt?ia.spatialReferenceId=la.SPHERICAL_MARS_PCPF:S.wkt===A.SphericalPCPFMoonLike.wkt?
ia.spatialReferenceId=la.SPHERICAL_MOON_PCPF:w.isMars(S)?ia.spatialReferenceId=la.GCSMARS2000:w.isMoon(S)?ia.spatialReferenceId=la.GCSMOON2000:ia.spatialReferenceId=la.UNKNOWN}function c(S,ia,X,oa){S!==X&&(X[oa++]=S[ia++],X[oa++]=S[ia++],X[oa]=S[ia])}function q(S,ia,X,oa){X[oa++]=Pb*(S[ia++]/J.earth.radius);X[oa++]=Pb*(Math.PI/2-2*Math.atan(Math.exp(-S[ia++]/J.earth.radius)));X[oa]=S[ia]}function ea(S,ia,X,oa){q(S,ia,X,oa);sa(X,oa,X,oa)}function F(S,ia,X,oa){q(S,ia,X,oa);Pa(X,oa,X,oa)}function ba(S,
ia,X,oa,Da){var Ba=.4999999*Math.PI;Ba=R.clamp(Db*S[ia+1],-Ba,Ba);Ba=Math.sin(Ba);X[oa++]=Db*S[ia]*Da.radius;X[oa++]=Da.halfSemiMajorAxis*Math.log((1+Ba)/(1-Ba));X[oa]=S[ia+2]}function p(S,ia,X,oa){ba(S,ia,X,oa,J.earth)}function I(S,ia,X,oa){X[oa]=S[ia]*gc;X[oa+1]=S[ia+1]*gc;X[oa+2]=S[ia+2]}function V(S,ia,X,oa){X[oa]=S[ia]*Tb;X[oa+1]=S[ia+1]*Tb;X[oa+2]=S[ia+2]}function W(S,ia,X,oa){q(S,ia,X,oa);I(X,oa,X,oa)}function fa(S,ia,X,oa,Da){Da+=S[ia+2];const Ba=Db*S[ia+1];S=Db*S[ia];ia=Math.cos(Ba);X[oa++]=
Math.cos(S)*ia*Da;X[oa++]=Math.sin(S)*ia*Da;X[oa]=Math.sin(Ba)*Da}function na(S,ia,X,oa){fa(S,ia,X,oa,J.moon.radius)}function pa(S,ia,X,oa){fa(S,ia,X,oa,J.mars.radius)}function sa(S,ia,X,oa){fa(S,ia,X,oa,J.earth.radius)}function va(S,ia,X,oa,Da){var Ba=S[ia];const La=S[ia+1];ia=S[ia+2];S=Math.sqrt(Ba*Ba+La*La+ia*ia);ia=R.asinClamped(ia/(0===S?1:S));Ba=Math.atan2(La,Ba);X[oa++]=Pb*Ba;X[oa++]=Pb*ia;X[oa]=S-Da}function Ea(S,ia,X,oa){va(S,ia,X,oa,J.moon.radius)}function Aa(S,ia,X,oa){va(S,ia,X,oa,J.mars.radius)}
function za(S,ia,X,oa){va(S,ia,X,oa,J.earth.radius)}function Ra(S,ia,X,oa){za(S,ia,X,oa);p(X,oa,X,oa)}function Ma(S,ia,X,oa){za(S,ia,X,oa);Pa(X,oa,X,oa)}function Pa(S,ia,X,oa){var Da=J.earth;const Ba=Db*S[ia];var La=Db*S[ia+1];S=S[ia+2];ia=Math.sin(La);La=Math.cos(La);const Ua=Da.radius/Math.sqrt(1-Da.eccentricitySquared*ia*ia);X[oa++]=(Ua+S)*La*Math.cos(Ba);X[oa++]=(Ua+S)*La*Math.sin(Ba);X[oa++]=(Ua*(1-Da.eccentricitySquared)+S)*ia}function Qa(S,ia,X,oa){var Da=Q.earthEllipsoidConstants,Ba=S[ia],
La=S[ia+1];S=S[ia+2];let Ua;ia=Math.abs(S);var nb=Ba*Ba+La*La;var ob=Math.sqrt(nb);var mb=nb+S*S;var wb=Math.sqrt(mb);Ba=Math.atan2(La,Ba);var Gb=S*S/mb;mb=nb/mb;La=Da.a2/wb;nb=Da.a3-Da.a4/wb;.3<mb?(Gb=ia/wb*(1+mb*(Da.a1+La+Gb*nb)/wb),wb=Math.asin(Gb),La=Gb*Gb,mb=Math.sqrt(1-La)):(mb=ob/wb*(1-Gb*(Da.a5-La-mb*nb)/wb),wb=Math.acos(mb),La=1-mb*mb,Gb=Math.sqrt(La));Ua=1-J.earth.eccentricitySquared*La;La=J.earth.radius/Math.sqrt(Ua);Da=Da.a6*La;La=ob-La*mb;nb=ia-Da*Gb;ia=mb*La+Gb*nb;ob=mb*nb-Gb*La;Da=
ob/(Da/Ua+ia);wb+=Da;0>S&&(wb=-wb);X[oa++]=Pb*Ba;X[oa++]=Pb*wb;X[oa]=ia+ob*Da/2}function Ka(S,ia,X,oa){Qa(S,ia,X,oa);sa(X,oa,X,oa)}function Ta(S,ia,X,oa){Qa(S,ia,X,oa);p(X,oa,X,oa)}function Wa(S,ia,X=ub()){return null==S||null==ia?null:ua(S,ia,X).projector}function ua(S,ia,X){if(null==S||null==ia||X.source.spatialReference===S&&X.dest.spatialReference===ia)return X;const oa=db(S,X.source),Da=db(ia,X.dest);oa===la.UNKNOWN&&Da===la.UNKNOWN?w.equals(S,ia)?X.projector=c:X.projector=null:X.projector=yb[oa][Da];
return X}function ub(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:c}}let hb=null,jb=null,b=null,fb={};const Ob=new h.SimpleObservable;let Jb=function(S){function ia(){return S.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ka._inherits(ia,S);return ka._createClass(ia)}(ca);var la;(function(S){S[S.UNKNOWN=0]="UNKNOWN";S[S.SPHERICAL_ECEF=
1]="SPHERICAL_ECEF";S[S.WGS84=2]="WGS84";S[S.WEB_MERCATOR=3]="WEB_MERCATOR";S[S.WGS84_ECEF=4]="WGS84_ECEF";S[S.CGCS2000=5]="CGCS2000";S[S.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";S[S.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";S[S.GCSMARS2000=8]="GCSMARS2000";S[S.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";S[S.GCSMOON2000=10]="GCSMOON2000";S[S.LON_LAT=11]="LON_LAT";S[S.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const gc=J.earth.radius*Math.PI/180,Tb=180/(J.earth.radius*Math.PI),
yb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:c,[la.SPHERICAL_ECEF]:sa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:p,[la.PLATE_CARREE]:I,[la.WGS84]:c,[la.WGS84_ECEF]:Pa},[la.CGCS2000]:{[la.CGCS2000]:c,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:c,[la.SPHERICAL_ECEF]:sa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,
[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:I,[la.WGS84]:null,[la.WGS84_ECEF]:Pa},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:c,[la.GCSMOON2000]:null,[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:pa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:c,[la.LON_LAT]:c,
[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:na,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:q,[la.WGS84_COMPARABLE_LON_LAT]:q,[la.SPHERICAL_ECEF]:ea,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:c,[la.PLATE_CARREE]:W,[la.WGS84]:q,
[la.WGS84_ECEF]:F},[la.WGS84_ECEF]:{[la.CGCS2000]:Qa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Qa,[la.WGS84_COMPARABLE_LON_LAT]:Qa,[la.SPHERICAL_ECEF]:Ka,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Ta,[la.PLATE_CARREE]:function(S,ia,X,oa){Qa(S,ia,X,oa);I(X,oa,X,oa)},[la.WGS84]:Qa,[la.WGS84_ECEF]:c},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:za,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:za,[la.WGS84_COMPARABLE_LON_LAT]:za,[la.SPHERICAL_ECEF]:c,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Ra,[la.PLATE_CARREE]:function(S,ia,X,oa){za(S,ia,X,oa);I(X,oa,X,oa)},[la.WGS84]:za,[la.WGS84_ECEF]:Ma},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Aa,[la.GCSMOON2000]:null,[la.LON_LAT]:Aa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:c,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},
[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ea,[la.LON_LAT]:Ea,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:c,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,
[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:c,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:c,[la.GCSMARS2000]:c,[la.GCSMOON2000]:c,[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:c,[la.SPHERICAL_ECEF]:sa,[la.SPHERICAL_MARS_PCPF]:pa,[la.SPHERICAL_MOON_PCPF]:na,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:p,[la.PLATE_CARREE]:I,[la.WGS84]:c,[la.WGS84_ECEF]:Pa},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,
[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:c,[la.SPHERICAL_ECEF]:sa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:I,[la.WGS84]:c,[la.WGS84_ECEF]:Pa},[la.PLATE_CARREE]:{[la.CGCS2000]:V,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:V,[la.WGS84_COMPARABLE_LON_LAT]:V,[la.SPHERICAL_ECEF]:function(S,ia,X,oa){V(S,ia,X,oa);sa(X,oa,X,oa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(S,
ia,X,oa){V(S,ia,X,oa);p(X,oa,X,oa)},[la.PLATE_CARREE]:c,[la.WGS84]:V,[la.WGS84_ECEF]:function(S,ia,X,oa){V(S,ia,X,oa);Pa(X,oa,X,oa)}}},Sb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Ub={spatialReference:null,spatialReferenceId:la.UNKNOWN},Zb=ub(),hc=ub(),Db=R.deg2rad(1),Pb=R.rad2deg(1),ib=H.create(),Fb=H.create(),Qb=H.create(),Ya=H.create(),Hb=H.create();f.canProjectToWGS84ComparableLonLat=function(S){if(null==S)return!1;S=db(S,Sb);return!!yb[S][la.WGS84_COMPARABLE_LON_LAT]};f.canProjectWithoutEngine=
v;f.computeENUToSphericalPCPFLocalRotation=kb;f.computeSphericalPCPFToENULocalRotation=lb;f.computeTranslationToOriginAndRotation=function(S,ia,X,oa){if(null==S||null==oa)return!1;var Da=db(S,Sb),Ba=db(oa,Ub);if(Da===Ba&&Ba!==la.SPHERICAL_ECEF&&Ba!==la.SPHERICAL_MARS_PCPF&&Ba!==la.SPHERICAL_MOON_PCPF&&(Da!==la.UNKNOWN||w.equals(S,oa)))return m.fromTranslation(X,ia),!0;if(Ba===la.SPHERICAL_ECEF||Ba===la.SPHERICAL_MARS_PCPF||Ba===la.SPHERICAL_MOON_PCPF){Da=yb[Da][la.LON_LAT];Ba=yb[la.LON_LAT][Ba];if(null==
Da||null==Ba)return!1;Da(ia,0,Fb,0);Ba(Fb,0,Qb,0);kb(Db*Fb[0],Db*Fb[1],X);X[12]=Qb[0];X[13]=Qb[1];X[14]=Qb[2];return!0}if((Ba===la.WEB_MERCATOR||Ba===la.PLATE_CARREE)&&(Da===la.WGS84||Da===la.CGCS2000&&Ba===la.PLATE_CARREE||Da===la.SPHERICAL_ECEF||Da===la.WEB_MERCATOR)){S=yb[Da][la.LON_LAT];Ba=yb[la.LON_LAT][Ba];if(null==S||null==Ba)return!1;S(ia,0,Fb,0);Ba(Fb,0,Qb,0);Da===la.SPHERICAL_ECEF?lb(Db*Fb[0],Db*Fb[1],X):m.identity(X);X[12]=Qb[0];X[13]=Qb[1];X[14]=Qb[2];return!0}return!1};f.getProjectorName=
function(S,ia){switch(Wa(S,ia,Zb)){case c:return"copy3";case sa:return"wgs84ToSphericalECEF";case p:return"wgs84ToWebMercator";case I:return"wgs84ToPlateCarree";case Pa:return"wgs84ToWGS84ECEF";case q:return"webMercatorToWGS84";case ea:return"webMercatorToSphericalECEF";case F:return"webMercatorToWGS84ECEF";case W:return"webMercatorToPlateCarree";case Qa:return"wgs84ECEFToWGS84";case Ka:return"wgs84ECEFToSphericalECEF";case Ta:return"wgs84ECEFToWebMercator";case za:return"sphericalECEFToWGS84";case Ra:return"sphericalECEFToWebMercator";
case Aa:return"sphericalMarsPCPFToMars2000";case Ea:return"sphericalMoonPCPFToMoon2000";case Ma:return"sphericalECEFToWGS84ECEF";case pa:return"mars2000ToSphericalPCPF";case na:return"moon2000ToSphericalPCPF";default:return null}};f.getTransformation=P;f.getTransformations=function(S,ia,X=null){if(null==hb||null==jb)throw new Jb;S=hb._getTransformationBySuitability(jb,S,ia,X,X?.spatialReference);if(null!==S){ia=[];for(const oa of S)ia.push(D.fromGE(oa));return ia}return[]};f.initializeProjection=
async function(S,ia,X,oa){if(B())return ha.waitTick(oa);if(Array.isArray(S))for(const {source:Da,dest:Ba,geographicTransformation:La}of S){if(!v(Da,Ba,La))return E(oa)}else if(!v(S,ia,X))return E(oa);return ha.waitTick(oa)};f.isLoaded=B;f.load=E;f.localLinearScaleFactors=function(S,ia,X,oa){if(null==ia||null==oa)return!1;const Da=db(ia,Sb);var Ba=db(oa,Ub);if(Da===Ba&&Da!==la.UNKNOWN||w.equals(ia,oa))return X[0]=1,X[1]=1,X[2]=1,!0;if(Da===la.SPHERICAL_ECEF){ia=k.length(S);S=ia/Math.sqrt(S[0]*S[0]+
S[1]*S[1]);ia/=J.earth.radius;if(Ba===la.WEB_MERCATOR)return X[0]=S*ia,X[1]=S*ia,X[2]=1,!0;if(Ba===la.WGS84||Ba===la.CGCS2000)return Ba=Tb,X[0]=Ba*S*ia,X[1]=Ba*ia,X[2]=1,!0}else if(Da===la.PLATE_CARREE){if(Ba===la.WGS84||Ba===la.CGCS2000)return X[0]=Tb,X[1]=Tb,X[2]=1,!0;if(Ba===la.WEB_MERCATOR)return Ba=S[1]/J.earth.radius,X[0]=1,X[1]=1/Math.cos(Ba),X[2]=1,!0}return!1};f.lonLatToSphericalPCPF=function(S,ia,X,oa){const Da=Math.cos(X);S[0]=Math.cos(ia)*Da*oa;S[1]=Math.sin(ia)*Da*oa;S[2]=Math.sin(X)*
oa};f.lonLatToWebMercatorComparable=ba;f.project=U;f.projectBoundingRect=function(S,ia,X,oa){if(null==S)return!1;if(w.equals(ia,oa))return u.copy(X,S),!0;ib[0]=S[0];ib[1]=S[1];ib[2]=0;if(!Sa(ib,ia,0,ib,oa,0,1))return!1;X[0]=ib[0];X[1]=ib[1];ib[0]=S[2];ib[1]=S[3];ib[2]=0;if(!Sa(ib,ia,0,ib,oa,0,1))return!1;X[2]=ib[0];X[3]=ib[1];return!0};f.projectBoundingSphere=function(S,ia,X,oa){if(null==ia||null==oa)return!1;ia=ua(ia,oa,hc);if(ia.projector===c)return X[0]=S[0],X[1]=S[1],X[2]=S[2],X[3]=S[3],!0;if(null==
ia.projector)return!1;const {source:Da,dest:Ba}=ia;if(Ba.spatialReferenceId===la.WEB_MERCATOR){ia=yb[Da.spatialReferenceId][la.WGS84];if(null==ia)return!1;ia(S,0,Fb,0);p(Fb,0,X,0);X[3]=eb(Fb[1],S[2],S[3],J.earth.radius);return!0}if(Da.spatialReferenceId!==la.WGS84&&Da.spatialReferenceId!==la.CGCS2000||Ba.spatialReferenceId!==la.PLATE_CARREE)ia.projector(S,0,X,0),X[3]=S[3]*(Da.metersPerUnit??1)/(Ba.metersPerUnit??1);else{oa=yb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let La=S[3];null!=yb[Da.spatialReferenceId][la.SPHERICAL_ECEF]&&
null!=oa&&(La=eb(S[1],S[2],S[3],J.earth.radius));ia.projector(S,0,X,0);X[3]=La}return!0};f.projectBuffer=Sa;f.projectDirection=function(S,ia,X,oa,Da){k.copy(Ya,S);k.add(Hb,S,ia);Fa(Ya,X,Ya,Da);Fa(Hb,X,Hb,Da);k.subtract(oa,Hb,Ya);k.normalize(oa,oa)};f.projectExtent=function(S,ia,X=ia.spatialReference,oa=0){return null!=S.spatialReference&&null!=X&&null!=Ga(S,S.spatialReference,ia,X,oa)};f.projectMany=Y;f.projectMultipoint=function(S,ia,X=ia.spatialReference,oa=0){return null!=S.spatialReference&&null!=
X&&null!=ta(S,S.spatialReference,ia,X,oa)};f.projectOrLoad=function(S,ia){S=M([S],ia);return null!=S.pending?{pending:S.pending,geometry:null}:null!=S.geometries?{pending:null,geometry:S.geometries[0]}:{pending:null,geometry:null}};f.projectOrLoadMany=M;f.projectPoint=function(S,ia,X=ia.spatialReference,oa=0){return null!=X&&null!=S.spatialReference&&null!=ja(S,S.spatialReference,ia,X,oa)};f.projectPointToVector=function(S,ia,X,oa=0){Ya[0]=S.x;Ya[1]=S.y;const Da=S.z;Ya[2]=void 0!==Da?Da:oa;return Sa(Ya,
S.spatialReference,0,ia,X,0,1)};f.projectPointToWGS84ComparableLonLat=function(S,ia){Ya[0]=S.x;Ya[1]=S.y;const X=S.z;Ya[2]=void 0!==X?X:0;return Oa(Ya,S.spatialReference,ia)};f.projectPolygon=function(S,ia,X=ia.spatialReference,oa=0){return null!=S.spatialReference&&null!=X&&null!=Ca(S,S.spatialReference,ia,X,oa)};f.projectPolygonToWGS84ComparableLonLat=function({hasZ:S,spatialReference:ia,rings:X},oa,Da=0){ia=db(ia,Sb);ia=yb[ia][la.WGS84_COMPARABLE_LON_LAT];if(null==ia)return!1;S=S?Ba=>Ba:Ba=>k.set(Ya,
Ba[0],Ba[1],Da);for(const Ba of X){X=[];for(const La of Ba){const Ua=[0,0,Da];ia(S(La),0,Ua,0);X.push(Ua)}oa.push(X)}return!0};f.projectPolyline=function(S,ia,X=ia.spatialReference,oa=0){return null!=S.spatialReference&&null!=X&&null!=xa(S,S.spatialReference,ia,X,oa)};f.projectPolylineToWGS84ComparableLonLat=function({hasZ:S,spatialReference:ia,paths:X},oa,Da=0){ia=db(ia,Sb);ia=yb[ia][la.WGS84_COMPARABLE_LON_LAT];if(null==ia)return!1;S=S?Ba=>Ba:Ba=>k.set(Ya,Ba[0],Ba[1],Da);for(const Ba of X){X=[];
for(const La of Ba){const Ua=[0,0,Da];ia(S(La),0,Ua,0);X.push(Ua)}oa.push(X)}return!0};f.projectVectorToDehydratedPoint=function(S,ia,X){return Sa(S,ia,0,Ya,X.spatialReference,0,1)?(X.x=Ya[0],X.y=Ya[1],X.z=Ya[2],X):null};f.projectVectorToPoint=function(S,ia,X){if(null==ia||null==X)return null;const oa=new z({spatialReference:X});return Sa(S,ia,0,Ya,X,0,1)?(oa.x=Ya[0],oa.y=Ya[1],oa.z=Ya[2],oa):null};f.projectVectorToVector=Fa;f.projectVectorToWGS84ComparableLonLat=function(S,ia,X){return Oa(S,ia,X)};
f.projectWithoutEngine=Z;f.projectXYZToVector=Ha;f.sphericalPCPFtoLonLatElevation=va;f.test={get loadPromise(){return b}};f.tryProjectWithZConversion=r;f.unload=function(){b=jb=hb=null;fb={}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(l,f,ka){ka=function(ca){function R(){return ca.apply(this,arguments)||this}f._inherits(R,
ca);R.prototype.notify=function(){var ha=this._observers;if(ha&&0<ha.length){ha=ha.slice();for(const T of ha)T.onInvalidated(),T.onCommitted()}};return f._createClass(R)}(ka.ObservableBase);l.SimpleObservable=ka;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(l,f,ka){function ca(c,q){c[0]=q[0];c[1]=q[1];c[2]=q[2];c[3]=q[3];c[4]=q[4];c[5]=q[5];c[6]=q[6];c[7]=q[7];c[8]=q[8];c[9]=q[9];c[10]=q[10];c[11]=q[11];
c[12]=q[12];c[13]=q[13];c[14]=q[14];c[15]=q[15];return c}function R(c,q,ea,F,ba,p,I,V,W,fa,na,pa,sa,va,Ea,Aa,za){c[0]=q;c[1]=ea;c[2]=F;c[3]=ba;c[4]=p;c[5]=I;c[6]=V;c[7]=W;c[8]=fa;c[9]=na;c[10]=pa;c[11]=sa;c[12]=va;c[13]=Ea;c[14]=Aa;c[15]=za;return c}function ha(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function T(c,q){if(c===q){const ea=q[1],F=q[2],ba=q[3],p=q[6],I=q[7],V=q[11];c[1]=q[4];c[2]=q[8];c[3]=q[12];c[4]=
ea;c[6]=q[9];c[7]=q[13];c[8]=F;c[9]=p;c[11]=q[14];c[12]=ba;c[13]=I;c[14]=V}else c[0]=q[0],c[1]=q[4],c[2]=q[8],c[3]=q[12],c[4]=q[1],c[5]=q[5],c[6]=q[9],c[7]=q[13],c[8]=q[2],c[9]=q[6],c[10]=q[10],c[11]=q[14],c[12]=q[3],c[13]=q[7],c[14]=q[11],c[15]=q[15];return c}function L(c,q){h(c,q)||ha(c);return c}function h(c,q){const ea=q[0],F=q[1],ba=q[2],p=q[3],I=q[4],V=q[5],W=q[6],fa=q[7],na=q[8],pa=q[9],sa=q[10],va=q[11],Ea=q[12],Aa=q[13],za=q[14];q=q[15];const Ra=ea*V-F*I,Ma=ea*W-ba*I,Pa=ea*fa-p*I,Qa=F*W-
ba*V,Ka=F*fa-p*V,Ta=ba*fa-p*W,Wa=na*Aa-pa*Ea,ua=na*za-sa*Ea,ub=na*q-va*Ea,hb=pa*za-sa*Aa,jb=pa*q-va*Aa,b=sa*q-va*za;let fb=Ra*b-Ma*jb+Pa*hb+Qa*ub-Ka*ua+Ta*Wa;if(!fb)return null;fb=1/fb;c[0]=(V*b-W*jb+fa*hb)*fb;c[1]=(ba*jb-F*b-p*hb)*fb;c[2]=(Aa*Ta-za*Ka+q*Qa)*fb;c[3]=(sa*Ka-pa*Ta-va*Qa)*fb;c[4]=(W*ub-I*b-fa*ua)*fb;c[5]=(ea*b-ba*ub+p*ua)*fb;c[6]=(za*Pa-Ea*Ta-q*Ma)*fb;c[7]=(na*Ta-sa*Pa+va*Ma)*fb;c[8]=(I*jb-V*ub+fa*Wa)*fb;c[9]=(F*ub-ea*jb-p*Wa)*fb;c[10]=(Ea*Ka-Aa*Pa+q*Ra)*fb;c[11]=(pa*Pa-na*Ka-va*Ra)*
fb;c[12]=(V*ua-I*hb-W*Wa)*fb;c[13]=(ea*hb-F*ua+ba*Wa)*fb;c[14]=(Aa*Ma-Ea*Qa-za*Ra)*fb;c[15]=(na*Qa-pa*Ma+sa*Ra)*fb;return c}function m(c,q){const ea=q[0],F=q[1],ba=q[2],p=q[3],I=q[4],V=q[5],W=q[6],fa=q[7],na=q[8],pa=q[9],sa=q[10],va=q[11],Ea=q[12],Aa=q[13],za=q[14];q=q[15];c[0]=V*(sa*q-va*za)-pa*(W*q-fa*za)+Aa*(W*va-fa*sa);c[1]=-(F*(sa*q-va*za)-pa*(ba*q-p*za)+Aa*(ba*va-p*sa));c[2]=F*(W*q-fa*za)-V*(ba*q-p*za)+Aa*(ba*fa-p*W);c[3]=-(F*(W*va-fa*sa)-V*(ba*va-p*sa)+pa*(ba*fa-p*W));c[4]=-(I*(sa*q-va*za)-
na*(W*q-fa*za)+Ea*(W*va-fa*sa));c[5]=ea*(sa*q-va*za)-na*(ba*q-p*za)+Ea*(ba*va-p*sa);c[6]=-(ea*(W*q-fa*za)-I*(ba*q-p*za)+Ea*(ba*fa-p*W));c[7]=ea*(W*va-fa*sa)-I*(ba*va-p*sa)+na*(ba*fa-p*W);c[8]=I*(pa*q-va*Aa)-na*(V*q-fa*Aa)+Ea*(V*va-fa*pa);c[9]=-(ea*(pa*q-va*Aa)-na*(F*q-p*Aa)+Ea*(F*va-p*pa));c[10]=ea*(V*q-fa*Aa)-I*(F*q-p*Aa)+Ea*(F*fa-p*V);c[11]=-(ea*(V*va-fa*pa)-I*(F*va-p*pa)+na*(F*fa-p*V));c[12]=-(I*(pa*za-sa*Aa)-na*(V*za-W*Aa)+Ea*(V*sa-W*pa));c[13]=ea*(pa*za-sa*Aa)-na*(F*za-ba*Aa)+Ea*(F*sa-ba*pa);
c[14]=-(ea*(V*za-W*Aa)-I*(F*za-ba*Aa)+Ea*(F*W-ba*V));c[15]=ea*(V*sa-W*pa)-I*(F*sa-ba*pa)+na*(F*W-ba*V);return c}function k(c){const q=c[0],ea=c[1],F=c[2],ba=c[3],p=c[4],I=c[5],V=c[6],W=c[7],fa=c[8],na=c[9],pa=c[10],sa=c[11],va=c[12],Ea=c[13],Aa=c[14];c=c[15];return(q*I-ea*p)*(pa*c-sa*Aa)-(q*V-F*p)*(na*c-sa*Ea)+(q*W-ba*p)*(na*Aa-pa*Ea)+(ea*V-F*I)*(fa*c-sa*va)-(ea*W-ba*I)*(fa*Aa-pa*va)+(F*W-ba*V)*(fa*Ea-na*va)}function H(c,q,ea){const F=q[0],ba=q[1],p=q[2],I=q[3],V=q[4],W=q[5],fa=q[6],na=q[7],pa=q[8],
sa=q[9],va=q[10],Ea=q[11],Aa=q[12],za=q[13],Ra=q[14];q=q[15];let Ma=ea[0],Pa=ea[1],Qa=ea[2],Ka=ea[3];c[0]=Ma*F+Pa*V+Qa*pa+Ka*Aa;c[1]=Ma*ba+Pa*W+Qa*sa+Ka*za;c[2]=Ma*p+Pa*fa+Qa*va+Ka*Ra;c[3]=Ma*I+Pa*na+Qa*Ea+Ka*q;Ma=ea[4];Pa=ea[5];Qa=ea[6];Ka=ea[7];c[4]=Ma*F+Pa*V+Qa*pa+Ka*Aa;c[5]=Ma*ba+Pa*W+Qa*sa+Ka*za;c[6]=Ma*p+Pa*fa+Qa*va+Ka*Ra;c[7]=Ma*I+Pa*na+Qa*Ea+Ka*q;Ma=ea[8];Pa=ea[9];Qa=ea[10];Ka=ea[11];c[8]=Ma*F+Pa*V+Qa*pa+Ka*Aa;c[9]=Ma*ba+Pa*W+Qa*sa+Ka*za;c[10]=Ma*p+Pa*fa+Qa*va+Ka*Ra;c[11]=Ma*I+Pa*na+Qa*Ea+
Ka*q;Ma=ea[12];Pa=ea[13];Qa=ea[14];Ka=ea[15];c[12]=Ma*F+Pa*V+Qa*pa+Ka*Aa;c[13]=Ma*ba+Pa*W+Qa*sa+Ka*za;c[14]=Ma*p+Pa*fa+Qa*va+Ka*Ra;c[15]=Ma*I+Pa*na+Qa*Ea+Ka*q;return c}function A(c,q,ea){const F=ea[0],ba=ea[1];ea=ea[2];if(q===c)c[12]=q[0]*F+q[4]*ba+q[8]*ea+q[12],c[13]=q[1]*F+q[5]*ba+q[9]*ea+q[13],c[14]=q[2]*F+q[6]*ba+q[10]*ea+q[14],c[15]=q[3]*F+q[7]*ba+q[11]*ea+q[15];else{const p=q[0],I=q[1],V=q[2],W=q[3],fa=q[4],na=q[5],pa=q[6],sa=q[7],va=q[8],Ea=q[9],Aa=q[10],za=q[11];c[0]=p;c[1]=I;c[2]=V;c[3]=
W;c[4]=fa;c[5]=na;c[6]=pa;c[7]=sa;c[8]=va;c[9]=Ea;c[10]=Aa;c[11]=za;c[12]=p*F+fa*ba+va*ea+q[12];c[13]=I*F+na*ba+Ea*ea+q[13];c[14]=V*F+pa*ba+Aa*ea+q[14];c[15]=W*F+sa*ba+za*ea+q[15]}return c}function K(c,q,ea){const F=ea[0],ba=ea[1];ea=ea[2];c[0]=q[0]*F;c[1]=q[1]*F;c[2]=q[2]*F;c[3]=q[3]*F;c[4]=q[4]*ba;c[5]=q[5]*ba;c[6]=q[6]*ba;c[7]=q[7]*ba;c[8]=q[8]*ea;c[9]=q[9]*ea;c[10]=q[10]*ea;c[11]=q[11]*ea;c[12]=q[12];c[13]=q[13];c[14]=q[14];c[15]=q[15];return c}function e(c,q,ea,F){let ba=F[0],p=F[1];F=F[2];let I=
Math.sqrt(ba*ba+p*p+F*F);var V=void 0,W=void 0;let fa=void 0,na=void 0,pa=void 0,sa=void 0,va=void 0,Ea=void 0,Aa=void 0,za=void 0,Ra=void 0,Ma=void 0,Pa=void 0,Qa=void 0,Ka=void 0,Ta=void 0,Wa=void 0,ua=void 0,ub=void 0,hb=void 0,jb=void 0,b=void 0;W=V=void 0;if(I<ka.getEpsilon())return null;I=1/I;ba*=I;p*=I;F*=I;V=Math.sin(ea);W=Math.cos(ea);fa=1-W;na=q[0];pa=q[1];sa=q[2];va=q[3];Ea=q[4];Aa=q[5];za=q[6];Ra=q[7];Ma=q[8];Pa=q[9];Qa=q[10];Ka=q[11];Ta=ba*ba*fa+W;Wa=p*ba*fa+F*V;ua=F*ba*fa-p*V;ub=ba*
p*fa-F*V;hb=p*p*fa+W;jb=F*p*fa+ba*V;b=ba*F*fa+p*V;V=p*F*fa-ba*V;W=F*F*fa+W;c[0]=na*Ta+Ea*Wa+Ma*ua;c[1]=pa*Ta+Aa*Wa+Pa*ua;c[2]=sa*Ta+za*Wa+Qa*ua;c[3]=va*Ta+Ra*Wa+Ka*ua;c[4]=na*ub+Ea*hb+Ma*jb;c[5]=pa*ub+Aa*hb+Pa*jb;c[6]=sa*ub+za*hb+Qa*jb;c[7]=va*ub+Ra*hb+Ka*jb;c[8]=na*b+Ea*V+Ma*W;c[9]=pa*b+Aa*V+Pa*W;c[10]=sa*b+za*V+Qa*W;c[11]=va*b+Ra*V+Ka*W;q!==c&&(c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);return c}function n(c,q,ea){const F=Math.sin(ea);ea=Math.cos(ea);const ba=q[4],p=q[5],I=q[6],V=q[7],W=q[8],
fa=q[9],na=q[10],pa=q[11];q!==c&&(c[0]=q[0],c[1]=q[1],c[2]=q[2],c[3]=q[3],c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);c[4]=ba*ea+W*F;c[5]=p*ea+fa*F;c[6]=I*ea+na*F;c[7]=V*ea+pa*F;c[8]=W*ea-ba*F;c[9]=fa*ea-p*F;c[10]=na*ea-I*F;c[11]=pa*ea-V*F;return c}function z(c,q,ea){const F=Math.sin(ea);ea=Math.cos(ea);const ba=q[0],p=q[1],I=q[2],V=q[3],W=q[8],fa=q[9],na=q[10],pa=q[11];q!==c&&(c[4]=q[4],c[5]=q[5],c[6]=q[6],c[7]=q[7],c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);c[0]=ba*ea-W*F;c[1]=p*ea-fa*
F;c[2]=I*ea-na*F;c[3]=V*ea-pa*F;c[8]=ba*F+W*ea;c[9]=p*F+fa*ea;c[10]=I*F+na*ea;c[11]=V*F+pa*ea;return c}function O(c,q,ea){const F=Math.sin(ea);ea=Math.cos(ea);const ba=q[0],p=q[1],I=q[2],V=q[3],W=q[4],fa=q[5],na=q[6],pa=q[7];q!==c&&(c[8]=q[8],c[9]=q[9],c[10]=q[10],c[11]=q[11],c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);c[0]=ba*ea+W*F;c[1]=p*ea+fa*F;c[2]=I*ea+na*F;c[3]=V*ea+pa*F;c[4]=W*ea-ba*F;c[5]=fa*ea-p*F;c[6]=na*ea-I*F;c[7]=pa*ea-V*F;return c}function C(c,q){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=
0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=q[0];c[13]=q[1];c[14]=q[2];c[15]=1;return c}function u(c,q){c[0]=q[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=q[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=q[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function J(c,q,ea){if(0===q)return ha(c);let F=ea[0],ba=ea[1];ea=ea[2];let p=Math.sqrt(F*F+ba*ba+ea*ea),I=void 0,V=void 0,W=void 0;if(p<ka.getEpsilon())return null;p=1/p;F*=p;ba*=p;ea*=p;I=Math.sin(q);V=Math.cos(q);W=1-V;c[0]=F*F*W+V;c[1]=ba*F*W+
ea*I;c[2]=ea*F*W-ba*I;c[3]=0;c[4]=F*ba*W-ea*I;c[5]=ba*ba*W+V;c[6]=ea*ba*W+F*I;c[7]=0;c[8]=F*ea*W+ba*I;c[9]=ba*ea*W-F*I;c[10]=ea*ea*W+V;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function Q(c,q){const ea=Math.sin(q);q=Math.cos(q);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=q;c[6]=ea;c[7]=0;c[8]=0;c[9]=-ea;c[10]=q;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function D(c,q){const ea=Math.sin(q);q=Math.cos(q);c[0]=q;c[1]=0;c[2]=-ea;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=ea;c[9]=0;c[10]=q;c[11]=
0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function w(c,q){const ea=Math.sin(q);q=Math.cos(q);c[0]=q;c[1]=ea;c[2]=0;c[3]=0;c[4]=-ea;c[5]=q;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function y(c,q,ea){var F=q[0],ba=q[1],p=q[2],I=q[3],V=F+F,W=ba+ba;const fa=p+p;q=F*V;const na=F*W;F*=fa;const pa=ba*W;ba*=fa;p*=fa;V*=I;W*=I;I*=fa;c[0]=1-(pa+p);c[1]=na+I;c[2]=F-W;c[3]=0;c[4]=na-I;c[5]=1-(q+p);c[6]=ba+V;c[7]=0;c[8]=F+W;c[9]=ba-V;c[10]=1-(q+pa);c[11]=0;c[12]=ea[0];
c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}function x(c,q){const ea=db,F=-q[0],ba=-q[1],p=-q[2],I=q[3],V=q[4],W=q[5],fa=q[6],na=q[7],pa=F*F+ba*ba+p*p+I*I;0<pa?(ea[0]=2*(V*I+na*F+W*p-fa*ba)/pa,ea[1]=2*(W*I+na*ba+fa*F-V*p)/pa,ea[2]=2*(fa*I+na*p+V*ba-W*F)/pa):(ea[0]=2*(V*I+na*F+W*p-fa*ba),ea[1]=2*(W*I+na*ba+fa*F-V*p),ea[2]=2*(fa*I+na*p+V*ba-W*F));y(c,q,ea);return c}function B(c,q){c[0]=q[12];c[1]=q[13];c[2]=q[14];return c}function E(c,q){const ea=q[0],F=q[1],ba=q[2],p=q[4],I=q[5],V=q[6],W=q[8],fa=q[9];
q=q[10];c[0]=Math.sqrt(ea*ea+F*F+ba*ba);c[1]=Math.sqrt(p*p+I*I+V*V);c[2]=Math.sqrt(W*W+fa*fa+q*q);return c}function U(c,q){const ea=q[0]+q[5]+q[10];let F=0;0<ea?(F=2*Math.sqrt(ea+1),c[3]=.25*F,c[0]=(q[6]-q[9])/F,c[1]=(q[8]-q[2])/F,c[2]=(q[1]-q[4])/F):q[0]>q[5]&&q[0]>q[10]?(F=2*Math.sqrt(1+q[0]-q[5]-q[10]),c[3]=(q[6]-q[9])/F,c[0]=.25*F,c[1]=(q[1]+q[4])/F,c[2]=(q[8]+q[2])/F):q[5]>q[10]?(F=2*Math.sqrt(1+q[5]-q[0]-q[10]),c[3]=(q[8]-q[2])/F,c[0]=(q[1]+q[4])/F,c[1]=.25*F,c[2]=(q[6]+q[9])/F):(F=2*Math.sqrt(1+
q[10]-q[0]-q[5]),c[3]=(q[1]-q[4])/F,c[0]=(q[8]+q[2])/F,c[1]=(q[6]+q[9])/F,c[2]=.25*F);return c}function Y(c,q,ea,F){var ba=q[0],p=q[1],I=q[2],V=q[3],W=ba+ba,fa=p+p,na=I+I;q=ba*W;const pa=ba*fa;ba*=na;const sa=p*fa;p*=na;I*=na;W*=V;fa*=V;V*=na;na=F[0];const va=F[1];F=F[2];c[0]=(1-(sa+I))*na;c[1]=(pa+V)*na;c[2]=(ba-fa)*na;c[3]=0;c[4]=(pa-V)*va;c[5]=(1-(q+I))*va;c[6]=(p+W)*va;c[7]=0;c[8]=(ba+fa)*F;c[9]=(p-W)*F;c[10]=(1-(q+sa))*F;c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}function M(c,
q,ea,F,ba){var p=q[0],I=q[1],V=q[2],W=q[3],fa=p+p,na=I+I,pa=V+V;q=p*fa;var sa=p*na,va=p*pa;p=I*na;I*=pa;var Ea=V*pa;V=W*fa;na*=W;const Aa=W*pa;var za=F[0],Ra=F[1];pa=F[2];F=ba[0];W=ba[1];ba=ba[2];fa=(1-(p+Ea))*za;const Ma=(sa+Aa)*za;za*=va-na;sa=(sa-Aa)*Ra;Ea=(1-(q+Ea))*Ra;Ra*=I+V;va=(va+na)*pa;I=(I-V)*pa;q=(1-(q+p))*pa;c[0]=fa;c[1]=Ma;c[2]=za;c[3]=0;c[4]=sa;c[5]=Ea;c[6]=Ra;c[7]=0;c[8]=va;c[9]=I;c[10]=q;c[11]=0;c[12]=ea[0]+F-(fa*F+sa*W+va*ba);c[13]=ea[1]+W-(Ma*F+Ea*W+I*ba);c[14]=ea[2]+ba-(za*F+Ra*
W+q*ba);c[15]=1;return c}function P(c,q){var ea=q[0],F=q[1],ba=q[2];q=q[3];var p=ea+ea,I=F+F;const V=ba+ba;ea*=p;const W=F*p;F*=I;const fa=ba*p,na=ba*I;ba*=V;p*=q;I*=q;q*=V;c[0]=1-F-ba;c[1]=W+q;c[2]=fa-I;c[3]=0;c[4]=W-q;c[5]=1-ea-ba;c[6]=na+p;c[7]=0;c[8]=fa+I;c[9]=na-p;c[10]=1-ea-F;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function r(c,q,ea,F,ba,p,I){const V=1/(ea-q),W=1/(ba-F),fa=1/(p-I);c[0]=2*p*V;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*p*W;c[6]=0;c[7]=0;c[8]=(ea+q)*V;c[9]=(ba+F)*W;c[10]=(I+p)*
fa;c[11]=-1;c[12]=0;c[13]=0;c[14]=I*p*2*fa;c[15]=0;return c}function v(c,q,ea,F,ba){q=1/Math.tan(q/2);let p=void 0;c[0]=q/ea;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=q;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=ba&&Infinity!==ba?(p=1/(F-ba),c[10]=(ba+F)*p,c[14]=2*ba*F*p):(c[10]=-1,c[14]=-2*F);return c}function Z(c,q,ea,F){const ba=Math.tan(q.upDegrees*Math.PI/180),p=Math.tan(q.downDegrees*Math.PI/180),I=Math.tan(q.leftDegrees*Math.PI/180);q=Math.tan(q.rightDegrees*Math.PI/180);const V=
2/(I+q),W=2/(ba+p);c[0]=V;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=W;c[6]=0;c[7]=0;c[8]=-((I-q)*V*.5);c[9]=(ba-p)*W*.5;c[10]=F/(ea-F);c[11]=-1;c[12]=0;c[13]=0;c[14]=F*ea/(ea-F);c[15]=0;return c}function ja(c,q,ea,F,ba,p,I){const V=1/(q-ea),W=1/(F-ba),fa=1/(p-I);c[0]=-2*V;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*W;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*fa;c[11]=0;c[12]=(q+ea)*V;c[13]=(ba+F)*W;c[14]=(I+p)*fa;c[15]=1;return c}function ta(c,q,ea,F){const ba=q[0],p=q[1];q=q[2];let I=ba-ea[0],V=p-ea[1];ea=q-ea[2];var W=
ka.getEpsilon();if(Math.abs(I)<W&&Math.abs(V)<W&&Math.abs(ea)<W)ha(c);else{var fa=1/Math.sqrt(I*I+V*V+ea*ea);I*=fa;V*=fa;ea*=fa;fa=F[0];var na=F[1];W=F[2];F=na*ea-W*V;W=W*I-fa*ea;na=fa*V-na*I;(fa=Math.sqrt(F*F+W*W+na*na))?(fa=1/fa,F*=fa,W*=fa,na*=fa):na=W=F=0;var pa=V*na-ea*W,sa=ea*F-I*na,va=I*W-V*F;(fa=Math.sqrt(pa*pa+sa*sa+va*va))?(fa=1/fa,pa*=fa,sa*=fa,va*=fa):va=sa=pa=0;c[0]=F;c[1]=pa;c[2]=I;c[3]=0;c[4]=W;c[5]=sa;c[6]=V;c[7]=0;c[8]=na;c[9]=va;c[10]=ea;c[11]=0;c[12]=-(F*ba+W*p+na*q);c[13]=-(pa*
ba+sa*p+va*q);c[14]=-(I*ba+V*p+ea*q);c[15]=1}}function xa(c,q,ea,F){const ba=q[0],p=q[1];q=q[2];var I=F[0];const V=F[1];var W=F[2];F=ba-ea[0];let fa=p-ea[1];ea=q-ea[2];let na=F*F+fa*fa+ea*ea;0<na&&(na=1/Math.sqrt(na),F*=na,fa*=na,ea*=na);let pa=V*ea-W*fa;W=W*F-I*ea;I=I*fa-V*F;na=pa*pa+W*W+I*I;0<na&&(na=1/Math.sqrt(na),pa*=na,W*=na,I*=na);c[0]=pa;c[1]=W;c[2]=I;c[3]=0;c[4]=fa*I-ea*W;c[5]=ea*pa-F*I;c[6]=F*W-fa*pa;c[7]=0;c[8]=F;c[9]=fa;c[10]=ea;c[11]=0;c[12]=ba;c[13]=p;c[14]=q;c[15]=1;return c}function Ca(c){return"mat4("+
c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Ga(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function Ha(c,q,ea){c[0]=q[0]+ea[0];c[1]=q[1]+ea[1];c[2]=q[2]+ea[2];c[3]=q[3]+ea[3];c[4]=q[4]+ea[4];c[5]=q[5]+ea[5];c[6]=q[6]+ea[6];c[7]=q[7]+ea[7];c[8]=q[8]+ea[8];c[9]=
q[9]+ea[9];c[10]=q[10]+ea[10];c[11]=q[11]+ea[11];c[12]=q[12]+ea[12];c[13]=q[13]+ea[13];c[14]=q[14]+ea[14];c[15]=q[15]+ea[15];return c}function Fa(c,q,ea){c[0]=q[0]-ea[0];c[1]=q[1]-ea[1];c[2]=q[2]-ea[2];c[3]=q[3]-ea[3];c[4]=q[4]-ea[4];c[5]=q[5]-ea[5];c[6]=q[6]-ea[6];c[7]=q[7]-ea[7];c[8]=q[8]-ea[8];c[9]=q[9]-ea[9];c[10]=q[10]-ea[10];c[11]=q[11]-ea[11];c[12]=q[12]-ea[12];c[13]=q[13]-ea[13];c[14]=q[14]-ea[14];c[15]=q[15]-ea[15];return c}function Oa(c,q,ea){c[0]=q[0]*ea;c[1]=q[1]*ea;c[2]=q[2]*ea;c[3]=
q[3]*ea;c[4]=q[4]*ea;c[5]=q[5]*ea;c[6]=q[6]*ea;c[7]=q[7]*ea;c[8]=q[8]*ea;c[9]=q[9]*ea;c[10]=q[10]*ea;c[11]=q[11]*ea;c[12]=q[12]*ea;c[13]=q[13]*ea;c[14]=q[14]*ea;c[15]=q[15]*ea;return c}function Sa(c,q,ea,F){c[0]=q[0]+ea[0]*F;c[1]=q[1]+ea[1]*F;c[2]=q[2]+ea[2]*F;c[3]=q[3]+ea[3]*F;c[4]=q[4]+ea[4]*F;c[5]=q[5]+ea[5]*F;c[6]=q[6]+ea[6]*F;c[7]=q[7]+ea[7]*F;c[8]=q[8]+ea[8]*F;c[9]=q[9]+ea[9]*F;c[10]=q[10]+ea[10]*F;c[11]=q[11]+ea[11]*F;c[12]=q[12]+ea[12]*F;c[13]=q[13]+ea[13]*F;c[14]=q[14]+ea[14]*F;c[15]=q[15]+
ea[15]*F;return c}function Va(c,q){return c[0]===q[0]&&c[1]===q[1]&&c[2]===q[2]&&c[3]===q[3]&&c[4]===q[4]&&c[5]===q[5]&&c[6]===q[6]&&c[7]===q[7]&&c[8]===q[8]&&c[9]===q[9]&&c[10]===q[10]&&c[11]===q[11]&&c[12]===q[12]&&c[13]===q[13]&&c[14]===q[14]&&c[15]===q[15]}function eb(c,q){if(c===q)return!0;const ea=c[0],F=c[1],ba=c[2],p=c[3],I=c[4],V=c[5],W=c[6],fa=c[7],na=c[8],pa=c[9],sa=c[10],va=c[11],Ea=c[12],Aa=c[13],za=c[14];c=c[15];const Ra=q[0],Ma=q[1],Pa=q[2],Qa=q[3],Ka=q[4],Ta=q[5],Wa=q[6],ua=q[7],ub=
q[8],hb=q[9],jb=q[10],b=q[11],fb=q[12],Ob=q[13],Jb=q[14];q=q[15];const la=ka.getEpsilon();return Math.abs(ea-Ra)<=la*Math.max(1,Math.abs(ea),Math.abs(Ra))&&Math.abs(F-Ma)<=la*Math.max(1,Math.abs(F),Math.abs(Ma))&&Math.abs(ba-Pa)<=la*Math.max(1,Math.abs(ba),Math.abs(Pa))&&Math.abs(p-Qa)<=la*Math.max(1,Math.abs(p),Math.abs(Qa))&&Math.abs(I-Ka)<=la*Math.max(1,Math.abs(I),Math.abs(Ka))&&Math.abs(V-Ta)<=la*Math.max(1,Math.abs(V),Math.abs(Ta))&&Math.abs(W-Wa)<=la*Math.max(1,Math.abs(W),Math.abs(Wa))&&Math.abs(fa-
ua)<=la*Math.max(1,Math.abs(fa),Math.abs(ua))&&Math.abs(na-ub)<=la*Math.max(1,Math.abs(na),Math.abs(ub))&&Math.abs(pa-hb)<=la*Math.max(1,Math.abs(pa),Math.abs(hb))&&Math.abs(sa-jb)<=la*Math.max(1,Math.abs(sa),Math.abs(jb))&&Math.abs(va-b)<=la*Math.max(1,Math.abs(va),Math.abs(b))&&Math.abs(Ea-fb)<=la*Math.max(1,Math.abs(Ea),Math.abs(fb))&&Math.abs(Aa-Ob)<=la*Math.max(1,Math.abs(Aa),Math.abs(Ob))&&Math.abs(za-Jb)<=la*Math.max(1,Math.abs(za),Math.abs(Jb))&&Math.abs(c-q)<=la*Math.max(1,Math.abs(c),Math.abs(q))}
function kb(c){const q=ka.getEpsilon(),ea=c[0],F=c[1],ba=c[2],p=c[4],I=c[5],V=c[6],W=c[8],fa=c[9];c=c[10];return Math.abs(1-(ea*ea+p*p+W*W))<=q&&Math.abs(1-(F*F+I*I+fa*fa))<=q&&Math.abs(1-(ba*ba+V*V+c*c))<=q}function lb(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&1===c[10]}const db=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:Ha,adjoint:m,copy:ca,determinant:k,equals:eb,exactEquals:Va,frob:Ga,fromQuat:P,fromQuat2:x,fromRotation:J,
fromRotationTranslation:y,fromRotationTranslationScale:Y,fromRotationTranslationScaleOrigin:M,fromScaling:u,fromTranslation:C,fromXRotation:Q,fromYRotation:D,fromZRotation:w,frustum:r,getRotation:U,getScaling:E,getTranslation:B,hasIdentityRotation:lb,identity:ha,invert:h,invertOrIdentity:L,isOrthoNormal:kb,lookAt:ta,mul:H,multiply:H,multiplyScalar:Oa,multiplyScalarAndAdd:Sa,ortho:ja,perspective:v,perspectiveFromFieldOfView:Z,rotate:e,rotateX:n,rotateY:z,rotateZ:O,scale:K,set:R,str:Ca,sub:Fa,subtract:Fa,
targetTo:xa,translate:A,transpose:T},Symbol.toStringTag,{value:"Module"}));l.add=Ha;l.adjoint=m;l.copy=ca;l.determinant=k;l.equals=eb;l.exactEquals=Va;l.frob=Ga;l.fromQuat=P;l.fromQuat2=x;l.fromRotation=J;l.fromRotationTranslation=y;l.fromRotationTranslationScale=Y;l.fromRotationTranslationScaleOrigin=M;l.fromScaling=u;l.fromTranslation=C;l.fromXRotation=Q;l.fromYRotation=D;l.fromZRotation=w;l.frustum=r;l.getRotation=U;l.getScaling=E;l.getTranslation=B;l.hasIdentityRotation=lb;l.identity=ha;l.invert=
h;l.invertOrIdentity=L;l.isOrthoNormal=kb;l.lookAt=ta;l.mat4=f;l.mul=H;l.multiply=H;l.multiplyScalar=Oa;l.multiplyScalarAndAdd=Sa;l.ortho=ja;l.perspective=v;l.perspectiveFromFieldOfView=Z;l.rotate=e;l.rotateX=n;l.rotateY=z;l.rotateZ=O;l.scale=K;l.set=R;l.str=Ca;l.sub=Fa;l.subtract=Fa;l.targetTo=xa;l.translate=A;l.transpose=T})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(l,f,ka,ca,R){function ha(){return!!f._pe}function T(){return!!R("esri-wasm")}
function L(){return K?K:K=(new Promise((n,z)=>l(["./pe-wasm"],n,z))).then(n=>n.peWasm).then(({default:n})=>n({locateFile:z=>ca.getAssetUrl(`esri/geometry/support/${z}`)})).then(n=>{h(n)})}function h(n){function z(u,J,Q){u[J]=Q(u[J])}f._pe=n;f.PeDefs.init();f.PeGTlistExtended.init();f.PeNotationMgrs.init();f.PeNotationUtm.init();f.PePCSInfo.init();f.PeGCSExtent=function(u){function J(){return u.apply(this,arguments)||this}ka._inherits(J,u);J.prototype.destroy=function(){f._pe.destroy(this)};return ka._createClass(J)}(f._pe.PeGCSExtent);
n=[f._pe.PeDatum,f._pe.PeGeogcs,f._pe.PeGeogtran,f._pe.PeObject,f._pe.PeParameter,f._pe.PePrimem,f._pe.PeProjcs,f._pe.PeSpheroid,f._pe.PeUnit];for(var O of n)z(O.prototype,"getName",u=>function(){return u.call(this,Array(f.PeDefs.PE_NAME_MAX))});for(const u of[f._pe.PeGeogtran,f._pe.PeProjcs])z(u.prototype,"getParameters",J=>function(){const Q=Array(f.PeDefs.PE_PARM_MAX);let D=J.call(this);for(let w=0;w<Q.length;w++){const y=f._pe.getValue(D,"*");Q[w]=y?f._pe.wrapPointer(y,f._pe.PeParameter):null;
D+=Int32Array.BYTES_PER_ELEMENT}return Q});z(f._pe.PeHorizon.prototype,"getCoord",u=>function(){const J=this.getSize();if(!J)return null;const Q=[],D=u.call(this);A(Q,J,D);return Q});z(f._pe.PeGTlistExtendedEntry.prototype,"getEntries",u=>{const J=f._pe._pe_getPeGTlistExtendedGTsSize();return function(){let Q=null;var D=u.call(this);if(!f._pe.compare(D,f._pe.NULL)){Q=[D];const w=this.getSteps();if(1<w){D=f._pe.getPointer(D);for(let y=1;y<w;y++)Q.push(f._pe.wrapPointer(D+J*y,f._pe.PeGTlistExtendedGTs))}}return Q}});
const C=f._pe._pe_getPeHorizonSize();O=u=>function(){let J=this._cache;J||(this._cache=J=new Map);if(J.has(u))return J.get(u);let Q=null;var D=u.call(this);if(!f._pe.compare(D,f._pe.NULL)){Q=[D];const w=D.getNump();if(1<w){D=f._pe.getPointer(D);for(let y=1;y<w;y++)Q.push(f._pe.wrapPointer(D+C*y,f._pe.PeHorizon))}}J.set(u,Q);return Q};z(f._pe.PeProjcs.prototype,"horizonGcsGenerate",O);z(f._pe.PeProjcs.prototype,"horizonPcsGenerate",O);f._pe.PeObject.prototype.toString=function(u=f.PeDefs.PE_STR_OPTS_NONE){f._pe.ensureCache.prepare();
const J=f._pe.getPointer(this),Q=f._pe.ensureInt8(Array(f.PeDefs.PE_BUFFER_MAX));return f._pe.UTF8ToString(f._pe._pe_object_to_string_ext(J,u,Q))}}function m(n){if(n){var z=f._pe.getClass(n);z&&(z=f._pe.getCache(z))&&(n=f._pe.getPointer(n))&&delete z[n]}}function k(n,z){const O=[];z=Array(z);for(let C=0;C<n;C++)O.push(f._pe.ensureInt8(z));return O}function H(n){let z;Array.isArray(n[0])?(z=[],n.forEach(O=>{z.push(O[0],O[1])})):z=n;return z}function A(n,z,O,C=!1){if(C)for(C=0;C<2*z;C++)n[C]=f._pe.getValue(O+
C*Float64Array.BYTES_PER_ELEMENT,"double");else{C=0===n.length;for(let u=0;u<z;u++)C&&(n[u]=Array(2)),n[u][0]=f._pe.getValue(O,"double"),n[u][1]=f._pe.getValue(O+Float64Array.BYTES_PER_ELEMENT,"double"),O+=2*Float64Array.BYTES_PER_ELEMENT}}let K;f._pe=null;f.PeCSTransformations=void 0;(function(n){function z(u,J,Q){f._pe.ensureCache.prepare();var D=H(Q);const w=Q===D;D=f._pe.ensureFloat64(D);(u=f._pe._pe_geog_to_proj(f._pe.getPointer(u),J,D))&&A(Q,J,D,w);return u}function O(u,J,Q){return C(u,J,Q,
0)}function C(u,J,Q,D){f._pe.ensureCache.prepare();var w=H(Q);const y=Q===w;w=f._pe.ensureFloat64(w);(u=f._pe._pe_proj_to_geog_center(f._pe.getPointer(u),J,w,D))&&A(Q,J,w,y);return u}n.geogToProj=z;n.projGeog=function(u,J,Q,D){switch(D){case f.PeDefs.PE_TRANSFORM_P_TO_G:return O(u,J,Q);case f.PeDefs.PE_TRANSFORM_G_TO_P:return z(u,J,Q)}return 0};n.projToGeog=O;n.projToGeogCenter=C})(f.PeCSTransformations||(f.PeCSTransformations={}));f.PeDefs=void 0;(function(n){n.init=function(){n.PE_BUFFER_MAX=f._pe.PeDefs.prototype.PE_BUFFER_MAX;
n.PE_NAME_MAX=f._pe.PeDefs.prototype.PE_NAME_MAX;n.PE_MGRS_MAX=f._pe.PeDefs.prototype.PE_MGRS_MAX;n.PE_USNG_MAX=f._pe.PeDefs.prototype.PE_USNG_MAX;n.PE_DD_MAX=f._pe.PeDefs.prototype.PE_DD_MAX;n.PE_DDM_MAX=f._pe.PeDefs.prototype.PE_DDM_MAX;n.PE_DMS_MAX=f._pe.PeDefs.prototype.PE_DMS_MAX;n.PE_UTM_MAX=f._pe.PeDefs.prototype.PE_UTM_MAX;n.PE_PARM_MAX=f._pe.PeDefs.prototype.PE_PARM_MAX;n.PE_TYPE_NONE=f._pe.PeDefs.prototype.PE_TYPE_NONE;n.PE_TYPE_GEOGCS=f._pe.PeDefs.prototype.PE_TYPE_GEOGCS;n.PE_TYPE_PROJCS=
f._pe.PeDefs.prototype.PE_TYPE_PROJCS;n.PE_TYPE_GEOGTRAN=f._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;n.PE_TYPE_COORDSYS=f._pe.PeDefs.prototype.PE_TYPE_COORDSYS;n.PE_TYPE_UNIT=f._pe.PeDefs.prototype.PE_TYPE_UNIT;n.PE_TYPE_LINUNIT=f._pe.PeDefs.prototype.PE_TYPE_LINUNIT;n.PE_STR_OPTS_NONE=f._pe.PeDefs.prototype.PE_STR_OPTS_NONE;n.PE_STR_AUTH_NONE=f._pe.PeDefs.prototype.PE_STR_AUTH_NONE;n.PE_STR_AUTH_TOP=f._pe.PeDefs.prototype.PE_STR_AUTH_TOP;n.PE_STR_NAME_CANON=f._pe.PeDefs.prototype.PE_STR_NAME_CANON;n.PE_PARM_X0=
f._pe.PeDefs.prototype.PE_PARM_X0;n.PE_PARM_ND=f._pe.PeDefs.prototype.PE_PARM_ND;n.PE_TRANSFORM_1_TO_2=f._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;n.PE_TRANSFORM_2_TO_1=f._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;n.PE_TRANSFORM_P_TO_G=f._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;n.PE_TRANSFORM_G_TO_P=f._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;n.PE_HORIZON_RECT=f._pe.PeDefs.prototype.PE_HORIZON_RECT;n.PE_HORIZON_POLY=f._pe.PeDefs.prototype.PE_HORIZON_POLY;n.PE_HORIZON_LINE=f._pe.PeDefs.prototype.PE_HORIZON_LINE;
n.PE_HORIZON_DELTA=f._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(f.PeDefs||(f.PeDefs={}));f.PeFactory=void 0;(function(n){function z(J,Q){let D=null,w=O[J];w||(w={},O[J]=w);w.hasOwnProperty(String(Q))?D=w[Q]:(J=f._pe.PeFactory.prototype.factoryByType(J,Q),f._pe.compare(J,f._pe.NULL)||(D=J,w[Q]=D));return D=u(D)}const O={},C={},u=J=>{if(J){const Q=J.getType();switch(Q){case f.PeDefs.PE_TYPE_GEOGCS:J=f._pe.castObject(J,f._pe.PeGeogcs);break;case f.PeDefs.PE_TYPE_PROJCS:J=f._pe.castObject(J,f._pe.PeProjcs);
break;case f.PeDefs.PE_TYPE_GEOGTRAN:J=f._pe.castObject(J,f._pe.PeGeogtran);break;default:Q&f.PeDefs.PE_TYPE_UNIT&&(J=f._pe.castObject(J,f._pe.PeUnit))}}return J};n.initialize=function(){f._pe.PeFactory.prototype.initialize(null)};n.coordsys=function(J){return z(f.PeDefs.PE_TYPE_COORDSYS,J)};n.factoryByType=z;n.fromString=function(J,Q){let D=null,w=C[J];w||(w={},C[J]=w);w.hasOwnProperty(Q)?D=w[Q]:(J=f._pe.PeFactory.prototype.fromString(J,Q),f._pe.compare(J,f._pe.NULL)||(D=J,w[Q]=D));return D=u(D)};
n.geogcs=function(J){return z(f.PeDefs.PE_TYPE_GEOGCS,J)};n.geogtran=function(J){return z(f.PeDefs.PE_TYPE_GEOGTRAN,J)};n.getCode=function(J){return f._pe.PeFactory.prototype.getCode(J)};n.projcs=function(J){return z(f.PeDefs.PE_TYPE_PROJCS,J)};n.unit=function(J){return z(f.PeDefs.PE_TYPE_UNIT,J)}})(f.PeFactory||(f.PeFactory={}));f.PeGCSExtent=null;f.PeGTlistExtended=void 0;(function(n){let z;n.init=function(){n.PE_GTLIST_OPTS_COMMON=f._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;z=f._pe._pe_getPeGTlistExtendedEntrySize()};
n.getGTlist=function(O,C,u,J,Q,D){let w=null;const y=new f._pe.PeInteger(D);try{const x=f._pe.PeGTlistExtended.prototype.getGTlist(O,C,u,J,Q,y);if(D=y.val)if(w=[x],1<D){const B=f._pe.getPointer(x);for(O=1;O<D;O++)w.push(f._pe.wrapPointer(B+z*O,f._pe.PeGTlistExtendedEntry))}}finally{f._pe.destroy(y)}return w}})(f.PeGTlistExtended||(f.PeGTlistExtended={}));f.PeGTlistExtendedEntry=void 0;(function(n){n.destroy=function(z){if(z&&z.length){for(const O of z)m(O),O.getEntries().forEach(C=>{m(C);C=C.getGeogtran();
m(C);C.getParameters().forEach(m);[C.getGeogcs1(),C.getGeogcs2()].forEach(u=>{m(u);const J=u.getDatum();m(J);m(J.getSpheroid());m(u.getPrimem());m(u.getUnit())})});f._pe.PeGTlistExtendedEntry.prototype.Delete(z[0])}}})(f.PeGTlistExtendedEntry||(f.PeGTlistExtendedEntry={}));f.PeGTTransformations=void 0;(function(n){n.geogToGeog=function(z,O,C,u,J){f._pe.ensureCache.prepare();var Q=H(C);const D=C===Q;Q=f._pe.ensureFloat64(Q);let w=0;u&&(w=f._pe.ensureFloat64(u));(z=f._pe._pe_geog_to_geog(f._pe.getPointer(z),
O,Q,w,J))&&A(C,O,Q,D);return z}})(f.PeGTTransformations||(f.PeGTTransformations={}));f.PeNotationDms=void 0;(function(n){const z=(C,u,J,Q,D,w)=>{f._pe.ensureCache.prepare();switch(C){case "dd":var y=f._pe._pe_geog_to_dd;var x=f.PeDefs.PE_DD_MAX;break;case "ddm":y=f._pe._pe_geog_to_ddm;x=f.PeDefs.PE_DDM_MAX;break;case "dms":y=f._pe._pe_geog_to_dms,x=f.PeDefs.PE_DMS_MAX}C=0;u&&(C=f._pe.getPointer(u));u=H(Q);u=f._pe.ensureFloat64(u);x=k(J,x);Q=f._pe.ensureInt32(x);if(D=y(C,J,u,D,Q))for(y=0;y<J;y++)w[y]=
f._pe.UTF8ToString(x[y]);return D},O=(C,u,J,Q,D)=>{f._pe.ensureCache.prepare();switch(C){case "dd":var w=f._pe._pe_dd_to_geog;break;case "ddm":w=f._pe._pe_ddm_to_geog;break;case "dms":w=f._pe._pe_dms_to_geog}C=0;u&&(C=f._pe.getPointer(u));u=Q.map(y=>f._pe.ensureString(y));Q=f._pe.ensureInt32(u);u=f._pe.ensureFloat64(Array(2*J));(w=w(C,J,Q,u))&&A(D,J,u);return w};n.geogToDms=function(C,u,J,Q,D){return z("dms",C,u,J,Q,D)};n.dmsToGeog=function(C,u,J,Q){return O("dms",C,u,J,Q)};n.geogToDdm=function(C,
u,J,Q,D){return z("ddm",C,u,J,Q,D)};n.ddmToGeog=function(C,u,J,Q){return O("ddm",C,u,J,Q)};n.geogToDd=function(C,u,J,Q,D){return z("dd",C,u,J,Q,D)};n.ddToGeog=function(C,u,J,Q){return O("dd",C,u,J,Q)}})(f.PeNotationDms||(f.PeNotationDms={}));f.PeNotationMgrs=void 0;(function(n){n.init=function(){n.PE_MGRS_STYLE_NEW=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;n.PE_MGRS_STYLE_OLD=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;n.PE_MGRS_STYLE_AUTO=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
n.PE_MGRS_180_ZONE_1_PLUS=f._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;n.PE_MGRS_ADD_SPACES=f._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};n.geogToMgrsExtended=function(z,O,C,u,J,Q,D){f._pe.ensureCache.prepare();let w=0;z&&(w=f._pe.getPointer(z));z=H(C);C=f._pe.ensureFloat64(z);z=k(O,f.PeDefs.PE_MGRS_MAX);const y=f._pe.ensureInt32(z);if(u=f._pe._pe_geog_to_mgrs_extended(w,O,C,u,J,Q,y))for(J=0;J<O;J++)D[J]=f._pe.UTF8ToString(z[J]);return u};n.mgrsToGeogExtended=function(z,O,C,u,J){f._pe.ensureCache.prepare();
let Q=0;z&&(Q=f._pe.getPointer(z));z=C.map(D=>f._pe.ensureString(D));C=f._pe.ensureInt32(z);z=f._pe.ensureFloat64(Array(2*O));(u=f._pe._pe_mgrs_to_geog_extended(Q,O,C,u,z))&&A(J,O,z);return u}})(f.PeNotationMgrs||(f.PeNotationMgrs={}));f.PeNotationUsng=void 0;(function(n){n.geogToUsng=function(z,O,C,u,J,Q,D){f._pe.ensureCache.prepare();let w=0;z&&(w=f._pe.getPointer(z));z=H(C);C=f._pe.ensureFloat64(z);z=k(O,f.PeDefs.PE_MGRS_MAX);const y=f._pe.ensureInt32(z);if(u=f._pe._pe_geog_to_usng(w,O,C,u,J,Q,
y))for(J=0;J<O;J++)D[J]=f._pe.UTF8ToString(z[J]);return u};n.usngToGeog=function(z,O,C,u){f._pe.ensureCache.prepare();var J=0;z&&(J=f._pe.getPointer(z));z=C.map(Q=>f._pe.ensureString(Q));C=f._pe.ensureInt32(z);z=f._pe.ensureFloat64(Array(2*O));(J=f._pe._pe_usng_to_geog(J,O,C,z))&&A(u,O,z);return J}})(f.PeNotationUsng||(f.PeNotationUsng={}));f.PeNotationUtm=void 0;(function(n){n.init=function(){n.PE_UTM_OPTS_NONE=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;n.PE_UTM_OPTS_ADD_SPACES=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
n.PE_UTM_OPTS_NS=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};n.geogToUtm=function(z,O,C,u,J){f._pe.ensureCache.prepare();var Q=0;z&&(Q=f._pe.getPointer(z));z=H(C);C=f._pe.ensureFloat64(z);z=k(O,f.PeDefs.PE_UTM_MAX);const D=f._pe.ensureInt32(z);if(u=f._pe._pe_geog_to_utm(Q,O,C,u,D))for(Q=0;Q<O;Q++)J[Q]=f._pe.UTF8ToString(z[Q]);return u};n.utmToGeog=function(z,O,C,u,J){f._pe.ensureCache.prepare();let Q=0;z&&(Q=f._pe.getPointer(z));z=C.map(D=>f._pe.ensureString(D));C=f._pe.ensureInt32(z);z=f._pe.ensureFloat64(Array(2*
O));(u=f._pe._pe_utm_to_geog(Q,O,C,u,z))&&A(J,O,z);return u}})(f.PeNotationUtm||(f.PeNotationUtm={}));f.PePCSInfo=void 0;(function(n){const z=new Map;n.init=function(){n.PE_PCSINFO_OPTION_NONE=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;n.PE_PCSINFO_OPTION_DOMAIN=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;n.PE_POLE_OUTSIDE_BOUNDARY=f._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;n.PE_POLE_POINT=f._pe.PePCSInfo.prototype.PE_POLE_POINT};n.generate=function(O,C=n.PE_PCSINFO_OPTION_DOMAIN){let u=
null,J=null;z.has(O)&&(J=z.get(O),J[C]&&(u=J[C]));u||(u=f._pe.PePCSInfo.prototype.generate(O,C),J||(J=[],z.set(O,J)),J[C]=u);return u}})(f.PePCSInfo||(f.PePCSInfo={}));f.PeVersion=void 0;(function(n){n.versionString=function(){return f._pe.PeVersion.prototype.version_string()}})(f.PeVersion||(f.PeVersion={}));const e=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return f.PeCSTransformations},get PeDefs(){return f.PeDefs},get PeFactory(){return f.PeFactory},get PeGCSExtent(){return f.PeGCSExtent},
get PeGTTransformations(){return f.PeGTTransformations},get PeGTlistExtended(){return f.PeGTlistExtended},get PeGTlistExtendedEntry(){return f.PeGTlistExtendedEntry},get PeNotationDms(){return f.PeNotationDms},get PeNotationMgrs(){return f.PeNotationMgrs},get PeNotationUsng(){return f.PeNotationUsng},get PeNotationUtm(){return f.PeNotationUtm},get PePCSInfo(){return f.PePCSInfo},get PeVersion(){return f.PeVersion},_init:h,get _pe(){return f._pe},isLoaded:ha,isSupported:T,load:L},Symbol.toStringTag,
{value:"Module"}));f._init=h;f.isLoaded=ha;f.isSupported=T;f.load=L;f.pe=e})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(l,f){const ka=Math.PI/180;var ca=f.earth.radius;const R=f.earth.eccentricitySquared;ca={a1:ca*R,a2:ca*R*ca*R,a3:ca*R*R/2,a4:ca*R*ca*R*2.5,a5:ca*R+ca*R*R/2,a6:1-R};f={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:f.earth.radius,f:f.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,
f:0},104903:{a:f.moon.radius,f:f.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:f.mars.radius,f:f.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,
f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:f.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};l.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;l.earthEllipsoidConstants=ca;l.spheroids=f;l.toRadians=ka;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers","./GeographicTransformationStep"],function(l,f){return function(){function ka(R){this.steps=
[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(R&&R.steps)for(const ha of R.steps)ha instanceof f?this.steps.push(ha):this.steps.push(new f({wkid:ha.wkid,wkt:ha.wkt,isInverse:ha.isInverse}))}ka.cacheKey=function(R,ha){return[void 0!==R.wkid&&null!==R.wkid?R.wkid.toString():"-1",void 0!==R.wkt&&null!==R.wkt?R.wkt.toString():"",void 0!==ha.wkid&&null!==ha.wkid?ha.wkid.toString():"-1",void 0!==ha.wkt&&null!==ha.wkt?ha.wkt.toString():""].join()};ka.fromGE=function(R){const ha=new ka;
let T="";for(const L of R.steps)R=f.fromGE(L),ha.steps.push(R),T+=R.uid.toString()+",";ha._cachedProjection={};ha._gtlistentry=null;ha._chain=T;return ha};var ca=ka.prototype;ca.getInverse=function(){const R=new ka;R.steps=[];for(let ha=this.steps.length-1;0<=ha;ha--)R.steps.push(this.steps[ha].getInverse());return R};ca.getGTListEntry=function(){let R="";for(const ha of this.steps)R+=ha.uid.toString()+",";R!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=R);return this._gtlistentry};
ca.assignCachedGe=function(R,ha,T){this._cachedProjection[ka.cacheKey(R,ha)]=T};ca.getCachedGeTransformation=function(R,ha){let T="";for(const L of this.steps)T+=L.uid.toString()+",";T!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=T);R=this._cachedProjection[ka.cacheKey(R,ha)];return void 0===R?null:R};return l._createClass(ka)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){let f=0;
return function(){function ka(ca){this.uid=f++;ca?(this._wkt=null!=ca.wkt?ca.wkt:null,this._wkid=null!=ca.wkid?ca.wkid:-1,this._isInverse=null!=ca.isInverse?!0===ca.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ka.fromGE=function(ca){const R=new ka;R._wkt=ca.wkt;R._wkid=ca.wkid;R._isInverse=ca.isInverse;return R};ka.prototype.getInverse=function(){const ca=new ka;ca._wkt=this.wkt;ca._wkid=this._wkid;ca._isInverse=!this.isInverse;return ca};l._createClass(ka,[{key:"wkt",get:function(){return this._wkt},
set:function(ca){this._wkt=ca;this.uid=f++}},{key:"wkid",get:function(){return this._wkid},set:function(ca){this._wkid=ca;this.uid=f++}},{key:"isInverse",get:function(){return this._isInverse},set:function(ca){this._isInverse=ca;this.uid=f++}}]);return ka}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/unitUtils","./spatialReferenceUtils"],function(l,f,ka){l.getGeometryZScaler=function(ca,R,ha){if(null==R||null==ha||ha.vcsWkid||ka.equals(R,ha))return null;R=f.getMetersPerVerticalUnitForSR(R);
ha=f.getMetersPerVerticalUnitForSR(ha);const T=R/ha;if(1===T)return null;switch(ca){case "point":case "esriGeometryPoint":return L=>{L&&null!=L.z&&(L.z*=T)};case "polyline":case "esriGeometryPolyline":return L=>{if(L)for(const h of L.paths)for(const m of h)2<m.length&&(m[2]*=T)};case "polygon":case "esriGeometryPolygon":return L=>{if(L)for(const h of L.rings)for(const m of h)2<m.length&&(m[2]*=T)};case "multipoint":case "esriGeometryMultipoint":return L=>{if(L)for(const h of L.points)2<h.length&&
(h[2]*=T)};case "extent":case "esriGeometryEnvelope":return L=>{L&&null!=L.zmin&&null!=L.zmax&&(L.zmin*=T,L.zmax*=T)};default:return null}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(l,f){let ka=f._createClass(function(L,h,m){this.x=L;this.y=h;this.spatialReference=m;this.m=this.z=void 0}),ca=f._createClass(function(L,h,m,k){this.rings=L;this.spatialReference=
h;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);k&&(this.hasM=k)}),R=f._createClass(function(L,h,m,k){this.paths=L;this.spatialReference=h;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);k&&(this.hasM=k)}),ha=f._createClass(function(L,h,m,k){this.points=L;this.spatialReference=h;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);k&&(this.hasM=k)}),T=f._createClass(function(L,h,m,k,H){this.xmin=L;this.ymin=h;this.xmax=m;this.ymax=k;this.spatialReference=H;this.mmax=this.mmin=this.zmax=this.zmin=void 0});l.jsonAdapter=
{convertToGEGeometry:function(L,h){return null==h?null:L.convertJSONToGeometry(h)},exportPoint:function(L,h,m){m=new ka(L.getPointX(h),L.getPointY(h),m);const k=L.hasZ(h),H=L.hasM(h);k&&(m.z=L.getPointZ(h));H&&(m.m=L.getPointM(h));return m},exportPolygon:function(L,h,m){return new ca(L.exportPaths(h),m,L.hasZ(h),L.hasM(h))},exportPolyline:function(L,h,m){return new R(L.exportPaths(h),m,L.hasZ(h),L.hasM(h))},exportMultipoint:function(L,h,m){return new ha(L.exportPoints(h),m,L.hasZ(h),L.hasM(h))},exportExtent:function(L,
h,m){var k=L.hasZ(h);const H=L.hasM(h);m=new T(L.getXMin(h),L.getYMin(h),L.getXMax(h),L.getYMax(h),m);k&&(k=L.getZExtent(h),m.zmin=k.vmin,m.zmax=k.vmax);H&&(L=L.getMExtent(h),m.mmin=L.vmin,m.mmax=L.vmax);return m}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(l,f){let ka=function(){function R(ha=null,T={},L,h){this.geometry=ha;this.attributes=T;this.centroid=L;
this.objectId=h;this.geohashY=this.geohashX=this.displayId=0}R.prototype.weakClone=function(){const ha=new R(this.geometry,this.attributes,this.centroid,this.objectId);ha.displayId=this.displayId;ha.geohashX=this.geohashX;ha.geohashY=this.geohashY;return ha};return f._createClass(R)}(),ca=function(R){function ha(){return R.apply(this,arguments)||this}f._inherits(ha,R);return f._createClass(ha)}(ka);l.OptimizedFeature=ka;l.OptimizedFeatureWithGeometry=ca;l.hasGeometry=function(R){return!(null==R.geometry||
!R.geometry.coords||!R.geometry.coords.length)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function f(ca=[],R=[],ha=!1){this.lengths=ca??[];this.coords=R??[];this.hasIndeterminateRingOrder=ha}f.fromRect=function(ca){const [R,ha,T,L]=ca;ca=T-R;const h=L-ha;return new f([5],[R,ha,ca,0,0,h,-ca,0,0,-h])};var ka=f.prototype;ka.forEachVertex=function(ca){let R=
0;this.lengths.length||ca(this.coords[0],this.coords[1]);for(let ha=0;ha<this.lengths.length;ha++){const T=this.lengths[ha];for(let L=0;L<T;L++)ca(this.coords[2*(L+R)],this.coords[2*(L+R)+1]);R+=T}};ka.clone=function(ca){return ca?(ca.set(this.coords),new f(this.lengths.slice(),ca,this.hasIndeterminateRingOrder)):new f(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};l._createClass(f,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},
{key:"size",get:function(){return this.lengths.reduce((ca,R)=>ca+R)}}]);return f}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),function(l,f,ka,ca,R,ha,T,L,h,m){const k=R.create();return function(){function H(K){this.geometryInfo=
K;this._boundsStore=new L.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ka;this.featureAdapter=h.optimizedFeatureQueryEngineAdapter}var A=H.prototype;A.getFullExtent=function(K){if(null==this.fullBounds)return null;const [e,n,z,O]=this.fullBounds;return{xmin:e,ymin:n,xmax:z,ymax:O,spatialReference:m.cleanFromGeometryEngine(K)}};A.add=function(K){this._add(K);this._emitChanged()};A.addMany=function(K){for(const e of K)this._add(e);this._emitChanged()};A.clear=function(){this._featuresById.clear();
this._boundsStore.clear();this._emitChanged()};A.removeById=function(K){K=this._featuresById.get(K);if(!K)return null;this._remove(K);this._emitChanged();return K};A.removeManyById=function(K){this._boundsStore.invalidateIndex();for(const e of K)(K=this._featuresById.get(e))&&this._remove(K);this._emitChanged()};A.forEachBounds=function(K,e){for(const n of K)(K=this._boundsStore.get(n.objectId))&&e(R.fromRect(k,K))};A.getFeature=function(K){return this._featuresById.get(K)};A.has=function(K){return this._featuresById.has(K)};
A.forEach=function(K){this._featuresById.forEach(e=>K(e))};A.forEachInBounds=function(K,e){this._boundsStore.forEachInBounds(K,n=>{e(this._featuresById.get(n))})};A.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};A.sweep=function(){let K=!1;this._featuresById.forEach((e,n)=>{this._markedIds.has(n)||(K=!0,this._remove(e))});this._markedIds.clear();K&&this._emitChanged()};A._emitChanged=function(){this.events.emit("changed",void 0)};A._add=function(K){if(K){var e=
K.objectId;if(null==e)ca.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:K}));else{var n=this._featuresById.get(e);this._markedIds.add(e);if(n){K.displayId=n.displayId;var z=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(K);null!=K.geometry&&K.geometry.coords&&K.geometry.coords.length?(z=T.getBoundsOptimizedGeometry(null!=z?z:ha.create(),K.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),null!=z&&this._boundsStore.set(e,z)):this._boundsStore.set(e,null);this._featuresById.set(e,K)}}};A._remove=function(K){if(null!=this.onFeatureRemove)this.onFeatureRemove(K);const e=K.objectId;this._markedIds.delete(e);this._boundsStore.delete(e);this._featuresById.delete(e);return K};l._createClass(H,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let K=0;this._featuresById.forEach(e=>{null!=e.geometry&&e.geometry.coords&&(K+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:K/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return H}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(l,f,ka,ca,R){let ha=function(){function T(){this._emitter=new T.EventEmitter(this)}var L=T.prototype;L.emit=function(h,m){return this._emitter.emit(h,m)};L.on=function(h,m){return this._emitter.on(h,m)};L.once=function(h,m){return this._emitter.once(h,m)};L.hasEventListener=function(h){return this._emitter.hasEventListener(h)};return l._createClass(T)}();(function(T){let L=function(){function m(H=null){this._target=H;this._listenersMap=
null}var k=m.prototype;k.clear=function(){this._listenersMap?.clear();this._listenersMap=null};k.destroy=function(){this.clear()};k.emit=function(H,A){H=this._listenersMap&&this._listenersMap.get(H);if(!H)return!1;const K=this._target||this;[...H].forEach(e=>{e.call(K,A)});return 0<H.length};k.on=function(H,A){if(Array.isArray(H)){var K=H.map(e=>this.on(e,A));return ca.handlesGroup(K)}if(H.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);K=this._listenersMap.get(H)||[];K.push(A);this._listenersMap.set(H,K);return{remove:()=>{const e=this._listenersMap&&this._listenersMap.get(H)||[],n=e.indexOf(A);0<=n&&e.splice(n,1)}}};k.once=function(H,A){const K=this.on(H,e=>{K.remove();A.call(null,e)});return K};k.hasEventListener=function(H){H=this._listenersMap&&this._listenersMap.get(H);return null!=H&&0<H.length};return l._createClass(m)}();T.EventEmitter=L;T.EventedMixin=m=>{m=function(k){function H(){var K=
k.apply(this,arguments)||this;K._emitter=new L;return K}l._inherits(H,k);var A=H.prototype;A.destroy=function(){this._emitter.clear()};A.emit=function(K,e){return this._emitter.emit(K,e)};A.on=function(K,e){return this._emitter.on(K,e)};A.once=function(K,e){return this._emitter.once(K,e)};A.hasEventListener=function(K){return this._emitter.hasEventListener(K)};return l._createClass(H)}(m);return m=f.__decorate([R.subclass("esri.core.Evented")],m)};let h=function(m){function k(){var A=m.apply(this,
arguments)||this;A._emitter=new ha.EventEmitter(l._assertThisInitialized(A));return A}l._inherits(k,m);var H=k.prototype;H.destroy=function(){this._emitter.clear()};H.emit=function(A,K){return this._emitter.emit(A,K)};H.on=function(A,K){return this._emitter.on(A,K)};H.once=function(A,K){return this._emitter.once(A,K)};H.hasEventListener=function(A){return this._emitter.hasEventListener(A)};return l._createClass(k)}(ka);h=f.__decorate([R.subclass("esri.core.Evented")],h);T.EventedAccessor=h})(ha||
(ha={}));return ha})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],function(l,f,ka){function ca(e=A){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function R(e,n,z,O,C,u,J=ca()){J[0]=e;J[1]=n;J[2]=z;J[3]=O;J[4]=C;J[5]=u;return J}function ha(e){return e[0]>=e[3]?0:e[3]-e[0]}function T(e){return e[1]>=e[4]?0:e[4]-e[1]}function L(e){return e[2]>=e[5]?0:e[5]-e[2]}function h(e,n){return Math.max(n[0],e[0])<=Math.min(n[3],e[3])&&Math.max(n[1],e[1])<=Math.min(n[4],
e[4])&&Math.max(n[2],e[2])<=Math.min(n[5],e[5])}function m(e,n){e[0]=n[0];e[1]=n[1];e[2]=n[2];e[3]=n[3];e[4]=n[4];e[5]=n[5];return e}function k(e){return 6===e.length}const H=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],A=[0,0,0,0,0,0],K=ca();l.NEGATIVE_INFINITY=H;l.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];l.ZERO=A;l.allFinite=function(e){for(let n=0;6>n;n++)if(!isFinite(e[n]))return!1;return!0};l.center=function(e,n=[0,0,0]){n[0]=e[0]+ha(e)/2;n[1]=
e[1]+T(e)/2;n[2]=e[2]+L(e)/2;return n};l.contains=function(e,n){return n[0]>=e[0]&&n[1]>=e[1]&&n[2]>=e[2]&&n[3]<=e[3]&&n[4]<=e[4]&&n[5]<=e[5]};l.containsPoint=function(e,n){return n[0]>=e[0]&&n[1]>=e[1]&&n[2]>=e[2]&&n[0]<=e[3]&&n[1]<=e[4]&&n[2]<=e[5]};l.containsPointWithMargin=function(e,n,z){return n[0]>=e[0]-z&&n[1]>=e[1]-z&&n[2]>=e[2]-z&&n[0]<=e[3]+z&&n[1]<=e[4]+z&&n[2]<=e[5]+z};l.create=ca;l.depth=T;l.diameter=function(e){const n=ha(e),z=L(e);e=T(e);return Math.sqrt(n*n+z*z+e*e)};l.empty=function(e){return e?
m(e,H):ca(H)};l.equals=function(e,n,z){if(null==e||null==n)return e===n;if(!k(e)||!k(n))return!1;if(z)for(let O=0;O<e.length;O++){if(!z(e[O],n[O]))return!1}else for(z=0;z<e.length;z++)if(e[z]!==n[z])return!1;return!0};l.expandWithAABB=function(e,n){e[0]=Math.min(e[0],n[0]);e[1]=Math.min(e[1],n[1]);e[2]=Math.min(e[2],n[2]);e[3]=Math.max(e[3],n[3]);e[4]=Math.max(e[4],n[4]);e[5]=Math.max(e[5],n[5])};l.expandWithBuffer=function(e,n,z=0,O=n.length/3){let C=e[0],u=e[1],J=e[2],Q=e[3],D=e[4],w=e[5];for(let y=
0;y<O;y++)C=Math.min(C,n[z+3*y]),u=Math.min(u,n[z+3*y+1]),J=Math.min(J,n[z+3*y+2]),Q=Math.max(Q,n[z+3*y]),D=Math.max(D,n[z+3*y+1]),w=Math.max(w,n[z+3*y+2]);e[0]=C;e[1]=u;e[2]=J;e[3]=Q;e[4]=D;e[5]=w};l.expandWithNestedArray=function(e,n,z){const O=n.length;let C=e[0],u=e[1],J=e[2],Q=e[3],D=e[4],w=e[5];if(z)for(z=0;z<O;z++){var y=n[z];C=Math.min(C,y[0]);u=Math.min(u,y[1]);J=Math.min(J,y[2]);Q=Math.max(Q,y[0]);D=Math.max(D,y[1]);w=Math.max(w,y[2])}else for(z=0;z<O;z++)y=n[z],C=Math.min(C,y[0]),u=Math.min(u,
y[1]),Q=Math.max(Q,y[0]),D=Math.max(D,y[1]);e[0]=C;e[1]=u;e[2]=J;e[3]=Q;e[4]=D;e[5]=w};l.expandWithOffset=function(e,n,z,O){e[0]=Math.min(e[0],e[0]+n);e[3]=Math.max(e[3],e[3]+n);e[1]=Math.min(e[1],e[1]+z);e[4]=Math.max(e[4],e[4]+z);e[2]=Math.min(e[2],e[2]+O);e[5]=Math.max(e[5],e[5]+O)};l.expandWithRect=function(e,n){e[0]=Math.min(e[0],n[0]);e[1]=Math.min(e[1],n[1]);e[3]=Math.max(e[3],n[2]);e[4]=Math.max(e[4],n[3])};l.expandWithVec3=function(e,n){e[0]=Math.min(e[0],n[0]);e[1]=Math.min(e[1],n[1]);e[2]=
Math.min(e[2],n[2]);e[3]=Math.max(e[3],n[0]);e[4]=Math.max(e[4],n[1]);e[5]=Math.max(e[5],n[2])};l.fromExtent=function(e,n=ca()){n[0]=e.xmin;n[1]=e.ymin;n[2]=e.hasZ?e.zmin:-Infinity;n[3]=e.xmax;n[4]=e.ymax;n[5]=e.hasZ?e.zmax:Infinity;return n};l.fromMinMax=function(e,n,z=ca()){z[0]=e[0];z[1]=e[1];z[2]=e[2];z[3]=n[0];z[4]=n[1];z[5]=n[2];return z};l.fromRect=function(e,n){e[0]=n[0];e[1]=n[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=n[2];e[4]=n[3];e[5]=Number.POSITIVE_INFINITY;return e};l.fromRectValues=function(e,
n,z,O,C){e[0]=n;e[1]=z;e[2]=Number.NEGATIVE_INFINITY;e[3]=O;e[4]=C;e[5]=Number.POSITIVE_INFINITY;return e};l.fromValues=R;l.getMax=function(e,n){n[0]=e[3];n[1]=e[4];n[2]=e[5];return n};l.getMin=function(e,n){n[0]=e[0];n[1]=e[1];n[2]=e[2];return n};l.height=L;l.intersects=h;l.intersectsClippingArea=function(e,n){return null==n?!0:h(e,n)};l.is=k;l.isPoint=function(e){return 0===ha(e)&&0===T(e)&&0===L(e)};l.maximumDimension=function(e){return Math.max(ha(e),L(e),T(e))};l.offset=function(e,n,z,O,C=e){C[0]=
e[0]+n;C[1]=e[1]+z;C[2]=e[2]+O;C[3]=e[3]+n;C[4]=e[4]+z;C[5]=e[5]+O;return C};l.scale=function(e,n,z=e){const O=e[0]+ha(e)/2,C=e[1]+T(e)/2,u=e[2]+L(e)/2;z[0]=O+(e[0]-O)*n;z[1]=C+(e[1]-C)*n;z[2]=u+(e[2]-u)*n;z[3]=O+(e[3]-O)*n;z[4]=C+(e[4]-C)*n;z[5]=u+(e[5]-u)*n;return z};l.set=m;l.setMax=function(e,n,z=e){z[3]=n[0];z[4]=n[1];z[5]=n[2];z!==e&&(z[0]=e[0],z[1]=e[1],z[2]=e[2]);return e};l.setMin=function(e,n,z=e){z[0]=n[0];z[1]=n[1];z[2]=n[2];z!==e&&(z[3]=e[3],z[4]=e[4],z[5]=e[5]);return z};l.size=function(e,
n=[0,0,0]){n[0]=ha(e);n[1]=T(e);n[2]=L(e);return n};l.toExtent=function(e,n){return isFinite(e[2])||isFinite(e[5])?new f({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:n}):new f({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:n})};l.toRect=function(e,n){n||(n=ka.create());n[0]=e[0];n[1]=e[1];n[2]=e[3];n[3]=e[4];return n};l.width=ha;l.wrap=function(e,n,z,O,C,u){return R(e,n,z,O,C,u,K)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(l,f,ka,ca,R,ha,T,L,h,m){function k(p,I){return p?I?4:3:I?3:2}function H(p,I,V,W){if(p){if(V)return I&&W?q:db;if(I&&W)return c}else if(I&&W)return db;return lb}function A({scale:p,translate:I},V){return Math.round((V-I[0])/p[0])}function K({scale:p,translate:I},V){return Math.round((I[1]-V)/p[1])}function e({scale:p,translate:I},V,W){return V*p[W]+I[W]}function n(p){p=p.coords;return{x:p[0],y:p[1]}}function z(p,I){p.coords[0]=I.x;p.coords[1]=I.y;return p}function O(p){p=p.coords;return{x:p[0],
y:p[1],z:p[2]}}function C(p,I){p.coords[0]=I.x;p.coords[1]=I.y;p.coords[2]=I.z;return p}function u(p){p=p.coords;return{x:p[0],y:p[1],m:p[2]}}function J(p,I){p.coords[0]=I.x;p.coords[1]=I.y;p.coords[2]=I.m;return p}function Q(p){p=p.coords;return{x:p[0],y:p[1],z:p[2],m:p[3]}}function D(p,I){p.coords[0]=I.x;p.coords[1]=I.y;p.coords[2]=I.z;p.coords[3]=I.m;return p}function w(p,I){return p&&I?D:p?C:I?J:z}function y(p,I,V,W,fa){V=w(V,W);for(const {geometry:na,attributes:pa}of I)I=null!=na?V(new m,na):
null,p.push(new L.OptimizedFeature(I,pa,null,fa?pa[fa]:void 0));return p}function x(p,I,V,W){for(const {geometry:fa,attributes:na}of I)p.push({attributes:na,geometry:null!=fa?B(fa,V,W):null});return p}function B(p,I,V){if(null==p)return null;const W=k(I,V),fa=[];for(let na=0;na<p.coords.length;na+=W){const pa=[];for(let sa=0;sa<W;sa++)pa.push(p.coords[na+sa]);fa.push(pa)}return I?V?{points:fa,hasZ:I,hasM:V}:{points:fa,hasZ:I}:V?{points:fa,hasM:V}:{points:fa}}function E(p,I,V,W,fa){V=k(V,W);for(const {geometry:na,
attributes:pa}of I)I=null!=na?U(new m,na,V):null,p.push(new L.OptimizedFeature(I,pa,null,fa?pa[fa]:void 0));return p}function U(p,I,V=k(I.hasZ,I.hasM)){p.lengths[0]=I.points.length;const W=p.coords;let fa=0;for(const na of I.points)for(I=0;I<V;I++)W[fa++]=na[I];return p}function Y(p,I,V){if(!p)return null;const W=k(I,V),{coords:fa,lengths:na}=p;p=[];let pa=0;for(const sa of na){const va=[];for(let Ea=0;Ea<sa;Ea++){const Aa=[];for(let za=0;za<W;za++)Aa.push(fa[pa++]);va.push(Aa)}p.push(va)}return I?
V?{paths:p,hasZ:I,hasM:V}:{paths:p,hasZ:I}:V?{paths:p,hasM:V}:{paths:p}}function M(p,I,V,W,fa){V=k(V,W);for(const {geometry:na,attributes:pa}of I)I=null!=na?P(new m,na,V):null,p.push(new L.OptimizedFeature(I,pa,null,fa?pa[fa]:void 0));return p}function P(p,I,V=k(I.hasZ,I.hasM)){const {lengths:W,coords:fa}=p;let na=0;for(const pa of I.paths){for(const sa of pa)for(I=0;I<V;I++)fa[na++]=sa[I];W.push(pa.length)}return p}function r(p,I,V){if(!p)return null;const W=k(I,V),{coords:fa,lengths:na}=p;p=[];
let pa=0;for(const sa of na){const va=[];for(let Ea=0;Ea<sa;Ea++){const Aa=[];for(let za=0;za<W;za++)Aa.push(fa[pa++]);va.push(Aa)}p.push(va)}return I?V?{rings:p,hasZ:I,hasM:V}:{rings:p,hasZ:I}:V?{rings:p,hasM:V}:{rings:p}}function v(p,I,V,W,fa){for(const {geometry:na,centroid:pa,attributes:sa}of I){I=null!=na?Z(new m,na,V,W):null;const va=fa?sa[fa]:void 0;null!=pa?p.push(new L.OptimizedFeature(I,sa,z(new m,pa),va)):p.push(new L.OptimizedFeature(I,sa,null,va))}return p}function Z(p,I,V=I.hasZ,W=I.hasM){return ja(p,
I.rings,V,W)}function ja(p,I,V,W){V=k(V,W);const {lengths:fa,coords:na}=p;W=0;Sa(p);for(const pa of I){for(const sa of pa)for(I=0;I<V;I++)na[W++]=sa[I];fa.push(pa.length)}return p}function ta(p,I,V,W,fa,na){Va(p);if(!V){for(const pa of I)p.push(new L.OptimizedFeature(null,pa.attributes,null,na?pa.attributes[na]:void 0));return p}switch(V){case "esriGeometryPoint":return y(p,I,W,fa,na);case "esriGeometryMultipoint":return E(p,I,W,fa,na);case "esriGeometryPolyline":return M(p,I,W,fa,na);case "esriGeometryPolygon":return v(p,
I,W,fa,na);default:eb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${V}'`)),Va(p)}return p}function xa(p,I,V,W){p=p&&("coords"in p?p:p.geometry);if(null==p)return null;switch(I){case "esriGeometryPoint":return I=n,V&&W?I=Q:V?I=O:W&&(I=u),I(p);case "esriGeometryMultipoint":return B(p,V,W);case "esriGeometryPolyline":return Y(p,V,W);case "esriGeometryPolygon":return r(p,V,W);default:return eb.error("convertToGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${I}'`)),
null}}function Ca(p,I,V,W,fa){Va(p);if(null==V){for(const pa of I)p.push({attributes:pa.attributes});return p}switch(V){case "esriGeometryPoint":V=n;W&&fa?V=Q:W?V=O:fa&&(V=u);for(var na of I){const {geometry:pa,attributes:sa}=na;W=null!=pa?V(pa):null;p.push({attributes:sa,geometry:W})}break;case "esriGeometryMultipoint":return x(p,I,W,fa);case "esriGeometryPolyline":for(const {geometry:pa,attributes:sa}of I)p.push({attributes:sa,geometry:null!=pa?Y(pa,W,fa):null});break;case "esriGeometryPolygon":for(const {geometry:pa,
attributes:sa,centroid:va}of I)na=null!=pa?r(pa,W,fa):null,null!=va?(I=n(va),p.push({attributes:sa,centroid:I,geometry:na})):p.push({attributes:sa,geometry:na});break;default:eb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${V}'`))}return p}function Ga(p,I,V,W,fa,na,pa=V,sa=W){Sa(p);if(null==I||!I.coords.length)return null;fa=kb[fa];const {coords:va,lengths:Ea}=I;I=k(V,W);const Aa=k(V&&pa,W&&sa);V=H(V,W,pa,sa);if(!Ea.length)return V(p.coords,va,0,0,A(na,
va[0]),K(na,va[1])),Sa(p,I,0),p;let za,Ra=0,Ma,Pa=0;for(const Qa of Ea){if(Qa<fa)continue;let Ka=0;Ma=Pa;sa=W=A(na,va[Ra]);za=pa=K(na,va[Ra+1]);V(p.coords,va,Ma,Ra,sa,za);Ka++;Ra+=I;Ma+=Aa;for(let Ta=1;Ta<Qa;Ta++,Ra+=I)if(sa=A(na,va[Ra]),za=K(na,va[Ra+1]),sa!==W||za!==pa)V(p.coords,va,Ma,Ra,sa-W,za-pa),Ma+=Aa,Ka++,W=sa,pa=za;Ka>=fa&&(p.lengths.push(Ka),Pa=Ma)}Va(p.coords,Pa);return p.coords.length?p:null}function Ha(p,I,V,W,fa,na,pa){let sa=W,va=0;for(let Aa=na+V;Aa<pa;Aa+=V){var Ea=I[Aa];const za=
I[Aa+1],Ra=I[pa],Ma=I[pa+1];let Pa=I[na],Qa=I[na+1],Ka=Ra-Pa,Ta=Ma-Qa;if(0!==Ka||0!==Ta){const Wa=((Ea-Pa)*Ka+(za-Qa)*Ta)/(Ka*Ka+Ta*Ta);1<Wa?(Pa=Ra,Qa=Ma):0<Wa&&(Pa+=Ka*Wa,Qa+=Ta*Wa)}Ka=Ea-Pa;Ta=za-Qa;Ea=Ka*Ka+Ta*Ta;Ea>sa&&(va=Aa,sa=Ea)}sa>W&&(va-na>V&&Ha(p,I,V,W,fa,na,va),fa(p,I,p.length,va,I[va],I[va+1]),pa-va>V&&Ha(p,I,V,W,fa,va,pa))}function Fa(p,I,V,W,fa){const {coords:na,lengths:pa}=I;V=k(V,W);if(!na.length)return p!==I&&Sa(p),p;ca.assertIsSome(fa);const {originPosition:sa,scale:va,translate:Ea}=
fa;fa=ba;fa.originPosition=sa;W=fa.scale;W[0]=va[0]??1;W[1]=-(va[1]??1);W[2]=va[2]??1;W[3]=va[3]??1;var Aa=fa.translate;Aa[0]=Ea[0]??0;Aa[1]=Ea[1]??0;Aa[2]=Ea[2]??0;Aa[3]=Ea[3]??0;if(!pa.length){for(W=0;W<V;++W)p.coords[W]=e(fa,na[W],W);p!==I&&Sa(p,V,0);return p}Aa=0;for(let Ra=0;Ra<pa.length;Ra++){const Ma=pa[Ra];p.lengths[Ra]=Ma;for(var za=0;za<V;++za)p.coords[Aa+za]=e(fa,na[Aa+za],za);za=p.coords[Aa];let Pa=p.coords[Aa+1];Aa+=V;for(let Qa=1;Qa<Ma;Qa++,Aa+=V){za+=na[Aa]*W[0];Pa+=na[Aa+1]*W[1];p.coords[Aa]=
za;p.coords[Aa+1]=Pa;for(let Ka=2;Ka<V;++Ka)p.coords[Aa+Ka]=e(fa,na[Aa+Ka],Ka)}}p!==I&&Sa(p,na.length,pa.length);return p}function Oa(p,I,V,W){let fa=0,na=p[W*I],pa=p[W*(I+1)];for(let sa=1;sa<V;sa++){const va=na+p[W*(I+sa)],Ea=pa+p[W*(I+sa)+1],Aa=(va-na)*(Ea+pa);na=va;pa=Ea;fa+=Aa}return.5*fa}function Sa(p,I=0,V=0){Va(p.lengths,V);Va(p.coords,I)}function Va(p,I=0){p.length!==I&&(p.length=I)}const eb=ka.getLogger("esri.layers.graphics.featureConversionUtils"),kb={esriGeometryPoint:0,esriGeometryPolyline:2,
esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},lb=(p,I,V,W,fa,na)=>{p[V]=fa;p[V+1]=na},db=(p,I,V,W,fa,na)=>{p[V]=fa;p[V+1]=na;p[V+2]=I[W+2]},c=(p,I,V,W,fa,na)=>{p[V]=fa;p[V+1]=na;p[V+2]=I[W+3]},q=(p,I,V,W,fa,na)=>{p[V]=fa;p[V+1]=na;p[V+2]=I[W+2];p[V+3]=I[W+3]},ea=[],F=[],ba={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};l.convertFromFeature=function(p,I,V,W,fa){ea[0]=p;[p]=ta(F,ea,I,V,W,fa);Va(ea);Va(F);return p};l.convertFromFeatureSet=function(p,I){const V=
new h,{hasM:W,hasZ:fa,features:na,objectIdFieldName:pa,spatialReference:sa,geometryType:va,exceededTransferLimit:Ea,transform:Aa,fields:za}=p;za&&(V.fields=za);V.geometryType=va??null;V.objectIdFieldName=pa??I??null;V.spatialReference=sa??null;if(!V.objectIdFieldName)return eb.error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),V;na&&ta(V.features,na,va,fa,W,V.objectIdFieldName);Ea&&(V.exceededTransferLimit=Ea);W&&(V.hasM=W);fa&&(V.hasZ=fa);Aa&&(V.transform=
Aa);return V};l.convertFromFeatures=ta;l.convertFromGeometry=function(p,I,V){if(null==p)return null;const W=new m;"hasZ"in p&&null==I&&(I=p.hasZ);"hasM"in p&&null==V&&(V=p.hasM);if(T.isPoint(p))return w(null!=I?I:null!=p.z,null!=V?V:null!=p.m)(W,p);if(T.isPolygon(p))return Z(W,p,I,V);if(T.isPolyline(p))return P(W,p,k(I,V));if(T.isMultipoint(p))return U(W,p,k(I,V));eb.error("convertFromGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${p}'`))};l.convertFromGraphics=function(p,
I,V,W,fa,na){const pa=p.length;switch(V){case "esriGeometryPoint":y(p,I,W,fa,na);break;case "esriGeometryMultipoint":E(p,I,W,fa,na);break;case "esriGeometryPolyline":M(p,I,W,fa,na);break;case "esriGeometryPolygon":v(p,I,W,fa,na);break;default:eb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${V}'`))}for(W=0;W<I.length;W++)p[W+pa].geometryType=V,p[W+pa].insertAfter=I[W].insertAfter,p[W+pa].groupId=I[W].groupId;return p};l.convertFromMultipoint=U;l.convertFromMultipointFeatures=
E;l.convertFromNestedArray=ja;l.convertFromPoint=function(p,I,V=w(null!=I.z,null!=I.m)){return V(p,I)};l.convertFromPointFeatures=y;l.convertFromPolygon=Z;l.convertFromPolyline=P;l.convertFromPolylineFeatures=M;l.convertToFeature=function(p,I,V,W){F[0]=p;Ca(ea,F,I,V,W);p=ea[0];Va(ea);Va(F);return p};l.convertToFeatureSet=function(p){const {objectIdFieldName:I,spatialReference:V,transform:W,fields:fa,hasM:na,hasZ:pa,features:sa,geometryType:va,exceededTransferLimit:Ea,uniqueIdField:Aa,queryGeometry:za,
queryGeometryType:Ra}=p;p=Ca([],sa,va,pa,na);const Ma=xa(za,Ra,!1,!1);p={features:p,fields:fa,geometryType:va,objectIdFieldName:I,spatialReference:V,uniqueIdField:Aa,queryGeometry:Ma};W&&(p.transform=W);Ea&&(p.exceededTransferLimit=Ea);na&&(p.hasM=na);pa&&(p.hasZ=pa);return p};l.convertToFeatures=Ca;l.convertToGeometry=xa;l.convertToMultipoint=B;l.convertToMultipointFeatures=x;l.convertToPoint=function(p,I,V){return p?I?V?Q(p):O(p):V?u(p):n(p):null};l.convertToPolygon=r;l.convertToPolyline=Y;l.deltaDecodeGeometry=
function(p,I){if(null==p)return null;const V=p.clone(),W=p.coords;p=p.lengths;let fa=0;for(let sa=0;sa<p.length;sa++){const va=p[sa];var na=W[I*fa],pa=W[I*fa+1];for(let Ea=1;Ea<va;Ea++)na+=W[I*(fa+Ea)],pa+=W[I*(fa+Ea)+1],V.coords[I*(fa+Ea)]=na,V.coords[I*(fa+Ea)+1]=pa;fa+=va}return V};l.deltaEncodeGeometry=function(p,I){const V=p.clone(),W=p.coords;p=p.lengths;let fa=0;for(let pa=0;pa<p.length;pa++){const sa=p[pa];let va=W[I*fa];var na=W[I*fa+1];for(let Ea=1;Ea<sa;Ea++){const Aa=W[I*(fa+Ea)],za=W[I*
(fa+Ea)+1];na=za-na;V.coords[I*(fa+Ea)]=Aa-va;V.coords[I*(fa+Ea)+1]=na;va=Aa;na=za}fa+=sa}return V};l.generalizeOptimizedGeometry=function(p,I,V,W,fa,na,pa=V,sa=W){Sa(p);if(!I||!I.coords.length)return null;fa=kb[fa];const {coords:va,lengths:Ea}=I;I=k(V,W);const Aa=k(V&&pa,W&&sa);V=H(V,W,pa,sa);if(!Ea.length)return V(p.coords,va,0,0,va[0],va[1]),Sa(p,I,0),p;W=0;na*=na;for(const za of Ea){if(za<fa){W+=za*I;continue}pa=p.coords.length/Aa;sa=W;const Ra=W+(za-1)*I;V(p.coords,va,p.coords.length,sa,va[sa],
va[sa+1]);Ha(p.coords,va,I,na,V,sa,Ra);V(p.coords,va,p.coords.length,Ra,va[Ra],va[Ra+1]);sa=p.coords.length/Aa-pa;sa>=fa?p.lengths.push(sa):Va(p.coords,pa*Aa);W+=za*I}return p.coords.length?p:null};l.getBoundsOptimizedGeometry=function(p,I,V,W){if(null==I||!I.coords||!I.coords.length)return null;V=k(V,W);let fa=W=Number.POSITIVE_INFINITY,na=Number.NEGATIVE_INFINITY,pa=Number.NEGATIVE_INFINITY;if(I&&I.coords){I=I.coords;for(let sa=0;sa<I.length;sa+=V){const va=I[sa],Ea=I[sa+1];W=Math.min(W,va);na=
Math.max(na,va);fa=Math.min(fa,Ea);pa=Math.max(pa,Ea)}}R.is(p)?R.fromRectValues(p,W,fa,na,pa):ha.fromValues(W,fa,na,pa,p);return p};l.getQuantizedArea=function(p,I){const {coords:V,lengths:W}=p;let fa=p=0;for(let na=0;na<W.length;na++){const pa=W[na];fa+=Oa(V,p,pa,I);p+=pa}return Math.abs(fa)};l.getQuantizedBoundsOptimizedGeometry=function(p,I,V,W){V=k(V,W);const {lengths:fa,coords:na}=I;W=I=Number.POSITIVE_INFINITY;let pa=Number.NEGATIVE_INFINITY,sa=Number.NEGATIVE_INFINITY,va=0;for(const Ea of fa){let Aa=
na[va],za=na[va+1];I=Math.min(Aa,I);W=Math.min(za,W);pa=Math.max(Aa,pa);sa=Math.max(za,sa);va+=V;for(let Ra=1;Ra<Ea;Ra++,va+=V){const Ma=na[va],Pa=na[va+1];Aa+=Ma;za+=Pa;0>Ma&&(I=Math.min(I,Aa));0<Ma&&(pa=Math.max(pa,Aa));0>Pa?W=Math.min(W,za):0<Pa&&(sa=Math.max(sa,za))}}p[0]=I;p[1]=W;p[2]=pa;p[3]=sa;return p};l.getSignedQuantizedRingArea=Oa;l.quantizeOptimizedFeatureSet=function(p,I){const {geometryType:V,features:W,hasM:fa,hasZ:na}=I;if(!p)return I;for(let pa=0;pa<W.length;pa++){const sa=W[pa],
va=sa.weakClone();va.geometry=new m;Ga(va.geometry,sa.geometry,fa,na,V,p);sa.centroid&&(va.centroid=new m,Ga(va.centroid,sa.centroid,fa,na,"esriGeometryPoint",p));W[pa]=va}I.transform=p;return I};l.quantizeOptimizedGeometry=Ga;l.quantizeX=A;l.quantizeY=K;l.removeCollinearVectices=function(p,I,V,W,fa){if(!I||!I.coords||!I.coords.length)return null;V=kb[V];const {coords:na,lengths:pa}=I;I=H(W,fa,W,fa);W=k(W,fa);let sa=fa=0,va=0,Ea=0;for(const Ra of pa){sa=Ea;I(p.coords,na,sa,fa,na[fa],na[fa+1]);fa+=
W;var Aa=na[fa];let Ma=na[fa+1],Pa=Aa,Qa=Ma;var za=Ma/Aa;sa+=W;I(p.coords,na,sa,fa,Pa,Qa);fa+=W;for(let Ka=2;Ka<Ra;Ka++){Aa=na[fa];Ma=na[fa+1];const Ta=Ma/Aa,Wa=za===Ta||!isFinite(za)&&!isFinite(Ta);za=Wa&&isFinite(Ta)?0<=za&&0<=Ta||0>=za&&0>=Ta:0<=Qa&&0<=Ma||0>=Qa&&0>=Ma;Wa&&za?(Pa+=Aa,Qa+=Ma):(Pa=Aa,Qa=Ma,sa+=W);I(p.coords,na,sa,fa,Pa,Qa);fa+=W;za=Ta}sa+=W;Aa=(sa-Ea)/W;Aa>=V&&(p.lengths[va]=Aa,Ea=sa,va++)}p.coords.length>Ea&&(p.coords.length=Ea);p.lengths.length>va&&(p.lengths.length=va);return p.coords.length&&
p.lengths.length?p:null};l.removeZMValues=function(p,I,V,W,fa,na){Sa(p);p.lengths.push(...I.lengths);if(V===fa&&W===na)for(var pa=0;pa<I.coords.length;pa++)p.coords.push(I.coords[pa]);else for(pa=k(V,W),V=H(V,W,fa,na),I=I.coords,W=0;W<I.length;W+=pa)V(p.coords,I,p.coords.length,W,I[W],I[W+1]);return p};l.unquantizeOptimizedFeatureSet=function(p){const {transform:I,features:V,hasM:W,hasZ:fa}=p;if(!I)return p;for(const na of V)null!=na.geometry&&Fa(na.geometry,na.geometry,W,fa,I),null!=na.centroid&&
Fa(na.centroid,na.centroid,W,fa,I);p.transform=null;return p};l.unquantizeOptimizedGeometry=Fa;l.unquantizeValue=e;l.unquantizeX=function(p,I){return e(p,I,0)};l.unquantizeY=function(p,I){return e(p,-I,1)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function f(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=
this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}f.prototype.weakClone=function(){const ka=new f;ka.objectIdFieldName=this.objectIdFieldName;ka.globalIdFieldName=this.globalIdFieldName;ka.geohashFieldName=this.geohashFieldName;ka.geometryProperties=this.geometryProperties;ka.geometryType=this.geometryType;ka.spatialReference=this.spatialReference;
ka.hasZ=this.hasZ;ka.hasM=this.hasM;ka.features=this.features;ka.fields=this.fields;ka.transform=this.transform;ka.exceededTransferLimit=this.exceededTransferLimit;ka.uniqueIdField=this.uniqueIdField;ka.queryGeometry=this.queryGeometry;ka.queryGeometryType=this.queryGeometryType;return ka};return l._createClass(f)}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],
function(l,f,ka,ca,R){function ha(h,m,k){T.minX=m[0];T.minY=m[1];T.maxX=m[2];T.maxY=m[3];h.search(T,k)}const T={minX:0,minY:0,maxX:0,maxY:0};let L=function(){function h(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new ca.PooledRBush(9,ka("esri-csp-restrictions")?k=>({minX:k[0],minY:k[1],maxX:k[2],maxY:k[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const k=Array(this._idByBounds.size);let H=0;this._idByBounds.forEach((A,
K)=>{k[H++]=K});this._indexInvalid=!1;this._index.clear();this._index.load(k)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(k=>this._idByBounds.has(k))))),this._boundsToLoad.length=0)}}var m=h.prototype;m.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};m.delete=function(k){const H=this._boundsById.get(k);this._boundsById.delete(k);H&&(this._idByBounds.delete(H),
this._indexInvalid||this._index.remove(H))};m.forEachInBounds=function(k,H){this._loadIndex();ha(this._index,k,A=>H(this._idByBounds.get(A)))};m.get=function(k){return this._boundsById.get(k)};m.has=function(k){return this._boundsById.has(k)};m.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};m.set=function(k,H){if(!this._indexInvalid){const A=this._boundsById.get(k);A&&(this._index.remove(A),this._idByBounds.delete(A))}this._boundsById.set(k,H);
H&&(this._idByBounds.set(H,k),this._indexInvalid||(this._boundsToLoad.push(H),5E4<this._boundsToLoad.length&&this._loadIndex()))};f._createClass(h,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const k=R.empty();for(const H of this._boundsById.values())H&&(k[0]=Math.min(H[0],k[0]),k[1]=Math.min(H[1],k[1]),k[2]=Math.max(H[2],k[2]),k[3]=Math.max(H[3],k[3]));return k}},{key:"valid",get:function(){return!this._indexInvalid}}]);return h}();l.BoundsStore=L;Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(l,f,ka,ca,R,ha){function T(y,x){L(y,0,y.children.length,x,y)}function L(y,x,B,E,U){U||(U=new D([]));U.minX=Infinity;U.minY=Infinity;U.maxX=-Infinity;U.maxY=-Infinity;for(let Y=x,M;Y<B;Y++)M=y.children[Y],h(U,y.leaf?E(M):M);return U}function h(y,x){y.minX=Math.min(y.minX,
x.minX);y.minY=Math.min(y.minY,x.minY);y.maxX=Math.max(y.maxX,x.maxX);y.maxY=Math.max(y.maxY,x.maxY)}function m(y,x){return y.minX-x.minX}function k(y,x){return y.minY-x.minY}function H(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function A(y){return y.maxX-y.minX+(y.maxY-y.minY)}function K(y,x){return y.minX<=x.minX&&y.minY<=x.minY&&x.maxX<=y.maxX&&x.maxY<=y.maxY}function e(y,x){return x.minX<=y.maxX&&x.minY<=y.maxY&&x.maxX>=y.minX&&x.maxY>=y.minY}function n(y,x,B,E,U){for(x=[x,B];x.length;){B=ca.assumeNonNull(x.pop());
const Y=ca.assumeNonNull(x.pop());if(B-Y<=E)continue;const M=Y+Math.ceil((B-Y)/E/2)*E;ha.quickselect(y,M,Y,B,U);x.push(Y,M,M,B)}}let z=function(){function y(B=9,E){this._compareMinX=m;this._compareMinY=k;this._toBBox=U=>U;this._maxEntries=Math.max(4,B||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));E&&("function"===typeof E?this._toBBox=E:this._initFormat(E));this.clear()}var x=y.prototype;x.destroy=function(){this.clear();O.prune();C.prune();u.prune();J.prune()};x.all=function(B){this._all(this._data,
B)};x.search=function(B,E){let U=this._data;const Y=this._toBBox;if(e(B,U))for(O.clear();U;){for(let M=0,P=U.children.length;M<P;M++){const r=U.children[M],v=U.leaf?Y(r):r;e(B,v)&&(U.leaf?E(r):K(B,v)?this._all(r,E):O.push(r))}U=O.pop()}};x.collides=function(B){let E=this._data;const U=this._toBBox;if(!e(B,E))return!1;for(O.clear();E;){for(let Y=0,M=E.children.length;Y<M;Y++){const P=E.children[Y],r=E.leaf?U(P):P;if(e(B,r)){if(E.leaf||K(B,r))return!0;O.push(P)}}E=O.pop()}return!1};x.load=function(B){if(!B.length)return this;
if(B.length<this._minEntries){for(let E=0,U=B.length;E<U;E++)this.insert(B[E]);return this}B=this._build(B.slice(0,B.length),0,B.length-1,0);if(this._data.children.length)if(this._data.height===B.height)this._splitRoot(this._data,B);else{if(this._data.height<B.height){const E=this._data;this._data=B;B=E}this._insert(B,this._data.height-B.height-1,!0)}else this._data=B;return this};x.insert=function(B){B&&this._insert(B,this._data.height-1);return this};x.clear=function(){this._data=new D([]);return this};
x.remove=function(B){if(!B)return this;let E=this._data,U=null,Y=0,M=!1,P;const r=this._toBBox(B);u.clear();for(J.clear();E||0<u.length;){E||(E=ca.assumeNonNull(u.pop()),U=u.data[u.length-1],Y=J.pop()??0,M=!0);if(E.leaf&&(P=ka.indexOf(E.children,B,E.children.length,E.indexHint),-1!==P)){E.children.splice(P,1);u.push(E);this._condense(u);break}M||E.leaf||!K(E,r)?U?(Y++,E=U.children[Y],M=!1):E=null:(u.push(E),J.push(Y),Y=0,U=E,E=E.children[0])}return this};x.toJSON=function(){return this._data};x.fromJSON=
function(B){this._data=B;return this};x._all=function(B,E){for(C.clear();B;){if(!0===B.leaf)for(const U of B.children)E(U);else C.pushArray(B.children);B=C.pop()??null}};x._build=function(B,E,U,Y){var M=U-E+1,P=this._maxEntries;if(M<=P)return B=new D(B.slice(E,U+1)),T(B,this._toBBox),B;Y||(Y=Math.ceil(Math.log(M)/Math.log(P)),P=Math.ceil(M/P**(Y-1)));const r=new w([]);r.height=Y;M=Math.ceil(M/P);P=M*Math.ceil(Math.sqrt(P));for(n(B,E,U,P,this._compareMinX);E<=U;E+=P){const v=Math.min(E+P-1,U);n(B,
E,v,M,this._compareMinY);for(let Z=E;Z<=v;Z+=M)r.children.push(this._build(B,Z,Math.min(Z+M-1,v),Y-1))}T(r,this._toBBox);return r};x._chooseSubtree=function(B,E,U,Y){for(;;){Y.push(E);if(!0===E.leaf||Y.length-1===U)break;let M=Infinity,P=Infinity,r=void 0;for(let v=0,Z=E.children.length;v<Z;v++){const ja=E.children[v],ta=H(ja),xa=(Math.max(ja.maxX,B.maxX)-Math.min(ja.minX,B.minX))*(Math.max(ja.maxY,B.maxY)-Math.min(ja.minY,B.minY))-ta;xa<P?(P=xa,M=ta<M?ta:M,r=ja):xa===P&&ta<M&&(M=ta,r=ja)}E=r||E.children[0]}return E};
x._insert=function(B,E,U){var Y=this._toBBox;U=U?B:Y(B);u.clear();Y=this._chooseSubtree(U,this._data,E,u);Y.children.push(B);for(h(Y,U);0<=E;)if(u.data[E].children.length>this._maxEntries)this._split(u,E),E--;else break;this._adjustParentBBoxes(U,u,E)};x._split=function(B,E){const U=B.data[E];var Y=U.children.length;const M=this._minEntries;this._chooseSplitAxis(U,M,Y);(Y=this._chooseSplitIndex(U,M,Y))?(Y=U.children.splice(Y,U.children.length-Y),Y=U.leaf?new D(Y):new w(Y),Y.height=U.height,T(U,this._toBBox),
T(Y,this._toBBox),E?B.data[E-1].children.push(Y):this._splitRoot(U,Y)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};x._splitRoot=function(B,E){this._data=new w([B,E]);this._data.height=B.height+1;T(this._data,this._toBBox)};x._chooseSplitIndex=function(B,E,U){let Y,M,P=void 0;Y=M=Infinity;for(let v=E;v<=U-E;v++){var r=L(B,0,v,this._toBBox);const Z=L(B,v,U,this._toBBox),ja=Math.max(0,Math.min(r.maxX,Z.maxX)-Math.max(r.minX,Z.minX))*Math.max(0,Math.min(r.maxY,
Z.maxY)-Math.max(r.minY,Z.minY));r=H(r)+H(Z);ja<Y?(Y=ja,P=v,M=r<M?r:M):ja===Y&&r<M&&(M=r,P=v)}return P};x._chooseSplitAxis=function(B,E,U){const Y=B.leaf?this._compareMinX:m,M=B.leaf?this._compareMinY:k,P=this._allDistMargin(B,E,U,Y);E=this._allDistMargin(B,E,U,M);P<E&&B.children.sort(Y)};x._allDistMargin=function(B,E,U,Y){B.children.sort(Y);Y=this._toBBox;var M=L(B,0,E,Y);const P=L(B,U-E,U,Y);let r=A(M)+A(P);for(let v=E;v<U-E;v++){const Z=B.children[v];h(M,B.leaf?Y(Z):Z);r+=A(M)}for(U=U-E-1;U>=E;U--)M=
B.children[U],h(P,B.leaf?Y(M):M),r+=A(P);return r};x._adjustParentBBoxes=function(B,E,U){for(;0<=U;U--)h(E.data[U],B)};x._condense=function(B){for(let E=B.length-1;0<=E;E--){const U=B.data[E];if(0===U.children.length)if(0<E){const Y=B.data[E-1],M=Y.children;M.splice(ka.indexOf(M,U,M.length,Y.indexHint),1)}else this.clear();else T(U,this._toBBox)}};x._initFormat=function(B){const E=["return a"," - b",";"];this._compareMinX=new Function("a","b",E.join(B[0]));this._compareMinY=new Function("a","b",E.join(B[1]));
this._toBBox=new Function("a","return {minX: a"+B[0]+", minY: a"+B[1]+", maxX: a"+B[2]+", maxY: a"+B[3]+"};")};return f._createClass(y)}();const O=new R,C=new R,u=new R,J=new R({deallocator:void 0});R=f._createClass(function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity});let Q=function(y){function x(){var B=y.apply(this,arguments)||this;B.height=1;B.indexHint=new ka.PositionHint;return B}f._inherits(x,y);return f._createClass(x)}(R),D=function(y){function x(B){var E=y.call(this)||
this;E.children=B;E.leaf=!0;return E}f._inherits(x,y);return f._createClass(x)}(Q),w=function(y){function x(B){var E=y.call(this)||this;E.children=B;E.leaf=!1;return E}f._inherits(x,y);return f._createClass(x)}(Q);l.BBox=R;l.PooledRBush=z;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(l,f){var ka={exports:{}};ka.exports;(function(ca){(function(R){R=R();void 0!==R&&(ca.exports=R)})(function(){function R(L,
h,m,k,H){for(;k>m;){if(600<k-m){var A=k-m+1,K=h-m+1,e=Math.log(A),n=.5*Math.exp(2*e/3);e=.5*Math.sqrt(e*n*(A-n)/A)*(0>K-A/2?-1:1);R(L,h,Math.max(m,Math.floor(h-K*n/A+e)),Math.min(k,Math.floor(h+(A-K)*n/A+e)),H)}A=L[h];K=m;n=k;ha(L,m,h);for(0<H(L[k],A)&&ha(L,m,k);K<n;){ha(L,K,n);K++;for(n--;0>H(L[K],A);)K++;for(;0<H(L[n],A);)n--}0===H(L[m],A)?ha(L,m,n):(n++,ha(L,n,k));n<=h&&(m=n+1);h<=n&&(k=n-1)}}function ha(L,h,m){var k=L[h];L[h]=L[m];L[m]=k}function T(L,h){return L<h?-1:L>h?1:0}return function(L,
h,m,k,H){R(L,h,m||0,k||L.length-1,H||T)}})})(ka);f=f.getDefaultExportFromCjs(ka.exports);l.quickselect=f})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(l,f,ka,ca){l.optimizedFeatureQueryEngineAdapter={getObjectId(R){return R.objectId},getAttributes(R){return R.attributes},getAttribute(R,ha){return R.attributes[ha]},cloneWithGeometry(R,ha){return new ka.OptimizedFeature(ha,R.attributes,
null,R.objectId)},getGeometry(R){return R.geometry},getCentroid(R,ha){null==R.centroid&&(R.centroid=f.getCentroidOptimizedGeometry(new ca,R.geometry,ha.hasZ,ha.hasM));return R.centroid}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(l){function f(ca,R,ha,T,L,h,m=1){h=L?h?4:3:h?3:2;let k=ha,H=ha+h,A=0,K=0,e=ha=0,n=0;for(let z=0,O=T-1;z<O;z++,k+=h,H+=h){T=R[k];const C=R[k+1],u=R[k+2],J=R[H],Q=R[H+1],D=R[H+2];let w=
T*Q-J*C;e+=w;A+=(T+J)*w;K+=(C+Q)*w;L&&(w=T*D-J*u,ha+=(u+D)*w,n+=w);T<ca[0]&&(ca[0]=T);T>ca[1]&&(ca[1]=T);C<ca[2]&&(ca[2]=C);C>ca[3]&&(ca[3]=C);L&&(u<ca[4]&&(ca[4]=u),u>ca[5]&&(ca[5]=u))}0<e*m&&(e*=-1);0<n*m&&(n*=-1);if(!e)return null;ca=[A,K,.5*e];L&&(ca[3]=ha,ca[4]=.5*n);return ca}function ka(ca,R,ha,T,L){L=T?L?4:3:L?3:2;let h=R,m=R+L,k=0,H=0,A=0,K=0;for(let O=0,C=ha-1;O<C;O++,h+=L,m+=L){var e=ca[h];const u=ca[h+1],J=ca[h+2],Q=ca[m],D=ca[m+1],w=ca[m+2];if(T){var n=Q-e;var z=D-u;const y=w-J;n=Math.sqrt(n*
n+z*z+y*y)}else n=Q-e,z=D-u,n=Math.sqrt(n*n+z*z);n&&(k+=n,T?(e=[e+.5*(Q-e),u+.5*(D-u),J+.5*(w-J)],H+=n*e[0],A+=n*e[1],K+=n*e[2]):(e=[e+.5*(Q-e),u+.5*(D-u)],H+=n*e[0],A+=n*e[1]))}return 0<k?T?[H/k,A/k,K/k]:[H/k,A/k]:0<ha?T?[ca[R],ca[R+1],ca[R+2]]:[ca[R],ca[R+1]]:null}l.getCentroidOptimizedGeometry=function(ca,R,ha,T,L){if(null==R||!R.lengths.length)return null;const h="upperLeft"===L?.originPosition?-1:1;ca.lengths.length&&(ca.lengths.length=0);ca.coords.length&&(ca.coords.length=0);L=ca.coords;const m=
[],k=ha?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:H,coords:A}=R,K=ha?T?4:3:T?3:2;let e=0;for(var n of H){const z=f(k,A,e,n,ha,T,h);z&&m.push(z);e+=n*K}m.sort((z,O)=>{let C=h*z[2]-h*O[2];0===C&&ha&&(C=z[4]-O[4]);return C});m.length&&(n=6*m[0][2],L[0]=m[0][0]/n,L[1]=m[0][1]/n,ha&&(n=
6*m[0][4],L[2]=0!==n?m[0][3]/n:0),L[0]<k[0]||L[0]>k[1]||L[1]<k[2]||L[1]>k[3]||ha&&(L[2]<k[4]||L[2]>k[5]))&&(L.length=0);if(!L.length)if(R=R.lengths[0]?ka(A,0,H[0],ha,T):null)L[0]=R[0],L[1]=R[1],ha&&2<R.length&&(L[2]=R[2]);else return null;return ca};l.lineCentroid=ka;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(l,f,ka,ca,R,ha,T,L,h,m,k,H){async function A(w,y,x){if(!w)return null;var {where:B}=w;w.where=B=B&&B.trim();if(!B||/^1 *= *1$/.test(B)||y&&y===B)w.where=null;if(!w.geometry)return w;y=await e(w);w.distance=0;w.units=null;"esriSpatialRelEnvelopeIntersects"===w.spatialRel&&({spatialReference:B}=w.geometry,y=ha.getGeometryExtent(y),y.spatialReference=B);if(y){await H.checkProjectionSupport(y.spatialReference,x);B=y.spatialReference;y=K(y,x)&&T.isExtent(y)?{spatialReference:B,rings:[[[y.xmin,
y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]]]}:y;B=(await L.normalizeCentralMeridian(T.fromJSON(y)))[0];if(null==B)throw O;const E="quantizationParameters"in w&&w.quantizationParameters?.tolerance||"maxAllowableOffset"in w&&w.maxAllowableOffset||0;y=E&&K(y,x)?{densificationStep:8*E}:void 0;B=B.toJSON();y=await H.project(B,B.spatialReference,x,y);if(!y)throw O;y.spatialReference=x;w.geometry=y}return w}function K(w,y){if(!w)return!1;const x=w.spatialReference;return(T.isExtent(w)||
T.isPolygon(w)||T.isPolyline(w))&&!h.equals(x,y)&&!R.canProjectWithoutEngine(x,y)}async function e(w){const {distance:y,units:x}=w,B=w.geometry;if(null==y||"vertexAttributes"in B)return B;var E=B.spatialReference;w=x?z.fromJSON(x):ca.getUnitString(E);E=E&&(h.isGeographic(E)||h.isWebMercator(E))?B:await H.checkProjectionSupport(E,h.WGS84).then(()=>H.project(B,h.WGS84));return(await n())(E.spatialReference,E,y,w)}async function n(){return(await new Promise((w,y)=>l(["../../../geometry/geometryEngineJSON"],
w,y))).geodesicBuffer}const z=new ka.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),O=Object.freeze({}),C=new k,u=new k,J=new k,Q={esriGeometryPoint:m.convertToPoint,esriGeometryPolyline:m.convertToPolyline,esriGeometryPolygon:m.convertToPolygon,esriGeometryMultipoint:m.convertToMultipoint},D=(w,y)=>"_geVersion"!==w?y:void 0;f.QUERY_ENGINE_EMPTY_RESULT=
O;f.cleanFromGeometryEngine=function(w){return w&&"_geVersion"in w?JSON.parse(JSON.stringify(w,D)):w};f.getGeometry=function(w,y,x,B,E,U,Y=y,M=x){const P=y&&Y,r=x&&M;B=null!=B?"coords"in B?B:B.geometry:null;if(null==B)return null;if(E)return y=m.generalizeOptimizedGeometry(u,B,y,x,w,E,Y,M),U&&(y=m.quantizeOptimizedGeometry(J,y,P,r,w,U)),Q[w]?.(y,P,r)??null;if(U)return U=m.quantizeOptimizedGeometry(J,B,y,x,w,U,Y,M),Q[w]?.(U,P,r)??null;m.removeZMValues(C,B,y,x,Y,M);return Q[w]?.(C,P,r)??null};f.normalizeQuery=
async function(w,y,x){const {outFields:B,orderByFields:E,groupByFieldsForStatistics:U,outStatistics:Y}=w;if(B)for(var M=0;M<B.length;M++)B[M]=B[M].trim();if(E)for(M=0;M<E.length;M++)E[M]=E[M].trim();if(U)for(M=0;M<U.length;M++)U[M]=U[M].trim();if(Y)for(M=0;M<Y.length;M++)Y[M].onStatisticField&&(Y[M].onStatisticField=Y[M].onStatisticField.trim());w.geometry&&!w.outSR&&(w.outSR=w.geometry.spatialReference);return A(w,y,x)};f.normalizeQueryLike=A;f.transformCentroid=function(w,y,x,B=w.hasZ,E=w.hasM){if(null==
y)return null;const U=w.hasZ&&B,Y=w.hasM&&E;return x?(w=m.quantizeOptimizedGeometry(J,y,w.hasZ,w.hasM,"esriGeometryPoint",x,B,E),m.convertToPoint(w,U,Y)):m.convertToPoint(y,U,Y)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(l,f,ka,ca,R,ha,T,L,h,m,k){function H(C){const u=[];let J=0,Q=0;for(let D=0;D<C.length;D++){const w=C[D];let y=null;for(let x=0;x<w.length;x++)y=w[x],u.push(y),0===x?Q=J=y[0]:(J=Math.min(J,y[0]),Q=Math.max(Q,y[0]));y&&u.push([(J+Q)/2,0])}return u}function A(C,u){if(!(C instanceof ha||C instanceof R))throw O.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new ka("straightLineDensify: the input geometry is neither polyline nor polygon");var J=T.getGeometryParts(C);
const Q=[];for(const w of J){J=[];Q.push(J);J.push([w[0][0],w[0][1]]);for(let y=0;y<w.length-1;y++){const x=w[y][0],B=w[y][1],E=w[y+1][0],U=w[y+1][1];var D=Math.sqrt((E-x)*(E-x)+(U-B)*(U-B));const Y=(U-B)/D,M=(E-x)/D,P=D/u;if(1<P){for(let r=1;r<=P-1;r++){const v=r*u;J.push([M*v+x,Y*v+B])}D=(D+Math.floor(P-1)*u)/2;J.push([M*D+x,Y*D+B])}J.push([E,U])}}return"polygon"===C.type?new R({rings:Q,spatialReference:C.spatialReference}):new ha({paths:Q,spatialReference:C.spatialReference})}function K(C,u,J){u&&
(C=A(C,1E6),C=h.webMercatorToGeographic(C,!0));J&&(C=T.updatePolyGeometry(C,J));return C}function e(C,u,J){if(Array.isArray(C)){var Q=C[0];Q>u?(J=T.offsetMagnitude(Q,u),C[0]=Q+-2*J*u):Q<J&&(u=T.offsetMagnitude(Q,J),C[0]=Q+-2*u*J)}else Q=C.x,Q>u?(J=T.offsetMagnitude(Q,u),C=C.clone().offset(-2*J*u,0)):Q<J&&(u=T.offsetMagnitude(Q,J),C=C.clone().offset(-2*u*J,0));return C}function n(C,u){let J=-1;for(let Q=0;Q<u.cutIndexes.length;Q++){const D=u.cutIndexes[Q],w=u.geometries[Q],y=T.getGeometryParts(w);
for(let x=0;x<y.length;x++){const B=y[x];B.some(E=>{if(180>E[0])return!0;E=0;for(var U=0;U<B.length;U++){var Y=B[U][0];E=Y>E?Y:E}E=Number(E.toFixed(9));E=-360*T.offsetMagnitude(E,180);for(U=0;U<B.length;U++)Y=w.getPoint(x,U),w.setPoint(x,U,Y.clone().offset(E,0));return!0})}if(D===J)if("polygon"===C[0].type)for(const x of T.getGeometryParts(w))C[D]=C[D].addRing(x);else{if("polyline"===C[0].type)for(const x of T.getGeometryParts(w))C[D]=C[D].addPath(x)}else J=D,C[D]=w}return C}async function z(C,u,
J){if(!Array.isArray(C))return z([C],u);u&&"string"!==typeof u&&O.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var Q="string"===typeof u?u:u?.url??f.geometryServiceUrl;let D,w,y;let x=0;var B=[];u=[];for(var E of C)if(null==E)u.push(E);else{if(!U){var U=E.spatialReference;var Y=L.getInfo(U);var M=(D=U.isWebMercator)?102100:4326;w=T.cutParams[M].maxX;y=T.cutParams[M].minX;var P=T.cutParams[M].plus180Line;M=T.cutParams[M].minus180Line}if(Y)if("mesh"===
E.type)u.push(E);else if("point"===E.type)u.push(e(E.clone(),w,y));else if("multipoint"===E.type){var r=E.clone();r.points=r.points.map(v=>e(v,w,y));u.push(r)}else if("extent"===E.type)r=E.clone()._normalize(!1,!1,Y),u.push(r.rings?new R(r):r);else if(E.extent){r=E.extent;const v=2*T.offsetMagnitude(r.xmin,y)*w;let Z=0===v?E.clone():T.updatePolyGeometry(E.clone(),v);r.offset(v,0);r.intersects(P)&&r.xmax!==w?(x=r.xmax>x?r.xmax:x,Z=K(Z,D),B.push(Z),u.push("cut")):r.intersects(M)&&r.xmin!==y?(x=2*r.xmax*
w>x?2*r.xmax*w:x,Z=K(Z,D,360),B.push(Z),u.push("cut")):u.push(Z)}else u.push(E.clone());else u.push(E)}U=T.offsetMagnitude(x,w);Y=-90;P=U;for(E=new ha;0<U;)M=-180+360*U,E.addPath([[M,Y],[M,-1*Y]]),Y*=-1,U--;if(0<B.length&&0<P){U=await m.cut(Q,B,E,J);U=n(B,U);Y=[];B=[];for(P=0;P<u.length;P++)E=u[P],"cut"!==E?B.push(E):(E=U.shift(),M=C[P],null!=M&&"polygon"===M.type&&M.rings&&1<M.rings.length&&E.rings.length>=M.rings.length?(Y.push(E),B.push("simplify")):B.push(D?h.geographicToWebMercator(E):E));if(!Y.length)return B;
u=await k.simplify(Q,Y,J);C=[];for(J=0;J<B.length;J++)Q=B[J],"simplify"!==Q?C.push(Q):C.push(D?h.geographicToWebMercator(u.shift()):u.shift());return C}C=[];for(J=0;J<u.length;J++)Q=u[J],"cut"!==Q?C.push(Q):(Q=B.shift(),C.push(!0===D?h.geographicToWebMercator(Q):Q));return C}const O=ca.getLogger("esri.geometry.support.normalizeUtils");l.getDenormalizedExtent=function(C){if(!C)return null;const u=C.extent;if(!u)return null;var J=C.spatialReference&&L.getInfo(C.spatialReference);if(!J)return u;const [Q,
D]=J.valid;({width:J}=u);let {xmin:w,xmax:y}=u;[w,y]=[y,w];if("extent"===C.type||0===J||J<=D||J>2*D||w<Q||y>D)return u;let x;switch(C.type){case "polygon":if(1<C.rings.length)x=H(C.rings);else return u;break;case "polyline":if(1<C.paths.length)x=H(C.paths);else return u;break;case "multipoint":x=C.points}C=u.clone();for(let B=0;B<x.length;B++){let E=x[B][0];0>E?(E+=D,y=Math.max(E,y)):(E-=D,w=Math.min(E,w))}C.xmin=w;C.xmax=y;return C.width<J?(C.xmin-=D,C.xmax-=D,C):u};l.normalizeCentralMeridian=z;
l.normalizeMapX=function(C,u){if(u=L.getInfo(u)){const [J,Q]=u.valid;u=Q-J;if(C<J)for(;C<J;)C+=u;if(C>Q)for(;C>Q;)C-=u}return C};l.straightLineDensify=A;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(l,f,ka,ca){function R(ha){return ca.isPolygon(ha)?ha.rings:ha.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new f({paths:[[[2.0037508342788905E7,
-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ka.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ka.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:ka.WGS84}),minus180Line:new f({paths:[[[-180,-180],[-180,180]]],spatialReference:ka.WGS84})}};l.cutParams=f;l.getGeometryParts=R;l.offsetMagnitude=function(ha,
T){return Math.ceil((ha-T)/(2*T))};l.updatePolyGeometry=function(ha,T){const L=R(ha);for(const h of L)for(const m of h)m[0]+=T;return ha};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(l,f,ka,ca,R){l.cut=async function(ha,T,L,h){ha=R.parseUrl(ha);const m=T[0].spatialReference;T={...h,query:{...ha.query,f:"json",sr:JSON.stringify(m),
target:JSON.stringify({geometryType:ca.getJsonType(T[0]),geometries:T}),cutter:JSON.stringify(L)}};T=await ka(ha.path+"/cut",T);const {cutIndexes:k,geometries:H=[]}=T.data;return{cutIndexes:k,geometries:H.map(A=>{A=ca.fromJSON(A);A.spatialReference=m;return A})}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(l,f,ka,ca,R,ha){function T(L,h,m){const k=
{};for(const A in L)if("declaredClass"!==A){var H=L[A];if(null!=H&&"function"!==typeof H)if(Array.isArray(H)){k[A]=[];for(let K=0;K<H.length;K++)k[A][K]=T(H[K])}else"object"===typeof H?H.toJSON?(H=H.toJSON(m&&m[A]),k[A]=h?H:JSON.stringify(H)):k[A]=h?H:JSON.stringify(H):k[A]=H}return k}l.asValidOptions=function(L,h){return h?{...h,query:{...(L??{}),...h.query}}:{query:L}};l.encode=T;l.getToken=function(L,h){return L?ha.supportsApiKey(L)&&(h||f.apiKey)?h||f.apiKey:ka.id?.findCredential(L)?.token:null};
l.parseUrl=function(L){return"string"===typeof L?R.urlToObject(L):ca.clone(L)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports","../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(l,f,ka,ca,R){l.simplify=async function(ha,T,L){const h="string"===typeof ha?ka.urlToObject(ha):ha;ha=T[0].spatialReference;const m=ca.getJsonType(T[0]);T={...L,query:{...h.query,f:"json",sr:ha.wkid??
JSON.stringify(ha),geometries:JSON.stringify(R.encodeGeometries(T))}};({data:T}=await f(h.path+"/simplify",T));return R.decodeGeometries(T.geometries,m,ha)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(l,f){l.decodeGeometries=function(ka,ca,R){const ha=f.getGeometryType(ca);return ka.map(T=>{T=ha.fromJSON(T);T.spatialReference=R;return T})};l.encodeGeometries=function(ka){return{geometryType:f.getJsonType(ka[0]),
geometries:ka.map(ca=>ca.toJSON())}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(l,f,ka,ca,R,ha,T){function L(e,n){if(!n)return null;if("x"in n){var z={x:0,y:0};
[z.x,z.y]=e(n.x,n.y,k);null!=n.z&&(z.z=n.z);null!=n.m&&(z.m=n.m);return z}return"xmin"in n?(z={xmin:0,ymin:0,xmax:0,ymax:0},[z.xmin,z.ymin]=e(n.xmin,n.ymin,k),[z.xmax,z.ymax]=e(n.xmax,n.ymax,k),n.hasZ&&(z.zmin=n.zmin,z.zmax=n.zmax,z.hasZ=!0),n.hasM&&(z.mmin=n.mmin,z.mmax=n.mmax,z.hasM=!0),z):"rings"in n?{rings:h(n.rings,e),hasM:n.hasM,hasZ:n.hasZ}:"paths"in n?{paths:h(n.paths,e),hasM:n.hasM,hasZ:n.hasZ}:"points"in n?{points:m(n.points,e),hasM:n.hasM,hasZ:n.hasZ}:null}function h(e,n){const z=[];for(const O of e)z.push(m(O,
n));return z}function m(e,n){const z=[];for(const O of e)e=n(O[0],O[1],[0,0]),z.push(e),2<O.length&&e.push(O[2]),3<O.length&&e.push(O[3]);return z}const k=[0,0],H=L.bind(null,T.lngLatToXY),A=L.bind(null,T.xyToLngLat),K=new (function(){function e(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var n=e.prototype;n.push=async function(z,O,C){if(!(z&&z.length&&O&&C)||ha.equals(O,C))return z;const u={geometries:z,inSpatialReference:O,outSpatialReference:C,resolve:null};this._jobs.push(u);
return new Promise(J=>{u.resolve=J;null===this._timer&&(this._timer=setTimeout(this._process,10))})};n._process=function(){this._timer=null;const z=this._jobs.shift();if(z){var {geometries:O,inSpatialReference:C,outSpatialReference:u,resolve:J}=z;T.canProject(C,u)?ha.isWebMercator(u)?J(O.map(H)):J(O.map(A)):J(ca.projectMany(R.jsonAdapter,O,C,u,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return f._createClass(e)}());l.checkProjectionSupport=async function(e,n){e&&
n&&(e=Array.isArray(e)?e.map(z=>null!=z.geometry?z.geometry.spatialReference:null).filter(ka.isSome):[e],await ca.initializeProjection(e.map(z=>({source:z,dest:n}))))};l.project=function(e,n,z,O){if(!e)return e;z||(z=n,n=e.spatialReference);return ha.isValid(n)&&ha.isValid(z)&&!ha.equals(n,z)?T.canProject(n,z)?(e=ha.isWebMercator(z)?H(e):A(e),e.spatialReference=z,e):ca.projectMany(R.jsonAdapter,[e],n,z,null,O)[0]:e};l.projectMany=function(e,n,z){return K.push(e,n,z)};Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(l,f,ka,ca,R,ha,T,L,h,m,k,H,A,K,e,n,z,O,C,u,J,Q,D,w,y,x){function B(P){return null!=P&&P.every(r=>"exceedslimit"!==r.statisticType)}let E=f._createClass(function(P,r=null,v,Z,ja){this.attributes=P;this.geometry=v;this.centroid=Z;this.filterFlags=ja;this.groupId=-1;this.displayId=r});const U=new T.MemCacheStorage(2E6);let Y=0,M=function(){function P(v){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:C.queryCapabilities};this.geometryType=v.geometryType;this.hasM=!!v.hasM;
this.hasZ=!!v.hasZ;this.objectIdField=v.objectIdField;this.spatialReference=v.spatialReference;this.definitionExpression=v.definitionExpression;this.featureStore=v.featureStore;this.aggregateAdapter=v.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=v.timeInfo;v.cacheSpatialQueries&&(this._geometryQueryCache=new T.MemCache(Y++ +"$$",U));this.fieldsIndex=new w(v.fields);v.scheduler&&v.priority&&(this._frameTask=v.scheduler.registerTask(v.priority))}
var r=P.prototype;r.destroy=function(){this._frameTask=ha.removeMaybe(this._frameTask);this.clearCache();ha.destroyMaybe(this._geometryQueryCache);this._changeHandle=ha.removeMaybe(this._changeHandle);ha.destroyMaybe(this.fieldsIndex)};r.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};r.executeQuery=async function(v,Z){try{return(await this._executeQuery(v,{},Z)).createQueryResponse()}catch(ja){if(ja!==D.QUERY_ENGINE_EMPTY_RESULT)throw ja;
return(new u.QueryEngineResult([],v,this)).createQueryResponse()}};r.executeQueryForCount=async function(v={},Z){try{return(await this._executeQuery(v,{returnGeometry:!1,returnCentroid:!1,outSR:null},Z)).createQueryResponseForCount()}catch(ja){if(ja!==D.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}};r.executeQueryForExtent=async function(v,Z){const ja=v.outSR;try{const ta=await this._executeQuery(v,{returnGeometry:!0,returnCentroid:!1,outSR:null},Z),xa=ta.size;if(!xa)return{count:0,extent:null};const Ca=
await this._getBounds(ta.items,ta.spatialReference,ja||this.spatialReference);return{count:xa,extent:Ca}}catch(ta){if(ta===D.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ta;}};r.executeQueryForIds=async function(v,Z){return this.executeQueryForIdSet(v,Z).then(ja=>Array.from(ja))};r.executeQueryForIdSet=async function(v,Z){try{const ja=await this._executeQuery(v,{returnGeometry:!0,returnCentroid:!1,outSR:null},Z),ta=ja.items,xa=new Set;await this._reschedule(()=>{for(const Ca of ta)xa.add(ja.featureAdapter.getObjectId(Ca))},
Z);return xa}catch(ja){if(ja===D.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ja;}};r.executeQueryForSnapping=async function(v,Z){const {point:ja,distance:ta,returnEdge:xa,returnVertex:Ca}=v;if(!xa&&!Ca)return{candidates:[]};const Ga=await this._reschedule(()=>this._checkQuerySupport(v.query),Z),Ha=!e.equals(ja.spatialReference,this.spatialReference);Ha&&await O.checkProjectionSupport(ja.spatialReference,this.spatialReference);var Fa="number"===typeof ta?ta:ta.x,Oa="number"===typeof ta?ta:ta.y;
Fa={xmin:ja.x-Fa,xmax:ja.x+Fa,ymin:ja.y-Oa,ymax:ja.y+Oa,spatialReference:ja.spatialReference};Fa=Ha?O.project(Fa,this.spatialReference):Fa;if(!Fa)return{candidates:[]};Oa=(await K.normalizeCentralMeridian(A.fromJSON(ja),null,{signal:Z}))[0];const Sa=(await K.normalizeCentralMeridian(A.fromJSON(Fa),null,{signal:Z}))[0];if(null==Oa||null==Sa)return{candidates:[]};const Va=new u.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Sa.toJSON())),Z),Ga,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Va),Z);await this._reschedule(()=>this._executeTimeQuery(Va),Z);await this._reschedule(()=>this._executeAttributesQuery(Va),Z);Z=Oa.toJSON();Z=Ha?O.project(Z,this.spatialReference):Z;return Va.createSnappingResponse({...v,point:Z,distance:Ha?Math.max(Fa.xmax-Fa.xmin,Fa.ymax-Fa.ymin)/2:ta},ja.spatialReference)};r.executeQueryForLatestObservations=async function(v,Z){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new ca("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:v,timeInfo:this.timeInfo});try{const ja=await this._executeQuery(v,{},Z);await this._reschedule(()=>this._filterLatest(ja),Z);return ja.createQueryResponse()}catch(ja){if(ja!==D.QUERY_ENGINE_EMPTY_RESULT)throw ja;return(new u.QueryEngineResult([],v,this)).createQueryResponse()}};r.executeQueryForSummaryStatistics=async function(v={},Z,ja){const {field:ta,normalizationField:xa,valueExpression:Ca}=Z;return(await this._getQueryEngineResultForStats(v,{field:ta,normalizationField:xa,valueExpression:Ca},
ja)).createSummaryStatisticsResponse(Z)};r.executeQueryForUniqueValues=async function(v={},Z,ja){const {field:ta,field2:xa,field3:Ca,valueExpression:Ga}=Z;return(await this._getQueryEngineResultForStats(v,{field:ta,field2:xa,field3:Ca,valueExpression:Ga},ja)).createUniqueValuesResponse(Z)};r.executeQueryForClassBreaks=async function(v={},Z,ja){const {field:ta,normalizationField:xa,valueExpression:Ca}=Z;return(await this._getQueryEngineResultForStats(v,{field:ta,normalizationField:xa,valueExpression:Ca},
ja)).createClassBreaksResponse(Z)};r.executeQueryForHistogram=async function(v={},Z,ja){const {field:ta,normalizationField:xa,valueExpression:Ca}=Z;return(await this._getQueryEngineResultForStats(v,{field:ta,normalizationField:xa,valueExpression:Ca},ja)).createHistogramResponse(Z)};r.fetchRecomputedExtents=async function(v){const [Z,ja]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),
this.spatialReference,this.spatialReference),null!=this._timeExtentPromise?this._timeExtentPromise:this._timeExtentPromise=Q.getTimeExtent(this.timeInfo,this.featureStore)]);L.throwIfAborted(v);return{fullExtent:Z,timeExtent:ja}};r._getBounds=async function(v,Z,ja){const ta=m.set(m.create(),m.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(v,xa=>m.expandWithAABB(ta,xa));v={xmin:ta[0],ymin:ta[1],xmax:ta[3],ymax:ta[4],spatialReference:D.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&
isFinite(ta[2])&&isFinite(ta[5])&&(v.zmin=ta[2],v.zmax=ta[5]);Z=O.project(v,Z,ja);Z.spatialReference=D.cleanFromGeometryEngine(ja);0===Z.xmax-Z.xmin&&(ja=h.getMetersPerUnitForSR(Z.spatialReference),Z.xmin-=ja,Z.xmax+=ja);0===Z.ymax-Z.ymin&&(ja=h.getMetersPerUnitForSR(Z.spatialReference),Z.ymin-=ja,Z.ymax+=ja);this.hasZ&&null!=Z.zmin&&null!=Z.zmax&&0===Z.zmax-Z.zmin&&(ja=h.getMetersPerUnitForSR(Z.spatialReference),Z.zmin-=ja,Z.zmax+=ja);return Z};r._schedule=async function(v,Z){return null!=this._frameTask?
this._frameTask.schedule(v,Z):v(x.noBudget)};r._reschedule=async function(v,Z){return null!=this._frameTask?this._frameTask.reschedule(v,Z):v(x.noBudget)};r._getAllFeaturesQueryEngineResult=async function(v){return new u.QueryEngineResult(await this._getAllFeatures(),v,this)};r._getAllFeatures=async function(){if(null==this._allFeaturesPromise){const ja=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(ta=>ja.push(ta))})().then(()=>ja)}const v=this._allFeaturesPromise,Z=await v;
return v===this._allFeaturesPromise?Z.slice():this._getAllFeatures()};r._executeQuery=async function(v,Z,ja){v=R.clone(v);v=await this._schedule(()=>D.normalizeQuery(v,this.definitionExpression,this.spatialReference),ja);v=await this._reschedule(()=>this._checkQuerySupport(v),ja);v={...v,...Z};const ta=await this._reschedule(()=>this._executeSceneFilterQuery(v,ja),ja),xa=await this._reschedule(()=>this._executeGeometryQuery(v,ta,ja),ja);await this._reschedule(()=>this._executeAggregateIdsQuery(xa),
ja);await this._reschedule(()=>this._executeObjectIdsQuery(xa),ja);await this._reschedule(()=>this._executeTimeQuery(xa),ja);await this._reschedule(()=>this._executeAttributesQuery(xa),ja);return xa};r._executeSceneFilterQuery=async function(v,Z){if(null==v.sceneFilter)return null;const {outSR:ja,returnGeometry:ta,returnCentroid:xa}=v;var Ca=this.featureStore.featureSpatialReference,Ga=v.sceneFilter.geometry;const Ha=null==Ca||e.equals(Ca,Ga.spatialReference)?Ga:O.project(Ga,Ca);if(!Ha)return null;
Ca=ta||xa;Ca=e.isValid(ja)&&!e.equals(this.spatialReference,ja)&&Ca?async Va=>this._project(Va,ja):Va=>Va;const Fa=this.featureAdapter;Ga=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ha)),Z);if("disjoint"===v.sceneFilter.spatialRelationship){if(!Ga.length)return null;const Va=new Set;for(var Oa of Ga)Va.add(Fa.getObjectId(Oa));const eb=await this._reschedule(()=>this._getAllFeatures(),Z);Oa=await this._reschedule(async()=>{const kb=await J.getSpatialQueryOperator("esriSpatialRelDisjoint",
Ha,this.geometryType,this.hasZ,this.hasM),lb=await this._runSpatialFilter(eb,db=>!Va.has(Fa.getObjectId(db))||kb(Fa.getGeometry(db)),Z);return new u.QueryEngineResult(lb,v,this)},Z);return Ca(Oa)}if(!Ga.length)return new u.QueryEngineResult([],v,this);if(this._canExecuteSinglePass(Ha,v))return Ca(new u.QueryEngineResult(Ga,v,this));const Sa=await J.getSpatialQueryOperator("esriSpatialRelContains",Ha,this.geometryType,this.hasZ,this.hasM);Oa=await this._runSpatialFilter(Ga,Va=>Sa(Fa.getGeometry(Va)),
Z);return Ca(new u.QueryEngineResult(Oa,v,this))};r._executeGeometryQuery=async function(v,Z,ja){if(null!=Z&&0===Z.items.length)return Z;v=null!=Z?Z.query:v;const {geometry:ta,outSR:xa,spatialRel:Ca,returnGeometry:Ga,returnCentroid:Ha}=v;var Fa=this.featureStore.featureSpatialReference;const Oa=!ta||null==Fa||e.equals(Fa,ta.spatialReference)?ta:O.project(ta,Fa),Sa=Ga||Ha,Va=e.isValid(xa)&&!e.equals(this.spatialReference,xa),eb=this._geometryQueryCache&&null==Z?Va&&Sa?JSON.stringify({originalFilterGeometry:ta,
spatialRelationship:Ca,outSpatialReference:xa}):JSON.stringify({originalFilterGeometry:ta,spatialRelationship:Ca}):null;Fa=eb?this._geometryQueryCache.get(eb):null;if(null!=Fa)return new u.QueryEngineResult(Fa,v,this);Fa=async q=>{Va&&Sa&&await this._project(q,xa);eb&&this._geometryQueryCache.put(eb,q.items,q.items.length+1);return q};if(!Oa)return Fa(null!=Z?Z:await this._getAllFeaturesQueryEngineResult(v));const kb=this.featureAdapter;let lb=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ta)),
ja);if("esriSpatialRelDisjoint"===Ca){if(!lb.length)return Fa(null!=Z?Z:await this._getAllFeaturesQueryEngineResult(v));const q=new Set;for(var db of lb)q.add(kb.getObjectId(db));const ea=null!=Z?Z.items:await this._reschedule(()=>this._getAllFeatures(),ja);db=await this._reschedule(async()=>{const F=await J.getSpatialQueryOperator(Ca,Oa,this.geometryType,this.hasZ,this.hasM),ba=await this._runSpatialFilter(ea,p=>!q.has(kb.getObjectId(p))||F(kb.getGeometry(p)),ja);return new u.QueryEngineResult(ba,
v,this)},ja);return Fa(db)}if(null!=Z){const q=new ka.PositionHint;lb=lb.filter(ea=>0<=ka.indexOf(Z.items,ea,Z.items.length,q))}if(!lb.length)return Fa=new u.QueryEngineResult([],v,this),eb&&this._geometryQueryCache.put(eb,Fa.items,1),Fa;if(this._canExecuteSinglePass(Oa,v))return Fa(new u.QueryEngineResult(lb,v,this));const c=await J.getSpatialQueryOperator(Ca,Oa,this.geometryType,this.hasZ,this.hasM);db=await this._runSpatialFilter(lb,q=>c(kb.getGeometry(q)),ja);return Fa(new u.QueryEngineResult(db,
v,this))};r._executeAggregateIdsQuery=function(v){if(0!==v.items.length&&v.query.aggregateIds&&v.query.aggregateIds.length&&null!=this.aggregateAdapter){var Z=new Set;for(const ta of v.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ta).forEach(xa=>Z.add(xa));var ja=this.featureAdapter.getObjectId;v.items=v.items.filter(ta=>Z.has(ja(ta)))}};r._executeObjectIdsQuery=function(v){if(0!==v.items.length&&v.query.objectIds&&v.query.objectIds.length){var Z=new Set(v.query.objectIds),ja=this.featureAdapter.getObjectId;
v.items=v.items.filter(ta=>Z.has(ja(ta)))}};r._executeTimeQuery=function(v){if(0!==v.items.length){var Z=Q.getTimeOperator(this.timeInfo,v.query.timeExtent,this.featureAdapter);null!=Z&&(v.items=v.items.filter(Z))}};r._executeAttributesQuery=function(v){if(0!==v.items.length){var Z=z.getWhereClause(v.query.where,this.fieldsIndex);if(Z){if(!Z.isStandardized)throw new TypeError("Where clause is not standardized");v.items=v.items.filter(ja=>Z.testFeature(ja,this.featureAdapter))}}};r._runSpatialFilter=
async function(v,Z,ja){if(!Z)return v;if(null==this._frameTask)return v.filter(Ga=>Z(Ga));let ta=0;const xa=[],Ca=async Ga=>{for(;ta<v.length;){const Ha=v[ta++];Z(Ha)&&(xa.push(Ha),Ga.madeProgress());Ga.done&&await this._reschedule(Fa=>Ca(Fa),ja)}};return this._reschedule(Ga=>Ca(Ga),ja).then(()=>xa)};r._filterLatest=function(v){const {trackIdField:Z,startTimeField:ja,endTimeField:ta}=this.timeInfo,xa=ta||ja,Ca=new Map,Ga=this.featureAdapter.getAttribute;for(const Ha of v.items){const Fa=Ga(Ha,Z),
Oa=Ga(Ha,xa),Sa=Ca.get(Fa);(!Sa||Oa>Ga(Sa,xa))&&Ca.set(Fa,Ha)}v.items=Array.from(Ca.values())};r._canExecuteSinglePass=function(v,Z){({spatialRel:Z}=Z);return J.canQueryWithRBush(v)&&("esriSpatialRelEnvelopeIntersects"===Z||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===Z||"esriSpatialRelContains"===Z||"esriSpatialRelWithin"===Z))};r._project=async function(v,Z){if(!Z||e.equals(this.spatialReference,Z))return v;const ja=this.featureAdapter;Z=await O.projectMany(v.items.map(ta=>
D.getGeometry(this.geometryType,this.hasZ,this.hasM,ja.getGeometry(ta))),this.spatialReference,Z);v.items=Z.map((ta,xa)=>ja.cloneWithGeometry(v.items[xa],n.convertFromGeometry(ta,this.hasZ,this.hasM)));return v};r._getQueryBBoxes=function(v){if(J.canQueryWithRBush(v)){if(A.isExtent(v))return[k.fromValues(v.xmin,v.ymin,v.xmax,v.ymax)];if(A.isPolygon(v))return v.rings.map(Z=>k.fromValues(Math.min(Z[0][0],Z[2][0]),Math.min(Z[0][1],Z[2][1]),Math.max(Z[0][0],Z[2][0]),Math.max(Z[0][1],Z[2][1])))}return[H.getBoundsXY(k.create(),
v)]};r._searchFeatures=async function(v){const Z=new Set;await Promise.all(v.map(ja=>this.featureStore.forEachInBounds(ja,ta=>Z.add(ta))));v=Array.from(Z.values());Z.clear();return v};r._checkStatisticsSupport=async function(v,Z){if(0>(v.distance??0)||null!=v.geometryPrecision||v.multipatchOption||v.pixelSize||v.relationParam||v.text||v.outStatistics||v.groupByFieldsForStatistics||v.having||v.orderByFields)throw new ca("feature-store:unsupported-query","Unsupported query options",{query:v});this._checkAttributesQuerySupport(v);
return Promise.all([this._checkStatisticsParamsSupport(Z,v),J.checkSpatialQuerySupport(v,this.geometryType,this.spatialReference),O.checkProjectionSupport(this.spatialReference,v.outSR)]).then(()=>v)};r._checkStatisticsParamsSupport=async function(v,Z){var ja=[];v.valueExpression&&({arcadeUtils:ja}=await y.loadArcade(),ja=ja.extractFieldNames(v.valueExpression));v.field&&ja.push(v.field);v.field2&&ja.push(v.field2);v.field3&&ja.push(v.field3);v.normalizationField&&ja.push(v.normalizationField);if(!ja.length&&
!v.valueExpression)throw new ca("feature-store:unsupported-query","field or valueExpression is required",{params:v});z.validateFields(this.fieldsIndex,ja,{errorMessage:"Cannot calculate statistics for missing fields",query:Z});z.validateFieldTypes(this.fieldsIndex,ja,{expressionName:"statistics",query:Z})};r._checkQuerySupport=async function(v){if(0>(v.distance??0)||null!=v.geometryPrecision||v.multipatchOption||v.pixelSize||v.relationParam||v.text)throw new ca("feature-store:unsupported-query","Unsupported query options",
{query:v});this._checkAttributesQuerySupport(v);this._checkStatisticsQuerySupport(v);return Promise.all([J.checkSpatialQuerySupport(v,this.geometryType,this.spatialReference),O.checkProjectionSupport(this.spatialReference,v.outSR)]).then(()=>v)};r._checkAttributesQuerySupport=function(v){const {outFields:Z,orderByFields:ja,returnDistinctValues:ta,outStatistics:xa}=v,Ca=xa?xa.map(Ga=>Ga.outStatisticFieldName&&Ga.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ja&&0<ja.length){const Ga=ja.map(Ha=>
{const Fa=Ha.toLowerCase();return Fa.includes(" asc")?Fa.split(" asc")[0]:Fa.includes(" desc")?Fa.split(" desc")[0]:Ha}).filter(Ha=>!Ca.includes(Ha));z.validateFields(this.fieldsIndex,Ga,{expressionName:"orderByFields",query:v})}if(Z&&0<Z.length)z.validateFields(this.fieldsIndex,Z,{expressionName:"outFields",query:v});else if(ta)throw new ca("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:v});z.validateWhere(this.fieldsIndex,v.where,v)};r._checkStatisticsQuerySupport=
function(v){const {outStatistics:Z,groupByFieldsForStatistics:ja,having:ta}=v;var xa=ja&&ja.length,Ca=Z&&Z.length;if(ta){if(!xa||!Ca)throw new ca("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:v});z.validateHaving(this.fieldsIndex,ta,Z,v)}if(Ca&&B(Z)){Ca=Z.map(Ga=>Ga.onStatisticField).filter(Boolean);z.validateFields(this.fieldsIndex,Ca,{expressionName:"onStatisticFields",query:v});xa&&z.validateFields(this.fieldsIndex,ja,{expressionName:"groupByFieldsForStatistics",
query:v});xa=new Set([...z.validNumericTypesKebabDict.jsonValues,...z.validDateTypesKebabDict.jsonValues]);Ca=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...z.validNumericTypesKebabDict.apiValues,...z.validDateTypesKebabDict.apiValues]);for(const Ga of Z){const {onStatisticField:Ha,statisticType:Fa}=Ga;if(("percentile_disc"===Fa||"percentile_cont"===Fa)&&"statisticParameters"in Ga){const {statisticParameters:Oa}=Ga;if(!Oa)throw new ca("feature-store:unsupported-query","statisticParameters should be set for percentile type",
{definition:Ga,query:v});}else if("count"!==Fa&&"min"!==Fa&&"max"!==Fa&&Ha&&z.hasInvalidFieldType(Ha,this.fieldsIndex,xa))throw new ca("feature-store:unsupported-query",`outStatistics with '${Fa}' statistic type, only supports ${Ca} field types`,{definition:Ga,query:v});}}};r._getQueryEngineResultForStats=async function(v,Z,ja){v=R.clone(v);try{v=await this._schedule(()=>D.normalizeQuery(v,this.definitionExpression,this.spatialReference),ja);v=await this._reschedule(()=>this._checkStatisticsSupport(v,
Z),ja);const ta=await this._reschedule(()=>this._executeSceneFilterQuery(v,ja),ja),xa=await this._reschedule(()=>this._executeGeometryQuery(v,ta,ja),ja);await this._reschedule(()=>this._executeAggregateIdsQuery(xa),ja);await this._reschedule(()=>this._executeObjectIdsQuery(xa),ja);await this._reschedule(()=>this._executeTimeQuery(xa),ja);await this._reschedule(()=>this._executeAttributesQuery(xa),ja);return xa}catch(ta){if(ta!==D.QUERY_ENGINE_EMPTY_RESULT)throw ta;return new u.QueryEngineResult([],
v,this)}};f._createClass(P,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return P}();l.Feature=E;l.QueryEngine=M;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(l,f,ka){l.RemoveMode=void 0;(function(T){T[T.ALL=0]="ALL";T[T.SOME=1]="SOME"})(l.RemoveMode||(l.RemoveMode={}));let ca=function(){function T(h,m,k){this.name=h;this._storage=
m;this.id=`${ha++}:`;this.maxSize=this.size=0;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);k&&(this._storage.registerRemoveFunc(this.id,k),this._removeFunc=!0)}var L=T.prototype;L.destroy=function(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null};L.resetHitRate=function(){this._hit=this._miss=0};L.put=function(h,m,k,H=0){this._storage.put(this,h,m,k,H)};L.get=function(h){h=this._storage.get(this,
h);void 0===h?++this._miss:++this._hit;return h};L.pop=function(h){h=this._storage.pop(this,h);void 0===h?++this._miss:++this._hit;return h};L.updateSize=function(h,m,k){this._storage.updateSize(this,h,m,k)};L.clear=function(){this._storage.clear(this)};L.clearAll=function(){this._storage.clearAll()};L.resetStats=function(){this._storage.resetStats()};f._createClass(T,[{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},
{key:"performanceInfo",get:function(){return this._storage.performanceInfo}}]);return T}(),R=function(){function T(h=10485760){this._maxSize=h;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new ka;this._users=new ka}var L=T.prototype;L.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};L.register=function(h){this._users.push(h)};L.deregister=function(h){this._users.removeUnordered(h)};L.registerRemoveFunc=function(h,m){this._removeFuncs.push([h,
m])};L.deregisterRemoveFunc=function(h){this._removeFuncs.filterInPlace(m=>m[0]!==h)};L.put=function(h,m,k,H,A){m=h.id+m;const K=this._db.get(m);K&&(this._size-=K.size,h.size-=K.size,this._db.delete(m),K.entry!==k&&this._notifyRemove(m,K.entry,l.RemoveMode.ALL));H>this._maxSize?this._notifyRemove(m,k,l.RemoveMode.ALL):void 0===k?console.warn("Refusing to cache undefined entry "):!H||0>H?console.warn("Refusing to cache entry with invalid size "+H):(A=1+Math.max(A,-3)- -3,this._db.set(m,{entry:k,size:H,
lifetime:A,lives:A}),this._size+=H,h.size+=H,this._checkSizeLimits())};L.updateSize=function(h,m,k,H){m=h.id+m;const A=this._db.get(m);if(A&&A.entry===k){this._size-=A.size;for(h.size-=A.size;H>this._maxSize;)if(H=this._notifyRemove(m,k,l.RemoveMode.SOME),!(null!=H&&0<H)){this._db.delete(m);return}A.size=H;this._size+=H;h.size+=H;this._checkSizeLimits()}};L.pop=function(h,m){m=h.id+m;const k=this._db.get(m);if(k)return this._size-=k.size,h.size-=k.size,this._db.delete(m),++this._hit,k.entry;++this._miss};
L.get=function(h,m){m=h.id+m;h=this._db.get(m);if(void 0===h)++this._miss;else return this._db.delete(m),h.lives=h.lifetime,this._db.set(m,h),++this._hit,h.entry};L.resetStats=function(){this._hit=this._miss=0;this._users.forAll(h=>h.resetHitRate())};L.clear=function(h){const m=h.id;this._db.forEach((k,H)=>{H.startsWith(m)&&(this._size-=k.size,this._db.delete(H),this._notifyRemove(H,k.entry,l.RemoveMode.ALL))});h.size=0};L.clearAll=function(){this._db.forEach((h,m)=>this._notifyRemove(m,h.entry,l.RemoveMode.ALL));
this._users.forEach(h=>h.size=0);this._size=0;this._db.clear()};L._getHitRate=function(){return this._hit/(this._hit+this._miss)};L._notifyRemove=function(h,m,k){let H;this._removeFuncs.some(A=>h.startsWith(A[0])?(A=A[1](m,k),"number"===typeof A&&(H=A),!0):!1);return H};L._checkSizeLimits=function(){if(this._size>this._maxSize)for(const [h,m]of this._db)if(this._purgeItem(h,m),this._size<=.9*this.maxSize)return;this._users.forEach(h=>{if(0<h.maxSize&&h.size>h.maxSize)for(const [m,k]of this._db)if(m.startsWith(h.id)&&
(this._purgeItem(m,k,h),h.size<=.9*h.maxSize))break})};L._purgeItem=function(h,m,k=this._users.find(H=>h.startsWith(H.id))){this._db.delete(h);if(1>=m.lives){this._size-=m.size;k&&(k.size-=m.size);const H=this._notifyRemove(h,m.entry,l.RemoveMode.SOME);null!=H&&0<H&&(this._size+=H,k&&(k.size+=H),m.lives=m.lifetime,m.size=H,this._db.set(h,m))}else--m.lives,this._db.set(h,m)};f._createClass(T,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(h){this._maxSize=
Math.max(h,0);this._checkSizeLimits()}},{key:"performanceInfo",get:function(){const h={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},m={},k=[];this._db.forEach((K,e)=>{const n=K.lifetime;k[n]=(k[n]||0)+K.size;this._users.forAll(z=>{const {id:O,name:C}=z;e.startsWith(O)&&(m[C]=(m[C]||0)+K.size)})});const H={};this._users.forAll(K=>{const e=K.name;"hitRate"in K&&"number"===typeof K.hitRate&&
!isNaN(K.hitRate)&&0<K.hitRate?(m[e]=m[e]||0,H[e]=Math.round(100*K.hitRate)+"%"):H[e]="0%"});var A=Object.keys(m);A.sort((K,e)=>m[e]-m[K]);A.forEach(K=>h[K]=Math.round(m[K]/2**20)+"MB / "+H[K]);for(A=k.length-1;0<=A;--A){const K=k[A];K&&(h["Priority "+(A+-3-1)]=Math.round(K/this._size*100)+"%")}return h}}]);return T}(),ha=0;l.MIN_PRIORITY=-3;l.MemCache=ca;l.MemCacheStorage=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/jsonMap","../../../core/sql/WhereClauseCache"],function(l,f,ka,ca){function R(z,O,C={}){O=ha(z,O);if(!O)throw new f("feature-store:unsupported-query","invalid SQL expression",{expression:z});const u=C.expressionName||"expression";if(C.validateStandardized&&!O.isStandardized)throw new f("feature-store:unsupported-query",`${u} is not standard`,{expression:z});if(C.validateAggregate&&!O.isAggregate)throw new f("feature-store:unsupported-query",`${u} does not contain a valid aggregate function`,
{expression:z});return O.fieldNames}function ha(z,O){return z?H.get(z,O):null}function T(z,O,C={}){C.errorMessage||(C.errorMessage=C.expressionName?`${C.expressionName} contains invalid fields`:"Fields are invalid");h(z,O,(u,J)=>J.has(u),C)}function L(z,O,C={}){C.errorMessage||(C.errorMessage=C.expressionName?`${C.expressionName} only supports ${n} field types`:`Only ${n} field types are supported`);h(z,O,(u,J)=>!k(u,J),C)}function h(z,O,C,u={}){const J=u.verifyExpression??!0,Q=[];for(const D of O)if(O=
C(D,z),"*"!==D&&!O)if(J){O=m(D);try{const w=R(O,z,{validateStandardized:!0});h(z,w,C,u)}catch(w){O=w?.details;if(O?.expression)throw w;O?.invalidFields?Q.push(...O.invalidFields):Q.push(D)}}else Q.push(D);if(Q.length)throw new f("feature-store:unsupported-query",u.errorMessage,{invalidFields:Q,query:u.query});}function m(z){return z.split(" as ")[0]}function k(z,O,C=e){return(z=O.get(z))?!C.has(z.type):!1}const H=new ca.WhereClauseCache(50,500);ca=new ka.JSONMap({esriFieldTypeString:"string"});const A=
new ka.JSONMap({esriFieldTypeOID:"oid",esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long"}),K=new ka.JSONMap({esriFieldTypeDate:"date"});ka=new ka.JSONMap({esriFieldTypeGUID:"guid",esriFieldTypeGlobalId:"global-id"});const e=new Set([...A.jsonValues,...K.jsonValues,...ca.jsonValues,...ka.jsonValues]),n=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...A.apiValues,...K.apiValues,...ca.apiValues,
...ka.apiValues]);l.getAliasFromFieldName=function(z){return z.split(" as ")[1]};l.getExpressionFromFieldName=m;l.getWhereClause=ha;l.hasInvalidFieldType=k;l.validDateTypesKebabDict=K;l.validGuidTypesKebabDict=ka;l.validNumericTypesKebabDict=A;l.validStringTypesKebabDict=ca;l.validateFieldTypes=L;l.validateFields=T;l.validateHaving=function(z,O,C,u){if(!O)return!0;const J=R(O,z,{validateAggregate:!0,expressionName:"having"});T(z,J,{expressionName:"having",query:u});L(z,J,{expressionName:"having",
query:u});if(!H.get(O,z)?.getExpressions().every(Q=>{const {aggregateType:D,field:w}=Q,y=z.get(w)?.name;return C.some(x=>{const {onStatisticField:B,statisticType:E}=x;return z.get(B)?.name===y&&E.toLowerCase().trim()===D})}))throw new f("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:O});return!0};l.validateWhere=function(z,O,C){if(!O)return!0;O=R(O,z,{validateStandardized:!0,expressionName:"where clause"});T(z,O,{expressionName:"where clause",
query:C});L(z,O,{expressionName:"where clause",query:C});return!0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../LRUCache","./WhereClause"],function(l,f,ka,ca){let R=function(){function ha(T,L){this._cache=new ka.LRUCache(T);this._invalidCache=new ka.LRUCache(L)}ha.prototype.get=function(T,L){const h=`${L.uid}:${T}`,m=this._cache.get(h);if(m)return m;if(void 0!==this._invalidCache.get(h))return null;
try{const k=ca.WhereClause.create(T,L);this._cache.put(h,k);return k}catch{return this._invalidCache.put(h,null),null}};return f._createClass(ha)}();l.WhereClauseCache=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./MemCache"],function(l,f,ka){let ca=function(){function R(T,L){this._storage=new ka.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=T;this._storage.register(this);
L&&this._storage.registerRemoveFunc("",L)}var ha=R.prototype;ha.destroy=function(){this._storage.deregister(this);this._storage.destroy()};ha.put=function(T,L,h=1){this._storage.put(this,T,L,h,1)};ha.pop=function(T){return this._storage.pop(this,T)};ha.get=function(T){return this._storage.get(this,T)};ha.clear=function(){this._storage.clearAll()};ha.resetHitRate=function(){};f._createClass(R,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(T){this._storage.maxSize=T}}]);return R}();
l.LRUCache=ca;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(l,f,ka,ca,R,ha){function T(M,P){M+="";return M.length>=P?M:Array(P-M.length+1).join("0")+M}function L(M,P,r="0",v="0",Z="0",ja="0",ta="",xa="0",Ca="0"){return"+"===ta||"-"===ta?(M=`${T(parseInt(M,10),4)}-${T(parseInt(P,10),2)}-${T(parseInt(r,
10),2)}`,P="",10>parseFloat(ja)&&(P="0"),v=`${T(parseInt(v,10),2)}:${T(parseInt(Z,10),2)}:${P+parseFloat(ja).toString()}`,ta=`${ta}${T(parseInt(xa,10),2)}:${T(parseInt(Ca,10),2)}`,new Date(M+"T"+v+ta)):new Date(parseInt(M,10),parseInt(P,10)-1,parseInt(r,10),parseInt(v,10),parseInt(Z,10),parseFloat(ja))}function h(M){let P=Q.exec(M);if(null!==P){const [,r,v,Z,ja,ta,xa]=P;return L(r,v,Z,ja,ta,xa)}P=D.exec(M);if(null!==P){const [,r,v,Z,ja,ta,xa,Ca,Ga,Ha]=P;return L(r,v,Z,ja,ta,xa,Ca,Ga,Ha)}P=w.exec(M);
if(null!==P){const [,r,v,Z,ja,ta,xa,Ca,Ga]=P;return L(r,v,Z,ja,ta,"0",xa,Ca,Ga)}P=y.exec(M);if(null!==P){const [,r,v,Z,ja,ta]=P;return L(r,v,Z,ja,ta)}P=J.exec(M);if(null!==P){const [,r,v,Z]=P;return L(r,v,Z)}throw Error("SQL Invalid Timestamp");}function m(M){const P=J.exec(M);if(null===P)try{return h(M)}catch{throw Error("SQL Invalid Date");}const [,r,v,Z]=P;return new Date(parseInt(r,10),parseInt(v,10)-1,parseInt(Z,10))}function k(M){return Array.isArray(M)?M:[M]}function H(M){return null!==M?!0!==
M:null}function A(M,P){return null!=M&&null!=P?!0===M&&!0===P:!1===M||!1===P?!1:null}function K(M,P){return null!=M&&null!=P?!0===M||!0===P:!0===M||!0===P?!0:null}function e(M,P){if(null==M)return null;let r=!1;for(const v of P)if(null==v)r=null;else if(M===v){r=!0;break}return r}function n(M,P,r){if(null==M)return null;let v="",Z=U.Normal;for(let ja=0;ja<P.length;ja++){const ta=P.charAt(ja);switch(Z){case U.Normal:ta===r?Z=U.Escaped:v="-[]/{}()*+?.\\^$|".includes(ta)?v+("\\"+ta):"%"===ta?v+".*":
"_"===ta?v+".":v+ta;break;case U.Escaped:v="-[]/{}()*+?.\\^$|".includes(ta)?v+("\\"+ta):v+ta,Z=U.Normal}}return(new RegExp("^"+v+"$","m")).test(M)}function z(M){return M instanceof Date?M.valueOf():M}function O(M,P,r){if(null==P||null==r)return null;P=z(P);r=z(r);switch(M){case "\x3c\x3e":return P!==r;case "\x3d":return P===r;case "\x3e":return P>r;case "\x3c":return P<r;case "\x3e\x3d":return P>=r;case "\x3c\x3d":return P<=r}}function C(M,P,r){if("||"===M)return R.evaluateFunction("concat",[P,r]);
if(P instanceof R.SqlInterval)if(r instanceof Date)switch(M){case "+":return new Date(P.valueInMilliseconds()+r.getTime());case "-":return P.valueInMilliseconds()-r.getTime();case "*":return P.valueInMilliseconds()*r.getTime();case "/":return P.valueInMilliseconds()/r.getTime()}else if(r instanceof R.SqlInterval)switch(M){case "+":return R.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()+r.valueInMilliseconds());case "-":return R.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()-
r.valueInMilliseconds());case "*":return P.valueInMilliseconds()*r.valueInMilliseconds();case "/":return P.valueInMilliseconds()/r.valueInMilliseconds()}else P=P.valueInMilliseconds();else if(r instanceof R.SqlInterval)if(P instanceof Date)switch(M){case "+":return new Date(r.valueInMilliseconds()+P.getTime());case "-":return new Date(P.getTime()-r.valueInMilliseconds());case "*":return P.getTime()*r.valueInMilliseconds();case "/":return P.getTime()/r.valueInMilliseconds()}else r=r.valueInMilliseconds();
else if(P instanceof Date&&"number"===typeof r)switch(r*=864E5,P=P.getTime(),M){case "+":return new Date(P+r);case "-":return new Date(P-r);case "*":return new Date(P*r);case "/":return new Date(P/r)}else if(r instanceof Date&&"number"===typeof P)switch(P*=864E5,r=r.getTime(),M){case "+":return new Date(P+r);case "-":return new Date(P-r);case "*":return new Date(P*r);case "/":return new Date(P/r)}switch(M){case "+":return P+r;case "-":return P-r;case "*":return P*r;case "/":return P/r}}function u(M,
P,r,v){M=v.getAttribute(M,P);return null!=M&&1===r[P]?new Date(M):M}const J=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,x=new Set(["current_timestamp","current_date","current_time"]);let B=function(){function M(){}
M.makeBool=function(P){return!0===P};M.featureValue=function(P,r,v,Z){return u(P,r,v,Z)};M.equalsNull=function(P){return null===P};M.applyLike=function(P,r,v){return n(P,r,v)};M.ensureArray=function(P){return k(P)};M.applyIn=function(P,r){return e(P,r)};M.currentDate=function(){const P=new Date;P.setHours(0,0,0,0);return P};M.makeSqlInterval=function(P,r,v){return R.SqlInterval.createFromValueAndQualifer(P,r,v)};M.convertInterval=function(P){return P instanceof R.SqlInterval?P.valueInMilliseconds():
P};M.currentTimestamp=function(){return new Date};M.compare=function(P,r,v){return O(P,r,v)};M.calculate=function(P,r,v){return C(P,r,v)};M.makeComparable=function(P){return z(P)};M.evaluateFunction=function(P,r){return R.evaluateFunction(P,r)};M.lookup=function(P,r){P=r[P];return void 0===P?null:P};M.between=function(P,r){return null==P||null==r[0]||null==r[1]?null:P>=r[0]&&P<=r[1]};M.notbetween=function(P,r){return null==P||null==r[0]||null==r[1]?null:P<r[0]||P>r[1]};M.ternaryNot=function(P){return H(P)};
M.ternaryAnd=function(P,r){return A(P,r)};M.ternaryOr=function(P,r){return K(P,r)};return f._createClass(M)}(),E=function(){function M(r,v){this.fieldsIndex=v;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=ha.WhereGrammar.parse(r);const {isStandardized:Z,isAggregate:ja,referencedFieldNames:ta}=this._extractExpressionInfo(v);this._referencedFieldNames=ta;this.isStandardized=Z;this.isAggregate=ja}M.create=function(r,v){return new M(r,v)};var P=M.prototype;P.testSet=
function(r,v=Y){const Z={};for(const ja of this.fieldNames)Z[ja]=r.map(ta=>v.getAttribute(ta,ja));return!!this._evaluateNode(this.parseTree,{attributes:Z},Y)};P.calculateValue=function(r,v=Y){r=this._evaluateNode(this.parseTree,r,v);return r instanceof R.SqlInterval?r.valueInMilliseconds()/864E5:r};P.calculateValueCompiled=function(r,v=Y){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(r,this.parameters,v,this._datefields);if(ka("esri-csp-restrictions"))return this.calculateValue(r,
v);this._compileMe();return this.parseTree._compiledVersion(r,this.parameters,v,this._datefields)};P.testFeature=function(r,v=Y){return!!this._evaluateNode(this.parseTree,r,v)};P.testFeatureCompiled=function(r,v=Y){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(r,this.parameters,v,this._datefields);if(ka("esri-csp-restrictions"))return this.testFeature(r,v);this._compileMe();return!!this.parseTree._compiledVersion(r,this.parameters,v,this._datefields)};P.getFunctions=
function(){const r=new Set;this._visitAll(this.parseTree,v=>{"function"===v.type&&r.add(v.name.toLowerCase())});return Array.from(r)};P.getExpressions=function(){const r=new Map;this._visitAll(this.parseTree,v=>{if("function"===v.type){const Z=v.name.toLowerCase();v=v.args.value[0];if("column-reference"===v.type){v=v.column;const ja=`${Z}-${v}`;r.has(ja)||r.set(ja,{aggregateType:Z,field:v})}}});return[...r.values()]};P.getVariables=function(){const r=new Set;this._visitAll(this.parseTree,v=>{"parameter"===
v.type&&r.add(v.value.toLowerCase())});return Array.from(r)};P._compileMe=function(){const r="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",r)).bind(B)};P._extractExpressionInfo=function(r){const v=[],Z=new Set;let ja=!0,ta=!0;this._visitAll(this.parseTree,xa=>{switch(xa.type){case "column-reference":const Ca=r?.get(xa.column);let Ga,Ha;Ca?Ga=Ha=Ca.name??"":(Ha=xa.column,
Ga=Ha.toLowerCase());Ca&&Ca.name&&("date"===Ca.type||"esriFieldTypeDate"===Ca.type)&&(this._datefields[Ca.name]=1);Z.has(Ga)||(Z.add(Ga),v.push(Ha));xa.column=Ha;break;case "function":const {name:Fa,args:Oa}=xa;xa=Oa.value.length;ja&&(ja=R.isStandardized(Fa,xa));ta&&(ta=ca.isAggregate(Fa,xa))}});return{referencedFieldNames:Array.from(v),isStandardized:ja,isAggregate:ta}};P._visitAll=function(r,v){if(null!=r)switch(v(r),r.type){case "when-clause":this._visitAll(r.operand,v);this._visitAll(r.value,
v);break;case "case-expression":for(const Z of r.clauses)this._visitAll(Z,v);"simple"===r.format&&this._visitAll(r.operand,v);null!==r.else&&this._visitAll(r.else,v);break;case "expression-list":for(const Z of r.value)this._visitAll(Z,v);break;case "unary-expression":this._visitAll(r.expr,v);break;case "binary-expression":this._visitAll(r.left,v);this._visitAll(r.right,v);break;case "function":this._visitAll(r.args,v)}};P.evaluateNodeToJavaScript=function(r){switch(r.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(r.value)+", "+JSON.stringify(r.qualifier)+","+JSON.stringify(r.op)+")";case "case-expression":var v="";if("simple"===r.format){var Z="this.makeComparable("+this.evaluateNodeToJavaScript(r.operand)+")";v="( ";for(let ja=0;ja<r.clauses.length;ja++)v+=" ("+Z+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(r.clauses[ja].operand)+")) ? ("+this.evaluateNodeToJavaScript(r.clauses[ja].value)+") : "}else for(v="( ",Z=0;Z<r.clauses.length;Z++)v+=" this.makeBool("+
this.evaluateNodeToJavaScript(r.clauses[Z].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(r.clauses[Z].value)+") : ";v=null!==r.else?v+this.evaluateNodeToJavaScript(r.else):v+"null";return v+" )";case "parameter":return"this.lookup("+JSON.stringify(r.value.toLowerCase())+",lookups)";case "expression-list":v="[";for(Z of r.value)"["!==v&&(v+=","),v+=this.evaluateNodeToJavaScript(Z);return v+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(r.expr)+")";
case "binary-expression":switch(r.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case "IS":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")";case "ISNOT":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")"}throw Error("Not Supported Operator "+r.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(r.value);case "date":return"(new Date("+m(r.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+h(r.value).getTime().toString()+"))";case "current-time":return"date"===r.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(r.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(r.name)+","+this.evaluateNodeToJavaScript(r.args)+")"}throw Error("Unsupported sql syntax "+r.type);};P._evaluateNode=function(r,v,Z){switch(r.type){case "interval":return v=
this._evaluateNode(r.value,v,Z),R.SqlInterval.createFromValueAndQualifer(v,r.qualifier,r.op);case "case-expression":if("simple"===r.format){var ja=z(this._evaluateNode(r.operand,v,Z));for(var ta=0;ta<r.clauses.length;ta++)if(ja===z(this._evaluateNode(r.clauses[ta].operand,v,Z)))return this._evaluateNode(r.clauses[ta].value,v,Z)}else for(ja=0;ja<r.clauses.length;ja++)if(!0===this._evaluateNode(r.clauses[ja].operand,v,Z))return this._evaluateNode(r.clauses[ja].value,v,Z);return null!==r.else?this._evaluateNode(r.else,
v,Z):null;case "parameter":return this.parameters[r.value.toLowerCase()];case "expression-list":ja=[];for(ta of r.value)ja.push(this._evaluateNode(ta,v,Z));return ja;case "unary-expression":return H(this._evaluateNode(r.expr,v,Z));case "binary-expression":switch(r.operator){case "AND":return A(this._evaluateNode(r.left,v,Z),this._evaluateNode(r.right,v,Z));case "OR":return K(this._evaluateNode(r.left,v,Z),this._evaluateNode(r.right,v,Z));case "IS":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(r.left,v,Z);case "ISNOT":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(r.left,v,Z);case "IN":return ja=k(this._evaluateNode(r.right,v,Z)),e(this._evaluateNode(r.left,v,Z),ja);case "NOT IN":return ja=k(this._evaluateNode(r.right,v,Z)),H(e(this._evaluateNode(r.left,v,Z),ja));case "BETWEEN":return ja=this._evaluateNode(r.left,v,Z),r=this._evaluateNode(r.right,v,Z),null==ja||null==r[0]||null==r[1]?null:ja>=z(r[0])&&ja<=
z(r[1]);case "NOTBETWEEN":return ja=this._evaluateNode(r.left,v,Z),r=this._evaluateNode(r.right,v,Z),null==ja||null==r[0]||null==r[1]?null:ja<z(r[0])||ja>z(r[1]);case "LIKE":return n(this._evaluateNode(r.left,v,Z),this._evaluateNode(r.right,v,Z),r.escape);case "NOT LIKE":return H(n(this._evaluateNode(r.left,v,Z),this._evaluateNode(r.right,v,Z),r.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return O(r.operator,this._evaluateNode(r.left,v,Z),this._evaluateNode(r.right,
v,Z));case "-":case "+":case "*":case "/":case "||":return C(r.operator,this._evaluateNode(r.left,v,Z),this._evaluateNode(r.right,v,Z))}case "null":case "boolean":case "string":case "number":return r.value;case "date":return m(r.value);case "timestamp":return h(r.value);case "current-time":return v=new Date,"date"===r.mode&&v.setHours(0,0,0,0),v;case "column-reference":return u(v,r.column,this._datefields,Z);case "data-type":return r.value;case "function":return v=this._evaluateNode(r.args,v,Z),this.isAggregate?
ca.aggregateFunction(r.name,v):R.evaluateFunction(r.name,v)}throw Error("Unsupported sql syntax "+r.type);};f._createClass(M,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,r=>{"current-time"===r.type?this._hasDateFunctions=!0:"function"===r.type&&(this._hasDateFunctions=this._hasDateFunctions||x.has(r.name.toLowerCase()))});
return this._hasDateFunctions}}]);return M}();var U;(function(M){M[M.Normal=0]="Normal";M[M.Escaped=1]="Escaped"})(U||(U={}));const Y={getAttribute(M,P){return(M&&"object"===typeof M.attributes?M.attributes:M)[P]}};l.WhereClause=E;l.defaultAttributeAdapter=Y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(l){function f(R){let ha=0;for(let T=0;T<R.length;T++)ha+=R[T];return ha/R.length}function ka(R){const ha=
f(R),T=R.length;let L=0;for(const h of R)L+=(h-ha)**2;return 1<T?L/(T-1):0}const ca={min:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:Math.min.apply(Math,R[0])},max:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:Math.max.apply(Math,R[0])},avg:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:f(R[0])},sum:{minParams:1,maxParams:1,evaluate:R=>{if(null==R[0])R=null;else{R=R[0];let ha=0;for(let T=0;T<R.length;T++)ha+=R[T];R=ha}return R}},stddev:{minParams:1,maxParams:1,evaluate:R=>null==
R[0]?null:Math.sqrt(ka(R[0]))},count:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:R[0].length},var:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:ka(R[0])}};l.aggregateFunction=function(R,ha){const T=ca[R.toLowerCase()];if(null==T)throw Error("Function Not Recognised");if(ha.length<T.minParams||ha.length>T.maxParams)throw Error(`Invalid Parameter count for call to ${R.toUpperCase()}`);return T.evaluate(ha)};l.isAggregate=function(R,ha){R=ca[R.toLowerCase()];return null!=R&&ha>=R.minParams&&
ha<=R.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(l,f,ka,ca,R){function ha(m){m=new Date(m.getTime());m.setHours(0,0,0,0);return m}function T(m,k){if(m instanceof Date)return k?ha(m):m;if("string"===typeof m||m instanceof String)if(m=R.DateTime.fromSQL(m),m.isValid)return k?
ha(m.toJSDate()):m.toJSDate();throw new ka.SqlError(ka.SqlErrorCodes.CannotCastValue);}let L=function(){function m(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}m._fixDefaults=function(k){if(null!==k.precision||null!==k.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};m._parseSecondsComponent=function(k,H){H.includes(".")?(H=H.split("."),k.second=parseFloat(H[0]),k.millis=parseInt(H[1],10)):k.second=parseFloat(H)};
m.createFromMilliseconds=function(k){const H=new m;H.second=k/1E3;return H};m.createFromValueAndQualifer=function(k,H,A){let K=null;const e=new m;e.op="-"===A?"-":"+";if("interval-period"===H.type){m._fixDefaults(H);A=RegExp("^[0-9]{1,}$");if("year"===H.period||"month"===H.period)throw Error("Year-Month Intervals not supported");if("second"===H.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(k))m._parseSecondsComponent(e,k);else throw Error("Illegal Interval");else if(A.test(k))e[H.period]=parseFloat(k);
else throw Error("Illegal Interval");}else{m._fixDefaults(H.start);m._fixDefaults(H.end);if("year"===H.start.period||"month"===H.start.period)throw Error("Year-Month Intervals not supported");if("year"===H.end.period||"month"===H.end.period)throw Error("Year-Month Intervals not supported");switch(H.start.period){case "day":switch(H.end.period){case "hour":K=RegExp("^[0-9]{1,} [0-9]{1,}$");if(K.test(k))e[H.start.period]=parseFloat(k.split(" ")[0]),e[H.end.period]=parseFloat(k.split(" ")[1]);else throw Error("Illegal Interval");
break;case "minute":K=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(K.test(k))e[H.start.period]=parseFloat(k.split(" ")[0]),k=k.split(" ")[1].split(":"),e.hour=parseFloat(k[0]),e.minute=parseFloat(k[1]);else throw Error("Illegal Interval");break;case "second":K=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(K.test(k))e[H.start.period]=parseFloat(k.split(" ")[0]),k=k.split(" ")[1].split(":"),e.hour=parseFloat(k[0]),e.minute=parseFloat(k[1]),m._parseSecondsComponent(e,
k[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(H.end.period){case "minute":K=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(K.test(k))e.hour=parseFloat(k.split(":")[0]),e.minute=parseFloat(k.split(":")[1]);else throw Error("Illegal Interval");break;case "second":K=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(K.test(k))k=k.split(":"),e.hour=parseFloat(k[0]),e.minute=parseFloat(k[1]),m._parseSecondsComponent(e,k[2]);else throw Error("Illegal Interval");
break;default:throw Error("Invalid Interval.");}break;case "minute":switch(H.end.period){case "second":K=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(K.test(k))k=k.split(":"),e.minute=parseFloat(k[0]),m._parseSecondsComponent(e,k[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return e};m.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+
36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return f._createClass(m)}();const h={extract:{minParams:2,maxParams:2,evaluate:([m,k])=>{if(null==k)return null;if(k instanceof Date)switch(m.toUpperCase()){case "SECOND":return k.getSeconds();case "MINUTE":return k.getMinutes();case "HOUR":return k.getHours();case "DAY":return k.getDate();case "MONTH":return k.getMonth()+1;case "YEAR":return k.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,
maxParams:3,evaluate:m=>{if(2===m.length){const [k,H]=m;return null==k||null==H?null:k.toString().substring(H-1)}if(3===m.length){const [k,H,A]=m;return null==k||null==H||null==A?null:0>=A?"":k.toString().substring(H-1,H+A-1)}}},position:{minParams:2,maxParams:2,evaluate:([m,k])=>null==m||null==k?null:k.indexOf(m)+1},trim:{minParams:2,maxParams:3,evaluate:m=>{var k=3===m.length,H=k?m[1]:" ";k=k?m[2]:m[1];if(null==H||null==k)return null;H=`(${ca.escapeRegExpString(H)})`;switch(m[0]){case "BOTH":return k.replaceAll(new RegExp(`^${H}*|${H}*$`,
"g"),"");case "LEADING":return k.replaceAll(new RegExp(`^${H}*`,"g"),"");case "TRAILING":return k.replaceAll(new RegExp(`${H}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.abs(m[0])},ceiling:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.ceil(m[0])},floor:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.floor(m[0])},log:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.log(m[0])},log10:{minParams:1,
maxParams:1,evaluate:m=>null==m[0]?null:Math.log(m[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.sin(m[0])},cos:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.cos(m[0])},tan:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.tan(m[0])},asin:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.asin(m[0])},acos:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.acos(m[0])},atan:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.atan(m[0])},
sign:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:0<m[0]?1:0>m[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:m=>null==m[0]||null==m[1]?null:m[0]**m[1]},mod:{minParams:2,maxParams:2,evaluate:m=>null==m[0]||null==m[1]?null:m[0]%m[1]},round:{minParams:1,maxParams:2,evaluate:m=>{const k=m[0];m=2===m.length?10**m[1]:1;return null==k?null:Math.round(k*m)/m}},truncate:{minParams:1,maxParams:2,evaluate:m=>null==m[0]?null:1===m.length?parseInt(m[0].toFixed(0),10):parseFloat(m[0].toFixed(m[1]))},
char_length:{minParams:1,maxParams:1,evaluate:m=>"string"===typeof m[0]||m[0]instanceof String?m[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:m=>{let k="";for(let H=0;H<m.length;H++){if(null==m[H])return null;k+=m[H].toString()}return k}},lower:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:m[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:m[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:m=>{for(const k of m)if(null!==
k)return k;return null}},cosh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.cosh(m[0])},sinh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.sinh(m[0])},tanh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.tanh(m[0])},nullif:{minParams:2,maxParams:2,evaluate:m=>{const k=m[0];m=m[1];return(k instanceof Date?k.valueOf():k)===(m instanceof Date?m.valueOf():m)?null:k}},cast:{minParams:2,maxParams:2,evaluate:m=>{var k=m[0];m=m[1];if(null===k)return null;switch(m.type){case "integer":k=
parseInt(k,10);if(isNaN(k))throw new ka.SqlError(ka.SqlErrorCodes.CannotCastValue);return k;case "smallint":k=parseInt(k,10);if(isNaN(k))throw new ka.SqlError(ka.SqlErrorCodes.CannotCastValue);if(32767<k||-32767>k)throw new ka.SqlError(ka.SqlErrorCodes.CannotCastValue);return k;case "float":case "real":k=parseFloat(k);if(isNaN(k))throw new ka.SqlError(ka.SqlErrorCodes.CannotCastValue);return k;case "date":return T(k,!0);case "timestamp":return T(k,!1);case "varchar":k=k.toString();if(k.length>m.size)throw new ka.SqlError(ka.SqlErrorCodes.CannotCastValue);
return k;default:throw new ka.SqlError(ka.SqlErrorCodes.InvalidDataType);}}}};l.SqlInterval=L;l.evaluateFunction=function(m,k){const H=h[m.toLowerCase()];if(null==H)throw Error("Function Not Recognised");if(k.length<H.minParams||k.length>H.maxParams)throw Error(`Invalid Parameter count for call to ${m.toUpperCase()}`);return H.evaluate(k)};l.isStandardized=function(m,k){m=h[m.toLowerCase()];return null!=m&&k>=m.minParams&&k<=m.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(l,f,ka){l.SqlErrorCodes=void 0;(function(L){L.InvalidFunctionParameters="InvalidFunctionParameters";L.UnsupportedSqlFunction="UnsupportedSqlFunction";L.UnsupportedOperator="UnsupportedOperator";L.UnsupportedSyntax="UnsupportedSyntax";L.UnsupportedIsRhs="UnsupportedIsRhs";L.UnsupportedIsLhs="UnsupportedIsLhs";L.InvalidDataType="InvalidDataType";L.CannotCastValue=
"CannotCastValue";L.MissingStatisticParameters="MissingStatisticParameters"})(l.SqlErrorCodes||(l.SqlErrorCodes={}));const ca={[l.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[l.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[l.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[l.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[l.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",
[l.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[l.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[l.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[l.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let R=function(L){function h(m,k){m=L.call(this,ka.doSubstitutions(ca[m],k))||this;m.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(m),
h);return m}f._inherits(h,L);return f._createClass(h)}(f._wrapNativeSuper(Error));l.FeatureSetErrorCodes=void 0;(function(L){L.NeverReach="NeverReach";L.NotImplemented="NotImplemented";L.Cancelled="Cancelled";L.InvalidStatResponse="InvalidStatResponse";L.InvalidRequest="InvalidRequest";L.RequestFailed="RequestFailed";L.MissingFeatures="MissingFeatures";L.AggregationFieldNotFound="AggregationFieldNotFound";L.DataElementsNotFound="DataElementsNotFound"})(l.FeatureSetErrorCodes||(l.FeatureSetErrorCodes=
{}));const ha={[l.FeatureSetErrorCodes.Cancelled]:"Cancelled",[l.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[l.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[l.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[l.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[l.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[l.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[l.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",
[l.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let T=function(L){function h(m,k){m=L.call(this,ka.doSubstitutions(ha[m],k))||this;m.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(m),h);return m}f._inherits(h,L);return f._createClass(h)}(f._wrapNativeSuper(Error));l.FeatureSetError=T;l.FeatureSetErrorMessages=ha;l.SqlError=R;l.SqlErrorMessages=ca;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(l,f){function ka(A){return A&&A.loc?`Line : ${A.loc.start?.line}, ${A.loc.start?.column}: `:""}function ca(A,K){try{if(!K)return A;for(const e in K){let n=K[e];n||(n="");A=A.replace("{"+e+"}",K[e])}}catch(e){}return A}l.ExecutionErrorCodes=void 0;(function(A){A.AsyncNotEnabled="AsyncNotEnabled";A.ModulesNotSupported="ModulesNotSupported";A.CircularModules="CircularModules";A.NeverReach="NeverReach";
A.UnsupportedHashType="UnsupportedHashType";A.InvalidParameter="InvalidParameter";A.UnexpectedToken="UnexpectedToken";A.Unrecognised="Unrecognised";A.UnrecognisedType="UnrecognisedType";A.MaximumCallDepth="MaximumCallDepth";A.BooleanConditionRequired="BooleanConditionRequired";A.TypeNotAllowedInFeature="TypeNotAllowedInFeature";A.KeyMustBeString="KeyMustBeString";A.WrongNumberOfParameters="WrongNumberOfParameters";A.CallNonFunction="CallNonFunction";A.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";
A.NoFunctionInDictionary="NoFunctionInDictionary";A.NoFunctionInArray="NoFunctionInArray";A.AssignModuleFunction="AssignModuleFunction";A.LogicExpressionOrAnd="LogicExpressionOrAnd";A.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";A.FunctionNotFound="FunctionNotFound";A.InvalidMemberAccessKey="InvalidMemberAccessKey";A.UnsupportedUnaryOperator="UnsupportUnaryOperator";A.InvalidIdentifier="InvalidIdentifier";A.MemberOfNull="MemberOfNull";A.UnsupportedOperator="UnsupportedOperator";A.Cancelled=
"Cancelled";A.ModuleAccessorMustBeString="ModuleAccessorMustBeString";A.ModuleExportNotFound="ModuleExportNotFound";A.Immutable="Immutable";A.OutOfBounds="OutOfBounds";A.IllegalResult="IllegalResult";A.FieldNotFound="FieldNotFound";A.PortalRequired="PortalRequired";A.LogicError="LogicError";A.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";A.KeyAccessorMustBeString="KeyAccessorMustBeString";A.WrongSpatialReference="WrongSpatialReference"})(l.ExecutionErrorCodes||(l.ExecutionErrorCodes={}));const R=
{[l.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[l.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[l.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[l.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[l.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[l.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",
[l.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[l.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[l.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[l.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[l.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[l.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[l.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",
[l.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[l.ExecutionErrorCodes.PortalRequired]:"Portal is required",[l.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[l.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[l.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[l.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[l.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
[l.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[l.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[l.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[l.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[l.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[l.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[l.ExecutionErrorCodes.Immutable]:"Object is immutable",
[l.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[l.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[l.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[l.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[l.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[l.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[l.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[l.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[l.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[l.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[l.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[l.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let ha=function(A){function K(...e){return A.call(this,...e)||this}f._inherits(K,A);return f._createClass(K)}(f._wrapNativeSuper(Error)),T=function(A){function K(e,
n){e=A.call(this,ka(n)+e.message,{cause:e})||this;e.loc=null;Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),K);n&&n.loc&&(e.loc=n.loc);return e}f._inherits(K,A);return f._createClass(K)}(ha),L=function(A){function K(e,n,z,O){e=A.call(this,"Execution error - "+ka(z)+ca(R[n],O))||this;e.loc=null;e.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),K);z&&z.loc&&(e.loc=z.loc);return e}f._inherits(K,
A);return f._createClass(K)}(f._wrapNativeSuper(Error)),h=function(A){function K(e,n,z,O){e=A.call(this,"Compilation error - "+ka(z)+ca(R[n],O))||this;e.loc=null;e.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),K);z&&z.loc&&(e.loc=z.loc);return e}f._inherits(K,A);return f._createClass(K)}(f._wrapNativeSuper(Error)),m=function(A){function K(){var e=A.call(this,"Uncompilable code structures")||this;e.declaredRootClass=
"esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),K);return e}f._inherits(K,A);return f._createClass(K)}(f._wrapNativeSuper(Error));l.ModuleErrorCodes=void 0;(function(A){A.UnrecognisedUri="UnrecognisedUri";A.UnsupportedUriProtocol="UnsupportedUriProtocol"})(l.ModuleErrorCodes||(l.ModuleErrorCodes={}));const k={[l.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[l.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};
let H=function(A){function K(e,n){e=A.call(this,ca(k[e],n))||this;e.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),K);return e}f._inherits(K,A);return f._createClass(K)}(f._wrapNativeSuper(Error));l.ArcadeCompilationError=h;l.ArcadeExecutionError=L;l.ArcadeUncompilableError=m;l.ErrorWithCause=ha;l.ExecutionErrorMessages=R;l.LocatableArcadeExecutionError=T;l.ModuleError=H;l.ModuleErrorMessages=k;l.doSubstitutions=ca;l.ensureArcadeExecutionError=
function(A,K,e){return"esri.arcade.arcadeexecutionerror"===e.declaredRootClass||"esri.arcade.arcadecompilationerror"===e.declaredRootClass?null===e.loc&&K&&K.loc?new T(e,{cause:e}):e:K&&K.loc?new T(e,{cause:e}):e};l.parsingValidationMessage=function(A,K,e){return"Parsing error - "+ka(A)+ca(R[K],e)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(l){function f(a,g={}){const N=JSON.stringify([a,g]);let da=gd[N];da||(da=new Intl.ListFormat(a,
g),gd[N]=da);return da}function ka(a,g={}){const N=JSON.stringify([a,g]);let da=Gc[N];da||(da=new Intl.DateTimeFormat(a,g),Gc[N]=da);return da}function ca(a,g={}){const N=JSON.stringify([a,g]);let da=Hc[N];da||(da=new Intl.NumberFormat(a,g),Hc[N]=da);return da}function R(a,g={}){const {base:N,...da}=g,ma=JSON.stringify([a,da]);let qa=Ic[ma];qa||(qa=new Intl.RelativeTimeFormat(a,g),Ic[ma]=qa);return qa}function ha(a){const g=[];for(let N=1;12>=N;N++){const da=Za.utc(2016,N,1);g.push(a(da))}return g}
function T(a){const g=[];for(let N=1;7>=N;N++){const da=Za.utc(2016,11,13+N);g.push(a(da))}return g}function L(a,g,N,da,ma){a=a.listingMode(N);return"error"===a?null:"en"===a?da(g):ma(g)}function h(a,g){if(m(a)||null===a)return g;if(a instanceof ic)return a;if("string"===typeof a){const N=a.toLowerCase();return"default"===N?g:"local"===N||"system"===N?mc.instance:"utc"===N||"gmt"===N?Eb.utcInstance:Eb.parseSpecifier(N)||Vb.create(a)}return k(a)?Eb.instance(a):"object"===typeof a&&a.offset&&"number"===
typeof a.offset?a:new me(a)}function m(a){return"undefined"===typeof a}function k(a){return"number"===typeof a}function H(a){return"number"===typeof a&&0===a%1}function A(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function K(a,g,N){if(0!==a.length)return a.reduce((da,ma)=>{ma=[g(ma),ma];return da?N(da[0],ma[0])===da[0]?da:ma:ma},null)[1]}function e(a,g){return g.reduce((N,da)=>{N[da]=a[da];return N},{})}function n(a,g){return Object.prototype.hasOwnProperty.call(a,
g)}function z(a,g,N){return H(a)&&a>=g&&a<=N}function O(a,g=2){return 0>a?"-"+(""+-a).padStart(g,"0"):(""+a).padStart(g,"0")}function C(a){if(!m(a)&&null!==a&&""!==a)return parseInt(a,10)}function u(a){if(!m(a)&&null!==a&&""!==a)return parseFloat(a)}function J(a){if(!m(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function Q(a,g,N=!1){g=10**g;return(N?Math.trunc:Math.round)(a*g)/g}function D(a){return 0===a%4&&(0!==a%100||0===a%400)}function w(a,g){var N=g-1;N=N-12*Math.floor(N/
12)+1;return 2===N?D(a+(g-N)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][N-1]}function y(a){let g=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(g=new Date(g),g.setUTCFullYear(a.year,a.month-1,a.day));return+g}function x(a){var g=a-1;g=(g+Math.floor(g/4)-Math.floor(g/100)+Math.floor(g/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===g?53:52}function B(a){return 99<a?a:a>xb.twoDigitCutoffYear?1900+a:2E3+a}function E(a,
g,N,da=null){a=new Date(a);const ma={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};da&&(ma.timeZone=da);return(g=(new Intl.DateTimeFormat(N,{timeZoneName:g,...ma})).formatToParts(a).find(qa=>"timezonename"===qa.type.toLowerCase()))?g.value:null}function U(a,g){a=parseInt(a,10);Number.isNaN(a)&&(a=0);g=parseInt(g,10)||0;g=0>a||Object.is(a,-0)?-g:g;return 60*a+g}function Y(a){const g=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(g))throw new Ba(`Invalid unit value ${a}`);
return g}function M(a,g){const N={};for(const da in a)if(n(a,da)){const ma=a[da];void 0!==ma&&null!==ma&&(N[g(da)]=Y(ma))}return N}function P(a,g){const N=Math.trunc(Math.abs(a/60)),da=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(g){case "short":return`${a}${O(N,2)}:${O(da,2)}`;case "narrow":return`${a}${N}${0<da?`:${da}`:""}`;case "techie":return`${a}${O(N,2)}${O(da,2)}`;default:throw new RangeError(`Value format ${g} is out of range for property format`);}}function r(a){return e(a,["hour","minute",
"second","millisecond"])}function v(a){switch(a){case "narrow":return[...ne];case "short":return[...Jc];case "long":return[...oe];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function Z(a){switch(a){case "narrow":return[...pe];case "short":return[...hd];case "long":return[...Kc];case "numeric":return"1234567".split("");default:return null}}function ja(a){switch(a){case "narrow":return[...qe];
case "short":return[...re];case "long":return[...se];default:return null}}function ta(a,g,N="always",da=!1){const ma={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var qa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===N&&qa)switch(N="days"===a,g){case 1:return N?"tomorrow":`next ${ma[a][0]}`;case -1:return N?"yesterday":`last ${ma[a][0]}`;case 0:return N?
"today":`this ${ma[a][0]}`}N=Object.is(g,-0)||0>g;g=Math.abs(g);qa=1===g;const ya=ma[a];a=da?qa?ya[1]:ya[2]||ya[1]:qa?ma[a][0]:a;return N?`${g} ${a} ago`:`in ${g} ${a}`}function xa(a,g){let N="";for(const da of a)N=da.literal?N+da.val:N+g(da.val);return N}function Ca(...a){a=a.reduce((g,N)=>g+N.source,"");return RegExp(`^${a}$`)}function Ga(...a){return g=>a.reduce(([N,da,ma],qa)=>{const [ya,Ia,Na]=qa(g,ma);return[{...N,...ya},Ia||da,Na]},[{},null,1]).slice(0,2)}function Ha(a,...g){if(null==a)return[null,
null];for(const [N,da]of g)if(g=N.exec(a))return da(g);return[null,null]}function Fa(...a){return(g,N)=>{const da={};let ma;for(ma=0;ma<a.length;ma++)da[a[ma]]=C(g[N+ma]);return[da,null,N+ma]}}function Oa(a,g,N){a=a[g];return m(a)?N:C(a)}function Sa(a,g){return[{hours:Oa(a,g,0),minutes:Oa(a,g+1,0),seconds:Oa(a,g+2,0),milliseconds:J(a[g+3])},null,g+4]}function Va(a,g){const N=!a[g]&&!a[g+1];a=U(a[g+1],a[g+2]);return[{},N?null:Eb.instance(a),g+3]}function eb(a,g){return[{},a[g]?Vb.create(a[g]):null,
g+1]}function kb(a){const [g,N,da,ma,qa,ya,Ia,Na,$a]=a,d="-"===g[0];a=Na&&"-"===Na[0];const ab=(Xa,zb=!1)=>void 0!==Xa&&(zb||Xa&&d)?-Xa:Xa;return[{years:ab(u(N)),months:ab(u(da)),weeks:ab(u(ma)),days:ab(u(qa)),hours:ab(u(ya)),minutes:ab(u(Ia)),seconds:ab(u(Na),"-0"===Na),milliseconds:ab(J($a),a)}]}function lb(a,g,N,da,ma,qa,ya){g={year:2===g.length?B(C(g)):C(g),month:Jc.indexOf(N)+1,day:C(da),hour:C(ma),minute:C(qa)};ya&&(g.second=C(ya));a&&(g.weekday=3<a.length?Kc.indexOf(a)+1:hd.indexOf(a)+1);return g}
function db(a){const [,g,N,da,ma,qa,ya,Ia,Na,$a,d,ab]=a;a=lb(g,ma,da,N,qa,ya,Ia);let Xa;Xa=Na?te[Na]:$a?0:U(d,ab);return[a,new Eb(Xa)]}function c(a){const [,g,N,da,ma,qa,ya,Ia]=a;return[lb(g,ma,da,N,qa,ya,Ia),Eb.utcInstance]}function q(a){const [,g,N,da,ma,qa,ya,Ia]=a;return[lb(g,Ia,N,da,ma,qa,ya),Eb.utcInstance]}function ea(a,g,N=!1){a={values:N?g.values:{...a.values,...(g.values||{})},loc:a.loc.clone(g.loc),conversionAccuracy:g.conversionAccuracy||a.conversionAccuracy,matrix:g.matrix||a.matrix};
return new gb(a)}function F(a,g,N,da,ma){a=a[ma][N];var qa=g[N]/a;qa=Math.sign(qa)!==Math.sign(da[ma])&&0!==da[ma]&&1>=Math.abs(qa)?0>qa?Math.floor(qa):Math.ceil(qa):Math.trunc(qa);da[ma]+=qa;g[N]-=qa*a}function ba(a,g){ue.reduce((N,da)=>{if(m(g[da]))return N;N&&F(a,g,N,g,da);return da},null)}function p(a,g){a=g.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(gb.fromMillis(a).as("days"))}function I(a,g,N){const da=[["years",
(Na,$a)=>$a.year-Na.year],["quarters",(Na,$a)=>$a.quarter-Na.quarter+4*($a.year-Na.year)],["months",(Na,$a)=>$a.month-Na.month+12*($a.year-Na.year)],["weeks",(Na,$a)=>{Na=p(Na,$a);return(Na-Na%7)/7}],["days",p]],ma={},qa=a;let ya,Ia;for(const [Na,$a]of da)0<=N.indexOf(Na)&&(ya=Na,ma[Na]=$a(a,g),Ia=qa.plus(ma),Ia>g?(ma[Na]--,a=qa.plus(ma)):a=Ia);return[a,ma,Ia,ya]}function V(a,g,N,da){let [ma,qa,ya,Ia]=I(a,g,N);a=g-ma;N=N.filter(Na=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Na));0===
N.length&&(ya<g&&(ya=ma.plus({[Ia]:1})),ya!==ma&&(qa[Ia]=(qa[Ia]||0)+a/(ya-ma)));g=gb.fromObject(qa,da);return 0<N.length?gb.fromMillis(a,da).shiftTo(...N).plus(g):g}function W({numberingSystem:a},g=""){return new RegExp(`${Lc[a||"latn"]}${g}`)}function fa(a,g=N=>N){return{regex:a,deser:([N])=>{{let da=parseInt(N,10);if(isNaN(da)){da="";for(let ma=0;ma<N.length;ma++){const qa=N.charCodeAt(ma);if(-1!==N[ma].search(Lc.hanidec))da+=ve.indexOf(N[ma]);else for(const ya in id){const [Ia,Na]=id[ya];qa>=
Ia&&qa<=Na&&(da+=qa-Ia)}}N=parseInt(da,10)}else N=da}return g(N)}}}function na(a){return a.replace(/\./g,"\\.?").replace(Mc,jd)}function pa(a,g){return null===a?null:{regex:RegExp(a.map(na).join("|")),deser:([N])=>a.findIndex(da=>N.replace(/\./g,"").replace(Mc," ").toLowerCase()===da.replace(/\./g,"").replace(Mc," ").toLowerCase())+g}}function sa(a,g){return{regex:a,deser:([,N,da])=>U(N,da),groups:g}}function va(a){return{regex:a,deser:([g])=>g}}function Ea(a,g){const N=W(g),da=W(g,"{2}"),ma=W(g,
"{3}"),qa=W(g,"{4}"),ya=W(g,"{6}"),Ia=W(g,"{1,2}"),Na=W(g,"{1,3}"),$a=W(g,"{1,6}"),d=W(g,"{1,9}"),ab=W(g,"{2,4}"),Xa=W(g,"{4,6}"),zb=Wb=>({regex:RegExp(Wb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([t])=>t,literal:!0}),ra=(Wb=>{if(a.literal)return zb(Wb);switch(Wb.val){case "G":return pa(g.eras("short",!1),0);case "GG":return pa(g.eras("long",!1),0);case "y":return fa($a);case "yy":return fa(ab,B);case "yyyy":return fa(qa);case "yyyyy":return fa(Xa);case "yyyyyy":return fa(ya);case "M":return fa(Ia);
case "MM":return fa(da);case "MMM":return pa(g.months("short",!0,!1),1);case "MMMM":return pa(g.months("long",!0,!1),1);case "L":return fa(Ia);case "LL":return fa(da);case "LLL":return pa(g.months("short",!1,!1),1);case "LLLL":return pa(g.months("long",!1,!1),1);case "d":return fa(Ia);case "dd":return fa(da);case "o":return fa(Na);case "ooo":return fa(ma);case "HH":return fa(da);case "H":return fa(Ia);case "hh":return fa(da);case "h":return fa(Ia);case "mm":return fa(da);case "m":return fa(Ia);case "q":return fa(Ia);
case "qq":return fa(da);case "s":return fa(Ia);case "ss":return fa(da);case "S":return fa(Na);case "SSS":return fa(ma);case "u":return va(d);case "uu":return va(Ia);case "uuu":return fa(N);case "a":return pa(g.meridiems(),0);case "kkkk":return fa(qa);case "kk":return fa(ab,B);case "W":return fa(Ia);case "WW":return fa(da);case "E":case "c":return fa(N);case "EEE":return pa(g.weekdays("short",!1,!1),1);case "EEEE":return pa(g.weekdays("long",!1,!1),1);case "ccc":return pa(g.weekdays("short",!0,!1),
1);case "cccc":return pa(g.weekdays("long",!0,!1),1);case "Z":case "ZZ":return sa(new RegExp(`([+-]${Ia.source})(?::(${da.source}))?`),2);case "ZZZ":return sa(new RegExp(`([+-]${Ia.source})(${da.source})?`),2);case "z":return va(/[a-z_+-/]{1,256}?/i);case " ":return va(/[^\S\n\r]/);default:return zb(Wb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ra.token=a;return ra}function Aa(a){return[`^${a.map(g=>g.regex).reduce((g,N)=>`${g}(${N.source})`,"")}$`,a]}function za(a,
g,N){if(a=a.match(g)){g={};let da=1;for(const ma in N)if(n(N,ma)){const qa=N[ma],ya=qa.groups?qa.groups+1:1;!qa.literal&&qa.token&&(g[qa.token.val[0]]=qa.deser(a.slice(da,da+ya)));da+=ya}return[a,g]}return[a,{}]}function Ra(a){const g=ma=>{switch(ma){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";
case "k":return"weekYear";case "q":return"quarter";default:return null}};let N=null,da;m(a.z)||(N=Vb.create(a.z));m(a.Z)||(N||(N=new Eb(a.Z)),da=a.Z);m(a.q)||(a.M=3*(a.q-1)+1);m(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);m(a.u)||(a.S=J(a.u));return[Object.keys(a).reduce((ma,qa)=>{const ya=g(qa);ya&&(ma[ya]=a[qa]);return ma},{}),N,da]}function Ma(a,g){return Array.prototype.concat(...a.map(N=>{if(!N.literal){var da=Ab.macroTokenToFormatOpts(N.val);da=Qa(da,
g);N=null==da||da.includes(void 0)?N:da}return N}))}function Pa(a,g,N){N=Ma(Ab.parseFormat(N),a);var da=N.map(Xa=>Ea(Xa,a));const ma=da.find(Xa=>Xa.invalidReason);if(ma)return{input:g,tokens:N,invalidReason:ma.invalidReason};const [qa,ya]=Aa(da);da=RegExp(qa,"i");const [Ia,Na]=za(g,da,ya),[$a,d,ab]=Na?Ra(Na):[null,null,void 0];if(n(Na,"a")&&n(Na,"H"))throw new oa("Can't include meridiem when specifying 24-hour format");return{input:g,tokens:N,regex:da,rawMatches:Ia,matches:Na,result:$a,zone:d,specificOffset:ab}}
function Qa(a,g){if(!a)return null;g=Ab.create(g,a);var N=g.formatDateTimeParts;Nc||(Nc=Za.fromMillis(1555555555555));return N.call(g,Nc).map(da=>{{const {type:qa,value:ya}=da;if("literal"===qa)da=/^\s+$/.test(ya),da={literal:!da,val:da?" ":ya};else{da=a[qa];var ma=we[qa];"object"===typeof ma&&(ma=ma[da]);da=ma?{literal:!1,val:ma}:void 0}}return da})}function Ka(a,g){return new Rb("unit out of range",`you specified ${g} (of type ${typeof g}) as a ${a}, which is invalid`)}function Ta(a,g,N){g=new Date(Date.UTC(a,
g-1,N));100>a&&0<=a&&g.setUTCFullYear(g.getUTCFullYear()-1900);a=g.getUTCDay();return 0===a?7:a}function Wa(a,g){a=D(a)?Oc:Pc;const N=a.findIndex(da=>da<g);return{month:N+1,day:g-a[N]}}function ua(a){const {year:g,month:N,day:da}=a;var ma=da+(D(g)?Oc:Pc)[N-1];const qa=Ta(g,N,da);ma=Math.floor((ma-qa+10)/7);let ya;1>ma?(ya=g-1,ma=x(ya)):ma>x(g)?(ya=g+1,ma=1):ya=g;return{weekYear:ya,weekNumber:ma,weekday:qa,...r(a)}}function ub(a){const {weekYear:g,weekNumber:N,weekday:da}=a;var ma=Ta(g,1,4),qa=D(g)?
366:365;ma=7*N+da-ma-3;1>ma?(qa=g-1,ma+=D(qa)?366:365):ma>qa?(qa=g+1,ma-=D(g)?366:365):qa=g;const {month:ya,day:Ia}=Wa(qa,ma);return{year:qa,month:ya,day:Ia,...r(a)}}function hb(a){const {year:g,month:N,day:da}=a;var ma=da+(D(g)?Oc:Pc)[N-1];return{year:g,ordinal:ma,...r(a)}}function jb(a){const {year:g,ordinal:N}=a,{month:da,day:ma}=Wa(g,N);return{year:g,month:da,day:ma,...r(a)}}function b(a){const g=H(a.year),N=z(a.month,1,12),da=z(a.day,1,w(a.year,a.month));return g?N?da?!1:Ka("day",a.day):Ka("month",
a.month):Ka("year",a.year)}function fb(a){const {hour:g,minute:N,second:da,millisecond:ma}=a;a=z(g,0,23)||24===g&&0===N&&0===da&&0===ma;const qa=z(N,0,59),ya=z(da,0,59),Ia=z(ma,0,999);return a?qa?ya?Ia?!1:Ka("millisecond",ma):Ka("second",da):Ka("minute",N):Ka("hour",g)}function Ob(a){return new Rb("unsupported zone",`the zone "${a.name}" is not supported`)}function Jb(a){null===a.weekData&&(a.weekData=ua(a.c));return a.weekData}function la(a,g){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};
return new Za({...a,...g,old:a})}function gc(a,g,N){let da=a-6E4*g;const ma=N.offset(da);if(g===ma)return[da,g];da-=6E4*(ma-g);g=N.offset(da);return ma===g?[da,ma]:[a-6E4*Math.min(ma,g),Math.max(ma,g)]}function Tb(a,g){a=new Date(a+6E4*g);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function yb(a,g,N){return gc(y(a),g,N)}function Sb(a,g){const N=a.o;var da=a.c.year+
Math.trunc(g.years);const ma=a.c.month+Math.trunc(g.months)+3*Math.trunc(g.quarters);da={...a.c,year:da,month:ma,day:Math.min(a.c.day,w(da,ma))+Math.trunc(g.days)+7*Math.trunc(g.weeks)};g=gb.fromObject({years:g.years-Math.trunc(g.years),quarters:g.quarters-Math.trunc(g.quarters),months:g.months-Math.trunc(g.months),weeks:g.weeks-Math.trunc(g.weeks),days:g.days-Math.trunc(g.days),hours:g.hours,minutes:g.minutes,seconds:g.seconds,milliseconds:g.milliseconds}).as("milliseconds");da=y(da);let [qa,ya]=
gc(da,N,a.zone);0!==g&&(qa+=g,ya=a.zone.offset(qa));return{ts:qa,o:ya}}function Ub(a,g,N,da,ma,qa){const {setZone:ya,zone:Ia}=N;return a&&0!==Object.keys(a).length||g?(a=Za.fromObject(a,{...N,zone:g||Ia,specificOffset:qa}),ya?a:a.setZone(Ia)):Za.invalid(new Rb("unparsable",`the input "${ma}" can't be parsed as ${da}`))}function Zb(a,g,N=!0){return a.isValid?Ab.create(rb.create("en-US"),{allowZ:N,forceSimple:!0}).formatDateTimeFromString(a,g):null}function hc(a,g){const N=9999<a.c.year||0>a.c.year;
let da="";N&&0<=a.c.year&&(da+="+");da+=O(a.c.year,N?6:4);g?(da=da+"-"+O(a.c.month),da=da+"-"+O(a.c.day)):(da+=O(a.c.month),da+=O(a.c.day));return da}function Db(a,g,N,da,ma,qa){let ya=O(a.c.hour);g?(ya=ya+":"+O(a.c.minute),0===a.c.second&&N||(ya+=":")):ya+=O(a.c.minute);0===a.c.second&&N||(ya+=O(a.c.second),0===a.c.millisecond&&da||(ya=ya+"."+O(a.c.millisecond,3)));ma&&(a.isOffsetFixed&&0===a.offset&&!qa?ya+="Z":0>a.o?(ya=ya+"-"+O(Math.trunc(-a.o/60)),ya=ya+":"+O(Math.trunc(-a.o%60))):(ya=ya+"+"+
O(Math.trunc(a.o/60)),ya=ya+":"+O(Math.trunc(a.o%60))));qa&&(ya+="["+a.zone.ianaName+"]");return ya}function Pb(a){const g={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",
weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!g)throw new Da(a);return g}function ib(a,g){const N=h(g.zone,xb.defaultZone);g=rb.fromObject(g);const da=xb.now();var ma;if(m(a.year))a=da;else{for(const qa of kd)m(a[qa])&&(a[qa]=ld[qa]);if(ma=b(a)||fb(a))return Za.invalid(ma);ma=N.offset(da);[a,ma]=yb(a,ma,N)}return new Za({ts:a,zone:N,loc:g,o:ma})}function Fb(a,g,N){const da=m(N.round)?!0:N.round,ma=(ya,Ia)=>{ya=Q(ya,da||N.calendary?0:2,!0);return g.loc.clone(N).relFormatter(N).format(ya,
Ia)},qa=ya=>N.calendary?g.hasSame(a,ya)?0:g.startOf(ya).diff(a.startOf(ya),ya).get(ya):g.diff(a,ya).get(ya);if(N.unit)return ma(qa(N.unit),N.unit);for(const ya of N.units){const Ia=qa(ya);if(1<=Math.abs(Ia))return ma(Ia,ya)}return ma(a>g?-0:0,N.units[N.units.length-1])}function Qb(a){let g={};0<a.length&&"object"===typeof a[a.length-1]?(g=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[g,a]}function Ya(a){if(Za.isDateTime(a))return a;if(a&&a.valueOf&&k(a.valueOf()))return Za.fromJSDate(a);
if(a&&"object"===typeof a)return Za.fromObject(a);throw new Ba(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Hb extends Error{}class S extends Hb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class ia extends Hb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class X extends Hb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class oa extends Hb{}class Da extends Hb{constructor(a){super(`Invalid unit ${a}`)}}class Ba extends Hb{}class La extends Hb{constructor(){super("Zone is an abstract class")}}
const Ua={year:"numeric",month:"numeric",day:"numeric"},nb={year:"numeric",month:"short",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},wb={year:"numeric",month:"long",day:"numeric",weekday:"long"},Gb={hour:"numeric",minute:"numeric"},md={hour:"numeric",minute:"numeric",second:"numeric"},nd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},od={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
pd={hour:"numeric",minute:"numeric",hourCycle:"h23"},qd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},rd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},sd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},td={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},vd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},wd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xe={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},yd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},zd={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Ad={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class ic{get type(){throw new La;}get name(){throw new La;}get ianaName(){return this.name}get isUniversal(){throw new La;}offsetName(a,g){throw new La;}formatOffset(a,g){throw new La;}offset(a){throw new La;}equals(a){throw new La;}get isValid(){throw new La;}}let Qc=null;class mc extends ic{static get instance(){null===
Qc&&(Qc=new mc);return Qc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:g,locale:N}){return E(a,g,N)}formatOffset(a,g){return P(this.offset(a),g)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let nc={};const ye={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let oc={};class Vb extends ic{static create(a){oc[a]||(oc[a]=new Vb(a));return oc[a]}static resetCache(){oc=
{};nc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(g){return!1}}constructor(a){super();this.zoneName=a;this.valid=Vb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:g,locale:N}){return E(a,g,N,this.name)}formatOffset(a,g){return P(this.offset(a),g)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var g=this.name;
nc[g]||(nc[g]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));g=nc[g];if(g.formatToParts){g=g.formatToParts(a);var N=[];for(let d=0;d<g.length;d++){const {type:ab,value:Xa}=g[d],zb=ye[ab];"era"===ab?N[zb]=Xa:m(zb)||(N[zb]=parseInt(Xa,10))}g=N}else{g=g.format(a).replace(/\u200E/g,"");g=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(g);const [,d,ab,Xa,zb,ra,Wb,t]=g;g=[Xa,d,ab,zb,
ra,Wb,t]}let [da,ma,qa,ya,Ia,Na,$a]=g;"BC"===ya&&(da=-Math.abs(da)+1);g=y({year:da,month:ma,day:qa,hour:24===Ia?0:Ia,minute:Na,second:$a,millisecond:0});a=+a;N=a%1E3;return(g-(a-(0<=N?N:1E3+N)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let gd={},Gc={},Hc={},Ic={},pc=null;class ze{constructor(a,g,N){this.padTo=N.padTo||0;this.floor=N.floor||!1;const {padTo:da,floor:ma,...qa}=N;if(!g||0<Object.keys(qa).length)g={useGrouping:!1,...N},0<N.padTo&&(g.minimumIntegerDigits=
N.padTo),this.inf=ca(a,g)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):Q(a,3);return O(a,this.padTo)}}class Ae{constructor(a,g,N){this.opts=N;N=this.originalZone=void 0;this.opts.timeZone?this.dt=a:"fixed"===a.zone.type?(N=a.offset/60*-1,N=0<=N?`Etc/GMT+${N}`:`Etc/GMT${N}`,0!==a.offset&&Vb.create(N).valid?this.dt=a:(N="UTC",this.dt=0===a.offset?a:a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone)):"system"===a.zone.type?this.dt=
a:"iana"===a.zone.type?(this.dt=a,N=a.zone.name):(N="UTC",this.dt=a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone);a={...this.opts};a.timeZone=a.timeZone||N;this.dtf=ka(g,a)}format(){return this.originalZone?this.formatToParts().map(({value:a})=>a).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const a=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?a.map(g=>{if("timeZoneName"===g.type){const N=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,
format:this.opts.timeZoneName});return{...g,value:N}}return g}):a}resolvedOptions(){return this.dtf.resolvedOptions()}}class Be{constructor(a,g,N){this.opts={style:"long",...N};!g&&A()&&(this.rtf=R(a,N))}format(a,g){return this.rtf?this.rtf.format(a,g):ta(g,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,g){return this.rtf?this.rtf.formatToParts(a,g):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,g,N,da=!1){a=
a||xb.defaultLocale;var ma;(ma=a)||(da?da="en-US":(pc||(pc=(new Intl.DateTimeFormat).resolvedOptions().locale),da=pc),ma=da);return new rb(ma,g||xb.defaultNumberingSystem,N||xb.defaultOutputCalendar,a)}static resetCache(){pc=null;Gc={};Hc={};Ic={}}static fromObject({locale:a,numberingSystem:g,outputCalendar:N}={}){return rb.create(a,g,N)}constructor(a,g,N,da){var ma=a.indexOf("-x-");-1!==ma&&(a=a.substring(0,ma));ma=a.indexOf("-u-");if(-1===ma)var qa=[a];else{try{qa=ka(a).resolvedOptions();var ya=
a}catch(Xa){ya=a.substring(0,ma),qa=ka(ya).resolvedOptions()}const {numberingSystem:d,calendar:ab}=qa;qa=[ya,d,ab]}const [Ia,Na,$a]=qa;this.locale=Ia;this.numberingSystem=g||Na||null;this.outputCalendar=N||$a||null;g=this.locale;N=this.numberingSystem;if((qa=this.outputCalendar)||N)g.includes("-u-")||(g+="-u"),qa&&(g+=`-ca-${qa}`),N&&(g+=`-nu-${N}`);this.intl=g;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=
da;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),g=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);
return a&&g?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,g=!1,N=!0){return L(this,a,N,v,()=>{const da=g?{month:a,day:"numeric"}:{month:a},ma=g?"format":"standalone";this.monthsCache[ma][a]||(this.monthsCache[ma][a]=
ha(qa=>this.extract(qa,da,"month")));return this.monthsCache[ma][a]})}weekdays(a,g=!1,N=!0){return L(this,a,N,Z,()=>{const da=g?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ma=g?"format":"standalone";this.weekdaysCache[ma][a]||(this.weekdaysCache[ma][a]=T(qa=>this.extract(qa,da,"weekday")));return this.weekdaysCache[ma][a]})}meridiems(a=!0){return L(this,void 0,a,()=>Bd,()=>{if(!this.meridiemCache){const g={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Za.utc(2016,11,13,
9),Za.utc(2016,11,13,19)].map(N=>this.extract(N,g,"dayperiod"))}return this.meridiemCache})}eras(a,g=!0){return L(this,a,g,ja,()=>{const N={era:a};this.eraCache[a]||(this.eraCache[a]=[Za.utc(-40,1,1),Za.utc(2017,1,1)].map(da=>this.extract(da,N,"era")));return this.eraCache[a]})}extract(a,g,N){return(a=this.dtFormatter(a,g).formatToParts().find(da=>da.type.toLowerCase()===N))?a.value:null}numberFormatter(a={}){return new ze(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,g={}){return new Ae(a,
this.intl,g)}relFormatter(a={}){return new Be(this.intl,this.isEnglish(),a)}listFormatter(a={}){return f(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Rc=null;class Eb extends ic{static get utcInstance(){null===Rc&&(Rc=new Eb(0));return Rc}static instance(a){return 0===
a?Eb.utcInstance:new Eb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Eb(U(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${P(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${P(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,g){return P(this.fixed,g)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===
a.type&&a.fixed===this.fixed}get isValid(){return!0}}class me extends ic{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Sc=()=>Date.now(),Cd="system",Dd=null,Ed=null,Tc=null,Fd=60,Gd;class xb{static get now(){return Sc}static set now(a){Sc=a}static set defaultZone(a){Cd=a}static get defaultZone(){return h(Cd,
mc.instance)}static get defaultLocale(){return Dd}static set defaultLocale(a){Dd=a}static get defaultNumberingSystem(){return Ed}static set defaultNumberingSystem(a){Ed=a}static get defaultOutputCalendar(){return Tc}static set defaultOutputCalendar(a){Tc=a}static get twoDigitCutoffYear(){return Fd}static set twoDigitCutoffYear(a){Fd=a%100}static get throwOnInvalid(){return Gd}static set throwOnInvalid(a){Gd=a}static resetCaches(){rb.resetCache();Vb.resetCache()}}const oe="January February March April May June July August September October November December".split(" "),
Jc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ne="JFMAMJJASOND".split(""),Kc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),hd="Mon Tue Wed Thu Fri Sat Sun".split(" "),pe="MTWTFSS".split(""),Bd=["AM","PM"],se=["Before Christ","Anno Domini"],re=["BC","AD"],qe=["B","A"],Uc={D:Ua,DD:nb,DDD:mb,DDDD:wb,t:Gb,tt:md,ttt:nd,tttt:od,T:pd,TT:qd,TTT:rd,TTTT:sd,f:td,ff:vd,fff:xd,ffff:zd,F:ud,FF:wd,FFF:yd,FFFF:Ad};class Ab{static create(a,g={}){return new Ab(a,g)}static parseFormat(a){let g=
null,N="",da=!1;const ma=[];for(let qa=0;qa<a.length;qa++){const ya=a.charAt(qa);"'"===ya?(0<N.length&&ma.push({literal:da||/^\s+$/.test(N),val:N}),g=null,N="",da=!da):da?N+=ya:ya===g?N+=ya:(0<N.length&&ma.push({literal:/^\s+$/.test(N),val:N}),g=N=ya)}0<N.length&&ma.push({literal:da||/^\s+$/.test(N),val:N});return ma}static macroTokenToFormatOpts(a){return Uc[a]}constructor(a,g){this.opts=g;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,g){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());
return this.systemLoc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTime(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTimeParts(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).formatToParts()}formatInterval(a,g={}){return this.loc.dtFormatter(a.start,{...this.opts,...g}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).resolvedOptions()}num(a,g=0){if(this.opts.forceSimple)return O(a,
g);const N={...this.opts};0<g&&(N.padTo=g);return this.loc.numberFormatter(N).format(a)}formatDateTimeFromString(a,g){const N="en"===this.loc.listingMode(),da=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ma=(d,ab)=>this.loc.extract(a,d,ab),qa=d=>a.isOffsetFixed&&0===a.offset&&d.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,d.format):"",ya=(d,ab)=>N?v(d)[a.month-1]:ma(ab?{month:d}:{month:d,day:"numeric"},"month"),Ia=(d,ab)=>N?Z(d)[a.weekday-1]:ma(ab?{weekday:d}:{weekday:d,month:"long",
day:"numeric"},"weekday"),Na=d=>{const ab=Ab.macroTokenToFormatOpts(d);return ab?this.formatWithSystemDefault(a,ab):d},$a=d=>N?ja(d)[0>a.year?0:1]:ma({era:d},"era");return xa(Ab.parseFormat(g),d=>{switch(d){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);
case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return qa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return qa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return qa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,
{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return N?Bd[12>a.hour?0:1]:ma({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return da?ma({day:"numeric"},"day"):this.num(a.day);case "dd":return da?ma({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ia("short",!0);case "cccc":return Ia("long",!0);case "ccccc":return Ia("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ia("short",!1);case "EEEE":return Ia("long",
!1);case "EEEEE":return Ia("narrow",!1);case "L":return da?ma({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return da?ma({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return ya("short",!0);case "LLLL":return ya("long",!0);case "LLLLL":return ya("narrow",!0);case "M":return da?ma({month:"numeric"},"month"):this.num(a.month);case "MM":return da?ma({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return ya("short",!1);case "MMMM":return ya("long",
!1);case "MMMMM":return ya("narrow",!1);case "y":return da?ma({year:"numeric"},"year"):this.num(a.year);case "yy":return da?ma({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return da?ma({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return da?ma({year:"numeric"},"year"):this.num(a.year,6);case "G":return $a("short");case "GG":return $a("long");case "GGGGG":return $a("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,
4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Na(d)}})}formatDurationFromString(a,g){const N=ma=>{switch(ma[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";
case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};g=Ab.parseFormat(g);const da=g.reduce((ma,{literal:qa,val:ya})=>qa?ma:ma.concat(ya),[]);a=a.shiftTo(...da.map(N).filter(ma=>ma));return xa(g,(ma=>qa=>{const ya=N(qa);return ya?this.num(ma.get(ya),qa.length):qa})(a))}}class Rb{constructor(a,g){this.reason=a;this.explanation=g}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Id=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Vc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jd=RegExp(`${Vc.source}${`(?:${Id.source}?(?:\\[(${Hd.source})\\])?)?`}`),Wc=RegExp(`(?:T${Jd.source})?`),Ce=Fa("weekYear","weekNumber","weekDay"),Kd=Fa("year","ordinal"),Ld=RegExp(`${Vc.source} ?(?:${Id.source}|(${Hd.source}))?`),Md=RegExp(`(?: ${Ld.source})?`),Nd=RegExp(`^T?${Vc.source}$`),De=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
te={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ge=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
He=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Ie=Ca(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Wc),Je=Ca(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Wc),Ke=Ca(/(\d{4})-?(\d{3})/,Wc),Le=Ca(Jd),Od=Ga(function(a,g){return[{year:Oa(a,g),month:Oa(a,g+1,1),day:Oa(a,g+2,1)},null,g+3]},Sa,Va,eb),Me=Ga(Ce,Sa,Va,eb),Ne=Ga(Kd,Sa,Va,eb),Oe=Ga(Sa,Va,eb),Pe=Ga(Sa),Qe=Ca(/(\d{4})-(\d\d)-(\d\d)/,Md),Re=Ca(Ld),Se=Ga(Sa,Va,eb),Pd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Pd},Ue={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Pd},bc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ue=bc.slice(0).reverse();
class gb{constructor(a){const g="longterm"===a.conversionAccuracy||!1;let N=g?Ue:Te;a.matrix&&(N=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=g?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=N;this.isLuxonDuration=!0}static fromMillis(a,g){return gb.fromObject({milliseconds:a},g)}static fromObject(a,g={}){if(null==a||"object"!==typeof a)throw new Ba(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new gb({values:M(a,
gb.normalizeUnit),loc:rb.fromObject(g),conversionAccuracy:g.conversionAccuracy,matrix:g.matrix})}static fromDurationLike(a){if(k(a))return gb.fromMillis(a);if(gb.isDuration(a))return a;if("object"===typeof a)return gb.fromObject(a);throw new Ba(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,g){const [N]=Ha(a,[De,kb]);return N?gb.fromObject(N,g):gb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,g){const [N]=Ha(a,[Nd,Pe]);return N?
gb.fromObject(N,g):gb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,g=null){if(!a)throw new Ba("need to specify a reason the Duration is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new X(a);return new gb({invalid:a})}static normalizeUnit(a){const g={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!g)throw new Da(a);return g}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,g={}){g={...g,floor:!1!==g.round&&!1!==g.floor};return this.isValid?Ab.create(this.loc,g).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const g=bc.map(N=>{const da=this.values[N];return m(da)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:N.slice(0,-1)}).format(da)}).filter(N=>N);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(g)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=Q(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var g=this.toMillis();if(0>g||864E5<=g)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
g=this.shiftTo("hours","minutes","seconds","milliseconds");let N="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===g.seconds&&0===g.milliseconds||(N+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===g.milliseconds||(N+=".SSS"));g=g.toFormat(N);a.includePrefix&&(g="T"+g);return g}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);const g=
{};for(const N of bc)if(n(a.values,N)||n(this.values,N))g[N]=a.get(N)+this.get(N);return ea(this,{values:g},!0)}minus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const g={};for(const N of Object.keys(this.values))g[N]=Y(a(this.values[N],N));return ea(this,{values:g},!0)}get(a){return this[gb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...M(a,gb.normalizeUnit)};return ea(this,{values:a})}reconfigure({locale:a,
numberingSystem:g,conversionAccuracy:N,matrix:da}={}){a={loc:this.loc.clone({locale:a,numberingSystem:g}),matrix:da,conversionAccuracy:N};return ea(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();ba(this.matrix,a);return ea(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const g={};for(const [N,da]of Object.entries(a))0!==da&&(g[N]=da);return ea(this,{values:g},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(qa=>gb.normalizeUnit(qa));const g={},N={},da=this.toObject();let ma;for(const qa of bc)if(0<=a.indexOf(qa)){ma=qa;let ya=0;for(const Na in N)ya+=this.matrix[Na][qa]*N[Na],N[Na]=0;k(da[qa])&&(ya+=da[qa]);const Ia=Math.trunc(ya);g[qa]=Ia;N[qa]=(1E3*ya-1E3*Ia)/1E3;for(const Na in da)bc.indexOf(Na)>bc.indexOf(qa)&&F(this.matrix,da,Na,g,qa)}else k(da[qa])&&(N[qa]=da[qa]);for(const qa in N)0!==N[qa]&&(g[ma]+=qa===ma?N[qa]:N[qa]/this.matrix[ma][qa]);return ea(this,{values:g},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const g of Object.keys(this.values))a[g]=0===this.values[g]?0:-this.values[g];return ea(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const da of bc){var g=this.values[da];var N=a.values[da];g=void 0===g||0===g?void 0===N||0===N:g===N;if(!g)return!1}return!0}}class vb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,g=null){if(!a)throw new Ba("need to specify a reason the Interval is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new ia(a);return new vb({invalid:a})}static fromDateTimes(a,
g){a=Ya(a);g=Ya(g);var N=a&&a.isValid?g&&g.isValid?g<a?vb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${g.toISO()}`):null:vb.invalid("missing or invalid end"):vb.invalid("missing or invalid start");return null==N?new vb({start:a,end:g}):N}static after(a,g){g=gb.fromDurationLike(g);a=Ya(a);return vb.fromDateTimes(a,a.plus(g))}static before(a,g){g=gb.fromDurationLike(g);a=Ya(a);return vb.fromDateTimes(a.minus(g),a)}static fromISO(a,
g){const [N,da]=(a||"").split("/",2);if(N&&da){let ya;try{var ma=Za.fromISO(N,g);ya=ma.isValid}catch(Na){ya=!1}let Ia;try{var qa=Za.fromISO(da,g);Ia=qa.isValid}catch(Na){Ia=!1}if(ya&&Ia)return vb.fromDateTimes(ma,qa);if(ya){if(qa=gb.fromISO(da,g),qa.isValid)return vb.after(ma,qa)}else if(Ia&&(ma=gb.fromISO(N,g),ma.isValid))return vb.before(qa,ma)}return vb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const g=this.start.startOf(a),N=this.end.startOf(a);return Math.floor(N.diff(g,a).get(a))+(N.valueOf()!==this.end.valueOf())}hasSame(a){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:g}={}){return this.isValid?vb.fromDateTimes(a||this.s,g||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Ya).filter(qa=>this.contains(qa)).sort();const g=[];let {s:N}=this,da=0;for(;N<this.e;){var ma=a[da]||this.e;ma=+ma>+this.e?
this.e:ma;g.push(vb.fromDateTimes(N,ma));N=ma;da+=1}return g}splitBy(a){a=gb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:g}=this,N=1;const da=[];for(;g<this.e;){var ma=this.start.plus(a.mapUnits(qa=>qa*N));ma=+ma>+this.e?this.e:ma;da.push(vb.fromDateTimes(g,ma));g=ma;N+=1}return da}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:
!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const g=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return g>=a?null:vb.fromDateTimes(g,a)}union(a){return this.isValid?vb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [g,N]=a.sort((da,ma)=>da.s-ma.s).reduce(([da,ma],qa)=>
ma?ma.overlaps(qa)||ma.abutsStart(qa)?[da,ma.union(qa)]:[da.concat([ma]),qa]:[da,qa],[[],null]);N&&g.push(N);return g}static xor(a){let g=null,N=0;const da=[];a=a.map(ma=>[{time:ma.s,type:"s"},{time:ma.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ma,qa)=>ma.time-qa.time);for(const ma of a)N+="s"===ma.type?1:-1,1===N?g=ma.time:(g&&+g!==+ma.time&&da.push(vb.fromDateTimes(g,ma.time)),g=null);return vb.merge(da)}difference(...a){return vb.xor([this].concat(a)).map(g=>this.intersection(g)).filter(g=>
g&&!g.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Ua,g={}){return this.isValid?Ab.create(this.s.loc.clone(g),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,
{separator:g=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${g}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,g){return this.isValid?this.e.diff(this.s,a,g):gb.invalid(this.invalidReason)}mapEndpoints(a){return vb.fromDateTimes(a(this.s),a(this.e))}}class kc{static hasDST(a=xb.defaultZone){const g=Za.now().setZone(a).set({month:12});return!a.isUniversal&&g.offset!==g.set({month:6}).offset}static isValidIANAZone(a){return Vb.isValidZone(a)}static normalizeZone(a){return h(a,xb.defaultZone)}static months(a=
"long",{locale:g=null,numberingSystem:N=null,locObj:da=null,outputCalendar:ma="gregory"}={}){return(da||rb.create(g,N,ma)).months(a)}static monthsFormat(a="long",{locale:g=null,numberingSystem:N=null,locObj:da=null,outputCalendar:ma="gregory"}={}){return(da||rb.create(g,N,ma)).months(a,!0)}static weekdays(a="long",{locale:g=null,numberingSystem:N=null,locObj:da=null}={}){return(da||rb.create(g,N,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:g=null,numberingSystem:N=null,locObj:da=null}=
{}){return(da||rb.create(g,N,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:g=null}={}){return rb.create(g,null,"gregory").eras(a)}static features(){return{relative:A()}}}const Lc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},id={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ve=Lc.hanidec.replace(/[\[|\]]/g,"").split(""),jd=`[ ${String.fromCharCode(160)}]`,Mc=new RegExp(jd,"g"),we={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nc=null;const Pc=[0,31,59,90,120,151,181,212,243,273,304,334],Oc=[0,31,60,91,121,152,182,213,244,274,305,335],ld={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},We={ordinal:1,hour:0,minute:0,second:0,millisecond:0},kd="year month day hour minute second millisecond".split(" "),Xe="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ye="year ordinal hour minute second millisecond".split(" ");
class Za{constructor(a){const g=a.zone||xb.defaultZone;let N=a.invalid||(Number.isNaN(a.ts)?new Rb("invalid input"):null)||(g.isValid?null:Ob(g));this.ts=m(a.ts)?xb.now():a.ts;let da=null;var ma=null;N||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(g)?[da,ma]=[a.old.c,a.old.o]:(ma=g.offset(this.ts),da=Tb(this.ts,ma),da=(N=Number.isNaN(da.year)?new Rb("invalid input"):null)?null:da,ma=N?null:ma));this._zone=g;this.loc=a.loc||rb.create();this.invalid=N;this.weekData=null;this.c=da;this.o=ma;this.isLuxonDateTime=
!0}static now(){return new Za({})}static local(){const [a,g]=Qb(arguments),[N,da,ma,qa,ya,Ia,Na]=g;return ib({year:N,month:da,day:ma,hour:qa,minute:ya,second:Ia,millisecond:Na},a)}static utc(){const [a,g]=Qb(arguments),[N,da,ma,qa,ya,Ia,Na]=g;a.zone=Eb.utcInstance;return ib({year:N,month:da,day:ma,hour:qa,minute:ya,second:Ia,millisecond:Na},a)}static fromJSDate(a,g={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Za.invalid("invalid input");const N=
h(g.zone,xb.defaultZone);return N.isValid?new Za({ts:a,zone:N,loc:rb.fromObject(g)}):Za.invalid(Ob(N))}static fromMillis(a,g={}){if(k(a))return-864E13>a||864E13<a?Za.invalid("Timestamp out of range"):new Za({ts:a,zone:h(g.zone,xb.defaultZone),loc:rb.fromObject(g)});throw new Ba(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,g={}){if(k(a))return new Za({ts:1E3*a,zone:h(g.zone,xb.defaultZone),loc:rb.fromObject(g)});throw new Ba("fromSeconds requires a numerical input");
}static fromObject(a,g={}){a=a||{};var N=h(g.zone,xb.defaultZone);if(!N.isValid)return Za.invalid(Ob(N));var da=xb.now();const ma=m(g.specificOffset)?N.offset(da):g.specificOffset,qa=M(a,Pb);var ya=!m(qa.ordinal),Ia=!m(qa.year),Na=!m(qa.month)||!m(qa.day);Ia=Ia||Na;var $a=qa.weekYear||qa.weekNumber;g=rb.fromObject(g);if((Ia||ya)&&$a)throw new oa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Na&&ya)throw new oa("Can't mix ordinal dates with month/day");Na=$a||qa.weekday&&
!Ia;let d=Tb(da,ma);Na?(da=Xe,$a=Ve,d=ua(d)):ya?(da=Ye,$a=We,d=hb(d)):(da=kd,$a=ld);let ab=!1;for(var Xa of da)m(qa[Xa])?qa[Xa]=ab?$a[Xa]:d[Xa]:ab=!0;Na?(Xa=H(qa.weekYear),da=z(qa.weekNumber,1,x(qa.weekYear)),$a=z(qa.weekday,1,7),Xa=Xa?da?$a?!1:Ka("weekday",qa.weekday):Ka("week",qa.week):Ka("weekYear",qa.weekYear)):ya?(Xa=H(qa.year),da=z(qa.ordinal,1,D(qa.year)?366:365),Xa=Xa?da?!1:Ka("ordinal",qa.ordinal):Ka("year",qa.year)):Xa=b(qa);if(Xa=Xa||fb(qa))return Za.invalid(Xa);ya=Na?ub(qa):ya?jb(qa):
qa;const [zb,ra]=yb(ya,ma,N);N=new Za({ts:zb,zone:N,o:ra,loc:g});return qa.weekday&&Ia&&a.weekday!==N.weekday?Za.invalid("mismatched weekday",`you can't specify both a weekday of ${qa.weekday} and a date of ${N.toISO()}`):N}static fromISO(a,g={}){const [N,da]=Ha(a,[Ie,Od],[Je,Me],[Ke,Ne],[Le,Oe]);return Ub(N,da,g,"ISO 8601",a)}static fromRFC2822(a,g={}){const [N,da]=Ha(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Ee,db]);return Ub(N,da,g,"RFC 2822",a)}static fromHTTP(a,g={}){const [N,
da]=Ha(a,[Fe,c],[Ge,c],[He,q]);return Ub(N,da,g,"HTTP",g)}static fromFormat(a,g,N={}){if(m(a)||m(g))throw new Ba("fromFormat requires an input string and a format");const {locale:da=null,numberingSystem:ma=null}=N,qa=rb.fromOpts({locale:da,numberingSystem:ma,defaultToEN:!0}),{result:ya,zone:Ia,specificOffset:Na,invalidReason:$a}=Pa(qa,a,g),[d,ab,Xa,zb]=[ya,Ia,Na,$a];return zb?Za.invalid(zb):Ub(d,ab,N,`format ${g}`,a,Xa)}static fromString(a,g,N={}){return Za.fromFormat(a,g,N)}static fromSQL(a,g={}){const [N,
da]=Ha(a,[Qe,Od],[Re,Se]);return Ub(N,da,g,"SQL",a)}static invalid(a,g=null){if(!a)throw new Ba("need to specify a reason the DateTime is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new S(a);return new Za({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,g={}){return(a=Qa(a,rb.fromObject(g)))?a.map(N=>N?N.val:null).join(""):null}static expandFormat(a,g={}){return Ma(Ab.parseFormat(a),rb.fromObject(g)).map(N=>N.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Jb(this).weekYear:NaN}get weekNumber(){return this.isValid?Jb(this).weekNumber:NaN}get weekday(){return this.isValid?Jb(this).weekday:
NaN}get ordinal(){return this.isValid?hb(this.c).ordinal:NaN}get monthShort(){return this.isValid?kc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?kc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?kc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?kc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return D(this.year)}get daysInMonth(){return w(this.year,this.month)}get daysInYear(){return this.isValid?
D(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?x(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:g,numberingSystem:N,calendar:da}=Ab.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:g,numberingSystem:N,outputCalendar:da}}toUTC(a=0,g={}){return this.setZone(Eb.instance(a),g)}toLocal(){return this.setZone(xb.defaultZone)}setZone(a,{keepLocalTime:g=!1,keepCalendarTime:N=!1}={}){a=h(a,xb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let da=
this.ts;if(g||N)g=a.offset(this.ts),N=this.toObject(),[da]=yb(N,g,a);return la(this,{ts:da,zone:a})}return Za.invalid(Ob(a))}reconfigure({locale:a,numberingSystem:g,outputCalendar:N}={}){a=this.loc.clone({locale:a,numberingSystem:g,outputCalendar:N});return la(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=M(a,Pb);var g=!m(a.weekYear)||!m(a.weekNumber)||!m(a.weekday);const N=!m(a.ordinal),da=!m(a.year),ma=!m(a.month)||!m(a.day),qa=a.weekYear||
a.weekNumber;if((da||ma||N)&&qa)throw new oa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&N)throw new oa("Can't mix ordinal dates with month/day");g?g=ub({...ua(this.c),...a}):m(a.ordinal)?(g={...this.toObject(),...a},m(a.day)&&(g.day=Math.min(w(g.year,g.month),g.day))):g=jb({...hb(this.c),...a});const [ya,Ia]=yb(g,this.o,this.zone);return la(this,{ts:ya,o:Ia})}plus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);return la(this,Sb(this,a))}minus(a){if(!this.isValid)return this;
a=gb.fromDurationLike(a).negate();return la(this,Sb(this,a))}startOf(a){if(!this.isValid)return this;const g={};a=gb.normalizeUnit(a);switch(a){case "years":g.month=1;case "quarters":case "months":g.day=1;case "weeks":case "days":g.hour=0;case "hours":g.minute=0;case "minutes":g.second=0;case "seconds":g.millisecond=0}"weeks"===a&&(g.weekday=1);"quarters"===a&&(g.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(g)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
g={}){return this.isValid?Ab.create(this.loc.redefaultToEN(g)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Ua,g={}){return this.isValid?Ab.create(this.loc.clone(g),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ab.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:g=!1,suppressMilliseconds:N=!1,includeOffset:da=!0,extendedZone:ma=!1}={}){if(!this.isValid)return null;a="extended"===a;let qa=
hc(this,a);return qa=qa+"T"+Db(this,a,g,N,da,ma)}toISODate({format:a="extended"}={}){return this.isValid?hc(this,"extended"===a):null}toISOWeekDate(){return Zb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:g=!1,includeOffset:N=!0,includePrefix:da=!1,extendedZone:ma=!1,format:qa="extended"}={}){return this.isValid?(da?"T":"")+Db(this,"extended"===qa,g,a,N,ma):null}toRFC2822(){return Zb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Zb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
hc(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:g=!1,includeOffsetSpace:N=!0}={}){let da="HH:mm:ss.SSS";if(g||a)N&&(da+=" "),g?da+="z":a&&(da+="ZZ");return Zb(this,da,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const g={...this.c};a.includeConfig&&(g.outputCalendar=this.outputCalendar,g.numberingSystem=this.loc.numberingSystem,g.locale=this.loc.locale);return g}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,g="milliseconds",N={}){if(!this.isValid||!a.isValid)return gb.invalid("created by diffing an invalid DateTime");N={locale:this.locale,numberingSystem:this.numberingSystem,...N};
const da=(Array.isArray(g)?g:[g]).map(gb.normalizeUnit);g=a.valueOf()>this.valueOf();a=V(g?this:a,g?a:this,da,N);return g?a.negate():a}diffNow(a="milliseconds",g={}){return this.diff(Za.now(),a,g)}until(a){return this.isValid?vb.fromDateTimes(this,a):this}hasSame(a,g){if(!this.isValid)return!1;const N=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(g)<=N&&N<=a.endOf(g)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const g=a.base||Za.fromObject({},{zone:this.zone}),N=a.padding?this<g?-a.padding:a.padding:0;let da="years months days hours minutes seconds".split(" "),ma=a.unit;Array.isArray(a.unit)&&(da=a.unit,ma=void 0);return Fb(g,this.plus(N),{...a,numeric:"always",units:da,unit:ma})}toRelativeCalendar(a={}){return this.isValid?Fb(a.base||Za.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Za.isDateTime))throw new Ba("min requires all arguments be DateTimes");
return K(a,g=>g.valueOf(),Math.min)}static max(...a){if(!a.every(Za.isDateTime))throw new Ba("max requires all arguments be DateTimes");return K(a,g=>g.valueOf(),Math.max)}static fromFormatExplain(a,g,N={}){const {locale:da=null,numberingSystem:ma=null}=N;N=rb.fromOpts({locale:da,numberingSystem:ma,defaultToEN:!0});return Pa(N,a,g)}static fromStringExplain(a,g,N={}){return Za.fromFormatExplain(a,g,N)}static get DATE_SHORT(){return Ua}static get DATE_MED(){return nb}static get DATE_MED_WITH_WEEKDAY(){return ob}static get DATE_FULL(){return mb}static get DATE_HUGE(){return wb}static get TIME_SIMPLE(){return Gb}static get TIME_WITH_SECONDS(){return md}static get TIME_WITH_SHORT_OFFSET(){return nd}static get TIME_WITH_LONG_OFFSET(){return od}static get TIME_24_SIMPLE(){return pd}static get TIME_24_WITH_SECONDS(){return qd}static get TIME_24_WITH_SHORT_OFFSET(){return rd}static get TIME_24_WITH_LONG_OFFSET(){return sd}static get DATETIME_SHORT(){return td}static get DATETIME_SHORT_WITH_SECONDS(){return ud}static get DATETIME_MED(){return vd}static get DATETIME_MED_WITH_SECONDS(){return wd}static get DATETIME_MED_WITH_WEEKDAY(){return xe}static get DATETIME_FULL(){return xd}static get DATETIME_FULL_WITH_SECONDS(){return yd}static get DATETIME_HUGE(){return zd}static get DATETIME_HUGE_WITH_SECONDS(){return Ad}}
l.DateTime=Za;l.Duration=gb;l.FixedOffsetZone=Eb;l.IANAZone=Vb;l.Info=kc;l.Interval=vb;l.SystemZone=mc;l.Zone=ic})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(l,f,ka){var ca={exports:{}};ca.exports;(function(ha){(function(T,L){ha.exports&&(ha.exports=L())})(ka.commonjsGlobal,function(){function T(h,m,k,H){h=Error.call(this,h);Object.setPrototypeOf&&Object.setPrototypeOf(h,T.prototype);h.expected=m;h.found=
k;h.location=H;h.name="SyntaxError";return h}function L(h,m,k){k=k||" ";if(h.length>m)return h;m-=h.length;k+=k.repeat(m);return h+k.slice(0,m)}(function(h,m){function k(){this.constructor=h}k.prototype=m.prototype;h.prototype=new k})(T,Error);T.prototype.format=function(h){var m="Error: "+this.message;if(this.location){var k=null,H;for(H=0;H<h.length;H++)if(h[H].source===this.location.source){k=h[H].text.split(/\r\n|\n|\r/g);break}h=this.location.start;H=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(h):h;var A=this.location.source+":"+H.line+":"+H.column;if(k){var K=this.location.end,e=L("",H.line.toString().length," ");k=k[h.line-1];K=(h.line===K.line?K.column:k.length+1)-h.column||1;m+="\n --\x3e "+A+"\n"+e+" |\n"+H.line+" | "+k+"\n"+e+" | "+L("",h.column-1," ")+L("",K,"^")}else m+="\n at "+A}return m};T.buildMessage=function(h,m){function k(n){return n.charCodeAt(0).toString(16).toUpperCase()}function H(n){return n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(z){return"\\x0"+k(z)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(z){return"\\x"+k(z)})}function A(n){return n.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(z){return"\\x0"+k(z)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(z){return"\\x"+k(z)})}function K(n){return e[n.type](n)}
var e={literal:function(n){return'"'+H(n.text)+'"'},class:function(n){var z=n.parts.map(function(O){return Array.isArray(O)?A(O[0])+"-"+A(O[1]):A(O)});return"["+(n.inverted?"^":"")+z.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(n){return n.description}};return"Expected "+function(n){n=n.map(K);var z,O;n.sort();if(0<n.length){for(O=z=1;z<n.length;z++)n[z-1]!==n[z]&&(n[O]=n[z],O++);n.length=O}switch(n.length){case 1:return n[0];case 2:return n[0]+
" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(h)+" but "+(m?'"'+H(m)+'"':"end of input")+" found."};return{SyntaxError:T,parse:function(h,m){function k(t,G){return{type:"literal",text:t,ignoreCase:G}}function H(t,G,aa){return{type:"class",parts:t,inverted:G,ignoreCase:aa}}function A(t){var G=ab[t],aa;if(!G){for(aa=t-1;!ab[aa];)aa--;G=ab[aa];for(G={line:G.line,column:G.column};aa<t;)10===h.charCodeAt(aa)?(G.line++,G.column=1):G.column++,aa++;ab[t]=G}return G}function K(t,
G,aa){var wa=A(t),Ja=A(G);t={source:fb,start:{offset:t,line:wa.line,column:wa.column},end:{offset:G,line:Ja.line,column:Ja.column}};aa&&fb&&"function"===typeof fb.offset&&(t.start=fb.offset(t.start),t.end=fb.offset(t.end));return t}function e(t){d<Xa||(d>Xa&&(Xa=d,zb=[]),zb.push(t))}function n(){var t=d;ua();var G=O();G!==b?(ua(),t=G):(d=t,t=b);return t}function z(){var t=d;var G=O();if(G!==b){t=[];var aa=d;var wa=ua();var Ja=Ka();if(Ja!==b){var bb=ua();var cb=O();cb!==b?aa=wa=[wa,Ja,bb,cb]:(d=aa,
aa=b)}else d=aa,aa=b;for(;aa!==b;)t.push(aa),aa=d,wa=ua(),Ja=Ka(),Ja!==b?(bb=ua(),cb=O(),cb!==b?aa=wa=[wa,Ja,bb,cb]:(d=aa,aa=b)):(d=aa,aa=b);aa={type:"expression-list"};G=[G];for(wa=0;wa<t.length;wa++)G.push(t[wa][3]);aa.value=G;t=aa}else d=t,t=b;return t}function O(){var t=d;var G=C();if(G!==b){t=[];var aa=d;var wa=ua();var Ja=ba();if(Ja!==b){var bb=ua();var cb=C();cb!==b?aa=wa=[wa,Ja,bb,cb]:(d=aa,aa=b)}else d=aa,aa=b;for(;aa!==b;)t.push(aa),aa=d,wa=ua(),Ja=ba(),Ja!==b?(bb=ua(),cb=C(),cb!==b?aa=
wa=[wa,Ja,bb,cb]:(d=aa,aa=b)):(d=aa,aa=b);t=jb(G,t)}else d=t,t=b;return t}function C(){var t=d;var G=u();if(G!==b){t=[];var aa=d;var wa=ua();var Ja=F();if(Ja!==b){var bb=ua();var cb=u();cb!==b?aa=wa=[wa,Ja,bb,cb]:(d=aa,aa=b)}else d=aa,aa=b;for(;aa!==b;)t.push(aa),aa=d,wa=ua(),Ja=F(),Ja!==b?(bb=ua(),cb=u(),cb!==b?aa=wa=[wa,Ja,bb,cb]:(d=aa,aa=b)):(d=aa,aa=b);t=jb(G,t)}else d=t,t=b;return t}function u(){var t=d;var G=ea();if(G===b){G=d;if(33===h.charCodeAt(d)){var aa=la;d++}else aa=b,0===ra&&e(ne);if(aa!==
b){var wa=d;ra++;if(61===h.charCodeAt(d)){var Ja=gc;d++}else Ja=b,0===ra&&e(Kc);ra--;Ja===b?wa=void 0:(d=wa,wa=b);wa!==b?G=aa=[aa,wa]:(d=G,G=b)}else d=G,G=b}G!==b?(aa=ua(),wa=u(),wa!==b?t={type:"unary-expression",operator:"NOT",expr:wa}:(d=t,t=b)):(d=t,t=b);if(t===b){G=d;t=w();if(t!==b){ua();G=[];aa=d;wa=ua();Ja=J();if(Ja!==b){var bb=ua();var cb=w();cb!==b?aa=wa=[wa,Ja,bb,cb]:(d=aa,aa=b)}else d=aa,aa=b;if(aa!==b)for(;aa!==b;)G.push(aa),aa=d,wa=ua(),Ja=J(),Ja!==b?(bb=ua(),cb=w(),cb!==b?aa=wa=[wa,Ja,
bb,cb]:(d=aa,aa=b)):(d=aa,aa=b);else G=b;G!==b&&(G={type:"arithmetic",tail:G});G===b&&(G=d,aa=D(),aa!==b?(ua(),wa=Ta(),wa!==b?(ua(),wa=z(),wa!==b?(ua(),Ja=Wa(),Ja!==b?G={op:aa,right:wa}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b)):(d=G,G=b),G===b&&(G=d,aa=D(),aa!==b?(ua(),wa=Ta(),wa!==b?(ua(),wa=Wa(),wa!==b?G={op:aa,right:{type:"expression-list",value:[]}}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b),G===b&&(G=d,aa=D(),aa!==b?(ua(),wa=r(),wa!==b?G={op:aa,right:wa}:(d=G,G=b)):(d=G,G=b))),G===b&&(G=d,Ja=ea(),Ja!==b?(ua(),aa=
p(),aa!==b?(ua(),wa=w(),wa!==b?(ua(),bb=F(),bb!==b?(ua(),Ja=w(),Ja!==b?G={op:"NOT"+aa,right:{type:"expression-list",value:[wa,Ja]}}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b)):(d=G,G=b)):(d=G,G=b),G===b&&(G=d,Ja=p(),Ja!==b?(ua(),aa=w(),aa!==b?(ua(),wa=F(),wa!==b?(ua(),bb=w(),bb!==b?G={op:Ja,right:{type:"expression-list",value:[aa,bb]}}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b)):(d=G,G=b)),G===b&&(G=d,aa=c(),aa!==b?(ua(),wa=ea(),wa!==b?(ua(),wa=w(),wa!==b?G={op:aa+"NOT",right:wa}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b),G===b&&
(G=d,aa=c(),aa!==b?(ua(),wa=w(),wa!==b?G={op:aa,right:wa}:(d=G,G=b)):(d=G,G=b)),G===b&&(G=d,aa=Q(),aa!==b?(ua(),wa=Ca(),wa!==b?(ua(),Ja=d,h.substr(d,6).toLowerCase()===ob?(bb=h.substr(d,6),d+=6):(bb=b,0===ra&&e(Od)),bb!==b?(bb=d,ra++,cb=M(),ra--,cb===b?bb=void 0:(d=bb,bb=b),bb!==b?Ja="ESCAPE":(d=Ja,Ja=b)):(d=Ja,Ja=b),Ja!==b?(ua(),Ja=Ga(),Ja!==b?G={op:aa,right:wa,escape:Ja.value}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b)):(d=G,G=b),G===b&&(G=d,aa=Q(),aa!==b?(ua(),wa=Ca(),wa!==b?G={op:aa,right:wa,escape:""}:
(d=G,G=b)):(d=G,G=b))))));G===b&&(G=null);""==G||void 0==G||null==G?G=t:(aa=null,G=aa="arithmetic"==G.type?jb(t,G.tail):hb(G.op,t,G.right,G.escape))}else d=G,G=b;t=G}return t}function J(){if(h.substr(d,2)===Tb){var t=Tb;d+=2}else t=b,0===ra&&e(hd);t===b&&(62===h.charCodeAt(d)?(t=yb,d++):(t=b,0===ra&&e(pe)),t===b&&(h.substr(d,2)===Sb?(t=Sb,d+=2):(t=b,0===ra&&e(Bd)),t===b&&(h.substr(d,2)===Ub?(t=Ub,d+=2):(t=b,0===ra&&e(se)),t===b&&(60===h.charCodeAt(d)?(t=Zb,d++):(t=b,0===ra&&e(re)),t===b&&(61===h.charCodeAt(d)?
(t=gc,d++):(t=b,0===ra&&e(Kc)),t===b&&(h.substr(d,2)===hc?(t=hc,d+=2):(t=b,0===ra&&e(qe))))))));return t}function Q(){var t=t=d;var G=ea();if(G!==b){var aa=ua();var wa=q();wa!==b?t=G=[G,aa,wa]:(d=t,t=b)}else d=t,t=b;t!==b&&(t=t[0]+" "+t[2]);t===b&&(t=q());return t}function D(){var t=t=d;var G=ea();if(G!==b){var aa=ua();var wa=db();wa!==b?t=G=[G,aa,wa]:(d=t,t=b)}else d=t,t=b;t!==b&&(t=t[0]+" "+t[2]);t===b&&(t=db());return t}function w(){var t=d;var G=x();if(G!==b){t=[];var aa=d;var wa=ua();var Ja=
y();if(Ja!==b){var bb=ua();var cb=x();cb!==b?aa=wa=[wa,Ja,bb,cb]:(d=aa,aa=b)}else d=aa,aa=b;for(;aa!==b;)t.push(aa),aa=d,wa=ua(),Ja=y(),Ja!==b?(bb=ua(),cb=x(),cb!==b?aa=wa=[wa,Ja,bb,cb]:(d=aa,aa=b)):(d=aa,aa=b);t=jb(G,t)}else d=t,t=b;return t}function y(){if(43===h.charCodeAt(d)){var t=Db;d++}else t=b,0===ra&&e(Uc);t===b&&(45===h.charCodeAt(d)?(t=Pb,d++):(t=b,0===ra&&e(Ab)),t===b&&(h.substr(d,2)===ib?(t=ib,d+=2):(t=b,0===ra&&e(Rb))));return t}function x(){var t=d;var G=E();if(G!==b){t=[];var aa=d;
var wa=ua();var Ja=B();if(Ja!==b){var bb=ua();var cb=E();cb!==b?aa=wa=[wa,Ja,bb,cb]:(d=aa,aa=b)}else d=aa,aa=b;for(;aa!==b;)t.push(aa),aa=d,wa=ua(),Ja=B(),Ja!==b?(bb=ua(),cb=E(),cb!==b?aa=wa=[wa,Ja,bb,cb]:(d=aa,aa=b)):(d=aa,aa=b);t=jb(G,t)}else d=t,t=b;return t}function B(){if(42===h.charCodeAt(d)){var t=Fb;d++}else t=b,0===ra&&e(Hd);t===b&&(47===h.charCodeAt(d)?(t=Qb,d++):(t=b,0===ra&&e(Id)));return t}function E(){var t=Ga();if(t===b){var G=d;var aa=d;var wa=Sa();if(wa!==b){var Ja=Va();if(Ja!==b){var bb=
eb();bb!==b?aa=parseFloat(wa+Ja+bb):(d=aa,aa=b)}else d=aa,aa=b}else d=aa,aa=b;aa===b&&(aa=d,wa=Sa(),wa!==b?(Ja=Va(),Ja!==b?aa=parseFloat(wa+Ja):(d=aa,aa=b)):(d=aa,aa=b),aa===b&&(aa=d,wa=Sa(),wa!==b?(Ja=eb(),Ja!==b?aa=parseFloat(wa+Ja):(d=aa,aa=b)):(d=aa,aa=b),aa===b&&(aa=d,wa=Sa(),wa!==b&&(wa=parseFloat(wa)),aa=wa)));var cb=aa;if(cb!==b){var Qd=d;ra++;var Lf=Y();ra--;Lf===b?Qd=void 0:(d=Qd,Qd=b);Qd!==b?G={type:"number",value:cb}:(d=G,G=b)}else d=G,G=b;t=G;if(t===b){var Xc=d;var qc=d;if(h.substr(d,
4).toLowerCase()===Da){var Rd=h.substr(d,4);d+=4}else Rd=b,0===ra&&e(He);if(Rd!==b){var Yc=d;ra++;var Mf=M();ra--;Mf===b?Yc=void 0:(d=Yc,Yc=b);Yc!==b?qc=Rd=[Rd,Yc]:(d=qc,qc=b)}else d=qc,qc=b;var lc=qc;lc!==b&&(lc={type:"boolean",value:!0});Xc=lc;if(Xc===b){Xc=d;var rc=d;if(h.substr(d,5).toLowerCase()===Ba){var Sd=h.substr(d,5);d+=5}else Sd=b,0===ra&&e(Ie);if(Sd!==b){var Zc=d;ra++;var Nf=M();ra--;Nf===b?Zc=void 0:(d=Zc,Zc=b);Zc!==b?rc=Sd=[Sd,Zc]:(d=rc,rc=b)}else d=rc,rc=b;lc=rc;lc!==b&&(lc={type:"boolean",
value:!1});Xc=lc}t=Xc;if(t===b){var sc=d;if(h.substr(d,4).toLowerCase()===oa){var Td=h.substr(d,4);d+=4}else Td=b,0===ra&&e(Ge);if(Td!==b){var $c=d;ra++;var Of=M();ra--;Of===b?$c=void 0:(d=$c,$c=b);$c!==b?sc=Td=[Td,$c]:(d=sc,sc=b)}else d=sc,sc=b;var Ze=sc;Ze!==b&&(Ze={type:"null",value:null});t=Ze;if(t===b){var tc=d;if(fa()!==b){ua();var lf=Ca();lf!==b?tc={type:"date",value:lf.value}:(d=tc,tc=b)}else d=tc,tc=b;t=tc;if(t===b){var uc=d;if(W()!==b){ua();var mf=Ca();mf!==b?uc={type:"timestamp",value:mf.value}:
(d=uc,uc=b)}else d=uc,uc=b;t=uc;if(t===b){var Bb=d;var $e=na();if($e!==b){ua();if(45===h.charCodeAt(d)){var cc=Pb;d++}else cc=b,0===ra&&e(Ab);cc===b&&(43===h.charCodeAt(d)?(cc=Db,d++):(cc=b,0===ra&&e(Uc)));if(cc!==b){ua();var ad=Ca();if(ad!==b){ua();var nf=Z();nf!==b?Bb={type:"interval",value:ad,qualifier:nf,op:cc}:(d=Bb,Bb=b)}else d=Bb,Bb=b}else d=Bb,Bb=b}else d=Bb,Bb=b;Bb===b&&(Bb=d,$e=na(),$e!==b?(ua(),cc=Ca(),cc!==b?(ua(),ad=Z(),ad!==b?Bb={type:"interval",value:cc,qualifier:ad,op:""}:(d=Bb,Bb=
b)):(d=Bb,Bb=b)):(d=Bb,Bb=b));t=Bb}}}}}}var pb=t;if(pb===b){var Kb=d;var vc=d;if(h.substr(d,7).toLowerCase()===qd){var of=h.substr(d,7);d+=7}else of=b,0===ra&&e(Pd);if(of!==b){var Ud=d;ra++;var Pf=M();ra--;Pf===b?Ud=void 0:(d=Ud,Ud=b);Ud!==b?vc="EXTRACT":(d=vc,vc=b)}else d=vc,vc=b;if(vc!==b){ua();var Qf=Ta();if(Qf!==b){ua();var Xb=pa();Xb===b&&(Xb=sa(),Xb===b&&(Xb=va(),Xb===b&&(Xb=Ea(),Xb===b&&(Xb=Aa(),Xb===b&&(Xb=za())))));var pf=Xb;if(pf!==b){ua();var Rf=I();if(Rf!==b){ua();var qf=O();if(qf!==b){ua();
var Sf=Wa();Sf!==b?Kb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(d=Kb,Kb=b)}else d=Kb,Kb=b}else d=Kb,Kb=b}else d=Kb,Kb=b}else d=Kb,Kb=b}else d=Kb,Kb=b;pb=Kb;if(pb===b){var Lb=d;var wc=d;if(h.substr(d,9).toLowerCase()===pd){var rf=h.substr(d,9);d+=9}else rf=b,0===ra&&e(Se);if(rf!==b){var Vd=d;ra++;var Tf=M();ra--;Tf===b?Vd=void 0:(d=Vd,Vd=b);Vd!==b?wc="SUBSTRING":(d=wc,wc=b)}else d=wc,wc=b;if(wc!==b){ua();var Uf=Ta();if(Uf!==b){ua();var af=O();
if(af!==b){ua();var Vf=I();if(Vf!==b){ua();var bf=O();if(bf!==b){ua();var dc=d;var xc=d;if(h.substr(d,3).toLowerCase()===od){var sf=h.substr(d,3);d+=3}else sf=b,0===ra&&e(Re);if(sf!==b){var Wd=d;ra++;var Wf=M();ra--;Wf===b?Wd=void 0:(d=Wd,Wd=b);Wd!==b?xc="FOR":(d=xc,xc=b)}else d=xc,xc=b;var bd=xc;if(bd!==b){var Xf=ua();var tf=O();if(tf!==b){var Yf=ua();dc=bd=[bd,Xf,tf,Yf]}else d=dc,dc=b}else d=dc,dc=b;dc===b&&(dc=null);bd=Wa();bd!==b?Lb={type:"function",name:"substring",args:{type:"expression-list",
value:dc?[af,bf,dc[2]]:[af,bf]}}:(d=Lb,Lb=b)}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b;pb=Lb;if(pb===b){var sb=d;var cf=V();if(cf!==b){ua();var df=Ta();if(df!==b){ua();var ec=v();ec===b&&(ec=null);ua();var cd=O();if(cd!==b){ua();var ef=I();if(ef!==b){ua();var uf=O();if(uf!==b){ua();var Zf=Wa();Zf!==b?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ec?"BOTH":ec},cd,uf]}}:(d=sb,sb=b)}else d=sb,sb=b}else d=sb,sb=b}else d=
sb,sb=b}else d=sb,sb=b}else d=sb,sb=b;sb===b&&(sb=d,cf=V(),cf!==b?(ua(),df=Ta(),df!==b?(ua(),ec=v(),ec===b&&(ec=null),ua(),cd=O(),cd!==b?(ua(),ef=Wa(),ef!==b?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ec?"BOTH":ec},cd]}}:(d=sb,sb=b)):(d=sb,sb=b)):(d=sb,sb=b)):(d=sb,sb=b));pb=sb;if(pb===b){var Mb=d;var yc=d;if(h.substr(d,8).toLowerCase()===sd){var vf=h.substr(d,8);d+=8}else vf=b,0===ra&&e(Ue);if(vf!==b){var Xd=d;ra++;var $f=M();ra--;$f===b?Xd=void 0:
(d=Xd,Xd=b);Xd!==b?yc="POSITION":(d=yc,yc=b)}else d=yc,yc=b;if(yc!==b){ua();var ag=Ta();if(ag!==b){ua();var wf=O();if(wf!==b){ua();var bg=db();if(bg!==b){ua();var xf=O();if(xf!==b){ua();var cg=Wa();cg!==b?Mb={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(d=Mb,Mb=b)}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b;pb=Mb;if(pb===b){var Nb=d;var zc=d;if(h.substr(d,4).toLowerCase()===xd){var yf=h.substr(d,4);d+=4}else yf=b,0===ra&&e(Lc);if(yf!==
b){var Yd=d;ra++;var dg=M();ra--;dg===b?Yd=void 0:(d=Yd,Yd=b);Yd!==b?zc="CAST":(d=zc,zc=b)}else d=zc,zc=b;if(zc!==b){ua();var eg=Ta();if(eg!==b){ua();var zf=O();if(zf!==b){ua();var Ac=d;if(h.substr(d,2).toLowerCase()===yd){var Af=h.substr(d,2);d+=2}else Af=b,0===ra&&e(id);if(Af!==b){var Zd=d;ra++;var fg=M();ra--;fg===b?Zd=void 0:(d=Zd,Zd=b);Zd!==b?Ac="AS":(d=Ac,Ac=b)}else d=Ac,Ac=b;var gg=Ac;if(gg!==b){ua();var qb=d;var Bc=d;if(h.substr(d,7).toLowerCase()===zd){var Bf=h.substr(d,7);d+=7}else Bf=b,
0===ra&&e(ve);if(Bf!==b){var $d=d;ra++;var hg=M();ra--;hg===b?$d=void 0:(d=$d,$d=b);$d!==b?Bc="INTEGER":(d=Bc,Bc=b)}else d=Bc,Bc=b;var tb=Bc;tb!==b&&(tb={type:"data-type",value:{type:"integer"}});qb=tb;if(qb===b){qb=d;var Cc=d;if(h.substr(d,8).toLowerCase()===Ad){var Cf=h.substr(d,8);d+=8}else Cf=b,0===ra&&e(jd);if(Cf!==b){var ae=d;ra++;var ig=M();ra--;ig===b?ae=void 0:(d=ae,ae=b);ae!==b?Cc="SMALLINT":(d=Cc,Cc=b)}else d=Cc,Cc=b;tb=Cc;tb!==b&&(tb={type:"data-type",value:{type:"smallint"}});qb=tb;if(qb===
b){qb=d;var Dc=d;if(h.substr(d,5).toLowerCase()===ic){var Df=h.substr(d,5);d+=5}else Df=b,0===ra&&e(Mc);if(Df!==b){var be=d;ra++;var jg=M();ra--;jg===b?be=void 0:(d=be,be=b);be!==b?Dc="FLOAT":(d=Dc,Dc=b)}else d=Dc,Dc=b;tb=Dc;tb!==b&&(tb={type:"data-type",value:{type:"float"}});qb=tb;if(qb===b){qb=d;var Ec=d;if(h.substr(d,4).toLowerCase()===Qc){var Ef=h.substr(d,4);d+=4}else Ef=b,0===ra&&e(we);if(Ef!==b){var ce=d;ra++;var kg=M();ra--;kg===b?ce=void 0:(d=ce,ce=b);ce!==b?Ec="REAL":(d=Ec,Ec=b)}else d=
Ec,Ec=b;tb=Ec;tb!==b&&(tb={type:"data-type",value:{type:"real"}});qb=tb;if(qb===b&&(qb=d,tb=fa(),tb!==b&&(tb={type:"data-type",value:{type:"date"}}),qb=tb,qb===b&&(qb=d,tb=W(),tb!==b&&(tb={type:"data-type",value:{type:"timestamp"}}),qb=tb,qb===b))){qb=d;var Fc=d;if(h.substr(d,7).toLowerCase()===mc){var Ff=h.substr(d,7);d+=7}else Ff=b,0===ra&&e(Nc);if(Ff!==b){var de=d;ra++;var lg=M();ra--;lg===b?de=void 0:(d=de,de=b);de!==b?Fc="VARCHAR":(d=Fc,Fc=b)}else d=Fc,Fc=b;tb=Fc;if(tb!==b){ua();var mg=Ta();
if(mg!==b){ua();var Gf=kb();if(Gf!==b){ua();var ng=Wa();ng!==b?qb={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(d=qb,qb=b)}else d=qb,qb=b}else d=qb,qb=b}else d=qb,qb=b}}}}var Hf=qb;if(Hf!==b){ua();var og=Wa();og!==b?Nb={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(d=Nb,Nb=b)}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b;pb=Nb;if(pb===b){var jc=d;var ee;var Yb=d;Yb=ee=U();if(Yb===b)if(Yb=d,96===h.charCodeAt(d)?(ee=Sc,d++):(ee=
b,0===ra&&e(Na)),ee!==b){var fe=[];if(Jc.test(h.charAt(d))){var fc=h.charAt(d);d++}else fc=b,0===ra&&e($a);if(fc!==b)for(;fc!==b;)fe.push(fc),Jc.test(h.charAt(d))?(fc=h.charAt(d),d++):(fc=b,0===ra&&e($a));else fe=b;fe!==b?(96===h.charCodeAt(d)?(fc=Sc,d++):(fc=b,0===ra&&e(Na)),fc!==b?Yb=fe.join(""):(d=Yb,Yb=b)):(d=Yb,Yb=b)}else d=Yb,Yb=b;var If=Yb;if(If!==b){ua();var pg=Ta();if(pg!==b){ua();var ge=z();ge===b&&(ge=null);ua();var qg=Wa();qg!==b?jc={type:"function",name:If,args:ge?ge:{type:"expression-list",
value:[]}}:(d=jc,jc=b)}else d=jc,jc=b}else d=jc,jc=b;pb=jc;if(pb===b){var $b;var Cb=d;var ff=Ra();if(ff!==b){ua();var dd=O();if(dd!==b){ua();var ed=[];for($b=Fa();$b!==b;)ed.push($b),$b=Fa();$b=ua();var he=Ma();he!==b?Cb={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:null}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;if(Cb===b)if(Cb=d,ff=Ra(),ff!==b)if(ua(),dd=O(),dd!==b){ua();ed=[];for($b=Fa();$b!==b;)ed.push($b),$b=Fa();$b=ua();he=Oa();if(he!==b){ua();var rg=Ma();rg!==b?Cb={type:"case-expression",
format:"simple",operand:dd,clauses:ed,else:he.value}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;else d=Cb,Cb=b;var gf=Cb;if(gf===b){var ac;var Ib=d;var hf=Ra();if(hf!==b){ua();var fd=[];for(ac=Ha();ac!==b;)fd.push(ac),ac=Ha();ac=ua();var ie=Ma();ie!==b?Ib={type:"case-expression",format:"searched",clauses:fd,else:null}:(d=Ib,Ib=b)}else d=Ib,Ib=b;if(Ib===b)if(Ib=d,hf=Ra(),hf!==b){ua();fd=[];for(ac=Ha();ac!==b;)fd.push(ac),ac=Ha();ac=ua();ie=Oa();if(ie!==b){ua();var sg=Ma();sg!==b?Ib={type:"case-expression",
format:"searched",clauses:fd,else:ie.value}:(d=Ib,Ib=b)}else d=Ib,Ib=b}else d=Ib,Ib=b;gf=Ib}pb=gf;if(pb===b){var je;var ke=d;var Jf=Y();if(Jf!==b){var Kf=[];for(je=P();je!==b;)Kf.push(je),je=P();ke=Jf+Kf.join("")}else d=ke,ke=b;var le=ke;if(le!==b){var jf=le;le=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}pb=le;if(pb===b&&(pb=r(),pb===b)){pb=d;var tg=Ta();if(tg!==b){ua();
var kf=O();if(kf!==b){ua();var ug=Wa();ug!==b?(kf.paren=!0,pb=kf):(d=pb,pb=b)}else d=pb,pb=b}else d=pb,pb=b}}}}}}}}}return pb}function U(){var t;var G=d;var aa=Y();if(aa!==b){G=[];for(t=M();t!==b;)G.push(t),t=M();G=aa+G.join("")}else d=G,G=b;return G}function Y(){if(Cd.test(h.charAt(d))){var t=h.charAt(d);d++}else t=b,0===ra&&e(Vc);return t}function M(){if(Dd.test(h.charAt(d))){var t=h.charAt(d);d++}else t=b,0===ra&&e(Jd);return t}function P(){if(Ed.test(h.charAt(d))){var t=h.charAt(d);d++}else t=
b,0===ra&&e(Wc);return t}function r(){var t=d;if(64===h.charCodeAt(d)){var G=Ya;d++}else G=b,0===ra&&e(Ce);if(G!==b){var aa=U();aa!==b?t=G=[G,aa]:(d=t,t=b)}else d=t,t=b;t!==b&&(t={type:"parameter",value:t[1]});return t}function v(){var t=d;if(h.substr(d,7).toLowerCase()===vd){var G=h.substr(d,7);d+=7}else G=b,0===ra&&e(gb);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="LEADING":(d=t,t=b)}else d=t,t=b;t===b&&(t=d,h.substr(d,8).toLowerCase()===wd?(G=h.substr(d,8),d+=8):(G=b,0===
ra&&e(vb)),G!==b?(G=d,ra++,aa=M(),ra--,aa===b?G=void 0:(d=G,G=b),G!==b?t="TRAILING":(d=t,t=b)):(d=t,t=b),t===b&&(t=d,h.substr(d,4).toLowerCase()===xe?(G=h.substr(d,4),d+=4):(G=b,0===ra&&e(kc)),G!==b?(G=d,ra++,aa=M(),ra--,aa===b?G=void 0:(d=G,G=b),G!==b?t="BOTH":(d=t,t=b)):(d=t,t=b)));return t}function Z(){var t=d;var G=d;var aa=ja();if(aa!==b){ua();var wa=Ta();if(wa!==b)if(ua(),wa=xa(),wa!==b){ua();var Ja=Wa();Ja!==b?G={type:"interval-period",period:aa.value,precision:wa,secondary:null}:(d=G,G=b)}else d=
G,G=b;else d=G,G=b}else d=G,G=b;G===b&&(G=d,aa=ja(),aa!==b&&(aa={type:"interval-period",period:aa.value,precision:null,secondary:null}),G=aa);if(G!==b)if(ua(),aa=d,h.substr(d,2).toLowerCase()===nc?(wa=h.substr(d,2),d+=2):(wa=b,0===ra&&e(Pc)),wa!==b?(wa=d,ra++,Ja=M(),ra--,Ja===b?wa=void 0:(d=wa,wa=b),wa!==b?aa="TO":(d=aa,aa=b)):(d=aa,aa=b),aa!==b){ua();aa=d;wa=ja();wa!==b&&(wa={type:"interval-period",period:wa.value,precision:null,secondary:null});aa=wa;if(aa===b){aa=d;wa=za();if(wa!==b)if(ua(),wa=
Ta(),wa!==b)if(ua(),wa=xa(),wa!==b)if(ua(),Ja=Ka(),Ja!==b)if(ua(),Ja=ta(),Ja!==b){ua();var bb=Wa();bb!==b?aa={type:"interval-period",period:"second",precision:wa,secondary:Ja}:(d=aa,aa=b)}else d=aa,aa=b;else d=aa,aa=b;else d=aa,aa=b;else d=aa,aa=b;else d=aa,aa=b;aa===b&&(aa=d,wa=za(),wa!==b?(ua(),wa=Ta(),wa!==b?(ua(),wa=xa(),wa!==b?(ua(),Ja=Wa(),Ja!==b?aa={type:"interval-period",period:"second",precision:wa,secondary:null}:(d=aa,aa=b)):(d=aa,aa=b)):(d=aa,aa=b)):(d=aa,aa=b),aa===b&&(aa=d,wa=za(),wa!==
b&&(wa={type:"interval-period",period:"second",precision:null,secondary:null}),aa=wa))}aa!==b?t={type:"interval-qualifier",start:G,end:aa}:(d=t,t=b)}else d=t,t=b;else d=t,t=b;t===b&&(t=d,aa=ja(),aa!==b?(ua(),G=Ta(),G!==b?(ua(),G=ta(),G!==b?(ua(),wa=Wa(),wa!==b?t={type:"interval-period",period:aa.value,precision:G,secondary:null}:(d=t,t=b)):(d=t,t=b)):(d=t,t=b)):(d=t,t=b),t===b&&(t=d,aa=ja(),aa!==b&&(aa={type:"interval-period",period:aa.value,precision:null,secondary:null}),t=aa,t===b&&(t=d,aa=za(),
aa!==b?(ua(),G=Ta(),G!==b?(ua(),G=xa(),G!==b?(ua(),wa=Ka(),wa!==b?(ua(),aa=ta(),aa!==b?(ua(),wa=Wa(),wa!==b?t={type:"interval-period",period:"second",precision:G,secondary:aa}:(d=t,t=b)):(d=t,t=b)):(d=t,t=b)):(d=t,t=b)):(d=t,t=b)):(d=t,t=b),t===b&&(t=d,aa=za(),aa!==b?(ua(),G=Ta(),G!==b?(ua(),G=ta(),G!==b?(ua(),wa=Wa(),wa!==b?t={type:"interval-period",period:"second",precision:G,secondary:null}:(d=t,t=b)):(d=t,t=b)):(d=t,t=b)):(d=t,t=b),t===b&&(t=d,aa=za(),aa!==b&&(aa={type:"interval-period",period:"second",
precision:null,secondary:null}),t=aa)))));return t}function ja(){var t=d;t=va();t!==b&&(t={type:"string",value:"day"});t===b&&(t=d,t=Ea(),t!==b&&(t={type:"string",value:"hour"}),t===b&&(t=d,t=Aa(),t!==b&&(t={type:"string",value:"minute"}),t===b&&(t=d,t=sa(),t!==b&&(t={type:"string",value:"month"}),t===b&&(t=d,t=pa(),t!==b&&(t={type:"string",value:"year"})))));return t}function ta(){var t=kb();t!==b&&(t=parseFloat(t));return t}function xa(){var t=kb();t!==b&&(t=parseFloat(t));return t}function Ca(){var t=
Ga();t===b&&(t=r());return t}function Ga(){var t=d;if(39===h.charCodeAt(d)){var G=Hb;d++}else G=b,0===ra&&e(Kd);G===b&&(h.substr(d,2)===S?(G=S,d+=2):(G=b,0===ra&&e(Ld)));if(G!==b){G=[];var aa=d;h.substr(d,2)===ia?(aa=ia,d+=2):(aa=b,0===ra&&e(Md));aa!==b&&(aa="'");aa===b&&(Tc.test(h.charAt(d))?(aa=h.charAt(d),d++):(aa=b,0===ra&&e(Nd)));for(;aa!==b;)G.push(aa),aa=d,h.substr(d,2)===ia?(aa=ia,d+=2):(aa=b,0===ra&&e(Md)),aa!==b&&(aa="'"),aa===b&&(Tc.test(h.charAt(d))?(aa=h.charAt(d),d++):(aa=b,0===ra&&
e(Nd)));39===h.charCodeAt(d)?(aa=Hb,d++):(aa=b,0===ra&&e(Kd));aa!==b?t={type:"string",value:G.join("")}:(d=t,t=b)}else d=t,t=b;return t}function Ha(){var t=d;if(Pa()!==b){ua();var G=O();if(G!==b){ua();var aa=Qa();aa!==b?(ua(),aa=O(),aa!==b?t={type:"when-clause",operand:G,value:aa}:(d=t,t=b)):(d=t,t=b)}else d=t,t=b}else d=t,t=b;return t}function Fa(){var t=d;if(Pa()!==b){ua();var G=O();if(G!==b){ua();var aa=Qa();aa!==b?(ua(),aa=O(),aa!==b?t={type:"when-clause",operand:G,value:aa}:(d=t,t=b)):(d=t,t=
b)}else d=t,t=b}else d=t,t=b;return t}function Oa(){var t=d;var G=d;if(h.substr(d,4).toLowerCase()===rb){var aa=h.substr(d,4);d+=4}else aa=b,0===ra&&e(da);if(aa!==b){aa=d;ra++;var wa=M();ra--;wa===b?aa=void 0:(d=aa,aa=b);aa!==b?G="ELSE":(d=G,G=b)}else d=G,G=b;G!==b?(ua(),G=O(),G!==b?t={type:"else-clause",value:G}:(d=t,t=b)):(d=t,t=b);return t}function Sa(){var t=kb();if(t===b){t=d;if(45===h.charCodeAt(d)){var G=Pb;d++}else G=b,0===ra&&e(Ab);G===b&&(43===h.charCodeAt(d)?(G=Db,d++):(G=b,0===ra&&e(Uc)));
if(G!==b){var aa=kb();aa!==b?t=G[0]+aa:(d=t,t=b)}else d=t,t=b}return t}function Va(){var t=d;if(46===h.charCodeAt(d)){var G=X;d++}else G=b,0===ra&&e(De);G!==b?(t=kb(),t===b&&(t=null),t="."+(null!=t?t:"")):(d=t,t=b);return t}function eb(){var t;var G=t=d;if(Gd.test(h.charAt(d))){var aa=h.charAt(d);d++}else aa=b,0===ra&&e(Ee);aa!==b?(xb.test(h.charAt(d))?(G=h.charAt(d),d++):(G=b,0===ra&&e(Fe)),G===b&&(G=null),G="e"+(null===G?"":G)):(d=G,G=b);G!==b?(aa=kb(),aa!==b?t=G+aa:(d=t,t=b)):(d=t,t=b);return t}
function kb(){var t=[];var G=lb();if(G!==b)for(;G!==b;)t.push(G),G=lb();else t=b;t!==b&&(t=t.join(""));return t}function lb(){if(Fd.test(h.charAt(d))){var t=h.charAt(d);d++}else t=b,0===ra&&e(te);return t}function db(){var t=d;if(h.substr(d,2).toLowerCase()===La){var G=h.substr(d,2);d+=2}else G=b,0===ra&&e(Je);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="IN":(d=t,t=b)}else d=t,t=b;return t}function c(){var t=d;if(h.substr(d,2).toLowerCase()===Ua){var G=h.substr(d,2);d+=2}else G=
b,0===ra&&e(Ke);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="IS":(d=t,t=b)}else d=t,t=b;return t}function q(){var t=d;if(h.substr(d,4).toLowerCase()===nb){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(Le);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="LIKE":(d=t,t=b)}else d=t,t=b;return t}function ea(){var t=d;if(h.substr(d,3).toLowerCase()===mb){var G=h.substr(d,3);d+=3}else G=b,0===ra&&e(Me);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=
b);G!==b?t="NOT":(d=t,t=b)}else d=t,t=b;return t}function F(){var t=d;if(h.substr(d,3).toLowerCase()===wb){var G=h.substr(d,3);d+=3}else G=b,0===ra&&e(Ne);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="AND":(d=t,t=b)}else d=t,t=b;return t}function ba(){var t=d;if(h.substr(d,2).toLowerCase()===Gb){var G=h.substr(d,2);d+=2}else G=b,0===ra&&e(Oe);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="OR":(d=t,t=b)}else d=t,t=b;return t}function p(){var t=d;if(h.substr(d,
7).toLowerCase()===md){var G=h.substr(d,7);d+=7}else G=b,0===ra&&e(Pe);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="BETWEEN":(d=t,t=b)}else d=t,t=b;return t}function I(){var t=d;if(h.substr(d,4).toLowerCase()===nd){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(Qe);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="FROM":(d=t,t=b)}else d=t,t=b;return t}function V(){var t=d;if(h.substr(d,4).toLowerCase()===rd){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(Te);
if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="TRIM":(d=t,t=b)}else d=t,t=b;return t}function W(){var t=d;if(h.substr(d,9).toLowerCase()===td){var G=h.substr(d,9);d+=9}else G=b,0===ra&&e(bc);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="TIMESTAMP":(d=t,t=b)}else d=t,t=b;return t}function fa(){var t=d;if(h.substr(d,4).toLowerCase()===ud){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(ue);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?
t="DATE":(d=t,t=b)}else d=t,t=b;return t}function na(){var t=d;if(h.substr(d,8).toLowerCase()===ye){var G=h.substr(d,8);d+=8}else G=b,0===ra&&e(Oc);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="INTERVAL":(d=t,t=b)}else d=t,t=b;return t}function pa(){var t=d;if(h.substr(d,4).toLowerCase()===oc){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(ld);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="YEAR":(d=t,t=b)}else d=t,t=b;return t}function sa(){var t=d;if(h.substr(d,
5).toLowerCase()===Vb){var G=h.substr(d,5);d+=5}else G=b,0===ra&&e(Ve);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="MONTH":(d=t,t=b)}else d=t,t=b;return t}function va(){var t=d;if(h.substr(d,3).toLowerCase()===gd){var G=h.substr(d,3);d+=3}else G=b,0===ra&&e(We);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="DAY":(d=t,t=b)}else d=t,t=b;return t}function Ea(){var t=d;if(h.substr(d,4).toLowerCase()===Gc){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(kd);
if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="HOUR":(d=t,t=b)}else d=t,t=b;return t}function Aa(){var t=d;if(h.substr(d,6).toLowerCase()===Hc){var G=h.substr(d,6);d+=6}else G=b,0===ra&&e(Xe);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="MINUTE":(d=t,t=b)}else d=t,t=b;return t}function za(){var t=d;if(h.substr(d,6).toLowerCase()===Ic){var G=h.substr(d,6);d+=6}else G=b,0===ra&&e(Ye);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t=
"SECOND":(d=t,t=b)}else d=t,t=b;return t}function Ra(){var t=d;if(h.substr(d,4).toLowerCase()===pc){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(Za);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="CASE":(d=t,t=b)}else d=t,t=b;return t}function Ma(){var t=d;if(h.substr(d,3).toLowerCase()===ze){var G=h.substr(d,3);d+=3}else G=b,0===ra&&e(a);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="END":(d=t,t=b)}else d=t,t=b;return t}function Pa(){var t=d;if(h.substr(d,
4).toLowerCase()===Ae){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(g);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="WHEN":(d=t,t=b)}else d=t,t=b;return t}function Qa(){var t=d;if(h.substr(d,4).toLowerCase()===Be){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(N);if(G!==b){G=d;ra++;var aa=M();ra--;aa===b?G=void 0:(d=G,G=b);G!==b?t="THEN":(d=t,t=b)}else d=t,t=b;return t}function Ka(){if(44===h.charCodeAt(d)){var t=Rc;d++}else t=b,0===ra&&e(ma);return t}function Ta(){if(40===h.charCodeAt(d)){var t=
Eb;d++}else t=b,0===ra&&e(qa);return t}function Wa(){if(41===h.charCodeAt(d)){var t=me;d++}else t=b,0===ra&&e(ya);return t}function ua(){var t;var G=[];for(t=ub();t!==b;)G.push(t),t=ub();return G}function ub(){if(oe.test(h.charAt(d))){var t=h.charAt(d);d++}else t=b,0===ra&&e(Ia);return t}function hb(t,G,aa,wa){t={type:"binary-expression",operator:t,left:G,right:aa};void 0!==wa&&(t.escape=wa);return t}function jb(t,G){for(var aa=0;aa<G.length;aa++)t=hb(G[aa][1],t,G[aa][3]);return t}m=void 0!==m?m:
{};var b={},fb=m.grammarSource,Ob={start:n},Jb=n,la="!",gc="\x3d",Tb="\x3e\x3d",yb="\x3e",Sb="\x3c\x3d",Ub="\x3c\x3e",Zb="\x3c",hc="!\x3d",Db="+",Pb="-",ib="||",Fb="*",Qb="/",Ya="@",Hb="'",S="N'",ia="''",X=".",oa="null",Da="true",Ba="false",La="in",Ua="is",nb="like",ob="escape",mb="not",wb="and",Gb="or",md="between",nd="from",od="for",pd="substring",qd="extract",rd="trim",sd="position",td="timestamp",ud="date",vd="leading",wd="trailing",xe="both",xd="cast",yd="as",zd="integer",Ad="smallint",ic="float",
Qc="real",mc="varchar",nc="to",ye="interval",oc="year",Vb="month",gd="day",Gc="hour",Hc="minute",Ic="second",pc="case",ze="end",Ae="when",Be="then",rb="else",Rc=",",Eb="(",me=")",Sc="`",Cd=/^[A-Za-z_\x80-\uFFFF]/,Dd=/^[A-Za-z0-9_]/,Ed=/^[A-Za-z0-9_.\x80-\uFFFF]/,Tc=/^[^']/,Fd=/^[0-9]/,Gd=/^[eE]/,xb=/^[+\-]/,oe=/^[ \t\n\r]/,Jc=/^[^`]/,ne=k("!",!1),Kc=k("\x3d",!1),hd=k("\x3e\x3d",!1),pe=k("\x3e",!1),Bd=k("\x3c\x3d",!1),se=k("\x3c\x3e",!1),re=k("\x3c",!1),qe=k("!\x3d",!1),Uc=k("+",!1),Ab=k("-",!1),Rb=
k("||",!1),Hd=k("*",!1),Id=k("/",!1),Vc=H([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Jd=H([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Wc=H([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Ce=k("@",!1),Kd=k("'",!1),Ld=k("N'",!1),Md=k("''",!1),Nd=H(["'"],!0,!1),De=k(".",!1),te=H([["0","9"]],!1,!1),Ee=H(["e","E"],!1,!1),Fe=H(["+","-"],!1,!1),Ge=k("NULL",!0),He=k("TRUE",!0),Ie=k("FALSE",!0),Je=k("IN",!0),Ke=k("IS",!0),Le=k("LIKE",!0),Od=k("ESCAPE",!0),Me=k("NOT",!0),Ne=k("AND",
!0),Oe=k("OR",!0),Pe=k("BETWEEN",!0),Qe=k("FROM",!0),Re=k("FOR",!0),Se=k("SUBSTRING",!0),Pd=k("EXTRACT",!0),Te=k("TRIM",!0),Ue=k("POSITION",!0),bc=k("TIMESTAMP",!0),ue=k("DATE",!0),gb=k("LEADING",!0),vb=k("TRAILING",!0),kc=k("BOTH",!0),Lc=k("CAST",!0),id=k("AS",!0),ve=k("INTEGER",!0),jd=k("SMALLINT",!0),Mc=k("FLOAT",!0),we=k("REAL",!0),Nc=k("VARCHAR",!0),Pc=k("TO",!0),Oc=k("INTERVAL",!0),ld=k("YEAR",!0),Ve=k("MONTH",!0),We=k("DAY",!0),kd=k("HOUR",!0),Xe=k("MINUTE",!0),Ye=k("SECOND",!0),Za=k("CASE",
!0),a=k("END",!0),g=k("WHEN",!0),N=k("THEN",!0),da=k("ELSE",!0),ma=k(",",!1),qa=k("(",!1),ya=k(")",!1),Ia=H([" ","\t","\n","\r"],!1,!1),Na=k("`",!1),$a=H(["`"],!0,!1),d=0,ab=[{line:1,column:1}],Xa=0,zb=[],ra=0;if("startRule"in m){if(!(m.startRule in Ob))throw Error("Can't start parsing from rule \""+m.startRule+'".');Jb=Ob[m.startRule]}var Wb=Jb();if(Wb!==b&&d===h.length)return Wb;Wb!==b&&d<h.length&&e({type:"end"});throw function(t,G,aa){return new T(T.buildMessage(t,G),t,G,aa)}(zb,Xa<h.length?h.charAt(Xa):
null,Xa<h.length?K(Xa,Xa+1):K(Xa,Xa));}}})})(ca);var R=ca.exports;ca=function(){function ha(){}ha.parse=function(T){return R.parse(T)};return f._createClass(ha)}();l.WhereGrammar=ca;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(l){l.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,
centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,
supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(l,f,ka,ca,R,ha,T,L,h,m,k,H,A){function K(O,C,u,J){const Q=J.x-u.x;J=J.y-u.y;C=Math.min(1,Math.max(0,((C.x-u.x)*Q+(C.y-u.y)*J)/(Q*Q+J*J)));O.x=u.x+Q*C;O.y=u.y+J*C}function e(O,C){return O?C?4:3:C?3:2}let n=function(){function O(u,J,Q){this.items=u;this.query=J;this.geometryType=Q.geometryType;this.hasM=Q.hasM;this.hasZ=Q.hasZ;this.fieldsIndex=Q.fieldsIndex;this.objectIdField=Q.objectIdField;this.spatialReference=Q.spatialReference;this.featureAdapter=Q.featureAdapter}var C=O.prototype;C.createQueryResponseForCount=
function(){const u=new L(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return u.countDistinctValues(this.items);const {groupByFieldsForStatistics:J,having:Q,outStatistics:D}=this.query;if(!J?.length)return 1;const w=new Map,y=new Map,x=new Set;for(const U of D){var {statisticType:B}=U;B="exceedslimit"!==B?U.onStatisticField:void 0;if(!y.has(B)){var E=[];for(const Y of J){const M=this._getAttributeValues(u,Y,w);E.push(M)}y.set(B,this._calculateUniqueValues(E,u.returnDistinctValues))}B=
y.get(B);for(const Y in B){const {data:M,items:P}=B[Y];E=M.join(",");Q&&!u.validateItems(P,Q)||x.add(E)}}return x.size};C.createQueryResponse=async function(){let u;u=this.query.outStatistics?this.query.outStatistics.some(J=>"exceedslimit"===J.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const J=this.query.geometry;T.isValid(this.query.outSR)&&!T.equals(J.spatialReference,
this.query.outSR)?u.queryGeometry=k.cleanFromGeometryEngine({spatialReference:this.query.outSR,...h.project(J,J.spatialReference,this.query.outSR)}):u.queryGeometry=k.cleanFromGeometryEngine({spatialReference:this.query.outSR,...J})}return u};C.createSnappingResponse=function(u,J){const Q=this.featureAdapter,D=e(this.hasZ,this.hasM),{point:w,mode:y}=u,x="number"===typeof u.distance?u.distance:u.distance.x,B="number"===typeof u.distance?u.distance:u.distance.y,E={candidates:[]},U="esriGeometryPolygon"===
this.geometryType;J=this._getPointCreator(y,this.spatialReference,J);const Y=new z(null,0),M=new z(null,0),P={x:0,y:0,z:0};for(const Ca of this.items){var r=Q.getGeometry(Ca);if(null==r)continue;const {coords:Ga,lengths:Ha}=r;Y.coords=Ga;M.coords=Ga;if(u.returnEdge){r=0;for(var v=0;v<Ha.length;v++){var Z=Ha[v];for(var ja=0;ja<Z;ja++,r+=D){var ta=Y;ta.coordsIndex=r;if(ja!==Z-1){const Fa=M;Fa.coordsIndex=r+D;const Oa=P;K(P,w,ta,Fa);var xa=(w.x-Oa.x)/x;const Sa=(w.y-Oa.y)/B;xa=xa*xa+Sa*Sa;1>=xa&&E.candidates.push(m.makeEdgeCandidate(Q.getObjectId(Ca),
J(Oa),Math.sqrt(xa),J(ta),J(Fa)))}}}}if(u.returnVertex)for(r=U?Ga.length-D:Ga.length,v=0;v<r;v+=D)Z=Y,Z.coordsIndex=v,ja=(w.x-Z.x)/x,ta=(w.y-Z.y)/B,ja=ja*ja+ta*ta,1>=ja&&E.candidates.push(m.makeVertexCandidate(Q.getObjectId(Ca),J(Z),Math.sqrt(ja)))}E.candidates.sort((Ca,Ga)=>Ca.distance-Ga.distance);return E};C._getPointCreator=function(u,J,Q){const D=null==Q||T.equals(J,Q)?y=>y:y=>h.project(y,J,Q),{hasZ:w}=this;return"3d"===u?w?({x:y,y:x,z:B})=>D({x:y,y:x,z:B}):({x:y,y:x})=>D({x:y,y:x,z:0}):({x:y,
y:x})=>D({x:y,y:x})};C.createSummaryStatisticsResponse=async function(u){const {field:J,valueExpression:Q,normalizationField:D,normalizationType:w,normalizationTotal:y,minValue:x,maxValue:B,scale:E}=u;u=this.fieldsIndex.isDateField(J);var U=await this._getDataValues({field:J,valueExpression:Q,normalizationField:D,normalizationType:w,normalizationTotal:y,scale:E});const Y=A.isNullCountSupported({normalizationType:w,normalizationField:D,minValue:x,maxValue:B}),M=this.fieldsIndex.get(J),P={value:.5,
fieldType:M?.type};U=H.isStringField(M)?A.calculateStringStatistics({values:U,supportsNullCount:Y,percentileParams:P}):A.calculateStatistics({values:U,minValue:x,maxValue:B,useSampleStdDev:!w,supportsNullCount:Y,percentileParams:P});return A.processSummaryStatisticsResult(U,u)};C.createUniqueValuesResponse=async function(u){const {field:J,valueExpression:Q,domains:D,returnAllCodedValues:w,scale:y}=u;var x=await this._getDataValues({field:J,field2:u.field2,field3:u.field3,fieldDelimiter:u.fieldDelimiter,
valueExpression:Q,scale:y});x=A.calculateUniqueValuesCount(x);return A.createUVResult(x,D,w,u.fieldDelimiter)};C.createClassBreaksResponse=async function(u){const {field:J,valueExpression:Q,normalizationField:D,normalizationType:w,normalizationTotal:y,classificationMethod:x,standardDeviationInterval:B,minValue:E,maxValue:U,numClasses:Y,scale:M}=u;u=await this._getDataValues({field:J,valueExpression:Q,normalizationField:D,normalizationType:w,normalizationTotal:y,scale:M});u=A.calculateClassBreaks(u,
{field:J,normalizationField:D,normalizationType:w,normalizationTotal:y,classificationMethod:x,standardDeviationInterval:B,minValue:E,maxValue:U,numClasses:Y});return A.resolveCBResult(u,x)};C.createHistogramResponse=async function(u){const {field:J,valueExpression:Q,normalizationField:D,normalizationType:w,normalizationTotal:y,classificationMethod:x,standardDeviationInterval:B,minValue:E,maxValue:U,numBins:Y,scale:M}=u;u=await this._getDataValues({field:J,valueExpression:Q,normalizationField:D,normalizationType:w,
normalizationTotal:y,scale:M});return A.calculateHistogram(u,{field:J,normalizationField:D,normalizationType:w,normalizationTotal:y,classificationMethod:x,standardDeviationInterval:B,minValue:E,maxValue:U,numBins:Y})};C._sortFeatures=function(u,J,Q){if(1<u.length&&J&&J.length)for(const D of J.reverse()){J=D.split(" ");const w=J[0],y=this.fieldsIndex.get(w);J=J[1]?"desc"===J[1].toLowerCase():!1;const x=A.getAttributeComparator(y?.type,J);u.sort((B,E)=>{B=Q(B,w,y);E=Q(E,w,y);return x(B,E)})}};C._createFeatureQueryResponse=
function(u){const J=this.items,{geometryType:Q,hasM:D,hasZ:w,objectIdField:y,spatialReference:x}=this,{outFields:B,outSR:E,quantizationParameters:U,resultRecordCount:Y,resultOffset:M,returnZ:P,returnM:r}=u,v=null!=Y?J.length>(M||0)+Y:!1,Z=B&&(B.includes("*")?[...this.fieldsIndex.fields]:B.map(ja=>this.fieldsIndex.get(ja)));return{exceededTransferLimit:v,features:this._createFeatures(u,J),fields:Z,geometryType:Q,hasM:D&&r,hasZ:w&&P,objectIdFieldName:y,spatialReference:k.cleanFromGeometryEngine(E||
x),transform:U&&ha.toQuantizationTransform(U)||null}};C._createFeatures=function(u,J){const Q=new L(u,this.featureAdapter,this.fieldsIndex),{hasM:D,hasZ:w}=this,{orderByFields:y,quantizationParameters:x,returnGeometry:B,returnCentroid:E,maxAllowableOffset:U,resultOffset:Y,resultRecordCount:M,returnZ:P=!1,returnM:r=!1}=u,v=w&&P,Z=D&&r;u=[];var ja=0;J=[...J];this._sortFeatures(J,y,(Ca,Ga,Ha)=>Q.getFieldValue(Ca,Ga,Ha));if(B||E){var ta=ha.toQuantizationTransform(x)??void 0;if(B&&!E)for(var xa of J)u[ja++]=
{attributes:Q.getAttributes(xa),geometry:k.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(xa),U,ta,v,Z)};else if(!B&&E)for(const Ca of J)u[ja++]={attributes:Q.getAttributes(Ca),centroid:k.transformCentroid(this,this.featureAdapter.getCentroid(Ca,this),ta)};else for(const Ca of J)u[ja++]={attributes:Q.getAttributes(Ca),centroid:k.transformCentroid(this,this.featureAdapter.getCentroid(Ca,this),ta),geometry:k.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ca),
U,ta,v,Z)}}else for(ta of J)(xa=Q.getAttributes(ta))&&(u[ja++]={attributes:xa});ja=Y||0;null!=M&&(u=u.slice(ja,Math.min(u.length,ja+M)));return u};C._createExceedsLimitQueryResponse=function(u){var J=!1;let Q=Number.POSITIVE_INFINITY,D=Number.POSITIVE_INFINITY;J=Number.POSITIVE_INFINITY;for(const w of u.outStatistics??[])if("exceedslimit"===w.statisticType){Q=null!=w.maxPointCount?w.maxPointCount:Number.POSITIVE_INFINITY;D=null!=w.maxRecordCount?w.maxRecordCount:Number.POSITIVE_INFINITY;J=null!=w.maxVertexCount?
w.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)J=this.items.length>Q;else if(this.items.length>D)J=!0;else{u=e(this.hasZ,this.hasM);const w=this.featureAdapter;J=this.items.reduce((y,x)=>{x=w.getGeometry(x);return y+(null!=x&&x.coords.length||0)},0)/u>J}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(J)}}]}};C._createStatisticsQueryResponse=
async function(u){var J={attributes:{}};const Q=[],D=new Map,w=new Map,y=new Map,x=new Map,B=new L(u,this.featureAdapter,this.fieldsIndex);var E=u.outStatistics;const {groupByFieldsForStatistics:U,having:Y,orderByFields:M}=u;u=U&&U.length;const P=!!u,r=P?U[0]:null,v=P&&!this.fieldsIndex.get(r);for(const Ca of E??[]){const {outStatisticFieldName:Ga,statisticType:Ha}=Ca;E=Ca;var Z="exceedslimit"!==Ha?Ca.onStatisticField:void 0;const Fa="percentile_disc"===Ha||"percentile_cont"===Ha,Oa="EnvelopeAggregate"===
Ha||"CentroidAggregate"===Ha||"ConvexHullAggregate"===Ha,Sa=P&&1===u&&(Z===r||v)&&"count"===Ha;if(P){if(!y.has(Z)){var ja=[];for(const Va of U){var ta=this._getAttributeValues(B,Va,D);ja.push(ta)}y.set(Z,this._calculateUniqueValues(ja,Oa?!1:B.returnDistinctValues))}ja=y.get(Z);for(const Va in ja){const {count:eb,data:kb,items:lb,itemPositions:db}=ja[Va];ta=kb.join(",");if(!Y||B.validateItems(lb,Y)){const c=x.get(ta)||{attributes:{}};if(Oa){c.aggregateGeometries||(c.aggregateGeometries={});const {aggregateGeometries:ea,
outStatisticFieldName:F}=await this._getAggregateGeometry(E,lb);c.aggregateGeometries[F]=ea}else{var xa=null;if(Sa)xa=eb;else{const ea=this._getAttributeValues(B,Z,D);xa=db.map(F=>ea[F]);xa=Fa&&"statisticParameters"in E?this._getPercentileValue(E,xa):this._getStatisticValue(E,xa,null,B.returnDistinctValues)}c.attributes[Ga]=xa}let q=0;U.forEach((ea,F)=>c.attributes[this.fieldsIndex.get(ea)?ea:`EXPR_${++q}`]=kb[F]);x.set(ta,c)}}}else if(Oa){J.aggregateGeometries||(J.aggregateGeometries={});const {aggregateGeometries:Va,
outStatisticFieldName:eb}=await this._getAggregateGeometry(E,this.items);J.aggregateGeometries[eb]=Va}else Z=this._getAttributeValues(B,Z,D),J.attributes[Ga]=Fa&&"statisticParameters"in E?this._getPercentileValue(E,Z):this._getStatisticValue(E,Z,w,B.returnDistinctValues);Q.push({name:Ga,alias:Ga,type:"esriFieldTypeDouble"})}J=P?Array.from(x.values()):[J];this._sortFeatures(J,M,(Ca,Ga)=>Ca.attributes[Ga]);return{fields:Q,features:J}};C._getAggregateGeometry=async function(u,J){const {convexHull:Q,
union:D}=await new Promise((P,r)=>l(["../../../geometry/geometryEngineJSON"],P,r)),{statisticType:w,outStatisticFieldName:y}=u,{featureAdapter:x,spatialReference:B,geometryType:E,hasZ:U,hasM:Y}=this;J=J.map(P=>k.getGeometry(E,U,Y,x.getGeometry(P)));const M=Q(B,J,!0)[0];u={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===w?(J=M?R.getPolygonExtent(M):R.getGeometryExtent(D(B,J)),u.aggregateGeometries={...J,spatialReference:B},u.outStatisticFieldName=y||"extent"):"CentroidAggregate"===
w?(J=M?ca.polygonCentroid(M):ca.extentCentroid(R.getGeometryExtent(D(B,J))),u.aggregateGeometries={x:J[0],y:J[1],spatialReference:B},u.outStatisticFieldName=y||"centroid"):"ConvexHullAggregate"===w&&(u.aggregateGeometries=M,u.outStatisticFieldName=y||"convexHull");return u};C._getStatisticValue=function(u,J,Q,D){const {onStatisticField:w,statisticType:y}=u;u=null;u=Q?.has(w)?Q.get(w):H.isStringField(this.fieldsIndex.get(w))?A.calculateStringStatistics({values:J,returnDistinct:D}):A.calculateStatistics({values:D?
[...(new Set(J))]:J,minValue:null,maxValue:null,useSampleStdDev:!0});Q&&Q.set(w,u);return u["var"===y?"variance":y]};C._getPercentileValue=function(u,J){const {onStatisticField:Q,statisticParameters:D,statisticType:w}=u,{value:y,orderBy:x}=D;u=this.fieldsIndex.get(Q);return A.calculatePercentile(J,{value:y,orderBy:x,fieldType:u?.type,isDiscrete:"percentile_disc"===w})};C._getAttributeValues=function(u,J,Q){if(Q.has(J))return Q.get(J);const D=this.fieldsIndex.get(J),w=this.items.map(y=>u.getFieldValue(y,
J,D));Q.set(J,w);return w};C._calculateUniqueValues=function(u,J){const Q={},D=this.items,w=D.length;for(let y=0;y<w;y++){const x=D[y],B=[];for(const U of u)B.push(U[y]);const E=B.join(",");null==Q[E]?Q[E]={count:1,data:B,items:[x],itemPositions:[y]}:(J||Q[E].count++,Q[E].items.push(x),Q[E].itemPositions.push(y))}return Q};C._getDataValues=async function(u){const J=new L(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:Q,scale:D}=u,w=Q?{viewingMode:"map",scale:D,spatialReference:this.query.outSR||
this.spatialReference}:null;return Q?J.getExpressionValues(this.items,Q,w,{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM}):J.getDataValues(this.items,{field:u.field,field2:u.field2,field3:u.field3,fieldDelimiter:u.fieldDelimiter,normalizationField:u.normalizationField,normalizationType:u.normalizationType,normalizationTotal:u.normalizationTotal})};ka._createClass(O,[{key:"size",get:function(){return this.items.length}}]);return O}(),z=function(){function O(C,u){this.coords=C;this.coordsIndex=
u}ka._createClass(O,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return O}();f.QueryEngineResult=n;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(l,f){function ka({scale:x,translate:B},E){return Math.round((E-B[0])/x[0])}function ca({scale:x,
translate:B},E){return Math.round((B[1]-E)/x[1])}function R(x,B,E){const U=[];let Y,M,P,r;for(let v=0;v<E.length;v++){const Z=E[v];if(0<v){if(P=ka(x,Z[0]),r=ca(x,Z[1]),P!==Y||r!==M)U.push(B(Z,P-Y,r-M)),Y=P,M=r}else Y=ka(x,Z[0]),M=ca(x,Z[1]),U.push(B(Z,Y,M))}return 0<U.length?U:null}function ha(x,B,E,U){return R(x,E?U?y:w:U?w:D,B)}function T(x,B,E,U){const Y=[];E=E?U?y:w:U?w:D;for(U=0;U<B.length;U++){const M=R(x,E,B[U]);M&&3<=M.length&&Y.push(M)}return Y.length?Y:null}function L(x,B,E,U){const Y=[];
E=E?U?y:w:U?w:D;for(U=0;U<B.length;U++){const M=R(x,E,B[U]);M&&2<=M.length&&Y.push(M)}return Y.length?Y:null}function h({scale:x,translate:B},E){return E*x[0]+B[0]}function m({scale:x,translate:B},E){return B[1]-E*x[1]}function k(x,B,E){const U=Array(E.length);if(!E.length)return U;const [Y,M]=x.scale;let P=h(x,E[0][0]);x=m(x,E[0][1]);U[0]=B(E[0],P,x);for(let r=1;r<E.length;r++){const v=E[r];P+=v[0]*Y;x-=v[1]*M;U[r]=B(v,P,x)}return U}function H(x,B,E){const U=Array(E.length);for(let Y=0;Y<E.length;Y++)U[Y]=
k(x,B,E[Y]);return U}function A(x,B,E,U){return k(x,E?U?y:w:U?w:D,B)}function K(x,B,E,U){return H(x,E?U?y:w:U?w:D,B)}function e(x,B,E,U){return H(x,E?U?y:w:U?w:D,B)}function n(x,B,E){let [U,Y]=E[0],M=Math.min(U,B[0]),P=Math.min(Y,B[1]),r=Math.max(U,B[2]);B=Math.max(Y,B[3]);for(let v=1;v<E.length;v++){const [Z,ja]=E[v];U+=Z;Y+=ja;0>Z&&(M=Math.min(M,U));0<Z&&(r=Math.max(r,U));0>ja?P=Math.min(P,Y):0<ja&&(B=Math.max(B,Y))}x[0]=M;x[1]=P;x[2]=r;x[3]=B;return x}function z(x,B){if(!B.length)return null;x[0]=
x[1]=Number.POSITIVE_INFINITY;x[2]=x[3]=Number.NEGATIVE_INFINITY;for(let E=0;E<B.length;E++)n(x,x,B[E]);return x}function O(x,B,E,U,Y){B.xmin=ka(x,E.xmin);B.ymin=ca(x,E.ymin);B.xmax=ka(x,E.xmax);B.ymax=ca(x,E.ymax);B!==E&&(U&&(B.zmin=E.zmin,B.zmax=E.zmax),Y&&(B.mmin=E.mmin,B.mmax=E.mmax));return B}function C(x,B,E,U,Y){B.points=ha(x,E.points,U,Y)??[];return B}function u(x,B,E,U,Y){B.x=ka(x,E.x);B.y=ca(x,E.y);B!==E&&(U&&(B.z=E.z),Y&&(B.m=E.m));return B}function J(x,B,E,U,Y){x=T(x,E.rings,U,Y);if(!x)return null;
B.rings=x;return B}function Q(x,B,E,U,Y){x=L(x,E.paths,U,Y);if(!x)return null;B.paths=x;return B}const D=(x,B,E)=>[B,E],w=(x,B,E)=>[B,E,x[2]],y=(x,B,E)=>[B,E,x[2],x[3]];l.equals=function(x,B){if(x===B||null==x&&null==B)return!0;if(null==x||null==B)return!1;let E,U,Y,M;x&&"upperLeft"===x.originPosition?(E=x.translate[0],U=x.translate[1],x=x.scale[0]):(E=null!=x.extent?x.extent.xmin:0,U=null!=x.extent?x.extent.ymax:0,x=x.tolerance);B&&"upperLeft"===B.originPosition?(Y=B.translate[0],M=B.translate[1],
B=B.scale[0]):(Y=null!=B.extent?B.extent.xmin:0,M=null!=B.extent?B.extent.ymax:0,B=B.tolerance);return E===Y&&U===M&&x===B};l.getQuantizedBoundsCoordsArray=n;l.getQuantizedBoundsCoordsArrayArray=z;l.getQuantizedBoundsPaths=function(x){return z([0,0,0,0],x)};l.getQuantizedBoundsPoints=function(x){const B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return n(B,B,x)};l.getQuantizedBoundsRings=function(x){return z([0,0,0,0],x)};l.quantizeBounds=
function(x,B,E){B[0]=ka(x,E[0]);B[3]=ca(x,E[1]);B[2]=ka(x,E[2]);B[1]=ca(x,E[3]);return B};l.quantizeExtent=O;l.quantizeGeometry=function(x,B){return x&&B?f.isPoint(B)?u(x,{},B,!1,!1):f.isPolyline(B)?Q(x,{},B,!1,!1):f.isPolygon(B)?J(x,{},B,!1,!1):f.isMultipoint(B)?C(x,{},B,!1,!1):f.isExtent(B)?O(x,{},B,!1,!1):null:null};l.quantizeMultipoint=C;l.quantizePaths=L;l.quantizePoint=u;l.quantizePoints=ha;l.quantizePolygon=J;l.quantizePolyline=Q;l.quantizeRings=T;l.quantizeX=ka;l.quantizeY=ca;l.toQuantizationTransform=
function(x){return x?{originPosition:"upper-left"===x.originPosition?"upperLeft":"lower-left"===x.originPosition?"lowerLeft":x.originPosition,scale:x.tolerance?[x.tolerance,x.tolerance]:[1,1],translate:null!=x.extent?[x.extent.xmin,x.extent.ymax]:[0,0]}:null};l.unquantizeBounds=function(x,B,E){return E?(B[0]=h(x,E[0]),B[1]=m(x,E[3]),B[2]=h(x,E[2]),B[3]=m(x,E[1]),B):[h(x,B[0]),m(x,B[3]),h(x,B[2]),m(x,B[1])]};l.unquantizeCoordsArray=k;l.unquantizeCoordsArrayArray=H;l.unquantizeExtent=function(x,B,E,
U,Y){B.xmin=h(x,E.xmin);B.ymin=m(x,E.ymin);B.xmax=h(x,E.xmax);B.ymax=m(x,E.ymax);B!==E&&(U&&(B.zmin=E.zmin,B.zmax=E.zmax),Y&&(B.mmin=E.mmin,B.mmax=E.mmax));return B};l.unquantizeMultipoint=function(x,B,E,U,Y){null!=E&&(B.points=A(x,E.points,U,Y));return B};l.unquantizePaths=K;l.unquantizePoint=function(x,B,E,U,Y){if(null==E)return B;B.x=h(x,E.x);B.y=m(x,E.y);B!==E&&(U&&(B.z=E.z),Y&&(B.m=E.m));return B};l.unquantizePoints=A;l.unquantizePolygon=function(x,B,E,U,Y){null!=E&&(B.rings=e(x,E.rings,U,Y));
return B};l.unquantizePolyline=function(x,B,E,U,Y){null!=E&&(B.paths=K(x,E.paths,U,Y));return B};l.unquantizeRings=e;l.unquantizeX=h;l.unquantizeY=m;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers","./attributeSupport","./utils","../../../statistics/utils","../../../support/arcadeOnDemand"],function(l,f,ka,ca,R){return function(){function ha(L,h,m){this._fieldDataCache=new Map;
this._returnDistinctMap=new Map;this.returnDistinctValues=L.returnDistinctValues??!1;this.fieldsIndex=m;this.featureAdapter=h;if((h=L.outFields)&&!h.includes("*")){this.outFields=h;L=0;for(const H of h){var k=f.getExpressionFromFieldName(H);k=(h=this.fieldsIndex.get(k))?null:f.getWhereClause(k,m);h=h?h.name:f.getAliasFromFieldName(H)||`FIELD_EXP_${L++}`;this._fieldDataCache.set(H,{alias:h,clause:k})}}}var T=ha.prototype;T.countDistinctValues=function(L){if(!this.returnDistinctValues)return L.length;
L.forEach(h=>this.getAttributes(h));return this._returnDistinctMap.size};T.getAttributes=function(L){L=this._processAttributesForOutFields(L);return this._processAttributesForDistinctValues(L)};T.getFieldValue=function(L,h,m){const k=m?m.name:h;let H=null;this._fieldDataCache.has(k)?H=this._fieldDataCache.get(k)?.clause:m||(H=f.getWhereClause(h,this.fieldsIndex),this._fieldDataCache.set(k,{alias:k,clause:H}));return m?this.featureAdapter.getAttribute(L,k):H?.calculateValue(L,this.featureAdapter)};
T.getDataValues=function(L,h){const m=h.normalizationType,k=h.normalizationTotal;return L.map(H=>{let A=h.field&&this.getFieldValue(H,h.field,this.fieldsIndex.get(h.field));h.field2&&(A=`${ca.processNullValue(A)}${h.fieldDelimiter}${ca.processNullValue(this.getFieldValue(H,h.field2,this.fieldsIndex.get(h.field2)))}`,h.field3&&(A=`${A}${h.fieldDelimiter}${ca.processNullValue(this.getFieldValue(H,h.field3,this.fieldsIndex.get(h.field3)))}`));m&&Number.isFinite(A)&&(H="field"===m&&h.normalizationField?
this.getFieldValue(H,h.normalizationField,this.fieldsIndex.get(h.normalizationField)):null,A=ca.getNormalizedValue(A,m,H,k));return A})};T.getExpressionValues=async function(L,h,m,k){const {arcadeUtils:H}=await R.loadArcade(),A=H.hasGeometryOperations(h);A&&await H.enableGeometryOperations();const K=H.createFunction(h),e=m&&H.getViewInfo(m),n={fields:this.fieldsIndex.fields};return L.map(z=>{z={attributes:this.featureAdapter.getAttributes(z),layer:n,geometry:A?{...ka.getGeometry(k.geometryType,k.hasZ,
k.hasM,this.featureAdapter.getGeometry(z)),spatialReference:m?.spatialReference}:null};z=H.createExecContext(z,e);return H.executeFunction(K,z)})};T.validateItem=function(L,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:f.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testFeature(L,this.featureAdapter)??!1};T.validateItems=function(L,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:f.getWhereClause(h,this.fieldsIndex)});
return this._fieldDataCache.get(h)?.clause?.testSet(L,this.featureAdapter)??!1};T._processAttributesForOutFields=function(L){const h=this.outFields;if(!h||!h.length)return this.featureAdapter.getAttributes(L);const m={};for(const k of h){const {alias:H,clause:A}=this._fieldDataCache.get(k);m[H]=A?A.calculateValue(L,this.featureAdapter):this.featureAdapter.getAttribute(L,H)}return m};T._processAttributesForDistinctValues=function(L){if(null==L||!this.returnDistinctValues)return L;var h=this.outFields,
m=[];if(h)for(const H of h){var {alias:k}=this._fieldDataCache.get(H);m.push(L[k])}else for(k in L)m.push(L[k]);h=`${(h||["*"]).join(",")}=${m.join(",")}`;m=this._returnDistinctMap.get(h)||0;this._returnDistinctMap.set(h,++m);return 1<m?null:L};return l._createClass(ha)}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(l,f,ka){function ca(D){return null==D||"string"===typeof D&&!D?"\x3cNull\x3e":D}function R(D){const w=
null!=D.minValue||null!=D.maxValue,y=!!D.sqlExpression&&D.supportsSQLExpression;return!(null!=D.normalizationField||null!=D.normalizationType)&&!w&&!y}function ha(D){const {values:w,useSampleStdDev:y,supportsNullCount:x}=D;var B=Number.POSITIVE_INFINITY;let E=Number.NEGATIVE_INFINITY,U=null,Y=null;var M=null;let P=null,r=0;const v=null==D.minValue?-Infinity:D.minValue,Z=null==D.maxValue?Infinity:D.maxValue;for(const ja of w)Number.isFinite(ja)?ja>=v&&ja<=Z&&(U=null===U?ja:U+ja,B=Math.min(B,ja),E=
Math.max(E,ja),r++):"string"===typeof ja&&r++;if(r&&null!=U){Y=U/r;M=0;for(const ja of w)Number.isFinite(ja)&&ja>=v&&ja<=Z&&(M+=(ja-Y)**2);P=y?1<r?M/(r-1):0:0<r?M/r:0;M=Math.sqrt(P)}else E=B=null;B={avg:Y,count:r,max:E,min:B,stddev:M,sum:U,variance:P};x&&(B.nullcount=w.length-r);D.percentileParams&&(B.median=T(w,D.percentileParams));return B}function T(D,w){const {fieldType:y,value:x,orderBy:B,isDiscrete:E}=w,U=L(y,"desc"===B);D=[...D].filter(r=>null!=r).sort((r,v)=>U(r,v));if(0===D.length)return null;
if(0>=x)return D[0];if(1<=x)return D[D.length-1];var Y=(D.length-1)*x,M=Math.floor(Y);w=M+1;Y%=1;M=D[M];const P=D[w];return w>=D.length||E||"string"===typeof M||"string"===typeof P?M:M*(1-Y)+P*Y}function L(D,w){const y=w?1:-1,x=k(w),B=m(w);if(!D||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...J].includes(D))return(E,U)=>"number"===typeof E&&"number"===typeof U?x(E,U):"string"===typeof E&&"string"===typeof U?B(E,U):y;if("esriFieldTypeDate"===D)return(E,U)=>
{E=(new Date(E)).getTime();U=(new Date(U)).getTime();return isNaN(E)||isNaN(U)?y:x(E,U)};if(J.has(D))return(E,U)=>x(E,U);if("esriFieldTypeString"===D)return(E,U)=>B(E,U);if("esriFieldTypeGUID"===D||"esriFieldTypeGlobalID"===D){const E=m(w);return(U,Y)=>E(H(U),H(Y))}return w?(E,U)=>1:(E,U)=>-1}function h(D,w,y){if(y){if(null==D)return null==w?0:1;if(null==w)return-1}else{if(null==D)return null==w?0:-1;if(null==w)return 1}return null}function m(D){return D?(w,y)=>{const x=h(w,y,!0);if(null!=x)return x;
w=w.toUpperCase();y=y.toUpperCase();return w>y?-1:w<y?1:0}:(w,y)=>{const x=h(w,y,!1);if(null!=x)return x;w=w.toUpperCase();y=y.toUpperCase();return w<y?-1:w>y?1:0}}function k(D){return D?(w,y)=>{const x=h(w,y,!0);return null!=x?x:y-w}:(w,y)=>{const x=h(w,y,!1);return null!=x?x:w-y}}function H(D){return D.substr(24,12)+D.substr(19,4)+D.substr(16,2)+D.substr(14,2)+D.substr(11,2)+D.substr(9,2)+D.substr(6,2)+D.substr(4,2)+D.substr(2,2)+D.substr(0,2)}function A(D){return"coded-value"!==D?.type?[]:D.codedValues.map(w=>
w.code)}function K(D,w){const y=n({field:w.field,normalizationType:w.normalizationType,normalizationField:w.normalizationField,classificationMethod:w.classificationMethod,standardDeviationInterval:w.standardDeviationInterval,breakCount:w.numClasses||5});D=e(D,w.minValue,w.maxValue);return ka.createGenerateRendererClassBreaks({definition:y,values:D,normalizationTotal:w.normalizationTotal})}function e(D,w,y){const x=null==w?-Infinity:w,B=null==y?Infinity:y;return D.filter(E=>Number.isFinite(E)&&E>=
x&&E<=B)}function n(D){const {breakCount:w,field:y,normalizationField:x,normalizationType:B}=D,E=D.classificationMethod||"equal-interval";return new f({breakCount:w,classificationField:y,classificationMethod:E,normalizationField:"field"===B?x:void 0,normalizationType:B,standardDeviationInterval:"standard-deviation"===E?D.standardDeviationInterval||1:void 0})}function z(D,w){const {field:y,classificationMethod:x,standardDeviationInterval:B,normalizationType:E,normalizationField:U,normalizationTotal:Y,
minValue:M,maxValue:P}=w,r=w.numBins||10;let v=w=null,Z=null;x&&"equal-interval"!==x||E?({classBreaks:D}=K(D,{field:y,normalizationType:E,normalizationField:U,normalizationTotal:Y,classificationMethod:x,standardDeviationInterval:B,minValue:M,maxValue:P,numClasses:r}),w=D[0].minValue,v=D[D.length-1].maxValue,Z=D.map(ja=>[ja.minValue,ja.maxValue])):(null!=M&&null!=P?(w=M,v=P):(D=ha({values:D,minValue:M,maxValue:P,useSampleStdDev:!E,supportsNullCount:R({normalizationType:E,normalizationField:U,minValue:M,
maxValue:P})}),w=D.min??null,v=D.max??null),Z=C(w??0,v??0,r));return{min:w,max:v,intervals:Z}}function O(D,w){let y=-1;for(let x=D.length-1;0<=x;x--)if(w>=D[x][0]){y=x;break}return y}function C(D,w,y){const x=(w-D)/y,B=[];let E;for(let U=1;U<=y;U++)E=D+x,E=Number(E.toFixed(16)),B.push([D,U===y?w:E]),D=E;return B}const u=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,J=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),Q="min max avg stddev count sum variance nullcount median".split(" ");
l.calculateClassBreaks=K;l.calculateHistogram=function(D,w){var y=z(D,w);if(null==y.min&&null==y.max)return{bins:[],minValue:y.min,maxValue:y.max,normalizationTotal:w.normalizationTotal};const x=y.intervals,B=y.min??0;y=y.max??0;const E=x.map((U,Y)=>({minValue:x[Y][0],maxValue:x[Y][1],count:0}));for(const U of D)null!=U&&U>=B&&U<=y&&(D=O(x,U),-1<D&&E[D].count++);return{bins:E,minValue:B,maxValue:y,normalizationTotal:w.normalizationTotal}};l.calculatePercentile=T;l.calculateStatistics=ha;l.calculateStringStatistics=
function(D){const w=D.returnDistinct?[...(new Set(D.values))]:D.values;var y=w.filter(B=>null!=B).sort();const x=y.length;y={count:x,min:y[0],max:y[x-1]};D.supportsNullCount&&(y.nullcount=w.length-x);D.percentileParams&&(y.median=T(w,D.percentileParams));return y};l.calculateUniqueValuesCount=function(D){const w={};for(let y of D){if(null==y||"string"===typeof y&&""===y.trim())y=null;null==w[y]?w[y]={count:1,data:y}:w[y].count++}return{count:w}};l.createClassBreaksDefinition=n;l.createUVResult=function(D,
w,y,x){D=D.count;const B=[];if(y&&w){y=[];var E=A(w[0]);for(const U of E)if(w[1]){E=A(w[1]);for(const Y of E)if(w[2]){E=A(w[2]);for(const M of E)y.push(`${ca(U)}${x}${ca(Y)}${x}${ca(M)}`)}else y.push(`${ca(U)}${x}${ca(Y)}`)}else y.push(U);for(const U of y)D.hasOwnProperty(U)||(D[U]={data:U,count:0})}for(const U in D)w=D[U],B.push({value:w.data,count:w.count,label:w.label});return{uniqueValueInfos:B}};l.getAttributeComparator=L;l.getEqualIntervalBins=C;l.getNormalizedValue=function(D,w,y,x){let B=
null;switch(w){case "log":0!==D&&(B=Math.log(D)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(x)&&0!==x&&(B=D/x*100);break;case "field":Number.isFinite(y)&&0!==y&&(B=D/y);break;case "natural-log":0<D&&(B=Math.log(D));break;case "square-root":0<D&&(B=D**.5)}return B};l.isNullCountSupported=R;l.processNullValue=ca;l.processSummaryStatisticsResult=function(D,w){let y;for(y in D)Q.includes(y)&&(Number.isFinite(D[y])||(D[y]=null));if(!w)return D;["avg","stddev","variance"].forEach(x=>{null!=
D[x]&&(D[x]=Math.ceil(D[x]??0))});return D};l.resolveCBResult=function(D,w){let y=D.classBreaks;const x=y[0]?.minValue,B=y[y.length-1]?.maxValue,E="standard-deviation"===w;y=y.map(U=>{const Y=U.label;U={minValue:U.minValue,maxValue:U.maxValue,label:Y};if(E&&Y){const M=Y.match(u)?.map(P=>+P.trim())??[];2===M.length?(U.minStdDev=M[0],U.maxStdDev=M[1],0>M[0]&&0<M[1]&&(U.hasAvg=!0)):1===M.length&&(Y.includes("\x3c")?(U.minStdDev=null,U.maxStdDev=M[0]):Y.includes("\x3e")&&(U.minStdDev=M[0],U.maxStdDev=
null))}return U});return{minValue:x,maxValue:B,classBreakInfos:y,normalizationTotal:D.normalizationTotal}};l.statisticTypes=Q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,f,ka,ca,R,ha,T,L,h,m){ha=new ka.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ka=new ka.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});ca=function(k){function H(A){A=k.call(this,A)||this;A.type="class-breaks-definition";
A.breakCount=null;A.classificationField=null;A.classificationMethod=null;A.normalizationField=null;A.normalizationType=null;return A}l._inherits(H,k);l._createClass(H,[{key:"standardDeviationInterval",set:function(A){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",A)}},{key:"definedInterval",set:function(A){"defined-interval"===this.classificationMethod&&this._set("definedInterval",A)}}]);return H}(ca.JSONSupport);f.__decorate([h.enumeration({classBreaksDef:"class-breaks-definition"})],
ca.prototype,"type",void 0);f.__decorate([R.property({json:{write:!0}})],ca.prototype,"breakCount",void 0);f.__decorate([R.property({json:{write:!0}})],ca.prototype,"classificationField",void 0);f.__decorate([R.property({type:String,json:{read:ha.read,write:ha.write}})],ca.prototype,"classificationMethod",void 0);f.__decorate([R.property({json:{write:!0}})],ca.prototype,"normalizationField",void 0);f.__decorate([R.property({json:{read:ka.read,write:ka.write}})],ca.prototype,"normalizationType",void 0);
f.__decorate([R.property({value:null,json:{write:!0}})],ca.prototype,"standardDeviationInterval",null);f.__decorate([R.property({value:null,json:{write:!0}})],ca.prototype,"definedInterval",null);return ca=f.__decorate([m.subclass("esri.rest.support.ClassBreaksDefinition")],ca)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(l,f,ka){l.enumeration=function(ca,R={}){ca=ca instanceof f.JSONMap?ca:new f.JSONMap(ca,R);ca={type:R?.ignoreUnknown??
!0?ca.apiValues:String,json:{type:ca.jsonValues,read:R?.readOnly?!1:{reader:ca.read},write:{writer:ca.write}}};void 0!==R?.readOnly&&(ca.readOnly=!!R.readOnly);void 0!==R?.default&&(ca.json.default=R.default);void 0!==R?.name&&(ca.json.name=R.name);void 0!==R?.nonNullable&&(ca.nonNullable=R.nonNullable);return ka.property(ca)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(l,f){function ka(A){var K=
A.definition;const {classificationMethod:e,normalizationType:n,definedInterval:z}=K;K=K.breakCount??1;const O=[];var C=A.values;if(0===C.length)return[];C=C.sort((y,x)=>y-x);var u=C[0],J=C[C.length-1];if("equal-interval"===e)if(C.length>=K){C=(J-u)/K;A=u;for(var Q=1;Q<K;Q++){var D=Number((u+Q*C).toFixed(6));O.push({minValue:A,maxValue:D,label:ca(A,D,n)});A=D}O.push({minValue:A,maxValue:J,label:ca(A,J,n)})}else C.forEach(y=>{O.push({minValue:y,maxValue:y,label:ca(y,y,n)})});else if("natural-breaks"===
e){C=R(C);A=ha(C.uniqueValues,A.valueFrequency||C.valueFrequency,K);for(Q=1;Q<K;Q++)C.uniqueValues.length>Q&&(D=Number(C.uniqueValues[A[Q]].toFixed(6)),O.push({minValue:u,maxValue:D,label:ca(u,D,n)}),u=D);O.push({minValue:u,maxValue:J,label:ca(u,J,n)})}else if("quantile"===e)if(C.length>=K&&u!==J){A=Math.ceil(C.length/K);Q=0;for(D=1;D<K;D++){var w=A+Q-1;w>C.length&&(w=C.length-1);0>w&&(w=0);O.push({minValue:u,maxValue:C[w],label:ca(u,C[w],n)});u=C[w];Q+=A;A=Math.ceil((C.length-Q)/(K-D))}O.push({minValue:u,
maxValue:J,label:ca(u,J,n)})}else for(K=-1,J=0;J<C.length;J++)u=C[J],u!==K&&(K=u,O.push({minValue:K,maxValue:u,label:ca(K,u,n)}),K=u);else if("standard-deviation"===e)if(A=h(C),Q=m(C,A),0===Q)O.push({minValue:C[0],maxValue:C[0],label:ca(C[0],C[0],n)});else{C=L(u,J,K,A,Q)*Q;Q=0;for(D=K;1<=D;D--)w=Number((A-(D-.5)*C).toFixed(6)),O.push({minValue:u,maxValue:w,label:ca(u,w,n)}),u=w,Q++;D=Number((A+.5*C).toFixed(6));O.push({minValue:u,maxValue:D,label:ca(u,D,n)});u=D;Q++;for(w=1;w<=K;w++)D=Q===2*K?J:Number((A+
(w+.5)*C).toFixed(6)),O.push({minValue:u,maxValue:D,label:ca(u,D,n)}),u=D,Q++}else if("defined-interval"===e){if(!z)return O;K=C[0];J=C[C.length-1];C=Math.ceil((J-K)/z);u=K;for(A=1;A<C;A++)Q=Number((K+A*z).toFixed(6)),O.push({minValue:u,maxValue:Q,label:ca(u,Q,n)}),u=Q;O.push({minValue:u,maxValue:J,label:ca(u,J,n)})}return O}function ca(A,K,e){let n=null;return n=A===K?e&&"percent-of-total"===e?A+"%":A.toString():e&&"percent-of-total"===e?A+"% - "+K+"%":A+" - "+K}function R(A){const K=[],e=[];let n=
Number.MIN_VALUE,z=1,O=-1;for(let C=0;C<A.length;C++){const u=A[C];u===n?(z++,e[O]=z):null!==u&&(K.push(u),n=u,z=1,e.push(z),O++)}return{uniqueValues:K,valueFrequency:e}}function ha(A,K,e){var n=A.length;const z=[];e>n&&(e=n);for(var O=0;O<e;O++)z.push(Math.round(O*n/e-1));z.push(n-1);O=T(z,A,K,e);n=O.mean;O=O.sdcm;var C=e,u=0,J=0;let Q=0,D=0,w=!0;for(let x=0;2>x&&w;x++){0===x&&(w=!1);for(var y=0;y<C-1;y++)for(;z[y+1]+1!==z[y+2];)if(z[y+1]+=1,u=k(y,z,A,K),Q=u.sbMean,u=u.sbSdcm,J=k(y+1,z,A,K),D=J.sbMean,
J=J.sbSdcm,u+J<O[y]+O[y+1])O[y]=u,O[y+1]=J,n[y]=Q,n[y+1]=D,w=!0;else{--z[y+1];break}for(y=C-1;0<y;y--)for(;z[y]!==z[y-1]+1;)if(--z[y],u=k(y-1,z,A,K),Q=u.sbMean,u=u.sbSdcm,J=k(y,z,A,K),D=J.sbMean,J=J.sbSdcm,u+J<O[y-1]+O[y])O[y-1]=u,O[y]=J,n[y-1]=Q,n[y]=D,w=!0;else{z[y]+=1;break}}w&&(O=T(z,A,K,e));return z}function T(A,K,e,n){let z=[];var O=[],C=[];let u=0;const J=[],Q=[];for(var D=0;D<n;D++){var w=k(D,A,K,e);J.push(w.sbMean);Q.push(w.sbSdcm);u+=Q[D]}w=u;for(D=!0;D||u<w;){D=!1;z=[];for(O=0;O<n;O++)z.push(A[O]);
for(C=0;C<n;C++)for(w=A[C]+1;w<=A[C+1];w++)if(O=K[w],0<C&&w!==A[C+1]&&Math.abs(O-J[C])>Math.abs(O-J[C-1]))A[C]=w;else if(C<n-1&&A[C]!==w-1&&Math.abs(O-J[C])>Math.abs(O-J[C+1])){A[C+1]=w-1;break}w=u;u=0;O=[];C=[];for(let y=0;y<n;y++){O.push(J[y]);C.push(Q[y]);const x=k(y,A,K,e);J[y]=x.sbMean;Q[y]=x.sbSdcm;u+=Q[y]}}if(u>w){for(K=0;K<n;K++)A[K]=z[K],J[K]=O[K],Q[K]=C[K];u=w}return{mean:J,sdcm:Q}}function L(A,K,e,n,z){A=Math.max(n-A,K-n)/z/e;return 1<=A?1:.5<=A?.5:.25}function h(A){let K=0;for(let e=0;e<
A.length;e++)K+=A[e];return K/=A.length}function m(A,K){let e=0;for(let n=0;n<A.length;n++){const z=A[n];e+=(z-K)*(z-K)}e/=A.length;return Math.sqrt(e)}function k(A,K,e,n){var z=0,O=0;for(var C=K[A]+1;C<=K[A+1];C++){const u=n[C];z+=e[C]*u;O+=u}0>=O&&H.warn("Exception in Natural Breaks calculation");z/=O;O=0;for(C=K[A]+1;C<=K[A+1];C++)O+=n[C]*(e[C]-z)**2;return{sbMean:z,sbSdcm:O}}const H=f.getLogger("esri.rest.support.generateRendererUtils");l.createGenerateRendererClassBreaks=function(A){const {normalizationTotal:K}=
A;return{classBreaks:ka(A),normalizationTotal:K}};l.createGenerateRendererUniqueValues=function(A){A=R(A);const K=[],e=A.uniqueValues.length;for(let n=0;n<e;n++){const z=A.uniqueValues[n];K.push({value:z,count:A.valueFrequency[n],label:z.toString()})}return{uniqueValues:K}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../geometry/SpatialReference".split(" "),
function(l,f,ka,ca,R,ha,T){function L(){m||(m=(async()=>{const H=await new Promise((A,K)=>l(["./arcadeUtils"],A,K));return{arcade:H.arcade,arcadeUtils:H,Dictionary:H.Dictionary,Feature:H.arcadeFeature}})());return m}const h=ha.getLogger("esri.support.arcadeOnDemand");let m;ca=(H,A,K)=>k.create(H,A,K,null,["$feature","$view"],[]);let k=function(){function H(K,e,n,z,O,C,u){this.services=null;this.script=K;this.evaluate=z;this.fields=Array.isArray(C)?C:C.fields;this._syntaxTree=n;this._arcade=e;this._arcadeFeature=
O;this._spatialReference=u;this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}H.create=async function(K,e,n,z,O,C){const {arcade:u,Feature:J,Dictionary:Q}=await L(),D=T.fromJSON(e);let w;try{w=u.parseScript(K,C)}catch(Y){return h.error(new R("arcade-bad-expression","Failed to parse arcade script",{script:K,error:Y})),null}O=O.reduce((Y,M)=>({...Y,[M]:null}),{});let y=null;null!=z&&(y=new Q(z),y.immutable=
!0,O.$config=null);C=(z=u.scriptUsesGeometryEngine(w))&&u.enableGeometrySupport();const x=u.scriptUsesFeatureSet(w)&&u.enableFeatureSetSupport(),B=(e=u.scriptIsAsync(w))&&u.enableAsyncSupport();O={vars:O,spatialReference:D,useAsync:!!B};await Promise.all([C,x,B]);C=new Set;await u.loadDependentModules(C,w,null,e,z);const E=new Q;E.immutable=!1;E.setField("scale",0);const U=u.compileScript(w,O);return new H(K,u,w,(Y,M)=>{"$view"in Y&&Y.$view&&(E.setField("scale","object"===typeof Y.$view&&"scale"in
Y.$view?Y.$view.scale:void 0),Y.$view=E);y&&(Y.$config=y);return U({vars:Y,spatialReference:D,services:M})},new J,n,D)};var A=H.prototype;A.repurposeFeature=function(K){K.geometry&&!K.geometry.spatialReference&&(K.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(K.geometry,K.attributes,{fields:this.fields});return this._arcadeFeature};A.referencesGeometry=function(){return this._referencesGeometry};A.referencesScale=function(){return this._referencesScale};
return ka._createClass(H)}();f.ArcadeExpression=k;f.createDictionaryExpression=(H,A,K,e)=>k.create(H,A,K,e,["$feature","$view"],[]);f.createLabelExpression=(H,A,K)=>k.create(H,A,K,null,["$feature"],[]);f.createRendererExpression=ca;f.createVVExpression=ca;f.loadArcade=L;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(l){l.makeEdgeCandidate=function(f,ka,ca,R,ha,T=!1){return{objectId:f,target:ka,distance:ca,
type:"edge",start:R,end:ha,draped:T}};l.makeVertexCandidate=function(f,ka,ca){return{objectId:f,target:ka,distance:ca,type:"vertex"}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(l,f,ka,ca,R,ha){function T(F,ba,p){if(F)for(const I of F)(F=(F=ca.getDeepValue(I,ba))&&"function"!==typeof F&&p.get(F))&&ca.setDeepValue(I,
F.name,ba)}function L(F,ba){if(!F||!ba)return[];Ca.clear();h(Ca,F,ba);return Array.from(Ca).sort()}function h(F,ba,p){if(p)if(ba?.fields?.length)if(p.includes("*"))for(const {name:I}of ba.fields)F.add(I);else for(const I of p)m(F,ba,I);else if(p.includes("*"))F.clear(),F.add("*");else for(const I of p)null!=I&&F.add(I)}function m(F,ba,p){"string"===typeof p&&(ba?(ba=ba.get(p))&&F.add(ba.name):F.add(p))}async function k(F,ba,p){if(p){var {arcadeUtils:I}=await ha.loadArcade();p=I.extractFieldNames(p,
ba?.fields?.map(V=>V.name));for(const V of p)m(F,ba,V)}}async function H(F,ba,p){if(p&&"1\x3d1"!==p){var {WhereClause:I}=await new Promise((V,W)=>l(["../../core/sql/WhereClause"],V,W));I=I.create(p,ba);if(!I.isStandardized)throw new ka("fieldUtils:collectFilterFields","Where clause is not standardized",{where:p});h(F,ba,I.fieldNames)}}function A(F,ba){for(const p of F)if(p&&p.valueType&&p.valueType===ba)return p.name;return null}async function K(F,ba){if(ba){var p=ba.elevationInfo?.featureExpressionInfo;
if(p)return p.collectRequiredFields(F,ba.fieldsIndex)}}async function e(F,ba,p){const I=[];p?.expressionInfos&&I.push(...p.expressionInfos.map(V=>k(F,ba.fieldsIndex,V.expression)));p=p?.content;if(Array.isArray(p))for(const V of p)"expression"===V.type&&V.expressionInfo&&I.push(k(F,ba.fieldsIndex,V.expressionInfo.expression));await Promise.all(I)}async function n(F,ba,p){ba&&p&&(p.valueExpression?await k(F,ba.fieldsIndex,p.valueExpression):p.field&&m(F,ba.fieldsIndex,p.field))}function z(F){if(!F)return[];
const ba=F.geometryFieldsInfo;return ba?L(F.fieldsIndex,[ba.shapeAreaField,ba.shapeLengthField]):[]}function O(F){const ba=new Set;u(F).forEach(p=>ba.add(p));z(F).forEach(p=>ba.add(p.toLowerCase()));if(F=F&&"infoFor3D"in F?F.infoFor3D:void 0)Object.values(F.assetMapFieldRoles).forEach(p=>ba.add(p.toLowerCase())),Object.values(F.transformFieldRoles).forEach(p=>ba.add(p.toLowerCase()));return Array.from(ba)}function C(F){if(!F)return[];F="editFieldsInfo"in F&&F.editFieldsInfo;if(!F)return[];const {creationDateField:ba,
creatorField:p,editDateField:I,editorField:V}=F;return[ba,p,I,V].filter(Boolean)}function u(F){return C(F).map(ba=>ba.toLowerCase())}async function J(F,ba){const {labelingInfo:p,fieldsIndex:I}=ba;p&&p.length&&await Promise.all(p.map(V=>Q(F,I,V)))}async function Q(F,ba,p){if(p){var I=p.getLabelExpression();p=p.where;"arcade"===I.type?await k(F,ba,I.expression):(I=I.expression.match(/{[^}]*}/g))&&I.forEach(V=>{m(F,ba,V.slice(1,-1))});await H(F,ba,p)}}function D(F){return"number"===typeof F&&!isNaN(F)&&
isFinite(F)}function w(F){return null===F||D(F)}function y(F){return null===F||Oa(F)}function x(F){return null!=F&&"string"===typeof F}function B(F){return null===F||x(F)}function E(){return!0}function U(F,ba){let p;switch(F.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":p=F.nullable?y:Oa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":p=
F.nullable?w:D;break;case "string":case "esriFieldTypeString":p=F.nullable?B:x;break;default:p=E}return 1===arguments.length?p:p(ba)}function Y(F){return null!=F&&Va.has(F.type)}function M(F,ba){return null==F||F.nullable&&null===ba?null:Y(F)&&!P(F.type,Number(ba))?f.NumericRangeValidationError.OUT_OF_RANGE:U(F,ba)?F.domain?R.validateDomainValue(F.domain,ba):null:f.TypeValidationError.INVALID_TYPE}function P(F,ba){F="string"===typeof F?r(F):F;if(!F)return!1;const p=F.min,I=F.max;return F.isInteger?
Oa(ba)&&ba>=p&&ba<=I:ba>=p&&ba<=I}function r(F){switch(F){case "esriFieldTypeSmallInteger":case "small-integer":return lb;case "esriFieldTypeInteger":case "integer":return db;case "esriFieldTypeBigInteger":case "big-integer":return c;case "esriFieldTypeSingle":case "single":return q;case "esriFieldTypeDouble":case "double":return ea}}function v(F,ba,p){if(!ba||!ba.attributes||!F){if(null!=p)for(var I of F??[])p.add(I);return!0}ba=ba.attributes;I=!1;for(const V of F)if(!(V in ba))if(I=!0,null!=p)p.add(V);
else break;return I}const Z=/^([0-9_])/,ja=/[^a-z0-9_\u0080-\uffff]+/gi,ta="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),xa=["field","normalizationField"],Ca=new Set,Ga=["oid","global-id","guid"],Ha=["oid","global-id"],Fa=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,
/objectid/i,/_i$/i],Oa=(()=>"isInteger"in Number?Number.isInteger:F=>"number"===typeof F&&isFinite(F)&&Math.floor(F)===F)(),Sa=["integer","small-integer","single","double"],Va=new Set([...Sa,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),eb=["date","date-only","time-only","timestamp-offset"],kb=new Set([...eb,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);f.NumericRangeValidationError=void 0;(f.NumericRangeValidationError||
(f.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";f.TypeValidationError=void 0;(f.TypeValidationError||(f.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const lb={min:-32768,max:32767,isInteger:!0},db={min:-2147483648,max:2147483647,isInteger:!0},c={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},q={min:-3.4E38,max:1.2E38,isInteger:!1},ea={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};f.bigIntegerRange=
c;f.collectArcadeFieldNames=k;f.collectElevationFields=K;f.collectFeatureReductionFields=async function(F,ba,p){if(ba&&p&&"fields"in p){var I=[];I.push(e(F,ba,p.popupTemplate));p.fields&&I.push(...p.fields.map(async V=>{V.onStatisticExpression?k(F,ba.fieldsIndex,V.onStatisticExpression.expression):F.add(V.onStatisticField)}));await Promise.all(I)}};f.collectField=m;f.collectFields=h;f.collectFilterFields=async function(F,ba,p){ba&&(ba.timeInfo&&null!=p&&p.timeExtent&&h(F,ba.fieldsIndex,[ba.timeInfo.startField,
ba.timeInfo.endField]),ba.floorInfo&&h(F,ba.fieldsIndex,[ba.floorInfo.floorField]),null!=p&&null!=p.where&&await H(F,ba.fieldsIndex,p.where))};f.collectLabelingFields=J;f.collectOrderByInfos=async function(F,ba,p){ba&&p&&await Promise.all(p.map(I=>n(F,ba,I)))};f.collectPopupTemplateFields=e;f.dateTypes=eb;f.doubleRange=ea;f.featureHasFields=function(F,ba){return!v(F,ba,null)};f.fixFields=L;f.fixRendererFields=function(F,ba){if(null!=F&&null!=ba)for(const p of Array.isArray(F)?F:[F])if(T(ta,p,ba),
"visualVariables"in p&&p.visualVariables)for(const I of p.visualVariables)T(xa,I,ba)};f.fixTimeInfoFields=function(F,ba){if(null!=F&&ba?.fields?.length)if("startField"in F){var p=ba.get(F.startField);ba=ba.get(F.endField);F.startField=p?.name??null;F.endField=ba?.name??null}else p=ba.get(F.startTimeField),ba=ba.get(F.endTimeField),F.startTimeField=p?.name??null,F.endTimeField=ba?.name??null};f.getDisplayFieldName=function({displayField:F,fields:ba}){if(F)return F;if(!ba||!ba.length)return null;if(!(F=
A(ba,"name-or-title")||A(ba,"unique-identifier")||A(ba,"type-or-category")))a:{for(const p of ba)if(p&&p.name&&(ba=p.name.toLowerCase(),ba.includes("name")||ba.includes("title"))){F=p.name;break a}F=null}return F};f.getEditTrackingFields=C;f.getElevationFields=async function(F){if(!F)return[];const ba=new Set;await K(ba,F);return Array.from(ba).sort()};f.getExpressionFields=async function(F,ba){const p=new Set;for(const I of ba)await k(p,F.fieldsIndex,I);return Array.from(p).sort()};f.getFeatureEditFields=
function(F){return F?L(F.fieldsIndex,C(F)):[]};f.getFeatureGeometryFields=z;f.getFieldDefaultValue=function(F){const ba=F.defaultValue;if(void 0!==ba&&U(F,ba))return ba;if(F.nullable)return null};f.getFieldRange=function(F){const ba=R.getDomainRange(F.domain);if(ba)return ba;if(Y(F))return r(F.type)};f.getLabelingFields=async function(F){if(!F)return[];const ba=new Set;await J(ba,F);return Array.from(ba).sort()};f.getLowerCaseDefaultHiddenFields=O;f.getLowerCaseEditTrackingFields=u;f.getNumericTypeForValue=
function(F){if(!D(F))return null;if(Oa(F)){if(F>=lb.min&&F<=lb.max)return"esriFieldTypeSmallInteger";if(F>=db.min&&F<=db.max)return"esriFieldTypeInteger"}return F>=q.min&&F<=q.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};f.getTimeFields=async function(F){if(!F)return[];const ba="timeInfo"in F&&F.timeInfo;return ba?L(F.fieldsIndex,[F.trackIdField,ba.startField,ba.endField]):[]};f.integerRange=db;f.isDateField=function(F){return null!=F&&kb.has(F.type)};f.isFieldEditable=function(F,ba){return F.editable&&
!Ga.includes(F.type)&&!u(ba).includes(F.name?.toLowerCase()??"")};f.isFieldVisibleByDefault=function(F,ba){const p=F.name?.toLowerCase()??"";return!(null!=ba?.objectIdField&&p===ba.objectIdField.toLowerCase())&&!(null!=ba?.globalIdField&&p===ba.globalIdField.toLowerCase())&&!O(ba).includes(p)&&!Ha.includes(F.type)&&!Fa.some(I=>I.test(p))};f.isNumberInRange=P;f.isNumericField=Y;f.isRasterPixelValueField=function(F){return F?["raster.itempixelvalue","raster.servicepixelvalue"].some(ba=>F.toLowerCase().startsWith(ba)):
!1};f.isStringField=function(F){return null!=F&&("string"===F.type||"esriFieldTypeString"===F.type)};f.isValidFieldValue=function(F,ba){return null===M(F,ba)};f.isValueMatchingFieldType=U;f.normalizeFieldName=function(F){return null==F?null:F.trim().replaceAll(ja,"_").replace(Z,"F$1")||null};f.numericTypes=Sa;f.packFields=function(F,ba,p=1){if(!ba||!F)return[];if(ba.includes("*"))return["*"];ba=L(F,ba);return ba.length/F.fields.length>=p?["*"]:ba};f.populateMissingFields=v;f.rendererFields=ta;f.sanitizeNullFieldValue=
function(F){return null==F||"number"===typeof F&&isNaN(F)?null:F};f.singleRange=q;f.smallIntegerRange=lb;f.unpackFieldNames=function(F,ba){return null==ba||null==F?[]:ba.includes("*")?(F.fields??[]).map(p=>p.name):ba};f.validateFieldValue=M;f.validationErrorToString=function(F,ba,p){switch(F){case R.DomainValidationError.INVALID_CODED_VALUE:return`Value ${p} is not in the coded domain - field: ${ba.name}, domain: ${JSON.stringify(ba.domain)}`;case R.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${p} is out of the range of valid values - field: ${ba.name}, domain: ${JSON.stringify(ba.domain)}`;
case f.TypeValidationError.INVALID_TYPE:return`Value ${p} is not a valid value for the field type - field: ${ba.name}, type: ${ba.type}, nullable: ${ba.nullable}`;case f.NumericRangeValidationError.OUT_OF_RANGE:const {min:I,max:V}=r(ba.type);return`Value ${p} is out of range for the number type - field: ${ba.name}, type: ${ba.type}, value range is ${I} to ${V}`}};f.visualVariableFields=xa;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(l){l.DomainValidationError=void 0;(function(f){f.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";f.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(l.DomainValidationError||(l.DomainValidationError={}));l.getDomainRange=function(f){if(f&&"range"===f.type)return{min:"range"in f?f.range[0]:f.minValue,max:"range"in f?f.range[1]:f.maxValue}};l.validateDomainValue=function(f,ka){switch(f.type){case "range":const ca="range"in f?f.range[0]:f.minValue;f="range"in
f?f.range[1]:f.maxValue;if(null!=ca&&+ka<ca||null!=f&&+ka>f)return l.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==f.codedValues||f.codedValues.every(R=>null==R||R.code!==ka))return l.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==f.codedValues||f.codedValues.every(R=>null==R||R.code!==ka))return l.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(l,f,ka,ca,R,ha,T,L,h,m,k,H){function A(){return new Promise((O,C)=>l(["../../../geometry/geometryEngineJSON"],O,C))}const K={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var e={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},n={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},z={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};f.canQueryWithRBush=
function(O){if(ha.isExtent(O))return!0;if(ha.isPolygon(O)){for(const C of O.rings)if(5!==C.length||C[0][0]!==C[1][0]||C[0][0]!==C[4][0]||C[2][0]!==C[3][0]||C[0][1]!==C[3][1]||C[0][1]!==C[4][1]||C[1][1]!==C[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=async function(O,C,u){const {spatialRel:J,geometry:Q}=O;if(Q){if(null==J||!0!==e[J])throw new ka("feature-store:unsupported-query","Unsupported query spatial relationship",{query:O});if(T.isValid(Q.spatialReference)&&T.isValid(u)){if(null==
Q||!0!==n[ha.getJsonType(Q)])throw new ka("feature-store:unsupported-query","Unsupported query geometry type",{query:O});if(null==C||!0!==z[C])throw new ka("feature-store:unsupported-query","Unsupported layer geometry type",{query:O});if(O.outSR)return k.checkProjectionSupport(O.geometry&&O.geometry.spatialReference,O.outSR)}}};f.getSpatialQueryOperator=function(O,C,u,J,Q){if(ha.isPolygon(C)&&"esriGeometryPoint"===u&&("esriSpatialRelIntersects"===O||"esriSpatialRelContains"===O)){const D=h.convertFromPolygon(new m,
C,!1,!1);return Promise.resolve(w=>L.polygonContainsPoint(D,!1,!1,w))}if(ha.isPolygon(C)&&"esriGeometryMultipoint"===u){const D=h.convertFromPolygon(new m,C,!1,!1);if("esriSpatialRelContains"===O)return Promise.resolve(w=>L.polygonContainsMultipoint(D,!1,!1,w,J,Q))}if(ha.isExtent(C)&&"esriGeometryPoint"===u&&("esriSpatialRelIntersects"===O||"esriSpatialRelContains"===O))return Promise.resolve(D=>ca.extentContainsPoint(C,H.getGeometry(u,J,Q,D)));if(ha.isExtent(C)&&"esriGeometryMultipoint"===u&&"esriSpatialRelContains"===
O)return Promise.resolve(D=>ca.extentContainsMultipoint(C,H.getGeometry(u,J,Q,D)));if(ha.isExtent(C)&&"esriSpatialRelIntersects"===O){const D=R.getExtentIntersector(u);return Promise.resolve(w=>D(C,H.getGeometry(u,J,Q,w)))}return A().then(D=>{const w=D[K[O]].bind(null,C.spatialReference,C);return y=>w(H.getGeometry(u,J,Q,y))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(l,f){l.extentIntersectsExtent=
f.extentIntersectsExtent;l.extentIntersectsMultipoint=f.extentIntersectsMultipoint;l.extentIntersectsPoint=f.extentIntersectsPoint;l.extentIntersectsPolygon=f.extentIntersectsPolygon;l.extentIntersectsPolyline=f.extentIntersectsPolyline;l.extentIntersectsRings=f.extentIntersectsRings;l.getFeatureExtentIntersector=f.getFeatureExtentIntersector;l.isSelfIntersecting=f.isSelfIntersecting;l.segmentIntersects=f.segmentIntersects;l.getExtentIntersector=function(ka){return"mesh"===ka?f.extentIntersectsExtent:
f.getFeatureExtentIntersector(ka)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(l){function f(ka,ca,R,ha,T){if(!ka)return!1;ca=ca?R?4:3:R?3:2;const {coords:L,lengths:h}=ka;R=!1;ka=0;for(const k of h){var m=ka;for(let H=ka,A=ka+k*ca;H<A;H+=ca){m=H+ca;m===A&&(m=ka);const K=L[H],e=L[H+1],n=L[m];m=L[m+1];(e<T&&m>=T||m<T&&e>=T)&&K+(T-e)/(m-e)*(n-K)<ha&&(R=!R)}ka+=k*ca}return R}l.polygonContainsCoords=f;l.polygonContainsMultipoint=
function(ka,ca,R,ha,T,L){T=T?L?4:3:L?3:2;const {coords:h,lengths:m}=ha;if(!m)return!1;for(let k=0,H=0;k<m.length;k++,H+=T)if(!f(ka,ca,R,h[H],h[H+1]))return!1;return!0};l.polygonContainsPoint=function(ka,ca,R,ha){return f(ka,ca,R,ha.coords[0],ha.coords[1])};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(l){function f(R,ha,T,L,h){if(null!=L&&null!=h)return m=>{const k=R.getAttribute(m,ha);m=R.getAttribute(m,
T);return(null==k||k<=h)&&(null==m||m>=L)};if(null!=L)return m=>{m=R.getAttribute(m,T);return null==m||m>=L};if(null!=h)return m=>{m=R.getAttribute(m,ha);return null==m||m<=h}}function ka(R,ha,T,L){if(null!=T&&null!=L&&T===L)return h=>R.getAttribute(h,ha)===T;if(null!=T&&null!=L)return h=>{h=R.getAttribute(h,ha);return h>=T&&h<=L};if(null!=T)return h=>R.getAttribute(h,ha)>=T;if(null!=L)return h=>R.getAttribute(h,ha)<=L}function ca(){return()=>!1}l.getTimeExtent=async function(R,ha){if(!R)return null;
const T=ha.featureAdapter,{startTimeField:L,endTimeField:h}=R;let m=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY;if(L&&h)await ha.forEach(H=>{const A=T.getAttribute(H,L);H=T.getAttribute(H,h);null==A||isNaN(A)||(m=Math.min(m,A));null==H||isNaN(H)||(k=Math.max(k,H))});else{const H=L||h;await ha.forEach(A=>{A=T.getAttribute(A,H);null==A||isNaN(A)||(m=Math.min(m,A),k=Math.max(k,A))})}return{start:m,end:k}};l.getTimeOperator=function(R,ha,T){if(!ha||!R)return null;const {startTimeField:L,endTimeField:h}=
R;if(!L&&!h)return null;const {start:m,end:k}=ha;return null===m&&null===k?null:void 0===m&&void 0===k?ca():L&&h?f(T,L,h,m,k):ka(T,L||h,m,k)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(l,f){function ka(R){return"oid"===R.type||"esriFieldTypeOID"===R.type}function ca(R){return"global-id"===R.type||"esriFieldTypeGlobalID"===R.type}return function(){function R(T=
[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(T){this.fields=T;var L=[];for(const h of T){T=h?.name;const m=f.normalizeFieldName(h?.name)?.toLowerCase()??"";if(T&&m){const k=T.trim().toLowerCase();this._fieldsMap.set(T,h);this._fieldsMap.set(k,h);this._normalizedFieldsMap.set(m,h);L.push(k);"date"===h.type||"esriFieldTypeDate"===h.type||"date-only"===
h.type||"esriFieldTypeDateOnly"===h.type||"timestamp-offset"===h.type||"esriFieldTypeTimestampOffset"===h.type?(this.dateFields.push(h),this._dateFieldsSet.add(h)):f.isNumericField(h)&&(this._numericFieldsSet.add(h),this.numericFields.push(h));ka(h)||ca(h)||(h.editable=null==h.editable||!!h.editable,h.nullable=null==h.nullable||!!h.nullable)}}L.sort();this.uid=L.join(",")}}var ha=R.prototype;ha.destroy=function(){this._fieldsMap.clear()};ha.has=function(T){return null!=this.get(T)};ha.get=function(T){if(T){var L=
this._fieldsMap.get(T);if(L)return L;(L=this._fieldsMap.get(T.trim().toLowerCase())??this._normalizedFieldsMap.get(f.normalizeFieldName(T)?.toLowerCase()??""))&&this._fieldsMap.set(T,L);return L}};ha.isDateField=function(T){return this._dateFieldsSet.has(this.get(T))};ha.isNumericField=function(T){return this._numericFieldsSet.has(this.get(T))};ha.normalizeFieldName=function(T){if(T=this.get(T))return T.name??void 0};l._createClass(R,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=
[];for(const T of this.fields)ka(T)||ca(T)||T.nullable||void 0!==f.getFieldDefaultValue(T)||this._requiredFields.push(T)}return this._requiredFields}}]);return R}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(l,f,ka,ca,R,ha,T,L,h,m,k,H,A,K,e){function n(x){return z.has(x)?z.get(x):"number"===typeof x?x:1}l.Task=void 0;(function(x){x[x.YIELD=1]="YIELD"})(l.Task||(l.Task={}));l.TaskPriority=void 0;(function(x){x.RESOURCE_CONTROLLER_IMMEDIATE="immediate";x.RESOURCE_CONTROLLER="schedule";x.SLIDE="slide";x.STREAM_DATA_LOADER="stream loader";x.ELEVATION_QUERY="elevation query";x.TERRAIN_SURFACE="terrain";x.SURFACE_GEOMETRY_UPDATES="surface geometry updates";x.LOD_RENDERER="LoD renderer";x.GRAPHICS_CORE=
"Graphics3D";x.I3S_CONTROLLER="I3S";x.POINT_CLOUD_LAYER="point cloud";x.FEATURE_TILE_FETCHER="feature fetcher";x.OVERLAY="overlay";x.STAGE="stage";x.GRAPHICS_DECONFLICTOR="graphics deconflictor";x.FILTER_VISIBILITY="Graphics3D filter visibility";x.SCALE_VISIBILITY="Graphics3D scale visibility";x.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";x.POINT_OF_INTEREST_FREQUENT="POI frequent";x.POINT_OF_INTEREST_INFREQUENT="POI infrequent";x.LABELER="labeler";x.FEATURE_QUERY_ENGINE="feature query";x.FEATURE_TILE_TREE=
"feature tile tree";x.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";x.ELEVATION_ALIGNMENT="elevation alignment";x.TEXT_TEXTURE_ATLAS="text texture atlas";x.TEXTURE_UNLOAD="texture unload";x.LINE_OF_SIGHT_TOOL="line of sight tool";x.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";x.ELEVATION_PROFILE="elevation profile";x.SNAPPING="snapping";x.SHADOW_ACCUMULATOR="shadow accumulator";x.CLOUDS_GENERATOR="clouds generator";x[x.NONE=0]="NONE";x[x.TEST_PRIO=1]="TEST_PRIO"})(l.TaskPriority||
(l.TaskPriority={}));const z=new Map([[l.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[l.TaskPriority.RESOURCE_CONTROLLER,4],[l.TaskPriority.SLIDE,0],[l.TaskPriority.STREAM_DATA_LOADER,0],[l.TaskPriority.ELEVATION_QUERY,0],[l.TaskPriority.TERRAIN_SURFACE,1],[l.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[l.TaskPriority.LOD_RENDERER,2],[l.TaskPriority.GRAPHICS_CORE,2],[l.TaskPriority.I3S_CONTROLLER,2],[l.TaskPriority.POINT_CLOUD_LAYER,2],[l.TaskPriority.FEATURE_TILE_FETCHER,2],[l.TaskPriority.OVERLAY,
4],[l.TaskPriority.STAGE,4],[l.TaskPriority.GRAPHICS_DECONFLICTOR,4],[l.TaskPriority.FILTER_VISIBILITY,4],[l.TaskPriority.SCALE_VISIBILITY,4],[l.TaskPriority.FRUSTUM_VISIBILITY,4],[l.TaskPriority.CLOUDS_GENERATOR,4],[l.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[l.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[l.TaskPriority.LABELER,8],[l.TaskPriority.FEATURE_QUERY_ENGINE,8],[l.TaskPriority.FEATURE_TILE_TREE,16],[l.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[l.TaskPriority.ELEVATION_ALIGNMENT,12],[l.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[l.TaskPriority.TEXTURE_UNLOAD,12],[l.TaskPriority.LINE_OF_SIGHT_TOOL,16],[l.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[l.TaskPriority.SNAPPING,0],[l.TaskPriority.SHADOW_ACCUMULATOR,30]]),O=H.Milliseconds(6.5),C=H.Milliseconds(1),u=H.Milliseconds(30),J=H.Milliseconds(1E3/30),Q=H.Milliseconds(100);var D;(function(x){let B=function(){function Y(){this._updating=k.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new T("total"),tasks:new Map};this._frameTaskTimes=
new Map;this._budget=new U;this._state=e.RenderState.INTERACTING;this._tasks=new L;this._runQueue=new L;this._load=0;this._idleStateCallbacks=new L;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=m.watch(()=>K.SCHEDULER_LOG_SLOW_TASKS,r=>this._debug=r,m.initial);for(const r of Object.keys(l.TaskPriority))this.performanceInfo.tasks.set(l.TaskPriority[r],new T(l.TaskPriority[r]));const P=this;this._test={FRAME_SAFETY_BUDGET:O,INTERACTING_BUDGET:J,IDLE_BUDGET:Q,get availableBudget(){return P._budget.budget},
usedBudget:0,getBudget:()=>P._budget,setBudget:r=>P._budget=r,updateTask:r=>this._updateTask(r),getState:r=>this._getState(r),getRuntime:r=>this._getRuntime(r),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var M=Y.prototype;M._updatingChanged=function(){this._updating.value=this._tasks.some(P=>P.needsUpdate)};M.destroy=function(){this._tasks.toArray().forEach(P=>P.remove());this._tasks.clear();ha.removeMaybe(this._debugHandle);this._microTaskQueued=
!1;this._updatingChanged()};M.taskRunningChanged=function(P){this._updatingChanged();P&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};M.registerTask=function(P,r){const v=n(P);r=new E(this,P,r,v);this._tasks.push(r);this._updatingChanged();this.performanceInfo.tasks.has(P)||this.performanceInfo.tasks.set(P,new T(P));return r};M.registerIdleStateCallbacks=
function(P,r){const v={idleBegin:P,idleEnd:r};this._idleStateCallbacks.push(v);this.state===e.RenderState.IDLE&&this._idleUpdatesStartFired&&v.idleBegin();const Z=this;return{remove:()=>this._removeIdleStateCallbacks(v),set idleBegin(ja){Z._idleUpdatesStartFired&&(v.idleEnd(),Z._state===e.RenderState.IDLE&&ja());v.idleBegin=ja},set idleEnd(ja){v.idleEnd=ja}}};M.updateBudget=function(P){this._test.usedBudget=0;++this._frameNumber;let r=O,v=P.frameDuration,Z=C;switch(this.state){case e.RenderState.IDLE:r=
H.Milliseconds(0);v=H.Milliseconds(Math.max(Q,P.frameDuration));Z=u;break;case e.RenderState.INTERACTING:v=H.Milliseconds(Math.max(J,P.frameDuration))}v=H.Milliseconds(v-P.elapsedFrameTime-r);if(this.state!==e.RenderState.IDLE&&v<C&&!this._forceTask)return this._forceTask=!0,!1;v=H.Milliseconds(Math.max(v,Z));this._budget.reset(v,this.state);this._updateLoad();return this._schedule()};M.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case e.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(P=>P.idleBegin()));this._runIdle();break;case e.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};M.stopFrame=function(){this._budget.reset(H.Milliseconds(0),this._state);this._budget.madeProgress()};M._removeIdleStateCallbacks=function(P){this._idleUpdatesStartFired&&P.idleEnd();this._idleStateCallbacks.removeUnordered(P)};M.removeTask=function(P){this._tasks.removeUnordered(P);
this._runQueue.removeUnordered(P);this._updatingChanged()};M._updateTask=function(P){this._tasks.forAll(r=>{r.name===P&&r.setPriority(P)})};M._getState=function(P){if(this._runQueue.some(v=>v.name===P))return l.TaskState.SCHEDULED;let r=l.TaskState.IDLE;this._tasks.forAll(v=>{v.name===P&&v.needsUpdate&&(1>=v.schedulePriority?r=l.TaskState.READY:r!==l.TaskState.READY&&(r=l.TaskState.WAITING))});return r};M._getRuntime=function(P){let r=0;this._tasks.forAll(v=>{v.name===P&&(r+=v.runtime)});return r};
M._resetRuntimes=function(){this._tasks.forAll(P=>P.runtime=0)};M._getRunning=function(){const P=new Map;this._tasks.forAll(v=>{v.needsUpdate&&P.set(v.name,(P.get(v.name)||0)+1)});if(0===P.size)return null;let r="";P.forEach((v,Z)=>{r=1<v?r+` ${v}x ${Z}`:r+` ${Z}`});return r};M._runIdle=function(){this._run()};M._runInteracting=function(){this._run()};M._runAnimating=function(){this._run()};M._updateLoad=function(){const P=this._tasks.reduce((r,v)=>v.needsUpdate?++r:r,0);this._load=.9*this._load+
P*(1-.9)};M._schedule=function(){this._runQueue.filterInPlace(P=>{if(P.needsUpdate)return!0;P.schedulePriority=P.basePriority;return!1});for(this._tasks.forAll(P=>{0===P.basePriority&&P.needsUpdate&&!this._runQueue.includes(P)&&P.blockFrame!==this._frameNumber&&this._runQueue.unshift(P)});0===this._runQueue.length;){let P=!1;this._tasks.forAll(r=>{if(r.needsUpdate&&0!==r.schedulePriority&&0!==r.basePriority&&r.blockFrame!==this._frameNumber)switch(P=!0,r.schedulePriority){case 1:r.schedulePriority=
0;this._runQueue.push(r);break;default:--r.schedulePriority}});if(!P)return this._updatingChanged(),!1}this._updatingChanged();return!0};M._run=function(){const P=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var r=this._budget.now();const v=this._runQueue.pop();this._budget.resetProgress();try{v.task.runTask(this._budget)===l.Task.YIELD&&(v.blockFrame=this._frameNumber)}catch(Z){R.getLogger("esri.views.support.Scheduler").error(`Exception in task "${v.name}"`,Z)}!this._budget.hasProgressed&&
v.blockFrame!==this._frameNumber&&v.needsUpdate&&(v.blockFrame=this._frameNumber);v.schedulePriority=v.basePriority;r=this._budget.now()-r;v.runtime+=r;this._frameTaskTimes.set(v.priority,this._frameTaskTimes.get(v.priority)+r);this._debug&&r>2*this._budget.budget&&console.log("Task",v.name,"used",r,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-P);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
P)};M._startFrameTaskTimes=function(){for(const P of Object.keys(l.TaskPriority))this._frameTaskTimes.set(l.TaskPriority[P],0)};M._recordFrameTaskTimes=function(P){this._frameTaskTimes.forEach((r,v)=>this.performanceInfo.tasks.get(v).record(r));this.performanceInfo.total.record(P)};f._createClass(Y,[{key:"updating",get:function(){return this._updating.value}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(P){this._state!==P&&(this._state=
P,this.state!==e.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(r=>r.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return Y}();x.Scheduler=B;let E=function(){function Y(P,r,v,Z){this._scheduler=P;this.name=r;this._basePriority=Z;this.runtime=this.blockFrame=0;this._queue=new A.PromiseQueue;this._handles=new ka;this.schedulePriority=this._basePriority;this._task=k.signal(null!=v?v:this._queue);this._handles.add(m.when(()=>
this.task.running,ja=>P.taskRunningChanged(ja)))}var M=Y.prototype;M.remove=function(){this.processQueue(w);this._scheduler.removeTask(this);this.schedule=y.schedule;this.reschedule=y.reschedule;this._handles.destroy()};M.setPriority=function(P){this.name=P;P=n(P);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=P;this._basePriority=P};M.schedule=function(P,r,v){return this._queue.push(P,r,v)};M.reschedule=function(P,r,v){return this._queue.unshift(P,r,v)};M.processQueue=
function(P){this._queue.runTask(P)};f._createClass(Y,[{key:"task",get:function(){return this._task.value}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(P){this.setPriority(P)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return Y}(),U=function(){function Y(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=
0;this._state=e.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var M=Y.prototype;M.run=function(P){if(this.done)return!1;!0===P()&&this.madeProgress();return!0};M.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};M.reset=function(P,r){this._begin=this.now();this._budget=P;this._state=r;this.resetProgress()};M.now=function(){return performance.now()};M.resetProgress=function(){this._done=this._progressed=!1};f._createClass(Y,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(P){this._enabled=P}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return Y}();x.Budget=U})(D||(D={}));l.TaskState=void 0;
(function(x){x.SCHEDULED="s";x.READY="r";x.WAITING="w";x.IDLE="i"})(l.TaskState||(l.TaskState={}));const w=(()=>{const x=new D.Budget;x.enabled=!1;return x})(),y=new (function(){function x(){}var B=x.prototype;B.remove=function(){};B.processQueue=function(){};B.schedule=function(E,U,Y){try{if(h.isAborted(U)){const M=h.createAbortError();return Y?Promise.resolve(Y(M)):Promise.reject(M)}return h.when(E(w))}catch(M){return Promise.reject(M)}};B.reschedule=function(E,U,Y){return this.schedule(E,U,Y)};
return f._createClass(x)}());l.ImmediateTask=y;l.getTaskPriority=n;l.newScheduler=function(){return new D.Scheduler};l.noBudget=w;l.taskPriorities=z;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(l,f,ka,ca,R,ha,T){function L(A,K,e={}){return h(A,K,e,k)}function h(A,K,e={},n){let z=null;const O=e.once?(C,u)=>
{n(C)&&(ca.removeMaybe(z),K(C,u))}:(C,u)=>{n(C)&&K(C,u)};z=ha.watchTracked(A,O,e.sync,e.equals);e.initial&&(A=A(),O(A,A));return z}function m(A,K,e){if(R.isAborted(e))return Promise.reject(R.createAbortError());const n=A();if(K?.(n))return Promise.resolve(n);let z=null;return new Promise((O,C)=>{z=ka.handlesGroup([R.onAbort(e,()=>{z=ca.removeMaybe(z);C(R.createAbortError())}),h(A,u=>{z=ca.removeMaybe(z);O(u)},{sync:!1,once:!0},K??k)])})}function k(A){return!0}function H(A){return!!A}l.autorun=T.autorun;
l.initial={initial:!0};l.on=function(A,K,e,n={}){function z(){C&&u&&(u.remove(),n.onListenerRemove?.(C),u=C=null)}function O(D){n.once&&n.once&&ca.removeMaybe(J);e(D)}let C=null,u=null,J=null;const Q=L(A,(D,w)=>{z();f.isEventTarget(D)&&(C=D,u=f.on(D,K,O),n.onListenerAdd?.(D))},{sync:n.sync,initial:!0});return J=ka.makeHandle(()=>{Q.remove();z()})};l.once=function(A,K){return m(A,null,K)};l.pausable=function(A,K,e={}){let n=!1;const z=L(A,(O,C)=>{n||K(O,C)},e);return{remove(){z.remove()},pause(){n=
!0},resume(){n=!1}}};l.sync={sync:!0};l.syncAndInitial={sync:!0,initial:!0};l.watch=L;l.when=function(A,K,e={}){return h(A,K,e,H)};l.whenOnce=function(A,K){return m(A,H,K)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(l,f,ka,ca,R){let ha=function(){function T(L,h){this._observable=new R.SimpleObservable;
this._value=L;this._equalityFunction=h}T.prototype.mutate=function(L){L(this._value);this._observable.notify()};f._createClass(T,[{key:"value",get:function(){ca.trackAccess(this._observable);return this._value},set:function(L){this._equalityFunction(L,this._value)||(this._value=L,this._observable.notify())}}]);return T}();l.signal=function(T,L=ka.equalsShallow){return new ha(T,L)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/signal"],function(l,f,ka,ca){let R=function(){function T(){this._tasks=[];this._running=ca.signal(!1)}var L=T.prototype;L.destroy=function(){this.cancelAll()};L.runTask=function(h){for(;!h.done&&this._process(h);)h.madeProgress()};L.push=function(h,m,k){this._running.value=!0;return new Promise((H,A)=>this._tasks.push(new ha(H,A,h,m,k)))};L.unshift=function(h,m,k){this._running.value=!0;return new Promise((H,A)=>this._tasks.unshift(new ha(H,
A,h,m,k)))};L._process=function(h){if(0===this._tasks.length)return!1;const m=this._tasks.shift();try{const k=ka.isAborted(m.signal);if(k&&!m.abortCallback)m.reject(ka.createAbortError());else{const H=k?m.abortCallback?.(ka.createAbortError()):m.callback(h);ka.isPromiseLike(H)?H.then(m.resolve,m.reject):m.resolve(H)}}catch(k){m.reject(k)}this._running.value=0<this._tasks.length;return!0};L.cancelAll=function(){const h=ka.createAbortError();for(const m of this._tasks)if(m.abortCallback){const k=m.abortCallback(h);
m.resolve(k)}else m.reject(h);this._tasks.length=0;this._running.value=!1};f._createClass(T,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.value}}]);return T}(),ha=f._createClass(function(T,L,h,m,k){this.resolve=T;this.reject=L;this.callback=h;this.signal=m;this.abortCallback=k});l.PromiseQueue=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,f,ka,ca,R,ha,T,L){ka=function(h){function m(){var k=h.apply(this,arguments)||this;k.SCHEDULER_LOG_SLOW_TASKS=!1;k.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return k}l._inherits(m,h);return l._createClass(m)}(ka);f.__decorate([ca.property()],ka.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);f.__decorate([ca.property()],ka.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ka=f.__decorate([L.subclass("esri.views.support.DebugFlags")],ka);return new ka})},
"esri/views/support/RenderState":function(){define(["exports"],function(l){l.RenderState=void 0;var f=l.RenderState||(l.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]="IDLE";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports","../../../../core/number","../../../support/fieldUtils"],function(l,f,ka){function*ca(Q,D,w){let y=0;for(;y<=Q.length;){var x=Q.indexOf(D,y);x=Q.substring(y,
-1<x?x:void 0);y+=x.length+D.length;if(!w||x.trim())yield x}}function R(Q){const D=Q.includes("\r\n")?"\r\n":"\n";return ca(Q,D,!0)}function ha(Q,D){return ca(Q,D,!1)}function*T(Q,D,w,y=()=>Object.create(null)){var x=R(Q);x.next();var B="";Q="";let E=0,U=y(),Y=0;a:for(const M of x){x=ha(M,w);for(const P of x)if(B+=Q+P,Q="",E+=m(P),0===E%2){if(0<E)if(B=K.exec(B))U[D[Y]]=B[1].replaceAll(e,'"'),Y++;else{U=y();Y=0;B="";E=0;continue a}else U[D[Y]]=B,Y++;B="";E=0}else Q=w;0===E?(yield U,U=y(),Y=0):Q="\n"}}
function L(Q,D){Q=h(Q,D).filter(w=>null!=w);D=Q.map(w=>ka.normalizeFieldName(w));for(let w=D.length-1;0<=w;w--)D[w]||(D.splice(w,1),Q.splice(w,1));return{names:D,aliases:Q}}function h(Q,D){if(!Q?.length)return[];const w=[];var y="";let x="",B=0;Q=ha(Q,D);for(const E of Q)y+=x+E,x="",B+=m(E),0===B%2?(0<B?(y=K.exec(y))&&w.push(y[1].replaceAll(e,'"')):w.push(y),y="",B=0):x=D;return w}function m(Q){let D=0,w;for(w=Q.indexOf('"',0);0<=w;)D++,w=Q.indexOf('"',w+1);return D}function k(Q,D,w){D=ka.normalizeFieldName(D)?.toLowerCase();
w=ka.normalizeFieldName(w)?.toLowerCase();const y=Q.map(x=>x.toLowerCase());D=D?Q[y.indexOf(D)]:null;w=w?Q[y.indexOf(w)]:null;return{longitudeFieldName:D||Q[y.indexOf(J.find(x=>y.includes(x)))],latitudeFieldName:w||Q[y.indexOf(u.find(x=>y.includes(x)))]}}function H(Q){if(!Q.length)return"string";const D=/[^+-.,0-9]/;return Q.map(w=>{var y=!1;if(""!==w){if(D.test(w))y=!0;else{y=z(w);if(!isNaN(y))return/[.,]/.test(w)||!Number.isInteger(y)||214783647<y||-214783648>y?"double":"integer";if(w.includes("E"))if(y=
Number(w),isNaN(y))if(w.includes(","))if(w=w.replace(",","."),y=Number(w),isNaN(y))y=!0;else return"double";else y=!0;else return"double";else y=!0}return y&&!/^[-]?\d*[.,]?\d*$/.test(w)&&A(new Date(w),w)?"date":"string"}}).reduce((w,y)=>{if(void 0===w)return y;if(void 0===y)return w;if(w===y)return y;if("string"===w||"string"===y)return"string";if("double"===w||"double"===y)return"double"})}function A(Q,D){if(!Q||"[object Date]"!==Object.prototype.toString.call(Q)||isNaN(Q.getTime()))return!1;Q=
!0;if(!C&&/\d+\W*$/.test(D)&&(D=D.match(/[a-zA-Z]{2,}/))){Q=!1;let w=0;for(;!Q&&w<=D.length;)Q=!O.test(D[w]),w++;Q=!Q}return Q}const K=/^\s*"([\S\s]*)"\s*$/,e=/""/g,n=[","," ",";","|","\t"],z=function(){const Q=f._parseInfo(),D=new RegExp("^"+Q.regexp+"$"),w=new RegExp("["+Q.group+"\\s\\xa0]","g"),y=Q.factor;return x=>{x=D.exec(x);Q.factor=y;if(!x)return NaN;let B=x[1];if(!x[1]){if(!x[2])return NaN;B=x[2];Q.factor*=-1}B=B.replace(w,"").replace(Q.decimal,".");return+B*Q.factor}}(),O=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
C=Number.isNaN((new Date("technology 10")).getTime()),u="lat latitude latitude83 latdecdeg lat_dd y ycenter point_y".split(" "),J="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point_x".split(" ");l.extractFieldNamesAndAliasesFromRow=L;l.inferDelimiterAndLocationInfo=function(Q,D,w){Q=Q.trim();D=D?.trim();var y=[],x=Array.from(new Set([w?.delimiter,...n])).filter(B=>null!=B);for(const B of x){x=h(Q,B).length;const E=h(D,B).length??x;1<x&&y.push({weight:Math.min(x,E),delimiter:B})}D=
y.sort(({weight:B},{weight:E})=>E-B).map(({delimiter:B})=>B);for(const B of D)if(y=L(Q,B).names,y=k(y,w?.longitudeField,w?.latitudeField),y.longitudeFieldName&&y.latitudeFieldName)return{delimiter:B,locationInfo:y};return{delimiter:D[0],locationInfo:null}};l.inferFieldType=H;l.inferFields=function(Q,D,w,y,x){const B=[];D=T(Q,w,D);Q=[];for(var E of D){if(10===Q.length)break;Q.push(E)}for(E=0;E<w.length;E++){const Y=w[E];D=y[E];if(Y===x.longitudeFieldName||Y===x.latitudeFieldName)B.push({name:Y,type:"esriFieldTypeDouble",
alias:D});else{var U=Q.map(P=>P[Y]);let M=void 0;switch(H(U)){case "integer":U="esriFieldTypeInteger";break;case "double":U="esriFieldTypeDouble";break;case "date":U="esriFieldTypeDate";M=36;break;default:U="esriFieldTypeString",M=255}B.push({name:Y,type:U,alias:D,length:M})}}return B};l.isValidDate=A;l.parseNumber=z;l.parseRows=T;l.readRowParts=ha;l.readRows=R;l.splitSingleRow=h;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/number":function(){define(["exports","./string",
"../intl/locale"],function(l,f,ka){function ca(k=ka.getLocale()){k=k.toLowerCase();let H=k in L;if(!H){const n=k.split("-");1<n.length&&n[0]in L&&(k=n[0],H=!0);H||(k="en")}const [A,K,e="#,##0.###"]=L[k];return{decimal:A,group:K,pattern:e}}function R(k){k=k||{};var H=ca(k.locale);const A=k.pattern||H.pattern,K=H.group,e=H.decimal;let n=1;if(A.includes("%"))n/=100;else if(A.includes("\u2030"))n/=1E3;else if(A.includes("\u00a4"))throw Error("currency notation not supported");H=A.split(";");1===H.length&&
H.push("-"+H[0]);return{regexp:m(H,z=>{z="(?:"+f.escapeRegExpString(z,".")+")";return z.replace(h,O=>{const C={signed:!1,separator:k.strict?K:[K,""],fractional:k.fractional,decimal:e,exponent:!1};O=O.split(".");let u=k.places;1===O.length&&1!==n&&(O[1]="###");1===O.length||0===u?C.fractional=!1:(void 0===u&&(u=k.pattern?O[1].lastIndexOf("0")+1:Infinity),u&&null==k.fractional&&(C.fractional=!0),!k.places&&+u<O[1].length&&(u+=","+O[1].length),C.places=u);O=O[0].split(",");1<O.length&&(C.groupSize=O.pop().length,
1<O.length&&(C.groupSize2=O.pop().length));return"("+ha(C)+")"})},!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:K,decimal:e,factor:n}}function ha(k){k=k||{};"places"in k||(k.places=Infinity);"string"!==typeof k.decimal&&(k.decimal=".");"fractional"in k&&!/^0/.test(String(k.places))||(k.fractional=[!0,!1]);"exponent"in k||(k.exponent=[!0,!1]);"eSigned"in k||(k.eSigned=[!0,!1]);var H=T(k);const A=m(k.fractional,e=>{let n="";e&&0!==k.places&&(n="\\"+k.decimal,n=Infinity===k.places?"(?:"+n+"\\d+)?":n+
("\\d{"+k.places+"}"));return n},!0),K=m(k.exponent,e=>e?"([eE]"+T({signed:k.eSigned})+")":"");H+=A;A&&(H="(?:(?:"+H+")|(?:"+A+"))");return H+K}function T(k){k=k||{};"signed"in k||(k.signed=[!0,!1]);"separator"in k?"groupSize"in k||(k.groupSize=3):k.separator="";const H=m(k.signed,K=>K?"[-+]":"",!0),A=m(k.separator,K=>{if(!K)return"(?:\\d+)";K=f.escapeRegExpString(K);" "===K?K="\\s":"\u00a0"===K&&(K="\\s\\xa0");const e=k.groupSize,n=k.groupSize2;return n?(K="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+K+"]\\d{"+
n+"})*["+K+"]\\d{"+e+"})",0<e-n?"(?:"+K+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":K):"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+K+"]\\d{"+e+"})*)"},!0);return H+A}const L={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",",
"."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},h=/[#0,]*[#0](?:\.0*#*)?/,m=(k,H,A)=>{if(!(k instanceof Array))return H(k);const K=[];for(let e=0;e<k.length;e++)K.push(H(k[e]));k=K.join("|");
return"("+(A?"?:":"")+k+")"};l._parseInfo=R;l.format=function(k,H){H={...H};var A=ca(H.locale);H.customs=A;A=H.pattern||A.pattern;if(isNaN(k)||Infinity===Math.abs(k))return null;var K=k;var e=H||{};var n=e.customs.group,z=e.customs.decimal;A=A.split(";");k=A[0];H=A[0>K?1:0]||"-"+k;if(H.includes("%"))K*=100;else if(H.includes("\u2030"))K*=1E3;else{if(H.includes("\u00a4"))throw Error("currency notation not supported");if(H.includes("E"))throw Error("exponential notation not supported");}A=h;var O=k.match(A);
if(!O)throw Error("unable to find a number expression in pattern: "+H);!1===e.fractional&&(e.places=0);k=H.replace;O=O[0];e=e={decimal:z,group:n,places:e.places,round:e.round};!0===e.places&&(e.places=0);Infinity===e.places&&(e.places=6);z=O.split(".");var C="string"===typeof e.places&&e.places.indexOf(",");O=e.places;C?O=e.places.substring(C+1):0<=+O||(O=(z[1]||[]).length);0>e.round||(K=Number(K.toFixed(Number(O))));n=String(Math.abs(K)).split(".");K=n[1]||"";z[1]||e.places?(C&&(e.places=e.places.substring(0,
C)),C=void 0!==e.places?e.places:z[1]&&z[1].lastIndexOf("0")+1,+C>K.length&&(n[1]=K.padEnd(Number(C),"0")),+O<K.length&&(n[1]=K.substr(0,Number(O)))):n[1]&&n.pop();K=z[0].replace(",","");O=K.indexOf("0");-1!==O&&(O=K.length-O,O>n[0].length&&(n[0]=n[0].padStart(O,"0")),K.includes("#")||(n[0]=n[0].substr(n[0].length-O)));K=z[0].lastIndexOf(",");let u;if(-1!==K){var J=z[0].length-K-1;z=z[0].substr(0,K);K=z.lastIndexOf(",");-1!==K&&(u=z.length-K-1)}z=[];for(K=n[0];K;)O=K.length-J,z.push(0<O?K.substr(O):
K),K=0<O?K.slice(0,O):"",u&&(J=u,u=void 0);n[0]=z.reverse().join(e.group||",");J=n.join(e.decimal||".");return k.call(H,A,J)};l.getCustoms=ca;l.parse=function(k,H){H=R(H);k=(new RegExp("^"+H.regexp+"$")).exec(k);if(!k)return NaN;let A=k[1];if(!k[1]){if(!k[2])return NaN;A=k[2];H.factor*=-1}A=A.replaceAll(new RegExp("["+H.group+"\\s\\xa0]","g"),"").replace(H.decimal,".");return Number(A)*H.factor};l.regexp=function(k){return R(k).regexp};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/intl/locale":function(){define(["exports"],function(l){function f(){return L??globalThis.navigator?.language??"en"}function ka(){void 0===T&&(T=f());return T}function ca(H=ka()){return/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(H)?.[1].toLowerCase()}function R(){const H=ha??f();T!==H&&(T=H,[...k].forEach(A=>{A.call(null,H)}),[...m].forEach(A=>{A.call(null,H)}))}let ha=void 0,T=void 0;const L=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,h={he:!0,ar:!0},m=[],k=[];globalThis.addEventListener?.("languagechange",
R);l.beforeLocaleChange=function(H){k.push(H);return{remove(){m.splice(k.indexOf(H),1)}}};l.getDefaultLocale=f;l.getLanguage=ca;l.getLocale=ka;l.onLocaleChange=function(H){m.push(H);return{remove(){m.splice(m.indexOf(H),1)}}};l.prefersRTL=function(H=ka()){H=ca(H);return void 0!==H&&(h[H]||!1)};l.setLocale=function(H){ha=H||void 0;R()};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has",
"../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(l,f,ka,ca,R){const ha=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let T=1;l.createCapabilities=function(L,h){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:L},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:h,supportsDelete:h,supportsEditing:h,
supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:h,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:ca.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:h,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,
supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}};l.createDefaultAttributesFunction=function(L,h){if(f("esri-csp-restrictions"))return()=>({[h]:null,...L});try{let m=`this.${h} = null;`;for(const H in L){const A=ha.test(H)?`.${H}`:`["${H}"]`;m+=`this${A} = ${JSON.stringify(L[H])};`}const k=(new Function(`\n      return class AttributesClass$${T++} {\n        constructor() {\n          ${m};\n        }\n      }\n    `))();
return()=>new k}catch(m){return()=>({[h]:null,...L})}};l.createDefaultTemplate=function(L={}){return[{name:"New Feature",description:"",prototype:{attributes:ka.clone(L)}}]};l.createDrawingInfo=function(L){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===L||"esriGeometryMultipoint"===L?R.defaultPointSymbolJSON:"esriGeometryPolyline"===L?R.defaultPolylineSymbolJSON:R.defaultPolygonSymbolJSON}}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],
function(l){const f=[252,146,31,255],ka={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ca={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f};l.defaultColor=f;l.defaultOutlineColor=[153,153,153,255];l.defaultPointSymbolJSON=ka;l.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};l.defaultPolylineSymbolJSON=
ca;l.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};l.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};l.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};l.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",
color:[0,0,0,255],width:1.5};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../geometry/SpatialReference".split(" "),function(l,
f,ka,ca,R,ha,T,L,h,m,k,H,A,K,e,n,z,O,C,u,J,Q){function D(E,U){var Y=U.parsingOptions||{};const M={delimiter:Y.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:Y.latitudeField,longitudeFieldName:Y.longitudeField}},P=M.layerDefinition={name:L.getFilename(U.url,y)||"csv",drawingInfo:w,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:Y.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,
spatialReference:Y.spatialReference||{wkid:4326}}};var r=O.readRows(E);U=r.next().value?.trim();r=r.next().value?.trim();if(!U)throw new R("csv-layer:empty-csv","CSV is empty",{csv:E});const {delimiter:v,locationInfo:Z}=O.inferDelimiterAndLocationInfo(U,r,Y);if(!v)throw new R("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:U,secondLine:r,parsingOptions:Y});if(!Z)throw new R("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",
{firstLine:U,secondLine:r,parsingOptions:Y});M.locationInfo=Z;M.delimiter=v;const {names:ja,aliases:ta}=O.extractFieldNamesAndAliasesFromRow(U,v);E=O.inferFields(E,M.delimiter,ja,ta,M.locationInfo);if(Y.fields?.length){Y=new u(Y.fields);for(var xa of E)(U=Y.get(xa.name))&&Object.assign(xa,U)}E.some(Ca=>"esriFieldTypeOID"===Ca.type?(P.objectIdField=Ca.name,!0):!1)||(xa={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},P.objectIdField=xa.name,E.unshift(xa));P.fields=
E;Y=new u(P.fields);M.locationInfo&&(M.locationInfo.latitudeFieldName=Y.get(M.locationInfo.latitudeFieldName).name,M.locationInfo.longitudeFieldName=Y.get(M.locationInfo.longitudeFieldName).name);P.timeInfo&&(xa=P.timeInfo,xa.startTimeField&&((E=Y.get(xa.startTimeField))?(xa.startTimeField=E.name,E.type="esriFieldTypeDate"):xa.startTimeField=null),xa.endTimeField&&((E=Y.get(xa.endTimeField))?(xa.endTimeField=E.name,E.type="esriFieldTypeDate"):xa.endTimeField=null),xa.trackIdField&&(Y=Y.get(xa.trackIdField),
xa.trackIdField=Y?Y.name:null),xa.startTimeField||xa.endTimeField||(P.timeInfo=null));return M}const w=C.createDrawingInfo("esriGeometryPoint"),y=["csv"],x=[0,0];let B=l._createClass(function(E,U){this.x=E;this.y=U});return function(){function E(){this._queryEngine=null;this._snapshotFeatures=async Y=>{Y=await this._fetch(Y);return this._createFeatures(Y)}}var U=E.prototype;U.destroy=function(){this._queryEngine?.destroy();this._queryEngine=null};U.load=async function(Y,M={}){this._loadOptions=Y;
[M]=await Promise.all([this._fetch(M.signal),this._checkProjection(Y?.parsingOptions?.spatialReference)]);Y=D(M,Y);this._locationInfo=Y.locationInfo;this._delimiter=Y.delimiter;this._queryEngine=this._createQueryEngine(Y);M=await this._createFeatures(M);this._queryEngine.featureStore.addMany(M);const {fullExtent:P,timeExtent:r}=await this._queryEngine.fetchRecomputedExtents();Y.layerDefinition.extent=P;if(r){const {start:v,end:Z}=r;Y.layerDefinition.timeInfo.timeExtent=[v,Z]}return Y};U.applyEdits=
async function(){throw new R("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");};U.queryFeatures=async function(Y={},M={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(Y,M.signal)};U.queryFeatureCount=async function(Y={},M={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(Y,M.signal)};U.queryObjectIds=async function(Y={},M={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(Y,
M.signal)};U.queryExtent=async function(Y={},M={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(Y,M.signal)};U.querySnapping=async function(Y,M={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(Y,M.signal)};U.refresh=async function(Y){this._loadOptions.customParameters=Y;this._snapshotTask?.abort();this._snapshotTask=ca.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(r=>{this._queryEngine.featureStore.clear();
r&&this._queryEngine.featureStore.addMany(r)},r=>{this._queryEngine.featureStore.clear();T.isAbortError(r)||ha.getLogger("esri.layers.CSVLayer").error(new R("csv-layer:refresh","An error occurred during refresh",{error:r}))});await this._waitSnapshotComplete();const {fullExtent:M,timeExtent:P}=await this._queryEngine.fetchRecomputedExtents();return{extent:M,timeExtent:P}};U._waitSnapshotComplete=async function(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}};
U._fetch=async function(Y){const {url:M,customParameters:P}=this._loadOptions;if(!M)throw new R("csv-layer:invalid-source","url not defined");const r=L.urlToObject(M);return(await ka(r.path,{query:{...r.query,...P},responseType:"text",signal:Y})).data};U._createQueryEngine=function(Y){const {objectIdField:M,fields:P,extent:r,timeInfo:v}=Y.layerDefinition;Y=new e({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new z.QueryEngine({fields:P,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,
timeInfo:v,objectIdField:M,spatialReference:r.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:Y})};U._createFeatures=async function(Y){const {latitudeFieldName:M,longitudeFieldName:P}=this._locationInfo,{objectIdField:r,fieldsIndex:v,spatialReference:Z}=this._queryEngine;let ja=[];const ta=[];var xa=v.fields.filter(Oa=>Oa.name!==r).map(Oa=>Oa.name),Ca=0,Ga={};for(const Oa of v.fields)if("esriFieldTypeOID"!==Oa.type&&"esriFieldTypeGlobalID"!==Oa.type){const Sa=J.getFieldDefaultValue(Oa);
void 0!==Sa&&(Ga[Oa.name]=Sa)}Y=O.parseRows(Y,xa,this._delimiter,C.createDefaultAttributesFunction(Ga,r));for(var Ha of Y)if(Y=this._parseCoordinateValue(Ha[M]),xa=this._parseCoordinateValue(Ha[P]),null!=xa&&null!=Y&&!isNaN(Y)&&!isNaN(xa)){Ha[M]=Y;Ha[P]=xa;for(var Fa in Ha)Fa!==M&&Fa!==P&&(v.isDateField(Fa)?(Ga=new Date(Ha[Fa]),Ha[Fa]=O.isValidDate(Ga,Ha[Fa])?Ga.getTime():null):v.isNumericField(Fa)&&(Ga=O.parseNumber(Ha[Fa]),isNaN(Ga)?Ha[Fa]=null:Ha[Fa]=Ga));Ha[r]=Ca;Ca++;ja.push(new B(xa,Y));ta.push(Ha)}if(!k.equals({wkid:4326},
Z))if(k.isWebMercator(Z))for(const Oa of ja)[Oa.x,Oa.y]=H.lngLatToXY(Oa.x,Oa.y,x);else ja=h.projectMany(m.jsonAdapter,ja,Q.WGS84,Z,null,null);Ca=[];for(Ha=0;Ha<ja.length;Ha++){const {x:Oa,y:Sa}=ja[Ha];Fa=ta[Ha];Fa[r]=Ha+1;Ca.push(new A.OptimizedFeature(new K([],[Oa,Sa]),Fa,null,Fa[r]))}return Ca};U._parseCoordinateValue=function(Y){if(null==Y||""===Y)return null;let M=O.parseNumber(Y);if(isNaN(M)||181<Math.abs(M))M=parseFloat(Y);return M};U._checkProjection=async function(Y){try{await n.checkProjectionSupport(k.WGS84,
Y)}catch{throw new R("csv-layer:projection-not-supported","Projection not supported");}};return l._createClass(E)}()});