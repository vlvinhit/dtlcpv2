// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(m,f,la,ba,P,ha,W,J,h,k){function q(l,G){return l?G?4:3:G?3:2}function O(l,G,T,U){if(l){if(T)return G&&U?n:db;if(G&&U)return c}else if(G&&U)return db;return jb}function C({scale:l,
translate:G},T){return Math.round((T-G[0])/l[0])}function S({scale:l,translate:G},T){return Math.round((G[1]-T)/l[1])}function e({scale:l,translate:G},T,U){return T*l[U]+G[U]}function p(l){l=l.coords;return{x:l[0],y:l[1]}}function E(l,G){l.coords[0]=G.x;l.coords[1]=G.y;return l}function Q(l){l=l.coords;return{x:l[0],y:l[1],z:l[2]}}function H(l,G){l.coords[0]=G.x;l.coords[1]=G.y;l.coords[2]=G.z;return l}function v(l){l=l.coords;return{x:l[0],y:l[1],m:l[2]}}function F(l,G){l.coords[0]=G.x;l.coords[1]=
G.y;l.coords[2]=G.m;return l}function L(l){l=l.coords;return{x:l[0],y:l[1],z:l[2],m:l[3]}}function x(l,G){l.coords[0]=G.x;l.coords[1]=G.y;l.coords[2]=G.z;l.coords[3]=G.m;return l}function y(l,G){return l&&G?x:l?H:G?F:E}function A(l,G,T,U,ea){T=y(T,U);for(const {geometry:na,attributes:pa}of G)G=null!=na?T(new k,na):null,l.push(new J.OptimizedFeature(G,pa,null,ea?pa[ea]:void 0));return l}function w(l,G,T,U){for(const {geometry:ea,attributes:na}of G)l.push({attributes:na,geometry:null!=ea?z(ea,T,U):
null});return l}function z(l,G,T){if(null==l)return null;const U=q(G,T),ea=[];for(let na=0;na<l.coords.length;na+=U){const pa=[];for(let sa=0;sa<U;sa++)pa.push(l.coords[na+sa]);ea.push(pa)}return G?T?{points:ea,hasZ:G,hasM:T}:{points:ea,hasZ:G}:T?{points:ea,hasM:T}:{points:ea}}function I(l,G,T,U,ea){T=q(T,U);for(const {geometry:na,attributes:pa}of G)G=null!=na?Y(new k,na,T):null,l.push(new J.OptimizedFeature(G,pa,null,ea?pa[ea]:void 0));return l}function Y(l,G,T=q(G.hasZ,G.hasM)){l.lengths[0]=G.points.length;
const U=l.coords;let ea=0;for(const na of G.points)for(G=0;G<T;G++)U[ea++]=na[G];return l}function ia(l,G,T){if(!l)return null;const U=q(G,T),{coords:ea,lengths:na}=l;l=[];let pa=0;for(const sa of na){const ua=[];for(let Da=0;Da<sa;Da++){const za=[];for(let ya=0;ya<U;ya++)za.push(ea[pa++]);ua.push(za)}l.push(ua)}return G?T?{paths:l,hasZ:G,hasM:T}:{paths:l,hasZ:G}:T?{paths:l,hasM:T}:{paths:l}}function N(l,G,T,U,ea){T=q(T,U);for(const {geometry:na,attributes:pa}of G)G=null!=na?M(new k,na,T):null,l.push(new J.OptimizedFeature(G,
pa,null,ea?pa[ea]:void 0));return l}function M(l,G,T=q(G.hasZ,G.hasM)){const {lengths:U,coords:ea}=l;let na=0;for(const pa of G.paths){for(const sa of pa)for(G=0;G<T;G++)ea[na++]=sa[G];U.push(pa.length)}return l}function r(l,G,T){if(!l)return null;const U=q(G,T),{coords:ea,lengths:na}=l;l=[];let pa=0;for(const sa of na){const ua=[];for(let Da=0;Da<sa;Da++){const za=[];for(let ya=0;ya<U;ya++)za.push(ea[pa++]);ua.push(za)}l.push(ua)}return G?T?{rings:l,hasZ:G,hasM:T}:{rings:l,hasZ:G}:T?{rings:l,hasM:T}:
{rings:l}}function u(l,G,T,U,ea){for(const {geometry:na,centroid:pa,attributes:sa}of G){G=null!=na?V(new k,na,T,U):null;const ua=ea?sa[ea]:void 0;null!=pa?l.push(new J.OptimizedFeature(G,sa,E(new k,pa),ua)):l.push(new J.OptimizedFeature(G,sa,null,ua))}return l}function V(l,G,T=G.hasZ,U=G.hasM){return ja(l,G.rings,T,U)}function ja(l,G,T,U){T=q(T,U);const {lengths:ea,coords:na}=l;U=0;Sa(l);for(const pa of G){for(const sa of pa)for(G=0;G<T;G++)na[U++]=sa[G];ea.push(pa.length)}return l}function va(l,
G,T,U,ea,na){Va(l);if(!T){for(const pa of G)l.push(new J.OptimizedFeature(null,pa.attributes,null,na?pa.attributes[na]:void 0));return l}switch(T){case "esriGeometryPoint":return A(l,G,U,ea,na);case "esriGeometryMultipoint":return I(l,G,U,ea,na);case "esriGeometryPolyline":return N(l,G,U,ea,na);case "esriGeometryPolygon":return u(l,G,U,ea,na);default:eb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${T}'`)),Va(l)}return l}function Ba(l,G,T,U){l=l&&("coords"in
l?l:l.geometry);if(null==l)return null;switch(G){case "esriGeometryPoint":return G=p,T&&U?G=L:T?G=Q:U&&(G=v),G(l);case "esriGeometryMultipoint":return z(l,T,U);case "esriGeometryPolyline":return ia(l,T,U);case "esriGeometryPolygon":return r(l,T,U);default:return eb.error("convertToGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${G}'`)),null}}function Ea(l,G,T,U,ea){Va(l);if(null==T){for(const pa of G)l.push({attributes:pa.attributes});return l}switch(T){case "esriGeometryPoint":T=
p;U&&ea?T=L:U?T=Q:ea&&(T=v);for(var na of G){const {geometry:pa,attributes:sa}=na;U=null!=pa?T(pa):null;l.push({attributes:sa,geometry:U})}break;case "esriGeometryMultipoint":return w(l,G,U,ea);case "esriGeometryPolyline":for(const {geometry:pa,attributes:sa}of G)l.push({attributes:sa,geometry:null!=pa?ia(pa,U,ea):null});break;case "esriGeometryPolygon":for(const {geometry:pa,attributes:sa,centroid:ua}of G)na=null!=pa?r(pa,U,ea):null,null!=ua?(G=p(ua),l.push({attributes:sa,centroid:G,geometry:na})):
l.push({attributes:sa,geometry:na});break;default:eb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${T}'`))}return l}function Fa(l,G,T,U,ea,na,pa=T,sa=U){Sa(l);if(null==G||!G.coords.length)return null;ea=kb[ea];const {coords:ua,lengths:Da}=G;G=q(T,U);const za=q(T&&pa,U&&sa);T=O(T,U,pa,sa);if(!Da.length)return T(l.coords,ua,0,0,C(na,ua[0]),S(na,ua[1])),Sa(l,G,0),l;let ya,Qa=0,Ka,Oa=0;for(const Pa of Da){if(Pa<ea)continue;let Ja=0;Ka=Oa;sa=U=C(na,ua[Qa]);
ya=pa=S(na,ua[Qa+1]);T(l.coords,ua,Ka,Qa,sa,ya);Ja++;Qa+=G;Ka+=za;for(let Ra=1;Ra<Pa;Ra++,Qa+=G)if(sa=C(na,ua[Qa]),ya=S(na,ua[Qa+1]),sa!==U||ya!==pa)T(l.coords,ua,Ka,Qa,sa-U,ya-pa),Ka+=za,Ja++,U=sa,pa=ya;Ja>=ea&&(l.lengths.push(Ja),Oa=Ka)}Va(l.coords,Oa);return l.coords.length?l:null}function Ma(l,G,T,U,ea,na,pa){let sa=U,ua=0;for(let za=na+T;za<pa;za+=T){var Da=G[za];const ya=G[za+1],Qa=G[pa],Ka=G[pa+1];let Oa=G[na],Pa=G[na+1],Ja=Qa-Oa,Ra=Ka-Pa;if(0!==Ja||0!==Ra){const Wa=((Da-Oa)*Ja+(ya-Pa)*Ra)/
(Ja*Ja+Ra*Ra);1<Wa?(Oa=Qa,Pa=Ka):0<Wa&&(Oa+=Ja*Wa,Pa+=Ra*Wa)}Ja=Da-Oa;Ra=ya-Pa;Da=Ja*Ja+Ra*Ra;Da>sa&&(ua=za,sa=Da)}sa>U&&(ua-na>T&&Ma(l,G,T,U,ea,na,ua),ea(l,G,l.length,ua,G[ua],G[ua+1]),pa-ua>T&&Ma(l,G,T,U,ea,ua,pa))}function Ha(l,G,T,U,ea){const {coords:na,lengths:pa}=G;T=q(T,U);if(!na.length)return l!==G&&Sa(l),l;ba.assertIsSome(ea);const {originPosition:sa,scale:ua,translate:Da}=ea;ea=aa;ea.originPosition=sa;U=ea.scale;U[0]=ua[0]??1;U[1]=-(ua[1]??1);U[2]=ua[2]??1;U[3]=ua[3]??1;var za=ea.translate;
za[0]=Da[0]??0;za[1]=Da[1]??0;za[2]=Da[2]??0;za[3]=Da[3]??0;if(!pa.length){for(U=0;U<T;++U)l.coords[U]=e(ea,na[U],U);l!==G&&Sa(l,T,0);return l}za=0;for(let Qa=0;Qa<pa.length;Qa++){const Ka=pa[Qa];l.lengths[Qa]=Ka;for(var ya=0;ya<T;++ya)l.coords[za+ya]=e(ea,na[za+ya],ya);ya=l.coords[za];let Oa=l.coords[za+1];za+=T;for(let Pa=1;Pa<Ka;Pa++,za+=T){ya+=na[za]*U[0];Oa+=na[za+1]*U[1];l.coords[za]=ya;l.coords[za+1]=Oa;for(let Ja=2;Ja<T;++Ja)l.coords[za+Ja]=e(ea,na[za+Ja],Ja)}}l!==G&&Sa(l,na.length,pa.length);
return l}function Ua(l,G,T,U){let ea=0,na=l[U*G],pa=l[U*(G+1)];for(let sa=1;sa<T;sa++){const ua=na+l[U*(G+sa)],Da=pa+l[U*(G+sa)+1],za=(ua-na)*(Da+pa);na=ua;pa=Da;ea+=za}return.5*ea}function Sa(l,G=0,T=0){Va(l.lengths,T);Va(l.coords,G)}function Va(l,G=0){l.length!==G&&(l.length=G)}const eb=la.getLogger("esri.layers.graphics.featureConversionUtils"),kb={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},jb=(l,G,T,U,ea,na)=>{l[T]=ea;l[T+
1]=na},db=(l,G,T,U,ea,na)=>{l[T]=ea;l[T+1]=na;l[T+2]=G[U+2]},c=(l,G,T,U,ea,na)=>{l[T]=ea;l[T+1]=na;l[T+2]=G[U+3]},n=(l,G,T,U,ea,na)=>{l[T]=ea;l[T+1]=na;l[T+2]=G[U+2];l[T+3]=G[U+3]},da=[],B=[],aa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};m.convertFromFeature=function(l,G,T,U,ea){da[0]=l;[l]=va(B,da,G,T,U,ea);Va(da);Va(B);return l};m.convertFromFeatureSet=function(l,G){const T=new h,{hasM:U,hasZ:ea,features:na,objectIdFieldName:pa,spatialReference:sa,geometryType:ua,exceededTransferLimit:Da,
transform:za,fields:ya}=l;ya&&(T.fields=ya);T.geometryType=ua??null;T.objectIdFieldName=pa??G??null;T.spatialReference=sa??null;if(!T.objectIdFieldName)return eb.error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),T;na&&va(T.features,na,ua,ea,U,T.objectIdFieldName);Da&&(T.exceededTransferLimit=Da);U&&(T.hasM=U);ea&&(T.hasZ=ea);za&&(T.transform=za);return T};m.convertFromFeatures=va;m.convertFromGeometry=function(l,G,T){if(null==l)return null;const U=new k;"hasZ"in
l&&null==G&&(G=l.hasZ);"hasM"in l&&null==T&&(T=l.hasM);if(W.isPoint(l))return y(null!=G?G:null!=l.z,null!=T?T:null!=l.m)(U,l);if(W.isPolygon(l))return V(U,l,G,T);if(W.isPolyline(l))return M(U,l,q(G,T));if(W.isMultipoint(l))return Y(U,l,q(G,T));eb.error("convertFromGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${l}'`))};m.convertFromGraphics=function(l,G,T,U,ea,na){const pa=l.length;switch(T){case "esriGeometryPoint":A(l,G,U,ea,na);break;case "esriGeometryMultipoint":I(l,
G,U,ea,na);break;case "esriGeometryPolyline":N(l,G,U,ea,na);break;case "esriGeometryPolygon":u(l,G,U,ea,na);break;default:eb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${T}'`))}for(U=0;U<G.length;U++)l[U+pa].geometryType=T,l[U+pa].insertAfter=G[U].insertAfter,l[U+pa].groupId=G[U].groupId;return l};m.convertFromMultipoint=Y;m.convertFromMultipointFeatures=I;m.convertFromNestedArray=ja;m.convertFromPoint=function(l,G,T=y(null!=G.z,null!=G.m)){return T(l,
G)};m.convertFromPointFeatures=A;m.convertFromPolygon=V;m.convertFromPolyline=M;m.convertFromPolylineFeatures=N;m.convertToFeature=function(l,G,T,U){B[0]=l;Ea(da,B,G,T,U);l=da[0];Va(da);Va(B);return l};m.convertToFeatureSet=function(l){const {objectIdFieldName:G,spatialReference:T,transform:U,fields:ea,hasM:na,hasZ:pa,features:sa,geometryType:ua,exceededTransferLimit:Da,uniqueIdField:za,queryGeometry:ya,queryGeometryType:Qa}=l;l=Ea([],sa,ua,pa,na);const Ka=Ba(ya,Qa,!1,!1);l={features:l,fields:ea,
geometryType:ua,objectIdFieldName:G,spatialReference:T,uniqueIdField:za,queryGeometry:Ka};U&&(l.transform=U);Da&&(l.exceededTransferLimit=Da);na&&(l.hasM=na);pa&&(l.hasZ=pa);return l};m.convertToFeatures=Ea;m.convertToGeometry=Ba;m.convertToMultipoint=z;m.convertToMultipointFeatures=w;m.convertToPoint=function(l,G,T){return l?G?T?L(l):Q(l):T?v(l):p(l):null};m.convertToPolygon=r;m.convertToPolyline=ia;m.deltaDecodeGeometry=function(l,G){if(null==l)return null;const T=l.clone(),U=l.coords;l=l.lengths;
let ea=0;for(let sa=0;sa<l.length;sa++){const ua=l[sa];var na=U[G*ea],pa=U[G*ea+1];for(let Da=1;Da<ua;Da++)na+=U[G*(ea+Da)],pa+=U[G*(ea+Da)+1],T.coords[G*(ea+Da)]=na,T.coords[G*(ea+Da)+1]=pa;ea+=ua}return T};m.deltaEncodeGeometry=function(l,G){const T=l.clone(),U=l.coords;l=l.lengths;let ea=0;for(let pa=0;pa<l.length;pa++){const sa=l[pa];let ua=U[G*ea];var na=U[G*ea+1];for(let Da=1;Da<sa;Da++){const za=U[G*(ea+Da)],ya=U[G*(ea+Da)+1];na=ya-na;T.coords[G*(ea+Da)]=za-ua;T.coords[G*(ea+Da)+1]=na;ua=za;
na=ya}ea+=sa}return T};m.generalizeOptimizedGeometry=function(l,G,T,U,ea,na,pa=T,sa=U){Sa(l);if(!G||!G.coords.length)return null;ea=kb[ea];const {coords:ua,lengths:Da}=G;G=q(T,U);const za=q(T&&pa,U&&sa);T=O(T,U,pa,sa);if(!Da.length)return T(l.coords,ua,0,0,ua[0],ua[1]),Sa(l,G,0),l;U=0;na*=na;for(const ya of Da){if(ya<ea){U+=ya*G;continue}pa=l.coords.length/za;sa=U;const Qa=U+(ya-1)*G;T(l.coords,ua,l.coords.length,sa,ua[sa],ua[sa+1]);Ma(l.coords,ua,G,na,T,sa,Qa);T(l.coords,ua,l.coords.length,Qa,ua[Qa],
ua[Qa+1]);sa=l.coords.length/za-pa;sa>=ea?l.lengths.push(sa):Va(l.coords,pa*za);U+=ya*G}return l.coords.length?l:null};m.getBoundsOptimizedGeometry=function(l,G,T,U){if(null==G||!G.coords||!G.coords.length)return null;T=q(T,U);let ea=U=Number.POSITIVE_INFINITY,na=Number.NEGATIVE_INFINITY,pa=Number.NEGATIVE_INFINITY;if(G&&G.coords){G=G.coords;for(let sa=0;sa<G.length;sa+=T){const ua=G[sa],Da=G[sa+1];U=Math.min(U,ua);na=Math.max(na,ua);ea=Math.min(ea,Da);pa=Math.max(pa,Da)}}P.is(l)?P.fromRectValues(l,
U,ea,na,pa):ha.fromValues(U,ea,na,pa,l);return l};m.getQuantizedArea=function(l,G){const {coords:T,lengths:U}=l;let ea=l=0;for(let na=0;na<U.length;na++){const pa=U[na];ea+=Ua(T,l,pa,G);l+=pa}return Math.abs(ea)};m.getQuantizedBoundsOptimizedGeometry=function(l,G,T,U){T=q(T,U);const {lengths:ea,coords:na}=G;U=G=Number.POSITIVE_INFINITY;let pa=Number.NEGATIVE_INFINITY,sa=Number.NEGATIVE_INFINITY,ua=0;for(const Da of ea){let za=na[ua],ya=na[ua+1];G=Math.min(za,G);U=Math.min(ya,U);pa=Math.max(za,pa);
sa=Math.max(ya,sa);ua+=T;for(let Qa=1;Qa<Da;Qa++,ua+=T){const Ka=na[ua],Oa=na[ua+1];za+=Ka;ya+=Oa;0>Ka&&(G=Math.min(G,za));0<Ka&&(pa=Math.max(pa,za));0>Oa?U=Math.min(U,ya):0<Oa&&(sa=Math.max(sa,ya))}}l[0]=G;l[1]=U;l[2]=pa;l[3]=sa;return l};m.getSignedQuantizedRingArea=Ua;m.quantizeOptimizedFeatureSet=function(l,G){const {geometryType:T,features:U,hasM:ea,hasZ:na}=G;if(!l)return G;for(let pa=0;pa<U.length;pa++){const sa=U[pa],ua=sa.weakClone();ua.geometry=new k;Fa(ua.geometry,sa.geometry,ea,na,T,l);
sa.centroid&&(ua.centroid=new k,Fa(ua.centroid,sa.centroid,ea,na,"esriGeometryPoint",l));U[pa]=ua}G.transform=l;return G};m.quantizeOptimizedGeometry=Fa;m.quantizeX=C;m.quantizeY=S;m.removeCollinearVectices=function(l,G,T,U,ea){if(!G||!G.coords||!G.coords.length)return null;T=kb[T];const {coords:na,lengths:pa}=G;G=O(U,ea,U,ea);U=q(U,ea);let sa=ea=0,ua=0,Da=0;for(const Qa of pa){sa=Da;G(l.coords,na,sa,ea,na[ea],na[ea+1]);ea+=U;var za=na[ea];let Ka=na[ea+1],Oa=za,Pa=Ka;var ya=Ka/za;sa+=U;G(l.coords,
na,sa,ea,Oa,Pa);ea+=U;for(let Ja=2;Ja<Qa;Ja++){za=na[ea];Ka=na[ea+1];const Ra=Ka/za,Wa=ya===Ra||!isFinite(ya)&&!isFinite(Ra);ya=Wa&&isFinite(Ra)?0<=ya&&0<=Ra||0>=ya&&0>=Ra:0<=Pa&&0<=Ka||0>=Pa&&0>=Ka;Wa&&ya?(Oa+=za,Pa+=Ka):(Oa=za,Pa=Ka,sa+=U);G(l.coords,na,sa,ea,Oa,Pa);ea+=U;ya=Ra}sa+=U;za=(sa-Da)/U;za>=T&&(l.lengths[ua]=za,Da=sa,ua++)}l.coords.length>Da&&(l.coords.length=Da);l.lengths.length>ua&&(l.lengths.length=ua);return l.coords.length&&l.lengths.length?l:null};m.removeZMValues=function(l,G,T,
U,ea,na){Sa(l);l.lengths.push(...G.lengths);if(T===ea&&U===na)for(var pa=0;pa<G.coords.length;pa++)l.coords.push(G.coords[pa]);else for(pa=q(T,U),T=O(T,U,ea,na),G=G.coords,U=0;U<G.length;U+=pa)T(l.coords,G,l.coords.length,U,G[U],G[U+1]);return l};m.unquantizeOptimizedFeatureSet=function(l){const {transform:G,features:T,hasM:U,hasZ:ea}=l;if(!G)return l;for(const na of T)null!=na.geometry&&Ha(na.geometry,na.geometry,U,ea,G),null!=na.centroid&&Ha(na.centroid,na.centroid,U,ea,G);l.transform=null;return l};
m.unquantizeOptimizedGeometry=Ha;m.unquantizeValue=e;m.unquantizeX=function(l,G){return e(l,G,0)};m.unquantizeY=function(l,G){return e(l,-G,1)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],function(m,f,la){function ba(e=C){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function P(e,p,E,Q,H,v,F=ba()){F[0]=e;F[1]=p;F[2]=E;F[3]=Q;F[4]=H;F[5]=v;return F}function ha(e){return e[0]>=e[3]?0:e[3]-
e[0]}function W(e){return e[1]>=e[4]?0:e[4]-e[1]}function J(e){return e[2]>=e[5]?0:e[5]-e[2]}function h(e,p){return Math.max(p[0],e[0])<=Math.min(p[3],e[3])&&Math.max(p[1],e[1])<=Math.min(p[4],e[4])&&Math.max(p[2],e[2])<=Math.min(p[5],e[5])}function k(e,p){e[0]=p[0];e[1]=p[1];e[2]=p[2];e[3]=p[3];e[4]=p[4];e[5]=p[5];return e}function q(e){return 6===e.length}const O=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],C=[0,0,0,0,0,0],S=ba();m.NEGATIVE_INFINITY=O;m.POSITIVE_INFINITY=[-Infinity,
-Infinity,-Infinity,Infinity,Infinity,Infinity];m.ZERO=C;m.allFinite=function(e){for(let p=0;6>p;p++)if(!isFinite(e[p]))return!1;return!0};m.center=function(e,p=[0,0,0]){p[0]=e[0]+ha(e)/2;p[1]=e[1]+W(e)/2;p[2]=e[2]+J(e)/2;return p};m.contains=function(e,p){return p[0]>=e[0]&&p[1]>=e[1]&&p[2]>=e[2]&&p[3]<=e[3]&&p[4]<=e[4]&&p[5]<=e[5]};m.containsPoint=function(e,p){return p[0]>=e[0]&&p[1]>=e[1]&&p[2]>=e[2]&&p[0]<=e[3]&&p[1]<=e[4]&&p[2]<=e[5]};m.containsPointWithMargin=function(e,p,E){return p[0]>=e[0]-
E&&p[1]>=e[1]-E&&p[2]>=e[2]-E&&p[0]<=e[3]+E&&p[1]<=e[4]+E&&p[2]<=e[5]+E};m.create=ba;m.depth=W;m.diameter=function(e){const p=ha(e),E=J(e);e=W(e);return Math.sqrt(p*p+E*E+e*e)};m.empty=function(e){return e?k(e,O):ba(O)};m.equals=function(e,p,E){if(null==e||null==p)return e===p;if(!q(e)||!q(p))return!1;if(E)for(let Q=0;Q<e.length;Q++){if(!E(e[Q],p[Q]))return!1}else for(E=0;E<e.length;E++)if(e[E]!==p[E])return!1;return!0};m.expandWithAABB=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);
e[2]=Math.min(e[2],p[2]);e[3]=Math.max(e[3],p[3]);e[4]=Math.max(e[4],p[4]);e[5]=Math.max(e[5],p[5])};m.expandWithBuffer=function(e,p,E=0,Q=p.length/3){let H=e[0],v=e[1],F=e[2],L=e[3],x=e[4],y=e[5];for(let A=0;A<Q;A++)H=Math.min(H,p[E+3*A]),v=Math.min(v,p[E+3*A+1]),F=Math.min(F,p[E+3*A+2]),L=Math.max(L,p[E+3*A]),x=Math.max(x,p[E+3*A+1]),y=Math.max(y,p[E+3*A+2]);e[0]=H;e[1]=v;e[2]=F;e[3]=L;e[4]=x;e[5]=y};m.expandWithNestedArray=function(e,p,E){const Q=p.length;let H=e[0],v=e[1],F=e[2],L=e[3],x=e[4],
y=e[5];if(E)for(E=0;E<Q;E++){var A=p[E];H=Math.min(H,A[0]);v=Math.min(v,A[1]);F=Math.min(F,A[2]);L=Math.max(L,A[0]);x=Math.max(x,A[1]);y=Math.max(y,A[2])}else for(E=0;E<Q;E++)A=p[E],H=Math.min(H,A[0]),v=Math.min(v,A[1]),L=Math.max(L,A[0]),x=Math.max(x,A[1]);e[0]=H;e[1]=v;e[2]=F;e[3]=L;e[4]=x;e[5]=y};m.expandWithOffset=function(e,p,E,Q){e[0]=Math.min(e[0],e[0]+p);e[3]=Math.max(e[3],e[3]+p);e[1]=Math.min(e[1],e[1]+E);e[4]=Math.max(e[4],e[4]+E);e[2]=Math.min(e[2],e[2]+Q);e[5]=Math.max(e[5],e[5]+Q)};
m.expandWithRect=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[3]=Math.max(e[3],p[2]);e[4]=Math.max(e[4],p[3])};m.expandWithVec3=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[2]=Math.min(e[2],p[2]);e[3]=Math.max(e[3],p[0]);e[4]=Math.max(e[4],p[1]);e[5]=Math.max(e[5],p[2])};m.fromExtent=function(e,p=ba()){p[0]=e.xmin;p[1]=e.ymin;p[2]=e.hasZ?e.zmin:-Infinity;p[3]=e.xmax;p[4]=e.ymax;p[5]=e.hasZ?e.zmax:Infinity;return p};m.fromMinMax=function(e,p,E=ba()){E[0]=e[0];
E[1]=e[1];E[2]=e[2];E[3]=p[0];E[4]=p[1];E[5]=p[2];return E};m.fromRect=function(e,p){e[0]=p[0];e[1]=p[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=p[2];e[4]=p[3];e[5]=Number.POSITIVE_INFINITY;return e};m.fromRectValues=function(e,p,E,Q,H){e[0]=p;e[1]=E;e[2]=Number.NEGATIVE_INFINITY;e[3]=Q;e[4]=H;e[5]=Number.POSITIVE_INFINITY;return e};m.fromValues=P;m.getMax=function(e,p){p[0]=e[3];p[1]=e[4];p[2]=e[5];return p};m.getMin=function(e,p){p[0]=e[0];p[1]=e[1];p[2]=e[2];return p};m.height=J;m.intersects=h;m.intersectsClippingArea=
function(e,p){return null==p?!0:h(e,p)};m.is=q;m.isPoint=function(e){return 0===ha(e)&&0===W(e)&&0===J(e)};m.maximumDimension=function(e){return Math.max(ha(e),J(e),W(e))};m.offset=function(e,p,E,Q,H=e){H[0]=e[0]+p;H[1]=e[1]+E;H[2]=e[2]+Q;H[3]=e[3]+p;H[4]=e[4]+E;H[5]=e[5]+Q;return H};m.scale=function(e,p,E=e){const Q=e[0]+ha(e)/2,H=e[1]+W(e)/2,v=e[2]+J(e)/2;E[0]=Q+(e[0]-Q)*p;E[1]=H+(e[1]-H)*p;E[2]=v+(e[2]-v)*p;E[3]=Q+(e[3]-Q)*p;E[4]=H+(e[4]-H)*p;E[5]=v+(e[5]-v)*p;return E};m.set=k;m.setMax=function(e,
p,E=e){E[3]=p[0];E[4]=p[1];E[5]=p[2];E!==e&&(E[0]=e[0],E[1]=e[1],E[2]=e[2]);return e};m.setMin=function(e,p,E=e){E[0]=p[0];E[1]=p[1];E[2]=p[2];E!==e&&(E[3]=e[3],E[4]=e[4],E[5]=e[5]);return E};m.size=function(e,p=[0,0,0]){p[0]=ha(e);p[1]=W(e);p[2]=J(e);return p};m.toExtent=function(e,p){return isFinite(e[2])||isFinite(e[5])?new f({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:p}):new f({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:p})};m.toRect=function(e,
p){p||(p=la.create());p[0]=e[0];p[1]=e[1];p[2]=e[3];p[3]=e[4];return p};m.width=ha;m.wrap=function(e,p,E,Q,H,v){return P(e,p,E,Q,H,v,S)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(m,f){let la=function(){function P(ha=null,W={},J,h){this.geometry=ha;this.attributes=W;this.centroid=J;this.objectId=h;this.geohashY=this.geohashX=this.displayId=0}P.prototype.weakClone=
function(){const ha=new P(this.geometry,this.attributes,this.centroid,this.objectId);ha.displayId=this.displayId;ha.geohashX=this.geohashX;ha.geohashY=this.geohashY;return ha};return f._createClass(P)}(),ba=function(P){function ha(){return P.apply(this,arguments)||this}f._inherits(ha,P);return f._createClass(ha)}(la);m.OptimizedFeature=la;m.OptimizedFeatureWithGeometry=ba;m.hasGeometry=function(P){return!(null==P.geometry||!P.geometry.coords||!P.geometry.coords.length)};Object.defineProperty(m,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(m){return function(){function f(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}f.prototype.weakClone=function(){const la=
new f;la.objectIdFieldName=this.objectIdFieldName;la.globalIdFieldName=this.globalIdFieldName;la.geohashFieldName=this.geohashFieldName;la.geometryProperties=this.geometryProperties;la.geometryType=this.geometryType;la.spatialReference=this.spatialReference;la.hasZ=this.hasZ;la.hasM=this.hasM;la.features=this.features;la.fields=this.fields;la.transform=this.transform;la.exceededTransferLimit=this.exceededTransferLimit;la.uniqueIdField=this.uniqueIdField;la.queryGeometry=this.queryGeometry;la.queryGeometryType=
this.queryGeometryType;return la};return m._createClass(f)}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(m){return function(){function f(ba=[],P=[],ha=!1){this.lengths=ba??[];this.coords=P??[];this.hasIndeterminateRingOrder=ha}f.fromRect=function(ba){const [P,ha,W,J]=ba;ba=W-P;const h=J-ha;return new f([5],[P,ha,ba,0,0,h,-ba,0,0,-h])};var la=f.prototype;la.forEachVertex=function(ba){let P=0;this.lengths.length||ba(this.coords[0],
this.coords[1]);for(let ha=0;ha<this.lengths.length;ha++){const W=this.lengths[ha];for(let J=0;J<W;J++)ba(this.coords[2*(J+P)],this.coords[2*(J+P)+1]);P+=W}};la.clone=function(ba){return ba?(ba.set(this.coords),new f(this.lengths.slice(),ba,this.hasIndeterminateRingOrder)):new f(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};m._createClass(f,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},
{key:"size",get:function(){return this.lengths.reduce((ba,P)=>ba+P)}}]);return f}()})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(m){m.findLastObjectIdFromFeatures=function(f,la){let ba=0;for(const P of la)la=P.attributes?.[f],"number"===typeof la&&isFinite(la)&&(ba=Math.max(ba,la));return ba};m.initialObjectId=1;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),
function(m,f,la,ba,P,ha,W,J,h,k){const q=P.create();return function(){function O(S){this.geometryInfo=S;this._boundsStore=new J.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new la;this.featureAdapter=h.optimizedFeatureQueryEngineAdapter}var C=O.prototype;C.getFullExtent=function(S){if(null==this.fullBounds)return null;const [e,p,E,Q]=this.fullBounds;return{xmin:e,ymin:p,xmax:E,ymax:Q,spatialReference:k.cleanFromGeometryEngine(S)}};C.add=function(S){this._add(S);this._emitChanged()};
C.addMany=function(S){for(const e of S)this._add(e);this._emitChanged()};C.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};C.removeById=function(S){S=this._featuresById.get(S);if(!S)return null;this._remove(S);this._emitChanged();return S};C.removeManyById=function(S){this._boundsStore.invalidateIndex();for(const e of S)(S=this._featuresById.get(e))&&this._remove(S);this._emitChanged()};C.forEachBounds=function(S,e){for(const p of S)(S=this._boundsStore.get(p.objectId))&&
e(P.fromRect(q,S))};C.getFeature=function(S){return this._featuresById.get(S)};C.has=function(S){return this._featuresById.has(S)};C.forEach=function(S){this._featuresById.forEach(e=>S(e))};C.forEachInBounds=function(S,e){this._boundsStore.forEachInBounds(S,p=>{e(this._featuresById.get(p))})};C.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};C.sweep=function(){let S=!1;this._featuresById.forEach((e,p)=>{this._markedIds.has(p)||(S=!0,this._remove(e))});
this._markedIds.clear();S&&this._emitChanged()};C._emitChanged=function(){this.events.emit("changed",void 0)};C._add=function(S){if(S){var e=S.objectId;if(null==e)ba.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:S}));else{var p=this._featuresById.get(e);this._markedIds.add(e);if(p){S.displayId=p.displayId;var E=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(S);
null!=S.geometry&&S.geometry.coords&&S.geometry.coords.length?(E=W.getBoundsOptimizedGeometry(null!=E?E:ha.create(),S.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=E&&this._boundsStore.set(e,E)):this._boundsStore.set(e,null);this._featuresById.set(e,S)}}};C._remove=function(S){if(null!=this.onFeatureRemove)this.onFeatureRemove(S);const e=S.objectId;this._markedIds.delete(e);this._boundsStore.delete(e);this._featuresById.delete(e);return S};m._createClass(O,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},
{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let S=0;this._featuresById.forEach(e=>{null!=e.geometry&&e.geometry.coords&&(S+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:S/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);
return O}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(m,f,la,ba,P){let ha=function(){function W(){this._emitter=new W.EventEmitter(this)}var J=W.prototype;J.emit=function(h,k){return this._emitter.emit(h,k)};J.on=function(h,k){return this._emitter.on(h,k)};J.once=function(h,k){return this._emitter.once(h,k)};J.hasEventListener=function(h){return this._emitter.hasEventListener(h)};
return m._createClass(W)}();(function(W){let J=function(){function k(O=null){this._target=O;this._listenersMap=null}var q=k.prototype;q.clear=function(){this._listenersMap?.clear();this._listenersMap=null};q.destroy=function(){this.clear()};q.emit=function(O,C){O=this._listenersMap&&this._listenersMap.get(O);if(!O)return!1;const S=this._target||this;[...O].forEach(e=>{e.call(S,C)});return 0<O.length};q.on=function(O,C){if(Array.isArray(O)){var S=O.map(e=>this.on(e,C));return ba.handlesGroup(S)}if(O.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);S=this._listenersMap.get(O)||[];S.push(C);this._listenersMap.set(O,S);return{remove:()=>{const e=this._listenersMap&&this._listenersMap.get(O)||[],p=e.indexOf(C);0<=p&&e.splice(p,1)}}};q.once=function(O,C){const S=this.on(O,e=>{S.remove();C.call(null,e)});return S};q.hasEventListener=function(O){O=this._listenersMap&&this._listenersMap.get(O);return null!=O&&0<O.length};return m._createClass(k)}();W.EventEmitter=J;W.EventedMixin=k=>{k=function(q){function O(){var S=
q.apply(this,arguments)||this;S._emitter=new J;return S}m._inherits(O,q);var C=O.prototype;C.destroy=function(){this._emitter.clear()};C.emit=function(S,e){return this._emitter.emit(S,e)};C.on=function(S,e){return this._emitter.on(S,e)};C.once=function(S,e){return this._emitter.once(S,e)};C.hasEventListener=function(S){return this._emitter.hasEventListener(S)};return m._createClass(O)}(k);return k=f.__decorate([P.subclass("esri.core.Evented")],k)};let h=function(k){function q(){var C=k.apply(this,
arguments)||this;C._emitter=new ha.EventEmitter(m._assertThisInitialized(C));return C}m._inherits(q,k);var O=q.prototype;O.destroy=function(){this._emitter.clear()};O.emit=function(C,S){return this._emitter.emit(C,S)};O.on=function(C,S){return this._emitter.on(C,S)};O.once=function(C,S){return this._emitter.once(C,S)};O.hasEventListener=function(C){return this._emitter.hasEventListener(C)};return m._createClass(q)}(la);h=f.__decorate([P.subclass("esri.core.Evented")],h);W.EventedAccessor=h})(ha||
(ha={}));return ha})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(m,f,la,ba,P){function ha(h,k,q){W.minX=k[0];W.minY=k[1];W.maxX=k[2];W.maxY=k[3];h.search(W,q)}const W={minX:0,minY:0,maxX:0,maxY:0};let J=function(){function h(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;
this._index=new ba.PooledRBush(9,la("esri-csp-restrictions")?q=>({minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const q=Array(this._idByBounds.size);let O=0;this._idByBounds.forEach((C,S)=>{q[O++]=S});this._indexInvalid=!1;this._index.clear();this._index.load(q)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(q=>this._idByBounds.has(q))))),this._boundsToLoad.length=0)}}var k=h.prototype;
k.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};k.delete=function(q){const O=this._boundsById.get(q);this._boundsById.delete(q);O&&(this._idByBounds.delete(O),this._indexInvalid||this._index.remove(O))};k.forEachInBounds=function(q,O){this._loadIndex();ha(this._index,q,C=>O(this._idByBounds.get(C)))};k.get=function(q){return this._boundsById.get(q)};k.has=function(q){return this._boundsById.has(q)};k.invalidateIndex=
function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};k.set=function(q,O){if(!this._indexInvalid){const C=this._boundsById.get(q);C&&(this._index.remove(C),this._idByBounds.delete(C))}this._boundsById.set(q,O);O&&(this._idByBounds.set(O,q),this._indexInvalid||(this._boundsToLoad.push(O),5E4<this._boundsToLoad.length&&this._loadIndex()))};f._createClass(h,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const q=P.empty();for(const O of this._boundsById.values())O&&
(q[0]=Math.min(O[0],q[0]),q[1]=Math.min(O[1],q[1]),q[2]=Math.max(O[2],q[2]),q[3]=Math.max(O[3],q[3]));return q}},{key:"valid",get:function(){return!this._indexInvalid}}]);return h}();m.BoundsStore=J;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(m,f,la,ba,P,ha){function W(A,w){J(A,0,
A.children.length,w,A)}function J(A,w,z,I,Y){Y||(Y=new x([]));Y.minX=Infinity;Y.minY=Infinity;Y.maxX=-Infinity;Y.maxY=-Infinity;for(let ia=w,N;ia<z;ia++)N=A.children[ia],h(Y,A.leaf?I(N):N);return Y}function h(A,w){A.minX=Math.min(A.minX,w.minX);A.minY=Math.min(A.minY,w.minY);A.maxX=Math.max(A.maxX,w.maxX);A.maxY=Math.max(A.maxY,w.maxY)}function k(A,w){return A.minX-w.minX}function q(A,w){return A.minY-w.minY}function O(A){return(A.maxX-A.minX)*(A.maxY-A.minY)}function C(A){return A.maxX-A.minX+(A.maxY-
A.minY)}function S(A,w){return A.minX<=w.minX&&A.minY<=w.minY&&w.maxX<=A.maxX&&w.maxY<=A.maxY}function e(A,w){return w.minX<=A.maxX&&w.minY<=A.maxY&&w.maxX>=A.minX&&w.maxY>=A.minY}function p(A,w,z,I,Y){for(w=[w,z];w.length;){z=ba.assumeNonNull(w.pop());const ia=ba.assumeNonNull(w.pop());if(z-ia<=I)continue;const N=ia+Math.ceil((z-ia)/I/2)*I;ha.quickselect(A,N,ia,z,Y);w.push(ia,N,N,z)}}let E=function(){function A(z=9,I){this._compareMinX=k;this._compareMinY=q;this._toBBox=Y=>Y;this._maxEntries=Math.max(4,
z||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));I&&("function"===typeof I?this._toBBox=I:this._initFormat(I));this.clear()}var w=A.prototype;w.destroy=function(){this.clear();Q.prune();H.prune();v.prune();F.prune()};w.all=function(z){this._all(this._data,z)};w.search=function(z,I){let Y=this._data;const ia=this._toBBox;if(e(z,Y))for(Q.clear();Y;){for(let N=0,M=Y.children.length;N<M;N++){const r=Y.children[N],u=Y.leaf?ia(r):r;e(z,u)&&(Y.leaf?I(r):S(z,u)?this._all(r,I):Q.push(r))}Y=
Q.pop()}};w.collides=function(z){let I=this._data;const Y=this._toBBox;if(!e(z,I))return!1;for(Q.clear();I;){for(let ia=0,N=I.children.length;ia<N;ia++){const M=I.children[ia],r=I.leaf?Y(M):M;if(e(z,r)){if(I.leaf||S(z,r))return!0;Q.push(M)}}I=Q.pop()}return!1};w.load=function(z){if(!z.length)return this;if(z.length<this._minEntries){for(let I=0,Y=z.length;I<Y;I++)this.insert(z[I]);return this}z=this._build(z.slice(0,z.length),0,z.length-1,0);if(this._data.children.length)if(this._data.height===z.height)this._splitRoot(this._data,
z);else{if(this._data.height<z.height){const I=this._data;this._data=z;z=I}this._insert(z,this._data.height-z.height-1,!0)}else this._data=z;return this};w.insert=function(z){z&&this._insert(z,this._data.height-1);return this};w.clear=function(){this._data=new x([]);return this};w.remove=function(z){if(!z)return this;let I=this._data,Y=null,ia=0,N=!1,M;const r=this._toBBox(z);v.clear();for(F.clear();I||0<v.length;){I||(I=ba.assumeNonNull(v.pop()),Y=v.data[v.length-1],ia=F.pop()??0,N=!0);if(I.leaf&&
(M=la.indexOf(I.children,z,I.children.length,I.indexHint),-1!==M)){I.children.splice(M,1);v.push(I);this._condense(v);break}N||I.leaf||!S(I,r)?Y?(ia++,I=Y.children[ia],N=!1):I=null:(v.push(I),F.push(ia),ia=0,Y=I,I=I.children[0])}return this};w.toJSON=function(){return this._data};w.fromJSON=function(z){this._data=z;return this};w._all=function(z,I){for(H.clear();z;){if(!0===z.leaf)for(const Y of z.children)I(Y);else H.pushArray(z.children);z=H.pop()??null}};w._build=function(z,I,Y,ia){var N=Y-I+1,
M=this._maxEntries;if(N<=M)return z=new x(z.slice(I,Y+1)),W(z,this._toBBox),z;ia||(ia=Math.ceil(Math.log(N)/Math.log(M)),M=Math.ceil(N/M**(ia-1)));const r=new y([]);r.height=ia;N=Math.ceil(N/M);M=N*Math.ceil(Math.sqrt(M));for(p(z,I,Y,M,this._compareMinX);I<=Y;I+=M){const u=Math.min(I+M-1,Y);p(z,I,u,N,this._compareMinY);for(let V=I;V<=u;V+=N)r.children.push(this._build(z,V,Math.min(V+N-1,u),ia-1))}W(r,this._toBBox);return r};w._chooseSubtree=function(z,I,Y,ia){for(;;){ia.push(I);if(!0===I.leaf||ia.length-
1===Y)break;let N=Infinity,M=Infinity,r=void 0;for(let u=0,V=I.children.length;u<V;u++){const ja=I.children[u],va=O(ja),Ba=(Math.max(ja.maxX,z.maxX)-Math.min(ja.minX,z.minX))*(Math.max(ja.maxY,z.maxY)-Math.min(ja.minY,z.minY))-va;Ba<M?(M=Ba,N=va<N?va:N,r=ja):Ba===M&&va<N&&(N=va,r=ja)}I=r||I.children[0]}return I};w._insert=function(z,I,Y){var ia=this._toBBox;Y=Y?z:ia(z);v.clear();ia=this._chooseSubtree(Y,this._data,I,v);ia.children.push(z);for(h(ia,Y);0<=I;)if(v.data[I].children.length>this._maxEntries)this._split(v,
I),I--;else break;this._adjustParentBBoxes(Y,v,I)};w._split=function(z,I){const Y=z.data[I];var ia=Y.children.length;const N=this._minEntries;this._chooseSplitAxis(Y,N,ia);(ia=this._chooseSplitIndex(Y,N,ia))?(ia=Y.children.splice(ia,Y.children.length-ia),ia=Y.leaf?new x(ia):new y(ia),ia.height=Y.height,W(Y,this._toBBox),W(ia,this._toBBox),I?z.data[I-1].children.push(ia):this._splitRoot(Y,ia)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};w._splitRoot=function(z,
I){this._data=new y([z,I]);this._data.height=z.height+1;W(this._data,this._toBBox)};w._chooseSplitIndex=function(z,I,Y){let ia,N,M=void 0;ia=N=Infinity;for(let u=I;u<=Y-I;u++){var r=J(z,0,u,this._toBBox);const V=J(z,u,Y,this._toBBox),ja=Math.max(0,Math.min(r.maxX,V.maxX)-Math.max(r.minX,V.minX))*Math.max(0,Math.min(r.maxY,V.maxY)-Math.max(r.minY,V.minY));r=O(r)+O(V);ja<ia?(ia=ja,M=u,N=r<N?r:N):ja===ia&&r<N&&(N=r,M=u)}return M};w._chooseSplitAxis=function(z,I,Y){const ia=z.leaf?this._compareMinX:k,
N=z.leaf?this._compareMinY:q,M=this._allDistMargin(z,I,Y,ia);I=this._allDistMargin(z,I,Y,N);M<I&&z.children.sort(ia)};w._allDistMargin=function(z,I,Y,ia){z.children.sort(ia);ia=this._toBBox;var N=J(z,0,I,ia);const M=J(z,Y-I,Y,ia);let r=C(N)+C(M);for(let u=I;u<Y-I;u++){const V=z.children[u];h(N,z.leaf?ia(V):V);r+=C(N)}for(Y=Y-I-1;Y>=I;Y--)N=z.children[Y],h(M,z.leaf?ia(N):N),r+=C(M);return r};w._adjustParentBBoxes=function(z,I,Y){for(;0<=Y;Y--)h(I.data[Y],z)};w._condense=function(z){for(let I=z.length-
1;0<=I;I--){const Y=z.data[I];if(0===Y.children.length)if(0<I){const ia=z.data[I-1],N=ia.children;N.splice(la.indexOf(N,Y,N.length,ia.indexHint),1)}else this.clear();else W(Y,this._toBBox)}};w._initFormat=function(z){const I=["return a"," - b",";"];this._compareMinX=new Function("a","b",I.join(z[0]));this._compareMinY=new Function("a","b",I.join(z[1]));this._toBBox=new Function("a","return {minX: a"+z[0]+", minY: a"+z[1]+", maxX: a"+z[2]+", maxY: a"+z[3]+"};")};return f._createClass(A)}();const Q=
new P,H=new P,v=new P,F=new P({deallocator:void 0});P=f._createClass(function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity});let L=function(A){function w(){var z=A.apply(this,arguments)||this;z.height=1;z.indexHint=new la.PositionHint;return z}f._inherits(w,A);return f._createClass(w)}(P),x=function(A){function w(z){var I=A.call(this)||this;I.children=z;I.leaf=!0;return I}f._inherits(w,A);return f._createClass(w)}(L),y=function(A){function w(z){var I=A.call(this)||this;I.children=
z;I.leaf=!1;return I}f._inherits(w,A);return f._createClass(w)}(L);m.BBox=P;m.PooledRBush=E;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(m,f){var la={exports:{}};la.exports;(function(ba){(function(P){P=P();void 0!==P&&(ba.exports=P)})(function(){function P(J,h,k,q,O){for(;q>k;){if(600<q-k){var C=q-k+1,S=h-k+1,e=Math.log(C),p=.5*Math.exp(2*e/3);e=.5*Math.sqrt(e*p*(C-p)/C)*(0>S-C/2?-1:1);P(J,h,Math.max(k,
Math.floor(h-S*p/C+e)),Math.min(q,Math.floor(h+(C-S)*p/C+e)),O)}C=J[h];S=k;p=q;ha(J,k,h);for(0<O(J[q],C)&&ha(J,k,q);S<p;){ha(J,S,p);S++;for(p--;0>O(J[S],C);)S++;for(;0<O(J[p],C);)p--}0===O(J[k],C)?ha(J,k,p):(p++,ha(J,p,q));p<=h&&(k=p+1);h<=p&&(q=p-1)}}function ha(J,h,k){var q=J[h];J[h]=J[k];J[k]=q}function W(J,h){return J<h?-1:J>h?1:0}return function(J,h,k,q,O){P(J,h,k||0,q||J.length-1,O||W)}})})(la);f=f.getDefaultExportFromCjs(la.exports);m.quickselect=f})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports",
"../centroid","../OptimizedFeature","../OptimizedGeometry"],function(m,f,la,ba){m.optimizedFeatureQueryEngineAdapter={getObjectId(P){return P.objectId},getAttributes(P){return P.attributes},getAttribute(P,ha){return P.attributes[ha]},cloneWithGeometry(P,ha){return new la.OptimizedFeature(ha,P.attributes,null,P.objectId)},getGeometry(P){return P.geometry},getCentroid(P,ha){null==P.centroid&&(P.centroid=f.getCentroidOptimizedGeometry(new ba,P.geometry,ha.hasZ,ha.hasM));return P.centroid}};Object.defineProperty(m,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(m){function f(ba,P,ha,W,J,h,k=1){h=J?h?4:3:h?3:2;let q=ha,O=ha+h,C=0,S=0,e=ha=0,p=0;for(let E=0,Q=W-1;E<Q;E++,q+=h,O+=h){W=P[q];const H=P[q+1],v=P[q+2],F=P[O],L=P[O+1],x=P[O+2];let y=W*L-F*H;e+=y;C+=(W+F)*y;S+=(H+L)*y;J&&(y=W*x-F*v,ha+=(v+x)*y,p+=y);W<ba[0]&&(ba[0]=W);W>ba[1]&&(ba[1]=W);H<ba[2]&&(ba[2]=H);H>ba[3]&&(ba[3]=H);J&&(v<ba[4]&&(ba[4]=v),v>ba[5]&&(ba[5]=v))}0<e*k&&(e*=-1);0<p*k&&
(p*=-1);if(!e)return null;ba=[C,S,.5*e];J&&(ba[3]=ha,ba[4]=.5*p);return ba}function la(ba,P,ha,W,J){J=W?J?4:3:J?3:2;let h=P,k=P+J,q=0,O=0,C=0,S=0;for(let Q=0,H=ha-1;Q<H;Q++,h+=J,k+=J){var e=ba[h];const v=ba[h+1],F=ba[h+2],L=ba[k],x=ba[k+1],y=ba[k+2];if(W){var p=L-e;var E=x-v;const A=y-F;p=Math.sqrt(p*p+E*E+A*A)}else p=L-e,E=x-v,p=Math.sqrt(p*p+E*E);p&&(q+=p,W?(e=[e+.5*(L-e),v+.5*(x-v),F+.5*(y-F)],O+=p*e[0],C+=p*e[1],S+=p*e[2]):(e=[e+.5*(L-e),v+.5*(x-v)],O+=p*e[0],C+=p*e[1]))}return 0<q?W?[O/q,C/q,
S/q]:[O/q,C/q]:0<ha?W?[ba[P],ba[P+1],ba[P+2]]:[ba[P],ba[P+1]]:null}m.getCentroidOptimizedGeometry=function(ba,P,ha,W,J){if(null==P||!P.lengths.length)return null;const h="upperLeft"===J?.originPosition?-1:1;ba.lengths.length&&(ba.lengths.length=0);ba.coords.length&&(ba.coords.length=0);J=ba.coords;const k=[],q=ha?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:O,coords:C}=P,S=ha?W?4:3:W?3:2;let e=0;for(var p of O){const E=f(q,C,e,p,ha,W,h);E&&k.push(E);e+=p*S}k.sort((E,Q)=>{let H=h*E[2]-h*Q[2];0===H&&ha&&(H=E[4]-Q[4]);return H});k.length&&(p=6*k[0][2],J[0]=k[0][0]/p,J[1]=k[0][1]/p,ha&&(p=6*k[0][4],J[2]=0!==p?k[0][3]/p:0),J[0]<q[0]||J[0]>q[1]||J[1]<q[2]||J[1]>q[3]||ha&&(J[2]<q[4]||J[2]>q[5]))&&(J.length=0);if(!J.length)if(P=P.lengths[0]?la(C,0,O[0],ha,W):null)J[0]=P[0],J[1]=P[1],ha&&2<P.length&&
(J[2]=P[2]);else return null;return ba};m.lineCentroid=la;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(m,f,la,ba,P,ha,W,J,h,k,q,O){async function C(y,A,w){if(!y)return null;var {where:z}=y;y.where=z=z&&z.trim();if(!z||/^1 *= *1$/.test(z)||A&&A===z)y.where=null;if(!y.geometry)return y;A=await e(y);y.distance=0;y.units=null;"esriSpatialRelEnvelopeIntersects"===y.spatialRel&&({spatialReference:z}=y.geometry,A=ha.getGeometryExtent(A),A.spatialReference=z);if(A){await O.checkProjectionSupport(A.spatialReference,w);z=A.spatialReference;A=S(A,w)&&W.isExtent(A)?{spatialReference:z,rings:[[[A.xmin,
A.ymin],[A.xmin,A.ymax],[A.xmax,A.ymax],[A.xmax,A.ymin],[A.xmin,A.ymin]]]}:A;z=(await J.normalizeCentralMeridian(W.fromJSON(A)))[0];if(null==z)throw Q;const I="quantizationParameters"in y&&y.quantizationParameters?.tolerance||"maxAllowableOffset"in y&&y.maxAllowableOffset||0;A=I&&S(A,w)?{densificationStep:8*I}:void 0;z=z.toJSON();A=await O.project(z,z.spatialReference,w,A);if(!A)throw Q;A.spatialReference=w;y.geometry=A}return y}function S(y,A){if(!y)return!1;const w=y.spatialReference;return(W.isExtent(y)||
W.isPolygon(y)||W.isPolyline(y))&&!h.equals(w,A)&&!P.canProjectWithoutEngine(w,A)}async function e(y){const {distance:A,units:w}=y,z=y.geometry;if(null==A||"vertexAttributes"in z)return z;var I=z.spatialReference;y=w?E.fromJSON(w):ba.getUnitString(I);I=I&&(h.isGeographic(I)||h.isWebMercator(I))?z:await O.checkProjectionSupport(I,h.WGS84).then(()=>O.project(z,h.WGS84));return(await p())(I.spatialReference,I,A,y)}async function p(){return(await new Promise((y,A)=>m(["../../../geometry/geometryEngineJSON"],
y,A))).geodesicBuffer}const E=new la.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),Q=Object.freeze({}),H=new q,v=new q,F=new q,L={esriGeometryPoint:k.convertToPoint,esriGeometryPolyline:k.convertToPolyline,esriGeometryPolygon:k.convertToPolygon,esriGeometryMultipoint:k.convertToMultipoint},x=(y,A)=>"_geVersion"!==y?A:void 0;f.QUERY_ENGINE_EMPTY_RESULT=
Q;f.cleanFromGeometryEngine=function(y){return y&&"_geVersion"in y?JSON.parse(JSON.stringify(y,x)):y};f.getGeometry=function(y,A,w,z,I,Y,ia=A,N=w){const M=A&&ia,r=w&&N;z=null!=z?"coords"in z?z:z.geometry:null;if(null==z)return null;if(I)return A=k.generalizeOptimizedGeometry(v,z,A,w,y,I,ia,N),Y&&(A=k.quantizeOptimizedGeometry(F,A,M,r,y,Y)),L[y]?.(A,M,r)??null;if(Y)return Y=k.quantizeOptimizedGeometry(F,z,A,w,y,Y,ia,N),L[y]?.(Y,M,r)??null;k.removeZMValues(H,z,A,w,ia,N);return L[y]?.(H,M,r)??null};
f.normalizeQuery=async function(y,A,w){const {outFields:z,orderByFields:I,groupByFieldsForStatistics:Y,outStatistics:ia}=y;if(z)for(var N=0;N<z.length;N++)z[N]=z[N].trim();if(I)for(N=0;N<I.length;N++)I[N]=I[N].trim();if(Y)for(N=0;N<Y.length;N++)Y[N]=Y[N].trim();if(ia)for(N=0;N<ia.length;N++)ia[N].onStatisticField&&(ia[N].onStatisticField=ia[N].onStatisticField.trim());y.geometry&&!y.outSR&&(y.outSR=y.geometry.spatialReference);return C(y,A,w)};f.normalizeQueryLike=C;f.transformCentroid=function(y,
A,w,z=y.hasZ,I=y.hasM){if(null==A)return null;const Y=y.hasZ&&z,ia=y.hasM&&I;return w?(y=k.quantizeOptimizedGeometry(F,A,y.hasZ,y.hasM,"esriGeometryPoint",w,z,I),k.convertToPoint(y,Y,ia)):k.convertToPoint(A,Y,ia)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(m,f,la,ba,P,ha,W,J,h,k,q,O,C,S,e,p,E,Q,H,v,F,L,x,y,A,w){function z(){return!!hb&&p.isLoaded()}function I(R){null==b&&(b=Promise.all([p.load(),(new Promise((fa,X)=>m(["../chunks/geometryEngineBase"],fa,X))).then(fa=>fa.geometryEngineBase),new Promise((fa,X)=>m(["./geometryAdapters/hydrated"],fa,X))]));return b.then(([,fa,{hydratedAdapter:X}])=>{ha.throwIfAborted(R);lb=X;hb=fa.default;hb._enableProjection(p.pe);Ob.notify()})}function Y(R,fa,X=null,oa=null){return Array.isArray(R)?0===R.length?
[]:ia(lb,R,R[0].spatialReference,fa,X,oa):ia(lb,[R],R.spatialReference,fa,X,oa)[0]}function ia(R,fa,X,oa,Ca=null,Aa=null){if(null==X||null==oa)return fa;if(u(X,oa,Ca))return fa.map(La=>V(La,X,oa));if(null==Ca){const La=x.cacheKey(X,oa);void 0!==fb[La]?Ca=fb[La]:(Ca=M(X,oa,void 0),null==Ca&&(Ca=new x),fb[La]=Ca)}if(null==hb||null==R)throw new Jb;return null!=Aa?hb._project(R,fa,X,oa,Ca,Aa):hb._project(R,fa,X,oa,Ca)}function N(R,fa){if(!z())for(const X of R)if(null!=X&&!y.equals(X.spatialReference,
fa)&&y.isValid(X.spatialReference)&&y.isValid(fa)&&!u(X.spatialReference,fa))return J.trackAccess(Ob),{pending:I(),geometries:null};return{pending:null,geometries:R.map(X=>null==X?null:y.equals(X.spatialReference,fa)?X:y.isValid(X.spatialReference)&&y.isValid(fa)?r(X,fa):null)}}function M(R,fa,X=null){if(null==R||null==fa)return null;if(null==hb||null==lb)throw new Jb;R=hb._getTransformation(lb,R,fa,X,X?.spatialReference);return null!==R?x.fromGE(R):null}function r(R,fa){try{const X=Y(R,fa);if(null==
X)return null;"xmin"in R&&"xmin"in X&&(X.zmin=R.zmin,X.zmax=R.zmax);const oa=w.getGeometryZScaler(X.type,R.spatialReference,fa);null!=oa&&oa(X);return X}catch(X){if(!(X instanceof Jb))throw X;return null}}function u(R,fa,X){return X?!1:y.equals(R,fa)?!0:y.isValid(R)&&y.isValid(fa)&&!!Wa(R,fa,Zb)}function V(R,fa,X){return R?"x"in R?ja(R,fa,new E,X,0):"xmin"in R?Fa(R,fa,new S,X,0):"rings"in R?Ea(R,fa,new Q,X,0):"paths"in R?Ba(R,fa,new H,X,0):"points"in R?va(R,fa,new e,X,0):null:null}function ja(R,fa,
X,oa,Ca){Ya[0]=R.x;Ya[1]=R.y;const Aa=R.z;Ya[2]=void 0!==Aa?Aa:Ca;if(!Sa(Ya,fa,0,Ya,oa,0,1))return null;X.x=Ya[0];X.y=Ya[1];X.spatialReference=oa;void 0===Aa?(X.z=void 0,X.hasZ=!1):(X.z=Ya[2],X.hasZ=!0);void 0===R.m?(X.m=void 0,X.hasM=!1):(X.m=R.m,X.hasM=!0);return X}function va(R,fa,X,oa,Ca){const {points:Aa,hasZ:La,hasM:Ta}=R;R=[];const nb=Aa.length,ob=[];for(var mb of Aa)ob.push(mb[0],mb[1],La?mb[2]:Ca);if(!Sa(ob,fa,0,ob,oa,0,nb))return null;for(fa=0;fa<nb;++fa){Ca=3*fa;mb=ob[Ca];const wb=ob[Ca+
1];La&&Ta?R.push([mb,wb,ob[Ca+2],Aa[fa][3]]):La?R.push([mb,wb,ob[Ca+2]]):Ta?R.push([mb,wb,Aa[fa][2]]):R.push([mb,wb])}X.points=R;X.spatialReference=oa;X.hasZ=La;X.hasM=Ta;return X}function Ba(R,fa,X,oa,Ca){const {paths:Aa,hasZ:La,hasM:Ta}=R;R=[];if(!Va(Aa,La??!1,Ta??!1,fa,R,oa,Ca))return null;X.paths=R;X.spatialReference=oa;X.hasZ=La;X.hasM=Ta;return X}function Ea(R,fa,X,oa,Ca){const {rings:Aa,hasZ:La,hasM:Ta}=R;R=[];if(!Va(Aa,La??!1,Ta??!1,fa,R,oa,Ca))return null;X.rings=R;X.spatialReference=oa;
X.hasZ=La;X.hasM=Ta;return X}function Fa(R,fa,X,oa,Ca){const {xmin:Aa,ymin:La,xmax:Ta,ymax:nb,hasZ:ob,hasM:mb}=R;if(!Ma(Aa,La,ob?R.zmin:Ca,fa,Ya,oa))return null;X.xmin=Ya[0];X.ymin=Ya[1];ob&&(X.zmin=Ya[2]);if(!Ma(Ta,nb,ob?R.zmax:Ca,fa,Ya,oa))return null;X.xmax=Ya[0];X.ymax=Ya[1];ob&&(X.zmax=Ya[2]);mb&&(X.mmin=R.mmin,X.mmax=R.mmax);X.spatialReference=oa;return X}function Ma(R,fa,X,oa,Ca,Aa){ib[0]=R;ib[1]=fa;ib[2]=X;return Sa(ib,oa,0,Ca,Aa,0,1)}function Ha(R,fa,X,oa){if(null==fa||null==oa||2>R.length)return!1;
2===R.length&&(ib[0]=R[0],ib[1]=R[1],ib[2]=0,R=ib);return Sa(R,fa,0,X,oa,0,1)}function Ua(R,fa,X){if(null==fa)return!1;fa=db(fa,Sb);fa=yb[fa][ka.WGS84_COMPARABLE_LON_LAT];if(null==fa)return!1;fa(R,0,ib,0);X!==ib&&(X[0]=ib[0],X[1]=ib[1],2<X.length&&(X[2]=ib[2]));return!0}function Sa(R,fa,X,oa,Ca,Aa,La=1){fa=Wa(fa,Ca,Zb);if(null==fa)return!1;if(fa===c){if(R===oa&&X===Aa)return!0;La=X+3*La;for(let Ta=X,nb=Aa;Ta<La;Ta++,nb++)oa[nb]=R[Ta];return!0}La=X+3*La;for(let Ta=X,nb=Aa;Ta<La;Ta+=3,nb+=3)fa(R,Ta,
oa,nb);return!0}function Va(R,fa,X,oa,Ca,Aa,La=0){const Ta=[];for(const nb of R)for(const ob of nb)Ta.push(ob[0],ob[1],fa?ob[2]:La);if(!Sa(Ta,oa,0,Ta,Aa,0,Ta.length/3))return!1;oa=0;Ca.length=0;for(const nb of R){R=[];for(const ob of nb)fa&&X?R.push([Ta[oa++],Ta[oa++],Ta[oa++],ob[3]]):fa?R.push([Ta[oa++],Ta[oa++],Ta[oa++]]):(X?R.push([Ta[oa++],Ta[oa++],ob[2]]):R.push([Ta[oa++],Ta[oa++]]),oa++);Ca.push(R)}return!0}function eb(R,fa,X,oa){fa=oa+fa;if(fa<oa/2||X>fa)return Number.MAX_VALUE;R=Math.abs(Db*
R)+Math.asin(X/fa);return R>=Math.PI/2?Number.MAX_VALUE:X/Math.cos(R)}function kb(R,fa,X){const oa=Math.sin(R);R=Math.cos(R);const Ca=Math.sin(fa);fa=Math.cos(fa);X[0]=-oa;X[4]=-Ca*R;X[8]=fa*R;X[12]=0;X[1]=R;X[5]=-Ca*oa;X[9]=fa*oa;X[13]=0;X[2]=0;X[6]=fa;X[10]=Ca;X[14]=0;X[3]=0;X[7]=0;X[11]=0;X[15]=1;return X}function jb(R,fa,X){kb(R,fa,X);k.transpose(X,X);return X}function db(R,fa){if(!R)return ka.UNKNOWN;if(fa.spatialReference===R)return fa.spatialReferenceId;fa.spatialReference=R;"metersPerUnit"in
fa&&(fa.metersPerUnit=W.getMetersPerUnitForSR(R,1));return R.wkt===C.SphericalECEFSpatialReferenceLike.wkt?fa.spatialReferenceId=ka.SPHERICAL_ECEF:y.isWGS84(R)?fa.spatialReferenceId=ka.WGS84:y.isWebMercator(R)?fa.spatialReferenceId=ka.WEB_MERCATOR:y.isPlateCarree(R)?fa.spatialReferenceId=ka.PLATE_CARREE:R.wkt===C.WGS84ECEFSpatialReferenceLike.wkt?fa.spatialReferenceId=ka.WGS84_ECEF:R.wkid===A.SupportedGCSWkids.CGCS2000?fa.spatialReferenceId=ka.CGCS2000:R.wkt===C.SphericalPCPFMarsLike.wkt?fa.spatialReferenceId=
ka.SPHERICAL_MARS_PCPF:R.wkt===C.SphericalPCPFMoonLike.wkt?fa.spatialReferenceId=ka.SPHERICAL_MOON_PCPF:y.isMars(R)?fa.spatialReferenceId=ka.GCSMARS2000:y.isMoon(R)?fa.spatialReferenceId=ka.GCSMOON2000:fa.spatialReferenceId=ka.UNKNOWN}function c(R,fa,X,oa){R!==X&&(X[oa++]=R[fa++],X[oa++]=R[fa++],X[oa]=R[fa])}function n(R,fa,X,oa){X[oa++]=Pb*(R[fa++]/F.earth.radius);X[oa++]=Pb*(Math.PI/2-2*Math.atan(Math.exp(-R[fa++]/F.earth.radius)));X[oa]=R[fa]}function da(R,fa,X,oa){n(R,fa,X,oa);sa(X,oa,X,oa)}function B(R,
fa,X,oa){n(R,fa,X,oa);Oa(X,oa,X,oa)}function aa(R,fa,X,oa,Ca){var Aa=.4999999*Math.PI;Aa=P.clamp(Db*R[fa+1],-Aa,Aa);Aa=Math.sin(Aa);X[oa++]=Db*R[fa]*Ca.radius;X[oa++]=Ca.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));X[oa]=R[fa+2]}function l(R,fa,X,oa){aa(R,fa,X,oa,F.earth)}function G(R,fa,X,oa){X[oa]=R[fa]*gc;X[oa+1]=R[fa+1]*gc;X[oa+2]=R[fa+2]}function T(R,fa,X,oa){X[oa]=R[fa]*Tb;X[oa+1]=R[fa+1]*Tb;X[oa+2]=R[fa+2]}function U(R,fa,X,oa){n(R,fa,X,oa);G(X,oa,X,oa)}function ea(R,fa,X,oa,Ca){Ca+=R[fa+2];const Aa=
Db*R[fa+1];R=Db*R[fa];fa=Math.cos(Aa);X[oa++]=Math.cos(R)*fa*Ca;X[oa++]=Math.sin(R)*fa*Ca;X[oa]=Math.sin(Aa)*Ca}function na(R,fa,X,oa){ea(R,fa,X,oa,F.moon.radius)}function pa(R,fa,X,oa){ea(R,fa,X,oa,F.mars.radius)}function sa(R,fa,X,oa){ea(R,fa,X,oa,F.earth.radius)}function ua(R,fa,X,oa,Ca){var Aa=R[fa];const La=R[fa+1];fa=R[fa+2];R=Math.sqrt(Aa*Aa+La*La+fa*fa);fa=P.asinClamped(fa/(0===R?1:R));Aa=Math.atan2(La,Aa);X[oa++]=Pb*Aa;X[oa++]=Pb*fa;X[oa]=R-Ca}function Da(R,fa,X,oa){ua(R,fa,X,oa,F.moon.radius)}
function za(R,fa,X,oa){ua(R,fa,X,oa,F.mars.radius)}function ya(R,fa,X,oa){ua(R,fa,X,oa,F.earth.radius)}function Qa(R,fa,X,oa){ya(R,fa,X,oa);l(X,oa,X,oa)}function Ka(R,fa,X,oa){ya(R,fa,X,oa);Oa(X,oa,X,oa)}function Oa(R,fa,X,oa){var Ca=F.earth;const Aa=Db*R[fa];var La=Db*R[fa+1];R=R[fa+2];fa=Math.sin(La);La=Math.cos(La);const Ta=Ca.radius/Math.sqrt(1-Ca.eccentricitySquared*fa*fa);X[oa++]=(Ta+R)*La*Math.cos(Aa);X[oa++]=(Ta+R)*La*Math.sin(Aa);X[oa++]=(Ta*(1-Ca.eccentricitySquared)+R)*fa}function Pa(R,
fa,X,oa){var Ca=L.earthEllipsoidConstants,Aa=R[fa],La=R[fa+1];R=R[fa+2];let Ta;fa=Math.abs(R);var nb=Aa*Aa+La*La;var ob=Math.sqrt(nb);var mb=nb+R*R;var wb=Math.sqrt(mb);Aa=Math.atan2(La,Aa);var Gb=R*R/mb;mb=nb/mb;La=Ca.a2/wb;nb=Ca.a3-Ca.a4/wb;.3<mb?(Gb=fa/wb*(1+mb*(Ca.a1+La+Gb*nb)/wb),wb=Math.asin(Gb),La=Gb*Gb,mb=Math.sqrt(1-La)):(mb=ob/wb*(1-Gb*(Ca.a5-La-mb*nb)/wb),wb=Math.acos(mb),La=1-mb*mb,Gb=Math.sqrt(La));Ta=1-F.earth.eccentricitySquared*La;La=F.earth.radius/Math.sqrt(Ta);Ca=Ca.a6*La;La=ob-
La*mb;nb=fa-Ca*Gb;fa=mb*La+Gb*nb;ob=mb*nb-Gb*La;Ca=ob/(Ca/Ta+fa);wb+=Ca;0>R&&(wb=-wb);X[oa++]=Pb*Aa;X[oa++]=Pb*wb;X[oa]=fa+ob*Ca/2}function Ja(R,fa,X,oa){Pa(R,fa,X,oa);sa(X,oa,X,oa)}function Ra(R,fa,X,oa){Pa(R,fa,X,oa);l(X,oa,X,oa)}function Wa(R,fa,X=ub()){return null==R||null==fa?null:ta(R,fa,X).projector}function ta(R,fa,X){if(null==R||null==fa||X.source.spatialReference===R&&X.dest.spatialReference===fa)return X;const oa=db(R,X.source),Ca=db(fa,X.dest);oa===ka.UNKNOWN&&Ca===ka.UNKNOWN?y.equals(R,
fa)?X.projector=c:X.projector=null:X.projector=yb[oa][Ca];return X}function ub(){return{source:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,metersPerUnit:1},projector:c}}let hb=null,lb=null,b=null,fb={};const Ob=new h.SimpleObservable;let Jb=function(R){function fa(){return R.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}la._inherits(fa,R);return la._createClass(fa)}(ba);
var ka;(function(R){R[R.UNKNOWN=0]="UNKNOWN";R[R.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";R[R.WGS84=2]="WGS84";R[R.WEB_MERCATOR=3]="WEB_MERCATOR";R[R.WGS84_ECEF=4]="WGS84_ECEF";R[R.CGCS2000=5]="CGCS2000";R[R.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";R[R.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";R[R.GCSMARS2000=8]="GCSMARS2000";R[R.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";R[R.GCSMOON2000=10]="GCSMOON2000";R[R.LON_LAT=11]="LON_LAT";R[R.PLATE_CARREE=12]="PLATE_CARREE"})(ka||(ka={}));const gc=
F.earth.radius*Math.PI/180,Tb=180/(F.earth.radius*Math.PI),yb={[ka.WGS84]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:sa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:l,[ka.PLATE_CARREE]:G,[ka.WGS84]:c,[ka.WGS84_ECEF]:Oa},[ka.CGCS2000]:{[ka.CGCS2000]:c,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:sa,
[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:G,[ka.WGS84]:null,[ka.WGS84_ECEF]:Oa},[ka.GCSMARS2000]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:c,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:pa,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.GCSMOON2000]:{[ka.CGCS2000]:null,
[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:c,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:na,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.WEB_MERCATOR]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:n,[ka.WGS84_COMPARABLE_LON_LAT]:n,[ka.SPHERICAL_ECEF]:da,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:c,[ka.PLATE_CARREE]:U,[ka.WGS84]:n,[ka.WGS84_ECEF]:B},[ka.WGS84_ECEF]:{[ka.CGCS2000]:Pa,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:Pa,[ka.WGS84_COMPARABLE_LON_LAT]:Pa,[ka.SPHERICAL_ECEF]:Ja,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Ra,[ka.PLATE_CARREE]:function(R,fa,X,oa){Pa(R,fa,X,oa);G(X,oa,X,oa)},[ka.WGS84]:Pa,[ka.WGS84_ECEF]:c},[ka.SPHERICAL_ECEF]:{[ka.CGCS2000]:ya,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,
[ka.LON_LAT]:ya,[ka.WGS84_COMPARABLE_LON_LAT]:ya,[ka.SPHERICAL_ECEF]:c,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Qa,[ka.PLATE_CARREE]:function(R,fa,X,oa){ya(R,fa,X,oa);G(X,oa,X,oa)},[ka.WGS84]:ya,[ka.WGS84_ECEF]:Ka},[ka.SPHERICAL_MARS_PCPF]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:za,[ka.GCSMOON2000]:null,[ka.LON_LAT]:za,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:c,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.SPHERICAL_MOON_PCPF]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:Da,[ka.LON_LAT]:Da,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:c,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.UNKNOWN]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:null,
[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:c,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.LON_LAT]:{[ka.CGCS2000]:c,[ka.GCSMARS2000]:c,[ka.GCSMOON2000]:c,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:sa,[ka.SPHERICAL_MARS_PCPF]:pa,[ka.SPHERICAL_MOON_PCPF]:na,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:l,[ka.PLATE_CARREE]:G,[ka.WGS84]:c,[ka.WGS84_ECEF]:Oa},
[ka.WGS84_COMPARABLE_LON_LAT]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:sa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:G,[ka.WGS84]:c,[ka.WGS84_ECEF]:Oa},[ka.PLATE_CARREE]:{[ka.CGCS2000]:T,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:T,[ka.WGS84_COMPARABLE_LON_LAT]:T,[ka.SPHERICAL_ECEF]:function(R,fa,X,oa){T(R,fa,X,oa);sa(X,
oa,X,oa)},[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:function(R,fa,X,oa){T(R,fa,X,oa);l(X,oa,X,oa)},[ka.PLATE_CARREE]:c,[ka.WGS84]:T,[ka.WGS84_ECEF]:function(R,fa,X,oa){T(R,fa,X,oa);Oa(X,oa,X,oa)}}},Sb={spatialReference:null,spatialReferenceId:ka.UNKNOWN},Ub={spatialReference:null,spatialReferenceId:ka.UNKNOWN},Zb=ub(),hc=ub(),Db=P.deg2rad(1),Pb=P.rad2deg(1),ib=O.create(),Fb=O.create(),Qb=O.create(),Ya=O.create(),Hb=O.create();f.canProjectToWGS84ComparableLonLat=
function(R){if(null==R)return!1;R=db(R,Sb);return!!yb[R][ka.WGS84_COMPARABLE_LON_LAT]};f.canProjectWithoutEngine=u;f.computeENUToSphericalPCPFLocalRotation=kb;f.computeSphericalPCPFToENULocalRotation=jb;f.computeTranslationToOriginAndRotation=function(R,fa,X,oa){if(null==R||null==oa)return!1;var Ca=db(R,Sb),Aa=db(oa,Ub);if(Ca===Aa&&Aa!==ka.SPHERICAL_ECEF&&Aa!==ka.SPHERICAL_MARS_PCPF&&Aa!==ka.SPHERICAL_MOON_PCPF&&(Ca!==ka.UNKNOWN||y.equals(R,oa)))return k.fromTranslation(X,fa),!0;if(Aa===ka.SPHERICAL_ECEF||
Aa===ka.SPHERICAL_MARS_PCPF||Aa===ka.SPHERICAL_MOON_PCPF){Ca=yb[Ca][ka.LON_LAT];Aa=yb[ka.LON_LAT][Aa];if(null==Ca||null==Aa)return!1;Ca(fa,0,Fb,0);Aa(Fb,0,Qb,0);kb(Db*Fb[0],Db*Fb[1],X);X[12]=Qb[0];X[13]=Qb[1];X[14]=Qb[2];return!0}if((Aa===ka.WEB_MERCATOR||Aa===ka.PLATE_CARREE)&&(Ca===ka.WGS84||Ca===ka.CGCS2000&&Aa===ka.PLATE_CARREE||Ca===ka.SPHERICAL_ECEF||Ca===ka.WEB_MERCATOR)){R=yb[Ca][ka.LON_LAT];Aa=yb[ka.LON_LAT][Aa];if(null==R||null==Aa)return!1;R(fa,0,Fb,0);Aa(Fb,0,Qb,0);Ca===ka.SPHERICAL_ECEF?
jb(Db*Fb[0],Db*Fb[1],X):k.identity(X);X[12]=Qb[0];X[13]=Qb[1];X[14]=Qb[2];return!0}return!1};f.getProjectorName=function(R,fa){switch(Wa(R,fa,Zb)){case c:return"copy3";case sa:return"wgs84ToSphericalECEF";case l:return"wgs84ToWebMercator";case G:return"wgs84ToPlateCarree";case Oa:return"wgs84ToWGS84ECEF";case n:return"webMercatorToWGS84";case da:return"webMercatorToSphericalECEF";case B:return"webMercatorToWGS84ECEF";case U:return"webMercatorToPlateCarree";case Pa:return"wgs84ECEFToWGS84";case Ja:return"wgs84ECEFToSphericalECEF";
case Ra:return"wgs84ECEFToWebMercator";case ya:return"sphericalECEFToWGS84";case Qa:return"sphericalECEFToWebMercator";case za:return"sphericalMarsPCPFToMars2000";case Da:return"sphericalMoonPCPFToMoon2000";case Ka:return"sphericalECEFToWGS84ECEF";case pa:return"mars2000ToSphericalPCPF";case na:return"moon2000ToSphericalPCPF";default:return null}};f.getTransformation=M;f.getTransformations=function(R,fa,X=null){if(null==hb||null==lb)throw new Jb;R=hb._getTransformationBySuitability(lb,R,fa,X,X?.spatialReference);
if(null!==R){fa=[];for(const oa of R)fa.push(x.fromGE(oa));return fa}return[]};f.initializeProjection=async function(R,fa,X,oa){if(z())return ha.waitTick(oa);if(Array.isArray(R))for(const {source:Ca,dest:Aa,geographicTransformation:La}of R){if(!u(Ca,Aa,La))return I(oa)}else if(!u(R,fa,X))return I(oa);return ha.waitTick(oa)};f.isLoaded=z;f.load=I;f.localLinearScaleFactors=function(R,fa,X,oa){if(null==fa||null==oa)return!1;const Ca=db(fa,Sb);var Aa=db(oa,Ub);if(Ca===Aa&&Ca!==ka.UNKNOWN||y.equals(fa,
oa))return X[0]=1,X[1]=1,X[2]=1,!0;if(Ca===ka.SPHERICAL_ECEF){fa=q.length(R);R=fa/Math.sqrt(R[0]*R[0]+R[1]*R[1]);fa/=F.earth.radius;if(Aa===ka.WEB_MERCATOR)return X[0]=R*fa,X[1]=R*fa,X[2]=1,!0;if(Aa===ka.WGS84||Aa===ka.CGCS2000)return Aa=Tb,X[0]=Aa*R*fa,X[1]=Aa*fa,X[2]=1,!0}else if(Ca===ka.PLATE_CARREE){if(Aa===ka.WGS84||Aa===ka.CGCS2000)return X[0]=Tb,X[1]=Tb,X[2]=1,!0;if(Aa===ka.WEB_MERCATOR)return Aa=R[1]/F.earth.radius,X[0]=1,X[1]=1/Math.cos(Aa),X[2]=1,!0}return!1};f.lonLatToSphericalPCPF=function(R,
fa,X,oa){const Ca=Math.cos(X);R[0]=Math.cos(fa)*Ca*oa;R[1]=Math.sin(fa)*Ca*oa;R[2]=Math.sin(X)*oa};f.lonLatToWebMercatorComparable=aa;f.project=Y;f.projectBoundingRect=function(R,fa,X,oa){if(null==R)return!1;if(y.equals(fa,oa))return v.copy(X,R),!0;ib[0]=R[0];ib[1]=R[1];ib[2]=0;if(!Sa(ib,fa,0,ib,oa,0,1))return!1;X[0]=ib[0];X[1]=ib[1];ib[0]=R[2];ib[1]=R[3];ib[2]=0;if(!Sa(ib,fa,0,ib,oa,0,1))return!1;X[2]=ib[0];X[3]=ib[1];return!0};f.projectBoundingSphere=function(R,fa,X,oa){if(null==fa||null==oa)return!1;
fa=ta(fa,oa,hc);if(fa.projector===c)return X[0]=R[0],X[1]=R[1],X[2]=R[2],X[3]=R[3],!0;if(null==fa.projector)return!1;const {source:Ca,dest:Aa}=fa;if(Aa.spatialReferenceId===ka.WEB_MERCATOR){fa=yb[Ca.spatialReferenceId][ka.WGS84];if(null==fa)return!1;fa(R,0,Fb,0);l(Fb,0,X,0);X[3]=eb(Fb[1],R[2],R[3],F.earth.radius);return!0}if(Ca.spatialReferenceId!==ka.WGS84&&Ca.spatialReferenceId!==ka.CGCS2000||Aa.spatialReferenceId!==ka.PLATE_CARREE)fa.projector(R,0,X,0),X[3]=R[3]*(Ca.metersPerUnit??1)/(Aa.metersPerUnit??
1);else{oa=yb[ka.SPHERICAL_ECEF][ka.PLATE_CARREE];let La=R[3];null!=yb[Ca.spatialReferenceId][ka.SPHERICAL_ECEF]&&null!=oa&&(La=eb(R[1],R[2],R[3],F.earth.radius));fa.projector(R,0,X,0);X[3]=La}return!0};f.projectBuffer=Sa;f.projectDirection=function(R,fa,X,oa,Ca){q.copy(Ya,R);q.add(Hb,R,fa);Ha(Ya,X,Ya,Ca);Ha(Hb,X,Hb,Ca);q.subtract(oa,Hb,Ya);q.normalize(oa,oa)};f.projectExtent=function(R,fa,X=fa.spatialReference,oa=0){return null!=R.spatialReference&&null!=X&&null!=Fa(R,R.spatialReference,fa,X,oa)};
f.projectMany=ia;f.projectMultipoint=function(R,fa,X=fa.spatialReference,oa=0){return null!=R.spatialReference&&null!=X&&null!=va(R,R.spatialReference,fa,X,oa)};f.projectOrLoad=function(R,fa){R=N([R],fa);return null!=R.pending?{pending:R.pending,geometry:null}:null!=R.geometries?{pending:null,geometry:R.geometries[0]}:{pending:null,geometry:null}};f.projectOrLoadMany=N;f.projectPoint=function(R,fa,X=fa.spatialReference,oa=0){return null!=X&&null!=R.spatialReference&&null!=ja(R,R.spatialReference,
fa,X,oa)};f.projectPointToVector=function(R,fa,X,oa=0){Ya[0]=R.x;Ya[1]=R.y;const Ca=R.z;Ya[2]=void 0!==Ca?Ca:oa;return Sa(Ya,R.spatialReference,0,fa,X,0,1)};f.projectPointToWGS84ComparableLonLat=function(R,fa){Ya[0]=R.x;Ya[1]=R.y;const X=R.z;Ya[2]=void 0!==X?X:0;return Ua(Ya,R.spatialReference,fa)};f.projectPolygon=function(R,fa,X=fa.spatialReference,oa=0){return null!=R.spatialReference&&null!=X&&null!=Ea(R,R.spatialReference,fa,X,oa)};f.projectPolygonToWGS84ComparableLonLat=function({hasZ:R,spatialReference:fa,
rings:X},oa,Ca=0){fa=db(fa,Sb);fa=yb[fa][ka.WGS84_COMPARABLE_LON_LAT];if(null==fa)return!1;R=R?Aa=>Aa:Aa=>q.set(Ya,Aa[0],Aa[1],Ca);for(const Aa of X){X=[];for(const La of Aa){const Ta=[0,0,Ca];fa(R(La),0,Ta,0);X.push(Ta)}oa.push(X)}return!0};f.projectPolyline=function(R,fa,X=fa.spatialReference,oa=0){return null!=R.spatialReference&&null!=X&&null!=Ba(R,R.spatialReference,fa,X,oa)};f.projectPolylineToWGS84ComparableLonLat=function({hasZ:R,spatialReference:fa,paths:X},oa,Ca=0){fa=db(fa,Sb);fa=yb[fa][ka.WGS84_COMPARABLE_LON_LAT];
if(null==fa)return!1;R=R?Aa=>Aa:Aa=>q.set(Ya,Aa[0],Aa[1],Ca);for(const Aa of X){X=[];for(const La of Aa){const Ta=[0,0,Ca];fa(R(La),0,Ta,0);X.push(Ta)}oa.push(X)}return!0};f.projectVectorToDehydratedPoint=function(R,fa,X){return Sa(R,fa,0,Ya,X.spatialReference,0,1)?(X.x=Ya[0],X.y=Ya[1],X.z=Ya[2],X):null};f.projectVectorToPoint=function(R,fa,X){if(null==fa||null==X)return null;const oa=new E({spatialReference:X});return Sa(R,fa,0,Ya,X,0,1)?(oa.x=Ya[0],oa.y=Ya[1],oa.z=Ya[2],oa):null};f.projectVectorToVector=
Ha;f.projectVectorToWGS84ComparableLonLat=function(R,fa,X){return Ua(R,fa,X)};f.projectWithoutEngine=V;f.projectXYZToVector=Ma;f.sphericalPCPFtoLonLatElevation=ua;f.test={get loadPromise(){return b}};f.tryProjectWithZConversion=r;f.unload=function(){b=lb=hb=null;fb={}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(m,f,la){la=
function(ba){function P(){return ba.apply(this,arguments)||this}f._inherits(P,ba);P.prototype.notify=function(){var ha=this._observers;if(ha&&0<ha.length){ha=ha.slice();for(const W of ha)W.onInvalidated(),W.onCommitted()}};return f._createClass(P)}(la.ObservableBase);m.SimpleObservable=la;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(m,f,la){function ba(c,n){c[0]=n[0];c[1]=n[1];c[2]=n[2];c[3]=n[3];c[4]=
n[4];c[5]=n[5];c[6]=n[6];c[7]=n[7];c[8]=n[8];c[9]=n[9];c[10]=n[10];c[11]=n[11];c[12]=n[12];c[13]=n[13];c[14]=n[14];c[15]=n[15];return c}function P(c,n,da,B,aa,l,G,T,U,ea,na,pa,sa,ua,Da,za,ya){c[0]=n;c[1]=da;c[2]=B;c[3]=aa;c[4]=l;c[5]=G;c[6]=T;c[7]=U;c[8]=ea;c[9]=na;c[10]=pa;c[11]=sa;c[12]=ua;c[13]=Da;c[14]=za;c[15]=ya;return c}function ha(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function W(c,n){if(c===n){const da=
n[1],B=n[2],aa=n[3],l=n[6],G=n[7],T=n[11];c[1]=n[4];c[2]=n[8];c[3]=n[12];c[4]=da;c[6]=n[9];c[7]=n[13];c[8]=B;c[9]=l;c[11]=n[14];c[12]=aa;c[13]=G;c[14]=T}else c[0]=n[0],c[1]=n[4],c[2]=n[8],c[3]=n[12],c[4]=n[1],c[5]=n[5],c[6]=n[9],c[7]=n[13],c[8]=n[2],c[9]=n[6],c[10]=n[10],c[11]=n[14],c[12]=n[3],c[13]=n[7],c[14]=n[11],c[15]=n[15];return c}function J(c,n){h(c,n)||ha(c);return c}function h(c,n){const da=n[0],B=n[1],aa=n[2],l=n[3],G=n[4],T=n[5],U=n[6],ea=n[7],na=n[8],pa=n[9],sa=n[10],ua=n[11],Da=n[12],
za=n[13],ya=n[14];n=n[15];const Qa=da*T-B*G,Ka=da*U-aa*G,Oa=da*ea-l*G,Pa=B*U-aa*T,Ja=B*ea-l*T,Ra=aa*ea-l*U,Wa=na*za-pa*Da,ta=na*ya-sa*Da,ub=na*n-ua*Da,hb=pa*ya-sa*za,lb=pa*n-ua*za,b=sa*n-ua*ya;let fb=Qa*b-Ka*lb+Oa*hb+Pa*ub-Ja*ta+Ra*Wa;if(!fb)return null;fb=1/fb;c[0]=(T*b-U*lb+ea*hb)*fb;c[1]=(aa*lb-B*b-l*hb)*fb;c[2]=(za*Ra-ya*Ja+n*Pa)*fb;c[3]=(sa*Ja-pa*Ra-ua*Pa)*fb;c[4]=(U*ub-G*b-ea*ta)*fb;c[5]=(da*b-aa*ub+l*ta)*fb;c[6]=(ya*Oa-Da*Ra-n*Ka)*fb;c[7]=(na*Ra-sa*Oa+ua*Ka)*fb;c[8]=(G*lb-T*ub+ea*Wa)*fb;c[9]=
(B*ub-da*lb-l*Wa)*fb;c[10]=(Da*Ja-za*Oa+n*Qa)*fb;c[11]=(pa*Oa-na*Ja-ua*Qa)*fb;c[12]=(T*ta-G*hb-U*Wa)*fb;c[13]=(da*hb-B*ta+aa*Wa)*fb;c[14]=(za*Ka-Da*Pa-ya*Qa)*fb;c[15]=(na*Pa-pa*Ka+sa*Qa)*fb;return c}function k(c,n){const da=n[0],B=n[1],aa=n[2],l=n[3],G=n[4],T=n[5],U=n[6],ea=n[7],na=n[8],pa=n[9],sa=n[10],ua=n[11],Da=n[12],za=n[13],ya=n[14];n=n[15];c[0]=T*(sa*n-ua*ya)-pa*(U*n-ea*ya)+za*(U*ua-ea*sa);c[1]=-(B*(sa*n-ua*ya)-pa*(aa*n-l*ya)+za*(aa*ua-l*sa));c[2]=B*(U*n-ea*ya)-T*(aa*n-l*ya)+za*(aa*ea-l*U);
c[3]=-(B*(U*ua-ea*sa)-T*(aa*ua-l*sa)+pa*(aa*ea-l*U));c[4]=-(G*(sa*n-ua*ya)-na*(U*n-ea*ya)+Da*(U*ua-ea*sa));c[5]=da*(sa*n-ua*ya)-na*(aa*n-l*ya)+Da*(aa*ua-l*sa);c[6]=-(da*(U*n-ea*ya)-G*(aa*n-l*ya)+Da*(aa*ea-l*U));c[7]=da*(U*ua-ea*sa)-G*(aa*ua-l*sa)+na*(aa*ea-l*U);c[8]=G*(pa*n-ua*za)-na*(T*n-ea*za)+Da*(T*ua-ea*pa);c[9]=-(da*(pa*n-ua*za)-na*(B*n-l*za)+Da*(B*ua-l*pa));c[10]=da*(T*n-ea*za)-G*(B*n-l*za)+Da*(B*ea-l*T);c[11]=-(da*(T*ua-ea*pa)-G*(B*ua-l*pa)+na*(B*ea-l*T));c[12]=-(G*(pa*ya-sa*za)-na*(T*ya-U*
za)+Da*(T*sa-U*pa));c[13]=da*(pa*ya-sa*za)-na*(B*ya-aa*za)+Da*(B*sa-aa*pa);c[14]=-(da*(T*ya-U*za)-G*(B*ya-aa*za)+Da*(B*U-aa*T));c[15]=da*(T*sa-U*pa)-G*(B*sa-aa*pa)+na*(B*U-aa*T);return c}function q(c){const n=c[0],da=c[1],B=c[2],aa=c[3],l=c[4],G=c[5],T=c[6],U=c[7],ea=c[8],na=c[9],pa=c[10],sa=c[11],ua=c[12],Da=c[13],za=c[14];c=c[15];return(n*G-da*l)*(pa*c-sa*za)-(n*T-B*l)*(na*c-sa*Da)+(n*U-aa*l)*(na*za-pa*Da)+(da*T-B*G)*(ea*c-sa*ua)-(da*U-aa*G)*(ea*za-pa*ua)+(B*U-aa*T)*(ea*Da-na*ua)}function O(c,n,
da){const B=n[0],aa=n[1],l=n[2],G=n[3],T=n[4],U=n[5],ea=n[6],na=n[7],pa=n[8],sa=n[9],ua=n[10],Da=n[11],za=n[12],ya=n[13],Qa=n[14];n=n[15];let Ka=da[0],Oa=da[1],Pa=da[2],Ja=da[3];c[0]=Ka*B+Oa*T+Pa*pa+Ja*za;c[1]=Ka*aa+Oa*U+Pa*sa+Ja*ya;c[2]=Ka*l+Oa*ea+Pa*ua+Ja*Qa;c[3]=Ka*G+Oa*na+Pa*Da+Ja*n;Ka=da[4];Oa=da[5];Pa=da[6];Ja=da[7];c[4]=Ka*B+Oa*T+Pa*pa+Ja*za;c[5]=Ka*aa+Oa*U+Pa*sa+Ja*ya;c[6]=Ka*l+Oa*ea+Pa*ua+Ja*Qa;c[7]=Ka*G+Oa*na+Pa*Da+Ja*n;Ka=da[8];Oa=da[9];Pa=da[10];Ja=da[11];c[8]=Ka*B+Oa*T+Pa*pa+Ja*za;c[9]=
Ka*aa+Oa*U+Pa*sa+Ja*ya;c[10]=Ka*l+Oa*ea+Pa*ua+Ja*Qa;c[11]=Ka*G+Oa*na+Pa*Da+Ja*n;Ka=da[12];Oa=da[13];Pa=da[14];Ja=da[15];c[12]=Ka*B+Oa*T+Pa*pa+Ja*za;c[13]=Ka*aa+Oa*U+Pa*sa+Ja*ya;c[14]=Ka*l+Oa*ea+Pa*ua+Ja*Qa;c[15]=Ka*G+Oa*na+Pa*Da+Ja*n;return c}function C(c,n,da){const B=da[0],aa=da[1];da=da[2];if(n===c)c[12]=n[0]*B+n[4]*aa+n[8]*da+n[12],c[13]=n[1]*B+n[5]*aa+n[9]*da+n[13],c[14]=n[2]*B+n[6]*aa+n[10]*da+n[14],c[15]=n[3]*B+n[7]*aa+n[11]*da+n[15];else{const l=n[0],G=n[1],T=n[2],U=n[3],ea=n[4],na=n[5],pa=
n[6],sa=n[7],ua=n[8],Da=n[9],za=n[10],ya=n[11];c[0]=l;c[1]=G;c[2]=T;c[3]=U;c[4]=ea;c[5]=na;c[6]=pa;c[7]=sa;c[8]=ua;c[9]=Da;c[10]=za;c[11]=ya;c[12]=l*B+ea*aa+ua*da+n[12];c[13]=G*B+na*aa+Da*da+n[13];c[14]=T*B+pa*aa+za*da+n[14];c[15]=U*B+sa*aa+ya*da+n[15]}return c}function S(c,n,da){const B=da[0],aa=da[1];da=da[2];c[0]=n[0]*B;c[1]=n[1]*B;c[2]=n[2]*B;c[3]=n[3]*B;c[4]=n[4]*aa;c[5]=n[5]*aa;c[6]=n[6]*aa;c[7]=n[7]*aa;c[8]=n[8]*da;c[9]=n[9]*da;c[10]=n[10]*da;c[11]=n[11]*da;c[12]=n[12];c[13]=n[13];c[14]=n[14];
c[15]=n[15];return c}function e(c,n,da,B){let aa=B[0],l=B[1];B=B[2];let G=Math.sqrt(aa*aa+l*l+B*B);var T=void 0,U=void 0;let ea=void 0,na=void 0,pa=void 0,sa=void 0,ua=void 0,Da=void 0,za=void 0,ya=void 0,Qa=void 0,Ka=void 0,Oa=void 0,Pa=void 0,Ja=void 0,Ra=void 0,Wa=void 0,ta=void 0,ub=void 0,hb=void 0,lb=void 0,b=void 0;U=T=void 0;if(G<la.getEpsilon())return null;G=1/G;aa*=G;l*=G;B*=G;T=Math.sin(da);U=Math.cos(da);ea=1-U;na=n[0];pa=n[1];sa=n[2];ua=n[3];Da=n[4];za=n[5];ya=n[6];Qa=n[7];Ka=n[8];Oa=
n[9];Pa=n[10];Ja=n[11];Ra=aa*aa*ea+U;Wa=l*aa*ea+B*T;ta=B*aa*ea-l*T;ub=aa*l*ea-B*T;hb=l*l*ea+U;lb=B*l*ea+aa*T;b=aa*B*ea+l*T;T=l*B*ea-aa*T;U=B*B*ea+U;c[0]=na*Ra+Da*Wa+Ka*ta;c[1]=pa*Ra+za*Wa+Oa*ta;c[2]=sa*Ra+ya*Wa+Pa*ta;c[3]=ua*Ra+Qa*Wa+Ja*ta;c[4]=na*ub+Da*hb+Ka*lb;c[5]=pa*ub+za*hb+Oa*lb;c[6]=sa*ub+ya*hb+Pa*lb;c[7]=ua*ub+Qa*hb+Ja*lb;c[8]=na*b+Da*T+Ka*U;c[9]=pa*b+za*T+Oa*U;c[10]=sa*b+ya*T+Pa*U;c[11]=ua*b+Qa*T+Ja*U;n!==c&&(c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);return c}function p(c,n,da){const B=
Math.sin(da);da=Math.cos(da);const aa=n[4],l=n[5],G=n[6],T=n[7],U=n[8],ea=n[9],na=n[10],pa=n[11];n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[4]=aa*da+U*B;c[5]=l*da+ea*B;c[6]=G*da+na*B;c[7]=T*da+pa*B;c[8]=U*da-aa*B;c[9]=ea*da-l*B;c[10]=na*da-G*B;c[11]=pa*da-T*B;return c}function E(c,n,da){const B=Math.sin(da);da=Math.cos(da);const aa=n[0],l=n[1],G=n[2],T=n[3],U=n[8],ea=n[9],na=n[10],pa=n[11];n!==c&&(c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[12]=
n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[0]=aa*da-U*B;c[1]=l*da-ea*B;c[2]=G*da-na*B;c[3]=T*da-pa*B;c[8]=aa*B+U*da;c[9]=l*B+ea*da;c[10]=G*B+na*da;c[11]=T*B+pa*da;return c}function Q(c,n,da){const B=Math.sin(da);da=Math.cos(da);const aa=n[0],l=n[1],G=n[2],T=n[3],U=n[4],ea=n[5],na=n[6],pa=n[7];n!==c&&(c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[0]=aa*da+U*B;c[1]=l*da+ea*B;c[2]=G*da+na*B;c[3]=T*da+pa*B;c[4]=U*da-aa*B;c[5]=ea*da-l*B;c[6]=na*da-G*B;
c[7]=pa*da-T*B;return c}function H(c,n){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=n[0];c[13]=n[1];c[14]=n[2];c[15]=1;return c}function v(c,n){c[0]=n[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=n[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function F(c,n,da){if(0===n)return ha(c);let B=da[0],aa=da[1];da=da[2];let l=Math.sqrt(B*B+aa*aa+da*da),G=void 0,T=void 0,U=void 0;if(l<la.getEpsilon())return null;l=1/l;B*=
l;aa*=l;da*=l;G=Math.sin(n);T=Math.cos(n);U=1-T;c[0]=B*B*U+T;c[1]=aa*B*U+da*G;c[2]=da*B*U-aa*G;c[3]=0;c[4]=B*aa*U-da*G;c[5]=aa*aa*U+T;c[6]=da*aa*U+B*G;c[7]=0;c[8]=B*da*U+aa*G;c[9]=aa*da*U-B*G;c[10]=da*da*U+T;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function L(c,n){const da=Math.sin(n);n=Math.cos(n);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n;c[6]=da;c[7]=0;c[8]=0;c[9]=-da;c[10]=n;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function x(c,n){const da=Math.sin(n);n=Math.cos(n);c[0]=n;c[1]=
0;c[2]=-da;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=da;c[9]=0;c[10]=n;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function y(c,n){const da=Math.sin(n);n=Math.cos(n);c[0]=n;c[1]=da;c[2]=0;c[3]=0;c[4]=-da;c[5]=n;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function A(c,n,da){var B=n[0],aa=n[1],l=n[2],G=n[3],T=B+B,U=aa+aa;const ea=l+l;n=B*T;const na=B*U;B*=ea;const pa=aa*U;aa*=ea;l*=ea;T*=G;U*=G;G*=ea;c[0]=1-(pa+l);c[1]=na+G;c[2]=B-U;c[3]=0;c[4]=na-G;c[5]=
1-(n+l);c[6]=aa+T;c[7]=0;c[8]=B+U;c[9]=aa-T;c[10]=1-(n+pa);c[11]=0;c[12]=da[0];c[13]=da[1];c[14]=da[2];c[15]=1;return c}function w(c,n){const da=db,B=-n[0],aa=-n[1],l=-n[2],G=n[3],T=n[4],U=n[5],ea=n[6],na=n[7],pa=B*B+aa*aa+l*l+G*G;0<pa?(da[0]=2*(T*G+na*B+U*l-ea*aa)/pa,da[1]=2*(U*G+na*aa+ea*B-T*l)/pa,da[2]=2*(ea*G+na*l+T*aa-U*B)/pa):(da[0]=2*(T*G+na*B+U*l-ea*aa),da[1]=2*(U*G+na*aa+ea*B-T*l),da[2]=2*(ea*G+na*l+T*aa-U*B));A(c,n,da);return c}function z(c,n){c[0]=n[12];c[1]=n[13];c[2]=n[14];return c}function I(c,
n){const da=n[0],B=n[1],aa=n[2],l=n[4],G=n[5],T=n[6],U=n[8],ea=n[9];n=n[10];c[0]=Math.sqrt(da*da+B*B+aa*aa);c[1]=Math.sqrt(l*l+G*G+T*T);c[2]=Math.sqrt(U*U+ea*ea+n*n);return c}function Y(c,n){const da=n[0]+n[5]+n[10];let B=0;0<da?(B=2*Math.sqrt(da+1),c[3]=.25*B,c[0]=(n[6]-n[9])/B,c[1]=(n[8]-n[2])/B,c[2]=(n[1]-n[4])/B):n[0]>n[5]&&n[0]>n[10]?(B=2*Math.sqrt(1+n[0]-n[5]-n[10]),c[3]=(n[6]-n[9])/B,c[0]=.25*B,c[1]=(n[1]+n[4])/B,c[2]=(n[8]+n[2])/B):n[5]>n[10]?(B=2*Math.sqrt(1+n[5]-n[0]-n[10]),c[3]=(n[8]-n[2])/
B,c[0]=(n[1]+n[4])/B,c[1]=.25*B,c[2]=(n[6]+n[9])/B):(B=2*Math.sqrt(1+n[10]-n[0]-n[5]),c[3]=(n[1]-n[4])/B,c[0]=(n[8]+n[2])/B,c[1]=(n[6]+n[9])/B,c[2]=.25*B);return c}function ia(c,n,da,B){var aa=n[0],l=n[1],G=n[2],T=n[3],U=aa+aa,ea=l+l,na=G+G;n=aa*U;const pa=aa*ea;aa*=na;const sa=l*ea;l*=na;G*=na;U*=T;ea*=T;T*=na;na=B[0];const ua=B[1];B=B[2];c[0]=(1-(sa+G))*na;c[1]=(pa+T)*na;c[2]=(aa-ea)*na;c[3]=0;c[4]=(pa-T)*ua;c[5]=(1-(n+G))*ua;c[6]=(l+U)*ua;c[7]=0;c[8]=(aa+ea)*B;c[9]=(l-U)*B;c[10]=(1-(n+sa))*B;c[11]=
0;c[12]=da[0];c[13]=da[1];c[14]=da[2];c[15]=1;return c}function N(c,n,da,B,aa){var l=n[0],G=n[1],T=n[2],U=n[3],ea=l+l,na=G+G,pa=T+T;n=l*ea;var sa=l*na,ua=l*pa;l=G*na;G*=pa;var Da=T*pa;T=U*ea;na*=U;const za=U*pa;var ya=B[0],Qa=B[1];pa=B[2];B=aa[0];U=aa[1];aa=aa[2];ea=(1-(l+Da))*ya;const Ka=(sa+za)*ya;ya*=ua-na;sa=(sa-za)*Qa;Da=(1-(n+Da))*Qa;Qa*=G+T;ua=(ua+na)*pa;G=(G-T)*pa;n=(1-(n+l))*pa;c[0]=ea;c[1]=Ka;c[2]=ya;c[3]=0;c[4]=sa;c[5]=Da;c[6]=Qa;c[7]=0;c[8]=ua;c[9]=G;c[10]=n;c[11]=0;c[12]=da[0]+B-(ea*
B+sa*U+ua*aa);c[13]=da[1]+U-(Ka*B+Da*U+G*aa);c[14]=da[2]+aa-(ya*B+Qa*U+n*aa);c[15]=1;return c}function M(c,n){var da=n[0],B=n[1],aa=n[2];n=n[3];var l=da+da,G=B+B;const T=aa+aa;da*=l;const U=B*l;B*=G;const ea=aa*l,na=aa*G;aa*=T;l*=n;G*=n;n*=T;c[0]=1-B-aa;c[1]=U+n;c[2]=ea-G;c[3]=0;c[4]=U-n;c[5]=1-da-aa;c[6]=na+l;c[7]=0;c[8]=ea+G;c[9]=na-l;c[10]=1-da-B;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function r(c,n,da,B,aa,l,G){const T=1/(da-n),U=1/(aa-B),ea=1/(l-G);c[0]=2*l*T;c[1]=0;c[2]=0;c[3]=0;c[4]=
0;c[5]=2*l*U;c[6]=0;c[7]=0;c[8]=(da+n)*T;c[9]=(aa+B)*U;c[10]=(G+l)*ea;c[11]=-1;c[12]=0;c[13]=0;c[14]=G*l*2*ea;c[15]=0;return c}function u(c,n,da,B,aa){n=1/Math.tan(n/2);let l=void 0;c[0]=n/da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=aa&&Infinity!==aa?(l=1/(B-aa),c[10]=(aa+B)*l,c[14]=2*aa*B*l):(c[10]=-1,c[14]=-2*B);return c}function V(c,n,da,B){const aa=Math.tan(n.upDegrees*Math.PI/180),l=Math.tan(n.downDegrees*Math.PI/180),G=Math.tan(n.leftDegrees*
Math.PI/180);n=Math.tan(n.rightDegrees*Math.PI/180);const T=2/(G+n),U=2/(aa+l);c[0]=T;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=U;c[6]=0;c[7]=0;c[8]=-((G-n)*T*.5);c[9]=(aa-l)*U*.5;c[10]=B/(da-B);c[11]=-1;c[12]=0;c[13]=0;c[14]=B*da/(da-B);c[15]=0;return c}function ja(c,n,da,B,aa,l,G){const T=1/(n-da),U=1/(B-aa),ea=1/(l-G);c[0]=-2*T;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*U;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*ea;c[11]=0;c[12]=(n+da)*T;c[13]=(aa+B)*U;c[14]=(G+l)*ea;c[15]=1;return c}function va(c,n,da,B){const aa=
n[0],l=n[1];n=n[2];let G=aa-da[0],T=l-da[1];da=n-da[2];var U=la.getEpsilon();if(Math.abs(G)<U&&Math.abs(T)<U&&Math.abs(da)<U)ha(c);else{var ea=1/Math.sqrt(G*G+T*T+da*da);G*=ea;T*=ea;da*=ea;ea=B[0];var na=B[1];U=B[2];B=na*da-U*T;U=U*G-ea*da;na=ea*T-na*G;(ea=Math.sqrt(B*B+U*U+na*na))?(ea=1/ea,B*=ea,U*=ea,na*=ea):na=U=B=0;var pa=T*na-da*U,sa=da*B-G*na,ua=G*U-T*B;(ea=Math.sqrt(pa*pa+sa*sa+ua*ua))?(ea=1/ea,pa*=ea,sa*=ea,ua*=ea):ua=sa=pa=0;c[0]=B;c[1]=pa;c[2]=G;c[3]=0;c[4]=U;c[5]=sa;c[6]=T;c[7]=0;c[8]=
na;c[9]=ua;c[10]=da;c[11]=0;c[12]=-(B*aa+U*l+na*n);c[13]=-(pa*aa+sa*l+ua*n);c[14]=-(G*aa+T*l+da*n);c[15]=1}}function Ba(c,n,da,B){const aa=n[0],l=n[1];n=n[2];var G=B[0];const T=B[1];var U=B[2];B=aa-da[0];let ea=l-da[1];da=n-da[2];let na=B*B+ea*ea+da*da;0<na&&(na=1/Math.sqrt(na),B*=na,ea*=na,da*=na);let pa=T*da-U*ea;U=U*B-G*da;G=G*ea-T*B;na=pa*pa+U*U+G*G;0<na&&(na=1/Math.sqrt(na),pa*=na,U*=na,G*=na);c[0]=pa;c[1]=U;c[2]=G;c[3]=0;c[4]=ea*G-da*U;c[5]=da*pa-B*G;c[6]=B*U-ea*pa;c[7]=0;c[8]=B;c[9]=ea;c[10]=
da;c[11]=0;c[12]=aa;c[13]=l;c[14]=n;c[15]=1;return c}function Ea(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Fa(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function Ma(c,n,da){c[0]=n[0]+da[0];c[1]=n[1]+da[1];c[2]=n[2]+da[2];c[3]=n[3]+da[3];c[4]=
n[4]+da[4];c[5]=n[5]+da[5];c[6]=n[6]+da[6];c[7]=n[7]+da[7];c[8]=n[8]+da[8];c[9]=n[9]+da[9];c[10]=n[10]+da[10];c[11]=n[11]+da[11];c[12]=n[12]+da[12];c[13]=n[13]+da[13];c[14]=n[14]+da[14];c[15]=n[15]+da[15];return c}function Ha(c,n,da){c[0]=n[0]-da[0];c[1]=n[1]-da[1];c[2]=n[2]-da[2];c[3]=n[3]-da[3];c[4]=n[4]-da[4];c[5]=n[5]-da[5];c[6]=n[6]-da[6];c[7]=n[7]-da[7];c[8]=n[8]-da[8];c[9]=n[9]-da[9];c[10]=n[10]-da[10];c[11]=n[11]-da[11];c[12]=n[12]-da[12];c[13]=n[13]-da[13];c[14]=n[14]-da[14];c[15]=n[15]-
da[15];return c}function Ua(c,n,da){c[0]=n[0]*da;c[1]=n[1]*da;c[2]=n[2]*da;c[3]=n[3]*da;c[4]=n[4]*da;c[5]=n[5]*da;c[6]=n[6]*da;c[7]=n[7]*da;c[8]=n[8]*da;c[9]=n[9]*da;c[10]=n[10]*da;c[11]=n[11]*da;c[12]=n[12]*da;c[13]=n[13]*da;c[14]=n[14]*da;c[15]=n[15]*da;return c}function Sa(c,n,da,B){c[0]=n[0]+da[0]*B;c[1]=n[1]+da[1]*B;c[2]=n[2]+da[2]*B;c[3]=n[3]+da[3]*B;c[4]=n[4]+da[4]*B;c[5]=n[5]+da[5]*B;c[6]=n[6]+da[6]*B;c[7]=n[7]+da[7]*B;c[8]=n[8]+da[8]*B;c[9]=n[9]+da[9]*B;c[10]=n[10]+da[10]*B;c[11]=n[11]+da[11]*
B;c[12]=n[12]+da[12]*B;c[13]=n[13]+da[13]*B;c[14]=n[14]+da[14]*B;c[15]=n[15]+da[15]*B;return c}function Va(c,n){return c[0]===n[0]&&c[1]===n[1]&&c[2]===n[2]&&c[3]===n[3]&&c[4]===n[4]&&c[5]===n[5]&&c[6]===n[6]&&c[7]===n[7]&&c[8]===n[8]&&c[9]===n[9]&&c[10]===n[10]&&c[11]===n[11]&&c[12]===n[12]&&c[13]===n[13]&&c[14]===n[14]&&c[15]===n[15]}function eb(c,n){if(c===n)return!0;const da=c[0],B=c[1],aa=c[2],l=c[3],G=c[4],T=c[5],U=c[6],ea=c[7],na=c[8],pa=c[9],sa=c[10],ua=c[11],Da=c[12],za=c[13],ya=c[14];c=
c[15];const Qa=n[0],Ka=n[1],Oa=n[2],Pa=n[3],Ja=n[4],Ra=n[5],Wa=n[6],ta=n[7],ub=n[8],hb=n[9],lb=n[10],b=n[11],fb=n[12],Ob=n[13],Jb=n[14];n=n[15];const ka=la.getEpsilon();return Math.abs(da-Qa)<=ka*Math.max(1,Math.abs(da),Math.abs(Qa))&&Math.abs(B-Ka)<=ka*Math.max(1,Math.abs(B),Math.abs(Ka))&&Math.abs(aa-Oa)<=ka*Math.max(1,Math.abs(aa),Math.abs(Oa))&&Math.abs(l-Pa)<=ka*Math.max(1,Math.abs(l),Math.abs(Pa))&&Math.abs(G-Ja)<=ka*Math.max(1,Math.abs(G),Math.abs(Ja))&&Math.abs(T-Ra)<=ka*Math.max(1,Math.abs(T),
Math.abs(Ra))&&Math.abs(U-Wa)<=ka*Math.max(1,Math.abs(U),Math.abs(Wa))&&Math.abs(ea-ta)<=ka*Math.max(1,Math.abs(ea),Math.abs(ta))&&Math.abs(na-ub)<=ka*Math.max(1,Math.abs(na),Math.abs(ub))&&Math.abs(pa-hb)<=ka*Math.max(1,Math.abs(pa),Math.abs(hb))&&Math.abs(sa-lb)<=ka*Math.max(1,Math.abs(sa),Math.abs(lb))&&Math.abs(ua-b)<=ka*Math.max(1,Math.abs(ua),Math.abs(b))&&Math.abs(Da-fb)<=ka*Math.max(1,Math.abs(Da),Math.abs(fb))&&Math.abs(za-Ob)<=ka*Math.max(1,Math.abs(za),Math.abs(Ob))&&Math.abs(ya-Jb)<=ka*
Math.max(1,Math.abs(ya),Math.abs(Jb))&&Math.abs(c-n)<=ka*Math.max(1,Math.abs(c),Math.abs(n))}function kb(c){const n=la.getEpsilon(),da=c[0],B=c[1],aa=c[2],l=c[4],G=c[5],T=c[6],U=c[8],ea=c[9];c=c[10];return Math.abs(1-(da*da+l*l+U*U))<=n&&Math.abs(1-(B*B+G*G+ea*ea))<=n&&Math.abs(1-(aa*aa+T*T+c*c))<=n}function jb(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&1===c[10]}const db=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:Ma,adjoint:k,
copy:ba,determinant:q,equals:eb,exactEquals:Va,frob:Fa,fromQuat:M,fromQuat2:w,fromRotation:F,fromRotationTranslation:A,fromRotationTranslationScale:ia,fromRotationTranslationScaleOrigin:N,fromScaling:v,fromTranslation:H,fromXRotation:L,fromYRotation:x,fromZRotation:y,frustum:r,getRotation:Y,getScaling:I,getTranslation:z,hasIdentityRotation:jb,identity:ha,invert:h,invertOrIdentity:J,isOrthoNormal:kb,lookAt:va,mul:O,multiply:O,multiplyScalar:Ua,multiplyScalarAndAdd:Sa,ortho:ja,perspective:u,perspectiveFromFieldOfView:V,
rotate:e,rotateX:p,rotateY:E,rotateZ:Q,scale:S,set:P,str:Ea,sub:Ha,subtract:Ha,targetTo:Ba,translate:C,transpose:W},Symbol.toStringTag,{value:"Module"}));m.add=Ma;m.adjoint=k;m.copy=ba;m.determinant=q;m.equals=eb;m.exactEquals=Va;m.frob=Fa;m.fromQuat=M;m.fromQuat2=w;m.fromRotation=F;m.fromRotationTranslation=A;m.fromRotationTranslationScale=ia;m.fromRotationTranslationScaleOrigin=N;m.fromScaling=v;m.fromTranslation=H;m.fromXRotation=L;m.fromYRotation=x;m.fromZRotation=y;m.frustum=r;m.getRotation=
Y;m.getScaling=I;m.getTranslation=z;m.hasIdentityRotation=jb;m.identity=ha;m.invert=h;m.invertOrIdentity=J;m.isOrthoNormal=kb;m.lookAt=va;m.mat4=f;m.mul=O;m.multiply=O;m.multiplyScalar=Ua;m.multiplyScalarAndAdd=Sa;m.ortho=ja;m.perspective=u;m.perspectiveFromFieldOfView=V;m.rotate=e;m.rotateX=p;m.rotateY=E;m.rotateZ=Q;m.scale=S;m.set=P;m.str=Ea;m.sub=Ha;m.subtract=Ha;m.targetTo=Ba;m.translate=C;m.transpose=W})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets",
"../core/has"],function(m,f,la,ba,P){function ha(){return!!f._pe}function W(){return!!P("esri-wasm")}function J(){return S?S:S=(new Promise((p,E)=>m(["./pe-wasm"],p,E))).then(p=>p.peWasm).then(({default:p})=>p({locateFile:E=>ba.getAssetUrl(`esri/geometry/support/${E}`)})).then(p=>{h(p)})}function h(p){function E(v,F,L){v[F]=L(v[F])}f._pe=p;f.PeDefs.init();f.PeGTlistExtended.init();f.PeNotationMgrs.init();f.PeNotationUtm.init();f.PePCSInfo.init();f.PeGCSExtent=function(v){function F(){return v.apply(this,
arguments)||this}la._inherits(F,v);F.prototype.destroy=function(){f._pe.destroy(this)};return la._createClass(F)}(f._pe.PeGCSExtent);p=[f._pe.PeDatum,f._pe.PeGeogcs,f._pe.PeGeogtran,f._pe.PeObject,f._pe.PeParameter,f._pe.PePrimem,f._pe.PeProjcs,f._pe.PeSpheroid,f._pe.PeUnit];for(var Q of p)E(Q.prototype,"getName",v=>function(){return v.call(this,Array(f.PeDefs.PE_NAME_MAX))});for(const v of[f._pe.PeGeogtran,f._pe.PeProjcs])E(v.prototype,"getParameters",F=>function(){const L=Array(f.PeDefs.PE_PARM_MAX);
let x=F.call(this);for(let y=0;y<L.length;y++){const A=f._pe.getValue(x,"*");L[y]=A?f._pe.wrapPointer(A,f._pe.PeParameter):null;x+=Int32Array.BYTES_PER_ELEMENT}return L});E(f._pe.PeHorizon.prototype,"getCoord",v=>function(){const F=this.getSize();if(!F)return null;const L=[],x=v.call(this);C(L,F,x);return L});E(f._pe.PeGTlistExtendedEntry.prototype,"getEntries",v=>{const F=f._pe._pe_getPeGTlistExtendedGTsSize();return function(){let L=null;var x=v.call(this);if(!f._pe.compare(x,f._pe.NULL)){L=[x];
const y=this.getSteps();if(1<y){x=f._pe.getPointer(x);for(let A=1;A<y;A++)L.push(f._pe.wrapPointer(x+F*A,f._pe.PeGTlistExtendedGTs))}}return L}});const H=f._pe._pe_getPeHorizonSize();Q=v=>function(){let F=this._cache;F||(this._cache=F=new Map);if(F.has(v))return F.get(v);let L=null;var x=v.call(this);if(!f._pe.compare(x,f._pe.NULL)){L=[x];const y=x.getNump();if(1<y){x=f._pe.getPointer(x);for(let A=1;A<y;A++)L.push(f._pe.wrapPointer(x+H*A,f._pe.PeHorizon))}}F.set(v,L);return L};E(f._pe.PeProjcs.prototype,
"horizonGcsGenerate",Q);E(f._pe.PeProjcs.prototype,"horizonPcsGenerate",Q);f._pe.PeObject.prototype.toString=function(v=f.PeDefs.PE_STR_OPTS_NONE){f._pe.ensureCache.prepare();const F=f._pe.getPointer(this),L=f._pe.ensureInt8(Array(f.PeDefs.PE_BUFFER_MAX));return f._pe.UTF8ToString(f._pe._pe_object_to_string_ext(F,v,L))}}function k(p){if(p){var E=f._pe.getClass(p);E&&(E=f._pe.getCache(E))&&(p=f._pe.getPointer(p))&&delete E[p]}}function q(p,E){const Q=[];E=Array(E);for(let H=0;H<p;H++)Q.push(f._pe.ensureInt8(E));
return Q}function O(p){let E;Array.isArray(p[0])?(E=[],p.forEach(Q=>{E.push(Q[0],Q[1])})):E=p;return E}function C(p,E,Q,H=!1){if(H)for(H=0;H<2*E;H++)p[H]=f._pe.getValue(Q+H*Float64Array.BYTES_PER_ELEMENT,"double");else{H=0===p.length;for(let v=0;v<E;v++)H&&(p[v]=Array(2)),p[v][0]=f._pe.getValue(Q,"double"),p[v][1]=f._pe.getValue(Q+Float64Array.BYTES_PER_ELEMENT,"double"),Q+=2*Float64Array.BYTES_PER_ELEMENT}}let S;f._pe=null;f.PeCSTransformations=void 0;(function(p){function E(v,F,L){f._pe.ensureCache.prepare();
var x=O(L);const y=L===x;x=f._pe.ensureFloat64(x);(v=f._pe._pe_geog_to_proj(f._pe.getPointer(v),F,x))&&C(L,F,x,y);return v}function Q(v,F,L){return H(v,F,L,0)}function H(v,F,L,x){f._pe.ensureCache.prepare();var y=O(L);const A=L===y;y=f._pe.ensureFloat64(y);(v=f._pe._pe_proj_to_geog_center(f._pe.getPointer(v),F,y,x))&&C(L,F,y,A);return v}p.geogToProj=E;p.projGeog=function(v,F,L,x){switch(x){case f.PeDefs.PE_TRANSFORM_P_TO_G:return Q(v,F,L);case f.PeDefs.PE_TRANSFORM_G_TO_P:return E(v,F,L)}return 0};
p.projToGeog=Q;p.projToGeogCenter=H})(f.PeCSTransformations||(f.PeCSTransformations={}));f.PeDefs=void 0;(function(p){p.init=function(){p.PE_BUFFER_MAX=f._pe.PeDefs.prototype.PE_BUFFER_MAX;p.PE_NAME_MAX=f._pe.PeDefs.prototype.PE_NAME_MAX;p.PE_MGRS_MAX=f._pe.PeDefs.prototype.PE_MGRS_MAX;p.PE_USNG_MAX=f._pe.PeDefs.prototype.PE_USNG_MAX;p.PE_DD_MAX=f._pe.PeDefs.prototype.PE_DD_MAX;p.PE_DDM_MAX=f._pe.PeDefs.prototype.PE_DDM_MAX;p.PE_DMS_MAX=f._pe.PeDefs.prototype.PE_DMS_MAX;p.PE_UTM_MAX=f._pe.PeDefs.prototype.PE_UTM_MAX;
p.PE_PARM_MAX=f._pe.PeDefs.prototype.PE_PARM_MAX;p.PE_TYPE_NONE=f._pe.PeDefs.prototype.PE_TYPE_NONE;p.PE_TYPE_GEOGCS=f._pe.PeDefs.prototype.PE_TYPE_GEOGCS;p.PE_TYPE_PROJCS=f._pe.PeDefs.prototype.PE_TYPE_PROJCS;p.PE_TYPE_GEOGTRAN=f._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;p.PE_TYPE_COORDSYS=f._pe.PeDefs.prototype.PE_TYPE_COORDSYS;p.PE_TYPE_UNIT=f._pe.PeDefs.prototype.PE_TYPE_UNIT;p.PE_TYPE_LINUNIT=f._pe.PeDefs.prototype.PE_TYPE_LINUNIT;p.PE_STR_OPTS_NONE=f._pe.PeDefs.prototype.PE_STR_OPTS_NONE;p.PE_STR_AUTH_NONE=
f._pe.PeDefs.prototype.PE_STR_AUTH_NONE;p.PE_STR_AUTH_TOP=f._pe.PeDefs.prototype.PE_STR_AUTH_TOP;p.PE_STR_NAME_CANON=f._pe.PeDefs.prototype.PE_STR_NAME_CANON;p.PE_PARM_X0=f._pe.PeDefs.prototype.PE_PARM_X0;p.PE_PARM_ND=f._pe.PeDefs.prototype.PE_PARM_ND;p.PE_TRANSFORM_1_TO_2=f._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;p.PE_TRANSFORM_2_TO_1=f._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;p.PE_TRANSFORM_P_TO_G=f._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;p.PE_TRANSFORM_G_TO_P=f._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
p.PE_HORIZON_RECT=f._pe.PeDefs.prototype.PE_HORIZON_RECT;p.PE_HORIZON_POLY=f._pe.PeDefs.prototype.PE_HORIZON_POLY;p.PE_HORIZON_LINE=f._pe.PeDefs.prototype.PE_HORIZON_LINE;p.PE_HORIZON_DELTA=f._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(f.PeDefs||(f.PeDefs={}));f.PeFactory=void 0;(function(p){function E(F,L){let x=null,y=Q[F];y||(y={},Q[F]=y);y.hasOwnProperty(String(L))?x=y[L]:(F=f._pe.PeFactory.prototype.factoryByType(F,L),f._pe.compare(F,f._pe.NULL)||(x=F,y[L]=x));return x=v(x)}const Q={},H={},v=F=>
{if(F){const L=F.getType();switch(L){case f.PeDefs.PE_TYPE_GEOGCS:F=f._pe.castObject(F,f._pe.PeGeogcs);break;case f.PeDefs.PE_TYPE_PROJCS:F=f._pe.castObject(F,f._pe.PeProjcs);break;case f.PeDefs.PE_TYPE_GEOGTRAN:F=f._pe.castObject(F,f._pe.PeGeogtran);break;default:L&f.PeDefs.PE_TYPE_UNIT&&(F=f._pe.castObject(F,f._pe.PeUnit))}}return F};p.initialize=function(){f._pe.PeFactory.prototype.initialize(null)};p.coordsys=function(F){return E(f.PeDefs.PE_TYPE_COORDSYS,F)};p.factoryByType=E;p.fromString=function(F,
L){let x=null,y=H[F];y||(y={},H[F]=y);y.hasOwnProperty(L)?x=y[L]:(F=f._pe.PeFactory.prototype.fromString(F,L),f._pe.compare(F,f._pe.NULL)||(x=F,y[L]=x));return x=v(x)};p.geogcs=function(F){return E(f.PeDefs.PE_TYPE_GEOGCS,F)};p.geogtran=function(F){return E(f.PeDefs.PE_TYPE_GEOGTRAN,F)};p.getCode=function(F){return f._pe.PeFactory.prototype.getCode(F)};p.projcs=function(F){return E(f.PeDefs.PE_TYPE_PROJCS,F)};p.unit=function(F){return E(f.PeDefs.PE_TYPE_UNIT,F)}})(f.PeFactory||(f.PeFactory={}));f.PeGCSExtent=
null;f.PeGTlistExtended=void 0;(function(p){let E;p.init=function(){p.PE_GTLIST_OPTS_COMMON=f._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;E=f._pe._pe_getPeGTlistExtendedEntrySize()};p.getGTlist=function(Q,H,v,F,L,x){let y=null;const A=new f._pe.PeInteger(x);try{const w=f._pe.PeGTlistExtended.prototype.getGTlist(Q,H,v,F,L,A);if(x=A.val)if(y=[w],1<x){const z=f._pe.getPointer(w);for(Q=1;Q<x;Q++)y.push(f._pe.wrapPointer(z+E*Q,f._pe.PeGTlistExtendedEntry))}}finally{f._pe.destroy(A)}return y}})(f.PeGTlistExtended||
(f.PeGTlistExtended={}));f.PeGTlistExtendedEntry=void 0;(function(p){p.destroy=function(E){if(E&&E.length){for(const Q of E)k(Q),Q.getEntries().forEach(H=>{k(H);H=H.getGeogtran();k(H);H.getParameters().forEach(k);[H.getGeogcs1(),H.getGeogcs2()].forEach(v=>{k(v);const F=v.getDatum();k(F);k(F.getSpheroid());k(v.getPrimem());k(v.getUnit())})});f._pe.PeGTlistExtendedEntry.prototype.Delete(E[0])}}})(f.PeGTlistExtendedEntry||(f.PeGTlistExtendedEntry={}));f.PeGTTransformations=void 0;(function(p){p.geogToGeog=
function(E,Q,H,v,F){f._pe.ensureCache.prepare();var L=O(H);const x=H===L;L=f._pe.ensureFloat64(L);let y=0;v&&(y=f._pe.ensureFloat64(v));(E=f._pe._pe_geog_to_geog(f._pe.getPointer(E),Q,L,y,F))&&C(H,Q,L,x);return E}})(f.PeGTTransformations||(f.PeGTTransformations={}));f.PeNotationDms=void 0;(function(p){const E=(H,v,F,L,x,y)=>{f._pe.ensureCache.prepare();switch(H){case "dd":var A=f._pe._pe_geog_to_dd;var w=f.PeDefs.PE_DD_MAX;break;case "ddm":A=f._pe._pe_geog_to_ddm;w=f.PeDefs.PE_DDM_MAX;break;case "dms":A=
f._pe._pe_geog_to_dms,w=f.PeDefs.PE_DMS_MAX}H=0;v&&(H=f._pe.getPointer(v));v=O(L);v=f._pe.ensureFloat64(v);w=q(F,w);L=f._pe.ensureInt32(w);if(x=A(H,F,v,x,L))for(A=0;A<F;A++)y[A]=f._pe.UTF8ToString(w[A]);return x},Q=(H,v,F,L,x)=>{f._pe.ensureCache.prepare();switch(H){case "dd":var y=f._pe._pe_dd_to_geog;break;case "ddm":y=f._pe._pe_ddm_to_geog;break;case "dms":y=f._pe._pe_dms_to_geog}H=0;v&&(H=f._pe.getPointer(v));v=L.map(A=>f._pe.ensureString(A));L=f._pe.ensureInt32(v);v=f._pe.ensureFloat64(Array(2*
F));(y=y(H,F,L,v))&&C(x,F,v);return y};p.geogToDms=function(H,v,F,L,x){return E("dms",H,v,F,L,x)};p.dmsToGeog=function(H,v,F,L){return Q("dms",H,v,F,L)};p.geogToDdm=function(H,v,F,L,x){return E("ddm",H,v,F,L,x)};p.ddmToGeog=function(H,v,F,L){return Q("ddm",H,v,F,L)};p.geogToDd=function(H,v,F,L,x){return E("dd",H,v,F,L,x)};p.ddToGeog=function(H,v,F,L){return Q("dd",H,v,F,L)}})(f.PeNotationDms||(f.PeNotationDms={}));f.PeNotationMgrs=void 0;(function(p){p.init=function(){p.PE_MGRS_STYLE_NEW=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;
p.PE_MGRS_STYLE_OLD=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;p.PE_MGRS_STYLE_AUTO=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;p.PE_MGRS_180_ZONE_1_PLUS=f._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;p.PE_MGRS_ADD_SPACES=f._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};p.geogToMgrsExtended=function(E,Q,H,v,F,L,x){f._pe.ensureCache.prepare();let y=0;E&&(y=f._pe.getPointer(E));E=O(H);H=f._pe.ensureFloat64(E);E=q(Q,f.PeDefs.PE_MGRS_MAX);const A=f._pe.ensureInt32(E);if(v=f._pe._pe_geog_to_mgrs_extended(y,
Q,H,v,F,L,A))for(F=0;F<Q;F++)x[F]=f._pe.UTF8ToString(E[F]);return v};p.mgrsToGeogExtended=function(E,Q,H,v,F){f._pe.ensureCache.prepare();let L=0;E&&(L=f._pe.getPointer(E));E=H.map(x=>f._pe.ensureString(x));H=f._pe.ensureInt32(E);E=f._pe.ensureFloat64(Array(2*Q));(v=f._pe._pe_mgrs_to_geog_extended(L,Q,H,v,E))&&C(F,Q,E);return v}})(f.PeNotationMgrs||(f.PeNotationMgrs={}));f.PeNotationUsng=void 0;(function(p){p.geogToUsng=function(E,Q,H,v,F,L,x){f._pe.ensureCache.prepare();let y=0;E&&(y=f._pe.getPointer(E));
E=O(H);H=f._pe.ensureFloat64(E);E=q(Q,f.PeDefs.PE_MGRS_MAX);const A=f._pe.ensureInt32(E);if(v=f._pe._pe_geog_to_usng(y,Q,H,v,F,L,A))for(F=0;F<Q;F++)x[F]=f._pe.UTF8ToString(E[F]);return v};p.usngToGeog=function(E,Q,H,v){f._pe.ensureCache.prepare();var F=0;E&&(F=f._pe.getPointer(E));E=H.map(L=>f._pe.ensureString(L));H=f._pe.ensureInt32(E);E=f._pe.ensureFloat64(Array(2*Q));(F=f._pe._pe_usng_to_geog(F,Q,H,E))&&C(v,Q,E);return F}})(f.PeNotationUsng||(f.PeNotationUsng={}));f.PeNotationUtm=void 0;(function(p){p.init=
function(){p.PE_UTM_OPTS_NONE=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;p.PE_UTM_OPTS_ADD_SPACES=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;p.PE_UTM_OPTS_NS=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};p.geogToUtm=function(E,Q,H,v,F){f._pe.ensureCache.prepare();var L=0;E&&(L=f._pe.getPointer(E));E=O(H);H=f._pe.ensureFloat64(E);E=q(Q,f.PeDefs.PE_UTM_MAX);const x=f._pe.ensureInt32(E);if(v=f._pe._pe_geog_to_utm(L,Q,H,v,x))for(L=0;L<Q;L++)F[L]=f._pe.UTF8ToString(E[L]);return v};p.utmToGeog=
function(E,Q,H,v,F){f._pe.ensureCache.prepare();let L=0;E&&(L=f._pe.getPointer(E));E=H.map(x=>f._pe.ensureString(x));H=f._pe.ensureInt32(E);E=f._pe.ensureFloat64(Array(2*Q));(v=f._pe._pe_utm_to_geog(L,Q,H,v,E))&&C(F,Q,E);return v}})(f.PeNotationUtm||(f.PeNotationUtm={}));f.PePCSInfo=void 0;(function(p){const E=new Map;p.init=function(){p.PE_PCSINFO_OPTION_NONE=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;p.PE_PCSINFO_OPTION_DOMAIN=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;p.PE_POLE_OUTSIDE_BOUNDARY=
f._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;p.PE_POLE_POINT=f._pe.PePCSInfo.prototype.PE_POLE_POINT};p.generate=function(Q,H=p.PE_PCSINFO_OPTION_DOMAIN){let v=null,F=null;E.has(Q)&&(F=E.get(Q),F[H]&&(v=F[H]));v||(v=f._pe.PePCSInfo.prototype.generate(Q,H),F||(F=[],E.set(Q,F)),F[H]=v);return v}})(f.PePCSInfo||(f.PePCSInfo={}));f.PeVersion=void 0;(function(p){p.versionString=function(){return f._pe.PeVersion.prototype.version_string()}})(f.PeVersion||(f.PeVersion={}));const e=Object.freeze(Object.defineProperty({__proto__:null,
get PeCSTransformations(){return f.PeCSTransformations},get PeDefs(){return f.PeDefs},get PeFactory(){return f.PeFactory},get PeGCSExtent(){return f.PeGCSExtent},get PeGTTransformations(){return f.PeGTTransformations},get PeGTlistExtended(){return f.PeGTlistExtended},get PeGTlistExtendedEntry(){return f.PeGTlistExtendedEntry},get PeNotationDms(){return f.PeNotationDms},get PeNotationMgrs(){return f.PeNotationMgrs},get PeNotationUsng(){return f.PeNotationUsng},get PeNotationUtm(){return f.PeNotationUtm},
get PePCSInfo(){return f.PePCSInfo},get PeVersion(){return f.PeVersion},_init:h,get _pe(){return f._pe},isLoaded:ha,isSupported:W,load:J},Symbol.toStringTag,{value:"Module"}));f._init=h;f.isLoaded=ha;f.isSupported=W;f.load=J;f.pe=e})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(m,f){const la=Math.PI/180;var ba=f.earth.radius;const P=f.earth.eccentricitySquared;ba={a1:ba*P,a2:ba*P*ba*P,a3:ba*P*P/2,a4:ba*P*ba*P*2.5,a5:ba*P+ba*P*P/2,a6:1-P};f={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:f.earth.radius,f:f.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:f.moon.radius,f:f.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:f.mars.radius,f:f.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:f.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};m.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;m.earthEllipsoidConstants=ba;m.spheroids=f;m.toRadians=la;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./GeographicTransformationStep"],function(m,f){return function(){function la(P){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(P&&P.steps)for(const ha of P.steps)ha instanceof f?this.steps.push(ha):this.steps.push(new f({wkid:ha.wkid,wkt:ha.wkt,isInverse:ha.isInverse}))}la.cacheKey=function(P,ha){return[void 0!==P.wkid&&null!==P.wkid?P.wkid.toString():"-1",void 0!==P.wkt&&null!==P.wkt?P.wkt.toString():"",void 0!==ha.wkid&&null!==ha.wkid?ha.wkid.toString():"-1",void 0!==
ha.wkt&&null!==ha.wkt?ha.wkt.toString():""].join()};la.fromGE=function(P){const ha=new la;let W="";for(const J of P.steps)P=f.fromGE(J),ha.steps.push(P),W+=P.uid.toString()+",";ha._cachedProjection={};ha._gtlistentry=null;ha._chain=W;return ha};var ba=la.prototype;ba.getInverse=function(){const P=new la;P.steps=[];for(let ha=this.steps.length-1;0<=ha;ha--)P.steps.push(this.steps[ha].getInverse());return P};ba.getGTListEntry=function(){let P="";for(const ha of this.steps)P+=ha.uid.toString()+",";P!==
this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=P);return this._gtlistentry};ba.assignCachedGe=function(P,ha,W){this._cachedProjection[la.cacheKey(P,ha)]=W};ba.getCachedGeTransformation=function(P,ha){let W="";for(const J of this.steps)W+=J.uid.toString()+",";W!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=W);P=this._cachedProjection[la.cacheKey(P,ha)];return void 0===P?null:P};return m._createClass(la)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(m){let f=0;return function(){function la(ba){this.uid=f++;ba?(this._wkt=null!=ba.wkt?ba.wkt:null,this._wkid=null!=ba.wkid?ba.wkid:-1,this._isInverse=null!=ba.isInverse?!0===ba.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}la.fromGE=function(ba){const P=new la;P._wkt=ba.wkt;P._wkid=ba.wkid;P._isInverse=ba.isInverse;return P};la.prototype.getInverse=function(){const ba=new la;ba._wkt=this.wkt;ba._wkid=this._wkid;ba._isInverse=!this.isInverse;return ba};m._createClass(la,[{key:"wkt",
get:function(){return this._wkt},set:function(ba){this._wkt=ba;this.uid=f++}},{key:"wkid",get:function(){return this._wkid},set:function(ba){this._wkid=ba;this.uid=f++}},{key:"isInverse",get:function(){return this._isInverse},set:function(ba){this._isInverse=ba;this.uid=f++}}]);return la}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/unitUtils","./spatialReferenceUtils"],function(m,f,la){m.getGeometryZScaler=function(ba,P,ha){if(null==P||null==ha||ha.vcsWkid||la.equals(P,
ha))return null;P=f.getMetersPerVerticalUnitForSR(P);ha=f.getMetersPerVerticalUnitForSR(ha);const W=P/ha;if(1===W)return null;switch(ba){case "point":case "esriGeometryPoint":return J=>{J&&null!=J.z&&(J.z*=W)};case "polyline":case "esriGeometryPolyline":return J=>{if(J)for(const h of J.paths)for(const k of h)2<k.length&&(k[2]*=W)};case "polygon":case "esriGeometryPolygon":return J=>{if(J)for(const h of J.rings)for(const k of h)2<k.length&&(k[2]*=W)};case "multipoint":case "esriGeometryMultipoint":return J=>
{if(J)for(const h of J.points)2<h.length&&(h[2]*=W)};case "extent":case "esriGeometryEnvelope":return J=>{J&&null!=J.zmin&&null!=J.zmax&&(J.zmin*=W,J.zmax*=W)};default:return null}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(m,f,la,ba,P,ha,W,J,h,k,q){function O(H){const v=[];let F=0,L=0;for(let x=0;x<H.length;x++){const y=H[x];let A=null;for(let w=0;w<y.length;w++)A=y[w],v.push(A),0===w?L=F=A[0]:(F=Math.min(F,A[0]),L=Math.max(L,A[0]));A&&v.push([(F+L)/2,0])}return v}function C(H,v){if(!(H instanceof ha||H instanceof P))throw Q.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new la("straightLineDensify: the input geometry is neither polyline nor polygon");var F=W.getGeometryParts(H);
const L=[];for(const y of F){F=[];L.push(F);F.push([y[0][0],y[0][1]]);for(let A=0;A<y.length-1;A++){const w=y[A][0],z=y[A][1],I=y[A+1][0],Y=y[A+1][1];var x=Math.sqrt((I-w)*(I-w)+(Y-z)*(Y-z));const ia=(Y-z)/x,N=(I-w)/x,M=x/v;if(1<M){for(let r=1;r<=M-1;r++){const u=r*v;F.push([N*u+w,ia*u+z])}x=(x+Math.floor(M-1)*v)/2;F.push([N*x+w,ia*x+z])}F.push([I,Y])}}return"polygon"===H.type?new P({rings:L,spatialReference:H.spatialReference}):new ha({paths:L,spatialReference:H.spatialReference})}function S(H,v,
F){v&&(H=C(H,1E6),H=h.webMercatorToGeographic(H,!0));F&&(H=W.updatePolyGeometry(H,F));return H}function e(H,v,F){if(Array.isArray(H)){var L=H[0];L>v?(F=W.offsetMagnitude(L,v),H[0]=L+-2*F*v):L<F&&(v=W.offsetMagnitude(L,F),H[0]=L+-2*v*F)}else L=H.x,L>v?(F=W.offsetMagnitude(L,v),H=H.clone().offset(-2*F*v,0)):L<F&&(v=W.offsetMagnitude(L,F),H=H.clone().offset(-2*v*F,0));return H}function p(H,v){let F=-1;for(let L=0;L<v.cutIndexes.length;L++){const x=v.cutIndexes[L],y=v.geometries[L],A=W.getGeometryParts(y);
for(let w=0;w<A.length;w++){const z=A[w];z.some(I=>{if(180>I[0])return!0;I=0;for(var Y=0;Y<z.length;Y++){var ia=z[Y][0];I=ia>I?ia:I}I=Number(I.toFixed(9));I=-360*W.offsetMagnitude(I,180);for(Y=0;Y<z.length;Y++)ia=y.getPoint(w,Y),y.setPoint(w,Y,ia.clone().offset(I,0));return!0})}if(x===F)if("polygon"===H[0].type)for(const w of W.getGeometryParts(y))H[x]=H[x].addRing(w);else{if("polyline"===H[0].type)for(const w of W.getGeometryParts(y))H[x]=H[x].addPath(w)}else F=x,H[x]=y}return H}async function E(H,
v,F){if(!Array.isArray(H))return E([H],v);v&&"string"!==typeof v&&Q.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var L="string"===typeof v?v:v?.url??f.geometryServiceUrl;let x,y,A;let w=0;var z=[];v=[];for(var I of H)if(null==I)v.push(I);else{if(!Y){var Y=I.spatialReference;var ia=J.getInfo(Y);var N=(x=Y.isWebMercator)?102100:4326;y=W.cutParams[N].maxX;A=W.cutParams[N].minX;var M=W.cutParams[N].plus180Line;N=W.cutParams[N].minus180Line}if(ia)if("mesh"===
I.type)v.push(I);else if("point"===I.type)v.push(e(I.clone(),y,A));else if("multipoint"===I.type){var r=I.clone();r.points=r.points.map(u=>e(u,y,A));v.push(r)}else if("extent"===I.type)r=I.clone()._normalize(!1,!1,ia),v.push(r.rings?new P(r):r);else if(I.extent){r=I.extent;const u=2*W.offsetMagnitude(r.xmin,A)*y;let V=0===u?I.clone():W.updatePolyGeometry(I.clone(),u);r.offset(u,0);r.intersects(M)&&r.xmax!==y?(w=r.xmax>w?r.xmax:w,V=S(V,x),z.push(V),v.push("cut")):r.intersects(N)&&r.xmin!==A?(w=2*r.xmax*
y>w?2*r.xmax*y:w,V=S(V,x,360),z.push(V),v.push("cut")):v.push(V)}else v.push(I.clone());else v.push(I)}Y=W.offsetMagnitude(w,y);ia=-90;M=Y;for(I=new ha;0<Y;)N=-180+360*Y,I.addPath([[N,ia],[N,-1*ia]]),ia*=-1,Y--;if(0<z.length&&0<M){Y=await k.cut(L,z,I,F);Y=p(z,Y);ia=[];z=[];for(M=0;M<v.length;M++)I=v[M],"cut"!==I?z.push(I):(I=Y.shift(),N=H[M],null!=N&&"polygon"===N.type&&N.rings&&1<N.rings.length&&I.rings.length>=N.rings.length?(ia.push(I),z.push("simplify")):z.push(x?h.geographicToWebMercator(I):
I));if(!ia.length)return z;v=await q.simplify(L,ia,F);H=[];for(F=0;F<z.length;F++)L=z[F],"simplify"!==L?H.push(L):H.push(x?h.geographicToWebMercator(v.shift()):v.shift());return H}H=[];for(F=0;F<v.length;F++)L=v[F],"cut"!==L?H.push(L):(L=z.shift(),H.push(!0===x?h.geographicToWebMercator(L):L));return H}const Q=ba.getLogger("esri.geometry.support.normalizeUtils");m.getDenormalizedExtent=function(H){if(!H)return null;const v=H.extent;if(!v)return null;var F=H.spatialReference&&J.getInfo(H.spatialReference);
if(!F)return v;const [L,x]=F.valid;({width:F}=v);let {xmin:y,xmax:A}=v;[y,A]=[A,y];if("extent"===H.type||0===F||F<=x||F>2*x||y<L||A>x)return v;let w;switch(H.type){case "polygon":if(1<H.rings.length)w=O(H.rings);else return v;break;case "polyline":if(1<H.paths.length)w=O(H.paths);else return v;break;case "multipoint":w=H.points}H=v.clone();for(let z=0;z<w.length;z++){let I=w[z][0];0>I?(I+=x,A=Math.max(I,A)):(I-=x,y=Math.min(I,y))}H.xmin=y;H.xmax=A;return H.width<F?(H.xmin-=x,H.xmax-=x,H):v};m.normalizeCentralMeridian=
E;m.normalizeMapX=function(H,v){if(v=J.getInfo(v)){const [F,L]=v.valid;v=L-F;if(H<F)for(;H<F;)H+=v;if(H>L)for(;H>L;)H-=v}return H};m.straightLineDensify=C;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(m,f,la,ba){function P(ha){return ba.isPolygon(ha)?ha.rings:ha.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new f({paths:[[[2.0037508342788905E7,
-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:la.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:la.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:la.WGS84}),minus180Line:new f({paths:[[[-180,-180],[-180,180]]],spatialReference:la.WGS84})}};m.cutParams=f;m.getGeometryParts=P;m.offsetMagnitude=function(ha,
W){return Math.ceil((ha-W)/(2*W))};m.updatePolyGeometry=function(ha,W){const J=P(ha);for(const h of J)for(const k of h)k[0]+=W;return ha};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(m,f,la,ba,P){m.cut=async function(ha,W,J,h){ha=P.parseUrl(ha);const k=W[0].spatialReference;W={...h,query:{...ha.query,f:"json",sr:JSON.stringify(k),
target:JSON.stringify({geometryType:ba.getJsonType(W[0]),geometries:W}),cutter:JSON.stringify(J)}};W=await la(ha.path+"/cut",W);const {cutIndexes:q,geometries:O=[]}=W.data;return{cutIndexes:q,geometries:O.map(C=>{C=ba.fromJSON(C);C.spatialReference=k;return C})}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(m,f,la,ba,P,ha){function W(J,h,k){const q=
{};for(const C in J)if("declaredClass"!==C){var O=J[C];if(null!=O&&"function"!==typeof O)if(Array.isArray(O)){q[C]=[];for(let S=0;S<O.length;S++)q[C][S]=W(O[S])}else"object"===typeof O?O.toJSON?(O=O.toJSON(k&&k[C]),q[C]=h?O:JSON.stringify(O)):q[C]=h?O:JSON.stringify(O):q[C]=O}return q}m.asValidOptions=function(J,h){return h?{...h,query:{...(J??{}),...h.query}}:{query:J}};m.encode=W;m.getToken=function(J,h){return J?ha.supportsApiKey(J)&&(h||f.apiKey)?h||f.apiKey:la.id?.findCredential(J)?.token:null};
m.parseUrl=function(J){return"string"===typeof J?P.urlToObject(J):ba.clone(J)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports","../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(m,f,la,ba,P){m.simplify=async function(ha,W,J){const h="string"===typeof ha?la.urlToObject(ha):ha;ha=W[0].spatialReference;const k=ba.getJsonType(W[0]);W={...J,query:{...h.query,f:"json",sr:ha.wkid??
JSON.stringify(ha),geometries:JSON.stringify(P.encodeGeometries(W))}};({data:W}=await f(h.path+"/simplify",W));return P.decodeGeometries(W.geometries,k,ha)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(m,f){m.decodeGeometries=function(la,ba,P){const ha=f.getGeometryType(ba);return la.map(W=>{W=ha.fromJSON(W);W.spatialReference=P;return W})};m.encodeGeometries=function(la){return{geometryType:f.getJsonType(la[0]),
geometries:la.map(ba=>ba.toJSON())}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(m,f,la,ba,P,ha,W){function J(e,p){if(!p)return null;if("x"in p){var E={x:0,y:0};
[E.x,E.y]=e(p.x,p.y,q);null!=p.z&&(E.z=p.z);null!=p.m&&(E.m=p.m);return E}return"xmin"in p?(E={xmin:0,ymin:0,xmax:0,ymax:0},[E.xmin,E.ymin]=e(p.xmin,p.ymin,q),[E.xmax,E.ymax]=e(p.xmax,p.ymax,q),p.hasZ&&(E.zmin=p.zmin,E.zmax=p.zmax,E.hasZ=!0),p.hasM&&(E.mmin=p.mmin,E.mmax=p.mmax,E.hasM=!0),E):"rings"in p?{rings:h(p.rings,e),hasM:p.hasM,hasZ:p.hasZ}:"paths"in p?{paths:h(p.paths,e),hasM:p.hasM,hasZ:p.hasZ}:"points"in p?{points:k(p.points,e),hasM:p.hasM,hasZ:p.hasZ}:null}function h(e,p){const E=[];for(const Q of e)E.push(k(Q,
p));return E}function k(e,p){const E=[];for(const Q of e)e=p(Q[0],Q[1],[0,0]),E.push(e),2<Q.length&&e.push(Q[2]),3<Q.length&&e.push(Q[3]);return E}const q=[0,0],O=J.bind(null,W.lngLatToXY),C=J.bind(null,W.xyToLngLat),S=new (function(){function e(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var p=e.prototype;p.push=async function(E,Q,H){if(!(E&&E.length&&Q&&H)||ha.equals(Q,H))return E;const v={geometries:E,inSpatialReference:Q,outSpatialReference:H,resolve:null};this._jobs.push(v);
return new Promise(F=>{v.resolve=F;null===this._timer&&(this._timer=setTimeout(this._process,10))})};p._process=function(){this._timer=null;const E=this._jobs.shift();if(E){var {geometries:Q,inSpatialReference:H,outSpatialReference:v,resolve:F}=E;W.canProject(H,v)?ha.isWebMercator(v)?F(Q.map(O)):F(Q.map(C)):F(ba.projectMany(P.jsonAdapter,Q,H,v,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return f._createClass(e)}());m.checkProjectionSupport=async function(e,p){e&&
p&&(e=Array.isArray(e)?e.map(E=>null!=E.geometry?E.geometry.spatialReference:null).filter(la.isSome):[e],await ba.initializeProjection(e.map(E=>({source:E,dest:p}))))};m.project=function(e,p,E,Q){if(!e)return e;E||(E=p,p=e.spatialReference);return ha.isValid(p)&&ha.isValid(E)&&!ha.equals(p,E)?W.canProject(p,E)?(e=ha.isWebMercator(E)?O(e):C(e),e.spatialReference=E,e):ba.projectMany(P.jsonAdapter,[e],p,E,null,Q)[0]:e};m.projectMany=function(e,p,E){return S.push(e,p,E)};Object.defineProperty(m,Symbol.toStringTag,
{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(m,f){let la=f._createClass(function(J,h,k){this.x=J;this.y=h;this.spatialReference=k;this.m=this.z=void 0}),ba=f._createClass(function(J,h,k,q){this.rings=J;this.spatialReference=h;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);q&&(this.hasM=q)}),P=f._createClass(function(J,h,k,q){this.paths=J;this.spatialReference=h;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);q&&
(this.hasM=q)}),ha=f._createClass(function(J,h,k,q){this.points=J;this.spatialReference=h;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);q&&(this.hasM=q)}),W=f._createClass(function(J,h,k,q,O){this.xmin=J;this.ymin=h;this.xmax=k;this.ymax=q;this.spatialReference=O;this.mmax=this.mmin=this.zmax=this.zmin=void 0});m.jsonAdapter={convertToGEGeometry:function(J,h){return null==h?null:J.convertJSONToGeometry(h)},exportPoint:function(J,h,k){k=new la(J.getPointX(h),J.getPointY(h),k);const q=J.hasZ(h),O=J.hasM(h);
q&&(k.z=J.getPointZ(h));O&&(k.m=J.getPointM(h));return k},exportPolygon:function(J,h,k){return new ba(J.exportPaths(h),k,J.hasZ(h),J.hasM(h))},exportPolyline:function(J,h,k){return new P(J.exportPaths(h),k,J.hasZ(h),J.hasM(h))},exportMultipoint:function(J,h,k){return new ha(J.exportPoints(h),k,J.hasZ(h),J.hasM(h))},exportExtent:function(J,h,k){var q=J.hasZ(h);const O=J.hasM(h);k=new W(J.getXMin(h),J.getYMin(h),J.getXMax(h),J.getYMax(h),k);q&&(q=J.getZExtent(h),k.zmin=q.vmin,k.zmax=q.vmax);O&&(J=J.getMExtent(h),
k.mmin=J.vmin,k.mmax=J.vmax);return k}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(m,f,la,ba,P,ha,W,J,h,k,q,O,C,S,e,p,E,Q,H,v,F,L,x,y,A,w){function z(M){return null!=M&&M.every(r=>"exceedslimit"!==r.statisticType)}let I=f._createClass(function(M,r=null,u,V,ja){this.attributes=M;this.geometry=u;this.centroid=V;this.filterFlags=ja;this.groupId=-1;this.displayId=r});const Y=new W.MemCacheStorage(2E6);let ia=0,N=function(){function M(u){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:H.queryCapabilities};this.geometryType=u.geometryType;this.hasM=
!!u.hasM;this.hasZ=!!u.hasZ;this.objectIdField=u.objectIdField;this.spatialReference=u.spatialReference;this.definitionExpression=u.definitionExpression;this.featureStore=u.featureStore;this.aggregateAdapter=u.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=u.timeInfo;u.cacheSpatialQueries&&(this._geometryQueryCache=new W.MemCache(ia++ +"$$",Y));this.fieldsIndex=new y(u.fields);u.scheduler&&u.priority&&(this._frameTask=u.scheduler.registerTask(u.priority))}
var r=M.prototype;r.destroy=function(){this._frameTask=ha.removeMaybe(this._frameTask);this.clearCache();ha.destroyMaybe(this._geometryQueryCache);this._changeHandle=ha.removeMaybe(this._changeHandle);ha.destroyMaybe(this.fieldsIndex)};r.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};r.executeQuery=async function(u,V){try{return(await this._executeQuery(u,{},V)).createQueryResponse()}catch(ja){if(ja!==x.QUERY_ENGINE_EMPTY_RESULT)throw ja;
return(new v.QueryEngineResult([],u,this)).createQueryResponse()}};r.executeQueryForCount=async function(u={},V){try{return(await this._executeQuery(u,{returnGeometry:!1,returnCentroid:!1,outSR:null},V)).createQueryResponseForCount()}catch(ja){if(ja!==x.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}};r.executeQueryForExtent=async function(u,V){const ja=u.outSR;try{const va=await this._executeQuery(u,{returnGeometry:!0,returnCentroid:!1,outSR:null},V),Ba=va.size;if(!Ba)return{count:0,extent:null};const Ea=
await this._getBounds(va.items,va.spatialReference,ja||this.spatialReference);return{count:Ba,extent:Ea}}catch(va){if(va===x.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw va;}};r.executeQueryForIds=async function(u,V){return this.executeQueryForIdSet(u,V).then(ja=>Array.from(ja))};r.executeQueryForIdSet=async function(u,V){try{const ja=await this._executeQuery(u,{returnGeometry:!0,returnCentroid:!1,outSR:null},V),va=ja.items,Ba=new Set;await this._reschedule(()=>{for(const Ea of va)Ba.add(ja.featureAdapter.getObjectId(Ea))},
V);return Ba}catch(ja){if(ja===x.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ja;}};r.executeQueryForSnapping=async function(u,V){const {point:ja,distance:va,returnEdge:Ba,returnVertex:Ea}=u;if(!Ba&&!Ea)return{candidates:[]};const Fa=await this._reschedule(()=>this._checkQuerySupport(u.query),V),Ma=!e.equals(ja.spatialReference,this.spatialReference);Ma&&await Q.checkProjectionSupport(ja.spatialReference,this.spatialReference);var Ha="number"===typeof va?va:va.x,Ua="number"===typeof va?va:va.y;
Ha={xmin:ja.x-Ha,xmax:ja.x+Ha,ymin:ja.y-Ua,ymax:ja.y+Ua,spatialReference:ja.spatialReference};Ha=Ma?Q.project(Ha,this.spatialReference):Ha;if(!Ha)return{candidates:[]};Ua=(await S.normalizeCentralMeridian(C.fromJSON(ja),null,{signal:V}))[0];const Sa=(await S.normalizeCentralMeridian(C.fromJSON(Ha),null,{signal:V}))[0];if(null==Ua||null==Sa)return{candidates:[]};const Va=new v.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Sa.toJSON())),V),Fa,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Va),V);await this._reschedule(()=>this._executeTimeQuery(Va),V);await this._reschedule(()=>this._executeAttributesQuery(Va),V);V=Ua.toJSON();V=Ma?Q.project(V,this.spatialReference):V;return Va.createSnappingResponse({...u,point:V,distance:Ma?Math.max(Ha.xmax-Ha.xmin,Ha.ymax-Ha.ymin)/2:va},ja.spatialReference)};r.executeQueryForLatestObservations=async function(u,V){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new ba("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:u,timeInfo:this.timeInfo});try{const ja=await this._executeQuery(u,{},V);await this._reschedule(()=>this._filterLatest(ja),V);return ja.createQueryResponse()}catch(ja){if(ja!==x.QUERY_ENGINE_EMPTY_RESULT)throw ja;return(new v.QueryEngineResult([],u,this)).createQueryResponse()}};r.executeQueryForSummaryStatistics=async function(u={},V,ja){const {field:va,normalizationField:Ba,valueExpression:Ea}=V;return(await this._getQueryEngineResultForStats(u,{field:va,normalizationField:Ba,valueExpression:Ea},
ja)).createSummaryStatisticsResponse(V)};r.executeQueryForUniqueValues=async function(u={},V,ja){const {field:va,field2:Ba,field3:Ea,valueExpression:Fa}=V;return(await this._getQueryEngineResultForStats(u,{field:va,field2:Ba,field3:Ea,valueExpression:Fa},ja)).createUniqueValuesResponse(V)};r.executeQueryForClassBreaks=async function(u={},V,ja){const {field:va,normalizationField:Ba,valueExpression:Ea}=V;return(await this._getQueryEngineResultForStats(u,{field:va,normalizationField:Ba,valueExpression:Ea},
ja)).createClassBreaksResponse(V)};r.executeQueryForHistogram=async function(u={},V,ja){const {field:va,normalizationField:Ba,valueExpression:Ea}=V;return(await this._getQueryEngineResultForStats(u,{field:va,normalizationField:Ba,valueExpression:Ea},ja)).createHistogramResponse(V)};r.fetchRecomputedExtents=async function(u){const [V,ja]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),
this.spatialReference,this.spatialReference),null!=this._timeExtentPromise?this._timeExtentPromise:this._timeExtentPromise=L.getTimeExtent(this.timeInfo,this.featureStore)]);J.throwIfAborted(u);return{fullExtent:V,timeExtent:ja}};r._getBounds=async function(u,V,ja){const va=k.set(k.create(),k.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(u,Ba=>k.expandWithAABB(va,Ba));u={xmin:va[0],ymin:va[1],xmax:va[3],ymax:va[4],spatialReference:x.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&
isFinite(va[2])&&isFinite(va[5])&&(u.zmin=va[2],u.zmax=va[5]);V=Q.project(u,V,ja);V.spatialReference=x.cleanFromGeometryEngine(ja);0===V.xmax-V.xmin&&(ja=h.getMetersPerUnitForSR(V.spatialReference),V.xmin-=ja,V.xmax+=ja);0===V.ymax-V.ymin&&(ja=h.getMetersPerUnitForSR(V.spatialReference),V.ymin-=ja,V.ymax+=ja);this.hasZ&&null!=V.zmin&&null!=V.zmax&&0===V.zmax-V.zmin&&(ja=h.getMetersPerUnitForSR(V.spatialReference),V.zmin-=ja,V.zmax+=ja);return V};r._schedule=async function(u,V){return null!=this._frameTask?
this._frameTask.schedule(u,V):u(w.noBudget)};r._reschedule=async function(u,V){return null!=this._frameTask?this._frameTask.reschedule(u,V):u(w.noBudget)};r._getAllFeaturesQueryEngineResult=async function(u){return new v.QueryEngineResult(await this._getAllFeatures(),u,this)};r._getAllFeatures=async function(){if(null==this._allFeaturesPromise){const ja=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(va=>ja.push(va))})().then(()=>ja)}const u=this._allFeaturesPromise,V=await u;
return u===this._allFeaturesPromise?V.slice():this._getAllFeatures()};r._executeQuery=async function(u,V,ja){u=P.clone(u);u=await this._schedule(()=>x.normalizeQuery(u,this.definitionExpression,this.spatialReference),ja);u=await this._reschedule(()=>this._checkQuerySupport(u),ja);u={...u,...V};const va=await this._reschedule(()=>this._executeSceneFilterQuery(u,ja),ja),Ba=await this._reschedule(()=>this._executeGeometryQuery(u,va,ja),ja);await this._reschedule(()=>this._executeAggregateIdsQuery(Ba),
ja);await this._reschedule(()=>this._executeObjectIdsQuery(Ba),ja);await this._reschedule(()=>this._executeTimeQuery(Ba),ja);await this._reschedule(()=>this._executeAttributesQuery(Ba),ja);return Ba};r._executeSceneFilterQuery=async function(u,V){if(null==u.sceneFilter)return null;const {outSR:ja,returnGeometry:va,returnCentroid:Ba}=u;var Ea=this.featureStore.featureSpatialReference,Fa=u.sceneFilter.geometry;const Ma=null==Ea||e.equals(Ea,Fa.spatialReference)?Fa:Q.project(Fa,Ea);if(!Ma)return null;
Ea=va||Ba;Ea=e.isValid(ja)&&!e.equals(this.spatialReference,ja)&&Ea?async Va=>this._project(Va,ja):Va=>Va;const Ha=this.featureAdapter;Fa=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ma)),V);if("disjoint"===u.sceneFilter.spatialRelationship){if(!Fa.length)return null;const Va=new Set;for(var Ua of Fa)Va.add(Ha.getObjectId(Ua));const eb=await this._reschedule(()=>this._getAllFeatures(),V);Ua=await this._reschedule(async()=>{const kb=await F.getSpatialQueryOperator("esriSpatialRelDisjoint",
Ma,this.geometryType,this.hasZ,this.hasM),jb=await this._runSpatialFilter(eb,db=>!Va.has(Ha.getObjectId(db))||kb(Ha.getGeometry(db)),V);return new v.QueryEngineResult(jb,u,this)},V);return Ea(Ua)}if(!Fa.length)return new v.QueryEngineResult([],u,this);if(this._canExecuteSinglePass(Ma,u))return Ea(new v.QueryEngineResult(Fa,u,this));const Sa=await F.getSpatialQueryOperator("esriSpatialRelContains",Ma,this.geometryType,this.hasZ,this.hasM);Ua=await this._runSpatialFilter(Fa,Va=>Sa(Ha.getGeometry(Va)),
V);return Ea(new v.QueryEngineResult(Ua,u,this))};r._executeGeometryQuery=async function(u,V,ja){if(null!=V&&0===V.items.length)return V;u=null!=V?V.query:u;const {geometry:va,outSR:Ba,spatialRel:Ea,returnGeometry:Fa,returnCentroid:Ma}=u;var Ha=this.featureStore.featureSpatialReference;const Ua=!va||null==Ha||e.equals(Ha,va.spatialReference)?va:Q.project(va,Ha),Sa=Fa||Ma,Va=e.isValid(Ba)&&!e.equals(this.spatialReference,Ba),eb=this._geometryQueryCache&&null==V?Va&&Sa?JSON.stringify({originalFilterGeometry:va,
spatialRelationship:Ea,outSpatialReference:Ba}):JSON.stringify({originalFilterGeometry:va,spatialRelationship:Ea}):null;Ha=eb?this._geometryQueryCache.get(eb):null;if(null!=Ha)return new v.QueryEngineResult(Ha,u,this);Ha=async n=>{Va&&Sa&&await this._project(n,Ba);eb&&this._geometryQueryCache.put(eb,n.items,n.items.length+1);return n};if(!Ua)return Ha(null!=V?V:await this._getAllFeaturesQueryEngineResult(u));const kb=this.featureAdapter;let jb=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(va)),
ja);if("esriSpatialRelDisjoint"===Ea){if(!jb.length)return Ha(null!=V?V:await this._getAllFeaturesQueryEngineResult(u));const n=new Set;for(var db of jb)n.add(kb.getObjectId(db));const da=null!=V?V.items:await this._reschedule(()=>this._getAllFeatures(),ja);db=await this._reschedule(async()=>{const B=await F.getSpatialQueryOperator(Ea,Ua,this.geometryType,this.hasZ,this.hasM),aa=await this._runSpatialFilter(da,l=>!n.has(kb.getObjectId(l))||B(kb.getGeometry(l)),ja);return new v.QueryEngineResult(aa,
u,this)},ja);return Ha(db)}if(null!=V){const n=new la.PositionHint;jb=jb.filter(da=>0<=la.indexOf(V.items,da,V.items.length,n))}if(!jb.length)return Ha=new v.QueryEngineResult([],u,this),eb&&this._geometryQueryCache.put(eb,Ha.items,1),Ha;if(this._canExecuteSinglePass(Ua,u))return Ha(new v.QueryEngineResult(jb,u,this));const c=await F.getSpatialQueryOperator(Ea,Ua,this.geometryType,this.hasZ,this.hasM);db=await this._runSpatialFilter(jb,n=>c(kb.getGeometry(n)),ja);return Ha(new v.QueryEngineResult(db,
u,this))};r._executeAggregateIdsQuery=function(u){if(0!==u.items.length&&u.query.aggregateIds&&u.query.aggregateIds.length&&null!=this.aggregateAdapter){var V=new Set;for(const va of u.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(va).forEach(Ba=>V.add(Ba));var ja=this.featureAdapter.getObjectId;u.items=u.items.filter(va=>V.has(ja(va)))}};r._executeObjectIdsQuery=function(u){if(0!==u.items.length&&u.query.objectIds&&u.query.objectIds.length){var V=new Set(u.query.objectIds),ja=this.featureAdapter.getObjectId;
u.items=u.items.filter(va=>V.has(ja(va)))}};r._executeTimeQuery=function(u){if(0!==u.items.length){var V=L.getTimeOperator(this.timeInfo,u.query.timeExtent,this.featureAdapter);null!=V&&(u.items=u.items.filter(V))}};r._executeAttributesQuery=function(u){if(0!==u.items.length){var V=E.getWhereClause(u.query.where,this.fieldsIndex);if(V){if(!V.isStandardized)throw new TypeError("Where clause is not standardized");u.items=u.items.filter(ja=>V.testFeature(ja,this.featureAdapter))}}};r._runSpatialFilter=
async function(u,V,ja){if(!V)return u;if(null==this._frameTask)return u.filter(Fa=>V(Fa));let va=0;const Ba=[],Ea=async Fa=>{for(;va<u.length;){const Ma=u[va++];V(Ma)&&(Ba.push(Ma),Fa.madeProgress());Fa.done&&await this._reschedule(Ha=>Ea(Ha),ja)}};return this._reschedule(Fa=>Ea(Fa),ja).then(()=>Ba)};r._filterLatest=function(u){const {trackIdField:V,startTimeField:ja,endTimeField:va}=this.timeInfo,Ba=va||ja,Ea=new Map,Fa=this.featureAdapter.getAttribute;for(const Ma of u.items){const Ha=Fa(Ma,V),
Ua=Fa(Ma,Ba),Sa=Ea.get(Ha);(!Sa||Ua>Fa(Sa,Ba))&&Ea.set(Ha,Ma)}u.items=Array.from(Ea.values())};r._canExecuteSinglePass=function(u,V){({spatialRel:V}=V);return F.canQueryWithRBush(u)&&("esriSpatialRelEnvelopeIntersects"===V||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===V||"esriSpatialRelContains"===V||"esriSpatialRelWithin"===V))};r._project=async function(u,V){if(!V||e.equals(this.spatialReference,V))return u;const ja=this.featureAdapter;V=await Q.projectMany(u.items.map(va=>
x.getGeometry(this.geometryType,this.hasZ,this.hasM,ja.getGeometry(va))),this.spatialReference,V);u.items=V.map((va,Ba)=>ja.cloneWithGeometry(u.items[Ba],p.convertFromGeometry(va,this.hasZ,this.hasM)));return u};r._getQueryBBoxes=function(u){if(F.canQueryWithRBush(u)){if(C.isExtent(u))return[q.fromValues(u.xmin,u.ymin,u.xmax,u.ymax)];if(C.isPolygon(u))return u.rings.map(V=>q.fromValues(Math.min(V[0][0],V[2][0]),Math.min(V[0][1],V[2][1]),Math.max(V[0][0],V[2][0]),Math.max(V[0][1],V[2][1])))}return[O.getBoundsXY(q.create(),
u)]};r._searchFeatures=async function(u){const V=new Set;await Promise.all(u.map(ja=>this.featureStore.forEachInBounds(ja,va=>V.add(va))));u=Array.from(V.values());V.clear();return u};r._checkStatisticsSupport=async function(u,V){if(0>(u.distance??0)||null!=u.geometryPrecision||u.multipatchOption||u.pixelSize||u.relationParam||u.text||u.outStatistics||u.groupByFieldsForStatistics||u.having||u.orderByFields)throw new ba("feature-store:unsupported-query","Unsupported query options",{query:u});this._checkAttributesQuerySupport(u);
return Promise.all([this._checkStatisticsParamsSupport(V,u),F.checkSpatialQuerySupport(u,this.geometryType,this.spatialReference),Q.checkProjectionSupport(this.spatialReference,u.outSR)]).then(()=>u)};r._checkStatisticsParamsSupport=async function(u,V){var ja=[];u.valueExpression&&({arcadeUtils:ja}=await A.loadArcade(),ja=ja.extractFieldNames(u.valueExpression));u.field&&ja.push(u.field);u.field2&&ja.push(u.field2);u.field3&&ja.push(u.field3);u.normalizationField&&ja.push(u.normalizationField);if(!ja.length&&
!u.valueExpression)throw new ba("feature-store:unsupported-query","field or valueExpression is required",{params:u});E.validateFields(this.fieldsIndex,ja,{errorMessage:"Cannot calculate statistics for missing fields",query:V});E.validateFieldTypes(this.fieldsIndex,ja,{expressionName:"statistics",query:V})};r._checkQuerySupport=async function(u){if(0>(u.distance??0)||null!=u.geometryPrecision||u.multipatchOption||u.pixelSize||u.relationParam||u.text)throw new ba("feature-store:unsupported-query","Unsupported query options",
{query:u});this._checkAttributesQuerySupport(u);this._checkStatisticsQuerySupport(u);return Promise.all([F.checkSpatialQuerySupport(u,this.geometryType,this.spatialReference),Q.checkProjectionSupport(this.spatialReference,u.outSR)]).then(()=>u)};r._checkAttributesQuerySupport=function(u){const {outFields:V,orderByFields:ja,returnDistinctValues:va,outStatistics:Ba}=u,Ea=Ba?Ba.map(Fa=>Fa.outStatisticFieldName&&Fa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ja&&0<ja.length){const Fa=ja.map(Ma=>
{const Ha=Ma.toLowerCase();return Ha.includes(" asc")?Ha.split(" asc")[0]:Ha.includes(" desc")?Ha.split(" desc")[0]:Ma}).filter(Ma=>!Ea.includes(Ma));E.validateFields(this.fieldsIndex,Fa,{expressionName:"orderByFields",query:u})}if(V&&0<V.length)E.validateFields(this.fieldsIndex,V,{expressionName:"outFields",query:u});else if(va)throw new ba("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:u});E.validateWhere(this.fieldsIndex,u.where,u)};r._checkStatisticsQuerySupport=
function(u){const {outStatistics:V,groupByFieldsForStatistics:ja,having:va}=u;var Ba=ja&&ja.length,Ea=V&&V.length;if(va){if(!Ba||!Ea)throw new ba("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:u});E.validateHaving(this.fieldsIndex,va,V,u)}if(Ea&&z(V)){Ea=V.map(Fa=>Fa.onStatisticField).filter(Boolean);E.validateFields(this.fieldsIndex,Ea,{expressionName:"onStatisticFields",query:u});Ba&&E.validateFields(this.fieldsIndex,ja,{expressionName:"groupByFieldsForStatistics",
query:u});Ba=new Set([...E.validNumericTypesKebabDict.jsonValues,...E.validDateTypesKebabDict.jsonValues]);Ea=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...E.validNumericTypesKebabDict.apiValues,...E.validDateTypesKebabDict.apiValues]);for(const Fa of V){const {onStatisticField:Ma,statisticType:Ha}=Fa;if(("percentile_disc"===Ha||"percentile_cont"===Ha)&&"statisticParameters"in Fa){const {statisticParameters:Ua}=Fa;if(!Ua)throw new ba("feature-store:unsupported-query","statisticParameters should be set for percentile type",
{definition:Fa,query:u});}else if("count"!==Ha&&"min"!==Ha&&"max"!==Ha&&Ma&&E.hasInvalidFieldType(Ma,this.fieldsIndex,Ba))throw new ba("feature-store:unsupported-query",`outStatistics with '${Ha}' statistic type, only supports ${Ea} field types`,{definition:Fa,query:u});}}};r._getQueryEngineResultForStats=async function(u,V,ja){u=P.clone(u);try{u=await this._schedule(()=>x.normalizeQuery(u,this.definitionExpression,this.spatialReference),ja);u=await this._reschedule(()=>this._checkStatisticsSupport(u,
V),ja);const va=await this._reschedule(()=>this._executeSceneFilterQuery(u,ja),ja),Ba=await this._reschedule(()=>this._executeGeometryQuery(u,va,ja),ja);await this._reschedule(()=>this._executeAggregateIdsQuery(Ba),ja);await this._reschedule(()=>this._executeObjectIdsQuery(Ba),ja);await this._reschedule(()=>this._executeTimeQuery(Ba),ja);await this._reschedule(()=>this._executeAttributesQuery(Ba),ja);return Ba}catch(va){if(va!==x.QUERY_ENGINE_EMPTY_RESULT)throw va;return new v.QueryEngineResult([],
u,this)}};f._createClass(M,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return M}();m.Feature=I;m.QueryEngine=N;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(m,f,la){m.RemoveMode=void 0;(function(W){W[W.ALL=0]="ALL";W[W.SOME=1]="SOME"})(m.RemoveMode||(m.RemoveMode={}));let ba=function(){function W(h,k,q){this.name=h;this._storage=
k;this.id=`${ha++}:`;this.maxSize=this.size=0;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);q&&(this._storage.registerRemoveFunc(this.id,q),this._removeFunc=!0)}var J=W.prototype;J.destroy=function(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null};J.resetHitRate=function(){this._hit=this._miss=0};J.put=function(h,k,q,O=0){this._storage.put(this,h,k,q,O)};J.get=function(h){h=this._storage.get(this,
h);void 0===h?++this._miss:++this._hit;return h};J.pop=function(h){h=this._storage.pop(this,h);void 0===h?++this._miss:++this._hit;return h};J.updateSize=function(h,k,q){this._storage.updateSize(this,h,k,q)};J.clear=function(){this._storage.clear(this)};J.clearAll=function(){this._storage.clearAll()};J.resetStats=function(){this._storage.resetStats()};f._createClass(W,[{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},
{key:"performanceInfo",get:function(){return this._storage.performanceInfo}}]);return W}(),P=function(){function W(h=10485760){this._maxSize=h;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new la;this._users=new la}var J=W.prototype;J.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};J.register=function(h){this._users.push(h)};J.deregister=function(h){this._users.removeUnordered(h)};J.registerRemoveFunc=function(h,k){this._removeFuncs.push([h,
k])};J.deregisterRemoveFunc=function(h){this._removeFuncs.filterInPlace(k=>k[0]!==h)};J.put=function(h,k,q,O,C){k=h.id+k;const S=this._db.get(k);S&&(this._size-=S.size,h.size-=S.size,this._db.delete(k),S.entry!==q&&this._notifyRemove(k,S.entry,m.RemoveMode.ALL));O>this._maxSize?this._notifyRemove(k,q,m.RemoveMode.ALL):void 0===q?console.warn("Refusing to cache undefined entry "):!O||0>O?console.warn("Refusing to cache entry with invalid size "+O):(C=1+Math.max(C,-3)- -3,this._db.set(k,{entry:q,size:O,
lifetime:C,lives:C}),this._size+=O,h.size+=O,this._checkSizeLimits())};J.updateSize=function(h,k,q,O){k=h.id+k;const C=this._db.get(k);if(C&&C.entry===q){this._size-=C.size;for(h.size-=C.size;O>this._maxSize;)if(O=this._notifyRemove(k,q,m.RemoveMode.SOME),!(null!=O&&0<O)){this._db.delete(k);return}C.size=O;this._size+=O;h.size+=O;this._checkSizeLimits()}};J.pop=function(h,k){k=h.id+k;const q=this._db.get(k);if(q)return this._size-=q.size,h.size-=q.size,this._db.delete(k),++this._hit,q.entry;++this._miss};
J.get=function(h,k){k=h.id+k;h=this._db.get(k);if(void 0===h)++this._miss;else return this._db.delete(k),h.lives=h.lifetime,this._db.set(k,h),++this._hit,h.entry};J.resetStats=function(){this._hit=this._miss=0;this._users.forAll(h=>h.resetHitRate())};J.clear=function(h){const k=h.id;this._db.forEach((q,O)=>{O.startsWith(k)&&(this._size-=q.size,this._db.delete(O),this._notifyRemove(O,q.entry,m.RemoveMode.ALL))});h.size=0};J.clearAll=function(){this._db.forEach((h,k)=>this._notifyRemove(k,h.entry,m.RemoveMode.ALL));
this._users.forEach(h=>h.size=0);this._size=0;this._db.clear()};J._getHitRate=function(){return this._hit/(this._hit+this._miss)};J._notifyRemove=function(h,k,q){let O;this._removeFuncs.some(C=>h.startsWith(C[0])?(C=C[1](k,q),"number"===typeof C&&(O=C),!0):!1);return O};J._checkSizeLimits=function(){if(this._size>this._maxSize)for(const [h,k]of this._db)if(this._purgeItem(h,k),this._size<=.9*this.maxSize)return;this._users.forEach(h=>{if(0<h.maxSize&&h.size>h.maxSize)for(const [k,q]of this._db)if(k.startsWith(h.id)&&
(this._purgeItem(k,q,h),h.size<=.9*h.maxSize))break})};J._purgeItem=function(h,k,q=this._users.find(O=>h.startsWith(O.id))){this._db.delete(h);if(1>=k.lives){this._size-=k.size;q&&(q.size-=k.size);const O=this._notifyRemove(h,k.entry,m.RemoveMode.SOME);null!=O&&0<O&&(this._size+=O,q&&(q.size+=O),k.lives=k.lifetime,k.size=O,this._db.set(h,k))}else--k.lives,this._db.set(h,k)};f._createClass(W,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(h){this._maxSize=
Math.max(h,0);this._checkSizeLimits()}},{key:"performanceInfo",get:function(){const h={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},k={},q=[];this._db.forEach((S,e)=>{const p=S.lifetime;q[p]=(q[p]||0)+S.size;this._users.forAll(E=>{const {id:Q,name:H}=E;e.startsWith(Q)&&(k[H]=(k[H]||0)+S.size)})});const O={};this._users.forAll(S=>{const e=S.name;"hitRate"in S&&"number"===typeof S.hitRate&&
!isNaN(S.hitRate)&&0<S.hitRate?(k[e]=k[e]||0,O[e]=Math.round(100*S.hitRate)+"%"):O[e]="0%"});var C=Object.keys(k);C.sort((S,e)=>k[e]-k[S]);C.forEach(S=>h[S]=Math.round(k[S]/2**20)+"MB / "+O[S]);for(C=q.length-1;0<=C;--C){const S=q[C];S&&(h["Priority "+(C+-3-1)]=Math.round(S/this._size*100)+"%")}return h}}]);return W}(),ha=0;m.MIN_PRIORITY=-3;m.MemCache=ba;m.MemCacheStorage=P;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/jsonMap","../../../core/sql/WhereClauseCache"],function(m,f,la,ba){function P(E,Q,H={}){Q=ha(E,Q);if(!Q)throw new f("feature-store:unsupported-query","invalid SQL expression",{expression:E});const v=H.expressionName||"expression";if(H.validateStandardized&&!Q.isStandardized)throw new f("feature-store:unsupported-query",`${v} is not standard`,{expression:E});if(H.validateAggregate&&!Q.isAggregate)throw new f("feature-store:unsupported-query",`${v} does not contain a valid aggregate function`,
{expression:E});return Q.fieldNames}function ha(E,Q){return E?O.get(E,Q):null}function W(E,Q,H={}){H.errorMessage||(H.errorMessage=H.expressionName?`${H.expressionName} contains invalid fields`:"Fields are invalid");h(E,Q,(v,F)=>F.has(v),H)}function J(E,Q,H={}){H.errorMessage||(H.errorMessage=H.expressionName?`${H.expressionName} only supports ${p} field types`:`Only ${p} field types are supported`);h(E,Q,(v,F)=>!q(v,F),H)}function h(E,Q,H,v={}){const F=v.verifyExpression??!0,L=[];for(const x of Q)if(Q=
H(x,E),"*"!==x&&!Q)if(F){Q=k(x);try{const y=P(Q,E,{validateStandardized:!0});h(E,y,H,v)}catch(y){Q=y?.details;if(Q?.expression)throw y;Q?.invalidFields?L.push(...Q.invalidFields):L.push(x)}}else L.push(x);if(L.length)throw new f("feature-store:unsupported-query",v.errorMessage,{invalidFields:L,query:v.query});}function k(E){return E.split(" as ")[0]}function q(E,Q,H=e){return(E=Q.get(E))?!H.has(E.type):!1}const O=new ba.WhereClauseCache(50,500);ba=new la.JSONMap({esriFieldTypeString:"string"});const C=
new la.JSONMap({esriFieldTypeOID:"oid",esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long"}),S=new la.JSONMap({esriFieldTypeDate:"date"});la=new la.JSONMap({esriFieldTypeGUID:"guid",esriFieldTypeGlobalId:"global-id"});const e=new Set([...C.jsonValues,...S.jsonValues,...ba.jsonValues,...la.jsonValues]),p=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...C.apiValues,...S.apiValues,...ba.apiValues,
...la.apiValues]);m.getAliasFromFieldName=function(E){return E.split(" as ")[1]};m.getExpressionFromFieldName=k;m.getWhereClause=ha;m.hasInvalidFieldType=q;m.validDateTypesKebabDict=S;m.validGuidTypesKebabDict=la;m.validNumericTypesKebabDict=C;m.validStringTypesKebabDict=ba;m.validateFieldTypes=J;m.validateFields=W;m.validateHaving=function(E,Q,H,v){if(!Q)return!0;const F=P(Q,E,{validateAggregate:!0,expressionName:"having"});W(E,F,{expressionName:"having",query:v});J(E,F,{expressionName:"having",
query:v});if(!O.get(Q,E)?.getExpressions().every(L=>{const {aggregateType:x,field:y}=L,A=E.get(y)?.name;return H.some(w=>{const {onStatisticField:z,statisticType:I}=w;return E.get(z)?.name===A&&I.toLowerCase().trim()===x})}))throw new f("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:Q});return!0};m.validateWhere=function(E,Q,H){if(!Q)return!0;Q=P(Q,E,{validateStandardized:!0,expressionName:"where clause"});W(E,Q,{expressionName:"where clause",
query:H});J(E,Q,{expressionName:"where clause",query:H});return!0};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../LRUCache","./WhereClause"],function(m,f,la,ba){let P=function(){function ha(W,J){this._cache=new la.LRUCache(W);this._invalidCache=new la.LRUCache(J)}ha.prototype.get=function(W,J){const h=`${J.uid}:${W}`,k=this._cache.get(h);if(k)return k;if(void 0!==this._invalidCache.get(h))return null;
try{const q=ba.WhereClause.create(W,J);this._cache.put(h,q);return q}catch{return this._invalidCache.put(h,null),null}};return f._createClass(ha)}();m.WhereClauseCache=P;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./MemCache"],function(m,f,la){let ba=function(){function P(W,J){this._storage=new la.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=W;this._storage.register(this);
J&&this._storage.registerRemoveFunc("",J)}var ha=P.prototype;ha.destroy=function(){this._storage.deregister(this);this._storage.destroy()};ha.put=function(W,J,h=1){this._storage.put(this,W,J,h,1)};ha.pop=function(W){return this._storage.pop(this,W)};ha.get=function(W){return this._storage.get(this,W)};ha.clear=function(){this._storage.clearAll()};ha.resetHitRate=function(){};f._createClass(P,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(W){this._storage.maxSize=W}}]);return P}();
m.LRUCache=ba;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(m,f,la,ba,P,ha){function W(N,M){N+="";return N.length>=M?N:Array(M-N.length+1).join("0")+N}function J(N,M,r="0",u="0",V="0",ja="0",va="",Ba="0",Ea="0"){return"+"===va||"-"===va?(N=`${W(parseInt(N,10),4)}-${W(parseInt(M,10),2)}-${W(parseInt(r,
10),2)}`,M="",10>parseFloat(ja)&&(M="0"),u=`${W(parseInt(u,10),2)}:${W(parseInt(V,10),2)}:${M+parseFloat(ja).toString()}`,va=`${va}${W(parseInt(Ba,10),2)}:${W(parseInt(Ea,10),2)}`,new Date(N+"T"+u+va)):new Date(parseInt(N,10),parseInt(M,10)-1,parseInt(r,10),parseInt(u,10),parseInt(V,10),parseFloat(ja))}function h(N){let M=L.exec(N);if(null!==M){const [,r,u,V,ja,va,Ba]=M;return J(r,u,V,ja,va,Ba)}M=x.exec(N);if(null!==M){const [,r,u,V,ja,va,Ba,Ea,Fa,Ma]=M;return J(r,u,V,ja,va,Ba,Ea,Fa,Ma)}M=y.exec(N);
if(null!==M){const [,r,u,V,ja,va,Ba,Ea,Fa]=M;return J(r,u,V,ja,va,"0",Ba,Ea,Fa)}M=A.exec(N);if(null!==M){const [,r,u,V,ja,va]=M;return J(r,u,V,ja,va)}M=F.exec(N);if(null!==M){const [,r,u,V]=M;return J(r,u,V)}throw Error("SQL Invalid Timestamp");}function k(N){const M=F.exec(N);if(null===M)try{return h(N)}catch{throw Error("SQL Invalid Date");}const [,r,u,V]=M;return new Date(parseInt(r,10),parseInt(u,10)-1,parseInt(V,10))}function q(N){return Array.isArray(N)?N:[N]}function O(N){return null!==N?!0!==
N:null}function C(N,M){return null!=N&&null!=M?!0===N&&!0===M:!1===N||!1===M?!1:null}function S(N,M){return null!=N&&null!=M?!0===N||!0===M:!0===N||!0===M?!0:null}function e(N,M){if(null==N)return null;let r=!1;for(const u of M)if(null==u)r=null;else if(N===u){r=!0;break}return r}function p(N,M,r){if(null==N)return null;let u="",V=Y.Normal;for(let ja=0;ja<M.length;ja++){const va=M.charAt(ja);switch(V){case Y.Normal:va===r?V=Y.Escaped:u="-[]/{}()*+?.\\^$|".includes(va)?u+("\\"+va):"%"===va?u+".*":
"_"===va?u+".":u+va;break;case Y.Escaped:u="-[]/{}()*+?.\\^$|".includes(va)?u+("\\"+va):u+va,V=Y.Normal}}return(new RegExp("^"+u+"$","m")).test(N)}function E(N){return N instanceof Date?N.valueOf():N}function Q(N,M,r){if(null==M||null==r)return null;M=E(M);r=E(r);switch(N){case "\x3c\x3e":return M!==r;case "\x3d":return M===r;case "\x3e":return M>r;case "\x3c":return M<r;case "\x3e\x3d":return M>=r;case "\x3c\x3d":return M<=r}}function H(N,M,r){if("||"===N)return P.evaluateFunction("concat",[M,r]);
if(M instanceof P.SqlInterval)if(r instanceof Date)switch(N){case "+":return new Date(M.valueInMilliseconds()+r.getTime());case "-":return M.valueInMilliseconds()-r.getTime();case "*":return M.valueInMilliseconds()*r.getTime();case "/":return M.valueInMilliseconds()/r.getTime()}else if(r instanceof P.SqlInterval)switch(N){case "+":return P.SqlInterval.createFromMilliseconds(M.valueInMilliseconds()+r.valueInMilliseconds());case "-":return P.SqlInterval.createFromMilliseconds(M.valueInMilliseconds()-
r.valueInMilliseconds());case "*":return M.valueInMilliseconds()*r.valueInMilliseconds();case "/":return M.valueInMilliseconds()/r.valueInMilliseconds()}else M=M.valueInMilliseconds();else if(r instanceof P.SqlInterval)if(M instanceof Date)switch(N){case "+":return new Date(r.valueInMilliseconds()+M.getTime());case "-":return new Date(M.getTime()-r.valueInMilliseconds());case "*":return M.getTime()*r.valueInMilliseconds();case "/":return M.getTime()/r.valueInMilliseconds()}else r=r.valueInMilliseconds();
else if(M instanceof Date&&"number"===typeof r)switch(r*=864E5,M=M.getTime(),N){case "+":return new Date(M+r);case "-":return new Date(M-r);case "*":return new Date(M*r);case "/":return new Date(M/r)}else if(r instanceof Date&&"number"===typeof M)switch(M*=864E5,r=r.getTime(),N){case "+":return new Date(M+r);case "-":return new Date(M-r);case "*":return new Date(M*r);case "/":return new Date(M/r)}switch(N){case "+":return M+r;case "-":return M-r;case "*":return M*r;case "/":return M/r}}function v(N,
M,r,u){N=u.getAttribute(N,M);return null!=N&&1===r[M]?new Date(N):N}const F=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,L=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,x=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,A=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,w=new Set(["current_timestamp","current_date","current_time"]);let z=function(){function N(){}
N.makeBool=function(M){return!0===M};N.featureValue=function(M,r,u,V){return v(M,r,u,V)};N.equalsNull=function(M){return null===M};N.applyLike=function(M,r,u){return p(M,r,u)};N.ensureArray=function(M){return q(M)};N.applyIn=function(M,r){return e(M,r)};N.currentDate=function(){const M=new Date;M.setHours(0,0,0,0);return M};N.makeSqlInterval=function(M,r,u){return P.SqlInterval.createFromValueAndQualifer(M,r,u)};N.convertInterval=function(M){return M instanceof P.SqlInterval?M.valueInMilliseconds():
M};N.currentTimestamp=function(){return new Date};N.compare=function(M,r,u){return Q(M,r,u)};N.calculate=function(M,r,u){return H(M,r,u)};N.makeComparable=function(M){return E(M)};N.evaluateFunction=function(M,r){return P.evaluateFunction(M,r)};N.lookup=function(M,r){M=r[M];return void 0===M?null:M};N.between=function(M,r){return null==M||null==r[0]||null==r[1]?null:M>=r[0]&&M<=r[1]};N.notbetween=function(M,r){return null==M||null==r[0]||null==r[1]?null:M<r[0]||M>r[1]};N.ternaryNot=function(M){return O(M)};
N.ternaryAnd=function(M,r){return C(M,r)};N.ternaryOr=function(M,r){return S(M,r)};return f._createClass(N)}(),I=function(){function N(r,u){this.fieldsIndex=u;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=ha.WhereGrammar.parse(r);const {isStandardized:V,isAggregate:ja,referencedFieldNames:va}=this._extractExpressionInfo(u);this._referencedFieldNames=va;this.isStandardized=V;this.isAggregate=ja}N.create=function(r,u){return new N(r,u)};var M=N.prototype;M.testSet=
function(r,u=ia){const V={};for(const ja of this.fieldNames)V[ja]=r.map(va=>u.getAttribute(va,ja));return!!this._evaluateNode(this.parseTree,{attributes:V},ia)};M.calculateValue=function(r,u=ia){r=this._evaluateNode(this.parseTree,r,u);return r instanceof P.SqlInterval?r.valueInMilliseconds()/864E5:r};M.calculateValueCompiled=function(r,u=ia){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(r,this.parameters,u,this._datefields);if(la("esri-csp-restrictions"))return this.calculateValue(r,
u);this._compileMe();return this.parseTree._compiledVersion(r,this.parameters,u,this._datefields)};M.testFeature=function(r,u=ia){return!!this._evaluateNode(this.parseTree,r,u)};M.testFeatureCompiled=function(r,u=ia){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(r,this.parameters,u,this._datefields);if(la("esri-csp-restrictions"))return this.testFeature(r,u);this._compileMe();return!!this.parseTree._compiledVersion(r,this.parameters,u,this._datefields)};M.getFunctions=
function(){const r=new Set;this._visitAll(this.parseTree,u=>{"function"===u.type&&r.add(u.name.toLowerCase())});return Array.from(r)};M.getExpressions=function(){const r=new Map;this._visitAll(this.parseTree,u=>{if("function"===u.type){const V=u.name.toLowerCase();u=u.args.value[0];if("column-reference"===u.type){u=u.column;const ja=`${V}-${u}`;r.has(ja)||r.set(ja,{aggregateType:V,field:u})}}});return[...r.values()]};M.getVariables=function(){const r=new Set;this._visitAll(this.parseTree,u=>{"parameter"===
u.type&&r.add(u.value.toLowerCase())});return Array.from(r)};M._compileMe=function(){const r="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",r)).bind(z)};M._extractExpressionInfo=function(r){const u=[],V=new Set;let ja=!0,va=!0;this._visitAll(this.parseTree,Ba=>{switch(Ba.type){case "column-reference":const Ea=r?.get(Ba.column);let Fa,Ma;Ea?Fa=Ma=Ea.name??"":(Ma=Ba.column,
Fa=Ma.toLowerCase());Ea&&Ea.name&&("date"===Ea.type||"esriFieldTypeDate"===Ea.type)&&(this._datefields[Ea.name]=1);V.has(Fa)||(V.add(Fa),u.push(Ma));Ba.column=Ma;break;case "function":const {name:Ha,args:Ua}=Ba;Ba=Ua.value.length;ja&&(ja=P.isStandardized(Ha,Ba));va&&(va=ba.isAggregate(Ha,Ba))}});return{referencedFieldNames:Array.from(u),isStandardized:ja,isAggregate:va}};M._visitAll=function(r,u){if(null!=r)switch(u(r),r.type){case "when-clause":this._visitAll(r.operand,u);this._visitAll(r.value,
u);break;case "case-expression":for(const V of r.clauses)this._visitAll(V,u);"simple"===r.format&&this._visitAll(r.operand,u);null!==r.else&&this._visitAll(r.else,u);break;case "expression-list":for(const V of r.value)this._visitAll(V,u);break;case "unary-expression":this._visitAll(r.expr,u);break;case "binary-expression":this._visitAll(r.left,u);this._visitAll(r.right,u);break;case "function":this._visitAll(r.args,u)}};M.evaluateNodeToJavaScript=function(r){switch(r.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(r.value)+", "+JSON.stringify(r.qualifier)+","+JSON.stringify(r.op)+")";case "case-expression":var u="";if("simple"===r.format){var V="this.makeComparable("+this.evaluateNodeToJavaScript(r.operand)+")";u="( ";for(let ja=0;ja<r.clauses.length;ja++)u+=" ("+V+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(r.clauses[ja].operand)+")) ? ("+this.evaluateNodeToJavaScript(r.clauses[ja].value)+") : "}else for(u="( ",V=0;V<r.clauses.length;V++)u+=" this.makeBool("+
this.evaluateNodeToJavaScript(r.clauses[V].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(r.clauses[V].value)+") : ";u=null!==r.else?u+this.evaluateNodeToJavaScript(r.else):u+"null";return u+" )";case "parameter":return"this.lookup("+JSON.stringify(r.value.toLowerCase())+",lookups)";case "expression-list":u="[";for(V of r.value)"["!==u&&(u+=","),u+=this.evaluateNodeToJavaScript(V);return u+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(r.expr)+")";
case "binary-expression":switch(r.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case "IS":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")";case "ISNOT":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")"}throw Error("Not Supported Operator "+r.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(r.value);case "date":return"(new Date("+k(r.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+h(r.value).getTime().toString()+"))";case "current-time":return"date"===r.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(r.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(r.name)+","+this.evaluateNodeToJavaScript(r.args)+")"}throw Error("Unsupported sql syntax "+r.type);};M._evaluateNode=function(r,u,V){switch(r.type){case "interval":return u=
this._evaluateNode(r.value,u,V),P.SqlInterval.createFromValueAndQualifer(u,r.qualifier,r.op);case "case-expression":if("simple"===r.format){var ja=E(this._evaluateNode(r.operand,u,V));for(var va=0;va<r.clauses.length;va++)if(ja===E(this._evaluateNode(r.clauses[va].operand,u,V)))return this._evaluateNode(r.clauses[va].value,u,V)}else for(ja=0;ja<r.clauses.length;ja++)if(!0===this._evaluateNode(r.clauses[ja].operand,u,V))return this._evaluateNode(r.clauses[ja].value,u,V);return null!==r.else?this._evaluateNode(r.else,
u,V):null;case "parameter":return this.parameters[r.value.toLowerCase()];case "expression-list":ja=[];for(va of r.value)ja.push(this._evaluateNode(va,u,V));return ja;case "unary-expression":return O(this._evaluateNode(r.expr,u,V));case "binary-expression":switch(r.operator){case "AND":return C(this._evaluateNode(r.left,u,V),this._evaluateNode(r.right,u,V));case "OR":return S(this._evaluateNode(r.left,u,V),this._evaluateNode(r.right,u,V));case "IS":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(r.left,u,V);case "ISNOT":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(r.left,u,V);case "IN":return ja=q(this._evaluateNode(r.right,u,V)),e(this._evaluateNode(r.left,u,V),ja);case "NOT IN":return ja=q(this._evaluateNode(r.right,u,V)),O(e(this._evaluateNode(r.left,u,V),ja));case "BETWEEN":return ja=this._evaluateNode(r.left,u,V),r=this._evaluateNode(r.right,u,V),null==ja||null==r[0]||null==r[1]?null:ja>=E(r[0])&&ja<=
E(r[1]);case "NOTBETWEEN":return ja=this._evaluateNode(r.left,u,V),r=this._evaluateNode(r.right,u,V),null==ja||null==r[0]||null==r[1]?null:ja<E(r[0])||ja>E(r[1]);case "LIKE":return p(this._evaluateNode(r.left,u,V),this._evaluateNode(r.right,u,V),r.escape);case "NOT LIKE":return O(p(this._evaluateNode(r.left,u,V),this._evaluateNode(r.right,u,V),r.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return Q(r.operator,this._evaluateNode(r.left,u,V),this._evaluateNode(r.right,
u,V));case "-":case "+":case "*":case "/":case "||":return H(r.operator,this._evaluateNode(r.left,u,V),this._evaluateNode(r.right,u,V))}case "null":case "boolean":case "string":case "number":return r.value;case "date":return k(r.value);case "timestamp":return h(r.value);case "current-time":return u=new Date,"date"===r.mode&&u.setHours(0,0,0,0),u;case "column-reference":return v(u,r.column,this._datefields,V);case "data-type":return r.value;case "function":return u=this._evaluateNode(r.args,u,V),this.isAggregate?
ba.aggregateFunction(r.name,u):P.evaluateFunction(r.name,u)}throw Error("Unsupported sql syntax "+r.type);};f._createClass(N,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,r=>{"current-time"===r.type?this._hasDateFunctions=!0:"function"===r.type&&(this._hasDateFunctions=this._hasDateFunctions||w.has(r.name.toLowerCase()))});
return this._hasDateFunctions}}]);return N}();var Y;(function(N){N[N.Normal=0]="Normal";N[N.Escaped=1]="Escaped"})(Y||(Y={}));const ia={getAttribute(N,M){return(N&&"object"===typeof N.attributes?N.attributes:N)[M]}};m.WhereClause=I;m.defaultAttributeAdapter=ia;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(m){function f(P){let ha=0;for(let W=0;W<P.length;W++)ha+=P[W];return ha/P.length}function la(P){const ha=
f(P),W=P.length;let J=0;for(const h of P)J+=(h-ha)**2;return 1<W?J/(W-1):0}const ba={min:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?null:Math.min.apply(Math,P[0])},max:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?null:Math.max.apply(Math,P[0])},avg:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?null:f(P[0])},sum:{minParams:1,maxParams:1,evaluate:P=>{if(null==P[0])P=null;else{P=P[0];let ha=0;for(let W=0;W<P.length;W++)ha+=P[W];P=ha}return P}},stddev:{minParams:1,maxParams:1,evaluate:P=>null==
P[0]?null:Math.sqrt(la(P[0]))},count:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?null:P[0].length},var:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?null:la(P[0])}};m.aggregateFunction=function(P,ha){const W=ba[P.toLowerCase()];if(null==W)throw Error("Function Not Recognised");if(ha.length<W.minParams||ha.length>W.maxParams)throw Error(`Invalid Parameter count for call to ${P.toUpperCase()}`);return W.evaluate(ha)};m.isAggregate=function(P,ha){P=ba[P.toLowerCase()];return null!=P&&ha>=P.minParams&&
ha<=P.maxParams};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(m,f,la,ba,P){function ha(k){k=new Date(k.getTime());k.setHours(0,0,0,0);return k}function W(k,q){if(k instanceof Date)return q?ha(k):k;if("string"===typeof k||k instanceof String)if(k=P.DateTime.fromSQL(k),k.isValid)return q?
ha(k.toJSDate()):k.toJSDate();throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);}let J=function(){function k(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(q){if(null!==q.precision||null!==q.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k._parseSecondsComponent=function(q,O){O.includes(".")?(O=O.split("."),q.second=parseFloat(O[0]),q.millis=parseInt(O[1],10)):q.second=parseFloat(O)};
k.createFromMilliseconds=function(q){const O=new k;O.second=q/1E3;return O};k.createFromValueAndQualifer=function(q,O,C){let S=null;const e=new k;e.op="-"===C?"-":"+";if("interval-period"===O.type){k._fixDefaults(O);C=RegExp("^[0-9]{1,}$");if("year"===O.period||"month"===O.period)throw Error("Year-Month Intervals not supported");if("second"===O.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(q))k._parseSecondsComponent(e,q);else throw Error("Illegal Interval");else if(C.test(q))e[O.period]=parseFloat(q);
else throw Error("Illegal Interval");}else{k._fixDefaults(O.start);k._fixDefaults(O.end);if("year"===O.start.period||"month"===O.start.period)throw Error("Year-Month Intervals not supported");if("year"===O.end.period||"month"===O.end.period)throw Error("Year-Month Intervals not supported");switch(O.start.period){case "day":switch(O.end.period){case "hour":S=RegExp("^[0-9]{1,} [0-9]{1,}$");if(S.test(q))e[O.start.period]=parseFloat(q.split(" ")[0]),e[O.end.period]=parseFloat(q.split(" ")[1]);else throw Error("Illegal Interval");
break;case "minute":S=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(S.test(q))e[O.start.period]=parseFloat(q.split(" ")[0]),q=q.split(" ")[1].split(":"),e.hour=parseFloat(q[0]),e.minute=parseFloat(q[1]);else throw Error("Illegal Interval");break;case "second":S=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(S.test(q))e[O.start.period]=parseFloat(q.split(" ")[0]),q=q.split(" ")[1].split(":"),e.hour=parseFloat(q[0]),e.minute=parseFloat(q[1]),k._parseSecondsComponent(e,
q[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(O.end.period){case "minute":S=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(S.test(q))e.hour=parseFloat(q.split(":")[0]),e.minute=parseFloat(q.split(":")[1]);else throw Error("Illegal Interval");break;case "second":S=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(S.test(q))q=q.split(":"),e.hour=parseFloat(q[0]),e.minute=parseFloat(q[1]),k._parseSecondsComponent(e,q[2]);else throw Error("Illegal Interval");
break;default:throw Error("Invalid Interval.");}break;case "minute":switch(O.end.period){case "second":S=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(S.test(q))q=q.split(":"),e.minute=parseFloat(q[0]),k._parseSecondsComponent(e,q[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return e};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+
36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return f._createClass(k)}();const h={extract:{minParams:2,maxParams:2,evaluate:([k,q])=>{if(null==q)return null;if(q instanceof Date)switch(k.toUpperCase()){case "SECOND":return q.getSeconds();case "MINUTE":return q.getMinutes();case "HOUR":return q.getHours();case "DAY":return q.getDate();case "MONTH":return q.getMonth()+1;case "YEAR":return q.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,
maxParams:3,evaluate:k=>{if(2===k.length){const [q,O]=k;return null==q||null==O?null:q.toString().substring(O-1)}if(3===k.length){const [q,O,C]=k;return null==q||null==O||null==C?null:0>=C?"":q.toString().substring(O-1,O+C-1)}}},position:{minParams:2,maxParams:2,evaluate:([k,q])=>null==k||null==q?null:q.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var q=3===k.length,O=q?k[1]:" ";q=q?k[2]:k[1];if(null==O||null==q)return null;O=`(${ba.escapeRegExpString(O)})`;switch(k[0]){case "BOTH":return q.replaceAll(new RegExp(`^${O}*|${O}*$`,
"g"),"");case "LEADING":return q.replaceAll(new RegExp(`^${O}*`,"g"),"");case "TRAILING":return q.replaceAll(new RegExp(`${O}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,
maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},
sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const q=k[0];k=2===k.length?10**k[1]:1;return null==q?null:Math.round(q*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},
char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let q="";for(let O=0;O<k.length;O++){if(null==k[O])return null;q+=k[O].toString()}return q}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:k=>{for(const q of k)if(null!==
q)return q;return null}},cosh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cosh(k[0])},sinh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sinh(k[0])},tanh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tanh(k[0])},nullif:{minParams:2,maxParams:2,evaluate:k=>{const q=k[0];k=k[1];return(q instanceof Date?q.valueOf():q)===(k instanceof Date?k.valueOf():k)?null:q}},cast:{minParams:2,maxParams:2,evaluate:k=>{var q=k[0];k=k[1];if(null===q)return null;switch(k.type){case "integer":q=
parseInt(q,10);if(isNaN(q))throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);return q;case "smallint":q=parseInt(q,10);if(isNaN(q))throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);if(32767<q||-32767>q)throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);return q;case "float":case "real":q=parseFloat(q);if(isNaN(q))throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);return q;case "date":return W(q,!0);case "timestamp":return W(q,!1);case "varchar":q=q.toString();if(q.length>k.size)throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);
return q;default:throw new la.SqlError(la.SqlErrorCodes.InvalidDataType);}}}};m.SqlInterval=J;m.evaluateFunction=function(k,q){const O=h[k.toLowerCase()];if(null==O)throw Error("Function Not Recognised");if(q.length<O.minParams||q.length>O.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return O.evaluate(q)};m.isStandardized=function(k,q){k=h[k.toLowerCase()];return null!=k&&q>=k.minParams&&q<=k.maxParams};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(m,f,la){m.SqlErrorCodes=void 0;(function(J){J.InvalidFunctionParameters="InvalidFunctionParameters";J.UnsupportedSqlFunction="UnsupportedSqlFunction";J.UnsupportedOperator="UnsupportedOperator";J.UnsupportedSyntax="UnsupportedSyntax";J.UnsupportedIsRhs="UnsupportedIsRhs";J.UnsupportedIsLhs="UnsupportedIsLhs";J.InvalidDataType="InvalidDataType";J.CannotCastValue=
"CannotCastValue";J.MissingStatisticParameters="MissingStatisticParameters"})(m.SqlErrorCodes||(m.SqlErrorCodes={}));const ba={[m.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[m.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[m.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[m.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[m.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",
[m.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[m.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[m.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[m.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let P=function(J){function h(k,q){k=J.call(this,la.doSubstitutions(ba[k],q))||this;k.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(k),
h);return k}f._inherits(h,J);return f._createClass(h)}(f._wrapNativeSuper(Error));m.FeatureSetErrorCodes=void 0;(function(J){J.NeverReach="NeverReach";J.NotImplemented="NotImplemented";J.Cancelled="Cancelled";J.InvalidStatResponse="InvalidStatResponse";J.InvalidRequest="InvalidRequest";J.RequestFailed="RequestFailed";J.MissingFeatures="MissingFeatures";J.AggregationFieldNotFound="AggregationFieldNotFound";J.DataElementsNotFound="DataElementsNotFound"})(m.FeatureSetErrorCodes||(m.FeatureSetErrorCodes=
{}));const ha={[m.FeatureSetErrorCodes.Cancelled]:"Cancelled",[m.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[m.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[m.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[m.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[m.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[m.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[m.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",
[m.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let W=function(J){function h(k,q){k=J.call(this,la.doSubstitutions(ha[k],q))||this;k.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(k),h);return k}f._inherits(h,J);return f._createClass(h)}(f._wrapNativeSuper(Error));m.FeatureSetError=W;m.FeatureSetErrorMessages=ha;m.SqlError=P;m.SqlErrorMessages=ba;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(m,f){function la(C){return C&&C.loc?`Line : ${C.loc.start?.line}, ${C.loc.start?.column}: `:""}function ba(C,S){try{if(!S)return C;for(const e in S){let p=S[e];p||(p="");C=C.replace("{"+e+"}",S[e])}}catch(e){}return C}m.ExecutionErrorCodes=void 0;(function(C){C.AsyncNotEnabled="AsyncNotEnabled";C.ModulesNotSupported="ModulesNotSupported";C.CircularModules="CircularModules";C.NeverReach="NeverReach";
C.UnsupportedHashType="UnsupportedHashType";C.InvalidParameter="InvalidParameter";C.UnexpectedToken="UnexpectedToken";C.Unrecognised="Unrecognised";C.UnrecognisedType="UnrecognisedType";C.MaximumCallDepth="MaximumCallDepth";C.BooleanConditionRequired="BooleanConditionRequired";C.TypeNotAllowedInFeature="TypeNotAllowedInFeature";C.KeyMustBeString="KeyMustBeString";C.WrongNumberOfParameters="WrongNumberOfParameters";C.CallNonFunction="CallNonFunction";C.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";
C.NoFunctionInDictionary="NoFunctionInDictionary";C.NoFunctionInArray="NoFunctionInArray";C.AssignModuleFunction="AssignModuleFunction";C.LogicExpressionOrAnd="LogicExpressionOrAnd";C.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";C.FunctionNotFound="FunctionNotFound";C.InvalidMemberAccessKey="InvalidMemberAccessKey";C.UnsupportedUnaryOperator="UnsupportUnaryOperator";C.InvalidIdentifier="InvalidIdentifier";C.MemberOfNull="MemberOfNull";C.UnsupportedOperator="UnsupportedOperator";C.Cancelled=
"Cancelled";C.ModuleAccessorMustBeString="ModuleAccessorMustBeString";C.ModuleExportNotFound="ModuleExportNotFound";C.Immutable="Immutable";C.OutOfBounds="OutOfBounds";C.IllegalResult="IllegalResult";C.FieldNotFound="FieldNotFound";C.PortalRequired="PortalRequired";C.LogicError="LogicError";C.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";C.KeyAccessorMustBeString="KeyAccessorMustBeString";C.WrongSpatialReference="WrongSpatialReference"})(m.ExecutionErrorCodes||(m.ExecutionErrorCodes={}));const P=
{[m.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[m.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[m.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[m.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[m.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[m.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",
[m.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[m.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[m.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[m.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[m.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[m.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[m.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",
[m.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[m.ExecutionErrorCodes.PortalRequired]:"Portal is required",[m.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[m.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[m.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[m.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[m.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
[m.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[m.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[m.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[m.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[m.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[m.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[m.ExecutionErrorCodes.Immutable]:"Object is immutable",
[m.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[m.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[m.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[m.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[m.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[m.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[m.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[m.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[m.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[m.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[m.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[m.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let ha=function(C){function S(...e){return C.call(this,...e)||this}f._inherits(S,C);return f._createClass(S)}(f._wrapNativeSuper(Error)),W=function(C){function S(e,
p){e=C.call(this,la(p)+e.message,{cause:e})||this;e.loc=null;Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),S);p&&p.loc&&(e.loc=p.loc);return e}f._inherits(S,C);return f._createClass(S)}(ha),J=function(C){function S(e,p,E,Q){e=C.call(this,"Execution error - "+la(E)+ba(P[p],Q))||this;e.loc=null;e.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),S);E&&E.loc&&(e.loc=E.loc);return e}f._inherits(S,
C);return f._createClass(S)}(f._wrapNativeSuper(Error)),h=function(C){function S(e,p,E,Q){e=C.call(this,"Compilation error - "+la(E)+ba(P[p],Q))||this;e.loc=null;e.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),S);E&&E.loc&&(e.loc=E.loc);return e}f._inherits(S,C);return f._createClass(S)}(f._wrapNativeSuper(Error)),k=function(C){function S(){var e=C.call(this,"Uncompilable code structures")||this;e.declaredRootClass=
"esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),S);return e}f._inherits(S,C);return f._createClass(S)}(f._wrapNativeSuper(Error));m.ModuleErrorCodes=void 0;(function(C){C.UnrecognisedUri="UnrecognisedUri";C.UnsupportedUriProtocol="UnsupportedUriProtocol"})(m.ModuleErrorCodes||(m.ModuleErrorCodes={}));const q={[m.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[m.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};
let O=function(C){function S(e,p){e=C.call(this,ba(q[e],p))||this;e.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),S);return e}f._inherits(S,C);return f._createClass(S)}(f._wrapNativeSuper(Error));m.ArcadeCompilationError=h;m.ArcadeExecutionError=J;m.ArcadeUncompilableError=k;m.ErrorWithCause=ha;m.ExecutionErrorMessages=P;m.LocatableArcadeExecutionError=W;m.ModuleError=O;m.ModuleErrorMessages=q;m.doSubstitutions=ba;m.ensureArcadeExecutionError=
function(C,S,e){return"esri.arcade.arcadeexecutionerror"===e.declaredRootClass||"esri.arcade.arcadecompilationerror"===e.declaredRootClass?null===e.loc&&S&&S.loc?new W(e,{cause:e}):e:S&&S.loc?new W(e,{cause:e}):e};m.parsingValidationMessage=function(C,S,e){return"Parsing error - "+la(C)+ba(P[S],e)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(m){function f(a,g={}){const K=JSON.stringify([a,g]);let ca=gd[K];ca||(ca=new Intl.ListFormat(a,
g),gd[K]=ca);return ca}function la(a,g={}){const K=JSON.stringify([a,g]);let ca=Gc[K];ca||(ca=new Intl.DateTimeFormat(a,g),Gc[K]=ca);return ca}function ba(a,g={}){const K=JSON.stringify([a,g]);let ca=Hc[K];ca||(ca=new Intl.NumberFormat(a,g),Hc[K]=ca);return ca}function P(a,g={}){const {base:K,...ca}=g,ma=JSON.stringify([a,ca]);let qa=Ic[ma];qa||(qa=new Intl.RelativeTimeFormat(a,g),Ic[ma]=qa);return qa}function ha(a){const g=[];for(let K=1;12>=K;K++){const ca=Za.utc(2016,K,1);g.push(a(ca))}return g}
function W(a){const g=[];for(let K=1;7>=K;K++){const ca=Za.utc(2016,11,13+K);g.push(a(ca))}return g}function J(a,g,K,ca,ma){a=a.listingMode(K);return"error"===a?null:"en"===a?ca(g):ma(g)}function h(a,g){if(k(a)||null===a)return g;if(a instanceof ic)return a;if("string"===typeof a){const K=a.toLowerCase();return"default"===K?g:"local"===K||"system"===K?mc.instance:"utc"===K||"gmt"===K?Eb.utcInstance:Eb.parseSpecifier(K)||Vb.create(a)}return q(a)?Eb.instance(a):"object"===typeof a&&a.offset&&"number"===
typeof a.offset?a:new me(a)}function k(a){return"undefined"===typeof a}function q(a){return"number"===typeof a}function O(a){return"number"===typeof a&&0===a%1}function C(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function S(a,g,K){if(0!==a.length)return a.reduce((ca,ma)=>{ma=[g(ma),ma];return ca?K(ca[0],ma[0])===ca[0]?ca:ma:ma},null)[1]}function e(a,g){return g.reduce((K,ca)=>{K[ca]=a[ca];return K},{})}function p(a,g){return Object.prototype.hasOwnProperty.call(a,
g)}function E(a,g,K){return O(a)&&a>=g&&a<=K}function Q(a,g=2){return 0>a?"-"+(""+-a).padStart(g,"0"):(""+a).padStart(g,"0")}function H(a){if(!k(a)&&null!==a&&""!==a)return parseInt(a,10)}function v(a){if(!k(a)&&null!==a&&""!==a)return parseFloat(a)}function F(a){if(!k(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function L(a,g,K=!1){g=10**g;return(K?Math.trunc:Math.round)(a*g)/g}function x(a){return 0===a%4&&(0!==a%100||0===a%400)}function y(a,g){var K=g-1;K=K-12*Math.floor(K/
12)+1;return 2===K?x(a+(g-K)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][K-1]}function A(a){let g=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(g=new Date(g),g.setUTCFullYear(a.year,a.month-1,a.day));return+g}function w(a){var g=a-1;g=(g+Math.floor(g/4)-Math.floor(g/100)+Math.floor(g/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===g?53:52}function z(a){return 99<a?a:a>xb.twoDigitCutoffYear?1900+a:2E3+a}function I(a,
g,K,ca=null){a=new Date(a);const ma={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ca&&(ma.timeZone=ca);return(g=(new Intl.DateTimeFormat(K,{timeZoneName:g,...ma})).formatToParts(a).find(qa=>"timezonename"===qa.type.toLowerCase()))?g.value:null}function Y(a,g){a=parseInt(a,10);Number.isNaN(a)&&(a=0);g=parseInt(g,10)||0;g=0>a||Object.is(a,-0)?-g:g;return 60*a+g}function ia(a){const g=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(g))throw new Aa(`Invalid unit value ${a}`);
return g}function N(a,g){const K={};for(const ca in a)if(p(a,ca)){const ma=a[ca];void 0!==ma&&null!==ma&&(K[g(ca)]=ia(ma))}return K}function M(a,g){const K=Math.trunc(Math.abs(a/60)),ca=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(g){case "short":return`${a}${Q(K,2)}:${Q(ca,2)}`;case "narrow":return`${a}${K}${0<ca?`:${ca}`:""}`;case "techie":return`${a}${Q(K,2)}${Q(ca,2)}`;default:throw new RangeError(`Value format ${g} is out of range for property format`);}}function r(a){return e(a,["hour",
"minute","second","millisecond"])}function u(a){switch(a){case "narrow":return[...ne];case "short":return[...Jc];case "long":return[...oe];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function V(a){switch(a){case "narrow":return[...pe];case "short":return[...hd];case "long":return[...Kc];case "numeric":return"1234567".split("");default:return null}}function ja(a){switch(a){case "narrow":return[...qe];
case "short":return[...re];case "long":return[...se];default:return null}}function va(a,g,K="always",ca=!1){const ma={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var qa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===K&&qa)switch(K="days"===a,g){case 1:return K?"tomorrow":`next ${ma[a][0]}`;case -1:return K?"yesterday":`last ${ma[a][0]}`;case 0:return K?
"today":`this ${ma[a][0]}`}K=Object.is(g,-0)||0>g;g=Math.abs(g);qa=1===g;const xa=ma[a];a=ca?qa?xa[1]:xa[2]||xa[1]:qa?ma[a][0]:a;return K?`${g} ${a} ago`:`in ${g} ${a}`}function Ba(a,g){let K="";for(const ca of a)K=ca.literal?K+ca.val:K+g(ca.val);return K}function Ea(...a){a=a.reduce((g,K)=>g+K.source,"");return RegExp(`^${a}$`)}function Fa(...a){return g=>a.reduce(([K,ca,ma],qa)=>{const [xa,Ga,Na]=qa(g,ma);return[{...K,...xa},Ga||ca,Na]},[{},null,1]).slice(0,2)}function Ma(a,...g){if(null==a)return[null,
null];for(const [K,ca]of g)if(g=K.exec(a))return ca(g);return[null,null]}function Ha(...a){return(g,K)=>{const ca={};let ma;for(ma=0;ma<a.length;ma++)ca[a[ma]]=H(g[K+ma]);return[ca,null,K+ma]}}function Ua(a,g,K){a=a[g];return k(a)?K:H(a)}function Sa(a,g){return[{hours:Ua(a,g,0),minutes:Ua(a,g+1,0),seconds:Ua(a,g+2,0),milliseconds:F(a[g+3])},null,g+4]}function Va(a,g){const K=!a[g]&&!a[g+1];a=Y(a[g+1],a[g+2]);return[{},K?null:Eb.instance(a),g+3]}function eb(a,g){return[{},a[g]?Vb.create(a[g]):null,
g+1]}function kb(a){const [g,K,ca,ma,qa,xa,Ga,Na,$a]=a,d="-"===g[0];a=Na&&"-"===Na[0];const ab=(Xa,zb=!1)=>void 0!==Xa&&(zb||Xa&&d)?-Xa:Xa;return[{years:ab(v(K)),months:ab(v(ca)),weeks:ab(v(ma)),days:ab(v(qa)),hours:ab(v(xa)),minutes:ab(v(Ga)),seconds:ab(v(Na),"-0"===Na),milliseconds:ab(F($a),a)}]}function jb(a,g,K,ca,ma,qa,xa){g={year:2===g.length?z(H(g)):H(g),month:Jc.indexOf(K)+1,day:H(ca),hour:H(ma),minute:H(qa)};xa&&(g.second=H(xa));a&&(g.weekday=3<a.length?Kc.indexOf(a)+1:hd.indexOf(a)+1);return g}
function db(a){const [,g,K,ca,ma,qa,xa,Ga,Na,$a,d,ab]=a;a=jb(g,ma,ca,K,qa,xa,Ga);let Xa;Xa=Na?te[Na]:$a?0:Y(d,ab);return[a,new Eb(Xa)]}function c(a){const [,g,K,ca,ma,qa,xa,Ga]=a;return[jb(g,ma,ca,K,qa,xa,Ga),Eb.utcInstance]}function n(a){const [,g,K,ca,ma,qa,xa,Ga]=a;return[jb(g,Ga,K,ca,ma,qa,xa),Eb.utcInstance]}function da(a,g,K=!1){a={values:K?g.values:{...a.values,...(g.values||{})},loc:a.loc.clone(g.loc),conversionAccuracy:g.conversionAccuracy||a.conversionAccuracy,matrix:g.matrix||a.matrix};
return new gb(a)}function B(a,g,K,ca,ma){a=a[ma][K];var qa=g[K]/a;qa=Math.sign(qa)!==Math.sign(ca[ma])&&0!==ca[ma]&&1>=Math.abs(qa)?0>qa?Math.floor(qa):Math.ceil(qa):Math.trunc(qa);ca[ma]+=qa;g[K]-=qa*a}function aa(a,g){ue.reduce((K,ca)=>{if(k(g[ca]))return K;K&&B(a,g,K,g,ca);return ca},null)}function l(a,g){a=g.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(gb.fromMillis(a).as("days"))}function G(a,g,K){const ca=[["years",
(Na,$a)=>$a.year-Na.year],["quarters",(Na,$a)=>$a.quarter-Na.quarter+4*($a.year-Na.year)],["months",(Na,$a)=>$a.month-Na.month+12*($a.year-Na.year)],["weeks",(Na,$a)=>{Na=l(Na,$a);return(Na-Na%7)/7}],["days",l]],ma={},qa=a;let xa,Ga;for(const [Na,$a]of ca)0<=K.indexOf(Na)&&(xa=Na,ma[Na]=$a(a,g),Ga=qa.plus(ma),Ga>g?(ma[Na]--,a=qa.plus(ma)):a=Ga);return[a,ma,Ga,xa]}function T(a,g,K,ca){let [ma,qa,xa,Ga]=G(a,g,K);a=g-ma;K=K.filter(Na=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Na));0===
K.length&&(xa<g&&(xa=ma.plus({[Ga]:1})),xa!==ma&&(qa[Ga]=(qa[Ga]||0)+a/(xa-ma)));g=gb.fromObject(qa,ca);return 0<K.length?gb.fromMillis(a,ca).shiftTo(...K).plus(g):g}function U({numberingSystem:a},g=""){return new RegExp(`${Lc[a||"latn"]}${g}`)}function ea(a,g=K=>K){return{regex:a,deser:([K])=>{{let ca=parseInt(K,10);if(isNaN(ca)){ca="";for(let ma=0;ma<K.length;ma++){const qa=K.charCodeAt(ma);if(-1!==K[ma].search(Lc.hanidec))ca+=ve.indexOf(K[ma]);else for(const xa in id){const [Ga,Na]=id[xa];qa>=
Ga&&qa<=Na&&(ca+=qa-Ga)}}K=parseInt(ca,10)}else K=ca}return g(K)}}}function na(a){return a.replace(/\./g,"\\.?").replace(Mc,jd)}function pa(a,g){return null===a?null:{regex:RegExp(a.map(na).join("|")),deser:([K])=>a.findIndex(ca=>K.replace(/\./g,"").replace(Mc," ").toLowerCase()===ca.replace(/\./g,"").replace(Mc," ").toLowerCase())+g}}function sa(a,g){return{regex:a,deser:([,K,ca])=>Y(K,ca),groups:g}}function ua(a){return{regex:a,deser:([g])=>g}}function Da(a,g){const K=U(g),ca=U(g,"{2}"),ma=U(g,
"{3}"),qa=U(g,"{4}"),xa=U(g,"{6}"),Ga=U(g,"{1,2}"),Na=U(g,"{1,3}"),$a=U(g,"{1,6}"),d=U(g,"{1,9}"),ab=U(g,"{2,4}"),Xa=U(g,"{4,6}"),zb=Wb=>({regex:RegExp(Wb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([t])=>t,literal:!0}),ra=(Wb=>{if(a.literal)return zb(Wb);switch(Wb.val){case "G":return pa(g.eras("short",!1),0);case "GG":return pa(g.eras("long",!1),0);case "y":return ea($a);case "yy":return ea(ab,z);case "yyyy":return ea(qa);case "yyyyy":return ea(Xa);case "yyyyyy":return ea(xa);case "M":return ea(Ga);
case "MM":return ea(ca);case "MMM":return pa(g.months("short",!0,!1),1);case "MMMM":return pa(g.months("long",!0,!1),1);case "L":return ea(Ga);case "LL":return ea(ca);case "LLL":return pa(g.months("short",!1,!1),1);case "LLLL":return pa(g.months("long",!1,!1),1);case "d":return ea(Ga);case "dd":return ea(ca);case "o":return ea(Na);case "ooo":return ea(ma);case "HH":return ea(ca);case "H":return ea(Ga);case "hh":return ea(ca);case "h":return ea(Ga);case "mm":return ea(ca);case "m":return ea(Ga);case "q":return ea(Ga);
case "qq":return ea(ca);case "s":return ea(Ga);case "ss":return ea(ca);case "S":return ea(Na);case "SSS":return ea(ma);case "u":return ua(d);case "uu":return ua(Ga);case "uuu":return ea(K);case "a":return pa(g.meridiems(),0);case "kkkk":return ea(qa);case "kk":return ea(ab,z);case "W":return ea(Ga);case "WW":return ea(ca);case "E":case "c":return ea(K);case "EEE":return pa(g.weekdays("short",!1,!1),1);case "EEEE":return pa(g.weekdays("long",!1,!1),1);case "ccc":return pa(g.weekdays("short",!0,!1),
1);case "cccc":return pa(g.weekdays("long",!0,!1),1);case "Z":case "ZZ":return sa(new RegExp(`([+-]${Ga.source})(?::(${ca.source}))?`),2);case "ZZZ":return sa(new RegExp(`([+-]${Ga.source})(${ca.source})?`),2);case "z":return ua(/[a-z_+-/]{1,256}?/i);case " ":return ua(/[^\S\n\r]/);default:return zb(Wb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ra.token=a;return ra}function za(a){return[`^${a.map(g=>g.regex).reduce((g,K)=>`${g}(${K.source})`,"")}$`,a]}function ya(a,
g,K){if(a=a.match(g)){g={};let ca=1;for(const ma in K)if(p(K,ma)){const qa=K[ma],xa=qa.groups?qa.groups+1:1;!qa.literal&&qa.token&&(g[qa.token.val[0]]=qa.deser(a.slice(ca,ca+xa)));ca+=xa}return[a,g]}return[a,{}]}function Qa(a){const g=ma=>{switch(ma){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";
case "k":return"weekYear";case "q":return"quarter";default:return null}};let K=null,ca;k(a.z)||(K=Vb.create(a.z));k(a.Z)||(K||(K=new Eb(a.Z)),ca=a.Z);k(a.q)||(a.M=3*(a.q-1)+1);k(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);k(a.u)||(a.S=F(a.u));return[Object.keys(a).reduce((ma,qa)=>{const xa=g(qa);xa&&(ma[xa]=a[qa]);return ma},{}),K,ca]}function Ka(a,g){return Array.prototype.concat(...a.map(K=>{if(!K.literal){var ca=Ab.macroTokenToFormatOpts(K.val);ca=Pa(ca,
g);K=null==ca||ca.includes(void 0)?K:ca}return K}))}function Oa(a,g,K){K=Ka(Ab.parseFormat(K),a);var ca=K.map(Xa=>Da(Xa,a));const ma=ca.find(Xa=>Xa.invalidReason);if(ma)return{input:g,tokens:K,invalidReason:ma.invalidReason};const [qa,xa]=za(ca);ca=RegExp(qa,"i");const [Ga,Na]=ya(g,ca,xa),[$a,d,ab]=Na?Qa(Na):[null,null,void 0];if(p(Na,"a")&&p(Na,"H"))throw new oa("Can't include meridiem when specifying 24-hour format");return{input:g,tokens:K,regex:ca,rawMatches:Ga,matches:Na,result:$a,zone:d,specificOffset:ab}}
function Pa(a,g){if(!a)return null;g=Ab.create(g,a);var K=g.formatDateTimeParts;Nc||(Nc=Za.fromMillis(1555555555555));return K.call(g,Nc).map(ca=>{{const {type:qa,value:xa}=ca;if("literal"===qa)ca=/^\s+$/.test(xa),ca={literal:!ca,val:ca?" ":xa};else{ca=a[qa];var ma=we[qa];"object"===typeof ma&&(ma=ma[ca]);ca=ma?{literal:!1,val:ma}:void 0}}return ca})}function Ja(a,g){return new Rb("unit out of range",`you specified ${g} (of type ${typeof g}) as a ${a}, which is invalid`)}function Ra(a,g,K){g=new Date(Date.UTC(a,
g-1,K));100>a&&0<=a&&g.setUTCFullYear(g.getUTCFullYear()-1900);a=g.getUTCDay();return 0===a?7:a}function Wa(a,g){a=x(a)?Oc:Pc;const K=a.findIndex(ca=>ca<g);return{month:K+1,day:g-a[K]}}function ta(a){const {year:g,month:K,day:ca}=a;var ma=ca+(x(g)?Oc:Pc)[K-1];const qa=Ra(g,K,ca);ma=Math.floor((ma-qa+10)/7);let xa;1>ma?(xa=g-1,ma=w(xa)):ma>w(g)?(xa=g+1,ma=1):xa=g;return{weekYear:xa,weekNumber:ma,weekday:qa,...r(a)}}function ub(a){const {weekYear:g,weekNumber:K,weekday:ca}=a;var ma=Ra(g,1,4),qa=x(g)?
366:365;ma=7*K+ca-ma-3;1>ma?(qa=g-1,ma+=x(qa)?366:365):ma>qa?(qa=g+1,ma-=x(g)?366:365):qa=g;const {month:xa,day:Ga}=Wa(qa,ma);return{year:qa,month:xa,day:Ga,...r(a)}}function hb(a){const {year:g,month:K,day:ca}=a;var ma=ca+(x(g)?Oc:Pc)[K-1];return{year:g,ordinal:ma,...r(a)}}function lb(a){const {year:g,ordinal:K}=a,{month:ca,day:ma}=Wa(g,K);return{year:g,month:ca,day:ma,...r(a)}}function b(a){const g=O(a.year),K=E(a.month,1,12),ca=E(a.day,1,y(a.year,a.month));return g?K?ca?!1:Ja("day",a.day):Ja("month",
a.month):Ja("year",a.year)}function fb(a){const {hour:g,minute:K,second:ca,millisecond:ma}=a;a=E(g,0,23)||24===g&&0===K&&0===ca&&0===ma;const qa=E(K,0,59),xa=E(ca,0,59),Ga=E(ma,0,999);return a?qa?xa?Ga?!1:Ja("millisecond",ma):Ja("second",ca):Ja("minute",K):Ja("hour",g)}function Ob(a){return new Rb("unsupported zone",`the zone "${a.name}" is not supported`)}function Jb(a){null===a.weekData&&(a.weekData=ta(a.c));return a.weekData}function ka(a,g){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};
return new Za({...a,...g,old:a})}function gc(a,g,K){let ca=a-6E4*g;const ma=K.offset(ca);if(g===ma)return[ca,g];ca-=6E4*(ma-g);g=K.offset(ca);return ma===g?[ca,ma]:[a-6E4*Math.min(ma,g),Math.max(ma,g)]}function Tb(a,g){a=new Date(a+6E4*g);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function yb(a,g,K){return gc(A(a),g,K)}function Sb(a,g){const K=a.o;var ca=a.c.year+
Math.trunc(g.years);const ma=a.c.month+Math.trunc(g.months)+3*Math.trunc(g.quarters);ca={...a.c,year:ca,month:ma,day:Math.min(a.c.day,y(ca,ma))+Math.trunc(g.days)+7*Math.trunc(g.weeks)};g=gb.fromObject({years:g.years-Math.trunc(g.years),quarters:g.quarters-Math.trunc(g.quarters),months:g.months-Math.trunc(g.months),weeks:g.weeks-Math.trunc(g.weeks),days:g.days-Math.trunc(g.days),hours:g.hours,minutes:g.minutes,seconds:g.seconds,milliseconds:g.milliseconds}).as("milliseconds");ca=A(ca);let [qa,xa]=
gc(ca,K,a.zone);0!==g&&(qa+=g,xa=a.zone.offset(qa));return{ts:qa,o:xa}}function Ub(a,g,K,ca,ma,qa){const {setZone:xa,zone:Ga}=K;return a&&0!==Object.keys(a).length||g?(a=Za.fromObject(a,{...K,zone:g||Ga,specificOffset:qa}),xa?a:a.setZone(Ga)):Za.invalid(new Rb("unparsable",`the input "${ma}" can't be parsed as ${ca}`))}function Zb(a,g,K=!0){return a.isValid?Ab.create(rb.create("en-US"),{allowZ:K,forceSimple:!0}).formatDateTimeFromString(a,g):null}function hc(a,g){const K=9999<a.c.year||0>a.c.year;
let ca="";K&&0<=a.c.year&&(ca+="+");ca+=Q(a.c.year,K?6:4);g?(ca=ca+"-"+Q(a.c.month),ca=ca+"-"+Q(a.c.day)):(ca+=Q(a.c.month),ca+=Q(a.c.day));return ca}function Db(a,g,K,ca,ma,qa){let xa=Q(a.c.hour);g?(xa=xa+":"+Q(a.c.minute),0===a.c.second&&K||(xa+=":")):xa+=Q(a.c.minute);0===a.c.second&&K||(xa+=Q(a.c.second),0===a.c.millisecond&&ca||(xa=xa+"."+Q(a.c.millisecond,3)));ma&&(a.isOffsetFixed&&0===a.offset&&!qa?xa+="Z":0>a.o?(xa=xa+"-"+Q(Math.trunc(-a.o/60)),xa=xa+":"+Q(Math.trunc(-a.o%60))):(xa=xa+"+"+
Q(Math.trunc(a.o/60)),xa=xa+":"+Q(Math.trunc(a.o%60))));qa&&(xa+="["+a.zone.ianaName+"]");return xa}function Pb(a){const g={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",
weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!g)throw new Ca(a);return g}function ib(a,g){const K=h(g.zone,xb.defaultZone);g=rb.fromObject(g);const ca=xb.now();var ma;if(k(a.year))a=ca;else{for(const qa of kd)k(a[qa])&&(a[qa]=ld[qa]);if(ma=b(a)||fb(a))return Za.invalid(ma);ma=K.offset(ca);[a,ma]=yb(a,ma,K)}return new Za({ts:a,zone:K,loc:g,o:ma})}function Fb(a,g,K){const ca=k(K.round)?!0:K.round,ma=(xa,Ga)=>{xa=L(xa,ca||K.calendary?0:2,!0);return g.loc.clone(K).relFormatter(K).format(xa,
Ga)},qa=xa=>K.calendary?g.hasSame(a,xa)?0:g.startOf(xa).diff(a.startOf(xa),xa).get(xa):g.diff(a,xa).get(xa);if(K.unit)return ma(qa(K.unit),K.unit);for(const xa of K.units){const Ga=qa(xa);if(1<=Math.abs(Ga))return ma(Ga,xa)}return ma(a>g?-0:0,K.units[K.units.length-1])}function Qb(a){let g={};0<a.length&&"object"===typeof a[a.length-1]?(g=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[g,a]}function Ya(a){if(Za.isDateTime(a))return a;if(a&&a.valueOf&&q(a.valueOf()))return Za.fromJSDate(a);
if(a&&"object"===typeof a)return Za.fromObject(a);throw new Aa(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Hb extends Error{}class R extends Hb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class fa extends Hb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class X extends Hb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class oa extends Hb{}class Ca extends Hb{constructor(a){super(`Invalid unit ${a}`)}}class Aa extends Hb{}class La extends Hb{constructor(){super("Zone is an abstract class")}}
const Ta={year:"numeric",month:"numeric",day:"numeric"},nb={year:"numeric",month:"short",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},wb={year:"numeric",month:"long",day:"numeric",weekday:"long"},Gb={hour:"numeric",minute:"numeric"},md={hour:"numeric",minute:"numeric",second:"numeric"},nd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},od={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
pd={hour:"numeric",minute:"numeric",hourCycle:"h23"},qd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},rd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},sd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},td={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},vd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},wd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xe={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},yd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},zd={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Ad={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class ic{get type(){throw new La;}get name(){throw new La;}get ianaName(){return this.name}get isUniversal(){throw new La;}offsetName(a,g){throw new La;}formatOffset(a,g){throw new La;}offset(a){throw new La;}equals(a){throw new La;}get isValid(){throw new La;}}let Qc=null;class mc extends ic{static get instance(){null===
Qc&&(Qc=new mc);return Qc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:g,locale:K}){return I(a,g,K)}formatOffset(a,g){return M(this.offset(a),g)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let nc={};const ye={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let oc={};class Vb extends ic{static create(a){oc[a]||(oc[a]=new Vb(a));return oc[a]}static resetCache(){oc=
{};nc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(g){return!1}}constructor(a){super();this.zoneName=a;this.valid=Vb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:g,locale:K}){return I(a,g,K,this.name)}formatOffset(a,g){return M(this.offset(a),g)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var g=this.name;
nc[g]||(nc[g]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));g=nc[g];if(g.formatToParts){g=g.formatToParts(a);var K=[];for(let d=0;d<g.length;d++){const {type:ab,value:Xa}=g[d],zb=ye[ab];"era"===ab?K[zb]=Xa:k(zb)||(K[zb]=parseInt(Xa,10))}g=K}else{g=g.format(a).replace(/\u200E/g,"");g=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(g);const [,d,ab,Xa,zb,ra,Wb,t]=g;g=[Xa,d,ab,zb,
ra,Wb,t]}let [ca,ma,qa,xa,Ga,Na,$a]=g;"BC"===xa&&(ca=-Math.abs(ca)+1);g=A({year:ca,month:ma,day:qa,hour:24===Ga?0:Ga,minute:Na,second:$a,millisecond:0});a=+a;K=a%1E3;return(g-(a-(0<=K?K:1E3+K)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let gd={},Gc={},Hc={},Ic={},pc=null;class ze{constructor(a,g,K){this.padTo=K.padTo||0;this.floor=K.floor||!1;const {padTo:ca,floor:ma,...qa}=K;if(!g||0<Object.keys(qa).length)g={useGrouping:!1,...K},0<K.padTo&&(g.minimumIntegerDigits=
K.padTo),this.inf=ba(a,g)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):L(a,3);return Q(a,this.padTo)}}class Ae{constructor(a,g,K){this.opts=K;K=this.originalZone=void 0;this.opts.timeZone?this.dt=a:"fixed"===a.zone.type?(K=a.offset/60*-1,K=0<=K?`Etc/GMT+${K}`:`Etc/GMT${K}`,0!==a.offset&&Vb.create(K).valid?this.dt=a:(K="UTC",this.dt=0===a.offset?a:a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone)):"system"===a.zone.type?this.dt=
a:"iana"===a.zone.type?(this.dt=a,K=a.zone.name):(K="UTC",this.dt=a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone);a={...this.opts};a.timeZone=a.timeZone||K;this.dtf=la(g,a)}format(){return this.originalZone?this.formatToParts().map(({value:a})=>a).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const a=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?a.map(g=>{if("timeZoneName"===g.type){const K=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,
format:this.opts.timeZoneName});return{...g,value:K}}return g}):a}resolvedOptions(){return this.dtf.resolvedOptions()}}class Be{constructor(a,g,K){this.opts={style:"long",...K};!g&&C()&&(this.rtf=P(a,K))}format(a,g){return this.rtf?this.rtf.format(a,g):va(g,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,g){return this.rtf?this.rtf.formatToParts(a,g):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,g,K,ca=!1){a=
a||xb.defaultLocale;var ma;(ma=a)||(ca?ca="en-US":(pc||(pc=(new Intl.DateTimeFormat).resolvedOptions().locale),ca=pc),ma=ca);return new rb(ma,g||xb.defaultNumberingSystem,K||xb.defaultOutputCalendar,a)}static resetCache(){pc=null;Gc={};Hc={};Ic={}}static fromObject({locale:a,numberingSystem:g,outputCalendar:K}={}){return rb.create(a,g,K)}constructor(a,g,K,ca){var ma=a.indexOf("-x-");-1!==ma&&(a=a.substring(0,ma));ma=a.indexOf("-u-");if(-1===ma)var qa=[a];else{try{qa=la(a).resolvedOptions();var xa=
a}catch(Xa){xa=a.substring(0,ma),qa=la(xa).resolvedOptions()}const {numberingSystem:d,calendar:ab}=qa;qa=[xa,d,ab]}const [Ga,Na,$a]=qa;this.locale=Ga;this.numberingSystem=g||Na||null;this.outputCalendar=K||$a||null;g=this.locale;K=this.numberingSystem;if((qa=this.outputCalendar)||K)g.includes("-u-")||(g+="-u"),qa&&(g+=`-ca-${qa}`),K&&(g+=`-nu-${K}`);this.intl=g;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=
ca;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),g=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);
return a&&g?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,g=!1,K=!0){return J(this,a,K,u,()=>{const ca=g?{month:a,day:"numeric"}:{month:a},ma=g?"format":"standalone";this.monthsCache[ma][a]||(this.monthsCache[ma][a]=
ha(qa=>this.extract(qa,ca,"month")));return this.monthsCache[ma][a]})}weekdays(a,g=!1,K=!0){return J(this,a,K,V,()=>{const ca=g?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ma=g?"format":"standalone";this.weekdaysCache[ma][a]||(this.weekdaysCache[ma][a]=W(qa=>this.extract(qa,ca,"weekday")));return this.weekdaysCache[ma][a]})}meridiems(a=!0){return J(this,void 0,a,()=>Bd,()=>{if(!this.meridiemCache){const g={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Za.utc(2016,11,13,
9),Za.utc(2016,11,13,19)].map(K=>this.extract(K,g,"dayperiod"))}return this.meridiemCache})}eras(a,g=!0){return J(this,a,g,ja,()=>{const K={era:a};this.eraCache[a]||(this.eraCache[a]=[Za.utc(-40,1,1),Za.utc(2017,1,1)].map(ca=>this.extract(ca,K,"era")));return this.eraCache[a]})}extract(a,g,K){return(a=this.dtFormatter(a,g).formatToParts().find(ca=>ca.type.toLowerCase()===K))?a.value:null}numberFormatter(a={}){return new ze(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,g={}){return new Ae(a,
this.intl,g)}relFormatter(a={}){return new Be(this.intl,this.isEnglish(),a)}listFormatter(a={}){return f(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Rc=null;class Eb extends ic{static get utcInstance(){null===Rc&&(Rc=new Eb(0));return Rc}static instance(a){return 0===
a?Eb.utcInstance:new Eb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Eb(Y(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${M(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${M(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,g){return M(this.fixed,g)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===
a.type&&a.fixed===this.fixed}get isValid(){return!0}}class me extends ic{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Sc=()=>Date.now(),Cd="system",Dd=null,Ed=null,Tc=null,Fd=60,Gd;class xb{static get now(){return Sc}static set now(a){Sc=a}static set defaultZone(a){Cd=a}static get defaultZone(){return h(Cd,
mc.instance)}static get defaultLocale(){return Dd}static set defaultLocale(a){Dd=a}static get defaultNumberingSystem(){return Ed}static set defaultNumberingSystem(a){Ed=a}static get defaultOutputCalendar(){return Tc}static set defaultOutputCalendar(a){Tc=a}static get twoDigitCutoffYear(){return Fd}static set twoDigitCutoffYear(a){Fd=a%100}static get throwOnInvalid(){return Gd}static set throwOnInvalid(a){Gd=a}static resetCaches(){rb.resetCache();Vb.resetCache()}}const oe="January February March April May June July August September October November December".split(" "),
Jc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ne="JFMAMJJASOND".split(""),Kc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),hd="Mon Tue Wed Thu Fri Sat Sun".split(" "),pe="MTWTFSS".split(""),Bd=["AM","PM"],se=["Before Christ","Anno Domini"],re=["BC","AD"],qe=["B","A"],Uc={D:Ta,DD:nb,DDD:mb,DDDD:wb,t:Gb,tt:md,ttt:nd,tttt:od,T:pd,TT:qd,TTT:rd,TTTT:sd,f:td,ff:vd,fff:xd,ffff:zd,F:ud,FF:wd,FFF:yd,FFFF:Ad};class Ab{static create(a,g={}){return new Ab(a,g)}static parseFormat(a){let g=
null,K="",ca=!1;const ma=[];for(let qa=0;qa<a.length;qa++){const xa=a.charAt(qa);"'"===xa?(0<K.length&&ma.push({literal:ca||/^\s+$/.test(K),val:K}),g=null,K="",ca=!ca):ca?K+=xa:xa===g?K+=xa:(0<K.length&&ma.push({literal:/^\s+$/.test(K),val:K}),g=K=xa)}0<K.length&&ma.push({literal:ca||/^\s+$/.test(K),val:K});return ma}static macroTokenToFormatOpts(a){return Uc[a]}constructor(a,g){this.opts=g;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,g){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());
return this.systemLoc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTime(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTimeParts(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).formatToParts()}formatInterval(a,g={}){return this.loc.dtFormatter(a.start,{...this.opts,...g}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).resolvedOptions()}num(a,g=0){if(this.opts.forceSimple)return Q(a,
g);const K={...this.opts};0<g&&(K.padTo=g);return this.loc.numberFormatter(K).format(a)}formatDateTimeFromString(a,g){const K="en"===this.loc.listingMode(),ca=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ma=(d,ab)=>this.loc.extract(a,d,ab),qa=d=>a.isOffsetFixed&&0===a.offset&&d.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,d.format):"",xa=(d,ab)=>K?u(d)[a.month-1]:ma(ab?{month:d}:{month:d,day:"numeric"},"month"),Ga=(d,ab)=>K?V(d)[a.weekday-1]:ma(ab?{weekday:d}:{weekday:d,month:"long",
day:"numeric"},"weekday"),Na=d=>{const ab=Ab.macroTokenToFormatOpts(d);return ab?this.formatWithSystemDefault(a,ab):d},$a=d=>K?ja(d)[0>a.year?0:1]:ma({era:d},"era");return Ba(Ab.parseFormat(g),d=>{switch(d){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);
case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return qa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return qa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return qa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,
{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return K?Bd[12>a.hour?0:1]:ma({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ca?ma({day:"numeric"},"day"):this.num(a.day);case "dd":return ca?ma({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ga("short",!0);case "cccc":return Ga("long",!0);case "ccccc":return Ga("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ga("short",!1);case "EEEE":return Ga("long",
!1);case "EEEEE":return Ga("narrow",!1);case "L":return ca?ma({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return ca?ma({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return xa("short",!0);case "LLLL":return xa("long",!0);case "LLLLL":return xa("narrow",!0);case "M":return ca?ma({month:"numeric"},"month"):this.num(a.month);case "MM":return ca?ma({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return xa("short",!1);case "MMMM":return xa("long",
!1);case "MMMMM":return xa("narrow",!1);case "y":return ca?ma({year:"numeric"},"year"):this.num(a.year);case "yy":return ca?ma({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return ca?ma({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return ca?ma({year:"numeric"},"year"):this.num(a.year,6);case "G":return $a("short");case "GG":return $a("long");case "GGGGG":return $a("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,
4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Na(d)}})}formatDurationFromString(a,g){const K=ma=>{switch(ma[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";
case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};g=Ab.parseFormat(g);const ca=g.reduce((ma,{literal:qa,val:xa})=>qa?ma:ma.concat(xa),[]);a=a.shiftTo(...ca.map(K).filter(ma=>ma));return Ba(g,(ma=>qa=>{const xa=K(qa);return xa?this.num(ma.get(xa),qa.length):qa})(a))}}class Rb{constructor(a,g){this.reason=a;this.explanation=g}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Id=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Vc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jd=RegExp(`${Vc.source}${`(?:${Id.source}?(?:\\[(${Hd.source})\\])?)?`}`),Wc=RegExp(`(?:T${Jd.source})?`),Ce=Ha("weekYear","weekNumber","weekDay"),Kd=Ha("year","ordinal"),Ld=RegExp(`${Vc.source} ?(?:${Id.source}|(${Hd.source}))?`),Md=RegExp(`(?: ${Ld.source})?`),Nd=RegExp(`^T?${Vc.source}$`),De=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
te={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ge=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
He=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Ie=Ea(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Wc),Je=Ea(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Wc),Ke=Ea(/(\d{4})-?(\d{3})/,Wc),Le=Ea(Jd),Od=Fa(function(a,g){return[{year:Ua(a,g),month:Ua(a,g+1,1),day:Ua(a,g+2,1)},null,g+3]},Sa,Va,eb),Me=Fa(Ce,Sa,Va,eb),Ne=Fa(Kd,Sa,Va,eb),Oe=Fa(Sa,Va,eb),Pe=Fa(Sa),Qe=Ea(/(\d{4})-(\d\d)-(\d\d)/,Md),Re=Ea(Ld),Se=Fa(Sa,Va,eb),Pd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Pd},Ue={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Pd},bc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ue=bc.slice(0).reverse();
class gb{constructor(a){const g="longterm"===a.conversionAccuracy||!1;let K=g?Ue:Te;a.matrix&&(K=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=g?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=K;this.isLuxonDuration=!0}static fromMillis(a,g){return gb.fromObject({milliseconds:a},g)}static fromObject(a,g={}){if(null==a||"object"!==typeof a)throw new Aa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new gb({values:N(a,
gb.normalizeUnit),loc:rb.fromObject(g),conversionAccuracy:g.conversionAccuracy,matrix:g.matrix})}static fromDurationLike(a){if(q(a))return gb.fromMillis(a);if(gb.isDuration(a))return a;if("object"===typeof a)return gb.fromObject(a);throw new Aa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,g){const [K]=Ma(a,[De,kb]);return K?gb.fromObject(K,g):gb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,g){const [K]=Ma(a,[Nd,Pe]);return K?
gb.fromObject(K,g):gb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,g=null){if(!a)throw new Aa("need to specify a reason the Duration is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new X(a);return new gb({invalid:a})}static normalizeUnit(a){const g={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!g)throw new Ca(a);return g}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,g={}){g={...g,floor:!1!==g.round&&!1!==g.floor};return this.isValid?Ab.create(this.loc,g).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const g=bc.map(K=>{const ca=this.values[K];return k(ca)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:K.slice(0,-1)}).format(ca)}).filter(K=>K);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(g)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=L(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var g=this.toMillis();if(0>g||864E5<=g)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
g=this.shiftTo("hours","minutes","seconds","milliseconds");let K="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===g.seconds&&0===g.milliseconds||(K+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===g.milliseconds||(K+=".SSS"));g=g.toFormat(K);a.includePrefix&&(g="T"+g);return g}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);const g=
{};for(const K of bc)if(p(a.values,K)||p(this.values,K))g[K]=a.get(K)+this.get(K);return da(this,{values:g},!0)}minus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const g={};for(const K of Object.keys(this.values))g[K]=ia(a(this.values[K],K));return da(this,{values:g},!0)}get(a){return this[gb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...N(a,gb.normalizeUnit)};return da(this,{values:a})}reconfigure({locale:a,
numberingSystem:g,conversionAccuracy:K,matrix:ca}={}){a={loc:this.loc.clone({locale:a,numberingSystem:g}),matrix:ca,conversionAccuracy:K};return da(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();aa(this.matrix,a);return da(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const g={};for(const [K,ca]of Object.entries(a))0!==ca&&(g[K]=ca);return da(this,{values:g},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(qa=>gb.normalizeUnit(qa));const g={},K={},ca=this.toObject();let ma;for(const qa of bc)if(0<=a.indexOf(qa)){ma=qa;let xa=0;for(const Na in K)xa+=this.matrix[Na][qa]*K[Na],K[Na]=0;q(ca[qa])&&(xa+=ca[qa]);const Ga=Math.trunc(xa);g[qa]=Ga;K[qa]=(1E3*xa-1E3*Ga)/1E3;for(const Na in ca)bc.indexOf(Na)>bc.indexOf(qa)&&B(this.matrix,ca,Na,g,qa)}else q(ca[qa])&&(K[qa]=ca[qa]);for(const qa in K)0!==K[qa]&&(g[ma]+=qa===ma?K[qa]:K[qa]/this.matrix[ma][qa]);return da(this,{values:g},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const g of Object.keys(this.values))a[g]=0===this.values[g]?0:-this.values[g];return da(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const ca of bc){var g=this.values[ca];var K=a.values[ca];g=void 0===g||0===g?void 0===K||0===K:g===K;if(!g)return!1}return!0}}class vb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,g=null){if(!a)throw new Aa("need to specify a reason the Interval is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new fa(a);return new vb({invalid:a})}static fromDateTimes(a,
g){a=Ya(a);g=Ya(g);var K=a&&a.isValid?g&&g.isValid?g<a?vb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${g.toISO()}`):null:vb.invalid("missing or invalid end"):vb.invalid("missing or invalid start");return null==K?new vb({start:a,end:g}):K}static after(a,g){g=gb.fromDurationLike(g);a=Ya(a);return vb.fromDateTimes(a,a.plus(g))}static before(a,g){g=gb.fromDurationLike(g);a=Ya(a);return vb.fromDateTimes(a.minus(g),a)}static fromISO(a,
g){const [K,ca]=(a||"").split("/",2);if(K&&ca){let xa;try{var ma=Za.fromISO(K,g);xa=ma.isValid}catch(Na){xa=!1}let Ga;try{var qa=Za.fromISO(ca,g);Ga=qa.isValid}catch(Na){Ga=!1}if(xa&&Ga)return vb.fromDateTimes(ma,qa);if(xa){if(qa=gb.fromISO(ca,g),qa.isValid)return vb.after(ma,qa)}else if(Ga&&(ma=gb.fromISO(K,g),ma.isValid))return vb.before(qa,ma)}return vb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const g=this.start.startOf(a),K=this.end.startOf(a);return Math.floor(K.diff(g,a).get(a))+(K.valueOf()!==this.end.valueOf())}hasSame(a){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:g}={}){return this.isValid?vb.fromDateTimes(a||this.s,g||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Ya).filter(qa=>this.contains(qa)).sort();const g=[];let {s:K}=this,ca=0;for(;K<this.e;){var ma=a[ca]||this.e;ma=+ma>+this.e?
this.e:ma;g.push(vb.fromDateTimes(K,ma));K=ma;ca+=1}return g}splitBy(a){a=gb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:g}=this,K=1;const ca=[];for(;g<this.e;){var ma=this.start.plus(a.mapUnits(qa=>qa*K));ma=+ma>+this.e?this.e:ma;ca.push(vb.fromDateTimes(g,ma));g=ma;K+=1}return ca}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:
!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const g=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return g>=a?null:vb.fromDateTimes(g,a)}union(a){return this.isValid?vb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [g,K]=a.sort((ca,ma)=>ca.s-ma.s).reduce(([ca,ma],qa)=>
ma?ma.overlaps(qa)||ma.abutsStart(qa)?[ca,ma.union(qa)]:[ca.concat([ma]),qa]:[ca,qa],[[],null]);K&&g.push(K);return g}static xor(a){let g=null,K=0;const ca=[];a=a.map(ma=>[{time:ma.s,type:"s"},{time:ma.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ma,qa)=>ma.time-qa.time);for(const ma of a)K+="s"===ma.type?1:-1,1===K?g=ma.time:(g&&+g!==+ma.time&&ca.push(vb.fromDateTimes(g,ma.time)),g=null);return vb.merge(ca)}difference(...a){return vb.xor([this].concat(a)).map(g=>this.intersection(g)).filter(g=>
g&&!g.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Ta,g={}){return this.isValid?Ab.create(this.s.loc.clone(g),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,
{separator:g=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${g}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,g){return this.isValid?this.e.diff(this.s,a,g):gb.invalid(this.invalidReason)}mapEndpoints(a){return vb.fromDateTimes(a(this.s),a(this.e))}}class kc{static hasDST(a=xb.defaultZone){const g=Za.now().setZone(a).set({month:12});return!a.isUniversal&&g.offset!==g.set({month:6}).offset}static isValidIANAZone(a){return Vb.isValidZone(a)}static normalizeZone(a){return h(a,xb.defaultZone)}static months(a=
"long",{locale:g=null,numberingSystem:K=null,locObj:ca=null,outputCalendar:ma="gregory"}={}){return(ca||rb.create(g,K,ma)).months(a)}static monthsFormat(a="long",{locale:g=null,numberingSystem:K=null,locObj:ca=null,outputCalendar:ma="gregory"}={}){return(ca||rb.create(g,K,ma)).months(a,!0)}static weekdays(a="long",{locale:g=null,numberingSystem:K=null,locObj:ca=null}={}){return(ca||rb.create(g,K,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:g=null,numberingSystem:K=null,locObj:ca=null}=
{}){return(ca||rb.create(g,K,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:g=null}={}){return rb.create(g,null,"gregory").eras(a)}static features(){return{relative:C()}}}const Lc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},id={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ve=Lc.hanidec.replace(/[\[|\]]/g,"").split(""),jd=`[ ${String.fromCharCode(160)}]`,Mc=new RegExp(jd,"g"),we={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nc=null;const Pc=[0,31,59,90,120,151,181,212,243,273,304,334],Oc=[0,31,60,91,121,152,182,213,244,274,305,335],ld={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},We={ordinal:1,hour:0,minute:0,second:0,millisecond:0},kd="year month day hour minute second millisecond".split(" "),Xe="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ye="year ordinal hour minute second millisecond".split(" ");
class Za{constructor(a){const g=a.zone||xb.defaultZone;let K=a.invalid||(Number.isNaN(a.ts)?new Rb("invalid input"):null)||(g.isValid?null:Ob(g));this.ts=k(a.ts)?xb.now():a.ts;let ca=null;var ma=null;K||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(g)?[ca,ma]=[a.old.c,a.old.o]:(ma=g.offset(this.ts),ca=Tb(this.ts,ma),ca=(K=Number.isNaN(ca.year)?new Rb("invalid input"):null)?null:ca,ma=K?null:ma));this._zone=g;this.loc=a.loc||rb.create();this.invalid=K;this.weekData=null;this.c=ca;this.o=ma;this.isLuxonDateTime=
!0}static now(){return new Za({})}static local(){const [a,g]=Qb(arguments),[K,ca,ma,qa,xa,Ga,Na]=g;return ib({year:K,month:ca,day:ma,hour:qa,minute:xa,second:Ga,millisecond:Na},a)}static utc(){const [a,g]=Qb(arguments),[K,ca,ma,qa,xa,Ga,Na]=g;a.zone=Eb.utcInstance;return ib({year:K,month:ca,day:ma,hour:qa,minute:xa,second:Ga,millisecond:Na},a)}static fromJSDate(a,g={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Za.invalid("invalid input");const K=
h(g.zone,xb.defaultZone);return K.isValid?new Za({ts:a,zone:K,loc:rb.fromObject(g)}):Za.invalid(Ob(K))}static fromMillis(a,g={}){if(q(a))return-864E13>a||864E13<a?Za.invalid("Timestamp out of range"):new Za({ts:a,zone:h(g.zone,xb.defaultZone),loc:rb.fromObject(g)});throw new Aa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,g={}){if(q(a))return new Za({ts:1E3*a,zone:h(g.zone,xb.defaultZone),loc:rb.fromObject(g)});throw new Aa("fromSeconds requires a numerical input");
}static fromObject(a,g={}){a=a||{};var K=h(g.zone,xb.defaultZone);if(!K.isValid)return Za.invalid(Ob(K));var ca=xb.now();const ma=k(g.specificOffset)?K.offset(ca):g.specificOffset,qa=N(a,Pb);var xa=!k(qa.ordinal),Ga=!k(qa.year),Na=!k(qa.month)||!k(qa.day);Ga=Ga||Na;var $a=qa.weekYear||qa.weekNumber;g=rb.fromObject(g);if((Ga||xa)&&$a)throw new oa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Na&&xa)throw new oa("Can't mix ordinal dates with month/day");Na=$a||qa.weekday&&
!Ga;let d=Tb(ca,ma);Na?(ca=Xe,$a=Ve,d=ta(d)):xa?(ca=Ye,$a=We,d=hb(d)):(ca=kd,$a=ld);let ab=!1;for(var Xa of ca)k(qa[Xa])?qa[Xa]=ab?$a[Xa]:d[Xa]:ab=!0;Na?(Xa=O(qa.weekYear),ca=E(qa.weekNumber,1,w(qa.weekYear)),$a=E(qa.weekday,1,7),Xa=Xa?ca?$a?!1:Ja("weekday",qa.weekday):Ja("week",qa.week):Ja("weekYear",qa.weekYear)):xa?(Xa=O(qa.year),ca=E(qa.ordinal,1,x(qa.year)?366:365),Xa=Xa?ca?!1:Ja("ordinal",qa.ordinal):Ja("year",qa.year)):Xa=b(qa);if(Xa=Xa||fb(qa))return Za.invalid(Xa);xa=Na?ub(qa):xa?lb(qa):
qa;const [zb,ra]=yb(xa,ma,K);K=new Za({ts:zb,zone:K,o:ra,loc:g});return qa.weekday&&Ga&&a.weekday!==K.weekday?Za.invalid("mismatched weekday",`you can't specify both a weekday of ${qa.weekday} and a date of ${K.toISO()}`):K}static fromISO(a,g={}){const [K,ca]=Ma(a,[Ie,Od],[Je,Me],[Ke,Ne],[Le,Oe]);return Ub(K,ca,g,"ISO 8601",a)}static fromRFC2822(a,g={}){const [K,ca]=Ma(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Ee,db]);return Ub(K,ca,g,"RFC 2822",a)}static fromHTTP(a,g={}){const [K,
ca]=Ma(a,[Fe,c],[Ge,c],[He,n]);return Ub(K,ca,g,"HTTP",g)}static fromFormat(a,g,K={}){if(k(a)||k(g))throw new Aa("fromFormat requires an input string and a format");const {locale:ca=null,numberingSystem:ma=null}=K,qa=rb.fromOpts({locale:ca,numberingSystem:ma,defaultToEN:!0}),{result:xa,zone:Ga,specificOffset:Na,invalidReason:$a}=Oa(qa,a,g),[d,ab,Xa,zb]=[xa,Ga,Na,$a];return zb?Za.invalid(zb):Ub(d,ab,K,`format ${g}`,a,Xa)}static fromString(a,g,K={}){return Za.fromFormat(a,g,K)}static fromSQL(a,g={}){const [K,
ca]=Ma(a,[Qe,Od],[Re,Se]);return Ub(K,ca,g,"SQL",a)}static invalid(a,g=null){if(!a)throw new Aa("need to specify a reason the DateTime is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new R(a);return new Za({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,g={}){return(a=Pa(a,rb.fromObject(g)))?a.map(K=>K?K.val:null).join(""):null}static expandFormat(a,g={}){return Ka(Ab.parseFormat(a),rb.fromObject(g)).map(K=>K.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Jb(this).weekYear:NaN}get weekNumber(){return this.isValid?Jb(this).weekNumber:NaN}get weekday(){return this.isValid?Jb(this).weekday:
NaN}get ordinal(){return this.isValid?hb(this.c).ordinal:NaN}get monthShort(){return this.isValid?kc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?kc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?kc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?kc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return x(this.year)}get daysInMonth(){return y(this.year,this.month)}get daysInYear(){return this.isValid?
x(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?w(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:g,numberingSystem:K,calendar:ca}=Ab.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:g,numberingSystem:K,outputCalendar:ca}}toUTC(a=0,g={}){return this.setZone(Eb.instance(a),g)}toLocal(){return this.setZone(xb.defaultZone)}setZone(a,{keepLocalTime:g=!1,keepCalendarTime:K=!1}={}){a=h(a,xb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let ca=
this.ts;if(g||K)g=a.offset(this.ts),K=this.toObject(),[ca]=yb(K,g,a);return ka(this,{ts:ca,zone:a})}return Za.invalid(Ob(a))}reconfigure({locale:a,numberingSystem:g,outputCalendar:K}={}){a=this.loc.clone({locale:a,numberingSystem:g,outputCalendar:K});return ka(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=N(a,Pb);var g=!k(a.weekYear)||!k(a.weekNumber)||!k(a.weekday);const K=!k(a.ordinal),ca=!k(a.year),ma=!k(a.month)||!k(a.day),qa=a.weekYear||
a.weekNumber;if((ca||ma||K)&&qa)throw new oa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&K)throw new oa("Can't mix ordinal dates with month/day");g?g=ub({...ta(this.c),...a}):k(a.ordinal)?(g={...this.toObject(),...a},k(a.day)&&(g.day=Math.min(y(g.year,g.month),g.day))):g=lb({...hb(this.c),...a});const [xa,Ga]=yb(g,this.o,this.zone);return ka(this,{ts:xa,o:Ga})}plus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);return ka(this,Sb(this,a))}minus(a){if(!this.isValid)return this;
a=gb.fromDurationLike(a).negate();return ka(this,Sb(this,a))}startOf(a){if(!this.isValid)return this;const g={};a=gb.normalizeUnit(a);switch(a){case "years":g.month=1;case "quarters":case "months":g.day=1;case "weeks":case "days":g.hour=0;case "hours":g.minute=0;case "minutes":g.second=0;case "seconds":g.millisecond=0}"weeks"===a&&(g.weekday=1);"quarters"===a&&(g.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(g)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
g={}){return this.isValid?Ab.create(this.loc.redefaultToEN(g)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Ta,g={}){return this.isValid?Ab.create(this.loc.clone(g),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ab.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:g=!1,suppressMilliseconds:K=!1,includeOffset:ca=!0,extendedZone:ma=!1}={}){if(!this.isValid)return null;a="extended"===a;let qa=
hc(this,a);return qa=qa+"T"+Db(this,a,g,K,ca,ma)}toISODate({format:a="extended"}={}){return this.isValid?hc(this,"extended"===a):null}toISOWeekDate(){return Zb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:g=!1,includeOffset:K=!0,includePrefix:ca=!1,extendedZone:ma=!1,format:qa="extended"}={}){return this.isValid?(ca?"T":"")+Db(this,"extended"===qa,g,a,K,ma):null}toRFC2822(){return Zb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Zb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
hc(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:g=!1,includeOffsetSpace:K=!0}={}){let ca="HH:mm:ss.SSS";if(g||a)K&&(ca+=" "),g?ca+="z":a&&(ca+="ZZ");return Zb(this,ca,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const g={...this.c};a.includeConfig&&(g.outputCalendar=this.outputCalendar,g.numberingSystem=this.loc.numberingSystem,g.locale=this.loc.locale);return g}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,g="milliseconds",K={}){if(!this.isValid||!a.isValid)return gb.invalid("created by diffing an invalid DateTime");K={locale:this.locale,numberingSystem:this.numberingSystem,...K};
const ca=(Array.isArray(g)?g:[g]).map(gb.normalizeUnit);g=a.valueOf()>this.valueOf();a=T(g?this:a,g?a:this,ca,K);return g?a.negate():a}diffNow(a="milliseconds",g={}){return this.diff(Za.now(),a,g)}until(a){return this.isValid?vb.fromDateTimes(this,a):this}hasSame(a,g){if(!this.isValid)return!1;const K=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(g)<=K&&K<=a.endOf(g)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const g=a.base||Za.fromObject({},{zone:this.zone}),K=a.padding?this<g?-a.padding:a.padding:0;let ca="years months days hours minutes seconds".split(" "),ma=a.unit;Array.isArray(a.unit)&&(ca=a.unit,ma=void 0);return Fb(g,this.plus(K),{...a,numeric:"always",units:ca,unit:ma})}toRelativeCalendar(a={}){return this.isValid?Fb(a.base||Za.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Za.isDateTime))throw new Aa("min requires all arguments be DateTimes");
return S(a,g=>g.valueOf(),Math.min)}static max(...a){if(!a.every(Za.isDateTime))throw new Aa("max requires all arguments be DateTimes");return S(a,g=>g.valueOf(),Math.max)}static fromFormatExplain(a,g,K={}){const {locale:ca=null,numberingSystem:ma=null}=K;K=rb.fromOpts({locale:ca,numberingSystem:ma,defaultToEN:!0});return Oa(K,a,g)}static fromStringExplain(a,g,K={}){return Za.fromFormatExplain(a,g,K)}static get DATE_SHORT(){return Ta}static get DATE_MED(){return nb}static get DATE_MED_WITH_WEEKDAY(){return ob}static get DATE_FULL(){return mb}static get DATE_HUGE(){return wb}static get TIME_SIMPLE(){return Gb}static get TIME_WITH_SECONDS(){return md}static get TIME_WITH_SHORT_OFFSET(){return nd}static get TIME_WITH_LONG_OFFSET(){return od}static get TIME_24_SIMPLE(){return pd}static get TIME_24_WITH_SECONDS(){return qd}static get TIME_24_WITH_SHORT_OFFSET(){return rd}static get TIME_24_WITH_LONG_OFFSET(){return sd}static get DATETIME_SHORT(){return td}static get DATETIME_SHORT_WITH_SECONDS(){return ud}static get DATETIME_MED(){return vd}static get DATETIME_MED_WITH_SECONDS(){return wd}static get DATETIME_MED_WITH_WEEKDAY(){return xe}static get DATETIME_FULL(){return xd}static get DATETIME_FULL_WITH_SECONDS(){return yd}static get DATETIME_HUGE(){return zd}static get DATETIME_HUGE_WITH_SECONDS(){return Ad}}
m.DateTime=Za;m.Duration=gb;m.FixedOffsetZone=Eb;m.IANAZone=Vb;m.Info=kc;m.Interval=vb;m.SystemZone=mc;m.Zone=ic})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(m,f,la){var ba={exports:{}};ba.exports;(function(ha){(function(W,J){ha.exports&&(ha.exports=J())})(la.commonjsGlobal,function(){function W(h,k,q,O){h=Error.call(this,h);Object.setPrototypeOf&&Object.setPrototypeOf(h,W.prototype);h.expected=k;h.found=
q;h.location=O;h.name="SyntaxError";return h}function J(h,k,q){q=q||" ";if(h.length>k)return h;k-=h.length;q+=q.repeat(k);return h+q.slice(0,k)}(function(h,k){function q(){this.constructor=h}q.prototype=k.prototype;h.prototype=new q})(W,Error);W.prototype.format=function(h){var k="Error: "+this.message;if(this.location){var q=null,O;for(O=0;O<h.length;O++)if(h[O].source===this.location.source){q=h[O].text.split(/\r\n|\n|\r/g);break}h=this.location.start;O=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(h):h;var C=this.location.source+":"+O.line+":"+O.column;if(q){var S=this.location.end,e=J("",O.line.toString().length," ");q=q[h.line-1];S=(h.line===S.line?S.column:q.length+1)-h.column||1;k+="\n --\x3e "+C+"\n"+e+" |\n"+O.line+" | "+q+"\n"+e+" | "+J("",h.column-1," ")+J("",S,"^")}else k+="\n at "+C}return k};W.buildMessage=function(h,k){function q(p){return p.charCodeAt(0).toString(16).toUpperCase()}function O(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+q(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+q(E)})}function C(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+q(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+q(E)})}function S(p){return e[p.type](p)}
var e={literal:function(p){return'"'+O(p.text)+'"'},class:function(p){var E=p.parts.map(function(Q){return Array.isArray(Q)?C(Q[0])+"-"+C(Q[1]):C(Q)});return"["+(p.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};return"Expected "+function(p){p=p.map(S);var E,Q;p.sort();if(0<p.length){for(Q=E=1;E<p.length;E++)p[E-1]!==p[E]&&(p[Q]=p[E],Q++);p.length=Q}switch(p.length){case 1:return p[0];case 2:return p[0]+
" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}(h)+" but "+(k?'"'+O(k)+'"':"end of input")+" found."};return{SyntaxError:W,parse:function(h,k){function q(t,D){return{type:"literal",text:t,ignoreCase:D}}function O(t,D,Z){return{type:"class",parts:t,inverted:D,ignoreCase:Z}}function C(t){var D=ab[t],Z;if(!D){for(Z=t-1;!ab[Z];)Z--;D=ab[Z];for(D={line:D.line,column:D.column};Z<t;)10===h.charCodeAt(Z)?(D.line++,D.column=1):D.column++,Z++;ab[t]=D}return D}function S(t,D,Z){var wa=
C(t),Ia=C(D);t={source:fb,start:{offset:t,line:wa.line,column:wa.column},end:{offset:D,line:Ia.line,column:Ia.column}};Z&&fb&&"function"===typeof fb.offset&&(t.start=fb.offset(t.start),t.end=fb.offset(t.end));return t}function e(t){d<Xa||(d>Xa&&(Xa=d,zb=[]),zb.push(t))}function p(){var t=d;ta();var D=Q();D!==b?(ta(),t=D):(d=t,t=b);return t}function E(){var t=d;var D=Q();if(D!==b){t=[];var Z=d;var wa=ta();var Ia=Ja();if(Ia!==b){var bb=ta();var cb=Q();cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)}else d=Z,Z=
b;for(;Z!==b;)t.push(Z),Z=d,wa=ta(),Ia=Ja(),Ia!==b?(bb=ta(),cb=Q(),cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)):(d=Z,Z=b);Z={type:"expression-list"};D=[D];for(wa=0;wa<t.length;wa++)D.push(t[wa][3]);Z.value=D;t=Z}else d=t,t=b;return t}function Q(){var t=d;var D=H();if(D!==b){t=[];var Z=d;var wa=ta();var Ia=aa();if(Ia!==b){var bb=ta();var cb=H();cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)t.push(Z),Z=d,wa=ta(),Ia=aa(),Ia!==b?(bb=ta(),cb=H(),cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)):(d=Z,Z=b);t=
lb(D,t)}else d=t,t=b;return t}function H(){var t=d;var D=v();if(D!==b){t=[];var Z=d;var wa=ta();var Ia=B();if(Ia!==b){var bb=ta();var cb=v();cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)t.push(Z),Z=d,wa=ta(),Ia=B(),Ia!==b?(bb=ta(),cb=v(),cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)):(d=Z,Z=b);t=lb(D,t)}else d=t,t=b;return t}function v(){var t=d;var D=da();if(D===b){D=d;if(33===h.charCodeAt(d)){var Z=ka;d++}else Z=b,0===ra&&e(ne);if(Z!==b){var wa=d;ra++;if(61===h.charCodeAt(d)){var Ia=gc;d++}else Ia=
b,0===ra&&e(Kc);ra--;Ia===b?wa=void 0:(d=wa,wa=b);wa!==b?D=Z=[Z,wa]:(d=D,D=b)}else d=D,D=b}D!==b?(Z=ta(),wa=v(),wa!==b?t={type:"unary-expression",operator:"NOT",expr:wa}:(d=t,t=b)):(d=t,t=b);if(t===b){D=d;t=y();if(t!==b){ta();D=[];Z=d;wa=ta();Ia=F();if(Ia!==b){var bb=ta();var cb=y();cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)}else d=Z,Z=b;if(Z!==b)for(;Z!==b;)D.push(Z),Z=d,wa=ta(),Ia=F(),Ia!==b?(bb=ta(),cb=y(),cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)):(d=Z,Z=b);else D=b;D!==b&&(D={type:"arithmetic",tail:D});D===
b&&(D=d,Z=x(),Z!==b?(ta(),wa=Ra(),wa!==b?(ta(),wa=E(),wa!==b?(ta(),Ia=Wa(),Ia!==b?D={op:Z,right:wa}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b)):(d=D,D=b),D===b&&(D=d,Z=x(),Z!==b?(ta(),wa=Ra(),wa!==b?(ta(),wa=Wa(),wa!==b?D={op:Z,right:{type:"expression-list",value:[]}}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b),D===b&&(D=d,Z=x(),Z!==b?(ta(),wa=r(),wa!==b?D={op:Z,right:wa}:(d=D,D=b)):(d=D,D=b))),D===b&&(D=d,Ia=da(),Ia!==b?(ta(),Z=l(),Z!==b?(ta(),wa=y(),wa!==b?(ta(),bb=B(),bb!==b?(ta(),Ia=y(),Ia!==b?D={op:"NOT"+Z,right:{type:"expression-list",
value:[wa,Ia]}}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b)):(d=D,D=b)):(d=D,D=b),D===b&&(D=d,Ia=l(),Ia!==b?(ta(),Z=y(),Z!==b?(ta(),wa=B(),wa!==b?(ta(),bb=y(),bb!==b?D={op:Ia,right:{type:"expression-list",value:[Z,bb]}}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b)):(d=D,D=b)),D===b&&(D=d,Z=c(),Z!==b?(ta(),wa=da(),wa!==b?(ta(),wa=y(),wa!==b?D={op:Z+"NOT",right:wa}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b),D===b&&(D=d,Z=c(),Z!==b?(ta(),wa=y(),wa!==b?D={op:Z,right:wa}:(d=D,D=b)):(d=D,D=b)),D===b&&(D=d,Z=L(),Z!==b?(ta(),wa=Ea(),wa!==b?
(ta(),Ia=d,h.substr(d,6).toLowerCase()===ob?(bb=h.substr(d,6),d+=6):(bb=b,0===ra&&e(Od)),bb!==b?(bb=d,ra++,cb=N(),ra--,cb===b?bb=void 0:(d=bb,bb=b),bb!==b?Ia="ESCAPE":(d=Ia,Ia=b)):(d=Ia,Ia=b),Ia!==b?(ta(),Ia=Fa(),Ia!==b?D={op:Z,right:wa,escape:Ia.value}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b)):(d=D,D=b),D===b&&(D=d,Z=L(),Z!==b?(ta(),wa=Ea(),wa!==b?D={op:Z,right:wa,escape:""}:(d=D,D=b)):(d=D,D=b))))));D===b&&(D=null);""==D||void 0==D||null==D?D=t:(Z=null,D=Z="arithmetic"==D.type?lb(t,D.tail):hb(D.op,t,D.right,
D.escape))}else d=D,D=b;t=D}return t}function F(){if(h.substr(d,2)===Tb){var t=Tb;d+=2}else t=b,0===ra&&e(hd);t===b&&(62===h.charCodeAt(d)?(t=yb,d++):(t=b,0===ra&&e(pe)),t===b&&(h.substr(d,2)===Sb?(t=Sb,d+=2):(t=b,0===ra&&e(Bd)),t===b&&(h.substr(d,2)===Ub?(t=Ub,d+=2):(t=b,0===ra&&e(se)),t===b&&(60===h.charCodeAt(d)?(t=Zb,d++):(t=b,0===ra&&e(re)),t===b&&(61===h.charCodeAt(d)?(t=gc,d++):(t=b,0===ra&&e(Kc)),t===b&&(h.substr(d,2)===hc?(t=hc,d+=2):(t=b,0===ra&&e(qe))))))));return t}function L(){var t=
t=d;var D=da();if(D!==b){var Z=ta();var wa=n();wa!==b?t=D=[D,Z,wa]:(d=t,t=b)}else d=t,t=b;t!==b&&(t=t[0]+" "+t[2]);t===b&&(t=n());return t}function x(){var t=t=d;var D=da();if(D!==b){var Z=ta();var wa=db();wa!==b?t=D=[D,Z,wa]:(d=t,t=b)}else d=t,t=b;t!==b&&(t=t[0]+" "+t[2]);t===b&&(t=db());return t}function y(){var t=d;var D=w();if(D!==b){t=[];var Z=d;var wa=ta();var Ia=A();if(Ia!==b){var bb=ta();var cb=w();cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)t.push(Z),Z=d,wa=ta(),Ia=A(),Ia!==
b?(bb=ta(),cb=w(),cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)):(d=Z,Z=b);t=lb(D,t)}else d=t,t=b;return t}function A(){if(43===h.charCodeAt(d)){var t=Db;d++}else t=b,0===ra&&e(Uc);t===b&&(45===h.charCodeAt(d)?(t=Pb,d++):(t=b,0===ra&&e(Ab)),t===b&&(h.substr(d,2)===ib?(t=ib,d+=2):(t=b,0===ra&&e(Rb))));return t}function w(){var t=d;var D=I();if(D!==b){t=[];var Z=d;var wa=ta();var Ia=z();if(Ia!==b){var bb=ta();var cb=I();cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)t.push(Z),Z=d,wa=ta(),Ia=z(),
Ia!==b?(bb=ta(),cb=I(),cb!==b?Z=wa=[wa,Ia,bb,cb]:(d=Z,Z=b)):(d=Z,Z=b);t=lb(D,t)}else d=t,t=b;return t}function z(){if(42===h.charCodeAt(d)){var t=Fb;d++}else t=b,0===ra&&e(Hd);t===b&&(47===h.charCodeAt(d)?(t=Qb,d++):(t=b,0===ra&&e(Id)));return t}function I(){var t=Fa();if(t===b){var D=d;var Z=d;var wa=Sa();if(wa!==b){var Ia=Va();if(Ia!==b){var bb=eb();bb!==b?Z=parseFloat(wa+Ia+bb):(d=Z,Z=b)}else d=Z,Z=b}else d=Z,Z=b;Z===b&&(Z=d,wa=Sa(),wa!==b?(Ia=Va(),Ia!==b?Z=parseFloat(wa+Ia):(d=Z,Z=b)):(d=Z,Z=
b),Z===b&&(Z=d,wa=Sa(),wa!==b?(Ia=eb(),Ia!==b?Z=parseFloat(wa+Ia):(d=Z,Z=b)):(d=Z,Z=b),Z===b&&(Z=d,wa=Sa(),wa!==b&&(wa=parseFloat(wa)),Z=wa)));var cb=Z;if(cb!==b){var Qd=d;ra++;var Lf=ia();ra--;Lf===b?Qd=void 0:(d=Qd,Qd=b);Qd!==b?D={type:"number",value:cb}:(d=D,D=b)}else d=D,D=b;t=D;if(t===b){var Xc=d;var qc=d;if(h.substr(d,4).toLowerCase()===Ca){var Rd=h.substr(d,4);d+=4}else Rd=b,0===ra&&e(He);if(Rd!==b){var Yc=d;ra++;var Mf=N();ra--;Mf===b?Yc=void 0:(d=Yc,Yc=b);Yc!==b?qc=Rd=[Rd,Yc]:(d=qc,qc=b)}else d=
qc,qc=b;var lc=qc;lc!==b&&(lc={type:"boolean",value:!0});Xc=lc;if(Xc===b){Xc=d;var rc=d;if(h.substr(d,5).toLowerCase()===Aa){var Sd=h.substr(d,5);d+=5}else Sd=b,0===ra&&e(Ie);if(Sd!==b){var Zc=d;ra++;var Nf=N();ra--;Nf===b?Zc=void 0:(d=Zc,Zc=b);Zc!==b?rc=Sd=[Sd,Zc]:(d=rc,rc=b)}else d=rc,rc=b;lc=rc;lc!==b&&(lc={type:"boolean",value:!1});Xc=lc}t=Xc;if(t===b){var sc=d;if(h.substr(d,4).toLowerCase()===oa){var Td=h.substr(d,4);d+=4}else Td=b,0===ra&&e(Ge);if(Td!==b){var $c=d;ra++;var Of=N();ra--;Of===
b?$c=void 0:(d=$c,$c=b);$c!==b?sc=Td=[Td,$c]:(d=sc,sc=b)}else d=sc,sc=b;var Ze=sc;Ze!==b&&(Ze={type:"null",value:null});t=Ze;if(t===b){var tc=d;if(ea()!==b){ta();var lf=Ea();lf!==b?tc={type:"date",value:lf.value}:(d=tc,tc=b)}else d=tc,tc=b;t=tc;if(t===b){var uc=d;if(U()!==b){ta();var mf=Ea();mf!==b?uc={type:"timestamp",value:mf.value}:(d=uc,uc=b)}else d=uc,uc=b;t=uc;if(t===b){var Bb=d;var $e=na();if($e!==b){ta();if(45===h.charCodeAt(d)){var cc=Pb;d++}else cc=b,0===ra&&e(Ab);cc===b&&(43===h.charCodeAt(d)?
(cc=Db,d++):(cc=b,0===ra&&e(Uc)));if(cc!==b){ta();var ad=Ea();if(ad!==b){ta();var nf=V();nf!==b?Bb={type:"interval",value:ad,qualifier:nf,op:cc}:(d=Bb,Bb=b)}else d=Bb,Bb=b}else d=Bb,Bb=b}else d=Bb,Bb=b;Bb===b&&(Bb=d,$e=na(),$e!==b?(ta(),cc=Ea(),cc!==b?(ta(),ad=V(),ad!==b?Bb={type:"interval",value:cc,qualifier:ad,op:""}:(d=Bb,Bb=b)):(d=Bb,Bb=b)):(d=Bb,Bb=b));t=Bb}}}}}}var pb=t;if(pb===b){var Kb=d;var vc=d;if(h.substr(d,7).toLowerCase()===qd){var of=h.substr(d,7);d+=7}else of=b,0===ra&&e(Pd);if(of!==
b){var Ud=d;ra++;var Pf=N();ra--;Pf===b?Ud=void 0:(d=Ud,Ud=b);Ud!==b?vc="EXTRACT":(d=vc,vc=b)}else d=vc,vc=b;if(vc!==b){ta();var Qf=Ra();if(Qf!==b){ta();var Xb=pa();Xb===b&&(Xb=sa(),Xb===b&&(Xb=ua(),Xb===b&&(Xb=Da(),Xb===b&&(Xb=za(),Xb===b&&(Xb=ya())))));var pf=Xb;if(pf!==b){ta();var Rf=G();if(Rf!==b){ta();var qf=Q();if(qf!==b){ta();var Sf=Wa();Sf!==b?Kb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(d=Kb,Kb=b)}else d=Kb,Kb=b}else d=Kb,Kb=b}else d=
Kb,Kb=b}else d=Kb,Kb=b}else d=Kb,Kb=b;pb=Kb;if(pb===b){var Lb=d;var wc=d;if(h.substr(d,9).toLowerCase()===pd){var rf=h.substr(d,9);d+=9}else rf=b,0===ra&&e(Se);if(rf!==b){var Vd=d;ra++;var Tf=N();ra--;Tf===b?Vd=void 0:(d=Vd,Vd=b);Vd!==b?wc="SUBSTRING":(d=wc,wc=b)}else d=wc,wc=b;if(wc!==b){ta();var Uf=Ra();if(Uf!==b){ta();var af=Q();if(af!==b){ta();var Vf=G();if(Vf!==b){ta();var bf=Q();if(bf!==b){ta();var dc=d;var xc=d;if(h.substr(d,3).toLowerCase()===od){var sf=h.substr(d,3);d+=3}else sf=b,0===ra&&
e(Re);if(sf!==b){var Wd=d;ra++;var Wf=N();ra--;Wf===b?Wd=void 0:(d=Wd,Wd=b);Wd!==b?xc="FOR":(d=xc,xc=b)}else d=xc,xc=b;var bd=xc;if(bd!==b){var Xf=ta();var tf=Q();if(tf!==b){var Yf=ta();dc=bd=[bd,Xf,tf,Yf]}else d=dc,dc=b}else d=dc,dc=b;dc===b&&(dc=null);bd=Wa();bd!==b?Lb={type:"function",name:"substring",args:{type:"expression-list",value:dc?[af,bf,dc[2]]:[af,bf]}}:(d=Lb,Lb=b)}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b;pb=Lb;if(pb===b){var sb=d;var cf=T();if(cf!==b){ta();
var df=Ra();if(df!==b){ta();var ec=u();ec===b&&(ec=null);ta();var cd=Q();if(cd!==b){ta();var ef=G();if(ef!==b){ta();var uf=Q();if(uf!==b){ta();var Zf=Wa();Zf!==b?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ec?"BOTH":ec},cd,uf]}}:(d=sb,sb=b)}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b;sb===b&&(sb=d,cf=T(),cf!==b?(ta(),df=Ra(),df!==b?(ta(),ec=u(),ec===b&&(ec=null),ta(),cd=Q(),cd!==b?(ta(),ef=Wa(),ef!==b?sb={type:"function",
name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ec?"BOTH":ec},cd]}}:(d=sb,sb=b)):(d=sb,sb=b)):(d=sb,sb=b)):(d=sb,sb=b));pb=sb;if(pb===b){var Mb=d;var yc=d;if(h.substr(d,8).toLowerCase()===sd){var vf=h.substr(d,8);d+=8}else vf=b,0===ra&&e(Ue);if(vf!==b){var Xd=d;ra++;var $f=N();ra--;$f===b?Xd=void 0:(d=Xd,Xd=b);Xd!==b?yc="POSITION":(d=yc,yc=b)}else d=yc,yc=b;if(yc!==b){ta();var ag=Ra();if(ag!==b){ta();var wf=Q();if(wf!==b){ta();var bg=db();if(bg!==b){ta();var xf=Q();if(xf!==
b){ta();var cg=Wa();cg!==b?Mb={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(d=Mb,Mb=b)}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b;pb=Mb;if(pb===b){var Nb=d;var zc=d;if(h.substr(d,4).toLowerCase()===xd){var yf=h.substr(d,4);d+=4}else yf=b,0===ra&&e(Lc);if(yf!==b){var Yd=d;ra++;var dg=N();ra--;dg===b?Yd=void 0:(d=Yd,Yd=b);Yd!==b?zc="CAST":(d=zc,zc=b)}else d=zc,zc=b;if(zc!==b){ta();var eg=Ra();if(eg!==b){ta();var zf=Q();if(zf!==b){ta();
var Ac=d;if(h.substr(d,2).toLowerCase()===yd){var Af=h.substr(d,2);d+=2}else Af=b,0===ra&&e(id);if(Af!==b){var Zd=d;ra++;var fg=N();ra--;fg===b?Zd=void 0:(d=Zd,Zd=b);Zd!==b?Ac="AS":(d=Ac,Ac=b)}else d=Ac,Ac=b;var gg=Ac;if(gg!==b){ta();var qb=d;var Bc=d;if(h.substr(d,7).toLowerCase()===zd){var Bf=h.substr(d,7);d+=7}else Bf=b,0===ra&&e(ve);if(Bf!==b){var $d=d;ra++;var hg=N();ra--;hg===b?$d=void 0:(d=$d,$d=b);$d!==b?Bc="INTEGER":(d=Bc,Bc=b)}else d=Bc,Bc=b;var tb=Bc;tb!==b&&(tb={type:"data-type",value:{type:"integer"}});
qb=tb;if(qb===b){qb=d;var Cc=d;if(h.substr(d,8).toLowerCase()===Ad){var Cf=h.substr(d,8);d+=8}else Cf=b,0===ra&&e(jd);if(Cf!==b){var ae=d;ra++;var ig=N();ra--;ig===b?ae=void 0:(d=ae,ae=b);ae!==b?Cc="SMALLINT":(d=Cc,Cc=b)}else d=Cc,Cc=b;tb=Cc;tb!==b&&(tb={type:"data-type",value:{type:"smallint"}});qb=tb;if(qb===b){qb=d;var Dc=d;if(h.substr(d,5).toLowerCase()===ic){var Df=h.substr(d,5);d+=5}else Df=b,0===ra&&e(Mc);if(Df!==b){var be=d;ra++;var jg=N();ra--;jg===b?be=void 0:(d=be,be=b);be!==b?Dc="FLOAT":
(d=Dc,Dc=b)}else d=Dc,Dc=b;tb=Dc;tb!==b&&(tb={type:"data-type",value:{type:"float"}});qb=tb;if(qb===b){qb=d;var Ec=d;if(h.substr(d,4).toLowerCase()===Qc){var Ef=h.substr(d,4);d+=4}else Ef=b,0===ra&&e(we);if(Ef!==b){var ce=d;ra++;var kg=N();ra--;kg===b?ce=void 0:(d=ce,ce=b);ce!==b?Ec="REAL":(d=Ec,Ec=b)}else d=Ec,Ec=b;tb=Ec;tb!==b&&(tb={type:"data-type",value:{type:"real"}});qb=tb;if(qb===b&&(qb=d,tb=ea(),tb!==b&&(tb={type:"data-type",value:{type:"date"}}),qb=tb,qb===b&&(qb=d,tb=U(),tb!==b&&(tb={type:"data-type",
value:{type:"timestamp"}}),qb=tb,qb===b))){qb=d;var Fc=d;if(h.substr(d,7).toLowerCase()===mc){var Ff=h.substr(d,7);d+=7}else Ff=b,0===ra&&e(Nc);if(Ff!==b){var de=d;ra++;var lg=N();ra--;lg===b?de=void 0:(d=de,de=b);de!==b?Fc="VARCHAR":(d=Fc,Fc=b)}else d=Fc,Fc=b;tb=Fc;if(tb!==b){ta();var mg=Ra();if(mg!==b){ta();var Gf=kb();if(Gf!==b){ta();var ng=Wa();ng!==b?qb={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(d=qb,qb=b)}else d=qb,qb=b}else d=qb,qb=b}else d=qb,qb=b}}}}var Hf=qb;if(Hf!==b){ta();
var og=Wa();og!==b?Nb={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(d=Nb,Nb=b)}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b;pb=Nb;if(pb===b){var jc=d;var ee;var Yb=d;Yb=ee=Y();if(Yb===b)if(Yb=d,96===h.charCodeAt(d)?(ee=Sc,d++):(ee=b,0===ra&&e(Na)),ee!==b){var fe=[];if(Jc.test(h.charAt(d))){var fc=h.charAt(d);d++}else fc=b,0===ra&&e($a);if(fc!==b)for(;fc!==b;)fe.push(fc),Jc.test(h.charAt(d))?(fc=h.charAt(d),d++):(fc=b,0===ra&&e($a));else fe=
b;fe!==b?(96===h.charCodeAt(d)?(fc=Sc,d++):(fc=b,0===ra&&e(Na)),fc!==b?Yb=fe.join(""):(d=Yb,Yb=b)):(d=Yb,Yb=b)}else d=Yb,Yb=b;var If=Yb;if(If!==b){ta();var pg=Ra();if(pg!==b){ta();var ge=E();ge===b&&(ge=null);ta();var qg=Wa();qg!==b?jc={type:"function",name:If,args:ge?ge:{type:"expression-list",value:[]}}:(d=jc,jc=b)}else d=jc,jc=b}else d=jc,jc=b;pb=jc;if(pb===b){var $b;var Cb=d;var ff=Qa();if(ff!==b){ta();var dd=Q();if(dd!==b){ta();var ed=[];for($b=Ha();$b!==b;)ed.push($b),$b=Ha();$b=ta();var he=
Ka();he!==b?Cb={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:null}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;if(Cb===b)if(Cb=d,ff=Qa(),ff!==b)if(ta(),dd=Q(),dd!==b){ta();ed=[];for($b=Ha();$b!==b;)ed.push($b),$b=Ha();$b=ta();he=Ua();if(he!==b){ta();var rg=Ka();rg!==b?Cb={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:he.value}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;else d=Cb,Cb=b;var gf=Cb;if(gf===b){var ac;var Ib=d;var hf=Qa();if(hf!==b){ta();var fd=[];for(ac=
Ma();ac!==b;)fd.push(ac),ac=Ma();ac=ta();var ie=Ka();ie!==b?Ib={type:"case-expression",format:"searched",clauses:fd,else:null}:(d=Ib,Ib=b)}else d=Ib,Ib=b;if(Ib===b)if(Ib=d,hf=Qa(),hf!==b){ta();fd=[];for(ac=Ma();ac!==b;)fd.push(ac),ac=Ma();ac=ta();ie=Ua();if(ie!==b){ta();var sg=Ka();sg!==b?Ib={type:"case-expression",format:"searched",clauses:fd,else:ie.value}:(d=Ib,Ib=b)}else d=Ib,Ib=b}else d=Ib,Ib=b;gf=Ib}pb=gf;if(pb===b){var je;var ke=d;var Jf=ia();if(Jf!==b){var Kf=[];for(je=M();je!==b;)Kf.push(je),
je=M();ke=Jf+Kf.join("")}else d=ke,ke=b;var le=ke;if(le!==b){var jf=le;le=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}pb=le;if(pb===b&&(pb=r(),pb===b)){pb=d;var tg=Ra();if(tg!==b){ta();var kf=Q();if(kf!==b){ta();var ug=Wa();ug!==b?(kf.paren=!0,pb=kf):(d=pb,pb=b)}else d=pb,pb=b}else d=pb,pb=b}}}}}}}}}return pb}function Y(){var t;var D=d;var Z=ia();if(Z!==b){D=[];for(t=
N();t!==b;)D.push(t),t=N();D=Z+D.join("")}else d=D,D=b;return D}function ia(){if(Cd.test(h.charAt(d))){var t=h.charAt(d);d++}else t=b,0===ra&&e(Vc);return t}function N(){if(Dd.test(h.charAt(d))){var t=h.charAt(d);d++}else t=b,0===ra&&e(Jd);return t}function M(){if(Ed.test(h.charAt(d))){var t=h.charAt(d);d++}else t=b,0===ra&&e(Wc);return t}function r(){var t=d;if(64===h.charCodeAt(d)){var D=Ya;d++}else D=b,0===ra&&e(Ce);if(D!==b){var Z=Y();Z!==b?t=D=[D,Z]:(d=t,t=b)}else d=t,t=b;t!==b&&(t={type:"parameter",
value:t[1]});return t}function u(){var t=d;if(h.substr(d,7).toLowerCase()===vd){var D=h.substr(d,7);d+=7}else D=b,0===ra&&e(gb);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="LEADING":(d=t,t=b)}else d=t,t=b;t===b&&(t=d,h.substr(d,8).toLowerCase()===wd?(D=h.substr(d,8),d+=8):(D=b,0===ra&&e(vb)),D!==b?(D=d,ra++,Z=N(),ra--,Z===b?D=void 0:(d=D,D=b),D!==b?t="TRAILING":(d=t,t=b)):(d=t,t=b),t===b&&(t=d,h.substr(d,4).toLowerCase()===xe?(D=h.substr(d,4),d+=4):(D=b,0===ra&&e(kc)),D!==b?
(D=d,ra++,Z=N(),ra--,Z===b?D=void 0:(d=D,D=b),D!==b?t="BOTH":(d=t,t=b)):(d=t,t=b)));return t}function V(){var t=d;var D=d;var Z=ja();if(Z!==b){ta();var wa=Ra();if(wa!==b)if(ta(),wa=Ba(),wa!==b){ta();var Ia=Wa();Ia!==b?D={type:"interval-period",period:Z.value,precision:wa,secondary:null}:(d=D,D=b)}else d=D,D=b;else d=D,D=b}else d=D,D=b;D===b&&(D=d,Z=ja(),Z!==b&&(Z={type:"interval-period",period:Z.value,precision:null,secondary:null}),D=Z);if(D!==b)if(ta(),Z=d,h.substr(d,2).toLowerCase()===nc?(wa=h.substr(d,
2),d+=2):(wa=b,0===ra&&e(Pc)),wa!==b?(wa=d,ra++,Ia=N(),ra--,Ia===b?wa=void 0:(d=wa,wa=b),wa!==b?Z="TO":(d=Z,Z=b)):(d=Z,Z=b),Z!==b){ta();Z=d;wa=ja();wa!==b&&(wa={type:"interval-period",period:wa.value,precision:null,secondary:null});Z=wa;if(Z===b){Z=d;wa=ya();if(wa!==b)if(ta(),wa=Ra(),wa!==b)if(ta(),wa=Ba(),wa!==b)if(ta(),Ia=Ja(),Ia!==b)if(ta(),Ia=va(),Ia!==b){ta();var bb=Wa();bb!==b?Z={type:"interval-period",period:"second",precision:wa,secondary:Ia}:(d=Z,Z=b)}else d=Z,Z=b;else d=Z,Z=b;else d=Z,Z=
b;else d=Z,Z=b;else d=Z,Z=b;Z===b&&(Z=d,wa=ya(),wa!==b?(ta(),wa=Ra(),wa!==b?(ta(),wa=Ba(),wa!==b?(ta(),Ia=Wa(),Ia!==b?Z={type:"interval-period",period:"second",precision:wa,secondary:null}:(d=Z,Z=b)):(d=Z,Z=b)):(d=Z,Z=b)):(d=Z,Z=b),Z===b&&(Z=d,wa=ya(),wa!==b&&(wa={type:"interval-period",period:"second",precision:null,secondary:null}),Z=wa))}Z!==b?t={type:"interval-qualifier",start:D,end:Z}:(d=t,t=b)}else d=t,t=b;else d=t,t=b;t===b&&(t=d,Z=ja(),Z!==b?(ta(),D=Ra(),D!==b?(ta(),D=va(),D!==b?(ta(),wa=
Wa(),wa!==b?t={type:"interval-period",period:Z.value,precision:D,secondary:null}:(d=t,t=b)):(d=t,t=b)):(d=t,t=b)):(d=t,t=b),t===b&&(t=d,Z=ja(),Z!==b&&(Z={type:"interval-period",period:Z.value,precision:null,secondary:null}),t=Z,t===b&&(t=d,Z=ya(),Z!==b?(ta(),D=Ra(),D!==b?(ta(),D=Ba(),D!==b?(ta(),wa=Ja(),wa!==b?(ta(),Z=va(),Z!==b?(ta(),wa=Wa(),wa!==b?t={type:"interval-period",period:"second",precision:D,secondary:Z}:(d=t,t=b)):(d=t,t=b)):(d=t,t=b)):(d=t,t=b)):(d=t,t=b)):(d=t,t=b),t===b&&(t=d,Z=ya(),
Z!==b?(ta(),D=Ra(),D!==b?(ta(),D=va(),D!==b?(ta(),wa=Wa(),wa!==b?t={type:"interval-period",period:"second",precision:D,secondary:null}:(d=t,t=b)):(d=t,t=b)):(d=t,t=b)):(d=t,t=b),t===b&&(t=d,Z=ya(),Z!==b&&(Z={type:"interval-period",period:"second",precision:null,secondary:null}),t=Z)))));return t}function ja(){var t=d;t=ua();t!==b&&(t={type:"string",value:"day"});t===b&&(t=d,t=Da(),t!==b&&(t={type:"string",value:"hour"}),t===b&&(t=d,t=za(),t!==b&&(t={type:"string",value:"minute"}),t===b&&(t=d,t=sa(),
t!==b&&(t={type:"string",value:"month"}),t===b&&(t=d,t=pa(),t!==b&&(t={type:"string",value:"year"})))));return t}function va(){var t=kb();t!==b&&(t=parseFloat(t));return t}function Ba(){var t=kb();t!==b&&(t=parseFloat(t));return t}function Ea(){var t=Fa();t===b&&(t=r());return t}function Fa(){var t=d;if(39===h.charCodeAt(d)){var D=Hb;d++}else D=b,0===ra&&e(Kd);D===b&&(h.substr(d,2)===R?(D=R,d+=2):(D=b,0===ra&&e(Ld)));if(D!==b){D=[];var Z=d;h.substr(d,2)===fa?(Z=fa,d+=2):(Z=b,0===ra&&e(Md));Z!==b&&
(Z="'");Z===b&&(Tc.test(h.charAt(d))?(Z=h.charAt(d),d++):(Z=b,0===ra&&e(Nd)));for(;Z!==b;)D.push(Z),Z=d,h.substr(d,2)===fa?(Z=fa,d+=2):(Z=b,0===ra&&e(Md)),Z!==b&&(Z="'"),Z===b&&(Tc.test(h.charAt(d))?(Z=h.charAt(d),d++):(Z=b,0===ra&&e(Nd)));39===h.charCodeAt(d)?(Z=Hb,d++):(Z=b,0===ra&&e(Kd));Z!==b?t={type:"string",value:D.join("")}:(d=t,t=b)}else d=t,t=b;return t}function Ma(){var t=d;if(Oa()!==b){ta();var D=Q();if(D!==b){ta();var Z=Pa();Z!==b?(ta(),Z=Q(),Z!==b?t={type:"when-clause",operand:D,value:Z}:
(d=t,t=b)):(d=t,t=b)}else d=t,t=b}else d=t,t=b;return t}function Ha(){var t=d;if(Oa()!==b){ta();var D=Q();if(D!==b){ta();var Z=Pa();Z!==b?(ta(),Z=Q(),Z!==b?t={type:"when-clause",operand:D,value:Z}:(d=t,t=b)):(d=t,t=b)}else d=t,t=b}else d=t,t=b;return t}function Ua(){var t=d;var D=d;if(h.substr(d,4).toLowerCase()===rb){var Z=h.substr(d,4);d+=4}else Z=b,0===ra&&e(ca);if(Z!==b){Z=d;ra++;var wa=N();ra--;wa===b?Z=void 0:(d=Z,Z=b);Z!==b?D="ELSE":(d=D,D=b)}else d=D,D=b;D!==b?(ta(),D=Q(),D!==b?t={type:"else-clause",
value:D}:(d=t,t=b)):(d=t,t=b);return t}function Sa(){var t=kb();if(t===b){t=d;if(45===h.charCodeAt(d)){var D=Pb;d++}else D=b,0===ra&&e(Ab);D===b&&(43===h.charCodeAt(d)?(D=Db,d++):(D=b,0===ra&&e(Uc)));if(D!==b){var Z=kb();Z!==b?t=D[0]+Z:(d=t,t=b)}else d=t,t=b}return t}function Va(){var t=d;if(46===h.charCodeAt(d)){var D=X;d++}else D=b,0===ra&&e(De);D!==b?(t=kb(),t===b&&(t=null),t="."+(null!=t?t:"")):(d=t,t=b);return t}function eb(){var t;var D=t=d;if(Gd.test(h.charAt(d))){var Z=h.charAt(d);d++}else Z=
b,0===ra&&e(Ee);Z!==b?(xb.test(h.charAt(d))?(D=h.charAt(d),d++):(D=b,0===ra&&e(Fe)),D===b&&(D=null),D="e"+(null===D?"":D)):(d=D,D=b);D!==b?(Z=kb(),Z!==b?t=D+Z:(d=t,t=b)):(d=t,t=b);return t}function kb(){var t=[];var D=jb();if(D!==b)for(;D!==b;)t.push(D),D=jb();else t=b;t!==b&&(t=t.join(""));return t}function jb(){if(Fd.test(h.charAt(d))){var t=h.charAt(d);d++}else t=b,0===ra&&e(te);return t}function db(){var t=d;if(h.substr(d,2).toLowerCase()===La){var D=h.substr(d,2);d+=2}else D=b,0===ra&&e(Je);
if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="IN":(d=t,t=b)}else d=t,t=b;return t}function c(){var t=d;if(h.substr(d,2).toLowerCase()===Ta){var D=h.substr(d,2);d+=2}else D=b,0===ra&&e(Ke);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="IS":(d=t,t=b)}else d=t,t=b;return t}function n(){var t=d;if(h.substr(d,4).toLowerCase()===nb){var D=h.substr(d,4);d+=4}else D=b,0===ra&&e(Le);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="LIKE":(d=t,t=
b)}else d=t,t=b;return t}function da(){var t=d;if(h.substr(d,3).toLowerCase()===mb){var D=h.substr(d,3);d+=3}else D=b,0===ra&&e(Me);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="NOT":(d=t,t=b)}else d=t,t=b;return t}function B(){var t=d;if(h.substr(d,3).toLowerCase()===wb){var D=h.substr(d,3);d+=3}else D=b,0===ra&&e(Ne);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="AND":(d=t,t=b)}else d=t,t=b;return t}function aa(){var t=d;if(h.substr(d,2).toLowerCase()===
Gb){var D=h.substr(d,2);d+=2}else D=b,0===ra&&e(Oe);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="OR":(d=t,t=b)}else d=t,t=b;return t}function l(){var t=d;if(h.substr(d,7).toLowerCase()===md){var D=h.substr(d,7);d+=7}else D=b,0===ra&&e(Pe);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="BETWEEN":(d=t,t=b)}else d=t,t=b;return t}function G(){var t=d;if(h.substr(d,4).toLowerCase()===nd){var D=h.substr(d,4);d+=4}else D=b,0===ra&&e(Qe);if(D!==b){D=d;ra++;var Z=
N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="FROM":(d=t,t=b)}else d=t,t=b;return t}function T(){var t=d;if(h.substr(d,4).toLowerCase()===rd){var D=h.substr(d,4);d+=4}else D=b,0===ra&&e(Te);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="TRIM":(d=t,t=b)}else d=t,t=b;return t}function U(){var t=d;if(h.substr(d,9).toLowerCase()===td){var D=h.substr(d,9);d+=9}else D=b,0===ra&&e(bc);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="TIMESTAMP":(d=t,t=b)}else d=t,t=b;
return t}function ea(){var t=d;if(h.substr(d,4).toLowerCase()===ud){var D=h.substr(d,4);d+=4}else D=b,0===ra&&e(ue);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="DATE":(d=t,t=b)}else d=t,t=b;return t}function na(){var t=d;if(h.substr(d,8).toLowerCase()===ye){var D=h.substr(d,8);d+=8}else D=b,0===ra&&e(Oc);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="INTERVAL":(d=t,t=b)}else d=t,t=b;return t}function pa(){var t=d;if(h.substr(d,4).toLowerCase()===oc){var D=
h.substr(d,4);d+=4}else D=b,0===ra&&e(ld);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="YEAR":(d=t,t=b)}else d=t,t=b;return t}function sa(){var t=d;if(h.substr(d,5).toLowerCase()===Vb){var D=h.substr(d,5);d+=5}else D=b,0===ra&&e(Ve);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="MONTH":(d=t,t=b)}else d=t,t=b;return t}function ua(){var t=d;if(h.substr(d,3).toLowerCase()===gd){var D=h.substr(d,3);d+=3}else D=b,0===ra&&e(We);if(D!==b){D=d;ra++;var Z=N();ra--;
Z===b?D=void 0:(d=D,D=b);D!==b?t="DAY":(d=t,t=b)}else d=t,t=b;return t}function Da(){var t=d;if(h.substr(d,4).toLowerCase()===Gc){var D=h.substr(d,4);d+=4}else D=b,0===ra&&e(kd);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="HOUR":(d=t,t=b)}else d=t,t=b;return t}function za(){var t=d;if(h.substr(d,6).toLowerCase()===Hc){var D=h.substr(d,6);d+=6}else D=b,0===ra&&e(Xe);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="MINUTE":(d=t,t=b)}else d=t,t=b;return t}function ya(){var t=
d;if(h.substr(d,6).toLowerCase()===Ic){var D=h.substr(d,6);d+=6}else D=b,0===ra&&e(Ye);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="SECOND":(d=t,t=b)}else d=t,t=b;return t}function Qa(){var t=d;if(h.substr(d,4).toLowerCase()===pc){var D=h.substr(d,4);d+=4}else D=b,0===ra&&e(Za);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="CASE":(d=t,t=b)}else d=t,t=b;return t}function Ka(){var t=d;if(h.substr(d,3).toLowerCase()===ze){var D=h.substr(d,3);d+=3}else D=b,
0===ra&&e(a);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="END":(d=t,t=b)}else d=t,t=b;return t}function Oa(){var t=d;if(h.substr(d,4).toLowerCase()===Ae){var D=h.substr(d,4);d+=4}else D=b,0===ra&&e(g);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?t="WHEN":(d=t,t=b)}else d=t,t=b;return t}function Pa(){var t=d;if(h.substr(d,4).toLowerCase()===Be){var D=h.substr(d,4);d+=4}else D=b,0===ra&&e(K);if(D!==b){D=d;ra++;var Z=N();ra--;Z===b?D=void 0:(d=D,D=b);D!==b?
t="THEN":(d=t,t=b)}else d=t,t=b;return t}function Ja(){if(44===h.charCodeAt(d)){var t=Rc;d++}else t=b,0===ra&&e(ma);return t}function Ra(){if(40===h.charCodeAt(d)){var t=Eb;d++}else t=b,0===ra&&e(qa);return t}function Wa(){if(41===h.charCodeAt(d)){var t=me;d++}else t=b,0===ra&&e(xa);return t}function ta(){var t;var D=[];for(t=ub();t!==b;)D.push(t),t=ub();return D}function ub(){if(oe.test(h.charAt(d))){var t=h.charAt(d);d++}else t=b,0===ra&&e(Ga);return t}function hb(t,D,Z,wa){t={type:"binary-expression",
operator:t,left:D,right:Z};void 0!==wa&&(t.escape=wa);return t}function lb(t,D){for(var Z=0;Z<D.length;Z++)t=hb(D[Z][1],t,D[Z][3]);return t}k=void 0!==k?k:{};var b={},fb=k.grammarSource,Ob={start:p},Jb=p,ka="!",gc="\x3d",Tb="\x3e\x3d",yb="\x3e",Sb="\x3c\x3d",Ub="\x3c\x3e",Zb="\x3c",hc="!\x3d",Db="+",Pb="-",ib="||",Fb="*",Qb="/",Ya="@",Hb="'",R="N'",fa="''",X=".",oa="null",Ca="true",Aa="false",La="in",Ta="is",nb="like",ob="escape",mb="not",wb="and",Gb="or",md="between",nd="from",od="for",pd="substring",
qd="extract",rd="trim",sd="position",td="timestamp",ud="date",vd="leading",wd="trailing",xe="both",xd="cast",yd="as",zd="integer",Ad="smallint",ic="float",Qc="real",mc="varchar",nc="to",ye="interval",oc="year",Vb="month",gd="day",Gc="hour",Hc="minute",Ic="second",pc="case",ze="end",Ae="when",Be="then",rb="else",Rc=",",Eb="(",me=")",Sc="`",Cd=/^[A-Za-z_\x80-\uFFFF]/,Dd=/^[A-Za-z0-9_]/,Ed=/^[A-Za-z0-9_.\x80-\uFFFF]/,Tc=/^[^']/,Fd=/^[0-9]/,Gd=/^[eE]/,xb=/^[+\-]/,oe=/^[ \t\n\r]/,Jc=/^[^`]/,ne=q("!",!1),
Kc=q("\x3d",!1),hd=q("\x3e\x3d",!1),pe=q("\x3e",!1),Bd=q("\x3c\x3d",!1),se=q("\x3c\x3e",!1),re=q("\x3c",!1),qe=q("!\x3d",!1),Uc=q("+",!1),Ab=q("-",!1),Rb=q("||",!1),Hd=q("*",!1),Id=q("/",!1),Vc=O([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Jd=O([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Wc=O([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Ce=q("@",!1),Kd=q("'",!1),Ld=q("N'",!1),Md=q("''",!1),Nd=O(["'"],!0,!1),De=q(".",!1),te=O([["0","9"]],!1,!1),Ee=O(["e","E"],!1,!1),Fe=
O(["+","-"],!1,!1),Ge=q("NULL",!0),He=q("TRUE",!0),Ie=q("FALSE",!0),Je=q("IN",!0),Ke=q("IS",!0),Le=q("LIKE",!0),Od=q("ESCAPE",!0),Me=q("NOT",!0),Ne=q("AND",!0),Oe=q("OR",!0),Pe=q("BETWEEN",!0),Qe=q("FROM",!0),Re=q("FOR",!0),Se=q("SUBSTRING",!0),Pd=q("EXTRACT",!0),Te=q("TRIM",!0),Ue=q("POSITION",!0),bc=q("TIMESTAMP",!0),ue=q("DATE",!0),gb=q("LEADING",!0),vb=q("TRAILING",!0),kc=q("BOTH",!0),Lc=q("CAST",!0),id=q("AS",!0),ve=q("INTEGER",!0),jd=q("SMALLINT",!0),Mc=q("FLOAT",!0),we=q("REAL",!0),Nc=q("VARCHAR",
!0),Pc=q("TO",!0),Oc=q("INTERVAL",!0),ld=q("YEAR",!0),Ve=q("MONTH",!0),We=q("DAY",!0),kd=q("HOUR",!0),Xe=q("MINUTE",!0),Ye=q("SECOND",!0),Za=q("CASE",!0),a=q("END",!0),g=q("WHEN",!0),K=q("THEN",!0),ca=q("ELSE",!0),ma=q(",",!1),qa=q("(",!1),xa=q(")",!1),Ga=O([" ","\t","\n","\r"],!1,!1),Na=q("`",!1),$a=O(["`"],!0,!1),d=0,ab=[{line:1,column:1}],Xa=0,zb=[],ra=0;if("startRule"in k){if(!(k.startRule in Ob))throw Error("Can't start parsing from rule \""+k.startRule+'".');Jb=Ob[k.startRule]}var Wb=Jb();if(Wb!==
b&&d===h.length)return Wb;Wb!==b&&d<h.length&&e({type:"end"});throw function(t,D,Z){return new W(W.buildMessage(t,D),t,D,Z)}(zb,Xa<h.length?h.charAt(Xa):null,Xa<h.length?S(Xa,Xa+1):S(Xa,Xa));}}})})(ba);var P=ba.exports;ba=function(){function ha(){}ha.parse=function(W){return P.parse(W)};return f._createClass(ha)}();m.WhereGrammar=ba;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(m){m.queryCapabilities=
{supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,
supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(m,f,la,ba,P,ha,W,J,h,k,q,O,C){function S(Q,H,v,F){const L=F.x-v.x;F=F.y-v.y;H=Math.min(1,Math.max(0,((H.x-v.x)*L+(H.y-v.y)*F)/(L*L+F*F)));Q.x=v.x+L*H;Q.y=v.y+F*H}function e(Q,H){return Q?H?4:3:H?3:2}let p=function(){function Q(v,F,L){this.items=v;this.query=F;this.geometryType=L.geometryType;this.hasM=L.hasM;this.hasZ=L.hasZ;this.fieldsIndex=L.fieldsIndex;this.objectIdField=L.objectIdField;this.spatialReference=L.spatialReference;this.featureAdapter=L.featureAdapter}var H=Q.prototype;H.createQueryResponseForCount=
function(){const v=new J(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return v.countDistinctValues(this.items);const {groupByFieldsForStatistics:F,having:L,outStatistics:x}=this.query;if(!F?.length)return 1;const y=new Map,A=new Map,w=new Set;for(const Y of x){var {statisticType:z}=Y;z="exceedslimit"!==z?Y.onStatisticField:void 0;if(!A.has(z)){var I=[];for(const ia of F){const N=this._getAttributeValues(v,ia,y);I.push(N)}A.set(z,this._calculateUniqueValues(I,v.returnDistinctValues))}z=
A.get(z);for(const ia in z){const {data:N,items:M}=z[ia];I=N.join(",");L&&!v.validateItems(M,L)||w.add(I)}}return w.size};H.createQueryResponse=async function(){let v;v=this.query.outStatistics?this.query.outStatistics.some(F=>"exceedslimit"===F.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const F=this.query.geometry;W.isValid(this.query.outSR)&&
!W.equals(F.spatialReference,this.query.outSR)?v.queryGeometry=q.cleanFromGeometryEngine({spatialReference:this.query.outSR,...h.project(F,F.spatialReference,this.query.outSR)}):v.queryGeometry=q.cleanFromGeometryEngine({spatialReference:this.query.outSR,...F})}return v};H.createSnappingResponse=function(v,F){const L=this.featureAdapter,x=e(this.hasZ,this.hasM),{point:y,mode:A}=v,w="number"===typeof v.distance?v.distance:v.distance.x,z="number"===typeof v.distance?v.distance:v.distance.y,I={candidates:[]},
Y="esriGeometryPolygon"===this.geometryType;F=this._getPointCreator(A,this.spatialReference,F);const ia=new E(null,0),N=new E(null,0),M={x:0,y:0,z:0};for(const Ea of this.items){var r=L.getGeometry(Ea);if(null==r)continue;const {coords:Fa,lengths:Ma}=r;ia.coords=Fa;N.coords=Fa;if(v.returnEdge){r=0;for(var u=0;u<Ma.length;u++){var V=Ma[u];for(var ja=0;ja<V;ja++,r+=x){var va=ia;va.coordsIndex=r;if(ja!==V-1){const Ha=N;Ha.coordsIndex=r+x;const Ua=M;S(M,y,va,Ha);var Ba=(y.x-Ua.x)/w;const Sa=(y.y-Ua.y)/
z;Ba=Ba*Ba+Sa*Sa;1>=Ba&&I.candidates.push(k.makeEdgeCandidate(L.getObjectId(Ea),F(Ua),Math.sqrt(Ba),F(va),F(Ha)))}}}}if(v.returnVertex)for(r=Y?Fa.length-x:Fa.length,u=0;u<r;u+=x)V=ia,V.coordsIndex=u,ja=(y.x-V.x)/w,va=(y.y-V.y)/z,ja=ja*ja+va*va,1>=ja&&I.candidates.push(k.makeVertexCandidate(L.getObjectId(Ea),F(V),Math.sqrt(ja)))}I.candidates.sort((Ea,Fa)=>Ea.distance-Fa.distance);return I};H._getPointCreator=function(v,F,L){const x=null==L||W.equals(F,L)?A=>A:A=>h.project(A,F,L),{hasZ:y}=this;return"3d"===
v?y?({x:A,y:w,z})=>x({x:A,y:w,z}):({x:A,y:w})=>x({x:A,y:w,z:0}):({x:A,y:w})=>x({x:A,y:w})};H.createSummaryStatisticsResponse=async function(v){const {field:F,valueExpression:L,normalizationField:x,normalizationType:y,normalizationTotal:A,minValue:w,maxValue:z,scale:I}=v;v=this.fieldsIndex.isDateField(F);var Y=await this._getDataValues({field:F,valueExpression:L,normalizationField:x,normalizationType:y,normalizationTotal:A,scale:I});const ia=C.isNullCountSupported({normalizationType:y,normalizationField:x,
minValue:w,maxValue:z}),N=this.fieldsIndex.get(F),M={value:.5,fieldType:N?.type};Y=O.isStringField(N)?C.calculateStringStatistics({values:Y,supportsNullCount:ia,percentileParams:M}):C.calculateStatistics({values:Y,minValue:w,maxValue:z,useSampleStdDev:!y,supportsNullCount:ia,percentileParams:M});return C.processSummaryStatisticsResult(Y,v)};H.createUniqueValuesResponse=async function(v){const {field:F,valueExpression:L,domains:x,returnAllCodedValues:y,scale:A}=v;var w=await this._getDataValues({field:F,
field2:v.field2,field3:v.field3,fieldDelimiter:v.fieldDelimiter,valueExpression:L,scale:A});w=C.calculateUniqueValuesCount(w);return C.createUVResult(w,x,y,v.fieldDelimiter)};H.createClassBreaksResponse=async function(v){const {field:F,valueExpression:L,normalizationField:x,normalizationType:y,normalizationTotal:A,classificationMethod:w,standardDeviationInterval:z,minValue:I,maxValue:Y,numClasses:ia,scale:N}=v;v=await this._getDataValues({field:F,valueExpression:L,normalizationField:x,normalizationType:y,
normalizationTotal:A,scale:N});v=C.calculateClassBreaks(v,{field:F,normalizationField:x,normalizationType:y,normalizationTotal:A,classificationMethod:w,standardDeviationInterval:z,minValue:I,maxValue:Y,numClasses:ia});return C.resolveCBResult(v,w)};H.createHistogramResponse=async function(v){const {field:F,valueExpression:L,normalizationField:x,normalizationType:y,normalizationTotal:A,classificationMethod:w,standardDeviationInterval:z,minValue:I,maxValue:Y,numBins:ia,scale:N}=v;v=await this._getDataValues({field:F,
valueExpression:L,normalizationField:x,normalizationType:y,normalizationTotal:A,scale:N});return C.calculateHistogram(v,{field:F,normalizationField:x,normalizationType:y,normalizationTotal:A,classificationMethod:w,standardDeviationInterval:z,minValue:I,maxValue:Y,numBins:ia})};H._sortFeatures=function(v,F,L){if(1<v.length&&F&&F.length)for(const x of F.reverse()){F=x.split(" ");const y=F[0],A=this.fieldsIndex.get(y);F=F[1]?"desc"===F[1].toLowerCase():!1;const w=C.getAttributeComparator(A?.type,F);
v.sort((z,I)=>{z=L(z,y,A);I=L(I,y,A);return w(z,I)})}};H._createFeatureQueryResponse=function(v){const F=this.items,{geometryType:L,hasM:x,hasZ:y,objectIdField:A,spatialReference:w}=this,{outFields:z,outSR:I,quantizationParameters:Y,resultRecordCount:ia,resultOffset:N,returnZ:M,returnM:r}=v,u=null!=ia?F.length>(N||0)+ia:!1,V=z&&(z.includes("*")?[...this.fieldsIndex.fields]:z.map(ja=>this.fieldsIndex.get(ja)));return{exceededTransferLimit:u,features:this._createFeatures(v,F),fields:V,geometryType:L,
hasM:x&&r,hasZ:y&&M,objectIdFieldName:A,spatialReference:q.cleanFromGeometryEngine(I||w),transform:Y&&ha.toQuantizationTransform(Y)||null}};H._createFeatures=function(v,F){const L=new J(v,this.featureAdapter,this.fieldsIndex),{hasM:x,hasZ:y}=this,{orderByFields:A,quantizationParameters:w,returnGeometry:z,returnCentroid:I,maxAllowableOffset:Y,resultOffset:ia,resultRecordCount:N,returnZ:M=!1,returnM:r=!1}=v,u=y&&M,V=x&&r;v=[];var ja=0;F=[...F];this._sortFeatures(F,A,(Ea,Fa,Ma)=>L.getFieldValue(Ea,Fa,
Ma));if(z||I){var va=ha.toQuantizationTransform(w)??void 0;if(z&&!I)for(var Ba of F)v[ja++]={attributes:L.getAttributes(Ba),geometry:q.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ba),Y,va,u,V)};else if(!z&&I)for(const Ea of F)v[ja++]={attributes:L.getAttributes(Ea),centroid:q.transformCentroid(this,this.featureAdapter.getCentroid(Ea,this),va)};else for(const Ea of F)v[ja++]={attributes:L.getAttributes(Ea),centroid:q.transformCentroid(this,this.featureAdapter.getCentroid(Ea,
this),va),geometry:q.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ea),Y,va,u,V)}}else for(va of F)(Ba=L.getAttributes(va))&&(v[ja++]={attributes:Ba});ja=ia||0;null!=N&&(v=v.slice(ja,Math.min(v.length,ja+N)));return v};H._createExceedsLimitQueryResponse=function(v){var F=!1;let L=Number.POSITIVE_INFINITY,x=Number.POSITIVE_INFINITY;F=Number.POSITIVE_INFINITY;for(const y of v.outStatistics??[])if("exceedslimit"===y.statisticType){L=null!=y.maxPointCount?y.maxPointCount:
Number.POSITIVE_INFINITY;x=null!=y.maxRecordCount?y.maxRecordCount:Number.POSITIVE_INFINITY;F=null!=y.maxVertexCount?y.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)F=this.items.length>L;else if(this.items.length>x)F=!0;else{v=e(this.hasZ,this.hasM);const y=this.featureAdapter;F=this.items.reduce((A,w)=>{w=y.getGeometry(w);return A+(null!=w&&w.coords.length||0)},0)/v>F}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",
domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(F)}}]}};H._createStatisticsQueryResponse=async function(v){var F={attributes:{}};const L=[],x=new Map,y=new Map,A=new Map,w=new Map,z=new J(v,this.featureAdapter,this.fieldsIndex);var I=v.outStatistics;const {groupByFieldsForStatistics:Y,having:ia,orderByFields:N}=v;v=Y&&Y.length;const M=!!v,r=M?Y[0]:null,u=M&&!this.fieldsIndex.get(r);for(const Ea of I??[]){const {outStatisticFieldName:Fa,statisticType:Ma}=Ea;I=Ea;var V="exceedslimit"!==
Ma?Ea.onStatisticField:void 0;const Ha="percentile_disc"===Ma||"percentile_cont"===Ma,Ua="EnvelopeAggregate"===Ma||"CentroidAggregate"===Ma||"ConvexHullAggregate"===Ma,Sa=M&&1===v&&(V===r||u)&&"count"===Ma;if(M){if(!A.has(V)){var ja=[];for(const Va of Y){var va=this._getAttributeValues(z,Va,x);ja.push(va)}A.set(V,this._calculateUniqueValues(ja,Ua?!1:z.returnDistinctValues))}ja=A.get(V);for(const Va in ja){const {count:eb,data:kb,items:jb,itemPositions:db}=ja[Va];va=kb.join(",");if(!ia||z.validateItems(jb,
ia)){const c=w.get(va)||{attributes:{}};if(Ua){c.aggregateGeometries||(c.aggregateGeometries={});const {aggregateGeometries:da,outStatisticFieldName:B}=await this._getAggregateGeometry(I,jb);c.aggregateGeometries[B]=da}else{var Ba=null;if(Sa)Ba=eb;else{const da=this._getAttributeValues(z,V,x);Ba=db.map(B=>da[B]);Ba=Ha&&"statisticParameters"in I?this._getPercentileValue(I,Ba):this._getStatisticValue(I,Ba,null,z.returnDistinctValues)}c.attributes[Fa]=Ba}let n=0;Y.forEach((da,B)=>c.attributes[this.fieldsIndex.get(da)?
da:`EXPR_${++n}`]=kb[B]);w.set(va,c)}}}else if(Ua){F.aggregateGeometries||(F.aggregateGeometries={});const {aggregateGeometries:Va,outStatisticFieldName:eb}=await this._getAggregateGeometry(I,this.items);F.aggregateGeometries[eb]=Va}else V=this._getAttributeValues(z,V,x),F.attributes[Fa]=Ha&&"statisticParameters"in I?this._getPercentileValue(I,V):this._getStatisticValue(I,V,y,z.returnDistinctValues);L.push({name:Fa,alias:Fa,type:"esriFieldTypeDouble"})}F=M?Array.from(w.values()):[F];this._sortFeatures(F,
N,(Ea,Fa)=>Ea.attributes[Fa]);return{fields:L,features:F}};H._getAggregateGeometry=async function(v,F){const {convexHull:L,union:x}=await new Promise((M,r)=>m(["../../../geometry/geometryEngineJSON"],M,r)),{statisticType:y,outStatisticFieldName:A}=v,{featureAdapter:w,spatialReference:z,geometryType:I,hasZ:Y,hasM:ia}=this;F=F.map(M=>q.getGeometry(I,Y,ia,w.getGeometry(M)));const N=L(z,F,!0)[0];v={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===y?(F=N?P.getPolygonExtent(N):
P.getGeometryExtent(x(z,F)),v.aggregateGeometries={...F,spatialReference:z},v.outStatisticFieldName=A||"extent"):"CentroidAggregate"===y?(F=N?ba.polygonCentroid(N):ba.extentCentroid(P.getGeometryExtent(x(z,F))),v.aggregateGeometries={x:F[0],y:F[1],spatialReference:z},v.outStatisticFieldName=A||"centroid"):"ConvexHullAggregate"===y&&(v.aggregateGeometries=N,v.outStatisticFieldName=A||"convexHull");return v};H._getStatisticValue=function(v,F,L,x){const {onStatisticField:y,statisticType:A}=v;v=null;
v=L?.has(y)?L.get(y):O.isStringField(this.fieldsIndex.get(y))?C.calculateStringStatistics({values:F,returnDistinct:x}):C.calculateStatistics({values:x?[...(new Set(F))]:F,minValue:null,maxValue:null,useSampleStdDev:!0});L&&L.set(y,v);return v["var"===A?"variance":A]};H._getPercentileValue=function(v,F){const {onStatisticField:L,statisticParameters:x,statisticType:y}=v,{value:A,orderBy:w}=x;v=this.fieldsIndex.get(L);return C.calculatePercentile(F,{value:A,orderBy:w,fieldType:v?.type,isDiscrete:"percentile_disc"===
y})};H._getAttributeValues=function(v,F,L){if(L.has(F))return L.get(F);const x=this.fieldsIndex.get(F),y=this.items.map(A=>v.getFieldValue(A,F,x));L.set(F,y);return y};H._calculateUniqueValues=function(v,F){const L={},x=this.items,y=x.length;for(let A=0;A<y;A++){const w=x[A],z=[];for(const Y of v)z.push(Y[A]);const I=z.join(",");null==L[I]?L[I]={count:1,data:z,items:[w],itemPositions:[A]}:(F||L[I].count++,L[I].items.push(w),L[I].itemPositions.push(A))}return L};H._getDataValues=async function(v){const F=
new J(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:L,scale:x}=v,y=L?{viewingMode:"map",scale:x,spatialReference:this.query.outSR||this.spatialReference}:null;return L?F.getExpressionValues(this.items,L,y,{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM}):F.getDataValues(this.items,{field:v.field,field2:v.field2,field3:v.field3,fieldDelimiter:v.fieldDelimiter,normalizationField:v.normalizationField,normalizationType:v.normalizationType,normalizationTotal:v.normalizationTotal})};
la._createClass(Q,[{key:"size",get:function(){return this.items.length}}]);return Q}(),E=function(){function Q(H,v){this.coords=H;this.coordsIndex=v}la._createClass(Q,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return Q}();f.QueryEngineResult=p;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports",
"./jsonUtils"],function(m,f){function la({scale:w,translate:z},I){return Math.round((I-z[0])/w[0])}function ba({scale:w,translate:z},I){return Math.round((z[1]-I)/w[1])}function P(w,z,I){const Y=[];let ia,N,M,r;for(let u=0;u<I.length;u++){const V=I[u];if(0<u){if(M=la(w,V[0]),r=ba(w,V[1]),M!==ia||r!==N)Y.push(z(V,M-ia,r-N)),ia=M,N=r}else ia=la(w,V[0]),N=ba(w,V[1]),Y.push(z(V,ia,N))}return 0<Y.length?Y:null}function ha(w,z,I,Y){return P(w,I?Y?A:y:Y?y:x,z)}function W(w,z,I,Y){const ia=[];I=I?Y?A:y:Y?
y:x;for(Y=0;Y<z.length;Y++){const N=P(w,I,z[Y]);N&&3<=N.length&&ia.push(N)}return ia.length?ia:null}function J(w,z,I,Y){const ia=[];I=I?Y?A:y:Y?y:x;for(Y=0;Y<z.length;Y++){const N=P(w,I,z[Y]);N&&2<=N.length&&ia.push(N)}return ia.length?ia:null}function h({scale:w,translate:z},I){return I*w[0]+z[0]}function k({scale:w,translate:z},I){return z[1]-I*w[1]}function q(w,z,I){const Y=Array(I.length);if(!I.length)return Y;const [ia,N]=w.scale;let M=h(w,I[0][0]);w=k(w,I[0][1]);Y[0]=z(I[0],M,w);for(let r=1;r<
I.length;r++){const u=I[r];M+=u[0]*ia;w-=u[1]*N;Y[r]=z(u,M,w)}return Y}function O(w,z,I){const Y=Array(I.length);for(let ia=0;ia<I.length;ia++)Y[ia]=q(w,z,I[ia]);return Y}function C(w,z,I,Y){return q(w,I?Y?A:y:Y?y:x,z)}function S(w,z,I,Y){return O(w,I?Y?A:y:Y?y:x,z)}function e(w,z,I,Y){return O(w,I?Y?A:y:Y?y:x,z)}function p(w,z,I){let [Y,ia]=I[0],N=Math.min(Y,z[0]),M=Math.min(ia,z[1]),r=Math.max(Y,z[2]);z=Math.max(ia,z[3]);for(let u=1;u<I.length;u++){const [V,ja]=I[u];Y+=V;ia+=ja;0>V&&(N=Math.min(N,
Y));0<V&&(r=Math.max(r,Y));0>ja?M=Math.min(M,ia):0<ja&&(z=Math.max(z,ia))}w[0]=N;w[1]=M;w[2]=r;w[3]=z;return w}function E(w,z){if(!z.length)return null;w[0]=w[1]=Number.POSITIVE_INFINITY;w[2]=w[3]=Number.NEGATIVE_INFINITY;for(let I=0;I<z.length;I++)p(w,w,z[I]);return w}function Q(w,z,I,Y,ia){z.xmin=la(w,I.xmin);z.ymin=ba(w,I.ymin);z.xmax=la(w,I.xmax);z.ymax=ba(w,I.ymax);z!==I&&(Y&&(z.zmin=I.zmin,z.zmax=I.zmax),ia&&(z.mmin=I.mmin,z.mmax=I.mmax));return z}function H(w,z,I,Y,ia){z.points=ha(w,I.points,
Y,ia)??[];return z}function v(w,z,I,Y,ia){z.x=la(w,I.x);z.y=ba(w,I.y);z!==I&&(Y&&(z.z=I.z),ia&&(z.m=I.m));return z}function F(w,z,I,Y,ia){w=W(w,I.rings,Y,ia);if(!w)return null;z.rings=w;return z}function L(w,z,I,Y,ia){w=J(w,I.paths,Y,ia);if(!w)return null;z.paths=w;return z}const x=(w,z,I)=>[z,I],y=(w,z,I)=>[z,I,w[2]],A=(w,z,I)=>[z,I,w[2],w[3]];m.equals=function(w,z){if(w===z||null==w&&null==z)return!0;if(null==w||null==z)return!1;let I,Y,ia,N;w&&"upperLeft"===w.originPosition?(I=w.translate[0],Y=
w.translate[1],w=w.scale[0]):(I=null!=w.extent?w.extent.xmin:0,Y=null!=w.extent?w.extent.ymax:0,w=w.tolerance);z&&"upperLeft"===z.originPosition?(ia=z.translate[0],N=z.translate[1],z=z.scale[0]):(ia=null!=z.extent?z.extent.xmin:0,N=null!=z.extent?z.extent.ymax:0,z=z.tolerance);return I===ia&&Y===N&&w===z};m.getQuantizedBoundsCoordsArray=p;m.getQuantizedBoundsCoordsArrayArray=E;m.getQuantizedBoundsPaths=function(w){return E([0,0,0,0],w)};m.getQuantizedBoundsPoints=function(w){const z=[Number.POSITIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return p(z,z,w)};m.getQuantizedBoundsRings=function(w){return E([0,0,0,0],w)};m.quantizeBounds=function(w,z,I){z[0]=la(w,I[0]);z[3]=ba(w,I[1]);z[2]=la(w,I[2]);z[1]=ba(w,I[3]);return z};m.quantizeExtent=Q;m.quantizeGeometry=function(w,z){return w&&z?f.isPoint(z)?v(w,{},z,!1,!1):f.isPolyline(z)?L(w,{},z,!1,!1):f.isPolygon(z)?F(w,{},z,!1,!1):f.isMultipoint(z)?H(w,{},z,!1,!1):f.isExtent(z)?Q(w,{},z,!1,!1):null:null};m.quantizeMultipoint=
H;m.quantizePaths=J;m.quantizePoint=v;m.quantizePoints=ha;m.quantizePolygon=F;m.quantizePolyline=L;m.quantizeRings=W;m.quantizeX=la;m.quantizeY=ba;m.toQuantizationTransform=function(w){return w?{originPosition:"upper-left"===w.originPosition?"upperLeft":"lower-left"===w.originPosition?"lowerLeft":w.originPosition,scale:w.tolerance?[w.tolerance,w.tolerance]:[1,1],translate:null!=w.extent?[w.extent.xmin,w.extent.ymax]:[0,0]}:null};m.unquantizeBounds=function(w,z,I){return I?(z[0]=h(w,I[0]),z[1]=k(w,
I[3]),z[2]=h(w,I[2]),z[3]=k(w,I[1]),z):[h(w,z[0]),k(w,z[3]),h(w,z[2]),k(w,z[1])]};m.unquantizeCoordsArray=q;m.unquantizeCoordsArrayArray=O;m.unquantizeExtent=function(w,z,I,Y,ia){z.xmin=h(w,I.xmin);z.ymin=k(w,I.ymin);z.xmax=h(w,I.xmax);z.ymax=k(w,I.ymax);z!==I&&(Y&&(z.zmin=I.zmin,z.zmax=I.zmax),ia&&(z.mmin=I.mmin,z.mmax=I.mmax));return z};m.unquantizeMultipoint=function(w,z,I,Y,ia){null!=I&&(z.points=C(w,I.points,Y,ia));return z};m.unquantizePaths=S;m.unquantizePoint=function(w,z,I,Y,ia){if(null==
I)return z;z.x=h(w,I.x);z.y=k(w,I.y);z!==I&&(Y&&(z.z=I.z),ia&&(z.m=I.m));return z};m.unquantizePoints=C;m.unquantizePolygon=function(w,z,I,Y,ia){null!=I&&(z.rings=e(w,I.rings,Y,ia));return z};m.unquantizePolyline=function(w,z,I,Y,ia){null!=I&&(z.paths=S(w,I.paths,Y,ia));return z};m.unquantizeRings=e;m.unquantizeX=h;m.unquantizeY=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"./attributeSupport","./utils","../../../statistics/utils","../../../support/arcadeOnDemand"],function(m,f,la,ba,P){return function(){function ha(J,h,k){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=J.returnDistinctValues??!1;this.fieldsIndex=k;this.featureAdapter=h;if((h=J.outFields)&&!h.includes("*")){this.outFields=h;J=0;for(const O of h){var q=f.getExpressionFromFieldName(O);q=(h=this.fieldsIndex.get(q))?null:f.getWhereClause(q,k);h=h?h.name:f.getAliasFromFieldName(O)||
`FIELD_EXP_${J++}`;this._fieldDataCache.set(O,{alias:h,clause:q})}}}var W=ha.prototype;W.countDistinctValues=function(J){if(!this.returnDistinctValues)return J.length;J.forEach(h=>this.getAttributes(h));return this._returnDistinctMap.size};W.getAttributes=function(J){J=this._processAttributesForOutFields(J);return this._processAttributesForDistinctValues(J)};W.getFieldValue=function(J,h,k){const q=k?k.name:h;let O=null;this._fieldDataCache.has(q)?O=this._fieldDataCache.get(q)?.clause:k||(O=f.getWhereClause(h,
this.fieldsIndex),this._fieldDataCache.set(q,{alias:q,clause:O}));return k?this.featureAdapter.getAttribute(J,q):O?.calculateValue(J,this.featureAdapter)};W.getDataValues=function(J,h){const k=h.normalizationType,q=h.normalizationTotal;return J.map(O=>{let C=h.field&&this.getFieldValue(O,h.field,this.fieldsIndex.get(h.field));h.field2&&(C=`${ba.processNullValue(C)}${h.fieldDelimiter}${ba.processNullValue(this.getFieldValue(O,h.field2,this.fieldsIndex.get(h.field2)))}`,h.field3&&(C=`${C}${h.fieldDelimiter}${ba.processNullValue(this.getFieldValue(O,
h.field3,this.fieldsIndex.get(h.field3)))}`));k&&Number.isFinite(C)&&(O="field"===k&&h.normalizationField?this.getFieldValue(O,h.normalizationField,this.fieldsIndex.get(h.normalizationField)):null,C=ba.getNormalizedValue(C,k,O,q));return C})};W.getExpressionValues=async function(J,h,k,q){const {arcadeUtils:O}=await P.loadArcade(),C=O.hasGeometryOperations(h);C&&await O.enableGeometryOperations();const S=O.createFunction(h),e=k&&O.getViewInfo(k),p={fields:this.fieldsIndex.fields};return J.map(E=>{E=
{attributes:this.featureAdapter.getAttributes(E),layer:p,geometry:C?{...la.getGeometry(q.geometryType,q.hasZ,q.hasM,this.featureAdapter.getGeometry(E)),spatialReference:k?.spatialReference}:null};E=O.createExecContext(E,e);return O.executeFunction(S,E)})};W.validateItem=function(J,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:f.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testFeature(J,this.featureAdapter)??!1};W.validateItems=function(J,
h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:f.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testSet(J,this.featureAdapter)??!1};W._processAttributesForOutFields=function(J){const h=this.outFields;if(!h||!h.length)return this.featureAdapter.getAttributes(J);const k={};for(const q of h){const {alias:O,clause:C}=this._fieldDataCache.get(q);k[O]=C?C.calculateValue(J,this.featureAdapter):this.featureAdapter.getAttribute(J,O)}return k};W._processAttributesForDistinctValues=
function(J){if(null==J||!this.returnDistinctValues)return J;var h=this.outFields,k=[];if(h)for(const O of h){var {alias:q}=this._fieldDataCache.get(O);k.push(J[q])}else for(q in J)k.push(J[q]);h=`${(h||["*"]).join(",")}=${k.join(",")}`;k=this._returnDistinctMap.get(h)||0;this._returnDistinctMap.set(h,++k);return 1<k?null:J};return m._createClass(ha)}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(m,
f,la){function ba(x){return null==x||"string"===typeof x&&!x?"\x3cNull\x3e":x}function P(x){const y=null!=x.minValue||null!=x.maxValue,A=!!x.sqlExpression&&x.supportsSQLExpression;return!(null!=x.normalizationField||null!=x.normalizationType)&&!y&&!A}function ha(x){const {values:y,useSampleStdDev:A,supportsNullCount:w}=x;var z=Number.POSITIVE_INFINITY;let I=Number.NEGATIVE_INFINITY,Y=null,ia=null;var N=null;let M=null,r=0;const u=null==x.minValue?-Infinity:x.minValue,V=null==x.maxValue?Infinity:x.maxValue;
for(const ja of y)Number.isFinite(ja)?ja>=u&&ja<=V&&(Y=null===Y?ja:Y+ja,z=Math.min(z,ja),I=Math.max(I,ja),r++):"string"===typeof ja&&r++;if(r&&null!=Y){ia=Y/r;N=0;for(const ja of y)Number.isFinite(ja)&&ja>=u&&ja<=V&&(N+=(ja-ia)**2);M=A?1<r?N/(r-1):0:0<r?N/r:0;N=Math.sqrt(M)}else I=z=null;z={avg:ia,count:r,max:I,min:z,stddev:N,sum:Y,variance:M};w&&(z.nullcount=y.length-r);x.percentileParams&&(z.median=W(y,x.percentileParams));return z}function W(x,y){const {fieldType:A,value:w,orderBy:z,isDiscrete:I}=
y,Y=J(A,"desc"===z);x=[...x].filter(r=>null!=r).sort((r,u)=>Y(r,u));if(0===x.length)return null;if(0>=w)return x[0];if(1<=w)return x[x.length-1];var ia=(x.length-1)*w,N=Math.floor(ia);y=N+1;ia%=1;N=x[N];const M=x[y];return y>=x.length||I||"string"===typeof N||"string"===typeof M?N:N*(1-ia)+M*ia}function J(x,y){const A=y?1:-1,w=q(y),z=k(y);if(!x||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...F].includes(x))return(I,Y)=>"number"===typeof I&&"number"===typeof Y?
w(I,Y):"string"===typeof I&&"string"===typeof Y?z(I,Y):A;if("esriFieldTypeDate"===x)return(I,Y)=>{I=(new Date(I)).getTime();Y=(new Date(Y)).getTime();return isNaN(I)||isNaN(Y)?A:w(I,Y)};if(F.has(x))return(I,Y)=>w(I,Y);if("esriFieldTypeString"===x)return(I,Y)=>z(I,Y);if("esriFieldTypeGUID"===x||"esriFieldTypeGlobalID"===x){const I=k(y);return(Y,ia)=>I(O(Y),O(ia))}return y?(I,Y)=>1:(I,Y)=>-1}function h(x,y,A){if(A){if(null==x)return null==y?0:1;if(null==y)return-1}else{if(null==x)return null==y?0:-1;
if(null==y)return 1}return null}function k(x){return x?(y,A)=>{const w=h(y,A,!0);if(null!=w)return w;y=y.toUpperCase();A=A.toUpperCase();return y>A?-1:y<A?1:0}:(y,A)=>{const w=h(y,A,!1);if(null!=w)return w;y=y.toUpperCase();A=A.toUpperCase();return y<A?-1:y>A?1:0}}function q(x){return x?(y,A)=>{const w=h(y,A,!0);return null!=w?w:A-y}:(y,A)=>{const w=h(y,A,!1);return null!=w?w:y-A}}function O(x){return x.substr(24,12)+x.substr(19,4)+x.substr(16,2)+x.substr(14,2)+x.substr(11,2)+x.substr(9,2)+x.substr(6,
2)+x.substr(4,2)+x.substr(2,2)+x.substr(0,2)}function C(x){return"coded-value"!==x?.type?[]:x.codedValues.map(y=>y.code)}function S(x,y){const A=p({field:y.field,normalizationType:y.normalizationType,normalizationField:y.normalizationField,classificationMethod:y.classificationMethod,standardDeviationInterval:y.standardDeviationInterval,breakCount:y.numClasses||5});x=e(x,y.minValue,y.maxValue);return la.createGenerateRendererClassBreaks({definition:A,values:x,normalizationTotal:y.normalizationTotal})}
function e(x,y,A){const w=null==y?-Infinity:y,z=null==A?Infinity:A;return x.filter(I=>Number.isFinite(I)&&I>=w&&I<=z)}function p(x){const {breakCount:y,field:A,normalizationField:w,normalizationType:z}=x,I=x.classificationMethod||"equal-interval";return new f({breakCount:y,classificationField:A,classificationMethod:I,normalizationField:"field"===z?w:void 0,normalizationType:z,standardDeviationInterval:"standard-deviation"===I?x.standardDeviationInterval||1:void 0})}function E(x,y){const {field:A,
classificationMethod:w,standardDeviationInterval:z,normalizationType:I,normalizationField:Y,normalizationTotal:ia,minValue:N,maxValue:M}=y,r=y.numBins||10;let u=y=null,V=null;w&&"equal-interval"!==w||I?({classBreaks:x}=S(x,{field:A,normalizationType:I,normalizationField:Y,normalizationTotal:ia,classificationMethod:w,standardDeviationInterval:z,minValue:N,maxValue:M,numClasses:r}),y=x[0].minValue,u=x[x.length-1].maxValue,V=x.map(ja=>[ja.minValue,ja.maxValue])):(null!=N&&null!=M?(y=N,u=M):(x=ha({values:x,
minValue:N,maxValue:M,useSampleStdDev:!I,supportsNullCount:P({normalizationType:I,normalizationField:Y,minValue:N,maxValue:M})}),y=x.min??null,u=x.max??null),V=H(y??0,u??0,r));return{min:y,max:u,intervals:V}}function Q(x,y){let A=-1;for(let w=x.length-1;0<=w;w--)if(y>=x[w][0]){A=w;break}return A}function H(x,y,A){const w=(y-x)/A,z=[];let I;for(let Y=1;Y<=A;Y++)I=x+w,I=Number(I.toFixed(16)),z.push([x,Y===A?y:I]),x=I;return z}const v=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,F=new Set(["esriFieldTypeInteger",
"esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),L="min max avg stddev count sum variance nullcount median".split(" ");m.calculateClassBreaks=S;m.calculateHistogram=function(x,y){var A=E(x,y);if(null==A.min&&null==A.max)return{bins:[],minValue:A.min,maxValue:A.max,normalizationTotal:y.normalizationTotal};const w=A.intervals,z=A.min??0;A=A.max??0;const I=w.map((Y,ia)=>({minValue:w[ia][0],maxValue:w[ia][1],count:0}));for(const Y of x)null!=Y&&Y>=z&&Y<=A&&(x=Q(w,Y),-1<x&&I[x].count++);
return{bins:I,minValue:z,maxValue:A,normalizationTotal:y.normalizationTotal}};m.calculatePercentile=W;m.calculateStatistics=ha;m.calculateStringStatistics=function(x){const y=x.returnDistinct?[...(new Set(x.values))]:x.values;var A=y.filter(z=>null!=z).sort();const w=A.length;A={count:w,min:A[0],max:A[w-1]};x.supportsNullCount&&(A.nullcount=y.length-w);x.percentileParams&&(A.median=W(y,x.percentileParams));return A};m.calculateUniqueValuesCount=function(x){const y={};for(let A of x){if(null==A||"string"===
typeof A&&""===A.trim())A=null;null==y[A]?y[A]={count:1,data:A}:y[A].count++}return{count:y}};m.createClassBreaksDefinition=p;m.createUVResult=function(x,y,A,w){x=x.count;const z=[];if(A&&y){A=[];var I=C(y[0]);for(const Y of I)if(y[1]){I=C(y[1]);for(const ia of I)if(y[2]){I=C(y[2]);for(const N of I)A.push(`${ba(Y)}${w}${ba(ia)}${w}${ba(N)}`)}else A.push(`${ba(Y)}${w}${ba(ia)}`)}else A.push(Y);for(const Y of A)x.hasOwnProperty(Y)||(x[Y]={data:Y,count:0})}for(const Y in x)y=x[Y],z.push({value:y.data,
count:y.count,label:y.label});return{uniqueValueInfos:z}};m.getAttributeComparator=J;m.getEqualIntervalBins=H;m.getNormalizedValue=function(x,y,A,w){let z=null;switch(y){case "log":0!==x&&(z=Math.log(x)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(w)&&0!==w&&(z=x/w*100);break;case "field":Number.isFinite(A)&&0!==A&&(z=x/A);break;case "natural-log":0<x&&(z=Math.log(x));break;case "square-root":0<x&&(z=x**.5)}return z};m.isNullCountSupported=P;m.processNullValue=ba;m.processSummaryStatisticsResult=
function(x,y){let A;for(A in x)L.includes(A)&&(Number.isFinite(x[A])||(x[A]=null));if(!y)return x;["avg","stddev","variance"].forEach(w=>{null!=x[w]&&(x[w]=Math.ceil(x[w]??0))});return x};m.resolveCBResult=function(x,y){let A=x.classBreaks;const w=A[0]?.minValue,z=A[A.length-1]?.maxValue,I="standard-deviation"===y;A=A.map(Y=>{const ia=Y.label;Y={minValue:Y.minValue,maxValue:Y.maxValue,label:ia};if(I&&ia){const N=ia.match(v)?.map(M=>+M.trim())??[];2===N.length?(Y.minStdDev=N[0],Y.maxStdDev=N[1],0>
N[0]&&0<N[1]&&(Y.hasAvg=!0)):1===N.length&&(ia.includes("\x3c")?(Y.minStdDev=null,Y.maxStdDev=N[0]):ia.includes("\x3e")&&(Y.minStdDev=N[0],Y.maxStdDev=null))}return Y});return{minValue:w,maxValue:z,classBreakInfos:A,normalizationTotal:x.normalizationTotal}};m.statisticTypes=L;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,f,la,ba,P,ha,W,J,h,k){ha=new la.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});la=new la.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});ba=function(q){function O(C){C=q.call(this,C)||this;C.type="class-breaks-definition";
C.breakCount=null;C.classificationField=null;C.classificationMethod=null;C.normalizationField=null;C.normalizationType=null;return C}m._inherits(O,q);m._createClass(O,[{key:"standardDeviationInterval",set:function(C){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",C)}},{key:"definedInterval",set:function(C){"defined-interval"===this.classificationMethod&&this._set("definedInterval",C)}}]);return O}(ba.JSONSupport);f.__decorate([h.enumeration({classBreaksDef:"class-breaks-definition"})],
ba.prototype,"type",void 0);f.__decorate([P.property({json:{write:!0}})],ba.prototype,"breakCount",void 0);f.__decorate([P.property({json:{write:!0}})],ba.prototype,"classificationField",void 0);f.__decorate([P.property({type:String,json:{read:ha.read,write:ha.write}})],ba.prototype,"classificationMethod",void 0);f.__decorate([P.property({json:{write:!0}})],ba.prototype,"normalizationField",void 0);f.__decorate([P.property({json:{read:la.read,write:la.write}})],ba.prototype,"normalizationType",void 0);
f.__decorate([P.property({value:null,json:{write:!0}})],ba.prototype,"standardDeviationInterval",null);f.__decorate([P.property({value:null,json:{write:!0}})],ba.prototype,"definedInterval",null);return ba=f.__decorate([k.subclass("esri.rest.support.ClassBreaksDefinition")],ba)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(m,f,la){m.enumeration=function(ba,P={}){ba=ba instanceof f.JSONMap?ba:new f.JSONMap(ba,P);ba={type:P?.ignoreUnknown??
!0?ba.apiValues:String,json:{type:ba.jsonValues,read:P?.readOnly?!1:{reader:ba.read},write:{writer:ba.write}}};void 0!==P?.readOnly&&(ba.readOnly=!!P.readOnly);void 0!==P?.default&&(ba.json.default=P.default);void 0!==P?.name&&(ba.json.name=P.name);void 0!==P?.nonNullable&&(ba.nonNullable=P.nonNullable);return la.property(ba)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(m,f){function la(C){var S=
C.definition;const {classificationMethod:e,normalizationType:p,definedInterval:E}=S;S=S.breakCount??1;const Q=[];var H=C.values;if(0===H.length)return[];H=H.sort((A,w)=>A-w);var v=H[0],F=H[H.length-1];if("equal-interval"===e)if(H.length>=S){H=(F-v)/S;C=v;for(var L=1;L<S;L++){var x=Number((v+L*H).toFixed(6));Q.push({minValue:C,maxValue:x,label:ba(C,x,p)});C=x}Q.push({minValue:C,maxValue:F,label:ba(C,F,p)})}else H.forEach(A=>{Q.push({minValue:A,maxValue:A,label:ba(A,A,p)})});else if("natural-breaks"===
e){H=P(H);C=ha(H.uniqueValues,C.valueFrequency||H.valueFrequency,S);for(L=1;L<S;L++)H.uniqueValues.length>L&&(x=Number(H.uniqueValues[C[L]].toFixed(6)),Q.push({minValue:v,maxValue:x,label:ba(v,x,p)}),v=x);Q.push({minValue:v,maxValue:F,label:ba(v,F,p)})}else if("quantile"===e)if(H.length>=S&&v!==F){C=Math.ceil(H.length/S);L=0;for(x=1;x<S;x++){var y=C+L-1;y>H.length&&(y=H.length-1);0>y&&(y=0);Q.push({minValue:v,maxValue:H[y],label:ba(v,H[y],p)});v=H[y];L+=C;C=Math.ceil((H.length-L)/(S-x))}Q.push({minValue:v,
maxValue:F,label:ba(v,F,p)})}else for(S=-1,F=0;F<H.length;F++)v=H[F],v!==S&&(S=v,Q.push({minValue:S,maxValue:v,label:ba(S,v,p)}),S=v);else if("standard-deviation"===e)if(C=h(H),L=k(H,C),0===L)Q.push({minValue:H[0],maxValue:H[0],label:ba(H[0],H[0],p)});else{H=J(v,F,S,C,L)*L;L=0;for(x=S;1<=x;x--)y=Number((C-(x-.5)*H).toFixed(6)),Q.push({minValue:v,maxValue:y,label:ba(v,y,p)}),v=y,L++;x=Number((C+.5*H).toFixed(6));Q.push({minValue:v,maxValue:x,label:ba(v,x,p)});v=x;L++;for(y=1;y<=S;y++)x=L===2*S?F:Number((C+
(y+.5)*H).toFixed(6)),Q.push({minValue:v,maxValue:x,label:ba(v,x,p)}),v=x,L++}else if("defined-interval"===e){if(!E)return Q;S=H[0];F=H[H.length-1];H=Math.ceil((F-S)/E);v=S;for(C=1;C<H;C++)L=Number((S+C*E).toFixed(6)),Q.push({minValue:v,maxValue:L,label:ba(v,L,p)}),v=L;Q.push({minValue:v,maxValue:F,label:ba(v,F,p)})}return Q}function ba(C,S,e){let p=null;return p=C===S?e&&"percent-of-total"===e?C+"%":C.toString():e&&"percent-of-total"===e?C+"% - "+S+"%":C+" - "+S}function P(C){const S=[],e=[];let p=
Number.MIN_VALUE,E=1,Q=-1;for(let H=0;H<C.length;H++){const v=C[H];v===p?(E++,e[Q]=E):null!==v&&(S.push(v),p=v,E=1,e.push(E),Q++)}return{uniqueValues:S,valueFrequency:e}}function ha(C,S,e){var p=C.length;const E=[];e>p&&(e=p);for(var Q=0;Q<e;Q++)E.push(Math.round(Q*p/e-1));E.push(p-1);Q=W(E,C,S,e);p=Q.mean;Q=Q.sdcm;var H=e,v=0,F=0;let L=0,x=0,y=!0;for(let w=0;2>w&&y;w++){0===w&&(y=!1);for(var A=0;A<H-1;A++)for(;E[A+1]+1!==E[A+2];)if(E[A+1]+=1,v=q(A,E,C,S),L=v.sbMean,v=v.sbSdcm,F=q(A+1,E,C,S),x=F.sbMean,
F=F.sbSdcm,v+F<Q[A]+Q[A+1])Q[A]=v,Q[A+1]=F,p[A]=L,p[A+1]=x,y=!0;else{--E[A+1];break}for(A=H-1;0<A;A--)for(;E[A]!==E[A-1]+1;)if(--E[A],v=q(A-1,E,C,S),L=v.sbMean,v=v.sbSdcm,F=q(A,E,C,S),x=F.sbMean,F=F.sbSdcm,v+F<Q[A-1]+Q[A])Q[A-1]=v,Q[A]=F,p[A-1]=L,p[A]=x,y=!0;else{E[A]+=1;break}}y&&(Q=W(E,C,S,e));return E}function W(C,S,e,p){let E=[];var Q=[],H=[];let v=0;const F=[],L=[];for(var x=0;x<p;x++){var y=q(x,C,S,e);F.push(y.sbMean);L.push(y.sbSdcm);v+=L[x]}y=v;for(x=!0;x||v<y;){x=!1;E=[];for(Q=0;Q<p;Q++)E.push(C[Q]);
for(H=0;H<p;H++)for(y=C[H]+1;y<=C[H+1];y++)if(Q=S[y],0<H&&y!==C[H+1]&&Math.abs(Q-F[H])>Math.abs(Q-F[H-1]))C[H]=y;else if(H<p-1&&C[H]!==y-1&&Math.abs(Q-F[H])>Math.abs(Q-F[H+1])){C[H+1]=y-1;break}y=v;v=0;Q=[];H=[];for(let A=0;A<p;A++){Q.push(F[A]);H.push(L[A]);const w=q(A,C,S,e);F[A]=w.sbMean;L[A]=w.sbSdcm;v+=L[A]}}if(v>y){for(S=0;S<p;S++)C[S]=E[S],F[S]=Q[S],L[S]=H[S];v=y}return{mean:F,sdcm:L}}function J(C,S,e,p,E){C=Math.max(p-C,S-p)/E/e;return 1<=C?1:.5<=C?.5:.25}function h(C){let S=0;for(let e=0;e<
C.length;e++)S+=C[e];return S/=C.length}function k(C,S){let e=0;for(let p=0;p<C.length;p++){const E=C[p];e+=(E-S)*(E-S)}e/=C.length;return Math.sqrt(e)}function q(C,S,e,p){var E=0,Q=0;for(var H=S[C]+1;H<=S[C+1];H++){const v=p[H];E+=e[H]*v;Q+=v}0>=Q&&O.warn("Exception in Natural Breaks calculation");E/=Q;Q=0;for(H=S[C]+1;H<=S[C+1];H++)Q+=p[H]*(e[H]-E)**2;return{sbMean:E,sbSdcm:Q}}const O=f.getLogger("esri.rest.support.generateRendererUtils");m.createGenerateRendererClassBreaks=function(C){const {normalizationTotal:S}=
C;return{classBreaks:la(C),normalizationTotal:S}};m.createGenerateRendererUniqueValues=function(C){C=P(C);const S=[],e=C.uniqueValues.length;for(let p=0;p<e;p++){const E=C.uniqueValues[p];S.push({value:E,count:C.valueFrequency[p],label:E.toString()})}return{uniqueValues:S}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../geometry/SpatialReference".split(" "),
function(m,f,la,ba,P,ha,W){function J(){k||(k=(async()=>{const O=await new Promise((C,S)=>m(["./arcadeUtils"],C,S));return{arcade:O.arcade,arcadeUtils:O,Dictionary:O.Dictionary,Feature:O.arcadeFeature}})());return k}const h=ha.getLogger("esri.support.arcadeOnDemand");let k;ba=(O,C,S)=>q.create(O,C,S,null,["$feature","$view"],[]);let q=function(){function O(S,e,p,E,Q,H,v){this.services=null;this.script=S;this.evaluate=E;this.fields=Array.isArray(H)?H:H.fields;this._syntaxTree=p;this._arcade=e;this._arcadeFeature=
Q;this._spatialReference=v;this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}O.create=async function(S,e,p,E,Q,H){const {arcade:v,Feature:F,Dictionary:L}=await J(),x=W.fromJSON(e);let y;try{y=v.parseScript(S,H)}catch(ia){return h.error(new P("arcade-bad-expression","Failed to parse arcade script",{script:S,error:ia})),null}Q=Q.reduce((ia,N)=>({...ia,[N]:null}),{});let A=null;null!=E&&(A=new L(E),A.immutable=
!0,Q.$config=null);H=(E=v.scriptUsesGeometryEngine(y))&&v.enableGeometrySupport();const w=v.scriptUsesFeatureSet(y)&&v.enableFeatureSetSupport(),z=(e=v.scriptIsAsync(y))&&v.enableAsyncSupport();Q={vars:Q,spatialReference:x,useAsync:!!z};await Promise.all([H,w,z]);H=new Set;await v.loadDependentModules(H,y,null,e,E);const I=new L;I.immutable=!1;I.setField("scale",0);const Y=v.compileScript(y,Q);return new O(S,v,y,(ia,N)=>{"$view"in ia&&ia.$view&&(I.setField("scale","object"===typeof ia.$view&&"scale"in
ia.$view?ia.$view.scale:void 0),ia.$view=I);A&&(ia.$config=A);return Y({vars:ia,spatialReference:x,services:N})},new F,p,x)};var C=O.prototype;C.repurposeFeature=function(S){S.geometry&&!S.geometry.spatialReference&&(S.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(S.geometry,S.attributes,{fields:this.fields});return this._arcadeFeature};C.referencesGeometry=function(){return this._referencesGeometry};C.referencesScale=function(){return this._referencesScale};
return la._createClass(O)}();f.ArcadeExpression=q;f.createDictionaryExpression=(O,C,S,e)=>q.create(O,C,S,e,["$feature","$view"],[]);f.createLabelExpression=(O,C,S)=>q.create(O,C,S,null,["$feature"],[]);f.createRendererExpression=ba;f.createVVExpression=ba;f.loadArcade=J;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(m){m.makeEdgeCandidate=function(f,la,ba,P,ha,W=!1){return{objectId:f,target:la,distance:ba,
type:"edge",start:P,end:ha,draped:W}};m.makeVertexCandidate=function(f,la,ba){return{objectId:f,target:la,distance:ba,type:"vertex"}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(m,f,la,ba,P,ha){function W(B,aa,l){if(B)for(const G of B)(B=(B=ba.getDeepValue(G,aa))&&"function"!==typeof B&&l.get(B))&&ba.setDeepValue(G,
B.name,aa)}function J(B,aa){if(!B||!aa)return[];Ea.clear();h(Ea,B,aa);return Array.from(Ea).sort()}function h(B,aa,l){if(l)if(aa?.fields?.length)if(l.includes("*"))for(const {name:G}of aa.fields)B.add(G);else for(const G of l)k(B,aa,G);else if(l.includes("*"))B.clear(),B.add("*");else for(const G of l)null!=G&&B.add(G)}function k(B,aa,l){"string"===typeof l&&(aa?(aa=aa.get(l))&&B.add(aa.name):B.add(l))}async function q(B,aa,l){if(l){var {arcadeUtils:G}=await ha.loadArcade();l=G.extractFieldNames(l,
aa?.fields?.map(T=>T.name));for(const T of l)k(B,aa,T)}}async function O(B,aa,l){if(l&&"1\x3d1"!==l){var {WhereClause:G}=await new Promise((T,U)=>m(["../../core/sql/WhereClause"],T,U));G=G.create(l,aa);if(!G.isStandardized)throw new la("fieldUtils:collectFilterFields","Where clause is not standardized",{where:l});h(B,aa,G.fieldNames)}}function C(B,aa){for(const l of B)if(l&&l.valueType&&l.valueType===aa)return l.name;return null}async function S(B,aa){if(aa){var l=aa.elevationInfo?.featureExpressionInfo;
if(l)return l.collectRequiredFields(B,aa.fieldsIndex)}}async function e(B,aa,l){const G=[];l?.expressionInfos&&G.push(...l.expressionInfos.map(T=>q(B,aa.fieldsIndex,T.expression)));l=l?.content;if(Array.isArray(l))for(const T of l)"expression"===T.type&&T.expressionInfo&&G.push(q(B,aa.fieldsIndex,T.expressionInfo.expression));await Promise.all(G)}async function p(B,aa,l){aa&&l&&(l.valueExpression?await q(B,aa.fieldsIndex,l.valueExpression):l.field&&k(B,aa.fieldsIndex,l.field))}function E(B){if(!B)return[];
const aa=B.geometryFieldsInfo;return aa?J(B.fieldsIndex,[aa.shapeAreaField,aa.shapeLengthField]):[]}function Q(B){const aa=new Set;v(B).forEach(l=>aa.add(l));E(B).forEach(l=>aa.add(l.toLowerCase()));if(B=B&&"infoFor3D"in B?B.infoFor3D:void 0)Object.values(B.assetMapFieldRoles).forEach(l=>aa.add(l.toLowerCase())),Object.values(B.transformFieldRoles).forEach(l=>aa.add(l.toLowerCase()));return Array.from(aa)}function H(B){if(!B)return[];B="editFieldsInfo"in B&&B.editFieldsInfo;if(!B)return[];const {creationDateField:aa,
creatorField:l,editDateField:G,editorField:T}=B;return[aa,l,G,T].filter(Boolean)}function v(B){return H(B).map(aa=>aa.toLowerCase())}async function F(B,aa){const {labelingInfo:l,fieldsIndex:G}=aa;l&&l.length&&await Promise.all(l.map(T=>L(B,G,T)))}async function L(B,aa,l){if(l){var G=l.getLabelExpression();l=l.where;"arcade"===G.type?await q(B,aa,G.expression):(G=G.expression.match(/{[^}]*}/g))&&G.forEach(T=>{k(B,aa,T.slice(1,-1))});await O(B,aa,l)}}function x(B){return"number"===typeof B&&!isNaN(B)&&
isFinite(B)}function y(B){return null===B||x(B)}function A(B){return null===B||Ua(B)}function w(B){return null!=B&&"string"===typeof B}function z(B){return null===B||w(B)}function I(){return!0}function Y(B,aa){let l;switch(B.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":l=B.nullable?A:Ua;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":l=
B.nullable?y:x;break;case "string":case "esriFieldTypeString":l=B.nullable?z:w;break;default:l=I}return 1===arguments.length?l:l(aa)}function ia(B){return null!=B&&Va.has(B.type)}function N(B,aa){return null==B||B.nullable&&null===aa?null:ia(B)&&!M(B.type,Number(aa))?f.NumericRangeValidationError.OUT_OF_RANGE:Y(B,aa)?B.domain?P.validateDomainValue(B.domain,aa):null:f.TypeValidationError.INVALID_TYPE}function M(B,aa){B="string"===typeof B?r(B):B;if(!B)return!1;const l=B.min,G=B.max;return B.isInteger?
Ua(aa)&&aa>=l&&aa<=G:aa>=l&&aa<=G}function r(B){switch(B){case "esriFieldTypeSmallInteger":case "small-integer":return jb;case "esriFieldTypeInteger":case "integer":return db;case "esriFieldTypeBigInteger":case "big-integer":return c;case "esriFieldTypeSingle":case "single":return n;case "esriFieldTypeDouble":case "double":return da}}function u(B,aa,l){if(!aa||!aa.attributes||!B){if(null!=l)for(var G of B??[])l.add(G);return!0}aa=aa.attributes;G=!1;for(const T of B)if(!(T in aa))if(G=!0,null!=l)l.add(T);
else break;return G}const V=/^([0-9_])/,ja=/[^a-z0-9_\u0080-\uffff]+/gi,va="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),Ba=["field","normalizationField"],Ea=new Set,Fa=["oid","global-id","guid"],Ma=["oid","global-id"],Ha=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,
/objectid/i,/_i$/i],Ua=(()=>"isInteger"in Number?Number.isInteger:B=>"number"===typeof B&&isFinite(B)&&Math.floor(B)===B)(),Sa=["integer","small-integer","single","double"],Va=new Set([...Sa,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),eb=["date","date-only","time-only","timestamp-offset"],kb=new Set([...eb,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);f.NumericRangeValidationError=void 0;(f.NumericRangeValidationError||
(f.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";f.TypeValidationError=void 0;(f.TypeValidationError||(f.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const jb={min:-32768,max:32767,isInteger:!0},db={min:-2147483648,max:2147483647,isInteger:!0},c={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},n={min:-3.4E38,max:1.2E38,isInteger:!1},da={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};f.bigIntegerRange=
c;f.collectArcadeFieldNames=q;f.collectElevationFields=S;f.collectFeatureReductionFields=async function(B,aa,l){if(aa&&l&&"fields"in l){var G=[];G.push(e(B,aa,l.popupTemplate));l.fields&&G.push(...l.fields.map(async T=>{T.onStatisticExpression?q(B,aa.fieldsIndex,T.onStatisticExpression.expression):B.add(T.onStatisticField)}));await Promise.all(G)}};f.collectField=k;f.collectFields=h;f.collectFilterFields=async function(B,aa,l){aa&&(aa.timeInfo&&null!=l&&l.timeExtent&&h(B,aa.fieldsIndex,[aa.timeInfo.startField,
aa.timeInfo.endField]),aa.floorInfo&&h(B,aa.fieldsIndex,[aa.floorInfo.floorField]),null!=l&&null!=l.where&&await O(B,aa.fieldsIndex,l.where))};f.collectLabelingFields=F;f.collectOrderByInfos=async function(B,aa,l){aa&&l&&await Promise.all(l.map(G=>p(B,aa,G)))};f.collectPopupTemplateFields=e;f.dateTypes=eb;f.doubleRange=da;f.featureHasFields=function(B,aa){return!u(B,aa,null)};f.fixFields=J;f.fixRendererFields=function(B,aa){if(null!=B&&null!=aa)for(const l of Array.isArray(B)?B:[B])if(W(va,l,aa),
"visualVariables"in l&&l.visualVariables)for(const G of l.visualVariables)W(Ba,G,aa)};f.fixTimeInfoFields=function(B,aa){if(null!=B&&aa?.fields?.length)if("startField"in B){var l=aa.get(B.startField);aa=aa.get(B.endField);B.startField=l?.name??null;B.endField=aa?.name??null}else l=aa.get(B.startTimeField),aa=aa.get(B.endTimeField),B.startTimeField=l?.name??null,B.endTimeField=aa?.name??null};f.getDisplayFieldName=function({displayField:B,fields:aa}){if(B)return B;if(!aa||!aa.length)return null;if(!(B=
C(aa,"name-or-title")||C(aa,"unique-identifier")||C(aa,"type-or-category")))a:{for(const l of aa)if(l&&l.name&&(aa=l.name.toLowerCase(),aa.includes("name")||aa.includes("title"))){B=l.name;break a}B=null}return B};f.getEditTrackingFields=H;f.getElevationFields=async function(B){if(!B)return[];const aa=new Set;await S(aa,B);return Array.from(aa).sort()};f.getExpressionFields=async function(B,aa){const l=new Set;for(const G of aa)await q(l,B.fieldsIndex,G);return Array.from(l).sort()};f.getFeatureEditFields=
function(B){return B?J(B.fieldsIndex,H(B)):[]};f.getFeatureGeometryFields=E;f.getFieldDefaultValue=function(B){const aa=B.defaultValue;if(void 0!==aa&&Y(B,aa))return aa;if(B.nullable)return null};f.getFieldRange=function(B){const aa=P.getDomainRange(B.domain);if(aa)return aa;if(ia(B))return r(B.type)};f.getLabelingFields=async function(B){if(!B)return[];const aa=new Set;await F(aa,B);return Array.from(aa).sort()};f.getLowerCaseDefaultHiddenFields=Q;f.getLowerCaseEditTrackingFields=v;f.getNumericTypeForValue=
function(B){if(!x(B))return null;if(Ua(B)){if(B>=jb.min&&B<=jb.max)return"esriFieldTypeSmallInteger";if(B>=db.min&&B<=db.max)return"esriFieldTypeInteger"}return B>=n.min&&B<=n.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};f.getTimeFields=async function(B){if(!B)return[];const aa="timeInfo"in B&&B.timeInfo;return aa?J(B.fieldsIndex,[B.trackIdField,aa.startField,aa.endField]):[]};f.integerRange=db;f.isDateField=function(B){return null!=B&&kb.has(B.type)};f.isFieldEditable=function(B,aa){return B.editable&&
!Fa.includes(B.type)&&!v(aa).includes(B.name?.toLowerCase()??"")};f.isFieldVisibleByDefault=function(B,aa){const l=B.name?.toLowerCase()??"";return!(null!=aa?.objectIdField&&l===aa.objectIdField.toLowerCase())&&!(null!=aa?.globalIdField&&l===aa.globalIdField.toLowerCase())&&!Q(aa).includes(l)&&!Ma.includes(B.type)&&!Ha.some(G=>G.test(l))};f.isNumberInRange=M;f.isNumericField=ia;f.isRasterPixelValueField=function(B){return B?["raster.itempixelvalue","raster.servicepixelvalue"].some(aa=>B.toLowerCase().startsWith(aa)):
!1};f.isStringField=function(B){return null!=B&&("string"===B.type||"esriFieldTypeString"===B.type)};f.isValidFieldValue=function(B,aa){return null===N(B,aa)};f.isValueMatchingFieldType=Y;f.normalizeFieldName=function(B){return null==B?null:B.trim().replaceAll(ja,"_").replace(V,"F$1")||null};f.numericTypes=Sa;f.packFields=function(B,aa,l=1){if(!aa||!B)return[];if(aa.includes("*"))return["*"];aa=J(B,aa);return aa.length/B.fields.length>=l?["*"]:aa};f.populateMissingFields=u;f.rendererFields=va;f.sanitizeNullFieldValue=
function(B){return null==B||"number"===typeof B&&isNaN(B)?null:B};f.singleRange=n;f.smallIntegerRange=jb;f.unpackFieldNames=function(B,aa){return null==aa||null==B?[]:aa.includes("*")?(B.fields??[]).map(l=>l.name):aa};f.validateFieldValue=N;f.validationErrorToString=function(B,aa,l){switch(B){case P.DomainValidationError.INVALID_CODED_VALUE:return`Value ${l} is not in the coded domain - field: ${aa.name}, domain: ${JSON.stringify(aa.domain)}`;case P.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${l} is out of the range of valid values - field: ${aa.name}, domain: ${JSON.stringify(aa.domain)}`;
case f.TypeValidationError.INVALID_TYPE:return`Value ${l} is not a valid value for the field type - field: ${aa.name}, type: ${aa.type}, nullable: ${aa.nullable}`;case f.NumericRangeValidationError.OUT_OF_RANGE:const {min:G,max:T}=r(aa.type);return`Value ${l} is out of range for the number type - field: ${aa.name}, type: ${aa.type}, value range is ${G} to ${T}`}};f.visualVariableFields=Ba;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(m){m.DomainValidationError=void 0;(function(f){f.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";f.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(m.DomainValidationError||(m.DomainValidationError={}));m.getDomainRange=function(f){if(f&&"range"===f.type)return{min:"range"in f?f.range[0]:f.minValue,max:"range"in f?f.range[1]:f.maxValue}};m.validateDomainValue=function(f,la){switch(f.type){case "range":const ba="range"in f?f.range[0]:f.minValue;f="range"in
f?f.range[1]:f.maxValue;if(null!=ba&&+la<ba||null!=f&&+la>f)return m.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==f.codedValues||f.codedValues.every(P=>null==P||P.code!==la))return m.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==f.codedValues||f.codedValues.every(P=>null==P||P.code!==la))return m.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(m,f,la,ba,P,ha,W,J,h,k,q,O){function C(){return new Promise((Q,H)=>m(["../../../geometry/geometryEngineJSON"],Q,H))}const S={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var e={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},p={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},E={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};f.canQueryWithRBush=
function(Q){if(ha.isExtent(Q))return!0;if(ha.isPolygon(Q)){for(const H of Q.rings)if(5!==H.length||H[0][0]!==H[1][0]||H[0][0]!==H[4][0]||H[2][0]!==H[3][0]||H[0][1]!==H[3][1]||H[0][1]!==H[4][1]||H[1][1]!==H[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=async function(Q,H,v){const {spatialRel:F,geometry:L}=Q;if(L){if(null==F||!0!==e[F])throw new la("feature-store:unsupported-query","Unsupported query spatial relationship",{query:Q});if(W.isValid(L.spatialReference)&&W.isValid(v)){if(null==
L||!0!==p[ha.getJsonType(L)])throw new la("feature-store:unsupported-query","Unsupported query geometry type",{query:Q});if(null==H||!0!==E[H])throw new la("feature-store:unsupported-query","Unsupported layer geometry type",{query:Q});if(Q.outSR)return q.checkProjectionSupport(Q.geometry&&Q.geometry.spatialReference,Q.outSR)}}};f.getSpatialQueryOperator=function(Q,H,v,F,L){if(ha.isPolygon(H)&&"esriGeometryPoint"===v&&("esriSpatialRelIntersects"===Q||"esriSpatialRelContains"===Q)){const x=h.convertFromPolygon(new k,
H,!1,!1);return Promise.resolve(y=>J.polygonContainsPoint(x,!1,!1,y))}if(ha.isPolygon(H)&&"esriGeometryMultipoint"===v){const x=h.convertFromPolygon(new k,H,!1,!1);if("esriSpatialRelContains"===Q)return Promise.resolve(y=>J.polygonContainsMultipoint(x,!1,!1,y,F,L))}if(ha.isExtent(H)&&"esriGeometryPoint"===v&&("esriSpatialRelIntersects"===Q||"esriSpatialRelContains"===Q))return Promise.resolve(x=>ba.extentContainsPoint(H,O.getGeometry(v,F,L,x)));if(ha.isExtent(H)&&"esriGeometryMultipoint"===v&&"esriSpatialRelContains"===
Q)return Promise.resolve(x=>ba.extentContainsMultipoint(H,O.getGeometry(v,F,L,x)));if(ha.isExtent(H)&&"esriSpatialRelIntersects"===Q){const x=P.getExtentIntersector(v);return Promise.resolve(y=>x(H,O.getGeometry(v,F,L,y)))}return C().then(x=>{const y=x[S[Q]].bind(null,H.spatialReference,H);return A=>y(O.getGeometry(v,F,L,A))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(m,f){m.extentIntersectsExtent=
f.extentIntersectsExtent;m.extentIntersectsMultipoint=f.extentIntersectsMultipoint;m.extentIntersectsPoint=f.extentIntersectsPoint;m.extentIntersectsPolygon=f.extentIntersectsPolygon;m.extentIntersectsPolyline=f.extentIntersectsPolyline;m.extentIntersectsRings=f.extentIntersectsRings;m.getFeatureExtentIntersector=f.getFeatureExtentIntersector;m.isSelfIntersecting=f.isSelfIntersecting;m.segmentIntersects=f.segmentIntersects;m.getExtentIntersector=function(la){return"mesh"===la?f.extentIntersectsExtent:
f.getFeatureExtentIntersector(la)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(m){function f(la,ba,P,ha,W){if(!la)return!1;ba=ba?P?4:3:P?3:2;const {coords:J,lengths:h}=la;P=!1;la=0;for(const q of h){var k=la;for(let O=la,C=la+q*ba;O<C;O+=ba){k=O+ba;k===C&&(k=la);const S=J[O],e=J[O+1],p=J[k];k=J[k+1];(e<W&&k>=W||k<W&&e>=W)&&S+(W-e)/(k-e)*(p-S)<ha&&(P=!P)}la+=q*ba}return P}m.polygonContainsCoords=f;m.polygonContainsMultipoint=
function(la,ba,P,ha,W,J){W=W?J?4:3:J?3:2;const {coords:h,lengths:k}=ha;if(!k)return!1;for(let q=0,O=0;q<k.length;q++,O+=W)if(!f(la,ba,P,h[O],h[O+1]))return!1;return!0};m.polygonContainsPoint=function(la,ba,P,ha){return f(la,ba,P,ha.coords[0],ha.coords[1])};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(m){function f(P,ha,W,J,h){if(null!=J&&null!=h)return k=>{const q=P.getAttribute(k,ha);k=P.getAttribute(k,
W);return(null==q||q<=h)&&(null==k||k>=J)};if(null!=J)return k=>{k=P.getAttribute(k,W);return null==k||k>=J};if(null!=h)return k=>{k=P.getAttribute(k,ha);return null==k||k<=h}}function la(P,ha,W,J){if(null!=W&&null!=J&&W===J)return h=>P.getAttribute(h,ha)===W;if(null!=W&&null!=J)return h=>{h=P.getAttribute(h,ha);return h>=W&&h<=J};if(null!=W)return h=>P.getAttribute(h,ha)>=W;if(null!=J)return h=>P.getAttribute(h,ha)<=J}function ba(){return()=>!1}m.getTimeExtent=async function(P,ha){if(!P)return null;
const W=ha.featureAdapter,{startTimeField:J,endTimeField:h}=P;let k=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY;if(J&&h)await ha.forEach(O=>{const C=W.getAttribute(O,J);O=W.getAttribute(O,h);null==C||isNaN(C)||(k=Math.min(k,C));null==O||isNaN(O)||(q=Math.max(q,O))});else{const O=J||h;await ha.forEach(C=>{C=W.getAttribute(C,O);null==C||isNaN(C)||(k=Math.min(k,C),q=Math.max(q,C))})}return{start:k,end:q}};m.getTimeOperator=function(P,ha,W){if(!ha||!P)return null;const {startTimeField:J,endTimeField:h}=
P;if(!J&&!h)return null;const {start:k,end:q}=ha;return null===k&&null===q?null:void 0===k&&void 0===q?ba():J&&h?f(W,J,h,k,q):la(W,J||h,k,q)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(m,f){function la(P){return"oid"===P.type||"esriFieldTypeOID"===P.type}function ba(P){return"global-id"===P.type||"esriFieldTypeGlobalID"===P.type}return function(){function P(W=
[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(W){this.fields=W;var J=[];for(const h of W){W=h?.name;const k=f.normalizeFieldName(h?.name)?.toLowerCase()??"";if(W&&k){const q=W.trim().toLowerCase();this._fieldsMap.set(W,h);this._fieldsMap.set(q,h);this._normalizedFieldsMap.set(k,h);J.push(q);"date"===h.type||"esriFieldTypeDate"===h.type||"date-only"===
h.type||"esriFieldTypeDateOnly"===h.type||"timestamp-offset"===h.type||"esriFieldTypeTimestampOffset"===h.type?(this.dateFields.push(h),this._dateFieldsSet.add(h)):f.isNumericField(h)&&(this._numericFieldsSet.add(h),this.numericFields.push(h));la(h)||ba(h)||(h.editable=null==h.editable||!!h.editable,h.nullable=null==h.nullable||!!h.nullable)}}J.sort();this.uid=J.join(",")}}var ha=P.prototype;ha.destroy=function(){this._fieldsMap.clear()};ha.has=function(W){return null!=this.get(W)};ha.get=function(W){if(W){var J=
this._fieldsMap.get(W);if(J)return J;(J=this._fieldsMap.get(W.trim().toLowerCase())??this._normalizedFieldsMap.get(f.normalizeFieldName(W)?.toLowerCase()??""))&&this._fieldsMap.set(W,J);return J}};ha.isDateField=function(W){return this._dateFieldsSet.has(this.get(W))};ha.isNumericField=function(W){return this._numericFieldsSet.has(this.get(W))};ha.normalizeFieldName=function(W){if(W=this.get(W))return W.name??void 0};m._createClass(P,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=
[];for(const W of this.fields)la(W)||ba(W)||W.nullable||void 0!==f.getFieldDefaultValue(W)||this._requiredFields.push(W)}return this._requiredFields}}]);return P}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(m,f,la,ba,P,ha,W,J,h,k,q,O,C,S,e){function p(w){return E.has(w)?E.get(w):"number"===typeof w?w:1}m.Task=void 0;(function(w){w[w.YIELD=1]="YIELD"})(m.Task||(m.Task={}));m.TaskPriority=void 0;(function(w){w.RESOURCE_CONTROLLER_IMMEDIATE="immediate";w.RESOURCE_CONTROLLER="schedule";w.SLIDE="slide";w.STREAM_DATA_LOADER="stream loader";w.ELEVATION_QUERY="elevation query";w.TERRAIN_SURFACE="terrain";w.SURFACE_GEOMETRY_UPDATES="surface geometry updates";w.LOD_RENDERER="LoD renderer";w.GRAPHICS_CORE=
"Graphics3D";w.I3S_CONTROLLER="I3S";w.POINT_CLOUD_LAYER="point cloud";w.FEATURE_TILE_FETCHER="feature fetcher";w.OVERLAY="overlay";w.STAGE="stage";w.GRAPHICS_DECONFLICTOR="graphics deconflictor";w.FILTER_VISIBILITY="Graphics3D filter visibility";w.SCALE_VISIBILITY="Graphics3D scale visibility";w.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";w.POINT_OF_INTEREST_FREQUENT="POI frequent";w.POINT_OF_INTEREST_INFREQUENT="POI infrequent";w.LABELER="labeler";w.FEATURE_QUERY_ENGINE="feature query";w.FEATURE_TILE_TREE=
"feature tile tree";w.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";w.ELEVATION_ALIGNMENT="elevation alignment";w.TEXT_TEXTURE_ATLAS="text texture atlas";w.TEXTURE_UNLOAD="texture unload";w.LINE_OF_SIGHT_TOOL="line of sight tool";w.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";w.ELEVATION_PROFILE="elevation profile";w.SNAPPING="snapping";w.SHADOW_ACCUMULATOR="shadow accumulator";w.CLOUDS_GENERATOR="clouds generator";w[w.NONE=0]="NONE";w[w.TEST_PRIO=1]="TEST_PRIO"})(m.TaskPriority||
(m.TaskPriority={}));const E=new Map([[m.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[m.TaskPriority.RESOURCE_CONTROLLER,4],[m.TaskPriority.SLIDE,0],[m.TaskPriority.STREAM_DATA_LOADER,0],[m.TaskPriority.ELEVATION_QUERY,0],[m.TaskPriority.TERRAIN_SURFACE,1],[m.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[m.TaskPriority.LOD_RENDERER,2],[m.TaskPriority.GRAPHICS_CORE,2],[m.TaskPriority.I3S_CONTROLLER,2],[m.TaskPriority.POINT_CLOUD_LAYER,2],[m.TaskPriority.FEATURE_TILE_FETCHER,2],[m.TaskPriority.OVERLAY,
4],[m.TaskPriority.STAGE,4],[m.TaskPriority.GRAPHICS_DECONFLICTOR,4],[m.TaskPriority.FILTER_VISIBILITY,4],[m.TaskPriority.SCALE_VISIBILITY,4],[m.TaskPriority.FRUSTUM_VISIBILITY,4],[m.TaskPriority.CLOUDS_GENERATOR,4],[m.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[m.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[m.TaskPriority.LABELER,8],[m.TaskPriority.FEATURE_QUERY_ENGINE,8],[m.TaskPriority.FEATURE_TILE_TREE,16],[m.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[m.TaskPriority.ELEVATION_ALIGNMENT,12],[m.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[m.TaskPriority.TEXTURE_UNLOAD,12],[m.TaskPriority.LINE_OF_SIGHT_TOOL,16],[m.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[m.TaskPriority.SNAPPING,0],[m.TaskPriority.SHADOW_ACCUMULATOR,30]]),Q=O.Milliseconds(6.5),H=O.Milliseconds(1),v=O.Milliseconds(30),F=O.Milliseconds(1E3/30),L=O.Milliseconds(100);var x;(function(w){let z=function(){function ia(){this._updating=q.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new W("total"),tasks:new Map};this._frameTaskTimes=
new Map;this._budget=new Y;this._state=e.RenderState.INTERACTING;this._tasks=new J;this._runQueue=new J;this._load=0;this._idleStateCallbacks=new J;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=k.watch(()=>S.SCHEDULER_LOG_SLOW_TASKS,r=>this._debug=r,k.initial);for(const r of Object.keys(m.TaskPriority))this.performanceInfo.tasks.set(m.TaskPriority[r],new W(m.TaskPriority[r]));const M=this;this._test={FRAME_SAFETY_BUDGET:Q,INTERACTING_BUDGET:F,IDLE_BUDGET:L,get availableBudget(){return M._budget.budget},
usedBudget:0,getBudget:()=>M._budget,setBudget:r=>M._budget=r,updateTask:r=>this._updateTask(r),getState:r=>this._getState(r),getRuntime:r=>this._getRuntime(r),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var N=ia.prototype;N._updatingChanged=function(){this._updating.value=this._tasks.some(M=>M.needsUpdate)};N.destroy=function(){this._tasks.toArray().forEach(M=>M.remove());this._tasks.clear();ha.removeMaybe(this._debugHandle);this._microTaskQueued=
!1;this._updatingChanged()};N.taskRunningChanged=function(M){this._updatingChanged();M&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};N.registerTask=function(M,r){const u=p(M);r=new I(this,M,r,u);this._tasks.push(r);this._updatingChanged();this.performanceInfo.tasks.has(M)||this.performanceInfo.tasks.set(M,new W(M));return r};N.registerIdleStateCallbacks=
function(M,r){const u={idleBegin:M,idleEnd:r};this._idleStateCallbacks.push(u);this.state===e.RenderState.IDLE&&this._idleUpdatesStartFired&&u.idleBegin();const V=this;return{remove:()=>this._removeIdleStateCallbacks(u),set idleBegin(ja){V._idleUpdatesStartFired&&(u.idleEnd(),V._state===e.RenderState.IDLE&&ja());u.idleBegin=ja},set idleEnd(ja){u.idleEnd=ja}}};N.updateBudget=function(M){this._test.usedBudget=0;++this._frameNumber;let r=Q,u=M.frameDuration,V=H;switch(this.state){case e.RenderState.IDLE:r=
O.Milliseconds(0);u=O.Milliseconds(Math.max(L,M.frameDuration));V=v;break;case e.RenderState.INTERACTING:u=O.Milliseconds(Math.max(F,M.frameDuration))}u=O.Milliseconds(u-M.elapsedFrameTime-r);if(this.state!==e.RenderState.IDLE&&u<H&&!this._forceTask)return this._forceTask=!0,!1;u=O.Milliseconds(Math.max(u,V));this._budget.reset(u,this.state);this._updateLoad();return this._schedule()};N.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case e.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(M=>M.idleBegin()));this._runIdle();break;case e.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};N.stopFrame=function(){this._budget.reset(O.Milliseconds(0),this._state);this._budget.madeProgress()};N._removeIdleStateCallbacks=function(M){this._idleUpdatesStartFired&&M.idleEnd();this._idleStateCallbacks.removeUnordered(M)};N.removeTask=function(M){this._tasks.removeUnordered(M);
this._runQueue.removeUnordered(M);this._updatingChanged()};N._updateTask=function(M){this._tasks.forAll(r=>{r.name===M&&r.setPriority(M)})};N._getState=function(M){if(this._runQueue.some(u=>u.name===M))return m.TaskState.SCHEDULED;let r=m.TaskState.IDLE;this._tasks.forAll(u=>{u.name===M&&u.needsUpdate&&(1>=u.schedulePriority?r=m.TaskState.READY:r!==m.TaskState.READY&&(r=m.TaskState.WAITING))});return r};N._getRuntime=function(M){let r=0;this._tasks.forAll(u=>{u.name===M&&(r+=u.runtime)});return r};
N._resetRuntimes=function(){this._tasks.forAll(M=>M.runtime=0)};N._getRunning=function(){const M=new Map;this._tasks.forAll(u=>{u.needsUpdate&&M.set(u.name,(M.get(u.name)||0)+1)});if(0===M.size)return null;let r="";M.forEach((u,V)=>{r=1<u?r+` ${u}x ${V}`:r+` ${V}`});return r};N._runIdle=function(){this._run()};N._runInteracting=function(){this._run()};N._runAnimating=function(){this._run()};N._updateLoad=function(){const M=this._tasks.reduce((r,u)=>u.needsUpdate?++r:r,0);this._load=.9*this._load+
M*(1-.9)};N._schedule=function(){this._runQueue.filterInPlace(M=>{if(M.needsUpdate)return!0;M.schedulePriority=M.basePriority;return!1});for(this._tasks.forAll(M=>{0===M.basePriority&&M.needsUpdate&&!this._runQueue.includes(M)&&M.blockFrame!==this._frameNumber&&this._runQueue.unshift(M)});0===this._runQueue.length;){let M=!1;this._tasks.forAll(r=>{if(r.needsUpdate&&0!==r.schedulePriority&&0!==r.basePriority&&r.blockFrame!==this._frameNumber)switch(M=!0,r.schedulePriority){case 1:r.schedulePriority=
0;this._runQueue.push(r);break;default:--r.schedulePriority}});if(!M)return this._updatingChanged(),!1}this._updatingChanged();return!0};N._run=function(){const M=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var r=this._budget.now();const u=this._runQueue.pop();this._budget.resetProgress();try{u.task.runTask(this._budget)===m.Task.YIELD&&(u.blockFrame=this._frameNumber)}catch(V){P.getLogger("esri.views.support.Scheduler").error(`Exception in task "${u.name}"`,V)}!this._budget.hasProgressed&&
u.blockFrame!==this._frameNumber&&u.needsUpdate&&(u.blockFrame=this._frameNumber);u.schedulePriority=u.basePriority;r=this._budget.now()-r;u.runtime+=r;this._frameTaskTimes.set(u.priority,this._frameTaskTimes.get(u.priority)+r);this._debug&&r>2*this._budget.budget&&console.log("Task",u.name,"used",r,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-M);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
M)};N._startFrameTaskTimes=function(){for(const M of Object.keys(m.TaskPriority))this._frameTaskTimes.set(m.TaskPriority[M],0)};N._recordFrameTaskTimes=function(M){this._frameTaskTimes.forEach((r,u)=>this.performanceInfo.tasks.get(u).record(r));this.performanceInfo.total.record(M)};f._createClass(ia,[{key:"updating",get:function(){return this._updating.value}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(M){this._state!==M&&(this._state=
M,this.state!==e.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(r=>r.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ia}();w.Scheduler=z;let I=function(){function ia(M,r,u,V){this._scheduler=M;this.name=r;this._basePriority=V;this.runtime=this.blockFrame=0;this._queue=new C.PromiseQueue;this._handles=new la;this.schedulePriority=this._basePriority;this._task=q.signal(null!=u?u:this._queue);this._handles.add(k.when(()=>
this.task.running,ja=>M.taskRunningChanged(ja)))}var N=ia.prototype;N.remove=function(){this.processQueue(y);this._scheduler.removeTask(this);this.schedule=A.schedule;this.reschedule=A.reschedule;this._handles.destroy()};N.setPriority=function(M){this.name=M;M=p(M);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=M;this._basePriority=M};N.schedule=function(M,r,u){return this._queue.push(M,r,u)};N.reschedule=function(M,r,u){return this._queue.unshift(M,r,u)};N.processQueue=
function(M){this._queue.runTask(M)};f._createClass(ia,[{key:"task",get:function(){return this._task.value}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(M){this.setPriority(M)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ia}(),Y=function(){function ia(){this._begin="undefined"!==typeof performance?performance.now():0;
this._budget=0;this._state=e.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var N=ia.prototype;N.run=function(M){if(this.done)return!1;!0===M()&&this.madeProgress();return!0};N.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};N.reset=function(M,r){this._begin=this.now();this._budget=M;this._state=r;this.resetProgress()};N.now=function(){return performance.now()};N.resetProgress=function(){this._done=this._progressed=!1};f._createClass(ia,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(M){this._enabled=M}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return ia}();w.Budget=Y})(x||(x={}));m.TaskState=void 0;
(function(w){w.SCHEDULED="s";w.READY="r";w.WAITING="w";w.IDLE="i"})(m.TaskState||(m.TaskState={}));const y=(()=>{const w=new x.Budget;w.enabled=!1;return w})(),A=new (function(){function w(){}var z=w.prototype;z.remove=function(){};z.processQueue=function(){};z.schedule=function(I,Y,ia){try{if(h.isAborted(Y)){const N=h.createAbortError();return ia?Promise.resolve(ia(N)):Promise.reject(N)}return h.when(I(y))}catch(N){return Promise.reject(N)}};z.reschedule=function(I,Y,ia){return this.schedule(I,Y,
ia)};return f._createClass(w)}());m.ImmediateTask=A;m.getTaskPriority=p;m.newScheduler=function(){return new x.Scheduler};m.noBudget=y;m.taskPriorities=E;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(m,f,la,ba,P,ha,W){function J(C,S,e={}){return h(C,S,e,q)}function h(C,S,e={},p){let E=null;const Q=e.once?(H,
v)=>{p(H)&&(ba.removeMaybe(E),S(H,v))}:(H,v)=>{p(H)&&S(H,v)};E=ha.watchTracked(C,Q,e.sync,e.equals);e.initial&&(C=C(),Q(C,C));return E}function k(C,S,e){if(P.isAborted(e))return Promise.reject(P.createAbortError());const p=C();if(S?.(p))return Promise.resolve(p);let E=null;return new Promise((Q,H)=>{E=la.handlesGroup([P.onAbort(e,()=>{E=ba.removeMaybe(E);H(P.createAbortError())}),h(C,v=>{E=ba.removeMaybe(E);Q(v)},{sync:!1,once:!0},S??q)])})}function q(C){return!0}function O(C){return!!C}m.autorun=
W.autorun;m.initial={initial:!0};m.on=function(C,S,e,p={}){function E(){H&&v&&(v.remove(),p.onListenerRemove?.(H),v=H=null)}function Q(x){p.once&&p.once&&ba.removeMaybe(F);e(x)}let H=null,v=null,F=null;const L=J(C,(x,y)=>{E();f.isEventTarget(x)&&(H=x,v=f.on(x,S,Q),p.onListenerAdd?.(x))},{sync:p.sync,initial:!0});return F=la.makeHandle(()=>{L.remove();E()})};m.once=function(C,S){return k(C,null,S)};m.pausable=function(C,S,e={}){let p=!1;const E=J(C,(Q,H)=>{p||S(Q,H)},e);return{remove(){E.remove()},
pause(){p=!0},resume(){p=!1}}};m.sync={sync:!0};m.syncAndInitial={sync:!0,initial:!0};m.watch=J;m.when=function(C,S,e={}){return h(C,S,e,O)};m.whenOnce=function(C,S){return k(C,O,S)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(m,f,la,ba,P){let ha=function(){function W(J,h){this._observable=new P.SimpleObservable;
this._value=J;this._equalityFunction=h}W.prototype.mutate=function(J){J(this._value);this._observable.notify()};f._createClass(W,[{key:"value",get:function(){ba.trackAccess(this._observable);return this._value},set:function(J){this._equalityFunction(J,this._value)||(this._value=J,this._observable.notify())}}]);return W}();m.signal=function(W,J=la.equalsShallow){return new ha(W,J)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/signal"],function(m,f,la,ba){let P=function(){function W(){this._tasks=[];this._running=ba.signal(!1)}var J=W.prototype;J.destroy=function(){this.cancelAll()};J.runTask=function(h){for(;!h.done&&this._process(h);)h.madeProgress()};J.push=function(h,k,q){this._running.value=!0;return new Promise((O,C)=>this._tasks.push(new ha(O,C,h,k,q)))};J.unshift=function(h,k,q){this._running.value=!0;return new Promise((O,C)=>this._tasks.unshift(new ha(O,
C,h,k,q)))};J._process=function(h){if(0===this._tasks.length)return!1;const k=this._tasks.shift();try{const q=la.isAborted(k.signal);if(q&&!k.abortCallback)k.reject(la.createAbortError());else{const O=q?k.abortCallback?.(la.createAbortError()):k.callback(h);la.isPromiseLike(O)?O.then(k.resolve,k.reject):k.resolve(O)}}catch(q){k.reject(q)}this._running.value=0<this._tasks.length;return!0};J.cancelAll=function(){const h=la.createAbortError();for(const k of this._tasks)if(k.abortCallback){const q=k.abortCallback(h);
k.resolve(q)}else k.reject(h);this._tasks.length=0;this._running.value=!1};f._createClass(W,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.value}}]);return W}(),ha=f._createClass(function(W,J,h,k,q){this.resolve=W;this.reject=J;this.callback=h;this.signal=k;this.abortCallback=q});m.PromiseQueue=P;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,f,la,ba,P,ha,W,J){la=function(h){function k(){var q=h.apply(this,arguments)||this;q.SCHEDULER_LOG_SLOW_TASKS=!1;q.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return q}m._inherits(k,h);return m._createClass(k)}(la);f.__decorate([ba.property()],la.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);f.__decorate([ba.property()],la.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);la=f.__decorate([J.subclass("esri.views.support.DebugFlags")],la);return new la})},
"esri/views/support/RenderState":function(){define(["exports"],function(m){m.RenderState=void 0;var f=m.RenderState||(m.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]="IDLE";Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(m,
f,la,ba,P){const ha=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let W=1;m.createCapabilities=function(J,h){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:J},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:h,supportsDelete:h,supportsEditing:h,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,
supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:h,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:ba.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:h,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,
supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}};m.createDefaultAttributesFunction=function(J,h){if(f("esri-csp-restrictions"))return()=>({[h]:null,...J});try{let k=`this.${h} = null;`;for(const O in J){const C=ha.test(O)?`.${O}`:`["${O}"]`;k+=`this${C} = ${JSON.stringify(J[O])};`}const q=(new Function(`\n      return class AttributesClass$${W++} {\n        constructor() {\n          ${k};\n        }\n      }\n    `))();return()=>new q}catch(k){return()=>
({[h]:null,...J})}};m.createDefaultTemplate=function(J={}){return[{name:"New Feature",description:"",prototype:{attributes:la.clone(J)}}]};m.createDrawingInfo=function(J){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===J||"esriGeometryMultipoint"===J?P.defaultPointSymbolJSON:"esriGeometryPolyline"===J?P.defaultPolylineSymbolJSON:P.defaultPolygonSymbolJSON}}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],
function(m){const f=[252,146,31,255],la={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ba={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f};m.defaultColor=f;m.defaultOutlineColor=[153,153,153,255];m.defaultPointSymbolJSON=la;m.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};m.defaultPolylineSymbolJSON=
ba;m.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};m.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};m.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};m.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",
color:[0,0,0,255],width:1.5};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(m,f,la,ba,P){function ha(C){return new h(C)}async function W(){null==O&&(O=await new Promise((C,S)=>m(["../../../../geometry/geometryEngineJSON"],C,S)));return O}let J=la._createClass(function(){this.description=
this.code=null}),h=la._createClass(function(C){this.error=new J;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=C}),k=la._createClass(function(C){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=C});const q=new Set;let O;f.createFeatureEditErrorResult=ha;f.createFeatureEditSuccessResult=function(C){return new k(C)};f.loadGeometryEngineForSimplify=async function(C,S){!ba.isValid(C)||"esriGeometryPolygon"!==S&&"esriGeometryPolyline"!==S||await W()};
f.mixAttributes=function(C,S,e,p=!1,E){q.clear();for(const F in e){const L=C.get(F);if(!L)continue;var Q=e[F],H=L,v=Q;let x=v;"string"===typeof v&&P.isNumericField(H)?x=parseFloat(v):null!=v&&P.isStringField(H)&&"string"!==typeof v&&(x=String(v));H=P.sanitizeNullFieldValue(x);H!==Q&&E&&E.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:L,originalValue:Q,sanitizedValue:H}});q.add(L.name);if(L&&(p||L.editable)){if(Q=P.validateFieldValue(L,
H))return ha(P.validationErrorToString(Q,L,H));S[L.name]=H}}for(const F of C?.requiredFields??[])if(!q.has(F.name))return ha(`missing required field "${F.name}"`);return null};f.simplify=function(C,S){if(!C||!ba.isValid(S))return C;if("rings"in C||"paths"in C){if(null==O)throw new TypeError("geometry engine not loaded");return O.simplify(S,C)}return C};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],
function(m,f){f=new f.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",
esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});m.kebabDict=f;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(m,f,la,ba,P,ha,W,J,h,k,q,O,C,S){function e(v){return la.isPoint(v)?null!=
v.z:!!v.hasZ}function p(v){return la.isPoint(v)?null!=v.m:!!v.hasM}const E=ba.WGS84,Q={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:ba.WGS84},H={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,
supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function v(){this._nextObjectId=this._queryEngine=null}var F=v.prototype;F.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null};F.load=async function(L){var x=
[];const {features:y}=L;var A=this._inferLayerProperties(y,L.fields);const w=L.fields||[],z=null!=L.hasM?L.hasM:!!A.hasM,I=null!=L.hasZ?L.hasZ:!!A.hasZ;var Y=!L.spatialReference&&!A.spatialReference;const ia=Y?E:L.spatialReference||A.spatialReference,N=Y?Q:null,M=L.geometryType||A.geometryType;let r=L.objectIdField||A.objectIdField;L=L.timeInfo;if(M&&(Y&&x.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!M))throw new f("feature-layer:missing-property",
"geometryType not set and couldn't be inferred from the provided features");if(!r)throw new f("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");A.objectIdField&&r!==A.objectIdField&&(x.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${r}" doesn't match the field name "${A.objectIdField}", found in the provided fields`}),r=A.objectIdField);if(r&&!A.objectIdField){let V=null;w.some(ja=>ja.name===r?(V=ja,!0):!1)?(V.type=
"esriFieldTypeOID",V.editable=!1,V.nullable=!1):w.unshift({alias:r,name:r,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const V of w){null==V.name&&(V.name=V.alias);null==V.alias&&(V.alias=V.name);if(!V.name)throw new f("feature-layer:invalid-field-name","field name is missing",{field:V});V.name===r&&(V.type="esriFieldTypeOID");if(!C.kebabDict.jsonValues.includes(V.type))throw new f("feature-layer:invalid-field-type",`invalid type for field "${V.name}"`,{field:V});}A={};for(var u of w)"esriFieldTypeOID"!==
u.type&&"esriFieldTypeGlobalID"!==u.type&&(Y=S.getFieldDefaultValue(u),void 0!==Y&&(A[u.name]=Y));this._fieldsIndex=new O(w);this._createDefaultAttributes=k.createDefaultAttributesFunction(A,r);L&&(L.startTimeField&&((u=this._fieldsIndex.get(L.startTimeField))?(L.startTimeField=u.name,u.type="esriFieldTypeDate"):L.startTimeField=null),L.endTimeField&&((u=this._fieldsIndex.get(L.endTimeField))?(L.endTimeField=u.name,u.type="esriFieldTypeDate"):L.endTimeField=null),L.trackIdField&&((u=this._fieldsIndex.get(L.trackIdField))?
L.trackIdField=u.name:(L.trackIdField=null,x.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:L}}))),L.startTimeField||L.endTimeField||(x.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:L}}),L=null));x={warnings:x,featureErrors:[],layerDefinition:{...H,drawingInfo:k.createDrawingInfo(M),templates:k.createDefaultTemplate(A),extent:N,geometryType:M,objectIdField:r,
fields:w,hasZ:I,hasM:z,timeInfo:L},assignedObjectIds:{}};this._queryEngine=new h.QueryEngine({fields:w,geometryType:M,hasM:z,hasZ:I,objectIdField:r,spatialReference:ia,featureStore:new W({geometryType:M,hasM:z,hasZ:I}),timeInfo:L,cacheSpatialQueries:!0});if(!y||!y.length)return this._nextObjectId=ha.initialObjectId,x;this._nextObjectId=ha.findLastObjectIdFromFeatures(r,y)+1;await J.checkProjectionSupport(y,ia);return this._loadInitialFeatures(x,y)};F.applyEdits=async function(L){const {spatialReference:x,
geometryType:y}=this._queryEngine;await Promise.all([q.loadGeometryEngineForSimplify(x,y),J.checkProjectionSupport(L.adds,x),J.checkProjectionSupport(L.updates,x)]);return this._applyEdits(L)};F.queryFeatures=function(L,x={}){return this._queryEngine.executeQuery(L,x.signal)};F.queryFeatureCount=function(L,x={}){return this._queryEngine.executeQueryForCount(L,x.signal)};F.queryObjectIds=function(L,x={}){return this._queryEngine.executeQueryForIds(L,x.signal)};F.queryExtent=function(L,x={}){return this._queryEngine.executeQueryForExtent(L,
x.signal)};F.querySnapping=function(L,x={}){return this._queryEngine.executeQueryForSnapping(L,x.signal)};F._inferLayerProperties=function(L,x){let y=void 0,A=void 0,w=null,z=null,I=null;for(const Y of L)if(L=Y.geometry,null!=L&&(w||(w=la.getJsonType(L)),z||(z=L.spatialReference),null==y&&(y=e(L)),null==A&&(A=p(L)),w&&z&&null!=y&&null!=A))break;if(x&&x.length){let Y=null;x.some(ia=>{const N="esriFieldTypeOID"===ia.type,M=!ia.type&&ia.name&&"objectid"===ia.name.toLowerCase();Y=ia;return N||M})&&(I=
Y.name)}return{geometryType:w,spatialReference:z,objectIdField:I,hasM:A,hasZ:y}};F._loadInitialFeatures=async function(L,x){const {geometryType:y,hasM:A,hasZ:w,objectIdField:z,spatialReference:I,featureStore:Y}=this._queryEngine,ia=[];for(const r of x){null!=r.uid&&(L.assignedObjectIds[r.uid]=-1);if(r.geometry&&y!==la.getJsonType(r.geometry)){L.featureErrors.push(q.createFeatureEditErrorResult("Incorrect geometry type."));continue}x=this._createDefaultAttributes();const u=q.mixAttributes(this._fieldsIndex,
x,r.attributes,!0,L.warnings);u?L.featureErrors.push(u):(this._assignObjectId(x,r.attributes,!0),r.attributes=x,null!=r.uid&&(L.assignedObjectIds[r.uid]=r.attributes[z]),null!=r.geometry&&(r.geometry=J.project(r.geometry,r.geometry.spatialReference,I)),ia.push(r))}Y.addMany(P.convertFromFeatures([],ia,y,w,A,z));const {fullExtent:N,timeExtent:M}=await this._queryEngine.fetchRecomputedExtents();L.layerDefinition.extent=N;if(M){const {start:r,end:u}=M;L.layerDefinition.timeInfo.timeExtent=[r,u]}return L};
F._applyEdits=async function(L){const {adds:x,updates:y,deletes:A}=L;L={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};x&&x.length&&this._applyAddEdits(L,x);y&&y.length&&this._applyUpdateEdits(L,y);if(A&&A.length){for(const I of A)L.deleteResults.push(q.createFeatureEditSuccessResult(I));this._queryEngine.featureStore.removeManyById(A)}const {fullExtent:w,timeExtent:z}=await this._queryEngine.fetchRecomputedExtents();return{extent:w,timeExtent:z,featureEditResults:L}};F._applyAddEdits=
function(L,x){const {addResults:y}=L,{geometryType:A,hasM:w,hasZ:z,objectIdField:I,spatialReference:Y,featureStore:ia}=this._queryEngine,N=[];for(const M of x){if(M.geometry&&A!==la.getJsonType(M.geometry)){y.push(q.createFeatureEditErrorResult("Incorrect geometry type."));continue}x=this._createDefaultAttributes();const r=q.mixAttributes(this._fieldsIndex,x,M.attributes);r?y.push(r):(this._assignObjectId(x,M.attributes),M.attributes=x,null!=M.uid&&(L.uidToObjectId[M.uid]=M.attributes[I]),null!=M.geometry&&
(x=M.geometry.spatialReference??Y,M.geometry=J.project(q.simplify(M.geometry,x),x,Y)),N.push(M),y.push(q.createFeatureEditSuccessResult(M.attributes[I])))}ia.addMany(P.convertFromFeatures([],N,A,z,w,I))};F._applyUpdateEdits=function({updateResults:L},x){const {geometryType:y,hasM:A,hasZ:w,objectIdField:z,spatialReference:I,featureStore:Y}=this._queryEngine;for(const N of x){const {attributes:M,geometry:r}=N;x=M&&M[z];if(null==x){L.push(q.createFeatureEditErrorResult(`Identifier field ${z} missing`));
continue}if(!Y.has(x)){L.push(q.createFeatureEditErrorResult(`Feature with object id ${x} missing`));continue}const u=P.convertToFeature(Y.getFeature(x),y,w,A);if(null!=r){if(y!==la.getJsonType(r)){L.push(q.createFeatureEditErrorResult("Incorrect geometry type."));continue}var ia=r.spatialReference??I;u.geometry=J.project(q.simplify(r,ia),ia,I)}if(M&&(ia=q.mixAttributes(this._fieldsIndex,u.attributes,M))){L.push(ia);continue}Y.add(P.convertFromFeature(u,y,w,A,z));L.push(q.createFeatureEditSuccessResult(x))}};
F._assignObjectId=function(L,x,y=!1){const A=this._queryEngine.objectIdField;y?x&&isFinite(x[A])?L[A]=x[A]:L[A]=this._nextObjectId++:L[A]=this._nextObjectId++};return m._createClass(v)}()});