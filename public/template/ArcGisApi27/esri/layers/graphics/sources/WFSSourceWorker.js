// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(k,e,ea,S,I,ba,R,K){function h(N){return{ok:!0,value:N}}function l(N){return{ok:!1,error:N}}function r(N){return null!=N&&!0===N.ok?N.value:null}function L(N){return null!=N&&!1===N.ok?N.error:null}let w=function(N){function f(y,O){var q=N.call(this,
{})||this;q._result=null;q._abortHandle=null;q.abort=()=>{q._abortController=I.abortMaybe(q._abortController)};q.remove=q.abort;q._abortController=new AbortController;const {signal:n}=q._abortController;q.promise=y(n);q.promise.then(z=>{q._result=h(z);q._cleanup()},z=>{q._result=l(z);q._cleanup()});q._abortHandle=ba.onAbort(O,q.abort);return q}e._inherits(f,N);var p=f.prototype;p.normalizeCtorArgs=function(){return{}};p.destroy=function(){this.abort()};p._cleanup=function(){this._abortHandle=I.removeMaybe(this._abortHandle);
this._abortController=null};e._createClass(f,[{key:"value",get:function(){return r(this._result)}},{key:"error",get:function(){return L(this._result)}},{key:"finished",get:function(){return null!=this._result}}]);return f}(S);ea.__decorate([R.property()],w.prototype,"value",null);ea.__decorate([R.property()],w.prototype,"error",null);ea.__decorate([R.property()],w.prototype,"finished",null);ea.__decorate([R.property()],w.prototype,"promise",void 0);ea.__decorate([R.property()],w.prototype,"_result",
void 0);w=ea.__decorate([K.subclass("esri.core.asyncUtils.ReactiveTask")],w);k.assertResult=function(N){if(!0===N.ok)return N.value;throw N.error;};k.createTask=function(N,f){return new w(N,f)};k.forEach=function(N,f,p){return ba.eachAlways(N.map((y,O)=>f.apply(p,[y,O])))};k.makeResultError=l;k.makeResultOk=h;k.map=async function(N,f,p){return(await ba.eachAlways(N.map((y,O)=>f.apply(p,[y,O])))).map(y=>y.value)};k.result=async function(N){if(null==N)return{ok:!1,error:Error("no promise provided")};
try{return h(await N)}catch(f){return l(f)}};k.resultError=L;k.resultOrAbort=async function(N){try{return h(await N)}catch(f){return ba.throwIfAbortError(f),l(f)}};k.resultValue=r;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l){function r(m,F){return m?F?4:3:F?3:2}function L(m,F,V,W){if(m){if(V)return F&&W?t:eb;if(F&&W)return c}else if(F&&W)return eb;return ib}function w({scale:m,translate:F},V){return Math.round((V-F[0])/m[0])}function N({scale:m,translate:F},V){return Math.round((F[1]-V)/m[1])}function f({scale:m,translate:F},V,W){return V*m[W]+F[W]}function p(m){m=m.coords;return{x:m[0],y:m[1]}}function y(m,F){m.coords[0]=F.x;m.coords[1]=F.y;return m}function O(m){m=m.coords;return{x:m[0],
y:m[1],z:m[2]}}function q(m,F){m.coords[0]=F.x;m.coords[1]=F.y;m.coords[2]=F.z;return m}function n(m){m=m.coords;return{x:m[0],y:m[1],m:m[2]}}function z(m,F){m.coords[0]=F.x;m.coords[1]=F.y;m.coords[2]=F.m;return m}function U(m){m=m.coords;return{x:m[0],y:m[1],z:m[2],m:m[3]}}function H(m,F){m.coords[0]=F.x;m.coords[1]=F.y;m.coords[2]=F.z;m.coords[3]=F.m;return m}function E(m,F){return m&&F?H:m?q:F?z:y}function G(m,F,V,W,ha){V=E(V,W);for(const {geometry:oa,attributes:qa}of F)F=null!=oa?V(new l,oa):
null,m.push(new K.OptimizedFeature(F,qa,null,ha?qa[ha]:void 0));return m}function A(m,F,V,W){for(const {geometry:ha,attributes:oa}of F)m.push({attributes:oa,geometry:null!=ha?C(ha,V,W):null});return m}function C(m,F,V){if(null==m)return null;const W=r(F,V),ha=[];for(let oa=0;oa<m.coords.length;oa+=W){const qa=[];for(let va=0;va<W;va++)qa.push(m.coords[oa+va]);ha.push(qa)}return F?V?{points:ha,hasZ:F,hasM:V}:{points:ha,hasZ:F}:V?{points:ha,hasM:V}:{points:ha}}function J(m,F,V,W,ha){V=r(V,W);for(const {geometry:oa,
attributes:qa}of F)F=null!=oa?ca(new l,oa,V):null,m.push(new K.OptimizedFeature(F,qa,null,ha?qa[ha]:void 0));return m}function ca(m,F,V=r(F.hasZ,F.hasM)){m.lengths[0]=F.points.length;const W=m.coords;let ha=0;for(const oa of F.points)for(F=0;F<V;F++)W[ha++]=oa[F];return m}function ja(m,F,V){if(!m)return null;const W=r(F,V),{coords:ha,lengths:oa}=m;m=[];let qa=0;for(const va of oa){const xa=[];for(let Ha=0;Ha<va;Ha++){const Ea=[];for(let Da=0;Da<W;Da++)Ea.push(ha[qa++]);xa.push(Ea)}m.push(xa)}return F?
V?{paths:m,hasZ:F,hasM:V}:{paths:m,hasZ:F}:V?{paths:m,hasM:V}:{paths:m}}function P(m,F,V,W,ha){V=r(V,W);for(const {geometry:oa,attributes:qa}of F)F=null!=oa?Q(new l,oa,V):null,m.push(new K.OptimizedFeature(F,qa,null,ha?qa[ha]:void 0));return m}function Q(m,F,V=r(F.hasZ,F.hasM)){const {lengths:W,coords:ha}=m;let oa=0;for(const qa of F.paths){for(const va of qa)for(F=0;F<V;F++)ha[oa++]=va[F];W.push(qa.length)}return m}function v(m,F,V){if(!m)return null;const W=r(F,V),{coords:ha,lengths:oa}=m;m=[];
let qa=0;for(const va of oa){const xa=[];for(let Ha=0;Ha<va;Ha++){const Ea=[];for(let Da=0;Da<W;Da++)Ea.push(ha[qa++]);xa.push(Ea)}m.push(xa)}return F?V?{rings:m,hasZ:F,hasM:V}:{rings:m,hasZ:F}:V?{rings:m,hasM:V}:{rings:m}}function x(m,F,V,W,ha){for(const {geometry:oa,centroid:qa,attributes:va}of F){F=null!=oa?Z(new l,oa,V,W):null;const xa=ha?va[ha]:void 0;null!=qa?m.push(new K.OptimizedFeature(F,va,y(new l,qa),xa)):m.push(new K.OptimizedFeature(F,va,null,xa))}return m}function Z(m,F,V=F.hasZ,W=F.hasM){return ka(m,
F.rings,V,W)}function ka(m,F,V,W){V=r(V,W);const {lengths:ha,coords:oa}=m;W=0;Oa(m);for(const qa of F){for(const va of qa)for(F=0;F<V;F++)oa[W++]=va[F];ha.push(qa.length)}return m}function na(m,F,V,W,ha,oa){Ta(m);if(!V){for(const qa of F)m.push(new K.OptimizedFeature(null,qa.attributes,null,oa?qa.attributes[oa]:void 0));return m}switch(V){case "esriGeometryPoint":return G(m,F,W,ha,oa);case "esriGeometryMultipoint":return J(m,F,W,ha,oa);case "esriGeometryPolyline":return P(m,F,W,ha,oa);case "esriGeometryPolygon":return x(m,
F,W,ha,oa);default:Ya.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${V}'`)),Ta(m)}return m}function sa(m,F,V,W){m=m&&("coords"in m?m:m.geometry);if(null==m)return null;switch(F){case "esriGeometryPoint":return F=p,V&&W?F=U:V?F=O:W&&(F=n),F(m);case "esriGeometryMultipoint":return C(m,V,W);case "esriGeometryPolyline":return ja(m,V,W);case "esriGeometryPolygon":return v(m,V,W);default:return Ya.error("convertToGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${F}'`)),
null}}function ta(m,F,V,W,ha){Ta(m);if(null==V){for(const qa of F)m.push({attributes:qa.attributes});return m}switch(V){case "esriGeometryPoint":V=p;W&&ha?V=U:W?V=O:ha&&(V=n);for(var oa of F){const {geometry:qa,attributes:va}=oa;W=null!=qa?V(qa):null;m.push({attributes:va,geometry:W})}break;case "esriGeometryMultipoint":return A(m,F,W,ha);case "esriGeometryPolyline":for(const {geometry:qa,attributes:va}of F)m.push({attributes:va,geometry:null!=qa?ja(qa,W,ha):null});break;case "esriGeometryPolygon":for(const {geometry:qa,
attributes:va,centroid:xa}of F)oa=null!=qa?v(qa,W,ha):null,null!=xa?(F=p(xa),m.push({attributes:va,centroid:F,geometry:oa})):m.push({attributes:va,geometry:oa});break;default:Ya.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${V}'`))}return m}function za(m,F,V,W,ha,oa,qa=V,va=W){Oa(m);if(null==F||!F.coords.length)return null;ha=fb[ha];const {coords:xa,lengths:Ha}=F;F=r(V,W);const Ea=r(V&&qa,W&&va);V=L(V,W,qa,va);if(!Ha.length)return V(m.coords,xa,0,0,w(oa,
xa[0]),N(oa,xa[1])),Oa(m,F,0),m;let Da,Sa=0,Ma,Qa=0;for(const Ra of Ha){if(Ra<ha)continue;let Ka=0;Ma=Qa;va=W=w(oa,xa[Sa]);Da=qa=N(oa,xa[Sa+1]);V(m.coords,xa,Ma,Sa,va,Da);Ka++;Sa+=F;Ma+=Ea;for(let Ua=1;Ua<Ra;Ua++,Sa+=F)if(va=w(oa,xa[Sa]),Da=N(oa,xa[Sa+1]),va!==W||Da!==qa)V(m.coords,xa,Ma,Sa,va-W,Da-qa),Ma+=Ea,Ka++,W=va,qa=Da;Ka>=ha&&(m.lengths.push(Ka),Qa=Ma)}Ta(m.coords,Qa);return m.coords.length?m:null}function Ba(m,F,V,W,ha,oa,qa){let va=W,xa=0;for(let Ea=oa+V;Ea<qa;Ea+=V){var Ha=F[Ea];const Da=
F[Ea+1],Sa=F[qa],Ma=F[qa+1];let Qa=F[oa],Ra=F[oa+1],Ka=Sa-Qa,Ua=Ma-Ra;if(0!==Ka||0!==Ua){const Wa=((Ha-Qa)*Ka+(Da-Ra)*Ua)/(Ka*Ka+Ua*Ua);1<Wa?(Qa=Sa,Ra=Ma):0<Wa&&(Qa+=Ka*Wa,Ra+=Ua*Wa)}Ka=Ha-Qa;Ua=Da-Ra;Ha=Ka*Ka+Ua*Ua;Ha>va&&(xa=Ea,va=Ha)}va>W&&(xa-oa>V&&Ba(m,F,V,W,ha,oa,xa),ha(m,F,m.length,xa,F[xa],F[xa+1]),qa-xa>V&&Ba(m,F,V,W,ha,xa,qa))}function Ca(m,F,V,W,ha){const {coords:oa,lengths:qa}=F;V=r(V,W);if(!oa.length)return m!==F&&Oa(m),m;S.assertIsSome(ha);const {originPosition:va,scale:xa,translate:Ha}=
ha;ha=aa;ha.originPosition=va;W=ha.scale;W[0]=xa[0]??1;W[1]=-(xa[1]??1);W[2]=xa[2]??1;W[3]=xa[3]??1;var Ea=ha.translate;Ea[0]=Ha[0]??0;Ea[1]=Ha[1]??0;Ea[2]=Ha[2]??0;Ea[3]=Ha[3]??0;if(!qa.length){for(W=0;W<V;++W)m.coords[W]=f(ha,oa[W],W);m!==F&&Oa(m,V,0);return m}Ea=0;for(let Sa=0;Sa<qa.length;Sa++){const Ma=qa[Sa];m.lengths[Sa]=Ma;for(var Da=0;Da<V;++Da)m.coords[Ea+Da]=f(ha,oa[Ea+Da],Da);Da=m.coords[Ea];let Qa=m.coords[Ea+1];Ea+=V;for(let Ra=1;Ra<Ma;Ra++,Ea+=V){Da+=oa[Ea]*W[0];Qa+=oa[Ea+1]*W[1];m.coords[Ea]=
Da;m.coords[Ea+1]=Qa;for(let Ka=2;Ka<V;++Ka)m.coords[Ea+Ka]=f(ha,oa[Ea+Ka],Ka)}}m!==F&&Oa(m,oa.length,qa.length);return m}function La(m,F,V,W){let ha=0,oa=m[W*F],qa=m[W*(F+1)];for(let va=1;va<V;va++){const xa=oa+m[W*(F+va)],Ha=qa+m[W*(F+va)+1],Ea=(xa-oa)*(Ha+qa);oa=xa;qa=Ha;ha+=Ea}return.5*ha}function Oa(m,F=0,V=0){Ta(m.lengths,V);Ta(m.coords,F)}function Ta(m,F=0){m.length!==F&&(m.length=F)}const Ya=ea.getLogger("esri.layers.graphics.featureConversionUtils"),fb={esriGeometryPoint:0,esriGeometryPolyline:2,
esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},ib=(m,F,V,W,ha,oa)=>{m[V]=ha;m[V+1]=oa},eb=(m,F,V,W,ha,oa)=>{m[V]=ha;m[V+1]=oa;m[V+2]=F[W+2]},c=(m,F,V,W,ha,oa)=>{m[V]=ha;m[V+1]=oa;m[V+2]=F[W+3]},t=(m,F,V,W,ha,oa)=>{m[V]=ha;m[V+1]=oa;m[V+2]=F[W+2];m[V+3]=F[W+3]},fa=[],B=[],aa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};k.convertFromFeature=function(m,F,V,W,ha){fa[0]=m;[m]=na(B,fa,F,V,W,ha);Ta(fa);Ta(B);return m};k.convertFromFeatureSet=function(m,F){const V=
new h,{hasM:W,hasZ:ha,features:oa,objectIdFieldName:qa,spatialReference:va,geometryType:xa,exceededTransferLimit:Ha,transform:Ea,fields:Da}=m;Da&&(V.fields=Da);V.geometryType=xa??null;V.objectIdFieldName=qa??F??null;V.spatialReference=va??null;if(!V.objectIdFieldName)return Ya.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),V;oa&&na(V.features,oa,xa,ha,W,V.objectIdFieldName);Ha&&(V.exceededTransferLimit=Ha);W&&(V.hasM=W);ha&&(V.hasZ=ha);Ea&&(V.transform=
Ea);return V};k.convertFromFeatures=na;k.convertFromGeometry=function(m,F,V){if(null==m)return null;const W=new l;"hasZ"in m&&null==F&&(F=m.hasZ);"hasM"in m&&null==V&&(V=m.hasM);if(R.isPoint(m))return E(null!=F?F:null!=m.z,null!=V?V:null!=m.m)(W,m);if(R.isPolygon(m))return Z(W,m,F,V);if(R.isPolyline(m))return Q(W,m,r(F,V));if(R.isMultipoint(m))return ca(W,m,r(F,V));Ya.error("convertFromGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${m}'`))};k.convertFromGraphics=function(m,
F,V,W,ha,oa){const qa=m.length;switch(V){case "esriGeometryPoint":G(m,F,W,ha,oa);break;case "esriGeometryMultipoint":J(m,F,W,ha,oa);break;case "esriGeometryPolyline":P(m,F,W,ha,oa);break;case "esriGeometryPolygon":x(m,F,W,ha,oa);break;default:Ya.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${V}'`))}for(W=0;W<F.length;W++)m[W+qa].geometryType=V,m[W+qa].insertAfter=F[W].insertAfter,m[W+qa].groupId=F[W].groupId;return m};k.convertFromMultipoint=ca;k.convertFromMultipointFeatures=
J;k.convertFromNestedArray=ka;k.convertFromPoint=function(m,F,V=E(null!=F.z,null!=F.m)){return V(m,F)};k.convertFromPointFeatures=G;k.convertFromPolygon=Z;k.convertFromPolyline=Q;k.convertFromPolylineFeatures=P;k.convertToFeature=function(m,F,V,W){B[0]=m;ta(fa,B,F,V,W);m=fa[0];Ta(fa);Ta(B);return m};k.convertToFeatureSet=function(m){const {objectIdFieldName:F,spatialReference:V,transform:W,fields:ha,hasM:oa,hasZ:qa,features:va,geometryType:xa,exceededTransferLimit:Ha,uniqueIdField:Ea,queryGeometry:Da,
queryGeometryType:Sa}=m;m=ta([],va,xa,qa,oa);const Ma=sa(Da,Sa,!1,!1);m={features:m,fields:ha,geometryType:xa,objectIdFieldName:F,spatialReference:V,uniqueIdField:Ea,queryGeometry:Ma};W&&(m.transform=W);Ha&&(m.exceededTransferLimit=Ha);oa&&(m.hasM=oa);qa&&(m.hasZ=qa);return m};k.convertToFeatures=ta;k.convertToGeometry=sa;k.convertToMultipoint=C;k.convertToMultipointFeatures=A;k.convertToPoint=function(m,F,V){return m?F?V?U(m):O(m):V?n(m):p(m):null};k.convertToPolygon=v;k.convertToPolyline=ja;k.deltaDecodeGeometry=
function(m,F){if(null==m)return null;const V=m.clone(),W=m.coords;m=m.lengths;let ha=0;for(let va=0;va<m.length;va++){const xa=m[va];var oa=W[F*ha],qa=W[F*ha+1];for(let Ha=1;Ha<xa;Ha++)oa+=W[F*(ha+Ha)],qa+=W[F*(ha+Ha)+1],V.coords[F*(ha+Ha)]=oa,V.coords[F*(ha+Ha)+1]=qa;ha+=xa}return V};k.deltaEncodeGeometry=function(m,F){const V=m.clone(),W=m.coords;m=m.lengths;let ha=0;for(let qa=0;qa<m.length;qa++){const va=m[qa];let xa=W[F*ha];var oa=W[F*ha+1];for(let Ha=1;Ha<va;Ha++){const Ea=W[F*(ha+Ha)],Da=W[F*
(ha+Ha)+1];oa=Da-oa;V.coords[F*(ha+Ha)]=Ea-xa;V.coords[F*(ha+Ha)+1]=oa;xa=Ea;oa=Da}ha+=va}return V};k.generalizeOptimizedGeometry=function(m,F,V,W,ha,oa,qa=V,va=W){Oa(m);if(!F||!F.coords.length)return null;ha=fb[ha];const {coords:xa,lengths:Ha}=F;F=r(V,W);const Ea=r(V&&qa,W&&va);V=L(V,W,qa,va);if(!Ha.length)return V(m.coords,xa,0,0,xa[0],xa[1]),Oa(m,F,0),m;W=0;oa*=oa;for(const Da of Ha){if(Da<ha){W+=Da*F;continue}qa=m.coords.length/Ea;va=W;const Sa=W+(Da-1)*F;V(m.coords,xa,m.coords.length,va,xa[va],
xa[va+1]);Ba(m.coords,xa,F,oa,V,va,Sa);V(m.coords,xa,m.coords.length,Sa,xa[Sa],xa[Sa+1]);va=m.coords.length/Ea-qa;va>=ha?m.lengths.push(va):Ta(m.coords,qa*Ea);W+=Da*F}return m.coords.length?m:null};k.getBoundsOptimizedGeometry=function(m,F,V,W){if(null==F||!F.coords||!F.coords.length)return null;V=r(V,W);let ha=W=Number.POSITIVE_INFINITY,oa=Number.NEGATIVE_INFINITY,qa=Number.NEGATIVE_INFINITY;if(F&&F.coords){F=F.coords;for(let va=0;va<F.length;va+=V){const xa=F[va],Ha=F[va+1];W=Math.min(W,xa);oa=
Math.max(oa,xa);ha=Math.min(ha,Ha);qa=Math.max(qa,Ha)}}I.is(m)?I.fromRectValues(m,W,ha,oa,qa):ba.fromValues(W,ha,oa,qa,m);return m};k.getQuantizedArea=function(m,F){const {coords:V,lengths:W}=m;let ha=m=0;for(let oa=0;oa<W.length;oa++){const qa=W[oa];ha+=La(V,m,qa,F);m+=qa}return Math.abs(ha)};k.getQuantizedBoundsOptimizedGeometry=function(m,F,V,W){V=r(V,W);const {lengths:ha,coords:oa}=F;W=F=Number.POSITIVE_INFINITY;let qa=Number.NEGATIVE_INFINITY,va=Number.NEGATIVE_INFINITY,xa=0;for(const Ha of ha){let Ea=
oa[xa],Da=oa[xa+1];F=Math.min(Ea,F);W=Math.min(Da,W);qa=Math.max(Ea,qa);va=Math.max(Da,va);xa+=V;for(let Sa=1;Sa<Ha;Sa++,xa+=V){const Ma=oa[xa],Qa=oa[xa+1];Ea+=Ma;Da+=Qa;0>Ma&&(F=Math.min(F,Ea));0<Ma&&(qa=Math.max(qa,Ea));0>Qa?W=Math.min(W,Da):0<Qa&&(va=Math.max(va,Da))}}m[0]=F;m[1]=W;m[2]=qa;m[3]=va;return m};k.getSignedQuantizedRingArea=La;k.quantizeOptimizedFeatureSet=function(m,F){const {geometryType:V,features:W,hasM:ha,hasZ:oa}=F;if(!m)return F;for(let qa=0;qa<W.length;qa++){const va=W[qa],
xa=va.weakClone();xa.geometry=new l;za(xa.geometry,va.geometry,ha,oa,V,m);va.centroid&&(xa.centroid=new l,za(xa.centroid,va.centroid,ha,oa,"esriGeometryPoint",m));W[qa]=xa}F.transform=m;return F};k.quantizeOptimizedGeometry=za;k.quantizeX=w;k.quantizeY=N;k.removeCollinearVectices=function(m,F,V,W,ha){if(!F||!F.coords||!F.coords.length)return null;V=fb[V];const {coords:oa,lengths:qa}=F;F=L(W,ha,W,ha);W=r(W,ha);let va=ha=0,xa=0,Ha=0;for(const Sa of qa){va=Ha;F(m.coords,oa,va,ha,oa[ha],oa[ha+1]);ha+=
W;var Ea=oa[ha];let Ma=oa[ha+1],Qa=Ea,Ra=Ma;var Da=Ma/Ea;va+=W;F(m.coords,oa,va,ha,Qa,Ra);ha+=W;for(let Ka=2;Ka<Sa;Ka++){Ea=oa[ha];Ma=oa[ha+1];const Ua=Ma/Ea,Wa=Da===Ua||!isFinite(Da)&&!isFinite(Ua);Da=Wa&&isFinite(Ua)?0<=Da&&0<=Ua||0>=Da&&0>=Ua:0<=Ra&&0<=Ma||0>=Ra&&0>=Ma;Wa&&Da?(Qa+=Ea,Ra+=Ma):(Qa=Ea,Ra=Ma,va+=W);F(m.coords,oa,va,ha,Qa,Ra);ha+=W;Da=Ua}va+=W;Ea=(va-Ha)/W;Ea>=V&&(m.lengths[xa]=Ea,Ha=va,xa++)}m.coords.length>Ha&&(m.coords.length=Ha);m.lengths.length>xa&&(m.lengths.length=xa);return m.coords.length&&
m.lengths.length?m:null};k.removeZMValues=function(m,F,V,W,ha,oa){Oa(m);m.lengths.push(...F.lengths);if(V===ha&&W===oa)for(var qa=0;qa<F.coords.length;qa++)m.coords.push(F.coords[qa]);else for(qa=r(V,W),V=L(V,W,ha,oa),F=F.coords,W=0;W<F.length;W+=qa)V(m.coords,F,m.coords.length,W,F[W],F[W+1]);return m};k.unquantizeOptimizedFeatureSet=function(m){const {transform:F,features:V,hasM:W,hasZ:ha}=m;if(!F)return m;for(const oa of V)null!=oa.geometry&&Ca(oa.geometry,oa.geometry,W,ha,F),null!=oa.centroid&&
Ca(oa.centroid,oa.centroid,W,ha,F);m.transform=null;return m};k.unquantizeOptimizedGeometry=Ca;k.unquantizeValue=f;k.unquantizeX=function(m,F){return f(m,F,0)};k.unquantizeY=function(m,F){return f(m,-F,1)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],function(k,e,ea){function S(f=w){return[f[0],f[1],f[2],f[3],f[4],f[5]]}function I(f,p,y,O,q,n,z=S()){z[0]=f;z[1]=p;z[2]=y;z[3]=O;z[4]=
q;z[5]=n;return z}function ba(f){return f[0]>=f[3]?0:f[3]-f[0]}function R(f){return f[1]>=f[4]?0:f[4]-f[1]}function K(f){return f[2]>=f[5]?0:f[5]-f[2]}function h(f,p){return Math.max(p[0],f[0])<=Math.min(p[3],f[3])&&Math.max(p[1],f[1])<=Math.min(p[4],f[4])&&Math.max(p[2],f[2])<=Math.min(p[5],f[5])}function l(f,p){f[0]=p[0];f[1]=p[1];f[2]=p[2];f[3]=p[3];f[4]=p[4];f[5]=p[5];return f}function r(f){return 6===f.length}const L=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],w=[0,0,0,0,0,0],
N=S();k.NEGATIVE_INFINITY=L;k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.ZERO=w;k.allFinite=function(f){for(let p=0;6>p;p++)if(!isFinite(f[p]))return!1;return!0};k.center=function(f,p=[0,0,0]){p[0]=f[0]+ba(f)/2;p[1]=f[1]+R(f)/2;p[2]=f[2]+K(f)/2;return p};k.contains=function(f,p){return p[0]>=f[0]&&p[1]>=f[1]&&p[2]>=f[2]&&p[3]<=f[3]&&p[4]<=f[4]&&p[5]<=f[5]};k.containsPoint=function(f,p){return p[0]>=f[0]&&p[1]>=f[1]&&p[2]>=f[2]&&p[0]<=f[3]&&p[1]<=f[4]&&p[2]<=f[5]};
k.containsPointWithMargin=function(f,p,y){return p[0]>=f[0]-y&&p[1]>=f[1]-y&&p[2]>=f[2]-y&&p[0]<=f[3]+y&&p[1]<=f[4]+y&&p[2]<=f[5]+y};k.create=S;k.depth=R;k.diameter=function(f){const p=ba(f),y=K(f);f=R(f);return Math.sqrt(p*p+y*y+f*f)};k.empty=function(f){return f?l(f,L):S(L)};k.equals=function(f,p,y){if(null==f||null==p)return f===p;if(!r(f)||!r(p))return!1;if(y)for(let O=0;O<f.length;O++){if(!y(f[O],p[O]))return!1}else for(y=0;y<f.length;y++)if(f[y]!==p[y])return!1;return!0};k.expandWithAABB=function(f,
p){f[0]=Math.min(f[0],p[0]);f[1]=Math.min(f[1],p[1]);f[2]=Math.min(f[2],p[2]);f[3]=Math.max(f[3],p[3]);f[4]=Math.max(f[4],p[4]);f[5]=Math.max(f[5],p[5])};k.expandWithBuffer=function(f,p,y=0,O=p.length/3){let q=f[0],n=f[1],z=f[2],U=f[3],H=f[4],E=f[5];for(let G=0;G<O;G++)q=Math.min(q,p[y+3*G]),n=Math.min(n,p[y+3*G+1]),z=Math.min(z,p[y+3*G+2]),U=Math.max(U,p[y+3*G]),H=Math.max(H,p[y+3*G+1]),E=Math.max(E,p[y+3*G+2]);f[0]=q;f[1]=n;f[2]=z;f[3]=U;f[4]=H;f[5]=E};k.expandWithNestedArray=function(f,p,y){const O=
p.length;let q=f[0],n=f[1],z=f[2],U=f[3],H=f[4],E=f[5];if(y)for(y=0;y<O;y++){var G=p[y];q=Math.min(q,G[0]);n=Math.min(n,G[1]);z=Math.min(z,G[2]);U=Math.max(U,G[0]);H=Math.max(H,G[1]);E=Math.max(E,G[2])}else for(y=0;y<O;y++)G=p[y],q=Math.min(q,G[0]),n=Math.min(n,G[1]),U=Math.max(U,G[0]),H=Math.max(H,G[1]);f[0]=q;f[1]=n;f[2]=z;f[3]=U;f[4]=H;f[5]=E};k.expandWithOffset=function(f,p,y,O){f[0]=Math.min(f[0],f[0]+p);f[3]=Math.max(f[3],f[3]+p);f[1]=Math.min(f[1],f[1]+y);f[4]=Math.max(f[4],f[4]+y);f[2]=Math.min(f[2],
f[2]+O);f[5]=Math.max(f[5],f[5]+O)};k.expandWithRect=function(f,p){f[0]=Math.min(f[0],p[0]);f[1]=Math.min(f[1],p[1]);f[3]=Math.max(f[3],p[2]);f[4]=Math.max(f[4],p[3])};k.expandWithVec3=function(f,p){f[0]=Math.min(f[0],p[0]);f[1]=Math.min(f[1],p[1]);f[2]=Math.min(f[2],p[2]);f[3]=Math.max(f[3],p[0]);f[4]=Math.max(f[4],p[1]);f[5]=Math.max(f[5],p[2])};k.fromExtent=function(f,p=S()){p[0]=f.xmin;p[1]=f.ymin;p[2]=f.hasZ?f.zmin:-Infinity;p[3]=f.xmax;p[4]=f.ymax;p[5]=f.hasZ?f.zmax:Infinity;return p};k.fromMinMax=
function(f,p,y=S()){y[0]=f[0];y[1]=f[1];y[2]=f[2];y[3]=p[0];y[4]=p[1];y[5]=p[2];return y};k.fromRect=function(f,p){f[0]=p[0];f[1]=p[1];f[2]=Number.NEGATIVE_INFINITY;f[3]=p[2];f[4]=p[3];f[5]=Number.POSITIVE_INFINITY;return f};k.fromRectValues=function(f,p,y,O,q){f[0]=p;f[1]=y;f[2]=Number.NEGATIVE_INFINITY;f[3]=O;f[4]=q;f[5]=Number.POSITIVE_INFINITY;return f};k.fromValues=I;k.getMax=function(f,p){p[0]=f[3];p[1]=f[4];p[2]=f[5];return p};k.getMin=function(f,p){p[0]=f[0];p[1]=f[1];p[2]=f[2];return p};
k.height=K;k.intersects=h;k.intersectsClippingArea=function(f,p){return null==p?!0:h(f,p)};k.is=r;k.isPoint=function(f){return 0===ba(f)&&0===R(f)&&0===K(f)};k.maximumDimension=function(f){return Math.max(ba(f),K(f),R(f))};k.offset=function(f,p,y,O,q=f){q[0]=f[0]+p;q[1]=f[1]+y;q[2]=f[2]+O;q[3]=f[3]+p;q[4]=f[4]+y;q[5]=f[5]+O;return q};k.scale=function(f,p,y=f){const O=f[0]+ba(f)/2,q=f[1]+R(f)/2,n=f[2]+K(f)/2;y[0]=O+(f[0]-O)*p;y[1]=q+(f[1]-q)*p;y[2]=n+(f[2]-n)*p;y[3]=O+(f[3]-O)*p;y[4]=q+(f[4]-q)*p;
y[5]=n+(f[5]-n)*p;return y};k.set=l;k.setMax=function(f,p,y=f){y[3]=p[0];y[4]=p[1];y[5]=p[2];y!==f&&(y[0]=f[0],y[1]=f[1],y[2]=f[2]);return f};k.setMin=function(f,p,y=f){y[0]=p[0];y[1]=p[1];y[2]=p[2];y!==f&&(y[3]=f[3],y[4]=f[4],y[5]=f[5]);return y};k.size=function(f,p=[0,0,0]){p[0]=ba(f);p[1]=R(f);p[2]=K(f);return p};k.toExtent=function(f,p){return isFinite(f[2])||isFinite(f[5])?new e({xmin:f[0],xmax:f[3],ymin:f[1],ymax:f[4],zmin:f[2],zmax:f[5],spatialReference:p}):new e({xmin:f[0],xmax:f[3],ymin:f[1],
ymax:f[4],spatialReference:p})};k.toRect=function(f,p){p||(p=ea.create());p[0]=f[0];p[1]=f[1];p[2]=f[3];p[3]=f[4];return p};k.width=ba;k.wrap=function(f,p,y,O,q,n){return I(f,p,y,O,q,n,N)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(k,e){let ea=function(){function I(ba=null,R={},K,h){this.geometry=ba;this.attributes=R;this.centroid=K;this.objectId=h;this.geohashY=
this.geohashX=this.displayId=0}I.prototype.weakClone=function(){const ba=new I(this.geometry,this.attributes,this.centroid,this.objectId);ba.displayId=this.displayId;ba.geohashX=this.geohashX;ba.geohashY=this.geohashY;return ba};return e._createClass(I)}(),S=function(I){function ba(){return I.apply(this,arguments)||this}e._inherits(ba,I);return e._createClass(ba)}(ea);k.OptimizedFeature=ea;k.OptimizedFeatureWithGeometry=S;k.hasGeometry=function(I){return!(null==I.geometry||!I.geometry.coords||!I.geometry.coords.length)};
Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){return function(){function e(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=
null}e.prototype.weakClone=function(){const ea=new e;ea.objectIdFieldName=this.objectIdFieldName;ea.globalIdFieldName=this.globalIdFieldName;ea.geohashFieldName=this.geohashFieldName;ea.geometryProperties=this.geometryProperties;ea.geometryType=this.geometryType;ea.spatialReference=this.spatialReference;ea.hasZ=this.hasZ;ea.hasM=this.hasM;ea.features=this.features;ea.fields=this.fields;ea.transform=this.transform;ea.exceededTransferLimit=this.exceededTransferLimit;ea.uniqueIdField=this.uniqueIdField;
ea.queryGeometry=this.queryGeometry;ea.queryGeometryType=this.queryGeometryType;return ea};return k._createClass(e)}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){return function(){function e(S=[],I=[],ba=!1){this.lengths=S??[];this.coords=I??[];this.hasIndeterminateRingOrder=ba}e.fromRect=function(S){const [I,ba,R,K]=S;S=R-I;const h=K-ba;return new e([5],[I,ba,S,0,0,h,-S,0,0,-h])};var ea=e.prototype;ea.forEachVertex=function(S){let I=
0;this.lengths.length||S(this.coords[0],this.coords[1]);for(let ba=0;ba<this.lengths.length;ba++){const R=this.lengths[ba];for(let K=0;K<R;K++)S(this.coords[2*(K+I)],this.coords[2*(K+I)+1]);I+=R}};ea.clone=function(S){return S?(S.set(this.coords),new e(this.lengths.slice(),S,this.hasIndeterminateRingOrder)):new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};k._createClass(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},
{key:"size",get:function(){return this.lengths.reduce((S,I)=>S+I)}}]);return e}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),function(k,e,ea,S,I,ba,R,K,h,l){const r=I.create();return function(){function L(N){this.geometryInfo=
N;this._boundsStore=new K.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ea;this.featureAdapter=h.optimizedFeatureQueryEngineAdapter}var w=L.prototype;w.getFullExtent=function(N){if(null==this.fullBounds)return null;const [f,p,y,O]=this.fullBounds;return{xmin:f,ymin:p,xmax:y,ymax:O,spatialReference:l.cleanFromGeometryEngine(N)}};w.add=function(N){this._add(N);this._emitChanged()};w.addMany=function(N){for(const f of N)this._add(f);this._emitChanged()};w.clear=function(){this._featuresById.clear();
this._boundsStore.clear();this._emitChanged()};w.removeById=function(N){N=this._featuresById.get(N);if(!N)return null;this._remove(N);this._emitChanged();return N};w.removeManyById=function(N){this._boundsStore.invalidateIndex();for(const f of N)(N=this._featuresById.get(f))&&this._remove(N);this._emitChanged()};w.forEachBounds=function(N,f){for(const p of N)(N=this._boundsStore.get(p.objectId))&&f(I.fromRect(r,N))};w.getFeature=function(N){return this._featuresById.get(N)};w.has=function(N){return this._featuresById.has(N)};
w.forEach=function(N){this._featuresById.forEach(f=>N(f))};w.forEachInBounds=function(N,f){this._boundsStore.forEachInBounds(N,p=>{f(this._featuresById.get(p))})};w.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};w.sweep=function(){let N=!1;this._featuresById.forEach((f,p)=>{this._markedIds.has(p)||(N=!0,this._remove(f))});this._markedIds.clear();N&&this._emitChanged()};w._emitChanged=function(){this.events.emit("changed",void 0)};w._add=function(N){if(N){var f=
N.objectId;if(null==f)S.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature","feature id is missing",{feature:N}));else{var p=this._featuresById.get(f);this._markedIds.add(f);if(p){N.displayId=p.displayId;var y=this._boundsStore.get(f);this._boundsStore.delete(f)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(N);null!=N.geometry&&N.geometry.coords&&N.geometry.coords.length?(y=R.getBoundsOptimizedGeometry(null!=y?y:ba.create(),N.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),null!=y&&this._boundsStore.set(f,y)):this._boundsStore.set(f,null);this._featuresById.set(f,N)}}};w._remove=function(N){if(null!=this.onFeatureRemove)this.onFeatureRemove(N);const f=N.objectId;this._markedIds.delete(f);this._boundsStore.delete(f);this._featuresById.delete(f);return N};k._createClass(L,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let N=0;this._featuresById.forEach(f=>{null!=f.geometry&&f.geometry.coords&&(N+=f.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:N/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return L}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(k,e,ea,S,I){let ba=function(){function R(){this._emitter=new R.EventEmitter(this)}var K=R.prototype;K.emit=function(h,l){return this._emitter.emit(h,l)};K.on=function(h,l){return this._emitter.on(h,l)};K.once=function(h,l){return this._emitter.once(h,l)};K.hasEventListener=function(h){return this._emitter.hasEventListener(h)};return k._createClass(R)}();(function(R){let K=function(){function l(L=null){this._target=L;this._listenersMap=
null}var r=l.prototype;r.clear=function(){this._listenersMap?.clear();this._listenersMap=null};r.destroy=function(){this.clear()};r.emit=function(L,w){L=this._listenersMap&&this._listenersMap.get(L);if(!L)return!1;const N=this._target||this;[...L].forEach(f=>{f.call(N,w)});return 0<L.length};r.on=function(L,w){if(Array.isArray(L)){var N=L.map(f=>this.on(f,w));return S.handlesGroup(N)}if(L.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);N=this._listenersMap.get(L)||[];N.push(w);this._listenersMap.set(L,N);return{remove:()=>{const f=this._listenersMap&&this._listenersMap.get(L)||[],p=f.indexOf(w);0<=p&&f.splice(p,1)}}};r.once=function(L,w){const N=this.on(L,f=>{N.remove();w.call(null,f)});return N};r.hasEventListener=function(L){L=this._listenersMap&&this._listenersMap.get(L);return null!=L&&0<L.length};return k._createClass(l)}();R.EventEmitter=K;R.EventedMixin=l=>{l=function(r){function L(){var N=
r.apply(this,arguments)||this;N._emitter=new K;return N}k._inherits(L,r);var w=L.prototype;w.destroy=function(){this._emitter.clear()};w.emit=function(N,f){return this._emitter.emit(N,f)};w.on=function(N,f){return this._emitter.on(N,f)};w.once=function(N,f){return this._emitter.once(N,f)};w.hasEventListener=function(N){return this._emitter.hasEventListener(N)};return k._createClass(L)}(l);return l=e.__decorate([I.subclass("esri.core.Evented")],l)};let h=function(l){function r(){var w=l.apply(this,
arguments)||this;w._emitter=new ba.EventEmitter(k._assertThisInitialized(w));return w}k._inherits(r,l);var L=r.prototype;L.destroy=function(){this._emitter.clear()};L.emit=function(w,N){return this._emitter.emit(w,N)};L.on=function(w,N){return this._emitter.on(w,N)};L.once=function(w,N){return this._emitter.once(w,N)};L.hasEventListener=function(w){return this._emitter.hasEventListener(w)};return k._createClass(r)}(ea);h=e.__decorate([I.subclass("esri.core.Evented")],h);R.EventedAccessor=h})(ba||
(ba={}));return ba})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(k,e,ea,S,I){function ba(h,l,r){R.minX=l[0];R.minY=l[1];R.maxX=l[2];R.maxY=l[3];h.search(R,r)}const R={minX:0,minY:0,maxX:0,maxY:0};let K=function(){function h(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;
this._index=new S.PooledRBush(9,ea("esri-csp-restrictions")?r=>({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const r=Array(this._idByBounds.size);let L=0;this._idByBounds.forEach((w,N)=>{r[L++]=N});this._indexInvalid=!1;this._index.clear();this._index.load(r)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(r=>this._idByBounds.has(r))))),this._boundsToLoad.length=0)}}var l=h.prototype;
l.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};l.delete=function(r){const L=this._boundsById.get(r);this._boundsById.delete(r);L&&(this._idByBounds.delete(L),this._indexInvalid||this._index.remove(L))};l.forEachInBounds=function(r,L){this._loadIndex();ba(this._index,r,w=>L(this._idByBounds.get(w)))};l.get=function(r){return this._boundsById.get(r)};l.has=function(r){return this._boundsById.has(r)};l.invalidateIndex=
function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};l.set=function(r,L){if(!this._indexInvalid){const w=this._boundsById.get(r);w&&(this._index.remove(w),this._idByBounds.delete(w))}this._boundsById.set(r,L);L&&(this._idByBounds.set(L,r),this._indexInvalid||(this._boundsToLoad.push(L),5E4<this._boundsToLoad.length&&this._loadIndex()))};e._createClass(h,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const r=I.empty();for(const L of this._boundsById.values())L&&
(r[0]=Math.min(L[0],r[0]),r[1]=Math.min(L[1],r[1]),r[2]=Math.max(L[2],r[2]),r[3]=Math.max(L[3],r[3]));return r}},{key:"valid",get:function(){return!this._indexInvalid}}]);return h}();k.BoundsStore=K;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(k,e,ea,S,I,ba){function R(G,A){K(G,0,G.children.length,
A,G)}function K(G,A,C,J,ca){ca||(ca=new H([]));ca.minX=Infinity;ca.minY=Infinity;ca.maxX=-Infinity;ca.maxY=-Infinity;for(let ja=A,P;ja<C;ja++)P=G.children[ja],h(ca,G.leaf?J(P):P);return ca}function h(G,A){G.minX=Math.min(G.minX,A.minX);G.minY=Math.min(G.minY,A.minY);G.maxX=Math.max(G.maxX,A.maxX);G.maxY=Math.max(G.maxY,A.maxY)}function l(G,A){return G.minX-A.minX}function r(G,A){return G.minY-A.minY}function L(G){return(G.maxX-G.minX)*(G.maxY-G.minY)}function w(G){return G.maxX-G.minX+(G.maxY-G.minY)}
function N(G,A){return G.minX<=A.minX&&G.minY<=A.minY&&A.maxX<=G.maxX&&A.maxY<=G.maxY}function f(G,A){return A.minX<=G.maxX&&A.minY<=G.maxY&&A.maxX>=G.minX&&A.maxY>=G.minY}function p(G,A,C,J,ca){for(A=[A,C];A.length;){C=S.assumeNonNull(A.pop());const ja=S.assumeNonNull(A.pop());if(C-ja<=J)continue;const P=ja+Math.ceil((C-ja)/J/2)*J;ba.quickselect(G,P,ja,C,ca);A.push(ja,P,P,C)}}let y=function(){function G(C=9,J){this._compareMinX=l;this._compareMinY=r;this._toBBox=ca=>ca;this._maxEntries=Math.max(4,
C||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));J&&("function"===typeof J?this._toBBox=J:this._initFormat(J));this.clear()}var A=G.prototype;A.destroy=function(){this.clear();O.prune();q.prune();n.prune();z.prune()};A.all=function(C){this._all(this._data,C)};A.search=function(C,J){let ca=this._data;const ja=this._toBBox;if(f(C,ca))for(O.clear();ca;){for(let P=0,Q=ca.children.length;P<Q;P++){const v=ca.children[P],x=ca.leaf?ja(v):v;f(C,x)&&(ca.leaf?J(v):N(C,x)?this._all(v,J):O.push(v))}ca=
O.pop()}};A.collides=function(C){let J=this._data;const ca=this._toBBox;if(!f(C,J))return!1;for(O.clear();J;){for(let ja=0,P=J.children.length;ja<P;ja++){const Q=J.children[ja],v=J.leaf?ca(Q):Q;if(f(C,v)){if(J.leaf||N(C,v))return!0;O.push(Q)}}J=O.pop()}return!1};A.load=function(C){if(!C.length)return this;if(C.length<this._minEntries){for(let J=0,ca=C.length;J<ca;J++)this.insert(C[J]);return this}C=this._build(C.slice(0,C.length),0,C.length-1,0);if(this._data.children.length)if(this._data.height===
C.height)this._splitRoot(this._data,C);else{if(this._data.height<C.height){const J=this._data;this._data=C;C=J}this._insert(C,this._data.height-C.height-1,!0)}else this._data=C;return this};A.insert=function(C){C&&this._insert(C,this._data.height-1);return this};A.clear=function(){this._data=new H([]);return this};A.remove=function(C){if(!C)return this;let J=this._data,ca=null,ja=0,P=!1,Q;const v=this._toBBox(C);n.clear();for(z.clear();J||0<n.length;){J||(J=S.assumeNonNull(n.pop()),ca=n.data[n.length-
1],ja=z.pop()??0,P=!0);if(J.leaf&&(Q=ea.indexOf(J.children,C,J.children.length,J.indexHint),-1!==Q)){J.children.splice(Q,1);n.push(J);this._condense(n);break}P||J.leaf||!N(J,v)?ca?(ja++,J=ca.children[ja],P=!1):J=null:(n.push(J),z.push(ja),ja=0,ca=J,J=J.children[0])}return this};A.toJSON=function(){return this._data};A.fromJSON=function(C){this._data=C;return this};A._all=function(C,J){for(q.clear();C;){if(!0===C.leaf)for(const ca of C.children)J(ca);else q.pushArray(C.children);C=q.pop()??null}};
A._build=function(C,J,ca,ja){var P=ca-J+1,Q=this._maxEntries;if(P<=Q)return C=new H(C.slice(J,ca+1)),R(C,this._toBBox),C;ja||(ja=Math.ceil(Math.log(P)/Math.log(Q)),Q=Math.ceil(P/Q**(ja-1)));const v=new E([]);v.height=ja;P=Math.ceil(P/Q);Q=P*Math.ceil(Math.sqrt(Q));for(p(C,J,ca,Q,this._compareMinX);J<=ca;J+=Q){const x=Math.min(J+Q-1,ca);p(C,J,x,P,this._compareMinY);for(let Z=J;Z<=x;Z+=P)v.children.push(this._build(C,Z,Math.min(Z+P-1,x),ja-1))}R(v,this._toBBox);return v};A._chooseSubtree=function(C,
J,ca,ja){for(;;){ja.push(J);if(!0===J.leaf||ja.length-1===ca)break;let P=Infinity,Q=Infinity,v=void 0;for(let x=0,Z=J.children.length;x<Z;x++){const ka=J.children[x],na=L(ka),sa=(Math.max(ka.maxX,C.maxX)-Math.min(ka.minX,C.minX))*(Math.max(ka.maxY,C.maxY)-Math.min(ka.minY,C.minY))-na;sa<Q?(Q=sa,P=na<P?na:P,v=ka):sa===Q&&na<P&&(P=na,v=ka)}J=v||J.children[0]}return J};A._insert=function(C,J,ca){var ja=this._toBBox;ca=ca?C:ja(C);n.clear();ja=this._chooseSubtree(ca,this._data,J,n);ja.children.push(C);
for(h(ja,ca);0<=J;)if(n.data[J].children.length>this._maxEntries)this._split(n,J),J--;else break;this._adjustParentBBoxes(ca,n,J)};A._split=function(C,J){const ca=C.data[J];var ja=ca.children.length;const P=this._minEntries;this._chooseSplitAxis(ca,P,ja);(ja=this._chooseSplitIndex(ca,P,ja))?(ja=ca.children.splice(ja,ca.children.length-ja),ja=ca.leaf?new H(ja):new E(ja),ja.height=ca.height,R(ca,this._toBBox),R(ja,this._toBBox),J?C.data[J-1].children.push(ja):this._splitRoot(ca,ja)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};
A._splitRoot=function(C,J){this._data=new E([C,J]);this._data.height=C.height+1;R(this._data,this._toBBox)};A._chooseSplitIndex=function(C,J,ca){let ja,P,Q=void 0;ja=P=Infinity;for(let x=J;x<=ca-J;x++){var v=K(C,0,x,this._toBBox);const Z=K(C,x,ca,this._toBBox),ka=Math.max(0,Math.min(v.maxX,Z.maxX)-Math.max(v.minX,Z.minX))*Math.max(0,Math.min(v.maxY,Z.maxY)-Math.max(v.minY,Z.minY));v=L(v)+L(Z);ka<ja?(ja=ka,Q=x,P=v<P?v:P):ka===ja&&v<P&&(P=v,Q=x)}return Q};A._chooseSplitAxis=function(C,J,ca){const ja=
C.leaf?this._compareMinX:l,P=C.leaf?this._compareMinY:r,Q=this._allDistMargin(C,J,ca,ja);J=this._allDistMargin(C,J,ca,P);Q<J&&C.children.sort(ja)};A._allDistMargin=function(C,J,ca,ja){C.children.sort(ja);ja=this._toBBox;var P=K(C,0,J,ja);const Q=K(C,ca-J,ca,ja);let v=w(P)+w(Q);for(let x=J;x<ca-J;x++){const Z=C.children[x];h(P,C.leaf?ja(Z):Z);v+=w(P)}for(ca=ca-J-1;ca>=J;ca--)P=C.children[ca],h(Q,C.leaf?ja(P):P),v+=w(Q);return v};A._adjustParentBBoxes=function(C,J,ca){for(;0<=ca;ca--)h(J.data[ca],C)};
A._condense=function(C){for(let J=C.length-1;0<=J;J--){const ca=C.data[J];if(0===ca.children.length)if(0<J){const ja=C.data[J-1],P=ja.children;P.splice(ea.indexOf(P,ca,P.length,ja.indexHint),1)}else this.clear();else R(ca,this._toBBox)}};A._initFormat=function(C){const J=["return a"," - b",";"];this._compareMinX=new Function("a","b",J.join(C[0]));this._compareMinY=new Function("a","b",J.join(C[1]));this._toBBox=new Function("a","return {minX: a"+C[0]+", minY: a"+C[1]+", maxX: a"+C[2]+", maxY: a"+
C[3]+"};")};return e._createClass(G)}();const O=new I,q=new I,n=new I,z=new I({deallocator:void 0});I=e._createClass(function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity});let U=function(G){function A(){var C=G.apply(this,arguments)||this;C.height=1;C.indexHint=new ea.PositionHint;return C}e._inherits(A,G);return e._createClass(A)}(I),H=function(G){function A(C){var J=G.call(this)||this;J.children=C;J.leaf=!0;return J}e._inherits(A,G);return e._createClass(A)}(U),E=function(G){function A(C){var J=
G.call(this)||this;J.children=C;J.leaf=!1;return J}e._inherits(A,G);return e._createClass(A)}(U);k.BBox=I;k.PooledRBush=y;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(k,e){var ea={exports:{}};ea.exports;(function(S){(function(I){I=I();void 0!==I&&(S.exports=I)})(function(){function I(K,h,l,r,L){for(;r>l;){if(600<r-l){var w=r-l+1,N=h-l+1,f=Math.log(w),p=.5*Math.exp(2*f/3);f=.5*Math.sqrt(f*p*(w-
p)/w)*(0>N-w/2?-1:1);I(K,h,Math.max(l,Math.floor(h-N*p/w+f)),Math.min(r,Math.floor(h+(w-N)*p/w+f)),L)}w=K[h];N=l;p=r;ba(K,l,h);for(0<L(K[r],w)&&ba(K,l,r);N<p;){ba(K,N,p);N++;for(p--;0>L(K[N],w);)N++;for(;0<L(K[p],w);)p--}0===L(K[l],w)?ba(K,l,p):(p++,ba(K,p,r));p<=h&&(l=p+1);h<=p&&(r=p-1)}}function ba(K,h,l){var r=K[h];K[h]=K[l];K[l]=r}function R(K,h){return K<h?-1:K>h?1:0}return function(K,h,l,r,L){I(K,h,l||0,r||K.length-1,L||R)}})})(ea);e=e.getDefaultExportFromCjs(ea.exports);k.quickselect=e})},
"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(k,e,ea,S){k.optimizedFeatureQueryEngineAdapter={getObjectId(I){return I.objectId},getAttributes(I){return I.attributes},getAttribute(I,ba){return I.attributes[ba]},cloneWithGeometry(I,ba){return new ea.OptimizedFeature(ba,I.attributes,null,I.objectId)},getGeometry(I){return I.geometry},getCentroid(I,ba){null==I.centroid&&(I.centroid=e.getCentroidOptimizedGeometry(new S,
I.geometry,ba.hasZ,ba.hasM));return I.centroid}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(k){function e(S,I,ba,R,K,h,l=1){h=K?h?4:3:h?3:2;let r=ba,L=ba+h,w=0,N=0,f=ba=0,p=0;for(let y=0,O=R-1;y<O;y++,r+=h,L+=h){R=I[r];const q=I[r+1],n=I[r+2],z=I[L],U=I[L+1],H=I[L+2];let E=R*U-z*q;f+=E;w+=(R+z)*E;N+=(q+U)*E;K&&(E=R*H-z*n,ba+=(n+H)*E,p+=E);R<S[0]&&(S[0]=R);R>S[1]&&(S[1]=R);q<S[2]&&(S[2]=q);q>S[3]&&(S[3]=q);
K&&(n<S[4]&&(S[4]=n),n>S[5]&&(S[5]=n))}0<f*l&&(f*=-1);0<p*l&&(p*=-1);if(!f)return null;S=[w,N,.5*f];K&&(S[3]=ba,S[4]=.5*p);return S}function ea(S,I,ba,R,K){K=R?K?4:3:K?3:2;let h=I,l=I+K,r=0,L=0,w=0,N=0;for(let O=0,q=ba-1;O<q;O++,h+=K,l+=K){var f=S[h];const n=S[h+1],z=S[h+2],U=S[l],H=S[l+1],E=S[l+2];if(R){var p=U-f;var y=H-n;const G=E-z;p=Math.sqrt(p*p+y*y+G*G)}else p=U-f,y=H-n,p=Math.sqrt(p*p+y*y);p&&(r+=p,R?(f=[f+.5*(U-f),n+.5*(H-n),z+.5*(E-z)],L+=p*f[0],w+=p*f[1],N+=p*f[2]):(f=[f+.5*(U-f),n+.5*
(H-n)],L+=p*f[0],w+=p*f[1]))}return 0<r?R?[L/r,w/r,N/r]:[L/r,w/r]:0<ba?R?[S[I],S[I+1],S[I+2]]:[S[I],S[I+1]]:null}k.getCentroidOptimizedGeometry=function(S,I,ba,R,K){if(null==I||!I.lengths.length)return null;const h="upperLeft"===K?.originPosition?-1:1;S.lengths.length&&(S.lengths.length=0);S.coords.length&&(S.coords.length=0);K=S.coords;const l=[],r=ba?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:
[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:L,coords:w}=I,N=ba?R?4:3:R?3:2;let f=0;for(var p of L){const y=e(r,w,f,p,ba,R,h);y&&l.push(y);f+=p*N}l.sort((y,O)=>{let q=h*y[2]-h*O[2];0===q&&ba&&(q=y[4]-O[4]);return q});l.length&&(p=6*l[0][2],K[0]=l[0][0]/p,K[1]=l[0][1]/p,ba&&(p=6*l[0][4],K[2]=0!==p?l[0][3]/p:0),K[0]<r[0]||K[0]>r[1]||K[1]<r[2]||K[1]>r[3]||ba&&(K[2]<r[4]||K[2]>r[5]))&&(K.length=0);if(!K.length)if(I=I.lengths[0]?ea(w,0,
L[0],ba,R):null)K[0]=I[0],K[1]=I[1],ba&&2<I.length&&(K[2]=I[2]);else return null;return S};k.lineCentroid=ea;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l,r,L){async function w(E,G,A){if(!E)return null;var {where:C}=E;E.where=C=C&&C.trim();if(!C||/^1 *= *1$/.test(C)||G&&G===C)E.where=null;if(!E.geometry)return E;G=await f(E);E.distance=0;E.units=null;"esriSpatialRelEnvelopeIntersects"===E.spatialRel&&({spatialReference:C}=E.geometry,G=ba.getGeometryExtent(G),G.spatialReference=C);if(G){await L.checkProjectionSupport(G.spatialReference,A);C=G.spatialReference;G=N(G,A)&&R.isExtent(G)?{spatialReference:C,rings:[[[G.xmin,
G.ymin],[G.xmin,G.ymax],[G.xmax,G.ymax],[G.xmax,G.ymin],[G.xmin,G.ymin]]]}:G;C=(await K.normalizeCentralMeridian(R.fromJSON(G)))[0];if(null==C)throw O;const J="quantizationParameters"in E&&E.quantizationParameters?.tolerance||"maxAllowableOffset"in E&&E.maxAllowableOffset||0;G=J&&N(G,A)?{densificationStep:8*J}:void 0;C=C.toJSON();G=await L.project(C,C.spatialReference,A,G);if(!G)throw O;G.spatialReference=A;E.geometry=G}return E}function N(E,G){if(!E)return!1;const A=E.spatialReference;return(R.isExtent(E)||
R.isPolygon(E)||R.isPolyline(E))&&!h.equals(A,G)&&!I.canProjectWithoutEngine(A,G)}async function f(E){const {distance:G,units:A}=E,C=E.geometry;if(null==G||"vertexAttributes"in C)return C;var J=C.spatialReference;E=A?y.fromJSON(A):S.getUnitString(J);J=J&&(h.isGeographic(J)||h.isWebMercator(J))?C:await L.checkProjectionSupport(J,h.WGS84).then(()=>L.project(C,h.WGS84));return(await p())(J.spatialReference,J,G,E)}async function p(){return(await new Promise((E,G)=>k(["../../../geometry/geometryEngineJSON"],
E,G))).geodesicBuffer}const y=new ea.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),O=Object.freeze({}),q=new r,n=new r,z=new r,U={esriGeometryPoint:l.convertToPoint,esriGeometryPolyline:l.convertToPolyline,esriGeometryPolygon:l.convertToPolygon,esriGeometryMultipoint:l.convertToMultipoint},H=(E,G)=>"_geVersion"!==E?G:void 0;e.QUERY_ENGINE_EMPTY_RESULT=
O;e.cleanFromGeometryEngine=function(E){return E&&"_geVersion"in E?JSON.parse(JSON.stringify(E,H)):E};e.getGeometry=function(E,G,A,C,J,ca,ja=G,P=A){const Q=G&&ja,v=A&&P;C=null!=C?"coords"in C?C:C.geometry:null;if(null==C)return null;if(J)return G=l.generalizeOptimizedGeometry(n,C,G,A,E,J,ja,P),ca&&(G=l.quantizeOptimizedGeometry(z,G,Q,v,E,ca)),U[E]?.(G,Q,v)??null;if(ca)return ca=l.quantizeOptimizedGeometry(z,C,G,A,E,ca,ja,P),U[E]?.(ca,Q,v)??null;l.removeZMValues(q,C,G,A,ja,P);return U[E]?.(q,Q,v)??
null};e.normalizeQuery=async function(E,G,A){const {outFields:C,orderByFields:J,groupByFieldsForStatistics:ca,outStatistics:ja}=E;if(C)for(var P=0;P<C.length;P++)C[P]=C[P].trim();if(J)for(P=0;P<J.length;P++)J[P]=J[P].trim();if(ca)for(P=0;P<ca.length;P++)ca[P]=ca[P].trim();if(ja)for(P=0;P<ja.length;P++)ja[P].onStatisticField&&(ja[P].onStatisticField=ja[P].onStatisticField.trim());E.geometry&&!E.outSR&&(E.outSR=E.geometry.spatialReference);return w(E,G,A)};e.normalizeQueryLike=w;e.transformCentroid=
function(E,G,A,C=E.hasZ,J=E.hasM){if(null==G)return null;const ca=E.hasZ&&C,ja=E.hasM&&J;return A?(E=l.quantizeOptimizedGeometry(z,G,E.hasZ,E.hasM,"esriGeometryPoint",A,C,J),l.convertToPoint(E,ca,ja)):l.convertToPoint(G,ca,ja)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l,r,L,w,N,f,p,y,O,q,n,z,U,H,E,G,A){function C(){return!!jb&&p.isLoaded()}function J(T){null==b&&(b=Promise.all([p.load(),(new Promise((ia,X)=>k(["../chunks/geometryEngineBase"],ia,X))).then(ia=>ia.geometryEngineBase),new Promise((ia,X)=>k(["./geometryAdapters/hydrated"],ia,X))]));return b.then(([,ia,{hydratedAdapter:X}])=>{ba.throwIfAborted(T);lb=X;jb=ia.default;jb._enableProjection(p.pe);Ob.notify()})}function ca(T,ia,X=null,pa=null){return Array.isArray(T)?0===T.length?
[]:ja(lb,T,T[0].spatialReference,ia,X,pa):ja(lb,[T],T.spatialReference,ia,X,pa)[0]}function ja(T,ia,X,pa,Ga=null,Fa=null){if(null==X||null==pa)return ia;if(x(X,pa,Ga))return ia.map(Na=>Z(Na,X,pa));if(null==Ga){const Na=H.cacheKey(X,pa);void 0!==gb[Na]?Ga=gb[Na]:(Ga=Q(X,pa,void 0),null==Ga&&(Ga=new H),gb[Na]=Ga)}if(null==jb||null==T)throw new Jb;return null!=Fa?jb._project(T,ia,X,pa,Ga,Fa):jb._project(T,ia,X,pa,Ga)}function P(T,ia){if(!C())for(const X of T)if(null!=X&&!E.equals(X.spatialReference,
ia)&&E.isValid(X.spatialReference)&&E.isValid(ia)&&!x(X.spatialReference,ia))return K.trackAccess(Ob),{pending:J(),geometries:null};return{pending:null,geometries:T.map(X=>null==X?null:E.equals(X.spatialReference,ia)?X:E.isValid(X.spatialReference)&&E.isValid(ia)?v(X,ia):null)}}function Q(T,ia,X=null){if(null==T||null==ia)return null;if(null==jb||null==lb)throw new Jb;T=jb._getTransformation(lb,T,ia,X,X?.spatialReference);return null!==T?H.fromGE(T):null}function v(T,ia){try{const X=ca(T,ia);if(null==
X)return null;"xmin"in T&&"xmin"in X&&(X.zmin=T.zmin,X.zmax=T.zmax);const pa=A.getGeometryZScaler(X.type,T.spatialReference,ia);null!=pa&&pa(X);return X}catch(X){if(!(X instanceof Jb))throw X;return null}}function x(T,ia,X){return X?!1:E.equals(T,ia)?!0:E.isValid(T)&&E.isValid(ia)&&!!Wa(T,ia,Zb)}function Z(T,ia,X){return T?"x"in T?ka(T,ia,new y,X,0):"xmin"in T?za(T,ia,new N,X,0):"rings"in T?ta(T,ia,new O,X,0):"paths"in T?sa(T,ia,new q,X,0):"points"in T?na(T,ia,new f,X,0):null:null}function ka(T,ia,
X,pa,Ga){Za[0]=T.x;Za[1]=T.y;const Fa=T.z;Za[2]=void 0!==Fa?Fa:Ga;if(!Oa(Za,ia,0,Za,pa,0,1))return null;X.x=Za[0];X.y=Za[1];X.spatialReference=pa;void 0===Fa?(X.z=void 0,X.hasZ=!1):(X.z=Za[2],X.hasZ=!0);void 0===T.m?(X.m=void 0,X.hasM=!1):(X.m=T.m,X.hasM=!0);return X}function na(T,ia,X,pa,Ga){const {points:Fa,hasZ:Na,hasM:Va}=T;T=[];const nb=Fa.length,ob=[];for(var mb of Fa)ob.push(mb[0],mb[1],Na?mb[2]:Ga);if(!Oa(ob,ia,0,ob,pa,0,nb))return null;for(ia=0;ia<nb;++ia){Ga=3*ia;mb=ob[Ga];const wb=ob[Ga+
1];Na&&Va?T.push([mb,wb,ob[Ga+2],Fa[ia][3]]):Na?T.push([mb,wb,ob[Ga+2]]):Va?T.push([mb,wb,Fa[ia][2]]):T.push([mb,wb])}X.points=T;X.spatialReference=pa;X.hasZ=Na;X.hasM=Va;return X}function sa(T,ia,X,pa,Ga){const {paths:Fa,hasZ:Na,hasM:Va}=T;T=[];if(!Ta(Fa,Na??!1,Va??!1,ia,T,pa,Ga))return null;X.paths=T;X.spatialReference=pa;X.hasZ=Na;X.hasM=Va;return X}function ta(T,ia,X,pa,Ga){const {rings:Fa,hasZ:Na,hasM:Va}=T;T=[];if(!Ta(Fa,Na??!1,Va??!1,ia,T,pa,Ga))return null;X.rings=T;X.spatialReference=pa;
X.hasZ=Na;X.hasM=Va;return X}function za(T,ia,X,pa,Ga){const {xmin:Fa,ymin:Na,xmax:Va,ymax:nb,hasZ:ob,hasM:mb}=T;if(!Ba(Fa,Na,ob?T.zmin:Ga,ia,Za,pa))return null;X.xmin=Za[0];X.ymin=Za[1];ob&&(X.zmin=Za[2]);if(!Ba(Va,nb,ob?T.zmax:Ga,ia,Za,pa))return null;X.xmax=Za[0];X.ymax=Za[1];ob&&(X.zmax=Za[2]);mb&&(X.mmin=T.mmin,X.mmax=T.mmax);X.spatialReference=pa;return X}function Ba(T,ia,X,pa,Ga,Fa){kb[0]=T;kb[1]=ia;kb[2]=X;return Oa(kb,pa,0,Ga,Fa,0,1)}function Ca(T,ia,X,pa){if(null==ia||null==pa||2>T.length)return!1;
2===T.length&&(kb[0]=T[0],kb[1]=T[1],kb[2]=0,T=kb);return Oa(T,ia,0,X,pa,0,1)}function La(T,ia,X){if(null==ia)return!1;ia=eb(ia,Sb);ia=yb[ia][la.WGS84_COMPARABLE_LON_LAT];if(null==ia)return!1;ia(T,0,kb,0);X!==kb&&(X[0]=kb[0],X[1]=kb[1],2<X.length&&(X[2]=kb[2]));return!0}function Oa(T,ia,X,pa,Ga,Fa,Na=1){ia=Wa(ia,Ga,Zb);if(null==ia)return!1;if(ia===c){if(T===pa&&X===Fa)return!0;Na=X+3*Na;for(let Va=X,nb=Fa;Va<Na;Va++,nb++)pa[nb]=T[Va];return!0}Na=X+3*Na;for(let Va=X,nb=Fa;Va<Na;Va+=3,nb+=3)ia(T,Va,
pa,nb);return!0}function Ta(T,ia,X,pa,Ga,Fa,Na=0){const Va=[];for(const nb of T)for(const ob of nb)Va.push(ob[0],ob[1],ia?ob[2]:Na);if(!Oa(Va,pa,0,Va,Fa,0,Va.length/3))return!1;pa=0;Ga.length=0;for(const nb of T){T=[];for(const ob of nb)ia&&X?T.push([Va[pa++],Va[pa++],Va[pa++],ob[3]]):ia?T.push([Va[pa++],Va[pa++],Va[pa++]]):(X?T.push([Va[pa++],Va[pa++],ob[2]]):T.push([Va[pa++],Va[pa++]]),pa++);Ga.push(T)}return!0}function Ya(T,ia,X,pa){ia=pa+ia;if(ia<pa/2||X>ia)return Number.MAX_VALUE;T=Math.abs(Db*
T)+Math.asin(X/ia);return T>=Math.PI/2?Number.MAX_VALUE:X/Math.cos(T)}function fb(T,ia,X){const pa=Math.sin(T);T=Math.cos(T);const Ga=Math.sin(ia);ia=Math.cos(ia);X[0]=-pa;X[4]=-Ga*T;X[8]=ia*T;X[12]=0;X[1]=T;X[5]=-Ga*pa;X[9]=ia*pa;X[13]=0;X[2]=0;X[6]=ia;X[10]=Ga;X[14]=0;X[3]=0;X[7]=0;X[11]=0;X[15]=1;return X}function ib(T,ia,X){fb(T,ia,X);l.transpose(X,X);return X}function eb(T,ia){if(!T)return la.UNKNOWN;if(ia.spatialReference===T)return ia.spatialReferenceId;ia.spatialReference=T;"metersPerUnit"in
ia&&(ia.metersPerUnit=R.getMetersPerUnitForSR(T,1));return T.wkt===w.SphericalECEFSpatialReferenceLike.wkt?ia.spatialReferenceId=la.SPHERICAL_ECEF:E.isWGS84(T)?ia.spatialReferenceId=la.WGS84:E.isWebMercator(T)?ia.spatialReferenceId=la.WEB_MERCATOR:E.isPlateCarree(T)?ia.spatialReferenceId=la.PLATE_CARREE:T.wkt===w.WGS84ECEFSpatialReferenceLike.wkt?ia.spatialReferenceId=la.WGS84_ECEF:T.wkid===G.SupportedGCSWkids.CGCS2000?ia.spatialReferenceId=la.CGCS2000:T.wkt===w.SphericalPCPFMarsLike.wkt?ia.spatialReferenceId=
la.SPHERICAL_MARS_PCPF:T.wkt===w.SphericalPCPFMoonLike.wkt?ia.spatialReferenceId=la.SPHERICAL_MOON_PCPF:E.isMars(T)?ia.spatialReferenceId=la.GCSMARS2000:E.isMoon(T)?ia.spatialReferenceId=la.GCSMOON2000:ia.spatialReferenceId=la.UNKNOWN}function c(T,ia,X,pa){T!==X&&(X[pa++]=T[ia++],X[pa++]=T[ia++],X[pa]=T[ia])}function t(T,ia,X,pa){X[pa++]=Pb*(T[ia++]/z.earth.radius);X[pa++]=Pb*(Math.PI/2-2*Math.atan(Math.exp(-T[ia++]/z.earth.radius)));X[pa]=T[ia]}function fa(T,ia,X,pa){t(T,ia,X,pa);va(X,pa,X,pa)}function B(T,
ia,X,pa){t(T,ia,X,pa);Qa(X,pa,X,pa)}function aa(T,ia,X,pa,Ga){var Fa=.4999999*Math.PI;Fa=I.clamp(Db*T[ia+1],-Fa,Fa);Fa=Math.sin(Fa);X[pa++]=Db*T[ia]*Ga.radius;X[pa++]=Ga.halfSemiMajorAxis*Math.log((1+Fa)/(1-Fa));X[pa]=T[ia+2]}function m(T,ia,X,pa){aa(T,ia,X,pa,z.earth)}function F(T,ia,X,pa){X[pa]=T[ia]*gc;X[pa+1]=T[ia+1]*gc;X[pa+2]=T[ia+2]}function V(T,ia,X,pa){X[pa]=T[ia]*Tb;X[pa+1]=T[ia+1]*Tb;X[pa+2]=T[ia+2]}function W(T,ia,X,pa){t(T,ia,X,pa);F(X,pa,X,pa)}function ha(T,ia,X,pa,Ga){Ga+=T[ia+2];const Fa=
Db*T[ia+1];T=Db*T[ia];ia=Math.cos(Fa);X[pa++]=Math.cos(T)*ia*Ga;X[pa++]=Math.sin(T)*ia*Ga;X[pa]=Math.sin(Fa)*Ga}function oa(T,ia,X,pa){ha(T,ia,X,pa,z.moon.radius)}function qa(T,ia,X,pa){ha(T,ia,X,pa,z.mars.radius)}function va(T,ia,X,pa){ha(T,ia,X,pa,z.earth.radius)}function xa(T,ia,X,pa,Ga){var Fa=T[ia];const Na=T[ia+1];ia=T[ia+2];T=Math.sqrt(Fa*Fa+Na*Na+ia*ia);ia=I.asinClamped(ia/(0===T?1:T));Fa=Math.atan2(Na,Fa);X[pa++]=Pb*Fa;X[pa++]=Pb*ia;X[pa]=T-Ga}function Ha(T,ia,X,pa){xa(T,ia,X,pa,z.moon.radius)}
function Ea(T,ia,X,pa){xa(T,ia,X,pa,z.mars.radius)}function Da(T,ia,X,pa){xa(T,ia,X,pa,z.earth.radius)}function Sa(T,ia,X,pa){Da(T,ia,X,pa);m(X,pa,X,pa)}function Ma(T,ia,X,pa){Da(T,ia,X,pa);Qa(X,pa,X,pa)}function Qa(T,ia,X,pa){var Ga=z.earth;const Fa=Db*T[ia];var Na=Db*T[ia+1];T=T[ia+2];ia=Math.sin(Na);Na=Math.cos(Na);const Va=Ga.radius/Math.sqrt(1-Ga.eccentricitySquared*ia*ia);X[pa++]=(Va+T)*Na*Math.cos(Fa);X[pa++]=(Va+T)*Na*Math.sin(Fa);X[pa++]=(Va*(1-Ga.eccentricitySquared)+T)*ia}function Ra(T,
ia,X,pa){var Ga=U.earthEllipsoidConstants,Fa=T[ia],Na=T[ia+1];T=T[ia+2];let Va;ia=Math.abs(T);var nb=Fa*Fa+Na*Na;var ob=Math.sqrt(nb);var mb=nb+T*T;var wb=Math.sqrt(mb);Fa=Math.atan2(Na,Fa);var Gb=T*T/mb;mb=nb/mb;Na=Ga.a2/wb;nb=Ga.a3-Ga.a4/wb;.3<mb?(Gb=ia/wb*(1+mb*(Ga.a1+Na+Gb*nb)/wb),wb=Math.asin(Gb),Na=Gb*Gb,mb=Math.sqrt(1-Na)):(mb=ob/wb*(1-Gb*(Ga.a5-Na-mb*nb)/wb),wb=Math.acos(mb),Na=1-mb*mb,Gb=Math.sqrt(Na));Va=1-z.earth.eccentricitySquared*Na;Na=z.earth.radius/Math.sqrt(Va);Ga=Ga.a6*Na;Na=ob-
Na*mb;nb=ia-Ga*Gb;ia=mb*Na+Gb*nb;ob=mb*nb-Gb*Na;Ga=ob/(Ga/Va+ia);wb+=Ga;0>T&&(wb=-wb);X[pa++]=Pb*Fa;X[pa++]=Pb*wb;X[pa]=ia+ob*Ga/2}function Ka(T,ia,X,pa){Ra(T,ia,X,pa);va(X,pa,X,pa)}function Ua(T,ia,X,pa){Ra(T,ia,X,pa);m(X,pa,X,pa)}function Wa(T,ia,X=ub()){return null==T||null==ia?null:wa(T,ia,X).projector}function wa(T,ia,X){if(null==T||null==ia||X.source.spatialReference===T&&X.dest.spatialReference===ia)return X;const pa=eb(T,X.source),Ga=eb(ia,X.dest);pa===la.UNKNOWN&&Ga===la.UNKNOWN?E.equals(T,
ia)?X.projector=c:X.projector=null:X.projector=yb[pa][Ga];return X}function ub(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:c}}let jb=null,lb=null,b=null,gb={};const Ob=new h.SimpleObservable;let Jb=function(T){function ia(){return T.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ea._inherits(ia,T);return ea._createClass(ia)}(S);
var la;(function(T){T[T.UNKNOWN=0]="UNKNOWN";T[T.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";T[T.WGS84=2]="WGS84";T[T.WEB_MERCATOR=3]="WEB_MERCATOR";T[T.WGS84_ECEF=4]="WGS84_ECEF";T[T.CGCS2000=5]="CGCS2000";T[T.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";T[T.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";T[T.GCSMARS2000=8]="GCSMARS2000";T[T.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";T[T.GCSMOON2000=10]="GCSMOON2000";T[T.LON_LAT=11]="LON_LAT";T[T.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const gc=
z.earth.radius*Math.PI/180,Tb=180/(z.earth.radius*Math.PI),yb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:c,[la.SPHERICAL_ECEF]:va,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:m,[la.PLATE_CARREE]:F,[la.WGS84]:c,[la.WGS84_ECEF]:Qa},[la.CGCS2000]:{[la.CGCS2000]:c,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:c,[la.SPHERICAL_ECEF]:va,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:F,[la.WGS84]:null,[la.WGS84_ECEF]:Qa},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:c,[la.GCSMOON2000]:null,[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:qa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:c,[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:t,[la.WGS84_COMPARABLE_LON_LAT]:t,[la.SPHERICAL_ECEF]:fa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,
[la.WEB_MERCATOR]:c,[la.PLATE_CARREE]:W,[la.WGS84]:t,[la.WGS84_ECEF]:B},[la.WGS84_ECEF]:{[la.CGCS2000]:Ra,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ra,[la.WGS84_COMPARABLE_LON_LAT]:Ra,[la.SPHERICAL_ECEF]:Ka,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Ua,[la.PLATE_CARREE]:function(T,ia,X,pa){Ra(T,ia,X,pa);F(X,pa,X,pa)},[la.WGS84]:Ra,[la.WGS84_ECEF]:c},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Da,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,
[la.LON_LAT]:Da,[la.WGS84_COMPARABLE_LON_LAT]:Da,[la.SPHERICAL_ECEF]:c,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Sa,[la.PLATE_CARREE]:function(T,ia,X,pa){Da(T,ia,X,pa);F(X,pa,X,pa)},[la.WGS84]:Da,[la.WGS84_ECEF]:Ma},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ea,[la.GCSMOON2000]:null,[la.LON_LAT]:Ea,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:c,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,
[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ha,[la.LON_LAT]:Ha,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:c,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,
[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:c,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:c,[la.GCSMARS2000]:c,[la.GCSMOON2000]:c,[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:c,[la.SPHERICAL_ECEF]:va,[la.SPHERICAL_MARS_PCPF]:qa,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:m,[la.PLATE_CARREE]:F,[la.WGS84]:c,[la.WGS84_ECEF]:Qa},
[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:c,[la.WGS84_COMPARABLE_LON_LAT]:c,[la.SPHERICAL_ECEF]:va,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:F,[la.WGS84]:c,[la.WGS84_ECEF]:Qa},[la.PLATE_CARREE]:{[la.CGCS2000]:V,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:V,[la.WGS84_COMPARABLE_LON_LAT]:V,[la.SPHERICAL_ECEF]:function(T,ia,X,pa){V(T,ia,X,pa);va(X,
pa,X,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(T,ia,X,pa){V(T,ia,X,pa);m(X,pa,X,pa)},[la.PLATE_CARREE]:c,[la.WGS84]:V,[la.WGS84_ECEF]:function(T,ia,X,pa){V(T,ia,X,pa);Qa(X,pa,X,pa)}}},Sb={spatialReference:null,spatialReferenceId:la.UNKNOWN},Ub={spatialReference:null,spatialReferenceId:la.UNKNOWN},Zb=ub(),hc=ub(),Db=I.deg2rad(1),Pb=I.rad2deg(1),kb=L.create(),Fb=L.create(),Qb=L.create(),Za=L.create(),Hb=L.create();e.canProjectToWGS84ComparableLonLat=
function(T){if(null==T)return!1;T=eb(T,Sb);return!!yb[T][la.WGS84_COMPARABLE_LON_LAT]};e.canProjectWithoutEngine=x;e.computeENUToSphericalPCPFLocalRotation=fb;e.computeSphericalPCPFToENULocalRotation=ib;e.computeTranslationToOriginAndRotation=function(T,ia,X,pa){if(null==T||null==pa)return!1;var Ga=eb(T,Sb),Fa=eb(pa,Ub);if(Ga===Fa&&Fa!==la.SPHERICAL_ECEF&&Fa!==la.SPHERICAL_MARS_PCPF&&Fa!==la.SPHERICAL_MOON_PCPF&&(Ga!==la.UNKNOWN||E.equals(T,pa)))return l.fromTranslation(X,ia),!0;if(Fa===la.SPHERICAL_ECEF||
Fa===la.SPHERICAL_MARS_PCPF||Fa===la.SPHERICAL_MOON_PCPF){Ga=yb[Ga][la.LON_LAT];Fa=yb[la.LON_LAT][Fa];if(null==Ga||null==Fa)return!1;Ga(ia,0,Fb,0);Fa(Fb,0,Qb,0);fb(Db*Fb[0],Db*Fb[1],X);X[12]=Qb[0];X[13]=Qb[1];X[14]=Qb[2];return!0}if((Fa===la.WEB_MERCATOR||Fa===la.PLATE_CARREE)&&(Ga===la.WGS84||Ga===la.CGCS2000&&Fa===la.PLATE_CARREE||Ga===la.SPHERICAL_ECEF||Ga===la.WEB_MERCATOR)){T=yb[Ga][la.LON_LAT];Fa=yb[la.LON_LAT][Fa];if(null==T||null==Fa)return!1;T(ia,0,Fb,0);Fa(Fb,0,Qb,0);Ga===la.SPHERICAL_ECEF?
ib(Db*Fb[0],Db*Fb[1],X):l.identity(X);X[12]=Qb[0];X[13]=Qb[1];X[14]=Qb[2];return!0}return!1};e.getProjectorName=function(T,ia){switch(Wa(T,ia,Zb)){case c:return"copy3";case va:return"wgs84ToSphericalECEF";case m:return"wgs84ToWebMercator";case F:return"wgs84ToPlateCarree";case Qa:return"wgs84ToWGS84ECEF";case t:return"webMercatorToWGS84";case fa:return"webMercatorToSphericalECEF";case B:return"webMercatorToWGS84ECEF";case W:return"webMercatorToPlateCarree";case Ra:return"wgs84ECEFToWGS84";case Ka:return"wgs84ECEFToSphericalECEF";
case Ua:return"wgs84ECEFToWebMercator";case Da:return"sphericalECEFToWGS84";case Sa:return"sphericalECEFToWebMercator";case Ea:return"sphericalMarsPCPFToMars2000";case Ha:return"sphericalMoonPCPFToMoon2000";case Ma:return"sphericalECEFToWGS84ECEF";case qa:return"mars2000ToSphericalPCPF";case oa:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=Q;e.getTransformations=function(T,ia,X=null){if(null==jb||null==lb)throw new Jb;T=jb._getTransformationBySuitability(lb,T,ia,X,X?.spatialReference);
if(null!==T){ia=[];for(const pa of T)ia.push(H.fromGE(pa));return ia}return[]};e.initializeProjection=async function(T,ia,X,pa){if(C())return ba.waitTick(pa);if(Array.isArray(T))for(const {source:Ga,dest:Fa,geographicTransformation:Na}of T){if(!x(Ga,Fa,Na))return J(pa)}else if(!x(T,ia,X))return J(pa);return ba.waitTick(pa)};e.isLoaded=C;e.load=J;e.localLinearScaleFactors=function(T,ia,X,pa){if(null==ia||null==pa)return!1;const Ga=eb(ia,Sb);var Fa=eb(pa,Ub);if(Ga===Fa&&Ga!==la.UNKNOWN||E.equals(ia,
pa))return X[0]=1,X[1]=1,X[2]=1,!0;if(Ga===la.SPHERICAL_ECEF){ia=r.length(T);T=ia/Math.sqrt(T[0]*T[0]+T[1]*T[1]);ia/=z.earth.radius;if(Fa===la.WEB_MERCATOR)return X[0]=T*ia,X[1]=T*ia,X[2]=1,!0;if(Fa===la.WGS84||Fa===la.CGCS2000)return Fa=Tb,X[0]=Fa*T*ia,X[1]=Fa*ia,X[2]=1,!0}else if(Ga===la.PLATE_CARREE){if(Fa===la.WGS84||Fa===la.CGCS2000)return X[0]=Tb,X[1]=Tb,X[2]=1,!0;if(Fa===la.WEB_MERCATOR)return Fa=T[1]/z.earth.radius,X[0]=1,X[1]=1/Math.cos(Fa),X[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(T,
ia,X,pa){const Ga=Math.cos(X);T[0]=Math.cos(ia)*Ga*pa;T[1]=Math.sin(ia)*Ga*pa;T[2]=Math.sin(X)*pa};e.lonLatToWebMercatorComparable=aa;e.project=ca;e.projectBoundingRect=function(T,ia,X,pa){if(null==T)return!1;if(E.equals(ia,pa))return n.copy(X,T),!0;kb[0]=T[0];kb[1]=T[1];kb[2]=0;if(!Oa(kb,ia,0,kb,pa,0,1))return!1;X[0]=kb[0];X[1]=kb[1];kb[0]=T[2];kb[1]=T[3];kb[2]=0;if(!Oa(kb,ia,0,kb,pa,0,1))return!1;X[2]=kb[0];X[3]=kb[1];return!0};e.projectBoundingSphere=function(T,ia,X,pa){if(null==ia||null==pa)return!1;
ia=wa(ia,pa,hc);if(ia.projector===c)return X[0]=T[0],X[1]=T[1],X[2]=T[2],X[3]=T[3],!0;if(null==ia.projector)return!1;const {source:Ga,dest:Fa}=ia;if(Fa.spatialReferenceId===la.WEB_MERCATOR){ia=yb[Ga.spatialReferenceId][la.WGS84];if(null==ia)return!1;ia(T,0,Fb,0);m(Fb,0,X,0);X[3]=Ya(Fb[1],T[2],T[3],z.earth.radius);return!0}if(Ga.spatialReferenceId!==la.WGS84&&Ga.spatialReferenceId!==la.CGCS2000||Fa.spatialReferenceId!==la.PLATE_CARREE)ia.projector(T,0,X,0),X[3]=T[3]*(Ga.metersPerUnit??1)/(Fa.metersPerUnit??
1);else{pa=yb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Na=T[3];null!=yb[Ga.spatialReferenceId][la.SPHERICAL_ECEF]&&null!=pa&&(Na=Ya(T[1],T[2],T[3],z.earth.radius));ia.projector(T,0,X,0);X[3]=Na}return!0};e.projectBuffer=Oa;e.projectDirection=function(T,ia,X,pa,Ga){r.copy(Za,T);r.add(Hb,T,ia);Ca(Za,X,Za,Ga);Ca(Hb,X,Hb,Ga);r.subtract(pa,Hb,Za);r.normalize(pa,pa)};e.projectExtent=function(T,ia,X=ia.spatialReference,pa=0){return null!=T.spatialReference&&null!=X&&null!=za(T,T.spatialReference,ia,X,pa)};
e.projectMany=ja;e.projectMultipoint=function(T,ia,X=ia.spatialReference,pa=0){return null!=T.spatialReference&&null!=X&&null!=na(T,T.spatialReference,ia,X,pa)};e.projectOrLoad=function(T,ia){T=P([T],ia);return null!=T.pending?{pending:T.pending,geometry:null}:null!=T.geometries?{pending:null,geometry:T.geometries[0]}:{pending:null,geometry:null}};e.projectOrLoadMany=P;e.projectPoint=function(T,ia,X=ia.spatialReference,pa=0){return null!=X&&null!=T.spatialReference&&null!=ka(T,T.spatialReference,
ia,X,pa)};e.projectPointToVector=function(T,ia,X,pa=0){Za[0]=T.x;Za[1]=T.y;const Ga=T.z;Za[2]=void 0!==Ga?Ga:pa;return Oa(Za,T.spatialReference,0,ia,X,0,1)};e.projectPointToWGS84ComparableLonLat=function(T,ia){Za[0]=T.x;Za[1]=T.y;const X=T.z;Za[2]=void 0!==X?X:0;return La(Za,T.spatialReference,ia)};e.projectPolygon=function(T,ia,X=ia.spatialReference,pa=0){return null!=T.spatialReference&&null!=X&&null!=ta(T,T.spatialReference,ia,X,pa)};e.projectPolygonToWGS84ComparableLonLat=function({hasZ:T,spatialReference:ia,
rings:X},pa,Ga=0){ia=eb(ia,Sb);ia=yb[ia][la.WGS84_COMPARABLE_LON_LAT];if(null==ia)return!1;T=T?Fa=>Fa:Fa=>r.set(Za,Fa[0],Fa[1],Ga);for(const Fa of X){X=[];for(const Na of Fa){const Va=[0,0,Ga];ia(T(Na),0,Va,0);X.push(Va)}pa.push(X)}return!0};e.projectPolyline=function(T,ia,X=ia.spatialReference,pa=0){return null!=T.spatialReference&&null!=X&&null!=sa(T,T.spatialReference,ia,X,pa)};e.projectPolylineToWGS84ComparableLonLat=function({hasZ:T,spatialReference:ia,paths:X},pa,Ga=0){ia=eb(ia,Sb);ia=yb[ia][la.WGS84_COMPARABLE_LON_LAT];
if(null==ia)return!1;T=T?Fa=>Fa:Fa=>r.set(Za,Fa[0],Fa[1],Ga);for(const Fa of X){X=[];for(const Na of Fa){const Va=[0,0,Ga];ia(T(Na),0,Va,0);X.push(Va)}pa.push(X)}return!0};e.projectVectorToDehydratedPoint=function(T,ia,X){return Oa(T,ia,0,Za,X.spatialReference,0,1)?(X.x=Za[0],X.y=Za[1],X.z=Za[2],X):null};e.projectVectorToPoint=function(T,ia,X){if(null==ia||null==X)return null;const pa=new y({spatialReference:X});return Oa(T,ia,0,Za,X,0,1)?(pa.x=Za[0],pa.y=Za[1],pa.z=Za[2],pa):null};e.projectVectorToVector=
Ca;e.projectVectorToWGS84ComparableLonLat=function(T,ia,X){return La(T,ia,X)};e.projectWithoutEngine=Z;e.projectXYZToVector=Ba;e.sphericalPCPFtoLonLatElevation=xa;e.test={get loadPromise(){return b}};e.tryProjectWithZConversion=v;e.unload=function(){b=lb=jb=null;gb={}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(k,e,ea){ea=
function(S){function I(){return S.apply(this,arguments)||this}e._inherits(I,S);I.prototype.notify=function(){var ba=this._observers;if(ba&&0<ba.length){ba=ba.slice();for(const R of ba)R.onInvalidated(),R.onCommitted()}};return e._createClass(I)}(ea.ObservableBase);k.SimpleObservable=ea;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(k,e,ea){function S(c,t){c[0]=t[0];c[1]=t[1];c[2]=t[2];c[3]=t[3];c[4]=
t[4];c[5]=t[5];c[6]=t[6];c[7]=t[7];c[8]=t[8];c[9]=t[9];c[10]=t[10];c[11]=t[11];c[12]=t[12];c[13]=t[13];c[14]=t[14];c[15]=t[15];return c}function I(c,t,fa,B,aa,m,F,V,W,ha,oa,qa,va,xa,Ha,Ea,Da){c[0]=t;c[1]=fa;c[2]=B;c[3]=aa;c[4]=m;c[5]=F;c[6]=V;c[7]=W;c[8]=ha;c[9]=oa;c[10]=qa;c[11]=va;c[12]=xa;c[13]=Ha;c[14]=Ea;c[15]=Da;return c}function ba(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function R(c,t){if(c===t){const fa=
t[1],B=t[2],aa=t[3],m=t[6],F=t[7],V=t[11];c[1]=t[4];c[2]=t[8];c[3]=t[12];c[4]=fa;c[6]=t[9];c[7]=t[13];c[8]=B;c[9]=m;c[11]=t[14];c[12]=aa;c[13]=F;c[14]=V}else c[0]=t[0],c[1]=t[4],c[2]=t[8],c[3]=t[12],c[4]=t[1],c[5]=t[5],c[6]=t[9],c[7]=t[13],c[8]=t[2],c[9]=t[6],c[10]=t[10],c[11]=t[14],c[12]=t[3],c[13]=t[7],c[14]=t[11],c[15]=t[15];return c}function K(c,t){h(c,t)||ba(c);return c}function h(c,t){const fa=t[0],B=t[1],aa=t[2],m=t[3],F=t[4],V=t[5],W=t[6],ha=t[7],oa=t[8],qa=t[9],va=t[10],xa=t[11],Ha=t[12],
Ea=t[13],Da=t[14];t=t[15];const Sa=fa*V-B*F,Ma=fa*W-aa*F,Qa=fa*ha-m*F,Ra=B*W-aa*V,Ka=B*ha-m*V,Ua=aa*ha-m*W,Wa=oa*Ea-qa*Ha,wa=oa*Da-va*Ha,ub=oa*t-xa*Ha,jb=qa*Da-va*Ea,lb=qa*t-xa*Ea,b=va*t-xa*Da;let gb=Sa*b-Ma*lb+Qa*jb+Ra*ub-Ka*wa+Ua*Wa;if(!gb)return null;gb=1/gb;c[0]=(V*b-W*lb+ha*jb)*gb;c[1]=(aa*lb-B*b-m*jb)*gb;c[2]=(Ea*Ua-Da*Ka+t*Ra)*gb;c[3]=(va*Ka-qa*Ua-xa*Ra)*gb;c[4]=(W*ub-F*b-ha*wa)*gb;c[5]=(fa*b-aa*ub+m*wa)*gb;c[6]=(Da*Qa-Ha*Ua-t*Ma)*gb;c[7]=(oa*Ua-va*Qa+xa*Ma)*gb;c[8]=(F*lb-V*ub+ha*Wa)*gb;c[9]=
(B*ub-fa*lb-m*Wa)*gb;c[10]=(Ha*Ka-Ea*Qa+t*Sa)*gb;c[11]=(qa*Qa-oa*Ka-xa*Sa)*gb;c[12]=(V*wa-F*jb-W*Wa)*gb;c[13]=(fa*jb-B*wa+aa*Wa)*gb;c[14]=(Ea*Ma-Ha*Ra-Da*Sa)*gb;c[15]=(oa*Ra-qa*Ma+va*Sa)*gb;return c}function l(c,t){const fa=t[0],B=t[1],aa=t[2],m=t[3],F=t[4],V=t[5],W=t[6],ha=t[7],oa=t[8],qa=t[9],va=t[10],xa=t[11],Ha=t[12],Ea=t[13],Da=t[14];t=t[15];c[0]=V*(va*t-xa*Da)-qa*(W*t-ha*Da)+Ea*(W*xa-ha*va);c[1]=-(B*(va*t-xa*Da)-qa*(aa*t-m*Da)+Ea*(aa*xa-m*va));c[2]=B*(W*t-ha*Da)-V*(aa*t-m*Da)+Ea*(aa*ha-m*W);
c[3]=-(B*(W*xa-ha*va)-V*(aa*xa-m*va)+qa*(aa*ha-m*W));c[4]=-(F*(va*t-xa*Da)-oa*(W*t-ha*Da)+Ha*(W*xa-ha*va));c[5]=fa*(va*t-xa*Da)-oa*(aa*t-m*Da)+Ha*(aa*xa-m*va);c[6]=-(fa*(W*t-ha*Da)-F*(aa*t-m*Da)+Ha*(aa*ha-m*W));c[7]=fa*(W*xa-ha*va)-F*(aa*xa-m*va)+oa*(aa*ha-m*W);c[8]=F*(qa*t-xa*Ea)-oa*(V*t-ha*Ea)+Ha*(V*xa-ha*qa);c[9]=-(fa*(qa*t-xa*Ea)-oa*(B*t-m*Ea)+Ha*(B*xa-m*qa));c[10]=fa*(V*t-ha*Ea)-F*(B*t-m*Ea)+Ha*(B*ha-m*V);c[11]=-(fa*(V*xa-ha*qa)-F*(B*xa-m*qa)+oa*(B*ha-m*V));c[12]=-(F*(qa*Da-va*Ea)-oa*(V*Da-W*
Ea)+Ha*(V*va-W*qa));c[13]=fa*(qa*Da-va*Ea)-oa*(B*Da-aa*Ea)+Ha*(B*va-aa*qa);c[14]=-(fa*(V*Da-W*Ea)-F*(B*Da-aa*Ea)+Ha*(B*W-aa*V));c[15]=fa*(V*va-W*qa)-F*(B*va-aa*qa)+oa*(B*W-aa*V);return c}function r(c){const t=c[0],fa=c[1],B=c[2],aa=c[3],m=c[4],F=c[5],V=c[6],W=c[7],ha=c[8],oa=c[9],qa=c[10],va=c[11],xa=c[12],Ha=c[13],Ea=c[14];c=c[15];return(t*F-fa*m)*(qa*c-va*Ea)-(t*V-B*m)*(oa*c-va*Ha)+(t*W-aa*m)*(oa*Ea-qa*Ha)+(fa*V-B*F)*(ha*c-va*xa)-(fa*W-aa*F)*(ha*Ea-qa*xa)+(B*W-aa*V)*(ha*Ha-oa*xa)}function L(c,t,
fa){const B=t[0],aa=t[1],m=t[2],F=t[3],V=t[4],W=t[5],ha=t[6],oa=t[7],qa=t[8],va=t[9],xa=t[10],Ha=t[11],Ea=t[12],Da=t[13],Sa=t[14];t=t[15];let Ma=fa[0],Qa=fa[1],Ra=fa[2],Ka=fa[3];c[0]=Ma*B+Qa*V+Ra*qa+Ka*Ea;c[1]=Ma*aa+Qa*W+Ra*va+Ka*Da;c[2]=Ma*m+Qa*ha+Ra*xa+Ka*Sa;c[3]=Ma*F+Qa*oa+Ra*Ha+Ka*t;Ma=fa[4];Qa=fa[5];Ra=fa[6];Ka=fa[7];c[4]=Ma*B+Qa*V+Ra*qa+Ka*Ea;c[5]=Ma*aa+Qa*W+Ra*va+Ka*Da;c[6]=Ma*m+Qa*ha+Ra*xa+Ka*Sa;c[7]=Ma*F+Qa*oa+Ra*Ha+Ka*t;Ma=fa[8];Qa=fa[9];Ra=fa[10];Ka=fa[11];c[8]=Ma*B+Qa*V+Ra*qa+Ka*Ea;c[9]=
Ma*aa+Qa*W+Ra*va+Ka*Da;c[10]=Ma*m+Qa*ha+Ra*xa+Ka*Sa;c[11]=Ma*F+Qa*oa+Ra*Ha+Ka*t;Ma=fa[12];Qa=fa[13];Ra=fa[14];Ka=fa[15];c[12]=Ma*B+Qa*V+Ra*qa+Ka*Ea;c[13]=Ma*aa+Qa*W+Ra*va+Ka*Da;c[14]=Ma*m+Qa*ha+Ra*xa+Ka*Sa;c[15]=Ma*F+Qa*oa+Ra*Ha+Ka*t;return c}function w(c,t,fa){const B=fa[0],aa=fa[1];fa=fa[2];if(t===c)c[12]=t[0]*B+t[4]*aa+t[8]*fa+t[12],c[13]=t[1]*B+t[5]*aa+t[9]*fa+t[13],c[14]=t[2]*B+t[6]*aa+t[10]*fa+t[14],c[15]=t[3]*B+t[7]*aa+t[11]*fa+t[15];else{const m=t[0],F=t[1],V=t[2],W=t[3],ha=t[4],oa=t[5],qa=
t[6],va=t[7],xa=t[8],Ha=t[9],Ea=t[10],Da=t[11];c[0]=m;c[1]=F;c[2]=V;c[3]=W;c[4]=ha;c[5]=oa;c[6]=qa;c[7]=va;c[8]=xa;c[9]=Ha;c[10]=Ea;c[11]=Da;c[12]=m*B+ha*aa+xa*fa+t[12];c[13]=F*B+oa*aa+Ha*fa+t[13];c[14]=V*B+qa*aa+Ea*fa+t[14];c[15]=W*B+va*aa+Da*fa+t[15]}return c}function N(c,t,fa){const B=fa[0],aa=fa[1];fa=fa[2];c[0]=t[0]*B;c[1]=t[1]*B;c[2]=t[2]*B;c[3]=t[3]*B;c[4]=t[4]*aa;c[5]=t[5]*aa;c[6]=t[6]*aa;c[7]=t[7]*aa;c[8]=t[8]*fa;c[9]=t[9]*fa;c[10]=t[10]*fa;c[11]=t[11]*fa;c[12]=t[12];c[13]=t[13];c[14]=t[14];
c[15]=t[15];return c}function f(c,t,fa,B){let aa=B[0],m=B[1];B=B[2];let F=Math.sqrt(aa*aa+m*m+B*B);var V=void 0,W=void 0;let ha=void 0,oa=void 0,qa=void 0,va=void 0,xa=void 0,Ha=void 0,Ea=void 0,Da=void 0,Sa=void 0,Ma=void 0,Qa=void 0,Ra=void 0,Ka=void 0,Ua=void 0,Wa=void 0,wa=void 0,ub=void 0,jb=void 0,lb=void 0,b=void 0;W=V=void 0;if(F<ea.getEpsilon())return null;F=1/F;aa*=F;m*=F;B*=F;V=Math.sin(fa);W=Math.cos(fa);ha=1-W;oa=t[0];qa=t[1];va=t[2];xa=t[3];Ha=t[4];Ea=t[5];Da=t[6];Sa=t[7];Ma=t[8];Qa=
t[9];Ra=t[10];Ka=t[11];Ua=aa*aa*ha+W;Wa=m*aa*ha+B*V;wa=B*aa*ha-m*V;ub=aa*m*ha-B*V;jb=m*m*ha+W;lb=B*m*ha+aa*V;b=aa*B*ha+m*V;V=m*B*ha-aa*V;W=B*B*ha+W;c[0]=oa*Ua+Ha*Wa+Ma*wa;c[1]=qa*Ua+Ea*Wa+Qa*wa;c[2]=va*Ua+Da*Wa+Ra*wa;c[3]=xa*Ua+Sa*Wa+Ka*wa;c[4]=oa*ub+Ha*jb+Ma*lb;c[5]=qa*ub+Ea*jb+Qa*lb;c[6]=va*ub+Da*jb+Ra*lb;c[7]=xa*ub+Sa*jb+Ka*lb;c[8]=oa*b+Ha*V+Ma*W;c[9]=qa*b+Ea*V+Qa*W;c[10]=va*b+Da*V+Ra*W;c[11]=xa*b+Sa*V+Ka*W;t!==c&&(c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]);return c}function p(c,t,fa){const B=
Math.sin(fa);fa=Math.cos(fa);const aa=t[4],m=t[5],F=t[6],V=t[7],W=t[8],ha=t[9],oa=t[10],qa=t[11];t!==c&&(c[0]=t[0],c[1]=t[1],c[2]=t[2],c[3]=t[3],c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]);c[4]=aa*fa+W*B;c[5]=m*fa+ha*B;c[6]=F*fa+oa*B;c[7]=V*fa+qa*B;c[8]=W*fa-aa*B;c[9]=ha*fa-m*B;c[10]=oa*fa-F*B;c[11]=qa*fa-V*B;return c}function y(c,t,fa){const B=Math.sin(fa);fa=Math.cos(fa);const aa=t[0],m=t[1],F=t[2],V=t[3],W=t[8],ha=t[9],oa=t[10],qa=t[11];t!==c&&(c[4]=t[4],c[5]=t[5],c[6]=t[6],c[7]=t[7],c[12]=
t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]);c[0]=aa*fa-W*B;c[1]=m*fa-ha*B;c[2]=F*fa-oa*B;c[3]=V*fa-qa*B;c[8]=aa*B+W*fa;c[9]=m*B+ha*fa;c[10]=F*B+oa*fa;c[11]=V*B+qa*fa;return c}function O(c,t,fa){const B=Math.sin(fa);fa=Math.cos(fa);const aa=t[0],m=t[1],F=t[2],V=t[3],W=t[4],ha=t[5],oa=t[6],qa=t[7];t!==c&&(c[8]=t[8],c[9]=t[9],c[10]=t[10],c[11]=t[11],c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]);c[0]=aa*fa+W*B;c[1]=m*fa+ha*B;c[2]=F*fa+oa*B;c[3]=V*fa+qa*B;c[4]=W*fa-aa*B;c[5]=ha*fa-m*B;c[6]=oa*fa-F*B;
c[7]=qa*fa-V*B;return c}function q(c,t){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=t[0];c[13]=t[1];c[14]=t[2];c[15]=1;return c}function n(c,t){c[0]=t[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=t[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=t[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function z(c,t,fa){if(0===t)return ba(c);let B=fa[0],aa=fa[1];fa=fa[2];let m=Math.sqrt(B*B+aa*aa+fa*fa),F=void 0,V=void 0,W=void 0;if(m<ea.getEpsilon())return null;m=1/m;B*=
m;aa*=m;fa*=m;F=Math.sin(t);V=Math.cos(t);W=1-V;c[0]=B*B*W+V;c[1]=aa*B*W+fa*F;c[2]=fa*B*W-aa*F;c[3]=0;c[4]=B*aa*W-fa*F;c[5]=aa*aa*W+V;c[6]=fa*aa*W+B*F;c[7]=0;c[8]=B*fa*W+aa*F;c[9]=aa*fa*W-B*F;c[10]=fa*fa*W+V;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function U(c,t){const fa=Math.sin(t);t=Math.cos(t);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=t;c[6]=fa;c[7]=0;c[8]=0;c[9]=-fa;c[10]=t;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function H(c,t){const fa=Math.sin(t);t=Math.cos(t);c[0]=t;c[1]=
0;c[2]=-fa;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=fa;c[9]=0;c[10]=t;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function E(c,t){const fa=Math.sin(t);t=Math.cos(t);c[0]=t;c[1]=fa;c[2]=0;c[3]=0;c[4]=-fa;c[5]=t;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function G(c,t,fa){var B=t[0],aa=t[1],m=t[2],F=t[3],V=B+B,W=aa+aa;const ha=m+m;t=B*V;const oa=B*W;B*=ha;const qa=aa*W;aa*=ha;m*=ha;V*=F;W*=F;F*=ha;c[0]=1-(qa+m);c[1]=oa+F;c[2]=B-W;c[3]=0;c[4]=oa-F;c[5]=
1-(t+m);c[6]=aa+V;c[7]=0;c[8]=B+W;c[9]=aa-V;c[10]=1-(t+qa);c[11]=0;c[12]=fa[0];c[13]=fa[1];c[14]=fa[2];c[15]=1;return c}function A(c,t){const fa=eb,B=-t[0],aa=-t[1],m=-t[2],F=t[3],V=t[4],W=t[5],ha=t[6],oa=t[7],qa=B*B+aa*aa+m*m+F*F;0<qa?(fa[0]=2*(V*F+oa*B+W*m-ha*aa)/qa,fa[1]=2*(W*F+oa*aa+ha*B-V*m)/qa,fa[2]=2*(ha*F+oa*m+V*aa-W*B)/qa):(fa[0]=2*(V*F+oa*B+W*m-ha*aa),fa[1]=2*(W*F+oa*aa+ha*B-V*m),fa[2]=2*(ha*F+oa*m+V*aa-W*B));G(c,t,fa);return c}function C(c,t){c[0]=t[12];c[1]=t[13];c[2]=t[14];return c}function J(c,
t){const fa=t[0],B=t[1],aa=t[2],m=t[4],F=t[5],V=t[6],W=t[8],ha=t[9];t=t[10];c[0]=Math.sqrt(fa*fa+B*B+aa*aa);c[1]=Math.sqrt(m*m+F*F+V*V);c[2]=Math.sqrt(W*W+ha*ha+t*t);return c}function ca(c,t){const fa=t[0]+t[5]+t[10];let B=0;0<fa?(B=2*Math.sqrt(fa+1),c[3]=.25*B,c[0]=(t[6]-t[9])/B,c[1]=(t[8]-t[2])/B,c[2]=(t[1]-t[4])/B):t[0]>t[5]&&t[0]>t[10]?(B=2*Math.sqrt(1+t[0]-t[5]-t[10]),c[3]=(t[6]-t[9])/B,c[0]=.25*B,c[1]=(t[1]+t[4])/B,c[2]=(t[8]+t[2])/B):t[5]>t[10]?(B=2*Math.sqrt(1+t[5]-t[0]-t[10]),c[3]=(t[8]-
t[2])/B,c[0]=(t[1]+t[4])/B,c[1]=.25*B,c[2]=(t[6]+t[9])/B):(B=2*Math.sqrt(1+t[10]-t[0]-t[5]),c[3]=(t[1]-t[4])/B,c[0]=(t[8]+t[2])/B,c[1]=(t[6]+t[9])/B,c[2]=.25*B);return c}function ja(c,t,fa,B){var aa=t[0],m=t[1],F=t[2],V=t[3],W=aa+aa,ha=m+m,oa=F+F;t=aa*W;const qa=aa*ha;aa*=oa;const va=m*ha;m*=oa;F*=oa;W*=V;ha*=V;V*=oa;oa=B[0];const xa=B[1];B=B[2];c[0]=(1-(va+F))*oa;c[1]=(qa+V)*oa;c[2]=(aa-ha)*oa;c[3]=0;c[4]=(qa-V)*xa;c[5]=(1-(t+F))*xa;c[6]=(m+W)*xa;c[7]=0;c[8]=(aa+ha)*B;c[9]=(m-W)*B;c[10]=(1-(t+va))*
B;c[11]=0;c[12]=fa[0];c[13]=fa[1];c[14]=fa[2];c[15]=1;return c}function P(c,t,fa,B,aa){var m=t[0],F=t[1],V=t[2],W=t[3],ha=m+m,oa=F+F,qa=V+V;t=m*ha;var va=m*oa,xa=m*qa;m=F*oa;F*=qa;var Ha=V*qa;V=W*ha;oa*=W;const Ea=W*qa;var Da=B[0],Sa=B[1];qa=B[2];B=aa[0];W=aa[1];aa=aa[2];ha=(1-(m+Ha))*Da;const Ma=(va+Ea)*Da;Da*=xa-oa;va=(va-Ea)*Sa;Ha=(1-(t+Ha))*Sa;Sa*=F+V;xa=(xa+oa)*qa;F=(F-V)*qa;t=(1-(t+m))*qa;c[0]=ha;c[1]=Ma;c[2]=Da;c[3]=0;c[4]=va;c[5]=Ha;c[6]=Sa;c[7]=0;c[8]=xa;c[9]=F;c[10]=t;c[11]=0;c[12]=fa[0]+
B-(ha*B+va*W+xa*aa);c[13]=fa[1]+W-(Ma*B+Ha*W+F*aa);c[14]=fa[2]+aa-(Da*B+Sa*W+t*aa);c[15]=1;return c}function Q(c,t){var fa=t[0],B=t[1],aa=t[2];t=t[3];var m=fa+fa,F=B+B;const V=aa+aa;fa*=m;const W=B*m;B*=F;const ha=aa*m,oa=aa*F;aa*=V;m*=t;F*=t;t*=V;c[0]=1-B-aa;c[1]=W+t;c[2]=ha-F;c[3]=0;c[4]=W-t;c[5]=1-fa-aa;c[6]=oa+m;c[7]=0;c[8]=ha+F;c[9]=oa-m;c[10]=1-fa-B;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function v(c,t,fa,B,aa,m,F){const V=1/(fa-t),W=1/(aa-B),ha=1/(m-F);c[0]=2*m*V;c[1]=0;c[2]=0;c[3]=
0;c[4]=0;c[5]=2*m*W;c[6]=0;c[7]=0;c[8]=(fa+t)*V;c[9]=(aa+B)*W;c[10]=(F+m)*ha;c[11]=-1;c[12]=0;c[13]=0;c[14]=F*m*2*ha;c[15]=0;return c}function x(c,t,fa,B,aa){t=1/Math.tan(t/2);let m=void 0;c[0]=t/fa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=t;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=aa&&Infinity!==aa?(m=1/(B-aa),c[10]=(aa+B)*m,c[14]=2*aa*B*m):(c[10]=-1,c[14]=-2*B);return c}function Z(c,t,fa,B){const aa=Math.tan(t.upDegrees*Math.PI/180),m=Math.tan(t.downDegrees*Math.PI/180),F=Math.tan(t.leftDegrees*
Math.PI/180);t=Math.tan(t.rightDegrees*Math.PI/180);const V=2/(F+t),W=2/(aa+m);c[0]=V;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=W;c[6]=0;c[7]=0;c[8]=-((F-t)*V*.5);c[9]=(aa-m)*W*.5;c[10]=B/(fa-B);c[11]=-1;c[12]=0;c[13]=0;c[14]=B*fa/(fa-B);c[15]=0;return c}function ka(c,t,fa,B,aa,m,F){const V=1/(t-fa),W=1/(B-aa),ha=1/(m-F);c[0]=-2*V;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*W;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*ha;c[11]=0;c[12]=(t+fa)*V;c[13]=(aa+B)*W;c[14]=(F+m)*ha;c[15]=1;return c}function na(c,t,fa,B){const aa=
t[0],m=t[1];t=t[2];let F=aa-fa[0],V=m-fa[1];fa=t-fa[2];var W=ea.getEpsilon();if(Math.abs(F)<W&&Math.abs(V)<W&&Math.abs(fa)<W)ba(c);else{var ha=1/Math.sqrt(F*F+V*V+fa*fa);F*=ha;V*=ha;fa*=ha;ha=B[0];var oa=B[1];W=B[2];B=oa*fa-W*V;W=W*F-ha*fa;oa=ha*V-oa*F;(ha=Math.sqrt(B*B+W*W+oa*oa))?(ha=1/ha,B*=ha,W*=ha,oa*=ha):oa=W=B=0;var qa=V*oa-fa*W,va=fa*B-F*oa,xa=F*W-V*B;(ha=Math.sqrt(qa*qa+va*va+xa*xa))?(ha=1/ha,qa*=ha,va*=ha,xa*=ha):xa=va=qa=0;c[0]=B;c[1]=qa;c[2]=F;c[3]=0;c[4]=W;c[5]=va;c[6]=V;c[7]=0;c[8]=
oa;c[9]=xa;c[10]=fa;c[11]=0;c[12]=-(B*aa+W*m+oa*t);c[13]=-(qa*aa+va*m+xa*t);c[14]=-(F*aa+V*m+fa*t);c[15]=1}}function sa(c,t,fa,B){const aa=t[0],m=t[1];t=t[2];var F=B[0];const V=B[1];var W=B[2];B=aa-fa[0];let ha=m-fa[1];fa=t-fa[2];let oa=B*B+ha*ha+fa*fa;0<oa&&(oa=1/Math.sqrt(oa),B*=oa,ha*=oa,fa*=oa);let qa=V*fa-W*ha;W=W*B-F*fa;F=F*ha-V*B;oa=qa*qa+W*W+F*F;0<oa&&(oa=1/Math.sqrt(oa),qa*=oa,W*=oa,F*=oa);c[0]=qa;c[1]=W;c[2]=F;c[3]=0;c[4]=ha*F-fa*W;c[5]=fa*qa-B*F;c[6]=B*W-ha*qa;c[7]=0;c[8]=B;c[9]=ha;c[10]=
fa;c[11]=0;c[12]=aa;c[13]=m;c[14]=t;c[15]=1;return c}function ta(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function za(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function Ba(c,t,fa){c[0]=t[0]+fa[0];c[1]=t[1]+fa[1];c[2]=t[2]+fa[2];c[3]=t[3]+fa[3];c[4]=
t[4]+fa[4];c[5]=t[5]+fa[5];c[6]=t[6]+fa[6];c[7]=t[7]+fa[7];c[8]=t[8]+fa[8];c[9]=t[9]+fa[9];c[10]=t[10]+fa[10];c[11]=t[11]+fa[11];c[12]=t[12]+fa[12];c[13]=t[13]+fa[13];c[14]=t[14]+fa[14];c[15]=t[15]+fa[15];return c}function Ca(c,t,fa){c[0]=t[0]-fa[0];c[1]=t[1]-fa[1];c[2]=t[2]-fa[2];c[3]=t[3]-fa[3];c[4]=t[4]-fa[4];c[5]=t[5]-fa[5];c[6]=t[6]-fa[6];c[7]=t[7]-fa[7];c[8]=t[8]-fa[8];c[9]=t[9]-fa[9];c[10]=t[10]-fa[10];c[11]=t[11]-fa[11];c[12]=t[12]-fa[12];c[13]=t[13]-fa[13];c[14]=t[14]-fa[14];c[15]=t[15]-
fa[15];return c}function La(c,t,fa){c[0]=t[0]*fa;c[1]=t[1]*fa;c[2]=t[2]*fa;c[3]=t[3]*fa;c[4]=t[4]*fa;c[5]=t[5]*fa;c[6]=t[6]*fa;c[7]=t[7]*fa;c[8]=t[8]*fa;c[9]=t[9]*fa;c[10]=t[10]*fa;c[11]=t[11]*fa;c[12]=t[12]*fa;c[13]=t[13]*fa;c[14]=t[14]*fa;c[15]=t[15]*fa;return c}function Oa(c,t,fa,B){c[0]=t[0]+fa[0]*B;c[1]=t[1]+fa[1]*B;c[2]=t[2]+fa[2]*B;c[3]=t[3]+fa[3]*B;c[4]=t[4]+fa[4]*B;c[5]=t[5]+fa[5]*B;c[6]=t[6]+fa[6]*B;c[7]=t[7]+fa[7]*B;c[8]=t[8]+fa[8]*B;c[9]=t[9]+fa[9]*B;c[10]=t[10]+fa[10]*B;c[11]=t[11]+fa[11]*
B;c[12]=t[12]+fa[12]*B;c[13]=t[13]+fa[13]*B;c[14]=t[14]+fa[14]*B;c[15]=t[15]+fa[15]*B;return c}function Ta(c,t){return c[0]===t[0]&&c[1]===t[1]&&c[2]===t[2]&&c[3]===t[3]&&c[4]===t[4]&&c[5]===t[5]&&c[6]===t[6]&&c[7]===t[7]&&c[8]===t[8]&&c[9]===t[9]&&c[10]===t[10]&&c[11]===t[11]&&c[12]===t[12]&&c[13]===t[13]&&c[14]===t[14]&&c[15]===t[15]}function Ya(c,t){if(c===t)return!0;const fa=c[0],B=c[1],aa=c[2],m=c[3],F=c[4],V=c[5],W=c[6],ha=c[7],oa=c[8],qa=c[9],va=c[10],xa=c[11],Ha=c[12],Ea=c[13],Da=c[14];c=
c[15];const Sa=t[0],Ma=t[1],Qa=t[2],Ra=t[3],Ka=t[4],Ua=t[5],Wa=t[6],wa=t[7],ub=t[8],jb=t[9],lb=t[10],b=t[11],gb=t[12],Ob=t[13],Jb=t[14];t=t[15];const la=ea.getEpsilon();return Math.abs(fa-Sa)<=la*Math.max(1,Math.abs(fa),Math.abs(Sa))&&Math.abs(B-Ma)<=la*Math.max(1,Math.abs(B),Math.abs(Ma))&&Math.abs(aa-Qa)<=la*Math.max(1,Math.abs(aa),Math.abs(Qa))&&Math.abs(m-Ra)<=la*Math.max(1,Math.abs(m),Math.abs(Ra))&&Math.abs(F-Ka)<=la*Math.max(1,Math.abs(F),Math.abs(Ka))&&Math.abs(V-Ua)<=la*Math.max(1,Math.abs(V),
Math.abs(Ua))&&Math.abs(W-Wa)<=la*Math.max(1,Math.abs(W),Math.abs(Wa))&&Math.abs(ha-wa)<=la*Math.max(1,Math.abs(ha),Math.abs(wa))&&Math.abs(oa-ub)<=la*Math.max(1,Math.abs(oa),Math.abs(ub))&&Math.abs(qa-jb)<=la*Math.max(1,Math.abs(qa),Math.abs(jb))&&Math.abs(va-lb)<=la*Math.max(1,Math.abs(va),Math.abs(lb))&&Math.abs(xa-b)<=la*Math.max(1,Math.abs(xa),Math.abs(b))&&Math.abs(Ha-gb)<=la*Math.max(1,Math.abs(Ha),Math.abs(gb))&&Math.abs(Ea-Ob)<=la*Math.max(1,Math.abs(Ea),Math.abs(Ob))&&Math.abs(Da-Jb)<=la*
Math.max(1,Math.abs(Da),Math.abs(Jb))&&Math.abs(c-t)<=la*Math.max(1,Math.abs(c),Math.abs(t))}function fb(c){const t=ea.getEpsilon(),fa=c[0],B=c[1],aa=c[2],m=c[4],F=c[5],V=c[6],W=c[8],ha=c[9];c=c[10];return Math.abs(1-(fa*fa+m*m+W*W))<=t&&Math.abs(1-(B*B+F*F+ha*ha))<=t&&Math.abs(1-(aa*aa+V*V+c*c))<=t}function ib(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&1===c[10]}const eb=e.create();e=Object.freeze(Object.defineProperty({__proto__:null,add:Ba,adjoint:l,
copy:S,determinant:r,equals:Ya,exactEquals:Ta,frob:za,fromQuat:Q,fromQuat2:A,fromRotation:z,fromRotationTranslation:G,fromRotationTranslationScale:ja,fromRotationTranslationScaleOrigin:P,fromScaling:n,fromTranslation:q,fromXRotation:U,fromYRotation:H,fromZRotation:E,frustum:v,getRotation:ca,getScaling:J,getTranslation:C,hasIdentityRotation:ib,identity:ba,invert:h,invertOrIdentity:K,isOrthoNormal:fb,lookAt:na,mul:L,multiply:L,multiplyScalar:La,multiplyScalarAndAdd:Oa,ortho:ka,perspective:x,perspectiveFromFieldOfView:Z,
rotate:f,rotateX:p,rotateY:y,rotateZ:O,scale:N,set:I,str:ta,sub:Ca,subtract:Ca,targetTo:sa,translate:w,transpose:R},Symbol.toStringTag,{value:"Module"}));k.add=Ba;k.adjoint=l;k.copy=S;k.determinant=r;k.equals=Ya;k.exactEquals=Ta;k.frob=za;k.fromQuat=Q;k.fromQuat2=A;k.fromRotation=z;k.fromRotationTranslation=G;k.fromRotationTranslationScale=ja;k.fromRotationTranslationScaleOrigin=P;k.fromScaling=n;k.fromTranslation=q;k.fromXRotation=U;k.fromYRotation=H;k.fromZRotation=E;k.frustum=v;k.getRotation=ca;
k.getScaling=J;k.getTranslation=C;k.hasIdentityRotation=ib;k.identity=ba;k.invert=h;k.invertOrIdentity=K;k.isOrthoNormal=fb;k.lookAt=na;k.mat4=e;k.mul=L;k.multiply=L;k.multiplyScalar=La;k.multiplyScalarAndAdd=Oa;k.ortho=ka;k.perspective=x;k.perspectiveFromFieldOfView=Z;k.rotate=f;k.rotateX=p;k.rotateY=y;k.rotateZ=O;k.scale=N;k.set=I;k.str=ta;k.sub=Ca;k.subtract=Ca;k.targetTo=sa;k.translate=w;k.transpose=R})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets",
"../core/has"],function(k,e,ea,S,I){function ba(){return!!e._pe}function R(){return!!I("esri-wasm")}function K(){return N?N:N=(new Promise((p,y)=>k(["./pe-wasm"],p,y))).then(p=>p.peWasm).then(({default:p})=>p({locateFile:y=>S.getAssetUrl(`esri/geometry/support/${y}`)})).then(p=>{h(p)})}function h(p){function y(n,z,U){n[z]=U(n[z])}e._pe=p;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=function(n){function z(){return n.apply(this,
arguments)||this}ea._inherits(z,n);z.prototype.destroy=function(){e._pe.destroy(this)};return ea._createClass(z)}(e._pe.PeGCSExtent);p=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var O of p)y(O.prototype,"getName",n=>function(){return n.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const n of[e._pe.PeGeogtran,e._pe.PeProjcs])y(n.prototype,"getParameters",z=>function(){const U=Array(e.PeDefs.PE_PARM_MAX);
let H=z.call(this);for(let E=0;E<U.length;E++){const G=e._pe.getValue(H,"*");U[E]=G?e._pe.wrapPointer(G,e._pe.PeParameter):null;H+=Int32Array.BYTES_PER_ELEMENT}return U});y(e._pe.PeHorizon.prototype,"getCoord",n=>function(){const z=this.getSize();if(!z)return null;const U=[],H=n.call(this);w(U,z,H);return U});y(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const z=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let U=null;var H=n.call(this);if(!e._pe.compare(H,e._pe.NULL)){U=[H];
const E=this.getSteps();if(1<E){H=e._pe.getPointer(H);for(let G=1;G<E;G++)U.push(e._pe.wrapPointer(H+z*G,e._pe.PeGTlistExtendedGTs))}}return U}});const q=e._pe._pe_getPeHorizonSize();O=n=>function(){let z=this._cache;z||(this._cache=z=new Map);if(z.has(n))return z.get(n);let U=null;var H=n.call(this);if(!e._pe.compare(H,e._pe.NULL)){U=[H];const E=H.getNump();if(1<E){H=e._pe.getPointer(H);for(let G=1;G<E;G++)U.push(e._pe.wrapPointer(H+q*G,e._pe.PeHorizon))}}z.set(n,U);return U};y(e._pe.PeProjcs.prototype,
"horizonGcsGenerate",O);y(e._pe.PeProjcs.prototype,"horizonPcsGenerate",O);e._pe.PeObject.prototype.toString=function(n=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const z=e._pe.getPointer(this),U=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(z,n,U))}}function l(p){if(p){var y=e._pe.getClass(p);y&&(y=e._pe.getCache(y))&&(p=e._pe.getPointer(p))&&delete y[p]}}function r(p,y){const O=[];y=Array(y);for(let q=0;q<p;q++)O.push(e._pe.ensureInt8(y));
return O}function L(p){let y;Array.isArray(p[0])?(y=[],p.forEach(O=>{y.push(O[0],O[1])})):y=p;return y}function w(p,y,O,q=!1){if(q)for(q=0;q<2*y;q++)p[q]=e._pe.getValue(O+q*Float64Array.BYTES_PER_ELEMENT,"double");else{q=0===p.length;for(let n=0;n<y;n++)q&&(p[n]=Array(2)),p[n][0]=e._pe.getValue(O,"double"),p[n][1]=e._pe.getValue(O+Float64Array.BYTES_PER_ELEMENT,"double"),O+=2*Float64Array.BYTES_PER_ELEMENT}}let N;e._pe=null;e.PeCSTransformations=void 0;(function(p){function y(n,z,U){e._pe.ensureCache.prepare();
var H=L(U);const E=U===H;H=e._pe.ensureFloat64(H);(n=e._pe._pe_geog_to_proj(e._pe.getPointer(n),z,H))&&w(U,z,H,E);return n}function O(n,z,U){return q(n,z,U,0)}function q(n,z,U,H){e._pe.ensureCache.prepare();var E=L(U);const G=U===E;E=e._pe.ensureFloat64(E);(n=e._pe._pe_proj_to_geog_center(e._pe.getPointer(n),z,E,H))&&w(U,z,E,G);return n}p.geogToProj=y;p.projGeog=function(n,z,U,H){switch(H){case e.PeDefs.PE_TRANSFORM_P_TO_G:return O(n,z,U);case e.PeDefs.PE_TRANSFORM_G_TO_P:return y(n,z,U)}return 0};
p.projToGeog=O;p.projToGeogCenter=q})(e.PeCSTransformations||(e.PeCSTransformations={}));e.PeDefs=void 0;(function(p){p.init=function(){p.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;p.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;p.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;p.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;p.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;p.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;p.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;p.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;
p.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;p.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;p.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;p.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;p.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;p.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;p.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;p.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;p.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;p.PE_STR_AUTH_NONE=
e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;p.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;p.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;p.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;p.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;p.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;p.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;p.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;p.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
p.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;p.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;p.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;p.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||(e.PeDefs={}));e.PeFactory=void 0;(function(p){function y(z,U){let H=null,E=O[z];E||(E={},O[z]=E);E.hasOwnProperty(String(U))?H=E[U]:(z=e._pe.PeFactory.prototype.factoryByType(z,U),e._pe.compare(z,e._pe.NULL)||(H=z,E[U]=H));return H=n(H)}const O={},q={},n=z=>
{if(z){const U=z.getType();switch(U){case e.PeDefs.PE_TYPE_GEOGCS:z=e._pe.castObject(z,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:z=e._pe.castObject(z,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:z=e._pe.castObject(z,e._pe.PeGeogtran);break;default:U&e.PeDefs.PE_TYPE_UNIT&&(z=e._pe.castObject(z,e._pe.PeUnit))}}return z};p.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};p.coordsys=function(z){return y(e.PeDefs.PE_TYPE_COORDSYS,z)};p.factoryByType=y;p.fromString=function(z,
U){let H=null,E=q[z];E||(E={},q[z]=E);E.hasOwnProperty(U)?H=E[U]:(z=e._pe.PeFactory.prototype.fromString(z,U),e._pe.compare(z,e._pe.NULL)||(H=z,E[U]=H));return H=n(H)};p.geogcs=function(z){return y(e.PeDefs.PE_TYPE_GEOGCS,z)};p.geogtran=function(z){return y(e.PeDefs.PE_TYPE_GEOGTRAN,z)};p.getCode=function(z){return e._pe.PeFactory.prototype.getCode(z)};p.projcs=function(z){return y(e.PeDefs.PE_TYPE_PROJCS,z)};p.unit=function(z){return y(e.PeDefs.PE_TYPE_UNIT,z)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=
null;e.PeGTlistExtended=void 0;(function(p){let y;p.init=function(){p.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;y=e._pe._pe_getPeGTlistExtendedEntrySize()};p.getGTlist=function(O,q,n,z,U,H){let E=null;const G=new e._pe.PeInteger(H);try{const A=e._pe.PeGTlistExtended.prototype.getGTlist(O,q,n,z,U,G);if(H=G.val)if(E=[A],1<H){const C=e._pe.getPointer(A);for(O=1;O<H;O++)E.push(e._pe.wrapPointer(C+y*O,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(G)}return E}})(e.PeGTlistExtended||
(e.PeGTlistExtended={}));e.PeGTlistExtendedEntry=void 0;(function(p){p.destroy=function(y){if(y&&y.length){for(const O of y)l(O),O.getEntries().forEach(q=>{l(q);q=q.getGeogtran();l(q);q.getParameters().forEach(l);[q.getGeogcs1(),q.getGeogcs2()].forEach(n=>{l(n);const z=n.getDatum();l(z);l(z.getSpheroid());l(n.getPrimem());l(n.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(y[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));e.PeGTTransformations=void 0;(function(p){p.geogToGeog=
function(y,O,q,n,z){e._pe.ensureCache.prepare();var U=L(q);const H=q===U;U=e._pe.ensureFloat64(U);let E=0;n&&(E=e._pe.ensureFloat64(n));(y=e._pe._pe_geog_to_geog(e._pe.getPointer(y),O,U,E,z))&&w(q,O,U,H);return y}})(e.PeGTTransformations||(e.PeGTTransformations={}));e.PeNotationDms=void 0;(function(p){const y=(q,n,z,U,H,E)=>{e._pe.ensureCache.prepare();switch(q){case "dd":var G=e._pe._pe_geog_to_dd;var A=e.PeDefs.PE_DD_MAX;break;case "ddm":G=e._pe._pe_geog_to_ddm;A=e.PeDefs.PE_DDM_MAX;break;case "dms":G=
e._pe._pe_geog_to_dms,A=e.PeDefs.PE_DMS_MAX}q=0;n&&(q=e._pe.getPointer(n));n=L(U);n=e._pe.ensureFloat64(n);A=r(z,A);U=e._pe.ensureInt32(A);if(H=G(q,z,n,H,U))for(G=0;G<z;G++)E[G]=e._pe.UTF8ToString(A[G]);return H},O=(q,n,z,U,H)=>{e._pe.ensureCache.prepare();switch(q){case "dd":var E=e._pe._pe_dd_to_geog;break;case "ddm":E=e._pe._pe_ddm_to_geog;break;case "dms":E=e._pe._pe_dms_to_geog}q=0;n&&(q=e._pe.getPointer(n));n=U.map(G=>e._pe.ensureString(G));U=e._pe.ensureInt32(n);n=e._pe.ensureFloat64(Array(2*
z));(E=E(q,z,U,n))&&w(H,z,n);return E};p.geogToDms=function(q,n,z,U,H){return y("dms",q,n,z,U,H)};p.dmsToGeog=function(q,n,z,U){return O("dms",q,n,z,U)};p.geogToDdm=function(q,n,z,U,H){return y("ddm",q,n,z,U,H)};p.ddmToGeog=function(q,n,z,U){return O("ddm",q,n,z,U)};p.geogToDd=function(q,n,z,U,H){return y("dd",q,n,z,U,H)};p.ddToGeog=function(q,n,z,U){return O("dd",q,n,z,U)}})(e.PeNotationDms||(e.PeNotationDms={}));e.PeNotationMgrs=void 0;(function(p){p.init=function(){p.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;
p.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;p.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;p.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;p.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};p.geogToMgrsExtended=function(y,O,q,n,z,U,H){e._pe.ensureCache.prepare();let E=0;y&&(E=e._pe.getPointer(y));y=L(q);q=e._pe.ensureFloat64(y);y=r(O,e.PeDefs.PE_MGRS_MAX);const G=e._pe.ensureInt32(y);if(n=e._pe._pe_geog_to_mgrs_extended(E,
O,q,n,z,U,G))for(z=0;z<O;z++)H[z]=e._pe.UTF8ToString(y[z]);return n};p.mgrsToGeogExtended=function(y,O,q,n,z){e._pe.ensureCache.prepare();let U=0;y&&(U=e._pe.getPointer(y));y=q.map(H=>e._pe.ensureString(H));q=e._pe.ensureInt32(y);y=e._pe.ensureFloat64(Array(2*O));(n=e._pe._pe_mgrs_to_geog_extended(U,O,q,n,y))&&w(z,O,y);return n}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));e.PeNotationUsng=void 0;(function(p){p.geogToUsng=function(y,O,q,n,z,U,H){e._pe.ensureCache.prepare();let E=0;y&&(E=e._pe.getPointer(y));
y=L(q);q=e._pe.ensureFloat64(y);y=r(O,e.PeDefs.PE_MGRS_MAX);const G=e._pe.ensureInt32(y);if(n=e._pe._pe_geog_to_usng(E,O,q,n,z,U,G))for(z=0;z<O;z++)H[z]=e._pe.UTF8ToString(y[z]);return n};p.usngToGeog=function(y,O,q,n){e._pe.ensureCache.prepare();var z=0;y&&(z=e._pe.getPointer(y));y=q.map(U=>e._pe.ensureString(U));q=e._pe.ensureInt32(y);y=e._pe.ensureFloat64(Array(2*O));(z=e._pe._pe_usng_to_geog(z,O,q,y))&&w(n,O,y);return z}})(e.PeNotationUsng||(e.PeNotationUsng={}));e.PeNotationUtm=void 0;(function(p){p.init=
function(){p.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;p.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;p.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};p.geogToUtm=function(y,O,q,n,z){e._pe.ensureCache.prepare();var U=0;y&&(U=e._pe.getPointer(y));y=L(q);q=e._pe.ensureFloat64(y);y=r(O,e.PeDefs.PE_UTM_MAX);const H=e._pe.ensureInt32(y);if(n=e._pe._pe_geog_to_utm(U,O,q,n,H))for(U=0;U<O;U++)z[U]=e._pe.UTF8ToString(y[U]);return n};p.utmToGeog=
function(y,O,q,n,z){e._pe.ensureCache.prepare();let U=0;y&&(U=e._pe.getPointer(y));y=q.map(H=>e._pe.ensureString(H));q=e._pe.ensureInt32(y);y=e._pe.ensureFloat64(Array(2*O));(n=e._pe._pe_utm_to_geog(U,O,q,n,y))&&w(z,O,y);return n}})(e.PeNotationUtm||(e.PeNotationUtm={}));e.PePCSInfo=void 0;(function(p){const y=new Map;p.init=function(){p.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;p.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;p.PE_POLE_OUTSIDE_BOUNDARY=
e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;p.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};p.generate=function(O,q=p.PE_PCSINFO_OPTION_DOMAIN){let n=null,z=null;y.has(O)&&(z=y.get(O),z[q]&&(n=z[q]));n||(n=e._pe.PePCSInfo.prototype.generate(O,q),z||(z=[],y.set(O,z)),z[q]=n);return n}})(e.PePCSInfo||(e.PePCSInfo={}));e.PeVersion=void 0;(function(p){p.versionString=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));const f=Object.freeze(Object.defineProperty({__proto__:null,
get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},get PeGTTransformations(){return e.PeGTTransformations},get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},
get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:h,get _pe(){return e._pe},isLoaded:ba,isSupported:R,load:K},Symbol.toStringTag,{value:"Module"}));e._init=h;e.isLoaded=ba;e.isSupported=R;e.load=K;e.pe=f})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(k,e){const ea=Math.PI/180;var S=e.earth.radius;const I=e.earth.eccentricitySquared;S={a1:S*I,a2:S*I*S*I,a3:S*I*I/2,a4:S*I*S*I*2.5,a5:S*I+S*I*I/2,a6:1-I};e={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};k.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;k.earthEllipsoidConstants=S;k.spheroids=e;k.toRadians=ea;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./GeographicTransformationStep"],function(k,e){return function(){function ea(I){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(I&&I.steps)for(const ba of I.steps)ba instanceof e?this.steps.push(ba):this.steps.push(new e({wkid:ba.wkid,wkt:ba.wkt,isInverse:ba.isInverse}))}ea.cacheKey=function(I,ba){return[void 0!==I.wkid&&null!==I.wkid?I.wkid.toString():"-1",void 0!==I.wkt&&null!==I.wkt?I.wkt.toString():"",void 0!==ba.wkid&&null!==ba.wkid?ba.wkid.toString():"-1",void 0!==
ba.wkt&&null!==ba.wkt?ba.wkt.toString():""].join()};ea.fromGE=function(I){const ba=new ea;let R="";for(const K of I.steps)I=e.fromGE(K),ba.steps.push(I),R+=I.uid.toString()+",";ba._cachedProjection={};ba._gtlistentry=null;ba._chain=R;return ba};var S=ea.prototype;S.getInverse=function(){const I=new ea;I.steps=[];for(let ba=this.steps.length-1;0<=ba;ba--)I.steps.push(this.steps[ba].getInverse());return I};S.getGTListEntry=function(){let I="";for(const ba of this.steps)I+=ba.uid.toString()+",";I!==
this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=I);return this._gtlistentry};S.assignCachedGe=function(I,ba,R){this._cachedProjection[ea.cacheKey(I,ba)]=R};S.getCachedGeTransformation=function(I,ba){let R="";for(const K of this.steps)R+=K.uid.toString()+",";R!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=R);I=this._cachedProjection[ea.cacheKey(I,ba)];return void 0===I?null:I};return k._createClass(ea)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(k){let e=0;return function(){function ea(S){this.uid=e++;S?(this._wkt=null!=S.wkt?S.wkt:null,this._wkid=null!=S.wkid?S.wkid:-1,this._isInverse=null!=S.isInverse?!0===S.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ea.fromGE=function(S){const I=new ea;I._wkt=S.wkt;I._wkid=S.wkid;I._isInverse=S.isInverse;return I};ea.prototype.getInverse=function(){const S=new ea;S._wkt=this.wkt;S._wkid=this._wkid;S._isInverse=!this.isInverse;return S};k._createClass(ea,[{key:"wkt",get:function(){return this._wkt},
set:function(S){this._wkt=S;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(S){this._wkid=S;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(S){this._isInverse=S;this.uid=e++}}]);return ea}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/unitUtils","./spatialReferenceUtils"],function(k,e,ea){k.getGeometryZScaler=function(S,I,ba){if(null==I||null==ba||ba.vcsWkid||ea.equals(I,ba))return null;I=e.getMetersPerVerticalUnitForSR(I);
ba=e.getMetersPerVerticalUnitForSR(ba);const R=I/ba;if(1===R)return null;switch(S){case "point":case "esriGeometryPoint":return K=>{K&&null!=K.z&&(K.z*=R)};case "polyline":case "esriGeometryPolyline":return K=>{if(K)for(const h of K.paths)for(const l of h)2<l.length&&(l[2]*=R)};case "polygon":case "esriGeometryPolygon":return K=>{if(K)for(const h of K.rings)for(const l of h)2<l.length&&(l[2]*=R)};case "multipoint":case "esriGeometryMultipoint":return K=>{if(K)for(const h of K.points)2<h.length&&(h[2]*=
R)};case "extent":case "esriGeometryEnvelope":return K=>{K&&null!=K.zmin&&null!=K.zmax&&(K.zmin*=R,K.zmax*=R)};default:return null}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(k,e,ea,S,I,ba,
R,K,h,l,r){function L(q){const n=[];let z=0,U=0;for(let H=0;H<q.length;H++){const E=q[H];let G=null;for(let A=0;A<E.length;A++)G=E[A],n.push(G),0===A?U=z=G[0]:(z=Math.min(z,G[0]),U=Math.max(U,G[0]));G&&n.push([(z+U)/2,0])}return n}function w(q,n){if(!(q instanceof ba||q instanceof I))throw O.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new ea("straightLineDensify: the input geometry is neither polyline nor polygon");var z=R.getGeometryParts(q);const U=[];for(const E of z){z=
[];U.push(z);z.push([E[0][0],E[0][1]]);for(let G=0;G<E.length-1;G++){const A=E[G][0],C=E[G][1],J=E[G+1][0],ca=E[G+1][1];var H=Math.sqrt((J-A)*(J-A)+(ca-C)*(ca-C));const ja=(ca-C)/H,P=(J-A)/H,Q=H/n;if(1<Q){for(let v=1;v<=Q-1;v++){const x=v*n;z.push([P*x+A,ja*x+C])}H=(H+Math.floor(Q-1)*n)/2;z.push([P*H+A,ja*H+C])}z.push([J,ca])}}return"polygon"===q.type?new I({rings:U,spatialReference:q.spatialReference}):new ba({paths:U,spatialReference:q.spatialReference})}function N(q,n,z){n&&(q=w(q,1E6),q=h.webMercatorToGeographic(q,
!0));z&&(q=R.updatePolyGeometry(q,z));return q}function f(q,n,z){if(Array.isArray(q)){var U=q[0];U>n?(z=R.offsetMagnitude(U,n),q[0]=U+-2*z*n):U<z&&(n=R.offsetMagnitude(U,z),q[0]=U+-2*n*z)}else U=q.x,U>n?(z=R.offsetMagnitude(U,n),q=q.clone().offset(-2*z*n,0)):U<z&&(n=R.offsetMagnitude(U,z),q=q.clone().offset(-2*n*z,0));return q}function p(q,n){let z=-1;for(let U=0;U<n.cutIndexes.length;U++){const H=n.cutIndexes[U],E=n.geometries[U],G=R.getGeometryParts(E);for(let A=0;A<G.length;A++){const C=G[A];C.some(J=>
{if(180>J[0])return!0;J=0;for(var ca=0;ca<C.length;ca++){var ja=C[ca][0];J=ja>J?ja:J}J=Number(J.toFixed(9));J=-360*R.offsetMagnitude(J,180);for(ca=0;ca<C.length;ca++)ja=E.getPoint(A,ca),E.setPoint(A,ca,ja.clone().offset(J,0));return!0})}if(H===z)if("polygon"===q[0].type)for(const A of R.getGeometryParts(E))q[H]=q[H].addRing(A);else{if("polyline"===q[0].type)for(const A of R.getGeometryParts(E))q[H]=q[H].addPath(A)}else z=H,q[H]=E}return q}async function y(q,n,z){if(!Array.isArray(q))return y([q],
n);n&&"string"!==typeof n&&O.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var U="string"===typeof n?n:n?.url??e.geometryServiceUrl;let H,E,G;let A=0;var C=[];n=[];for(var J of q)if(null==J)n.push(J);else{if(!ca){var ca=J.spatialReference;var ja=K.getInfo(ca);var P=(H=ca.isWebMercator)?102100:4326;E=R.cutParams[P].maxX;G=R.cutParams[P].minX;var Q=R.cutParams[P].plus180Line;P=R.cutParams[P].minus180Line}if(ja)if("mesh"===J.type)n.push(J);else if("point"===
J.type)n.push(f(J.clone(),E,G));else if("multipoint"===J.type){var v=J.clone();v.points=v.points.map(x=>f(x,E,G));n.push(v)}else if("extent"===J.type)v=J.clone()._normalize(!1,!1,ja),n.push(v.rings?new I(v):v);else if(J.extent){v=J.extent;const x=2*R.offsetMagnitude(v.xmin,G)*E;let Z=0===x?J.clone():R.updatePolyGeometry(J.clone(),x);v.offset(x,0);v.intersects(Q)&&v.xmax!==E?(A=v.xmax>A?v.xmax:A,Z=N(Z,H),C.push(Z),n.push("cut")):v.intersects(P)&&v.xmin!==G?(A=2*v.xmax*E>A?2*v.xmax*E:A,Z=N(Z,H,360),
C.push(Z),n.push("cut")):n.push(Z)}else n.push(J.clone());else n.push(J)}ca=R.offsetMagnitude(A,E);ja=-90;Q=ca;for(J=new ba;0<ca;)P=-180+360*ca,J.addPath([[P,ja],[P,-1*ja]]),ja*=-1,ca--;if(0<C.length&&0<Q){ca=await l.cut(U,C,J,z);ca=p(C,ca);ja=[];C=[];for(Q=0;Q<n.length;Q++)J=n[Q],"cut"!==J?C.push(J):(J=ca.shift(),P=q[Q],null!=P&&"polygon"===P.type&&P.rings&&1<P.rings.length&&J.rings.length>=P.rings.length?(ja.push(J),C.push("simplify")):C.push(H?h.geographicToWebMercator(J):J));if(!ja.length)return C;
n=await r.simplify(U,ja,z);q=[];for(z=0;z<C.length;z++)U=C[z],"simplify"!==U?q.push(U):q.push(H?h.geographicToWebMercator(n.shift()):n.shift());return q}q=[];for(z=0;z<n.length;z++)U=n[z],"cut"!==U?q.push(U):(U=C.shift(),q.push(!0===H?h.geographicToWebMercator(U):U));return q}const O=S.getLogger("esri.geometry.support.normalizeUtils");k.getDenormalizedExtent=function(q){if(!q)return null;const n=q.extent;if(!n)return null;var z=q.spatialReference&&K.getInfo(q.spatialReference);if(!z)return n;const [U,
H]=z.valid;({width:z}=n);let {xmin:E,xmax:G}=n;[E,G]=[G,E];if("extent"===q.type||0===z||z<=H||z>2*H||E<U||G>H)return n;let A;switch(q.type){case "polygon":if(1<q.rings.length)A=L(q.rings);else return n;break;case "polyline":if(1<q.paths.length)A=L(q.paths);else return n;break;case "multipoint":A=q.points}q=n.clone();for(let C=0;C<A.length;C++){let J=A[C][0];0>J?(J+=H,G=Math.max(J,G)):(J-=H,E=Math.min(J,E))}q.xmin=E;q.xmax=G;return q.width<z?(q.xmin-=H,q.xmax-=H,q):n};k.normalizeCentralMeridian=y;
k.normalizeMapX=function(q,n){if(n=K.getInfo(n)){const [z,U]=n.valid;n=U-z;if(q<z)for(;q<z;)q+=n;if(q>U)for(;q>U;)q-=n}return q};k.straightLineDensify=w;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(k,e,ea,S){function I(ba){return S.isPolygon(ba)?ba.rings:ba.paths}e={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,
-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ea.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ea.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:ea.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:ea.WGS84})}};k.cutParams=e;k.getGeometryParts=I;k.offsetMagnitude=function(ba,
R){return Math.ceil((ba-R)/(2*R))};k.updatePolyGeometry=function(ba,R){const K=I(ba);for(const h of K)for(const l of h)l[0]+=R;return ba};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(k,e,ea,S,I){k.cut=async function(ba,R,K,h){ba=I.parseUrl(ba);const l=R[0].spatialReference;R={...h,query:{...ba.query,f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:S.getJsonType(R[0]),
geometries:R}),cutter:JSON.stringify(K)}};R=await ea(ba.path+"/cut",R);const {cutIndexes:r,geometries:L=[]}=R.data;return{cutIndexes:r,geometries:L.map(w=>{w=S.fromJSON(w);w.spatialReference=l;return w})}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(k,e,ea,S,I,ba){function R(K,h,l){const r={};for(const w in K)if("declaredClass"!==w){var L=K[w];
if(null!=L&&"function"!==typeof L)if(Array.isArray(L)){r[w]=[];for(let N=0;N<L.length;N++)r[w][N]=R(L[N])}else"object"===typeof L?L.toJSON?(L=L.toJSON(l&&l[w]),r[w]=h?L:JSON.stringify(L)):r[w]=h?L:JSON.stringify(L):r[w]=L}return r}k.asValidOptions=function(K,h){return h?{...h,query:{...(K??{}),...h.query}}:{query:K}};k.encode=R;k.getToken=function(K,h){return K?ba.supportsApiKey(K)&&(h||e.apiKey)?h||e.apiKey:ea.id?.findCredential(K)?.token:null};k.parseUrl=function(K){return"string"===typeof K?I.urlToObject(K):
S.clone(K)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports","../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(k,e,ea,S,I){k.simplify=async function(ba,R,K){const h="string"===typeof ba?ea.urlToObject(ba):ba;ba=R[0].spatialReference;const l=S.getJsonType(R[0]);R={...K,query:{...h.query,f:"json",sr:ba.wkid??JSON.stringify(ba),geometries:JSON.stringify(I.encodeGeometries(R))}};
({data:R}=await e(h.path+"/simplify",R));return I.decodeGeometries(R.geometries,l,ba)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(k,e){k.decodeGeometries=function(ea,S,I){const ba=e.getGeometryType(S);return ea.map(R=>{R=ba.fromJSON(R);R.spatialReference=I;return R})};k.encodeGeometries=function(ea){return{geometryType:e.getJsonType(ea[0]),geometries:ea.map(S=>S.toJSON())}};
Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(k,e,ea,S,I,ba,R){function K(f,p){if(!p)return null;if("x"in p){var y={x:0,y:0};[y.x,y.y]=f(p.x,p.y,r);null!=p.z&&(y.z=
p.z);null!=p.m&&(y.m=p.m);return y}return"xmin"in p?(y={xmin:0,ymin:0,xmax:0,ymax:0},[y.xmin,y.ymin]=f(p.xmin,p.ymin,r),[y.xmax,y.ymax]=f(p.xmax,p.ymax,r),p.hasZ&&(y.zmin=p.zmin,y.zmax=p.zmax,y.hasZ=!0),p.hasM&&(y.mmin=p.mmin,y.mmax=p.mmax,y.hasM=!0),y):"rings"in p?{rings:h(p.rings,f),hasM:p.hasM,hasZ:p.hasZ}:"paths"in p?{paths:h(p.paths,f),hasM:p.hasM,hasZ:p.hasZ}:"points"in p?{points:l(p.points,f),hasM:p.hasM,hasZ:p.hasZ}:null}function h(f,p){const y=[];for(const O of f)y.push(l(O,p));return y}
function l(f,p){const y=[];for(const O of f)f=p(O[0],O[1],[0,0]),y.push(f),2<O.length&&f.push(O[2]),3<O.length&&f.push(O[3]);return y}const r=[0,0],L=K.bind(null,R.lngLatToXY),w=K.bind(null,R.xyToLngLat),N=new (function(){function f(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var p=f.prototype;p.push=async function(y,O,q){if(!(y&&y.length&&O&&q)||ba.equals(O,q))return y;const n={geometries:y,inSpatialReference:O,outSpatialReference:q,resolve:null};this._jobs.push(n);return new Promise(z=>
{n.resolve=z;null===this._timer&&(this._timer=setTimeout(this._process,10))})};p._process=function(){this._timer=null;const y=this._jobs.shift();if(y){var {geometries:O,inSpatialReference:q,outSpatialReference:n,resolve:z}=y;R.canProject(q,n)?ba.isWebMercator(n)?z(O.map(L)):z(O.map(w)):z(S.projectMany(I.jsonAdapter,O,q,n,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return e._createClass(f)}());k.checkProjectionSupport=async function(f,p){f&&p&&(f=Array.isArray(f)?
f.map(y=>null!=y.geometry?y.geometry.spatialReference:null).filter(ea.isSome):[f],await S.initializeProjection(f.map(y=>({source:y,dest:p}))))};k.project=function(f,p,y,O){if(!f)return f;y||(y=p,p=f.spatialReference);return ba.isValid(p)&&ba.isValid(y)&&!ba.equals(p,y)?R.canProject(p,y)?(f=ba.isWebMercator(y)?L(f):w(f),f.spatialReference=y,f):S.projectMany(I.jsonAdapter,[f],p,y,null,O)[0]:f};k.projectMany=function(f,p,y){return N.push(f,p,y)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},
"esri/geometry/geometryAdapters/json":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(k,e){let ea=e._createClass(function(K,h,l){this.x=K;this.y=h;this.spatialReference=l;this.m=this.z=void 0}),S=e._createClass(function(K,h,l,r){this.rings=K;this.spatialReference=h;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);r&&(this.hasM=r)}),I=e._createClass(function(K,h,l,r){this.paths=K;this.spatialReference=h;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);r&&(this.hasM=r)}),ba=e._createClass(function(K,
h,l,r){this.points=K;this.spatialReference=h;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);r&&(this.hasM=r)}),R=e._createClass(function(K,h,l,r,L){this.xmin=K;this.ymin=h;this.xmax=l;this.ymax=r;this.spatialReference=L;this.mmax=this.mmin=this.zmax=this.zmin=void 0});k.jsonAdapter={convertToGEGeometry:function(K,h){return null==h?null:K.convertJSONToGeometry(h)},exportPoint:function(K,h,l){l=new ea(K.getPointX(h),K.getPointY(h),l);const r=K.hasZ(h),L=K.hasM(h);r&&(l.z=K.getPointZ(h));L&&(l.m=K.getPointM(h));
return l},exportPolygon:function(K,h,l){return new S(K.exportPaths(h),l,K.hasZ(h),K.hasM(h))},exportPolyline:function(K,h,l){return new I(K.exportPaths(h),l,K.hasZ(h),K.hasM(h))},exportMultipoint:function(K,h,l){return new ba(K.exportPoints(h),l,K.hasZ(h),K.hasM(h))},exportExtent:function(K,h,l){var r=K.hasZ(h);const L=K.hasM(h);l=new R(K.getXMin(h),K.getYMin(h),K.getXMax(h),K.getYMax(h),l);r&&(r=K.getZExtent(h),l.zmin=r.vmin,l.zmax=r.vmax);L&&(K=K.getMExtent(h),l.mmin=K.vmin,l.mmax=K.vmax);return l}};
Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l,r,L,w,N,f,p,y,O,q,n,z,U,H,E,G,A){function C(Q){return null!=Q&&Q.every(v=>"exceedslimit"!==v.statisticType)}let J=e._createClass(function(Q,v=null,x,Z,ka){this.attributes=Q;this.geometry=x;this.centroid=Z;this.filterFlags=ka;this.groupId=-1;this.displayId=v});const ca=new R.MemCacheStorage(2E6);let ja=0,P=function(){function Q(x){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:q.queryCapabilities};this.geometryType=x.geometryType;this.hasM=
!!x.hasM;this.hasZ=!!x.hasZ;this.objectIdField=x.objectIdField;this.spatialReference=x.spatialReference;this.definitionExpression=x.definitionExpression;this.featureStore=x.featureStore;this.aggregateAdapter=x.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=x.timeInfo;x.cacheSpatialQueries&&(this._geometryQueryCache=new R.MemCache(ja++ +"$$",ca));this.fieldsIndex=new E(x.fields);x.scheduler&&x.priority&&(this._frameTask=x.scheduler.registerTask(x.priority))}
var v=Q.prototype;v.destroy=function(){this._frameTask=ba.removeMaybe(this._frameTask);this.clearCache();ba.destroyMaybe(this._geometryQueryCache);this._changeHandle=ba.removeMaybe(this._changeHandle);ba.destroyMaybe(this.fieldsIndex)};v.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};v.executeQuery=async function(x,Z){try{return(await this._executeQuery(x,{},Z)).createQueryResponse()}catch(ka){if(ka!==H.QUERY_ENGINE_EMPTY_RESULT)throw ka;
return(new n.QueryEngineResult([],x,this)).createQueryResponse()}};v.executeQueryForCount=async function(x={},Z){try{return(await this._executeQuery(x,{returnGeometry:!1,returnCentroid:!1,outSR:null},Z)).createQueryResponseForCount()}catch(ka){if(ka!==H.QUERY_ENGINE_EMPTY_RESULT)throw ka;return 0}};v.executeQueryForExtent=async function(x,Z){const ka=x.outSR;try{const na=await this._executeQuery(x,{returnGeometry:!0,returnCentroid:!1,outSR:null},Z),sa=na.size;if(!sa)return{count:0,extent:null};const ta=
await this._getBounds(na.items,na.spatialReference,ka||this.spatialReference);return{count:sa,extent:ta}}catch(na){if(na===H.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw na;}};v.executeQueryForIds=async function(x,Z){return this.executeQueryForIdSet(x,Z).then(ka=>Array.from(ka))};v.executeQueryForIdSet=async function(x,Z){try{const ka=await this._executeQuery(x,{returnGeometry:!0,returnCentroid:!1,outSR:null},Z),na=ka.items,sa=new Set;await this._reschedule(()=>{for(const ta of na)sa.add(ka.featureAdapter.getObjectId(ta))},
Z);return sa}catch(ka){if(ka===H.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ka;}};v.executeQueryForSnapping=async function(x,Z){const {point:ka,distance:na,returnEdge:sa,returnVertex:ta}=x;if(!sa&&!ta)return{candidates:[]};const za=await this._reschedule(()=>this._checkQuerySupport(x.query),Z),Ba=!f.equals(ka.spatialReference,this.spatialReference);Ba&&await O.checkProjectionSupport(ka.spatialReference,this.spatialReference);var Ca="number"===typeof na?na:na.x,La="number"===typeof na?na:na.y;
Ca={xmin:ka.x-Ca,xmax:ka.x+Ca,ymin:ka.y-La,ymax:ka.y+La,spatialReference:ka.spatialReference};Ca=Ba?O.project(Ca,this.spatialReference):Ca;if(!Ca)return{candidates:[]};La=(await N.normalizeCentralMeridian(w.fromJSON(ka),null,{signal:Z}))[0];const Oa=(await N.normalizeCentralMeridian(w.fromJSON(Ca),null,{signal:Z}))[0];if(null==La||null==Oa)return{candidates:[]};const Ta=new n.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Oa.toJSON())),Z),za,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Ta),Z);await this._reschedule(()=>this._executeTimeQuery(Ta),Z);await this._reschedule(()=>this._executeAttributesQuery(Ta),Z);Z=La.toJSON();Z=Ba?O.project(Z,this.spatialReference):Z;return Ta.createSnappingResponse({...x,point:Z,distance:Ba?Math.max(Ca.xmax-Ca.xmin,Ca.ymax-Ca.ymin)/2:na},ka.spatialReference)};v.executeQueryForLatestObservations=async function(x,Z){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new S("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:x,timeInfo:this.timeInfo});try{const ka=await this._executeQuery(x,{},Z);await this._reschedule(()=>this._filterLatest(ka),Z);return ka.createQueryResponse()}catch(ka){if(ka!==H.QUERY_ENGINE_EMPTY_RESULT)throw ka;return(new n.QueryEngineResult([],x,this)).createQueryResponse()}};v.executeQueryForSummaryStatistics=async function(x={},Z,ka){const {field:na,normalizationField:sa,valueExpression:ta}=Z;return(await this._getQueryEngineResultForStats(x,{field:na,normalizationField:sa,valueExpression:ta},
ka)).createSummaryStatisticsResponse(Z)};v.executeQueryForUniqueValues=async function(x={},Z,ka){const {field:na,field2:sa,field3:ta,valueExpression:za}=Z;return(await this._getQueryEngineResultForStats(x,{field:na,field2:sa,field3:ta,valueExpression:za},ka)).createUniqueValuesResponse(Z)};v.executeQueryForClassBreaks=async function(x={},Z,ka){const {field:na,normalizationField:sa,valueExpression:ta}=Z;return(await this._getQueryEngineResultForStats(x,{field:na,normalizationField:sa,valueExpression:ta},
ka)).createClassBreaksResponse(Z)};v.executeQueryForHistogram=async function(x={},Z,ka){const {field:na,normalizationField:sa,valueExpression:ta}=Z;return(await this._getQueryEngineResultForStats(x,{field:na,normalizationField:sa,valueExpression:ta},ka)).createHistogramResponse(Z)};v.fetchRecomputedExtents=async function(x){const [Z,ka]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),
this.spatialReference,this.spatialReference),null!=this._timeExtentPromise?this._timeExtentPromise:this._timeExtentPromise=U.getTimeExtent(this.timeInfo,this.featureStore)]);K.throwIfAborted(x);return{fullExtent:Z,timeExtent:ka}};v._getBounds=async function(x,Z,ka){const na=l.set(l.create(),l.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(x,sa=>l.expandWithAABB(na,sa));x={xmin:na[0],ymin:na[1],xmax:na[3],ymax:na[4],spatialReference:H.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&
isFinite(na[2])&&isFinite(na[5])&&(x.zmin=na[2],x.zmax=na[5]);Z=O.project(x,Z,ka);Z.spatialReference=H.cleanFromGeometryEngine(ka);0===Z.xmax-Z.xmin&&(ka=h.getMetersPerUnitForSR(Z.spatialReference),Z.xmin-=ka,Z.xmax+=ka);0===Z.ymax-Z.ymin&&(ka=h.getMetersPerUnitForSR(Z.spatialReference),Z.ymin-=ka,Z.ymax+=ka);this.hasZ&&null!=Z.zmin&&null!=Z.zmax&&0===Z.zmax-Z.zmin&&(ka=h.getMetersPerUnitForSR(Z.spatialReference),Z.zmin-=ka,Z.zmax+=ka);return Z};v._schedule=async function(x,Z){return null!=this._frameTask?
this._frameTask.schedule(x,Z):x(A.noBudget)};v._reschedule=async function(x,Z){return null!=this._frameTask?this._frameTask.reschedule(x,Z):x(A.noBudget)};v._getAllFeaturesQueryEngineResult=async function(x){return new n.QueryEngineResult(await this._getAllFeatures(),x,this)};v._getAllFeatures=async function(){if(null==this._allFeaturesPromise){const ka=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(na=>ka.push(na))})().then(()=>ka)}const x=this._allFeaturesPromise,Z=await x;
return x===this._allFeaturesPromise?Z.slice():this._getAllFeatures()};v._executeQuery=async function(x,Z,ka){x=I.clone(x);x=await this._schedule(()=>H.normalizeQuery(x,this.definitionExpression,this.spatialReference),ka);x=await this._reschedule(()=>this._checkQuerySupport(x),ka);x={...x,...Z};const na=await this._reschedule(()=>this._executeSceneFilterQuery(x,ka),ka),sa=await this._reschedule(()=>this._executeGeometryQuery(x,na,ka),ka);await this._reschedule(()=>this._executeAggregateIdsQuery(sa),
ka);await this._reschedule(()=>this._executeObjectIdsQuery(sa),ka);await this._reschedule(()=>this._executeTimeQuery(sa),ka);await this._reschedule(()=>this._executeAttributesQuery(sa),ka);return sa};v._executeSceneFilterQuery=async function(x,Z){if(null==x.sceneFilter)return null;const {outSR:ka,returnGeometry:na,returnCentroid:sa}=x;var ta=this.featureStore.featureSpatialReference,za=x.sceneFilter.geometry;const Ba=null==ta||f.equals(ta,za.spatialReference)?za:O.project(za,ta);if(!Ba)return null;
ta=na||sa;ta=f.isValid(ka)&&!f.equals(this.spatialReference,ka)&&ta?async Ta=>this._project(Ta,ka):Ta=>Ta;const Ca=this.featureAdapter;za=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ba)),Z);if("disjoint"===x.sceneFilter.spatialRelationship){if(!za.length)return null;const Ta=new Set;for(var La of za)Ta.add(Ca.getObjectId(La));const Ya=await this._reschedule(()=>this._getAllFeatures(),Z);La=await this._reschedule(async()=>{const fb=await z.getSpatialQueryOperator("esriSpatialRelDisjoint",
Ba,this.geometryType,this.hasZ,this.hasM),ib=await this._runSpatialFilter(Ya,eb=>!Ta.has(Ca.getObjectId(eb))||fb(Ca.getGeometry(eb)),Z);return new n.QueryEngineResult(ib,x,this)},Z);return ta(La)}if(!za.length)return new n.QueryEngineResult([],x,this);if(this._canExecuteSinglePass(Ba,x))return ta(new n.QueryEngineResult(za,x,this));const Oa=await z.getSpatialQueryOperator("esriSpatialRelContains",Ba,this.geometryType,this.hasZ,this.hasM);La=await this._runSpatialFilter(za,Ta=>Oa(Ca.getGeometry(Ta)),
Z);return ta(new n.QueryEngineResult(La,x,this))};v._executeGeometryQuery=async function(x,Z,ka){if(null!=Z&&0===Z.items.length)return Z;x=null!=Z?Z.query:x;const {geometry:na,outSR:sa,spatialRel:ta,returnGeometry:za,returnCentroid:Ba}=x;var Ca=this.featureStore.featureSpatialReference;const La=!na||null==Ca||f.equals(Ca,na.spatialReference)?na:O.project(na,Ca),Oa=za||Ba,Ta=f.isValid(sa)&&!f.equals(this.spatialReference,sa),Ya=this._geometryQueryCache&&null==Z?Ta&&Oa?JSON.stringify({originalFilterGeometry:na,
spatialRelationship:ta,outSpatialReference:sa}):JSON.stringify({originalFilterGeometry:na,spatialRelationship:ta}):null;Ca=Ya?this._geometryQueryCache.get(Ya):null;if(null!=Ca)return new n.QueryEngineResult(Ca,x,this);Ca=async t=>{Ta&&Oa&&await this._project(t,sa);Ya&&this._geometryQueryCache.put(Ya,t.items,t.items.length+1);return t};if(!La)return Ca(null!=Z?Z:await this._getAllFeaturesQueryEngineResult(x));const fb=this.featureAdapter;let ib=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(na)),
ka);if("esriSpatialRelDisjoint"===ta){if(!ib.length)return Ca(null!=Z?Z:await this._getAllFeaturesQueryEngineResult(x));const t=new Set;for(var eb of ib)t.add(fb.getObjectId(eb));const fa=null!=Z?Z.items:await this._reschedule(()=>this._getAllFeatures(),ka);eb=await this._reschedule(async()=>{const B=await z.getSpatialQueryOperator(ta,La,this.geometryType,this.hasZ,this.hasM),aa=await this._runSpatialFilter(fa,m=>!t.has(fb.getObjectId(m))||B(fb.getGeometry(m)),ka);return new n.QueryEngineResult(aa,
x,this)},ka);return Ca(eb)}if(null!=Z){const t=new ea.PositionHint;ib=ib.filter(fa=>0<=ea.indexOf(Z.items,fa,Z.items.length,t))}if(!ib.length)return Ca=new n.QueryEngineResult([],x,this),Ya&&this._geometryQueryCache.put(Ya,Ca.items,1),Ca;if(this._canExecuteSinglePass(La,x))return Ca(new n.QueryEngineResult(ib,x,this));const c=await z.getSpatialQueryOperator(ta,La,this.geometryType,this.hasZ,this.hasM);eb=await this._runSpatialFilter(ib,t=>c(fb.getGeometry(t)),ka);return Ca(new n.QueryEngineResult(eb,
x,this))};v._executeAggregateIdsQuery=function(x){if(0!==x.items.length&&x.query.aggregateIds&&x.query.aggregateIds.length&&null!=this.aggregateAdapter){var Z=new Set;for(const na of x.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(na).forEach(sa=>Z.add(sa));var ka=this.featureAdapter.getObjectId;x.items=x.items.filter(na=>Z.has(ka(na)))}};v._executeObjectIdsQuery=function(x){if(0!==x.items.length&&x.query.objectIds&&x.query.objectIds.length){var Z=new Set(x.query.objectIds),ka=this.featureAdapter.getObjectId;
x.items=x.items.filter(na=>Z.has(ka(na)))}};v._executeTimeQuery=function(x){if(0!==x.items.length){var Z=U.getTimeOperator(this.timeInfo,x.query.timeExtent,this.featureAdapter);null!=Z&&(x.items=x.items.filter(Z))}};v._executeAttributesQuery=function(x){if(0!==x.items.length){var Z=y.getWhereClause(x.query.where,this.fieldsIndex);if(Z){if(!Z.isStandardized)throw new TypeError("Where clause is not standardized");x.items=x.items.filter(ka=>Z.testFeature(ka,this.featureAdapter))}}};v._runSpatialFilter=
async function(x,Z,ka){if(!Z)return x;if(null==this._frameTask)return x.filter(za=>Z(za));let na=0;const sa=[],ta=async za=>{for(;na<x.length;){const Ba=x[na++];Z(Ba)&&(sa.push(Ba),za.madeProgress());za.done&&await this._reschedule(Ca=>ta(Ca),ka)}};return this._reschedule(za=>ta(za),ka).then(()=>sa)};v._filterLatest=function(x){const {trackIdField:Z,startTimeField:ka,endTimeField:na}=this.timeInfo,sa=na||ka,ta=new Map,za=this.featureAdapter.getAttribute;for(const Ba of x.items){const Ca=za(Ba,Z),
La=za(Ba,sa),Oa=ta.get(Ca);(!Oa||La>za(Oa,sa))&&ta.set(Ca,Ba)}x.items=Array.from(ta.values())};v._canExecuteSinglePass=function(x,Z){({spatialRel:Z}=Z);return z.canQueryWithRBush(x)&&("esriSpatialRelEnvelopeIntersects"===Z||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===Z||"esriSpatialRelContains"===Z||"esriSpatialRelWithin"===Z))};v._project=async function(x,Z){if(!Z||f.equals(this.spatialReference,Z))return x;const ka=this.featureAdapter;Z=await O.projectMany(x.items.map(na=>
H.getGeometry(this.geometryType,this.hasZ,this.hasM,ka.getGeometry(na))),this.spatialReference,Z);x.items=Z.map((na,sa)=>ka.cloneWithGeometry(x.items[sa],p.convertFromGeometry(na,this.hasZ,this.hasM)));return x};v._getQueryBBoxes=function(x){if(z.canQueryWithRBush(x)){if(w.isExtent(x))return[r.fromValues(x.xmin,x.ymin,x.xmax,x.ymax)];if(w.isPolygon(x))return x.rings.map(Z=>r.fromValues(Math.min(Z[0][0],Z[2][0]),Math.min(Z[0][1],Z[2][1]),Math.max(Z[0][0],Z[2][0]),Math.max(Z[0][1],Z[2][1])))}return[L.getBoundsXY(r.create(),
x)]};v._searchFeatures=async function(x){const Z=new Set;await Promise.all(x.map(ka=>this.featureStore.forEachInBounds(ka,na=>Z.add(na))));x=Array.from(Z.values());Z.clear();return x};v._checkStatisticsSupport=async function(x,Z){if(0>(x.distance??0)||null!=x.geometryPrecision||x.multipatchOption||x.pixelSize||x.relationParam||x.text||x.outStatistics||x.groupByFieldsForStatistics||x.having||x.orderByFields)throw new S("feature-store:unsupported-query","Unsupported query options",{query:x});this._checkAttributesQuerySupport(x);
return Promise.all([this._checkStatisticsParamsSupport(Z,x),z.checkSpatialQuerySupport(x,this.geometryType,this.spatialReference),O.checkProjectionSupport(this.spatialReference,x.outSR)]).then(()=>x)};v._checkStatisticsParamsSupport=async function(x,Z){var ka=[];x.valueExpression&&({arcadeUtils:ka}=await G.loadArcade(),ka=ka.extractFieldNames(x.valueExpression));x.field&&ka.push(x.field);x.field2&&ka.push(x.field2);x.field3&&ka.push(x.field3);x.normalizationField&&ka.push(x.normalizationField);if(!ka.length&&
!x.valueExpression)throw new S("feature-store:unsupported-query","field or valueExpression is required",{params:x});y.validateFields(this.fieldsIndex,ka,{errorMessage:"Cannot calculate statistics for missing fields",query:Z});y.validateFieldTypes(this.fieldsIndex,ka,{expressionName:"statistics",query:Z})};v._checkQuerySupport=async function(x){if(0>(x.distance??0)||null!=x.geometryPrecision||x.multipatchOption||x.pixelSize||x.relationParam||x.text)throw new S("feature-store:unsupported-query","Unsupported query options",
{query:x});this._checkAttributesQuerySupport(x);this._checkStatisticsQuerySupport(x);return Promise.all([z.checkSpatialQuerySupport(x,this.geometryType,this.spatialReference),O.checkProjectionSupport(this.spatialReference,x.outSR)]).then(()=>x)};v._checkAttributesQuerySupport=function(x){const {outFields:Z,orderByFields:ka,returnDistinctValues:na,outStatistics:sa}=x,ta=sa?sa.map(za=>za.outStatisticFieldName&&za.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ka&&0<ka.length){const za=ka.map(Ba=>
{const Ca=Ba.toLowerCase();return Ca.includes(" asc")?Ca.split(" asc")[0]:Ca.includes(" desc")?Ca.split(" desc")[0]:Ba}).filter(Ba=>!ta.includes(Ba));y.validateFields(this.fieldsIndex,za,{expressionName:"orderByFields",query:x})}if(Z&&0<Z.length)y.validateFields(this.fieldsIndex,Z,{expressionName:"outFields",query:x});else if(na)throw new S("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:x});y.validateWhere(this.fieldsIndex,x.where,x)};v._checkStatisticsQuerySupport=
function(x){const {outStatistics:Z,groupByFieldsForStatistics:ka,having:na}=x;var sa=ka&&ka.length,ta=Z&&Z.length;if(na){if(!sa||!ta)throw new S("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:x});y.validateHaving(this.fieldsIndex,na,Z,x)}if(ta&&C(Z)){ta=Z.map(za=>za.onStatisticField).filter(Boolean);y.validateFields(this.fieldsIndex,ta,{expressionName:"onStatisticFields",query:x});sa&&y.validateFields(this.fieldsIndex,ka,{expressionName:"groupByFieldsForStatistics",
query:x});sa=new Set([...y.validNumericTypesKebabDict.jsonValues,...y.validDateTypesKebabDict.jsonValues]);ta=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...y.validNumericTypesKebabDict.apiValues,...y.validDateTypesKebabDict.apiValues]);for(const za of Z){const {onStatisticField:Ba,statisticType:Ca}=za;if(("percentile_disc"===Ca||"percentile_cont"===Ca)&&"statisticParameters"in za){const {statisticParameters:La}=za;if(!La)throw new S("feature-store:unsupported-query","statisticParameters should be set for percentile type",
{definition:za,query:x});}else if("count"!==Ca&&"min"!==Ca&&"max"!==Ca&&Ba&&y.hasInvalidFieldType(Ba,this.fieldsIndex,sa))throw new S("feature-store:unsupported-query",`outStatistics with '${Ca}' statistic type, only supports ${ta} field types`,{definition:za,query:x});}}};v._getQueryEngineResultForStats=async function(x,Z,ka){x=I.clone(x);try{x=await this._schedule(()=>H.normalizeQuery(x,this.definitionExpression,this.spatialReference),ka);x=await this._reschedule(()=>this._checkStatisticsSupport(x,
Z),ka);const na=await this._reschedule(()=>this._executeSceneFilterQuery(x,ka),ka),sa=await this._reschedule(()=>this._executeGeometryQuery(x,na,ka),ka);await this._reschedule(()=>this._executeAggregateIdsQuery(sa),ka);await this._reschedule(()=>this._executeObjectIdsQuery(sa),ka);await this._reschedule(()=>this._executeTimeQuery(sa),ka);await this._reschedule(()=>this._executeAttributesQuery(sa),ka);return sa}catch(na){if(na!==H.QUERY_ENGINE_EMPTY_RESULT)throw na;return new n.QueryEngineResult([],
x,this)}};e._createClass(Q,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return Q}();k.Feature=J;k.QueryEngine=P;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(k,e,ea){k.RemoveMode=void 0;(function(R){R[R.ALL=0]="ALL";R[R.SOME=1]="SOME"})(k.RemoveMode||(k.RemoveMode={}));let S=function(){function R(h,l,r){this.name=h;this._storage=l;
this.id=`${ba++}:`;this.maxSize=this.size=0;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}var K=R.prototype;K.destroy=function(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null};K.resetHitRate=function(){this._hit=this._miss=0};K.put=function(h,l,r,L=0){this._storage.put(this,h,l,r,L)};K.get=function(h){h=this._storage.get(this,
h);void 0===h?++this._miss:++this._hit;return h};K.pop=function(h){h=this._storage.pop(this,h);void 0===h?++this._miss:++this._hit;return h};K.updateSize=function(h,l,r){this._storage.updateSize(this,h,l,r)};K.clear=function(){this._storage.clear(this)};K.clearAll=function(){this._storage.clearAll()};K.resetStats=function(){this._storage.resetStats()};e._createClass(R,[{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},
{key:"performanceInfo",get:function(){return this._storage.performanceInfo}}]);return R}(),I=function(){function R(h=10485760){this._maxSize=h;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new ea;this._users=new ea}var K=R.prototype;K.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};K.register=function(h){this._users.push(h)};K.deregister=function(h){this._users.removeUnordered(h)};K.registerRemoveFunc=function(h,l){this._removeFuncs.push([h,
l])};K.deregisterRemoveFunc=function(h){this._removeFuncs.filterInPlace(l=>l[0]!==h)};K.put=function(h,l,r,L,w){l=h.id+l;const N=this._db.get(l);N&&(this._size-=N.size,h.size-=N.size,this._db.delete(l),N.entry!==r&&this._notifyRemove(l,N.entry,k.RemoveMode.ALL));L>this._maxSize?this._notifyRemove(l,r,k.RemoveMode.ALL):void 0===r?console.warn("Refusing to cache undefined entry "):!L||0>L?console.warn("Refusing to cache entry with invalid size "+L):(w=1+Math.max(w,-3)- -3,this._db.set(l,{entry:r,size:L,
lifetime:w,lives:w}),this._size+=L,h.size+=L,this._checkSizeLimits())};K.updateSize=function(h,l,r,L){l=h.id+l;const w=this._db.get(l);if(w&&w.entry===r){this._size-=w.size;for(h.size-=w.size;L>this._maxSize;)if(L=this._notifyRemove(l,r,k.RemoveMode.SOME),!(null!=L&&0<L)){this._db.delete(l);return}w.size=L;this._size+=L;h.size+=L;this._checkSizeLimits()}};K.pop=function(h,l){l=h.id+l;const r=this._db.get(l);if(r)return this._size-=r.size,h.size-=r.size,this._db.delete(l),++this._hit,r.entry;++this._miss};
K.get=function(h,l){l=h.id+l;h=this._db.get(l);if(void 0===h)++this._miss;else return this._db.delete(l),h.lives=h.lifetime,this._db.set(l,h),++this._hit,h.entry};K.resetStats=function(){this._hit=this._miss=0;this._users.forAll(h=>h.resetHitRate())};K.clear=function(h){const l=h.id;this._db.forEach((r,L)=>{L.startsWith(l)&&(this._size-=r.size,this._db.delete(L),this._notifyRemove(L,r.entry,k.RemoveMode.ALL))});h.size=0};K.clearAll=function(){this._db.forEach((h,l)=>this._notifyRemove(l,h.entry,k.RemoveMode.ALL));
this._users.forEach(h=>h.size=0);this._size=0;this._db.clear()};K._getHitRate=function(){return this._hit/(this._hit+this._miss)};K._notifyRemove=function(h,l,r){let L;this._removeFuncs.some(w=>h.startsWith(w[0])?(w=w[1](l,r),"number"===typeof w&&(L=w),!0):!1);return L};K._checkSizeLimits=function(){if(this._size>this._maxSize)for(const [h,l]of this._db)if(this._purgeItem(h,l),this._size<=.9*this.maxSize)return;this._users.forEach(h=>{if(0<h.maxSize&&h.size>h.maxSize)for(const [l,r]of this._db)if(l.startsWith(h.id)&&
(this._purgeItem(l,r,h),h.size<=.9*h.maxSize))break})};K._purgeItem=function(h,l,r=this._users.find(L=>h.startsWith(L.id))){this._db.delete(h);if(1>=l.lives){this._size-=l.size;r&&(r.size-=l.size);const L=this._notifyRemove(h,l.entry,k.RemoveMode.SOME);null!=L&&0<L&&(this._size+=L,r&&(r.size+=L),l.lives=l.lifetime,l.size=L,this._db.set(h,l))}else--l.lives,this._db.set(h,l)};e._createClass(R,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(h){this._maxSize=
Math.max(h,0);this._checkSizeLimits()}},{key:"performanceInfo",get:function(){const h={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},l={},r=[];this._db.forEach((N,f)=>{const p=N.lifetime;r[p]=(r[p]||0)+N.size;this._users.forAll(y=>{const {id:O,name:q}=y;f.startsWith(O)&&(l[q]=(l[q]||0)+N.size)})});const L={};this._users.forAll(N=>{const f=N.name;"hitRate"in N&&"number"===typeof N.hitRate&&
!isNaN(N.hitRate)&&0<N.hitRate?(l[f]=l[f]||0,L[f]=Math.round(100*N.hitRate)+"%"):L[f]="0%"});var w=Object.keys(l);w.sort((N,f)=>l[f]-l[N]);w.forEach(N=>h[N]=Math.round(l[N]/2**20)+"MB / "+L[N]);for(w=r.length-1;0<=w;--w){const N=r[w];N&&(h["Priority "+(w+-3-1)]=Math.round(N/this._size*100)+"%")}return h}}]);return R}(),ba=0;k.MIN_PRIORITY=-3;k.MemCache=S;k.MemCacheStorage=I;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/jsonMap","../../../core/sql/WhereClauseCache"],function(k,e,ea,S){function I(y,O,q={}){O=ba(y,O);if(!O)throw new e("feature-store:unsupported-query","invalid SQL expression",{expression:y});const n=q.expressionName||"expression";if(q.validateStandardized&&!O.isStandardized)throw new e("feature-store:unsupported-query",`${n} is not standard`,{expression:y});if(q.validateAggregate&&!O.isAggregate)throw new e("feature-store:unsupported-query",`${n} does not contain a valid aggregate function`,
{expression:y});return O.fieldNames}function ba(y,O){return y?L.get(y,O):null}function R(y,O,q={}){q.errorMessage||(q.errorMessage=q.expressionName?`${q.expressionName} contains invalid fields`:"Fields are invalid");h(y,O,(n,z)=>z.has(n),q)}function K(y,O,q={}){q.errorMessage||(q.errorMessage=q.expressionName?`${q.expressionName} only supports ${p} field types`:`Only ${p} field types are supported`);h(y,O,(n,z)=>!r(n,z),q)}function h(y,O,q,n={}){const z=n.verifyExpression??!0,U=[];for(const H of O)if(O=
q(H,y),"*"!==H&&!O)if(z){O=l(H);try{const E=I(O,y,{validateStandardized:!0});h(y,E,q,n)}catch(E){O=E?.details;if(O?.expression)throw E;O?.invalidFields?U.push(...O.invalidFields):U.push(H)}}else U.push(H);if(U.length)throw new e("feature-store:unsupported-query",n.errorMessage,{invalidFields:U,query:n.query});}function l(y){return y.split(" as ")[0]}function r(y,O,q=f){return(y=O.get(y))?!q.has(y.type):!1}const L=new S.WhereClauseCache(50,500);S=new ea.JSONMap({esriFieldTypeString:"string"});const w=
new ea.JSONMap({esriFieldTypeOID:"oid",esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long"}),N=new ea.JSONMap({esriFieldTypeDate:"date"});ea=new ea.JSONMap({esriFieldTypeGUID:"guid",esriFieldTypeGlobalId:"global-id"});const f=new Set([...w.jsonValues,...N.jsonValues,...S.jsonValues,...ea.jsonValues]),p=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...w.apiValues,...N.apiValues,...S.apiValues,
...ea.apiValues]);k.getAliasFromFieldName=function(y){return y.split(" as ")[1]};k.getExpressionFromFieldName=l;k.getWhereClause=ba;k.hasInvalidFieldType=r;k.validDateTypesKebabDict=N;k.validGuidTypesKebabDict=ea;k.validNumericTypesKebabDict=w;k.validStringTypesKebabDict=S;k.validateFieldTypes=K;k.validateFields=R;k.validateHaving=function(y,O,q,n){if(!O)return!0;const z=I(O,y,{validateAggregate:!0,expressionName:"having"});R(y,z,{expressionName:"having",query:n});K(y,z,{expressionName:"having",query:n});
if(!L.get(O,y)?.getExpressions().every(U=>{const {aggregateType:H,field:E}=U,G=y.get(E)?.name;return q.some(A=>{const {onStatisticField:C,statisticType:J}=A;return y.get(C)?.name===G&&J.toLowerCase().trim()===H})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:O});return!0};k.validateWhere=function(y,O,q){if(!O)return!0;O=I(O,y,{validateStandardized:!0,expressionName:"where clause"});R(y,O,{expressionName:"where clause",query:q});
K(y,O,{expressionName:"where clause",query:q});return!0};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../LRUCache","./WhereClause"],function(k,e,ea,S){let I=function(){function ba(R,K){this._cache=new ea.LRUCache(R);this._invalidCache=new ea.LRUCache(K)}ba.prototype.get=function(R,K){const h=`${K.uid}:${R}`,l=this._cache.get(h);if(l)return l;if(void 0!==this._invalidCache.get(h))return null;
try{const r=S.WhereClause.create(R,K);this._cache.put(h,r);return r}catch{return this._invalidCache.put(h,null),null}};return e._createClass(ba)}();k.WhereClauseCache=I;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./MemCache"],function(k,e,ea){let S=function(){function I(R,K){this._storage=new ea.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=R;this._storage.register(this);
K&&this._storage.registerRemoveFunc("",K)}var ba=I.prototype;ba.destroy=function(){this._storage.deregister(this);this._storage.destroy()};ba.put=function(R,K,h=1){this._storage.put(this,R,K,h,1)};ba.pop=function(R){return this._storage.pop(this,R)};ba.get=function(R){return this._storage.get(this,R)};ba.clear=function(){this._storage.clearAll()};ba.resetHitRate=function(){};e._createClass(I,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(R){this._storage.maxSize=R}}]);return I}();
k.LRUCache=S;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(k,e,ea,S,I,ba){function R(P,Q){P+="";return P.length>=Q?P:Array(Q-P.length+1).join("0")+P}function K(P,Q,v="0",x="0",Z="0",ka="0",na="",sa="0",ta="0"){return"+"===na||"-"===na?(P=`${R(parseInt(P,10),4)}-${R(parseInt(Q,10),2)}-${R(parseInt(v,10),
2)}`,Q="",10>parseFloat(ka)&&(Q="0"),x=`${R(parseInt(x,10),2)}:${R(parseInt(Z,10),2)}:${Q+parseFloat(ka).toString()}`,na=`${na}${R(parseInt(sa,10),2)}:${R(parseInt(ta,10),2)}`,new Date(P+"T"+x+na)):new Date(parseInt(P,10),parseInt(Q,10)-1,parseInt(v,10),parseInt(x,10),parseInt(Z,10),parseFloat(ka))}function h(P){let Q=U.exec(P);if(null!==Q){const [,v,x,Z,ka,na,sa]=Q;return K(v,x,Z,ka,na,sa)}Q=H.exec(P);if(null!==Q){const [,v,x,Z,ka,na,sa,ta,za,Ba]=Q;return K(v,x,Z,ka,na,sa,ta,za,Ba)}Q=E.exec(P);if(null!==
Q){const [,v,x,Z,ka,na,sa,ta,za]=Q;return K(v,x,Z,ka,na,"0",sa,ta,za)}Q=G.exec(P);if(null!==Q){const [,v,x,Z,ka,na]=Q;return K(v,x,Z,ka,na)}Q=z.exec(P);if(null!==Q){const [,v,x,Z]=Q;return K(v,x,Z)}throw Error("SQL Invalid Timestamp");}function l(P){const Q=z.exec(P);if(null===Q)try{return h(P)}catch{throw Error("SQL Invalid Date");}const [,v,x,Z]=Q;return new Date(parseInt(v,10),parseInt(x,10)-1,parseInt(Z,10))}function r(P){return Array.isArray(P)?P:[P]}function L(P){return null!==P?!0!==P:null}
function w(P,Q){return null!=P&&null!=Q?!0===P&&!0===Q:!1===P||!1===Q?!1:null}function N(P,Q){return null!=P&&null!=Q?!0===P||!0===Q:!0===P||!0===Q?!0:null}function f(P,Q){if(null==P)return null;let v=!1;for(const x of Q)if(null==x)v=null;else if(P===x){v=!0;break}return v}function p(P,Q,v){if(null==P)return null;let x="",Z=ca.Normal;for(let ka=0;ka<Q.length;ka++){const na=Q.charAt(ka);switch(Z){case ca.Normal:na===v?Z=ca.Escaped:x="-[]/{}()*+?.\\^$|".includes(na)?x+("\\"+na):"%"===na?x+".*":"_"===
na?x+".":x+na;break;case ca.Escaped:x="-[]/{}()*+?.\\^$|".includes(na)?x+("\\"+na):x+na,Z=ca.Normal}}return(new RegExp("^"+x+"$","m")).test(P)}function y(P){return P instanceof Date?P.valueOf():P}function O(P,Q,v){if(null==Q||null==v)return null;Q=y(Q);v=y(v);switch(P){case "\x3c\x3e":return Q!==v;case "\x3d":return Q===v;case "\x3e":return Q>v;case "\x3c":return Q<v;case "\x3e\x3d":return Q>=v;case "\x3c\x3d":return Q<=v}}function q(P,Q,v){if("||"===P)return I.evaluateFunction("concat",[Q,v]);if(Q instanceof
I.SqlInterval)if(v instanceof Date)switch(P){case "+":return new Date(Q.valueInMilliseconds()+v.getTime());case "-":return Q.valueInMilliseconds()-v.getTime();case "*":return Q.valueInMilliseconds()*v.getTime();case "/":return Q.valueInMilliseconds()/v.getTime()}else if(v instanceof I.SqlInterval)switch(P){case "+":return I.SqlInterval.createFromMilliseconds(Q.valueInMilliseconds()+v.valueInMilliseconds());case "-":return I.SqlInterval.createFromMilliseconds(Q.valueInMilliseconds()-v.valueInMilliseconds());
case "*":return Q.valueInMilliseconds()*v.valueInMilliseconds();case "/":return Q.valueInMilliseconds()/v.valueInMilliseconds()}else Q=Q.valueInMilliseconds();else if(v instanceof I.SqlInterval)if(Q instanceof Date)switch(P){case "+":return new Date(v.valueInMilliseconds()+Q.getTime());case "-":return new Date(Q.getTime()-v.valueInMilliseconds());case "*":return Q.getTime()*v.valueInMilliseconds();case "/":return Q.getTime()/v.valueInMilliseconds()}else v=v.valueInMilliseconds();else if(Q instanceof
Date&&"number"===typeof v)switch(v*=864E5,Q=Q.getTime(),P){case "+":return new Date(Q+v);case "-":return new Date(Q-v);case "*":return new Date(Q*v);case "/":return new Date(Q/v)}else if(v instanceof Date&&"number"===typeof Q)switch(Q*=864E5,v=v.getTime(),P){case "+":return new Date(Q+v);case "-":return new Date(Q-v);case "*":return new Date(Q*v);case "/":return new Date(Q/v)}switch(P){case "+":return Q+v;case "-":return Q-v;case "*":return Q*v;case "/":return Q/v}}function n(P,Q,v,x){P=x.getAttribute(P,
Q);return null!=P&&1===v[Q]?new Date(P):P}const z=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,U=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,H=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,E=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,G=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,A=new Set(["current_timestamp","current_date","current_time"]);let C=function(){function P(){}P.makeBool=function(Q){return!0===
Q};P.featureValue=function(Q,v,x,Z){return n(Q,v,x,Z)};P.equalsNull=function(Q){return null===Q};P.applyLike=function(Q,v,x){return p(Q,v,x)};P.ensureArray=function(Q){return r(Q)};P.applyIn=function(Q,v){return f(Q,v)};P.currentDate=function(){const Q=new Date;Q.setHours(0,0,0,0);return Q};P.makeSqlInterval=function(Q,v,x){return I.SqlInterval.createFromValueAndQualifer(Q,v,x)};P.convertInterval=function(Q){return Q instanceof I.SqlInterval?Q.valueInMilliseconds():Q};P.currentTimestamp=function(){return new Date};
P.compare=function(Q,v,x){return O(Q,v,x)};P.calculate=function(Q,v,x){return q(Q,v,x)};P.makeComparable=function(Q){return y(Q)};P.evaluateFunction=function(Q,v){return I.evaluateFunction(Q,v)};P.lookup=function(Q,v){Q=v[Q];return void 0===Q?null:Q};P.between=function(Q,v){return null==Q||null==v[0]||null==v[1]?null:Q>=v[0]&&Q<=v[1]};P.notbetween=function(Q,v){return null==Q||null==v[0]||null==v[1]?null:Q<v[0]||Q>v[1]};P.ternaryNot=function(Q){return L(Q)};P.ternaryAnd=function(Q,v){return w(Q,v)};
P.ternaryOr=function(Q,v){return N(Q,v)};return e._createClass(P)}(),J=function(){function P(v,x){this.fieldsIndex=x;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=ba.WhereGrammar.parse(v);const {isStandardized:Z,isAggregate:ka,referencedFieldNames:na}=this._extractExpressionInfo(x);this._referencedFieldNames=na;this.isStandardized=Z;this.isAggregate=ka}P.create=function(v,x){return new P(v,x)};var Q=P.prototype;Q.testSet=function(v,x=ja){const Z={};for(const ka of this.fieldNames)Z[ka]=
v.map(na=>x.getAttribute(na,ka));return!!this._evaluateNode(this.parseTree,{attributes:Z},ja)};Q.calculateValue=function(v,x=ja){v=this._evaluateNode(this.parseTree,v,x);return v instanceof I.SqlInterval?v.valueInMilliseconds()/864E5:v};Q.calculateValueCompiled=function(v,x=ja){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(v,this.parameters,x,this._datefields);if(ea("esri-csp-restrictions"))return this.calculateValue(v,x);this._compileMe();return this.parseTree._compiledVersion(v,
this.parameters,x,this._datefields)};Q.testFeature=function(v,x=ja){return!!this._evaluateNode(this.parseTree,v,x)};Q.testFeatureCompiled=function(v,x=ja){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(v,this.parameters,x,this._datefields);if(ea("esri-csp-restrictions"))return this.testFeature(v,x);this._compileMe();return!!this.parseTree._compiledVersion(v,this.parameters,x,this._datefields)};Q.getFunctions=function(){const v=new Set;this._visitAll(this.parseTree,
x=>{"function"===x.type&&v.add(x.name.toLowerCase())});return Array.from(v)};Q.getExpressions=function(){const v=new Map;this._visitAll(this.parseTree,x=>{if("function"===x.type){const Z=x.name.toLowerCase();x=x.args.value[0];if("column-reference"===x.type){x=x.column;const ka=`${Z}-${x}`;v.has(ka)||v.set(ka,{aggregateType:Z,field:x})}}});return[...v.values()]};Q.getVariables=function(){const v=new Set;this._visitAll(this.parseTree,x=>{"parameter"===x.type&&v.add(x.value.toLowerCase())});return Array.from(v)};
Q._compileMe=function(){const v="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",v)).bind(C)};Q._extractExpressionInfo=function(v){const x=[],Z=new Set;let ka=!0,na=!0;this._visitAll(this.parseTree,sa=>{switch(sa.type){case "column-reference":const ta=v?.get(sa.column);let za,Ba;ta?za=Ba=ta.name??"":(Ba=sa.column,za=Ba.toLowerCase());ta&&ta.name&&("date"===ta.type||"esriFieldTypeDate"===
ta.type)&&(this._datefields[ta.name]=1);Z.has(za)||(Z.add(za),x.push(Ba));sa.column=Ba;break;case "function":const {name:Ca,args:La}=sa;sa=La.value.length;ka&&(ka=I.isStandardized(Ca,sa));na&&(na=S.isAggregate(Ca,sa))}});return{referencedFieldNames:Array.from(x),isStandardized:ka,isAggregate:na}};Q._visitAll=function(v,x){if(null!=v)switch(x(v),v.type){case "when-clause":this._visitAll(v.operand,x);this._visitAll(v.value,x);break;case "case-expression":for(const Z of v.clauses)this._visitAll(Z,x);
"simple"===v.format&&this._visitAll(v.operand,x);null!==v.else&&this._visitAll(v.else,x);break;case "expression-list":for(const Z of v.value)this._visitAll(Z,x);break;case "unary-expression":this._visitAll(v.expr,x);break;case "binary-expression":this._visitAll(v.left,x);this._visitAll(v.right,x);break;case "function":this._visitAll(v.args,x)}};Q.evaluateNodeToJavaScript=function(v){switch(v.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(v.value)+", "+JSON.stringify(v.qualifier)+
","+JSON.stringify(v.op)+")";case "case-expression":var x="";if("simple"===v.format){var Z="this.makeComparable("+this.evaluateNodeToJavaScript(v.operand)+")";x="( ";for(let ka=0;ka<v.clauses.length;ka++)x+=" ("+Z+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(v.clauses[ka].operand)+")) ? ("+this.evaluateNodeToJavaScript(v.clauses[ka].value)+") : "}else for(x="( ",Z=0;Z<v.clauses.length;Z++)x+=" this.makeBool("+this.evaluateNodeToJavaScript(v.clauses[Z].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(v.clauses[Z].value)+") : ";x=null!==v.else?x+this.evaluateNodeToJavaScript(v.else):x+"null";return x+" )";case "parameter":return"this.lookup("+JSON.stringify(v.value.toLowerCase())+",lookups)";case "expression-list":x="[";for(Z of v.value)"["!==x&&(x+=","),x+=this.evaluateNodeToJavaScript(Z);return x+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(v.expr)+")";case "binary-expression":switch(v.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+" )";case "IS":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(v.left)+")";case "ISNOT":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(v.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(v.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(v.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(v.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(v.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+","+JSON.stringify(v.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+","+JSON.stringify(v.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(v.operator)+","+this.evaluateNodeToJavaScript(v.left)+","+
this.evaluateNodeToJavaScript(v.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(v.operator)+","+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+")"}throw Error("Not Supported Operator "+v.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(v.value);case "date":return"(new Date("+l(v.value).getTime().toString()+"))";case "timestamp":return"(new Date("+h(v.value).getTime().toString()+
"))";case "current-time":return"date"===v.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(v.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(v.name)+","+this.evaluateNodeToJavaScript(v.args)+")"}throw Error("Unsupported sql syntax "+v.type);};Q._evaluateNode=function(v,x,Z){switch(v.type){case "interval":return x=this._evaluateNode(v.value,x,Z),I.SqlInterval.createFromValueAndQualifer(x,
v.qualifier,v.op);case "case-expression":if("simple"===v.format){var ka=y(this._evaluateNode(v.operand,x,Z));for(var na=0;na<v.clauses.length;na++)if(ka===y(this._evaluateNode(v.clauses[na].operand,x,Z)))return this._evaluateNode(v.clauses[na].value,x,Z)}else for(ka=0;ka<v.clauses.length;ka++)if(!0===this._evaluateNode(v.clauses[ka].operand,x,Z))return this._evaluateNode(v.clauses[ka].value,x,Z);return null!==v.else?this._evaluateNode(v.else,x,Z):null;case "parameter":return this.parameters[v.value.toLowerCase()];
case "expression-list":ka=[];for(na of v.value)ka.push(this._evaluateNode(na,x,Z));return ka;case "unary-expression":return L(this._evaluateNode(v.expr,x,Z));case "binary-expression":switch(v.operator){case "AND":return w(this._evaluateNode(v.left,x,Z),this._evaluateNode(v.right,x,Z));case "OR":return N(this._evaluateNode(v.left,x,Z),this._evaluateNode(v.right,x,Z));case "IS":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(v.left,x,Z);case "ISNOT":if("null"!==
v.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(v.left,x,Z);case "IN":return ka=r(this._evaluateNode(v.right,x,Z)),f(this._evaluateNode(v.left,x,Z),ka);case "NOT IN":return ka=r(this._evaluateNode(v.right,x,Z)),L(f(this._evaluateNode(v.left,x,Z),ka));case "BETWEEN":return ka=this._evaluateNode(v.left,x,Z),v=this._evaluateNode(v.right,x,Z),null==ka||null==v[0]||null==v[1]?null:ka>=y(v[0])&&ka<=y(v[1]);case "NOTBETWEEN":return ka=this._evaluateNode(v.left,x,Z),v=
this._evaluateNode(v.right,x,Z),null==ka||null==v[0]||null==v[1]?null:ka<y(v[0])||ka>y(v[1]);case "LIKE":return p(this._evaluateNode(v.left,x,Z),this._evaluateNode(v.right,x,Z),v.escape);case "NOT LIKE":return L(p(this._evaluateNode(v.left,x,Z),this._evaluateNode(v.right,x,Z),v.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return O(v.operator,this._evaluateNode(v.left,x,Z),this._evaluateNode(v.right,x,Z));case "-":case "+":case "*":case "/":case "||":return q(v.operator,
this._evaluateNode(v.left,x,Z),this._evaluateNode(v.right,x,Z))}case "null":case "boolean":case "string":case "number":return v.value;case "date":return l(v.value);case "timestamp":return h(v.value);case "current-time":return x=new Date,"date"===v.mode&&x.setHours(0,0,0,0),x;case "column-reference":return n(x,v.column,this._datefields,Z);case "data-type":return v.value;case "function":return x=this._evaluateNode(v.args,x,Z),this.isAggregate?S.aggregateFunction(v.name,x):I.evaluateFunction(v.name,
x)}throw Error("Unsupported sql syntax "+v.type);};e._createClass(P,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,v=>{"current-time"===v.type?this._hasDateFunctions=!0:"function"===v.type&&(this._hasDateFunctions=this._hasDateFunctions||A.has(v.name.toLowerCase()))});return this._hasDateFunctions}}]);return P}();var ca;
(function(P){P[P.Normal=0]="Normal";P[P.Escaped=1]="Escaped"})(ca||(ca={}));const ja={getAttribute(P,Q){return(P&&"object"===typeof P.attributes?P.attributes:P)[Q]}};k.WhereClause=J;k.defaultAttributeAdapter=ja;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(k){function e(I){let ba=0;for(let R=0;R<I.length;R++)ba+=I[R];return ba/I.length}function ea(I){const ba=e(I),R=I.length;let K=0;for(const h of I)K+=(h-
ba)**2;return 1<R?K/(R-1):0}const S={min:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:Math.min.apply(Math,I[0])},max:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:Math.max.apply(Math,I[0])},avg:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:e(I[0])},sum:{minParams:1,maxParams:1,evaluate:I=>{if(null==I[0])I=null;else{I=I[0];let ba=0;for(let R=0;R<I.length;R++)ba+=I[R];I=ba}return I}},stddev:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:Math.sqrt(ea(I[0]))},count:{minParams:1,
maxParams:1,evaluate:I=>null==I[0]?null:I[0].length},var:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:ea(I[0])}};k.aggregateFunction=function(I,ba){const R=S[I.toLowerCase()];if(null==R)throw Error("Function Not Recognised");if(ba.length<R.minParams||ba.length>R.maxParams)throw Error(`Invalid Parameter count for call to ${I.toUpperCase()}`);return R.evaluate(ba)};k.isAggregate=function(I,ba){I=S[I.toLowerCase()];return null!=I&&ba>=I.minParams&&ba<=I.maxParams};Object.defineProperty(k,Symbol.toStringTag,
{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(k,e,ea,S,I){function ba(l){l=new Date(l.getTime());l.setHours(0,0,0,0);return l}function R(l,r){if(l instanceof Date)return r?ba(l):l;if("string"===typeof l||l instanceof String)if(l=I.DateTime.fromSQL(l),l.isValid)return r?ba(l.toJSDate()):l.toJSDate();throw new ea.SqlError(ea.SqlErrorCodes.CannotCastValue);
}let K=function(){function l(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}l._fixDefaults=function(r){if(null!==r.precision||null!==r.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};l._parseSecondsComponent=function(r,L){L.includes(".")?(L=L.split("."),r.second=parseFloat(L[0]),r.millis=parseInt(L[1],10)):r.second=parseFloat(L)};l.createFromMilliseconds=function(r){const L=new l;L.second=r/1E3;return L};l.createFromValueAndQualifer=
function(r,L,w){let N=null;const f=new l;f.op="-"===w?"-":"+";if("interval-period"===L.type){l._fixDefaults(L);w=RegExp("^[0-9]{1,}$");if("year"===L.period||"month"===L.period)throw Error("Year-Month Intervals not supported");if("second"===L.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(r))l._parseSecondsComponent(f,r);else throw Error("Illegal Interval");else if(w.test(r))f[L.period]=parseFloat(r);else throw Error("Illegal Interval");}else{l._fixDefaults(L.start);l._fixDefaults(L.end);if("year"===
L.start.period||"month"===L.start.period)throw Error("Year-Month Intervals not supported");if("year"===L.end.period||"month"===L.end.period)throw Error("Year-Month Intervals not supported");switch(L.start.period){case "day":switch(L.end.period){case "hour":N=RegExp("^[0-9]{1,} [0-9]{1,}$");if(N.test(r))f[L.start.period]=parseFloat(r.split(" ")[0]),f[L.end.period]=parseFloat(r.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":N=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(N.test(r))f[L.start.period]=
parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),f.hour=parseFloat(r[0]),f.minute=parseFloat(r[1]);else throw Error("Illegal Interval");break;case "second":N=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(N.test(r))f[L.start.period]=parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),f.hour=parseFloat(r[0]),f.minute=parseFloat(r[1]),l._parseSecondsComponent(f,r[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;
case "hour":switch(L.end.period){case "minute":N=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(N.test(r))f.hour=parseFloat(r.split(":")[0]),f.minute=parseFloat(r.split(":")[1]);else throw Error("Illegal Interval");break;case "second":N=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(N.test(r))r=r.split(":"),f.hour=parseFloat(r[0]),f.minute=parseFloat(r[1]),l._parseSecondsComponent(f,r[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(L.end.period){case "second":N=
RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(N.test(r))r=r.split(":"),f.minute=parseFloat(r[0]),l._parseSecondsComponent(f,r[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return f};l.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return e._createClass(l)}();
const h={extract:{minParams:2,maxParams:2,evaluate:([l,r])=>{if(null==r)return null;if(r instanceof Date)switch(l.toUpperCase()){case "SECOND":return r.getSeconds();case "MINUTE":return r.getMinutes();case "HOUR":return r.getHours();case "DAY":return r.getDate();case "MONTH":return r.getMonth()+1;case "YEAR":return r.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:l=>{if(2===l.length){const [r,L]=l;return null==r||null==L?null:r.toString().substring(L-
1)}if(3===l.length){const [r,L,w]=l;return null==r||null==L||null==w?null:0>=w?"":r.toString().substring(L-1,L+w-1)}}},position:{minParams:2,maxParams:2,evaluate:([l,r])=>null==l||null==r?null:r.indexOf(l)+1},trim:{minParams:2,maxParams:3,evaluate:l=>{var r=3===l.length,L=r?l[1]:" ";r=r?l[2]:l[1];if(null==L||null==r)return null;L=`(${S.escapeRegExpString(L)})`;switch(l[0]){case "BOTH":return r.replaceAll(new RegExp(`^${L}*|${L}*$`,"g"),"");case "LEADING":return r.replaceAll(new RegExp(`^${L}*`,"g"),
"");case "TRAILING":return r.replaceAll(new RegExp(`${L}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.abs(l[0])},ceiling:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.ceil(l[0])},floor:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.floor(l[0])},log:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.log(l[0])},log10:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.log(l[0])*Math.LOG10E},
sin:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.sin(l[0])},cos:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.cos(l[0])},tan:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.tan(l[0])},asin:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.asin(l[0])},acos:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.acos(l[0])},atan:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.atan(l[0])},sign:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:
0<l[0]?1:0>l[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:l=>null==l[0]||null==l[1]?null:l[0]**l[1]},mod:{minParams:2,maxParams:2,evaluate:l=>null==l[0]||null==l[1]?null:l[0]%l[1]},round:{minParams:1,maxParams:2,evaluate:l=>{const r=l[0];l=2===l.length?10**l[1]:1;return null==r?null:Math.round(r*l)/l}},truncate:{minParams:1,maxParams:2,evaluate:l=>null==l[0]?null:1===l.length?parseInt(l[0].toFixed(0),10):parseFloat(l[0].toFixed(l[1]))},char_length:{minParams:1,maxParams:1,evaluate:l=>"string"===
typeof l[0]||l[0]instanceof String?l[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:l=>{let r="";for(let L=0;L<l.length;L++){if(null==l[L])return null;r+=l[L].toString()}return r}},lower:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:l[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:l[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:l=>{for(const r of l)if(null!==r)return r;return null}},cosh:{minParams:1,maxParams:1,
evaluate:l=>null==l[0]?null:Math.cosh(l[0])},sinh:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.sinh(l[0])},tanh:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.tanh(l[0])},nullif:{minParams:2,maxParams:2,evaluate:l=>{const r=l[0];l=l[1];return(r instanceof Date?r.valueOf():r)===(l instanceof Date?l.valueOf():l)?null:r}},cast:{minParams:2,maxParams:2,evaluate:l=>{var r=l[0];l=l[1];if(null===r)return null;switch(l.type){case "integer":r=parseInt(r,10);if(isNaN(r))throw new ea.SqlError(ea.SqlErrorCodes.CannotCastValue);
return r;case "smallint":r=parseInt(r,10);if(isNaN(r))throw new ea.SqlError(ea.SqlErrorCodes.CannotCastValue);if(32767<r||-32767>r)throw new ea.SqlError(ea.SqlErrorCodes.CannotCastValue);return r;case "float":case "real":r=parseFloat(r);if(isNaN(r))throw new ea.SqlError(ea.SqlErrorCodes.CannotCastValue);return r;case "date":return R(r,!0);case "timestamp":return R(r,!1);case "varchar":r=r.toString();if(r.length>l.size)throw new ea.SqlError(ea.SqlErrorCodes.CannotCastValue);return r;default:throw new ea.SqlError(ea.SqlErrorCodes.InvalidDataType);
}}}};k.SqlInterval=K;k.evaluateFunction=function(l,r){const L=h[l.toLowerCase()];if(null==L)throw Error("Function Not Recognised");if(r.length<L.minParams||r.length>L.maxParams)throw Error(`Invalid Parameter count for call to ${l.toUpperCase()}`);return L.evaluate(r)};k.isStandardized=function(l,r){l=h[l.toLowerCase()];return null!=l&&r>=l.minParams&&r<=l.maxParams};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(k,e,ea){k.SqlErrorCodes=void 0;(function(K){K.InvalidFunctionParameters="InvalidFunctionParameters";K.UnsupportedSqlFunction="UnsupportedSqlFunction";K.UnsupportedOperator="UnsupportedOperator";K.UnsupportedSyntax="UnsupportedSyntax";K.UnsupportedIsRhs="UnsupportedIsRhs";K.UnsupportedIsLhs="UnsupportedIsLhs";K.InvalidDataType="InvalidDataType";K.CannotCastValue="CannotCastValue";K.MissingStatisticParameters="MissingStatisticParameters"})(k.SqlErrorCodes||
(k.SqlErrorCodes={}));const S={[k.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[k.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[k.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[k.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[k.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[k.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",
[k.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[k.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[k.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let I=function(K){function h(l,r){l=K.call(this,ea.doSubstitutions(S[l],r))||this;l.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(l),h);return l}e._inherits(h,K);return e._createClass(h)}(e._wrapNativeSuper(Error));
k.FeatureSetErrorCodes=void 0;(function(K){K.NeverReach="NeverReach";K.NotImplemented="NotImplemented";K.Cancelled="Cancelled";K.InvalidStatResponse="InvalidStatResponse";K.InvalidRequest="InvalidRequest";K.RequestFailed="RequestFailed";K.MissingFeatures="MissingFeatures";K.AggregationFieldNotFound="AggregationFieldNotFound";K.DataElementsNotFound="DataElementsNotFound"})(k.FeatureSetErrorCodes||(k.FeatureSetErrorCodes={}));const ba={[k.FeatureSetErrorCodes.Cancelled]:"Cancelled",[k.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",
[k.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[k.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[k.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[k.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[k.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[k.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[k.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let R=function(K){function h(l,
r){l=K.call(this,ea.doSubstitutions(ba[l],r))||this;l.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(l),h);return l}e._inherits(h,K);return e._createClass(h)}(e._wrapNativeSuper(Error));k.FeatureSetError=R;k.FeatureSetErrorMessages=ba;k.SqlError=I;k.SqlErrorMessages=S;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],
function(k,e){function ea(w){return w&&w.loc?`Line : ${w.loc.start?.line}, ${w.loc.start?.column}: `:""}function S(w,N){try{if(!N)return w;for(const f in N){let p=N[f];p||(p="");w=w.replace("{"+f+"}",N[f])}}catch(f){}return w}k.ExecutionErrorCodes=void 0;(function(w){w.AsyncNotEnabled="AsyncNotEnabled";w.ModulesNotSupported="ModulesNotSupported";w.CircularModules="CircularModules";w.NeverReach="NeverReach";w.UnsupportedHashType="UnsupportedHashType";w.InvalidParameter="InvalidParameter";w.UnexpectedToken=
"UnexpectedToken";w.Unrecognised="Unrecognised";w.UnrecognisedType="UnrecognisedType";w.MaximumCallDepth="MaximumCallDepth";w.BooleanConditionRequired="BooleanConditionRequired";w.TypeNotAllowedInFeature="TypeNotAllowedInFeature";w.KeyMustBeString="KeyMustBeString";w.WrongNumberOfParameters="WrongNumberOfParameters";w.CallNonFunction="CallNonFunction";w.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";w.NoFunctionInDictionary="NoFunctionInDictionary";w.NoFunctionInArray="NoFunctionInArray";
w.AssignModuleFunction="AssignModuleFunction";w.LogicExpressionOrAnd="LogicExpressionOrAnd";w.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";w.FunctionNotFound="FunctionNotFound";w.InvalidMemberAccessKey="InvalidMemberAccessKey";w.UnsupportedUnaryOperator="UnsupportUnaryOperator";w.InvalidIdentifier="InvalidIdentifier";w.MemberOfNull="MemberOfNull";w.UnsupportedOperator="UnsupportedOperator";w.Cancelled="Cancelled";w.ModuleAccessorMustBeString="ModuleAccessorMustBeString";w.ModuleExportNotFound=
"ModuleExportNotFound";w.Immutable="Immutable";w.OutOfBounds="OutOfBounds";w.IllegalResult="IllegalResult";w.FieldNotFound="FieldNotFound";w.PortalRequired="PortalRequired";w.LogicError="LogicError";w.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";w.KeyAccessorMustBeString="KeyAccessorMustBeString";w.WrongSpatialReference="WrongSpatialReference"})(k.ExecutionErrorCodes||(k.ExecutionErrorCodes={}));const I={[k.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",
[k.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[k.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[k.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[k.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[k.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[k.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[k.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[k.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[k.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[k.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[k.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[k.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[k.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[k.ExecutionErrorCodes.PortalRequired]:"Portal is required",[k.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[k.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[k.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[k.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[k.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[k.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[k.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[k.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[k.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[k.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[k.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[k.ExecutionErrorCodes.Immutable]:"Object is immutable",[k.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[k.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",
[k.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[k.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[k.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[k.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[k.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[k.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[k.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",
[k.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[k.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[k.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let ba=function(w){function N(...f){return w.call(this,...f)||this}e._inherits(N,w);return e._createClass(N)}(e._wrapNativeSuper(Error)),R=function(w){function N(f,p){f=w.call(this,ea(p)+f.message,{cause:f})||this;f.loc=null;Error.captureStackTrace&&
Error.captureStackTrace(e._assertThisInitialized(f),N);p&&p.loc&&(f.loc=p.loc);return f}e._inherits(N,w);return e._createClass(N)}(ba),K=function(w){function N(f,p,y,O){f=w.call(this,"Execution error - "+ea(y)+S(I[p],O))||this;f.loc=null;f.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),N);y&&y.loc&&(f.loc=y.loc);return f}e._inherits(N,w);return e._createClass(N)}(e._wrapNativeSuper(Error)),h=function(w){function N(f,
p,y,O){f=w.call(this,"Compilation error - "+ea(y)+S(I[p],O))||this;f.loc=null;f.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),N);y&&y.loc&&(f.loc=y.loc);return f}e._inherits(N,w);return e._createClass(N)}(e._wrapNativeSuper(Error)),l=function(w){function N(){var f=w.call(this,"Uncompilable code structures")||this;f.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),
N);return f}e._inherits(N,w);return e._createClass(N)}(e._wrapNativeSuper(Error));k.ModuleErrorCodes=void 0;(function(w){w.UnrecognisedUri="UnrecognisedUri";w.UnsupportedUriProtocol="UnsupportedUriProtocol"})(k.ModuleErrorCodes||(k.ModuleErrorCodes={}));const r={[k.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[k.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let L=function(w){function N(f,p){f=w.call(this,S(r[f],p))||this;f.declaredRootClass="esri.arcade.arcademoduleerror";
Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),N);return f}e._inherits(N,w);return e._createClass(N)}(e._wrapNativeSuper(Error));k.ArcadeCompilationError=h;k.ArcadeExecutionError=K;k.ArcadeUncompilableError=l;k.ErrorWithCause=ba;k.ExecutionErrorMessages=I;k.LocatableArcadeExecutionError=R;k.ModuleError=L;k.ModuleErrorMessages=r;k.doSubstitutions=S;k.ensureArcadeExecutionError=function(w,N,f){return"esri.arcade.arcadeexecutionerror"===f.declaredRootClass||"esri.arcade.arcadecompilationerror"===
f.declaredRootClass?null===f.loc&&N&&N.loc?new R(f,{cause:f}):f:N&&N.loc?new R(f,{cause:f}):f};k.parsingValidationMessage=function(w,N,f){return"Parsing error - "+ea(w)+S(I[N],f)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(k){function e(a,g={}){const M=JSON.stringify([a,g]);let da=gd[M];da||(da=new Intl.ListFormat(a,g),gd[M]=da);return da}function ea(a,g={}){const M=JSON.stringify([a,g]);let da=Gc[M];da||(da=new Intl.DateTimeFormat(a,
g),Gc[M]=da);return da}function S(a,g={}){const M=JSON.stringify([a,g]);let da=Hc[M];da||(da=new Intl.NumberFormat(a,g),Hc[M]=da);return da}function I(a,g={}){const {base:M,...da}=g,ma=JSON.stringify([a,da]);let ra=Ic[ma];ra||(ra=new Intl.RelativeTimeFormat(a,g),Ic[ma]=ra);return ra}function ba(a){const g=[];for(let M=1;12>=M;M++){const da=$a.utc(2016,M,1);g.push(a(da))}return g}function R(a){const g=[];for(let M=1;7>=M;M++){const da=$a.utc(2016,11,13+M);g.push(a(da))}return g}function K(a,g,M,da,
ma){a=a.listingMode(M);return"error"===a?null:"en"===a?da(g):ma(g)}function h(a,g){if(l(a)||null===a)return g;if(a instanceof ic)return a;if("string"===typeof a){const M=a.toLowerCase();return"default"===M?g:"local"===M||"system"===M?mc.instance:"utc"===M||"gmt"===M?Eb.utcInstance:Eb.parseSpecifier(M)||Vb.create(a)}return r(a)?Eb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new me(a)}function l(a){return"undefined"===typeof a}function r(a){return"number"===typeof a}function L(a){return"number"===
typeof a&&0===a%1}function w(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function N(a,g,M){if(0!==a.length)return a.reduce((da,ma)=>{ma=[g(ma),ma];return da?M(da[0],ma[0])===da[0]?da:ma:ma},null)[1]}function f(a,g){return g.reduce((M,da)=>{M[da]=a[da];return M},{})}function p(a,g){return Object.prototype.hasOwnProperty.call(a,g)}function y(a,g,M){return L(a)&&a>=g&&a<=M}function O(a,g=2){return 0>a?"-"+(""+-a).padStart(g,"0"):(""+a).padStart(g,"0")}function q(a){if(!l(a)&&
null!==a&&""!==a)return parseInt(a,10)}function n(a){if(!l(a)&&null!==a&&""!==a)return parseFloat(a)}function z(a){if(!l(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function U(a,g,M=!1){g=10**g;return(M?Math.trunc:Math.round)(a*g)/g}function H(a){return 0===a%4&&(0!==a%100||0===a%400)}function E(a,g){var M=g-1;M=M-12*Math.floor(M/12)+1;return 2===M?H(a+(g-M)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][M-1]}function G(a){let g=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,
a.second,a.millisecond);100>a.year&&0<=a.year&&(g=new Date(g),g.setUTCFullYear(a.year,a.month-1,a.day));return+g}function A(a){var g=a-1;g=(g+Math.floor(g/4)-Math.floor(g/100)+Math.floor(g/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===g?53:52}function C(a){return 99<a?a:a>xb.twoDigitCutoffYear?1900+a:2E3+a}function J(a,g,M,da=null){a=new Date(a);const ma={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};da&&(ma.timeZone=
da);return(g=(new Intl.DateTimeFormat(M,{timeZoneName:g,...ma})).formatToParts(a).find(ra=>"timezonename"===ra.type.toLowerCase()))?g.value:null}function ca(a,g){a=parseInt(a,10);Number.isNaN(a)&&(a=0);g=parseInt(g,10)||0;g=0>a||Object.is(a,-0)?-g:g;return 60*a+g}function ja(a){const g=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(g))throw new Fa(`Invalid unit value ${a}`);return g}function P(a,g){const M={};for(const da in a)if(p(a,da)){const ma=a[da];void 0!==ma&&null!==ma&&(M[g(da)]=
ja(ma))}return M}function Q(a,g){const M=Math.trunc(Math.abs(a/60)),da=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(g){case "short":return`${a}${O(M,2)}:${O(da,2)}`;case "narrow":return`${a}${M}${0<da?`:${da}`:""}`;case "techie":return`${a}${O(M,2)}${O(da,2)}`;default:throw new RangeError(`Value format ${g} is out of range for property format`);}}function v(a){return f(a,["hour","minute","second","millisecond"])}function x(a){switch(a){case "narrow":return[...ne];case "short":return[...Jc];case "long":return[...oe];
case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function Z(a){switch(a){case "narrow":return[...pe];case "short":return[...hd];case "long":return[...Kc];case "numeric":return"1234567".split("");default:return null}}function ka(a){switch(a){case "narrow":return[...qe];case "short":return[...re];case "long":return[...se];default:return null}}function na(a,g,M="always",da=!1){const ma={years:["year",
"yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var ra=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===M&&ra)switch(M="days"===a,g){case 1:return M?"tomorrow":`next ${ma[a][0]}`;case -1:return M?"yesterday":`last ${ma[a][0]}`;case 0:return M?"today":`this ${ma[a][0]}`}M=Object.is(g,-0)||0>g;g=Math.abs(g);ra=1===g;const Aa=ma[a];a=da?ra?Aa[1]:Aa[2]||Aa[1]:ra?
ma[a][0]:a;return M?`${g} ${a} ago`:`in ${g} ${a}`}function sa(a,g){let M="";for(const da of a)M=da.literal?M+da.val:M+g(da.val);return M}function ta(...a){a=a.reduce((g,M)=>g+M.source,"");return RegExp(`^${a}$`)}function za(...a){return g=>a.reduce(([M,da,ma],ra)=>{const [Aa,Ia,Pa]=ra(g,ma);return[{...M,...Aa},Ia||da,Pa]},[{},null,1]).slice(0,2)}function Ba(a,...g){if(null==a)return[null,null];for(const [M,da]of g)if(g=M.exec(a))return da(g);return[null,null]}function Ca(...a){return(g,M)=>{const da=
{};let ma;for(ma=0;ma<a.length;ma++)da[a[ma]]=q(g[M+ma]);return[da,null,M+ma]}}function La(a,g,M){a=a[g];return l(a)?M:q(a)}function Oa(a,g){return[{hours:La(a,g,0),minutes:La(a,g+1,0),seconds:La(a,g+2,0),milliseconds:z(a[g+3])},null,g+4]}function Ta(a,g){const M=!a[g]&&!a[g+1];a=ca(a[g+1],a[g+2]);return[{},M?null:Eb.instance(a),g+3]}function Ya(a,g){return[{},a[g]?Vb.create(a[g]):null,g+1]}function fb(a){const [g,M,da,ma,ra,Aa,Ia,Pa,ab]=a,d="-"===g[0];a=Pa&&"-"===Pa[0];const bb=(Xa,zb=!1)=>void 0!==
Xa&&(zb||Xa&&d)?-Xa:Xa;return[{years:bb(n(M)),months:bb(n(da)),weeks:bb(n(ma)),days:bb(n(ra)),hours:bb(n(Aa)),minutes:bb(n(Ia)),seconds:bb(n(Pa),"-0"===Pa),milliseconds:bb(z(ab),a)}]}function ib(a,g,M,da,ma,ra,Aa){g={year:2===g.length?C(q(g)):q(g),month:Jc.indexOf(M)+1,day:q(da),hour:q(ma),minute:q(ra)};Aa&&(g.second=q(Aa));a&&(g.weekday=3<a.length?Kc.indexOf(a)+1:hd.indexOf(a)+1);return g}function eb(a){const [,g,M,da,ma,ra,Aa,Ia,Pa,ab,d,bb]=a;a=ib(g,ma,da,M,ra,Aa,Ia);let Xa;Xa=Pa?te[Pa]:ab?0:ca(d,
bb);return[a,new Eb(Xa)]}function c(a){const [,g,M,da,ma,ra,Aa,Ia]=a;return[ib(g,ma,da,M,ra,Aa,Ia),Eb.utcInstance]}function t(a){const [,g,M,da,ma,ra,Aa,Ia]=a;return[ib(g,Ia,M,da,ma,ra,Aa),Eb.utcInstance]}function fa(a,g,M=!1){a={values:M?g.values:{...a.values,...(g.values||{})},loc:a.loc.clone(g.loc),conversionAccuracy:g.conversionAccuracy||a.conversionAccuracy,matrix:g.matrix||a.matrix};return new hb(a)}function B(a,g,M,da,ma){a=a[ma][M];var ra=g[M]/a;ra=Math.sign(ra)!==Math.sign(da[ma])&&0!==da[ma]&&
1>=Math.abs(ra)?0>ra?Math.floor(ra):Math.ceil(ra):Math.trunc(ra);da[ma]+=ra;g[M]-=ra*a}function aa(a,g){ue.reduce((M,da)=>{if(l(g[da]))return M;M&&B(a,g,M,g,da);return da},null)}function m(a,g){a=g.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(hb.fromMillis(a).as("days"))}function F(a,g,M){const da=[["years",(Pa,ab)=>ab.year-Pa.year],["quarters",(Pa,ab)=>ab.quarter-Pa.quarter+4*(ab.year-Pa.year)],["months",(Pa,ab)=>ab.month-
Pa.month+12*(ab.year-Pa.year)],["weeks",(Pa,ab)=>{Pa=m(Pa,ab);return(Pa-Pa%7)/7}],["days",m]],ma={},ra=a;let Aa,Ia;for(const [Pa,ab]of da)0<=M.indexOf(Pa)&&(Aa=Pa,ma[Pa]=ab(a,g),Ia=ra.plus(ma),Ia>g?(ma[Pa]--,a=ra.plus(ma)):a=Ia);return[a,ma,Ia,Aa]}function V(a,g,M,da){let [ma,ra,Aa,Ia]=F(a,g,M);a=g-ma;M=M.filter(Pa=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Pa));0===M.length&&(Aa<g&&(Aa=ma.plus({[Ia]:1})),Aa!==ma&&(ra[Ia]=(ra[Ia]||0)+a/(Aa-ma)));g=hb.fromObject(ra,da);return 0<M.length?
hb.fromMillis(a,da).shiftTo(...M).plus(g):g}function W({numberingSystem:a},g=""){return new RegExp(`${Lc[a||"latn"]}${g}`)}function ha(a,g=M=>M){return{regex:a,deser:([M])=>{{let da=parseInt(M,10);if(isNaN(da)){da="";for(let ma=0;ma<M.length;ma++){const ra=M.charCodeAt(ma);if(-1!==M[ma].search(Lc.hanidec))da+=ve.indexOf(M[ma]);else for(const Aa in id){const [Ia,Pa]=id[Aa];ra>=Ia&&ra<=Pa&&(da+=ra-Ia)}}M=parseInt(da,10)}else M=da}return g(M)}}}function oa(a){return a.replace(/\./g,"\\.?").replace(Mc,
jd)}function qa(a,g){return null===a?null:{regex:RegExp(a.map(oa).join("|")),deser:([M])=>a.findIndex(da=>M.replace(/\./g,"").replace(Mc," ").toLowerCase()===da.replace(/\./g,"").replace(Mc," ").toLowerCase())+g}}function va(a,g){return{regex:a,deser:([,M,da])=>ca(M,da),groups:g}}function xa(a){return{regex:a,deser:([g])=>g}}function Ha(a,g){const M=W(g),da=W(g,"{2}"),ma=W(g,"{3}"),ra=W(g,"{4}"),Aa=W(g,"{6}"),Ia=W(g,"{1,2}"),Pa=W(g,"{1,3}"),ab=W(g,"{1,6}"),d=W(g,"{1,9}"),bb=W(g,"{2,4}"),Xa=W(g,"{4,6}"),
zb=Wb=>({regex:RegExp(Wb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([u])=>u,literal:!0}),ua=(Wb=>{if(a.literal)return zb(Wb);switch(Wb.val){case "G":return qa(g.eras("short",!1),0);case "GG":return qa(g.eras("long",!1),0);case "y":return ha(ab);case "yy":return ha(bb,C);case "yyyy":return ha(ra);case "yyyyy":return ha(Xa);case "yyyyyy":return ha(Aa);case "M":return ha(Ia);case "MM":return ha(da);case "MMM":return qa(g.months("short",!0,!1),1);case "MMMM":return qa(g.months("long",
!0,!1),1);case "L":return ha(Ia);case "LL":return ha(da);case "LLL":return qa(g.months("short",!1,!1),1);case "LLLL":return qa(g.months("long",!1,!1),1);case "d":return ha(Ia);case "dd":return ha(da);case "o":return ha(Pa);case "ooo":return ha(ma);case "HH":return ha(da);case "H":return ha(Ia);case "hh":return ha(da);case "h":return ha(Ia);case "mm":return ha(da);case "m":return ha(Ia);case "q":return ha(Ia);case "qq":return ha(da);case "s":return ha(Ia);case "ss":return ha(da);case "S":return ha(Pa);
case "SSS":return ha(ma);case "u":return xa(d);case "uu":return xa(Ia);case "uuu":return ha(M);case "a":return qa(g.meridiems(),0);case "kkkk":return ha(ra);case "kk":return ha(bb,C);case "W":return ha(Ia);case "WW":return ha(da);case "E":case "c":return ha(M);case "EEE":return qa(g.weekdays("short",!1,!1),1);case "EEEE":return qa(g.weekdays("long",!1,!1),1);case "ccc":return qa(g.weekdays("short",!0,!1),1);case "cccc":return qa(g.weekdays("long",!0,!1),1);case "Z":case "ZZ":return va(new RegExp(`([+-]${Ia.source})(?::(${da.source}))?`),
2);case "ZZZ":return va(new RegExp(`([+-]${Ia.source})(${da.source})?`),2);case "z":return xa(/[a-z_+-/]{1,256}?/i);case " ":return xa(/[^\S\n\r]/);default:return zb(Wb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ua.token=a;return ua}function Ea(a){return[`^${a.map(g=>g.regex).reduce((g,M)=>`${g}(${M.source})`,"")}$`,a]}function Da(a,g,M){if(a=a.match(g)){g={};let da=1;for(const ma in M)if(p(M,ma)){const ra=M[ma],Aa=ra.groups?ra.groups+1:1;!ra.literal&&ra.token&&(g[ra.token.val[0]]=
ra.deser(a.slice(da,da+Aa)));da+=Aa}return[a,g]}return[a,{}]}function Sa(a){const g=ma=>{switch(ma){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let M=null,da;l(a.z)||(M=Vb.create(a.z));l(a.Z)||(M||(M=new Eb(a.Z)),
da=a.Z);l(a.q)||(a.M=3*(a.q-1)+1);l(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);l(a.u)||(a.S=z(a.u));return[Object.keys(a).reduce((ma,ra)=>{const Aa=g(ra);Aa&&(ma[Aa]=a[ra]);return ma},{}),M,da]}function Ma(a,g){return Array.prototype.concat(...a.map(M=>{if(!M.literal){var da=Ab.macroTokenToFormatOpts(M.val);da=Ra(da,g);M=null==da||da.includes(void 0)?M:da}return M}))}function Qa(a,g,M){M=Ma(Ab.parseFormat(M),a);var da=M.map(Xa=>Ha(Xa,a));const ma=da.find(Xa=>
Xa.invalidReason);if(ma)return{input:g,tokens:M,invalidReason:ma.invalidReason};const [ra,Aa]=Ea(da);da=RegExp(ra,"i");const [Ia,Pa]=Da(g,da,Aa),[ab,d,bb]=Pa?Sa(Pa):[null,null,void 0];if(p(Pa,"a")&&p(Pa,"H"))throw new pa("Can't include meridiem when specifying 24-hour format");return{input:g,tokens:M,regex:da,rawMatches:Ia,matches:Pa,result:ab,zone:d,specificOffset:bb}}function Ra(a,g){if(!a)return null;g=Ab.create(g,a);var M=g.formatDateTimeParts;Nc||(Nc=$a.fromMillis(1555555555555));return M.call(g,
Nc).map(da=>{{const {type:ra,value:Aa}=da;if("literal"===ra)da=/^\s+$/.test(Aa),da={literal:!da,val:da?" ":Aa};else{da=a[ra];var ma=we[ra];"object"===typeof ma&&(ma=ma[da]);da=ma?{literal:!1,val:ma}:void 0}}return da})}function Ka(a,g){return new Rb("unit out of range",`you specified ${g} (of type ${typeof g}) as a ${a}, which is invalid`)}function Ua(a,g,M){g=new Date(Date.UTC(a,g-1,M));100>a&&0<=a&&g.setUTCFullYear(g.getUTCFullYear()-1900);a=g.getUTCDay();return 0===a?7:a}function Wa(a,g){a=H(a)?
Oc:Pc;const M=a.findIndex(da=>da<g);return{month:M+1,day:g-a[M]}}function wa(a){const {year:g,month:M,day:da}=a;var ma=da+(H(g)?Oc:Pc)[M-1];const ra=Ua(g,M,da);ma=Math.floor((ma-ra+10)/7);let Aa;1>ma?(Aa=g-1,ma=A(Aa)):ma>A(g)?(Aa=g+1,ma=1):Aa=g;return{weekYear:Aa,weekNumber:ma,weekday:ra,...v(a)}}function ub(a){const {weekYear:g,weekNumber:M,weekday:da}=a;var ma=Ua(g,1,4),ra=H(g)?366:365;ma=7*M+da-ma-3;1>ma?(ra=g-1,ma+=H(ra)?366:365):ma>ra?(ra=g+1,ma-=H(g)?366:365):ra=g;const {month:Aa,day:Ia}=Wa(ra,
ma);return{year:ra,month:Aa,day:Ia,...v(a)}}function jb(a){const {year:g,month:M,day:da}=a;var ma=da+(H(g)?Oc:Pc)[M-1];return{year:g,ordinal:ma,...v(a)}}function lb(a){const {year:g,ordinal:M}=a,{month:da,day:ma}=Wa(g,M);return{year:g,month:da,day:ma,...v(a)}}function b(a){const g=L(a.year),M=y(a.month,1,12),da=y(a.day,1,E(a.year,a.month));return g?M?da?!1:Ka("day",a.day):Ka("month",a.month):Ka("year",a.year)}function gb(a){const {hour:g,minute:M,second:da,millisecond:ma}=a;a=y(g,0,23)||24===g&&0===
M&&0===da&&0===ma;const ra=y(M,0,59),Aa=y(da,0,59),Ia=y(ma,0,999);return a?ra?Aa?Ia?!1:Ka("millisecond",ma):Ka("second",da):Ka("minute",M):Ka("hour",g)}function Ob(a){return new Rb("unsupported zone",`the zone "${a.name}" is not supported`)}function Jb(a){null===a.weekData&&(a.weekData=wa(a.c));return a.weekData}function la(a,g){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new $a({...a,...g,old:a})}function gc(a,g,M){let da=a-6E4*g;const ma=M.offset(da);if(g===ma)return[da,
g];da-=6E4*(ma-g);g=M.offset(da);return ma===g?[da,ma]:[a-6E4*Math.min(ma,g),Math.max(ma,g)]}function Tb(a,g){a=new Date(a+6E4*g);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function yb(a,g,M){return gc(G(a),g,M)}function Sb(a,g){const M=a.o;var da=a.c.year+Math.trunc(g.years);const ma=a.c.month+Math.trunc(g.months)+3*Math.trunc(g.quarters);da={...a.c,year:da,month:ma,
day:Math.min(a.c.day,E(da,ma))+Math.trunc(g.days)+7*Math.trunc(g.weeks)};g=hb.fromObject({years:g.years-Math.trunc(g.years),quarters:g.quarters-Math.trunc(g.quarters),months:g.months-Math.trunc(g.months),weeks:g.weeks-Math.trunc(g.weeks),days:g.days-Math.trunc(g.days),hours:g.hours,minutes:g.minutes,seconds:g.seconds,milliseconds:g.milliseconds}).as("milliseconds");da=G(da);let [ra,Aa]=gc(da,M,a.zone);0!==g&&(ra+=g,Aa=a.zone.offset(ra));return{ts:ra,o:Aa}}function Ub(a,g,M,da,ma,ra){const {setZone:Aa,
zone:Ia}=M;return a&&0!==Object.keys(a).length||g?(a=$a.fromObject(a,{...M,zone:g||Ia,specificOffset:ra}),Aa?a:a.setZone(Ia)):$a.invalid(new Rb("unparsable",`the input "${ma}" can't be parsed as ${da}`))}function Zb(a,g,M=!0){return a.isValid?Ab.create(rb.create("en-US"),{allowZ:M,forceSimple:!0}).formatDateTimeFromString(a,g):null}function hc(a,g){const M=9999<a.c.year||0>a.c.year;let da="";M&&0<=a.c.year&&(da+="+");da+=O(a.c.year,M?6:4);g?(da=da+"-"+O(a.c.month),da=da+"-"+O(a.c.day)):(da+=O(a.c.month),
da+=O(a.c.day));return da}function Db(a,g,M,da,ma,ra){let Aa=O(a.c.hour);g?(Aa=Aa+":"+O(a.c.minute),0===a.c.second&&M||(Aa+=":")):Aa+=O(a.c.minute);0===a.c.second&&M||(Aa+=O(a.c.second),0===a.c.millisecond&&da||(Aa=Aa+"."+O(a.c.millisecond,3)));ma&&(a.isOffsetFixed&&0===a.offset&&!ra?Aa+="Z":0>a.o?(Aa=Aa+"-"+O(Math.trunc(-a.o/60)),Aa=Aa+":"+O(Math.trunc(-a.o%60))):(Aa=Aa+"+"+O(Math.trunc(a.o/60)),Aa=Aa+":"+O(Math.trunc(a.o%60))));ra&&(Aa+="["+a.zone.ianaName+"]");return Aa}function Pb(a){const g=
{year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!g)throw new Ga(a);return g}function kb(a,g){const M=
h(g.zone,xb.defaultZone);g=rb.fromObject(g);const da=xb.now();var ma;if(l(a.year))a=da;else{for(const ra of kd)l(a[ra])&&(a[ra]=ld[ra]);if(ma=b(a)||gb(a))return $a.invalid(ma);ma=M.offset(da);[a,ma]=yb(a,ma,M)}return new $a({ts:a,zone:M,loc:g,o:ma})}function Fb(a,g,M){const da=l(M.round)?!0:M.round,ma=(Aa,Ia)=>{Aa=U(Aa,da||M.calendary?0:2,!0);return g.loc.clone(M).relFormatter(M).format(Aa,Ia)},ra=Aa=>M.calendary?g.hasSame(a,Aa)?0:g.startOf(Aa).diff(a.startOf(Aa),Aa).get(Aa):g.diff(a,Aa).get(Aa);
if(M.unit)return ma(ra(M.unit),M.unit);for(const Aa of M.units){const Ia=ra(Aa);if(1<=Math.abs(Ia))return ma(Ia,Aa)}return ma(a>g?-0:0,M.units[M.units.length-1])}function Qb(a){let g={};0<a.length&&"object"===typeof a[a.length-1]?(g=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[g,a]}function Za(a){if($a.isDateTime(a))return a;if(a&&a.valueOf&&r(a.valueOf()))return $a.fromJSDate(a);if(a&&"object"===typeof a)return $a.fromObject(a);throw new Fa(`Unknown datetime argument: ${a}, of type ${typeof a}`);
}class Hb extends Error{}class T extends Hb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class ia extends Hb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class X extends Hb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class pa extends Hb{}class Ga extends Hb{constructor(a){super(`Invalid unit ${a}`)}}class Fa extends Hb{}class Na extends Hb{constructor(){super("Zone is an abstract class")}}const Va={year:"numeric",month:"numeric",day:"numeric"},nb={year:"numeric",
month:"short",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},wb={year:"numeric",month:"long",day:"numeric",weekday:"long"},Gb={hour:"numeric",minute:"numeric"},md={hour:"numeric",minute:"numeric",second:"numeric"},nd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},od={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},pd={hour:"numeric",minute:"numeric",hourCycle:"h23"},qd={hour:"numeric",
minute:"numeric",second:"numeric",hourCycle:"h23"},rd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},sd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},td={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},vd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},wd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xe={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},yd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},zd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},
Ad={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class ic{get type(){throw new Na;}get name(){throw new Na;}get ianaName(){return this.name}get isUniversal(){throw new Na;}offsetName(a,g){throw new Na;}formatOffset(a,g){throw new Na;}offset(a){throw new Na;}equals(a){throw new Na;}get isValid(){throw new Na;}}let Qc=null;class mc extends ic{static get instance(){null===Qc&&(Qc=new mc);return Qc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,
{format:g,locale:M}){return J(a,g,M)}formatOffset(a,g){return Q(this.offset(a),g)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let nc={};const ye={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let oc={};class Vb extends ic{static create(a){oc[a]||(oc[a]=new Vb(a));return oc[a]}static resetCache(){oc={};nc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:a})).format(),!0}catch(g){return!1}}constructor(a){super();this.zoneName=a;this.valid=Vb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:g,locale:M}){return J(a,g,M,this.name)}formatOffset(a,g){return Q(this.offset(a),g)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var g=this.name;nc[g]||(nc[g]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit",era:"short"}));g=nc[g];if(g.formatToParts){g=g.formatToParts(a);var M=[];for(let d=0;d<g.length;d++){const {type:bb,value:Xa}=g[d],zb=ye[bb];"era"===bb?M[zb]=Xa:l(zb)||(M[zb]=parseInt(Xa,10))}g=M}else{g=g.format(a).replace(/\u200E/g,"");g=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(g);const [,d,bb,Xa,zb,ua,Wb,u]=g;g=[Xa,d,bb,zb,ua,Wb,u]}let [da,ma,ra,Aa,Ia,Pa,ab]=g;"BC"===Aa&&(da=-Math.abs(da)+1);g=G({year:da,month:ma,day:ra,hour:24===Ia?0:Ia,minute:Pa,second:ab,millisecond:0});
a=+a;M=a%1E3;return(g-(a-(0<=M?M:1E3+M)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let gd={},Gc={},Hc={},Ic={},pc=null;class ze{constructor(a,g,M){this.padTo=M.padTo||0;this.floor=M.floor||!1;const {padTo:da,floor:ma,...ra}=M;if(!g||0<Object.keys(ra).length)g={useGrouping:!1,...M},0<M.padTo&&(g.minimumIntegerDigits=M.padTo),this.inf=S(a,g)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):U(a,3);return O(a,
this.padTo)}}class Ae{constructor(a,g,M){this.opts=M;M=this.originalZone=void 0;this.opts.timeZone?this.dt=a:"fixed"===a.zone.type?(M=a.offset/60*-1,M=0<=M?`Etc/GMT+${M}`:`Etc/GMT${M}`,0!==a.offset&&Vb.create(M).valid?this.dt=a:(M="UTC",this.dt=0===a.offset?a:a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone)):"system"===a.zone.type?this.dt=a:"iana"===a.zone.type?(this.dt=a,M=a.zone.name):(M="UTC",this.dt=a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone);a={...this.opts};
a.timeZone=a.timeZone||M;this.dtf=ea(g,a)}format(){return this.originalZone?this.formatToParts().map(({value:a})=>a).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const a=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?a.map(g=>{if("timeZoneName"===g.type){const M=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...g,value:M}}return g}):a}resolvedOptions(){return this.dtf.resolvedOptions()}}class Be{constructor(a,
g,M){this.opts={style:"long",...M};!g&&w()&&(this.rtf=I(a,M))}format(a,g){return this.rtf?this.rtf.format(a,g):na(g,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,g){return this.rtf?this.rtf.formatToParts(a,g):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,g,M,da=!1){a=a||xb.defaultLocale;var ma;(ma=a)||(da?da="en-US":(pc||(pc=(new Intl.DateTimeFormat).resolvedOptions().locale),da=pc),ma=da);return new rb(ma,
g||xb.defaultNumberingSystem,M||xb.defaultOutputCalendar,a)}static resetCache(){pc=null;Gc={};Hc={};Ic={}}static fromObject({locale:a,numberingSystem:g,outputCalendar:M}={}){return rb.create(a,g,M)}constructor(a,g,M,da){var ma=a.indexOf("-x-");-1!==ma&&(a=a.substring(0,ma));ma=a.indexOf("-u-");if(-1===ma)var ra=[a];else{try{ra=ea(a).resolvedOptions();var Aa=a}catch(Xa){Aa=a.substring(0,ma),ra=ea(Aa).resolvedOptions()}const {numberingSystem:d,calendar:bb}=ra;ra=[Aa,d,bb]}const [Ia,Pa,ab]=ra;this.locale=
Ia;this.numberingSystem=g||Pa||null;this.outputCalendar=M||ab||null;g=this.locale;M=this.numberingSystem;if((ra=this.outputCalendar)||M)g.includes("-u-")||(g+="-u"),ra&&(g+=`-ca-${ra}`),M&&(g+=`-nu-${M}`);this.intl=g;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=da;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?
!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),g=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&g?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||this.specifiedLocale,
a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,g=!1,M=!0){return K(this,a,M,x,()=>{const da=g?{month:a,day:"numeric"}:{month:a},ma=g?"format":"standalone";this.monthsCache[ma][a]||(this.monthsCache[ma][a]=ba(ra=>this.extract(ra,da,"month")));return this.monthsCache[ma][a]})}weekdays(a,g=!1,M=!0){return K(this,
a,M,Z,()=>{const da=g?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ma=g?"format":"standalone";this.weekdaysCache[ma][a]||(this.weekdaysCache[ma][a]=R(ra=>this.extract(ra,da,"weekday")));return this.weekdaysCache[ma][a]})}meridiems(a=!0){return K(this,void 0,a,()=>Bd,()=>{if(!this.meridiemCache){const g={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[$a.utc(2016,11,13,9),$a.utc(2016,11,13,19)].map(M=>this.extract(M,g,"dayperiod"))}return this.meridiemCache})}eras(a,g=!0){return K(this,
a,g,ka,()=>{const M={era:a};this.eraCache[a]||(this.eraCache[a]=[$a.utc(-40,1,1),$a.utc(2017,1,1)].map(da=>this.extract(da,M,"era")));return this.eraCache[a]})}extract(a,g,M){return(a=this.dtFormatter(a,g).formatToParts().find(da=>da.type.toLowerCase()===M))?a.value:null}numberFormatter(a={}){return new ze(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,g={}){return new Ae(a,this.intl,g)}relFormatter(a={}){return new Be(this.intl,this.isEnglish(),a)}listFormatter(a={}){return e(this.intl,
a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Rc=null;class Eb extends ic{static get utcInstance(){null===Rc&&(Rc=new Eb(0));return Rc}static instance(a){return 0===a?Eb.utcInstance:new Eb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?
new Eb(ca(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${Q(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${Q(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,g){return Q(this.fixed,g)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class me extends ic{constructor(a){super();this.zoneName=
a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Sc=()=>Date.now(),Cd="system",Dd=null,Ed=null,Tc=null,Fd=60,Gd;class xb{static get now(){return Sc}static set now(a){Sc=a}static set defaultZone(a){Cd=a}static get defaultZone(){return h(Cd,mc.instance)}static get defaultLocale(){return Dd}static set defaultLocale(a){Dd=a}static get defaultNumberingSystem(){return Ed}static set defaultNumberingSystem(a){Ed=
a}static get defaultOutputCalendar(){return Tc}static set defaultOutputCalendar(a){Tc=a}static get twoDigitCutoffYear(){return Fd}static set twoDigitCutoffYear(a){Fd=a%100}static get throwOnInvalid(){return Gd}static set throwOnInvalid(a){Gd=a}static resetCaches(){rb.resetCache();Vb.resetCache()}}const oe="January February March April May June July August September October November December".split(" "),Jc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ne="JFMAMJJASOND".split(""),Kc=
"Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),hd="Mon Tue Wed Thu Fri Sat Sun".split(" "),pe="MTWTFSS".split(""),Bd=["AM","PM"],se=["Before Christ","Anno Domini"],re=["BC","AD"],qe=["B","A"],Uc={D:Va,DD:nb,DDD:mb,DDDD:wb,t:Gb,tt:md,ttt:nd,tttt:od,T:pd,TT:qd,TTT:rd,TTTT:sd,f:td,ff:vd,fff:xd,ffff:zd,F:ud,FF:wd,FFF:yd,FFFF:Ad};class Ab{static create(a,g={}){return new Ab(a,g)}static parseFormat(a){let g=null,M="",da=!1;const ma=[];for(let ra=0;ra<a.length;ra++){const Aa=a.charAt(ra);
"'"===Aa?(0<M.length&&ma.push({literal:da||/^\s+$/.test(M),val:M}),g=null,M="",da=!da):da?M+=Aa:Aa===g?M+=Aa:(0<M.length&&ma.push({literal:/^\s+$/.test(M),val:M}),g=M=Aa)}0<M.length&&ma.push({literal:da||/^\s+$/.test(M),val:M});return ma}static macroTokenToFormatOpts(a){return Uc[a]}constructor(a,g){this.opts=g;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,g){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTime(a,
g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTimeParts(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).formatToParts()}formatInterval(a,g={}){return this.loc.dtFormatter(a.start,{...this.opts,...g}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).resolvedOptions()}num(a,g=0){if(this.opts.forceSimple)return O(a,g);const M={...this.opts};0<g&&(M.padTo=g);return this.loc.numberFormatter(M).format(a)}formatDateTimeFromString(a,
g){const M="en"===this.loc.listingMode(),da=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ma=(d,bb)=>this.loc.extract(a,d,bb),ra=d=>a.isOffsetFixed&&0===a.offset&&d.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,d.format):"",Aa=(d,bb)=>M?x(d)[a.month-1]:ma(bb?{month:d}:{month:d,day:"numeric"},"month"),Ia=(d,bb)=>M?Z(d)[a.weekday-1]:ma(bb?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),Pa=d=>{const bb=Ab.macroTokenToFormatOpts(d);return bb?this.formatWithSystemDefault(a,
bb):d},ab=d=>M?ka(d)[0>a.year?0:1]:ma({era:d},"era");return sa(Ab.parseFormat(g),d=>{switch(d){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);
case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return ra({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return ra({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return ra({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;
case "a":return M?Bd[12>a.hour?0:1]:ma({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return da?ma({day:"numeric"},"day"):this.num(a.day);case "dd":return da?ma({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ia("short",!0);case "cccc":return Ia("long",!0);case "ccccc":return Ia("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ia("short",!1);case "EEEE":return Ia("long",!1);case "EEEEE":return Ia("narrow",!1);case "L":return da?
ma({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return da?ma({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return Aa("short",!0);case "LLLL":return Aa("long",!0);case "LLLLL":return Aa("narrow",!0);case "M":return da?ma({month:"numeric"},"month"):this.num(a.month);case "MM":return da?ma({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return Aa("short",!1);case "MMMM":return Aa("long",!1);case "MMMMM":return Aa("narrow",!1);case "y":return da?
ma({year:"numeric"},"year"):this.num(a.year);case "yy":return da?ma({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return da?ma({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return da?ma({year:"numeric"},"year"):this.num(a.year,6);case "G":return ab("short");case "GG":return ab("long");case "GGGGG":return ab("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);
case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Pa(d)}})}formatDurationFromString(a,g){const M=ma=>{switch(ma[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";
case "y":return"year";default:return null}};g=Ab.parseFormat(g);const da=g.reduce((ma,{literal:ra,val:Aa})=>ra?ma:ma.concat(Aa),[]);a=a.shiftTo(...da.map(M).filter(ma=>ma));return sa(g,(ma=>ra=>{const Aa=M(ra);return Aa?this.num(ma.get(Aa),ra.length):ra})(a))}}class Rb{constructor(a,g){this.reason=a;this.explanation=g}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Id=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,
Vc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jd=RegExp(`${Vc.source}${`(?:${Id.source}?(?:\\[(${Hd.source})\\])?)?`}`),Wc=RegExp(`(?:T${Jd.source})?`),Ce=Ca("weekYear","weekNumber","weekDay"),Kd=Ca("year","ordinal"),Ld=RegExp(`${Vc.source} ?(?:${Id.source}|(${Hd.source}))?`),Md=RegExp(`(?: ${Ld.source})?`),Nd=RegExp(`^T?${Vc.source}$`),De=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
te={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ge=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
He=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Ie=ta(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Wc),Je=ta(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Wc),Ke=ta(/(\d{4})-?(\d{3})/,Wc),Le=ta(Jd),Od=za(function(a,g){return[{year:La(a,g),month:La(a,g+1,1),day:La(a,g+2,1)},null,g+3]},Oa,Ta,Ya),Me=za(Ce,Oa,Ta,Ya),Ne=za(Kd,Oa,Ta,Ya),Oe=za(Oa,Ta,Ya),Pe=za(Oa),Qe=ta(/(\d{4})-(\d\d)-(\d\d)/,Md),Re=ta(Ld),Se=za(Oa,Ta,Ya),Pd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Pd},Ue={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Pd},bc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ue=bc.slice(0).reverse();
class hb{constructor(a){const g="longterm"===a.conversionAccuracy||!1;let M=g?Ue:Te;a.matrix&&(M=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=g?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=M;this.isLuxonDuration=!0}static fromMillis(a,g){return hb.fromObject({milliseconds:a},g)}static fromObject(a,g={}){if(null==a||"object"!==typeof a)throw new Fa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new hb({values:P(a,
hb.normalizeUnit),loc:rb.fromObject(g),conversionAccuracy:g.conversionAccuracy,matrix:g.matrix})}static fromDurationLike(a){if(r(a))return hb.fromMillis(a);if(hb.isDuration(a))return a;if("object"===typeof a)return hb.fromObject(a);throw new Fa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,g){const [M]=Ba(a,[De,fb]);return M?hb.fromObject(M,g):hb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,g){const [M]=Ba(a,[Nd,Pe]);return M?
hb.fromObject(M,g):hb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,g=null){if(!a)throw new Fa("need to specify a reason the Duration is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new X(a);return new hb({invalid:a})}static normalizeUnit(a){const g={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!g)throw new Ga(a);return g}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,g={}){g={...g,floor:!1!==g.round&&!1!==g.floor};return this.isValid?Ab.create(this.loc,g).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const g=bc.map(M=>{const da=this.values[M];return l(da)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:M.slice(0,-1)}).format(da)}).filter(M=>M);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(g)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=U(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var g=this.toMillis();if(0>g||864E5<=g)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
g=this.shiftTo("hours","minutes","seconds","milliseconds");let M="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===g.seconds&&0===g.milliseconds||(M+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===g.milliseconds||(M+=".SSS"));g=g.toFormat(M);a.includePrefix&&(g="T"+g);return g}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=hb.fromDurationLike(a);const g=
{};for(const M of bc)if(p(a.values,M)||p(this.values,M))g[M]=a.get(M)+this.get(M);return fa(this,{values:g},!0)}minus(a){if(!this.isValid)return this;a=hb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const g={};for(const M of Object.keys(this.values))g[M]=ja(a(this.values[M],M));return fa(this,{values:g},!0)}get(a){return this[hb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...P(a,hb.normalizeUnit)};return fa(this,{values:a})}reconfigure({locale:a,
numberingSystem:g,conversionAccuracy:M,matrix:da}={}){a={loc:this.loc.clone({locale:a,numberingSystem:g}),matrix:da,conversionAccuracy:M};return fa(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();aa(this.matrix,a);return fa(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const g={};for(const [M,da]of Object.entries(a))0!==da&&(g[M]=da);return fa(this,{values:g},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(ra=>hb.normalizeUnit(ra));const g={},M={},da=this.toObject();let ma;for(const ra of bc)if(0<=a.indexOf(ra)){ma=ra;let Aa=0;for(const Pa in M)Aa+=this.matrix[Pa][ra]*M[Pa],M[Pa]=0;r(da[ra])&&(Aa+=da[ra]);const Ia=Math.trunc(Aa);g[ra]=Ia;M[ra]=(1E3*Aa-1E3*Ia)/1E3;for(const Pa in da)bc.indexOf(Pa)>bc.indexOf(ra)&&B(this.matrix,da,Pa,g,ra)}else r(da[ra])&&(M[ra]=da[ra]);for(const ra in M)0!==M[ra]&&(g[ma]+=ra===ma?M[ra]:M[ra]/this.matrix[ma][ra]);return fa(this,{values:g},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const g of Object.keys(this.values))a[g]=0===this.values[g]?0:-this.values[g];return fa(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const da of bc){var g=this.values[da];var M=a.values[da];g=void 0===g||0===g?void 0===M||0===M:g===M;if(!g)return!1}return!0}}class vb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,g=null){if(!a)throw new Fa("need to specify a reason the Interval is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new ia(a);return new vb({invalid:a})}static fromDateTimes(a,
g){a=Za(a);g=Za(g);var M=a&&a.isValid?g&&g.isValid?g<a?vb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${g.toISO()}`):null:vb.invalid("missing or invalid end"):vb.invalid("missing or invalid start");return null==M?new vb({start:a,end:g}):M}static after(a,g){g=hb.fromDurationLike(g);a=Za(a);return vb.fromDateTimes(a,a.plus(g))}static before(a,g){g=hb.fromDurationLike(g);a=Za(a);return vb.fromDateTimes(a.minus(g),a)}static fromISO(a,
g){const [M,da]=(a||"").split("/",2);if(M&&da){let Aa;try{var ma=$a.fromISO(M,g);Aa=ma.isValid}catch(Pa){Aa=!1}let Ia;try{var ra=$a.fromISO(da,g);Ia=ra.isValid}catch(Pa){Ia=!1}if(Aa&&Ia)return vb.fromDateTimes(ma,ra);if(Aa){if(ra=hb.fromISO(da,g),ra.isValid)return vb.after(ma,ra)}else if(Ia&&(ma=hb.fromISO(M,g),ma.isValid))return vb.before(ra,ma)}return vb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const g=this.start.startOf(a),M=this.end.startOf(a);return Math.floor(M.diff(g,a).get(a))+(M.valueOf()!==this.end.valueOf())}hasSame(a){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:g}={}){return this.isValid?vb.fromDateTimes(a||this.s,g||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Za).filter(ra=>this.contains(ra)).sort();const g=[];let {s:M}=this,da=0;for(;M<this.e;){var ma=a[da]||this.e;ma=+ma>+this.e?
this.e:ma;g.push(vb.fromDateTimes(M,ma));M=ma;da+=1}return g}splitBy(a){a=hb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:g}=this,M=1;const da=[];for(;g<this.e;){var ma=this.start.plus(a.mapUnits(ra=>ra*M));ma=+ma>+this.e?this.e:ma;da.push(vb.fromDateTimes(g,ma));g=ma;M+=1}return da}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:
!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const g=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return g>=a?null:vb.fromDateTimes(g,a)}union(a){return this.isValid?vb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [g,M]=a.sort((da,ma)=>da.s-ma.s).reduce(([da,ma],ra)=>
ma?ma.overlaps(ra)||ma.abutsStart(ra)?[da,ma.union(ra)]:[da.concat([ma]),ra]:[da,ra],[[],null]);M&&g.push(M);return g}static xor(a){let g=null,M=0;const da=[];a=a.map(ma=>[{time:ma.s,type:"s"},{time:ma.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ma,ra)=>ma.time-ra.time);for(const ma of a)M+="s"===ma.type?1:-1,1===M?g=ma.time:(g&&+g!==+ma.time&&da.push(vb.fromDateTimes(g,ma.time)),g=null);return vb.merge(da)}difference(...a){return vb.xor([this].concat(a)).map(g=>this.intersection(g)).filter(g=>
g&&!g.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Va,g={}){return this.isValid?Ab.create(this.s.loc.clone(g),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,
{separator:g=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${g}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,g){return this.isValid?this.e.diff(this.s,a,g):hb.invalid(this.invalidReason)}mapEndpoints(a){return vb.fromDateTimes(a(this.s),a(this.e))}}class kc{static hasDST(a=xb.defaultZone){const g=$a.now().setZone(a).set({month:12});return!a.isUniversal&&g.offset!==g.set({month:6}).offset}static isValidIANAZone(a){return Vb.isValidZone(a)}static normalizeZone(a){return h(a,xb.defaultZone)}static months(a=
"long",{locale:g=null,numberingSystem:M=null,locObj:da=null,outputCalendar:ma="gregory"}={}){return(da||rb.create(g,M,ma)).months(a)}static monthsFormat(a="long",{locale:g=null,numberingSystem:M=null,locObj:da=null,outputCalendar:ma="gregory"}={}){return(da||rb.create(g,M,ma)).months(a,!0)}static weekdays(a="long",{locale:g=null,numberingSystem:M=null,locObj:da=null}={}){return(da||rb.create(g,M,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:g=null,numberingSystem:M=null,locObj:da=null}=
{}){return(da||rb.create(g,M,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:g=null}={}){return rb.create(g,null,"gregory").eras(a)}static features(){return{relative:w()}}}const Lc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},id={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ve=Lc.hanidec.replace(/[\[|\]]/g,"").split(""),jd=`[ ${String.fromCharCode(160)}]`,Mc=new RegExp(jd,"g"),we={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nc=null;const Pc=[0,31,59,90,120,151,181,212,243,273,304,334],Oc=[0,31,60,91,121,152,182,213,244,274,305,335],ld={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},We={ordinal:1,hour:0,minute:0,second:0,millisecond:0},kd="year month day hour minute second millisecond".split(" "),Xe="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ye="year ordinal hour minute second millisecond".split(" ");
class $a{constructor(a){const g=a.zone||xb.defaultZone;let M=a.invalid||(Number.isNaN(a.ts)?new Rb("invalid input"):null)||(g.isValid?null:Ob(g));this.ts=l(a.ts)?xb.now():a.ts;let da=null;var ma=null;M||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(g)?[da,ma]=[a.old.c,a.old.o]:(ma=g.offset(this.ts),da=Tb(this.ts,ma),da=(M=Number.isNaN(da.year)?new Rb("invalid input"):null)?null:da,ma=M?null:ma));this._zone=g;this.loc=a.loc||rb.create();this.invalid=M;this.weekData=null;this.c=da;this.o=ma;this.isLuxonDateTime=
!0}static now(){return new $a({})}static local(){const [a,g]=Qb(arguments),[M,da,ma,ra,Aa,Ia,Pa]=g;return kb({year:M,month:da,day:ma,hour:ra,minute:Aa,second:Ia,millisecond:Pa},a)}static utc(){const [a,g]=Qb(arguments),[M,da,ma,ra,Aa,Ia,Pa]=g;a.zone=Eb.utcInstance;return kb({year:M,month:da,day:ma,hour:ra,minute:Aa,second:Ia,millisecond:Pa},a)}static fromJSDate(a,g={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return $a.invalid("invalid input");const M=
h(g.zone,xb.defaultZone);return M.isValid?new $a({ts:a,zone:M,loc:rb.fromObject(g)}):$a.invalid(Ob(M))}static fromMillis(a,g={}){if(r(a))return-864E13>a||864E13<a?$a.invalid("Timestamp out of range"):new $a({ts:a,zone:h(g.zone,xb.defaultZone),loc:rb.fromObject(g)});throw new Fa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,g={}){if(r(a))return new $a({ts:1E3*a,zone:h(g.zone,xb.defaultZone),loc:rb.fromObject(g)});throw new Fa("fromSeconds requires a numerical input");
}static fromObject(a,g={}){a=a||{};var M=h(g.zone,xb.defaultZone);if(!M.isValid)return $a.invalid(Ob(M));var da=xb.now();const ma=l(g.specificOffset)?M.offset(da):g.specificOffset,ra=P(a,Pb);var Aa=!l(ra.ordinal),Ia=!l(ra.year),Pa=!l(ra.month)||!l(ra.day);Ia=Ia||Pa;var ab=ra.weekYear||ra.weekNumber;g=rb.fromObject(g);if((Ia||Aa)&&ab)throw new pa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Pa&&Aa)throw new pa("Can't mix ordinal dates with month/day");Pa=ab||ra.weekday&&
!Ia;let d=Tb(da,ma);Pa?(da=Xe,ab=Ve,d=wa(d)):Aa?(da=Ye,ab=We,d=jb(d)):(da=kd,ab=ld);let bb=!1;for(var Xa of da)l(ra[Xa])?ra[Xa]=bb?ab[Xa]:d[Xa]:bb=!0;Pa?(Xa=L(ra.weekYear),da=y(ra.weekNumber,1,A(ra.weekYear)),ab=y(ra.weekday,1,7),Xa=Xa?da?ab?!1:Ka("weekday",ra.weekday):Ka("week",ra.week):Ka("weekYear",ra.weekYear)):Aa?(Xa=L(ra.year),da=y(ra.ordinal,1,H(ra.year)?366:365),Xa=Xa?da?!1:Ka("ordinal",ra.ordinal):Ka("year",ra.year)):Xa=b(ra);if(Xa=Xa||gb(ra))return $a.invalid(Xa);Aa=Pa?ub(ra):Aa?lb(ra):
ra;const [zb,ua]=yb(Aa,ma,M);M=new $a({ts:zb,zone:M,o:ua,loc:g});return ra.weekday&&Ia&&a.weekday!==M.weekday?$a.invalid("mismatched weekday",`you can't specify both a weekday of ${ra.weekday} and a date of ${M.toISO()}`):M}static fromISO(a,g={}){const [M,da]=Ba(a,[Ie,Od],[Je,Me],[Ke,Ne],[Le,Oe]);return Ub(M,da,g,"ISO 8601",a)}static fromRFC2822(a,g={}){const [M,da]=Ba(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Ee,eb]);return Ub(M,da,g,"RFC 2822",a)}static fromHTTP(a,g={}){const [M,
da]=Ba(a,[Fe,c],[Ge,c],[He,t]);return Ub(M,da,g,"HTTP",g)}static fromFormat(a,g,M={}){if(l(a)||l(g))throw new Fa("fromFormat requires an input string and a format");const {locale:da=null,numberingSystem:ma=null}=M,ra=rb.fromOpts({locale:da,numberingSystem:ma,defaultToEN:!0}),{result:Aa,zone:Ia,specificOffset:Pa,invalidReason:ab}=Qa(ra,a,g),[d,bb,Xa,zb]=[Aa,Ia,Pa,ab];return zb?$a.invalid(zb):Ub(d,bb,M,`format ${g}`,a,Xa)}static fromString(a,g,M={}){return $a.fromFormat(a,g,M)}static fromSQL(a,g={}){const [M,
da]=Ba(a,[Qe,Od],[Re,Se]);return Ub(M,da,g,"SQL",a)}static invalid(a,g=null){if(!a)throw new Fa("need to specify a reason the DateTime is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new T(a);return new $a({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,g={}){return(a=Ra(a,rb.fromObject(g)))?a.map(M=>M?M.val:null).join(""):null}static expandFormat(a,g={}){return Ma(Ab.parseFormat(a),rb.fromObject(g)).map(M=>M.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Jb(this).weekYear:NaN}get weekNumber(){return this.isValid?Jb(this).weekNumber:NaN}get weekday(){return this.isValid?Jb(this).weekday:
NaN}get ordinal(){return this.isValid?jb(this.c).ordinal:NaN}get monthShort(){return this.isValid?kc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?kc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?kc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?kc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return H(this.year)}get daysInMonth(){return E(this.year,this.month)}get daysInYear(){return this.isValid?
H(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?A(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:g,numberingSystem:M,calendar:da}=Ab.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:g,numberingSystem:M,outputCalendar:da}}toUTC(a=0,g={}){return this.setZone(Eb.instance(a),g)}toLocal(){return this.setZone(xb.defaultZone)}setZone(a,{keepLocalTime:g=!1,keepCalendarTime:M=!1}={}){a=h(a,xb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let da=
this.ts;if(g||M)g=a.offset(this.ts),M=this.toObject(),[da]=yb(M,g,a);return la(this,{ts:da,zone:a})}return $a.invalid(Ob(a))}reconfigure({locale:a,numberingSystem:g,outputCalendar:M}={}){a=this.loc.clone({locale:a,numberingSystem:g,outputCalendar:M});return la(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=P(a,Pb);var g=!l(a.weekYear)||!l(a.weekNumber)||!l(a.weekday);const M=!l(a.ordinal),da=!l(a.year),ma=!l(a.month)||!l(a.day),ra=a.weekYear||
a.weekNumber;if((da||ma||M)&&ra)throw new pa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&M)throw new pa("Can't mix ordinal dates with month/day");g?g=ub({...wa(this.c),...a}):l(a.ordinal)?(g={...this.toObject(),...a},l(a.day)&&(g.day=Math.min(E(g.year,g.month),g.day))):g=lb({...jb(this.c),...a});const [Aa,Ia]=yb(g,this.o,this.zone);return la(this,{ts:Aa,o:Ia})}plus(a){if(!this.isValid)return this;a=hb.fromDurationLike(a);return la(this,Sb(this,a))}minus(a){if(!this.isValid)return this;
a=hb.fromDurationLike(a).negate();return la(this,Sb(this,a))}startOf(a){if(!this.isValid)return this;const g={};a=hb.normalizeUnit(a);switch(a){case "years":g.month=1;case "quarters":case "months":g.day=1;case "weeks":case "days":g.hour=0;case "hours":g.minute=0;case "minutes":g.second=0;case "seconds":g.millisecond=0}"weeks"===a&&(g.weekday=1);"quarters"===a&&(g.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(g)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
g={}){return this.isValid?Ab.create(this.loc.redefaultToEN(g)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Va,g={}){return this.isValid?Ab.create(this.loc.clone(g),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ab.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:g=!1,suppressMilliseconds:M=!1,includeOffset:da=!0,extendedZone:ma=!1}={}){if(!this.isValid)return null;a="extended"===a;let ra=
hc(this,a);return ra=ra+"T"+Db(this,a,g,M,da,ma)}toISODate({format:a="extended"}={}){return this.isValid?hc(this,"extended"===a):null}toISOWeekDate(){return Zb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:g=!1,includeOffset:M=!0,includePrefix:da=!1,extendedZone:ma=!1,format:ra="extended"}={}){return this.isValid?(da?"T":"")+Db(this,"extended"===ra,g,a,M,ma):null}toRFC2822(){return Zb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Zb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
hc(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:g=!1,includeOffsetSpace:M=!0}={}){let da="HH:mm:ss.SSS";if(g||a)M&&(da+=" "),g?da+="z":a&&(da+="ZZ");return Zb(this,da,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const g={...this.c};a.includeConfig&&(g.outputCalendar=this.outputCalendar,g.numberingSystem=this.loc.numberingSystem,g.locale=this.loc.locale);return g}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,g="milliseconds",M={}){if(!this.isValid||!a.isValid)return hb.invalid("created by diffing an invalid DateTime");M={locale:this.locale,numberingSystem:this.numberingSystem,...M};
const da=(Array.isArray(g)?g:[g]).map(hb.normalizeUnit);g=a.valueOf()>this.valueOf();a=V(g?this:a,g?a:this,da,M);return g?a.negate():a}diffNow(a="milliseconds",g={}){return this.diff($a.now(),a,g)}until(a){return this.isValid?vb.fromDateTimes(this,a):this}hasSame(a,g){if(!this.isValid)return!1;const M=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(g)<=M&&M<=a.endOf(g)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const g=a.base||$a.fromObject({},{zone:this.zone}),M=a.padding?this<g?-a.padding:a.padding:0;let da="years months days hours minutes seconds".split(" "),ma=a.unit;Array.isArray(a.unit)&&(da=a.unit,ma=void 0);return Fb(g,this.plus(M),{...a,numeric:"always",units:da,unit:ma})}toRelativeCalendar(a={}){return this.isValid?Fb(a.base||$a.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every($a.isDateTime))throw new Fa("min requires all arguments be DateTimes");
return N(a,g=>g.valueOf(),Math.min)}static max(...a){if(!a.every($a.isDateTime))throw new Fa("max requires all arguments be DateTimes");return N(a,g=>g.valueOf(),Math.max)}static fromFormatExplain(a,g,M={}){const {locale:da=null,numberingSystem:ma=null}=M;M=rb.fromOpts({locale:da,numberingSystem:ma,defaultToEN:!0});return Qa(M,a,g)}static fromStringExplain(a,g,M={}){return $a.fromFormatExplain(a,g,M)}static get DATE_SHORT(){return Va}static get DATE_MED(){return nb}static get DATE_MED_WITH_WEEKDAY(){return ob}static get DATE_FULL(){return mb}static get DATE_HUGE(){return wb}static get TIME_SIMPLE(){return Gb}static get TIME_WITH_SECONDS(){return md}static get TIME_WITH_SHORT_OFFSET(){return nd}static get TIME_WITH_LONG_OFFSET(){return od}static get TIME_24_SIMPLE(){return pd}static get TIME_24_WITH_SECONDS(){return qd}static get TIME_24_WITH_SHORT_OFFSET(){return rd}static get TIME_24_WITH_LONG_OFFSET(){return sd}static get DATETIME_SHORT(){return td}static get DATETIME_SHORT_WITH_SECONDS(){return ud}static get DATETIME_MED(){return vd}static get DATETIME_MED_WITH_SECONDS(){return wd}static get DATETIME_MED_WITH_WEEKDAY(){return xe}static get DATETIME_FULL(){return xd}static get DATETIME_FULL_WITH_SECONDS(){return yd}static get DATETIME_HUGE(){return zd}static get DATETIME_HUGE_WITH_SECONDS(){return Ad}}
k.DateTime=$a;k.Duration=hb;k.FixedOffsetZone=Eb;k.IANAZone=Vb;k.Info=kc;k.Interval=vb;k.SystemZone=mc;k.Zone=ic})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(k,e,ea){var S={exports:{}};S.exports;(function(ba){(function(R,K){ba.exports&&(ba.exports=K())})(ea.commonjsGlobal,function(){function R(h,l,r,L){h=Error.call(this,h);Object.setPrototypeOf&&Object.setPrototypeOf(h,R.prototype);h.expected=l;h.found=
r;h.location=L;h.name="SyntaxError";return h}function K(h,l,r){r=r||" ";if(h.length>l)return h;l-=h.length;r+=r.repeat(l);return h+r.slice(0,l)}(function(h,l){function r(){this.constructor=h}r.prototype=l.prototype;h.prototype=new r})(R,Error);R.prototype.format=function(h){var l="Error: "+this.message;if(this.location){var r=null,L;for(L=0;L<h.length;L++)if(h[L].source===this.location.source){r=h[L].text.split(/\r\n|\n|\r/g);break}h=this.location.start;L=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(h):h;var w=this.location.source+":"+L.line+":"+L.column;if(r){var N=this.location.end,f=K("",L.line.toString().length," ");r=r[h.line-1];N=(h.line===N.line?N.column:r.length+1)-h.column||1;l+="\n --\x3e "+w+"\n"+f+" |\n"+L.line+" | "+r+"\n"+f+" | "+K("",h.column-1," ")+K("",N,"^")}else l+="\n at "+w}return l};R.buildMessage=function(h,l){function r(p){return p.charCodeAt(0).toString(16).toUpperCase()}function L(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+r(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+r(y)})}function w(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+r(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+r(y)})}function N(p){return f[p.type](p)}
var f={literal:function(p){return'"'+L(p.text)+'"'},class:function(p){var y=p.parts.map(function(O){return Array.isArray(O)?w(O[0])+"-"+w(O[1]):w(O)});return"["+(p.inverted?"^":"")+y.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};return"Expected "+function(p){p=p.map(N);var y,O;p.sort();if(0<p.length){for(O=y=1;y<p.length;y++)p[y-1]!==p[y]&&(p[O]=p[y],O++);p.length=O}switch(p.length){case 1:return p[0];case 2:return p[0]+
" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}(h)+" but "+(l?'"'+L(l)+'"':"end of input")+" found."};return{SyntaxError:R,parse:function(h,l){function r(u,D){return{type:"literal",text:u,ignoreCase:D}}function L(u,D,Y){return{type:"class",parts:u,inverted:D,ignoreCase:Y}}function w(u){var D=bb[u],Y;if(!D){for(Y=u-1;!bb[Y];)Y--;D=bb[Y];for(D={line:D.line,column:D.column};Y<u;)10===h.charCodeAt(Y)?(D.line++,D.column=1):D.column++,Y++;bb[u]=D}return D}function N(u,D,Y){var ya=
w(u),Ja=w(D);u={source:gb,start:{offset:u,line:ya.line,column:ya.column},end:{offset:D,line:Ja.line,column:Ja.column}};Y&&gb&&"function"===typeof gb.offset&&(u.start=gb.offset(u.start),u.end=gb.offset(u.end));return u}function f(u){d<Xa||(d>Xa&&(Xa=d,zb=[]),zb.push(u))}function p(){var u=d;wa();var D=O();D!==b?(wa(),u=D):(d=u,u=b);return u}function y(){var u=d;var D=O();if(D!==b){u=[];var Y=d;var ya=wa();var Ja=Ka();if(Ja!==b){var cb=wa();var db=O();db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)}else d=Y,Y=
b;for(;Y!==b;)u.push(Y),Y=d,ya=wa(),Ja=Ka(),Ja!==b?(cb=wa(),db=O(),db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)):(d=Y,Y=b);Y={type:"expression-list"};D=[D];for(ya=0;ya<u.length;ya++)D.push(u[ya][3]);Y.value=D;u=Y}else d=u,u=b;return u}function O(){var u=d;var D=q();if(D!==b){u=[];var Y=d;var ya=wa();var Ja=aa();if(Ja!==b){var cb=wa();var db=q();db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)u.push(Y),Y=d,ya=wa(),Ja=aa(),Ja!==b?(cb=wa(),db=q(),db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)):(d=Y,Y=b);u=
lb(D,u)}else d=u,u=b;return u}function q(){var u=d;var D=n();if(D!==b){u=[];var Y=d;var ya=wa();var Ja=B();if(Ja!==b){var cb=wa();var db=n();db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)u.push(Y),Y=d,ya=wa(),Ja=B(),Ja!==b?(cb=wa(),db=n(),db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)):(d=Y,Y=b);u=lb(D,u)}else d=u,u=b;return u}function n(){var u=d;var D=fa();if(D===b){D=d;if(33===h.charCodeAt(d)){var Y=la;d++}else Y=b,0===ua&&f(ne);if(Y!==b){var ya=d;ua++;if(61===h.charCodeAt(d)){var Ja=gc;d++}else Ja=
b,0===ua&&f(Kc);ua--;Ja===b?ya=void 0:(d=ya,ya=b);ya!==b?D=Y=[Y,ya]:(d=D,D=b)}else d=D,D=b}D!==b?(Y=wa(),ya=n(),ya!==b?u={type:"unary-expression",operator:"NOT",expr:ya}:(d=u,u=b)):(d=u,u=b);if(u===b){D=d;u=E();if(u!==b){wa();D=[];Y=d;ya=wa();Ja=z();if(Ja!==b){var cb=wa();var db=E();db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)}else d=Y,Y=b;if(Y!==b)for(;Y!==b;)D.push(Y),Y=d,ya=wa(),Ja=z(),Ja!==b?(cb=wa(),db=E(),db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)):(d=Y,Y=b);else D=b;D!==b&&(D={type:"arithmetic",tail:D});D===
b&&(D=d,Y=H(),Y!==b?(wa(),ya=Ua(),ya!==b?(wa(),ya=y(),ya!==b?(wa(),Ja=Wa(),Ja!==b?D={op:Y,right:ya}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b)):(d=D,D=b),D===b&&(D=d,Y=H(),Y!==b?(wa(),ya=Ua(),ya!==b?(wa(),ya=Wa(),ya!==b?D={op:Y,right:{type:"expression-list",value:[]}}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b),D===b&&(D=d,Y=H(),Y!==b?(wa(),ya=v(),ya!==b?D={op:Y,right:ya}:(d=D,D=b)):(d=D,D=b))),D===b&&(D=d,Ja=fa(),Ja!==b?(wa(),Y=m(),Y!==b?(wa(),ya=E(),ya!==b?(wa(),cb=B(),cb!==b?(wa(),Ja=E(),Ja!==b?D={op:"NOT"+Y,right:{type:"expression-list",
value:[ya,Ja]}}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b)):(d=D,D=b)):(d=D,D=b),D===b&&(D=d,Ja=m(),Ja!==b?(wa(),Y=E(),Y!==b?(wa(),ya=B(),ya!==b?(wa(),cb=E(),cb!==b?D={op:Ja,right:{type:"expression-list",value:[Y,cb]}}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b)):(d=D,D=b)),D===b&&(D=d,Y=c(),Y!==b?(wa(),ya=fa(),ya!==b?(wa(),ya=E(),ya!==b?D={op:Y+"NOT",right:ya}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b),D===b&&(D=d,Y=c(),Y!==b?(wa(),ya=E(),ya!==b?D={op:Y,right:ya}:(d=D,D=b)):(d=D,D=b)),D===b&&(D=d,Y=U(),Y!==b?(wa(),ya=ta(),ya!==b?
(wa(),Ja=d,h.substr(d,6).toLowerCase()===ob?(cb=h.substr(d,6),d+=6):(cb=b,0===ua&&f(Od)),cb!==b?(cb=d,ua++,db=P(),ua--,db===b?cb=void 0:(d=cb,cb=b),cb!==b?Ja="ESCAPE":(d=Ja,Ja=b)):(d=Ja,Ja=b),Ja!==b?(wa(),Ja=za(),Ja!==b?D={op:Y,right:ya,escape:Ja.value}:(d=D,D=b)):(d=D,D=b)):(d=D,D=b)):(d=D,D=b),D===b&&(D=d,Y=U(),Y!==b?(wa(),ya=ta(),ya!==b?D={op:Y,right:ya,escape:""}:(d=D,D=b)):(d=D,D=b))))));D===b&&(D=null);""==D||void 0==D||null==D?D=u:(Y=null,D=Y="arithmetic"==D.type?lb(u,D.tail):jb(D.op,u,D.right,
D.escape))}else d=D,D=b;u=D}return u}function z(){if(h.substr(d,2)===Tb){var u=Tb;d+=2}else u=b,0===ua&&f(hd);u===b&&(62===h.charCodeAt(d)?(u=yb,d++):(u=b,0===ua&&f(pe)),u===b&&(h.substr(d,2)===Sb?(u=Sb,d+=2):(u=b,0===ua&&f(Bd)),u===b&&(h.substr(d,2)===Ub?(u=Ub,d+=2):(u=b,0===ua&&f(se)),u===b&&(60===h.charCodeAt(d)?(u=Zb,d++):(u=b,0===ua&&f(re)),u===b&&(61===h.charCodeAt(d)?(u=gc,d++):(u=b,0===ua&&f(Kc)),u===b&&(h.substr(d,2)===hc?(u=hc,d+=2):(u=b,0===ua&&f(qe))))))));return u}function U(){var u=
u=d;var D=fa();if(D!==b){var Y=wa();var ya=t();ya!==b?u=D=[D,Y,ya]:(d=u,u=b)}else d=u,u=b;u!==b&&(u=u[0]+" "+u[2]);u===b&&(u=t());return u}function H(){var u=u=d;var D=fa();if(D!==b){var Y=wa();var ya=eb();ya!==b?u=D=[D,Y,ya]:(d=u,u=b)}else d=u,u=b;u!==b&&(u=u[0]+" "+u[2]);u===b&&(u=eb());return u}function E(){var u=d;var D=A();if(D!==b){u=[];var Y=d;var ya=wa();var Ja=G();if(Ja!==b){var cb=wa();var db=A();db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)u.push(Y),Y=d,ya=wa(),Ja=G(),Ja!==
b?(cb=wa(),db=A(),db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)):(d=Y,Y=b);u=lb(D,u)}else d=u,u=b;return u}function G(){if(43===h.charCodeAt(d)){var u=Db;d++}else u=b,0===ua&&f(Uc);u===b&&(45===h.charCodeAt(d)?(u=Pb,d++):(u=b,0===ua&&f(Ab)),u===b&&(h.substr(d,2)===kb?(u=kb,d+=2):(u=b,0===ua&&f(Rb))));return u}function A(){var u=d;var D=J();if(D!==b){u=[];var Y=d;var ya=wa();var Ja=C();if(Ja!==b){var cb=wa();var db=J();db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)u.push(Y),Y=d,ya=wa(),Ja=C(),
Ja!==b?(cb=wa(),db=J(),db!==b?Y=ya=[ya,Ja,cb,db]:(d=Y,Y=b)):(d=Y,Y=b);u=lb(D,u)}else d=u,u=b;return u}function C(){if(42===h.charCodeAt(d)){var u=Fb;d++}else u=b,0===ua&&f(Hd);u===b&&(47===h.charCodeAt(d)?(u=Qb,d++):(u=b,0===ua&&f(Id)));return u}function J(){var u=za();if(u===b){var D=d;var Y=d;var ya=Oa();if(ya!==b){var Ja=Ta();if(Ja!==b){var cb=Ya();cb!==b?Y=parseFloat(ya+Ja+cb):(d=Y,Y=b)}else d=Y,Y=b}else d=Y,Y=b;Y===b&&(Y=d,ya=Oa(),ya!==b?(Ja=Ta(),Ja!==b?Y=parseFloat(ya+Ja):(d=Y,Y=b)):(d=Y,Y=
b),Y===b&&(Y=d,ya=Oa(),ya!==b?(Ja=Ya(),Ja!==b?Y=parseFloat(ya+Ja):(d=Y,Y=b)):(d=Y,Y=b),Y===b&&(Y=d,ya=Oa(),ya!==b&&(ya=parseFloat(ya)),Y=ya)));var db=Y;if(db!==b){var Qd=d;ua++;var Lf=ja();ua--;Lf===b?Qd=void 0:(d=Qd,Qd=b);Qd!==b?D={type:"number",value:db}:(d=D,D=b)}else d=D,D=b;u=D;if(u===b){var Xc=d;var qc=d;if(h.substr(d,4).toLowerCase()===Ga){var Rd=h.substr(d,4);d+=4}else Rd=b,0===ua&&f(He);if(Rd!==b){var Yc=d;ua++;var Mf=P();ua--;Mf===b?Yc=void 0:(d=Yc,Yc=b);Yc!==b?qc=Rd=[Rd,Yc]:(d=qc,qc=b)}else d=
qc,qc=b;var lc=qc;lc!==b&&(lc={type:"boolean",value:!0});Xc=lc;if(Xc===b){Xc=d;var rc=d;if(h.substr(d,5).toLowerCase()===Fa){var Sd=h.substr(d,5);d+=5}else Sd=b,0===ua&&f(Ie);if(Sd!==b){var Zc=d;ua++;var Nf=P();ua--;Nf===b?Zc=void 0:(d=Zc,Zc=b);Zc!==b?rc=Sd=[Sd,Zc]:(d=rc,rc=b)}else d=rc,rc=b;lc=rc;lc!==b&&(lc={type:"boolean",value:!1});Xc=lc}u=Xc;if(u===b){var sc=d;if(h.substr(d,4).toLowerCase()===pa){var Td=h.substr(d,4);d+=4}else Td=b,0===ua&&f(Ge);if(Td!==b){var $c=d;ua++;var Of=P();ua--;Of===
b?$c=void 0:(d=$c,$c=b);$c!==b?sc=Td=[Td,$c]:(d=sc,sc=b)}else d=sc,sc=b;var Ze=sc;Ze!==b&&(Ze={type:"null",value:null});u=Ze;if(u===b){var tc=d;if(ha()!==b){wa();var lf=ta();lf!==b?tc={type:"date",value:lf.value}:(d=tc,tc=b)}else d=tc,tc=b;u=tc;if(u===b){var uc=d;if(W()!==b){wa();var mf=ta();mf!==b?uc={type:"timestamp",value:mf.value}:(d=uc,uc=b)}else d=uc,uc=b;u=uc;if(u===b){var Bb=d;var $e=oa();if($e!==b){wa();if(45===h.charCodeAt(d)){var cc=Pb;d++}else cc=b,0===ua&&f(Ab);cc===b&&(43===h.charCodeAt(d)?
(cc=Db,d++):(cc=b,0===ua&&f(Uc)));if(cc!==b){wa();var ad=ta();if(ad!==b){wa();var nf=Z();nf!==b?Bb={type:"interval",value:ad,qualifier:nf,op:cc}:(d=Bb,Bb=b)}else d=Bb,Bb=b}else d=Bb,Bb=b}else d=Bb,Bb=b;Bb===b&&(Bb=d,$e=oa(),$e!==b?(wa(),cc=ta(),cc!==b?(wa(),ad=Z(),ad!==b?Bb={type:"interval",value:cc,qualifier:ad,op:""}:(d=Bb,Bb=b)):(d=Bb,Bb=b)):(d=Bb,Bb=b));u=Bb}}}}}}var pb=u;if(pb===b){var Kb=d;var vc=d;if(h.substr(d,7).toLowerCase()===qd){var of=h.substr(d,7);d+=7}else of=b,0===ua&&f(Pd);if(of!==
b){var Ud=d;ua++;var Pf=P();ua--;Pf===b?Ud=void 0:(d=Ud,Ud=b);Ud!==b?vc="EXTRACT":(d=vc,vc=b)}else d=vc,vc=b;if(vc!==b){wa();var Qf=Ua();if(Qf!==b){wa();var Xb=qa();Xb===b&&(Xb=va(),Xb===b&&(Xb=xa(),Xb===b&&(Xb=Ha(),Xb===b&&(Xb=Ea(),Xb===b&&(Xb=Da())))));var pf=Xb;if(pf!==b){wa();var Rf=F();if(Rf!==b){wa();var qf=O();if(qf!==b){wa();var Sf=Wa();Sf!==b?Kb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(d=Kb,Kb=b)}else d=Kb,Kb=b}else d=Kb,Kb=b}else d=
Kb,Kb=b}else d=Kb,Kb=b}else d=Kb,Kb=b;pb=Kb;if(pb===b){var Lb=d;var wc=d;if(h.substr(d,9).toLowerCase()===pd){var rf=h.substr(d,9);d+=9}else rf=b,0===ua&&f(Se);if(rf!==b){var Vd=d;ua++;var Tf=P();ua--;Tf===b?Vd=void 0:(d=Vd,Vd=b);Vd!==b?wc="SUBSTRING":(d=wc,wc=b)}else d=wc,wc=b;if(wc!==b){wa();var Uf=Ua();if(Uf!==b){wa();var af=O();if(af!==b){wa();var Vf=F();if(Vf!==b){wa();var bf=O();if(bf!==b){wa();var dc=d;var xc=d;if(h.substr(d,3).toLowerCase()===od){var sf=h.substr(d,3);d+=3}else sf=b,0===ua&&
f(Re);if(sf!==b){var Wd=d;ua++;var Wf=P();ua--;Wf===b?Wd=void 0:(d=Wd,Wd=b);Wd!==b?xc="FOR":(d=xc,xc=b)}else d=xc,xc=b;var bd=xc;if(bd!==b){var Xf=wa();var tf=O();if(tf!==b){var Yf=wa();dc=bd=[bd,Xf,tf,Yf]}else d=dc,dc=b}else d=dc,dc=b;dc===b&&(dc=null);bd=Wa();bd!==b?Lb={type:"function",name:"substring",args:{type:"expression-list",value:dc?[af,bf,dc[2]]:[af,bf]}}:(d=Lb,Lb=b)}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b;pb=Lb;if(pb===b){var sb=d;var cf=V();if(cf!==b){wa();
var df=Ua();if(df!==b){wa();var ec=x();ec===b&&(ec=null);wa();var cd=O();if(cd!==b){wa();var ef=F();if(ef!==b){wa();var uf=O();if(uf!==b){wa();var Zf=Wa();Zf!==b?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ec?"BOTH":ec},cd,uf]}}:(d=sb,sb=b)}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b;sb===b&&(sb=d,cf=V(),cf!==b?(wa(),df=Ua(),df!==b?(wa(),ec=x(),ec===b&&(ec=null),wa(),cd=O(),cd!==b?(wa(),ef=Wa(),ef!==b?sb={type:"function",
name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ec?"BOTH":ec},cd]}}:(d=sb,sb=b)):(d=sb,sb=b)):(d=sb,sb=b)):(d=sb,sb=b));pb=sb;if(pb===b){var Mb=d;var yc=d;if(h.substr(d,8).toLowerCase()===sd){var vf=h.substr(d,8);d+=8}else vf=b,0===ua&&f(Ue);if(vf!==b){var Xd=d;ua++;var $f=P();ua--;$f===b?Xd=void 0:(d=Xd,Xd=b);Xd!==b?yc="POSITION":(d=yc,yc=b)}else d=yc,yc=b;if(yc!==b){wa();var ag=Ua();if(ag!==b){wa();var wf=O();if(wf!==b){wa();var bg=eb();if(bg!==b){wa();var xf=O();if(xf!==
b){wa();var cg=Wa();cg!==b?Mb={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(d=Mb,Mb=b)}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b;pb=Mb;if(pb===b){var Nb=d;var zc=d;if(h.substr(d,4).toLowerCase()===xd){var yf=h.substr(d,4);d+=4}else yf=b,0===ua&&f(Lc);if(yf!==b){var Yd=d;ua++;var dg=P();ua--;dg===b?Yd=void 0:(d=Yd,Yd=b);Yd!==b?zc="CAST":(d=zc,zc=b)}else d=zc,zc=b;if(zc!==b){wa();var eg=Ua();if(eg!==b){wa();var zf=O();if(zf!==b){wa();
var Ac=d;if(h.substr(d,2).toLowerCase()===yd){var Af=h.substr(d,2);d+=2}else Af=b,0===ua&&f(id);if(Af!==b){var Zd=d;ua++;var fg=P();ua--;fg===b?Zd=void 0:(d=Zd,Zd=b);Zd!==b?Ac="AS":(d=Ac,Ac=b)}else d=Ac,Ac=b;var gg=Ac;if(gg!==b){wa();var qb=d;var Bc=d;if(h.substr(d,7).toLowerCase()===zd){var Bf=h.substr(d,7);d+=7}else Bf=b,0===ua&&f(ve);if(Bf!==b){var $d=d;ua++;var hg=P();ua--;hg===b?$d=void 0:(d=$d,$d=b);$d!==b?Bc="INTEGER":(d=Bc,Bc=b)}else d=Bc,Bc=b;var tb=Bc;tb!==b&&(tb={type:"data-type",value:{type:"integer"}});
qb=tb;if(qb===b){qb=d;var Cc=d;if(h.substr(d,8).toLowerCase()===Ad){var Cf=h.substr(d,8);d+=8}else Cf=b,0===ua&&f(jd);if(Cf!==b){var ae=d;ua++;var ig=P();ua--;ig===b?ae=void 0:(d=ae,ae=b);ae!==b?Cc="SMALLINT":(d=Cc,Cc=b)}else d=Cc,Cc=b;tb=Cc;tb!==b&&(tb={type:"data-type",value:{type:"smallint"}});qb=tb;if(qb===b){qb=d;var Dc=d;if(h.substr(d,5).toLowerCase()===ic){var Df=h.substr(d,5);d+=5}else Df=b,0===ua&&f(Mc);if(Df!==b){var be=d;ua++;var jg=P();ua--;jg===b?be=void 0:(d=be,be=b);be!==b?Dc="FLOAT":
(d=Dc,Dc=b)}else d=Dc,Dc=b;tb=Dc;tb!==b&&(tb={type:"data-type",value:{type:"float"}});qb=tb;if(qb===b){qb=d;var Ec=d;if(h.substr(d,4).toLowerCase()===Qc){var Ef=h.substr(d,4);d+=4}else Ef=b,0===ua&&f(we);if(Ef!==b){var ce=d;ua++;var kg=P();ua--;kg===b?ce=void 0:(d=ce,ce=b);ce!==b?Ec="REAL":(d=Ec,Ec=b)}else d=Ec,Ec=b;tb=Ec;tb!==b&&(tb={type:"data-type",value:{type:"real"}});qb=tb;if(qb===b&&(qb=d,tb=ha(),tb!==b&&(tb={type:"data-type",value:{type:"date"}}),qb=tb,qb===b&&(qb=d,tb=W(),tb!==b&&(tb={type:"data-type",
value:{type:"timestamp"}}),qb=tb,qb===b))){qb=d;var Fc=d;if(h.substr(d,7).toLowerCase()===mc){var Ff=h.substr(d,7);d+=7}else Ff=b,0===ua&&f(Nc);if(Ff!==b){var de=d;ua++;var lg=P();ua--;lg===b?de=void 0:(d=de,de=b);de!==b?Fc="VARCHAR":(d=Fc,Fc=b)}else d=Fc,Fc=b;tb=Fc;if(tb!==b){wa();var mg=Ua();if(mg!==b){wa();var Gf=fb();if(Gf!==b){wa();var ng=Wa();ng!==b?qb={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(d=qb,qb=b)}else d=qb,qb=b}else d=qb,qb=b}else d=qb,qb=b}}}}var Hf=qb;if(Hf!==b){wa();
var og=Wa();og!==b?Nb={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(d=Nb,Nb=b)}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b;pb=Nb;if(pb===b){var jc=d;var ee;var Yb=d;Yb=ee=ca();if(Yb===b)if(Yb=d,96===h.charCodeAt(d)?(ee=Sc,d++):(ee=b,0===ua&&f(Pa)),ee!==b){var fe=[];if(Jc.test(h.charAt(d))){var fc=h.charAt(d);d++}else fc=b,0===ua&&f(ab);if(fc!==b)for(;fc!==b;)fe.push(fc),Jc.test(h.charAt(d))?(fc=h.charAt(d),d++):(fc=b,0===ua&&f(ab));else fe=
b;fe!==b?(96===h.charCodeAt(d)?(fc=Sc,d++):(fc=b,0===ua&&f(Pa)),fc!==b?Yb=fe.join(""):(d=Yb,Yb=b)):(d=Yb,Yb=b)}else d=Yb,Yb=b;var If=Yb;if(If!==b){wa();var pg=Ua();if(pg!==b){wa();var ge=y();ge===b&&(ge=null);wa();var qg=Wa();qg!==b?jc={type:"function",name:If,args:ge?ge:{type:"expression-list",value:[]}}:(d=jc,jc=b)}else d=jc,jc=b}else d=jc,jc=b;pb=jc;if(pb===b){var $b;var Cb=d;var ff=Sa();if(ff!==b){wa();var dd=O();if(dd!==b){wa();var ed=[];for($b=Ca();$b!==b;)ed.push($b),$b=Ca();$b=wa();var he=
Ma();he!==b?Cb={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:null}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;if(Cb===b)if(Cb=d,ff=Sa(),ff!==b)if(wa(),dd=O(),dd!==b){wa();ed=[];for($b=Ca();$b!==b;)ed.push($b),$b=Ca();$b=wa();he=La();if(he!==b){wa();var rg=Ma();rg!==b?Cb={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:he.value}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;else d=Cb,Cb=b;var gf=Cb;if(gf===b){var ac;var Ib=d;var hf=Sa();if(hf!==b){wa();var fd=[];for(ac=
Ba();ac!==b;)fd.push(ac),ac=Ba();ac=wa();var ie=Ma();ie!==b?Ib={type:"case-expression",format:"searched",clauses:fd,else:null}:(d=Ib,Ib=b)}else d=Ib,Ib=b;if(Ib===b)if(Ib=d,hf=Sa(),hf!==b){wa();fd=[];for(ac=Ba();ac!==b;)fd.push(ac),ac=Ba();ac=wa();ie=La();if(ie!==b){wa();var sg=Ma();sg!==b?Ib={type:"case-expression",format:"searched",clauses:fd,else:ie.value}:(d=Ib,Ib=b)}else d=Ib,Ib=b}else d=Ib,Ib=b;gf=Ib}pb=gf;if(pb===b){var je;var ke=d;var Jf=ja();if(Jf!==b){var Kf=[];for(je=Q();je!==b;)Kf.push(je),
je=Q();ke=Jf+Kf.join("")}else d=ke,ke=b;var le=ke;if(le!==b){var jf=le;le=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}pb=le;if(pb===b&&(pb=v(),pb===b)){pb=d;var tg=Ua();if(tg!==b){wa();var kf=O();if(kf!==b){wa();var ug=Wa();ug!==b?(kf.paren=!0,pb=kf):(d=pb,pb=b)}else d=pb,pb=b}else d=pb,pb=b}}}}}}}}}return pb}function ca(){var u;var D=d;var Y=ja();if(Y!==b){D=[];for(u=
P();u!==b;)D.push(u),u=P();D=Y+D.join("")}else d=D,D=b;return D}function ja(){if(Cd.test(h.charAt(d))){var u=h.charAt(d);d++}else u=b,0===ua&&f(Vc);return u}function P(){if(Dd.test(h.charAt(d))){var u=h.charAt(d);d++}else u=b,0===ua&&f(Jd);return u}function Q(){if(Ed.test(h.charAt(d))){var u=h.charAt(d);d++}else u=b,0===ua&&f(Wc);return u}function v(){var u=d;if(64===h.charCodeAt(d)){var D=Za;d++}else D=b,0===ua&&f(Ce);if(D!==b){var Y=ca();Y!==b?u=D=[D,Y]:(d=u,u=b)}else d=u,u=b;u!==b&&(u={type:"parameter",
value:u[1]});return u}function x(){var u=d;if(h.substr(d,7).toLowerCase()===vd){var D=h.substr(d,7);d+=7}else D=b,0===ua&&f(hb);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="LEADING":(d=u,u=b)}else d=u,u=b;u===b&&(u=d,h.substr(d,8).toLowerCase()===wd?(D=h.substr(d,8),d+=8):(D=b,0===ua&&f(vb)),D!==b?(D=d,ua++,Y=P(),ua--,Y===b?D=void 0:(d=D,D=b),D!==b?u="TRAILING":(d=u,u=b)):(d=u,u=b),u===b&&(u=d,h.substr(d,4).toLowerCase()===xe?(D=h.substr(d,4),d+=4):(D=b,0===ua&&f(kc)),D!==b?
(D=d,ua++,Y=P(),ua--,Y===b?D=void 0:(d=D,D=b),D!==b?u="BOTH":(d=u,u=b)):(d=u,u=b)));return u}function Z(){var u=d;var D=d;var Y=ka();if(Y!==b){wa();var ya=Ua();if(ya!==b)if(wa(),ya=sa(),ya!==b){wa();var Ja=Wa();Ja!==b?D={type:"interval-period",period:Y.value,precision:ya,secondary:null}:(d=D,D=b)}else d=D,D=b;else d=D,D=b}else d=D,D=b;D===b&&(D=d,Y=ka(),Y!==b&&(Y={type:"interval-period",period:Y.value,precision:null,secondary:null}),D=Y);if(D!==b)if(wa(),Y=d,h.substr(d,2).toLowerCase()===nc?(ya=h.substr(d,
2),d+=2):(ya=b,0===ua&&f(Pc)),ya!==b?(ya=d,ua++,Ja=P(),ua--,Ja===b?ya=void 0:(d=ya,ya=b),ya!==b?Y="TO":(d=Y,Y=b)):(d=Y,Y=b),Y!==b){wa();Y=d;ya=ka();ya!==b&&(ya={type:"interval-period",period:ya.value,precision:null,secondary:null});Y=ya;if(Y===b){Y=d;ya=Da();if(ya!==b)if(wa(),ya=Ua(),ya!==b)if(wa(),ya=sa(),ya!==b)if(wa(),Ja=Ka(),Ja!==b)if(wa(),Ja=na(),Ja!==b){wa();var cb=Wa();cb!==b?Y={type:"interval-period",period:"second",precision:ya,secondary:Ja}:(d=Y,Y=b)}else d=Y,Y=b;else d=Y,Y=b;else d=Y,Y=
b;else d=Y,Y=b;else d=Y,Y=b;Y===b&&(Y=d,ya=Da(),ya!==b?(wa(),ya=Ua(),ya!==b?(wa(),ya=sa(),ya!==b?(wa(),Ja=Wa(),Ja!==b?Y={type:"interval-period",period:"second",precision:ya,secondary:null}:(d=Y,Y=b)):(d=Y,Y=b)):(d=Y,Y=b)):(d=Y,Y=b),Y===b&&(Y=d,ya=Da(),ya!==b&&(ya={type:"interval-period",period:"second",precision:null,secondary:null}),Y=ya))}Y!==b?u={type:"interval-qualifier",start:D,end:Y}:(d=u,u=b)}else d=u,u=b;else d=u,u=b;u===b&&(u=d,Y=ka(),Y!==b?(wa(),D=Ua(),D!==b?(wa(),D=na(),D!==b?(wa(),ya=
Wa(),ya!==b?u={type:"interval-period",period:Y.value,precision:D,secondary:null}:(d=u,u=b)):(d=u,u=b)):(d=u,u=b)):(d=u,u=b),u===b&&(u=d,Y=ka(),Y!==b&&(Y={type:"interval-period",period:Y.value,precision:null,secondary:null}),u=Y,u===b&&(u=d,Y=Da(),Y!==b?(wa(),D=Ua(),D!==b?(wa(),D=sa(),D!==b?(wa(),ya=Ka(),ya!==b?(wa(),Y=na(),Y!==b?(wa(),ya=Wa(),ya!==b?u={type:"interval-period",period:"second",precision:D,secondary:Y}:(d=u,u=b)):(d=u,u=b)):(d=u,u=b)):(d=u,u=b)):(d=u,u=b)):(d=u,u=b),u===b&&(u=d,Y=Da(),
Y!==b?(wa(),D=Ua(),D!==b?(wa(),D=na(),D!==b?(wa(),ya=Wa(),ya!==b?u={type:"interval-period",period:"second",precision:D,secondary:null}:(d=u,u=b)):(d=u,u=b)):(d=u,u=b)):(d=u,u=b),u===b&&(u=d,Y=Da(),Y!==b&&(Y={type:"interval-period",period:"second",precision:null,secondary:null}),u=Y)))));return u}function ka(){var u=d;u=xa();u!==b&&(u={type:"string",value:"day"});u===b&&(u=d,u=Ha(),u!==b&&(u={type:"string",value:"hour"}),u===b&&(u=d,u=Ea(),u!==b&&(u={type:"string",value:"minute"}),u===b&&(u=d,u=va(),
u!==b&&(u={type:"string",value:"month"}),u===b&&(u=d,u=qa(),u!==b&&(u={type:"string",value:"year"})))));return u}function na(){var u=fb();u!==b&&(u=parseFloat(u));return u}function sa(){var u=fb();u!==b&&(u=parseFloat(u));return u}function ta(){var u=za();u===b&&(u=v());return u}function za(){var u=d;if(39===h.charCodeAt(d)){var D=Hb;d++}else D=b,0===ua&&f(Kd);D===b&&(h.substr(d,2)===T?(D=T,d+=2):(D=b,0===ua&&f(Ld)));if(D!==b){D=[];var Y=d;h.substr(d,2)===ia?(Y=ia,d+=2):(Y=b,0===ua&&f(Md));Y!==b&&
(Y="'");Y===b&&(Tc.test(h.charAt(d))?(Y=h.charAt(d),d++):(Y=b,0===ua&&f(Nd)));for(;Y!==b;)D.push(Y),Y=d,h.substr(d,2)===ia?(Y=ia,d+=2):(Y=b,0===ua&&f(Md)),Y!==b&&(Y="'"),Y===b&&(Tc.test(h.charAt(d))?(Y=h.charAt(d),d++):(Y=b,0===ua&&f(Nd)));39===h.charCodeAt(d)?(Y=Hb,d++):(Y=b,0===ua&&f(Kd));Y!==b?u={type:"string",value:D.join("")}:(d=u,u=b)}else d=u,u=b;return u}function Ba(){var u=d;if(Qa()!==b){wa();var D=O();if(D!==b){wa();var Y=Ra();Y!==b?(wa(),Y=O(),Y!==b?u={type:"when-clause",operand:D,value:Y}:
(d=u,u=b)):(d=u,u=b)}else d=u,u=b}else d=u,u=b;return u}function Ca(){var u=d;if(Qa()!==b){wa();var D=O();if(D!==b){wa();var Y=Ra();Y!==b?(wa(),Y=O(),Y!==b?u={type:"when-clause",operand:D,value:Y}:(d=u,u=b)):(d=u,u=b)}else d=u,u=b}else d=u,u=b;return u}function La(){var u=d;var D=d;if(h.substr(d,4).toLowerCase()===rb){var Y=h.substr(d,4);d+=4}else Y=b,0===ua&&f(da);if(Y!==b){Y=d;ua++;var ya=P();ua--;ya===b?Y=void 0:(d=Y,Y=b);Y!==b?D="ELSE":(d=D,D=b)}else d=D,D=b;D!==b?(wa(),D=O(),D!==b?u={type:"else-clause",
value:D}:(d=u,u=b)):(d=u,u=b);return u}function Oa(){var u=fb();if(u===b){u=d;if(45===h.charCodeAt(d)){var D=Pb;d++}else D=b,0===ua&&f(Ab);D===b&&(43===h.charCodeAt(d)?(D=Db,d++):(D=b,0===ua&&f(Uc)));if(D!==b){var Y=fb();Y!==b?u=D[0]+Y:(d=u,u=b)}else d=u,u=b}return u}function Ta(){var u=d;if(46===h.charCodeAt(d)){var D=X;d++}else D=b,0===ua&&f(De);D!==b?(u=fb(),u===b&&(u=null),u="."+(null!=u?u:"")):(d=u,u=b);return u}function Ya(){var u;var D=u=d;if(Gd.test(h.charAt(d))){var Y=h.charAt(d);d++}else Y=
b,0===ua&&f(Ee);Y!==b?(xb.test(h.charAt(d))?(D=h.charAt(d),d++):(D=b,0===ua&&f(Fe)),D===b&&(D=null),D="e"+(null===D?"":D)):(d=D,D=b);D!==b?(Y=fb(),Y!==b?u=D+Y:(d=u,u=b)):(d=u,u=b);return u}function fb(){var u=[];var D=ib();if(D!==b)for(;D!==b;)u.push(D),D=ib();else u=b;u!==b&&(u=u.join(""));return u}function ib(){if(Fd.test(h.charAt(d))){var u=h.charAt(d);d++}else u=b,0===ua&&f(te);return u}function eb(){var u=d;if(h.substr(d,2).toLowerCase()===Na){var D=h.substr(d,2);d+=2}else D=b,0===ua&&f(Je);
if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="IN":(d=u,u=b)}else d=u,u=b;return u}function c(){var u=d;if(h.substr(d,2).toLowerCase()===Va){var D=h.substr(d,2);d+=2}else D=b,0===ua&&f(Ke);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="IS":(d=u,u=b)}else d=u,u=b;return u}function t(){var u=d;if(h.substr(d,4).toLowerCase()===nb){var D=h.substr(d,4);d+=4}else D=b,0===ua&&f(Le);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="LIKE":(d=u,u=
b)}else d=u,u=b;return u}function fa(){var u=d;if(h.substr(d,3).toLowerCase()===mb){var D=h.substr(d,3);d+=3}else D=b,0===ua&&f(Me);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="NOT":(d=u,u=b)}else d=u,u=b;return u}function B(){var u=d;if(h.substr(d,3).toLowerCase()===wb){var D=h.substr(d,3);d+=3}else D=b,0===ua&&f(Ne);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="AND":(d=u,u=b)}else d=u,u=b;return u}function aa(){var u=d;if(h.substr(d,2).toLowerCase()===
Gb){var D=h.substr(d,2);d+=2}else D=b,0===ua&&f(Oe);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="OR":(d=u,u=b)}else d=u,u=b;return u}function m(){var u=d;if(h.substr(d,7).toLowerCase()===md){var D=h.substr(d,7);d+=7}else D=b,0===ua&&f(Pe);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="BETWEEN":(d=u,u=b)}else d=u,u=b;return u}function F(){var u=d;if(h.substr(d,4).toLowerCase()===nd){var D=h.substr(d,4);d+=4}else D=b,0===ua&&f(Qe);if(D!==b){D=d;ua++;var Y=
P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="FROM":(d=u,u=b)}else d=u,u=b;return u}function V(){var u=d;if(h.substr(d,4).toLowerCase()===rd){var D=h.substr(d,4);d+=4}else D=b,0===ua&&f(Te);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="TRIM":(d=u,u=b)}else d=u,u=b;return u}function W(){var u=d;if(h.substr(d,9).toLowerCase()===td){var D=h.substr(d,9);d+=9}else D=b,0===ua&&f(bc);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="TIMESTAMP":(d=u,u=b)}else d=u,u=b;
return u}function ha(){var u=d;if(h.substr(d,4).toLowerCase()===ud){var D=h.substr(d,4);d+=4}else D=b,0===ua&&f(ue);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="DATE":(d=u,u=b)}else d=u,u=b;return u}function oa(){var u=d;if(h.substr(d,8).toLowerCase()===ye){var D=h.substr(d,8);d+=8}else D=b,0===ua&&f(Oc);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="INTERVAL":(d=u,u=b)}else d=u,u=b;return u}function qa(){var u=d;if(h.substr(d,4).toLowerCase()===oc){var D=
h.substr(d,4);d+=4}else D=b,0===ua&&f(ld);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="YEAR":(d=u,u=b)}else d=u,u=b;return u}function va(){var u=d;if(h.substr(d,5).toLowerCase()===Vb){var D=h.substr(d,5);d+=5}else D=b,0===ua&&f(Ve);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="MONTH":(d=u,u=b)}else d=u,u=b;return u}function xa(){var u=d;if(h.substr(d,3).toLowerCase()===gd){var D=h.substr(d,3);d+=3}else D=b,0===ua&&f(We);if(D!==b){D=d;ua++;var Y=P();ua--;
Y===b?D=void 0:(d=D,D=b);D!==b?u="DAY":(d=u,u=b)}else d=u,u=b;return u}function Ha(){var u=d;if(h.substr(d,4).toLowerCase()===Gc){var D=h.substr(d,4);d+=4}else D=b,0===ua&&f(kd);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="HOUR":(d=u,u=b)}else d=u,u=b;return u}function Ea(){var u=d;if(h.substr(d,6).toLowerCase()===Hc){var D=h.substr(d,6);d+=6}else D=b,0===ua&&f(Xe);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="MINUTE":(d=u,u=b)}else d=u,u=b;return u}function Da(){var u=
d;if(h.substr(d,6).toLowerCase()===Ic){var D=h.substr(d,6);d+=6}else D=b,0===ua&&f(Ye);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="SECOND":(d=u,u=b)}else d=u,u=b;return u}function Sa(){var u=d;if(h.substr(d,4).toLowerCase()===pc){var D=h.substr(d,4);d+=4}else D=b,0===ua&&f($a);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="CASE":(d=u,u=b)}else d=u,u=b;return u}function Ma(){var u=d;if(h.substr(d,3).toLowerCase()===ze){var D=h.substr(d,3);d+=3}else D=b,
0===ua&&f(a);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="END":(d=u,u=b)}else d=u,u=b;return u}function Qa(){var u=d;if(h.substr(d,4).toLowerCase()===Ae){var D=h.substr(d,4);d+=4}else D=b,0===ua&&f(g);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?u="WHEN":(d=u,u=b)}else d=u,u=b;return u}function Ra(){var u=d;if(h.substr(d,4).toLowerCase()===Be){var D=h.substr(d,4);d+=4}else D=b,0===ua&&f(M);if(D!==b){D=d;ua++;var Y=P();ua--;Y===b?D=void 0:(d=D,D=b);D!==b?
u="THEN":(d=u,u=b)}else d=u,u=b;return u}function Ka(){if(44===h.charCodeAt(d)){var u=Rc;d++}else u=b,0===ua&&f(ma);return u}function Ua(){if(40===h.charCodeAt(d)){var u=Eb;d++}else u=b,0===ua&&f(ra);return u}function Wa(){if(41===h.charCodeAt(d)){var u=me;d++}else u=b,0===ua&&f(Aa);return u}function wa(){var u;var D=[];for(u=ub();u!==b;)D.push(u),u=ub();return D}function ub(){if(oe.test(h.charAt(d))){var u=h.charAt(d);d++}else u=b,0===ua&&f(Ia);return u}function jb(u,D,Y,ya){u={type:"binary-expression",
operator:u,left:D,right:Y};void 0!==ya&&(u.escape=ya);return u}function lb(u,D){for(var Y=0;Y<D.length;Y++)u=jb(D[Y][1],u,D[Y][3]);return u}l=void 0!==l?l:{};var b={},gb=l.grammarSource,Ob={start:p},Jb=p,la="!",gc="\x3d",Tb="\x3e\x3d",yb="\x3e",Sb="\x3c\x3d",Ub="\x3c\x3e",Zb="\x3c",hc="!\x3d",Db="+",Pb="-",kb="||",Fb="*",Qb="/",Za="@",Hb="'",T="N'",ia="''",X=".",pa="null",Ga="true",Fa="false",Na="in",Va="is",nb="like",ob="escape",mb="not",wb="and",Gb="or",md="between",nd="from",od="for",pd="substring",
qd="extract",rd="trim",sd="position",td="timestamp",ud="date",vd="leading",wd="trailing",xe="both",xd="cast",yd="as",zd="integer",Ad="smallint",ic="float",Qc="real",mc="varchar",nc="to",ye="interval",oc="year",Vb="month",gd="day",Gc="hour",Hc="minute",Ic="second",pc="case",ze="end",Ae="when",Be="then",rb="else",Rc=",",Eb="(",me=")",Sc="`",Cd=/^[A-Za-z_\x80-\uFFFF]/,Dd=/^[A-Za-z0-9_]/,Ed=/^[A-Za-z0-9_.\x80-\uFFFF]/,Tc=/^[^']/,Fd=/^[0-9]/,Gd=/^[eE]/,xb=/^[+\-]/,oe=/^[ \t\n\r]/,Jc=/^[^`]/,ne=r("!",!1),
Kc=r("\x3d",!1),hd=r("\x3e\x3d",!1),pe=r("\x3e",!1),Bd=r("\x3c\x3d",!1),se=r("\x3c\x3e",!1),re=r("\x3c",!1),qe=r("!\x3d",!1),Uc=r("+",!1),Ab=r("-",!1),Rb=r("||",!1),Hd=r("*",!1),Id=r("/",!1),Vc=L([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Jd=L([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Wc=L([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Ce=r("@",!1),Kd=r("'",!1),Ld=r("N'",!1),Md=r("''",!1),Nd=L(["'"],!0,!1),De=r(".",!1),te=L([["0","9"]],!1,!1),Ee=L(["e","E"],!1,!1),Fe=
L(["+","-"],!1,!1),Ge=r("NULL",!0),He=r("TRUE",!0),Ie=r("FALSE",!0),Je=r("IN",!0),Ke=r("IS",!0),Le=r("LIKE",!0),Od=r("ESCAPE",!0),Me=r("NOT",!0),Ne=r("AND",!0),Oe=r("OR",!0),Pe=r("BETWEEN",!0),Qe=r("FROM",!0),Re=r("FOR",!0),Se=r("SUBSTRING",!0),Pd=r("EXTRACT",!0),Te=r("TRIM",!0),Ue=r("POSITION",!0),bc=r("TIMESTAMP",!0),ue=r("DATE",!0),hb=r("LEADING",!0),vb=r("TRAILING",!0),kc=r("BOTH",!0),Lc=r("CAST",!0),id=r("AS",!0),ve=r("INTEGER",!0),jd=r("SMALLINT",!0),Mc=r("FLOAT",!0),we=r("REAL",!0),Nc=r("VARCHAR",
!0),Pc=r("TO",!0),Oc=r("INTERVAL",!0),ld=r("YEAR",!0),Ve=r("MONTH",!0),We=r("DAY",!0),kd=r("HOUR",!0),Xe=r("MINUTE",!0),Ye=r("SECOND",!0),$a=r("CASE",!0),a=r("END",!0),g=r("WHEN",!0),M=r("THEN",!0),da=r("ELSE",!0),ma=r(",",!1),ra=r("(",!1),Aa=r(")",!1),Ia=L([" ","\t","\n","\r"],!1,!1),Pa=r("`",!1),ab=L(["`"],!0,!1),d=0,bb=[{line:1,column:1}],Xa=0,zb=[],ua=0;if("startRule"in l){if(!(l.startRule in Ob))throw Error("Can't start parsing from rule \""+l.startRule+'".');Jb=Ob[l.startRule]}var Wb=Jb();if(Wb!==
b&&d===h.length)return Wb;Wb!==b&&d<h.length&&f({type:"end"});throw function(u,D,Y){return new R(R.buildMessage(u,D),u,D,Y)}(zb,Xa<h.length?h.charAt(Xa):null,Xa<h.length?N(Xa,Xa+1):N(Xa,Xa));}}})})(S);var I=S.exports;S=function(){function ba(){}ba.parse=function(R){return I.parse(R)};return e._createClass(ba)}();k.WhereGrammar=S;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(k){k.queryCapabilities=
{supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,
supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l,r,L,w){function N(O,q,n,z){const U=z.x-n.x;z=z.y-n.y;q=Math.min(1,Math.max(0,((q.x-n.x)*U+(q.y-n.y)*z)/(U*U+z*z)));O.x=n.x+U*q;O.y=n.y+z*q}function f(O,q){return O?q?4:3:q?3:2}let p=function(){function O(n,z,U){this.items=n;this.query=z;this.geometryType=U.geometryType;this.hasM=U.hasM;this.hasZ=U.hasZ;this.fieldsIndex=U.fieldsIndex;this.objectIdField=U.objectIdField;this.spatialReference=U.spatialReference;this.featureAdapter=U.featureAdapter}var q=O.prototype;q.createQueryResponseForCount=
function(){const n=new K(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return n.countDistinctValues(this.items);const {groupByFieldsForStatistics:z,having:U,outStatistics:H}=this.query;if(!z?.length)return 1;const E=new Map,G=new Map,A=new Set;for(const ca of H){var {statisticType:C}=ca;C="exceedslimit"!==C?ca.onStatisticField:void 0;if(!G.has(C)){var J=[];for(const ja of z){const P=this._getAttributeValues(n,ja,E);J.push(P)}G.set(C,this._calculateUniqueValues(J,n.returnDistinctValues))}C=
G.get(C);for(const ja in C){const {data:P,items:Q}=C[ja];J=P.join(",");U&&!n.validateItems(Q,U)||A.add(J)}}return A.size};q.createQueryResponse=async function(){let n;n=this.query.outStatistics?this.query.outStatistics.some(z=>"exceedslimit"===z.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const z=this.query.geometry;R.isValid(this.query.outSR)&&
!R.equals(z.spatialReference,this.query.outSR)?n.queryGeometry=r.cleanFromGeometryEngine({spatialReference:this.query.outSR,...h.project(z,z.spatialReference,this.query.outSR)}):n.queryGeometry=r.cleanFromGeometryEngine({spatialReference:this.query.outSR,...z})}return n};q.createSnappingResponse=function(n,z){const U=this.featureAdapter,H=f(this.hasZ,this.hasM),{point:E,mode:G}=n,A="number"===typeof n.distance?n.distance:n.distance.x,C="number"===typeof n.distance?n.distance:n.distance.y,J={candidates:[]},
ca="esriGeometryPolygon"===this.geometryType;z=this._getPointCreator(G,this.spatialReference,z);const ja=new y(null,0),P=new y(null,0),Q={x:0,y:0,z:0};for(const ta of this.items){var v=U.getGeometry(ta);if(null==v)continue;const {coords:za,lengths:Ba}=v;ja.coords=za;P.coords=za;if(n.returnEdge){v=0;for(var x=0;x<Ba.length;x++){var Z=Ba[x];for(var ka=0;ka<Z;ka++,v+=H){var na=ja;na.coordsIndex=v;if(ka!==Z-1){const Ca=P;Ca.coordsIndex=v+H;const La=Q;N(Q,E,na,Ca);var sa=(E.x-La.x)/A;const Oa=(E.y-La.y)/
C;sa=sa*sa+Oa*Oa;1>=sa&&J.candidates.push(l.makeEdgeCandidate(U.getObjectId(ta),z(La),Math.sqrt(sa),z(na),z(Ca)))}}}}if(n.returnVertex)for(v=ca?za.length-H:za.length,x=0;x<v;x+=H)Z=ja,Z.coordsIndex=x,ka=(E.x-Z.x)/A,na=(E.y-Z.y)/C,ka=ka*ka+na*na,1>=ka&&J.candidates.push(l.makeVertexCandidate(U.getObjectId(ta),z(Z),Math.sqrt(ka)))}J.candidates.sort((ta,za)=>ta.distance-za.distance);return J};q._getPointCreator=function(n,z,U){const H=null==U||R.equals(z,U)?G=>G:G=>h.project(G,z,U),{hasZ:E}=this;return"3d"===
n?E?({x:G,y:A,z:C})=>H({x:G,y:A,z:C}):({x:G,y:A})=>H({x:G,y:A,z:0}):({x:G,y:A})=>H({x:G,y:A})};q.createSummaryStatisticsResponse=async function(n){const {field:z,valueExpression:U,normalizationField:H,normalizationType:E,normalizationTotal:G,minValue:A,maxValue:C,scale:J}=n;n=this.fieldsIndex.isDateField(z);var ca=await this._getDataValues({field:z,valueExpression:U,normalizationField:H,normalizationType:E,normalizationTotal:G,scale:J});const ja=w.isNullCountSupported({normalizationType:E,normalizationField:H,
minValue:A,maxValue:C}),P=this.fieldsIndex.get(z),Q={value:.5,fieldType:P?.type};ca=L.isStringField(P)?w.calculateStringStatistics({values:ca,supportsNullCount:ja,percentileParams:Q}):w.calculateStatistics({values:ca,minValue:A,maxValue:C,useSampleStdDev:!E,supportsNullCount:ja,percentileParams:Q});return w.processSummaryStatisticsResult(ca,n)};q.createUniqueValuesResponse=async function(n){const {field:z,valueExpression:U,domains:H,returnAllCodedValues:E,scale:G}=n;var A=await this._getDataValues({field:z,
field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,valueExpression:U,scale:G});A=w.calculateUniqueValuesCount(A);return w.createUVResult(A,H,E,n.fieldDelimiter)};q.createClassBreaksResponse=async function(n){const {field:z,valueExpression:U,normalizationField:H,normalizationType:E,normalizationTotal:G,classificationMethod:A,standardDeviationInterval:C,minValue:J,maxValue:ca,numClasses:ja,scale:P}=n;n=await this._getDataValues({field:z,valueExpression:U,normalizationField:H,normalizationType:E,
normalizationTotal:G,scale:P});n=w.calculateClassBreaks(n,{field:z,normalizationField:H,normalizationType:E,normalizationTotal:G,classificationMethod:A,standardDeviationInterval:C,minValue:J,maxValue:ca,numClasses:ja});return w.resolveCBResult(n,A)};q.createHistogramResponse=async function(n){const {field:z,valueExpression:U,normalizationField:H,normalizationType:E,normalizationTotal:G,classificationMethod:A,standardDeviationInterval:C,minValue:J,maxValue:ca,numBins:ja,scale:P}=n;n=await this._getDataValues({field:z,
valueExpression:U,normalizationField:H,normalizationType:E,normalizationTotal:G,scale:P});return w.calculateHistogram(n,{field:z,normalizationField:H,normalizationType:E,normalizationTotal:G,classificationMethod:A,standardDeviationInterval:C,minValue:J,maxValue:ca,numBins:ja})};q._sortFeatures=function(n,z,U){if(1<n.length&&z&&z.length)for(const H of z.reverse()){z=H.split(" ");const E=z[0],G=this.fieldsIndex.get(E);z=z[1]?"desc"===z[1].toLowerCase():!1;const A=w.getAttributeComparator(G?.type,z);
n.sort((C,J)=>{C=U(C,E,G);J=U(J,E,G);return A(C,J)})}};q._createFeatureQueryResponse=function(n){const z=this.items,{geometryType:U,hasM:H,hasZ:E,objectIdField:G,spatialReference:A}=this,{outFields:C,outSR:J,quantizationParameters:ca,resultRecordCount:ja,resultOffset:P,returnZ:Q,returnM:v}=n,x=null!=ja?z.length>(P||0)+ja:!1,Z=C&&(C.includes("*")?[...this.fieldsIndex.fields]:C.map(ka=>this.fieldsIndex.get(ka)));return{exceededTransferLimit:x,features:this._createFeatures(n,z),fields:Z,geometryType:U,
hasM:H&&v,hasZ:E&&Q,objectIdFieldName:G,spatialReference:r.cleanFromGeometryEngine(J||A),transform:ca&&ba.toQuantizationTransform(ca)||null}};q._createFeatures=function(n,z){const U=new K(n,this.featureAdapter,this.fieldsIndex),{hasM:H,hasZ:E}=this,{orderByFields:G,quantizationParameters:A,returnGeometry:C,returnCentroid:J,maxAllowableOffset:ca,resultOffset:ja,resultRecordCount:P,returnZ:Q=!1,returnM:v=!1}=n,x=E&&Q,Z=H&&v;n=[];var ka=0;z=[...z];this._sortFeatures(z,G,(ta,za,Ba)=>U.getFieldValue(ta,
za,Ba));if(C||J){var na=ba.toQuantizationTransform(A)??void 0;if(C&&!J)for(var sa of z)n[ka++]={attributes:U.getAttributes(sa),geometry:r.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(sa),ca,na,x,Z)};else if(!C&&J)for(const ta of z)n[ka++]={attributes:U.getAttributes(ta),centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(ta,this),na)};else for(const ta of z)n[ka++]={attributes:U.getAttributes(ta),centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(ta,
this),na),geometry:r.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ta),ca,na,x,Z)}}else for(na of z)(sa=U.getAttributes(na))&&(n[ka++]={attributes:sa});ka=ja||0;null!=P&&(n=n.slice(ka,Math.min(n.length,ka+P)));return n};q._createExceedsLimitQueryResponse=function(n){var z=!1;let U=Number.POSITIVE_INFINITY,H=Number.POSITIVE_INFINITY;z=Number.POSITIVE_INFINITY;for(const E of n.outStatistics??[])if("exceedslimit"===E.statisticType){U=null!=E.maxPointCount?E.maxPointCount:
Number.POSITIVE_INFINITY;H=null!=E.maxRecordCount?E.maxRecordCount:Number.POSITIVE_INFINITY;z=null!=E.maxVertexCount?E.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)z=this.items.length>U;else if(this.items.length>H)z=!0;else{n=f(this.hasZ,this.hasM);const E=this.featureAdapter;z=this.items.reduce((G,A)=>{A=E.getGeometry(A);return G+(null!=A&&A.coords.length||0)},0)/n>z}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",
domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(z)}}]}};q._createStatisticsQueryResponse=async function(n){var z={attributes:{}};const U=[],H=new Map,E=new Map,G=new Map,A=new Map,C=new K(n,this.featureAdapter,this.fieldsIndex);var J=n.outStatistics;const {groupByFieldsForStatistics:ca,having:ja,orderByFields:P}=n;n=ca&&ca.length;const Q=!!n,v=Q?ca[0]:null,x=Q&&!this.fieldsIndex.get(v);for(const ta of J??[]){const {outStatisticFieldName:za,statisticType:Ba}=ta;J=ta;var Z=
"exceedslimit"!==Ba?ta.onStatisticField:void 0;const Ca="percentile_disc"===Ba||"percentile_cont"===Ba,La="EnvelopeAggregate"===Ba||"CentroidAggregate"===Ba||"ConvexHullAggregate"===Ba,Oa=Q&&1===n&&(Z===v||x)&&"count"===Ba;if(Q){if(!G.has(Z)){var ka=[];for(const Ta of ca){var na=this._getAttributeValues(C,Ta,H);ka.push(na)}G.set(Z,this._calculateUniqueValues(ka,La?!1:C.returnDistinctValues))}ka=G.get(Z);for(const Ta in ka){const {count:Ya,data:fb,items:ib,itemPositions:eb}=ka[Ta];na=fb.join(",");
if(!ja||C.validateItems(ib,ja)){const c=A.get(na)||{attributes:{}};if(La){c.aggregateGeometries||(c.aggregateGeometries={});const {aggregateGeometries:fa,outStatisticFieldName:B}=await this._getAggregateGeometry(J,ib);c.aggregateGeometries[B]=fa}else{var sa=null;if(Oa)sa=Ya;else{const fa=this._getAttributeValues(C,Z,H);sa=eb.map(B=>fa[B]);sa=Ca&&"statisticParameters"in J?this._getPercentileValue(J,sa):this._getStatisticValue(J,sa,null,C.returnDistinctValues)}c.attributes[za]=sa}let t=0;ca.forEach((fa,
B)=>c.attributes[this.fieldsIndex.get(fa)?fa:`EXPR_${++t}`]=fb[B]);A.set(na,c)}}}else if(La){z.aggregateGeometries||(z.aggregateGeometries={});const {aggregateGeometries:Ta,outStatisticFieldName:Ya}=await this._getAggregateGeometry(J,this.items);z.aggregateGeometries[Ya]=Ta}else Z=this._getAttributeValues(C,Z,H),z.attributes[za]=Ca&&"statisticParameters"in J?this._getPercentileValue(J,Z):this._getStatisticValue(J,Z,E,C.returnDistinctValues);U.push({name:za,alias:za,type:"esriFieldTypeDouble"})}z=
Q?Array.from(A.values()):[z];this._sortFeatures(z,P,(ta,za)=>ta.attributes[za]);return{fields:U,features:z}};q._getAggregateGeometry=async function(n,z){const {convexHull:U,union:H}=await new Promise((Q,v)=>k(["../../../geometry/geometryEngineJSON"],Q,v)),{statisticType:E,outStatisticFieldName:G}=n,{featureAdapter:A,spatialReference:C,geometryType:J,hasZ:ca,hasM:ja}=this;z=z.map(Q=>r.getGeometry(J,ca,ja,A.getGeometry(Q)));const P=U(C,z,!0)[0];n={aggregateGeometries:null,outStatisticFieldName:null};
"EnvelopeAggregate"===E?(z=P?I.getPolygonExtent(P):I.getGeometryExtent(H(C,z)),n.aggregateGeometries={...z,spatialReference:C},n.outStatisticFieldName=G||"extent"):"CentroidAggregate"===E?(z=P?S.polygonCentroid(P):S.extentCentroid(I.getGeometryExtent(H(C,z))),n.aggregateGeometries={x:z[0],y:z[1],spatialReference:C},n.outStatisticFieldName=G||"centroid"):"ConvexHullAggregate"===E&&(n.aggregateGeometries=P,n.outStatisticFieldName=G||"convexHull");return n};q._getStatisticValue=function(n,z,U,H){const {onStatisticField:E,
statisticType:G}=n;n=null;n=U?.has(E)?U.get(E):L.isStringField(this.fieldsIndex.get(E))?w.calculateStringStatistics({values:z,returnDistinct:H}):w.calculateStatistics({values:H?[...(new Set(z))]:z,minValue:null,maxValue:null,useSampleStdDev:!0});U&&U.set(E,n);return n["var"===G?"variance":G]};q._getPercentileValue=function(n,z){const {onStatisticField:U,statisticParameters:H,statisticType:E}=n,{value:G,orderBy:A}=H;n=this.fieldsIndex.get(U);return w.calculatePercentile(z,{value:G,orderBy:A,fieldType:n?.type,
isDiscrete:"percentile_disc"===E})};q._getAttributeValues=function(n,z,U){if(U.has(z))return U.get(z);const H=this.fieldsIndex.get(z),E=this.items.map(G=>n.getFieldValue(G,z,H));U.set(z,E);return E};q._calculateUniqueValues=function(n,z){const U={},H=this.items,E=H.length;for(let G=0;G<E;G++){const A=H[G],C=[];for(const ca of n)C.push(ca[G]);const J=C.join(",");null==U[J]?U[J]={count:1,data:C,items:[A],itemPositions:[G]}:(z||U[J].count++,U[J].items.push(A),U[J].itemPositions.push(G))}return U};q._getDataValues=
async function(n){const z=new K(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:U,scale:H}=n,E=U?{viewingMode:"map",scale:H,spatialReference:this.query.outSR||this.spatialReference}:null;return U?z.getExpressionValues(this.items,U,E,{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM}):z.getDataValues(this.items,{field:n.field,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,normalizationField:n.normalizationField,normalizationType:n.normalizationType,normalizationTotal:n.normalizationTotal})};
ea._createClass(O,[{key:"size",get:function(){return this.items.length}}]);return O}(),y=function(){function O(q,n){this.coords=q;this.coordsIndex=n}ea._createClass(O,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return O}();e.QueryEngineResult=p;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports",
"./jsonUtils"],function(k,e){function ea({scale:A,translate:C},J){return Math.round((J-C[0])/A[0])}function S({scale:A,translate:C},J){return Math.round((C[1]-J)/A[1])}function I(A,C,J){const ca=[];let ja,P,Q,v;for(let x=0;x<J.length;x++){const Z=J[x];if(0<x){if(Q=ea(A,Z[0]),v=S(A,Z[1]),Q!==ja||v!==P)ca.push(C(Z,Q-ja,v-P)),ja=Q,P=v}else ja=ea(A,Z[0]),P=S(A,Z[1]),ca.push(C(Z,ja,P))}return 0<ca.length?ca:null}function ba(A,C,J,ca){return I(A,J?ca?G:E:ca?E:H,C)}function R(A,C,J,ca){const ja=[];J=J?ca?
G:E:ca?E:H;for(ca=0;ca<C.length;ca++){const P=I(A,J,C[ca]);P&&3<=P.length&&ja.push(P)}return ja.length?ja:null}function K(A,C,J,ca){const ja=[];J=J?ca?G:E:ca?E:H;for(ca=0;ca<C.length;ca++){const P=I(A,J,C[ca]);P&&2<=P.length&&ja.push(P)}return ja.length?ja:null}function h({scale:A,translate:C},J){return J*A[0]+C[0]}function l({scale:A,translate:C},J){return C[1]-J*A[1]}function r(A,C,J){const ca=Array(J.length);if(!J.length)return ca;const [ja,P]=A.scale;let Q=h(A,J[0][0]);A=l(A,J[0][1]);ca[0]=C(J[0],
Q,A);for(let v=1;v<J.length;v++){const x=J[v];Q+=x[0]*ja;A-=x[1]*P;ca[v]=C(x,Q,A)}return ca}function L(A,C,J){const ca=Array(J.length);for(let ja=0;ja<J.length;ja++)ca[ja]=r(A,C,J[ja]);return ca}function w(A,C,J,ca){return r(A,J?ca?G:E:ca?E:H,C)}function N(A,C,J,ca){return L(A,J?ca?G:E:ca?E:H,C)}function f(A,C,J,ca){return L(A,J?ca?G:E:ca?E:H,C)}function p(A,C,J){let [ca,ja]=J[0],P=Math.min(ca,C[0]),Q=Math.min(ja,C[1]),v=Math.max(ca,C[2]);C=Math.max(ja,C[3]);for(let x=1;x<J.length;x++){const [Z,ka]=
J[x];ca+=Z;ja+=ka;0>Z&&(P=Math.min(P,ca));0<Z&&(v=Math.max(v,ca));0>ka?Q=Math.min(Q,ja):0<ka&&(C=Math.max(C,ja))}A[0]=P;A[1]=Q;A[2]=v;A[3]=C;return A}function y(A,C){if(!C.length)return null;A[0]=A[1]=Number.POSITIVE_INFINITY;A[2]=A[3]=Number.NEGATIVE_INFINITY;for(let J=0;J<C.length;J++)p(A,A,C[J]);return A}function O(A,C,J,ca,ja){C.xmin=ea(A,J.xmin);C.ymin=S(A,J.ymin);C.xmax=ea(A,J.xmax);C.ymax=S(A,J.ymax);C!==J&&(ca&&(C.zmin=J.zmin,C.zmax=J.zmax),ja&&(C.mmin=J.mmin,C.mmax=J.mmax));return C}function q(A,
C,J,ca,ja){C.points=ba(A,J.points,ca,ja)??[];return C}function n(A,C,J,ca,ja){C.x=ea(A,J.x);C.y=S(A,J.y);C!==J&&(ca&&(C.z=J.z),ja&&(C.m=J.m));return C}function z(A,C,J,ca,ja){A=R(A,J.rings,ca,ja);if(!A)return null;C.rings=A;return C}function U(A,C,J,ca,ja){A=K(A,J.paths,ca,ja);if(!A)return null;C.paths=A;return C}const H=(A,C,J)=>[C,J],E=(A,C,J)=>[C,J,A[2]],G=(A,C,J)=>[C,J,A[2],A[3]];k.equals=function(A,C){if(A===C||null==A&&null==C)return!0;if(null==A||null==C)return!1;let J,ca,ja,P;A&&"upperLeft"===
A.originPosition?(J=A.translate[0],ca=A.translate[1],A=A.scale[0]):(J=null!=A.extent?A.extent.xmin:0,ca=null!=A.extent?A.extent.ymax:0,A=A.tolerance);C&&"upperLeft"===C.originPosition?(ja=C.translate[0],P=C.translate[1],C=C.scale[0]):(ja=null!=C.extent?C.extent.xmin:0,P=null!=C.extent?C.extent.ymax:0,C=C.tolerance);return J===ja&&ca===P&&A===C};k.getQuantizedBoundsCoordsArray=p;k.getQuantizedBoundsCoordsArrayArray=y;k.getQuantizedBoundsPaths=function(A){return y([0,0,0,0],A)};k.getQuantizedBoundsPoints=
function(A){const C=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return p(C,C,A)};k.getQuantizedBoundsRings=function(A){return y([0,0,0,0],A)};k.quantizeBounds=function(A,C,J){C[0]=ea(A,J[0]);C[3]=S(A,J[1]);C[2]=ea(A,J[2]);C[1]=S(A,J[3]);return C};k.quantizeExtent=O;k.quantizeGeometry=function(A,C){return A&&C?e.isPoint(C)?n(A,{},C,!1,!1):e.isPolyline(C)?U(A,{},C,!1,!1):e.isPolygon(C)?z(A,{},C,!1,!1):e.isMultipoint(C)?q(A,{},C,!1,!1):e.isExtent(C)?
O(A,{},C,!1,!1):null:null};k.quantizeMultipoint=q;k.quantizePaths=K;k.quantizePoint=n;k.quantizePoints=ba;k.quantizePolygon=z;k.quantizePolyline=U;k.quantizeRings=R;k.quantizeX=ea;k.quantizeY=S;k.toQuantizationTransform=function(A){return A?{originPosition:"upper-left"===A.originPosition?"upperLeft":"lower-left"===A.originPosition?"lowerLeft":A.originPosition,scale:A.tolerance?[A.tolerance,A.tolerance]:[1,1],translate:null!=A.extent?[A.extent.xmin,A.extent.ymax]:[0,0]}:null};k.unquantizeBounds=function(A,
C,J){return J?(C[0]=h(A,J[0]),C[1]=l(A,J[3]),C[2]=h(A,J[2]),C[3]=l(A,J[1]),C):[h(A,C[0]),l(A,C[3]),h(A,C[2]),l(A,C[1])]};k.unquantizeCoordsArray=r;k.unquantizeCoordsArrayArray=L;k.unquantizeExtent=function(A,C,J,ca,ja){C.xmin=h(A,J.xmin);C.ymin=l(A,J.ymin);C.xmax=h(A,J.xmax);C.ymax=l(A,J.ymax);C!==J&&(ca&&(C.zmin=J.zmin,C.zmax=J.zmax),ja&&(C.mmin=J.mmin,C.mmax=J.mmax));return C};k.unquantizeMultipoint=function(A,C,J,ca,ja){null!=J&&(C.points=w(A,J.points,ca,ja));return C};k.unquantizePaths=N;k.unquantizePoint=
function(A,C,J,ca,ja){if(null==J)return C;C.x=h(A,J.x);C.y=l(A,J.y);C!==J&&(ca&&(C.z=J.z),ja&&(C.m=J.m));return C};k.unquantizePoints=w;k.unquantizePolygon=function(A,C,J,ca,ja){null!=J&&(C.rings=f(A,J.rings,ca,ja));return C};k.unquantizePolyline=function(A,C,J,ca,ja){null!=J&&(C.paths=N(A,J.paths,ca,ja));return C};k.unquantizeRings=f;k.unquantizeX=h;k.unquantizeY=l;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"./attributeSupport","./utils","../../../statistics/utils","../../../support/arcadeOnDemand"],function(k,e,ea,S,I){return function(){function ba(K,h,l){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=K.returnDistinctValues??!1;this.fieldsIndex=l;this.featureAdapter=h;if((h=K.outFields)&&!h.includes("*")){this.outFields=h;K=0;for(const L of h){var r=e.getExpressionFromFieldName(L);r=(h=this.fieldsIndex.get(r))?null:e.getWhereClause(r,l);h=h?h.name:e.getAliasFromFieldName(L)||
`FIELD_EXP_${K++}`;this._fieldDataCache.set(L,{alias:h,clause:r})}}}var R=ba.prototype;R.countDistinctValues=function(K){if(!this.returnDistinctValues)return K.length;K.forEach(h=>this.getAttributes(h));return this._returnDistinctMap.size};R.getAttributes=function(K){K=this._processAttributesForOutFields(K);return this._processAttributesForDistinctValues(K)};R.getFieldValue=function(K,h,l){const r=l?l.name:h;let L=null;this._fieldDataCache.has(r)?L=this._fieldDataCache.get(r)?.clause:l||(L=e.getWhereClause(h,
this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:L}));return l?this.featureAdapter.getAttribute(K,r):L?.calculateValue(K,this.featureAdapter)};R.getDataValues=function(K,h){const l=h.normalizationType,r=h.normalizationTotal;return K.map(L=>{let w=h.field&&this.getFieldValue(L,h.field,this.fieldsIndex.get(h.field));h.field2&&(w=`${S.processNullValue(w)}${h.fieldDelimiter}${S.processNullValue(this.getFieldValue(L,h.field2,this.fieldsIndex.get(h.field2)))}`,h.field3&&(w=`${w}${h.fieldDelimiter}${S.processNullValue(this.getFieldValue(L,
h.field3,this.fieldsIndex.get(h.field3)))}`));l&&Number.isFinite(w)&&(L="field"===l&&h.normalizationField?this.getFieldValue(L,h.normalizationField,this.fieldsIndex.get(h.normalizationField)):null,w=S.getNormalizedValue(w,l,L,r));return w})};R.getExpressionValues=async function(K,h,l,r){const {arcadeUtils:L}=await I.loadArcade(),w=L.hasGeometryOperations(h);w&&await L.enableGeometryOperations();const N=L.createFunction(h),f=l&&L.getViewInfo(l),p={fields:this.fieldsIndex.fields};return K.map(y=>{y=
{attributes:this.featureAdapter.getAttributes(y),layer:p,geometry:w?{...ea.getGeometry(r.geometryType,r.hasZ,r.hasM,this.featureAdapter.getGeometry(y)),spatialReference:l?.spatialReference}:null};y=L.createExecContext(y,f);return L.executeFunction(N,y)})};R.validateItem=function(K,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:e.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testFeature(K,this.featureAdapter)??!1};R.validateItems=function(K,
h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:e.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testSet(K,this.featureAdapter)??!1};R._processAttributesForOutFields=function(K){const h=this.outFields;if(!h||!h.length)return this.featureAdapter.getAttributes(K);const l={};for(const r of h){const {alias:L,clause:w}=this._fieldDataCache.get(r);l[L]=w?w.calculateValue(K,this.featureAdapter):this.featureAdapter.getAttribute(K,L)}return l};R._processAttributesForDistinctValues=
function(K){if(null==K||!this.returnDistinctValues)return K;var h=this.outFields,l=[];if(h)for(const L of h){var {alias:r}=this._fieldDataCache.get(L);l.push(K[r])}else for(r in K)l.push(K[r]);h=`${(h||["*"]).join(",")}=${l.join(",")}`;l=this._returnDistinctMap.get(h)||0;this._returnDistinctMap.set(h,++l);return 1<l?null:K};return k._createClass(ba)}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(k,
e,ea){function S(H){return null==H||"string"===typeof H&&!H?"\x3cNull\x3e":H}function I(H){const E=null!=H.minValue||null!=H.maxValue,G=!!H.sqlExpression&&H.supportsSQLExpression;return!(null!=H.normalizationField||null!=H.normalizationType)&&!E&&!G}function ba(H){const {values:E,useSampleStdDev:G,supportsNullCount:A}=H;var C=Number.POSITIVE_INFINITY;let J=Number.NEGATIVE_INFINITY,ca=null,ja=null;var P=null;let Q=null,v=0;const x=null==H.minValue?-Infinity:H.minValue,Z=null==H.maxValue?Infinity:H.maxValue;
for(const ka of E)Number.isFinite(ka)?ka>=x&&ka<=Z&&(ca=null===ca?ka:ca+ka,C=Math.min(C,ka),J=Math.max(J,ka),v++):"string"===typeof ka&&v++;if(v&&null!=ca){ja=ca/v;P=0;for(const ka of E)Number.isFinite(ka)&&ka>=x&&ka<=Z&&(P+=(ka-ja)**2);Q=G?1<v?P/(v-1):0:0<v?P/v:0;P=Math.sqrt(Q)}else J=C=null;C={avg:ja,count:v,max:J,min:C,stddev:P,sum:ca,variance:Q};A&&(C.nullcount=E.length-v);H.percentileParams&&(C.median=R(E,H.percentileParams));return C}function R(H,E){const {fieldType:G,value:A,orderBy:C,isDiscrete:J}=
E,ca=K(G,"desc"===C);H=[...H].filter(v=>null!=v).sort((v,x)=>ca(v,x));if(0===H.length)return null;if(0>=A)return H[0];if(1<=A)return H[H.length-1];var ja=(H.length-1)*A,P=Math.floor(ja);E=P+1;ja%=1;P=H[P];const Q=H[E];return E>=H.length||J||"string"===typeof P||"string"===typeof Q?P:P*(1-ja)+Q*ja}function K(H,E){const G=E?1:-1,A=r(E),C=l(E);if(!H||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...z].includes(H))return(J,ca)=>"number"===typeof J&&"number"===
typeof ca?A(J,ca):"string"===typeof J&&"string"===typeof ca?C(J,ca):G;if("esriFieldTypeDate"===H)return(J,ca)=>{J=(new Date(J)).getTime();ca=(new Date(ca)).getTime();return isNaN(J)||isNaN(ca)?G:A(J,ca)};if(z.has(H))return(J,ca)=>A(J,ca);if("esriFieldTypeString"===H)return(J,ca)=>C(J,ca);if("esriFieldTypeGUID"===H||"esriFieldTypeGlobalID"===H){const J=l(E);return(ca,ja)=>J(L(ca),L(ja))}return E?(J,ca)=>1:(J,ca)=>-1}function h(H,E,G){if(G){if(null==H)return null==E?0:1;if(null==E)return-1}else{if(null==
H)return null==E?0:-1;if(null==E)return 1}return null}function l(H){return H?(E,G)=>{const A=h(E,G,!0);if(null!=A)return A;E=E.toUpperCase();G=G.toUpperCase();return E>G?-1:E<G?1:0}:(E,G)=>{const A=h(E,G,!1);if(null!=A)return A;E=E.toUpperCase();G=G.toUpperCase();return E<G?-1:E>G?1:0}}function r(H){return H?(E,G)=>{const A=h(E,G,!0);return null!=A?A:G-E}:(E,G)=>{const A=h(E,G,!1);return null!=A?A:E-G}}function L(H){return H.substr(24,12)+H.substr(19,4)+H.substr(16,2)+H.substr(14,2)+H.substr(11,2)+
H.substr(9,2)+H.substr(6,2)+H.substr(4,2)+H.substr(2,2)+H.substr(0,2)}function w(H){return"coded-value"!==H?.type?[]:H.codedValues.map(E=>E.code)}function N(H,E){const G=p({field:E.field,normalizationType:E.normalizationType,normalizationField:E.normalizationField,classificationMethod:E.classificationMethod,standardDeviationInterval:E.standardDeviationInterval,breakCount:E.numClasses||5});H=f(H,E.minValue,E.maxValue);return ea.createGenerateRendererClassBreaks({definition:G,values:H,normalizationTotal:E.normalizationTotal})}
function f(H,E,G){const A=null==E?-Infinity:E,C=null==G?Infinity:G;return H.filter(J=>Number.isFinite(J)&&J>=A&&J<=C)}function p(H){const {breakCount:E,field:G,normalizationField:A,normalizationType:C}=H,J=H.classificationMethod||"equal-interval";return new e({breakCount:E,classificationField:G,classificationMethod:J,normalizationField:"field"===C?A:void 0,normalizationType:C,standardDeviationInterval:"standard-deviation"===J?H.standardDeviationInterval||1:void 0})}function y(H,E){const {field:G,
classificationMethod:A,standardDeviationInterval:C,normalizationType:J,normalizationField:ca,normalizationTotal:ja,minValue:P,maxValue:Q}=E,v=E.numBins||10;let x=E=null,Z=null;A&&"equal-interval"!==A||J?({classBreaks:H}=N(H,{field:G,normalizationType:J,normalizationField:ca,normalizationTotal:ja,classificationMethod:A,standardDeviationInterval:C,minValue:P,maxValue:Q,numClasses:v}),E=H[0].minValue,x=H[H.length-1].maxValue,Z=H.map(ka=>[ka.minValue,ka.maxValue])):(null!=P&&null!=Q?(E=P,x=Q):(H=ba({values:H,
minValue:P,maxValue:Q,useSampleStdDev:!J,supportsNullCount:I({normalizationType:J,normalizationField:ca,minValue:P,maxValue:Q})}),E=H.min??null,x=H.max??null),Z=q(E??0,x??0,v));return{min:E,max:x,intervals:Z}}function O(H,E){let G=-1;for(let A=H.length-1;0<=A;A--)if(E>=H[A][0]){G=A;break}return G}function q(H,E,G){const A=(E-H)/G,C=[];let J;for(let ca=1;ca<=G;ca++)J=H+A,J=Number(J.toFixed(16)),C.push([H,ca===G?E:J]),H=J;return C}const n=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,z=new Set(["esriFieldTypeInteger",
"esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),U="min max avg stddev count sum variance nullcount median".split(" ");k.calculateClassBreaks=N;k.calculateHistogram=function(H,E){var G=y(H,E);if(null==G.min&&null==G.max)return{bins:[],minValue:G.min,maxValue:G.max,normalizationTotal:E.normalizationTotal};const A=G.intervals,C=G.min??0;G=G.max??0;const J=A.map((ca,ja)=>({minValue:A[ja][0],maxValue:A[ja][1],count:0}));for(const ca of H)null!=ca&&ca>=C&&ca<=G&&(H=O(A,ca),-1<
H&&J[H].count++);return{bins:J,minValue:C,maxValue:G,normalizationTotal:E.normalizationTotal}};k.calculatePercentile=R;k.calculateStatistics=ba;k.calculateStringStatistics=function(H){const E=H.returnDistinct?[...(new Set(H.values))]:H.values;var G=E.filter(C=>null!=C).sort();const A=G.length;G={count:A,min:G[0],max:G[A-1]};H.supportsNullCount&&(G.nullcount=E.length-A);H.percentileParams&&(G.median=R(E,H.percentileParams));return G};k.calculateUniqueValuesCount=function(H){const E={};for(let G of H){if(null==
G||"string"===typeof G&&""===G.trim())G=null;null==E[G]?E[G]={count:1,data:G}:E[G].count++}return{count:E}};k.createClassBreaksDefinition=p;k.createUVResult=function(H,E,G,A){H=H.count;const C=[];if(G&&E){G=[];var J=w(E[0]);for(const ca of J)if(E[1]){J=w(E[1]);for(const ja of J)if(E[2]){J=w(E[2]);for(const P of J)G.push(`${S(ca)}${A}${S(ja)}${A}${S(P)}`)}else G.push(`${S(ca)}${A}${S(ja)}`)}else G.push(ca);for(const ca of G)H.hasOwnProperty(ca)||(H[ca]={data:ca,count:0})}for(const ca in H)E=H[ca],
C.push({value:E.data,count:E.count,label:E.label});return{uniqueValueInfos:C}};k.getAttributeComparator=K;k.getEqualIntervalBins=q;k.getNormalizedValue=function(H,E,G,A){let C=null;switch(E){case "log":0!==H&&(C=Math.log(H)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(A)&&0!==A&&(C=H/A*100);break;case "field":Number.isFinite(G)&&0!==G&&(C=H/G);break;case "natural-log":0<H&&(C=Math.log(H));break;case "square-root":0<H&&(C=H**.5)}return C};k.isNullCountSupported=I;k.processNullValue=S;
k.processSummaryStatisticsResult=function(H,E){let G;for(G in H)U.includes(G)&&(Number.isFinite(H[G])||(H[G]=null));if(!E)return H;["avg","stddev","variance"].forEach(A=>{null!=H[A]&&(H[A]=Math.ceil(H[A]??0))});return H};k.resolveCBResult=function(H,E){let G=H.classBreaks;const A=G[0]?.minValue,C=G[G.length-1]?.maxValue,J="standard-deviation"===E;G=G.map(ca=>{const ja=ca.label;ca={minValue:ca.minValue,maxValue:ca.maxValue,label:ja};if(J&&ja){const P=ja.match(n)?.map(Q=>+Q.trim())??[];2===P.length?
(ca.minStdDev=P[0],ca.maxStdDev=P[1],0>P[0]&&0<P[1]&&(ca.hasAvg=!0)):1===P.length&&(ja.includes("\x3c")?(ca.minStdDev=null,ca.maxStdDev=P[0]):ja.includes("\x3e")&&(ca.minStdDev=P[0],ca.maxStdDev=null))}return ca});return{minValue:A,maxValue:C,classBreakInfos:G,normalizationTotal:H.normalizationTotal}};k.statisticTypes=U;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l){ba=new ea.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ea=new ea.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});S=function(r){function L(w){w=r.call(this,w)||this;w.type="class-breaks-definition";
w.breakCount=null;w.classificationField=null;w.classificationMethod=null;w.normalizationField=null;w.normalizationType=null;return w}k._inherits(L,r);k._createClass(L,[{key:"standardDeviationInterval",set:function(w){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",w)}},{key:"definedInterval",set:function(w){"defined-interval"===this.classificationMethod&&this._set("definedInterval",w)}}]);return L}(S.JSONSupport);e.__decorate([h.enumeration({classBreaksDef:"class-breaks-definition"})],
S.prototype,"type",void 0);e.__decorate([I.property({json:{write:!0}})],S.prototype,"breakCount",void 0);e.__decorate([I.property({json:{write:!0}})],S.prototype,"classificationField",void 0);e.__decorate([I.property({type:String,json:{read:ba.read,write:ba.write}})],S.prototype,"classificationMethod",void 0);e.__decorate([I.property({json:{write:!0}})],S.prototype,"normalizationField",void 0);e.__decorate([I.property({json:{read:ea.read,write:ea.write}})],S.prototype,"normalizationType",void 0);
e.__decorate([I.property({value:null,json:{write:!0}})],S.prototype,"standardDeviationInterval",null);e.__decorate([I.property({value:null,json:{write:!0}})],S.prototype,"definedInterval",null);return S=e.__decorate([l.subclass("esri.rest.support.ClassBreaksDefinition")],S)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(k,e,ea){k.enumeration=function(S,I={}){S=S instanceof e.JSONMap?S:new e.JSONMap(S,I);S={type:I?.ignoreUnknown??
!0?S.apiValues:String,json:{type:S.jsonValues,read:I?.readOnly?!1:{reader:S.read},write:{writer:S.write}}};void 0!==I?.readOnly&&(S.readOnly=!!I.readOnly);void 0!==I?.default&&(S.json.default=I.default);void 0!==I?.name&&(S.json.name=I.name);void 0!==I?.nonNullable&&(S.nonNullable=I.nonNullable);return ea.property(S)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(k,e){function ea(w){var N=
w.definition;const {classificationMethod:f,normalizationType:p,definedInterval:y}=N;N=N.breakCount??1;const O=[];var q=w.values;if(0===q.length)return[];q=q.sort((G,A)=>G-A);var n=q[0],z=q[q.length-1];if("equal-interval"===f)if(q.length>=N){q=(z-n)/N;w=n;for(var U=1;U<N;U++){var H=Number((n+U*q).toFixed(6));O.push({minValue:w,maxValue:H,label:S(w,H,p)});w=H}O.push({minValue:w,maxValue:z,label:S(w,z,p)})}else q.forEach(G=>{O.push({minValue:G,maxValue:G,label:S(G,G,p)})});else if("natural-breaks"===
f){q=I(q);w=ba(q.uniqueValues,w.valueFrequency||q.valueFrequency,N);for(U=1;U<N;U++)q.uniqueValues.length>U&&(H=Number(q.uniqueValues[w[U]].toFixed(6)),O.push({minValue:n,maxValue:H,label:S(n,H,p)}),n=H);O.push({minValue:n,maxValue:z,label:S(n,z,p)})}else if("quantile"===f)if(q.length>=N&&n!==z){w=Math.ceil(q.length/N);U=0;for(H=1;H<N;H++){var E=w+U-1;E>q.length&&(E=q.length-1);0>E&&(E=0);O.push({minValue:n,maxValue:q[E],label:S(n,q[E],p)});n=q[E];U+=w;w=Math.ceil((q.length-U)/(N-H))}O.push({minValue:n,
maxValue:z,label:S(n,z,p)})}else for(N=-1,z=0;z<q.length;z++)n=q[z],n!==N&&(N=n,O.push({minValue:N,maxValue:n,label:S(N,n,p)}),N=n);else if("standard-deviation"===f)if(w=h(q),U=l(q,w),0===U)O.push({minValue:q[0],maxValue:q[0],label:S(q[0],q[0],p)});else{q=K(n,z,N,w,U)*U;U=0;for(H=N;1<=H;H--)E=Number((w-(H-.5)*q).toFixed(6)),O.push({minValue:n,maxValue:E,label:S(n,E,p)}),n=E,U++;H=Number((w+.5*q).toFixed(6));O.push({minValue:n,maxValue:H,label:S(n,H,p)});n=H;U++;for(E=1;E<=N;E++)H=U===2*N?z:Number((w+
(E+.5)*q).toFixed(6)),O.push({minValue:n,maxValue:H,label:S(n,H,p)}),n=H,U++}else if("defined-interval"===f){if(!y)return O;N=q[0];z=q[q.length-1];q=Math.ceil((z-N)/y);n=N;for(w=1;w<q;w++)U=Number((N+w*y).toFixed(6)),O.push({minValue:n,maxValue:U,label:S(n,U,p)}),n=U;O.push({minValue:n,maxValue:z,label:S(n,z,p)})}return O}function S(w,N,f){let p=null;return p=w===N?f&&"percent-of-total"===f?w+"%":w.toString():f&&"percent-of-total"===f?w+"% - "+N+"%":w+" - "+N}function I(w){const N=[],f=[];let p=Number.MIN_VALUE,
y=1,O=-1;for(let q=0;q<w.length;q++){const n=w[q];n===p?(y++,f[O]=y):null!==n&&(N.push(n),p=n,y=1,f.push(y),O++)}return{uniqueValues:N,valueFrequency:f}}function ba(w,N,f){var p=w.length;const y=[];f>p&&(f=p);for(var O=0;O<f;O++)y.push(Math.round(O*p/f-1));y.push(p-1);O=R(y,w,N,f);p=O.mean;O=O.sdcm;var q=f,n=0,z=0;let U=0,H=0,E=!0;for(let A=0;2>A&&E;A++){0===A&&(E=!1);for(var G=0;G<q-1;G++)for(;y[G+1]+1!==y[G+2];)if(y[G+1]+=1,n=r(G,y,w,N),U=n.sbMean,n=n.sbSdcm,z=r(G+1,y,w,N),H=z.sbMean,z=z.sbSdcm,
n+z<O[G]+O[G+1])O[G]=n,O[G+1]=z,p[G]=U,p[G+1]=H,E=!0;else{--y[G+1];break}for(G=q-1;0<G;G--)for(;y[G]!==y[G-1]+1;)if(--y[G],n=r(G-1,y,w,N),U=n.sbMean,n=n.sbSdcm,z=r(G,y,w,N),H=z.sbMean,z=z.sbSdcm,n+z<O[G-1]+O[G])O[G-1]=n,O[G]=z,p[G-1]=U,p[G]=H,E=!0;else{y[G]+=1;break}}E&&(O=R(y,w,N,f));return y}function R(w,N,f,p){let y=[];var O=[],q=[];let n=0;const z=[],U=[];for(var H=0;H<p;H++){var E=r(H,w,N,f);z.push(E.sbMean);U.push(E.sbSdcm);n+=U[H]}E=n;for(H=!0;H||n<E;){H=!1;y=[];for(O=0;O<p;O++)y.push(w[O]);
for(q=0;q<p;q++)for(E=w[q]+1;E<=w[q+1];E++)if(O=N[E],0<q&&E!==w[q+1]&&Math.abs(O-z[q])>Math.abs(O-z[q-1]))w[q]=E;else if(q<p-1&&w[q]!==E-1&&Math.abs(O-z[q])>Math.abs(O-z[q+1])){w[q+1]=E-1;break}E=n;n=0;O=[];q=[];for(let G=0;G<p;G++){O.push(z[G]);q.push(U[G]);const A=r(G,w,N,f);z[G]=A.sbMean;U[G]=A.sbSdcm;n+=U[G]}}if(n>E){for(N=0;N<p;N++)w[N]=y[N],z[N]=O[N],U[N]=q[N];n=E}return{mean:z,sdcm:U}}function K(w,N,f,p,y){w=Math.max(p-w,N-p)/y/f;return 1<=w?1:.5<=w?.5:.25}function h(w){let N=0;for(let f=0;f<
w.length;f++)N+=w[f];return N/=w.length}function l(w,N){let f=0;for(let p=0;p<w.length;p++){const y=w[p];f+=(y-N)*(y-N)}f/=w.length;return Math.sqrt(f)}function r(w,N,f,p){var y=0,O=0;for(var q=N[w]+1;q<=N[w+1];q++){const n=p[q];y+=f[q]*n;O+=n}0>=O&&L.warn("Exception in Natural Breaks calculation");y/=O;O=0;for(q=N[w]+1;q<=N[w+1];q++)O+=p[q]*(f[q]-y)**2;return{sbMean:y,sbSdcm:O}}const L=e.getLogger("esri.rest.support.generateRendererUtils");k.createGenerateRendererClassBreaks=function(w){const {normalizationTotal:N}=
w;return{classBreaks:ea(w),normalizationTotal:N}};k.createGenerateRendererUniqueValues=function(w){w=I(w);const N=[],f=w.uniqueValues.length;for(let p=0;p<f;p++){const y=w.uniqueValues[p];N.push({value:y,count:w.valueFrequency[p],label:y.toString()})}return{uniqueValues:N}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../geometry/SpatialReference".split(" "),
function(k,e,ea,S,I,ba,R){function K(){l||(l=(async()=>{const L=await new Promise((w,N)=>k(["./arcadeUtils"],w,N));return{arcade:L.arcade,arcadeUtils:L,Dictionary:L.Dictionary,Feature:L.arcadeFeature}})());return l}const h=ba.getLogger("esri.support.arcadeOnDemand");let l;S=(L,w,N)=>r.create(L,w,N,null,["$feature","$view"],[]);let r=function(){function L(N,f,p,y,O,q,n){this.services=null;this.script=N;this.evaluate=y;this.fields=Array.isArray(q)?q:q.fields;this._syntaxTree=p;this._arcade=f;this._arcadeFeature=
O;this._spatialReference=n;this._referencesGeometry=f.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}L.create=async function(N,f,p,y,O,q){const {arcade:n,Feature:z,Dictionary:U}=await K(),H=R.fromJSON(f);let E;try{E=n.parseScript(N,q)}catch(ja){return h.error(new I("arcade-bad-expression","Failed to parse arcade script",{script:N,error:ja})),null}O=O.reduce((ja,P)=>({...ja,[P]:null}),{});let G=null;null!=y&&(G=new U(y),G.immutable=
!0,O.$config=null);q=(y=n.scriptUsesGeometryEngine(E))&&n.enableGeometrySupport();const A=n.scriptUsesFeatureSet(E)&&n.enableFeatureSetSupport(),C=(f=n.scriptIsAsync(E))&&n.enableAsyncSupport();O={vars:O,spatialReference:H,useAsync:!!C};await Promise.all([q,A,C]);q=new Set;await n.loadDependentModules(q,E,null,f,y);const J=new U;J.immutable=!1;J.setField("scale",0);const ca=n.compileScript(E,O);return new L(N,n,E,(ja,P)=>{"$view"in ja&&ja.$view&&(J.setField("scale","object"===typeof ja.$view&&"scale"in
ja.$view?ja.$view.scale:void 0),ja.$view=J);G&&(ja.$config=G);return ca({vars:ja,spatialReference:H,services:P})},new z,p,H)};var w=L.prototype;w.repurposeFeature=function(N){N.geometry&&!N.geometry.spatialReference&&(N.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(N.geometry,N.attributes,{fields:this.fields});return this._arcadeFeature};w.referencesGeometry=function(){return this._referencesGeometry};w.referencesScale=function(){return this._referencesScale};
return ea._createClass(L)}();e.ArcadeExpression=r;e.createDictionaryExpression=(L,w,N,f)=>r.create(L,w,N,f,["$feature","$view"],[]);e.createLabelExpression=(L,w,N)=>r.create(L,w,N,null,["$feature"],[]);e.createRendererExpression=S;e.createVVExpression=S;e.loadArcade=K;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(k){k.makeEdgeCandidate=function(e,ea,S,I,ba,R=!1){return{objectId:e,target:ea,distance:S,
type:"edge",start:I,end:ba,draped:R}};k.makeVertexCandidate=function(e,ea,S){return{objectId:e,target:ea,distance:S,type:"vertex"}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(k,e,ea,S,I,ba){function R(B,aa,m){if(B)for(const F of B)(B=(B=S.getDeepValue(F,aa))&&"function"!==typeof B&&m.get(B))&&S.setDeepValue(F,B.name,
aa)}function K(B,aa){if(!B||!aa)return[];ta.clear();h(ta,B,aa);return Array.from(ta).sort()}function h(B,aa,m){if(m)if(aa?.fields?.length)if(m.includes("*"))for(const {name:F}of aa.fields)B.add(F);else for(const F of m)l(B,aa,F);else if(m.includes("*"))B.clear(),B.add("*");else for(const F of m)null!=F&&B.add(F)}function l(B,aa,m){"string"===typeof m&&(aa?(aa=aa.get(m))&&B.add(aa.name):B.add(m))}async function r(B,aa,m){if(m){var {arcadeUtils:F}=await ba.loadArcade();m=F.extractFieldNames(m,aa?.fields?.map(V=>
V.name));for(const V of m)l(B,aa,V)}}async function L(B,aa,m){if(m&&"1\x3d1"!==m){var {WhereClause:F}=await new Promise((V,W)=>k(["../../core/sql/WhereClause"],V,W));F=F.create(m,aa);if(!F.isStandardized)throw new ea("fieldUtils:collectFilterFields","Where clause is not standardized",{where:m});h(B,aa,F.fieldNames)}}function w(B,aa){for(const m of B)if(m&&m.valueType&&m.valueType===aa)return m.name;return null}async function N(B,aa){if(aa){var m=aa.elevationInfo?.featureExpressionInfo;if(m)return m.collectRequiredFields(B,
aa.fieldsIndex)}}async function f(B,aa,m){const F=[];m?.expressionInfos&&F.push(...m.expressionInfos.map(V=>r(B,aa.fieldsIndex,V.expression)));m=m?.content;if(Array.isArray(m))for(const V of m)"expression"===V.type&&V.expressionInfo&&F.push(r(B,aa.fieldsIndex,V.expressionInfo.expression));await Promise.all(F)}async function p(B,aa,m){aa&&m&&(m.valueExpression?await r(B,aa.fieldsIndex,m.valueExpression):m.field&&l(B,aa.fieldsIndex,m.field))}function y(B){if(!B)return[];const aa=B.geometryFieldsInfo;
return aa?K(B.fieldsIndex,[aa.shapeAreaField,aa.shapeLengthField]):[]}function O(B){const aa=new Set;n(B).forEach(m=>aa.add(m));y(B).forEach(m=>aa.add(m.toLowerCase()));if(B=B&&"infoFor3D"in B?B.infoFor3D:void 0)Object.values(B.assetMapFieldRoles).forEach(m=>aa.add(m.toLowerCase())),Object.values(B.transformFieldRoles).forEach(m=>aa.add(m.toLowerCase()));return Array.from(aa)}function q(B){if(!B)return[];B="editFieldsInfo"in B&&B.editFieldsInfo;if(!B)return[];const {creationDateField:aa,creatorField:m,
editDateField:F,editorField:V}=B;return[aa,m,F,V].filter(Boolean)}function n(B){return q(B).map(aa=>aa.toLowerCase())}async function z(B,aa){const {labelingInfo:m,fieldsIndex:F}=aa;m&&m.length&&await Promise.all(m.map(V=>U(B,F,V)))}async function U(B,aa,m){if(m){var F=m.getLabelExpression();m=m.where;"arcade"===F.type?await r(B,aa,F.expression):(F=F.expression.match(/{[^}]*}/g))&&F.forEach(V=>{l(B,aa,V.slice(1,-1))});await L(B,aa,m)}}function H(B){return"number"===typeof B&&!isNaN(B)&&isFinite(B)}
function E(B){return null===B||H(B)}function G(B){return null===B||La(B)}function A(B){return null!=B&&"string"===typeof B}function C(B){return null===B||A(B)}function J(){return!0}function ca(B,aa){let m;switch(B.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":m=B.nullable?G:La;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":m=B.nullable?
E:H;break;case "string":case "esriFieldTypeString":m=B.nullable?C:A;break;default:m=J}return 1===arguments.length?m:m(aa)}function ja(B){return null!=B&&Ta.has(B.type)}function P(B,aa){return null==B||B.nullable&&null===aa?null:ja(B)&&!Q(B.type,Number(aa))?e.NumericRangeValidationError.OUT_OF_RANGE:ca(B,aa)?B.domain?I.validateDomainValue(B.domain,aa):null:e.TypeValidationError.INVALID_TYPE}function Q(B,aa){B="string"===typeof B?v(B):B;if(!B)return!1;const m=B.min,F=B.max;return B.isInteger?La(aa)&&
aa>=m&&aa<=F:aa>=m&&aa<=F}function v(B){switch(B){case "esriFieldTypeSmallInteger":case "small-integer":return ib;case "esriFieldTypeInteger":case "integer":return eb;case "esriFieldTypeBigInteger":case "big-integer":return c;case "esriFieldTypeSingle":case "single":return t;case "esriFieldTypeDouble":case "double":return fa}}function x(B,aa,m){if(!aa||!aa.attributes||!B){if(null!=m)for(var F of B??[])m.add(F);return!0}aa=aa.attributes;F=!1;for(const V of B)if(!(V in aa))if(F=!0,null!=m)m.add(V);
else break;return F}const Z=/^([0-9_])/,ka=/[^a-z0-9_\u0080-\uffff]+/gi,na="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),sa=["field","normalizationField"],ta=new Set,za=["oid","global-id","guid"],Ba=["oid","global-id"],Ca=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,
/objectid/i,/_i$/i],La=(()=>"isInteger"in Number?Number.isInteger:B=>"number"===typeof B&&isFinite(B)&&Math.floor(B)===B)(),Oa=["integer","small-integer","single","double"],Ta=new Set([...Oa,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),Ya=["date","date-only","time-only","timestamp-offset"],fb=new Set([...Ya,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);e.NumericRangeValidationError=void 0;(e.NumericRangeValidationError||
(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";e.TypeValidationError=void 0;(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const ib={min:-32768,max:32767,isInteger:!0},eb={min:-2147483648,max:2147483647,isInteger:!0},c={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},t={min:-3.4E38,max:1.2E38,isInteger:!1},fa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.bigIntegerRange=
c;e.collectArcadeFieldNames=r;e.collectElevationFields=N;e.collectFeatureReductionFields=async function(B,aa,m){if(aa&&m&&"fields"in m){var F=[];F.push(f(B,aa,m.popupTemplate));m.fields&&F.push(...m.fields.map(async V=>{V.onStatisticExpression?r(B,aa.fieldsIndex,V.onStatisticExpression.expression):B.add(V.onStatisticField)}));await Promise.all(F)}};e.collectField=l;e.collectFields=h;e.collectFilterFields=async function(B,aa,m){aa&&(aa.timeInfo&&null!=m&&m.timeExtent&&h(B,aa.fieldsIndex,[aa.timeInfo.startField,
aa.timeInfo.endField]),aa.floorInfo&&h(B,aa.fieldsIndex,[aa.floorInfo.floorField]),null!=m&&null!=m.where&&await L(B,aa.fieldsIndex,m.where))};e.collectLabelingFields=z;e.collectOrderByInfos=async function(B,aa,m){aa&&m&&await Promise.all(m.map(F=>p(B,aa,F)))};e.collectPopupTemplateFields=f;e.dateTypes=Ya;e.doubleRange=fa;e.featureHasFields=function(B,aa){return!x(B,aa,null)};e.fixFields=K;e.fixRendererFields=function(B,aa){if(null!=B&&null!=aa)for(const m of Array.isArray(B)?B:[B])if(R(na,m,aa),
"visualVariables"in m&&m.visualVariables)for(const F of m.visualVariables)R(sa,F,aa)};e.fixTimeInfoFields=function(B,aa){if(null!=B&&aa?.fields?.length)if("startField"in B){var m=aa.get(B.startField);aa=aa.get(B.endField);B.startField=m?.name??null;B.endField=aa?.name??null}else m=aa.get(B.startTimeField),aa=aa.get(B.endTimeField),B.startTimeField=m?.name??null,B.endTimeField=aa?.name??null};e.getDisplayFieldName=function({displayField:B,fields:aa}){if(B)return B;if(!aa||!aa.length)return null;if(!(B=
w(aa,"name-or-title")||w(aa,"unique-identifier")||w(aa,"type-or-category")))a:{for(const m of aa)if(m&&m.name&&(aa=m.name.toLowerCase(),aa.includes("name")||aa.includes("title"))){B=m.name;break a}B=null}return B};e.getEditTrackingFields=q;e.getElevationFields=async function(B){if(!B)return[];const aa=new Set;await N(aa,B);return Array.from(aa).sort()};e.getExpressionFields=async function(B,aa){const m=new Set;for(const F of aa)await r(m,B.fieldsIndex,F);return Array.from(m).sort()};e.getFeatureEditFields=
function(B){return B?K(B.fieldsIndex,q(B)):[]};e.getFeatureGeometryFields=y;e.getFieldDefaultValue=function(B){const aa=B.defaultValue;if(void 0!==aa&&ca(B,aa))return aa;if(B.nullable)return null};e.getFieldRange=function(B){const aa=I.getDomainRange(B.domain);if(aa)return aa;if(ja(B))return v(B.type)};e.getLabelingFields=async function(B){if(!B)return[];const aa=new Set;await z(aa,B);return Array.from(aa).sort()};e.getLowerCaseDefaultHiddenFields=O;e.getLowerCaseEditTrackingFields=n;e.getNumericTypeForValue=
function(B){if(!H(B))return null;if(La(B)){if(B>=ib.min&&B<=ib.max)return"esriFieldTypeSmallInteger";if(B>=eb.min&&B<=eb.max)return"esriFieldTypeInteger"}return B>=t.min&&B<=t.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=async function(B){if(!B)return[];const aa="timeInfo"in B&&B.timeInfo;return aa?K(B.fieldsIndex,[B.trackIdField,aa.startField,aa.endField]):[]};e.integerRange=eb;e.isDateField=function(B){return null!=B&&fb.has(B.type)};e.isFieldEditable=function(B,aa){return B.editable&&
!za.includes(B.type)&&!n(aa).includes(B.name?.toLowerCase()??"")};e.isFieldVisibleByDefault=function(B,aa){const m=B.name?.toLowerCase()??"";return!(null!=aa?.objectIdField&&m===aa.objectIdField.toLowerCase())&&!(null!=aa?.globalIdField&&m===aa.globalIdField.toLowerCase())&&!O(aa).includes(m)&&!Ba.includes(B.type)&&!Ca.some(F=>F.test(m))};e.isNumberInRange=Q;e.isNumericField=ja;e.isRasterPixelValueField=function(B){return B?["raster.itempixelvalue","raster.servicepixelvalue"].some(aa=>B.toLowerCase().startsWith(aa)):
!1};e.isStringField=function(B){return null!=B&&("string"===B.type||"esriFieldTypeString"===B.type)};e.isValidFieldValue=function(B,aa){return null===P(B,aa)};e.isValueMatchingFieldType=ca;e.normalizeFieldName=function(B){return null==B?null:B.trim().replaceAll(ka,"_").replace(Z,"F$1")||null};e.numericTypes=Oa;e.packFields=function(B,aa,m=1){if(!aa||!B)return[];if(aa.includes("*"))return["*"];aa=K(B,aa);return aa.length/B.fields.length>=m?["*"]:aa};e.populateMissingFields=x;e.rendererFields=na;e.sanitizeNullFieldValue=
function(B){return null==B||"number"===typeof B&&isNaN(B)?null:B};e.singleRange=t;e.smallIntegerRange=ib;e.unpackFieldNames=function(B,aa){return null==aa||null==B?[]:aa.includes("*")?(B.fields??[]).map(m=>m.name):aa};e.validateFieldValue=P;e.validationErrorToString=function(B,aa,m){switch(B){case I.DomainValidationError.INVALID_CODED_VALUE:return`Value ${m} is not in the coded domain - field: ${aa.name}, domain: ${JSON.stringify(aa.domain)}`;case I.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${m} is out of the range of valid values - field: ${aa.name}, domain: ${JSON.stringify(aa.domain)}`;
case e.TypeValidationError.INVALID_TYPE:return`Value ${m} is not a valid value for the field type - field: ${aa.name}, type: ${aa.type}, nullable: ${aa.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:const {min:F,max:V}=v(aa.type);return`Value ${m} is out of range for the number type - field: ${aa.name}, type: ${aa.type}, value range is ${F} to ${V}`}};e.visualVariableFields=sa;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(k){k.DomainValidationError=void 0;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(k.DomainValidationError||(k.DomainValidationError={}));k.getDomainRange=function(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}};k.validateDomainValue=function(e,ea){switch(e.type){case "range":const S="range"in e?e.range[0]:e.minValue;e="range"in
e?e.range[1]:e.maxValue;if(null!=S&&+ea<S||null!=e&&+ea>e)return k.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==e.codedValues||e.codedValues.every(I=>null==I||I.code!==ea))return k.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==e.codedValues||e.codedValues.every(I=>null==I||I.code!==ea))return k.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l,r,L){function w(){return new Promise((O,q)=>k(["../../../geometry/geometryEngineJSON"],O,q))}const N={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var f={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},p={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},y={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};e.canQueryWithRBush=
function(O){if(ba.isExtent(O))return!0;if(ba.isPolygon(O)){for(const q of O.rings)if(5!==q.length||q[0][0]!==q[1][0]||q[0][0]!==q[4][0]||q[2][0]!==q[3][0]||q[0][1]!==q[3][1]||q[0][1]!==q[4][1]||q[1][1]!==q[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=async function(O,q,n){const {spatialRel:z,geometry:U}=O;if(U){if(null==z||!0!==f[z])throw new ea("feature-store:unsupported-query","Unsupported query spatial relationship",{query:O});if(R.isValid(U.spatialReference)&&R.isValid(n)){if(null==
U||!0!==p[ba.getJsonType(U)])throw new ea("feature-store:unsupported-query","Unsupported query geometry type",{query:O});if(null==q||!0!==y[q])throw new ea("feature-store:unsupported-query","Unsupported layer geometry type",{query:O});if(O.outSR)return r.checkProjectionSupport(O.geometry&&O.geometry.spatialReference,O.outSR)}}};e.getSpatialQueryOperator=function(O,q,n,z,U){if(ba.isPolygon(q)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===O||"esriSpatialRelContains"===O)){const H=h.convertFromPolygon(new l,
q,!1,!1);return Promise.resolve(E=>K.polygonContainsPoint(H,!1,!1,E))}if(ba.isPolygon(q)&&"esriGeometryMultipoint"===n){const H=h.convertFromPolygon(new l,q,!1,!1);if("esriSpatialRelContains"===O)return Promise.resolve(E=>K.polygonContainsMultipoint(H,!1,!1,E,z,U))}if(ba.isExtent(q)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===O||"esriSpatialRelContains"===O))return Promise.resolve(H=>S.extentContainsPoint(q,L.getGeometry(n,z,U,H)));if(ba.isExtent(q)&&"esriGeometryMultipoint"===n&&"esriSpatialRelContains"===
O)return Promise.resolve(H=>S.extentContainsMultipoint(q,L.getGeometry(n,z,U,H)));if(ba.isExtent(q)&&"esriSpatialRelIntersects"===O){const H=I.getExtentIntersector(n);return Promise.resolve(E=>H(q,L.getGeometry(n,z,U,E)))}return w().then(H=>{const E=H[N[O]].bind(null,q.spatialReference,q);return G=>E(L.getGeometry(n,z,U,G))})};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(k,e){k.extentIntersectsExtent=
e.extentIntersectsExtent;k.extentIntersectsMultipoint=e.extentIntersectsMultipoint;k.extentIntersectsPoint=e.extentIntersectsPoint;k.extentIntersectsPolygon=e.extentIntersectsPolygon;k.extentIntersectsPolyline=e.extentIntersectsPolyline;k.extentIntersectsRings=e.extentIntersectsRings;k.getFeatureExtentIntersector=e.getFeatureExtentIntersector;k.isSelfIntersecting=e.isSelfIntersecting;k.segmentIntersects=e.segmentIntersects;k.getExtentIntersector=function(ea){return"mesh"===ea?e.extentIntersectsExtent:
e.getFeatureExtentIntersector(ea)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(k){function e(ea,S,I,ba,R){if(!ea)return!1;S=S?I?4:3:I?3:2;const {coords:K,lengths:h}=ea;I=!1;ea=0;for(const r of h){var l=ea;for(let L=ea,w=ea+r*S;L<w;L+=S){l=L+S;l===w&&(l=ea);const N=K[L],f=K[L+1],p=K[l];l=K[l+1];(f<R&&l>=R||l<R&&f>=R)&&N+(R-f)/(l-f)*(p-N)<ba&&(I=!I)}ea+=r*S}return I}k.polygonContainsCoords=e;k.polygonContainsMultipoint=
function(ea,S,I,ba,R,K){R=R?K?4:3:K?3:2;const {coords:h,lengths:l}=ba;if(!l)return!1;for(let r=0,L=0;r<l.length;r++,L+=R)if(!e(ea,S,I,h[L],h[L+1]))return!1;return!0};k.polygonContainsPoint=function(ea,S,I,ba){return e(ea,S,I,ba.coords[0],ba.coords[1])};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(k){function e(I,ba,R,K,h){if(null!=K&&null!=h)return l=>{const r=I.getAttribute(l,ba);l=I.getAttribute(l,
R);return(null==r||r<=h)&&(null==l||l>=K)};if(null!=K)return l=>{l=I.getAttribute(l,R);return null==l||l>=K};if(null!=h)return l=>{l=I.getAttribute(l,ba);return null==l||l<=h}}function ea(I,ba,R,K){if(null!=R&&null!=K&&R===K)return h=>I.getAttribute(h,ba)===R;if(null!=R&&null!=K)return h=>{h=I.getAttribute(h,ba);return h>=R&&h<=K};if(null!=R)return h=>I.getAttribute(h,ba)>=R;if(null!=K)return h=>I.getAttribute(h,ba)<=K}function S(){return()=>!1}k.getTimeExtent=async function(I,ba){if(!I)return null;
const R=ba.featureAdapter,{startTimeField:K,endTimeField:h}=I;let l=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;if(K&&h)await ba.forEach(L=>{const w=R.getAttribute(L,K);L=R.getAttribute(L,h);null==w||isNaN(w)||(l=Math.min(l,w));null==L||isNaN(L)||(r=Math.max(r,L))});else{const L=K||h;await ba.forEach(w=>{w=R.getAttribute(w,L);null==w||isNaN(w)||(l=Math.min(l,w),r=Math.max(r,w))})}return{start:l,end:r}};k.getTimeOperator=function(I,ba,R){if(!ba||!I)return null;const {startTimeField:K,endTimeField:h}=
I;if(!K&&!h)return null;const {start:l,end:r}=ba;return null===l&&null===r?null:void 0===l&&void 0===r?S():K&&h?e(R,K,h,l,r):ea(R,K||h,l,r)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(k,e){function ea(I){return"oid"===I.type||"esriFieldTypeOID"===I.type}function S(I){return"global-id"===I.type||"esriFieldTypeGlobalID"===I.type}return function(){function I(R=[]){this.fields=
[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(R){this.fields=R;var K=[];for(const h of R){R=h?.name;const l=e.normalizeFieldName(h?.name)?.toLowerCase()??"";if(R&&l){const r=R.trim().toLowerCase();this._fieldsMap.set(R,h);this._fieldsMap.set(r,h);this._normalizedFieldsMap.set(l,h);K.push(r);"date"===h.type||"esriFieldTypeDate"===h.type||"date-only"===h.type||
"esriFieldTypeDateOnly"===h.type||"timestamp-offset"===h.type||"esriFieldTypeTimestampOffset"===h.type?(this.dateFields.push(h),this._dateFieldsSet.add(h)):e.isNumericField(h)&&(this._numericFieldsSet.add(h),this.numericFields.push(h));ea(h)||S(h)||(h.editable=null==h.editable||!!h.editable,h.nullable=null==h.nullable||!!h.nullable)}}K.sort();this.uid=K.join(",")}}var ba=I.prototype;ba.destroy=function(){this._fieldsMap.clear()};ba.has=function(R){return null!=this.get(R)};ba.get=function(R){if(R){var K=
this._fieldsMap.get(R);if(K)return K;(K=this._fieldsMap.get(R.trim().toLowerCase())??this._normalizedFieldsMap.get(e.normalizeFieldName(R)?.toLowerCase()??""))&&this._fieldsMap.set(R,K);return K}};ba.isDateField=function(R){return this._dateFieldsSet.has(this.get(R))};ba.isNumericField=function(R){return this._numericFieldsSet.has(this.get(R))};ba.normalizeFieldName=function(R){if(R=this.get(R))return R.name??void 0};k._createClass(I,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=
[];for(const R of this.fields)ea(R)||S(R)||R.nullable||void 0!==e.getFieldDefaultValue(R)||this._requiredFields.push(R)}return this._requiredFields}}]);return I}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l,r,L,w,N,f){function p(A){return y.has(A)?y.get(A):"number"===typeof A?A:1}k.Task=void 0;(function(A){A[A.YIELD=1]="YIELD"})(k.Task||(k.Task={}));k.TaskPriority=void 0;(function(A){A.RESOURCE_CONTROLLER_IMMEDIATE="immediate";A.RESOURCE_CONTROLLER="schedule";A.SLIDE="slide";A.STREAM_DATA_LOADER="stream loader";A.ELEVATION_QUERY="elevation query";A.TERRAIN_SURFACE="terrain";A.SURFACE_GEOMETRY_UPDATES="surface geometry updates";A.LOD_RENDERER="LoD renderer";A.GRAPHICS_CORE=
"Graphics3D";A.I3S_CONTROLLER="I3S";A.POINT_CLOUD_LAYER="point cloud";A.FEATURE_TILE_FETCHER="feature fetcher";A.OVERLAY="overlay";A.STAGE="stage";A.GRAPHICS_DECONFLICTOR="graphics deconflictor";A.FILTER_VISIBILITY="Graphics3D filter visibility";A.SCALE_VISIBILITY="Graphics3D scale visibility";A.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";A.POINT_OF_INTEREST_FREQUENT="POI frequent";A.POINT_OF_INTEREST_INFREQUENT="POI infrequent";A.LABELER="labeler";A.FEATURE_QUERY_ENGINE="feature query";A.FEATURE_TILE_TREE=
"feature tile tree";A.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";A.ELEVATION_ALIGNMENT="elevation alignment";A.TEXT_TEXTURE_ATLAS="text texture atlas";A.TEXTURE_UNLOAD="texture unload";A.LINE_OF_SIGHT_TOOL="line of sight tool";A.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";A.ELEVATION_PROFILE="elevation profile";A.SNAPPING="snapping";A.SHADOW_ACCUMULATOR="shadow accumulator";A.CLOUDS_GENERATOR="clouds generator";A[A.NONE=0]="NONE";A[A.TEST_PRIO=1]="TEST_PRIO"})(k.TaskPriority||
(k.TaskPriority={}));const y=new Map([[k.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[k.TaskPriority.RESOURCE_CONTROLLER,4],[k.TaskPriority.SLIDE,0],[k.TaskPriority.STREAM_DATA_LOADER,0],[k.TaskPriority.ELEVATION_QUERY,0],[k.TaskPriority.TERRAIN_SURFACE,1],[k.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[k.TaskPriority.LOD_RENDERER,2],[k.TaskPriority.GRAPHICS_CORE,2],[k.TaskPriority.I3S_CONTROLLER,2],[k.TaskPriority.POINT_CLOUD_LAYER,2],[k.TaskPriority.FEATURE_TILE_FETCHER,2],[k.TaskPriority.OVERLAY,
4],[k.TaskPriority.STAGE,4],[k.TaskPriority.GRAPHICS_DECONFLICTOR,4],[k.TaskPriority.FILTER_VISIBILITY,4],[k.TaskPriority.SCALE_VISIBILITY,4],[k.TaskPriority.FRUSTUM_VISIBILITY,4],[k.TaskPriority.CLOUDS_GENERATOR,4],[k.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[k.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[k.TaskPriority.LABELER,8],[k.TaskPriority.FEATURE_QUERY_ENGINE,8],[k.TaskPriority.FEATURE_TILE_TREE,16],[k.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[k.TaskPriority.ELEVATION_ALIGNMENT,12],[k.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[k.TaskPriority.TEXTURE_UNLOAD,12],[k.TaskPriority.LINE_OF_SIGHT_TOOL,16],[k.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[k.TaskPriority.SNAPPING,0],[k.TaskPriority.SHADOW_ACCUMULATOR,30]]),O=L.Milliseconds(6.5),q=L.Milliseconds(1),n=L.Milliseconds(30),z=L.Milliseconds(1E3/30),U=L.Milliseconds(100);var H;(function(A){let C=function(){function ja(){this._updating=r.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new R("total"),tasks:new Map};this._frameTaskTimes=
new Map;this._budget=new ca;this._state=f.RenderState.INTERACTING;this._tasks=new K;this._runQueue=new K;this._load=0;this._idleStateCallbacks=new K;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=l.watch(()=>N.SCHEDULER_LOG_SLOW_TASKS,v=>this._debug=v,l.initial);for(const v of Object.keys(k.TaskPriority))this.performanceInfo.tasks.set(k.TaskPriority[v],new R(k.TaskPriority[v]));const Q=this;this._test={FRAME_SAFETY_BUDGET:O,INTERACTING_BUDGET:z,IDLE_BUDGET:U,get availableBudget(){return Q._budget.budget},
usedBudget:0,getBudget:()=>Q._budget,setBudget:v=>Q._budget=v,updateTask:v=>this._updateTask(v),getState:v=>this._getState(v),getRuntime:v=>this._getRuntime(v),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var P=ja.prototype;P._updatingChanged=function(){this._updating.value=this._tasks.some(Q=>Q.needsUpdate)};P.destroy=function(){this._tasks.toArray().forEach(Q=>Q.remove());this._tasks.clear();ba.removeMaybe(this._debugHandle);this._microTaskQueued=
!1;this._updatingChanged()};P.taskRunningChanged=function(Q){this._updatingChanged();Q&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};P.registerTask=function(Q,v){const x=p(Q);v=new J(this,Q,v,x);this._tasks.push(v);this._updatingChanged();this.performanceInfo.tasks.has(Q)||this.performanceInfo.tasks.set(Q,new R(Q));return v};P.registerIdleStateCallbacks=
function(Q,v){const x={idleBegin:Q,idleEnd:v};this._idleStateCallbacks.push(x);this.state===f.RenderState.IDLE&&this._idleUpdatesStartFired&&x.idleBegin();const Z=this;return{remove:()=>this._removeIdleStateCallbacks(x),set idleBegin(ka){Z._idleUpdatesStartFired&&(x.idleEnd(),Z._state===f.RenderState.IDLE&&ka());x.idleBegin=ka},set idleEnd(ka){x.idleEnd=ka}}};P.updateBudget=function(Q){this._test.usedBudget=0;++this._frameNumber;let v=O,x=Q.frameDuration,Z=q;switch(this.state){case f.RenderState.IDLE:v=
L.Milliseconds(0);x=L.Milliseconds(Math.max(U,Q.frameDuration));Z=n;break;case f.RenderState.INTERACTING:x=L.Milliseconds(Math.max(z,Q.frameDuration))}x=L.Milliseconds(x-Q.elapsedFrameTime-v);if(this.state!==f.RenderState.IDLE&&x<q&&!this._forceTask)return this._forceTask=!0,!1;x=L.Milliseconds(Math.max(x,Z));this._budget.reset(x,this.state);this._updateLoad();return this._schedule()};P.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case f.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(Q=>Q.idleBegin()));this._runIdle();break;case f.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};P.stopFrame=function(){this._budget.reset(L.Milliseconds(0),this._state);this._budget.madeProgress()};P._removeIdleStateCallbacks=function(Q){this._idleUpdatesStartFired&&Q.idleEnd();this._idleStateCallbacks.removeUnordered(Q)};P.removeTask=function(Q){this._tasks.removeUnordered(Q);
this._runQueue.removeUnordered(Q);this._updatingChanged()};P._updateTask=function(Q){this._tasks.forAll(v=>{v.name===Q&&v.setPriority(Q)})};P._getState=function(Q){if(this._runQueue.some(x=>x.name===Q))return k.TaskState.SCHEDULED;let v=k.TaskState.IDLE;this._tasks.forAll(x=>{x.name===Q&&x.needsUpdate&&(1>=x.schedulePriority?v=k.TaskState.READY:v!==k.TaskState.READY&&(v=k.TaskState.WAITING))});return v};P._getRuntime=function(Q){let v=0;this._tasks.forAll(x=>{x.name===Q&&(v+=x.runtime)});return v};
P._resetRuntimes=function(){this._tasks.forAll(Q=>Q.runtime=0)};P._getRunning=function(){const Q=new Map;this._tasks.forAll(x=>{x.needsUpdate&&Q.set(x.name,(Q.get(x.name)||0)+1)});if(0===Q.size)return null;let v="";Q.forEach((x,Z)=>{v=1<x?v+` ${x}x ${Z}`:v+` ${Z}`});return v};P._runIdle=function(){this._run()};P._runInteracting=function(){this._run()};P._runAnimating=function(){this._run()};P._updateLoad=function(){const Q=this._tasks.reduce((v,x)=>x.needsUpdate?++v:v,0);this._load=.9*this._load+
Q*(1-.9)};P._schedule=function(){this._runQueue.filterInPlace(Q=>{if(Q.needsUpdate)return!0;Q.schedulePriority=Q.basePriority;return!1});for(this._tasks.forAll(Q=>{0===Q.basePriority&&Q.needsUpdate&&!this._runQueue.includes(Q)&&Q.blockFrame!==this._frameNumber&&this._runQueue.unshift(Q)});0===this._runQueue.length;){let Q=!1;this._tasks.forAll(v=>{if(v.needsUpdate&&0!==v.schedulePriority&&0!==v.basePriority&&v.blockFrame!==this._frameNumber)switch(Q=!0,v.schedulePriority){case 1:v.schedulePriority=
0;this._runQueue.push(v);break;default:--v.schedulePriority}});if(!Q)return this._updatingChanged(),!1}this._updatingChanged();return!0};P._run=function(){const Q=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var v=this._budget.now();const x=this._runQueue.pop();this._budget.resetProgress();try{x.task.runTask(this._budget)===k.Task.YIELD&&(x.blockFrame=this._frameNumber)}catch(Z){I.getLogger("esri.views.support.Scheduler").error(`Exception in task "${x.name}"`,Z)}!this._budget.hasProgressed&&
x.blockFrame!==this._frameNumber&&x.needsUpdate&&(x.blockFrame=this._frameNumber);x.schedulePriority=x.basePriority;v=this._budget.now()-v;x.runtime+=v;this._frameTaskTimes.set(x.priority,this._frameTaskTimes.get(x.priority)+v);this._debug&&v>2*this._budget.budget&&console.log("Task",x.name,"used",v,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-Q);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
Q)};P._startFrameTaskTimes=function(){for(const Q of Object.keys(k.TaskPriority))this._frameTaskTimes.set(k.TaskPriority[Q],0)};P._recordFrameTaskTimes=function(Q){this._frameTaskTimes.forEach((v,x)=>this.performanceInfo.tasks.get(x).record(v));this.performanceInfo.total.record(Q)};e._createClass(ja,[{key:"updating",get:function(){return this._updating.value}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(Q){this._state!==Q&&(this._state=
Q,this.state!==f.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(v=>v.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ja}();A.Scheduler=C;let J=function(){function ja(Q,v,x,Z){this._scheduler=Q;this.name=v;this._basePriority=Z;this.runtime=this.blockFrame=0;this._queue=new w.PromiseQueue;this._handles=new ea;this.schedulePriority=this._basePriority;this._task=r.signal(null!=x?x:this._queue);this._handles.add(l.when(()=>
this.task.running,ka=>Q.taskRunningChanged(ka)))}var P=ja.prototype;P.remove=function(){this.processQueue(E);this._scheduler.removeTask(this);this.schedule=G.schedule;this.reschedule=G.reschedule;this._handles.destroy()};P.setPriority=function(Q){this.name=Q;Q=p(Q);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=Q;this._basePriority=Q};P.schedule=function(Q,v,x){return this._queue.push(Q,v,x)};P.reschedule=function(Q,v,x){return this._queue.unshift(Q,v,x)};P.processQueue=
function(Q){this._queue.runTask(Q)};e._createClass(ja,[{key:"task",get:function(){return this._task.value}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(Q){this.setPriority(Q)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ja}(),ca=function(){function ja(){this._begin="undefined"!==typeof performance?performance.now():0;
this._budget=0;this._state=f.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var P=ja.prototype;P.run=function(Q){if(this.done)return!1;!0===Q()&&this.madeProgress();return!0};P.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};P.reset=function(Q,v){this._begin=this.now();this._budget=Q;this._state=v;this.resetProgress()};P.now=function(){return performance.now()};P.resetProgress=function(){this._done=this._progressed=!1};e._createClass(ja,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(Q){this._enabled=Q}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return ja}();A.Budget=ca})(H||(H={}));k.TaskState=void 0;
(function(A){A.SCHEDULED="s";A.READY="r";A.WAITING="w";A.IDLE="i"})(k.TaskState||(k.TaskState={}));const E=(()=>{const A=new H.Budget;A.enabled=!1;return A})(),G=new (function(){function A(){}var C=A.prototype;C.remove=function(){};C.processQueue=function(){};C.schedule=function(J,ca,ja){try{if(h.isAborted(ca)){const P=h.createAbortError();return ja?Promise.resolve(ja(P)):Promise.reject(P)}return h.when(J(E))}catch(P){return Promise.reject(P)}};C.reschedule=function(J,ca,ja){return this.schedule(J,
ca,ja)};return e._createClass(A)}());k.ImmediateTask=G;k.getTaskPriority=p;k.newScheduler=function(){return new H.Scheduler};k.noBudget=E;k.taskPriorities=y;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(k,e,ea,S,I,ba,R){function K(w,N,f={}){return h(w,N,f,r)}function h(w,N,f={},p){let y=null;const O=f.once?
(q,n)=>{p(q)&&(S.removeMaybe(y),N(q,n))}:(q,n)=>{p(q)&&N(q,n)};y=ba.watchTracked(w,O,f.sync,f.equals);f.initial&&(w=w(),O(w,w));return y}function l(w,N,f){if(I.isAborted(f))return Promise.reject(I.createAbortError());const p=w();if(N?.(p))return Promise.resolve(p);let y=null;return new Promise((O,q)=>{y=ea.handlesGroup([I.onAbort(f,()=>{y=S.removeMaybe(y);q(I.createAbortError())}),h(w,n=>{y=S.removeMaybe(y);O(n)},{sync:!1,once:!0},N??r)])})}function r(w){return!0}function L(w){return!!w}k.autorun=
R.autorun;k.initial={initial:!0};k.on=function(w,N,f,p={}){function y(){q&&n&&(n.remove(),p.onListenerRemove?.(q),n=q=null)}function O(H){p.once&&p.once&&S.removeMaybe(z);f(H)}let q=null,n=null,z=null;const U=K(w,(H,E)=>{y();e.isEventTarget(H)&&(q=H,n=e.on(H,N,O),p.onListenerAdd?.(H))},{sync:p.sync,initial:!0});return z=ea.makeHandle(()=>{U.remove();y()})};k.once=function(w,N){return l(w,null,N)};k.pausable=function(w,N,f={}){let p=!1;const y=K(w,(O,q)=>{p||N(O,q)},f);return{remove(){y.remove()},
pause(){p=!0},resume(){p=!1}}};k.sync={sync:!0};k.syncAndInitial={sync:!0,initial:!0};k.watch=K;k.when=function(w,N,f={}){return h(w,N,f,L)};k.whenOnce=function(w,N){return l(w,L,N)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(k,e,ea,S,I){let ba=function(){function R(K,h){this._observable=new I.SimpleObservable;
this._value=K;this._equalityFunction=h}R.prototype.mutate=function(K){K(this._value);this._observable.notify()};e._createClass(R,[{key:"value",get:function(){S.trackAccess(this._observable);return this._value},set:function(K){this._equalityFunction(K,this._value)||(this._value=K,this._observable.notify())}}]);return R}();k.signal=function(R,K=ea.equalsShallow){return new ba(R,K)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/signal"],function(k,e,ea,S){let I=function(){function R(){this._tasks=[];this._running=S.signal(!1)}var K=R.prototype;K.destroy=function(){this.cancelAll()};K.runTask=function(h){for(;!h.done&&this._process(h);)h.madeProgress()};K.push=function(h,l,r){this._running.value=!0;return new Promise((L,w)=>this._tasks.push(new ba(L,w,h,l,r)))};K.unshift=function(h,l,r){this._running.value=!0;return new Promise((L,w)=>this._tasks.unshift(new ba(L,
w,h,l,r)))};K._process=function(h){if(0===this._tasks.length)return!1;const l=this._tasks.shift();try{const r=ea.isAborted(l.signal);if(r&&!l.abortCallback)l.reject(ea.createAbortError());else{const L=r?l.abortCallback?.(ea.createAbortError()):l.callback(h);ea.isPromiseLike(L)?L.then(l.resolve,l.reject):l.resolve(L)}}catch(r){l.reject(r)}this._running.value=0<this._tasks.length;return!0};K.cancelAll=function(){const h=ea.createAbortError();for(const l of this._tasks)if(l.abortCallback){const r=l.abortCallback(h);
l.resolve(r)}else l.reject(h);this._tasks.length=0;this._running.value=!1};e._createClass(R,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.value}}]);return R}(),ba=e._createClass(function(R,K,h,l,r){this.resolve=R;this.reject=K;this.callback=h;this.signal=l;this.abortCallback=r});k.PromiseQueue=I;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,ea,S,I,ba,R,K){ea=function(h){function l(){var r=h.apply(this,arguments)||this;r.SCHEDULER_LOG_SLOW_TASKS=!1;r.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return r}k._inherits(l,h);return k._createClass(l)}(ea);e.__decorate([S.property()],ea.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);e.__decorate([S.property()],ea.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ea=e.__decorate([K.subclass("esri.views.support.DebugFlags")],ea);return new ea})},"esri/views/support/RenderState":function(){define(["exports"],
function(k){k.RenderState=void 0;var e=k.RenderState||(k.RenderState={});e[e.ANIMATING=0]="ANIMATING";e[e.INTERACTING=1]="INTERACTING";e[e.IDLE=2]="IDLE";Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(k,e,ea,S,I){function*ba(q){switch(q.type){case "Feature":yield q;break;case "FeatureCollection":for(const n of q.features)n&&
(yield n)}}function*R(q){if(q)switch(q.type){case "Point":yield q.coordinates;break;case "LineString":case "MultiPoint":yield*q.coordinates;break;case "MultiLineString":case "Polygon":for(const n of q.coordinates)yield*n;break;case "MultiPolygon":for(const n of q.coordinates)for(const z of n)yield*z}}function*K(q,n={}){const {geometryType:z,objectIdField:U}=n;for(const H of q){const {geometry:E,properties:G,id:A}=H;if(E&&O[E.type]!==z)continue;q=G||{};let C=void 0;U&&(C=q[U],null==A||C||(q[U]=C=A));
yield new ea.OptimizedFeature(E?L(new S,E,n):null,q,null,C??void 0)}}function h(q){for(const n of q)if(2<n.length)return!0;return!1}function l(q){let n=0;for(let z=0;z<q.length;z++){const U=q[z],H=q[(z+1)%q.length];n+=U[0]*H[1]-H[0]*U[1]}return 0>=n}function r(q){const n=q[0],z=q[q.length-1];n[0]===z[0]&&n[1]===z[1]&&n[2]===z[2]||q.push(n);return q}function L(q,n,z){switch(n.type){case "LineString":return f(q,n.coordinates,z),q;case "MultiLineString":for(const H of n.coordinates)f(q,H,z);return q;
case "MultiPoint":return f(q,n.coordinates,z),q;case "MultiPolygon":for(var U of n.coordinates)for(w(q,U[0],z),n=1;n<U.length;n++)N(q,U[n],z);return q;case "Point":return y(q,n.coordinates,z),q;case "Polygon":U=n.coordinates;w(q,U[0],z);for(n=1;n<U.length;n++)N(q,U[n],z);return q}}function w(q,n,z){n=r(n);l(n)?f(q,n,z):p(q,n,z)}function N(q,n,z){n=r(n);l(n)?p(q,n,z):f(q,n,z)}function f(q,n,z){for(const U of n)y(q,U,z);q.lengths.push(n.length)}function p(q,n,z){for(let U=n.length-1;0<=U;U--)y(q,n[U],
z);q.lengths.push(n.length)}function y(q,n,z){const [U,H,E]=n;q.coords.push(U,H);z.hasZ&&q.coords.push(E||0)}const O={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};k.createOptimizedFeatures=function(q,n){return Array.from(K(ba(q),n))};k.getGeometryType=function(q){return O[q]};k.inferLayerProperties=function(q,n={}){const z=[];var U=new Set;const H=
new Set;var E=!1;let G=null,A=!1,C=void 0;({geometryType:n=null}=n);var J=!1;for(const ca of ba(q)){const {geometry:ja,properties:P,id:Q}=ca;if(ja&&(n||(n=O[ja.type]),O[ja.type]!==n))continue;E||(E=R(ja),E=h(E));!A&&(A=null!=Q)&&(C=typeof Q,P&&(G=Object.keys(P).filter(v=>P[v]===Q)));P&&G&&A&&null!=Q&&(1<G.length?G=G.filter(v=>P[v]===Q):1===G.length&&(G=P[G[0]]===Q?G:[]));if(!J&&P){q=!0;for(const v in P){if(U.has(v))continue;J=P[v];if(null==J){q=!1;H.add(v);continue}a:switch(typeof J){case "string":J=
"esriFieldTypeString";break a;case "number":J="esriFieldTypeDouble";break a;default:J="unknown"}if("unknown"===J){H.add(v);continue}H.delete(v);U.add(v);const x=I.normalizeFieldName(v);x&&z.push({name:x,alias:v,type:J})}J=q}}if(U=I.normalizeFieldName(1===G?.length&&G[0]||null)??void 0)for(const ca of z)if(ca.name===U&&I.isNumericField(ca)){ca.type="esriFieldTypeOID";break}return{fields:z,geometryType:n,hasZ:E,objectIdFieldName:U,objectIdFieldType:C,unknownFields:Array.from(H)}};k.validateGeoJSON=
function(q){if(!q)throw new e("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==q.type&&"FeatureCollection"!==q.type)throw new e("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:q});({crs:q}=q);if(q){var n="string"===typeof q?q:"name"===q.type?q.properties.name:"EPSG"===q.type?q.properties.code:null,z=RegExp(".*(CRS84H?|4326)$","i");if(!n||!z.test(n))throw new e("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:q});}};
Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(k,e,ea,S,I){function ba(w){return new h(w)}async function R(){null==L&&(L=await new Promise((w,N)=>k(["../../../../geometry/geometryEngineJSON"],w,N)));return L}let K=ea._createClass(function(){this.description=
this.code=null}),h=ea._createClass(function(w){this.error=new K;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=w}),l=ea._createClass(function(w){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=w});const r=new Set;let L;e.createFeatureEditErrorResult=ba;e.createFeatureEditSuccessResult=function(w){return new l(w)};e.loadGeometryEngineForSimplify=async function(w,N){!S.isValid(w)||"esriGeometryPolygon"!==N&&"esriGeometryPolyline"!==N||await R()};
e.mixAttributes=function(w,N,f,p=!1,y){r.clear();for(const z in f){const U=w.get(z);if(!U)continue;var O=f[z],q=U,n=O;let H=n;"string"===typeof n&&I.isNumericField(q)?H=parseFloat(n):null!=n&&I.isStringField(q)&&"string"!==typeof n&&(H=String(n));q=I.sanitizeNullFieldValue(H);q!==O&&y&&y.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:U,originalValue:O,sanitizedValue:q}});r.add(U.name);if(U&&(p||U.editable)){if(O=I.validateFieldValue(U,
q))return ba(I.validationErrorToString(O,U,q));N[U.name]=q}}for(const z of w?.requiredFields??[])if(!r.has(z.name))return ba(`missing required field "${z.name}"`);return null};e.simplify=function(w,N){if(!w||!S.isValid(N))return w;if("rings"in w||"paths"in w){if(null==L)throw new TypeError("geometry engine not loaded");return L.simplify(N,w)}return w};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/wfsUtils":function(){define("exports ../../geometry ../../request ../../core/Error ../../core/iteratorUtils ../../core/promiseUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./dateUtils ./xmlUtils ../support/Field ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l,r,L,w,N,f,p){function y(na){na=P(na);v(na);x(na);na=na.firstElementChild;const sa=I.cache(q(na));return{operations:O(na),get featureTypes(){return Array.from(sa())},readFeatureTypes:sa}}function O(na){let sa=!1;const ta={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};w.visitXML(na,{OperationsMetadata:{Operation:za=>{switch(za.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:Ba=>{ta.GetCapabilities.url=
Ba.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:Ba=>{ta.DescribeFeatureType.url=Ba.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:Ba=>{ta.GetFeature.url=Ba.getAttribute("xlink:href")}}},Parameter:Ba=>{if("outputFormat"===Ba.getAttribute("name"))return{AllowedValues:{Value:Ca=>{(Ca=Ca.textContent)&&Z.has(Ca.toLowerCase())&&(ta.GetFeature.outputFormat=Ca)}}}}}}},Constraint:za=>{switch(za.getAttribute("name")){case "KVPEncoding":return{DefaultValue:Ba=>
{sa="true"===Ba.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:Ba=>{ta.GetFeature.supportsPagination="true"===Ba.textContent.toLowerCase()}}}}}});if(!sa)throw new S("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(null==ta.GetFeature.outputFormat)throw new S("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return ta}function q(na){return w.iterateXML(na,{FeatureTypeList:{FeatureType:sa=>
{const ta={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},za=new Set([4326]),Ba=Ca=>{Ca=parseInt(Ca.textContent?.match(/(?<wkid>\d+$)/i)?.groups?.wkid??"",10);Number.isNaN(Ca)||za.add(Ca)};w.visitXML(sa,{Name:Ca=>{const {name:La,prefix:Oa}=Q(Ca.textContent);ta.typeName=`${Oa}:${La}`;ta.name=La;ta.namespacePrefix=Oa;ta.namespaceUri=Ca.lookupNamespaceURI(Oa)},Abstract:Ca=>{ta.description=Ca.textContent},Title:Ca=>
{ta.title=Ca.textContent},WGS84BoundingBox:Ca=>{ta.extent=n(Ca)},DefaultSRS:Ba,DefaultCRS:Ba,OtherSRS:Ba,OtherCRS:Ba});ta.title||(ta.title=ta.name);ta.supportedSpatialReferences.push(...za);return ta}}})}function n(na){let sa,ta,za,Ba;for(const Ca of na.children)switch(Ca.localName){case "LowerCorner":[sa,ta]=Ca.textContent.split(" ").map(La=>Number.parseFloat(La));break;case "UpperCorner":[za,Ba]=Ca.textContent.split(" ").map(La=>Number.parseFloat(La))}return{xmin:sa,ymin:ta,xmax:za,ymax:Ba,spatialReference:h.WGS84}}
function z(na,sa,ta){return I.find(na,za=>ta?za.name===sa&&za.namespaceUri===ta:za.typeName===sa||za.name===sa)}async function U(na,sa,ta,za={}){const {spatialReference:Ba=f.WGS84}=za;na=na.readFeatureTypes();ta=sa?z(na,sa,ta):na.next().value;if(null==ta){if(sa)throw new S("wfs-layer:feature-type-not-found",`The type '${sa}' could not be found in the service`);throw new S("wfs-layer:empty-service","The service is empty");}sa=new p({...ta.extent,spatialReference:Ba});if(!h.equals(Ba,h.WGS84))try{await K.initializeProjection(h.WGS84,
Ba,void 0,za),sa=K.project(sa,h.WGS84)}catch{throw new S("wfs-layer:unsupported-spatial-reference","Projection not supported");}return{extent:sa,spatialReference:Ba,featureType:ta}}async function H(na,sa,ta={}){const [za,Ba]=await ba.eachAlways([A(na.operations.DescribeFeatureType.url,sa,ta),G(na,sa,ta)]);if(za.error||Ba.error)throw new S("wfs-layer:getWFSLayerTypeInfo-error",`An error occurred while getting info about the feature type '${sa}'`,{error:za.error||Ba.error});const {fields:Ca,errors:La}=
za.value??{};na=za.value?.geometryType||Ba.value?.geometryType;ta=Ba.value?.swapXY??!1;if(null==na)throw new S("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${sa}`,{typeName:sa,geometryType:na,fields:Ca,errors:La});return{...E(Ca??[]),geometryType:na,swapXY:ta}}function E(na){const sa=na.find(za=>"geometry"===za.type);let ta=na.find(za=>"oid"===za.type);na=na.filter(za=>"geometry"!==za.type);ta||(ta=new N({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),
na.unshift(ta));return{geometryField:sa?.name??null,objectIdField:ta.name,fields:na}}async function G(na,sa,ta={}){let za,Ba=!1;const [Ca,La]=await Promise.all([ca(na.operations.GetFeature.url,sa,na.operations.GetFeature.outputFormat,{...ta,count:1}),ea(na.operations.GetFeature.url,{responseType:"text",query:ja(sa,void 0,{...ta,count:1}),signal:ta?.signal})]);if(na="FeatureCollection"===Ca.type&&Ca.features[0]?.geometry){za=l.featureGeometryTypeKebabDictionary.fromJSON(r.getGeometryType(na.type));
switch(na.type){case "Point":var Oa=na.coordinates;break;case "LineString":case "MultiPoint":Oa=na.coordinates[0];break;case "MultiLineString":case "Polygon":Oa=na.coordinates[0][0];break;case "MultiPolygon":Oa=na.coordinates[0][0][0]}if(sa=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(La.data))na=Oa[0].toFixed(3),Oa=Oa[1].toFixed(3),ta=parseFloat(sa[1]).toFixed(3),sa=parseFloat(sa[2]).toFixed(3),na===sa&&Oa===ta&&(Ba=!0)}return{geometryType:za,swapXY:Ba}}async function A(na,sa,ta){na=
await ea(na,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",TYPENAME:sa,...ta?.customParameters},signal:ta?.signal});return C(sa,na.data)}function C(na,sa){const {name:ta}=Q(na);sa=P(sa);x(sa);const za=I.find(w.iterateXML(sa.firstElementChild,{element:Ba=>({name:Ba.getAttribute("name"),typeName:Q(Ba.getAttribute("type")).name})}),({name:Ba})=>Ba===ta);if(null!=za){const Ba=I.find(w.iterateXML(sa.firstElementChild,{complexType:Ca=>Ca}),Ca=>Ca.getAttribute("name")===
za.typeName);if(null!=Ba)return J(Ba)}throw new S("wfs-layer:feature-type-not-found",`Type '${na}' not found in document`,{document:(new XMLSerializer).serializeToString(sa)});}function J(na){const sa=[],ta=[];let za=void 0;var Ba=w.iterateXML(na,{complexContent:{extension:{sequence:{element:Ca=>Ca}}}});for(const Ca of Ba){Ba=Ca.getAttribute("name");if(!Ba)continue;let La,Oa;Ca.hasAttribute("type")?La=Q(Ca.getAttribute("type")).name:w.visitXML(Ca,{simpleType:{restriction:fb=>{La=Q(fb.getAttribute("base")).name;
return{maxLength:ib=>{Oa=+ib.getAttribute("value")}}}}});if(!La)continue;const Ta="true"===Ca.getAttribute("nillable");let Ya=!1;switch(La.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":ta.push(new N({name:Ba,alias:Ba,type:"integer",nullable:Ta}));break;case "float":case "double":case "decimal":ta.push(new N({name:Ba,
alias:Ba,type:"double",nullable:Ta}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":ta.push(new N({name:Ba,alias:Ba,type:"string",nullable:Ta,length:Oa??255}));break;case "datetime":case "date":ta.push(new N({name:Ba,
alias:Ba,type:"date",nullable:Ta,length:Oa??36}));break;case "pointpropertytype":za="point";Ya=!0;break;case "multipointpropertytype":za="multipoint";Ya=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":za="polyline";Ya=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":za="polygon";Ya=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":Ya=!0;sa.push(new S("wfs-layer:unknown-geometry-type",
`geometry type '${La}' is not supported`,{type:(new XMLSerializer).serializeToString(na)}));break;default:sa.push(new S("wfs-layer:unknown-field-type",`Unknown field type '${La}'`,{type:(new XMLSerializer).serializeToString(na)}))}Ya&&ta.push(new N({name:Ba,alias:Ba,type:"geometry",nullable:Ta}))}for(const Ca of ta)if("integer"===Ca.type&&!Ca.nullable&&ka.has(Ca.name.toLowerCase())){Ca.type="oid";break}return{geometryType:za,fields:ta,errors:sa}}async function ca(na,sa,ta,za){({data:na}=await ea(na,
{responseType:"text",query:ja(sa,ta,za),signal:za?.signal}));na=na.replaceAll(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{if(za?.dateFields?.length){const Ba=new Set(za.dateFields);return JSON.parse(na,(Ca,La)=>Ba.has(Ca)?L.parseDate(La):La)}return JSON.parse(na)}catch(Ba){throw new S("wfs-layer:malformed-json","Error while parsing the\u00a0response",{response:na,error:Ba});}}function ja(na,sa,ta){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:na,OUTPUTFORMAT:sa,SRSNAME:"EPSG:4326",
STARTINDEX:ta?.startIndex,COUNT:ta?.count,...ta?.customParameters}}function P(na){return(new DOMParser).parseFromString(na.trim(),"text/xml")}function Q(na){const [sa,ta]=na.split(":");return{prefix:ta?sa:"",name:ta??sa}}function v(na){if((na=na.firstElementChild?.getAttribute("version"))&&"2.0.0"!==na)throw new S("wfs-layer:unsupported-wfs-version",`Unsupported WFS version ${na}. Supported version: ${"2.0.0"}`);}function x(na){let sa="",ta="";w.visitXML(na.firstElementChild,{Exception:za=>{sa=za.getAttribute("exceptionCode");
return{ExceptionText:Ba=>{ta=Ba.textContent}}}});if(sa)throw new S(`wfs-layer:${sa}`,ta);}const Z=new Set(["json","application/json","geojson","application/json; subtype\x3dgeojson"]),ka=new Set(["objectid","fid"]);k.WFS_OID_FIELD_NAME="__esri_wfs_id__";k.describeFeatureType=A;k.findFeatureType=z;k.getCapabilities=async function(na,sa){sa=await ea(na,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...sa?.customParameters},signal:sa?.signal});sa=y(sa.data);R.isHTTPSProtocol(na)&&
(R.hasSameOrigin(na,sa.operations.DescribeFeatureType.url,!0)&&(sa.operations.DescribeFeatureType.url=R.toHTTPS(sa.operations.DescribeFeatureType.url)),R.hasSameOrigin(na,sa.operations.GetFeature.url,!0)&&(sa.operations.GetFeature.url=R.toHTTPS(sa.operations.GetFeature.url)));return sa};k.getFeature=ca;k.getFeatureCount=async function(na,sa,ta){na=await ea(na,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:sa,RESULTTYPE:"hits",...ta?.customParameters},signal:ta?.signal});
na=P(na.data);x(na);na=Number.parseFloat(na.firstElementChild.getAttribute("numberMatched"));return Number.isNaN(na)?0:na};k.getFeatureTypeInfo=U;k.getWFSLayerInfo=async function(na,sa,ta,za={}){const {featureType:Ba,extent:Ca}=await U(na,sa,ta,za),{fields:La,geometryType:Oa,swapXY:Ta,objectIdField:Ya,geometryField:fb}=await H(na,Ba.typeName,za);return{url:na.operations.GetCapabilities.url,name:Ba.name,namespaceUri:Ba.namespaceUri,fields:La,geometryField:fb,geometryType:Oa,objectIdField:Ya,spatialReference:za.spatialReference??
f.WGS84,extent:Ca,swapXY:Ta,wfsCapabilities:na,customParameters:za.customParameters}};k.parseDescribeFeatureTypeResponse=C;k.parseGetCapabilitiesResponse=y;k.prepareWFSLayerFields=E;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/dateUtils":function(){define(["exports"],function(k){function e(S){S=(new Date(S)).getTime();return Number.isNaN(S)?null:S}const ea=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;
k.parseDate=function(S){var I=ea.exec(S);if(I?.groups){I=I.groups;var ba=+I.year,R=+I.month-1,K=+I.day,h=+(I.hours??0),l=+(I.minutes??0),r=+(I.seconds??0);if(23<h||59<l||59<r)I=null;else{var L=I.ms??"0";L=L?+L.padEnd(3,"0").substring(0,3):0;I=I.isUTC?Date.UTC(ba,R,K,h,l,r,L):I.offsetSign?6E4*("+"===I.offsetSign?-1:1)*(60*+I.offsetHours+ +I.offsetMinutes)+Date.UTC(ba,R,K,h,l,r,L):(new Date(ba,R,K,h,l,r,L)).getTime();I=Number.isNaN(I)?null:I}}else I=null;return I??e(S)};k.parseJSDate=e;Object.defineProperty(k,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(k){function e(S,I){if(S&&I)for(const ba of S.children)ba.localName in I&&(S=I[ba.localName],"function"===typeof S?(S=S(ba))&&e(ba,S):e(ba,S))}function*ea(S,I){for(const ba of S.children)ba.localName in I&&(S=I[ba.localName],"function"===typeof S?yield S(ba):yield*ea(ba,S))}k.iterateXML=ea;k.visitXML=e;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l,r,L,w){var N;const f=new ea.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});ea=N=function(p){function y(q){q=p.call(this,q)||
this;q.alias=null;q.defaultValue=void 0;q.description=null;q.domain=null;q.editable=!0;q.length=-1;q.name=null;q.nullable=!0;q.type=null;q.valueType=null;q.visible=!0;return q}k._inherits(y,p);var O=y.prototype;O.readDescription=function(q,{description:n}){q=null;try{q=n?JSON.parse(n):null}catch(z){}return q?.value??null};O.readValueType=function(q,{description:n}){q=null;try{q=n?JSON.parse(n):null}catch(z){}return q?f.fromJSON(q.fieldValueType):null};O.clone=function(){return new N({alias:this.alias,
defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})};return k._createClass(y)}(S.JSONSupport);e.__decorate([I.property({type:String,json:{write:!0}})],ea.prototype,"alias",void 0);e.__decorate([I.property({type:[String,Number],json:{write:{allowNull:!0}}})],ea.prototype,"defaultValue",void 0);e.__decorate([I.property()],
ea.prototype,"description",void 0);e.__decorate([l.reader("description")],ea.prototype,"readDescription",null);e.__decorate([I.property({types:L.types,json:{read:{reader:L.fromJSON},write:!0}})],ea.prototype,"domain",void 0);e.__decorate([I.property({type:Boolean,json:{write:!0}})],ea.prototype,"editable",void 0);e.__decorate([I.property({type:ba.Integer,json:{write:!0}})],ea.prototype,"length",void 0);e.__decorate([I.property({type:String,json:{write:!0}})],ea.prototype,"name",void 0);e.__decorate([I.property({type:Boolean,
json:{write:!0}})],ea.prototype,"nullable",void 0);e.__decorate([h.enumeration(w.kebabDict)],ea.prototype,"type",void 0);e.__decorate([I.property()],ea.prototype,"valueType",void 0);e.__decorate([l.reader("valueType",["description"])],ea.prototype,"readValueType",null);e.__decorate([I.property({type:Boolean,json:{read:!1}})],ea.prototype,"visible",void 0);return ea=N=e.__decorate([r.subclass("esri.layers.support.Field")],ea)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(k,e,ea,S,I,ba){e={key:"type",base:S,typeMap:{range:ba,"coded-value":ea,inherited:I}};k.CodedValueDomain=ea;k.DomainBase=S;k.InheritedDomain=I;k.RangeDomain=ba;k.fromJSON=function(R){if(!R||!R.type)return null;switch(R.type){case "range":return ba.fromJSON(R);case "codedValue":return ea.fromJSON(R);case "inherited":return I.fromJSON(R)}return null};k.types=e;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(k,e,ea,S,I,ba,R,K,h){var l;I=l=function(r){function L(N){N=r.call(this,N)||this;N.codedValues=null;N.type="coded-value";return N}k._inherits(L,r);var w=L.prototype;w.getName=function(N){let f=null;if(this.codedValues){const p=String(N);this.codedValues.some(y=>{String(y.code)===p&&(f=y.name);return!!f})}return f};w.clone=function(){return new l({codedValues:ea.clone(this.codedValues),name:this.name})};return k._createClass(L)}(h);e.__decorate([S.property({type:[K.CodedValue],json:{write:!0}})],
I.prototype,"codedValues",void 0);e.__decorate([ba.enumeration({codedValue:"coded-value"})],I.prototype,"type",void 0);return I=l=e.__decorate([R.subclass("esri.layers.support.CodedValueDomain")],I)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,ea,S,I,ba,R,K,h){var l;k.CodedValue=l=function(r){function L(w){w=r.call(this,w)||this;w.name=null;w.code=null;return w}e._inherits(L,r);L.prototype.clone=function(){return new l({name:this.name,code:this.code})};return e._createClass(L)}(S.JSONSupport);ea.__decorate([I.property({type:String,json:{write:!0}})],k.CodedValue.prototype,"name",void 0);ea.__decorate([I.property({type:[String,Number],json:{write:!0}})],k.CodedValue.prototype,"code",void 0);k.CodedValue=l=ea.__decorate([h.subclass("esri.layers.support.CodedValue")],
k.CodedValue);Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(k,e,ea,S,I,ba,R,K,h,l){ea=new ea.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});S=function(r){function L(w){w=r.call(this,w)||this;w.name=null;w.type=null;return w}k._inherits(L,r);return k._createClass(L)}(S.JSONSupport);e.__decorate([I.property({type:String,json:{write:!0}})],S.prototype,"name",void 0);e.__decorate([h.enumeration(ea)],S.prototype,"type",void 0);return S=e.__decorate([l.subclass("esri.layers.support.Domain")],S)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(k,e,ea,S,I,ba,R,K,h,l){var r;ea=r=function(L){function w(N){N=L.call(this,N)||this;N.type="inherited";return N}k._inherits(w,L);w.prototype.clone=function(){return new r};return k._createClass(w)}(l);e.__decorate([K.enumeration({inherited:"inherited"})],ea.prototype,"type",void 0);return ea=r=e.__decorate([h.subclass("esri.layers.support.InheritedDomain")],ea)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(k,e,ea,S,I,ba,R,K,h){var l;S=l=function(r){function L(w){w=r.call(this,w)||this;w.maxValue=null;w.minValue=null;w.type="range";return w}k._inherits(L,r);L.prototype.clone=function(){return new l({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return k._createClass(L)}(h);e.__decorate([ea.property({type:Number,json:{type:[Number],read:{source:"range",reader(r,L){return L.range&&L.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},
target:"range",writer(r,L,w){L[w]=[this.minValue||0,r]}}}})],S.prototype,"maxValue",void 0);e.__decorate([ea.property({type:Number,json:{type:[Number],read:{source:"range",reader(r,L){return L.range&&L.range[0]}},write:{target:"range",writer(r,L,w){L[w]=[r,this.maxValue||0]}}}})],S.prototype,"minValue",void 0);e.__decorate([R.enumeration({range:"range"})],S.prototype,"type",void 0);return S=l=e.__decorate([K.subclass("esri.layers.support.RangeDomain")],S)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(k,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",
esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});k.kebabDict=e;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../core/asyncUtils ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../data/FeatureStore ../data/projectionSupport ../data/QueryEngine ./geojson/geojson ./support/sourceUtils ../../ogc/wfsUtils ../../support/FieldsIndex".split(" "),function(k,e,ea,S,I,ba,R,K,h,l,r,L,w,N){return function(){function f(){this._customParameters=this._queryEngine=null;this._snapshotFeatures=
async y=>{const {objectIdField:O}=this._queryEngine;var q=await w.getFeature(this._getFeatureUrl??"",this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map(z=>z.name),signal:y});await r.validateGeoJSON(q);I.throwIfAborted(y);y=r.createOptimizedFeatures(q,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:O});if(!ba.equals(this._queryEngine.spatialReference,ba.WGS84))for(var n of y)null!=
n.geometry&&(n.geometry=R.convertFromGeometry(h.project(R.convertToGeometry(n.geometry,this._queryEngine.geometryType,!1,!1),ba.WGS84,this._queryEngine.spatialReference)));n=1;for(const z of y)q={},L.mixAttributes(this._fieldsIndex,q,z.attributes,!0),z.attributes=q,null==z.attributes[O]&&(z.objectId=z.attributes[O]=n++);return y}}var p=f.prototype;p.destroy=function(){this._queryEngine?.destroy();this._queryEngine=null};p.load=async function(y,O){const {getFeatureUrl:q,getFeatureOutputFormat:n,spatialReference:z,
fields:U,geometryType:H,featureType:E,objectIdField:G,customParameters:A}=y;this._featureType=E;this._customParameters=A;this._getFeatureUrl=q;this._getFeatureOutputFormat=n;this._fieldsIndex=new N(U);await this._checkProjection(z);I.throwIfAborted(O);this._queryEngine=new l.QueryEngine({fields:U,geometryType:H,hasM:!1,hasZ:!1,objectIdField:G,spatialReference:z,timeInfo:null,featureStore:new K({geometryType:H,hasM:!1,hasZ:!1})});y=await this._snapshotFeatures(O.signal);this._queryEngine.featureStore.addMany(y);
return{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}};p.applyEdits=async function(){throw new ea("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");};p.queryFeatures=async function(y={},O={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(y,O.signal)};p.queryFeatureCount=async function(y={},O={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(y,O.signal)};p.queryObjectIds=async function(y=
{},O={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(y,O.signal)};p.queryExtent=async function(y={},O={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(y,O.signal)};p.querySnapping=async function(y,O={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(y,O.signal)};p.refresh=async function(y){this._customParameters=y;this._snapshotTask?.abort();this._snapshotTask=e.createTask(this._snapshotFeatures);
this._snapshotTask.promise.then(O=>{this._queryEngine.featureStore.clear();O&&this._queryEngine.featureStore.addMany(O)},O=>{this._queryEngine.featureStore.clear();I.isAbortError(O)||S.getLogger("esri.layers.WFSLayer").error(new ea("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:O}))});await this._waitSnapshotComplete();return{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}};p._waitSnapshotComplete=async function(){if(this._snapshotTask&&
!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}};p._checkProjection=async function(y){try{await h.checkProjectionSupport(ba.WGS84,y)}catch{throw new ea("unsupported-projection","Projection not supported",{spatialReference:y});}};return k._createClass(f)}()});