// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(l,f,la,ba,R,fa,U,K){function h(P){return{ok:!0,value:P}}function k(P){return{ok:!1,error:P}}function t(P){return null!=P&&!0===P.ok?P.value:null}function O(P){return null!=P&&!1===P.ok?P.error:null}let C=function(P){function e(E,Q){var r=P.call(this,
{})||this;r._result=null;r._abortHandle=null;r.abort=()=>{r._abortController=R.abortMaybe(r._abortController)};r.remove=r.abort;r._abortController=new AbortController;const {signal:n}=r._abortController;r.promise=E(n);r.promise.then(x=>{r._result=h(x);r._cleanup()},x=>{r._result=k(x);r._cleanup()});r._abortHandle=fa.onAbort(Q,r.abort);return r}f._inherits(e,P);var p=e.prototype;p.normalizeCtorArgs=function(){return{}};p.destroy=function(){this.abort()};p._cleanup=function(){this._abortHandle=R.removeMaybe(this._abortHandle);
this._abortController=null};f._createClass(e,[{key:"value",get:function(){return t(this._result)}},{key:"error",get:function(){return O(this._result)}},{key:"finished",get:function(){return null!=this._result}}]);return e}(ba);la.__decorate([U.property()],C.prototype,"value",null);la.__decorate([U.property()],C.prototype,"error",null);la.__decorate([U.property()],C.prototype,"finished",null);la.__decorate([U.property()],C.prototype,"promise",void 0);la.__decorate([U.property()],C.prototype,"_result",
void 0);C=la.__decorate([K.subclass("esri.core.asyncUtils.ReactiveTask")],C);l.assertResult=function(P){if(!0===P.ok)return P.value;throw P.error;};l.createTask=function(P,e){return new C(P,e)};l.forEach=function(P,e,p){return fa.eachAlways(P.map((E,Q)=>e.apply(p,[E,Q])))};l.makeResultError=k;l.makeResultOk=h;l.map=async function(P,e,p){return(await fa.eachAlways(P.map((E,Q)=>e.apply(p,[E,Q])))).map(E=>E.value)};l.result=async function(P){if(null==P)return{ok:!1,error:Error("no promise provided")};
try{return h(await P)}catch(e){return k(e)}};l.resultError=O;l.resultOrAbort=async function(P){try{return h(await P)}catch(e){return fa.throwIfAbortError(e),k(e)}};l.resultValue=t;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(l,f,la,ba,R,fa,U,K,h,k){function t(m,H){return m?H?4:3:H?3:2}function O(m,H,T,V){if(m){if(T)return H&&V?q:db;if(H&&V)return c}else if(H&&V)return db;return jb}function C({scale:m,translate:H},T){return Math.round((T-H[0])/m[0])}function P({scale:m,translate:H},T){return Math.round((H[1]-T)/m[1])}function e({scale:m,translate:H},T,V){return T*m[V]+H[V]}function p(m){m=m.coords;return{x:m[0],y:m[1]}}function E(m,H){m.coords[0]=H.x;m.coords[1]=H.y;return m}function Q(m){m=m.coords;return{x:m[0],
y:m[1],z:m[2]}}function r(m,H){m.coords[0]=H.x;m.coords[1]=H.y;m.coords[2]=H.z;return m}function n(m){m=m.coords;return{x:m[0],y:m[1],m:m[2]}}function x(m,H){m.coords[0]=H.x;m.coords[1]=H.y;m.coords[2]=H.m;return m}function J(m){m=m.coords;return{x:m[0],y:m[1],z:m[2],m:m[3]}}function z(m,H){m.coords[0]=H.x;m.coords[1]=H.y;m.coords[2]=H.z;m.coords[3]=H.m;return m}function A(m,H){return m&&H?z:m?r:H?x:E}function B(m,H,T,V,ea){T=A(T,V);for(const {geometry:na,attributes:pa}of H)H=null!=na?T(new k,na):
null,m.push(new K.OptimizedFeature(H,pa,null,ea?pa[ea]:void 0));return m}function y(m,H,T,V){for(const {geometry:ea,attributes:na}of H)m.push({attributes:na,geometry:null!=ea?D(ea,T,V):null});return m}function D(m,H,T){if(null==m)return null;const V=t(H,T),ea=[];for(let na=0;na<m.coords.length;na+=V){const pa=[];for(let sa=0;sa<V;sa++)pa.push(m.coords[na+sa]);ea.push(pa)}return H?T?{points:ea,hasZ:H,hasM:T}:{points:ea,hasZ:H}:T?{points:ea,hasM:T}:{points:ea}}function I(m,H,T,V,ea){T=t(T,V);for(const {geometry:na,
attributes:pa}of H)H=null!=na?X(new k,na,T):null,m.push(new K.OptimizedFeature(H,pa,null,ea?pa[ea]:void 0));return m}function X(m,H,T=t(H.hasZ,H.hasM)){m.lengths[0]=H.points.length;const V=m.coords;let ea=0;for(const na of H.points)for(H=0;H<T;H++)V[ea++]=na[H];return m}function ia(m,H,T){if(!m)return null;const V=t(H,T),{coords:ea,lengths:na}=m;m=[];let pa=0;for(const sa of na){const ua=[];for(let Da=0;Da<sa;Da++){const za=[];for(let ya=0;ya<V;ya++)za.push(ea[pa++]);ua.push(za)}m.push(ua)}return H?
T?{paths:m,hasZ:H,hasM:T}:{paths:m,hasZ:H}:T?{paths:m,hasM:T}:{paths:m}}function N(m,H,T,V,ea){T=t(T,V);for(const {geometry:na,attributes:pa}of H)H=null!=na?M(new k,na,T):null,m.push(new K.OptimizedFeature(H,pa,null,ea?pa[ea]:void 0));return m}function M(m,H,T=t(H.hasZ,H.hasM)){const {lengths:V,coords:ea}=m;let na=0;for(const pa of H.paths){for(const sa of pa)for(H=0;H<T;H++)ea[na++]=sa[H];V.push(pa.length)}return m}function v(m,H,T){if(!m)return null;const V=t(H,T),{coords:ea,lengths:na}=m;m=[];
let pa=0;for(const sa of na){const ua=[];for(let Da=0;Da<sa;Da++){const za=[];for(let ya=0;ya<V;ya++)za.push(ea[pa++]);ua.push(za)}m.push(ua)}return H?T?{rings:m,hasZ:H,hasM:T}:{rings:m,hasZ:H}:T?{rings:m,hasM:T}:{rings:m}}function w(m,H,T,V,ea){for(const {geometry:na,centroid:pa,attributes:sa}of H){H=null!=na?Z(new k,na,T,V):null;const ua=ea?sa[ea]:void 0;null!=pa?m.push(new K.OptimizedFeature(H,sa,E(new k,pa),ua)):m.push(new K.OptimizedFeature(H,sa,null,ua))}return m}function Z(m,H,T=H.hasZ,V=H.hasM){return ja(m,
H.rings,T,V)}function ja(m,H,T,V){T=t(T,V);const {lengths:ea,coords:na}=m;V=0;Sa(m);for(const pa of H){for(const sa of pa)for(H=0;H<T;H++)na[V++]=sa[H];ea.push(pa.length)}return m}function va(m,H,T,V,ea,na){Va(m);if(!T){for(const pa of H)m.push(new K.OptimizedFeature(null,pa.attributes,null,na?pa.attributes[na]:void 0));return m}switch(T){case "esriGeometryPoint":return B(m,H,V,ea,na);case "esriGeometryMultipoint":return I(m,H,V,ea,na);case "esriGeometryPolyline":return N(m,H,V,ea,na);case "esriGeometryPolygon":return w(m,
H,V,ea,na);default:eb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${T}'`)),Va(m)}return m}function Ba(m,H,T,V){m=m&&("coords"in m?m:m.geometry);if(null==m)return null;switch(H){case "esriGeometryPoint":return H=p,T&&V?H=J:T?H=Q:V&&(H=n),H(m);case "esriGeometryMultipoint":return D(m,T,V);case "esriGeometryPolyline":return ia(m,T,V);case "esriGeometryPolygon":return v(m,T,V);default:return eb.error("convertToGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${H}'`)),
null}}function Ea(m,H,T,V,ea){Va(m);if(null==T){for(const pa of H)m.push({attributes:pa.attributes});return m}switch(T){case "esriGeometryPoint":T=p;V&&ea?T=J:V?T=Q:ea&&(T=n);for(var na of H){const {geometry:pa,attributes:sa}=na;V=null!=pa?T(pa):null;m.push({attributes:sa,geometry:V})}break;case "esriGeometryMultipoint":return y(m,H,V,ea);case "esriGeometryPolyline":for(const {geometry:pa,attributes:sa}of H)m.push({attributes:sa,geometry:null!=pa?ia(pa,V,ea):null});break;case "esriGeometryPolygon":for(const {geometry:pa,
attributes:sa,centroid:ua}of H)na=null!=pa?v(pa,V,ea):null,null!=ua?(H=p(ua),m.push({attributes:sa,centroid:H,geometry:na})):m.push({attributes:sa,geometry:na});break;default:eb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${T}'`))}return m}function Fa(m,H,T,V,ea,na,pa=T,sa=V){Sa(m);if(null==H||!H.coords.length)return null;ea=kb[ea];const {coords:ua,lengths:Da}=H;H=t(T,V);const za=t(T&&pa,V&&sa);T=O(T,V,pa,sa);if(!Da.length)return T(m.coords,ua,0,0,C(na,
ua[0]),P(na,ua[1])),Sa(m,H,0),m;let ya,Qa=0,Ka,Oa=0;for(const Pa of Da){if(Pa<ea)continue;let Ja=0;Ka=Oa;sa=V=C(na,ua[Qa]);ya=pa=P(na,ua[Qa+1]);T(m.coords,ua,Ka,Qa,sa,ya);Ja++;Qa+=H;Ka+=za;for(let Ra=1;Ra<Pa;Ra++,Qa+=H)if(sa=C(na,ua[Qa]),ya=P(na,ua[Qa+1]),sa!==V||ya!==pa)T(m.coords,ua,Ka,Qa,sa-V,ya-pa),Ka+=za,Ja++,V=sa,pa=ya;Ja>=ea&&(m.lengths.push(Ja),Oa=Ka)}Va(m.coords,Oa);return m.coords.length?m:null}function Ma(m,H,T,V,ea,na,pa){let sa=V,ua=0;for(let za=na+T;za<pa;za+=T){var Da=H[za];const ya=
H[za+1],Qa=H[pa],Ka=H[pa+1];let Oa=H[na],Pa=H[na+1],Ja=Qa-Oa,Ra=Ka-Pa;if(0!==Ja||0!==Ra){const Wa=((Da-Oa)*Ja+(ya-Pa)*Ra)/(Ja*Ja+Ra*Ra);1<Wa?(Oa=Qa,Pa=Ka):0<Wa&&(Oa+=Ja*Wa,Pa+=Ra*Wa)}Ja=Da-Oa;Ra=ya-Pa;Da=Ja*Ja+Ra*Ra;Da>sa&&(ua=za,sa=Da)}sa>V&&(ua-na>T&&Ma(m,H,T,V,ea,na,ua),ea(m,H,m.length,ua,H[ua],H[ua+1]),pa-ua>T&&Ma(m,H,T,V,ea,ua,pa))}function Ha(m,H,T,V,ea){const {coords:na,lengths:pa}=H;T=t(T,V);if(!na.length)return m!==H&&Sa(m),m;ba.assertIsSome(ea);const {originPosition:sa,scale:ua,translate:Da}=
ea;ea=aa;ea.originPosition=sa;V=ea.scale;V[0]=ua[0]??1;V[1]=-(ua[1]??1);V[2]=ua[2]??1;V[3]=ua[3]??1;var za=ea.translate;za[0]=Da[0]??0;za[1]=Da[1]??0;za[2]=Da[2]??0;za[3]=Da[3]??0;if(!pa.length){for(V=0;V<T;++V)m.coords[V]=e(ea,na[V],V);m!==H&&Sa(m,T,0);return m}za=0;for(let Qa=0;Qa<pa.length;Qa++){const Ka=pa[Qa];m.lengths[Qa]=Ka;for(var ya=0;ya<T;++ya)m.coords[za+ya]=e(ea,na[za+ya],ya);ya=m.coords[za];let Oa=m.coords[za+1];za+=T;for(let Pa=1;Pa<Ka;Pa++,za+=T){ya+=na[za]*V[0];Oa+=na[za+1]*V[1];m.coords[za]=
ya;m.coords[za+1]=Oa;for(let Ja=2;Ja<T;++Ja)m.coords[za+Ja]=e(ea,na[za+Ja],Ja)}}m!==H&&Sa(m,na.length,pa.length);return m}function Ua(m,H,T,V){let ea=0,na=m[V*H],pa=m[V*(H+1)];for(let sa=1;sa<T;sa++){const ua=na+m[V*(H+sa)],Da=pa+m[V*(H+sa)+1],za=(ua-na)*(Da+pa);na=ua;pa=Da;ea+=za}return.5*ea}function Sa(m,H=0,T=0){Va(m.lengths,T);Va(m.coords,H)}function Va(m,H=0){m.length!==H&&(m.length=H)}const eb=la.getLogger("esri.layers.graphics.featureConversionUtils"),kb={esriGeometryPoint:0,esriGeometryPolyline:2,
esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},jb=(m,H,T,V,ea,na)=>{m[T]=ea;m[T+1]=na},db=(m,H,T,V,ea,na)=>{m[T]=ea;m[T+1]=na;m[T+2]=H[V+2]},c=(m,H,T,V,ea,na)=>{m[T]=ea;m[T+1]=na;m[T+2]=H[V+3]},q=(m,H,T,V,ea,na)=>{m[T]=ea;m[T+1]=na;m[T+2]=H[V+2];m[T+3]=H[V+3]},da=[],F=[],aa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};l.convertFromFeature=function(m,H,T,V,ea){da[0]=m;[m]=va(F,da,H,T,V,ea);Va(da);Va(F);return m};l.convertFromFeatureSet=function(m,H){const T=
new h,{hasM:V,hasZ:ea,features:na,objectIdFieldName:pa,spatialReference:sa,geometryType:ua,exceededTransferLimit:Da,transform:za,fields:ya}=m;ya&&(T.fields=ya);T.geometryType=ua??null;T.objectIdFieldName=pa??H??null;T.spatialReference=sa??null;if(!T.objectIdFieldName)return eb.error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),T;na&&va(T.features,na,ua,ea,V,T.objectIdFieldName);Da&&(T.exceededTransferLimit=Da);V&&(T.hasM=V);ea&&(T.hasZ=ea);za&&(T.transform=
za);return T};l.convertFromFeatures=va;l.convertFromGeometry=function(m,H,T){if(null==m)return null;const V=new k;"hasZ"in m&&null==H&&(H=m.hasZ);"hasM"in m&&null==T&&(T=m.hasM);if(U.isPoint(m))return A(null!=H?H:null!=m.z,null!=T?T:null!=m.m)(V,m);if(U.isPolygon(m))return Z(V,m,H,T);if(U.isPolyline(m))return M(V,m,t(H,T));if(U.isMultipoint(m))return X(V,m,t(H,T));eb.error("convertFromGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${m}'`))};l.convertFromGraphics=function(m,
H,T,V,ea,na){const pa=m.length;switch(T){case "esriGeometryPoint":B(m,H,V,ea,na);break;case "esriGeometryMultipoint":I(m,H,V,ea,na);break;case "esriGeometryPolyline":N(m,H,V,ea,na);break;case "esriGeometryPolygon":w(m,H,V,ea,na);break;default:eb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${T}'`))}for(V=0;V<H.length;V++)m[V+pa].geometryType=T,m[V+pa].insertAfter=H[V].insertAfter,m[V+pa].groupId=H[V].groupId;return m};l.convertFromMultipoint=X;l.convertFromMultipointFeatures=
I;l.convertFromNestedArray=ja;l.convertFromPoint=function(m,H,T=A(null!=H.z,null!=H.m)){return T(m,H)};l.convertFromPointFeatures=B;l.convertFromPolygon=Z;l.convertFromPolyline=M;l.convertFromPolylineFeatures=N;l.convertToFeature=function(m,H,T,V){F[0]=m;Ea(da,F,H,T,V);m=da[0];Va(da);Va(F);return m};l.convertToFeatureSet=function(m){const {objectIdFieldName:H,spatialReference:T,transform:V,fields:ea,hasM:na,hasZ:pa,features:sa,geometryType:ua,exceededTransferLimit:Da,uniqueIdField:za,queryGeometry:ya,
queryGeometryType:Qa}=m;m=Ea([],sa,ua,pa,na);const Ka=Ba(ya,Qa,!1,!1);m={features:m,fields:ea,geometryType:ua,objectIdFieldName:H,spatialReference:T,uniqueIdField:za,queryGeometry:Ka};V&&(m.transform=V);Da&&(m.exceededTransferLimit=Da);na&&(m.hasM=na);pa&&(m.hasZ=pa);return m};l.convertToFeatures=Ea;l.convertToGeometry=Ba;l.convertToMultipoint=D;l.convertToMultipointFeatures=y;l.convertToPoint=function(m,H,T){return m?H?T?J(m):Q(m):T?n(m):p(m):null};l.convertToPolygon=v;l.convertToPolyline=ia;l.deltaDecodeGeometry=
function(m,H){if(null==m)return null;const T=m.clone(),V=m.coords;m=m.lengths;let ea=0;for(let sa=0;sa<m.length;sa++){const ua=m[sa];var na=V[H*ea],pa=V[H*ea+1];for(let Da=1;Da<ua;Da++)na+=V[H*(ea+Da)],pa+=V[H*(ea+Da)+1],T.coords[H*(ea+Da)]=na,T.coords[H*(ea+Da)+1]=pa;ea+=ua}return T};l.deltaEncodeGeometry=function(m,H){const T=m.clone(),V=m.coords;m=m.lengths;let ea=0;for(let pa=0;pa<m.length;pa++){const sa=m[pa];let ua=V[H*ea];var na=V[H*ea+1];for(let Da=1;Da<sa;Da++){const za=V[H*(ea+Da)],ya=V[H*
(ea+Da)+1];na=ya-na;T.coords[H*(ea+Da)]=za-ua;T.coords[H*(ea+Da)+1]=na;ua=za;na=ya}ea+=sa}return T};l.generalizeOptimizedGeometry=function(m,H,T,V,ea,na,pa=T,sa=V){Sa(m);if(!H||!H.coords.length)return null;ea=kb[ea];const {coords:ua,lengths:Da}=H;H=t(T,V);const za=t(T&&pa,V&&sa);T=O(T,V,pa,sa);if(!Da.length)return T(m.coords,ua,0,0,ua[0],ua[1]),Sa(m,H,0),m;V=0;na*=na;for(const ya of Da){if(ya<ea){V+=ya*H;continue}pa=m.coords.length/za;sa=V;const Qa=V+(ya-1)*H;T(m.coords,ua,m.coords.length,sa,ua[sa],
ua[sa+1]);Ma(m.coords,ua,H,na,T,sa,Qa);T(m.coords,ua,m.coords.length,Qa,ua[Qa],ua[Qa+1]);sa=m.coords.length/za-pa;sa>=ea?m.lengths.push(sa):Va(m.coords,pa*za);V+=ya*H}return m.coords.length?m:null};l.getBoundsOptimizedGeometry=function(m,H,T,V){if(null==H||!H.coords||!H.coords.length)return null;T=t(T,V);let ea=V=Number.POSITIVE_INFINITY,na=Number.NEGATIVE_INFINITY,pa=Number.NEGATIVE_INFINITY;if(H&&H.coords){H=H.coords;for(let sa=0;sa<H.length;sa+=T){const ua=H[sa],Da=H[sa+1];V=Math.min(V,ua);na=
Math.max(na,ua);ea=Math.min(ea,Da);pa=Math.max(pa,Da)}}R.is(m)?R.fromRectValues(m,V,ea,na,pa):fa.fromValues(V,ea,na,pa,m);return m};l.getQuantizedArea=function(m,H){const {coords:T,lengths:V}=m;let ea=m=0;for(let na=0;na<V.length;na++){const pa=V[na];ea+=Ua(T,m,pa,H);m+=pa}return Math.abs(ea)};l.getQuantizedBoundsOptimizedGeometry=function(m,H,T,V){T=t(T,V);const {lengths:ea,coords:na}=H;V=H=Number.POSITIVE_INFINITY;let pa=Number.NEGATIVE_INFINITY,sa=Number.NEGATIVE_INFINITY,ua=0;for(const Da of ea){let za=
na[ua],ya=na[ua+1];H=Math.min(za,H);V=Math.min(ya,V);pa=Math.max(za,pa);sa=Math.max(ya,sa);ua+=T;for(let Qa=1;Qa<Da;Qa++,ua+=T){const Ka=na[ua],Oa=na[ua+1];za+=Ka;ya+=Oa;0>Ka&&(H=Math.min(H,za));0<Ka&&(pa=Math.max(pa,za));0>Oa?V=Math.min(V,ya):0<Oa&&(sa=Math.max(sa,ya))}}m[0]=H;m[1]=V;m[2]=pa;m[3]=sa;return m};l.getSignedQuantizedRingArea=Ua;l.quantizeOptimizedFeatureSet=function(m,H){const {geometryType:T,features:V,hasM:ea,hasZ:na}=H;if(!m)return H;for(let pa=0;pa<V.length;pa++){const sa=V[pa],
ua=sa.weakClone();ua.geometry=new k;Fa(ua.geometry,sa.geometry,ea,na,T,m);sa.centroid&&(ua.centroid=new k,Fa(ua.centroid,sa.centroid,ea,na,"esriGeometryPoint",m));V[pa]=ua}H.transform=m;return H};l.quantizeOptimizedGeometry=Fa;l.quantizeX=C;l.quantizeY=P;l.removeCollinearVectices=function(m,H,T,V,ea){if(!H||!H.coords||!H.coords.length)return null;T=kb[T];const {coords:na,lengths:pa}=H;H=O(V,ea,V,ea);V=t(V,ea);let sa=ea=0,ua=0,Da=0;for(const Qa of pa){sa=Da;H(m.coords,na,sa,ea,na[ea],na[ea+1]);ea+=
V;var za=na[ea];let Ka=na[ea+1],Oa=za,Pa=Ka;var ya=Ka/za;sa+=V;H(m.coords,na,sa,ea,Oa,Pa);ea+=V;for(let Ja=2;Ja<Qa;Ja++){za=na[ea];Ka=na[ea+1];const Ra=Ka/za,Wa=ya===Ra||!isFinite(ya)&&!isFinite(Ra);ya=Wa&&isFinite(Ra)?0<=ya&&0<=Ra||0>=ya&&0>=Ra:0<=Pa&&0<=Ka||0>=Pa&&0>=Ka;Wa&&ya?(Oa+=za,Pa+=Ka):(Oa=za,Pa=Ka,sa+=V);H(m.coords,na,sa,ea,Oa,Pa);ea+=V;ya=Ra}sa+=V;za=(sa-Da)/V;za>=T&&(m.lengths[ua]=za,Da=sa,ua++)}m.coords.length>Da&&(m.coords.length=Da);m.lengths.length>ua&&(m.lengths.length=ua);return m.coords.length&&
m.lengths.length?m:null};l.removeZMValues=function(m,H,T,V,ea,na){Sa(m);m.lengths.push(...H.lengths);if(T===ea&&V===na)for(var pa=0;pa<H.coords.length;pa++)m.coords.push(H.coords[pa]);else for(pa=t(T,V),T=O(T,V,ea,na),H=H.coords,V=0;V<H.length;V+=pa)T(m.coords,H,m.coords.length,V,H[V],H[V+1]);return m};l.unquantizeOptimizedFeatureSet=function(m){const {transform:H,features:T,hasM:V,hasZ:ea}=m;if(!H)return m;for(const na of T)null!=na.geometry&&Ha(na.geometry,na.geometry,V,ea,H),null!=na.centroid&&
Ha(na.centroid,na.centroid,V,ea,H);m.transform=null;return m};l.unquantizeOptimizedGeometry=Ha;l.unquantizeValue=e;l.unquantizeX=function(m,H){return e(m,H,0)};l.unquantizeY=function(m,H){return e(m,-H,1)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],function(l,f,la){function ba(e=C){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function R(e,p,E,Q,r,n,x=ba()){x[0]=e;x[1]=p;x[2]=E;x[3]=Q;x[4]=
r;x[5]=n;return x}function fa(e){return e[0]>=e[3]?0:e[3]-e[0]}function U(e){return e[1]>=e[4]?0:e[4]-e[1]}function K(e){return e[2]>=e[5]?0:e[5]-e[2]}function h(e,p){return Math.max(p[0],e[0])<=Math.min(p[3],e[3])&&Math.max(p[1],e[1])<=Math.min(p[4],e[4])&&Math.max(p[2],e[2])<=Math.min(p[5],e[5])}function k(e,p){e[0]=p[0];e[1]=p[1];e[2]=p[2];e[3]=p[3];e[4]=p[4];e[5]=p[5];return e}function t(e){return 6===e.length}const O=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],C=[0,0,0,0,0,0],
P=ba();l.NEGATIVE_INFINITY=O;l.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];l.ZERO=C;l.allFinite=function(e){for(let p=0;6>p;p++)if(!isFinite(e[p]))return!1;return!0};l.center=function(e,p=[0,0,0]){p[0]=e[0]+fa(e)/2;p[1]=e[1]+U(e)/2;p[2]=e[2]+K(e)/2;return p};l.contains=function(e,p){return p[0]>=e[0]&&p[1]>=e[1]&&p[2]>=e[2]&&p[3]<=e[3]&&p[4]<=e[4]&&p[5]<=e[5]};l.containsPoint=function(e,p){return p[0]>=e[0]&&p[1]>=e[1]&&p[2]>=e[2]&&p[0]<=e[3]&&p[1]<=e[4]&&p[2]<=e[5]};
l.containsPointWithMargin=function(e,p,E){return p[0]>=e[0]-E&&p[1]>=e[1]-E&&p[2]>=e[2]-E&&p[0]<=e[3]+E&&p[1]<=e[4]+E&&p[2]<=e[5]+E};l.create=ba;l.depth=U;l.diameter=function(e){const p=fa(e),E=K(e);e=U(e);return Math.sqrt(p*p+E*E+e*e)};l.empty=function(e){return e?k(e,O):ba(O)};l.equals=function(e,p,E){if(null==e||null==p)return e===p;if(!t(e)||!t(p))return!1;if(E)for(let Q=0;Q<e.length;Q++){if(!E(e[Q],p[Q]))return!1}else for(E=0;E<e.length;E++)if(e[E]!==p[E])return!1;return!0};l.expandWithAABB=
function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[2]=Math.min(e[2],p[2]);e[3]=Math.max(e[3],p[3]);e[4]=Math.max(e[4],p[4]);e[5]=Math.max(e[5],p[5])};l.expandWithBuffer=function(e,p,E=0,Q=p.length/3){let r=e[0],n=e[1],x=e[2],J=e[3],z=e[4],A=e[5];for(let B=0;B<Q;B++)r=Math.min(r,p[E+3*B]),n=Math.min(n,p[E+3*B+1]),x=Math.min(x,p[E+3*B+2]),J=Math.max(J,p[E+3*B]),z=Math.max(z,p[E+3*B+1]),A=Math.max(A,p[E+3*B+2]);e[0]=r;e[1]=n;e[2]=x;e[3]=J;e[4]=z;e[5]=A};l.expandWithNestedArray=function(e,
p,E){const Q=p.length;let r=e[0],n=e[1],x=e[2],J=e[3],z=e[4],A=e[5];if(E)for(E=0;E<Q;E++){var B=p[E];r=Math.min(r,B[0]);n=Math.min(n,B[1]);x=Math.min(x,B[2]);J=Math.max(J,B[0]);z=Math.max(z,B[1]);A=Math.max(A,B[2])}else for(E=0;E<Q;E++)B=p[E],r=Math.min(r,B[0]),n=Math.min(n,B[1]),J=Math.max(J,B[0]),z=Math.max(z,B[1]);e[0]=r;e[1]=n;e[2]=x;e[3]=J;e[4]=z;e[5]=A};l.expandWithOffset=function(e,p,E,Q){e[0]=Math.min(e[0],e[0]+p);e[3]=Math.max(e[3],e[3]+p);e[1]=Math.min(e[1],e[1]+E);e[4]=Math.max(e[4],e[4]+
E);e[2]=Math.min(e[2],e[2]+Q);e[5]=Math.max(e[5],e[5]+Q)};l.expandWithRect=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[3]=Math.max(e[3],p[2]);e[4]=Math.max(e[4],p[3])};l.expandWithVec3=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[2]=Math.min(e[2],p[2]);e[3]=Math.max(e[3],p[0]);e[4]=Math.max(e[4],p[1]);e[5]=Math.max(e[5],p[2])};l.fromExtent=function(e,p=ba()){p[0]=e.xmin;p[1]=e.ymin;p[2]=e.hasZ?e.zmin:-Infinity;p[3]=e.xmax;p[4]=e.ymax;p[5]=e.hasZ?e.zmax:Infinity;
return p};l.fromMinMax=function(e,p,E=ba()){E[0]=e[0];E[1]=e[1];E[2]=e[2];E[3]=p[0];E[4]=p[1];E[5]=p[2];return E};l.fromRect=function(e,p){e[0]=p[0];e[1]=p[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=p[2];e[4]=p[3];e[5]=Number.POSITIVE_INFINITY;return e};l.fromRectValues=function(e,p,E,Q,r){e[0]=p;e[1]=E;e[2]=Number.NEGATIVE_INFINITY;e[3]=Q;e[4]=r;e[5]=Number.POSITIVE_INFINITY;return e};l.fromValues=R;l.getMax=function(e,p){p[0]=e[3];p[1]=e[4];p[2]=e[5];return p};l.getMin=function(e,p){p[0]=e[0];p[1]=e[1];
p[2]=e[2];return p};l.height=K;l.intersects=h;l.intersectsClippingArea=function(e,p){return null==p?!0:h(e,p)};l.is=t;l.isPoint=function(e){return 0===fa(e)&&0===U(e)&&0===K(e)};l.maximumDimension=function(e){return Math.max(fa(e),K(e),U(e))};l.offset=function(e,p,E,Q,r=e){r[0]=e[0]+p;r[1]=e[1]+E;r[2]=e[2]+Q;r[3]=e[3]+p;r[4]=e[4]+E;r[5]=e[5]+Q;return r};l.scale=function(e,p,E=e){const Q=e[0]+fa(e)/2,r=e[1]+U(e)/2,n=e[2]+K(e)/2;E[0]=Q+(e[0]-Q)*p;E[1]=r+(e[1]-r)*p;E[2]=n+(e[2]-n)*p;E[3]=Q+(e[3]-Q)*
p;E[4]=r+(e[4]-r)*p;E[5]=n+(e[5]-n)*p;return E};l.set=k;l.setMax=function(e,p,E=e){E[3]=p[0];E[4]=p[1];E[5]=p[2];E!==e&&(E[0]=e[0],E[1]=e[1],E[2]=e[2]);return e};l.setMin=function(e,p,E=e){E[0]=p[0];E[1]=p[1];E[2]=p[2];E!==e&&(E[3]=e[3],E[4]=e[4],E[5]=e[5]);return E};l.size=function(e,p=[0,0,0]){p[0]=fa(e);p[1]=U(e);p[2]=K(e);return p};l.toExtent=function(e,p){return isFinite(e[2])||isFinite(e[5])?new f({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:p}):new f({xmin:e[0],
xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:p})};l.toRect=function(e,p){p||(p=la.create());p[0]=e[0];p[1]=e[1];p[2]=e[3];p[3]=e[4];return p};l.width=fa;l.wrap=function(e,p,E,Q,r,n){return R(e,p,E,Q,r,n,P)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(l,f){let la=function(){function R(fa=null,U={},K,h){this.geometry=fa;this.attributes=U;this.centroid=K;this.objectId=
h;this.geohashY=this.geohashX=this.displayId=0}R.prototype.weakClone=function(){const fa=new R(this.geometry,this.attributes,this.centroid,this.objectId);fa.displayId=this.displayId;fa.geohashX=this.geohashX;fa.geohashY=this.geohashY;return fa};return f._createClass(R)}(),ba=function(R){function fa(){return R.apply(this,arguments)||this}f._inherits(fa,R);return f._createClass(fa)}(la);l.OptimizedFeature=la;l.OptimizedFeatureWithGeometry=ba;l.hasGeometry=function(R){return!(null==R.geometry||!R.geometry.coords||
!R.geometry.coords.length)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function f(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=
this.uniqueIdField=null}f.prototype.weakClone=function(){const la=new f;la.objectIdFieldName=this.objectIdFieldName;la.globalIdFieldName=this.globalIdFieldName;la.geohashFieldName=this.geohashFieldName;la.geometryProperties=this.geometryProperties;la.geometryType=this.geometryType;la.spatialReference=this.spatialReference;la.hasZ=this.hasZ;la.hasM=this.hasM;la.features=this.features;la.fields=this.fields;la.transform=this.transform;la.exceededTransferLimit=this.exceededTransferLimit;la.uniqueIdField=
this.uniqueIdField;la.queryGeometry=this.queryGeometry;la.queryGeometryType=this.queryGeometryType;return la};return l._createClass(f)}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function f(ba=[],R=[],fa=!1){this.lengths=ba??[];this.coords=R??[];this.hasIndeterminateRingOrder=fa}f.fromRect=function(ba){const [R,fa,U,K]=ba;ba=U-R;const h=K-fa;return new f([5],[R,fa,ba,0,0,h,-ba,0,0,-h])};var la=f.prototype;
la.forEachVertex=function(ba){let R=0;this.lengths.length||ba(this.coords[0],this.coords[1]);for(let fa=0;fa<this.lengths.length;fa++){const U=this.lengths[fa];for(let K=0;K<U;K++)ba(this.coords[2*(K+R)],this.coords[2*(K+R)+1]);R+=U}};la.clone=function(ba){return ba?(ba.set(this.coords),new f(this.lengths.slice(),ba,this.hasIndeterminateRingOrder)):new f(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};l._createClass(f,[{key:"isPoint",get:function(){return 0===this.lengths.length}},
{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((ba,R)=>ba+R)}}]);return f}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),function(l,
f,la,ba,R,fa,U,K,h,k){const t=R.create();return function(){function O(P){this.geometryInfo=P;this._boundsStore=new K.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new la;this.featureAdapter=h.optimizedFeatureQueryEngineAdapter}var C=O.prototype;C.getFullExtent=function(P){if(null==this.fullBounds)return null;const [e,p,E,Q]=this.fullBounds;return{xmin:e,ymin:p,xmax:E,ymax:Q,spatialReference:k.cleanFromGeometryEngine(P)}};C.add=function(P){this._add(P);this._emitChanged()};
C.addMany=function(P){for(const e of P)this._add(e);this._emitChanged()};C.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};C.removeById=function(P){P=this._featuresById.get(P);if(!P)return null;this._remove(P);this._emitChanged();return P};C.removeManyById=function(P){this._boundsStore.invalidateIndex();for(const e of P)(P=this._featuresById.get(e))&&this._remove(P);this._emitChanged()};C.forEachBounds=function(P,e){for(const p of P)(P=this._boundsStore.get(p.objectId))&&
e(R.fromRect(t,P))};C.getFeature=function(P){return this._featuresById.get(P)};C.has=function(P){return this._featuresById.has(P)};C.forEach=function(P){this._featuresById.forEach(e=>P(e))};C.forEachInBounds=function(P,e){this._boundsStore.forEachInBounds(P,p=>{e(this._featuresById.get(p))})};C.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};C.sweep=function(){let P=!1;this._featuresById.forEach((e,p)=>{this._markedIds.has(p)||(P=!0,this._remove(e))});
this._markedIds.clear();P&&this._emitChanged()};C._emitChanged=function(){this.events.emit("changed",void 0)};C._add=function(P){if(P){var e=P.objectId;if(null==e)ba.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:P}));else{var p=this._featuresById.get(e);this._markedIds.add(e);if(p){P.displayId=p.displayId;var E=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(P);
null!=P.geometry&&P.geometry.coords&&P.geometry.coords.length?(E=U.getBoundsOptimizedGeometry(null!=E?E:fa.create(),P.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=E&&this._boundsStore.set(e,E)):this._boundsStore.set(e,null);this._featuresById.set(e,P)}}};C._remove=function(P){if(null!=this.onFeatureRemove)this.onFeatureRemove(P);const e=P.objectId;this._markedIds.delete(e);this._boundsStore.delete(e);this._featuresById.delete(e);return P};l._createClass(O,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},
{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let P=0;this._featuresById.forEach(e=>{null!=e.geometry&&e.geometry.coords&&(P+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:P/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);
return O}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(l,f,la,ba,R){let fa=function(){function U(){this._emitter=new U.EventEmitter(this)}var K=U.prototype;K.emit=function(h,k){return this._emitter.emit(h,k)};K.on=function(h,k){return this._emitter.on(h,k)};K.once=function(h,k){return this._emitter.once(h,k)};K.hasEventListener=function(h){return this._emitter.hasEventListener(h)};
return l._createClass(U)}();(function(U){let K=function(){function k(O=null){this._target=O;this._listenersMap=null}var t=k.prototype;t.clear=function(){this._listenersMap?.clear();this._listenersMap=null};t.destroy=function(){this.clear()};t.emit=function(O,C){O=this._listenersMap&&this._listenersMap.get(O);if(!O)return!1;const P=this._target||this;[...O].forEach(e=>{e.call(P,C)});return 0<O.length};t.on=function(O,C){if(Array.isArray(O)){var P=O.map(e=>this.on(e,C));return ba.handlesGroup(P)}if(O.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);P=this._listenersMap.get(O)||[];P.push(C);this._listenersMap.set(O,P);return{remove:()=>{const e=this._listenersMap&&this._listenersMap.get(O)||[],p=e.indexOf(C);0<=p&&e.splice(p,1)}}};t.once=function(O,C){const P=this.on(O,e=>{P.remove();C.call(null,e)});return P};t.hasEventListener=function(O){O=this._listenersMap&&this._listenersMap.get(O);return null!=O&&0<O.length};return l._createClass(k)}();U.EventEmitter=K;U.EventedMixin=k=>{k=function(t){function O(){var P=
t.apply(this,arguments)||this;P._emitter=new K;return P}l._inherits(O,t);var C=O.prototype;C.destroy=function(){this._emitter.clear()};C.emit=function(P,e){return this._emitter.emit(P,e)};C.on=function(P,e){return this._emitter.on(P,e)};C.once=function(P,e){return this._emitter.once(P,e)};C.hasEventListener=function(P){return this._emitter.hasEventListener(P)};return l._createClass(O)}(k);return k=f.__decorate([R.subclass("esri.core.Evented")],k)};let h=function(k){function t(){var C=k.apply(this,
arguments)||this;C._emitter=new fa.EventEmitter(l._assertThisInitialized(C));return C}l._inherits(t,k);var O=t.prototype;O.destroy=function(){this._emitter.clear()};O.emit=function(C,P){return this._emitter.emit(C,P)};O.on=function(C,P){return this._emitter.on(C,P)};O.once=function(C,P){return this._emitter.once(C,P)};O.hasEventListener=function(C){return this._emitter.hasEventListener(C)};return l._createClass(t)}(la);h=f.__decorate([R.subclass("esri.core.Evented")],h);U.EventedAccessor=h})(fa||
(fa={}));return fa})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(l,f,la,ba,R){function fa(h,k,t){U.minX=k[0];U.minY=k[1];U.maxX=k[2];U.maxY=k[3];h.search(U,t)}const U={minX:0,minY:0,maxX:0,maxY:0};let K=function(){function h(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;
this._index=new ba.PooledRBush(9,la("esri-csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const t=Array(this._idByBounds.size);let O=0;this._idByBounds.forEach((C,P)=>{t[O++]=P});this._indexInvalid=!1;this._index.clear();this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(t=>this._idByBounds.has(t))))),this._boundsToLoad.length=0)}}var k=h.prototype;
k.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};k.delete=function(t){const O=this._boundsById.get(t);this._boundsById.delete(t);O&&(this._idByBounds.delete(O),this._indexInvalid||this._index.remove(O))};k.forEachInBounds=function(t,O){this._loadIndex();fa(this._index,t,C=>O(this._idByBounds.get(C)))};k.get=function(t){return this._boundsById.get(t)};k.has=function(t){return this._boundsById.has(t)};k.invalidateIndex=
function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};k.set=function(t,O){if(!this._indexInvalid){const C=this._boundsById.get(t);C&&(this._index.remove(C),this._idByBounds.delete(C))}this._boundsById.set(t,O);O&&(this._idByBounds.set(O,t),this._indexInvalid||(this._boundsToLoad.push(O),5E4<this._boundsToLoad.length&&this._loadIndex()))};f._createClass(h,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const t=R.empty();for(const O of this._boundsById.values())O&&
(t[0]=Math.min(O[0],t[0]),t[1]=Math.min(O[1],t[1]),t[2]=Math.max(O[2],t[2]),t[3]=Math.max(O[3],t[3]));return t}},{key:"valid",get:function(){return!this._indexInvalid}}]);return h}();l.BoundsStore=K;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(l,f,la,ba,R,fa){function U(B,y){K(B,0,
B.children.length,y,B)}function K(B,y,D,I,X){X||(X=new z([]));X.minX=Infinity;X.minY=Infinity;X.maxX=-Infinity;X.maxY=-Infinity;for(let ia=y,N;ia<D;ia++)N=B.children[ia],h(X,B.leaf?I(N):N);return X}function h(B,y){B.minX=Math.min(B.minX,y.minX);B.minY=Math.min(B.minY,y.minY);B.maxX=Math.max(B.maxX,y.maxX);B.maxY=Math.max(B.maxY,y.maxY)}function k(B,y){return B.minX-y.minX}function t(B,y){return B.minY-y.minY}function O(B){return(B.maxX-B.minX)*(B.maxY-B.minY)}function C(B){return B.maxX-B.minX+(B.maxY-
B.minY)}function P(B,y){return B.minX<=y.minX&&B.minY<=y.minY&&y.maxX<=B.maxX&&y.maxY<=B.maxY}function e(B,y){return y.minX<=B.maxX&&y.minY<=B.maxY&&y.maxX>=B.minX&&y.maxY>=B.minY}function p(B,y,D,I,X){for(y=[y,D];y.length;){D=ba.assumeNonNull(y.pop());const ia=ba.assumeNonNull(y.pop());if(D-ia<=I)continue;const N=ia+Math.ceil((D-ia)/I/2)*I;fa.quickselect(B,N,ia,D,X);y.push(ia,N,N,D)}}let E=function(){function B(D=9,I){this._compareMinX=k;this._compareMinY=t;this._toBBox=X=>X;this._maxEntries=Math.max(4,
D||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));I&&("function"===typeof I?this._toBBox=I:this._initFormat(I));this.clear()}var y=B.prototype;y.destroy=function(){this.clear();Q.prune();r.prune();n.prune();x.prune()};y.all=function(D){this._all(this._data,D)};y.search=function(D,I){let X=this._data;const ia=this._toBBox;if(e(D,X))for(Q.clear();X;){for(let N=0,M=X.children.length;N<M;N++){const v=X.children[N],w=X.leaf?ia(v):v;e(D,w)&&(X.leaf?I(v):P(D,w)?this._all(v,I):Q.push(v))}X=
Q.pop()}};y.collides=function(D){let I=this._data;const X=this._toBBox;if(!e(D,I))return!1;for(Q.clear();I;){for(let ia=0,N=I.children.length;ia<N;ia++){const M=I.children[ia],v=I.leaf?X(M):M;if(e(D,v)){if(I.leaf||P(D,v))return!0;Q.push(M)}}I=Q.pop()}return!1};y.load=function(D){if(!D.length)return this;if(D.length<this._minEntries){for(let I=0,X=D.length;I<X;I++)this.insert(D[I]);return this}D=this._build(D.slice(0,D.length),0,D.length-1,0);if(this._data.children.length)if(this._data.height===D.height)this._splitRoot(this._data,
D);else{if(this._data.height<D.height){const I=this._data;this._data=D;D=I}this._insert(D,this._data.height-D.height-1,!0)}else this._data=D;return this};y.insert=function(D){D&&this._insert(D,this._data.height-1);return this};y.clear=function(){this._data=new z([]);return this};y.remove=function(D){if(!D)return this;let I=this._data,X=null,ia=0,N=!1,M;const v=this._toBBox(D);n.clear();for(x.clear();I||0<n.length;){I||(I=ba.assumeNonNull(n.pop()),X=n.data[n.length-1],ia=x.pop()??0,N=!0);if(I.leaf&&
(M=la.indexOf(I.children,D,I.children.length,I.indexHint),-1!==M)){I.children.splice(M,1);n.push(I);this._condense(n);break}N||I.leaf||!P(I,v)?X?(ia++,I=X.children[ia],N=!1):I=null:(n.push(I),x.push(ia),ia=0,X=I,I=I.children[0])}return this};y.toJSON=function(){return this._data};y.fromJSON=function(D){this._data=D;return this};y._all=function(D,I){for(r.clear();D;){if(!0===D.leaf)for(const X of D.children)I(X);else r.pushArray(D.children);D=r.pop()??null}};y._build=function(D,I,X,ia){var N=X-I+1,
M=this._maxEntries;if(N<=M)return D=new z(D.slice(I,X+1)),U(D,this._toBBox),D;ia||(ia=Math.ceil(Math.log(N)/Math.log(M)),M=Math.ceil(N/M**(ia-1)));const v=new A([]);v.height=ia;N=Math.ceil(N/M);M=N*Math.ceil(Math.sqrt(M));for(p(D,I,X,M,this._compareMinX);I<=X;I+=M){const w=Math.min(I+M-1,X);p(D,I,w,N,this._compareMinY);for(let Z=I;Z<=w;Z+=N)v.children.push(this._build(D,Z,Math.min(Z+N-1,w),ia-1))}U(v,this._toBBox);return v};y._chooseSubtree=function(D,I,X,ia){for(;;){ia.push(I);if(!0===I.leaf||ia.length-
1===X)break;let N=Infinity,M=Infinity,v=void 0;for(let w=0,Z=I.children.length;w<Z;w++){const ja=I.children[w],va=O(ja),Ba=(Math.max(ja.maxX,D.maxX)-Math.min(ja.minX,D.minX))*(Math.max(ja.maxY,D.maxY)-Math.min(ja.minY,D.minY))-va;Ba<M?(M=Ba,N=va<N?va:N,v=ja):Ba===M&&va<N&&(N=va,v=ja)}I=v||I.children[0]}return I};y._insert=function(D,I,X){var ia=this._toBBox;X=X?D:ia(D);n.clear();ia=this._chooseSubtree(X,this._data,I,n);ia.children.push(D);for(h(ia,X);0<=I;)if(n.data[I].children.length>this._maxEntries)this._split(n,
I),I--;else break;this._adjustParentBBoxes(X,n,I)};y._split=function(D,I){const X=D.data[I];var ia=X.children.length;const N=this._minEntries;this._chooseSplitAxis(X,N,ia);(ia=this._chooseSplitIndex(X,N,ia))?(ia=X.children.splice(ia,X.children.length-ia),ia=X.leaf?new z(ia):new A(ia),ia.height=X.height,U(X,this._toBBox),U(ia,this._toBBox),I?D.data[I-1].children.push(ia):this._splitRoot(X,ia)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};y._splitRoot=function(D,
I){this._data=new A([D,I]);this._data.height=D.height+1;U(this._data,this._toBBox)};y._chooseSplitIndex=function(D,I,X){let ia,N,M=void 0;ia=N=Infinity;for(let w=I;w<=X-I;w++){var v=K(D,0,w,this._toBBox);const Z=K(D,w,X,this._toBBox),ja=Math.max(0,Math.min(v.maxX,Z.maxX)-Math.max(v.minX,Z.minX))*Math.max(0,Math.min(v.maxY,Z.maxY)-Math.max(v.minY,Z.minY));v=O(v)+O(Z);ja<ia?(ia=ja,M=w,N=v<N?v:N):ja===ia&&v<N&&(N=v,M=w)}return M};y._chooseSplitAxis=function(D,I,X){const ia=D.leaf?this._compareMinX:k,
N=D.leaf?this._compareMinY:t,M=this._allDistMargin(D,I,X,ia);I=this._allDistMargin(D,I,X,N);M<I&&D.children.sort(ia)};y._allDistMargin=function(D,I,X,ia){D.children.sort(ia);ia=this._toBBox;var N=K(D,0,I,ia);const M=K(D,X-I,X,ia);let v=C(N)+C(M);for(let w=I;w<X-I;w++){const Z=D.children[w];h(N,D.leaf?ia(Z):Z);v+=C(N)}for(X=X-I-1;X>=I;X--)N=D.children[X],h(M,D.leaf?ia(N):N),v+=C(M);return v};y._adjustParentBBoxes=function(D,I,X){for(;0<=X;X--)h(I.data[X],D)};y._condense=function(D){for(let I=D.length-
1;0<=I;I--){const X=D.data[I];if(0===X.children.length)if(0<I){const ia=D.data[I-1],N=ia.children;N.splice(la.indexOf(N,X,N.length,ia.indexHint),1)}else this.clear();else U(X,this._toBBox)}};y._initFormat=function(D){const I=["return a"," - b",";"];this._compareMinX=new Function("a","b",I.join(D[0]));this._compareMinY=new Function("a","b",I.join(D[1]));this._toBBox=new Function("a","return {minX: a"+D[0]+", minY: a"+D[1]+", maxX: a"+D[2]+", maxY: a"+D[3]+"};")};return f._createClass(B)}();const Q=
new R,r=new R,n=new R,x=new R({deallocator:void 0});R=f._createClass(function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity});let J=function(B){function y(){var D=B.apply(this,arguments)||this;D.height=1;D.indexHint=new la.PositionHint;return D}f._inherits(y,B);return f._createClass(y)}(R),z=function(B){function y(D){var I=B.call(this)||this;I.children=D;I.leaf=!0;return I}f._inherits(y,B);return f._createClass(y)}(J),A=function(B){function y(D){var I=B.call(this)||this;I.children=
D;I.leaf=!1;return I}f._inherits(y,B);return f._createClass(y)}(J);l.BBox=R;l.PooledRBush=E;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(l,f){var la={exports:{}};la.exports;(function(ba){(function(R){R=R();void 0!==R&&(ba.exports=R)})(function(){function R(K,h,k,t,O){for(;t>k;){if(600<t-k){var C=t-k+1,P=h-k+1,e=Math.log(C),p=.5*Math.exp(2*e/3);e=.5*Math.sqrt(e*p*(C-p)/C)*(0>P-C/2?-1:1);R(K,h,Math.max(k,
Math.floor(h-P*p/C+e)),Math.min(t,Math.floor(h+(C-P)*p/C+e)),O)}C=K[h];P=k;p=t;fa(K,k,h);for(0<O(K[t],C)&&fa(K,k,t);P<p;){fa(K,P,p);P++;for(p--;0>O(K[P],C);)P++;for(;0<O(K[p],C);)p--}0===O(K[k],C)?fa(K,k,p):(p++,fa(K,p,t));p<=h&&(k=p+1);h<=p&&(t=p-1)}}function fa(K,h,k){var t=K[h];K[h]=K[k];K[k]=t}function U(K,h){return K<h?-1:K>h?1:0}return function(K,h,k,t,O){R(K,h,k||0,t||K.length-1,O||U)}})})(la);f=f.getDefaultExportFromCjs(la.exports);l.quickselect=f})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports",
"../centroid","../OptimizedFeature","../OptimizedGeometry"],function(l,f,la,ba){l.optimizedFeatureQueryEngineAdapter={getObjectId(R){return R.objectId},getAttributes(R){return R.attributes},getAttribute(R,fa){return R.attributes[fa]},cloneWithGeometry(R,fa){return new la.OptimizedFeature(fa,R.attributes,null,R.objectId)},getGeometry(R){return R.geometry},getCentroid(R,fa){null==R.centroid&&(R.centroid=f.getCentroidOptimizedGeometry(new ba,R.geometry,fa.hasZ,fa.hasM));return R.centroid}};Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(l){function f(ba,R,fa,U,K,h,k=1){h=K?h?4:3:h?3:2;let t=fa,O=fa+h,C=0,P=0,e=fa=0,p=0;for(let E=0,Q=U-1;E<Q;E++,t+=h,O+=h){U=R[t];const r=R[t+1],n=R[t+2],x=R[O],J=R[O+1],z=R[O+2];let A=U*J-x*r;e+=A;C+=(U+x)*A;P+=(r+J)*A;K&&(A=U*z-x*n,fa+=(n+z)*A,p+=A);U<ba[0]&&(ba[0]=U);U>ba[1]&&(ba[1]=U);r<ba[2]&&(ba[2]=r);r>ba[3]&&(ba[3]=r);K&&(n<ba[4]&&(ba[4]=n),n>ba[5]&&(ba[5]=n))}0<e*k&&(e*=-1);0<p*k&&
(p*=-1);if(!e)return null;ba=[C,P,.5*e];K&&(ba[3]=fa,ba[4]=.5*p);return ba}function la(ba,R,fa,U,K){K=U?K?4:3:K?3:2;let h=R,k=R+K,t=0,O=0,C=0,P=0;for(let Q=0,r=fa-1;Q<r;Q++,h+=K,k+=K){var e=ba[h];const n=ba[h+1],x=ba[h+2],J=ba[k],z=ba[k+1],A=ba[k+2];if(U){var p=J-e;var E=z-n;const B=A-x;p=Math.sqrt(p*p+E*E+B*B)}else p=J-e,E=z-n,p=Math.sqrt(p*p+E*E);p&&(t+=p,U?(e=[e+.5*(J-e),n+.5*(z-n),x+.5*(A-x)],O+=p*e[0],C+=p*e[1],P+=p*e[2]):(e=[e+.5*(J-e),n+.5*(z-n)],O+=p*e[0],C+=p*e[1]))}return 0<t?U?[O/t,C/t,
P/t]:[O/t,C/t]:0<fa?U?[ba[R],ba[R+1],ba[R+2]]:[ba[R],ba[R+1]]:null}l.getCentroidOptimizedGeometry=function(ba,R,fa,U,K){if(null==R||!R.lengths.length)return null;const h="upperLeft"===K?.originPosition?-1:1;ba.lengths.length&&(ba.lengths.length=0);ba.coords.length&&(ba.coords.length=0);K=ba.coords;const k=[],t=fa?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:O,coords:C}=R,P=fa?U?4:3:U?3:2;let e=0;for(var p of O){const E=f(t,C,e,p,fa,U,h);E&&k.push(E);e+=p*P}k.sort((E,Q)=>{let r=h*E[2]-h*Q[2];0===r&&fa&&(r=E[4]-Q[4]);return r});k.length&&(p=6*k[0][2],K[0]=k[0][0]/p,K[1]=k[0][1]/p,fa&&(p=6*k[0][4],K[2]=0!==p?k[0][3]/p:0),K[0]<t[0]||K[0]>t[1]||K[1]<t[2]||K[1]>t[3]||fa&&(K[2]<t[4]||K[2]>t[5]))&&(K.length=0);if(!K.length)if(R=R.lengths[0]?la(C,0,O[0],fa,U):null)K[0]=R[0],K[1]=R[1],fa&&2<R.length&&
(K[2]=R[2]);else return null;return ba};l.lineCentroid=la;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(l,f,la,ba,R,fa,U,K,h,k,t,O){async function C(A,B,y){if(!A)return null;var {where:D}=A;A.where=D=D&&D.trim();if(!D||/^1 *= *1$/.test(D)||B&&B===D)A.where=null;if(!A.geometry)return A;B=await e(A);A.distance=0;A.units=null;"esriSpatialRelEnvelopeIntersects"===A.spatialRel&&({spatialReference:D}=A.geometry,B=fa.getGeometryExtent(B),B.spatialReference=D);if(B){await O.checkProjectionSupport(B.spatialReference,y);D=B.spatialReference;B=P(B,y)&&U.isExtent(B)?{spatialReference:D,rings:[[[B.xmin,
B.ymin],[B.xmin,B.ymax],[B.xmax,B.ymax],[B.xmax,B.ymin],[B.xmin,B.ymin]]]}:B;D=(await K.normalizeCentralMeridian(U.fromJSON(B)))[0];if(null==D)throw Q;const I="quantizationParameters"in A&&A.quantizationParameters?.tolerance||"maxAllowableOffset"in A&&A.maxAllowableOffset||0;B=I&&P(B,y)?{densificationStep:8*I}:void 0;D=D.toJSON();B=await O.project(D,D.spatialReference,y,B);if(!B)throw Q;B.spatialReference=y;A.geometry=B}return A}function P(A,B){if(!A)return!1;const y=A.spatialReference;return(U.isExtent(A)||
U.isPolygon(A)||U.isPolyline(A))&&!h.equals(y,B)&&!R.canProjectWithoutEngine(y,B)}async function e(A){const {distance:B,units:y}=A,D=A.geometry;if(null==B||"vertexAttributes"in D)return D;var I=D.spatialReference;A=y?E.fromJSON(y):ba.getUnitString(I);I=I&&(h.isGeographic(I)||h.isWebMercator(I))?D:await O.checkProjectionSupport(I,h.WGS84).then(()=>O.project(D,h.WGS84));return(await p())(I.spatialReference,I,B,A)}async function p(){return(await new Promise((A,B)=>l(["../../../geometry/geometryEngineJSON"],
A,B))).geodesicBuffer}const E=new la.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),Q=Object.freeze({}),r=new t,n=new t,x=new t,J={esriGeometryPoint:k.convertToPoint,esriGeometryPolyline:k.convertToPolyline,esriGeometryPolygon:k.convertToPolygon,esriGeometryMultipoint:k.convertToMultipoint},z=(A,B)=>"_geVersion"!==A?B:void 0;f.QUERY_ENGINE_EMPTY_RESULT=
Q;f.cleanFromGeometryEngine=function(A){return A&&"_geVersion"in A?JSON.parse(JSON.stringify(A,z)):A};f.getGeometry=function(A,B,y,D,I,X,ia=B,N=y){const M=B&&ia,v=y&&N;D=null!=D?"coords"in D?D:D.geometry:null;if(null==D)return null;if(I)return B=k.generalizeOptimizedGeometry(n,D,B,y,A,I,ia,N),X&&(B=k.quantizeOptimizedGeometry(x,B,M,v,A,X)),J[A]?.(B,M,v)??null;if(X)return X=k.quantizeOptimizedGeometry(x,D,B,y,A,X,ia,N),J[A]?.(X,M,v)??null;k.removeZMValues(r,D,B,y,ia,N);return J[A]?.(r,M,v)??null};
f.normalizeQuery=async function(A,B,y){const {outFields:D,orderByFields:I,groupByFieldsForStatistics:X,outStatistics:ia}=A;if(D)for(var N=0;N<D.length;N++)D[N]=D[N].trim();if(I)for(N=0;N<I.length;N++)I[N]=I[N].trim();if(X)for(N=0;N<X.length;N++)X[N]=X[N].trim();if(ia)for(N=0;N<ia.length;N++)ia[N].onStatisticField&&(ia[N].onStatisticField=ia[N].onStatisticField.trim());A.geometry&&!A.outSR&&(A.outSR=A.geometry.spatialReference);return C(A,B,y)};f.normalizeQueryLike=C;f.transformCentroid=function(A,
B,y,D=A.hasZ,I=A.hasM){if(null==B)return null;const X=A.hasZ&&D,ia=A.hasM&&I;return y?(A=k.quantizeOptimizedGeometry(x,B,A.hasZ,A.hasM,"esriGeometryPoint",y,D,I),k.convertToPoint(A,X,ia)):k.convertToPoint(B,X,ia)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(l,f,la,ba,R,fa,U,K,h,k,t,O,C,P,e,p,E,Q,r,n,x,J,z,A,B,y){function D(){return!!hb&&p.isLoaded()}function I(S){null==b&&(b=Promise.all([p.load(),(new Promise((ha,W)=>l(["../chunks/geometryEngineBase"],ha,W))).then(ha=>ha.geometryEngineBase),new Promise((ha,W)=>l(["./geometryAdapters/hydrated"],ha,W))]));return b.then(([,ha,{hydratedAdapter:W}])=>{fa.throwIfAborted(S);lb=W;hb=ha.default;hb._enableProjection(p.pe);Ob.notify()})}function X(S,ha,W=null,oa=null){return Array.isArray(S)?0===S.length?
[]:ia(lb,S,S[0].spatialReference,ha,W,oa):ia(lb,[S],S.spatialReference,ha,W,oa)[0]}function ia(S,ha,W,oa,Ca=null,Aa=null){if(null==W||null==oa)return ha;if(w(W,oa,Ca))return ha.map(La=>Z(La,W,oa));if(null==Ca){const La=z.cacheKey(W,oa);void 0!==fb[La]?Ca=fb[La]:(Ca=M(W,oa,void 0),null==Ca&&(Ca=new z),fb[La]=Ca)}if(null==hb||null==S)throw new Jb;return null!=Aa?hb._project(S,ha,W,oa,Ca,Aa):hb._project(S,ha,W,oa,Ca)}function N(S,ha){if(!D())for(const W of S)if(null!=W&&!A.equals(W.spatialReference,
ha)&&A.isValid(W.spatialReference)&&A.isValid(ha)&&!w(W.spatialReference,ha))return K.trackAccess(Ob),{pending:I(),geometries:null};return{pending:null,geometries:S.map(W=>null==W?null:A.equals(W.spatialReference,ha)?W:A.isValid(W.spatialReference)&&A.isValid(ha)?v(W,ha):null)}}function M(S,ha,W=null){if(null==S||null==ha)return null;if(null==hb||null==lb)throw new Jb;S=hb._getTransformation(lb,S,ha,W,W?.spatialReference);return null!==S?z.fromGE(S):null}function v(S,ha){try{const W=X(S,ha);if(null==
W)return null;"xmin"in S&&"xmin"in W&&(W.zmin=S.zmin,W.zmax=S.zmax);const oa=y.getGeometryZScaler(W.type,S.spatialReference,ha);null!=oa&&oa(W);return W}catch(W){if(!(W instanceof Jb))throw W;return null}}function w(S,ha,W){return W?!1:A.equals(S,ha)?!0:A.isValid(S)&&A.isValid(ha)&&!!Wa(S,ha,Zb)}function Z(S,ha,W){return S?"x"in S?ja(S,ha,new E,W,0):"xmin"in S?Fa(S,ha,new P,W,0):"rings"in S?Ea(S,ha,new Q,W,0):"paths"in S?Ba(S,ha,new r,W,0):"points"in S?va(S,ha,new e,W,0):null:null}function ja(S,ha,
W,oa,Ca){Ya[0]=S.x;Ya[1]=S.y;const Aa=S.z;Ya[2]=void 0!==Aa?Aa:Ca;if(!Sa(Ya,ha,0,Ya,oa,0,1))return null;W.x=Ya[0];W.y=Ya[1];W.spatialReference=oa;void 0===Aa?(W.z=void 0,W.hasZ=!1):(W.z=Ya[2],W.hasZ=!0);void 0===S.m?(W.m=void 0,W.hasM=!1):(W.m=S.m,W.hasM=!0);return W}function va(S,ha,W,oa,Ca){const {points:Aa,hasZ:La,hasM:Ta}=S;S=[];const nb=Aa.length,ob=[];for(var mb of Aa)ob.push(mb[0],mb[1],La?mb[2]:Ca);if(!Sa(ob,ha,0,ob,oa,0,nb))return null;for(ha=0;ha<nb;++ha){Ca=3*ha;mb=ob[Ca];const wb=ob[Ca+
1];La&&Ta?S.push([mb,wb,ob[Ca+2],Aa[ha][3]]):La?S.push([mb,wb,ob[Ca+2]]):Ta?S.push([mb,wb,Aa[ha][2]]):S.push([mb,wb])}W.points=S;W.spatialReference=oa;W.hasZ=La;W.hasM=Ta;return W}function Ba(S,ha,W,oa,Ca){const {paths:Aa,hasZ:La,hasM:Ta}=S;S=[];if(!Va(Aa,La??!1,Ta??!1,ha,S,oa,Ca))return null;W.paths=S;W.spatialReference=oa;W.hasZ=La;W.hasM=Ta;return W}function Ea(S,ha,W,oa,Ca){const {rings:Aa,hasZ:La,hasM:Ta}=S;S=[];if(!Va(Aa,La??!1,Ta??!1,ha,S,oa,Ca))return null;W.rings=S;W.spatialReference=oa;
W.hasZ=La;W.hasM=Ta;return W}function Fa(S,ha,W,oa,Ca){const {xmin:Aa,ymin:La,xmax:Ta,ymax:nb,hasZ:ob,hasM:mb}=S;if(!Ma(Aa,La,ob?S.zmin:Ca,ha,Ya,oa))return null;W.xmin=Ya[0];W.ymin=Ya[1];ob&&(W.zmin=Ya[2]);if(!Ma(Ta,nb,ob?S.zmax:Ca,ha,Ya,oa))return null;W.xmax=Ya[0];W.ymax=Ya[1];ob&&(W.zmax=Ya[2]);mb&&(W.mmin=S.mmin,W.mmax=S.mmax);W.spatialReference=oa;return W}function Ma(S,ha,W,oa,Ca,Aa){ib[0]=S;ib[1]=ha;ib[2]=W;return Sa(ib,oa,0,Ca,Aa,0,1)}function Ha(S,ha,W,oa){if(null==ha||null==oa||2>S.length)return!1;
2===S.length&&(ib[0]=S[0],ib[1]=S[1],ib[2]=0,S=ib);return Sa(S,ha,0,W,oa,0,1)}function Ua(S,ha,W){if(null==ha)return!1;ha=db(ha,Sb);ha=yb[ha][ka.WGS84_COMPARABLE_LON_LAT];if(null==ha)return!1;ha(S,0,ib,0);W!==ib&&(W[0]=ib[0],W[1]=ib[1],2<W.length&&(W[2]=ib[2]));return!0}function Sa(S,ha,W,oa,Ca,Aa,La=1){ha=Wa(ha,Ca,Zb);if(null==ha)return!1;if(ha===c){if(S===oa&&W===Aa)return!0;La=W+3*La;for(let Ta=W,nb=Aa;Ta<La;Ta++,nb++)oa[nb]=S[Ta];return!0}La=W+3*La;for(let Ta=W,nb=Aa;Ta<La;Ta+=3,nb+=3)ha(S,Ta,
oa,nb);return!0}function Va(S,ha,W,oa,Ca,Aa,La=0){const Ta=[];for(const nb of S)for(const ob of nb)Ta.push(ob[0],ob[1],ha?ob[2]:La);if(!Sa(Ta,oa,0,Ta,Aa,0,Ta.length/3))return!1;oa=0;Ca.length=0;for(const nb of S){S=[];for(const ob of nb)ha&&W?S.push([Ta[oa++],Ta[oa++],Ta[oa++],ob[3]]):ha?S.push([Ta[oa++],Ta[oa++],Ta[oa++]]):(W?S.push([Ta[oa++],Ta[oa++],ob[2]]):S.push([Ta[oa++],Ta[oa++]]),oa++);Ca.push(S)}return!0}function eb(S,ha,W,oa){ha=oa+ha;if(ha<oa/2||W>ha)return Number.MAX_VALUE;S=Math.abs(Db*
S)+Math.asin(W/ha);return S>=Math.PI/2?Number.MAX_VALUE:W/Math.cos(S)}function kb(S,ha,W){const oa=Math.sin(S);S=Math.cos(S);const Ca=Math.sin(ha);ha=Math.cos(ha);W[0]=-oa;W[4]=-Ca*S;W[8]=ha*S;W[12]=0;W[1]=S;W[5]=-Ca*oa;W[9]=ha*oa;W[13]=0;W[2]=0;W[6]=ha;W[10]=Ca;W[14]=0;W[3]=0;W[7]=0;W[11]=0;W[15]=1;return W}function jb(S,ha,W){kb(S,ha,W);k.transpose(W,W);return W}function db(S,ha){if(!S)return ka.UNKNOWN;if(ha.spatialReference===S)return ha.spatialReferenceId;ha.spatialReference=S;"metersPerUnit"in
ha&&(ha.metersPerUnit=U.getMetersPerUnitForSR(S,1));return S.wkt===C.SphericalECEFSpatialReferenceLike.wkt?ha.spatialReferenceId=ka.SPHERICAL_ECEF:A.isWGS84(S)?ha.spatialReferenceId=ka.WGS84:A.isWebMercator(S)?ha.spatialReferenceId=ka.WEB_MERCATOR:A.isPlateCarree(S)?ha.spatialReferenceId=ka.PLATE_CARREE:S.wkt===C.WGS84ECEFSpatialReferenceLike.wkt?ha.spatialReferenceId=ka.WGS84_ECEF:S.wkid===B.SupportedGCSWkids.CGCS2000?ha.spatialReferenceId=ka.CGCS2000:S.wkt===C.SphericalPCPFMarsLike.wkt?ha.spatialReferenceId=
ka.SPHERICAL_MARS_PCPF:S.wkt===C.SphericalPCPFMoonLike.wkt?ha.spatialReferenceId=ka.SPHERICAL_MOON_PCPF:A.isMars(S)?ha.spatialReferenceId=ka.GCSMARS2000:A.isMoon(S)?ha.spatialReferenceId=ka.GCSMOON2000:ha.spatialReferenceId=ka.UNKNOWN}function c(S,ha,W,oa){S!==W&&(W[oa++]=S[ha++],W[oa++]=S[ha++],W[oa]=S[ha])}function q(S,ha,W,oa){W[oa++]=Pb*(S[ha++]/x.earth.radius);W[oa++]=Pb*(Math.PI/2-2*Math.atan(Math.exp(-S[ha++]/x.earth.radius)));W[oa]=S[ha]}function da(S,ha,W,oa){q(S,ha,W,oa);sa(W,oa,W,oa)}function F(S,
ha,W,oa){q(S,ha,W,oa);Oa(W,oa,W,oa)}function aa(S,ha,W,oa,Ca){var Aa=.4999999*Math.PI;Aa=R.clamp(Db*S[ha+1],-Aa,Aa);Aa=Math.sin(Aa);W[oa++]=Db*S[ha]*Ca.radius;W[oa++]=Ca.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));W[oa]=S[ha+2]}function m(S,ha,W,oa){aa(S,ha,W,oa,x.earth)}function H(S,ha,W,oa){W[oa]=S[ha]*gc;W[oa+1]=S[ha+1]*gc;W[oa+2]=S[ha+2]}function T(S,ha,W,oa){W[oa]=S[ha]*Tb;W[oa+1]=S[ha+1]*Tb;W[oa+2]=S[ha+2]}function V(S,ha,W,oa){q(S,ha,W,oa);H(W,oa,W,oa)}function ea(S,ha,W,oa,Ca){Ca+=S[ha+2];const Aa=
Db*S[ha+1];S=Db*S[ha];ha=Math.cos(Aa);W[oa++]=Math.cos(S)*ha*Ca;W[oa++]=Math.sin(S)*ha*Ca;W[oa]=Math.sin(Aa)*Ca}function na(S,ha,W,oa){ea(S,ha,W,oa,x.moon.radius)}function pa(S,ha,W,oa){ea(S,ha,W,oa,x.mars.radius)}function sa(S,ha,W,oa){ea(S,ha,W,oa,x.earth.radius)}function ua(S,ha,W,oa,Ca){var Aa=S[ha];const La=S[ha+1];ha=S[ha+2];S=Math.sqrt(Aa*Aa+La*La+ha*ha);ha=R.asinClamped(ha/(0===S?1:S));Aa=Math.atan2(La,Aa);W[oa++]=Pb*Aa;W[oa++]=Pb*ha;W[oa]=S-Ca}function Da(S,ha,W,oa){ua(S,ha,W,oa,x.moon.radius)}
function za(S,ha,W,oa){ua(S,ha,W,oa,x.mars.radius)}function ya(S,ha,W,oa){ua(S,ha,W,oa,x.earth.radius)}function Qa(S,ha,W,oa){ya(S,ha,W,oa);m(W,oa,W,oa)}function Ka(S,ha,W,oa){ya(S,ha,W,oa);Oa(W,oa,W,oa)}function Oa(S,ha,W,oa){var Ca=x.earth;const Aa=Db*S[ha];var La=Db*S[ha+1];S=S[ha+2];ha=Math.sin(La);La=Math.cos(La);const Ta=Ca.radius/Math.sqrt(1-Ca.eccentricitySquared*ha*ha);W[oa++]=(Ta+S)*La*Math.cos(Aa);W[oa++]=(Ta+S)*La*Math.sin(Aa);W[oa++]=(Ta*(1-Ca.eccentricitySquared)+S)*ha}function Pa(S,
ha,W,oa){var Ca=J.earthEllipsoidConstants,Aa=S[ha],La=S[ha+1];S=S[ha+2];let Ta;ha=Math.abs(S);var nb=Aa*Aa+La*La;var ob=Math.sqrt(nb);var mb=nb+S*S;var wb=Math.sqrt(mb);Aa=Math.atan2(La,Aa);var Gb=S*S/mb;mb=nb/mb;La=Ca.a2/wb;nb=Ca.a3-Ca.a4/wb;.3<mb?(Gb=ha/wb*(1+mb*(Ca.a1+La+Gb*nb)/wb),wb=Math.asin(Gb),La=Gb*Gb,mb=Math.sqrt(1-La)):(mb=ob/wb*(1-Gb*(Ca.a5-La-mb*nb)/wb),wb=Math.acos(mb),La=1-mb*mb,Gb=Math.sqrt(La));Ta=1-x.earth.eccentricitySquared*La;La=x.earth.radius/Math.sqrt(Ta);Ca=Ca.a6*La;La=ob-
La*mb;nb=ha-Ca*Gb;ha=mb*La+Gb*nb;ob=mb*nb-Gb*La;Ca=ob/(Ca/Ta+ha);wb+=Ca;0>S&&(wb=-wb);W[oa++]=Pb*Aa;W[oa++]=Pb*wb;W[oa]=ha+ob*Ca/2}function Ja(S,ha,W,oa){Pa(S,ha,W,oa);sa(W,oa,W,oa)}function Ra(S,ha,W,oa){Pa(S,ha,W,oa);m(W,oa,W,oa)}function Wa(S,ha,W=ub()){return null==S||null==ha?null:ta(S,ha,W).projector}function ta(S,ha,W){if(null==S||null==ha||W.source.spatialReference===S&&W.dest.spatialReference===ha)return W;const oa=db(S,W.source),Ca=db(ha,W.dest);oa===ka.UNKNOWN&&Ca===ka.UNKNOWN?A.equals(S,
ha)?W.projector=c:W.projector=null:W.projector=yb[oa][Ca];return W}function ub(){return{source:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,metersPerUnit:1},projector:c}}let hb=null,lb=null,b=null,fb={};const Ob=new h.SimpleObservable;let Jb=function(S){function ha(){return S.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}la._inherits(ha,S);return la._createClass(ha)}(ba);
var ka;(function(S){S[S.UNKNOWN=0]="UNKNOWN";S[S.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";S[S.WGS84=2]="WGS84";S[S.WEB_MERCATOR=3]="WEB_MERCATOR";S[S.WGS84_ECEF=4]="WGS84_ECEF";S[S.CGCS2000=5]="CGCS2000";S[S.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";S[S.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";S[S.GCSMARS2000=8]="GCSMARS2000";S[S.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";S[S.GCSMOON2000=10]="GCSMOON2000";S[S.LON_LAT=11]="LON_LAT";S[S.PLATE_CARREE=12]="PLATE_CARREE"})(ka||(ka={}));const gc=
x.earth.radius*Math.PI/180,Tb=180/(x.earth.radius*Math.PI),yb={[ka.WGS84]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:sa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:m,[ka.PLATE_CARREE]:H,[ka.WGS84]:c,[ka.WGS84_ECEF]:Oa},[ka.CGCS2000]:{[ka.CGCS2000]:c,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:sa,
[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:H,[ka.WGS84]:null,[ka.WGS84_ECEF]:Oa},[ka.GCSMARS2000]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:c,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:pa,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.GCSMOON2000]:{[ka.CGCS2000]:null,
[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:c,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:na,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.WEB_MERCATOR]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:q,[ka.WGS84_COMPARABLE_LON_LAT]:q,[ka.SPHERICAL_ECEF]:da,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:c,[ka.PLATE_CARREE]:V,[ka.WGS84]:q,[ka.WGS84_ECEF]:F},[ka.WGS84_ECEF]:{[ka.CGCS2000]:Pa,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:Pa,[ka.WGS84_COMPARABLE_LON_LAT]:Pa,[ka.SPHERICAL_ECEF]:Ja,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Ra,[ka.PLATE_CARREE]:function(S,ha,W,oa){Pa(S,ha,W,oa);H(W,oa,W,oa)},[ka.WGS84]:Pa,[ka.WGS84_ECEF]:c},[ka.SPHERICAL_ECEF]:{[ka.CGCS2000]:ya,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,
[ka.LON_LAT]:ya,[ka.WGS84_COMPARABLE_LON_LAT]:ya,[ka.SPHERICAL_ECEF]:c,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Qa,[ka.PLATE_CARREE]:function(S,ha,W,oa){ya(S,ha,W,oa);H(W,oa,W,oa)},[ka.WGS84]:ya,[ka.WGS84_ECEF]:Ka},[ka.SPHERICAL_MARS_PCPF]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:za,[ka.GCSMOON2000]:null,[ka.LON_LAT]:za,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:c,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.SPHERICAL_MOON_PCPF]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:Da,[ka.LON_LAT]:Da,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:c,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.UNKNOWN]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:null,
[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:c,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.LON_LAT]:{[ka.CGCS2000]:c,[ka.GCSMARS2000]:c,[ka.GCSMOON2000]:c,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:sa,[ka.SPHERICAL_MARS_PCPF]:pa,[ka.SPHERICAL_MOON_PCPF]:na,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:m,[ka.PLATE_CARREE]:H,[ka.WGS84]:c,[ka.WGS84_ECEF]:Oa},
[ka.WGS84_COMPARABLE_LON_LAT]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:sa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:H,[ka.WGS84]:c,[ka.WGS84_ECEF]:Oa},[ka.PLATE_CARREE]:{[ka.CGCS2000]:T,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:T,[ka.WGS84_COMPARABLE_LON_LAT]:T,[ka.SPHERICAL_ECEF]:function(S,ha,W,oa){T(S,ha,W,oa);sa(W,
oa,W,oa)},[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:function(S,ha,W,oa){T(S,ha,W,oa);m(W,oa,W,oa)},[ka.PLATE_CARREE]:c,[ka.WGS84]:T,[ka.WGS84_ECEF]:function(S,ha,W,oa){T(S,ha,W,oa);Oa(W,oa,W,oa)}}},Sb={spatialReference:null,spatialReferenceId:ka.UNKNOWN},Ub={spatialReference:null,spatialReferenceId:ka.UNKNOWN},Zb=ub(),hc=ub(),Db=R.deg2rad(1),Pb=R.rad2deg(1),ib=O.create(),Fb=O.create(),Qb=O.create(),Ya=O.create(),Hb=O.create();f.canProjectToWGS84ComparableLonLat=
function(S){if(null==S)return!1;S=db(S,Sb);return!!yb[S][ka.WGS84_COMPARABLE_LON_LAT]};f.canProjectWithoutEngine=w;f.computeENUToSphericalPCPFLocalRotation=kb;f.computeSphericalPCPFToENULocalRotation=jb;f.computeTranslationToOriginAndRotation=function(S,ha,W,oa){if(null==S||null==oa)return!1;var Ca=db(S,Sb),Aa=db(oa,Ub);if(Ca===Aa&&Aa!==ka.SPHERICAL_ECEF&&Aa!==ka.SPHERICAL_MARS_PCPF&&Aa!==ka.SPHERICAL_MOON_PCPF&&(Ca!==ka.UNKNOWN||A.equals(S,oa)))return k.fromTranslation(W,ha),!0;if(Aa===ka.SPHERICAL_ECEF||
Aa===ka.SPHERICAL_MARS_PCPF||Aa===ka.SPHERICAL_MOON_PCPF){Ca=yb[Ca][ka.LON_LAT];Aa=yb[ka.LON_LAT][Aa];if(null==Ca||null==Aa)return!1;Ca(ha,0,Fb,0);Aa(Fb,0,Qb,0);kb(Db*Fb[0],Db*Fb[1],W);W[12]=Qb[0];W[13]=Qb[1];W[14]=Qb[2];return!0}if((Aa===ka.WEB_MERCATOR||Aa===ka.PLATE_CARREE)&&(Ca===ka.WGS84||Ca===ka.CGCS2000&&Aa===ka.PLATE_CARREE||Ca===ka.SPHERICAL_ECEF||Ca===ka.WEB_MERCATOR)){S=yb[Ca][ka.LON_LAT];Aa=yb[ka.LON_LAT][Aa];if(null==S||null==Aa)return!1;S(ha,0,Fb,0);Aa(Fb,0,Qb,0);Ca===ka.SPHERICAL_ECEF?
jb(Db*Fb[0],Db*Fb[1],W):k.identity(W);W[12]=Qb[0];W[13]=Qb[1];W[14]=Qb[2];return!0}return!1};f.getProjectorName=function(S,ha){switch(Wa(S,ha,Zb)){case c:return"copy3";case sa:return"wgs84ToSphericalECEF";case m:return"wgs84ToWebMercator";case H:return"wgs84ToPlateCarree";case Oa:return"wgs84ToWGS84ECEF";case q:return"webMercatorToWGS84";case da:return"webMercatorToSphericalECEF";case F:return"webMercatorToWGS84ECEF";case V:return"webMercatorToPlateCarree";case Pa:return"wgs84ECEFToWGS84";case Ja:return"wgs84ECEFToSphericalECEF";
case Ra:return"wgs84ECEFToWebMercator";case ya:return"sphericalECEFToWGS84";case Qa:return"sphericalECEFToWebMercator";case za:return"sphericalMarsPCPFToMars2000";case Da:return"sphericalMoonPCPFToMoon2000";case Ka:return"sphericalECEFToWGS84ECEF";case pa:return"mars2000ToSphericalPCPF";case na:return"moon2000ToSphericalPCPF";default:return null}};f.getTransformation=M;f.getTransformations=function(S,ha,W=null){if(null==hb||null==lb)throw new Jb;S=hb._getTransformationBySuitability(lb,S,ha,W,W?.spatialReference);
if(null!==S){ha=[];for(const oa of S)ha.push(z.fromGE(oa));return ha}return[]};f.initializeProjection=async function(S,ha,W,oa){if(D())return fa.waitTick(oa);if(Array.isArray(S))for(const {source:Ca,dest:Aa,geographicTransformation:La}of S){if(!w(Ca,Aa,La))return I(oa)}else if(!w(S,ha,W))return I(oa);return fa.waitTick(oa)};f.isLoaded=D;f.load=I;f.localLinearScaleFactors=function(S,ha,W,oa){if(null==ha||null==oa)return!1;const Ca=db(ha,Sb);var Aa=db(oa,Ub);if(Ca===Aa&&Ca!==ka.UNKNOWN||A.equals(ha,
oa))return W[0]=1,W[1]=1,W[2]=1,!0;if(Ca===ka.SPHERICAL_ECEF){ha=t.length(S);S=ha/Math.sqrt(S[0]*S[0]+S[1]*S[1]);ha/=x.earth.radius;if(Aa===ka.WEB_MERCATOR)return W[0]=S*ha,W[1]=S*ha,W[2]=1,!0;if(Aa===ka.WGS84||Aa===ka.CGCS2000)return Aa=Tb,W[0]=Aa*S*ha,W[1]=Aa*ha,W[2]=1,!0}else if(Ca===ka.PLATE_CARREE){if(Aa===ka.WGS84||Aa===ka.CGCS2000)return W[0]=Tb,W[1]=Tb,W[2]=1,!0;if(Aa===ka.WEB_MERCATOR)return Aa=S[1]/x.earth.radius,W[0]=1,W[1]=1/Math.cos(Aa),W[2]=1,!0}return!1};f.lonLatToSphericalPCPF=function(S,
ha,W,oa){const Ca=Math.cos(W);S[0]=Math.cos(ha)*Ca*oa;S[1]=Math.sin(ha)*Ca*oa;S[2]=Math.sin(W)*oa};f.lonLatToWebMercatorComparable=aa;f.project=X;f.projectBoundingRect=function(S,ha,W,oa){if(null==S)return!1;if(A.equals(ha,oa))return n.copy(W,S),!0;ib[0]=S[0];ib[1]=S[1];ib[2]=0;if(!Sa(ib,ha,0,ib,oa,0,1))return!1;W[0]=ib[0];W[1]=ib[1];ib[0]=S[2];ib[1]=S[3];ib[2]=0;if(!Sa(ib,ha,0,ib,oa,0,1))return!1;W[2]=ib[0];W[3]=ib[1];return!0};f.projectBoundingSphere=function(S,ha,W,oa){if(null==ha||null==oa)return!1;
ha=ta(ha,oa,hc);if(ha.projector===c)return W[0]=S[0],W[1]=S[1],W[2]=S[2],W[3]=S[3],!0;if(null==ha.projector)return!1;const {source:Ca,dest:Aa}=ha;if(Aa.spatialReferenceId===ka.WEB_MERCATOR){ha=yb[Ca.spatialReferenceId][ka.WGS84];if(null==ha)return!1;ha(S,0,Fb,0);m(Fb,0,W,0);W[3]=eb(Fb[1],S[2],S[3],x.earth.radius);return!0}if(Ca.spatialReferenceId!==ka.WGS84&&Ca.spatialReferenceId!==ka.CGCS2000||Aa.spatialReferenceId!==ka.PLATE_CARREE)ha.projector(S,0,W,0),W[3]=S[3]*(Ca.metersPerUnit??1)/(Aa.metersPerUnit??
1);else{oa=yb[ka.SPHERICAL_ECEF][ka.PLATE_CARREE];let La=S[3];null!=yb[Ca.spatialReferenceId][ka.SPHERICAL_ECEF]&&null!=oa&&(La=eb(S[1],S[2],S[3],x.earth.radius));ha.projector(S,0,W,0);W[3]=La}return!0};f.projectBuffer=Sa;f.projectDirection=function(S,ha,W,oa,Ca){t.copy(Ya,S);t.add(Hb,S,ha);Ha(Ya,W,Ya,Ca);Ha(Hb,W,Hb,Ca);t.subtract(oa,Hb,Ya);t.normalize(oa,oa)};f.projectExtent=function(S,ha,W=ha.spatialReference,oa=0){return null!=S.spatialReference&&null!=W&&null!=Fa(S,S.spatialReference,ha,W,oa)};
f.projectMany=ia;f.projectMultipoint=function(S,ha,W=ha.spatialReference,oa=0){return null!=S.spatialReference&&null!=W&&null!=va(S,S.spatialReference,ha,W,oa)};f.projectOrLoad=function(S,ha){S=N([S],ha);return null!=S.pending?{pending:S.pending,geometry:null}:null!=S.geometries?{pending:null,geometry:S.geometries[0]}:{pending:null,geometry:null}};f.projectOrLoadMany=N;f.projectPoint=function(S,ha,W=ha.spatialReference,oa=0){return null!=W&&null!=S.spatialReference&&null!=ja(S,S.spatialReference,
ha,W,oa)};f.projectPointToVector=function(S,ha,W,oa=0){Ya[0]=S.x;Ya[1]=S.y;const Ca=S.z;Ya[2]=void 0!==Ca?Ca:oa;return Sa(Ya,S.spatialReference,0,ha,W,0,1)};f.projectPointToWGS84ComparableLonLat=function(S,ha){Ya[0]=S.x;Ya[1]=S.y;const W=S.z;Ya[2]=void 0!==W?W:0;return Ua(Ya,S.spatialReference,ha)};f.projectPolygon=function(S,ha,W=ha.spatialReference,oa=0){return null!=S.spatialReference&&null!=W&&null!=Ea(S,S.spatialReference,ha,W,oa)};f.projectPolygonToWGS84ComparableLonLat=function({hasZ:S,spatialReference:ha,
rings:W},oa,Ca=0){ha=db(ha,Sb);ha=yb[ha][ka.WGS84_COMPARABLE_LON_LAT];if(null==ha)return!1;S=S?Aa=>Aa:Aa=>t.set(Ya,Aa[0],Aa[1],Ca);for(const Aa of W){W=[];for(const La of Aa){const Ta=[0,0,Ca];ha(S(La),0,Ta,0);W.push(Ta)}oa.push(W)}return!0};f.projectPolyline=function(S,ha,W=ha.spatialReference,oa=0){return null!=S.spatialReference&&null!=W&&null!=Ba(S,S.spatialReference,ha,W,oa)};f.projectPolylineToWGS84ComparableLonLat=function({hasZ:S,spatialReference:ha,paths:W},oa,Ca=0){ha=db(ha,Sb);ha=yb[ha][ka.WGS84_COMPARABLE_LON_LAT];
if(null==ha)return!1;S=S?Aa=>Aa:Aa=>t.set(Ya,Aa[0],Aa[1],Ca);for(const Aa of W){W=[];for(const La of Aa){const Ta=[0,0,Ca];ha(S(La),0,Ta,0);W.push(Ta)}oa.push(W)}return!0};f.projectVectorToDehydratedPoint=function(S,ha,W){return Sa(S,ha,0,Ya,W.spatialReference,0,1)?(W.x=Ya[0],W.y=Ya[1],W.z=Ya[2],W):null};f.projectVectorToPoint=function(S,ha,W){if(null==ha||null==W)return null;const oa=new E({spatialReference:W});return Sa(S,ha,0,Ya,W,0,1)?(oa.x=Ya[0],oa.y=Ya[1],oa.z=Ya[2],oa):null};f.projectVectorToVector=
Ha;f.projectVectorToWGS84ComparableLonLat=function(S,ha,W){return Ua(S,ha,W)};f.projectWithoutEngine=Z;f.projectXYZToVector=Ma;f.sphericalPCPFtoLonLatElevation=ua;f.test={get loadPromise(){return b}};f.tryProjectWithZConversion=v;f.unload=function(){b=lb=hb=null;fb={}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(l,f,la){la=
function(ba){function R(){return ba.apply(this,arguments)||this}f._inherits(R,ba);R.prototype.notify=function(){var fa=this._observers;if(fa&&0<fa.length){fa=fa.slice();for(const U of fa)U.onInvalidated(),U.onCommitted()}};return f._createClass(R)}(la.ObservableBase);l.SimpleObservable=la;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(l,f,la){function ba(c,q){c[0]=q[0];c[1]=q[1];c[2]=q[2];c[3]=q[3];c[4]=
q[4];c[5]=q[5];c[6]=q[6];c[7]=q[7];c[8]=q[8];c[9]=q[9];c[10]=q[10];c[11]=q[11];c[12]=q[12];c[13]=q[13];c[14]=q[14];c[15]=q[15];return c}function R(c,q,da,F,aa,m,H,T,V,ea,na,pa,sa,ua,Da,za,ya){c[0]=q;c[1]=da;c[2]=F;c[3]=aa;c[4]=m;c[5]=H;c[6]=T;c[7]=V;c[8]=ea;c[9]=na;c[10]=pa;c[11]=sa;c[12]=ua;c[13]=Da;c[14]=za;c[15]=ya;return c}function fa(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function U(c,q){if(c===q){const da=
q[1],F=q[2],aa=q[3],m=q[6],H=q[7],T=q[11];c[1]=q[4];c[2]=q[8];c[3]=q[12];c[4]=da;c[6]=q[9];c[7]=q[13];c[8]=F;c[9]=m;c[11]=q[14];c[12]=aa;c[13]=H;c[14]=T}else c[0]=q[0],c[1]=q[4],c[2]=q[8],c[3]=q[12],c[4]=q[1],c[5]=q[5],c[6]=q[9],c[7]=q[13],c[8]=q[2],c[9]=q[6],c[10]=q[10],c[11]=q[14],c[12]=q[3],c[13]=q[7],c[14]=q[11],c[15]=q[15];return c}function K(c,q){h(c,q)||fa(c);return c}function h(c,q){const da=q[0],F=q[1],aa=q[2],m=q[3],H=q[4],T=q[5],V=q[6],ea=q[7],na=q[8],pa=q[9],sa=q[10],ua=q[11],Da=q[12],
za=q[13],ya=q[14];q=q[15];const Qa=da*T-F*H,Ka=da*V-aa*H,Oa=da*ea-m*H,Pa=F*V-aa*T,Ja=F*ea-m*T,Ra=aa*ea-m*V,Wa=na*za-pa*Da,ta=na*ya-sa*Da,ub=na*q-ua*Da,hb=pa*ya-sa*za,lb=pa*q-ua*za,b=sa*q-ua*ya;let fb=Qa*b-Ka*lb+Oa*hb+Pa*ub-Ja*ta+Ra*Wa;if(!fb)return null;fb=1/fb;c[0]=(T*b-V*lb+ea*hb)*fb;c[1]=(aa*lb-F*b-m*hb)*fb;c[2]=(za*Ra-ya*Ja+q*Pa)*fb;c[3]=(sa*Ja-pa*Ra-ua*Pa)*fb;c[4]=(V*ub-H*b-ea*ta)*fb;c[5]=(da*b-aa*ub+m*ta)*fb;c[6]=(ya*Oa-Da*Ra-q*Ka)*fb;c[7]=(na*Ra-sa*Oa+ua*Ka)*fb;c[8]=(H*lb-T*ub+ea*Wa)*fb;c[9]=
(F*ub-da*lb-m*Wa)*fb;c[10]=(Da*Ja-za*Oa+q*Qa)*fb;c[11]=(pa*Oa-na*Ja-ua*Qa)*fb;c[12]=(T*ta-H*hb-V*Wa)*fb;c[13]=(da*hb-F*ta+aa*Wa)*fb;c[14]=(za*Ka-Da*Pa-ya*Qa)*fb;c[15]=(na*Pa-pa*Ka+sa*Qa)*fb;return c}function k(c,q){const da=q[0],F=q[1],aa=q[2],m=q[3],H=q[4],T=q[5],V=q[6],ea=q[7],na=q[8],pa=q[9],sa=q[10],ua=q[11],Da=q[12],za=q[13],ya=q[14];q=q[15];c[0]=T*(sa*q-ua*ya)-pa*(V*q-ea*ya)+za*(V*ua-ea*sa);c[1]=-(F*(sa*q-ua*ya)-pa*(aa*q-m*ya)+za*(aa*ua-m*sa));c[2]=F*(V*q-ea*ya)-T*(aa*q-m*ya)+za*(aa*ea-m*V);
c[3]=-(F*(V*ua-ea*sa)-T*(aa*ua-m*sa)+pa*(aa*ea-m*V));c[4]=-(H*(sa*q-ua*ya)-na*(V*q-ea*ya)+Da*(V*ua-ea*sa));c[5]=da*(sa*q-ua*ya)-na*(aa*q-m*ya)+Da*(aa*ua-m*sa);c[6]=-(da*(V*q-ea*ya)-H*(aa*q-m*ya)+Da*(aa*ea-m*V));c[7]=da*(V*ua-ea*sa)-H*(aa*ua-m*sa)+na*(aa*ea-m*V);c[8]=H*(pa*q-ua*za)-na*(T*q-ea*za)+Da*(T*ua-ea*pa);c[9]=-(da*(pa*q-ua*za)-na*(F*q-m*za)+Da*(F*ua-m*pa));c[10]=da*(T*q-ea*za)-H*(F*q-m*za)+Da*(F*ea-m*T);c[11]=-(da*(T*ua-ea*pa)-H*(F*ua-m*pa)+na*(F*ea-m*T));c[12]=-(H*(pa*ya-sa*za)-na*(T*ya-V*
za)+Da*(T*sa-V*pa));c[13]=da*(pa*ya-sa*za)-na*(F*ya-aa*za)+Da*(F*sa-aa*pa);c[14]=-(da*(T*ya-V*za)-H*(F*ya-aa*za)+Da*(F*V-aa*T));c[15]=da*(T*sa-V*pa)-H*(F*sa-aa*pa)+na*(F*V-aa*T);return c}function t(c){const q=c[0],da=c[1],F=c[2],aa=c[3],m=c[4],H=c[5],T=c[6],V=c[7],ea=c[8],na=c[9],pa=c[10],sa=c[11],ua=c[12],Da=c[13],za=c[14];c=c[15];return(q*H-da*m)*(pa*c-sa*za)-(q*T-F*m)*(na*c-sa*Da)+(q*V-aa*m)*(na*za-pa*Da)+(da*T-F*H)*(ea*c-sa*ua)-(da*V-aa*H)*(ea*za-pa*ua)+(F*V-aa*T)*(ea*Da-na*ua)}function O(c,q,
da){const F=q[0],aa=q[1],m=q[2],H=q[3],T=q[4],V=q[5],ea=q[6],na=q[7],pa=q[8],sa=q[9],ua=q[10],Da=q[11],za=q[12],ya=q[13],Qa=q[14];q=q[15];let Ka=da[0],Oa=da[1],Pa=da[2],Ja=da[3];c[0]=Ka*F+Oa*T+Pa*pa+Ja*za;c[1]=Ka*aa+Oa*V+Pa*sa+Ja*ya;c[2]=Ka*m+Oa*ea+Pa*ua+Ja*Qa;c[3]=Ka*H+Oa*na+Pa*Da+Ja*q;Ka=da[4];Oa=da[5];Pa=da[6];Ja=da[7];c[4]=Ka*F+Oa*T+Pa*pa+Ja*za;c[5]=Ka*aa+Oa*V+Pa*sa+Ja*ya;c[6]=Ka*m+Oa*ea+Pa*ua+Ja*Qa;c[7]=Ka*H+Oa*na+Pa*Da+Ja*q;Ka=da[8];Oa=da[9];Pa=da[10];Ja=da[11];c[8]=Ka*F+Oa*T+Pa*pa+Ja*za;c[9]=
Ka*aa+Oa*V+Pa*sa+Ja*ya;c[10]=Ka*m+Oa*ea+Pa*ua+Ja*Qa;c[11]=Ka*H+Oa*na+Pa*Da+Ja*q;Ka=da[12];Oa=da[13];Pa=da[14];Ja=da[15];c[12]=Ka*F+Oa*T+Pa*pa+Ja*za;c[13]=Ka*aa+Oa*V+Pa*sa+Ja*ya;c[14]=Ka*m+Oa*ea+Pa*ua+Ja*Qa;c[15]=Ka*H+Oa*na+Pa*Da+Ja*q;return c}function C(c,q,da){const F=da[0],aa=da[1];da=da[2];if(q===c)c[12]=q[0]*F+q[4]*aa+q[8]*da+q[12],c[13]=q[1]*F+q[5]*aa+q[9]*da+q[13],c[14]=q[2]*F+q[6]*aa+q[10]*da+q[14],c[15]=q[3]*F+q[7]*aa+q[11]*da+q[15];else{const m=q[0],H=q[1],T=q[2],V=q[3],ea=q[4],na=q[5],pa=
q[6],sa=q[7],ua=q[8],Da=q[9],za=q[10],ya=q[11];c[0]=m;c[1]=H;c[2]=T;c[3]=V;c[4]=ea;c[5]=na;c[6]=pa;c[7]=sa;c[8]=ua;c[9]=Da;c[10]=za;c[11]=ya;c[12]=m*F+ea*aa+ua*da+q[12];c[13]=H*F+na*aa+Da*da+q[13];c[14]=T*F+pa*aa+za*da+q[14];c[15]=V*F+sa*aa+ya*da+q[15]}return c}function P(c,q,da){const F=da[0],aa=da[1];da=da[2];c[0]=q[0]*F;c[1]=q[1]*F;c[2]=q[2]*F;c[3]=q[3]*F;c[4]=q[4]*aa;c[5]=q[5]*aa;c[6]=q[6]*aa;c[7]=q[7]*aa;c[8]=q[8]*da;c[9]=q[9]*da;c[10]=q[10]*da;c[11]=q[11]*da;c[12]=q[12];c[13]=q[13];c[14]=q[14];
c[15]=q[15];return c}function e(c,q,da,F){let aa=F[0],m=F[1];F=F[2];let H=Math.sqrt(aa*aa+m*m+F*F);var T=void 0,V=void 0;let ea=void 0,na=void 0,pa=void 0,sa=void 0,ua=void 0,Da=void 0,za=void 0,ya=void 0,Qa=void 0,Ka=void 0,Oa=void 0,Pa=void 0,Ja=void 0,Ra=void 0,Wa=void 0,ta=void 0,ub=void 0,hb=void 0,lb=void 0,b=void 0;V=T=void 0;if(H<la.getEpsilon())return null;H=1/H;aa*=H;m*=H;F*=H;T=Math.sin(da);V=Math.cos(da);ea=1-V;na=q[0];pa=q[1];sa=q[2];ua=q[3];Da=q[4];za=q[5];ya=q[6];Qa=q[7];Ka=q[8];Oa=
q[9];Pa=q[10];Ja=q[11];Ra=aa*aa*ea+V;Wa=m*aa*ea+F*T;ta=F*aa*ea-m*T;ub=aa*m*ea-F*T;hb=m*m*ea+V;lb=F*m*ea+aa*T;b=aa*F*ea+m*T;T=m*F*ea-aa*T;V=F*F*ea+V;c[0]=na*Ra+Da*Wa+Ka*ta;c[1]=pa*Ra+za*Wa+Oa*ta;c[2]=sa*Ra+ya*Wa+Pa*ta;c[3]=ua*Ra+Qa*Wa+Ja*ta;c[4]=na*ub+Da*hb+Ka*lb;c[5]=pa*ub+za*hb+Oa*lb;c[6]=sa*ub+ya*hb+Pa*lb;c[7]=ua*ub+Qa*hb+Ja*lb;c[8]=na*b+Da*T+Ka*V;c[9]=pa*b+za*T+Oa*V;c[10]=sa*b+ya*T+Pa*V;c[11]=ua*b+Qa*T+Ja*V;q!==c&&(c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);return c}function p(c,q,da){const F=
Math.sin(da);da=Math.cos(da);const aa=q[4],m=q[5],H=q[6],T=q[7],V=q[8],ea=q[9],na=q[10],pa=q[11];q!==c&&(c[0]=q[0],c[1]=q[1],c[2]=q[2],c[3]=q[3],c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);c[4]=aa*da+V*F;c[5]=m*da+ea*F;c[6]=H*da+na*F;c[7]=T*da+pa*F;c[8]=V*da-aa*F;c[9]=ea*da-m*F;c[10]=na*da-H*F;c[11]=pa*da-T*F;return c}function E(c,q,da){const F=Math.sin(da);da=Math.cos(da);const aa=q[0],m=q[1],H=q[2],T=q[3],V=q[8],ea=q[9],na=q[10],pa=q[11];q!==c&&(c[4]=q[4],c[5]=q[5],c[6]=q[6],c[7]=q[7],c[12]=
q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);c[0]=aa*da-V*F;c[1]=m*da-ea*F;c[2]=H*da-na*F;c[3]=T*da-pa*F;c[8]=aa*F+V*da;c[9]=m*F+ea*da;c[10]=H*F+na*da;c[11]=T*F+pa*da;return c}function Q(c,q,da){const F=Math.sin(da);da=Math.cos(da);const aa=q[0],m=q[1],H=q[2],T=q[3],V=q[4],ea=q[5],na=q[6],pa=q[7];q!==c&&(c[8]=q[8],c[9]=q[9],c[10]=q[10],c[11]=q[11],c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);c[0]=aa*da+V*F;c[1]=m*da+ea*F;c[2]=H*da+na*F;c[3]=T*da+pa*F;c[4]=V*da-aa*F;c[5]=ea*da-m*F;c[6]=na*da-H*F;
c[7]=pa*da-T*F;return c}function r(c,q){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=q[0];c[13]=q[1];c[14]=q[2];c[15]=1;return c}function n(c,q){c[0]=q[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=q[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=q[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function x(c,q,da){if(0===q)return fa(c);let F=da[0],aa=da[1];da=da[2];let m=Math.sqrt(F*F+aa*aa+da*da),H=void 0,T=void 0,V=void 0;if(m<la.getEpsilon())return null;m=1/m;F*=
m;aa*=m;da*=m;H=Math.sin(q);T=Math.cos(q);V=1-T;c[0]=F*F*V+T;c[1]=aa*F*V+da*H;c[2]=da*F*V-aa*H;c[3]=0;c[4]=F*aa*V-da*H;c[5]=aa*aa*V+T;c[6]=da*aa*V+F*H;c[7]=0;c[8]=F*da*V+aa*H;c[9]=aa*da*V-F*H;c[10]=da*da*V+T;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function J(c,q){const da=Math.sin(q);q=Math.cos(q);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=q;c[6]=da;c[7]=0;c[8]=0;c[9]=-da;c[10]=q;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function z(c,q){const da=Math.sin(q);q=Math.cos(q);c[0]=q;c[1]=
0;c[2]=-da;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=da;c[9]=0;c[10]=q;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function A(c,q){const da=Math.sin(q);q=Math.cos(q);c[0]=q;c[1]=da;c[2]=0;c[3]=0;c[4]=-da;c[5]=q;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function B(c,q,da){var F=q[0],aa=q[1],m=q[2],H=q[3],T=F+F,V=aa+aa;const ea=m+m;q=F*T;const na=F*V;F*=ea;const pa=aa*V;aa*=ea;m*=ea;T*=H;V*=H;H*=ea;c[0]=1-(pa+m);c[1]=na+H;c[2]=F-V;c[3]=0;c[4]=na-H;c[5]=
1-(q+m);c[6]=aa+T;c[7]=0;c[8]=F+V;c[9]=aa-T;c[10]=1-(q+pa);c[11]=0;c[12]=da[0];c[13]=da[1];c[14]=da[2];c[15]=1;return c}function y(c,q){const da=db,F=-q[0],aa=-q[1],m=-q[2],H=q[3],T=q[4],V=q[5],ea=q[6],na=q[7],pa=F*F+aa*aa+m*m+H*H;0<pa?(da[0]=2*(T*H+na*F+V*m-ea*aa)/pa,da[1]=2*(V*H+na*aa+ea*F-T*m)/pa,da[2]=2*(ea*H+na*m+T*aa-V*F)/pa):(da[0]=2*(T*H+na*F+V*m-ea*aa),da[1]=2*(V*H+na*aa+ea*F-T*m),da[2]=2*(ea*H+na*m+T*aa-V*F));B(c,q,da);return c}function D(c,q){c[0]=q[12];c[1]=q[13];c[2]=q[14];return c}function I(c,
q){const da=q[0],F=q[1],aa=q[2],m=q[4],H=q[5],T=q[6],V=q[8],ea=q[9];q=q[10];c[0]=Math.sqrt(da*da+F*F+aa*aa);c[1]=Math.sqrt(m*m+H*H+T*T);c[2]=Math.sqrt(V*V+ea*ea+q*q);return c}function X(c,q){const da=q[0]+q[5]+q[10];let F=0;0<da?(F=2*Math.sqrt(da+1),c[3]=.25*F,c[0]=(q[6]-q[9])/F,c[1]=(q[8]-q[2])/F,c[2]=(q[1]-q[4])/F):q[0]>q[5]&&q[0]>q[10]?(F=2*Math.sqrt(1+q[0]-q[5]-q[10]),c[3]=(q[6]-q[9])/F,c[0]=.25*F,c[1]=(q[1]+q[4])/F,c[2]=(q[8]+q[2])/F):q[5]>q[10]?(F=2*Math.sqrt(1+q[5]-q[0]-q[10]),c[3]=(q[8]-q[2])/
F,c[0]=(q[1]+q[4])/F,c[1]=.25*F,c[2]=(q[6]+q[9])/F):(F=2*Math.sqrt(1+q[10]-q[0]-q[5]),c[3]=(q[1]-q[4])/F,c[0]=(q[8]+q[2])/F,c[1]=(q[6]+q[9])/F,c[2]=.25*F);return c}function ia(c,q,da,F){var aa=q[0],m=q[1],H=q[2],T=q[3],V=aa+aa,ea=m+m,na=H+H;q=aa*V;const pa=aa*ea;aa*=na;const sa=m*ea;m*=na;H*=na;V*=T;ea*=T;T*=na;na=F[0];const ua=F[1];F=F[2];c[0]=(1-(sa+H))*na;c[1]=(pa+T)*na;c[2]=(aa-ea)*na;c[3]=0;c[4]=(pa-T)*ua;c[5]=(1-(q+H))*ua;c[6]=(m+V)*ua;c[7]=0;c[8]=(aa+ea)*F;c[9]=(m-V)*F;c[10]=(1-(q+sa))*F;c[11]=
0;c[12]=da[0];c[13]=da[1];c[14]=da[2];c[15]=1;return c}function N(c,q,da,F,aa){var m=q[0],H=q[1],T=q[2],V=q[3],ea=m+m,na=H+H,pa=T+T;q=m*ea;var sa=m*na,ua=m*pa;m=H*na;H*=pa;var Da=T*pa;T=V*ea;na*=V;const za=V*pa;var ya=F[0],Qa=F[1];pa=F[2];F=aa[0];V=aa[1];aa=aa[2];ea=(1-(m+Da))*ya;const Ka=(sa+za)*ya;ya*=ua-na;sa=(sa-za)*Qa;Da=(1-(q+Da))*Qa;Qa*=H+T;ua=(ua+na)*pa;H=(H-T)*pa;q=(1-(q+m))*pa;c[0]=ea;c[1]=Ka;c[2]=ya;c[3]=0;c[4]=sa;c[5]=Da;c[6]=Qa;c[7]=0;c[8]=ua;c[9]=H;c[10]=q;c[11]=0;c[12]=da[0]+F-(ea*
F+sa*V+ua*aa);c[13]=da[1]+V-(Ka*F+Da*V+H*aa);c[14]=da[2]+aa-(ya*F+Qa*V+q*aa);c[15]=1;return c}function M(c,q){var da=q[0],F=q[1],aa=q[2];q=q[3];var m=da+da,H=F+F;const T=aa+aa;da*=m;const V=F*m;F*=H;const ea=aa*m,na=aa*H;aa*=T;m*=q;H*=q;q*=T;c[0]=1-F-aa;c[1]=V+q;c[2]=ea-H;c[3]=0;c[4]=V-q;c[5]=1-da-aa;c[6]=na+m;c[7]=0;c[8]=ea+H;c[9]=na-m;c[10]=1-da-F;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function v(c,q,da,F,aa,m,H){const T=1/(da-q),V=1/(aa-F),ea=1/(m-H);c[0]=2*m*T;c[1]=0;c[2]=0;c[3]=0;c[4]=
0;c[5]=2*m*V;c[6]=0;c[7]=0;c[8]=(da+q)*T;c[9]=(aa+F)*V;c[10]=(H+m)*ea;c[11]=-1;c[12]=0;c[13]=0;c[14]=H*m*2*ea;c[15]=0;return c}function w(c,q,da,F,aa){q=1/Math.tan(q/2);let m=void 0;c[0]=q/da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=q;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=aa&&Infinity!==aa?(m=1/(F-aa),c[10]=(aa+F)*m,c[14]=2*aa*F*m):(c[10]=-1,c[14]=-2*F);return c}function Z(c,q,da,F){const aa=Math.tan(q.upDegrees*Math.PI/180),m=Math.tan(q.downDegrees*Math.PI/180),H=Math.tan(q.leftDegrees*
Math.PI/180);q=Math.tan(q.rightDegrees*Math.PI/180);const T=2/(H+q),V=2/(aa+m);c[0]=T;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=V;c[6]=0;c[7]=0;c[8]=-((H-q)*T*.5);c[9]=(aa-m)*V*.5;c[10]=F/(da-F);c[11]=-1;c[12]=0;c[13]=0;c[14]=F*da/(da-F);c[15]=0;return c}function ja(c,q,da,F,aa,m,H){const T=1/(q-da),V=1/(F-aa),ea=1/(m-H);c[0]=-2*T;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*V;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*ea;c[11]=0;c[12]=(q+da)*T;c[13]=(aa+F)*V;c[14]=(H+m)*ea;c[15]=1;return c}function va(c,q,da,F){const aa=
q[0],m=q[1];q=q[2];let H=aa-da[0],T=m-da[1];da=q-da[2];var V=la.getEpsilon();if(Math.abs(H)<V&&Math.abs(T)<V&&Math.abs(da)<V)fa(c);else{var ea=1/Math.sqrt(H*H+T*T+da*da);H*=ea;T*=ea;da*=ea;ea=F[0];var na=F[1];V=F[2];F=na*da-V*T;V=V*H-ea*da;na=ea*T-na*H;(ea=Math.sqrt(F*F+V*V+na*na))?(ea=1/ea,F*=ea,V*=ea,na*=ea):na=V=F=0;var pa=T*na-da*V,sa=da*F-H*na,ua=H*V-T*F;(ea=Math.sqrt(pa*pa+sa*sa+ua*ua))?(ea=1/ea,pa*=ea,sa*=ea,ua*=ea):ua=sa=pa=0;c[0]=F;c[1]=pa;c[2]=H;c[3]=0;c[4]=V;c[5]=sa;c[6]=T;c[7]=0;c[8]=
na;c[9]=ua;c[10]=da;c[11]=0;c[12]=-(F*aa+V*m+na*q);c[13]=-(pa*aa+sa*m+ua*q);c[14]=-(H*aa+T*m+da*q);c[15]=1}}function Ba(c,q,da,F){const aa=q[0],m=q[1];q=q[2];var H=F[0];const T=F[1];var V=F[2];F=aa-da[0];let ea=m-da[1];da=q-da[2];let na=F*F+ea*ea+da*da;0<na&&(na=1/Math.sqrt(na),F*=na,ea*=na,da*=na);let pa=T*da-V*ea;V=V*F-H*da;H=H*ea-T*F;na=pa*pa+V*V+H*H;0<na&&(na=1/Math.sqrt(na),pa*=na,V*=na,H*=na);c[0]=pa;c[1]=V;c[2]=H;c[3]=0;c[4]=ea*H-da*V;c[5]=da*pa-F*H;c[6]=F*V-ea*pa;c[7]=0;c[8]=F;c[9]=ea;c[10]=
da;c[11]=0;c[12]=aa;c[13]=m;c[14]=q;c[15]=1;return c}function Ea(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Fa(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function Ma(c,q,da){c[0]=q[0]+da[0];c[1]=q[1]+da[1];c[2]=q[2]+da[2];c[3]=q[3]+da[3];c[4]=
q[4]+da[4];c[5]=q[5]+da[5];c[6]=q[6]+da[6];c[7]=q[7]+da[7];c[8]=q[8]+da[8];c[9]=q[9]+da[9];c[10]=q[10]+da[10];c[11]=q[11]+da[11];c[12]=q[12]+da[12];c[13]=q[13]+da[13];c[14]=q[14]+da[14];c[15]=q[15]+da[15];return c}function Ha(c,q,da){c[0]=q[0]-da[0];c[1]=q[1]-da[1];c[2]=q[2]-da[2];c[3]=q[3]-da[3];c[4]=q[4]-da[4];c[5]=q[5]-da[5];c[6]=q[6]-da[6];c[7]=q[7]-da[7];c[8]=q[8]-da[8];c[9]=q[9]-da[9];c[10]=q[10]-da[10];c[11]=q[11]-da[11];c[12]=q[12]-da[12];c[13]=q[13]-da[13];c[14]=q[14]-da[14];c[15]=q[15]-
da[15];return c}function Ua(c,q,da){c[0]=q[0]*da;c[1]=q[1]*da;c[2]=q[2]*da;c[3]=q[3]*da;c[4]=q[4]*da;c[5]=q[5]*da;c[6]=q[6]*da;c[7]=q[7]*da;c[8]=q[8]*da;c[9]=q[9]*da;c[10]=q[10]*da;c[11]=q[11]*da;c[12]=q[12]*da;c[13]=q[13]*da;c[14]=q[14]*da;c[15]=q[15]*da;return c}function Sa(c,q,da,F){c[0]=q[0]+da[0]*F;c[1]=q[1]+da[1]*F;c[2]=q[2]+da[2]*F;c[3]=q[3]+da[3]*F;c[4]=q[4]+da[4]*F;c[5]=q[5]+da[5]*F;c[6]=q[6]+da[6]*F;c[7]=q[7]+da[7]*F;c[8]=q[8]+da[8]*F;c[9]=q[9]+da[9]*F;c[10]=q[10]+da[10]*F;c[11]=q[11]+da[11]*
F;c[12]=q[12]+da[12]*F;c[13]=q[13]+da[13]*F;c[14]=q[14]+da[14]*F;c[15]=q[15]+da[15]*F;return c}function Va(c,q){return c[0]===q[0]&&c[1]===q[1]&&c[2]===q[2]&&c[3]===q[3]&&c[4]===q[4]&&c[5]===q[5]&&c[6]===q[6]&&c[7]===q[7]&&c[8]===q[8]&&c[9]===q[9]&&c[10]===q[10]&&c[11]===q[11]&&c[12]===q[12]&&c[13]===q[13]&&c[14]===q[14]&&c[15]===q[15]}function eb(c,q){if(c===q)return!0;const da=c[0],F=c[1],aa=c[2],m=c[3],H=c[4],T=c[5],V=c[6],ea=c[7],na=c[8],pa=c[9],sa=c[10],ua=c[11],Da=c[12],za=c[13],ya=c[14];c=
c[15];const Qa=q[0],Ka=q[1],Oa=q[2],Pa=q[3],Ja=q[4],Ra=q[5],Wa=q[6],ta=q[7],ub=q[8],hb=q[9],lb=q[10],b=q[11],fb=q[12],Ob=q[13],Jb=q[14];q=q[15];const ka=la.getEpsilon();return Math.abs(da-Qa)<=ka*Math.max(1,Math.abs(da),Math.abs(Qa))&&Math.abs(F-Ka)<=ka*Math.max(1,Math.abs(F),Math.abs(Ka))&&Math.abs(aa-Oa)<=ka*Math.max(1,Math.abs(aa),Math.abs(Oa))&&Math.abs(m-Pa)<=ka*Math.max(1,Math.abs(m),Math.abs(Pa))&&Math.abs(H-Ja)<=ka*Math.max(1,Math.abs(H),Math.abs(Ja))&&Math.abs(T-Ra)<=ka*Math.max(1,Math.abs(T),
Math.abs(Ra))&&Math.abs(V-Wa)<=ka*Math.max(1,Math.abs(V),Math.abs(Wa))&&Math.abs(ea-ta)<=ka*Math.max(1,Math.abs(ea),Math.abs(ta))&&Math.abs(na-ub)<=ka*Math.max(1,Math.abs(na),Math.abs(ub))&&Math.abs(pa-hb)<=ka*Math.max(1,Math.abs(pa),Math.abs(hb))&&Math.abs(sa-lb)<=ka*Math.max(1,Math.abs(sa),Math.abs(lb))&&Math.abs(ua-b)<=ka*Math.max(1,Math.abs(ua),Math.abs(b))&&Math.abs(Da-fb)<=ka*Math.max(1,Math.abs(Da),Math.abs(fb))&&Math.abs(za-Ob)<=ka*Math.max(1,Math.abs(za),Math.abs(Ob))&&Math.abs(ya-Jb)<=ka*
Math.max(1,Math.abs(ya),Math.abs(Jb))&&Math.abs(c-q)<=ka*Math.max(1,Math.abs(c),Math.abs(q))}function kb(c){const q=la.getEpsilon(),da=c[0],F=c[1],aa=c[2],m=c[4],H=c[5],T=c[6],V=c[8],ea=c[9];c=c[10];return Math.abs(1-(da*da+m*m+V*V))<=q&&Math.abs(1-(F*F+H*H+ea*ea))<=q&&Math.abs(1-(aa*aa+T*T+c*c))<=q}function jb(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&1===c[10]}const db=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:Ma,adjoint:k,
copy:ba,determinant:t,equals:eb,exactEquals:Va,frob:Fa,fromQuat:M,fromQuat2:y,fromRotation:x,fromRotationTranslation:B,fromRotationTranslationScale:ia,fromRotationTranslationScaleOrigin:N,fromScaling:n,fromTranslation:r,fromXRotation:J,fromYRotation:z,fromZRotation:A,frustum:v,getRotation:X,getScaling:I,getTranslation:D,hasIdentityRotation:jb,identity:fa,invert:h,invertOrIdentity:K,isOrthoNormal:kb,lookAt:va,mul:O,multiply:O,multiplyScalar:Ua,multiplyScalarAndAdd:Sa,ortho:ja,perspective:w,perspectiveFromFieldOfView:Z,
rotate:e,rotateX:p,rotateY:E,rotateZ:Q,scale:P,set:R,str:Ea,sub:Ha,subtract:Ha,targetTo:Ba,translate:C,transpose:U},Symbol.toStringTag,{value:"Module"}));l.add=Ma;l.adjoint=k;l.copy=ba;l.determinant=t;l.equals=eb;l.exactEquals=Va;l.frob=Fa;l.fromQuat=M;l.fromQuat2=y;l.fromRotation=x;l.fromRotationTranslation=B;l.fromRotationTranslationScale=ia;l.fromRotationTranslationScaleOrigin=N;l.fromScaling=n;l.fromTranslation=r;l.fromXRotation=J;l.fromYRotation=z;l.fromZRotation=A;l.frustum=v;l.getRotation=
X;l.getScaling=I;l.getTranslation=D;l.hasIdentityRotation=jb;l.identity=fa;l.invert=h;l.invertOrIdentity=K;l.isOrthoNormal=kb;l.lookAt=va;l.mat4=f;l.mul=O;l.multiply=O;l.multiplyScalar=Ua;l.multiplyScalarAndAdd=Sa;l.ortho=ja;l.perspective=w;l.perspectiveFromFieldOfView=Z;l.rotate=e;l.rotateX=p;l.rotateY=E;l.rotateZ=Q;l.scale=P;l.set=R;l.str=Ea;l.sub=Ha;l.subtract=Ha;l.targetTo=Ba;l.translate=C;l.transpose=U})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets",
"../core/has"],function(l,f,la,ba,R){function fa(){return!!f._pe}function U(){return!!R("esri-wasm")}function K(){return P?P:P=(new Promise((p,E)=>l(["./pe-wasm"],p,E))).then(p=>p.peWasm).then(({default:p})=>p({locateFile:E=>ba.getAssetUrl(`esri/geometry/support/${E}`)})).then(p=>{h(p)})}function h(p){function E(n,x,J){n[x]=J(n[x])}f._pe=p;f.PeDefs.init();f.PeGTlistExtended.init();f.PeNotationMgrs.init();f.PeNotationUtm.init();f.PePCSInfo.init();f.PeGCSExtent=function(n){function x(){return n.apply(this,
arguments)||this}la._inherits(x,n);x.prototype.destroy=function(){f._pe.destroy(this)};return la._createClass(x)}(f._pe.PeGCSExtent);p=[f._pe.PeDatum,f._pe.PeGeogcs,f._pe.PeGeogtran,f._pe.PeObject,f._pe.PeParameter,f._pe.PePrimem,f._pe.PeProjcs,f._pe.PeSpheroid,f._pe.PeUnit];for(var Q of p)E(Q.prototype,"getName",n=>function(){return n.call(this,Array(f.PeDefs.PE_NAME_MAX))});for(const n of[f._pe.PeGeogtran,f._pe.PeProjcs])E(n.prototype,"getParameters",x=>function(){const J=Array(f.PeDefs.PE_PARM_MAX);
let z=x.call(this);for(let A=0;A<J.length;A++){const B=f._pe.getValue(z,"*");J[A]=B?f._pe.wrapPointer(B,f._pe.PeParameter):null;z+=Int32Array.BYTES_PER_ELEMENT}return J});E(f._pe.PeHorizon.prototype,"getCoord",n=>function(){const x=this.getSize();if(!x)return null;const J=[],z=n.call(this);C(J,x,z);return J});E(f._pe.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const x=f._pe._pe_getPeGTlistExtendedGTsSize();return function(){let J=null;var z=n.call(this);if(!f._pe.compare(z,f._pe.NULL)){J=[z];
const A=this.getSteps();if(1<A){z=f._pe.getPointer(z);for(let B=1;B<A;B++)J.push(f._pe.wrapPointer(z+x*B,f._pe.PeGTlistExtendedGTs))}}return J}});const r=f._pe._pe_getPeHorizonSize();Q=n=>function(){let x=this._cache;x||(this._cache=x=new Map);if(x.has(n))return x.get(n);let J=null;var z=n.call(this);if(!f._pe.compare(z,f._pe.NULL)){J=[z];const A=z.getNump();if(1<A){z=f._pe.getPointer(z);for(let B=1;B<A;B++)J.push(f._pe.wrapPointer(z+r*B,f._pe.PeHorizon))}}x.set(n,J);return J};E(f._pe.PeProjcs.prototype,
"horizonGcsGenerate",Q);E(f._pe.PeProjcs.prototype,"horizonPcsGenerate",Q);f._pe.PeObject.prototype.toString=function(n=f.PeDefs.PE_STR_OPTS_NONE){f._pe.ensureCache.prepare();const x=f._pe.getPointer(this),J=f._pe.ensureInt8(Array(f.PeDefs.PE_BUFFER_MAX));return f._pe.UTF8ToString(f._pe._pe_object_to_string_ext(x,n,J))}}function k(p){if(p){var E=f._pe.getClass(p);E&&(E=f._pe.getCache(E))&&(p=f._pe.getPointer(p))&&delete E[p]}}function t(p,E){const Q=[];E=Array(E);for(let r=0;r<p;r++)Q.push(f._pe.ensureInt8(E));
return Q}function O(p){let E;Array.isArray(p[0])?(E=[],p.forEach(Q=>{E.push(Q[0],Q[1])})):E=p;return E}function C(p,E,Q,r=!1){if(r)for(r=0;r<2*E;r++)p[r]=f._pe.getValue(Q+r*Float64Array.BYTES_PER_ELEMENT,"double");else{r=0===p.length;for(let n=0;n<E;n++)r&&(p[n]=Array(2)),p[n][0]=f._pe.getValue(Q,"double"),p[n][1]=f._pe.getValue(Q+Float64Array.BYTES_PER_ELEMENT,"double"),Q+=2*Float64Array.BYTES_PER_ELEMENT}}let P;f._pe=null;f.PeCSTransformations=void 0;(function(p){function E(n,x,J){f._pe.ensureCache.prepare();
var z=O(J);const A=J===z;z=f._pe.ensureFloat64(z);(n=f._pe._pe_geog_to_proj(f._pe.getPointer(n),x,z))&&C(J,x,z,A);return n}function Q(n,x,J){return r(n,x,J,0)}function r(n,x,J,z){f._pe.ensureCache.prepare();var A=O(J);const B=J===A;A=f._pe.ensureFloat64(A);(n=f._pe._pe_proj_to_geog_center(f._pe.getPointer(n),x,A,z))&&C(J,x,A,B);return n}p.geogToProj=E;p.projGeog=function(n,x,J,z){switch(z){case f.PeDefs.PE_TRANSFORM_P_TO_G:return Q(n,x,J);case f.PeDefs.PE_TRANSFORM_G_TO_P:return E(n,x,J)}return 0};
p.projToGeog=Q;p.projToGeogCenter=r})(f.PeCSTransformations||(f.PeCSTransformations={}));f.PeDefs=void 0;(function(p){p.init=function(){p.PE_BUFFER_MAX=f._pe.PeDefs.prototype.PE_BUFFER_MAX;p.PE_NAME_MAX=f._pe.PeDefs.prototype.PE_NAME_MAX;p.PE_MGRS_MAX=f._pe.PeDefs.prototype.PE_MGRS_MAX;p.PE_USNG_MAX=f._pe.PeDefs.prototype.PE_USNG_MAX;p.PE_DD_MAX=f._pe.PeDefs.prototype.PE_DD_MAX;p.PE_DDM_MAX=f._pe.PeDefs.prototype.PE_DDM_MAX;p.PE_DMS_MAX=f._pe.PeDefs.prototype.PE_DMS_MAX;p.PE_UTM_MAX=f._pe.PeDefs.prototype.PE_UTM_MAX;
p.PE_PARM_MAX=f._pe.PeDefs.prototype.PE_PARM_MAX;p.PE_TYPE_NONE=f._pe.PeDefs.prototype.PE_TYPE_NONE;p.PE_TYPE_GEOGCS=f._pe.PeDefs.prototype.PE_TYPE_GEOGCS;p.PE_TYPE_PROJCS=f._pe.PeDefs.prototype.PE_TYPE_PROJCS;p.PE_TYPE_GEOGTRAN=f._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;p.PE_TYPE_COORDSYS=f._pe.PeDefs.prototype.PE_TYPE_COORDSYS;p.PE_TYPE_UNIT=f._pe.PeDefs.prototype.PE_TYPE_UNIT;p.PE_TYPE_LINUNIT=f._pe.PeDefs.prototype.PE_TYPE_LINUNIT;p.PE_STR_OPTS_NONE=f._pe.PeDefs.prototype.PE_STR_OPTS_NONE;p.PE_STR_AUTH_NONE=
f._pe.PeDefs.prototype.PE_STR_AUTH_NONE;p.PE_STR_AUTH_TOP=f._pe.PeDefs.prototype.PE_STR_AUTH_TOP;p.PE_STR_NAME_CANON=f._pe.PeDefs.prototype.PE_STR_NAME_CANON;p.PE_PARM_X0=f._pe.PeDefs.prototype.PE_PARM_X0;p.PE_PARM_ND=f._pe.PeDefs.prototype.PE_PARM_ND;p.PE_TRANSFORM_1_TO_2=f._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;p.PE_TRANSFORM_2_TO_1=f._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;p.PE_TRANSFORM_P_TO_G=f._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;p.PE_TRANSFORM_G_TO_P=f._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
p.PE_HORIZON_RECT=f._pe.PeDefs.prototype.PE_HORIZON_RECT;p.PE_HORIZON_POLY=f._pe.PeDefs.prototype.PE_HORIZON_POLY;p.PE_HORIZON_LINE=f._pe.PeDefs.prototype.PE_HORIZON_LINE;p.PE_HORIZON_DELTA=f._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(f.PeDefs||(f.PeDefs={}));f.PeFactory=void 0;(function(p){function E(x,J){let z=null,A=Q[x];A||(A={},Q[x]=A);A.hasOwnProperty(String(J))?z=A[J]:(x=f._pe.PeFactory.prototype.factoryByType(x,J),f._pe.compare(x,f._pe.NULL)||(z=x,A[J]=z));return z=n(z)}const Q={},r={},n=x=>
{if(x){const J=x.getType();switch(J){case f.PeDefs.PE_TYPE_GEOGCS:x=f._pe.castObject(x,f._pe.PeGeogcs);break;case f.PeDefs.PE_TYPE_PROJCS:x=f._pe.castObject(x,f._pe.PeProjcs);break;case f.PeDefs.PE_TYPE_GEOGTRAN:x=f._pe.castObject(x,f._pe.PeGeogtran);break;default:J&f.PeDefs.PE_TYPE_UNIT&&(x=f._pe.castObject(x,f._pe.PeUnit))}}return x};p.initialize=function(){f._pe.PeFactory.prototype.initialize(null)};p.coordsys=function(x){return E(f.PeDefs.PE_TYPE_COORDSYS,x)};p.factoryByType=E;p.fromString=function(x,
J){let z=null,A=r[x];A||(A={},r[x]=A);A.hasOwnProperty(J)?z=A[J]:(x=f._pe.PeFactory.prototype.fromString(x,J),f._pe.compare(x,f._pe.NULL)||(z=x,A[J]=z));return z=n(z)};p.geogcs=function(x){return E(f.PeDefs.PE_TYPE_GEOGCS,x)};p.geogtran=function(x){return E(f.PeDefs.PE_TYPE_GEOGTRAN,x)};p.getCode=function(x){return f._pe.PeFactory.prototype.getCode(x)};p.projcs=function(x){return E(f.PeDefs.PE_TYPE_PROJCS,x)};p.unit=function(x){return E(f.PeDefs.PE_TYPE_UNIT,x)}})(f.PeFactory||(f.PeFactory={}));f.PeGCSExtent=
null;f.PeGTlistExtended=void 0;(function(p){let E;p.init=function(){p.PE_GTLIST_OPTS_COMMON=f._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;E=f._pe._pe_getPeGTlistExtendedEntrySize()};p.getGTlist=function(Q,r,n,x,J,z){let A=null;const B=new f._pe.PeInteger(z);try{const y=f._pe.PeGTlistExtended.prototype.getGTlist(Q,r,n,x,J,B);if(z=B.val)if(A=[y],1<z){const D=f._pe.getPointer(y);for(Q=1;Q<z;Q++)A.push(f._pe.wrapPointer(D+E*Q,f._pe.PeGTlistExtendedEntry))}}finally{f._pe.destroy(B)}return A}})(f.PeGTlistExtended||
(f.PeGTlistExtended={}));f.PeGTlistExtendedEntry=void 0;(function(p){p.destroy=function(E){if(E&&E.length){for(const Q of E)k(Q),Q.getEntries().forEach(r=>{k(r);r=r.getGeogtran();k(r);r.getParameters().forEach(k);[r.getGeogcs1(),r.getGeogcs2()].forEach(n=>{k(n);const x=n.getDatum();k(x);k(x.getSpheroid());k(n.getPrimem());k(n.getUnit())})});f._pe.PeGTlistExtendedEntry.prototype.Delete(E[0])}}})(f.PeGTlistExtendedEntry||(f.PeGTlistExtendedEntry={}));f.PeGTTransformations=void 0;(function(p){p.geogToGeog=
function(E,Q,r,n,x){f._pe.ensureCache.prepare();var J=O(r);const z=r===J;J=f._pe.ensureFloat64(J);let A=0;n&&(A=f._pe.ensureFloat64(n));(E=f._pe._pe_geog_to_geog(f._pe.getPointer(E),Q,J,A,x))&&C(r,Q,J,z);return E}})(f.PeGTTransformations||(f.PeGTTransformations={}));f.PeNotationDms=void 0;(function(p){const E=(r,n,x,J,z,A)=>{f._pe.ensureCache.prepare();switch(r){case "dd":var B=f._pe._pe_geog_to_dd;var y=f.PeDefs.PE_DD_MAX;break;case "ddm":B=f._pe._pe_geog_to_ddm;y=f.PeDefs.PE_DDM_MAX;break;case "dms":B=
f._pe._pe_geog_to_dms,y=f.PeDefs.PE_DMS_MAX}r=0;n&&(r=f._pe.getPointer(n));n=O(J);n=f._pe.ensureFloat64(n);y=t(x,y);J=f._pe.ensureInt32(y);if(z=B(r,x,n,z,J))for(B=0;B<x;B++)A[B]=f._pe.UTF8ToString(y[B]);return z},Q=(r,n,x,J,z)=>{f._pe.ensureCache.prepare();switch(r){case "dd":var A=f._pe._pe_dd_to_geog;break;case "ddm":A=f._pe._pe_ddm_to_geog;break;case "dms":A=f._pe._pe_dms_to_geog}r=0;n&&(r=f._pe.getPointer(n));n=J.map(B=>f._pe.ensureString(B));J=f._pe.ensureInt32(n);n=f._pe.ensureFloat64(Array(2*
x));(A=A(r,x,J,n))&&C(z,x,n);return A};p.geogToDms=function(r,n,x,J,z){return E("dms",r,n,x,J,z)};p.dmsToGeog=function(r,n,x,J){return Q("dms",r,n,x,J)};p.geogToDdm=function(r,n,x,J,z){return E("ddm",r,n,x,J,z)};p.ddmToGeog=function(r,n,x,J){return Q("ddm",r,n,x,J)};p.geogToDd=function(r,n,x,J,z){return E("dd",r,n,x,J,z)};p.ddToGeog=function(r,n,x,J){return Q("dd",r,n,x,J)}})(f.PeNotationDms||(f.PeNotationDms={}));f.PeNotationMgrs=void 0;(function(p){p.init=function(){p.PE_MGRS_STYLE_NEW=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;
p.PE_MGRS_STYLE_OLD=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;p.PE_MGRS_STYLE_AUTO=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;p.PE_MGRS_180_ZONE_1_PLUS=f._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;p.PE_MGRS_ADD_SPACES=f._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};p.geogToMgrsExtended=function(E,Q,r,n,x,J,z){f._pe.ensureCache.prepare();let A=0;E&&(A=f._pe.getPointer(E));E=O(r);r=f._pe.ensureFloat64(E);E=t(Q,f.PeDefs.PE_MGRS_MAX);const B=f._pe.ensureInt32(E);if(n=f._pe._pe_geog_to_mgrs_extended(A,
Q,r,n,x,J,B))for(x=0;x<Q;x++)z[x]=f._pe.UTF8ToString(E[x]);return n};p.mgrsToGeogExtended=function(E,Q,r,n,x){f._pe.ensureCache.prepare();let J=0;E&&(J=f._pe.getPointer(E));E=r.map(z=>f._pe.ensureString(z));r=f._pe.ensureInt32(E);E=f._pe.ensureFloat64(Array(2*Q));(n=f._pe._pe_mgrs_to_geog_extended(J,Q,r,n,E))&&C(x,Q,E);return n}})(f.PeNotationMgrs||(f.PeNotationMgrs={}));f.PeNotationUsng=void 0;(function(p){p.geogToUsng=function(E,Q,r,n,x,J,z){f._pe.ensureCache.prepare();let A=0;E&&(A=f._pe.getPointer(E));
E=O(r);r=f._pe.ensureFloat64(E);E=t(Q,f.PeDefs.PE_MGRS_MAX);const B=f._pe.ensureInt32(E);if(n=f._pe._pe_geog_to_usng(A,Q,r,n,x,J,B))for(x=0;x<Q;x++)z[x]=f._pe.UTF8ToString(E[x]);return n};p.usngToGeog=function(E,Q,r,n){f._pe.ensureCache.prepare();var x=0;E&&(x=f._pe.getPointer(E));E=r.map(J=>f._pe.ensureString(J));r=f._pe.ensureInt32(E);E=f._pe.ensureFloat64(Array(2*Q));(x=f._pe._pe_usng_to_geog(x,Q,r,E))&&C(n,Q,E);return x}})(f.PeNotationUsng||(f.PeNotationUsng={}));f.PeNotationUtm=void 0;(function(p){p.init=
function(){p.PE_UTM_OPTS_NONE=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;p.PE_UTM_OPTS_ADD_SPACES=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;p.PE_UTM_OPTS_NS=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};p.geogToUtm=function(E,Q,r,n,x){f._pe.ensureCache.prepare();var J=0;E&&(J=f._pe.getPointer(E));E=O(r);r=f._pe.ensureFloat64(E);E=t(Q,f.PeDefs.PE_UTM_MAX);const z=f._pe.ensureInt32(E);if(n=f._pe._pe_geog_to_utm(J,Q,r,n,z))for(J=0;J<Q;J++)x[J]=f._pe.UTF8ToString(E[J]);return n};p.utmToGeog=
function(E,Q,r,n,x){f._pe.ensureCache.prepare();let J=0;E&&(J=f._pe.getPointer(E));E=r.map(z=>f._pe.ensureString(z));r=f._pe.ensureInt32(E);E=f._pe.ensureFloat64(Array(2*Q));(n=f._pe._pe_utm_to_geog(J,Q,r,n,E))&&C(x,Q,E);return n}})(f.PeNotationUtm||(f.PeNotationUtm={}));f.PePCSInfo=void 0;(function(p){const E=new Map;p.init=function(){p.PE_PCSINFO_OPTION_NONE=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;p.PE_PCSINFO_OPTION_DOMAIN=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;p.PE_POLE_OUTSIDE_BOUNDARY=
f._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;p.PE_POLE_POINT=f._pe.PePCSInfo.prototype.PE_POLE_POINT};p.generate=function(Q,r=p.PE_PCSINFO_OPTION_DOMAIN){let n=null,x=null;E.has(Q)&&(x=E.get(Q),x[r]&&(n=x[r]));n||(n=f._pe.PePCSInfo.prototype.generate(Q,r),x||(x=[],E.set(Q,x)),x[r]=n);return n}})(f.PePCSInfo||(f.PePCSInfo={}));f.PeVersion=void 0;(function(p){p.versionString=function(){return f._pe.PeVersion.prototype.version_string()}})(f.PeVersion||(f.PeVersion={}));const e=Object.freeze(Object.defineProperty({__proto__:null,
get PeCSTransformations(){return f.PeCSTransformations},get PeDefs(){return f.PeDefs},get PeFactory(){return f.PeFactory},get PeGCSExtent(){return f.PeGCSExtent},get PeGTTransformations(){return f.PeGTTransformations},get PeGTlistExtended(){return f.PeGTlistExtended},get PeGTlistExtendedEntry(){return f.PeGTlistExtendedEntry},get PeNotationDms(){return f.PeNotationDms},get PeNotationMgrs(){return f.PeNotationMgrs},get PeNotationUsng(){return f.PeNotationUsng},get PeNotationUtm(){return f.PeNotationUtm},
get PePCSInfo(){return f.PePCSInfo},get PeVersion(){return f.PeVersion},_init:h,get _pe(){return f._pe},isLoaded:fa,isSupported:U,load:K},Symbol.toStringTag,{value:"Module"}));f._init=h;f.isLoaded=fa;f.isSupported=U;f.load=K;f.pe=e})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(l,f){const la=Math.PI/180;var ba=f.earth.radius;const R=f.earth.eccentricitySquared;ba={a1:ba*R,a2:ba*R*ba*R,a3:ba*R*R/2,a4:ba*R*ba*R*2.5,a5:ba*R+ba*R*R/2,a6:1-R};f={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:f.earth.radius,f:f.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:f.moon.radius,f:f.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:f.mars.radius,f:f.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:f.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};l.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;l.earthEllipsoidConstants=ba;l.spheroids=f;l.toRadians=la;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./GeographicTransformationStep"],function(l,f){return function(){function la(R){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(R&&R.steps)for(const fa of R.steps)fa instanceof f?this.steps.push(fa):this.steps.push(new f({wkid:fa.wkid,wkt:fa.wkt,isInverse:fa.isInverse}))}la.cacheKey=function(R,fa){return[void 0!==R.wkid&&null!==R.wkid?R.wkid.toString():"-1",void 0!==R.wkt&&null!==R.wkt?R.wkt.toString():"",void 0!==fa.wkid&&null!==fa.wkid?fa.wkid.toString():"-1",void 0!==
fa.wkt&&null!==fa.wkt?fa.wkt.toString():""].join()};la.fromGE=function(R){const fa=new la;let U="";for(const K of R.steps)R=f.fromGE(K),fa.steps.push(R),U+=R.uid.toString()+",";fa._cachedProjection={};fa._gtlistentry=null;fa._chain=U;return fa};var ba=la.prototype;ba.getInverse=function(){const R=new la;R.steps=[];for(let fa=this.steps.length-1;0<=fa;fa--)R.steps.push(this.steps[fa].getInverse());return R};ba.getGTListEntry=function(){let R="";for(const fa of this.steps)R+=fa.uid.toString()+",";R!==
this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=R);return this._gtlistentry};ba.assignCachedGe=function(R,fa,U){this._cachedProjection[la.cacheKey(R,fa)]=U};ba.getCachedGeTransformation=function(R,fa){let U="";for(const K of this.steps)U+=K.uid.toString()+",";U!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=U);R=this._cachedProjection[la.cacheKey(R,fa)];return void 0===R?null:R};return l._createClass(la)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(l){let f=0;return function(){function la(ba){this.uid=f++;ba?(this._wkt=null!=ba.wkt?ba.wkt:null,this._wkid=null!=ba.wkid?ba.wkid:-1,this._isInverse=null!=ba.isInverse?!0===ba.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}la.fromGE=function(ba){const R=new la;R._wkt=ba.wkt;R._wkid=ba.wkid;R._isInverse=ba.isInverse;return R};la.prototype.getInverse=function(){const ba=new la;ba._wkt=this.wkt;ba._wkid=this._wkid;ba._isInverse=!this.isInverse;return ba};l._createClass(la,[{key:"wkt",
get:function(){return this._wkt},set:function(ba){this._wkt=ba;this.uid=f++}},{key:"wkid",get:function(){return this._wkid},set:function(ba){this._wkid=ba;this.uid=f++}},{key:"isInverse",get:function(){return this._isInverse},set:function(ba){this._isInverse=ba;this.uid=f++}}]);return la}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/unitUtils","./spatialReferenceUtils"],function(l,f,la){l.getGeometryZScaler=function(ba,R,fa){if(null==R||null==fa||fa.vcsWkid||la.equals(R,
fa))return null;R=f.getMetersPerVerticalUnitForSR(R);fa=f.getMetersPerVerticalUnitForSR(fa);const U=R/fa;if(1===U)return null;switch(ba){case "point":case "esriGeometryPoint":return K=>{K&&null!=K.z&&(K.z*=U)};case "polyline":case "esriGeometryPolyline":return K=>{if(K)for(const h of K.paths)for(const k of h)2<k.length&&(k[2]*=U)};case "polygon":case "esriGeometryPolygon":return K=>{if(K)for(const h of K.rings)for(const k of h)2<k.length&&(k[2]*=U)};case "multipoint":case "esriGeometryMultipoint":return K=>
{if(K)for(const h of K.points)2<h.length&&(h[2]*=U)};case "extent":case "esriGeometryEnvelope":return K=>{K&&null!=K.zmin&&null!=K.zmax&&(K.zmin*=U,K.zmax*=U)};default:return null}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(l,f,la,ba,R,fa,U,K,h,k,t){function O(r){const n=[];let x=0,J=0;for(let z=0;z<r.length;z++){const A=r[z];let B=null;for(let y=0;y<A.length;y++)B=A[y],n.push(B),0===y?J=x=B[0]:(x=Math.min(x,B[0]),J=Math.max(J,B[0]));B&&n.push([(x+J)/2,0])}return n}function C(r,n){if(!(r instanceof fa||r instanceof R))throw Q.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new la("straightLineDensify: the input geometry is neither polyline nor polygon");var x=U.getGeometryParts(r);
const J=[];for(const A of x){x=[];J.push(x);x.push([A[0][0],A[0][1]]);for(let B=0;B<A.length-1;B++){const y=A[B][0],D=A[B][1],I=A[B+1][0],X=A[B+1][1];var z=Math.sqrt((I-y)*(I-y)+(X-D)*(X-D));const ia=(X-D)/z,N=(I-y)/z,M=z/n;if(1<M){for(let v=1;v<=M-1;v++){const w=v*n;x.push([N*w+y,ia*w+D])}z=(z+Math.floor(M-1)*n)/2;x.push([N*z+y,ia*z+D])}x.push([I,X])}}return"polygon"===r.type?new R({rings:J,spatialReference:r.spatialReference}):new fa({paths:J,spatialReference:r.spatialReference})}function P(r,n,
x){n&&(r=C(r,1E6),r=h.webMercatorToGeographic(r,!0));x&&(r=U.updatePolyGeometry(r,x));return r}function e(r,n,x){if(Array.isArray(r)){var J=r[0];J>n?(x=U.offsetMagnitude(J,n),r[0]=J+-2*x*n):J<x&&(n=U.offsetMagnitude(J,x),r[0]=J+-2*n*x)}else J=r.x,J>n?(x=U.offsetMagnitude(J,n),r=r.clone().offset(-2*x*n,0)):J<x&&(n=U.offsetMagnitude(J,x),r=r.clone().offset(-2*n*x,0));return r}function p(r,n){let x=-1;for(let J=0;J<n.cutIndexes.length;J++){const z=n.cutIndexes[J],A=n.geometries[J],B=U.getGeometryParts(A);
for(let y=0;y<B.length;y++){const D=B[y];D.some(I=>{if(180>I[0])return!0;I=0;for(var X=0;X<D.length;X++){var ia=D[X][0];I=ia>I?ia:I}I=Number(I.toFixed(9));I=-360*U.offsetMagnitude(I,180);for(X=0;X<D.length;X++)ia=A.getPoint(y,X),A.setPoint(y,X,ia.clone().offset(I,0));return!0})}if(z===x)if("polygon"===r[0].type)for(const y of U.getGeometryParts(A))r[z]=r[z].addRing(y);else{if("polyline"===r[0].type)for(const y of U.getGeometryParts(A))r[z]=r[z].addPath(y)}else x=z,r[z]=A}return r}async function E(r,
n,x){if(!Array.isArray(r))return E([r],n);n&&"string"!==typeof n&&Q.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var J="string"===typeof n?n:n?.url??f.geometryServiceUrl;let z,A,B;let y=0;var D=[];n=[];for(var I of r)if(null==I)n.push(I);else{if(!X){var X=I.spatialReference;var ia=K.getInfo(X);var N=(z=X.isWebMercator)?102100:4326;A=U.cutParams[N].maxX;B=U.cutParams[N].minX;var M=U.cutParams[N].plus180Line;N=U.cutParams[N].minus180Line}if(ia)if("mesh"===
I.type)n.push(I);else if("point"===I.type)n.push(e(I.clone(),A,B));else if("multipoint"===I.type){var v=I.clone();v.points=v.points.map(w=>e(w,A,B));n.push(v)}else if("extent"===I.type)v=I.clone()._normalize(!1,!1,ia),n.push(v.rings?new R(v):v);else if(I.extent){v=I.extent;const w=2*U.offsetMagnitude(v.xmin,B)*A;let Z=0===w?I.clone():U.updatePolyGeometry(I.clone(),w);v.offset(w,0);v.intersects(M)&&v.xmax!==A?(y=v.xmax>y?v.xmax:y,Z=P(Z,z),D.push(Z),n.push("cut")):v.intersects(N)&&v.xmin!==B?(y=2*v.xmax*
A>y?2*v.xmax*A:y,Z=P(Z,z,360),D.push(Z),n.push("cut")):n.push(Z)}else n.push(I.clone());else n.push(I)}X=U.offsetMagnitude(y,A);ia=-90;M=X;for(I=new fa;0<X;)N=-180+360*X,I.addPath([[N,ia],[N,-1*ia]]),ia*=-1,X--;if(0<D.length&&0<M){X=await k.cut(J,D,I,x);X=p(D,X);ia=[];D=[];for(M=0;M<n.length;M++)I=n[M],"cut"!==I?D.push(I):(I=X.shift(),N=r[M],null!=N&&"polygon"===N.type&&N.rings&&1<N.rings.length&&I.rings.length>=N.rings.length?(ia.push(I),D.push("simplify")):D.push(z?h.geographicToWebMercator(I):
I));if(!ia.length)return D;n=await t.simplify(J,ia,x);r=[];for(x=0;x<D.length;x++)J=D[x],"simplify"!==J?r.push(J):r.push(z?h.geographicToWebMercator(n.shift()):n.shift());return r}r=[];for(x=0;x<n.length;x++)J=n[x],"cut"!==J?r.push(J):(J=D.shift(),r.push(!0===z?h.geographicToWebMercator(J):J));return r}const Q=ba.getLogger("esri.geometry.support.normalizeUtils");l.getDenormalizedExtent=function(r){if(!r)return null;const n=r.extent;if(!n)return null;var x=r.spatialReference&&K.getInfo(r.spatialReference);
if(!x)return n;const [J,z]=x.valid;({width:x}=n);let {xmin:A,xmax:B}=n;[A,B]=[B,A];if("extent"===r.type||0===x||x<=z||x>2*z||A<J||B>z)return n;let y;switch(r.type){case "polygon":if(1<r.rings.length)y=O(r.rings);else return n;break;case "polyline":if(1<r.paths.length)y=O(r.paths);else return n;break;case "multipoint":y=r.points}r=n.clone();for(let D=0;D<y.length;D++){let I=y[D][0];0>I?(I+=z,B=Math.max(I,B)):(I-=z,A=Math.min(I,A))}r.xmin=A;r.xmax=B;return r.width<x?(r.xmin-=z,r.xmax-=z,r):n};l.normalizeCentralMeridian=
E;l.normalizeMapX=function(r,n){if(n=K.getInfo(n)){const [x,J]=n.valid;n=J-x;if(r<x)for(;r<x;)r+=n;if(r>J)for(;r>J;)r-=n}return r};l.straightLineDensify=C;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(l,f,la,ba){function R(fa){return ba.isPolygon(fa)?fa.rings:fa.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new f({paths:[[[2.0037508342788905E7,
-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:la.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:la.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:la.WGS84}),minus180Line:new f({paths:[[[-180,-180],[-180,180]]],spatialReference:la.WGS84})}};l.cutParams=f;l.getGeometryParts=R;l.offsetMagnitude=function(fa,
U){return Math.ceil((fa-U)/(2*U))};l.updatePolyGeometry=function(fa,U){const K=R(fa);for(const h of K)for(const k of h)k[0]+=U;return fa};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(l,f,la,ba,R){l.cut=async function(fa,U,K,h){fa=R.parseUrl(fa);const k=U[0].spatialReference;U={...h,query:{...fa.query,f:"json",sr:JSON.stringify(k),
target:JSON.stringify({geometryType:ba.getJsonType(U[0]),geometries:U}),cutter:JSON.stringify(K)}};U=await la(fa.path+"/cut",U);const {cutIndexes:t,geometries:O=[]}=U.data;return{cutIndexes:t,geometries:O.map(C=>{C=ba.fromJSON(C);C.spatialReference=k;return C})}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(l,f,la,ba,R,fa){function U(K,h,k){const t=
{};for(const C in K)if("declaredClass"!==C){var O=K[C];if(null!=O&&"function"!==typeof O)if(Array.isArray(O)){t[C]=[];for(let P=0;P<O.length;P++)t[C][P]=U(O[P])}else"object"===typeof O?O.toJSON?(O=O.toJSON(k&&k[C]),t[C]=h?O:JSON.stringify(O)):t[C]=h?O:JSON.stringify(O):t[C]=O}return t}l.asValidOptions=function(K,h){return h?{...h,query:{...(K??{}),...h.query}}:{query:K}};l.encode=U;l.getToken=function(K,h){return K?fa.supportsApiKey(K)&&(h||f.apiKey)?h||f.apiKey:la.id?.findCredential(K)?.token:null};
l.parseUrl=function(K){return"string"===typeof K?R.urlToObject(K):ba.clone(K)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports","../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(l,f,la,ba,R){l.simplify=async function(fa,U,K){const h="string"===typeof fa?la.urlToObject(fa):fa;fa=U[0].spatialReference;const k=ba.getJsonType(U[0]);U={...K,query:{...h.query,f:"json",sr:fa.wkid??
JSON.stringify(fa),geometries:JSON.stringify(R.encodeGeometries(U))}};({data:U}=await f(h.path+"/simplify",U));return R.decodeGeometries(U.geometries,k,fa)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(l,f){l.decodeGeometries=function(la,ba,R){const fa=f.getGeometryType(ba);return la.map(U=>{U=fa.fromJSON(U);U.spatialReference=R;return U})};l.encodeGeometries=function(la){return{geometryType:f.getJsonType(la[0]),
geometries:la.map(ba=>ba.toJSON())}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(l,f,la,ba,R,fa,U){function K(e,p){if(!p)return null;if("x"in p){var E={x:0,y:0};
[E.x,E.y]=e(p.x,p.y,t);null!=p.z&&(E.z=p.z);null!=p.m&&(E.m=p.m);return E}return"xmin"in p?(E={xmin:0,ymin:0,xmax:0,ymax:0},[E.xmin,E.ymin]=e(p.xmin,p.ymin,t),[E.xmax,E.ymax]=e(p.xmax,p.ymax,t),p.hasZ&&(E.zmin=p.zmin,E.zmax=p.zmax,E.hasZ=!0),p.hasM&&(E.mmin=p.mmin,E.mmax=p.mmax,E.hasM=!0),E):"rings"in p?{rings:h(p.rings,e),hasM:p.hasM,hasZ:p.hasZ}:"paths"in p?{paths:h(p.paths,e),hasM:p.hasM,hasZ:p.hasZ}:"points"in p?{points:k(p.points,e),hasM:p.hasM,hasZ:p.hasZ}:null}function h(e,p){const E=[];for(const Q of e)E.push(k(Q,
p));return E}function k(e,p){const E=[];for(const Q of e)e=p(Q[0],Q[1],[0,0]),E.push(e),2<Q.length&&e.push(Q[2]),3<Q.length&&e.push(Q[3]);return E}const t=[0,0],O=K.bind(null,U.lngLatToXY),C=K.bind(null,U.xyToLngLat),P=new (function(){function e(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var p=e.prototype;p.push=async function(E,Q,r){if(!(E&&E.length&&Q&&r)||fa.equals(Q,r))return E;const n={geometries:E,inSpatialReference:Q,outSpatialReference:r,resolve:null};this._jobs.push(n);
return new Promise(x=>{n.resolve=x;null===this._timer&&(this._timer=setTimeout(this._process,10))})};p._process=function(){this._timer=null;const E=this._jobs.shift();if(E){var {geometries:Q,inSpatialReference:r,outSpatialReference:n,resolve:x}=E;U.canProject(r,n)?fa.isWebMercator(n)?x(Q.map(O)):x(Q.map(C)):x(ba.projectMany(R.jsonAdapter,Q,r,n,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return f._createClass(e)}());l.checkProjectionSupport=async function(e,p){e&&
p&&(e=Array.isArray(e)?e.map(E=>null!=E.geometry?E.geometry.spatialReference:null).filter(la.isSome):[e],await ba.initializeProjection(e.map(E=>({source:E,dest:p}))))};l.project=function(e,p,E,Q){if(!e)return e;E||(E=p,p=e.spatialReference);return fa.isValid(p)&&fa.isValid(E)&&!fa.equals(p,E)?U.canProject(p,E)?(e=fa.isWebMercator(E)?O(e):C(e),e.spatialReference=E,e):ba.projectMany(R.jsonAdapter,[e],p,E,null,Q)[0]:e};l.projectMany=function(e,p,E){return P.push(e,p,E)};Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(l,f){let la=f._createClass(function(K,h,k){this.x=K;this.y=h;this.spatialReference=k;this.m=this.z=void 0}),ba=f._createClass(function(K,h,k,t){this.rings=K;this.spatialReference=h;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);t&&(this.hasM=t)}),R=f._createClass(function(K,h,k,t){this.paths=K;this.spatialReference=h;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);t&&
(this.hasM=t)}),fa=f._createClass(function(K,h,k,t){this.points=K;this.spatialReference=h;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);t&&(this.hasM=t)}),U=f._createClass(function(K,h,k,t,O){this.xmin=K;this.ymin=h;this.xmax=k;this.ymax=t;this.spatialReference=O;this.mmax=this.mmin=this.zmax=this.zmin=void 0});l.jsonAdapter={convertToGEGeometry:function(K,h){return null==h?null:K.convertJSONToGeometry(h)},exportPoint:function(K,h,k){k=new la(K.getPointX(h),K.getPointY(h),k);const t=K.hasZ(h),O=K.hasM(h);
t&&(k.z=K.getPointZ(h));O&&(k.m=K.getPointM(h));return k},exportPolygon:function(K,h,k){return new ba(K.exportPaths(h),k,K.hasZ(h),K.hasM(h))},exportPolyline:function(K,h,k){return new R(K.exportPaths(h),k,K.hasZ(h),K.hasM(h))},exportMultipoint:function(K,h,k){return new fa(K.exportPoints(h),k,K.hasZ(h),K.hasM(h))},exportExtent:function(K,h,k){var t=K.hasZ(h);const O=K.hasM(h);k=new U(K.getXMin(h),K.getYMin(h),K.getXMax(h),K.getYMax(h),k);t&&(t=K.getZExtent(h),k.zmin=t.vmin,k.zmax=t.vmax);O&&(K=K.getMExtent(h),
k.mmin=K.vmin,k.mmax=K.vmax);return k}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(l,f,la,ba,R,fa,U,K,h,k,t,O,C,P,e,p,E,Q,r,n,x,J,z,A,B,y){function D(M){return null!=M&&M.every(v=>"exceedslimit"!==v.statisticType)}let I=f._createClass(function(M,v=null,w,Z,ja){this.attributes=M;this.geometry=w;this.centroid=Z;this.filterFlags=ja;this.groupId=-1;this.displayId=v});const X=new U.MemCacheStorage(2E6);let ia=0,N=function(){function M(w){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:r.queryCapabilities};this.geometryType=w.geometryType;this.hasM=
!!w.hasM;this.hasZ=!!w.hasZ;this.objectIdField=w.objectIdField;this.spatialReference=w.spatialReference;this.definitionExpression=w.definitionExpression;this.featureStore=w.featureStore;this.aggregateAdapter=w.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=w.timeInfo;w.cacheSpatialQueries&&(this._geometryQueryCache=new U.MemCache(ia++ +"$$",X));this.fieldsIndex=new A(w.fields);w.scheduler&&w.priority&&(this._frameTask=w.scheduler.registerTask(w.priority))}
var v=M.prototype;v.destroy=function(){this._frameTask=fa.removeMaybe(this._frameTask);this.clearCache();fa.destroyMaybe(this._geometryQueryCache);this._changeHandle=fa.removeMaybe(this._changeHandle);fa.destroyMaybe(this.fieldsIndex)};v.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};v.executeQuery=async function(w,Z){try{return(await this._executeQuery(w,{},Z)).createQueryResponse()}catch(ja){if(ja!==z.QUERY_ENGINE_EMPTY_RESULT)throw ja;
return(new n.QueryEngineResult([],w,this)).createQueryResponse()}};v.executeQueryForCount=async function(w={},Z){try{return(await this._executeQuery(w,{returnGeometry:!1,returnCentroid:!1,outSR:null},Z)).createQueryResponseForCount()}catch(ja){if(ja!==z.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}};v.executeQueryForExtent=async function(w,Z){const ja=w.outSR;try{const va=await this._executeQuery(w,{returnGeometry:!0,returnCentroid:!1,outSR:null},Z),Ba=va.size;if(!Ba)return{count:0,extent:null};const Ea=
await this._getBounds(va.items,va.spatialReference,ja||this.spatialReference);return{count:Ba,extent:Ea}}catch(va){if(va===z.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw va;}};v.executeQueryForIds=async function(w,Z){return this.executeQueryForIdSet(w,Z).then(ja=>Array.from(ja))};v.executeQueryForIdSet=async function(w,Z){try{const ja=await this._executeQuery(w,{returnGeometry:!0,returnCentroid:!1,outSR:null},Z),va=ja.items,Ba=new Set;await this._reschedule(()=>{for(const Ea of va)Ba.add(ja.featureAdapter.getObjectId(Ea))},
Z);return Ba}catch(ja){if(ja===z.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ja;}};v.executeQueryForSnapping=async function(w,Z){const {point:ja,distance:va,returnEdge:Ba,returnVertex:Ea}=w;if(!Ba&&!Ea)return{candidates:[]};const Fa=await this._reschedule(()=>this._checkQuerySupport(w.query),Z),Ma=!e.equals(ja.spatialReference,this.spatialReference);Ma&&await Q.checkProjectionSupport(ja.spatialReference,this.spatialReference);var Ha="number"===typeof va?va:va.x,Ua="number"===typeof va?va:va.y;
Ha={xmin:ja.x-Ha,xmax:ja.x+Ha,ymin:ja.y-Ua,ymax:ja.y+Ua,spatialReference:ja.spatialReference};Ha=Ma?Q.project(Ha,this.spatialReference):Ha;if(!Ha)return{candidates:[]};Ua=(await P.normalizeCentralMeridian(C.fromJSON(ja),null,{signal:Z}))[0];const Sa=(await P.normalizeCentralMeridian(C.fromJSON(Ha),null,{signal:Z}))[0];if(null==Ua||null==Sa)return{candidates:[]};const Va=new n.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Sa.toJSON())),Z),Fa,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Va),Z);await this._reschedule(()=>this._executeTimeQuery(Va),Z);await this._reschedule(()=>this._executeAttributesQuery(Va),Z);Z=Ua.toJSON();Z=Ma?Q.project(Z,this.spatialReference):Z;return Va.createSnappingResponse({...w,point:Z,distance:Ma?Math.max(Ha.xmax-Ha.xmin,Ha.ymax-Ha.ymin)/2:va},ja.spatialReference)};v.executeQueryForLatestObservations=async function(w,Z){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new ba("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:w,timeInfo:this.timeInfo});try{const ja=await this._executeQuery(w,{},Z);await this._reschedule(()=>this._filterLatest(ja),Z);return ja.createQueryResponse()}catch(ja){if(ja!==z.QUERY_ENGINE_EMPTY_RESULT)throw ja;return(new n.QueryEngineResult([],w,this)).createQueryResponse()}};v.executeQueryForSummaryStatistics=async function(w={},Z,ja){const {field:va,normalizationField:Ba,valueExpression:Ea}=Z;return(await this._getQueryEngineResultForStats(w,{field:va,normalizationField:Ba,valueExpression:Ea},
ja)).createSummaryStatisticsResponse(Z)};v.executeQueryForUniqueValues=async function(w={},Z,ja){const {field:va,field2:Ba,field3:Ea,valueExpression:Fa}=Z;return(await this._getQueryEngineResultForStats(w,{field:va,field2:Ba,field3:Ea,valueExpression:Fa},ja)).createUniqueValuesResponse(Z)};v.executeQueryForClassBreaks=async function(w={},Z,ja){const {field:va,normalizationField:Ba,valueExpression:Ea}=Z;return(await this._getQueryEngineResultForStats(w,{field:va,normalizationField:Ba,valueExpression:Ea},
ja)).createClassBreaksResponse(Z)};v.executeQueryForHistogram=async function(w={},Z,ja){const {field:va,normalizationField:Ba,valueExpression:Ea}=Z;return(await this._getQueryEngineResultForStats(w,{field:va,normalizationField:Ba,valueExpression:Ea},ja)).createHistogramResponse(Z)};v.fetchRecomputedExtents=async function(w){const [Z,ja]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),
this.spatialReference,this.spatialReference),null!=this._timeExtentPromise?this._timeExtentPromise:this._timeExtentPromise=J.getTimeExtent(this.timeInfo,this.featureStore)]);K.throwIfAborted(w);return{fullExtent:Z,timeExtent:ja}};v._getBounds=async function(w,Z,ja){const va=k.set(k.create(),k.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(w,Ba=>k.expandWithAABB(va,Ba));w={xmin:va[0],ymin:va[1],xmax:va[3],ymax:va[4],spatialReference:z.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&
isFinite(va[2])&&isFinite(va[5])&&(w.zmin=va[2],w.zmax=va[5]);Z=Q.project(w,Z,ja);Z.spatialReference=z.cleanFromGeometryEngine(ja);0===Z.xmax-Z.xmin&&(ja=h.getMetersPerUnitForSR(Z.spatialReference),Z.xmin-=ja,Z.xmax+=ja);0===Z.ymax-Z.ymin&&(ja=h.getMetersPerUnitForSR(Z.spatialReference),Z.ymin-=ja,Z.ymax+=ja);this.hasZ&&null!=Z.zmin&&null!=Z.zmax&&0===Z.zmax-Z.zmin&&(ja=h.getMetersPerUnitForSR(Z.spatialReference),Z.zmin-=ja,Z.zmax+=ja);return Z};v._schedule=async function(w,Z){return null!=this._frameTask?
this._frameTask.schedule(w,Z):w(y.noBudget)};v._reschedule=async function(w,Z){return null!=this._frameTask?this._frameTask.reschedule(w,Z):w(y.noBudget)};v._getAllFeaturesQueryEngineResult=async function(w){return new n.QueryEngineResult(await this._getAllFeatures(),w,this)};v._getAllFeatures=async function(){if(null==this._allFeaturesPromise){const ja=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(va=>ja.push(va))})().then(()=>ja)}const w=this._allFeaturesPromise,Z=await w;
return w===this._allFeaturesPromise?Z.slice():this._getAllFeatures()};v._executeQuery=async function(w,Z,ja){w=R.clone(w);w=await this._schedule(()=>z.normalizeQuery(w,this.definitionExpression,this.spatialReference),ja);w=await this._reschedule(()=>this._checkQuerySupport(w),ja);w={...w,...Z};const va=await this._reschedule(()=>this._executeSceneFilterQuery(w,ja),ja),Ba=await this._reschedule(()=>this._executeGeometryQuery(w,va,ja),ja);await this._reschedule(()=>this._executeAggregateIdsQuery(Ba),
ja);await this._reschedule(()=>this._executeObjectIdsQuery(Ba),ja);await this._reschedule(()=>this._executeTimeQuery(Ba),ja);await this._reschedule(()=>this._executeAttributesQuery(Ba),ja);return Ba};v._executeSceneFilterQuery=async function(w,Z){if(null==w.sceneFilter)return null;const {outSR:ja,returnGeometry:va,returnCentroid:Ba}=w;var Ea=this.featureStore.featureSpatialReference,Fa=w.sceneFilter.geometry;const Ma=null==Ea||e.equals(Ea,Fa.spatialReference)?Fa:Q.project(Fa,Ea);if(!Ma)return null;
Ea=va||Ba;Ea=e.isValid(ja)&&!e.equals(this.spatialReference,ja)&&Ea?async Va=>this._project(Va,ja):Va=>Va;const Ha=this.featureAdapter;Fa=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ma)),Z);if("disjoint"===w.sceneFilter.spatialRelationship){if(!Fa.length)return null;const Va=new Set;for(var Ua of Fa)Va.add(Ha.getObjectId(Ua));const eb=await this._reschedule(()=>this._getAllFeatures(),Z);Ua=await this._reschedule(async()=>{const kb=await x.getSpatialQueryOperator("esriSpatialRelDisjoint",
Ma,this.geometryType,this.hasZ,this.hasM),jb=await this._runSpatialFilter(eb,db=>!Va.has(Ha.getObjectId(db))||kb(Ha.getGeometry(db)),Z);return new n.QueryEngineResult(jb,w,this)},Z);return Ea(Ua)}if(!Fa.length)return new n.QueryEngineResult([],w,this);if(this._canExecuteSinglePass(Ma,w))return Ea(new n.QueryEngineResult(Fa,w,this));const Sa=await x.getSpatialQueryOperator("esriSpatialRelContains",Ma,this.geometryType,this.hasZ,this.hasM);Ua=await this._runSpatialFilter(Fa,Va=>Sa(Ha.getGeometry(Va)),
Z);return Ea(new n.QueryEngineResult(Ua,w,this))};v._executeGeometryQuery=async function(w,Z,ja){if(null!=Z&&0===Z.items.length)return Z;w=null!=Z?Z.query:w;const {geometry:va,outSR:Ba,spatialRel:Ea,returnGeometry:Fa,returnCentroid:Ma}=w;var Ha=this.featureStore.featureSpatialReference;const Ua=!va||null==Ha||e.equals(Ha,va.spatialReference)?va:Q.project(va,Ha),Sa=Fa||Ma,Va=e.isValid(Ba)&&!e.equals(this.spatialReference,Ba),eb=this._geometryQueryCache&&null==Z?Va&&Sa?JSON.stringify({originalFilterGeometry:va,
spatialRelationship:Ea,outSpatialReference:Ba}):JSON.stringify({originalFilterGeometry:va,spatialRelationship:Ea}):null;Ha=eb?this._geometryQueryCache.get(eb):null;if(null!=Ha)return new n.QueryEngineResult(Ha,w,this);Ha=async q=>{Va&&Sa&&await this._project(q,Ba);eb&&this._geometryQueryCache.put(eb,q.items,q.items.length+1);return q};if(!Ua)return Ha(null!=Z?Z:await this._getAllFeaturesQueryEngineResult(w));const kb=this.featureAdapter;let jb=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(va)),
ja);if("esriSpatialRelDisjoint"===Ea){if(!jb.length)return Ha(null!=Z?Z:await this._getAllFeaturesQueryEngineResult(w));const q=new Set;for(var db of jb)q.add(kb.getObjectId(db));const da=null!=Z?Z.items:await this._reschedule(()=>this._getAllFeatures(),ja);db=await this._reschedule(async()=>{const F=await x.getSpatialQueryOperator(Ea,Ua,this.geometryType,this.hasZ,this.hasM),aa=await this._runSpatialFilter(da,m=>!q.has(kb.getObjectId(m))||F(kb.getGeometry(m)),ja);return new n.QueryEngineResult(aa,
w,this)},ja);return Ha(db)}if(null!=Z){const q=new la.PositionHint;jb=jb.filter(da=>0<=la.indexOf(Z.items,da,Z.items.length,q))}if(!jb.length)return Ha=new n.QueryEngineResult([],w,this),eb&&this._geometryQueryCache.put(eb,Ha.items,1),Ha;if(this._canExecuteSinglePass(Ua,w))return Ha(new n.QueryEngineResult(jb,w,this));const c=await x.getSpatialQueryOperator(Ea,Ua,this.geometryType,this.hasZ,this.hasM);db=await this._runSpatialFilter(jb,q=>c(kb.getGeometry(q)),ja);return Ha(new n.QueryEngineResult(db,
w,this))};v._executeAggregateIdsQuery=function(w){if(0!==w.items.length&&w.query.aggregateIds&&w.query.aggregateIds.length&&null!=this.aggregateAdapter){var Z=new Set;for(const va of w.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(va).forEach(Ba=>Z.add(Ba));var ja=this.featureAdapter.getObjectId;w.items=w.items.filter(va=>Z.has(ja(va)))}};v._executeObjectIdsQuery=function(w){if(0!==w.items.length&&w.query.objectIds&&w.query.objectIds.length){var Z=new Set(w.query.objectIds),ja=this.featureAdapter.getObjectId;
w.items=w.items.filter(va=>Z.has(ja(va)))}};v._executeTimeQuery=function(w){if(0!==w.items.length){var Z=J.getTimeOperator(this.timeInfo,w.query.timeExtent,this.featureAdapter);null!=Z&&(w.items=w.items.filter(Z))}};v._executeAttributesQuery=function(w){if(0!==w.items.length){var Z=E.getWhereClause(w.query.where,this.fieldsIndex);if(Z){if(!Z.isStandardized)throw new TypeError("Where clause is not standardized");w.items=w.items.filter(ja=>Z.testFeature(ja,this.featureAdapter))}}};v._runSpatialFilter=
async function(w,Z,ja){if(!Z)return w;if(null==this._frameTask)return w.filter(Fa=>Z(Fa));let va=0;const Ba=[],Ea=async Fa=>{for(;va<w.length;){const Ma=w[va++];Z(Ma)&&(Ba.push(Ma),Fa.madeProgress());Fa.done&&await this._reschedule(Ha=>Ea(Ha),ja)}};return this._reschedule(Fa=>Ea(Fa),ja).then(()=>Ba)};v._filterLatest=function(w){const {trackIdField:Z,startTimeField:ja,endTimeField:va}=this.timeInfo,Ba=va||ja,Ea=new Map,Fa=this.featureAdapter.getAttribute;for(const Ma of w.items){const Ha=Fa(Ma,Z),
Ua=Fa(Ma,Ba),Sa=Ea.get(Ha);(!Sa||Ua>Fa(Sa,Ba))&&Ea.set(Ha,Ma)}w.items=Array.from(Ea.values())};v._canExecuteSinglePass=function(w,Z){({spatialRel:Z}=Z);return x.canQueryWithRBush(w)&&("esriSpatialRelEnvelopeIntersects"===Z||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===Z||"esriSpatialRelContains"===Z||"esriSpatialRelWithin"===Z))};v._project=async function(w,Z){if(!Z||e.equals(this.spatialReference,Z))return w;const ja=this.featureAdapter;Z=await Q.projectMany(w.items.map(va=>
z.getGeometry(this.geometryType,this.hasZ,this.hasM,ja.getGeometry(va))),this.spatialReference,Z);w.items=Z.map((va,Ba)=>ja.cloneWithGeometry(w.items[Ba],p.convertFromGeometry(va,this.hasZ,this.hasM)));return w};v._getQueryBBoxes=function(w){if(x.canQueryWithRBush(w)){if(C.isExtent(w))return[t.fromValues(w.xmin,w.ymin,w.xmax,w.ymax)];if(C.isPolygon(w))return w.rings.map(Z=>t.fromValues(Math.min(Z[0][0],Z[2][0]),Math.min(Z[0][1],Z[2][1]),Math.max(Z[0][0],Z[2][0]),Math.max(Z[0][1],Z[2][1])))}return[O.getBoundsXY(t.create(),
w)]};v._searchFeatures=async function(w){const Z=new Set;await Promise.all(w.map(ja=>this.featureStore.forEachInBounds(ja,va=>Z.add(va))));w=Array.from(Z.values());Z.clear();return w};v._checkStatisticsSupport=async function(w,Z){if(0>(w.distance??0)||null!=w.geometryPrecision||w.multipatchOption||w.pixelSize||w.relationParam||w.text||w.outStatistics||w.groupByFieldsForStatistics||w.having||w.orderByFields)throw new ba("feature-store:unsupported-query","Unsupported query options",{query:w});this._checkAttributesQuerySupport(w);
return Promise.all([this._checkStatisticsParamsSupport(Z,w),x.checkSpatialQuerySupport(w,this.geometryType,this.spatialReference),Q.checkProjectionSupport(this.spatialReference,w.outSR)]).then(()=>w)};v._checkStatisticsParamsSupport=async function(w,Z){var ja=[];w.valueExpression&&({arcadeUtils:ja}=await B.loadArcade(),ja=ja.extractFieldNames(w.valueExpression));w.field&&ja.push(w.field);w.field2&&ja.push(w.field2);w.field3&&ja.push(w.field3);w.normalizationField&&ja.push(w.normalizationField);if(!ja.length&&
!w.valueExpression)throw new ba("feature-store:unsupported-query","field or valueExpression is required",{params:w});E.validateFields(this.fieldsIndex,ja,{errorMessage:"Cannot calculate statistics for missing fields",query:Z});E.validateFieldTypes(this.fieldsIndex,ja,{expressionName:"statistics",query:Z})};v._checkQuerySupport=async function(w){if(0>(w.distance??0)||null!=w.geometryPrecision||w.multipatchOption||w.pixelSize||w.relationParam||w.text)throw new ba("feature-store:unsupported-query","Unsupported query options",
{query:w});this._checkAttributesQuerySupport(w);this._checkStatisticsQuerySupport(w);return Promise.all([x.checkSpatialQuerySupport(w,this.geometryType,this.spatialReference),Q.checkProjectionSupport(this.spatialReference,w.outSR)]).then(()=>w)};v._checkAttributesQuerySupport=function(w){const {outFields:Z,orderByFields:ja,returnDistinctValues:va,outStatistics:Ba}=w,Ea=Ba?Ba.map(Fa=>Fa.outStatisticFieldName&&Fa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ja&&0<ja.length){const Fa=ja.map(Ma=>
{const Ha=Ma.toLowerCase();return Ha.includes(" asc")?Ha.split(" asc")[0]:Ha.includes(" desc")?Ha.split(" desc")[0]:Ma}).filter(Ma=>!Ea.includes(Ma));E.validateFields(this.fieldsIndex,Fa,{expressionName:"orderByFields",query:w})}if(Z&&0<Z.length)E.validateFields(this.fieldsIndex,Z,{expressionName:"outFields",query:w});else if(va)throw new ba("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:w});E.validateWhere(this.fieldsIndex,w.where,w)};v._checkStatisticsQuerySupport=
function(w){const {outStatistics:Z,groupByFieldsForStatistics:ja,having:va}=w;var Ba=ja&&ja.length,Ea=Z&&Z.length;if(va){if(!Ba||!Ea)throw new ba("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:w});E.validateHaving(this.fieldsIndex,va,Z,w)}if(Ea&&D(Z)){Ea=Z.map(Fa=>Fa.onStatisticField).filter(Boolean);E.validateFields(this.fieldsIndex,Ea,{expressionName:"onStatisticFields",query:w});Ba&&E.validateFields(this.fieldsIndex,ja,{expressionName:"groupByFieldsForStatistics",
query:w});Ba=new Set([...E.validNumericTypesKebabDict.jsonValues,...E.validDateTypesKebabDict.jsonValues]);Ea=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...E.validNumericTypesKebabDict.apiValues,...E.validDateTypesKebabDict.apiValues]);for(const Fa of Z){const {onStatisticField:Ma,statisticType:Ha}=Fa;if(("percentile_disc"===Ha||"percentile_cont"===Ha)&&"statisticParameters"in Fa){const {statisticParameters:Ua}=Fa;if(!Ua)throw new ba("feature-store:unsupported-query","statisticParameters should be set for percentile type",
{definition:Fa,query:w});}else if("count"!==Ha&&"min"!==Ha&&"max"!==Ha&&Ma&&E.hasInvalidFieldType(Ma,this.fieldsIndex,Ba))throw new ba("feature-store:unsupported-query",`outStatistics with '${Ha}' statistic type, only supports ${Ea} field types`,{definition:Fa,query:w});}}};v._getQueryEngineResultForStats=async function(w,Z,ja){w=R.clone(w);try{w=await this._schedule(()=>z.normalizeQuery(w,this.definitionExpression,this.spatialReference),ja);w=await this._reschedule(()=>this._checkStatisticsSupport(w,
Z),ja);const va=await this._reschedule(()=>this._executeSceneFilterQuery(w,ja),ja),Ba=await this._reschedule(()=>this._executeGeometryQuery(w,va,ja),ja);await this._reschedule(()=>this._executeAggregateIdsQuery(Ba),ja);await this._reschedule(()=>this._executeObjectIdsQuery(Ba),ja);await this._reschedule(()=>this._executeTimeQuery(Ba),ja);await this._reschedule(()=>this._executeAttributesQuery(Ba),ja);return Ba}catch(va){if(va!==z.QUERY_ENGINE_EMPTY_RESULT)throw va;return new n.QueryEngineResult([],
w,this)}};f._createClass(M,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return M}();l.Feature=I;l.QueryEngine=N;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(l,f,la){l.RemoveMode=void 0;(function(U){U[U.ALL=0]="ALL";U[U.SOME=1]="SOME"})(l.RemoveMode||(l.RemoveMode={}));let ba=function(){function U(h,k,t){this.name=h;this._storage=
k;this.id=`${fa++}:`;this.maxSize=this.size=0;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);t&&(this._storage.registerRemoveFunc(this.id,t),this._removeFunc=!0)}var K=U.prototype;K.destroy=function(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null};K.resetHitRate=function(){this._hit=this._miss=0};K.put=function(h,k,t,O=0){this._storage.put(this,h,k,t,O)};K.get=function(h){h=this._storage.get(this,
h);void 0===h?++this._miss:++this._hit;return h};K.pop=function(h){h=this._storage.pop(this,h);void 0===h?++this._miss:++this._hit;return h};K.updateSize=function(h,k,t){this._storage.updateSize(this,h,k,t)};K.clear=function(){this._storage.clear(this)};K.clearAll=function(){this._storage.clearAll()};K.resetStats=function(){this._storage.resetStats()};f._createClass(U,[{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},
{key:"performanceInfo",get:function(){return this._storage.performanceInfo}}]);return U}(),R=function(){function U(h=10485760){this._maxSize=h;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new la;this._users=new la}var K=U.prototype;K.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};K.register=function(h){this._users.push(h)};K.deregister=function(h){this._users.removeUnordered(h)};K.registerRemoveFunc=function(h,k){this._removeFuncs.push([h,
k])};K.deregisterRemoveFunc=function(h){this._removeFuncs.filterInPlace(k=>k[0]!==h)};K.put=function(h,k,t,O,C){k=h.id+k;const P=this._db.get(k);P&&(this._size-=P.size,h.size-=P.size,this._db.delete(k),P.entry!==t&&this._notifyRemove(k,P.entry,l.RemoveMode.ALL));O>this._maxSize?this._notifyRemove(k,t,l.RemoveMode.ALL):void 0===t?console.warn("Refusing to cache undefined entry "):!O||0>O?console.warn("Refusing to cache entry with invalid size "+O):(C=1+Math.max(C,-3)- -3,this._db.set(k,{entry:t,size:O,
lifetime:C,lives:C}),this._size+=O,h.size+=O,this._checkSizeLimits())};K.updateSize=function(h,k,t,O){k=h.id+k;const C=this._db.get(k);if(C&&C.entry===t){this._size-=C.size;for(h.size-=C.size;O>this._maxSize;)if(O=this._notifyRemove(k,t,l.RemoveMode.SOME),!(null!=O&&0<O)){this._db.delete(k);return}C.size=O;this._size+=O;h.size+=O;this._checkSizeLimits()}};K.pop=function(h,k){k=h.id+k;const t=this._db.get(k);if(t)return this._size-=t.size,h.size-=t.size,this._db.delete(k),++this._hit,t.entry;++this._miss};
K.get=function(h,k){k=h.id+k;h=this._db.get(k);if(void 0===h)++this._miss;else return this._db.delete(k),h.lives=h.lifetime,this._db.set(k,h),++this._hit,h.entry};K.resetStats=function(){this._hit=this._miss=0;this._users.forAll(h=>h.resetHitRate())};K.clear=function(h){const k=h.id;this._db.forEach((t,O)=>{O.startsWith(k)&&(this._size-=t.size,this._db.delete(O),this._notifyRemove(O,t.entry,l.RemoveMode.ALL))});h.size=0};K.clearAll=function(){this._db.forEach((h,k)=>this._notifyRemove(k,h.entry,l.RemoveMode.ALL));
this._users.forEach(h=>h.size=0);this._size=0;this._db.clear()};K._getHitRate=function(){return this._hit/(this._hit+this._miss)};K._notifyRemove=function(h,k,t){let O;this._removeFuncs.some(C=>h.startsWith(C[0])?(C=C[1](k,t),"number"===typeof C&&(O=C),!0):!1);return O};K._checkSizeLimits=function(){if(this._size>this._maxSize)for(const [h,k]of this._db)if(this._purgeItem(h,k),this._size<=.9*this.maxSize)return;this._users.forEach(h=>{if(0<h.maxSize&&h.size>h.maxSize)for(const [k,t]of this._db)if(k.startsWith(h.id)&&
(this._purgeItem(k,t,h),h.size<=.9*h.maxSize))break})};K._purgeItem=function(h,k,t=this._users.find(O=>h.startsWith(O.id))){this._db.delete(h);if(1>=k.lives){this._size-=k.size;t&&(t.size-=k.size);const O=this._notifyRemove(h,k.entry,l.RemoveMode.SOME);null!=O&&0<O&&(this._size+=O,t&&(t.size+=O),k.lives=k.lifetime,k.size=O,this._db.set(h,k))}else--k.lives,this._db.set(h,k)};f._createClass(U,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(h){this._maxSize=
Math.max(h,0);this._checkSizeLimits()}},{key:"performanceInfo",get:function(){const h={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},k={},t=[];this._db.forEach((P,e)=>{const p=P.lifetime;t[p]=(t[p]||0)+P.size;this._users.forAll(E=>{const {id:Q,name:r}=E;e.startsWith(Q)&&(k[r]=(k[r]||0)+P.size)})});const O={};this._users.forAll(P=>{const e=P.name;"hitRate"in P&&"number"===typeof P.hitRate&&
!isNaN(P.hitRate)&&0<P.hitRate?(k[e]=k[e]||0,O[e]=Math.round(100*P.hitRate)+"%"):O[e]="0%"});var C=Object.keys(k);C.sort((P,e)=>k[e]-k[P]);C.forEach(P=>h[P]=Math.round(k[P]/2**20)+"MB / "+O[P]);for(C=t.length-1;0<=C;--C){const P=t[C];P&&(h["Priority "+(C+-3-1)]=Math.round(P/this._size*100)+"%")}return h}}]);return U}(),fa=0;l.MIN_PRIORITY=-3;l.MemCache=ba;l.MemCacheStorage=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/jsonMap","../../../core/sql/WhereClauseCache"],function(l,f,la,ba){function R(E,Q,r={}){Q=fa(E,Q);if(!Q)throw new f("feature-store:unsupported-query","invalid SQL expression",{expression:E});const n=r.expressionName||"expression";if(r.validateStandardized&&!Q.isStandardized)throw new f("feature-store:unsupported-query",`${n} is not standard`,{expression:E});if(r.validateAggregate&&!Q.isAggregate)throw new f("feature-store:unsupported-query",`${n} does not contain a valid aggregate function`,
{expression:E});return Q.fieldNames}function fa(E,Q){return E?O.get(E,Q):null}function U(E,Q,r={}){r.errorMessage||(r.errorMessage=r.expressionName?`${r.expressionName} contains invalid fields`:"Fields are invalid");h(E,Q,(n,x)=>x.has(n),r)}function K(E,Q,r={}){r.errorMessage||(r.errorMessage=r.expressionName?`${r.expressionName} only supports ${p} field types`:`Only ${p} field types are supported`);h(E,Q,(n,x)=>!t(n,x),r)}function h(E,Q,r,n={}){const x=n.verifyExpression??!0,J=[];for(const z of Q)if(Q=
r(z,E),"*"!==z&&!Q)if(x){Q=k(z);try{const A=R(Q,E,{validateStandardized:!0});h(E,A,r,n)}catch(A){Q=A?.details;if(Q?.expression)throw A;Q?.invalidFields?J.push(...Q.invalidFields):J.push(z)}}else J.push(z);if(J.length)throw new f("feature-store:unsupported-query",n.errorMessage,{invalidFields:J,query:n.query});}function k(E){return E.split(" as ")[0]}function t(E,Q,r=e){return(E=Q.get(E))?!r.has(E.type):!1}const O=new ba.WhereClauseCache(50,500);ba=new la.JSONMap({esriFieldTypeString:"string"});const C=
new la.JSONMap({esriFieldTypeOID:"oid",esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long"}),P=new la.JSONMap({esriFieldTypeDate:"date"});la=new la.JSONMap({esriFieldTypeGUID:"guid",esriFieldTypeGlobalId:"global-id"});const e=new Set([...C.jsonValues,...P.jsonValues,...ba.jsonValues,...la.jsonValues]),p=(new Intl.ListFormat("en-US",{type:"conjunction"})).format([...C.apiValues,...P.apiValues,...ba.apiValues,
...la.apiValues]);l.getAliasFromFieldName=function(E){return E.split(" as ")[1]};l.getExpressionFromFieldName=k;l.getWhereClause=fa;l.hasInvalidFieldType=t;l.validDateTypesKebabDict=P;l.validGuidTypesKebabDict=la;l.validNumericTypesKebabDict=C;l.validStringTypesKebabDict=ba;l.validateFieldTypes=K;l.validateFields=U;l.validateHaving=function(E,Q,r,n){if(!Q)return!0;const x=R(Q,E,{validateAggregate:!0,expressionName:"having"});U(E,x,{expressionName:"having",query:n});K(E,x,{expressionName:"having",
query:n});if(!O.get(Q,E)?.getExpressions().every(J=>{const {aggregateType:z,field:A}=J,B=E.get(A)?.name;return r.some(y=>{const {onStatisticField:D,statisticType:I}=y;return E.get(D)?.name===B&&I.toLowerCase().trim()===z})}))throw new f("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:Q});return!0};l.validateWhere=function(E,Q,r){if(!Q)return!0;Q=R(Q,E,{validateStandardized:!0,expressionName:"where clause"});U(E,Q,{expressionName:"where clause",
query:r});K(E,Q,{expressionName:"where clause",query:r});return!0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../LRUCache","./WhereClause"],function(l,f,la,ba){let R=function(){function fa(U,K){this._cache=new la.LRUCache(U);this._invalidCache=new la.LRUCache(K)}fa.prototype.get=function(U,K){const h=`${K.uid}:${U}`,k=this._cache.get(h);if(k)return k;if(void 0!==this._invalidCache.get(h))return null;
try{const t=ba.WhereClause.create(U,K);this._cache.put(h,t);return t}catch{return this._invalidCache.put(h,null),null}};return f._createClass(fa)}();l.WhereClauseCache=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./MemCache"],function(l,f,la){let ba=function(){function R(U,K){this._storage=new la.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=U;this._storage.register(this);
K&&this._storage.registerRemoveFunc("",K)}var fa=R.prototype;fa.destroy=function(){this._storage.deregister(this);this._storage.destroy()};fa.put=function(U,K,h=1){this._storage.put(this,U,K,h,1)};fa.pop=function(U){return this._storage.pop(this,U)};fa.get=function(U){return this._storage.get(this,U)};fa.clear=function(){this._storage.clearAll()};fa.resetHitRate=function(){};f._createClass(R,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(U){this._storage.maxSize=U}}]);return R}();
l.LRUCache=ba;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(l,f,la,ba,R,fa){function U(N,M){N+="";return N.length>=M?N:Array(M-N.length+1).join("0")+N}function K(N,M,v="0",w="0",Z="0",ja="0",va="",Ba="0",Ea="0"){return"+"===va||"-"===va?(N=`${U(parseInt(N,10),4)}-${U(parseInt(M,10),2)}-${U(parseInt(v,
10),2)}`,M="",10>parseFloat(ja)&&(M="0"),w=`${U(parseInt(w,10),2)}:${U(parseInt(Z,10),2)}:${M+parseFloat(ja).toString()}`,va=`${va}${U(parseInt(Ba,10),2)}:${U(parseInt(Ea,10),2)}`,new Date(N+"T"+w+va)):new Date(parseInt(N,10),parseInt(M,10)-1,parseInt(v,10),parseInt(w,10),parseInt(Z,10),parseFloat(ja))}function h(N){let M=J.exec(N);if(null!==M){const [,v,w,Z,ja,va,Ba]=M;return K(v,w,Z,ja,va,Ba)}M=z.exec(N);if(null!==M){const [,v,w,Z,ja,va,Ba,Ea,Fa,Ma]=M;return K(v,w,Z,ja,va,Ba,Ea,Fa,Ma)}M=A.exec(N);
if(null!==M){const [,v,w,Z,ja,va,Ba,Ea,Fa]=M;return K(v,w,Z,ja,va,"0",Ba,Ea,Fa)}M=B.exec(N);if(null!==M){const [,v,w,Z,ja,va]=M;return K(v,w,Z,ja,va)}M=x.exec(N);if(null!==M){const [,v,w,Z]=M;return K(v,w,Z)}throw Error("SQL Invalid Timestamp");}function k(N){const M=x.exec(N);if(null===M)try{return h(N)}catch{throw Error("SQL Invalid Date");}const [,v,w,Z]=M;return new Date(parseInt(v,10),parseInt(w,10)-1,parseInt(Z,10))}function t(N){return Array.isArray(N)?N:[N]}function O(N){return null!==N?!0!==
N:null}function C(N,M){return null!=N&&null!=M?!0===N&&!0===M:!1===N||!1===M?!1:null}function P(N,M){return null!=N&&null!=M?!0===N||!0===M:!0===N||!0===M?!0:null}function e(N,M){if(null==N)return null;let v=!1;for(const w of M)if(null==w)v=null;else if(N===w){v=!0;break}return v}function p(N,M,v){if(null==N)return null;let w="",Z=X.Normal;for(let ja=0;ja<M.length;ja++){const va=M.charAt(ja);switch(Z){case X.Normal:va===v?Z=X.Escaped:w="-[]/{}()*+?.\\^$|".includes(va)?w+("\\"+va):"%"===va?w+".*":
"_"===va?w+".":w+va;break;case X.Escaped:w="-[]/{}()*+?.\\^$|".includes(va)?w+("\\"+va):w+va,Z=X.Normal}}return(new RegExp("^"+w+"$","m")).test(N)}function E(N){return N instanceof Date?N.valueOf():N}function Q(N,M,v){if(null==M||null==v)return null;M=E(M);v=E(v);switch(N){case "\x3c\x3e":return M!==v;case "\x3d":return M===v;case "\x3e":return M>v;case "\x3c":return M<v;case "\x3e\x3d":return M>=v;case "\x3c\x3d":return M<=v}}function r(N,M,v){if("||"===N)return R.evaluateFunction("concat",[M,v]);
if(M instanceof R.SqlInterval)if(v instanceof Date)switch(N){case "+":return new Date(M.valueInMilliseconds()+v.getTime());case "-":return M.valueInMilliseconds()-v.getTime();case "*":return M.valueInMilliseconds()*v.getTime();case "/":return M.valueInMilliseconds()/v.getTime()}else if(v instanceof R.SqlInterval)switch(N){case "+":return R.SqlInterval.createFromMilliseconds(M.valueInMilliseconds()+v.valueInMilliseconds());case "-":return R.SqlInterval.createFromMilliseconds(M.valueInMilliseconds()-
v.valueInMilliseconds());case "*":return M.valueInMilliseconds()*v.valueInMilliseconds();case "/":return M.valueInMilliseconds()/v.valueInMilliseconds()}else M=M.valueInMilliseconds();else if(v instanceof R.SqlInterval)if(M instanceof Date)switch(N){case "+":return new Date(v.valueInMilliseconds()+M.getTime());case "-":return new Date(M.getTime()-v.valueInMilliseconds());case "*":return M.getTime()*v.valueInMilliseconds();case "/":return M.getTime()/v.valueInMilliseconds()}else v=v.valueInMilliseconds();
else if(M instanceof Date&&"number"===typeof v)switch(v*=864E5,M=M.getTime(),N){case "+":return new Date(M+v);case "-":return new Date(M-v);case "*":return new Date(M*v);case "/":return new Date(M/v)}else if(v instanceof Date&&"number"===typeof M)switch(M*=864E5,v=v.getTime(),N){case "+":return new Date(M+v);case "-":return new Date(M-v);case "*":return new Date(M*v);case "/":return new Date(M/v)}switch(N){case "+":return M+v;case "-":return M-v;case "*":return M*v;case "/":return M/v}}function n(N,
M,v,w){N=w.getAttribute(N,M);return null!=N&&1===v[M]?new Date(N):N}const x=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,J=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,A=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,y=new Set(["current_timestamp","current_date","current_time"]);let D=function(){function N(){}
N.makeBool=function(M){return!0===M};N.featureValue=function(M,v,w,Z){return n(M,v,w,Z)};N.equalsNull=function(M){return null===M};N.applyLike=function(M,v,w){return p(M,v,w)};N.ensureArray=function(M){return t(M)};N.applyIn=function(M,v){return e(M,v)};N.currentDate=function(){const M=new Date;M.setHours(0,0,0,0);return M};N.makeSqlInterval=function(M,v,w){return R.SqlInterval.createFromValueAndQualifer(M,v,w)};N.convertInterval=function(M){return M instanceof R.SqlInterval?M.valueInMilliseconds():
M};N.currentTimestamp=function(){return new Date};N.compare=function(M,v,w){return Q(M,v,w)};N.calculate=function(M,v,w){return r(M,v,w)};N.makeComparable=function(M){return E(M)};N.evaluateFunction=function(M,v){return R.evaluateFunction(M,v)};N.lookup=function(M,v){M=v[M];return void 0===M?null:M};N.between=function(M,v){return null==M||null==v[0]||null==v[1]?null:M>=v[0]&&M<=v[1]};N.notbetween=function(M,v){return null==M||null==v[0]||null==v[1]?null:M<v[0]||M>v[1]};N.ternaryNot=function(M){return O(M)};
N.ternaryAnd=function(M,v){return C(M,v)};N.ternaryOr=function(M,v){return P(M,v)};return f._createClass(N)}(),I=function(){function N(v,w){this.fieldsIndex=w;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=fa.WhereGrammar.parse(v);const {isStandardized:Z,isAggregate:ja,referencedFieldNames:va}=this._extractExpressionInfo(w);this._referencedFieldNames=va;this.isStandardized=Z;this.isAggregate=ja}N.create=function(v,w){return new N(v,w)};var M=N.prototype;M.testSet=
function(v,w=ia){const Z={};for(const ja of this.fieldNames)Z[ja]=v.map(va=>w.getAttribute(va,ja));return!!this._evaluateNode(this.parseTree,{attributes:Z},ia)};M.calculateValue=function(v,w=ia){v=this._evaluateNode(this.parseTree,v,w);return v instanceof R.SqlInterval?v.valueInMilliseconds()/864E5:v};M.calculateValueCompiled=function(v,w=ia){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(v,this.parameters,w,this._datefields);if(la("esri-csp-restrictions"))return this.calculateValue(v,
w);this._compileMe();return this.parseTree._compiledVersion(v,this.parameters,w,this._datefields)};M.testFeature=function(v,w=ia){return!!this._evaluateNode(this.parseTree,v,w)};M.testFeatureCompiled=function(v,w=ia){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(v,this.parameters,w,this._datefields);if(la("esri-csp-restrictions"))return this.testFeature(v,w);this._compileMe();return!!this.parseTree._compiledVersion(v,this.parameters,w,this._datefields)};M.getFunctions=
function(){const v=new Set;this._visitAll(this.parseTree,w=>{"function"===w.type&&v.add(w.name.toLowerCase())});return Array.from(v)};M.getExpressions=function(){const v=new Map;this._visitAll(this.parseTree,w=>{if("function"===w.type){const Z=w.name.toLowerCase();w=w.args.value[0];if("column-reference"===w.type){w=w.column;const ja=`${Z}-${w}`;v.has(ja)||v.set(ja,{aggregateType:Z,field:w})}}});return[...v.values()]};M.getVariables=function(){const v=new Set;this._visitAll(this.parseTree,w=>{"parameter"===
w.type&&v.add(w.value.toLowerCase())});return Array.from(v)};M._compileMe=function(){const v="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",v)).bind(D)};M._extractExpressionInfo=function(v){const w=[],Z=new Set;let ja=!0,va=!0;this._visitAll(this.parseTree,Ba=>{switch(Ba.type){case "column-reference":const Ea=v?.get(Ba.column);let Fa,Ma;Ea?Fa=Ma=Ea.name??"":(Ma=Ba.column,
Fa=Ma.toLowerCase());Ea&&Ea.name&&("date"===Ea.type||"esriFieldTypeDate"===Ea.type)&&(this._datefields[Ea.name]=1);Z.has(Fa)||(Z.add(Fa),w.push(Ma));Ba.column=Ma;break;case "function":const {name:Ha,args:Ua}=Ba;Ba=Ua.value.length;ja&&(ja=R.isStandardized(Ha,Ba));va&&(va=ba.isAggregate(Ha,Ba))}});return{referencedFieldNames:Array.from(w),isStandardized:ja,isAggregate:va}};M._visitAll=function(v,w){if(null!=v)switch(w(v),v.type){case "when-clause":this._visitAll(v.operand,w);this._visitAll(v.value,
w);break;case "case-expression":for(const Z of v.clauses)this._visitAll(Z,w);"simple"===v.format&&this._visitAll(v.operand,w);null!==v.else&&this._visitAll(v.else,w);break;case "expression-list":for(const Z of v.value)this._visitAll(Z,w);break;case "unary-expression":this._visitAll(v.expr,w);break;case "binary-expression":this._visitAll(v.left,w);this._visitAll(v.right,w);break;case "function":this._visitAll(v.args,w)}};M.evaluateNodeToJavaScript=function(v){switch(v.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(v.value)+", "+JSON.stringify(v.qualifier)+","+JSON.stringify(v.op)+")";case "case-expression":var w="";if("simple"===v.format){var Z="this.makeComparable("+this.evaluateNodeToJavaScript(v.operand)+")";w="( ";for(let ja=0;ja<v.clauses.length;ja++)w+=" ("+Z+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(v.clauses[ja].operand)+")) ? ("+this.evaluateNodeToJavaScript(v.clauses[ja].value)+") : "}else for(w="( ",Z=0;Z<v.clauses.length;Z++)w+=" this.makeBool("+
this.evaluateNodeToJavaScript(v.clauses[Z].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(v.clauses[Z].value)+") : ";w=null!==v.else?w+this.evaluateNodeToJavaScript(v.else):w+"null";return w+" )";case "parameter":return"this.lookup("+JSON.stringify(v.value.toLowerCase())+",lookups)";case "expression-list":w="[";for(Z of v.value)"["!==w&&(w+=","),w+=this.evaluateNodeToJavaScript(Z);return w+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(v.expr)+")";
case "binary-expression":switch(v.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+" )";case "IS":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(v.left)+")";case "ISNOT":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(v.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(v.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(v.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(v.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(v.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+","+JSON.stringify(v.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+","+JSON.stringify(v.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(v.operator)+","+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(v.operator)+","+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+")"}throw Error("Not Supported Operator "+v.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(v.value);case "date":return"(new Date("+k(v.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+h(v.value).getTime().toString()+"))";case "current-time":return"date"===v.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(v.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(v.name)+","+this.evaluateNodeToJavaScript(v.args)+")"}throw Error("Unsupported sql syntax "+v.type);};M._evaluateNode=function(v,w,Z){switch(v.type){case "interval":return w=
this._evaluateNode(v.value,w,Z),R.SqlInterval.createFromValueAndQualifer(w,v.qualifier,v.op);case "case-expression":if("simple"===v.format){var ja=E(this._evaluateNode(v.operand,w,Z));for(var va=0;va<v.clauses.length;va++)if(ja===E(this._evaluateNode(v.clauses[va].operand,w,Z)))return this._evaluateNode(v.clauses[va].value,w,Z)}else for(ja=0;ja<v.clauses.length;ja++)if(!0===this._evaluateNode(v.clauses[ja].operand,w,Z))return this._evaluateNode(v.clauses[ja].value,w,Z);return null!==v.else?this._evaluateNode(v.else,
w,Z):null;case "parameter":return this.parameters[v.value.toLowerCase()];case "expression-list":ja=[];for(va of v.value)ja.push(this._evaluateNode(va,w,Z));return ja;case "unary-expression":return O(this._evaluateNode(v.expr,w,Z));case "binary-expression":switch(v.operator){case "AND":return C(this._evaluateNode(v.left,w,Z),this._evaluateNode(v.right,w,Z));case "OR":return P(this._evaluateNode(v.left,w,Z),this._evaluateNode(v.right,w,Z));case "IS":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(v.left,w,Z);case "ISNOT":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(v.left,w,Z);case "IN":return ja=t(this._evaluateNode(v.right,w,Z)),e(this._evaluateNode(v.left,w,Z),ja);case "NOT IN":return ja=t(this._evaluateNode(v.right,w,Z)),O(e(this._evaluateNode(v.left,w,Z),ja));case "BETWEEN":return ja=this._evaluateNode(v.left,w,Z),v=this._evaluateNode(v.right,w,Z),null==ja||null==v[0]||null==v[1]?null:ja>=E(v[0])&&ja<=
E(v[1]);case "NOTBETWEEN":return ja=this._evaluateNode(v.left,w,Z),v=this._evaluateNode(v.right,w,Z),null==ja||null==v[0]||null==v[1]?null:ja<E(v[0])||ja>E(v[1]);case "LIKE":return p(this._evaluateNode(v.left,w,Z),this._evaluateNode(v.right,w,Z),v.escape);case "NOT LIKE":return O(p(this._evaluateNode(v.left,w,Z),this._evaluateNode(v.right,w,Z),v.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return Q(v.operator,this._evaluateNode(v.left,w,Z),this._evaluateNode(v.right,
w,Z));case "-":case "+":case "*":case "/":case "||":return r(v.operator,this._evaluateNode(v.left,w,Z),this._evaluateNode(v.right,w,Z))}case "null":case "boolean":case "string":case "number":return v.value;case "date":return k(v.value);case "timestamp":return h(v.value);case "current-time":return w=new Date,"date"===v.mode&&w.setHours(0,0,0,0),w;case "column-reference":return n(w,v.column,this._datefields,Z);case "data-type":return v.value;case "function":return w=this._evaluateNode(v.args,w,Z),this.isAggregate?
ba.aggregateFunction(v.name,w):R.evaluateFunction(v.name,w)}throw Error("Unsupported sql syntax "+v.type);};f._createClass(N,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,v=>{"current-time"===v.type?this._hasDateFunctions=!0:"function"===v.type&&(this._hasDateFunctions=this._hasDateFunctions||y.has(v.name.toLowerCase()))});
return this._hasDateFunctions}}]);return N}();var X;(function(N){N[N.Normal=0]="Normal";N[N.Escaped=1]="Escaped"})(X||(X={}));const ia={getAttribute(N,M){return(N&&"object"===typeof N.attributes?N.attributes:N)[M]}};l.WhereClause=I;l.defaultAttributeAdapter=ia;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(l){function f(R){let fa=0;for(let U=0;U<R.length;U++)fa+=R[U];return fa/R.length}function la(R){const fa=
f(R),U=R.length;let K=0;for(const h of R)K+=(h-fa)**2;return 1<U?K/(U-1):0}const ba={min:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:Math.min.apply(Math,R[0])},max:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:Math.max.apply(Math,R[0])},avg:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:f(R[0])},sum:{minParams:1,maxParams:1,evaluate:R=>{if(null==R[0])R=null;else{R=R[0];let fa=0;for(let U=0;U<R.length;U++)fa+=R[U];R=fa}return R}},stddev:{minParams:1,maxParams:1,evaluate:R=>null==
R[0]?null:Math.sqrt(la(R[0]))},count:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:R[0].length},var:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:la(R[0])}};l.aggregateFunction=function(R,fa){const U=ba[R.toLowerCase()];if(null==U)throw Error("Function Not Recognised");if(fa.length<U.minParams||fa.length>U.maxParams)throw Error(`Invalid Parameter count for call to ${R.toUpperCase()}`);return U.evaluate(fa)};l.isAggregate=function(R,fa){R=ba[R.toLowerCase()];return null!=R&&fa>=R.minParams&&
fa<=R.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(l,f,la,ba,R){function fa(k){k=new Date(k.getTime());k.setHours(0,0,0,0);return k}function U(k,t){if(k instanceof Date)return t?fa(k):k;if("string"===typeof k||k instanceof String)if(k=R.DateTime.fromSQL(k),k.isValid)return t?
fa(k.toJSDate()):k.toJSDate();throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);}let K=function(){function k(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(t){if(null!==t.precision||null!==t.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k._parseSecondsComponent=function(t,O){O.includes(".")?(O=O.split("."),t.second=parseFloat(O[0]),t.millis=parseInt(O[1],10)):t.second=parseFloat(O)};
k.createFromMilliseconds=function(t){const O=new k;O.second=t/1E3;return O};k.createFromValueAndQualifer=function(t,O,C){let P=null;const e=new k;e.op="-"===C?"-":"+";if("interval-period"===O.type){k._fixDefaults(O);C=RegExp("^[0-9]{1,}$");if("year"===O.period||"month"===O.period)throw Error("Year-Month Intervals not supported");if("second"===O.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(t))k._parseSecondsComponent(e,t);else throw Error("Illegal Interval");else if(C.test(t))e[O.period]=parseFloat(t);
else throw Error("Illegal Interval");}else{k._fixDefaults(O.start);k._fixDefaults(O.end);if("year"===O.start.period||"month"===O.start.period)throw Error("Year-Month Intervals not supported");if("year"===O.end.period||"month"===O.end.period)throw Error("Year-Month Intervals not supported");switch(O.start.period){case "day":switch(O.end.period){case "hour":P=RegExp("^[0-9]{1,} [0-9]{1,}$");if(P.test(t))e[O.start.period]=parseFloat(t.split(" ")[0]),e[O.end.period]=parseFloat(t.split(" ")[1]);else throw Error("Illegal Interval");
break;case "minute":P=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(P.test(t))e[O.start.period]=parseFloat(t.split(" ")[0]),t=t.split(" ")[1].split(":"),e.hour=parseFloat(t[0]),e.minute=parseFloat(t[1]);else throw Error("Illegal Interval");break;case "second":P=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(P.test(t))e[O.start.period]=parseFloat(t.split(" ")[0]),t=t.split(" ")[1].split(":"),e.hour=parseFloat(t[0]),e.minute=parseFloat(t[1]),k._parseSecondsComponent(e,
t[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(O.end.period){case "minute":P=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(P.test(t))e.hour=parseFloat(t.split(":")[0]),e.minute=parseFloat(t.split(":")[1]);else throw Error("Illegal Interval");break;case "second":P=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(P.test(t))t=t.split(":"),e.hour=parseFloat(t[0]),e.minute=parseFloat(t[1]),k._parseSecondsComponent(e,t[2]);else throw Error("Illegal Interval");
break;default:throw Error("Invalid Interval.");}break;case "minute":switch(O.end.period){case "second":P=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(P.test(t))t=t.split(":"),e.minute=parseFloat(t[0]),k._parseSecondsComponent(e,t[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return e};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+
36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return f._createClass(k)}();const h={extract:{minParams:2,maxParams:2,evaluate:([k,t])=>{if(null==t)return null;if(t instanceof Date)switch(k.toUpperCase()){case "SECOND":return t.getSeconds();case "MINUTE":return t.getMinutes();case "HOUR":return t.getHours();case "DAY":return t.getDate();case "MONTH":return t.getMonth()+1;case "YEAR":return t.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,
maxParams:3,evaluate:k=>{if(2===k.length){const [t,O]=k;return null==t||null==O?null:t.toString().substring(O-1)}if(3===k.length){const [t,O,C]=k;return null==t||null==O||null==C?null:0>=C?"":t.toString().substring(O-1,O+C-1)}}},position:{minParams:2,maxParams:2,evaluate:([k,t])=>null==k||null==t?null:t.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var t=3===k.length,O=t?k[1]:" ";t=t?k[2]:k[1];if(null==O||null==t)return null;O=`(${ba.escapeRegExpString(O)})`;switch(k[0]){case "BOTH":return t.replaceAll(new RegExp(`^${O}*|${O}*$`,
"g"),"");case "LEADING":return t.replaceAll(new RegExp(`^${O}*`,"g"),"");case "TRAILING":return t.replaceAll(new RegExp(`${O}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,
maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},
sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const t=k[0];k=2===k.length?10**k[1]:1;return null==t?null:Math.round(t*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},
char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let t="";for(let O=0;O<k.length;O++){if(null==k[O])return null;t+=k[O].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:k=>{for(const t of k)if(null!==
t)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cosh(k[0])},sinh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sinh(k[0])},tanh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tanh(k[0])},nullif:{minParams:2,maxParams:2,evaluate:k=>{const t=k[0];k=k[1];return(t instanceof Date?t.valueOf():t)===(k instanceof Date?k.valueOf():k)?null:t}},cast:{minParams:2,maxParams:2,evaluate:k=>{var t=k[0];k=k[1];if(null===t)return null;switch(k.type){case "integer":t=
parseInt(t,10);if(isNaN(t))throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);return t;case "smallint":t=parseInt(t,10);if(isNaN(t))throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);if(32767<t||-32767>t)throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);return t;case "float":case "real":t=parseFloat(t);if(isNaN(t))throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);return t;case "date":return U(t,!0);case "timestamp":return U(t,!1);case "varchar":t=t.toString();if(t.length>k.size)throw new la.SqlError(la.SqlErrorCodes.CannotCastValue);
return t;default:throw new la.SqlError(la.SqlErrorCodes.InvalidDataType);}}}};l.SqlInterval=K;l.evaluateFunction=function(k,t){const O=h[k.toLowerCase()];if(null==O)throw Error("Function Not Recognised");if(t.length<O.minParams||t.length>O.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return O.evaluate(t)};l.isStandardized=function(k,t){k=h[k.toLowerCase()];return null!=k&&t>=k.minParams&&t<=k.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(l,f,la){l.SqlErrorCodes=void 0;(function(K){K.InvalidFunctionParameters="InvalidFunctionParameters";K.UnsupportedSqlFunction="UnsupportedSqlFunction";K.UnsupportedOperator="UnsupportedOperator";K.UnsupportedSyntax="UnsupportedSyntax";K.UnsupportedIsRhs="UnsupportedIsRhs";K.UnsupportedIsLhs="UnsupportedIsLhs";K.InvalidDataType="InvalidDataType";K.CannotCastValue=
"CannotCastValue";K.MissingStatisticParameters="MissingStatisticParameters"})(l.SqlErrorCodes||(l.SqlErrorCodes={}));const ba={[l.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[l.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[l.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[l.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[l.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",
[l.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[l.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[l.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[l.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let R=function(K){function h(k,t){k=K.call(this,la.doSubstitutions(ba[k],t))||this;k.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(k),
h);return k}f._inherits(h,K);return f._createClass(h)}(f._wrapNativeSuper(Error));l.FeatureSetErrorCodes=void 0;(function(K){K.NeverReach="NeverReach";K.NotImplemented="NotImplemented";K.Cancelled="Cancelled";K.InvalidStatResponse="InvalidStatResponse";K.InvalidRequest="InvalidRequest";K.RequestFailed="RequestFailed";K.MissingFeatures="MissingFeatures";K.AggregationFieldNotFound="AggregationFieldNotFound";K.DataElementsNotFound="DataElementsNotFound"})(l.FeatureSetErrorCodes||(l.FeatureSetErrorCodes=
{}));const fa={[l.FeatureSetErrorCodes.Cancelled]:"Cancelled",[l.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[l.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[l.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[l.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[l.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[l.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[l.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",
[l.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let U=function(K){function h(k,t){k=K.call(this,la.doSubstitutions(fa[k],t))||this;k.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(k),h);return k}f._inherits(h,K);return f._createClass(h)}(f._wrapNativeSuper(Error));l.FeatureSetError=U;l.FeatureSetErrorMessages=fa;l.SqlError=R;l.SqlErrorMessages=ba;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(l,f){function la(C){return C&&C.loc?`Line : ${C.loc.start?.line}, ${C.loc.start?.column}: `:""}function ba(C,P){try{if(!P)return C;for(const e in P){let p=P[e];p||(p="");C=C.replace("{"+e+"}",P[e])}}catch(e){}return C}l.ExecutionErrorCodes=void 0;(function(C){C.AsyncNotEnabled="AsyncNotEnabled";C.ModulesNotSupported="ModulesNotSupported";C.CircularModules="CircularModules";C.NeverReach="NeverReach";
C.UnsupportedHashType="UnsupportedHashType";C.InvalidParameter="InvalidParameter";C.UnexpectedToken="UnexpectedToken";C.Unrecognised="Unrecognised";C.UnrecognisedType="UnrecognisedType";C.MaximumCallDepth="MaximumCallDepth";C.BooleanConditionRequired="BooleanConditionRequired";C.TypeNotAllowedInFeature="TypeNotAllowedInFeature";C.KeyMustBeString="KeyMustBeString";C.WrongNumberOfParameters="WrongNumberOfParameters";C.CallNonFunction="CallNonFunction";C.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";
C.NoFunctionInDictionary="NoFunctionInDictionary";C.NoFunctionInArray="NoFunctionInArray";C.AssignModuleFunction="AssignModuleFunction";C.LogicExpressionOrAnd="LogicExpressionOrAnd";C.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";C.FunctionNotFound="FunctionNotFound";C.InvalidMemberAccessKey="InvalidMemberAccessKey";C.UnsupportedUnaryOperator="UnsupportUnaryOperator";C.InvalidIdentifier="InvalidIdentifier";C.MemberOfNull="MemberOfNull";C.UnsupportedOperator="UnsupportedOperator";C.Cancelled=
"Cancelled";C.ModuleAccessorMustBeString="ModuleAccessorMustBeString";C.ModuleExportNotFound="ModuleExportNotFound";C.Immutable="Immutable";C.OutOfBounds="OutOfBounds";C.IllegalResult="IllegalResult";C.FieldNotFound="FieldNotFound";C.PortalRequired="PortalRequired";C.LogicError="LogicError";C.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";C.KeyAccessorMustBeString="KeyAccessorMustBeString";C.WrongSpatialReference="WrongSpatialReference"})(l.ExecutionErrorCodes||(l.ExecutionErrorCodes={}));const R=
{[l.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[l.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[l.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[l.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[l.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[l.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",
[l.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[l.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[l.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[l.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[l.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[l.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[l.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",
[l.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[l.ExecutionErrorCodes.PortalRequired]:"Portal is required",[l.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[l.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[l.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[l.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[l.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
[l.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[l.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[l.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[l.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[l.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[l.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[l.ExecutionErrorCodes.Immutable]:"Object is immutable",
[l.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[l.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[l.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[l.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[l.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[l.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[l.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[l.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[l.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[l.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[l.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[l.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let fa=function(C){function P(...e){return C.call(this,...e)||this}f._inherits(P,C);return f._createClass(P)}(f._wrapNativeSuper(Error)),U=function(C){function P(e,
p){e=C.call(this,la(p)+e.message,{cause:e})||this;e.loc=null;Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),P);p&&p.loc&&(e.loc=p.loc);return e}f._inherits(P,C);return f._createClass(P)}(fa),K=function(C){function P(e,p,E,Q){e=C.call(this,"Execution error - "+la(E)+ba(R[p],Q))||this;e.loc=null;e.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),P);E&&E.loc&&(e.loc=E.loc);return e}f._inherits(P,
C);return f._createClass(P)}(f._wrapNativeSuper(Error)),h=function(C){function P(e,p,E,Q){e=C.call(this,"Compilation error - "+la(E)+ba(R[p],Q))||this;e.loc=null;e.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),P);E&&E.loc&&(e.loc=E.loc);return e}f._inherits(P,C);return f._createClass(P)}(f._wrapNativeSuper(Error)),k=function(C){function P(){var e=C.call(this,"Uncompilable code structures")||this;e.declaredRootClass=
"esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),P);return e}f._inherits(P,C);return f._createClass(P)}(f._wrapNativeSuper(Error));l.ModuleErrorCodes=void 0;(function(C){C.UnrecognisedUri="UnrecognisedUri";C.UnsupportedUriProtocol="UnsupportedUriProtocol"})(l.ModuleErrorCodes||(l.ModuleErrorCodes={}));const t={[l.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[l.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};
let O=function(C){function P(e,p){e=C.call(this,ba(t[e],p))||this;e.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),P);return e}f._inherits(P,C);return f._createClass(P)}(f._wrapNativeSuper(Error));l.ArcadeCompilationError=h;l.ArcadeExecutionError=K;l.ArcadeUncompilableError=k;l.ErrorWithCause=fa;l.ExecutionErrorMessages=R;l.LocatableArcadeExecutionError=U;l.ModuleError=O;l.ModuleErrorMessages=t;l.doSubstitutions=ba;l.ensureArcadeExecutionError=
function(C,P,e){return"esri.arcade.arcadeexecutionerror"===e.declaredRootClass||"esri.arcade.arcadecompilationerror"===e.declaredRootClass?null===e.loc&&P&&P.loc?new U(e,{cause:e}):e:P&&P.loc?new U(e,{cause:e}):e};l.parsingValidationMessage=function(C,P,e){return"Parsing error - "+la(C)+ba(R[P],e)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(l){function f(a,g={}){const L=JSON.stringify([a,g]);let ca=gd[L];ca||(ca=new Intl.ListFormat(a,
g),gd[L]=ca);return ca}function la(a,g={}){const L=JSON.stringify([a,g]);let ca=Gc[L];ca||(ca=new Intl.DateTimeFormat(a,g),Gc[L]=ca);return ca}function ba(a,g={}){const L=JSON.stringify([a,g]);let ca=Hc[L];ca||(ca=new Intl.NumberFormat(a,g),Hc[L]=ca);return ca}function R(a,g={}){const {base:L,...ca}=g,ma=JSON.stringify([a,ca]);let qa=Ic[ma];qa||(qa=new Intl.RelativeTimeFormat(a,g),Ic[ma]=qa);return qa}function fa(a){const g=[];for(let L=1;12>=L;L++){const ca=Za.utc(2016,L,1);g.push(a(ca))}return g}
function U(a){const g=[];for(let L=1;7>=L;L++){const ca=Za.utc(2016,11,13+L);g.push(a(ca))}return g}function K(a,g,L,ca,ma){a=a.listingMode(L);return"error"===a?null:"en"===a?ca(g):ma(g)}function h(a,g){if(k(a)||null===a)return g;if(a instanceof ic)return a;if("string"===typeof a){const L=a.toLowerCase();return"default"===L?g:"local"===L||"system"===L?mc.instance:"utc"===L||"gmt"===L?Eb.utcInstance:Eb.parseSpecifier(L)||Vb.create(a)}return t(a)?Eb.instance(a):"object"===typeof a&&a.offset&&"number"===
typeof a.offset?a:new me(a)}function k(a){return"undefined"===typeof a}function t(a){return"number"===typeof a}function O(a){return"number"===typeof a&&0===a%1}function C(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function P(a,g,L){if(0!==a.length)return a.reduce((ca,ma)=>{ma=[g(ma),ma];return ca?L(ca[0],ma[0])===ca[0]?ca:ma:ma},null)[1]}function e(a,g){return g.reduce((L,ca)=>{L[ca]=a[ca];return L},{})}function p(a,g){return Object.prototype.hasOwnProperty.call(a,
g)}function E(a,g,L){return O(a)&&a>=g&&a<=L}function Q(a,g=2){return 0>a?"-"+(""+-a).padStart(g,"0"):(""+a).padStart(g,"0")}function r(a){if(!k(a)&&null!==a&&""!==a)return parseInt(a,10)}function n(a){if(!k(a)&&null!==a&&""!==a)return parseFloat(a)}function x(a){if(!k(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function J(a,g,L=!1){g=10**g;return(L?Math.trunc:Math.round)(a*g)/g}function z(a){return 0===a%4&&(0!==a%100||0===a%400)}function A(a,g){var L=g-1;L=L-12*Math.floor(L/
12)+1;return 2===L?z(a+(g-L)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][L-1]}function B(a){let g=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(g=new Date(g),g.setUTCFullYear(a.year,a.month-1,a.day));return+g}function y(a){var g=a-1;g=(g+Math.floor(g/4)-Math.floor(g/100)+Math.floor(g/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===g?53:52}function D(a){return 99<a?a:a>xb.twoDigitCutoffYear?1900+a:2E3+a}function I(a,
g,L,ca=null){a=new Date(a);const ma={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ca&&(ma.timeZone=ca);return(g=(new Intl.DateTimeFormat(L,{timeZoneName:g,...ma})).formatToParts(a).find(qa=>"timezonename"===qa.type.toLowerCase()))?g.value:null}function X(a,g){a=parseInt(a,10);Number.isNaN(a)&&(a=0);g=parseInt(g,10)||0;g=0>a||Object.is(a,-0)?-g:g;return 60*a+g}function ia(a){const g=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(g))throw new Aa(`Invalid unit value ${a}`);
return g}function N(a,g){const L={};for(const ca in a)if(p(a,ca)){const ma=a[ca];void 0!==ma&&null!==ma&&(L[g(ca)]=ia(ma))}return L}function M(a,g){const L=Math.trunc(Math.abs(a/60)),ca=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(g){case "short":return`${a}${Q(L,2)}:${Q(ca,2)}`;case "narrow":return`${a}${L}${0<ca?`:${ca}`:""}`;case "techie":return`${a}${Q(L,2)}${Q(ca,2)}`;default:throw new RangeError(`Value format ${g} is out of range for property format`);}}function v(a){return e(a,["hour",
"minute","second","millisecond"])}function w(a){switch(a){case "narrow":return[...ne];case "short":return[...Jc];case "long":return[...oe];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function Z(a){switch(a){case "narrow":return[...pe];case "short":return[...hd];case "long":return[...Kc];case "numeric":return"1234567".split("");default:return null}}function ja(a){switch(a){case "narrow":return[...qe];
case "short":return[...re];case "long":return[...se];default:return null}}function va(a,g,L="always",ca=!1){const ma={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var qa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===L&&qa)switch(L="days"===a,g){case 1:return L?"tomorrow":`next ${ma[a][0]}`;case -1:return L?"yesterday":`last ${ma[a][0]}`;case 0:return L?
"today":`this ${ma[a][0]}`}L=Object.is(g,-0)||0>g;g=Math.abs(g);qa=1===g;const xa=ma[a];a=ca?qa?xa[1]:xa[2]||xa[1]:qa?ma[a][0]:a;return L?`${g} ${a} ago`:`in ${g} ${a}`}function Ba(a,g){let L="";for(const ca of a)L=ca.literal?L+ca.val:L+g(ca.val);return L}function Ea(...a){a=a.reduce((g,L)=>g+L.source,"");return RegExp(`^${a}$`)}function Fa(...a){return g=>a.reduce(([L,ca,ma],qa)=>{const [xa,Ga,Na]=qa(g,ma);return[{...L,...xa},Ga||ca,Na]},[{},null,1]).slice(0,2)}function Ma(a,...g){if(null==a)return[null,
null];for(const [L,ca]of g)if(g=L.exec(a))return ca(g);return[null,null]}function Ha(...a){return(g,L)=>{const ca={};let ma;for(ma=0;ma<a.length;ma++)ca[a[ma]]=r(g[L+ma]);return[ca,null,L+ma]}}function Ua(a,g,L){a=a[g];return k(a)?L:r(a)}function Sa(a,g){return[{hours:Ua(a,g,0),minutes:Ua(a,g+1,0),seconds:Ua(a,g+2,0),milliseconds:x(a[g+3])},null,g+4]}function Va(a,g){const L=!a[g]&&!a[g+1];a=X(a[g+1],a[g+2]);return[{},L?null:Eb.instance(a),g+3]}function eb(a,g){return[{},a[g]?Vb.create(a[g]):null,
g+1]}function kb(a){const [g,L,ca,ma,qa,xa,Ga,Na,$a]=a,d="-"===g[0];a=Na&&"-"===Na[0];const ab=(Xa,zb=!1)=>void 0!==Xa&&(zb||Xa&&d)?-Xa:Xa;return[{years:ab(n(L)),months:ab(n(ca)),weeks:ab(n(ma)),days:ab(n(qa)),hours:ab(n(xa)),minutes:ab(n(Ga)),seconds:ab(n(Na),"-0"===Na),milliseconds:ab(x($a),a)}]}function jb(a,g,L,ca,ma,qa,xa){g={year:2===g.length?D(r(g)):r(g),month:Jc.indexOf(L)+1,day:r(ca),hour:r(ma),minute:r(qa)};xa&&(g.second=r(xa));a&&(g.weekday=3<a.length?Kc.indexOf(a)+1:hd.indexOf(a)+1);return g}
function db(a){const [,g,L,ca,ma,qa,xa,Ga,Na,$a,d,ab]=a;a=jb(g,ma,ca,L,qa,xa,Ga);let Xa;Xa=Na?te[Na]:$a?0:X(d,ab);return[a,new Eb(Xa)]}function c(a){const [,g,L,ca,ma,qa,xa,Ga]=a;return[jb(g,ma,ca,L,qa,xa,Ga),Eb.utcInstance]}function q(a){const [,g,L,ca,ma,qa,xa,Ga]=a;return[jb(g,Ga,L,ca,ma,qa,xa),Eb.utcInstance]}function da(a,g,L=!1){a={values:L?g.values:{...a.values,...(g.values||{})},loc:a.loc.clone(g.loc),conversionAccuracy:g.conversionAccuracy||a.conversionAccuracy,matrix:g.matrix||a.matrix};
return new gb(a)}function F(a,g,L,ca,ma){a=a[ma][L];var qa=g[L]/a;qa=Math.sign(qa)!==Math.sign(ca[ma])&&0!==ca[ma]&&1>=Math.abs(qa)?0>qa?Math.floor(qa):Math.ceil(qa):Math.trunc(qa);ca[ma]+=qa;g[L]-=qa*a}function aa(a,g){ue.reduce((L,ca)=>{if(k(g[ca]))return L;L&&F(a,g,L,g,ca);return ca},null)}function m(a,g){a=g.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(gb.fromMillis(a).as("days"))}function H(a,g,L){const ca=[["years",
(Na,$a)=>$a.year-Na.year],["quarters",(Na,$a)=>$a.quarter-Na.quarter+4*($a.year-Na.year)],["months",(Na,$a)=>$a.month-Na.month+12*($a.year-Na.year)],["weeks",(Na,$a)=>{Na=m(Na,$a);return(Na-Na%7)/7}],["days",m]],ma={},qa=a;let xa,Ga;for(const [Na,$a]of ca)0<=L.indexOf(Na)&&(xa=Na,ma[Na]=$a(a,g),Ga=qa.plus(ma),Ga>g?(ma[Na]--,a=qa.plus(ma)):a=Ga);return[a,ma,Ga,xa]}function T(a,g,L,ca){let [ma,qa,xa,Ga]=H(a,g,L);a=g-ma;L=L.filter(Na=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Na));0===
L.length&&(xa<g&&(xa=ma.plus({[Ga]:1})),xa!==ma&&(qa[Ga]=(qa[Ga]||0)+a/(xa-ma)));g=gb.fromObject(qa,ca);return 0<L.length?gb.fromMillis(a,ca).shiftTo(...L).plus(g):g}function V({numberingSystem:a},g=""){return new RegExp(`${Lc[a||"latn"]}${g}`)}function ea(a,g=L=>L){return{regex:a,deser:([L])=>{{let ca=parseInt(L,10);if(isNaN(ca)){ca="";for(let ma=0;ma<L.length;ma++){const qa=L.charCodeAt(ma);if(-1!==L[ma].search(Lc.hanidec))ca+=ve.indexOf(L[ma]);else for(const xa in id){const [Ga,Na]=id[xa];qa>=
Ga&&qa<=Na&&(ca+=qa-Ga)}}L=parseInt(ca,10)}else L=ca}return g(L)}}}function na(a){return a.replace(/\./g,"\\.?").replace(Mc,jd)}function pa(a,g){return null===a?null:{regex:RegExp(a.map(na).join("|")),deser:([L])=>a.findIndex(ca=>L.replace(/\./g,"").replace(Mc," ").toLowerCase()===ca.replace(/\./g,"").replace(Mc," ").toLowerCase())+g}}function sa(a,g){return{regex:a,deser:([,L,ca])=>X(L,ca),groups:g}}function ua(a){return{regex:a,deser:([g])=>g}}function Da(a,g){const L=V(g),ca=V(g,"{2}"),ma=V(g,
"{3}"),qa=V(g,"{4}"),xa=V(g,"{6}"),Ga=V(g,"{1,2}"),Na=V(g,"{1,3}"),$a=V(g,"{1,6}"),d=V(g,"{1,9}"),ab=V(g,"{2,4}"),Xa=V(g,"{4,6}"),zb=Wb=>({regex:RegExp(Wb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([u])=>u,literal:!0}),ra=(Wb=>{if(a.literal)return zb(Wb);switch(Wb.val){case "G":return pa(g.eras("short",!1),0);case "GG":return pa(g.eras("long",!1),0);case "y":return ea($a);case "yy":return ea(ab,D);case "yyyy":return ea(qa);case "yyyyy":return ea(Xa);case "yyyyyy":return ea(xa);case "M":return ea(Ga);
case "MM":return ea(ca);case "MMM":return pa(g.months("short",!0,!1),1);case "MMMM":return pa(g.months("long",!0,!1),1);case "L":return ea(Ga);case "LL":return ea(ca);case "LLL":return pa(g.months("short",!1,!1),1);case "LLLL":return pa(g.months("long",!1,!1),1);case "d":return ea(Ga);case "dd":return ea(ca);case "o":return ea(Na);case "ooo":return ea(ma);case "HH":return ea(ca);case "H":return ea(Ga);case "hh":return ea(ca);case "h":return ea(Ga);case "mm":return ea(ca);case "m":return ea(Ga);case "q":return ea(Ga);
case "qq":return ea(ca);case "s":return ea(Ga);case "ss":return ea(ca);case "S":return ea(Na);case "SSS":return ea(ma);case "u":return ua(d);case "uu":return ua(Ga);case "uuu":return ea(L);case "a":return pa(g.meridiems(),0);case "kkkk":return ea(qa);case "kk":return ea(ab,D);case "W":return ea(Ga);case "WW":return ea(ca);case "E":case "c":return ea(L);case "EEE":return pa(g.weekdays("short",!1,!1),1);case "EEEE":return pa(g.weekdays("long",!1,!1),1);case "ccc":return pa(g.weekdays("short",!0,!1),
1);case "cccc":return pa(g.weekdays("long",!0,!1),1);case "Z":case "ZZ":return sa(new RegExp(`([+-]${Ga.source})(?::(${ca.source}))?`),2);case "ZZZ":return sa(new RegExp(`([+-]${Ga.source})(${ca.source})?`),2);case "z":return ua(/[a-z_+-/]{1,256}?/i);case " ":return ua(/[^\S\n\r]/);default:return zb(Wb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ra.token=a;return ra}function za(a){return[`^${a.map(g=>g.regex).reduce((g,L)=>`${g}(${L.source})`,"")}$`,a]}function ya(a,
g,L){if(a=a.match(g)){g={};let ca=1;for(const ma in L)if(p(L,ma)){const qa=L[ma],xa=qa.groups?qa.groups+1:1;!qa.literal&&qa.token&&(g[qa.token.val[0]]=qa.deser(a.slice(ca,ca+xa)));ca+=xa}return[a,g]}return[a,{}]}function Qa(a){const g=ma=>{switch(ma){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";
case "k":return"weekYear";case "q":return"quarter";default:return null}};let L=null,ca;k(a.z)||(L=Vb.create(a.z));k(a.Z)||(L||(L=new Eb(a.Z)),ca=a.Z);k(a.q)||(a.M=3*(a.q-1)+1);k(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);k(a.u)||(a.S=x(a.u));return[Object.keys(a).reduce((ma,qa)=>{const xa=g(qa);xa&&(ma[xa]=a[qa]);return ma},{}),L,ca]}function Ka(a,g){return Array.prototype.concat(...a.map(L=>{if(!L.literal){var ca=Ab.macroTokenToFormatOpts(L.val);ca=Pa(ca,
g);L=null==ca||ca.includes(void 0)?L:ca}return L}))}function Oa(a,g,L){L=Ka(Ab.parseFormat(L),a);var ca=L.map(Xa=>Da(Xa,a));const ma=ca.find(Xa=>Xa.invalidReason);if(ma)return{input:g,tokens:L,invalidReason:ma.invalidReason};const [qa,xa]=za(ca);ca=RegExp(qa,"i");const [Ga,Na]=ya(g,ca,xa),[$a,d,ab]=Na?Qa(Na):[null,null,void 0];if(p(Na,"a")&&p(Na,"H"))throw new oa("Can't include meridiem when specifying 24-hour format");return{input:g,tokens:L,regex:ca,rawMatches:Ga,matches:Na,result:$a,zone:d,specificOffset:ab}}
function Pa(a,g){if(!a)return null;g=Ab.create(g,a);var L=g.formatDateTimeParts;Nc||(Nc=Za.fromMillis(1555555555555));return L.call(g,Nc).map(ca=>{{const {type:qa,value:xa}=ca;if("literal"===qa)ca=/^\s+$/.test(xa),ca={literal:!ca,val:ca?" ":xa};else{ca=a[qa];var ma=we[qa];"object"===typeof ma&&(ma=ma[ca]);ca=ma?{literal:!1,val:ma}:void 0}}return ca})}function Ja(a,g){return new Rb("unit out of range",`you specified ${g} (of type ${typeof g}) as a ${a}, which is invalid`)}function Ra(a,g,L){g=new Date(Date.UTC(a,
g-1,L));100>a&&0<=a&&g.setUTCFullYear(g.getUTCFullYear()-1900);a=g.getUTCDay();return 0===a?7:a}function Wa(a,g){a=z(a)?Oc:Pc;const L=a.findIndex(ca=>ca<g);return{month:L+1,day:g-a[L]}}function ta(a){const {year:g,month:L,day:ca}=a;var ma=ca+(z(g)?Oc:Pc)[L-1];const qa=Ra(g,L,ca);ma=Math.floor((ma-qa+10)/7);let xa;1>ma?(xa=g-1,ma=y(xa)):ma>y(g)?(xa=g+1,ma=1):xa=g;return{weekYear:xa,weekNumber:ma,weekday:qa,...v(a)}}function ub(a){const {weekYear:g,weekNumber:L,weekday:ca}=a;var ma=Ra(g,1,4),qa=z(g)?
366:365;ma=7*L+ca-ma-3;1>ma?(qa=g-1,ma+=z(qa)?366:365):ma>qa?(qa=g+1,ma-=z(g)?366:365):qa=g;const {month:xa,day:Ga}=Wa(qa,ma);return{year:qa,month:xa,day:Ga,...v(a)}}function hb(a){const {year:g,month:L,day:ca}=a;var ma=ca+(z(g)?Oc:Pc)[L-1];return{year:g,ordinal:ma,...v(a)}}function lb(a){const {year:g,ordinal:L}=a,{month:ca,day:ma}=Wa(g,L);return{year:g,month:ca,day:ma,...v(a)}}function b(a){const g=O(a.year),L=E(a.month,1,12),ca=E(a.day,1,A(a.year,a.month));return g?L?ca?!1:Ja("day",a.day):Ja("month",
a.month):Ja("year",a.year)}function fb(a){const {hour:g,minute:L,second:ca,millisecond:ma}=a;a=E(g,0,23)||24===g&&0===L&&0===ca&&0===ma;const qa=E(L,0,59),xa=E(ca,0,59),Ga=E(ma,0,999);return a?qa?xa?Ga?!1:Ja("millisecond",ma):Ja("second",ca):Ja("minute",L):Ja("hour",g)}function Ob(a){return new Rb("unsupported zone",`the zone "${a.name}" is not supported`)}function Jb(a){null===a.weekData&&(a.weekData=ta(a.c));return a.weekData}function ka(a,g){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};
return new Za({...a,...g,old:a})}function gc(a,g,L){let ca=a-6E4*g;const ma=L.offset(ca);if(g===ma)return[ca,g];ca-=6E4*(ma-g);g=L.offset(ca);return ma===g?[ca,ma]:[a-6E4*Math.min(ma,g),Math.max(ma,g)]}function Tb(a,g){a=new Date(a+6E4*g);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function yb(a,g,L){return gc(B(a),g,L)}function Sb(a,g){const L=a.o;var ca=a.c.year+
Math.trunc(g.years);const ma=a.c.month+Math.trunc(g.months)+3*Math.trunc(g.quarters);ca={...a.c,year:ca,month:ma,day:Math.min(a.c.day,A(ca,ma))+Math.trunc(g.days)+7*Math.trunc(g.weeks)};g=gb.fromObject({years:g.years-Math.trunc(g.years),quarters:g.quarters-Math.trunc(g.quarters),months:g.months-Math.trunc(g.months),weeks:g.weeks-Math.trunc(g.weeks),days:g.days-Math.trunc(g.days),hours:g.hours,minutes:g.minutes,seconds:g.seconds,milliseconds:g.milliseconds}).as("milliseconds");ca=B(ca);let [qa,xa]=
gc(ca,L,a.zone);0!==g&&(qa+=g,xa=a.zone.offset(qa));return{ts:qa,o:xa}}function Ub(a,g,L,ca,ma,qa){const {setZone:xa,zone:Ga}=L;return a&&0!==Object.keys(a).length||g?(a=Za.fromObject(a,{...L,zone:g||Ga,specificOffset:qa}),xa?a:a.setZone(Ga)):Za.invalid(new Rb("unparsable",`the input "${ma}" can't be parsed as ${ca}`))}function Zb(a,g,L=!0){return a.isValid?Ab.create(rb.create("en-US"),{allowZ:L,forceSimple:!0}).formatDateTimeFromString(a,g):null}function hc(a,g){const L=9999<a.c.year||0>a.c.year;
let ca="";L&&0<=a.c.year&&(ca+="+");ca+=Q(a.c.year,L?6:4);g?(ca=ca+"-"+Q(a.c.month),ca=ca+"-"+Q(a.c.day)):(ca+=Q(a.c.month),ca+=Q(a.c.day));return ca}function Db(a,g,L,ca,ma,qa){let xa=Q(a.c.hour);g?(xa=xa+":"+Q(a.c.minute),0===a.c.second&&L||(xa+=":")):xa+=Q(a.c.minute);0===a.c.second&&L||(xa+=Q(a.c.second),0===a.c.millisecond&&ca||(xa=xa+"."+Q(a.c.millisecond,3)));ma&&(a.isOffsetFixed&&0===a.offset&&!qa?xa+="Z":0>a.o?(xa=xa+"-"+Q(Math.trunc(-a.o/60)),xa=xa+":"+Q(Math.trunc(-a.o%60))):(xa=xa+"+"+
Q(Math.trunc(a.o/60)),xa=xa+":"+Q(Math.trunc(a.o%60))));qa&&(xa+="["+a.zone.ianaName+"]");return xa}function Pb(a){const g={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",
weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!g)throw new Ca(a);return g}function ib(a,g){const L=h(g.zone,xb.defaultZone);g=rb.fromObject(g);const ca=xb.now();var ma;if(k(a.year))a=ca;else{for(const qa of kd)k(a[qa])&&(a[qa]=ld[qa]);if(ma=b(a)||fb(a))return Za.invalid(ma);ma=L.offset(ca);[a,ma]=yb(a,ma,L)}return new Za({ts:a,zone:L,loc:g,o:ma})}function Fb(a,g,L){const ca=k(L.round)?!0:L.round,ma=(xa,Ga)=>{xa=J(xa,ca||L.calendary?0:2,!0);return g.loc.clone(L).relFormatter(L).format(xa,
Ga)},qa=xa=>L.calendary?g.hasSame(a,xa)?0:g.startOf(xa).diff(a.startOf(xa),xa).get(xa):g.diff(a,xa).get(xa);if(L.unit)return ma(qa(L.unit),L.unit);for(const xa of L.units){const Ga=qa(xa);if(1<=Math.abs(Ga))return ma(Ga,xa)}return ma(a>g?-0:0,L.units[L.units.length-1])}function Qb(a){let g={};0<a.length&&"object"===typeof a[a.length-1]?(g=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[g,a]}function Ya(a){if(Za.isDateTime(a))return a;if(a&&a.valueOf&&t(a.valueOf()))return Za.fromJSDate(a);
if(a&&"object"===typeof a)return Za.fromObject(a);throw new Aa(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Hb extends Error{}class S extends Hb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class ha extends Hb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class W extends Hb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class oa extends Hb{}class Ca extends Hb{constructor(a){super(`Invalid unit ${a}`)}}class Aa extends Hb{}class La extends Hb{constructor(){super("Zone is an abstract class")}}
const Ta={year:"numeric",month:"numeric",day:"numeric"},nb={year:"numeric",month:"short",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},wb={year:"numeric",month:"long",day:"numeric",weekday:"long"},Gb={hour:"numeric",minute:"numeric"},md={hour:"numeric",minute:"numeric",second:"numeric"},nd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},od={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
pd={hour:"numeric",minute:"numeric",hourCycle:"h23"},qd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},rd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},sd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},td={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},vd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},wd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xe={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},yd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},zd={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Ad={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class ic{get type(){throw new La;}get name(){throw new La;}get ianaName(){return this.name}get isUniversal(){throw new La;}offsetName(a,g){throw new La;}formatOffset(a,g){throw new La;}offset(a){throw new La;}equals(a){throw new La;}get isValid(){throw new La;}}let Qc=null;class mc extends ic{static get instance(){null===
Qc&&(Qc=new mc);return Qc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:g,locale:L}){return I(a,g,L)}formatOffset(a,g){return M(this.offset(a),g)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let nc={};const ye={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let oc={};class Vb extends ic{static create(a){oc[a]||(oc[a]=new Vb(a));return oc[a]}static resetCache(){oc=
{};nc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(g){return!1}}constructor(a){super();this.zoneName=a;this.valid=Vb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:g,locale:L}){return I(a,g,L,this.name)}formatOffset(a,g){return M(this.offset(a),g)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var g=this.name;
nc[g]||(nc[g]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));g=nc[g];if(g.formatToParts){g=g.formatToParts(a);var L=[];for(let d=0;d<g.length;d++){const {type:ab,value:Xa}=g[d],zb=ye[ab];"era"===ab?L[zb]=Xa:k(zb)||(L[zb]=parseInt(Xa,10))}g=L}else{g=g.format(a).replace(/\u200E/g,"");g=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(g);const [,d,ab,Xa,zb,ra,Wb,u]=g;g=[Xa,d,ab,zb,
ra,Wb,u]}let [ca,ma,qa,xa,Ga,Na,$a]=g;"BC"===xa&&(ca=-Math.abs(ca)+1);g=B({year:ca,month:ma,day:qa,hour:24===Ga?0:Ga,minute:Na,second:$a,millisecond:0});a=+a;L=a%1E3;return(g-(a-(0<=L?L:1E3+L)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let gd={},Gc={},Hc={},Ic={},pc=null;class ze{constructor(a,g,L){this.padTo=L.padTo||0;this.floor=L.floor||!1;const {padTo:ca,floor:ma,...qa}=L;if(!g||0<Object.keys(qa).length)g={useGrouping:!1,...L},0<L.padTo&&(g.minimumIntegerDigits=
L.padTo),this.inf=ba(a,g)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):J(a,3);return Q(a,this.padTo)}}class Ae{constructor(a,g,L){this.opts=L;L=this.originalZone=void 0;this.opts.timeZone?this.dt=a:"fixed"===a.zone.type?(L=a.offset/60*-1,L=0<=L?`Etc/GMT+${L}`:`Etc/GMT${L}`,0!==a.offset&&Vb.create(L).valid?this.dt=a:(L="UTC",this.dt=0===a.offset?a:a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone)):"system"===a.zone.type?this.dt=
a:"iana"===a.zone.type?(this.dt=a,L=a.zone.name):(L="UTC",this.dt=a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone);a={...this.opts};a.timeZone=a.timeZone||L;this.dtf=la(g,a)}format(){return this.originalZone?this.formatToParts().map(({value:a})=>a).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const a=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?a.map(g=>{if("timeZoneName"===g.type){const L=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,
format:this.opts.timeZoneName});return{...g,value:L}}return g}):a}resolvedOptions(){return this.dtf.resolvedOptions()}}class Be{constructor(a,g,L){this.opts={style:"long",...L};!g&&C()&&(this.rtf=R(a,L))}format(a,g){return this.rtf?this.rtf.format(a,g):va(g,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,g){return this.rtf?this.rtf.formatToParts(a,g):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,g,L,ca=!1){a=
a||xb.defaultLocale;var ma;(ma=a)||(ca?ca="en-US":(pc||(pc=(new Intl.DateTimeFormat).resolvedOptions().locale),ca=pc),ma=ca);return new rb(ma,g||xb.defaultNumberingSystem,L||xb.defaultOutputCalendar,a)}static resetCache(){pc=null;Gc={};Hc={};Ic={}}static fromObject({locale:a,numberingSystem:g,outputCalendar:L}={}){return rb.create(a,g,L)}constructor(a,g,L,ca){var ma=a.indexOf("-x-");-1!==ma&&(a=a.substring(0,ma));ma=a.indexOf("-u-");if(-1===ma)var qa=[a];else{try{qa=la(a).resolvedOptions();var xa=
a}catch(Xa){xa=a.substring(0,ma),qa=la(xa).resolvedOptions()}const {numberingSystem:d,calendar:ab}=qa;qa=[xa,d,ab]}const [Ga,Na,$a]=qa;this.locale=Ga;this.numberingSystem=g||Na||null;this.outputCalendar=L||$a||null;g=this.locale;L=this.numberingSystem;if((qa=this.outputCalendar)||L)g.includes("-u-")||(g+="-u"),qa&&(g+=`-ca-${qa}`),L&&(g+=`-nu-${L}`);this.intl=g;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=
ca;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),g=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);
return a&&g?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,g=!1,L=!0){return K(this,a,L,w,()=>{const ca=g?{month:a,day:"numeric"}:{month:a},ma=g?"format":"standalone";this.monthsCache[ma][a]||(this.monthsCache[ma][a]=
fa(qa=>this.extract(qa,ca,"month")));return this.monthsCache[ma][a]})}weekdays(a,g=!1,L=!0){return K(this,a,L,Z,()=>{const ca=g?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ma=g?"format":"standalone";this.weekdaysCache[ma][a]||(this.weekdaysCache[ma][a]=U(qa=>this.extract(qa,ca,"weekday")));return this.weekdaysCache[ma][a]})}meridiems(a=!0){return K(this,void 0,a,()=>Bd,()=>{if(!this.meridiemCache){const g={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Za.utc(2016,11,13,
9),Za.utc(2016,11,13,19)].map(L=>this.extract(L,g,"dayperiod"))}return this.meridiemCache})}eras(a,g=!0){return K(this,a,g,ja,()=>{const L={era:a};this.eraCache[a]||(this.eraCache[a]=[Za.utc(-40,1,1),Za.utc(2017,1,1)].map(ca=>this.extract(ca,L,"era")));return this.eraCache[a]})}extract(a,g,L){return(a=this.dtFormatter(a,g).formatToParts().find(ca=>ca.type.toLowerCase()===L))?a.value:null}numberFormatter(a={}){return new ze(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,g={}){return new Ae(a,
this.intl,g)}relFormatter(a={}){return new Be(this.intl,this.isEnglish(),a)}listFormatter(a={}){return f(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Rc=null;class Eb extends ic{static get utcInstance(){null===Rc&&(Rc=new Eb(0));return Rc}static instance(a){return 0===
a?Eb.utcInstance:new Eb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Eb(X(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${M(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${M(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,g){return M(this.fixed,g)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===
a.type&&a.fixed===this.fixed}get isValid(){return!0}}class me extends ic{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Sc=()=>Date.now(),Cd="system",Dd=null,Ed=null,Tc=null,Fd=60,Gd;class xb{static get now(){return Sc}static set now(a){Sc=a}static set defaultZone(a){Cd=a}static get defaultZone(){return h(Cd,
mc.instance)}static get defaultLocale(){return Dd}static set defaultLocale(a){Dd=a}static get defaultNumberingSystem(){return Ed}static set defaultNumberingSystem(a){Ed=a}static get defaultOutputCalendar(){return Tc}static set defaultOutputCalendar(a){Tc=a}static get twoDigitCutoffYear(){return Fd}static set twoDigitCutoffYear(a){Fd=a%100}static get throwOnInvalid(){return Gd}static set throwOnInvalid(a){Gd=a}static resetCaches(){rb.resetCache();Vb.resetCache()}}const oe="January February March April May June July August September October November December".split(" "),
Jc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ne="JFMAMJJASOND".split(""),Kc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),hd="Mon Tue Wed Thu Fri Sat Sun".split(" "),pe="MTWTFSS".split(""),Bd=["AM","PM"],se=["Before Christ","Anno Domini"],re=["BC","AD"],qe=["B","A"],Uc={D:Ta,DD:nb,DDD:mb,DDDD:wb,t:Gb,tt:md,ttt:nd,tttt:od,T:pd,TT:qd,TTT:rd,TTTT:sd,f:td,ff:vd,fff:xd,ffff:zd,F:ud,FF:wd,FFF:yd,FFFF:Ad};class Ab{static create(a,g={}){return new Ab(a,g)}static parseFormat(a){let g=
null,L="",ca=!1;const ma=[];for(let qa=0;qa<a.length;qa++){const xa=a.charAt(qa);"'"===xa?(0<L.length&&ma.push({literal:ca||/^\s+$/.test(L),val:L}),g=null,L="",ca=!ca):ca?L+=xa:xa===g?L+=xa:(0<L.length&&ma.push({literal:/^\s+$/.test(L),val:L}),g=L=xa)}0<L.length&&ma.push({literal:ca||/^\s+$/.test(L),val:L});return ma}static macroTokenToFormatOpts(a){return Uc[a]}constructor(a,g){this.opts=g;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,g){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());
return this.systemLoc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTime(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTimeParts(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).formatToParts()}formatInterval(a,g={}){return this.loc.dtFormatter(a.start,{...this.opts,...g}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).resolvedOptions()}num(a,g=0){if(this.opts.forceSimple)return Q(a,
g);const L={...this.opts};0<g&&(L.padTo=g);return this.loc.numberFormatter(L).format(a)}formatDateTimeFromString(a,g){const L="en"===this.loc.listingMode(),ca=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ma=(d,ab)=>this.loc.extract(a,d,ab),qa=d=>a.isOffsetFixed&&0===a.offset&&d.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,d.format):"",xa=(d,ab)=>L?w(d)[a.month-1]:ma(ab?{month:d}:{month:d,day:"numeric"},"month"),Ga=(d,ab)=>L?Z(d)[a.weekday-1]:ma(ab?{weekday:d}:{weekday:d,month:"long",
day:"numeric"},"weekday"),Na=d=>{const ab=Ab.macroTokenToFormatOpts(d);return ab?this.formatWithSystemDefault(a,ab):d},$a=d=>L?ja(d)[0>a.year?0:1]:ma({era:d},"era");return Ba(Ab.parseFormat(g),d=>{switch(d){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);
case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return qa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return qa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return qa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,
{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return L?Bd[12>a.hour?0:1]:ma({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ca?ma({day:"numeric"},"day"):this.num(a.day);case "dd":return ca?ma({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ga("short",!0);case "cccc":return Ga("long",!0);case "ccccc":return Ga("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ga("short",!1);case "EEEE":return Ga("long",
!1);case "EEEEE":return Ga("narrow",!1);case "L":return ca?ma({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return ca?ma({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return xa("short",!0);case "LLLL":return xa("long",!0);case "LLLLL":return xa("narrow",!0);case "M":return ca?ma({month:"numeric"},"month"):this.num(a.month);case "MM":return ca?ma({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return xa("short",!1);case "MMMM":return xa("long",
!1);case "MMMMM":return xa("narrow",!1);case "y":return ca?ma({year:"numeric"},"year"):this.num(a.year);case "yy":return ca?ma({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return ca?ma({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return ca?ma({year:"numeric"},"year"):this.num(a.year,6);case "G":return $a("short");case "GG":return $a("long");case "GGGGG":return $a("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,
4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Na(d)}})}formatDurationFromString(a,g){const L=ma=>{switch(ma[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";
case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};g=Ab.parseFormat(g);const ca=g.reduce((ma,{literal:qa,val:xa})=>qa?ma:ma.concat(xa),[]);a=a.shiftTo(...ca.map(L).filter(ma=>ma));return Ba(g,(ma=>qa=>{const xa=L(qa);return xa?this.num(ma.get(xa),qa.length):qa})(a))}}class Rb{constructor(a,g){this.reason=a;this.explanation=g}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Id=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Vc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jd=RegExp(`${Vc.source}${`(?:${Id.source}?(?:\\[(${Hd.source})\\])?)?`}`),Wc=RegExp(`(?:T${Jd.source})?`),Ce=Ha("weekYear","weekNumber","weekDay"),Kd=Ha("year","ordinal"),Ld=RegExp(`${Vc.source} ?(?:${Id.source}|(${Hd.source}))?`),Md=RegExp(`(?: ${Ld.source})?`),Nd=RegExp(`^T?${Vc.source}$`),De=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
te={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ge=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
He=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Ie=Ea(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Wc),Je=Ea(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Wc),Ke=Ea(/(\d{4})-?(\d{3})/,Wc),Le=Ea(Jd),Od=Fa(function(a,g){return[{year:Ua(a,g),month:Ua(a,g+1,1),day:Ua(a,g+2,1)},null,g+3]},Sa,Va,eb),Me=Fa(Ce,Sa,Va,eb),Ne=Fa(Kd,Sa,Va,eb),Oe=Fa(Sa,Va,eb),Pe=Fa(Sa),Qe=Ea(/(\d{4})-(\d\d)-(\d\d)/,Md),Re=Ea(Ld),Se=Fa(Sa,Va,eb),Pd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Pd},Ue={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Pd},bc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ue=bc.slice(0).reverse();
class gb{constructor(a){const g="longterm"===a.conversionAccuracy||!1;let L=g?Ue:Te;a.matrix&&(L=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=g?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=L;this.isLuxonDuration=!0}static fromMillis(a,g){return gb.fromObject({milliseconds:a},g)}static fromObject(a,g={}){if(null==a||"object"!==typeof a)throw new Aa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new gb({values:N(a,
gb.normalizeUnit),loc:rb.fromObject(g),conversionAccuracy:g.conversionAccuracy,matrix:g.matrix})}static fromDurationLike(a){if(t(a))return gb.fromMillis(a);if(gb.isDuration(a))return a;if("object"===typeof a)return gb.fromObject(a);throw new Aa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,g){const [L]=Ma(a,[De,kb]);return L?gb.fromObject(L,g):gb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,g){const [L]=Ma(a,[Nd,Pe]);return L?
gb.fromObject(L,g):gb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,g=null){if(!a)throw new Aa("need to specify a reason the Duration is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new W(a);return new gb({invalid:a})}static normalizeUnit(a){const g={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!g)throw new Ca(a);return g}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,g={}){g={...g,floor:!1!==g.round&&!1!==g.floor};return this.isValid?Ab.create(this.loc,g).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const g=bc.map(L=>{const ca=this.values[L];return k(ca)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:L.slice(0,-1)}).format(ca)}).filter(L=>L);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(g)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=J(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var g=this.toMillis();if(0>g||864E5<=g)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
g=this.shiftTo("hours","minutes","seconds","milliseconds");let L="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===g.seconds&&0===g.milliseconds||(L+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===g.milliseconds||(L+=".SSS"));g=g.toFormat(L);a.includePrefix&&(g="T"+g);return g}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);const g=
{};for(const L of bc)if(p(a.values,L)||p(this.values,L))g[L]=a.get(L)+this.get(L);return da(this,{values:g},!0)}minus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const g={};for(const L of Object.keys(this.values))g[L]=ia(a(this.values[L],L));return da(this,{values:g},!0)}get(a){return this[gb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...N(a,gb.normalizeUnit)};return da(this,{values:a})}reconfigure({locale:a,
numberingSystem:g,conversionAccuracy:L,matrix:ca}={}){a={loc:this.loc.clone({locale:a,numberingSystem:g}),matrix:ca,conversionAccuracy:L};return da(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();aa(this.matrix,a);return da(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const g={};for(const [L,ca]of Object.entries(a))0!==ca&&(g[L]=ca);return da(this,{values:g},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(qa=>gb.normalizeUnit(qa));const g={},L={},ca=this.toObject();let ma;for(const qa of bc)if(0<=a.indexOf(qa)){ma=qa;let xa=0;for(const Na in L)xa+=this.matrix[Na][qa]*L[Na],L[Na]=0;t(ca[qa])&&(xa+=ca[qa]);const Ga=Math.trunc(xa);g[qa]=Ga;L[qa]=(1E3*xa-1E3*Ga)/1E3;for(const Na in ca)bc.indexOf(Na)>bc.indexOf(qa)&&F(this.matrix,ca,Na,g,qa)}else t(ca[qa])&&(L[qa]=ca[qa]);for(const qa in L)0!==L[qa]&&(g[ma]+=qa===ma?L[qa]:L[qa]/this.matrix[ma][qa]);return da(this,{values:g},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const g of Object.keys(this.values))a[g]=0===this.values[g]?0:-this.values[g];return da(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const ca of bc){var g=this.values[ca];var L=a.values[ca];g=void 0===g||0===g?void 0===L||0===L:g===L;if(!g)return!1}return!0}}class vb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,g=null){if(!a)throw new Aa("need to specify a reason the Interval is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new ha(a);return new vb({invalid:a})}static fromDateTimes(a,
g){a=Ya(a);g=Ya(g);var L=a&&a.isValid?g&&g.isValid?g<a?vb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${g.toISO()}`):null:vb.invalid("missing or invalid end"):vb.invalid("missing or invalid start");return null==L?new vb({start:a,end:g}):L}static after(a,g){g=gb.fromDurationLike(g);a=Ya(a);return vb.fromDateTimes(a,a.plus(g))}static before(a,g){g=gb.fromDurationLike(g);a=Ya(a);return vb.fromDateTimes(a.minus(g),a)}static fromISO(a,
g){const [L,ca]=(a||"").split("/",2);if(L&&ca){let xa;try{var ma=Za.fromISO(L,g);xa=ma.isValid}catch(Na){xa=!1}let Ga;try{var qa=Za.fromISO(ca,g);Ga=qa.isValid}catch(Na){Ga=!1}if(xa&&Ga)return vb.fromDateTimes(ma,qa);if(xa){if(qa=gb.fromISO(ca,g),qa.isValid)return vb.after(ma,qa)}else if(Ga&&(ma=gb.fromISO(L,g),ma.isValid))return vb.before(qa,ma)}return vb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const g=this.start.startOf(a),L=this.end.startOf(a);return Math.floor(L.diff(g,a).get(a))+(L.valueOf()!==this.end.valueOf())}hasSame(a){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:g}={}){return this.isValid?vb.fromDateTimes(a||this.s,g||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Ya).filter(qa=>this.contains(qa)).sort();const g=[];let {s:L}=this,ca=0;for(;L<this.e;){var ma=a[ca]||this.e;ma=+ma>+this.e?
this.e:ma;g.push(vb.fromDateTimes(L,ma));L=ma;ca+=1}return g}splitBy(a){a=gb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:g}=this,L=1;const ca=[];for(;g<this.e;){var ma=this.start.plus(a.mapUnits(qa=>qa*L));ma=+ma>+this.e?this.e:ma;ca.push(vb.fromDateTimes(g,ma));g=ma;L+=1}return ca}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:
!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const g=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return g>=a?null:vb.fromDateTimes(g,a)}union(a){return this.isValid?vb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [g,L]=a.sort((ca,ma)=>ca.s-ma.s).reduce(([ca,ma],qa)=>
ma?ma.overlaps(qa)||ma.abutsStart(qa)?[ca,ma.union(qa)]:[ca.concat([ma]),qa]:[ca,qa],[[],null]);L&&g.push(L);return g}static xor(a){let g=null,L=0;const ca=[];a=a.map(ma=>[{time:ma.s,type:"s"},{time:ma.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ma,qa)=>ma.time-qa.time);for(const ma of a)L+="s"===ma.type?1:-1,1===L?g=ma.time:(g&&+g!==+ma.time&&ca.push(vb.fromDateTimes(g,ma.time)),g=null);return vb.merge(ca)}difference(...a){return vb.xor([this].concat(a)).map(g=>this.intersection(g)).filter(g=>
g&&!g.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Ta,g={}){return this.isValid?Ab.create(this.s.loc.clone(g),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,
{separator:g=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${g}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,g){return this.isValid?this.e.diff(this.s,a,g):gb.invalid(this.invalidReason)}mapEndpoints(a){return vb.fromDateTimes(a(this.s),a(this.e))}}class kc{static hasDST(a=xb.defaultZone){const g=Za.now().setZone(a).set({month:12});return!a.isUniversal&&g.offset!==g.set({month:6}).offset}static isValidIANAZone(a){return Vb.isValidZone(a)}static normalizeZone(a){return h(a,xb.defaultZone)}static months(a=
"long",{locale:g=null,numberingSystem:L=null,locObj:ca=null,outputCalendar:ma="gregory"}={}){return(ca||rb.create(g,L,ma)).months(a)}static monthsFormat(a="long",{locale:g=null,numberingSystem:L=null,locObj:ca=null,outputCalendar:ma="gregory"}={}){return(ca||rb.create(g,L,ma)).months(a,!0)}static weekdays(a="long",{locale:g=null,numberingSystem:L=null,locObj:ca=null}={}){return(ca||rb.create(g,L,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:g=null,numberingSystem:L=null,locObj:ca=null}=
{}){return(ca||rb.create(g,L,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:g=null}={}){return rb.create(g,null,"gregory").eras(a)}static features(){return{relative:C()}}}const Lc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},id={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ve=Lc.hanidec.replace(/[\[|\]]/g,"").split(""),jd=`[ ${String.fromCharCode(160)}]`,Mc=new RegExp(jd,"g"),we={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nc=null;const Pc=[0,31,59,90,120,151,181,212,243,273,304,334],Oc=[0,31,60,91,121,152,182,213,244,274,305,335],ld={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},We={ordinal:1,hour:0,minute:0,second:0,millisecond:0},kd="year month day hour minute second millisecond".split(" "),Xe="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ye="year ordinal hour minute second millisecond".split(" ");
class Za{constructor(a){const g=a.zone||xb.defaultZone;let L=a.invalid||(Number.isNaN(a.ts)?new Rb("invalid input"):null)||(g.isValid?null:Ob(g));this.ts=k(a.ts)?xb.now():a.ts;let ca=null;var ma=null;L||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(g)?[ca,ma]=[a.old.c,a.old.o]:(ma=g.offset(this.ts),ca=Tb(this.ts,ma),ca=(L=Number.isNaN(ca.year)?new Rb("invalid input"):null)?null:ca,ma=L?null:ma));this._zone=g;this.loc=a.loc||rb.create();this.invalid=L;this.weekData=null;this.c=ca;this.o=ma;this.isLuxonDateTime=
!0}static now(){return new Za({})}static local(){const [a,g]=Qb(arguments),[L,ca,ma,qa,xa,Ga,Na]=g;return ib({year:L,month:ca,day:ma,hour:qa,minute:xa,second:Ga,millisecond:Na},a)}static utc(){const [a,g]=Qb(arguments),[L,ca,ma,qa,xa,Ga,Na]=g;a.zone=Eb.utcInstance;return ib({year:L,month:ca,day:ma,hour:qa,minute:xa,second:Ga,millisecond:Na},a)}static fromJSDate(a,g={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Za.invalid("invalid input");const L=
h(g.zone,xb.defaultZone);return L.isValid?new Za({ts:a,zone:L,loc:rb.fromObject(g)}):Za.invalid(Ob(L))}static fromMillis(a,g={}){if(t(a))return-864E13>a||864E13<a?Za.invalid("Timestamp out of range"):new Za({ts:a,zone:h(g.zone,xb.defaultZone),loc:rb.fromObject(g)});throw new Aa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,g={}){if(t(a))return new Za({ts:1E3*a,zone:h(g.zone,xb.defaultZone),loc:rb.fromObject(g)});throw new Aa("fromSeconds requires a numerical input");
}static fromObject(a,g={}){a=a||{};var L=h(g.zone,xb.defaultZone);if(!L.isValid)return Za.invalid(Ob(L));var ca=xb.now();const ma=k(g.specificOffset)?L.offset(ca):g.specificOffset,qa=N(a,Pb);var xa=!k(qa.ordinal),Ga=!k(qa.year),Na=!k(qa.month)||!k(qa.day);Ga=Ga||Na;var $a=qa.weekYear||qa.weekNumber;g=rb.fromObject(g);if((Ga||xa)&&$a)throw new oa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Na&&xa)throw new oa("Can't mix ordinal dates with month/day");Na=$a||qa.weekday&&
!Ga;let d=Tb(ca,ma);Na?(ca=Xe,$a=Ve,d=ta(d)):xa?(ca=Ye,$a=We,d=hb(d)):(ca=kd,$a=ld);let ab=!1;for(var Xa of ca)k(qa[Xa])?qa[Xa]=ab?$a[Xa]:d[Xa]:ab=!0;Na?(Xa=O(qa.weekYear),ca=E(qa.weekNumber,1,y(qa.weekYear)),$a=E(qa.weekday,1,7),Xa=Xa?ca?$a?!1:Ja("weekday",qa.weekday):Ja("week",qa.week):Ja("weekYear",qa.weekYear)):xa?(Xa=O(qa.year),ca=E(qa.ordinal,1,z(qa.year)?366:365),Xa=Xa?ca?!1:Ja("ordinal",qa.ordinal):Ja("year",qa.year)):Xa=b(qa);if(Xa=Xa||fb(qa))return Za.invalid(Xa);xa=Na?ub(qa):xa?lb(qa):
qa;const [zb,ra]=yb(xa,ma,L);L=new Za({ts:zb,zone:L,o:ra,loc:g});return qa.weekday&&Ga&&a.weekday!==L.weekday?Za.invalid("mismatched weekday",`you can't specify both a weekday of ${qa.weekday} and a date of ${L.toISO()}`):L}static fromISO(a,g={}){const [L,ca]=Ma(a,[Ie,Od],[Je,Me],[Ke,Ne],[Le,Oe]);return Ub(L,ca,g,"ISO 8601",a)}static fromRFC2822(a,g={}){const [L,ca]=Ma(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Ee,db]);return Ub(L,ca,g,"RFC 2822",a)}static fromHTTP(a,g={}){const [L,
ca]=Ma(a,[Fe,c],[Ge,c],[He,q]);return Ub(L,ca,g,"HTTP",g)}static fromFormat(a,g,L={}){if(k(a)||k(g))throw new Aa("fromFormat requires an input string and a format");const {locale:ca=null,numberingSystem:ma=null}=L,qa=rb.fromOpts({locale:ca,numberingSystem:ma,defaultToEN:!0}),{result:xa,zone:Ga,specificOffset:Na,invalidReason:$a}=Oa(qa,a,g),[d,ab,Xa,zb]=[xa,Ga,Na,$a];return zb?Za.invalid(zb):Ub(d,ab,L,`format ${g}`,a,Xa)}static fromString(a,g,L={}){return Za.fromFormat(a,g,L)}static fromSQL(a,g={}){const [L,
ca]=Ma(a,[Qe,Od],[Re,Se]);return Ub(L,ca,g,"SQL",a)}static invalid(a,g=null){if(!a)throw new Aa("need to specify a reason the DateTime is invalid");a=a instanceof Rb?a:new Rb(a,g);if(xb.throwOnInvalid)throw new S(a);return new Za({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,g={}){return(a=Pa(a,rb.fromObject(g)))?a.map(L=>L?L.val:null).join(""):null}static expandFormat(a,g={}){return Ka(Ab.parseFormat(a),rb.fromObject(g)).map(L=>L.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Jb(this).weekYear:NaN}get weekNumber(){return this.isValid?Jb(this).weekNumber:NaN}get weekday(){return this.isValid?Jb(this).weekday:
NaN}get ordinal(){return this.isValid?hb(this.c).ordinal:NaN}get monthShort(){return this.isValid?kc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?kc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?kc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?kc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return z(this.year)}get daysInMonth(){return A(this.year,this.month)}get daysInYear(){return this.isValid?
z(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?y(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:g,numberingSystem:L,calendar:ca}=Ab.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:g,numberingSystem:L,outputCalendar:ca}}toUTC(a=0,g={}){return this.setZone(Eb.instance(a),g)}toLocal(){return this.setZone(xb.defaultZone)}setZone(a,{keepLocalTime:g=!1,keepCalendarTime:L=!1}={}){a=h(a,xb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let ca=
this.ts;if(g||L)g=a.offset(this.ts),L=this.toObject(),[ca]=yb(L,g,a);return ka(this,{ts:ca,zone:a})}return Za.invalid(Ob(a))}reconfigure({locale:a,numberingSystem:g,outputCalendar:L}={}){a=this.loc.clone({locale:a,numberingSystem:g,outputCalendar:L});return ka(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=N(a,Pb);var g=!k(a.weekYear)||!k(a.weekNumber)||!k(a.weekday);const L=!k(a.ordinal),ca=!k(a.year),ma=!k(a.month)||!k(a.day),qa=a.weekYear||
a.weekNumber;if((ca||ma||L)&&qa)throw new oa("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&L)throw new oa("Can't mix ordinal dates with month/day");g?g=ub({...ta(this.c),...a}):k(a.ordinal)?(g={...this.toObject(),...a},k(a.day)&&(g.day=Math.min(A(g.year,g.month),g.day))):g=lb({...hb(this.c),...a});const [xa,Ga]=yb(g,this.o,this.zone);return ka(this,{ts:xa,o:Ga})}plus(a){if(!this.isValid)return this;a=gb.fromDurationLike(a);return ka(this,Sb(this,a))}minus(a){if(!this.isValid)return this;
a=gb.fromDurationLike(a).negate();return ka(this,Sb(this,a))}startOf(a){if(!this.isValid)return this;const g={};a=gb.normalizeUnit(a);switch(a){case "years":g.month=1;case "quarters":case "months":g.day=1;case "weeks":case "days":g.hour=0;case "hours":g.minute=0;case "minutes":g.second=0;case "seconds":g.millisecond=0}"weeks"===a&&(g.weekday=1);"quarters"===a&&(g.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(g)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
g={}){return this.isValid?Ab.create(this.loc.redefaultToEN(g)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Ta,g={}){return this.isValid?Ab.create(this.loc.clone(g),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ab.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:g=!1,suppressMilliseconds:L=!1,includeOffset:ca=!0,extendedZone:ma=!1}={}){if(!this.isValid)return null;a="extended"===a;let qa=
hc(this,a);return qa=qa+"T"+Db(this,a,g,L,ca,ma)}toISODate({format:a="extended"}={}){return this.isValid?hc(this,"extended"===a):null}toISOWeekDate(){return Zb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:g=!1,includeOffset:L=!0,includePrefix:ca=!1,extendedZone:ma=!1,format:qa="extended"}={}){return this.isValid?(ca?"T":"")+Db(this,"extended"===qa,g,a,L,ma):null}toRFC2822(){return Zb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Zb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
hc(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:g=!1,includeOffsetSpace:L=!0}={}){let ca="HH:mm:ss.SSS";if(g||a)L&&(ca+=" "),g?ca+="z":a&&(ca+="ZZ");return Zb(this,ca,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const g={...this.c};a.includeConfig&&(g.outputCalendar=this.outputCalendar,g.numberingSystem=this.loc.numberingSystem,g.locale=this.loc.locale);return g}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,g="milliseconds",L={}){if(!this.isValid||!a.isValid)return gb.invalid("created by diffing an invalid DateTime");L={locale:this.locale,numberingSystem:this.numberingSystem,...L};
const ca=(Array.isArray(g)?g:[g]).map(gb.normalizeUnit);g=a.valueOf()>this.valueOf();a=T(g?this:a,g?a:this,ca,L);return g?a.negate():a}diffNow(a="milliseconds",g={}){return this.diff(Za.now(),a,g)}until(a){return this.isValid?vb.fromDateTimes(this,a):this}hasSame(a,g){if(!this.isValid)return!1;const L=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(g)<=L&&L<=a.endOf(g)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const g=a.base||Za.fromObject({},{zone:this.zone}),L=a.padding?this<g?-a.padding:a.padding:0;let ca="years months days hours minutes seconds".split(" "),ma=a.unit;Array.isArray(a.unit)&&(ca=a.unit,ma=void 0);return Fb(g,this.plus(L),{...a,numeric:"always",units:ca,unit:ma})}toRelativeCalendar(a={}){return this.isValid?Fb(a.base||Za.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Za.isDateTime))throw new Aa("min requires all arguments be DateTimes");
return P(a,g=>g.valueOf(),Math.min)}static max(...a){if(!a.every(Za.isDateTime))throw new Aa("max requires all arguments be DateTimes");return P(a,g=>g.valueOf(),Math.max)}static fromFormatExplain(a,g,L={}){const {locale:ca=null,numberingSystem:ma=null}=L;L=rb.fromOpts({locale:ca,numberingSystem:ma,defaultToEN:!0});return Oa(L,a,g)}static fromStringExplain(a,g,L={}){return Za.fromFormatExplain(a,g,L)}static get DATE_SHORT(){return Ta}static get DATE_MED(){return nb}static get DATE_MED_WITH_WEEKDAY(){return ob}static get DATE_FULL(){return mb}static get DATE_HUGE(){return wb}static get TIME_SIMPLE(){return Gb}static get TIME_WITH_SECONDS(){return md}static get TIME_WITH_SHORT_OFFSET(){return nd}static get TIME_WITH_LONG_OFFSET(){return od}static get TIME_24_SIMPLE(){return pd}static get TIME_24_WITH_SECONDS(){return qd}static get TIME_24_WITH_SHORT_OFFSET(){return rd}static get TIME_24_WITH_LONG_OFFSET(){return sd}static get DATETIME_SHORT(){return td}static get DATETIME_SHORT_WITH_SECONDS(){return ud}static get DATETIME_MED(){return vd}static get DATETIME_MED_WITH_SECONDS(){return wd}static get DATETIME_MED_WITH_WEEKDAY(){return xe}static get DATETIME_FULL(){return xd}static get DATETIME_FULL_WITH_SECONDS(){return yd}static get DATETIME_HUGE(){return zd}static get DATETIME_HUGE_WITH_SECONDS(){return Ad}}
l.DateTime=Za;l.Duration=gb;l.FixedOffsetZone=Eb;l.IANAZone=Vb;l.Info=kc;l.Interval=vb;l.SystemZone=mc;l.Zone=ic})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(l,f,la){var ba={exports:{}};ba.exports;(function(fa){(function(U,K){fa.exports&&(fa.exports=K())})(la.commonjsGlobal,function(){function U(h,k,t,O){h=Error.call(this,h);Object.setPrototypeOf&&Object.setPrototypeOf(h,U.prototype);h.expected=k;h.found=
t;h.location=O;h.name="SyntaxError";return h}function K(h,k,t){t=t||" ";if(h.length>k)return h;k-=h.length;t+=t.repeat(k);return h+t.slice(0,k)}(function(h,k){function t(){this.constructor=h}t.prototype=k.prototype;h.prototype=new t})(U,Error);U.prototype.format=function(h){var k="Error: "+this.message;if(this.location){var t=null,O;for(O=0;O<h.length;O++)if(h[O].source===this.location.source){t=h[O].text.split(/\r\n|\n|\r/g);break}h=this.location.start;O=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(h):h;var C=this.location.source+":"+O.line+":"+O.column;if(t){var P=this.location.end,e=K("",O.line.toString().length," ");t=t[h.line-1];P=(h.line===P.line?P.column:t.length+1)-h.column||1;k+="\n --\x3e "+C+"\n"+e+" |\n"+O.line+" | "+t+"\n"+e+" | "+K("",h.column-1," ")+K("",P,"^")}else k+="\n at "+C}return k};U.buildMessage=function(h,k){function t(p){return p.charCodeAt(0).toString(16).toUpperCase()}function O(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+t(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+t(E)})}function C(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+t(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+t(E)})}function P(p){return e[p.type](p)}
var e={literal:function(p){return'"'+O(p.text)+'"'},class:function(p){var E=p.parts.map(function(Q){return Array.isArray(Q)?C(Q[0])+"-"+C(Q[1]):C(Q)});return"["+(p.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};return"Expected "+function(p){p=p.map(P);var E,Q;p.sort();if(0<p.length){for(Q=E=1;E<p.length;E++)p[E-1]!==p[E]&&(p[Q]=p[E],Q++);p.length=Q}switch(p.length){case 1:return p[0];case 2:return p[0]+
" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}(h)+" but "+(k?'"'+O(k)+'"':"end of input")+" found."};return{SyntaxError:U,parse:function(h,k){function t(u,G){return{type:"literal",text:u,ignoreCase:G}}function O(u,G,Y){return{type:"class",parts:u,inverted:G,ignoreCase:Y}}function C(u){var G=ab[u],Y;if(!G){for(Y=u-1;!ab[Y];)Y--;G=ab[Y];for(G={line:G.line,column:G.column};Y<u;)10===h.charCodeAt(Y)?(G.line++,G.column=1):G.column++,Y++;ab[u]=G}return G}function P(u,G,Y){var wa=
C(u),Ia=C(G);u={source:fb,start:{offset:u,line:wa.line,column:wa.column},end:{offset:G,line:Ia.line,column:Ia.column}};Y&&fb&&"function"===typeof fb.offset&&(u.start=fb.offset(u.start),u.end=fb.offset(u.end));return u}function e(u){d<Xa||(d>Xa&&(Xa=d,zb=[]),zb.push(u))}function p(){var u=d;ta();var G=Q();G!==b?(ta(),u=G):(d=u,u=b);return u}function E(){var u=d;var G=Q();if(G!==b){u=[];var Y=d;var wa=ta();var Ia=Ja();if(Ia!==b){var bb=ta();var cb=Q();cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)}else d=Y,Y=
b;for(;Y!==b;)u.push(Y),Y=d,wa=ta(),Ia=Ja(),Ia!==b?(bb=ta(),cb=Q(),cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)):(d=Y,Y=b);Y={type:"expression-list"};G=[G];for(wa=0;wa<u.length;wa++)G.push(u[wa][3]);Y.value=G;u=Y}else d=u,u=b;return u}function Q(){var u=d;var G=r();if(G!==b){u=[];var Y=d;var wa=ta();var Ia=aa();if(Ia!==b){var bb=ta();var cb=r();cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)u.push(Y),Y=d,wa=ta(),Ia=aa(),Ia!==b?(bb=ta(),cb=r(),cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)):(d=Y,Y=b);u=
lb(G,u)}else d=u,u=b;return u}function r(){var u=d;var G=n();if(G!==b){u=[];var Y=d;var wa=ta();var Ia=F();if(Ia!==b){var bb=ta();var cb=n();cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)u.push(Y),Y=d,wa=ta(),Ia=F(),Ia!==b?(bb=ta(),cb=n(),cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)):(d=Y,Y=b);u=lb(G,u)}else d=u,u=b;return u}function n(){var u=d;var G=da();if(G===b){G=d;if(33===h.charCodeAt(d)){var Y=ka;d++}else Y=b,0===ra&&e(ne);if(Y!==b){var wa=d;ra++;if(61===h.charCodeAt(d)){var Ia=gc;d++}else Ia=
b,0===ra&&e(Kc);ra--;Ia===b?wa=void 0:(d=wa,wa=b);wa!==b?G=Y=[Y,wa]:(d=G,G=b)}else d=G,G=b}G!==b?(Y=ta(),wa=n(),wa!==b?u={type:"unary-expression",operator:"NOT",expr:wa}:(d=u,u=b)):(d=u,u=b);if(u===b){G=d;u=A();if(u!==b){ta();G=[];Y=d;wa=ta();Ia=x();if(Ia!==b){var bb=ta();var cb=A();cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)}else d=Y,Y=b;if(Y!==b)for(;Y!==b;)G.push(Y),Y=d,wa=ta(),Ia=x(),Ia!==b?(bb=ta(),cb=A(),cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)):(d=Y,Y=b);else G=b;G!==b&&(G={type:"arithmetic",tail:G});G===
b&&(G=d,Y=z(),Y!==b?(ta(),wa=Ra(),wa!==b?(ta(),wa=E(),wa!==b?(ta(),Ia=Wa(),Ia!==b?G={op:Y,right:wa}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b)):(d=G,G=b),G===b&&(G=d,Y=z(),Y!==b?(ta(),wa=Ra(),wa!==b?(ta(),wa=Wa(),wa!==b?G={op:Y,right:{type:"expression-list",value:[]}}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b),G===b&&(G=d,Y=z(),Y!==b?(ta(),wa=v(),wa!==b?G={op:Y,right:wa}:(d=G,G=b)):(d=G,G=b))),G===b&&(G=d,Ia=da(),Ia!==b?(ta(),Y=m(),Y!==b?(ta(),wa=A(),wa!==b?(ta(),bb=F(),bb!==b?(ta(),Ia=A(),Ia!==b?G={op:"NOT"+Y,right:{type:"expression-list",
value:[wa,Ia]}}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b)):(d=G,G=b)):(d=G,G=b),G===b&&(G=d,Ia=m(),Ia!==b?(ta(),Y=A(),Y!==b?(ta(),wa=F(),wa!==b?(ta(),bb=A(),bb!==b?G={op:Ia,right:{type:"expression-list",value:[Y,bb]}}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b)):(d=G,G=b)),G===b&&(G=d,Y=c(),Y!==b?(ta(),wa=da(),wa!==b?(ta(),wa=A(),wa!==b?G={op:Y+"NOT",right:wa}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b),G===b&&(G=d,Y=c(),Y!==b?(ta(),wa=A(),wa!==b?G={op:Y,right:wa}:(d=G,G=b)):(d=G,G=b)),G===b&&(G=d,Y=J(),Y!==b?(ta(),wa=Ea(),wa!==b?
(ta(),Ia=d,h.substr(d,6).toLowerCase()===ob?(bb=h.substr(d,6),d+=6):(bb=b,0===ra&&e(Od)),bb!==b?(bb=d,ra++,cb=N(),ra--,cb===b?bb=void 0:(d=bb,bb=b),bb!==b?Ia="ESCAPE":(d=Ia,Ia=b)):(d=Ia,Ia=b),Ia!==b?(ta(),Ia=Fa(),Ia!==b?G={op:Y,right:wa,escape:Ia.value}:(d=G,G=b)):(d=G,G=b)):(d=G,G=b)):(d=G,G=b),G===b&&(G=d,Y=J(),Y!==b?(ta(),wa=Ea(),wa!==b?G={op:Y,right:wa,escape:""}:(d=G,G=b)):(d=G,G=b))))));G===b&&(G=null);""==G||void 0==G||null==G?G=u:(Y=null,G=Y="arithmetic"==G.type?lb(u,G.tail):hb(G.op,u,G.right,
G.escape))}else d=G,G=b;u=G}return u}function x(){if(h.substr(d,2)===Tb){var u=Tb;d+=2}else u=b,0===ra&&e(hd);u===b&&(62===h.charCodeAt(d)?(u=yb,d++):(u=b,0===ra&&e(pe)),u===b&&(h.substr(d,2)===Sb?(u=Sb,d+=2):(u=b,0===ra&&e(Bd)),u===b&&(h.substr(d,2)===Ub?(u=Ub,d+=2):(u=b,0===ra&&e(se)),u===b&&(60===h.charCodeAt(d)?(u=Zb,d++):(u=b,0===ra&&e(re)),u===b&&(61===h.charCodeAt(d)?(u=gc,d++):(u=b,0===ra&&e(Kc)),u===b&&(h.substr(d,2)===hc?(u=hc,d+=2):(u=b,0===ra&&e(qe))))))));return u}function J(){var u=
u=d;var G=da();if(G!==b){var Y=ta();var wa=q();wa!==b?u=G=[G,Y,wa]:(d=u,u=b)}else d=u,u=b;u!==b&&(u=u[0]+" "+u[2]);u===b&&(u=q());return u}function z(){var u=u=d;var G=da();if(G!==b){var Y=ta();var wa=db();wa!==b?u=G=[G,Y,wa]:(d=u,u=b)}else d=u,u=b;u!==b&&(u=u[0]+" "+u[2]);u===b&&(u=db());return u}function A(){var u=d;var G=y();if(G!==b){u=[];var Y=d;var wa=ta();var Ia=B();if(Ia!==b){var bb=ta();var cb=y();cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)u.push(Y),Y=d,wa=ta(),Ia=B(),Ia!==
b?(bb=ta(),cb=y(),cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)):(d=Y,Y=b);u=lb(G,u)}else d=u,u=b;return u}function B(){if(43===h.charCodeAt(d)){var u=Db;d++}else u=b,0===ra&&e(Uc);u===b&&(45===h.charCodeAt(d)?(u=Pb,d++):(u=b,0===ra&&e(Ab)),u===b&&(h.substr(d,2)===ib?(u=ib,d+=2):(u=b,0===ra&&e(Rb))));return u}function y(){var u=d;var G=I();if(G!==b){u=[];var Y=d;var wa=ta();var Ia=D();if(Ia!==b){var bb=ta();var cb=I();cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)u.push(Y),Y=d,wa=ta(),Ia=D(),
Ia!==b?(bb=ta(),cb=I(),cb!==b?Y=wa=[wa,Ia,bb,cb]:(d=Y,Y=b)):(d=Y,Y=b);u=lb(G,u)}else d=u,u=b;return u}function D(){if(42===h.charCodeAt(d)){var u=Fb;d++}else u=b,0===ra&&e(Hd);u===b&&(47===h.charCodeAt(d)?(u=Qb,d++):(u=b,0===ra&&e(Id)));return u}function I(){var u=Fa();if(u===b){var G=d;var Y=d;var wa=Sa();if(wa!==b){var Ia=Va();if(Ia!==b){var bb=eb();bb!==b?Y=parseFloat(wa+Ia+bb):(d=Y,Y=b)}else d=Y,Y=b}else d=Y,Y=b;Y===b&&(Y=d,wa=Sa(),wa!==b?(Ia=Va(),Ia!==b?Y=parseFloat(wa+Ia):(d=Y,Y=b)):(d=Y,Y=
b),Y===b&&(Y=d,wa=Sa(),wa!==b?(Ia=eb(),Ia!==b?Y=parseFloat(wa+Ia):(d=Y,Y=b)):(d=Y,Y=b),Y===b&&(Y=d,wa=Sa(),wa!==b&&(wa=parseFloat(wa)),Y=wa)));var cb=Y;if(cb!==b){var Qd=d;ra++;var Lf=ia();ra--;Lf===b?Qd=void 0:(d=Qd,Qd=b);Qd!==b?G={type:"number",value:cb}:(d=G,G=b)}else d=G,G=b;u=G;if(u===b){var Xc=d;var qc=d;if(h.substr(d,4).toLowerCase()===Ca){var Rd=h.substr(d,4);d+=4}else Rd=b,0===ra&&e(He);if(Rd!==b){var Yc=d;ra++;var Mf=N();ra--;Mf===b?Yc=void 0:(d=Yc,Yc=b);Yc!==b?qc=Rd=[Rd,Yc]:(d=qc,qc=b)}else d=
qc,qc=b;var lc=qc;lc!==b&&(lc={type:"boolean",value:!0});Xc=lc;if(Xc===b){Xc=d;var rc=d;if(h.substr(d,5).toLowerCase()===Aa){var Sd=h.substr(d,5);d+=5}else Sd=b,0===ra&&e(Ie);if(Sd!==b){var Zc=d;ra++;var Nf=N();ra--;Nf===b?Zc=void 0:(d=Zc,Zc=b);Zc!==b?rc=Sd=[Sd,Zc]:(d=rc,rc=b)}else d=rc,rc=b;lc=rc;lc!==b&&(lc={type:"boolean",value:!1});Xc=lc}u=Xc;if(u===b){var sc=d;if(h.substr(d,4).toLowerCase()===oa){var Td=h.substr(d,4);d+=4}else Td=b,0===ra&&e(Ge);if(Td!==b){var $c=d;ra++;var Of=N();ra--;Of===
b?$c=void 0:(d=$c,$c=b);$c!==b?sc=Td=[Td,$c]:(d=sc,sc=b)}else d=sc,sc=b;var Ze=sc;Ze!==b&&(Ze={type:"null",value:null});u=Ze;if(u===b){var tc=d;if(ea()!==b){ta();var lf=Ea();lf!==b?tc={type:"date",value:lf.value}:(d=tc,tc=b)}else d=tc,tc=b;u=tc;if(u===b){var uc=d;if(V()!==b){ta();var mf=Ea();mf!==b?uc={type:"timestamp",value:mf.value}:(d=uc,uc=b)}else d=uc,uc=b;u=uc;if(u===b){var Bb=d;var $e=na();if($e!==b){ta();if(45===h.charCodeAt(d)){var cc=Pb;d++}else cc=b,0===ra&&e(Ab);cc===b&&(43===h.charCodeAt(d)?
(cc=Db,d++):(cc=b,0===ra&&e(Uc)));if(cc!==b){ta();var ad=Ea();if(ad!==b){ta();var nf=Z();nf!==b?Bb={type:"interval",value:ad,qualifier:nf,op:cc}:(d=Bb,Bb=b)}else d=Bb,Bb=b}else d=Bb,Bb=b}else d=Bb,Bb=b;Bb===b&&(Bb=d,$e=na(),$e!==b?(ta(),cc=Ea(),cc!==b?(ta(),ad=Z(),ad!==b?Bb={type:"interval",value:cc,qualifier:ad,op:""}:(d=Bb,Bb=b)):(d=Bb,Bb=b)):(d=Bb,Bb=b));u=Bb}}}}}}var pb=u;if(pb===b){var Kb=d;var vc=d;if(h.substr(d,7).toLowerCase()===qd){var of=h.substr(d,7);d+=7}else of=b,0===ra&&e(Pd);if(of!==
b){var Ud=d;ra++;var Pf=N();ra--;Pf===b?Ud=void 0:(d=Ud,Ud=b);Ud!==b?vc="EXTRACT":(d=vc,vc=b)}else d=vc,vc=b;if(vc!==b){ta();var Qf=Ra();if(Qf!==b){ta();var Xb=pa();Xb===b&&(Xb=sa(),Xb===b&&(Xb=ua(),Xb===b&&(Xb=Da(),Xb===b&&(Xb=za(),Xb===b&&(Xb=ya())))));var pf=Xb;if(pf!==b){ta();var Rf=H();if(Rf!==b){ta();var qf=Q();if(qf!==b){ta();var Sf=Wa();Sf!==b?Kb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(d=Kb,Kb=b)}else d=Kb,Kb=b}else d=Kb,Kb=b}else d=
Kb,Kb=b}else d=Kb,Kb=b}else d=Kb,Kb=b;pb=Kb;if(pb===b){var Lb=d;var wc=d;if(h.substr(d,9).toLowerCase()===pd){var rf=h.substr(d,9);d+=9}else rf=b,0===ra&&e(Se);if(rf!==b){var Vd=d;ra++;var Tf=N();ra--;Tf===b?Vd=void 0:(d=Vd,Vd=b);Vd!==b?wc="SUBSTRING":(d=wc,wc=b)}else d=wc,wc=b;if(wc!==b){ta();var Uf=Ra();if(Uf!==b){ta();var af=Q();if(af!==b){ta();var Vf=H();if(Vf!==b){ta();var bf=Q();if(bf!==b){ta();var dc=d;var xc=d;if(h.substr(d,3).toLowerCase()===od){var sf=h.substr(d,3);d+=3}else sf=b,0===ra&&
e(Re);if(sf!==b){var Wd=d;ra++;var Wf=N();ra--;Wf===b?Wd=void 0:(d=Wd,Wd=b);Wd!==b?xc="FOR":(d=xc,xc=b)}else d=xc,xc=b;var bd=xc;if(bd!==b){var Xf=ta();var tf=Q();if(tf!==b){var Yf=ta();dc=bd=[bd,Xf,tf,Yf]}else d=dc,dc=b}else d=dc,dc=b;dc===b&&(dc=null);bd=Wa();bd!==b?Lb={type:"function",name:"substring",args:{type:"expression-list",value:dc?[af,bf,dc[2]]:[af,bf]}}:(d=Lb,Lb=b)}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b;pb=Lb;if(pb===b){var sb=d;var cf=T();if(cf!==b){ta();
var df=Ra();if(df!==b){ta();var ec=w();ec===b&&(ec=null);ta();var cd=Q();if(cd!==b){ta();var ef=H();if(ef!==b){ta();var uf=Q();if(uf!==b){ta();var Zf=Wa();Zf!==b?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ec?"BOTH":ec},cd,uf]}}:(d=sb,sb=b)}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b;sb===b&&(sb=d,cf=T(),cf!==b?(ta(),df=Ra(),df!==b?(ta(),ec=w(),ec===b&&(ec=null),ta(),cd=Q(),cd!==b?(ta(),ef=Wa(),ef!==b?sb={type:"function",
name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ec?"BOTH":ec},cd]}}:(d=sb,sb=b)):(d=sb,sb=b)):(d=sb,sb=b)):(d=sb,sb=b));pb=sb;if(pb===b){var Mb=d;var yc=d;if(h.substr(d,8).toLowerCase()===sd){var vf=h.substr(d,8);d+=8}else vf=b,0===ra&&e(Ue);if(vf!==b){var Xd=d;ra++;var $f=N();ra--;$f===b?Xd=void 0:(d=Xd,Xd=b);Xd!==b?yc="POSITION":(d=yc,yc=b)}else d=yc,yc=b;if(yc!==b){ta();var ag=Ra();if(ag!==b){ta();var wf=Q();if(wf!==b){ta();var bg=db();if(bg!==b){ta();var xf=Q();if(xf!==
b){ta();var cg=Wa();cg!==b?Mb={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(d=Mb,Mb=b)}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b;pb=Mb;if(pb===b){var Nb=d;var zc=d;if(h.substr(d,4).toLowerCase()===xd){var yf=h.substr(d,4);d+=4}else yf=b,0===ra&&e(Lc);if(yf!==b){var Yd=d;ra++;var dg=N();ra--;dg===b?Yd=void 0:(d=Yd,Yd=b);Yd!==b?zc="CAST":(d=zc,zc=b)}else d=zc,zc=b;if(zc!==b){ta();var eg=Ra();if(eg!==b){ta();var zf=Q();if(zf!==b){ta();
var Ac=d;if(h.substr(d,2).toLowerCase()===yd){var Af=h.substr(d,2);d+=2}else Af=b,0===ra&&e(id);if(Af!==b){var Zd=d;ra++;var fg=N();ra--;fg===b?Zd=void 0:(d=Zd,Zd=b);Zd!==b?Ac="AS":(d=Ac,Ac=b)}else d=Ac,Ac=b;var gg=Ac;if(gg!==b){ta();var qb=d;var Bc=d;if(h.substr(d,7).toLowerCase()===zd){var Bf=h.substr(d,7);d+=7}else Bf=b,0===ra&&e(ve);if(Bf!==b){var $d=d;ra++;var hg=N();ra--;hg===b?$d=void 0:(d=$d,$d=b);$d!==b?Bc="INTEGER":(d=Bc,Bc=b)}else d=Bc,Bc=b;var tb=Bc;tb!==b&&(tb={type:"data-type",value:{type:"integer"}});
qb=tb;if(qb===b){qb=d;var Cc=d;if(h.substr(d,8).toLowerCase()===Ad){var Cf=h.substr(d,8);d+=8}else Cf=b,0===ra&&e(jd);if(Cf!==b){var ae=d;ra++;var ig=N();ra--;ig===b?ae=void 0:(d=ae,ae=b);ae!==b?Cc="SMALLINT":(d=Cc,Cc=b)}else d=Cc,Cc=b;tb=Cc;tb!==b&&(tb={type:"data-type",value:{type:"smallint"}});qb=tb;if(qb===b){qb=d;var Dc=d;if(h.substr(d,5).toLowerCase()===ic){var Df=h.substr(d,5);d+=5}else Df=b,0===ra&&e(Mc);if(Df!==b){var be=d;ra++;var jg=N();ra--;jg===b?be=void 0:(d=be,be=b);be!==b?Dc="FLOAT":
(d=Dc,Dc=b)}else d=Dc,Dc=b;tb=Dc;tb!==b&&(tb={type:"data-type",value:{type:"float"}});qb=tb;if(qb===b){qb=d;var Ec=d;if(h.substr(d,4).toLowerCase()===Qc){var Ef=h.substr(d,4);d+=4}else Ef=b,0===ra&&e(we);if(Ef!==b){var ce=d;ra++;var kg=N();ra--;kg===b?ce=void 0:(d=ce,ce=b);ce!==b?Ec="REAL":(d=Ec,Ec=b)}else d=Ec,Ec=b;tb=Ec;tb!==b&&(tb={type:"data-type",value:{type:"real"}});qb=tb;if(qb===b&&(qb=d,tb=ea(),tb!==b&&(tb={type:"data-type",value:{type:"date"}}),qb=tb,qb===b&&(qb=d,tb=V(),tb!==b&&(tb={type:"data-type",
value:{type:"timestamp"}}),qb=tb,qb===b))){qb=d;var Fc=d;if(h.substr(d,7).toLowerCase()===mc){var Ff=h.substr(d,7);d+=7}else Ff=b,0===ra&&e(Nc);if(Ff!==b){var de=d;ra++;var lg=N();ra--;lg===b?de=void 0:(d=de,de=b);de!==b?Fc="VARCHAR":(d=Fc,Fc=b)}else d=Fc,Fc=b;tb=Fc;if(tb!==b){ta();var mg=Ra();if(mg!==b){ta();var Gf=kb();if(Gf!==b){ta();var ng=Wa();ng!==b?qb={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(d=qb,qb=b)}else d=qb,qb=b}else d=qb,qb=b}else d=qb,qb=b}}}}var Hf=qb;if(Hf!==b){ta();
var og=Wa();og!==b?Nb={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(d=Nb,Nb=b)}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b;pb=Nb;if(pb===b){var jc=d;var ee;var Yb=d;Yb=ee=X();if(Yb===b)if(Yb=d,96===h.charCodeAt(d)?(ee=Sc,d++):(ee=b,0===ra&&e(Na)),ee!==b){var fe=[];if(Jc.test(h.charAt(d))){var fc=h.charAt(d);d++}else fc=b,0===ra&&e($a);if(fc!==b)for(;fc!==b;)fe.push(fc),Jc.test(h.charAt(d))?(fc=h.charAt(d),d++):(fc=b,0===ra&&e($a));else fe=
b;fe!==b?(96===h.charCodeAt(d)?(fc=Sc,d++):(fc=b,0===ra&&e(Na)),fc!==b?Yb=fe.join(""):(d=Yb,Yb=b)):(d=Yb,Yb=b)}else d=Yb,Yb=b;var If=Yb;if(If!==b){ta();var pg=Ra();if(pg!==b){ta();var ge=E();ge===b&&(ge=null);ta();var qg=Wa();qg!==b?jc={type:"function",name:If,args:ge?ge:{type:"expression-list",value:[]}}:(d=jc,jc=b)}else d=jc,jc=b}else d=jc,jc=b;pb=jc;if(pb===b){var $b;var Cb=d;var ff=Qa();if(ff!==b){ta();var dd=Q();if(dd!==b){ta();var ed=[];for($b=Ha();$b!==b;)ed.push($b),$b=Ha();$b=ta();var he=
Ka();he!==b?Cb={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:null}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;if(Cb===b)if(Cb=d,ff=Qa(),ff!==b)if(ta(),dd=Q(),dd!==b){ta();ed=[];for($b=Ha();$b!==b;)ed.push($b),$b=Ha();$b=ta();he=Ua();if(he!==b){ta();var rg=Ka();rg!==b?Cb={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:he.value}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;else d=Cb,Cb=b;var gf=Cb;if(gf===b){var ac;var Ib=d;var hf=Qa();if(hf!==b){ta();var fd=[];for(ac=
Ma();ac!==b;)fd.push(ac),ac=Ma();ac=ta();var ie=Ka();ie!==b?Ib={type:"case-expression",format:"searched",clauses:fd,else:null}:(d=Ib,Ib=b)}else d=Ib,Ib=b;if(Ib===b)if(Ib=d,hf=Qa(),hf!==b){ta();fd=[];for(ac=Ma();ac!==b;)fd.push(ac),ac=Ma();ac=ta();ie=Ua();if(ie!==b){ta();var sg=Ka();sg!==b?Ib={type:"case-expression",format:"searched",clauses:fd,else:ie.value}:(d=Ib,Ib=b)}else d=Ib,Ib=b}else d=Ib,Ib=b;gf=Ib}pb=gf;if(pb===b){var je;var ke=d;var Jf=ia();if(Jf!==b){var Kf=[];for(je=M();je!==b;)Kf.push(je),
je=M();ke=Jf+Kf.join("")}else d=ke,ke=b;var le=ke;if(le!==b){var jf=le;le=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}pb=le;if(pb===b&&(pb=v(),pb===b)){pb=d;var tg=Ra();if(tg!==b){ta();var kf=Q();if(kf!==b){ta();var ug=Wa();ug!==b?(kf.paren=!0,pb=kf):(d=pb,pb=b)}else d=pb,pb=b}else d=pb,pb=b}}}}}}}}}return pb}function X(){var u;var G=d;var Y=ia();if(Y!==b){G=[];for(u=
N();u!==b;)G.push(u),u=N();G=Y+G.join("")}else d=G,G=b;return G}function ia(){if(Cd.test(h.charAt(d))){var u=h.charAt(d);d++}else u=b,0===ra&&e(Vc);return u}function N(){if(Dd.test(h.charAt(d))){var u=h.charAt(d);d++}else u=b,0===ra&&e(Jd);return u}function M(){if(Ed.test(h.charAt(d))){var u=h.charAt(d);d++}else u=b,0===ra&&e(Wc);return u}function v(){var u=d;if(64===h.charCodeAt(d)){var G=Ya;d++}else G=b,0===ra&&e(Ce);if(G!==b){var Y=X();Y!==b?u=G=[G,Y]:(d=u,u=b)}else d=u,u=b;u!==b&&(u={type:"parameter",
value:u[1]});return u}function w(){var u=d;if(h.substr(d,7).toLowerCase()===vd){var G=h.substr(d,7);d+=7}else G=b,0===ra&&e(gb);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="LEADING":(d=u,u=b)}else d=u,u=b;u===b&&(u=d,h.substr(d,8).toLowerCase()===wd?(G=h.substr(d,8),d+=8):(G=b,0===ra&&e(vb)),G!==b?(G=d,ra++,Y=N(),ra--,Y===b?G=void 0:(d=G,G=b),G!==b?u="TRAILING":(d=u,u=b)):(d=u,u=b),u===b&&(u=d,h.substr(d,4).toLowerCase()===xe?(G=h.substr(d,4),d+=4):(G=b,0===ra&&e(kc)),G!==b?
(G=d,ra++,Y=N(),ra--,Y===b?G=void 0:(d=G,G=b),G!==b?u="BOTH":(d=u,u=b)):(d=u,u=b)));return u}function Z(){var u=d;var G=d;var Y=ja();if(Y!==b){ta();var wa=Ra();if(wa!==b)if(ta(),wa=Ba(),wa!==b){ta();var Ia=Wa();Ia!==b?G={type:"interval-period",period:Y.value,precision:wa,secondary:null}:(d=G,G=b)}else d=G,G=b;else d=G,G=b}else d=G,G=b;G===b&&(G=d,Y=ja(),Y!==b&&(Y={type:"interval-period",period:Y.value,precision:null,secondary:null}),G=Y);if(G!==b)if(ta(),Y=d,h.substr(d,2).toLowerCase()===nc?(wa=h.substr(d,
2),d+=2):(wa=b,0===ra&&e(Pc)),wa!==b?(wa=d,ra++,Ia=N(),ra--,Ia===b?wa=void 0:(d=wa,wa=b),wa!==b?Y="TO":(d=Y,Y=b)):(d=Y,Y=b),Y!==b){ta();Y=d;wa=ja();wa!==b&&(wa={type:"interval-period",period:wa.value,precision:null,secondary:null});Y=wa;if(Y===b){Y=d;wa=ya();if(wa!==b)if(ta(),wa=Ra(),wa!==b)if(ta(),wa=Ba(),wa!==b)if(ta(),Ia=Ja(),Ia!==b)if(ta(),Ia=va(),Ia!==b){ta();var bb=Wa();bb!==b?Y={type:"interval-period",period:"second",precision:wa,secondary:Ia}:(d=Y,Y=b)}else d=Y,Y=b;else d=Y,Y=b;else d=Y,Y=
b;else d=Y,Y=b;else d=Y,Y=b;Y===b&&(Y=d,wa=ya(),wa!==b?(ta(),wa=Ra(),wa!==b?(ta(),wa=Ba(),wa!==b?(ta(),Ia=Wa(),Ia!==b?Y={type:"interval-period",period:"second",precision:wa,secondary:null}:(d=Y,Y=b)):(d=Y,Y=b)):(d=Y,Y=b)):(d=Y,Y=b),Y===b&&(Y=d,wa=ya(),wa!==b&&(wa={type:"interval-period",period:"second",precision:null,secondary:null}),Y=wa))}Y!==b?u={type:"interval-qualifier",start:G,end:Y}:(d=u,u=b)}else d=u,u=b;else d=u,u=b;u===b&&(u=d,Y=ja(),Y!==b?(ta(),G=Ra(),G!==b?(ta(),G=va(),G!==b?(ta(),wa=
Wa(),wa!==b?u={type:"interval-period",period:Y.value,precision:G,secondary:null}:(d=u,u=b)):(d=u,u=b)):(d=u,u=b)):(d=u,u=b),u===b&&(u=d,Y=ja(),Y!==b&&(Y={type:"interval-period",period:Y.value,precision:null,secondary:null}),u=Y,u===b&&(u=d,Y=ya(),Y!==b?(ta(),G=Ra(),G!==b?(ta(),G=Ba(),G!==b?(ta(),wa=Ja(),wa!==b?(ta(),Y=va(),Y!==b?(ta(),wa=Wa(),wa!==b?u={type:"interval-period",period:"second",precision:G,secondary:Y}:(d=u,u=b)):(d=u,u=b)):(d=u,u=b)):(d=u,u=b)):(d=u,u=b)):(d=u,u=b),u===b&&(u=d,Y=ya(),
Y!==b?(ta(),G=Ra(),G!==b?(ta(),G=va(),G!==b?(ta(),wa=Wa(),wa!==b?u={type:"interval-period",period:"second",precision:G,secondary:null}:(d=u,u=b)):(d=u,u=b)):(d=u,u=b)):(d=u,u=b),u===b&&(u=d,Y=ya(),Y!==b&&(Y={type:"interval-period",period:"second",precision:null,secondary:null}),u=Y)))));return u}function ja(){var u=d;u=ua();u!==b&&(u={type:"string",value:"day"});u===b&&(u=d,u=Da(),u!==b&&(u={type:"string",value:"hour"}),u===b&&(u=d,u=za(),u!==b&&(u={type:"string",value:"minute"}),u===b&&(u=d,u=sa(),
u!==b&&(u={type:"string",value:"month"}),u===b&&(u=d,u=pa(),u!==b&&(u={type:"string",value:"year"})))));return u}function va(){var u=kb();u!==b&&(u=parseFloat(u));return u}function Ba(){var u=kb();u!==b&&(u=parseFloat(u));return u}function Ea(){var u=Fa();u===b&&(u=v());return u}function Fa(){var u=d;if(39===h.charCodeAt(d)){var G=Hb;d++}else G=b,0===ra&&e(Kd);G===b&&(h.substr(d,2)===S?(G=S,d+=2):(G=b,0===ra&&e(Ld)));if(G!==b){G=[];var Y=d;h.substr(d,2)===ha?(Y=ha,d+=2):(Y=b,0===ra&&e(Md));Y!==b&&
(Y="'");Y===b&&(Tc.test(h.charAt(d))?(Y=h.charAt(d),d++):(Y=b,0===ra&&e(Nd)));for(;Y!==b;)G.push(Y),Y=d,h.substr(d,2)===ha?(Y=ha,d+=2):(Y=b,0===ra&&e(Md)),Y!==b&&(Y="'"),Y===b&&(Tc.test(h.charAt(d))?(Y=h.charAt(d),d++):(Y=b,0===ra&&e(Nd)));39===h.charCodeAt(d)?(Y=Hb,d++):(Y=b,0===ra&&e(Kd));Y!==b?u={type:"string",value:G.join("")}:(d=u,u=b)}else d=u,u=b;return u}function Ma(){var u=d;if(Oa()!==b){ta();var G=Q();if(G!==b){ta();var Y=Pa();Y!==b?(ta(),Y=Q(),Y!==b?u={type:"when-clause",operand:G,value:Y}:
(d=u,u=b)):(d=u,u=b)}else d=u,u=b}else d=u,u=b;return u}function Ha(){var u=d;if(Oa()!==b){ta();var G=Q();if(G!==b){ta();var Y=Pa();Y!==b?(ta(),Y=Q(),Y!==b?u={type:"when-clause",operand:G,value:Y}:(d=u,u=b)):(d=u,u=b)}else d=u,u=b}else d=u,u=b;return u}function Ua(){var u=d;var G=d;if(h.substr(d,4).toLowerCase()===rb){var Y=h.substr(d,4);d+=4}else Y=b,0===ra&&e(ca);if(Y!==b){Y=d;ra++;var wa=N();ra--;wa===b?Y=void 0:(d=Y,Y=b);Y!==b?G="ELSE":(d=G,G=b)}else d=G,G=b;G!==b?(ta(),G=Q(),G!==b?u={type:"else-clause",
value:G}:(d=u,u=b)):(d=u,u=b);return u}function Sa(){var u=kb();if(u===b){u=d;if(45===h.charCodeAt(d)){var G=Pb;d++}else G=b,0===ra&&e(Ab);G===b&&(43===h.charCodeAt(d)?(G=Db,d++):(G=b,0===ra&&e(Uc)));if(G!==b){var Y=kb();Y!==b?u=G[0]+Y:(d=u,u=b)}else d=u,u=b}return u}function Va(){var u=d;if(46===h.charCodeAt(d)){var G=W;d++}else G=b,0===ra&&e(De);G!==b?(u=kb(),u===b&&(u=null),u="."+(null!=u?u:"")):(d=u,u=b);return u}function eb(){var u;var G=u=d;if(Gd.test(h.charAt(d))){var Y=h.charAt(d);d++}else Y=
b,0===ra&&e(Ee);Y!==b?(xb.test(h.charAt(d))?(G=h.charAt(d),d++):(G=b,0===ra&&e(Fe)),G===b&&(G=null),G="e"+(null===G?"":G)):(d=G,G=b);G!==b?(Y=kb(),Y!==b?u=G+Y:(d=u,u=b)):(d=u,u=b);return u}function kb(){var u=[];var G=jb();if(G!==b)for(;G!==b;)u.push(G),G=jb();else u=b;u!==b&&(u=u.join(""));return u}function jb(){if(Fd.test(h.charAt(d))){var u=h.charAt(d);d++}else u=b,0===ra&&e(te);return u}function db(){var u=d;if(h.substr(d,2).toLowerCase()===La){var G=h.substr(d,2);d+=2}else G=b,0===ra&&e(Je);
if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="IN":(d=u,u=b)}else d=u,u=b;return u}function c(){var u=d;if(h.substr(d,2).toLowerCase()===Ta){var G=h.substr(d,2);d+=2}else G=b,0===ra&&e(Ke);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="IS":(d=u,u=b)}else d=u,u=b;return u}function q(){var u=d;if(h.substr(d,4).toLowerCase()===nb){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(Le);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="LIKE":(d=u,u=
b)}else d=u,u=b;return u}function da(){var u=d;if(h.substr(d,3).toLowerCase()===mb){var G=h.substr(d,3);d+=3}else G=b,0===ra&&e(Me);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="NOT":(d=u,u=b)}else d=u,u=b;return u}function F(){var u=d;if(h.substr(d,3).toLowerCase()===wb){var G=h.substr(d,3);d+=3}else G=b,0===ra&&e(Ne);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="AND":(d=u,u=b)}else d=u,u=b;return u}function aa(){var u=d;if(h.substr(d,2).toLowerCase()===
Gb){var G=h.substr(d,2);d+=2}else G=b,0===ra&&e(Oe);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="OR":(d=u,u=b)}else d=u,u=b;return u}function m(){var u=d;if(h.substr(d,7).toLowerCase()===md){var G=h.substr(d,7);d+=7}else G=b,0===ra&&e(Pe);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="BETWEEN":(d=u,u=b)}else d=u,u=b;return u}function H(){var u=d;if(h.substr(d,4).toLowerCase()===nd){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(Qe);if(G!==b){G=d;ra++;var Y=
N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="FROM":(d=u,u=b)}else d=u,u=b;return u}function T(){var u=d;if(h.substr(d,4).toLowerCase()===rd){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(Te);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="TRIM":(d=u,u=b)}else d=u,u=b;return u}function V(){var u=d;if(h.substr(d,9).toLowerCase()===td){var G=h.substr(d,9);d+=9}else G=b,0===ra&&e(bc);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="TIMESTAMP":(d=u,u=b)}else d=u,u=b;
return u}function ea(){var u=d;if(h.substr(d,4).toLowerCase()===ud){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(ue);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="DATE":(d=u,u=b)}else d=u,u=b;return u}function na(){var u=d;if(h.substr(d,8).toLowerCase()===ye){var G=h.substr(d,8);d+=8}else G=b,0===ra&&e(Oc);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="INTERVAL":(d=u,u=b)}else d=u,u=b;return u}function pa(){var u=d;if(h.substr(d,4).toLowerCase()===oc){var G=
h.substr(d,4);d+=4}else G=b,0===ra&&e(ld);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="YEAR":(d=u,u=b)}else d=u,u=b;return u}function sa(){var u=d;if(h.substr(d,5).toLowerCase()===Vb){var G=h.substr(d,5);d+=5}else G=b,0===ra&&e(Ve);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="MONTH":(d=u,u=b)}else d=u,u=b;return u}function ua(){var u=d;if(h.substr(d,3).toLowerCase()===gd){var G=h.substr(d,3);d+=3}else G=b,0===ra&&e(We);if(G!==b){G=d;ra++;var Y=N();ra--;
Y===b?G=void 0:(d=G,G=b);G!==b?u="DAY":(d=u,u=b)}else d=u,u=b;return u}function Da(){var u=d;if(h.substr(d,4).toLowerCase()===Gc){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(kd);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="HOUR":(d=u,u=b)}else d=u,u=b;return u}function za(){var u=d;if(h.substr(d,6).toLowerCase()===Hc){var G=h.substr(d,6);d+=6}else G=b,0===ra&&e(Xe);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="MINUTE":(d=u,u=b)}else d=u,u=b;return u}function ya(){var u=
d;if(h.substr(d,6).toLowerCase()===Ic){var G=h.substr(d,6);d+=6}else G=b,0===ra&&e(Ye);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="SECOND":(d=u,u=b)}else d=u,u=b;return u}function Qa(){var u=d;if(h.substr(d,4).toLowerCase()===pc){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(Za);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="CASE":(d=u,u=b)}else d=u,u=b;return u}function Ka(){var u=d;if(h.substr(d,3).toLowerCase()===ze){var G=h.substr(d,3);d+=3}else G=b,
0===ra&&e(a);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="END":(d=u,u=b)}else d=u,u=b;return u}function Oa(){var u=d;if(h.substr(d,4).toLowerCase()===Ae){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(g);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?u="WHEN":(d=u,u=b)}else d=u,u=b;return u}function Pa(){var u=d;if(h.substr(d,4).toLowerCase()===Be){var G=h.substr(d,4);d+=4}else G=b,0===ra&&e(L);if(G!==b){G=d;ra++;var Y=N();ra--;Y===b?G=void 0:(d=G,G=b);G!==b?
u="THEN":(d=u,u=b)}else d=u,u=b;return u}function Ja(){if(44===h.charCodeAt(d)){var u=Rc;d++}else u=b,0===ra&&e(ma);return u}function Ra(){if(40===h.charCodeAt(d)){var u=Eb;d++}else u=b,0===ra&&e(qa);return u}function Wa(){if(41===h.charCodeAt(d)){var u=me;d++}else u=b,0===ra&&e(xa);return u}function ta(){var u;var G=[];for(u=ub();u!==b;)G.push(u),u=ub();return G}function ub(){if(oe.test(h.charAt(d))){var u=h.charAt(d);d++}else u=b,0===ra&&e(Ga);return u}function hb(u,G,Y,wa){u={type:"binary-expression",
operator:u,left:G,right:Y};void 0!==wa&&(u.escape=wa);return u}function lb(u,G){for(var Y=0;Y<G.length;Y++)u=hb(G[Y][1],u,G[Y][3]);return u}k=void 0!==k?k:{};var b={},fb=k.grammarSource,Ob={start:p},Jb=p,ka="!",gc="\x3d",Tb="\x3e\x3d",yb="\x3e",Sb="\x3c\x3d",Ub="\x3c\x3e",Zb="\x3c",hc="!\x3d",Db="+",Pb="-",ib="||",Fb="*",Qb="/",Ya="@",Hb="'",S="N'",ha="''",W=".",oa="null",Ca="true",Aa="false",La="in",Ta="is",nb="like",ob="escape",mb="not",wb="and",Gb="or",md="between",nd="from",od="for",pd="substring",
qd="extract",rd="trim",sd="position",td="timestamp",ud="date",vd="leading",wd="trailing",xe="both",xd="cast",yd="as",zd="integer",Ad="smallint",ic="float",Qc="real",mc="varchar",nc="to",ye="interval",oc="year",Vb="month",gd="day",Gc="hour",Hc="minute",Ic="second",pc="case",ze="end",Ae="when",Be="then",rb="else",Rc=",",Eb="(",me=")",Sc="`",Cd=/^[A-Za-z_\x80-\uFFFF]/,Dd=/^[A-Za-z0-9_]/,Ed=/^[A-Za-z0-9_.\x80-\uFFFF]/,Tc=/^[^']/,Fd=/^[0-9]/,Gd=/^[eE]/,xb=/^[+\-]/,oe=/^[ \t\n\r]/,Jc=/^[^`]/,ne=t("!",!1),
Kc=t("\x3d",!1),hd=t("\x3e\x3d",!1),pe=t("\x3e",!1),Bd=t("\x3c\x3d",!1),se=t("\x3c\x3e",!1),re=t("\x3c",!1),qe=t("!\x3d",!1),Uc=t("+",!1),Ab=t("-",!1),Rb=t("||",!1),Hd=t("*",!1),Id=t("/",!1),Vc=O([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Jd=O([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Wc=O([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Ce=t("@",!1),Kd=t("'",!1),Ld=t("N'",!1),Md=t("''",!1),Nd=O(["'"],!0,!1),De=t(".",!1),te=O([["0","9"]],!1,!1),Ee=O(["e","E"],!1,!1),Fe=
O(["+","-"],!1,!1),Ge=t("NULL",!0),He=t("TRUE",!0),Ie=t("FALSE",!0),Je=t("IN",!0),Ke=t("IS",!0),Le=t("LIKE",!0),Od=t("ESCAPE",!0),Me=t("NOT",!0),Ne=t("AND",!0),Oe=t("OR",!0),Pe=t("BETWEEN",!0),Qe=t("FROM",!0),Re=t("FOR",!0),Se=t("SUBSTRING",!0),Pd=t("EXTRACT",!0),Te=t("TRIM",!0),Ue=t("POSITION",!0),bc=t("TIMESTAMP",!0),ue=t("DATE",!0),gb=t("LEADING",!0),vb=t("TRAILING",!0),kc=t("BOTH",!0),Lc=t("CAST",!0),id=t("AS",!0),ve=t("INTEGER",!0),jd=t("SMALLINT",!0),Mc=t("FLOAT",!0),we=t("REAL",!0),Nc=t("VARCHAR",
!0),Pc=t("TO",!0),Oc=t("INTERVAL",!0),ld=t("YEAR",!0),Ve=t("MONTH",!0),We=t("DAY",!0),kd=t("HOUR",!0),Xe=t("MINUTE",!0),Ye=t("SECOND",!0),Za=t("CASE",!0),a=t("END",!0),g=t("WHEN",!0),L=t("THEN",!0),ca=t("ELSE",!0),ma=t(",",!1),qa=t("(",!1),xa=t(")",!1),Ga=O([" ","\t","\n","\r"],!1,!1),Na=t("`",!1),$a=O(["`"],!0,!1),d=0,ab=[{line:1,column:1}],Xa=0,zb=[],ra=0;if("startRule"in k){if(!(k.startRule in Ob))throw Error("Can't start parsing from rule \""+k.startRule+'".');Jb=Ob[k.startRule]}var Wb=Jb();if(Wb!==
b&&d===h.length)return Wb;Wb!==b&&d<h.length&&e({type:"end"});throw function(u,G,Y){return new U(U.buildMessage(u,G),u,G,Y)}(zb,Xa<h.length?h.charAt(Xa):null,Xa<h.length?P(Xa,Xa+1):P(Xa,Xa));}}})})(ba);var R=ba.exports;ba=function(){function fa(){}fa.parse=function(U){return R.parse(U)};return f._createClass(fa)}();l.WhereGrammar=ba;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(l){l.queryCapabilities=
{supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,
supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(l,f,la,ba,R,fa,U,K,h,k,t,O,C){function P(Q,r,n,x){const J=x.x-n.x;x=x.y-n.y;r=Math.min(1,Math.max(0,((r.x-n.x)*J+(r.y-n.y)*x)/(J*J+x*x)));Q.x=n.x+J*r;Q.y=n.y+x*r}function e(Q,r){return Q?r?4:3:r?3:2}let p=function(){function Q(n,x,J){this.items=n;this.query=x;this.geometryType=J.geometryType;this.hasM=J.hasM;this.hasZ=J.hasZ;this.fieldsIndex=J.fieldsIndex;this.objectIdField=J.objectIdField;this.spatialReference=J.spatialReference;this.featureAdapter=J.featureAdapter}var r=Q.prototype;r.createQueryResponseForCount=
function(){const n=new K(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return n.countDistinctValues(this.items);const {groupByFieldsForStatistics:x,having:J,outStatistics:z}=this.query;if(!x?.length)return 1;const A=new Map,B=new Map,y=new Set;for(const X of z){var {statisticType:D}=X;D="exceedslimit"!==D?X.onStatisticField:void 0;if(!B.has(D)){var I=[];for(const ia of x){const N=this._getAttributeValues(n,ia,A);I.push(N)}B.set(D,this._calculateUniqueValues(I,n.returnDistinctValues))}D=
B.get(D);for(const ia in D){const {data:N,items:M}=D[ia];I=N.join(",");J&&!n.validateItems(M,J)||y.add(I)}}return y.size};r.createQueryResponse=async function(){let n;n=this.query.outStatistics?this.query.outStatistics.some(x=>"exceedslimit"===x.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const x=this.query.geometry;U.isValid(this.query.outSR)&&
!U.equals(x.spatialReference,this.query.outSR)?n.queryGeometry=t.cleanFromGeometryEngine({spatialReference:this.query.outSR,...h.project(x,x.spatialReference,this.query.outSR)}):n.queryGeometry=t.cleanFromGeometryEngine({spatialReference:this.query.outSR,...x})}return n};r.createSnappingResponse=function(n,x){const J=this.featureAdapter,z=e(this.hasZ,this.hasM),{point:A,mode:B}=n,y="number"===typeof n.distance?n.distance:n.distance.x,D="number"===typeof n.distance?n.distance:n.distance.y,I={candidates:[]},
X="esriGeometryPolygon"===this.geometryType;x=this._getPointCreator(B,this.spatialReference,x);const ia=new E(null,0),N=new E(null,0),M={x:0,y:0,z:0};for(const Ea of this.items){var v=J.getGeometry(Ea);if(null==v)continue;const {coords:Fa,lengths:Ma}=v;ia.coords=Fa;N.coords=Fa;if(n.returnEdge){v=0;for(var w=0;w<Ma.length;w++){var Z=Ma[w];for(var ja=0;ja<Z;ja++,v+=z){var va=ia;va.coordsIndex=v;if(ja!==Z-1){const Ha=N;Ha.coordsIndex=v+z;const Ua=M;P(M,A,va,Ha);var Ba=(A.x-Ua.x)/y;const Sa=(A.y-Ua.y)/
D;Ba=Ba*Ba+Sa*Sa;1>=Ba&&I.candidates.push(k.makeEdgeCandidate(J.getObjectId(Ea),x(Ua),Math.sqrt(Ba),x(va),x(Ha)))}}}}if(n.returnVertex)for(v=X?Fa.length-z:Fa.length,w=0;w<v;w+=z)Z=ia,Z.coordsIndex=w,ja=(A.x-Z.x)/y,va=(A.y-Z.y)/D,ja=ja*ja+va*va,1>=ja&&I.candidates.push(k.makeVertexCandidate(J.getObjectId(Ea),x(Z),Math.sqrt(ja)))}I.candidates.sort((Ea,Fa)=>Ea.distance-Fa.distance);return I};r._getPointCreator=function(n,x,J){const z=null==J||U.equals(x,J)?B=>B:B=>h.project(B,x,J),{hasZ:A}=this;return"3d"===
n?A?({x:B,y,z:D})=>z({x:B,y,z:D}):({x:B,y})=>z({x:B,y,z:0}):({x:B,y})=>z({x:B,y})};r.createSummaryStatisticsResponse=async function(n){const {field:x,valueExpression:J,normalizationField:z,normalizationType:A,normalizationTotal:B,minValue:y,maxValue:D,scale:I}=n;n=this.fieldsIndex.isDateField(x);var X=await this._getDataValues({field:x,valueExpression:J,normalizationField:z,normalizationType:A,normalizationTotal:B,scale:I});const ia=C.isNullCountSupported({normalizationType:A,normalizationField:z,
minValue:y,maxValue:D}),N=this.fieldsIndex.get(x),M={value:.5,fieldType:N?.type};X=O.isStringField(N)?C.calculateStringStatistics({values:X,supportsNullCount:ia,percentileParams:M}):C.calculateStatistics({values:X,minValue:y,maxValue:D,useSampleStdDev:!A,supportsNullCount:ia,percentileParams:M});return C.processSummaryStatisticsResult(X,n)};r.createUniqueValuesResponse=async function(n){const {field:x,valueExpression:J,domains:z,returnAllCodedValues:A,scale:B}=n;var y=await this._getDataValues({field:x,
field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,valueExpression:J,scale:B});y=C.calculateUniqueValuesCount(y);return C.createUVResult(y,z,A,n.fieldDelimiter)};r.createClassBreaksResponse=async function(n){const {field:x,valueExpression:J,normalizationField:z,normalizationType:A,normalizationTotal:B,classificationMethod:y,standardDeviationInterval:D,minValue:I,maxValue:X,numClasses:ia,scale:N}=n;n=await this._getDataValues({field:x,valueExpression:J,normalizationField:z,normalizationType:A,
normalizationTotal:B,scale:N});n=C.calculateClassBreaks(n,{field:x,normalizationField:z,normalizationType:A,normalizationTotal:B,classificationMethod:y,standardDeviationInterval:D,minValue:I,maxValue:X,numClasses:ia});return C.resolveCBResult(n,y)};r.createHistogramResponse=async function(n){const {field:x,valueExpression:J,normalizationField:z,normalizationType:A,normalizationTotal:B,classificationMethod:y,standardDeviationInterval:D,minValue:I,maxValue:X,numBins:ia,scale:N}=n;n=await this._getDataValues({field:x,
valueExpression:J,normalizationField:z,normalizationType:A,normalizationTotal:B,scale:N});return C.calculateHistogram(n,{field:x,normalizationField:z,normalizationType:A,normalizationTotal:B,classificationMethod:y,standardDeviationInterval:D,minValue:I,maxValue:X,numBins:ia})};r._sortFeatures=function(n,x,J){if(1<n.length&&x&&x.length)for(const z of x.reverse()){x=z.split(" ");const A=x[0],B=this.fieldsIndex.get(A);x=x[1]?"desc"===x[1].toLowerCase():!1;const y=C.getAttributeComparator(B?.type,x);
n.sort((D,I)=>{D=J(D,A,B);I=J(I,A,B);return y(D,I)})}};r._createFeatureQueryResponse=function(n){const x=this.items,{geometryType:J,hasM:z,hasZ:A,objectIdField:B,spatialReference:y}=this,{outFields:D,outSR:I,quantizationParameters:X,resultRecordCount:ia,resultOffset:N,returnZ:M,returnM:v}=n,w=null!=ia?x.length>(N||0)+ia:!1,Z=D&&(D.includes("*")?[...this.fieldsIndex.fields]:D.map(ja=>this.fieldsIndex.get(ja)));return{exceededTransferLimit:w,features:this._createFeatures(n,x),fields:Z,geometryType:J,
hasM:z&&v,hasZ:A&&M,objectIdFieldName:B,spatialReference:t.cleanFromGeometryEngine(I||y),transform:X&&fa.toQuantizationTransform(X)||null}};r._createFeatures=function(n,x){const J=new K(n,this.featureAdapter,this.fieldsIndex),{hasM:z,hasZ:A}=this,{orderByFields:B,quantizationParameters:y,returnGeometry:D,returnCentroid:I,maxAllowableOffset:X,resultOffset:ia,resultRecordCount:N,returnZ:M=!1,returnM:v=!1}=n,w=A&&M,Z=z&&v;n=[];var ja=0;x=[...x];this._sortFeatures(x,B,(Ea,Fa,Ma)=>J.getFieldValue(Ea,Fa,
Ma));if(D||I){var va=fa.toQuantizationTransform(y)??void 0;if(D&&!I)for(var Ba of x)n[ja++]={attributes:J.getAttributes(Ba),geometry:t.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ba),X,va,w,Z)};else if(!D&&I)for(const Ea of x)n[ja++]={attributes:J.getAttributes(Ea),centroid:t.transformCentroid(this,this.featureAdapter.getCentroid(Ea,this),va)};else for(const Ea of x)n[ja++]={attributes:J.getAttributes(Ea),centroid:t.transformCentroid(this,this.featureAdapter.getCentroid(Ea,
this),va),geometry:t.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ea),X,va,w,Z)}}else for(va of x)(Ba=J.getAttributes(va))&&(n[ja++]={attributes:Ba});ja=ia||0;null!=N&&(n=n.slice(ja,Math.min(n.length,ja+N)));return n};r._createExceedsLimitQueryResponse=function(n){var x=!1;let J=Number.POSITIVE_INFINITY,z=Number.POSITIVE_INFINITY;x=Number.POSITIVE_INFINITY;for(const A of n.outStatistics??[])if("exceedslimit"===A.statisticType){J=null!=A.maxPointCount?A.maxPointCount:
Number.POSITIVE_INFINITY;z=null!=A.maxRecordCount?A.maxRecordCount:Number.POSITIVE_INFINITY;x=null!=A.maxVertexCount?A.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)x=this.items.length>J;else if(this.items.length>z)x=!0;else{n=e(this.hasZ,this.hasM);const A=this.featureAdapter;x=this.items.reduce((B,y)=>{y=A.getGeometry(y);return B+(null!=y&&y.coords.length||0)},0)/n>x}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",
domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(x)}}]}};r._createStatisticsQueryResponse=async function(n){var x={attributes:{}};const J=[],z=new Map,A=new Map,B=new Map,y=new Map,D=new K(n,this.featureAdapter,this.fieldsIndex);var I=n.outStatistics;const {groupByFieldsForStatistics:X,having:ia,orderByFields:N}=n;n=X&&X.length;const M=!!n,v=M?X[0]:null,w=M&&!this.fieldsIndex.get(v);for(const Ea of I??[]){const {outStatisticFieldName:Fa,statisticType:Ma}=Ea;I=Ea;var Z="exceedslimit"!==
Ma?Ea.onStatisticField:void 0;const Ha="percentile_disc"===Ma||"percentile_cont"===Ma,Ua="EnvelopeAggregate"===Ma||"CentroidAggregate"===Ma||"ConvexHullAggregate"===Ma,Sa=M&&1===n&&(Z===v||w)&&"count"===Ma;if(M){if(!B.has(Z)){var ja=[];for(const Va of X){var va=this._getAttributeValues(D,Va,z);ja.push(va)}B.set(Z,this._calculateUniqueValues(ja,Ua?!1:D.returnDistinctValues))}ja=B.get(Z);for(const Va in ja){const {count:eb,data:kb,items:jb,itemPositions:db}=ja[Va];va=kb.join(",");if(!ia||D.validateItems(jb,
ia)){const c=y.get(va)||{attributes:{}};if(Ua){c.aggregateGeometries||(c.aggregateGeometries={});const {aggregateGeometries:da,outStatisticFieldName:F}=await this._getAggregateGeometry(I,jb);c.aggregateGeometries[F]=da}else{var Ba=null;if(Sa)Ba=eb;else{const da=this._getAttributeValues(D,Z,z);Ba=db.map(F=>da[F]);Ba=Ha&&"statisticParameters"in I?this._getPercentileValue(I,Ba):this._getStatisticValue(I,Ba,null,D.returnDistinctValues)}c.attributes[Fa]=Ba}let q=0;X.forEach((da,F)=>c.attributes[this.fieldsIndex.get(da)?
da:`EXPR_${++q}`]=kb[F]);y.set(va,c)}}}else if(Ua){x.aggregateGeometries||(x.aggregateGeometries={});const {aggregateGeometries:Va,outStatisticFieldName:eb}=await this._getAggregateGeometry(I,this.items);x.aggregateGeometries[eb]=Va}else Z=this._getAttributeValues(D,Z,z),x.attributes[Fa]=Ha&&"statisticParameters"in I?this._getPercentileValue(I,Z):this._getStatisticValue(I,Z,A,D.returnDistinctValues);J.push({name:Fa,alias:Fa,type:"esriFieldTypeDouble"})}x=M?Array.from(y.values()):[x];this._sortFeatures(x,
N,(Ea,Fa)=>Ea.attributes[Fa]);return{fields:J,features:x}};r._getAggregateGeometry=async function(n,x){const {convexHull:J,union:z}=await new Promise((M,v)=>l(["../../../geometry/geometryEngineJSON"],M,v)),{statisticType:A,outStatisticFieldName:B}=n,{featureAdapter:y,spatialReference:D,geometryType:I,hasZ:X,hasM:ia}=this;x=x.map(M=>t.getGeometry(I,X,ia,y.getGeometry(M)));const N=J(D,x,!0)[0];n={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===A?(x=N?R.getPolygonExtent(N):
R.getGeometryExtent(z(D,x)),n.aggregateGeometries={...x,spatialReference:D},n.outStatisticFieldName=B||"extent"):"CentroidAggregate"===A?(x=N?ba.polygonCentroid(N):ba.extentCentroid(R.getGeometryExtent(z(D,x))),n.aggregateGeometries={x:x[0],y:x[1],spatialReference:D},n.outStatisticFieldName=B||"centroid"):"ConvexHullAggregate"===A&&(n.aggregateGeometries=N,n.outStatisticFieldName=B||"convexHull");return n};r._getStatisticValue=function(n,x,J,z){const {onStatisticField:A,statisticType:B}=n;n=null;
n=J?.has(A)?J.get(A):O.isStringField(this.fieldsIndex.get(A))?C.calculateStringStatistics({values:x,returnDistinct:z}):C.calculateStatistics({values:z?[...(new Set(x))]:x,minValue:null,maxValue:null,useSampleStdDev:!0});J&&J.set(A,n);return n["var"===B?"variance":B]};r._getPercentileValue=function(n,x){const {onStatisticField:J,statisticParameters:z,statisticType:A}=n,{value:B,orderBy:y}=z;n=this.fieldsIndex.get(J);return C.calculatePercentile(x,{value:B,orderBy:y,fieldType:n?.type,isDiscrete:"percentile_disc"===
A})};r._getAttributeValues=function(n,x,J){if(J.has(x))return J.get(x);const z=this.fieldsIndex.get(x),A=this.items.map(B=>n.getFieldValue(B,x,z));J.set(x,A);return A};r._calculateUniqueValues=function(n,x){const J={},z=this.items,A=z.length;for(let B=0;B<A;B++){const y=z[B],D=[];for(const X of n)D.push(X[B]);const I=D.join(",");null==J[I]?J[I]={count:1,data:D,items:[y],itemPositions:[B]}:(x||J[I].count++,J[I].items.push(y),J[I].itemPositions.push(B))}return J};r._getDataValues=async function(n){const x=
new K(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:J,scale:z}=n,A=J?{viewingMode:"map",scale:z,spatialReference:this.query.outSR||this.spatialReference}:null;return J?x.getExpressionValues(this.items,J,A,{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM}):x.getDataValues(this.items,{field:n.field,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,normalizationField:n.normalizationField,normalizationType:n.normalizationType,normalizationTotal:n.normalizationTotal})};
la._createClass(Q,[{key:"size",get:function(){return this.items.length}}]);return Q}(),E=function(){function Q(r,n){this.coords=r;this.coordsIndex=n}la._createClass(Q,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return Q}();f.QueryEngineResult=p;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports",
"./jsonUtils"],function(l,f){function la({scale:y,translate:D},I){return Math.round((I-D[0])/y[0])}function ba({scale:y,translate:D},I){return Math.round((D[1]-I)/y[1])}function R(y,D,I){const X=[];let ia,N,M,v;for(let w=0;w<I.length;w++){const Z=I[w];if(0<w){if(M=la(y,Z[0]),v=ba(y,Z[1]),M!==ia||v!==N)X.push(D(Z,M-ia,v-N)),ia=M,N=v}else ia=la(y,Z[0]),N=ba(y,Z[1]),X.push(D(Z,ia,N))}return 0<X.length?X:null}function fa(y,D,I,X){return R(y,I?X?B:A:X?A:z,D)}function U(y,D,I,X){const ia=[];I=I?X?B:A:X?
A:z;for(X=0;X<D.length;X++){const N=R(y,I,D[X]);N&&3<=N.length&&ia.push(N)}return ia.length?ia:null}function K(y,D,I,X){const ia=[];I=I?X?B:A:X?A:z;for(X=0;X<D.length;X++){const N=R(y,I,D[X]);N&&2<=N.length&&ia.push(N)}return ia.length?ia:null}function h({scale:y,translate:D},I){return I*y[0]+D[0]}function k({scale:y,translate:D},I){return D[1]-I*y[1]}function t(y,D,I){const X=Array(I.length);if(!I.length)return X;const [ia,N]=y.scale;let M=h(y,I[0][0]);y=k(y,I[0][1]);X[0]=D(I[0],M,y);for(let v=1;v<
I.length;v++){const w=I[v];M+=w[0]*ia;y-=w[1]*N;X[v]=D(w,M,y)}return X}function O(y,D,I){const X=Array(I.length);for(let ia=0;ia<I.length;ia++)X[ia]=t(y,D,I[ia]);return X}function C(y,D,I,X){return t(y,I?X?B:A:X?A:z,D)}function P(y,D,I,X){return O(y,I?X?B:A:X?A:z,D)}function e(y,D,I,X){return O(y,I?X?B:A:X?A:z,D)}function p(y,D,I){let [X,ia]=I[0],N=Math.min(X,D[0]),M=Math.min(ia,D[1]),v=Math.max(X,D[2]);D=Math.max(ia,D[3]);for(let w=1;w<I.length;w++){const [Z,ja]=I[w];X+=Z;ia+=ja;0>Z&&(N=Math.min(N,
X));0<Z&&(v=Math.max(v,X));0>ja?M=Math.min(M,ia):0<ja&&(D=Math.max(D,ia))}y[0]=N;y[1]=M;y[2]=v;y[3]=D;return y}function E(y,D){if(!D.length)return null;y[0]=y[1]=Number.POSITIVE_INFINITY;y[2]=y[3]=Number.NEGATIVE_INFINITY;for(let I=0;I<D.length;I++)p(y,y,D[I]);return y}function Q(y,D,I,X,ia){D.xmin=la(y,I.xmin);D.ymin=ba(y,I.ymin);D.xmax=la(y,I.xmax);D.ymax=ba(y,I.ymax);D!==I&&(X&&(D.zmin=I.zmin,D.zmax=I.zmax),ia&&(D.mmin=I.mmin,D.mmax=I.mmax));return D}function r(y,D,I,X,ia){D.points=fa(y,I.points,
X,ia)??[];return D}function n(y,D,I,X,ia){D.x=la(y,I.x);D.y=ba(y,I.y);D!==I&&(X&&(D.z=I.z),ia&&(D.m=I.m));return D}function x(y,D,I,X,ia){y=U(y,I.rings,X,ia);if(!y)return null;D.rings=y;return D}function J(y,D,I,X,ia){y=K(y,I.paths,X,ia);if(!y)return null;D.paths=y;return D}const z=(y,D,I)=>[D,I],A=(y,D,I)=>[D,I,y[2]],B=(y,D,I)=>[D,I,y[2],y[3]];l.equals=function(y,D){if(y===D||null==y&&null==D)return!0;if(null==y||null==D)return!1;let I,X,ia,N;y&&"upperLeft"===y.originPosition?(I=y.translate[0],X=
y.translate[1],y=y.scale[0]):(I=null!=y.extent?y.extent.xmin:0,X=null!=y.extent?y.extent.ymax:0,y=y.tolerance);D&&"upperLeft"===D.originPosition?(ia=D.translate[0],N=D.translate[1],D=D.scale[0]):(ia=null!=D.extent?D.extent.xmin:0,N=null!=D.extent?D.extent.ymax:0,D=D.tolerance);return I===ia&&X===N&&y===D};l.getQuantizedBoundsCoordsArray=p;l.getQuantizedBoundsCoordsArrayArray=E;l.getQuantizedBoundsPaths=function(y){return E([0,0,0,0],y)};l.getQuantizedBoundsPoints=function(y){const D=[Number.POSITIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return p(D,D,y)};l.getQuantizedBoundsRings=function(y){return E([0,0,0,0],y)};l.quantizeBounds=function(y,D,I){D[0]=la(y,I[0]);D[3]=ba(y,I[1]);D[2]=la(y,I[2]);D[1]=ba(y,I[3]);return D};l.quantizeExtent=Q;l.quantizeGeometry=function(y,D){return y&&D?f.isPoint(D)?n(y,{},D,!1,!1):f.isPolyline(D)?J(y,{},D,!1,!1):f.isPolygon(D)?x(y,{},D,!1,!1):f.isMultipoint(D)?r(y,{},D,!1,!1):f.isExtent(D)?Q(y,{},D,!1,!1):null:null};l.quantizeMultipoint=
r;l.quantizePaths=K;l.quantizePoint=n;l.quantizePoints=fa;l.quantizePolygon=x;l.quantizePolyline=J;l.quantizeRings=U;l.quantizeX=la;l.quantizeY=ba;l.toQuantizationTransform=function(y){return y?{originPosition:"upper-left"===y.originPosition?"upperLeft":"lower-left"===y.originPosition?"lowerLeft":y.originPosition,scale:y.tolerance?[y.tolerance,y.tolerance]:[1,1],translate:null!=y.extent?[y.extent.xmin,y.extent.ymax]:[0,0]}:null};l.unquantizeBounds=function(y,D,I){return I?(D[0]=h(y,I[0]),D[1]=k(y,
I[3]),D[2]=h(y,I[2]),D[3]=k(y,I[1]),D):[h(y,D[0]),k(y,D[3]),h(y,D[2]),k(y,D[1])]};l.unquantizeCoordsArray=t;l.unquantizeCoordsArrayArray=O;l.unquantizeExtent=function(y,D,I,X,ia){D.xmin=h(y,I.xmin);D.ymin=k(y,I.ymin);D.xmax=h(y,I.xmax);D.ymax=k(y,I.ymax);D!==I&&(X&&(D.zmin=I.zmin,D.zmax=I.zmax),ia&&(D.mmin=I.mmin,D.mmax=I.mmax));return D};l.unquantizeMultipoint=function(y,D,I,X,ia){null!=I&&(D.points=C(y,I.points,X,ia));return D};l.unquantizePaths=P;l.unquantizePoint=function(y,D,I,X,ia){if(null==
I)return D;D.x=h(y,I.x);D.y=k(y,I.y);D!==I&&(X&&(D.z=I.z),ia&&(D.m=I.m));return D};l.unquantizePoints=C;l.unquantizePolygon=function(y,D,I,X,ia){null!=I&&(D.rings=e(y,I.rings,X,ia));return D};l.unquantizePolyline=function(y,D,I,X,ia){null!=I&&(D.paths=P(y,I.paths,X,ia));return D};l.unquantizeRings=e;l.unquantizeX=h;l.unquantizeY=k;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"./attributeSupport","./utils","../../../statistics/utils","../../../support/arcadeOnDemand"],function(l,f,la,ba,R){return function(){function fa(K,h,k){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=K.returnDistinctValues??!1;this.fieldsIndex=k;this.featureAdapter=h;if((h=K.outFields)&&!h.includes("*")){this.outFields=h;K=0;for(const O of h){var t=f.getExpressionFromFieldName(O);t=(h=this.fieldsIndex.get(t))?null:f.getWhereClause(t,k);h=h?h.name:f.getAliasFromFieldName(O)||
`FIELD_EXP_${K++}`;this._fieldDataCache.set(O,{alias:h,clause:t})}}}var U=fa.prototype;U.countDistinctValues=function(K){if(!this.returnDistinctValues)return K.length;K.forEach(h=>this.getAttributes(h));return this._returnDistinctMap.size};U.getAttributes=function(K){K=this._processAttributesForOutFields(K);return this._processAttributesForDistinctValues(K)};U.getFieldValue=function(K,h,k){const t=k?k.name:h;let O=null;this._fieldDataCache.has(t)?O=this._fieldDataCache.get(t)?.clause:k||(O=f.getWhereClause(h,
this.fieldsIndex),this._fieldDataCache.set(t,{alias:t,clause:O}));return k?this.featureAdapter.getAttribute(K,t):O?.calculateValue(K,this.featureAdapter)};U.getDataValues=function(K,h){const k=h.normalizationType,t=h.normalizationTotal;return K.map(O=>{let C=h.field&&this.getFieldValue(O,h.field,this.fieldsIndex.get(h.field));h.field2&&(C=`${ba.processNullValue(C)}${h.fieldDelimiter}${ba.processNullValue(this.getFieldValue(O,h.field2,this.fieldsIndex.get(h.field2)))}`,h.field3&&(C=`${C}${h.fieldDelimiter}${ba.processNullValue(this.getFieldValue(O,
h.field3,this.fieldsIndex.get(h.field3)))}`));k&&Number.isFinite(C)&&(O="field"===k&&h.normalizationField?this.getFieldValue(O,h.normalizationField,this.fieldsIndex.get(h.normalizationField)):null,C=ba.getNormalizedValue(C,k,O,t));return C})};U.getExpressionValues=async function(K,h,k,t){const {arcadeUtils:O}=await R.loadArcade(),C=O.hasGeometryOperations(h);C&&await O.enableGeometryOperations();const P=O.createFunction(h),e=k&&O.getViewInfo(k),p={fields:this.fieldsIndex.fields};return K.map(E=>{E=
{attributes:this.featureAdapter.getAttributes(E),layer:p,geometry:C?{...la.getGeometry(t.geometryType,t.hasZ,t.hasM,this.featureAdapter.getGeometry(E)),spatialReference:k?.spatialReference}:null};E=O.createExecContext(E,e);return O.executeFunction(P,E)})};U.validateItem=function(K,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:f.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testFeature(K,this.featureAdapter)??!1};U.validateItems=function(K,
h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:f.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testSet(K,this.featureAdapter)??!1};U._processAttributesForOutFields=function(K){const h=this.outFields;if(!h||!h.length)return this.featureAdapter.getAttributes(K);const k={};for(const t of h){const {alias:O,clause:C}=this._fieldDataCache.get(t);k[O]=C?C.calculateValue(K,this.featureAdapter):this.featureAdapter.getAttribute(K,O)}return k};U._processAttributesForDistinctValues=
function(K){if(null==K||!this.returnDistinctValues)return K;var h=this.outFields,k=[];if(h)for(const O of h){var {alias:t}=this._fieldDataCache.get(O);k.push(K[t])}else for(t in K)k.push(K[t]);h=`${(h||["*"]).join(",")}=${k.join(",")}`;k=this._returnDistinctMap.get(h)||0;this._returnDistinctMap.set(h,++k);return 1<k?null:K};return l._createClass(fa)}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(l,
f,la){function ba(z){return null==z||"string"===typeof z&&!z?"\x3cNull\x3e":z}function R(z){const A=null!=z.minValue||null!=z.maxValue,B=!!z.sqlExpression&&z.supportsSQLExpression;return!(null!=z.normalizationField||null!=z.normalizationType)&&!A&&!B}function fa(z){const {values:A,useSampleStdDev:B,supportsNullCount:y}=z;var D=Number.POSITIVE_INFINITY;let I=Number.NEGATIVE_INFINITY,X=null,ia=null;var N=null;let M=null,v=0;const w=null==z.minValue?-Infinity:z.minValue,Z=null==z.maxValue?Infinity:z.maxValue;
for(const ja of A)Number.isFinite(ja)?ja>=w&&ja<=Z&&(X=null===X?ja:X+ja,D=Math.min(D,ja),I=Math.max(I,ja),v++):"string"===typeof ja&&v++;if(v&&null!=X){ia=X/v;N=0;for(const ja of A)Number.isFinite(ja)&&ja>=w&&ja<=Z&&(N+=(ja-ia)**2);M=B?1<v?N/(v-1):0:0<v?N/v:0;N=Math.sqrt(M)}else I=D=null;D={avg:ia,count:v,max:I,min:D,stddev:N,sum:X,variance:M};y&&(D.nullcount=A.length-v);z.percentileParams&&(D.median=U(A,z.percentileParams));return D}function U(z,A){const {fieldType:B,value:y,orderBy:D,isDiscrete:I}=
A,X=K(B,"desc"===D);z=[...z].filter(v=>null!=v).sort((v,w)=>X(v,w));if(0===z.length)return null;if(0>=y)return z[0];if(1<=y)return z[z.length-1];var ia=(z.length-1)*y,N=Math.floor(ia);A=N+1;ia%=1;N=z[N];const M=z[A];return A>=z.length||I||"string"===typeof N||"string"===typeof M?N:N*(1-ia)+M*ia}function K(z,A){const B=A?1:-1,y=t(A),D=k(A);if(!z||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...x].includes(z))return(I,X)=>"number"===typeof I&&"number"===typeof X?
y(I,X):"string"===typeof I&&"string"===typeof X?D(I,X):B;if("esriFieldTypeDate"===z)return(I,X)=>{I=(new Date(I)).getTime();X=(new Date(X)).getTime();return isNaN(I)||isNaN(X)?B:y(I,X)};if(x.has(z))return(I,X)=>y(I,X);if("esriFieldTypeString"===z)return(I,X)=>D(I,X);if("esriFieldTypeGUID"===z||"esriFieldTypeGlobalID"===z){const I=k(A);return(X,ia)=>I(O(X),O(ia))}return A?(I,X)=>1:(I,X)=>-1}function h(z,A,B){if(B){if(null==z)return null==A?0:1;if(null==A)return-1}else{if(null==z)return null==A?0:-1;
if(null==A)return 1}return null}function k(z){return z?(A,B)=>{const y=h(A,B,!0);if(null!=y)return y;A=A.toUpperCase();B=B.toUpperCase();return A>B?-1:A<B?1:0}:(A,B)=>{const y=h(A,B,!1);if(null!=y)return y;A=A.toUpperCase();B=B.toUpperCase();return A<B?-1:A>B?1:0}}function t(z){return z?(A,B)=>{const y=h(A,B,!0);return null!=y?y:B-A}:(A,B)=>{const y=h(A,B,!1);return null!=y?y:A-B}}function O(z){return z.substr(24,12)+z.substr(19,4)+z.substr(16,2)+z.substr(14,2)+z.substr(11,2)+z.substr(9,2)+z.substr(6,
2)+z.substr(4,2)+z.substr(2,2)+z.substr(0,2)}function C(z){return"coded-value"!==z?.type?[]:z.codedValues.map(A=>A.code)}function P(z,A){const B=p({field:A.field,normalizationType:A.normalizationType,normalizationField:A.normalizationField,classificationMethod:A.classificationMethod,standardDeviationInterval:A.standardDeviationInterval,breakCount:A.numClasses||5});z=e(z,A.minValue,A.maxValue);return la.createGenerateRendererClassBreaks({definition:B,values:z,normalizationTotal:A.normalizationTotal})}
function e(z,A,B){const y=null==A?-Infinity:A,D=null==B?Infinity:B;return z.filter(I=>Number.isFinite(I)&&I>=y&&I<=D)}function p(z){const {breakCount:A,field:B,normalizationField:y,normalizationType:D}=z,I=z.classificationMethod||"equal-interval";return new f({breakCount:A,classificationField:B,classificationMethod:I,normalizationField:"field"===D?y:void 0,normalizationType:D,standardDeviationInterval:"standard-deviation"===I?z.standardDeviationInterval||1:void 0})}function E(z,A){const {field:B,
classificationMethod:y,standardDeviationInterval:D,normalizationType:I,normalizationField:X,normalizationTotal:ia,minValue:N,maxValue:M}=A,v=A.numBins||10;let w=A=null,Z=null;y&&"equal-interval"!==y||I?({classBreaks:z}=P(z,{field:B,normalizationType:I,normalizationField:X,normalizationTotal:ia,classificationMethod:y,standardDeviationInterval:D,minValue:N,maxValue:M,numClasses:v}),A=z[0].minValue,w=z[z.length-1].maxValue,Z=z.map(ja=>[ja.minValue,ja.maxValue])):(null!=N&&null!=M?(A=N,w=M):(z=fa({values:z,
minValue:N,maxValue:M,useSampleStdDev:!I,supportsNullCount:R({normalizationType:I,normalizationField:X,minValue:N,maxValue:M})}),A=z.min??null,w=z.max??null),Z=r(A??0,w??0,v));return{min:A,max:w,intervals:Z}}function Q(z,A){let B=-1;for(let y=z.length-1;0<=y;y--)if(A>=z[y][0]){B=y;break}return B}function r(z,A,B){const y=(A-z)/B,D=[];let I;for(let X=1;X<=B;X++)I=z+y,I=Number(I.toFixed(16)),D.push([z,X===B?A:I]),z=I;return D}const n=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,x=new Set(["esriFieldTypeInteger",
"esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),J="min max avg stddev count sum variance nullcount median".split(" ");l.calculateClassBreaks=P;l.calculateHistogram=function(z,A){var B=E(z,A);if(null==B.min&&null==B.max)return{bins:[],minValue:B.min,maxValue:B.max,normalizationTotal:A.normalizationTotal};const y=B.intervals,D=B.min??0;B=B.max??0;const I=y.map((X,ia)=>({minValue:y[ia][0],maxValue:y[ia][1],count:0}));for(const X of z)null!=X&&X>=D&&X<=B&&(z=Q(y,X),-1<z&&I[z].count++);
return{bins:I,minValue:D,maxValue:B,normalizationTotal:A.normalizationTotal}};l.calculatePercentile=U;l.calculateStatistics=fa;l.calculateStringStatistics=function(z){const A=z.returnDistinct?[...(new Set(z.values))]:z.values;var B=A.filter(D=>null!=D).sort();const y=B.length;B={count:y,min:B[0],max:B[y-1]};z.supportsNullCount&&(B.nullcount=A.length-y);z.percentileParams&&(B.median=U(A,z.percentileParams));return B};l.calculateUniqueValuesCount=function(z){const A={};for(let B of z){if(null==B||"string"===
typeof B&&""===B.trim())B=null;null==A[B]?A[B]={count:1,data:B}:A[B].count++}return{count:A}};l.createClassBreaksDefinition=p;l.createUVResult=function(z,A,B,y){z=z.count;const D=[];if(B&&A){B=[];var I=C(A[0]);for(const X of I)if(A[1]){I=C(A[1]);for(const ia of I)if(A[2]){I=C(A[2]);for(const N of I)B.push(`${ba(X)}${y}${ba(ia)}${y}${ba(N)}`)}else B.push(`${ba(X)}${y}${ba(ia)}`)}else B.push(X);for(const X of B)z.hasOwnProperty(X)||(z[X]={data:X,count:0})}for(const X in z)A=z[X],D.push({value:A.data,
count:A.count,label:A.label});return{uniqueValueInfos:D}};l.getAttributeComparator=K;l.getEqualIntervalBins=r;l.getNormalizedValue=function(z,A,B,y){let D=null;switch(A){case "log":0!==z&&(D=Math.log(z)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(y)&&0!==y&&(D=z/y*100);break;case "field":Number.isFinite(B)&&0!==B&&(D=z/B);break;case "natural-log":0<z&&(D=Math.log(z));break;case "square-root":0<z&&(D=z**.5)}return D};l.isNullCountSupported=R;l.processNullValue=ba;l.processSummaryStatisticsResult=
function(z,A){let B;for(B in z)J.includes(B)&&(Number.isFinite(z[B])||(z[B]=null));if(!A)return z;["avg","stddev","variance"].forEach(y=>{null!=z[y]&&(z[y]=Math.ceil(z[y]??0))});return z};l.resolveCBResult=function(z,A){let B=z.classBreaks;const y=B[0]?.minValue,D=B[B.length-1]?.maxValue,I="standard-deviation"===A;B=B.map(X=>{const ia=X.label;X={minValue:X.minValue,maxValue:X.maxValue,label:ia};if(I&&ia){const N=ia.match(n)?.map(M=>+M.trim())??[];2===N.length?(X.minStdDev=N[0],X.maxStdDev=N[1],0>
N[0]&&0<N[1]&&(X.hasAvg=!0)):1===N.length&&(ia.includes("\x3c")?(X.minStdDev=null,X.maxStdDev=N[0]):ia.includes("\x3e")&&(X.minStdDev=N[0],X.maxStdDev=null))}return X});return{minValue:y,maxValue:D,classBreakInfos:B,normalizationTotal:z.normalizationTotal}};l.statisticTypes=J;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,f,la,ba,R,fa,U,K,h,k){fa=new la.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});la=new la.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});ba=function(t){function O(C){C=t.call(this,C)||this;C.type="class-breaks-definition";
C.breakCount=null;C.classificationField=null;C.classificationMethod=null;C.normalizationField=null;C.normalizationType=null;return C}l._inherits(O,t);l._createClass(O,[{key:"standardDeviationInterval",set:function(C){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",C)}},{key:"definedInterval",set:function(C){"defined-interval"===this.classificationMethod&&this._set("definedInterval",C)}}]);return O}(ba.JSONSupport);f.__decorate([h.enumeration({classBreaksDef:"class-breaks-definition"})],
ba.prototype,"type",void 0);f.__decorate([R.property({json:{write:!0}})],ba.prototype,"breakCount",void 0);f.__decorate([R.property({json:{write:!0}})],ba.prototype,"classificationField",void 0);f.__decorate([R.property({type:String,json:{read:fa.read,write:fa.write}})],ba.prototype,"classificationMethod",void 0);f.__decorate([R.property({json:{write:!0}})],ba.prototype,"normalizationField",void 0);f.__decorate([R.property({json:{read:la.read,write:la.write}})],ba.prototype,"normalizationType",void 0);
f.__decorate([R.property({value:null,json:{write:!0}})],ba.prototype,"standardDeviationInterval",null);f.__decorate([R.property({value:null,json:{write:!0}})],ba.prototype,"definedInterval",null);return ba=f.__decorate([k.subclass("esri.rest.support.ClassBreaksDefinition")],ba)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(l,f,la){l.enumeration=function(ba,R={}){ba=ba instanceof f.JSONMap?ba:new f.JSONMap(ba,R);ba={type:R?.ignoreUnknown??
!0?ba.apiValues:String,json:{type:ba.jsonValues,read:R?.readOnly?!1:{reader:ba.read},write:{writer:ba.write}}};void 0!==R?.readOnly&&(ba.readOnly=!!R.readOnly);void 0!==R?.default&&(ba.json.default=R.default);void 0!==R?.name&&(ba.json.name=R.name);void 0!==R?.nonNullable&&(ba.nonNullable=R.nonNullable);return la.property(ba)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(l,f){function la(C){var P=
C.definition;const {classificationMethod:e,normalizationType:p,definedInterval:E}=P;P=P.breakCount??1;const Q=[];var r=C.values;if(0===r.length)return[];r=r.sort((B,y)=>B-y);var n=r[0],x=r[r.length-1];if("equal-interval"===e)if(r.length>=P){r=(x-n)/P;C=n;for(var J=1;J<P;J++){var z=Number((n+J*r).toFixed(6));Q.push({minValue:C,maxValue:z,label:ba(C,z,p)});C=z}Q.push({minValue:C,maxValue:x,label:ba(C,x,p)})}else r.forEach(B=>{Q.push({minValue:B,maxValue:B,label:ba(B,B,p)})});else if("natural-breaks"===
e){r=R(r);C=fa(r.uniqueValues,C.valueFrequency||r.valueFrequency,P);for(J=1;J<P;J++)r.uniqueValues.length>J&&(z=Number(r.uniqueValues[C[J]].toFixed(6)),Q.push({minValue:n,maxValue:z,label:ba(n,z,p)}),n=z);Q.push({minValue:n,maxValue:x,label:ba(n,x,p)})}else if("quantile"===e)if(r.length>=P&&n!==x){C=Math.ceil(r.length/P);J=0;for(z=1;z<P;z++){var A=C+J-1;A>r.length&&(A=r.length-1);0>A&&(A=0);Q.push({minValue:n,maxValue:r[A],label:ba(n,r[A],p)});n=r[A];J+=C;C=Math.ceil((r.length-J)/(P-z))}Q.push({minValue:n,
maxValue:x,label:ba(n,x,p)})}else for(P=-1,x=0;x<r.length;x++)n=r[x],n!==P&&(P=n,Q.push({minValue:P,maxValue:n,label:ba(P,n,p)}),P=n);else if("standard-deviation"===e)if(C=h(r),J=k(r,C),0===J)Q.push({minValue:r[0],maxValue:r[0],label:ba(r[0],r[0],p)});else{r=K(n,x,P,C,J)*J;J=0;for(z=P;1<=z;z--)A=Number((C-(z-.5)*r).toFixed(6)),Q.push({minValue:n,maxValue:A,label:ba(n,A,p)}),n=A,J++;z=Number((C+.5*r).toFixed(6));Q.push({minValue:n,maxValue:z,label:ba(n,z,p)});n=z;J++;for(A=1;A<=P;A++)z=J===2*P?x:Number((C+
(A+.5)*r).toFixed(6)),Q.push({minValue:n,maxValue:z,label:ba(n,z,p)}),n=z,J++}else if("defined-interval"===e){if(!E)return Q;P=r[0];x=r[r.length-1];r=Math.ceil((x-P)/E);n=P;for(C=1;C<r;C++)J=Number((P+C*E).toFixed(6)),Q.push({minValue:n,maxValue:J,label:ba(n,J,p)}),n=J;Q.push({minValue:n,maxValue:x,label:ba(n,x,p)})}return Q}function ba(C,P,e){let p=null;return p=C===P?e&&"percent-of-total"===e?C+"%":C.toString():e&&"percent-of-total"===e?C+"% - "+P+"%":C+" - "+P}function R(C){const P=[],e=[];let p=
Number.MIN_VALUE,E=1,Q=-1;for(let r=0;r<C.length;r++){const n=C[r];n===p?(E++,e[Q]=E):null!==n&&(P.push(n),p=n,E=1,e.push(E),Q++)}return{uniqueValues:P,valueFrequency:e}}function fa(C,P,e){var p=C.length;const E=[];e>p&&(e=p);for(var Q=0;Q<e;Q++)E.push(Math.round(Q*p/e-1));E.push(p-1);Q=U(E,C,P,e);p=Q.mean;Q=Q.sdcm;var r=e,n=0,x=0;let J=0,z=0,A=!0;for(let y=0;2>y&&A;y++){0===y&&(A=!1);for(var B=0;B<r-1;B++)for(;E[B+1]+1!==E[B+2];)if(E[B+1]+=1,n=t(B,E,C,P),J=n.sbMean,n=n.sbSdcm,x=t(B+1,E,C,P),z=x.sbMean,
x=x.sbSdcm,n+x<Q[B]+Q[B+1])Q[B]=n,Q[B+1]=x,p[B]=J,p[B+1]=z,A=!0;else{--E[B+1];break}for(B=r-1;0<B;B--)for(;E[B]!==E[B-1]+1;)if(--E[B],n=t(B-1,E,C,P),J=n.sbMean,n=n.sbSdcm,x=t(B,E,C,P),z=x.sbMean,x=x.sbSdcm,n+x<Q[B-1]+Q[B])Q[B-1]=n,Q[B]=x,p[B-1]=J,p[B]=z,A=!0;else{E[B]+=1;break}}A&&(Q=U(E,C,P,e));return E}function U(C,P,e,p){let E=[];var Q=[],r=[];let n=0;const x=[],J=[];for(var z=0;z<p;z++){var A=t(z,C,P,e);x.push(A.sbMean);J.push(A.sbSdcm);n+=J[z]}A=n;for(z=!0;z||n<A;){z=!1;E=[];for(Q=0;Q<p;Q++)E.push(C[Q]);
for(r=0;r<p;r++)for(A=C[r]+1;A<=C[r+1];A++)if(Q=P[A],0<r&&A!==C[r+1]&&Math.abs(Q-x[r])>Math.abs(Q-x[r-1]))C[r]=A;else if(r<p-1&&C[r]!==A-1&&Math.abs(Q-x[r])>Math.abs(Q-x[r+1])){C[r+1]=A-1;break}A=n;n=0;Q=[];r=[];for(let B=0;B<p;B++){Q.push(x[B]);r.push(J[B]);const y=t(B,C,P,e);x[B]=y.sbMean;J[B]=y.sbSdcm;n+=J[B]}}if(n>A){for(P=0;P<p;P++)C[P]=E[P],x[P]=Q[P],J[P]=r[P];n=A}return{mean:x,sdcm:J}}function K(C,P,e,p,E){C=Math.max(p-C,P-p)/E/e;return 1<=C?1:.5<=C?.5:.25}function h(C){let P=0;for(let e=0;e<
C.length;e++)P+=C[e];return P/=C.length}function k(C,P){let e=0;for(let p=0;p<C.length;p++){const E=C[p];e+=(E-P)*(E-P)}e/=C.length;return Math.sqrt(e)}function t(C,P,e,p){var E=0,Q=0;for(var r=P[C]+1;r<=P[C+1];r++){const n=p[r];E+=e[r]*n;Q+=n}0>=Q&&O.warn("Exception in Natural Breaks calculation");E/=Q;Q=0;for(r=P[C]+1;r<=P[C+1];r++)Q+=p[r]*(e[r]-E)**2;return{sbMean:E,sbSdcm:Q}}const O=f.getLogger("esri.rest.support.generateRendererUtils");l.createGenerateRendererClassBreaks=function(C){const {normalizationTotal:P}=
C;return{classBreaks:la(C),normalizationTotal:P}};l.createGenerateRendererUniqueValues=function(C){C=R(C);const P=[],e=C.uniqueValues.length;for(let p=0;p<e;p++){const E=C.uniqueValues[p];P.push({value:E,count:C.valueFrequency[p],label:E.toString()})}return{uniqueValues:P}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../geometry/SpatialReference".split(" "),
function(l,f,la,ba,R,fa,U){function K(){k||(k=(async()=>{const O=await new Promise((C,P)=>l(["./arcadeUtils"],C,P));return{arcade:O.arcade,arcadeUtils:O,Dictionary:O.Dictionary,Feature:O.arcadeFeature}})());return k}const h=fa.getLogger("esri.support.arcadeOnDemand");let k;ba=(O,C,P)=>t.create(O,C,P,null,["$feature","$view"],[]);let t=function(){function O(P,e,p,E,Q,r,n){this.services=null;this.script=P;this.evaluate=E;this.fields=Array.isArray(r)?r:r.fields;this._syntaxTree=p;this._arcade=e;this._arcadeFeature=
Q;this._spatialReference=n;this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}O.create=async function(P,e,p,E,Q,r){const {arcade:n,Feature:x,Dictionary:J}=await K(),z=U.fromJSON(e);let A;try{A=n.parseScript(P,r)}catch(ia){return h.error(new R("arcade-bad-expression","Failed to parse arcade script",{script:P,error:ia})),null}Q=Q.reduce((ia,N)=>({...ia,[N]:null}),{});let B=null;null!=E&&(B=new J(E),B.immutable=
!0,Q.$config=null);r=(E=n.scriptUsesGeometryEngine(A))&&n.enableGeometrySupport();const y=n.scriptUsesFeatureSet(A)&&n.enableFeatureSetSupport(),D=(e=n.scriptIsAsync(A))&&n.enableAsyncSupport();Q={vars:Q,spatialReference:z,useAsync:!!D};await Promise.all([r,y,D]);r=new Set;await n.loadDependentModules(r,A,null,e,E);const I=new J;I.immutable=!1;I.setField("scale",0);const X=n.compileScript(A,Q);return new O(P,n,A,(ia,N)=>{"$view"in ia&&ia.$view&&(I.setField("scale","object"===typeof ia.$view&&"scale"in
ia.$view?ia.$view.scale:void 0),ia.$view=I);B&&(ia.$config=B);return X({vars:ia,spatialReference:z,services:N})},new x,p,z)};var C=O.prototype;C.repurposeFeature=function(P){P.geometry&&!P.geometry.spatialReference&&(P.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(P.geometry,P.attributes,{fields:this.fields});return this._arcadeFeature};C.referencesGeometry=function(){return this._referencesGeometry};C.referencesScale=function(){return this._referencesScale};
return la._createClass(O)}();f.ArcadeExpression=t;f.createDictionaryExpression=(O,C,P,e)=>t.create(O,C,P,e,["$feature","$view"],[]);f.createLabelExpression=(O,C,P)=>t.create(O,C,P,null,["$feature"],[]);f.createRendererExpression=ba;f.createVVExpression=ba;f.loadArcade=K;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(l){l.makeEdgeCandidate=function(f,la,ba,R,fa,U=!1){return{objectId:f,target:la,distance:ba,
type:"edge",start:R,end:fa,draped:U}};l.makeVertexCandidate=function(f,la,ba){return{objectId:f,target:la,distance:ba,type:"vertex"}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(l,f,la,ba,R,fa){function U(F,aa,m){if(F)for(const H of F)(F=(F=ba.getDeepValue(H,aa))&&"function"!==typeof F&&m.get(F))&&ba.setDeepValue(H,
F.name,aa)}function K(F,aa){if(!F||!aa)return[];Ea.clear();h(Ea,F,aa);return Array.from(Ea).sort()}function h(F,aa,m){if(m)if(aa?.fields?.length)if(m.includes("*"))for(const {name:H}of aa.fields)F.add(H);else for(const H of m)k(F,aa,H);else if(m.includes("*"))F.clear(),F.add("*");else for(const H of m)null!=H&&F.add(H)}function k(F,aa,m){"string"===typeof m&&(aa?(aa=aa.get(m))&&F.add(aa.name):F.add(m))}async function t(F,aa,m){if(m){var {arcadeUtils:H}=await fa.loadArcade();m=H.extractFieldNames(m,
aa?.fields?.map(T=>T.name));for(const T of m)k(F,aa,T)}}async function O(F,aa,m){if(m&&"1\x3d1"!==m){var {WhereClause:H}=await new Promise((T,V)=>l(["../../core/sql/WhereClause"],T,V));H=H.create(m,aa);if(!H.isStandardized)throw new la("fieldUtils:collectFilterFields","Where clause is not standardized",{where:m});h(F,aa,H.fieldNames)}}function C(F,aa){for(const m of F)if(m&&m.valueType&&m.valueType===aa)return m.name;return null}async function P(F,aa){if(aa){var m=aa.elevationInfo?.featureExpressionInfo;
if(m)return m.collectRequiredFields(F,aa.fieldsIndex)}}async function e(F,aa,m){const H=[];m?.expressionInfos&&H.push(...m.expressionInfos.map(T=>t(F,aa.fieldsIndex,T.expression)));m=m?.content;if(Array.isArray(m))for(const T of m)"expression"===T.type&&T.expressionInfo&&H.push(t(F,aa.fieldsIndex,T.expressionInfo.expression));await Promise.all(H)}async function p(F,aa,m){aa&&m&&(m.valueExpression?await t(F,aa.fieldsIndex,m.valueExpression):m.field&&k(F,aa.fieldsIndex,m.field))}function E(F){if(!F)return[];
const aa=F.geometryFieldsInfo;return aa?K(F.fieldsIndex,[aa.shapeAreaField,aa.shapeLengthField]):[]}function Q(F){const aa=new Set;n(F).forEach(m=>aa.add(m));E(F).forEach(m=>aa.add(m.toLowerCase()));if(F=F&&"infoFor3D"in F?F.infoFor3D:void 0)Object.values(F.assetMapFieldRoles).forEach(m=>aa.add(m.toLowerCase())),Object.values(F.transformFieldRoles).forEach(m=>aa.add(m.toLowerCase()));return Array.from(aa)}function r(F){if(!F)return[];F="editFieldsInfo"in F&&F.editFieldsInfo;if(!F)return[];const {creationDateField:aa,
creatorField:m,editDateField:H,editorField:T}=F;return[aa,m,H,T].filter(Boolean)}function n(F){return r(F).map(aa=>aa.toLowerCase())}async function x(F,aa){const {labelingInfo:m,fieldsIndex:H}=aa;m&&m.length&&await Promise.all(m.map(T=>J(F,H,T)))}async function J(F,aa,m){if(m){var H=m.getLabelExpression();m=m.where;"arcade"===H.type?await t(F,aa,H.expression):(H=H.expression.match(/{[^}]*}/g))&&H.forEach(T=>{k(F,aa,T.slice(1,-1))});await O(F,aa,m)}}function z(F){return"number"===typeof F&&!isNaN(F)&&
isFinite(F)}function A(F){return null===F||z(F)}function B(F){return null===F||Ua(F)}function y(F){return null!=F&&"string"===typeof F}function D(F){return null===F||y(F)}function I(){return!0}function X(F,aa){let m;switch(F.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":m=F.nullable?B:Ua;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":m=
F.nullable?A:z;break;case "string":case "esriFieldTypeString":m=F.nullable?D:y;break;default:m=I}return 1===arguments.length?m:m(aa)}function ia(F){return null!=F&&Va.has(F.type)}function N(F,aa){return null==F||F.nullable&&null===aa?null:ia(F)&&!M(F.type,Number(aa))?f.NumericRangeValidationError.OUT_OF_RANGE:X(F,aa)?F.domain?R.validateDomainValue(F.domain,aa):null:f.TypeValidationError.INVALID_TYPE}function M(F,aa){F="string"===typeof F?v(F):F;if(!F)return!1;const m=F.min,H=F.max;return F.isInteger?
Ua(aa)&&aa>=m&&aa<=H:aa>=m&&aa<=H}function v(F){switch(F){case "esriFieldTypeSmallInteger":case "small-integer":return jb;case "esriFieldTypeInteger":case "integer":return db;case "esriFieldTypeBigInteger":case "big-integer":return c;case "esriFieldTypeSingle":case "single":return q;case "esriFieldTypeDouble":case "double":return da}}function w(F,aa,m){if(!aa||!aa.attributes||!F){if(null!=m)for(var H of F??[])m.add(H);return!0}aa=aa.attributes;H=!1;for(const T of F)if(!(T in aa))if(H=!0,null!=m)m.add(T);
else break;return H}const Z=/^([0-9_])/,ja=/[^a-z0-9_\u0080-\uffff]+/gi,va="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),Ba=["field","normalizationField"],Ea=new Set,Fa=["oid","global-id","guid"],Ma=["oid","global-id"],Ha=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,
/objectid/i,/_i$/i],Ua=(()=>"isInteger"in Number?Number.isInteger:F=>"number"===typeof F&&isFinite(F)&&Math.floor(F)===F)(),Sa=["integer","small-integer","single","double"],Va=new Set([...Sa,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),eb=["date","date-only","time-only","timestamp-offset"],kb=new Set([...eb,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);f.NumericRangeValidationError=void 0;(f.NumericRangeValidationError||
(f.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";f.TypeValidationError=void 0;(f.TypeValidationError||(f.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const jb={min:-32768,max:32767,isInteger:!0},db={min:-2147483648,max:2147483647,isInteger:!0},c={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},q={min:-3.4E38,max:1.2E38,isInteger:!1},da={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};f.bigIntegerRange=
c;f.collectArcadeFieldNames=t;f.collectElevationFields=P;f.collectFeatureReductionFields=async function(F,aa,m){if(aa&&m&&"fields"in m){var H=[];H.push(e(F,aa,m.popupTemplate));m.fields&&H.push(...m.fields.map(async T=>{T.onStatisticExpression?t(F,aa.fieldsIndex,T.onStatisticExpression.expression):F.add(T.onStatisticField)}));await Promise.all(H)}};f.collectField=k;f.collectFields=h;f.collectFilterFields=async function(F,aa,m){aa&&(aa.timeInfo&&null!=m&&m.timeExtent&&h(F,aa.fieldsIndex,[aa.timeInfo.startField,
aa.timeInfo.endField]),aa.floorInfo&&h(F,aa.fieldsIndex,[aa.floorInfo.floorField]),null!=m&&null!=m.where&&await O(F,aa.fieldsIndex,m.where))};f.collectLabelingFields=x;f.collectOrderByInfos=async function(F,aa,m){aa&&m&&await Promise.all(m.map(H=>p(F,aa,H)))};f.collectPopupTemplateFields=e;f.dateTypes=eb;f.doubleRange=da;f.featureHasFields=function(F,aa){return!w(F,aa,null)};f.fixFields=K;f.fixRendererFields=function(F,aa){if(null!=F&&null!=aa)for(const m of Array.isArray(F)?F:[F])if(U(va,m,aa),
"visualVariables"in m&&m.visualVariables)for(const H of m.visualVariables)U(Ba,H,aa)};f.fixTimeInfoFields=function(F,aa){if(null!=F&&aa?.fields?.length)if("startField"in F){var m=aa.get(F.startField);aa=aa.get(F.endField);F.startField=m?.name??null;F.endField=aa?.name??null}else m=aa.get(F.startTimeField),aa=aa.get(F.endTimeField),F.startTimeField=m?.name??null,F.endTimeField=aa?.name??null};f.getDisplayFieldName=function({displayField:F,fields:aa}){if(F)return F;if(!aa||!aa.length)return null;if(!(F=
C(aa,"name-or-title")||C(aa,"unique-identifier")||C(aa,"type-or-category")))a:{for(const m of aa)if(m&&m.name&&(aa=m.name.toLowerCase(),aa.includes("name")||aa.includes("title"))){F=m.name;break a}F=null}return F};f.getEditTrackingFields=r;f.getElevationFields=async function(F){if(!F)return[];const aa=new Set;await P(aa,F);return Array.from(aa).sort()};f.getExpressionFields=async function(F,aa){const m=new Set;for(const H of aa)await t(m,F.fieldsIndex,H);return Array.from(m).sort()};f.getFeatureEditFields=
function(F){return F?K(F.fieldsIndex,r(F)):[]};f.getFeatureGeometryFields=E;f.getFieldDefaultValue=function(F){const aa=F.defaultValue;if(void 0!==aa&&X(F,aa))return aa;if(F.nullable)return null};f.getFieldRange=function(F){const aa=R.getDomainRange(F.domain);if(aa)return aa;if(ia(F))return v(F.type)};f.getLabelingFields=async function(F){if(!F)return[];const aa=new Set;await x(aa,F);return Array.from(aa).sort()};f.getLowerCaseDefaultHiddenFields=Q;f.getLowerCaseEditTrackingFields=n;f.getNumericTypeForValue=
function(F){if(!z(F))return null;if(Ua(F)){if(F>=jb.min&&F<=jb.max)return"esriFieldTypeSmallInteger";if(F>=db.min&&F<=db.max)return"esriFieldTypeInteger"}return F>=q.min&&F<=q.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};f.getTimeFields=async function(F){if(!F)return[];const aa="timeInfo"in F&&F.timeInfo;return aa?K(F.fieldsIndex,[F.trackIdField,aa.startField,aa.endField]):[]};f.integerRange=db;f.isDateField=function(F){return null!=F&&kb.has(F.type)};f.isFieldEditable=function(F,aa){return F.editable&&
!Fa.includes(F.type)&&!n(aa).includes(F.name?.toLowerCase()??"")};f.isFieldVisibleByDefault=function(F,aa){const m=F.name?.toLowerCase()??"";return!(null!=aa?.objectIdField&&m===aa.objectIdField.toLowerCase())&&!(null!=aa?.globalIdField&&m===aa.globalIdField.toLowerCase())&&!Q(aa).includes(m)&&!Ma.includes(F.type)&&!Ha.some(H=>H.test(m))};f.isNumberInRange=M;f.isNumericField=ia;f.isRasterPixelValueField=function(F){return F?["raster.itempixelvalue","raster.servicepixelvalue"].some(aa=>F.toLowerCase().startsWith(aa)):
!1};f.isStringField=function(F){return null!=F&&("string"===F.type||"esriFieldTypeString"===F.type)};f.isValidFieldValue=function(F,aa){return null===N(F,aa)};f.isValueMatchingFieldType=X;f.normalizeFieldName=function(F){return null==F?null:F.trim().replaceAll(ja,"_").replace(Z,"F$1")||null};f.numericTypes=Sa;f.packFields=function(F,aa,m=1){if(!aa||!F)return[];if(aa.includes("*"))return["*"];aa=K(F,aa);return aa.length/F.fields.length>=m?["*"]:aa};f.populateMissingFields=w;f.rendererFields=va;f.sanitizeNullFieldValue=
function(F){return null==F||"number"===typeof F&&isNaN(F)?null:F};f.singleRange=q;f.smallIntegerRange=jb;f.unpackFieldNames=function(F,aa){return null==aa||null==F?[]:aa.includes("*")?(F.fields??[]).map(m=>m.name):aa};f.validateFieldValue=N;f.validationErrorToString=function(F,aa,m){switch(F){case R.DomainValidationError.INVALID_CODED_VALUE:return`Value ${m} is not in the coded domain - field: ${aa.name}, domain: ${JSON.stringify(aa.domain)}`;case R.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${m} is out of the range of valid values - field: ${aa.name}, domain: ${JSON.stringify(aa.domain)}`;
case f.TypeValidationError.INVALID_TYPE:return`Value ${m} is not a valid value for the field type - field: ${aa.name}, type: ${aa.type}, nullable: ${aa.nullable}`;case f.NumericRangeValidationError.OUT_OF_RANGE:const {min:H,max:T}=v(aa.type);return`Value ${m} is out of range for the number type - field: ${aa.name}, type: ${aa.type}, value range is ${H} to ${T}`}};f.visualVariableFields=Ba;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(l){l.DomainValidationError=void 0;(function(f){f.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";f.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(l.DomainValidationError||(l.DomainValidationError={}));l.getDomainRange=function(f){if(f&&"range"===f.type)return{min:"range"in f?f.range[0]:f.minValue,max:"range"in f?f.range[1]:f.maxValue}};l.validateDomainValue=function(f,la){switch(f.type){case "range":const ba="range"in f?f.range[0]:f.minValue;f="range"in
f?f.range[1]:f.maxValue;if(null!=ba&&+la<ba||null!=f&&+la>f)return l.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==f.codedValues||f.codedValues.every(R=>null==R||R.code!==la))return l.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==f.codedValues||f.codedValues.every(R=>null==R||R.code!==la))return l.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(l,f,la,ba,R,fa,U,K,h,k,t,O){function C(){return new Promise((Q,r)=>l(["../../../geometry/geometryEngineJSON"],Q,r))}const P={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var e={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},p={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},E={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};f.canQueryWithRBush=
function(Q){if(fa.isExtent(Q))return!0;if(fa.isPolygon(Q)){for(const r of Q.rings)if(5!==r.length||r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=async function(Q,r,n){const {spatialRel:x,geometry:J}=Q;if(J){if(null==x||!0!==e[x])throw new la("feature-store:unsupported-query","Unsupported query spatial relationship",{query:Q});if(U.isValid(J.spatialReference)&&U.isValid(n)){if(null==
J||!0!==p[fa.getJsonType(J)])throw new la("feature-store:unsupported-query","Unsupported query geometry type",{query:Q});if(null==r||!0!==E[r])throw new la("feature-store:unsupported-query","Unsupported layer geometry type",{query:Q});if(Q.outSR)return t.checkProjectionSupport(Q.geometry&&Q.geometry.spatialReference,Q.outSR)}}};f.getSpatialQueryOperator=function(Q,r,n,x,J){if(fa.isPolygon(r)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===Q||"esriSpatialRelContains"===Q)){const z=h.convertFromPolygon(new k,
r,!1,!1);return Promise.resolve(A=>K.polygonContainsPoint(z,!1,!1,A))}if(fa.isPolygon(r)&&"esriGeometryMultipoint"===n){const z=h.convertFromPolygon(new k,r,!1,!1);if("esriSpatialRelContains"===Q)return Promise.resolve(A=>K.polygonContainsMultipoint(z,!1,!1,A,x,J))}if(fa.isExtent(r)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===Q||"esriSpatialRelContains"===Q))return Promise.resolve(z=>ba.extentContainsPoint(r,O.getGeometry(n,x,J,z)));if(fa.isExtent(r)&&"esriGeometryMultipoint"===n&&"esriSpatialRelContains"===
Q)return Promise.resolve(z=>ba.extentContainsMultipoint(r,O.getGeometry(n,x,J,z)));if(fa.isExtent(r)&&"esriSpatialRelIntersects"===Q){const z=R.getExtentIntersector(n);return Promise.resolve(A=>z(r,O.getGeometry(n,x,J,A)))}return C().then(z=>{const A=z[P[Q]].bind(null,r.spatialReference,r);return B=>A(O.getGeometry(n,x,J,B))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(l,f){l.extentIntersectsExtent=
f.extentIntersectsExtent;l.extentIntersectsMultipoint=f.extentIntersectsMultipoint;l.extentIntersectsPoint=f.extentIntersectsPoint;l.extentIntersectsPolygon=f.extentIntersectsPolygon;l.extentIntersectsPolyline=f.extentIntersectsPolyline;l.extentIntersectsRings=f.extentIntersectsRings;l.getFeatureExtentIntersector=f.getFeatureExtentIntersector;l.isSelfIntersecting=f.isSelfIntersecting;l.segmentIntersects=f.segmentIntersects;l.getExtentIntersector=function(la){return"mesh"===la?f.extentIntersectsExtent:
f.getFeatureExtentIntersector(la)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(l){function f(la,ba,R,fa,U){if(!la)return!1;ba=ba?R?4:3:R?3:2;const {coords:K,lengths:h}=la;R=!1;la=0;for(const t of h){var k=la;for(let O=la,C=la+t*ba;O<C;O+=ba){k=O+ba;k===C&&(k=la);const P=K[O],e=K[O+1],p=K[k];k=K[k+1];(e<U&&k>=U||k<U&&e>=U)&&P+(U-e)/(k-e)*(p-P)<fa&&(R=!R)}la+=t*ba}return R}l.polygonContainsCoords=f;l.polygonContainsMultipoint=
function(la,ba,R,fa,U,K){U=U?K?4:3:K?3:2;const {coords:h,lengths:k}=fa;if(!k)return!1;for(let t=0,O=0;t<k.length;t++,O+=U)if(!f(la,ba,R,h[O],h[O+1]))return!1;return!0};l.polygonContainsPoint=function(la,ba,R,fa){return f(la,ba,R,fa.coords[0],fa.coords[1])};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(l){function f(R,fa,U,K,h){if(null!=K&&null!=h)return k=>{const t=R.getAttribute(k,fa);k=R.getAttribute(k,
U);return(null==t||t<=h)&&(null==k||k>=K)};if(null!=K)return k=>{k=R.getAttribute(k,U);return null==k||k>=K};if(null!=h)return k=>{k=R.getAttribute(k,fa);return null==k||k<=h}}function la(R,fa,U,K){if(null!=U&&null!=K&&U===K)return h=>R.getAttribute(h,fa)===U;if(null!=U&&null!=K)return h=>{h=R.getAttribute(h,fa);return h>=U&&h<=K};if(null!=U)return h=>R.getAttribute(h,fa)>=U;if(null!=K)return h=>R.getAttribute(h,fa)<=K}function ba(){return()=>!1}l.getTimeExtent=async function(R,fa){if(!R)return null;
const U=fa.featureAdapter,{startTimeField:K,endTimeField:h}=R;let k=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;if(K&&h)await fa.forEach(O=>{const C=U.getAttribute(O,K);O=U.getAttribute(O,h);null==C||isNaN(C)||(k=Math.min(k,C));null==O||isNaN(O)||(t=Math.max(t,O))});else{const O=K||h;await fa.forEach(C=>{C=U.getAttribute(C,O);null==C||isNaN(C)||(k=Math.min(k,C),t=Math.max(t,C))})}return{start:k,end:t}};l.getTimeOperator=function(R,fa,U){if(!fa||!R)return null;const {startTimeField:K,endTimeField:h}=
R;if(!K&&!h)return null;const {start:k,end:t}=fa;return null===k&&null===t?null:void 0===k&&void 0===t?ba():K&&h?f(U,K,h,k,t):la(U,K||h,k,t)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(l,f){function la(R){return"oid"===R.type||"esriFieldTypeOID"===R.type}function ba(R){return"global-id"===R.type||"esriFieldTypeGlobalID"===R.type}return function(){function R(U=
[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(U){this.fields=U;var K=[];for(const h of U){U=h?.name;const k=f.normalizeFieldName(h?.name)?.toLowerCase()??"";if(U&&k){const t=U.trim().toLowerCase();this._fieldsMap.set(U,h);this._fieldsMap.set(t,h);this._normalizedFieldsMap.set(k,h);K.push(t);"date"===h.type||"esriFieldTypeDate"===h.type||"date-only"===
h.type||"esriFieldTypeDateOnly"===h.type||"timestamp-offset"===h.type||"esriFieldTypeTimestampOffset"===h.type?(this.dateFields.push(h),this._dateFieldsSet.add(h)):f.isNumericField(h)&&(this._numericFieldsSet.add(h),this.numericFields.push(h));la(h)||ba(h)||(h.editable=null==h.editable||!!h.editable,h.nullable=null==h.nullable||!!h.nullable)}}K.sort();this.uid=K.join(",")}}var fa=R.prototype;fa.destroy=function(){this._fieldsMap.clear()};fa.has=function(U){return null!=this.get(U)};fa.get=function(U){if(U){var K=
this._fieldsMap.get(U);if(K)return K;(K=this._fieldsMap.get(U.trim().toLowerCase())??this._normalizedFieldsMap.get(f.normalizeFieldName(U)?.toLowerCase()??""))&&this._fieldsMap.set(U,K);return K}};fa.isDateField=function(U){return this._dateFieldsSet.has(this.get(U))};fa.isNumericField=function(U){return this._numericFieldsSet.has(this.get(U))};fa.normalizeFieldName=function(U){if(U=this.get(U))return U.name??void 0};l._createClass(R,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=
[];for(const U of this.fields)la(U)||ba(U)||U.nullable||void 0!==f.getFieldDefaultValue(U)||this._requiredFields.push(U)}return this._requiredFields}}]);return R}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(l,f,la,ba,R,fa,U,K,h,k,t,O,C,P,e){function p(y){return E.has(y)?E.get(y):"number"===typeof y?y:1}l.Task=void 0;(function(y){y[y.YIELD=1]="YIELD"})(l.Task||(l.Task={}));l.TaskPriority=void 0;(function(y){y.RESOURCE_CONTROLLER_IMMEDIATE="immediate";y.RESOURCE_CONTROLLER="schedule";y.SLIDE="slide";y.STREAM_DATA_LOADER="stream loader";y.ELEVATION_QUERY="elevation query";y.TERRAIN_SURFACE="terrain";y.SURFACE_GEOMETRY_UPDATES="surface geometry updates";y.LOD_RENDERER="LoD renderer";y.GRAPHICS_CORE=
"Graphics3D";y.I3S_CONTROLLER="I3S";y.POINT_CLOUD_LAYER="point cloud";y.FEATURE_TILE_FETCHER="feature fetcher";y.OVERLAY="overlay";y.STAGE="stage";y.GRAPHICS_DECONFLICTOR="graphics deconflictor";y.FILTER_VISIBILITY="Graphics3D filter visibility";y.SCALE_VISIBILITY="Graphics3D scale visibility";y.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";y.POINT_OF_INTEREST_FREQUENT="POI frequent";y.POINT_OF_INTEREST_INFREQUENT="POI infrequent";y.LABELER="labeler";y.FEATURE_QUERY_ENGINE="feature query";y.FEATURE_TILE_TREE=
"feature tile tree";y.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";y.ELEVATION_ALIGNMENT="elevation alignment";y.TEXT_TEXTURE_ATLAS="text texture atlas";y.TEXTURE_UNLOAD="texture unload";y.LINE_OF_SIGHT_TOOL="line of sight tool";y.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";y.ELEVATION_PROFILE="elevation profile";y.SNAPPING="snapping";y.SHADOW_ACCUMULATOR="shadow accumulator";y.CLOUDS_GENERATOR="clouds generator";y[y.NONE=0]="NONE";y[y.TEST_PRIO=1]="TEST_PRIO"})(l.TaskPriority||
(l.TaskPriority={}));const E=new Map([[l.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[l.TaskPriority.RESOURCE_CONTROLLER,4],[l.TaskPriority.SLIDE,0],[l.TaskPriority.STREAM_DATA_LOADER,0],[l.TaskPriority.ELEVATION_QUERY,0],[l.TaskPriority.TERRAIN_SURFACE,1],[l.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[l.TaskPriority.LOD_RENDERER,2],[l.TaskPriority.GRAPHICS_CORE,2],[l.TaskPriority.I3S_CONTROLLER,2],[l.TaskPriority.POINT_CLOUD_LAYER,2],[l.TaskPriority.FEATURE_TILE_FETCHER,2],[l.TaskPriority.OVERLAY,
4],[l.TaskPriority.STAGE,4],[l.TaskPriority.GRAPHICS_DECONFLICTOR,4],[l.TaskPriority.FILTER_VISIBILITY,4],[l.TaskPriority.SCALE_VISIBILITY,4],[l.TaskPriority.FRUSTUM_VISIBILITY,4],[l.TaskPriority.CLOUDS_GENERATOR,4],[l.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[l.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[l.TaskPriority.LABELER,8],[l.TaskPriority.FEATURE_QUERY_ENGINE,8],[l.TaskPriority.FEATURE_TILE_TREE,16],[l.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[l.TaskPriority.ELEVATION_ALIGNMENT,12],[l.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[l.TaskPriority.TEXTURE_UNLOAD,12],[l.TaskPriority.LINE_OF_SIGHT_TOOL,16],[l.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[l.TaskPriority.SNAPPING,0],[l.TaskPriority.SHADOW_ACCUMULATOR,30]]),Q=O.Milliseconds(6.5),r=O.Milliseconds(1),n=O.Milliseconds(30),x=O.Milliseconds(1E3/30),J=O.Milliseconds(100);var z;(function(y){let D=function(){function ia(){this._updating=t.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new U("total"),tasks:new Map};this._frameTaskTimes=
new Map;this._budget=new X;this._state=e.RenderState.INTERACTING;this._tasks=new K;this._runQueue=new K;this._load=0;this._idleStateCallbacks=new K;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=k.watch(()=>P.SCHEDULER_LOG_SLOW_TASKS,v=>this._debug=v,k.initial);for(const v of Object.keys(l.TaskPriority))this.performanceInfo.tasks.set(l.TaskPriority[v],new U(l.TaskPriority[v]));const M=this;this._test={FRAME_SAFETY_BUDGET:Q,INTERACTING_BUDGET:x,IDLE_BUDGET:J,get availableBudget(){return M._budget.budget},
usedBudget:0,getBudget:()=>M._budget,setBudget:v=>M._budget=v,updateTask:v=>this._updateTask(v),getState:v=>this._getState(v),getRuntime:v=>this._getRuntime(v),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var N=ia.prototype;N._updatingChanged=function(){this._updating.value=this._tasks.some(M=>M.needsUpdate)};N.destroy=function(){this._tasks.toArray().forEach(M=>M.remove());this._tasks.clear();fa.removeMaybe(this._debugHandle);this._microTaskQueued=
!1;this._updatingChanged()};N.taskRunningChanged=function(M){this._updatingChanged();M&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};N.registerTask=function(M,v){const w=p(M);v=new I(this,M,v,w);this._tasks.push(v);this._updatingChanged();this.performanceInfo.tasks.has(M)||this.performanceInfo.tasks.set(M,new U(M));return v};N.registerIdleStateCallbacks=
function(M,v){const w={idleBegin:M,idleEnd:v};this._idleStateCallbacks.push(w);this.state===e.RenderState.IDLE&&this._idleUpdatesStartFired&&w.idleBegin();const Z=this;return{remove:()=>this._removeIdleStateCallbacks(w),set idleBegin(ja){Z._idleUpdatesStartFired&&(w.idleEnd(),Z._state===e.RenderState.IDLE&&ja());w.idleBegin=ja},set idleEnd(ja){w.idleEnd=ja}}};N.updateBudget=function(M){this._test.usedBudget=0;++this._frameNumber;let v=Q,w=M.frameDuration,Z=r;switch(this.state){case e.RenderState.IDLE:v=
O.Milliseconds(0);w=O.Milliseconds(Math.max(J,M.frameDuration));Z=n;break;case e.RenderState.INTERACTING:w=O.Milliseconds(Math.max(x,M.frameDuration))}w=O.Milliseconds(w-M.elapsedFrameTime-v);if(this.state!==e.RenderState.IDLE&&w<r&&!this._forceTask)return this._forceTask=!0,!1;w=O.Milliseconds(Math.max(w,Z));this._budget.reset(w,this.state);this._updateLoad();return this._schedule()};N.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case e.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(M=>M.idleBegin()));this._runIdle();break;case e.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};N.stopFrame=function(){this._budget.reset(O.Milliseconds(0),this._state);this._budget.madeProgress()};N._removeIdleStateCallbacks=function(M){this._idleUpdatesStartFired&&M.idleEnd();this._idleStateCallbacks.removeUnordered(M)};N.removeTask=function(M){this._tasks.removeUnordered(M);
this._runQueue.removeUnordered(M);this._updatingChanged()};N._updateTask=function(M){this._tasks.forAll(v=>{v.name===M&&v.setPriority(M)})};N._getState=function(M){if(this._runQueue.some(w=>w.name===M))return l.TaskState.SCHEDULED;let v=l.TaskState.IDLE;this._tasks.forAll(w=>{w.name===M&&w.needsUpdate&&(1>=w.schedulePriority?v=l.TaskState.READY:v!==l.TaskState.READY&&(v=l.TaskState.WAITING))});return v};N._getRuntime=function(M){let v=0;this._tasks.forAll(w=>{w.name===M&&(v+=w.runtime)});return v};
N._resetRuntimes=function(){this._tasks.forAll(M=>M.runtime=0)};N._getRunning=function(){const M=new Map;this._tasks.forAll(w=>{w.needsUpdate&&M.set(w.name,(M.get(w.name)||0)+1)});if(0===M.size)return null;let v="";M.forEach((w,Z)=>{v=1<w?v+` ${w}x ${Z}`:v+` ${Z}`});return v};N._runIdle=function(){this._run()};N._runInteracting=function(){this._run()};N._runAnimating=function(){this._run()};N._updateLoad=function(){const M=this._tasks.reduce((v,w)=>w.needsUpdate?++v:v,0);this._load=.9*this._load+
M*(1-.9)};N._schedule=function(){this._runQueue.filterInPlace(M=>{if(M.needsUpdate)return!0;M.schedulePriority=M.basePriority;return!1});for(this._tasks.forAll(M=>{0===M.basePriority&&M.needsUpdate&&!this._runQueue.includes(M)&&M.blockFrame!==this._frameNumber&&this._runQueue.unshift(M)});0===this._runQueue.length;){let M=!1;this._tasks.forAll(v=>{if(v.needsUpdate&&0!==v.schedulePriority&&0!==v.basePriority&&v.blockFrame!==this._frameNumber)switch(M=!0,v.schedulePriority){case 1:v.schedulePriority=
0;this._runQueue.push(v);break;default:--v.schedulePriority}});if(!M)return this._updatingChanged(),!1}this._updatingChanged();return!0};N._run=function(){const M=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var v=this._budget.now();const w=this._runQueue.pop();this._budget.resetProgress();try{w.task.runTask(this._budget)===l.Task.YIELD&&(w.blockFrame=this._frameNumber)}catch(Z){R.getLogger("esri.views.support.Scheduler").error(`Exception in task "${w.name}"`,Z)}!this._budget.hasProgressed&&
w.blockFrame!==this._frameNumber&&w.needsUpdate&&(w.blockFrame=this._frameNumber);w.schedulePriority=w.basePriority;v=this._budget.now()-v;w.runtime+=v;this._frameTaskTimes.set(w.priority,this._frameTaskTimes.get(w.priority)+v);this._debug&&v>2*this._budget.budget&&console.log("Task",w.name,"used",v,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-M);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
M)};N._startFrameTaskTimes=function(){for(const M of Object.keys(l.TaskPriority))this._frameTaskTimes.set(l.TaskPriority[M],0)};N._recordFrameTaskTimes=function(M){this._frameTaskTimes.forEach((v,w)=>this.performanceInfo.tasks.get(w).record(v));this.performanceInfo.total.record(M)};f._createClass(ia,[{key:"updating",get:function(){return this._updating.value}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(M){this._state!==M&&(this._state=
M,this.state!==e.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(v=>v.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ia}();y.Scheduler=D;let I=function(){function ia(M,v,w,Z){this._scheduler=M;this.name=v;this._basePriority=Z;this.runtime=this.blockFrame=0;this._queue=new C.PromiseQueue;this._handles=new la;this.schedulePriority=this._basePriority;this._task=t.signal(null!=w?w:this._queue);this._handles.add(k.when(()=>
this.task.running,ja=>M.taskRunningChanged(ja)))}var N=ia.prototype;N.remove=function(){this.processQueue(A);this._scheduler.removeTask(this);this.schedule=B.schedule;this.reschedule=B.reschedule;this._handles.destroy()};N.setPriority=function(M){this.name=M;M=p(M);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=M;this._basePriority=M};N.schedule=function(M,v,w){return this._queue.push(M,v,w)};N.reschedule=function(M,v,w){return this._queue.unshift(M,v,w)};N.processQueue=
function(M){this._queue.runTask(M)};f._createClass(ia,[{key:"task",get:function(){return this._task.value}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(M){this.setPriority(M)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ia}(),X=function(){function ia(){this._begin="undefined"!==typeof performance?performance.now():0;
this._budget=0;this._state=e.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var N=ia.prototype;N.run=function(M){if(this.done)return!1;!0===M()&&this.madeProgress();return!0};N.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};N.reset=function(M,v){this._begin=this.now();this._budget=M;this._state=v;this.resetProgress()};N.now=function(){return performance.now()};N.resetProgress=function(){this._done=this._progressed=!1};f._createClass(ia,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(M){this._enabled=M}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return ia}();y.Budget=X})(z||(z={}));l.TaskState=void 0;
(function(y){y.SCHEDULED="s";y.READY="r";y.WAITING="w";y.IDLE="i"})(l.TaskState||(l.TaskState={}));const A=(()=>{const y=new z.Budget;y.enabled=!1;return y})(),B=new (function(){function y(){}var D=y.prototype;D.remove=function(){};D.processQueue=function(){};D.schedule=function(I,X,ia){try{if(h.isAborted(X)){const N=h.createAbortError();return ia?Promise.resolve(ia(N)):Promise.reject(N)}return h.when(I(A))}catch(N){return Promise.reject(N)}};D.reschedule=function(I,X,ia){return this.schedule(I,X,
ia)};return f._createClass(y)}());l.ImmediateTask=B;l.getTaskPriority=p;l.newScheduler=function(){return new z.Scheduler};l.noBudget=A;l.taskPriorities=E;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(l,f,la,ba,R,fa,U){function K(C,P,e={}){return h(C,P,e,t)}function h(C,P,e={},p){let E=null;const Q=e.once?(r,
n)=>{p(r)&&(ba.removeMaybe(E),P(r,n))}:(r,n)=>{p(r)&&P(r,n)};E=fa.watchTracked(C,Q,e.sync,e.equals);e.initial&&(C=C(),Q(C,C));return E}function k(C,P,e){if(R.isAborted(e))return Promise.reject(R.createAbortError());const p=C();if(P?.(p))return Promise.resolve(p);let E=null;return new Promise((Q,r)=>{E=la.handlesGroup([R.onAbort(e,()=>{E=ba.removeMaybe(E);r(R.createAbortError())}),h(C,n=>{E=ba.removeMaybe(E);Q(n)},{sync:!1,once:!0},P??t)])})}function t(C){return!0}function O(C){return!!C}l.autorun=
U.autorun;l.initial={initial:!0};l.on=function(C,P,e,p={}){function E(){r&&n&&(n.remove(),p.onListenerRemove?.(r),n=r=null)}function Q(z){p.once&&p.once&&ba.removeMaybe(x);e(z)}let r=null,n=null,x=null;const J=K(C,(z,A)=>{E();f.isEventTarget(z)&&(r=z,n=f.on(z,P,Q),p.onListenerAdd?.(z))},{sync:p.sync,initial:!0});return x=la.makeHandle(()=>{J.remove();E()})};l.once=function(C,P){return k(C,null,P)};l.pausable=function(C,P,e={}){let p=!1;const E=K(C,(Q,r)=>{p||P(Q,r)},e);return{remove(){E.remove()},
pause(){p=!0},resume(){p=!1}}};l.sync={sync:!0};l.syncAndInitial={sync:!0,initial:!0};l.watch=K;l.when=function(C,P,e={}){return h(C,P,e,O)};l.whenOnce=function(C,P){return k(C,O,P)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(l,f,la,ba,R){let fa=function(){function U(K,h){this._observable=new R.SimpleObservable;
this._value=K;this._equalityFunction=h}U.prototype.mutate=function(K){K(this._value);this._observable.notify()};f._createClass(U,[{key:"value",get:function(){ba.trackAccess(this._observable);return this._value},set:function(K){this._equalityFunction(K,this._value)||(this._value=K,this._observable.notify())}}]);return U}();l.signal=function(U,K=la.equalsShallow){return new fa(U,K)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/signal"],function(l,f,la,ba){let R=function(){function U(){this._tasks=[];this._running=ba.signal(!1)}var K=U.prototype;K.destroy=function(){this.cancelAll()};K.runTask=function(h){for(;!h.done&&this._process(h);)h.madeProgress()};K.push=function(h,k,t){this._running.value=!0;return new Promise((O,C)=>this._tasks.push(new fa(O,C,h,k,t)))};K.unshift=function(h,k,t){this._running.value=!0;return new Promise((O,C)=>this._tasks.unshift(new fa(O,
C,h,k,t)))};K._process=function(h){if(0===this._tasks.length)return!1;const k=this._tasks.shift();try{const t=la.isAborted(k.signal);if(t&&!k.abortCallback)k.reject(la.createAbortError());else{const O=t?k.abortCallback?.(la.createAbortError()):k.callback(h);la.isPromiseLike(O)?O.then(k.resolve,k.reject):k.resolve(O)}}catch(t){k.reject(t)}this._running.value=0<this._tasks.length;return!0};K.cancelAll=function(){const h=la.createAbortError();for(const k of this._tasks)if(k.abortCallback){const t=k.abortCallback(h);
k.resolve(t)}else k.reject(h);this._tasks.length=0;this._running.value=!1};f._createClass(U,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.value}}]);return U}(),fa=f._createClass(function(U,K,h,k,t){this.resolve=U;this.reject=K;this.callback=h;this.signal=k;this.abortCallback=t});l.PromiseQueue=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,f,la,ba,R,fa,U,K){la=function(h){function k(){var t=h.apply(this,arguments)||this;t.SCHEDULER_LOG_SLOW_TASKS=!1;t.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return t}l._inherits(k,h);return l._createClass(k)}(la);f.__decorate([ba.property()],la.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);f.__decorate([ba.property()],la.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);la=f.__decorate([K.subclass("esri.views.support.DebugFlags")],la);return new la})},
"esri/views/support/RenderState":function(){define(["exports"],function(l){l.RenderState=void 0;var f=l.RenderState||(l.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]="IDLE";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(l,f,la,ba,R){function*fa(r){switch(r.type){case "Feature":yield r;
break;case "FeatureCollection":for(const n of r.features)n&&(yield n)}}function*U(r){if(r)switch(r.type){case "Point":yield r.coordinates;break;case "LineString":case "MultiPoint":yield*r.coordinates;break;case "MultiLineString":case "Polygon":for(const n of r.coordinates)yield*n;break;case "MultiPolygon":for(const n of r.coordinates)for(const x of n)yield*x}}function*K(r,n={}){const {geometryType:x,objectIdField:J}=n;for(const z of r){const {geometry:A,properties:B,id:y}=z;if(A&&Q[A.type]!==x)continue;
r=B||{};let D=void 0;J&&(D=r[J],null==y||D||(r[J]=D=y));yield new la.OptimizedFeature(A?O(new ba,A,n):null,r,null,D??void 0)}}function h(r){for(const n of r)if(2<n.length)return!0;return!1}function k(r){let n=0;for(let x=0;x<r.length;x++){const J=r[x],z=r[(x+1)%r.length];n+=J[0]*z[1]-z[0]*J[1]}return 0>=n}function t(r){const n=r[0],x=r[r.length-1];n[0]===x[0]&&n[1]===x[1]&&n[2]===x[2]||r.push(n);return r}function O(r,n,x){switch(n.type){case "LineString":return e(r,n.coordinates,x),r;case "MultiLineString":for(const z of n.coordinates)e(r,
z,x);return r;case "MultiPoint":return e(r,n.coordinates,x),r;case "MultiPolygon":for(var J of n.coordinates)for(C(r,J[0],x),n=1;n<J.length;n++)P(r,J[n],x);return r;case "Point":return E(r,n.coordinates,x),r;case "Polygon":J=n.coordinates;C(r,J[0],x);for(n=1;n<J.length;n++)P(r,J[n],x);return r}}function C(r,n,x){n=t(n);k(n)?e(r,n,x):p(r,n,x)}function P(r,n,x){n=t(n);k(n)?p(r,n,x):e(r,n,x)}function e(r,n,x){for(const J of n)E(r,J,x);r.lengths.push(n.length)}function p(r,n,x){for(let J=n.length-1;0<=
J;J--)E(r,n[J],x);r.lengths.push(n.length)}function E(r,n,x){const [J,z,A]=n;r.coords.push(J,z);x.hasZ&&r.coords.push(A||0)}const Q={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};l.createOptimizedFeatures=function(r,n){return Array.from(K(fa(r),n))};l.getGeometryType=function(r){return Q[r]};l.inferLayerProperties=function(r,n={}){const x=[];var J=
new Set;const z=new Set;var A=!1;let B=null,y=!1,D=void 0;({geometryType:n=null}=n);var I=!1;for(const X of fa(r)){const {geometry:ia,properties:N,id:M}=X;if(ia&&(n||(n=Q[ia.type]),Q[ia.type]!==n))continue;A||(A=U(ia),A=h(A));!y&&(y=null!=M)&&(D=typeof M,N&&(B=Object.keys(N).filter(v=>N[v]===M)));N&&B&&y&&null!=M&&(1<B.length?B=B.filter(v=>N[v]===M):1===B.length&&(B=N[B[0]]===M?B:[]));if(!I&&N){r=!0;for(const v in N){if(J.has(v))continue;I=N[v];if(null==I){r=!1;z.add(v);continue}a:switch(typeof I){case "string":I=
"esriFieldTypeString";break a;case "number":I="esriFieldTypeDouble";break a;default:I="unknown"}if("unknown"===I){z.add(v);continue}z.delete(v);J.add(v);const w=R.normalizeFieldName(v);w&&x.push({name:w,alias:v,type:I})}I=r}}if(J=R.normalizeFieldName(1===B?.length&&B[0]||null)??void 0)for(const X of x)if(X.name===J&&R.isNumericField(X)){X.type="esriFieldTypeOID";break}return{fields:x,geometryType:n,hasZ:A,objectIdFieldName:J,objectIdFieldType:D,unknownFields:Array.from(z)}};l.validateGeoJSON=function(r){if(!r)throw new f("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==r.type&&"FeatureCollection"!==r.type)throw new f("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:r});({crs:r}=r);if(r){var n="string"===typeof r?r:"name"===r.type?r.properties.name:"EPSG"===r.type?r.properties.code:null,x=RegExp(".*(CRS84H?|4326)$","i");if(!n||!x.test(n))throw new f("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:r});}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(l,f,la,ba,R){const fa=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let U=1;l.createCapabilities=function(K,h){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:K},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,
supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:h,supportsDelete:h,supportsEditing:h,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:h,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:ba.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},
editing:{supportsGeometryUpdate:h,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}};l.createDefaultAttributesFunction=function(K,h){if(f("esri-csp-restrictions"))return()=>({[h]:null,...K});try{let k=`this.${h} = null;`;for(const O in K){const C=fa.test(O)?
`.${O}`:`["${O}"]`;k+=`this${C} = ${JSON.stringify(K[O])};`}const t=(new Function(`\n      return class AttributesClass$${U++} {\n        constructor() {\n          ${k};\n        }\n      }\n    `))();return()=>new t}catch(k){return()=>({[h]:null,...K})}};l.createDefaultTemplate=function(K={}){return[{name:"New Feature",description:"",prototype:{attributes:la.clone(K)}}]};l.createDrawingInfo=function(K){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===K||"esriGeometryMultipoint"===K?R.defaultPointSymbolJSON:
"esriGeometryPolyline"===K?R.defaultPolylineSymbolJSON:R.defaultPolygonSymbolJSON}}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(l){const f=[252,146,31,255],la={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ba={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f};l.defaultColor=f;l.defaultOutlineColor=[153,153,153,255];
l.defaultPointSymbolJSON=la;l.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};l.defaultPolylineSymbolJSON=ba;l.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};l.errorPointSymbolJSON={type:"esriSMS",
style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};l.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};l.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils",
"../../../support/fieldUtils"],function(l,f,la,ba,R){function fa(C){return new h(C)}async function U(){null==O&&(O=await new Promise((C,P)=>l(["../../../../geometry/geometryEngineJSON"],C,P)));return O}let K=la._createClass(function(){this.description=this.code=null}),h=la._createClass(function(C){this.error=new K;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=C}),k=la._createClass(function(C){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=
C});const t=new Set;let O;f.createFeatureEditErrorResult=fa;f.createFeatureEditSuccessResult=function(C){return new k(C)};f.loadGeometryEngineForSimplify=async function(C,P){!ba.isValid(C)||"esriGeometryPolygon"!==P&&"esriGeometryPolyline"!==P||await U()};f.mixAttributes=function(C,P,e,p=!1,E){t.clear();for(const x in e){const J=C.get(x);if(!J)continue;var Q=e[x],r=J,n=Q;let z=n;"string"===typeof n&&R.isNumericField(r)?z=parseFloat(n):null!=n&&R.isStringField(r)&&"string"!==typeof n&&(z=String(n));
r=R.sanitizeNullFieldValue(z);r!==Q&&E&&E.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:J,originalValue:Q,sanitizedValue:r}});t.add(J.name);if(J&&(p||J.editable)){if(Q=R.validateFieldValue(J,r))return fa(R.validationErrorToString(Q,J,r));P[J.name]=r}}for(const x of C?.requiredFields??[])if(!t.has(x.name))return fa(`missing required field "${x.name}"`);return null};f.simplify=function(C,P){if(!C||!ba.isValid(P))return C;if("rings"in C||
"paths"in C){if(null==O)throw new TypeError("geometry engine not loaded");return O.simplify(P,C)}return C};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(l,f){f=new f.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",
esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});l.kebabDict=f;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./geojson ../support/clientSideDefaults ../support/sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(l,
f,la,ba,R,fa,U,K,h,k,t,O,C,P,e,p,E,Q){const r={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function n(){this._queryEngine=null;this._snapshotFeatures=async J=>{J=await this._fetch(J);return this._createFeatures(J)}}var x=n.prototype;x.destroy=function(){this._queryEngine?.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null};x.load=async function(J,z={}){this._loadOptions={url:J.url,customParameters:J.customParameters};
var A=[];await this._checkProjection(J.spatialReference);var B=null;J.url&&(B=await this._fetch(z?.signal));var y=C.inferLayerProperties(B,{geometryType:J.geometryType});z=J.fields||y.fields||[];const D=null!=J.hasZ?J.hasZ:y.hasZ,I=y.geometryType;let X=J.objectIdField||y.objectIdFieldName||"__OBJECTID";const ia=J.spatialReference||K.WGS84;J=J.timeInfo;z===y.fields&&0<y.unknownFields.length&&A.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",
details:{unknownFields:y.unknownFields}});let N=(new p(z)).get(X);N?("esriFieldTypeString"!==N.type&&(N.type="esriFieldTypeOID"),N.editable=!1,N.nullable=!1,X=N.name):(N={alias:X,name:X,type:"string"===y.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},z.unshift(N));y={};for(var M of z){null==M.name&&(M.name=M.alias);null==M.alias&&(M.alias=M.name);if(!M.name)throw new ba("geojson-layer:invalid-field-name","field name is missing",{field:M});if(!E.kebabDict.jsonValues.includes(M.type))throw new ba("geojson-layer:invalid-field-type",
`invalid type for field "${M.name}"`,{field:M});if(M.name!==N.name){const Z=Q.getFieldDefaultValue(M);void 0!==Z&&(y[M.name]=Z)}}this._fieldsIndex=new p(z);M=this._fieldsIndex.requiredFields.indexOf(N);-1<M&&this._fieldsIndex.requiredFields.splice(M,1);J&&(J.startTimeField&&((M=this._fieldsIndex.get(J.startTimeField))?(J.startTimeField=M.name,M.type="esriFieldTypeDate"):J.startTimeField=null),J.endTimeField&&((M=this._fieldsIndex.get(J.endTimeField))?(J.endTimeField=M.name,M.type="esriFieldTypeDate"):
J.endTimeField=null),J.trackIdField&&((M=this._fieldsIndex.get(J.trackIdField))?J.trackIdField=M.name:(J.trackIdField=null,A.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:J}}))),J.startTimeField||J.endTimeField||(A.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:J}}),J=null));M=I?P.createDrawingInfo(I):void 0;A={warnings:A,featureErrors:[],layerDefinition:{...r,drawingInfo:M??
void 0,templates:P.createDefaultTemplate(y),extent:void 0,geometryType:I,objectIdField:X,fields:z,hasZ:!!D,timeInfo:J}};this._queryEngine=new O.QueryEngine({fields:z,geometryType:I,hasM:!1,hasZ:D,objectIdField:X,spatialReference:ia,timeInfo:J,featureStore:new k({geometryType:I,hasM:!1,hasZ:D}),cacheSpatialQueries:!0});this._createDefaultAttributes=P.createDefaultAttributesFunction(y,X);B=await this._createFeatures(B);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,B);B=this._normalizeFeatures(B,
A.warnings,A.featureErrors);this._queryEngine.featureStore.addMany(B);const {fullExtent:v,timeExtent:w}=await this._queryEngine.fetchRecomputedExtents();A.layerDefinition.extent=v;if(w){const {start:Z,end:ja}=w;A.layerDefinition.timeInfo.timeExtent=[Z,ja]}return A};x.applyEdits=async function(J){const {spatialReference:z,geometryType:A}=this._queryEngine;await Promise.all([e.loadGeometryEngineForSimplify(z,A),t.checkProjectionSupport(J.adds,z),t.checkProjectionSupport(J.updates,z)]);await this._waitSnapshotComplete();
return this._applyEdits(J)};x.queryFeatures=async function(J={},z={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(J,z.signal)};x.queryFeatureCount=async function(J={},z={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(J,z.signal)};x.queryObjectIds=async function(J={},z={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(J,z.signal)};x.queryExtent=async function(J={},z={}){await this._waitSnapshotComplete();
return this._queryEngine.executeQueryForExtent(J,z.signal)};x.querySnapping=async function(J,z={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(J,z.signal)};x.refresh=async function(J){this._loadOptions.customParameters=J;this._snapshotTask?.abort();this._snapshotTask=la.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(B=>{this._queryEngine.featureStore.clear();this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,B);(B=this._normalizeFeatures(B))&&
this._queryEngine.featureStore.addMany(B)},B=>{this._queryEngine.featureStore.clear();fa.isAbortError(B)||R.getLogger("esri.layers.GeoJSONLayer").error(new ba("geojson-layer:refresh","An error occurred during refresh",{error:B}))});await this._waitSnapshotComplete();const {fullExtent:z,timeExtent:A}=await this._queryEngine.fetchRecomputedExtents();return{extent:z,timeExtent:A}};x._createFeatures=async function(J){if(null==J)return[];const {geometryType:z,hasZ:A,objectIdField:B}=this._queryEngine;
J=C.createOptimizedFeatures(J,{geometryType:z,hasZ:A,objectIdField:B});if(!K.equals(this._queryEngine.spatialReference,K.WGS84))for(const y of J)null!=y.geometry&&(y.geometry=h.convertFromGeometry(t.project(h.convertToGeometry(y.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),K.WGS84,this._queryEngine.spatialReference)));return J};x._waitSnapshotComplete=async function(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}};
x._fetch=async function(J){const {url:z,customParameters:A}=this._loadOptions;J=(await f(z,{responseType:"json",query:{...A},signal:J})).data;await C.validateGeoJSON(J);return J};x._normalizeFeatures=function(J,z,A){const {objectIdField:B}=this._queryEngine,y=[];for(const D of J){J=this._createDefaultAttributes();const I=e.mixAttributes(this._fieldsIndex,J,D.attributes,!0,z);I?A?.push(I):(this._assignObjectId(J,D.attributes,!0),D.attributes=J,D.objectId=J[B],y.push(D))}return y};x._applyEdits=async function(J){const {adds:z,
updates:A,deletes:B}=J;J={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};z&&z.length&&this._applyAddEdits(J,z);A&&A.length&&this._applyUpdateEdits(J,A);if(B&&B.length){for(const I of B)J.deleteResults.push(e.createFeatureEditSuccessResult(I));this._queryEngine.featureStore.removeManyById(B)}const {fullExtent:y,timeExtent:D}=await this._queryEngine.fetchRecomputedExtents();return{extent:y,timeExtent:D,featureEditResults:J}};x._applyAddEdits=function(J,z){const {addResults:A}=J,{geometryType:B,
hasM:y,hasZ:D,objectIdField:I,spatialReference:X,featureStore:ia}=this._queryEngine,N=[];for(const M of z){if(M.geometry&&B!==U.getJsonType(M.geometry)){A.push(e.createFeatureEditErrorResult("Incorrect geometry type."));continue}z=this._createDefaultAttributes();const v=e.mixAttributes(this._fieldsIndex,z,M.attributes);v?A.push(v):(this._assignObjectId(z,M.attributes),M.attributes=z,null!=M.uid&&(J.uidToObjectId[M.uid]=M.attributes[I]),null!=M.geometry&&(z=M.geometry.spatialReference??X,M.geometry=
t.project(e.simplify(M.geometry,z),z,X)),N.push(M),A.push(e.createFeatureEditSuccessResult(M.attributes[I])))}ia.addMany(h.convertFromFeatures([],N,B,D,y,I))};x._applyUpdateEdits=function({updateResults:J},z){const {geometryType:A,hasM:B,hasZ:y,objectIdField:D,spatialReference:I,featureStore:X}=this._queryEngine;for(const N of z){const {attributes:M,geometry:v}=N;z=M&&M[D];if(null==z){J.push(e.createFeatureEditErrorResult(`Identifier field ${D} missing`));continue}if(!X.has(z)){J.push(e.createFeatureEditErrorResult(`Feature with object id ${z} missing`));
continue}const w=h.convertToFeature(X.getFeature(z),A,y,B);if(null!=v){if(A!==U.getJsonType(v)){J.push(e.createFeatureEditErrorResult("Incorrect geometry type."));continue}var ia=v.spatialReference??I;w.geometry=t.project(e.simplify(v,ia),ia,I)}if(M&&(ia=e.mixAttributes(this._fieldsIndex,w.attributes,M))){J.push(ia);continue}X.add(h.convertFromFeature(w,A,y,B,D));J.push(e.createFeatureEditSuccessResult(z))}};x._createObjectIdGenerator=function(J,z){const A=J.fieldsIndex.get(J.objectIdField);if("esriFieldTypeString"===
A.type)return()=>A.name+"-"+Date.now().toString(16);let B=Number.NEGATIVE_INFINITY;for(const y of z)y.objectId&&(B=Math.max(B,y.objectId));B=Math.max(0,B)+1;return()=>B++};x._assignObjectId=function(J,z,A=!1){const B=this._queryEngine.objectIdField;J[B]=A&&B in z?z[B]:this._objectIdGenerator()};x._checkProjection=async function(J){try{await t.checkProjectionSupport(K.WGS84,J)}catch{throw new ba("geojson-layer","Projection not supported");}};return l._createClass(n)}()});