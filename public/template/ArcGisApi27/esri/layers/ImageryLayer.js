// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/deprecate ../../core/Error ../../core/lang ../../core/Logger ../../core/reactiveUtils ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageBitmapUtils ../support/imageryRendererUtils ../support/MosaicRule ../support/MultidimensionalSubset ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterDatasets/multidimensionalUtils ../support/rasterFormats/RasterCodec ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../core/has ../support/source/DataLayerSource ../../rest/query/executeQueryJSON ../../config ../../kernel ../../core/unitUtils ../../geometry/support/spatialReferenceUtils ../graphics/featureConversionUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/normalizeUtils ../../core/pbf ../../rest/support/FeatureSet ../../rest/support/Query ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../../rest/query/executeForCount ../../rest/query/executeForIds ../../rest/support/RelationshipQuery ../../rest/support/TopFeaturesQuery ../../rest/imageService/fetchRasterInfo ../../rest/imageService/getCatalogItemRasterInfo ../../rest/support/ImageAngleParameters ../../rest/support/ImageAreaParameters ../../rest/support/ImageDistanceParameters ../../rest/support/ImageHeightParameters ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImagePixelLocationParameters ../../rest/support/ImagePointParameters ../../rest/support/ImageSampleParameters ../../views/2d/engine/flow/dataUtils ../../geometry/SpatialReference".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n,q,e,v,w,m,a,c,b,d,g,h,k,x,p,y,H,G,K,A,I,B,z,M,S,W,O,N,T,V,X,ba,Y,ca,Z,ea,fa,ha,la,ia,qa,na,ua,va,za,ya,Ea,sa,Ga,Ia,Sa,Ta,Ua,Va,Wa,Ma,Pa,Xa,Ya,Za,$a,Na){function ab(ma){return ma?(ma=JSON.stringify(ma).match(/"rasterFunction":"(.*?")/gi)?.map(Ca=>Ca.replace('"rasterFunction":"',"").replace('"',"")))?ma.join("/"):null:null}const bb=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),cb=n.ensureRange(q.ensureNumber,{min:0,max:255});J.ArcGISImageService=
ma=>{function Ca(Ha){return Ha?.path??""}ma=function(Ha){function Ja(){var C=Ha.apply(this,arguments)||this;C._functionRasterInfos={};C._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};C._cachedRendererJson=null;C._serviceSupportsMosaicRule=null;C._rasterAttributeTableFieldPrefix="Raster.";C.adjustAspectRatio=null;C.bandIds=void 0;C.capabilities=null;C.compressionQuality=void 0;C.compressionTolerance=.01;C.copyright=null;C.defaultMosaicRule=null;C.definitionExpression=null;C.exportImageServiceParameters=
null;C.rasterInfo=null;C.fields=null;C.fullExtent=null;C.hasMultidimensions=!1;C.imageMaxHeight=4100;C.imageMaxWidth=4100;C.interpolation=void 0;C.minScale=0;C.maxScale=0;C.multidimensionalInfo=null;C.multidimensionalSubset=null;C.noData=null;C.noDataInterpretation=void 0;C.objectIdField=null;C.geometryType="polygon";C.typeIdField=null;C.types=[];C.pixelFilter=null;C.raster=void 0;C.sourceType=null;C.viewId=void 0;C.symbolizer=null;C.rasterFunctionInfos=null;C.serviceDataType=null;C.spatialReference=
null;C.pixelType=null;C.serviceRasterInfo=null;C.sourceJSON=null;C.url=null;C.version=void 0;return C}u._inherits(Ja,Ha);var ka=Ja.prototype;ka.initialize=function(){this._set("exportImageServiceParameters",new c.ExportImageServiceParameters({layer:this}))};ka.readServiceSupportsMosaicRule=function(C,U){return this._isMosaicRuleSupported(U)};ka.readBandIds=function(C,U){if(Array.isArray(C)&&0<C.length&&C.every(aa=>"number"===typeof aa))return C};ka.readCapabilities=function(C,U){return this._readCapabilities(U)};
ka.writeCompressionQuality=function(C,U,aa){null!=C&&"lerc"!==this.format&&(U[aa]=C)};ka.writeCompressionTolerance=function(C,U,aa){"lerc"===this.format&&null!=C&&(U[aa]=C)};ka.readDefaultMosaicRule=function(C,U){return this._serviceSupportsMosaicRule?k.fromJSON(U):null};ka.readFormat=function(C,U){return"esriImageServiceDataTypeVector-UV"===U.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===U.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};ka.readMinScale=function(C,U){return null!=
U.minLOD&&null!=U.maxLOD?C:0};ka.readMaxScale=function(C,U){return null!=U.minLOD&&null!=U.maxLOD?C:0};ka.readMosaicRule=function(C,U){return(C=C||U.mosaicRule)?k.fromJSON(C):this._isMosaicRuleSupported(U)?k.fromJSON(U):null};ka.writeMosaicRule=function(C,U,aa){C=this.mosaicRule;const da=this.definitionExpression;C?da&&da!==C.where&&(C=C.clone(),C.where=da):da&&(C=new k({where:da}));this._isValidCustomizedMosaicRule(C)&&(U[aa]=C.toJSON())};ka.writeNoData=function(C,U,aa){null!=C&&"number"===typeof C&&
(U[aa]=cb(C))};ka.readObjectIdField=function(C,U){C||(C=(C=U.fields.filter(aa=>"esriFieldTypeOID"===aa.type||"oid"===aa.type))&&C[0]&&C[0].name);return C};ka.readSourceType=function(C,U){return this._isMosaicDataset(U)?"mosaic-dataset":"raster-dataset"};ka.readRenderer=function(C,U,aa){C=U?.layerDefinition?.drawingInfo?.renderer;aa=R.read(C,aa);if(null==aa)return null;"vector-field"===aa.type&&U.symbolTileSize&&!C.symbolTileSize&&(aa.symbolTileSize=U.symbolTileSize);h.isSupportedRendererType(aa)||
F.getLogger(this).warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");return aa};ka.writeRenderer=function(C,U,aa){U.layerDefinition=U.layerDefinition||{};U.layerDefinition.drawingInfo=U.layerDefinition.drawingInfo||{};U.layerDefinition.drawingInfo.renderer=C.toJSON();"vector-field"===C.type&&(U.symbolTileSize=C.symbolTileSize)};ka.readRasterFunction=function(C,U){C=U.rasterFunctionInfos;return U.renderingRule||C&&C.length&&"None"!==C[0].name?this._isRFTJson(U.renderingRule)?
H.fromJSON({rasterFunctionDefinition:U.renderingRule}):H.fromJSON(U.renderingRule||{rasterFunctionInfos:U.rasterFunctionInfos}):null};ka.readSpatialReference=function(C,U){return(C=C||U.extent.spatialReference)?Na.fromJSON(C):null};ka.readPixelType=function(C){return y.pixelTypeKebabDict.fromJSON(C)||C};ka.writePixelType=function(C,U,aa){if(null==this.serviceRasterInfo||this.pixelType!==this.serviceRasterInfo.pixelType)U[aa]=y.pixelTypeKebabDict.toJSON(C)};ka.readVersion=function(C,U){(C=U.currentVersion)||
(C=U.hasOwnProperty("fields")||U.hasOwnProperty("timeInfo")?10:9.3);return C};ka.applyFilter=function(C){let U=C;this.pixelFilter&&(U=this._clonePixelData(C),this.pixelFilter(U));return U};ka.applyRenderer=async function(C,U){var aa=C;const {renderer:da,symbolizer:oa,pixelFilter:ja,bandIds:ta}=this;if(!this._isPicture()&&da&&oa&&!ja){aa=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(da.toJSON());const pa=this._rasterJobHandler.instance;pa?(aa&&(oa.bind(),await pa.updateSymbolizer(oa,U),
this._cachedRendererJson=da.toJSON()),U=await pa.symbolize({bandIds:ta,...C},U),aa={extent:C.extent,pixelBlock:U}):aa={extent:C.extent,pixelBlock:oa.symbolize({bandIds:ta,...C})}}return aa};ka.destroy=function(){this._shutdownJobHandler()};ka.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};ka.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};ka.computeAngles=async function(C,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsComputeAngles)throw new Q("imagery-layer:compute-angles",
"this operation is not supported on the input image service");C=q.ensureClass(Ta,C).clone();return S.computeAngles(this.url,C,this._getRequestOptions(U))};ka.computePixelSpaceLocations=async function(C,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsComputePixelLocation)throw new Q("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");C=q.ensureClass(Xa,C).clone();return S.computePixelSpaceLocations(this.url,C,this._getRequestOptions(U))};
ka.computeHistograms=async function(C,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsComputeHistograms)throw new Q("imagery-layer:compute-histograms","this operation is not supported on the input image service");C=q.ensureClass(Ma,C).clone();this._applyMosaicAndRenderingRules(C);return S.computeHistograms(this.url,C,this._getRequestOptions(U))};ka.computeStatisticsHistograms=async function(C,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsComputeStatisticsHistograms)throw new Q("imagery-layer:compute-statistics-histograms",
"this operation is not supported on the input image service");C=q.ensureClass(Ma,C).clone();this._applyMosaicAndRenderingRules(C);return S.computeStatisticsHistograms(this.url,C,this._getRequestOptions(U))};ka.measureHeight=async function(C,U){const aa=await this._fetchCapabilities(U?.signal);if(!("base-and-top"===C.operationType?aa.mensuration.supportsHeightFromBaseAndTop:"base-and-top-shadow"===C.operationType?aa.mensuration.supportsHeightFromBaseAndTopShadow:aa.mensuration.supportsHeightFromTopAndTopShadow))throw new Q("imagery-layer:measure-height",
"this operation is not supported on the input image service");C=q.ensureClass(Wa,C).clone();this._applyMosaicAndRenderingRules(C);return S.measureHeight(this.url,C,this._getRequestOptions(U))};ka.measureAreaAndPerimeter=async function(C,U){const aa=await this._fetchCapabilities(U?.signal);if(!aa.mensuration.supportsAreaAndPerimeter||C.is3D&&!aa.mensuration.supports3D)throw new Q("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");C=q.ensureClass(Ua,
C).clone();this._applyMosaicAndRenderingRules(C);return S.measureAreaAndPerimeter(this.url,C,this._getRequestOptions(U))};ka.measureDistanceAndAngle=async function(C,U){const aa=await this._fetchCapabilities(U?.signal);if(!aa.mensuration.supportsDistanceAndAngle||C.is3D&&!aa.mensuration.supports3D)throw new Q("imagery-layer:measure-distance-and-angle","this operation is not supported on the input image service");C=q.ensureClass(Va,C).clone();this._applyMosaicAndRenderingRules(C);return S.measureDistanceAndAngle(this.url,
C,this._getRequestOptions(U))};ka.measurePointOrCentroid=async function(C,U){const aa=await this._fetchCapabilities(U?.signal);if(!aa.mensuration.supportsPointOrCentroid||C.is3D&&!aa.mensuration.supports3D)throw new Q("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");C=q.ensureClass(Ya,C).clone();this._applyMosaicAndRenderingRules(C);return S.measurePointOrCentroid(this.url,C,this._getRequestOptions(U))};ka.getField=function(C){const {fieldsIndex:U}=
this;return null!=U?U.get(C):void 0};ka.getFieldDomain=function(C,U){return(C=this.getField(C))?C.domain:null};ka.fetchImage=async function(C,U,aa,da={}){if(null==C||null==U||null==aa)throw new Q("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){var oa=await this._generateRasterInfo(this.rasterFunction,{signal:da.signal});oa&&(this.rasterInfo=oa)}oa=this.getExportImageServiceParameters(C,
U,aa,da.timeExtent);if(null==oa){if(da.requestAsImageElement&&this._canRequestImageElement(this.format))return C=document.createElement("canvas"),C.width=U,C.height=aa,da.returnImageBitmap?{imageBitmap:await g.createBitmap(C,`${Ca(this.parsedUrl)}/exportImage`,da.signal)}:{imageOrCanvasElement:C};const {bandIds:ta,rasterInfo:pa}=this;da=(ta?.length||pa.bandCount)??0;oa=U*aa;var ja=pa.pixelType;const xa=[];for(let ra=0;ra<da;ra++)xa.push(p.createEmptyBand(ja,oa));return{pixelData:{pixelBlock:new p({width:U,
height:aa,pixels:xa,mask:new Uint8Array(oa),pixelType:ja}),extent:C}}}ja=!!da.requestAsImageElement&&!this.pixelFilter;return this._requestArrayBuffer({imageServiceParameters:oa,imageProps:{extent:C,width:U,height:aa,format:this.format},requestAsImageElement:ja,returnImageBitmap:ja&&!!da.returnImageBitmap,signal:da.signal})};ka.fetchKeyProperties=function(C){return L(Ca(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=this.version?C?.rasterFunction:null})}).then(U=>
U.data)};ka.fetchRasterAttributeTable=function(C){return 10.1>this.version?Promise.reject(new Q("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):L(Ca(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version?C?.rasterFunction:null})}).then(U=>na.fromJSON(U.data))};ka.getCatalogItemRasterInfo=function(C,U){const aa=this._getQueryParams();U={...U,query:aa};return Sa.getCatalogItemRasterInfo(Ca(this.parsedUrl),C,U)};ka.getCatalogItemICSInfo=
async function(C,U){var {data:aa}=await L(Ca(this.parsedUrl)+"/"+C+"/info/ics",{query:this._getQueryParams(),...U});if(aa=aa&&aa.ics){var da=null;try{da=(await L(Ca(this.parsedUrl)+"/"+C+"/info",{query:this._getQueryParams(),...U})).data.extent}catch{}if(!da||!da.spatialReference)return{ics:aa,icsToPixelTransform:null,icsExtent:null,northDirection:null};var oa=10.7<=this.version?L(Ca(this.parsedUrl)+"/"+C+"/info/icstopixel",{query:this._getQueryParams(),...U}).then(wa=>wa.data).catch(()=>({})):{},
ja=da.spatialReference,ta={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[da]}),inSR:ja.wkid||JSON.stringify(ja),outSR:"0:"+C};ta=L(Ca(this.parsedUrl)+"/project",{query:this._getQueryParams(ta),...U}).then(wa=>wa.data).catch(()=>({}));var pa=(da.xmin+da.xmax)/2,xa=(da.ymax-da.ymin)/6;da=da.ymin+xa;var ra=[];for(let wa=0;5>wa;wa++)ra.push({x:pa,y:da+xa*wa});C={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:ra}),inSR:ja.wkid||JSON.stringify(ja),outSR:"0:"+
C};U=L(Ca(this.parsedUrl)+"/project",{query:this._getQueryParams(C),...U}).then(wa=>wa.data).catch(()=>({}));C=await Promise.all([oa,ta,U]);U=C[0].ipxf;null==U&&(oa=aa.geodataXform?.xf_0,"topup"===oa?.name?.toLowerCase()&&6===oa?.coefficients?.length&&(U={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:oa.coefficients,cellsizeRatio:0,type:"GeometricXform"}}));if(oa=ca.fromJSON(C[1]&&C[1].geometries&&C[1].geometries[0]))oa.spatialReference=new Na({wkid:0,imageCoordinateSystem:aa});
C=C[2].geometries?C[2].geometries.filter(wa=>null!=wa&&null!=wa.x&&null!=wa.y&&"NaN"!==wa.x&&"NaN"!==wa.y):[];ta=C.length;if(3>ta)return{ics:aa,icsToPixelTransform:U,icsExtent:oa,northDirection:null};da=xa=pa=ja=0;for(ra=0;ra<ta;ra++)ja+=C[ra].x,pa+=C[ra].y,xa+=C[ra].x*C[ra].x,da+=C[ra].x*C[ra].y;ta=(ta*da-ja*pa)/(ta*xa-ja*ja);ja=0;pa=C[4].x>C[0].x;C=C[4].y>C[0].y;Infinity===ta?ja=C?90:270:0===ta?ja=pa?0:180:0<ta?ja=pa?180*Math.atan(ta)/Math.PI:180*Math.atan(ta)/Math.PI+180:0>ta&&(ja=C?180+180*Math.atan(ta)/
Math.PI:360+180*Math.atan(ta)/Math.PI);return{ics:aa,icsToPixelTransform:U,icsExtent:oa,northDirection:ja}}};ka.generateRasterInfo=async function(C,U){C=q.ensureClass(H,C);if(this.serviceRasterInfo&&(!C||"none"===C.functionName?.toLowerCase()||this._isVectorFieldResampleFunction(C)))return this.serviceRasterInfo;const aa=ab(C);if(!aa)throw new Q("imagery-layer:generate-raster-info","the rendering rule is not supported");if(this._functionRasterInfos[aa])return this._functionRasterInfos[aa];const da=
this._getQueryParams();U={...U,query:da};C=Ia.generateRasterInfo(Ca(this.parsedUrl),C,U);this._functionRasterInfos[aa]=C;try{return await C}catch(oa){throw this._functionRasterInfos[aa]=null,oa;}};ka.getExportImageServiceParameters=function(C,U,aa,da){C=C.clone().shiftCentralMeridian();const oa=S.getImageSpatialReferenceQueryParameter(C.spatialReference,Ca(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const ja=this.exportImageServiceParameters.toJSON(),
{bandIds:ta,noData:pa}=ja;var {renderingRule:xa}=ja,ra=this.rasterFunction?.rasterFunctionDefinition,wa=!this.renderer||"raster-stretch"===this.renderer.type;ta?.length&&this._hasRasterFunction(this.rasterFunction)&&!ra&&wa?(ra={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:ta}},"Stretch"===xa.rasterFunction?(ra.rasterFunctionArguments.Raster=xa.rasterFunctionArguments.Raster,xa.rasterFunctionArguments.Raster=ra):"Colormap"===xa.rasterFunction?(wa=xa.rasterFunctionArguments.Raster,
"Stretch"===wa?.rasterFunction?(ra.rasterFunctionArguments.Raster=wa.rasterFunctionArguments.Raster,wa.rasterFunctionArguments.Raster=ra):(ra.rasterFunctionArguments.Raster=wa,xa.rasterFunctionArguments.Raster=ra)):(ra.rasterFunctionArguments.Raster=xa,xa=ra),ja.bandIds=void 0):ja.bandIds=ta?.join(",");pa instanceof Array&&0<pa.length&&(ja.noData=pa.join(","));da=this._processMultidimensionalIntersection(null,da,this.exportImageServiceParameters.mosaicRule);if(da.isOutSide)return null;ja.mosaicRule=
null!=da.mosaicRule?JSON.stringify(da.mosaicRule):null;da=da.timeExtent;ja.renderingRule=this._getRenderingRuleString(H.fromJSON(xa));xa={};if(null!=da){const {start:Aa,end:Fa}=da.toJSON();if(Aa&&Fa&&Aa===Fa)xa.time=""+Aa;else if(null!=Aa||null!=Fa)xa.time=`${null==Aa?"null":Aa},${null==Fa?"null":Fa}`}return{bbox:C.xmin+","+C.ymin+","+C.xmax+","+C.ymax,bboxSR:oa,imageSR:oa,size:U+","+aa,...ja,...xa}};ka.getSamples=async function(C,U){if(!(await this._fetchCapabilities(U?.signal))?.operations.supportsGetSamples)throw new Q("imagery-layer:get-samples",
"getSamples operation is not supported on the input image service");C=q.ensureClass(Za,C).clone();const {raster:aa}=this;aa&&null==C.raster&&(C.raster=aa);return S.getSamples(this.url,C,this._getRequestOptions(U))};ka.identify=async function(C,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsIdentify)throw new Q("imagery-layer:identify","identify operation is not supported on the input image service");C=q.ensureClass(Pa,C).clone();const aa=this._processMultidimensionalIntersection(C.geometry,
C.timeExtent,C.mosaicRule||this.mosaicRule);if(aa.isOutSide)throw new Q("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");C.timeExtent=aa.timeExtent;C.mosaicRule=aa.mosaicRule;const {raster:da,rasterFunction:oa}=this;oa&&null==C.rasterFunction&&(C.rasterFunction=oa);da&&null==C.raster&&(C.raster=da);return S.identify(this.url,C,this._getRequestOptions(U))};ka.createQuery=function(){const C=new ua;C.outFields=["*"];C.returnGeometry=!0;C.where=
this.definitionExpression||"1\x3d1";return C};ka.queryRasters=async function(C,U){({query:C,requestOptions:U}=await this._prepareForQuery(C,U));return N.executeQueryJSON(this.url,C,U)};ka.queryObjectIds=async function(C,U){({query:C,requestOptions:U}=await this._prepareForQuery(C,U));return Ea.executeForIds(this.url,C,U)};ka.queryRasterCount=async function(C,U){({query:C,requestOptions:U}=await this._prepareForQuery(C,U));return ya.executeForCount(this.url,C,U)};ka.queryVisibleRasters=async function(C,
U){if(!C)throw new Q("imagery-layer: query-visible-rasters","missing query parameter");await this.load();const {pixelSize:aa,returnDomainValues:da,returnTopmostRaster:oa,showNoDataRecords:ja}=U||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let ta=!1;var pa=null,xa=null;const ra=this._rasterFunctionNamesIndex;if(null!=C.outFields&&(ta=C.outFields.some(Ba=>!Ba.toLowerCase().includes("raster.servicepixelvalue")),10.4<=this.version)){xa=C.outFields.filter(Da=>Da.toLowerCase().includes("raster.servicepixelvalue")&&
24<Da.length).map(Da=>{Da=Da.slice(25);return[this._updateRenderingRulesFunctionName(Da,ra),Da]});pa=xa.map(Da=>new H({functionName:Da[0]}));xa=xa.map(Da=>Da[1]);const {rasterFunction:Ba}=this;0===pa.length?Ba?.functionName?(pa.push(Ba),xa.push(Ba.functionName)):pa=null:Ba?.functionName&&!pa.some(Da=>Da.functionName===Ba.functionName)&&(pa.push(Ba),xa.push(Ba.functionName))}const wa=null==C.outSpatialReference||C.outSpatialReference.equals(this.spatialReference);var {multidimensionalSubset:Aa}=this;
let Fa=C.timeExtent||this.timeExtent;if(Aa){const {isOutside:Ba,intersection:Da}=A.intersectMultimensionalSubset(Aa,{geometry:C.geometry,timeExtent:C.timeExtent,multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(Ba)throw new Q("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");Da&&null!=Da.timeExtent&&(Fa=Da.timeExtent)}Aa=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,
Fa);pa=this._getQueryParams({geometry:C.geometry,timeExtent:Fa,mosaicRule:Aa,rasterFunction:10.4>this.version?this.rasterFunction:null,rasterFunctions:pa,pixelSize:aa,returnCatalogItems:ta,returnGeometry:wa,raster:this.raster,maxItemCount:oa?1:null});delete pa.f;pa=new Pa(pa);try{await this._generateRasterInfo(this.rasterFunction);const Ba=await S.identify(this.url,pa,{signal:U?.signal,query:{...this.customParameters}}),Da=C.outFields,db=null!=Ba.value&&Ba.value.toLowerCase().includes("nodata");if(!ta||
wa||!Ba?.catalogItems?.features.length||!ja&&db)return this._processVisibleRastersResponse(Ba,{returnDomainValues:da,templateRRFunctionNames:xa,showNoDataRecords:ja,templateFields:Da});const Ka=this.objectIdField||"ObjectId",Qa=Ba.catalogItems?.features??[],eb=Qa.map(La=>La.attributes?.[Ka]),fb=new ua({objectIds:eb,returnGeometry:!0,outSpatialReference:C.outSpatialReference,outFields:[Ka]}),Ra=await this.queryRasters(fb);Ra?.features?.length&&Ra.features.forEach(La=>{Qa.forEach(Oa=>{Oa.attributes[Ka]===
La.attributes[Ka]&&(Oa.geometry=new ha(La.geometry),null!=C.outSpatialReference&&(Oa.geometry.spatialReference=C.outSpatialReference))})});return this._processVisibleRastersResponse(Ba,{returnDomainValues:da,templateRRFunctionNames:xa,showNoDataRecords:ja,templateFields:Da})}catch{throw new Q("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");}};ka.fetchVariableStatisticsHistograms=async function(C,U){var aa=L(Ca(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:C}),
signal:U}).then(da=>da.data?.statistics);C=L(Ca(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:C}),signal:U}).then(da=>da.data?.histograms);aa=await Promise.all([aa,C]);aa[0]&&aa[0].forEach(da=>{da.avg=da.mean;da.stddev=da.standardDeviation});return{statistics:aa[0]||null,histograms:aa[1]||null}};ka.createFlowMesh=async function(C,U){const aa=this._rasterJobHandler.instance;return aa?aa.createFlowMesh(C,U):$a.createFlowMesh(C.meshType,C.simulationSettings,C.flowData,null!=U.signal?
U.signal:(new AbortController).signal)};ka.getMultidimensionalSubsetVariables=function(C){return A.getSubsetVariablesFromMdInfo(this.multidimensionalSubset,C??this.serviceRasterInfo.multidimensionalInfo)};ka._fetchService=async function(C){await this._fetchServiceInfo(C);this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);var U=this.sourceJSON;U=null!=this.serviceRasterInfo?Promise.resolve(this.serviceRasterInfo):Ia.fetchServiceRasterInfo(Ca(this.parsedUrl),U,{signal:C,query:this._getQueryParams()}).then(da=>
{this._set("serviceRasterInfo",da);this._set("multidimensionalInfo",da.multidimensionalInfo);return da});C=this._hasRasterFunction(this.rasterFunction)?this._generateRasterInfo(this.rasterFunction,{signal:C}):null;const aa=this._getRasterFunctionInfos();return Promise.all([U,C,aa]).then(da=>{da[1]?this._set("rasterInfo",da[1]):this._set("rasterInfo",da[0]);da[2]&&this._set("rasterFunctionInfos",da[2]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",null),F.getLogger(this).warn("ArcGISImageService",
"Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._set("renderer",this._configRenderer(this.renderer));this.addHandles([f.watch(()=>this.rasterFunction,oa=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this._generateRasterInfo(oa).then(ja=>{ja&&(this.rasterInfo=ja)})})]);({serviceRasterInfo:da}=this);null!=da.multidimensionalInfo&&this._updateMultidimensionalDefinition(da)})};ka._combineMosaicRuleWithTimeExtent=function(C,
U){var aa=this.timeInfo,{multidimensionalInfo:da}=this.serviceRasterInfo;if(null==C||null==da||null==U||null==aa?.startField)return C;const {startField:oa}=aa,ja=da.variables.some(ra=>ra.dimensions.some(wa=>wa.name===oa))?oa:"StdTime";C=C.clone();if("mosaic-dataset"===this.sourceType)return C.multidimensionalDefinition=C.multidimensionalDefinition?.filter(ra=>ra.dimensionName!==ja),this._cleanupMultidimensionalDefinition(C);C.multidimensionalDefinition=C.multidimensionalDefinition||[];aa=C.multidimensionalDefinition.filter(ra=>
ra.dimensionName===ja);da=null!=U.start?U.start.getTime():null;U=null!=U.end?U.end.getTime():null;const ta=null==da||null==U||da===U,pa=ta?[da||U]:[[da,U]],xa=10.8<=this.version;aa.length?aa.forEach(ra=>{ra.dimensionName===ja&&(xa?(ra.dimensionName=null,ra.isSlice=!1,ra.values=[]):(ra.isSlice=ta,ra.values=pa))}):xa||(U=C.multidimensionalDefinition.filter(ra=>null!=ra.variableName&&null==ra.dimensionName),U.length?U.forEach(ra=>{ra.dimensionName=ja;ra.isSlice=ta;ra.values=pa}):C.multidimensionalDefinition.push(new a({variableName:"",
dimensionName:ja,isSlice:ta,values:pa})));return this._cleanupMultidimensionalDefinition(C)};ka._cleanupMultidimensionalDefinition=function(C){if(null==C)return null;C.multidimensionalDefinition&&(C.multidimensionalDefinition=C.multidimensionalDefinition.filter(U=>!(!U.variableName&&!U.dimensionName)),0===C.multidimensionalDefinition.length&&(C.multidimensionalDefinition=null));return"mosaic-dataset"!==this.sourceType&&null==C.multidimensionalDefinition?null:C};ka._prepareForQuery=async function(C,
U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsQuery)throw new Q("imagery-layer:query-rasters","query operation is not supported on the input image service");C=null!=C?q.ensureClass(ua,C):this.createQuery();U=this._getRequestOptions(U);this.raster&&(U.query={...U.query,raster:this.raster});return{query:C,requestOptions:U}};ka._initJobHandler=async function(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const C=new K;this._rasterJobHandler.connectionPromise=
C.initialize().then(()=>{this._rasterJobHandler.instance=C},()=>{});await this._rasterJobHandler.connectionPromise};ka._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this._cachedRendererJson=null};ka._isSupportedRenderer=function(C){const {rasterInfo:U,rasterFunction:aa}=this;return"unique-value"===C.type&&this._hasRasterFunction(aa)&&
1===U?.bandCount&&["u8","s8"].includes(U.pixelType)||null!=U&&null!=C&&z.getSupportedRendererTypes(U).includes(C.type)};ka._fetchCapabilities=async function(C){if(this.capabilities)return this.capabilities;await this._fetchServiceInfo(C);return this.capabilities};ka._fetchServiceInfo=async function(C){let U=this.sourceJSON;if(!U){const {data:aa,ssl:da}=await L(Ca(this.parsedUrl),{query:this._getQueryParams(),signal:C});this.sourceJSON=U=aa;da&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<
U.capabilities?.toLowerCase().split(",").map(aa=>aa.trim()).indexOf("tilesonly"))throw new Q("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(U,{origin:"service",url:this.parsedUrl})};ka._isMosaicDataset=function(C){return C.serviceSourceType?"esriImageServiceSourceTypeMosaicDataset"===C.serviceSourceType:0<C.fields?.length};ka._isMosaicRuleSupported=function(C){if(!C)return!1;const U=this._isMosaicDataset(C);C=10.71<=C.currentVersion&&C.hasMultidimensions&&
!(1<C.fields?.length);return U||C};ka._isVectorFieldResampleFunction=function(C){if(null==C)return!1;const {functionName:U,functionArguments:aa}=C;C="resample"===U?.toLowerCase();const da=aa?.ResampleType||aa?.resampleType;return C&&(7===da||10===da)};ka._isPicture=function(){return!this.format||this.format.includes("jpg")||this.format.includes("png")};ka._configRenderer=function(C){var U=this._isPicture();const {rasterInfo:aa}=this;if(!U&&!this.pixelFilter||this._isVectorDataSet())!this.bandIds&&
3<=aa.bandCount&&(!(U=z.getDefaultBandCombination(aa))||3===aa.bandCount&&0===U[0]&&1===U[1]&&2===U[2]||(this.bandIds=U)),C||(C=z.createDefaultRenderer(aa,{bandIds:this.bandIds,variableName:this.rasterFunction?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName})),U=z.normalizeRendererJSON(C.toJSON()),this.symbolizer?(this.symbolizer.rendererJSON=U,this.symbolizer.rasterInfo=aa):this.symbolizer=new M({rendererJSON:U,rasterInfo:aa}),this.symbolizer.bind().success||(this.symbolizer=null);
return C};ka._clonePixelData=function(C){return null==C?C:{extent:C.extent&&C.extent.clone(),pixelBlock:null!=C.pixelBlock?C.pixelBlock.clone():null}};ka._getQueryParams=function(C){C&&null!=C.renderingRule&&"string"!==typeof C.renderingRule&&(C.renderingRule=this._getRenderingRuleString(C.renderingRule));const {raster:U,viewId:aa}=this;return{raster:U,viewId:aa,f:"json",...C,...this.customParameters}};ka._getRequestOptions=function(C){return{...C,query:{...C?.query,...this.customParameters}}};ka._decodePixelBlock=
function(C,U,aa){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:C,options:U}):I.decode(C,U,aa)};ka._getRasterFunctionInfos=async function(C){const U=this.sourceJSON.rasterFunctionInfos;return this.loaded?U:U&&10.3<=this.version?1===U.length&&"none"===U[0].name.toLowerCase()?U:(await L(Ca(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:C})).data?.rasterFunctionInfos:null};ka._canRequestImageElement=function(C){return!this.pixelFilter&&
(!C||C.includes("png"))};ka._requestArrayBuffer=async function(C){const {imageProps:U,requestAsImageElement:aa,returnImageBitmap:da,signal:oa}=C;if(aa&&this._canRequestImageElement(U.format)){var ja=`${Ca(this.parsedUrl)}/exportImage`;({data:C}=await L(ja,{responseType:da?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...C.imageServiceParameters}),signal:oa}));return C instanceof Blob?{imageBitmap:await g.createBitmap(C,ja,oa),params:U}:{imageOrCanvasElement:C,params:U}}ja=
this._initJobHandler();C=L(Ca(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...C.imageServiceParameters}),signal:oa});C=(await Promise.all([C,ja]))[0].data;var ta=ja=U.format||"jpgpng";"bsq"!==ta&&"bip"!==ta&&(ta=I.getFormat(C));if(!ta)throw new Q("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(C)));ta="gif"===ja||"bmp"===ja||ja.includes("png")&&("png"===ta||"jpg"===ta);const pa={signal:oa};
return{pixelData:{pixelBlock:await (ta?I.decode(C,{useCanvas:!0,...U},pa):this._decodePixelBlock(C,{width:U.width,height:U.height,planes:null,pixelType:null,noDataValue:null,format:ja},pa)),extent:U.extent},params:U}};ka._generateRasterInfo=function(C,U){return this.generateRasterInfo(C,U).catch(()=>null)};ka._isValidCustomizedMosaicRule=function(C){return C&&JSON.stringify(C.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())};ka._updateMultidimensionalDefinition=function(C){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)&&
(C=A.getDefaultMultidimensionalDefinition(C,{multidimensionalSubset:this.multidimensionalSubset}),null!=C&&0<C.length)){this.mosaicRule=this.mosaicRule||new k;const U=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.rasterFunction&&"none"!==this.rasterFunction.functionName?.toLowerCase()&&C.forEach(aa=>aa.variableName="");C=C.filter(({variableName:aa,dimensionName:da})=>aa&&"*"!==aa||da);!U?.length&&C.length&&(this.mosaicRule.multidimensionalDefinition=C)}};ka._processVisibleRastersResponse=
function(C,U){U=U||{};const aa=C.value,{templateRRFunctionNames:da,showNoDataRecords:oa,returnDomainValues:ja,templateFields:ta}=U;U=C.processedValues;var pa=C.catalogItems&&C.catalogItems.features;let xa=C.properties&&C.properties.Values&&C.properties.Values.map(Ba=>Ba.replaceAll(/ /gi,", "))||[];var ra=this.objectIdField||"ObjectId",wa="string"===typeof aa&&aa.toLowerCase().includes("nodata");C=[];!aa||pa||wa||(pa={},pa[ra]=0,pa=new r(this.fullExtent,null,pa),xa=[aa],pa=[pa]);if(!pa)return[];this._updateResponseFieldNames(pa,
ta);wa&&!oa&&(pa=[]);for(ra=0;ra<pa.length;ra++){wa=pa[ra];if(null!=aa){var Aa=xa[ra];var Fa=this.rasterFunction&&U&&0<U.length&&da&&0<da.length&&da.includes(this.rasterFunction.functionName)?U[da.indexOf(this.rasterFunction.functionName)]:aa;if("nodata"===Aa.toLowerCase()&&!oa)continue;wa.attributes["Raster.ItemPixelValue"]=Aa;wa.attributes["Raster.ServicePixelValue"]=Fa;this._updateFeatureWithMagDirValues(wa,Aa);const Ba=this.fields&&0<this.fields.length;Fa=this.rasterFunction&&null!=this.serviceRasterInfo.attributeTable?
Ba?Aa:aa:Fa;this.rasterFunction||(Fa=Ba?Aa:aa);this._updateFeatureWithRasterAttributeTableValues(wa,Fa)}wa.sourceLayer=wa.layer=this;ja&&this._updateFeatureWithDomainValues(wa);if(da&&U&&da.length===U.length)for(Aa=0;Aa<da.length;Aa++)wa.attributes["Raster.ServicePixelValue."+da[Aa]]=U[Aa];C.push(pa[ra])}return C};ka._processMultidimensionalIntersection=function(C,U,aa){const {multidimensionalSubset:da}=this;if(!da)return aa=this._combineMosaicRuleWithTimeExtent(aa,U),{isOutSide:!1,timeExtent:U,mosaicRule:aa};
if(da){const {isOutside:oa,intersection:ja}=A.intersectMultimensionalSubset(da,{geometry:C,timeExtent:U});if(oa)return{isOutSide:!0,timeExtent:null,mosaicRule:null};ja&&null!=ja.timeExtent&&(U=ja.timeExtent)}aa=this._combineMosaicRuleWithTimeExtent(aa,U);return null!=aa&&aa.multidimensionalDefinition&&({isOutside:C}=A.intersectMultimensionalSubset(da,{multidimensionalDefinition:aa.multidimensionalDefinition}),C)?{isOutSide:!0,timeExtent:null,mosaicRule:null}:{isOutSide:!1,timeExtent:U,mosaicRule:aa}};
ka._updateFeatureWithRasterAttributeTableValues=function(C,U){var aa=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(null!=aa){var {features:da,fields:oa}=aa,ja=(aa=oa.map(pa=>pa.name).filter(pa=>"value"===pa.toLowerCase()))&&aa[0];if(ja){var ta=da.filter(pa=>pa.attributes[ja]===(null!=U?parseInt(U,10):null));ta&&ta[0]&&oa.forEach(pa=>{C.attributes[this._rasterAttributeTableFieldPrefix+pa.name]=ta[0].attributes[pa.name]})}}};ka._updateFeatureWithMagDirValues=function(C,U){if(this._isVectorDataSet()){var aa=
U.split(/,\s*/).map(da=>parseFloat(da));U=aa.map(da=>[da]);aa=aa.map(da=>({minValue:da,maxValue:da,noDataValue:null}));U=new p({height:1,width:1,pixelType:"f32",pixels:U,statistics:aa});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:U,extent:new ca(0,0,0,0,this.spatialReference)});U="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[U.pixels[0][0],U.pixels[1][0]]:B.uvComponentToVector([U.pixels[0][0],U.pixels[1][0]]);C.attributes["Raster.Magnitude"]=U[0];C.attributes["Raster.Direction"]=
U[1]}};ka._updateFeatureWithDomainValues=function(C){const U=this.fields&&this.fields.filter(aa=>aa.domain&&"coded-value"===aa.domain.type);null!=U&&U.forEach(aa=>{const da=C.attributes[aa.name];if(null!=da){const oa=aa.domain.codedValues.find(ja=>ja.code===da);oa&&(C.attributes[aa.name]=oa.name)}})};ka._updateResponseFieldNames=function(C,U){if(U&&!(1>U.length)){var aa=this.fieldsIndex;null!=aa&&C.forEach(da=>{if(da&&da.attributes)for(const oa of U){const ja=aa.get(oa)?.name;ja&&ja!==oa&&(da.attributes[oa]=
da.attributes[ja],delete da.attributes[ja])}})}};ka._getRenderingRuleString=function(C){if(C){C=C.toJSON();C=C.rasterFunctionDefinition??C;if(C.thumbnail||C.thumbnailEx)C.thumbnail=C.thumbnailEx=null;return JSON.stringify(C)}return null};ka._hasRasterFunction=function(C){return null!=C&&null!=C.functionName&&"none"!==C.functionName.toLowerCase()};ka._updateRenderingRulesFunctionName=function(C,U){if(C&&!(1>C.length)){if("Raw"===C)return C.replace("Raw","None");var aa=C.toLowerCase().replaceAll(/ /gi,
"_");return U.has(aa)?U.get(aa):C}};ka._isRFTJson=function(C){return C&&C.name&&C.arguments&&C.function&&C.hasOwnProperty("functionType")};ka._isVectorDataSet=function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType};ka._applyMosaicAndRenderingRules=function(C){const {raster:U,mosaicRule:aa,rasterFunction:da}=this;da&&C instanceof Ma&&null==C.rasterFunction&&(C.rasterFunction=da);aa&&null==C.mosaicRule&&(C.mosaicRule=
aa);U&&null==C.raster&&(C.raster=U)};ka._readCapabilities=function(C){const U=C.capabilities?C.capabilities.toLowerCase().split(",").map(Aa=>Aa.trim()):["image","catalog"],{currentVersion:aa,advancedQueryCapabilities:da,maxRecordCount:oa}=C,ja=U.includes("image"),ta="esriImageServiceDataTypeElevation"===C.serviceDataType;var pa=!!(C.spatialReference||C.extent&&C.extent.spatialReference);const xa=U.includes("edit");pa=U.includes("mensuration")&&pa;const ra=null==C.mensurationCapabilities?[]:C.mensurationCapabilities.toLowerCase().split(",").map(Aa=>
Aa.trim()),wa=pa&&ra.includes("basic");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:ja,supportsExportImage:ja,supportsIdentify:ja,supportsMeasure:pa,supportsDownload:U.includes("download"),supportsQuery:U.includes("catalog")&&C.fields&&0<C.fields.length,supportsGetSamples:10.2<=aa&&ja,supportsProject:10.3<=aa&&ja,supportsComputeStatisticsHistograms:10.4<=aa&&ja,supportsQueryBoundary:10.6<=aa&&ja,supportsCalculateVolume:10.7<=aa&&ta,supportsComputePixelLocation:10.7<=aa&&
U.includes("catalog"),supportsComputeAngles:10.91<=aa,supportsAdd:xa,supportsDelete:xa,supportsEditing:xa,supportsUpdate:xa,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:oa,maxRecordCountFactor:void 0,supportsStatistics:!!da?.supportsStatistics,supportsOrderBy:!!da?.supportsOrderBy,
supportsDistinct:!!da?.supportsDistinct,supportsPagination:!!da?.supportsPagination,supportsStandardizedQueriesOnly:!!da?.useStandardizedQueries,supportsPercentileStatistics:!!da?.supportsPercentileStatistics,supportsCentroid:!!da?.supportsReturningGeometryCentroid,supportsDistance:!!da?.supportsQueryWithDistance,supportsExtent:!!da?.supportsReturningQueryExtent,supportsGeometryProperties:!!da?.supportsReturningGeometryProperties,supportsHavingClause:!!da?.supportsHavingClause,supportsQuantization:!1,
supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!da?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,
standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:wa,supportsAreaAndPerimeter:wa,supportsPointOrCentroid:wa,supportsHeightFromBaseAndTop:pa&&ra.includes("base-top height"),supportsHeightFromBaseAndTopShadow:pa&&ra.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:pa&&ra.includes("top-top shadow height"),supports3D:pa&&ra.includes("3d")}}};u._createClass(Ja,[{key:"_rasterFunctionNamesIndex",get:function(){const C=new Map;if(!this.rasterFunctionInfos||
null!=this.rasterFunctionInfos&&1>this.rasterFunctionInfos.length)return C;null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.forEach(U=>{C.set(U.name.toLowerCase().replaceAll(/ /gi,"_"),U.name)});return C}},{key:"fieldsIndex",get:function(){return this.fields?new d(this.fields):null}},{key:"format",set:function(C){C&&bb.has(C.toLowerCase())&&this._set("format",C.toLowerCase())}},{key:"mosaicRule",set:function(C){C&&C.mosaicMethod&&(C=k.fromJSON({...C.toJSON(),mosaicMethod:C.mosaicMethod,mosaicOperation:C.mosaicOperation}));
this._set("mosaicRule",C)}},{key:"parsedUrl",get:function(){return l.urlToObject(this.url)}},{key:"renderer",set:function(C){this.loaded&&(C=this._configRenderer(C));this._set("renderer",C)}},{key:"rasterFields",get:function(){const C=this._rasterAttributeTableFieldPrefix||"Raster.";var U=new b({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const aa=new b({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,
length:50,type:"string"}),da=new b({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let oa=this.fields?D.clone(this.fields):[];oa.push(aa);this.capabilities?.operations.supportsQuery&&this.fields&&0<this.fields.length&&oa.push(U);10.4<=this.version&&null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.some(ja=>"none"===ja.name.toLowerCase())&&oa.push(da);null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.filter(ja=>"none"!==
ja.name.toLowerCase()).forEach(ja=>{oa.push(new b({name:"Raster.ServicePixelValue."+ja.name,alias:ja.name,domain:null,editable:!1,length:50,type:"string"}))});this._isVectorDataSet()&&(oa.push(new b({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),oa.push(new b({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));({attributeTable:U}=this.rasterInfo??{});null!=U&&(U=U.fields.filter(ja=>"esriFieldTypeOID"!==ja.type&&"value"!==ja.name.toLowerCase()).map(ja=>
{const ta=D.clone(ja);ta.name=C+ja.name;return ta}),oa=oa.concat(U));return oa}},{key:"renderingRule",get:function(){P.deprecatedProperty(F.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});return this._get("rasterFunction")},set:function(C){P.deprecatedProperty(F.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});this._set("rasterFunction",C)}},{key:"rasterFunction",set:function(C){C&&C.rasterFunction&&(C=H.fromJSON({...C.toJSON(),
rasterFunction:C.rasterFunction,rasterFunctionArguments:C.rasterFunctionArguments}));this._set("rasterFunction",C)}}]);return Ja}(ma);t.__decorate([n.property()],ma.prototype,"_functionRasterInfos",void 0);t.__decorate([n.property()],ma.prototype,"_rasterJobHandler",void 0);t.__decorate([n.property()],ma.prototype,"_cachedRendererJson",void 0);t.__decorate([n.property({readOnly:!0})],ma.prototype,"_serviceSupportsMosaicRule",void 0);t.__decorate([e.reader("_serviceSupportsMosaicRule",["currentVersion",
"fields"])],ma.prototype,"readServiceSupportsMosaicRule",null);t.__decorate([n.property()],ma.prototype,"_rasterAttributeTableFieldPrefix",void 0);t.__decorate([n.property({readOnly:!0})],ma.prototype,"_rasterFunctionNamesIndex",null);t.__decorate([n.property()],ma.prototype,"adjustAspectRatio",void 0);t.__decorate([n.property({type:[q.Integer],json:{write:!0}})],ma.prototype,"bandIds",void 0);t.__decorate([e.reader("bandIds")],ma.prototype,"readBandIds",null);t.__decorate([n.property({readOnly:!0,
json:{read:!1}})],ma.prototype,"capabilities",void 0);t.__decorate([e.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],ma.prototype,"readCapabilities",null);t.__decorate([n.property({type:Number})],ma.prototype,"compressionQuality",void 0);t.__decorate([w.writer("compressionQuality")],ma.prototype,"writeCompressionQuality",null);t.__decorate([n.property({type:Number})],ma.prototype,"compressionTolerance",void 0);t.__decorate([w.writer("compressionTolerance")],
ma.prototype,"writeCompressionTolerance",null);t.__decorate([n.property({json:{read:{source:"copyrightText"}}})],ma.prototype,"copyright",void 0);t.__decorate([n.property({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],ma.prototype,"defaultMosaicRule",void 0);t.__decorate([e.reader("defaultMosaicRule",["defaultMosaicMethod"])],ma.prototype,"readDefaultMosaicRule",null);t.__decorate([n.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],
ma.prototype,"definitionExpression",void 0);t.__decorate([n.property({readOnly:!0,constructOnly:!0})],ma.prototype,"exportImageServiceParameters",void 0);t.__decorate([n.property()],ma.prototype,"rasterInfo",void 0);t.__decorate([n.property({readOnly:!0,type:[b]})],ma.prototype,"fields",void 0);t.__decorate([n.property({readOnly:!0})],ma.prototype,"fieldsIndex",null);t.__decorate([n.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],ma.prototype,"format",
null);t.__decorate([e.reader("service","format",["serviceDataType"])],ma.prototype,"readFormat",null);t.__decorate([n.property({type:ca})],ma.prototype,"fullExtent",void 0);t.__decorate([n.property({readOnly:!0})],ma.prototype,"hasMultidimensions",void 0);t.__decorate([n.property({json:{read:{source:"maxImageHeight"}}})],ma.prototype,"imageMaxHeight",void 0);t.__decorate([n.property({json:{read:{source:"maxImageWidth"}}})],ma.prototype,"imageMaxWidth",void 0);t.__decorate([n.property({type:String,
json:{type:y.interpolationKebab.jsonValues,read:y.interpolationKebab.read,write:y.interpolationKebab.write}})],ma.prototype,"interpolation",void 0);t.__decorate([n.property()],ma.prototype,"minScale",void 0);t.__decorate([e.reader("service","minScale")],ma.prototype,"readMinScale",null);t.__decorate([n.property()],ma.prototype,"maxScale",void 0);t.__decorate([e.reader("service","maxScale")],ma.prototype,"readMaxScale",null);t.__decorate([n.property({type:k})],ma.prototype,"mosaicRule",null);t.__decorate([e.reader("mosaicRule",
["mosaicRule","defaultMosaicMethod"])],ma.prototype,"readMosaicRule",null);t.__decorate([w.writer("mosaicRule")],ma.prototype,"writeMosaicRule",null);t.__decorate([n.property()],ma.prototype,"multidimensionalInfo",void 0);t.__decorate([n.property({type:x,json:{write:!0}})],ma.prototype,"multidimensionalSubset",void 0);t.__decorate([n.property({json:{type:q.Integer}})],ma.prototype,"noData",void 0);t.__decorate([w.writer("noData")],ma.prototype,"writeNoData",null);t.__decorate([n.property({type:String,
json:{type:y.noDataInterpretationKebab.jsonValues,read:y.noDataInterpretationKebab.read,write:y.noDataInterpretationKebab.write}})],ma.prototype,"noDataInterpretation",void 0);t.__decorate([n.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],ma.prototype,"objectIdField",void 0);t.__decorate([e.reader("objectIdField")],ma.prototype,"readObjectIdField",null);t.__decorate([n.property({})],ma.prototype,"geometryType",void 0);t.__decorate([n.property({})],ma.prototype,"typeIdField",
void 0);t.__decorate([n.property({})],ma.prototype,"types",void 0);t.__decorate([n.property({readOnly:!0})],ma.prototype,"parsedUrl",null);t.__decorate([n.property({type:Function})],ma.prototype,"pixelFilter",void 0);t.__decorate([n.property()],ma.prototype,"raster",void 0);t.__decorate([n.property({readOnly:!0})],ma.prototype,"sourceType",void 0);t.__decorate([e.reader("sourceType",["serviceSourceType","fields"])],ma.prototype,"readSourceType",null);t.__decorate([n.property()],ma.prototype,"viewId",
void 0);t.__decorate([n.property({types:R.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:R.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(Ha){return{enabled:Ha&&"vector-field"!==Ha.type&&"flow"!==Ha.type}}}}}}})],ma.prototype,"renderer",null);t.__decorate([e.reader("renderer")],ma.prototype,"readRenderer",null);t.__decorate([w.writer("renderer")],ma.prototype,"writeRenderer",null);t.__decorate([n.property()],
ma.prototype,"symbolizer",void 0);t.__decorate([n.property(m.opacity)],ma.prototype,"opacity",void 0);t.__decorate([n.property({readOnly:!0})],ma.prototype,"rasterFields",null);t.__decorate([n.property({constructOnly:!0})],ma.prototype,"rasterFunctionInfos",void 0);t.__decorate([n.property({type:H})],ma.prototype,"renderingRule",null);t.__decorate([n.property({type:H,json:{name:"renderingRule"}})],ma.prototype,"rasterFunction",null);t.__decorate([e.reader("rasterFunction",["renderingRule","rasterFunctionInfos"])],
ma.prototype,"readRasterFunction",null);t.__decorate([n.property()],ma.prototype,"serviceDataType",void 0);t.__decorate([n.property({readOnly:!0,type:Na})],ma.prototype,"spatialReference",void 0);t.__decorate([e.reader("spatialReference",["spatialReference","extent"])],ma.prototype,"readSpatialReference",null);t.__decorate([n.property({json:{type:y.pixelTypeKebabDict.jsonValues}})],ma.prototype,"pixelType",void 0);t.__decorate([e.reader("pixelType")],ma.prototype,"readPixelType",null);t.__decorate([w.writer("pixelType")],
ma.prototype,"writePixelType",null);t.__decorate([n.property({constructOnly:!0,type:G})],ma.prototype,"serviceRasterInfo",void 0);t.__decorate([n.property()],ma.prototype,"sourceJSON",void 0);t.__decorate([n.property(m.url)],ma.prototype,"url",void 0);t.__decorate([n.property({readOnly:!0})],ma.prototype,"version",void 0);t.__decorate([e.reader("version",["currentVersion","fields","timeInfo"])],ma.prototype,"readVersion",null);return ma=t.__decorate([v.subclass("esri.layers.mixins.ArcGISImageService")],
ma)};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/FlowRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(J,u,t,E,r,R,L,P,Q){function D(n,q){if(!n)return null;if("classBreaks"===n.type&&n.classificationMethod){var e=n.authoringInfo||
{classificationMethod:""};e.classificationMethod=n.classificationMethod;n.authoringInfo=e}"vectorField"===n.type&&n.visualVariables&&!Array.isArray(n.visualVariables)&&(n.visualVariables=[n.visualVariables]);e=n?l[n.type]||null:null;if(e)return e=new e,e.read(n,q),e;q&&q.messages&&n&&q.messages.push(new u("renderer:unsupported","Renderers of type '"+(n.type||"unknown")+"' are not supported",{definition:n,context:q}));return null}const F={key:"type",base:null,typeMap:{"unique-value":P,"class-breaks":t,
"raster-colormap":r,"raster-stretch":L,"vector-field":Q,"raster-shaded-relief":R,flow:E}},f={...F,typeMap:{...F.typeMap}};delete f.typeMap["vector-field"];delete f.typeMap.flow;const l={uniqueValue:P,classBreaks:t,rasterStretch:L,rasterColormap:r,vectorField:Q,rasterShadedRelief:R,flowRenderer:E};J.ClassBreaksRenderer=t;J.FlowRenderer=E;J.RasterColormapRenderer=r;J.RasterShadedReliefRenderer=R;J.RasterStretchRenderer=L;J.UniqueValueRenderer=P;J.VectorFieldRenderer=Q;J.fromJSON=function(n,q){return D(n,
q)};J.rasterRendererTypes=F;J.read=D;J.websceneRasterRendererTypes=f;Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/FlowRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./mixins/VisualVariablesMixin ./support/AuthoringInfo ./support/LegendOptions".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n,q){var e;E=new E.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});r=e=function(v){function w(a){a=v.call(this,a)||this;a.density=.8;a.color=new t([255,255,255,1]);a.maxPathLength=200;a.trailWidth=1.5;a.flowSpeed=10;a.trailLength=100;a.smoothing=0;a.flowRepresentation="flow-from";a.type="flow";a.authoringInfo=null;a.legendOptions=null;a.trailCap="butt";a.background="none";return a}J._inherits(w,v);var m=w.prototype;m.clone=function(){const {density:a,maxPathLength:c,
trailWidth:b,flowSpeed:d,trailLength:g,smoothing:h,flowRepresentation:k,trailCap:x,background:p}=this,y=this.color.clone(),H=(this.visualVariables||[]).map(A=>A.clone()),G=this.authoringInfo?.clone(),K=this.legendOptions?.clone();return new e({density:a,color:y,maxPathLength:c,trailWidth:b,flowSpeed:d,trailLength:g,trailCap:x,background:p,smoothing:h,flowRepresentation:k,visualVariables:H,authoringInfo:G,legendOptions:K})};m.getSymbol=function(a,c){};m.getSymbolAsync=async function(a,c){};m.getSymbols=
function(){return[]};return J._createClass(w)}(l.VisualVariablesMixin(r.JSONSupport));u.__decorate([L.property({type:Number,json:{write:!0}})],r.prototype,"density",void 0);u.__decorate([L.property({type:t,json:{write:{allowNull:!0}}})],r.prototype,"color",void 0);u.__decorate([L.property({type:Number,cast:R.toPt,json:{write:!0}})],r.prototype,"maxPathLength",void 0);u.__decorate([L.property({type:Number,cast:R.toPt,json:{write:!0}})],r.prototype,"trailWidth",void 0);u.__decorate([L.property({type:Number,
json:{write:!0}})],r.prototype,"flowSpeed",void 0);u.__decorate([L.property({type:Number,json:{write:!0}})],r.prototype,"trailLength",void 0);u.__decorate([L.property({type:Number,cast:R.toPt,json:{write:!1}})],r.prototype,"smoothing",void 0);u.__decorate([L.property({type:E.apiValues,json:{type:E.jsonValues,read:{reader:E.read},write:{writer:E.write}}})],r.prototype,"flowRepresentation",void 0);u.__decorate([F.enumeration({flowRenderer:"flow"})],r.prototype,"type",void 0);u.__decorate([L.property({type:n,
json:{write:!0}})],r.prototype,"authoringInfo",void 0);u.__decorate([L.property({type:q.LegendOptions,json:{write:!0}})],r.prototype,"legendOptions",void 0);u.__decorate([L.property({type:String,json:{write:!0}})],r.prototype,"trailCap",void 0);u.__decorate([L.property({type:String,json:{write:!0}})],r.prototype,"background",void 0);return r=e=u.__decorate([f.subclass("esri.renderers.FlowRenderer")],r)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F){var f;t=f=function(l){function n(e){e=l.call(this,e)||this;e.colormapInfos=null;e.type="raster-colormap";return e}J._inherits(n,l);n.createFromColormap=function(e,v){if(!e)return null;const w=5===e[0].length;e=[...e].sort((m,a)=>m[0]-a[0]).map(m=>D.fromJSON({value:m[0],color:w?m.slice(1,5):m.slice(1,4).concat([255]),label:v?v[m[0]]??"":m[0]}));return new f({colormapInfos:e})};n.createFromColorramp=function(e){e=F.convertColorRampToColormap(e);return f.createFromColormap(e)};
var q=n.prototype;q.clone=function(){return new f({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})};q.extractColormap=function(){return this.colormapInfos.map(({value:e,color:v})=>[e,v.r,v.g,v.b,1<v.a?v.a:255*v.a&255]).sort((e,v)=>e[0]-v[0])};return J._createClass(n)}(t.JSONSupport);u.__decorate([E.property({type:[D],json:{write:!0}})],t.prototype,"colormapInfos",void 0);u.__decorate([P.enumeration({rasterColormap:"raster-colormap"})],t.prototype,"type",void 0);return t=f=u.__decorate([Q.subclass("esri.renderers.RasterColormapRenderer")],
t)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(J,u,t,E,r,R,L,P,Q){E=function(D){function F(){var f=D.apply(this,arguments)||this;f.value=null;f.label=null;f.color=null;return f}J._inherits(F,D);return J._createClass(F)}(E.JSONSupport);
u.__decorate([r.property({type:Number,json:{write:!0}})],E.prototype,"value",void 0);u.__decorate([r.property({type:String,json:{write:!0}})],E.prototype,"label",void 0);u.__decorate([r.property({type:t,json:{type:[R.Integer],write:!0}})],E.prototype,"color",void 0);return E=u.__decorate([Q.subclass("esri.renderers.support.ColormapInfo")],E)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils","../../core/jsonMap"],function(J,u,t,E){function r(m,
a){if(!m||!a||m.length!==a.length)return!1;for(let c=0;c<m.length;c++)if(m[c]>a[c]+2||m[c]<a[c]-2)return!1;return!0}function R(m){const a=m.clone();a.fromColor=m.toColor;a.toColor=m.fromColor;a.algorithm=m.algorithm;return a}function L(m){if("multipart"===m.type){m=m.clone();if(!m.colorRamps?.length)return m;m.colorRamps=m.colorRamps.reverse().map(a=>R(a));return m}return R(m)}function P(m,a){if(m){a=a??v;var c=null;"algorithmic"===m.type?a.some(b=>{if(r(m.fromColor.toRgb(),b.fromColor)&&r(m.toColor.toRgb(),
b.toColor))return c=b.id,!0}):"multipart"===m.type&&a.some(b=>{const d=m.colorRamps,g=b.colorRamps;if(d&&g&&d.length===g.length&&!g.some((h,k)=>{if(!r(d[k].fromColor.toRgb(),(new u(h.fromColor)).toRgb())||!r(d[k].toColor.toRgb(),(new u(h.toColor)).toRgb()))return!0})){if(c)return!0;c=b.id}});return c}}function Q(m,a,c=!1){if(m){var b=P(m,a);null!=b||c||(m=L(m),b=P(m,a));return b}}function D(m,a=!1){return(m="string"===typeof m?m:Q(m,void 0,a))?w.toJSON(m):null}function F(m){m=m||{};const a=m.numColors||
256;return{...m,numColors:a,distanceOffset:m.distanceOffset||0,interpolateAlpha:!!m.interpolateAlpha,distanceInterval:m.distanceInterval||1/(a-1),isCustomInterval:null!=m.isCustomInterval?m.isCustomInterval:null!==m.distanceInterval&&m.distanceInterval!==1/(a-1),weights:m.weights}}function f(m,a){let {fromColor:c,toColor:b}=m;c=[...c];b=[...b];3===c.length&&(c=c.concat([255]));3===b.length&&(b=b.concat([255]));m=m.algorithm||"esriCIELabAlgorithm";var d=F(a);const {numColors:g,distanceOffset:h,isCustomInterval:k,
interpolateAlpha:x}=d;if(1===g&&0===h)return[c];if(2===g&&0===h&&!k)return[c,b];var p={r:c[0],g:c[1],b:c[2]};a={r:b[0],g:b[1],b:b[2]};if("esriCIELabAlgorithm"===m){m=t.toLAB(p);a=t.toLAB(a);const {numColors:K,distanceOffset:A,distanceInterval:I,isCustomInterval:B}=d;let {l:z,a:M,b:S}=m;m=(a.l-z)*I;p=(a.a-M)*I;d=(a.b-S)*I;var y=[];if(A){var H=A/I;z+=H*m;M+=H*p;S+=H*d}for(H=0;H<K-1;H++)y.push({l:z,a:M,b:S}),z+=m,M+=p,S+=d;y.push(B?{l:z,a:M,b:S}:a);a=y}else if("esriHSVAlgorithm"===m){m=t.toHSV(p);a=
t.toHSV(a);const {numColors:K,distanceOffset:A,distanceInterval:I,isCustomInterval:B}=d;y=0===m.s;H=0===a.s;p=m.h;d=a.h;y&&!H?p=d:H&&!y&&(a={...a,h:p},d=p);y=Math.abs(d-p);180>y?d=(d-p)*I:(y=360-y,d=p>d?y*I:-y*I);y=(a.s-m.s)*I;H=(a.v-m.v)*I;let {s:z,v:M}=m;m=p;A&&(p=A/I,m=(m+p*d+360)%360,z+=p*y,M+=p*H);p=[];for(var G=0;G<K-1;G++)p.push({h:m,s:z,v:M}),m=(m+d+360)%360,z+=y,M+=H;p.push(B?{h:m,s:z,v:M}:a);a=p}else{p=t.toLCH(p);a=t.toLCH(a);const {numColors:K,distanceOffset:A,distanceInterval:I,isCustomInterval:B}=
d;d=p.h;y=a.h;m=2*Math.PI;d<=y?(H=y-d,d=y-d-m,d=Math.abs(d)<Math.abs(H)?d:H):(H=y+m-d,d=y-d,d=Math.abs(d)<Math.abs(H)?d:H);d*=I;y=(a.l-p.l)*I;H=(a.c-p.c)*I;let {l:z,c:M,h:S}=p;A&&(p=A/I,z+=p*y,M+=p*H,S=(S+p*d+m)%m);p=[];for(G=0;G<K-1;G++)p.push({l:z,c:M,h:S}),z+=y,M+=H,S=(S+d+m)%m;p.push(B?{l:z,c:M,h:S}:a);a=p}m=[];p=c[3]??255;d=((b[3]??255)-p)/(g-1);for(y=0;y<g;y++){const {r:K,g:A,b:I}=t.toRGB(a[y]);m.push([K,A,I,x?Math.round(p+d*y):255])}return m}function l(m,a){const {numColors:c,interpolateAlpha:b}=
F(a);a=a?.weights;({colorRamps:m}=m);if(a){const y=a.reduce((H,G)=>H+G);a=a.map(H=>H/y)}else{a=[];for(var d=0;d<m.length;d++)a[d]=1/m.length}d=[];let g=0,h=0;const k=1/(c-1);let x=!1;for(let y=0;y<m.length;y++){var p=x?0:g*k-h;let H=y===m.length-1?c-1-g:(a[y]-p)/k;x=Math.ceil(H)===H;H=Math.ceil(H);0!==H&&(p/=a[y],p=f(m[y],{numColors:H,interpolateAlpha:b,distanceOffset:p,distanceInterval:k/a[y]}),g+=p.length,d.push(...p),h+=a[y])}a=[...m[m.length-1].toColor];3===a.length&&a.push(255);d.push(a);return d}
function n(m,a){m="toJSON"in m?m.toJSON():m;return"multipart"===m.type?l(m,a):f(m,a)}function q(m){m=t.toHSV(m);return{type:"HsvColor",Hue:m.h,Saturation:m.s,Value:m.v,AlphaValue:255}}function e(m){return{Algorithm:m.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:q(m.fromColor),ToColor:q(m.toColor)}}const v=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,
254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,
245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},
{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",
type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,
171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,
219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,
241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,
137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",
colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,
32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,
246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",
colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},
{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,
255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,
224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],w=new E.JSONMap({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark",
"Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark",
"Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",
Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright",
"Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue",
"Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});J.PREDEFINED_JSON_COLOR_RAMPS=v;J.colorRampDict=w;J.convertColorRampToColormap=function(m,a){m=n(m,a);const c=a?.interpolateAlpha;m.forEach((b,d)=>{b.unshift(d);c||b.pop()});return m};J.convertColorRampToColors=n;J.convertRGBATo32Bit=function(m){m=m.reverse().map(a=>{a=a.toString(16);return 2>a.length?"0"+a:a});return 4294967295&Number.parseInt(m.join(""),16)};J.getColorRampId=
Q;J.getColorRampJSON=function(m,a="esriCIELabAlgorithm"){const c=v.find(({id:b})=>b===m);return c?c.colorRamps?{type:"multipart",colorRamps:c.colorRamps.map(b=>({type:"algorithmic",algorithm:a,fromColor:[...b.fromColor],toColor:[...b.toColor]}))}:{type:"algorithmic",algorithm:a,fromColor:[...c.fromColor],toColor:[...c.toColor]}:null};J.getColorRampName=D;J.getRFxArgColorRampValue=function(m){const a=D(m);return a?"algorithmic"===m.type?{...e(m),Name:a}:m.colorRamps?(m=m.colorRamps.map(e),{type:"MultiPartColorRamp",
NumColorRamps:m.length,ArrayOfColorRamp:m,Name:a}):null:null};J.rasterColormapNames="random ndvi ndvi2 ndvi3 elevation gray hillshade".split(" ");Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports"],function(J){function u(D,F){const f=[];let l,n;if(D[0].length!==F.length)throw Error("dimensions do not match");const q=D.length,e=D[0].length;let v=0;for(l=0;l<q;l++){for(n=v=0;n<e;n++)v+=D[l][n]*F[n];f.push(v)}return f}function t(D){D=[D.r/
255,D.g/255,D.b/255].map(F=>.04045>=F?F/12.92:((F+.055)/1.055)**2.4);D=u(P,D);return{x:100*D[0],y:100*D[1],z:100*D[2]}}function E(D){D=u(Q,[D.x/100,D.y/100,D.z/100]).map(F=>Math.min(1,Math.max(.0031308>=F?12.92*F:1.055*F**(1/2.4)-.055,0)));return{r:Math.round(255*D[0]),g:Math.round(255*D[1]),b:Math.round(255*D[2])}}function r(D){D=[D.x/95.047,D.y/100,D.z/108.883].map(F=>F>(6/29)**3?F**(1/3):1/3*(29/6)**2*F+4/29);return{l:116*D[1]-16,a:500*(D[0]-D[1]),b:200*(D[1]-D[2])}}function R(D){const F=D.l;D=
[(F+16)/116+D.a/500,(F+16)/116,(F+16)/116-D.b/200].map(f=>f>6/29?f**3:3*(6/29)**2*(f-4/29));return{x:95.047*D[0],y:100*D[1],z:108.883*D[2]}}function L(D){if("r"in D&&"g"in D&&"b"in D)return D;if("l"in D&&"c"in D&&"h"in D){var F=D.c,f=D.h;return E(R({l:D.l,a:F*Math.cos(f),b:F*Math.sin(f)}))}if("l"in D&&"a"in D&&"b"in D)return E(R(D));if("x"in D&&"y"in D&&"z"in D)return E(D);if("h"in D&&"s"in D&&"v"in D){f=(D.h+360)%360/60;F=D.v/100*255;D=D.s/100*F;const l=D*(1-Math.abs(f%2-1));switch(Math.floor(f)){case 0:f=
{r:D,g:l,b:0};break;case 1:f={r:l,g:D,b:0};break;case 2:f={r:0,g:D,b:l};break;case 3:f={r:0,g:l,b:D};break;case 4:f={r:l,g:0,b:D};break;case 5:case 6:f={r:D,g:0,b:l};break;default:f={r:0,g:0,b:0}}f.r=Math.round(f.r+F-D);f.g=Math.round(f.g+F-D);f.b=Math.round(f.b+F-D);return f}return D}const P=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Q=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];J.toHSV=function(D){if("h"in D&&"s"in D&&"v"in D)return D;var F=L(D);D=F.r;
const f=F.g,l=F.b;F=Math.max(D,f,l);const n=F-Math.min(D,f,l);D=0===n?0:F===D?(f-l)/n%6:F===f?(l-D)/n+2:(D-f)/n+4;0>D&&(D+=6);return{h:60*D,s:100*(0===n?0:n/F),v:100/255*F}};J.toLAB=function(D){return"l"in D&&"a"in D&&"b"in D?D:r(t(L(D)))};J.toLCH=function(D){if(!("l"in D&&"c"in D&&"h"in D)){var F=r(t(L(D)));D=F.l;var f=F.a;const l=F.b;F=Math.sqrt(f*f+l*l);f=Math.atan2(l,f);f=0<f?f:f+2*Math.PI;D={l:D,c:F,h:f}}return D};J.toRGB=L;J.toXYZ=function(D){return"x"in D&&"y"in D&&"z"in D?D:t(L(D))};Object.defineProperty(J,
Symbol.toStringTag,{value:"Module"})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),function(J,u,t,E,r,R,L,P,Q,D){var F;t=F=function(f){function l(q){q=
f.call(this,q)||this;q.altitude=45;q.azimuth=315;q.colorRamp=null;q.hillshadeType="traditional";q.pixelSizePower=.664;q.pixelSizeFactor=.024;q.scalingType="none";q.type="raster-shaded-relief";q.zFactor=1;return q}J._inherits(l,f);var n=l.prototype;n.readColorRamp=function(q){return D.fromJSON(q)};n.clone=function(){return new F({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,
colorRamp:E.clone(this.colorRamp)})};return J._createClass(l)}(t.JSONSupport);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"altitude",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"azimuth",void 0);u.__decorate([r.property({types:D.types,json:{write:!0}})],t.prototype,"colorRamp",void 0);u.__decorate([P.reader("colorRamp")],t.prototype,"readColorRamp",null);u.__decorate([r.property({type:["traditional","multi-directional"],json:{write:!0}})],
t.prototype,"hillshadeType",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"pixelSizePower",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"pixelSizeFactor",void 0);u.__decorate([r.property({type:["none","adjusted"],json:{write:!0}})],t.prototype,"scalingType",void 0);u.__decorate([L.enumeration({rasterShadedRelief:"raster-shaded-relief"})],t.prototype,"type",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"zFactor",
void 0);return t=F=u.__decorate([Q.subclass("esri.renderers.RasterShadedReliefRenderer")],t)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f){var l;t=l=function(n){function q(v){v=n.call(this,v)||this;v.colorRamp=null;v.computeGamma=!1;v.dynamicRangeAdjustment=!1;v.gamma=[];v.maxPercent=null;v.minPercent=null;v.numberOfStandardDeviations=null;v.outputMax=null;v.outputMin=null;v.sigmoidStrengthLevel=null;v.statistics=[];v.histograms=null;v.useGamma=!1;v.stretchType="none";v.type="raster-stretch";return v}J._inherits(q,n);var e=q.prototype;e.readColorRamp=function(v){if(v)return f.fromJSON(v)};e.writeStatistics=
function(v,w,m){v?.length&&(Array.isArray(v[0])||(v=v.map(a=>[a.min,a.max,a.avg,a.stddev])),w[m]=v)};e.readStretchType=function(v,w){v=w.stretchType;"number"===typeof v&&(v=F.stretchTypeFunctionEnum[v]);return F.stretchTypeJSONDict.read(v)};e.clone=function(){return new l({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:E.clone(this.statistics),gamma:E.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:E.clone(this.colorRamp),histograms:E.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return J._createClass(q)}(t.JSONSupport);u.__decorate([r.property({types:f.types,json:{write:!0}})],t.prototype,"colorRamp",void 0);u.__decorate([P.reader("colorRamp")],t.prototype,"readColorRamp",null);u.__decorate([r.property({type:Boolean,json:{write:!0}})],t.prototype,
"computeGamma",void 0);u.__decorate([r.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],t.prototype,"dynamicRangeAdjustment",void 0);u.__decorate([r.property({type:[Number],json:{write:!0}})],t.prototype,"gamma",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"maxPercent",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"minPercent",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"numberOfStandardDeviations",
void 0);u.__decorate([r.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],t.prototype,"outputMax",void 0);u.__decorate([r.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],t.prototype,"outputMin",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"sigmoidStrengthLevel",void 0);u.__decorate([r.property({json:{type:[[Number]],write:!0}})],t.prototype,"statistics",void 0);u.__decorate([r.property()],t.prototype,"histograms",void 0);
u.__decorate([D.writer("statistics")],t.prototype,"writeStatistics",null);u.__decorate([r.property({type:Boolean,json:{write:!0}})],t.prototype,"useGamma",void 0);u.__decorate([r.property({type:F.stretchTypeJSONDict.apiValues,json:{type:F.stretchTypeJSONDict.jsonValues,write:F.stretchTypeJSONDict.write}})],t.prototype,"stretchType",void 0);u.__decorate([P.reader("stretchType",["stretchType"])],t.prototype,"readStretchType",null);u.__decorate([L.enumeration({rasterStretch:"raster-stretch"})],t.prototype,
"type",void 0);return t=l=u.__decorate([Q.subclass("esri.renderers.RasterStretchRenderer")],t)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(J,u){u=new u.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});J.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
J.stretchTypeJSONDict=u;Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../geometry/Point ../symbols/PictureMarkerSymbol".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n,q,e,v,w,m,a,c,b,d,g,h,k,x){var p;const y=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);E=new L.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
L=new L.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});P=p=function(H){function G(A){A=H.call(this,A)||this;A.attributeField="Magnitude";A.flowRepresentation="flow-from";A.rotationType="arithmetic";A.style="single-arrow";A.symbolTileSize=50;A.type="vector-field";return A}J._inherits(G,H);var K=G.prototype;K.readInputUnit=function(A,I){return y.has(A)?e.unitKebabDict.fromJSON(A):null};K.readOutputUnit=function(A,I){return y.has(A)?e.unitKebabDict.fromJSON(A):null};K.clone=function(){return new p({attributeField:this.attributeField,
flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:Q.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};K.getGraphicsFromPixelData=async function(A,I=!1,B=[]){const z=[];var M=e.getUnitConversionFactor(this.inputUnit,this.outputUnit),S=this.rotationVariables[0]?.rotationType||this.rotationType;I=I?e.convertVectorFieldData(A.pixelBlock,"vector-uv",S,M):e.convertVectorFieldUnit(A.pixelBlock,
"vector-magdir",M);if(null==I)return z;A=A.extent;M=null!=I.mask&&0<I.mask.length;S=0;const W=(A.xmax-A.xmin)/I.width,O=(A.ymax-A.ymin)/I.height;for(let T=0;T<I.height;T++)for(let V=0;V<I.width;V++,S++){let X=new k({x:A.xmin+V*W+W/2,y:A.ymax-T*O-O/2,spatialReference:A.spatialReference});X=(await q.normalizeCentralMeridian(X))[0];var N=B.some(ba=>ba.intersects(X));M&&!I.mask[S]||N||(N=new r({geometry:{type:"point",x:X.x,y:X.y,spatialReference:A.spatialReference},attributes:{Magnitude:I.pixels[0][S],
Direction:I.pixels[1][S]}}),N.symbol=this._getVisualVariablesAppliedSymbol(N),z.push(N))}return z};K.getSymbol=function(A,I){};K.getSymbolAsync=async function(A,I){};K.getSymbols=function(){return[]};K.getClassBreakInfos=function(){return this.styleRenderer?.classBreakInfos};K.getDefaultSymbol=function(){return this.styleRenderer?.defaultSymbol};K._getDefaultSymbol=function(A){return new g({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new d({width:0}),size:20,color:A||new t([0,92,230])})};
K._getVisualVariablesAppliedSymbol=function(A){if(A){var I=this.styleRenderer?.getSymbol(A)?.clone(),B=this.sizeVariables,z=this.rotationVariables;B&&B.length&&this.sizeVariables.forEach(M=>h.applySizesToSymbol(I,b.getAllSizes([M],A)));z&&z.length&&(A.attributes.Direction+="flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(M=>h.applyRotationToSymbol(I,b.getRotationAngle(M,A),M.axis)));return I}};K._createStyleRenderer=
function(A){let I={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(A){case "single-arrow":I=this._createSingleArrowRenderer();break;case "beaufort-kn":I=this._createBeaufortKnotsRenderer();break;case "beaufort-m":I=this._createBeaufortMeterRenderer();break;case "beaufort-ft":I=this._createBeaufortFeetRenderer();break;case "beaufort-mi":I=this._createBeaufortMilesRenderer();break;case "beaufort-km":I=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":I=this._createCurrentMeterRenderer();
break;case "ocean-current-kn":I=this._createCurrentKnotsRenderer();break;case "simple-scalar":I=this._createSimpleScalarRenderer();break;case "wind-barb":I=this._createWindBarbsRenderer();break;case "classified-arrow":I=this._createClassifiedArrowRenderer()}return new v(I)};K._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};K._createBeaufortKnotsRenderer=function(){const A=this._getDefaultSymbol(new t([214,47,39])),I=this._getClassBreaks([0,1,3,6,10,16,21,27,33,
40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:A,classBreakInfos:I}};K._createBeaufortMeterRenderer=function(){const A=this._getDefaultSymbol(new t([214,47,39])),I=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],
[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:A,classBreakInfos:I}};K._createBeaufortFeetRenderer=function(){const A=this._getDefaultSymbol(new t([214,47,39]));var I=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];I=I.map(B=>3.28084*B);I=this._getClassBreaks(I,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:A,classBreakInfos:I}};
K._createBeaufortMilesRenderer=function(){const A=this._getDefaultSymbol(new t([214,47,39]));var I=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];I=I.map(B=>2.23694*B);I=this._getClassBreaks(I,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:A,classBreakInfos:I}};K._createBeaufortKilometersRenderer=function(){const A=this._getDefaultSymbol(new t([214,
47,39]));var I=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];I=I.map(B=>3.6*B);I=this._getClassBreaks(I,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:A,classBreakInfos:I}};K._createCurrentMeterRenderer=function(){const A=this._getDefaultSymbol(new t([177,177,177])),I=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,
177]]);return{defaultSymbol:A,classBreakInfos:I}};K._createCurrentKnotsRenderer=function(){const A=this._getDefaultSymbol(new t([177,177,177])),I=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:A,classBreakInfos:I}};K._createClassifiedArrowRenderer=function(){const A=this._getDefaultSymbol(new t([56,168,0]));var I=[0,1E-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const B=
this.sizeVariables[0].minDataValue,z=this.sizeVariables[0].maxDataValue;if(B&&z){const M=(z-B)/5;I=Array.from(Array(6).keys()).map(S=>B+M*S)}}I=this._getClassBreaks(I,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:A,classBreakInfos:I}};K._createSimpleScalarRenderer=function(){return{defaultSymbol:x.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};K._createWindBarbsRenderer=function(){const A=Array.from(Array(31).keys()).map(M=>5*M),I=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],B=x.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),z=A.map((M,S)=>{if(S!==A.length-1)if(0===S)var W={minValue:M,maxValue:A[S+1],symbol:B};else W=x.fromJSON({type:"esriPMS",imageData:I[S].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),W={minValue:M,maxValue:A[S+1],symbol:W};return new m(W)});return{defaultSymbol:B,classBreakInfos:z}};K._getClassBreaks=function(A,I){return I.map((B,z)=>new m({minValue:A[z],maxValue:A[z+1],symbol:this._getDefaultSymbol(new t(B))}))};J._createClass(G,[{key:"styleRenderer",
get:function(){const A=this.attributeField,I=this._createStyleRenderer(this.style);I.field=A;return I}},{key:"sizeVariables",get:function(){const A=[];if(this.visualVariables)for(var I of this.visualVariables)"size"===I.type&&A.push(I);0===A.length&&(I=new c({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(I):this._set("visualVariables",[I]),A.push(I));return A}},{key:"rotationVariables",get:function(){const A=[];if(this.visualVariables)for(var I of this.visualVariables)"rotation"===
I.type&&A.push(I);0===A.length&&(I=new a({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(I):this._set("visualVariables",[I]),A.push(I));return A}}]);return G}(w.VisualVariablesMixin(P.JSONSupport));u.__decorate([D.property({type:String,json:{write:!0}})],P.prototype,"attributeField",void 0);u.__decorate([D.property({type:L.apiValues,json:{type:L.jsonValues,read:{reader:L.read},write:{writer:L.write}}})],P.prototype,"flowRepresentation",void 0);u.__decorate([D.property({type:["geographic",
"arithmetic"],json:{write:!0}})],P.prototype,"rotationType",void 0);u.__decorate([D.property({type:E.apiValues,json:{type:E.jsonValues,read:{reader:E.read},write:{writer:E.write}}})],P.prototype,"style",void 0);u.__decorate([D.property({json:{write:!0}})],P.prototype,"symbolTileSize",void 0);u.__decorate([D.property({type:e.unitKebabDict.apiValues,json:{type:e.unitKebabDict.jsonValues,write:{writer:e.unitKebabDict.write}}})],P.prototype,"inputUnit",void 0);u.__decorate([l.reader("inputUnit")],P.prototype,
"readInputUnit",null);u.__decorate([D.property({type:e.unitKebabDict.apiValues,json:{type:e.unitKebabDict.jsonValues,read:{reader:e.unitKebabDict.read},write:{writer:e.unitKebabDict.write}}})],P.prototype,"outputUnit",void 0);u.__decorate([l.reader("outputUnit")],P.prototype,"readOutputUnit",null);u.__decorate([f.enumeration({vectorField:"vector-field"})],P.prototype,"type",void 0);u.__decorate([D.property({type:v})],P.prototype,"styleRenderer",null);u.__decorate([D.property({type:c})],P.prototype,
"sizeVariables",null);u.__decorate([D.property({type:a})],P.prototype,"rotationVariables",null);return P=p=u.__decorate([n.subclass("esri.renderers.VectorFieldRenderer")],P)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../PixelBlock","./pixelUtils"],function(J,u,t,E){function r(g,h){return e.get(g)/e.get(h)||1}function R(g,h="geographic"){const [k,x]=g;g=Math.sqrt(k*k+x*x);let p=Math.atan2(x,k)*v;p=(360+p)%360;"geographic"===h&&(p=
(450-p)%360);return[g,p]}function L(g,h="geographic"){let k=g[1];"geographic"===h&&(k=(450-k)%360);k%=360;g=g[0];return[g*Math.cos(k/v),g*Math.sin(k/v)]}function P(g,h,k="geographic",x=1){if(!E.isValidPixelBlock(g))return g;const {pixels:p,width:y,height:H}=g;var G=y*H;const K=p[0],A=p[1],I=g.pixelType.startsWith("f")?g.pixelType:"f32",B=t.createEmptyBand(I,G);G=t.createEmptyBand(I,G);let z=0;for(let M=0;M<H;M++)for(let S=0;S<y;S++)"vector-uv"===h?([B[z],G[z]]=R([K[z],A[z]],k),B[z]*=x):([B[z],G[z]]=
L([K[z],A[z]],k),B[z]*=x,G[z]*=x),z++;g=new t({pixelType:I,width:g.width,height:g.height,mask:g.mask,validPixelCount:g.validPixelCount,maskIsAlpha:g.maskIsAlpha,pixels:[B,G]});g.updateStatistics();return g}function Q(g=0,h=0,k=Math.PI,x=!0){x&&(k=(2*Math.PI-k)%(2*Math.PI));x=x?-1:1;const p=-7*x,y=-2*x,H=-16*x,[G,K]=F(0,h+13*x,k,21.75),[A,I]=F(g-5.5,h+p,k,21.75),[B,z]=F(g+5.5,h+p,k,21.75),[M,S]=F(g-1.5,h+y,k,21.75),[W,O]=F(g+1.5,h+y,k,21.75),[N,T]=F(g-1.5,h+H,k,21.75),[V,X]=F(g+1.5,h+H,k,21.75);return[G,
K,A,I,M,S,W,O,B,z,N,T,V,X]}function D(g=0,h=Math.PI,k=!0){k&&(h=(2*Math.PI-h)%(2*Math.PI));var x=k?-1:1,p=5*x;const y=20*x,H=25*x;x*=2;const G=k?1:-1;k=5*G;let [K,A]=[0+k,0-y],[I,B]=[K+2*G,A],[z,M]=[I-0*G,B+x],[S,W]=[0-k,0-H],[O,N]=[S+0*G,W-x],T=Math.ceil(g/5),V=Math.floor(T/10);T-=8*V;g=[];const X=[];for(let ia=0;ia<T/2;ia++,V--){0>=V&&1===T%2&&ia===(T-1)/2&&(S=0,O=S+0*G,W=(W+A)/2,N=W-x);const [qa,na]=F(S,W,h,45);if(0<V){const [ua,va]=F(I,W,h,45),[za,ya]=F(K,A,h,45);g.push(ua);g.push(va);g.push(qa);
g.push(na);g.push(za);g.push(ya)}else{const [ua,va]=F(I,B,h,45),[za,ya]=F(z,M,h,45),[Ea,sa]=F(O,N,h,45);X.push(qa);X.push(na);X.push(Ea);X.push(sa);X.push(za);X.push(ya);X.push(ua);X.push(va)}W+=p;A+=p;B+=p;M+=p;N+=p}const [ba,Y]=F(0+k,0+y,h,45);p=7*G;const [ca,Z]=F(0+p,0+y,h,45),[ea,fa]=F(0+k,0-H,h,45),[ha,la]=F(0+p,0-H,h,45);return{pennants:g,barbs:X,shaft:[ba,Y,ca,Z,ea,fa,ha,la]}}function F(g,h,k,x=1){return[Math.sqrt(g*g+h*h)/x,(2*Math.PI+(2*Math.PI+Math.atan2(h,g))%(2*Math.PI)-k)%(2*Math.PI)]}
function f(g,h,k,x){k=r(x||"knots",k);for(x=1;x<h.length;x++)if(x===h.length-1){if(g<h[x]*k)break}else if(g<=h[x]*k)break;return Math.min(x-1,h.length-2)}function l(g,h,k,x,p){let y=0;switch(h){case "beaufort_kn":y=f(g,a,"knots",k);break;case "beaufort_km":y=f(g,a,"kilometer-per-hour",k);break;case "beaufort_ft":y=f(g,a,"feet-per-second",k);break;case "beaufort_m":y=f(g,a,"meter-per-second",k);break;case "classified_arrow":y=f(g,p??[],x,k);break;case "ocean_current_m":y=f(g,c,"meter-per-second",k);
break;case "ocean_current_kn":y=f(g,b,"knots",k)}return y}function n(g,h){const {style:k,inputUnit:x,outputUnit:p,breakValues:y}=h,H=w.fromJSON(x),G=w.fromJSON(p);let K=0,A=0;const {width:I,height:B,mask:z}=g,M=g.pixels[0];g=g.pixels[1];var S=null!=z?z.filter(N=>0<N).length:I*B;const W=new Float32Array(42*S);S=new Uint32Array(15*S);h=h.invertDirection?Q(0,0,0,!1):m;for(let N=0;N<B;N++)for(let T=0;T<I;T++){var O=N*I+T;if(!z||z[N*I+T]){const V=(g[O]+360)%360/180*Math.PI,X=l(M[O],k,H,G,y);for(let ba=
0;ba<h.length;ba+=2)W[K++]=(T+.5)/I,W[K++]=(N+.5)/B,W[K++]=h[ba],W[K++]=h[ba+1]+V,W[K++]=X,W[K++]=M[O];O=7*(K/42-1);S[A++]=O;S[A++]=O+1;S[A++]=O+2;S[A++]=O+0;S[A++]=O+4;S[A++]=O+3;S[A++]=O+0;S[A++]=O+2;S[A++]=O+3;S[A++]=O+2;S[A++]=O+5;S[A++]=O+3;S[A++]=O+5;S[A++]=O+6;S[A++]=O+3}}return{vertexData:W,indexData:S}}function q(g,h){let k=0,x=0;const {width:p,height:y,mask:H}=g;g=g.pixels[0];const G=[],K=[];var A=w.fromJSON(h.inputUnit);A=r(A,"knots");h="wind_speed"===h.style?5:Number.MAX_VALUE;for(let B=
0;B<y;B++)for(let z=0;z<p;z++){var I=g[B*p+z]*A;if((!H||H[B*p+z])&&I<h){for(let M=0;4>M;M++)G[k++]=(z+.5)/p,G[k++]=(B+.5)/y,G[k++]=2>M?-.5:.5,G[k++]=0===M%2?-.5:.5,G[k++]=0,G[k++]=I;I=4*(k/24-1);K[x++]=I;K[x++]=I+1;K[x++]=I+2;K[x++]=I+1;K[x++]=I+2;K[x++]=I+3}}return{vertexData:new Float32Array(G),indexData:new Uint32Array(K)}}const e=new Map;e.set("meter-per-second",1);e.set("kilometer-per-hour",.277778);e.set("knots",.514444);e.set("feet-per-second",.3048);e.set("mile-per-hour",.44704);const v=180/
Math.PI,w=new u.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),m=Q(0,0,0),a=[0,1,3,6,10,16,21,27,33,40,47,55,63],c=[0,.5,1,1.5,2],b=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],d=[];J.convertToLocalDirections=function(g,h,k,x="geographic"){if(!E.isValidPixelBlock(g)||null==k)return g;g="vector-magdir"===h?g.clone():P(g,h);const p=g.pixels[1];for(let y=0;y<p.length;y++)p[y]="geographic"===
x?(p[y]+k[y]+270)%360:(p[y]+360-k[y])%360;return"vector-magdir"===h?g:P(g,"vector-magdir")};J.convertVectorFieldData=P;J.convertVectorFieldUnit=function(g,h,k=1){if(1===k||!E.isValidPixelBlock(g))return g;g=g.clone();const {pixels:x,width:p,height:y}=g,H=x[0],G=x[1];let K=0;for(let A=0;A<y;A++)for(let I=0;I<p;I++)"vector-uv"===h?(H[K]*=k,G[K]*=k):H[K]*=k,K++;g.updateStatistics();return g};J.createVFMesh=function(g,h){if("simple_scalar"===h.style)h=q(g,h);else if("wind_speed"===h.style){if(0===d.length)for(var k=
0;30>k;k++)d.push(D(5*k,0,!h.invertDirection));h=w.fromJSON(h.inputUnit);h=r(h,"knots");const {width:H,height:G,mask:K}=g;k=g.pixels[0];g=g.pixels[1];const A=[],I=[];let B=0,z=0;for(let M=0;M<G;M++)for(let S=0;S<H;S++){var x=M*H+S,p=k[x]*h;if((!K||K[M*H+S])&&5<=p){const W=(g[x]+360)%360/180*Math.PI,{pennants:O,barbs:N,shaft:T}=d[Math.min(Math.floor(p/5),29)];if(0===O.length+N.length)continue;x=A.length/6;const V=(S+.5)/H,X=(M+.5)/G;for(var y=0;y<O.length;y+=2)A[B++]=V,A[B++]=X,A[B++]=O[y],A[B++]=
O[y+1]+W,A[B++]=0,A[B++]=p;for(y=0;y<N.length;y+=2)A[B++]=V,A[B++]=X,A[B++]=N[y],A[B++]=N[y+1]+W,A[B++]=0,A[B++]=p;for(y=0;y<T.length;y+=2)A[B++]=V,A[B++]=X,A[B++]=T[y],A[B++]=T[y+1]+W,A[B++]=0,A[B++]=p;for(p=0;p<O.length/6;p++)I[z++]=x,I[z++]=x+1,I[z++]=x+2,x+=3;for(p=0;p<N.length/8;p++)I[z++]=x,I[z++]=x+1,I[z++]=x+2,I[z++]=x+1,I[z++]=x+2,I[z++]=x+3,x+=4;I[z++]=x+0;I[z++]=x+1;I[z++]=x+2;I[z++]=x+1;I[z++]=x+3;I[z++]=x+2;x+=4}}h={vertexData:new Float32Array(A),indexData:new Uint32Array(I)}}else h=
n(g,h);return h};J.createVFMeshScalar=q;J.getUnitConversionFactor=r;J.sampleVectorField=function(g,h,k,x=[0,0],p=.5){const {width:y,height:H,mask:G}=g,[K,A]=g.pixels,[I,B]=x;g=Math.round((y-I)/k);x=Math.round((H-B)/k);var z=g*x;const M=new Float32Array(z),S=new Float32Array(z);z=new Uint8Array(z);h="vector-uv"===h;for(let O=0;O<x;O++)for(let N=0;N<g;N++){let T=0;const V=O*g+N,X=Math.max(0,O*k+B),ba=Math.max(0,N*k+I),Y=Math.min(H,X+k),ca=Math.min(y,ba+k);for(let Z=X;Z<Y;Z++)for(let ea=ba;ea<ca;ea++){var W=
Z*y+ea;if(!G||G[W]){T++;W=h?[K[W],A[W]]:[K[W],(360+A[W])%360];const [fa,ha]=h?W:L(W);M[V]+=fa;S[V]+=ha}}if(T>=(Y-X)*(ca-ba)*(1-p)){z[V]=1;const [Z,ea]=R([M[V]/T,S[V]/T]);M[V]=Z;S[V]=ea}else z[V]=0,M[V]=0,S[V]=0}k=new t({width:g,height:x,pixels:[M,S],mask:z});k.updateStatistics();return k};J.snapImageToSymbolTile=function(g,h,k,x,p){if(null==p||!p.spatialReference.equals(g.spatialReference))return{extent:g,width:Math.round(h/x),height:Math.round(k/x),resolution:g.width/h};const y=p.xmin;p=p.ymax;h=
(g.xmax-g.xmin)/h*x;k=(g.ymax-g.ymin)/k*x;g.xmin=y+Math.floor((g.xmin-y)/h)*h;g.xmax=y+Math.ceil((g.xmax-y)/h)*h;g.ymin=p+Math.floor((g.ymin-p)/k)*k;g.ymax=p+Math.ceil((g.ymax-p)/k)*k;return{extent:g,width:Math.round(g.width/h),height:Math.round(g.height/k),resolution:(h+k)/2}};J.unitKebabDict=w;J.uvComponentToVector=R;Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./SimpleBandStatistics ./rasterFormats/pixelRangeUtils".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F){var f;E=f=function(l){function n(e){e=l.call(this,e)||this;e.width=null;e.height=null;e.pixelType="f32";e.validPixelCount=null;e.mask=null;e.maskIsAlpha=!1;e.premultiplyAlpha=!1;e.statistics=null;e.depthCount=1;return e}J._inherits(n,l);n.createEmptyBand=function(e,v){return new (f.getPixelArrayConstructor(e))(v)};n.getPixelArrayConstructor=function(e){let v;switch(e){case "u1":case "u2":case "u4":case "u8":v=Uint8Array;break;case "u16":v=Uint16Array;break;case "u32":v=
Uint32Array;break;case "s8":v=Int8Array;break;case "s16":v=Int16Array;break;case "s32":v=Int32Array;break;case "f32":v=Float32Array;break;case "f64":v=Float64Array;break;case "c64":case "c128":case "unknown":v=Float32Array}return v};var q=n.prototype;q.castPixelType=function(e){if(!e)return"f32";e=e.toLowerCase();["u1","u2","u4"].includes(e)?e="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(e)||(e="f32");return e};q.getPlaneCount=function(){return this.pixels?.length};q.addData=function(e){if(!e.pixels||
e.pixels.length!==this.width*this.height)throw new t("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(e.pixels);this.statistics.push(e.statistics??new D.SimpleBandStatistics)};q.getAsRGBA=function(){const e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(e);
break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)};q.getAsRGBAFloat=function(){const e=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(e);return e};q.updateStatistics=function(){if(this.pixels){this.statistics=this.pixels.map(w=>this._calculateBandStatistics(w,this.mask));var e=this.mask,v=0;if(null!=e)for(let w=0;w<e.length;w++)e[w]&&v++;else v=this.width*this.height;this.validPixelCount=v}};q.clamp=function(e){if(e&&"f64"!==e&&"f32"!==e&&this.pixels){var [v,w]=F.getPixelValueRange(e),
m=this.pixels,a=this.width*this.height,c=m.length,b=[];for(let k=0;k<c;k++){var d=f.createEmptyBand(e,a);var g=m[k];for(let x=0;x<a;x++){var h=g[x];d[x]=h>w?w:h<v?v:h}b.push(d)}this.pixels=b;this.pixelType=e}};q.extractBands=function(e){const {pixels:v,statistics:w}=this;if(null==e||0===e.length||!v||0===v.length)return this;var m=v.length,a=e.some(k=>k>=v.length),c=m===e.length&&!e.some((k,x)=>k!==x);if(a||c)return this;m=this.bandMasks?.length===m?e.map(k=>this.bandMasks[k]):void 0;let {mask:b,
validPixelCount:d}=this;const {width:g,height:h}=this;if(m){if(1===m.length)b=m[0];else for(a=g*h,b=(new Uint8Array(a)).fill(255),c=0;c<m.length;c++){const k=m[c];for(let x=0;x<a;x++)k[x]||(b[x]=0)}d=b.filter(k=>!!k).length}return new f({pixelType:this.pixelType,width:g,height:h,mask:b,bandMasks:m,validPixelCount:d,maskIsAlpha:this.maskIsAlpha,pixels:e.map(k=>v[k]),statistics:w&&e.map(k=>w[k])})};q.clone=function(){const e=new f({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,
validPixelCount:this.validPixelCount});null!=this.mask&&(e.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));this.bandMasks&&(e.bandMasks=this.bandMasks.map(m=>new Uint8Array(m)));let v;const w=f.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){e.pixels=[];const m=!!this.pixels[0].slice;for(v=0;v<this.pixels.length;v++)e.pixels[v]=m?this.pixels[v].slice(0,this.pixels[v].length):new w(this.pixels[v])}if(this.statistics)for(e.statistics=
[],v=0;v<this.statistics.length;v++)e.statistics[v]=r.clone(this.statistics[v]);e.premultiplyAlpha=this.premultiplyAlpha;return e};q._fillFrom8Bit=function(e){const {mask:v,maskIsAlpha:w,premultiplyAlpha:m,pixels:a}=this;if(e&&a&&a.length){var c,b;var d=c=b=a[0];3<=a.length?(c=a[1],b=a[2]):2===a.length&&(c=a[1]);var g=new Uint32Array(e),h=this.width*this.height;if(d.length!==h)R.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(null!=v&&v.length===
h)if(w)for(e=0;e<h;e++){const k=v[e];if(k){const x=k/255;g[e]=m?k<<24|b[e]*x<<16|c[e]*x<<8|d[e]*x:k<<24|b[e]<<16|c[e]<<8|d[e]}}else for(e=0;e<h;e++)v[e]&&(g[e]=-16777216|b[e]<<16|c[e]<<8|d[e]);else for(e=0;e<h;e++)g[e]=-16777216|b[e]<<16|c[e]<<8|d[e]}else R.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};q._fillFromNon8Bit=function(e){const {pixels:v,mask:w,statistics:m}=this;if(e&&v&&v.length){var a=this.pixelType,c=1,b=0;c=1;if(m&&0<m.length){for(var d of m)null!=
d.minValue&&(b=Math.min(b,d.minValue)),null!=d.maxValue&&null!=d.minValue&&(c=Math.max(c,d.maxValue-d.minValue));c=255/c}else c=255,"s8"===a?(b=-128,c=127):"u16"===a?c=65535:"s16"===a?(b=-32768,c=32767):"u32"===a?c=4294967295:"s32"===a?(b=-2147483648,c=2147483647):"f32"===a?(b=-3.4*1E39,c=3.4*1E39):"f64"===a&&(b=-Number.MAX_VALUE,c=Number.MAX_VALUE),c=255/(c-b);e=new Uint32Array(e);a=this.width*this.height;var g,h,k;d=g=h=v[0];if(d.length!==a)return R.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");
if(2<=v.length)if(g=v[1],3<=v.length&&(h=v[2]),null!=w&&w.length===a)for(k=0;k<a;k++)w[k]&&(e[k]=-16777216|(h[k]-b)*c<<16|(g[k]-b)*c<<8|(d[k]-b)*c);else for(k=0;k<a;k++)e[k]=-16777216|(h[k]-b)*c<<16|(g[k]-b)*c<<8|(d[k]-b)*c;else if(null!=w&&w.length===a)for(k=0;k<a;k++)g=(d[k]-b)*c,w[k]&&(e[k]=-16777216|g<<16|g<<8|g);else for(k=0;k<a;k++)g=(d[k]-b)*c,e[k]=-16777216|g<<16|g<<8|g}else R.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};q._fillFrom32Bit=
function(e){const {pixels:v,mask:w}=this;if(!e||!v||!v.length)return R.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let m,a,c,b;m=a=c=v[0];3<=v.length?(a=v[1],c=v[2]):2===v.length&&(a=v[1]);const d=this.width*this.height;if(m.length!==d)return R.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let g=0;if(null!=w&&w.length===d)for(b=0;b<d;b++)e[g++]=m[b],e[g++]=a[b],e[g++]=c[b],e[g++]=w[b]&1;
else for(b=0;b<d;b++)e[g++]=m[b],e[g++]=a[b],e[g++]=c[b],e[g++]=1};q._calculateBandStatistics=function(e,v){let w=Infinity,m=-Infinity;const a=e.length;let c,b=0;if(null!=v)for(c=0;c<a;c++)v[c]&&(b=e[c],w=b<w?b:w,m=b>m?b:m);else for(c=0;c<a;c++)b=e[c],w=b<w?b:w,m=b>m?b:m;return new D.SimpleBandStatistics(w,m)};return J._createClass(n)}(E.JSONSupport);u.__decorate([L.property({json:{write:!0}})],E.prototype,"width",void 0);u.__decorate([L.property({json:{write:!0}})],E.prototype,"height",void 0);u.__decorate([L.property({json:{write:!0}})],
E.prototype,"pixelType",void 0);u.__decorate([P.cast("pixelType")],E.prototype,"castPixelType",null);u.__decorate([L.property({json:{write:!0}})],E.prototype,"validPixelCount",void 0);u.__decorate([L.property({json:{write:!0}})],E.prototype,"mask",void 0);u.__decorate([L.property({json:{write:!0}})],E.prototype,"maskIsAlpha",void 0);u.__decorate([L.property({json:{write:!0}})],E.prototype,"pixels",void 0);u.__decorate([L.property()],E.prototype,"premultiplyAlpha",void 0);u.__decorate([L.property({json:{write:!0}})],
E.prototype,"statistics",void 0);u.__decorate([L.property({json:{write:!0}})],E.prototype,"depthCount",void 0);u.__decorate([L.property({json:{write:!0}})],E.prototype,"noDataValues",void 0);u.__decorate([L.property({json:{write:!0}})],E.prototype,"bandMasks",void 0);return E=f=u.__decorate([Q.subclass("esri.layers.support.PixelBlock")],E)})},"esri/layers/support/SimpleBandStatistics":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(J,u){u=u._createClass(function(t=
null,E=null,r=null){this.minValue=t;this.maxValue=E;this.noDataValue=r});J.SimpleBandStatistics=u;Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/pixelRangeUtils":function(){define(["exports"],function(J){function u(E){return t[E]??[-3.4028234663852886E38,3.4028234663852886E38]}const t={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4028234663852886E38,
3.4028234663852886E38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};J.convertNoDataToMask=function(E,r,R){if(!(E.depthCount&&1<E.depthCount)){var {pixels:L,statistics:P,pixelType:Q}=E,D=L[0].length,F=E.bandMasks??[],f=E.mask??(new Uint8Array(D)).fill(255),l="f32"===Q||"f64"===Q,n=u(Q),q=!1;for(let w=0;w<L.length;w++){const m="number"===typeof r?r:r[w];if(null==m)continue;var e=P?.[w].maxValue??n[1];if((P?.[w].minValue??n[0])>m+Number.EPSILON||e<m-Number.EPSILON)continue;
e=F[w]||(new Uint8Array(D)).fill(255);const a=L[w];var v=R?.customFloatTolerance;if(l&&0!==v){v||(v=9.999999E37<=Math.abs(m)?2E-7*Math.abs(m):"f32"===Q?2**-23:Number.EPSILON);for(let c=0;c<a.length;c++)e[c]&&Math.abs(a[c]-m)<v&&(a[c]=0,e[c]=0,f[c]=0,q=!0)}else for(v=0;v<a.length;v++)e[v]&&a[v]===m&&(a[v]=0,e[v]=0,f[v]=0,q=!0);F[w]=e}q&&(E.bandMasks=F,E.mask=f);q&&"updateStatistics"in E&&E.updateStatistics()}};J.getPixelValueRange=u;Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports",
"../PixelBlock","../rasterFormats/pixelRangeUtils"],function(J,u,t){function E(a){return null!=a&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length}function r(a,c,b,d,g){const h=a.length;g=u.createEmptyBand(g,h);if(c)for(let k=0;k<h;k++)c[k]&&(g[k]=b[a[k]-d]);else for(c=0;c<h;c++)g[c]=b[a[c]-d];return g}function R(a,c,b,d){const g=null!=b&&2<=b.length?new Set(b):null;b=1===b?.length?b[0]:null;const h=!!c?.length;for(let k=0;k<a.length;k++)if(d[k]){const x=a[k];if(h){let p=
!1;for(let y=0;y<c.length;y+=2)if(x>=c[y]&&x<=c[y+1]){p=!0;break}p||(d[k]=0)}d[k]&&(x===b||g?.has(x))&&(d[k]=0)}}function L(a,c){const b=a[0].length;for(let d=0;d<b;d++)if(c[d]){let g=!1;for(let h=0;h<a.length;h++)if(a[h][d]){g=!0;break}g||(c[d]=0)}}function P(a,c){const b=a[0].length;for(let d=0;d<b;d++)if(c[d]){let g=!1;for(let h=0;h<a.length;h++)if(0===a[h][d]){g=!0;break}g&&(c[d]=0)}}function Q(a,c,b,d,g,h,k,x){return{xmin:g<=b*a?0:g<b*a+a?g-b*a:a,ymin:h<=d*c?0:h<d*c+c?h-d*c:c,xmax:g+k<=b*a?0:
g+k<b*a+a?g+k-b*a:a,ymax:h+x<=d*c?0:h+x<d*c+c?h+x-d*c:c}}function D(a,c,b,d,g,h){const {width:k,height:x}=b.block,{x:p,y}=b.offset,{width:H,height:G}=b.mosaic;b=Q(k,x,d,g,p,y,H,G);let K=0;var A=0;if(h){var I=h.hasGCSSShiftTransform?360:h.halfWorldWidth??0,B=k*h.resolutionX;const z=h.startX+d*B;z<I&&z+B>I?A=h.rightPadding:z>=I&&(K=h.leftMargin-h.rightPadding,A=0)}b.xmax-=A;if("number"===typeof c)for(h=b.ymin;h<b.ymax;h++)for(A=(g*x+h-y)*H+(d*k-p)+K,I=b.xmin;I<b.xmax;I++)a[A+I]=c;else for(h=b.ymin;h<
b.ymax;h++)for(A=(g*x+h-y)*H+(d*k-p)+K,I=h*k,B=b.xmin;B<b.xmax;B++)a[A+B]=c[I+B]}function F(a,c,b={}){const {clipOffset:d,clipSize:g,alignmentInfo:h,blockWidths:k}=b;if(k)return f(a,c,{blockWidths:k});var x=a.find(W=>E(W));if(null==x)return null;b=g?g.width:c.width;const p=g?g.height:c.height;var y=x.width,H=x.height;const G=c.width/y,K=c.height/H;c={offset:d||{x:0,y:0},mosaic:g||c,block:{width:y,height:H}};y=x.pixelType;var A=u.getPixelArrayConstructor(y);x=x.pixels.length;H=[];for(var I=0;I<x;I++){var B=
new A(b*p);for(var z=0;z<K;z++)for(var M=0;M<G;M++){var S=a[z*G+M];E(S)&&(S=S.pixels[I],D(B,S,c,M,z,h))}H.push(B)}A=a.some(W=>null==W||null!=W.mask&&0<W.mask.length);B=a.some(W=>null!=W&&W.bandMasks&&1<W.bandMasks.length);A=A?new Uint8Array(b*p):void 0;B=B?[]:void 0;if(A){for(I=0;I<K;I++)for(z=0;z<G;z++)M=a[I*G+z],S=null!=M?M.mask:null,null!=S?D(A,S,c,z,I,h):M?D(A,255,c,z,I,h):D(A,0,c,z,I,h);if(B)for(I=0;I<x;I++){z=new Uint8Array(b*p);for(M=0;M<K;M++)for(S=0;S<G;S++){const W=a[M*G+S],O=W?.bandMasks?.[I]??
W?.mask;null!=O?D(z,O,c,S,M,h):W?D(z,255,c,S,M,h):D(z,0,c,S,M,h)}B.push(z)}}a=new u({width:b,height:p,pixels:H,pixelType:y,bandMasks:B,mask:A});a.updateStatistics();return a}function f(a,c,b){const d=a.find(z=>null!=z);if(null==d)return null;var g=a.some(z=>null!=z?!!z.mask:!0);const {width:h,height:k}=c;c=g?new Uint8Array(h*k):null;({blockWidths:b}=b);const x=[],p=d.getPlaneCount(),y=u.getPixelArrayConstructor(d.pixelType);if(g)for(let z=0,M=0;z<a.length;M+=b[z],z++)if(g=a[z],E(g)){var H=g.mask;
for(var G=0;G<k;G++)for(var K=0;K<b[z];K++)c[G*h+K+M]=null==H?255:H[G*g.width+K]}H=(g=a.some(z=>null!=z&&z.bandMasks&&1<z.bandMasks.length))?[]:void 0;G=h*k;for(K=0;K<p;K++){const z=new y(G),M=g?new Uint8Array(G):void 0;for(let S=0,W=0;S<a.length;W+=b[S],S++){const O=a[S];if(E(O)){var A=O.pixels[K];if(null!=A){for(var I=0;I<k;I++)for(var B=0;B<b[S];B++)z[I*h+B+W]=A[I*O.width+B];if(M)for(A=O.bandMasks?.[K]??O.mask,I=0;I<k;I++)for(B=0;B<b[S];B++)M[I*h+B+W]=A?A[I*O.width+B]:255}}}x.push(z);H&&M&&H.push(M)}a=
new u({width:h,height:k,mask:c,bandMasks:H,pixels:x,pixelType:d.pixelType});a.updateStatistics();return a}function l(a){if(!E(a))return null;const c=a.clone(),{width:b,height:d,pixels:g}=a;var h=g[0];const k=c.pixels[0];a=a.mask;for(let y=2;y<d-1;y++){const H=new Map;for(var x=y-2;x<y+2;x++)for(var p=0;4>p;p++){const G=x*b+p;e(H,h[G],a?a[G]:1)}k[y*b]=n(H);k[y*b+1]=k[y*b+2]=k[y*b];for(x=3;x<b-1;x++)p=(y-2)*b+x+1,e(H,h[p],a?a[p]:1),p=(y-1)*b+x+1,e(H,h[p],a?a[p]:1),p=y*b+x+1,e(H,h[p],a?a[p]:1),p=(y+
1)*b+x+1,e(H,h[p],a?a[p]:1),p=(y-2)*b+x-3,q(H,h[p],a?a[p]:1),p=(y-1)*b+x-3,q(H,h[p],a?a[p]:1),p=y*b+x-3,q(H,h[p],a?a[p]:1),p=(y+1)*b+x-3,q(H,h[p],a?a[p]:1),k[y*b+x]=n(H);k[y*b+x+1]=k[y*b+x]}for(h=0;h<b;h++)k[h]=k[b+h]=k[2*b+h],k[(d-1)*b+h]=k[(d-2)*b+h];c.updateStatistics();return c}function n(a){if(0===a.size)return 0;let c=0,b=-1,d=0;const g=a.keys();let h=g.next();for(;!h.done;)d=a.get(h.value),d>c&&(b=h.value,c=d),h=g.next();return b}function q(a,c,b){0!==b&&(b=a.get(c),1===b?a.delete(c):a.set(c,
b-1))}function e(a,c,b){0!==b&&a.set(c,a.has(c)?a.get(c)+1:1)}function v(a,c,b){let {x:d,y:g}=c;const {width:h,height:k}=b;if(0===d&&0===g&&k===a.height&&h===a.width)return a;const {width:x,height:p}=a;c=Math.max(0,g);const y=Math.max(0,d),H=Math.min(d+h,x),G=Math.min(g+k,p);if(0>H||0>G||!E(a))return null;d=Math.max(0,-d);g=Math.max(0,-g);var {pixels:K}=a,A=h*k,I=K.length;const B=[];for(var z=0;z<I;z++){var M=K[z],S=u.createEmptyBand(a.pixelType,A);for(let W=c;W<G;W++){const O=W*x;let N=(W+g-c)*h+
d;for(let T=y;T<H;T++)S[N++]=M[O+T]}B.push(S)}K=new Uint8Array(A);A=a.mask;for(I=c;I<G;I++)for(z=I*x,M=(I+g-c)*h+d,S=y;S<H;S++)K[M++]=A?A[z+S]:1;a=new u({width:b.width,height:b.height,pixelType:a.pixelType,pixels:B,mask:K});a.updateStatistics();return a}function w(a,c=!0){if(!E(a))return null;const {pixels:b,width:d,height:g,mask:h,pixelType:k}=a;a=[];const x=Math.round(d/2),p=Math.round(g/2),y=g-1,H=d-1;for(var G=0;G<b.length;G++){var K=b[G],A=u.createEmptyBand(k,x*p),I=0;for(var B=0;B<g;B+=2)for(var z=
0;z<d;z+=2){var M=K[B*d+z];if(c){var S=z===H?M:K[B*d+z+1];const W=B===y?M:K[B*d+z+d],O=z===H?W:B===y?S:K[B*d+z+d+1];A[I++]=(M+S+W+O)/4}else A[I++]=M}a.push(A)}G=null;if(null!=h)for(G=new Uint8Array(x*p),K=0,A=0;A<g;A+=2)for(I=0;I<d;I+=2)B=h[A*d+I],c?(z=I===H?B:h[A*d+I+1],M=A===y?B:h[A*d+I+d],S=I===H?M:A===y?z:h[A*d+I+d+1],G[K++]=B*z*M*S?1:0):G[K++]=B;return new u({width:x,height:p,pixelType:k,pixels:a,mask:G})}function m(a,c,b,d,g=0){const {width:h,height:k}=a,{width:x,height:p}=c;a=d.cols;d=d.rows;
c=Math.ceil(x/a-.1/a);const y=Math.ceil(p/d-.1/d);let H,G,K,A,I;const B=c*a;var z=B*y*d;const M=new Float32Array(z),S=new Float32Array(z),W=new Uint32Array(z),O=new Uint32Array(z);let N=0,T,V;for(let Y=0;Y<y;Y++)for(let ca=0;ca<c;ca++){var X=12*(Y*c+ca);z=b[X];H=b[X+1];G=b[X+2];K=b[X+3];A=b[X+4];I=b[X+5];for(var ba=0;ba<d;ba++){N=(Y*d+ba)*B+ca*a;V=(ba+.5)/d;for(let Z=0;Z<ba;Z++)T=(Z+.5)/a,M[N+Z]=(z*T+H*V+G)*h+g,S[N+Z]=(K*T+A*V+I)*k+g,W[N+Z]=Math.floor(M[N+Z]),O[N+Z]=Math.floor(S[N+Z])}X+=6;z=b[X];
H=b[X+1];G=b[X+2];K=b[X+3];A=b[X+4];I=b[X+5];for(X=0;X<d;X++)for(N=(Y*d+X)*B+ca*a,V=(X+.5)/d,ba=X;ba<a;ba++)T=(ba+.5)/a,M[N+ba]=(z*T+H*V+G)*h+g,S[N+ba]=(K*T+A*V+I)*k+g,W[N+ba]=Math.floor(M[N+ba]),O[N+ba]=Math.floor(S[N+ba])}return{offsets_x:M,offsets_y:S,offsets_xi:W,offsets_yi:O,gridWidth:B}}J.NoDataInterpretation=void 0;(function(a){a[a.matchAny=0]="matchAny";a[a.matchAll=1]="matchAll"})(J.NoDataInterpretation||(J.NoDataInterpretation={}));J.MissingBandAction=void 0;(function(a){a[a.bestMatch=0]=
"bestMatch";a[a.fail=1]="fail"})(J.MissingBandAction||(J.MissingBandAction={}));J.MAX_MAP_SIZE_GPU=6;J.approximateTransform=function(a,c,b,d,g="nearest"){if(!E(a))return null;"majority"===g&&(a=l(a));const {pixels:h,mask:k,bandMasks:x,pixelType:p}=a,y=a.width;var H=a.height;const G=u.getPixelArrayConstructor(p),K=h.length,{width:A,height:I}=c;a=!1;for(var B=0;B<b.length;B+=3)-1===b[B]&&-1===b[B+1]&&-1===b[B+2]&&(a=!0);const {offsets_x:z,offsets_y:M,offsets_xi:S,offsets_yi:W,gridWidth:O}=m({width:y,
height:H},c,b,d,"majority"===g?.5:0);let N;c=(V,X,ba,Y)=>{const ca=V instanceof Float32Array||V instanceof Float64Array?0:.5;for(let Z=0;Z<I;Z++){N=Z*O;for(let ea=0;ea<A;ea++){if(0>z[N]||0>M[N])V[Z*A+ea]=0;else if(Y)V[Z*A+ea]=X[S[N]+W[N]*y];else{const fa=Math.floor(z[N]),ha=Math.floor(M[N]),la=Math.ceil(z[N]),ia=Math.ceil(M[N]),qa=z[N]-fa,na=M[N]-ha;V[Z*A+ea]=!ba||ba[fa+ha*y]&&ba[la+ha*y]&&ba[fa+ia*y]&&ba[la+ia*y]?(1-na)*((1-qa)*X[fa+ha*y]+qa*X[la+ha*y])+na*((1-qa)*X[fa+ia*y]+qa*X[la+ia*y])+ca:X[S[N]+
W[N]*y]}N++}}};b=[];d=x?.length===K;H=[];for(B=0;B<K;B++){if(d){var T=new Uint8Array(A*I);c(T,x[B],x[B],!0);H.push(T)}T=new G(A*I);c(T,h[B],d?x[B]:k,"nearest"===g||"majority"===g);b.push(T)}g=new u({width:A,height:I,pixelType:p,pixels:b,bandMasks:d?H:void 0});if(null!=k)g.mask=new Uint8Array(A*I),c(g.mask,k,k,!0);else if(a)for(g.mask=new Uint8Array(A*I),a=0;a<A*I;a++)g.mask[a]=0>z[a]||0>M[a]?0:1;g.updateStatistics();return g};J.clip=v;J.colorize=function(a,c){if(!E(a)||!c||!c.indexedColormap&&!c.indexed2DColormap)return a;
const b=a.clone();var d=b.pixels;let g=b.mask;const h=b.width*b.height;if(1!==d.length)return a;const {indexedColormap:k,indexed2DColormap:x,offset:p,alphaSpecified:y}=c;a=0;d=d[0];c=new Uint8Array(d.length);const H=new Uint8Array(d.length),G=new Uint8Array(d.length);var K=0;if(k){const A=k.length-1;if(null!=g)for(a=0;a<h;a++)g[a]&&(K=4*(d[a]-p),K<p||K>A?g[a]=0:(c[a]=k[K],H[a]=k[K+1],G[a]=k[K+2],g[a]=k[K+3]));else{g=new Uint8Array(h);for(a=0;a<h;a++)K=4*(d[a]-p),K<p||K>A?g[a]=0:(c[a]=k[K],H[a]=k[K+
1],G[a]=k[K+2],g[a]=k[K+3]);b.mask=g}}else if(x)if(null!=g)for(a=0;a<h;a++)g[a]&&(K=x[d[a]],c[a]=K[0],H[a]=K[1],G[a]=K[2],g[a]=K[3]);else{g=new Uint8Array(h);for(a=0;a<h;a++)K=x[d[a]],c[a]=K[0],H[a]=K[1],G[a]=K[2],g[a]=K[3];b.mask=g}b.pixels=[c,H,G];b.statistics=null;b.pixelType="u8";b.maskIsAlpha=y;return b};J.compositeBands=function(a){if(!a?.length||a.some(p=>!E(p)))return null;if(1===a.length)return a[0]?.clone()??null;const {width:c,height:b,pixelType:d}=a[0];if(a.some(p=>p.width!==c||p.height!==
b))return null;const g=a.map(({mask:p})=>p).filter(p=>null!=p);let h=null;g.length&&(h=new Uint8Array(c*b),h.set(g[0]),1<g.length&&P(g.slice(1),h));const k=[];a.forEach(({pixels:p})=>k.push(...p));const x=[];a.map(({statistics:p})=>p).filter(p=>p?.length).forEach(p=>x.push(...p));return new u({pixelType:d,width:c,height:b,mask:h,pixels:k,statistics:x.length?x:null})};J.createColormapLUT=function(a){if(a){var c=a.colormap;if(c&&0!==c.length){c=c.sort((y,H)=>y[0]-H[0]);var b=0;0>c[0][0]&&(b=c[0][0]);
var d=Math.max(256,c[c.length-1][0]-b+1),g=new Uint8Array(4*d),h=[],k=0,x=0,p=5===c[0].length;if(65536<d)return c.forEach(y=>{h[y[0]-b]=p?y.slice(1):y.slice(1).concat([255])}),{indexed2DColormap:h,offset:b,alphaSpecified:p};if(a.fillUnspecified)for(a=c[x],k=a[0]-b;k<d;k++)g[4*k]=a[1],g[4*k+1]=a[2],g[4*k+2]=a[3],g[4*k+3]=p?a[4]:255,k===a[0]-b&&(a=x===c.length-1?a:c[++x]);else for(k=0;k<c.length;k++)a=c[k],x=4*(a[0]-b),g[x]=a[1],g[x+1]=a[2],g[x+2]=a[3],g[x+3]=p?a[4]:255;return{indexedColormap:g,offset:b,
alphaSpecified:p}}}};J.createMaskLUT=function(a,c,b){if("u8"!==a&&"s8"!==a&&"u16"!==a&&"s16"!==a)return null;var d=a.includes("16")?65536:256;a=a.includes("s")?-d/2:0;d=new Uint8Array(d);if(c)for(let h=0;h<c.length;h++){var g=Math.ceil(c[2*h]-a);const k=Math.floor(c[2*h+1]-a);for(;g<=k;g++)d[g]=255}else d.fill(255);if(b)for(c=0;c<b.length;c++)d[b[c]-a]=0;return{lut:d,offset:a}};J.createRemapLUT=function(a){const {srcPixelType:c,inputRanges:b,outputValues:d,allowUnmatched:g,noDataRanges:h,isLastInputRangeInclusive:k,
outputPixelType:x}=a;if("u8"!==c&&"s8"!==c&&"u16"!==c&&"s16"!==c)return null;var p=c.includes("16")?65536:256;a=c.includes("s")?-p/2:0;const y=u.createEmptyBand(x,p);p=new Uint8Array(p);g&&p.fill(255);const [H,G]=t.getPixelValueRange(x);if(b?.length&&d?.length){var K=b.map(z=>z-1E-6);K[0]=b[0];k&&(K[K.length-1]=b[b.length-1]);for(var A=0;A<K.length;A++){var I=d[A]>G?G:d[A]<H?H:d[A],B=Math.ceil(K[2*A]-a);const z=Math.floor(K[2*A+1]-a);for(;B<=z;B++)y[B]=I,p[B]=255}}if(h?.length)for(K=0;K<h.length;K++)for(I=
Math.ceil(h[2*K]-a),A=Math.floor(h[2*K+1]-a);I<=A;I++)p[I]=0;return{lut:y,offset:a,mask:p}};J.extractBands=function(a,c){return c?.length&&E(a)?a.extractBands(c):a};J.getClipBounds=Q;J.getLocalArithmeticNorthRotations=function(a,c){const {coefficients:b,spacing:d}=c,{offsets_x:g,offsets_y:h,gridWidth:k}=m(a,a,b,{rows:d[0],cols:d[1]}),{width:x,height:p}=a;a=new Float32Array(x*p);c=180/Math.PI;for(let G=0;G<p;G++)for(let K=0;K<x;K++){var y=G*k+K,H=0===G?y:y-k;const A=G===p-1?y:y+k;y=g[H]-g[A];H=h[A]-
h[H];isNaN(y)||isNaN(H)?a[G*x+K]=90:(H=Math.atan2(H,y)*c,H=(360+H)%360,a[G*x+K]=H)}return a};J.interpolateOffsets=m;J.isValidPixelBlock=E;J.lookupBandValues=r;J.lookupPixels=function(a,c){if(!E(a))return null;const {pixels:b,mask:d}=a,g=b.length;let h=c.lut;const {offset:k}=c;h&&1===h[0].length&&(h=b.map(()=>h));const x=[];c=c.outputPixelType||"u8";for(let p=0;p<g;p++){const y=r(b[p],d,h[p],k||0,c);x.push(y)}a=new u({width:a.width,height:a.height,pixels:x,mask:d,pixelType:c});a.updateStatistics();
return a};J.mask=function(a,c){if(!E(a))return null;const {width:b,height:d,pixels:g}=a;var h=b*d;const k=new Uint8Array(h);a.mask?k.set(a.mask):k.fill(255);a=g.length;const {includedRanges:x,noDataValues:p,outputPixelType:y,matchAll:H,lookups:G}=c;if(G){h=[];for(c=0;c<a;c++){var K=G[c];K=r(g[c],k,K.lut,K.offset||0,"u8");h.push(K)}1===h.length?k.set(h[0]):H?L(h,k):P(h,k)}else if(H){c=[];for(K=0;K<a;K++){const A=new Uint8Array(h);A.set(k);R(g[K],x?.slice(2*K,2*K+2),p?.[K],A);c.push(A)}1===c.length?
k.set(c[0]):L(c,k)}else for(h=0;h<a;h++)R(g[h],x?.slice(2*h,2*h+2),p?.[h],k);return new u({width:b,height:d,pixelType:y,pixels:g,mask:k})};J.mosaic=F;J.mosaicPixelData=function(a,c){if(!a||0===a.length)return null;var b=a.find(G=>G.pixelBlock);if(!b||null==b.pixelBlock)return null;var d=(b.extent.xmax-b.extent.xmin)/b.pixelBlock.width;const g=(b.extent.ymax-b.extent.ymin)/b.pixelBlock.height,h=.01*Math.min(d,g),k=a.sort((G,K)=>Math.abs(G.extent.ymax-K.extent.ymax)>h?K.extent.ymax-G.extent.ymax:Math.abs(G.extent.xmin-
K.extent.xmin)>h?G.extent.xmin-K.extent.xmin:0);var x=Math.min.apply(null,k.map(G=>G.extent.xmin));const p=Math.min.apply(null,k.map(G=>G.extent.ymin)),y=Math.max.apply(null,k.map(G=>G.extent.xmax)),H=Math.max.apply(null,k.map(G=>G.extent.ymax));a={x:Math.round((c.xmin-x)/d),y:Math.round((H-c.ymax)/g)};x={width:Math.round((y-x)/d),height:Math.round((H-p)/g)};d={width:Math.round((c.xmax-c.xmin)/d),height:Math.round((c.ymax-c.ymin)/g)};if(Math.round(x.width/b.pixelBlock.width)*Math.round(x.height/b.pixelBlock.height)!==
k.length||0>a.x||0>a.y||x.width<d.width||x.height<d.height)return null;b=k.map(G=>G.pixelBlock);b=F(b,x,{clipOffset:a,clipSize:d});return{extent:c,pixelBlock:b}};J.remap=function(a,c){if(!E(a))return null;const {width:b,height:d}=a,{inputRanges:g,outputValues:h,outputPixelType:k,noDataRanges:x,allowUnmatched:p,isLastInputRangeInclusive:y}=c;c=a.pixels[0];const H=u.createEmptyBand(k,c.length),G=a.mask,K=new Uint8Array(b*d);G?K.set(G):K.fill(255);const A=a.pixelType.startsWith("f")?1E-6:0;a=g.map(N=>
N-A);a[0]=g[0];a[a.length-1]=g[g.length-1]+(y?1E-6:0);var I=g.length/2;const [B,z]=t.getPixelValueRange(k);for(var M=0;M<d;M++)for(var S=0;S<b;S++){var W=M*b+S;if(K[W]){var O=c[W];let N=!1;for(let T=I-1;0<=T;T--)if(O===a[2*T]||O>a[2*T]&&O<a[2*T+1]){H[W]=h[T];N=!0;break}N||(p?H[W]=O>z?z:O<B?B:O:K[W]=0)}}if(a=x?.length)for(I=0;I<d;I++)for(M=0;M<b;M++)if(S=I*b+M,!G||G[S])for(W=c[S],O=0;O<a;O+=2)if(W>=x[O]&&W<=x[O+1]){H[S]=0;K[S]=0;break}return new u({width:b,height:d,pixelType:k,pixels:[H],mask:K})};
J.remapColor=function(a,c){if(!E(a))return null;a=a.clone();var {pixels:b}=a;const d=a.width*a.height,g=c.length,h=Math.floor(g/2),k=c[Math.floor(h)];b=b[0];let x,p,y,H,G,K,A=!1;const I=new Uint8Array(d),B=new Uint8Array(d),z=new Uint8Array(d);let M=a.mask;const S=4===c[0].mappedColor.length;M||(M=new Uint8Array(d),M.fill(S?255:1),a.mask=M);for(G=0;G<d;G++)if(M[G]){x=b[G];A=!1;K=h;p=k;y=0;for(H=g-1;1<H-y;){if(x===p.value){A=!0;break}x>p.value?y=K:H=K;K=Math.floor((y+H)/2);p=c[Math.floor(K)]}A||(x===
c[y].value?(p=c[y],A=!0):x===c[H].value?(p=c[H],A=!0):x<c[y].value?(A=!1,p=null):x>c[y].value&&(x<c[H].value?(p=c[y],A=!0):H===g-1?(A=!1,p=null):(p=c[H],A=!0)));A?(I[G]=p.mappedColor[0],B[G]=p.mappedColor[1],z[G]=p.mappedColor[2],M[G]=p.mappedColor[3]):I[G]=B[G]=z[G]=M[G]=0}a.pixels=[I,B,z];a.mask=M;a.pixelType="u8";a.maskIsAlpha=S;return a};J.resampleByMajority=l;J.setValidBoundary=function(a,c,b){if(!E(a))return null;const {width:d,height:g}=a,h=c.x;c=c.y;const k=b.width+h;b=b.height+c;if(0>h||
0>c||k>d||b>g||0===h&&0===c&&k===d&&b===g)return a;a.mask||(a.mask=new Uint8Array(d*g));const x=a.mask;for(let p=0;p<g;p++){const y=p*d;for(let H=0;H<d;H++)x[y+H]=p<c||p>=b||H<h||H>=k?0:1}a.updateStatistics();return a};J.split=function(a,c,b){if(!E(a))return null;const {width:d,height:g}=c;let {width:h,height:k}=a;const x=new Map,p={x:0,y:0};b=null==b?1:1+b;for(let y=0;y<b;y++){const H=Math.ceil(h/d),G=Math.ceil(k/g);for(let K=0;K<G;K++){p.y=K*g;for(let A=0;A<H;A++){p.x=A*d;const I=v(a,p,c);x.set(`${y}/${K}/${A}`,
I)}}y<b-1&&(a=w(a));h=Math.round(h/2);k=Math.round(k/2)}return x};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./cimSymbolUtils ./gfxUtils ./Symbol3DMaterial".split(" "),function(J,u,t,E,r,R,L,P,Q,D,F,f,l){function n(h){h=h.symbolLayers;if(!h)return null;let k=null;
h.forEach(x=>{"object"===x.type&&x.resource?.href||(k="water"===x.type?x.color:x.material?x.material.color:null)});return k?new t(k):null}function q(h,k){if(null==k||null==h)return h;h=h.toRgba();h[3]*=k;return new t(h)}function e(h,k,x){if(h=h.symbolLayers){var p=y=>{k=k??y??(null!=x?g:null);return q(k,x)};h.forEach(y=>{if("object"!==y.type||!y.resource?.href||k)if("water"===y.type)y.color=p(y.color);else{const H=p(null!=y.material?y.material.color:null);null==y.material?y.material=new l.Symbol3DMaterial({color:H}):
y.material.color=H;null!=x&&"outline"in y&&null!=y.outline&&null!=y.outline.color&&(y.outline.color=q(y.outline.color,x))}})}}async function v(h,k){(h=h.symbolLayers)&&await r.forEach(h,async x=>w(x,k))}async function w(h,k){switch(h.type){case "extrude":h.size="number"===typeof k[2]?k[2]:0;break;case "icon":case "line":case "text":k=m(k);null!=k&&(h.size=k);break;case "path":const x=c(k,Q.ONES,[h.width,void 0,h.height]);h.width=d(k[0],h.width,1,x);h.height=d(k[2],h.height,1,x);break;case "object":await a(h,
k)}}function m(h){for(const k of h)if("number"===typeof k)return k;return null}async function a(h,k){const {resourceSize:x,symbolSize:p}=await b(h),y=c(k,x,p);h.width=d(k[0],p[0],x[0],y);h.depth=d(k[1],p[1],x[1],y);h.height=d(k[2],p[2],x[2],y)}function c(h,k,x){for(let p=0;3>p;p++){const y=h[p];switch(y){case "symbol-value":return h=x[p],null!=h?h/k[p]:1;case "proportional":break;default:if(y&&k[p])return y/k[p]}}return 1}async function b(h){var {computeObjectLayerResourceSize:k}=await new Promise((K,
A)=>J(["./symbolLayerUtils"],K,A));k=await k(h,10);const {width:x,height:p,depth:y}=h;h=[x,y,p];let H=1;for(var G=0;3>G;G++){const K=h[G];if(null!=K){H=K/k[G];break}}for(G=0;3>G;G++)null==h[G]&&(h[G]=k[G]*H);return{resourceSize:k,symbolSize:h}}function d(h,k,x,p){switch(h){case "proportional":return x*p;case "symbol-value":return null!=k?k:x;default:return h}}const g=new t("white");u.applyColorToSymbol=function(h,k,x){if(h&&(k||null!=x))if(k&&(k=new t(k)),E.isSymbol3D(h))e(h,k,x);else if(E.isSymbol2D(h)){if(k=
k??h.color)h.color=q(k,x);null!=x&&"outline"in h&&h.outline&&h.outline.color&&(h.outline.color=q(h.outline.color,x))}};u.applyOpacityToColor=q;u.applyRotationToSymbol=function(h,k,x){h&&null!=k&&(E.isSymbol3D(h)?(h=h.symbolLayers)&&h.forEach(p=>{if(p&&"object"===p.type)switch(x){case "tilt":p.tilt=k;break;case "roll":p.roll=k;break;default:p.heading=k}}):!E.isSymbol2D(h)||"simple-marker"!==h.type&&"picture-marker"!==h.type&&"text"!==h.type||(h.angle=k))};u.applySizesToSymbol=async function(h,k){if(h&&
k){if(E.isSymbol3D(h))return v(h,k);if(E.isSymbol2D(h)&&(k=m(k),null!=k))switch(h.type){case "simple-marker":h.size=k;break;case "picture-marker":const x=h.width/h.height;1<x?(h.width=k,h.height=k*x):(h.width=k*x,h.height=k);break;case "simple-line":h.width=k;break;case "text":h.font.size=k}}};u.fetchWebStyleSymbol=async function(h,k){const x=await h.fetchSymbol(k);return x?x:h.fetchCIMSymbol(k)};u.getCSSFilterFromEffectList=function(h){if(!h)return null;h=h.effects.filter(k=>"bloom"!==k.type).map(k=>
k.toJSON());return D.effectFunctionsFromJSON(h)};u.getColorFromSymbol=function(h,k){if(!h)return null;let x=null;E.isSymbol3D(h)?x=n(h):E.isSymbol2D(h)&&(x="cim"===h.type?F.getCIMSymbolColor(h):h.color?new t(h.color):null);return x?q(x,k):null};u.getIconHref=function(h){return L.unwrapOrThrow(h.resource).href};u.getSymbolOutlineSize=function(h){return h?E.isSymbol3D(h)?(h=(h=h.symbolLayers?.at(-1))&&"outline"in h?h?.outline?.size:void 0,null!=h?h:0):P.px2pt(f.getStroke(h)?.width):0};u.isVolumetricSymbol=
function(h){if(null==h||!("symbolLayers"in h)||null==h.symbolLayers)return!1;switch(h.type){case "point-3d":return h.symbolLayers.some(k=>"object"===k.type);case "line-3d":return h.symbolLayers.some(k=>"path"===k.type);case "polygon-3d":return h.symbolLayers.some(k=>"object"===k.type||"extrude"===k.type);default:return!1}};u.symbolHasExtrudeSymbolLayer=function(h){return null!=h&&"polygon-3d"===h.type&&h.symbolLayers.some(k=>"extrude"===k.type)};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},
"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(J,u,t){function E(f){f=t.toCIMSymbolJSON(f);if("CIMTextSymbol"===f?.type)return f.height??0;let l=0;if(f?.symbolLayers)for(const n of f.symbolLayers)t.isCIMMarker(n)&&null!=n.size&&n.size>l?l=n.size:t.isCIMStroke(n)&&null!=n.width&&n.width>l?l=n.width:t.isCIMFill(n);return l}function r(f,l,n,q){if(f)if("CIMTextSymbol"===f.type)null!=f.height&&(f.height*=l);else{if(n&&f.effects)for(const e of f.effects)P(e,
l);if(f.symbolLayers)for(const e of f.symbolLayers)switch(e.type){case "CIMPictureMarker":case "CIMVectorMarker":R(e,l,q);break;case "CIMPictureStroke":case "CIMSolidStroke":!q?.preserveOutlineWidth&&e.width&&(e.width*=l);break;case "CIMPictureFill":e.height&&(e.height*=l);e.offsetX&&(e.offsetX*=l);e.offsetY&&(e.offsetY*=l);break;case "CIMHatchFill":r(e.lineSymbol,l,!0,{...q,preserveOutlineWidth:!1}),e.offsetX&&(e.offsetX*=l),e.offsetY&&(e.offsetY*=l),e.separation&&(e.separation*=l)}}}function R(f,
l,n){if(f&&(f.markerPlacement&&L(f.markerPlacement,l),f.offsetX&&(f.offsetX*=l),f.offsetY&&(f.offsetY*=l),f.anchorPoint&&"Absolute"===f.anchorPointUnits&&(f.anchorPoint={x:f.anchorPoint.x*l,y:f.anchorPoint.y*l}),f.size=null!=f.size?f.size*l:0,"CIMVectorMarker"===f.type&&f.markerGraphics))for(const q of f.markerGraphics)f.scaleSymbolsProportionally||r(q.symbol,l,!0,n)}function L(f,l){t.isCIMMarkerStrokePlacement(f)&&f.offset&&(f.offset*=l);switch(f.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":f.customEndingOffset&&
(f.customEndingOffset*=l);f.offsetAlongLine&&(f.offsetAlongLine*=l);if(f.placementTemplate&&f.placementTemplate.length){var n=f.placementTemplate.map(q=>q*l);f.placementTemplate=n}break;case "CIMMarkerPlacementAlongLineVariableSize":f.maxRandomOffset&&(f.maxRandomOffset*=l);f.placementTemplate&&f.placementTemplate.length&&(n=f.placementTemplate.map(q=>q*l),f.placementTemplate=n);break;case "CIMMarkerPlacementOnLine":f.startPointOffset&&(f.startPointOffset*=l);break;case "CIMMarkerPlacementAtExtremities":f.offsetAlongLine&&
(f.offsetAlongLine*=l);break;case "CIMMarkerPlacementAtRatioPositions":f.beginPosition&&(f.beginPosition*=l);f.endPosition&&(f.endPosition*=l);break;case "CIMMarkerPlacementPolygonCenter":f.offsetX&&(f.offsetX*=l);f.offsetY&&(f.offsetY*=l);break;case "CIMMarkerPlacementInsidePolygon":f.offsetX&&(f.offsetX*=l),f.offsetY&&(f.offsetY*=l),f.stepX&&(f.stepX*=l),f.stepY&&(f.stepY*=l)}}function P(f,l){switch(f.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":f.width&&(f.width*=l);break;
case "CIMGeometricEffectBuffer":f.size&&(f.size*=l);break;case "CIMGeometricEffectCut":f.beginCut&&(f.beginCut*=l);f.endCut&&(f.endCut*=l);f.middleCut&&(f.middleCut*=l);break;case "CIMGeometricEffectDashes":f.customEndingOffset&&(f.customEndingOffset*=l);f.offsetAlongLine&&(f.offsetAlongLine*=l);if(f.dashTemplate&&f.dashTemplate.length){const n=f.dashTemplate.map(q=>q*l);f.dashTemplate=n}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":f.length&&
(f.length*=l);break;case "CIMGeometricEffectMove":f.offsetX&&(f.offsetX*=l);f.offsetY&&(f.offsetY*=l);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":f.offset&&(f.offset*=l);break;case "CIMGeometricEffectRegularPolygon":f.radius&&(f.radius*=l);break;case "CIMGeometricEffectTaperedPolygon":f.fromWidth&&(f.fromWidth*=l);f.length&&(f.length*=l);f.toWidth&&(f.toWidth*=l);break;case "CIMGeometricEffectWave":f.amplitude&&(f.amplitude*=l),f.period&&(f.period*=l)}}function Q(f,
l){if(f){var n="CIMTextSymbol"===f.type?f.symbol:f;f="CIMPolygonSymbol"===f.type;if(n?.symbolLayers)for(const q of n.symbolLayers)if(!(q.colorLocked||f&&(t.isCIMStroke(q)||t.isCIMMarker(q)&&q.markerPlacement&&t.isCIMMarkerStrokePlacement(q.markerPlacement))))switch(q.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":q.tintColor&&D(l,q.tintColor);break;case "CIMVectorMarker":q.markerGraphics?.forEach(e=>{Q(e.symbol,l)});break;case "CIMSolidStroke":case "CIMSolidFill":D(l,
q.color);break;case "CIMHatchFill":Q(q.lineSymbol,l)}}}function D(f,l){for(const n of f)if(n.join(".")===l.join("."))return;f.push(l)}function F(f,l,n){if(f){var q="CIMTextSymbol"===f.type?f.symbol:f;f="CIMPolygonSymbol"===q?.type;if(q?.symbolLayers)for(const e of q.symbolLayers)if(!e.colorLocked){if(f)if(n){if({layersToColor:q}=n,(t.isCIMStroke(e)||t.isCIMMarker(e)&&e.markerPlacement&&t.isCIMMarkerStrokePlacement(e.markerPlacement))&&"fill"===q||t.isCIMFill(e)&&"outline"===q)continue}else if(t.isCIMStroke(e)||
t.isCIMMarker(e)&&e.markerPlacement&&t.isCIMMarkerStrokePlacement(e.markerPlacement))continue;q=l.toArray();switch(e.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":e.tintColor=q;break;case "CIMVectorMarker":e.markerGraphics?.forEach(v=>{F(v.symbol,l,n)});break;case "CIMSolidStroke":case "CIMSolidFill":e.color=q;break;case "CIMHatchFill":F(e.lineSymbol,l,n)}}}}J.applyCIMSymbolColor=function(f,l,n){l instanceof u||(l=new u(l));(f=t.toCIMSymbolJSON(f))&&F(f,l,n)};J.applyCIMSymbolRotation=
function(f,l,n=!1){f=t.toCIMSymbolJSON(f);n&&0!==l&&(l=360-l);if("CIMTextSymbol"===f?.type)f.angle=l;else if("CIMPointSymbol"===f?.type&&f.symbolLayers){n=l-(f.angle||0);for(const q of f.symbolLayers)if(t.isCIMMarker(q)){let e=q.rotation||0;e=q.rotateClockwise?e-n:e+n;q.rotation=e}f.angle=l}};J.getCIMSymbolColor=function(f){f=t.toCIMSymbolJSON(f);const l=[];Q(f,l);return l.length?new u(t.fromCIMColor(l[0])):null};J.getCIMSymbolRotation=function(f,l=!1){f=t.toCIMSymbolJSON(f);return"CIMTextSymbol"===
f?.type||"CIMPointSymbol"===f?.type?(f=f.angle,null!=f&&0!==f&&l?360-f:f??0):0};J.getCIMSymbolSize=E;J.getCIMSymbolType=function(f){f=t.toCIMSymbolJSON(f);if(!f)return null;switch(f.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};J.scaleCIMMarker=R;J.scaleCIMSymbol=r;J.scaleCIMSymbolTo=function(f,
l,n){if(f){var q=t.toCIMSymbolJSON(f);f=E(f);if(0===f){if(q)if("CIMTextSymbol"===q.type)q.height=l;else if(q.symbolLayers)for(const e of q.symbolLayers)switch(e.type){case "CIMPictureMarker":case "CIMVectorMarker":e.size=l;break;case "CIMPictureStroke":case "CIMSolidStroke":e.width=l}}else r(q,l/f,!1,n)}};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(J,u){function t(f){return"function"===typeof f}function E(f){let l=
f.length;for(;l--;)if(!" /-,\n".includes(f.charAt(l)))return!1;return!0}function r(f,l){const n=[];var q=0;let e=-1;do e=f.indexOf("[",q),e>=q&&(e>q&&(q=f.substr(q,e-q),n.push([q,null,E(q)])),q=e+1,e=f.indexOf("]",q),e>=q&&(e>q&&(q=f.substr(q,e-q),(q=l[q])&&n.push([null,q,!1])),q=e+1));while(-1!==e);q<f.length-1&&(f=f.substr(q),n.push([f,null,E(f)]));return n}function R(f,l,n){let q="",e=null;for(const v of l){const [w,m,a]=v;if(w)a?e=w:(e&&(q+=e,e=null),q+=w);else if(l=f.attributes[m])e&&(q+=e,e=
null),q+=l}return L(q,n)}function L(f,l){"string"!==typeof f&&(f=String(f));switch(l){case "LowerCase":return f.toLowerCase();case "Allcaps":return f.toUpperCase();default:return f}}function P(f){return f?{r:f[0],g:f[1],b:f[2],a:f[3]/255}:{r:0,g:0,b:0,a:0}}function Q(f){if(!f)return null;switch(f.type){case "CIMPolygonSymbol":if(f.symbolLayers)for(const l of f.symbolLayers)if(f=Q(l),null!=f)return f;break;case "CIMTextSymbol":return Q(f.symbol);case "CIMSolidFill":return f.color}}function D(f){if(f)switch(f.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(f=
f.symbolLayers)for(const l of f)if(f=D(l),null!=f)return f;break;case "CIMTextSymbol":return D(f.symbol);case "CIMSolidStroke":return f.color}}function F(f){if(f)switch(f.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(f.symbolLayers)for(const l of f.symbolLayers)if(f=F(l),void 0!==f)return f;break;case "CIMTextSymbol":return F(f.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return f.width}}u.adjustTextCase=L;u.analyzeTextParts=r;u.assignTextValuesFromFeature=
R;u.attributesToFields=function(f){return(f?Object.keys(f):[]).map(l=>({name:l,alias:l,type:"string"===typeof f[l]?"esriFieldTypeString":"esriFieldTypeDouble"}))};u.colorToArray=function(f){return[f.r,f.g,f.b,f.a]};u.createLabelOverrideFunction=function(f,l,n){const q=r(l,f);return e=>R(e,q,n)};u.evaluateValueOrFunction=function(f,l,n,q){return t(f)?f(l,n,q):f};u.fromCIMColor=P;u.fromCIMFontDecoration=function(f){return f.underline?"underline":f.strikethrough?"line-through":"none"};u.fromCIMFontStyle=
function(f){let l="normal",n="normal";f&&(f=f.toLowerCase(),f.includes("italic")?l="italic":f.includes("oblique")&&(l="oblique"),f.includes("bold")?n="bold":f.includes("light")&&(n="lighter"));return{style:l,weight:n}};u.fromCIMHorizontalAlignment=function(f){switch(f){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"center"}};u.fromCIMVerticalAlignment=function(f){switch(f){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";
case "Bottom":return"bottom"}};u.getFillColor=Q;u.getFontStyle=function(f){if(!f)return"normal";switch(f.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};u.getFontWeight=function(f){if(!f)return"normal";switch(f.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";default:return"normal"}};u.getStrokeColor=D;u.getStrokeWidth=F;u.getTintColor=f=>f.tintColor?P(f.tintColor):{r:255,g:255,b:255,a:1};u.getValue=
(f,l=0)=>null==f||isNaN(f)?l:f;u.importGeometryEngine=function(){return new Promise((f,l)=>J(["../../geometry/geometryEngineJSON"],f,l))};u.isCIMFill=function(f){return null!=f&&("CIMGradientFill"===f.type||"CIMHatchFill"===f.type||"CIMPictureFill"===f.type||"CIMSolidFill"===f.type||"CIMWaterFill"===f.type)};u.isCIMMarker=function(f){return"CIMVectorMarker"===f.type||"CIMPictureMarker"===f.type||"CIMBarChartMarker"===f.type||"CIMCharacterMarker"===f.type||"CIMPieChartMarker"===f.type||"CIMStackedBarChartMarker"===
f.type};u.isCIMMarkerStrokePlacement=function(f){return null!=f&&("CIMMarkerPlacementAlongLineRandomSize"===f.type||"CIMMarkerPlacementAlongLineSameSize"===f.type||"CIMMarkerPlacementAlongLineVariableSize"===f.type||"CIMMarkerPlacementAtExtremities"===f.type||"CIMMarkerPlacementAtMeasuredUnits"===f.type||"CIMMarkerPlacementAtRatioPositions"===f.type||"CIMMarkerPlacementOnLine"===f.type||"CIMMarkerPlacementOnVertices"===f.type)};u.isCIMStroke=function(f){return"CIMGradientStroke"===f.type||"CIMPictureStroke"===
f.type||"CIMSolidStroke"===f.type};u.isFeatureValueFn=t;u.isGeometryEngineRequired=f=>{if(!f)return!1;for(const l of f)switch(l.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":case "CIMGeometricEffectDonut":return!0}return!1};u.isSVGImage=f=>f.includes("data:image/svg+xml");u.mapCIMSymbolToGeometryType=function(f){if(!f)return null;switch(f.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";
default:return null}};u.resampleHermite=function(f,l,n,q,e,v,w=!0){const m=l/e;n/=v;const a=Math.ceil(m/2),c=Math.ceil(n/2);for(let g=0;g<v;g++)for(let h=0;h<e;h++){const k=4*(h+(w?v-g-1:g)*e);var b=0;let x=0,p=0,y=0,H=0,G=0,K=0;const A=(g+.5)*n;for(let I=Math.floor(g*n);I<(g+1)*n;I++){var d=Math.abs(A-(I+.5))/c;const B=(h+.5)*m;d*=d;for(let z=Math.floor(h*m);z<(h+1)*m;z++){let M=Math.abs(B-(z+.5))/a;b=Math.sqrt(d+M*M);-1<=b&&1>=b&&(b=2*b*b*b-3*b*b+1,0<b&&(M=4*(z+I*l),K+=b*f[M+3],p+=b,255>f[M+3]&&
(b=b*f[M+3]/250),y+=b*f[M],H+=b*f[M+1],G+=b*f[M+2],x+=b))}}q[k]=y/x;q[k+1]=H/x;q[k+2]=G/x;q[k+3]=K/p}};u.toCIMSymbolJSON=function(f){return f.data?.symbol??null};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/LRUCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(J,u,t,E,r,R,L){function P(F){if(!F)return null;let f=null;switch(F.type){case "simple-fill":case "picture-fill":case "simple-marker":f=
P(F.outline);break;case "simple-line":const l=R.pt2px(F.width);null!=F.style&&"none"!==F.style&&0!==l&&(f={color:F.color,style:D(F.style),width:l,cap:F.cap,join:"miter"===F.join?R.pt2px(F.miterLimit):F.join});break;default:f=null}return f}const Q=new r.LRUCache(1E3),D=(()=>{const F={};return f=>{if(F[f])return F[f];const l=f.replaceAll("-","");return F[f]=l}})();t=new t([128,128,128]);J.defaultThematicColor=t;J.dekebabifyLineStyle=D;J.getFill=function(F){const f=F.style;let l=null;if(F)switch(F.type){case "simple-marker":"cross"!==
f&&"x"!==f&&(l=F.color);break;case "simple-fill":"solid"===f?l=F.color:"none"!==f&&(l={type:"pattern",x:0,y:0,src:u.getAssetUrl(`esri/symbols/patterns/${f}.png`),width:5,height:5});break;case "picture-fill":l={type:"pattern",src:F.url,width:R.pt2px(F.width)*F.xscale,height:R.pt2px(F.height)*F.yscale,x:R.pt2px(F.xoffset),y:R.pt2px(F.yoffset)};break;case "text":l=F.color;break;case "cim":l=L.getCIMSymbolColor(F)}return l};J.getPatternUrlWithColor=function(F,f){const l=F+"-"+f;return void 0!==Q.get(l)?
Promise.resolve(Q.get(l)):E(F,{responseType:"image"}).then(n=>{n=n.data;const q=n.naturalWidth,e=n.naturalHeight,v=document.createElement("canvas");v.width=q;v.height=e;const w=v.getContext("2d");w.fillStyle=f;w.fillRect(0,0,q,e);w.globalCompositeOperation="destination-in";w.drawImage(n,0,0);n=v.toDataURL();Q.put(l,n);return n})};J.getStroke=P;Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(J,u,t,E,r,R,L){var P;t=P=function(Q){function D(F){F=Q.call(this,F)||this;F.variableName=null;F.dimensionName=null;F.values=[];F.isSlice=!1;return F}J._inherits(D,Q);D.prototype.clone=function(){return new P({variableName:this.variableName,dimensionName:this.dimensionName,values:E.clone(this.values),isSlice:this.isSlice})};return J._createClass(D)}(t.JSONSupport);u.__decorate([r.property({type:String,json:{write:!0}})],t.prototype,"variableName",void 0);u.__decorate([r.property({type:String,
json:{write:!0}})],t.prototype,"dimensionName",void 0);u.__decorate([r.property({type:R.types.array(R.types.oneOf([R.types.native(Number),R.types.array(R.types.native(Number))])),json:{write:!0}})],t.prototype,"values",void 0);u.__decorate([r.property({type:Boolean,json:{write:!0}})],t.prototype,"isSlice",void 0);return t=P=u.__decorate([L.subclass("esri.layers.support.DimensionalDefinition")],t)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n){J.ExportImageServiceParameters=function(q){function e(){var w=q.apply(this,arguments)||this;w.layer=null;w.compression=void 0;w.pixelType=void 0;w.lercVersion=2;return w}u._inherits(e,q);var v=e.prototype;v.writeAdjustAspectRatio=function(w,m,a){10.3>this.layer.version||(m[a]=w)};v.writeCompressionQuality=function(w,m,a){this.format&&this.format.toLowerCase().includes("jpg")&&null!=w&&(m[a]=w)};v.writeCompressionTolerance=function(w,m,a){"lerc"===this.format&&
null!=w&&(m[a]=w)};v.writeLercVersion=function(w,m,a){"lerc"===this.format&&10.5<=this.layer.version&&(m[a]=w)};v.combineRendererWithRenderingRule=function(w){const m=this.layer,{rasterInfo:a,renderer:c}=m;w=w||m.rasterFunction;return c&&F.isSupportedRendererType(c)?F.combineRenderingRules(F.convertRendererToRenderingRule(c,{rasterAttributeTable:a.attributeTable,pixelType:a.pixelType,dataType:a.dataType,bandNames:a.bandInfos.map(({name:b})=>b),convertColorRampToColormap:10.6>m.version,convertToRFT:!!w?.rasterFunctionDefinition,
bandCount:a.bandCount}),w):w};v._addResampleRasterFunction=function(w){if("vector-field"!==this.layer.renderer?.type||"Resample"===w?.functionName)return w;let m=new n({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,InputCellSize:this.layer.serviceRasterInfo.pixelSize}});m=w?.rasterFunctionDefinition?new n({rasterFunctionDefinition:F.convertRenderingRuleToRFT(m)}):m;return F.combineRenderingRules(m,w)};v._addClipFunction=
function(w,m){m=new n({functionName:"Clip",functionArguments:{ClippingGeometry:m.toJSON(),ClippingType:1}});return F.combineRenderingRules(m,w)};u._createClass(e,[{key:"adjustAspectRatio",get:function(){return this.layer.adjustAspectRatio}},{key:"bandIds",get:function(){return this.layer.bandIds}},{key:"compressionQuality",get:function(){return this.layer.compressionQuality}},{key:"compressionTolerance",get:function(){return this.layer.compressionTolerance}},{key:"format",get:function(){return"vector-field"===
this.layer.renderer?.type?"lerc":this.layer.format}},{key:"interpolation",get:function(){return this.layer.interpolation}},{key:"noData",get:function(){return this.layer.noData}},{key:"noDataInterpretation",get:function(){return this.layer.noDataInterpretation}},{key:"version",get:function(){const w=this.layer;w.commitProperty("bandIds");w.commitProperty("format");w.commitProperty("compressionQuality");w.commitProperty("compressionTolerance");w.commitProperty("interpolation");w.commitProperty("noData");
w.commitProperty("noDataInterpretation");w.commitProperty("mosaicRule");w.commitProperty("rasterFunction");w.commitProperty("adjustAspectRatio");w.commitProperty("pixelFilter");w.commitProperty("definitionExpression");w.commitProperty("multidimensionalSubset");return(this._get("version")||0)+1},set:function(w){this._set("version",w)}},{key:"mosaicRule",get:function(){var w=this.layer;let m=w.mosaicRule;w=w.definitionExpression;m?w&&w!==m.where&&(m=m.clone(),m.where=w):w&&(m=new f({where:w}));return m}},
{key:"rasterFunction",get:function(){const w=this.layer;let {rasterFunction:m}=w;const a=w.pixelFilter,c=!w.format||w.format.includes("jpg")||w.format.includes("png");m=this._addResampleRasterFunction(m);const b=w.multidimensionalSubset?.areaOfInterest;b&&(m=this._addClipFunction(m,b));c&&!a&&"vector-field"!==w.renderer?.type&&(m=this.combineRendererWithRenderingRule(m));return m}}]);return e}(E.JSONSupport);t.__decorate([r.property()],J.ExportImageServiceParameters.prototype,"layer",void 0);t.__decorate([r.property({json:{write:!0}})],
J.ExportImageServiceParameters.prototype,"adjustAspectRatio",null);t.__decorate([D.writer("adjustAspectRatio")],J.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);t.__decorate([r.property({json:{write:!0}})],J.ExportImageServiceParameters.prototype,"bandIds",null);t.__decorate([r.property({json:{write:!0}})],J.ExportImageServiceParameters.prototype,"compression",void 0);t.__decorate([r.property({json:{write:!0}})],J.ExportImageServiceParameters.prototype,"compressionQuality",
null);t.__decorate([D.writer("compressionQuality")],J.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);t.__decorate([r.property({json:{write:!0}})],J.ExportImageServiceParameters.prototype,"compressionTolerance",null);t.__decorate([D.writer("compressionTolerance")],J.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);t.__decorate([r.property({json:{write:!0}})],J.ExportImageServiceParameters.prototype,"format",null);t.__decorate([r.property({type:String,
json:{read:{reader:l.interpolationKebab.read},write:{writer:l.interpolationKebab.write}}})],J.ExportImageServiceParameters.prototype,"interpolation",null);t.__decorate([r.property({json:{write:!0}})],J.ExportImageServiceParameters.prototype,"noData",null);t.__decorate([r.property({type:String,json:{read:{reader:l.noDataInterpretationKebab.read},write:{writer:l.noDataInterpretationKebab.write}}})],J.ExportImageServiceParameters.prototype,"noDataInterpretation",null);t.__decorate([r.property({json:{write:!0}})],
J.ExportImageServiceParameters.prototype,"pixelType",void 0);t.__decorate([r.property({json:{write:!0}})],J.ExportImageServiceParameters.prototype,"lercVersion",void 0);t.__decorate([D.writer("lercVersion")],J.ExportImageServiceParameters.prototype,"writeLercVersion",null);t.__decorate([r.property({type:Number})],J.ExportImageServiceParameters.prototype,"version",null);t.__decorate([r.property({json:{write:!0}})],J.ExportImageServiceParameters.prototype,"mosaicRule",null);t.__decorate([r.property({json:{write:!0,
name:"renderingRule"}})],J.ExportImageServiceParameters.prototype,"rasterFunction",null);J.ExportImageServiceParameters=t.__decorate([Q.subclass("esri.layers.mixins.ExportImageServiceParameters")],J.ExportImageServiceParameters);Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ./RasterFunction ./rasterFunctionUtils ./rasterFormats/pixelRangeUtils ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),
function(J,u,t,E,r,R,L,P){function Q(g,h){for(const k in g)"raster"===k.toLowerCase()&&("RasterFunctionVariable"===g[k].type?(g[k]=h.rasterFunctionDefinition,g[k].type="RasterFunctionTemplate"):"RasterFunctionTemplate"===g[k].type&&Q(g[k].arguments,h))}function D(g){const h=u.clone(E.schema[g.functionName+"Function"]);g=g.functionArguments;for(const k in g)"raster"===k.toLowerCase()?(h.arguments[k]=D(g[k]),h.arguments[k].type="RasterFunctionTemplate"):"colormap"===k.toLowerCase()?(h.arguments[k].value=
m(g[k]),h.arguments.ColorSchemeType.value=0):h.arguments[k].value=g[k];return h}function F(g){const h=g?.Raster;return h&&"esri.layers.support.RasterFunction"===h.declaredClass?F(h.functionArguments):g}function f(g,h){const k=new t;k.functionName="VectorFieldRenderer";const {dataType:x,bandNames:p}=h,y="vector-uv"===x;let H;if(p&&2===p.length){var G=p.map(B=>B.toLowerCase());H=G.indexOf("magnitude");G=G.indexOf("direction")}if(-1===H||null===H)H=0,G=1;const K="arithmetic"===g.rotationType?1:2,A="flow-from"===
g.flowRepresentation?0:1,I=g.visualVariables?g.visualVariables.find(B=>"Magnitude"===B.field):new P;g={magnitudeBandID:H,directionBandID:G,isUVComponents:y,referenceSystem:K,massFlowAngleRepresentation:A,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:c[g.style.toLowerCase().replace("-","_")],minimumMagnitude:I.minDataValue,maximumMagnitude:I.maxDataValue,minimumSymbolSize:I.minSize,maximumSymbolSize:I.maxSize};k.functionArguments=g;g=D(k);return h.convertToRFT?
t.fromJSON({rasterFunctionDefinition:g}):k}function l(g,h){const k=h.convertToRFT,x=new t;x.functionName="Stretch";var p=d[L.stretchTypeJSONDict.toJSON(g.stretchType)],y=w(g.statistics??[]);y={StretchType:p,Statistics:y,DRA:g.dynamicRangeAdjustment,UseGamma:g.useGamma,Gamma:g.gamma,ComputeGamma:g.computeGamma};null!=g.outputMin&&(y.Min=g.outputMin);null!=g.outputMax&&(y.Max=g.outputMax);p===d.standardDeviation?(y.NumberOfStandardDeviations=g.numberOfStandardDeviations,x.outputPixelType="u8"):p===
d.percentClip?(y.MinPercent=g.minPercent,y.MaxPercent=g.maxPercent,x.outputPixelType="u8"):p===d.minMax?x.outputPixelType="u8":p===d.sigmoid&&(y.SigmoidStrengthLevel=g.sigmoidStrengthLevel);x.functionArguments=y;x.variableName="Raster";if(g.colorRamp){y=g.colorRamp;p=new t;if(k)p.functionArguments={ColorRamp:R.getRFxArgColorRampValue(y)};else{const H=R.getColorRampName(y,!0);H?p.functionArguments={colorRamp:H}:!h.convertColorRampToColormap||"algorithmic"!==y.type&&"multipart"!==y.type?(g=g.colorRamp.toJSON(),
"algorithmic"===g.type?g.algorithm=g.algorithm||"esriCIELabAlgorithm":"multipart"===g.type&&g.colorRamps?.length&&g.colorRamps.forEach(G=>G.algorithm=G.algorithm||"esriCIELabAlgorithm"),p.functionArguments={colorRamp:g}):p.functionArguments={Colormap:R.convertColorRampToColormap(y)}}p.variableName="Raster";p.functionName="Colormap";p.functionArguments.Raster=x;return k?new t({rasterFunctionDefinition:D(p)}):p}return k?new t({rasterFunctionDefinition:D(x)}):x}function n(g,h){const k=[],x=[],p=[],y=
[],{pixelType:H,rasterAttributeTable:G}=h,K=null==G?null:G.features,A=e(G);if(A&&K&&Array.isArray(K)&&g.classBreakInfos){g.classBreakInfos.forEach((M,S)=>{const W=M.symbol?.color;let O;W?.a&&null!=M.minValue&&null!=M.maxValue&&K.forEach(N=>{null!=M.minValue&&null!=M.maxValue&&(O=N.attributes[g.field],(O>=M.minValue&&O<M.maxValue||S===g.classBreakInfos.length-1&&O>=M.minValue)&&y.push([N.attributes[A],W.r,W.g,W.b]))})});var I=H?q(y,H):y,B=new t;B.functionName="Colormap";B.functionArguments={};B.functionArguments.Colormap=
I;B.variableName="Raster";return h.convertToRFT?new t({rasterFunctionDefinition:D(B)}):B}g.classBreakInfos.forEach((M,S)=>{if(null!=M.minValue&&null!=M.maxValue){var W=M.symbol&&M.symbol.color;W?.a?(0===S?k.push(M.minValue,M.maxValue+1E-6):k.push(M.minValue+1E-6,M.maxValue+1E-6),x.push(S),y.push([S,W.r,W.g,W.b])):p.push(M.minValue,M.maxValue)}});I=H?q(y,H):y;B=new t;B.functionName="Remap";B.functionArguments={InputRanges:k,OutputValues:x,NoDataRanges:p};B.variableName="Raster";const z=new t;z.functionName=
"Colormap";z.functionArguments={Colormap:I,Raster:B};return h.convertToRFT?new t({rasterFunctionDefinition:D(z)}):z}function q(g,h){(h=a.has(h)?r.getPixelValueRange(h):null)&&g.push([Math.floor(h[0]-1),0,0,0],[Math.ceil(h[1]+1),0,0,0]);return g}function e(g){if(null!=g)return{fields:g}=g,(g=g&&g.find(h=>h&&h.name&&"value"===h.name.toLowerCase()))&&g.name}function v(g,h){const k=[],{pixelType:x,rasterAttributeTable:p}=h;var y=null==p?null:p.features;const H=e(p),G=g.defaultSymbol?.color?.toRgb();var K=
g.uniqueValueInfos;if(K)if(!y)for(g=0;g<K.length;g++){var A=K[g];y=A.symbol?.color;A=+A.value;if(y?.a){if(isNaN(A))return null;k.push([A,y.r,y.g,y.b])}}else if(H){const I=new Map;K.forEach(z=>{const M=z.value;z=z.symbol?.color;null!=M&&z&&z.a&&I.set(String(M),z.toRgb())});const B=g.field;y.forEach(({attributes:z})=>{const M=z[H];(z=I.get(String(z[B])))?k.push([M,...z]):G&&k.push([M,...G])})}K=x&&0<k.length?q(k,x):k;g=new t;g.functionName="Colormap";g.functionArguments={};g.functionArguments.Colormap=
K;g.variableName="Raster";return h.convertToRFT?new t({rasterFunctionDefinition:D(g)}):g}function w(g){const h=[];g?.forEach(k=>{Array.isArray(k)?h.push(k):null!=k.min&&null!=k.max&&h.push([k.min,k.max,k.avg||0,k.stddev||0])});return h}function m(g){const h=[],k=[];g.forEach(x=>{h.push(x[0]);k.push(R.convertRGBATo32Bit([...x.slice(1),255]))});return{type:"RasterColormap",values:h,colors:k}}const a=new Set("u1 u2 u4 u8 s8 u16 s16".split(" ")),c={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",
single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},b=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),d={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};J.combineRenderingRules=function(g,h){if(!g||!h)return u.clone(g||h);g=u.clone(g);if(g.functionDefinition&&
h.rasterFunctionDefinition){const k=h.rasterFunctionDefinition;if(k.thumbnail||k.thumbnailEx)k.thumbnail=k.thumbnailEx=void 0;Q(g.functionDefinition.arguments,h);g.rasterFunctionDefinition=g.functionDefinition.toJSON()}else"none"!==h.functionName?.toLowerCase()&&(F(g.functionArguments).Raster=h);return g};J.convertRendererToRenderingRule=function(g,h){h=h||{};switch(g.type){case "raster-stretch":return l(g,h);case "class-breaks":return n(g,h);case "unique-value":return v(g,h);case "raster-colormap":var k=
h;(h=g.extractColormap())&&0!==h.length?({pixelType:g}=k,g=g?q(h,g):h,h=new t,h.functionName="Colormap",h.functionArguments={},h.functionArguments.Colormap=g,g=k.convertToRFT?new t({rasterFunctionDefinition:D(h)}):h):g=null;return g;case "vector-field":return f(g,h);case "raster-shaded-relief":k=h.convertToRFT;if("elevation"!==h.dataType&&("generic"!==h.dataType||1!==h.bandCount||"s16"!==h.pixelType&&"s32"!==h.pixelType&&"f32"!==h.pixelType&&"f64"!==h.pixelType))g=new t;else{h=new t;h.functionName=
"Hillshade";var x="traditional"===g.hillshadeType?0:1,p="none"===g.scalingType?1:3,y={HillshadeType:x,SlopeType:p,ZFactor:g.zFactor};0===x&&(y.Azimuth=g.azimuth,y.Altitude=g.altitude);3===p&&(y.PSPower=g.pixelSizePower,y.PSZFactor=g.pixelSizeFactor);h.functionArguments=y;h.variableName="Raster";g.colorRamp&&(h.functionName="ShadedRelief",k?y.ColorRamp=R.getRFxArgColorRampValue(g.colorRamp):y.Colormap=R.convertColorRampToColormap(g.colorRamp));g=k?new t({rasterFunctionDefinition:D(h)}):h}return g;
case "flow":throw Error("Unsupported rendering rule.");}};J.convertRenderingRuleToRFT=D;J.isSupportedRendererType=function(g){return b.has(g.type)};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./RasterFunctionTemplate".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F){var f;const l=new Set(["raster","raster2","dem","fillraster"]),n=new Set(["rasters"]),q=m=>m&&m.rasterFunction?w.fromJSON(m):m,e=m=>m&&m instanceof w?m.toJSON():m,v=m=>m?.functionName&&!m.declaredClass?new w(m):m;R={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:F}},json:{write:!0,name:"rasterFunctionDefinition"}};let w=f=function(m){function a(b){b=m.call(this,b)||this;b.functionName=null;b.outputPixelType="unknown";b.variableName=null;b.functionDefinition=
null;return b}J._inherits(a,m);var c=a.prototype;c.readFunctionArguments=function(b){if(null==b)var d=null;else{b=E.clone(b);var g={};for(d of Object.keys(b))l.has(d.toLowerCase())?g[d]=q(b[d]):n.has(d.toLowerCase())&&Array.isArray(b[d])?g[d]=b[d].map(q):g[d]=b[d];d=g}return d};c.writeFunctionArguments=function(b,d,g){const h={};for(const k of Object.keys(b))l.has(k.toLowerCase())?h[k]=e(b[k]):n.has(k.toLowerCase())&&Array.isArray(b[k])?h[k]=b[k].map(e):h[k]=e(b[k]);d[g]=h};c.readFunctionName=function(b,
d){b=d.rasterFunctionInfos;const g=d.name;return g?g:b&&b.length&&"None"!==b[0].name?b[0].name:d.rasterFunctionDefinition?d.rasterFunctionDefinition.name:d.rasterFunction};c.clone=function(){return new f({functionName:this.functionName,functionArguments:E.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:E.clone(this.rasterFunctionDefinition)})};J._createClass(a,[{key:"functionArguments",set:function(b){if(b){const d=Object.keys(b);
if(d.some(g=>{var h;if(h=l.has(g.toLowerCase()))g=b[g],h=g?.functionName&&!g.declaredClass;return h})||d.some(g=>n.has(g.toLowerCase())&&Array.isArray(b[g])&&b[g].some(h=>h?.functionName&&!h.declaredClass))){b=E.clone(b);for(const g of d)l.has(g.toLowerCase())?b[g]=v(b[g]):n.has(g.toLowerCase())&&Array.isArray(b[g])&&(b[g]=b[g].map(h=>v(h)))}}this._set("functionArguments",b)}},{key:"rasterFunctionDefinition",get:function(){return this.functionDefinition?.toJSON()},set:function(b){this.functionDefinition=
b?F.fromJSON(b):null}}]);return a}(t.JSONSupport);u.__decorate([r.property({json:{type:Object,name:"rasterFunctionArguments"}})],w.prototype,"functionArguments",null);u.__decorate([P.reader("functionArguments")],w.prototype,"readFunctionArguments",null);u.__decorate([D.writer("functionArguments")],w.prototype,"writeFunctionArguments",null);u.__decorate([r.property({json:{type:String,write:{target:"rasterFunction"}}})],w.prototype,"functionName",void 0);u.__decorate([P.reader("functionName",["rasterFunction",
"rasterFunctionInfos","rasterFunctionDefinition"])],w.prototype,"readFunctionName",null);u.__decorate([L.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),r.property({json:{default:"unknown"}})],w.prototype,"outputPixelType",void 0);u.__decorate([r.property({type:String,json:{read:!0,write:!0}})],w.prototype,"variableName",void 0);u.__decorate([r.property()],w.prototype,"rasterFunctionDefinition",
null);u.__decorate([r.property(R)],w.prototype,"functionDefinition",void 0);return w=f=u.__decorate([Q.subclass("esri.layers.support.RasterFunction")],w)})},"esri/layers/support/RasterFunctionTemplate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./RasterFunctionInfo ./RasterFunctionProperties".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F){t=new t.JSONMap({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0});E=function(f){function l(){var n=f.apply(this,arguments)||this;n.functionType="mosaic";n.type="RasterFunctionTemplate";return n}J._inherits(l,f);return J._createClass(l)}(E.JSONSupport);u.__decorate([r.property({type:[String],json:{write:!0}})],E.prototype,"aliases",void 0);u.__decorate([r.property({type:Object,json:{write:!0}})],E.prototype,"arguments",void 0);u.__decorate([r.property({type:String,
json:{write:!0}})],E.prototype,"description",void 0);u.__decorate([r.property({type:D,json:{write:!0,name:"function"}})],E.prototype,"functionInfo",void 0);u.__decorate([r.property({type:t.apiValues,json:{type:[0,1,2],read:t.read,write:t.write}})],E.prototype,"functionType",void 0);u.__decorate([r.property({type:String,json:{write:!0}})],E.prototype,"group",void 0);u.__decorate([r.property({type:String,json:{write:!0}})],E.prototype,"help",void 0);u.__decorate([r.property({type:Number,json:{type:R.Integer,
write:!0,name:"_object_id"}})],E.prototype,"id",void 0);u.__decorate([r.property({type:String,json:{write:!0}})],E.prototype,"name",void 0);u.__decorate([r.property({type:String,json:{write:!0,name:"definition"}})],E.prototype,"queryDefinition",void 0);u.__decorate([r.property({type:String,json:{write:!0}})],E.prototype,"tag",void 0);u.__decorate([r.property({type:F,json:{write:!0}})],E.prototype,"properties",void 0);u.__decorate([r.property({type:String,json:{write:!0}})],E.prototype,"thumbnail",
void 0);u.__decorate([r.property({type:String,json:{write:!0}})],E.prototype,"thumbnailEx",void 0);u.__decorate([r.property({json:{type:["RasterFunctionTemplate"],write:!0}})],E.prototype,"type",void 0);return E=u.__decorate([Q.subclass("esri.layers.support.RasterFunctionTemplate")],E)})},"esri/layers/support/RasterFunctionInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./rasterEnums".split(" "),
function(J,u,t,E,r,R,L,P,Q){t=function(D){function F(){var f=D.apply(this,arguments)||this;f.pixelType="unknown";return f}J._inherits(F,D);return J._createClass(F)}(t.JSONSupport);u.__decorate([E.property({type:String,json:{write:!0}})],t.prototype,"name",void 0);u.__decorate([E.property({type:String,json:{write:!0}})],t.prototype,"description",void 0);u.__decorate([E.property({type:r.Integer,json:{type:r.Integer,write:!0,name:"_object_id"}})],t.prototype,"id",void 0);u.__decorate([E.property({type:String,
json:{type:Q.pixelTypeKebabDict.jsonValues,read:Q.pixelTypeKebabDict.read,write:Q.pixelTypeKebabDict.write}})],t.prototype,"pixelType",void 0);u.__decorate([E.property({type:String,json:{write:!0}})],t.prototype,"type",void 0);return t=u.__decorate([P.subclass("esri.layers.support.RasterFunctionInfo")],t)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(J,u){const t=u.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",
RSP_Majority:"majority"}),E=u.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});u=u.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});J.interpolationKebab=t;J.noDataInterpretationKebab=E;J.pixelTypeKebabDict=u;Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/RasterFunctionProperties":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./RasterFunctionVariable".split(" "),
function(J,u,t,E,r,R,L,P,Q){R={key:"type",base:null,typeMap:{RasterFunctionVariable:Q}};t=function(D){function F(){return D.apply(this,arguments)||this}J._inherits(F,D);return J._createClass(F)}(t.JSONSupport);u.__decorate([E.property({types:R,json:{types:R,name:"MatchVariable"}})],t.prototype,"matchVariable",void 0);u.__decorate([E.property({types:R,json:{types:R,name:"UnionDimension"}})],t.prototype,"unionDimension",void 0);u.__decorate([E.property({type:Number,json:{type:r.Integer,write:!0,name:"_object_id"}})],
t.prototype,"id",void 0);u.__decorate([E.property({type:String,json:{write:!0}})],t.prototype,"type",void 0);return t=u.__decorate([P.subclass("esri.layers.support.RasterFunctionProperties")],t)})},"esri/layers/support/RasterFunctionVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(J,u,t,E,r,R,L,P){t=function(Q){function D(){var F=Q.apply(this,arguments)||this;F.isDataset=!1;F.isPublic=!1;F.type="RasterFunctionVariable";return F}J._inherits(D,Q);return J._createClass(D)}(t.JSONSupport);u.__decorate([E.property({type:String,json:{write:!0}})],t.prototype,"name",void 0);u.__decorate([E.property({type:Number,json:{type:r.Integer,write:!0,name:"_object_id"}})],t.prototype,"id",void 0);u.__decorate([E.property({type:Boolean,json:{write:!0}})],t.prototype,"isDataset",void 0);
u.__decorate([E.property({type:Boolean,json:{write:!0}})],t.prototype,"isPublic",void 0);u.__decorate([E.property({json:{write:!0}})],t.prototype,"value",void 0);u.__decorate([E.property({type:String,json:{write:!0}})],t.prototype,"type",void 0);return t=u.__decorate([P.subclass("esri.layers.support.RasterFunctionVariable")],t)})},"esri/layers/support/rasterFunctionUtils":function(){define(["exports"],function(J){J.schema={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",
type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},
MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,
isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",
function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",
pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,
type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},
RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",
name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,
value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},
arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,
value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",
isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},
arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,
value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",
pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},
functionType:0,thumbnail:""}};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/deprecate ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n,q,e){var v;const w=E.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),m=E.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});E=v=function(a){function c(d){d=a.call(this,d)||this;d.ascending=!0;d.itemRasterFunction=
null;d.lockRasterIds=null;d.method=null;d.multidimensionalDefinition=null;d.objectIds=null;d.operation=null;d.sortField=null;d.sortValue=null;d.viewpoint=null;d.where=null;return d}J._inherits(c,a);var b=c.prototype;b.readAscending=function(d,g){return null!=g.ascending?g.ascending:null!=g.sortAscending?g.sortAscending:!0};b.readMethod=function(d,g){d=g.mosaicMethod||g.defaultMosaicMethod;switch(d?d.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":d="esriMosaicAttribute";
break;case "lockraster":d="esriMosaicLockRaster";break;case "center":d="esriMosaicCenter";break;case "northwest":d="esriMosaicNorthwest";break;case "nadir":d="esriMosaicNadir";break;case "viewpoint":d="esriMosaicViewpoint";break;case "seamline":d="esriMosaicSeamline";break;case "none":d="esriMosaicNone";break;default:d="esriMosaicNone"}return m.fromJSON(d)};b.writeMultidimensionalDefinition=function(d,g,h){null!=d&&(d=d.filter(({variableName:k,dimensionName:x})=>k&&"*"!==k||x),d.length&&(g[h]=d.map(k=>
k.toJSON())))};b.readOperation=function(d,g){d=g.mosaicOperation;g=g.mosaicOperator&&g.mosaicOperator.toLowerCase();g=d||(g?w.toJSON(g):null);return w.fromJSON(g)||"first"};b.castSortValue=function(d){return null==d||"string"===typeof d||"number"===typeof d?d:`${d}`};b.clone=function(){return new v({ascending:this.ascending,itemRasterFunction:R.clone(this.itemRasterFunction),lockRasterIds:R.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:R.clone(this.multidimensionalDefinition),
objectIds:R.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:R.clone(this.viewpoint),where:this.where})};J._createClass(c,[{key:"itemRenderingRule",get:function(){t.deprecatedProperty(L.getLogger(this),"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0});return this._get("itemRasterFunction")},set:function(d){t.deprecatedProperty(L.getLogger(this),"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",
warnOnce:!0});this._set("itemRasterFunction",d)}}]);return c}(r.JSONSupport);u.__decorate([P.property({type:Boolean,json:{write:!0}})],E.prototype,"ascending",void 0);u.__decorate([D.reader("ascending",["ascending","sortAscending"])],E.prototype,"readAscending",null);u.__decorate([P.property({type:e,json:{name:"itemRenderingRule",write:!0}})],E.prototype,"itemRasterFunction",void 0);u.__decorate([P.property({type:e})],E.prototype,"itemRenderingRule",null);u.__decorate([P.property({type:[l.Integer],
json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],E.prototype,"lockRasterIds",void 0);u.__decorate([P.property({type:String,json:{type:m.jsonValues,write:{target:"mosaicMethod",writer:m.write}}})],E.prototype,"method",void 0);u.__decorate([D.reader("method",["mosaicMethod","defaultMosaicMethod"])],E.prototype,"readMethod",null);u.__decorate([P.property({type:[q],json:{write:!0}})],E.prototype,"multidimensionalDefinition",void 0);u.__decorate([f.writer("multidimensionalDefinition")],
E.prototype,"writeMultidimensionalDefinition",null);u.__decorate([P.property({type:[l.Integer],json:{name:"fids",write:!0}})],E.prototype,"objectIds",void 0);u.__decorate([P.property({json:{type:w.jsonValues,read:{reader:w.read},write:{target:"mosaicOperation",writer:w.write}}})],E.prototype,"operation",void 0);u.__decorate([D.reader("operation",["mosaicOperation","mosaicOperator"])],E.prototype,"readOperation",null);u.__decorate([P.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===
this.method}}}}})],E.prototype,"sortField",void 0);u.__decorate([P.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],E.prototype,"sortValue",void 0);u.__decorate([Q.cast("sortValue")],E.prototype,"castSortValue",null);u.__decorate([P.property({type:n,json:{write:!0}})],E.prototype,"viewpoint",void 0);u.__decorate([P.property({type:String,json:{write:!0}})],E.prototype,"where",void 0);return E=v=u.__decorate([F.subclass("esri.layers.support.MosaicRule")],
E)})},"esri/layers/support/imageBitmapUtils":function(){define(["exports","../../core/Error","../../core/promiseUtils"],function(J,u,t){J.createBitmap=async function(E,r,R){let L;try{L=await createImageBitmap(E)}catch(P){throw new u("request:server",`Unable to load ${r}`,{url:r,error:P});}t.throwIfAborted(R);return L};J.createTileBitmap=async function(E,r,R,L,P){let Q;try{Q=await createImageBitmap(E)}catch(D){throw new u("request:server",`Unable to load tile ${r}/${R}/${L}`,{error:D,level:r,row:R,
col:L});}t.throwIfAborted(P);return Q};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/MultidimensionalSubset":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Polygon ../../geometry/support/jsonUtils ./DimensionalDefinition ../../geometry/Geometry".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n){var q;t={base:n,key:"type",typeMap:{extent:D,polygon:F}};E=q=function(e){function v(w){w=e.call(this,w)||this;w.areaOfInterest=null;w.subsetDefinitions=null;return w}J._inherits(v,e);v.prototype.clone=function(){const w=this.subsetDefinitions?.map(a=>a.clone()),m=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new q({areaOfInterest:m,subsetDefinitions:w})};J._createClass(v,[{key:"dimensions",get:function(){var {subsetDefinitions:w}=
this;if(null==w||0===w.length)return[];const m=new Map;w.forEach(a=>{if(a.dimensionName){if(Array.isArray(a.values[0])){var c=a.values;var b=c[0][0];c=c[a.values.length-1][1]}else c=a.values,b=c[0],c=c[a.values.length-1];m.has(a.dimensionName)?(a=m.get(a.dimensionName),a[0]=Math.min(b,a[0]),a[1]=Math.max(c,a[1])):m.set(a.dimensionName,[b,c])}});w=[];for(const a of m)w.push({name:a[0],extent:a[1]});return w}},{key:"variables",get:function(){const {subsetDefinitions:w}=this;if(null==w||0===w.length)return[];
const m=new Set;w.forEach(a=>{a.variableName&&m.add(a.variableName)});return[...m]}}]);return v}(E.JSONSupport);u.__decorate([r.property({types:t,json:{read:f.fromJSON,write:!0}})],E.prototype,"areaOfInterest",void 0);u.__decorate([r.property({readOnly:!0})],E.prototype,"dimensions",null);u.__decorate([r.property({readOnly:!0})],E.prototype,"variables",null);u.__decorate([r.property({type:[l],json:{write:!0}})],E.prototype,"subsetDefinitions",void 0);return E=q=u.__decorate([Q.subclass("esri.layers.support.MultidimensionalSubset")],
E)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterBandInfo ./RasterSensorInfo ./RasterStorageInfo".split(" "),function(J,u,t,E,r,R,L,P,Q,D,F,f){var l;t=l=function(n){function q(e){e=n.call(this,e)||
this;e.attributeTable=null;e.bandCount=null;e.colormap=null;e.extent=null;e.format=void 0;e.height=null;e.width=null;e.histograms=null;e.keyProperties={};e.multidimensionalInfo=null;e.noDataValue=null;e.pixelSize=null;e.pixelType=null;e.isPseudoSpatialReference=!1;e.spatialReference=null;e.statistics=null;e.storageInfo=null;e.transform=null;return e}J._inherits(q,n);q.prototype.clone=function(){return new l({attributeTable:E.clone(this.attributeTable),bandCount:this.bandCount,colormap:E.clone(this.colormap),
extent:E.clone(this.extent),nativePixelSize:E.clone(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:E.clone(this.histograms),keyProperties:E.clone(this.keyProperties),multidimensionalInfo:E.clone(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:E.clone(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:E.clone(this.spatialReference),statistics:E.clone(this.statistics),storageInfo:E.clone(this.storageInfo),
transform:E.clone(this.transform)})};J._createClass(q,[{key:"bandInfos",get:function(){var e=this.keyProperties.BandProperties;if(!e?.length){e=[];for(var v=1;v<=this.bandCount;v++)e.push(new D({name:"band_"+v}));return e}e=e.map(w=>D.fromJSON(w));for(v=0;v<e.length;v++)e[v].name=e[v].name??"band_"+(v+1);return e}},{key:"dataType",get:function(){const e=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===e?"standard-time":e}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||
this.extent},set:function(e){e&&this._set("nativeExtent",e)}},{key:"nativePixelSize",get:function(){if(null==this.transform||!this.transform.affectsPixelSize)return this.pixelSize;const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}},{key:"hasMultidimensionalTranspose",get:function(){return!!this.storageInfo?.transposeInfo}},{key:"sensorInfo",get:function(){if(this.keyProperties?.SensorName)return F.fromJSON(this.keyProperties)}}]);return q}(t.JSONSupport);u.__decorate([r.property({json:{write:!0}})],
t.prototype,"attributeTable",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"bandCount",void 0);u.__decorate([r.property({readOnly:!0})],t.prototype,"bandInfos",null);u.__decorate([r.property({json:{write:!0}})],t.prototype,"colormap",void 0);u.__decorate([r.property({type:String,readOnly:!0})],t.prototype,"dataType",null);u.__decorate([r.property({type:P,json:{write:!0}})],t.prototype,"extent",void 0);u.__decorate([r.property({type:P,json:{write:!0}})],t.prototype,"nativeExtent",
null);u.__decorate([r.property({json:{write:!0}})],t.prototype,"nativePixelSize",null);u.__decorate([r.property({json:{write:!0}})],t.prototype,"format",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"height",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"width",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"hasMultidimensionalTranspose",null);u.__decorate([r.property({json:{write:!0}})],t.prototype,"histograms",void 0);u.__decorate([r.property({json:{write:!0}})],
t.prototype,"keyProperties",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"multidimensionalInfo",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"noDataValue",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"pixelSize",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"pixelType",void 0);u.__decorate([r.property()],t.prototype,"isPseudoSpatialReference",void 0);u.__decorate([r.property({readOnly:!0})],t.prototype,"sensorInfo",null);
u.__decorate([r.property({type:Q,json:{write:!0}})],t.prototype,"spatialReference",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"statistics",void 0);u.__decorate([r.property({type:f,json:{write:!0}})],t.prototype,"storageInfo",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"transform",void 0);return t=l=u.__decorate([L.subclass("esri.layers.support.RasterInfo")],t)})},"esri/layers/support/RasterBandInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(J,u,t,E,r,R,L,P){function Q(F){F=Number(F);return isNaN(F)?void 0:F}var D;t=D=function(F){function f(){var l=F.apply(this,arguments)||this;l.name=null;l.minWavelength=void 0;l.maxWavelength=void 0;l.radianceBias=void 0;l.radianceGain=void 0;l.reflectanceBias=void 0;l.reflectanceGain=void 0;l.solarIrradiance=void 0;return l}J._inherits(f,F);f.prototype.clone=function(){return new D({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,
radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})};return J._createClass(f)}(t.JSONSupport);u.__decorate([E.property({json:{name:"BandName",write:!0}})],t.prototype,"name",void 0);u.__decorate([E.property({json:{name:"WavelengthMin",read:{reader:Q},write:!0}})],t.prototype,"minWavelength",void 0);u.__decorate([E.property({json:{name:"WavelengthMax",read:{reader:Q},write:!0}})],t.prototype,"maxWavelength",
void 0);u.__decorate([E.property({json:{name:"RadianceBias",read:{reader:Q},write:!0}})],t.prototype,"radianceBias",void 0);u.__decorate([E.property({json:{name:"RadianceGain",read:{reader:Q},write:!0}})],t.prototype,"radianceGain",void 0);u.__decorate([E.property({json:{name:"ReflectanceBias",read:{reader:Q},write:!0}})],t.prototype,"reflectanceBias",void 0);u.__decorate([E.property({json:{name:"ReflectanceGain",read:{reader:Q},write:!0}})],t.prototype,"reflectanceGain",void 0);u.__decorate([E.property({json:{name:"SolarIrradiance",
read:{reader:Q},write:!0}})],t.prototype,"solarIrradiance",void 0);return t=D=u.__decorate([P.subclass("esri.layers.support.RasterBandInfo")],t)})},"esri/layers/support/RasterSensorInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(J,u,t,E,r,R,L,P,Q,D){function F(l){l=Number(l);return isNaN(l)?void 0:l}var f;t=f=function(l){function n(){var e=l.apply(this,arguments)||this;e.acquisitionDate=void 0;e.cloudCover=void 0;e.productName=void 0;e.sensorName=null;e.sensorAzimuth=void 0;e.sensorElevation=void 0;e.sunAzimuth=void 0;e.sunElevation=void 0;return e}J._inherits(n,l);var q=n.prototype;q.readAcquisitionDate=function(e){return new Date(e)};q.writeAcquisitionDate=function(e,v){v.AcquisitionDate=e.getTime()};q.clone=function(){return new f({acquisitionDate:this.acquisitionDate,
cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})};return J._createClass(n)}(t.JSONSupport);u.__decorate([E.property({json:{name:"AcquisitionDate",write:!0}})],t.prototype,"acquisitionDate",void 0);u.__decorate([P.reader("acquisitionDate")],t.prototype,"readAcquisitionDate",null);u.__decorate([D.writer("acquisitionDate")],t.prototype,"writeAcquisitionDate",
null);u.__decorate([E.property({json:{name:"CloudCover",read:{reader:F},write:!0}})],t.prototype,"cloudCover",void 0);u.__decorate([E.property({json:{name:"ProductName",write:!0}})],t.prototype,"productName",void 0);u.__decorate([E.property({json:{name:"SensorName",write:!0}})],t.prototype,"sensorName",void 0);u.__decorate([E.property({json:{name:"SensorAzimuth",read:{reader:F},write:!0}})],t.prototype,"sensorAzimuth",void 0);u.__decorate([E.property({json:{name:"SensorElevation",read:{reader:F},
write:!0}})],t.prototype,"sensorElevation",void 0);u.__decorate([E.property({json:{name:"SunAzimuth",read:{reader:F},write:!0}})],t.prototype,"sunAzimuth",void 0);u.__decorate([E.property({json:{name:"SunElevation",read:{reader:F},write:!0}})],t.prototype,"sunElevation",void 0);return t=f=u.__decorate([Q.subclass("esri.layers.support.RasterSensorInfo")],t)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(J,u,t,E,r,R,L,P){var Q;t=Q=function(D){function F(){var f=D.apply(this,arguments)||this;f.blockWidth=void 0;f.blockHeight=void 0;f.compression=null;f.origin=null;f.firstPyramidLevel=null;f.maximumPyramidLevel=null;f.pyramidScalingFactor=2;f.pyramidBlockWidth=null;f.pyramidBlockHeight=null;f.isVirtualTileInfo=!1;f.tileInfo=null;f.transposeInfo=null;f.blockBoundary=null;return f}J._inherits(F,D);F.prototype.clone=function(){return new Q({blockWidth:this.blockWidth,blockHeight:this.blockHeight,
compression:this.compression,origin:E.clone(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:E.clone(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:E.clone(this.tileInfo),transposeInfo:E.clone(this.transposeInfo),blockBoundary:E.clone(this.blockBoundary)})};return J._createClass(F)}(t.JSONSupport);
u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"blockWidth",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"blockHeight",void 0);u.__decorate([r.property({type:String,json:{write:!0}})],t.prototype,"compression",void 0);u.__decorate([r.property({type:P,json:{write:!0}})],t.prototype,"origin",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"firstPyramidLevel",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],
t.prototype,"maximumPyramidLevel",void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"pyramidResolutions",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"pyramidScalingFactor",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"pyramidBlockWidth",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"pyramidBlockHeight",void 0);u.__decorate([r.property({type:Boolean,json:{write:!0}})],t.prototype,"isVirtualTileInfo",
void 0);u.__decorate([r.property({json:{write:!0}})],t.prototype,"tileInfo",void 0);u.__decorate([r.property()],t.prototype,"transposeInfo",void 0);u.__decorate([r.property()],t.prototype,"blockBoundary",void 0);return t=Q=u.__decorate([L.subclass("esri.layers.support.RasterStorageInfo")],t)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/workers/workers","./PixelBlock"],function(J,u,t,E){return function(){function r(){this._workerThread=
null;this._destroyed=!1}var R=r.prototype;R.initialize=async function(){const L=await t.open("RasterWorker");this._destroyed?L.close():this._workerThread=L};R.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};R.convertVectorFieldData=async function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");return(L=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:L.pixelBlock.toJSON(),
type:L.dataType},P))?new E(L):null};R.computeStatisticsHistograms=function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");return this._workerThread.invoke("computeStatisticsHistograms",{pixelBlock:L.pixelBlock.toJSON()},P)};R.decode=async function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");return(L=await this._workerThread.invoke("decode",L,P))?new E(L):null};R.symbolize=async function(L,
P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");L={extent:L.extent&&L.extent.toJSON(),pixelBlock:null!=L.pixelBlock&&L.pixelBlock.toJSON(),simpleStretchParams:L.simpleStretchParams,bandIds:L.bandIds};return(P=await this._workerThread.invoke("symbolize",L,P))?new E(P):null};R.updateSymbolizer=async function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");const Q=L?.rendererJSON?.histograms;
await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:L.toJSON(),histograms:Q},P))};R.updateRasterFunction=async function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:L.toJSON()},P))};R.process=async function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");return(L=
await this._workerThread.invoke("process",{extent:L.extent?.toJSON(),primaryPixelSizes:L.primaryPixelSizes?.map(Q=>null!=Q?Q.toJSON():null),primaryPixelBlocks:L.primaryPixelBlocks.map(Q=>null!=Q?Q.toJSON():null),primaryRasterIds:L.primaryRasterIds},P))?new E(L):null};R.stretch=async function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");if(!L?.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON(),stretchParams:L.stretchParams};
return(P=await this._workerThread.invoke("stretch",L,P))?new E(P):null};R.split=async function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");if(!L?.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON(),tileSize:L.tileSize,maximumPyramidLevel:L.maximumPyramidLevel};const Q=await this._workerThread.invoke("split",L,P);Q&&Q.forEach((D,F)=>{Q.set(F,D?E.fromJSON(D):null)});return Q};R.estimateStatisticsHistograms=async function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection",
"no available worker connection");if(!L?.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",L,P)};R.mosaicAndTransform=async function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");if(!L?.srcPixelBlocks?.length)return{pixelBlock:null};L={...L,srcPixelBlocks:L.srcPixelBlocks.map(Q=>null!=Q?Q.toJSON():null)};P=await this._workerThread.invoke("mosaicAndTransform",
L,P);return{pixelBlock:P.pixelBlock?new E(P.pixelBlock):null,localNorthDirections:P.localNorthDirections}};R.createFlowMesh=async function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");const Q={buffer:L.flowData.data.buffer,maskBuffer:L.flowData.mask.buffer,width:L.flowData.width,height:L.flowData.height},{meshType:D,simulationSettings:F}=L;L=await this._workerThread.invoke("createFlowMesh",{meshType:D,flowData:Q,simulationSettings:F},
{...P,transferList:[Q.buffer,Q.maskBuffer]});return{vertexData:new Float32Array(L.vertexBuffer),indexData:new Uint32Array(L.indexBuffer)}};R.getProjectionOffsetGrid=function(L,P){if(!this._workerThread)throw new u("raster-jobhandler:no-connection","no available worker connection");const Q=null!=L.datumTransformation?L.datumTransformation.steps.map(F=>({wkid:F.wkid,wkt:F.wkt,isInverse:F.isInverse})):null,D=null!=L.rasterTransform?L.rasterTransform.toJSON():null;L={projectedExtent:L.projectedExtent.toJSON(),
srcBufferExtent:L.srcBufferExtent.toJSON(),pixelSize:L.pixelSize,hasWrapAround:L.hasWrapAround,spacing:L.spacing,datumTransformationSteps:Q,rasterTransform:D,isAdaptive:L.isAdaptive,includeGCSGrid:L.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",L,P)};return J._createClass(r)}()})},"esri/layers/support/rasterDatasets/multidimensionalUtils":function(){define(["exports","../../../core/arrayUtils","../DimensionalDefinition"],function(J,u,t){function E(n,q,e){const v=q.shift();
0===e.length&&e.push({sliceId:-1,multidimensionalDefinition:[]});const w=e.length;for(let m=0;m<w;m++){const a=e.shift().multidimensionalDefinition;v.values?.forEach(c=>{e.push({sliceId:-1,multidimensionalDefinition:[...a,{variableName:n,dimensionName:v.name,values:[c]}]})})}q.length&&E(n,q,e)}function r(n,q){return Array.isArray(n)?q[0]===q[1]?n[0]===q[0]||n[1]===q[0]:n[0]>=q[0]&&n[0]<=q[1]&&n[1]>=q[0]&&n[1]<=q[1]:n>=q[0]&&n<=q[1]}function R(n,q){return n[0]<=q[0]&&n[1]>=q[0]||n[0]<=q[1]&&n[1]>=
q[1]||n[0]>=q[0]&&n[1]<=q[1]}function L(n){return 1===n.length?[n[0],n[0]]:[n[0],n[n.length-1]]}function P(n,q,e){if(!q?.subsetDefinitions?.length)return n;if(e){const {variables:w}=q;if(w.length&&!w.includes(e))return null;q=q.subsetDefinitions.find(m=>m.dimensionName===n.name&&m.variableName===e);if(!q?.values?.length)return n;q=L(q.values)}else q=q.dimensions.find(({name:w})=>w===n.name)?.extent;const v=q;if(!v||!v?.length)return n;q=n.values.filter(w=>r(w,v));return{...n,extent:[...v],values:q}}
function Q(n,q,e){if(!q?.subsetDefinitions?.length)return!1;const {variables:v}=q;if(v.length&&n.some(({variableName:w})=>w&&!v.includes(w)))return!0;for(let w=0;w<n.length;w++){const m=n[w],a=q.subsetDefinitions.find(c=>(""===m.variableName||c.variableName===m.variableName)&&c.dimensionName===m.dimensionName);if(a?.values.length){const c=L(a.values);if(!m.isSlice&&2===m.values.length&&!Array.isArray(m.values[0])&&m.values[0]!==m.values[1]&&e){if(!R(m.values,c))return!0}else if(m.values.some(b=>!r(b,
c)))return!0}}return!1}function D(n,q){var e=n.dimensions.find(({name:a})=>"StdTime"===a);if(null==e||null==q.start&&null==q.end)return q;q=q.clone();const {start:v,end:w}=q.toJSON(),m=v===w?[v]:null!=v&&null!=w?[v,w]:[v??w];if(2===m.length&&e?.extent.length&&(m[0]=Math.max(m[0],e.extent[0]),m[1]=Math.min(m[1],e.extent[1]??e.extent[0]),m[1]<m[0]))return null;e=new t({variableName:"",dimensionName:"StdTime",isSlice:1===m.length,values:m});if(Q([e],n,!0))return null;q.start=new Date(m[0]);q.end=new Date(m[1]??
m[0]);return q}function F(n,q={}){const {multidimensionalInfo:e,keyProperties:v}=n;if(null==e)return null;const {variableName:w,multidimensionalSubset:m,multidimensionalDefinition:a}=q;n=null!=a?a[0]?.variableName:null;const c=w||n||v?.DefaultVariable;({variables:n}=e);m?.variables?.length&&(n=n.filter(({name:b})=>m.variables.includes(b)));return c?n.find(({name:b})=>b===c)??n[0]:n[0]}function f(n,q){var {values:e}=q;if(e?.length){q=Array.isArray(e[0]);var v=Array.isArray(n);return q!==v?-1:q&&v?
e.findIndex(m=>m[0]===n[0]&&m[1]===n[1]):e.indexOf(n)}({extent:v}=q);if(Array.isArray(n)||n<v[0]||n>v[1])return-1;e=q.interval||1;if("ISO8601"!==q.unit)return Math.round((n-v[0])/e);v=v[0];let w=-1;switch(q.intervalUnit?.toLowerCase()||"seconds"){case "seconds":w=Math.round((n-v)/1E3/e);break;case "minutes":w=Math.round((n-v)/6E4/e);break;case "hours":w=Math.round((n-v)/36E5/e);break;case "days":w=Math.round((n-v)/864E5/e);break;case "months":q=(new Date(n)).getUTCFullYear()-(new Date(v)).getUTCFullYear();
e=(new Date(v)).getUTCMonth();v=(new Date(n)).getUTCMonth();w=0===q?v-e:v+11-e+12*(q-1);break;case "years":w=Math.round(((new Date(n)).getUTCFullYear()-(new Date(v)).getUTCFullYear())/e);break;case "decades":w=Math.round(((new Date(n)).getUTCFullYear()-(new Date(v)).getUTCFullYear())/10/e)}return w}function l(n){var q=n.values?.length;if(q)return q;const {extent:e,unit:v}=n;q=n.interval||1;var w=e?e[1]-e[0]:0;if("ISO8601"!==v)return Math.round(w/q);switch(n.intervalUnit?.toLowerCase()??"seconds"){case "seconds":q=
Math.round(w/1E3/q);break;case "minutes":q=Math.round(w/6E4/q);break;case "hours":q=Math.round(w/36E5/q);break;case "days":q=Math.round(w/864E5/q);break;case "months":n=(new Date(e[1])).getUTCFullYear()-(new Date(e[0])).getUTCFullYear();q=(new Date(e[0])).getUTCMonth();w=(new Date(e[1])).getUTCMonth();q=0===n?w-q+1:w+11-q+12*(n-1)+1;break;case "years":q=Math.round(((new Date(e[1])).getUTCFullYear()-(new Date(e[0])).getUTCFullYear())/q);break;case "decades":q=Math.round(((new Date(e[1])).getUTCFullYear()-
(new Date(e[0])).getUTCFullYear())/10/q);break;default:q=0}return q}J.createSlices=function(n,q){const e=[];let v=0;(q?n.variables.filter(w=>w.name.toLowerCase()===q.toLowerCase()):[...n.variables].sort((w,m)=>w.name>m.name?1:-1)).forEach(w=>{const m=[],a=[...w.dimensions].sort((c,b)=>c.name>b.name?-1:1);E(w.name,a,m);m.forEach(c=>{e.push({...c,sliceId:v++})})});return e};J.getDefaultMultidimensionalDefinition=function(n,q={}){var e=F(n,q);if(!e)return null;n=[];const {dimensions:v,name:w}=e;if(0===
v.length)return[new t({variableName:w,dimensionName:"",values:[],isSlice:!0})];for(e=0;e<v.length;e++){const m=P(v[e],q.multidimensionalSubset,w);if(!m)return null;const {values:a,extent:c}=m;let b=a?.[0]??c[0];"stdz"===m.name.toLowerCase()&&!m.hasRanges&&Math.abs(c[1])<=Math.abs(c[0])&&(b=a?.length?a[a.length-1]:c[1]);n.push(new t({variableName:w,dimensionName:m.name,values:[b],isSlice:q.useRangeForRangedDimensionInfo?!!m.hasRanges:!0}))}return n};J.getDefaultVariablInfo=F;J.getSliceIds=function(n,
q,e){let v=n;q&&(q=[...q].sort((w,m)=>w.dimensionName<m.dimensionName?-1:1),q.forEach(({dimensionName:w,values:m,isSlice:a})=>{m.length&&(v=v.filter(c=>{c=c.multidimensionalDefinition.find(d=>d.dimensionName===w);if(null==c)return!1;const b=c.values[0];return"number"===typeof b?"number"===typeof m[0]?m.includes(b):m.some(d=>d[0]<=b&&d[1]>=b):"number"===typeof m[0]?m.some(d=>b[0]<=d&&b[1]>=d):a?m.some(d=>d[0]===b[0]&&d[0]===b[1]):m.some(d=>d[0]>=b[0]&&d[0]<=b[1]||d[1]>=b[0]&&d[1]<=b[1]||d[0]<b[0]&&
d[1]>b[1])}))}));if(v.length&&e&&null!=e.start&&null!=e.end){const w=e.start.getTime(),m=e.end.getTime(),a=v[0].multidimensionalDefinition.findIndex(c=>"StdTime"===c.dimensionName);-1<a&&(v=v.filter(c=>{c=c.multidimensionalDefinition[a].values[0];return w<=c&&m>=c}))}return v.map(w=>w.sliceId)};J.getSliceIndex=function(n,q){let e=0;var v=n[0].variableName;q=[...q.variables].sort((m,a)=>m.name>a.name?1:-1);for(var w=0;w<q.length;w++){const m=q[w],a=[...m.dimensions].sort((c,b)=>c.name>b.name?-1:1);
if(m.name!==v)e+=a.map(c=>l(c)).reduce((c,b)=>c*b);else{v=a.map(c=>l(c));q=a.length;for(let c=0;c<q;c++){w=n.find(b=>b.dimensionName===a[c].name);if(null==w)return null;w=f(w.values[0],a[c]);if(-1===w)return null;v.shift();e=c===q-1?e+w:e+w*v.reduce((b,d)=>b*d)}break}}return e};J.getSubsetVariablesFromMdInfo=function(n,q){if(null==q||null==n)return null;q=q.variables.map(e=>({...e}));n?.variables?.length&&(q=q.filter(({name:e})=>n.variables.includes(e)),q.forEach(e=>{e.dimensions=e.dimensions.map(v=>
P(v,n,e.name)).filter(u.isSome)}));return q};J.hasExcludedVariableOrDimension=Q;J.intersectMultimensionalSubset=function(n,q){if(null==n)return{isOutside:!1};const {geometry:e,timeExtent:v,multidimensionalDefinition:w}=q;q=null;if(null!=v&&(q=D(n,v),null==q))return{isOutside:!0};const {areaOfInterest:m}=n;if(m&&e){const a="point"===e.type?e:"extent"===e.type?e.center:"polygon"===e.type?e.centroid:null;if(a&&!m.contains(a))return{isOutside:!0}}return null!=w&&w.length&&Q(w,n,!0)?{isOutside:!0}:{isOutside:!1,
intersection:{geometry:e,timeExtent:q,multidimensionalDefinition:w}}};J.isMultiSliceOrRangeDefinition=function(n){return null!=n&&n.length?n.some(q=>{if(null==q.values)return!0;const e=q.values.length;return 0===e||1<e||!q.isSlice&&Array.isArray(q.values[0])}):!1};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../../../core/maybe ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ./pixelRangeUtils ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l){async function n(p,y){if(!l.isPlatformLittleEndian)throw new u("rasterCoded:decode","lerc decoder is not supported on big endian platform");await L.load();const {offset:H}=y,{width:G,height:K,pixelType:A,statistics:I,depthCount:B,noDataValues:z,bandMasks:M,pixels:S,mask:W}=L.decode(p,{inputOffset:H,returnInterleaved:y.returnInterleaved});return new E({width:G,height:K,pixelType:A.toLowerCase(),pixels:S,mask:W,statistics:I,bandMasks:M,depthCount:B,noDataValues:z})}
async function q(p,y){p=await f.decode(p,{...y,noDataValue:null});t.assertIsSome(p);p=new E({width:p.width,height:p.height,pixels:p.pixels,pixelType:p.pixelType.toLowerCase(),mask:p.mask,statistics:null});p.updateStatistics();return p}async function e(p,y){p=await f.decodeTileOrStrip(p,y.customOptions);p=new E({width:p.width,height:p.height,pixels:p.pixels,pixelType:p.pixelType.toLowerCase(),mask:p.mask,statistics:null});p.updateStatistics();return p}function v(p,y){const H=y.pixelType||"u8",G=E.getPixelArrayConstructor(H),
K="u8"===H?p:new G(p.buffer),A=[],I=y.planes||1;if(1===I)A.push(K);else for(let B=0;B<I;B++){const z=(y.width||1)*(y.height||p.length),M=new G(z);for(let S=0;S<z;S++)M[S]=K[S*I+B];A.push(M)}p=new E({width:y.width||1,height:y.height||p.length,pixels:A,pixelType:H,statistics:null});p.updateStatistics();return p}function w(p,y){p=(new D.Zlib(new Uint8Array(p))).getBytes();return v(p,y)}function m(p,y){p=P.decode(p,y.offset,y.eof,!y.isInputBigEndian);return v(p,y)}function a(p,y){p=R.decode(p,y.hasNoZlibMask??
void 0);p=new E({width:p.width,height:p.height,pixels:p.pixels,pixelType:"U8",mask:p.mask,statistics:null});p.updateStatistics();return p}function c(p,y){p=new Uint8Array(p);p=new k(p);const {width:H,height:G}=y;y=H*G;p=p.decode();let K=0;var A=0;let I;A=new Uint8Array(y);for(K=0;K<y;K++)A[K]=p[4*K+3];const B=new E({width:H,height:G,pixels:[],pixelType:"U8",mask:A,statistics:[]});for(K=0;3>K;K++){I=new Uint8Array(y);for(A=0;A<y;A++)I[A]=p[4*A+K];B.addData({pixels:I})}B.updateStatistics();return B}
async function b(p,y,H,G){p=await (new r).decode(p,{applyJpegMask:!1,format:y,...H},G);p=new E(p);p.updateStatistics();return p}function d(p){if(null==p)throw new u("rasterCodec:decode","parameter encodeddata is required.");p=new Uint8Array(p,0,10);let y="";255===p[0]&&216===p[1]?y="jpg":137===p[0]&&80===p[1]&&78===p[2]&&71===p[3]?y="png":67===p[0]&&110===p[1]&&116===p[2]&&90===p[3]&&73===p[4]&&109===p[5]&&97===p[6]&&103===p[7]&&101===p[8]&&32===p[9]?y="lerc":76===p[0]&&101===p[1]&&114===p[2]&&99===
p[3]&&50===p[4]&&32===p[5]?y="lerc2":73===p[0]&&73===p[1]&&42===p[2]&&0===p[3]||77===p[0]&&77===p[1]&&0===p[2]&&42===p[3]||73===p[0]&&73===p[1]&&43===p[2]&&0===p[3]||77===p[0]&&77===p[1]&&0===p[2]&&43===p[3]?y="tiff":71===p[0]&&73===p[1]&&70===p[2]?y="gif":66===p[0]&&77===p[1]?y="bmp":String.fromCharCode.apply(null,p).toLowerCase().includes("error")&&(y="error");return y}function g(p){let y=null;switch(p){case "lerc":case "lerc2":y=n;break;case "jpg":y=a;break;case "png":y=c;break;case "bsq":case "bip":y=
(H,G)=>{var K=G.pixelType,A=null;let I=null;switch(K?K.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":I=255;A=Uint8Array;break;case "u16":I=I||65535;A=Uint16Array;break;case "u32":I=I||2**32-1;A=Uint32Array;break;case "s8":I=I||-128;A=Int8Array;break;case "s16":I=I||-32768;A=Int16Array;break;case "s32":I=I||-(2**31);A=Int32Array;break;default:A=Float32Array}({pixelTypeCtor:K}={pixelTypeCtor:A,noDataValue:I});A=F.decode;H=A(H,{width:G.width,height:G.height,pixelType:K,format:p});G=new E({width:G.width,
height:G.height,pixels:H.pixels,pixelType:G.pixelType,mask:H.mask,statistics:null});G.updateStatistics();return G};break;case "tiff":y=q;break;case "deflate":y=w;break;case "lzw":y=m;break;case "error":y=()=>{throw new u("rasterCodec:decode","input data contains error");};break;default:y=()=>{throw new u("rasterCodec:decode","unsupported raster format");}}return y}function h(p,y=1){if(p){var {pixels:H,width:G,height:K,mask:A}=p;if(H&&0!==H.length){var I=H.length,B=G-1,z=K-1,M=[],S,W,O=null,N=E.getPixelArrayConstructor(p.pixelType);
if(0===y){for(y=0;y<I;y++){var T=H[y];var V=new N(B*z);for(S=0;S<z;S++){var X=S*G;for(W=0;W<B;W++)V[S*B+W]=T[X+W]}M.push(V)}if(null!=A)for(O=new Uint8Array(B*z),S=0;S<z;S++)for(X=S*G,W=0;W<B;W++)O[S*B+W]=A[X+W]}else{for(y=0;y<I;y++){T=H[y];V=new N(B*z);for(S=0;S<z;S++)for(X=S*G,W=0;W<B;W++)V[S*B+W]=(T[X+W]+T[X+W+1]+T[X+G+W]+T[X+G+W+1])/4;M.push(V)}if(A)for(O=new Uint8Array(B*z),S=0;S<z;S++)for(X=S*G,W=0;W<B;W++)O[S*B+W]=Math.min.apply(null,[A[X+W],A[X+W+1],A[X+G+W],A[X+G+W+1]])}p.width=B;p.height=
z;p.mask=O;p.pixels=M}}}var k=function(p){function y(A){var I,B;this.data=A;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(B=null;;){var z=this.readUInt32();var M=A=void 0;A=[];for(M=0;4>M;++M)A.push(String.fromCharCode(this.data[this.pos++]));A=A.join("");switch(A){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];
this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(z);break;case "fcTL":B&&this.animation.frames.push(B);this.pos+=4;B={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};A=this.readUInt16();z=this.readUInt16()||100;B.delay=1E3*A/z;B.disposeOp=this.data[this.pos++];B.blendOp=
this.data[this.pos++];B.data=[];break;case "IDAT":case "fdAT":"fdAT"===A&&(this.pos+=4,z-=4);A=(null!=B?B.data:void 0)||this.imgData;for(M=0;0<=z?M<z:M>z;0<=z?++M:--M)A.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(z);z=255-this.transparency.indexed.length;if(0<z)for(A=0;0<=z?A<z:A>z;0<=z?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(z)[0];break;case 2:this.transparency.rgb=
this.read(z)}break;case "tEXt":M=this.read(z);z=M.indexOf(0);A=String.fromCharCode.apply(String,M.slice(0,z));this.text[A]=String.fromCharCode.apply(String,M.slice(z+1));break;case "IEND":B&&this.animation.frames.push(B);a:{switch(this.colorType){case 0:case 3:case 4:B=1;break a;case 2:case 6:B=3;break a}B=void 0}this.colors=B;this.hasAlphaChannel=4===(I=this.colorType)||6===I;I=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*I;a:{switch(this.colors){case 1:I="DeviceGray";break a;
case 3:I="DeviceRGB";break a}I=void 0}this.colorSpace=I;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=z}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var H;y.load=function(A,I,B){"function"===typeof I&&(B=I);var z=new XMLHttpRequest;z.open("GET",A,!0);z.responseType="arraybuffer";z.onload=function(){var M=new Uint8Array(z.response||z.mozResponseArrayBuffer);M=new y(M);"function"===typeof(null!=I?I.getContext:void 0)&&M.render(I);return"function"===
typeof B?B(M):void 0};return z.send(null)};y.prototype.read=function(A){var I;var B=[];for(I=0;0<=A?I<A:I>A;0<=A?++I:--I)B.push(this.data[this.pos++]);return B};y.prototype.readUInt32=function(){var A=this.data[this.pos++]<<24;var I=this.data[this.pos++]<<16;var B=this.data[this.pos++]<<8;var z=this.data[this.pos++];return A|I|B|z};y.prototype.readUInt16=function(){var A=this.data[this.pos++]<<8;var I=this.data[this.pos++];return A|I};y.prototype.decodePixels=function(A){var I,B,z,M,S,W,O,N;null==
A&&(A=this.imgData);if(0===A.length)return new Uint8Array(0);A=new D.Zlib(A);A=A.getBytes();var T=this.pixelBitlength/8;var V=T*this.width;var X=new Uint8Array(V*this.height);var ba=A.length;for(B=M=S=0;M<ba;){switch(A[M++]){case 0:for(z=I=0;I<V;z=I+=1)X[B++]=A[M++];break;case 1:for(z=W=0;W<V;z=W+=1){I=A[M++];var Y=z<T?0:X[B-T];X[B++]=(I+Y)%256}break;case 2:for(z=Y=0;Y<V;z=Y+=1){I=A[M++];var ca=(z-z%T)/T;W=S&&X[(S-1)*V+ca*T+z%T];X[B++]=(W+I)%256}break;case 3:for(z=N=0;N<V;z=N+=1)I=A[M++],ca=(z-z%
T)/T,Y=z<T?0:X[B-T],W=S&&X[(S-1)*V+ca*T+z%T],X[B++]=(I+Math.floor((Y+W)/2))%256;break;case 4:for(z=N=0;N<V;z=N+=1){I=A[M++];ca=(z-z%T)/T;Y=z<T?0:X[B-T];0===S?W=O=0:(W=X[(S-1)*V+ca*T+z%T],O=ca&&X[(S-1)*V+(ca-1)*T+z%T]);var Z=Y+W-O;z=Math.abs(Z-Y);ca=Math.abs(Z-W);Z=Math.abs(Z-O);Y=z<=ca&&z<=Z?Y:ca<=Z?W:O;X[B++]=(I+Y)%256}break;default:throw Error("Invalid filter algorithm: "+A[M-1]);}S++}return X};y.prototype.decodePalette=function(){var A,I,B,z;var M=this.palette;var S=this.transparency.indexed||
[];var W=new Uint8Array((S.length||0)+M.length);var O=0;M.length;var N=I=A=0;for(B=M.length;I<B;N=I+=3)W[O++]=M[N],W[O++]=M[N+1],W[O++]=M[N+2],W[O++]=null!=(z=S[A++])?z:255;return W};y.prototype.copyToImageData=function(A,I){var B,z;var M=this.colors;var S=null;var W=this.hasAlphaChannel;this.palette.length&&(S=null!=(B=this._decodedPalette)?B:this._decodedPalette=this.decodePalette(),M=4,W=!0);A=A.data||A;var O=A.length;var N=S||I;B=z=0;if(1===M)for(;B<O;)M=S?4*I[B/4]:z,z=N[M++],A[B++]=z,A[B++]=
z,A[B++]=z,A[B++]=W?N[M++]:this.transparency.grayscale&&this.transparency.grayscale===z?0:255,z=M;else for(;B<O;)M=S?4*I[B/4]:z,A[B++]=N[M++],A[B++]=N[M++],A[B++]=N[M++],A[B++]=W?N[M++]:this.transparency.rgb&&this.transparency.rgb[1]===N[M-3]&&this.transparency.rgb[3]===N[M-2]&&this.transparency.rgb[5]===N[M-1]?0:255,z=M};y.prototype.decode=function(){var A=new Uint8Array(this.width*this.height*4);this.copyToImageData(A,this.decodePixels());return A};var G=(H=p.document&&p.document.createElement("canvas"))&&
H.getContext("2d");var K=function(A){G.width=A.width;G.height=A.height;G.clearRect(0,0,A.width,A.height);G.putImageData(A,0,0);A=new Image;A.src=H.toDataURL();return A};y.prototype.decodeFrames=function(A){var I,B;if(this.animation){var z=this.animation.frames;var M=[];var S=I=0;for(B=z.length;I<B;S=++I){S=z[S];var W=A.createImageData(S.width,S.height);var O=this.decodePixels(new Uint8Array(S.data));this.copyToImageData(W,O);S.imageData=W;M.push(S.image=K(W))}return M}};y.prototype.renderFrame=function(A,
I){var B=this.animation.frames;var z=B[I];B=B[I-1];0===I&&A.clearRect(0,0,this.width,this.height);1===(null!=B?B.disposeOp:void 0)?A.clearRect(B.xOffset,B.yOffset,B.width,B.height):2===(null!=B?B.disposeOp:void 0)&&A.putImageData(B.imageData,B.xOffset,B.yOffset);0===z.blendOp&&A.clearRect(z.xOffset,z.yOffset,z.width,z.height);return A.drawImage(z.image,z.xOffset,z.yOffset)};y.prototype.animate=function(A){var I,B=this;var z=0;var M=this.animation;var S=M.numFrames;var W=M.frames;var O=M.numPlays;
return(I=function(){var N=z++%S;var T=W[N];B.renderFrame(A,N);if(1<S&&z/S<O)return B.animation._timeout=setTimeout(I,T.delay)})()};y.prototype.stopAnimation=function(){var A;return clearTimeout(null!=(A=this.animation)?A._timeout:void 0)};y.prototype.render=function(A){A._png&&A._png.stopAnimation();A._png=this;A.width=this.width;A.height=this.height;A=A.getContext("2d");if(this.animation)return this.decodeFrames(A),this.animate(A);var I=A.createImageData(this.width,this.height);this.copyToImageData(I,
this.decodePixels());return A.putImageData(I,0,0)};return y}(self);const x=new Set(["jpg","png","bmp","gif"]);J.decode=async function(p,y={},H){if(null==p)throw new u("rasterCodec:decode","missing encodeddata parameter.");let G=y.format&&y.format.toLowerCase();if(!("bsq"!==G&&"bip"!==G||null!=y.width&&null!=y.height))throw new u("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===G&&y.customOptions)return e(p,y);if(!G||"bsq"!==G&&"bip"!==G&&"deflate"!==G&&"lzw"!==G)G=
d(p);if(y.useCanvas&&x.has(G))return b(p,G,y,H);H=g(G);y.isPoint&&(y={...y},null!=y.width&&y.width++,null!=y.height&&y.height++);p=await H(p,y);if(!p)return p;"jpg"!==G&&null!=y.noDataValue&&1===p.depthCount&&Q.convertNoDataToMask(p,y.noDataValue,{customFloatTolerance:y.tolerance});y.isPoint&&h(p);return p};J.getFormat=function(p){p=d(p);"lerc2"===p?p="lerc":"error"===p&&(p="");return p};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(J,u,t,E){return function(){function r(R){this._ctx=this._canvas=null;R&&(this._canvas=R.canvas,this._ctx=R.ctx||R.canvas&&R.canvas.getContext("2d"))}r.prototype.decode=function(R,L,P){if(!R||10>R.byteLength)throw new u("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:Q=0,height:D=0,format:F}=L;const {applyJpegMask:f}=L;if(f&&(!Q||!D))throw new u("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");
return new Promise((l,n)=>{let q=null;"jpg"===F&&f&&(q=r._getMask(R,{width:Q,height:D}));const e=new Blob([new Uint8Array(R)],{type:"jpg"==="image/"+F?"jpeg":F}),v=URL.createObjectURL(e),w=new Image;let m;w.src=v;w.onload=()=>{URL.revokeObjectURL(v);if(t.isAborted(P))n(t.createAbortError());else{Q=w.width;D=w.height;if(this._canvas&&this._ctx){if(this._canvas.width!==Q||this._canvas.height!==D)this._canvas.width=Q,this._canvas.height=D;this._ctx.clearRect(0,0,Q,D)}else this._canvas=document.createElement("canvas"),
this._canvas.width=Q,this._canvas.height=D,this._ctx=this._canvas.getContext("2d");this._ctx.drawImage(w,0,0);var a=this._ctx.getImageData(0,0,Q,D);m=a.data;var c;if(L.renderOnCanvas){if(q)for(c=0;c<q.length;c++)m[4*c+3]=q[c]?255:0;this._ctx.putImageData(a,0,0);l(null)}else{a=Q*D;var b=new Uint8Array(a),d=new Uint8Array(a),g=new Uint8Array(a);if(q)for(c=0;c<a;c++)b[c]=m[4*c],d[c]=m[4*c+1],g[c]=m[4*c+2];else for(q=new Uint8Array(a),c=0;c<a;c++)b[c]=m[4*c],d[c]=m[4*c+1],g[c]=m[4*c+2],q[c]=m[4*c+3];
l({width:Q,height:D,pixels:[b,d,g],mask:q,pixelType:"u8"})}}};w.onerror=()=>{URL.revokeObjectURL(v);n("cannot load image")}})};r._getMask=function(R,L){let P=null;try{var Q=new Uint8Array(R);R=0;var D=Q.length-2;for(R=Math.ceil(Q.length/2);R<D&&(255!==Q[R]||217!==Q[R+1]);R++);R+=2;if(R<Q.length-1){const F=(new E.Zlib(Q.subarray(R))).getBytes();P=new Uint8Array(L.width*L.height);L=0;for(Q=0;Q<F.length;Q++)for(D=7;0<=D;D--)P[L++]=F[Q]>>D&1}}catch(F){}return P};return J._createClass(r)}()})},"esri/chunks/Zlib":function(){define(["exports",
"./_commonjsHelpers"],function(J,u){var t={exports:{}};t.exports;(function(E){(function(r){r=r();void 0!==r&&(E.exports=r)})(function(){var r=function(){function R(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}R.prototype={ensureBuffer:function(L){var P=this.buffer,Q=P?P.byteLength:0;if(L<Q)return P;for(var D=512;D<L;)D<<=1;L=new Uint8Array(D);for(D=0;D<Q;++D)L[D]=P[D];return this.buffer=L},getByte:function(){for(var L=this.pos;this.bufferLength<=L;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},
getBytes:function(L){var P=this.pos;if(L){this.ensureBuffer(P+L);for(L=P+L;!this.eof&&this.bufferLength<L;)this.readBlock();var Q=this.bufferLength;L>Q&&(L=Q)}else{for(;!this.eof;)this.readBlock();L=this.bufferLength}this.pos=L;return this.buffer.subarray(P,L)},lookChar:function(){for(var L=this.pos;this.bufferLength<=L;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var L=this.pos;this.bufferLength<=L;){if(this.eof)return null;
this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(L,P,Q){for(var D=L+P;this.bufferLength<=D&&!this.eof;)this.readBlock();return new Stream(this.buffer,L,P,Q)},skip:function(L){L||(L=1);this.pos+=L},reset:function(){this.pos=0}};return R}();return function(){function R(l){throw Error(l);}function L(l){var n=0,q=l[n++],e=l[n++];-1!=q&&-1!=e||R("Invalid header in flate stream");8!=(q&15)&&R("Unknown compression method in flate stream");0!=((q<<8)+e)%31&&R("Bad FCHECK in flate stream");
e&32&&R("FDICT bit set in flate stream");this.bytes=l;this.bytesPos=n;this.codeBuf=this.codeSize=0;r.call(this)}if(!self||!self.Uint32Array)return null;var P=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Q=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),D=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,
393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),F=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,
524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,
524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,
524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,
524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,
524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,
524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,
524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],f=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];L.prototype=Object.create(r.prototype);L.prototype.getBits=function(l){for(var n=
this.codeSize,q=this.codeBuf,e=this.bytes,v=this.bytesPos,w;n<l;)"undefined"==typeof(w=e[v++])&&R("Bad encoding in flate stream"),q|=w<<n,n+=8;this.codeBuf=q>>l;this.codeSize=n-=l;this.bytesPos=v;return q&(1<<l)-1};L.prototype.getCode=function(l){var n=l[0],q=l[1];l=this.codeSize;for(var e=this.codeBuf,v=this.bytes,w=this.bytesPos;l<q;){var m;"undefined"==typeof(m=v[w++])&&R("Bad encoding in flate stream");e|=m<<l;l+=8}q=n[e&(1<<q)-1];n=q>>16;q&=65535;(0==l||l<n||0==n)&&R("Bad encoding in flate stream");
this.codeBuf=e>>n;this.codeSize=l-n;this.bytesPos=w;return q};L.prototype.generateHuffmanTable=function(l){for(var n=l.length,q=0,e=0;e<n;++e)l[e]>q&&(q=l[e]);for(var v=1<<q,w=new Uint32Array(v),m=1,a=0,c=2;m<=q;++m,a<<=1,c<<=1)for(var b=0;b<n;++b)if(l[b]==m){var d=0,g=a;for(e=0;e<m;++e)d=d<<1|g&1,g>>=1;for(e=d;e<v;e+=c)w[e]=m<<16|b;++a}return[w,q]};L.prototype.readBlock=function(){function l(d,g,h,k,x){for(d=d.getBits(h)+k;0<d--;)g[a++]=x}var n=this.getBits(3);n&1&&(this.eof=!0);n>>=1;if(0==n){var q=
this.bytes,e=this.bytesPos,v;"undefined"==typeof(v=q[e++])&&R("Bad block header in flate stream");var w=v;"undefined"==typeof(v=q[e++])&&R("Bad block header in flate stream");w|=v<<8;"undefined"==typeof(v=q[e++])&&R("Bad block header in flate stream");n=v;"undefined"==typeof(v=q[e++])&&R("Bad block header in flate stream");(n|v<<8)!=(~w&65535)&&R("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;v=this.bufferLength;n=this.ensureBuffer(v+w);this.bufferLength=w=v+w;for(var m=
v;m<w;++m){if("undefined"==typeof(v=q[e++])){this.eof=!0;break}n[m]=v}this.bytesPos=e}else{if(1==n)e=F,v=f;else if(2==n){n=this.getBits(5)+257;v=this.getBits(5)+1;q=this.getBits(4)+4;e=Array(P.length);for(var a=0;a<q;)e[P[a++]]=this.getBits(3);e=this.generateHuffmanTable(e);a=q=0;v=n+v;for(w=Array(v);a<v;)m=this.getCode(e),16==m?l(this,w,2,3,q):17==m?l(this,w,3,3,q=0):18==m?l(this,w,7,11,q=0):w[a++]=q=m;e=this.generateHuffmanTable(w.slice(0,n));v=this.generateHuffmanTable(w.slice(n,v))}else R("Unknown block type in flate stream");
w=(n=this.buffer)?n.length:0;for(m=this.bufferLength;;){var c=this.getCode(e);if(256>c)m+1>=w&&(n=this.ensureBuffer(m+1),w=n.length),n[m++]=c;else{if(256==c){this.bufferLength=m;break}c-=257;c=Q[c];var b=c>>16;0<b&&(b=this.getBits(b));q=(c&65535)+b;c=this.getCode(v);c=D[c];b=c>>16;0<b&&(b=this.getBits(b));c=(c&65535)+b;m+q>=w&&(n=this.ensureBuffer(m+q),w=n.length);for(b=0;b<q;++b,++m)n[m]=n[m-c]}}}};return L}()})})(t);u=u.getDefaultExportFromCjs(t.exports);J.Zlib=u})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../chunks/Jpg","../../../chunks/Zlib"],function(J,u,t){return function(){function E(){}E.decode=function(r,R=!1){const L=new Uint8Array(r);r=new u.JpegImage;r.parse(L);const {width:P,height:Q,numComponents:D,eof:F}=r,f=r.getData(P,Q,!0),l=P*Q;r=null;let n=0,q=0,e=0;if(!R&&F<L.length-1)try{var v=(new t.Zlib(L.subarray(F))).getBytes();r=new Uint8Array(l);for(n=R=0;n<v.length;n++)for(e=7;0<=e;e--)r[R++]=v[n]>>e&1}catch{}if(1===D&&f.length===P*Q)v=new Uint8Array(f.buffer),v=[v,v,v];else{v=[];for(n=
0;3>n;n++)v.push(new Uint8Array(l));for(q=e=0;q<l;q++)for(n=0;3>n;n++)v[n][q]=f[e++]}return{width:P,height:Q,pixels:v,mask:r}};return J._createClass(E)}()})},"esri/chunks/Jpg":function(){define(["exports","./_commonjsHelpers"],function(J,u){var t={exports:{}};t.exports;(function(E){(function(r){r=r();void 0!==r&&(E.exports=r)})(function(){var r=function(){function R(L){this.message="JPEG error: "+L}R.prototype=Error();R.prototype.name="JpegError";return R.constructor=R}();return function(){function R(){this.decodeTransform=
null;this.colorTransform=-1}function L(f,l){for(var n=0,q=[],e,v,w=16;0<w&&!f[w-1];)w--;q.push({children:[],index:0});var m=q[0],a;for(e=0;e<w;e++){for(v=0;v<f[e];v++){m=q.pop();for(m.children[m.index]=l[n];0<m.index;)m=q.pop();m.index++;for(q.push(m);q.length<=e;)q.push(a={children:[],index:0}),m.children[m.index]=a.children,m=a;n++}e+1<w&&(q.push(a={children:[],index:0}),m.children[m.index]=a.children,m=a)}return q[0].children}function P(f,l,n,q,e,v,w,m,a){function c(){if(0<A)return A--,K>>A&1;
K=f[l++];if(255===K){var ca=f[l++];if(ca)throw new r("unexpected marker "+(K<<8|ca).toString(16));}A=7;return K>>>7}function b(ca){for(;;){ca=ca[c()];if("number"===typeof ca)return ca;if("object"!==typeof ca)throw new r("invalid huffman sequence");}}function d(ca){for(var Z=0;0<ca;)Z=Z<<1|c(),ca--;return Z}function g(ca){if(1===ca)return 1===c()?1:-1;var Z=d(ca);return Z>=1<<ca-1?Z:Z+(-1<<ca)+1}function h(ca,Z){var ea=b(ca.huffmanTableDC);ea=0===ea?0:g(ea);ca.blockData[Z]=ca.pred+=ea;for(ea=1;64>
ea;){var fa=b(ca.huffmanTableAC),ha=fa&15;fa>>=4;if(0===ha){if(15>fa)break;ea+=16}else ea+=fa,ca.blockData[Z+F[ea]]=g(ha),ea++}}function k(ca,Z){var ea=b(ca.huffmanTableDC);ea=0===ea?0:g(ea)<<a;ca.blockData[Z]=ca.pred+=ea}function x(ca,Z){ca.blockData[Z]|=c()<<a}function p(ca,Z){if(0<I)I--;else for(var ea=v;ea<=w;){var fa=b(ca.huffmanTableAC),ha=fa&15;fa>>=4;if(0===ha){if(15>fa){I=d(fa)+(1<<fa)-1;break}ea+=16}else ea+=fa,ca.blockData[Z+F[ea]]=g(ha)*(1<<a),ea++}}function y(ca,Z){for(var ea=v,fa=0,
ha;ea<=w;){ha=F[ea];switch(B){case 0:fa=b(ca.huffmanTableAC);ha=fa&15;fa>>=4;if(0===ha)15>fa?(I=d(fa)+(1<<fa),B=4):(fa=16,B=1);else{if(1!==ha)throw new r("invalid ACn encoding");z=g(ha);B=fa?2:3}continue;case 1:case 2:ca.blockData[Z+ha]?ca.blockData[Z+ha]+=c()<<a:(fa--,0===fa&&(B=2===B?3:0));break;case 3:ca.blockData[Z+ha]?ca.blockData[Z+ha]+=c()<<a:(ca.blockData[Z+ha]=z<<a,B=0);break;case 4:ca.blockData[Z+ha]&&(ca.blockData[Z+ha]+=c()<<a)}ea++}4===B&&(I--,0===I&&(B=0))}var H=n.mcusPerLine,G=l,K=
0,A=0,I=0,B=0,z,M=q.length,S,W,O,N;m=n.progressive?0===v?0===m?k:x:0===m?p:y:h;var T=0;n=1===M?q[0].blocksPerLine*q[0].blocksPerColumn:H*n.mcusPerColumn;for(var V,X;T<n;){var ba=e?Math.min(n-T,e):n;for(S=0;S<M;S++)q[S].pred=0;I=0;if(1===M){var Y=q[0];for(N=0;N<ba;N++)m(Y,64*((Y.blocksPerLine+1)*(T/Y.blocksPerLine|0)+T%Y.blocksPerLine)),T++}else for(N=0;N<ba;N++){for(S=0;S<M;S++)for(Y=q[S],V=Y.h,X=Y.v,W=0;W<X;W++)for(O=0;O<V;O++)m(Y,64*((Y.blocksPerLine+1)*((T/H|0)*Y.v+W)+(T%H*Y.h+O)));T++}A=0;(Y=
D(f,l))&&Y.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+Y.invalid),l=Y.offset);Y=Y&&Y.marker;if(!Y||65280>=Y)throw new r("marker was not found");if(65488<=Y&&65495>=Y)l+=2;else break}(Y=D(f,l))&&Y.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+Y.invalid),l=Y.offset);return l-G}function Q(f,l){f=l.blocksPerLine;for(var n=l.blocksPerColumn,q=new Int16Array(64),e=0;e<n;e++)for(var v=0;v<f;v++){var w=void 0,m=void 0,a=void 0,c=void 0,b=void 0,
d=void 0,g=void 0,h=void 0,k=b=d=c=m=w=void 0,x=void 0,p=void 0,y=void 0,H=64*((l.blocksPerLine+1)*e+v),G=q,K=l.quantizationTable,A=l.blockData;if(!K)throw new r("missing required Quantization Table.");for(var I=0;64>I;I+=8)w=A[H+I],h=A[H+I+1],g=A[H+I+2],d=A[H+I+3],b=A[H+I+4],c=A[H+I+5],a=A[H+I+6],m=A[H+I+7],w*=K[I],0===(h|g|d|b|c|a|m)?(w=5793*w+512>>10,G[I]=w,G[I+1]=w,G[I+2]=w,G[I+3]=w,G[I+4]=w,G[I+5]=w,G[I+6]=w,G[I+7]=w):(h*=K[I+1],g*=K[I+2],d*=K[I+3],b*=K[I+4],c*=K[I+5],a*=K[I+6],m*=K[I+7],y=5793*
w+128>>8,p=5793*b+128>>8,x=g,k=a,b=2896*(h-m)+128>>8,m=2896*(h+m)+128>>8,d<<=4,c<<=4,y=y+p+1>>1,p=y-p,w=3784*x+1567*k+128>>8,x=1567*x-3784*k+128>>8,k=w,b=b+c+1>>1,c=b-c,m=m+d+1>>1,d=m-d,y=y+k+1>>1,k=y-k,p=p+x+1>>1,x=p-x,w=2276*b+3406*m+2048>>12,b=3406*b-2276*m+2048>>12,m=w,w=799*d+4017*c+2048>>12,d=4017*d-799*c+2048>>12,c=w,G[I]=y+m,G[I+7]=y-m,G[I+1]=p+c,G[I+6]=p-c,G[I+2]=x+d,G[I+5]=x-d,G[I+3]=k+b,G[I+4]=k-b);for(K=0;8>K;++K)w=G[K],h=G[K+8],g=G[K+16],d=G[K+24],b=G[K+32],c=G[K+40],a=G[K+48],m=G[K+
56],0===(h|g|d|b|c|a|m)?(w=5793*w+8192>>14,w=-2040>w?0:2024<=w?255:w+2056>>4,A[H+K]=w,A[H+K+8]=w,A[H+K+16]=w,A[H+K+24]=w,A[H+K+32]=w,A[H+K+40]=w,A[H+K+48]=w,A[H+K+56]=w):(y=5793*w+2048>>12,p=5793*b+2048>>12,x=g,k=a,b=2896*(h-m)+2048>>12,m=2896*(h+m)+2048>>12,y=(y+p+1>>1)+4112,p=y-p,w=3784*x+1567*k+2048>>12,x=1567*x-3784*k+2048>>12,k=w,b=b+c+1>>1,c=b-c,m=m+d+1>>1,d=m-d,y=y+k+1>>1,k=y-k,p=p+x+1>>1,x=p-x,w=2276*b+3406*m+2048>>12,b=3406*b-2276*m+2048>>12,m=w,w=799*d+4017*c+2048>>12,d=4017*d-799*c+2048>>
12,c=w,w=y+m,m=y-m,h=p+c,a=p-c,g=x+d,c=x-d,d=k+b,b=k-b,w=16>w?0:4080<=w?255:w>>4,h=16>h?0:4080<=h?255:h>>4,g=16>g?0:4080<=g?255:g>>4,d=16>d?0:4080<=d?255:d>>4,b=16>b?0:4080<=b?255:b>>4,c=16>c?0:4080<=c?255:c>>4,a=16>a?0:4080<=a?255:a>>4,m=16>m?0:4080<=m?255:m>>4,A[H+K]=w,A[H+K+8]=h,A[H+K+16]=g,A[H+K+24]=d,A[H+K+32]=b,A[H+K+40]=c,A[H+K+48]=a,A[H+K+56]=m)}return l.blockData}function D(f,l,n){var q=f.length-1;n=n<l?n:l;if(l>=q)return null;var e=f[l]<<8|f[l+1];if(65472<=e&&65534>=e)return{invalid:null,
marker:e,offset:l};for(l=f[n]<<8|f[n+1];!(65472<=l&&65534>=l);){if(++n>=q)return null;l=f[n]<<8|f[n+1]}return{invalid:e.toString(16),marker:l,offset:n}}if(!self||!self.Uint8ClampedArray)return null;var F=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);R.prototype={parse:function(f){function l(){var K=f[e]<<8|f[e+1];e+=2;return K}function n(){var K=
l();K=e+K-2;var A=D(f,K,e);A&&A.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+A.invalid),K=A.offset);K=f.subarray(e,K);e+=K.length;return K}function q(K){for(var A=Math.ceil(K.samplesPerLine/8/K.maxH),I=Math.ceil(K.scanLines/8/K.maxV),B=0;B<K.components.length;B++){G=K.components[B];var z=Math.ceil(Math.ceil(K.samplesPerLine/8)*G.h/K.maxH),M=Math.ceil(Math.ceil(K.scanLines/8)*G.v/K.maxV);G.blockData=new Int16Array(64*I*G.v*(A*G.h+1));G.blocksPerLine=z;G.blocksPerColumn=
M}K.mcusPerLine=A;K.mcusPerColumn=I}var e=0,v=null,w=null,m=[],a=[],c=[],b=l();if(65496!==b)throw new r("SOI not found");for(b=l();65497!==b;){switch(b){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var d=n();65504===b&&74===d[0]&&70===d[1]&&73===d[2]&&70===d[3]&&0===d[4]&&(v={version:{major:d[5],minor:d[6]},densityUnits:d[7],xDensity:d[8]<<8|d[9],yDensity:d[10]<<
8|d[11],thumbWidth:d[12],thumbHeight:d[13],thumbData:d.subarray(14,14+3*d[12]*d[13])});65518===b&&65===d[0]&&100===d[1]&&111===d[2]&&98===d[3]&&101===d[4]&&(w={version:d[5]<<8|d[6],flags0:d[7]<<8|d[8],flags1:d[9]<<8|d[10],transformCode:d[11]});break;case 65499:b=l()+e-2;for(var g;e<b;){var h=f[e++],k=new Uint16Array(64);if(0===h>>4)for(d=0;64>d;d++)g=F[d],k[g]=f[e++];else if(1===h>>4)for(d=0;64>d;d++)g=F[d],k[g]=l();else throw new r("DQT - invalid table spec");m[h&15]=k}break;case 65472:case 65473:case 65474:if(x)throw new r("Only single frame JPEGs supported");
l();var x={};x.extended=65473===b;x.progressive=65474===b;x.precision=f[e++];x.scanLines=l();x.samplesPerLine=l();x.components=[];x.componentIds={};d=f[e++];for(b=k=h=0;b<d;b++){g=f[e];var p=f[e+1]>>4;var y=f[e+1]&15;h<p&&(h=p);k<y&&(k=y);p=x.components.push({h:p,v:y,quantizationId:f[e+2],quantizationTable:null});x.componentIds[g]=p-1;e+=3}x.maxH=h;x.maxV=k;q(x);break;case 65476:g=l();for(b=2;b<g;){h=f[e++];k=new Uint8Array(16);for(d=p=0;16>d;d++,e++)p+=k[d]=f[e];y=new Uint8Array(p);for(d=0;d<p;d++,
e++)y[d]=f[e];b+=17+p;(0===h>>4?c:a)[h&15]=L(k,y)}break;case 65501:l();var H=l();break;case 65498:l();g=f[e++];d=[];for(b=0;b<g;b++){h=x.componentIds[f[e++]];var G=x.components[h];h=f[e++];G.huffmanTableDC=c[h>>4];G.huffmanTableAC=a[h&15];d.push(G)}b=f[e++];g=f[e++];h=f[e++];b=P(f,e,x,d,H,b,g,h>>4,h&15);e+=b;break;case 65535:255!==f[e]&&e--;break;default:if(255===f[e-3]&&192<=f[e-2]&&254>=f[e-2])e-=3;else throw new r("unknown marker "+b.toString(16));}b=l()}this.width=x.samplesPerLine;this.height=
x.scanLines;this.jfif=v;this.eof=e;this.adobe=w;this.components=[];for(b=0;b<x.components.length;b++){G=x.components[b];if(v=m[G.quantizationId])G.quantizationTable=v;this.components.push({output:Q(x,G),scaleX:G.h/x.maxH,scaleY:G.v/x.maxV,blocksPerLine:G.blocksPerLine,blocksPerColumn:G.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(f,l){var n=this.width/f,q=this.height/l,e,v,w=0,m=this.components.length,a=f*l*m,c=new Uint8ClampedArray(a),b=new Uint32Array(f);
for(v=0;v<m;v++){var d=this.components[v];var g=d.scaleX*n;var h=d.scaleY*q;w=v;var k=d.output;var x=d.blocksPerLine+1<<3;for(e=0;e<f;e++)d=0|e*g,b[e]=(d&4294967288)<<3|d&7;for(g=0;g<l;g++)for(d=0|g*h,d=x*(d&4294967288)|(d&7)<<3,e=0;e<f;e++)c[w]=k[d+b[e]],w+=m}if(l=this.decodeTransform)for(v=0;v<a;)for(f=d=0;d<m;d++,v++,f+=2)c[v]=(c[v]*l[f]>>8)+l[f+1];return c},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===
this.colorTransform?!0:!1},_convertYccToRgb:function(f){for(var l,n,q,e=0,v=f.length;e<v;e+=3)l=f[e],n=f[e+1],q=f[e+2],f[e]=l-179.456+1.402*q,f[e+1]=l+135.459-.344*n-.714*q,f[e+2]=l-226.816+1.772*n;return f},_convertYcckToRgb:function(f){for(var l,n,q,e,v=0,w=0,m=f.length;w<m;w+=4)l=f[w],n=f[w+1],q=f[w+2],e=f[w+3],f[v++]=-122.67195406894+n*(-6.60635669420364E-5*n+4.37130475926232E-4*q-5.4080610064599E-5*l+4.8449797120281E-4*e-.154362151871126)+q*(-9.57964378445773E-4*q+8.17076911346625E-4*l-.00477271405408747*
e+1.53380253221734)+l*(9.61250184130688E-4*l-.00266257332283933*e+.48357088451265)+e*(-3.36197177618394E-4*e+.484791561490776),f[v++]=107.268039397724+n*(2.19927104525741E-5*n-6.40992018297945E-4*q+6.59397001245577E-4*l+4.26105652938837E-4*e-.176491792462875)+q*(-7.78269941513683E-4*q+.00130872261408275*l+7.70482631801132E-4*e-.151051492775562)+l*(.00126935368114843*l-.00265090189010898*e+.25802910206845)+e*(-3.18913117588328E-4*e-.213742400323665),f[v++]=-20.810012546947+n*(-5.70115196973677E-4*
n-2.63409051004589E-5*q+.0020741088115012*l-.00288260236853442*e+.814272968359295)+q*(-1.53496057440975E-5*q-1.32689043961446E-4*l+5.60833691242812E-4*e-.195152027534049)+l*(.00174418132927582*l-.00255243321439347*e+.116935020465145)+e*(-3.43531996510555E-4*e+.24165260232407);return f},_convertYcckToCmyk:function(f){for(var l,n,q,e=0,v=f.length;e<v;e+=4)l=f[e],n=f[e+1],q=f[e+2],f[e]=434.456-l-1.402*q,f[e+1]=119.541-l+.344*n+.714*q,f[e+2]=481.816-l-1.772*n;return f},_convertCmykToRgb:function(f){for(var l,
n,q,e,v=0,w=1/255,m=0,a=f.length;m<a;m+=4)l=f[m]*w,n=f[m+1]*w,q=f[m+2]*w,e=f[m+3]*w,f[v++]=255+l*(-4.387332384609988*l+54.48615194189176*n+18.82290502165302*q+212.25662451639585*e-285.2331026137004)+n*(1.7149763477362134*n-5.6096736904047315*q-17.873870861415444*e-5.497006427196366)+q*(-2.5217340131683033*q-21.248923337353073*e+17.5119270841813)-e*(21.86122147463605*e+189.48180835922747),f[v++]=255+l*(8.841041422036149*l+60.118027045597366*n+6.871425592049007*q+31.159100130055922*e-79.2970844816548)+
n*(-15.310361306967817*n+17.575251261109482*q+131.35250912493976*e-190.9453302588951)+q*(4.444339102852739*q+9.8632861493405*e-24.86741582555878)-e*(20.737325471181034*e+187.80453709719578),f[v++]=255+l*(.8842522430003296*l+8.078677503112928*n+30.89978309703729*q-.23883238689178934*e-14.183576799673286)+n*(10.49593273432072*n+63.02378494754052*q+50.606957656360734*e-112.23884253719248)+q*(.03296041114873217*q+115.60384449646641*e-193.58209356861505)-e*(22.33816807309886*e+180.12613974708367);return f},
getData:function(f,l,n){if(4<this.numComponents)throw new r("Unsupported color mode");f=this._getLinearizedBlockData(f,l);if(1===this.numComponents&&n){n=f.length;l=new Uint8ClampedArray(3*n);for(var q=0,e=0;e<n;e++){var v=f[e];l[q++]=v;l[q++]=v;l[q++]=v}return l}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(f);if(4===this.numComponents){if(this._isColorConversionNeeded())return n?this._convertYcckToRgb(f):this._convertYcckToCmyk(f);if(n)return this._convertCmykToRgb(f)}return f}};
return R}()})})(t);u=u.getDefaultExportFromCjs(t.exports);J.JpegImage=u})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(J,u,t){function E(D,F,f){f.set(D.slice(F,F+f.length))}function r(D){const {_malloc:F,_free:f,_lerc_getBlobInfo:l,_lerc_getDataRanges:n,_lerc_decode_4D:q,asm:e}=D;let v;const w=Object.values(e).find(a=>a&&"buffer"in a&&a.buffer===D.HEAPU8.buffer),m=a=>{a=a.map(d=>(d>>3<<3)+16);var c=a.reduce((d,g)=>d+g),b=F(c);v=new Uint8Array(w.buffer);
c=a[0];a[0]=b;for(b=1;b<a.length;b++){const d=a[b];a[b]=a[b-1]+c;c=d}return a};Q.getBlobInfo=a=>{var c=new Uint8Array(48),b=new Uint8Array(24);const [d,g,h]=m([a.length,c.length,b.length]);v.set(a,d);v.set(c,g);v.set(b,h);var k=l(d,a.length,g,h,12,3);if(k)throw f(d),Error(`lerc-getBlobInfo: error code is ${k}`);v=new Uint8Array(w.buffer);E(v,g,c);E(v,h,b);c=new Uint32Array(c.buffer);var x=new Float64Array(b.buffer);const [p,y,,H,G,K,A,I,B,z,M]=c;b={version:p,depthCount:z,width:H,height:G,validPixelCount:A,
bandCount:K,blobSize:I,maskCount:B,dataType:y,minValue:x[0],maxValue:x[1],maxZerror:x[2],statistics:[],bandCountWithNoData:M};if(M)return b;if(1===z&&1===K)return f(d),b.statistics.push({minValue:x[0],maxValue:x[1]}),b;k=z*K*8;var S=new Uint8Array(k),W=new Uint8Array(k);c=d;var O=x=0;let N=!1;v.byteLength<d+2*k?(f(d),N=!0,[c,x,O]=m([a.length,k,k]),v.set(a,c)):[x,O]=m([k,k]);v.set(S,x);v.set(W,O);if(k=n(c,a.length,z,K,x,O))throw f(c),N||f(x),Error(`lerc-getDataRanges: error code is ${k}`);v=new Uint8Array(w.buffer);
E(v,x,S);E(v,O,W);a=new Float64Array(S.buffer);k=new Float64Array(W.buffer);W=b.statistics;for(S=0;S<K;S++)if(1<z){O=a.slice(S*z,(S+1)*z);const T=k.slice(S*z,(S+1)*z),V=Math.min.apply(null,O),X=Math.max.apply(null,T);W.push({minValue:V,maxValue:X,depthStats:{minValues:O,maxValues:T}})}else W.push({minValue:a[S],maxValue:k[S]});f(c);N||f(x);return b};Q.decode=(a,c)=>{const {maskCount:b,depthCount:d,bandCount:g,width:h,height:k,dataType:x,bandCountWithNoData:p}=c;var y=R[x],H=h*k;c=new Uint8Array(H*
g);y=new Uint8Array(H*d*g*y.size);H=new Uint8Array(g);var G=new Uint8Array(8*g);const [K,A,I,B,z]=m([a.length,c.length,y.length,H.length,G.length]);v.set(a,K);v.set(c,A);v.set(y,I);v.set(H,B);v.set(G,z);if(a=q(K,a.length,b,A,d,h,k,g,x,I,B,z))throw f(K),Error(`lerc-decode: error code is ${a}`);v=new Uint8Array(w.buffer);E(v,I,y);E(v,A,c);a=null;if(p){E(v,B,H);E(v,z,G);a=[];G=new Float64Array(G.buffer);for(let M=0;M<H.length;M++)a.push(H[M]?G[M]:null)}f(K);return{data:y,maskData:c,noDataValues:a}}}
const R=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,
range:[-1.7976931348623157E308,1.7976931348623157E308]}];let L=null,P=!1;const Q={getBlobInfo:null,decode:null};u.decode=function(D,F={}){var f=F.inputOffset??0;D=D instanceof Uint8Array?D.subarray(f):new Uint8Array(D,f);f=Q.getBlobInfo(D);const {data:l,maskData:n,noDataValues:q}=Q.decode(D,f),{width:e,height:v,bandCount:w,depthCount:m,dataType:a,maskCount:c,statistics:b}=f;var d=R[a],g=new d.ctor(l.buffer);D=[];f=[];const h=e*v;var k=h*m;for(var x=0;x<w;x++){var p=g.subarray(x*k,(x+1)*k);if(F.returnInterleaved)D.push(p);
else{a:{var y=h,H=m;if(2>H)break a;const G=new d.ctor(y*H);for(let K=0,A=0;K<y;K++)for(let I=0,B=K;I<H;I++,B+=y)G[B]=p[A++];p=G}D.push(p)}f.push(n.subarray(x*k,(x+1)*k))}g=0===c?null:1===c?f[0]:new Uint8Array(h);if(1<c)for(g.set(f[0]),k=1;k<f.length;k++)for(x=f[k],p=0;p<h;p++)g[p]&=x[p];({noDataValue:F}=F);k=null!=F&&d.range[0]<=F&&d.range[1]>=F;if(0<c&&k)for(k=0;k<w;k++)for(x=D[k],p=f[k]||g,y=0;y<h;y++)0===p[y]&&(x[y]=F);({pixelType:d}=d);return{width:e,height:v,bandCount:w,pixelType:d,depthCount:m,
statistics:b,pixels:D,mask:g,bandMasks:c===w&&1<w?f:null,noDataValues:q}};u.getBlobInfo=function(D,F={}){D=D instanceof Uint8Array?D.subarray(F.inputOffset??0):new Uint8Array(D,F.inputOffset??0);return Q.getBlobInfo(D)};u.isLoaded=function(){return P};u.load=function(){return L?L:L=(new Promise((D,F)=>J(["../../../chunks/lerc-wasm"],D,F))).then(D=>D.lercWasm).then(({default:D})=>D({locateFile:F=>t.getAssetUrl(`esri/layers/support/rasterFormats/${F}`)})).then(D=>{r(D);P=!0})};u.pixelTypeInfoMap=R;
Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(J){function u(R,L,P,Q=!0){if(0!==L%4||0!==P%4){var D=new ArrayBuffer(4*Math.ceil(P/4));D=new Uint8Array(D);R=new Uint8Array(R,L,P);if(Q)for(Q=0;Q<D.length;Q+=4)D[Q]=R[Q+3],D[Q+1]=R[Q+2],D[Q+2]=R[Q+1],D[Q+3]=R[Q];else D.set(R);return new Uint32Array(D.buffer)}if(Q){Q=new Uint8Array(R,L,P);D=new Uint8Array(Q.length);for(R=0;R<D.length;R+=4)D[R]=Q[R+3],D[R+1]=
Q[R+2],D[R+2]=Q[R+1],D[R+3]=Q[R];return new Uint32Array(D.buffer)}return new Uint32Array(R,L,P/4)}function t(){const R=[];for(let L=0;257>=L;L++)R[L]=[L];return R}function E(R,L){for(let P=0;P<L.length;P++)R.push(L[P])}const r=new Set;r.add(511);r.add(1023);r.add(2047);r.add(4095);r.add(8191);J.decode=function(R,L,P,Q=!0){R=u(R,L,P,Q);L=9;Q=t();let D=32,F=Q.length,f=[],l=1,n=R[0],q=0;const e=R.length;P=8*(4*e-P);const v=[];for(;null!=n;){if(D>=L)D-=L,q=n>>>32-L,n<<=L;else{q=n>>>32-D;n=R[l++];var w=
L-D;D=32-w;q=(q<<w)+(n>>>D);n<<=w}if(257===q)break;if(256===q)L=9,Q=t(),F=Q.length,f=[];else{w=Q[q];if(null==w){if(q>Q.length)throw Error("data integrity issue: code does not exist on code page");f.push(f[0]);Q[F++]=f.slice();E(v,f)}else E(v,w),f.push(w[0]),1<f.length&&(Q[F++]=f.slice()),f=w.slice();r.has(F)&&L++;0===D&&(n=R[l++],D=32);if(l>e||l===e&&D<=P)break}}return new Uint8Array(v)};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Raw":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],
function(J){const u=t=>{let E=1;switch(t){case Uint8Array:case Int8Array:E=1;break;case Uint16Array:case Int16Array:E=2;break;case Uint32Array:case Int32Array:case Float32Array:E=4;break;case Float64Array:E=8}return E};return function(){function t(){}t.decode=function(E,r){var R=r.pixelType;const L=[],P=r.width*r.height;var Q=Math.floor(E.byteLength/(r.width*r.height*u(r.pixelType)));const {bandIds:D,format:F}=r;r=D&&D.length||Math.floor(E.byteLength/(r.width*r.height*u(r.pixelType)));var f=E.byteLength-
E.byteLength%(P*u(R)),l=new R(E,0,P*Q);let n,q,e,v,w=null;if("bip"===F)for(n=0;n<r;n++){e=new R(P);v=D?D[n]:n;for(q=0;q<P;q++)e[q]=l[q*Q+v];L.push(e)}else if("bsq"===F)for(n=0;n<r;n++)v=D?D[n]:n,L.push(l.subarray(v*P,(v+1)*P));if(f<E.byteLength-1)if(E=E.slice(f),8*E.byteLength<P)w=null;else{E=new Uint8Array(E,0,Math.ceil(P/8));R=new Uint8Array(P);for(f=l=f=r=Q=0;f<E.length-1;f++)for(r=E[f],l=7;0<=l;l--)R[Q++]=r>>l&1;for(l=7;Q<P-1;)r=E[E.length-1],R[Q++]=r>>l&1,l--;w=R}return{pixels:L,mask:w}};return J._createClass(t)}()})},
"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./pixelRangeUtils ./TiffTags ./utils ../../../chunks/Zlib".split(" "),function(J,u,t,E,r,R,L,P,Q){function D(B,z){let M="unknown";3===B?M=64===z?"f64":"f32":1===B?1===z?M="u1":2===z?M="u2":4===z?M="u4":8>=z?M="u8":16>=z?M="u16":32>=z&&(M="u32"):2===B&&(8>=z?M="s8":16>=z?M="s16":32>=z&&(M="s32"));return M}function F(B){let z=null;switch(B?B.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":z=
Uint8Array;break;case "u16":z=Uint16Array;break;case "u32":z=Uint32Array;break;case "s8":z=Int8Array;break;case "s16":z=Int16Array;break;case "s32":z=Int32Array;break;case "f64":z=Float64Array;break;default:z=Float32Array}return z}function f(B,z){return{x:z[0]*B.x+z[1]*B.y+z[2],y:z[3]*B.x+z[4]*B.y+z[5]}}function l(B,z){return B.get(z)?.values?.[0]}function n(B,z,M,S=0,W=L.TIFF_TAGS,O=4){var N=8===O;const T=N?k(new DataView(B,M,8),0,z):(new DataView(B,M,2)).getUint16(0,z),V=4+2*O;var X=N?8:2;N=X+T*
V;if(M+N>B.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:N};const ba=M+N+4<=B.byteLength?x(new DataView(B,M+N,8===O?8:4),0,z,8===O):null;M+=X;X=new Map;let Y,ca,Z,ea=0,fa=0;for(let la=0;la<T;la++){var ha=new DataView(B,M+V*la,V);Y=ha.getUint16(0,z);Z=ha.getUint16(2,z);ca=L.getTagName(Y,W);const ia=[];2===O?(ea=ha.getUint16(4,z),fa=ha.getUint16(6,z)):4===O?(ea=ha.getUint32(4,z),fa=ha.getUint32(8,z)):8===O&&(ea=x(ha,4,z,!0),fa=x(ha,12,z,!0),ia.push(ha.getUint32(12,z)),ia.push(ha.getUint32(16,
z)));ha={id:Y,type:Z,valueCount:ea,valueOffset:fa,valueOffsets:ia,values:null};a(B,z,ha,S,!1,O);X.set(ca,ha)}return{success:!0,ifd:X,nextIFD:ba,requiredBufferSize:N}}function q(B,z){if(1!==z&&2!==z&&4!==z)return B;const M=new Uint8Array(B),S=8/z;B=new Uint8Array(B.byteLength*S);let W=0;const O=2**z-1;for(let N=0;N<M.length;N++){const T=M[N];for(let V=0;V<S;V++)B[W++]=T<<z*V>>>8-z&O}return B.buffer}function e(B,z,M){const S=new t.JpegImage;S.parse(B);S.colorTransform=6===M?-1:0;B=S.getData(S.width,
S.height,1!==z);return new Uint8Array(B.buffer)}function v(B){B=(new Q.Zlib(B)).getBytes();var z=new ArrayBuffer(B.length);z=new Uint8Array(z);z.set(B);return z}async function w(B,z,M,S,W){var O=P.isPlatformLittleEndian===z,N=l(M,"BITSPERSAMPLE"),T=l(M,"SAMPLESPERPIXEL")??1,V=l(M,"PHOTOMETRICINTERPRETATION"),X=l(M,"SAMPLEFORMAT")??1,ba=D(X,N),Y=l(M,"COMPRESSION")??1,ca=F(ba);if(34887===Y)return await E.load(),E.decode(B,{inputOffset:S}).pixels[0];if(1===Y)V=B.slice(S,S+W),z=new Uint8Array(V);else if(8===
Y||32946===Y)z=new Uint8Array(B,S,W),z=v(z),V=z.buffer;else if(6===Y)z=new Uint8Array(B,S,W),z=e(z,T,V),V=z.buffer;else if(7===Y){const Z=M.get("JPEGTABLES").values,ea=Z.length-2;z=new Uint8Array(ea+W-2);for(let fa=0;fa<ea;fa++)z[fa]=Z[fa];B=new Uint8Array(B,S+2,W-2);for(S=0;S<B.length;S++)z[ea+S]=B[S];z=e(z,T,V);V=z.buffer}else if(5===Y)z=r.decode(B,S,W,z),V=z.buffer;else throw Error("tiff-decode: unsupport compression "+Y);V=q(V,N);if("u8"!==ba&&"s8"!==ba&&!O)switch(V=new ArrayBuffer(z.length),
O=new Uint8Array(V),ba){case "u16":case "s16":for(ba=0;ba<z.length;ba+=2)O[ba]=z[ba+1],O[ba+1]=z[ba];break;case "u32":case "s32":case "f32":for(ba=0;ba<z.length;ba+=4)O[ba]=z[ba+3],O[ba+1]=z[ba+2],O[ba+2]=z[ba+1],O[ba+3]=z[ba]}N=new ca(V);O=l(M,"PREDICTOR")??1;ba=l(M,"TILEWIDTH");z=l(M,"TILELENGTH");if(1<O&&(5===Y||8===Y||32946===Y)&&ba&&z){Y=b(M);ca=new ca(N.length);ca.set(N);M=3===X&&3===O;Y=Y?1:T;T=M?4:1;X=ba*T*Y;M&&(ca=new Uint8Array(ca.buffer));for(O=0;O<z;O++)for(N=O*X,V=Y;V<X;V++)ca[N+V]+=
ca[N+V-Y];if(M){M=new Uint8Array(ca.length);Y*=ba;for(ba=0;ba<z;ba++)for(O=ba*X,N=0;N<Y;N++)for(V=0;V<T;V++)M[O+N*T+V]=ca[O+N+(T-V-1)*Y];N=new Float32Array(M.buffer)}else N=ca}return N}async function m(B,z,M){const S=M.get("TILEOFFSETS")?.values;if(void 0===S)return null;const W=M.get("TILEBYTECOUNTS")?.values,{width:O,height:N,pixelType:T,tileWidth:V,tileHeight:X}=c([M]);var ba=b(M,z);const Y=l(M,"SAMPLESPERPIXEL")||z.planes;var ca=O*N,Z=l(M,"BITSPERSAMPLE"),ea=34887===(l(M,"COMPRESSION")??1),fa=
F(T);const ha=[];for(var la=0;la<Y;la++)ha.push(new fa(ca));let ia,qa,na,ua,va,za,ya,Ea;ca=Math.ceil(O/V);if(0===Z%8)if(ea&&ba&&1<Y)for(ba=Math.round(S.length/Y),Z=0;Z<ba;Z++){var sa=Math.floor(Z/ca)*X;na=Z%ca*V;fa=sa*O+na;for(ea=0;ea<Y;ea++)if(la=Z*Y+ea,0!==W[la])for(la=await w(B,z.littleEndian,M,S[la],W[la]),va=0,ua=fa,ya=Math.min(V,O-na),za=Math.min(X,N-sa),Ea=ha[ea],ia=0;ia<za;ia++)for(ua=fa+ia*O,va=ia*V,qa=0;qa<ya;qa++,ua++,va++)Ea[ua]=la[va]}else for(Z=0;Z<S.length;Z++)if(0!==W[Z])for(sa=Math.floor(Z/
ca)*X,na=Z%ca*V,fa=sa*O+na,la=await w(B,z.littleEndian,M,S[Z],W[Z]),va=0,ua=fa,ya=Math.min(V,O-na),za=Math.min(X,N-sa),sa=0;sa<Y;sa++)if(Ea=ha[sa],ba||ea)for(ia=0;ia<za;ia++)for(ua=fa+ia*O,va=V*X*sa+ia*V,qa=0;qa<ya;qa++,ua++,va++)Ea[ua]=la[va];else for(ia=0;ia<za;ia++)for(ua=fa+ia*O,va=ia*V*Y+sa,qa=0;qa<ya;qa++,ua++,va+=Y)Ea[ua]=la[va];return{width:O,height:N,pixelType:T,pixels:ha}}function a(B,z,M,S=0,W=!1,O=4){if(M.values)return!0;var N=M.type,T=M.valueCount,V=M.valueOffset;let X=[];var ba=G[N],
Y=8*ba,ca=T*ba,Z=T*G[N]*8,ea=8===O?64:32;O=M.valueOffsets;if(Z>ea&&ca>(W?B.byteLength:B?B.byteLength-V+S:0))return M.offlineOffsetSize=[V,ca],M.values=null,!1;if(Z<=ea)if(z||(32>=ea?V>>>=32-Z:(B=O?.length?O[0]:V>>>0,z=O?.length?O[1]:Math.round((V-B)/4294967296),32>=Z?(V=B>>>32-Z,O[0]=V):(V=B*2**(32-Z)+(z>>>32-Z),O[0]=B,O[1]=z>>>32-Z))),1===T&&Y===ea)X=[V];else if(64===ea)for(B=O?.length?O[0]:V>>>0,V=O?.length?O[1]:Math.round((V-B)/4294967296),z=B,ba=32,B=1;B<=T;B++)ca=32-Y*B%32,ba<Y?(ca=z<<ca>>>32-
ba,Z=V<<32-ba>>>32-ba,z=V,X.push(ca+Z*2**(Y-ba)),ba-=32-(Y-ba)):(X.push(z<<ca>>>32-Y),ba-=Y),0===ba&&(ba=32,z=V);else for(B=1;B<=T;B++)X.push(V<<32-Y*B>>>32-Y);else for(V-=S,W&&(V=0),T=V;T<V+ca;T+=ba){switch(N){case 1:Y=(new DataView(B,T,1)).getUint8(0);break;case 2:Y=(new DataView(B,T,1)).getUint8(0);break;case 3:Y=(new DataView(B,T,2)).getUint16(0,z);break;case 4:case 13:Y=(new DataView(B,T,4)).getUint32(0,z);break;case 5:Y=(new DataView(B,T,4)).getUint32(0,z)/(new DataView(B,T+4,4)).getUint32(0,
z);break;case 6:Y=(new DataView(B,T,1)).getInt8(0);break;case 7:Y=(new DataView(B,T,1)).getUint8(0);break;case 8:Y=(new DataView(B,T,2)).getInt16(0,z);break;case 9:Y=(new DataView(B,T,4)).getInt32(0,z);break;case 10:Y=(new DataView(B,T,4)).getInt32(0,z)/(new DataView(B,T+4,4)).getInt32(0,z);break;case 11:Y=(new DataView(B,T,4)).getFloat32(0,z);break;case 12:Y=(new DataView(B,T,8)).getFloat64(0,z);break;case 16:case 18:Y=k(new DataView(B,T,8),0,z);break;case 17:O=new DataView(B,T,8);Z=(Y=z)?O.getInt32(0,
Y):O.getUint32(0,Y);O=Y?O.getUint32(4,Y):O.getInt32(4,Y);ea=0<=(Y?Z:O)?1:-1;Y?Z*=ea:O*=ea;Y=ea*(Y?4294967296*O+Z:4294967296*Z+O);break;default:Y=null}X.push(Y)}if(2===N){N="";V=X;X=[];for(B=0;B<V.length;B++)0===V[B]&&""!==N?(X.push(N),N=""):N+=String.fromCharCode(V[B]);""===N&&0!==X.length||X.push(N)}M.values=X;return!0}function c(B){var z=B[0];const M=l(z,"TILEWIDTH"),S=l(z,"TILELENGTH"),W=l(z,"IMAGEWIDTH"),O=l(z,"IMAGELENGTH");var N=l(z,"BITSPERSAMPLE");const T=l(z,"SAMPLESPERPIXEL");var V=l(z,
"SAMPLEFORMAT")??1;const X=D(V,N),ba=b(z);var Y=z.get("GDAL_NODATA")?.values;let ca=null;Y?.length&&(ca=Y.map(sa=>parseFloat(sa)),ca.some(sa=>isNaN(sa))&&(ca=null));var Z=l(z,"COMPRESSION")??1;switch(Z){case 1:Y="NONE";break;case 2:case 3:case 4:case 32771:Y="CCITT";break;case 5:Y="LZW";break;case 6:case 7:Y="JPEG";break;case 32773:Y="PACKBITS";break;case 8:case 32946:Y="DEFLATE";break;case 34712:Y="JPEG2000";break;case 34887:Y="LERC";break;default:Y=String(Z)}let ea=!0,fa="";K.has(Z)||(ea=!1,fa+=
"unsupported tag compression "+Z);3<V&&(ea=!1,fa+="unsupported tag sampleFormat "+V);1!==N&&2!==N&&4!==N&&0!==N%8&&(ea=!1,fa+="unsupported tag bitsPerSample "+N);N=z.get("GEOASCIIPARAMS")?.values?.[0];if(N){var ha=(ha=N.split("|").find(sa=>sa.includes("ESRI PE String \x3d ")))?ha.replace("ESRI PE String \x3d ",""):"";ha=ha.startsWith("COMPD_CS")||ha.startsWith("PROJCS")||ha.startsWith("GEOGCS")?{wkid:null,wkt:ha}:null}V=z.get("GEOTIEPOINTS")?.values;N=z.get("GEOPIXELSCALE")?.values;Z=z.get("GEOTRANSMATRIX")?.values;
var la=z.has("GEOKEYDIRECTORY")?z.get("GEOKEYDIRECTORY").data:null,ia=!1;z=!1;if(la){ia=2===l(la,"GTRasterTypeGeoKey");var qa=l(la,"GTModelTypeGeoKey");2===qa?(la=l(la,"GeographicTypeGeoKey"),1024<=la&&32766>=la&&(ha={wkid:la}),ha||32767!==la||(z=!0,ha={wkid:4326})):1===qa&&(la=l(la,"ProjectedCSTypeGeoKey"),1024<=la&&32766>=la&&(ha={wkid:la}))}let na;N&&V&&6<=V.length?(na=[N[0],0,V[3]-V[0]*N[0],0,-Math.abs(N[1]),V[4]-V[1]*N[1]],ia&&(na[2]-=.5*na[0]+.5*na[1],na[5]-=.5*na[3]+.5*na[4])):Z&&16===Z.length&&
(na=ia?[Z[0],Z[1],Z[3]-.5*Z[0],Z[4],Z[5],Z[7]-.5*Z[5]]:[Z[0],Z[1],Z[3],Z[4],Z[5],Z[7]]);if(na){V=[{x:0,y:O},{x:0,y:0},{x:W,y:O},{x:W,y:0}];la=ia=Number.POSITIVE_INFINITY;let sa=qa=Number.NEGATIVE_INFINITY;for(let Ga=0;Ga<V.length;Ga++)Z=f(V[Ga],na),ia=Z.x>ia?ia:Z.x,qa=Z.x<qa?qa:Z.x,la=Z.y>la?la:Z.y,sa=Z.y<sa?sa:Z.y;V={xmin:ia,xmax:qa,ymin:la,ymax:sa,spatialReference:ha}}else V={xmin:-.5,ymin:.5-O,xmax:W-.5,ymax:.5,spatialReference:ha};z&&(400<V.xmax-V.xmin||361<Math.max(Math.abs(V.xmin),Math.abs(V.xmax)))&&
(ha=null,V.spatialReference=null);ha=d(B);let ua;let va,za;if(0<ha.length){va=Math.round(Math.log(W/l(ha[0],"IMAGEWIDTH"))/Math.LN2);var ya=ha[ha.length-1];za=Math.round(Math.log(W/l(ya,"IMAGEWIDTH"))/Math.LN2);ua=l(ya,"TILEWIDTH");ya=l(ya,"TILELENGTH")}ua=null!=za&&0<za?ua||M:null;ya=null!=za&&0<za?ya||S:null;let Ea;M&&(Ea=[{maxCol:Math.ceil(W/M)-1,maxRow:Math.ceil(O/S)-1,minRow:0,minCol:0}],ha.forEach(sa=>{Ea.push({maxCol:Math.ceil(l(sa,"IMAGEWIDTH")/l(sa,"TILEWIDTH"))-1,maxRow:Math.ceil(l(sa,"IMAGELENGTH")/
l(sa,"TILELENGTH"))-1,minRow:0,minCol:0})}));Z=B[0].get("GDAL_METADATA")?.values?.[0];Z=I(Z);fa+=" "+H({width:W,height:O,tileWidth:M,tileHeight:S,planes:T,ifds:B});B=g(B).length===ha.length+1;return{width:W,height:O,tileWidth:M,tileHeight:S,planes:T,isBSQ:ba,pixelType:X,compression:Y,noData:ca,hasMaskBand:B,isSupported:ea,message:fa,extent:V,isPseudoGeographic:z,affine:N?null:na,firstPyramidLevel:va,maximumPyramidLevel:za,pyramidBlockWidth:ua,pyramidBlockHeight:ya,tileBoundary:Ea,metadata:Z}}function b(B,
z){return(B=B.get("PLANARCONFIGURATION")?.values)?2===B[0]:z?z.isBSQ:!1}function d(B){return B.filter(z=>1===l(z,"NEWSUBFILETYPE"))}function g(B){return B.filter(z=>{const M=4===((l(z,"NEWSUBFILETYPE")??0)&4);z=4===l(z,"PHOTOMETRICINTERPRETATION");return M&&z})}function h(B){const {littleEndian:z,isBigTiff:M,firstIFDPos:S}=p(B);var W=S;const O=[];do if(W=y(B,z,W,0,L.TIFF_TAGS,M?8:4),W.success)O.push(W.ifd),W=W.nextIFD;else break;while(0<W);B=c(O);W=d(O);const N=g(O);return{...B,littleEndian:z,isBigTiff:M,
ifds:O,pyramidIFDs:W,maskIFDs:N}}function k(B,z,M){const S=B.getUint32(z,M);B=B.getUint32(z+4,M);return M?4294967296*B+S:4294967296*S+B}function x(B,z,M,S){return S?k(B,z,M):B.getUint32(z,M)}function p(B){var z=new DataView(B,0,16),M=z.getUint16(0,!1);B=null;if(18761===M)B=!0;else if(19789===M)B=!1;else throw Error("unexpected endianess byte");var S=z.getUint16(2,B);if(42!==S&&43!==S)throw Error("unexpected tiff identifier");M=4;if(S=43===S){const W=z.getUint16(M,B);M+=2;if(8!==W)throw Error("unsupported bigtiff version");
if(0!==z.getUint16(M,B))throw Error("unsupported bigtiff version");M+=2}z=x(z,M,B,S);return{littleEndian:B,isBigTiff:S,firstIFDPos:z}}function y(B,z,M,S=0,W=L.TIFF_TAGS,O=4){M=n(B,z,M,S,W,O);let N;const T=M.ifd;T&&(L.ifdTags.forEach((V,X)=>{T.has(X)&&(N=T.get(X),N.data=n(B,z,N.valueOffset-S,S,V).ifd)}),T.has("GEOKEYDIRECTORY")&&(N=T.get("GEOKEYDIRECTORY"),(W=N.values)&&4<W.length&&(W=W[0]+"."+W[1]+"."+W[2],N.data=n(B,z,N.valueOffset+6-S,S,L.GEO_KEYS,2).ifd,N.data&&N.data.set("GEOTIFFVersion",{id:0,
type:2,valueCount:1,valueOffset:null,values:[W]}))),T.has("XMP")&&(N=T.get("XMP"),W=N.values,"number"===typeof W[0]&&7===N.type&&(N.values=[u.bytesToUTF8(new Uint8Array(W))])));return M}function H(B){const {width:z,height:M,tileHeight:S,tileWidth:W}=B,O=B.planes,N=W?W*S:z*M;B=l(B.ifds[0],"BITSPERSAMPLE");let T="";N*O>2**30/(8<B?B/8:1)&&(T=W?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return T}const G=[0,1,1,2,4,8,1,1,2,4,8,4,8,
-1,-1,-1,8,8,8],K=new Set([1,5,6,7,8,34712,34887]),A=(B,z,M)=>{if(!(B&&0<B.length&&z&&M))return null;let S,W,O;const N=B[0].length,T=B.length,V=new Uint8Array(N);for(let ba=0;ba<T;ba++)if(S=B[ba],W=z[ba],O=M[ba],0===ba)for(var X=0;X<N;X++)V[X]=S[X]<W||S[X]>O?0:1;else for(X=0;X<N;X++)V[X]&&(V[X]=S[X]<W||S[X]>O?0:1);return V},I=B=>{if(!B)return null;var z=B.match(/<Item(.*?)Item>/gi);if(!z||0===z.length)return null;B=new Map;var M;for(var S=0;S<z.length;S++){var W=z[S];var O=W.slice(6,W.indexOf("\x3e"));
var N=W.indexOf("sample\x3d");-1<N&&(M=W.slice(N+8,W.indexOf('"',N+8)));N=W.indexOf("name\x3d");-1<N&&(O=W.slice(N+6,W.indexOf('"',N+6)));O&&(W=W.slice(W.indexOf("\x3e")+1,W.indexOf("\x3c/Item\x3e")).trim(),null!=M?B.has(O)?B.get(O)[M]=W:B.set(O,[W]):B.set(O,W));M=null}z=B.get("STATISTICS_MINIMUM");O=B.get("STATISTICS_MAXIMUM");S=B.get("STATISTICS_MEAN");W=B.get("STATISTICS_STDDEV");M=null;if(z&&O)for(M=[],N=0;N<z.length;N++)M.push({min:parseFloat(z[N]),max:parseFloat(O[N]),avg:S&&parseFloat(S[N]),
stddev:W&&parseFloat(W[N])});O=B.get("BandName");S=B.get("WavelengthMin");W=B.get("WavelengthMax");z=null;if(O)for(z=[],N=0;N<O.length;N++)z.push({BandName:O[N],WavelengthMin:S&&parseFloat(S[N]),WavelengthMax:W&&parseFloat(W[N])});O=B.get("DataType");return{statistics:M,bandProperties:z,dataType:O,rawMetadata:B}};J.decode=async function(B,z={}){var M=z.pyramidLevel||0,S=z.headerInfo||h(B);const {ifds:W,noData:O}=S;if(0===W.length)throw Error("no valid image file directory");var N=H(S);if(N)throw N;
N=null;var T=-1===M?W[W.length-1]:W[M];z=O??z.noDataValue;if(S.tileWidth)N=await m(B,S,T);else{{const za=P.isPlatformLittleEndian===S.littleEndian,ya=T.get("STRIPOFFSETS")?.values;if(void 0===ya)B=null;else{var {width:V,height:X,pixelType:ba}=c([T]);M=l(T,"SAMPLESPERPIXEL")||S.planes;var Y=l(T,"PHOTOMETRICINTERPRETATION");N=V*X;var ca=l(T,"BITSPERSAMPLE"),Z=F(ba),ea=new Z(N*M),fa=T.get("STRIPBYTECOUNTS")?.values,ha=l(T,"ROWSPERSTRIP"),la=l(T,"COMPRESSION")??1;var ia=ha;if(0===ca%8)for(T=0;T<ya.length;T++){var qa=
T*ha*V*M;ia=(T+1)*ha>X?X-T*ha:ha;if("u8"===ba||"s8"===ba||za)if(8===la||32946===la){var na=new Uint8Array(B,ya[T],fa[T]);na=v(na);var ua=na.buffer}else 6===la?(na=new Uint8Array(B,ya[T],fa[T]),na=e(na,M,Y),ua=na.buffer):5===la?(na=r.decode(B,ya[T],fa[T],S.littleEndian),ua=na.buffer):(fa[T]!==ia*V*M*ca/8&&console.log("strip byte counts is different than expected"),ua=B.slice(ya[T],ya[T]+fa[T]));else{if(6===la||8===la||32946===la){na=new Uint8Array(B,ya[T],fa[T]);var va=v(na);ua=va.buffer}else fa[T]!==
ia*V*M*ca/8&&console.log("strip byte counts is different than expected"),ua=new ArrayBuffer(fa[T]),na=new Uint8Array(B,ya[T],fa[T]),va=new Uint8Array(ua);switch(ba){case "u16":case "s16":for(ia=0;ia<na.length;ia+=2)va[ia]=na[ia+1],va[ia+1]=na[ia];break;case "u32":case "s32":case "f32":for(ia=0;ia<na.length;ia+=4)va[ia]=na[ia+3],va[ia+1]=na[ia+2],va[ia+2]=na[ia+1],va[ia+3]=na[ia]}}ua=q(ua,ca);ia=new Z(ua);ea.set(ia,qa)}Y=[];if(1===M)Y.push(ea);else for(T=0;T<M;T++){S=new Z(N);for(B=0;B<N;B++)S[B]=
ea[B*M+T];Y.push(S)}B={width:V,height:X,pixelType:ba,pixels:Y}}}N=await B}if(!N)return N;null!=z&&R.convertNoDataToMask(N,z);return N};J.decodeTileOrStrip=async function(B,z){const {headerInfo:M,ifd:S,offsets:W,sizes:O}=z;var N=[];for(var T=0;T<W.length;T++){var V=await w(B,M.littleEndian,S,W[T],O[T]||B.byteLength);N.push(V)}var X=b(S,M);B=l(S,"BITSPERSAMPLE");T=l(S,"SAMPLEFORMAT")??1;T=D(T,B);var ba=l(S,"SAMPLESPERPIXEL")||M.planes;const Y=F(T);V=l(S,"TILEWIDTH");const ca=l(S,"TILELENGTH");var Z=
l(S,"COMPRESSION")??1;const ea=V*ca;B=[];let fa=N[0];const ha=34887===Z;for(let la=0;la<ba;la++){Z=new Y(ea);if(N.length===ba)fa=N[la],fa.length===ea&&(Z=fa);else if(fa.length)if(X||ha)Z=fa.length===ea?fa:fa.slice(ea*la,ea*(la+1));else for(let ia=0;ia<ea;ia++)Z[ia]=fa[ia*ba+la];B.push(Z)}N=M.noData?M.noData[0]:z.noDataValue;X=(ba=M.metadata?M.metadata.statistics:null)?ba.map(la=>la.min):null;ba=ba?ba.map(la=>la.max):null;T={pixelType:T,width:V,height:ca,pixels:B,noDataValue:N};null!=N?R.convertNoDataToMask(T,
N):X&&ba&&z.applyMinMaxConstraint&&(T.mask=A(B,X,ba));return T};J.getImageInfo=c;J.getMaskIFDs=g;J.getPyramidIFDs=d;J.isBSQConfig=b;J.parseFieldValues=a;J.parseHeader=h;J.parseIFD=y;J.parseSignature=p;Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(J){J.bytesToUTF8=function(u,t){let E=0,r="",R=0,L=0;const P=u.length;for(;E<P;)if(L=u[E++],R=L>>4,8>R?R=1:15===R?(R=4,L=(L&7)<<18|(u[E++]&63)<<12|
(u[E++]&63)<<6|u[E++]&63):14===R?(R=3,L=(L&15)<<12|(u[E++]&63)<<6|u[E++]&63):(R=2,L=(L&31)<<6|u[E++]&63),0!==L||t)r+=String.fromCharCode(L);return r};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const J=(()=>{const r=[];r[254]="NEWSUBFILETYPE";r[255]="SUBFILETYPE";r[256]="IMAGEWIDTH";r[257]="IMAGELENGTH";r[258]="BITSPERSAMPLE";r[259]="COMPRESSION";r[262]="PHOTOMETRICINTERPRETATION";r[263]="THRESHHOLDING";
r[264]="CELLWIDTH";r[265]="CELLLENGTH";r[266]="FILLORDER";r[269]="DOCUMENTNAME";r[270]="IMAGEDESCRIPTION";r[271]="MAKE";r[272]="MODEL";r[273]="STRIPOFFSETS";r[274]="ORIENTATION";r[277]="SAMPLESPERPIXEL";r[278]="ROWSPERSTRIP";r[279]="STRIPBYTECOUNTS";r[280]="MINSAMPLEVALUE";r[281]="MAXSAMPLEVALUE";r[282]="XRESOLUTION";r[283]="YRESOLUTION";r[284]="PLANARCONFIGURATION";r[285]="PAGENAME";r[286]="XPOSITION";r[287]="YPOSITION";r[288]="FREEOFFSETS";r[289]="FREEBYTECOUNTS";r[290]="GRAYRESPONSEUNIT";r[291]=
"GRAYRESPONSECURVE";r[292]="T4OPTIONS";r[293]="T6OPTIONS";r[296]="RESOLUTIONUNIT";r[297]="PAGENUMBER";r[300]="COLORRESPONSEUNIT";r[301]="TRANSFERFUNCTION";r[305]="SOFTWARE";r[306]="DATETIME";r[315]="ARTIST";r[316]="HOSTCOMPUTER";r[317]="PREDICTOR";r[318]="WHITEPOINT";r[319]="PRIMARYCHROMATICITIES";r[320]="COLORMAP";r[321]="HALFTONEHINTS";r[322]="TILEWIDTH";r[323]="TILELENGTH";r[324]="TILEOFFSETS";r[325]="TILEBYTECOUNTS";r[326]="BADFAXLINES";r[327]="CLEANFAXDATA";r[328]="CONSECUTIVEBADFAXLINES";r[330]=
"SUBIFD";r[332]="INKSET";r[333]="INKNAMES";r[334]="NUMBEROFINKS";r[336]="DOTRANGE";r[337]="TARGETPRINTER";r[338]="EXTRASAMPLES";r[339]="SAMPLEFORMAT";r[340]="SMINSAMPLEVALUE";r[341]="SMAXSAMPLEVALUE";r[342]="TRANSFERRANGE";r[347]="JPEGTABLES";r[512]="JPEGPROC";r[513]="JPEGIFOFFSET";r[514]="JPEGIFBYTECOUNT";r[515]="JPEGRESTARTINTERVAL";r[517]="JPEGLOSSLESSPREDICTORS";r[518]="JPEGPOINTTRANSFORM";r[519]="JPEGQTABLES";r[520]="JPEGDCTABLES";r[521]="JPEGACTABLES";r[529]="YCBCRCOEFFICIENTS";r[530]="YCBCRSUBSAMPLING";
r[531]="YCBCRPOSITIONING";r[532]="REFERENCEBLACKWHITE";r[700]="XMP";r[33550]="GEOPIXELSCALE";r[33922]="GEOTIEPOINTS";r[33432]="COPYRIGHT";r[42112]="GDAL_METADATA";r[42113]="GDAL_NODATA";r[50844]="RPCCOEFFICIENT";r[34264]="GEOTRANSMATRIX";r[34735]="GEOKEYDIRECTORY";r[34736]="GEODOUBLEPARAMS";r[34737]="GEOASCIIPARAMS";r[34665]="EXIFIFD";r[34853]="GPSIFD";r[40965]="INTEROPERABILITYIFD";return r})(),u=(()=>{const r=J.slice();r[36864]="ExifVersion";r[40960]="FlashpixVersion";r[40961]="ColorSpace";r[42240]=
"Gamma";r[37121]="ComponentsConfiguration";r[37122]="CompressedBitsPerPixel";r[40962]="PixelXDimension";r[40963]="PixelYDimension";r[37500]="MakerNote";r[37510]="UserComment";r[40964]="RelatedSoundFile";r[36867]="DateTimeOriginal";r[36868]="DateTimeDigitized";r[36880]="OffsetTime";r[36881]="OffsetTimeOriginal";r[36882]="OffsetTimeDigitized";r[37520]="SubSecTime";r[37521]="SubSecTimeOriginal";r[37522]="SubSecTimeDigitized";r[37888]="Temperature";r[37889]="Humidity";r[37890]="Pressure";r[37891]="WaterDepth";
r[37892]="Acceleration";r[37893]="CameraElevationAngle";r[42016]="ImageUniqueID";r[42032]="CameraOwnerName";r[42033]="BodySerialNumber";r[42034]="LensSpecification";r[42035]="LensMake";r[42036]="LensModel";r[42037]="LensSerialNumber";r[33434]="ExposureTime";r[33437]="FNumber";r[34850]="ExposureProgram";r[34852]="SpectralSensitivity";r[34855]="PhotographicSensitivity";r[34856]="OECF";r[34864]="SensitivityType";r[34865]="StandardOutputSensitivity";r[34866]="RecommendedExposureIndex";r[34867]="ISOSpeed";
r[34868]="ISOSpeedLatitudeyyy";r[34869]="ISOSpeedLatitudezzz";r[37377]="ShutterSpeedValue";r[37378]="ApertureValue";r[37379]="BrightnessValue";r[37380]="ExposureBiasValue";r[37381]="MaxApertureValue";r[37382]="SubjectDistance";r[37383]="MeteringMode";r[37384]="LightSource";r[37385]="Flash";r[37386]="FocalLength";r[37396]="SubjectArea";r[41483]="FlashEnergy";r[41484]="SpatialFrequencyResponse";r[41486]="FocalPlaneXResolution";r[41487]="FocalPlaneYResolution";r[41488]="FocalPlaneResolutionUnit";r[41492]=
"SubjectLocation";r[41493]="ExposureIndex";r[41495]="SensingMethod";r[41728]="FileSource";r[41729]="SceneType";r[41730]="CFAPattern";r[41985]="CustomRendered";r[41986]="ExposureMode";r[41987]="WhiteBalance";r[41988]="DigitalZoomRatio";r[41989]="FocalLengthIn35mmFilm";r[41990]="SceneCaptureType";r[41991]="GainControl";r[41992]="Contrast";r[41993]="Saturation";r[41994]="Sharpness";r[41995]="DeviceSettingDescription";r[41996]="SubjectDistanceRange";return r})(),t=(()=>{const r=[];r[1024]="GTModelTypeGeoKey";
r[1025]="GTRasterTypeGeoKey";r[1026]="GTCitationGeoKey";r[2048]="GeographicTypeGeoKey";r[2049]="GeogCitationGeoKey";r[2050]="GeogGeodeticDatumGeoKey";r[2051]="GeogPrimeMeridianGeoKey";r[2052]="GeogLinearUnitsGeoKey";r[2053]="GeogLinearUnitSizeGeoKey";r[2054]="GeogAngularUnitsGeoKey";r[2055]="GeogAngularUnitSizeGeoKey";r[2056]="GeogEllipsoidGeoKey";r[2057]="GeogSemiMajorAxisGeoKey";r[2058]="GeogSemiMinorAxisGeoKey";r[2059]="GeogInvFlatteningGeoKey";r[2061]="GeogPrimeMeridianLongGeoKey";r[2060]="GeogAzimuthUnitsGeoKey";
r[3072]="ProjectedCSTypeGeoKey";r[3073]="PCSCitationGeoKey";r[3074]="ProjectionGeoKey";r[3075]="ProjCoordTransGeoKey";r[3076]="ProjLinearUnitsGeoKey";r[3077]="ProjLinearUnitSizeGeoKey";r[3078]="ProjStdParallel1GeoKey";r[3079]="ProjStdParallel2GeoKey";r[3080]="ProjNatOriginLongGeoKey";r[3081]="ProjNatOriginLatGeoKey";r[3082]="ProjFalseEastingGeoKey";r[3083]="ProjFalseNorthingGeoKey";r[3084]="ProjFalseOriginLongGeoKey";r[3085]="ProjFalseOriginLatGeoKey";r[3086]="ProjFalseOriginEastingGeoKey";r[3087]=
"ProjFalseOriginNorthingGeoKey";r[3088]="ProjCenterLongGeoKey";r[3090]="ProjCenterEastingGeoKey";r[3091]="ProjCenterNorthingGeoKey";r[3092]="ProjScaleAtNatOriginGeoKey";r[3093]="ProjScaleAtCenterGeoKey";r[3094]="ProjAzimuthAngleGeoKey";r[3095]="ProjStraightVertPoleLongGeoKey";r[4096]="VerticalCSTypeGeoKey";r[4097]="VerticalCitationGeoKey";r[4098]="VerticalDatumGeoKey";r[4099]="VerticalUnitsGeoKey";return r})(),E=new Map;E.set("EXIFIFD",u);E.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:J,ifdTags:E,GEO_KEYS:t,getTagName:(r,R)=>{R=(R||J)[r];void 0===R&&(R="unknown"+String(r));return R}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(J){const u=new ArrayBuffer(4),t=new Uint8Array(u);(new Uint32Array(u))[0]=1;J.isPlatformLittleEndian=1===t[0];Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ../FlowRenderer ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./rasterRendererChecks ./UniqueValueInfo ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n,q,e,v,w,m,a,c){function b(O,N){O=d(O,N?.variableName);const {bandCount:T}=O;let {bandIds:V,stretchType:X}=N||{};V?.some(ea=>ea>=T)&&(V=null);let ba=O.statistics,Y=O.histograms;1<T?(V=V?.length?V:g(O),ba=null==ba?null:V?.map(ea=>ba[ea]),Y=null==Y?null:V?.map(ea=>Y[ea])):V=[0];null==X&&(X=k(O));let ca=!1;switch(X){case "none":ca=!1;break;case "percent-clip":ca=!Y?.length;break;default:ca=!ba?.length}var {dataType:Z}=O;Z=1===V?.length&&S.has(Z)?z:null;Z=new e({stretchType:X,
dynamicRangeAdjustment:ca,colorRamp:Z,outputMin:0,outputMax:255,gamma:1===V?.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===X?Z.maxPercent=Z.minPercent=.25:"standard-deviation"===X&&(Z.numberOfStandardDeviations=2);if(!ca&&(null!=O.multidimensionalInfo||N?.includeStatisticsInStretch))if("percent-clip"===X)Z.histograms=Y;else if("min-max"===X||"standard-deviation"===X)Z.statistics=ba;return Z}function d(O,N){if(!N)return O;let T=O.statistics,V=O.histograms;var {multidimensionalInfo:X}=O;if(N&&null!=
X&&(X=X.variables.find(ba=>ba.name===N))){const {statistics:ba,histograms:Y}=X;ba?.length&&(T=ba);Y?.length&&(V=Y)}return R.fromJSON({...O.toJSON(),statistics:T,histograms:V})}function g(O){const N=O.bandCount;if(1===N)return null;if(2===N)return[0];({bandInfos:O}=O);let T;if(O.length===N){const {red:V,green:X,blue:ba,nir:Y}=h(O);null!=V&&null!=X&&null!=ba?T=[V,X,ba]:null!=Y&&null!=V&&null!=X&&(T=[Y,V,X])}!T&&3<=N&&(T=[0,1,2]);return T}function h(O){const N={};for(let X=0;X<O.length;X++){var T=O[X],
V=T.name.toLowerCase();"red"===V?N.red=X:"green"===V?N.green=X:"blue"===V?N.blue=X:"nearinfrared"===V||"nearinfrared_1"===V||"nir"===V?N.nir=X:T.maxWavelength&&T.minWavelength&&(V=T.minWavelength,T=T.maxWavelength,null==N.blue&&410<=V&&480>=V&&480<=T&&540>=T?N.blue=X:null==N.green&&490<=V&&560>=V&&560<=T&&610>=T?N.green=X:null==N.red&&595<=V&&670>=V&&660<=T&&730>=T?N.red=X:null==N.nir&&700<=V&&860>=V&&800<=T&&950>=T&&(N.nir=X))}return N}function k(O){let N="percent-clip";const {pixelType:T,dataType:V,
histograms:X,statistics:ba,multidimensionalInfo:Y}=O;O=S.has(V)||"generic"===V&&null!=Y;"u8"!==T||"processed"!==V&&null!=X&&null!=ba?"u8"===T||"elevation"===V||O?N="min-max":null!=X?N="percent-clip":null!=ba&&(N="min-max"):N="none";return N}function x(O,N,T,V){if(!F.isUVRendererSupported(O,N))return null;const {attributeTable:X,statistics:ba}=O,Y=p(X,N),ca=H(X,"red"),Z=H(X,"green"),ea=H(X,"blue");O=new P;const fa=[],ha=new Set,la=!!(ca&&Z&&ea);if(null!=X)X.features.forEach(ia=>{var qa=ia.attributes[Y.name];
ha.has(ia.attributes[Y.name])||null==qa||(ha.add(qa),qa=!la||"single"!==ca.type&&"double"!==ca.type||"single"!==Z.type&&"double"!==Z.type||"single"!==ea.type&&"double"!==ea.type||X.features.some(na=>1<na.attributes[ca.name]||1<na.attributes[Z.name]||1<na.attributes[ea.name])?1:255,fa.push(new f({value:ia.attributes[Y.name],label:ia.attributes[Y.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:la?new u([ia.attributes[ca.name]*qa,ia.attributes[Z.name]*qa,ia.attributes[ea.name]*qa,
1]):new u([0,0,0,0])}})))});else if(ba?.[0])for(N=ba[0].min;N<=ba[0].max;N++)fa.push(new f({value:N,label:N.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new u([0,0,0,0])}}));fa.sort((ia,qa)=>ia.value&&"string"===typeof ia.value.valueOf()?0:ia.value>qa.value?1:-1);if(!la){const ia=D.convertColorRampToColormap(M,{numColors:fa.length});fa.forEach((qa,na)=>qa.symbol.color=new u(ia[na].slice(1,4)));O.colorRamp=M}if(T||V){const ia=T||D.convertColorRampToColormap(V,{numColors:fa.length}).map(qa=>
qa.slice(1));fa.forEach((qa,na)=>qa.symbol.color=new u(ia[na]));O.colorRamp=V}return new v({field:Y.name,uniqueValueInfos:fa,authoringInfo:O})}function p(O,N,T){let V;null!=O?(V=N?O.fields.find(X=>N.toLowerCase()===X.name.toLowerCase()):y(O.fields),V||(T||(V=O.fields.find(X=>"string"===X.type)),V||(V=H(O,"value")))):V=new r({name:"value"});return V}function y(O){let N;for(let T=0;T<O.length;T++){const V=O[T].name.toLowerCase();if("string"===O[T].type){if(V.startsWith("class")){N=O[T];break}null==
N&&(V.endsWith("name")||V.endsWith("type"))&&(N=O[T])}}return N}function H(O,N){return null==O?null:O.fields.find(T=>T.name.toLowerCase()===N)}function G(O){if(!F.isColormapRendererSupported(O))return null;let N;const {attributeTable:T,colormap:V}=O;if(null!=T){const X=H(T,"value"),ba=p(T,null,!0);"string"===ba.type&&(N={},T.features.forEach(Y=>{Y=Y.attributes;N[Y[X.name]]=ba?Y[ba.name]:Y[X.name]}))}return w.createFromColormap(V,N)}function K(O,N,T){let V=0,X=0;null!=O.attributeTable?(O=O.attributeTable,
V=X=O.features[0].attributes[N.name],O.features.forEach(ba=>{ba=ba.attributes[N.name];ba<V&&(V=ba);ba>X&&(X=ba)})):null!=O.histograms&&(O=O.histograms,V=O[0].min,X=O[0].max);return(X-V)/T}function A(O){if(!F.isVectorFieldRendererSupported(O))return null;if(null!=O.statistics&&O.statistics.length&&("vector-magdir"===O.dataType||"vector-uv"===O.dataType)){const {minMagnitude:T,maxMagnitude:V}=B(O.dataType,O.statistics);var N=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:T,maxDataValue:V}]}O=
null!=O.multidimensionalInfo?W.get(O.multidimensionalInfo.variables[0].unit):null;N=new c({visualVariables:N,inputUnit:O,rotationType:"geographic"});N.visualVariables=[...N.sizeVariables,...N.rotationVariables];return N}function I(O){return{color:O.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function B(O,N){if("vector-magdir"===O)O=N[0].min,N=N[0].max;else{const T=N[0].min,V=N[0].max,X=N[1].min;N=N[1].max;O=0;N=Math.max(Math.abs(T),Math.abs(X),Math.abs(V),Math.abs(N))}return{minMagnitude:O,
maxMagnitude:N}}const z=q.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),M=q.fromJSON(D.PREDEFINED_JSON_COLOR_RAMPS[0]),S=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),W=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);
J.createClassBreaksRenderer=function(O,N){O=d(O,N?.variableName);const {attributeTable:T}=O;if(!F.isClassBreaksSupported(O))return null;const V=null!=O.histograms?O.histograms[0]:null,X=null!=N?.numClasses&&isFinite(N?.numClasses)?N.numClasses:5,ba=new P({classificationMethod:N?.classificationMethod,colorRamp:N?.colorRamp});let Y=N?.field||"value";const ca=[],Z=[],ea=null!=T,fa=ea&&T.fields.find(na=>"count"===na.name.toLowerCase()),ha=ea?T.fields.find(na=>na.name.toLowerCase()===Y.toLowerCase()):
void 0;if(ha&&ea){Y=ha.name;const na=T.features.length;let ua=0;T.features.forEach(va=>ua+=(fa?va.attributes[fa.name]:50)/na);T.features.forEach(va=>{const za=va.attributes[ha.name];va=fa?va.attributes[fa.name]:50;if(0<va){Z.push(va);va=Math.max(1,Math.round(va/na/ua*1E3));for(let ya=0;ya<va;ya++)ca.push(za)}})}else{var {pixelType:la}=O;const na=(V.max-V.min)/V.size,ua=(la=la.includes("s")||la.includes("u"))&&1===na?Math.floor(V.min+.5):V.min,va=la&&1===na?Math.floor(V.max-.5):V.max,za=V.size;let ya=
0,Ea;V.counts.forEach(sa=>ya+=sa/za);V.counts.forEach((sa,Ga)=>{if(0<sa)for(Z.push(sa),sa=Math.max(1,Math.round(sa/za/ya*1E3)),Ea=ea?T.features[Ga].attributes[ha.name]:0===Ga?ua:Ga===za-1?va:V.min+na*(Ga+.5),Ga=0;Ga<sa;Ga++)ca.push(Ea)})}la=N?.classificationMethod||"natural-breaks";let ia=N?.definedInterval;"defined-interval"!==la||ia||(ia=K(O,ha,X));O=n.createGenerateRendererClassBreaks({values:ca,valueFrequency:Z,normalizationTotal:null,definition:new l({classificationMethod:la,breakCount:X,definedInterval:ia})});
let qa=N?.colors;qa||(N=N?.colorRamp||z,ba.colorRamp=N,qa=D.convertColorRampToColormap(N,{numColors:O.classBreaks.length,interpolateAlpha:!0}).map(na=>na.slice(1)));N=O.classBreaks.map((na,ua)=>new Q({minValue:na.minValue,maxValue:na.maxValue,label:na.label,symbol:{type:"simple-fill",color:qa[ua]}}));return new a({field:Y,classBreakInfos:N,authoringInfo:ba})};J.createColormapRenderer=G;J.createDefaultRenderer=function(O,N){const {attributeTable:T,colormap:V}=O;if(F.isVectorFieldRendererSupported(O)){var X=
A(O);if(null!=X)return X}return null!=V&&(X=G(O),null!=X)||null!=T&&(X=x(O),null!=X)?X:b(O,N)};J.createFlowRenderer=function(O){if(!F.isFlowRendererSupported(O))return null;let N;if(null!=O.statistics&&0<O.statistics.length&&("vector-magdir"===O.dataType||"vector-uv"===O.dataType)){const {minMagnitude:T,maxMagnitude:V}=B(O.dataType,O.statistics);N=[{type:"color",field:"Magnitude",stops:[{value:T,color:"#1020C0"},{value:V,color:"#C02010"}]}]}return new L({visualVariables:N})};J.createShadedReliefRenderer=
function(O,N="traditional"){if(!F.isShadedReliefRendererSupported(O))return null;({extent:O}=O);O=O.width*E.getMetersPerUnitForSR(O.spatialReference);return new m({hillshadeType:N,scalingType:5E6<O?"adjusted":"none"})};J.createStretchRenderer=b;J.createUVRenderer=x;J.createVectorFieldRenderer=A;J.estimateMagnitudeRange=B;J.getBandNames=function(O,N){const T=O.bandInfos.map(({name:V})=>V);return N?.length?N.map(V=>T[V]):T};J.getClassField=p;J.getDefaultBandCombination=g;J.getDefaultInterpolation=function(O,
N,T){const V=["nearest","bilinear","cubic","majority"].find(X=>X===T?.toLowerCase());return"Map"===N?V??"bilinear":"standard-time"===O.dataType?V??"nearest":"thematic"===O.dataType||O.attributeTable||O.colormap?"nearest"===V||"majority"===V?V:"nearest":V??"bilinear"};J.getDefinedInterval=K;J.getField=H;J.getSupportedRendererTypes=function(O,N=!1){const T=["raster-stretch"];F.isColormapRendererSupported(O,N)&&T.push("raster-colormap");F.isUVRendererSupported(O)&&T.push("unique-value");F.isClassBreaksSupported(O,
N)&&T.push("class-breaks");F.isShadedReliefRendererSupported(O)&&T.push("raster-shaded-relief");F.isVectorFieldRendererSupported(O)&&T.push("vector-field");F.isFlowRendererSupported(O)&&T.push("flow");return T};J.getVariableRasterInfo=d;J.getWellKnownBandIndexes=h;J.normalizeRendererJSON=function(O){if("uniqueValue"===O.type){var N=O.uniqueValueInfos;N?.[0].symbol?.symbolLayers?.length&&(O.uniqueValueInfos=N?.map(T=>({value:T.value,label:T.label,symbol:T.symbol?I(T.symbol):null})));return O}"classBreaks"===
O.type&&(N=O.classBreakInfos,N[0].symbol?.symbolLayers?.length&&(O.classBreakInfos=N.map(T=>({classMinValue:T.classMinValue,classMaxValue:T.classMaxValue,label:T.label,symbol:T.symbol?I(T.symbol):null}))));return O};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/rasterRendererChecks":function(){define(["exports"],function(J){function u(t){return["u8","s8"].includes(t.pixelType)&&null!=t.statistics?.[0]?.min&&null!=t.statistics[0]?.max&&1===t.bandCount}J.isClassBreaksSupported=
function(t,E=!1){const {attributeTable:r,bandCount:R}=t;return 1===R&&(!E||null!=r||null!=t.histograms)};J.isColormapRendererSupported=function(t,E=!1){const {bandCount:r,colormap:R,pixelType:L}=t;return 1===r&&(!!R?.length||!E&&"u8"===L)};J.isFlowRendererSupported=function(t){({dataType:t}=t);return"vector-uv"===t||"vector-magdir"===t};J.isShadedReliefRendererSupported=function(t){const {bandCount:E,dataType:r,pixelType:R}=t;return"elevation"===r||"generic"===r&&1===E&&("s16"===R||"s32"===R||"f32"===
R||"f64"===R)};J.isSingleBand8BitRasterWithStats=u;J.isUVRendererSupported=function(t,E){const {attributeTable:r,bandCount:R}=t;return null==r&&u(t)?!0:null==r||1<R||E&&null==r.fields.find(L=>L.name.toLowerCase()===E.toLowerCase())?!1:!0};J.isVectorFieldRendererSupported=function(t){({dataType:t}=t);return"vector-uv"===t||"vector-magdir"===t};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(J,u,t,E,r,R,L,P,Q,D){R=new t.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});t=new t.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});E=function(F){function f(l){l=F.call(this,l)||this;l.type="class-breaks-definition";l.breakCount=
null;l.classificationField=null;l.classificationMethod=null;l.normalizationField=null;l.normalizationType=null;return l}J._inherits(f,F);J._createClass(f,[{key:"standardDeviationInterval",set:function(l){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",l)}},{key:"definedInterval",set:function(l){"defined-interval"===this.classificationMethod&&this._set("definedInterval",l)}}]);return f}(E.JSONSupport);u.__decorate([Q.enumeration({classBreaksDef:"class-breaks-definition"})],
E.prototype,"type",void 0);u.__decorate([r.property({json:{write:!0}})],E.prototype,"breakCount",void 0);u.__decorate([r.property({json:{write:!0}})],E.prototype,"classificationField",void 0);u.__decorate([r.property({type:String,json:{read:R.read,write:R.write}})],E.prototype,"classificationMethod",void 0);u.__decorate([r.property({json:{write:!0}})],E.prototype,"normalizationField",void 0);u.__decorate([r.property({json:{read:t.read,write:t.write}})],E.prototype,"normalizationType",void 0);u.__decorate([r.property({value:null,
json:{write:!0}})],E.prototype,"standardDeviationInterval",null);u.__decorate([r.property({value:null,json:{write:!0}})],E.prototype,"definedInterval",null);return E=u.__decorate([D.subclass("esri.rest.support.ClassBreaksDefinition")],E)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(J,u){function t(l){var n=l.definition;const {classificationMethod:q,normalizationType:e,definedInterval:v}=n;n=n.breakCount??1;const w=[];var m=l.values;if(0===
m.length)return[];m=m.sort((h,k)=>h-k);var a=m[0],c=m[m.length-1];if("equal-interval"===q)if(m.length>=n){m=(c-a)/n;l=a;for(var b=1;b<n;b++){var d=Number((a+b*m).toFixed(6));w.push({minValue:l,maxValue:d,label:E(l,d,e)});l=d}w.push({minValue:l,maxValue:c,label:E(l,c,e)})}else m.forEach(h=>{w.push({minValue:h,maxValue:h,label:E(h,h,e)})});else if("natural-breaks"===q){m=r(m);l=R(m.uniqueValues,l.valueFrequency||m.valueFrequency,n);for(b=1;b<n;b++)m.uniqueValues.length>b&&(d=Number(m.uniqueValues[l[b]].toFixed(6)),
w.push({minValue:a,maxValue:d,label:E(a,d,e)}),a=d);w.push({minValue:a,maxValue:c,label:E(a,c,e)})}else if("quantile"===q)if(m.length>=n&&a!==c){l=Math.ceil(m.length/n);b=0;for(d=1;d<n;d++){var g=l+b-1;g>m.length&&(g=m.length-1);0>g&&(g=0);w.push({minValue:a,maxValue:m[g],label:E(a,m[g],e)});a=m[g];b+=l;l=Math.ceil((m.length-b)/(n-d))}w.push({minValue:a,maxValue:c,label:E(a,c,e)})}else for(n=-1,c=0;c<m.length;c++)a=m[c],a!==n&&(n=a,w.push({minValue:n,maxValue:a,label:E(n,a,e)}),n=a);else if("standard-deviation"===
q)if(l=Q(m),b=D(m,l),0===b)w.push({minValue:m[0],maxValue:m[0],label:E(m[0],m[0],e)});else{m=P(a,c,n,l,b)*b;b=0;for(d=n;1<=d;d--)g=Number((l-(d-.5)*m).toFixed(6)),w.push({minValue:a,maxValue:g,label:E(a,g,e)}),a=g,b++;d=Number((l+.5*m).toFixed(6));w.push({minValue:a,maxValue:d,label:E(a,d,e)});a=d;b++;for(g=1;g<=n;g++)d=b===2*n?c:Number((l+(g+.5)*m).toFixed(6)),w.push({minValue:a,maxValue:d,label:E(a,d,e)}),a=d,b++}else if("defined-interval"===q){if(!v)return w;n=m[0];c=m[m.length-1];m=Math.ceil((c-
n)/v);a=n;for(l=1;l<m;l++)b=Number((n+l*v).toFixed(6)),w.push({minValue:a,maxValue:b,label:E(a,b,e)}),a=b;w.push({minValue:a,maxValue:c,label:E(a,c,e)})}return w}function E(l,n,q){let e=null;return e=l===n?q&&"percent-of-total"===q?l+"%":l.toString():q&&"percent-of-total"===q?l+"% - "+n+"%":l+" - "+n}function r(l){const n=[],q=[];let e=Number.MIN_VALUE,v=1,w=-1;for(let m=0;m<l.length;m++){const a=l[m];a===e?(v++,q[w]=v):null!==a&&(n.push(a),e=a,v=1,q.push(v),w++)}return{uniqueValues:n,valueFrequency:q}}
function R(l,n,q){var e=l.length;const v=[];q>e&&(q=e);for(var w=0;w<q;w++)v.push(Math.round(w*e/q-1));v.push(e-1);w=L(v,l,n,q);e=w.mean;w=w.sdcm;var m=q,a=0,c=0;let b=0,d=0,g=!0;for(let k=0;2>k&&g;k++){0===k&&(g=!1);for(var h=0;h<m-1;h++)for(;v[h+1]+1!==v[h+2];)if(v[h+1]+=1,a=F(h,v,l,n),b=a.sbMean,a=a.sbSdcm,c=F(h+1,v,l,n),d=c.sbMean,c=c.sbSdcm,a+c<w[h]+w[h+1])w[h]=a,w[h+1]=c,e[h]=b,e[h+1]=d,g=!0;else{--v[h+1];break}for(h=m-1;0<h;h--)for(;v[h]!==v[h-1]+1;)if(--v[h],a=F(h-1,v,l,n),b=a.sbMean,a=a.sbSdcm,
c=F(h,v,l,n),d=c.sbMean,c=c.sbSdcm,a+c<w[h-1]+w[h])w[h-1]=a,w[h]=c,e[h-1]=b,e[h]=d,g=!0;else{v[h]+=1;break}}g&&(w=L(v,l,n,q));return v}function L(l,n,q,e){let v=[];var w=[],m=[];let a=0;const c=[],b=[];for(var d=0;d<e;d++){var g=F(d,l,n,q);c.push(g.sbMean);b.push(g.sbSdcm);a+=b[d]}g=a;for(d=!0;d||a<g;){d=!1;v=[];for(w=0;w<e;w++)v.push(l[w]);for(m=0;m<e;m++)for(g=l[m]+1;g<=l[m+1];g++)if(w=n[g],0<m&&g!==l[m+1]&&Math.abs(w-c[m])>Math.abs(w-c[m-1]))l[m]=g;else if(m<e-1&&l[m]!==g-1&&Math.abs(w-c[m])>Math.abs(w-
c[m+1])){l[m+1]=g-1;break}g=a;a=0;w=[];m=[];for(let h=0;h<e;h++){w.push(c[h]);m.push(b[h]);const k=F(h,l,n,q);c[h]=k.sbMean;b[h]=k.sbSdcm;a+=b[h]}}if(a>g){for(n=0;n<e;n++)l[n]=v[n],c[n]=w[n],b[n]=m[n];a=g}return{mean:c,sdcm:b}}function P(l,n,q,e,v){l=Math.max(e-l,n-e)/v/q;return 1<=l?1:.5<=l?.5:.25}function Q(l){let n=0;for(let q=0;q<l.length;q++)n+=l[q];return n/=l.length}function D(l,n){let q=0;for(let e=0;e<l.length;e++){const v=l[e];q+=(v-n)*(v-n)}q/=l.length;return Math.sqrt(q)}function F(l,
n,q,e){var v=0,w=0;for(var m=n[l]+1;m<=n[l+1];m++){const a=e[m];v+=q[m]*a;w+=a}0>=w&&f.warn("Exception in Natural Breaks calculation");v/=w;w=0;for(m=n[l]+1;m<=n[l+1];m++)w+=e[m]*(q[m]-v)**2;return{sbMean:v,sbSdcm:w}}const f=u.getLogger("esri.rest.support.generateRendererUtils");J.createGenerateRendererClassBreaks=function(l){const {normalizationTotal:n}=l;return{classBreaks:t(l),normalizationTotal:n}};J.createGenerateRendererUniqueValues=function(l){l=r(l);const n=[],q=l.uniqueValues.length;for(let e=
0;e<q;e++){const v=l.uniqueValues[e];n.push({value:v,count:l.valueFrequency[e],label:v.toString()})}return{uniqueValues:n}};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils ./rasterRendererChecks".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n,q,e){function v(w){return f.isValidPixelBlock(w)&&0!==w.validPixelCount}E=function(w){function m(c){return w.call(this,c)||this}J._inherits(m,w);var a=m.prototype;a.bind=function(){const {rendererJSON:c}=this;if(!c)return{success:!1};this.lookup={rendererJSON:{}};let b;switch(c.type){case "uniqueValue":b=this._updateUVRenderer(c);break;case "rasterColormap":b=this._updateColormapRenderer(c);break;case "rasterStretch":b=this._updateStretchRenderer(c);break;case "classBreaks":b=
this._updateClassBreaksRenderer(c);break;case "rasterShadedRelief":b=this._updateShadedReliefRenderer(c);break;case "vectorField":b=this._updateVectorFieldRenderer();break;case "flowRenderer":b=this._updateFlowRenderer()}return b};a.symbolize=function(c){let b=c&&c.pixelBlock;if(!v(b))return b;if(c.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(b,c.simpleStretchParams);try{3<b.pixels.length&&(b=b.extractBands([0,1,2]));let d;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":d=
this._symbolizeColormap(b);break;case "classBreaks":d=this._symbolizeClassBreaks(b);break;case "rasterStretch":d=this._symbolizeStretch(b,c.bandIds);break;case "rasterShadedRelief":const g=c.extent;d=this._symbolizeShadedRelief(b,{isGCS:g.spatialReference.isGeographic,resolution:{x:(g.xmax-g.xmin)/b.width,y:(g.ymax-g.ymin)/b.height}})}return d}catch(d){return r.getLogger(this).error("symbolize",d.message),b}};a.simpleStretch=function(c,b){if(!v(c))return c;try{return 3<c.pixels.length&&(c=c.extractBands([0,
1,2])),l.stretch(c,{...b,isRenderer:!0})}catch(d){return r.getLogger(this).error("symbolize",d.message),c}};a.generateWebGLParameters=function(c){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const {indexedColormap:k,offset:x}=this.lookup.colormapLut||{};return{colormap:k,colormapOffset:x,type:"lut"}}const {pixelBlock:b,isGCS:d,resolution:g,bandIds:h}=c;({rendererJSON:c}=this);return"rasterStretch"===c.type?this._generateStretchWebGLParams(b,c,h):"rasterShadedRelief"===
c.type?this._generateShadedReliefWebGLParams(c,d,g??void 0):"vectorField"===c.type?this._generateVectorFieldWebGLParams(c):null};a._isLUTChanged=function(c){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const b=this.rendererJSON.colorRamp;if(c)return JSON.stringify(b)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};
a._symbolizeColormap=function(c){return this._isLUTChanged()&&!this.bind().success?c:f.colorize(c,this.lookup.colormapLut)};a._symbolizeClassBreaks=function(c){const {canUseIndexedLUT:b}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?c:b?f.colorize(c,this.lookup.colormapLut):f.remapColor(c,this.lookup.remapLut??[])};a._symbolizeStretch=function(c,b){const {rasterInfo:d}=this,{pixelType:g,bandCount:h}=d,k=this.rendererJSON;var x=["u8","u16","s8","s16"].includes(g);
let p;var {dra:y}=k;({gamma:H}=this.lookup);if("histogramEqualization"===k.stretchType){x=y?null:this.lookup?.histogramLut;b=l.getStretchCutoff(k,{rasterInfo:d,pixelBlock:c,bandIds:b,returnHistogramLut:!x});var H=l.stretch(c,{...b,gamma:H,isRenderer:!0});H=f.lookupPixels(H,{lut:y?b.histogramLut:x,offset:0})}else if(x){if(y)y=l.getStretchCutoff(k,{rasterInfo:d,pixelBlock:c,bandIds:b}),p=l.createStretchLUT({pixelType:g,...y,gamma:H,rounding:"floor"});else{if(this._isLUTChanged()&&!this.bind().success)return c;
p=this.lookup?this.lookup.stretchLut:null}if(!p)return c;1<h&&null!=b&&b.length===c?.pixels.length&&p?.lut.length===h&&(p={lut:b.map(G=>p.lut[G]),offset:p.offset});H=f.lookupPixels(c,p)}else y=l.getStretchCutoff(k,{rasterInfo:d,pixelBlock:c,bandIds:b}),H=l.stretch(c,{...y,gamma:H,isRenderer:!0});if(k.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return c;H=f.colorize(H,this.lookup?.colormapLut)}return H};a._symbolizeShadedRelief=function(c,b){var d=this.rendererJSON;b=n.hillshade(c,{...d,
...b});if(!d.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return b;d=this.lookup?this.lookup.hsvMap:null;if(!d)return b;n.tintHillshade(b,c,d,this.rasterInfo.statistics?.[0]??{min:0,max:8E3});return b};a._isVectorFieldData=function(){const {bandCount:c,dataType:b}=this.rasterInfo;return 2===c&&("vector-magdir"===b||"vector-uv"===b)};a._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};
a._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};a._updateUVRenderer=function(c){const {bandCount:b,attributeTable:d,pixelType:g}=this.rasterInfo,h=c.field1;if(!h)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const k=c.defaultSymbol;var x=1===b&&["u8","s8"].includes(g);if(!e.isUVRendererSupported(this.rasterInfo,
h)&&!x)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const p=[];if(null!=d){const y=d.fields.find(H=>"value"===H.name.toLowerCase());if(!y)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};d.features.forEach(H=>{const G=c.uniqueValueInfos?.find(K=>String(K.value)===String(H.attributes[h]))?.symbol?.color;G?p.push([H.attributes[y.name]].concat(G)):
k&&p.push([H.attributes[y.name]].concat(k.color))})}else{if("value"!==h.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};c.uniqueValueInfos?.forEach(y=>{const H=y?.symbol?.color;H?p.push([parseInt(""+y.value,10)].concat(H)):k&&p.push([parseInt(""+y.value,10)].concat(k?.color))})}if(0===p.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};
x=f.createColormapLUT({colormap:p});this.lookup={rendererJSON:c,colormapLut:x};this.canRenderInWebGL=!0;return{success:!0}};a._updateColormapRenderer=function(c){if(!e.isColormapRendererSupported(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};var b=c.colormapInfos.map(d=>[d.value].concat(d.color)).sort((d,g)=>d[0]-g[0]);if(!b||0===b.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};
b=f.createColormapLUT({colormap:b});this.lookup={rendererJSON:c,colormapLut:b};this.canRenderInWebGL=!0;return{success:!0}};a._updateShadedReliefRenderer=function(c){if(!e.isShadedReliefRendererSupported(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(c.colorRamp){var b=q.convertColorRampToColormap(c.colorRamp,{interpolateAlpha:!0});b=f.createColormapLUT({colormap:b});
const d=[],g=b.indexedColormap;for(let h=0;h<g.length;h+=4){const k=t.toHSV({r:g[h],g:g[h+1],b:g[h+2]});d.push([k.h/60,k.s/100,255*k.v/100])}this.lookup={rendererJSON:c,colormapLut:b,hsvMap:d}}else this.lookup=null;this.canRenderInWebGL=!0;return{success:!0}};a._analyzeClassBreaks=function(c){const {attributeTable:b,pixelType:d}=this.rasterInfo,g=null!=b?b.fields.find(x=>"value"===x.name.toLowerCase()):null,h=null!=b?b.fields.find(x=>x.name.toLowerCase()===c.field.toLowerCase()):null,k=null!=g&&null!==
h;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(d)||k,tableValueField:g,tableBreakField:h}};a._updateClassBreaksRenderer=function(c){var {attributeTable:b}=this.rasterInfo;const {canUseIndexedLUT:d,tableValueField:g,tableBreakField:h}=this._analyzeClassBreaks(c);var k=c.classBreakInfos;if(!k?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};k=k.sort((G,K)=>G.classMaxValue-K.classMaxValue);var x=k[k.length-1],p=c.minValue;if(!d){var y=
[];for(var H=0;H<k.length;H++)y.push({value:k[H].classMinValue??p,mappedColor:k[H].symbol.color}),p=k[H].classMaxValue;y.push({value:x.classMaxValue,mappedColor:x.symbol.color});this.lookup={rendererJSON:c,remapLut:y};this.canRenderInWebGL=!1;return{success:!0}}y=[];if(null!=b&&null!=g&&null!==h&&g!==h){x=g.name;const G=h.name,K=k[k.length-1],{classMaxValue:A}=K;p=c.minValue;for(H of b.features){b=H.attributes[x];const I=H.attributes[G],B=I===A?K:I<p?null:k.find(({classMaxValue:z})=>z>I);B&&y.push([b].concat(B.symbol.color))}}else{p=
Math.floor(c.minValue);for(H=0;H<k.length;H++){for(b=k[H];p<b.classMaxValue;p++)y.push([p].concat(b.symbol.color));p=Math.ceil(b.classMaxValue)}x.classMaxValue===p&&y.push([x.classMaxValue].concat(x.symbol.color))}k=f.createColormapLUT({colormap:y,fillUnspecified:!1});this.lookup={rendererJSON:c,colormapLut:k};this.canRenderInWebGL=!0;return{success:!0}};a._isHistogramRequired=function(c){return"percentClip"===c||"histogramEqualization"===c};a._isValidRasterStatistics=function(c){return null!=c&&
0<c.length&&null!=c[0].min&&null!=c[0].max};a._updateStretchRenderer=function(c){let {stretchType:b,dra:d}=c;if(!("none"===b||c.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||d))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var g=c.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(c.stretchType)||g?.length||d||(b="minMax");const {computeGamma:h,useGamma:k,colorRamp:x}=
c;let {gamma:p}=c;k&&h&&!p?.length&&(p=l.computeGammaValues(this.rasterInfo.pixelType,c.statistics?.length?c.statistics:this.rasterInfo.statistics));var y=this.rasterInfo.pixelType;const H=!d&&["u8","u16","s8","s16"].includes(y);"histogramEqualization"===b?(y=g.map(G=>l.createHistogramEqualizationLUT(G)),this.lookup={rendererJSON:c,histogramLut:y}):H&&(g=l.getStretchCutoff(c,{rasterInfo:this.rasterInfo}),y=l.createStretchLUT({pixelType:y,...g,gamma:k?p:null,rounding:"floor"}),this.lookup={rendererJSON:c,
stretchLut:y});x&&(y=q.convertColorRampToColormap(x,{interpolateAlpha:!0}),this.lookup||(this.lookup={rendererJSON:c}),this.lookup.colormapLut=f.createColormapLUT({colormap:y}),this.lookup.rendererJSON=c);this.lookup.gamma=k&&p?.length?p:null;this.canRenderInWebGL=!0;return{success:!0}};a._generateStretchWebGLParams=function(c,b,d){let g=null,h=null;var k=this.lookup&&this.lookup.colormapLut;b.colorRamp&&k&&(g=k.indexedColormap,h=k.offset);"histogramEqualization"===b.stretchType&&(b={...b,stretchType:"minMax"});
({gamma:k}=this.lookup);const x=!!(b.useGamma&&k&&k.some(B=>1!==B)),{minCutOff:p,maxCutOff:y,outMin:H,outMax:G}=l.getStretchCutoff(b,{rasterInfo:this.rasterInfo,pixelBlock:c,bandIds:d});var K=0;null!=c&&(K=c.getPlaneCount(),2===K&&(c=c.clone(),c.statistics=[c.statistics[0]],c.pixels=[c.pixels[0]]));({bandCount:c}=this.rasterInfo);d=Math.min(3,d?.length||K||c,c);c=new Float32Array(d);K=g||x?1:255;let A;for(A=0;A<p.length;A++)c[A]=y[A]===p[A]?0:(G-H)/(y[A]-p[A])/K;const I=new Float32Array(d);if(x&&
k)for(A=0;A<d;A++)I[A]=1<k[A]?2<k[A]?6.5+(k[A]-2)**2.5:6.5+100*(2-k[A])**4:1;return{bandCount:d,outMin:H/K,outMax:G/K,minCutOff:p,maxCutOff:y,factor:c,useGamma:x,gamma:x?k:[1,1,1],gammaCorrection:x?I:[1,1,1],colormap:g,colormapOffset:h,stretchType:b.stretchType,type:"stretch"}};a._generateShadedReliefWebGLParams=function(c,b=!1,d={x:0,y:0}){let g=null,h=null;const k=this.lookup&&this.lookup.colormapLut;c.colorRamp&&k&&(g=k.indexedColormap,h=k.offset);b=n.calculateHillshadeParams({...c,isGCS:b,resolution:d});
d=this.rasterInfo.statistics?.[0];return{...b,minValue:d?.min??0,maxValue:d?.max??8E3,hillshadeType:"traditional"===c.hillshadeType?0:1,type:"hillshade",colormap:g,colormapOffset:h}};a._generateVectorFieldWebGLParams=function(c){const {style:b,inputUnit:d,outputUnit:g,visualVariables:h,symbolTileSize:k,flowRepresentation:x}=c;let p;var y=this.rasterInfo.statistics?.[0].min??0,H=this.rasterInfo.statistics?.[0].max??50,G=h?.find(I=>"sizeInfo"===I.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:H,
maxSize:.8*k,minDataValue:y,minSize:.2*k},K=G.minDataValue??y,A=G.maxDataValue??H;H=null!=G.maxSize&&null!=G.minSize?[G.minSize/k,G.maxSize/k]:[.2,.8];"wind_speed"===b&&(H[0]=H[1]=(H[0]+H[1])/2);y=null!=K&&null!=A?[K,A]:null;if("classified_arrow"===b)if(null!=K&&null!=A&&null!=G)for(p=[],K=(G.maxDataValue-G.minDataValue)/5,A=0;6>A;A++)p.push(G.minDataValue+K*A);else p=[0,1E-6,3.5,7,10.5,14];G="flow_to"===x===("ocean_current_kn"===b||"ocean_current_m"===b)?0:Math.PI;K=h?.find(I=>"rotationInfo"===I.type);
return{breakValues:p,dataRange:y,inputUnit:d,outputUnit:g,symbolTileSize:k,symbolPercentRange:H,style:b||"single_arrow",rotation:G,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?"geographic":K?.rotationType||c.rotationType,type:"vectorField"}};return J._createClass(m)}(E.JSONSupport);u.__decorate([R.property({json:{write:!0}})],E.prototype,"rendererJSON",void 0);u.__decorate([R.property({type:F,json:{write:!0}})],E.prototype,"rasterInfo",void 0);u.__decorate([R.property({json:{write:!0}})],
E.prototype,"lookup",void 0);u.__decorate([R.property()],E.prototype,"canRenderInWebGL",void 0);return E=u.__decorate([D.subclass("esri.renderers.support.RasterSymbolizer")],E)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils","../../../renderers/support/stretchRendererUtils"],function(J,u,t,E,r){function R(l,n=256){n=Math.min(n,256);const {size:q,counts:e}=l;l=new Uint8Array(q);var v=e.reduce((b,
d)=>b+d/n,0);let w=0;var m=0;let a=0,c=v;for(let b=0;b<q;b++)if(a+=e[b],!(b<q-1&&a+e[b+1]<c)){for(;w<n-1&&c<a;)w++,c+=v;for(;m<=b;m++)l[m]=w;m=b+1}for(v=m;v<q;v++)l[v]=n-1;return l}function L(l,n){l=Math.min(Math.max(l,-100),100);n=Math.min(Math.max(n??0,-100),100);let q=0,e=0;const v=new Uint8Array(256);for(q=0;256>q;q++)0<l&&100>l?e=(200*q-25500+510*n)/(2*(100-l))+128:0>=l&&-100<l?e=(200*q-25500+510*n)*(100+l)/2E4+128:100===l?(e=200*q-25500+256*(100-l)+510*n,e=0<e?255:0):-100===l&&(e=128),v[q]=
255<e?255:0>e?0:e;return v}function P(l,n,q,e){let v=Infinity,w=-Infinity;var m=0,a=0;const c=l.length;for(var b=0;b<c;b++){var d=l[b];if(!n||n[b])v=d<v?d:v,w=d>w?d:w,m+=d,a++}if(0===a)return{statistics:{min:0,max:0,avg:0,stddev:0},histogram:null};m/=a;b=0;for(d=0;d<c;d++)if(!n||n[d])b+=(l[d]-m)**2;d=n?n.filter(g=>g).length:c;m={min:v,max:w,avg:m,stddev:1>=d?0:Math.sqrt(b/(d-1))};if(!e)return{statistics:m,histogram:null};if(["u8","s8","u4","u2","u1"].includes(q)){a=w-v+1;q=new Uint32Array(a);for(e=
0;e<c;e++)n&&!n[e]||q[l[e]-v]++;return{statistics:m,histogram:{min:v-.5,max:w+.5,size:a,counts:q}}}q=new Uint32Array(256);e=(w-v)/256;if(0===e)return{statistics:m,histogram:{min:v,max:w,size:1,counts:(new Uint32Array(1)).fill(a)}};a=new Uint32Array(257);for(b=0;b<c;b++)n&&!n[b]||a[Math.floor((l[b]-v)/e)]++;for(l=0;255>l;l++)q[l]=a[l];q[255]=a[255]+a[256];return{statistics:m,histogram:{min:v,max:w,size:256,counts:q}}}function Q(l){if(null==l||!l.pixels?.length)return null;const {pixels:n,mask:q,bandMasks:e,
pixelType:v}=l,w=l.width*l.height,m=n.length;let a,c;let b;var d;const g=[],h=[];for(b=0;b<m;b++){var k=new Uint32Array(256);var x=n[b];var p=e?.[b]??q;if("u8"===v)if(a=-.5,c=255.5,p)for(d=0;d<w;d++)p[d]&&k[x[d]]++;else for(d=0;d<w;d++)k[x[d]]++;else{d=!1;l.statistics||(l.updateStatistics(),d=!0);var y=l.statistics;a=y[b].minValue;c=y[b].maxValue;var H=(c-a)/256;if(0===H)for(!y||l.validPixelCount||d||l.updateStatistics(),H=(l.validPixelCount||l.width*l.height)/256,d=0;256>d;d++)k[d]=Math.round(H*
(d+1))-Math.round(H*d);else{y=new Uint32Array(257);for(d=0;d<w;d++)p&&!p[d]||y[Math.floor((x[d]-a)/H)]++;for(d=0;255>d;d++)k[d]=y[d];k[255]=y[255]+y[256]}}g.push({min:a,max:c,size:256,counts:k});for(d=p=x=H=0;256>d;d++)H+=k[d],x+=d*k[d];x/=H;for(d=0;256>d;d++)p+=k[d]*(d-x)**2;d=Math.sqrt(p/(H-1));H=(c-a)/256;k=(x+.5)*H+a;H*=d;h.push({min:a,max:c,avg:k,stddev:H})}return{statistics:h,histograms:g}}function D(l,n){if(null==n||0===n.length)return l;const q=Math.max.apply(null,n),{minCutOff:e,maxCutOff:v,
outMin:w,outMax:m,histogramLut:a}=l;return e.length===n.length||e.length<=q?l:{minCutOff:n.map(c=>e[c]),maxCutOff:n.map(c=>v[c]),histogramLut:a?n.map(c=>a[c]):null,outMin:w,outMax:m}}function F(l,n){const q=new Float32Array(l);for(let e=0;e<l;e++)q[e]=1<n[e]?2<n[e]?6.5+(n[e]-2)**2.5:6.5+100*(2-n[e])**4:1;return q}const f=[.299,.587,.114];J.computeGammaCorrection=F;J.computeGammaValues=function(l,n,q){const e=[];for(let c=0;c<n.length;c++){var v=0,w=0,m=0;"min"in n[c]?{min:v,max:w,avg:m}=n[c]:[v,w,
m]=n[c];m=m??0;"u8"!==l&&(m=255*(m-v)/(w-v));q&&(m*=f[c]);v=e;w=v.push;if(0>=m||255<=m)m=1;else{var a=0;150!==m&&(a=150>=m?45*Math.cos(.01047*m):17*Math.sin(.021*m));a=Math.log((m+a)/255);0===a?m=1:(m=Math.log(m/255)/a,m=isNaN(m)?1:Math.min(9.9,Math.max(.01,m)))}w.call(v,m)}return e};J.computeStatisticsHistograms=function(l){const {pixels:n,mask:q,pixelType:e,bandMasks:v}=l;var w=n.map((m,a)=>P(m,v?.[a]??q,e,!0));l=w.map(({statistics:m})=>m);w=w.map(({histogram:m})=>m);return{statistics:l,histograms:w}};
J.createContrastBrightnessLUT=L;J.createHistogramEqualizationLUT=R;J.createStretchLUT=function(l){const {minCutOff:n,maxCutOff:q,gamma:e,pixelType:v,rounding:w}=l,m=l.outMin||0,a=l.outMax||255;if(!["u8","u16","s8","s16"].includes(v))return null;const c=n.length;let b,d,g=0;"s8"===v?g=-127:"s16"===v&&(g=-32767);let h=256;["u16","s16"].includes(v)&&(h=65536);var k=[],x=[];const p=a-m;for(b=0;b<c;b++)x[b]=q[b]-n[b],k[b]=0===x[b]?0:p/x[b];let y;const H=[];let G,K;if(e&&e.length>=c)for(k=F(c,e),b=0;b<
c;b++){K=[];for(d=0;d<h;d++)if(0===x[b])K[d]=m;else{var A=d+g;y=(A-n[b])/x[b];G=1;1<e[b]&&(G-=(1/p)**(y*k[b]));A<q[b]&&A>n[b]?(A=G*p*y**(1/e[b])+m,K[d]="floor"===w?Math.floor(A):"round"===w?Math.round(A):A):K[d]=A>=q[b]?a:m}H[b]=K}else for(b=0;b<c;b++){K=[];for(d=0;d<h;d++)A=d+g,A<=n[b]?K[d]=m:A>=q[b]?K[d]=a:(x=(A-n[b])*k[b]+m,K[d]="floor"===w?Math.floor(x):"round"===w?Math.round(x):x);H[b]=K}if(null!=l.contrastOffset)for(l=L(l.contrastOffset,l.brightnessOffset),b=0;b<c;b++)for(K=H[b],d=0;d<h;d++)K[d]=
l[K[d]];return{lut:H,offset:g}};J.estimateStatisticsFromHistograms=function(l){const n=[];for(let w=0;w<l.length;w++){const {min:m,max:a,size:c,counts:b}=l[w];let d=0;var q=0;for(var e=0;e<c;e++)d+=b[e],q+=e*b[e];q/=d;e=0;for(var v=0;v<c;v++)e+=b[v]*(v-q)**2;v=(a-m)/c;n.push({min:m,max:a,avg:(q+.5)*v+m,stddev:Math.sqrt(e/(d-1))*v})}return n};J.estimateStatisticsHistograms=Q;J.getStretchCutoff=function(l,n){const {pixelBlock:q,bandIds:e,returnHistogramLut:v,rasterInfo:w}=n;var m=null;n=null;var a=
l.stretchType;"number"===typeof a&&(a=r.stretchTypeFunctionEnum[a]);l.dra?"minMax"===a&&null!=q&&q.statistics?m=q.statistics.map(A=>[A.minValue,A.maxValue,0,0]):(n=Q(q),m=null!=n?n.statistics:null,n=null!=n?n.histograms:null):(m=0<l.statistics?.length?l.statistics:w.statistics,n="histograms"in l?l.histograms:void 0,n||(n=w.histograms));"percentClip"!==a&&"histogramEqualization"!==a||n?.length||(a="minMax");var c=m?.length||n?.length||w.bandCount;const b=[],d=[];let g,h,k,x;m&&!Array.isArray(m[0])&&
(m=m.map(A=>[A.min,A.max,A.avg,A.stddev]));const [p,y]=E.getPixelValueRange(w.pixelType);if(!m?.length){m=[];for(k=0;k<c;k++)m.push([p,y,1,1]);"standardDeviation"===a&&(a="minMax")}switch(a){case "none":for(k=0;k<c;k++)b[k]=p,d[k]=y;break;case "minMax":for(k=0;k<c;k++){var H=m[k];b[k]=H[0];d[k]=H[1]}break;case "standardDeviation":for(k=0;k<c;k++)H=m[k],b[k]=H[2]-l.numberOfStandardDeviations*H[3],d[k]=H[2]+l.numberOfStandardDeviations*H[3],b[k]<H[0]&&(b[k]=H[0]),d[k]>H[1]&&(d[k]=H[1]);break;case "histogramEqualization":u.assertIsSome(n);
for(k=0;k<c;k++)b[k]=n[k].min,d[k]=n[k].max;break;case "percentClip":u.assertIsSome(n);for(k=0;k<n.length;k++){m=n[k];g=new Uint32Array(m.size);var G=[...m.counts];20<=G.length&&(G[0]=G[1]=G[2]=G[G.length-1]=G[G.length-2]=0);H=0;c=(m.max-m.min)/m.size;h=-.5===m.min&&1===c?.5:0;for(x=0;x<m.size;x++)H+=G[x],g[x]=H;G=(l.minPercent||0)*H/100;b[k]=m.min+h;for(x=0;x<m.size;x++)if(g[x]>G){b[k]=m.min+c*(x+h);break}G=(1-(l.maxPercent||0)/100)*H;d[k]=m.max+h;for(x=m.size-2;0<=x;x--)if(g[x]<G){d[k]=m.min+c*
(x+2-h);break}d[k]<b[k]&&(m=b[k],b[k]=d[k],d[k]=m)}break;default:for(k=0;k<c;k++)H=m[k],b[k]=H[0],d[k]=H[1]}let K;"histogramEqualization"===a?(u.assertIsSome(n),a=n[0].size||256,l=0,v&&(K=n.map(A=>R(A)))):(a=l.max||255,l=l.min||0);return D({minCutOff:b,maxCutOff:d,outMax:a,outMin:l,histogramLut:K},e)};J.stretch=function(l,n){if(null==l||!l.pixels?.length)return l;const {mask:q,bandMasks:e,width:v,height:w,pixels:m}=l,{minCutOff:a,maxCutOff:c,gamma:b}=n;var d=n.outMin||0;const g=n.outMax||255,h=v*
w,k=n.outputPixelType||"u8";l=l.pixels.map(()=>t.createEmptyBand(k,h));const x=l.length;var p=g-d,y=[],H=[];for(var G=0;G<x;G++)H[G]=c[G]-a[G],y[G]=0===H[G]?0:p/H[G];G=k.startsWith("u")||k.startsWith("s");n=!!n.isRenderer;if(b&&b.length>=x){y=F(x,b);for(var K=0;K<x;K++){var A=e?.[K]??q;for(let B=0;B<h;B++)if(null==A||A[B]){if(0===H[K]){l[K][B]=d;continue}var I=m[K][B];const z=(I-a[K])/H[K];let M=1;1<b[K]&&(M-=(1/p)**(z*y[K]));I<c[K]&&I>a[K]?(I=M*p*z**(1/b[K])+d,l[K][B]=n?Math.floor(I):G?Math.round(I):
I):l[K][B]=I>=c[K]?g:d}}}else for(p=0;p<x;p++)for(H=e?.[p]??q,K=0;K<h;K++)if(null==H||H[K])A=m[p][K],A<c[p]&&A>a[p]?(A=(A-a[p])*y[p]+d,l[p][K]=n?Math.floor(A):G?Math.round(A):A):l[p][K]=A>=c[p]?g:d;d=new t({width:v,height:w,mask:q,bandMasks:e,pixels:l,pixelType:k});d.updateStatistics();return d};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(J,u,t){function E(P){let {altitude:Q,
azimuth:D}=P;const {hillshadeType:F,pixelSizePower:f=1,pixelSizeFactor:l=1,scalingType:n,isGCS:q,resolution:e}=P;var v="multi-directional"===F?2*P.zFactor:P.zFactor;const {x:w,y:m}=e;P=v/(8*w);var a=v/(8*m);q&&.001<v&&(P/=L,a/=L);"adjusted"===n&&(q?(P=w*L,a=m*L,P=(v+P**f*l)/(8*P),a=(v+a**f*l)/(8*a)):(P=(v+w**f*l)/(8*w),a=(v+m**f*l)/(8*m)));var c=(90-Q)*Math.PI/180;v=Math.cos(c);let b=(360-D+90)*Math.PI/180,d=Math.sin(c)*Math.cos(b);c=Math.sin(c)*Math.sin(b);const g=[315,270,225,360,180,0],h=[60,60,
60,60,60,90];var k=new Float32Array([3,5,3,2,1,4]);const x=k.reduce((K,A)=>K+A);k=k.map(K=>K/x);const p="multi-directional"===F?g.length:1,y=new Float32Array(6),H=new Float32Array(6),G=new Float32Array(6);if("multi-directional"===F)for(let K=0;K<p;K++)Q=h[K],D=g[K],c=(90-Q)*Math.PI/180,v=Math.cos(c),b=(360-D+90)*Math.PI/180,d=Math.sin(c)*Math.cos(b),c=Math.sin(c)*Math.sin(b),y[K]=v,H[K]=d,G[K]=c;else y.fill(v),H.fill(d),G.fill(c);return{resolution:e,factor:[P,a],sinZcosA:d,sinZsinA:c,cosZ:v,sinZcosAs:H,
sinZsinAs:G,cosZs:y,weights:k,hillshadeType:["traditional","multi-directional"].indexOf(F)}}function r(P,Q){const {width:D,height:F}=P;var f=D*F;const l=new Uint8Array(f),n=null!=P.mask;let q;if(n){q=new Uint8Array(P.mask);for(var e=0;e<q.length;e++)q[e]&&(l[e]=1,q[e]=1)}P=P.pixels[0];e=new Float32Array(f);const v=new Float32Array(f);let w=0;if(Q){({resolution:m}=Q);var m=m?(m.x+m.y)/2:1;w=200*Q.zFactor/(m*m);m=new Float32Array(f)}Q=Q?.curvatureType;let a;let c;for(f=1;f<F-1;f++){const y=f*D;for(let H=
1;H<D-1;H++){const G=y+H;if(!q||0!==q[G]){if(q){if(7>q[G-D-1]+q[G-D]+q[G-D+1]+q[G-1]+q[G+1]+q[G+D-1]+q[G+D]+q[G+D+1]){l[G]=0;continue}var b=q[G-D-1]?P[G-D-1]:P[G];var d=q[G-D]?P[G-D]:P[G];var g=q[G-D+1]?P[G-D+1]:P[G];var h=q[G-1]?P[G-1]:P[G];var k=q[G+1]?P[G+1]:P[G];a=q[G+D-1]?P[G+D-1]:P[G];var x=q[G+D]?P[G+D]:P[G];c=q[G+D+1]?P[G+D+1]:P[G]}else b=P[G-D-1],d=P[G-D],g=P[G-D+1],h=P[G-1],k=P[G+1],a=P[G+D-1],x=P[G+D],c=P[G+D+1];e[G]=g+k+k+c-(b+h+h+a);v[G]=a+x+x+c-(b+d+d+g);if(null!=m){var p=P[G];const K=
.5*(h+k)-p;p=.5*(d+x)-p;"standard"===Q?m[G]=-w*(K+p):(b=(-b+g+a-c)/4,h=(-h+k)/2,d=(d-x)/2,x=h*h,k=d*d,(g=x+k)&&(m[G]="profile"===Q?w*(K*x+p*k+b*h*d)/g:-w*(K*k+p*x-b*h*d)/g))}}}}return{outMask:n?l:null,dzxs:e,dzys:v,curvatures:m}}function R(P,Q,D){for(var F=0;F<D;F++)P[F*Q]=P[F*Q+1],P[(F+1)*Q-1]=P[(F+1)*Q-2];for(F=1;F<Q-1;F++)P[F]=P[F+Q],P[F+(D-1)*Q]=P[F+(D-2)*Q]}const L=1/111E3;J.GCS_FACTOR=L;J.aspect=function(P,Q={}){if(!t.isValidPixelBlock(P))return P;var {resolution:D}=Q;Q=D?1/D.x:1;D=D?1/D.y:
1;const {dzxs:F,dzys:f,outMask:l}=r(P),{width:n,height:q}=P,e=new Float32Array(n*q);for(let w=1;w<q-1;w++){const m=w*n;for(let a=1;a<n-1;a++){var v=m+a;if(!l||l[v]){const c=F[v]*Q;v=f[v]*D;let b=-1;if(0!==c||0!==v)b=90-57.29578*Math.atan2(v,-c),0>b&&(b+=360),360===b?b=0:360<b&&(b%=360);e[m+a]=b}}}R(e,n,q);return new u({width:n,height:q,pixels:[e],mask:l,pixelType:"f32",validPixelCount:P.validPixelCount,statistics:[{minValue:-1,maxValue:360}]})};J.calculateHillshadeParams=E;J.curvature=function(P,
Q){if(!t.isValidPixelBlock(P))return P;const {curvatures:D,outMask:F}=r(P,Q),{width:f,height:l}=P;R(D,f,l);P=new u({width:f,height:l,pixels:[D],mask:F,pixelType:"f32",validPixelCount:P.validPixelCount});P.updateStatistics();return P};J.hillshade=function(P,Q){if(!t.isValidPixelBlock(P))return P;const {factor:D,sinZcosA:F,sinZsinA:f,cosZ:l,sinZcosAs:n,sinZsinAs:q,cosZs:e,weights:v}=E(Q),[w,m]=D;Q="traditional"===Q.hillshadeType;const {width:a,height:c}=P,b=new Uint8Array(a*c),{dzxs:d,dzys:g,outMask:h}=
r(P);for(let x=1;x<c-1;x++){const p=x*a;for(let y=1;y<a-1;y++){const H=p+y;if(!h||h[H]){var k=d[H]*w;const G=g[H]*m,K=Math.sqrt(1+k*k+G*G);let A=0;if(Q)k=255*(l+f*G-F*k)/K,0>k&&(k=0),A=k;else{const I=q.length;for(let B=0;B<I;B++){let z=255*(e[B]+q[B]*G-n[B]*k)/K;0>z&&(z=0);A+=z*v[B]}}b[H]=A&255}}}R(b,a,c);return new u({width:a,height:c,pixels:[b],mask:h,pixelType:"u8",validPixelCount:P.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};J.slope=function(P,Q){if(!t.isValidPixelBlock(P))return P;
var D=Q.zFactor,F=Q.pixelSizePower??1,f=Q.pixelSizeFactor??1;const l=Q.slopeType;var n=Q.isGCS;const {x:q,y:e}=Q.resolution;Q=D/(8*q);let v=D/(8*e);n&&1E-4>Math.abs(D-1)&&(Q/=L,v/=L);"adjusted"===l&&(Q=(D+q**F*f)/(8*q),v=(D+e**F*f)/(8*e));const {dzxs:w,dzys:m,outMask:a}=r(P),{width:c,height:b}=P;D=new Float32Array(c*b);for(F=1;F<b-1;F++)for(f=F*c,n=1;n<c-1;n++){var d=f+n;if(!a||a[d]){var g=w[d]*Q;d=m[d]*v;g=Math.sqrt(g*g+d*d);D[f+n]="percent-rise"===l?100*g:57.2957795*Math.atan(g)}}R(D,c,b);P=new u({width:c,
height:b,pixels:[D],mask:a,pixelType:"f32",validPixelCount:P.validPixelCount});P.updateStatistics();return P};J.tintHillshade=function(P,Q,D,F){if(t.isValidPixelBlock(P)&&t.isValidPixelBlock(Q)){var {min:f,max:l}=F;F=P.pixels[0];var {pixels:n,mask:q}=Q;Q=n[0];var e=255.00001/(l-f),v=new Uint8ClampedArray(Q.length),w=new Uint8ClampedArray(Q.length),m=new Uint8ClampedArray(Q.length),a=D.length-1;for(let d=0;d<Q.length;d++){if(q&&0===q[d])continue;var c=Math.floor((Q[d]-f)*e);const [g,h]=D[0>c?0:c>a?
a:c];var b=F[d];c=b*h;const k=c*(1-Math.abs(g%2-1));b-=c;switch(Math.floor(g)){case 0:v[d]=c+b;w[d]=k+b;m[d]=b;break;case 1:v[d]=k+b;w[d]=c+b;m[d]=b;break;case 2:v[d]=b;w[d]=c+b;m[d]=k+b;break;case 3:v[d]=b;w[d]=k+b;m[d]=c+b;break;case 4:v[d]=k+b;w[d]=b;m[d]=c+b;break;case 5:case 6:v[d]=c+b,w[d]=b,m[d]=k+b}}P.pixels=[v,w,m];P.updateStatistics()}};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService":function(){define("exports ../geometry ../request ../geometry/support/normalizeUtils ./utils ./support/ImageAngleResult ./support/ImageAreaResult ./support/ImageDistanceResult ./support/ImageHeightResult ./support/ImageIdentifyResult ./support/ImagePixelLocationResult ./support/ImagePointResult ./support/ImageSampleResult ../geometry/SpatialReference".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n){function q(c){const b=c?.time;if(b&&(null!=b.start||null!=b.end)){const d=[];null!=b.start&&d.push(b.start);null==b.end||d.includes(b.end)||d.push(b.end);c.time=d.join(",")}}async function e(c,b,d){c=r.parseUrl(c);var g=await E.normalizeCentralMeridian(b.geometry?[b.geometry]:[]);b=b.toJSON();q(b);g=g&&g[0];null!=g&&(b.geometry=g.toJSON());c=r.encode({...c.query,f:"json",...b});return r.asValidOptions(c,d)}async function v(c,b,d,g){c=r.parseUrl(c);d=await E.normalizeCentralMeridian(d);
b=b.toJSON();null!=d[0]&&(b.fromGeometry=JSON.stringify(w(d[0])));null!=d[1]&&(b.toGeometry=JSON.stringify(w(d[1])));b=r.encode({...c.query,f:"json",...b});g=r.asValidOptions(b,g);({data:g}=await t(c.path+"/measure",g));return g}function w(c){const b=c.toJSON();c.spatialReference?.imageCoordinateSystem&&(b.spatialReference=m(c.spatialReference));return b}function m(c){const {imageCoordinateSystem:b}=c;if(b){const {id:d,referenceServiceName:g}=b;return null!=d?g?{icsid:d,icsns:g}:{icsid:d}:{ics:b}}return c.toJSON()}
function a(c,b){c=m(c);const {icsid:d,icsns:g,wkid:h}=c;return null!=d?null==g||b?.toLowerCase().includes("/"+g.toLowerCase()+"/")?`0:${d}`:JSON.stringify(c):h?h.toString():JSON.stringify(c)}J.computeAngles=async function(c,b,d){var g=b.toJSON();null!=g.angleName&&(g.angleName=g.angleName.join(","));null!=b.point&&b.point.spatialReference?.imageCoordinateSystem&&(g.point.spatialReference=m(b.point.spatialReference));null!=b.spatialReference&&b.spatialReference.imageCoordinateSystem&&(g.spatialReference=
a(b.spatialReference));c=r.parseUrl(c);g=r.encode({...c.query,f:"json",...g});d=r.asValidOptions(g,d);({data:d}=await t(`${c.path}/computeAngles`,d));d.spatialReference=d.spatialReference?null!=d.spatialReference.geodataXform?new n({wkid:0,imageCoordinateSystem:d.spatialReference}):n.fromJSON(d.spatialReference):null;"NaN"===d.north&&(d.north=null);"NaN"===d.up&&(d.up=null);return new R(d)};J.computeHistograms=async function(c,b,d){b=await e(c,b,d);c=r.parseUrl(c);({data:c}=await t(`${c.path}/computeHistograms`,
b));return{histograms:c.histograms}};J.computePixelSpaceLocations=async function(c,b,d){var g=b.toJSON();({geometries:b}=b);if(b)for(let h=0;h<b.length;h++)b[h].spatialReference?.imageCoordinateSystem&&(g.geometries.geometries[h].spatialReference=m(b[h].spatialReference));c=r.parseUrl(c);g=r.encode({...c.query,f:"json",...g});d=r.asValidOptions(g,d);({data:d}=await t(`${c.path}/computePixelLocation`,d));return F.fromJSON(d)};J.computeStatisticsHistograms=async function(c,b,d){b=await e(c,b,d);c=r.parseUrl(c);
({data:c}=await t(`${c.path}/computeStatisticsHistograms`,b));({statistics:b}=c);b?.length&&b.forEach(g=>{g.avg=g.mean;g.stddev=g.standardDeviation});return{statistics:b,histograms:c.histograms}};J.getImageSpatialReferenceJSON=m;J.getImageSpatialReferenceQueryParameter=a;J.getSamples=async function(c,b,d){var g=b.toJSON();q(g);g.outFields?.length&&(g.outFields=g.outFields.join(","));b=(await E.normalizeCentralMeridian(b.geometry))?.[0];null!=b&&(g.geometry=b.toJSON());c=r.parseUrl(c);g=r.encode({...c.query,
f:"json",...g});d=r.asValidOptions(g,d);({data:d}=await t(`${c.path}/getSamples`,d));d=d?.samples?.map(h=>{const k="NaN"===h.value||""===h.value?null:h.value.split(" ").map(x=>Number(x));return{...h,pixelValue:k}});return l.fromJSON({samples:d})};J.identify=async function(c,b,d){const g=r.parseUrl(c);return E.normalizeCentralMeridian(b.geometry?[b.geometry]:[]).then(h=>{var k=b.toJSON();h=h&&h[0];null!=h&&(k.geometry=JSON.stringify(h.toJSON()));k=r.encode({...g.query,f:"json",...k});k=r.asValidOptions(k,
d);return t(g.path+"/identify",k)}).then(h=>D.fromJSON(h.data))};J.measureAreaAndPerimeter=async function(c,b,d){c=await v(c,b,[b.geometry],d);return L.fromJSON(c)};J.measureDistanceAndAngle=async function(c,b,d){c=await v(c,b,[b.fromGeometry,b.toGeometry],d);return P.fromJSON(c)};J.measureHeight=async function(c,b,d){c=await v(c,b,[b.fromGeometry,b.toGeometry],d);return Q.fromJSON(c)};J.measurePointOrCentroid=async function(c,b,d){c=await v(c,b,[b.geometry],d);return f.fromJSON(c)};Object.defineProperty(J,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageAngleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),function(J,u,t,E,r,R,L,P,Q,D){t=function(F){function f(l){l=F.call(this,l)||this;l.north=null;
l.up=null;l.spatialReference=null;return l}J._inherits(f,F);return J._createClass(f)}(E.JSONSupport);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"north",void 0);u.__decorate([r.property({type:Number,json:{write:!0}})],t.prototype,"up",void 0);u.__decorate([r.property({type:D,json:{write:!0}})],t.prototype,"spatialReference",void 0);return t=u.__decorate([Q.subclass("esri.rest.support.ImageAngleResult")],t)})},"esri/rest/support/ImageAreaResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),
function(J,u,t,E,r,R,L,P){E=function(Q){function D(){var F=Q.apply(this,arguments)||this;F.area=null;F.perimeter=null;return F}J._inherits(D,Q);return J._createClass(D)}(P.BaseImageMeasureResult);u.__decorate([t.property({type:P.ImageMeasureResultAreaValue,json:{read:!0,write:!0}})],E.prototype,"area",void 0);u.__decorate([t.property({type:P.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],E.prototype,"perimeter",void 0);return E=u.__decorate([L.subclass("esri.rest.support.ImageAreaResult")],
E)})},"esri/rest/support/BaseImageMeasureResult":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(J,u,t,E,r,R,L,P,Q,D){L=function(F){function f(){var l=F.apply(this,arguments)||this;l.value=null;l.displayValue=null;l.uncertainty=
null;return l}u._inherits(f,F);return u._createClass(f)}(E.JSONSupport);t.__decorate([R.property({type:Number,json:{read:!0,write:!0}})],L.prototype,"value",void 0);t.__decorate([R.property({type:String,json:{read:!0,write:!0}})],L.prototype,"displayValue",void 0);t.__decorate([R.property({type:Number,json:{read:!0,write:!0}})],L.prototype,"uncertainty",void 0);L=t.__decorate([D.subclass("esri.rest.support.ImageMeasureResultValue")],L);J.ImageMeasureResultLengthValue=function(F){function f(){var l=
F.apply(this,arguments)||this;l.unit=null;return l}u._inherits(f,F);return u._createClass(f)}(L);t.__decorate([R.property({type:String,json:{read:r.lengthUnitsJSONMap.read,write:r.lengthUnitsJSONMap.write}})],J.ImageMeasureResultLengthValue.prototype,"unit",void 0);J.ImageMeasureResultLengthValue=t.__decorate([D.subclass("esri.rest.support.ImageMeasureResultLengthValue")],J.ImageMeasureResultLengthValue);J.ImageMeasureResultAreaValue=function(F){function f(){var l=F.apply(this,arguments)||this;l.unit=
null;return l}u._inherits(f,F);return u._createClass(f)}(L);t.__decorate([R.property({type:String,json:{read:r.areaUnitsJSONMap.read,write:r.areaUnitsJSONMap.write}})],J.ImageMeasureResultAreaValue.prototype,"unit",void 0);J.ImageMeasureResultAreaValue=t.__decorate([D.subclass("esri.rest.support.ImageMeasureResultAreaValue")],J.ImageMeasureResultAreaValue);J.ImageMeasureResultAngleValue=function(F){function f(){var l=F.apply(this,arguments)||this;l.unit=null;return l}u._inherits(f,F);return u._createClass(f)}(L);
t.__decorate([R.property({type:String,json:{read:r.angleUnitsJSONMap.read,write:r.angleUnitsJSONMap.write}})],J.ImageMeasureResultAngleValue.prototype,"unit",void 0);J.ImageMeasureResultAngleValue=t.__decorate([D.subclass("esri.rest.support.ImageMeasureResultAngleValue")],J.ImageMeasureResultAngleValue);J.BaseImageMeasureResult=function(F){function f(){var l=F.apply(this,arguments)||this;l.name=null;l.sensorName=null;return l}u._inherits(f,F);return u._createClass(f)}(E.JSONSupport);t.__decorate([R.property({type:String,
json:{read:!0,write:!0}})],J.BaseImageMeasureResult.prototype,"name",void 0);t.__decorate([R.property({type:String,json:{read:!0,write:!0}})],J.BaseImageMeasureResult.prototype,"sensorName",void 0);J.BaseImageMeasureResult=t.__decorate([D.subclass("esri.rest.support.BaseImageMeasureResult")],J.BaseImageMeasureResult);Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageDistanceResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),
function(J,u,t,E,r,R,L,P){E=function(Q){function D(){var F=Q.apply(this,arguments)||this;F.distance=null;F.azimuthAngle=null;F.elevationAngle=null;return F}J._inherits(D,Q);return J._createClass(D)}(P.BaseImageMeasureResult);u.__decorate([t.property({type:P.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],E.prototype,"distance",void 0);u.__decorate([t.property({type:P.ImageMeasureResultAngleValue,json:{read:!0,write:!0}})],E.prototype,"azimuthAngle",void 0);u.__decorate([t.property({type:P.ImageMeasureResultAngleValue,
json:{read:!0,write:!0}})],E.prototype,"elevationAngle",void 0);return E=u.__decorate([L.subclass("esri.rest.support.ImageDistanceResult")],E)})},"esri/rest/support/ImageHeightResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),function(J,u,t,E,r,R,L,P){E=function(Q){function D(){var F=
Q.apply(this,arguments)||this;F.height=null;return F}J._inherits(D,Q);return J._createClass(D)}(P.BaseImageMeasureResult);u.__decorate([t.property({type:P.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],E.prototype,"height",void 0);return E=u.__decorate([L.subclass("esri.rest.support.ImageHeightResult")],E)})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),
function(J,u,t,E,r,R,L,P,Q,D){t=function(F){function f(){var l=F.apply(this,arguments)||this;l.catalogItemVisibilities=null;l.catalogItems=null;l.location=null;l.name=null;l.objectId=null;l.processedValues=null;l.properties=null;l.value=null;return l}J._inherits(f,F);return J._createClass(f)}(t.JSONSupport);u.__decorate([E.property({json:{write:!0}})],t.prototype,"catalogItemVisibilities",void 0);u.__decorate([E.property({type:D,json:{write:!0}})],t.prototype,"catalogItems",void 0);u.__decorate([E.property({type:Q,
json:{write:!0}})],t.prototype,"location",void 0);u.__decorate([E.property({json:{write:!0}})],t.prototype,"name",void 0);u.__decorate([E.property({json:{write:!0}})],t.prototype,"objectId",void 0);u.__decorate([E.property({json:{write:!0}})],t.prototype,"processedValues",void 0);u.__decorate([E.property({json:{write:!0}})],t.prototype,"properties",void 0);u.__decorate([E.property({json:{write:!0}})],t.prototype,"value",void 0);return t=u.__decorate([P.subclass("esri.rest.support.ImageIdentifyResult")],
t)})},"esri/rest/support/ImagePixelLocationResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(J,u,t,E,r,R,L,P){t=function(Q){function D(){var F=Q.apply(this,arguments)||this;F.geometries=null;return F}J._inherits(D,Q);return J._createClass(D)}(t.JSONSupport);
u.__decorate([E.property({json:{write:!0}})],t.prototype,"geometries",void 0);return t=u.__decorate([P.subclass("esri.rest.support.ImagePixelLocationResult")],t)})},"esri/rest/support/ImagePointResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult ../../geometry/Point".split(" "),
function(J,u,t,E,r,R,L,P,Q,D){t=function(F){function f(){var l=F.apply(this,arguments)||this;l.point=null;return l}J._inherits(f,F);return J._createClass(f)}(Q.BaseImageMeasureResult);u.__decorate([E.property({type:D,json:{name:"point.value",read:!0,write:!0}})],t.prototype,"point",void 0);return t=u.__decorate([P.subclass("esri.rest.support.ImagePointResult")],t)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),
function(J,u,t,E,r,R,L,P,Q){t=function(D){function F(){var f=D.apply(this,arguments)||this;f.samples=null;return f}J._inherits(F,D);return J._createClass(F)}(t.JSONSupport);u.__decorate([E.property({type:[Q],json:{write:!0}})],t.prototype,"samples",void 0);return t=u.__decorate([P.subclass("esri.rest.support.ImageSampleResult")],t)})},"esri/rest/support/ImageSample":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(J,u,t,E,r,R,L,P,Q){t=function(D){function F(){var f=D.apply(this,arguments)||this;f.attributes=null;f.location=null;f.locationId=null;f.rasterId=null;f.resolution=null;f.pixelValue=null;return f}J._inherits(F,D);return J._createClass(F)}(t.JSONSupport);u.__decorate([E.property({json:{write:!0}})],t.prototype,"attributes",void 0);u.__decorate([E.property({type:Q,json:{write:!0}})],t.prototype,"location",void 0);u.__decorate([E.property({json:{write:!0}})],t.prototype,"locationId",void 0);
u.__decorate([E.property({json:{write:!0}})],t.prototype,"rasterId",void 0);u.__decorate([E.property({json:{write:!0}})],t.prototype,"resolution",void 0);u.__decorate([E.property({json:{write:!0}})],t.prototype,"pixelValue",void 0);return t=u.__decorate([P.subclass("esri.rest.support.ImageSample")],t)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),
function(J,u,t,E,r,R,L,P,Q){var D;const F={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};t=D=function(f){function l(n){n=f.call(this,n)||this;n.contentType=null;n.exifInfo=null;n.id=null;n.globalId=null;n.keywords=null;n.name=null;n.parentGlobalId=null;n.parentObjectId=null;n.size=
null;n.url=null;return n}J._inherits(l,f);l.prototype.clone=function(){return new D({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};J._createClass(l,[{key:"orientationInfo",get:function(){var {exifInfo:n}=this;n=Q.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:n});return F[n]||null}}]);return l}(t.JSONSupport);
u.__decorate([E.property({type:String})],t.prototype,"contentType",void 0);u.__decorate([E.property()],t.prototype,"exifInfo",void 0);u.__decorate([E.property({readOnly:!0})],t.prototype,"orientationInfo",null);u.__decorate([E.property({type:r.Integer})],t.prototype,"id",void 0);u.__decorate([E.property({type:String})],t.prototype,"globalId",void 0);u.__decorate([E.property({type:String})],t.prototype,"keywords",void 0);u.__decorate([E.property({type:String})],t.prototype,"name",void 0);u.__decorate([E.property({json:{read:!1}})],
t.prototype,"parentGlobalId",void 0);u.__decorate([E.property({json:{read:!1}})],t.prototype,"parentObjectId",void 0);u.__decorate([E.property({type:r.Integer})],t.prototype,"size",void 0);u.__decorate([E.property({json:{read:!1}})],t.prototype,"url",void 0);return t=D=u.__decorate([P.subclass("esri.layers.support.AttachmentInfo")],t)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(J){function u(t){const {tagName:E,tags:r}=t;return r&&E?(t=r.find(R=>R.name===E))&&t.value||
null:null}J.getExifValue=function(t){const {exifInfo:E,exifName:r,tagName:R}=t;return E&&r&&R?(t=E.find(L=>L.name===r))?u({tagName:R,tags:t.tags}):null:null};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService/fetchRasterInfo":function(){define("exports ../../request ../../geometry/Extent ../../geometry/Point ../../geometry/SpatialReference ../../layers/support/RasterInfo ../utils ../support/FeatureSet".split(" "),function(J,u,t,E,r,R,L,P){async function Q(D,F,
f){D=L.parseUrl(D);const {rasterFunction:l,sourceJSON:n}=F||{};F=l?JSON.stringify(l.rasterFunctionDefinition||l):null;F=L.encode({...D.query,renderingRule:F,f:"json"});F=L.asValidOptions(F,f);D=D.path;f=n||await u(D,F).then(h=>h.data);var q=f.hasRasterAttributeTable?u(`${D}/rasterAttributeTable`,F):null,e=f.hasColormap?u(`${D}/colormap`,F):null,v=f.hasHistograms?u(`${D}/histograms`,F):null,w=10.3<=f.currentVersion?u(`${D}/keyProperties`,F):null;D=f.hasMultidimensions?u(`${D}/multidimensionalInfo`,
F):null;F=await Promise.allSettled([q,e,v,w,D]);D=null;if(f.minValues&&f.minValues.length===f.bandCount)for(D=[],q=0;q<f.minValues.length;q++)D.push({min:f.minValues[q],max:f.maxValues[q],avg:f.meanValues[q],stddev:f.stdvValues[q]});e=t.fromJSON(f.extent);q=Math.ceil(e.width/f.pixelSizeX-.1);e=Math.ceil(e.height/f.pixelSizeY-.1);v=r.fromJSON(f.spatialReference||f.extent.spatialReference);w="fulfilled"===F[0].status?F[0].value?P.fromJSON(F[0].value.data):null:null;const m="fulfilled"===F[1].status?
F[1].value?.data.colormap:null,a="fulfilled"===F[2].status?F[2].value?.data.histograms:null,c="fulfilled"===F[3].status?F[3].value?.data??{}:{};F="fulfilled"===F[4].status?F[4].value?.data.multidimensionalInfo:null;F?.variables?.length&&F.variables.forEach(h=>{h.statistics?.length&&h.statistics.forEach(k=>{k.avg=k.mean;k.stddev=k.standardDeviation})});const {defaultVariable:b,serviceDataType:d}=f;b&&b!==c.DefaultVariable&&(c.DefaultVariable=b);d&&d.includes("esriImageServiceDataTypeVector")&&!d.includes(c.DataType)&&
(c.DataType=d.replace("esriImageServiceDataType",""));let g=f.noDataValue;f.noDataValues?.length&&f.noDataValues.some(h=>h!==g)&&(g=f.noDataValues);return new R({width:q,height:e,bandCount:f.bandCount,extent:t.fromJSON(f.extent),spatialReference:v,pixelSize:new E({x:f.pixelSizeX,y:f.pixelSizeY,spatialReference:v}),pixelType:f.pixelType.toLowerCase(),statistics:D,attributeTable:w,colormap:m,histograms:a,keyProperties:c,noDataValue:g,multidimensionalInfo:F})}J.fetchServiceRasterInfo=function(D,F,f){return Q(D,
{sourceJSON:F},f)};J.generateRasterInfo=function(D,F,f){return Q(D,{rasterFunction:F},f)};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService/getCatalogItemRasterInfo":function(){define("exports ../../request ../../geometry/Extent ../../geometry/Point ../../layers/support/RasterInfo ../../layers/support/RasterStorageInfo ../utils".split(" "),function(J,u,t,E,r,R,L){J.getCatalogItemRasterInfo=async function(P,Q,D){P=L.parseUrl(P);var F=L.encode({...P?.query,f:"json"});
D=L.asValidOptions(F,D);P=`${P?.path}/${Q}/info`;Q=u(`${P}`,D);D=u(`${P}/keyProperties`,D);D=await Promise.allSettled([Q,D]);Q="fulfilled"===D[0].status?D[0].value.data:null;D="fulfilled"===D[1].status?D[1].value.data:null;P=null;Q.statistics?.length&&(P=Q.statistics.map(w=>({min:w[0],max:w[1],avg:w[2],stddev:w[3]})));F=t.fromJSON(Q.extent);const f=Math.ceil(F.width/Q.pixelSizeX-.1),l=Math.ceil(F.height/Q.pixelSizeY-.1),n=F.spatialReference,q=new E({x:Q.pixelSizeX,y:Q.pixelSizeY,spatialReference:n}),
e=Q.histograms?.length?Q.histograms:null,v=new R({origin:Q.origin,blockWidth:Q.blockWidth,blockHeight:Q.blockHeight,firstPyramidLevel:Q.firstPyramidLevel,maximumPyramidLevel:Q.maxPyramidLevel});return new r({width:f,height:l,bandCount:Q.bandCount,extent:F,spatialReference:n,pixelSize:q,pixelType:Q.pixelType.toLowerCase(),statistics:P,histograms:e,keyProperties:D,storageInfo:v})};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageAngleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(J,u,t,E,r,R,L,P,Q,D){var F;t=F=function(f){function l(n){n=f.call(this,n)||this;n.angleNames=null;n.point=null;n.spatialReference=null;n.rasterId=null;return n}J._inherits(l,f);l.prototype.clone=function(){return new F(r.clone({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))};return J._createClass(l)}(E.JSONSupport);u.__decorate([R.property({type:[String],json:{name:"angleName",write:!0}})],t.prototype,"angleNames",void 0);u.__decorate([R.property({type:Q,
json:{write:!0}})],t.prototype,"point",void 0);u.__decorate([R.property({type:D,json:{write:!0}})],t.prototype,"spatialReference",void 0);u.__decorate([R.property({type:L.Integer,json:{write:!0}})],t.prototype,"rasterId",void 0);return t=F=u.__decorate([P.subclass("esri.rest.support.ImageAngleParameters")],t)})},"esri/rest/support/ImageAreaParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F){var f;L=f=function(l){function n(){var e=l.apply(this,arguments)||this;e.type="area-perimeter";e.geometry=null;e.is3D=!1;e.linearUnit="meters";e.areaUnit="square-meters";return e}J._inherits(n,l);var q=n.prototype;q.writeGeometry=function(e,v,w){null!=e&&(v.geometryType=D.getJsonType(e),v[w]=e.toJSON())};q.clone=function(){return new f(E.clone({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,
raster:this.raster}))};J._createClass(n,[{key:"measureOperation",get:function(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}}]);return n}(F.BaseImageMeasureParameters);u.__decorate([R.property({types:t.geometryTypes,json:{name:"fromGeometry",read:!0,write:!0}})],L.prototype,"geometry",void 0);u.__decorate([Q.writer("geometry")],L.prototype,"writeGeometry",null);u.__decorate([R.property({type:F.measureOperationJSONMap.apiValues,json:{write:F.measureOperationJSONMap.write}})],L.prototype,
"measureOperation",null);u.__decorate([R.property({json:{read:!0}})],L.prototype,"is3D",void 0);u.__decorate([R.property({type:String,json:{read:r.lengthUnitsJSONMap.read,write:r.lengthUnitsJSONMap.write}})],L.prototype,"linearUnit",void 0);u.__decorate([R.property({type:String,json:{read:r.areaUnitsJSONMap.read,write:r.areaUnitsJSONMap.write}})],L.prototype,"areaUnit",void 0);return L=f=u.__decorate([P.subclass("esri.rest.support.ImageAreaParameters")],L)})},"esri/rest/support/BaseImageMeasureParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/MosaicRule ../../geometry/Point".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l){E=new r.JSONMap({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",
esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});J.BaseImageMeasureParameters=function(n){function q(){var e=n.apply(this,arguments)||this;e.type=null;e.measureOperation=null;e.mosaicRule=null;e.pixelSize=null;e.raster=void 0;return e}u._inherits(q,n);return u._createClass(q)}(R.JSONSupport);t.__decorate([L.property()],J.BaseImageMeasureParameters.prototype,"type",void 0);t.__decorate([L.property({type:E.apiValues,json:{read:E.read,write:E.write}})],J.BaseImageMeasureParameters.prototype,
"measureOperation",void 0);t.__decorate([L.property({type:f,json:{write:!0}})],J.BaseImageMeasureParameters.prototype,"mosaicRule",void 0);t.__decorate([L.property({type:l,json:{write:!0}})],J.BaseImageMeasureParameters.prototype,"pixelSize",void 0);t.__decorate([L.property({json:{write:!0}})],J.BaseImageMeasureParameters.prototype,"raster",void 0);J.BaseImageMeasureParameters=t.__decorate([F.subclass("esri.rest.support.BaseImageMeasureParameters")],J.BaseImageMeasureParameters);J.measureOperationJSONMap=
E;Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageDistanceParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters ../../geometry/Point".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f){var l;t=l=function(n){function q(){var v=n.apply(this,arguments)||this;v.type="distance-angle";v.fromGeometry=null;v.toGeometry=null;v.is3D=!1;v.linearUnit="meters";v.angularUnit="degrees";return v}J._inherits(q,n);var e=q.prototype;e.writeFromGeometry=function(v,w,m){null!=v&&(w.geometryType=D.getJsonType(v),w[m]=v.toJSON())};e.clone=function(){return new l(E.clone({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,is3D:this.is3D,linearUnit:this.linearUnit,
angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))};J._createClass(q,[{key:"measureOperation",get:function(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}}]);return q}(F.BaseImageMeasureParameters);u.__decorate([R.property({type:f,json:{read:!0,write:!0}})],t.prototype,"fromGeometry",void 0);u.__decorate([Q.writer("fromGeometry")],t.prototype,"writeFromGeometry",null);u.__decorate([R.property({type:f,json:{read:!0,write:!0}})],t.prototype,
"toGeometry",void 0);u.__decorate([R.property({type:F.measureOperationJSONMap.apiValues,json:{write:F.measureOperationJSONMap.write}})],t.prototype,"measureOperation",null);u.__decorate([R.property({json:{read:!0}})],t.prototype,"is3D",void 0);u.__decorate([R.property({type:String,json:{read:r.lengthUnitsJSONMap.read,write:r.lengthUnitsJSONMap.write}})],t.prototype,"linearUnit",void 0);u.__decorate([R.property({type:String,json:{read:r.angleUnitsJSONMap.read,write:r.angleUnitsJSONMap.write}})],t.prototype,
"angularUnit",void 0);return t=l=u.__decorate([P.subclass("esri.rest.support.ImageDistanceParameters")],t)})},"esri/rest/support/ImageHeightParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters ../../geometry/Point".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f){var l;t=l=function(n){function q(){var v=n.apply(this,arguments)||this;v.type="height";v.fromGeometry=null;v.toGeometry=null;v.operationType="base-and-top";v.linearUnit="meters";return v}J._inherits(q,n);var e=q.prototype;e.writeFromGeometry=function(v,w,m){null!=v&&(w.geometryType=D.getJsonType(v),w[m]=v.toJSON())};e.clone=function(){return new l(E.clone({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,
mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))};J._createClass(q,[{key:"measureOperation",get:function(){return this.operationType}}]);return q}(F.BaseImageMeasureParameters);u.__decorate([R.property({type:f,json:{read:!0}})],t.prototype,"fromGeometry",void 0);u.__decorate([Q.writer("fromGeometry")],t.prototype,"writeFromGeometry",null);u.__decorate([R.property({type:f,json:{read:!0,write:!0}})],t.prototype,"toGeometry",void 0);u.__decorate([R.property({type:F.measureOperationJSONMap.apiValues,
json:{write:F.measureOperationJSONMap.write}})],t.prototype,"measureOperation",null);u.__decorate([R.property({json:{read:!0}})],t.prototype,"operationType",void 0);u.__decorate([R.property({type:String,json:{read:r.lengthUnitsJSONMap.read,write:r.lengthUnitsJSONMap.write}})],t.prototype,"linearUnit",void 0);return t=l=u.__decorate([P.subclass("esri.rest.support.ImageHeightParameters")],t)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/deprecate ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n,q,e){var v;R=v=function(w){function m(){var c=w.apply(this,arguments)||this;c.geometry=null;c.mosaicRule=null;c.rasterFunction=null;c.pixelSize=null;c.raster=void 0;c.timeExtent=null;return c}J._inherits(m,w);var a=m.prototype;a.writeGeometry=function(c,b,d){null!=c&&(b.geometryType=l.getJsonType(c),b[d]=c.toJSON())};a.clone=function(){return new v(L.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,
raster:this.raster,timeExtent:this.timeExtent}))};J._createClass(m,[{key:"renderingRule",get:function(){r.deprecatedProperty(P.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});return this._get("rasterFunction")},set:function(c){r.deprecatedProperty(P.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});this._set("rasterFunction",c)}}]);return m}(R.JSONSupport);u.__decorate([Q.property({types:t.geometryTypes,json:{read:l.fromJSON}})],
R.prototype,"geometry",void 0);u.__decorate([f.writer("geometry")],R.prototype,"writeGeometry",null);u.__decorate([Q.property({type:n,json:{write:!0}})],R.prototype,"mosaicRule",void 0);u.__decorate([Q.property({type:q})],R.prototype,"renderingRule",null);u.__decorate([Q.property({type:q,json:{write:!0,name:"renderingRule"}})],R.prototype,"rasterFunction",void 0);u.__decorate([Q.property({type:e,json:{write:!0}})],R.prototype,"pixelSize",void 0);u.__decorate([Q.property({json:{write:!0}})],R.prototype,
"raster",void 0);u.__decorate([Q.property({type:E,json:{read:{source:"time"},write:{target:"time"}}})],R.prototype,"timeExtent",void 0);return R=v=u.__decorate([F.subclass("esri.rest.support.ImageHistogramParameters")],R)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../core/deprecate ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n,q){var e;r=e=function(v){function w(){var a=v.apply(this,arguments)||this;a.geometry=null;a.rasterFunctions=null;a.pixelSize=null;a.returnGeometry=!0;a.returnCatalogItems=!0;a.returnPixelValues=!0;a.maxItemCount=null;a.timeExtent=null;a.raster=void 0;a.viewId=void 0;a.processAsMultidimensional=!1;return a}J._inherits(w,v);var m=w.prototype;m.writeGeometry=function(a,c,b){null!=a&&(c.geometryType=l.getJsonType(a),c[b]=JSON.stringify(a.toJSON()))};m.writeMosaicRule=
function(a,c,b){null!=a&&(c[b]=JSON.stringify(a.toJSON()))};m.writeRasterFunction=function(a,c,b){null!=a&&(c[b]=JSON.stringify(a.toJSON()));a.rasterFunctionDefinition&&(c[b]=JSON.stringify(a.rasterFunctionDefinition))};m.writeRasterFunctions=function(a,c,b){null!=a&&(c[b]=JSON.stringify(a.map(d=>d.rasterFunctionDefinition||d.toJSON())))};m.writePixelSize=function(a,c,b){null!=a&&(c[b]=JSON.stringify(a))};m.writeTimeExtent=function(a,c,b){if(null!=a){const d=null!=a.start?a.start.getTime():null;a=
null!=a.end?a.end.getTime():null;c[b]=null!=d?null!=a?`${d},${a}`:`${d}`:null}};m.clone=function(){return new e(R.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,rasterFunctions:this.rasterFunctions,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,
timeExtent:this.timeExtent}))};J._createClass(w,[{key:"mosaicRule",set:function(a){a&&a.mosaicMethod&&(a=n.fromJSON({...a.toJSON(),mosaicMethod:a.mosaicMethod,mosaicOperation:a.mosaicOperation}));this._set("mosaicRule",a)}},{key:"renderingRule",get:function(){E.deprecatedProperty(L.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});return this._get("rasterFunction")},set:function(a){E.deprecatedProperty(L.getLogger(this),"renderingRule",{replacement:"rasterFunction",
version:"4.27",warnOnce:!0});this._set("rasterFunction",a)}},{key:"renderingRules",get:function(){E.deprecatedProperty(L.getLogger(this),"renderingRules",{replacement:"rasterFunctions",version:"4.27",warnOnce:!0});return this._get("rasterFunctions")},set:function(a){E.deprecatedProperty(L.getLogger(this),"renderingRules",{replacement:"rasterFunctions",version:"4.27",warnOnce:!0});this._set("rasterFunctions",a)}},{key:"rasterFunction",set:function(a){a&&a.rasterFunction&&(a=q.fromJSON({...a.toJSON(),
rasterFunction:a.rasterFunction,rasterFunctionArguments:a.rasterFunctionArguments}));this._set("rasterFunction",a)}}]);return w}(r.JSONSupport);u.__decorate([P.property({json:{write:!0}})],r.prototype,"geometry",void 0);u.__decorate([F.writer("geometry")],r.prototype,"writeGeometry",null);u.__decorate([P.property({type:n,json:{write:!0}})],r.prototype,"mosaicRule",null);u.__decorate([F.writer("mosaicRule")],r.prototype,"writeMosaicRule",null);u.__decorate([P.property({type:q})],r.prototype,"renderingRule",
null);u.__decorate([P.property({type:[q]})],r.prototype,"renderingRules",null);u.__decorate([P.property({type:q,json:{write:!0,name:"renderingRule"}})],r.prototype,"rasterFunction",null);u.__decorate([F.writer("rasterFunction")],r.prototype,"writeRasterFunction",null);u.__decorate([P.property({type:[q],json:{write:!0,name:"renderingRules"}})],r.prototype,"rasterFunctions",void 0);u.__decorate([F.writer("rasterFunctions")],r.prototype,"writeRasterFunctions",null);u.__decorate([P.property({type:f,json:{write:!0}})],
r.prototype,"pixelSize",void 0);u.__decorate([F.writer("pixelSize")],r.prototype,"writePixelSize",null);u.__decorate([P.property({type:Boolean,json:{write:!0}})],r.prototype,"returnGeometry",void 0);u.__decorate([P.property({type:Boolean,json:{write:!0}})],r.prototype,"returnCatalogItems",void 0);u.__decorate([P.property({type:Boolean,json:{write:!0}})],r.prototype,"returnPixelValues",void 0);u.__decorate([P.property({type:Number,json:{write:!0}})],r.prototype,"maxItemCount",void 0);u.__decorate([P.property({type:t,
json:{write:{target:"time"}}})],r.prototype,"timeExtent",void 0);u.__decorate([F.writer("timeExtent")],r.prototype,"writeTimeExtent",null);u.__decorate([P.property({json:{write:!0}})],r.prototype,"raster",void 0);u.__decorate([P.property({json:{write:!0}})],r.prototype,"viewId",void 0);u.__decorate([P.property({type:Boolean,json:{write:!0}})],r.prototype,"processAsMultidimensional",void 0);return r=e=u.__decorate([D.subclass("esri.rest.support.ImageIdentifyParameters")],r)})},"esri/rest/support/ImagePixelLocationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F){var f;t=f=function(l){function n(){var e=l.apply(this,arguments)||this;e.geometries=null;e.rasterId=null;return e}J._inherits(n,l);var q=n.prototype;q.writeGeometry=function(e,v,w){v.geometries={geometryType:"esriGeometryPoint",geometries:e.map(m=>m.toJSON())}};q.clone=function(){return new f({geometries:this.geometries?.map(e=>e.clone())??[],rasterId:this.rasterId})};return J._createClass(n)}(E.JSONSupport);u.__decorate([r.property({type:[F],json:{write:!0}})],t.prototype,
"geometries",void 0);u.__decorate([D.writer("geometries")],t.prototype,"writeGeometry",null);u.__decorate([r.property({type:R.Integer,json:{write:!0}})],t.prototype,"rasterId",void 0);return t=f=u.__decorate([Q.subclass("esri.rest.support.ImagePixelLocationParameters")],t)})},"esri/rest/support/ImagePointParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters".split(" "),
function(J,u,t,E,r,R,L,P,Q,D){var F;R=F=function(f){function l(){var q=f.apply(this,arguments)||this;q.type="point";q.geometry=null;q.is3D=!1;return q}J._inherits(l,f);var n=l.prototype;n.writeGeometry=function(q,e,v){null!=q&&(e.geometryType=Q.getJsonType(q),e[v]=q.toJSON())};n.clone=function(){return new F(E.clone({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))};J._createClass(l,[{key:"measureOperation",get:function(){const {is3D:q,
geometry:e}=this;return"point"===e.type?q?"point-3D":"point":q?"centroid-3D":"centroid"}}]);return l}(D.BaseImageMeasureParameters);u.__decorate([r.property({types:t.geometryTypes,json:{name:"fromGeometry",read:Q.fromJSON}})],R.prototype,"geometry",void 0);u.__decorate([P.writer("geometry")],R.prototype,"writeGeometry",null);u.__decorate([r.property({type:D.measureOperationJSONMap.apiValues,json:{read:D.measureOperationJSONMap.read,write:D.measureOperationJSONMap.write}})],R.prototype,"measureOperation",
null);u.__decorate([r.property({json:{read:!0}})],R.prototype,"is3D",void 0);return R=F=u.__decorate([L.subclass("esri.rest.support.ImagePointParameters")],R)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Multipoint ../../geometry/Point".split(" "),
function(J,u,t,E,r,R,L,P,Q,D,F,f,l,n,q){var e;r=e=function(v){function w(){var a=v.apply(this,arguments)||this;a.geometry=null;a.interpolation="nearest";a.mosaicRule=null;a.outFields=null;a.pixelSize=null;a.returnFirstValueOnly=!0;a.sampleDistance=null;a.sampleCount=null;a.sliceId=null;a.timeExtent=null;return a}J._inherits(w,v);var m=w.prototype;m.writeGeometry=function(a,c,b){null!=a&&(c.geometryType=F.getJsonType(a),c[b]=a.toJSON())};m.clone=function(){return new e(R.clone({geometry:this.geometry,
locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))};J._createClass(w,[{key:"locations",set:function(a){if(a?.length){const c=new n({spatialReference:a[0].spatialReference});c.points=a.map(b=>[b.x,b.y]);this._set("locations",a);this.geometry=
c}}}]);return w}(r.JSONSupport);u.__decorate([L.property({types:t.geometryTypes,json:{read:F.fromJSON}})],r.prototype,"geometry",void 0);u.__decorate([D.writer("geometry")],r.prototype,"writeGeometry",null);u.__decorate([L.property()],r.prototype,"locations",null);u.__decorate([L.property({type:String,json:{type:l.interpolationKebab.jsonValues,read:l.interpolationKebab.read,write:l.interpolationKebab.write}})],r.prototype,"interpolation",void 0);u.__decorate([L.property({type:f,json:{write:!0}})],
r.prototype,"mosaicRule",void 0);u.__decorate([L.property({type:[String],json:{write:!0}})],r.prototype,"outFields",void 0);u.__decorate([L.property({type:q,json:{write:!0}})],r.prototype,"pixelSize",void 0);u.__decorate([L.property({type:String,json:{write:!0}})],r.prototype,"raster",void 0);u.__decorate([L.property({type:Boolean,json:{write:!0}})],r.prototype,"returnFirstValueOnly",void 0);u.__decorate([L.property({type:Number,json:{write:!0}})],r.prototype,"sampleDistance",void 0);u.__decorate([L.property({type:Number,
json:{write:!0}})],r.prototype,"sampleCount",void 0);u.__decorate([L.property({type:Number,json:{write:!0}})],r.prototype,"sliceId",void 0);u.__decorate([L.property({type:E,json:{read:{source:"time"},write:{target:"time"}}})],r.prototype,"timeExtent",void 0);return r=e=u.__decorate([Q.subclass("esri.rest.support.ImageSampleParameters")],r)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(J,u,t,E,r,R,L,P,Q){function D(a,c){const b=l(c.data,c.width,c.height,a.smoothing);return a.interpolate?(d,g)=>{const h=Math.floor(d),k=Math.floor(g);if(0>h||h>=c.width||0>k||k>=c.height)return[0,0];d-=h;g-=k;const x=h<c.width-1?h+1:h,p=k<c.height-1?k+1:k;return[(b[2*(k*c.width+h)]*(1-g)+b[2*(p*c.width+h)]*g)*(1-d)+(b[2*(k*c.width+x)]*(1-g)+b[2*(p*c.width+x)]*g)*d,(b[2*(k*c.width+h)+1]*(1-g)+b[2*(p*c.width+h)+1]*g)*(1-d)+(b[2*(k*c.width+x)+1]*(1-g)+b[2*(p*c.width+x)+1]*g)*d]}:(d,g)=>{d=Math.round(d);
g=Math.round(g);return 0>d||d>=c.width||0>g||g>=c.height?[0,0]:[b[2*(g*c.width+d)],b[2*(g*c.width+d)+1]]}}function F(a,c,b,d,g,h,k,x,p){const y=[];let H=0,[G,K]=c(b,d);G*=a.velocityScale;K*=a.velocityScale;y.push({x:b,y:d,t:H,speed:Math.sqrt(G*G+K*K)});for(let B=0;B<a.verticesPerLine;B++){let [z,M]=c(b,d);z*=a.velocityScale;M*=a.velocityScale;const S=Math.sqrt(z*z+M*M);if(S<a.minSpeedThreshold)break;const W=z/S,O=M/S;b+=W*a.segmentLength;d+=O*a.segmentLength;H+=a.segmentLength/S;if(Math.acos(W*A+
O*I)>a.maxTurnAngle)break;if(a.collisions){var A=Math.round(b*p);var I=Math.round(d*p);if(0>A||A>k-1||0>I||I>x-1)break;const N=h[I*k+A];if(-1!==N&&N!==g)break;h[I*k+A]=g}y.push({x:b,y:d,t:H,speed:S});A=W;I=O}return y}function f(a,c,b,d){const g=[],h=new L,k=1/Math.max(a.lineCollisionWidth,1),x=Math.round(b*k),p=Math.round(d*k),y=new Int32Array(x*p);for(var H=0;H<y.length;H++)y[H]=-1;H=[];for(let G=0;G<d;G+=a.lineSpacing)for(let K=0;K<b;K+=a.lineSpacing)H.push({x:K,y:G,sort:h.getFloat()});H.sort((G,
K)=>G.sort-K.sort);for(const {x:G,y:K}of H)h.getFloat()<a.density&&(b=F(a,c,G,K,g.length,y,x,p,k),2>b.length||g.push(b));return g}function l(a,c,b,d){if(0===d)return a;const g=Math.round(3*d),h=Array(2*g+1);var k=0;for(var x=-g;x<=g;x++){var p=Math.exp(-x*x/(d*d));h[x+g]=p;k+=p}for(d=-g;d<=g;d++)h[d+g]/=k;k=new Float32Array(a.length);for(d=0;d<b;d++)for(x=0;x<c;x++){var y=p=0;for(var H=-g;H<=g;H++)if(!(0>x+H||x+H>=c)){var G=h[H+g];p+=G*a[2*(d*c+(x+H))];y+=G*a[2*(d*c+(x+H))+1]}k[2*(d*c+x)]=p;k[2*(d*
c+x)+1]=y}a=new Float32Array(a.length);for(d=0;d<c;d++)for(x=0;x<b;x++){y=p=0;for(H=-g;H<=g;H++)0>x+H||x+H>=b||(G=h[H+g],p+=G*k[2*((x+H)*c+d)],y+=G*k[2*((x+H)*c+d)+1]);a[2*(x*c+d)]=p;a[2*(x*c+d)+1]=y}return a}function n(a,c){const b=new L;var d=a.reduce((x,p)=>x+p.length,0);d=new Float32Array(4*d);const g=Array(a.length);let h=0,k=0;for(const x of a){a=h;for(const p of x)d[4*h]=p.x,d[4*h+1]=p.y,d[4*h+2]=p.t,d[4*h+3]=p.speed,h++;g[k++]={startVertex:a,numberOfVertices:x.length,totalTime:x[x.length-
1].t,timeSeed:c?b.getFloat():0}}return{lineVertices:d,lineDescriptors:g}}function q(a,c){function b(A,I,B,z,M,S,W,O){const N=9*p;let T=0;x[N+T++]=A;x[N+T++]=I;x[N+T++]=1;x[N+T++]=B;x[N+T++]=S;x[N+T++]=W;x[N+T++]=z/2;x[N+T++]=M/2;x[N+T++]=O;p++;x[N+T++]=A;x[N+T++]=I;x[N+T++]=-1;x[N+T++]=B;x[N+T++]=S;x[N+T++]=W;x[N+T++]=-z/2;x[N+T++]=-M/2;x[N+T++]=O;p++}const {lineVertices:d,lineDescriptors:g}=a;var h=a=0;for(var k of g)a+=2*k.numberOfVertices,h+=6*(k.numberOfVertices-1);const x=new Float32Array(9*
a);k=new Uint32Array(h);let p=0;a=0;for(const A of g){const {totalTime:I,timeSeed:B}=A;let z=h=null,M=null;var y=null,H=null,G=null;for(let S=0;S<A.numberOfVertices;S++){y=d[4*(A.startVertex+S)];const W=d[4*(A.startVertex+S)+1],O=d[4*(A.startVertex+S)+2],N=d[4*(A.startVertex+S)+3];let T=null,V=null;var K=null;let X=null;0<S&&(T=y-h,V=W-z,K=Math.sqrt(T*T+V*V),T/=K,V/=K,1<S?(H=T+H,G=V+G,K=Math.sqrt(H*H+G*G),H/=K,G/=K,K=Math.min(1/(H*T+G*V),c),H*=K,G*=K,K=-G,X=H):(K=-V,X=T),null!==K&&null!==X&&(b(h,
z,M,K,X,I,B,N),k[a++]=p-2,k[a++]=p,k[a++]=p-1,k[a++]=p,k[a++]=p+1,k[a++]=p-1));h=y;z=W;M=O;H=T;G=V;y=N}b(h,z,M,-G,H,I,B,y)}return{vertexData:x,indexData:k}}function e(a){function c(Y,ca){var Z=O+T,ea=N+V,fa=Math.sqrt(Z*Z+ea*ea);Z/=fa;ea/=fa;var ha=O*Z+N*ea,la=T+X,ia=V+ba;fa=Math.sqrt(la*la+ia*ia);la/=fa;ia/=fa;var qa=T*la+V*ia;fa=K;var na=A,ua=I,va=B;ea=-(ea/ha);Z/=ha;ha=z;var za=M,ya=S,Ea=W;ia=-(ia/qa);la/=qa;qa=16*H;let sa=0;for(const Ga of[1,2])for(const Ia of[1,2,3,4])p[qa+sa++]=fa,p[qa+sa++]=
na,p[qa+sa++]=ua,p[qa+sa++]=va,p[qa+sa++]=ha,p[qa+sa++]=za,p[qa+sa++]=ya,p[qa+sa++]=Ea,p[qa+sa++]=Ga,p[qa+sa++]=Ia,p[qa+sa++]=Y,p[qa+sa++]=ca,p[qa+sa++]=ea/2,p[qa+sa++]=Z/2,p[qa+sa++]=ia/2,p[qa+sa++]=la/2,H++;y[G++]=H-8;y[G++]=H-7;y[G++]=H-6;y[G++]=H-7;y[G++]=H-5;y[G++]=H-6;y[G++]=H-4;y[G++]=H-3;y[G++]=H-2;y[G++]=H-3;y[G++]=H-1;y[G++]=H-2}function b(Y,ca,Z,ea,fa,ha){O=T;N=V;T=X;V=ba;null==O&&null==N&&(O=T,N=V);if(null!=z&&null!=M){X=Y-z;ba=ca-M;const la=Math.sqrt(X*X+ba*ba);X/=la;ba/=la}null!=O&&
null!=N&&c(fa,ha);K=z;A=M;I=S;B=W;z=Y;M=ca;S=Z;W=ea}function d(Y,ca){O=T;N=V;T=X;V=ba;null==O&&null==N&&(O=T,N=V);null!=O&&null!=N&&c(Y,ca)}const {lineVertices:g,lineDescriptors:h}=a;let k=a=0;for(var x of h){const Y=x.numberOfVertices-1;a+=8*Y;k+=12*Y}const p=new Float32Array(16*a),y=new Uint32Array(k);let H=0,G=0,K,A,I,B,z,M,S,W,O,N,T,V,X,ba;for(const Y of h){ba=X=V=T=N=O=W=S=M=z=B=I=A=K=null;const {totalTime:ca,timeSeed:Z}=Y;for(x=0;x<Y.numberOfVertices;x++)b(g[4*(Y.startVertex+x)],g[4*(Y.startVertex+
x)+1],g[4*(Y.startVertex+x)+2],g[4*(Y.startVertex+x)+3],ca,Z);d(ca,Z)}return{vertexData:p,indexData:y}}function v(a,c){const b=c.pixels,{width:d,height:g}=c,h=new Float32Array(d*g*2),k=c.mask||new Uint8Array(d*g*2);c.mask||k.fill(255);if("vector-uv"===a)for(a=0;a<d*g;a++)h[2*a]=b[0][a],h[2*a+1]=-b[1][a];else if("vector-magdir"===a)for(a=0;a<d*g;a++){c=b[0][a];const x=r.deg2rad(b[1][a]),p=Math.sin(x-Math.PI/2);h[2*a]=Math.cos(x-Math.PI/2)*c;h[2*a+1]=p*c}return{data:h,mask:k,width:d,height:g}}async function w(a,
c,b,d,g,h){const k={requestProjectedLocalDirections:!0,signal:h};null!=g&&(k.timeExtent=g);if("imagery"===a.type)return await a.load({signal:h}),g=a.rasterInfo.dataType,(a=await a.fetchImage(c,b,d,k))&&null!=a.pixelData&&null!=a.pixelData.pixelBlock?v(g,a.pixelData.pixelBlock):{data:new Float32Array(b*d*2),mask:new Uint8Array(b*d),width:b,height:d};await a.load({signal:h});g=a.rasterInfo.dataType;return(a=await a.fetchPixels(c,b,d,k))&&null!=a.pixelBlock?v(g,a.pixelBlock):{data:new Float32Array(b*
d*2),mask:new Uint8Array(b*d),width:b,height:d}}const m=E.getLogger("esri.views.2d.engine.flow.dataUtils");J.createAnimatedLinesData=n;J.createFlowMesh=async function(a,c,b,d){const g=performance.now();var h=D(c,b);const k=performance.now();b=f(c,h,b.width,b.height);c=performance.now();h=n(b,!0);b=performance.now();a="Streamlines"===a?q(h,10):e(h);h=performance.now();t("esri-2d-profiler")&&(m.info("I.1","_createFlowFieldFromData (ms)",Math.round(k-g)),m.info("I.2","_getStreamlines (ms)",Math.round(c-
k)),m.info("I.3","createAnimatedLinesData (ms)",Math.round(b-c)),m.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(h-b)),m.info("I.5","createFlowMesh (ms)",Math.round(h-g)),m.info("I.6","Mesh size (bytes)",a.vertexData.buffer.byteLength+a.indexData.buffer.byteLength));await Promise.resolve();R.throwIfAborted(d);return a};J.createParticlesMesh=e;J.createStreamlinesMesh=q;J.loadImagery=async function(a,c,b,d,g,h){const k=performance.now();var x=P.getInfo(c.spatialReference);if(!x)return b=
await w(a,c,b,d,g,h),t("esri-2d-profiler")&&m.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-k)),t("esri-2d-profiler")&&m.info("I.9","Number of parts",1),b;const [p,y]=x.valid,H=Math.ceil(c.width/(y-p)),G=c.width/H,K=Math.round(b/H);let A=c.xmin;const I=[];x=performance.now();for(let B=0;B<H;B++){const z=new Q({xmin:A,xmax:A+G,ymin:c.ymin,ymax:c.ymax,spatialReference:c.spatialReference});I.push(w(a,z,K,d,g,h));A+=G}a=await Promise.all(I);t("esri-2d-profiler")&&m.info("I.8",
"All calls to _fetchPart (ms)",Math.round(performance.now()-x));t("esri-2d-profiler")&&m.info("I.9","Number of parts",a.length);d={data:new Float32Array(b*d*2),mask:new Uint8Array(b*d),width:b,height:d};c=0;for(const B of a){for(a=0;a<B.height;a++)for(g=0;g<B.width;g++)c+g>=b||(d.data[2*(a*b+c+g)]=B.data[2*(a*B.width+g)],d.data[2*(a*b+c+g)+1]=B.data[2*(a*B.width+g)+1],d.mask[a*b+c+g]=B.mask[a*B.width+g]);c+=B.width}t("esri-2d-profiler")&&m.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-
k));return d};Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/versionUtils ../support/popupUtils".split(" "),function(J,
u,t,E,r,R,L,P,Q,D,F,f,l,n,q,e,v,w,m,a,c,b,d,g){E=function(h){function k(...p){p=h.call(this,...p)||this;p.legendEnabled=!0;p.isReference=null;p.operationalLayerType="ArcGISImageServiceLayer";p.popupEnabled=!0;p.popupTemplate=null;p.type="imagery";return p}J._inherits(k,h);var x=k.prototype;x.normalizeCtorArgs=function(p,y){return"string"===typeof p?{url:p,...y}:p};x.load=function(p){const y=null!=p?p.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},p).catch(r.throwIfAbortError).then(()=>
this._fetchService(y)));return Promise.resolve(this)};x.writeOperationalLayerType=function(p,y,H){y[H]="vector-field"===this.renderer?.type?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};x.createPopupTemplate=function(p){const y=this.rasterFields,H=this.title,G=new Set;var K=!1;let A=!1;this.capabilities&&(K=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length,A="esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===
this.serviceDataType);const I=new Set;K&&I.add("raster.itempixelvalue");for(const B of y)K=B.name.toLowerCase(),I.has(K)||K.includes("raster.servicepixelvalue.")||G.add(B.name);A&&G.add("raster.magnitude").add("raster.direction");return g.createPopupTemplate({fields:y,title:H},{...p,visibleFieldNames:G})};x.queryFeatures=function(p,y){return this.queryRasters(p,y).then(H=>{if(H?.features)for(const G of H.features)G.layer=G.sourceLayer=this;return H})};x.queryFeatureCount=function(p,y){return this.queryRasterCount(p,
y)};x.redraw=function(){this.emit("redraw")};x.serviceSupportsSpatialReference=function(p){return d.serviceSupportsSpatialReference(this,p)};J._createClass(k,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);return k}(q.BlendLayer(c.TemporalLayer(a.ScaleRangeLayer(v.OperationalLayer(w.PortalLayer(l.ArcGISImageService(m.RefreshableLayer(e.CustomParametersMixin(n.ArcGISService(E.MultiOriginJSONMixin(f)))))))))));u.__decorate([R.property(b.legendEnabled)],E.prototype,
"legendEnabled",void 0);u.__decorate([R.property({type:["show","hide"]})],E.prototype,"listMode",void 0);u.__decorate([R.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],E.prototype,"isReference",void 0);u.__decorate([R.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],E.prototype,"operationalLayerType",void 0);u.__decorate([F.writer("web-map",
"operationalLayerType")],E.prototype,"writeOperationalLayerType",null);u.__decorate([R.property(b.popupEnabled)],E.prototype,"popupEnabled",void 0);u.__decorate([R.property({type:t,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],E.prototype,"popupTemplate",void 0);u.__decorate([R.property({readOnly:!0})],E.prototype,"defaultPopupTemplate",null);u.__decorate([R.property({readOnly:!0,json:{read:!1}})],E.prototype,"type",void 0);return E=u.__decorate([D.subclass("esri.layers.ImageryLayer")],
E)});