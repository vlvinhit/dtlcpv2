// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/ImageElement":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Error ../../core/urlUtils ../../core/uuid ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./MediaElementBase ../../portal/support/resourceExtension ../../chunks/persistableUrlUtils".split(" "),
function(g,x,H,W,F,M,G,B,N,Q,D,u,A,w,O,v){async function T(K){if("string"===typeof K){if(F.isBlobProtocol(K)){var {data:m}=await H(K,{responseType:"blob"});return m}if(F.isDataProtocol(K))return F.dataToBlob(K);m=await H(K,{responseType:"image"});return T(m.data)}return new Promise(z=>{if(K instanceof HTMLCanvasElement)var f=K;else{f=K instanceof HTMLImageElement?K.naturalWidth:K.width;var n=K instanceof HTMLImageElement?K.naturalHeight:K.height,J=document.createElement("canvas"),h=J.getContext("2d");
J.width=f;J.height=n;K instanceof HTMLImageElement?h.drawImage(K,0,0,K.width,K.height):K instanceof ImageData&&h.putImageData(K,0,0);f=J}return f.toBlob(z)})}function R(K,m){const z=M.generateUUID();K=`${F.join("media",z)}.${O.getResourceContentExtension(K)}`;return m.resourceFromPath(K)}B=function(K){function m(f){f=K.call(this,f)||this;f.content=null;f.image=null;f.type="image";f.image=null;return f}g._inherits(m,K);var z=m.prototype;z.load=function(){const f=this.image;if("string"===typeof f){var n=
H(f,{responseType:"image"}).then(({data:J})=>{this._set("content",J)});this.addResolvingPromise(n)}else f instanceof HTMLImageElement?(n=f.decode().then(()=>{this._set("content",f)}),this.addResolvingPromise(n)):f?this._set("content",f):this.addResolvingPromise(Promise.reject(new W("image-element:invalid-image-type","Invalid image type",{image:f})));return Promise.resolve(this)};z.readImage=function(f,n,J){return v.fromJSON(n.url,J)};z.writeImage=function(f,n,J,h){if(null!=f){var r=h?.portalItem,
l=h?.resources;if(r&&l){var p="string"!==typeof f||F.isDataProtocol(f)||F.isBlobProtocol(f)?null:f;if(p){if(null==v.itemIdFromResourceUrl(p)){n[J]=p;return}h=v.toJSON(p,{...h,verifyItemRelativeUrls:h&&h.verifyItemRelativeUrls?{writtenUrls:h.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},v.MarkKeep.NO);if(r&&h&&!F.isAbsolute(h)){l.toKeep.push({resource:r.resourceFromPath(h),compress:!1});n[J]=h;return}}n[J]="\x3cpending\x3e";l.pendingOperations.push(T(f).then(y=>{const C=R(y,r);n[J]=C.itemRelativeUrl;
l.toAdd.push({resource:C,content:y,compress:!1,finish:L=>{this.image=L.url}})}))}else"string"===typeof f&&(n[J]=v.toJSON(f,h))}};return g._createClass(m)}(w);x.__decorate([G.property({readOnly:!0})],B.prototype,"content",void 0);x.__decorate([G.property({json:{name:"url",type:String}})],B.prototype,"image",void 0);x.__decorate([D.reader("image",["url"])],B.prototype,"readImage",null);x.__decorate([A.writer("image")],B.prototype,"writeImage",null);x.__decorate([G.property({readOnly:!0,json:{name:"mediaType"}})],
B.prototype,"type",void 0);return B=x.__decorate([u.subclass("esri.layers.support.ImageElement")],B)})},"esri/layers/support/MediaElementBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/Loadable ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./ControlPointsGeoreference ./CornersGeoreference ./ExtentAndRotationGeoreference ./GeoreferenceBase".split(" "),
function(g,x,H,W,F,M,G,B,N,Q,D,u,A,w,O){G={key:"type",base:O,typeMap:{"control-points":u,corners:A,"extent-and-rotation":w}};H=function(v){function T(R){R=v.call(this,R)||this;R.georeference=null;R.opacity=1;return R}g._inherits(T,v);T.prototype.readGeoreference=function(R){return u.fromJSON(R)};return g._createClass(T)}(H.NumericIdentifiableMixin(W.JSONSupportMixin(F)));x.__decorate([M.property({types:G,json:{write:!0}})],H.prototype,"georeference",void 0);x.__decorate([Q.reader("georeference")],
H.prototype,"readGeoreference",null);x.__decorate([M.property()],H.prototype,"opacity",void 0);return H=x.__decorate([D.subclass("esri.layers.support.MediaElementBase")],H)})},"esri/layers/support/ControlPointsGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/perspectiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../chunks/mat3 ../../chunks/mat3f64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Point ../../geometry/Polygon ../../geometry/projection ../../geometry/SpatialReference ./GeoreferenceBase".split(" "),
function(g,x,H,W,F,M,G,B,N,Q,D,u,A,w,O,v,T,R,K,m,z,f,n,J){function h(V){return null!=V&&null!=V.sourcePoint&&null!=V.mapPoint}function r(V,U,Y){R.set(V,Y.sourcePoint.x,Y.sourcePoint.y);R.set(U,Y.mapPoint.x,Y.mapPoint.y)}function l(V,U,Y){r(E,t,U);r(a,c,Y);R.rotate(b,a,E,I);R.rotate(e,E,a,I);R.rotate(d,c,t,-I);R.rotate(k,t,c,-I);U=t;Y=c;var q=d,Z=k;return G.getProjectiveTransform(V,C(S,E,a,b,e),C(X,U,Y,q,Z))}function p(V,U,Y,q){r(E,t,U);r(a,c,Y);r(b,d,q);R.lerp(e,E,a,.5);R.rotate(e,b,e,Math.PI);R.lerp(k,
t,c,.5);R.rotate(k,d,k,Math.PI);U=t;Y=c;q=d;var Z=k;return G.getProjectiveTransform(V,C(S,E,a,b,e),C(X,U,Y,q,Z))}function y(V,U,Y,q,Z){r(E,t,U);r(a,c,Y);r(b,d,q);r(e,k,Z);U=t;Y=c;q=d;Z=k;return G.getProjectiveTransform(V,C(S,E,a,b,e),C(X,U,Y,q,Z))}function C(V,U,Y,q,Z){V[0]=U[0];V[1]=U[1];V[2]=Y[0];V[3]=Y[1];V[4]=q[0];V[5]=q[1];V[6]=Z[0];V[7]=Z[1];return V}const L=T.create(),P=K.create();H=function(V){function U(){var Y=V.apply(this,arguments)||this;Y.sourcePoint=null;Y.mapPoint=null;return Y}g._inherits(U,
V);return g._createClass(U)}(H);x.__decorate([N.property()],H.prototype,"sourcePoint",void 0);x.__decorate([N.property({type:m})],H.prototype,"mapPoint",void 0);H=x.__decorate([w.subclass("esri.layers.support.ControlPoint")],H);F=function(V){function U(q){q=V.call(this,q)||this;q.controlPoints=null;q.height=0;q.type="control-points";q.width=0;return q}g._inherits(U,V);var Y=U.prototype;Y.readControlPoints=function(q,Z){const da=n.fromJSON(Z.spatialReference),ba=T.fromValues(...Z.coefficients,1);return q.map(aa=>
{R.set(P,aa.x,aa.y);G.transformProjective(P,P,ba);return{sourcePoint:aa,mapPoint:new m({x:P[0],y:P[1],spatialReference:da})}})};Y.writeControlPoints=function(q,Z,da,ba){null==this.transform?(q=new W("web-document-write:invalid-georeference","Invalid 'controlPoints', 'width', 'height' configuration.",{layer:ba?.layer,georeference:this}),ba?.messages?ba.messages.push(q):M.getLogger(this).error(q.name,q.message)):null!=q&&h(q[0])&&(Z.controlPoints=q.map(aa=>{aa=aa.sourcePoint;return{x:aa.x,y:aa.y}}),
Z.spatialReference=q[0].mapPoint.spatialReference.toJSON(),Z.coefficients=this.transform.slice(0,8))};Y.toMap=function(q){if(null==q||null==this.transform||null==this.controlPoints||!h(this.controlPoints[0]))return null;R.set(P,q.x,q.y);q=this.controlPoints[0].mapPoint.spatialReference;G.transformProjective(P,P,this.transform);return new m({x:P[0],y:P[1],spatialReference:q})};Y.toSource=function(q){if(null==q||null==this.inverseTransform||null==this.controlPoints||!h(this.controlPoints[0]))return null;
const Z=this.controlPoints[0].mapPoint.spatialReference;q=q.normalize();q=f.projectOrLoad(q,Z).geometry;if(null==q)return null;R.set(P,q.x,q.y);G.transformProjective(P,P,this.inverseTransform);return B.createScreenPoint(P[0],P[1])};Y._updateTransform=function(q){const {controlPoints:Z,width:da,height:ba}=this;if(!(null!=Z&&0<da&&0<ba))return null;const [aa,ca,fa,ka]=Z;if(!h(aa))return null;var ea=aa.mapPoint.spatialReference;const ha=this._projectControlPoint(ca,ea),ia=this._projectControlPoint(fa,
ea);ea=this._projectControlPoint(ka,ea);if(!(ha.valid&&ia.valid&&ea.valid&&h(ha.controlPoint)))return null;null==q&&(q=T.create());let ja=null;ja=h(ia.controlPoint)&&h(ea.controlPoint)?y(q,aa,ha.controlPoint,ia.controlPoint,ea.controlPoint):h(ia.controlPoint)?p(q,aa,ha.controlPoint,ia.controlPoint):l(q,aa,ha.controlPoint);return ja.every(la=>0===la)?null:ja};Y._projectControlPoint=function(q,Z){if(!h(q))return{valid:!0,controlPoint:q};const {sourcePoint:da,mapPoint:ba}=q,{geometry:aa,pending:ca}=
f.projectOrLoad(ba,Z);return ca?{valid:!1,controlPoint:null}:ca||aa?{valid:!0,controlPoint:{sourcePoint:da,mapPoint:aa}}:(M.getLogger(this).warn("map point could not be projected to the spatial reference",{georeference:this,controlPoint:q,sourceSpatialReference:ba.spatialReference,targetSpatialReference:Z}),{valid:!1,controlPoint:null})};g._createClass(U,[{key:"coords",get:function(){if(null==this.controlPoints)return null;const q=this._updateTransform(L);if(null==q||!h(this.controlPoints[0]))return null;
var Z=this.width,da=this.height,ba=this.controlPoints[0].mapPoint.spatialReference;const aa=K.fromValues(0,da),ca=K.fromValues(0,0),fa=K.fromValues(Z,0);Z=K.fromValues(Z,da);G.transformProjective(aa,aa,q);G.transformProjective(ca,ca,q);G.transformProjective(fa,fa,q);G.transformProjective(Z,Z,q);return new z({rings:[[aa,ca,fa,Z,aa]],spatialReference:ba})},set:function(q){if(null!=this.controlPoints&&h(this.controlPoints[0])){var Z=this.controlPoints[0].mapPoint.spatialReference;q=this.projectOrWarn(q,
Z);if(null!=q){var {width:da,height:ba}=this,{rings:[[aa,ca,fa,ka]]}=q;q={sourcePoint:B.createScreenPoint(0,ba),mapPoint:new m({x:aa[0],y:aa[1],spatialReference:Z})};var ea={sourcePoint:B.createScreenPoint(0,0),mapPoint:new m({x:ca[0],y:ca[1],spatialReference:Z})},ha={sourcePoint:B.createScreenPoint(da,0),mapPoint:new m({x:fa[0],y:fa[1],spatialReference:Z})},ia={sourcePoint:B.createScreenPoint(da,ba),mapPoint:new m({x:ka[0],y:ka[1],spatialReference:Z})};h(q)&&h(ea)&&h(ha)&&h(ia)&&(y(L,q,ea,ha,ia),
this.controlPoints=this.controlPoints.map(({sourcePoint:ja})=>{R.set(P,ja.x,ja.y);G.transformProjective(P,P,L);return{sourcePoint:ja,mapPoint:new m({x:P[0],y:P[1],spatialReference:Z})}}))}}}},{key:"inverseTransform",get:function(){return null==this.transform?null:v.invert(T.create(),this.transform)}},{key:"transform",get:function(){return this._updateTransform()}}]);return U}(F.JSONSupportMixin(J));x.__decorate([N.property({type:[H],json:{write:{allowNull:!1,isRequired:!0}}})],F.prototype,"controlPoints",
void 0);x.__decorate([A.reader("controlPoints")],F.prototype,"readControlPoints",null);x.__decorate([O.writer("controlPoints")],F.prototype,"writeControlPoints",null);x.__decorate([N.property()],F.prototype,"coords",null);x.__decorate([N.property({json:{write:!0}})],F.prototype,"height",void 0);x.__decorate([N.property({readOnly:!0})],F.prototype,"inverseTransform",null);x.__decorate([N.property({readOnly:!0})],F.prototype,"transform",null);x.__decorate([N.property({json:{write:!0}})],F.prototype,
"width",void 0);F=x.__decorate([w.subclass("esri.layers.support.ControlPointsGeoreference")],F);const E=K.create(),a=K.create(),b=K.create(),e=K.create(),t=K.create(),c=K.create(),d=K.create(),k=K.create(),I=Math.PI/2,S=Array(8).fill(0),X=Array(8).fill(0);return F})},"esri/core/perspectiveUtils":function(){define("exports ../chunks/mat3 ../chunks/mat3f64 ../chunks/vec2 ../chunks/vec3 ../chunks/vec3f64".split(" "),function(g,x,H,W,F,M){function G(u,A,w,O,v,T,R,K,m){x.set(u,A,O,T,w,v,R,1,1,1);F.set(B,
K,m,1);x.adjoint(N,u);const [z,f,n]=F.transformMat3(B,B,x.transpose(N,N));x.set(N,z,0,0,0,f,0,0,0,n);return x.multiply(u,N,u)}const B=M.create(),N=H.create(),Q=H.create(),D=H.create();g.getProjectiveTransform=function(u,A,w){G(Q,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7]);G(D,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7]);x.multiply(u,x.adjoint(Q,Q),D);0!==u[8]&&(u[0]/=u[8],u[1]/=u[8],u[2]/=u[8],u[3]/=u[8],u[4]/=u[8],u[5]/=u[8],u[6]/=u[8],u[7]/=u[8],u[8]/=u[8]);return u};g.transformProjective=function(u,A,
w){F.set(B,A[0],A[1],1);F.transformMat3(B,B,x.transpose(N,w));return 0===B[2]?W.set(u,B[0],B[1]):W.set(u,B[0]/B[2],B[1]/B[2])};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(g,x){function H(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a}function W(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}function F(a,
b,e,t,c,d,k,I,S,X){a[0]=b;a[1]=e;a[2]=t;a[3]=c;a[4]=d;a[5]=k;a[6]=I;a[7]=S;a[8]=X;return a}function M(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function G(a,b){if(a===b){const e=b[1],t=b[2],c=b[5];a[1]=b[3];a[2]=b[6];a[3]=e;a[5]=b[7];a[6]=t;a[7]=c}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a}function B(a,b){const e=b[0],t=b[1],c=b[2],d=b[3],k=b[4],I=b[5],S=b[6],X=b[7];b=b[8];const V=b*k-I*X,U=-b*d+I*S,Y=X*
d-k*S;let q=e*V+t*U+c*Y;if(!q)return null;q=1/q;a[0]=V*q;a[1]=(-b*t+c*X)*q;a[2]=(I*t-c*k)*q;a[3]=U*q;a[4]=(b*e-c*S)*q;a[5]=(-I*e+c*d)*q;a[6]=Y*q;a[7]=(-X*e+t*S)*q;a[8]=(k*e-t*d)*q;return a}function N(a,b){const e=b[0],t=b[1],c=b[2],d=b[3],k=b[4],I=b[5],S=b[6],X=b[7];b=b[8];a[0]=k*b-I*X;a[1]=c*X-t*b;a[2]=t*I-c*k;a[3]=I*S-d*b;a[4]=e*b-c*S;a[5]=c*d-e*I;a[6]=d*X-k*S;a[7]=t*S-e*X;a[8]=e*k-t*d;return a}function Q(a){const b=a[3],e=a[4],t=a[5],c=a[6],d=a[7],k=a[8];return a[0]*(k*e-t*d)+a[1]*(-k*b+t*c)+a[2]*
(d*b-e*c)}function D(a,b,e){const t=b[0],c=b[1],d=b[2],k=b[3],I=b[4],S=b[5],X=b[6],V=b[7];b=b[8];const U=e[0],Y=e[1],q=e[2],Z=e[3],da=e[4],ba=e[5],aa=e[6],ca=e[7];e=e[8];a[0]=U*t+Y*k+q*X;a[1]=U*c+Y*I+q*V;a[2]=U*d+Y*S+q*b;a[3]=Z*t+da*k+ba*X;a[4]=Z*c+da*I+ba*V;a[5]=Z*d+da*S+ba*b;a[6]=aa*t+ca*k+e*X;a[7]=aa*c+ca*I+e*V;a[8]=aa*d+ca*S+e*b;return a}function u(a,b,e){const t=b[0],c=b[1],d=b[2],k=b[3],I=b[4],S=b[5],X=b[6],V=b[7];b=b[8];const U=e[0];e=e[1];a[0]=t;a[1]=c;a[2]=d;a[3]=k;a[4]=I;a[5]=S;a[6]=U*t+
e*k+X;a[7]=U*c+e*I+V;a[8]=U*d+e*S+b;return a}function A(a,b,e){const t=b[0],c=b[1],d=b[2],k=b[3],I=b[4],S=b[5],X=b[6],V=b[7];b=b[8];const U=Math.sin(e);e=Math.cos(e);a[0]=e*t+U*k;a[1]=e*c+U*I;a[2]=e*d+U*S;a[3]=e*k-U*t;a[4]=e*I-U*c;a[5]=e*S-U*d;a[6]=X;a[7]=V;a[8]=b;return a}function w(a,b,e){const t=e[0],c=e[1];e=e[2];a[0]=t*b[0];a[1]=t*b[1];a[2]=t*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=e*b[6];a[7]=e*b[7];a[8]=e*b[8];return a}function O(a,b,e){const t=e[0];e=e[1];a[0]=t*b[0];a[1]=t*b[1];a[2]=
t*b[2];a[3]=e*b[3];a[4]=e*b[4];a[5]=e*b[5];return a}function v(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a}function T(a,b){const e=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=e;a[2]=0;a[3]=-e;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function R(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function K(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a}function m(a,b){var e=b[0],t=b[1],
c=b[2];b=b[3];var d=e+e,k=t+t;const I=c+c;e*=d;const S=t*d;t*=k;const X=c*d,V=c*k;c*=I;d*=b;k*=b;b*=I;a[0]=1-t-c;a[3]=S-b;a[6]=X+k;a[1]=S+b;a[4]=1-e-c;a[7]=V-d;a[2]=X-k;a[5]=V+d;a[8]=1-e-t;return a}function z(a,b){const e=b[0],t=b[1],c=b[2],d=b[4],k=b[5],I=b[6],S=b[8],X=b[9];b=b[10];const V=b*k-I*X,U=-b*d+I*S,Y=X*d-k*S;var q=e*V+t*U+c*Y;if(!q)return null;q=1/q;a[0]=V*q;a[1]=(-b*t+c*X)*q;a[2]=(I*t-c*k)*q;a[3]=U*q;a[4]=(b*e-c*S)*q;a[5]=(-I*e+c*d)*q;a[6]=Y*q;a[7]=(-X*e+t*S)*q;a[8]=(k*e-t*d)*q;return a}
function f(a,b){const e=b[0],t=b[1],c=b[2],d=b[3],k=b[4],I=b[5],S=b[6],X=b[7];var V=b[8],U=b[9],Y=b[10],q=b[11];const Z=b[12],da=b[13],ba=b[14];b=b[15];const aa=e*I-t*k,ca=e*S-c*k,fa=e*X-d*k,ka=t*S-c*I,ea=t*X-d*I,ha=c*X-d*S,ia=V*da-U*Z,ja=V*ba-Y*Z;V=V*b-q*Z;const la=U*ba-Y*da;U=U*b-q*da;Y=Y*b-q*ba;q=aa*Y-ca*U+fa*la+ka*V-ea*ja+ha*ia;if(!q)return null;q=1/q;a[0]=(I*Y-S*U+X*la)*q;a[1]=(S*V-k*Y-X*ja)*q;a[2]=(k*U-I*V+X*ia)*q;a[3]=(c*U-t*Y-d*la)*q;a[4]=(e*Y-c*V+d*ja)*q;a[5]=(t*V-e*U-d*ia)*q;a[6]=(da*ha-
ba*ea+b*ka)*q;a[7]=(ba*fa-Z*ha-b*ca)*q;a[8]=(Z*ea-da*fa+b*aa)*q;return a}function n(a,b,e){a[0]=2/b;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/e;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a}function J(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}function h(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2)}function r(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];a[2]=b[2]+e[2];a[3]=b[3]+e[3];a[4]=b[4]+e[4];a[5]=b[5]+e[5];a[6]=
b[6]+e[6];a[7]=b[7]+e[7];a[8]=b[8]+e[8];return a}function l(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];a[2]=b[2]-e[2];a[3]=b[3]-e[3];a[4]=b[4]-e[4];a[5]=b[5]-e[5];a[6]=b[6]-e[6];a[7]=b[7]-e[7];a[8]=b[8]-e[8];return a}function p(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*e;return a}function y(a,b,e,t){a[0]=b[0]+e[0]*t;a[1]=b[1]+e[1]*t;a[2]=b[2]+e[2]*t;a[3]=b[3]+e[3]*t;a[4]=b[4]+e[4]*t;a[5]=b[5]+e[5]*t;a[6]=b[6]+e[6]*t;a[7]=b[7]+e[7]*t;
a[8]=b[8]+e[8]*t;return a}function C(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]}function L(a,b){const e=a[0],t=a[1],c=a[2],d=a[3],k=a[4],I=a[5],S=a[6],X=a[7];a=a[8];const V=b[0],U=b[1],Y=b[2],q=b[3],Z=b[4],da=b[5],ba=b[6],aa=b[7];b=b[8];const ca=x.getEpsilon();return Math.abs(e-V)<=ca*Math.max(1,Math.abs(e),Math.abs(V))&&Math.abs(t-U)<=ca*Math.max(1,Math.abs(t),Math.abs(U))&&Math.abs(c-Y)<=ca*Math.max(1,Math.abs(c),
Math.abs(Y))&&Math.abs(d-q)<=ca*Math.max(1,Math.abs(d),Math.abs(q))&&Math.abs(k-Z)<=ca*Math.max(1,Math.abs(k),Math.abs(Z))&&Math.abs(I-da)<=ca*Math.max(1,Math.abs(I),Math.abs(da))&&Math.abs(S-ba)<=ca*Math.max(1,Math.abs(S),Math.abs(ba))&&Math.abs(X-aa)<=ca*Math.max(1,Math.abs(X),Math.abs(aa))&&Math.abs(a-b)<=ca*Math.max(1,Math.abs(a),Math.abs(b))}function P(a){const b=x.getEpsilon(),e=a[0],t=a[1],c=a[2],d=a[3],k=a[4],I=a[5],S=a[6],X=a[7];a=a[8];return Math.abs(1-(e*e+d*d+S*S))<=b&&Math.abs(1-(t*t+
k*k+X*X))<=b&&Math.abs(1-(c*c+I*I+a*a))<=b}const E=Object.freeze(Object.defineProperty({__proto__:null,add:r,adjoint:N,copy:W,determinant:Q,equals:L,exactEquals:C,frob:h,fromMat2d:K,fromMat4:H,fromQuat:m,fromRotation:T,fromScaling:R,fromTranslation:v,identity:M,invert:B,isOrthoNormal:P,mul:D,multiply:D,multiplyScalar:p,multiplyScalarAndAdd:y,normalFromMat4:f,normalFromMat4Legacy:z,projection:n,rotate:A,scale:w,scaleByVec2:O,set:F,str:J,sub:l,subtract:l,translate:u,transpose:G},Symbol.toStringTag,
{value:"Module"}));g.add=r;g.adjoint=N;g.copy=W;g.determinant=Q;g.equals=L;g.exactEquals=C;g.frob=h;g.fromMat2d=K;g.fromMat4=H;g.fromQuat=m;g.fromRotation=T;g.fromScaling=R;g.fromTranslation=v;g.identity=M;g.invert=B;g.isOrthoNormal=P;g.mat3=E;g.mul=D;g.multiply=D;g.multiplyScalar=p;g.multiplyScalarAndAdd=y;g.normalFromMat4=f;g.normalFromMat4Legacy=z;g.projection=n;g.rotate=A;g.scale=w;g.scaleByVec2=O;g.set=F;g.str=J;g.sub=l;g.subtract=l;g.translate=u;g.transpose=G})},"esri/chunks/mat3f64":function(){define(["exports"],
function(g){function x(){return[1,0,0,0,1,0,0,0,1]}function H(G){return[G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],G[8]]}function W(G,B,N,Q,D,u,A,w,O){return[G,B,N,Q,D,u,A,w,O]}function F(G,B){return new Float64Array(G,B,9)}const M=Object.freeze(Object.defineProperty({__proto__:null,clone:H,create:x,createView:F,fromValues:W},Symbol.toStringTag,{value:"Module"}));g.clone=H;g.create=x;g.createView=F;g.fromValues=W;g.mat3f64=M})},"esri/chunks/vec2":function(){define(["exports","./common"],function(g,x){function H(c,
d){c[0]=d[0];c[1]=d[1];return c}function W(c,d,k){c[0]=d;c[1]=k;return c}function F(c,d,k){c[0]=d[0]+k[0];c[1]=d[1]+k[1];return c}function M(c,d,k){c[0]=d[0]-k[0];c[1]=d[1]-k[1];return c}function G(c,d,k){c[0]=d[0]*k[0];c[1]=d[1]*k[1];return c}function B(c,d,k){c[0]=d[0]/k[0];c[1]=d[1]/k[1];return c}function N(c,d){c[0]=Math.ceil(d[0]);c[1]=Math.ceil(d[1]);return c}function Q(c,d){c[0]=Math.floor(d[0]);c[1]=Math.floor(d[1]);return c}function D(c,d,k){c[0]=Math.min(d[0],k[0]);c[1]=Math.min(d[1],k[1]);
return c}function u(c,d,k){c[0]=Math.max(d[0],k[0]);c[1]=Math.max(d[1],k[1]);return c}function A(c,d){c[0]=Math.round(d[0]);c[1]=Math.round(d[1]);return c}function w(c,d,k){c[0]=d[0]*k;c[1]=d[1]*k;return c}function O(c,d,k,I){c[0]=d[0]+k[0]*I;c[1]=d[1]+k[1]*I;return c}function v(c,d){const k=d[0]-c[0];c=d[1]-c[1];return Math.sqrt(k*k+c*c)}function T(c,d){const k=d[0]-c[0];c=d[1]-c[1];return k*k+c*c}function R(c){const d=c[0];c=c[1];return Math.sqrt(d*d+c*c)}function K(c){const d=c[0];c=c[1];return d*
d+c*c}function m(c,d){c[0]=-d[0];c[1]=-d[1];return c}function z(c,d){c[0]=1/d[0];c[1]=1/d[1];return c}function f(c,d){var k=d[0];const I=d[1];k=k*k+I*I;0<k&&(k=1/Math.sqrt(k),c[0]=d[0]*k,c[1]=d[1]*k);return c}function n(c,d){return c[0]*d[0]+c[1]*d[1]}function J(c,d,k){d=d[0]*k[1]-d[1]*k[0];c[0]=c[1]=0;c[2]=d;return c}function h(c,d,k,I){const S=d[0];d=d[1];c[0]=S+I*(k[0]-S);c[1]=d+I*(k[1]-d);return c}function r(c,d){d=d||1;const k=2*x.RANDOM()*Math.PI;c[0]=Math.cos(k)*d;c[1]=Math.sin(k)*d;return c}
function l(c,d,k){const I=d[0];d=d[1];c[0]=k[0]*I+k[2]*d;c[1]=k[1]*I+k[3]*d;return c}function p(c,d,k){const I=d[0];d=d[1];c[0]=k[0]*I+k[2]*d+k[4];c[1]=k[1]*I+k[3]*d+k[5];return c}function y(c,d,k){const I=d[0];d=d[1];c[0]=k[0]*I+k[3]*d+k[6];c[1]=k[1]*I+k[4]*d+k[7];return c}function C(c,d,k){const I=d[0];d=d[1];c[0]=k[0]*I+k[4]*d+k[12];c[1]=k[1]*I+k[5]*d+k[13];return c}function L(c,d,k,I){const S=d[0]-k[0];d=d[1]-k[1];const X=Math.sin(I);I=Math.cos(I);c[0]=S*I-d*X+k[0];c[1]=S*X+d*I+k[1];return c}
function P(c,d){var k=c[0];c=c[1];const I=d[0];d=d[1];let S=k*k+c*c;0<S&&(S=1/Math.sqrt(S));let X=I*I+d*d;0<X&&(X=1/Math.sqrt(X));k=(k*I+c*d)*S*X;return 1<k?0:-1>k?Math.PI:Math.acos(k)}function E(c){return"vec2("+c[0]+", "+c[1]+")"}function a(c,d){return c[0]===d[0]&&c[1]===d[1]}function b(c,d){const k=c[0];c=c[1];const I=d[0];d=d[1];const S=x.getEpsilon();return Math.abs(k-I)<=S*Math.max(1,Math.abs(k),Math.abs(I))&&Math.abs(c-d)<=S*Math.max(1,Math.abs(c),Math.abs(d))}function e(c,d,k,I,S){let X=
d[0]-k[0];k=d[1]-k[1];S=(I[0]*X+I[1]*k)*(S-1);X=I[0]*S;k=I[1]*S;c[0]=d[0]+X;c[1]=d[1]+k;return c}const t=Object.freeze(Object.defineProperty({__proto__:null,add:F,angle:P,ceil:N,copy:H,cross:J,dist:v,distance:v,div:B,divide:B,dot:n,equals:b,exactEquals:a,floor:Q,inverse:z,len:R,length:R,lerp:h,max:u,min:D,mul:G,multiply:G,negate:m,normalize:f,projectAndScale:e,random:r,rotate:L,round:A,scale:w,scaleAndAdd:O,set:W,sqrDist:T,sqrLen:K,squaredDistance:T,squaredLength:K,str:E,sub:M,subtract:M,transformMat2:l,
transformMat2d:p,transformMat3:y,transformMat4:C},Symbol.toStringTag,{value:"Module"}));g.add=F;g.angle=P;g.ceil=N;g.copy=H;g.cross=J;g.dist=v;g.distance=v;g.div=B;g.divide=B;g.dot=n;g.equals=b;g.exactEquals=a;g.floor=Q;g.inverse=z;g.len=R;g.length=R;g.lerp=h;g.max=u;g.min=D;g.mul=G;g.multiply=G;g.negate=m;g.normalize=f;g.projectAndScale=e;g.random=r;g.rotate=L;g.round=A;g.scale=w;g.scaleAndAdd=O;g.set=W;g.sqrDist=T;g.sqrLen=K;g.squaredDistance=T;g.squaredLength=K;g.str=E;g.sub=M;g.subtract=M;g.transformMat2=
l;g.transformMat2d=p;g.transformMat3=y;g.transformMat4=C;g.vec2=t})},"esri/chunks/vec2f64":function(){define(["exports"],function(g){function x(){return[0,0]}function H(v){return[v[0],v[1]]}function W(v,T){return[v,T]}function F(v){const T=[0,0],R=Math.min(2,v.length);for(let K=0;K<R;++K)T[K]=v[K];return T}function M(v,T){return new Float64Array(v,T,2)}function G(){return[0,0]}function B(){return[1,1]}function N(){return[1,0]}function Q(){return[0,1]}const D=[0,0],u=[1,1],A=[1,0],w=[0,1],O=Object.freeze(Object.defineProperty({__proto__:null,
ONES:u,UNIT_X:A,UNIT_Y:w,ZEROS:D,clone:H,create:x,createView:M,fromArray:F,fromValues:W,ones:B,unitX:N,unitY:Q,zeros:G},Symbol.toStringTag,{value:"Module"}));g.ONES=u;g.UNIT_X=A;g.UNIT_Y=w;g.ZEROS=D;g.clone=H;g.create=x;g.createView=M;g.fromArray=F;g.fromValues=W;g.ones=B;g.unitX=N;g.unitY=Q;g.vec2f64=O;g.zeros=G})},"esri/layers/support/GeoreferenceBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/subclass ../../geometry/projection".split(" "),
function(g,x,H,W,F,M,G,B,N,Q){H=function(D){function u(){return D.apply(this,arguments)||this}g._inherits(u,D);u.prototype.projectOrWarn=function(A,w){if(null==A)return A;const {geometry:O,pending:v}=Q.projectOrLoad(A,w);return v?null:v||O?O:(W.getLogger(this).warn("geometry could not be projected to the spatial reference",{georeference:this,geometry:A,sourceSpatialReference:A.spatialReference,targetSpatialReference:w}),null)};return g._createClass(u)}(H.Clonable);return H=x.__decorate([N.subclass("esri.layers.support.GeoreferenceBase")],
H)})},"esri/layers/support/CornersGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/Polygon ./GeoreferenceBase".split(" "),function(g,x,H,W,F,M,G,B,N,Q){W=function(D){function u(A){A=D.call(this,A)||this;A.bottomLeft=null;A.bottomRight=null;A.topLeft=
null;A.topRight=null;A.type="corners";return A}g._inherits(u,D);g._createClass(u,[{key:"coords",get:function(){let {topLeft:A,topRight:w,bottomLeft:O,bottomRight:v}=this;if(null==A||null==w||null==O||null==v)return null;const T=A.spatialReference;w=this.projectOrWarn(w,T);O=this.projectOrWarn(O,T);v=this.projectOrWarn(v,T);return null==w||null==O||null==v?null:new N({rings:[[[O.x,O.y],[A.x,A.y],[w.x,w.y],[v.x,v.y],[O.x,O.y]]],spatialReference:T})},set:function(A){var {topLeft:w}=this;if(null!=w&&
(w=w.spatialReference,A=this.projectOrWarn(A,w),null!=A)){var {rings:[[O,v,T,R]]}=A;this.bottomLeft=new B({x:O[0],y:O[1],spatialReference:w});this.topLeft=new B({x:v[0],y:v[1],spatialReference:w});this.topRight=new B({x:T[0],y:T[1],spatialReference:w});this.bottomRight=new B({x:R[0],y:R[1],spatialReference:w})}}}]);return u}(Q);x.__decorate([H.property()],W.prototype,"coords",null);x.__decorate([H.property({type:B})],W.prototype,"bottomLeft",void 0);x.__decorate([H.property({type:B})],W.prototype,
"bottomRight",void 0);x.__decorate([H.property({type:B})],W.prototype,"topLeft",void 0);x.__decorate([H.property({type:B})],W.prototype,"topRight",void 0);return W=x.__decorate([G.subclass("esri.layers.support.CornersGeoreference")],W)})},"esri/layers/support/ExtentAndRotationGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/mathUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../geometry/Extent ../../geometry/Polygon ./GeoreferenceBase".split(" "),
function(g,x,H,W,F,M,G,B,N,Q,D,u){function A(w,O,v){v=N.toRadian(v);const T=Math.cos(v),R=Math.sin(v);return(K,m)=>[T*(K-w)+R*(m-O)+w,T*(m-O)-R*(K-w)+O]}F=function(w){function O(v){v=w.call(this,v)||this;v.extent=null;v.rotation=0;v.type="extent-and-rotation";return v}g._inherits(O,w);g._createClass(O,[{key:"coords",get:function(){if(null==this.extent)return null;const {xmin:v,ymin:T,xmax:R,ymax:K,spatialReference:m}=this.extent;if(this.rotation){const {x:f,y:n}=this.extent.center;var z=A(f,n,this.rotation);
z=[z(v,T),z(v,K),z(R,K),z(R,T)];z.push(z[0])}else z=[[v,T],[v,K],[R,K],[R,T],[v,T]];return new D({rings:[z],spatialReference:m})},set:function(v){if(null!=v&&null!=this.extent){var T=this.extent.spatialReference;v=this.projectOrWarn(v,T);if(null!=v&&null!=v.extent){var {rings:[[R,K,m]],extent:{center:{x:z,y:f}}}=v;v=H.rad2deg(Math.PI/2-Math.atan2(K[1]-R[1],K[0]-R[0]));var n=A(z,f,-v),[J,h]=n(R[0],R[1]),[r,l]=n(m[0],m[1]);this.extent=new Q({xmin:J,ymin:h,xmax:r,ymax:l,spatialReference:T});this.rotation=
v}}}}]);return O}(u);x.__decorate([W.property()],F.prototype,"coords",null);x.__decorate([W.property({type:Q})],F.prototype,"extent",void 0);x.__decorate([W.property({type:Number})],F.prototype,"rotation",void 0);return F=x.__decorate([B.subclass("esri.layers.support.ExtentAndRotationGeoreference")],F)})},"esri/portal/support/resourceExtension":function(){define(["exports","../../core/urlUtils"],function(g,x){const H={},W=H["text/plain"],F={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",
gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const M in F)H[F[M]]=M;g.getResourceContentExtension=function(M){M instanceof Blob?M=M.type:(M=x.getPathExtension(M.url),M=F[M]||"text/plain");return H[M]||W};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/LocalMediaElementSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Collection ../../core/collectionUtils ../../core/Evented ../../core/HandleOwner ../../core/Loadable ../../core/Logger ../../core/Promise ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/intersectsBase ../../geometry/support/spatialReferenceUtils ../graphics/data/BoundsStore ./ImageElement ./MediaElementBase ./MediaElementView ./VideoElement ../../geometry/SpatialReference".split(" "),
function(g,x,H,W,F,M,G,B,N,Q,D,u,A,w,O,v,T,R,K,m,z,f,n,J,h,r,l,p){const y=W.ofType({key:"type",defaultKeyValue:"image",base:h,typeMap:{image:J,video:l}});H=function(C){function L(E){var a=C.call(this,E)||this;a._index=new n.BoundsStore;a._elementViewsMap=new Map;a._elementsIndexes=new Map;a._elementsChangedHandler=b=>{for(var e of b.removed){const t=a._elementViewsMap.get(e);a._elementViewsMap.delete(e);a._index.delete(t);a.handles.remove(t);t.destroy();a.notifyChange("fullExtent")}({spatialReference:e}=
g._assertThisInitialized(a));for(const t of b.added){if(a._elementViewsMap.get(t))continue;const c=new r.MediaElementView({spatialReference:e,element:t});a._elementViewsMap.set(t,c);b=u.watch(()=>c.coords,()=>a._updateIndexForElement(c,!1));a._updateIndexForElement(c,!0);a.handles.add(b,c)}a._elementsIndexes.clear();a.elements.forEach((t,c)=>a._elementsIndexes.set(t,c));a.emit("refresh")};a.elements=new y;return a}g._inherits(L,C);var P=L.prototype;P.load=async function(E){D.throwIfAborted(E);this.spatialReference||
(E=this.elements.find(a=>null!=a.georeference&&null!=a.georeference.coords),this._set("spatialReference",E?E.georeference.coords.spatialReference:p.WGS84));this._elementsChangedHandler({added:this.elements.items,removed:[]});this.handles.add(this.elements.on("change",this._elementsChangedHandler));return this};P.destroy=function(){this._index.clear();this._elementViewsMap.clear();this._elementsIndexes.clear()};P.queryElements=async function(E,a){await this.load();await K.initializeProjection(E.spatialReference,
this.spatialReference,null,a);E=f.equals(E.spatialReference,this.spatialReference)?E:K.project(E,this.spatialReference);if(!E)return[];E=E.normalize();const b=[];for(const e of E)this._index.forEachInBounds(m.fromExtent(e),({normalizedCoords:t,element:c})=>{null!=t&&z.extentIntersectsPolygon(e,t)&&b.push(c)});b.sort((e,t)=>this._elementsIndexes.get(e)-this._elementsIndexes.get(t));return b};P._updateIndexForElement=function(E,a){const b=E.normalizedBounds,e=this._index.has(E),t=null!=b;this._index.delete(E);
t&&this._index.set(E,b);this.notifyChange("fullExtent");a||(e!==t?this.emit("refresh"):this.emit("change",{element:E.element}))};g._createClass(L,[{key:"elements",set:function(E){this._set("elements",F.referenceSetter(E,this._get("elements"),y))}},{key:"fullExtent",get:function(){if("not-loaded"===this.loadStatus)return null;const E=this._index.fullBounds;return null==E?null:new R({xmin:E[0],ymin:E[1],xmax:E[2],ymax:E[3],spatialReference:this.spatialReference})}},{key:"spatialReference",set:function(E){"not-loaded"!==
this.loadStatus?N.getLogger(this).error("#spatialReference","spatialReference cannot be changed after the source is loaded."):this._set("spatialReference",E)}}]);return L}(B.LoadableMixin(Q.EsriPromiseMixin(G.HandleOwnerMixin(M.EventedAccessor))));x.__decorate([A.property()],H.prototype,"elements",null);x.__decorate([A.property({readOnly:!0})],H.prototype,"fullExtent",null);x.__decorate([A.property()],H.prototype,"spatialReference",null);return H=x.__decorate([T.subclass("esri.layers.support.LocalMediaElementSource")],
H)})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(g,x,H,W,F){function M(N,Q,D){G.minX=Q[0];G.minY=Q[1];G.maxX=Q[2];G.maxY=Q[3];N.search(G,D)}const G={minX:0,minY:0,maxX:0,maxY:0};let B=function(){function N(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new W.PooledRBush(9,
H("esri-csp-restrictions")?D=>({minX:D[0],minY:D[1],maxX:D[2],maxY:D[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const D=Array(this._idByBounds.size);let u=0;this._idByBounds.forEach((A,w)=>{D[u++]=w});this._indexInvalid=!1;this._index.clear();this._index.load(D)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(D=>this._idByBounds.has(D))))),this._boundsToLoad.length=0)}}var Q=N.prototype;Q.clear=function(){this._indexInvalid=
!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};Q.delete=function(D){const u=this._boundsById.get(D);this._boundsById.delete(D);u&&(this._idByBounds.delete(u),this._indexInvalid||this._index.remove(u))};Q.forEachInBounds=function(D,u){this._loadIndex();M(this._index,D,A=>u(this._idByBounds.get(A)))};Q.get=function(D){return this._boundsById.get(D)};Q.has=function(D){return this._boundsById.has(D)};Q.invalidateIndex=function(){this._indexInvalid||
(this._indexInvalid=!0,this._boundsToLoad.length=0)};Q.set=function(D,u){if(!this._indexInvalid){const A=this._boundsById.get(D);A&&(this._index.remove(A),this._idByBounds.delete(A))}this._boundsById.set(D,u);u&&(this._idByBounds.set(u,D),this._indexInvalid||(this._boundsToLoad.push(u),5E4<this._boundsToLoad.length&&this._loadIndex()))};x._createClass(N,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const D=F.empty();for(const u of this._boundsById.values())u&&(D[0]=Math.min(u[0],
D[0]),D[1]=Math.min(u[1],D[1]),D[2]=Math.max(u[2],D[2]),D[3]=Math.max(u[3],D[3]));return D}},{key:"valid",get:function(){return!this._indexInvalid}}]);return N}();g.BoundsStore=B;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(g,x,H,W,F,M){function G(h,r){B(h,0,h.children.length,r,h)}
function B(h,r,l,p,y){y||(y=new n([]));y.minX=Infinity;y.minY=Infinity;y.maxX=-Infinity;y.maxY=-Infinity;for(let C=r,L;C<l;C++)L=h.children[C],N(y,h.leaf?p(L):L);return y}function N(h,r){h.minX=Math.min(h.minX,r.minX);h.minY=Math.min(h.minY,r.minY);h.maxX=Math.max(h.maxX,r.maxX);h.maxY=Math.max(h.maxY,r.maxY)}function Q(h,r){return h.minX-r.minX}function D(h,r){return h.minY-r.minY}function u(h){return(h.maxX-h.minX)*(h.maxY-h.minY)}function A(h){return h.maxX-h.minX+(h.maxY-h.minY)}function w(h,
r){return h.minX<=r.minX&&h.minY<=r.minY&&r.maxX<=h.maxX&&r.maxY<=h.maxY}function O(h,r){return r.minX<=h.maxX&&r.minY<=h.maxY&&r.maxX>=h.minX&&r.maxY>=h.minY}function v(h,r,l,p,y){for(r=[r,l];r.length;){l=W.assumeNonNull(r.pop());const C=W.assumeNonNull(r.pop());if(l-C<=p)continue;const L=C+Math.ceil((l-C)/p/2)*p;M.quickselect(h,L,C,l,y);r.push(C,L,L,l)}}let T=function(){function h(l=9,p){this._compareMinX=Q;this._compareMinY=D;this._toBBox=y=>y;this._maxEntries=Math.max(4,l||9);this._minEntries=
Math.max(2,Math.ceil(.4*this._maxEntries));p&&("function"===typeof p?this._toBBox=p:this._initFormat(p));this.clear()}var r=h.prototype;r.destroy=function(){this.clear();R.prune();K.prune();m.prune();z.prune()};r.all=function(l){this._all(this._data,l)};r.search=function(l,p){let y=this._data;const C=this._toBBox;if(O(l,y))for(R.clear();y;){for(let L=0,P=y.children.length;L<P;L++){const E=y.children[L],a=y.leaf?C(E):E;O(l,a)&&(y.leaf?p(E):w(l,a)?this._all(E,p):R.push(E))}y=R.pop()}};r.collides=function(l){let p=
this._data;const y=this._toBBox;if(!O(l,p))return!1;for(R.clear();p;){for(let C=0,L=p.children.length;C<L;C++){const P=p.children[C],E=p.leaf?y(P):P;if(O(l,E)){if(p.leaf||w(l,E))return!0;R.push(P)}}p=R.pop()}return!1};r.load=function(l){if(!l.length)return this;if(l.length<this._minEntries){for(let p=0,y=l.length;p<y;p++)this.insert(l[p]);return this}l=this._build(l.slice(0,l.length),0,l.length-1,0);if(this._data.children.length)if(this._data.height===l.height)this._splitRoot(this._data,l);else{if(this._data.height<
l.height){const p=this._data;this._data=l;l=p}this._insert(l,this._data.height-l.height-1,!0)}else this._data=l;return this};r.insert=function(l){l&&this._insert(l,this._data.height-1);return this};r.clear=function(){this._data=new n([]);return this};r.remove=function(l){if(!l)return this;let p=this._data,y=null,C=0,L=!1,P;const E=this._toBBox(l);m.clear();for(z.clear();p||0<m.length;){p||(p=W.assumeNonNull(m.pop()),y=m.data[m.length-1],C=z.pop()??0,L=!0);if(p.leaf&&(P=H.indexOf(p.children,l,p.children.length,
p.indexHint),-1!==P)){p.children.splice(P,1);m.push(p);this._condense(m);break}L||p.leaf||!w(p,E)?y?(C++,p=y.children[C],L=!1):p=null:(m.push(p),z.push(C),C=0,y=p,p=p.children[0])}return this};r.toJSON=function(){return this._data};r.fromJSON=function(l){this._data=l;return this};r._all=function(l,p){for(K.clear();l;){if(!0===l.leaf)for(const y of l.children)p(y);else K.pushArray(l.children);l=K.pop()??null}};r._build=function(l,p,y,C){var L=y-p+1,P=this._maxEntries;if(L<=P)return l=new n(l.slice(p,
y+1)),G(l,this._toBBox),l;C||(C=Math.ceil(Math.log(L)/Math.log(P)),P=Math.ceil(L/P**(C-1)));const E=new J([]);E.height=C;L=Math.ceil(L/P);P=L*Math.ceil(Math.sqrt(P));for(v(l,p,y,P,this._compareMinX);p<=y;p+=P){const a=Math.min(p+P-1,y);v(l,p,a,L,this._compareMinY);for(let b=p;b<=a;b+=L)E.children.push(this._build(l,b,Math.min(b+L-1,a),C-1))}G(E,this._toBBox);return E};r._chooseSubtree=function(l,p,y,C){for(;;){C.push(p);if(!0===p.leaf||C.length-1===y)break;let L=Infinity,P=Infinity,E=void 0;for(let a=
0,b=p.children.length;a<b;a++){const e=p.children[a],t=u(e),c=(Math.max(e.maxX,l.maxX)-Math.min(e.minX,l.minX))*(Math.max(e.maxY,l.maxY)-Math.min(e.minY,l.minY))-t;c<P?(P=c,L=t<L?t:L,E=e):c===P&&t<L&&(L=t,E=e)}p=E||p.children[0]}return p};r._insert=function(l,p,y){var C=this._toBBox;y=y?l:C(l);m.clear();C=this._chooseSubtree(y,this._data,p,m);C.children.push(l);for(N(C,y);0<=p;)if(m.data[p].children.length>this._maxEntries)this._split(m,p),p--;else break;this._adjustParentBBoxes(y,m,p)};r._split=
function(l,p){const y=l.data[p];var C=y.children.length;const L=this._minEntries;this._chooseSplitAxis(y,L,C);(C=this._chooseSplitIndex(y,L,C))?(C=y.children.splice(C,y.children.length-C),C=y.leaf?new n(C):new J(C),C.height=y.height,G(y,this._toBBox),G(C,this._toBBox),p?l.data[p-1].children.push(C):this._splitRoot(y,C)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};r._splitRoot=function(l,p){this._data=new J([l,p]);this._data.height=l.height+1;G(this._data,
this._toBBox)};r._chooseSplitIndex=function(l,p,y){let C,L,P=void 0;C=L=Infinity;for(let a=p;a<=y-p;a++){var E=B(l,0,a,this._toBBox);const b=B(l,a,y,this._toBBox),e=Math.max(0,Math.min(E.maxX,b.maxX)-Math.max(E.minX,b.minX))*Math.max(0,Math.min(E.maxY,b.maxY)-Math.max(E.minY,b.minY));E=u(E)+u(b);e<C?(C=e,P=a,L=E<L?E:L):e===C&&E<L&&(L=E,P=a)}return P};r._chooseSplitAxis=function(l,p,y){const C=l.leaf?this._compareMinX:Q,L=l.leaf?this._compareMinY:D,P=this._allDistMargin(l,p,y,C);p=this._allDistMargin(l,
p,y,L);P<p&&l.children.sort(C)};r._allDistMargin=function(l,p,y,C){l.children.sort(C);C=this._toBBox;var L=B(l,0,p,C);const P=B(l,y-p,y,C);let E=A(L)+A(P);for(let a=p;a<y-p;a++){const b=l.children[a];N(L,l.leaf?C(b):b);E+=A(L)}for(y=y-p-1;y>=p;y--)L=l.children[y],N(P,l.leaf?C(L):L),E+=A(P);return E};r._adjustParentBBoxes=function(l,p,y){for(;0<=y;y--)N(p.data[y],l)};r._condense=function(l){for(let p=l.length-1;0<=p;p--){const y=l.data[p];if(0===y.children.length)if(0<p){const C=l.data[p-1],L=C.children;
L.splice(H.indexOf(L,y,L.length,C.indexHint),1)}else this.clear();else G(y,this._toBBox)}};r._initFormat=function(l){const p=["return a"," - b",";"];this._compareMinX=new Function("a","b",p.join(l[0]));this._compareMinY=new Function("a","b",p.join(l[1]));this._toBBox=new Function("a","return {minX: a"+l[0]+", minY: a"+l[1]+", maxX: a"+l[2]+", maxY: a"+l[3]+"};")};return x._createClass(h)}();const R=new F,K=new F,m=new F,z=new F({deallocator:void 0});F=x._createClass(function(){this.minY=this.minX=
Infinity;this.maxY=this.maxX=-Infinity});let f=function(h){function r(){var l=h.apply(this,arguments)||this;l.height=1;l.indexHint=new H.PositionHint;return l}x._inherits(r,h);return x._createClass(r)}(F),n=function(h){function r(l){var p=h.call(this)||this;p.children=l;p.leaf=!0;return p}x._inherits(r,h);return x._createClass(r)}(f),J=function(h){function r(l){var p=h.call(this)||this;p.children=l;p.leaf=!1;return p}x._inherits(r,h);return x._createClass(r)}(f);g.BBox=F;g.PooledRBush=T;Object.defineProperty(g,
Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(g,x){var H={exports:{}};H.exports;(function(W){(function(F){F=F();void 0!==F&&(W.exports=F)})(function(){function F(B,N,Q,D,u){for(;D>Q;){if(600<D-Q){var A=D-Q+1,w=N-Q+1,O=Math.log(A),v=.5*Math.exp(2*O/3);O=.5*Math.sqrt(O*v*(A-v)/A)*(0>w-A/2?-1:1);F(B,N,Math.max(Q,Math.floor(N-w*v/A+O)),Math.min(D,Math.floor(N+(A-w)*v/A+O)),u)}A=B[N];w=Q;v=D;M(B,Q,N);for(0<u(B[D],A)&&M(B,Q,
D);w<v;){M(B,w,v);w++;for(v--;0>u(B[w],A);)w++;for(;0<u(B[v],A);)v--}0===u(B[Q],A)?M(B,Q,v):(v++,M(B,v,D));v<=N&&(Q=v+1);N<=v&&(D=v-1)}}function M(B,N,Q){var D=B[N];B[N]=B[Q];B[Q]=D}function G(B,N){return B<N?-1:B>N?1:0}return function(B,N,Q,D,u){F(B,N,Q||0,D||B.length-1,u||G)}})})(H);x=x.getDefaultExportFromCjs(H.exports);g.quickselect=x})},"esri/layers/support/MediaElementView":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Polygon ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/normalizeUtilsSync".split(" "),
function(g,x,H,W,F,M,G,B,N,Q,D,u,A){g.MediaElementView=function(w){function O(v){return w.call(this,v)||this}x._inherits(O,w);x._createClass(O,[{key:"bounds",get:function(){const v=this.coords;return null==v||null==v.extent?null:u.fromExtent(v.extent)}},{key:"coords",get:function(){return D.projectOrLoad(this.element.georeference?.coords,this.spatialReference).geometry}},{key:"normalizedCoords",get:function(){return Q.fromJSON(A.normalizeCentralMeridianSync(this.coords))}},{key:"normalizedBounds",
get:function(){const v=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=v?u.fromExtent(v):null}}]);return O}(W);H.__decorate([F.property()],g.MediaElementView.prototype,"spatialReference",void 0);H.__decorate([F.property()],g.MediaElementView.prototype,"element",void 0);H.__decorate([F.property()],g.MediaElementView.prototype,"bounds",null);H.__decorate([F.property()],g.MediaElementView.prototype,"coords",null);H.__decorate([F.property()],g.MediaElementView.prototype,"normalizedCoords",
null);H.__decorate([F.property()],g.MediaElementView.prototype,"normalizedBounds",null);g.MediaElementView=H.__decorate([N.subclass("esri.layers.support.MediaElementView")],g.MediaElementView);Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsSync":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ./aaBoundingRect ./boundsUtils ./coordsUtils ./jsonUtils ./normalizeUtilsCommon ./spatialReferenceUtils".split(" "),function(g,x,H,W,F,
M,G,B){function N(m,z){if(null==m)return null;var f=m.spatialReference,n=B.getInfo(f);m="toJSON"in m?m.toJSON():m;if(!n)return m;f=B.isWebMercator(f)?102100:4326;const J=G.cutParams[f].maxX,h=G.cutParams[f].minX;if(M.isPoint(m))return D(m,J,h);if(M.isMultipoint(m))m.points=m.points.map(r=>D(r,J,h));else{if(M.isExtent(m))return Q(m,n);if(M.isPolygon(m)||M.isPolyline(m)){f=W.getBoundsXY(R,m);n=f[0];f=f[2];const r=2*G.offsetMagnitude(n,h)*J;m=0===r?m:G.updatePolyGeometry(m,r);n+=r;f+=r;return f>J?v(m,
J,z):n<h?v(m,h,z):m}}return m}function Q(m,z){if(!z)return m;const f=u(m,z).map(n=>n.extent);return 2>f.length?f[0]||m:2<f.length?(m.xmin=z.valid[0],m.xmax=z.valid[1],m):{rings:f.map(n=>[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]])}}function D(m,z,f){if(Array.isArray(m)){var n=m[0];n>z?(f=G.offsetMagnitude(n,z),m[0]=n+-2*f*z):n<f&&(z=G.offsetMagnitude(n,f),m[0]=n+-2*z*f)}else n=m.x,n>z?(f=G.offsetMagnitude(n,z),m.x+=-2*f*z):n<f&&(z=G.offsetMagnitude(n,f),m.x+=
-2*z*f);return m}function u(m,z){const f=[],{ymin:n,ymax:J,xmin:h,xmax:r}=m;var l=m.xmax-m.xmin;const [p,y]=z.valid,{x:C,frameId:L}=A(m.xmin,z),{x:P,frameId:E}=A(m.xmax,z);m=C===P&&0<l;if(l>2*y){l={xmin:h<r?C:P,ymin:n,xmax:y,ymax:J};m={xmin:p,ymin:n,xmax:h<r?P:C,ymax:J};z={xmin:0,ymin:n,xmax:y,ymax:J};const a={xmin:p,ymin:n,xmax:0,ymax:J},b=[],e=[];w(l,z)&&b.push(L);w(l,a)&&e.push(L);w(m,z)&&b.push(E);w(m,a)&&e.push(E);for(let t=L+1;t<E;t++)b.push(t),e.push(t);f.push(new T(l,[L]),new T(m,[E]),new T(z,
b),new T(a,e))}else C>P||m?f.push(new T({xmin:C,ymin:n,xmax:y,ymax:J},[L]),new T({xmin:p,ymin:n,xmax:P,ymax:J},[E])):f.push(new T({xmin:C,ymin:n,xmax:P,ymax:J},[L]));return f}function A(m,z){const [f,n]=z.valid;z=2*n;var J=0;m>n?(J=Math.ceil(Math.abs(m-n)/z),m-=J*z):m<f&&(J=Math.ceil(Math.abs(m-f)/z),m+=J*z,J=-J);return{x:m,frameId:J}}function w(m,z){const {xmin:f,ymin:n,xmax:J,ymax:h}=z;return O(m,f,n)&&O(m,f,h)&&O(m,J,h)&&O(m,J,n)}function O(m,z,f){return z>=m.xmin&&z<=m.xmax&&f>=m.ymin&&f<=m.ymax?
!0:!1}function v(m,z,f=!0){const n=!M.isPolyline(m);n&&F.closeRings(m);if(f)return(new K).cut(m,z);f=n?m.rings:m.paths;const J=n?4:2,h=f.length;z*=-2;for(let r=0;r<h;r++){const l=f[r];if(l&&l.length>=J){const p=[];for(const y of l)p.push([y[0]+z,y[1]]);f.push(p)}}n?m.rings=f:m.paths=f;return m}let T=x._createClass(function(m,z){this.extent=m;this.frameIds=z});const R=H.create();let K=function(){function m(){this._linesIn=[];this._linesOut=[]}var z=m.prototype;z.cut=function(f,n){this._xCut=n;if(f.rings)this._closed=
!0,n=f.rings,this._minPts=4;else if(f.paths)this._closed=!1,n=f.paths,this._minPts=2;else return null;for(var J of n)if(J&&!(J.length<this._minPts)){n=!0;for(const h of J)n?(this.moveTo(h),n=!1):this.lineTo(h);this._closed&&this.close()}this._pushLineIn();this._pushLineOut();n=[];for(const h of this._linesIn)h&&h.length>=this._minPts&&n.push(h);J=-2*this._xCut;for(const h of this._linesOut)if(h&&h.length>=this._minPts){for(const r of h)r[0]+=J;n.push(h)}this._closed?f.rings=n:f.paths=n;return f};
z.moveTo=function(f){this._pushLineIn();this._pushLineOut();this._prevSide=this._side(f[0]);this._moveTo(f[0],f[1],this._prevSide);this._firstPt=this._prevPt=f};z.lineTo=function(f){const n=this._side(f[0]);if(-1===n*this._prevSide){const J=this._intersect(this._prevPt,f);this._lineTo(this._xCut,J,0);this._prevSide=0}this._lineTo(f[0],f[1],n);this._prevSide=n;this._prevPt=f};z.close=function(){const f=this._firstPt,n=this._prevPt;f[0]===n[0]&&f[1]===n[1]||this.lineTo(f);this._checkClosingPt(this._lineIn);
this._checkClosingPt(this._lineOut)};z._moveTo=function(f,n,J){this._closed?(this._lineIn.push([0>=J?f:this._xCut,n]),this._lineOut.push([0<=J?f:this._xCut,n])):(0>=J&&this._lineIn.push([f,n]),0<=J&&this._lineOut.push([f,n]))};z._lineTo=function(f,n,J){this._closed?(this._addPolyVertex(this._lineIn,0>=J?f:this._xCut,n),this._addPolyVertex(this._lineOut,0<=J?f:this._xCut,n)):0>J?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([f,n])):0<J?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([f,
n])):0>this._prevSide?(this._lineIn.push([f,n]),this._lineOut.push([f,n])):0<this._prevSide&&(this._lineOut.push([f,n]),this._lineIn.push([f,n]))};z._addPolyVertex=function(f,n,J){const h=f.length;1<h&&f[h-1][0]===n&&f[h-2][0]===n?f[h-1][1]=J:f.push([n,J])};z._checkClosingPt=function(f){const n=f.length;3<n&&f[0][0]===this._xCut&&f[n-2][0]===this._xCut&&f[1][0]===this._xCut&&(f[0][1]=f[n-2][1],f.pop())};z._side=function(f){return f<this._xCut?-1:f>this._xCut?1:0};z._intersect=function(f,n){return f[1]+
(this._xCut-f[0])/(n[0]-f[0])*(n[1]-f[1])};z._pushLineIn=function(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn);this._lineIn=[]};z._pushLineOut=function(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut);this._lineOut=[]};return x._createClass(m)}();g.CutVertical=K;g.normalizeCentralMeridianForDisplay=function(m){return N(m,!1)};g.normalizeCentralMeridianSync=function(m){return N(m,!0)};Object.defineProperty(g,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/support/VideoElement":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./MediaElementBase".split(" "),function(g,x,H,W,F,M,G,B,N,Q){M=function(D){function u(w){w=D.call(this,w)||this;w.content=null;w.type="video";return w}g._inherits(u,
D);var A=u.prototype;A.load=function(){const w=this.video;if("string"===typeof w){const O=document.createElement("video");O.src=w;O.crossOrigin="anonymous";O.autoplay=!0;O.muted=!0;O.loop=!0;this.addResolvingPromise(this._loadVideo(O).then(()=>{this._set("content",O)}))}else w instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(w).then(()=>{this._set("content",w)})):this.addResolvingPromise(Promise.reject(new H("video-element:invalid-video-type","Invalid video type",{video:w})));
return Promise.resolve(this)};A._loadVideo=function(w){return new Promise((O,v)=>{w.oncanplay=()=>{w.oncanplay=null;w.play().then(O,v)};"anonymous"!==w.crossOrigin&&(w.crossOrigin="anonymous",w.src=w.src)})};g._createClass(u,[{key:"video",set:function(w){"not-loaded"!==this.loadStatus?W.getLogger(this).error("#video","video cannot be changed after the element is loaded."):this._set("video",w)}}]);return u}(Q);x.__decorate([F.property({readOnly:!0})],M.prototype,"content",void 0);x.__decorate([F.property()],
M.prototype,"video",null);return M=x.__decorate([N.subclass("esri.layers.support.VideoElement")],M)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/Error ../core/Logger ../core/MultiOriginJSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/BlendLayer ./mixins/OperationalLayer ./mixins/ScaleRangeLayer ./support/ImageElement ./support/LocalMediaElementSource ./support/VideoElement".split(" "),function(g,
x,H,W,F,M,G,B,N,Q,D,u,A,w,O,v,T,R,K,m){function z(f){return"object"===typeof f&&null!=f&&"type"in f}M=function(f){function n(h){h=f.call(this,h)||this;h.effectiveSource=null;h.copyright=null;h.operationalLayerType="MediaLayer";h.spatialReference=null;h.type="media";h.source=new K;return h}g._inherits(n,f);var J=n.prototype;J.load=function(h){const r=this.source;if(!r)return this.addResolvingPromise(Promise.reject(new W("media-layer:source-missing","Set 'MediaLayer.source' before loading the layer."))),
Promise.resolve(this);const l=z(r)?new K({elements:new H([r])}):r;this._set("effectiveSource",l);this.spatialReference&&(l.spatialReference=this.spatialReference);h=l.load(h).then(()=>{this.spatialReference=l.spatialReference});this.addResolvingPromise(h);return Promise.resolve(this)};J.destroy=function(){this.effectiveSource?.destroy();this.source?.destroy()};J.castSource=function(h){return h?Array.isArray(h)?new K({elements:new H(h)}):h instanceof H?new K({elements:h}):h:null};J.readSource=function(h,
r,l){h="image"===r.mediaType?new R:"video"===r.mediaType?new m:null;h?.read(r,l);return h};J.writeSource=function(h,r,l,p){h&&z(h)&&"image"===h.type?h.write(r,p):p?.messages&&p?.messages?.push(new W("media-layer:unsupported-source","source must be an 'ImageElement'"))};g._createClass(n,[{key:"fullExtent",get:function(){return this.loaded?this.effectiveSource.fullExtent:null}},{key:"source",set:function(h){"not-loaded"!==this.loadStatus?F.getLogger(this).error("#source","source cannot be changed after the layer is loaded."):
this._set("source",h)}}]);return n}(O.BlendLayer(T.ScaleRangeLayer(v.OperationalLayer(M.MultiOriginJSONMixin(w)))));x.__decorate([G.property({readOnly:!0})],M.prototype,"effectiveSource",void 0);x.__decorate([G.property({type:String})],M.prototype,"copyright",void 0);x.__decorate([G.property({readOnly:!0})],M.prototype,"fullExtent",null);x.__decorate([G.property({type:["MediaLayer"]})],M.prototype,"operationalLayerType",void 0);x.__decorate([G.property({type:["show","hide"]})],M.prototype,"listMode",
void 0);x.__decorate([G.property({nonNullable:!0,json:{write:{enabled:!0,allowNull:!1}}})],M.prototype,"source",null);x.__decorate([B.cast("source")],M.prototype,"castSource",null);x.__decorate([D.reader("source",["url"])],M.prototype,"readSource",null);x.__decorate([A.writer("source")],M.prototype,"writeSource",null);x.__decorate([G.property()],M.prototype,"spatialReference",void 0);x.__decorate([G.property({readOnly:!0})],M.prototype,"type",void 0);return M=x.__decorate([u.subclass("esri.layers.MediaLayer")],
M)});