// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Extent ../../geometry/HeightModelInfo ../../geometry/SpatialReference ../support/arcgisLayerUrl ../support/commonProperties ../support/EditFieldsInfo ../support/FeatureIndex ../support/featureLayerUtils ../support/GeometryFieldsInfo ../support/LayerFloorInfo ../support/Relationship ../support/serviceCapabilitiesUtils ../../time/TimeReference".split(" "),
function(p,q,c,r,t,y,e,J,h,z,A,B,C,u,v,m,D,w,n,E,F,G,H,x){p.FeatureLayerBase=b=>{b=function(l){function k(){var a=l.apply(this,arguments)||this;a.capabilities=null;a.copyright=null;a.dateFieldsTimeReference=null;a.datesInUnknownTimezone=!1;a.displayField=null;a.definitionExpression=null;a.editFieldsInfo=null;a.editingInfo=null;a.elevationInfo=null;a.floorInfo=null;a.fullExtent=null;a.gdbVersion=null;a.geometryFieldsInfo=null;a.geometryType=null;a.hasM=void 0;a.hasZ=void 0;a.heightModelInfo=null;a.historicMoment=
null;a.isTable=!1;a.layerId=void 0;a.minScale=0;a.maxScale=0;a.globalIdField=null;a.objectIdField=null;a.preferredTimeReference=null;a.relationships=null;a.sourceJSON=null;a.returnM=void 0;a.returnZ=void 0;a.serviceDefinitionExpression=null;a.serviceItemId=null;a.spatialReference=u.WGS84;a.subtypeField=null;a.trackIdField=null;a.indexes=new (r.ofType(w.FeatureIndex));a.version=void 0;return a}q._inherits(k,l);var g=k.prototype;g.readCapabilitiesFromService=function(a,d){return H.getFeatureLayerCapabilities(d,
this.url)};g.readEditingInfo=function(a,d){({editingInfo:a}=d);return a?{lastEditDate:null!=a.lastEditDate?new Date(a.lastEditDate):null}:null};g.readIsTableFromService=function(a,d){return"Table"===d.type};g.readMinScale=function(a,d){return d.effectiveMinScale||a||0};g.readMaxScale=function(a,d){return d.effectiveMaxScale||a||0};g.readGlobalIdFieldFromService=function(a,d){return n.readGlobalIdField(d)};g.readObjectIdFieldFromService=function(a,d){return n.readObjectIdField(d)};g.readServiceDefinitionExpression=
function(a,d){return d.definitionQuery||d.definitionExpression};g.writeUrl=function(a,d,f,I){v.writeUrlWithLayerId(this,a,null,d,I)};g.readVersion=function(a,d){return n.readVersion(d)};q._createClass(k,[{key:"effectiveCapabilities",get:function(){var a=this.capabilities;if(!a)return null;a=t.clone(a);const {operations:d,editing:f}=a;if(this.sourceJSON?.isMultiServicesView)return this.userHasUpdateItemPrivileges&&(d.supportsQuery=!0),a;if(this.userHasUpdateItemPrivileges)return d.supportsAdd=d.supportsDelete=
d.supportsEditing=d.supportsQuery=d.supportsUpdate=f.supportsDeleteByOthers=f.supportsGeometryUpdate=f.supportsUpdateByOthers=!0,a;this.userHasFullEditingPrivileges&&d.supportsEditing&&(d.supportsAdd=d.supportsDelete=d.supportsUpdate=f.supportsGeometryUpdate=!0);return a}},{key:"hasFullEditingRestrictions",get:function(){const a=this.capabilities;if(!a||this.sourceJSON?.isMultiServicesView)return!1;const {operations:d,editing:f}=a;return d.supportsEditing&&!(d.supportsAdd&&d.supportsDelete&&d.supportsUpdate&&
f.supportsGeometryUpdate)}},{key:"hasUpdateItemRestrictions",get:function(){const a=this.capabilities;if(!a)return!1;const {operations:d,editing:f}=a;return this.sourceJSON?.isMultiServicesView?!d.supportsQuery:!(d.supportsAdd&&d.supportsDelete&&d.supportsEditing&&d.supportsQuery&&d.supportsUpdate&&f.supportsDeleteByOthers&&f.supportsGeometryUpdate&&f.supportsUpdateByOthers)}},{key:"url",set:function(a){a=v.sanitizeUrlWithLayerId({layer:this,url:a,nonStandardUrlAllowed:!0,logger:y.getLogger(this)});
this._set("url",a.url);null!=a.layerId&&this._set("layerId",a.layerId)}}]);return k}(b);c.__decorate([e.property({readOnly:!0,json:{read:!1,origins:{service:{read:{source:"advancedQueryCapabilities allowGeometryUpdates allowUpdateWithoutMValues archivingInfo capabilities datesInUnknownTimezone hasAttachments hasM hasZ maxRecordCount maxRecordCountFactor ownershipBasedAccessControlForFeatures standardMaxRecordCount supportedQueryFormats supportsAdvancedQueries supportsApplyEditsWithGlobalIds supportsAttachmentsByUploadId supportsAttachmentsResizing supportsCalculate supportsCoordinatesQuantization supportsExceedsLimitStatistics supportsFieldDescriptionProperty supportsQuantizationEditMode supportsRollbackOnFailureParameter supportsStatistics supportsTruncate supportsValidateSql tileMaxRecordCount useStandardizedQueries".split(" ")}}}}})],
b.prototype,"capabilities",void 0);c.__decorate([h.reader("service","capabilities")],b.prototype,"readCapabilitiesFromService",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"effectiveCapabilities",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"hasFullEditingRestrictions",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"hasUpdateItemRestrictions",null);c.__decorate([e.property({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],b.prototype,
"copyright",void 0);c.__decorate([e.property({type:x})],b.prototype,"dateFieldsTimeReference",void 0);c.__decorate([e.property({type:Boolean})],b.prototype,"datesInUnknownTimezone",void 0);c.__decorate([e.property({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],b.prototype,"displayField",void 0);c.__decorate([e.property({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],b.prototype,"definitionExpression",
void 0);c.__decorate([e.property({readOnly:!0,type:D})],b.prototype,"editFieldsInfo",void 0);c.__decorate([e.property({readOnly:!0})],b.prototype,"editingInfo",void 0);c.__decorate([h.reader("editingInfo")],b.prototype,"readEditingInfo",null);c.__decorate([e.property((()=>{const l=t.clone(m.elevationInfo),k=l.json.origins;k["web-map"]={read:!1,write:!1};k["portal-item"]={read:!1,write:!1};return l})())],b.prototype,"elevationInfo",void 0);c.__decorate([e.property({type:F,json:{read:{source:"layerDefinition.floorInfo"},
write:{target:"layerDefinition.floorInfo"}}})],b.prototype,"floorInfo",void 0);c.__decorate([e.property({type:B,json:{origins:{service:{read:{source:"extent"}}}}})],b.prototype,"fullExtent",void 0);c.__decorate([e.property()],b.prototype,"gdbVersion",void 0);c.__decorate([e.property({readOnly:!0,type:E,json:{read:{source:"geometryProperties"}}})],b.prototype,"geometryFieldsInfo",void 0);c.__decorate([e.property({type:"point polygon polyline multipoint multipatch mesh".split(" "),json:{origins:{service:{read:n.geometryTypeKebabDict.read}}}})],
b.prototype,"geometryType",void 0);c.__decorate([e.property({type:Boolean,json:{origins:{service:{read:!0}}}})],b.prototype,"hasM",void 0);c.__decorate([e.property({type:Boolean,json:{origins:{service:{read:!0}}}})],b.prototype,"hasZ",void 0);c.__decorate([e.property({readOnly:!0,type:C})],b.prototype,"heightModelInfo",void 0);c.__decorate([e.property({type:Date})],b.prototype,"historicMoment",void 0);c.__decorate([e.property({readOnly:!0})],b.prototype,"isTable",void 0);c.__decorate([h.reader("service",
"isTable",["type"])],b.prototype,"readIsTableFromService",null);c.__decorate([e.property({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],b.prototype,"layerId",void 0);c.__decorate([e.property(m.minScale)],b.prototype,"minScale",void 0);c.__decorate([h.reader("service","minScale",["minScale","effectiveMinScale"])],b.prototype,"readMinScale",null);c.__decorate([e.property(m.maxScale)],b.prototype,"maxScale",void 0);c.__decorate([h.reader("service",
"maxScale",["maxScale","effectiveMaxScale"])],b.prototype,"readMaxScale",null);c.__decorate([e.property({type:String})],b.prototype,"globalIdField",void 0);c.__decorate([h.reader("service","globalIdField",["globalIdField","fields"])],b.prototype,"readGlobalIdFieldFromService",null);c.__decorate([e.property({type:String})],b.prototype,"objectIdField",void 0);c.__decorate([h.reader("service","objectIdField",["objectIdField","fields"])],b.prototype,"readObjectIdFieldFromService",null);c.__decorate([e.property({type:x})],
b.prototype,"preferredTimeReference",void 0);c.__decorate([e.property({type:[G],readOnly:!0})],b.prototype,"relationships",void 0);c.__decorate([e.property()],b.prototype,"sourceJSON",void 0);c.__decorate([e.property({type:Boolean})],b.prototype,"returnM",void 0);c.__decorate([e.property({type:Boolean})],b.prototype,"returnZ",void 0);c.__decorate([e.property({readOnly:!0})],b.prototype,"serviceDefinitionExpression",void 0);c.__decorate([h.reader("service","serviceDefinitionExpression",["definitionQuery",
"definitionExpression"])],b.prototype,"readServiceDefinitionExpression",null);c.__decorate([e.property({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],b.prototype,"serviceItemId",void 0);c.__decorate([e.property({type:u,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],b.prototype,"spatialReference",void 0);c.__decorate([e.property({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],b.prototype,"subtypeField",void 0);c.__decorate([e.property({type:String,
json:{read:{source:"timeInfo.trackIdField"}}})],b.prototype,"trackIdField",void 0);c.__decorate([e.property({readOnly:!0,json:{write:!1}})],b.prototype,"serverGens",void 0);c.__decorate([e.property({type:r.ofType(w.FeatureIndex),readOnly:!0})],b.prototype,"indexes",void 0);c.__decorate([e.property(m.url)],b.prototype,"url",null);c.__decorate([A.writer("url")],b.prototype,"writeUrl",null);c.__decorate([e.property({json:{origins:{service:{read:!0}},read:!1}})],b.prototype,"version",void 0);c.__decorate([h.reader("service",
"version","currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" "))],b.prototype,"readVersion",null);return b=c.__decorate([z.subclass("esri.layers.mixins.FeatureLayerBase")],b)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});