// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/sources/WFSSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/HandleOwner ../../../core/has ../../../core/Loadable ../../../core/promiseUtils ../../../core/workers/workers ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../geometry/support/typeUtils ./support/clientSideDefaults ../../ogc/wfsUtils ../../../rest/support/FeatureSet ../../../geometry/Extent".split(" "),
function(w,k,A,u,v,C,L,U,I,P,J,Q,N,M,l,Y,O,p,b){w.WFSSource=function(e){function r(){var g=e.apply(this,arguments)||this;g._connection=null;g.capabilities=Y.createCapabilities(!1,!1);g.type="wfs";g.refresh=I.debounce(async q=>{await g.load();({extent:q}=await g._connection.invoke("refresh",q));q&&(g.sourceJSON.extent=q);return{dataChanged:!0,updates:{extent:g.sourceJSON.extent}}});return g}k._inherits(r,e);var t=r.prototype;t.load=function(g){this.addResolvingPromise(this._startWorker({signal:null!=
g?g.signal:null}));return Promise.resolve(this)};t.destroy=function(){this._connection?.close();this._connection=null};t.openPorts=async function(){await this.load();return this._connection.openPorts()};t.queryFeatures=async function(g,q={}){await this.load(q);g=await this._connection.invoke("queryFeatures",g?g.toJSON():null,q);return p.fromJSON(g)};t.queryFeaturesJSON=async function(g,q={}){await this.load(q);return this._connection.invoke("queryFeatures",g?g.toJSON():null,q)};t.queryFeatureCount=
async function(g,q={}){await this.load(q);return this._connection.invoke("queryFeatureCount",g?g.toJSON():null,q)};t.queryObjectIds=async function(g,q={}){await this.load(q);return this._connection.invoke("queryObjectIds",g?g.toJSON():null,q)};t.queryExtent=async function(g,q={}){await this.load(q);g=await this._connection.invoke("queryExtent",g?g.toJSON():null,q);return{count:g.count,extent:b.fromJSON(g.extent)}};t.querySnapping=async function(g,q={}){await this.load(q);return this._connection.invoke("querySnapping",
g,q)};t._createLoadOptions=async function(g){const {url:q,customParameters:y,name:x,namespaceUri:E,spatialReference:G,fields:R,geometryType:V,swapXY:H}=this.layer;if(!q)throw new v("wfs-layer:missing-url","WFSLayer must be created with a url");this.wfsCapabilities||(this.wfsCapabilities=await O.getCapabilities(q,{customParameters:y,...g}));g="fields geometryType name namespaceUri spatialReference swapXY".split(" ").some(S=>null==this.layer[S])?await O.getWFSLayerInfo(this.wfsCapabilities,x,E,{spatialReference:G,
customParameters:y,signal:g?.signal}):{...O.prepareWFSLayerFields(R??[]),geometryType:V,name:x,namespaceUri:E,spatialReference:G,swapXY:H};const K=O.findFeatureType(this.wfsCapabilities.readFeatureTypes(),g.name,g.namespaceUri),F=l.featureGeometryTypeKebabDictionary.toJSON(g.geometryType);return{customParameters:y,featureType:K,fields:g.fields?.map(S=>S.toJSON())??[],geometryField:g.geometryField,geometryType:F,getFeatureUrl:this.wfsCapabilities.operations.GetFeature.url,getFeatureOutputFormat:this.wfsCapabilities.operations.GetFeature.outputFormat,
objectIdField:g.objectIdField,spatialReference:g.spatialReference.toJSON(),swapXY:!!g.swapXY}};t._startWorker=async function(g){const [q,y]=await I.eachAlways([this._createLoadOptions(g),P.open("WFSSourceWorker",{...g,strategy:L("feature-layers-workers")?"dedicated":"local"})]);var x=q.error||y.error||null;const E=y.value||null;if(x)throw E&&E.close(),x;x=q.value;this._connection=y.value;this.sourceJSON={extent:(await this._connection.invoke("load",x,g)).extent,fields:x.fields,geometryType:x.geometryType,
objectIdField:x.objectIdField,geometryField:x.geometryField,drawingInfo:Y.createDrawingInfo(x.geometryType),name:x.featureType.title,wfsInfo:{name:x.featureType.name,featureUrl:x.getFeatureUrl,maxFeatures:3E3,swapXY:x.swapXY,supportedSpatialReferences:x.featureType.supportedSpatialReferences,version:"2.0.0",wfsNamespace:x.featureType.namespaceUri}}};return k._createClass(r)}(C.HandleOwnerMixin(U));A.__decorate([J.property()],w.WFSSource.prototype,"capabilities",void 0);A.__decorate([J.property({constructOnly:!0})],
w.WFSSource.prototype,"layer",void 0);A.__decorate([J.property()],w.WFSSource.prototype,"sourceJSON",void 0);A.__decorate([J.property()],w.WFSSource.prototype,"type",void 0);A.__decorate([J.property()],w.WFSSource.prototype,"wfsCapabilities",void 0);w.WFSSource=A.__decorate([M.subclass("esri.layers.graphics.sources.WFSSource")],w.WFSSource);Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/wfsUtils":function(){define("exports ../../geometry ../../request ../../core/Error ../../core/iteratorUtils ../../core/promiseUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./dateUtils ./xmlUtils ../support/Field ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(w,k,A,u,v,C,L,U,I,P,J,Q,N,M,l,Y){function O(a){a=H(a);F(a);S(a);a=a.firstElementChild;const c=v.cache(b(a));return{operations:p(a),get featureTypes(){return Array.from(c())},readFeatureTypes:c}}function p(a){let c=!1;const d={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};N.visitXML(a,{OperationsMetadata:{Operation:m=>{switch(m.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:h=>{d.GetCapabilities.url=h.getAttribute("xlink:href")}}}};
case "DescribeFeatureType":return{DCP:{HTTP:{Get:h=>{d.DescribeFeatureType.url=h.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:h=>{d.GetFeature.url=h.getAttribute("xlink:href")}}},Parameter:h=>{if("outputFormat"===h.getAttribute("name"))return{AllowedValues:{Value:n=>{(n=n.textContent)&&fa.has(n.toLowerCase())&&(d.GetFeature.outputFormat=n)}}}}}}},Constraint:m=>{switch(m.getAttribute("name")){case "KVPEncoding":return{DefaultValue:h=>{c="true"===h.textContent.toLowerCase()}};
case "ImplementsResultPaging":return{DefaultValue:h=>{d.GetFeature.supportsPagination="true"===h.textContent.toLowerCase()}}}}}});if(!c)throw new u("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(null==d.GetFeature.outputFormat)throw new u("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return d}function b(a){return N.iterateXML(a,{FeatureTypeList:{FeatureType:c=>{const d={typeName:"undefined:undefined",
name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},m=new Set([4326]),h=n=>{n=parseInt(n.textContent?.match(/(?<wkid>\d+$)/i)?.groups?.wkid??"",10);Number.isNaN(n)||m.add(n)};N.visitXML(c,{Name:n=>{const {name:z,prefix:B}=K(n.textContent);d.typeName=`${B}:${z}`;d.name=z;d.namespacePrefix=B;d.namespaceUri=n.lookupNamespaceURI(B)},Abstract:n=>{d.description=n.textContent},Title:n=>{d.title=n.textContent},WGS84BoundingBox:n=>{d.extent=e(n)},DefaultSRS:h,
DefaultCRS:h,OtherSRS:h,OtherCRS:h});d.title||(d.title=d.name);d.supportedSpatialReferences.push(...m);return d}}})}function e(a){let c,d,m,h;for(const n of a.children)switch(n.localName){case "LowerCorner":[c,d]=n.textContent.split(" ").map(z=>Number.parseFloat(z));break;case "UpperCorner":[m,h]=n.textContent.split(" ").map(z=>Number.parseFloat(z))}return{xmin:c,ymin:d,xmax:m,ymax:h,spatialReference:I.WGS84}}function r(a,c,d){return v.find(a,m=>d?m.name===c&&m.namespaceUri===d:m.typeName===c||m.name===
c)}async function t(a,c,d,m={}){const {spatialReference:h=l.WGS84}=m;a=a.readFeatureTypes();d=c?r(a,c,d):a.next().value;if(null==d){if(c)throw new u("wfs-layer:feature-type-not-found",`The type '${c}' could not be found in the service`);throw new u("wfs-layer:empty-service","The service is empty");}c=new Y({...d.extent,spatialReference:h});if(!I.equals(h,I.WGS84))try{await U.initializeProjection(I.WGS84,h,void 0,m),c=U.project(c,I.WGS84)}catch{throw new u("wfs-layer:unsupported-spatial-reference",
"Projection not supported");}return{extent:c,spatialReference:h,featureType:d}}async function g(a,c,d={}){const [m,h]=await C.eachAlways([x(a.operations.DescribeFeatureType.url,c,d),y(a,c,d)]);if(m.error||h.error)throw new u("wfs-layer:getWFSLayerTypeInfo-error",`An error occurred while getting info about the feature type '${c}'`,{error:m.error||h.error});const {fields:n,errors:z}=m.value??{};a=m.value?.geometryType||h.value?.geometryType;d=h.value?.swapXY??!1;if(null==a)throw new u("wfs-layer:unknown-geometry-type",
`The geometry type could not be determined for type '${c}`,{typeName:c,geometryType:a,fields:n,errors:z});return{...q(n??[]),geometryType:a,swapXY:d}}function q(a){const c=a.find(m=>"geometry"===m.type);let d=a.find(m=>"oid"===m.type);a=a.filter(m=>"geometry"!==m.type);d||(d=new M({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),a.unshift(d));return{geometryField:c?.name??null,objectIdField:d.name,fields:a}}async function y(a,c,d={}){let m,h=!1;const [n,z]=await Promise.all([R(a.operations.GetFeature.url,
c,a.operations.GetFeature.outputFormat,{...d,count:1}),A(a.operations.GetFeature.url,{responseType:"text",query:V(c,void 0,{...d,count:1}),signal:d?.signal})]);if(a="FeatureCollection"===n.type&&n.features[0]?.geometry){m=P.featureGeometryTypeKebabDictionary.fromJSON(J.getGeometryType(a.type));switch(a.type){case "Point":var B=a.coordinates;break;case "LineString":case "MultiPoint":B=a.coordinates[0];break;case "MultiLineString":case "Polygon":B=a.coordinates[0][0];break;case "MultiPolygon":B=a.coordinates[0][0][0]}if(c=
/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(z.data))a=B[0].toFixed(3),B=B[1].toFixed(3),d=parseFloat(c[1]).toFixed(3),c=parseFloat(c[2]).toFixed(3),a===c&&B===d&&(h=!0)}return{geometryType:m,swapXY:h}}async function x(a,c,d){a=await A(a,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",TYPENAME:c,...d?.customParameters},signal:d?.signal});return E(c,a.data)}function E(a,c){const {name:d}=K(a);c=H(c);S(c);const m=v.find(N.iterateXML(c.firstElementChild,
{element:h=>({name:h.getAttribute("name"),typeName:K(h.getAttribute("type")).name})}),({name:h})=>h===d);if(null!=m){const h=v.find(N.iterateXML(c.firstElementChild,{complexType:n=>n}),n=>n.getAttribute("name")===m.typeName);if(null!=h)return G(h)}throw new u("wfs-layer:feature-type-not-found",`Type '${a}' not found in document`,{document:(new XMLSerializer).serializeToString(c)});}function G(a){const c=[],d=[];let m=void 0;var h=N.iterateXML(a,{complexContent:{extension:{sequence:{element:n=>n}}}});
for(const n of h){h=n.getAttribute("name");if(!h)continue;let z,B;n.hasAttribute("type")?z=K(n.getAttribute("type")).name:N.visitXML(n,{simpleType:{restriction:ba=>{z=K(ba.getAttribute("base")).name;return{maxLength:ca=>{B=+ca.getAttribute("value")}}}}});if(!z)continue;const Z="true"===n.getAttribute("nillable");let W=!1;switch(z.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":d.push(new M({name:h,
alias:h,type:"integer",nullable:Z}));break;case "float":case "double":case "decimal":d.push(new M({name:h,alias:h,type:"double",nullable:Z}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":d.push(new M({name:h,
alias:h,type:"string",nullable:Z,length:B??255}));break;case "datetime":case "date":d.push(new M({name:h,alias:h,type:"date",nullable:Z,length:B??36}));break;case "pointpropertytype":m="point";W=!0;break;case "multipointpropertytype":m="multipoint";W=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":m="polyline";W=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":m="polygon";W=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":W=
!0;c.push(new u("wfs-layer:unknown-geometry-type",`geometry type '${z}' is not supported`,{type:(new XMLSerializer).serializeToString(a)}));break;default:c.push(new u("wfs-layer:unknown-field-type",`Unknown field type '${z}'`,{type:(new XMLSerializer).serializeToString(a)}))}W&&d.push(new M({name:h,alias:h,type:"geometry",nullable:Z}))}for(const n of d)if("integer"===n.type&&!n.nullable&&ha.has(n.name.toLowerCase())){n.type="oid";break}return{geometryType:m,fields:d,errors:c}}async function R(a,c,
d,m){({data:a}=await A(a,{responseType:"text",query:V(c,d,m),signal:m?.signal}));a=a.replaceAll(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{if(m?.dateFields?.length){const h=new Set(m.dateFields);return JSON.parse(a,(n,z)=>h.has(n)?Q.parseDate(z):z)}return JSON.parse(a)}catch(h){throw new u("wfs-layer:malformed-json","Error while parsing the\u00a0response",{response:a,error:h});}}function V(a,c,d){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:a,OUTPUTFORMAT:c,SRSNAME:"EPSG:4326",
STARTINDEX:d?.startIndex,COUNT:d?.count,...d?.customParameters}}function H(a){return(new DOMParser).parseFromString(a.trim(),"text/xml")}function K(a){const [c,d]=a.split(":");return{prefix:d?c:"",name:d??c}}function F(a){if((a=a.firstElementChild?.getAttribute("version"))&&"2.0.0"!==a)throw new u("wfs-layer:unsupported-wfs-version",`Unsupported WFS version ${a}. Supported version: ${"2.0.0"}`);}function S(a){let c="",d="";N.visitXML(a.firstElementChild,{Exception:m=>{c=m.getAttribute("exceptionCode");
return{ExceptionText:h=>{d=h.textContent}}}});if(c)throw new u(`wfs-layer:${c}`,d);}const fa=new Set(["json","application/json","geojson","application/json; subtype\x3dgeojson"]),ha=new Set(["objectid","fid"]);w.WFS_OID_FIELD_NAME="__esri_wfs_id__";w.describeFeatureType=x;w.findFeatureType=r;w.getCapabilities=async function(a,c){c=await A(a,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...c?.customParameters},signal:c?.signal});c=O(c.data);L.isHTTPSProtocol(a)&&
(L.hasSameOrigin(a,c.operations.DescribeFeatureType.url,!0)&&(c.operations.DescribeFeatureType.url=L.toHTTPS(c.operations.DescribeFeatureType.url)),L.hasSameOrigin(a,c.operations.GetFeature.url,!0)&&(c.operations.GetFeature.url=L.toHTTPS(c.operations.GetFeature.url)));return c};w.getFeature=R;w.getFeatureCount=async function(a,c,d){a=await A(a,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:c,RESULTTYPE:"hits",...d?.customParameters},signal:d?.signal});a=H(a.data);
S(a);a=Number.parseFloat(a.firstElementChild.getAttribute("numberMatched"));return Number.isNaN(a)?0:a};w.getFeatureTypeInfo=t;w.getWFSLayerInfo=async function(a,c,d,m={}){const {featureType:h,extent:n}=await t(a,c,d,m),{fields:z,geometryType:B,swapXY:Z,objectIdField:W,geometryField:ba}=await g(a,h.typeName,m);return{url:a.operations.GetCapabilities.url,name:h.name,namespaceUri:h.namespaceUri,fields:z,geometryField:ba,geometryType:B,objectIdField:W,spatialReference:m.spatialReference??l.WGS84,extent:n,
swapXY:Z,wfsCapabilities:a,customParameters:m.customParameters}};w.parseDescribeFeatureTypeResponse=E;w.parseGetCapabilitiesResponse=O;w.prepareWFSLayerFields=q;Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(w,k,A,u,v){function*C(b){switch(b.type){case "Feature":yield b;break;case "FeatureCollection":for(const e of b.features)e&&
(yield e)}}function*L(b){if(b)switch(b.type){case "Point":yield b.coordinates;break;case "LineString":case "MultiPoint":yield*b.coordinates;break;case "MultiLineString":case "Polygon":for(const e of b.coordinates)yield*e;break;case "MultiPolygon":for(const e of b.coordinates)for(const r of e)yield*r}}function*U(b,e={}){const {geometryType:r,objectIdField:t}=e;for(const g of b){const {geometry:q,properties:y,id:x}=g;if(q&&p[q.type]!==r)continue;b=y||{};let E=void 0;t&&(E=b[t],null==x||E||(b[t]=E=x));
yield new A.OptimizedFeature(q?Q(new u,q,e):null,b,null,E??void 0)}}function I(b){for(const e of b)if(2<e.length)return!0;return!1}function P(b){let e=0;for(let r=0;r<b.length;r++){const t=b[r],g=b[(r+1)%b.length];e+=t[0]*g[1]-g[0]*t[1]}return 0>=e}function J(b){const e=b[0],r=b[b.length-1];e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]||b.push(e);return b}function Q(b,e,r){switch(e.type){case "LineString":return l(b,e.coordinates,r),b;case "MultiLineString":for(const g of e.coordinates)l(b,g,r);return b;
case "MultiPoint":return l(b,e.coordinates,r),b;case "MultiPolygon":for(var t of e.coordinates)for(N(b,t[0],r),e=1;e<t.length;e++)M(b,t[e],r);return b;case "Point":return O(b,e.coordinates,r),b;case "Polygon":t=e.coordinates;N(b,t[0],r);for(e=1;e<t.length;e++)M(b,t[e],r);return b}}function N(b,e,r){e=J(e);P(e)?l(b,e,r):Y(b,e,r)}function M(b,e,r){e=J(e);P(e)?Y(b,e,r):l(b,e,r)}function l(b,e,r){for(const t of e)O(b,t,r);b.lengths.push(e.length)}function Y(b,e,r){for(let t=e.length-1;0<=t;t--)O(b,e[t],
r);b.lengths.push(e.length)}function O(b,e,r){const [t,g,q]=e;b.coords.push(t,g);r.hasZ&&b.coords.push(q||0)}const p={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};w.createOptimizedFeatures=function(b,e){return Array.from(U(C(b),e))};w.getGeometryType=function(b){return p[b]};w.inferLayerProperties=function(b,e={}){const r=[];var t=new Set;const g=
new Set;var q=!1;let y=null,x=!1,E=void 0;({geometryType:e=null}=e);var G=!1;for(const R of C(b)){const {geometry:V,properties:H,id:K}=R;if(V&&(e||(e=p[V.type]),p[V.type]!==e))continue;q||(q=L(V),q=I(q));!x&&(x=null!=K)&&(E=typeof K,H&&(y=Object.keys(H).filter(F=>H[F]===K)));H&&y&&x&&null!=K&&(1<y.length?y=y.filter(F=>H[F]===K):1===y.length&&(y=H[y[0]]===K?y:[]));if(!G&&H){b=!0;for(const F in H){if(t.has(F))continue;G=H[F];if(null==G){b=!1;g.add(F);continue}a:switch(typeof G){case "string":G="esriFieldTypeString";
break a;case "number":G="esriFieldTypeDouble";break a;default:G="unknown"}if("unknown"===G){g.add(F);continue}g.delete(F);t.add(F);const S=v.normalizeFieldName(F);S&&r.push({name:S,alias:F,type:G})}G=b}}if(t=v.normalizeFieldName(1===y?.length&&y[0]||null)??void 0)for(const R of r)if(R.name===t&&v.isNumericField(R)){R.type="esriFieldTypeOID";break}return{fields:r,geometryType:e,hasZ:q,objectIdFieldName:t,objectIdFieldType:E,unknownFields:Array.from(g)}};w.validateGeoJSON=function(b){if(!b)throw new k("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==b.type&&"FeatureCollection"!==b.type)throw new k("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:b});({crs:b}=b);if(b){var e="string"===typeof b?b:"name"===b.type?b.properties.name:"EPSG"===b.type?b.properties.code:null,r=RegExp(".*(CRS84H?|4326)$","i");if(!e||!r.test(e))throw new k("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:b});}};Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/ogc/dateUtils":function(){define(["exports"],function(w){function k(u){u=(new Date(u)).getTime();return Number.isNaN(u)?null:u}const A=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;w.parseDate=function(u){var v=A.exec(u);if(v?.groups){v=v.groups;var C=+v.year,L=+v.month-1,U=+v.day,I=+(v.hours??0),P=+(v.minutes??0),J=+(v.seconds??
0);if(23<I||59<P||59<J)v=null;else{var Q=v.ms??"0";Q=Q?+Q.padEnd(3,"0").substring(0,3):0;v=v.isUTC?Date.UTC(C,L,U,I,P,J,Q):v.offsetSign?6E4*("+"===v.offsetSign?-1:1)*(60*+v.offsetHours+ +v.offsetMinutes)+Date.UTC(C,L,U,I,P,J,Q):(new Date(C,L,U,I,P,J,Q)).getTime();v=Number.isNaN(v)?null:v}}else v=null;return v??k(u)};w.parseJSDate=k;Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(w){function k(u,v){if(u&&v)for(const C of u.children)C.localName in
v&&(u=v[C.localName],"function"===typeof u?(u=u(C))&&k(C,u):k(C,u))}function*A(u,v){for(const C of u.children)C.localName in v&&(u=v[C.localName],"function"===typeof u?yield u(C):yield*A(C,u))}w.iterateXML=A;w.visitXML=k;Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../geometry ../PopupTemplate ../renderers/ClassBreaksRenderer ../renderers/DictionaryRenderer ../renderers/DotDensityRenderer ../renderers/HeatmapRenderer ../renderers/PieChartRenderer ../renderers/Renderer ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/support/jsonUtils ../renderers/support/types ../core/MultiOriginJSONSupport ../core/object ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/support/typeUtils ./Layer ./graphics/sources/WFSSource ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/FeatureEffectLayer ./mixins/FeatureReductionLayer ./mixins/OperationalLayer ./mixins/OrderedLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./ogc/wfsUtils ./support/commonProperties ./support/Field ./support/fieldProperties ./support/fieldUtils ./support/LabelClass ./support/labelingInfo ../rest/support/Query ../support/popupUtils ../geometry/SpatialReference ../geometry/Extent".split(" "),function(w,
k,A,u,v,C,L,U,I,P,J,Q,N,M,l,Y,O,p,b,e,r,t,g,q,y,x,E,G,R,V,H,K,F,S,fa,ha,a,c,d,m,h,n,z,B,Z,W,ba){var ca;A=m.defineFieldProperties();l=ca=function(da){function ea(f){f=da.call(this,f)||this;f.copyright=null;f.customParameters=null;f.definitionExpression=null;f.displayField=null;f.elevationInfo=null;f.featureUrl=void 0;f.fields=null;f.fieldsIndex=null;f.fullExtent=null;f.geometryType=null;f.labelsVisible=!0;f.labelingInfo=null;f.legendEnabled=!0;f.objectIdField=null;f.operationalLayerType="WFS";f.maxFeatures=
3E3;f.mode=0;f.name=null;f.namespaceUri=null;f.outFields=null;f.popupEnabled=!0;f.popupTemplate=null;f.screenSizePerspectiveEnabled=!0;f.source=new x.WFSSource({layer:w._assertThisInitialized(f)});f.spatialReference=W.WGS84;f.spatialReferences=[4326];f.swapXY=void 0;f.title="WFS";f.type="wfs";f.url=null;f.version=void 0;return f}w._inherits(ea,da);ea.fromWFSLayerInfo=function(f){const {customParameters:D,fields:X,geometryField:aa,geometryType:ia,name:ja,namespaceUri:ka,objectIdField:la,spatialReference:ma,
swapXY:na,url:oa,wfsCapabilities:pa}=f;return new ca({customParameters:D,fields:X,geometryField:aa,geometryType:ia,name:ja,namespaceUri:ka,objectIdField:la,spatialReference:ma,swapXY:na,url:oa,wfsCapabilities:pa})};var T=ea.prototype;T.destroy=function(){this.source?.destroy()};T.load=function(f){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WFS"]},f).then(()=>this.source.load(f)).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl});this.revert("objectIdField fields timeInfo spatialReference name namespaceUri".split(" "),
"service");h.fixRendererFields(this.renderer,this.fieldsIndex);h.fixTimeInfoFields(this.timeInfo,this.fieldsIndex)}));return Promise.resolve(this)};T.writeFields=function(f,D,X){f=f.filter(aa=>aa.name!==a.WFS_OID_FIELD_NAME);this.geometryField&&f.unshift(new d({name:this.geometryField,alias:this.geometryField,type:"geometry"}));Y.setDeepValue(X,f.map(aa=>aa.toJSON()),D)};T.createPopupTemplate=function(f){return Z.createPopupTemplate(this,f)};T.createQuery=function(){const f=new B;f.returnGeometry=
!0;f.outFields=["*"];f.where=this.definitionExpression||"1\x3d1";const {timeOffset:D,timeExtent:X}=this;f.timeExtent=null!=D&&null!=X?X.offset(-D.value,D.unit):X||null;return f};T.getFieldDomain=function(f,D){return this.getField(f)?.domain};T.getField=function(f){return this.fieldsIndex?.get(f)};T.queryFeatures=function(f,D){return this.load().then(()=>this.source.queryFeatures(B.from(f)||this.createQuery(),D)).then(X=>{if(X?.features)for(const aa of X.features)aa.layer=aa.sourceLayer=this;return X})};
T.queryObjectIds=function(f,D){return this.load().then(()=>this.source.queryObjectIds(B.from(f)||this.createQuery(),D))};T.queryFeatureCount=function(f,D){return this.load().then(()=>this.source.queryFeatureCount(B.from(f)||this.createQuery(),D))};T.queryExtent=function(f,D){return this.load().then(()=>this.source.queryExtent(B.from(f)||this.createQuery(),D))};T.hasDataChanged=async function(){try{const {dataChanged:f,updates:D}=await this.source.refresh(this.customParameters);null!=D&&this.read(D,
{origin:"service",url:this.parsedUrl,ignoreDefaults:!0});return f}catch{}return!1};w._createClass(ea,[{key:"capabilities",get:function(){return this.source?.capabilities}},{key:"createQueryVersion",get:function(){this.commitProperty("definitionExpression");this.commitProperty("timeExtent");this.commitProperty("timeOffset");this.commitProperty("geometryType");this.commitProperty("capabilities");return(this._get("createQueryVersion")||0)+1}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},
{key:"parsedUrl",get:function(){return O.urlToObject(this.url)}},{key:"renderer",set:function(f){h.fixRendererFields(f,this.fieldsIndex);this._set("renderer",f)}},{key:"wfsCapabilities",get:function(){return this.source?.wfsCapabilities},set:function(f){this.source&&(this.source.wfsCapabilities=f)}}]);return ea}(K.OrderedLayer(G.CustomParametersMixin(V.FeatureReductionLayer(R.FeatureEffectLayer(E.BlendLayer(ha.TemporalLayer(S.RefreshableLayer(fa.ScaleRangeLayer(H.OperationalLayer(F.PortalLayer(l.MultiOriginJSONMixin(y))))))))))));
k.__decorate([p.property({readOnly:!0})],l.prototype,"capabilities",null);k.__decorate([p.property({type:String})],l.prototype,"copyright",void 0);k.__decorate([p.property({readOnly:!0})],l.prototype,"createQueryVersion",null);k.__decorate([p.property({json:{name:"wfsInfo.customParameters",write:{overridePolicy(da){return{enabled:!!(da&&0<Object.keys(da).length),ignoreOrigin:!0}}}}})],l.prototype,"customParameters",void 0);k.__decorate([p.property({readOnly:!0})],l.prototype,"defaultPopupTemplate",
null);k.__decorate([p.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],l.prototype,"definitionExpression",void 0);k.__decorate([p.property({type:String})],l.prototype,"displayField",void 0);k.__decorate([p.property(c.elevationInfo)],l.prototype,"elevationInfo",void 0);k.__decorate([p.property({type:String,readOnly:!0,json:{name:"wfsInfo.featureUrl",write:{ignoreOrigin:!0,isRequired:!0}}})],l.prototype,"featureUrl",void 0);k.__decorate([p.property({type:[d],
json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],l.prototype,"fields",void 0);k.__decorate([g.writer("fields")],l.prototype,"writeFields",null);k.__decorate([p.property(A.fieldsIndex)],l.prototype,"fieldsIndex",void 0);k.__decorate([p.property({type:ba,json:{name:"extent"}})],l.prototype,"fullExtent",void 0);k.__decorate([p.property()],l.prototype,"geometryField",void 0);k.__decorate([p.property({type:String,json:{read:{source:"layerDefinition.geometryType",
reader:q.featureGeometryTypeKebabDictionary.read},write:{target:"layerDefinition.geometryType",writer:q.featureGeometryTypeKebabDictionary.write,ignoreOrigin:!0},origins:{service:{read:q.featureGeometryTypeKebabDictionary.read}}}})],l.prototype,"geometryType",void 0);k.__decorate([p.property({type:String})],l.prototype,"id",void 0);k.__decorate([p.property(c.labelsVisible)],l.prototype,"labelsVisible",void 0);k.__decorate([p.property({type:[n],json:{name:"layerDefinition.drawingInfo.labelingInfo",
read:{reader:z.reader},write:!0}})],l.prototype,"labelingInfo",void 0);k.__decorate([p.property(c.legendEnabled)],l.prototype,"legendEnabled",void 0);k.__decorate([p.property({type:["show","hide"]})],l.prototype,"listMode",void 0);k.__decorate([p.property({type:String})],l.prototype,"objectIdField",void 0);k.__decorate([p.property({type:["WFS"]})],l.prototype,"operationalLayerType",void 0);k.__decorate([p.property({type:b.Integer,json:{name:"wfsInfo.maxFeatures",write:{ignoreOrigin:!0,isRequired:!0}}})],
l.prototype,"maxFeatures",void 0);k.__decorate([p.property({type:[0],readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],l.prototype,"mode",void 0);k.__decorate([p.property({type:String,json:{name:"wfsInfo.name",write:{ignoreOrigin:!0,isRequired:!0}}})],l.prototype,"name",void 0);k.__decorate([p.property({type:String,json:{name:"wfsInfo.wfsNamespace",write:{ignoreOrigin:!0,isRequired:!0}}})],l.prototype,"namespaceUri",void 0);k.__decorate([p.property(c.opacityDrawingInfo)],
l.prototype,"opacity",void 0);k.__decorate([p.property(A.outFields)],l.prototype,"outFields",void 0);k.__decorate([p.property({readOnly:!0})],l.prototype,"parsedUrl",null);k.__decorate([p.property(c.popupEnabled)],l.prototype,"popupEnabled",void 0);k.__decorate([p.property({type:u,json:{name:"popupInfo",write:!0}})],l.prototype,"popupTemplate",void 0);k.__decorate([p.property({types:M.rendererTypes,json:{origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:M.webSceneRendererTypes,name:"layerDefinition.drawingInfo.renderer",
write:!0}},name:"layerDefinition.drawingInfo.renderer",write:{ignoreOrigin:!0}}})],l.prototype,"renderer",null);k.__decorate([p.property(c.screenSizePerspectiveEnabled)],l.prototype,"screenSizePerspectiveEnabled",void 0);k.__decorate([p.property({readOnly:!0})],l.prototype,"source",void 0);k.__decorate([p.property({type:W,json:{name:"layerDefinition.spatialReference",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"extent.spatialReference"}}}})],l.prototype,"spatialReference",void 0);
k.__decorate([p.property({readOnly:!0,type:[b.Integer],json:{name:"wfsInfo.supportedSpatialReferences",write:{ignoreOrigin:!0,isRequired:!0}}})],l.prototype,"spatialReferences",void 0);k.__decorate([p.property({type:Boolean,value:!1,json:{name:"wfsInfo.swapXY",write:{ignoreOrigin:!0,isRequired:!0}}})],l.prototype,"swapXY",void 0);k.__decorate([p.property({json:{write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"name"}}}})],l.prototype,"title",void 0);k.__decorate([p.property({json:{read:!1},
readOnly:!0})],l.prototype,"type",void 0);k.__decorate([p.property(c.url)],l.prototype,"url",void 0);k.__decorate([p.property({type:String,readOnly:!0,json:{name:"wfsInfo.version",write:{ignoreOrigin:!0,isRequired:!0}}})],l.prototype,"version",void 0);k.__decorate([p.property()],l.prototype,"wfsCapabilities",null);return l=ca=k.__decorate([t.subclass("esri.layers.WFSLayer")],l)});