// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../geometry ../request ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./support/fromPortalItem ../geometry/Extent ../geometry/SpatialReference".split(" "),function(m,h,c,b,n,p,q,r,t,u,v,w,d,C,D,E,x,y,k,
f){let z=0;b=function(l){function e(){var a=l.apply(this,arguments)||this;a.attributionDataUrl=null;a.fullExtent=new k(-180,-90,180,90,f.WGS84);a.id=Date.now().toString(16)+"-layer-"+z++;a.legendEnabled=!0;a.listMode="show";a.opacity=1;a.parent=null;a.popupEnabled=!0;a.attributionVisible=!0;a.spatialReference=f.WGS84;a.title=null;a.type=null;a.url=null;a.visible=!0;return a}h._inherits(e,l);e.fromArcGISServerUrl=async function(a){a="string"===typeof a?{url:a}:a;return(await new Promise((A,B)=>m(["./support/arcgisLayers"],
A,B))).fromUrl(a)};e.fromPortalItem=function(a){return y.fromPortalItem(a)};var g=e.prototype;g.initialize=function(){this.when().catch(a=>{v.isAbortError(a)||u.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:a})})};g.destroy=function(){if(this.parent){const a=this.parent;"layers"in a&&a.layers.includes(this)?a.layers.remove(this):"tables"in a&&a.tables.includes(this)?a.tables.remove(this):"baseLayers"in a&&a.baseLayers.includes(this)?
a.baseLayers.remove(this):"baseLayers"in a&&a.referenceLayers.includes(this)&&a.referenceLayers.remove(this)}};g.fetchAttributionData=async function(){const a=this.attributionDataUrl;if(this.hasAttributionData&&a)return(await n(a,{query:{f:"json"},responseType:"json"})).data;throw new p("layer:no-attribution-data","Layer does not have attribution data");};h._createClass(e,[{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){return w.urlToObject(this.url)}}]);
return e}(q.EventedMixin(r.IdentifiableMixin(t)));c.__decorate([d.property({type:String})],b.prototype,"attributionDataUrl",void 0);c.__decorate([d.property({type:k})],b.prototype,"fullExtent",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"hasAttributionData",null);c.__decorate([d.property({type:String,clonable:!1})],b.prototype,"id",void 0);c.__decorate([d.property({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0);c.__decorate([d.property({type:["show","hide","hide-children"]})],
b.prototype,"listMode",void 0);c.__decorate([d.property({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0);c.__decorate([d.property({clonable:!1})],b.prototype,"parent",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"parsedUrl",null);c.__decorate([d.property({type:Boolean})],b.prototype,"popupEnabled",void 0);c.__decorate([d.property({type:Boolean})],b.prototype,"attributionVisible",void 0);c.__decorate([d.property({type:f})],b.prototype,"spatialReference",
void 0);c.__decorate([d.property({type:String})],b.prototype,"title",void 0);c.__decorate([d.property({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0);c.__decorate([d.property()],b.prototype,"url",void 0);c.__decorate([d.property({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0);return b=c.__decorate([x.subclass("esri.layers.Layer")],b)});