// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(u,n,m,q,D,E,F,z,v,A,w,B,x,C){function r(c,d,g){const {x:a,y:b}=d;if(2>g)return{x:c[0]+a*c[2]+b*c[4],y:c[1]+a*c[3]+b*c[5]};if(2===g){d=a*a;g=b*b;var e=a*b;return{x:c[0]+a*c[2]+b*c[4]+d*c[6]+e*c[8]+g*c[10],y:c[1]+a*c[3]+b*c[5]+d*c[7]+e*c[9]+g*c[11]}}d=a*a;g=b*b;e=a*b;const f=d*a,h=d*b,k=a*g,l=b*g;return{x:c[0]+a*c[2]+b*c[4]+d*c[6]+e*c[8]+g*c[10]+f*c[12]+h*c[14]+k*c[16]+l*c[18],y:c[1]+a*c[3]+b*c[5]+d*c[7]+e*c[9]+g*c[11]+f*c[13]+h*c[15]+k*c[17]+l*c[19]}}function y(c,d,g){const {xmin:a,ymin:b,
xmax:e,ymax:f,spatialReference:h}=d;d=[];if(2>g)d.push({x:a,y:f}),d.push({x:e,y:f}),d.push({x:a,y:b}),d.push({x:e,y:b});else{var k=10;for(var l=0;l<k;l++)d.push({x:a,y:b+(f-b)*l/(k-1)}),d.push({x:e,y:b+(f-b)*l/(k-1)});k=8;for(l=1;l<=k;l++)d.push({x:a+(e-a)*l/k,y:b}),d.push({x:a+(e-a)*l/k,y:f})}d=d.map(p=>r(c,p,g));k=d.map(p=>p.x);d=d.map(p=>p.y);return new C({xmin:Math.min.apply(null,k),xmax:Math.max.apply(null,k),ymin:Math.min.apply(null,d),ymax:Math.max.apply(null,d),spatialReference:h})}var t;
m=t=function(c){function d(){var a=c.apply(this,arguments)||this;a.polynomialOrder=1;a.type="polynomial";return a}u._inherits(d,c);var g=d.prototype;g.readForwardCoefficients=function(a,b){const {coeffX:e,coeffY:f}=b;if(!e?.length||!f?.length||e.length!==f.length)return null;a=[];for(b=0;b<e.length;b++)a.push(e[b]),a.push(f[b]);return a};g.writeForwardCoefficients=function(a,b,e){e=[];const f=[];for(let h=0;h<a?.length;h++)0===h%2?e.push(a[h]):f.push(a[h]);b.coeffX=e;b.coeffY=f};g.readInverseCoefficients=
function(a,b){const {inverseCoeffX:e,inverseCoeffY:f}=b;if(!e?.length||!f?.length||e.length!==f.length)return null;a=[];for(b=0;b<e.length;b++)a.push(e[b]),a.push(f[b]);return a};g.writeInverseCoefficients=function(a,b,e){e=[];const f=[];for(let h=0;h<a?.length;h++)0===h%2?e.push(a[h]):f.push(a[h]);b.inverseCoeffX=e;b.inverseCoeffY=f};g.forwardTransform=function(a){if("point"===a.type){const b=r(this.forwardCoefficients,a,this.polynomialOrder);return new x({x:b.x,y:b.y,spatialReference:a.spatialReference})}return y(this.forwardCoefficients,
a,this.polynomialOrder)};g.inverseTransform=function(a){if("point"===a.type){const b=r(this.inverseCoefficients,a,this.polynomialOrder);return new x({x:b.x,y:b.y,spatialReference:a.spatialReference})}return y(this.inverseCoefficients,a,this.polynomialOrder)};g.clone=function(){return new t({polynomialOrder:this.polynomialOrder,forwardCoefficients:this.forwardCoefficients?[...this.forwardCoefficients]:null,inverseCoefficients:this.inverseCoefficients?[...this.inverseCoefficients]:null})};u._createClass(d,
[{key:"inverseCoefficients",get:function(){var a=this._get("inverseCoefficients"),b=this._get("forwardCoefficients");if(!a&&b&&2>this.polynomialOrder){const [e,f,h,k,l,p]=b;a=h*p-l*k;b=l*k-h*p;a=[(l*f-e*p)/a,(h*f-e*k)/b,p/a,k/b,-l/a,-h/b]}return a},set:function(a){this._set("inverseCoefficients",a)}},{key:"affectsPixelSize",get:function(){return 0<this.polynomialOrder}}]);return d}(B);n.__decorate([q.property({json:{write:!0}})],m.prototype,"polynomialOrder",void 0);n.__decorate([q.property()],m.prototype,
"forwardCoefficients",void 0);n.__decorate([v.reader("forwardCoefficients",["coeffX","coeffY"])],m.prototype,"readForwardCoefficients",null);n.__decorate([w.writer("forwardCoefficients")],m.prototype,"writeForwardCoefficients",null);n.__decorate([q.property({json:{write:!0}})],m.prototype,"inverseCoefficients",null);n.__decorate([v.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],m.prototype,"readInverseCoefficients",null);n.__decorate([w.writer("inverseCoefficients")],m.prototype,
"writeInverseCoefficients",null);n.__decorate([q.property()],m.prototype,"affectsPixelSize",null);n.__decorate([z.enumeration({PolynomialXform:"polynomial"})],m.prototype,"type",void 0);return m=t=n.__decorate([A.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],m)});