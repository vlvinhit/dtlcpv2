// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers","./GeographicTransformationStep"],function(N,g){return function(){function F(t){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(t&&t.steps)for(const W of t.steps)W instanceof g?this.steps.push(W):this.steps.push(new g({wkid:W.wkid,wkt:W.wkt,isInverse:W.isInverse}))}F.cacheKey=function(t,W){return[void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():
"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():"",void 0!==W.wkid&&null!==W.wkid?W.wkid.toString():"-1",void 0!==W.wkt&&null!==W.wkt?W.wkt.toString():""].join()};F.fromGE=function(t){const W=new F;let ba="";for(const R of t.steps)t=g.fromGE(R),W.steps.push(t),ba+=t.uid.toString()+",";W._cachedProjection={};W._gtlistentry=null;W._chain=ba;return W};var C=F.prototype;C.getInverse=function(){const t=new F;t.steps=[];for(let W=this.steps.length-1;0<=W;W--)t.steps.push(this.steps[W].getInverse());
return t};C.getGTListEntry=function(){let t="";for(const W of this.steps)t+=W.uid.toString()+",";t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t);return this._gtlistentry};C.assignCachedGe=function(t,W,ba){this._cachedProjection[F.cacheKey(t,W)]=ba};C.getCachedGeTransformation=function(t,W){let ba="";for(const R of this.steps)ba+=R.uid.toString()+",";ba!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=ba);t=this._cachedProjection[F.cacheKey(t,
W)];return void 0===t?null:t};return N._createClass(F)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(N){let g=0;return function(){function F(C){this.uid=g++;C?(this._wkt=null!=C.wkt?C.wkt:null,this._wkid=null!=C.wkid?C.wkid:-1,this._isInverse=null!=C.isInverse?!0===C.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}F.fromGE=function(C){const t=new F;t._wkt=C.wkt;t._wkid=C.wkid;t._isInverse=C.isInverse;
return t};F.prototype.getInverse=function(){const C=new F;C._wkt=this.wkt;C._wkid=this._wkid;C._isInverse=!this.isInverse;return C};N._createClass(F,[{key:"wkt",get:function(){return this._wkt},set:function(C){this._wkt=C;this.uid=g++}},{key:"wkid",get:function(){return this._wkid},set:function(C){this._wkid=C;this.uid=g++}},{key:"isInverse",get:function(){return this._isInverse},set:function(C){this._isInverse=C;this.uid=g++}}]);return F}()})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./SimpleBandStatistics ./rasterFormats/pixelRangeUtils".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T){var J;C=J=function(w){function z(f){f=w.call(this,f)||this;f.width=null;f.height=null;f.pixelType="f32";f.validPixelCount=null;f.mask=null;f.maskIsAlpha=!1;f.premultiplyAlpha=!1;f.statistics=null;f.depthCount=1;return f}N._inherits(z,w);z.createEmptyBand=function(f,m){return new (J.getPixelArrayConstructor(f))(m)};z.getPixelArrayConstructor=function(f){let m;switch(f){case "u1":case "u2":case "u4":case "u8":m=Uint8Array;break;case "u16":m=Uint16Array;break;case "u32":m=
Uint32Array;break;case "s8":m=Int8Array;break;case "s16":m=Int16Array;break;case "s32":m=Int32Array;break;case "f32":m=Float32Array;break;case "f64":m=Float64Array;break;case "c64":case "c128":case "unknown":m=Float32Array}return m};var n=z.prototype;n.castPixelType=function(f){if(!f)return"f32";f=f.toLowerCase();["u1","u2","u4"].includes(f)?f="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(f)||(f="f32");return f};n.getPlaneCount=function(){return this.pixels?.length};n.addData=function(f){if(!f.pixels||
f.pixels.length!==this.width*this.height)throw new F("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(f.pixels);this.statistics.push(f.statistics??new M.SimpleBandStatistics)};n.getAsRGBA=function(){const f=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(f);
break;default:this._fillFrom8Bit(f)}return new Uint8ClampedArray(f)};n.getAsRGBAFloat=function(){const f=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(f);return f};n.updateStatistics=function(){if(this.pixels){this.statistics=this.pixels.map(r=>this._calculateBandStatistics(r,this.mask));var f=this.mask,m=0;if(null!=f)for(let r=0;r<f.length;r++)f[r]&&m++;else m=this.width*this.height;this.validPixelCount=m}};n.clamp=function(f){if(f&&"f64"!==f&&"f32"!==f&&this.pixels){var [m,r]=T.getPixelValueRange(f),
l=this.pixels,b=this.width*this.height,a=l.length,c=[];for(let k=0;k<a;k++){var d=J.createEmptyBand(f,b);var h=l[k];for(let v=0;v<b;v++){var u=h[v];d[v]=u>r?r:u<m?m:u}c.push(d)}this.pixels=c;this.pixelType=f}};n.extractBands=function(f){const {pixels:m,statistics:r}=this;if(null==f||0===f.length||!m||0===m.length)return this;var l=m.length,b=f.some(k=>k>=m.length),a=l===f.length&&!f.some((k,v)=>k!==v);if(b||a)return this;l=this.bandMasks?.length===l?f.map(k=>this.bandMasks[k]):void 0;let {mask:c,
validPixelCount:d}=this;const {width:h,height:u}=this;if(l){if(1===l.length)c=l[0];else for(b=h*u,c=(new Uint8Array(b)).fill(255),a=0;a<l.length;a++){const k=l[a];for(let v=0;v<b;v++)k[v]||(c[v]=0)}d=c.filter(k=>!!k).length}return new J({pixelType:this.pixelType,width:h,height:u,mask:c,bandMasks:l,validPixelCount:d,maskIsAlpha:this.maskIsAlpha,pixels:f.map(k=>m[k]),statistics:r&&f.map(k=>r[k])})};n.clone=function(){const f=new J({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,
validPixelCount:this.validPixelCount});null!=this.mask&&(f.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));this.bandMasks&&(f.bandMasks=this.bandMasks.map(l=>new Uint8Array(l)));let m;const r=J.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){f.pixels=[];const l=!!this.pixels[0].slice;for(m=0;m<this.pixels.length;m++)f.pixels[m]=l?this.pixels[m].slice(0,this.pixels[m].length):new r(this.pixels[m])}if(this.statistics)for(f.statistics=
[],m=0;m<this.statistics.length;m++)f.statistics[m]=t.clone(this.statistics[m]);f.premultiplyAlpha=this.premultiplyAlpha;return f};n._fillFrom8Bit=function(f){const {mask:m,maskIsAlpha:r,premultiplyAlpha:l,pixels:b}=this;if(f&&b&&b.length){var a,c;var d=a=c=b[0];3<=b.length?(a=b[1],c=b[2]):2===b.length&&(a=b[1]);var h=new Uint32Array(f),u=this.width*this.height;if(d.length!==u)W.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(null!=m&&m.length===
u)if(r)for(f=0;f<u;f++){const k=m[f];if(k){const v=k/255;h[f]=l?k<<24|c[f]*v<<16|a[f]*v<<8|d[f]*v:k<<24|c[f]<<16|a[f]<<8|d[f]}}else for(f=0;f<u;f++)m[f]&&(h[f]=-16777216|c[f]<<16|a[f]<<8|d[f]);else for(f=0;f<u;f++)h[f]=-16777216|c[f]<<16|a[f]<<8|d[f]}else W.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};n._fillFromNon8Bit=function(f){const {pixels:m,mask:r,statistics:l}=this;if(f&&m&&m.length){var b=this.pixelType,a=1,c=0;a=1;if(l&&0<l.length){for(var d of l)null!=
d.minValue&&(c=Math.min(c,d.minValue)),null!=d.maxValue&&null!=d.minValue&&(a=Math.max(a,d.maxValue-d.minValue));a=255/a}else a=255,"s8"===b?(c=-128,a=127):"u16"===b?a=65535:"s16"===b?(c=-32768,a=32767):"u32"===b?a=4294967295:"s32"===b?(c=-2147483648,a=2147483647):"f32"===b?(c=-3.4*1E39,a=3.4*1E39):"f64"===b&&(c=-Number.MAX_VALUE,a=Number.MAX_VALUE),a=255/(a-c);f=new Uint32Array(f);b=this.width*this.height;var h,u,k;d=h=u=m[0];if(d.length!==b)return W.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");
if(2<=m.length)if(h=m[1],3<=m.length&&(u=m[2]),null!=r&&r.length===b)for(k=0;k<b;k++)r[k]&&(f[k]=-16777216|(u[k]-c)*a<<16|(h[k]-c)*a<<8|(d[k]-c)*a);else for(k=0;k<b;k++)f[k]=-16777216|(u[k]-c)*a<<16|(h[k]-c)*a<<8|(d[k]-c)*a;else if(null!=r&&r.length===b)for(k=0;k<b;k++)h=(d[k]-c)*a,r[k]&&(f[k]=-16777216|h<<16|h<<8|h);else for(k=0;k<b;k++)h=(d[k]-c)*a,f[k]=-16777216|h<<16|h<<8|h}else W.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};n._fillFrom32Bit=
function(f){const {pixels:m,mask:r}=this;if(!f||!m||!m.length)return W.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let l,b,a,c;l=b=a=m[0];3<=m.length?(b=m[1],a=m[2]):2===m.length&&(b=m[1]);const d=this.width*this.height;if(l.length!==d)return W.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let h=0;if(null!=r&&r.length===d)for(c=0;c<d;c++)f[h++]=l[c],f[h++]=b[c],f[h++]=a[c],f[h++]=r[c]&1;
else for(c=0;c<d;c++)f[h++]=l[c],f[h++]=b[c],f[h++]=a[c],f[h++]=1};n._calculateBandStatistics=function(f,m){let r=Infinity,l=-Infinity;const b=f.length;let a,c=0;if(null!=m)for(a=0;a<b;a++)m[a]&&(c=f[a],r=c<r?c:r,l=c>l?c:l);else for(a=0;a<b;a++)c=f[a],r=c<r?c:r,l=c>l?c:l;return new M.SimpleBandStatistics(r,l)};return N._createClass(z)}(C.JSONSupport);g.__decorate([ba.property({json:{write:!0}})],C.prototype,"width",void 0);g.__decorate([ba.property({json:{write:!0}})],C.prototype,"height",void 0);
g.__decorate([ba.property({json:{write:!0}})],C.prototype,"pixelType",void 0);g.__decorate([R.cast("pixelType")],C.prototype,"castPixelType",null);g.__decorate([ba.property({json:{write:!0}})],C.prototype,"validPixelCount",void 0);g.__decorate([ba.property({json:{write:!0}})],C.prototype,"mask",void 0);g.__decorate([ba.property({json:{write:!0}})],C.prototype,"maskIsAlpha",void 0);g.__decorate([ba.property({json:{write:!0}})],C.prototype,"pixels",void 0);g.__decorate([ba.property()],C.prototype,"premultiplyAlpha",
void 0);g.__decorate([ba.property({json:{write:!0}})],C.prototype,"statistics",void 0);g.__decorate([ba.property({json:{write:!0}})],C.prototype,"depthCount",void 0);g.__decorate([ba.property({json:{write:!0}})],C.prototype,"noDataValues",void 0);g.__decorate([ba.property({json:{write:!0}})],C.prototype,"bandMasks",void 0);return C=J=g.__decorate([K.subclass("esri.layers.support.PixelBlock")],C)})},"esri/layers/support/SimpleBandStatistics":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],
function(N,g){g=g._createClass(function(F=null,C=null,t=null){this.minValue=F;this.maxValue=C;this.noDataValue=t});N.SimpleBandStatistics=g;Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/pixelRangeUtils":function(){define(["exports"],function(N){function g(C){return F[C]??[-3.4028234663852886E38,3.4028234663852886E38]}const F={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,
2147483647],f32:[-3.4028234663852886E38,3.4028234663852886E38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};N.convertNoDataToMask=function(C,t,W){if(!(C.depthCount&&1<C.depthCount)){var {pixels:ba,statistics:R,pixelType:K}=C,M=ba[0].length,T=C.bandMasks??[],J=C.mask??(new Uint8Array(M)).fill(255),w="f32"===K||"f64"===K,z=g(K),n=!1;for(let r=0;r<ba.length;r++){const l="number"===typeof t?t:t[r];if(null==l)continue;var f=R?.[r].maxValue??z[1];if((R?.[r].minValue??
z[0])>l+Number.EPSILON||f<l-Number.EPSILON)continue;f=T[r]||(new Uint8Array(M)).fill(255);const b=ba[r];var m=W?.customFloatTolerance;if(w&&0!==m){m||(m=9.999999E37<=Math.abs(l)?2E-7*Math.abs(l):"f32"===K?2**-23:Number.EPSILON);for(let a=0;a<b.length;a++)f[a]&&Math.abs(b[a]-l)<m&&(b[a]=0,f[a]=0,J[a]=0,n=!0)}else for(m=0;m<b.length;m++)f[m]&&b[m]===l&&(b[m]=0,f[m]=0,J[m]=0,n=!0);T[r]=f}n&&(C.bandMasks=T,C.mask=J);n&&"updateStatistics"in C&&C.updateStatistics()}};N.getPixelValueRange=g;Object.defineProperty(N,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../../../core/maybe ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ./pixelRangeUtils ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),function(N,g,F,C,t,W,ba,R,K,M,T,J,w){async function z(p,B){if(!w.isPlatformLittleEndian)throw new g("rasterCoded:decode","lerc decoder is not supported on big endian platform");await ba.load();const {offset:H}=
B,{width:I,height:L,pixelType:E,statistics:G,depthCount:A,noDataValues:y,bandMasks:Q,pixels:V,mask:ea}=ba.decode(p,{inputOffset:H,returnInterleaved:B.returnInterleaved});return new C({width:I,height:L,pixelType:E.toLowerCase(),pixels:V,mask:ea,statistics:G,bandMasks:Q,depthCount:A,noDataValues:y})}async function n(p,B){p=await J.decode(p,{...B,noDataValue:null});F.assertIsSome(p);p=new C({width:p.width,height:p.height,pixels:p.pixels,pixelType:p.pixelType.toLowerCase(),mask:p.mask,statistics:null});
p.updateStatistics();return p}async function f(p,B){p=await J.decodeTileOrStrip(p,B.customOptions);p=new C({width:p.width,height:p.height,pixels:p.pixels,pixelType:p.pixelType.toLowerCase(),mask:p.mask,statistics:null});p.updateStatistics();return p}function m(p,B){const H=B.pixelType||"u8",I=C.getPixelArrayConstructor(H),L="u8"===H?p:new I(p.buffer),E=[],G=B.planes||1;if(1===G)E.push(L);else for(let A=0;A<G;A++){const y=(B.width||1)*(B.height||p.length),Q=new I(y);for(let V=0;V<y;V++)Q[V]=L[V*G+
A];E.push(Q)}p=new C({width:B.width||1,height:B.height||p.length,pixels:E,pixelType:H,statistics:null});p.updateStatistics();return p}function r(p,B){p=(new M.Zlib(new Uint8Array(p))).getBytes();return m(p,B)}function l(p,B){p=R.decode(p,B.offset,B.eof,!B.isInputBigEndian);return m(p,B)}function b(p,B){p=W.decode(p,B.hasNoZlibMask??void 0);p=new C({width:p.width,height:p.height,pixels:p.pixels,pixelType:"U8",mask:p.mask,statistics:null});p.updateStatistics();return p}function a(p,B){p=new Uint8Array(p);
p=new k(p);const {width:H,height:I}=B;B=H*I;p=p.decode();let L=0;var E=0;let G;E=new Uint8Array(B);for(L=0;L<B;L++)E[L]=p[4*L+3];const A=new C({width:H,height:I,pixels:[],pixelType:"U8",mask:E,statistics:[]});for(L=0;3>L;L++){G=new Uint8Array(B);for(E=0;E<B;E++)G[E]=p[4*E+L];A.addData({pixels:G})}A.updateStatistics();return A}async function c(p,B,H,I){p=await (new t).decode(p,{applyJpegMask:!1,format:B,...H},I);p=new C(p);p.updateStatistics();return p}function d(p){if(null==p)throw new g("rasterCodec:decode",
"parameter encodeddata is required.");p=new Uint8Array(p,0,10);let B="";255===p[0]&&216===p[1]?B="jpg":137===p[0]&&80===p[1]&&78===p[2]&&71===p[3]?B="png":67===p[0]&&110===p[1]&&116===p[2]&&90===p[3]&&73===p[4]&&109===p[5]&&97===p[6]&&103===p[7]&&101===p[8]&&32===p[9]?B="lerc":76===p[0]&&101===p[1]&&114===p[2]&&99===p[3]&&50===p[4]&&32===p[5]?B="lerc2":73===p[0]&&73===p[1]&&42===p[2]&&0===p[3]||77===p[0]&&77===p[1]&&0===p[2]&&42===p[3]||73===p[0]&&73===p[1]&&43===p[2]&&0===p[3]||77===p[0]&&77===p[1]&&
0===p[2]&&43===p[3]?B="tiff":71===p[0]&&73===p[1]&&70===p[2]?B="gif":66===p[0]&&77===p[1]?B="bmp":String.fromCharCode.apply(null,p).toLowerCase().includes("error")&&(B="error");return B}function h(p){let B=null;switch(p){case "lerc":case "lerc2":B=z;break;case "jpg":B=b;break;case "png":B=a;break;case "bsq":case "bip":B=(H,I)=>{var L=I.pixelType,E=null;let G=null;switch(L?L.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":G=255;E=Uint8Array;break;case "u16":G=G||65535;E=Uint16Array;break;
case "u32":G=G||2**32-1;E=Uint32Array;break;case "s8":G=G||-128;E=Int8Array;break;case "s16":G=G||-32768;E=Int16Array;break;case "s32":G=G||-(2**31);E=Int32Array;break;default:E=Float32Array}({pixelTypeCtor:L}={pixelTypeCtor:E,noDataValue:G});E=T.decode;H=E(H,{width:I.width,height:I.height,pixelType:L,format:p});I=new C({width:I.width,height:I.height,pixels:H.pixels,pixelType:I.pixelType,mask:H.mask,statistics:null});I.updateStatistics();return I};break;case "tiff":B=n;break;case "deflate":B=r;break;
case "lzw":B=l;break;case "error":B=()=>{throw new g("rasterCodec:decode","input data contains error");};break;default:B=()=>{throw new g("rasterCodec:decode","unsupported raster format");}}return B}function u(p,B=1){if(p){var {pixels:H,width:I,height:L,mask:E}=p;if(H&&0!==H.length){var G=H.length,A=I-1,y=L-1,Q=[],V,ea,x=null,D=C.getPixelArrayConstructor(p.pixelType);if(0===B){for(B=0;B<G;B++){var P=H[B];var X=new D(A*y);for(V=0;V<y;V++){var fa=V*I;for(ea=0;ea<A;ea++)X[V*A+ea]=P[fa+ea]}Q.push(X)}if(null!=
E)for(x=new Uint8Array(A*y),V=0;V<y;V++)for(fa=V*I,ea=0;ea<A;ea++)x[V*A+ea]=E[fa+ea]}else{for(B=0;B<G;B++){P=H[B];X=new D(A*y);for(V=0;V<y;V++)for(fa=V*I,ea=0;ea<A;ea++)X[V*A+ea]=(P[fa+ea]+P[fa+ea+1]+P[fa+I+ea]+P[fa+I+ea+1])/4;Q.push(X)}if(E)for(x=new Uint8Array(A*y),V=0;V<y;V++)for(fa=V*I,ea=0;ea<A;ea++)x[V*A+ea]=Math.min.apply(null,[E[fa+ea],E[fa+ea+1],E[fa+I+ea],E[fa+I+ea+1]])}p.width=A;p.height=y;p.mask=x;p.pixels=Q}}}var k=function(p){function B(E){var G,A;this.data=E;this.pos=8;this.palette=
[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(A=null;;){var y=this.readUInt32();var Q=E=void 0;E=[];for(Q=0;4>Q;++Q)E.push(String.fromCharCode(this.data[this.pos++]));E=E.join("");switch(E){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation=
{numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(y);break;case "fcTL":A&&this.animation.frames.push(A);this.pos+=4;A={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};E=this.readUInt16();y=this.readUInt16()||100;A.delay=1E3*E/y;A.disposeOp=this.data[this.pos++];A.blendOp=this.data[this.pos++];A.data=[];break;case "IDAT":case "fdAT":"fdAT"===E&&(this.pos+=4,y-=4);E=(null!=A?A.data:
void 0)||this.imgData;for(Q=0;0<=y?Q<y:Q>y;0<=y?++Q:--Q)E.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(y);y=255-this.transparency.indexed.length;if(0<y)for(E=0;0<=y?E<y:E>y;0<=y?++E:--E)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(y)[0];break;case 2:this.transparency.rgb=this.read(y)}break;case "tEXt":Q=this.read(y);y=Q.indexOf(0);E=String.fromCharCode.apply(String,Q.slice(0,
y));this.text[E]=String.fromCharCode.apply(String,Q.slice(y+1));break;case "IEND":A&&this.animation.frames.push(A);a:{switch(this.colorType){case 0:case 3:case 4:A=1;break a;case 2:case 6:A=3;break a}A=void 0}this.colors=A;this.hasAlphaChannel=4===(G=this.colorType)||6===G;G=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*G;a:{switch(this.colors){case 1:G="DeviceGray";break a;case 3:G="DeviceRGB";break a}G=void 0}this.colorSpace=G;this.imgData=new Uint8Array(this.imgData);return;
default:this.pos+=y}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var H;B.load=function(E,G,A){"function"===typeof G&&(A=G);var y=new XMLHttpRequest;y.open("GET",E,!0);y.responseType="arraybuffer";y.onload=function(){var Q=new Uint8Array(y.response||y.mozResponseArrayBuffer);Q=new B(Q);"function"===typeof(null!=G?G.getContext:void 0)&&Q.render(G);return"function"===typeof A?A(Q):void 0};return y.send(null)};B.prototype.read=function(E){var G;var A=[];for(G=
0;0<=E?G<E:G>E;0<=E?++G:--G)A.push(this.data[this.pos++]);return A};B.prototype.readUInt32=function(){var E=this.data[this.pos++]<<24;var G=this.data[this.pos++]<<16;var A=this.data[this.pos++]<<8;var y=this.data[this.pos++];return E|G|A|y};B.prototype.readUInt16=function(){var E=this.data[this.pos++]<<8;var G=this.data[this.pos++];return E|G};B.prototype.decodePixels=function(E){var G,A,y,Q,V,ea,x,D;null==E&&(E=this.imgData);if(0===E.length)return new Uint8Array(0);E=new M.Zlib(E);E=E.getBytes();
var P=this.pixelBitlength/8;var X=P*this.width;var fa=new Uint8Array(X*this.height);var ha=E.length;for(A=Q=V=0;Q<ha;){switch(E[Q++]){case 0:for(y=G=0;G<X;y=G+=1)fa[A++]=E[Q++];break;case 1:for(y=ea=0;ea<X;y=ea+=1){G=E[Q++];var ia=y<P?0:fa[A-P];fa[A++]=(G+ia)%256}break;case 2:for(y=ia=0;ia<X;y=ia+=1){G=E[Q++];var ma=(y-y%P)/P;ea=V&&fa[(V-1)*X+ma*P+y%P];fa[A++]=(ea+G)%256}break;case 3:for(y=D=0;D<X;y=D+=1)G=E[Q++],ma=(y-y%P)/P,ia=y<P?0:fa[A-P],ea=V&&fa[(V-1)*X+ma*P+y%P],fa[A++]=(G+Math.floor((ia+ea)/
2))%256;break;case 4:for(y=D=0;D<X;y=D+=1){G=E[Q++];ma=(y-y%P)/P;ia=y<P?0:fa[A-P];0===V?ea=x=0:(ea=fa[(V-1)*X+ma*P+y%P],x=ma&&fa[(V-1)*X+(ma-1)*P+y%P]);var aa=ia+ea-x;y=Math.abs(aa-ia);ma=Math.abs(aa-ea);aa=Math.abs(aa-x);ia=y<=ma&&y<=aa?ia:ma<=aa?ea:x;fa[A++]=(G+ia)%256}break;default:throw Error("Invalid filter algorithm: "+E[Q-1]);}V++}return fa};B.prototype.decodePalette=function(){var E,G,A,y;var Q=this.palette;var V=this.transparency.indexed||[];var ea=new Uint8Array((V.length||0)+Q.length);
var x=0;Q.length;var D=G=E=0;for(A=Q.length;G<A;D=G+=3)ea[x++]=Q[D],ea[x++]=Q[D+1],ea[x++]=Q[D+2],ea[x++]=null!=(y=V[E++])?y:255;return ea};B.prototype.copyToImageData=function(E,G){var A,y;var Q=this.colors;var V=null;var ea=this.hasAlphaChannel;this.palette.length&&(V=null!=(A=this._decodedPalette)?A:this._decodedPalette=this.decodePalette(),Q=4,ea=!0);E=E.data||E;var x=E.length;var D=V||G;A=y=0;if(1===Q)for(;A<x;)Q=V?4*G[A/4]:y,y=D[Q++],E[A++]=y,E[A++]=y,E[A++]=y,E[A++]=ea?D[Q++]:this.transparency.grayscale&&
this.transparency.grayscale===y?0:255,y=Q;else for(;A<x;)Q=V?4*G[A/4]:y,E[A++]=D[Q++],E[A++]=D[Q++],E[A++]=D[Q++],E[A++]=ea?D[Q++]:this.transparency.rgb&&this.transparency.rgb[1]===D[Q-3]&&this.transparency.rgb[3]===D[Q-2]&&this.transparency.rgb[5]===D[Q-1]?0:255,y=Q};B.prototype.decode=function(){var E=new Uint8Array(this.width*this.height*4);this.copyToImageData(E,this.decodePixels());return E};var I=(H=p.document&&p.document.createElement("canvas"))&&H.getContext("2d");var L=function(E){I.width=
E.width;I.height=E.height;I.clearRect(0,0,E.width,E.height);I.putImageData(E,0,0);E=new Image;E.src=H.toDataURL();return E};B.prototype.decodeFrames=function(E){var G,A;if(this.animation){var y=this.animation.frames;var Q=[];var V=G=0;for(A=y.length;G<A;V=++G){V=y[V];var ea=E.createImageData(V.width,V.height);var x=this.decodePixels(new Uint8Array(V.data));this.copyToImageData(ea,x);V.imageData=ea;Q.push(V.image=L(ea))}return Q}};B.prototype.renderFrame=function(E,G){var A=this.animation.frames;var y=
A[G];A=A[G-1];0===G&&E.clearRect(0,0,this.width,this.height);1===(null!=A?A.disposeOp:void 0)?E.clearRect(A.xOffset,A.yOffset,A.width,A.height):2===(null!=A?A.disposeOp:void 0)&&E.putImageData(A.imageData,A.xOffset,A.yOffset);0===y.blendOp&&E.clearRect(y.xOffset,y.yOffset,y.width,y.height);return E.drawImage(y.image,y.xOffset,y.yOffset)};B.prototype.animate=function(E){var G,A=this;var y=0;var Q=this.animation;var V=Q.numFrames;var ea=Q.frames;var x=Q.numPlays;return(G=function(){var D=y++%V;var P=
ea[D];A.renderFrame(E,D);if(1<V&&y/V<x)return A.animation._timeout=setTimeout(G,P.delay)})()};B.prototype.stopAnimation=function(){var E;return clearTimeout(null!=(E=this.animation)?E._timeout:void 0)};B.prototype.render=function(E){E._png&&E._png.stopAnimation();E._png=this;E.width=this.width;E.height=this.height;E=E.getContext("2d");if(this.animation)return this.decodeFrames(E),this.animate(E);var G=E.createImageData(this.width,this.height);this.copyToImageData(G,this.decodePixels());return E.putImageData(G,
0,0)};return B}(self);const v=new Set(["jpg","png","bmp","gif"]);N.decode=async function(p,B={},H){if(null==p)throw new g("rasterCodec:decode","missing encodeddata parameter.");let I=B.format&&B.format.toLowerCase();if(!("bsq"!==I&&"bip"!==I||null!=B.width&&null!=B.height))throw new g("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===I&&B.customOptions)return f(p,B);if(!I||"bsq"!==I&&"bip"!==I&&"deflate"!==I&&"lzw"!==I)I=d(p);if(B.useCanvas&&v.has(I))return c(p,I,
B,H);H=h(I);B.isPoint&&(B={...B},null!=B.width&&B.width++,null!=B.height&&B.height++);p=await H(p,B);if(!p)return p;"jpg"!==I&&null!=B.noDataValue&&1===p.depthCount&&K.convertNoDataToMask(p,B.noDataValue,{customFloatTolerance:B.tolerance});B.isPoint&&u(p);return p};N.getFormat=function(p){p=d(p);"lerc2"===p?p="lerc":"error"===p&&(p="");return p};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(N,g,F,C){return function(){function t(W){this._ctx=this._canvas=null;W&&(this._canvas=W.canvas,this._ctx=W.ctx||W.canvas&&W.canvas.getContext("2d"))}t.prototype.decode=function(W,ba,R){if(!W||10>W.byteLength)throw new g("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:K=0,height:M=0,format:T}=ba;const {applyJpegMask:J}=ba;if(J&&(!K||!M))throw new g("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");
return new Promise((w,z)=>{let n=null;"jpg"===T&&J&&(n=t._getMask(W,{width:K,height:M}));const f=new Blob([new Uint8Array(W)],{type:"jpg"==="image/"+T?"jpeg":T}),m=URL.createObjectURL(f),r=new Image;let l;r.src=m;r.onload=()=>{URL.revokeObjectURL(m);if(F.isAborted(R))z(F.createAbortError());else{K=r.width;M=r.height;if(this._canvas&&this._ctx){if(this._canvas.width!==K||this._canvas.height!==M)this._canvas.width=K,this._canvas.height=M;this._ctx.clearRect(0,0,K,M)}else this._canvas=document.createElement("canvas"),
this._canvas.width=K,this._canvas.height=M,this._ctx=this._canvas.getContext("2d");this._ctx.drawImage(r,0,0);var b=this._ctx.getImageData(0,0,K,M);l=b.data;var a;if(ba.renderOnCanvas){if(n)for(a=0;a<n.length;a++)l[4*a+3]=n[a]?255:0;this._ctx.putImageData(b,0,0);w(null)}else{b=K*M;var c=new Uint8Array(b),d=new Uint8Array(b),h=new Uint8Array(b);if(n)for(a=0;a<b;a++)c[a]=l[4*a],d[a]=l[4*a+1],h[a]=l[4*a+2];else for(n=new Uint8Array(b),a=0;a<b;a++)c[a]=l[4*a],d[a]=l[4*a+1],h[a]=l[4*a+2],n[a]=l[4*a+3];
w({width:K,height:M,pixels:[c,d,h],mask:n,pixelType:"u8"})}}};r.onerror=()=>{URL.revokeObjectURL(m);z("cannot load image")}})};t._getMask=function(W,ba){let R=null;try{var K=new Uint8Array(W);W=0;var M=K.length-2;for(W=Math.ceil(K.length/2);W<M&&(255!==K[W]||217!==K[W+1]);W++);W+=2;if(W<K.length-1){const T=(new C.Zlib(K.subarray(W))).getBytes();R=new Uint8Array(ba.width*ba.height);ba=0;for(K=0;K<T.length;K++)for(M=7;0<=M;M--)R[ba++]=T[K]>>M&1}}catch(T){}return R};return N._createClass(t)}()})},"esri/chunks/Zlib":function(){define(["exports",
"./_commonjsHelpers"],function(N,g){var F={exports:{}};F.exports;(function(C){(function(t){t=t();void 0!==t&&(C.exports=t)})(function(){var t=function(){function W(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}W.prototype={ensureBuffer:function(ba){var R=this.buffer,K=R?R.byteLength:0;if(ba<K)return R;for(var M=512;M<ba;)M<<=1;ba=new Uint8Array(M);for(M=0;M<K;++M)ba[M]=R[M];return this.buffer=ba},getByte:function(){for(var ba=this.pos;this.bufferLength<=ba;){if(this.eof)return null;
this.readBlock()}return this.buffer[this.pos++]},getBytes:function(ba){var R=this.pos;if(ba){this.ensureBuffer(R+ba);for(ba=R+ba;!this.eof&&this.bufferLength<ba;)this.readBlock();var K=this.bufferLength;ba>K&&(ba=K)}else{for(;!this.eof;)this.readBlock();ba=this.bufferLength}this.pos=ba;return this.buffer.subarray(R,ba)},lookChar:function(){for(var ba=this.pos;this.bufferLength<=ba;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var ba=
this.pos;this.bufferLength<=ba;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(ba,R,K){for(var M=ba+R;this.bufferLength<=M&&!this.eof;)this.readBlock();return new Stream(this.buffer,ba,R,K)},skip:function(ba){ba||(ba=1);this.pos+=ba},reset:function(){this.pos=0}};return W}();return function(){function W(w){throw Error(w);}function ba(w){var z=0,n=w[z++],f=w[z++];-1!=n&&-1!=f||W("Invalid header in flate stream");8!=(n&15)&&W("Unknown compression method in flate stream");
0!=((n<<8)+f)%31&&W("Bad FCHECK in flate stream");f&32&&W("FDICT bit set in flate stream");this.bytes=w;this.bytesPos=z;this.codeBuf=this.codeSize=0;t.call(this)}if(!self||!self.Uint32Array)return null;var R=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),K=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),M=new Uint32Array([1,2,3,4,65541,65543,131081,
131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),T=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,
524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,
524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,
524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,
524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,
524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,
524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,
524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],J=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];ba.prototype=Object.create(t.prototype);
ba.prototype.getBits=function(w){for(var z=this.codeSize,n=this.codeBuf,f=this.bytes,m=this.bytesPos,r;z<w;)"undefined"==typeof(r=f[m++])&&W("Bad encoding in flate stream"),n|=r<<z,z+=8;this.codeBuf=n>>w;this.codeSize=z-=w;this.bytesPos=m;return n&(1<<w)-1};ba.prototype.getCode=function(w){var z=w[0],n=w[1];w=this.codeSize;for(var f=this.codeBuf,m=this.bytes,r=this.bytesPos;w<n;){var l;"undefined"==typeof(l=m[r++])&&W("Bad encoding in flate stream");f|=l<<w;w+=8}n=z[f&(1<<n)-1];z=n>>16;n&=65535;(0==
w||w<z||0==z)&&W("Bad encoding in flate stream");this.codeBuf=f>>z;this.codeSize=w-z;this.bytesPos=r;return n};ba.prototype.generateHuffmanTable=function(w){for(var z=w.length,n=0,f=0;f<z;++f)w[f]>n&&(n=w[f]);for(var m=1<<n,r=new Uint32Array(m),l=1,b=0,a=2;l<=n;++l,b<<=1,a<<=1)for(var c=0;c<z;++c)if(w[c]==l){var d=0,h=b;for(f=0;f<l;++f)d=d<<1|h&1,h>>=1;for(f=d;f<m;f+=a)r[f]=l<<16|c;++b}return[r,n]};ba.prototype.readBlock=function(){function w(d,h,u,k,v){for(d=d.getBits(u)+k;0<d--;)h[b++]=v}var z=
this.getBits(3);z&1&&(this.eof=!0);z>>=1;if(0==z){var n=this.bytes,f=this.bytesPos,m;"undefined"==typeof(m=n[f++])&&W("Bad block header in flate stream");var r=m;"undefined"==typeof(m=n[f++])&&W("Bad block header in flate stream");r|=m<<8;"undefined"==typeof(m=n[f++])&&W("Bad block header in flate stream");z=m;"undefined"==typeof(m=n[f++])&&W("Bad block header in flate stream");(z|m<<8)!=(~r&65535)&&W("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;m=this.bufferLength;
z=this.ensureBuffer(m+r);this.bufferLength=r=m+r;for(var l=m;l<r;++l){if("undefined"==typeof(m=n[f++])){this.eof=!0;break}z[l]=m}this.bytesPos=f}else{if(1==z)f=T,m=J;else if(2==z){z=this.getBits(5)+257;m=this.getBits(5)+1;n=this.getBits(4)+4;f=Array(R.length);for(var b=0;b<n;)f[R[b++]]=this.getBits(3);f=this.generateHuffmanTable(f);b=n=0;m=z+m;for(r=Array(m);b<m;)l=this.getCode(f),16==l?w(this,r,2,3,n):17==l?w(this,r,3,3,n=0):18==l?w(this,r,7,11,n=0):r[b++]=n=l;f=this.generateHuffmanTable(r.slice(0,
z));m=this.generateHuffmanTable(r.slice(z,m))}else W("Unknown block type in flate stream");r=(z=this.buffer)?z.length:0;for(l=this.bufferLength;;){var a=this.getCode(f);if(256>a)l+1>=r&&(z=this.ensureBuffer(l+1),r=z.length),z[l++]=a;else{if(256==a){this.bufferLength=l;break}a-=257;a=K[a];var c=a>>16;0<c&&(c=this.getBits(c));n=(a&65535)+c;a=this.getCode(m);a=M[a];c=a>>16;0<c&&(c=this.getBits(c));a=(a&65535)+c;l+n>=r&&(z=this.ensureBuffer(l+n),r=z.length);for(c=0;c<n;++c,++l)z[l]=z[l-a]}}}};return ba}()})})(F);
g=g.getDefaultExportFromCjs(F.exports);N.Zlib=g})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/Jpg","../../../chunks/Zlib"],function(N,g,F){return function(){function C(){}C.decode=function(t,W=!1){const ba=new Uint8Array(t);t=new g.JpegImage;t.parse(ba);const {width:R,height:K,numComponents:M,eof:T}=t,J=t.getData(R,K,!0),w=R*K;t=null;let z=0,n=0,f=0;if(!W&&T<ba.length-1)try{var m=(new F.Zlib(ba.subarray(T))).getBytes();
t=new Uint8Array(w);for(z=W=0;z<m.length;z++)for(f=7;0<=f;f--)t[W++]=m[z]>>f&1}catch{}if(1===M&&J.length===R*K)m=new Uint8Array(J.buffer),m=[m,m,m];else{m=[];for(z=0;3>z;z++)m.push(new Uint8Array(w));for(n=f=0;n<w;n++)for(z=0;3>z;z++)m[z][n]=J[f++]}return{width:R,height:K,pixels:m,mask:t}};return N._createClass(C)}()})},"esri/chunks/Jpg":function(){define(["exports","./_commonjsHelpers"],function(N,g){var F={exports:{}};F.exports;(function(C){(function(t){t=t();void 0!==t&&(C.exports=t)})(function(){var t=
function(){function W(ba){this.message="JPEG error: "+ba}W.prototype=Error();W.prototype.name="JpegError";return W.constructor=W}();return function(){function W(){this.decodeTransform=null;this.colorTransform=-1}function ba(J,w){for(var z=0,n=[],f,m,r=16;0<r&&!J[r-1];)r--;n.push({children:[],index:0});var l=n[0],b;for(f=0;f<r;f++){for(m=0;m<J[f];m++){l=n.pop();for(l.children[l.index]=w[z];0<l.index;)l=n.pop();l.index++;for(n.push(l);n.length<=f;)n.push(b={children:[],index:0}),l.children[l.index]=
b.children,l=b;z++}f+1<r&&(n.push(b={children:[],index:0}),l.children[l.index]=b.children,l=b)}return n[0].children}function R(J,w,z,n,f,m,r,l,b){function a(){if(0<E)return E--,L>>E&1;L=J[w++];if(255===L){var ma=J[w++];if(ma)throw new t("unexpected marker "+(L<<8|ma).toString(16));}E=7;return L>>>7}function c(ma){for(;;){ma=ma[a()];if("number"===typeof ma)return ma;if("object"!==typeof ma)throw new t("invalid huffman sequence");}}function d(ma){for(var aa=0;0<ma;)aa=aa<<1|a(),ma--;return aa}function h(ma){if(1===
ma)return 1===a()?1:-1;var aa=d(ma);return aa>=1<<ma-1?aa:aa+(-1<<ma)+1}function u(ma,aa){var wa=c(ma.huffmanTableDC);wa=0===wa?0:h(wa);ma.blockData[aa]=ma.pred+=wa;for(wa=1;64>wa;){var e=c(ma.huffmanTableAC),q=e&15;e>>=4;if(0===q){if(15>e)break;wa+=16}else wa+=e,ma.blockData[aa+T[wa]]=h(q),wa++}}function k(ma,aa){var wa=c(ma.huffmanTableDC);wa=0===wa?0:h(wa)<<b;ma.blockData[aa]=ma.pred+=wa}function v(ma,aa){ma.blockData[aa]|=a()<<b}function p(ma,aa){if(0<G)G--;else for(var wa=m;wa<=r;){var e=c(ma.huffmanTableAC),
q=e&15;e>>=4;if(0===q){if(15>e){G=d(e)+(1<<e)-1;break}wa+=16}else wa+=e,ma.blockData[aa+T[wa]]=h(q)*(1<<b),wa++}}function B(ma,aa){for(var wa=m,e=0,q;wa<=r;){q=T[wa];switch(A){case 0:e=c(ma.huffmanTableAC);q=e&15;e>>=4;if(0===q)15>e?(G=d(e)+(1<<e),A=4):(e=16,A=1);else{if(1!==q)throw new t("invalid ACn encoding");y=h(q);A=e?2:3}continue;case 1:case 2:ma.blockData[aa+q]?ma.blockData[aa+q]+=a()<<b:(e--,0===e&&(A=2===A?3:0));break;case 3:ma.blockData[aa+q]?ma.blockData[aa+q]+=a()<<b:(ma.blockData[aa+
q]=y<<b,A=0);break;case 4:ma.blockData[aa+q]&&(ma.blockData[aa+q]+=a()<<b)}wa++}4===A&&(G--,0===G&&(A=0))}var H=z.mcusPerLine,I=w,L=0,E=0,G=0,A=0,y,Q=n.length,V,ea,x,D;l=z.progressive?0===m?0===l?k:v:0===l?p:B:u;var P=0;z=1===Q?n[0].blocksPerLine*n[0].blocksPerColumn:H*z.mcusPerColumn;for(var X,fa;P<z;){var ha=f?Math.min(z-P,f):z;for(V=0;V<Q;V++)n[V].pred=0;G=0;if(1===Q){var ia=n[0];for(D=0;D<ha;D++)l(ia,64*((ia.blocksPerLine+1)*(P/ia.blocksPerLine|0)+P%ia.blocksPerLine)),P++}else for(D=0;D<ha;D++){for(V=
0;V<Q;V++)for(ia=n[V],X=ia.h,fa=ia.v,ea=0;ea<fa;ea++)for(x=0;x<X;x++)l(ia,64*((ia.blocksPerLine+1)*((P/H|0)*ia.v+ea)+(P%H*ia.h+x)));P++}E=0;(ia=M(J,w))&&ia.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ia.invalid),w=ia.offset);ia=ia&&ia.marker;if(!ia||65280>=ia)throw new t("marker was not found");if(65488<=ia&&65495>=ia)w+=2;else break}(ia=M(J,w))&&ia.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ia.invalid),w=ia.offset);return w-I}function K(J,
w){J=w.blocksPerLine;for(var z=w.blocksPerColumn,n=new Int16Array(64),f=0;f<z;f++)for(var m=0;m<J;m++){var r=void 0,l=void 0,b=void 0,a=void 0,c=void 0,d=void 0,h=void 0,u=void 0,k=c=d=a=l=r=void 0,v=void 0,p=void 0,B=void 0,H=64*((w.blocksPerLine+1)*f+m),I=n,L=w.quantizationTable,E=w.blockData;if(!L)throw new t("missing required Quantization Table.");for(var G=0;64>G;G+=8)r=E[H+G],u=E[H+G+1],h=E[H+G+2],d=E[H+G+3],c=E[H+G+4],a=E[H+G+5],b=E[H+G+6],l=E[H+G+7],r*=L[G],0===(u|h|d|c|a|b|l)?(r=5793*r+512>>
10,I[G]=r,I[G+1]=r,I[G+2]=r,I[G+3]=r,I[G+4]=r,I[G+5]=r,I[G+6]=r,I[G+7]=r):(u*=L[G+1],h*=L[G+2],d*=L[G+3],c*=L[G+4],a*=L[G+5],b*=L[G+6],l*=L[G+7],B=5793*r+128>>8,p=5793*c+128>>8,v=h,k=b,c=2896*(u-l)+128>>8,l=2896*(u+l)+128>>8,d<<=4,a<<=4,B=B+p+1>>1,p=B-p,r=3784*v+1567*k+128>>8,v=1567*v-3784*k+128>>8,k=r,c=c+a+1>>1,a=c-a,l=l+d+1>>1,d=l-d,B=B+k+1>>1,k=B-k,p=p+v+1>>1,v=p-v,r=2276*c+3406*l+2048>>12,c=3406*c-2276*l+2048>>12,l=r,r=799*d+4017*a+2048>>12,d=4017*d-799*a+2048>>12,a=r,I[G]=B+l,I[G+7]=B-l,I[G+
1]=p+a,I[G+6]=p-a,I[G+2]=v+d,I[G+5]=v-d,I[G+3]=k+c,I[G+4]=k-c);for(L=0;8>L;++L)r=I[L],u=I[L+8],h=I[L+16],d=I[L+24],c=I[L+32],a=I[L+40],b=I[L+48],l=I[L+56],0===(u|h|d|c|a|b|l)?(r=5793*r+8192>>14,r=-2040>r?0:2024<=r?255:r+2056>>4,E[H+L]=r,E[H+L+8]=r,E[H+L+16]=r,E[H+L+24]=r,E[H+L+32]=r,E[H+L+40]=r,E[H+L+48]=r,E[H+L+56]=r):(B=5793*r+2048>>12,p=5793*c+2048>>12,v=h,k=b,c=2896*(u-l)+2048>>12,l=2896*(u+l)+2048>>12,B=(B+p+1>>1)+4112,p=B-p,r=3784*v+1567*k+2048>>12,v=1567*v-3784*k+2048>>12,k=r,c=c+a+1>>1,a=
c-a,l=l+d+1>>1,d=l-d,B=B+k+1>>1,k=B-k,p=p+v+1>>1,v=p-v,r=2276*c+3406*l+2048>>12,c=3406*c-2276*l+2048>>12,l=r,r=799*d+4017*a+2048>>12,d=4017*d-799*a+2048>>12,a=r,r=B+l,l=B-l,u=p+a,b=p-a,h=v+d,a=v-d,d=k+c,c=k-c,r=16>r?0:4080<=r?255:r>>4,u=16>u?0:4080<=u?255:u>>4,h=16>h?0:4080<=h?255:h>>4,d=16>d?0:4080<=d?255:d>>4,c=16>c?0:4080<=c?255:c>>4,a=16>a?0:4080<=a?255:a>>4,b=16>b?0:4080<=b?255:b>>4,l=16>l?0:4080<=l?255:l>>4,E[H+L]=r,E[H+L+8]=u,E[H+L+16]=h,E[H+L+24]=d,E[H+L+32]=c,E[H+L+40]=a,E[H+L+48]=b,E[H+
L+56]=l)}return w.blockData}function M(J,w,z){var n=J.length-1;z=z<w?z:w;if(w>=n)return null;var f=J[w]<<8|J[w+1];if(65472<=f&&65534>=f)return{invalid:null,marker:f,offset:w};for(w=J[z]<<8|J[z+1];!(65472<=w&&65534>=w);){if(++z>=n)return null;w=J[z]<<8|J[z+1]}return{invalid:f.toString(16),marker:w,offset:z}}if(!self||!self.Uint8ClampedArray)return null;var T=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,
37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);W.prototype={parse:function(J){function w(){var L=J[f]<<8|J[f+1];f+=2;return L}function z(){var L=w();L=f+L-2;var E=M(J,L,f);E&&E.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+E.invalid),L=E.offset);L=J.subarray(f,L);f+=L.length;return L}function n(L){for(var E=Math.ceil(L.samplesPerLine/8/L.maxH),G=Math.ceil(L.scanLines/8/L.maxV),A=0;A<L.components.length;A++){I=L.components[A];var y=Math.ceil(Math.ceil(L.samplesPerLine/
8)*I.h/L.maxH),Q=Math.ceil(Math.ceil(L.scanLines/8)*I.v/L.maxV);I.blockData=new Int16Array(64*G*I.v*(E*I.h+1));I.blocksPerLine=y;I.blocksPerColumn=Q}L.mcusPerLine=E;L.mcusPerColumn=G}var f=0,m=null,r=null,l=[],b=[],a=[],c=w();if(65496!==c)throw new t("SOI not found");for(c=w();65497!==c;){switch(c){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var d=z();65504===
c&&74===d[0]&&70===d[1]&&73===d[2]&&70===d[3]&&0===d[4]&&(m={version:{major:d[5],minor:d[6]},densityUnits:d[7],xDensity:d[8]<<8|d[9],yDensity:d[10]<<8|d[11],thumbWidth:d[12],thumbHeight:d[13],thumbData:d.subarray(14,14+3*d[12]*d[13])});65518===c&&65===d[0]&&100===d[1]&&111===d[2]&&98===d[3]&&101===d[4]&&(r={version:d[5]<<8|d[6],flags0:d[7]<<8|d[8],flags1:d[9]<<8|d[10],transformCode:d[11]});break;case 65499:c=w()+f-2;for(var h;f<c;){var u=J[f++],k=new Uint16Array(64);if(0===u>>4)for(d=0;64>d;d++)h=
T[d],k[h]=J[f++];else if(1===u>>4)for(d=0;64>d;d++)h=T[d],k[h]=w();else throw new t("DQT - invalid table spec");l[u&15]=k}break;case 65472:case 65473:case 65474:if(v)throw new t("Only single frame JPEGs supported");w();var v={};v.extended=65473===c;v.progressive=65474===c;v.precision=J[f++];v.scanLines=w();v.samplesPerLine=w();v.components=[];v.componentIds={};d=J[f++];for(c=k=u=0;c<d;c++){h=J[f];var p=J[f+1]>>4;var B=J[f+1]&15;u<p&&(u=p);k<B&&(k=B);p=v.components.push({h:p,v:B,quantizationId:J[f+
2],quantizationTable:null});v.componentIds[h]=p-1;f+=3}v.maxH=u;v.maxV=k;n(v);break;case 65476:h=w();for(c=2;c<h;){u=J[f++];k=new Uint8Array(16);for(d=p=0;16>d;d++,f++)p+=k[d]=J[f];B=new Uint8Array(p);for(d=0;d<p;d++,f++)B[d]=J[f];c+=17+p;(0===u>>4?a:b)[u&15]=ba(k,B)}break;case 65501:w();var H=w();break;case 65498:w();h=J[f++];d=[];for(c=0;c<h;c++){u=v.componentIds[J[f++]];var I=v.components[u];u=J[f++];I.huffmanTableDC=a[u>>4];I.huffmanTableAC=b[u&15];d.push(I)}c=J[f++];h=J[f++];u=J[f++];c=R(J,f,
v,d,H,c,h,u>>4,u&15);f+=c;break;case 65535:255!==J[f]&&f--;break;default:if(255===J[f-3]&&192<=J[f-2]&&254>=J[f-2])f-=3;else throw new t("unknown marker "+c.toString(16));}c=w()}this.width=v.samplesPerLine;this.height=v.scanLines;this.jfif=m;this.eof=f;this.adobe=r;this.components=[];for(c=0;c<v.components.length;c++){I=v.components[c];if(m=l[I.quantizationId])I.quantizationTable=m;this.components.push({output:K(v,I),scaleX:I.h/v.maxH,scaleY:I.v/v.maxV,blocksPerLine:I.blocksPerLine,blocksPerColumn:I.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(J,w){var z=this.width/J,n=this.height/w,f,m,r=0,l=this.components.length,b=J*w*l,a=new Uint8ClampedArray(b),c=new Uint32Array(J);for(m=0;m<l;m++){var d=this.components[m];var h=d.scaleX*z;var u=d.scaleY*n;r=m;var k=d.output;var v=d.blocksPerLine+1<<3;for(f=0;f<J;f++)d=0|f*h,c[f]=(d&4294967288)<<3|d&7;for(h=0;h<w;h++)for(d=0|h*u,d=v*(d&4294967288)|(d&7)<<3,f=0;f<J;f++)a[r]=k[d+c[f]],r+=l}if(w=this.decodeTransform)for(m=0;m<b;)for(J=d=0;d<l;d++,
m++,J+=2)a[m]=(a[m]*w[J]>>8)+w[J+1];return a},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(J){for(var w,z,n,f=0,m=J.length;f<m;f+=3)w=J[f],z=J[f+1],n=J[f+2],J[f]=w-179.456+1.402*n,J[f+1]=w+135.459-.344*z-.714*n,J[f+2]=w-226.816+1.772*z;return J},_convertYcckToRgb:function(J){for(var w,z,n,f,m=0,r=0,l=J.length;r<l;r+=4)w=J[r],z=J[r+1],n=J[r+2],f=J[r+3],J[m++]=
-122.67195406894+z*(-6.60635669420364E-5*z+4.37130475926232E-4*n-5.4080610064599E-5*w+4.8449797120281E-4*f-.154362151871126)+n*(-9.57964378445773E-4*n+8.17076911346625E-4*w-.00477271405408747*f+1.53380253221734)+w*(9.61250184130688E-4*w-.00266257332283933*f+.48357088451265)+f*(-3.36197177618394E-4*f+.484791561490776),J[m++]=107.268039397724+z*(2.19927104525741E-5*z-6.40992018297945E-4*n+6.59397001245577E-4*w+4.26105652938837E-4*f-.176491792462875)+n*(-7.78269941513683E-4*n+.00130872261408275*w+7.70482631801132E-4*
f-.151051492775562)+w*(.00126935368114843*w-.00265090189010898*f+.25802910206845)+f*(-3.18913117588328E-4*f-.213742400323665),J[m++]=-20.810012546947+z*(-5.70115196973677E-4*z-2.63409051004589E-5*n+.0020741088115012*w-.00288260236853442*f+.814272968359295)+n*(-1.53496057440975E-5*n-1.32689043961446E-4*w+5.60833691242812E-4*f-.195152027534049)+w*(.00174418132927582*w-.00255243321439347*f+.116935020465145)+f*(-3.43531996510555E-4*f+.24165260232407);return J},_convertYcckToCmyk:function(J){for(var w,
z,n,f=0,m=J.length;f<m;f+=4)w=J[f],z=J[f+1],n=J[f+2],J[f]=434.456-w-1.402*n,J[f+1]=119.541-w+.344*z+.714*n,J[f+2]=481.816-w-1.772*z;return J},_convertCmykToRgb:function(J){for(var w,z,n,f,m=0,r=1/255,l=0,b=J.length;l<b;l+=4)w=J[l]*r,z=J[l+1]*r,n=J[l+2]*r,f=J[l+3]*r,J[m++]=255+w*(-4.387332384609988*w+54.48615194189176*z+18.82290502165302*n+212.25662451639585*f-285.2331026137004)+z*(1.7149763477362134*z-5.6096736904047315*n-17.873870861415444*f-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*
f+17.5119270841813)-f*(21.86122147463605*f+189.48180835922747),J[m++]=255+w*(8.841041422036149*w+60.118027045597366*z+6.871425592049007*n+31.159100130055922*f-79.2970844816548)+z*(-15.310361306967817*z+17.575251261109482*n+131.35250912493976*f-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*f-24.86741582555878)-f*(20.737325471181034*f+187.80453709719578),J[m++]=255+w*(.8842522430003296*w+8.078677503112928*z+30.89978309703729*n-.23883238689178934*f-14.183576799673286)+z*(10.49593273432072*
z+63.02378494754052*n+50.606957656360734*f-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*f-193.58209356861505)-f*(22.33816807309886*f+180.12613974708367);return J},getData:function(J,w,z){if(4<this.numComponents)throw new t("Unsupported color mode");J=this._getLinearizedBlockData(J,w);if(1===this.numComponents&&z){z=J.length;w=new Uint8ClampedArray(3*z);for(var n=0,f=0;f<z;f++){var m=J[f];w[n++]=m;w[n++]=m;w[n++]=m}return w}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(J);
if(4===this.numComponents){if(this._isColorConversionNeeded())return z?this._convertYcckToRgb(J):this._convertYcckToCmyk(J);if(z)return this._convertCmykToRgb(J)}return J}};return W}()})})(F);g=g.getDefaultExportFromCjs(F.exports);N.JpegImage=g})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(N,g,F){function C(M,T,J){J.set(M.slice(T,T+J.length))}function t(M){const {_malloc:T,_free:J,_lerc_getBlobInfo:w,_lerc_getDataRanges:z,_lerc_decode_4D:n,
asm:f}=M;let m;const r=Object.values(f).find(b=>b&&"buffer"in b&&b.buffer===M.HEAPU8.buffer),l=b=>{b=b.map(d=>(d>>3<<3)+16);var a=b.reduce((d,h)=>d+h),c=T(a);m=new Uint8Array(r.buffer);a=b[0];b[0]=c;for(c=1;c<b.length;c++){const d=b[c];b[c]=b[c-1]+a;a=d}return b};K.getBlobInfo=b=>{var a=new Uint8Array(48),c=new Uint8Array(24);const [d,h,u]=l([b.length,a.length,c.length]);m.set(b,d);m.set(a,h);m.set(c,u);var k=w(d,b.length,h,u,12,3);if(k)throw J(d),Error(`lerc-getBlobInfo: error code is ${k}`);m=new Uint8Array(r.buffer);
C(m,h,a);C(m,u,c);a=new Uint32Array(a.buffer);var v=new Float64Array(c.buffer);const [p,B,,H,I,L,E,G,A,y,Q]=a;c={version:p,depthCount:y,width:H,height:I,validPixelCount:E,bandCount:L,blobSize:G,maskCount:A,dataType:B,minValue:v[0],maxValue:v[1],maxZerror:v[2],statistics:[],bandCountWithNoData:Q};if(Q)return c;if(1===y&&1===L)return J(d),c.statistics.push({minValue:v[0],maxValue:v[1]}),c;k=y*L*8;var V=new Uint8Array(k),ea=new Uint8Array(k);a=d;var x=v=0;let D=!1;m.byteLength<d+2*k?(J(d),D=!0,[a,v,
x]=l([b.length,k,k]),m.set(b,a)):[v,x]=l([k,k]);m.set(V,v);m.set(ea,x);if(k=z(a,b.length,y,L,v,x))throw J(a),D||J(v),Error(`lerc-getDataRanges: error code is ${k}`);m=new Uint8Array(r.buffer);C(m,v,V);C(m,x,ea);b=new Float64Array(V.buffer);k=new Float64Array(ea.buffer);ea=c.statistics;for(V=0;V<L;V++)if(1<y){x=b.slice(V*y,(V+1)*y);const P=k.slice(V*y,(V+1)*y),X=Math.min.apply(null,x),fa=Math.max.apply(null,P);ea.push({minValue:X,maxValue:fa,depthStats:{minValues:x,maxValues:P}})}else ea.push({minValue:b[V],
maxValue:k[V]});J(a);D||J(v);return c};K.decode=(b,a)=>{const {maskCount:c,depthCount:d,bandCount:h,width:u,height:k,dataType:v,bandCountWithNoData:p}=a;var B=W[v],H=u*k;a=new Uint8Array(H*h);B=new Uint8Array(H*d*h*B.size);H=new Uint8Array(h);var I=new Uint8Array(8*h);const [L,E,G,A,y]=l([b.length,a.length,B.length,H.length,I.length]);m.set(b,L);m.set(a,E);m.set(B,G);m.set(H,A);m.set(I,y);if(b=n(L,b.length,c,E,d,u,k,h,v,G,A,y))throw J(L),Error(`lerc-decode: error code is ${b}`);m=new Uint8Array(r.buffer);
C(m,G,B);C(m,E,a);b=null;if(p){C(m,A,H);C(m,y,I);b=[];I=new Float64Array(I.buffer);for(let Q=0;Q<H.length;Q++)b.push(H[Q]?I[Q]:null)}J(L);return{data:B,maskData:a,noDataValues:b}}}const W=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",
size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let ba=null,R=!1;const K={getBlobInfo:null,decode:null};g.decode=function(M,T={}){var J=T.inputOffset??0;M=M instanceof Uint8Array?M.subarray(J):new Uint8Array(M,J);J=K.getBlobInfo(M);const {data:w,maskData:z,noDataValues:n}=K.decode(M,J),{width:f,height:m,bandCount:r,
depthCount:l,dataType:b,maskCount:a,statistics:c}=J;var d=W[b],h=new d.ctor(w.buffer);M=[];J=[];const u=f*m;var k=u*l;for(var v=0;v<r;v++){var p=h.subarray(v*k,(v+1)*k);if(T.returnInterleaved)M.push(p);else{a:{var B=u,H=l;if(2>H)break a;const I=new d.ctor(B*H);for(let L=0,E=0;L<B;L++)for(let G=0,A=L;G<H;G++,A+=B)I[A]=p[E++];p=I}M.push(p)}J.push(z.subarray(v*k,(v+1)*k))}h=0===a?null:1===a?J[0]:new Uint8Array(u);if(1<a)for(h.set(J[0]),k=1;k<J.length;k++)for(v=J[k],p=0;p<u;p++)h[p]&=v[p];({noDataValue:T}=
T);k=null!=T&&d.range[0]<=T&&d.range[1]>=T;if(0<a&&k)for(k=0;k<r;k++)for(v=M[k],p=J[k]||h,B=0;B<u;B++)0===p[B]&&(v[B]=T);({pixelType:d}=d);return{width:f,height:m,bandCount:r,pixelType:d,depthCount:l,statistics:c,pixels:M,mask:h,bandMasks:a===r&&1<r?J:null,noDataValues:n}};g.getBlobInfo=function(M,T={}){M=M instanceof Uint8Array?M.subarray(T.inputOffset??0):new Uint8Array(M,T.inputOffset??0);return K.getBlobInfo(M)};g.isLoaded=function(){return R};g.load=function(){return ba?ba:ba=(new Promise((M,
T)=>N(["../../../chunks/lerc-wasm"],M,T))).then(M=>M.lercWasm).then(({default:M})=>M({locateFile:T=>F.getAssetUrl(`esri/layers/support/rasterFormats/${T}`)})).then(M=>{t(M);R=!0})};g.pixelTypeInfoMap=W;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(N){function g(W,ba,R,K=!0){if(0!==ba%4||0!==R%4){var M=new ArrayBuffer(4*Math.ceil(R/4));M=new Uint8Array(M);W=new Uint8Array(W,ba,R);if(K)for(K=0;K<M.length;K+=
4)M[K]=W[K+3],M[K+1]=W[K+2],M[K+2]=W[K+1],M[K+3]=W[K];else M.set(W);return new Uint32Array(M.buffer)}if(K){K=new Uint8Array(W,ba,R);M=new Uint8Array(K.length);for(W=0;W<M.length;W+=4)M[W]=K[W+3],M[W+1]=K[W+2],M[W+2]=K[W+1],M[W+3]=K[W];return new Uint32Array(M.buffer)}return new Uint32Array(W,ba,R/4)}function F(){const W=[];for(let ba=0;257>=ba;ba++)W[ba]=[ba];return W}function C(W,ba){for(let R=0;R<ba.length;R++)W.push(ba[R])}const t=new Set;t.add(511);t.add(1023);t.add(2047);t.add(4095);t.add(8191);
N.decode=function(W,ba,R,K=!0){W=g(W,ba,R,K);ba=9;K=F();let M=32,T=K.length,J=[],w=1,z=W[0],n=0;const f=W.length;R=8*(4*f-R);const m=[];for(;null!=z;){if(M>=ba)M-=ba,n=z>>>32-ba,z<<=ba;else{n=z>>>32-M;z=W[w++];var r=ba-M;M=32-r;n=(n<<r)+(z>>>M);z<<=r}if(257===n)break;if(256===n)ba=9,K=F(),T=K.length,J=[];else{r=K[n];if(null==r){if(n>K.length)throw Error("data integrity issue: code does not exist on code page");J.push(J[0]);K[T++]=J.slice();C(m,J)}else C(m,r),J.push(r[0]),1<J.length&&(K[T++]=J.slice()),
J=r.slice();t.has(T)&&ba++;0===M&&(z=W[w++],M=32);if(w>f||w===f&&M<=R)break}}return new Uint8Array(m)};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Raw":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],function(N){const g=F=>{let C=1;switch(F){case Uint8Array:case Int8Array:C=1;break;case Uint16Array:case Int16Array:C=2;break;case Uint32Array:case Int32Array:case Float32Array:C=4;break;case Float64Array:C=8}return C};return function(){function F(){}
F.decode=function(C,t){var W=t.pixelType;const ba=[],R=t.width*t.height;var K=Math.floor(C.byteLength/(t.width*t.height*g(t.pixelType)));const {bandIds:M,format:T}=t;t=M&&M.length||Math.floor(C.byteLength/(t.width*t.height*g(t.pixelType)));var J=C.byteLength-C.byteLength%(R*g(W)),w=new W(C,0,R*K);let z,n,f,m,r=null;if("bip"===T)for(z=0;z<t;z++){f=new W(R);m=M?M[z]:z;for(n=0;n<R;n++)f[n]=w[n*K+m];ba.push(f)}else if("bsq"===T)for(z=0;z<t;z++)m=M?M[z]:z,ba.push(w.subarray(m*R,(m+1)*R));if(J<C.byteLength-
1)if(C=C.slice(J),8*C.byteLength<R)r=null;else{C=new Uint8Array(C,0,Math.ceil(R/8));W=new Uint8Array(R);for(J=w=J=t=K=0;J<C.length-1;J++)for(t=C[J],w=7;0<=w;w--)W[K++]=t>>w&1;for(w=7;K<R-1;)t=C[C.length-1],W[K++]=t>>w&1,w--;r=W}return{pixels:ba,mask:r}};return N._createClass(F)}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./pixelRangeUtils ./TiffTags ./utils ../../../chunks/Zlib".split(" "),function(N,
g,F,C,t,W,ba,R,K){function M(A,y){let Q="unknown";3===A?Q=64===y?"f64":"f32":1===A?1===y?Q="u1":2===y?Q="u2":4===y?Q="u4":8>=y?Q="u8":16>=y?Q="u16":32>=y&&(Q="u32"):2===A&&(8>=y?Q="s8":16>=y?Q="s16":32>=y&&(Q="s32"));return Q}function T(A){let y=null;switch(A?A.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":y=Uint8Array;break;case "u16":y=Uint16Array;break;case "u32":y=Uint32Array;break;case "s8":y=Int8Array;break;case "s16":y=Int16Array;break;case "s32":y=Int32Array;break;case "f64":y=
Float64Array;break;default:y=Float32Array}return y}function J(A,y){return{x:y[0]*A.x+y[1]*A.y+y[2],y:y[3]*A.x+y[4]*A.y+y[5]}}function w(A,y){return A.get(y)?.values?.[0]}function z(A,y,Q,V=0,ea=ba.TIFF_TAGS,x=4){var D=8===x;const P=D?k(new DataView(A,Q,8),0,y):(new DataView(A,Q,2)).getUint16(0,y),X=4+2*x;var fa=D?8:2;D=fa+P*X;if(Q+D>A.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:D};const ha=Q+D+4<=A.byteLength?v(new DataView(A,Q+D,8===x?8:4),0,y,8===x):null;Q+=fa;fa=new Map;
let ia,ma,aa,wa=0,e=0;for(let O=0;O<P;O++){var q=new DataView(A,Q+X*O,X);ia=q.getUint16(0,y);aa=q.getUint16(2,y);ma=ba.getTagName(ia,ea);const S=[];2===x?(wa=q.getUint16(4,y),e=q.getUint16(6,y)):4===x?(wa=q.getUint32(4,y),e=q.getUint32(8,y)):8===x&&(wa=v(q,4,y,!0),e=v(q,12,y,!0),S.push(q.getUint32(12,y)),S.push(q.getUint32(16,y)));q={id:ia,type:aa,valueCount:wa,valueOffset:e,valueOffsets:S,values:null};b(A,y,q,V,!1,x);fa.set(ma,q)}return{success:!0,ifd:fa,nextIFD:ha,requiredBufferSize:D}}function n(A,
y){if(1!==y&&2!==y&&4!==y)return A;const Q=new Uint8Array(A),V=8/y;A=new Uint8Array(A.byteLength*V);let ea=0;const x=2**y-1;for(let D=0;D<Q.length;D++){const P=Q[D];for(let X=0;X<V;X++)A[ea++]=P<<y*X>>>8-y&x}return A.buffer}function f(A,y,Q){const V=new F.JpegImage;V.parse(A);V.colorTransform=6===Q?-1:0;A=V.getData(V.width,V.height,1!==y);return new Uint8Array(A.buffer)}function m(A){A=(new K.Zlib(A)).getBytes();var y=new ArrayBuffer(A.length);y=new Uint8Array(y);y.set(A);return y}async function r(A,
y,Q,V,ea){var x=R.isPlatformLittleEndian===y,D=w(Q,"BITSPERSAMPLE"),P=w(Q,"SAMPLESPERPIXEL")??1,X=w(Q,"PHOTOMETRICINTERPRETATION"),fa=w(Q,"SAMPLEFORMAT")??1,ha=M(fa,D),ia=w(Q,"COMPRESSION")??1,ma=T(ha);if(34887===ia)return await C.load(),C.decode(A,{inputOffset:V}).pixels[0];if(1===ia)X=A.slice(V,V+ea),y=new Uint8Array(X);else if(8===ia||32946===ia)y=new Uint8Array(A,V,ea),y=m(y),X=y.buffer;else if(6===ia)y=new Uint8Array(A,V,ea),y=f(y,P,X),X=y.buffer;else if(7===ia){const aa=Q.get("JPEGTABLES").values,
wa=aa.length-2;y=new Uint8Array(wa+ea-2);for(let e=0;e<wa;e++)y[e]=aa[e];A=new Uint8Array(A,V+2,ea-2);for(V=0;V<A.length;V++)y[wa+V]=A[V];y=f(y,P,X);X=y.buffer}else if(5===ia)y=t.decode(A,V,ea,y),X=y.buffer;else throw Error("tiff-decode: unsupport compression "+ia);X=n(X,D);if("u8"!==ha&&"s8"!==ha&&!x)switch(X=new ArrayBuffer(y.length),x=new Uint8Array(X),ha){case "u16":case "s16":for(ha=0;ha<y.length;ha+=2)x[ha]=y[ha+1],x[ha+1]=y[ha];break;case "u32":case "s32":case "f32":for(ha=0;ha<y.length;ha+=
4)x[ha]=y[ha+3],x[ha+1]=y[ha+2],x[ha+2]=y[ha+1],x[ha+3]=y[ha]}D=new ma(X);x=w(Q,"PREDICTOR")??1;ha=w(Q,"TILEWIDTH");y=w(Q,"TILELENGTH");if(1<x&&(5===ia||8===ia||32946===ia)&&ha&&y){ia=c(Q);ma=new ma(D.length);ma.set(D);Q=3===fa&&3===x;ia=ia?1:P;P=Q?4:1;fa=ha*P*ia;Q&&(ma=new Uint8Array(ma.buffer));for(x=0;x<y;x++)for(D=x*fa,X=ia;X<fa;X++)ma[D+X]+=ma[D+X-ia];if(Q){Q=new Uint8Array(ma.length);ia*=ha;for(ha=0;ha<y;ha++)for(x=ha*fa,D=0;D<ia;D++)for(X=0;X<P;X++)Q[x+D*P+X]=ma[x+D+(P-X-1)*ia];D=new Float32Array(Q.buffer)}else D=
ma}return D}async function l(A,y,Q){const V=Q.get("TILEOFFSETS")?.values;if(void 0===V)return null;const ea=Q.get("TILEBYTECOUNTS")?.values,{width:x,height:D,pixelType:P,tileWidth:X,tileHeight:fa}=a([Q]);var ha=c(Q,y);const ia=w(Q,"SAMPLESPERPIXEL")||y.planes;var ma=x*D,aa=w(Q,"BITSPERSAMPLE"),wa=34887===(w(Q,"COMPRESSION")??1),e=T(P);const q=[];for(var O=0;O<ia;O++)q.push(new e(ma));let S,la,na,ra,qa,ta,ua,za;ma=Math.ceil(x/X);if(0===aa%8)if(wa&&ha&&1<ia)for(ha=Math.round(V.length/ia),aa=0;aa<ha;aa++){var va=
Math.floor(aa/ma)*fa;na=aa%ma*X;e=va*x+na;for(wa=0;wa<ia;wa++)if(O=aa*ia+wa,0!==ea[O])for(O=await r(A,y.littleEndian,Q,V[O],ea[O]),qa=0,ra=e,ua=Math.min(X,x-na),ta=Math.min(fa,D-va),za=q[wa],S=0;S<ta;S++)for(ra=e+S*x,qa=S*X,la=0;la<ua;la++,ra++,qa++)za[ra]=O[qa]}else for(aa=0;aa<V.length;aa++)if(0!==ea[aa])for(va=Math.floor(aa/ma)*fa,na=aa%ma*X,e=va*x+na,O=await r(A,y.littleEndian,Q,V[aa],ea[aa]),qa=0,ra=e,ua=Math.min(X,x-na),ta=Math.min(fa,D-va),va=0;va<ia;va++)if(za=q[va],ha||wa)for(S=0;S<ta;S++)for(ra=
e+S*x,qa=X*fa*va+S*X,la=0;la<ua;la++,ra++,qa++)za[ra]=O[qa];else for(S=0;S<ta;S++)for(ra=e+S*x,qa=S*X*ia+va,la=0;la<ua;la++,ra++,qa+=ia)za[ra]=O[qa];return{width:x,height:D,pixelType:P,pixels:q}}function b(A,y,Q,V=0,ea=!1,x=4){if(Q.values)return!0;var D=Q.type,P=Q.valueCount,X=Q.valueOffset;let fa=[];var ha=I[D],ia=8*ha,ma=P*ha,aa=P*I[D]*8,wa=8===x?64:32;x=Q.valueOffsets;if(aa>wa&&ma>(ea?A.byteLength:A?A.byteLength-X+V:0))return Q.offlineOffsetSize=[X,ma],Q.values=null,!1;if(aa<=wa)if(y||(32>=wa?
X>>>=32-aa:(A=x?.length?x[0]:X>>>0,y=x?.length?x[1]:Math.round((X-A)/4294967296),32>=aa?(X=A>>>32-aa,x[0]=X):(X=A*2**(32-aa)+(y>>>32-aa),x[0]=A,x[1]=y>>>32-aa))),1===P&&ia===wa)fa=[X];else if(64===wa)for(A=x?.length?x[0]:X>>>0,X=x?.length?x[1]:Math.round((X-A)/4294967296),y=A,ha=32,A=1;A<=P;A++)ma=32-ia*A%32,ha<ia?(ma=y<<ma>>>32-ha,aa=X<<32-ha>>>32-ha,y=X,fa.push(ma+aa*2**(ia-ha)),ha-=32-(ia-ha)):(fa.push(y<<ma>>>32-ia),ha-=ia),0===ha&&(ha=32,y=X);else for(A=1;A<=P;A++)fa.push(X<<32-ia*A>>>32-ia);
else for(X-=V,ea&&(X=0),P=X;P<X+ma;P+=ha){switch(D){case 1:ia=(new DataView(A,P,1)).getUint8(0);break;case 2:ia=(new DataView(A,P,1)).getUint8(0);break;case 3:ia=(new DataView(A,P,2)).getUint16(0,y);break;case 4:case 13:ia=(new DataView(A,P,4)).getUint32(0,y);break;case 5:ia=(new DataView(A,P,4)).getUint32(0,y)/(new DataView(A,P+4,4)).getUint32(0,y);break;case 6:ia=(new DataView(A,P,1)).getInt8(0);break;case 7:ia=(new DataView(A,P,1)).getUint8(0);break;case 8:ia=(new DataView(A,P,2)).getInt16(0,y);
break;case 9:ia=(new DataView(A,P,4)).getInt32(0,y);break;case 10:ia=(new DataView(A,P,4)).getInt32(0,y)/(new DataView(A,P+4,4)).getInt32(0,y);break;case 11:ia=(new DataView(A,P,4)).getFloat32(0,y);break;case 12:ia=(new DataView(A,P,8)).getFloat64(0,y);break;case 16:case 18:ia=k(new DataView(A,P,8),0,y);break;case 17:x=new DataView(A,P,8);aa=(ia=y)?x.getInt32(0,ia):x.getUint32(0,ia);x=ia?x.getUint32(4,ia):x.getInt32(4,ia);wa=0<=(ia?aa:x)?1:-1;ia?aa*=wa:x*=wa;ia=wa*(ia?4294967296*x+aa:4294967296*aa+
x);break;default:ia=null}fa.push(ia)}if(2===D){D="";X=fa;fa=[];for(A=0;A<X.length;A++)0===X[A]&&""!==D?(fa.push(D),D=""):D+=String.fromCharCode(X[A]);""===D&&0!==fa.length||fa.push(D)}Q.values=fa;return!0}function a(A){var y=A[0];const Q=w(y,"TILEWIDTH"),V=w(y,"TILELENGTH"),ea=w(y,"IMAGEWIDTH"),x=w(y,"IMAGELENGTH");var D=w(y,"BITSPERSAMPLE");const P=w(y,"SAMPLESPERPIXEL");var X=w(y,"SAMPLEFORMAT")??1;const fa=M(X,D),ha=c(y);var ia=y.get("GDAL_NODATA")?.values;let ma=null;ia?.length&&(ma=ia.map(va=>
parseFloat(va)),ma.some(va=>isNaN(va))&&(ma=null));var aa=w(y,"COMPRESSION")??1;switch(aa){case 1:ia="NONE";break;case 2:case 3:case 4:case 32771:ia="CCITT";break;case 5:ia="LZW";break;case 6:case 7:ia="JPEG";break;case 32773:ia="PACKBITS";break;case 8:case 32946:ia="DEFLATE";break;case 34712:ia="JPEG2000";break;case 34887:ia="LERC";break;default:ia=String(aa)}let wa=!0,e="";L.has(aa)||(wa=!1,e+="unsupported tag compression "+aa);3<X&&(wa=!1,e+="unsupported tag sampleFormat "+X);1!==D&&2!==D&&4!==
D&&0!==D%8&&(wa=!1,e+="unsupported tag bitsPerSample "+D);D=y.get("GEOASCIIPARAMS")?.values?.[0];if(D){var q=(q=D.split("|").find(va=>va.includes("ESRI PE String \x3d ")))?q.replace("ESRI PE String \x3d ",""):"";q=q.startsWith("COMPD_CS")||q.startsWith("PROJCS")||q.startsWith("GEOGCS")?{wkid:null,wkt:q}:null}X=y.get("GEOTIEPOINTS")?.values;D=y.get("GEOPIXELSCALE")?.values;aa=y.get("GEOTRANSMATRIX")?.values;var O=y.has("GEOKEYDIRECTORY")?y.get("GEOKEYDIRECTORY").data:null,S=!1;y=!1;if(O){S=2===w(O,
"GTRasterTypeGeoKey");var la=w(O,"GTModelTypeGeoKey");2===la?(O=w(O,"GeographicTypeGeoKey"),1024<=O&&32766>=O&&(q={wkid:O}),q||32767!==O||(y=!0,q={wkid:4326})):1===la&&(O=w(O,"ProjectedCSTypeGeoKey"),1024<=O&&32766>=O&&(q={wkid:O}))}let na;D&&X&&6<=X.length?(na=[D[0],0,X[3]-X[0]*D[0],0,-Math.abs(D[1]),X[4]-X[1]*D[1]],S&&(na[2]-=.5*na[0]+.5*na[1],na[5]-=.5*na[3]+.5*na[4])):aa&&16===aa.length&&(na=S?[aa[0],aa[1],aa[3]-.5*aa[0],aa[4],aa[5],aa[7]-.5*aa[5]]:[aa[0],aa[1],aa[3],aa[4],aa[5],aa[7]]);if(na){X=
[{x:0,y:x},{x:0,y:0},{x:ea,y:x},{x:ea,y:0}];O=S=Number.POSITIVE_INFINITY;let va=la=Number.NEGATIVE_INFINITY;for(let Da=0;Da<X.length;Da++)aa=J(X[Da],na),S=aa.x>S?S:aa.x,la=aa.x<la?la:aa.x,O=aa.y>O?O:aa.y,va=aa.y<va?va:aa.y;X={xmin:S,xmax:la,ymin:O,ymax:va,spatialReference:q}}else X={xmin:-.5,ymin:.5-x,xmax:ea-.5,ymax:.5,spatialReference:q};y&&(400<X.xmax-X.xmin||361<Math.max(Math.abs(X.xmin),Math.abs(X.xmax)))&&(q=null,X.spatialReference=null);q=d(A);let ra;let qa,ta;if(0<q.length){qa=Math.round(Math.log(ea/
w(q[0],"IMAGEWIDTH"))/Math.LN2);var ua=q[q.length-1];ta=Math.round(Math.log(ea/w(ua,"IMAGEWIDTH"))/Math.LN2);ra=w(ua,"TILEWIDTH");ua=w(ua,"TILELENGTH")}ra=null!=ta&&0<ta?ra||Q:null;ua=null!=ta&&0<ta?ua||V:null;let za;Q&&(za=[{maxCol:Math.ceil(ea/Q)-1,maxRow:Math.ceil(x/V)-1,minRow:0,minCol:0}],q.forEach(va=>{za.push({maxCol:Math.ceil(w(va,"IMAGEWIDTH")/w(va,"TILEWIDTH"))-1,maxRow:Math.ceil(w(va,"IMAGELENGTH")/w(va,"TILELENGTH"))-1,minRow:0,minCol:0})}));aa=A[0].get("GDAL_METADATA")?.values?.[0];aa=
G(aa);e+=" "+H({width:ea,height:x,tileWidth:Q,tileHeight:V,planes:P,ifds:A});A=h(A).length===q.length+1;return{width:ea,height:x,tileWidth:Q,tileHeight:V,planes:P,isBSQ:ha,pixelType:fa,compression:ia,noData:ma,hasMaskBand:A,isSupported:wa,message:e,extent:X,isPseudoGeographic:y,affine:D?null:na,firstPyramidLevel:qa,maximumPyramidLevel:ta,pyramidBlockWidth:ra,pyramidBlockHeight:ua,tileBoundary:za,metadata:aa}}function c(A,y){return(A=A.get("PLANARCONFIGURATION")?.values)?2===A[0]:y?y.isBSQ:!1}function d(A){return A.filter(y=>
1===w(y,"NEWSUBFILETYPE"))}function h(A){return A.filter(y=>{const Q=4===((w(y,"NEWSUBFILETYPE")??0)&4);y=4===w(y,"PHOTOMETRICINTERPRETATION");return Q&&y})}function u(A){const {littleEndian:y,isBigTiff:Q,firstIFDPos:V}=p(A);var ea=V;const x=[];do if(ea=B(A,y,ea,0,ba.TIFF_TAGS,Q?8:4),ea.success)x.push(ea.ifd),ea=ea.nextIFD;else break;while(0<ea);A=a(x);ea=d(x);const D=h(x);return{...A,littleEndian:y,isBigTiff:Q,ifds:x,pyramidIFDs:ea,maskIFDs:D}}function k(A,y,Q){const V=A.getUint32(y,Q);A=A.getUint32(y+
4,Q);return Q?4294967296*A+V:4294967296*V+A}function v(A,y,Q,V){return V?k(A,y,Q):A.getUint32(y,Q)}function p(A){var y=new DataView(A,0,16),Q=y.getUint16(0,!1);A=null;if(18761===Q)A=!0;else if(19789===Q)A=!1;else throw Error("unexpected endianess byte");var V=y.getUint16(2,A);if(42!==V&&43!==V)throw Error("unexpected tiff identifier");Q=4;if(V=43===V){const ea=y.getUint16(Q,A);Q+=2;if(8!==ea)throw Error("unsupported bigtiff version");if(0!==y.getUint16(Q,A))throw Error("unsupported bigtiff version");
Q+=2}y=v(y,Q,A,V);return{littleEndian:A,isBigTiff:V,firstIFDPos:y}}function B(A,y,Q,V=0,ea=ba.TIFF_TAGS,x=4){Q=z(A,y,Q,V,ea,x);let D;const P=Q.ifd;P&&(ba.ifdTags.forEach((X,fa)=>{P.has(fa)&&(D=P.get(fa),D.data=z(A,y,D.valueOffset-V,V,X).ifd)}),P.has("GEOKEYDIRECTORY")&&(D=P.get("GEOKEYDIRECTORY"),(ea=D.values)&&4<ea.length&&(ea=ea[0]+"."+ea[1]+"."+ea[2],D.data=z(A,y,D.valueOffset+6-V,V,ba.GEO_KEYS,2).ifd,D.data&&D.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[ea]}))),
P.has("XMP")&&(D=P.get("XMP"),ea=D.values,"number"===typeof ea[0]&&7===D.type&&(D.values=[g.bytesToUTF8(new Uint8Array(ea))])));return Q}function H(A){const {width:y,height:Q,tileHeight:V,tileWidth:ea}=A,x=A.planes,D=ea?ea*V:y*Q;A=w(A.ifds[0],"BITSPERSAMPLE");let P="";D*x>2**30/(8<A?A/8:1)&&(P=ea?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return P}const I=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],L=new Set([1,5,6,7,8,34712,34887]),
E=(A,y,Q)=>{if(!(A&&0<A.length&&y&&Q))return null;let V,ea,x;const D=A[0].length,P=A.length,X=new Uint8Array(D);for(let ha=0;ha<P;ha++)if(V=A[ha],ea=y[ha],x=Q[ha],0===ha)for(var fa=0;fa<D;fa++)X[fa]=V[fa]<ea||V[fa]>x?0:1;else for(fa=0;fa<D;fa++)X[fa]&&(X[fa]=V[fa]<ea||V[fa]>x?0:1);return X},G=A=>{if(!A)return null;var y=A.match(/<Item(.*?)Item>/gi);if(!y||0===y.length)return null;A=new Map;var Q;for(var V=0;V<y.length;V++){var ea=y[V];var x=ea.slice(6,ea.indexOf("\x3e"));var D=ea.indexOf("sample\x3d");
-1<D&&(Q=ea.slice(D+8,ea.indexOf('"',D+8)));D=ea.indexOf("name\x3d");-1<D&&(x=ea.slice(D+6,ea.indexOf('"',D+6)));x&&(ea=ea.slice(ea.indexOf("\x3e")+1,ea.indexOf("\x3c/Item\x3e")).trim(),null!=Q?A.has(x)?A.get(x)[Q]=ea:A.set(x,[ea]):A.set(x,ea));Q=null}y=A.get("STATISTICS_MINIMUM");x=A.get("STATISTICS_MAXIMUM");V=A.get("STATISTICS_MEAN");ea=A.get("STATISTICS_STDDEV");Q=null;if(y&&x)for(Q=[],D=0;D<y.length;D++)Q.push({min:parseFloat(y[D]),max:parseFloat(x[D]),avg:V&&parseFloat(V[D]),stddev:ea&&parseFloat(ea[D])});
x=A.get("BandName");V=A.get("WavelengthMin");ea=A.get("WavelengthMax");y=null;if(x)for(y=[],D=0;D<x.length;D++)y.push({BandName:x[D],WavelengthMin:V&&parseFloat(V[D]),WavelengthMax:ea&&parseFloat(ea[D])});x=A.get("DataType");return{statistics:Q,bandProperties:y,dataType:x,rawMetadata:A}};N.decode=async function(A,y={}){var Q=y.pyramidLevel||0,V=y.headerInfo||u(A);const {ifds:ea,noData:x}=V;if(0===ea.length)throw Error("no valid image file directory");var D=H(V);if(D)throw D;D=null;var P=-1===Q?ea[ea.length-
1]:ea[Q];y=x??y.noDataValue;if(V.tileWidth)D=await l(A,V,P);else{{const ta=R.isPlatformLittleEndian===V.littleEndian,ua=P.get("STRIPOFFSETS")?.values;if(void 0===ua)A=null;else{var {width:X,height:fa,pixelType:ha}=a([P]);Q=w(P,"SAMPLESPERPIXEL")||V.planes;var ia=w(P,"PHOTOMETRICINTERPRETATION");D=X*fa;var ma=w(P,"BITSPERSAMPLE"),aa=T(ha),wa=new aa(D*Q),e=P.get("STRIPBYTECOUNTS")?.values,q=w(P,"ROWSPERSTRIP"),O=w(P,"COMPRESSION")??1;var S=q;if(0===ma%8)for(P=0;P<ua.length;P++){var la=P*q*X*Q;S=(P+
1)*q>fa?fa-P*q:q;if("u8"===ha||"s8"===ha||ta)if(8===O||32946===O){var na=new Uint8Array(A,ua[P],e[P]);na=m(na);var ra=na.buffer}else 6===O?(na=new Uint8Array(A,ua[P],e[P]),na=f(na,Q,ia),ra=na.buffer):5===O?(na=t.decode(A,ua[P],e[P],V.littleEndian),ra=na.buffer):(e[P]!==S*X*Q*ma/8&&console.log("strip byte counts is different than expected"),ra=A.slice(ua[P],ua[P]+e[P]));else{if(6===O||8===O||32946===O){na=new Uint8Array(A,ua[P],e[P]);var qa=m(na);ra=qa.buffer}else e[P]!==S*X*Q*ma/8&&console.log("strip byte counts is different than expected"),
ra=new ArrayBuffer(e[P]),na=new Uint8Array(A,ua[P],e[P]),qa=new Uint8Array(ra);switch(ha){case "u16":case "s16":for(S=0;S<na.length;S+=2)qa[S]=na[S+1],qa[S+1]=na[S];break;case "u32":case "s32":case "f32":for(S=0;S<na.length;S+=4)qa[S]=na[S+3],qa[S+1]=na[S+2],qa[S+2]=na[S+1],qa[S+3]=na[S]}}ra=n(ra,ma);S=new aa(ra);wa.set(S,la)}ia=[];if(1===Q)ia.push(wa);else for(P=0;P<Q;P++){V=new aa(D);for(A=0;A<D;A++)V[A]=wa[A*Q+P];ia.push(V)}A={width:X,height:fa,pixelType:ha,pixels:ia}}}D=await A}if(!D)return D;
null!=y&&W.convertNoDataToMask(D,y);return D};N.decodeTileOrStrip=async function(A,y){const {headerInfo:Q,ifd:V,offsets:ea,sizes:x}=y;var D=[];for(var P=0;P<ea.length;P++){var X=await r(A,Q.littleEndian,V,ea[P],x[P]||A.byteLength);D.push(X)}var fa=c(V,Q);A=w(V,"BITSPERSAMPLE");P=w(V,"SAMPLEFORMAT")??1;P=M(P,A);var ha=w(V,"SAMPLESPERPIXEL")||Q.planes;const ia=T(P);X=w(V,"TILEWIDTH");const ma=w(V,"TILELENGTH");var aa=w(V,"COMPRESSION")??1;const wa=X*ma;A=[];let e=D[0];const q=34887===aa;for(let O=0;O<
ha;O++){aa=new ia(wa);if(D.length===ha)e=D[O],e.length===wa&&(aa=e);else if(e.length)if(fa||q)aa=e.length===wa?e:e.slice(wa*O,wa*(O+1));else for(let S=0;S<wa;S++)aa[S]=e[S*ha+O];A.push(aa)}D=Q.noData?Q.noData[0]:y.noDataValue;fa=(ha=Q.metadata?Q.metadata.statistics:null)?ha.map(O=>O.min):null;ha=ha?ha.map(O=>O.max):null;P={pixelType:P,width:X,height:ma,pixels:A,noDataValue:D};null!=D?W.convertNoDataToMask(P,D):fa&&ha&&y.applyMinMaxConstraint&&(P.mask=E(A,fa,ha));return P};N.getImageInfo=a;N.getMaskIFDs=
h;N.getPyramidIFDs=d;N.isBSQConfig=c;N.parseFieldValues=b;N.parseHeader=u;N.parseIFD=B;N.parseSignature=p;Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(N){N.bytesToUTF8=function(g,F){let C=0,t="",W=0,ba=0;const R=g.length;for(;C<R;)if(ba=g[C++],W=ba>>4,8>W?W=1:15===W?(W=4,ba=(ba&7)<<18|(g[C++]&63)<<12|(g[C++]&63)<<6|g[C++]&63):14===W?(W=3,ba=(ba&15)<<12|(g[C++]&63)<<6|g[C++]&63):(W=2,ba=(ba&
31)<<6|g[C++]&63),0!==ba||F)t+=String.fromCharCode(ba);return t};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const N=(()=>{const t=[];t[254]="NEWSUBFILETYPE";t[255]="SUBFILETYPE";t[256]="IMAGEWIDTH";t[257]="IMAGELENGTH";t[258]="BITSPERSAMPLE";t[259]="COMPRESSION";t[262]="PHOTOMETRICINTERPRETATION";t[263]="THRESHHOLDING";t[264]="CELLWIDTH";t[265]="CELLLENGTH";t[266]="FILLORDER";t[269]="DOCUMENTNAME";t[270]=
"IMAGEDESCRIPTION";t[271]="MAKE";t[272]="MODEL";t[273]="STRIPOFFSETS";t[274]="ORIENTATION";t[277]="SAMPLESPERPIXEL";t[278]="ROWSPERSTRIP";t[279]="STRIPBYTECOUNTS";t[280]="MINSAMPLEVALUE";t[281]="MAXSAMPLEVALUE";t[282]="XRESOLUTION";t[283]="YRESOLUTION";t[284]="PLANARCONFIGURATION";t[285]="PAGENAME";t[286]="XPOSITION";t[287]="YPOSITION";t[288]="FREEOFFSETS";t[289]="FREEBYTECOUNTS";t[290]="GRAYRESPONSEUNIT";t[291]="GRAYRESPONSECURVE";t[292]="T4OPTIONS";t[293]="T6OPTIONS";t[296]="RESOLUTIONUNIT";t[297]=
"PAGENUMBER";t[300]="COLORRESPONSEUNIT";t[301]="TRANSFERFUNCTION";t[305]="SOFTWARE";t[306]="DATETIME";t[315]="ARTIST";t[316]="HOSTCOMPUTER";t[317]="PREDICTOR";t[318]="WHITEPOINT";t[319]="PRIMARYCHROMATICITIES";t[320]="COLORMAP";t[321]="HALFTONEHINTS";t[322]="TILEWIDTH";t[323]="TILELENGTH";t[324]="TILEOFFSETS";t[325]="TILEBYTECOUNTS";t[326]="BADFAXLINES";t[327]="CLEANFAXDATA";t[328]="CONSECUTIVEBADFAXLINES";t[330]="SUBIFD";t[332]="INKSET";t[333]="INKNAMES";t[334]="NUMBEROFINKS";t[336]="DOTRANGE";t[337]=
"TARGETPRINTER";t[338]="EXTRASAMPLES";t[339]="SAMPLEFORMAT";t[340]="SMINSAMPLEVALUE";t[341]="SMAXSAMPLEVALUE";t[342]="TRANSFERRANGE";t[347]="JPEGTABLES";t[512]="JPEGPROC";t[513]="JPEGIFOFFSET";t[514]="JPEGIFBYTECOUNT";t[515]="JPEGRESTARTINTERVAL";t[517]="JPEGLOSSLESSPREDICTORS";t[518]="JPEGPOINTTRANSFORM";t[519]="JPEGQTABLES";t[520]="JPEGDCTABLES";t[521]="JPEGACTABLES";t[529]="YCBCRCOEFFICIENTS";t[530]="YCBCRSUBSAMPLING";t[531]="YCBCRPOSITIONING";t[532]="REFERENCEBLACKWHITE";t[700]="XMP";t[33550]=
"GEOPIXELSCALE";t[33922]="GEOTIEPOINTS";t[33432]="COPYRIGHT";t[42112]="GDAL_METADATA";t[42113]="GDAL_NODATA";t[50844]="RPCCOEFFICIENT";t[34264]="GEOTRANSMATRIX";t[34735]="GEOKEYDIRECTORY";t[34736]="GEODOUBLEPARAMS";t[34737]="GEOASCIIPARAMS";t[34665]="EXIFIFD";t[34853]="GPSIFD";t[40965]="INTEROPERABILITYIFD";return t})(),g=(()=>{const t=N.slice();t[36864]="ExifVersion";t[40960]="FlashpixVersion";t[40961]="ColorSpace";t[42240]="Gamma";t[37121]="ComponentsConfiguration";t[37122]="CompressedBitsPerPixel";
t[40962]="PixelXDimension";t[40963]="PixelYDimension";t[37500]="MakerNote";t[37510]="UserComment";t[40964]="RelatedSoundFile";t[36867]="DateTimeOriginal";t[36868]="DateTimeDigitized";t[36880]="OffsetTime";t[36881]="OffsetTimeOriginal";t[36882]="OffsetTimeDigitized";t[37520]="SubSecTime";t[37521]="SubSecTimeOriginal";t[37522]="SubSecTimeDigitized";t[37888]="Temperature";t[37889]="Humidity";t[37890]="Pressure";t[37891]="WaterDepth";t[37892]="Acceleration";t[37893]="CameraElevationAngle";t[42016]="ImageUniqueID";
t[42032]="CameraOwnerName";t[42033]="BodySerialNumber";t[42034]="LensSpecification";t[42035]="LensMake";t[42036]="LensModel";t[42037]="LensSerialNumber";t[33434]="ExposureTime";t[33437]="FNumber";t[34850]="ExposureProgram";t[34852]="SpectralSensitivity";t[34855]="PhotographicSensitivity";t[34856]="OECF";t[34864]="SensitivityType";t[34865]="StandardOutputSensitivity";t[34866]="RecommendedExposureIndex";t[34867]="ISOSpeed";t[34868]="ISOSpeedLatitudeyyy";t[34869]="ISOSpeedLatitudezzz";t[37377]="ShutterSpeedValue";
t[37378]="ApertureValue";t[37379]="BrightnessValue";t[37380]="ExposureBiasValue";t[37381]="MaxApertureValue";t[37382]="SubjectDistance";t[37383]="MeteringMode";t[37384]="LightSource";t[37385]="Flash";t[37386]="FocalLength";t[37396]="SubjectArea";t[41483]="FlashEnergy";t[41484]="SpatialFrequencyResponse";t[41486]="FocalPlaneXResolution";t[41487]="FocalPlaneYResolution";t[41488]="FocalPlaneResolutionUnit";t[41492]="SubjectLocation";t[41493]="ExposureIndex";t[41495]="SensingMethod";t[41728]="FileSource";
t[41729]="SceneType";t[41730]="CFAPattern";t[41985]="CustomRendered";t[41986]="ExposureMode";t[41987]="WhiteBalance";t[41988]="DigitalZoomRatio";t[41989]="FocalLengthIn35mmFilm";t[41990]="SceneCaptureType";t[41991]="GainControl";t[41992]="Contrast";t[41993]="Saturation";t[41994]="Sharpness";t[41995]="DeviceSettingDescription";t[41996]="SubjectDistanceRange";return t})(),F=(()=>{const t=[];t[1024]="GTModelTypeGeoKey";t[1025]="GTRasterTypeGeoKey";t[1026]="GTCitationGeoKey";t[2048]="GeographicTypeGeoKey";
t[2049]="GeogCitationGeoKey";t[2050]="GeogGeodeticDatumGeoKey";t[2051]="GeogPrimeMeridianGeoKey";t[2052]="GeogLinearUnitsGeoKey";t[2053]="GeogLinearUnitSizeGeoKey";t[2054]="GeogAngularUnitsGeoKey";t[2055]="GeogAngularUnitSizeGeoKey";t[2056]="GeogEllipsoidGeoKey";t[2057]="GeogSemiMajorAxisGeoKey";t[2058]="GeogSemiMinorAxisGeoKey";t[2059]="GeogInvFlatteningGeoKey";t[2061]="GeogPrimeMeridianLongGeoKey";t[2060]="GeogAzimuthUnitsGeoKey";t[3072]="ProjectedCSTypeGeoKey";t[3073]="PCSCitationGeoKey";t[3074]=
"ProjectionGeoKey";t[3075]="ProjCoordTransGeoKey";t[3076]="ProjLinearUnitsGeoKey";t[3077]="ProjLinearUnitSizeGeoKey";t[3078]="ProjStdParallel1GeoKey";t[3079]="ProjStdParallel2GeoKey";t[3080]="ProjNatOriginLongGeoKey";t[3081]="ProjNatOriginLatGeoKey";t[3082]="ProjFalseEastingGeoKey";t[3083]="ProjFalseNorthingGeoKey";t[3084]="ProjFalseOriginLongGeoKey";t[3085]="ProjFalseOriginLatGeoKey";t[3086]="ProjFalseOriginEastingGeoKey";t[3087]="ProjFalseOriginNorthingGeoKey";t[3088]="ProjCenterLongGeoKey";t[3090]=
"ProjCenterEastingGeoKey";t[3091]="ProjCenterNorthingGeoKey";t[3092]="ProjScaleAtNatOriginGeoKey";t[3093]="ProjScaleAtCenterGeoKey";t[3094]="ProjAzimuthAngleGeoKey";t[3095]="ProjStraightVertPoleLongGeoKey";t[4096]="VerticalCSTypeGeoKey";t[4097]="VerticalCitationGeoKey";t[4098]="VerticalDatumGeoKey";t[4099]="VerticalUnitsGeoKey";return t})(),C=new Map;C.set("EXIFIFD",g);C.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:N,ifdTags:C,GEO_KEYS:F,getTagName:(t,W)=>{W=(W||N)[t];void 0===W&&(W="unknown"+String(t));return W}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(N){const g=new ArrayBuffer(4),F=new Uint8Array(g);(new Uint32Array(g))[0]=1;N.isPlatformLittleEndian=1===F[0];Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock","../rasterFormats/pixelRangeUtils"],
function(N,g,F){function C(b){return null!=b&&"esri.layers.support.PixelBlock"===b.declaredClass&&b.pixels&&0<b.pixels.length}function t(b,a,c,d,h){const u=b.length;h=g.createEmptyBand(h,u);if(a)for(let k=0;k<u;k++)a[k]&&(h[k]=c[b[k]-d]);else for(a=0;a<u;a++)h[a]=c[b[a]-d];return h}function W(b,a,c,d){const h=null!=c&&2<=c.length?new Set(c):null;c=1===c?.length?c[0]:null;const u=!!a?.length;for(let k=0;k<b.length;k++)if(d[k]){const v=b[k];if(u){let p=!1;for(let B=0;B<a.length;B+=2)if(v>=a[B]&&v<=
a[B+1]){p=!0;break}p||(d[k]=0)}d[k]&&(v===c||h?.has(v))&&(d[k]=0)}}function ba(b,a){const c=b[0].length;for(let d=0;d<c;d++)if(a[d]){let h=!1;for(let u=0;u<b.length;u++)if(b[u][d]){h=!0;break}h||(a[d]=0)}}function R(b,a){const c=b[0].length;for(let d=0;d<c;d++)if(a[d]){let h=!1;for(let u=0;u<b.length;u++)if(0===b[u][d]){h=!0;break}h&&(a[d]=0)}}function K(b,a,c,d,h,u,k,v){return{xmin:h<=c*b?0:h<c*b+b?h-c*b:b,ymin:u<=d*a?0:u<d*a+a?u-d*a:a,xmax:h+k<=c*b?0:h+k<c*b+b?h+k-c*b:b,ymax:u+v<=d*a?0:u+v<d*a+
a?u+v-d*a:a}}function M(b,a,c,d,h,u){const {width:k,height:v}=c.block,{x:p,y:B}=c.offset,{width:H,height:I}=c.mosaic;c=K(k,v,d,h,p,B,H,I);let L=0;var E=0;if(u){var G=u.hasGCSSShiftTransform?360:u.halfWorldWidth??0,A=k*u.resolutionX;const y=u.startX+d*A;y<G&&y+A>G?E=u.rightPadding:y>=G&&(L=u.leftMargin-u.rightPadding,E=0)}c.xmax-=E;if("number"===typeof a)for(u=c.ymin;u<c.ymax;u++)for(E=(h*v+u-B)*H+(d*k-p)+L,G=c.xmin;G<c.xmax;G++)b[E+G]=a;else for(u=c.ymin;u<c.ymax;u++)for(E=(h*v+u-B)*H+(d*k-p)+L,G=
u*k,A=c.xmin;A<c.xmax;A++)b[E+A]=a[G+A]}function T(b,a,c={}){const {clipOffset:d,clipSize:h,alignmentInfo:u,blockWidths:k}=c;if(k)return J(b,a,{blockWidths:k});var v=b.find(ea=>C(ea));if(null==v)return null;c=h?h.width:a.width;const p=h?h.height:a.height;var B=v.width,H=v.height;const I=a.width/B,L=a.height/H;a={offset:d||{x:0,y:0},mosaic:h||a,block:{width:B,height:H}};B=v.pixelType;var E=g.getPixelArrayConstructor(B);v=v.pixels.length;H=[];for(var G=0;G<v;G++){var A=new E(c*p);for(var y=0;y<L;y++)for(var Q=
0;Q<I;Q++){var V=b[y*I+Q];C(V)&&(V=V.pixels[G],M(A,V,a,Q,y,u))}H.push(A)}E=b.some(ea=>null==ea||null!=ea.mask&&0<ea.mask.length);A=b.some(ea=>null!=ea&&ea.bandMasks&&1<ea.bandMasks.length);E=E?new Uint8Array(c*p):void 0;A=A?[]:void 0;if(E){for(G=0;G<L;G++)for(y=0;y<I;y++)Q=b[G*I+y],V=null!=Q?Q.mask:null,null!=V?M(E,V,a,y,G,u):Q?M(E,255,a,y,G,u):M(E,0,a,y,G,u);if(A)for(G=0;G<v;G++){y=new Uint8Array(c*p);for(Q=0;Q<L;Q++)for(V=0;V<I;V++){const ea=b[Q*I+V],x=ea?.bandMasks?.[G]??ea?.mask;null!=x?M(y,x,
a,V,Q,u):ea?M(y,255,a,V,Q,u):M(y,0,a,V,Q,u)}A.push(y)}}b=new g({width:c,height:p,pixels:H,pixelType:B,bandMasks:A,mask:E});b.updateStatistics();return b}function J(b,a,c){const d=b.find(y=>null!=y);if(null==d)return null;var h=b.some(y=>null!=y?!!y.mask:!0);const {width:u,height:k}=a;a=h?new Uint8Array(u*k):null;({blockWidths:c}=c);const v=[],p=d.getPlaneCount(),B=g.getPixelArrayConstructor(d.pixelType);if(h)for(let y=0,Q=0;y<b.length;Q+=c[y],y++)if(h=b[y],C(h)){var H=h.mask;for(var I=0;I<k;I++)for(var L=
0;L<c[y];L++)a[I*u+L+Q]=null==H?255:H[I*h.width+L]}H=(h=b.some(y=>null!=y&&y.bandMasks&&1<y.bandMasks.length))?[]:void 0;I=u*k;for(L=0;L<p;L++){const y=new B(I),Q=h?new Uint8Array(I):void 0;for(let V=0,ea=0;V<b.length;ea+=c[V],V++){const x=b[V];if(C(x)){var E=x.pixels[L];if(null!=E){for(var G=0;G<k;G++)for(var A=0;A<c[V];A++)y[G*u+A+ea]=E[G*x.width+A];if(Q)for(E=x.bandMasks?.[L]??x.mask,G=0;G<k;G++)for(A=0;A<c[V];A++)Q[G*u+A+ea]=E?E[G*x.width+A]:255}}}v.push(y);H&&Q&&H.push(Q)}b=new g({width:u,height:k,
mask:a,bandMasks:H,pixels:v,pixelType:d.pixelType});b.updateStatistics();return b}function w(b){if(!C(b))return null;const a=b.clone(),{width:c,height:d,pixels:h}=b;var u=h[0];const k=a.pixels[0];b=b.mask;for(let B=2;B<d-1;B++){const H=new Map;for(var v=B-2;v<B+2;v++)for(var p=0;4>p;p++){const I=v*c+p;f(H,u[I],b?b[I]:1)}k[B*c]=z(H);k[B*c+1]=k[B*c+2]=k[B*c];for(v=3;v<c-1;v++)p=(B-2)*c+v+1,f(H,u[p],b?b[p]:1),p=(B-1)*c+v+1,f(H,u[p],b?b[p]:1),p=B*c+v+1,f(H,u[p],b?b[p]:1),p=(B+1)*c+v+1,f(H,u[p],b?b[p]:
1),p=(B-2)*c+v-3,n(H,u[p],b?b[p]:1),p=(B-1)*c+v-3,n(H,u[p],b?b[p]:1),p=B*c+v-3,n(H,u[p],b?b[p]:1),p=(B+1)*c+v-3,n(H,u[p],b?b[p]:1),k[B*c+v]=z(H);k[B*c+v+1]=k[B*c+v]}for(u=0;u<c;u++)k[u]=k[c+u]=k[2*c+u],k[(d-1)*c+u]=k[(d-2)*c+u];a.updateStatistics();return a}function z(b){if(0===b.size)return 0;let a=0,c=-1,d=0;const h=b.keys();let u=h.next();for(;!u.done;)d=b.get(u.value),d>a&&(c=u.value,a=d),u=h.next();return c}function n(b,a,c){0!==c&&(c=b.get(a),1===c?b.delete(a):b.set(a,c-1))}function f(b,a,c){0!==
c&&b.set(a,b.has(a)?b.get(a)+1:1)}function m(b,a,c){let {x:d,y:h}=a;const {width:u,height:k}=c;if(0===d&&0===h&&k===b.height&&u===b.width)return b;const {width:v,height:p}=b;a=Math.max(0,h);const B=Math.max(0,d),H=Math.min(d+u,v),I=Math.min(h+k,p);if(0>H||0>I||!C(b))return null;d=Math.max(0,-d);h=Math.max(0,-h);var {pixels:L}=b,E=u*k,G=L.length;const A=[];for(var y=0;y<G;y++){var Q=L[y],V=g.createEmptyBand(b.pixelType,E);for(let ea=a;ea<I;ea++){const x=ea*v;let D=(ea+h-a)*u+d;for(let P=B;P<H;P++)V[D++]=
Q[x+P]}A.push(V)}L=new Uint8Array(E);E=b.mask;for(G=a;G<I;G++)for(y=G*v,Q=(G+h-a)*u+d,V=B;V<H;V++)L[Q++]=E?E[y+V]:1;b=new g({width:c.width,height:c.height,pixelType:b.pixelType,pixels:A,mask:L});b.updateStatistics();return b}function r(b,a=!0){if(!C(b))return null;const {pixels:c,width:d,height:h,mask:u,pixelType:k}=b;b=[];const v=Math.round(d/2),p=Math.round(h/2),B=h-1,H=d-1;for(var I=0;I<c.length;I++){var L=c[I],E=g.createEmptyBand(k,v*p),G=0;for(var A=0;A<h;A+=2)for(var y=0;y<d;y+=2){var Q=L[A*
d+y];if(a){var V=y===H?Q:L[A*d+y+1];const ea=A===B?Q:L[A*d+y+d],x=y===H?ea:A===B?V:L[A*d+y+d+1];E[G++]=(Q+V+ea+x)/4}else E[G++]=Q}b.push(E)}I=null;if(null!=u)for(I=new Uint8Array(v*p),L=0,E=0;E<h;E+=2)for(G=0;G<d;G+=2)A=u[E*d+G],a?(y=G===H?A:u[E*d+G+1],Q=E===B?A:u[E*d+G+d],V=G===H?Q:E===B?y:u[E*d+G+d+1],I[L++]=A*y*Q*V?1:0):I[L++]=A;return new g({width:v,height:p,pixelType:k,pixels:b,mask:I})}function l(b,a,c,d,h=0){const {width:u,height:k}=b,{width:v,height:p}=a;b=d.cols;d=d.rows;a=Math.ceil(v/b-
.1/b);const B=Math.ceil(p/d-.1/d);let H,I,L,E,G;const A=a*b;var y=A*B*d;const Q=new Float32Array(y),V=new Float32Array(y),ea=new Uint32Array(y),x=new Uint32Array(y);let D=0,P,X;for(let ia=0;ia<B;ia++)for(let ma=0;ma<a;ma++){var fa=12*(ia*a+ma);y=c[fa];H=c[fa+1];I=c[fa+2];L=c[fa+3];E=c[fa+4];G=c[fa+5];for(var ha=0;ha<d;ha++){D=(ia*d+ha)*A+ma*b;X=(ha+.5)/d;for(let aa=0;aa<ha;aa++)P=(aa+.5)/b,Q[D+aa]=(y*P+H*X+I)*u+h,V[D+aa]=(L*P+E*X+G)*k+h,ea[D+aa]=Math.floor(Q[D+aa]),x[D+aa]=Math.floor(V[D+aa])}fa+=
6;y=c[fa];H=c[fa+1];I=c[fa+2];L=c[fa+3];E=c[fa+4];G=c[fa+5];for(fa=0;fa<d;fa++)for(D=(ia*d+fa)*A+ma*b,X=(fa+.5)/d,ha=fa;ha<b;ha++)P=(ha+.5)/b,Q[D+ha]=(y*P+H*X+I)*u+h,V[D+ha]=(L*P+E*X+G)*k+h,ea[D+ha]=Math.floor(Q[D+ha]),x[D+ha]=Math.floor(V[D+ha])}return{offsets_x:Q,offsets_y:V,offsets_xi:ea,offsets_yi:x,gridWidth:A}}N.NoDataInterpretation=void 0;(function(b){b[b.matchAny=0]="matchAny";b[b.matchAll=1]="matchAll"})(N.NoDataInterpretation||(N.NoDataInterpretation={}));N.MissingBandAction=void 0;(function(b){b[b.bestMatch=
0]="bestMatch";b[b.fail=1]="fail"})(N.MissingBandAction||(N.MissingBandAction={}));N.MAX_MAP_SIZE_GPU=6;N.approximateTransform=function(b,a,c,d,h="nearest"){if(!C(b))return null;"majority"===h&&(b=w(b));const {pixels:u,mask:k,bandMasks:v,pixelType:p}=b,B=b.width;var H=b.height;const I=g.getPixelArrayConstructor(p),L=u.length,{width:E,height:G}=a;b=!1;for(var A=0;A<c.length;A+=3)-1===c[A]&&-1===c[A+1]&&-1===c[A+2]&&(b=!0);const {offsets_x:y,offsets_y:Q,offsets_xi:V,offsets_yi:ea,gridWidth:x}=l({width:B,
height:H},a,c,d,"majority"===h?.5:0);let D;a=(X,fa,ha,ia)=>{const ma=X instanceof Float32Array||X instanceof Float64Array?0:.5;for(let aa=0;aa<G;aa++){D=aa*x;for(let wa=0;wa<E;wa++){if(0>y[D]||0>Q[D])X[aa*E+wa]=0;else if(ia)X[aa*E+wa]=fa[V[D]+ea[D]*B];else{const e=Math.floor(y[D]),q=Math.floor(Q[D]),O=Math.ceil(y[D]),S=Math.ceil(Q[D]),la=y[D]-e,na=Q[D]-q;X[aa*E+wa]=!ha||ha[e+q*B]&&ha[O+q*B]&&ha[e+S*B]&&ha[O+S*B]?(1-na)*((1-la)*fa[e+q*B]+la*fa[O+q*B])+na*((1-la)*fa[e+S*B]+la*fa[O+S*B])+ma:fa[V[D]+
ea[D]*B]}D++}}};c=[];d=v?.length===L;H=[];for(A=0;A<L;A++){if(d){var P=new Uint8Array(E*G);a(P,v[A],v[A],!0);H.push(P)}P=new I(E*G);a(P,u[A],d?v[A]:k,"nearest"===h||"majority"===h);c.push(P)}h=new g({width:E,height:G,pixelType:p,pixels:c,bandMasks:d?H:void 0});if(null!=k)h.mask=new Uint8Array(E*G),a(h.mask,k,k,!0);else if(b)for(h.mask=new Uint8Array(E*G),b=0;b<E*G;b++)h.mask[b]=0>y[b]||0>Q[b]?0:1;h.updateStatistics();return h};N.clip=m;N.colorize=function(b,a){if(!C(b)||!a||!a.indexedColormap&&!a.indexed2DColormap)return b;
const c=b.clone();var d=c.pixels;let h=c.mask;const u=c.width*c.height;if(1!==d.length)return b;const {indexedColormap:k,indexed2DColormap:v,offset:p,alphaSpecified:B}=a;b=0;d=d[0];a=new Uint8Array(d.length);const H=new Uint8Array(d.length),I=new Uint8Array(d.length);var L=0;if(k){const E=k.length-1;if(null!=h)for(b=0;b<u;b++)h[b]&&(L=4*(d[b]-p),L<p||L>E?h[b]=0:(a[b]=k[L],H[b]=k[L+1],I[b]=k[L+2],h[b]=k[L+3]));else{h=new Uint8Array(u);for(b=0;b<u;b++)L=4*(d[b]-p),L<p||L>E?h[b]=0:(a[b]=k[L],H[b]=k[L+
1],I[b]=k[L+2],h[b]=k[L+3]);c.mask=h}}else if(v)if(null!=h)for(b=0;b<u;b++)h[b]&&(L=v[d[b]],a[b]=L[0],H[b]=L[1],I[b]=L[2],h[b]=L[3]);else{h=new Uint8Array(u);for(b=0;b<u;b++)L=v[d[b]],a[b]=L[0],H[b]=L[1],I[b]=L[2],h[b]=L[3];c.mask=h}c.pixels=[a,H,I];c.statistics=null;c.pixelType="u8";c.maskIsAlpha=B;return c};N.compositeBands=function(b){if(!b?.length||b.some(p=>!C(p)))return null;if(1===b.length)return b[0]?.clone()??null;const {width:a,height:c,pixelType:d}=b[0];if(b.some(p=>p.width!==a||p.height!==
c))return null;const h=b.map(({mask:p})=>p).filter(p=>null!=p);let u=null;h.length&&(u=new Uint8Array(a*c),u.set(h[0]),1<h.length&&R(h.slice(1),u));const k=[];b.forEach(({pixels:p})=>k.push(...p));const v=[];b.map(({statistics:p})=>p).filter(p=>p?.length).forEach(p=>v.push(...p));return new g({pixelType:d,width:a,height:c,mask:u,pixels:k,statistics:v.length?v:null})};N.createColormapLUT=function(b){if(b){var a=b.colormap;if(a&&0!==a.length){a=a.sort((B,H)=>B[0]-H[0]);var c=0;0>a[0][0]&&(c=a[0][0]);
var d=Math.max(256,a[a.length-1][0]-c+1),h=new Uint8Array(4*d),u=[],k=0,v=0,p=5===a[0].length;if(65536<d)return a.forEach(B=>{u[B[0]-c]=p?B.slice(1):B.slice(1).concat([255])}),{indexed2DColormap:u,offset:c,alphaSpecified:p};if(b.fillUnspecified)for(b=a[v],k=b[0]-c;k<d;k++)h[4*k]=b[1],h[4*k+1]=b[2],h[4*k+2]=b[3],h[4*k+3]=p?b[4]:255,k===b[0]-c&&(b=v===a.length-1?b:a[++v]);else for(k=0;k<a.length;k++)b=a[k],v=4*(b[0]-c),h[v]=b[1],h[v+1]=b[2],h[v+2]=b[3],h[v+3]=p?b[4]:255;return{indexedColormap:h,offset:c,
alphaSpecified:p}}}};N.createMaskLUT=function(b,a,c){if("u8"!==b&&"s8"!==b&&"u16"!==b&&"s16"!==b)return null;var d=b.includes("16")?65536:256;b=b.includes("s")?-d/2:0;d=new Uint8Array(d);if(a)for(let u=0;u<a.length;u++){var h=Math.ceil(a[2*u]-b);const k=Math.floor(a[2*u+1]-b);for(;h<=k;h++)d[h]=255}else d.fill(255);if(c)for(a=0;a<c.length;a++)d[c[a]-b]=0;return{lut:d,offset:b}};N.createRemapLUT=function(b){const {srcPixelType:a,inputRanges:c,outputValues:d,allowUnmatched:h,noDataRanges:u,isLastInputRangeInclusive:k,
outputPixelType:v}=b;if("u8"!==a&&"s8"!==a&&"u16"!==a&&"s16"!==a)return null;var p=a.includes("16")?65536:256;b=a.includes("s")?-p/2:0;const B=g.createEmptyBand(v,p);p=new Uint8Array(p);h&&p.fill(255);const [H,I]=F.getPixelValueRange(v);if(c?.length&&d?.length){var L=c.map(y=>y-1E-6);L[0]=c[0];k&&(L[L.length-1]=c[c.length-1]);for(var E=0;E<L.length;E++){var G=d[E]>I?I:d[E]<H?H:d[E],A=Math.ceil(L[2*E]-b);const y=Math.floor(L[2*E+1]-b);for(;A<=y;A++)B[A]=G,p[A]=255}}if(u?.length)for(L=0;L<u.length;L++)for(G=
Math.ceil(u[2*L]-b),E=Math.floor(u[2*L+1]-b);G<=E;G++)p[G]=0;return{lut:B,offset:b,mask:p}};N.extractBands=function(b,a){return a?.length&&C(b)?b.extractBands(a):b};N.getClipBounds=K;N.getLocalArithmeticNorthRotations=function(b,a){const {coefficients:c,spacing:d}=a,{offsets_x:h,offsets_y:u,gridWidth:k}=l(b,b,c,{rows:d[0],cols:d[1]}),{width:v,height:p}=b;b=new Float32Array(v*p);a=180/Math.PI;for(let I=0;I<p;I++)for(let L=0;L<v;L++){var B=I*k+L,H=0===I?B:B-k;const E=I===p-1?B:B+k;B=h[H]-h[E];H=u[E]-
u[H];isNaN(B)||isNaN(H)?b[I*v+L]=90:(H=Math.atan2(H,B)*a,H=(360+H)%360,b[I*v+L]=H)}return b};N.interpolateOffsets=l;N.isValidPixelBlock=C;N.lookupBandValues=t;N.lookupPixels=function(b,a){if(!C(b))return null;const {pixels:c,mask:d}=b,h=c.length;let u=a.lut;const {offset:k}=a;u&&1===u[0].length&&(u=c.map(()=>u));const v=[];a=a.outputPixelType||"u8";for(let p=0;p<h;p++){const B=t(c[p],d,u[p],k||0,a);v.push(B)}b=new g({width:b.width,height:b.height,pixels:v,mask:d,pixelType:a});b.updateStatistics();
return b};N.mask=function(b,a){if(!C(b))return null;const {width:c,height:d,pixels:h}=b;var u=c*d;const k=new Uint8Array(u);b.mask?k.set(b.mask):k.fill(255);b=h.length;const {includedRanges:v,noDataValues:p,outputPixelType:B,matchAll:H,lookups:I}=a;if(I){u=[];for(a=0;a<b;a++){var L=I[a];L=t(h[a],k,L.lut,L.offset||0,"u8");u.push(L)}1===u.length?k.set(u[0]):H?ba(u,k):R(u,k)}else if(H){a=[];for(L=0;L<b;L++){const E=new Uint8Array(u);E.set(k);W(h[L],v?.slice(2*L,2*L+2),p?.[L],E);a.push(E)}1===a.length?
k.set(a[0]):ba(a,k)}else for(u=0;u<b;u++)W(h[u],v?.slice(2*u,2*u+2),p?.[u],k);return new g({width:c,height:d,pixelType:B,pixels:h,mask:k})};N.mosaic=T;N.mosaicPixelData=function(b,a){if(!b||0===b.length)return null;var c=b.find(I=>I.pixelBlock);if(!c||null==c.pixelBlock)return null;var d=(c.extent.xmax-c.extent.xmin)/c.pixelBlock.width;const h=(c.extent.ymax-c.extent.ymin)/c.pixelBlock.height,u=.01*Math.min(d,h),k=b.sort((I,L)=>Math.abs(I.extent.ymax-L.extent.ymax)>u?L.extent.ymax-I.extent.ymax:Math.abs(I.extent.xmin-
L.extent.xmin)>u?I.extent.xmin-L.extent.xmin:0);var v=Math.min.apply(null,k.map(I=>I.extent.xmin));const p=Math.min.apply(null,k.map(I=>I.extent.ymin)),B=Math.max.apply(null,k.map(I=>I.extent.xmax)),H=Math.max.apply(null,k.map(I=>I.extent.ymax));b={x:Math.round((a.xmin-v)/d),y:Math.round((H-a.ymax)/h)};v={width:Math.round((B-v)/d),height:Math.round((H-p)/h)};d={width:Math.round((a.xmax-a.xmin)/d),height:Math.round((a.ymax-a.ymin)/h)};if(Math.round(v.width/c.pixelBlock.width)*Math.round(v.height/c.pixelBlock.height)!==
k.length||0>b.x||0>b.y||v.width<d.width||v.height<d.height)return null;c=k.map(I=>I.pixelBlock);c=T(c,v,{clipOffset:b,clipSize:d});return{extent:a,pixelBlock:c}};N.remap=function(b,a){if(!C(b))return null;const {width:c,height:d}=b,{inputRanges:h,outputValues:u,outputPixelType:k,noDataRanges:v,allowUnmatched:p,isLastInputRangeInclusive:B}=a;a=b.pixels[0];const H=g.createEmptyBand(k,a.length),I=b.mask,L=new Uint8Array(c*d);I?L.set(I):L.fill(255);const E=b.pixelType.startsWith("f")?1E-6:0;b=h.map(D=>
D-E);b[0]=h[0];b[b.length-1]=h[h.length-1]+(B?1E-6:0);var G=h.length/2;const [A,y]=F.getPixelValueRange(k);for(var Q=0;Q<d;Q++)for(var V=0;V<c;V++){var ea=Q*c+V;if(L[ea]){var x=a[ea];let D=!1;for(let P=G-1;0<=P;P--)if(x===b[2*P]||x>b[2*P]&&x<b[2*P+1]){H[ea]=u[P];D=!0;break}D||(p?H[ea]=x>y?y:x<A?A:x:L[ea]=0)}}if(b=v?.length)for(G=0;G<d;G++)for(Q=0;Q<c;Q++)if(V=G*c+Q,!I||I[V])for(ea=a[V],x=0;x<b;x+=2)if(ea>=v[x]&&ea<=v[x+1]){H[V]=0;L[V]=0;break}return new g({width:c,height:d,pixelType:k,pixels:[H],
mask:L})};N.remapColor=function(b,a){if(!C(b))return null;b=b.clone();var {pixels:c}=b;const d=b.width*b.height,h=a.length,u=Math.floor(h/2),k=a[Math.floor(u)];c=c[0];let v,p,B,H,I,L,E=!1;const G=new Uint8Array(d),A=new Uint8Array(d),y=new Uint8Array(d);let Q=b.mask;const V=4===a[0].mappedColor.length;Q||(Q=new Uint8Array(d),Q.fill(V?255:1),b.mask=Q);for(I=0;I<d;I++)if(Q[I]){v=c[I];E=!1;L=u;p=k;B=0;for(H=h-1;1<H-B;){if(v===p.value){E=!0;break}v>p.value?B=L:H=L;L=Math.floor((B+H)/2);p=a[Math.floor(L)]}E||
(v===a[B].value?(p=a[B],E=!0):v===a[H].value?(p=a[H],E=!0):v<a[B].value?(E=!1,p=null):v>a[B].value&&(v<a[H].value?(p=a[B],E=!0):H===h-1?(E=!1,p=null):(p=a[H],E=!0)));E?(G[I]=p.mappedColor[0],A[I]=p.mappedColor[1],y[I]=p.mappedColor[2],Q[I]=p.mappedColor[3]):G[I]=A[I]=y[I]=Q[I]=0}b.pixels=[G,A,y];b.mask=Q;b.pixelType="u8";b.maskIsAlpha=V;return b};N.resampleByMajority=w;N.setValidBoundary=function(b,a,c){if(!C(b))return null;const {width:d,height:h}=b,u=a.x;a=a.y;const k=c.width+u;c=c.height+a;if(0>
u||0>a||k>d||c>h||0===u&&0===a&&k===d&&c===h)return b;b.mask||(b.mask=new Uint8Array(d*h));const v=b.mask;for(let p=0;p<h;p++){const B=p*d;for(let H=0;H<d;H++)v[B+H]=p<a||p>=c||H<u||H>=k?0:1}b.updateStatistics();return b};N.split=function(b,a,c){if(!C(b))return null;const {width:d,height:h}=a;let {width:u,height:k}=b;const v=new Map,p={x:0,y:0};c=null==c?1:1+c;for(let B=0;B<c;B++){const H=Math.ceil(u/d),I=Math.ceil(k/h);for(let L=0;L<I;L++){p.y=L*h;for(let E=0;E<H;E++){p.x=E*d;const G=m(b,p,a);v.set(`${B}/${L}/${E}`,
G)}}B<c-1&&(b=r(b));u=Math.round(u/2);k=Math.round(k/2)}return v};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/rasterFunctionHelper":function(){define("exports ../../../core/colorUtils ../../../core/Error ../../../core/lang ./AspectFunction ./BandArithmeticFunction ./ColormapFunction ./CompositeBandFunction ./ConvolutionFunction ./CurvatureFunction ./ExtractBandFunction ./LocalFunction ./MaskFunction ./NDVIFunction ./RemapFunction ./SlopeFunction ./StatisticsHistogramFunction ./StretchFunction ./TableFunction".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T,J,w,z,n,f,m,r,l){function b(G,A){({rasterFunctionArguments:G}=G);G&&(G.rasters||[G.raster]).forEach(y=>{y&&"number"!==typeof y&&("string"===typeof y?y.startsWith("http")&&(A.includes(y)||A.push(y)):"rasterFunctionArguments"in y&&b(y,A))})}function a(G,A){return"rasters"===A[0]&&Array.isArray(G.rasters)?G.rasters:A.map(y=>G[y])}function c(G){return!!(G&&"object"===typeof G&&G.rasterFunction&&G.rasterFunctionArguments)}function d(G){const {rasterFunction:A,rasterFunctionArguments:y}=
G,Q={};for(const ea in y){let x=y[ea];var V=ea.toLowerCase();if("rasters"===V&&Array.isArray(x))Q.rasters=x.map(D=>c(D)?d(D):D);else switch(c(x)&&(x=d(x)),V){case "dra":Q.dra=x;break;case "pspower":Q.psPower=x;break;case "pszfactor":Q.psZFactor=x;break;case "bandids":Q.bandIds=x;break;default:V=ea[0].toLowerCase()+ea.slice(1),Q[V]=x}}"Local"!==A||Q.rasters?.length||(Q.rasters=["$$"]);return{...G,rasterFunctionArguments:Q}}function h(G,A){const {rasterFunction:y,rasterFunctionArguments:Q}=G;var V=
G.outputPixelType?.toLowerCase();if(null==y||!E.has(y))throw new F("raster-function-helper",`unsupported raster function: ${y}`);var ea=E.get(y);G=("function"===typeof ea.ctor?ea.ctor:ea.ctor["default"]).fromJSON({...G,outputPixelType:V});({rasterArgumentNames:V}=G);ea=[];const x=a(Q,V),D="rasters"===V[0],P=[];for(let X=0;X<x.length;X++){const fa=x[X];let ha;null==fa||"string"===typeof fa&&fa.startsWith("$")?ea.push(A?.raster):"string"===typeof fa?A[fa]&&ea.push(A[fa]):"number"!==typeof fa&&"rasterFunction"in
fa&&(ha=h(fa,A),D||(G.functionArguments[V[X]]=ha),ea.push(ha));D&&P.push(ha??fa)}D&&(G.functionArguments.rasters=P);A&&(G.sourceRasters=ea,A=A.raster?.url)&&(G.mainPrimaryRasterId=A);return G}function u(G,A){if(G&&A)for(const y in G){const Q=G[y];Q&&"object"===typeof Q&&"type"in Q&&("RasterFunctionTemplate"===Q.type?u(Q.arguments,A):"RasterFunctionVariable"===Q.type&&null!=A[Q.name]&&(Q.value=A[Q.name]))}}function k(G,A){if(!G||"object"!==typeof G)return G;const {value:y}=G;if(!y||"object"!==typeof y)return G.isDataset?
"$$":y;if(Array.isArray(y))return 0===y.length?[]:y.map(V=>"object"===typeof V&&"RasterFunctionVariable"===V.type?k(V,A):V);if("value"in y&&["number","string","boolean"].includes(typeof y.value))return y.value;if(G.isDataset&&"Scalar"!==y.type)return"$$";if(!("type"in y))return y;G=y;switch(y.type){case "Scalar":G=y.value;break;case "AlgorithmicColorRamp":G=v(y);break;case "MultiPartColorRamp":G={type:"multipart",colorRamps:y.ArrayOfColorRamp.map(v)};break;case "ArgumentArray":if(y.elements?.length&&
"RasterStatistics"!==y.elements[0].type){G=[];for(let V=0;V<y.elements.length;V++){const ea=y.elements[V];var {type:Q}=ea;if(Q)if("RasterFunctionTemplate"===Q)({renderingRule:Q}=p(ea,A)),G.push(Q),null!=ea._object_id&&A.set(ea._object_id,Q);else if("RasterFunctionVariable"===Q)Q=k(ea,A),G.push(Q),null!=ea._object_id&&A.set(ea._object_id,Q);else throw new F("raster-function-helper","unsupported raster function json.");else G.push(ea)}}else G=y.elements}null!=y._object_id&&A.set(y._object_id,G);return G}
function v(G){const A=G.algorithm??"esriHSVAlgorithm";let {FromColor:y,ToColor:Q}=G;if(!Array.isArray(y)){const {r:V,g:ea,b:x}=g.toRGB({h:y.Hue,s:y.Saturation,v:y.Value});y=[V,ea,x,y.AlphaValue]}if(!Array.isArray(Q)){const {r:V,g:ea,b:x}=g.toRGB({h:Q.Hue,s:Q.Saturation,v:Q.Value});Q=[V,ea,x,Q.AlphaValue]}return{type:"algorithmic",algorithm:A,fromColor:y,toColor:Q}}function p(G,A,y){y&&u(G,y);A={renderingRule:{},templates:A};B(G,A);return A}function B(G,A){if(G&&A.renderingRule){var {renderingRule:y,
templates:Q}=A,{function:V,arguments:ea,_object_id:x}=G;if(V&&ea){null!=x&&Q.set(x,y);y.rasterFunction=V.type.replace("Function","");y.outputPixelType=V.pixelType;G={};y.rasterFunctionArguments=G;for(const D in ea)"type"!==D&&"object_id"!==D&&"_object_ref_id"!==D&&((A=ea[D])&&"object"===typeof A&&"type"in A&&("RasterFunctionTemplate"===A.type||"RasterFunctionVariable"===A.type)?("RasterFunctionVariable"===A.type?G[D]=k(A,Q):(y.rasterFunctionArguments[D]={},B(A,{renderingRule:y.rasterFunctionArguments[D],
templates:Q})),null!=A._object_id&&Q.set(A._object_id,G[D])):G[D]=A);G.DEM&&!G.Raster&&(G.Raster=G.DEM,delete G.DEM);switch(y.rasterFunction){case "Stretch":I(G);break;case "Colormap":"randomcolorramp"===G.ColorRamp?.type?.toLowerCase()&&(delete G.ColorRamp,G.ColormapName="Random");0===G.ColorSchemeType&&delete G.ColorRamp;break;case "Convolution":null!=G.ConvolutionType&&(G.Type=G.ConvolutionType,delete G.ConvolutionType);break;case "Mask":L(G)}}}}function H(G){const {renderingRule:A,templates:y}=
G;if("object"===typeof A&&A?.rasterFunctionArguments&&y.size){({rasterFunctionArguments:G}=A);for(const Q in G){const V=G[Q],ea="_object_ref_id"===Q?V:V&&"object"===typeof V&&"_object_ref_id"in V?V._object_ref_id:null;if(null!=ea){if(!y.has(ea))throw new F("raster-function-helper",`unsupported raster function json. _object_ref_id: ${ea} does not exist`);const x=y.get(ea);"_object_ref_id"!==Q?G[Q]=x:x&&"object"===typeof x&&Object.assign(G,x)}else V&&"object"===typeof V&&(V.rasterFunctionArguments&&
H({renderingRule:V,templates:y}),Array.isArray(V)&&V.forEach((x,D)=>{if("object"===typeof x)if(null!=x._object_ref_id){if(!y.has(x._object_ref_id))throw new F("raster-function-helper",`unsupported raster function json. _object_ref_id: ${V} does not exist`);const P=y.get(ea);P&&"object"===typeof P?Object.assign(x,P):V[D]=P}else H({renderingRule:x,templates:y})}))}}}function I(G){G.Statistics?.length&&"object"===typeof G.Statistics&&(G.Statistics=G.Statistics.map(A=>[A.min,A.max,A.mean,A.standardDeviation]));
null!=G.NumberOfStandardDeviation&&(G.NumberOfStandardDeviations=G.NumberOfStandardDeviation,delete G.NumberOfStandardDeviation)}function L(G){G.NoDataValues?.length&&"string"===typeof G.NoDataValues[0]&&(G.NoDataValues=G.NoDataValues.filter(A=>""!==A).map(A=>Number(A)))}const E=new Map;E.set("Aspect",{desc:"Aspect Function",ctor:t,rasterArgumentNames:["raster"]});E.set("BandArithmetic",{desc:"Band Arithmetic Function",ctor:W,rasterArgumentNames:["raster"]});E.set("Colormap",{desc:"Colormap Function",
ctor:ba,rasterArgumentNames:["raster"]});E.set("CompositeBand",{desc:"CompositeBand Function",ctor:R,rasterArgumentNames:["rasters"]});E.set("Convolution",{desc:"Convolution Function",ctor:K,rasterArgumentNames:["raster"]});E.set("ExtractBand",{desc:"ExtractBand Function",ctor:T,rasterArgumentNames:["raster"]});E.set("Curvature",{desc:"Curvature Function",ctor:M,rasterArgumentNames:["raster"]});E.set("Local",{desc:"Local Function",ctor:J,rasterArgumentNames:["rasters"]});E.set("Mask",{desc:"Mask Function",
ctor:w,rasterArgumentNames:["raster"]});E.set("NDVI",{desc:"NDVI Function",ctor:z,rasterArgumentNames:["raster"]});E.set("Remap",{desc:"Remap Function",ctor:n,rasterArgumentNames:["raster"]});E.set("Slope",{desc:"Slope Function",ctor:f,rasterArgumentNames:["raster"]});E.set("StatisticsHistogram",{desc:"Statistics Histogram Function",ctor:m,rasterArgumentNames:["raster"]});E.set("Stretch",{desc:"Stretch Function",ctor:r,rasterArgumentNames:["raster"]});E.set("Table",{desc:"Attribute Table Function",
ctor:l,rasterArgumentNames:["raster"]});N.create=function(G,A){A=A??{};G=C.clone(G);if("function"in G&&"arguments"in G&&G.arguments){const y=new Map;G=p(G,y,A);H(G);if(!G.renderingRule)throw new F("raster-function-helper","Unsupported raster function json.");G=G.renderingRule}if("rasterFunction"in G)return G=d(G),h(G,A);throw new F("raster-function-helper","unsupported raster function json.");};N.getPrimaryRasterUrls=b;N.getRasterValues=a;N.getSupportedFunctions=function(){const G=new Set;E.forEach((A,
y)=>G.add(y));return G};N.register=function(G,A,y=["raster"],Q=""){E.set(G,{desc:Q,ctor:A,rasterArgumentNames:y})};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/AspectFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./AspectFunctionArguments ./BaseRasterFunction ./surfaceUtils".split(" "),
function(N,g,F,C,t,W,ba,R,K,M){C=function(T){function J(){var z=T.apply(this,arguments)||this;z.functionName="Aspect";z.functionArguments=null;z.rasterArgumentNames=["raster"];z.isGCS=!1;return z}N._inherits(J,T);var w=J.prototype;w._bindSourceRasters=function(){var z=this.sourceRasterInfos[0];this.isGCS=z.spatialReference?.isGeographic??!1;this.outputPixelType=this._getOutputPixelType("f32");z=z.clone();z.pixelType=this.outputPixelType;z.statistics=[{min:-1,max:360,avg:180,stddev:30}];z.histograms=
null;z.colormap=null;z.attributeTable=null;z.bandCount=1;this.rasterInfo=z;return{success:!0,supportsGPU:!0}};w._processPixels=function(z){const n=z.pixelBlocks?.[0];if(null==n)return null;const {extent:f,primaryPixelSizes:m}=z;z=m?.[0];return M.aspect(n,{resolution:null==z?f?{x:f.width/n.width,y:f.height/n.height}:{x:1,y:1}:z})};return N._createClass(J)}(K);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:R,json:{write:!0,
name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"isGCS",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.AspectFunction")],C)})},"esri/layers/support/rasterFunctions/AspectFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/Error ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R,K){var M;F=M=function(T){function J(){return T.apply(this,arguments)||this}N._inherits(J,T);J.prototype.clone=function(){return new M({raster:this.raster})};return N._createClass(J)}(K);return F=M=g.__decorate([R.subclass("esri.layers.support.rasterFunctions.AspectFunctionArguments")],F)})},"esri/layers/support/rasterFunctions/BaseFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(N,g,F,C,t,W,ba,R){F=function(K){function M(){var T=K.apply(this,arguments)||this;T.raster=void 0;return T}N._inherits(M,K);return N._createClass(M)}(F.JSONSupport);g.__decorate([C.property({json:{write:!0}})],F.prototype,"raster",void 0);return F=g.__decorate([R.subclass("esri.layers.support.rasterFunctions.AspectFunctionArguments")],F)})},"esri/layers/support/rasterFunctions/BaseRasterFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../PixelBlock ../RasterInfo".split(" "),
function(N,g,F,C,t,W,ba,R,K,M){const T=new Set(["slope","aspect","curvature","hillshade","shadedrelief"]);F=function(J){function w(){var n=J.apply(this,arguments)||this;n.functionArguments=null;n.readingBufferSize=0;n.id=-1;n.isNoopProcess=!1;n.rawInputBandIds=[];n.isInputBandIdsSwizzled=!1;n.swizzledBandSelection=[];n.isBranch=!1;n._bindingResult=null;return n}N._inherits(w,J);var z=w.prototype;z.bind=function(n,f=!1,m=-1){this.id=m+1;m=this._getRasterValues();let r=!0;for(let b=0;b<m.length;b++){var l=
m[b];if(null!=l&&this._isRasterFunctionValue(l)){l=l.bind(n,f,this.id+b);if(!l.success)return this._bindingResult=l;r=r&&l.supportsGPU}}if(!this.rasterInfo||f)return this.sourceRasterInfos=this._getSourceRasterInfos(n),this._bindingResult=this._bindSourceRasters(),this._bindingResult.success&&this._patchRasterInfo(),this._bindingResult.supportsGPU=r&&this._bindingResult.supportsGPU,this.processInputBandIds(),this._bindingResult;this._bindingResult={success:!0,supportsGPU:!0};this.processInputBandIds();
return this._bindingResult};z.process=function(n){var f=this._getRasterValues();f=0===f.length?n.pixelBlocks??n.primaryPixelBlocks:f.map(m=>this._readRasterValue(m,n));return this._processPixels({...n,pixelBlocks:f})};z.processInputBandIds=function(){var n=this._getRasterValues().filter(this._isRasterFunctionValue);if(1<n.length)return this.rawInputBandIds=n.map(m=>m.processInputBandIds()[0]),this.isInputBandIdsSwizzled=this.rawInputBandIds.some((m,r)=>m!==r),n=n.filter(m=>"ExtractBand"===m.functionName),
n.length&&n.forEach((m,r)=>{m.isInputBandIdsSwizzled=!0;m.swizzledBandSelection=[r,r,r]}),this.rawInputBandIds;var f=n[0];if(f){if(n=f.processInputBandIds(),f.isInputBandIdsSwizzled)return this.rawInputBandIds=n}else{n=[];({bandCount:f}=this.sourceRasterInfos[0]);for(let m=0;m<f;m++)n.push(m)}n=this._getInputBandIds(n);this.isInputBandIdsSwizzled=n.some((m,r)=>m!==r);return this.rawInputBandIds=n};z.getPrimaryRasters=function(){const n=[],f=[];this._getPrimaryRasters(this,n,f);return{rasters:n,rasterIds:f}};
z.getWebGLProcessorDefinition=function(){const n=this._getWebGLParameters(),{raster:f,rasters:m}=this.functionArguments;m&&Array.isArray(m)&&m.length?(n.rasters=m.map(r=>this._isRasterFunctionValue(r)?r.getWebGLProcessorDefinition():"number"===typeof r?{name:"Constant",parameters:{value:r},pixelType:"f32",id:-1,isNoopProcess:!1}:{name:"Identity",parameters:{value:r},pixelType:"f32",id:-1,isNoopProcess:!1}),n.rasters.some(r=>null!=r)||(n.rasters=null)):this._isRasterFunctionValue(f)&&(n.raster=f.getWebGLProcessorDefinition());
return{name:this.functionName,parameters:n,pixelType:this.outputPixelType,id:this.id,isNoopProcess:this.isNoopProcess}};z._getOutputPixelType=function(n){return"unknown"===this.outputPixelType?n:this.outputPixelType??n};z._getWebGLParameters=function(){return{}};z._getInputBandIds=function(n){return n};z._isOutputRoundingNeeded=function(){const {outputPixelType:n}=this;return(n?.startsWith("u")||n?.startsWith("s"))??!1};z._getRasterValues=function(){const {rasterArgumentNames:n}=this;return"rasters"===
n[0]?this.functionArguments.rasters??[]:n.map(f=>this.functionArguments[f]).flat()};z._getSourceRasterInfos=function(n){const f=this._getRasterValues(),{rasterInfos:m,rasterIds:r}=n;if(0===f.length)return m;const l=f.map(a=>{if(a&&"object"===typeof a&&"bind"in a&&a.rasterInfo)return a.rasterInfo;if("string"===typeof a&&r.includes(a))return m[r.indexOf(a)];if("number"!==typeof a)return m[0]}),b=l.find(a=>a)??m[0];l.forEach((a,c)=>{void 0===a&&(l[c]=b)});return l};z._getPrimaryRasterId=function(n){return n?.url};
z._getPrimaryRasters=function(n,f=[],m=[]){for(let l=0;l<n.sourceRasters.length;l++){var r=n.sourceRasters[l];if("number"!==typeof r)if("bind"in r)this._getPrimaryRasters(r,f,m);else{const b=this._getPrimaryRasterId(r);null==b||m.includes(b)||(this.mainPrimaryRasterId===b?(f.unshift(r),m.unshift(b)):(f.push(r),m.push(b)))}}};z._isRasterFunctionValue=function(n){return null!=n&&"object"===typeof n&&"getWebGLProcessorDefinition"in n};z._readRasterValue=function(n,f){var {primaryPixelBlocks:m}=f;if(null==
n||"$$"===n)return n=m[0],null==n?null:n.clone();if("string"===typeof n)return n=f.primaryRasterIds.indexOf(n),-1===n?null:m[n];if("number"===typeof n){m=m[0];if(null==m)return null;const {width:r,height:l,pixelType:b,mask:a}=m;m=a?new Uint8Array(a):null;f=new Float32Array(r*l);f.fill(n);n=Array(this.sourceRasterInfos[0].bandCount).fill(f);return new K({width:r,height:l,pixelType:b,pixels:n,mask:m})}return n.process(f)};z._patchRasterInfo=function(){const {rasterInfo:n}=this;if(n?.keyProperties){var {bandCount:f,
keyProperties:m,statistics:r,histograms:l}=n,b=m.BandProperties;b&&b.length!==f&&(n.keyProperties={...m,BandProperties:void 0});r&&r.length!==f&&(n.statistics=r.length>f?r.slice(0,f):null);l&&l.length!==f&&(n.histograms=l.length>f?l.slice(0,f):null);m.BAND_COUNT&&Number(m.BAND_COUNT)!==f&&(n.keyProperties={...m,BAND_COUNT:"string"===typeof m.BAND_COUNT?String(f):f})}};N._createClass(w,[{key:"supportsGPU",get:function(){return this._bindingResult.supportsGPU}},{key:"flatWebGLFunctionChain",get:function(){var n=
this.getWebGLProcessorDefinition();if(!n)return null;const f=[n];({parameters:n}=n);for(n=n.rasters||n.raster&&[n.raster];n?.length;){f.unshift(...n);var m=[];for(var r=0;r<n.length;r++){var {parameters:l}=n[r];l=l.rasters||l.raster&&[l.raster];l?.length&&m.push(...l)}n=m}for(n=f.length-1;0<=n;n--)f[n].isNoopProcess&&f.splice(n,1);n=!1;for(m=0;m<f.length;m++)r=f[m],r.id=f.length-m-1,{rasters:r}=r.parameters,n=n||null!=r&&1<r.length;m=f.some(({name:b})=>T.has(b.toLowerCase()));return{functions:f,hasBranches:n,
hasSurfaceFunction:m}}}]);return w}(F.JSONSupport);g.__decorate([C.property({json:{write:!0}})],F.prototype,"functionName",void 0);g.__decorate([C.property({json:{write:!0}})],F.prototype,"functionArguments",void 0);g.__decorate([C.property()],F.prototype,"rasterArgumentNames",void 0);g.__decorate([C.property({json:{write:!0}}),t.cast(J=>J?.toLowerCase())],F.prototype,"outputPixelType",void 0);g.__decorate([C.property({json:{write:!0}})],F.prototype,"mainPrimaryRasterId",void 0);g.__decorate([C.property()],
F.prototype,"sourceRasters",void 0);g.__decorate([C.property({type:[M],json:{write:!0}})],F.prototype,"sourceRasterInfos",void 0);g.__decorate([C.property({json:{write:!0}})],F.prototype,"rasterInfo",void 0);g.__decorate([C.property({json:{write:!0}})],F.prototype,"readingBufferSize",void 0);g.__decorate([C.property({json:{write:!0}})],F.prototype,"id",void 0);g.__decorate([C.property()],F.prototype,"isNoopProcess",void 0);g.__decorate([C.property()],F.prototype,"supportsGPU",null);g.__decorate([C.property()],
F.prototype,"rawInputBandIds",void 0);g.__decorate([C.property()],F.prototype,"isInputBandIdsSwizzled",void 0);g.__decorate([C.property()],F.prototype,"swizzledBandSelection",void 0);g.__decorate([C.property()],F.prototype,"isBranch",void 0);g.__decorate([C.property()],F.prototype,"flatWebGLFunctionChain",null);g.__decorate([C.property()],F.prototype,"_bindingResult",void 0);return F=g.__decorate([R.subclass("esri.layers.support.rasterFunctions.BaseRasterFunction")],F)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterBandInfo ./RasterSensorInfo ./RasterStorageInfo".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T,J){var w;F=w=function(z){function n(f){f=z.call(this,f)||this;f.attributeTable=null;f.bandCount=null;f.colormap=null;f.extent=null;f.format=void 0;f.height=null;f.width=null;f.histograms=null;f.keyProperties={};f.multidimensionalInfo=null;f.noDataValue=null;f.pixelSize=null;f.pixelType=null;f.isPseudoSpatialReference=!1;f.spatialReference=null;f.statistics=null;f.storageInfo=null;f.transform=null;return f}N._inherits(n,z);n.prototype.clone=function(){return new w({attributeTable:C.clone(this.attributeTable),
bandCount:this.bandCount,colormap:C.clone(this.colormap),extent:C.clone(this.extent),nativePixelSize:C.clone(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:C.clone(this.histograms),keyProperties:C.clone(this.keyProperties),multidimensionalInfo:C.clone(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:C.clone(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:C.clone(this.spatialReference),
statistics:C.clone(this.statistics),storageInfo:C.clone(this.storageInfo),transform:C.clone(this.transform)})};N._createClass(n,[{key:"bandInfos",get:function(){var f=this.keyProperties.BandProperties;if(!f?.length){f=[];for(var m=1;m<=this.bandCount;m++)f.push(new M({name:"band_"+m}));return f}f=f.map(r=>M.fromJSON(r));for(m=0;m<f.length;m++)f[m].name=f[m].name??"band_"+(m+1);return f}},{key:"dataType",get:function(){const f=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===
f?"standard-time":f}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(f){f&&this._set("nativeExtent",f)}},{key:"nativePixelSize",get:function(){if(null==this.transform||!this.transform.affectsPixelSize)return this.pixelSize;const f=this.nativeExtent;return{x:f.width/this.width,y:f.height/this.height}}},{key:"hasMultidimensionalTranspose",get:function(){return!!this.storageInfo?.transposeInfo}},{key:"sensorInfo",get:function(){if(this.keyProperties?.SensorName)return T.fromJSON(this.keyProperties)}}]);
return n}(F.JSONSupport);g.__decorate([t.property({json:{write:!0}})],F.prototype,"attributeTable",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"bandCount",void 0);g.__decorate([t.property({readOnly:!0})],F.prototype,"bandInfos",null);g.__decorate([t.property({json:{write:!0}})],F.prototype,"colormap",void 0);g.__decorate([t.property({type:String,readOnly:!0})],F.prototype,"dataType",null);g.__decorate([t.property({type:R,json:{write:!0}})],F.prototype,"extent",void 0);g.__decorate([t.property({type:R,
json:{write:!0}})],F.prototype,"nativeExtent",null);g.__decorate([t.property({json:{write:!0}})],F.prototype,"nativePixelSize",null);g.__decorate([t.property({json:{write:!0}})],F.prototype,"format",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"height",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"width",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"hasMultidimensionalTranspose",null);g.__decorate([t.property({json:{write:!0}})],F.prototype,
"histograms",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"keyProperties",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"multidimensionalInfo",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"noDataValue",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"pixelSize",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"pixelType",void 0);g.__decorate([t.property()],F.prototype,"isPseudoSpatialReference",void 0);g.__decorate([t.property({readOnly:!0})],
F.prototype,"sensorInfo",null);g.__decorate([t.property({type:K,json:{write:!0}})],F.prototype,"spatialReference",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"statistics",void 0);g.__decorate([t.property({type:J,json:{write:!0}})],F.prototype,"storageInfo",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"transform",void 0);return F=w=g.__decorate([ba.subclass("esri.layers.support.RasterInfo")],F)})},"esri/layers/support/RasterBandInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(N,g,F,C,t,W,ba,R){function K(T){T=Number(T);return isNaN(T)?void 0:T}var M;F=M=function(T){function J(){var w=T.apply(this,arguments)||this;w.name=null;w.minWavelength=void 0;w.maxWavelength=void 0;w.radianceBias=void 0;w.radianceGain=void 0;w.reflectanceBias=void 0;w.reflectanceGain=void 0;w.solarIrradiance=void 0;return w}N._inherits(J,T);J.prototype.clone=function(){return new M({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,
radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})};return N._createClass(J)}(F.JSONSupport);g.__decorate([C.property({json:{name:"BandName",write:!0}})],F.prototype,"name",void 0);g.__decorate([C.property({json:{name:"WavelengthMin",read:{reader:K},write:!0}})],F.prototype,"minWavelength",void 0);g.__decorate([C.property({json:{name:"WavelengthMax",read:{reader:K},write:!0}})],F.prototype,"maxWavelength",
void 0);g.__decorate([C.property({json:{name:"RadianceBias",read:{reader:K},write:!0}})],F.prototype,"radianceBias",void 0);g.__decorate([C.property({json:{name:"RadianceGain",read:{reader:K},write:!0}})],F.prototype,"radianceGain",void 0);g.__decorate([C.property({json:{name:"ReflectanceBias",read:{reader:K},write:!0}})],F.prototype,"reflectanceBias",void 0);g.__decorate([C.property({json:{name:"ReflectanceGain",read:{reader:K},write:!0}})],F.prototype,"reflectanceGain",void 0);g.__decorate([C.property({json:{name:"SolarIrradiance",
read:{reader:K},write:!0}})],F.prototype,"solarIrradiance",void 0);return F=M=g.__decorate([R.subclass("esri.layers.support.RasterBandInfo")],F)})},"esri/layers/support/RasterSensorInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(N,g,F,C,t,W,ba,R,K,M){function T(w){w=Number(w);return isNaN(w)?void 0:w}var J;F=J=function(w){function z(){var f=w.apply(this,arguments)||this;f.acquisitionDate=void 0;f.cloudCover=void 0;f.productName=void 0;f.sensorName=null;f.sensorAzimuth=void 0;f.sensorElevation=void 0;f.sunAzimuth=void 0;f.sunElevation=void 0;return f}N._inherits(z,w);var n=z.prototype;n.readAcquisitionDate=function(f){return new Date(f)};n.writeAcquisitionDate=function(f,m){m.AcquisitionDate=f.getTime()};n.clone=
function(){return new J({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})};return N._createClass(z)}(F.JSONSupport);g.__decorate([C.property({json:{name:"AcquisitionDate",write:!0}})],F.prototype,"acquisitionDate",void 0);g.__decorate([R.reader("acquisitionDate")],F.prototype,"readAcquisitionDate",null);
g.__decorate([M.writer("acquisitionDate")],F.prototype,"writeAcquisitionDate",null);g.__decorate([C.property({json:{name:"CloudCover",read:{reader:T},write:!0}})],F.prototype,"cloudCover",void 0);g.__decorate([C.property({json:{name:"ProductName",write:!0}})],F.prototype,"productName",void 0);g.__decorate([C.property({json:{name:"SensorName",write:!0}})],F.prototype,"sensorName",void 0);g.__decorate([C.property({json:{name:"SensorAzimuth",read:{reader:T},write:!0}})],F.prototype,"sensorAzimuth",void 0);
g.__decorate([C.property({json:{name:"SensorElevation",read:{reader:T},write:!0}})],F.prototype,"sensorElevation",void 0);g.__decorate([C.property({json:{name:"SunAzimuth",read:{reader:T},write:!0}})],F.prototype,"sunAzimuth",void 0);g.__decorate([C.property({json:{name:"SunElevation",read:{reader:T},write:!0}})],F.prototype,"sunElevation",void 0);return F=J=g.__decorate([K.subclass("esri.layers.support.RasterSensorInfo")],F)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(N,g,F,C,t,W,ba,R){var K;F=K=function(M){function T(){var J=M.apply(this,arguments)||this;J.blockWidth=void 0;J.blockHeight=void 0;J.compression=null;J.origin=null;J.firstPyramidLevel=null;J.maximumPyramidLevel=null;J.pyramidScalingFactor=2;J.pyramidBlockWidth=null;J.pyramidBlockHeight=null;J.isVirtualTileInfo=!1;J.tileInfo=null;J.transposeInfo=null;J.blockBoundary=null;return J}N._inherits(T,M);T.prototype.clone=function(){return new K({blockWidth:this.blockWidth,blockHeight:this.blockHeight,
compression:this.compression,origin:C.clone(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:C.clone(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:C.clone(this.tileInfo),transposeInfo:C.clone(this.transposeInfo),blockBoundary:C.clone(this.blockBoundary)})};return N._createClass(T)}(F.JSONSupport);
g.__decorate([t.property({type:Number,json:{write:!0}})],F.prototype,"blockWidth",void 0);g.__decorate([t.property({type:Number,json:{write:!0}})],F.prototype,"blockHeight",void 0);g.__decorate([t.property({type:String,json:{write:!0}})],F.prototype,"compression",void 0);g.__decorate([t.property({type:R,json:{write:!0}})],F.prototype,"origin",void 0);g.__decorate([t.property({type:Number,json:{write:!0}})],F.prototype,"firstPyramidLevel",void 0);g.__decorate([t.property({type:Number,json:{write:!0}})],
F.prototype,"maximumPyramidLevel",void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"pyramidResolutions",void 0);g.__decorate([t.property({type:Number,json:{write:!0}})],F.prototype,"pyramidScalingFactor",void 0);g.__decorate([t.property({type:Number,json:{write:!0}})],F.prototype,"pyramidBlockWidth",void 0);g.__decorate([t.property({type:Number,json:{write:!0}})],F.prototype,"pyramidBlockHeight",void 0);g.__decorate([t.property({type:Boolean,json:{write:!0}})],F.prototype,"isVirtualTileInfo",
void 0);g.__decorate([t.property({json:{write:!0}})],F.prototype,"tileInfo",void 0);g.__decorate([t.property()],F.prototype,"transposeInfo",void 0);g.__decorate([t.property()],F.prototype,"blockBoundary",void 0);return F=K=g.__decorate([ba.subclass("esri.layers.support.RasterStorageInfo")],F)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(N,g,F){function C(R){let {altitude:K,azimuth:M}=R;const {hillshadeType:T,pixelSizePower:J=
1,pixelSizeFactor:w=1,scalingType:z,isGCS:n,resolution:f}=R;var m="multi-directional"===T?2*R.zFactor:R.zFactor;const {x:r,y:l}=f;R=m/(8*r);var b=m/(8*l);n&&.001<m&&(R/=ba,b/=ba);"adjusted"===z&&(n?(R=r*ba,b=l*ba,R=(m+R**J*w)/(8*R),b=(m+b**J*w)/(8*b)):(R=(m+r**J*w)/(8*r),b=(m+l**J*w)/(8*l)));var a=(90-K)*Math.PI/180;m=Math.cos(a);let c=(360-M+90)*Math.PI/180,d=Math.sin(a)*Math.cos(c);a=Math.sin(a)*Math.sin(c);const h=[315,270,225,360,180,0],u=[60,60,60,60,60,90];var k=new Float32Array([3,5,3,2,1,
4]);const v=k.reduce((L,E)=>L+E);k=k.map(L=>L/v);const p="multi-directional"===T?h.length:1,B=new Float32Array(6),H=new Float32Array(6),I=new Float32Array(6);if("multi-directional"===T)for(let L=0;L<p;L++)K=u[L],M=h[L],a=(90-K)*Math.PI/180,m=Math.cos(a),c=(360-M+90)*Math.PI/180,d=Math.sin(a)*Math.cos(c),a=Math.sin(a)*Math.sin(c),B[L]=m,H[L]=d,I[L]=a;else B.fill(m),H.fill(d),I.fill(a);return{resolution:f,factor:[R,b],sinZcosA:d,sinZsinA:a,cosZ:m,sinZcosAs:H,sinZsinAs:I,cosZs:B,weights:k,hillshadeType:["traditional",
"multi-directional"].indexOf(T)}}function t(R,K){const {width:M,height:T}=R;var J=M*T;const w=new Uint8Array(J),z=null!=R.mask;let n;if(z){n=new Uint8Array(R.mask);for(var f=0;f<n.length;f++)n[f]&&(w[f]=1,n[f]=1)}R=R.pixels[0];f=new Float32Array(J);const m=new Float32Array(J);let r=0;if(K){({resolution:l}=K);var l=l?(l.x+l.y)/2:1;r=200*K.zFactor/(l*l);l=new Float32Array(J)}K=K?.curvatureType;let b;let a;for(J=1;J<T-1;J++){const B=J*M;for(let H=1;H<M-1;H++){const I=B+H;if(!n||0!==n[I]){if(n){if(7>
n[I-M-1]+n[I-M]+n[I-M+1]+n[I-1]+n[I+1]+n[I+M-1]+n[I+M]+n[I+M+1]){w[I]=0;continue}var c=n[I-M-1]?R[I-M-1]:R[I];var d=n[I-M]?R[I-M]:R[I];var h=n[I-M+1]?R[I-M+1]:R[I];var u=n[I-1]?R[I-1]:R[I];var k=n[I+1]?R[I+1]:R[I];b=n[I+M-1]?R[I+M-1]:R[I];var v=n[I+M]?R[I+M]:R[I];a=n[I+M+1]?R[I+M+1]:R[I]}else c=R[I-M-1],d=R[I-M],h=R[I-M+1],u=R[I-1],k=R[I+1],b=R[I+M-1],v=R[I+M],a=R[I+M+1];f[I]=h+k+k+a-(c+u+u+b);m[I]=b+v+v+a-(c+d+d+h);if(null!=l){var p=R[I];const L=.5*(u+k)-p;p=.5*(d+v)-p;"standard"===K?l[I]=-r*(L+
p):(c=(-c+h+b-a)/4,u=(-u+k)/2,d=(d-v)/2,v=u*u,k=d*d,(h=v+k)&&(l[I]="profile"===K?r*(L*v+p*k+c*u*d)/h:-r*(L*k+p*v-c*u*d)/h))}}}}return{outMask:z?w:null,dzxs:f,dzys:m,curvatures:l}}function W(R,K,M){for(var T=0;T<M;T++)R[T*K]=R[T*K+1],R[(T+1)*K-1]=R[(T+1)*K-2];for(T=1;T<K-1;T++)R[T]=R[T+K],R[T+(M-1)*K]=R[T+(M-2)*K]}const ba=1/111E3;N.GCS_FACTOR=ba;N.aspect=function(R,K={}){if(!F.isValidPixelBlock(R))return R;var {resolution:M}=K;K=M?1/M.x:1;M=M?1/M.y:1;const {dzxs:T,dzys:J,outMask:w}=t(R),{width:z,
height:n}=R,f=new Float32Array(z*n);for(let r=1;r<n-1;r++){const l=r*z;for(let b=1;b<z-1;b++){var m=l+b;if(!w||w[m]){const a=T[m]*K;m=J[m]*M;let c=-1;if(0!==a||0!==m)c=90-57.29578*Math.atan2(m,-a),0>c&&(c+=360),360===c?c=0:360<c&&(c%=360);f[l+b]=c}}}W(f,z,n);return new g({width:z,height:n,pixels:[f],mask:w,pixelType:"f32",validPixelCount:R.validPixelCount,statistics:[{minValue:-1,maxValue:360}]})};N.calculateHillshadeParams=C;N.curvature=function(R,K){if(!F.isValidPixelBlock(R))return R;const {curvatures:M,
outMask:T}=t(R,K),{width:J,height:w}=R;W(M,J,w);R=new g({width:J,height:w,pixels:[M],mask:T,pixelType:"f32",validPixelCount:R.validPixelCount});R.updateStatistics();return R};N.hillshade=function(R,K){if(!F.isValidPixelBlock(R))return R;const {factor:M,sinZcosA:T,sinZsinA:J,cosZ:w,sinZcosAs:z,sinZsinAs:n,cosZs:f,weights:m}=C(K),[r,l]=M;K="traditional"===K.hillshadeType;const {width:b,height:a}=R,c=new Uint8Array(b*a),{dzxs:d,dzys:h,outMask:u}=t(R);for(let v=1;v<a-1;v++){const p=v*b;for(let B=1;B<
b-1;B++){const H=p+B;if(!u||u[H]){var k=d[H]*r;const I=h[H]*l,L=Math.sqrt(1+k*k+I*I);let E=0;if(K)k=255*(w+J*I-T*k)/L,0>k&&(k=0),E=k;else{const G=n.length;for(let A=0;A<G;A++){let y=255*(f[A]+n[A]*I-z[A]*k)/L;0>y&&(y=0);E+=y*m[A]}}c[H]=E&255}}}W(c,b,a);return new g({width:b,height:a,pixels:[c],mask:u,pixelType:"u8",validPixelCount:R.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};N.slope=function(R,K){if(!F.isValidPixelBlock(R))return R;var M=K.zFactor,T=K.pixelSizePower??1,J=K.pixelSizeFactor??
1;const w=K.slopeType;var z=K.isGCS;const {x:n,y:f}=K.resolution;K=M/(8*n);let m=M/(8*f);z&&1E-4>Math.abs(M-1)&&(K/=ba,m/=ba);"adjusted"===w&&(K=(M+n**T*J)/(8*n),m=(M+f**T*J)/(8*f));const {dzxs:r,dzys:l,outMask:b}=t(R),{width:a,height:c}=R;M=new Float32Array(a*c);for(T=1;T<c-1;T++)for(J=T*a,z=1;z<a-1;z++){var d=J+z;if(!b||b[d]){var h=r[d]*K;d=l[d]*m;h=Math.sqrt(h*h+d*d);M[J+z]="percent-rise"===w?100*h:57.2957795*Math.atan(h)}}W(M,a,c);R=new g({width:a,height:c,pixels:[M],mask:b,pixelType:"f32",validPixelCount:R.validPixelCount});
R.updateStatistics();return R};N.tintHillshade=function(R,K,M,T){if(F.isValidPixelBlock(R)&&F.isValidPixelBlock(K)){var {min:J,max:w}=T;T=R.pixels[0];var {pixels:z,mask:n}=K;K=z[0];var f=255.00001/(w-J),m=new Uint8ClampedArray(K.length),r=new Uint8ClampedArray(K.length),l=new Uint8ClampedArray(K.length),b=M.length-1;for(let d=0;d<K.length;d++){if(n&&0===n[d])continue;var a=Math.floor((K[d]-J)*f);const [h,u]=M[0>a?0:a>b?b:a];var c=T[d];a=c*u;const k=a*(1-Math.abs(h%2-1));c-=a;switch(Math.floor(h)){case 0:m[d]=
a+c;r[d]=k+c;l[d]=c;break;case 1:m[d]=k+c;r[d]=a+c;l[d]=c;break;case 2:m[d]=c;r[d]=a+c;l[d]=k+c;break;case 3:m[d]=c;r[d]=k+c;l[d]=a+c;break;case 4:m[d]=k+c;r[d]=c;l[d]=a+c;break;case 5:case 6:m[d]=a+c,r[d]=c,l[d]=k+c}}R.pixels=[m,r,l];R.updateStatistics()}};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/BandArithmeticFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BandArithmeticFunctionArguments ./bandIndexUtils ./BaseRasterFunction".split(" "),
function(N,g,F,C,t,W,ba,R,K,M){const T=new Set(["vari","mtvi2","rtvi-core","evi"]);C=function(J){function w(){var n=J.apply(this,arguments)||this;n.functionName="BandArithmetic";n.functionArguments=null;n.rasterArgumentNames=["raster"];return n}N._inherits(w,J);var z=w.prototype;z._bindSourceRasters=function(){this.outputPixelType=this._getOutputPixelType("f32");var n=this.sourceRasterInfos[0];if(2>n.bandCount)return{success:!1,supportsGPU:!1,error:"band-arithmetic-function: source raster has insufficient amount of raster bands"};
n=n.clone();n.pixelType=this.outputPixelType;n.statistics=null;n.histograms=null;n.bandCount="sultan"===this.functionArguments.method?3:1;n.keyProperties={...n.keyProperties,BandProperties:void 0};this.rasterInfo=n;return{success:!0,supportsGPU:!["custom","gvitm","sultan"].includes(this.functionArguments.method)}};z._processPixels=function(n){n=n.pixelBlocks?.[0];if(null==n)return n;const {method:f,bandIndexes:m}=this.functionArguments,r=m.split(" ").map(l=>parseFloat(l));return K.calculateBandIndex(n,
{method:f,bandIndexes:r,equation:m})};z._getWebGLParameters=function(){const n=this.functionArguments.bandIndexes.split(" ").map(l=>parseFloat(l)-1);2===n.length&&n.push(0);var f=this.isInputBandIdsSwizzled?[0,1,2]:n;const m=new Float32Array(3);({method:r}=this.functionArguments);switch(r){case "gndvi":case "nbr":case "ndbi":case "ndvi":case "ndvi-re":case "ndsi":case "ndmi":case "mndwi":f=K.getBandMatrix3([f[0],f[1],0]);var r="ndxi";break;case "ndwi":f=K.getBandMatrix3([f[1],f[0],0]);r="ndxi";break;
case "sr":case "sr-re":case "iron-oxide":case "ferrous-minerals":case "clay-minerals":f=K.getBandMatrix3([f[0],f[1],0]);r="sr";break;case "ci-g":case "ci-re":f=K.getBandMatrix3([f[0],f[1],0]);r="ci";break;case "savi":f=K.getBandMatrix3([f[0],f[1],0]);r="savi";m[0]=n[2]+1;break;case "tsavi":f=K.getBandMatrix3([f[0],f[1],0]);r="tsavi";m[0]=n[2]+1;m[1]=n[3]+1;m[2]=n[4]+1;break;case "msavi":f=K.getBandMatrix3([f[0],f[1],0]);r="msavi";break;case "gemi":f=K.getBandMatrix3([f[0],f[1],0]);r="gemi";break;
case "pvi":f=K.getBandMatrix3([f[0],f[1],0]);r="tsavi";m[0]=n[2]+1;m[1]=n[3]+1;break;case "vari":f=K.getBandMatrix3([f[0],f[1],f[2]]);r="vari";break;case "mtvi2":f=K.getBandMatrix3([f[0],f[1],f[2]]);r="mtvi2";break;case "rtvi-core":f=K.getBandMatrix3([f[0],f[1],f[2]]);r="rtvicore";break;case "evi":f=K.getBandMatrix3([f[0],f[1],f[2]]);r="evi";break;case "wndwi":f=K.getBandMatrix3([f[0],f[1],0]);r="wndwi";m[0]=n[3]?n[3]+1:.5;break;case "bai":f=K.getBandMatrix3([f[1],f[0],0]);r="bai";break;default:f=
K.getBandMatrix3([0,1,2]),r="custom"}return{bandIndexMat3:f,indexType:r,adjustments:m}};z._getInputBandIds=function(n){if("custom"===this.functionArguments.method)return n;var f=this.functionArguments.bandIndexes.split(" ").map(l=>parseFloat(l)-1);const m=n.length;f=f.map(l=>l>=m?m-1:l);const r=T.has(this.functionArguments.method)?3:2;f=f.slice(0,r).map(l=>n[l]);2===f.length&&f.push(0);return f};return N._createClass(w)}(M);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,
"functionName",void 0);g.__decorate([F.property({type:R,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.BandArithmeticFunction")],C)})},"esri/layers/support/rasterFunctions/BandArithmeticFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R,K){var M;t=M=function(T){function J(){var w=T.apply(this,arguments)||this;w.method="custom";return w}N._inherits(J,T);J.prototype.clone=function(){return new M({method:this.method,bandIndexes:this.bandIndexes,raster:F.clone(this.raster)})};return N._createClass(J)}(K);g.__decorate([C.property({json:{type:String,write:!0}})],t.prototype,"bandIndexes",void 0);g.__decorate([W.enumeration(R.bandIndexMethodMap)],t.prototype,"method",void 0);return t=M=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.BandArithmeticFunctionArguments")],
t)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(N,g,F){N.enumeration=function(C,t={}){C=C instanceof g.JSONMap?C:new g.JSONMap(C,t);C={type:t?.ignoreUnknown??!0?C.apiValues:String,json:{type:C.jsonValues,read:t?.readOnly?!1:{reader:C.read},write:{writer:C.write}}};void 0!==t?.readOnly&&(C.readOnly=!!t.readOnly);void 0!==t?.default&&(C.json.default=t.default);void 0!==t?.name&&(C.json.name=t.name);void 0!==t?.nonNullable&&
(C.nonNullable=t.nonNullable);return F.property(C)};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/bandIndexUtils":function(){define(["exports","../../../core/jsonMap","../PixelBlock","./customBandIndexUtils","./pixelUtils"],function(N,g,F,C,t){function W(c,d,h){const u=h.length,k=new Float32Array(u);for(let v=0;v<u;v++)if(null==c||c[v]){const p=d[v],B=h[v],H=p+B;H&&(k[v]=(p-B)/H)}return[k]}function ba(c,d,h){const u=h.length,k=new Float32Array(u);
for(let v=0;v<u;v++)if(null==c||c[v]){const p=d[v],B=h[v];B&&(k[v]=p/B)}return[k]}function R(c,d,h){const u=d.length,k=new Float32Array(u);for(let v=0;v<u;v++)if(null==c||c[v]){const p=d[v],B=h[v];B&&(k[v]=p/B-1)}return[k]}function K(c,d,h,u){const k=h.length,v=new Float32Array(k);for(let p=0;p<k;p++)if(null==c||c[p]){const B=h[p],H=d[p],I=H+B+u;I&&(v[p]=(H-B)/I*(1+u))}return[v]}function M(c,d,h,u,k,v){const p=h.length,B=new Float32Array(p);v=-k*u+v*(1+u*u);for(let H=0;H<p;H++)if(null==c||c[H]){const I=
h[H],L=d[H],E=k*L+I+v;E&&(B[H]=u*(L-u*I-k)/E)}return[B]}function T(c,d,h){const u=h.length,k=new Float32Array(u);for(let v=0;v<u;v++)if(null==c||c[v]){const p=d[v];k[v]=.5*(2*(p+1)-Math.sqrt((2*p+1)**2-8*(p-h[v])))}return[k]}function J(c,d,h){const u=h.length,k=new Float32Array(u);for(let p=0;p<u;p++)if(null==c||c[p]){const B=h[p];var v=d[p];1!==B&&(v=(2*(v*v-B*B)+1.5*v+.5*B)/(v+B+.5),k[p]=v*(1-.25*v)-(B-.125)/(1-B))}return[k]}function w(c,d,h,u,k){const v=h.length,p=new Float32Array(v),B=Math.sqrt(1+
u*u);for(let H=0;H<v;H++)if(null==c||c[H])p[H]=(d[H]-u*h[H]-k)/B;return[p]}function z(c,d){const [h,u,k,v,p,B]=d;d=h.length;const H=new Float32Array(d);for(let I=0;I<d;I++)if(null==c||c[I])H[I]=-.2848*h[I]-.2435*u[I]-.5436*k[I]+.7243*v[I]+.084*p[I]-1.18*B[I];return[H]}function n(c,d){const [h,,u,k,v,p]=d;d=h.length;const B=new Float32Array(d),H=new Float32Array(d),I=new Float32Array(d);for(let L=0;L<d;L++)if(null==c||c[L])B[L]=p[L]?v[L]/p[L]*100:0,H[L]=h[L]?v[L]/h[L]*100:0,I[L]=k[L]?u[L]/k[L]*(v[L]/
k[L])*100:0;return[B,H,I]}function f(c,d){const [h,u,k]=d;d=h.length;const v=new Float32Array(d);for(let p=0;p<d;p++)if(null==c||c[p])for(p=0;p<d;p++){const B=h[p],H=u[p],I=H+B-k[p];I&&(v[p]=(H-B)/I)}return[v]}function m(c,d){const [h,u,k]=d;d=h.length;const v=new Float32Array(d);for(let p=0;p<d;p++)if(null==c||c[p])for(p=0;p<d;p++){const B=h[p],H=u[p],I=k[p];v[p]=1.5*(1.2*(B-I)-2.5*(H-I))*Math.sqrt((2*B+1)**2-6*B-5*Math.sqrt(H)-.5)}return[v]}function r(c,d){const [h,u,k]=d;d=h.length;const v=new Float32Array(d);
for(let p=0;p<d;p++)if(null==c||c[p])for(p=0;p<d;p++){const B=h[p];v[p]=100*(B-u[p])-10*(B-k[p])}return[v]}function l(c,d){const [h,u,k]=d;d=h.length;const v=new Float32Array(d);for(let p=0;p<d;p++)if(null==c||c[p])for(p=0;p<d;p++){const B=h[p],H=u[p],I=B+6*H-7.5*k[p]+1;I&&(v[p]=2.5*(B-H)/I)}return[v]}function b(c,d,h=.5){const [u,k,v]=d;d=k.length;const p=new Float32Array(d);for(let B=0;B<d;B++)if(null==c||c[B])for(B=0;B<d;B++){const H=u[B],I=k[B],L=v[B],E=H+h*I+(1-h)*L;E&&(p[B]=(H-h*I-(1-h)*L)/
E)}return[p]}function a(c,d,h){const u=h.length,k=new Float32Array(u);for(let v=0;v<u;v++)if(null==c||c[v])for(v=0;v<u;v++){const p=(.1-d[v])**2+(.06-h[v])**2;p&&(k[v]=1/p)}return[k]}g=new g.JSONMap({0:"custom",1:"ndvi",2:"savi",3:"tsavi",4:"msavi",5:"gemi",6:"pvi",7:"gvitm",8:"sultan",9:"vari",10:"gndvi",11:"sr",12:"ndvi-re",13:"sr-re",14:"mtvi2",15:"rtvi-core",16:"ci-re",17:"ci-g",18:"ndwi",19:"evi",20:"iron-oxide",21:"ferrous-minerals",22:"clay-minerals",23:"wndwi",24:"bai",25:"nbr",26:"ndbi",
27:"ndmi",28:"ndsi",29:"mndwi"},{useNumericKeys:!0});N.bandIndexMethodMap=g;N.calculateBandIndex=function(c,d){if(!t.isValidPixelBlock(c))return c;const {equation:h,method:u}=d;d=d.bandIndexes.map(B=>B-1);const {pixels:k,mask:v}=c;switch(u){case "gndvi":case "nbr":case "ndbi":case "ndvi":case "ndvi-re":case "ndsi":case "ndmi":case "mndwi":d=W(v,k[d[0]],k[d[1]]);break;case "ndwi":d=W(v,k[d[1]],k[d[0]]);break;case "sr":case "sr-re":case "iron-oxide":case "ferrous-minerals":case "clay-minerals":d=ba(v,
k[d[0]],k[d[1]]);break;case "ci-g":case "ci-re":d=R(v,k[d[0]],k[d[1]]);break;case "savi":d=K(v,k[d[0]],k[d[1]],d[2]+1);break;case "tsavi":d=M(v,k[d[0]],k[d[1]],d[2]+1,d[3]+1,d[4]+1);break;case "msavi":d=T(v,k[d[0]],k[d[1]]);break;case "gemi":d=J(v,k[d[0]],k[d[1]]);break;case "pvi":d=w(v,k[d[0]],k[d[1]],d[2]+1,d[3]+1);break;case "gvitm":d=z(v,[k[d[0]],k[d[1]],k[d[2]],k[d[3]],k[d[4]],k[d[5]]]);break;case "sultan":d=n(v,[k[d[0]],k[d[1]],k[d[2]],k[d[3]],k[d[4]],k[d[5]]]);break;case "vari":d=f(v,[k[d[0]],
k[d[1]],k[d[2]]]);break;case "mtvi2":d=m(v,[k[d[0]],k[d[1]],k[d[2]]]);break;case "rtvi-core":d=r(v,[k[d[0]],k[d[1]],k[d[2]]]);break;case "evi":d=l(v,[k[d[0]],k[d[1]],k[d[2]]]);break;case "wndwi":d=b(v,[k[d[0]],k[d[1]],k[d[2]]],d[3]?d[3]+1:.5);break;case "bai":d=a(v,k[d[0]],k[d[1]]);break;case "custom":d=C.calculateCustomBandIndex(v,k,h);break;default:return c}const p=null!=v?new Uint8Array(v.length):null;null!=v&&null!=p&&p.set(v);c=new F({width:c.width,height:c.height,pixelType:"f32",pixels:d,mask:p});
c.updateStatistics();return c};N.calculateNDVI=function(c,d,h,u){const {mask:k,pixels:v,width:p,height:B}=c;c=v[h];d=v[d];h=d.length;const H=u?new Uint8Array(h):new Float32Array(h),I=u?100:1,L=u?100.5:0;for(let E=0;E<h;E++)if(null==k||k[E]){const G=c[E],A=d[E],y=G+A;y&&(H[E]=(G-A)/y*I+L)}u=new F({width:p,height:B,mask:k,pixelType:u?"u8":"f32",pixels:[H]});u.updateStatistics();return u};N.getBandMatrix3=function(c){const d=new Float32Array(9);d[3*c[0]]=1;d[3*c[1]+1]=1;d[3*c[2]+2]=1;return d};Object.defineProperty(N,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/customBandIndexUtils":function(){define(["exports","../../../core/has"],function(N,g){const F=new Set("+-*/()".split(""));N.calculateCustomBandIndex=function(C,t,W){W=W.replaceAll(" ","");W.startsWith("-")&&(W="0"+W);W.startsWith("+")&&(W=W.slice(1,W.length));W=W.split("");var ba=[],R=[],K="";for(var M=0;M<W.length;M++){const z=W[M];F.has(z)?(""!==K&&R.push(parseFloat(K)),ba.push(z),K=""):"b"===z.toLowerCase()?(M++,K=z.concat(W[M]),
R.push(t[parseInt(K[1],10)-1]),K=""):(K=K.concat(z),M===W.length-1&&R.push(parseFloat(K)))}let {ops:T,nums:J}={ops:ba,nums:R};if(0===T.length){C=1===J.length?J[0]:t[0];if(C instanceof Float32Array)return[C];var w=new Float32Array(t[0].length);"number"===typeof C?w.fill(C):w.set(C);return[w]}for(;0<T.length;){w=T;if(1===w.length)w={opIndex:0,numIndex:0};else{ba=W=0;for(t=0;t<w.length;t++)if("("===w[t])W=t;else if(")"===w[t]){ba=t;break}R=0===ba?w:w.slice(W+1,ba);t=-1;for(K=0;K<R.length;K++)if("*"===
R[K]||"/"===R[K]){t=K;break}if(!(-1<t))for(K=0;K<R.length;K++)if("+"===R[K]||"-"===R[K]){t=K;break}0<ba&&(t+=W+1);W=0;for(ba=0;ba<t;ba++)"("===w[ba]&&W++;w={opIndex:t,numIndex:t-W}}const {numIndex:z,opIndex:n}=w;ba=W=t=void 0;w=C;K=T[n];R=J[z];M=J[z+1];if("number"===typeof R&&"number"===typeof M)w=R+M;else{"number"===typeof R?(t=M,ba=t.length,W=new Float32Array(ba),W.fill(R)):(ba=R.length,W=R,M.constructor===Number?(t=new Float32Array(ba),t.fill(M)):t=M);R=new Float32Array(ba);switch(K){case "+":for(K=
0;K<ba;K++)if(null==w||w[K])R[K]=W[K]+t[K];break;case "-":for(K=0;K<ba;K++)if(null==w||w[K])R[K]=W[K]-t[K];break;case "*":for(K=0;K<ba;K++)if(null==w||w[K])R[K]=W[K]*t[K];break;case "/":for(K=0;K<ba;K++)(null==w||w[K])&&t[K]&&(R[K]=W[K]/t[K]);break;case "(":case ")":throw Error("encountered error with custom band index equation");}w=R}if(1===T.length)break;else{t=T;t.splice(n,1);ba=W=0;do{ba=W=0;for(R=0;R<t.length;R++)if("("===t[R])W=R;else if(")"===t[R]){ba=R;break}ba===W+1&&t.splice(W,2)}while(ba===
W+1);T=t;J.splice(z,2,w)}}return[w]};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/ColormapFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./ColormapFunctionArguments ./colormaps ../../../renderers/support/colorRampUtils".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T){C=function(J){function w(){var n=J.apply(this,arguments)||this;n.functionName="Colormap";n.functionArguments=null;n.rasterArgumentNames=["raster"];n.isNoopProcess=!0;return n}N._inherits(w,J);var z=w.prototype;z._bindSourceRasters=function(){var n=this.sourceRasterInfos[0];if(1<n.bandCount)return{success:!1,supportsGPU:!1,error:"colormap-function: source data must be single band"};let {colormap:f,colormapName:m,colorRamp:r,colorRampName:l}=this.functionArguments;if(!f?.length)if(r)f=
T.convertColorRampToColormap(r,{interpolateAlpha:!0});else if(l){const b=T.getColorRampJSON(l);b&&(f=T.convertColorRampToColormap(b))}else m&&(f=M.getColormapByName(m));if(!f?.length)return{success:!1,supportsGPU:!1,error:"colormap-function: missing colormap argument"};this.outputPixelType=this._getOutputPixelType("u8");n=n.clone();n.pixelType=this.outputPixelType;n.colormap=f;n.bandCount=1;this.rasterInfo=n;return{success:!0,supportsGPU:!0}};z._processPixels=function(n){return n.pixelBlocks?.[0]};
return N._createClass(w)}(R);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:K,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);g.__decorate([F.property()],C.prototype,"isNoopProcess",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"indexedColormap",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.ColormapFunction")],
C)})},"esri/layers/support/rasterFunctions/ColormapFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ../../../renderers/support/colorRampUtils ../../../rest/support/colorRamps".split(" "),function(N,g,F,C,t,W,
ba,R,K,M){var T;R=T=function(J){function w(){return J.apply(this,arguments)||this}N._inherits(w,J);var z=w.prototype;z.castColormapName=function(n){if(!n)return null;n=n.toLowerCase();return K.rasterColormapNames.includes(n)?n:null};z.readColorRamp=function(n){return M.fromJSON(n)};z.readColorRampName=function(n,f){return n?(f=K.colorRampDict.jsonValues.find(m=>m.toLowerCase()===n.toLowerCase()))?K.colorRampDict.fromJSON(f):null:null};z.clone=function(){return new T({colormap:F.clone(this.colormap),
colormapName:this.colormapName,colorRamp:this.colorRamp?.clone(),colorRampName:this.colorRampName})};return N._createClass(w)}(R);g.__decorate([C.property({type:[[Number]],json:{write:!0}})],R.prototype,"colormap",void 0);g.__decorate([C.property({type:String,json:{write:!0}})],R.prototype,"colormapName",void 0);g.__decorate([t.cast("colormapName")],R.prototype,"castColormapName",null);g.__decorate([C.property({types:M.types,json:{write:!0}})],R.prototype,"colorRamp",void 0);g.__decorate([W.reader("colorRamp")],
R.prototype,"readColorRamp",null);g.__decorate([C.property({type:K.colorRampDict.apiValues,json:{type:K.colorRampDict.jsonValues,write:K.colorRampDict.write}})],R.prototype,"colorRampName",void 0);g.__decorate([W.reader("colorRampName")],R.prototype,"readColorRampName",null);return R=T=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.ColormapFunctionArguments")],R)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils","../../core/jsonMap"],
function(N,g,F,C){function t(l,b){if(!l||!b||l.length!==b.length)return!1;for(let a=0;a<l.length;a++)if(l[a]>b[a]+2||l[a]<b[a]-2)return!1;return!0}function W(l){const b=l.clone();b.fromColor=l.toColor;b.toColor=l.fromColor;b.algorithm=l.algorithm;return b}function ba(l){if("multipart"===l.type){l=l.clone();if(!l.colorRamps?.length)return l;l.colorRamps=l.colorRamps.reverse().map(b=>W(b));return l}return W(l)}function R(l,b){if(l){b=b??m;var a=null;"algorithmic"===l.type?b.some(c=>{if(t(l.fromColor.toRgb(),
c.fromColor)&&t(l.toColor.toRgb(),c.toColor))return a=c.id,!0}):"multipart"===l.type&&b.some(c=>{const d=l.colorRamps,h=c.colorRamps;if(d&&h&&d.length===h.length&&!h.some((u,k)=>{if(!t(d[k].fromColor.toRgb(),(new g(u.fromColor)).toRgb())||!t(d[k].toColor.toRgb(),(new g(u.toColor)).toRgb()))return!0})){if(a)return!0;a=c.id}});return a}}function K(l,b,a=!1){if(l){var c=R(l,b);null!=c||a||(l=ba(l),c=R(l,b));return c}}function M(l,b=!1){return(l="string"===typeof l?l:K(l,void 0,b))?r.toJSON(l):null}function T(l){l=
l||{};const b=l.numColors||256;return{...l,numColors:b,distanceOffset:l.distanceOffset||0,interpolateAlpha:!!l.interpolateAlpha,distanceInterval:l.distanceInterval||1/(b-1),isCustomInterval:null!=l.isCustomInterval?l.isCustomInterval:null!==l.distanceInterval&&l.distanceInterval!==1/(b-1),weights:l.weights}}function J(l,b){let {fromColor:a,toColor:c}=l;a=[...a];c=[...c];3===a.length&&(a=a.concat([255]));3===c.length&&(c=c.concat([255]));l=l.algorithm||"esriCIELabAlgorithm";var d=T(b);const {numColors:h,
distanceOffset:u,isCustomInterval:k,interpolateAlpha:v}=d;if(1===h&&0===u)return[a];if(2===h&&0===u&&!k)return[a,c];var p={r:a[0],g:a[1],b:a[2]};b={r:c[0],g:c[1],b:c[2]};if("esriCIELabAlgorithm"===l){l=F.toLAB(p);b=F.toLAB(b);const {numColors:L,distanceOffset:E,distanceInterval:G,isCustomInterval:A}=d;let {l:y,a:Q,b:V}=l;l=(b.l-y)*G;p=(b.a-Q)*G;d=(b.b-V)*G;var B=[];if(E){var H=E/G;y+=H*l;Q+=H*p;V+=H*d}for(H=0;H<L-1;H++)B.push({l:y,a:Q,b:V}),y+=l,Q+=p,V+=d;B.push(A?{l:y,a:Q,b:V}:b);b=B}else if("esriHSVAlgorithm"===
l){l=F.toHSV(p);b=F.toHSV(b);const {numColors:L,distanceOffset:E,distanceInterval:G,isCustomInterval:A}=d;B=0===l.s;H=0===b.s;p=l.h;d=b.h;B&&!H?p=d:H&&!B&&(b={...b,h:p},d=p);B=Math.abs(d-p);180>B?d=(d-p)*G:(B=360-B,d=p>d?B*G:-B*G);B=(b.s-l.s)*G;H=(b.v-l.v)*G;let {s:y,v:Q}=l;l=p;E&&(p=E/G,l=(l+p*d+360)%360,y+=p*B,Q+=p*H);p=[];for(var I=0;I<L-1;I++)p.push({h:l,s:y,v:Q}),l=(l+d+360)%360,y+=B,Q+=H;p.push(A?{h:l,s:y,v:Q}:b);b=p}else{p=F.toLCH(p);b=F.toLCH(b);const {numColors:L,distanceOffset:E,distanceInterval:G,
isCustomInterval:A}=d;d=p.h;B=b.h;l=2*Math.PI;d<=B?(H=B-d,d=B-d-l,d=Math.abs(d)<Math.abs(H)?d:H):(H=B+l-d,d=B-d,d=Math.abs(d)<Math.abs(H)?d:H);d*=G;B=(b.l-p.l)*G;H=(b.c-p.c)*G;let {l:y,c:Q,h:V}=p;E&&(p=E/G,y+=p*B,Q+=p*H,V=(V+p*d+l)%l);p=[];for(I=0;I<L-1;I++)p.push({l:y,c:Q,h:V}),y+=B,Q+=H,V=(V+d+l)%l;p.push(A?{l:y,c:Q,h:V}:b);b=p}l=[];p=a[3]??255;d=((c[3]??255)-p)/(h-1);for(B=0;B<h;B++){const {r:L,g:E,b:G}=F.toRGB(b[B]);l.push([L,E,G,v?Math.round(p+d*B):255])}return l}function w(l,b){const {numColors:a,
interpolateAlpha:c}=T(b);b=b?.weights;({colorRamps:l}=l);if(b){const B=b.reduce((H,I)=>H+I);b=b.map(H=>H/B)}else{b=[];for(var d=0;d<l.length;d++)b[d]=1/l.length}d=[];let h=0,u=0;const k=1/(a-1);let v=!1;for(let B=0;B<l.length;B++){var p=v?0:h*k-u;let H=B===l.length-1?a-1-h:(b[B]-p)/k;v=Math.ceil(H)===H;H=Math.ceil(H);0!==H&&(p/=b[B],p=J(l[B],{numColors:H,interpolateAlpha:c,distanceOffset:p,distanceInterval:k/b[B]}),h+=p.length,d.push(...p),u+=b[B])}b=[...l[l.length-1].toColor];3===b.length&&b.push(255);
d.push(b);return d}function z(l,b){l="toJSON"in l?l.toJSON():l;return"multipart"===l.type?w(l,b):J(l,b)}function n(l){l=F.toHSV(l);return{type:"HsvColor",Hue:l.h,Saturation:l.s,Value:l.v,AlphaValue:255}}function f(l){return{Algorithm:l.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:n(l.fromColor),ToColor:n(l.toColor)}}const m=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,
181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",
fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,
100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},
{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,
171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",
fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,
241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,
137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",
colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,
32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,
246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",
colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},
{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,
255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,
224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],r=new C.JSONMap({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark",
"Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark",
"Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",
Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright",
"Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue",
"Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});N.PREDEFINED_JSON_COLOR_RAMPS=m;N.colorRampDict=r;N.convertColorRampToColormap=function(l,b){l=z(l,b);const a=b?.interpolateAlpha;l.forEach((c,d)=>{c.unshift(d);a||c.pop()});return l};N.convertColorRampToColors=z;N.convertRGBATo32Bit=function(l){l=l.reverse().map(b=>{b=b.toString(16);return 2>b.length?"0"+b:b});return 4294967295&Number.parseInt(l.join(""),16)};N.getColorRampId=
K;N.getColorRampJSON=function(l,b="esriCIELabAlgorithm"){const a=m.find(({id:c})=>c===l);return a?a.colorRamps?{type:"multipart",colorRamps:a.colorRamps.map(c=>({type:"algorithmic",algorithm:b,fromColor:[...c.fromColor],toColor:[...c.toColor]}))}:{type:"algorithmic",algorithm:b,fromColor:[...a.fromColor],toColor:[...a.toColor]}:null};N.getColorRampName=M;N.getRFxArgColorRampValue=function(l){const b=M(l);return b?"algorithmic"===l.type?{...f(l),Name:b}:l.colorRamps?(l=l.colorRamps.map(f),{type:"MultiPartColorRamp",
NumColorRamps:l.length,ArrayOfColorRamp:l,Name:b}):null:null};N.rasterColormapNames="random ndvi ndvi2 ndvi3 elevation gray hillshade".split(" ");Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(N,g,F,C){F={key:"type",base:F,typeMap:{algorithmic:g,multipart:C}};N.fromJSON=function(t){return t&&t.type?"algorithmic"===t.type?g.fromJSON(t):"multipart"===t.type?
C.fromJSON(t):null:null};N.types=F;Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(N,g,F,C,t,W,ba,R,K){var M;K=M=function(T){function J(w){w=
T.call(this,w)||this;w.algorithm=null;w.fromColor=null;w.toColor=null;w.type="algorithmic";return w}N._inherits(J,T);J.prototype.clone=function(){return new M({fromColor:C.clone(this.fromColor),toColor:C.clone(this.toColor),algorithm:this.algorithm})};return N._createClass(J)}(K);g.__decorate([ba.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],K.prototype,"algorithm",void 0);g.__decorate([t.property({type:F,json:{type:[W.Integer],write:!0}})],K.prototype,
"fromColor",void 0);g.__decorate([t.property({type:F,json:{type:[W.Integer],write:!0}})],K.prototype,"toColor",void 0);g.__decorate([t.property({type:["algorithmic"]})],K.prototype,"type",void 0);return K=M=g.__decorate([R.subclass("esri.rest.support.AlgorithmicColorRamp")],K)})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(N,g,F,C,t,W,ba,R){F=function(K){function M(T){T=K.call(this,T)||this;T.type=null;return T}N._inherits(M,K);return N._createClass(M)}(F.JSONSupport);g.__decorate([C.property({readOnly:!0,json:{read:!1,write:!0}})],F.prototype,"type",void 0);return F=g.__decorate([R.subclass("esri.rest.support.ColorRamp")],F)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(N,g,F,C,t,W,ba,R){var K;t=K=function(M){function T(J){J=M.call(this,J)||this;J.colorRamps=null;J.type="multipart";return J}N._inherits(T,M);T.prototype.clone=function(){return new K({colorRamps:F.clone(this.colorRamps)})};return N._createClass(T)}(R);g.__decorate([C.property({type:[ba],json:{write:!0}})],t.prototype,"colorRamps",void 0);g.__decorate([C.property({type:["multipart"]})],t.prototype,"type",void 0);return t=K=g.__decorate([W.subclass("esri.rest.support.MultipartColorRamp")],t)})},
"esri/layers/support/rasterFunctions/colormaps":function(){define(["exports","../../../renderers/support/colorRampUtils"],function(N,g){function F(R,K){const M=[],T=[];for(let J=0;J<R.length-1;J++)M.push({type:"algorithmic",algorithm:"esriHSVAlgorithm",fromColor:R[J].slice(1),toColor:R[J+1].slice(1)}),T.push(R[J+1][0]-R[J][0]);R=R[R.length-1][0];K=K??T;return g.convertColorRampToColors({type:"multipart",colorRamps:M},{numColors:R,weights:K})}function C(){const R=F([[0,255,255,255],[70,0,255,0],[80,
205,173,193],[100,150,150,150],[110,120,51,100],[130,120,100,200],[140,28,3,144],[160,6,0,55],[180,10,25,30],[201,6,7,27]]);for(let K=R.length;256>K;K++)R.push([6,27,7]);return R}function t(){const R=[];for(let K=0;256>K;K++){const M=[];for(let T=0;3>T;T++)M.push(Math.round(255*Math.random()));R.push(M)}return R}const W=[[36,0,255],[36,0,255],[36,0,255],[36,0,255],[112,75,3],[113,76,3],[114,77,3],[115,77,3],[116,78,3],[117,79,3],[118,79,3],[119,80,3],[121,81,4],[122,82,4],[123,82,4],[124,83,4],[125,
84,4],[126,84,4],[127,85,4],[128,86,4],[129,86,4],[130,87,4],[131,88,4],[132,89,4],[133,89,4],[134,90,4],[135,91,4],[136,91,4],[137,92,4],[138,93,4],[139,94,4],[140,94,4],[142,95,5],[143,96,5],[144,96,5],[145,97,5],[146,98,5],[147,99,5],[148,99,5],[149,100,5],[150,101,5],[151,101,5],[152,102,5],[153,103,5],[154,104,5],[155,104,5],[156,105,5],[157,106,5],[158,106,5],[159,107,5],[160,108,5],[161,108,5],[162,109,5],[164,110,6],[165,111,6],[166,111,6],[167,112,6],[168,113,6],[169,113,6],[170,114,6],[171,
115,6],[172,116,6],[173,116,6],[174,117,6],[245,0,0],[245,5,0],[245,10,0],[246,15,0],[246,20,0],[246,25,0],[246,30,0],[247,35,0],[247,40,0],[247,45,0],[247,50,0],[247,55,0],[248,60,0],[248,65,0],[248,70,0],[248,75,0],[249,81,0],[249,86,0],[249,91,0],[249,96,0],[250,101,0],[250,106,0],[250,111,0],[250,116,0],[250,121,0],[251,126,0],[251,131,0],[251,136,0],[251,141,0],[252,146,0],[252,151,0],[252,156,0],[252,156,0],[251,159,0],[250,162,0],[249,165,0],[248,168,0],[247,171,0],[246,174,0],[245,177,0],
[245,179,0],[244,182,0],[243,185,0],[242,188,0],[241,191,0],[240,194,0],[239,197,0],[238,200,0],[237,203,0],[236,206,0],[235,209,0],[234,212,0],[233,215,0],[232,218,0],[231,221,0],[230,224,0],[230,226,0],[229,229,0],[228,232,0],[227,235,0],[226,238,0],[225,241,0],[224,244,0],[223,247,0],[165,247,0],[163,244,0],[161,240,0],[158,237,0],[156,233,1],[154,230,1],[152,227,1],[149,223,1],[147,220,1],[145,216,1],[143,213,1],[140,210,2],[138,206,2],[136,203,2],[134,200,2],[132,196,2],[129,193,2],[127,189,
2],[125,186,3],[123,183,3],[120,179,3],[118,176,3],[116,172,3],[114,169,3],[111,166,3],[109,162,4],[107,159,4],[105,155,4],[103,152,4],[100,149,4],[98,145,4],[96,142,4],[94,138,5],[91,135,5],[89,132,5],[87,128,5],[85,125,5],[82,121,5],[80,118,5],[78,115,6],[76,111,6],[73,108,6],[71,105,6],[69,101,6],[67,98,6],[65,94,6],[62,91,7],[60,88,7],[58,84,7],[56,81,7],[53,77,7],[51,74,7],[49,71,7],[47,67,8],[44,64,8],[42,60,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],
[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,
57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8]],ba=[[36,0,255],[36,0,255],[36,0,255],[36,0,255],[245,20,0],[245,24,0],[245,29,0],[245,31,0],[247,33,0],[247,33,0],[247,37,0],[247,41,0],[247,41,0],[247,41,0],[247,45,0],[247,45,0],[247,47,0],[247,49,0],[247,49,0],[247,54,0],[247,54,0],[247,56,0],[247,58,0],[247,58,0],[250,62,0],[250,62,0],[250,62,0],[250,67,0],[250,67,0],[250,67,0],[250,69,0],[250,71,0],[250,71,
0],[250,75,0],[250,75,0],[250,78,0],[250,79,0],[250,79,0],[250,79,0],[250,81,0],[250,83,0],[250,83,0],[250,87,0],[250,87,0],[250,90,0],[250,92,0],[252,93,0],[252,93,0],[252,97,0],[252,97,0],[252,97,0],[252,97,0],[252,101,0],[252,101,0],[252,101,0],[252,101,0],[252,105,0],[252,105,0],[252,107,0],[252,109,0],[252,109,0],[252,113,13],[255,118,20],[255,119,23],[255,121,25],[255,126,33],[255,132,38],[255,133,40],[255,135,43],[255,141,48],[255,144,54],[255,150,59],[255,152,61],[255,153,64],[255,159,69],
[255,163,77],[255,165,79],[255,168,82],[255,174,87],[255,176,92],[255,181,97],[255,183,99],[255,186,102],[255,191,107],[255,197,115],[255,201,120],[255,203,123],[255,205,125],[255,209,130],[255,214,138],[255,216,141],[255,218,143],[255,224,150],[255,228,156],[255,234,163],[255,236,165],[255,238,168],[255,243,173],[255,248,181],[255,252,186],[253,252,186],[250,252,187],[244,250,180],[238,247,176],[234,246,173],[231,245,169],[223,240,163],[217,237,157],[211,235,150],[205,233,146],[200,230,142],[195,
227,136],[189,224,132],[184,222,126],[180,220,123],[174,217,119],[169,214,114],[163,212,108],[160,210,105],[154,207,101],[148,204,96],[143,201,93],[138,199,88],[134,197,84],[130,194,81],[126,191,77],[117,189,70],[115,186,68],[112,184,64],[106,181,60],[100,179,55],[94,176,49],[92,174,47],[90,173,45],[81,168,37],[75,166,33],[71,163,28],[66,160,24],[62,158,21],[56,156,14],[51,153,0],[51,153,0],[51,153,0],[50,150,0],[50,150,0],[50,150,0],[50,150,0],[49,148,0],[49,148,0],[49,148,0],[48,145,0],[48,145,
0],[48,145,0],[48,145,0],[48,143,0],[48,143,0],[48,143,0],[48,143,0],[47,140,0],[47,140,0],[47,140,0],[47,140,0],[46,138,0],[46,138,0],[46,138,0],[46,138,0],[45,135,0],[45,135,0],[45,135,0],[45,135,0],[44,133,0],[44,133,0],[44,133,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[42,128,0],[42,128,0],[42,128,0],[42,125,0],[42,125,0],[42,125,0],[42,125,0],[41,122,0],[41,122,0],[41,122,0],[41,122,0],[40,120,0],[40,120,0],[40,120,0],[40,120,0],[40,120,0],[39,117,0],[39,117,0],[39,
117,0],[39,117,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],
[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0]];N.getColormapByName=function(R){let K;switch(R){case "elevation":K=F([[0,0,191,191],[51,0,0,255],[102,255,0,255],[153,255,0,127],[204,191,63,127],[256,20,20,20]]);break;case "gray":K=g.convertColorRampToColors({type:"algorithmic",algorithm:"esriHSVAlgorithm",fromColor:[0,0,0],toColor:[255,255,255]});break;case "hillshade":K=F([[0,38,41,54],[69,79,82,90],[131,
156,156,156],[256,253,253,241]],[.268,.238,.495]);break;case "ndvi":K=W;break;case "ndvi2":K=C();break;case "ndvi3":K=ba;break;case "random":K=t()}return K?K=K.map((M,T)=>[T,...M]):null};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/CompositeBandFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./CompositeBandFunctionArguments ./pixelUtils".split(" "),
function(N,g,F,C,t,W,ba,R,K,M){C=function(T){function J(){var z=T.apply(this,arguments)||this;z.functionName="CompositeBand";z.functionArguments=null;z.rasterArgumentNames=["rasters"];return z}N._inherits(J,T);var w=J.prototype;w._bindSourceRasters=function(){var {sourceRasterInfos:z}=this,n=z[0];this.outputPixelType=this._getOutputPixelType(n.pixelType);n=n.clone();n.attributeTable=null;n.colormap=null;n.pixelType=this.outputPixelType;n.bandCount=z.map(({bandCount:f})=>f).reduce((f,m)=>f+m);if(z.every(({statistics:f})=>
null!=f&&f.length)){const f=[];z.forEach(({statistics:m})=>null!=m&&f.push(...m));n.statistics=f}if(z.every(({histograms:f})=>null!=f&&f.length)){const f=[];z.forEach(({histograms:m})=>null!=m&&f.push(...m));n.histograms=f}1<n.bandCount&&(n.colormap=null,n.attributeTable=null);z=z.every(f=>f.keyProperties.BandProperties?.length)?z.flatMap(f=>f.keyProperties.BandProperties):void 0;n.keyProperties={...n.keyProperties,BandProperties:z};this.rasterInfo=n;return{success:!0,supportsGPU:3>=n.bandCount}};
w._processPixels=function(z){({pixelBlocks:z}=z);return z&&null!=z?.[0]?M.compositeBands(z):null};w._getWebGLParameters=function(){return{bandCount:this.rasterInfo.bandCount}};return N._createClass(J)}(R);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:K,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);return C=
g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.CompositeBandFunction")],C)})},"esri/layers/support/rasterFunctions/CompositeBandFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),function(N,
g,F,C,t,W,ba,R){var K;t=K=function(M){function T(){var w=M.apply(this,arguments)||this;w.rasters=[];return w}N._inherits(T,M);var J=T.prototype;J.writeRasters=function(w,z){z.rasters=w.map(n=>"number"===typeof n||"string"===typeof n?n:n.toJSON())};J.clone=function(){return new K({rasters:F.clone(this.rasters)})};return N._createClass(T)}(R);g.__decorate([C.property({json:{write:!0}})],t.prototype,"rasters",void 0);g.__decorate([ba.writer("rasters")],t.prototype,"writeRasters",null);return t=K=g.__decorate([W.subclass("esri.layers.support.rasterFunctions.CompositeBandFunctionArguments")],
t)})},"esri/layers/support/rasterFunctions/ConvolutionFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../rasterFunctionConstants ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./ConvolutionFunctionArguments ./convolutionUtils".split(" "),function(N,g,F,C,t,W,ba,
R,K,M,T,J){C=function(w){function z(){var f=w.apply(this,arguments)||this;f.functionName="Convolution";f.rasterArgumentNames=["raster"];return f}N._inherits(z,w);var n=z.prototype;n._bindSourceRasters=function(){const {convolutionType:f,rows:m,cols:r,kernel:l}=this.functionArguments;if(!Object.values(R.convolutionKernel).includes(f))return{success:!1,supportsGPU:!1,error:`convolution-function: the specified kernel type is not supported ${f}`};if(f!==R.convolutionKernel.none&&m*r!==l.length)return{success:!1,
supportsGPU:!1,error:"convolution-function: the specified rows and cols do not match the length of the kernel"};var b=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType(b.pixelType);b=b.clone();b.pixelType=this.outputPixelType;const a=[R.convolutionKernel.none,R.convolutionKernel.sharpen,R.convolutionKernel.sharpen2,R.convolutionKernel.sharpening3x3,R.convolutionKernel.sharpening5x5];"u8"===this.outputPixelType||a.includes(f)||(b.statistics=null,b.histograms=null);b.colormap=
null;b.attributeTable=null;this.rasterInfo=b;return{success:!0,supportsGPU:25>=l.length}};n._processPixels=function(f){f=f.pixelBlocks?.[0];if(null==f||this.functionArguments.convolutionType===R.convolutionKernel.none)return f;let {kernel:m,rows:r,cols:l}=this.functionArguments;const b=m.reduce((a,c)=>a+c);0!==b&&1!==b&&(m=m.map(a=>a/b));return J.convolute(f,{kernel:m,rows:r,cols:l,outputPixelType:this.outputPixelType})};n._getWebGLParameters=function(){let {kernel:f}=this.functionArguments;const m=
f.reduce((l,b)=>l+b);0!==m&&1!==m&&(f=f.map(l=>l/m));const r=new Float32Array(25);r.set(f);return{kernelRows:this.functionArguments.rows,kernelCols:this.functionArguments.cols,kernel:r,clampRange:K.getPixelValueRange(this.outputPixelType)}};return N._createClass(z)}(M);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:T,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],
C.prototype,"rasterArgumentNames",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.ConvolutionFunction")],C)})},"esri/layers/support/rasterFunctionConstants":function(){define(["exports"],function(N){const g={plus:1,minus:2,times:3,sqrt:4,power:5,abs:10,divide:23,exp:25,exp10:26,exp2:27,int:30,float:32,ln:35,log10:36,log2:37,mod:44,negate:45,roundDown:48,roundUp:49,square:53,floatDivide:64,floorDivide:65},F={bitwiseAnd:11,bitwiseLeftShift:12,bitwiseNot:13,bitwiseOr:14,
bitwiseRightShift:15,bitwiseXOr:16,booleanAnd:17,booleanNot:18,booleanOr:19,booleanXOr:20,equalTo:24,greaterThan:28,greaterThanEqual:29,lessThan:33,lessThanEqual:34,isNull:31,notEqual:46},C={acos:6,asin:7,atan:8,atanh:9,cos:21,cosh:22,sin:51,sinh:52,tan:56,tanh:57,acosh:59,asinh:60,atan2:61},t={majority:38,max:39,mean:40,med:41,min:42,minority:43,range:47,stddev:54,sum:55,variety:58,majorityIgnoreNoData:66,maxIgnoreNoData:67,meanIgnoreNoData:68,medIgnoreNoData:69,minIgnoreNoData:70,minorityIgnoreNoData:71,
rangeIgnoreNoData:72,stddevIgnoreNoData:73,sumIgnoreNoData:74,varietyIgnoreNoData:75},W={setNull:50,conditional:78},ba={...g,...F,...C,...t,...W};N.bandIndexType={userDefined:0,NDVI:1,SAVI:2,TSAVI:3,MSAVI:4,GEMI:5,PVI:6,GVITM:7,Sultan:8,VARI:9,GNDVI:10,SR:11,NDVIRe:12,SRRe:13,MTVI2:14,RTVICore:15,CIRe:16,CIG:17,NDWI:18,EVI:19,ironOxide:20,ferrousMinerals:21,clayMinerals:22,WNDWI:23,BAI:24,NBR:25,NDBI:26,NDMI:27,NDSI:28,MNDWI:29};N.cellStatisticalOperation=t;N.colorRampName={aspect:"Aspect",blackToWhite:"Black to White",
blueBright:"Blue Bright",blueLightToDark:"Blue Light to Dark",blueGreenBright:"Blue-Green Bright",blueGreenLightToDark:"Blue-Green Light to Dark",brownLightToDark:"Brown Light to Dark",brownToBlueGreenDivergingBright:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark:"Brown to Blue Green Diverging, Dark",coefficientBias:"Coefficient Bias",coldToHotDiverging:"Cold to Hot Diverging",conditionNumber:"Condition Number",cyanToPurple:"Cyan to Purple",cyanLightToBlueDark:"Cyan-Light to Blue-Dark",
distance:"Distance",elevation1:"Elevation #1",elevation2:"Elevation #2",errors:"Errors",grayLightToDark:"Gray Light to Dark",greenBright:"Green Bright",greenLightToDark:"Green Light to Dark",greenToBlue:"Green to Blue",orangeBright:"Orange Bright",orangeLightToDark:"Orange Light to Dark",partialSpectrum:"Partial Spectrum",partialSpectrum1Diverging:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright:"Pink to YellowGreen Diverging, Bright",
pinkToYellowGreenDivergingDark:"Pink to YellowGreen Diverging, Dark",precipitation:"Precipitation",prediction:"Prediction",purpleBright:"Purple Bright",purpleToGreenDivergingBright:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark:"Purple to Green Diverging, Dark",purpleBlueBright:"Purple-Blue Bright",purpleBlueLightToDark:"Purple-Blue Light to Dark",purpleRedBright:"Purple-Red Bright",purpleRedLightToDark:"Purple-Red Light to Dark",redBright:"Red Bright",redLightToDark:"Red Light to Dark",
redToBlueDivergingBright:"Red to Blue Diverging, Bright",redToBlueDivergingDark:"Red to Blue Diverging, Dark",redToGreen:"Red to Green",redToGreenDivergingBright:"Red to Green Diverging, Bright",redToGreenDivergingDark:"Red to Green Diverging, Dark",slope:"Slope",spectrumFullBright:"Spectrum-Full Bright",spectrumFullDark:"Spectrum-Full Dark",spectrumFullLight:"Spectrum-Full Light",surface:"Surface",temperature:"Temperature",whiteToBlack:"White to Black",yellowToDarkRed:"Yellow to Dark Red",yellowToGreenToDarkBlue:"Yellow to Green to Dark Blue",
yellowToRed:"Yellow to Red",yellowGreenBright:"Yellow-Green Bright",yellowGreenLightToDark:"Yellow-Green Light to Dark"};N.colormapName={random:"Random",NDVI:"NDVI",NDVI2:"NDVI2",NDVI3:"NDVI3",elevation:"Elevation",gray:"Gray",hillshade:"Hillshade"};N.convolutionKernel={userDefined:-1,lineDetectionHorizontal:0,lineDetectionVertical:1,lineDetectionLeftDiagonal:2,lineDetectionRightDiagonal:3,gradientNorth:4,gradientWest:5,gradientEast:6,gradientSouth:7,gradientNorthEast:8,gradientNorthWest:9,smoothArithmeticMean:10,
smoothing3x3:11,smoothing5x5:12,sharpening3x3:13,sharpening5x5:14,laplacian3x3:15,laplacian5x5:16,sobelHorizontal:17,sobelVertical:18,sharpen:19,sharpen2:20,pointSpread:21,none:255};N.curvatureType={standard:0,platform:1,profile:2};N.localArithmeticOperation=g;N.localConditionalOperation=W;N.localLogicalOperation=F;N.localOperators=ba;N.localTrigonometricOperation=C;N.missingBandAction={bestMatch:0,fail:1};N.noDataInterpretation={matchAny:0,matchAll:1};N.slopeType={degree:1,percentRise:2,adjusted:3};
N.stretchType={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/ConvolutionFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../rasterFunctionConstants ./BaseFunctionArguments ./convolutionUtils".split(" "),
function(N,g,F,C,t,W,ba,R,K){var M;t=M=function(T){function J(){var w=T.apply(this,arguments)||this;w.rows=3;w.cols=3;w.kernel=[0,0,0,0,1,0,0,0,0];return w}N._inherits(J,T);J.prototype.clone=function(){return new M({cols:this.cols,rows:this.rows,kernel:[...this.kernel],convolutionType:this.convolutionType,raster:F.clone(this.raster)})};N._createClass(J,[{key:"convolutionType",set:function(w){this._set("convolutionType",w);const z=K.convolutionKernels.get(w);z&&w!==ba.convolutionKernel.userDefined&&
w!==ba.convolutionKernel.none&&(w=Math.sqrt(z.length),this._set("kernel",z),this._set("cols",w),this._set("rows",w))}}]);return J}(R);g.__decorate([C.property({json:{type:Number,write:!0}})],t.prototype,"rows",void 0);g.__decorate([C.property({json:{type:Number,write:!0}})],t.prototype,"cols",void 0);g.__decorate([C.property({json:{name:"type",type:Number,write:!0}})],t.prototype,"convolutionType",null);g.__decorate([C.property({json:{type:[Number],write:!0}})],t.prototype,"kernel",void 0);return t=
M=g.__decorate([W.subclass("esri.layers.support.rasterFunctions.ConvolutionFunctionArguments")],t)})},"esri/layers/support/rasterFunctions/convolutionUtils":function(){define(["exports","../PixelBlock","../rasterFunctionConstants"],function(N,g,F){function C(M){const T=Math.sqrt(M.length),J=M.slice(0,T),w=[1];for(let z=1;z<T;z++){let n=null;for(let f=0;f<T;f++){const m=M[f+z*T],r=M[f];if(null==n)if(0===r){if(m)return{separable:!1,row:null,col:null}}else n=m/r;else if(m/r!==n)return{separable:!1,row:null,
col:null}}if(null==n)return{separable:!1,row:null,col:null};w.push(n)}return{separable:!0,row:J,col:w}}function t(M,T,J,w,z,n,f){const m=new Float32Array(T*J),r=n.length,l=f?0:w,b=f?w:0;f=f?1:T;for(let a=l;a<J-l;a++){const c=a*T;for(let d=b;d<T-b;d++){if(z&&!z[c+d])continue;let h=0;for(let u=0;u<r;u++)h+=M[c+d+(u-w)*f]*n[u];m[c+d]=h}}return m}function W(M,T,J=!0){const {pixels:w,width:z,height:n,pixelType:f,mask:m}=M;M=w.length;const r=[],{kernel:l,rows:b,cols:a}=T;for(T=0;T<M;T++){var c=w[T],d=z,
h=n,u=b,k=a,v=m,p=l;const B=new Float32Array(d*h),H=Math.floor(u/2),I=Math.floor(k/2);for(let L=H;L<h-H;L++){const E=L*d;for(let G=I;G<d-I;G++){if(v&&!v[E+G])continue;let A=0;for(let y=0;y<u;y++)for(let Q=0;Q<k;Q++)A+=c[E+G+(y-H)*d+Q-I]*p[y*k+Q];B[E+G]=A}}c=B;J&&ba(c,z,n,b,a);r.push(c)}return new g({width:z,height:n,pixelType:f,pixels:r,mask:m})}function ba(M,T,J,w,z){w=Math.floor(w/2);for(var n=0;n<w;n++)for(var f=0;f<T;f++)M[n*T+f]=M[(z-1-n)*T+f],M[(J-1-n)*T+f]=M[(J-z+n)*T+f];w=Math.floor(z/2);
for(n=0;n<J;n++){f=n*T;for(let m=0;m<w;m++)M[f+m]=M[f+z-1-m],M[f+T-m-1]=M[f+T+m-z]}}function R(M,T,J,w=!0){const {pixels:z,width:n,height:f,pixelType:m,mask:r}=M;M=z.length;const l=[],b=T.length,a=J.length,c=Math.floor(b/2),d=Math.floor(a/2);for(let h=0;h<M;h++){let u=t(z[h],n,f,c,r,T,!0);u=t(u,n,f,d,r,J,!1);w&&ba(u,n,f,b,a);l.push(u)}return new g({width:n,height:f,pixelType:m,pixels:l,mask:r})}const K=new Map;K.set(F.convolutionKernel.none,[0,0,0,0,1,0,0,0,0]);K.set(F.convolutionKernel.lineDetectionHorizontal,
[-1,-1,-1,2,2,2,-1,-1,-1]);K.set(F.convolutionKernel.lineDetectionVertical,[-1,2,-1,-1,2,-1,-1,2,-1]);K.set(F.convolutionKernel.lineDetectionLeftDiagonal,[2,-1,-1,-1,2,-1,-1,-1,2]);K.set(F.convolutionKernel.lineDetectionRightDiagonal,[-1,-1,2,-1,2,-1,2,-1,-1]);K.set(F.convolutionKernel.gradientNorth,[-1,-2,-1,0,0,0,1,2,1]);K.set(F.convolutionKernel.gradientWest,[-1,0,1,-2,0,2,-1,0,1]);K.set(F.convolutionKernel.gradientEast,[1,0,-1,2,0,-2,1,0,-1]);K.set(F.convolutionKernel.gradientSouth,[1,2,1,0,0,
0,-1,-2,-1]);K.set(F.convolutionKernel.gradientNorthEast,[0,-1,-2,1,0,-1,2,1,0]);K.set(F.convolutionKernel.gradientNorthWest,[-2,-1,0,-1,0,1,0,1,2]);K.set(F.convolutionKernel.smoothArithmeticMean,[.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111]);K.set(F.convolutionKernel.smoothing3x3,[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625]);K.set(F.convolutionKernel.smoothing5x5,[1,1,1,1,1,1,4,4,4,1,1,4,12,4,1,1,4,4,4,1,1,1,1,
1,1]);K.set(F.convolutionKernel.sharpening3x3,[-1,-1,-1,-1,9,-1,-1,-1,-1]);K.set(F.convolutionKernel.sharpening5x5,[-1,-3,-4,-3,-1,-3,0,6,0,-3,-4,6,21,6,-4,-3,0,6,0,-3,-1,-3,-4,-3,-1]);K.set(F.convolutionKernel.laplacian3x3,[0,-1,0,-1,4,-1,0,-1,0]);K.set(F.convolutionKernel.laplacian5x5,[0,0,-1,0,0,0,-1,-2,-1,0,-1,-2,17,-2,-1,0,-1,-2,-1,0,0,0,-1,0,0]);K.set(F.convolutionKernel.sobelHorizontal,[-1,-2,-1,0,0,0,1,2,1]);K.set(F.convolutionKernel.sobelVertical,[-1,0,1,-2,0,2,-1,0,1]);K.set(F.convolutionKernel.sharpen,
[0,-.25,0,-.25,2,-.25,0,-.25,0]);K.set(F.convolutionKernel.sharpen2,[-.25,-.25,-.25,-.25,3,-.25,-.25,-.25,-.25]);K.set(F.convolutionKernel.pointSpread,[-.627,.352,-.627,.352,2.923,.352,-.627,.352,-.627]);N.convolute=function(M,T){const J=C(T.kernel),w=!1!==T.mirrorEdges;M=J.separable?R(M,J.row,J.col,w):W(M,T,w);({outputPixelType:T}=T);T&&M.clamp(T);return M};N.convoluteSeparable=R;N.convolutionKernels=K;N.separateKernels=C;Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/CurvatureFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./CurvatureFunctionArguments ./surfaceUtils".split(" "),
function(N,g,F,C,t,W,ba,R,K,M){C=function(T){function J(){var z=T.apply(this,arguments)||this;z.functionName="Curvature";z.functionArguments=null;z.rasterArgumentNames=["raster"];z.isGCS=!1;return z}N._inherits(J,T);var w=J.prototype;w._bindSourceRasters=function(){this.outputPixelType=this._getOutputPixelType("f32");const z=this.sourceRasterInfos[0].clone();z.pixelType=this.outputPixelType;z.statistics=null;z.histograms=null;z.colormap=null;z.attributeTable=null;z.bandCount=1;this.rasterInfo=z;this.isGCS=
z.spatialReference?.isGeographic??!1;return{success:!0,supportsGPU:!0}};w._processPixels=function(z){const n=z.pixelBlocks?.[0];if(null==n)return null;const {zFactor:f,curvatureType:m}=this.functionArguments,{extent:r,primaryPixelSizes:l}=z;z=l?.[0];return M.curvature(n,{zFactor:this.isGCS&&1<=f?f*M.GCS_FACTOR:f,curvatureType:m,resolution:null==z?r?{x:r.width/n.width,y:r.height/n.height}:{x:1,y:1}:z})};w._getWebGLParameters=function(){const {zFactor:z,curvatureType:n}=this.functionArguments;return{curvatureType:n,
zFactor:this.isGCS&&1<=z?z*M.GCS_FACTOR:z}};return N._createClass(J)}(R);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:K,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"isGCS",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.CurvatureFunction")],
C)})},"esri/layers/support/rasterFunctions/CurvatureFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T){var J;const w=new F.JSONMap({0:"standard",1:"platform",2:"profile"},{useNumericKeys:!0});F=J=function(z){function n(){var m=z.apply(this,arguments)||this;m.curvatureType="standard";m.zFactor=1;return m}N._inherits(n,z);var f=n.prototype;f.readCurvatureType=function(m,r){return w.fromJSON(r.type??r.curvatureType??0)};f.clone=function(){return new J({curvatureType:this.curvatureType,zFactor:this.zFactor,raster:this.raster})};return N._createClass(n)}(T);g.__decorate([C.property({json:{write:{target:"type"}}}),
R.enumeration(w)],F.prototype,"curvatureType",void 0);g.__decorate([K.reader("curvatureType",["type","curvatureType"])],F.prototype,"readCurvatureType",null);g.__decorate([C.property({type:Number,json:{write:!0}})],F.prototype,"zFactor",void 0);return F=J=g.__decorate([M.subclass("esri.layers.support.rasterFunctions.CurvatureFunctionArguments")],F)})},"esri/layers/support/rasterFunctions/ExtractBandFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseRasterFunction ./ExtractBandFunctionArguments ./pixelUtils".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T){C=function(J){function w(){var n=J.apply(this,arguments)||this;n.functionName="ExtractBand";n.functionArguments=null;n.rasterArgumentNames=["raster"];return n}N._inherits(w,J);var z=w.prototype;z._bindSourceRasters=function(){const {functionArguments:n,sourceRasterInfos:f}=this;var m=f[0];const {method:r,bandNames:l,bandWavelengths:b,bandIds:a,missingBandAction:c}=n,d=l?.length&&("name"===r||"id"!==r&&!a?.length),h=b?.length&&("wavelength"===r||"id"!==r&&!a?.length);
var u=c===T.MissingBandAction.fail;u=d?this._matchBandNames(m,l):h?this._matchBandWavelengths(m,b,u):this._matchBandIds(m,a,u);if(null==u)return{success:!1,supportsGPU:!1,error:`extract-band-function: Invalid ${d?"band names":h?"band wavelengths":"band ids"} for the imagery data source`};this.functionArguments.bandIds=u;this.functionArguments.method="id";this.outputPixelType=this._getOutputPixelType("f32");m=m.clone();m.pixelType=this.outputPixelType;m.bandCount=u.length;const {statistics:k,histograms:v}=
m;null!=k&&k.length&&(m.statistics=u.map(B=>k[B]||k[k.length-1]));null!=v&&v.length&&(m.histograms=u.map(B=>v[B]||v[v.length-1]));let p=m.keyProperties?.BandProperties;p?.length&&(p=u.map(B=>B>=p.length?p[p.length-1]:p[B]),m.keyProperties={...m.keyProperties,BandProperties:p});this.rasterInfo=m;return{success:!0,supportsGPU:3>=m.bandCount}};z._processPixels=function(n){n=n.pixelBlocks?.[0];if(null==n)return null;const f=n.pixels.length,m=this.functionArguments.bandIds.map(r=>r>=f?f-1:r);return n.extractBands(m)};
z._getWebGLParameters=function(){let n;if(this.isInputBandIdsSwizzled)n=this.swizzledBandSelection.length?this.swizzledBandSelection:[0,1,2];else{n=[...this.functionArguments.bandIds];0===n.length?n=[0,1,2]:3>n.length&&(n[1]=n[1]??n[0],n[2]=n[2]??n[1]);for(let f=0;3>f;f++)n[f]=Math.min(n[f],2)}return{bandIndexMat3:R.getBandMatrix3(n)}};z._getInputBandIds=function(n){const f=n.length;return this.functionArguments.bandIds.map(m=>m>=f?f-1:m).map(m=>n[m])};z._matchBandNames=function(n,f){n=n.bandInfos.map(({name:r})=>
r.toLowerCase());const m=[];for(let r=0;r<f.length;r++){const l=f[r].toLowerCase();let b=n.indexOf(l);-1===b&&"nearinfrared"===l&&(b=n.findIndex(a=>a.startsWith("nearinfrared_1")),-1===b&&(b=n.findIndex(a=>a.startsWith("nearinfrared"))));if(-1===b)return null;m.push(b)}return m};z._matchBandIds=function(n,f,m){const {bandCount:r}=n;return!f?.length||m&&f.some(l=>0>l||l>=r)?null:f};z._matchBandWavelengths=function(n,f,m){var {bandInfos:r}=n;n=[];for(var l=0;l<r.length;l++){const {minWavelength:b,maxWavelength:a}=
r[l];if(!b||!a)return null;n.push({minWavelength:b,maxWavelength:a})}({wavelengthMatchTolerance:r}=this.functionArguments);l=[];for(let b=0;b<f.length;b++){const a=f[b];let c=!1,d=-1,h=Number.MAX_VALUE;for(let u=0;u<n.length;u++){const k=n[u],v=Math.abs(a-(k.minWavelength+k.maxWavelength)/2);a>=k.minWavelength&&a<=k.maxWavelength?v<h&&(c=!0,d=u,h=v):!c&&v<h&&(d=u,h=v)}!c&&r&&h<r&&(c=!0);if(!c&&m)return null;l.push(d)}return l};return N._createClass(w)}(K);g.__decorate([F.property({json:{write:!0,
name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:M,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.ExtractBandFunction")],C)})},"esri/layers/support/rasterFunctions/ExtractBandFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ./pixelUtils".split(" "),
function(N,g,F,C,t,W,ba,R,K,M){var T;C=T=function(J){function w(){var z=J.apply(this,arguments)||this;z.bandIds=[];z.bandNames=[];z.bandWavelengths=[];z.missingBandAction=M.MissingBandAction.bestMatch;return z}N._inherits(w,J);w.prototype.clone=function(){return new T({bandIds:[...this.bandIds],bandNames:[...this.bandNames],missingBandAction:this.missingBandAction,method:this.method,wavelengthMatchTolerance:this.wavelengthMatchTolerance})};return N._createClass(w)}(K);g.__decorate([F.property({json:{write:!0}})],
C.prototype,"bandIds",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"bandNames",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"bandWavelengths",void 0);g.__decorate([ba.enumeration({0:"name",1:"wavelength",2:"id"})],C.prototype,"method",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"missingBandAction",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"wavelengthMatchTolerance",void 0);return C=T=g.__decorate([R.subclass("esri.layers.support.rasterFunctions.ExtractBandFunctionArguments")],
C)})},"esri/layers/support/rasterFunctions/LocalFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../rasterFunctionConstants ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./LocalFunctionArguments ./localUtils".split(" "),function(N,g,F,C,t,W,ba,R,K,M,T,J){C=function(w){function z(){var f=
w.apply(this,arguments)||this;f.functionName="Local";f.functionArguments=null;f.rasterArgumentNames=["rasters"];return f}N._inherits(z,w);var n=z.prototype;n._bindSourceRasters=function(){var {sourceRasterInfos:f}=this,m=f[0];const {bandCount:r}=m;var {processAsMultiband:l}=this.functionArguments;if(f.some(c=>c.bandCount!==r))return{success:!1,supportsGPU:!1,error:"local-function: input rasters do not have same band count"};const {operation:b,rasters:a}=this.functionArguments;f=J.operandsCount[b];
if(!(999===f||a.length===f||1>=a.length&&1===f))return{success:!1,supportsGPU:!1,error:`local-function: the length of functionArguments.rasters does not match operation's requirement: ${f}`};this.outputPixelType=this._getOutputPixelType("f32");m=m.clone();m.pixelType=this.outputPixelType;m.statistics=null;m.histograms=null;m.colormap=null;m.attributeTable=null;m.bandCount=999!==f||l?r:1;if(l=J.getOutputDomain(b)){m.statistics=[];for(let c=0;c<m.bandCount;c++)m.statistics[c]={min:l[0],max:l[1],avg:(l[0]+
l[1])/2,stddev:(l[0]+l[1])/10}}this.rasterInfo=m;return{success:!0,supportsGPU:1===m.bandCount&&3>=f&&(11>b||16<b)}};n._processPixels=function(f){({pixelBlocks:f}=f);return null==f||f.some(m=>null==m)?null:J.local(f,this.functionArguments.operation,{processAsMultiband:this.functionArguments.processAsMultiband,outputPixelType:this.outputPixelType??void 0})};n._getWebGLParameters=function(){const {operation:f}=this.functionArguments,m=J.operandsCount[f],r=Object.keys(R.localOperators).find(c=>R.localOperators[c]===
f)?.toLowerCase()??"undefined";var l=this.outputPixelType??"f32";let [b,a]=K.getPixelValueRange(l);if(l=l.startsWith("u")||l.startsWith("s"))b-=1E-4,a+=1E-4;return{imageCount:m,operationName:r,domainRange:[b,a],isOutputRounded:l}};return N._createClass(z)}(M);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:T,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],
C.prototype,"rasterArgumentNames",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.LocalFunction")],C)})},"esri/layers/support/rasterFunctions/LocalFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R){var K;t=K=function(M){function T(){var w=M.apply(this,arguments)||this;w.rasters=[];w.processAsMultiband=!0;return w}N._inherits(T,M);var J=T.prototype;J.writeRasters=function(w,z){z.rasters=w.map(n=>"number"===typeof n||"string"===typeof n?n:n.toJSON())};J.clone=function(){return new K({operation:this.operation,processAsMultiband:this.processAsMultiband,rasters:F.clone(this.rasters)})};return N._createClass(T)}(R);g.__decorate([C.property({json:{write:!0}})],t.prototype,
"operation",void 0);g.__decorate([C.property({json:{write:!0}})],t.prototype,"rasters",void 0);g.__decorate([ba.writer("rasters")],t.prototype,"writeRasters",null);g.__decorate([C.property({json:{write:!0}})],t.prototype,"processAsMultiband",void 0);return t=K=g.__decorate([W.subclass("esri.layers.support.rasterFunctions.LocalFunctionArguments")],t)})},"esri/layers/support/rasterFunctions/localUtils":function(){define(["exports","../PixelBlock","../rasterFunctionConstants","../rasterFormats/pixelRangeUtils"],
function(N,g,F,C){function t(Z,oa=!1){var ca=Z.map(ja=>ja.mask);const pa=ca.filter(ja=>null!=ja);var xa=Z[0].pixels[0].length;if(0===pa.length)return(new Uint8Array(xa)).fill(255);Z=new Uint8Array(pa[0]);if(1===pa.length)return Z;if(!oa){for(oa=1;oa<pa.length;oa++)for(ca=pa[oa],xa=0;xa<Z.length;xa++)Z[xa]&&(Z[xa]=ca[xa]?255:0);return Z}if(pa.length!==ca.length)return(new Uint8Array(xa)).fill(255);for(oa=1;oa<pa.length;oa++)for(ca=pa[oa],xa=0;xa<Z.length;xa++)0===Z[xa]&&(Z[xa]=ca[xa]?255:0);return Z}
function W(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]+xa[ja];return ca}function ba(Z,oa,ca){[Z]=Z;oa=g.createEmptyBand("f32",Z.length);oa.set(Z);return oa}function R(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]-xa[ja];return ca}function K(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]*xa[ja];
return ca}function M(Z,oa,ca){[Z]=Z;const pa=Z.length;ca=g.createEmptyBand(ca,pa);for(let xa=0;xa<pa;xa++)if(!oa||oa[xa])ca[xa]=Math.sign(Z[xa])*Math.floor(Math.abs(Z[xa]));return ca}function T(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]/xa[ja];return ca}function J(Z,oa,ca){return T(Z,oa,"f32")}function w(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=Math.floor(pa[ja]/
xa[ja]);return ca}function z(Z,oa,ca,pa){Z=Z[0];const xa=Z.length;ca=g.createEmptyBand(ca,xa);if(pa===F.localTrigonometricOperation.atanh){for(pa=0;pa<xa;pa++)if(oa[pa]){var ja=Z[pa];1<=Math.abs(ja)?oa[pa]=0:ca[pa]=Math.atanh(ja)}return ca}pa=pa===F.localTrigonometricOperation.asin?Math.asin:Math.acos;for(ja=0;ja<xa;ja++)if(oa[ja]){const ya=Z[ja];1<Math.abs(ya)?oa[ja]=0:ca[ja]=pa(ya)}return ca}function n(Z,oa,ca,pa){[Z]=Z;const xa=Z.length;ca=g.createEmptyBand(ca,xa);for(let ja=0;ja<xa;ja++)if(!oa||
oa[ja])ca[ja]=pa(Z[ja]);return ca}function f(Z,oa,ca,pa){const [xa,ja]=Z;Z=xa.length;ca=g.createEmptyBand(ca,Z);for(let ya=0;ya<Z;ya++)if(!oa||oa[ya])ca[ya]=pa(xa[ya],ja[ya]);return ca}function m(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]&xa[ja];return ca}function r(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]<<xa[ja];return ca}function l(Z,oa,ca){[Z]=Z;const pa=
Z.length;ca=g.createEmptyBand(ca,pa);for(let xa=0;xa<pa;xa++)if(!oa||oa[xa])ca[xa]=~Z[xa];return ca}function b(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]|xa[ja];return ca}function a(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]>>xa[ja];return ca}function c(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=
pa[ja]^xa[ja];return ca}function d(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]&&xa[ja]?1:0;return ca}function h(Z,oa,ca){[Z]=Z;const pa=Z.length;ca=g.createEmptyBand(ca,pa);for(let xa=0;xa<pa;xa++)if(!oa||oa[xa])ca[xa]=Z[xa]?0:1;return ca}function u(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]||xa[ja]?1:0;return ca}function k(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;
ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=(pa[ja]?1:0)^(xa[ja]?1:0);return ca}function v(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]===xa[ja]?1:0;return ca}function p(Z,oa,ca,pa){[Z]=Z;const xa=Z.length;ca=g.createEmptyBand(ca,xa);const ja=pa===Math.E;for(let ya=0;ya<xa;ya++)if(!oa||oa[ya])ca[ya]=ja?Math.exp(Z[ya]):pa**Z[ya];return ca}function B(Z,oa,ca){return p(Z,oa,ca,10)}function H(Z,oa,ca){return p(Z,
oa,ca,2)}function I(Z,oa,ca){return p(Z,oa,ca,Math.E)}function L(Z,oa,ca,pa){[Z]=Z;const xa=Z.length;ca=g.createEmptyBand(ca,xa);for(let ja=0;ja<xa;ja++)if(!oa||oa[ja])0>=Z[ja]?oa[ja]=0:ca[ja]=pa(Z[ja]);return ca}function E(Z,oa,ca){return L(Z,oa,ca,Math.log10)}function G(Z,oa,ca){return L(Z,oa,ca,Math.log2)}function A(Z,oa,ca){return L(Z,oa,ca,Math.log)}function y(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]>xa[ja]?1:0;return ca}
function Q(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]>=xa[ja]?1:0;return ca}function V(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]<xa[ja]?1:0;return ca}function ea(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]<=xa[ja]?1:0;return ca}function x(Z,oa,ca){[Z]=Z;Z=Z.length;ca=g.createEmptyBand(ca,
Z);if(!oa)return ca;for(let pa=0;pa<Z;pa++)ca[pa]=oa[pa]?0:1;return ca}function D(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]%xa[ja];return ca}function P(Z,oa,ca){[Z]=Z;const pa=Z.length;ca=g.createEmptyBand(ca,pa);for(let xa=0;xa<pa;xa++)if(!oa||oa[xa])ca[xa]=-Z[xa];return ca}function X(Z,oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)if(!oa||oa[ja])ca[ja]=pa[ja]===xa[ja]?0:1;return ca}function fa(Z,
oa,ca){const [pa,xa]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);const ja=new Uint8Array(Z);for(let ya=0;ya<Z;ya++)null!=oa&&!oa[ya]||0!==pa[ya]||(ca[ya]=xa[ya],ja[ya]=255);return{band:ca,mask:ja}}function ha(Z,oa,ca){const [pa,xa,ja]=Z;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ya=0;ya<Z;ya++)if(!oa||oa[ya])ca[ya]=pa[ya]?xa[ya]:ja[ya];return ca}function ia(Z,oa,ca){const pa=Z.length;if(2>pa)return Z[0];const [xa]=Z,ja=xa.length;ca=g.createEmptyBand(ca,ja);for(let ya=0;ya<ja;ya++)if(!oa||oa[ya]){let Aa=
xa[ya];for(let Ba=1;Ba<pa;Ba++){const Ga=Z[Ba][ya];Aa<Ga&&(Aa=Ga)}ca[ya]=Aa}return ca}function ma(Z,oa,ca){const pa=Z.length;if(2>pa)return Z[0];const [xa]=Z,ja=xa.length;ca=g.createEmptyBand(ca,ja);for(let ya=0;ya<ja;ya++)if(!oa||oa[ya]){let Aa=xa[ya];for(let Ba=1;Ba<pa;Ba++){const Ga=Z[Ba][ya];Aa>Ga&&(Aa=Ga)}ca[ya]=Aa}return ca}function aa(Z,oa,ca){const pa=Z.length;if(2>pa)return Z[0];const [xa]=Z,ja=xa.length;ca=g.createEmptyBand(ca,ja);for(let ya=0;ya<ja;ya++)if(!oa||oa[ya]){let Aa=xa[ya],Ba=
Aa;for(let Ga=1;Ga<pa;Ga++){const Ja=Z[Ga][ya];Ba<Ja?Ba=Ja:Aa>Ja&&(Aa=Ja)}ca[ya]=Ba-Aa}return ca}function wa(Z,oa,ca){const pa=Z.length;if(2>pa)return Z[0];var [xa]=Z;xa=xa.length;ca=g.createEmptyBand(ca,xa);for(let ja=0;ja<xa;ja++)if(!oa||oa[ja]){let ya=0;for(let Aa=0;Aa<pa;Aa++)ya+=Z[Aa][ja];ca[ja]=ya/pa}return ca}function e(Z,oa,ca){const pa=Z.length;if(2>pa)return Z[0];var [xa]=Z;xa=xa.length;ca=g.createEmptyBand(ca,xa);for(let ja=0;ja<xa;ja++)if(!oa||oa[ja])for(let ya=0;ya<pa;ya++)ca[ja]+=Z[ya][ja];
return ca}function q(Z,oa,ca){const pa=Z.length;if(2>pa)return Z[0];var [xa]=Z;xa=xa.length;ca=g.createEmptyBand(ca,xa);for(let Aa=0;Aa<xa;Aa++)if(!oa||oa[Aa]){const Ba=new Float32Array(pa);let Ga=0;for(var ja=0;ja<pa;ja++){var ya=Z[ja];Ga+=ya[Aa];Ba[ja]=ya[Aa]}Ga/=pa;ja=0;for(ya=0;ya<pa;ya++)ja+=(Ba[ya]-Ga)**2;ca[Aa]=Math.sqrt(ja/pa)}return ca}function O(Z,oa,ca){const pa=Z.length;if(2>pa)return Z[0];const xa=Math.floor(pa/2);var [ja]=Z;ja=ja.length;ca=g.createEmptyBand(ca,ja);const ya=new Float32Array(pa),
Aa=1===pa%2;for(let Ba=0;Ba<ja;Ba++)if(!oa||oa[Ba]){for(let Ga=0;Ga<pa;Ga++)ya[Ga]=Z[Ga][Ba];ya.sort();ca[Ba]=Aa?ya[xa]:(ya[xa]+ya[xa-1])/2}return ca}function S(Z,oa,ca){const [pa,xa]=Z;if(null==xa)return pa;Z=pa.length;ca=g.createEmptyBand(ca,Z);for(let ja=0;ja<Z;ja++)oa[ja]&&(pa[ja]===xa[ja]?ca[ja]=pa[ja]:oa[ja]=0);return ca}function la(Z,oa,ca){const pa=Z.length;if(2>=pa)return S(Z,oa,ca);const xa=Z[0].length;ca=g.createEmptyBand(ca,xa);const ja=new Map;for(let Aa=0;Aa<xa;Aa++)if(!oa||oa[Aa]){ja.clear();
let Ba;for(var ya=0;ya<pa;ya++)Ba=Z[ya][Aa],ja.set(Ba,ja.has(Ba)?ja.get(Ba)+1:1);let Ga=ya=0;for(const Ja of ja.keys())ya=ja.get(Ja),ya>Ga&&(Ga=ya,Ba=Ja);ca[Aa]=Ba}return ca}function na(Z,oa,ca){const pa=Z.length;if(2>=pa)return S(Z,oa,ca);const xa=Z[0].length;ca=g.createEmptyBand(ca,xa);const ja=new Map;for(let Aa=0;Aa<xa;Aa++)if(!oa||oa[Aa]){ja.clear();let Ba;for(var ya=0;ya<pa;ya++)Ba=Z[ya][Aa],ja.set(Ba,ja.has(Ba)?ja.get(Ba)+1:1);ya=0;let Ga=Z.length;for(const Ja of ja.keys())ya=ja.get(Ja),ya<
Ga&&(Ga=ya,Ba=Ja);ca[Aa]=Ba}return ca}function ra(Z,oa,ca){const pa=Z.length;if(2>pa)return Z[0];var [xa]=Z;xa=xa.length;ca=g.createEmptyBand(ca,xa);const ja=new Set;for(let ya=0;ya<xa;ya++)if(!oa||oa[ya]){ja.clear();let Aa;for(let Ba=0;Ba<pa;Ba++)Aa=Z[Ba][ya],ja.add(Aa);ca[ya]=ja.size}return ca}function qa(Z,oa,ca,pa){let [xa,ja]=C.getPixelValueRange(ca);if(ca=ca.startsWith("u")||ca.startsWith("s"))xa-=1E-5,ja+=1E-5;for(let ya=0;ya<oa.length;ya++)if(oa[ya]){const Aa=Z[ya];isNaN(Aa)||Aa<xa||Aa>ja?
oa[ya]=0:pa[ya]=ca?Math.round(Aa):Aa}}const ta=new Map;ta.set(F.localTrigonometricOperation.acos,[0,Math.PI]);ta.set(F.localTrigonometricOperation.asin,[-Math.PI/2,Math.PI/2]);ta.set(F.localTrigonometricOperation.atan,[-Math.PI/2,Math.PI/2]);ta.set(F.localTrigonometricOperation.cos,[-1,1]);ta.set(F.localTrigonometricOperation.sin,[-1,1]);ta.set(F.localLogicalOperation.booleanAnd,[0,1]);ta.set(F.localLogicalOperation.booleanNot,[0,1]);ta.set(F.localLogicalOperation.booleanOr,[0,1]);ta.set(F.localLogicalOperation.booleanXOr,
[0,1]);ta.set(F.localLogicalOperation.equalTo,[0,1]);ta.set(F.localLogicalOperation.notEqual,[0,1]);ta.set(F.localLogicalOperation.greaterThan,[0,1]);ta.set(F.localLogicalOperation.greaterThanEqual,[0,1]);ta.set(F.localLogicalOperation.lessThan,[0,1]);ta.set(F.localLogicalOperation.lessThanEqual,[0,1]);ta.set(F.localLogicalOperation.isNull,[0,1]);const ua=new Map,za=new Map,va=new Map,Da=new Map;N.getOutputDomain=function(Z){return ta.get(Z)};N.local=function(Z,oa,ca={}){ua.size||(ua.set(4,Math.sqrt),
ua.set(6,Math.acos),ua.set(7,Math.asin),ua.set(8,Math.atan),ua.set(9,Math.atanh),ua.set(10,Math.abs),ua.set(21,Math.cos),ua.set(22,Math.cosh),ua.set(48,Math.floor),ua.set(49,Math.ceil),ua.set(51,Math.sin),ua.set(52,Math.sinh),ua.set(56,Math.tan),ua.set(57,Math.tanh),ua.set(59,Math.acosh),ua.set(60,Math.asinh),ua.set(65,Math.floor),za.set(5,Math.pow),za.set(61,Math.atan2),va.set(1,W),va.set(2,R),va.set(3,K),va.set(11,m),va.set(12,r),va.set(12,r),va.set(13,l),va.set(14,b),va.set(15,a),va.set(16,c),
va.set(17,d),va.set(18,h),va.set(19,u),va.set(20,k),va.set(23,T),va.set(24,v),va.set(25,I),va.set(26,B),va.set(27,H),va.set(28,y),va.set(29,Q),va.set(30,M),va.set(31,x),va.set(32,ba),va.set(33,V),va.set(34,ea),va.set(35,A),va.set(36,E),va.set(37,G),va.set(44,D),va.set(45,P),va.set(46,X),va.set(64,J),va.set(65,w),va.set(76,ha),va.set(78,ha),Da.set(38,la),Da.set(39,ia),Da.set(40,wa),Da.set(41,O),Da.set(42,ma),Da.set(43,na),Da.set(47,aa),Da.set(54,q),Da.set(55,e),Da.set(58,ra),Da.set(66,la),Da.set(67,
ia),Da.set(68,wa),Da.set(69,O),Da.set(70,ma),Da.set(71,na),Da.set(72,aa),Da.set(73,q),Da.set(74,e),Da.set(75,ra));var pa=t(Z,66<=oa&&75>=oa);const {outputPixelType:xa="f32"}=ca,ja=!Da.has(oa)||ca.processAsMultiband,ya=ja?Z[0].pixels.length:1;ca=[];for(let Ga=0;Ga<ya;Ga++){var Aa=Da.has(oa)&&!ja?Z.flatMap(Ja=>Ja.pixels):Z.map(Ja=>Ja.pixels[Ga]),Ba=!0;oa===F.localConditionalOperation.setNull?(pa=fa(Aa,pa,xa),Aa=pa.band,pa=pa.mask,Ba=!1):va.has(oa)?Aa=va.get(oa)(Aa,pa,"f64"):ua.has(oa)?Aa=oa===F.localTrigonometricOperation.asin||
oa===F.localTrigonometricOperation.acos||oa===F.localTrigonometricOperation.atanh?z(Aa,pa,"f64",oa):n(Aa,pa,"f64",ua.get(oa)):za.has(oa)?Aa=f(Aa,pa,"f64",za.get(oa)):Da.has(oa)?Aa=Da.get(oa)(Aa,pa,"f64"):(Aa=Aa[0],Ba=!1);Ba&&oa!==F.localLogicalOperation.isNull&&!ta.has(oa)&&(Ba=g.createEmptyBand(xa,Aa.length),pa||(pa=(new Uint8Array(Aa.length)).fill(255)),qa(Aa,pa,xa,Ba),Aa=Ba);ca.push(Aa)}Z=Z[0];return new g({width:Z.width,height:Z.height,pixelType:xa,mask:oa===F.localLogicalOperation.isNull?null:
pa,pixels:ca})};N.operandsCount=[0,2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,2,1,1,1,999,999,1,1,999,1,1,2,999,999,2,2,999,999,999,999,999,999,999,999,999,999,3,999,3];Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/MaskFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/mathUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./MaskFunctionArguments ./pixelUtils".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T){t=function(J){function w(){var n=J.apply(this,arguments)||this;n.functionName="Mask";n.functionArguments=null;n.rasterArgumentNames=["raster"];return n}N._inherits(w,J);var z=w.prototype;z._bindSourceRasters=function(){var n=this.sourceRasterInfos[0].clone();const {pixelType:f}=n;this.outputPixelType=this._getOutputPixelType(f);n.pixelType=this.outputPixelType;this.rasterInfo=n;const {includedRanges:m,normalizedNoDataValues:r}=this.functionArguments;if(!m?.length&&
!r?.length)return{success:!1,supportsGPU:!1,error:"missing includedRanges or noDataValues argument"};let l=[];for(let b=0;b<n.bandCount;b++){const a=T.createMaskLUT(f,m?.slice(2*b,2*b+2),r?.[b]);if(null==a){l=null;break}l.push(a)}this.lookups=l;n=null!=r&&r.every(b=>b?.length===r[0]?.length);return{success:!0,supportsGPU:(!m||m.length<=2*T.MAX_MAP_SIZE_GPU)&&(!r||n&&r[0].length<=T.MAX_MAP_SIZE_GPU)}};z._processPixels=function(n){n=n.pixelBlocks?.[0];if(null==n)return null;const {outputPixelType:f,
lookups:m}=this,{includedRanges:r,noDataInterpretation:l,normalizedNoDataValues:b}=this.functionArguments;return T.mask(n,{includedRanges:r,noDataValues:b,outputPixelType:f,matchAll:l===T.NoDataInterpretation.matchAll,lookups:m})};z._getWebGLParameters=function(){const {includedRanges:n,normalizedNoDataValues:f}=this.functionArguments,m=new Float32Array(T.MAX_MAP_SIZE_GPU);m.fill(F.NUMBER_MAX_FLOAT32);f?.[0]?.length&&m.set(f[0]);const r=new Float32Array(T.MAX_MAP_SIZE_GPU);for(let l=0;l<r.length;l+=
2)r[l]=n?.[l]??-F.NUMBER_MAX_FLOAT32,r[l+1]=n?.[l+1]??F.NUMBER_MAX_FLOAT32;n&&n.length&&r.set(n);return{bandCount:this.sourceRasterInfos[0].bandCount,noDataValues:m,includedRanges:r}};return N._createClass(w)}(K);g.__decorate([C.property({json:{write:!0,name:"rasterFunction"}})],t.prototype,"functionName",void 0);g.__decorate([C.property({type:M,json:{write:!0,name:"rasterFunctionArguments"}})],t.prototype,"functionArguments",void 0);g.__decorate([C.property()],t.prototype,"rasterArgumentNames",void 0);
g.__decorate([C.property({json:{write:!0}})],t.prototype,"lookups",void 0);return t=g.__decorate([R.subclass("esri.layers.support.rasterFunctions.MaskFunction")],t)})},"esri/layers/support/rasterFunctions/MaskFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ./pixelUtils".split(" "),
function(N,g,F,C,t,W,ba,R,K){var M;C=M=function(T){function J(){var w=T.apply(this,arguments)||this;w.includedRanges=null;w.noDataValues=null;w.noDataInterpretation=K.NoDataInterpretation.matchAny;return w}N._inherits(J,T);J.prototype.clone=function(){return new M({includedRanges:this.includedRanges?.slice()??[],noDataValues:this.noDataValues?.slice()??[],noDataInterpretation:this.noDataInterpretation})};N._createClass(J,[{key:"normalizedNoDataValues",get:function(){var {noDataValues:w}=this;if(!w?.length)return null;
let z=!1;w=w.map(n=>"number"===typeof n?(z=!0,[n]):"string"===typeof n?(n=n.trim().split(" ").filter(f=>""!==f.trim()).map(f=>Number(f)),z=z||0<n.length,0===n.length?null:n):null);return z?w:null}}]);return J}(R);g.__decorate([F.property({json:{write:!0}})],C.prototype,"includedRanges",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"noDataValues",void 0);g.__decorate([F.property()],C.prototype,"normalizedNoDataValues",null);g.__decorate([F.property({json:{write:!0}})],C.prototype,
"noDataInterpretation",void 0);return C=M=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.MaskFunctionArguments")],C)})},"esri/layers/support/rasterFunctions/NDVIFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseRasterFunction ./NDVIFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R,K,M){C=function(T){function J(){var z=T.apply(this,arguments)||this;z.functionName="NDVI";z.functionArguments=null;z.rasterArgumentNames=["raster"];return z}N._inherits(J,T);var w=J.prototype;w._bindSourceRasters=function(){const {scientificOutput:z,visibleBandID:n,infraredBandID:f}=this.functionArguments;this.outputPixelType=this._getOutputPixelType(z?"f32":"u8");var m=this.sourceRasterInfos[0];const r=Math.max(n,f);if(2>m.bandCount||r>=m.bandCount)return{success:!1,supportsGPU:!1,
error:"ndvi-function: source raster has insufficient amount of raster bands"};m=m.clone();m.pixelType=this.outputPixelType;m.colormap=null;m.histograms=null;m.bandCount=1;m.keyProperties={...m.keyProperties,BandProperties:void 0};const [l,b,a,c]=z?[-1,1,0,.1]:[0,200,100,10];m.statistics=[{min:l,max:b,avg:a,stddev:c}];this.rasterInfo=m;return{success:!0,supportsGPU:!0}};w._processPixels=function(z){z=z.pixelBlocks?.[0];if(null==z)return null;const {visibleBandID:n,infraredBandID:f,scientificOutput:m}=
this.functionArguments;return R.calculateNDVI(z,n,f,!m)};w._getWebGLParameters=function(){const {visibleBandID:z,infraredBandID:n,scientificOutput:f}=this.functionArguments;return{bandIndexMat3:R.getBandMatrix3(this.isInputBandIdsSwizzled?[0,1,2]:[n,z,0]),scaled:!f}};w._getInputBandIds=function(z){const {visibleBandID:n,infraredBandID:f}=this.functionArguments;return[f,n,0].map(m=>z[m])};return N._createClass(J)}(K);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",
void 0);g.__decorate([F.property({type:M,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.NDVIFunction")],C)})},"esri/layers/support/rasterFunctions/NDVIFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R){var K;C=K=function(M){function T(){var J=M.apply(this,arguments)||this;J.visibleBandID=0;J.infraredBandID=1;J.scientificOutput=!1;return J}N._inherits(T,M);T.prototype.clone=function(){const {visibleBandID:J,infraredBandID:w,scientificOutput:z}=this;return new K({visibleBandID:J,infraredBandID:w,scientificOutput:z})};return N._createClass(T)}(R);g.__decorate([F.property({json:{write:!0}})],C.prototype,"visibleBandID",void 0);g.__decorate([F.property({json:{write:!0}})],
C.prototype,"infraredBandID",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"scientificOutput",void 0);return C=K=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.NDVIFunctionArguments")],C)})},"esri/layers/support/rasterFunctions/RemapFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/mathUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./pixelUtils ./RemapFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T,J){t=function(w){function z(){var f=w.apply(this,arguments)||this;f.functionName="Remap";f.functionArguments=null;f.rasterArgumentNames=["raster"];f.lookup=null;return f}N._inherits(z,w);var n=z.prototype;n._bindSourceRasters=function(){const f=this.sourceRasterInfos[0].clone(),{pixelType:m}=f;this.outputPixelType=this._getOutputPixelType(m);f.pixelType=this.outputPixelType;f.colormap=null;f.histograms=null;f.bandCount=1;f.attributeTable=null;const {statistics:r}=f,
{allowUnmatched:l,outputValues:b,inputRanges:a,noDataRanges:c,isLastInputRangeInclusive:d}=this.functionArguments;if(null!=r&&r.length&&b?.length)if(l){var h=Math.min.apply(null,[...b,r[0].min]),u=Math.max.apply(null,[...b,r[0].max]);f.statistics=[{...r[0],min:h,max:u}]}else{u=h=b[0];for(let k=0;k<b.length;k++)h=h>b[k]?b[k]:h,u=u>b[k]?u:b[k];f.statistics=[{...r[0],min:h,max:u}]}this.rasterInfo=f;this.lookup=l?null:T.createRemapLUT({srcPixelType:m,inputRanges:a,outputValues:b,noDataRanges:c,allowUnmatched:l,
isLastInputRangeInclusive:d,outputPixelType:this.outputPixelType});return{success:!0,supportsGPU:(!b||b.length<=T.MAX_MAP_SIZE_GPU)&&(!c||c.length<=T.MAX_MAP_SIZE_GPU)}};n._processPixels=function(f){f=f.pixelBlocks?.[0];if(null==f)return null;const {lookup:m,outputPixelType:r}=this;if(m){const h=T.lookupPixels(f,{lut:[m.lut],offset:m.offset,outputPixelType:r});null!=h&&m.mask&&(h.mask=T.lookupBandValues(f.pixels[0],f.mask,m.mask,m.offset,"u8"));return h}const {inputRanges:l,outputValues:b,noDataRanges:a,
allowUnmatched:c,isLastInputRangeInclusive:d}=this.functionArguments;return T.remap(f,{inputRanges:l,outputValues:b,noDataRanges:a,outputPixelType:r,allowUnmatched:c,isLastInputRangeInclusive:d})};n._getWebGLParameters=function(){const {allowUnmatched:f,noDataRanges:m,isLastInputRangeInclusive:r}=this.functionArguments,l=new Float32Array(3*T.MAX_MAP_SIZE_GPU);var b=this.functionArguments.inputRanges??[],a=this.functionArguments.outputValues??[];const c=a.length;for(let d=0;d<T.MAX_MAP_SIZE_GPU;d++)if(l[3*
d]=b[2*d]??F.NUMBER_MAX_FLOAT32-1,l[3*d+1]=b[2*d+1]??F.NUMBER_MAX_FLOAT32,l[3*d+2]=a[d]??0,d<c&&(0<d&&(l[3*d]-=1E-5),d<c-1||!r))l[3*d+1]-=1E-5;b=new Float32Array(2*T.MAX_MAP_SIZE_GPU);b.fill(F.NUMBER_MAX_FLOAT32);m?.length&&b.set(m);a=K.getPixelValueRange(this.outputPixelType);return{allowUnmatched:f,rangeMaps:l,noDataRanges:b,clampRange:a}};return N._createClass(z)}(M);g.__decorate([C.property({json:{write:!0,name:"rasterFunction"}})],t.prototype,"functionName",void 0);g.__decorate([C.property({type:J,
json:{write:!0,name:"rasterFunctionArguments"}})],t.prototype,"functionArguments",void 0);g.__decorate([C.property()],t.prototype,"rasterArgumentNames",void 0);g.__decorate([C.property({json:{write:!0}})],t.prototype,"lookup",void 0);return t=g.__decorate([R.subclass("esri.layers.support.rasterFunctions.RemapFunction")],t)})},"esri/layers/support/rasterFunctions/RemapFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R){var K;C=K=function(M){function T(){var J=M.apply(this,arguments)||this;J.inputRanges=null;J.outputValues=null;J.noDataRanges=null;J.allowUnmatched=!1;J.isLastInputRangeInclusive=!1;return J}N._inherits(T,M);T.prototype.clone=function(){return new K({inputRanges:[...this.inputRanges],outputValues:[...this.outputValues],noDataRanges:[...this.noDataRanges],allowUnmatched:this.allowUnmatched,isLastInputRangeInclusive:this.isLastInputRangeInclusive})};return N._createClass(T)}(R);
g.__decorate([F.property({json:{write:!0}})],C.prototype,"inputRanges",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"outputValues",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"noDataRanges",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"allowUnmatched",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"isLastInputRangeInclusive",void 0);return C=K=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.RemapFunctionArguments")],
C)})},"esri/layers/support/rasterFunctions/SlopeFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./SlopeFunctionArguments ./surfaceUtils".split(" "),function(N,g,F,C,t,W,ba,R,K,M){C=function(T){function J(){var z=T.apply(this,arguments)||this;z.functionName=
"Slope";z.functionArguments=null;z.rasterArgumentNames=["raster"];z.isGCS=!1;return z}N._inherits(J,T);var w=J.prototype;w._bindSourceRasters=function(){this.outputPixelType=this._getOutputPixelType("f32");const z=this.sourceRasterInfos[0].clone();z.pixelType=this.outputPixelType;z.statistics="percent-rise"!==this.functionArguments.slopeType?[{min:0,max:90,avg:1,stddev:1}]:null;z.histograms=null;z.colormap=null;z.attributeTable=null;z.bandCount=1;this.rasterInfo=z;this.isGCS=z.spatialReference?.isGeographic??
!1;return{success:!0,supportsGPU:!0}};w._processPixels=function(z){const n=z.pixelBlocks?.[0];if(null==n)return null;const {zFactor:f,slopeType:m,pixelSizePower:r,pixelSizeFactor:l}=this.functionArguments,{isGCS:b}=this,{extent:a,primaryPixelSizes:c}=z;z=c?.[0];return M.slope(n,{zFactor:f,slopeType:m,pixelSizePower:r,pixelSizeFactor:l,isGCS:b,resolution:null==z?a?{x:a.width/n.width,y:a.height/n.height}:{x:1,y:1}:z})};w._getWebGLParameters=function(){const {zFactor:z,slopeType:n,pixelSizeFactor:f,
pixelSizePower:m}=this.functionArguments;return{zFactor:this.isGCS&&1<=z?z*M.GCS_FACTOR:z,slopeType:n,pixelSizeFactor:f??0,pixelSizePower:m??0}};return N._createClass(J)}(R);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:K,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);g.__decorate([F.property({json:{write:!0}})],
C.prototype,"isGCS",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.SlopeFunction")],C)})},"esri/layers/support/rasterFunctions/SlopeFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R,K,M){var T;F=new F.JSONMap({1:"degree",2:"percent-rise",3:"adjusted"},{useNumericKeys:!0});M=T=function(J){function w(){var z=J.apply(this,arguments)||this;z.slopeType="degree";z.zFactor=1;z.pixelSizePower=.664;z.pixelSizeFactor=.024;z.removeEdgeEffect=!1;return z}N._inherits(w,J);w.prototype.clone=function(){return new T({slopeType:this.slopeType,zFactor:this.zFactor,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,removeEdgeEffect:this.removeEdgeEffect,
raster:this.raster})};return N._createClass(w)}(M);g.__decorate([R.enumeration(F)],M.prototype,"slopeType",void 0);g.__decorate([C.property({type:Number,json:{write:!0}})],M.prototype,"zFactor",void 0);g.__decorate([C.property({type:Number,json:{name:"psPower",write:!0}})],M.prototype,"pixelSizePower",void 0);g.__decorate([C.property({type:Number,json:{name:"psZFactor",write:!0}})],M.prototype,"pixelSizeFactor",void 0);g.__decorate([C.property({type:Boolean,json:{write:!0}})],M.prototype,"removeEdgeEffect",
void 0);return M=T=g.__decorate([K.subclass("esri.layers.support.rasterFunctions.SlopeFunctionArguments")],M)})},"esri/layers/support/rasterFunctions/StatisticsHistogramFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./StatisticsHistogramFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R,K){C=function(M){function T(){var w=M.apply(this,arguments)||this;w.functionName="StatisticsHistogram";w.functionArguments=null;w.rasterArgumentNames=["raster"];w.isNoopProcess=!0;return w}N._inherits(T,M);var J=T.prototype;J._bindSourceRasters=function(){var w=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType("u8");w=w.clone();const {statistics:z,histograms:n}=this.functionArguments;n&&(w.histograms=n);z&&(w.statistics=z);this.rasterInfo=w;return{success:!0,
supportsGPU:!0}};J._processPixels=function(w){return w.pixelBlocks?.[0]};return N._createClass(T)}(R);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:K,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"indexedColormap",void 0);g.__decorate([F.property()],
C.prototype,"isNoopProcess",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.StatisticsHistogramFunction")],C)})},"esri/layers/support/rasterFunctions/StatisticsHistogramFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba,R,K){var M;t=M=function(T){function J(){var z=T.apply(this,arguments)||this;z.statistics=null;z.histograms=null;return z}N._inherits(J,T);var w=J.prototype;w.readStatistics=function(z,n){if(!z?.length)return null;const f=[];z.forEach(m=>{f.push({min:m.min,max:m.max,avg:m.avg??m.mean,stddev:m.stddev??m.standardDeviation})});return f};w.writeStatistics=function(z,n,f){if(z?.length){var m=[];z.forEach(r=>{r={...r,mean:r.avg,standardDeviation:r.stddev};delete r.avg;delete r.stddev;
m.push(r)});n[f]=m}};w.clone=function(){return new M({statistics:F.clone(this.statistics),histograms:F.clone(this.histograms)})};return N._createClass(J)}(K);g.__decorate([C.property({json:{write:!0}})],t.prototype,"statistics",void 0);g.__decorate([W.reader("statistics")],t.prototype,"readStatistics",null);g.__decorate([R.writer("statistics")],t.prototype,"writeStatistics",null);g.__decorate([C.property({json:{write:!0}})],t.prototype,"histograms",void 0);return t=M=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.StatisticsHistogramFunctionArguments")],
t)})},"esri/layers/support/rasterFunctions/StretchFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./pixelUtils ./StretchFunctionArguments ./stretchUtils".split(" "),function(N,g,F,C,t,W,ba,R,K,M,T){C=function(J){function w(){var n=J.apply(this,arguments)||
this;n.functionName="Stretch";n.functionArguments=null;n.rasterArgumentNames=["raster"];n.lookup=null;n.cutOffs=null;return n}N._inherits(w,J);var z=w.prototype;z._bindSourceRasters=function(){this.cutOffs=this.lookup=null;var n=this.sourceRasterInfos[0];const {pixelType:f}=n;var {functionArguments:m}=this;const {dynamicRangeAdjustment:r,gamma:l,useGamma:b}=m;if(!r&&["u8","u16","s8","s16"].includes(f)){m=T.getStretchCutoff(m.toJSON(),{rasterInfo:n});const a=this._isOutputRoundingNeeded()?"round":
"float";this.lookup=T.createStretchLUT({pixelType:f,...m,gamma:b?l:null,rounding:a});this.cutOffs=m}else r||(this.cutOffs=T.getStretchCutoff(m.toJSON(),{rasterInfo:n}));this.outputPixelType=this._getOutputPixelType(f);n=n.clone();n.pixelType=this.outputPixelType;n.statistics=null;n.histograms=null;n.colormap=null;n.attributeTable=null;"u8"===this.outputPixelType&&(n.keyProperties.DataType="processed");this.rasterInfo=n;return{success:!0,supportsGPU:!r}};z._processPixels=function(n){n=n.pixelBlocks?.[0];
if(null==n)return n;var {lookup:f}=this;if(f)return K.lookupPixels(n,{...f,outputPixelType:this.rasterInfo.pixelType});({functionArguments:f}=this);const m=this.cutOffs||T.getStretchCutoff(f.toJSON(),{rasterInfo:this.sourceRasterInfos[0],pixelBlock:n});return T.stretch(n,{...m,gamma:f.useGamma?f.gamma:null,outputPixelType:this.outputPixelType})};z._getWebGLParameters=function(){const {outputMin:n=0,outputMax:f=255,gamma:m,useGamma:r}=this.functionArguments,l=2<=this.rasterInfo.bandCount?3:1,b=r&&
m&&m.length?T.computeGammaCorrection(l,m):[1,1,1],{minCutOff:a,maxCutOff:c}=this.cutOffs??{minCutOff:[0,0,0],maxCutOff:[255,255,255]};1===a.length&&(a[1]=a[2]=a[0],c[1]=c[2]=c[0]);const d=new Float32Array(l);var h;for(h=0;h<l;h++)d[h]=(f-n)/(c[h]-a[h]);h=this._isOutputRoundingNeeded();return{bandCount:l,outMin:n,outMax:f,minCutOff:a,maxCutOff:c,factor:d,useGamma:r,gamma:r&&m?m:[1,1,1],gammaCorrection:r&&b?b:[1,1,1],stretchType:this.functionArguments.stretchType,isOutputRounded:h,type:"stretch"}};
return N._createClass(w)}(R);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:M,json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"lookup",void 0);g.__decorate([F.property({json:{write:!0}})],C.prototype,"cutOffs",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.StretchFunction")],
C)})},"esri/layers/support/rasterFunctions/StretchFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),function(N,g,F,C,t,W,ba,R,
K,M){var T;F=new F.JSONMap({0:"none",3:"standard-deviation",4:"histogram-equalization",5:"min-max",6:"percent-clip",9:"sigmoid"},{useNumericKeys:!0});M=T=function(J){function w(){var n=J.apply(this,arguments)||this;n.computeGamma=!1;n.dynamicRangeAdjustment=!1;n.gamma=[];n.histograms=null;n.statistics=null;n.stretchType="none";n.useGamma=!1;return n}N._inherits(w,J);var z=w.prototype;z.writeStatistics=function(n,f,m){n?.length&&(Array.isArray(n[0])||(n=n.map(r=>[r.min,r.max,r.avg,r.stddev])),f[m]=
n)};z.clone=function(){return new T({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:C.clone(this.statistics),gamma:C.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,histograms:C.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment,raster:this.raster})};
return N._createClass(w)}(M);g.__decorate([t.property({type:Boolean,json:{write:!0}})],M.prototype,"computeGamma",void 0);g.__decorate([t.property({type:Boolean,json:{name:"dra",write:!0}})],M.prototype,"dynamicRangeAdjustment",void 0);g.__decorate([t.property({type:[Number],json:{write:!0}})],M.prototype,"gamma",void 0);g.__decorate([t.property()],M.prototype,"histograms",void 0);g.__decorate([t.property({type:Number,json:{write:!0}})],M.prototype,"maxPercent",void 0);g.__decorate([t.property({type:Number,
json:{write:!0}})],M.prototype,"minPercent",void 0);g.__decorate([t.property({type:Number,json:{write:!0}})],M.prototype,"numberOfStandardDeviations",void 0);g.__decorate([t.property({type:Number,json:{name:"max",write:!0}})],M.prototype,"outputMax",void 0);g.__decorate([t.property({type:Number,json:{name:"min",write:!0}})],M.prototype,"outputMin",void 0);g.__decorate([t.property({type:Number,json:{write:!0}})],M.prototype,"sigmoidStrengthLevel",void 0);g.__decorate([t.property({json:{type:[[Number]],
write:!0}})],M.prototype,"statistics",void 0);g.__decorate([K.writer("statistics")],M.prototype,"writeStatistics",null);g.__decorate([ba.enumeration(F)],M.prototype,"stretchType",void 0);g.__decorate([t.property({type:Boolean,json:{write:!0}})],M.prototype,"useGamma",void 0);return M=T=g.__decorate([R.subclass("esri.layers.support.rasterFunctions.StretchFunctionArguments")],M)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe","../PixelBlock",
"../rasterFormats/pixelRangeUtils","../../../renderers/support/stretchRendererUtils"],function(N,g,F,C,t){function W(w,z=256){z=Math.min(z,256);const {size:n,counts:f}=w;w=new Uint8Array(n);var m=f.reduce((c,d)=>c+d/z,0);let r=0;var l=0;let b=0,a=m;for(let c=0;c<n;c++)if(b+=f[c],!(c<n-1&&b+f[c+1]<a)){for(;r<z-1&&a<b;)r++,a+=m;for(;l<=c;l++)w[l]=r;l=c+1}for(m=l;m<n;m++)w[m]=z-1;return w}function ba(w,z){w=Math.min(Math.max(w,-100),100);z=Math.min(Math.max(z??0,-100),100);let n=0,f=0;const m=new Uint8Array(256);
for(n=0;256>n;n++)0<w&&100>w?f=(200*n-25500+510*z)/(2*(100-w))+128:0>=w&&-100<w?f=(200*n-25500+510*z)*(100+w)/2E4+128:100===w?(f=200*n-25500+256*(100-w)+510*z,f=0<f?255:0):-100===w&&(f=128),m[n]=255<f?255:0>f?0:f;return m}function R(w,z,n,f){let m=Infinity,r=-Infinity;var l=0,b=0;const a=w.length;for(var c=0;c<a;c++){var d=w[c];if(!z||z[c])m=d<m?d:m,r=d>r?d:r,l+=d,b++}if(0===b)return{statistics:{min:0,max:0,avg:0,stddev:0},histogram:null};l/=b;c=0;for(d=0;d<a;d++)if(!z||z[d])c+=(w[d]-l)**2;d=z?z.filter(h=>
h).length:a;l={min:m,max:r,avg:l,stddev:1>=d?0:Math.sqrt(c/(d-1))};if(!f)return{statistics:l,histogram:null};if(["u8","s8","u4","u2","u1"].includes(n)){b=r-m+1;n=new Uint32Array(b);for(f=0;f<a;f++)z&&!z[f]||n[w[f]-m]++;return{statistics:l,histogram:{min:m-.5,max:r+.5,size:b,counts:n}}}n=new Uint32Array(256);f=(r-m)/256;if(0===f)return{statistics:l,histogram:{min:m,max:r,size:1,counts:(new Uint32Array(1)).fill(b)}};b=new Uint32Array(257);for(c=0;c<a;c++)z&&!z[c]||b[Math.floor((w[c]-m)/f)]++;for(w=
0;255>w;w++)n[w]=b[w];n[255]=b[255]+b[256];return{statistics:l,histogram:{min:m,max:r,size:256,counts:n}}}function K(w){if(null==w||!w.pixels?.length)return null;const {pixels:z,mask:n,bandMasks:f,pixelType:m}=w,r=w.width*w.height,l=z.length;let b,a;let c;var d;const h=[],u=[];for(c=0;c<l;c++){var k=new Uint32Array(256);var v=z[c];var p=f?.[c]??n;if("u8"===m)if(b=-.5,a=255.5,p)for(d=0;d<r;d++)p[d]&&k[v[d]]++;else for(d=0;d<r;d++)k[v[d]]++;else{d=!1;w.statistics||(w.updateStatistics(),d=!0);var B=
w.statistics;b=B[c].minValue;a=B[c].maxValue;var H=(a-b)/256;if(0===H)for(!B||w.validPixelCount||d||w.updateStatistics(),H=(w.validPixelCount||w.width*w.height)/256,d=0;256>d;d++)k[d]=Math.round(H*(d+1))-Math.round(H*d);else{B=new Uint32Array(257);for(d=0;d<r;d++)p&&!p[d]||B[Math.floor((v[d]-b)/H)]++;for(d=0;255>d;d++)k[d]=B[d];k[255]=B[255]+B[256]}}h.push({min:b,max:a,size:256,counts:k});for(d=p=v=H=0;256>d;d++)H+=k[d],v+=d*k[d];v/=H;for(d=0;256>d;d++)p+=k[d]*(d-v)**2;d=Math.sqrt(p/(H-1));H=(a-b)/
256;k=(v+.5)*H+b;H*=d;u.push({min:b,max:a,avg:k,stddev:H})}return{statistics:u,histograms:h}}function M(w,z){if(null==z||0===z.length)return w;const n=Math.max.apply(null,z),{minCutOff:f,maxCutOff:m,outMin:r,outMax:l,histogramLut:b}=w;return f.length===z.length||f.length<=n?w:{minCutOff:z.map(a=>f[a]),maxCutOff:z.map(a=>m[a]),histogramLut:b?z.map(a=>b[a]):null,outMin:r,outMax:l}}function T(w,z){const n=new Float32Array(w);for(let f=0;f<w;f++)n[f]=1<z[f]?2<z[f]?6.5+(z[f]-2)**2.5:6.5+100*(2-z[f])**
4:1;return n}const J=[.299,.587,.114];N.computeGammaCorrection=T;N.computeGammaValues=function(w,z,n){const f=[];for(let a=0;a<z.length;a++){var m=0,r=0,l=0;"min"in z[a]?{min:m,max:r,avg:l}=z[a]:[m,r,l]=z[a];l=l??0;"u8"!==w&&(l=255*(l-m)/(r-m));n&&(l*=J[a]);m=f;r=m.push;if(0>=l||255<=l)l=1;else{var b=0;150!==l&&(b=150>=l?45*Math.cos(.01047*l):17*Math.sin(.021*l));b=Math.log((l+b)/255);0===b?l=1:(l=Math.log(l/255)/b,l=isNaN(l)?1:Math.min(9.9,Math.max(.01,l)))}r.call(m,l)}return f};N.computeStatisticsHistograms=
function(w){const {pixels:z,mask:n,pixelType:f,bandMasks:m}=w;var r=z.map((l,b)=>R(l,m?.[b]??n,f,!0));w=r.map(({statistics:l})=>l);r=r.map(({histogram:l})=>l);return{statistics:w,histograms:r}};N.createContrastBrightnessLUT=ba;N.createHistogramEqualizationLUT=W;N.createStretchLUT=function(w){const {minCutOff:z,maxCutOff:n,gamma:f,pixelType:m,rounding:r}=w,l=w.outMin||0,b=w.outMax||255;if(!["u8","u16","s8","s16"].includes(m))return null;const a=z.length;let c,d,h=0;"s8"===m?h=-127:"s16"===m&&(h=-32767);
let u=256;["u16","s16"].includes(m)&&(u=65536);var k=[],v=[];const p=b-l;for(c=0;c<a;c++)v[c]=n[c]-z[c],k[c]=0===v[c]?0:p/v[c];let B;const H=[];let I,L;if(f&&f.length>=a)for(k=T(a,f),c=0;c<a;c++){L=[];for(d=0;d<u;d++)if(0===v[c])L[d]=l;else{var E=d+h;B=(E-z[c])/v[c];I=1;1<f[c]&&(I-=(1/p)**(B*k[c]));E<n[c]&&E>z[c]?(E=I*p*B**(1/f[c])+l,L[d]="floor"===r?Math.floor(E):"round"===r?Math.round(E):E):L[d]=E>=n[c]?b:l}H[c]=L}else for(c=0;c<a;c++){L=[];for(d=0;d<u;d++)E=d+h,E<=z[c]?L[d]=l:E>=n[c]?L[d]=b:(v=
(E-z[c])*k[c]+l,L[d]="floor"===r?Math.floor(v):"round"===r?Math.round(v):v);H[c]=L}if(null!=w.contrastOffset)for(w=ba(w.contrastOffset,w.brightnessOffset),c=0;c<a;c++)for(L=H[c],d=0;d<u;d++)L[d]=w[L[d]];return{lut:H,offset:h}};N.estimateStatisticsFromHistograms=function(w){const z=[];for(let r=0;r<w.length;r++){const {min:l,max:b,size:a,counts:c}=w[r];let d=0;var n=0;for(var f=0;f<a;f++)d+=c[f],n+=f*c[f];n/=d;f=0;for(var m=0;m<a;m++)f+=c[m]*(m-n)**2;m=(b-l)/a;z.push({min:l,max:b,avg:(n+.5)*m+l,stddev:Math.sqrt(f/
(d-1))*m})}return z};N.estimateStatisticsHistograms=K;N.getStretchCutoff=function(w,z){const {pixelBlock:n,bandIds:f,returnHistogramLut:m,rasterInfo:r}=z;var l=null;z=null;var b=w.stretchType;"number"===typeof b&&(b=t.stretchTypeFunctionEnum[b]);w.dra?"minMax"===b&&null!=n&&n.statistics?l=n.statistics.map(E=>[E.minValue,E.maxValue,0,0]):(z=K(n),l=null!=z?z.statistics:null,z=null!=z?z.histograms:null):(l=0<w.statistics?.length?w.statistics:r.statistics,z="histograms"in w?w.histograms:void 0,z||(z=
r.histograms));"percentClip"!==b&&"histogramEqualization"!==b||z?.length||(b="minMax");var a=l?.length||z?.length||r.bandCount;const c=[],d=[];let h,u,k,v;l&&!Array.isArray(l[0])&&(l=l.map(E=>[E.min,E.max,E.avg,E.stddev]));const [p,B]=C.getPixelValueRange(r.pixelType);if(!l?.length){l=[];for(k=0;k<a;k++)l.push([p,B,1,1]);"standardDeviation"===b&&(b="minMax")}switch(b){case "none":for(k=0;k<a;k++)c[k]=p,d[k]=B;break;case "minMax":for(k=0;k<a;k++){var H=l[k];c[k]=H[0];d[k]=H[1]}break;case "standardDeviation":for(k=
0;k<a;k++)H=l[k],c[k]=H[2]-w.numberOfStandardDeviations*H[3],d[k]=H[2]+w.numberOfStandardDeviations*H[3],c[k]<H[0]&&(c[k]=H[0]),d[k]>H[1]&&(d[k]=H[1]);break;case "histogramEqualization":g.assertIsSome(z);for(k=0;k<a;k++)c[k]=z[k].min,d[k]=z[k].max;break;case "percentClip":g.assertIsSome(z);for(k=0;k<z.length;k++){l=z[k];h=new Uint32Array(l.size);var I=[...l.counts];20<=I.length&&(I[0]=I[1]=I[2]=I[I.length-1]=I[I.length-2]=0);H=0;a=(l.max-l.min)/l.size;u=-.5===l.min&&1===a?.5:0;for(v=0;v<l.size;v++)H+=
I[v],h[v]=H;I=(w.minPercent||0)*H/100;c[k]=l.min+u;for(v=0;v<l.size;v++)if(h[v]>I){c[k]=l.min+a*(v+u);break}I=(1-(w.maxPercent||0)/100)*H;d[k]=l.max+u;for(v=l.size-2;0<=v;v--)if(h[v]<I){d[k]=l.min+a*(v+2-u);break}d[k]<c[k]&&(l=c[k],c[k]=d[k],d[k]=l)}break;default:for(k=0;k<a;k++)H=l[k],c[k]=H[0],d[k]=H[1]}let L;"histogramEqualization"===b?(g.assertIsSome(z),b=z[0].size||256,w=0,m&&(L=z.map(E=>W(E)))):(b=w.max||255,w=w.min||0);return M({minCutOff:c,maxCutOff:d,outMax:b,outMin:w,histogramLut:L},f)};
N.stretch=function(w,z){if(null==w||!w.pixels?.length)return w;const {mask:n,bandMasks:f,width:m,height:r,pixels:l}=w,{minCutOff:b,maxCutOff:a,gamma:c}=z;var d=z.outMin||0;const h=z.outMax||255,u=m*r,k=z.outputPixelType||"u8";w=w.pixels.map(()=>F.createEmptyBand(k,u));const v=w.length;var p=h-d,B=[],H=[];for(var I=0;I<v;I++)H[I]=a[I]-b[I],B[I]=0===H[I]?0:p/H[I];I=k.startsWith("u")||k.startsWith("s");z=!!z.isRenderer;if(c&&c.length>=v){B=T(v,c);for(var L=0;L<v;L++){var E=f?.[L]??n;for(let A=0;A<u;A++)if(null==
E||E[A]){if(0===H[L]){w[L][A]=d;continue}var G=l[L][A];const y=(G-b[L])/H[L];let Q=1;1<c[L]&&(Q-=(1/p)**(y*B[L]));G<a[L]&&G>b[L]?(G=Q*p*y**(1/c[L])+d,w[L][A]=z?Math.floor(G):I?Math.round(G):G):w[L][A]=G>=a[L]?h:d}}}else for(p=0;p<v;p++)for(H=f?.[p]??n,L=0;L<u;L++)if(null==H||H[L])E=l[p][L],E<a[p]&&E>b[p]?(E=(E-b[p])*B[p]+d,w[p][L]=z?Math.floor(E):I?Math.round(E):E):w[p][L]=E>=a[p]?h:d;d=new F({width:m,height:r,mask:n,bandMasks:f,pixels:w,pixelType:k});d.updateStatistics();return d};Object.defineProperty(N,
Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(N,g){g=new g.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});N.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};N.stretchTypeJSONDict=g;Object.defineProperty(N,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/TableFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./TableFunctionArguments".split(" "),function(N,g,F,C,t,W,ba,R,K){C=function(M){function T(){var w=M.apply(this,arguments)||
this;w.functionName="Table";w.functionArguments=null;w.rasterArgumentNames=["raster"];w.isNoopProcess=!0;return w}N._inherits(T,M);var J=T.prototype;J._bindSourceRasters=function(){var w=this.sourceRasterInfos[0];if(1<w.bandCount||w.pixelType.startsWith("f"))return{success:!1,supportsGPU:!1,error:"table-function: Source data must be single band and integer pixel type."};const {attributeTableAsRecordSet:z}=this.functionArguments;if(!z)return{success:!1,supportsGPU:!1,error:"table-function: Missing attributeTableAsRecordSet argument."};
this.outputPixelType=this._getOutputPixelType(w.pixelType);w=w.clone();w.pixelType=this.outputPixelType;w.bandCount=1;"thematic"!==w.dataType&&(w.keyProperties=w.keyProperties?{...w.keyProperties,DataType:"thematic"}:{DataType:"thematic"});this.rasterInfo=w;return{success:!0,supportsGPU:!0}};J._processPixels=function(w){return w.pixelBlocks?.[0]};return N._createClass(T)}(R);g.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],C.prototype,"functionName",void 0);g.__decorate([F.property({type:K,
json:{write:!0,name:"rasterFunctionArguments"}})],C.prototype,"functionArguments",void 0);g.__decorate([F.property()],C.prototype,"rasterArgumentNames",void 0);g.__decorate([F.property()],C.prototype,"isNoopProcess",void 0);return C=g.__decorate([ba.subclass("esri.layers.support.rasterFunctions.TableFunction")],C)})},"esri/layers/support/rasterFunctions/TableFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(N,g,F,C,t,W,ba){var R;t=R=function(K){function M(){var T=K.apply(this,arguments)||this;T.attributeTableAsRecordSet=null;return T}N._inherits(M,K);M.prototype.clone=function(){return new R({attributeTableAsRecordSet:F.clone(this.attributeTableAsRecordSet)})};return N._createClass(M)}(ba);g.__decorate([C.property({json:{write:!0}})],t.prototype,"attributeTableAsRecordSet",void 0);return t=R=g.__decorate([W.subclass("esri.layers.support.rasterFunctions.TableFunctionArguments")],t)})},"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../geometry ../../../core/arrayUtils ../../../core/Error ../../../core/unitUtils ../../../chunks/pe ../../../geometry/projection ../../../geometry/Extent ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/SpatialReference".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T){function J(x,D,P){return!ba.canProjectWithoutEngine(x,D,P)}function w(x,D,P){if((x=J(x,D,P))&&!ba.isLoaded())throw new C("rasterprojectionhelper-project","projection engine is not loaded");return x}function z(x,D,P,X=null){const fa=x.spatialReference;if(fa.equals(D))return x;w(fa,D,X);P=P.center;P=new R({xmin:P.x-x.x/2,xmax:P.x+x.x/2,ymin:P.y-x.y/2,ymax:P.y+x.y/2,spatialReference:fa});X=ba.project(P,D,X);P=B(D);null==X||null!=P&&X.width>=P?(D=t.getMetersPerUnitForSR(fa)/
t.getMetersPerUnitForSR(D),x={x:x.x*D,y:x.y*D}):x={x:X.width,y:X.height};return x}function n(x,D=.01){return t.getMetersPerUnitForSR(x)?D/t.getMetersPerUnitForSR(x):0}function f(x,D,P=null,X=!0){const fa=x.spatialReference;if(fa.equals(D))return x;w(fa,D,P);P=ba.project(x,D,P);if(!X||!P)return P;m([x],[P],fa,D);return P}function m(x,D,P,X){const fa=H(P,!0),ha=H(X,!0);P=n(P,500);X=n(X,500);if(P&&null!=fa&&null!=ha)for(let ia=0;ia<x.length;ia++){const ma=D[ia];if(!ma)continue;const {x:aa}=x[ia],{x:wa}=
ma;wa>=ha[1]-X&&Math.abs(aa-fa[0])<P?ma.x-=ha[1]-ha[0]:wa<=ha[0]+X&&Math.abs(aa-fa[1])<P&&(ma.x+=ha[1]-ha[0])}}function r(x){const {inSR:D,outSR:P,datumTransformation:X,preferPE:fa}=x;if(D.equals(P))return{points:x}=d(x,null),x;if(D.isWebMercator&&P.isWGS84||D.isWGS84&&P.isWebMercator){const {cols:aa,rows:wa,xres:e,yres:q,usePixelCenter:O,inSR:S,outSR:la}=x;let {xmin:na,ymax:ra}=x;O&&(na+=e/2,ra-=q/2);x=[];const qa=[];var ha=Math.max(aa,wa);for(var ia=0;ia<ha;ia++){var ma=ba.project(new K({x:na+e*
Math.min(aa,ia),y:ra-q*Math.min(wa,ia),spatialReference:S}),la);ia<=aa&&x.push(ma.x);ia<=wa&&qa.push(ma.y)}ha=[];for(ia=0;ia<aa;ia++)for(ma=0;ma<wa;ma++)ha.push([x[ia],qa[ma]]);return ha}return w(D,P,X)&&fa&&(D.isGeographic||null!=a(D))?b(x):l(x)}function l(x){var {points:D}=d(x,null);const {inSR:P,outSR:X,datumTransformation:fa}=x;x=D.map(ha=>new K(ha[0],ha[1],P));D=ba.project(x,X,fa);fa&&m(x,D,P,X);return D.map(ha=>ha?[ha.x,ha.y]:[NaN,NaN])}function b(x){const {inSR:D,outSR:P,datumTransformation:X}=
x;var fa=a(D);const {points:ha,mask:ia}=d(x,fa);D.isGeographic||(x=D.wkid?W.PeFactory.coordsys(D.wkid):W.PeFactory.fromString(D.isGeographic?W.PeDefs.PE_TYPE_GEOGCS:W.PeDefs.PE_TYPE_PROJCS,D.wkt),W.PeCSTransformations.projToGeog(x,ha.length,ha));if(null!=X&&X.steps.length){var ma;P.isGeographic&&(ma=ha.map(([aa])=>179.9955<aa?1:-179.9955>aa?-1:0));X.steps.forEach(aa=>{const wa=aa.wkid?W.PeFactory.geogtran(aa.wkid):W.PeFactory.fromString(W.PeDefs.PE_TYPE_GEOGTRAN,aa.wkt);W.PeGTTransformations.geogToGeog(wa,
ha.length,ha,null,aa.isInverse?W.PeDefs.PE_TRANSFORM_2_TO_1:W.PeDefs.PE_TRANSFORM_1_TO_2)});if(ma)for(x=0;x<ha.length;x++){fa=ma[x];const aa=ha[x][0],wa=179.9955<aa?1:-179.9955>aa?-1:0;fa&&wa&&fa!==wa&&(ha[x][0]=0<fa?aa+360:aa-360)}}P.isGeographic||(ma=a(P,!0),h(ha,null!=ma&&ma.isEnvelope?[ma.bbox[1],ma.bbox[3]]:[-90,90]),ma=P.wkid?W.PeFactory.coordsys(P.wkid):W.PeFactory.fromString(P.isGeographic?W.PeDefs.PE_TYPE_GEOGCS:W.PeDefs.PE_TYPE_PROJCS,P.wkt),W.PeCSTransformations.geogToProj(ma,ha.length,
ha));ma=ha;if(ia&&ha.length!==ia.length){ma=[];for(let aa=0,wa=0;aa<ia.length;aa++)ia[aa]?ma.push(ha[wa++]):ma.push([NaN,NaN])}return ma}function a(x,D=!1){var P=x.wkid||x.wkt;if(!P||x.isGeographic)return null;P=String(P);if(V.has(P))return P=V.get(P),D?P?.gcs:P?.pcs;var X=x.wkid?W.PeFactory.coordsys(x.wkid):W.PeFactory.fromString(x.isGeographic?W.PeDefs.PE_TYPE_GEOGCS:W.PeDefs.PE_TYPE_PROJCS,x.wkt);x=n(x,1E-4);x=c(X,x);X=c(X,0,!0);V.set(P,{pcs:x,gcs:X});return D?X:x}function c(x,D=0,P=!1){var X=
W.PePCSInfo.generate(x),fa=P?x.horizonGcsGenerate():x.horizonPcsGenerate();if(!X||!fa?.length)return null;x=!1;var ha=fa.find(e=>1===e.getInclusive()&&1===e.getKind());if(!ha){ha=fa.find(e=>1===e.getInclusive()&&0===e.getKind());if(!ha)return null;x=!0}P=P?0:(2===X.getNorthPoleLocation()?1:0)|(2===X.getSouthPoleLocation()?2:0);X=X.isPannableRectangle();ha=ha.getCoord();if(x)return{isEnvelope:x,isPannable:X,vertices:ha,coef:null,bbox:[ha[0][0]-D,ha[0][1]-D,ha[1][0]+D,ha[1][1]+D],poleLocation:P};D=
0;x=[];let [ia,ma]=ha[0],[aa,wa]=ha[0];for(let e=0,q=ha.length;e<q;e++){D++;D===q&&(D=0);const [O,S]=ha[e],[la,na]=ha[D];if(na===S)x.push([O,la,S,na,2]);else{fa=(la-O)/(na-S||1E-4);const ra=O-fa*S;S<na?x.push([fa,ra,S,na,0]):x.push([fa,ra,na,S,1])}ia=ia<O?ia:O;ma=ma<S?ma:S;aa=aa>O?aa:O;wa=wa>S?wa:S}return{isEnvelope:!1,isPannable:X,vertices:ha,coef:x,bbox:[ia,ma,aa,wa],poleLocation:P}}function d(x,D){const P=[],{cols:X,rows:fa,xres:ha,yres:ia,usePixelCenter:ma}=x;let {xmin:aa,ymax:wa}=x;ma&&(aa+=
ha/2,wa-=ia/2);if(null==D){for(x=0;x<X;x++)for(D=0;D<fa;D++)P.push([aa+ha*x,wa-ia*D]);return{points:P}}x=new Uint8Array(X*fa);if(D.isEnvelope){const {bbox:[ra,qa,ta,ua]}=D;for(let za=0,va=0;za<X;za++){var e=aa+ha*za,q=D.isPannable||e>=ra&&e<=ta;for(var O=0;O<fa;O++,va++){var S=wa-ia*O;q&&S>=qa&&S<=ua&&(P.push([e,S]),x[va]=1)}}return{points:P,mask:x}}e=D.coef;D=[];for(q=0;q<fa;q++){var la=wa-ia*q;O=[];S=[];for(var na=0;na<e.length;na++){const [ra,qa,ta,ua,za]=e[na];la===ta&&ta===ua?(O.push(ra),O.push(qa),
S.push(2),S.push(2)):la>=ta&&la<=ua&&(O.push(ra*la+qa),S.push(za))}la=O;if(2<O.length){na=2===S[0]?0:S[0];let ra=O[0];la=[];for(let qa=1;qa<S.length;qa++)if(2!==S[qa]||qa===S.length-1)S[qa]!==na&&(la.push(0===na?Math.min(ra,O[qa-1]):Math.max(ra,O[qa-1])),na=S[qa],ra=O[qa]),qa===S.length-1&&la.push(0===S[qa]?Math.min(ra,O[qa]):Math.max(ra,O[qa]));la.sort((qa,ta)=>qa-ta)}else O[0]>O[1]&&(la=[O[1],O[0]]);D.push(la)}for(let ra=0,qa=0;ra<X;ra++)for(e=aa+ha*ra,q=0;q<fa;q++,qa++)if(O=wa-ia*q,S=D[q],2===
S.length)e>=S[0]&&e<=S[1]&&(P.push([e,O]),x[qa]=1);else if(2<S.length){la=!1;for(na=0;na<S.length;na+=2)if(e>=S[na]&&e<=S[na+1]){la=!0;break}la&&(P.push([e,O]),x[qa]=1)}return{points:P,mask:x}}function h(x,D){const [P,X]=D;for(D=0;D<x.length;D++){const fa=x[D][1];if(fa<P||fa>X)x[D]=[NaN,NaN]}}function u(x){const D=B(x[0].spatialReference);if(2>x.length||null==D)return x[0];const P=n(x[0].spatialReference);x=x.filter(ma=>ma.width>P);if(1===x.length)return x[0];let {xmin:X,xmax:fa,ymin:ha,ymax:ia}=
x[0];for(let ma=1;ma<x.length;ma++){const aa=x[ma];fa=aa.xmax+D*ma;ha=Math.min(ha,aa.ymin);ia=Math.max(ia,aa.ymax)}return new R({xmin:X,xmax:fa,ymin:ha,ymax:ia,spatialReference:x[0].spatialReference})}function k(x,D,P=null,X=!0){var fa=x.spatialReference;if(fa.equals(D))return x;var ha=L(x);const ia=B(fa,!0);var ma=B(D);if(0===ha||null==ia||null==ma)return ha=p(x,D,P,X),null==ia&&null!=ma&&Math.abs(ha.width-ma)<n(D)&&ba.isLoaded()&&(fa=a(fa),null!=fa&&fa.poleLocation===A.None&&x.width<(fa.bbox[2]-
fa.bbox[0])/2)?v(x,D)||ha:ha;ma=x.clone().normalize();if(1===ma.length&&x.xmax<ia&&x.xmax-ia/2>n(fa)){const {xmin:aa,xmax:wa}=x;for(let e=0;e<=ha;e++)ma[e]=new R({xmin:0===e?aa:-ia/2,xmax:e===ha?wa-ia*e:ia/2,ymin:x.ymin,ymax:x.ymax,spatialReference:fa})}x=ma.map(aa=>p(aa,D,P,X));return u(x.filter(F.isSome))}function v(x,D){const P=B(D);if(null==P)return null;let {xmin:X,ymin:fa,xmax:ha,ymax:ia}=x;var ma=x.spatialReference;x=new M({spatialReference:ma,rings:[[[X,fa],[ha,fa],[ha,ia],[X,ia],[X,fa]]]});
x=ba.project(x,D);if(2!==x.rings.length||!x.rings[0].length||!x.rings[1].length)return null;({rings:x}=x);ma=n(ma);D=new R({spatialReference:D});for(let aa=0;2>aa;aa++){X=ha=x[aa][0][0];fa=ia=x[aa][0][1];for(let wa=0;wa<x[aa].length;wa++)X=X>x[aa][wa][0]?x[aa][wa][0]:X,ha=ha<x[aa][wa][0]?x[aa][wa][0]:ha,fa=fa>x[aa][wa][1]?x[aa][wa][1]:fa,ia=ia<x[aa][wa][1]?x[aa][wa][1]:ia;if(0===aa)D.ymin=fa,D.ymax=ia,D.xmin=X,D.xmax=ha;else if(D.ymin=Math.min(D.ymin,fa),D.ymax=Math.max(D.ymax,ia),Math.abs(ha-P/2)<
ma)D.xmin=X,D.xmax+=P;else if(Math.abs(X+P/2)<ma)D.xmax=ha+P;else return null}return D}function p(x,D,P=null,X=!0,fa=!0){const ha=x.spatialReference;if(ha.equals(D)||!D)return x;w(ha,D,P);const ia=ba.project(x,D,P);if(fa&&D.isWebMercator&&ia&&(ia.ymax=Math.min(2.0037508342787E7,ia.ymax),ia.ymin=Math.max(-2.0037508342787E7,ia.ymin),ia.ymin>=ia.ymax))return null;if(!X||!ia)return ia;var ma=H(ha,!0);X=H(D,!0);if(null==ma||null==X)return ia;fa=n(ha,.001);const aa=n(ha,500);var wa=n(D,.001);if(Math.abs(ia.xmin-
X[0])<wa&&Math.abs(ia.xmax-X[1])<wa){wa=Math.abs(x.xmin-ma[0]);ma=Math.abs(ma[1]-x.xmax);if(wa<fa&&ma>aa){ia.xmin=X[0];var e=[];e.push(new K(x.xmax,x.ymin,ha));e.push(new K(x.xmax,(x.ymin+x.ymax)/2,ha));e.push(new K(x.xmax,x.ymax,ha));e=e.map(q=>f(q,D,P)).filter(q=>!isNaN(q?.x)).map(q=>q.x);ia.xmax=Math.max.apply(null,e)}ma<fa&&wa>aa&&(ia.xmax=X[1],X=[],X.push(new K(x.xmin,x.ymin,ha)),X.push(new K(x.xmin,(x.ymin+x.ymax)/2,ha)),X.push(new K(x.xmin,x.ymax,ha)),x=X.map(q=>f(q,D,P)).filter(q=>!isNaN(q?.x)).map(q=>
q.x),ia.xmin=Math.min.apply(null,x))}else x=n(D,.001),Math.abs(ia.xmin-X[0])<x&&(ia.xmin=X[0]),Math.abs(ia.xmax-X[1])<x&&(ia.xmax=X[1]);return ia}function B(x,D=!1){return x?x.isWebMercator?2*(D?2.0037508342787E7:2.0037508342788905E7):x.wkid&&x.isGeographic?360:2*Q[x.wkid]||null:null}function H(x,D=!1){if(x.isGeographic)return[-180,180];x=B(x,D);return null!=x?[-x/2,x/2]:null}function I(x,D,P,X){x=(x-D)/P;0!==x-Math.floor(x)?x=Math.floor(x):X&&--x;return x}function L(x,D=!1){var P=B(x.spatialReference);
if(null==P)return 0;const X=D?0:-(P/2),fa=n(x.spatialReference),ha=!D&&Math.abs(x.xmin+P/2)<fa?-P/2:x.xmin;x=I(!D&&Math.abs(x.xmax-P/2)<fa?P/2:x.xmax,X,P,!0);P=I(ha,X,P,!1);return x-P}function E(x){const {projectedExtent:D,srcBufferExtent:P,pixelSize:X,datumTransformation:fa,rasterTransform:ha}=x;var ia=D.spatialReference;const ma=P.spatialReference;var aa=w(ia,ma);const {xmin:wa,ymin:e,xmax:q,ymax:O}=D,S=B(ma),la=null!=S&&(x.hasWrapAround||"gcs-shift"===ha?.type);x=x.spacing||[32,32];var na=x[0]*
X.x,ra=x[1]*X.y;const qa=1===x[0],ta=Math.ceil((q-wa)/na-.1/x[0])+(qa?0:1),ua=Math.ceil((O-e)/ra-.1/x[1])+(qa?0:1);na=r({cols:ta,rows:ua,xmin:wa,ymax:O,xres:na,yres:ra,inSR:ia,outSR:ma,datumTransformation:fa,preferPE:4>=x[0],usePixelCenter:qa});ra=[];let za,va=0;const Da=qa?-1:NaN,{xmin:Z,xmax:oa,ymax:ca,width:pa,height:xa}=P,ja=n(ma,500),ya=null!=S&&0<Z&&oa>S/2;var Aa=!1;aa&&(Aa=a(ia),Aa=null!=Aa&&0<Aa.poleLocation);for(ia=0;ia<ta;ia++){aa=[];for(let Ga=0;Ga<ua;Ga++){var Ba=na[ia*ua+Ga];la&&Ba[0]>
oa&&Ba[0]>S/2-ja?Ba[0]-=S:la&&0===ia&&0>Ba[0]&&ya&&!ha&&(Ba[0]+=S);!Ba||isNaN(Ba[0])||isNaN(Ba[1])?(ra.push(Da),ra.push(Da),aa.push(null),va++):(ha&&(Ba=ha.inverseTransform(new K({x:Ba[0],y:Ba[1],spatialReference:ma})),Ba=[Ba.x,Ba.y]),aa.push(Ba),0<ia&&la&&za[Ga]&&Ba[0]<za[Ga][0]&&(Ba[0]+=S,Aa&&Ba[0]>oa&&Ba[0]>S&&(Ba[0]-=S)),ra.push((Ba[0]-Z)/pa),ra.push((ca-Ba[1])/xa))}za=aa}return{offsets:ra,error:null,coefficients:null,outofBoundPointCount:va,spacing:x,size:qa?[ta,ua]:[ta-1,ua-1]}}function G(x,
D,P){const {cols:X,rows:fa}=D;D=new Float32Array((X-1)*(fa-1)*12);const ha=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),ia=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let O=0;O<X-1;O++){for(var ma=0;ma<fa-1;ma++){var aa=O*fa*2+2*ma,wa=x[aa];const S=x[aa+1];var e=x[aa+2],q=x[aa+3];aa+=2*fa;const la=x[aa],na=x[aa+1],ra=x[aa+2];aa=x[aa+3];let qa=0,ta=12*(ma*(X-1)+O);for(let ua=0;3>ua;ua++)D[ta++]=ha[qa++]*wa+ha[qa++]*e+ha[qa++]*ra;qa=0;for(e=0;3>e;e++)D[ta++]=ha[qa++]*S+ha[qa++]*q+ha[qa++]*aa;qa=0;for(q=
0;3>q;q++)D[ta++]=ia[qa++]*wa+ia[qa++]*la+ia[qa++]*ra;qa=0;for(wa=0;3>wa;wa++)D[ta++]=ia[qa++]*S+ia[qa++]*na+ia[qa++]*aa}if(P)for(ma=0;ma<D.length;ma++)isNaN(D[ma])&&(D[ma]=-1)}return D}var A;(function(x){x[x.None=0]="None";x[x.North=1]="North";x[x.South=2]="South";x[x.Both=3]="Both"})(A||(A={}));const y=(x,D,P,X=0)=>{if(1===P[0])return[0,0];var fa=1,ha=-1,ia=1,ma=-1;for(var aa=0;aa<x.length;aa+=2)isNaN(x[aa])||(fa=fa>x[aa]?x[aa]:fa,ha=ha>x[aa]?ha:x[aa],ia=ia>x[aa+1]?x[aa+1]:ia,ma=ma>x[aa+1]?ma:x[aa+
1]);const {cols:wa,rows:e}=D;D=(ha-fa)/wa/P[0];P=(ma-ia)/e/P[1];X*=2;ia=0;ma=!1;fa=[0,0];for(ha=0;ha<wa-3;ha++){for(aa=0;aa<e-3;aa++){var q=ha*e*2+2*aa;const O=Math.abs(((x[q]+x[q+4]+x[q+4*e]+x[q+4*e+4])/4-x[q+2*e+2])/D);q=Math.abs(((x[q+1]+x[q+5]+x[q+4*e+1]+x[q+4*e+5])/4-x[q+2*e+3])/P);O+q>ia&&(ia=O+q,fa=[O,q]);if(X&&ia>X){ma=!0;break}}if(ma)break}return fa},Q={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,
6933:1.7367530445161372E7,32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,
54080:2.0037508342789244E7,54100:2.0037508342789244E7,54101:2.0037508342789244E7},V=new Map,ea=new Map;N.computeProjectedScales=function(x,D,P){var X=P?.tileSize??512,fa=P?.alignGlobalDatasetWithAGOL??!0,ha=!!P?.limitToSrcResolution;const {extent:ia,spatialReference:ma,pixelSize:aa}=x;P=z(new K({x:aa.x,y:aa.y,spatialReference:ma}),D,ia);if(null==P)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const wa=(P.x+P.y)/2,e=t.getMetersPerUnitForSR(D);var q=wa*e*96*
39.37,O=D.isGeographic?256/X*2.958287637958547E8:256/X*5.91657527591555E8,S="vector-magdir"===x.dataType||"vector-uv"===x.dataType,la=k(ia,D),na=Math.min(Math.ceil(Math.log(Math.min(x.width,x.height)/32)/Math.LN2),Math.ceil(Math.log(O/2/q)/Math.LN2));!S&&fa&&(D.isGeographic||D.isWebMercator)&&(S=0>la.xmin*la.xmax,!S&&3>na&&(fa=B(D),null!=fa&&(S=2**na*wa*X,X=Math.ceil(fa/S),S=1===X||2===X&&fa/2-la.xmax<S)));X=q;x=Math.min(2,Math.max(1.414,x.storageInfo?.pyramidScalingFactor||2));if(S)X=O,O=D.isGeographic?
1.341104507446289E-6:.29858214164761665,na=96*O*e*39.37,D=z(new K({x:O,y:O,spatialReference:{wkid:D.isGeographic?4326:3857}}),ma,la),D.x*=X/na,D.y*=X/na;else{D={x:aa.x,y:aa.y};for(la=0;X<.5005*O&&la<na;)la++,X*=x,D.x*=x,D.y*=x;1.001>=Math.max(X,O)/Math.min(X,O)&&(X=O)}O=[X];la=[{x:D.x,y:D.y}];for(q=Math.min(70.5310735,q)/1.001;X>=q;)X/=x,D.x/=x,D.y/=x,O.push(X),la.push({x:D.x,y:D.y});if(ha){const ra=.001*aa.x;ha=la.findIndex(qa=>qa.x>=aa.x-ra&&qa.x<=aa.x+ra);-1<ha?(la.length=ha+1,O.length=ha+1):(ha=
la.findIndex(qa=>qa.x<=aa.x+ra),0<ha&&(la.length=ha,O.length=ha))}return{projectedPixelSize:P,scales:O,srcResolutions:la,isCustomTilingScheme:!S}};N.defaultGridSpacing=32;N.defaultProjectionToleranceInPixels=4;N.getDefaultDatumTransformationForDataset=function(x,D,P){w(x.spatialReference,D);return P?ba.getTransformation(D,x.spatialReference,x):ba.getTransformation(x.spatialReference,D,x)};N.getProjectedGridPoints=r;N.getProjectionOffsetGrid=function(x){var D=x.isAdaptive&&null==x.spacing;let P=x.spacing||
[32,32],X=E(x);var fa={cols:X.size[0]+1,rows:X.size[1]+1};const ha=0<X.outofBoundPointCount&&X.outofBoundPointCount<X.offsets.length/2;let ia=X.outofBoundPointCount===X.offsets.length/2||D&&ha?[0,0]:y(X.offsets,fa,P,4);const ma=(ia[0]+ia[1])/2;var aa=x.projectedExtent.spatialReference;const wa=x.srcBufferExtent.spatialReference;D&&(ha||4<ma)&&(J(aa,wa,x.datumTransformation)&&(aa.isGeographic||null!=a(aa)),P=[4,4],X=E({...x,spacing:P}),fa={cols:X.size[0]+1,rows:X.size[1]+1},ia=y(X.offsets,fa,P,4));
X.error=ia;1<P[0]&&(X.coefficients=G(X.offsets,fa,ha));!x.includeGCSGrid||aa.isGeographic||aa.isWebMercator||(wa.isGeographic?X.gcsGrid={offsets:X.offsets,coefficients:X.coefficients,spacing:P}:(D=a(aa),null==D||D.isEnvelope||(aa&&!aa.isGeographic&&(D=String(aa.wkid||aa.wkt),ea.has(D)?aa=ea.get(D):(aa=(aa.wkid?W.PeFactory.coordsys(aa.wkid):W.PeFactory.fromString(W.PeDefs.PE_TYPE_PROJCS,aa.wkt)).getGeogcs().getCode(),ea.set(D,aa)),aa=new T({wkid:aa})),aa=k(x.projectedExtent,aa),{offsets:x}=E({...x,
srcBufferExtent:aa,spacing:P}),fa=G(x,fa,ha),X.gcsGrid={offsets:x,coefficients:fa,spacing:P})));return X};N.getRasterDatasetAlignmentInfo=function(x){const D=x.storageInfo.origin.x;var P=B(x.spatialReference,!0);if(null==P)return{originX:D,halfWorldWidth:null,pyramidsInfo:null};const X=P/2,{nativePixelSize:fa,storageInfo:ha,extent:ia}=x,{maximumPyramidLevel:ma,blockWidth:aa,pyramidScalingFactor:wa}=ha;let e=fa.x;const q=[];x=null!=x.transform&&"gcs-shift"===x.transform.type;const O=D+(x?0:X);P=x?
P-D:X-D;for(let S=0;S<=ma;S++){const la=(ia.xmax-D)/e/aa,na=P/e/aa;q.push({resolutionX:e,blockWidth:aa,datsetColumnCount:0===la-Math.floor(la)?la:Math.ceil(la),worldColumnCountFromOrigin:0===na-Math.floor(na)?na:Math.ceil(na),leftMargin:Math.round(O/e)%aa,rightPadding:(aa-Math.round(P/e)%aa)%aa,originColumnOffset:Math.floor(O/e/aa)});e*=wa}return{originX:D,halfWorldWidth:X,pyramidsInfo:q,hasGCSSShiftTransform:x}};N.getWorldWidth=B;N.getWorldWrapCount=L;N.load=async function(){ba.isLoaded()||await ba.load()};
N.minimumGridSpacing=4;N.projectExtent=k;N.projectPoint=f;N.projectPolygon=function(x,D,P){if("extent"===x.type){const {xmin:X,ymin:fa,xmax:ha,ymax:ia,spatialReference:ma}=x;x=new M({rings:[[[X,ia],[ha,ia],[ha,fa],[X,fa],[X,ia]]],spatialReference:ma})}if(x.spatialReference.equals(D))return x;w(x.spatialReference,D,P);return ba.project(x,D,P)};N.projectResolution=z;N.requirePE=J;N.snapExtent=function(x){x=x.clone().normalize();return 1===x.length?x[0]:u(x)};N.snapPyramid=function(x,D,P){const {storageInfo:X,
pixelSize:fa}=D;var ha=0;let ia=!1;var {pyramidResolutions:ma}=X,aa="mixed"===X.tileInfo.format?.toLowerCase()?Math.max(1,Math.min(3,X.tileInfo.dpi/96)):1;aa=(x.x+x.y)/2/aa;if(null!=ma&&ma.length){x=ma[ma.length-1];x=(x.x+x.y)/2;var wa=(fa.x+fa.y)/2;if(aa<=wa)ha=0;else if(aa>=x)ha=ma.length,ia=8<aa/x;else{x=wa;for(let e=1;e<=ma.length;e++){wa=(ma[e-1].x+ma[e-1].y)/2;if(aa<=wa){aa===wa?ha=e:"down"===P?(ha=e-1,ia=8<aa/x):ha="up"===P?e:aa-x>wa-aa||2<aa/x?e:e-1;break}x=wa}}P=0===ha?fa:ma[ha-1];ia&&(ma=
Math.min(P.x,P.y),aa=t.getMetersPerUnitForSR(D.spatialReference),19567<ma*aa&&(ia=!1));return{pyramidLevel:ha,pyramidResolution:new K({x:P.x,y:P.y,spatialReference:D.spatialReference}),excessiveReading:ia}}ha=Math.log(x.x/fa.x)/Math.LN2;aa=Math.log(x.y/fa.y)/Math.LN2;ma=D.storageInfo.maximumPyramidLevel||0;ha="down"===P?Math.floor(Math.min(ha,aa)):"up"===P?Math.ceil(Math.max(ha,aa)):Math.round((ha+aa)/2);0>ha?ha=0:ha>ma&&(ia=ha>ma+3,ha=ma);P=2**ha;D=new K({x:P*D.nativePixelSize.x,y:P*D.nativePixelSize.y,
spatialReference:D.spatialReference});return{pyramidLevel:ha,pyramidResolution:D,excessiveReading:ia}};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(N,g,F,C,t){function W(){return!!g._pe}function ba(){return!!t("esri-wasm")}function R(){return z?z:z=(new Promise((f,m)=>N(["./pe-wasm"],f,m))).then(f=>f.peWasm).then(({default:f})=>f({locateFile:m=>C.getAssetUrl(`esri/geometry/support/${m}`)})).then(f=>
{K(f)})}function K(f){function m(b,a,c){b[a]=c(b[a])}g._pe=f;g.PeDefs.init();g.PeGTlistExtended.init();g.PeNotationMgrs.init();g.PeNotationUtm.init();g.PePCSInfo.init();g.PeGCSExtent=function(b){function a(){return b.apply(this,arguments)||this}F._inherits(a,b);a.prototype.destroy=function(){g._pe.destroy(this)};return F._createClass(a)}(g._pe.PeGCSExtent);f=[g._pe.PeDatum,g._pe.PeGeogcs,g._pe.PeGeogtran,g._pe.PeObject,g._pe.PeParameter,g._pe.PePrimem,g._pe.PeProjcs,g._pe.PeSpheroid,g._pe.PeUnit];
for(var r of f)m(r.prototype,"getName",b=>function(){return b.call(this,Array(g.PeDefs.PE_NAME_MAX))});for(const b of[g._pe.PeGeogtran,g._pe.PeProjcs])m(b.prototype,"getParameters",a=>function(){const c=Array(g.PeDefs.PE_PARM_MAX);let d=a.call(this);for(let h=0;h<c.length;h++){const u=g._pe.getValue(d,"*");c[h]=u?g._pe.wrapPointer(u,g._pe.PeParameter):null;d+=Int32Array.BYTES_PER_ELEMENT}return c});m(g._pe.PeHorizon.prototype,"getCoord",b=>function(){const a=this.getSize();if(!a)return null;const c=
[],d=b.call(this);w(c,a,d);return c});m(g._pe.PeGTlistExtendedEntry.prototype,"getEntries",b=>{const a=g._pe._pe_getPeGTlistExtendedGTsSize();return function(){let c=null;var d=b.call(this);if(!g._pe.compare(d,g._pe.NULL)){c=[d];const h=this.getSteps();if(1<h){d=g._pe.getPointer(d);for(let u=1;u<h;u++)c.push(g._pe.wrapPointer(d+a*u,g._pe.PeGTlistExtendedGTs))}}return c}});const l=g._pe._pe_getPeHorizonSize();r=b=>function(){let a=this._cache;a||(this._cache=a=new Map);if(a.has(b))return a.get(b);
let c=null;var d=b.call(this);if(!g._pe.compare(d,g._pe.NULL)){c=[d];const h=d.getNump();if(1<h){d=g._pe.getPointer(d);for(let u=1;u<h;u++)c.push(g._pe.wrapPointer(d+l*u,g._pe.PeHorizon))}}a.set(b,c);return c};m(g._pe.PeProjcs.prototype,"horizonGcsGenerate",r);m(g._pe.PeProjcs.prototype,"horizonPcsGenerate",r);g._pe.PeObject.prototype.toString=function(b=g.PeDefs.PE_STR_OPTS_NONE){g._pe.ensureCache.prepare();const a=g._pe.getPointer(this),c=g._pe.ensureInt8(Array(g.PeDefs.PE_BUFFER_MAX));return g._pe.UTF8ToString(g._pe._pe_object_to_string_ext(a,
b,c))}}function M(f){if(f){var m=g._pe.getClass(f);m&&(m=g._pe.getCache(m))&&(f=g._pe.getPointer(f))&&delete m[f]}}function T(f,m){const r=[];m=Array(m);for(let l=0;l<f;l++)r.push(g._pe.ensureInt8(m));return r}function J(f){let m;Array.isArray(f[0])?(m=[],f.forEach(r=>{m.push(r[0],r[1])})):m=f;return m}function w(f,m,r,l=!1){if(l)for(l=0;l<2*m;l++)f[l]=g._pe.getValue(r+l*Float64Array.BYTES_PER_ELEMENT,"double");else{l=0===f.length;for(let b=0;b<m;b++)l&&(f[b]=Array(2)),f[b][0]=g._pe.getValue(r,"double"),
f[b][1]=g._pe.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}let z;g._pe=null;g.PeCSTransformations=void 0;(function(f){function m(b,a,c){g._pe.ensureCache.prepare();var d=J(c);const h=c===d;d=g._pe.ensureFloat64(d);(b=g._pe._pe_geog_to_proj(g._pe.getPointer(b),a,d))&&w(c,a,d,h);return b}function r(b,a,c){return l(b,a,c,0)}function l(b,a,c,d){g._pe.ensureCache.prepare();var h=J(c);const u=c===h;h=g._pe.ensureFloat64(h);(b=g._pe._pe_proj_to_geog_center(g._pe.getPointer(b),
a,h,d))&&w(c,a,h,u);return b}f.geogToProj=m;f.projGeog=function(b,a,c,d){switch(d){case g.PeDefs.PE_TRANSFORM_P_TO_G:return r(b,a,c);case g.PeDefs.PE_TRANSFORM_G_TO_P:return m(b,a,c)}return 0};f.projToGeog=r;f.projToGeogCenter=l})(g.PeCSTransformations||(g.PeCSTransformations={}));g.PeDefs=void 0;(function(f){f.init=function(){f.PE_BUFFER_MAX=g._pe.PeDefs.prototype.PE_BUFFER_MAX;f.PE_NAME_MAX=g._pe.PeDefs.prototype.PE_NAME_MAX;f.PE_MGRS_MAX=g._pe.PeDefs.prototype.PE_MGRS_MAX;f.PE_USNG_MAX=g._pe.PeDefs.prototype.PE_USNG_MAX;
f.PE_DD_MAX=g._pe.PeDefs.prototype.PE_DD_MAX;f.PE_DDM_MAX=g._pe.PeDefs.prototype.PE_DDM_MAX;f.PE_DMS_MAX=g._pe.PeDefs.prototype.PE_DMS_MAX;f.PE_UTM_MAX=g._pe.PeDefs.prototype.PE_UTM_MAX;f.PE_PARM_MAX=g._pe.PeDefs.prototype.PE_PARM_MAX;f.PE_TYPE_NONE=g._pe.PeDefs.prototype.PE_TYPE_NONE;f.PE_TYPE_GEOGCS=g._pe.PeDefs.prototype.PE_TYPE_GEOGCS;f.PE_TYPE_PROJCS=g._pe.PeDefs.prototype.PE_TYPE_PROJCS;f.PE_TYPE_GEOGTRAN=g._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;f.PE_TYPE_COORDSYS=g._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
f.PE_TYPE_UNIT=g._pe.PeDefs.prototype.PE_TYPE_UNIT;f.PE_TYPE_LINUNIT=g._pe.PeDefs.prototype.PE_TYPE_LINUNIT;f.PE_STR_OPTS_NONE=g._pe.PeDefs.prototype.PE_STR_OPTS_NONE;f.PE_STR_AUTH_NONE=g._pe.PeDefs.prototype.PE_STR_AUTH_NONE;f.PE_STR_AUTH_TOP=g._pe.PeDefs.prototype.PE_STR_AUTH_TOP;f.PE_STR_NAME_CANON=g._pe.PeDefs.prototype.PE_STR_NAME_CANON;f.PE_PARM_X0=g._pe.PeDefs.prototype.PE_PARM_X0;f.PE_PARM_ND=g._pe.PeDefs.prototype.PE_PARM_ND;f.PE_TRANSFORM_1_TO_2=g._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
f.PE_TRANSFORM_2_TO_1=g._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;f.PE_TRANSFORM_P_TO_G=g._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;f.PE_TRANSFORM_G_TO_P=g._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;f.PE_HORIZON_RECT=g._pe.PeDefs.prototype.PE_HORIZON_RECT;f.PE_HORIZON_POLY=g._pe.PeDefs.prototype.PE_HORIZON_POLY;f.PE_HORIZON_LINE=g._pe.PeDefs.prototype.PE_HORIZON_LINE;f.PE_HORIZON_DELTA=g._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(g.PeDefs||(g.PeDefs={}));g.PeFactory=void 0;(function(f){function m(a,c){let d=
null,h=r[a];h||(h={},r[a]=h);h.hasOwnProperty(String(c))?d=h[c]:(a=g._pe.PeFactory.prototype.factoryByType(a,c),g._pe.compare(a,g._pe.NULL)||(d=a,h[c]=d));return d=b(d)}const r={},l={},b=a=>{if(a){const c=a.getType();switch(c){case g.PeDefs.PE_TYPE_GEOGCS:a=g._pe.castObject(a,g._pe.PeGeogcs);break;case g.PeDefs.PE_TYPE_PROJCS:a=g._pe.castObject(a,g._pe.PeProjcs);break;case g.PeDefs.PE_TYPE_GEOGTRAN:a=g._pe.castObject(a,g._pe.PeGeogtran);break;default:c&g.PeDefs.PE_TYPE_UNIT&&(a=g._pe.castObject(a,
g._pe.PeUnit))}}return a};f.initialize=function(){g._pe.PeFactory.prototype.initialize(null)};f.coordsys=function(a){return m(g.PeDefs.PE_TYPE_COORDSYS,a)};f.factoryByType=m;f.fromString=function(a,c){let d=null,h=l[a];h||(h={},l[a]=h);h.hasOwnProperty(c)?d=h[c]:(a=g._pe.PeFactory.prototype.fromString(a,c),g._pe.compare(a,g._pe.NULL)||(d=a,h[c]=d));return d=b(d)};f.geogcs=function(a){return m(g.PeDefs.PE_TYPE_GEOGCS,a)};f.geogtran=function(a){return m(g.PeDefs.PE_TYPE_GEOGTRAN,a)};f.getCode=function(a){return g._pe.PeFactory.prototype.getCode(a)};
f.projcs=function(a){return m(g.PeDefs.PE_TYPE_PROJCS,a)};f.unit=function(a){return m(g.PeDefs.PE_TYPE_UNIT,a)}})(g.PeFactory||(g.PeFactory={}));g.PeGCSExtent=null;g.PeGTlistExtended=void 0;(function(f){let m;f.init=function(){f.PE_GTLIST_OPTS_COMMON=g._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;m=g._pe._pe_getPeGTlistExtendedEntrySize()};f.getGTlist=function(r,l,b,a,c,d){let h=null;const u=new g._pe.PeInteger(d);try{const k=g._pe.PeGTlistExtended.prototype.getGTlist(r,l,b,a,c,u);if(d=u.val)if(h=
[k],1<d){const v=g._pe.getPointer(k);for(r=1;r<d;r++)h.push(g._pe.wrapPointer(v+m*r,g._pe.PeGTlistExtendedEntry))}}finally{g._pe.destroy(u)}return h}})(g.PeGTlistExtended||(g.PeGTlistExtended={}));g.PeGTlistExtendedEntry=void 0;(function(f){f.destroy=function(m){if(m&&m.length){for(const r of m)M(r),r.getEntries().forEach(l=>{M(l);l=l.getGeogtran();M(l);l.getParameters().forEach(M);[l.getGeogcs1(),l.getGeogcs2()].forEach(b=>{M(b);const a=b.getDatum();M(a);M(a.getSpheroid());M(b.getPrimem());M(b.getUnit())})});
g._pe.PeGTlistExtendedEntry.prototype.Delete(m[0])}}})(g.PeGTlistExtendedEntry||(g.PeGTlistExtendedEntry={}));g.PeGTTransformations=void 0;(function(f){f.geogToGeog=function(m,r,l,b,a){g._pe.ensureCache.prepare();var c=J(l);const d=l===c;c=g._pe.ensureFloat64(c);let h=0;b&&(h=g._pe.ensureFloat64(b));(m=g._pe._pe_geog_to_geog(g._pe.getPointer(m),r,c,h,a))&&w(l,r,c,d);return m}})(g.PeGTTransformations||(g.PeGTTransformations={}));g.PeNotationDms=void 0;(function(f){const m=(l,b,a,c,d,h)=>{g._pe.ensureCache.prepare();
switch(l){case "dd":var u=g._pe._pe_geog_to_dd;var k=g.PeDefs.PE_DD_MAX;break;case "ddm":u=g._pe._pe_geog_to_ddm;k=g.PeDefs.PE_DDM_MAX;break;case "dms":u=g._pe._pe_geog_to_dms,k=g.PeDefs.PE_DMS_MAX}l=0;b&&(l=g._pe.getPointer(b));b=J(c);b=g._pe.ensureFloat64(b);k=T(a,k);c=g._pe.ensureInt32(k);if(d=u(l,a,b,d,c))for(u=0;u<a;u++)h[u]=g._pe.UTF8ToString(k[u]);return d},r=(l,b,a,c,d)=>{g._pe.ensureCache.prepare();switch(l){case "dd":var h=g._pe._pe_dd_to_geog;break;case "ddm":h=g._pe._pe_ddm_to_geog;break;
case "dms":h=g._pe._pe_dms_to_geog}l=0;b&&(l=g._pe.getPointer(b));b=c.map(u=>g._pe.ensureString(u));c=g._pe.ensureInt32(b);b=g._pe.ensureFloat64(Array(2*a));(h=h(l,a,c,b))&&w(d,a,b);return h};f.geogToDms=function(l,b,a,c,d){return m("dms",l,b,a,c,d)};f.dmsToGeog=function(l,b,a,c){return r("dms",l,b,a,c)};f.geogToDdm=function(l,b,a,c,d){return m("ddm",l,b,a,c,d)};f.ddmToGeog=function(l,b,a,c){return r("ddm",l,b,a,c)};f.geogToDd=function(l,b,a,c,d){return m("dd",l,b,a,c,d)};f.ddToGeog=function(l,b,
a,c){return r("dd",l,b,a,c)}})(g.PeNotationDms||(g.PeNotationDms={}));g.PeNotationMgrs=void 0;(function(f){f.init=function(){f.PE_MGRS_STYLE_NEW=g._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;f.PE_MGRS_STYLE_OLD=g._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;f.PE_MGRS_STYLE_AUTO=g._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;f.PE_MGRS_180_ZONE_1_PLUS=g._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;f.PE_MGRS_ADD_SPACES=g._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};f.geogToMgrsExtended=
function(m,r,l,b,a,c,d){g._pe.ensureCache.prepare();let h=0;m&&(h=g._pe.getPointer(m));m=J(l);l=g._pe.ensureFloat64(m);m=T(r,g.PeDefs.PE_MGRS_MAX);const u=g._pe.ensureInt32(m);if(b=g._pe._pe_geog_to_mgrs_extended(h,r,l,b,a,c,u))for(a=0;a<r;a++)d[a]=g._pe.UTF8ToString(m[a]);return b};f.mgrsToGeogExtended=function(m,r,l,b,a){g._pe.ensureCache.prepare();let c=0;m&&(c=g._pe.getPointer(m));m=l.map(d=>g._pe.ensureString(d));l=g._pe.ensureInt32(m);m=g._pe.ensureFloat64(Array(2*r));(b=g._pe._pe_mgrs_to_geog_extended(c,
r,l,b,m))&&w(a,r,m);return b}})(g.PeNotationMgrs||(g.PeNotationMgrs={}));g.PeNotationUsng=void 0;(function(f){f.geogToUsng=function(m,r,l,b,a,c,d){g._pe.ensureCache.prepare();let h=0;m&&(h=g._pe.getPointer(m));m=J(l);l=g._pe.ensureFloat64(m);m=T(r,g.PeDefs.PE_MGRS_MAX);const u=g._pe.ensureInt32(m);if(b=g._pe._pe_geog_to_usng(h,r,l,b,a,c,u))for(a=0;a<r;a++)d[a]=g._pe.UTF8ToString(m[a]);return b};f.usngToGeog=function(m,r,l,b){g._pe.ensureCache.prepare();var a=0;m&&(a=g._pe.getPointer(m));m=l.map(c=>
g._pe.ensureString(c));l=g._pe.ensureInt32(m);m=g._pe.ensureFloat64(Array(2*r));(a=g._pe._pe_usng_to_geog(a,r,l,m))&&w(b,r,m);return a}})(g.PeNotationUsng||(g.PeNotationUsng={}));g.PeNotationUtm=void 0;(function(f){f.init=function(){f.PE_UTM_OPTS_NONE=g._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;f.PE_UTM_OPTS_ADD_SPACES=g._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;f.PE_UTM_OPTS_NS=g._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};f.geogToUtm=function(m,r,l,b,a){g._pe.ensureCache.prepare();var c=
0;m&&(c=g._pe.getPointer(m));m=J(l);l=g._pe.ensureFloat64(m);m=T(r,g.PeDefs.PE_UTM_MAX);const d=g._pe.ensureInt32(m);if(b=g._pe._pe_geog_to_utm(c,r,l,b,d))for(c=0;c<r;c++)a[c]=g._pe.UTF8ToString(m[c]);return b};f.utmToGeog=function(m,r,l,b,a){g._pe.ensureCache.prepare();let c=0;m&&(c=g._pe.getPointer(m));m=l.map(d=>g._pe.ensureString(d));l=g._pe.ensureInt32(m);m=g._pe.ensureFloat64(Array(2*r));(b=g._pe._pe_utm_to_geog(c,r,l,b,m))&&w(a,r,m);return b}})(g.PeNotationUtm||(g.PeNotationUtm={}));g.PePCSInfo=
void 0;(function(f){const m=new Map;f.init=function(){f.PE_PCSINFO_OPTION_NONE=g._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;f.PE_PCSINFO_OPTION_DOMAIN=g._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;f.PE_POLE_OUTSIDE_BOUNDARY=g._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;f.PE_POLE_POINT=g._pe.PePCSInfo.prototype.PE_POLE_POINT};f.generate=function(r,l=f.PE_PCSINFO_OPTION_DOMAIN){let b=null,a=null;m.has(r)&&(a=m.get(r),a[l]&&(b=a[l]));b||(b=g._pe.PePCSInfo.prototype.generate(r,l),a||(a=
[],m.set(r,a)),a[l]=b);return b}})(g.PePCSInfo||(g.PePCSInfo={}));g.PeVersion=void 0;(function(f){f.versionString=function(){return g._pe.PeVersion.prototype.version_string()}})(g.PeVersion||(g.PeVersion={}));const n=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return g.PeCSTransformations},get PeDefs(){return g.PeDefs},get PeFactory(){return g.PeFactory},get PeGCSExtent(){return g.PeGCSExtent},get PeGTTransformations(){return g.PeGTTransformations},get PeGTlistExtended(){return g.PeGTlistExtended},
get PeGTlistExtendedEntry(){return g.PeGTlistExtendedEntry},get PeNotationDms(){return g.PeNotationDms},get PeNotationMgrs(){return g.PeNotationMgrs},get PeNotationUsng(){return g.PeNotationUsng},get PeNotationUtm(){return g.PeNotationUtm},get PePCSInfo(){return g.PePCSInfo},get PeVersion(){return g.PeVersion},_init:K,get _pe(){return g._pe},isLoaded:W,isSupported:ba,load:R},Symbol.toStringTag,{value:"Module"}));g._init=K;g.isLoaded=W;g.isSupported=ba;g.load=R;g.pe=n})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T,J,w,z,n,f,m,r,l,b,a,c,d,h,u,k){function v(){return!!Ma&&f.isLoaded()}function p(U){null==Ra&&(Ra=Promise.all([f.load(),(new Promise((da,Y)=>N(["../chunks/geometryEngineBase"],da,Y))).then(da=>da.geometryEngineBase),new Promise((da,Y)=>N(["./geometryAdapters/hydrated"],da,Y))]));return Ra.then(([,da,{hydratedAdapter:Y}])=>{W.throwIfAborted(U);Qa=Y;Ma=da.default;Ma._enableProjection(f.pe);cb.notify()})}function B(U,da,Y=null,sa=null){return Array.isArray(U)?0===U.length?
[]:H(Qa,U,U[0].spatialReference,da,Y,sa):H(Qa,[U],U.spatialReference,da,Y,sa)[0]}function H(U,da,Y,sa,Ca=null,Ea=null){if(null==Y||null==sa)return da;if(G(Y,sa,Ca))return da.map(Fa=>A(Fa,Y,sa));if(null==Ca){const Fa=d.cacheKey(Y,sa);void 0!==Ka[Fa]?Ca=Ka[Fa]:(Ca=L(Y,sa,void 0),null==Ca&&(Ca=new d),Ka[Fa]=Ca)}if(null==Ma||null==U)throw new $a;return null!=Ea?Ma._project(U,da,Y,sa,Ca,Ea):Ma._project(U,da,Y,sa,Ca)}function I(U,da){if(!v())for(const Y of U)if(null!=Y&&!h.equals(Y.spatialReference,da)&&
h.isValid(Y.spatialReference)&&h.isValid(da)&&!G(Y.spatialReference,da))return R.trackAccess(cb),{pending:p(),geometries:null};return{pending:null,geometries:U.map(Y=>null==Y?null:h.equals(Y.spatialReference,da)?Y:h.isValid(Y.spatialReference)&&h.isValid(da)?E(Y,da):null)}}function L(U,da,Y=null){if(null==U||null==da)return null;if(null==Ma||null==Qa)throw new $a;U=Ma._getTransformation(Qa,U,da,Y,Y?.spatialReference);return null!==U?d.fromGE(U):null}function E(U,da){try{const Y=B(U,da);if(null==Y)return null;
"xmin"in U&&"xmin"in Y&&(Y.zmin=U.zmin,Y.zmax=U.zmax);const sa=k.getGeometryZScaler(Y.type,U.spatialReference,da);null!=sa&&sa(Y);return Y}catch(Y){if(!(Y instanceof $a))throw Y;return null}}function G(U,da,Y){return Y?!1:h.equals(U,da)?!0:h.isValid(U)&&h.isValid(da)&&!!Ja(U,da,fb)}function A(U,da,Y){return U?"x"in U?y(U,da,new m,Y,0):"xmin"in U?x(U,da,new z,Y,0):"rings"in U?ea(U,da,new r,Y,0):"paths"in U?V(U,da,new l,Y,0):"points"in U?Q(U,da,new n,Y,0):null:null}function y(U,da,Y,sa,Ca){Ia[0]=U.x;
Ia[1]=U.y;const Ea=U.z;Ia[2]=void 0!==Ea?Ea:Ca;if(!fa(Ia,da,0,Ia,sa,0,1))return null;Y.x=Ia[0];Y.y=Ia[1];Y.spatialReference=sa;void 0===Ea?(Y.z=void 0,Y.hasZ=!1):(Y.z=Ia[2],Y.hasZ=!0);void 0===U.m?(Y.m=void 0,Y.hasM=!1):(Y.m=U.m,Y.hasM=!0);return Y}function Q(U,da,Y,sa,Ca){const {points:Ea,hasZ:Fa,hasM:Ha}=U;U=[];const Pa=Ea.length,Oa=[];for(var Na of Ea)Oa.push(Na[0],Na[1],Fa?Na[2]:Ca);if(!fa(Oa,da,0,Oa,sa,0,Pa))return null;for(da=0;da<Pa;++da){Ca=3*da;Na=Oa[Ca];const Ta=Oa[Ca+1];Fa&&Ha?U.push([Na,
Ta,Oa[Ca+2],Ea[da][3]]):Fa?U.push([Na,Ta,Oa[Ca+2]]):Ha?U.push([Na,Ta,Ea[da][2]]):U.push([Na,Ta])}Y.points=U;Y.spatialReference=sa;Y.hasZ=Fa;Y.hasM=Ha;return Y}function V(U,da,Y,sa,Ca){const {paths:Ea,hasZ:Fa,hasM:Ha}=U;U=[];if(!ha(Ea,Fa??!1,Ha??!1,da,U,sa,Ca))return null;Y.paths=U;Y.spatialReference=sa;Y.hasZ=Fa;Y.hasM=Ha;return Y}function ea(U,da,Y,sa,Ca){const {rings:Ea,hasZ:Fa,hasM:Ha}=U;U=[];if(!ha(Ea,Fa??!1,Ha??!1,da,U,sa,Ca))return null;Y.rings=U;Y.spatialReference=sa;Y.hasZ=Fa;Y.hasM=Ha;return Y}
function x(U,da,Y,sa,Ca){const {xmin:Ea,ymin:Fa,xmax:Ha,ymax:Pa,hasZ:Oa,hasM:Na}=U;if(!D(Ea,Fa,Oa?U.zmin:Ca,da,Ia,sa))return null;Y.xmin=Ia[0];Y.ymin=Ia[1];Oa&&(Y.zmin=Ia[2]);if(!D(Ha,Pa,Oa?U.zmax:Ca,da,Ia,sa))return null;Y.xmax=Ia[0];Y.ymax=Ia[1];Oa&&(Y.zmax=Ia[2]);Na&&(Y.mmin=U.mmin,Y.mmax=U.mmax);Y.spatialReference=sa;return Y}function D(U,da,Y,sa,Ca,Ea){La[0]=U;La[1]=da;La[2]=Y;return fa(La,sa,0,Ca,Ea,0,1)}function P(U,da,Y,sa){if(null==da||null==sa||2>U.length)return!1;2===U.length&&(La[0]=U[0],
La[1]=U[1],La[2]=0,U=La);return fa(U,da,0,Y,sa,0,1)}function X(U,da,Y){if(null==da)return!1;da=wa(da,ab);da=Va[da][ka.WGS84_COMPARABLE_LON_LAT];if(null==da)return!1;da(U,0,La,0);Y!==La&&(Y[0]=La[0],Y[1]=La[1],2<Y.length&&(Y[2]=La[2]));return!0}function fa(U,da,Y,sa,Ca,Ea,Fa=1){da=Ja(da,Ca,fb);if(null==da)return!1;if(da===e){if(U===sa&&Y===Ea)return!0;Fa=Y+3*Fa;for(let Ha=Y,Pa=Ea;Ha<Fa;Ha++,Pa++)sa[Pa]=U[Ha];return!0}Fa=Y+3*Fa;for(let Ha=Y,Pa=Ea;Ha<Fa;Ha+=3,Pa+=3)da(U,Ha,sa,Pa);return!0}function ha(U,
da,Y,sa,Ca,Ea,Fa=0){const Ha=[];for(const Pa of U)for(const Oa of Pa)Ha.push(Oa[0],Oa[1],da?Oa[2]:Fa);if(!fa(Ha,sa,0,Ha,Ea,0,Ha.length/3))return!1;sa=0;Ca.length=0;for(const Pa of U){U=[];for(const Oa of Pa)da&&Y?U.push([Ha[sa++],Ha[sa++],Ha[sa++],Oa[3]]):da?U.push([Ha[sa++],Ha[sa++],Ha[sa++]]):(Y?U.push([Ha[sa++],Ha[sa++],Oa[2]]):U.push([Ha[sa++],Ha[sa++]]),sa++);Ca.push(U)}return!0}function ia(U,da,Y,sa){da=sa+da;if(da<sa/2||Y>da)return Number.MAX_VALUE;U=Math.abs(Wa*U)+Math.asin(Y/da);return U>=
Math.PI/2?Number.MAX_VALUE:Y/Math.cos(U)}function ma(U,da,Y){const sa=Math.sin(U);U=Math.cos(U);const Ca=Math.sin(da);da=Math.cos(da);Y[0]=-sa;Y[4]=-Ca*U;Y[8]=da*U;Y[12]=0;Y[1]=U;Y[5]=-Ca*sa;Y[9]=da*sa;Y[13]=0;Y[2]=0;Y[6]=da;Y[10]=Ca;Y[14]=0;Y[3]=0;Y[7]=0;Y[11]=0;Y[15]=1;return Y}function aa(U,da,Y){ma(U,da,Y);M.transpose(Y,Y);return Y}function wa(U,da){if(!U)return ka.UNKNOWN;if(da.spatialReference===U)return da.spatialReferenceId;da.spatialReference=U;"metersPerUnit"in da&&(da.metersPerUnit=ba.getMetersPerUnitForSR(U,
1));return U.wkt===w.SphericalECEFSpatialReferenceLike.wkt?da.spatialReferenceId=ka.SPHERICAL_ECEF:h.isWGS84(U)?da.spatialReferenceId=ka.WGS84:h.isWebMercator(U)?da.spatialReferenceId=ka.WEB_MERCATOR:h.isPlateCarree(U)?da.spatialReferenceId=ka.PLATE_CARREE:U.wkt===w.WGS84ECEFSpatialReferenceLike.wkt?da.spatialReferenceId=ka.WGS84_ECEF:U.wkid===u.SupportedGCSWkids.CGCS2000?da.spatialReferenceId=ka.CGCS2000:U.wkt===w.SphericalPCPFMarsLike.wkt?da.spatialReferenceId=ka.SPHERICAL_MARS_PCPF:U.wkt===w.SphericalPCPFMoonLike.wkt?
da.spatialReferenceId=ka.SPHERICAL_MOON_PCPF:h.isMars(U)?da.spatialReferenceId=ka.GCSMARS2000:h.isMoon(U)?da.spatialReferenceId=ka.GCSMOON2000:da.spatialReferenceId=ka.UNKNOWN}function e(U,da,Y,sa){U!==Y&&(Y[sa++]=U[da++],Y[sa++]=U[da++],Y[sa]=U[da])}function q(U,da,Y,sa){Y[sa++]=bb*(U[da++]/a.earth.radius);Y[sa++]=bb*(Math.PI/2-2*Math.atan(Math.exp(-U[da++]/a.earth.radius)));Y[sa]=U[da]}function O(U,da,Y,sa){q(U,da,Y,sa);Da(Y,sa,Y,sa)}function S(U,da,Y,sa){q(U,da,Y,sa);ya(Y,sa,Y,sa)}function la(U,
da,Y,sa,Ca){var Ea=.4999999*Math.PI;Ea=t.clamp(Wa*U[da+1],-Ea,Ea);Ea=Math.sin(Ea);Y[sa++]=Wa*U[da]*Ca.radius;Y[sa++]=Ca.halfSemiMajorAxis*Math.log((1+Ea)/(1-Ea));Y[sa]=U[da+2]}function na(U,da,Y,sa){la(U,da,Y,sa,a.earth)}function ra(U,da,Y,sa){Y[sa]=U[da]*gb;Y[sa+1]=U[da+1]*gb;Y[sa+2]=U[da+2]}function qa(U,da,Y,sa){Y[sa]=U[da]*db;Y[sa+1]=U[da+1]*db;Y[sa+2]=U[da+2]}function ta(U,da,Y,sa){q(U,da,Y,sa);ra(Y,sa,Y,sa)}function ua(U,da,Y,sa,Ca){Ca+=U[da+2];const Ea=Wa*U[da+1];U=Wa*U[da];da=Math.cos(Ea);
Y[sa++]=Math.cos(U)*da*Ca;Y[sa++]=Math.sin(U)*da*Ca;Y[sa]=Math.sin(Ea)*Ca}function za(U,da,Y,sa){ua(U,da,Y,sa,a.moon.radius)}function va(U,da,Y,sa){ua(U,da,Y,sa,a.mars.radius)}function Da(U,da,Y,sa){ua(U,da,Y,sa,a.earth.radius)}function Z(U,da,Y,sa,Ca){var Ea=U[da];const Fa=U[da+1];da=U[da+2];U=Math.sqrt(Ea*Ea+Fa*Fa+da*da);da=t.asinClamped(da/(0===U?1:U));Ea=Math.atan2(Fa,Ea);Y[sa++]=bb*Ea;Y[sa++]=bb*da;Y[sa]=U-Ca}function oa(U,da,Y,sa){Z(U,da,Y,sa,a.moon.radius)}function ca(U,da,Y,sa){Z(U,da,Y,sa,
a.mars.radius)}function pa(U,da,Y,sa){Z(U,da,Y,sa,a.earth.radius)}function xa(U,da,Y,sa){pa(U,da,Y,sa);na(Y,sa,Y,sa)}function ja(U,da,Y,sa){pa(U,da,Y,sa);ya(Y,sa,Y,sa)}function ya(U,da,Y,sa){var Ca=a.earth;const Ea=Wa*U[da];var Fa=Wa*U[da+1];U=U[da+2];da=Math.sin(Fa);Fa=Math.cos(Fa);const Ha=Ca.radius/Math.sqrt(1-Ca.eccentricitySquared*da*da);Y[sa++]=(Ha+U)*Fa*Math.cos(Ea);Y[sa++]=(Ha+U)*Fa*Math.sin(Ea);Y[sa++]=(Ha*(1-Ca.eccentricitySquared)+U)*da}function Aa(U,da,Y,sa){var Ca=c.earthEllipsoidConstants,
Ea=U[da],Fa=U[da+1];U=U[da+2];let Ha;da=Math.abs(U);var Pa=Ea*Ea+Fa*Fa;var Oa=Math.sqrt(Pa);var Na=Pa+U*U;var Ta=Math.sqrt(Na);Ea=Math.atan2(Fa,Ea);var Ya=U*U/Na;Na=Pa/Na;Fa=Ca.a2/Ta;Pa=Ca.a3-Ca.a4/Ta;.3<Na?(Ya=da/Ta*(1+Na*(Ca.a1+Fa+Ya*Pa)/Ta),Ta=Math.asin(Ya),Fa=Ya*Ya,Na=Math.sqrt(1-Fa)):(Na=Oa/Ta*(1-Ya*(Ca.a5-Fa-Na*Pa)/Ta),Ta=Math.acos(Na),Fa=1-Na*Na,Ya=Math.sqrt(Fa));Ha=1-a.earth.eccentricitySquared*Fa;Fa=a.earth.radius/Math.sqrt(Ha);Ca=Ca.a6*Fa;Fa=Oa-Fa*Na;Pa=da-Ca*Ya;da=Na*Fa+Ya*Pa;Oa=Na*Pa-
Ya*Fa;Ca=Oa/(Ca/Ha+da);Ta+=Ca;0>U&&(Ta=-Ta);Y[sa++]=bb*Ea;Y[sa++]=bb*Ta;Y[sa]=da+Oa*Ca/2}function Ba(U,da,Y,sa){Aa(U,da,Y,sa);Da(Y,sa,Y,sa)}function Ga(U,da,Y,sa){Aa(U,da,Y,sa);na(Y,sa,Y,sa)}function Ja(U,da,Y=Sa()){return null==U||null==da?null:Ua(U,da,Y).projector}function Ua(U,da,Y){if(null==U||null==da||Y.source.spatialReference===U&&Y.dest.spatialReference===da)return Y;const sa=wa(U,Y.source),Ca=wa(da,Y.dest);sa===ka.UNKNOWN&&Ca===ka.UNKNOWN?h.equals(U,da)?Y.projector=e:Y.projector=null:Y.projector=
Va[sa][Ca];return Y}function Sa(){return{source:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,metersPerUnit:1},projector:e}}let Ma=null,Qa=null,Ra=null,Ka={};const cb=new K.SimpleObservable;let $a=function(U){function da(){return U.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}F._inherits(da,U);return F._createClass(da)}(C);var ka;(function(U){U[U.UNKNOWN=0]="UNKNOWN";
U[U.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";U[U.WGS84=2]="WGS84";U[U.WEB_MERCATOR=3]="WEB_MERCATOR";U[U.WGS84_ECEF=4]="WGS84_ECEF";U[U.CGCS2000=5]="CGCS2000";U[U.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";U[U.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";U[U.GCSMARS2000=8]="GCSMARS2000";U[U.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";U[U.GCSMOON2000=10]="GCSMOON2000";U[U.LON_LAT=11]="LON_LAT";U[U.PLATE_CARREE=12]="PLATE_CARREE"})(ka||(ka={}));const gb=a.earth.radius*Math.PI/180,db=180/(a.earth.radius*
Math.PI),Va={[ka.WGS84]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:e,[ka.WGS84_COMPARABLE_LON_LAT]:e,[ka.SPHERICAL_ECEF]:Da,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:na,[ka.PLATE_CARREE]:ra,[ka.WGS84]:e,[ka.WGS84_ECEF]:ya},[ka.CGCS2000]:{[ka.CGCS2000]:e,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:e,[ka.WGS84_COMPARABLE_LON_LAT]:e,[ka.SPHERICAL_ECEF]:Da,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,
[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:ra,[ka.WGS84]:null,[ka.WGS84_ECEF]:ya},[ka.GCSMARS2000]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:e,[ka.GCSMOON2000]:null,[ka.LON_LAT]:e,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:va,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.GCSMOON2000]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:e,[ka.LON_LAT]:e,
[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:za,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.WEB_MERCATOR]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:q,[ka.WGS84_COMPARABLE_LON_LAT]:q,[ka.SPHERICAL_ECEF]:O,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:e,[ka.PLATE_CARREE]:ta,[ka.WGS84]:q,
[ka.WGS84_ECEF]:S},[ka.WGS84_ECEF]:{[ka.CGCS2000]:Aa,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:Aa,[ka.WGS84_COMPARABLE_LON_LAT]:Aa,[ka.SPHERICAL_ECEF]:Ba,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Ga,[ka.PLATE_CARREE]:function(U,da,Y,sa){Aa(U,da,Y,sa);ra(Y,sa,Y,sa)},[ka.WGS84]:Aa,[ka.WGS84_ECEF]:e},[ka.SPHERICAL_ECEF]:{[ka.CGCS2000]:pa,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:pa,[ka.WGS84_COMPARABLE_LON_LAT]:pa,[ka.SPHERICAL_ECEF]:e,
[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:xa,[ka.PLATE_CARREE]:function(U,da,Y,sa){pa(U,da,Y,sa);ra(Y,sa,Y,sa)},[ka.WGS84]:pa,[ka.WGS84_ECEF]:ja},[ka.SPHERICAL_MARS_PCPF]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:ca,[ka.GCSMOON2000]:null,[ka.LON_LAT]:ca,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:e,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},
[ka.SPHERICAL_MOON_PCPF]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:oa,[ka.LON_LAT]:oa,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:e,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.UNKNOWN]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:null,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,
[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:e,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.LON_LAT]:{[ka.CGCS2000]:e,[ka.GCSMARS2000]:e,[ka.GCSMOON2000]:e,[ka.LON_LAT]:e,[ka.WGS84_COMPARABLE_LON_LAT]:e,[ka.SPHERICAL_ECEF]:Da,[ka.SPHERICAL_MARS_PCPF]:va,[ka.SPHERICAL_MOON_PCPF]:za,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:na,[ka.PLATE_CARREE]:ra,[ka.WGS84]:e,[ka.WGS84_ECEF]:ya},[ka.WGS84_COMPARABLE_LON_LAT]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,
[ka.LON_LAT]:e,[ka.WGS84_COMPARABLE_LON_LAT]:e,[ka.SPHERICAL_ECEF]:Da,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:ra,[ka.WGS84]:e,[ka.WGS84_ECEF]:ya},[ka.PLATE_CARREE]:{[ka.CGCS2000]:qa,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:qa,[ka.WGS84_COMPARABLE_LON_LAT]:qa,[ka.SPHERICAL_ECEF]:function(U,da,Y,sa){qa(U,da,Y,sa);Da(Y,sa,Y,sa)},[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:function(U,da,Y,sa){qa(U,da,Y,sa);na(Y,sa,Y,sa)},[ka.PLATE_CARREE]:e,[ka.WGS84]:qa,[ka.WGS84_ECEF]:function(U,da,Y,sa){qa(U,da,Y,sa);ya(Y,sa,Y,sa)}}},ab={spatialReference:null,spatialReferenceId:ka.UNKNOWN},hb={spatialReference:null,spatialReferenceId:ka.UNKNOWN},fb=Sa(),ib=Sa(),Wa=t.deg2rad(1),bb=t.rad2deg(1),La=J.create(),Xa=J.create(),Za=J.create(),Ia=J.create(),eb=J.create();g.canProjectToWGS84ComparableLonLat=function(U){if(null==U)return!1;U=wa(U,ab);return!!Va[U][ka.WGS84_COMPARABLE_LON_LAT]};
g.canProjectWithoutEngine=G;g.computeENUToSphericalPCPFLocalRotation=ma;g.computeSphericalPCPFToENULocalRotation=aa;g.computeTranslationToOriginAndRotation=function(U,da,Y,sa){if(null==U||null==sa)return!1;var Ca=wa(U,ab),Ea=wa(sa,hb);if(Ca===Ea&&Ea!==ka.SPHERICAL_ECEF&&Ea!==ka.SPHERICAL_MARS_PCPF&&Ea!==ka.SPHERICAL_MOON_PCPF&&(Ca!==ka.UNKNOWN||h.equals(U,sa)))return M.fromTranslation(Y,da),!0;if(Ea===ka.SPHERICAL_ECEF||Ea===ka.SPHERICAL_MARS_PCPF||Ea===ka.SPHERICAL_MOON_PCPF){Ca=Va[Ca][ka.LON_LAT];
Ea=Va[ka.LON_LAT][Ea];if(null==Ca||null==Ea)return!1;Ca(da,0,Xa,0);Ea(Xa,0,Za,0);ma(Wa*Xa[0],Wa*Xa[1],Y);Y[12]=Za[0];Y[13]=Za[1];Y[14]=Za[2];return!0}if((Ea===ka.WEB_MERCATOR||Ea===ka.PLATE_CARREE)&&(Ca===ka.WGS84||Ca===ka.CGCS2000&&Ea===ka.PLATE_CARREE||Ca===ka.SPHERICAL_ECEF||Ca===ka.WEB_MERCATOR)){U=Va[Ca][ka.LON_LAT];Ea=Va[ka.LON_LAT][Ea];if(null==U||null==Ea)return!1;U(da,0,Xa,0);Ea(Xa,0,Za,0);Ca===ka.SPHERICAL_ECEF?aa(Wa*Xa[0],Wa*Xa[1],Y):M.identity(Y);Y[12]=Za[0];Y[13]=Za[1];Y[14]=Za[2];return!0}return!1};
g.getProjectorName=function(U,da){switch(Ja(U,da,fb)){case e:return"copy3";case Da:return"wgs84ToSphericalECEF";case na:return"wgs84ToWebMercator";case ra:return"wgs84ToPlateCarree";case ya:return"wgs84ToWGS84ECEF";case q:return"webMercatorToWGS84";case O:return"webMercatorToSphericalECEF";case S:return"webMercatorToWGS84ECEF";case ta:return"webMercatorToPlateCarree";case Aa:return"wgs84ECEFToWGS84";case Ba:return"wgs84ECEFToSphericalECEF";case Ga:return"wgs84ECEFToWebMercator";case pa:return"sphericalECEFToWGS84";
case xa:return"sphericalECEFToWebMercator";case ca:return"sphericalMarsPCPFToMars2000";case oa:return"sphericalMoonPCPFToMoon2000";case ja:return"sphericalECEFToWGS84ECEF";case va:return"mars2000ToSphericalPCPF";case za:return"moon2000ToSphericalPCPF";default:return null}};g.getTransformation=L;g.getTransformations=function(U,da,Y=null){if(null==Ma||null==Qa)throw new $a;U=Ma._getTransformationBySuitability(Qa,U,da,Y,Y?.spatialReference);if(null!==U){da=[];for(const sa of U)da.push(d.fromGE(sa));
return da}return[]};g.initializeProjection=async function(U,da,Y,sa){if(v())return W.waitTick(sa);if(Array.isArray(U))for(const {source:Ca,dest:Ea,geographicTransformation:Fa}of U){if(!G(Ca,Ea,Fa))return p(sa)}else if(!G(U,da,Y))return p(sa);return W.waitTick(sa)};g.isLoaded=v;g.load=p;g.localLinearScaleFactors=function(U,da,Y,sa){if(null==da||null==sa)return!1;const Ca=wa(da,ab);var Ea=wa(sa,hb);if(Ca===Ea&&Ca!==ka.UNKNOWN||h.equals(da,sa))return Y[0]=1,Y[1]=1,Y[2]=1,!0;if(Ca===ka.SPHERICAL_ECEF){da=
T.length(U);U=da/Math.sqrt(U[0]*U[0]+U[1]*U[1]);da/=a.earth.radius;if(Ea===ka.WEB_MERCATOR)return Y[0]=U*da,Y[1]=U*da,Y[2]=1,!0;if(Ea===ka.WGS84||Ea===ka.CGCS2000)return Ea=db,Y[0]=Ea*U*da,Y[1]=Ea*da,Y[2]=1,!0}else if(Ca===ka.PLATE_CARREE){if(Ea===ka.WGS84||Ea===ka.CGCS2000)return Y[0]=db,Y[1]=db,Y[2]=1,!0;if(Ea===ka.WEB_MERCATOR)return Ea=U[1]/a.earth.radius,Y[0]=1,Y[1]=1/Math.cos(Ea),Y[2]=1,!0}return!1};g.lonLatToSphericalPCPF=function(U,da,Y,sa){const Ca=Math.cos(Y);U[0]=Math.cos(da)*Ca*sa;U[1]=
Math.sin(da)*Ca*sa;U[2]=Math.sin(Y)*sa};g.lonLatToWebMercatorComparable=la;g.project=B;g.projectBoundingRect=function(U,da,Y,sa){if(null==U)return!1;if(h.equals(da,sa))return b.copy(Y,U),!0;La[0]=U[0];La[1]=U[1];La[2]=0;if(!fa(La,da,0,La,sa,0,1))return!1;Y[0]=La[0];Y[1]=La[1];La[0]=U[2];La[1]=U[3];La[2]=0;if(!fa(La,da,0,La,sa,0,1))return!1;Y[2]=La[0];Y[3]=La[1];return!0};g.projectBoundingSphere=function(U,da,Y,sa){if(null==da||null==sa)return!1;da=Ua(da,sa,ib);if(da.projector===e)return Y[0]=U[0],
Y[1]=U[1],Y[2]=U[2],Y[3]=U[3],!0;if(null==da.projector)return!1;const {source:Ca,dest:Ea}=da;if(Ea.spatialReferenceId===ka.WEB_MERCATOR){da=Va[Ca.spatialReferenceId][ka.WGS84];if(null==da)return!1;da(U,0,Xa,0);na(Xa,0,Y,0);Y[3]=ia(Xa[1],U[2],U[3],a.earth.radius);return!0}if(Ca.spatialReferenceId!==ka.WGS84&&Ca.spatialReferenceId!==ka.CGCS2000||Ea.spatialReferenceId!==ka.PLATE_CARREE)da.projector(U,0,Y,0),Y[3]=U[3]*(Ca.metersPerUnit??1)/(Ea.metersPerUnit??1);else{sa=Va[ka.SPHERICAL_ECEF][ka.PLATE_CARREE];
let Fa=U[3];null!=Va[Ca.spatialReferenceId][ka.SPHERICAL_ECEF]&&null!=sa&&(Fa=ia(U[1],U[2],U[3],a.earth.radius));da.projector(U,0,Y,0);Y[3]=Fa}return!0};g.projectBuffer=fa;g.projectDirection=function(U,da,Y,sa,Ca){T.copy(Ia,U);T.add(eb,U,da);P(Ia,Y,Ia,Ca);P(eb,Y,eb,Ca);T.subtract(sa,eb,Ia);T.normalize(sa,sa)};g.projectExtent=function(U,da,Y=da.spatialReference,sa=0){return null!=U.spatialReference&&null!=Y&&null!=x(U,U.spatialReference,da,Y,sa)};g.projectMany=H;g.projectMultipoint=function(U,da,Y=
da.spatialReference,sa=0){return null!=U.spatialReference&&null!=Y&&null!=Q(U,U.spatialReference,da,Y,sa)};g.projectOrLoad=function(U,da){U=I([U],da);return null!=U.pending?{pending:U.pending,geometry:null}:null!=U.geometries?{pending:null,geometry:U.geometries[0]}:{pending:null,geometry:null}};g.projectOrLoadMany=I;g.projectPoint=function(U,da,Y=da.spatialReference,sa=0){return null!=Y&&null!=U.spatialReference&&null!=y(U,U.spatialReference,da,Y,sa)};g.projectPointToVector=function(U,da,Y,sa=0){Ia[0]=
U.x;Ia[1]=U.y;const Ca=U.z;Ia[2]=void 0!==Ca?Ca:sa;return fa(Ia,U.spatialReference,0,da,Y,0,1)};g.projectPointToWGS84ComparableLonLat=function(U,da){Ia[0]=U.x;Ia[1]=U.y;const Y=U.z;Ia[2]=void 0!==Y?Y:0;return X(Ia,U.spatialReference,da)};g.projectPolygon=function(U,da,Y=da.spatialReference,sa=0){return null!=U.spatialReference&&null!=Y&&null!=ea(U,U.spatialReference,da,Y,sa)};g.projectPolygonToWGS84ComparableLonLat=function({hasZ:U,spatialReference:da,rings:Y},sa,Ca=0){da=wa(da,ab);da=Va[da][ka.WGS84_COMPARABLE_LON_LAT];
if(null==da)return!1;U=U?Ea=>Ea:Ea=>T.set(Ia,Ea[0],Ea[1],Ca);for(const Ea of Y){Y=[];for(const Fa of Ea){const Ha=[0,0,Ca];da(U(Fa),0,Ha,0);Y.push(Ha)}sa.push(Y)}return!0};g.projectPolyline=function(U,da,Y=da.spatialReference,sa=0){return null!=U.spatialReference&&null!=Y&&null!=V(U,U.spatialReference,da,Y,sa)};g.projectPolylineToWGS84ComparableLonLat=function({hasZ:U,spatialReference:da,paths:Y},sa,Ca=0){da=wa(da,ab);da=Va[da][ka.WGS84_COMPARABLE_LON_LAT];if(null==da)return!1;U=U?Ea=>Ea:Ea=>T.set(Ia,
Ea[0],Ea[1],Ca);for(const Ea of Y){Y=[];for(const Fa of Ea){const Ha=[0,0,Ca];da(U(Fa),0,Ha,0);Y.push(Ha)}sa.push(Y)}return!0};g.projectVectorToDehydratedPoint=function(U,da,Y){return fa(U,da,0,Ia,Y.spatialReference,0,1)?(Y.x=Ia[0],Y.y=Ia[1],Y.z=Ia[2],Y):null};g.projectVectorToPoint=function(U,da,Y){if(null==da||null==Y)return null;const sa=new m({spatialReference:Y});return fa(U,da,0,Ia,Y,0,1)?(sa.x=Ia[0],sa.y=Ia[1],sa.z=Ia[2],sa):null};g.projectVectorToVector=P;g.projectVectorToWGS84ComparableLonLat=
function(U,da,Y){return X(U,da,Y)};g.projectWithoutEngine=A;g.projectXYZToVector=D;g.sphericalPCPFtoLonLatElevation=Z;g.test={get loadPromise(){return Ra}};g.tryProjectWithZConversion=E;g.unload=function(){Ra=Qa=Ma=null;Ka={}};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(N,g,F){F=function(C){function t(){return C.apply(this,
arguments)||this}g._inherits(t,C);t.prototype.notify=function(){var W=this._observers;if(W&&0<W.length){W=W.slice();for(const ba of W)ba.onInvalidated(),ba.onCommitted()}};return g._createClass(t)}(F.ObservableBase);N.SimpleObservable=F;Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(N,g,F){function C(e,q){e[0]=q[0];e[1]=q[1];e[2]=q[2];e[3]=q[3];e[4]=q[4];e[5]=q[5];e[6]=q[6];e[7]=q[7];e[8]=q[8];e[9]=q[9];
e[10]=q[10];e[11]=q[11];e[12]=q[12];e[13]=q[13];e[14]=q[14];e[15]=q[15];return e}function t(e,q,O,S,la,na,ra,qa,ta,ua,za,va,Da,Z,oa,ca,pa){e[0]=q;e[1]=O;e[2]=S;e[3]=la;e[4]=na;e[5]=ra;e[6]=qa;e[7]=ta;e[8]=ua;e[9]=za;e[10]=va;e[11]=Da;e[12]=Z;e[13]=oa;e[14]=ca;e[15]=pa;return e}function W(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function ba(e,q){if(e===q){const O=q[1],S=q[2],la=q[3],na=q[6],ra=q[7],qa=q[11];e[1]=
q[4];e[2]=q[8];e[3]=q[12];e[4]=O;e[6]=q[9];e[7]=q[13];e[8]=S;e[9]=na;e[11]=q[14];e[12]=la;e[13]=ra;e[14]=qa}else e[0]=q[0],e[1]=q[4],e[2]=q[8],e[3]=q[12],e[4]=q[1],e[5]=q[5],e[6]=q[9],e[7]=q[13],e[8]=q[2],e[9]=q[6],e[10]=q[10],e[11]=q[14],e[12]=q[3],e[13]=q[7],e[14]=q[11],e[15]=q[15];return e}function R(e,q){K(e,q)||W(e);return e}function K(e,q){const O=q[0],S=q[1],la=q[2],na=q[3],ra=q[4],qa=q[5],ta=q[6],ua=q[7],za=q[8],va=q[9],Da=q[10],Z=q[11],oa=q[12],ca=q[13],pa=q[14];q=q[15];const xa=O*qa-S*ra,
ja=O*ta-la*ra,ya=O*ua-na*ra,Aa=S*ta-la*qa,Ba=S*ua-na*qa,Ga=la*ua-na*ta,Ja=za*ca-va*oa,Ua=za*pa-Da*oa,Sa=za*q-Z*oa,Ma=va*pa-Da*ca,Qa=va*q-Z*ca,Ra=Da*q-Z*pa;let Ka=xa*Ra-ja*Qa+ya*Ma+Aa*Sa-Ba*Ua+Ga*Ja;if(!Ka)return null;Ka=1/Ka;e[0]=(qa*Ra-ta*Qa+ua*Ma)*Ka;e[1]=(la*Qa-S*Ra-na*Ma)*Ka;e[2]=(ca*Ga-pa*Ba+q*Aa)*Ka;e[3]=(Da*Ba-va*Ga-Z*Aa)*Ka;e[4]=(ta*Sa-ra*Ra-ua*Ua)*Ka;e[5]=(O*Ra-la*Sa+na*Ua)*Ka;e[6]=(pa*ya-oa*Ga-q*ja)*Ka;e[7]=(za*Ga-Da*ya+Z*ja)*Ka;e[8]=(ra*Qa-qa*Sa+ua*Ja)*Ka;e[9]=(S*Sa-O*Qa-na*Ja)*Ka;e[10]=
(oa*Ba-ca*ya+q*xa)*Ka;e[11]=(va*ya-za*Ba-Z*xa)*Ka;e[12]=(qa*Ua-ra*Ma-ta*Ja)*Ka;e[13]=(O*Ma-S*Ua+la*Ja)*Ka;e[14]=(ca*ja-oa*Aa-pa*xa)*Ka;e[15]=(za*Aa-va*ja+Da*xa)*Ka;return e}function M(e,q){const O=q[0],S=q[1],la=q[2],na=q[3],ra=q[4],qa=q[5],ta=q[6],ua=q[7],za=q[8],va=q[9],Da=q[10],Z=q[11],oa=q[12],ca=q[13],pa=q[14];q=q[15];e[0]=qa*(Da*q-Z*pa)-va*(ta*q-ua*pa)+ca*(ta*Z-ua*Da);e[1]=-(S*(Da*q-Z*pa)-va*(la*q-na*pa)+ca*(la*Z-na*Da));e[2]=S*(ta*q-ua*pa)-qa*(la*q-na*pa)+ca*(la*ua-na*ta);e[3]=-(S*(ta*Z-ua*
Da)-qa*(la*Z-na*Da)+va*(la*ua-na*ta));e[4]=-(ra*(Da*q-Z*pa)-za*(ta*q-ua*pa)+oa*(ta*Z-ua*Da));e[5]=O*(Da*q-Z*pa)-za*(la*q-na*pa)+oa*(la*Z-na*Da);e[6]=-(O*(ta*q-ua*pa)-ra*(la*q-na*pa)+oa*(la*ua-na*ta));e[7]=O*(ta*Z-ua*Da)-ra*(la*Z-na*Da)+za*(la*ua-na*ta);e[8]=ra*(va*q-Z*ca)-za*(qa*q-ua*ca)+oa*(qa*Z-ua*va);e[9]=-(O*(va*q-Z*ca)-za*(S*q-na*ca)+oa*(S*Z-na*va));e[10]=O*(qa*q-ua*ca)-ra*(S*q-na*ca)+oa*(S*ua-na*qa);e[11]=-(O*(qa*Z-ua*va)-ra*(S*Z-na*va)+za*(S*ua-na*qa));e[12]=-(ra*(va*pa-Da*ca)-za*(qa*pa-ta*
ca)+oa*(qa*Da-ta*va));e[13]=O*(va*pa-Da*ca)-za*(S*pa-la*ca)+oa*(S*Da-la*va);e[14]=-(O*(qa*pa-ta*ca)-ra*(S*pa-la*ca)+oa*(S*ta-la*qa));e[15]=O*(qa*Da-ta*va)-ra*(S*Da-la*va)+za*(S*ta-la*qa);return e}function T(e){const q=e[0],O=e[1],S=e[2],la=e[3],na=e[4],ra=e[5],qa=e[6],ta=e[7],ua=e[8],za=e[9],va=e[10],Da=e[11],Z=e[12],oa=e[13],ca=e[14];e=e[15];return(q*ra-O*na)*(va*e-Da*ca)-(q*qa-S*na)*(za*e-Da*oa)+(q*ta-la*na)*(za*ca-va*oa)+(O*qa-S*ra)*(ua*e-Da*Z)-(O*ta-la*ra)*(ua*ca-va*Z)+(S*ta-la*qa)*(ua*oa-za*
Z)}function J(e,q,O){const S=q[0],la=q[1],na=q[2],ra=q[3],qa=q[4],ta=q[5],ua=q[6],za=q[7],va=q[8],Da=q[9],Z=q[10],oa=q[11],ca=q[12],pa=q[13],xa=q[14];q=q[15];let ja=O[0],ya=O[1],Aa=O[2],Ba=O[3];e[0]=ja*S+ya*qa+Aa*va+Ba*ca;e[1]=ja*la+ya*ta+Aa*Da+Ba*pa;e[2]=ja*na+ya*ua+Aa*Z+Ba*xa;e[3]=ja*ra+ya*za+Aa*oa+Ba*q;ja=O[4];ya=O[5];Aa=O[6];Ba=O[7];e[4]=ja*S+ya*qa+Aa*va+Ba*ca;e[5]=ja*la+ya*ta+Aa*Da+Ba*pa;e[6]=ja*na+ya*ua+Aa*Z+Ba*xa;e[7]=ja*ra+ya*za+Aa*oa+Ba*q;ja=O[8];ya=O[9];Aa=O[10];Ba=O[11];e[8]=ja*S+ya*qa+
Aa*va+Ba*ca;e[9]=ja*la+ya*ta+Aa*Da+Ba*pa;e[10]=ja*na+ya*ua+Aa*Z+Ba*xa;e[11]=ja*ra+ya*za+Aa*oa+Ba*q;ja=O[12];ya=O[13];Aa=O[14];Ba=O[15];e[12]=ja*S+ya*qa+Aa*va+Ba*ca;e[13]=ja*la+ya*ta+Aa*Da+Ba*pa;e[14]=ja*na+ya*ua+Aa*Z+Ba*xa;e[15]=ja*ra+ya*za+Aa*oa+Ba*q;return e}function w(e,q,O){const S=O[0],la=O[1];O=O[2];if(q===e)e[12]=q[0]*S+q[4]*la+q[8]*O+q[12],e[13]=q[1]*S+q[5]*la+q[9]*O+q[13],e[14]=q[2]*S+q[6]*la+q[10]*O+q[14],e[15]=q[3]*S+q[7]*la+q[11]*O+q[15];else{const na=q[0],ra=q[1],qa=q[2],ta=q[3],ua=q[4],
za=q[5],va=q[6],Da=q[7],Z=q[8],oa=q[9],ca=q[10],pa=q[11];e[0]=na;e[1]=ra;e[2]=qa;e[3]=ta;e[4]=ua;e[5]=za;e[6]=va;e[7]=Da;e[8]=Z;e[9]=oa;e[10]=ca;e[11]=pa;e[12]=na*S+ua*la+Z*O+q[12];e[13]=ra*S+za*la+oa*O+q[13];e[14]=qa*S+va*la+ca*O+q[14];e[15]=ta*S+Da*la+pa*O+q[15]}return e}function z(e,q,O){const S=O[0],la=O[1];O=O[2];e[0]=q[0]*S;e[1]=q[1]*S;e[2]=q[2]*S;e[3]=q[3]*S;e[4]=q[4]*la;e[5]=q[5]*la;e[6]=q[6]*la;e[7]=q[7]*la;e[8]=q[8]*O;e[9]=q[9]*O;e[10]=q[10]*O;e[11]=q[11]*O;e[12]=q[12];e[13]=q[13];e[14]=
q[14];e[15]=q[15];return e}function n(e,q,O,S){let la=S[0],na=S[1];S=S[2];let ra=Math.sqrt(la*la+na*na+S*S);var qa=void 0,ta=void 0;let ua=void 0,za=void 0,va=void 0,Da=void 0,Z=void 0,oa=void 0,ca=void 0,pa=void 0,xa=void 0,ja=void 0,ya=void 0,Aa=void 0,Ba=void 0,Ga=void 0,Ja=void 0,Ua=void 0,Sa=void 0,Ma=void 0,Qa=void 0,Ra=void 0;ta=qa=void 0;if(ra<F.getEpsilon())return null;ra=1/ra;la*=ra;na*=ra;S*=ra;qa=Math.sin(O);ta=Math.cos(O);ua=1-ta;za=q[0];va=q[1];Da=q[2];Z=q[3];oa=q[4];ca=q[5];pa=q[6];
xa=q[7];ja=q[8];ya=q[9];Aa=q[10];Ba=q[11];Ga=la*la*ua+ta;Ja=na*la*ua+S*qa;Ua=S*la*ua-na*qa;Sa=la*na*ua-S*qa;Ma=na*na*ua+ta;Qa=S*na*ua+la*qa;Ra=la*S*ua+na*qa;qa=na*S*ua-la*qa;ta=S*S*ua+ta;e[0]=za*Ga+oa*Ja+ja*Ua;e[1]=va*Ga+ca*Ja+ya*Ua;e[2]=Da*Ga+pa*Ja+Aa*Ua;e[3]=Z*Ga+xa*Ja+Ba*Ua;e[4]=za*Sa+oa*Ma+ja*Qa;e[5]=va*Sa+ca*Ma+ya*Qa;e[6]=Da*Sa+pa*Ma+Aa*Qa;e[7]=Z*Sa+xa*Ma+Ba*Qa;e[8]=za*Ra+oa*qa+ja*ta;e[9]=va*Ra+ca*qa+ya*ta;e[10]=Da*Ra+pa*qa+Aa*ta;e[11]=Z*Ra+xa*qa+Ba*ta;q!==e&&(e[12]=q[12],e[13]=q[13],e[14]=q[14],
e[15]=q[15]);return e}function f(e,q,O){const S=Math.sin(O);O=Math.cos(O);const la=q[4],na=q[5],ra=q[6],qa=q[7],ta=q[8],ua=q[9],za=q[10],va=q[11];q!==e&&(e[0]=q[0],e[1]=q[1],e[2]=q[2],e[3]=q[3],e[12]=q[12],e[13]=q[13],e[14]=q[14],e[15]=q[15]);e[4]=la*O+ta*S;e[5]=na*O+ua*S;e[6]=ra*O+za*S;e[7]=qa*O+va*S;e[8]=ta*O-la*S;e[9]=ua*O-na*S;e[10]=za*O-ra*S;e[11]=va*O-qa*S;return e}function m(e,q,O){const S=Math.sin(O);O=Math.cos(O);const la=q[0],na=q[1],ra=q[2],qa=q[3],ta=q[8],ua=q[9],za=q[10],va=q[11];q!==
e&&(e[4]=q[4],e[5]=q[5],e[6]=q[6],e[7]=q[7],e[12]=q[12],e[13]=q[13],e[14]=q[14],e[15]=q[15]);e[0]=la*O-ta*S;e[1]=na*O-ua*S;e[2]=ra*O-za*S;e[3]=qa*O-va*S;e[8]=la*S+ta*O;e[9]=na*S+ua*O;e[10]=ra*S+za*O;e[11]=qa*S+va*O;return e}function r(e,q,O){const S=Math.sin(O);O=Math.cos(O);const la=q[0],na=q[1],ra=q[2],qa=q[3],ta=q[4],ua=q[5],za=q[6],va=q[7];q!==e&&(e[8]=q[8],e[9]=q[9],e[10]=q[10],e[11]=q[11],e[12]=q[12],e[13]=q[13],e[14]=q[14],e[15]=q[15]);e[0]=la*O+ta*S;e[1]=na*O+ua*S;e[2]=ra*O+za*S;e[3]=qa*O+
va*S;e[4]=ta*O-la*S;e[5]=ua*O-na*S;e[6]=za*O-ra*S;e[7]=va*O-qa*S;return e}function l(e,q){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=q[0];e[13]=q[1];e[14]=q[2];e[15]=1;return e}function b(e,q){e[0]=q[0];e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=q[1];e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=q[2];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function a(e,q,O){if(0===q)return W(e);let S=O[0],la=O[1];O=O[2];let na=Math.sqrt(S*S+la*la+O*O),ra=void 0,qa=void 0,ta=void 0;
if(na<F.getEpsilon())return null;na=1/na;S*=na;la*=na;O*=na;ra=Math.sin(q);qa=Math.cos(q);ta=1-qa;e[0]=S*S*ta+qa;e[1]=la*S*ta+O*ra;e[2]=O*S*ta-la*ra;e[3]=0;e[4]=S*la*ta-O*ra;e[5]=la*la*ta+qa;e[6]=O*la*ta+S*ra;e[7]=0;e[8]=S*O*ta+la*ra;e[9]=la*O*ta-S*ra;e[10]=O*O*ta+qa;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function c(e,q){const O=Math.sin(q);q=Math.cos(q);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=q;e[6]=O;e[7]=0;e[8]=0;e[9]=-O;e[10]=q;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function d(e,
q){const O=Math.sin(q);q=Math.cos(q);e[0]=q;e[1]=0;e[2]=-O;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=O;e[9]=0;e[10]=q;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function h(e,q){const O=Math.sin(q);q=Math.cos(q);e[0]=q;e[1]=O;e[2]=0;e[3]=0;e[4]=-O;e[5]=q;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function u(e,q,O){var S=q[0],la=q[1],na=q[2],ra=q[3],qa=S+S,ta=la+la;const ua=na+na;q=S*qa;const za=S*ta;S*=ua;const va=la*ta;la*=ua;na*=ua;qa*=ra;ta*=ra;ra*=
ua;e[0]=1-(va+na);e[1]=za+ra;e[2]=S-ta;e[3]=0;e[4]=za-ra;e[5]=1-(q+na);e[6]=la+qa;e[7]=0;e[8]=S+ta;e[9]=la-qa;e[10]=1-(q+va);e[11]=0;e[12]=O[0];e[13]=O[1];e[14]=O[2];e[15]=1;return e}function k(e,q){const O=wa,S=-q[0],la=-q[1],na=-q[2],ra=q[3],qa=q[4],ta=q[5],ua=q[6],za=q[7],va=S*S+la*la+na*na+ra*ra;0<va?(O[0]=2*(qa*ra+za*S+ta*na-ua*la)/va,O[1]=2*(ta*ra+za*la+ua*S-qa*na)/va,O[2]=2*(ua*ra+za*na+qa*la-ta*S)/va):(O[0]=2*(qa*ra+za*S+ta*na-ua*la),O[1]=2*(ta*ra+za*la+ua*S-qa*na),O[2]=2*(ua*ra+za*na+qa*
la-ta*S));u(e,q,O);return e}function v(e,q){e[0]=q[12];e[1]=q[13];e[2]=q[14];return e}function p(e,q){const O=q[0],S=q[1],la=q[2],na=q[4],ra=q[5],qa=q[6],ta=q[8],ua=q[9];q=q[10];e[0]=Math.sqrt(O*O+S*S+la*la);e[1]=Math.sqrt(na*na+ra*ra+qa*qa);e[2]=Math.sqrt(ta*ta+ua*ua+q*q);return e}function B(e,q){const O=q[0]+q[5]+q[10];let S=0;0<O?(S=2*Math.sqrt(O+1),e[3]=.25*S,e[0]=(q[6]-q[9])/S,e[1]=(q[8]-q[2])/S,e[2]=(q[1]-q[4])/S):q[0]>q[5]&&q[0]>q[10]?(S=2*Math.sqrt(1+q[0]-q[5]-q[10]),e[3]=(q[6]-q[9])/S,e[0]=
.25*S,e[1]=(q[1]+q[4])/S,e[2]=(q[8]+q[2])/S):q[5]>q[10]?(S=2*Math.sqrt(1+q[5]-q[0]-q[10]),e[3]=(q[8]-q[2])/S,e[0]=(q[1]+q[4])/S,e[1]=.25*S,e[2]=(q[6]+q[9])/S):(S=2*Math.sqrt(1+q[10]-q[0]-q[5]),e[3]=(q[1]-q[4])/S,e[0]=(q[8]+q[2])/S,e[1]=(q[6]+q[9])/S,e[2]=.25*S);return e}function H(e,q,O,S){var la=q[0],na=q[1],ra=q[2],qa=q[3],ta=la+la,ua=na+na,za=ra+ra;q=la*ta;const va=la*ua;la*=za;const Da=na*ua;na*=za;ra*=za;ta*=qa;ua*=qa;qa*=za;za=S[0];const Z=S[1];S=S[2];e[0]=(1-(Da+ra))*za;e[1]=(va+qa)*za;e[2]=
(la-ua)*za;e[3]=0;e[4]=(va-qa)*Z;e[5]=(1-(q+ra))*Z;e[6]=(na+ta)*Z;e[7]=0;e[8]=(la+ua)*S;e[9]=(na-ta)*S;e[10]=(1-(q+Da))*S;e[11]=0;e[12]=O[0];e[13]=O[1];e[14]=O[2];e[15]=1;return e}function I(e,q,O,S,la){var na=q[0],ra=q[1],qa=q[2],ta=q[3],ua=na+na,za=ra+ra,va=qa+qa;q=na*ua;var Da=na*za,Z=na*va;na=ra*za;ra*=va;var oa=qa*va;qa=ta*ua;za*=ta;const ca=ta*va;var pa=S[0],xa=S[1];va=S[2];S=la[0];ta=la[1];la=la[2];ua=(1-(na+oa))*pa;const ja=(Da+ca)*pa;pa*=Z-za;Da=(Da-ca)*xa;oa=(1-(q+oa))*xa;xa*=ra+qa;Z=(Z+
za)*va;ra=(ra-qa)*va;q=(1-(q+na))*va;e[0]=ua;e[1]=ja;e[2]=pa;e[3]=0;e[4]=Da;e[5]=oa;e[6]=xa;e[7]=0;e[8]=Z;e[9]=ra;e[10]=q;e[11]=0;e[12]=O[0]+S-(ua*S+Da*ta+Z*la);e[13]=O[1]+ta-(ja*S+oa*ta+ra*la);e[14]=O[2]+la-(pa*S+xa*ta+q*la);e[15]=1;return e}function L(e,q){var O=q[0],S=q[1],la=q[2];q=q[3];var na=O+O,ra=S+S;const qa=la+la;O*=na;const ta=S*na;S*=ra;const ua=la*na,za=la*ra;la*=qa;na*=q;ra*=q;q*=qa;e[0]=1-S-la;e[1]=ta+q;e[2]=ua-ra;e[3]=0;e[4]=ta-q;e[5]=1-O-la;e[6]=za+na;e[7]=0;e[8]=ua+ra;e[9]=za-na;
e[10]=1-O-S;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function E(e,q,O,S,la,na,ra){const qa=1/(O-q),ta=1/(la-S),ua=1/(na-ra);e[0]=2*na*qa;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2*na*ta;e[6]=0;e[7]=0;e[8]=(O+q)*qa;e[9]=(la+S)*ta;e[10]=(ra+na)*ua;e[11]=-1;e[12]=0;e[13]=0;e[14]=ra*na*2*ua;e[15]=0;return e}function G(e,q,O,S,la){q=1/Math.tan(q/2);let na=void 0;e[0]=q/O;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=q;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[11]=-1;e[12]=0;e[13]=0;e[15]=0;null!=la&&Infinity!==la?(na=1/(S-la),
e[10]=(la+S)*na,e[14]=2*la*S*na):(e[10]=-1,e[14]=-2*S);return e}function A(e,q,O,S){const la=Math.tan(q.upDegrees*Math.PI/180),na=Math.tan(q.downDegrees*Math.PI/180),ra=Math.tan(q.leftDegrees*Math.PI/180);q=Math.tan(q.rightDegrees*Math.PI/180);const qa=2/(ra+q),ta=2/(la+na);e[0]=qa;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=ta;e[6]=0;e[7]=0;e[8]=-((ra-q)*qa*.5);e[9]=(la-na)*ta*.5;e[10]=S/(O-S);e[11]=-1;e[12]=0;e[13]=0;e[14]=S*O/(O-S);e[15]=0;return e}function y(e,q,O,S,la,na,ra){const qa=1/(q-O),ta=1/(S-la),
ua=1/(na-ra);e[0]=-2*qa;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*ta;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*ua;e[11]=0;e[12]=(q+O)*qa;e[13]=(la+S)*ta;e[14]=(ra+na)*ua;e[15]=1;return e}function Q(e,q,O,S){const la=q[0],na=q[1];q=q[2];let ra=la-O[0],qa=na-O[1];O=q-O[2];var ta=F.getEpsilon();if(Math.abs(ra)<ta&&Math.abs(qa)<ta&&Math.abs(O)<ta)W(e);else{var ua=1/Math.sqrt(ra*ra+qa*qa+O*O);ra*=ua;qa*=ua;O*=ua;ua=S[0];var za=S[1];ta=S[2];S=za*O-ta*qa;ta=ta*ra-ua*O;za=ua*qa-za*ra;(ua=Math.sqrt(S*S+ta*ta+za*za))?
(ua=1/ua,S*=ua,ta*=ua,za*=ua):za=ta=S=0;var va=qa*za-O*ta,Da=O*S-ra*za,Z=ra*ta-qa*S;(ua=Math.sqrt(va*va+Da*Da+Z*Z))?(ua=1/ua,va*=ua,Da*=ua,Z*=ua):Z=Da=va=0;e[0]=S;e[1]=va;e[2]=ra;e[3]=0;e[4]=ta;e[5]=Da;e[6]=qa;e[7]=0;e[8]=za;e[9]=Z;e[10]=O;e[11]=0;e[12]=-(S*la+ta*na+za*q);e[13]=-(va*la+Da*na+Z*q);e[14]=-(ra*la+qa*na+O*q);e[15]=1}}function V(e,q,O,S){const la=q[0],na=q[1];q=q[2];var ra=S[0];const qa=S[1];var ta=S[2];S=la-O[0];let ua=na-O[1];O=q-O[2];let za=S*S+ua*ua+O*O;0<za&&(za=1/Math.sqrt(za),S*=
za,ua*=za,O*=za);let va=qa*O-ta*ua;ta=ta*S-ra*O;ra=ra*ua-qa*S;za=va*va+ta*ta+ra*ra;0<za&&(za=1/Math.sqrt(za),va*=za,ta*=za,ra*=za);e[0]=va;e[1]=ta;e[2]=ra;e[3]=0;e[4]=ua*ra-O*ta;e[5]=O*va-S*ra;e[6]=S*ta-ua*va;e[7]=0;e[8]=S;e[9]=ua;e[10]=O;e[11]=0;e[12]=la;e[13]=na;e[14]=q;e[15]=1;return e}function ea(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function x(e){return Math.sqrt(e[0]**
2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function D(e,q,O){e[0]=q[0]+O[0];e[1]=q[1]+O[1];e[2]=q[2]+O[2];e[3]=q[3]+O[3];e[4]=q[4]+O[4];e[5]=q[5]+O[5];e[6]=q[6]+O[6];e[7]=q[7]+O[7];e[8]=q[8]+O[8];e[9]=q[9]+O[9];e[10]=q[10]+O[10];e[11]=q[11]+O[11];e[12]=q[12]+O[12];e[13]=q[13]+O[13];e[14]=q[14]+O[14];e[15]=q[15]+O[15];return e}function P(e,q,O){e[0]=q[0]-O[0];e[1]=q[1]-O[1];e[2]=q[2]-O[2];e[3]=q[3]-O[3];e[4]=q[4]-
O[4];e[5]=q[5]-O[5];e[6]=q[6]-O[6];e[7]=q[7]-O[7];e[8]=q[8]-O[8];e[9]=q[9]-O[9];e[10]=q[10]-O[10];e[11]=q[11]-O[11];e[12]=q[12]-O[12];e[13]=q[13]-O[13];e[14]=q[14]-O[14];e[15]=q[15]-O[15];return e}function X(e,q,O){e[0]=q[0]*O;e[1]=q[1]*O;e[2]=q[2]*O;e[3]=q[3]*O;e[4]=q[4]*O;e[5]=q[5]*O;e[6]=q[6]*O;e[7]=q[7]*O;e[8]=q[8]*O;e[9]=q[9]*O;e[10]=q[10]*O;e[11]=q[11]*O;e[12]=q[12]*O;e[13]=q[13]*O;e[14]=q[14]*O;e[15]=q[15]*O;return e}function fa(e,q,O,S){e[0]=q[0]+O[0]*S;e[1]=q[1]+O[1]*S;e[2]=q[2]+O[2]*S;e[3]=
q[3]+O[3]*S;e[4]=q[4]+O[4]*S;e[5]=q[5]+O[5]*S;e[6]=q[6]+O[6]*S;e[7]=q[7]+O[7]*S;e[8]=q[8]+O[8]*S;e[9]=q[9]+O[9]*S;e[10]=q[10]+O[10]*S;e[11]=q[11]+O[11]*S;e[12]=q[12]+O[12]*S;e[13]=q[13]+O[13]*S;e[14]=q[14]+O[14]*S;e[15]=q[15]+O[15]*S;return e}function ha(e,q){return e[0]===q[0]&&e[1]===q[1]&&e[2]===q[2]&&e[3]===q[3]&&e[4]===q[4]&&e[5]===q[5]&&e[6]===q[6]&&e[7]===q[7]&&e[8]===q[8]&&e[9]===q[9]&&e[10]===q[10]&&e[11]===q[11]&&e[12]===q[12]&&e[13]===q[13]&&e[14]===q[14]&&e[15]===q[15]}function ia(e,q){if(e===
q)return!0;const O=e[0],S=e[1],la=e[2],na=e[3],ra=e[4],qa=e[5],ta=e[6],ua=e[7],za=e[8],va=e[9],Da=e[10],Z=e[11],oa=e[12],ca=e[13],pa=e[14];e=e[15];const xa=q[0],ja=q[1],ya=q[2],Aa=q[3],Ba=q[4],Ga=q[5],Ja=q[6],Ua=q[7],Sa=q[8],Ma=q[9],Qa=q[10],Ra=q[11],Ka=q[12],cb=q[13],$a=q[14];q=q[15];const ka=F.getEpsilon();return Math.abs(O-xa)<=ka*Math.max(1,Math.abs(O),Math.abs(xa))&&Math.abs(S-ja)<=ka*Math.max(1,Math.abs(S),Math.abs(ja))&&Math.abs(la-ya)<=ka*Math.max(1,Math.abs(la),Math.abs(ya))&&Math.abs(na-
Aa)<=ka*Math.max(1,Math.abs(na),Math.abs(Aa))&&Math.abs(ra-Ba)<=ka*Math.max(1,Math.abs(ra),Math.abs(Ba))&&Math.abs(qa-Ga)<=ka*Math.max(1,Math.abs(qa),Math.abs(Ga))&&Math.abs(ta-Ja)<=ka*Math.max(1,Math.abs(ta),Math.abs(Ja))&&Math.abs(ua-Ua)<=ka*Math.max(1,Math.abs(ua),Math.abs(Ua))&&Math.abs(za-Sa)<=ka*Math.max(1,Math.abs(za),Math.abs(Sa))&&Math.abs(va-Ma)<=ka*Math.max(1,Math.abs(va),Math.abs(Ma))&&Math.abs(Da-Qa)<=ka*Math.max(1,Math.abs(Da),Math.abs(Qa))&&Math.abs(Z-Ra)<=ka*Math.max(1,Math.abs(Z),
Math.abs(Ra))&&Math.abs(oa-Ka)<=ka*Math.max(1,Math.abs(oa),Math.abs(Ka))&&Math.abs(ca-cb)<=ka*Math.max(1,Math.abs(ca),Math.abs(cb))&&Math.abs(pa-$a)<=ka*Math.max(1,Math.abs(pa),Math.abs($a))&&Math.abs(e-q)<=ka*Math.max(1,Math.abs(e),Math.abs(q))}function ma(e){const q=F.getEpsilon(),O=e[0],S=e[1],la=e[2],na=e[4],ra=e[5],qa=e[6],ta=e[8],ua=e[9];e=e[10];return Math.abs(1-(O*O+na*na+ta*ta))<=q&&Math.abs(1-(S*S+ra*ra+ua*ua))<=q&&Math.abs(1-(la*la+qa*qa+e*e))<=q}function aa(e){return 1===e[0]&&0===e[1]&&
0===e[2]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[8]&&0===e[9]&&1===e[10]}const wa=g.create();g=Object.freeze(Object.defineProperty({__proto__:null,add:D,adjoint:M,copy:C,determinant:T,equals:ia,exactEquals:ha,frob:x,fromQuat:L,fromQuat2:k,fromRotation:a,fromRotationTranslation:u,fromRotationTranslationScale:H,fromRotationTranslationScaleOrigin:I,fromScaling:b,fromTranslation:l,fromXRotation:c,fromYRotation:d,fromZRotation:h,frustum:E,getRotation:B,getScaling:p,getTranslation:v,hasIdentityRotation:aa,
identity:W,invert:K,invertOrIdentity:R,isOrthoNormal:ma,lookAt:Q,mul:J,multiply:J,multiplyScalar:X,multiplyScalarAndAdd:fa,ortho:y,perspective:G,perspectiveFromFieldOfView:A,rotate:n,rotateX:f,rotateY:m,rotateZ:r,scale:z,set:t,str:ea,sub:P,subtract:P,targetTo:V,translate:w,transpose:ba},Symbol.toStringTag,{value:"Module"}));N.add=D;N.adjoint=M;N.copy=C;N.determinant=T;N.equals=ia;N.exactEquals=ha;N.frob=x;N.fromQuat=L;N.fromQuat2=k;N.fromRotation=a;N.fromRotationTranslation=u;N.fromRotationTranslationScale=
H;N.fromRotationTranslationScaleOrigin=I;N.fromScaling=b;N.fromTranslation=l;N.fromXRotation=c;N.fromYRotation=d;N.fromZRotation=h;N.frustum=E;N.getRotation=B;N.getScaling=p;N.getTranslation=v;N.hasIdentityRotation=aa;N.identity=W;N.invert=K;N.invertOrIdentity=R;N.isOrthoNormal=ma;N.lookAt=Q;N.mat4=g;N.mul=J;N.multiply=J;N.multiplyScalar=X;N.multiplyScalarAndAdd=fa;N.ortho=y;N.perspective=G;N.perspectiveFromFieldOfView=A;N.rotate=n;N.rotateX=f;N.rotateY=m;N.rotateZ=r;N.scale=z;N.set=t;N.str=ea;N.sub=
P;N.subtract=P;N.targetTo=V;N.translate=w;N.transpose=ba})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(N,g){const F=Math.PI/180;var C=g.earth.radius;const t=g.earth.eccentricitySquared;C={a1:C*t,a2:C*t*C*t,a3:C*t*t/2,a4:C*t*C*t*2.5,a5:C*t+C*t*t/2,a6:1-t};g={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:g.earth.radius,f:g.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:g.moon.radius,
f:g.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:g.mars.radius,f:g.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,
f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},
104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,
f:0},104970:{a:593E3,f:0},104971:{a:g.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};N.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;N.earthEllipsoidConstants=C;N.spheroids=g;N.toRadians=F;Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/zscale":function(){define(["exports","../../core/unitUtils","./spatialReferenceUtils"],function(N,g,F){N.getGeometryZScaler=function(C,t,W){if(null==t||null==W||W.vcsWkid||F.equals(t,W))return null;
t=g.getMetersPerVerticalUnitForSR(t);W=g.getMetersPerVerticalUnitForSR(W);const ba=t/W;if(1===ba)return null;switch(C){case "point":case "esriGeometryPoint":return R=>{R&&null!=R.z&&(R.z*=ba)};case "polyline":case "esriGeometryPolyline":return R=>{if(R)for(const K of R.paths)for(const M of K)2<M.length&&(M[2]*=ba)};case "polygon":case "esriGeometryPolygon":return R=>{if(R)for(const K of R.rings)for(const M of K)2<M.length&&(M[2]*=ba)};case "multipoint":case "esriGeometryMultipoint":return R=>{if(R)for(const K of R.points)2<
K.length&&(K[2]*=ba)};case "extent":case "esriGeometryEnvelope":return R=>{R&&null!=R.zmin&&null!=R.zmax&&(R.zmin*=ba,R.zmax*=ba)};default:return null}};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../PixelBlock","./pixelUtils"],function(N,g,F,C){function t(h,u){return f.get(h)/f.get(u)||1}function W(h,u="geographic"){const [k,v]=h;h=Math.sqrt(k*k+v*v);let p=Math.atan2(v,
k)*m;p=(360+p)%360;"geographic"===u&&(p=(450-p)%360);return[h,p]}function ba(h,u="geographic"){let k=h[1];"geographic"===u&&(k=(450-k)%360);k%=360;h=h[0];return[h*Math.cos(k/m),h*Math.sin(k/m)]}function R(h,u,k="geographic",v=1){if(!C.isValidPixelBlock(h))return h;const {pixels:p,width:B,height:H}=h;var I=B*H;const L=p[0],E=p[1],G=h.pixelType.startsWith("f")?h.pixelType:"f32",A=F.createEmptyBand(G,I);I=F.createEmptyBand(G,I);let y=0;for(let Q=0;Q<H;Q++)for(let V=0;V<B;V++)"vector-uv"===u?([A[y],I[y]]=
W([L[y],E[y]],k),A[y]*=v):([A[y],I[y]]=ba([L[y],E[y]],k),A[y]*=v,I[y]*=v),y++;h=new F({pixelType:G,width:h.width,height:h.height,mask:h.mask,validPixelCount:h.validPixelCount,maskIsAlpha:h.maskIsAlpha,pixels:[A,I]});h.updateStatistics();return h}function K(h=0,u=0,k=Math.PI,v=!0){v&&(k=(2*Math.PI-k)%(2*Math.PI));v=v?-1:1;const p=-7*v,B=-2*v,H=-16*v,[I,L]=T(0,u+13*v,k,21.75),[E,G]=T(h-5.5,u+p,k,21.75),[A,y]=T(h+5.5,u+p,k,21.75),[Q,V]=T(h-1.5,u+B,k,21.75),[ea,x]=T(h+1.5,u+B,k,21.75),[D,P]=T(h-1.5,u+
H,k,21.75),[X,fa]=T(h+1.5,u+H,k,21.75);return[I,L,E,G,Q,V,ea,x,A,y,D,P,X,fa]}function M(h=0,u=Math.PI,k=!0){k&&(u=(2*Math.PI-u)%(2*Math.PI));var v=k?-1:1,p=5*v;const B=20*v,H=25*v;v*=2;const I=k?1:-1;k=5*I;let [L,E]=[0+k,0-B],[G,A]=[L+2*I,E],[y,Q]=[G-0*I,A+v],[V,ea]=[0-k,0-H],[x,D]=[V+0*I,ea-v],P=Math.ceil(h/5),X=Math.floor(P/10);P-=8*X;h=[];const fa=[];for(let S=0;S<P/2;S++,X--){0>=X&&1===P%2&&S===(P-1)/2&&(V=0,x=V+0*I,ea=(ea+E)/2,D=ea-v);const [la,na]=T(V,ea,u,45);if(0<X){const [ra,qa]=T(G,ea,u,
45),[ta,ua]=T(L,E,u,45);h.push(ra);h.push(qa);h.push(la);h.push(na);h.push(ta);h.push(ua)}else{const [ra,qa]=T(G,A,u,45),[ta,ua]=T(y,Q,u,45),[za,va]=T(x,D,u,45);fa.push(la);fa.push(na);fa.push(za);fa.push(va);fa.push(ta);fa.push(ua);fa.push(ra);fa.push(qa)}ea+=p;E+=p;A+=p;Q+=p;D+=p}const [ha,ia]=T(0+k,0+B,u,45);p=7*I;const [ma,aa]=T(0+p,0+B,u,45),[wa,e]=T(0+k,0-H,u,45),[q,O]=T(0+p,0-H,u,45);return{pennants:h,barbs:fa,shaft:[ha,ia,ma,aa,wa,e,q,O]}}function T(h,u,k,v=1){return[Math.sqrt(h*h+u*u)/v,
(2*Math.PI+(2*Math.PI+Math.atan2(u,h))%(2*Math.PI)-k)%(2*Math.PI)]}function J(h,u,k,v){k=t(v||"knots",k);for(v=1;v<u.length;v++)if(v===u.length-1){if(h<u[v]*k)break}else if(h<=u[v]*k)break;return Math.min(v-1,u.length-2)}function w(h,u,k,v,p){let B=0;switch(u){case "beaufort_kn":B=J(h,b,"knots",k);break;case "beaufort_km":B=J(h,b,"kilometer-per-hour",k);break;case "beaufort_ft":B=J(h,b,"feet-per-second",k);break;case "beaufort_m":B=J(h,b,"meter-per-second",k);break;case "classified_arrow":B=J(h,p??
[],v,k);break;case "ocean_current_m":B=J(h,a,"meter-per-second",k);break;case "ocean_current_kn":B=J(h,c,"knots",k)}return B}function z(h,u){const {style:k,inputUnit:v,outputUnit:p,breakValues:B}=u,H=r.fromJSON(v),I=r.fromJSON(p);let L=0,E=0;const {width:G,height:A,mask:y}=h,Q=h.pixels[0];h=h.pixels[1];var V=null!=y?y.filter(D=>0<D).length:G*A;const ea=new Float32Array(42*V);V=new Uint32Array(15*V);u=u.invertDirection?K(0,0,0,!1):l;for(let D=0;D<A;D++)for(let P=0;P<G;P++){var x=D*G+P;if(!y||y[D*G+
P]){const X=(h[x]+360)%360/180*Math.PI,fa=w(Q[x],k,H,I,B);for(let ha=0;ha<u.length;ha+=2)ea[L++]=(P+.5)/G,ea[L++]=(D+.5)/A,ea[L++]=u[ha],ea[L++]=u[ha+1]+X,ea[L++]=fa,ea[L++]=Q[x];x=7*(L/42-1);V[E++]=x;V[E++]=x+1;V[E++]=x+2;V[E++]=x+0;V[E++]=x+4;V[E++]=x+3;V[E++]=x+0;V[E++]=x+2;V[E++]=x+3;V[E++]=x+2;V[E++]=x+5;V[E++]=x+3;V[E++]=x+5;V[E++]=x+6;V[E++]=x+3}}return{vertexData:ea,indexData:V}}function n(h,u){let k=0,v=0;const {width:p,height:B,mask:H}=h;h=h.pixels[0];const I=[],L=[];var E=r.fromJSON(u.inputUnit);
E=t(E,"knots");u="wind_speed"===u.style?5:Number.MAX_VALUE;for(let A=0;A<B;A++)for(let y=0;y<p;y++){var G=h[A*p+y]*E;if((!H||H[A*p+y])&&G<u){for(let Q=0;4>Q;Q++)I[k++]=(y+.5)/p,I[k++]=(A+.5)/B,I[k++]=2>Q?-.5:.5,I[k++]=0===Q%2?-.5:.5,I[k++]=0,I[k++]=G;G=4*(k/24-1);L[v++]=G;L[v++]=G+1;L[v++]=G+2;L[v++]=G+1;L[v++]=G+2;L[v++]=G+3}}return{vertexData:new Float32Array(I),indexData:new Uint32Array(L)}}const f=new Map;f.set("meter-per-second",1);f.set("kilometer-per-hour",.277778);f.set("knots",.514444);f.set("feet-per-second",
.3048);f.set("mile-per-hour",.44704);const m=180/Math.PI,r=new g.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),l=K(0,0,0),b=[0,1,3,6,10,16,21,27,33,40,47,55,63],a=[0,.5,1,1.5,2],c=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],d=[];N.convertToLocalDirections=function(h,u,k,v="geographic"){if(!C.isValidPixelBlock(h)||null==k)return h;h="vector-magdir"===u?h.clone():R(h,u);const p=h.pixels[1];
for(let B=0;B<p.length;B++)p[B]="geographic"===v?(p[B]+k[B]+270)%360:(p[B]+360-k[B])%360;return"vector-magdir"===u?h:R(h,"vector-magdir")};N.convertVectorFieldData=R;N.convertVectorFieldUnit=function(h,u,k=1){if(1===k||!C.isValidPixelBlock(h))return h;h=h.clone();const {pixels:v,width:p,height:B}=h,H=v[0],I=v[1];let L=0;for(let E=0;E<B;E++)for(let G=0;G<p;G++)"vector-uv"===u?(H[L]*=k,I[L]*=k):H[L]*=k,L++;h.updateStatistics();return h};N.createVFMesh=function(h,u){if("simple_scalar"===u.style)u=n(h,
u);else if("wind_speed"===u.style){if(0===d.length)for(var k=0;30>k;k++)d.push(M(5*k,0,!u.invertDirection));u=r.fromJSON(u.inputUnit);u=t(u,"knots");const {width:H,height:I,mask:L}=h;k=h.pixels[0];h=h.pixels[1];const E=[],G=[];let A=0,y=0;for(let Q=0;Q<I;Q++)for(let V=0;V<H;V++){var v=Q*H+V,p=k[v]*u;if((!L||L[Q*H+V])&&5<=p){const ea=(h[v]+360)%360/180*Math.PI,{pennants:x,barbs:D,shaft:P}=d[Math.min(Math.floor(p/5),29)];if(0===x.length+D.length)continue;v=E.length/6;const X=(V+.5)/H,fa=(Q+.5)/I;for(var B=
0;B<x.length;B+=2)E[A++]=X,E[A++]=fa,E[A++]=x[B],E[A++]=x[B+1]+ea,E[A++]=0,E[A++]=p;for(B=0;B<D.length;B+=2)E[A++]=X,E[A++]=fa,E[A++]=D[B],E[A++]=D[B+1]+ea,E[A++]=0,E[A++]=p;for(B=0;B<P.length;B+=2)E[A++]=X,E[A++]=fa,E[A++]=P[B],E[A++]=P[B+1]+ea,E[A++]=0,E[A++]=p;for(p=0;p<x.length/6;p++)G[y++]=v,G[y++]=v+1,G[y++]=v+2,v+=3;for(p=0;p<D.length/8;p++)G[y++]=v,G[y++]=v+1,G[y++]=v+2,G[y++]=v+1,G[y++]=v+2,G[y++]=v+3,v+=4;G[y++]=v+0;G[y++]=v+1;G[y++]=v+2;G[y++]=v+1;G[y++]=v+3;G[y++]=v+2;v+=4}}u={vertexData:new Float32Array(E),
indexData:new Uint32Array(G)}}else u=z(h,u);return u};N.createVFMeshScalar=n;N.getUnitConversionFactor=t;N.sampleVectorField=function(h,u,k,v=[0,0],p=.5){const {width:B,height:H,mask:I}=h,[L,E]=h.pixels,[G,A]=v;h=Math.round((B-G)/k);v=Math.round((H-A)/k);var y=h*v;const Q=new Float32Array(y),V=new Float32Array(y);y=new Uint8Array(y);u="vector-uv"===u;for(let x=0;x<v;x++)for(let D=0;D<h;D++){let P=0;const X=x*h+D,fa=Math.max(0,x*k+A),ha=Math.max(0,D*k+G),ia=Math.min(H,fa+k),ma=Math.min(B,ha+k);for(let aa=
fa;aa<ia;aa++)for(let wa=ha;wa<ma;wa++){var ea=aa*B+wa;if(!I||I[ea]){P++;ea=u?[L[ea],E[ea]]:[L[ea],(360+E[ea])%360];const [e,q]=u?ea:ba(ea);Q[X]+=e;V[X]+=q}}if(P>=(ia-fa)*(ma-ha)*(1-p)){y[X]=1;const [aa,wa]=W([Q[X]/P,V[X]/P]);Q[X]=aa;V[X]=wa}else y[X]=0,Q[X]=0,V[X]=0}k=new F({width:h,height:v,pixels:[Q,V],mask:y});k.updateStatistics();return k};N.snapImageToSymbolTile=function(h,u,k,v,p){if(null==p||!p.spatialReference.equals(h.spatialReference))return{extent:h,width:Math.round(u/v),height:Math.round(k/
v),resolution:h.width/u};const B=p.xmin;p=p.ymax;u=(h.xmax-h.xmin)/u*v;k=(h.ymax-h.ymin)/k*v;h.xmin=B+Math.floor((h.xmin-B)/u)*u;h.xmax=B+Math.ceil((h.xmax-B)/u)*u;h.ymin=p+Math.floor((h.ymin-p)/k)*k;h.ymax=p+Math.ceil((h.ymax-p)/k)*k;return{extent:h,width:Math.round(h.width/u),height:Math.round(h.height/k),resolution:(u+k)/2}};N.unitKebabDict=r;N.uvComponentToVector=W;Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports",
"./GCSShiftTransform","./IdentityTransform","./PolynomialTransform"],function(N,g,F,C){const t={GCSShiftXform:g,IdentityXform:F,PolynomialXform:C},W=Object.keys(t);N.isTransformSupported=function(ba){return!ba||W.includes(ba?.type)};N.readTransform=function(ba){if(!ba?.type)return null;var R=t[ba?.type];return R?(R=new R,R.read(ba),R):null};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),
function(N,g,F,C,t,W,ba,R,K){var M;C=M=function(T){function J(){var z=T.apply(this,arguments)||this;z.type="gcs-shift";z.tolerance=1E-8;return z}N._inherits(J,T);var w=J.prototype;w.forwardTransform=function(z){z=z.clone();if("point"===z.type)return z.x>180+this.tolerance&&(z.x-=360),z;z.xmin>=180-this.tolerance?(z.xmax-=360,z.xmin-=360):z.xmax>180+this.tolerance&&(z.xmin=-180,z.xmax=180);return z};w.inverseTransform=function(z){z=z.clone();if("point"===z.type)return z.x<-this.tolerance&&(z.x+=360),
z;z.xmin<-this.tolerance&&(z.xmin+=360,z.xmax+=360);return z};w.clone=function(){return new M({tolerance:this.tolerance})};return N._createClass(J)}(K);g.__decorate([ba.enumeration({GCSShiftXform:"gcs-shift"})],C.prototype,"type",void 0);g.__decorate([F.property()],C.prototype,"tolerance",void 0);return C=M=g.__decorate([R.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],C)})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(N,g,F,C,t,W,ba,R){F=function(K){function M(){return K.apply(this,arguments)||this}N._inherits(M,K);var T=M.prototype;T.forwardTransform=function(J){return J};T.inverseTransform=function(J){return J};N._createClass(M,[{key:"affectsPixelSize",get:function(){return!1}}]);return M}(F.JSONSupport);g.__decorate([C.property()],F.prototype,"affectsPixelSize",null);g.__decorate([C.property({json:{write:!0}})],F.prototype,"spatialReference",void 0);return F=g.__decorate([R.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
F)})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/Error ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(N,g,F,C,t,W,ba,R,K,M){var T;F=T=function(J){function w(){var z=J.apply(this,arguments)||
this;z.type="identity";return z}N._inherits(w,J);w.prototype.clone=function(){return new T};return N._createClass(w)}(M);g.__decorate([R.enumeration({IdentityXform:"identity"})],F.prototype,"type",void 0);return F=T=g.__decorate([K.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],F)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T,J,w,z){function n(r,l,b){const {x:a,y:c}=l;if(2>b)return{x:r[0]+a*r[2]+c*r[4],y:r[1]+a*r[3]+c*r[5]};if(2===b){l=a*a;b=c*c;var d=a*c;return{x:r[0]+a*r[2]+c*r[4]+l*r[6]+d*r[8]+b*r[10],y:r[1]+a*r[3]+c*r[5]+l*r[7]+d*r[9]+b*r[11]}}l=a*a;b=c*c;d=a*c;const h=l*a,u=l*c,k=a*b,v=c*b;return{x:r[0]+a*r[2]+c*r[4]+l*r[6]+d*r[8]+b*r[10]+h*r[12]+u*r[14]+k*r[16]+v*r[18],y:r[1]+a*r[3]+c*r[5]+l*r[7]+d*r[9]+b*r[11]+h*r[13]+u*r[15]+k*r[17]+v*r[19]}}function f(r,l,b){const {xmin:a,ymin:c,
xmax:d,ymax:h,spatialReference:u}=l;l=[];if(2>b)l.push({x:a,y:h}),l.push({x:d,y:h}),l.push({x:a,y:c}),l.push({x:d,y:c});else{var k=10;for(var v=0;v<k;v++)l.push({x:a,y:c+(h-c)*v/(k-1)}),l.push({x:d,y:c+(h-c)*v/(k-1)});k=8;for(v=1;v<=k;v++)l.push({x:a+(d-a)*v/k,y:c}),l.push({x:a+(d-a)*v/k,y:h})}l=l.map(p=>n(r,p,b));k=l.map(p=>p.x);l=l.map(p=>p.y);return new z({xmin:Math.min.apply(null,k),xmax:Math.max.apply(null,k),ymin:Math.min.apply(null,l),ymax:Math.max.apply(null,l),spatialReference:u})}var m;
F=m=function(r){function l(){var a=r.apply(this,arguments)||this;a.polynomialOrder=1;a.type="polynomial";return a}N._inherits(l,r);var b=l.prototype;b.readForwardCoefficients=function(a,c){const {coeffX:d,coeffY:h}=c;if(!d?.length||!h?.length||d.length!==h.length)return null;a=[];for(c=0;c<d.length;c++)a.push(d[c]),a.push(h[c]);return a};b.writeForwardCoefficients=function(a,c,d){d=[];const h=[];for(let u=0;u<a?.length;u++)0===u%2?d.push(a[u]):h.push(a[u]);c.coeffX=d;c.coeffY=h};b.readInverseCoefficients=
function(a,c){const {inverseCoeffX:d,inverseCoeffY:h}=c;if(!d?.length||!h?.length||d.length!==h.length)return null;a=[];for(c=0;c<d.length;c++)a.push(d[c]),a.push(h[c]);return a};b.writeInverseCoefficients=function(a,c,d){d=[];const h=[];for(let u=0;u<a?.length;u++)0===u%2?d.push(a[u]):h.push(a[u]);c.inverseCoeffX=d;c.inverseCoeffY=h};b.forwardTransform=function(a){if("point"===a.type){const c=n(this.forwardCoefficients,a,this.polynomialOrder);return new w({x:c.x,y:c.y,spatialReference:a.spatialReference})}return f(this.forwardCoefficients,
a,this.polynomialOrder)};b.inverseTransform=function(a){if("point"===a.type){const c=n(this.inverseCoefficients,a,this.polynomialOrder);return new w({x:c.x,y:c.y,spatialReference:a.spatialReference})}return f(this.inverseCoefficients,a,this.polynomialOrder)};b.clone=function(){return new m({polynomialOrder:this.polynomialOrder,forwardCoefficients:this.forwardCoefficients?[...this.forwardCoefficients]:null,inverseCoefficients:this.inverseCoefficients?[...this.inverseCoefficients]:null})};N._createClass(l,
[{key:"inverseCoefficients",get:function(){var a=this._get("inverseCoefficients"),c=this._get("forwardCoefficients");if(!a&&c&&2>this.polynomialOrder){const [d,h,u,k,v,p]=c;a=u*p-v*k;c=v*k-u*p;a=[(v*h-d*p)/a,(u*h-d*k)/c,p/a,k/c,-v/a,-u/c]}return a},set:function(a){this._set("inverseCoefficients",a)}},{key:"affectsPixelSize",get:function(){return 0<this.polynomialOrder}}]);return l}(J);g.__decorate([C.property({json:{write:!0}})],F.prototype,"polynomialOrder",void 0);g.__decorate([C.property()],F.prototype,
"forwardCoefficients",void 0);g.__decorate([K.reader("forwardCoefficients",["coeffX","coeffY"])],F.prototype,"readForwardCoefficients",null);g.__decorate([T.writer("forwardCoefficients")],F.prototype,"writeForwardCoefficients",null);g.__decorate([C.property({json:{write:!0}})],F.prototype,"inverseCoefficients",null);g.__decorate([K.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],F.prototype,"readInverseCoefficients",null);g.__decorate([T.writer("inverseCoefficients")],F.prototype,
"writeInverseCoefficients",null);g.__decorate([C.property()],F.prototype,"affectsPixelSize",null);g.__decorate([R.enumeration({PolynomialXform:"polynomial"})],F.prototype,"type",void 0);return F=m=g.__decorate([M.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],F)})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils ./rasterRendererChecks".split(" "),
function(N,g,F,C,t,W,ba,R,K,M,T,J,w,z,n,f){function m(r){return J.isValidPixelBlock(r)&&0!==r.validPixelCount}C=function(r){function l(a){return r.call(this,a)||this}N._inherits(l,r);var b=l.prototype;b.bind=function(){const {rendererJSON:a}=this;if(!a)return{success:!1};this.lookup={rendererJSON:{}};let c;switch(a.type){case "uniqueValue":c=this._updateUVRenderer(a);break;case "rasterColormap":c=this._updateColormapRenderer(a);break;case "rasterStretch":c=this._updateStretchRenderer(a);break;case "classBreaks":c=
this._updateClassBreaksRenderer(a);break;case "rasterShadedRelief":c=this._updateShadedReliefRenderer(a);break;case "vectorField":c=this._updateVectorFieldRenderer();break;case "flowRenderer":c=this._updateFlowRenderer()}return c};b.symbolize=function(a){let c=a&&a.pixelBlock;if(!m(c))return c;if(a.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(c,a.simpleStretchParams);try{3<c.pixels.length&&(c=c.extractBands([0,1,2]));let d;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":d=
this._symbolizeColormap(c);break;case "classBreaks":d=this._symbolizeClassBreaks(c);break;case "rasterStretch":d=this._symbolizeStretch(c,a.bandIds);break;case "rasterShadedRelief":const h=a.extent;d=this._symbolizeShadedRelief(c,{isGCS:h.spatialReference.isGeographic,resolution:{x:(h.xmax-h.xmin)/c.width,y:(h.ymax-h.ymin)/c.height}})}return d}catch(d){return t.getLogger(this).error("symbolize",d.message),c}};b.simpleStretch=function(a,c){if(!m(a))return a;try{return 3<a.pixels.length&&(a=a.extractBands([0,
1,2])),w.stretch(a,{...c,isRenderer:!0})}catch(d){return t.getLogger(this).error("symbolize",d.message),a}};b.generateWebGLParameters=function(a){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const {indexedColormap:k,offset:v}=this.lookup.colormapLut||{};return{colormap:k,colormapOffset:v,type:"lut"}}const {pixelBlock:c,isGCS:d,resolution:h,bandIds:u}=a;({rendererJSON:a}=this);return"rasterStretch"===a.type?this._generateStretchWebGLParams(c,a,u):"rasterShadedRelief"===
a.type?this._generateShadedReliefWebGLParams(a,d,h??void 0):"vectorField"===a.type?this._generateVectorFieldWebGLParams(a):null};b._isLUTChanged=function(a){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const c=this.rendererJSON.colorRamp;if(a)return JSON.stringify(c)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};
b._symbolizeColormap=function(a){return this._isLUTChanged()&&!this.bind().success?a:J.colorize(a,this.lookup.colormapLut)};b._symbolizeClassBreaks=function(a){const {canUseIndexedLUT:c}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?a:c?J.colorize(a,this.lookup.colormapLut):J.remapColor(a,this.lookup.remapLut??[])};b._symbolizeStretch=function(a,c){const {rasterInfo:d}=this,{pixelType:h,bandCount:u}=d,k=this.rendererJSON;var v=["u8","u16","s8","s16"].includes(h);
let p;var {dra:B}=k;({gamma:H}=this.lookup);if("histogramEqualization"===k.stretchType){v=B?null:this.lookup?.histogramLut;c=w.getStretchCutoff(k,{rasterInfo:d,pixelBlock:a,bandIds:c,returnHistogramLut:!v});var H=w.stretch(a,{...c,gamma:H,isRenderer:!0});H=J.lookupPixels(H,{lut:B?c.histogramLut:v,offset:0})}else if(v){if(B)B=w.getStretchCutoff(k,{rasterInfo:d,pixelBlock:a,bandIds:c}),p=w.createStretchLUT({pixelType:h,...B,gamma:H,rounding:"floor"});else{if(this._isLUTChanged()&&!this.bind().success)return a;
p=this.lookup?this.lookup.stretchLut:null}if(!p)return a;1<u&&null!=c&&c.length===a?.pixels.length&&p?.lut.length===u&&(p={lut:c.map(I=>p.lut[I]),offset:p.offset});H=J.lookupPixels(a,p)}else B=w.getStretchCutoff(k,{rasterInfo:d,pixelBlock:a,bandIds:c}),H=w.stretch(a,{...B,gamma:H,isRenderer:!0});if(k.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return a;H=J.colorize(H,this.lookup?.colormapLut)}return H};b._symbolizeShadedRelief=function(a,c){var d=this.rendererJSON;c=z.hillshade(a,{...d,
...c});if(!d.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return c;d=this.lookup?this.lookup.hsvMap:null;if(!d)return c;z.tintHillshade(c,a,d,this.rasterInfo.statistics?.[0]??{min:0,max:8E3});return c};b._isVectorFieldData=function(){const {bandCount:a,dataType:c}=this.rasterInfo;return 2===a&&("vector-magdir"===c||"vector-uv"===c)};b._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};
b._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};b._updateUVRenderer=function(a){const {bandCount:c,attributeTable:d,pixelType:h}=this.rasterInfo,u=a.field1;if(!u)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const k=a.defaultSymbol;var v=1===c&&["u8","s8"].includes(h);if(!f.isUVRendererSupported(this.rasterInfo,
u)&&!v)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const p=[];if(null!=d){const B=d.fields.find(H=>"value"===H.name.toLowerCase());if(!B)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};d.features.forEach(H=>{const I=a.uniqueValueInfos?.find(L=>String(L.value)===String(H.attributes[u]))?.symbol?.color;I?p.push([H.attributes[B.name]].concat(I)):
k&&p.push([H.attributes[B.name]].concat(k.color))})}else{if("value"!==u.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};a.uniqueValueInfos?.forEach(B=>{const H=B?.symbol?.color;H?p.push([parseInt(""+B.value,10)].concat(H)):k&&p.push([parseInt(""+B.value,10)].concat(k?.color))})}if(0===p.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};
v=J.createColormapLUT({colormap:p});this.lookup={rendererJSON:a,colormapLut:v};this.canRenderInWebGL=!0;return{success:!0}};b._updateColormapRenderer=function(a){if(!f.isColormapRendererSupported(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};var c=a.colormapInfos.map(d=>[d.value].concat(d.color)).sort((d,h)=>d[0]-h[0]);if(!c||0===c.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};
c=J.createColormapLUT({colormap:c});this.lookup={rendererJSON:a,colormapLut:c};this.canRenderInWebGL=!0;return{success:!0}};b._updateShadedReliefRenderer=function(a){if(!f.isShadedReliefRendererSupported(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(a.colorRamp){var c=n.convertColorRampToColormap(a.colorRamp,{interpolateAlpha:!0});c=J.createColormapLUT({colormap:c});
const d=[],h=c.indexedColormap;for(let u=0;u<h.length;u+=4){const k=F.toHSV({r:h[u],g:h[u+1],b:h[u+2]});d.push([k.h/60,k.s/100,255*k.v/100])}this.lookup={rendererJSON:a,colormapLut:c,hsvMap:d}}else this.lookup=null;this.canRenderInWebGL=!0;return{success:!0}};b._analyzeClassBreaks=function(a){const {attributeTable:c,pixelType:d}=this.rasterInfo,h=null!=c?c.fields.find(v=>"value"===v.name.toLowerCase()):null,u=null!=c?c.fields.find(v=>v.name.toLowerCase()===a.field.toLowerCase()):null,k=null!=h&&null!==
u;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(d)||k,tableValueField:h,tableBreakField:u}};b._updateClassBreaksRenderer=function(a){var {attributeTable:c}=this.rasterInfo;const {canUseIndexedLUT:d,tableValueField:h,tableBreakField:u}=this._analyzeClassBreaks(a);var k=a.classBreakInfos;if(!k?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};k=k.sort((I,L)=>I.classMaxValue-L.classMaxValue);var v=k[k.length-1],p=a.minValue;if(!d){var B=
[];for(var H=0;H<k.length;H++)B.push({value:k[H].classMinValue??p,mappedColor:k[H].symbol.color}),p=k[H].classMaxValue;B.push({value:v.classMaxValue,mappedColor:v.symbol.color});this.lookup={rendererJSON:a,remapLut:B};this.canRenderInWebGL=!1;return{success:!0}}B=[];if(null!=c&&null!=h&&null!==u&&h!==u){v=h.name;const I=u.name,L=k[k.length-1],{classMaxValue:E}=L;p=a.minValue;for(H of c.features){c=H.attributes[v];const G=H.attributes[I],A=G===E?L:G<p?null:k.find(({classMaxValue:y})=>y>G);A&&B.push([c].concat(A.symbol.color))}}else{p=
Math.floor(a.minValue);for(H=0;H<k.length;H++){for(c=k[H];p<c.classMaxValue;p++)B.push([p].concat(c.symbol.color));p=Math.ceil(c.classMaxValue)}v.classMaxValue===p&&B.push([v.classMaxValue].concat(v.symbol.color))}k=J.createColormapLUT({colormap:B,fillUnspecified:!1});this.lookup={rendererJSON:a,colormapLut:k};this.canRenderInWebGL=!0;return{success:!0}};b._isHistogramRequired=function(a){return"percentClip"===a||"histogramEqualization"===a};b._isValidRasterStatistics=function(a){return null!=a&&
0<a.length&&null!=a[0].min&&null!=a[0].max};b._updateStretchRenderer=function(a){let {stretchType:c,dra:d}=a;if(!("none"===c||a.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||d))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var h=a.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(a.stretchType)||h?.length||d||(c="minMax");const {computeGamma:u,useGamma:k,colorRamp:v}=
a;let {gamma:p}=a;k&&u&&!p?.length&&(p=w.computeGammaValues(this.rasterInfo.pixelType,a.statistics?.length?a.statistics:this.rasterInfo.statistics));var B=this.rasterInfo.pixelType;const H=!d&&["u8","u16","s8","s16"].includes(B);"histogramEqualization"===c?(B=h.map(I=>w.createHistogramEqualizationLUT(I)),this.lookup={rendererJSON:a,histogramLut:B}):H&&(h=w.getStretchCutoff(a,{rasterInfo:this.rasterInfo}),B=w.createStretchLUT({pixelType:B,...h,gamma:k?p:null,rounding:"floor"}),this.lookup={rendererJSON:a,
stretchLut:B});v&&(B=n.convertColorRampToColormap(v,{interpolateAlpha:!0}),this.lookup||(this.lookup={rendererJSON:a}),this.lookup.colormapLut=J.createColormapLUT({colormap:B}),this.lookup.rendererJSON=a);this.lookup.gamma=k&&p?.length?p:null;this.canRenderInWebGL=!0;return{success:!0}};b._generateStretchWebGLParams=function(a,c,d){let h=null,u=null;var k=this.lookup&&this.lookup.colormapLut;c.colorRamp&&k&&(h=k.indexedColormap,u=k.offset);"histogramEqualization"===c.stretchType&&(c={...c,stretchType:"minMax"});
({gamma:k}=this.lookup);const v=!!(c.useGamma&&k&&k.some(A=>1!==A)),{minCutOff:p,maxCutOff:B,outMin:H,outMax:I}=w.getStretchCutoff(c,{rasterInfo:this.rasterInfo,pixelBlock:a,bandIds:d});var L=0;null!=a&&(L=a.getPlaneCount(),2===L&&(a=a.clone(),a.statistics=[a.statistics[0]],a.pixels=[a.pixels[0]]));({bandCount:a}=this.rasterInfo);d=Math.min(3,d?.length||L||a,a);a=new Float32Array(d);L=h||v?1:255;let E;for(E=0;E<p.length;E++)a[E]=B[E]===p[E]?0:(I-H)/(B[E]-p[E])/L;const G=new Float32Array(d);if(v&&
k)for(E=0;E<d;E++)G[E]=1<k[E]?2<k[E]?6.5+(k[E]-2)**2.5:6.5+100*(2-k[E])**4:1;return{bandCount:d,outMin:H/L,outMax:I/L,minCutOff:p,maxCutOff:B,factor:a,useGamma:v,gamma:v?k:[1,1,1],gammaCorrection:v?G:[1,1,1],colormap:h,colormapOffset:u,stretchType:c.stretchType,type:"stretch"}};b._generateShadedReliefWebGLParams=function(a,c=!1,d={x:0,y:0}){let h=null,u=null;const k=this.lookup&&this.lookup.colormapLut;a.colorRamp&&k&&(h=k.indexedColormap,u=k.offset);c=z.calculateHillshadeParams({...a,isGCS:c,resolution:d});
d=this.rasterInfo.statistics?.[0];return{...c,minValue:d?.min??0,maxValue:d?.max??8E3,hillshadeType:"traditional"===a.hillshadeType?0:1,type:"hillshade",colormap:h,colormapOffset:u}};b._generateVectorFieldWebGLParams=function(a){const {style:c,inputUnit:d,outputUnit:h,visualVariables:u,symbolTileSize:k,flowRepresentation:v}=a;let p;var B=this.rasterInfo.statistics?.[0].min??0,H=this.rasterInfo.statistics?.[0].max??50,I=u?.find(G=>"sizeInfo"===G.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:H,
maxSize:.8*k,minDataValue:B,minSize:.2*k},L=I.minDataValue??B,E=I.maxDataValue??H;H=null!=I.maxSize&&null!=I.minSize?[I.minSize/k,I.maxSize/k]:[.2,.8];"wind_speed"===c&&(H[0]=H[1]=(H[0]+H[1])/2);B=null!=L&&null!=E?[L,E]:null;if("classified_arrow"===c)if(null!=L&&null!=E&&null!=I)for(p=[],L=(I.maxDataValue-I.minDataValue)/5,E=0;6>E;E++)p.push(I.minDataValue+L*E);else p=[0,1E-6,3.5,7,10.5,14];I="flow_to"===v===("ocean_current_kn"===c||"ocean_current_m"===c)?0:Math.PI;L=u?.find(G=>"rotationInfo"===G.type);
return{breakValues:p,dataRange:B,inputUnit:d,outputUnit:h,symbolTileSize:k,symbolPercentRange:H,style:c||"single_arrow",rotation:I,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?"geographic":L?.rotationType||a.rotationType,type:"vectorField"}};return N._createClass(l)}(C.JSONSupport);g.__decorate([W.property({json:{write:!0}})],C.prototype,"rendererJSON",void 0);g.__decorate([W.property({type:T,json:{write:!0}})],C.prototype,"rasterInfo",void 0);g.__decorate([W.property({json:{write:!0}})],
C.prototype,"lookup",void 0);g.__decorate([W.property()],C.prototype,"canRenderInWebGL",void 0);return C=g.__decorate([M.subclass("esri.renderers.support.RasterSymbolizer")],C)})},"esri/renderers/support/rasterRendererChecks":function(){define(["exports"],function(N){function g(F){return["u8","s8"].includes(F.pixelType)&&null!=F.statistics?.[0]?.min&&null!=F.statistics[0]?.max&&1===F.bandCount}N.isClassBreaksSupported=function(F,C=!1){const {attributeTable:t,bandCount:W}=F;return 1===W&&(!C||null!=
t||null!=F.histograms)};N.isColormapRendererSupported=function(F,C=!1){const {bandCount:t,colormap:W,pixelType:ba}=F;return 1===t&&(!!W?.length||!C&&"u8"===ba)};N.isFlowRendererSupported=function(F){({dataType:F}=F);return"vector-uv"===F||"vector-magdir"===F};N.isShadedReliefRendererSupported=function(F){const {bandCount:C,dataType:t,pixelType:W}=F;return"elevation"===t||"generic"===t&&1===C&&("s16"===W||"s32"===W||"f32"===W||"f64"===W)};N.isSingleBand8BitRasterWithStats=g;N.isUVRendererSupported=
function(F,C){const {attributeTable:t,bandCount:W}=F;return null==t&&g(F)?!0:null==t||1<W||C&&null==t.fields.find(ba=>ba.name.toLowerCase()===C.toLowerCase())?!1:!0};N.isVectorFieldRendererSupported=function(F){({dataType:F}=F);return"vector-uv"===F||"vector-magdir"===F};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(N,g,F,C,t,W,ba,R,K){function M(b,a){const c=w(a.data,a.width,a.height,b.smoothing);return b.interpolate?(d,h)=>{const u=Math.floor(d),k=Math.floor(h);if(0>u||u>=a.width||0>k||k>=a.height)return[0,0];d-=u;h-=k;const v=u<a.width-1?u+1:u,p=k<a.height-1?k+1:k;return[(c[2*(k*a.width+u)]*(1-h)+c[2*(p*a.width+u)]*h)*(1-d)+(c[2*(k*a.width+v)]*(1-h)+c[2*(p*a.width+v)]*h)*d,(c[2*(k*a.width+u)+1]*(1-h)+c[2*(p*a.width+u)+1]*h)*(1-d)+(c[2*(k*a.width+v)+1]*(1-h)+c[2*(p*a.width+v)+1]*h)*d]}:(d,h)=>{d=Math.round(d);
h=Math.round(h);return 0>d||d>=a.width||0>h||h>=a.height?[0,0]:[c[2*(h*a.width+d)],c[2*(h*a.width+d)+1]]}}function T(b,a,c,d,h,u,k,v,p){const B=[];let H=0,[I,L]=a(c,d);I*=b.velocityScale;L*=b.velocityScale;B.push({x:c,y:d,t:H,speed:Math.sqrt(I*I+L*L)});for(let A=0;A<b.verticesPerLine;A++){let [y,Q]=a(c,d);y*=b.velocityScale;Q*=b.velocityScale;const V=Math.sqrt(y*y+Q*Q);if(V<b.minSpeedThreshold)break;const ea=y/V,x=Q/V;c+=ea*b.segmentLength;d+=x*b.segmentLength;H+=b.segmentLength/V;if(Math.acos(ea*
E+x*G)>b.maxTurnAngle)break;if(b.collisions){var E=Math.round(c*p);var G=Math.round(d*p);if(0>E||E>k-1||0>G||G>v-1)break;const D=u[G*k+E];if(-1!==D&&D!==h)break;u[G*k+E]=h}B.push({x:c,y:d,t:H,speed:V});E=ea;G=x}return B}function J(b,a,c,d){const h=[],u=new ba,k=1/Math.max(b.lineCollisionWidth,1),v=Math.round(c*k),p=Math.round(d*k),B=new Int32Array(v*p);for(var H=0;H<B.length;H++)B[H]=-1;H=[];for(let I=0;I<d;I+=b.lineSpacing)for(let L=0;L<c;L+=b.lineSpacing)H.push({x:L,y:I,sort:u.getFloat()});H.sort((I,
L)=>I.sort-L.sort);for(const {x:I,y:L}of H)u.getFloat()<b.density&&(c=T(b,a,I,L,h.length,B,v,p,k),2>c.length||h.push(c));return h}function w(b,a,c,d){if(0===d)return b;const h=Math.round(3*d),u=Array(2*h+1);var k=0;for(var v=-h;v<=h;v++){var p=Math.exp(-v*v/(d*d));u[v+h]=p;k+=p}for(d=-h;d<=h;d++)u[d+h]/=k;k=new Float32Array(b.length);for(d=0;d<c;d++)for(v=0;v<a;v++){var B=p=0;for(var H=-h;H<=h;H++)if(!(0>v+H||v+H>=a)){var I=u[H+h];p+=I*b[2*(d*a+(v+H))];B+=I*b[2*(d*a+(v+H))+1]}k[2*(d*a+v)]=p;k[2*(d*
a+v)+1]=B}b=new Float32Array(b.length);for(d=0;d<a;d++)for(v=0;v<c;v++){B=p=0;for(H=-h;H<=h;H++)0>v+H||v+H>=c||(I=u[H+h],p+=I*k[2*((v+H)*a+d)],B+=I*k[2*((v+H)*a+d)+1]);b[2*(v*a+d)]=p;b[2*(v*a+d)+1]=B}return b}function z(b,a){const c=new ba;var d=b.reduce((v,p)=>v+p.length,0);d=new Float32Array(4*d);const h=Array(b.length);let u=0,k=0;for(const v of b){b=u;for(const p of v)d[4*u]=p.x,d[4*u+1]=p.y,d[4*u+2]=p.t,d[4*u+3]=p.speed,u++;h[k++]={startVertex:b,numberOfVertices:v.length,totalTime:v[v.length-
1].t,timeSeed:a?c.getFloat():0}}return{lineVertices:d,lineDescriptors:h}}function n(b,a){function c(E,G,A,y,Q,V,ea,x){const D=9*p;let P=0;v[D+P++]=E;v[D+P++]=G;v[D+P++]=1;v[D+P++]=A;v[D+P++]=V;v[D+P++]=ea;v[D+P++]=y/2;v[D+P++]=Q/2;v[D+P++]=x;p++;v[D+P++]=E;v[D+P++]=G;v[D+P++]=-1;v[D+P++]=A;v[D+P++]=V;v[D+P++]=ea;v[D+P++]=-y/2;v[D+P++]=-Q/2;v[D+P++]=x;p++}const {lineVertices:d,lineDescriptors:h}=b;var u=b=0;for(var k of h)b+=2*k.numberOfVertices,u+=6*(k.numberOfVertices-1);const v=new Float32Array(9*
b);k=new Uint32Array(u);let p=0;b=0;for(const E of h){const {totalTime:G,timeSeed:A}=E;let y=u=null,Q=null;var B=null,H=null,I=null;for(let V=0;V<E.numberOfVertices;V++){B=d[4*(E.startVertex+V)];const ea=d[4*(E.startVertex+V)+1],x=d[4*(E.startVertex+V)+2],D=d[4*(E.startVertex+V)+3];let P=null,X=null;var L=null;let fa=null;0<V&&(P=B-u,X=ea-y,L=Math.sqrt(P*P+X*X),P/=L,X/=L,1<V?(H=P+H,I=X+I,L=Math.sqrt(H*H+I*I),H/=L,I/=L,L=Math.min(1/(H*P+I*X),a),H*=L,I*=L,L=-I,fa=H):(L=-X,fa=P),null!==L&&null!==fa&&
(c(u,y,Q,L,fa,G,A,D),k[b++]=p-2,k[b++]=p,k[b++]=p-1,k[b++]=p,k[b++]=p+1,k[b++]=p-1));u=B;y=ea;Q=x;H=P;I=X;B=D}c(u,y,Q,-I,H,G,A,B)}return{vertexData:v,indexData:k}}function f(b){function a(ia,ma){var aa=x+P,wa=D+X,e=Math.sqrt(aa*aa+wa*wa);aa/=e;wa/=e;var q=x*aa+D*wa,O=P+fa,S=X+ha;e=Math.sqrt(O*O+S*S);O/=e;S/=e;var la=P*O+X*S;e=L;var na=E,ra=G,qa=A;wa=-(wa/q);aa/=q;q=y;var ta=Q,ua=V,za=ea;S=-(S/la);O/=la;la=16*H;let va=0;for(const Da of[1,2])for(const Z of[1,2,3,4])p[la+va++]=e,p[la+va++]=na,p[la+va++]=
ra,p[la+va++]=qa,p[la+va++]=q,p[la+va++]=ta,p[la+va++]=ua,p[la+va++]=za,p[la+va++]=Da,p[la+va++]=Z,p[la+va++]=ia,p[la+va++]=ma,p[la+va++]=wa/2,p[la+va++]=aa/2,p[la+va++]=S/2,p[la+va++]=O/2,H++;B[I++]=H-8;B[I++]=H-7;B[I++]=H-6;B[I++]=H-7;B[I++]=H-5;B[I++]=H-6;B[I++]=H-4;B[I++]=H-3;B[I++]=H-2;B[I++]=H-3;B[I++]=H-1;B[I++]=H-2}function c(ia,ma,aa,wa,e,q){x=P;D=X;P=fa;X=ha;null==x&&null==D&&(x=P,D=X);if(null!=y&&null!=Q){fa=ia-y;ha=ma-Q;const O=Math.sqrt(fa*fa+ha*ha);fa/=O;ha/=O}null!=x&&null!=D&&a(e,
q);L=y;E=Q;G=V;A=ea;y=ia;Q=ma;V=aa;ea=wa}function d(ia,ma){x=P;D=X;P=fa;X=ha;null==x&&null==D&&(x=P,D=X);null!=x&&null!=D&&a(ia,ma)}const {lineVertices:h,lineDescriptors:u}=b;let k=b=0;for(var v of u){const ia=v.numberOfVertices-1;b+=8*ia;k+=12*ia}const p=new Float32Array(16*b),B=new Uint32Array(k);let H=0,I=0,L,E,G,A,y,Q,V,ea,x,D,P,X,fa,ha;for(const ia of u){ha=fa=X=P=D=x=ea=V=Q=y=A=G=E=L=null;const {totalTime:ma,timeSeed:aa}=ia;for(v=0;v<ia.numberOfVertices;v++)c(h[4*(ia.startVertex+v)],h[4*(ia.startVertex+
v)+1],h[4*(ia.startVertex+v)+2],h[4*(ia.startVertex+v)+3],ma,aa);d(ma,aa)}return{vertexData:p,indexData:B}}function m(b,a){const c=a.pixels,{width:d,height:h}=a,u=new Float32Array(d*h*2),k=a.mask||new Uint8Array(d*h*2);a.mask||k.fill(255);if("vector-uv"===b)for(b=0;b<d*h;b++)u[2*b]=c[0][b],u[2*b+1]=-c[1][b];else if("vector-magdir"===b)for(b=0;b<d*h;b++){a=c[0][b];const v=t.deg2rad(c[1][b]),p=Math.sin(v-Math.PI/2);u[2*b]=Math.cos(v-Math.PI/2)*a;u[2*b+1]=p*a}return{data:u,mask:k,width:d,height:h}}async function r(b,
a,c,d,h,u){const k={requestProjectedLocalDirections:!0,signal:u};null!=h&&(k.timeExtent=h);if("imagery"===b.type)return await b.load({signal:u}),h=b.rasterInfo.dataType,(b=await b.fetchImage(a,c,d,k))&&null!=b.pixelData&&null!=b.pixelData.pixelBlock?m(h,b.pixelData.pixelBlock):{data:new Float32Array(c*d*2),mask:new Uint8Array(c*d),width:c,height:d};await b.load({signal:u});h=b.rasterInfo.dataType;return(b=await b.fetchPixels(a,c,d,k))&&null!=b.pixelBlock?m(h,b.pixelBlock):{data:new Float32Array(c*
d*2),mask:new Uint8Array(c*d),width:c,height:d}}const l=C.getLogger("esri.views.2d.engine.flow.dataUtils");N.createAnimatedLinesData=z;N.createFlowMesh=async function(b,a,c,d){const h=performance.now();var u=M(a,c);const k=performance.now();c=J(a,u,c.width,c.height);a=performance.now();u=z(c,!0);c=performance.now();b="Streamlines"===b?n(u,10):f(u);u=performance.now();F("esri-2d-profiler")&&(l.info("I.1","_createFlowFieldFromData (ms)",Math.round(k-h)),l.info("I.2","_getStreamlines (ms)",Math.round(a-
k)),l.info("I.3","createAnimatedLinesData (ms)",Math.round(c-a)),l.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(u-c)),l.info("I.5","createFlowMesh (ms)",Math.round(u-h)),l.info("I.6","Mesh size (bytes)",b.vertexData.buffer.byteLength+b.indexData.buffer.byteLength));await Promise.resolve();W.throwIfAborted(d);return b};N.createParticlesMesh=f;N.createStreamlinesMesh=n;N.loadImagery=async function(b,a,c,d,h,u){const k=performance.now();var v=R.getInfo(a.spatialReference);if(!v)return c=
await r(b,a,c,d,h,u),F("esri-2d-profiler")&&l.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-k)),F("esri-2d-profiler")&&l.info("I.9","Number of parts",1),c;const [p,B]=v.valid,H=Math.ceil(a.width/(B-p)),I=a.width/H,L=Math.round(c/H);let E=a.xmin;const G=[];v=performance.now();for(let A=0;A<H;A++){const y=new K({xmin:E,xmax:E+I,ymin:a.ymin,ymax:a.ymax,spatialReference:a.spatialReference});G.push(r(b,y,L,d,h,u));E+=I}b=await Promise.all(G);F("esri-2d-profiler")&&l.info("I.8",
"All calls to _fetchPart (ms)",Math.round(performance.now()-v));F("esri-2d-profiler")&&l.info("I.9","Number of parts",b.length);d={data:new Float32Array(c*d*2),mask:new Uint8Array(c*d),width:c,height:d};a=0;for(const A of b){for(b=0;b<A.height;b++)for(h=0;h<A.width;h++)a+h>=c||(d.data[2*(b*c+a+h)]=A.data[2*(b*A.width+h)],d.data[2*(b*c+a+h)+1]=A.data[2*(b*A.width+h)+1],d.mask[b*c+a+h]=A.mask[b*A.width+h]);a+=A.width}F("esri-2d-profiler")&&l.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-
k));return d};Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../chunks/_rollupPluginBabelHelpers ../../geometry ../../geometry/support/GeographicTransformation ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ./rasterFunctions/rasterFunctionHelper ./rasterFunctions/rasterProjectionHelper ./rasterFunctions/stretchUtils ./rasterFunctions/vectorFieldUtils ./rasterTransforms/utils ../../renderers/support/RasterSymbolizer ../../views/2d/engine/flow/dataUtils ../../geometry/Extent ../../geometry/Point".split(" "),function(N,g,F,C,
t,W,ba,R,K,M,T,J,w,z,n){return function(){function f(){}var m=f.prototype;m.convertVectorFieldData=function(r){const l=C.fromJSON(r.pixelBlock);r=M.convertVectorFieldData(l,r.type);return Promise.resolve(null!=r?r.toJSON():null)};m.computeStatisticsHistograms=function(r){r=C.fromJSON(r.pixelBlock);r=K.computeStatisticsHistograms(r);return Promise.resolve(r)};m.decode=async function(r){return(r=await t.decode(r.data,r.options))&&r.toJSON()};m.symbolize=function(r){r.pixelBlock=C.fromJSON(r.pixelBlock);
r.extent=r.extent?z.fromJSON(r.extent):null;r=this.symbolizer.symbolize(r);return Promise.resolve(null!=r?r.toJSON():null)};m.updateSymbolizer=async function(r){this.symbolizer=J.fromJSON(r.symbolizerJSON);r.histograms&&"rasterStretch"===this.symbolizer?.rendererJSON.type&&(this.symbolizer.rendererJSON.histograms=r.histograms)};m.updateRasterFunction=async function(r){this.rasterFunction=ba.create(r.rasterFunctionJSON)};m.process=async function(r){r=this.rasterFunction.process({extent:z.fromJSON(r.extent),
primaryPixelBlocks:r.primaryPixelBlocks.map(l=>null!=l?C.fromJSON(l):null),primaryPixelSizes:r.primaryPixelSizes?.map(l=>null!=l?n.fromJSON(l):null),primaryRasterIds:r.primaryRasterIds});return null!=r?r.toJSON():null};m.stretch=function(r){r=this.symbolizer.simpleStretch(C.fromJSON(r.srcPixelBlock),r.stretchParams);return Promise.resolve(null!=r&&r.toJSON())};m.estimateStatisticsHistograms=function(r){r=K.estimateStatisticsHistograms(C.fromJSON(r.srcPixelBlock));return Promise.resolve(r)};m.split=
function(r){const l=W.split(C.fromJSON(r.srcPixelBlock),r.tileSize,r.maximumPyramidLevel);l&&l.forEach((b,a)=>{l.set(a,b?.toJSON())});return Promise.resolve(l)};m.mosaicAndTransform=async function(r){var l=r.srcPixelBlocks.map(c=>c?new C(c):null);let b=l=W.mosaic(l,r.srcMosaicSize,{blockWidths:r.blockWidths,alignmentInfo:r.alignmentInfo,clipOffset:r.clipOffset,clipSize:r.clipSize});r.coefs&&(b=W.approximateTransform(l,r.destDimension,r.coefs,r.sampleSpacing,r.interpolation));let a;r.projectDirections&&
r.gcsGrid&&(a=W.getLocalArithmeticNorthRotations(r.destDimension,r.gcsGrid),b=M.convertToLocalDirections(b,r.isUV?"vector-uv":"vector-magdir",a));return{pixelBlock:b?.toJSON(),localNorthDirections:a}};m.createFlowMesh=async function(r,l){const b={data:new Float32Array(r.flowData.buffer),mask:new Uint8Array(r.flowData.maskBuffer),width:r.flowData.width,height:r.flowData.height},{vertexData:a,indexData:c}=await w.createFlowMesh(r.meshType,r.simulationSettings,b,l.signal);return{result:{vertexBuffer:a.buffer,
indexBuffer:c.buffer},transferList:[a.buffer,c.buffer]}};m.getProjectionOffsetGrid=async function(r){const l=z.fromJSON(r.projectedExtent),b=z.fromJSON(r.srcBufferExtent);let a=null;r.datumTransformationSteps&&(a=new F({steps:r.datumTransformationSteps}));(r.includeGCSGrid||R.requirePE(l.spatialReference,b.spatialReference,a))&&await R.load();const c=r.rasterTransform?T.readTransform(r.rasterTransform):null;return R.getProjectionOffsetGrid({...r,projectedExtent:l,srcBufferExtent:b,datumTransformation:a,
rasterTransform:c})};return N._createClass(f)}()});