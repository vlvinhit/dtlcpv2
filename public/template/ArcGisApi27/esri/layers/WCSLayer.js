// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/MultiOriginJSONSupport ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Layer ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/ImageryTileMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/Field ./support/rasterDatasets/WCSRaster ../support/popupUtils".split(" "),
function(m,c,q,b,r,d,H,I,J,t,u,v,w,x,y,z,A,B,C,D,l,E,F){const G=new Set("milliseconds seconds minutes hours days weeks months years decades centuries".split(" "));b=function(n){function g(...a){a=n.call(this,...a)||this;a.coverageId=null;a.version=null;a.isReference=null;a.type="wcs";a.popupEnabled=!0;a.popupTemplate=null;a.fields=null;return a}m._inherits(g,n);var h=g.prototype;h.normalizeCtorArgs=function(a,e){return"string"===typeof a?{url:a,...e}:a};h.load=function(a){this.addResolvingPromise(this._openRaster(null!=
a?a.signal:null));return Promise.resolve(this)};h.createPopupTemplate=function(a){return F.createPopupTemplate({fields:this.rasterFields,title:this.title},a)};h._openRaster=async function(a){const e=new E({url:this.url,version:this.version,coverageId:this.coverageId,ioConfig:{sampling:"closest",...this.ioConfig,customFetchParameters:this.customParameters}});await e.open({signal:a});if(!e.rasterInfo)throw e.destroy(),new q("wcs-layer:load","cannot load resources on "+this.url);({rasterInfo:a}=e);this._set("rasterInfo",
a);this._set("spatialReference",a.spatialReference);null==this.title&&this.setAtOrigin("title",e.datasetName,"service");null==this.coverageId&&this.setAtOrigin("coverageId",e.coverageInfo.id,"service");this.setAtOrigin("tileInfo",e.rasterInfo.storageInfo.tileInfo,"service");({multidimensionalInfo:a}=a);if(null!=a&&(a=a.variables[0].dimensions.find(({name:f})=>"StdTime"===f))){let f=a.extent?.[0]??a.values[0];Array.isArray(f)&&(f=f[0]);let k=a.extent?.[1]??a.values[a.values.length-1];Array.isArray(k)&&
(k=k[1]);const p=G.has(a.intervalUnit?.toLowerCase())?a.intervalUnit?.toLowerCase():null;this.set("timeInfo",{startField:"StdTime",fullTimeExtent:{start:f,end:k},timeReference:null,interval:p?{value:a.interval,unit:p}:null})}this.raster=e;this._configDefaultSettings();this.addHandles(r.watch(()=>this.customParameters,f=>this.raster.ioConfig.customFetchParameters=f))};m._createClass(g,[{key:"coverageInfo",get:function(){return this.raster.coverageInfo}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},
{key:"rasterFields",get:function(){return[new l({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})]}}]);return g}(v.BlendLayer(B.ScaleRangeLayer(y.OperationalLayer(z.PortalLayer(w.CustomParametersMixin(x.ImageryTileMixin(C.TemporalLayer(A.RefreshableLayer(b.MultiOriginJSONMixin(u))))))))));c.__decorate([d.property({type:String,nonNullable:!0,json:{write:!0}})],b.prototype,"coverageId",void 0);c.__decorate([d.property()],b.prototype,"coverageInfo",
null);c.__decorate([d.property()],b.prototype,"version",void 0);c.__decorate([d.property()],b.prototype,"isReference",void 0);c.__decorate([d.property()],b.prototype,"raster",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"type",void 0);c.__decorate([d.property(D.popupEnabled)],b.prototype,"popupEnabled",void 0);c.__decorate([d.property()],b.prototype,"popupTemplate",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"defaultPopupTemplate",null);c.__decorate([d.property({readOnly:!0,
type:[l]})],b.prototype,"fields",void 0);c.__decorate([d.property({readOnly:!0,type:[l]})],b.prototype,"rasterFields",null);return b=c.__decorate([t.subclass("esri.layers.WCSLayer")],b)});